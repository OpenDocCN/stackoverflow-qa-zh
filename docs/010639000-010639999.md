# StackOverflow 问答 10639000-10639999

# c - CUDA 和 C 的 Makefile

> ID：10639005
> 
> 赞同：8
> 
> 时间：2012-05-17T15:44:53.207
> 
> 标签：c, cuda, makefile, nvcc

我正在开发一个使用 .c 和 .cu 文件的项目。原始包完全是用 C 语言编写的，并且有自己的 Makefile（它工作得很好）。我将 .cu 文件添加到项目中，现在我想修改 Makefile 以便将所有内容编译在一起。

这是我的尝试：

```
CC = nvcc

SOURCEDIR = ../sourcedir

EXE   = it

#C_SOURCES = $(wildcard $(SOURCEDIR)/*.c)
#CU_SOURCES = $(wildcard $(SOURCEDIR)/*.cu)

SOURCES  = $(SOURCEDIR)/it.c \
           $(SOURCEDIR)/em.c \
           $(SOURCEDIR)/art.c \
           $(SOURCEDIR)/cg.c \
           $(SOURCEDIR)/amatrix.c \
           $(SOURCEDIR)/itreadargs.c \
           $(SOURCEDIR)/sparse.c \
           $(SOURCEDIR)/misc.c \
           $(SOURCEDIR)/eval.c \
           $(SOURCEDIR)/imgtools.c \
           $(SOURCEDIR)/calc.c \
           $(SOURCEDIR)/egif_lib.c \
           $(SOURCEDIR)/dgif_lib.c \
           $(SOURCEDIR)/gif_err.c \
           $(SOURCEDIR)/gif_hash.c

CU_SOURCES = $(SOURCEDIR)/cg_cuda.cu

H_FILES = $(wildcard $(IDIR)/*.h)

IDIR      = -I../include

OBJS        = $(SOURCES:.c=.o)
CU_OBJS = $(CU_SOURCES:.cu=.o)

CFLAGS     = -O3 
#-finline-functions -Winline -Wall -falign-loops=2 -falign-jumps=2 -falign-functions=2 -Wstrict-prototypes

NVCCFLAGS  = -arch=sm_20

#CFLAGS      = -g -Wstrict-prototypes -Winline -Wall

LFLAGS      = -lm

$(EXE) : $(OBJS) $(CU_OBJS) 
    $(CC) $(CFLAGS) $(NVCCFLAGS) -o $@ $?

$(SOURCEDIR)/%.o : $(SOURCEDIR)/%.c $(H_FILES)
    $(CC) $(CFLAGS) $(IDIR) -c -o $@ $<

$(SOURCEDIR)/%.o : $(SOURCEDIR)/%.cu $(H_FILES)
    $(CC) $(NVCCFLAGS) $(IDIR) -c -o $@ $<

clean:
    rm -f $(OBJS) $(EXE) 
```

项目结构如下：

*   项目
    *   包括
    *   源目录
    *   它
    *   # 其他文件夹

其中*include*包含所有 .h 文件，*sourcedir*包含 .c 和 .cu 文件（只有一个 .cu 文件）；*它*有Makefile。

我的 Makefile 的问题是，当我在*it文件夹中进行***make**时，我收到一堆错误，告诉我具有 main() 函数的文件（*sourcedir*文件夹中的**it.c**）没有链接到任何来自其他库的函数。我的 .cu 文件也是如此。

 ****你能给我一些关于我的 Makefile 可能有什么问题的提示吗？我将以下 Stackoverflow 帖子用作参考： [makefile for C++/CUDA project](https://stackoverflow.com/questions/8960720/makefile-for-c-cuda-project)

谢谢你的帮助，
弗拉德

编辑：
这是原始的 Makefile，它适用于 .c 文件。您能帮我添加一些内容以便将 .cu 文件与其他文件一起编译吗？再次感谢。

```
CC = gcc

SOURCEDIR = ../sourcedir

EXE   = it

SOURCES  = $(SOURCEDIR)/it.c \
           $(SOURCEDIR)/em.c \
           $(SOURCEDIR)/art.c \
           $(SOURCEDIR)/cg.c \
           $(SOURCEDIR)/amatrix.c \
           $(SOURCEDIR)/itreadargs.c \
           $(SOURCEDIR)/sparse.c \
           $(SOURCEDIR)/misc.c \
           $(SOURCEDIR)/eval.c \
           $(SOURCEDIR)/imgtools.c \
           $(SOURCEDIR)/calc.c \
           $(SOURCEDIR)/egif_lib.c \
           $(SOURCEDIR)/dgif_lib.c \
           $(SOURCEDIR)/gif_err.c \
           $(SOURCEDIR)/gif_hash.c

IDIR      = -I../include

OBJS        = $(SOURCES:.c=.o)

CFLAGS     = -O3 -finline-functions -Winline -Wall -falign-loops=2 -falign-jumps=2 -falign-functions=2 -Wstrict-prototypes

#CFLAGS      = -g -Wstrict-prototypes -Winline -Wall

LFLAGS      = -lm

$(EXE) : $(OBJS)
    $(CC) $(CFLAGS) -o $(EXE) $(OBJS) $(LFLAGS)

%.o : %.c
    $(CC) -c $(IDIR) $(CFLAGS) $< -o $@

clean:
    rm -f $(OBJS) $(EXE) 
```

后期编辑：
我对 Makefile 做了一些更改，对其进行了一些清理，现在我只收到了一些错误，这些错误与 .cu 未链接到 .c 文件这一事实有关，反之亦然。

```
CC := gcc

SOURCEDIR := ../sourcedir

EXE   := it

SOURCES  := $(SOURCEDIR)/it.c \
           $(SOURCEDIR)/em.c \
           $(SOURCEDIR)/art.c \
           $(SOURCEDIR)/cg.c \
           $(SOURCEDIR)/amatrix.c \
           $(SOURCEDIR)/itreadargs.c \
           $(SOURCEDIR)/sparse.c \
           $(SOURCEDIR)/misc.c \
           $(SOURCEDIR)/eval.c \
           $(SOURCEDIR)/imgtools.c \
           $(SOURCEDIR)/calc.c \
           $(SOURCEDIR)/egif_lib.c \
           $(SOURCEDIR)/dgif_lib.c \
           $(SOURCEDIR)/gif_err.c \
           $(SOURCEDIR)/gif_hash.c

CU_SOURCES := $(SOURCEDIR)/cg_cuda.cu

IDIR      := ../include

INCLUDES := -I../include

H_FILES := $(IDIR)/analyze.h \
           $(IDIR)/calc.h \
           $(IDIR)/eval.h \
           $(IDIR)/gif_hash.h \
           $(IDIR)/gif_lib.h \
           $(IDIR)/imgtools.h \
           $(IDIR)/iradon.h \
           $(IDIR)/iradoninc.h \
           $(IDIR)/it.h \
           $(IDIR)/itini.h \
           $(IDIR)/misc.h \
           $(IDIR)/sparse.h         

CFLAGS := -g -O3

NVCCFLAGS  := -g -G -O3 -arch=sm_20

LDFLAGS     := -lGL -lGLU -lglut -lpthread -lcuda

HOST_OBJ := $(SOURCES:.c=.c.o)
DEVICE_OBJ := $(CU_SOURCES:.cu=.cu.o)

%.c.o : %.c $(HFILES)
    $(CC) -c $(INCLUDES) $(CFLAGS) $< -o $@

%.cu.o : %.cu $(H_FILES)
    nvcc -c $(INCLUDES) $(NVFLAGS) $< -o $@ 

$(EXE): $(HOST_OBJ) $(DEVICE_OBJ)
    nvcc $(NVFLAGS) $(LDFLAGS) $(INCLUDES) -o $@ $^

clean:
    rm -f $(OBJS) $(EXE) 
```

所以现在我收到这些错误：

```
nvcc  -lGL -lGLU -lglut -lpthread -lcuda -I../include -o it ../sourcedir/it.c.o ../sourcedir/em.c.o ../sourcedir/art.c.o ../sourcedir/cg.c.o ../sourcedir/amatrix.c.o ../sourcedir/itreadargs.c.o ../sourcedir/sparse.c.o ../sourcedir/misc.c.o ../sourcedir/eval.c.o ../sourcedir/imgtools.c.o ../sourcedir/calc.c.o ../sourcedir/egif_lib.c.o ../sourcedir/dgif_lib.c.o ../sourcedir/gif_err.c.o ../sourcedir/gif_hash.c.o ../sourcedir/cg_cuda.cu.o
../sourcedir/it.c.o: In function `main':
/home/vburca/CUDA_Research_2012/Recon2D/it/../sourcedir/it.c:280: undefined reference to `CG_CUDA'
../sourcedir/cg_cuda.cu.o: In function `CGUpdateAddVector(Vector*, Vector*, Vector*, float)':
tmpxft_00004e1d_00000000-1_cg_cuda.cudafe1.cpp:(.text+0x44): undefined reference to `Error(char*, ...)'
../sourcedir/cg_cuda.cu.o: In function `CG_CUDA(SparseMatrix*, Vector*, Vector*)':
tmpxft_00004e1d_00000000-1_cg_cuda.cudafe1.cpp:(.text+0x15f): undefined reference to `Print(int, char*, ...)'
tmpxft_00004e1d_00000000-1_cg_cuda.cudafe1.cpp:(.text+0x18c): undefined reference to `ReadFIF(char*)'
tmpxft_00004e1d_00000000-1_cg_cuda.cudafe1.cpp:(.text+0x1a2): undefined reference to `ImageToVector(Image*)'
tmpxft_00004e1d_00000000-1_cg_cuda.cudafe1.cpp:(.text+0x1b8): undefined reference to `FreeImage(Image*)'
tmpxft_00004e1d_00000000-1_cg_cuda.cudafe1.cpp:(.text+0x1c7): undefined reference to `DeviationVector(Vector*)'
tmpxft_00004e1d_00000000-1_cg_cuda.cudafe1.cpp:(.text+0x248): undefined reference to `Print(int, char*, ...)'
tmpxft_00004e1d_00000000-1_cg_cuda.cudafe1.cpp:(.text+0x255): undefined reference to `InitVector(int)'
tmpxft_00004e1d_00000000-1_cg_cuda.cudafe1.cpp:(.text+0x269): undefined reference to `InitVector(int)'
tmpxft_00004e1d_00000000-1_cg_cuda.cudafe1.cpp:(.text+0x27d): undefined reference to `InitVector(int)'
tmpxft_00004e1d_00000000-1_cg_cuda.cudafe1.cpp:(.text+0x291): undefined reference to `InitVector(int)'
tmpxft_00004e1d_00000000-1_cg_cuda.cudafe1.cpp:(.text+0x2a5): undefined reference to `InitVector(int)'
tmpxft_00004e1d_00000000-1_cg_cuda.cudafe1.cpp:(.text+0x2c0): undefined reference to `Print(int, char*, ...)'
tmpxft_00004e1d_00000000-1_cg_cuda.cudafe1.cpp:(.text+0x2e0): undefined reference to `MultSparseMatrixVector(SparseMatrix*, Vector*, Vector*)'
tmpxft_00004e1d_00000000-1_cg_cuda.cudafe1.cpp:(.text+0x328): undefined reference to `MultSparseTMatrixVector(SparseMatrix*, Vector*, Vector*)'
tmpxft_00004e1d_00000000-1_cg_cuda.cudafe1.cpp:(.text+0x37c): undefined reference to `MultSparseMatrixVector(SparseMatrix*, Vector*, Vector*)'
tmpxft_00004e1d_00000000-1_cg_cuda.cudafe1.cpp:(.text+0x395): undefined reference to `MultVectorVector(Vector*, Vector*)'
tmpxft_00004e1d_00000000-1_cg_cuda.cudafe1.cpp:(.text+0x3b1): undefined reference to `Print(int, char*, ...)'
tmpxft_00004e1d_00000000-1_cg_cuda.cudafe1.cpp:(.text+0x3fb): undefined reference to `Print(int, char*, ...)'
tmpxft_00004e1d_00000000-1_cg_cuda.cudafe1.cpp:(.text+0x414): undefined reference to `MultVectorVector(Vector*, Vector*)'
tmpxft_00004e1d_00000000-1_cg_cuda.cudafe1.cpp:(.text+0x47b): undefined reference to `ConstrainVector(Vector*, float, float)'
tmpxft_00004e1d_00000000-1_cg_cuda.cudafe1.cpp:(.text+0x4ce): undefined reference to `MultSparseTMatrixVector(SparseMatrix*, Vector*, Vector*)'
tmpxft_00004e1d_00000000-1_cg_cuda.cudafe1.cpp:(.text+0x4e7): undefined reference to `MultVectorVector(Vector*, Vector*)'
tmpxft_00004e1d_00000000-1_cg_cuda.cudafe1.cpp:(.text+0x55b): undefined reference to `MultSparseMatrixVector(SparseMatrix*, Vector*, Vector*)'
tmpxft_00004e1d_00000000-1_cg_cuda.cudafe1.cpp:(.text+0x581): undefined reference to `SaveIteration(Vector*, int, char*)'
tmpxft_00004e1d_00000000-1_cg_cuda.cudafe1.cpp:(.text+0x5ab): undefined reference to `L2NormVector(Vector*, Vector*, float)'
tmpxft_00004e1d_00000000-1_cg_cuda.cudafe1.cpp:(.text+0x602): undefined reference to `Print(int, char*, ...)'
tmpxft_00004e1d_00000000-1_cg_cuda.cudafe1.cpp:(.text+0x61f): undefined reference to `VectorToImage(Vector*, int, int)'
tmpxft_00004e1d_00000000-1_cg_cuda.cudafe1.cpp:(.text+0x650): undefined reference to `L2NormVector(Vector*, Vector*, float)'
tmpxft_00004e1d_00000000-1_cg_cuda.cudafe1.cpp:(.text+0x66a): undefined reference to `Print(int, char*, ...)'
tmpxft_00004e1d_00000000-1_cg_cuda.cudafe1.cpp:(.text+0x679): undefined reference to `FreeVector(Vector*)'
tmpxft_00004e1d_00000000-1_cg_cuda.cudafe1.cpp:(.text+0x69c): undefined reference to `RenameImage(Image*, char*)'
collect2: ld returned 1 exit status
make: *** [it] Error 1 
```

感谢您耐心阅读我的帖子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T20:00:50.783

好的，这将需要几次迭代。试试这个并评论结果：

```
CC = nvcc

SOURCEDIR = ../sourcedir

EXE   = it

SOURCES  = $(SOURCEDIR)/it.c \
           $(SOURCEDIR)/em.c \
           $(SOURCEDIR)/art.c \
           $(SOURCEDIR)/cg.c \
           $(SOURCEDIR)/amatrix.c \
           $(SOURCEDIR)/itreadargs.c \
           $(SOURCEDIR)/sparse.c \
           $(SOURCEDIR)/misc.c \
           $(SOURCEDIR)/eval.c \
           $(SOURCEDIR)/imgtools.c \
           $(SOURCEDIR)/calc.c \
           $(SOURCEDIR)/egif_lib.c \
           $(SOURCEDIR)/dgif_lib.c \
           $(SOURCEDIR)/gif_err.c \
           $(SOURCEDIR)/gif_hash.c

IDIR      = -I../include

OBJS        = $(SOURCES:.c=.o)

CFLAGS     = -O3

NVCCFLAGS  = -arch=sm_20

LFLAGS      = -lm

$(EXE) : $(OBJS) $(SOURCEDIR)/cg_cuda.o
    $(CC) $(CFLAGS) -o $@ $^ $(LFLAGS)

$(SOURCEDIR)/%.o : $(SOURCEDIR)/%.c
    $(CC) $(NVCCFLAGS) $(IDIR) -c -o $@ $<

$(SOURCEDIR)/%.o : $(SOURCEDIR)/%.cu $(H_FILES)
    $(CC) $(NVCCFLAGS) $(IDIR) -c -o $@ $<

clean:
    rm -f $(OBJS) $(EXE) 
```

**编辑：第 2 轮**
我修改了 makefile。尝试`make clean ; make`并记下结果。然后尝试`make ../sourcedir/cg_cuda.o`。

**编辑：第 3 轮**
好吧，再试一次：`make clean ; make`。****

# apache-flex - 无法从 Flex 应用程序调用外部 servlet

> ID：10639006
> 
> 赞同：0
> 
> 时间：2012-05-17T15:44:59.393
> 
> 标签：apache-flex, servlets, securityexception

我正在从基于浏览器的 Flex 应用程序中调用 servlet，但出现以下异常：

```
Error #2044: Unhandled securityError:. text=Error #2170: Security sandbox violation: http://MyURL/web-player/WebPlayer.swf cannot send HTTP headers to http:/MyOtherUrl:1936/ImageUpload.
      at WebPlayer/screenGrab()
      at WebPlayer/__exportImageButton_click() 
```

我有以下 crossdomain.xml 来自

```
http://MyOtherUrl/ 
```

和

```
http://MyOtherUrl:1936/ 
```

（提供 servlet 的端口）。

```
<?xml version="1.0"?>
<!DOCTYPE cross-domain-policy SYSTEM "http://www.adobe.com/xml/dtds/cross-domain-policy.dtd">
  <cross-domain-policy>
  <allow-access-from domain="*" />
  <allow-http-request-headers-from domain='*' headers="*" secure="false"/>
  <site-control permitted-cross-domain-policies="all"/>
</cross-domain-policy> 
```

我究竟做错了什么？

* * *

编辑以包含代码

* * *

```
var urlRequest:URLRequest = new URLRequest();
urlRequest.url = "http://MyUrl:1936/ImageUpload";
urlRequest.contentType = 'multipart/form-data; boundary=' + UploadPostHelper.getBoundary();
urlRequest.method = URLRequestMethod.POST;
var params:Object = new Object();
params.userId = userId;
params.videoId = videoId;
urlRequest.data = UploadPostHelper.getPostData("splash.jpg", jpegStream, params);
urlRequest.requestHeaders.push( new URLRequestHeader( 'multipart/form-data', 'image/jpg' ) );

var urlLoader:URLLoader = new URLLoader();
urlLoader.addEventListener(IOErrorEvent.IO_ERROR, onIOError);
urlLoader.dataFormat = URLLoaderDataFormat.BINARY;
urlLoader.load(urlRequest); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T18:24:37.747

尝试检查您的 crossdomain.xml 是否可以从浏览器访问。转到 MyOtherUrl:1936/crossdomain.xml

[通过http://www.charlesproxy.com/](http://www.charlesproxy.com/)检查流量 以查看错误。

# soap-client - soap4r 身份验证错误

> ID：10639008
> 
> 赞同：1
> 
> 时间：2012-05-17T15:45:04.303
> 
> 标签：soap-client, soap4r, ruby-1.8.7

我正在使用带有 ruby​​ 1.8.7p358 的soap4r，我遇到了一个奇怪的错误。我有一个endpoint_url，当我浏览它时，没有身份验证错误消息。它打印出响应。但是，当我创建一个肥皂客户端并尝试访问客户端的方法时，它给了我身份验证错误。

例如：我有一个网址（比如说）`endpoint_url.com/api/get_name.php?user_name="test"&api_key="test"` 这个链接给了我这样的回应

```
<response>
<result>
<success>1</success>
</result>
<userspage="1" numberofpages="1" numberofusers="1"><row>Sadiksha</row>
</domains>
</response> 
```

我将 rpc 驱动程序初始化为

```
 def initialize
    @username = "test"
    @apikey = "test"
    @driver = SOAP::RPC::Driver.new("endpoint_url.com/api/get_name.php", "urn:UserDetails")
  end 
```

我在同一个文件中有一个方法可以获取用户的所有统计信息

```
 def getStats (name)
      @driver.add_method('GetDetails', 'name')
      user_details = {
      'user_name' => @username,
      'api_key' => @apikey, 
      'name' => name
    } 
    result = @driver.GetDetails(user_details)
    return result 
  end 
```

当我运行程序时，它给了我错误“无法识别您的用户名和 apikey！” 我已经看了一段时间了。但是，我真的无法弄清楚可能出了什么问题！谁能让我知道我在这里做错了什么！

# mongodb - 如何在MongoDB中存储多对多关系

> ID：10639009
> 
> 赞同：2
> 
> 时间：2012-05-17T15:45:13.353
> 
> 标签：mongodb, many-to-many, mongodb-php

我认为公平地说我对 MongoDB 很陌生，今天下午刚刚安装了数据库。

我正在设法掌握存储和检索对象，但我正在努力寻找存储具有多对多关系的对象的最佳方法。

我已经遇到过 DBRef 对象并且已经开始工作了，但这似乎只支持延迟加载的方法。

有没有办法鼓励 MongoDB 急切地加载 DBRefs？
是否有更好/不同的方式来存储多对多关系？

非常感谢

抢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T18:31:57.867

所以首先，我认为你需要看看[这里的这个问题](https://stackoverflow.com/questions/4662530/)，它谈到了多对多的关系。

要理解的另一件事是“DBRefs”的性质。**MongoDB 数据库不提供任何连接功能**。

DBRef 只是几年前几个库/驱动程序实现者商定的标准。DBRef 只是一个特定符号的 JSON 对象，它提供指向某个集合中的其他文档的指针。因此，“延迟与急切”加载的实现完全特定于您正在使用的驱动程序/包装器库。

也就是说，“急切加载”的概念对于 MongoDB 来说是毫无意义的。在 SQL 中，您可以通过使用某种形式的急切加载和“提前”进行连接来潜在地节省总查询量。同样，数据库不支持连接，因此“急切加载”需要与“延迟加载”相同数量的查询。

# c# - 哈希集 性能（与 ObservableCollection 相比 )?

> ID：10639012
> 
> 赞同：3
> 
> 时间：2012-05-17T15:45:38.750
> 
> 标签：c#, performance, observablecollection, hashset

我目前正在从事一个项目，我必须管理大量独特的元素。每个元素都有约 20 个属性，每个元素都有一个公共属性 DateTime。

属性 DateTime 不是唯一的，所以我不能使用通用字典来存储我的数据。

目前我将这些元素放入 ObservableCollection 中，但是从集合中删除元素的性能非常慢，我最终要等待约 20 秒才能从约 25.000 个元素的集合中删除约 7000 个元素。

（搜索操作似乎非常有效，从 300.000 个元素的未排序集合中找到 80 个随机选择的元素只需要大约 30 毫秒）。

每个元素通过简单地返回 DateTime.GetHashCode() 来实现 GetHashCode() 方法。

我认为使用 HashSet 而不是 ObservableCollection 会大大提高我的性能，但它似乎根本没有效果......

使用通用字典更糟糕......

如果元素具有“好的”散列函数（很少有元素具有相同的散列码），HashSet 不是比 ObservableCollection 更强大吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T18:27:29.080

您必须覆盖对象的[Equals](http://msdn.microsoft.com/en-us/library/system.object.equals.aspx)方法。

因为[HashSet](http://msdn.microsoft.com/en-us/library/bb359438.aspx)使用内部[IEqualityComparer实例，该实例通常首先检查 (null)，然后使用重写的](http://msdn.microsoft.com/en-us/library/ms132151.aspx)*Equals*方法将“非空”项与另一个项进行比较：

```
class MyObject
{
    public Guid Id { get; set; }

    public override bool Equals(object other)
    {
        if (other is MyObject)
        {
            // use the 'Id' property as identifier

            MyObject myObj = (MyObject)obj;
            return myObj.Id == this.Id;
        }

        // is not a 'MyObject' based object
        return base.Equals(other);
    }
} 
```

您还可以使用字符串或与您的对象可比较的任何其他类型的对象。

编辑：

所以你可以使用 HashSet 而不是[OberservableCollection](http://msdn.microsoft.com/en-us/library/ms668604.aspx)。最后一个集合类型通常较慢，因为在每次集合更改（添加、删除、清除、插入等）时，都会触发[PropertyChanged](http://msdn.microsoft.com/en-us/library/system.collections.specialized.inotifycollectionchanged.collectionchanged)和[CollectionChanged](http://msdn.microsoft.com/en-us/library/system.collections.specialized.inotifycollectionchanged.collectionchanged)事件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T07:20:30.727

`ObservableCollection`您可以通过减少更改通知来优化性能。我编写了一个`ItemCollection`带有更新机制（`BeginUpdate`/ `EndUpdate`）的自定义集合类 the ：

```
 ItemCollection<Customer> customers = new ItemCollection<Customer>
  customers.BeginUpdate();
  customers.Add( new Customer( "Joe", "Smith" ) );
  customers.Add( new Customer( "Mary", "Jones" ) );
  customers.Add( new Customer( "Lisa", "Black" ) );
  customers.Add( new Customer( "Peter", "Brown" ) );
  customers.EndUpdate(); 
```

包含源代码的文章：[基于 XAML 的应用程序的表示模式](http://www.codeproject.com/Articles/380265/Presentation-Patterns-for-XAML-based-Applications)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T07:38:25.493

好吧，马塞尔的回答是正确的，但如果性能真的很重要，你可以稍微改进他的 equals 方法：

```
class MyObject
{
    public Guid Id { get; set; }

    public override bool Equals(object other)
    {
        MyObject myObj = obj as MyObject;

        if (myObj != null)
        {
            // use the 'Id' property as identifier
            return myObj.Id == this.Id;
        }

        // is not a 'MyObject' based object
        return base.Equals(other);
    }
} 
```

使用这种方法，您可以避免使用*昂贵的*函数来检查对象是否属于特定类型，只需调用一次并执行快速空值检查即可。有关它的更多信息，您可以查看[Eric 的这篇文章](http://blogs.msdn.com/b/ericlippert/archive/2010/09/16/is-is-as-or-is-as-is.aspx)。

# ruby-on-rails - 自定义has_many？

> ID：10639021
> 
> 赞同：0
> 
> 时间：2012-05-17T15:46:32.520
> 
> 标签：ruby-on-rails, ruby-on-rails-3, associations, has-many

我有一个使用字段`Rule`引用模型的模型。`Question``question_id`

规则`belongs_to`问题和问题`has_many`规则。

所以，我可以做到`rule.question.name`。

但是，也有一个`show_question_id`领域。它还应该引用`Question`模型，但这是我无法弄清楚的。

我希望能够做类似的事情`rule.show_question.name`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T15:50:01.380

```
belongs_to :show_question, :class_name => 'Question' 
```

Rails 从关联的名称中推断出外键和类名，所以你需要告诉它使用`Question`而不是（不存在）`ShowQuestion`

# javascript - Drupal 7 中的 JS 警告

> ID：10639023
> 
> 赞同：0
> 
> 时间：2012-05-17T15:46:33.567
> 
> 标签：javascript, drupal, drupal-7

我对这个错误有一个很大的问题，它出现在整个网站上。

> 警告：file_get_contents(../sites/all/libraries/simile_timeline/timeline_js/timeline-api.js) [function.file-get-contents]：无法打开流：_locale_parse_js_file() 中没有这样的文件或目录（第 1482 行../html/includes/locale.inc)。

我将文件权限更改为 777 但仍然是相同的消息。其他遇到同样问题的人。或任何可以提供帮助的人？:) 干杯

更新不仅发生在timeline-api.js上，还发生在许多其他JS文件上，比如forms.js

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-04T08:14:26.260

显然，如果您使用 .locale 模块，则无法获得正确的路径`base_path`。

您可能必须使用该`add_library`函数加载库，或者`path_to_theme()`如果您可以找到它。

@见：[https ://drupal.org/node/1437710](https://drupal.org/node/1437710)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T19:28:42.190

尝试在 template.php 中添加 javascript 文件，如下所示：

```
function THEMEHOOK_js_alter(&$javascript){
    $javascript[base_path().'/sites/all/libraries/simile_timeline/timeline_js/timeline-api.js'] = array(    
        "group" => -100,
        "weight" => -19.5,
        "version" => "1.0.0",
        "every_page" => true,
        "type" =>   "file",
        "scope" => "header",
        "cache" => true,
        "defer" => false,
        "preprocess" => true,
        "data" =>  base_path().'/sites/all/libraries/simile_timeline/timeline_js/timeline-api.js',
    );
} 
```

# android - 试图将树步行到 ListView 中的 RelativeLayout

> ID：10639024
> 
> 赞同：0
> 
> 时间：2012-05-17T15:46:38.190
> 
> 标签：android, android-layout, android-listview

我正在尝试处理`RelativeLayout`定义 a 中的行`ListView`应该如何布局的句柄。我越来越空了，我相信这是因为两件事之一。

一种可能性是它还没有膨胀，所以它返回 null ......虽然我已经读过这个，但我对通货膨胀的概念非常不稳定。我已经用 Java 编程了 3 周（来自 C#）。所以我不确定如何测试，更不用说处理了。例如，我所做的只是将适配器设置为列表视图....不确定什么事件或何时发生通货膨胀。

可能性二是我没有正确地走树。

我的父母：

```
<RelativeLayout 
    android:minHeight="320dp" 
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent" 
    android:id="@+id/rlay_LftDataParent" 
    android:orientation="vertical" >

<ListView 
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent"
    android:id="@+id/lstvw_LiftData" /> 
```

行定义（我试图为其设置最小高度的布局）

```
<RelativeLayout 
    android:layout_width="fill_parent"
    android:orientation="vertical" 
    android:id="@+id/rlay_LftDataRw" 
    android:layout_height="fill_parent" 
    android:background="@drawable/background">
...
</RelativeLayout> 
```

在我尝试过的活动中：（lstvw_LiftData 是我的 ListView 对象）

```
RelativeLayout RowLayout = (RelativeLayout)lstvw_LiftData.findViewById(R.id.rlay_LftDataRw); 
```

和

```
RelativeLayout RowLayout = (RelativeLayout)findViewById(R.id.rlay_LftDataRw); 
```

如果您想知道更大的图景，这是这篇文章的后续问题[Using RelativeLayout to control a ListView row height](https://stackoverflow.com/questions/10635618/using-relativelayout-to-control-a-listview-row-height)我试图让行布局填满屏幕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T16:18:15.930

您不能`View`从`ListView`带有 的行访问 a `findViewById`。而是使用适配器`RelativeLayout`在`getView`方法中获取您的参考，并在那里设置宽度和高度。你没有说你使用什么适配器，所以这里是一个简单的基本示例`ArrayAdapter`：

**编辑：** 您不要`getView()`自己调用该方法，适配器会在`getView`显示新行时自动调用该方法。关于您上次评论中的问题，如果自定义`Adapter`类是`Activity`您将使用它的内部类：

```
public class SomeActivity extends ListActivity {

     private int mHeight, mWidth;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // ...do what ever stuff you need in this activity
       // find out the height/width values:
        DisplayMetrics metrics = new DisplayMetrics();
        getWindowManager().getDefaultDisplay().getMetrics(metrics);

        mHeight = metrics.heightPixels;
        mWidth = metrics.widthPixels;   
        // set the adapter
        setListAdapter(new CustomAdapter(this,
                R.layout.adapters_listview_rowheight, R.id.textView1, items));
    }

    //you use your own adapter class
    private class CustomAdapter extends ArrayAdapter<String> {

        public CustomAdapter(Context context, int resource,
                int textViewResourceId, String[] objects) {
            super(context, resource, textViewResourceId, objects);
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
                    //do whatever logic you need here
                    // finally you end up with the RelativeLayout you'll return as the view for the row
                    // before you return set the desired values for its width and height
            rl.getLayoutParams().height = mHeight;
            rl.getLayoutParams().width = mWidth;
            return rl;
        }

    }

} 
```

如果您`Adapter`的类在另一个文件中，则使该适配器的构造函数采用`int`表示宽度和高度的两个值：

```
//the constructor
public CustomAdapter(/*whatever parameters you already have*/, int height, int width) {
    //do stuff
    //now you also have a reference for the width and height that you can use in the getView method.
} 
```

并在您的`Activity`（使用 onCreate 方法的相同代码）：

```
setListAdapter(new CustomAdapter(/*whatever parameters you already have*/, mHeight, mWidth)); 
```

我不知道这是不是你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T15:54:15.880

您可以通过`Adapter`. 在类似的东西`getView`中，但取决于`Adapter`您使用的，它可能会有所不同。

# android - 不同的应用程序签名错误？

> ID：10639031
> 
> 赞同：0
> 
> 时间：2012-05-17T15:47:25.033
> 
> 标签：android, eclipse, android-manifest

> **可能重复：**
> [由于应用程序签名不同，重新安装失败](https://stackoverflow.com/questions/2887436/re-installation-failed-due-to-different-application-signatures)

当我尝试在我的设备上运行应用程序时，eclipse 告诉我以下信息：

由于不同的应用程序签名，重新安装失败。

如何解决这样的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T15:49:01.833

您必须首先卸载应用程序*（具有旧签名的）*，然后安装具有新签名的应用程序。

注意：实际上，这就是为什么会有像这些签名这样的安全系统的原因之一：它确保没有用户会认为他正在更新应用程序，而实际上他正在用另一个可能是假的替换它*（理论上，只有真正的原作者才能用自己的签名签名）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T15:55:14.373

您可以使用删除旧的`adb uninstall name.of.app`

# mysql - mysql：如何按日期分组？

> ID：10639033
> 
> 赞同：0
> 
> 时间：2012-05-17T15:47:38.387
> 
> 标签：mysql

> **可能重复：**
> [使用 unix 时间戳记一个月内的 SQL 计数记录](https://stackoverflow.com/questions/6160990/sql-count-records-within-a-month-using-a-unix-timestamp)

我有一张这样的桌子

```
+--------+------------+         
| 编号 | 日期时间 |  
+--------+------------+   
| 1 | 1313405609 |  
| 1 | 1313144410 |  
| 2 | 1313405550 |  
| 1 | 1313405549 |  
+--------+------------+

```

datetime 是 php unix 时间，我想按日期（例如 20120517）对行进行分组并计算每个组项。因为1313405609、1313405550和1313405549的日期是20110815，所以我想要的结果是：

```
+--------+------------+------------+  
| 编号 | 日期时间 | 计数 |  
+--------+------------+------------+  
| 1 | 1313405609 | 2 |  
| 1 | 1313144410 | 1 |   
| 2 | 1313405550 | 1 |  
+--------+------------+------------+

```

我怎么能用 sql 来做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T15:57:49.927

用于`FROM_UNIXTIME`将 unix 时间戳转换为日期时间。然后用于`DATE`仅获取日期部分：

```
select
  id,
  min(datetime) as datetime,
  count(*) as Count
from
  YourTable t
group by
  id,
  date(from_unixtime(datetime)) 
```

# c++ - 尝试在与我的 EXE 项目相同的解决方案中引用 DLL 项目时，出现错误“无法打开包含文件：'iostream'

> ID：10639039
> 
> 赞同：-1
> 
> 时间：2012-05-17T15:48:04.457
> 
> 标签：c++, windows

我正在尝试创建一个游戏，然后链接到我的引擎 DLL 库，该库引用静态库，如数学、实用程序、实体、物理等。我是 DLL 的新手，我只链接到它们，从来没有实际构建它们（与静态库相同）。我正在尝试将我的控制台应用程序链接到我的引擎 DLL，但是当我在我的引擎的控制台应用程序中包含一个头文件时，我收到一个错误：

```
fatal error C1083: Cannot open include file: 'iostream': No such file or directory 
```

有谁知道我该如何解决这个问题？

另外，这是对 DLL 文件和静态库的好用吗？我正在尝试更专业地组织我的代码，即使在这样的小项目中也是如此。

编辑：我忘了提到我从引擎包含到控制台应用程序中的头文件包括 iostream 文件，如果这对你来说并不明显的话。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T15:56:30.690

请验证您是否在项目中包含了所需的头文件。

```
#include<iostream> 
```

# ruby - 在 RubyMine“Jetbrains”IDE 中重命名文件时遇到问题

> ID：10639044
> 
> 赞同：3
> 
> 时间：2012-05-17T15:48:22.600
> 
> 标签：ruby, rename, rubymine

这是一个很棒的环境，但是当我右键单击模型 .rb 文件时，如何重命名文件并不明显。

现在 RubyMine JetBrains 是一个我喜欢的出色程序，所以我不会停止使用它，我只需要解决这个简单的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T15:52:45.770

`Alt+Shift+R`当文件在项目视图面板中突出显示时，使用快捷方式重命名文件。

通常，action like`rename`是其中的一部分[`Refactoring`](https://rads.stackoverflow.com/amzn/click/com/0201485672)（因为您还需要重命名它的用法），因此您也可以`Refactor`在顶部的菜单中找到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-24T14:06:39.603

在 Windows 上的 RubyMine 2018.3 中使用：

**Shift+F6**

或者

右键单击文件名并选择 Refactor > Rename

# post - Backbone.js：带有空值的 POST 请求

> ID：10639045
> 
> 赞同：0
> 
> 时间：2012-05-17T15:48:28.853
> 
> 标签：post, backbone.js, http-post

我正在尝试发出 POST 请求。这是我的代码：

```
 var myModel = new MydModel({
            content: "ciao" 
        });
        console.log(myModel.get("content")); // "ciao"
        myModel.save(); 
```

如果我查看网络活动，它看起来像这样：

响应部分`{id:0, content:"", ……}`

在标题部分：`Request Payload {"content":"ciao"}`

这是我的模型：

```
define([], function () {
    var MyModel = Backbone.Model.extend({

        url: function url ()  
        {
            return "http://localhost/users";
        }
    });

    return MyModel;
}); 
```

是我的问题还是在服务器部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T16:13:02.903

**发送/接收与请求/响应**

*   服务器接收请求并发送响应
*   客户端发送请求并接收响应

**简而言之**

*   如果`{id:0, content:"", ……}`（响应）错误，那是你的服务器
*   如果`{"content":"asdasdsa"}`（请求）是错误的，那是你的客户

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-15T10:24:53.747

接收“Backbone-client”发送到您的 Apache 服务器的 JSON 有效负载几乎没有问题。

您需要做的就是从服务器端的输入（“php://input”，对于 PHP）手动解析 JSON 有效负载，如下所示：

```
if($_SERVER['REQUEST_METHOD'] == 'PUT' || $_SERVER['REQUEST_METHOD'] == 'POST') {  
  $postStr = file_get_contents("php://input");
  //json_decode throws error or returns null if input is invalid json
  try {
    $json = json_decode($postStr, true);
    if(empty($json)) { 
      throw new Exception("Not valid json");
    }

  //must not be json, try query str instead 
  } catch(Errfor $e) { 
    $postVars = parse_str($postStr);
    foreach($postVars as $key=>$data) {
      $_POST[$key] = $data;
    }
  }
} 
```

您可以在这里找到完整的解释：http: [//colinbookman.com/2014/04/08/php-puts-posts-and-backbone-js/](http://colinbookman.com/2014/04/08/php-puts-posts-and-backbone-js/)

# java - 如何在带有数据库的 3 个表中使用 ListSelectionListener

> ID：10639046
> 
> 赞同：0
> 
> 时间：2012-05-17T15:48:29.093
> 
> 标签：java, database, swing, jtable, listselectionlistener

我想问关于列表选择监听器的问题。在我的应用程序中，我有 3 个 Jtable，假设第一个表是 Student 表，由学生信息填充，第二个是学期表，由对应学生的一些学期（第 1 学期到第 x）填充，最后一个表是结果表，由相应学期的结果填写。

我想要做的是，当我单击学生表中的一行时，学期表将更新它的数据，例如，它将由第 1 学期到第 6 学期填充。然后，当我单击学期表中的一行时，结果表将更新是数据。

我可以使用 listelectionlistener 和覆盖 valueChanged 方法从学生表到学期表。但是我应该如何为学期表到结果表做同样的事情？我被困在这个...

*   我使用数据库将所有值检索到 jtable -

编辑：现在我使用 SwingWorker，但我有另一个问题：

1.  当 UI 显示时，主表显示一行（这是真的）
2.  当我尝试单击该行时，它没有单击，我的意思是通常你会在选定的行中获得背景，但我不会（错误->我的问题）
3.  它还会在我的子表中抛出 NullPointerException
4.  但是当我等待一段时间时，它突然又开始工作了......

我已经上传了我的示例代码，并在此处删除了不相关的代码[http://dl.dropbox.com/u/67181952/mycode.java](http://dl.dropbox.com/u/67181952/mycode.java)

子表中错误的第二个代码 [http://dl.dropbox.com/u/67181952/spk.java](http://dl.dropbox.com/u/67181952/spk.java)

我希望我解释得很好，对不起我的英语不好。

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T16:37:01.420

您可以使用`ListSelectionListener`添加到您可以通过[getSelectionModel()](http://docs.oracle.com/javase/6/docs/api/javax/swing/JTable.html#getSelectionModel%28%29)获得的选择模型。

使用表格模型维护表示的逻辑。一旦`master`表格中的选择发生更改，就会相应地更新表格的模型/模型`details`。作为数据更新的结果，模型将通知其视图（表）有关更改。并且视图将相应地刷新。

[在如何使用表格](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)中阅读有关模型的更多信息。

**编辑：**

由于您从数据库加载数据，请确保*不要从*事件调度线程 (EDT) 加载数据，以避免出现性能问题。查看[SwingWorker](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html)以在专用线程上执行冗长的操作。阅读有关[工作线程和 SwingWorker](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)的更多信息。

**编辑：以下代码上传**

您似乎误解了`SwingWorker`规格。`execute()`方法没有阻塞，它安排工作人员执行并立即返回。UI 更新应该在`process()`或`done()`方法中完成，这些方法由 EDT 上的工作人员调用。以下是您发布的代码中的功能之一的修订版：

```
public void retrieveDetailTransaction(final String noTrans){
    SwingWorker<List<TransactionDetail>, Void> worker = 
      new SwingWorker<List<TransactionDetail>, Void>() {

      public List<TransactionDetail> doInBackground() {
        List<TransactionDetail> listTransD = transDetailControl.select(noTrans);
        return listTransD;
      }

      public void done() {
        try {
           listTransDetail = get();

           transDetailModel.setListTransaction(listTransDetail);
           transactionDetailTable.setModel(transDetailModel);       

        } catch (InterruptedException ex) {
           ex.printStackTrace();
        } catch (ExecutionException ex) {
           ex.printStackTrace();
        }
      }
   };
   worker.execute();       
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T15:54:19.570

通常，我使用 MouseListener（mouseClick 事件）来处理 JTables。首先，当您在第一个表中单击时，将代表学生的对象保存在该行中，并告诉第二个表进行更新。第二个也会做同样的事情。对于每次单击，您都会保存学期对象并更新第三个表。当然，您可以使用 ListSelectionListener 执行相同的操作。我认为您已经在这样做了，但是您需要两个不同的事件侦听器。一个用于第一张桌子，另一个用于第二张桌子。

# makefile - Mochiweb：包含和编译其他库

> ID：10639051
> 
> 赞同：-1
> 
> 时间：2012-05-17T15:48:39.713
> 
> 标签：makefile, erlang, erlang-otp, mochiweb, rebar

我的应用程序使用 Mochiweb。

我注意到 Mochiweb 文件驻留在`myapp/deps/mochiweb`目录中，`rebar`并在我在目录中运行 make 时编译它们`myapp`。

我想添加`ibrowse`一些测试来向我的应用程序发出 http 请求。所以我`ibrowse`从github克隆到`myapp/deps/ibrowse`目录。

但似乎 Erlang 不知道从哪里获取`.beam`文件`ibrowse`，因此我使用该`ibrowse`模块的所有测试都失败了：

```
myapp
 ebin %%compiled tests reside here, tests which use ibrowse fail (badarg)
 deps
  mochiweb 
  ibrowse
   ebin %%compiled ibrowse module resides here
 src
 tests 
```

如何让基于 Mochiweb 的应用程序使用其他 Erlang/OTP 外部库？

我应该为此编辑 rebar.config 或 Makefile 吗？或者我应该编辑一个 _app.src 文件？

编辑：也许我应该编辑 myapp_sup.erl 文件中的目录列表？( `myapp_deps:local_path(["priv", "www"]`)

PS 我的应用程序如何知道所有 mochiweb.beam 文件所在的位置？（例如，泛型`myapp_web.erl`使用了对`mochiweb_http`模块的调用，但目录中没有`mochiweb_http.beam`）`myapp/ebin`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T06:58:22.570

rebar 中的依赖项是通过 rebar.config 文件添加的：

```
%% What dependencies we have, dependencies can be of 3 forms, an application
%% name as an atom, eg. mochiweb, a name and a version (from the .app file), or
%% an application name, a version and the SCM details on how to fetch it (SCM
%% type, location and revision). Rebar currently supports git, hg, bzr and svn.
{deps, [application_name,
        {application_name, "1.0.*"},
        {application_name, "1.0.*",
         {git, "git://github.com/basho/rebar.git", {branch, "master"}}}]}. 
```

然后，您可能想查看 Erlang 版本和使用 rebar 的版本处理。将*发布*视为对应用程序进行*分组*的一种方式。

[http://www.erlang.org/doc/design_principles/release_handling.html](http://www.erlang.org/doc/design_principles/release_handling.html)

[http://learnyousomeerlang.com/release-is-the-word](http://learnyousomeerlang.com/release-is-the-word)

[https://github.com/basho/rebar/wiki/Release-handling](https://github.com/basho/rebar/wiki/Release-handling)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T23:36:18.400

将以下代码添加到 myapp_web.erl 解决了我的问题：

```
ibrowse:start() 
```

默认情况下，Mochiweb 以相同的功能启动：

```
mochiweb_http:start()... 
```

我不确定这是否是正确的方法，但它有效。

# c# - 如何在类属性中允许可为空的 Guid？

> ID：10639052
> 
> 赞同：2
> 
> 时间：2012-05-17T15:48:49.307
> 
> 标签：c#, class, data-annotations, guid, asp.net-mvc-4

我的班级中有一个属性，我将其设为可选。唯一的问题是该属性正在使用 Guid 并且是标准要求。我不知道如何使它可以为空。

我试图完成的是扩展membershipprovider whit一个新表，组，并在组和用户之间建立一对多的链接。

物业：

```
public virtual Guid GroupId { get; set; }
public virtual Group Group { get; set; } 
```

那么我怎样才能使 Guid 属性可以为空呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T15:50:36.813

实现它`Nullable<Guid>`，又名`Guid?`：

```
public virtual Guid? GroupId { get; set; } 
```

如果您之前没有在 C# 中遇到过可为空的值类型，您可能需要[阅读它们](http://msdn.microsoft.com/en-us/library/1t3y8s4s.aspx)。

（顺便说一句，你真的需要属性是虚拟的吗？你期待不同的实现吗？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T15:51:13.710

```
Guid? 
```

应该工作得很好。

但我不认为这是你真正想要的，因为我理解正确你想要一个可选的关系？在这种情况下，您应该删除 GroupId 属性，使其成为可选关系。

第二个选项是使用如下标记关系：

```
modelBuilder.Entity<Bla>().HasOptional(g => g.Group).WithRequired(); 
```

# c++ - C++ 模板中的名称查找

> ID：10639053
> 
> 赞同：43
> 
> 时间：2012-05-17T15:48:55.237
> 
> 标签：c++, templates, inheritance

我有一些 C++ 代码在没有 -fpermissive 选项的情况下不再编译。这是我不能分享的专有代码，但我认为我已经能够提取一个简单的测试用例来证明这个问题。这是 g++ 的输出

```
template_eg.cpp: In instantiation of 'void Special_List<T>::do_other_stuff(T*) [with T = int]':
template_eg.cpp:27:35:   required from here
template_eg.cpp:18:25: error: 'next' was not declared in this scope, and no declarations were found by argument-dependent lookup at the point of instantiation [-fpermissive]
template_eg.cpp:18:25: note: declarations in dependent base 'List<int>' are not found by unqualified lookup
template_eg.cpp:18:25: note: use 'this->next' instead 
```

所以这里是产生问题的代码：

```
template<class T> class List  
{
        public: 
        void next(T*){
            cout<<"Doing some stuff"<<endl;
        }       
};

template<class T> class Special_List: public List<T>
{
    public:
        void do_other_stuff(T* item){
                next(item);
        }       
};

int main(int argc, char *argv[])
{
    Special_List<int> b;
    int test_int = 3;
    b.do_other_stuff(&test_int);
} 
```

我不是想找出如何修复代码以使其再次编译。这只是将 next(item) 更改为 this->next(item) 的问题，我试图更好地理解为什么这种更改是必要的。我在此页面上找到了解释：http: [//gcc.gnu.org/onlinedocs/gcc/Name-lookup.html](http://gcc.gnu.org/onlinedocs/gcc/Name-lookup.html) 虽然这个解释很有用，但我仍然有一些问题。我的函数采用 T*（指向类型 T 的指针）这一事实不应该使它依赖于模板参数。用我自己的话说，编译器（gcc 4.7）不应该能够找出 next() 函数在基类 List 中吗？为什么有必要在每个这样的调用前面加上 this->？我注意到 clang 3.1 表现出相同的行为，所以我假设 c++ 标准中有一些要求需要这种行为。任何人都可以为此提供理由吗？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-05-17T16:05:21.197

问题是模板分两次处理（根据标准，VS 不这样做）。在第一遍中，在类型替换之前，查找并检查不依赖于模板参数的所有内容。一旦类型被替换，从属名称将在第二遍中解析。

现在，在第一遍中，没有任何内容表明它`next`依赖于模板参数，因此它需要*在类型替换之前*解析。现在，因为基本类型是在当前模板的模板参数上模板化的，编译器无法查看它（它可能专门用于某些类型，并且在不知道`T`我们用什么类型实例化模板的情况下，我们不知道要使用哪种专门化使用，即基础*取决于*，`T`我们在知道之前检查`T`）。

The trick of adding `this->` turns `next` into a dependent name, and that in turn means that lookup is delayed until the second pass, where `T` is known, and because `T` is known, `List<T>` is also known and can be looked up into.

* * *

*EDIT*: One important detail missing in the wording of the answer above is that second phase lookup (after type substitution) will only add functions found during argument dependent lookup. That is, if `next` was a free function in a namespace associated with `T` it would be found, but it is a member on the base, which is not visible for ADL on `T`.

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-17T15:52:26.200

你需要写成`this->`：

```
this->next(item); 
```

这里`this->`的部分是必需的，因为`next()`它是从*模板*库继承的成员，如果您仔细阅读错误消息，建议它本身：

> `'List<int>'`template_eg.cpp:18:25：注意：非限定查找找不到依赖基中的声明**template_eg.cpp**
> :18:25：注意：**改用`'this->next'`**

阅读这篇解释了 C++ 中的两阶段名称查找的文章：

*   [可怕的两阶段名称查找](https://blog.llvm.org/2009/12/dreaded-two-phase-name-lookup.html)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-17T15:51:54.130

如果你的*基类*是一个模板实例，那么就没有办法知道它`next`引用了基类中的一个名称——毕竟，这个名称甚至不需要存在（考虑专业化）！因此，*您*必须通过说、 或或通过在派生类模板前面添加来向编译器断言`next`实际上是类成员。`this->``List<T>::next``using List<T>::next;`

# python - PyMySQL 错误/异常（文件）数据加载到远程 MySQL 实例

> ID：10639058
> 
> 赞同：0
> 
> 时间：2012-05-17T15:49:01.043
> 
> 标签：python, mysql, mysql-python, python-db-api

我正在使用[PyMySQL-0.5.0](https://github.com/petehunt/PyMySQL)并在将数据从文件加载到远程 MySQL 实例时面临一个模糊的错误/异常。在执行“加载数据本地 infile ...”语句时，我看到一个异常，上面写着：`The used command is not allowed with this MySQL version`.

任何线索，如果 PyMySQL 完全支持此操作（和/或其他版本是否支持此操作）

PS：

1) 错误详情：

```
2012-05-17 11:05:24,524 - 8988 - DEBUG - Loading table table_2012_05_16 
from file: /path/to/data/file_2012-05-16
2012-05-17 11:05:24,524 - 8988 - DEBUG - Executing update: load data local 
infile '/path/to/data/file_2012-05-16' into table table_2012_05_16(@dummy, c1, 
c2, c3, c4, c5, c6, c7);
2012-05-17 11:05:24,528 - 8988 - ERROR - Exception while executing update: 
<class 'pymysql.err.InternalError'> - (1148, u'The used command is not allowed 
with this MySQL version') 
```

2) [MySQL docs on the 'load data local infile...' 支持/语法。](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)

3）如果我使用mysql客户端，这个数据加载工作正常（即恕我直言，不应该有任何障碍——权限、特权、你有什么——这个加载）：

```
load_machine:~$ mysql -htarget_machine.baz -ufoo -pbar db -e "load data local 
infile '/path/to/data/file_2012-05-16' into table table_2012_05_16(@dummy, c1, 
c2, c3, c4, c5, c6, c7)"

load_machine: ~$ mysql -htarget_machine.baz -ufoo -pbar db -e "select count(*) 
from table_2012_05_16;"
+----------+
| count(*) |
+----------+
| 38563191 |
+----------+ 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-11-15T22:24:06.940

PYMySQL 确实支持`LOAD DATA LOCAL INFILE`，但您必须在数据库连接参数中启用它。例子：

```
connection = pymysql.connect(host='localhost', user='username', password='password', database='databasename', charset='utf8mb4', cursorclass=pymysql.cursors.DictCursor, **local_infile=True**) 
```

默认[设置为`False`](https://github.com/PyMySQL/PyMySQL/blob/master/pymysql/connections.py#L535)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-27T18:44:42.093

PyMySQL`LOAD DATA LOCAL INFILE`从 0.6.4 版开始支持

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T15:53:07.137

从[手册](http://dev.mysql.com/doc/en/load-data-local.html)：

> 如果[`LOAD DATA LOCAL`](http://dev.mysql.com/doc/en/load-data.html)在服务器或客户端中禁用，则尝试发出此类语句的客户端会收到以下错误消息：
> 
> ```
> 错误 1148：此 MySQL 版本不允许使用的命令
> ```

PyMySQL 还不支持`LOAD DATA LOCAL`. 10 多个月以来，它一直是[他们的错误跟踪器](https://github.com/petehunt/PyMySQL/issues/62)上的一个中等优先级缺陷，还没有人指派修复它，也没有设置里程碑。

请参阅[此答案](https://stackoverflow.com/a/1234705/623041)以了解如何改为`LOAD DATA LOCAL`使用 Python 的 MySQLdb 执行。

# javascript - 在 ExtJS 4 Grid 中设置单元格 ID

> ID：10639061
> 
> 赞同：3
> 
> 时间：2012-05-17T15:49:14.273
> 
> 标签：javascript, extjs

我正在将大量旧 HTML 代码移植到 ExtJS 4 网格中，并且偶然发现了以下挑战：我希望能够为网格中的 TD 元素设置自定义 ID。据我了解，我需要覆盖用于单元格创建的默认模板。我当前的模板如下所示：

```
 Ext.view.TableChunker.metaRowTpl = [
   '<tr class="' + Ext.baseCSSPrefix + 'grid-row {addlSelector} {[this.embedRowCls()]}" {[this.embedRowAttr()]}>',
    '<tpl for="columns">',
     '<td class="{cls} ' + Ext.baseCSSPrefix + 'grid-cell ' + Ext.baseCSSPrefix + 'grid-cell-{columnId} {{id}-modified} {{id}-tdCls} {[this.firstOrLastCls(xindex, xcount)]}" {{id}-tdAttr}><div class="' + Ext.baseCSSPrefix + 'grid-cell-inner ' + Ext.baseCSSPrefix + 'unselectable" style="{{id}-style}; text-align: {align};">{{id}}</div></td>',
    '</tpl>',
   '</tr>'
  ]; 
```

我可以使用什么占位符来操作表格单元格的“id=”属性？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-28T14:39:12.520

不要覆盖 tpl，只需设置一个自定义列[渲染器](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.column.Column-cfg-renderer)，它将更新列元数据：

```
columns: [{
    text: 'Blah',
    dataIndex: 'blah',

    renderer: function(value, metaData, record) {
        metaData.tdAttr = 'id="someprefix-' + record.get('blah') + '"';
        return value;
    }
}, ... ] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-06T22:56:26.080

第一个答案对我来说效果很好，因为 id 提取很容易，如下所示：

```
oncellclick:function(grid, row, col, e){
        alert( row['id'])
    } 
```

# html5-canvas - html5线条模糊不卖

> ID：10639064
> 
> 赞同：3
> 
> 时间：2012-05-17T15:49:39.807
> 
> 标签：html5-canvas

我正在关注以下教程：[http ://www.html5canvastutorials.com/tutorials/html5-canvas-lines/](http://www.html5canvastutorials.com/tutorials/html5-canvas-lines/)

我的问题是这条线变得模糊，不像他们网站上的那样坚固和美丽。

这是代码：

```
 var canvas = document.getElementById("rightSide");
    var context = canvas.getContext("2d");

    context.beginPath();
    context.moveTo(50, 100);
    context.lineTo(200, 100);
    context.stroke();

#leftSide {
    width:200px;
    padding:15px;
    background:#eee;
    border:1px solid #aaa;
    float: left;
}

#rightSide {
    width:1000px;
    height: 700px;
    padding:15px;
    background:#eee;
    border:1px solid #aaa;
    float: left;
    margin:0px 0px 0px 20px;
} 
```

```
<div id="leftSide">
    <a class="trigger" href="#">Areas</a>
    <ul class="level1">
                <li><a href="http://www.google.com">Area 1</a></li>
                <li><a href="#">Area 2</a></li>
                <li><a href="#">Area 3</a></li>
                <li><a href="#">Area 4</a></li>
                <li><a href="#">Area 5</a></li>
                <li><a href="#">Area 6</a></li> 
    </ul>

</div>

<canvas id="rightSide"></canvas> 
```

谢谢

编辑：我实际上发现了一些非常有趣的东西，但我仍然不明白它有什么不同。当我将画布大小坐标从 CSS 移动到标签时，该行显示正常。

> 画布 id="rightSide" width="800px" height="600px">

非常想解释一下这里发生了什么。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T22:58:20.597

为了建立在 Parth 的答案（在评论中正确识别），画布的实际大小是在属性上定义的，而不是 CSS。

例如，如果您有以下代码，绘图区域将是 100x100 而不是 200x200。模糊效果与使用相同 CSS 的 100x100 图像相同。

```
<style>
    canvas {width: 200px; height: 200px}
</style>
<canvas width="100" height="100"></canvas> 
```

这实际上对 iPhone 4 或 iPad 3 等设备产生了有趣的影响，每个设备像素都有四个物理像素。在这种情况下，适当大小的画布（100x100 的 100x100 会模糊）。在这种情况下，您实际上需要将画布加倍以获得清晰的图像：

```
<style>
    canvas {width: 200px; height: 200px}
</style>
<canvas id="retina" width="400" height="400"></canvas> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T07:16:20.830

浏览器通常对绘制的线进行抗锯齿（实际上任何使用上下文函数的东西，如 lineTo、arcTo、quadraticCurveTo）。

所以，如果你给了起点（50,50）和终点（300,50），它会反锯齿，所以绘制的线会显示模糊，因为它会在49.5-50 &&中绘制模糊的线颜色55-55.5（如果线宽为 5）。

因此，有时解决方案是以浮点形式给出坐标。浏览器接受浮点坐标并且不忽略它，它会在其画线算法中使用浮点数（可能是dda，我不知道确切）。

这是示例 :: [http://jsfiddle.net/parth1403/xt7dN/2/](http://jsfiddle.net/parth1403/xt7dN/2/)

# dynamics-crm-2011 - 如何以编程方式停止 Dynamics 2011 中的工作流？

> ID：10639066
> 
> 赞同：4
> 
> 时间：2012-05-17T15:49:48.403
> 
> 标签：dynamics-crm-2011, dynamics-crm

我需要停止与事件关联的所有正在运行的工作流（以及名称以“Auto_”开头的工作流）。

但是，我似乎找不到任何关于如何以编程方式停止工作流的文档，也找不到它们是如何存储在数据库中的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T17:42:14.277

这来自：http: [//kelvinshen.blogspot.com/2011/09/cancelling-workflows-via-sdk.html](http://kelvinshen.blogspot.com/2011/09/cancelling-workflows-via-sdk.html)

```
Entity workflowToCancel = new Entity("asyncoperation");

workflowToCancel.Id = workflowID;
workflowToCancel["statecode"] = new OptionSetValue(3);
workflowToCancel["statuscode"] = new OptionSetValue(32);

myCRMService.Update(workflowToCancel); 
```

# c# - 随着时间的推移刷新页面上的信息？

> ID：10639067
> 
> 赞同：0
> 
> 时间：2012-05-17T15:49:54.203
> 
> 标签：c#, windows-phone-7

我有一个主页，它根据 currentTime 从本地 xml 文件中获取信息。

当应用程序启动时，它会检查当前时间并在此基础上获取正确的 xml 值并将其显示在文本块中。但它没有更新。我正在考虑在页面上放置一个刷新按钮，但更聪明的头脑建议使用 DispatchTimer 或 Timer。我应该使用什么，我应该把代码放在哪里？我是非常基本的用户，所以如果你能具体并给出代码示例，我将不胜感激。

谢谢大家 :) 我的代码的一小部分。

```
 var obj = filteredData.First();

    TimeSpan currentTime = myDay.TimeOfDay;
    string result = String.Empty;
    string Prayer = String.Empty;

    if (currentTime >= obj.Fajr && currentTime < obj.Sunrise)
    {
        result = "Fajr";
        Prayer = obj.Fajr.ToString(@"hh\:mm");

    }
    else if (currentTime >= obj.Sunrise && currentTime < obj.Zohr)
    {
        result = "Sunrise";
        Prayer = obj.Sunrise.ToString(@"hh\:mm");

    }

    textBlock3.Text = result;
    textBlock4.Text = Prayer; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T16:01:53.950

使用视图模型和后台线程可能会更好地解决此问题，*例如*：

```
public class PrayerViewModel : DependencyObject
    public PrayerViewModel ()
    {
         // TODO: Start off a new thread that Raises the PropertyChanged() Event for each property at the right time
    }

    public string Result
    {
         get
         {
            TimeSpan currentTime = myDay.TimeOfDay;
            if (currentTime >= obj.Fajr && currentTime < obj.Sunrise)
            {
                return "Fajr";
            }
            else if (currentTime >= obj.Sunrise && currentTime < obj.Zohr)
            {
                return "Sunrise";
            }
        }
    }
    public string Prayer
    {
         get
         {
            TimeSpan currentTime = myDay.TimeOfDay;
            if (currentTime >= obj.Fajr && currentTime < obj.Sunrise)
            {
                Prayer = obj.Fajr.ToString(@"hh\:mm");
            }
            else if (currentTime >= obj.Sunrise && currentTime < obj.Zohr)
            {
                Prayer = obj.Sunrise.ToString(@"hh\:mm");
            }
        }
    }
} 
```

# jquery - 创建的 jQuery 元素不解析 `text` 参数中的标签

> ID：10639080
> 
> 赞同：0
> 
> 时间：2012-05-17T15:50:35.843
> 
> 标签：jquery, html

我正在用这样的jQuery创建一些元素 -

```
var div1 = $('<div />', {text: "Specials of <b>the searched text</b>"}).attr({"class": "spcl-thmb-hdr"});
div1.appendTo(li2); // appending to a <li /> tag 
```

但是当他们加载时，他们只是不解析`<b />`标签。并打印出这样的东西 -

```
<div class="spcl-thmb-hdr">Specials of &lt;b&gt;the searched text&lt;/b&gt;</div> 
```

如何让它解析`text`参数中的标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T15:52:07.970

您需要使用`html`而不是`text`将字符串视为 HTML，否则它将被编码。

您传入的地图`$`可以包含属性，您可以替换`attr`调用，也可以像这样：

```
$('<div />', {
    html: "Specials of <b>the searched text</b>",
    "class": "spcl-thmb-hdr"
}); 
```

来自[jQuery 文档](http://api.jquery.com/jQuery/#jQuery2)：

> 从 jQuery 1.4 开始，第二个参数`jQuery()`可以接受一个映射，该映射由可以传递给该[`.attr()`](http://api.jquery.com/attr)方法的属性的超集组成。此外，可以传入任何[事件类型](http://api.jquery.com/category/events/)，并且可以调用以下 jQuery 方法：[`val`](http://api.jquery.com/val)、[`css`](http://api.jquery.com/css)、[`html`](http://api.jquery.com/html)、[`text`](http://api.jquery.com/text)、[`data`](http://api.jquery.com/data)、[`width`](http://api.jquery.com/width)、[`height`](http://api.jquery.com/height)或[`offset`](http://api.jquery.com/offset)。该名称`"class"`必须在映射中引用，因为它是 JavaScript 保留字，并且`"className"`不能使用，因为它不是正确的属性名称。

# javascript - 使用 jQuery 克隆具有动态添加值的表单元素

> ID：10639083
> 
> 赞同：0
> 
> 时间：2012-05-17T15:50:51.007
> 
> 标签：javascript, jquery

我有一个类似于此的表格：

```
<fieldset id="user">
  <input type="text" id="firstName">
  <input type="text" id="lastName">
</fieldset> 
```

然后我执行 Ajax 调用来填充这两个字段的值。此时，我想保存表单的当前状态（使用填充的值），以防用户在进行更改后需要恢复。

我试过这个：

```
$("#user").clone(true).html() 
```

还有这个：

```
$("#user").html() 
```

两者都从填充字段之前创建的 dom 返回原始 html。有没有办法在用 JS 填充值后获取带有值的 html？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T15:58:33.310

您可以使用内置数据。在进行 ajax 调用的地方，也将值存储在元素的数据中：

```
$.data( $("#firstname"), "value", value );
$.data( $("#lastname"), "value", value ); 
```

在您想要还原更改时：

```
$("#firstname").val( $.data($("#firstname"), "value") );
$("#lastname").val( $.data($("#lastname"), "value") ); 
```

还原时，您也可以遍历 x 个元素

```
$("#user input").each( function() {
   $(this).val( $.data($(this), "value") );
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T15:58:47.447

```
var prev = $('#user').html(); // store previous state

$.ajax({
  url: '',
  ....
  ....
  success: function(res) {
    //assume that your res is like:
    /**
    res = {
        firstname: 'FIRSTNAME', 
        lastname : 'LASTNAME'
    }
    */
    $('#user input#firstname').val(res.firstname);
    $('#user input#lastname').val(res.lastname);
  } 
})

//For revert:

$('#user').empty().html(prev); 
```

# php - Codeigniter 文件上传 - 文件名检查

> ID：10639086
> 
> 赞同：0
> 
> 时间：2012-05-17T15:50:57.860
> 
> 标签：php, file, codeigniter, file-upload

我正在使用 codeigniter 上传文件，我的问题来自我必须输入文件，他们在那里上传工作人员使用的文件和客户将看到的文件（敏感数据已被删除）。

客户端将在此约定中上传文件名，

```
filename_parsed.pdf
filename_unparsed.pdf 
```

我将如何检查文件名是否以`_parsed`or结尾`_unparsed`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T15:58:19.803

CodeIgniter 有一个文件助手函数...确保文件助手已加载

`$var = get_file_info('path/to/file','name')`

```
if(strpos($var,'_unparsed') !== false) {
    // Do stuff
} else if(strpos($var,'_parsed') !== false) {
    // Do stuff
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T20:31:17.727

```
if(preg_match('/(_(un|)parsed)$/', $file_name))
{
    //tests for:
    // _unparsed
    // _parsed

    //Important not to include the file ext otherwise will fail
} 
```

# terminal - Linux 重命名文件只有时间/日期戳

> ID：10639088
> 
> 赞同：6
> 
> 时间：2012-05-17T15:50:59.890
> 
> 标签：terminal, file-rename

我有一个文件，我想将 mv 重命名为 year_month_day_h:m:s - 最好的方法是什么？

我尝试了以下方法，但它没有动态添加正确的标记（原始文件的名称中实际上有一个反斜杠）：

`mv getnw/myfilename.txt "%Y%m%d%H%M%S".txt mv getnw/myfilename.txt "%Y-%m%d%H%M%S".txt mv getnw/myfilename.txt %Y-%m%d%H%M%S.txt mv getnw/myfilename.txt "'date +%Y%m%d%H%M%S'.txt"`

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-17T16:03:11.163

```
mv myfile.txt `date +%Y_%m_%d_%H:%M:%S`.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-10T15:44:24.740

```
mv myfile.txt myfile`date -Is`.txt 
```

是一个较短的版本

但`:` 不适用于某些 rsync 或 scp 等 unix 命令，因为它将名称的一部分解析为主机地址。用来`tr`改变`:`

```
mv myfile.txt myfile`date -Is|tr : -`.txt 
```

或者

```
mv myfile.txt myfile$(date -Is|tr : -).txt 
```

# javascript - 如何找出对象的 onclick 事件正在调用什么 javascript 函数？

> ID：10639089
> 
> 赞同：49
> 
> 时间：2012-05-17T15:51:04.727
> 
> 标签：javascript

如何找出对象的 onclick 事件正在调用什么 javascript 函数？更好的是，我可以找出该函数在哪个包含的 .js 文件中吗？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-05-17T16:00:46.527

我为此使用 Chrome 的开发者工具：

![Google Chrome 开发者工具中的事件监听器断点](../Images/929e772cb41670dd0aba107710f04645.png)

选中该`click`框，然后单击页面上要为其查找处理程序的元素。如果您使用的是 jQuery（或类似的库），您可能必须先浏览他们的代码，然后才能使用您的代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-17T15:55:31.380

你可以这样做

[在 JsFiddle 上](http://jsfiddle.net/E6tks/)使用 Javascript演示

```
div1 = document.getElementById('div1');

alert(div1.getAttribute("onclick"));​ 
```

[在 JsFiddle 上](http://jsfiddle.net/nYES8/1/)使用 jQuery演示

```
<div id="div1" onclick="myfun();" >​

alert($('#div1').attr('onclick'))​; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T15:55:35.263

我使用这个[可视事件](http://www.sprymedia.co.uk/article/Visual+Event)脚本来执行此操作，该脚本巧妙地突出显示哪些事件由哪些元素上的哪些函数订阅。

要查找代码源，只需使用 FireBug 或类似的浏览器开发工具搜索函数名称即可。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-17T15:55:54.173

您将无法找到调用 onclick 事件的文件，但`myObject.onclick`会为您提供被调用的函数。不，你不需要 jQuery。

至于获取函数的*名称*，这有点复杂。你可以尝试这样的事情，也许：

```
var myFunc = myObject.onclick, myFuncName = "";

for(prop in window) {
    if(window.hasOwnProperty(prop) && window[prop] === myFunc) {
        myFuncName = prop; // myFuncName is now the name of the function. This only works if you didn't assign an anonymous function to the click handler.
        break;
    }
} 
```

但老实说，我认为这有点矫枉过正。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-17T15:56:50.447

这取决于如何`event`连接。

如果你绑定到`onclick`没有像 jQuery 这样的东西，你可以这样做：

```
var obj = document.getElementById('elementId');
console.log(obj.onclick); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-04-09T11:45:04.313

我有不同的方法。我重载 onclick 函数并在实际函数之前添加我的调试器。

这是元素

```
<div id="div1">​ 
```

将此 JavaScript 写入开发者控制台

```
var clickFn = $("#div1").click; 

$("#div1").click(function(){ 
    debugger; 
    clickFn(); 
}); 
```

# java - 在句尾添加换行符

> ID：10639090
> 
> 赞同：4
> 
> 时间：2012-05-17T15:51:07.120
> 
> 标签：java, nlp

我有一个字符串，它是一本书的片段（大约 1 章），这个字符串都是一行。我想在每个句子的末尾换行

我通过一个不那么复杂的代码解决了它

```
text = text.replaceAll("\\.","\\.\n"); //same for ? same for ! 
```

当然，这不会产生非常好的结果。我不需要它是完美的，但我越能做到越好。

在制作换行符之前，我至少想检查以下内容：

```
the word before the . is longer then 2 characters
there are no dots before the . in the same "word"
the character before the . is not a number
the character after the dot (and possibly a whitespace after that dot) is not a ( 
```

任何其他建议以及将实现它的实际代码都将不胜感激。

类似问题： [这里](https://stackoverflow.com/questions/4373612/how-to-parse-text-into-sentences-in-java)

**更新：**

虽然在我的优先级列表中并不高，因为我的书不包含很多直接引用或直接演讲，但是处理其中的句子的规则也是有序的，这样来自同一个 qoute 的句子就不会出现在新行中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T17:06:34.767

[斯坦福的 CoreNLP](http://nlp.stanford.edu/software/corenlp.shtml)工具包有一个做句子分割的类。[在这里](http://nlp.stanford.edu/software/tokenizer.shtml)查看更多。

如果你说`new DocumentPreprocessor(new StringReader(s)).iterator()`where`s`是一个包含文本的字符串，它会给你一个句子的迭代器。

请注意，这也会标记句子。如果您希望句子看起来像它开始的方式，您可以仅使用此输出作为拆分指南，或运行`PTBTokenizer -untok`命令（参见与上面相同的链接）以使每个标记化的句子再次看起来正常。

这几乎肯定会比你的规则列表更好，因为你的规则没有考虑到许多重要的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T16:17:07.690

如果我正确理解了您的要求，请尝试以下操作：

```
text = text.replaceAll("[^\\.]{1,}\\D\\.\\s?[^\\(]","\\.\n"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T16:07:24.987

```
String newline = System.getProperty("line.separator");
String yourLine = yourLine.append(newline); 
```

# asp.net - 在 Log4Net 中创建多个日志文件时，输出始终为 NULL

> ID：10639097
> 
> 赞同：0
> 
> 时间：2012-05-17T15:51:20.700
> 
> 标签：asp.net, log4net

过去一天我一直在尝试解决 log4net 问题。要求是我有多个记录器根据正在处理的特定服务器端事件创建唯一的日志文件。问题是当我创建多个附加程序时，我的日志文件的输出始终为 NULL。

下面是我的 app.config 文件中相关的 log4net 块。

```
<log4net>
    <root>
      <level value="DEBUG" />
    </root>
    <logger name="AffectivExcitementShortTermScore">
      <level value="DEBUG" />
      <appender-ref ref="AffectivExcitementShortTermScore" />
    </logger>

    <logger name="AffectivExcitementLongTermScore">
      <level value="DEBUG" />
      <appender-ref ref="AffectivExcitementLongTermScore" />
    </logger>

    <logger name="AffectivEngagementBoredomScore">
      <level value="DEBUG" />
      <appender-ref ref="AffectivEngagementBoredomScore" />
    </logger>

    <logger name="AffectivFrustrationScore">
      <level value="DEBUG" />
      <appender-ref ref="AffectivFrustrationScore" />
    </logger>
    <logger name="AffectivMeditationScore">
      <level value="DEBUG" />
      <appender-ref ref="AffectivMeditationScore" />
    </logger>

    <appender name="LogFileAppender" type="log4net.Appender.RollingFileAppender">
      <param name="LockingModel" type="log4net.Appender.FileAppender+MinimalLock" />
      <param name="File" value="C:\temp\emotiv_log.txt" />
      <param name="AppendToFile" value="true" />
      <rollingStyle value="Size" />
      <maxSizeRollBackups value="10" />
      <maximumFileSize value="10MB" />
      <staticLogFileName value="true" />
      <layout type="log4net.Layout.PatternLayout">
        <param name="ConversionPattern" value="%-5p%d{yyyy-MM-dd hh:mm:ss} – %m%n" />
      </layout>
    </appender>

    <appender name="AffectivExcitementShortTermScore" type="log4net.Appender.FileAppender">
      <param name="LockingModel" type="log4net.Appender.FileAppender+MinimalLock" />
      <file type="log4net.Util.PatternString" value="C:\\logs\\AffectivExcitementShortTermScore.csv">
      </file>
      <appendToFile value="true" />
      <layout type="DataMind.CsvPatternLayout, DataMind">
        <header value="DateTime,SystemUpTime,Value,EventTimer&#xD;&#xA;" />
        <conversionPattern value="%date{M/d/yyyy H:mm:ss.fff}%newfield%property{SystemUpTime}%newfield%property{Value}%newfield%property{EventTimer}%endrow" />
      </layout>
      <filter type="log4net.Filter.PropertyFilter">
        <Key value="Version" />
        <StringToMatch value="1" />
      </filter>
    </appender>

    <appender name="AffectivExcitementLongTermScore" type="log4net.Appender.FileAppender">
      <param name="LockingModel" type="log4net.Appender.FileAppender+MinimalLock" />
      <file type="log4net.Util.PatternString" value="C:\\logs\\AffectivExcitementLongTermScore.csv">
      </file>
      <appendToFile value="true" />
      <layout type="DataMind.CsvPatternLayout, DataMind">
        <header value="DateTime,SystemUpTime,Value,EventTimer&#xD;&#xA;" />
        <conversionPattern value="%date{M/d/yyyy H:mm:ss.fff}%newfield%property{SystemUpTime}%newfield%property{Value}%newfield%property{EventTimer}%endrow" />
      </layout>
      <filter type="log4net.Filter.PropertyFilter">
        <Key value="Version" />
        <StringToMatch value="1" />
      </filter>
    </appender>
    <appender name="AffectivEngagementBoredomScore" type="log4net.Appender.FileAppender">
      <param name="LockingModel" type="log4net.Appender.FileAppender+MinimalLock" />
      <file type="log4net.Util.PatternString" value="C:\\logs\\AffectivEngagementBoredomScore.csv">
      </file>
      <appendToFile value="true" />
      <layout type="DataMind.CsvPatternLayout, DataMind">
        <header value="DateTime,SystemUpTime,Value,EventTimer&#xD;&#xA;" />
        <conversionPattern value="%date{M/d/yyyy H:mm:ss.fff}%newfield%property{SystemUpTime}%newfield%property{Value}%newfield%property{EventTimer}%endrow" />
      </layout>
      <filter type="log4net.Filter.PropertyFilter">
        <Key value="Version" />
        <StringToMatch value="1" />
      </filter>
    </appender>

    <appender name="AffectivFrustrationScore" type="log4net.Appender.FileAppender">
      <param name="LockingModel" type="log4net.Appender.FileAppender+MinimalLock" />
      <file type="log4net.Util.PatternString" value="C:\\logs\\AffectivFrustrationScore.csv">
      </file>
      <appendToFile value="true" />
      <layout type="DataMind.CsvPatternLayout, DataMind">
        <header value="DateTime,SystemUpTime,Value,EventTimer&#xD;&#xA;" />
        <conversionPattern value="%date{M/d/yyyy H:mm:ss.fff}%newfield%property{SystemUpTime}%newfield%property{Value}%newfield%property{EventTimer}%endrow" />
      </layout>
      <filter type="log4net.Filter.PropertyFilter">
        <Key value="Version" />
        <StringToMatch value="1" />
      </filter>
    </appender>

    <appender name="AffectivMeditationScore" type="log4net.Appender.FileAppender">
      <param name="LockingModel" type="log4net.Appender.FileAppender+MinimalLock" />
      <file type="log4net.Util.PatternString" value="C:\\logs\\AffectivMeditationScore.csv">
      </file>
      <appendToFile value="true" />
      <layout type="DataMind.CsvPatternLayout, DataMind">
        <header value="DateTime,SystemUpTime,Value,EventTimer&#xD;&#xA;" />
        <conversionPattern value="%date{M/d/yyyy H:mm:ss.fff}%newfield%property{SystemUpTime}%newfield%property{Value}%newfield%property{EventTimer}%endrow" />
      </layout>
      <filter type="log4net.Filter.PropertyFilter">
        <Key value="Version" />
        <StringToMatch value="1" />
      </filter>
    </appender>
  </log4net> 
```

下面是指向多个附加程序的 GetLogger 方法：

```
public class SomeClass
{

 protected static readonly ILog log = LogManager.GetLogger(typeof(Namespace.SomeClass));
        private static readonly ILog log0 = LogManager.GetLogger("AffectivExcitementShortTermScore");
        private static readonly ILog log1 = LogManager.GetLogger("AffectivExcitementLongTermScore");
        private static readonly ILog log2 = LogManager.GetLogger("AffectivEngagementBoredomScore");
        private static readonly ILog log3 = LogManager.GetLogger("AffectivFrustrationScore");
        private static readonly ILog log4 = LogManager.GetLogger("AffectivMeditationScore"); 
```

最后，我按如下方式记录我的事件：

```
 log0.Info(new Log
                    {
                        SystemUpTime = FormatUpTime(_states.TimeFromStart),
                        Value = _states.AffectivExcitementShortTermScore.ToString(),
                        EventTimer = _eventTimer
                    });

                    // log longterm exictement
                    log1.Info(new Log
                    {
                        SystemUpTime = FormatUpTime(_states.TimeFromStart),
                        Value = _states.AffectivExcitementLongTermScore.ToString(),
                        EventTimer = _eventTimer
                    }); 
```

我的结果（如下）始终显示日志未写入文件：

```
DateTime    SystemUpTime    Value   EventTimer
37:07.6 (null)          (null)  (null)
37:07.6 (null)          (null)  (null)
37:07.6 (null)          (null)  (null)
37:07.6 (null)          (null)  (null)
37:07.7 (null)          (null)  (null)
37:07.7 (null)          (null)  (null) 
```

当我创建附加程序时，我认为在我的 app.config 文件中做错了什么。当我创建一个根附加程序并在根级别引用它时它可以工作，但是当我创建记录器并以这种方式引用附加程序时，它似乎失败了。我没有想法 - 建议？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T17:23:58.537

尝试 ALL 的根级别设置怎么样？

可能是一个红鲱鱼，但我注意到您的代码使用 log.INFO 并且您的配置指定 DEBUG？

# php - 怎么做 $filename=images/$filename2.jpg

> ID：10639098
> 
> 赞同：0
> 
> 时间：2012-05-17T15:51:24.363
> 
> 标签：php

我想做这样的事情，但我不知道如何：

```
$file="4"
$pic="../pics/$file.jpg";
$sound="../sounds/$file.mp3"; 
```

我也会做这样的事情

```
$nextpic="../pics/$file+1.jpg"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T15:53:31.427

如果你的文件是一个数字，无论它是一个字符串还是什么，PHP 都会这样对待它。所以你可以这样做：

```
$nextpic = "../pics/".($file+1).".jpg"; 
```

顺便说一句，PHP 的一个怪癖是它如何处理带有数字的字符串。例如，如果你有一个文件“123lolz.jpg”并且你增加它，你会得到不需要的结果。愚蠢的东西...

```
$file = "123lolz.jpg";
echo ($file+1)."\n"; // you get 124 and the rest of the file is discarded 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T15:53:45.577

第一个代码部分很好。

第二个应该是这样的：

```
$nextpic="../pics/" . ($file+1) . ".jpg"; 
```

或者像这样

```
$next_file = $file + 1;
$nextpic="../pics/$next_file.jpg"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T15:53:58.133

试试这个：

```
$nextpic="../pics/" . ($file+1) . ".jpg"; 
```

由于您要添加一些内容，因此您需要将其作为变量替换操作符在字符串中不起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T15:55:12.503

PHP.net 有关于[何时/如何将变量替换为字符串中的值的](http://www.php.net/manual/en/language.types.string.php#language.types.string.parsing)完整文档。特别是在这些情况下：

```
$file="4"
$pic="../pics/$file.jpg";
$sound="../sounds/$file.mp3"; 
```

这将产生`$pic = "../pics/4.jpg"`和`$sound="../sounds/4.mp3"`

```
$nextpic="../pics/$file+1.jpg"; 
```

那将产生`$nextpic="../pics/4+1.jpg"`. 如果你想要 5.jpg 使用这个：

```
$nextpic="../pics/".($file+1).".jpg"; 
```

# android - 以编程方式添加到 TableLayout 的视图未显示

> ID：10639099
> 
> 赞同：6
> 
> 时间：2012-05-17T15:51:30.840
> 
> 标签：android, android-view, android-tablelayout

我正在尝试将视图添加到 TableLayout，但它们根本不会出现（我正在模拟器上进行测试）。实际上我写了比这更多的代码，即向表格添加文本视图，但我已经把它削减到这个，即使这样也行不通。知道为什么吗？

这是代码`test.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/tableLayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

<TableRow
    android:id="@+id/tableRow1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >
</TableRow>

<TableRow
    android:id="@+id/tableRow2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TEST" >
    </TextView>
</TableRow>

</TableLayout> 
```

和java代码：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    setContentView(R.layout.test);

    /* Find Tablelayout defined in test.xml */
    TableLayout tl = (TableLayout) findViewById(R.id.tableLayout);
    /* Create a new row to be added. */
    TableRow tr = new TableRow(this);
    tr.setLayoutParams(new TableRow.LayoutParams(LayoutParams.FILL_PARENT,
            LayoutParams.WRAP_CONTENT));
    /* Create a Button to be the row-content. */
    Button b = new Button(this);
    b.setText("Dynamic Button");
    b.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,
            LayoutParams.WRAP_CONTENT));
    /* Add Button to row. */
    tr.addView(b);
    /* Add row to TableLayout. */
    tl.addView(tr, new TableLayout.LayoutParams(LayoutParams.FILL_PARENT,
            LayoutParams.WRAP_CONTENT));
} 
```

当我在模拟器上测试时，我只看到带有硬编码字符串“TEST”（在 xml 文件中定义）的文本视图。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-17T16:46:35.137

`TableLayout.LayoutParams`尝试在将行添加到表格时不设置 buttonLayout 并且不添加 a 。

```
//b.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
tr.addView(b);
//tl.addView(tr, new TableLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
t1.addView(tr) 
```

我认为这`TableLayout.LayoutParams`引起了一些问题。

# java - java 空闲内存使用情况

> ID：10639114
> 
> 赞同：0
> 
> 时间：2012-05-17T15:52:28.603
> 
> 标签：java, memory, jvm

我正在使用 java 来构建一个套接字服务器。

我正在记录服务器运行期间发生的许多操作，并且在每个日志行旁边，我正在使用以下命令在 JVM 中写入当前可用内存：

```
Runtime.getRuntime().freeMemory() 
```

正如我在日志中看到的，我没有很多可用内存（大约 14-15 MB）。

我在具有 root 访问权限的 freeBSD 服务器上运行此套接字服务器。

我真的很想调整分配给我的 JVM 的内存，但我真的不知道怎么做，而且我对 freeBSD 和 linux 很陌生。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T15:56:38.453

您对 Java 中内存如何工作（尤其是[垃圾收集](http://www.theserverside.com/tip/Whats-new-in-Java-garbage-collection)）的假设是有缺陷的。

`Runtime.getRuntime().freeMemory()`.

[该调用仅显示JVM 堆上的*“空闲”*](https://stackoverflow.com/a/3571231/177800)内存，该内存使用和命令行参数**分配**给. 或者，如果您使用的是应用服务器，则在某些启动脚本中。`-Xms``-Xmx``java`

**为什么你试图做的是浪费时间**

看到这个问题的[答案](https://stackoverflow.com/questions/9145769/limit-jvm-process-memory-on-ubuntu)[为什么](https://stackoverflow.com/a/9146775/177800)！

Java 中的垃圾收集器（控制空闲内存）并未针对保持尽可能多的可用内存进行调整，而是针对性能和响应能力的平衡进行了调整。它只按需释放内存，拥有最大可用内存没有任何好处，而且尝试这样做有很多缺点。

这会导致不再引用的对象在“使用内存”周围徘徊，直到实际需要它们占用的内存。这实际上是最佳的，因为过早地删除它们会导致运行代码的性能下降。

仅当需要释放内存时才快速删除它们是垃圾收集器的目标，而**不是**试图保持尽可能多的可用内存。

您**永远**不必调用`System.gc()`正确实现的 Java 程序。

> Java HotSpot 包括三个不同的收集器。串行集合使用单线程进行 GC，最适合数据集小于 100 MB 的单处理器机器。并行并行执行次要收集。它非常适合在多线程或多处理器硬件上运行的中型到大型数据集。当响应时间比吞吐量更重要时，并发收集器已针对垃圾收集暂停时间进行了优化。这种模式通常不会在单核机器上提供任何好处。

**避免 OutOfMemoryExceptions**

1.  在您的服务器上设置`-Xmx`尽可能大的设置。设置`-Xms`为您认为名义上的最小内存块大小。太小比太大更糟糕。

2.  不要泄露参考。

# ruby-on-rails - 如何创建用于显示的视图模型？

> ID：10639116
> 
> 赞同：1
> 
> 时间：2012-05-17T15:52:31.853
> 
> 标签：ruby-on-rails

像这样的模型：

```
create_table "user_accounts", :force => true do |t|
  t.string   "code"
  t.string   "user_name"
  t.integer  "user_type",  :default => 1
end 
```

控制器的代码如下：

```
def index
  @user_accounts = UserAccount.all

  respond_to do |format|
    format.html # index.html.erb
    format.json { render :json => @user_accounts }
    format.xml { render :xml => @user_accounts }
  end
end 
```

View 的代码如下：

```
<table>
  <tr>
    <th><%= t :code %></th>
    <th><%= t :user_name %></th>
    <th><%= t :user_type %></th>
    <th></th>
    <th></th>
    <th></th>
  </tr>

<% @user_accounts.each do |user_account| %>
  <tr class="<%= cycle('list_line_odd', 'list_line_even') %>">
    <td><%= user_account.code %></td>
    <td><%= user_account.user_name %></td>
    <td><%= user_account.user_type %></td>
    <td><%= link_to 'Show', user_account %></td>
    <td><%= link_to 'Edit', edit_user_account_path(user_account) %></td>
    <td><%= link_to 'Destroy', user_account, :confirm => 'Are you sure?', :method => :delete %></td>
  </tr>
<% end %>
</table> 
```

一切正常。但有一个缺陷是“user_type”显示为数字。但我希望它可以显示为像“普通用户”或“系统管理员”这样的字符串。

最重要的是我不想在视图中添加任何逻辑（index.html.erb）。

所以我需要在控制器或任何地方更改 user_type 的值。

必须有一些优雅的方法来做到这一点。但我不知道。希望你们能给我一些建议。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T16:14:05.817

您可以向您的模型 UserAccount 添加一些这样的功能

```
def user_type_string
    case self.user_type
    when 1
       return "Super user"
    when 2
       return "Something else"
    else
    end
end 
```

您可以在视图中使用此方法

```
<td><%= user_account.user_type_string %></td> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T16:14:00.363

首先，您将其定义为一个数字：

```
 t.integer  "user_type",  :default => 1 
```

因此，您需要将其定义为要呈现的字符串，或者具有转换它的逻辑。

我建议创建一个`/app/helpers/user_accounts_helper.rb`像这样的文件：

```
module UserAccountsHelper

  def account_type_display(account_type)
    // put logic here to convert the integer value to the string you want to display
  end

end 
```

然后将视图文件中显示帐户类型的行更改为：

```
 <td><%= account_type_display(user_account.user_type) %></td> 
```

那应该行得通。

# wcf - Jquery 的 WCF4 REST 跨域问题

> ID：10639117
> 
> 赞同：2
> 
> 时间：2012-05-17T15:52:37.183
> 
> 标签：wcf, wcf-client

**我有 .NET Framework 4 的 WCF REST 服务目标。我正在使用WebScriptEndPoint**的标准端点并使用**基本授权**

当我使用 Jquery 使用此服务时，当我在同一个服务应用程序中拥有页面时，它工作正常，即`http://localhost`. 但是，如果我使用不同的 Web 应用程序使用此服务，即`http://localhost:20984`它无法正常工作。Fiddler 在我尝试时显示`http://localhost/WebHttpBindTest/JSONAPIDemo.aspx`

```
GET http://localhost/WebHttpBindTest/Service.svc/GetData?value=some&callback=jsonp1337264181292&_=1337264186941 HTTP/1.1
Accept: text/javascript, application/javascript, */*
Accept-Language: en-us
Referer: http://localhost/WebHttpBindTest/JSONAPIDemo.aspx
Authorization: Basic Y2RtdXNlcjpjZG1wYXNzd29yZA==
x-requested-with: XMLHttpRequest
Accept-Encoding: gzip, deflate
User-Agent: Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.1; WOW64; Trident/5.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; InfoPath.2; .NET4.0C; .NET4.0E)
Host: localhost
Connection: Keep-Alive
Cookie: __utma=37822774.11348549.1335971819.1337185885.1337195810.36; __utmz=37822774.1335971819.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none) 
```

但是当我从网络应用程序尝试时

```
GET http://localhost/WebHttpBindTest/Service.svc/GetData?value=fdsafa&callback=jsonp1337264499382&_=1337264533468 HTTP/1.1
Accept: application/javascript, */*;q=0.8
Referer: http://localhost:20984/WebSite1/Demo.htm
Accept-Language: en-US
User-Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0)
Accept-Encoding: gzip, deflate
Host: localhost
Connection: Keep-Alive 
```

当我使用 Web 应用程序页面发送时，请参阅缺少授权标头。

看起来这是跨域问题。我确实启用了crossdomainscriptAccess，即

 **这是服务合同：

```
[ServiceContract]
public interface IService
{
    [WebGet(ResponseFormat = WebMessageFormat.Json)]
    [OperationContract]
    string GetData(string value);

} 
```

**WEB.Config**

```
<system.serviceModel>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true"/>
    <services>
      <service name="Service" behaviorConfiguration="auth">
        <endpoint address="" kind="webScriptEndpoint" contract="IService" />
      </service>
    </services>
    <standardEndpoints>
      <webScriptEndpoint>
        <standardEndpoint crossDomainScriptAccessEnabled="true">
        </standardEndpoint>
      </webScriptEndpoint>
    </standardEndpoints>
    <behaviors>
      <serviceBehaviors>
        <behavior name="auth">
          <serviceAuthorization serviceAuthorizationManagerType="BasicAuth.BasicAuthorization, BasicAuth" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel> 
```

jQuery 表单：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script src="Base64.js" type="text/javascript"></script>
    <script src="jquery.min.js" type="text/javascript" language="javascript"></script>
    <script type="text/javascript">
        var Type;
        var Url;
        var Data;
        var ContentType;
        var DataType;
        var ProcessData;
        function CallService(successfn,auth) {
            var addHeaders = function (xhr) {
                xhr.setRequestHeader("Authorization", auth);
            };

            $.ajax({
                type: Type, //GET or POST or PUT or DELETE verb
                url: Url, // Location of the service
                data: Data, //Data sent to server
                contentType: ContentType, // content type sent to server
                dataType: DataType, //Expected data format from server
                processdata: ProcessData, //True or False
                beforeSend: addHeaders,
                success: function (msg) {//On Successfull service call
                    successfn(msg);
                },
                error: ServiceFailed// When Service call fails
            });
        }
        function make_base_auth(user, pass) {
            var tok = user + ':' + pass;
            var hash = Base64.encode(tok);
            return "Basic " + hash;
        }
        function getUrl() {
            var auth = make_base_auth('user', 'password');
            Type = "GET";
            Url = "http://localhost/WebHttpBindTest/Service.svc/GetData?value=" + $('#txtCode').val();
            ContentType = "text/json; charset=utf-8";
            DataType = "jsonp";
            ProcessData = true;

            CallService(ServiceSucceeded,auth);
        }

        function ServiceSucceeded(result) {
            var resultObject = null;

            if (DataType == "jsonp") {
                if (Url.indexOf(".asmx/") > 0) {
                    resultObject = result.d; 
                }
                else {
                    $("#div1").html("Result:" + result);
                }
            }
        }
        function ServiceFailed(result) {
            alert('Service call failed: ' + result.status + '' + result.statusText);
            Type = null; Url = null; Data = null; ContentType = null; DataType = null; ProcessData = null;
        }
    </script>
</head>
<body>
    <div id="container">

        <h1>JSON API Demo</h1>

        <div>
            <p>Type Something: <input type="text" id="txtCode" />
            <button type="submit"value="submit" id="btnGetUrl" onclick="getUrl()">Get</button>
        </div>
        <br /><br />
        <center><div id="div1" style="font-size:larger"></div>  </center>
</div>  
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T20:38:52.623

If you want to access the endpoint via jQuery, you should use the `<webHttpEndpoint>` standard endpoint, not the `<webScriptEndpoint>`. `webScriptEndpoint`s should be used for clients which use the ASP.NET AJAX framework only.**

# opencv - 创建已编译库的附加新功能

> ID：10639120
> 
> 赞同：0
> 
> 时间：2012-05-17T15:52:54.797
> 
> 标签：opencv, static-libraries

我正在使用 OpenCV API。cv、cxcore、highgui 等库已经编译并添加到我的新应用程序中。在这种情况下，如果我想编写额外的函数并将它们添加到这些类中或修改原始源文件中的某些函数，而无需重新编译这些库。那可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T16:58:32.077

**不**，**当您更改源代码时，您需要重新编译**库以使更改生效。

# java - Eclipse / Java：有什么方法可以重新扫描路径以使 Eclipse 不显示错误？

> ID：10639121
> 
> 赞同：1
> 
> 时间：2012-05-17T15:52:56.080
> 
> 标签：java, eclipse

有时将库添加到 Eclipse Java 项目后，Eclipse 仍然感到困惑并显示错误（无法解析类型等）。

Eclipse 似乎经常像这样被绊倒。F5/Refresh 不能解决问题。

我一直在剪切然后粘贴解决错误的“错误”代码，但是这个解决方案很难看，特别是如果有一个大型项目。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T15:59:33.490

我以前遇到过这个问题。我会按顺序建议这些：

*   删除意外添加的导入。（这可以通过将鼠标悬停在波浪黄线上并选择上下文 => 组织导入来完成）。确保保存文件。如果这不能解决...
*   从 Eclipse 主菜单中，选择 Project -> Clean... 并重建受影响的文件。如果这不能解决...
*   项目 -> 清理...并清理所有项目。如果这不能解决...
*   从命令行重新启动 Eclipse。请参阅[http://wiki.eclipse.org/FAQ_How_do_I_run_Eclipse%3F](http://wiki.eclipse.org/FAQ_How_do_I_run_Eclipse%3F)从命令行重新启动。我建议使用 -clean 选项，您可以在[http://help.eclipse.org/helios/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/misc/runtime-阅读更多信息选项.html](http://help.eclipse.org/helios/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/misc/runtime-options.html)。

# c# - EF代码首先，从多对多关系公开链接表/对象？

> ID：10639122
> 
> 赞同：3
> 
> 时间：2012-05-17T15:52:59.743
> 
> 标签：c#, entity-framework, ef-code-first, many-to-many

我试图将 EF 代码首先在多对多关系中自动创建的链接类公开为单独的对象，因为**该链接对象需要在其他类中引用**，但是我似乎在获取存在于数据库。

我有以下 3 个对象：

```
 public class Role : Entity
{
    public virtual ICollection<User> Users { get; set; }
    public string Name { get; set; }
    public string Description { get; set; }
    public virtual ICollection<Permission> Permissions { get; set; }
}

public class User: Entity
{
    public string FirstName { get; set; }
    public string MiddleName { get; set; }
    public string LastName { get; set; }

    public virtual ICollection<Role> Roles { get; set; }
 }

 public class UserRole : Entity
{
    public User User { get; set; }
    public Role Role { get; set; }
} 
```

这将创建以下表格：

![在此处输入图像描述](../Images/a1aff9d0d74dddb6100f6a3a2266455f.png)

现在我可以看到问题在于它正在创建一个`RoleUsers`表，而它不应该并且应该只使用我的`UserRoles`表。如何强制链接表，`UserRoles`以便我可以在 EF 中公开该链接对象，以便我可以在其他对象中使用它？

另外，在编写查询时我将如何遍历对象？我仍然可以使用 User.Roles.Any(y => y.Name == "blah")，还是现在必须通过 User.UserRoles.Any(y => y.Role.Name = 进行查询=“废话”）？我想在暴露链接对象的同时保持透明链接是不可能的？

编辑：引用 UserRole 作为导航属性的类之一如下所示：

```
 public class UserRoleEntity : Entity
{
    public UserRole UserRole { get; set; }
    public Guid EntityId { get; set; }
    public EntityType EntityType { get; set; }
} 
```

我不想将 User 和 Role 对象单独存储在此类中，因为这样它们就不是紧密耦合的，并且数据可能是孤立的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T16:04:22.223

您无需`UserRole`在代码中显式创建实体。由于您具有`Roles`in`Users`和`Users`in的导航属性`Roles`，EF 将自动在它们之间创建关系。

编辑：如果您想创建链接表并将其用作另一个类的属性，您可以这样做。

```
public class User 
{
    public int UserID { set; get; }
    public string FirstName { get; set; }     
    public string LastName { get; set; }
    public virtual ICollection<UserRole> UserRoles { get; set; }      
}
public class Role 
{      
    public int RoleID { set;get;}
    public string Name { get; set; }
    public string Description { get; set; }
    public virtual ICollection<UserRole> UserRoles { get; set; }
}
public class UserRole 
{
    public int UserRoleID { set; get; }
    public virtual User User { get; set; }
    public virtual Role Role { get; set; }
}
public class AnotherEntity
{
    public int ID { set; get; }
    public int UserRoleID { set; get; }     
} 
```

你会像这样创建你的表

![在此处输入图像描述](../Images/ea431d2f8c47e7150bfe2044ded199b2.png)

你是对的，你必须像这样访问它

```
 StringBuilder stRoleNames = new StringBuilder();
 var user1 = dbContext.Users.Where(x => x.UserID == 34).SingleOrDefault();
 var userRoles = user1.UserRoles;
 foreach (var userRole in userRoles)
 {
     stRoleNames.Append(userRole.Role.Name);
 } 
```

# xml - gzip 在 Windows 7/PowerShell 下截断大型 XML 文件？

> ID：10639124
> 
> 赞同：0
> 
> 时间：2012-05-17T15:53:04.897
> 
> 标签：xml, windows, unix, powershell, gzip

我在 Windows 7 上使用 gzip (1.3.12) 作为处理大型 XML 文件（大约 100 MB）的 PowerShell 脚本（开发中）的一部分。该脚本遍历所有文件，然后运行`gzip -d -v $pathToTheGzipFile`​​. 然后它进行一些处理，然后运行`gzip -9 -v $pathToTheUnzippedXmlFile`。在开发过程中，我已经在几十个文件上运行了几十次脚本，我注意到两次随机文件在解压缩后被截断了一小部分。XML 解析器拒绝解析它，脚本失败。

我不确定问题是否发生在压缩或解压缩期间。由于不同的故障，我不得不多次杀死脚本。

以前有人见过 gzip 的这种问题吗？谢谢！

# java - 使用 osgi 访问 bundle 内的公共属性文件

> ID：10639128
> 
> 赞同：3
> 
> 时间：2012-05-17T15:53:20.213
> 
> 标签：java, spring, classpath, osgi, properties-file

我有一个带有多个捆绑包的 osgi 应用程序（在 felix 中）。一个包中有一些通用属性文件，其余包只需要使用它们即可。

我们使用 maven 和 spring osgi，属性文件位于如下资源中：

```
<path to bundle>/src/main/resources/
    common.properties
    engine.properties
    ... 
```

Maven 通常在 bundle jar 中构建它们，因此它们应该位于应用程序类路径中，但是 Spring 无法访问它们，这会失败：

```
<context:property-placeholder location="classpath:common.properties" /> 
```

（尝试了 classpath*: 和其他组合）

我读过[这个](https://stackoverflow.com/questions/7191162/spring-propertyplaceholderconfigurer-cannot-find-property-file)和[这个](https://stackoverflow.com/questions/6244993/no-access-to-bundle-resource-file-osgi)

这真的是 osgi 意识形态的一些全球性问题，而且没有标准的方法让它发挥作用吗？[只有像这样的](https://stackoverflow.com/a/6251422/365675)黑客和解决方法`<osgix:cmProperties...>`？

之所以担心，是因为它使部署变得更加困难且容易出错：您不能`mvn deploy`像在普通应用程序中那样在 jar 中部署属性文件 - 您必须在每次发布时手动将它们复制到生产盒中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T05:41:43.187

对于 OSGi，没有通用的应用程序类路径。尽管属性位于包含它们的包的类路径中，但它们不一定位于使用它们的包的类路径中。

这有点难看，但通常导出包含属性文件夹的“包”将使它们可以访问。在这种情况下，它看起来像'.'，这非常难看，但你可以将它们放在'properties'目录中（比如说），然后导出一个属性包。使用这些属性的捆绑包也需要导入属性包。

或者，使用包含包的类加载器来查找资源将起作用，尽管我无法评论 Spring 配置的外观。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T09:49:19.940

阅读所有捆绑包中的公共属性的最佳方法是使用 spring DM 提供的 compendium 服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T17:47:44.687

我发现属性文件应该是“通用”的情况很少见。你不能分解属性文件的内容并将它们放在实际需要它们的包中。属性应按上下文分组并放置在需要该上下文的包中。

理论上类似于不使用常量类或接口，这被认为是反模式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T09:35:09.447

我最终使用的另一种选择 - 将属性文件放置到文件系统中，然后从 spring（或其他代码）中将它们引用为`file:path/to/common.props`.

# wordpress - 如何在背景图像上正确重新定位输入表单和按钮？

> ID：10639131
> 
> 赞同：0
> 
> 时间：2012-05-17T15:53:31.540
> 
> 标签：wordpress, css, responsive-design

我正在尝试创建一个文本小部件，该小部件在使用 Twitter Bootstrap 2 作为其框架的响应式主题中的背景图像顶部包含一个输入表单。我正在尝试在图像上正确定位输入按钮和联系人。现在它在中间，但我正试图将它向下和向左移动。这是我用于小部件的代码。有人可以帮我弄清楚如何添加内联的 CSS 来移动框和按钮吗？（然后我可以进去调整它们，我只需要弄清楚我需要添加什么来做到这一点。）谢谢！

```
<form style="-webkit-background-size: cover;-moz-background-size: cover;-o-background-size: cover;background-size: cover;padding: 3px;text-align: center;background: url(http://noahsdad.com/wp-content/uploads/2012/05/noahs-dad-side-bar.jpg) no-repeat center; padding: 25% 0;" action="http://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open('http://feedburner.google.com/fb/a/mailverify?uri=noahsdad', 'popupwindow', 'scrollbars=yes,width=550,height=520');return true" <input type="text" style="width:200px;height:20px;" name="email" onblur="if (this.value == '') {this.value = 'Enter your email address';}" onfocus="if (this.value == 'Enter your email address') {this.value = '';}" value="Enter your email address"/>
    </p>
    <input type="hidden" value="noahsdad" name="uri"/><input type="hidden" name="loc" value="en_US"/>
    <input type="submit" value="Subscribe" />
</form> 
```

自从我第一次发布问题以来，我已经更改了一些代码。

```
<form style="-webkit-background-size: cover;-moz-background-size: cover;
-o-background-size: cover;background-size: cover;padding: 3px;text-align: center;background: url(http://noahsdad.com/wp-content/uploads/2012/05/noahs-dad-side-bar.jpg) no-repeat center;
padding: 30% 0;" action="http://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open('http://feedburner.google.com/fb/a/mailverify?uri=noahsdad', 'popupwindow', 'scrollbars=yes,width=550,height=520');return true">
    <p>
        <input type="text" style="width:170px;height:18px;margin-bottom:-110px;margin-left:-125px;" name="email" onblur="if (this.value == '') {this.value = 'Enter your email address';}" onfocus="if (this.value == 'Enter your email address') {this.value = '';}" value="Enter your email address"/>
    </p>
    <input type="hidden" value="noahsdad" name="uri"/><input type="hidden" name="loc" value="en_US"/>
    <input type="submit"  style="margin-bottom:-134px;margin-left:-220px;" value="Subscribe" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T17:15:06.390

我假设你的意思是左下角。如果是这样，请使用这个：

```
<form style="-webkit-background-size: cover;-moz-background-size: cover;
-o-background-size: cover;background-size: cover;padding: 3px;text-align:     center;background: url(http://noahsdad.com/wp-content/uploads/2012/05/noahs-dad-side-bar.jpg)      no-repeat center;
padding: 30% 0;" action="http://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open('http://feedburner.google.com/fb/a/mailverify?uri=noahsdad', 'popupwindow', 'scrollbars=yes,width=550,height=520');return true">
<p>
    <input type="text" style="width:170px;height:18px;float:left;margin-top:28%;" name="email" onblur="if (this.value == '') {this.value = 'Enter your email address';}" onfocus="if (this.value == 'Enter your email address') {this.value = '';}" value="Enter your email address"/>
</p>
<input type="hidden" value="noahsdad" name="uri"/><input type="hidden" name="loc" value="en_US"/>
<input type="submit"  style="float:left;margin-top:28%;" value="Subscribe" /> 
```

# java - 私有不可访问字段是否需要是最终的？

> ID：10639132
> 
> 赞同：4
> 
> 时间：2012-05-17T15:53:33.750
> 
> 标签：java, servlets, dependency-injection, constructor, initialization

我在 Servlet 中有两个选项，用于初始化我不想在 @Singleton Servlet 的生命周期内更改的变量，我们称之为：

```
Field a; 
```

字段 a 将仅由 servlet 在内部使用，没有访问器方法，并且为简单起见，字段 a 是不可变的，例如字符串。

选项 1 - 利用从 ServletContext 的依赖注入中获得的信息初始化构造函数内的字段，以便该字段变为：

```
private final Field a; 
```

选项 2 - 利用从 ServletConfig（和 ServletContext）获得的信息，在重写的 init(ServletConfig cfg) 方法中设置变量，以便该字段变为：

```
private Field a; 
```

显然，我更希望将字段设为 final，但该字段是私有的，并且没有附加任何访问器方法，所以我是否仍应尝试将其设为 final？

所以，总而言之，一个字段应该在构造函数中初始化并成为最终的，还是在 init 方法中初始化并保留为非最终的没有访问器？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T15:56:54.923

> 显然，我更希望将字段设为 final，但该字段是私有的，并且没有附加任何访问器方法，所以我是否仍应尝试将其设为 final？

是的。它使您的意图更加清晰。如果它不是最终的，你愿意打赌，以后没有人会添加一个改变它的方法，仍然留下有效假设它不会被改变的代码？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T15:57:14.477

声明它的好处`final`是您不会无意中在代码中的某处更改它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T16:17:54.190

In addition to documenting your intent clearly and making your code easier to understand and maintain, a `final` modifier provides some important assurances in a multi-threaded application.

While I'm not sure if it's guaranteed by the Servlet specification, it seems that in practice, servlet engines should use some memory barrier that will ensure that the internal state of a new servlet instance is visible to all of the threads that will use it to process servlet requests. This is called "safe publication."

However, in general, this is not the case. What you describe as "Option 2" is "effective immutability." The object has a field that isn't `final`, but doesn't allow modification of that field after construction or some initialization step. But, if other threads access this object without going through a memory barrier, they might not see the value assigned to that field by the initializing thread—even if this field was set in the object's constructor!

A value assigned during object construction to a `final` field, however, is guaranteed to be visible to all other threads, even if the object itself is not "safely published."

# .htaccess - 如何使用 htaccess / mod_rewrite 搜索引擎友好的 URL？

> ID：10639133
> 
> 赞同：-1
> 
> 时间：2012-05-17T15:53:39.447
> 
> 标签：.htaccess, mod-rewrite

我已经安装了一个互惠脚本。在脚本安装文本中，他们编写如下：

倒数脚本生成表单的页面

[http://www.your-domain.com/myfolder/partners.php?page=x](http://www.your-domain.com/myfolder/partners.php?page=x)

（其中 x 是一个数字）

可以使用 Apache 的 mod_rewrite 生成表单的搜索引擎友好页面

示例： [http](http://www.your-domain.com/myfolder/pagex.html) ://www.your-domain.com/myfolder/pagex.html （其中 x 也是一个数字）。

为此，请确保您的托管公司提供 mod_rewrite 支持（几乎所有 linux 托管都有它），并且在上面的步骤 2 中，还要修改 $urlrewrite = false; 到 $urlrewrite = true;

现在，我使用的是 Linuk 主机，并且 Godaddy 主机启用了 Apache Mod-rewrite。我想更改以下路径

/reciprocallinks/partners.php?page=1

至

/reciprocallinks/page1

有人可以帮忙吗？我必须在我的 .htaccess 文件中写什么？

我已经按照脚本的 config.php 中的指示更改了第 2 步。

我不知道在 .htaccess 文件中写什么？

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T16:07:32.250

你这样写：

```
RewriteEngine on
RewriteCond %{QUERY_STRING} page=(\d+)
RewriteRule reciprocallinks/partners.php reciprocallinks/page%1? [L,R] 
```

# cocoa-touch - UITextField 切断 Unicode 字符的下行

> ID：10639139
> 
> 赞同：3
> 
> 时间：2012-05-17T15:53:56.343
> 
> 标签：cocoa-touch, uitextfield, unicode-string

有什么方法可以让 UITextField 正确显示包含 unicode 下标字符（例如 2 、 ₃ ）的 NSString 而不将它们切断？我从在 IB 中创建的 UITextField 开始。

我试过了：

*   在代码中将 UITextField 上的 frame.size.height 设置为更大（只是将截止字符居中在一个较高的框中）

*   将 contentVerticalAlignment 属性更改为 UIControlContentVerticalAlignmentTop- 只是将截止字符推到顶部

*   使用 clipSubviews/Autoresize Subviews 播放 - 无效

这是针对化学程序的，因此查看数字的下半部分很重要。帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:27:30.733

我还没有找到让它工作的方法`UITextField`。

就我而言，我将它用于占位符文本。对我有用的是`UILabel`用于占位符文本。这些正确显示下标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T16:12:03.030

您是否尝试将字体设置为较小的尺寸？

```
textField.font = [UIFont systemFontOfSize:14]; 
```

-=-=-=-=-=-

这是同一个问题的链接，他们似乎通过创建自定义 UILabel 子类并修改其 (CGSize)sizeThatFits:(CGSize)size 方法解决了这个问题。

[在具有下标的 UILabel 上调用方法 sizeToFit 不起作用](https://stackoverflow.com/questions/8766137/calling-method-sizetofit-on-a-uilabel-that-has-subscripts-is-not-working)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-04T15:15:06.233

使用[此处](http://www.andyyardley.com/2012/04/24/custom-ios-fonts-and-how-to-fix-the-vertical-position-problem/)的步骤，您可以编辑要添加到项目中的自定义字体文件，并增加或减少其升序和/或降序，以便为您的下标留出垂直空间。

# android - 识别对象的 Android 应用

> ID：10639151
> 
> 赞同：-3
> 
> 时间：2012-05-17T15:54:33.500
> 
> 标签：android, image-processing, image-recognition

是否有任何可能的方法来开发和实现一个只会在相机屏幕上向我们显示文本消息/详细信息的应用程序：

1.  当我们将设备指向该特定对象时。
2.  当我们设置用户和对象之间的距离时，比如 20 米。

我知道我们可以使用图像识别来做到这一点，但我想知道是否还有其他可行的方法？任何建议将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T16:09:16.837

这听起来很像 Google Goggles。你拍一张照片，它在手机中被扫描，它会告诉你物体是什么。

不过，我认为您要问的更像是[这样](http://www.dailymail.co.uk/sciencetech/article-2135341/The-camera-prints-sees--taking-photo.html)。这台相机拍下它正在看的任何东西，并以文本形式打印出你所看到的东西。也许这可以为您指明正确的方向。

# c++ - 如何使用 C++ 自动化在 Word 文档中插入页眉或页脚

> ID：10639161
> 
> 赞同：2
> 
> 时间：2012-05-17T15:55:13.720
> 
> 标签：c++, ms-word, automation, get-headers

我想使用 word 自动化在 word 文档中插入页眉或页脚。

```
_document ocDoc;
Sections DocSections = Sections(ocDoc.GetSections());
section firstSec = DocSections.Item( 1 );
HeaderFooter Hf = firstSec.GetHeaders();
Range MyRange = Hf.GetRange();
MyRange.SetText( L"salam" ); 
```

但代码部分是“Range MyRange = Hf.GetRange();” 失败，如何使用 C++ 在 Word 文档中插入页眉或页脚？

c# 中的以下代码可以正常工作：

```
_document ocDoc;
oDoc.Sections[1].Headers[WdHeaderFooterIndex.wdHeaderFooterPrimary].Range.Text = "My Header"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-02-27T15:59:54.803

对于仍在寻找答案的人：

```
HeadersFooters Hfs = firstSec.GetHeaders();
HeaderFooter Hf = Hfs.Item(1);
Range MyRange = Hf.GetRange();
MyRange.SetText( L"salam" ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T18:44:36.640

你的 C++ 相当于哪里

```
Headers[WdHeaderFooterIndex.wdHeaderFooterPrimary] 
```

就像是

```
Hf.GetItem(wdHeaderFooterPrimary).GetRange(); 
```

# android - Android - 用户用手指画线

> ID：10639165
> 
> 赞同：2
> 
> 时间：2012-05-17T15:55:30.607
> 
> 标签：android, android-canvas, draw, touch-event, ontouchlistener

我想在 Android 上构建一个工具，用户可以在其中在图片上绘制一些简单的对象（例如线、圆或箭头）。我先开始尝试线条部分，确实可以成功画出来。逻辑是用户点击某一点，然后拖动手指，绘制线条。我使用这样的课程（它基于[DonGru 在此处的回答](https://stackoverflow.com/questions/3616676/how-to-draw-a-line-in-android)）：

```
public class DrawView extends View {
    Paint paint = new Paint();
    float Sx, Sy, Lx, Ly;

    public DrawView(Context context, float x1, float y1, float x2, float y2) {
        super(context);

        paint.setColor(Color.RED);
        Sx=x1;
        Sy=y1;
        Lx=x2;
        Ly=y2;   
    }

    @Override
    public void onDraw(Canvas canvas) {
            canvas.drawLine(Sx, Sy, Lx, Ly, paint);
    }
} 
```

从活动代码中，我像这样使用 onTouch 侦听器：

```
@Override
public boolean onTouch(View view, MotionEvent event) { 
    switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            Sx1 = event.getX();
            Sy1 = event.getY();
            return true;

        case MotionEvent.ACTION_MOVE:
            Cx1 = event.getX();
            Cy1 = event.getY();
            drawLine();
            return true;

        case MotionEvent.ACTION_UP:
            Lx1 = event.getX();
            Ly1 = event.getY();
            return true;
        }
    return false;
}

public void drawLine(){

    setContentView(R.layout.show);
    ImageView myImage = (ImageView) findViewById(R.id.lastphoto);
    myImage.setImageBitmap(rotatedPic);

    dv=new DrawView(this, Sx1, Sy1, Cx1, Cy1);

    addContentView(dv, new ViewGroup.LayoutParams(ViewGroup.LayoutParams.FILL_PARENT,
            ViewGroup.LayoutParams.FILL_PARENT));

    RelativeLayout mRelativeLayout = (RelativeLayout) findViewById(R.id.linear);
    mRelativeLayout.setOnTouchListener((OnTouchListener) this);
    mRelativeLayout.addView(new Drawer(this));   
} 
```

每一步我都会重新创建整个视图，因此从起点到终点只有一条线可见。我首先担心的是我不知道这个实现是否正确。另外，我希望这些行在创建后作为对象处理。用户应该能够移动它们、旋转它们、删除它们等。我认为我可以通过将每条线的边缘坐标保存在类似于缓冲区的东西中来做到这一点，如果用户非常靠近一个边缘点击我可以处理那个手势。但是所有这些听起来都太复杂了，我不知道这是否不稳定。

我应该使用一些不同的方法来实现我完全缺少的类似的东西吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T16:32:55.370

在我看来，存储绘制的线条并让用户能够操纵它们只是适度复杂。

创建一个 Line 类。包括开始和结束坐标、颜色等作为类的字段和删除、移动等方法。还添加一个采用 MotionEvent 参数的方法。在此方法中，您使用 MotionEvent 来确定是否已触摸此线并根据需要调整其位置。

将绘制的每条线（作为 Line 类的实例创建）的引用存储在扩展 View 类中的某种集合或列表中，ArrayList 应该这样做。然后，在 onTouch 事件中，调用每一行的触摸检测方法，并将 MotionEvent 传递给方法。

最后，通过遍历对 Line 实例的引用集合来覆盖 View 的 onDraw 回调以绘制每条线。

您还可以添加更多手势，例如长按删除等。这是这种方法的（完全未经测试，凭记忆编写）框架。

```
class Line

    public float x1, x2, y1, y2;

    public void detectTouch(MotionEvent motionEvent){

         // code to detect a touch and adjust the x and ys accordingly

    }

class DrawView extends View{

    private ArrayList<Line> lines = new ArrayList<Lines>();

    ....
    ....

@Override
public void onDraw(Canvas canvas) {

    super.onDraw();

    for (Line line : lines){
         canvas.drawLine(line.x1,line.y1,line.x2,line.y2);
    }
}

@Override
public boolean onTouch(View view, MotionEvent event) {

    ....
    ....

    for (Line line : lines){
        line.detectTouch(MotionEvent);
    }

} 
```

玩得开心！

# c# - 用于关联主从列表的最佳结构是什么

> ID：10639169
> 
> 赞同：0
> 
> 时间：2012-05-17T15:55:35.533
> 
> 标签：c#, winforms

C# Winforms：对于快速演示应用程序：“保存”不需要是真正的保存，只需一个 InMemory 保存就足够了。

我定义了一些项目的硬编码列表。我将用它们填充一个组合框。我还在电子表格或列表视图中有一个硬编码的项目列表，每个项目旁边都有复选框。因此，用户从组合框中选择一个项目并从该电子表格或列表视图中选择一些项目，单击“保存”按钮，它将保存该组合框的此项与该电子表格或列表视图的那些选定项目相关联...

问题：有什么好的结构可以保持组合框中的项目与从电子表格或列表视图中为其选择的项目之间的关系 -</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T09:41:52.387

我不确定我是否真的理解你的问题，但我想你想存储一对多的关系。您可以使用一些集合，如通用列表

```
public class Person
{
  public string Name {get; set;}
  public int Age {get; set; }
  public List<Person> Friends {get; set;} 
} 
```

然后您可以创建 BindingSource，用值填充它（将其 DataSource 设置为您的项目列表），最后将组合框的 DataSource 设置为绑定源。请注意，事件应该在 bindingsource 端实现。

# entity-framework - 带有 SQL 服务代理的实体框架

> ID：10639170
> 
> 赞同：2
> 
> 时间：2012-05-17T15:55:37.107
> 
> 标签：entity-framework, service-broker

我想知道如何/是否可以在 EF4.x 或 EF5 中使用 SQL Service Broker？

场景：假设我有一个产品列表，我不想每次客户访问页面时都从数据库加载它。当然我可以缓存页面，但是如果产品经理添加了新产品，它不会立即显示出来，直到缓存过期或查询参数发生变化。

解决方案：在 SQL 中，我们可以 Enable_Broker 并在 web 应用程序中启动链接 SqlDependency。SQL 将向我们的 Web 应用程序发送通知。因此，我们有一个智能的“缓存”系统。如果我们可以使用那个智能缓存，这一切都说得通。当有 1,000 个客户点击该页面时，我们不需要访问 SQL db 1,000 次。但是一旦数据库发生变化，当时访问该页面的第一个客户就会看到反射。我们两全其美。

问题：实体框架未公开此功能。还是我不知道？由于 SQL 2005 和 ASP.NET 2.0 已经具备了这种能力。EF 4/5 不能错过这个重要功能，对吧？我需要一些专家来帮助我解决这个问题。

我碰巧从这个链接中找到了一个黑客：

[http://www.codeproject.com/Articles/233770/AutoRefresh-Entity-Framework-data-using-SQL-Server](http://www.codeproject.com/Articles/233770/AutoRefresh-Entity-Framework-data-using-SQL-Server)

然而，它或多或少是一种“无证魔法”的方式，它有一些未知的限制（该页面的限制链接已被删除，所以我不知道它们是什么）。所以，它对我来说使用起来不够可靠，如果它在一个新的 EF 补丁后突然不起作用，我也不会感到惊讶。有没有更“官方”的方式来做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T16:18:12.733

.Net 提供了在您需要时使缓存失效的方法，您可以设置您的更新页面，产品经理在更新时使用该页面使缓存失效。可能比设置服务代理更容易

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T07:02:30.307

请参阅[LinqToCache](http://code.google.com/p/linqtocache/)，它通过任意 LINQ 查询的 SqlDependency 启用缓存。对于 EF，它归结为 EF 创建的 SQL 查询是否符合查询通知的限制。上次我检查 EF 时无偿在请求中添加了一个子查询，从而使查询无法通知。我听说最新的 EF 更好，它可能会起作用，但我自己还没有测试过。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T06:48:09.103

> 它有一些未知的限制（该页面的限制链接已被删除，所以我不知道它们是什么）

我刚刚修复了那个断开的链接。这并不神秘，只是指向[MSDN 文章“Creating a Query for Notification”](http://msdn.microsoft.com/en-us/library/ms181122%28SQL.105%29.aspx)的链接。

# php - 正则表达式 php 中的任何 url 或链接

> ID：10639175
> 
> 赞同：-1
> 
> 时间：2012-05-17T15:56:00.513
> 
> 标签：php, regex, url, hyperlink

我有那个正则表达式来捕获 php 中的任何 url：

```
((([A-Za-z]{3,9}:(?:\/\/)?)(?:[-;:&=\+\$,\w]+@)?[A-Za-z0-9.-]+|(?:www.|[-;:&=\+\$,\w]+@)[A-Za-z0-9.-]+)((?:\/[\+~%\/.\w-_]*)?\??(?:[-\+=&;%@.\w_]*)#?(?:[\w]*))?) 
```

但它没有捕捉到完整的网址.....例如

这里：

```
http://v12.lscache6.c.youtube.com/videoplayback?app=youtube_gdata&devkey=AX8iKz393pCCMUL6wqrPOZoO88HsQjpE1a8d1GxQnGDm&el=videos&upn=0K3DA3wYhjI&uaopt=no-save&source=youtube&itag=18&id=ab59b1e9554eca6d&ip=0.0.0.0&ipbits=0&expire=1339342342&sparams=id,itag,source,uaopt,upn,ip,ipbits,expire&signature=5026BE137B41D5CD9785E752D1892903D432974C.BA1D4E0C138210B2275391A2A3D469E582183621&key=yta1&cms_redirect=yes 
```

它只抓住了：

[http://v12.lscache6.c.youtube.com/videoplayback?app=youtube_gdata&devkey=AX8iKz393pCCMUL6wqrPOZoO88HsQjpE1a8d1GxQnGDm&el=videos&upn=0K3DA3wYhjI&uaopt=no-save&source=youtube&itag=18&id=ab59b1e9554eca6d&ip=0.0.0.0&ipbits=0&expire=1339342342&sparams=id](http://v12.lscache6.c.youtube.com/videoplayback?app=youtube_gdata&devkey=AX8iKz393pCCMUL6wqrPOZoO88HsQjpE1a8d1GxQnGDm&el=videos&upn=0K3DA3wYhjI&uaopt=no-save&source=youtube&itag=18&id=ab59b1e9554eca6d&ip=0.0.0.0&ipbits=0&expire=1339342342&sparams=id)

那么我需要什么来捕获完整的网址？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T16:03:43.930

您需要在正则表达式中添加一个逗号字符：

您的正则表达式已修复：

```
((([A-Za-z]{3,9}:(?:\/\/)?)(?:[-;:&=\+\$,\w]+@)?[A-Za-z0-9.-]+|(?:www.|[-;:&=\+\$,\w]+@)[A-Za-z0-9.-]+)((?:\/[\+~%\/.\w-_]*)?\??(?:[-\+=&;%@,.\w_]*)#?(?:[\w]*)?)) 
```

验证正则表达式的好网站：[Rubular](http://rubular.com/)

如果要将 URL 分解为部分，可以使用 parse_url() PHP 函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T16:03:55.337

**可以试试这个：**

```
\b(?:(?:https?|ftp|file)://|www\.|ftp\.)[-A-Z0-9+&@#/%=~_|$?!:,.]*[A-Z0-9+&@#/%=~_|$] 
```

**解释**

```
<!--
\b(?:(?:https?|ftp|file)://|www\.|ftp\.)[-A-Z0-9+&@#/%=~_|$?!:,.]*[A-Z0-9+&@#/%=~_|$]

Options: case insensitive

Assert position at a word boundary «\b»
Match the regular expression below «(?:(?:https?|ftp|file)://|www\.|ftp\.)»
   Match either the regular expression below (attempting the next alternative only if this one fails) «(?:https?|ftp|file)://»
      Match the regular expression below «(?:https?|ftp|file)»
         Match either the regular expression below (attempting the next alternative only if this one fails) «https?»
            Match the characters “http” literally «http»
            Match the character “s” literally «s?»
               Between zero and one times, as many times as possible, giving back as needed (greedy) «?»
         Or match regular expression number 2 below (attempting the next alternative only if this one fails) «ftp»
            Match the characters “ftp” literally «ftp»
         Or match regular expression number 3 below (the entire group fails if this one fails to match) «file»
            Match the characters “file” literally «file»
      Match the characters “://” literally «://»
   Or match regular expression number 2 below (attempting the next alternative only if this one fails) «www\.»
      Match the characters “www” literally «www»
      Match the character “.” literally «\.»
   Or match regular expression number 3 below (the entire group fails if this one fails to match) «ftp\.»
      Match the characters “ftp” literally «ftp»
      Match the character “.” literally «\.»
Match a single character present in the list below «[-A-Z0-9+&@#/%=~_|$?!:,.]*»
   Between zero and unlimited times, as many times as possible, giving back as needed (greedy) «*»
   The character “-” «-»
   A character in the range between “A” and “Z” «A-Z»
   A character in the range between “0” and “9” «0-9»
   One of the characters “+&@#/%=~_|$?!:,.” «+&@#/%=~_|$?!:,.»
Match a single character present in the list below «[A-Z0-9+&@#/%=~_|$]»
   A character in the range between “A” and “Z” «A-Z»
   A character in the range between “0” and “9” «0-9»
   One of the characters “+&@#/%=~_|$” «+&@#/%=~_|$»
--> 
```

# c# - 如何 Mole 一个实例字段？

> ID：10639179
> 
> 赞同：1
> 
> 时间：2012-05-17T15:56:28.827
> 
> 标签：c#, visual-studio-2010, unit-testing, moles

我正在尝试为`System.Security.Cryptography.CspParameters`班级创建一个痣，更具体地说是为`KeyContainerName`. 问题是，它的 moles 代表没有出现在 Intellisense 中。这是我正在使用的代码：

```
MCspParameters.AllInstances.KeyContainerNameSetString = (
    CspParameters parameters, 
    string name) =>
{
   // ...
} 
```

`KeyContainerNameSetString`实际不可用。我认为这是因为`KeyContainerName`它是一个字段而不是一个属性。

有什么想法可以让我在这个领域进行测试吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T16:41:34.567

默认情况下，字段是可写的，因此在这种情况下不需要使用 Moles，只需将其设置为您想要的值即可。

```
cspParameters.KeyContainerName = "MyContainerName"; 
```

但是，由于您正在使用，`MCspParameters.AllInstances`我会假设`CspParameters`您想要执行的实例是在您的控制之外创建的，并且您无法在使用它之前对其进行设置。

在这种情况下，您可以使用该类的所有其他构造函数调用的构造函数，并将问题中的字段设置为您的特定值。像这样的东西：

```
[TestMethod()]
[HostType("Moles")]
public void Test()
{
    MCspParameters.ConstructorInt32StringStringCspProviderFlags = (
        p, 
        providerType, 
        providerName, 
        keyContainerName, 
        flags) => 
    {
        p.ProviderType = providerType;
        p.ProviderName = providerName;
        p.KeyContainerName = "MyContainerName";
        p.KeyNumber = -1;
        p.Flags = flags;
    };

    CspParameters cspParameters = new CspParameters(1);

    Assert.AreEqual(cspParameters.ProviderType, 1);
    Assert.AreEqual(cspParameters.KeyContainerName, "MyContainerName");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T16:47:06.747

似乎没有办法绕过公共领域。因此，如果您想确保某个特定字段已设置为某个值 - 您很不走运。我想作为一种解决方法，您可以为`CspParameters`具有与其每个字段对应的属性的类创建一个包装器，并在程序中尽可能使用包装器，并在测试中绕过属性。

您可能还可以从包装器实现隐式转换，`CspParameters`以便能够在需要实例的地方传递包装器`CspParameters`。

# c# - 通过 ActionLink 收集通行证

> ID：10639182
> 
> 赞同：0
> 
> 时间：2012-05-17T15:56:32.847
> 
> 标签：c#, asp.net-mvc-3, collections, viewbag

我在 ASP.NET MVC3 中有一个网站。我想将集合传递给另一个视图。我有这个收藏在`ViewBag`. 这是我的`ActionLink`：

```
@Html.ActionLink("Show Report", "Report", new { workList = ViewBag.workReportList }) 
```

控制器：

```
public ActionResult Report(List<Work> workList)
{
    return View(workList);
} 
```

但它不起作用 - 看起来传递的对象是空的。当我使用相同的对象时，`RenderPartial`一切正常。

```
@{Html.RenderPartial("WorkListTable", (IEnumerable<WorkWeb.Entities.Work>)ViewBag.workReportList);} 
```

如何将此对象传递给视图？非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T16:19:37.950

我以前也遇到过这个问题，和路由有关。在您的 ActionLink 和 ActionResult 中更改`workList`为或添加一个您接受作为参数的新路由，例如：`id``workList`

```
routes.MapRoute(
            "ReportRoute", // Route name
            "{controller}/{action}/{workList}", // URL with parameters
            new { controller = "ControllerName", action = "Report", workList = UrlParameter.Optional }
        ); 
```

替换`ControllerName`为您的控制器的名称

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T15:58:29.530

你试过这个（传递控制器名称）吗？

```
@Html.ActionLink("Show Report", "Report", "ControllerName", new { workList = ViewBag.workReportList }, null) 
```

# python - Python Hashtable 不会保存我传递给它的列表切片

> ID：10639185
> 
> 赞同：3
> 
> 时间：2012-05-17T15:56:45.623
> 
> 标签：python, list, hashtable

这是解析字符串并检索参数及其值的基本 Python 脚本。

```
import re

link = "met_y=population&fdim_y=patientStatus:7&fdim_y=pregnant:1&scale_y=lin&ind_y=false&rdim=department&idim=department:9:2:4&idim=clinic:93301:91100:93401:41201:41100&ifdim=department&tstart=1190617200000&tend=1220511600000&ind=false&draft"

print link

filters = ''

matches = re.findall("\&?(?P<name>\w+)=(?P<value>(\w|:)+)\&?",link )
for match in matches:
    name = match[0]
    value = match[1]
    selection = value.split(':')

    filters = {}
    print selection[0]
    print selection[1:len(selection)]
    filters[selection[0]] = selection[1:len(selection)]

print filters 
```

这里的问题是哈希表过滤器永远不会获取这些值。这个脚本的输出是

```
{'false': []} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T15:58:49.153

您正在`filters`循环内重新创建：

```
filters = {} 
```

这条线需要放在循环*之前*，而不是里面。

另一个潜在问题是您的输入包含重复的键（`fdim_y`和`idim`）。就目前而言，您的代码仅保留每个键的最后一个值。

# magento - magento：在此服务器上找不到请求的 URL MAGENTO/FURNITURE

> ID：10639186
> 
> 赞同：2
> 
> 时间：2012-05-17T15:56:46.940
> 
> 标签：magento, installation

我刚刚使用 WAMP 安装了 magento 1.7。主页（CMS）在安装后工作正常。当我单击 FURNITURE 或 ELECTRONIC 或 AppAREL 之类的链接之一或任何其他链接时，我收到错误“在此服务器上找不到请求的 URL MAGENTO/FURNITURE”。我已经卸载了 WAMP 并尝试使用 Zend 服务器。同样的问题。PHPMYADMIN 在 WAMP 和 ZENDSERVER 安装中导入 magento 示例数据时也有问题。我必须使用 mysql 命令 SOURCE c:\magento-sample-data-1.6.1.0; 导入 我以前安装过很多次magento。所以我知道如何安装。我检查了 apache 的 access.log 和 error.log。那里没有注册任何东西。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T20:17:06.580

动人的答案：

现在它起作用了！Apache 第 213 行中的 AllowOverrides 设置为 None。我将其更改为全部。现在它起作用了。在 admin(system/configuration/web) 中禁用 mod_rewrite 也可以使其正常工作。这两个链接也有同样的答案：

[mod_rewrite Zend 服务器](https://stackoverflow.com/questions/6436416/mod-rewrite-zend-server)

[从本地服务器到实时网络服务器，链接不起作用 [Magento]](https://stackoverflow.com/questions/6150260/from-local-server-to-live-web-server-links-not-working-magento)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-21T05:25:10.497

当我第一次使用 WAMP 安装 Magento 时，我遇到了同样的问题。此链接从本地服务器到实时 Web 服务器， Roscius 提供的[链接不起作用 [Magento]很有帮助。](https://stackoverflow.com/questions/6150260/from-local-server-to-live-web-server-links-not-working-magento)

当我更改系统 > 配置 > Web > 搜索引擎优化 > “使用 Web 服务器重写” = 否中的设置时，我的问题得到了解决

# objective-c - AVPlayer & AVAudioSession

> ID：10639194
> 
> 赞同：0
> 
> 时间：2012-05-17T15:57:26.540
> 
> 标签：objective-c, ios, avfoundation

尝试从无线电服务流式传输音频时，我遇到了一个问题。我让它在后台运行良好，在我的 .plist 文件中设置所需的后台模式。

但是，一旦音频中断（或者如果我在流成功启动之前退出应用程序），我的应用程序（我认为）就会被暂停，因为它不再给我反馈，例如连接更改。

我想做到这一点，这样即使应用程序在后台，我也可以管理流质量等。

有人对我有什么建议吗？

感谢大卫

# java - 为什么使用 ScheduleExecutorService 运行的 UserThread 不会被垃圾收集

> ID：10639203
> 
> 赞同：6
> 
> 时间：2012-05-17T15:57:55.283
> 
> 标签：java, multithreading, executorservice

请帮我在下面的代码中找到线程泄漏的原因。即使在 run() 完成（从控制台打印语句验证）并且主方法已退出（从 print 语句和分析器工具验证）之后，`TestThread`也不会收集垃圾。

但是`TestThread`，如果将 设置为守护线程，即`t.setDaemon(true)`. 下面的代码只是一个示例代码，它说明了我的应用程序中的问题。我正在尝试使用一些预先存在的调度类（它是由其他人设计的`ScheduledExecutorService`）。我注意到，当我继续`Runnable`用类调度多个 s 时，创建的线程永远不会被垃圾收集。

```
public class ThreadTest {

  static void runThreadWithExecutor() {
    final String name = "TestThread";
    ScheduledExecutorService ses = Executors.newSingleThreadScheduledExecutor(
        new ThreadFactory() {
          @Override
          public Thread newThread(Runnable r) {
            Thread t = new Thread(r, name);
            t.setDaemon(false);
            return t;
          }
        });

    ses.schedule(new Runnable() {
        @Override
        public void run() {
           System.out.println("entered " + name);
           System.out.println("exiting " + name);
        }},
      2,
      TimeUnit.SECONDS);
    }

  public static void main(String[] args) throws InterruptedException {
    System.out.println("entered main");
    runThreadWithExecutor();
    Thread.sleep(5000);
    System.out.println("exiting main");
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T16:00:43.427

这是因为`shutdown()`您在安排最后一个工作后没有调用您的执行程序服务：

```
ses.schedule(...);
// this stops any management threads but existing jobs will still run
ses.shutdown(); 
```

我刚刚将`shutdown()`调用添加到您的代码中，它退出正常。所有`ExecutorService`s 都是如此。如果没有关闭，线程池将继续等待提交更多作业，并且永远不会被 GC。

有关更多详细信息，请参阅下面的@John 的答案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T16:10:56.023

@Gray 的评估是正确的，我只是想我补充一下他为什么是正确的。ExecutorService 是一个线程池，它将重用线程。

与`new Thread(runnable).start();`run 方法完成时不同，线程完成然后将被 GC 处理。当 Executor Runnable 完成时，线程将坐在那里等待另一个可运行的任务被提交和使用。因此，通过关闭，您是在告诉执行程序结束线程池中的所有线程。

回答你的最后一部分。将其设置为守护程序仅是因为没有其他（非守护程序）线程在运行。如果您的应用程序启动了其他一些非守护线程，则 Executor 线程将继续。请记住，只有守护线程正在运行时，守护线程将被终止。

# networking - c++中如何处理网卡帧

> ID：10639223
> 
> 赞同：1
> 
> 时间：2012-05-17T15:59:01.860
> 
> 标签：networking, wifi, frames, ethernet, nic

我正在考虑编写一个程序作为我的初级项目......该程序应该连接到同一系统上的不同网络，即如果 PC 有 2 个 NIC，每个 NIC 具有不同的类型（例如以太网和 WIFI），程序应该从一个 NIC，更改标头使其与另一个 NIC 标头的类型匹配，然后将其发送到正确的 NIC ..

所以任何人都可以指导我寻找什么，以及为了完成这个项目而阅读什么？

平台对我来说不是那么重要，我准备好了，或者linux或windows，语言也不是什么大问题，因为我尽可能多地学习这个项目，但正如标题所说，它会很多最好在 C++ 中使用它

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T16:04:19.303

[libpcap](http://www.tcpdump.org/)库至少可以为您提供所需内容的一半。

# google-app-engine - 将 Google 电子表格嵌入 GWT 页面的方法是什么？

> ID：10639225
> 
> 赞同：1
> 
> 时间：2012-05-17T15:59:10.487
> 
> 标签：google-app-engine, gwt, google-sheets

Google AdWords 将电子表格嵌入其中一个页面（请参阅电子表格中的营销/关键字/编辑）。我想在我的 GWT 应用程序中做这样的事情，以允许用户使用嵌入式电子表格编辑他们的数据。我找不到这方面的任何例子。有谁知道该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T18:51:39.553

谷歌这样做的方式是使用[谷歌电子表格小工具](http://support.google.com/docs/bin/topic.py?topic=1360901)。该页面中的“使用示例”链接应该足以让您入门。有很多示例，以及“获取您自己的副本”选项。

* * *

它归结`iframe`为以下形式的元素：

```
<iframe src="http://spreadsheet/url"></iframe> 
```

大多数“魔术”发生在指定的 Url 上。

# python - 名称的 Python id 和 '__main__' 不同

> ID：10639226
> 
> 赞同：3
> 
> 时间：2012-05-17T15:59:10.817
> 
> 标签：python

通常，如果我为变量分配一些值，然后检查它们的 id，我希望它们是相同的，因为 python 本质上只是给我的对象一个“名称”。这可以在下面的代码中看到：

```
>>> a = 3
>>> id(a)
19845928
>>> id(3)
19845928 
```

问题是当我对“**名称**”执行相同操作时

```
>>> __name__
'__main__'
>>> id(__name__)
19652416
>>> id('__main__')
19652448 
```

id怎么可能不同，不应该一样吗？因为`__name__`也应该只是一个参考。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T16:03:52.947

id() 本质上给出了指向数据的内存指针。尽管字符串是不可变的，但不能保证它们会被实习。这意味着一些具有相同值的字符串具有不同的指针。

对于整数（尤其是小整数），指针将是相同的，因此您的`3`示例可以正常工作。

* * *

@KartikAnand：您检查“相同对象”的方式是有效的，尽管通常的方式是使用`x is y`. 问题是它们*不是*同一个对象，并且不能保证是。它们只是具有相同的值。请注意，当您这样做时，`"__main__"`您正在创建一个新对象。有时，python 会进行很好的优化并重新使用先前创建的具有相同值的字符串，但并非*必须*如此。

* * *

Kartik 的目标是“验证分配是否以某种方式引用并且对象不是动态创建的”。为此，请避免创建新对象（无字符串文字）。

```
>>> __name__
'__main__'
>>> x = __name__
>>> id(__name__)
3078339808L
>>> id(x)
3078339808L
>>> __name__ is x
True 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-17T16:02:40.297

仅仅因为两个字符串具有相同的值，并不意味着它们是同一个对象。这是完全预期的行为。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-17T16:02:31.203

在 Python 中，小整数是“池化的”，因此所有小整数值都指向同一个对象。这对于字符串来说不是必须的。

无论如何，这是一个不应该依赖的实现细节。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T16:18:53.547

您在这里遇到的事实是，原语是 Python 中的伪（或真实）单例。此外，查看字符串会掩盖问题，因为当字符串被实习时，值和 id 会成为副作用的同义词，因此某些具有值匹配的字符串将具有 id 匹配，而另一些则不会。尝试查看手工构建的对象，这样您就可以控制何时创建新实例，并且 id 与 value 变得更加明确。

# google-app-engine - 如何在 Google App Engine 上的 Google Datastore 中存储有序字典？

> ID：10639227
> 
> 赞同：2
> 
> 时间：2012-05-17T15:59:18.543
> 
> 标签：google-app-engine, google-cloud-datastore

我有一个 Python OrderedDict，我想将它存储在 Google App 引擎的 Google Datastore 中。OrderedDict 具有以下结构：{'link': {'title': title, 'weight': weight} }。有什么好的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T19:05:43.757

一种解决方案是使用[NDB 的 PickleProperty](https://developers.google.com/appengine/docs/python/ndb/properties#types)，它可以存储任何可以腌制的 Python 对象。

如果这不起作用，您可以使用 NDB JsonProperty`repeated=True`并存储键/值元组。这将需要特殊代码来[反]序列化，但它允许您保留订单信息。

# javascript - 有没有办法在 asp.net mvc 3 中使用 JavaScript、Jquery 来监听事件

> ID：10639233
> 
> 赞同：0
> 
> 时间：2012-05-17T15:59:33.203
> 
> 标签：javascript, jquery, asp.net-mvc, asp.net-mvc-3

我有一个从数据库中获取的名称列表，我希望当用户选择任何一个名称时，它的 id 将保存在一个变量中，然后在提交表单时我在服务器上收到这个 id。我想知道这可能吗？我对这项技术很陌生。

这是我的代码

控制器

```
 public ActionResult Index()
        {
            MyUsers user = new MyUsers();
            List<MyUsers> result = user.GetAllUser();
            return View(result);
        } 
```

看法

```
<h2>Products</h2>

@using (Html.BeginForm())
{
<ul>
@foreach (var item in Model)
{
    <li>@item.Name</li>
}
</ul>
    <input type="submit" value="Click Me" />
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T16:06:10.487

```
// To save the list content/id

var listcontent = '';
$('ul li').on('click', function() {
   listcontent = $(this).text(); // if you want id of list then : listcontent = this.id;
});

// Send the list data to server

$('input[type=submit]').on('click', function() {
   // assumed that you're sending GET reqeust
   $.get('url_to_script?val=' + listcontent, function(res) {
     // res contains data returned from server
   })
}); 
```

# orchardcms - Orchard CMS：是否可以在编辑内容页面时添加 BeforeContent、Content 和 AfterContent 内容？

> ID：10639238
> 
> 赞同：0
> 
> 时间：2012-05-17T15:59:49.227
> 
> 标签：orchardcms

编辑内容页面时是否可以为 Content、BeforeContent 和 AfterContent 提供一个文本框？

我想将我的文章分成介绍、核心和摘要等部分，以便每个部分在 Layout.cshtml 中具有不同的样式。我能想到的唯一方法是为每个内容页面创建一个图层，然后为 BeforeContent 和 AfterContent 区域添加 html 小部件，我将在其中放入我的介绍和摘要。这似乎是很多额外的工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T18:38:01.593

当然，为它们添加字段和设置位置。小部件也可以工作，但维护起来会更痛苦。如果不是几乎不可能。

# cookies - dojo.cookie 彻底删除

> ID：10639240
> 
> 赞同：0
> 
> 时间：2012-05-17T16:00:04.467
> 
> 标签：cookies, browser, dojo

我设置了 dojo.cookie("foo")，并在其他几个页面上调用了它。然后，每当加载某个页面 fooClear.html 时，我都会使用 'dojo.cookie("foo", null, {expire: -1})' 设置删除 cookie。我注意到 dojo.cookie("list") 仅针对 fooClear.html 被删除；如果我在其他页面上调用 dojo.cookie("foo")，它仍然包含旧数据，除非我关闭浏览器。

我相信这是一个缓存问题。但是如何在 dojo 中完全删除 cookie？有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T10:42:08.837

删除当前页面（路径）上的所有 cookie；

```
var cookies = document.cookie.split(";");
for (var i = 0; i < cookies.length; i++) {
  name = cookies[i].split("=")[0];
  document.cookie = name + "=; expires=" + +new Date;
} 
```

在您的情况下，我建议将路径更改为“/”，以便在您页面的任何地方都暴露任何 cookie，无论是在示例“/basket/list.html”、“/epay/submit/basket.html”等下。

在您之前的 cookie 分配中发生的情况是，您在设置 cookie 时遗漏了 path 属性 - 这导致 document.cookie 下的 cookie 从其设置位置“继承”了 document.location。例如，当在 '/admin/save.html' 下并按设置调用dojo.cookie*时**，*它​​将默认为 dojo.cookie("foo", "value", {path:'/admin/'})

 *如果您不知道设置它的路径，则无法清除域下的*所有cookie。*因此，如果上面的 for 循环在 '/' 下执行，那么任何 '/admin/' 路径的 cookie 仍然存在 - 因为它们没有暴露于 '/' 路径

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T09:55:46.253

By design, cookies are saved first pr-domain then pr-path. This means that if you assign a cookie to a mydomain.tld/rootpath/ path, then all subsequent paths are using the same cookie.

What you need to do, is when the cookie is created, pass a parameter to the configuration, 'path', for instance:

In **mydomain.tld/foo.html** when cookie is set in a js block, use:

```
dojo.cookie("mCookie", "contents", {path: '/', domain:'mydomain.tld'})
// domain is the default, can be omitted 
```*

# php - 在codeIgniter中插入多条SQL语句

> ID：10639241
> 
> 赞同：1
> 
> 时间：2012-05-17T16:00:07.140
> 
> 标签：php, mysql, codeigniter

我有以下直接在 MySQL 中工作的 SQL

```
 INSERT INTO `my_tabel` (`data`) VALUES ("my_value");
 SELECT * from `my_tabel` ORDER BY `id` DESC LIMIT 1 
```

它插入一行，然后获取新行，以便我可以返回新 ID 以供以后使用。

当我尝试在[codeIgniter](http://codeigniter.com/)中运行 SQL 时，我收到一条错误消息，指出我的 SQL 中有错误

```
$m = new my_model();
$sql = 'INSERT INTO `my_tabel` (`data`) VALUES ("'.$my_value.'"); SELECT * from `my_tabel` ORDER BY `id` DESC LIMIT 1';
$m->query($sql); 
```

[在codeIgniter](http://codeigniter.com/)中运行单个 SQL 语句可以正常工作，但在我添加第二个 SELECT... 语句时却不行。

任何想法（或替代解决方案）？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T16:06:15.277

这不是 CI 的限制，而是数据库客户端库的限制。

一次只能执行一个查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T16:02:47.963

为什么不运行两条`$m->query()`语句？这样您就可以从 CI 中检查每个单独的成功。

在大多数 SQL 接口中，一个查询中有多个语句是有问题的，因为每个语句的结果类型不同。即使在调用存储过程时，也有必要仔细设计存储过程以免返回无关的结果，尽管通常可以使用允许多个结果的特殊、轻松的 api 来处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T16:04:07.743

要获取插入查询后创建的 ID，而不是运行 2 个查询，请使用：

```
$this->db->insert_id(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T16:06:33.230

insert_id() 是你的朋友！

```
$this->db->insert_id() 
```

从这里[http://codeigniter.com/user_guide/database/helpers.html](http://codeigniter.com/user_guide/database/helpers.html)

所以像：

```
$insert_data = array(
  'data' => $my_value
);

$this->db->insert('my_table', $insert_data);

$last_id = $this->db->insert_id(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T05:19:40.947

正如其他答案中所述，使用 `$this->db->insert_id()`更好，因为另一个用户有可能在您的两个查询之间插入一行。由于 PHP 一次只能执行一个查询，这可能成为一种竞争条件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-18T08:22:37.570

感谢大家的帮助。对我有用的解决方案是

```
$m = my_model();
$m->data = $value;
$m->save();
echo $m->id; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-05-04T05:11:58.813

[http://www.codeigniter.com/userguide2/database/active_record.html#caching](http://www.codeigniter.com/userguide2/database/active_record.html#caching) 您可以使用缓存来控制多个查询而不会发生冲突。

# vb.net - 如何将 SoapHeader 中的用户名和密码转发到 Java WebService

> ID：10639243
> 
> 赞同：0
> 
> 时间：2012-05-17T16:00:13.810
> 
> 标签：vb.net, web-services

我在 VB.Net 中使用 Java Web 服务，我需要从客户端代码的 Soap Header 中转发用户名、密码。

我不知道这个程序。谁能让我知道一个示例或示例代码以从 VB.Net 客户端代码转发参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T16:04:03.750

请检查 --> [http://msdn.microsoft.com/en-us/library/77hkfhh8.aspx](http://msdn.microsoft.com/en-us/library/77hkfhh8.aspx)

[http://msdn.microsoft.com/en-us/library/whew6x7f.aspx](http://msdn.microsoft.com/en-us/library/whew6x7f.aspx)

# php - 使用 PHP 添加/编辑 XML 文件的标签

> ID：10639246
> 
> 赞同：2
> 
> 时间：2012-05-17T16:00:37.820
> 
> 标签：php, xml

我有一个 xml 文件，我想创建一个表单/表格来使用 PHP 添加、编辑和删除记录。

有什么方法可以创建一个显示所有结果的表，并允许我编辑或删除表示 XML 文件中完整记录的表的特定行？

我希望能够仅使用我的网络浏览器添加/编辑/删除标签，而无需编辑 pc 上的 xml 文件并上传到 FTP ..

我需要用 PHP、javascript 或任何其他方式完成此操作。

> 请不要给我 simpleXML 的链接，因为我试过这个，但我没有让它工作:(

如果有人可以帮助我，将不胜感激！谢谢！

我的 xml 文件 (scores.xml) 看起来像这样：

```
<Games>
<Game>
<Header> </Header>
<Row>B</Row>
<Date>07.10.2011 01:05</Date>
<Time>Finished</Time>
<HomeTeam>Team1</HomeTeam>
<Score>1 - 3</Score>
<AwayTeam>Team2</AwayTeam>
<InfoID>info2</InfoID>
<InfoData> </InfoData>
<Other> </Other>
</Game>
</Games> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T16:43:21.237

这是一个在没有 SimpleXML 的情况下在 php 中使用 XML 的非常简单的示例，但是 SimpleXML 会容易得多：

```
<?php
//Load the scores XML file
$scores = new DOMDocument();
$scores -> load('scores.xml');

//Get the <Games> tag
$games = $scores -> getElementsByTagName('Games');

//Create the new <Game> tag (Could probably be done better by first placing everything in an array or something)
$newGame = $scores -> createElement("Game");
$newGame -> appendChild($scores -> createElement("Time", "Finished"));
$newGame -> appendChild($scores -> createElement("Score", "2 - 5"));
$newGame -> appendChild($scores -> createElement("Row", "B"));

//Add the new <Game> tag under the <Games> tag
$games -> item(0) -> appendChild($newGame);

//Save again
$scores -> save('scores.xml');
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T16:19:10.703

您可能没有正确使用 SimpleXML 库。如果您要尝试将内容添加到 Game->Other（当前为空），请以这个简单的示例为例

```
$xml = <<<XML
<Games>
<Game>
<Header> </Header>
<Row>B</Row>
<Date>07.10.2011 01:05</Date>
<Time>Finished</Time>
<HomeTeam>Team1</HomeTeam>
<Score>1 - 3</Score>
<AwayTeam>Team2</AwayTeam>
<InfoID>info2</InfoID>
<InfoData> </InfoData>
<Other> </Other>
</Game>
</Games>
XML;

// first convert the existing XML into a SimpleXML Object
$xmlObj = new SimpleXMLElement($xml);
echo "<pre>".print_r($xmlObj, true)."</pre>";

// update Other
$xmlObj->Game->Other = "lolz";
echo "<pre>".print_r($xmlObj, true)."</pre>";

// return as XML
$xml = $xmlObj->asXML();
echo "<pre>$xml</pre>\n"; 
```

$xml 中的内容现在是完全最新的 XML。现在，如果您有多个游戏，则需要通过执行以下操作遍历 Game 节点：

```
foreach($xmlObj->Game as $game) $game->Other = "Lolz"; 
```

这将使用文本 Lolz 更新每个游戏的 Other 标签。显然这不是很有用，但您会确保通过分配某种标识符或执行一些逻辑来仅更新您想要的节点。无论如何，对于您的基本示例，这应该可以工作，并且应该是解决问题的开始。祝你好运 ：）

# xcode - 在 Xcode 4.2.1 项目中包含标头

> ID：10639251
> 
> 赞同：7
> 
> 时间：2012-05-17T16:01:36.537
> 
> 标签：xcode, opengl, soil

我正在尝试使用一个库，特别是 Xcode 4.2.1 中的 SOIL（简单 OpenGL 图像库）。在 Build Phases -> Link Library with Libraries 下，我添加了 SOIL zip 存档附带的所有 .h 和 .c 文件。

当我构建项目时，对于添加的每个 .h 和 .c 文件，我都会收到以下错误消息：

> 警告：跳过文件“/Users/saw/XcodeProjects/Assignment01 copy/Assignment01/image_DXT.c”（在框架和库构建阶段出现意外的文件类型“sourcecode.cc”）

和链接器错误：

> “_SOIL_load_OGL_texture”，引用自： init() in main.o Symbol(s) not found for architecture x86_64 Clang: error: linker command failed with exit code 1 (使用 -v 查看调用)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-15T15:50:29.743

.h 和 .c 文件不是库。将 .c 文件添加到编译阶段，只`#import`在需要的地方添加 .h 文件。

为了验证链接，我做了以下事情：

*   创建一个新的 Mac Cocoa 应用程序。
*   从 SOIL`src` 文件夹中添加 10 个文件：SOIL.c、image_DXT.h、stbi_DDS_aug.h、SOIL.h、image_helper.c、stb_image_aug.c、stbi_DDS_aug_c.h、image_DXT.c、image_helper.h 和 stb_image_aug.h。
*   告诉 Xcode 将它们复制到我的项目中。
*   `applicationDidFinishLaunching:`在我的应用程序委托的方法 中添加一行： `SOIL_load_OGL_texture( "img_test.png", SOIL_LOAD_AUTO, SOIL_CREATE_NEW_ID, 0 );`.
*   构建运行目标。

尽管有各种关于数据转换的编译器警告，但这些步骤会生成没有链接器错误的可执行文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T21:35:49.063

尝试在“其他链接器标志”中将 -framework 添加到您的框架名称中，例如：

```
-framework SOIL 
```

# html - 拆分html表

> ID：10639256
> 
> 赞同：0
> 
> 时间：2012-05-17T16:01:54.860
> 
> 标签：html, css

我有一个看起来像这样的 html 表：

```
<table>
  <thead>
    <tr>
      <th >title1</th>
      <th >title2</th>
      <th >title3</th>
      <th >title4</th>
      <th >title5</th>
      <th >title6</th>
      <th >title7</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>data1</td>
      ...
      <td>data7</td>
    </tr>
  </tbody> 
```

我遇到的问题是我只有大约 300 像素来放入所有这些信息，我想知道是否有某种方法可以告诉表格在达到 300 像素限制时进行拆分。这甚至可能吗？或者我应该回到使用 div 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T16:17:09.483

我不确定“拆分”是什么，但一个不错的选择是将表格包装在带有`overflow-x: auto`set 的容器中。这将使它可滚动。

**[现场示例](http://dabblet.com/gist/2719953)**

# asp.net-mvc - 企业级 SaaS - 相关框架和方法

> ID：10639257
> 
> 赞同：0
> 
> 时间：2012-05-17T16:02:02.107
> 
> 标签：asp.net-mvc, silverlight, saas

我正在开始一个单独的项目，以将现有产品从经典 ASP 的黑暗时代带入光明。在开始这段漫长的旅程之前，我最大的决定是确定我将为新设计实施哪些框架和方法。

现在，我正在寻找用于 Web 界面、实体框架或我自己编写的模型和 MSSQL 作为数据的 MVC 或 MVVM（据我所知，这只是 Silverlight？）。

不幸的是，我只是一个初出茅庐的程序员，我并不特别了解整个编程世界的趋势。我不知道什么只是昙花一现，什么技术实际上具有持久的潜力。我真的很想使用一些可能会在一段时间内保持相关性的东西。因此，我正在向这里的专业人士寻求对您有用的想法、需要注意的陷阱和需要关注的事情的意见。

我感谢任何和所有建议，请记住，使用 Microsoft 和 .Net 是先决条件。我真的很想在开始之前确保自己朝着正确的方向前进，因为这可能需要几个月的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T16:10:35.680

至于我个人建议的框架：

*   MVC 4 的 ASP.NET MVC 3，取决于是否允许 beta 软件的问题。
*   实体框架 4.3 或 5.0。5.0 快得多（具有自动编译功能），但它仍然是候选版本。
*   AutoMapper 在实体和视图模型之间进行映射。
*   Ninject 用于依赖注入（如果你想编写单元测试很有用）。
*   用于客户端验证之类的 JQuery（与 ASP.NET MVC 完美集成）。
*   可能有一些 CSS 框架，如 Bootstrap。
*   也许 RestSharp 这样你就可以轻松地执行请求。
*   如果它是一个云服务（大多数 SaaS 都是）并且你想在 Azure 上托管它（与 .NET 堆栈的出色集成），你将需要 Azure SDK。

至于软件架构：

*   使用服务层
*   使用存储库模式
*   使用 ViewModels 传递给您的视图而不是实体
*   设置依赖注入容器

这是我的建议，我个人认为这是构建企业应用程序的黄金组合（同时不会浪费太多时间来配置很多东西）。

陷阱：

*   我不知道是否真的需要单元测试。在设置架构时我一定要牢记这一点，但我个人选择稍后再做，因为我什至不知道我的产品是否会成功，所以我可以更好地把时间花在构建快速的最小可行产品上。
*   不要假设任何事情。您可以将数月的宝贵时间浪费在您认为每个人都会喜欢的酷功能上，但通常情况并非如此。只做绝对需要的最低限度，如果你的用户喜欢它，以后再改进它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T19:02:13.213

我将在@Leon 建议中添加更多内容，因为我认为这些建议从应用程序框架的角度来看非常棒，而我想从云方法论的角度写在这里。

当您选择了 SaaS 时，您肯定会完全迁移到云中，同时将您的应用程序和数据一起放到云中，这太棒了！！

任何云应用程序都有几个层次，要了解让我们看看云服务堆栈是什么样的。如果我们以 Windows Azure 为例：

1.  您有 Compute，您的应用程序在其中使用 Web 服务器（或不使用）运行。
2.  您有 Azure 表存储，可用于将键值对存储在一行中，然后非常快速地访问它们。
3.  您拥有 Azure Queue 允许将云应用程序的不同部分解耦，从而使云应用程序能够使用不同的技术轻松构建，并根据流量需求轻松扩展。
4.  您有访问控制服务通过 OpenID 或 AD 对用户进行身份验证
5.  您有服务总线来连接云中的其他服务或第三方的本地服务。
6.  您有 Azure Blob 存储可用作基于 Web 的平面文件服务器
7.  你有 Azure 缓存（用于在云中扩展的内存缓存构建）
8.  您拥有 SQL Azure 作为云数据库
9.  您可以探索和使用更多服务

因此，当您决定将应用程序从传统的 Web 托管迁移到云时，您确实必须考虑如何利用这些不同的云服务在需要时扩展您的应用程序并为您节省大量资金。

使用云中的应用程序，您可以尝试以下操作：

1.  让您的应用程序逻辑尽可能小
2.  将您的静态内容保留在计算之外
3.  随着应用程序横向扩展，使用基于云的缓存进行快速访问
4.  如果可能且适用，将数据从传统 RDBMS 数据库转移到 NoSQL 框架（键值对、文档等以节省资金和灵活性）
5.  利用其他可用服务来降低应用程序复杂性

如果您在脑海中考虑以上方面，您将创建一个真正的基于云的应用程序，它将快速并为您节省资金。

# gwt - 如何动态更新 GWT CellTable 列

> ID：10639258
> 
> 赞同：0
> 
> 时间：2012-05-17T16:02:07.923
> 
> 标签：gwt, gwt2

我只想更新 CellTable 列。

参见例如。

```
 Header1 |  Header2 | Header3 |
        -------------------------------
        Column11|  Column12| Column13| 
        Column21|  Column22| Column23| 
        Column31|  Column32| Column33| 

   final TextColumn<Student> nameColumn = new TextColumn<Student>() {

        @Override
        public String getValue(Student object) {
            return object.getName();
        }
    };
    cellTable.addColumn(nameColumn, "Name");

    final TextColumn<MyDTO> classColumn = new TextColumn<MyDTO>() {

        @Override
        public String getValue(Student object) {
            return object.getClassName();
        }
    };
    cellTable.addColumn(classColumn, "Age");

    final TextColumn<Student> subjectColumn = new TextColumn<Student>() {

        @Override
        public String getValue(Student object) {
            return object.getMark();
        }
    };

    cellTable.addColumn(subjectColumn, "Subject"); 
```

执行某些操作时，我只想更新 Column22、column23 等......就像 Column32、Column33......

谁能帮我？

提前致谢， Gnik

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T02:18:43.687

您可以为 CellTable 使用像 ListDataProvider 这样的数据提供程序。数据提供者保存表的数据并与表相关联。因此，当数据提供者中的数据发生任何变化时，当您调用 refresh() 方法时，这些变化将反映在表中。这是完整的代码（我已经修改了一些可用的代码[here](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiCellTable)）

```
public class GWTCellTable implements EntryPoint {
// A simple data type that represents a contact.
private static class Contact {
    private String address;
    private String name;

    public Contact(String name, String address) {
        this.name = name;
        this.address = address;
    }
}

// The list of data to display.
private static List<Contact> CONTACTS = Arrays.asList(new Contact("John", "123 Fourth Road"), new Contact("Mary", "222 Lancer Lane"), new Contact("Zander",
        "94 Road Street"));

public void onModuleLoad() {

    // Create a CellTable.
    CellTable<Contact> table = new CellTable<Contact>();

    // Create name column.
    TextColumn<Contact> nameColumn = new TextColumn<Contact>() {
        @Override
        public String getValue(Contact contact) {
            return contact.name;
        }
    };

    // Create address column.
    TextColumn<Contact> addressColumn = new TextColumn<Contact>() {
        @Override
        public String getValue(Contact contact) {
            return contact.address;
        }
    };

    // Add the columns.
    table.addColumn(nameColumn, "Name");
    table.addColumn(addressColumn, "Address");

    // Create a data provider.
    final ListDataProvider<Contact> dataProvider = new ListDataProvider<Contact>();

    // Connect the table to the data provider.
    dataProvider.addDataDisplay(table);

    // Add the data to the data provider, which automatically pushes it to
    // the
    // widget.
    List<Contact> list = dataProvider.getList();
    for (Contact contact : CONTACTS) {
        list.add(contact);
    }

    // Add it to the root panel.
    RootPanel.get().add(table);

    Button button = new Button("Update table");
    RootPanel.get().add(button);

  //Clicking on the update button, updates the first row of the table
    button.addClickHandler(new ClickHandler() {
        @Override
        public void onClick(ClickEvent event) {
            dataProvider.getList().get(0).name = "Ganesh";
            dataProvider.getList().get(0).address = "Gachibowli";
            dataProvider.refresh();
        }
    });
}
} 
```

# python - 如何将类似 time.gmtime() 的元组转换为 UNIX 时间？

> ID：10639263
> 
> 赞同：3
> 
> 时间：2012-05-17T16:02:42.220
> 
> 标签：python, time, localtime

`time.mktime`据说是time.localtime的倒数。

time.gmtime 的倒数在哪里？需要将 email.utils.parsedate 的结果转换为正常的 UNIX 时间。

唯一的近似是这样的hack：

```
time.mktime(email.utils.parsedate(smth)) - time.altzone 
```

怎么做才对？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T16:47:39.537

看着[`calendar.timegm(tuple)`](http://docs.python.org/library/calendar.html#calendar.timegm)

# .net - .NET 中的受控序列化

> ID：10639264
> 
> 赞同：1
> 
> 时间：2012-05-17T16:02:45.677
> 
> 标签：.net, serialization

由于某些原因，我需要控制 .NET 中的对象序列化过程。我必须控制属性应该被序列化。这个过程应该是动态的，因此，一个请求应该序列化一组属性，而另一个请求应该序列化。我很好奇是否可以通过已经存在的机制来实现，或者我必须设计一些自定义序列化程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T16:06:22.527

该`ISerializable`界面允许您完全做到这一点。`SerializationInfo`基本上，您可以控制在执行序列化时将哪些值添加到“属性包”( ) 中。请注意，您甚至不限于类型的属性，如下所示。

```
public class StackOverflow_10639264
{
    [Serializable]
    public class MyType : ISerializable
    {
        public string SerializedAM { get; set; }
        public string SerializedPM { get; set; }
        public void GetObjectData(SerializationInfo info, StreamingContext context)
        {
            DateTime now = DateTime.Now;
            if (now.Hour < 12)
            {
                info.AddValue("MyValue", this.SerializedAM);
            }
            else
            {
                info.AddValue("MyValue", this.SerializedPM);
                info.AddValue("NotAProperty", "Hello");
            }
        }
    }
    public static void Test()
    {
        MemoryStream ms = new MemoryStream();
        DataContractSerializer dcs = new DataContractSerializer(typeof(MyType));
        dcs.WriteObject(ms, new MyType { SerializedAM = "AM", SerializedPM = "PM" });
        Console.WriteLine(Encoding.UTF8.GetString(ms.ToArray()));
    }
} 
```

# firefox - @font-face 仅在 Firefox 中不起作用

> ID：10639269
> 
> 赞同：0
> 
> 时间：2012-05-17T16:03:01.203
> 
> 标签：firefox, css

使用这个@font-face css。适用于 Chrome、Safari 和 IE，但不适用于 Firefox。所有需要的文件都上传到服务器。

CSS：

> ```
> @font-face {
>         font-family: 'Calgary';
>       src: url('../fonts/calgary.eot');
>       src: url('../fonts/calgary.eot?#iefix') format('embedded-opentype'),
>                  url('../fonts/calgary.woff') format('woff'),
>                  url('../fonts/calgary.ttf') format('truetype');
>       font-weight: normal;
>       font-style: normal;
> }
> 
> #header-text-webform {
>   position: relative;
>   top: 59px;
>   left: 20px;
>   font-family: 'Calgary', 'Helvetica', 'Arial', sans-serif !important;
>   color: white;
>   font-size: 26px;
>   font-weight: normal;
>   text-transform: uppercase;
>   z-index: 1;
> } 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T16:07:18.913

您有一个重复的 src 声明。删除这一行：

```
src: url('../fonts/calgary.eot'); 
```

看看这是否有帮助。如果 Firefox 只读取这个，首先是`src`定义，它将尝试加载它不支持的 EOT 字体......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T16:25:43.860

我总是使用以下结构并且在Firefox（或其他任何东西）中没有问题

```
@font-face {
    font-family: 'Calgary';
    src: url('/fonts/calgary.eot');
    src: url('/fonts/calgary.eot?#iefix') format('embedded-opentype'),
         url('/fonts/calgary.woff') format('woff'),
         url('/fonts/calgary.ttf') format('truetype'),
         url('/fonts/calgary.svg#calgary') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

# c# - 在 ZedGraph 上默认显示点值

> ID：10639271
> 
> 赞同：5
> 
> 时间：2012-05-17T16:03:03.730
> 
> 标签：c#, .net-3.5, zedgraph

我正在构建并在 WinForm 中显示 ZedGraph。当我右键单击图表时，有一个“显示点值”选项。启用后，将鼠标悬停在一个点上会给出该点的 X/Y 值。

1.  有没有办法默认启用此功能。
2.  我的 X 轴是 XDate。我知道如何在 X 轴上设置比例格式，但如何在工具提示中设置格式？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-17T23:58:42.843

初始化表单后，请执行以下操作：

```
var zgc = msGraphControl1.zedGraphControl1;

zgc.IsShowPointValues = true;
zgc.PointValueFormat = "0.000";
zgc.PointDateFormat = "d"; 
```

那应该这样做。

# wpf - 数据触发器错误

> ID：10639274
> 
> 赞同：0
> 
> 时间：2012-05-17T16:03:13.370
> 
> 标签：wpf, xaml, data-binding, datatrigger, multidatatrigger

[根据这篇文章](https://stackoverflow.com/questions/10636061/datatrigger-usage)，我正在使用一些多触发器。绑定和错误如下。

我正在使用自定义标记扩展来显示资源图像，所以它可能是可疑的，但我不这么认为，因为我以前在样式中使用过它。

错误消息说我为该类型应用了错误的属性，但我还不明白为什么。

干杯，
贝里尔

# 触发器

```
<Style x:Key="AvatarPathImageStyle" TargetType="{x:Type Image}">
    <Setter Property="Source" Value="{Binding AvatarPath}"/>
    <Setter Property="Height" Value="96"/>
    <Setter Property="Width" Value="96"/>
    <Setter Property="Stretch" Value="UniformToFill"/>
    <Style.Triggers>

        <MultiDataTrigger>
            <MultiDataTrigger.Conditions>
                <Condition Binding="{Binding AvatarPath}" Value="{x:Null}" />
                <Condition Binding="{Binding Gender}" Value="{x:Static domain:Gender.Female}"/>
            </MultiDataTrigger.Conditions>
            <Setter Property="Source" Value="{resx:Resx ResxName=Smack.Parties.Presentation.Resources.PersonDetailView, Key=Img_Female}"/>
        </MultiDataTrigger>

        <MultiDataTrigger>
            <MultiDataTrigger.Conditions>
                <Condition Binding="{Binding AvatarPath}" Value="{x:Null}" />
                <Condition Binding="{Binding Gender}" Value="{x:Static domain:Gender.Male}"/>
            </MultiDataTrigger.Conditions>
            <Setter Property="Source" Value="{resx:Resx ResxName=Smack.Parties.Presentation.Resources.PersonDetailView, Key=Img_Male}"/>
        </MultiDataTrigger>
        </MultiDataTrigger>

    </Style.Triggers>
</Style> 
```

# 捆绑

```
<Image Grid.Column="1" Grid.Row="4" 
       HorizontalAlignment="Center" Margin="10, 0" Style="{StaticResource AvatarPathImageStyle}"
      /> 
```

# 错误

```
System.Windows.Markup.XamlParseException occurred
...  InnerException: System.ArgumentException
       Message='System.Windows.Controls.Image' is not a valid value for the 'System.Windows.Controls.Image.Source' property on a Setter.
 ... 
```

# 更新

静态访问图像也会得到 Invalid Type 错误：

```
<Setter Property="Source" Value="{x:Static imgResources:PersonDetailView.Img_Female}"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T07:08:09.787

评论转换为答案：

错误的原因是存储在 resx 文件中的图像类型为`System.Windows.Drawing.Image`，与 WPF 不直接兼容。您可以编写转换器，但除非您有充分的理由使用资源字典，否则我只会嵌入图像并通过相对于 XAML 文件的 URL 引用它们

# java - 两个片段之间共享一个连接

> ID：10639276
> 
> 赞同：1
> 
> 时间：2012-05-17T16:03:18.720
> 
> 标签：java, android, networking, fragment

我开始编写我的第一个成熟的 Android 应用程序，但我卡住了......

我想轻松实现平板电脑视图，因为我使用了 android 兼容性库 v4 和 Fragments API。一切都很酷，直到我创建了网络连接并在两个片段之间共享它。你知道，我有两种观点...

假设我们有一个简单的聊天应用程序，我们需要有用户列表和消息列表。我需要根据从网络收到的消息来实现这两个片段。因此，如果有人进入聊天，我需要更新用户列表片段，如果有人发送新消息，我需要将其发送到消息片段

谁能告诉我该怎么做？任何想法如何通过一个连接更新两个片段。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T16:26:06.573

您应该有一个单独的 CommunicationManager 类来处理所有发送和接收 - 片段只显示您需要的信息 - 所有通信逻辑都在这一类中。然后，您的应用程序逻辑将不再有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-09T07:02:25.280

据我了解，您想使用一个网络连接（一般来说），接收响应并再次将其显示在两个不同的片段中。您可以遵循一些模式来做到这一点，但这里有一些解决您问题的建议。

*   *尝试使用您将拥有的标准 Android 模式：*
    1.  **网络**类。（将其保留在后台或执行线程中）
    2.  Repository 的**类**。（它将用于从 Networking 类中获取数据）。当您在 Repository.class 中实例化 Networking.class 时，请使用**单例模式**，以便在整个应用程序中仅使用一个 Networking.class 实例，这将使您可以使用一个 Networking.class 来获取所需的所有数据，而无需实例化 Networking .class 再次。

正如@Zakaria 建议的那样，使用Android View 模型模式

3.  One **ViewModel**类足以使用其中的 Repository.class 从 Networking 类接收数据并在您的片段中共享数据（观察数据）并向用户显示您所需的数据。

就是这样，它会解决你的问题。

# c# - 后台工作人员“导致”冻结我的表格

> ID：10639279
> 
> 赞同：1
> 
> 时间：2012-05-17T16:03:44.983
> 
> 标签：c#, .net, winforms, backgroundworker

在我的应用程序中，我想在后台创建数千个文件，但是当我执行此操作时，它总是冻结我的表单（创建所有文件后，我可以再次使用我的表单）。如何在不挂起的情况下正常运行？

```
private void button5_Click(object sender, EventArgs e)
    {
        BackgroundWorker bw = new BackgroundWorker();

        bw.WorkerReportsProgress = true;

        bw.DoWork += new DoWorkEventHandler(
        delegate(object o, DoWorkEventArgs args)
        {
            BackgroundWorker b = o as BackgroundWorker;

            this.Invoke(new MethodInvoker(delegate
            {
                getValues();//load some text fields into strings

                while (counter < counted)
                {
                    text = richTextBox1.Text;
                    text = text.Replace("number", finalNumber);

                    //create copies
                    if (checkBox1.Checked == true)
                    {
                        while (createdCopies < copies)
                        {
                            createdCopies++;

                            File.WriteAllText(fileName, text);
                            overalCounter++;
                            b.ReportProgress(overalCounter);
                        }
                        counter++;
                        createdCopies = 0;
                    }
                    //dont create copies
                    else
                    {
                        File.WriteAllText(fileName, text);
                        counter++;
                        overalCounter++;
                        b.ReportProgress(overalCounter);
                    }
                    //info about number of files created
                    label6.Text = "created " + overalCounter.ToString() + " files";

                }
                label1.Text = "success";
            }));
    });

    if (bw.IsBusy != true)
    {
        bw.RunWorkerAsync();
    }

    bw.ProgressChanged += new ProgressChangedEventHandler(
    delegate(object o, ProgressChangedEventArgs args)
    {
        this.Text = string.Format("{0}% Completed", args.ProgressPercentage);
    });
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T16:09:25.483

`this.Invoke`在 UI 线程上运行代码，阻止任何 UI 更新。
由于您在`Invoke`方法中运行所有内容，因此所有内容都将在 UI 线程上运行。

`Invoke`在您修改 UI 控件的每个位置周围创建一个单独的位置，并将繁重的工作留在`Invoke`s.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T16:09:05.117

在你的第一个代表中做实际的工作。第二个委托`this.Invoke(...)`在表单的线程（=主线程）上执行，因此会阻止您的 UI。

# jpa-2.0 - 使用 OpenJPA 删除和更新多对多关系

> ID：10639281
> 
> 赞同：0
> 
> 时间：2012-05-17T16:03:46.910
> 
> 标签：jpa-2.0, openjpa

我有几个将被删除的实体。这些实体将有几个多对多链接。更新多对多链接时，我想我将删除该实体的联接表中的原始链接，然后将链接替换为新链接。但我真的很困惑这将如何运作。如何更新多对多关系？删除也是如此。如果您设置了删除的级联，那么您实际上将删除该实体以及与其链接的实体（集合，我相信的多个实体）。那将如何运作？

```
@Entity
@Table(name="QUICK_LAUNCH")
public class QuickLaunch implements Serializable {
...
@ManyToMany(fetch=FetchType.EAGER)
        @JoinTable(name="QUICK_LAUNCH_PROVIDER", 
        joinColumns=@JoinColumn(name="QUICK_LAUNCH_ID"),
        inverseJoinColumns=@JoinColumn(name="RESOURCE_ID"))
private List<Provider> providerList;
} 
```

当时的想法是我会删除任何指向提供商的链接，然后添加新链接。我可以以编程方式做到这一点，只需删除链接表中的链接，但我觉得这应该由 ORM 处理（这是一种不合理的感觉吗？）。
是否有人对删除多对多关系有任何一般的智慧之言，也许我可以使用实际实体删除和更新关系......

就像说我有一个带有提供者列表的 quickLaunch ...我将该提供者列表设置为 null （有效地从我希望的那个实体中删除该提供者列表）然后我将该提供者列表设置为一个新的提供者列表...我当然必须以编程方式设置该列表。这听起来是可行的还是只是愚蠢的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T16:42:58.343

这样做的方法是：

*   从列表中删除提供者将删除 QuickLaunch 和提供者之间的关联（从而从连接表中删除相应的行）；
*   将提供者添加到列表中将创建 QuickLaunch 和提供者之间的关联（并因此在连接表中插入一行）。

# c++ - 我可以为普通优先级进程设置单个线程的优先级高于 15 吗？

> ID：10639285
> 
> 赞同：5
> 
> 时间：2012-05-17T16:03:55.677
> 
> 标签：c++, windows, multithreading, timing

我有一个在 Windows 7 上运行的数据采集应用程序，使用 C++ 中的 VC2010。一个线程是一个心跳，它每 0.2 秒发送一次更改以保持某些硬件的活动，该硬件的超时时间约为 0.9 秒。通常，心跳调用需要 10-20 毫秒，线程其余时间都在休眠。

然而，偶尔会有 1-2 秒的延迟，并且硬件会立即关闭。心跳线程在 THREAD_PRIORITY_TIME_CRITICAL 运行，对于正常的优先级进程，它是 15。我的其他线程以正常优先级运行，尽管我使用 DLL 来控制其他一些硬件，并且使用 Process Explorer 注意到它启动了几个在 15 级运行的线程。

我无法找到减速的原因，但我的应用程序中的其他问题在发生这种情况时会看到同样的延迟。我对心跳代码做了一些优化，虽然很简单，但偶尔还是会出现故障。现在我想知道是否可以在不为整个进程指定 REALTIME_PRIORITY_CLASS 的情况下将此线程的优先级提高到 15 以上。如果没有，我应该注意使用 REALTIME_PRIORITY_CLASS 有什么缺点吗？（除了这个心跳线程，应用程序的其余部分没有实时计时需求。）

（或者是否有人对如何追踪这些减速有任何想法......不确定源是否可能在我的应用程序中或系统上的其他地方）。

更新：所以我实际上并没有尝试将 31 传递给我的 AfxBeginThread 调用，结果它忽略了该值并将线程设置为正常优先级，而不是我使用 THREAD_PRIORITY_TIME_CRITICAL 获得的 15。

更新：原来运行磁盘碎片整理程序是导致大量线程延迟的好方法。即使在 REALTIME_PRIORITY_CLASS 上运行进程并且在 THREAD_PRIORITY_TIME_CRITICAL（级别 31）上运行心跳线程似乎也无济于事。接下来要尝试的是调用 AvSetMmThreadCharacteristics("Pro Audio")

更新：将心跳线程调度为“Pro Audio”确实可以将线程的优先级提高到 15 以上（Base=1，Dynamic=24），但在碎片整理运行时似乎没有任何真正的区别。我已经能够将许多减速与磁盘碎片整理程序相关联，因此关闭了每周扫描。仍然无法解释一些延迟，所以我们将增加到 5-10 秒的看门狗超时。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T16:11:14.403

即使可以，提高优先级也无济于事。最高优先级的可运行线程始终获取处理器。

很可能在中断被禁用时发生了一些扩展的中断处理。中断有效地以比任何线程更高的优先级工作。

它可能是视频、网络、磁盘、串行、USB 等。需要一些洞察力来选择性地禁用或使用备用驱动程序来查看问题系统犹豫是否受到影响。一旦你发现了这一点，然后找出一种方法来防止它可能会从微不足道到不可能，这取决于它是什么。

没有更多关于系统的知识，很难说。您是否尝试过在*另一*台 PC 上运行它？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T15:24:27.200

正式地，您不能在没有 REALTIME_PRIORITY_CLASS 的进程中使用 REALTIME 线程。

非正式地你可以玩无证的`NtSetInformationThread` 看到： [http ://undocumented.ntinternals.net/UserMode/Undocumented%20Functions/NT%20Objects/Thread/NtSetInformationThread.html](http://undocumented.ntinternals.net/UserMode/Undocumented%20Functions/NT%20Objects/Thread/NtSetInformationThread.html)

但是由于我没有尝试过，所以我没有更多关于此的信息。

另一方面，正如之前所说，您永远无法确定操作系统不会在您的线程量子到期时花费时间。某些写得不好的驱动程序通常是导致这种延迟的原因。

否则有一个软件可以告诉你是否有行为不端的内核部分： [http ://www.thesycon.de/deu/latency_check.shtml](http://www.thesycon.de/deu/latency_check.shtml)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T16:18:32.737

我会尝试使用 CreateWaitableTimer() 和 SetWaitableTimer() 看看它们是否会遇到相同的抢占问题。

# xcode - 为什么 Xcode 不保存我的文件？

> ID：10639286
> 
> 赞同：0
> 
> 时间：2012-05-17T16:03:55.887
> 
> 标签：xcode, file, permissions, permission-denied, read-write

我已经在 XCode 中开发了一段时间的应用程序，今天向应用程序添加了一个新文件。当我去保存它时，XCode 出现了一个警告，说我没有权限保存文件并检查文件的信息部分。我做到了，但是文件说它是读写的，所以应该没有理由发生这种情况。然后我尝试删除它并再次创建它，但它又说了同样的话。然后我删除它并开始处理 mainViewController 文件，同样的事情又出现了！昨天我没有对计算机或文件做任何事情，只是我在其中添加了一些似乎运行良好的代码。我能做些什么来解决这个问题？

PS：我创建的所有新文件都会发生这种情况 - 不仅仅是 .m、.h 和 .xib 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T16:07:45.867

检查您尝试保存文件的目录的权限。另外，检查项目包中文件的权限。

# drupal - 覆盖 Drupal 节点模板

> ID：10639294
> 
> 赞同：0
> 
> 时间：2012-05-17T16:04:20.110
> 
> 标签：drupal, drupal-theming

我想更改我的 Drupal 7 站点上某些节点的布局 - 即让字段显示在整个页面上。在阅读主题时，他们似乎在说为了覆盖 node.tpl.php，我需要拥有自己的它们？

有没有办法使用现有的它们（例如 Bartik），但只是通过使用自定义**节点--mytype.tpl.php**文件简单地覆盖节点布局？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T16:20:42.703

在 Drupal 中，您可以[创建一个](http://drupal.org/node/225125)扩展另一个主题的子主题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T19:38:13.060

是的，您可以复制现有的 node.tpl.php 并将其重命名为 node--page.tpl.php。此模板在清除缓存（配置->性能）后将应用于页面类型的 te 节点。您可以对带有 node--artcle.tpl.php 的文章节点类型或任何其他节点类型执行相同的操作。在将核心手动更新到新版本期间，这些文件将不会被替换。但最好在“sites/all/themes/”文件夹中创建自己的主题（如果需要，可能是 Batric 主题的子主题）。

# php - 创建客户端数组

> ID：10639297
> 
> 赞同：0
> 
> 时间：2012-05-17T16:04:27.643
> 
> 标签：php, javascript, arrays, codeigniter, multidimensional-array

对于我的选择框切换，我需要通过使用 php 在加载时生成一个 js 数组来为选择选项值预先构建一个 javascript 数组。到目前为止，我通过创建一个对象并将其添加到一个数组中来做到这一点，但现在我需要一个对象的属性是一个年份数组。我很接近（如果我 document.write 对象的 clientForm 属性将返回一个 csv 列表），但我不认为它是一个数组，因为我无法访问 length 属性并且之前的 document.write 不输出大批。谁能发现我做错了什么或建议另一种方法？

这是输出 Javascript 数组的 php（我在 CodeIgniter 中构建了系统）：

```
echo '<script type="text/javascript">';
            $array = 'var companies = new Array();';
$i = 0;foreach($clientList as $client) :
                $array .= 'arrayItem'.$i.' = {clientNo:"'.$client->client_id.'", clientCompany:"'.$client->client_company_name.'", clientRef:"'.$client->client_ref_no.'", clientForms: Array(';
                if($client->client_forms != "")
                {

                    $a = 0; foreach($client->client_forms as $form) :
                        $array .= $form.", ";
                    ++$a; endforeach;

                }
                $array = substr($array, 0, -2); 
                $array .= ')};';
                $array .= 'companies['.$i.'] = arrayItem'.$i.'; ';
++$i; endforeach;
            echo $array;
            echo '</script>'; 
```

这是当前的输出：

```
<script type="text/javascript">
    var companies = new Array();
    arrayItem0 = {clientNo:"1", clientCompany:"Test1", clientRef:"UG123HS", clientForms: Array(1, 15)};
    companies[0] = arrayItem0;

    arrayItem1 = {clientNo:"2", clientCompany:"Test2", clientRef:"UF321HS", clientForms: Array(17)};
    companies[1] = arrayItem1;
</script> 
```

如果您想看一下，这里是 jsfiddle 上的完整输出代码[（](http://jsfiddle.net/phily245/TDRxQ/) jsfiddle 似乎无法使我的 onclicks 工作，但它们在实际网页上可以）。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T16:12:45.990

要创建数组，最好使用以下语法：`clientForms: [1,15]`

否则不要忘记添加`new`：`clientForms: new Array(1,15)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T16:25:31.350

您的代码看起来并不太远，因为 jsFiddle 运行得不太好，所以很难说。然而，我确实注意到一件事。

你`list.options[i+1]=new Option(companies[i].clientCompany, companies[i].clientRef, false, false); //Add the first option in`应该有的地方`list.options[cnt+1]=new Option(companies[i].clientCompany, companies[i].clientRef, false, false); //Add the first option in`

请注意，我将第一个更改`i`为`cnt`. `i`是遍历数组的计数器，`cnt`实际上是您的选项计数器。如果您的实际页面没有为每个数组项生成结果，那么您很可能会留下空白选项。

编辑：

这是在函数replaceCompanySelect 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T09:47:00.197

感谢@mashington 和@ParthThakkar 的回答，我不知道PHP 中的json_encode() 和javascript 中的JSON.parse() 是如何协同工作的。这是我的新 php 代码：

```
echo '<script type="text/javascript">';
    echo "var companies = JSON.parse('".json_encode($clientList)."');";
echo '</script>'; 
```

# c# - 如何在 System.IO.File.Copy 期间避免 Filewatcher 锁定文件

> ID：10639298
> 
> 赞同：2
> 
> 时间：2012-05-17T16:04:28.120
> 
> 标签：c#, asp.net, file, .net

我开发了一个文件监视程序来监视一个文件夹，如果文件有任何更改，它会将文件复制到另一个文件夹。

但是我发现在写入原始文件时会出现错误消息（例如文件正在被另一个应用程序处理......）似乎在运行[System.IO.File.Copy]复制到另一个文件夹时文件被锁定。

有没有什么办法可以避免原文件被filewatcher/System.IO.File.Copy锁定？谢谢。

以下是我的代码：

```
 private void fileWatcher_Changed(object sender, System.IO.FileSystemEventArgs e)
    {
        DateTime lastWriteTime = File.GetLastWriteTime(e.FullPath); 

        if (lastWriteTime != lastRead)
        {

            txtLog.Text += e.ChangeType + ": " + e.FullPath + "\r\n";
            txtLog.Focus();
            txtLog.Select(txtLog.TextLength, 0);
            txtLog.ScrollToCaret();

            try
            {
                string myPath = e.FullPath;
                string myFile = e.Name;

                System.IO.FileInfo myFileInfo = new System.IO.FileInfo(myFile);

                string myAttibs = myFileInfo.Attributes.ToString();

                System.IO.File.Copy(myPath, @"D:\\Folder\\Output\\" + myFile, true);

                lastRead = lastWriteTime; 

            }
            catch (System.IO.IOException ex)
            {
                System.IO.IOException myex = ex;
            }
            catch (System.Exception ex)
            {
                System.Exception myex = ex;
            }

        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T18:04:28.450

我遇到了同样的问题。我不喜欢我的解决方案，因为它感觉很老套。但它有效：

```
FileSystemWatcher fsWatcher = new FileSystemWatcher();
fsWatcher.Created += new FileSystemEventHandler( fsWatcher_Created );

private void fsWatcher_Created( object sender, FileSystemEventArgs e )
{
    RaiseFileFoundEvent( e.FullPath );
    while ( !TestOpen( e.FullPath ) ) ;
    RaiseFileCopyDoneEvent( e.FullPath );
}

private bool TestOpen( string filename )
{
    try
    {
        FileStream fs = new FileStream( filename, FileMode.Open, 
            FileAccess.Write, FileShare.None );
        fs.Close();
        return true;
    }
    catch ( Exception )
    {
        return false;
    }
}

private void RaiseFileFoundEvent( string fullPath )
{
    // a file is found, but the copy is not guaranteed to be finished yet.
}

private void RaiseFileCopyDoneEvent( string fullPath )
{
    // the file is found, and we know the copy is done.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T17:57:46.973

没有解决这个问题的好方法。如果您正在将文件复制到新位置，而另一个应用程序想要写入它，程序应该如何运行？

如果您愿意复制损坏的文件（在您复制时被写入），您必须编写自己的 Copy 方法，该方法使用`FileShare.ReadWrite`.

# android - 从生成器线程通知消费者线程

> ID：10639300
> 
> 赞同：0
> 
> 时间：2012-05-17T16:04:33.480
> 
> 标签：android, multithreading

我在 Android 中有一个线程，它只从相机生成帧。我有 5 个其他线程读取当前帧并处理它。

在这些线程中使用连续循环意味着它们最终会多次处理同一帧。

理想情况下，我希望这些线程在生成帧后使用它。某种事件通知，通知所有线程新框架已准备好。

我该怎么做呢？我不想使用对象锁，因为其他线程只是从主线程读取帧。他们不修改它。

谢谢！

# .net - 在 Silverlight 中实现平铺控件

> ID：10639301
> 
> 赞同：0
> 
> 时间：2012-05-17T16:04:36.963
> 
> 标签：.net, wpf, windows, silverlight, silverlight-5.0

我想在 silverlight 5 中使用磁贴控件。我搜索了它，发现下面的链接。

[http://demos.telerik.com/silverlight/#TileView/FirstLook](http://demos.telerik.com/silverlight/#TileView/FirstLook)
[http://www.youtube.com/watch?v=EOxOTrZ_nPc](http://www.youtube.com/watch?v=EOxOTrZ_nPc)

但它们看起来像商业产品。我不想买它们。为了实现这一点，我想使用`Visual Studio`提供的基本控件。那么，我必须先进行哪些控制才能进行挖掘？

是否有关于此的开源控制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T21:30:29.413

查看：[http](http://blacklight.codeplex.com/) ://blacklight.codeplex.com/获取代码，[http](http://mightymeaty.members.winisp.net/blacklight.silverlight/) ://mightyeaty.members.winisp.net/blacklight.silverlight/ 获取演示。拖放面板控件看起来很酷。

# javascript - 如果 AJAX 响应为空，则 jQuery 中断

> ID：10639302
> 
> 赞同：2
> 
> 时间：2012-05-17T16:04:41.707
> 
> 标签：javascript, jquery, ajax

我正在尝试`break`/`return false`如果`$.post()`响应为空，则这样做：

```
....

$('#order_list li > div').remove(); // is to remove `no_data` or `search_box` when clicking on the next `li`

$.post('do.php', { OP: "news_search", category: cat_id },
  function(data_response){
    console.log(data_response); //outputs null if nothing retrieved, or data if otherwise 
    if(data_response==null) //stop code if the response is null
    {
      alert('if works');
      $(this).append(no_data).show('slow');
      return false; // doesn't do the trick
    }
  }, "json");

//if not null, continue with this

if( ! $('.search_box').exists())
{
  $(this).append(search_box).show('slow');
}

.... 
```

但正如您所读到的，我的代码并不能解决问题。有任何想法吗？

## 更新

`if(data_response==null)`作品，它`return false`没有做它的工作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T16:07:36.430

**AJAX 中的 A 表示异步。**

当您到达要检查的位置时，它已经执行了。

首先你运行这段代码：

```
$.post('do.php', { OP: "news_search", category: cat_id }, callback, "json"); 
```

这会向服务器发出 XmlHttpRequest。我故意写了 only `callback`，因为函数只是作为参数传递。**它只会在服务器响应时运行。**到那时，您的代码的其他部分已经运行。

1.  `$.post()`- 调用服务器
2.  你的其余代码
3.  当服务器响应时，您的回调

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T16:10:10.217

```
$.post('do.php', { OP: "news_search", category: cat_id },
  function(data_response){
    console.log(data_response);  
    if(data_response)
    {
      $(this).append(no_data).show('slow');
       // return false; NOT NEEDED
    } else {
      // below condition should remain here, not outside of Ajax
      if( ! $('.search_box').exists()){
        $(this).append(search_box).show('slow');
      }
    }
  }, "json"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T16:28:34.937

人们通常会验证执行以下操作：

```
if (foo == null) {
   foo = "Joe";
} 
```

当他们真正的意思是

```
if (!foo) {
   foo = "Joe";
} 
```

这是因为 null 是一个对象，而 == 确实类型强制。

本文中的更多信息：[JavaScript undefined vs. null](http://saladwithsteve.com/2008/02/javascript-undefined-vs-null.html)

# android - 从 SQLite 填充 Android Spinner 但有两个字段？

> ID：10639306
> 
> 赞同：1
> 
> 时间：2012-05-17T16:04:58.460
> 
> 标签：android, sqlite, android-spinner

在对这段代码进行了很多混乱之后，我终于设法从一个 sqlite db 填充了一个微调器，但是它只使用一个字段，我想要同一个微调器项目上的名字和姓氏？

代码如下：

```
 private void fillSpinner() {
    Cursor c = myDbHelper.FetchDrivers();
    startManagingCursor(c);

    // create an array to specify which fields we want to display
    String[] from = new String[]{"FirstName"};
    // create an array of the display item we want to bind our data to
    int[] to = new int[]{android.R.id.text1};
    // create simple cursor adapter
    SimpleCursorAdapter adapter =
      new SimpleCursorAdapter(this, android.R.layout.simple_spinner_item, c, from, to );
    adapter.setDropDownViewResource( android.R.layout.simple_spinner_dropdown_item );
    // get reference to our spinner
    Spinner s = (Spinner) findViewById( R.id.spr_Driver1);
    s.setAdapter(adapter);
} 
```

现在它显示名字，我尝试添加“名字”，“姓氏”，但它没有做任何不同的事情，我理想情况下希望它在每个微调器项目上完整显示名称。这甚至可能吗？

任何帮助都会很棒！

谢谢，克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T16:13:41.363

为此，您需要更改`android.R.layout.simple_spinner_item`and `android.R.layout.simple_spinner_dropdown_item`，因为这些布局项只能在下拉列表和微调器上显示一项。出于您的目的，最好的方法是创建自己的包含两个项目的布局。 [这](http://app-solut.com/blog/2011/03/using-custom-layouts-for-spinner-or-listview-entries-in-android/)是有关如何执行此操作的链接。

# ruby-on-rails - Rails 在我的模型视图中显示一个空值和一个 id

> ID：10639307
> 
> 赞同：2
> 
> 时间：2012-05-17T16:05:00.360
> 
> 标签：ruby-on-rails, activerecord, erb

![列表显示](../Images/0414ec053b45f0c99b72a4c2bc493025.png)

我有一个 Rails 视图，在这种情况下输出模型值的内容议程.主题

检查数据库，底部两项不在数据库中，我知道 :id 和空白是，但我的代码中的内容可能导致它像这样显示

用户/index.html.erb

```
<div class="row">
    <div class="span8">
        <%= render 'agendas/agenda_form' %>
        <% if @user.agendas.any? %>
            <h2>Agendas (<%= @user.agendas.count %>)</h2>
            <ol class="agendas">
                <%= render @agendas %>
            </ol>
        <% end %>
    </div>
</div>

the _agenda.html.erb partial
<li>
  <span class="content"><%= agenda.subject %></span>
  <%= link_to 'delete', agenda, method: :delete,
                                confirm: "You Sure?",
                                title: agenda.subject %>
</li> 
```

和用户控制器

```
class UsersController < ApplicationController
  before_filter :authenticate_user!

  def index
    @user = current_user
    @agenda = current_user.agendas.build if signed_in?
    @agendas = current_user.agendas
  end
end 
```

.... user_id: 1, created_at: "2012-05-17 15:52:22", updated_at: "2012-05-17 15:52:22">, #] 8

[`#<Agenda id: 49, subject: "Ut qui vel eos quia vitae.", due_date: nil, completed: nil, user_id: 1, created_at: "2012-05-17 15:52:22", updated_at: "2012-05-17 15:52:22">, #<Agenda id: 43, subject: "Enim dolorem.", due_date: nil, completed: nil, user_id: 1, created_at: "2012-05-17 15:52:22", updated_at: "2012-05-17 15:52:22">, #<Agenda id: 37, subject: "Rerum architecto est nihil totam.", due_date: nil, completed: nil, user_id: 1, created_at: "2012-05-17 15:52:22", updated_at: "2012-05-17 15:52:22">, #<Agenda id: 31, subject: "Non.", due_date: nil, completed: nil, user_id: 1, created_at: "2012-05-17 15:52:22", updated_at: "2012-05-17 15:52:22">, #<Agenda id: 25, subject: "Libero enim et explicabo.", due_date: nil, completed: nil, user_id: 1, created_at: "2012-05-17 15:52:22", updated_at: "2012-05-17 15:52:22">, #<Agenda id: 19, subject: "Et molestiae et quia saepe quia.", due_date: nil, completed: nil, user_id: 1, created_at: "2012-05-17 15:52:22", updated_at: "2012-05-17 15:52:22">, #<Agenda id: 7, subject: "Eum consectetur iste.", due_date: nil, completed: nil, user_id: 1, created_at: "2012-05-17 15:52:22", updated_at: "2012-05-17 15:52:22">, #<Agenda id: nil, subject: nil, due_date: nil, completed: nil, user_id: 1, created_at: nil, updated_at: nil>] 8`

我排除了前几条记录，它们看起来很正常，但最后两条记录很奇怪来自@agendas.inspect 和@agendas.length 的输出

我正在使用 faker 为应用程序创建示例数据，可能是罪魁祸首？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T17:47:36.223

谢谢 -

鉴于您的测试数据：

```
[#<Agenda id: 49, subject: "Ut qui vel eos quia vitae.", due_date: nil, completed: nil, user_id: 1, created_at: "2012-05-17 15:52:22", updated_at: "2012-05-17 15:52:22">, 
#<Agenda id: 43, subject: "Enim dolorem.", due_date: nil, completed: nil, user_id: 1, created_at: "2012-05-17 15:52:22", updated_at: "2012-05-17 15:52:22">, 
#<Agenda id: 37, subject: "Rerum architecto est nihil totam.", due_date: nil, completed: nil, user_id: 1, created_at: "2012-05-17 15:52:22", updated_at: "2012-05-17 15:52:22">, 
#<Agenda id: 31, subject: "Non.", due_date: nil, completed: nil, user_id: 1, created_at: "2012-05-17 15:52:22", updated_at: "2012-05-17 15:52:22">, 
#<Agenda id: 25, subject: "Libero enim et explicabo.", due_date: nil, completed: nil, user_id: 1, created_at: "2012-05-17 15:52:22", updated_at: "2012-05-17 15:52:22">, 
#<Agenda id: 19, subject: "Et molestiae et quia saepe quia.", due_date: nil, completed: nil, user_id: 1, created_at: "2012-05-17 15:52:22", updated_at: "2012-05-17 15:52:22">, 
#<Agenda id: 7, subject: "Eum consectetur iste.", due_date: nil, completed: nil, user_id: 1, created_at: "2012-05-17 15:52:22", updated_at: "2012-05-17 15:52:22">, 
#<Agenda id: nil, subject: nil, due_date: nil, completed: nil, user_id: 1, created_at: nil, updated_at: nil>] 
```

看起来罪魁祸首就在数据中。我建议确认您实际上正在生成您认为的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T17:56:04.713

你在打电话

```
current_user.agendas.build current_user.agendas.build 
```

每当登录用户查看此页面时，它将在议程列表中附加一个空白的未保存议程。从你的问题中不清楚你做什么，`@agenda`但你最好将它设置为`Agenda.new`

# sunspot - Sunspot_solr 仅在生产环境中对一种类型的宝石索引不正确

> ID：10639309
> 
> 赞同：1
> 
> 时间：2012-05-17T16:05:11.060
> 
> 标签：sunspot, sunspot-rails, sunspot-solr

我最近实现了一个由 solr 驱动的自动完成/自动提示功能。我的 solr 实现是使用 rails sunspot gems。自动完成搜索根本不通过 rails，而是通过 apache 反向代理直接到 solr 服务器。因此，在这种情况下，太阳黑子的作用是在创建或更新（或删除）记录时重新索引。

我的问题是，当创建或保存记录时，触发延迟作业重新索引，它不会反映在**仅生产中的自动完成搜索中**。当记录保存在开发或暂存中时，更改会立即反映在自动完成搜索中。

我的代码和我的 solr 配置都在 git 中管理，因此它们在我的所有环境（开发、登台和生产）中都是相同的。我还没有进行任何生产特定的配置更改（还没有！）。我已将 MySQL 数据库和 solr 索引文件从生产环境复制回其他环境，以使一切都相同。我已经重新启动了，但 rails 和 solr 多次确保可以确定。

在生产中，我看到作业通过了延迟作业，并且我在 sunspot solr 日志中看到了更新。虽然，大部分日志输出对我来说仍然是希腊语。我已经在生产和开发之间进行了逐行比较，它们看起来或多或少相同。

我已经使用 curl 直接针对 solr 服务器进行了测试，以确保只有我和 solr——没有 apache、没有网络、没有浏览器。

当保存相同的记录时，它会启动作业以重新索引其一堆子对象，并且这些子对象确实会按预期重新索引。

此外，如果我使用该模型的 rake 任务重新索引，它会正确重建索引。这只需要几分钟，所以这就是我现在要做的事情。

**所以，问题是这种类型，在这种环境中，仅在创建/更新时。**

我能确定的唯一区别是负载，尽管我的网站用户很少，很难认为这很重要。

知道可能是什么原因造成的，或者我接下来应该看什么来解决这个问题？我的猜测是缓存，但由于我没有进行任何类型的生产调整，它应该是相同的。除非黑子做了我不知道的事情。

# node.js - 在 Express 和 node.js 的路由设置中使用 dynamicHelpers

> ID：10639311
> 
> 赞同：3
> 
> 时间：2012-05-17T16:05:18.563
> 
> 标签：node.js, express

我最近开始使用 node.js+express 组合，我偶然发现需要使用 dynamicHelpers 不仅在我的视图中，而且在我的路由设置中（默认 express 配置中的路由/index.js）。我应该使用一些不同的模式吗？

应用程序.js

```
app.dynamicHelpers({
    translate : function(req, res) {
        return translate;
    },
    language : function(req, res) {
        return req.session.language || "en";
    },
}); 
```

下面我想方便地访问我为 dynamicHelpers 设置的任何内容，因为在我看来它是相同的上下文.. 那么为什么要设置两次呢？

```
var routes = {};
routes.index = function(req, res) {
    res.render('index', {
        title : 'My webpage',
        categories : categoryPositions,
        referrer : req.header("Referrer"),
        languages : ["pl", "en", "de"],
        <----- here I would like to use my dynamicHelpers (for example translate)
    })
}; 
```

我知道我可以通过多种方式传递我的数据，但我不想重复我的代码，并且只想设置公共上下文一次并且尽可能干净。我欢迎任何批评和好的建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T19:40:24.763

函数.js

```
module.exports = {
  translate : function(req, res) {
    return translate;
  },
  language : function(req, res) {
    return req.session.language || "en";
  },
}; 
```

helpers.js

```
var functions = require('./functions');

app.dynamicHelpers({
  translate : functions.translate,
  language : functions.language
}); 
```

根据您的需要，您还可以像这样编写助手

```
var functions = require('./functions');

app.dynamicHelpers( functions ); 
```

路由.js

```
var functions = require('./functions');

var routes = {
  index: function(req, res) {
    res.render('index', {
      title : 'My webpage',
      categories : categoryPositions,
      referrer : req.header("Referrer"),
      languages : ["pl", "en", "de"],
      stuff: functions.translate(req, res) // <----- here I would like to use my dynamicHelpers (for example translate)
    })
  }
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T13:24:52.880

所以其实解决方法是使用尚未发布的express 3.0，修改：

`npm install -g express@3.0`

关注[https://github.com/visionmedia/express/wiki/Migrating-from-2.x-to-3.x](https://github.com/visionmedia/express/wiki/Migrating-from-2.x-to-3.x)，[http://www.devthought.com/code/use-jade-blocks-not-layouts /](http://www.devthought.com/code/use-jade-blocks-not-layouts/)

新的 express 简化的 dynamicHelpers`res.locals`可以在路由设置中使用，然后绑定到视图。

例子：

```
// app.
app.locals.use(function(req, res) {
    var language = req.session.language || "en";
    res.locals.language = language;
    res.locals.translate = function(clause) {
        return translate(clause, language);
    };
}); 
```

在路线设置中，我现在可以同时访问`res.locals.language`和`res.locals.translate`。在我看来，我可以简单地使用`translate('something')`.

# arrays - LINQ - 根据数组 B 上的值从数组 A 中选择元素

> ID：10639314
> 
> 赞同：2
> 
> 时间：2012-05-17T16:05:28.427
> 
> 标签：arrays, linq, select

假设我们有两个数组：

```
DateTime[] wDates = new DateTime[20000];
double[] wValues = new double[20000]; 
```

这两个数组都是按顺序排列的，即给定一个 int i，wValues[i] 用于日期 wDates[i]。

假设我们需要获取 wValues 的平均值，其中日期的月份是一月

使用标准循环，这将是：

```
double wAvg = 0.0;
int wDataCount = 0;
for (int i=0; i < 20000; i++)
  if (wDates[i].Month == 1)
  {
    wAvg += wValues[i];
    wDataCount++;
  }

if (wDataCount > 0)
  wAvg /= wDataCount; 
```

我想知道如何在 LINQ 中执行此操作？我可以创建一个包含两个值的结构/类 DateDouble，然后执行以下操作：

```
List<DateDouble> wListData = new List<DateDouble>();
Add the items...
double wAvg = (from d in wListData
               where d.Date.Month == 1
               select d.Value).Average(); 
```

但是当每天完成数千万次时，创建数千个 DateDouble 对象将是一个很大的内存开销。临时对象也会发生同样的情况，尝试使用“索引”并在数组上加入索引会产生糟糕的性能。

有没有更好的方法在 LINQ 中实现这一点？

谢谢，MM

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T16:08:49.207

好吧，您可以使用`Zip`运算符使事情变得更简单：

```
var average = wDates.Zip(wValues, (date, value) => new { date, value })
                    .Where(pair => pair.date.Month == 1)
                    .Average(pair => pair.value); 
```

这仍然会为每对创建一个匿名类型的实例，但我个人会放弃它并在您*认为*它太昂贵之前*测量*性能。请注意，这将以流方式运行 - 因此尽管会产生大量垃圾，但任何时候所需的总内存都很小。

 *您可以通过创建自己的 pair*结构*来提高效率......这将避免创建额外的对象，但这会更痛苦。不过还*不错*：

```
// The normal Tuple types are classes.
public struct TupleValue<T1, T2>
{
    private readonly T1 item1;
    private readonly T2 item2;

    public T1 Item1 { get { return item1; } }
    public T2 Item2 { get { return item2; } }

    public TupleValue(T1 item1, T2 item2)
    {
        this.item1 = item1;
        this.item2 = item2;
    }
}

var average = wDates.Zip(wValues, (date, value) => 
                                   new TupleValue<DateTime, double>(date, value))
                    .Where(pair => pair.Item1.Month == 1)
                    .Average(pair => pair.Item2); 
```

我只会在证明第一种方法很昂贵*之后*才会这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T17:13:37.153

IEnumerable.Where() 扩展方法有一个重载版本，它也考虑谓词中的索引。

```
double average = wValues.Where((d, i) => wDates[i].Month == 1).Average(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T16:15:39.357

就像是：

```
double wAvg = wDates.Select((d,i) => new { Month = d.Month, Index = i })
                    .Where(x => x.Month == 1)
                    .Select(x => wValues[i])
                    .Average(); 
```

无论如何，在这种情况下，您还将创建该匿名类型的 N 个实例。*

# java - 如何回到之前的活动？

> ID：10639316
> 
> 赞同：1
> 
> 时间：2012-05-17T16:05:35.593
> 
> 标签：java, android

我正在开发一个有 5 个接口的应用程序

我有一个活动，用户必须输入密码，输入密码后，用户移动到下一个活动，但是当用户单击后退按钮并返回密码活动时，输入的密码丢失了......怎么能我保持输入的密码？

代码：

```
back = (Button) findViewById(R.id.back);
back.setOnClickListener(new View.OnClickListener() {    

        public void onClick(View v1) {
            Intent backIntent = new Intent();
            backIntent.setClass(getApplicationContext(), LockAppActivity.class);
            backIntent.setFlags(Intent.FLAG_ACTIVITY_BROUGHT_TO_FRONT);
            startActivity(backIntent);
            finish();
        }
    }); 
```

假设应用程序以活动 A --> B --> C --> D --> E 开始

当用户从 C 移动到 B 时，在活动 B 处有一个“停用”按钮，当用户按下它时，所有用户设置都会被清除，应用程序将退出，但是当我按下按钮时，它会将我带到布局C...我怎样才能改变这个？

```
 deactivate = (Button) findViewById(R.id.deactivate);
    deactivate.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v){ 
            final String STORAGE = "UniqueID_IMSI";
            SharedPreferences unique = getSharedPreferences(STORAGE, 0);
            SharedPreferences.Editor editor1 = unique.edit();
            editor1.putString("identifier", "");
            editor1.putString("simIMSI", "");
            editor1.commit();

            final String LOGIN_PASSWORD = "Login_Password";     
            SharedPreferences loginPassword = getSharedPreferences(LOGIN_PASSWORD, 0);
            SharedPreferences.Editor editor2 = loginPassword.edit();
            editor2.putString("loginPassword", "");
            editor2.commit();

            final String LOCK_APP_PASSWORD = "LockAppPassword";
            SharedPreferences userPassword = getSharedPreferences(LOCK_APP_PASSWORD, 0);
            SharedPreferences.Editor editor3 = userPassword.edit();
            editor3.putString("password", "");
            editor3.commit();

            final String PHONE_NUMBER = "Phone_Number";         
            SharedPreferences phone = getSharedPreferences(PHONE_NUMBER, 0);
            SharedPreferences.Editor editor4 = phone.edit();
            editor4.putString("phoneNumber", "");
            editor4.commit();

            finish();
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T16:37:27.793

> 如何维护输入的密码

将用户输入的密码保存在 SharedPreference 中，并在 Activity 的 onResume() 函数中从 SharedPreference 中调用保存的密码并将其显示给用户。您可能想花一些时间尝试了解 Activity 生命周期。

> 应用程序将退出

看看这个[链接](https://stackoverflow.com/questions/2042222/close-application)。@Romain Guy，是谷歌人。您可能希望重新考虑您的应用程序设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T19:49:42.397

我最喜欢的关闭应用程序问题的解决方案是：

*   考虑将“startActivityForResult”用于您希望在发生特定事件时关闭的活动。
*   您也可以使用一些意图标志，但我认为它们非常混乱并尝试尽可能少地使用它们
*   使用片段而不是活动。您可以准确选择要显示的片段和时间。

# .net - 移植 Crystal Reports 应用程序（VB 2003，Framework 1.1）

> ID：10639317
> 
> 赞同：0
> 
> 时间：2012-05-17T16:06:05.277
> 
> 标签：.net, vb.net, crystal-reports

我被分配到一个新项目。我必须维护一个在 Visual Studio 2003（VB.NET，Framework 1.1）和 IDE 附带的 Crystal Reports 中制作的应用程序。该应用程序绝对是我们所说的“遗留代码”。

只是为了进行测试，今天我尝试在 Visual Studio 2010 中转换应用程序。转换器为我提供下载 SAP Crystal Reports，无需任何费用且无需注册。

问题是：有人对这些组件有经验吗？将应用程序迁移到 VS 2010 是否可行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T17:09:47.003

快速的回答是肯定的，这是可行的。我使用了从 VS2003 到 VS2010 的 Crystal Reports，在此过程中的每一点都升级了我的代码。实际的 Crystal Report 文件倾向于在版本之间很好地移植。

几点注意事项：

*   升级时，您需要在任何需要运行它们的机器（无论是运行时还是合并模块）上为您正在使用的框架版本安装新的 Crystal Reports 运行时。
*   我从 2003->2005->2008->2010 开始。我没有直接从 2003->2010 开始，但我认为这不会成为实际报告的问题。查看器控件可能已更改。当你升级你的项目时，它可能会尝试使用旧的查看器，这些查看器可能满足你的需要，也可能不满足你的需要。如果您只是在窗体上使用 Viewer 控件，您可能可以快速重建它。如果不是，您可以尝试删除旧组件，然后将新组件放在表单上，​​看看哪些工作/中断（我通常处理后端代码和它们提供的编码对象，这些并没有太大变化，或者至少没有足以严重破坏我写的任何东西）。
*   很容易，您应该能够制作项目的副本并完成升级过程以查看遇到的问题。我要寻找的是确保组件升级到更新的对应组件，并且它们不只是引用旧的（即您正在运行需要 Crystal 2010 查看器但引用旧查看器的 .Net 4.0 应用程序）。
*   Crystal 的免费版本运行良好，虽然有点复杂。当我使用它时，我确实遇到了一些问题，它在 VS2010 内部崩溃。作为一个组织，我们决定充分使用它，以使完整版本对我们有意义，因此我已经转移到完整的 Crystal Reports 2011（版本 14，根据 SAP 销售，它应该与 VS2010 组件匹配代表我谈过）。

我的一些答案取决于在这个遗留应用程序中定制了多少代码。

参考链接：

*   [http://www.businessobjects.com/jump/xi/crvs2010/us2_default.asp](http://www.businessobjects.com/jump/xi/crvs2010/us2_default.asp)（免费 2010 IDE 的 SAP 下载链接和可再发行组件）。
*   [http://www.blakepell.com/Blog/?p=470](http://www.blakepell.com/Blog/?p=470)（完整的 Crystal Reports 版本如何匹配 VS/免费版本）

# c# - 具有互斥必需参数的命令行解析器

> ID：10639320
> 
> 赞同：32
> 
> 时间：2012-05-17T16:06:14.447
> 
> 标签：c#, command-line, command-line-arguments

我开始将命令行[解析器库](http://commandline.codeplex.com)用于一个同时具有 GUI 和命令行执行功能的工具。启动 GUI 是通过命令行选项完成的。

因此，如果程序在命令行模式下执行，我希望有必需的选项。基本上，如果未设置选项“Gui”，我希望需要选项 1 和选项 2。

我尝试组合 MutuallyExclusiveSet 和 Required 属性，如下所示，但它并没有像我想象的那样工作。我是否误解了“MutuallyExclusiveSet”的概念或只是滥用它？还是图书馆还不支持的东西？

```
public class CommandLineOptions : CommandLineOptionsBase
{
    [Option(null, "gui", Required = false, HelpText = "Launch the GUI", MutuallyExclusiveSet = "Gui")]
    public bool Gui { get; set; }

    [Option(null, "opt1", HelpText = "Option 1", MutuallyExclusiveSet = "CommandLine", Required = true)]
    public string Option1 { get; set; }

    [Option(null, "opt2", HelpText = "Option 2", MutuallyExclusiveSet = "CommandLine", Required = true)]
    public string Option2 { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-05-27T15:14:12.513

属于互斥集合的所有选项在它们之间是互斥的。按照这个例子：

```
class Options {
  [Option("a", null, MutuallyExclusiveSet="zero")] 
  public string OptionA { get; set; }
  [Option("b", null, MutuallyExclusiveSet="zero")] 
  public string OptionB { get; set; }
  [Option("c", null, MutuallyExclusiveSet="one")] 
  public string OptionC { get; set; }
  [Option("d", null, MutuallyExclusiveSet="one")] 
  public string OptionD { get; set; }
} 
```

使用这些规则，以下命令行是有效的：

```
$ app -a foo -c bar
$ app -a foo -d bar
$ app -b foo -c bar
$ app -b foo -d bar 
```

这些不是：

```
$ app -a foo -b bar
$ app -c foo -d bar
$ app -a foo -b bar -c foo1 -d foo2 
```

如您所见，您不能同时指定属于同一集合的选项。还要记住，预构建的单例（**CommandLineParser.Default**）不适用于**MutualliyExclusiveSet**属性。您需要自己装扮解析器：

```
if (new CommandLineParser(new CommandLineParserSettings {
                            MutuallyExclusive = true,
                            CaseSensitive = true,
                            HelpWriter = Console.Error}).ParseArguments(args, opts) {
  // consume values here
  Console.WriteLine(opts.OptionA);
} 
```

这是命令行解析器库中互斥选项的工作方式。无论如何，为了解决您的特定问题，我建议您像在普通控制台应用程序中那样定义所有选项。然后添加**Gui**布尔开关。如果指定了此选项，则忽略其他选项。如果不是正常的控制台应用程序。

*（另一件事：在后续版本中将有一个称为“子命令”的功能，可以让您管理多种选项类型；这可能是这个即将推出的功能的正确案例。）*

**编辑 2015-08-30：**

在 1.9.x 稳定版中实现的功能总是会造成混乱，默认情况下被禁用，并且需要开发人员通过设置实例激活它。

版本 2.0.x，内核被完全重写，该功能始终处于活动状态，我将尝试展示一个简单的示例（请记住，公共 API 已更改，因为 2.0.x 是主要版本更新）。

```
 class Options {
  [Option(SetName = "web")]
  public string WebUrl { get; set; }
  [Option(SetName = "web")]
  public int MaxLinks { get; set; }

  [Option(SetName = "ftp")]
  public string FtpUrl { get; set; }
  [Option(SetName = "ftp")]
  public int MaxFiles { get; set; }

  [Option]
  public bool Verbose { get; set; }
} 
```

set from `ftp`set 与 from 不兼容（不属于一个集合，或者更好地属于默认的一个`web`是中性的，可以随意混合）。有效的：`--verbose``""`

```
 $ app --weburl http://stackoverflow.com --maxlinks 99
$ app --ftpurl ftp://ftp.myoffice.files.com --maxfiles 1234
$ app --verbose --weburl http://twitter.com --maxlinks 777
$ app --ftpurl ftp://ftp.xyz.org --maxfiles 44 --verbose
$ app --verbose 
```

无效：

```
 $ app --weburl http://stackoverflow.com --maxlinks 99 --ftpurl ftp://ftp.xyz.org
$ app --ftpurl ftp://ftp.myoffice.files.com --maxfiles 1234 --maxlinks 777
$ app --verbose --weburl http://twitter.com --maxfiles 44
$ app --maxfiles 44 --maxlinks 99 
```

# java - 如何为从 Eclipse 运行的程序指定默认 JVM 参数？

> ID：10639322
> 
> 赞同：66
> 
> 时间：2012-05-17T16:06:18.040
> 
> 标签：java, eclipse, jvm

当我从 Eclipse 运行代码时，有没有办法指定默认的 JVM 参数，而不是为每个运行/调试/等配置一遍又一遍地指定相同的参数？

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2012-07-02T20:50:26.377

转到窗口 → 首选项 → Java → 已安装的 JRE。选择您正在使用的 JRE，单击 Edit，将有一行用于 Default VM Arguments，它将应用于每次执行。例如，我在 OS X 上使用它来隐藏 Dock 中的图标，增加最大内存并打开断言：

```
-Xmx512m -ea -Djava.awt.headless=true 
```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-05-17T16:09:48.863

是的，右键单击该项目。`Run as`然后单击`Run Configurations`。您可以在框中的`Arguments`选项卡中更改传递给 JVM 的参数。`VM Arguments`

然后可以在运行项目时将该配置用作默认配置。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-20T18:13:10.897

据我所知，没有为 java 应用程序创建全局配置的选项。您始终创建配置的副本。

![在此处输入图像描述](../Images/8865d5426e00fbfa4d855a8c4dcf8597.png)

此外，如果您使用 PDE（用于插件开发），您可以使用 windows -> Preferences -> Plug-in development -> Target Platform 创建目标平台。编辑具有程序/虚拟机参数的选项。

希望这可以帮助

# python - Python中如何通过类字典直接访问类实例

> ID：10639325
> 
> 赞同：1
> 
> 时间：2012-05-17T16:06:29.110
> 
> 标签：python, oop, agent-based-modeling

我需要一种通过 ID 号直接访问类实例的方法。

正如我试图在[这里](https://stackoverflow.com/questions/10583195/how-can-i-dynamically-generate-class-instances-with-single-attributes-read-from/10583317#comment13785524_10583317)解释的那样，我正在导入一个 .csv 文件，并且我想为 .csv 文件中的每一行创建我的类 Person() 的实例，另外我希望能够使用 as 直接访问这些实例key 一个唯一标识符，已经存在于 .csv 文件中。

感谢 user433831 的帮助，到目前为止我所做的是：

```
from sys import argv
from csv import DictReader
from person import Person

def generateAgents(filename):
  reader = DictReader(open(filename, 'rU'))
  persons = [Person(**entry) for entry in reader]
  return persons 
```

其中 person 只是我将类 Person() 定义为的模块：

```
class Person:
  def __init__(self, **kwds):
    self.__dict__.update(kwds) 
```

现在我有一个我的 person 实例的列表，即`persons`，这已经很整洁了。但是现在我需要使用该`networkx`模块在这些人之间创建一个网络，并且我肯定需要一种直接访问每个人的方法（目前我的实例没有任何名称）。

例如，每个人都有一个名为“father_id”的属性，这是父亲的唯一 ID。当前人口中没有父亲在世的人的“father_id”等于“-1”。

现在，要将每个人与他/她的父亲联系起来，我会这样做：

```
import networkx as nx 
G=nx.Graph() 
for person in persons: 
  G.add_edge(person, person_with_id_equal_to_father_id) 
```

我的问题是我无法直接访问这个“person_with_id_equal_to_father_id”。请记住，我需要多次执行此直接访问，因此我需要一种非常有效的方法，而不是在列表中进行某种形式的搜索（同时考虑到我的人口中有大约 150000 人） .

在我的类 Person() 中实现类似字典功能的东西会很棒，每个实例的键都是唯一标识符。这个唯一标识符已经存在于我的 csv 文件中，因此我已经将它作为每个人的属性。

感谢您的任何帮助，一如既往地非常感谢。另外请记住我是一个完全的python新手（你可能会说......;））

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T16:08:50.800

只需使用字典：

```
persons_by_id = {p.id: p for p in persons} 
```

这需要最新版本的 Python。如果您的不支持此语法，请使用以下命令：

```
persons_by_id = dict((p.id, p) for p in persons) 
```

完成上述任一操作后，您可以通过他们的 id 找到该人，如下所示：

```
persons_by_id[id] 
```

`networkx`示例变为：

```
import networkx as nx 
G=nx.Graph() 
for person in persons: 
  if person.father_id != -1:
    G.add_edge(person, persons_by_id[person.father_id]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T16:47:52.757

这是执行@Toote 建议的有效方法：

```
def generateAgents(filename):
  with open(filename, 'rU') as input:
    reader = DictReader(input)
    persons = dict((entry['father_id'], Person(**entry)) for entry in reader)
  return persons 
```

# sql - 新旧触发码

> ID：10639331
> 
> 赞同：7
> 
> 时间：2012-05-17T16:06:58.367
> 
> 标签：sql, triggers, oracle10g

有人可以解释一下是什么意思：

`:new`并`:old`在触发代码中。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-17T16:15:54.850

`:new`并且`:old`是允许您访问特定列的新旧值的伪记录。如果我有一张桌子

```
CREATE TABLE foo (
  foo_id NUMBER PRIMARY KEY,
  bar    VARCHAR2(10),
  baz    VARCHAR2(10)
); 
```

我插入一行

```
INSERT INTO foo( foo_id, bar, baz ) 
  VALUES( 1, 'Bar 1', 'Baz 1' ); 
```

然后在插入触发器之前的行级

```
:new.foo_id will be 1
:new.bar will be 'Bar 1'
:new.baz will be 'Baz 1' 
```

尽管

```
:old.foo_id will be NULL
:old.bar will be NULL
:old.baz will be NULL 
```

如果您随后更新该行

```
UPDATE foo
   SET baz = 'Baz 2'
 WHERE foo_id = 1 
```

然后在更新前的行级触发器中

```
:new.foo_id will be 1
:new.bar will be 'Bar 1'
:new.baz will be 'Baz 2' 
```

尽管

```
:old.foo_id will be 1
:old.bar will be 'Bar 1'
:old.baz will be 'Baz 1' 
```

如果我然后删除该行

```
DELETE FROM foo
 WHERE foo_id = 1 
```

然后在删除前的行级触发器中，

```
:new.foo_id will be NULL
:new.bar will be NULL
:new.baz will be NULL 
```

尽管

```
:old.foo_id will be 1
:old.bar will be 'Bar 1'
:old.baz will be 'Baz 2' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T16:19:12.693

用简单的英语：

它们是别名，允许您从列的状态（旧）和它将如何（新）访问信息。

[来自 Oracle 文档：](http://docs.oracle.com/cd/B10500_01/appdev.920/a96590/adg13trg.htm)

旧值和新值在 BEFORE 和 AFTER 行触发器中都可用。可以在 BEFORE 行触发器中分配新的列值，但不能在 AFTER 行触发器中分配（因为触发语句在触发 AFTER 行触发器之前生效）。如果 BEFORE 行触发器更改了 new.column 的值，那么由同一语句触发的 AFTER 行触发器会看到 BEFORE 行触发器分配的更改。

相关名称也可以用在 WHEN 子句的布尔表达式中。在触发器主体中使用旧限定符和新限定符时，冒号必须位于它们之前，但在 WHEN 子句或 REFERENCING 选项中使用限定符时不允许使用冒号。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T16:16:52.670

在触发器中，`:old`记录包含触发语句执行之前的值，`:new`记录包含执行之后的值。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-17T16:20:50.233

`old`值是值，值是`before the change`，例如，在 a 上，10 是值，列中的当前值是旧的。`new``value to be changed``update set col1=10``new`

在插入时，没有旧值，只有新值；在删除时，没有新值，只有旧值

# python - 在 Python 字典和 SQLite 之间切换

> ID：10639333
> 
> 赞同：1
> 
> 时间：2012-05-17T16:07:06.167
> 
> 标签：python, sql, sqlite, dictionary

我编写了涉及使用字典的python代码。我现在希望将处理后的数据存储到本地 SQLite 数据库中，但想不出如何翻译如下内容：

```
myDict[wordA] = [list of tuples (length changes per word)] 
```

到 SQL。我已更改`myDict`为第一个元素的 SQL 表`word`，但我不知道如何将列分配给变量列表。

我是否必须更改数据库的结构？

任何想法都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T16:17:53.880

我建议您按照以下数据库教程进行操作：[http](http://www.quackit.com/database/tutorial/) ://www.quackit.com/database/tutorial/ 。

您需要制作两张表，一张包含单词值，一张包含元组。元组不应该在列表中，但都有单独的行。您可以使用外键将元组链接到单词。您可以将多行链接到同一个单词，这样可以将列表中的元组链接到单个单词。

它看起来像这样，元组表的 foreign_key 链接到 Word 表的 primary_key：

```
Word table                              tuple table

primary_key   word                      primary_key     tuple     foreign_key
1             example1                  1               (1,2)     1
2             example2                  2               (3,9)     1
                                        3               (4,1)     2
                                        4               (4,2)     2 
```

这将对应于

```
myDict = {'example1' = [(1,2), (3,9)], 'example2' = [(4,1), (4,2)]} 
```

# file - 关闭应用程序并让它触发批处理文件运行？

> ID：10639336
> 
> 赞同：0
> 
> 时间：2012-05-17T16:07:19.780
> 
> 标签：file, batch-file, vmware

我正在尝试将虚拟机配置为从开机的机器启动。我有那个工作。现在，一旦有人在虚拟机的开始菜单上单击“关闭”，我希望能够关闭整个机器。

如果有帮助，我正在将 VMware 与 Windows 7 映像一起使用。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T16:47:11.540

使用某种等待选项调用虚拟机的启动，然后调用关闭。

像这样的东西

```
start /wait vmware-cmd cfg.vmx start 
shutdown -s 
```

我没有安装任何 vmware，我现在无法对其进行测试，因此我无法确保 vmware-cmd 不会立即返回。如果是这种情况，那么你必须在你的 bat 文件中寻找一些循环机制，比如

```
vmware-cmd cfg.vmx start 
:again
vmware-cmd cfg.vmx getstate >state.txt
if (state.txt contains some string indicating still running) goto again
shutdown -s 
```

# c# - gzip压缩asp.net c#

> ID：10639337
> 
> 赞同：3
> 
> 时间：2012-05-17T16:07:20.733
> 
> 标签：c#, asp.net, gzip

我只想调整我的方法以在浏览器接受 gzip 时传输压缩的数据。该`else`部分已经工作。我只是想调整`if`部分。继承人的代码：

```
private void writeBytes()
{
    var response = this.context.Response;

    if (canGzip)
    {
        response.AppendHeader("Content-Encoding", "gzip");
        //COMPRESS WITH GZipStream
    }
    else
    {
        response.AppendHeader("Content-Length", this.responseBytes.Length.ToString());
        response.ContentType = this.isScript ? "text/javascript" : "text/css";
        response.AppendHeader("Content-Encoding", "utf-8");
        response.ContentEncoding = Encoding.Unicode;
        response.OutputStream.Write(this.responseBytes, 0, this.responseBytes.Length);
        response.Flush();
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-17T17:00:12.413

看起来您想添加 Response.Filter，见下文。

```
private void writeBytes()
{
    var response = this.context.Response;
    bool canGzip = true;

    if (canGzip)
    {
        Response.Filter = new System.IO.Compression.GZipStream(Response.Filter, System.IO.Compression.CompressionMode.Compress);
        Response.AppendHeader("Content-Encoding", "gzip");
    }
    else
    {
        response.AppendHeader("Content-Encoding", "utf-8");
    }

    response.AppendHeader("Content-Length", this.responseBytes.Length.ToString());
    response.ContentType = this.isScript ? "text/javascript" : "text/css";
    response.ContentEncoding = Encoding.Unicode;
    response.OutputStream.Write(this.responseBytes, 0, this.responseBytes.Length);
    response.Flush();
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T16:11:32.250

您应该使用[GZipStream](http://msdn.microsoft.com/en-us/library/system.io.compression.gzipstream.aspx)类。

```
using (var gzipStream = new GZipStream(streamYouWantToCompress, CompressionMode.Compress))
{
    gzipStream.CopyTo(response.OutputStream);
} 
```

# php - PHP $_REQUEST 变量

> ID：10639352
> 
> 赞同：7
> 
> 时间：2012-05-17T16:07:54.203
> 
> 标签：php, post, get, request

我对 php 中的 $_REQUEST 全局变量有疑问。当您使用相同的变量名提交 get 和 post 时，php 是否会为它们中的任何一个分配优先级？IE。如果我将 $_POST['var'] 和 $_GET['var'] 提交到页面，$_REQUEST['var'] 会包含帖子或获取，还是会执行其他类型的任务？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-17T16:09:23.477

它取决于[**`request_order`**](http://fr2.php.net/manual/en/ini.core.php#ini.request-order)配置指令*（引用）*：

> 该指令描述了 PHP 将 GET、POST 和 Cookie 变量注册到`_REQUEST`数组中的顺序。

还可以看看[`variables_order`](http://fr.php.net/manual/en/ini.core.php#ini.variables-order)：还有一些额外的解释*（比如可以使用的字母）* ——它也会影响`$_REQUEST`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T16:14:29.830

您的问题与以下帖子非常相似...检查一下...

[在 $_REQUEST、$_GET 和 $_POST 中，哪一个最快？](https://stackoverflow.com/questions/1924939/php-request-vs-get-and-post)

# php - 头像：默认图片

> ID：10639353
> 
> 赞同：0
> 
> 时间：2012-05-17T16:07:56.770
> 
> 标签：php, html

我想为我的用户制作一个简单的头像系统。

用法很简单，每张上传的头像都由用户命名，例如：

`<a>...$username.'.jpg';..</a>`

所以真的不需要数据库。当用户登录时，我只需将文件类型附加到已经（来自数据库）所需的用户名。

我关心的是默认图像，它在用户设置自己的图像之前使用。处理这个问题的最佳方法是什么？创建用户帐户时，是否可以创建/复制默认图像到用户头像文件夹？

我知道我可以使用数据库（默认值）或检查是否设置了用户图像等来实现这一点，但我想让它尽可能简单。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T16:16:03.810

文件将做什么的非常简单的示例。我建议当然让它更安全。

```
$filename = $_GET["avatar"];
$path = 'path/to/your/files';
if (!file_exists($path.$filename.'.jpg'))
{
   $filename = "default";
}
Header('Content-type: image/jpg');
readfile($path.$filename.'.jpg'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T16:16:06.080

检查文件系统上是否存在用户的头像：

*   如果存在：显示它。
*   如果不是：显示存储在一个位置的默认图像。不需要复制它。

我建议将图像名称保存在数据库中，**扩展名为**. 人们可能想要上传 PNG 或 GIF 图像，而不是经典的 JPG。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T16:31:40.160

您尝试做的一个简单示例可能是...

1.  当用户在您的网站上注册时，他或她可以上传或不上传图片。

2.  在此过程中进行验证以了解是否有要上传的图像。此外，如果进程中有一个文件，请验证它的扩展名（使用您想要允许的扩展名声明和数组，并与传入文件进行比较）。

3.  如果正在注册的用户没有上传图片，请在您的服务器中创建一个默认图片，例如：“users/default.jpg”。因此，在插入到您的数据库中，您必须放入您想象的“image_name”列：默认值和您的“image_ext”列：.jpg

4.  如果正在注册的用户在此过程中上传图像，则在您的服务器中（当您验证扩展名和大小时）创建例如：“users/1.jpg”，其中“1”是用户 ID，并且也在您的插入中数据库放入您想象的“image_name”列：1 和您的“image_ext”列：.jpg

5.  要检索图像，只需执行一种`select * from`您想要的用户 ID，然后输入您的 html：`echo "<img src='users/".$row['image_name'].$row['image_ext']."'/>";`就这样，您就完成了。

# mysql - JDBC - 自动缩小 VARCHAR 以适应

> ID：10639356
> 
> 赞同：1
> 
> 时间：2012-05-17T16:08:04.717
> 
> 标签：mysql, jdbc, truncate

得到这个例外：

```
Exception: Data truncation: Data too long for column 'subject' at row 1 
```

此数据用于显示目的，因此可以截断。

最简单的做法是在逻辑中截断`subject = subject.subString(0, 100)`- 但这会将 MySQL 中的最大长度复制到我在 Java 中硬编码的数字。MySQL 或 JDBC 中是否有任何功能会自动截断以适应？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T16:17:06.383

> 如果未启用严格 SQL 模式并且您为 CHAR 或 VARCHAR 列分配的值超过了列的最大长度，则该值将被截断以适应并生成警告。

（来自[CHAR 和 VARCHAR 类型](http://dev.mysql.com/doc/refman/5.0/en/char.html)）

如果您不介意将 MySQL 服务器模式更改为不严格，则不会引发异常。

请参阅[服务器模式](http://dev.mysql.com/doc/refman/5.0/en/server-sql-mode.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T20:03:06.400

插入截断是一个异常，驱动程序需要抛出异常（[`DataTruncation`](http://docs.oracle.com/javase/7/docs/api/java/sql/DataTruncation.html)）；请参阅 JDBC 4.1 的第 8.3 节：

> 当写入数据源时发生数据截断时，会引发 DataTruncation 对象。即使已生成警告，已截断的数据值也可能已写入数据源。当从数据源读取数据时发生数据截断时，将报告 SQLWarning。

还有静默截断（`setMaxFieldSize()`在 Statement 上使用，但 Javadoc 只讨论 ResultSet 中的字段，因此不清楚这是否也适用于 PreparedStatement 上设置的参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T16:11:19.430

使用定义宽度的列属性，而不是硬编码 100。您并不真正关心它在数据库中的长度，只是它不会根据您的客户端长度定义而爆炸。

# assembly - 寄存器寻址

> ID：10639359
> 
> 赞同：1
> 
> 时间：2012-05-17T16:08:29.173
> 
> 标签：assembly, x86

我明天有一个考试，我对这个问题感到非常困惑。执行每条指令后，AL 和 AH 寄存器中包含的值是什么。在执行每条指令之前假设 AL=9 和 AH=0。

• nop（没有操作它们保持不变）

• mov al,ah (al=0 ah=0)

• push ax（将 ah 和 al 推入堆栈？）

• 十进制

• 添加斧头，257

• 添加 al,251

• shl al,2

我知道当提到 ax 时我会感到困惑的前几个，即添加 ax,257 我应该将 257 添加到 ah 和 al 上吗？只要记住 al 和 ah 在每条指令开始时都设置回 9 和 0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T16:14:08.973

AX 是 AH 和 AL 的串联（或者反过来说，AL 是 AX 的低字节，AH 是 AX 的高字节）。因此，在每条指令之前，AX=0009h。

但是，当您的一条指令在 AL 上运行时，它根本不会影响 AH。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T16:24:34.030

请记住，al 和 ah 只是引用 ax 寄存器的低字节和高字节的方式。对于 AX，最好在出现时将其视为 16 位寄存器，然后当被问及 AH 或 AL 的值是什么时，将其分解为下半部分和上半部分。所以你的寄存器看起来像这样，如果它们从 9 和 0 开始：

```
 00000000   00001001
|________| |________|
    AH         AL
|___________________|
          AX 
```

所以，例如`add ax, 257`看起来像这样：

```
 |0000000|  |00001001|
+
    |0000001|  |00000001|

=   |0000001|  |00001010| 
```

# javascript - jQuery + AJAX + 这个表单

> ID：10639365
> 
> 赞同：0
> 
> 时间：2012-05-17T16:08:57.973
> 
> 标签：javascript, jquery, ajax

如何在 ajax 成功函数中找到当前表单的**ID/Class ？**由于有多个具有相同类的表单，我不能简单地搜索类，而是需要确切的提交表单。

我有以下脚本：

```
$('#fAddOs,#fAddFs,.addJ').submit(function(){

    //$(this) = form

    $.ajax({
        type:'POST',
        url:'admin.inc.php',
        data:data,
        dataType:'html',
        success:
        function(response){
            //Get form
        }
    });

}); 
```

如果我`$(this)`在 AJAX 函数中调用（请参阅上面代码中的注释），我会得到：

```
[Object { url="admin.inc.php", isLocal=false, global=true, mehr...}] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T16:14:05.787

在 ajax 调用之外，将表单保存到可以在 ajax 回调中使用的变量中。

```
$('#fAddOs,#fAddFs,.addJ').submit(function(){

    var form = $(this);

    $.ajax({
        type:'POST',
        url:'admin.inc.php',
        data:data,
        dataType:'html',
        success:
        function(response){
            // use the form variable here...
            console.log(form.attr('id'));
        }
    });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T16:11:19.903

使用您使用的选择器，您可以抓取多个元素。在提交中，当前正在使用的表单可以使用`this`. 或者将其用作 jQuery 对象`$(this)`。

在函数中：

```
var id = $(this).attr("id"); 
```

或者获取类名

```
var class = $(this).attr("class"); 
```

**更新**

在 ajax 调用之前，创建一个 var：

```
var form = $(this); 
```

然后`form`在ajax函数中使用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T16:15:23.430

在提交函数中试试这个：

```
var id = this.id; 
```

# excel - 在 Excel 高级筛选器中使用 NOT

> ID：10639366
> 
> 赞同：0
> 
> 时间：2012-05-17T16:09:03.230
> 
> 标签：excel

我只是问是否有可能使用具有 NOT 和唯一记录的高级过滤器？为了解释我的逻辑，这就是我想要实现的，我有一个名为选项代码的列，在这一列中有重复的值和带有“NULL”这个词的值。现在，我想做的是在此列上过滤所有唯一值，但我也想保留该列中包含单词 NULL 的所有行。我想在一个过滤器中做到这一点，而不必来回走动。

有没有办法做到这一点？

示例输出为：

```
AA
BB
CC
NULL
NULL
.
.
.
.
. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T16:13:57.597

这就是你如何获得高级过滤器[http://support.microsoft.com/kb/214324](http://support.microsoft.com/kb/214324)

因为`not equal`你可以做这样的事情；例如

```
=if( F5<>35,"Failed","Passed") 
```

# javascript - jQuery 从锚点获取多个 rel 值

> ID：10639376
> 
> 赞同：0
> 
> 时间：2012-05-17T16:09:34.213
> 
> 标签：javascript, jquery

是否可以从 jQuery 中的单个锚点或通常在 JavaScript 中获取多个 rel 值，而无需将 rel 拆分为数组？

例如，对于具有两个由标准空间分隔的 rel 属性的锚点：

```
<a id='a' class='b' rel='9 9' href='#'>Link</a> 
```

我可以通过以下方式获得每个：

```
$('.b').click(function(e) {    
    /* ... */

    var rels = $(this).prop('rel').split("_"); 

    $('form#form-stage-2 input[name=sleeve_t]').val( rels[0] );
    $('form#form-stage-2 input[name=sleeve_n]').val( rels[1] );

    /* ... */
}); 
```

但是想知道类似的东西是否有效？

```
$('.b').click(function(e) {    
    /* ... */

    $('form#form-stage-2 input[name=sleeve_t]').val( $(this).prop('rel[0]') );
    $('form#form-stage-2 input[name=sleeve_n]').val( $(this).prop('rel[1]') );

    /* ... */
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T16:12:40.733

不，那是无效的。您将不得不拆分或做类似的事情。不知道你为什么要避免分裂，但没有理由这样做。\

* * *

编辑：你可以这样做，我认为这根本没有那么糟糕。

```
$('form#form-stage-2 input[name=sleeve_t]').val( $(this).prop("rel").split(" ")[0]);
$('form#form-stage-2 input[name=sleeve_n]').val( $(this).prop("rel").split(" ")[1]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T16:13:53.320

没有正式支持以`rel`某种方式拥有多个值，比如说，`class`可以。没有什么能阻止您在其中放置空间，但您必须自己处理它们。

# c# - 有多个根元素。第 1 行，位置 21。XML 错误

> ID：10639377
> 
> 赞同：0
> 
> 时间：2012-05-17T16:09:35.683
> 
> 标签：c#, xml

在我的代码中出现错误这是加载函数：

这是错误：有多个根元素。第 1 行，位置 21

我希望有人能引导我朝着正确的方向前进。

```
private void button11_Click(object sender, EventArgs e)
        {

            XmlTextReader reader = new XmlTextReader("text1.xml");
            XmlNodeType type;

 while (reader.Read())
            {
                type = reader.NodeType;

                if (type == XmlNodeType.Element)
                {
                    if (reader.Name == "Title")
                    {
                        reader.Read();
                        textBox12.Text = reader.Value;
                    }

                }

                while (reader.Read())
                {

                    if (reader.Name == "Description")
                    {
                        reader.Read();
                        textBox11.Text = reader.Value;
                    }

                }
            } 
```

这是创建 XML 文件的代码：

```
XmlTextWriter xWriter = new XmlTextWriter("text1.xml", Encoding.UTF8);

            xWriter.WriteStartElement("Tasks");

            xWriter.WriteStartElement("Title");

            xWriter.WriteString(textBox1.Text); //  textbox.text 

            xWriter.WriteEndElement(); // title

            xWriter.WriteStartElement("Description");

            xWriter.WriteString(textBox2.Text); //  textbox.text 

            xWriter.WriteEndElement(); // description end 

            xWriter.WriteStartElement("Date");

            string val = "10/10/2010";
            dateTimePicker1.Value = Convert.ToDateTime(val);

            xWriter.WriteString(val); //  textbox.text 

            xWriter.WriteEndElement(); // description end 

            xWriter.WriteEndElement(); // close tasks

            xWriter.Close(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T16:11:03.513

所有 XML 文档都必须有 1 个根元素，例如

```
<myroot>
   <foo>
   </foo>
</myroot> 
```

您必须解析具有超过 1 个根的文档。所以 text1.xml 必须有类似的东西

```
<myroot>
   <foo>
   </foo>
</myroot>
<myotherroot>
   <bar>
   </bar>
</myotherroot> 
```

而不是拥有

```
xWriter.WriteStartElement("Tasks");
xWriter.WriteStartElement("Title"); 
```

您需要将 Title 创建为 Tasks 的子元素（如果这是您想要的结构）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-07T03:16:14.013

此代码将读取您正在编写的 XML：

```
XmlDocument doc = new XmlDocument();
doc.Load("text1.xml");
var taskElement = doc.ChildNodes.OfType<XmlElement>().FirstOrDefault(x => x.Name == "Tasks");
if (taskElement != null)
{
    var taskElements = taskElement.ChildNodes.OfType<XmlElement>().ToList();
    var titleElement = taskElements.FirstOrDefault(x => x.Name == "Title");
    var descElement = taskElements.FirstOrDefault(x => x.Name == "Description");
    if (titleElement != null)
        textBox12.Text = titleElement.InnerText;
    if (descElement != null)
        textBox11.Text = descElement.InnerText;
} 
```

但我认为你的作家有问题。你写的一定比你告诉我们的要多，否则你不会有多个根节点的问题。您遗漏了任何代码吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T16:16:03.007

您的 XML 生成看起来不错。它仅在根元素上创建。但我猜你的意图是让 XML 存储多个任务。您必须创建一个类似于此的 XML：

```
<Tasks>  <!-- The actual root -->
    <Task>
        <Title></Title>
        <Description></Description>
        <Date></Date>
    </Task>
    <Task>
        <Title></Title>
        <Description></Description>
        <Date></Date>
    </Task>
    ...
</Tasks> 
```

# json - 获取json对象

> ID：10639383
> 
> 赞同：2
> 
> 时间：2012-05-17T16:10:19.577
> 
> 标签：json, get

第一次使用json。我目前将邮政编码发送到 php 页面，并尝试将结果存储为 json：

```
 $("#make_ajax_call").click(function()
    {
        var form_postcode = $("#postcode").val();
        $.ajax({
            type: "POST",
            url: 'mapping-ajax.php',
            data: { postcode: form_postcode},
            success: function(data)
            {
                var jsonObject = data;
                var trimmedpostcode = jsonObject.trimmedpostcode;
                alert(jsonObject);
                alert(jsonObject.trimmedpostcode);
                $('#result').html(data);
                //alert('Load was performed.');
            }
        });
    }); 
```

在另一端，我使用 php 函数`echo json_encode($return_array);`

这两个警报给了我：

```
{"trimmedpostcode":"CO125WL","success":true,"outputstring":"CO125WL<br\/>"} 
```

和

```
Undefined 
```

为什么第二个不返回“CO125WL”？我是否需要以某种方式告诉 javascript 它是一个 json 对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T16:15:09.793

你有没有尝试过：

```
dataType: 'json' 
```

这就是我使用 ajax 调用在 Javascript 中提取我的 json 信息的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T16:12:18.923

你说对了。您需要致电：

```
var obj = JSON.parse(jsonstr); 
```

这会将 JSON 解析为 JavaScript 对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T16:14:58.263

> 我是否需要以某种方式告诉 javascript 它是一个 json 对象？

是的，您需要告诉它这是一个*json string*。将您的响应的 mimetype 设置为适当的“ `application/json`”，jQuery 的智能会自动解析文本并`success`使用对象而不是字符串调用您的函数。

或者您可以将`dataType`您的 jQuery 调用设置为`"json"`，请参阅[`jQuery.ajax()`文档](http://api.jquery.com/jQuery.ajax/)。

# android - Android GestureOverlayView 到可绘制区域的边距

> ID：10639386
> 
> 赞同：1
> 
> 时间：2012-05-17T16:10:32.013
> 
> 标签：android

如何在手势视图中限制（给定边距）可绘制区域？可能吗？。

# c# - 如何构建 Lucene Query x AND (y OR z)

> ID：10639391
> 
> 赞同：0
> 
> 时间：2012-05-17T16:10:49.263
> 
> 标签：c#, lucene, lucene.net

我正在尝试为 Lucene 创建一个查询以进行如下搜索

word:"searched_word" AND (category:0 OR category:1)

什么意思 searched_word 必须在 word 字段中，并且 category 字段是 0 或 1。

word字段是普通字段类型类别字段是NumericField类型

```
 BooleanQuery mainQuery = new BooleanQuery();

    Query query1 = new TermQuery(new Term("category", NumericUtils.IntToPrefixCoded(0)));
    Query query2 = new TermQuery(new Term("category", NumericUtils.IntToPrefixCoded(1));

    Query queryTerm= new TermQuery(new Term("word", searchedWord));

    mainQuery.Add(queryTerm, BooleanClause.Occur.MUST);

    BooleanQuery innerOrQuery = new BooleanQuery();

    //How do i add them as OR and as AND to mainQuery
    innerOrQuery.Add(querySingleDirection, BooleanClause.Occur.MUST);
    innerOrQuery.Add(queryBothDirection, BooleanClause.Occur.MUST);
     mainQuery.Add(innerOrQuery, BooleanClause.Occur.MUST);
    TopDocs topDocs = _indexSearcher.Search(mainQuery, Settings.Current.MaximumTopScoreCount); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T17:27:56.053

```
Query queryTerm = new TermQuery(new Term("word", searchedWord));
Query query1 = new TermQuery(new Term("category", NumericUtils.IntToPrefixCoded(0)));
Query query2 = new TermQuery(new Term("category", NumericUtils.IntToPrefixCoded(1));

BooleanQuery innerOrQuery = new BooleanQuery();
innerOrQuery.Add(query1, BooleanClause.Occur.SHOULD);
innerOrQuery.Add(query2, BooleanClause.Occur.SHOULD);

BooleanQuery mainQuery = new BooleanQuery();
mainQuery.Add(queryTerm, BooleanClause.Occur.MUST);
mainQuery.Add(innerOrQuery, BooleanClause.Occur.MUST);

TopDocs topDocs = _indexSearcher.Search(mainQuery, Settings.Current.MaximumTopScoreCount); 
```

# mysql - 创建外键时自动递增会影响吗？

> ID：10639397
> 
> 赞同：0
> 
> 时间：2012-05-17T16:11:18.877
> 
> 标签：mysql, foreign-keys, phpmyadmin, innodb, foreign-key-relationship

我正在使用 InnoDB 并且仍在学习 MYSQL。我正在尝试将歌曲链接到专辑。我的数据库中有什么东西导致了这个问题吗？下面是我的表。

```
 Albums
•   albumID – int(11)
•   albumpic – varchar(255)
•   albumthpic – varchar(255)
•   albumTitle – varchar(255)
•   performer – varchar(255)
•   type – set (ex: ep, sp, studio)
•   titletrack – varchar(255)
•   genre
•   releasedate – date
•   distributor – varchar(255)
•   page – varchar(255)
Songs
•   songID – int(11)
 albumID - int(11)
•   albumpic – varchar(255)
•   tracknum – int(11)
•   songTitle – varchar(255)
•   performer – varchar(255)
•   album – varchar(255)
•   page – varchar(255) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T16:19:49.247

假设每首歌（可选）属于一张专辑；在这种情况下，`Songs`表需要一个外键来引用`Albums`表中的相关记录。例如，您可以添加一`albumID`列：

```
ALTER TABLE Songs
  ADD COLUMN albumID int(11) [NOT] NULL,
  ADD INDEX (albumID),
  ADD FOREIGN KEY (albumID) REFERENCES Albums (albumID); 
```

如果个别歌曲可能与多个专辑相关，您需要创建第三个表，其中包含两个外键 - 歌曲的外键和相关专辑的外键（例如`songID`和`albumID`）：

```
CREATE TABLE AlbumSongs (
  songID  int(11) NOT NULL,
  albumID int(11) NOT NULL,
  PRIMARY KEY (songID, albumID),
  INDEX (albumID),
  FOREIGN KEY (songID)  REFERENCES Songs  (songID),
  FOREIGN KEY (albumID) REFERENCES Albums (albumID)
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T16:24:20.303

不确定您在寻找什么，但如果您正在寻找如何创建外键并链接到主表的 PK，那么您可以这样做：

```
create table Songs
(songID int(11) int not null auto_increment primary key,
albumpic varchar(255),
tracknum int(11),
songTitle varchar(255), 
performer varchar(255),
album varchar(255),
page varchar(255),
albumID int(11),
foreign key (albumID) references Albums (albumID) on delete cascade) 
```

# tomcat - 使用maven tomcat插件部署不同模块产生的war

> ID：10639400
> 
> 赞同：1
> 
> 时间：2012-05-17T16:11:20.047
> 
> 标签：tomcat, maven

我有这个项目结构，其中我有一个父 pom，其中包括 moduleA、moduleB 和 moduleTest。

模块A 和模块B 各自产生一个战争，比如说warA 和warB。

我使用maven依赖插件将warA和warB复制到moduleTest中。然后我想使用maven tomcat插件开始战争。

不幸的是，我有这两个困境：如果我用war包标签声明moduleTest，那么tomcat插件会寻找一个名为warTest的文件来启动tomcat，即使我明确地将webapp的路径指向warA或warB。我最终得到一个构建失败，说找不到战争文件

如果我用 jar 的包标签声明 moduleTest，那么 tomcat 插件仍然会寻找 warTest，但没有看到它，并且最终记录，跳过非战争项目。

我已经读过可以欺骗 maven 战争插件不为模块产生战争，因此这应该迫使 tomcat 接受我告诉它接受的任何战争，但我无法让它工作。

以前有人必须这样做吗？

* * *

答：我结束了使用 morbay 的 jetty maven 插件，现在我可以选择任何战争文件。但是当我尝试执行 run 目标时，出现以下错误：

```
INFO: FrameworkServlet 'spring': initialization completed in 4017 ms
2012-05-18 11:42:57.499:INFO::Started SelectChannelConnector@0.0.0.0:8180
2012-05-18 11:42:57.500:INFO::Started SelectChannelConnector@0.0.0.0:8380
[INFO] Started Jetty Server
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 45.296s
[INFO] Finished at: Fri May 18 11:42:57 PDT 2012
[INFO] Final Memory: 32M/81M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.mortbay.jetty:jetty-maven-plugin:7.1.3.v20100526:run  
(start-    container) on project functional-test: Failure: Permission denied -> [Help 1]
[ERROR] 
```

有人知道它会被拒绝吗？我使用连接器为每个战争设置端口号。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T17:21:24.907

您可以使用[tomcat:deploy-only目标并在](http://mojo.codehaus.org/tomcat-maven-plugin/deploy-only-mojo.html)[warFile](http://mojo.codehaus.org/tomcat-maven-plugin/deploy-only-mojo.html#warFile)配置参数中指定您的战争文件的路径。

# python - python中的ssl证书认证

> ID：10639402
> 
> 赞同：0
> 
> 时间：2012-05-17T16:11:26.523
> 
> 标签：python, ssl, ssl-certificate

我得到了以下代码，应该执行 ssl 握手和证书身份验证：

```
1   s = socket.socket()
2   print "connecting..."
3   logging.debug("Connecting")
4   # Connect with SSL mutual authentication
5   # We only trust our server's CA, and it only trusts user certificates signed by it
6   c = ssl.wrap_socket(s, cert_reqs=ssl.CERT_REQUIRED,
7                       ssl_version=ssl.PROTOCOL_SSLv3, ca_certs='ca.crt',
8                       certfile='user.crt', keyfile='user.key')
9   c.connect((constants.server_addr, constants.port)) 
```

我对此有两个问题：

1.  我们在哪里指定我们连接的服务器/端口？这些论据是`socket.socket()`什么？
2.  我有一个 .p12，从中提取了一个 pem 格式的证书和一个密钥（请参阅[这个问题](https://stackoverflow.com/questions/10504195/https-handshake-with-keystores-in-python/10508130#10508130)），我假设它们分别对应于`user.crt`和`user.key`（第 8 行）。但是，虽然我假设`ca.crt`（第 7 行）是从证书颁发机构检索的，但如何检索它？

如果上述代码的任何部分或我对它的假设不正确，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T16:17:13.433

1.  服务器地址和端口被指定为第 9 行中套接字地址的一部分，指定为 的参数`connect`。

2.  通常，您已通过某种带外方法获取 CA 证书，然后将其保存在本地。`/etc/ssl/certs`Linux 系统通常具有一系列证书，用于在或类似下可用的知名、受信任的 CA。

# sharepoint - Sharepoint 工作流依赖项

> ID：10639413
> 
> 赞同：0
> 
> 时间：2012-05-17T16:12:12.137
> 
> 标签：sharepoint, sharepoint-2010, workflow, sharepoint-workflow

我需要为列表创建工作流。

该列表接受： - 位置（下拉） - 链接到位置列表中的位置选择 - 部门（下拉） - 链接到部门列表中的部门选择 - 其他不相关的信息

我需要向位置联系人发送电子邮件以获得批准 我想创建一个工作流，该工作流读取选择的位置并为该位置提取位置联系人（位于位置列表中）并发送批准电子邮件。

完成后，我需要一个接受或拒绝选项，接收电子邮件的人可以检查。

如果被接受，我需要向部门联系人（位于部门列表中）发送电子邮件。如果被拒绝，则列表项将被删除。

完成后，我需要一个接受或拒绝选项，以便收到第二封电子邮件的人可以检查。

如果他接受，则将提交请求，如果不接受，则我想删除该请求。

我知道这是漫长而困难的，但如果有人对此有任何想法，将不胜感激。

谢谢，

蒂姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T07:46:58.283

You should be able to do what you want to do using SharePoint designer for your workflow. Take a look at the following [article](http://msdn.microsoft.com/en-us/library/cc627286%28v=office.12%29.aspx). If you are using SharePoint Workflow 2010 then you can customize the approval workflow out of the box. Check out this [article](http://sharepoint.microsoft.com/Blogs/GetThePoint/Lists/Posts/Post.aspx?ID=420). Pretty cool!

![enter image description here](../Images/b950e8bdde3c24ee96ecd5b2ef6c9f3e.png)

# macos - 我在哪里可以找到 Mac OS X 示例程序 MoreSCF？

> ID：10639415
> 
> 赞同：1
> 
> 时间：2012-05-17T16:12:17.313
> 
> 标签：macos

我在 Mac OS X 和 Technical Q&A QA1165 上玩 SystemConfiguration，示例代码使用了一个宏**MoreSCError**，它应该在示例程序**MoreSCF**中定义- 我在 Xcode 文档或 Apple Developer Site 上找不到此示例代码.

有谁知道我在哪里可以找到代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T09:55:19.720

你可以在这里找到你需要的源代码

[https://developer.apple.com/legacy/library/samplecode/MoreSCF/Introduction/Intro.html](https://developer.apple.com/legacy/library/samplecode/MoreSCF/Introduction/Intro.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T16:29:05.967

我正在这里的机器上查看 MoreSCF.c，它*真的很旧*。我拥有的版本是“修订版 1.5”，日期为 2002 年。

您无法在 Apple 的开发人员网站（或 Google）上轻松找到它的事实可能表明 Apple 宁愿开发人员***不要***使用此代码。Macintosh 仍然非常支持系统配置框架，但我想不出是什么取代了 MoreSCF（就示例代码而言）。找到 MoreSCF 替代品并使用它可能值得您的文件。

但是...为了帮助您，我正在制作我可以通过 PasteBin 获得的 MoreSCF.h 和 MoreSCF.c 示例代码。我会将它设置为在一个月内过期，因此如果您在 30 天结束前未取回它，您将成为 SOL 即使这是公开的、可再分发的源代码，如果有人要求我删除链接（特别是如果他们说出更新的源或示例项目是什么），我将在 30 天之前将其删除。这两个文件来自 MoreSCF 项目，该项目有大约 10 个左右的各种 C 文件，用于简化系统配置。

以下是链接：

[更多SCF.h 更多](http://pastebin.com/HPRQkFEs) [SCF.c](http://pastebin.com/ALQdTzrU)

# objective-c - 使用 NSTask 执行 shell 命令时通过 NSPipe 输出的奇怪问题

> ID：10639418
> 
> 赞同：0
> 
> 时间：2012-05-17T16:12:27.757
> 
> 标签：objective-c, shell, command, nstask, nspipe

这是我的代码。当我设置`myCmd=@"cd /\nls -l\n"`or`myCmd=@"ls -l\n"`时，没问题。但是，当我设置时`myCmd=@"cd /\n"`，程序已死在行中`if ((output =[[outPipe fileHandleForReading] availableData]) && [output length])`，并且没有任何调试信息输出。

我不知道`"cd /"`cmd 是否与其他 shell 命令不同。你能给我一些建议吗？

```
NSData *inputData = [myCmd dataUsingEncoding:NSUTF8StringEncoding];
NSPipe *inPipe = [NSPipe pipe];
NSFileHandle *fh = [inPipe fileHandleForWriting];
[fh writeData: inputData];
NSPipe *outPipe = [NSPipe pipe];
//NSPipe *errPipe = [NSPipe pipe];
NSTask *task = [[NSTask alloc] init];
[task setStandardInput:inPipe];
[task setStandardOutput:outPipe];
[task setStandardError:outPipe];
[task setLaunchPath:@"/bin/sh"];
NSArray *args = [NSArray arrayWithObject:@"-s"];
[task setArguments:args];

[task launch];

NSData *output;
NSString *string;

if ((output =[[outPipe fileHandleForReading] availableData]) && [output length]) 
{
    string = [[NSString alloc] initWithFormat:@"%.s", [output bytes]];
}
NSLog(@"%@", string); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T16:24:54.250

> 我不知道`cd /`cmd 是否与其他 shell 命令不同。

它与 fromm 的不同之处`ls -l`在于它不写任何输出。您的程序可能在调用`-availableData`.

* * *

不幸的是，我没有时间尝试任何想法，但这里有一些您可以尝试的方法。

*   您可以尝试启动任务，然后将数据发送到输入管道，然后关闭输入管道。当任务看到输入结束时，它将关闭输出管道，这意味着您的调用`-availableData`将返回文件结尾。

*   您可以使用运行循环异步读取输出。这更加灵活，因为您不必一次发送所有命令。完成后，您仍然需要关闭输入。

*   您可以在 NSOperation 中读取输出，从而有效地将其放在不同的线程上。同样，您仍然需要在完成后关闭输入管道。

顺便说一句，我应该指出，`cd`作为最后一件事发送到 shell 是没有意义的操作。接下来发生的事情是 shell 退出并且`cd`结果丢失。如果您的目标是更改当前进程中的目录，请查看[[NSFilemanager changeCurrentDirectoryPath:]](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/nsfilemanager_Class/Reference/Reference.html#//apple_ref/occ/instm/NSFileManager/changeCurrentDirectoryPath%3a)

# c++ - ifstream 返回空字符串？

> ID：10639420
> 
> 赞同：0
> 
> 时间：2012-05-17T16:12:35.513
> 
> 标签：c++, visual-c++

读取内容为“aaaaa”且 char* 文本返回“”的文件。

在步骤执行之后显示它在结束和结束之前通过 fp>>文本行一次。文件正确打开。有任何想法吗？

```
char* Load_Wave_File(char *fname)
{
    std::ifstream fp(fname,std::ios::binary);

    std::streampos fsize=0;
    fsize=fp.tellg();
    fp.seekg(0,std::ios::end);
    fsize=fp.tellg()-fsize;

    char* text;
    text=new char[fsize];
    if(fp.is_open())
    {
        while(!fp.eof())
        {
            fp>>text;
        }
        fp.close();
        return text;
    }
    else
    {
        fp.close();
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T16:16:34.120

您已经使用以下行将读取指针移到了文件末尾：

```
fp.seekg(0,std::ios::end); 
```

您需要将其重置为开始。你可以这样做：

```
fp.seekg(0,std::ios::beg); 
```

# linq - Linq 未按正确顺序提供数据

> ID：10639422
> 
> 赞同：1
> 
> 时间：2012-05-17T16:12:39.533
> 
> 标签：linq

我在使用 linq 查询时遇到问题。我使用 proc 从数据库中获取大约 600000 条记录。对于每个输入，我都使用 LINQ 对其进行过滤。使用 LINQ 查询对其进行过滤后，数据行的顺序不会保持不变。以前有人遇到过这个问题吗？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T16:19:39.487

> 使用 LINQ 查询对其进行过滤后，数据行的顺序不会保持不变。

大多数 LINQ 运算符不保证顺序。如果您想要有保证的排序，您应该使用`OrderBy`按适当的列专门对查询结果进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T16:15:33.680

如果您没有指定订单并且您的数据库有多个处理器，那么就无法保证订单在调用之间保持一致。

如果您不订购数据，数据库引擎可以将请求发送到多个线程，并在每个线程处理结果时聚合结果。如果服务器可以同时处理线程，那么该顺序将是不确定的。

从好的方面来说，您知道您正在尽快获取数据。

**编辑**

Linq 的实现也是如此。如果未指定顺序，则框架可以自由地以枚举正确结果的任何方式执行语句。

# aptana - Aptana sftp 连接失败

> ID：10639424
> 
> 赞同：2
> 
> 时间：2012-05-17T16:12:45.613
> 
> 标签：aptana, sftp, aptana3

我正在尝试连接到 sftp，但出现错误：建立 sfpt 连接失败：主机签名无效或主机密钥未被接受。知道如何进行这项工作吗？我正在使用 filezilla 和 fugu 就好了。只是aptana不起作用。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T09:11:23.007

我正在使用 Aptana Studio 3，并且在 OS X 中遇到了同样的错误（尽管您没有指定 OS）。就我而言，它反对是因为我启动了一个新服务器，因此远程服务器的 ssh 签名已更改，因此“*主机签名无效*”。

如果你去那里有一个*已知主机*`Preferences -> General -> Network Connections -> SSH2`的选项卡，它似乎是从文件中填充的。*`~/.ssh/known_hosts`*

 *这是远程主机签名列表，您应该在此列表中找到您的远程主机。

这里有一个*删除*按钮，它将从列表中删除主机，但再次弹出对话框显示它根本没有被删除！

看起来列表在启动时已填充，并且“*删除*”按钮不起作用。我能让这个工作的唯一方法是：

*   在 Aptana 之外编辑`~/.ssh/known_hosts`文件并删除特定的主机密钥。
*   重新启动 Aptana*

# linux - Emacs、Linux 和国际键盘布局

> ID：10639429
> 
> 赞同：18
> 
> 时间：2012-05-17T16:13:03.710
> 
> 标签：linux, emacs, internationalization, keyboard

当您使用非英语（俄语）键盘布局时，是否有一种简单的方法来使用 Emacs 键绑定？

每当打开国际布局时，所有击键都按字面意思解释，M-ф 而不是 Ma。结果我不能使用命令。

如果 Linux 可以根据国际布局解释无前缀和带移位前缀的键，同时保留其余的英文，那也很好。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-17T17:57:02.283

您可以通过键入设置输入法（荣誉转到*kindahero*）

```
M-x set-input-method RET cyrillic-yawerty RET 
```

或者

```
M-x set-input-method RET cyrillic-jcuken RET 
```

* * *

要永久存储它，请添加

```
(setq default-input-method "cyrillic-yawerty") 
```

到*~/.emacs*配置（并用于`C-\`在键盘布局之间切换）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-05T02:18:20.563

这是基于 syndikat 回答的使用操作系统语言的替代解决方案。

缺少一些关键的翻译，但应该很容易添加它们。

```
;; USAGE:
;; Put in your .emacs:
;; 
;; (translate-keystrokes-ru->en)
;; (add-hook 'text-mode-hook
;;           (lambda () (literal-insert-mode 1)))
;; 
;; Only buffers with literal-insert-mode active will be sensitive to the
;; environment language. Prefixed keybindings will still be usable.

(defun translate-keystrokes-ru->en ()
  "Make emacs output english characters, regardless whether
the OS keyboard is english or russian"
  (flet ((make-key-stroke (prefix char)
           (eval `(kbd ,(if (and (string-match "^C-" prefix)
                                 (string-match "[A-Z]" (string char)))
                            (concat "S-" prefix (string (downcase char)))
                            (concat prefix (string char)))))))
    (let ((case-fold-search nil)
          (keys-pairs (mapcar* 'cons
                               "йцукенгшщзхъфывапролджэячсмитьбюЙЦУКЕНГШЩЗХЪФЫВАПРОЛДЖ\ЭЯЧСМИТЬБЮ№"
                               "qwertyuiop[]asdfghjkl;'zxcvbnm,.QWERTYUIOP{}ASDFGHJKL:\"ZXCVBNM<>#"))
          (prefixes '(""    "s-"    "M-"    "M-s-"
                      "C-"  "C-s-"  "C-M-"  "C-M-s-")))
      (mapc (lambda (prefix)
              (mapc (lambda (pair)
                      (define-key key-translation-map
                          (make-key-stroke prefix (car pair))
                        (make-key-stroke prefix (cdr pair))))
                    keys-pairs))
            prefixes))))

(defun literal-insert ()
  (interactive)
  (insert-char last-input-event 1))

(define-minor-mode literal-insert-mode
    "Make emacs output characters corresponging to the OS keyboard,
 ignoring the key-translation-map"
  :keymap (let ((new-map (make-sparse-keymap))
                (english-chars "qwertyuiop[]asdfghjkl;'zxcvbnm,.QWERTYUIOP{}ASDFGHJKL:\"ZXCVBNM<>#"))
            (mapc (lambda (char)
                    (define-key new-map (string char)
                      'literal-insert))
                  english-chars)
            new-map)) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-03T17:42:48.957

不确定，[sabof 哪来](https://stackoverflow.com/users/735243/sabof)的 1500 亿。我运行了这段代码（感谢 Yuri Khan，取自[EmacsWiki](http://www.emacswiki.org/emacs/GnuEmacsRussification)）：

```
(loop
 for from across "йцукенгшщзхъфывапролджэячсмитьбюЙЦУКЕНГШЩЗХЪФЫВАПРОЛДЖ\ЭЯЧСМИТЬБЮ№"
 for to   across "qwertyuiop[]asdfghjkl;'zxcvbnm,.QWERTYUIOP{}ASDFGHJKL:\"ZXCVBNM<>#"
 do
 (eval `(define-key key-translation-map (kbd ,(concat "C-" (string from))) (kbd ,(concat     "C-" (string to)))))
 (eval `(define-key key-translation-map (kbd ,(concat "M-" (string from))) (kbd ,(concat     "M-" (string to)))))) 
```

它只有 128 种组合。不幸的是，像单个字母这样的组合`C-x b`不起作用。我仍在努力寻找更好的解决方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-02-12T10:05:47.817

我对西里尔文键盘使用以下代码段，它对我来说很好用：

```
(defun reverse-input-method (input-method)
  "Build the reverse mapping of single letters from INPUT-METHOD."
  (interactive
   (list (read-input-method-name "Use input method (default current): ")))
  (if (and input-method (symbolp input-method))
      (setq input-method (symbol-name input-method)))
  (let ((current current-input-method)
        (modifiers '(nil (control) (meta) (control meta))))
    (when input-method
      (activate-input-method input-method))
    (when (and current-input-method quail-keyboard-layout)
      (dolist (map (cdr (quail-map)))
        (let* ((to (car map))
               (from (quail-get-translation
                      (cadr map) (char-to-string to) 1)))
          (when (and (characterp from) (characterp to))
            (dolist (mod modifiers)
              (define-key local-function-key-map
                (vector (append mod (list from)))
                (vector (append mod (list to)))))))))
    (when input-method
      (activate-input-method current))))

(reverse-input-method 'russian-computer) 
```

除了：

> 我知道的唯一问题是 OrgTable 公式的重新计算在俄语布局中不起作用，因为它被映射到 Cc-* 并且 * 更改了它的位置。

[来源](https://www.alexkorablev.com/emacs-got-keys.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T19:32:42.247

如果您想在 Emacs 中继续使用俄语布局（而不是使用 Emacs 自己的输入法），我现在知道的唯一方法是添加表单的绑定：

```
(define-key function-key-map [?\M-ф] [?\M-a]) 
```

这将告诉 Emacs，如果 M-ф 没有绑定，它应该尝试查找 Ma。可悲的是，您将需要很多这样的绑定。如果有人编写了一个可以自动提供所有这些绑定的补丁/包，我很乐意将它包含在 Emacs 中。

# macos - 如何使用 Cocoa 或其他任何东西在 Mac OS X 10.6 上同时使用 USB 扬声器和内置音频扬声器？

> ID：10639432
> 
> 赞同：3
> 
> 时间：2009-12-23T06:21:01.407
> 
> 标签：macos, osx-snow-leopard, usb, audio

如何使用 Cocoa 或其他任何东西在 Mac OS X 10.6 上同时使用 USB 扬声器和内置音频扬声器？

我想在 Mac OS X 10.6 上同时使用内置扬声器和 USB 扬声器。

我想在这些上播放不同的文件（我不想在两个扬声器上播放相同的文件）。

是否可以使用 Cocoa 或其他任何东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-12-23T06:41:24.643

以编程方式，可以使用像[portaudio](http://portaudio.com/)这样的库- 您打开两个不同的流（使用 Pa_OpenStream），您会得到两个不同的回调，用于注入音频数据。

我确信也可以使用 Core Audio，但这更复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-04-03T16:34:13.123

[Rogue Amoeba 的 Airfoil](http://rogueamoeba.com/airfoil/mac/)可以将音频流从单个应用程序重定向到例如机场快线，而将其他音频留给系统扬声器。我没有 USB 音频设备来测试您的特定应用程序，但您可以免费试用。

# jquery - 如何将自动上传选项设置为 Jquery 文件上传

> ID：10639435
> 
> 赞同：6
> 
> 时间：2012-05-17T16:13:20.997
> 
> 标签：jquery, file, upload

我正在尝试将 autoUpload 标志设置为[jQuery File Upload](https://github.com/blueimp/jQuery-File-Upload)。所以我尝试`jquery.fileupload.js`以这种方式编辑：

```
(function (factory) {
    'use strict';
    if (typeof define === 'function' && define.amd) {
        // Register as an anonymous AMD module:
        define([
            'jquery',
            'jquery.ui.widget'
        ], factory);
    } else {
        // Browser globals:
        factory(window.jQuery);
    }
}(function ($) {
    'use strict';

    // The FileReader API is not actually used, but works as feature detection,
    // as e.g. Safari supports XHR file uploads via the FormData API,
    // but not non-multipart XHR file uploads:
    $.support.xhrFileUpload = !!(window.XMLHttpRequestUpload && window.FileReader);
    $.support.xhrFormDataFileUpload = !!window.FormData;

    // The fileupload widget listens for change events on file input fields defined
    // via fileInput setting and paste or drop events of the given dropZone.
    // In addition to the default jQuery Widget methods, the fileupload widget
    // exposes the "add" and "send" methods, to add or directly send files using
    // the fileupload API.
    // By default, files added via file input selection, paste, drag & drop or
    // "add" method are uploaded immediately, but it is possible to override
    // the "add" callback option to queue file uploads.
    $.widget('blueimp.fileupload', {

        options: {
            // The namespace used for event handler binding on the dropZone and
            // fileInput collections.           
            // If not set, the name of the widget ("fileupload") is used.
            namespace: undefined,
            autoUpload:true,
            .
            .
            . 
```

并`main.js`以这种方式：

```
$(function () {
    'use strict';

    // Initialize the jQuery File Upload widget:
    $('#fileupload').fileupload();

    // Enable iframe cross-domain access via redirect option:
    $('#fileupload').fileupload(
        'option',
        'redirect',
        window.location.href.replace(
            /\/[^\/]*$/,
            '/cors/result.html?%s'
        )
    );

    if (window.location.hostname === 'blueimp.github.com') {
        // Demo settings:
        $('#fileupload').fileupload('option', {
            url: '//jquery-file-upload.appspot.com/',
            maxFileSize: 5000000,
            autoUpload:true,
            .
            .
            . 
```

我可以看穿这个

```
<td class="start">{% if (!o.options.autoUpload) { %}
    <button class="btn btn-primary">
        <i class="icon-upload icon-white"></i>
        <span>{%=locale.fileupload.start%}</span>
    </button>
{% } %}</td> 
```

出现那个开始按钮，所以 o.options.autoUpload 是`false`，但我将它设置为`true`. 我能做些什么？我可以通过哪种方式设置自动上传以在选择时直接上传图像？谢谢！！！！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-18T14:28:11.483

我解决了从插件站点下载的原始示例，我更改了标志`autoUpload:true`，它可以工作:)

# python - Perl 正则表达式的 Python 版本

> ID：10639450
> 
> 赞同：2
> 
> 时间：2012-05-17T16:14:08.800
> 
> 标签：python, regex, perl, scripting

我有这个 Perl 正则表达式，我想将它转换为 Python。

我想要的正则表达式是查找文本并将其转换为大写的搜索和替换。它也必须是第一个出现的结果。Perl 正则表达式：

```
open FILE, "C:/thefile.txt";
while (<FILE>){
    # Converts "foo yadayada bar yadayada"
    #       to "FOO  bar yadayada"
    s/(^.*?)(yadayada)/\U$1/;
    print;
} 
```

我拥有的 Python 正则表达式无法正常工作：

```
import re
lines = open('C:\thefile.txt','r').readlines()
for line in lines:
    line = re.sub(r"(yadayada)","\U\g<1>", line, 1)
    print line 
```

我意识到`\U\g<1>`这是行不通的，因为 Python 不支持`\U`大写字母.. 那我用什么！？！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T16:22:56.377

`re.sub`可以接受一个函数，该函数处理每个匹配对象并返回一个字符串。所以你可以这样做：

```
In [4]: def uppergrp(match):
   ...:     return match.group(1).upper()
   ...: 

In [5]: re.sub("(yada)", uppergrp, "abcyadadef", count=1)
Out[5]: 'abcYADAdef' 
```

在 Python 中使用正则表达式不太方便，但与 Perl 编码人员相比，Python 程序员往往不太热衷于使用正则表达式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T16:23:00.070

sub 的第二个参数也可以是一个函数，这意味着如果 python 中的正则表达式语言不能完成你想要的（或者至少让它变得非常困难），你可以定义你自己的函数来代替。

例如。

```
re.sub(pattern, lambda x: x.group(1).upper(), string) 
```

编辑：函数被传递了一个[MatchObject](http://docs.python.org/library/re.html#re.MatchObject)

# c# - 基于 ParentId 的 XML 到树视图

> ID：10639455
> 
> 赞同：0
> 
> 时间：2012-05-17T16:14:49.953
> 
> 标签：c#, asp.net, xml, vb.net

我有一个这样的 XML：

```
<table name="tblcats">
<row>
        <Id>1741</Id>
        <Industry>Oil &amp; Gas - Integrated</Industry>
        <ParentId>1691</ParentId>
    </row>
    <row>
        <Id>1690</Id>
        <Industry>Commodities</Industry>
        <ParentId>1691</ParentId>
    </row>
    <row>
        <Id>1691</Id>
        <Industry>Capital Goods</Industry>
        <ParentId>0</ParentId>
    </row>
</table> 
```

我想从此XML创建一个Treeview，以便表是父节点，然后节点ParentId 0是第二个父节点，然后是父ID大于0的子节点

像这样：

+Table +Capital Goods 商品 石油和天然气 - 综合

我怎样才能做到这一点？请建议

问候， 阿西夫·哈米德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T21:45:47.713

一个相当简单的方法是使用标准的 ASP.NET 控件 XmlDataSource 和 TreeView 并使用 XSLT 转换文件将您拥有的 XML 转换为 TreeView 控件喜欢的东西。

因此，假设您在名为 cats.xml 的文件中有上述 XML，ASP.NET 页面标记将如下所示：

```
<asp:XmlDataSource ID="CatsXml" runat="server" DataFile="~/cats.xml" TransformFile="~/cats.xslt"></asp:XmlDataSource>
<asp:TreeView ID="CatsTree" runat="server" DataSourceID="CatsXml">
    <DataBindings><asp:TreeNodeBinding TextField="name" ValueField="id" /></DataBindings>
</asp:TreeView> 
```

XSLT 文件 (cats.xslt) 将是：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl">
  <xsl:output method="xml" indent="yes"/>

  <xsl:template match="table">
    <table id="-1" name="Table">
      <xsl:for-each select="/table/row[ParentId = 0]">
        <industry>
          <xsl:attribute name="id">
            <xsl:value-of select="Id"/>
          </xsl:attribute>
          <xsl:attribute name="name">
            <xsl:value-of select="Industry"/>
          </xsl:attribute>
          <xsl:call-template name="industry-template">
            <xsl:with-param name="pId" select="Id" />
          </xsl:call-template>
        </industry>
      </xsl:for-each>
    </table>
  </xsl:template>

  <xsl:template name="industry-template">
    <xsl:param name="pId" />
    <xsl:for-each select="/table/row[ParentId = $pId]">
      <industry>
        <xsl:attribute name="id">
          <xsl:value-of select="Id"/>
        </xsl:attribute>
        <xsl:attribute name="name">
          <xsl:value-of select="Industry"/>
        </xsl:attribute>
        <xsl:call-template name="industry-template">
          <xsl:with-param name="pId" select="Id" />
        </xsl:call-template>
      </industry>
    </xsl:for-each>
  </xsl:template>

</xsl:stylesheet> 
```

斯图尔特。

# ios - iPad DecimalPad Entry - 有什么好的选择吗？

> ID：10639460
> 
> 赞同：0
> 
> 时间：2012-05-17T16:15:03.983
> 
> 标签：ios, ipad, text, keyboard, numeric

iOS 具有“UIKeyboardTypeDecimalPad”键盘类型 - 用于数字输入 - 适用于 iPhone，但似乎不适用于 iPad。我需要一个只有数字和小数点的键盘输入（与 UIKeyboardTypeDecimalPad 给出的相同），我有 2 个问题：

1.  有没有办法让 UIKeyboardTypeDecimalPad 在 iPad 上工作？
2.  如果没有，那么是否有人构建了一个自定义模式或弹出式输入屏幕，提供相同的功能？

注意：我主要关心的不是输入验证，而是易用性。

任何帮助表示赞赏！——迈克 C.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T16:25:57.337

如果您想在 iPad 上拥有一个纯数字键盘，您必须自己构建它并将自定义视图的实例分配给`inputView`文本字段或文本视图的属性。

# c# - 如何在 SQL Server CE 中定义 uniqueidentifier 列

> ID：10639465
> 
> 赞同：0
> 
> 时间：2012-05-17T16:15:24.230
> 
> 标签：c#, database, windows-phone-7

我正在尝试在我的 Windows Phone 7 应用程序中创建本地 SQL Server CE 数据库。

这是 Employee 类，它包含字段的属性，这些字段是用于构建数据库的表和列

我想要：

*   `EmployeeID`将from的类型更改`int`为`uniqueidentifier`和
*   使它成为主键，但我不知道如何。

错误：

> `uniqueidentifier`无法识别（我是否缺少图书馆参考资料？）

```
namespace F5debugWp7LocalDatabase
{
[Table]
public class Employee
{
    public int EmployeeID
    {
        get;
        set;
    }
    [Column(CanBeNull = false)]
    public string EmployeeName
    {
        get;
        set;
    }
    [Column(CanBeNull = false)]
    public string EmployeeAge
    {
        get;
        set;
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T16:22:55.550

使用SQL 字段的`System.Guid`类型。`uniqueidentifier`

要使其成为主键，请添加`IsPrimaryKey=true`到 ColumnAttribute 定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T16:23:44.240

To create my local SQL CE database on windows phone 7 i used LinqToSQL, i generated the database in a separate project then i added it to my Windows Phone project and commented out the two constructors which are not supported in the Windows Phone 7 environment and it works like a charm.

But maybe this will help you too, my ID definitions look like this.

```
[global::System.Data.Linq.Mapping.ColumnAttribute(Storage="_Id", AutoSync=AutoSync.OnInsert, DbType="INT NOT NULL Identity", IsPrimaryKey=true, IsDbGenerated=true)] 
```

# android - 对外部项目的引用不起作用

> ID：10639467
> 
> 赞同：1
> 
> 时间：2012-05-17T16:15:33.810
> 
> 标签：android, android-library

由于我将 android SDK 工具更新为 rev19，我的外部库项目不再通过引用项目可见。通过新的依赖行为，我将 jar 移动到 /libs 文件夹，该文件夹具有与外部 jar 的固定引用。

添加到 LIbProject 的链接

![在此处输入图像描述](../Images/d6d9d74dee6bb06d1906a9318a49fb67.png)

添加了绝对路径的链接

![在此处输入图像描述](../Images/e002b071f946ca24b834181e9f81699c.png)

当属性再次重新打开时，链接似乎已损坏

![在此处输入图像描述](../Images/c4536232af5acdc27de22a18bd51cbeb.png)

此链接对外部 jar 有帮助。[http://tools.android.com/recent/dealingwithdependenciesinandroidprojects](http://tools.android.com/recent/dealingwithdependenciesinandroidprojects)

这就是我所得到的，不是罐子，而是图书馆项目。 [http://code.google.com/p/android/issues/detail?id=27490](http://code.google.com/p/android/issues/detail?id=27490)

现在如何引用外部项目？

**编辑：**

不知何故，对图书馆项目的引用被破坏了。从引用项目中，我添加了指向 LibProject 的链接。项目->属性->Android->库->添加。添加 lib 项目后，重新打开属性显示链接已断开。项目位于不同的逻辑磁盘上。如果项目位于公共根文件夹中，则链接有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T21:45:32.963

存储实际库项目的位置无关紧要，只要您使用**相对链接**来引用它即可。查看[图书馆项目 - 开发注意事项](http://developer.android.com/guide/developing/projects/index.html#considerations)：

> *   ### 图书馆项目存放地点
>     
>     
>     
>     只要应用程序项目可以通过相对链接引用库项目，就应该在哪里存储库项目相对于依赖的应用程序项目没有具体要求。重要的是主项目可以通过相对链接引用库项目。

[在此处](https://stackoverflow.com/questions/10200751/eclipse-will-not-recognize-project-as-library-actionbarsherlock-viewpagerindica)查看我的答案以查看屏幕截图检查“属性”窗口中显示的正确（通过使用相对路径）和损坏（通过使用绝对路径）库引用链接。

# c# - 如何对 SQL 数据库表列中的查询结果求和并在标签中显示结果？

> ID：10639468
> 
> 赞同：1
> 
> 时间：2012-05-17T16:15:36.680
> 
> 标签：c#, sql, label

我想根据我的查询汇总表 ( ) 中 2 列 ( `MilesLadenToll`, `MilesLadenNonToll`)的值`FuelTaxTripSummary`（请参阅下面的 select 语句）。

我是 C# 新手，只能在 DataGridView 中显示查询结果并获取某些列的总计，然后在文本框中显示总计。我想简单地显示总数，而不必在 DataGrid 视图中列出所有查询结果。这样做的最佳方法是什么？我真的很感激工作代码的例子，因为我是 C# 和 SQL 的新手。

我的连接字符串存储在一个全局变量中：

```
dbSettings.dbConnString 
```

我的选择语句的示例是：

```
select MilesLadenToll, MilesLadenNonToll 
from FuelTaxTripSummary 
where WorkMonth >= '10/01/2011' and WorkMonth < '01/01/2012' 
```

谢谢 ：-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T16:23:36.033

您可以利用 SQL[聚合函数](http://en.wikipedia.org/wiki/Aggregate_function)。该`SUM`功能可能特别有用：

```
SELECT 
    SUM(MilesLadenToll) as MilesLadenTollTotal, 
    SUM(MilesLadenNonToll) as MilesLadenNonTollTotal 
FROM FuelTaxTripSummary 
WHERE WorkMonth >= '10/01/2011' and WorkMonth < '01/01/2012' 
```

此查询将提供一个包含两个总计的结果行。

至于如何`Label`用查询结果填充，我对 C# 完全不熟悉，但请看一下[How to add text to a WPF Label in code？](https://stackoverflow.com/q/4902464/851811)并在以下几乎重复的问题[C# SQL SUM value to a label](https://stackoverflow.com/a/4978186/851811)的公认答案中。

正如如何`executeReader`使用[executescalar 填充多个列？](https://stackoverflow.com/q/6291716/851811)`executeScalar`

# html - 如果在条件注释中排除某个版本的 IE 会发生什么？

> ID：10639471
> 
> 赞同：1
> 
> 时间：2012-05-17T16:15:42.310
> 
> 标签：html, internet-explorer

抱歉，我确定这是一个简单的测试，但我现在无法访问 IE，我正在添加一些条件。我知道如果我面前确实有 IE，这将是一个简单的测试。

假设你有

```
<!--[if lt IE 8]>
<body>
<p>Some content</p>
</body>
<![endif]-->
<!--[if (gt IE 8)|!(IE)]><!-->
<body>
<p>Some Different content</p>
</body>
<!--<![endif]--> 
```

这将排除 IE8，因此在理论上/实践中它不会显示任何内容，对吗？再次，对不起，我前面没有 IE，但我需要知道才能有机会接触它。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T16:18:06.220

*   早于 IE8 的版本会显示“一些内容”
*   大于 IE8 的版本会显示“一些不同的内容”
*   版本 8 的 IE 将不显示任何内容。

您应该使用`gte`或`lte`在其中一个条件中包含 IE8。此外，请记住 Internet Explorer 10（即将发布）将不再尊重条件注释。因此，您需要将文档显式推送到 IE9（或更低）模式：

```
<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="x-ua-compatible" content="IE=9" />
    <!-- rest of document --> 
```

这样，浏览器会继续将您的条件评论解释到未来。

进一步阅读：[关于条件注释](http://msdn.microsoft.com/en-us/library/ms537512%28v=vs.85%29.aspx)»条件注释[的语法](http://msdn.microsoft.com/en-us/library/ms537512%28v=vs.85%29.aspx#syntax)

# xcode - 如何允许我的 NSFetchedResultsController 删除行而不是用户？

> ID：10639473
> 
> 赞同：0
> 
> 时间：2012-05-17T16:15:48.360
> 
> 标签：xcode, uitableview, nsfetchedresultscontroller

```
// Override to support conditional editing of the table view.
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the specified item to be editable.
    if ([[fetchedResultsController sections] objectAtIndex:indexPath.section] == 0 ) {
        return NO;
    }
    else {
        return YES;
    }
} 
```

这会阻止我的 NSFetchedResultsController 调用类型为 NSFetchedResultsChangeDelete 的 didChangeObject：

```
- (void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject 
       atIndexPath:(NSIndexPath *)indexPath 
     forChangeType:(NSFetchedResultsChangeType)type 
      newIndexPath:(NSIndexPath *)newIndexPath {

    switch (type) {
        case NSFetchedResultsChangeInsert:
            [self.tableView  insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath]
                                   withRowAnimation:UITableViewRowAnimationFade]; 
            break;
        case NSFetchedResultsChangeUpdate:
            [self configureCell:(CustomScheduleTableViewCell *)[self.tableView cellForRowAtIndexPath:indexPath]
                    atIndexPath:indexPath];
            break;
        case NSFetchedResultsChangeDelete:
            [self.tableView  deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] 
                                   withRowAnimation:UITableViewRowAnimationFade]; 
            break;
        case NSFetchedResultsChangeMove:
            [self.tableView  deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] 
                                   withRowAnimation:UITableViewRowAnimationFade]; 
            [self.tableView  insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath] 
                                   withRowAnimation:UITableViewRowAnimationFade]; 
            break;      
        default:
            break;
    } 
```

}

如何解决此问题，以使用户无法在此部分中滑动删除行。但是我的程序可以来自后台线程吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T16:54:52.407

该`- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath`方法仅用于允许用户交互编辑。如果您不想这样做，请摆脱此方法。

# c++ - QML/C++ 编译错误

> ID：10639474
> 
> 赞同：0
> 
> 时间：2012-05-17T16:15:49.937
> 
> 标签：c++, qml

我们在 QML 项目中使用 C++ 类（头文件和源代码）作为插件（使用 QtCreator 作为我们的 IDE）。

我们不断收到此错误：

```
erreur : undefined reference to `_imp___ZN16QDeclarativeItemC2ERKS_' 
```

我们如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T17:06:17.217

您需要链接 Qt 的声明性库。有关详细信息，请参阅[文档](http://doc-snapshot.qt-project.org/4.8/qtdeclarative.html#details)。

# c# - 是否有一种非笨拙的方法来使用绑定数据执行特殊情况格式化？

> ID：10639477
> 
> 赞同：2
> 
> 时间：2012-05-17T16:16:01.283
> 
> 标签：c#, winforms, datetime, data-binding, formatting

我将表单上的许多控件绑定到从方法调用返回的对象，如下所示：

```
textBoxMoonBeam.DataBindings.Add(new Binding("Text", pi, "MoonBeam")); 
```

*注意：“pi”是 PlatypusInfo 类的实例化名称。*

...但是当我获取 dateTime 值时，根据定义，它包括附加到日期的时间，但我只想在控件中显示日期，我必须避开上面的绑定类型，而是这样做：

```
textBoxDateAztecsFirstSawElvis.Text = pi.DateAztecsFirstSawElvis.ToString("d"); 
```

有没有办法像第一个示例一样绑定我的数据，并且仍然截断日期？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T16:29:23.117

使用绑定源的`Format`事件。

像这样的东西：

```
Binding binding = new Binding("Text", pi, "DateAztecsFirstSawElvis", true);
binding.Format += binding_Format;
textBoxDateAztecsFirstSawElvis.DataBindings.Add(binding);

void binding_Format(object sender, ConvertEventArgs e) {
  e.Value = ((DateTime)e.Value).ToShortDateString();
} 
```

# c# - 带有空值的 WPF CollectionViewSource 排序问题

> ID：10639478
> 
> 赞同：0
> 
> 时间：2012-05-17T16:16:02.107
> 
> 标签：c#, wpf, sorting, collectionviewsource

我有一个collectionviewsource，它的来源是一个可观察的集合，我正在这样排序；

```
_viewSource.SortDescriptions.Add(new SortDescription() { PropertyName ="PropertyName", Direction = ListSortDirection.Ascending }); 
```

这一切都很好，直到我尝试按列表中具有空值的属性进行排序。然后我得到一个 InvalidOperationException，“无法比较数组中的两个元素”

我是否必须实现自己的 IComparer 类才能解决 null 问题，还是我错过了一个技巧？

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T17:11:29.417

是的，要处理空值，您必须写下自己的`custom sorter`实现`IComparer`。可以参考这个以防万一 - [IComparer 示例](https://support.microsoft.com/en-in/kb/320727#bookmark-3)。

* * *

```
private class sortYearAscendingHelper : IComparer
{
   int IComparer.Compare(object a, object b)
   {
      car c1=(car)a;
      car c2=(car)b;
      if(c1.year == null && c2.year == null)
         return 0;
      if(c1.year == null && c2.year != null)
         return -1;
      if(c1.year != null && c2.year == null)
         return 1;
      if (c1.year > c2.year)
         return 1;
      if (c1.year < c2.year)
         return -1;
      else
         return 0;
   }
} 
```

# ios - 如何在 OpenGL ES 中的子像素上绘制三角形？

> ID：10639483
> 
> 赞同：0
> 
> 时间：2012-05-17T16:16:09.737
> 
> 标签：ios, opengl-es, antialiasing

我正在尝试为 OpenGL ES 中两个三角形的缓慢移动设置动画。

虽然我的相位偏移是一个浮点数，在运行循环的每次迭代中都会增加 0.003f，但我的三角形暂时不会移动，然后向右跳一个像素。

```
GLfloat vertices[ ] = {
        rect.origin.x, rect.origin.y + rect.size.height,
        rect.origin.x + rect.size.width, rect.origin.y + rect.size.height,
        rect.origin.x, rect.origin.y,
        rect.origin.x + rect.size.width, rect.origin.y
    };

glVertexPointer(2, GL_FLOAT, 0, vertices);
glDrawArrays(GL_TRIANGLE_STRIP, 0, 4); 
```

我确认这些值是带有小数位的浮点数。例如：0, 0.003, 0.006, ... 0.3, 0.303, 0.306, ... 等等。

因此，OpenGL ES 不会在像素之间缓慢地进行插值，而是直接跳下。当我将顶点设置为 0.5 之类的值时，我会将它们定位在两个像素之间。但是设置为 0.6 没有效果，0.7 也是如此，然后它只是捕捉到下一个像素。好像它正在将这些值四舍五入到完整或可除以 0.5。我想要像素之间的平滑插值，因此当它移动非常缓慢时动画看起来不错。

我必须怎么做才能在子像素之间插入顶点，而不仅仅是捕捉到一个像素？

# javascript - 通过字符串或整数访问数字属性更快？

> ID：10639488
> 
> 赞同：17
> 
> 时间：2012-05-17T16:16:37.787
> 
> 标签：javascript, performance

在 JavaScript 中，您可以使用整数或字符串获取和设置数组的索引和对象的“数字”属性，并获得相同的结果：

```
var a=[], o={};
a[1]    = "foo";  a["1"]   == "foo" // true
a["2"]  = "bar";  a[2]     == "bar" // true
a["-3"] = "baz";  a[-.3e1] == "baz" // true
o[1]    = "foo";  o["1"]   == "foo" // true
o["2"]  = "bar";  o[2]     == "bar" // true
o["-3"] = "baz";  o[-.3e1] == "baz" // true 
```

虽然字符串和数字是可互操作的——无论是获取还是设置——哪个更快（对于数组和对象）？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-17T16:18:52.527

毫不奇怪，对于数组访问，整数比字符串更快。也许令人惊讶的是，它们*也*比对象属性的字符串更快。

## [http://jsperf.com/string-vs-integer-array-indices](http://jsperf.com/string-vs-integer-array-indices)

![在此处输入图像描述](../Images/91e5892ff47852aac47fa01704596b39.png)

## [http://jsperf.com/string-vs-integer-object-indices](http://jsperf.com/string-vs-integer-object-indices)

![在此处输入图像描述](../Images/90a0e0d6c65a93a2796c58ad5c002ba9.png)

# python - 基于外部排名的 SQLAlchemy 查询结果的重新排序

> ID：10639489
> 
> 赞同：1
> 
> 时间：2012-05-17T16:16:38.803
> 
> 标签：python, sqlalchemy

ORM 查询的结果（例如，MyObject.query()）需要根据基于不在数据库中的值（即来自单独的搜索引擎）的排名算法进行排序。这意味着“order_by”将不起作用，因为它只对数据库中的字段进行操作。

但是，我不想将查询结果转换为列表，然后重新排序，因为我想保持向查询添加进一步约束的能力。例如：

```
results = MyObject.query()
results = my_reorder(results)
results = results.filter(some_constraint) 
```

这可以通过 SQLAlchemy 完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T18:40:24.467

恐怕您将无法做到这一点，除非可以从数据库中的对象表和/或相关对象表的字段中派生*排序*。

但是您可以从代码中返回 tuple `(query, order_func/result)`。在这种情况下，查询仍然可以扩展，直到它被执行，然后再重新使用。或者您可以创建一个类似于 - 的小型`Proxy`类，其中将包含此元组，并将查询扩展方法委托给查询，并将查询执行方法（`all(), __iter__`，...）委托给查询并在执行时应用排序。

`MyObject`此外，如果您可以预先计算每个实例的值，您可以`literal`在查询中添加一个包含这些值的列，然后使用`order_by`它进行排序。或者，添加临时表，使用计算的排序值添加行，在查询中加入它并添加排序。但我想这些比它们带来的好处增加了更多的复杂性。

# .net - 如何在我的画布中插入图像？

> ID：10639490
> 
> 赞同：1
> 
> 时间：2012-05-17T16:16:44.257
> 
> 标签：.net, wpf, image, canvas

我想在以下位置添加[图像](http://msdn.microsoft.com/en-us/library/ms610982)`MyCanvas`：

```
public class MyCanvas : Canvas
{
    private VisualCollection children;

    public MyCanvas()
    { this.children = new VisualCollection(this); }

    public void AddVisual(Visual visual)
    { this.children.Add(visual); }

    public void RemoveVisual(Visual visual)
    { this.children.Remove(visual); }

    public void ClearVisuals()
    { this.children.Clear(); }

    protected override int VisualChildrenCount
    {
        get
        { return this.children.Count; }
    }

    protected override Visual GetVisualChild(int index)
    { return this.children[index]; }
} 
```

我试过：

```
my_canvas.Children.Add(my_image);
// or also
my_canvas.AddVisual(my_image); 
```

但`my_image`不会出现。有什么问题，我必须如何解决？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T08:21:56.100

图像没有被渲染，因为我已经覆盖了 GetVisualChild 并且我只返回了我自己的视觉效果。由 Canvas 的子级生成的任何视觉效果都将被忽略。

由于我仍在直接使用视觉效果，因此我可能应该使用[DrawingVisual](http://msdn.microsoft.com/en-us/library/system.windows.media.drawingvisual.aspx)对象和[ImageSource](http://msdn.microsoft.com/en-us/library/system.windows.media.imagesource.aspx)而不是[Image](http://msdn.microsoft.com/en-us/library/ms610982)。在 DrawingVisual 中，我可以简单地使用[DrawingContext.DrawImage](http://msdn.microsoft.com/en-us/library/ms606804.aspx)方法渲染 ImageSource。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T16:40:05.600

您的孩子可能缺少一些关键的属性值，例如它的宽度和高度是否不为零？

您可能希望在设计器中创建一个示例表单，查看它设置的属性，并在您的代码中执行相同的操作。

# ruby-on-rails - 在 RefineryCMS 中为图像添加标签

> ID：10639491
> 
> 赞同：1
> 
> 时间：2012-05-17T16:16:51.360
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, refinerycms

我正在尝试将标签添加到 RefineryCMS 中的图像模型（尝试 1.0.8 和 2.0.4），添加了 attr_accessible :tag_list，需要作为可标记并设置视图，但问题是标签只有在编辑/更新以前上传的图像时保存 - 不是在第一次上传时保存，即使它使用相同的形式......

有任何想法吗？

它发生在我尝试过的每个版本的 Rails 和 Refinery 上......

查看日志时，标签会在帖子中通过，只是没有保存......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T08:48:24.270

我遇到了类似的问题，最终找到了额外属性（在您的情况下为 :tag_list）未保存在新图像上传的原因。

如果您看一下，[`::Refinery::ImageController`](https://github.com/resolve/refinerycms/blob/master/images/app/controllers/refinery/admin/images_controller.rb)您会发现 create 操作实际上是通过以下方式创建图像：

```
unless params[:image].present? and params[:image][:image].is_a?(Array)
    @images << (@image = ::Refinery::Image.create(params[:image]))
else
    params[:image][:image].each do |image|
        @images << (@image = ::Refinery::Image.create(:image => image))
    end
end 
```

`params[:image][:image]`启用多个文件上传时是一个数组（默认情况下是这样）。但是随后该操作仅在创建图像时使用数组值，而忽略其他参数。

我快速编写了以下解决方法，允许在多个图像上传时保存其他参数：

```
unless params[:image].present? and params[:image][:image].is_a?(Array)
    @images << (@image = ::Refinery::Image.create(params[:image]))
else
    images_params = params[:image].dup
    images_params.delete(:image)
    params[:image][:image].each do |image|
        @images << (@image = ::Refinery::Image.create({:image => image}.merge(images_params)))
    end 
```

结尾

它可能不是最优雅的解决方案，但它可以解决问题。

要在您的应用程序中使用它，您必须创建一个装饰器`::Refinery::ImageController`以复制和编辑其中的创建操作。（参见[Refinery's Guides](http://refinerycms.com/guides/extending-controllers-and-models-with-decorators)中的“扩展控制器” ）

# xaml - 如何在 Metro 风格应用程序中解决 XAML 中 webview 控件的 z-index？

> ID：10639493
> 
> 赞同：2
> 
> 时间：2012-05-17T16:16:56.767
> 
> 标签：xaml, windows-8, windows-runtime, winrt-xaml

我创建项目详细信息页面分为 3 行，我将 scrollviewer 放在第 2 行，scrollview 包含两个 pargraph 和 webview，当我滚动页面时，webview 出现在第 3 行意味着它覆盖第 3 行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T16:19:53.400

WebView 遇到[空域](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/23a235a2-b0a3-4161-bc74-c42289c61264)问题。因为它与应用程序的其余部分不在同一个渲染目标中，而是在单独的 HWND 窗口中。除了手动调整 WebView 的大小以使其适合您的边界之外，目前没有其他好的方法。

您可以使用[WebViewBrush](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.webviewbrush.aspx)代替 WebView，但这有其自身的一组限制 - 基本上它只是一个非交互式画笔。它的文档显示了如何使用它来临时显示非交互式页面，同时在其顶部呈现一些其他内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T01:00:02.513

或者，如果你只想显示一个网页，也许可以使用 WebViewBrush。

官方示例代码：[XAML WebView 控件示例](http://code.msdn.microsoft.com/windowsapps/XAML-WebView-control-sample-ada6c1a1/view/SourceCode#content)- ScenarioInput4.ComboBox1_DropDownOpened()

# ruby-on-rails - Rails 3.1 - 从连接表继承值？

> ID：10639494
> 
> 赞同：0
> 
> 时间：2012-05-17T16:16:59.947
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我有以下模型：`Releases`, `Tracks`& 一个`has_many`名为`ReleasesTrack`.

我也有`Product`s （半）成功地继承了发布曲目，其中 Track & Release Id 被复制到`ProductsTrack`has_many_through 连接。

问题是我没有得到正确的位置值。

我目前有这个`ProductsTrack`模型，它似乎工作，但我没有得到我想要的价值。

```
 before_save do
     self.position = self.track.position
 end 
```

我想要的是 has_many_through 连接表 release_tracks 中的位置，而不是轨道表中的位置值。我尝试了以下变体，但没有任何乐趣：

```
 before_save do
    self.position = self.track.releases_track.position
 end 
```

我确实认为在 Tracks 和 ReleasesTracks 中都有一个位置字段可能会导致问题，并且我在两者中都有这个原因是有原因的，但是我已经使用临时字段进行了测试，但事实并非如此。

我认为问题的症结在于结构`self.track.releases_track.position`正确。

或者

我在协会中遗漏了一些东西？

有任何想法吗？

编辑：模型添加（注意，ProductsTrack 实际上是名字不好的 Producttracklisting）

```
class Release < ActiveRecord::Base
  has_many :products, :dependent => :destroy

  has_many :releases_tracks, :dependent => :destroy, :after_add => :position_track
  has_many :tracks, :through => :releases_tracks, :order => "releases_tracks.position"

  accepts_nested_attributes_for :tracks, :reject_if => lambda { |a| a[:name].blank? }, :allow_destroy => :true
  accepts_nested_attributes_for :releases_tracks

  def position_track(track) 
   releases_tracks.each { |t| t.position = t.track.position }
  end

  def track_attributes=(track_attributes)
    track_attributes.each do |attributes|
    tracks.build(attributes)
    artists_tracks.build(attributes)
    end
  end 
end

class Track < ActiveRecord::Base
  has_many :releases_tracks, :dependent => :destroy
  has_many :releases, :through => :releases_tracks

  has_many :producttracklistings, :dependent => :destroy
  has_many :products, :through => :producttracklistings  
end

class ReleasesTrack < ActiveRecord::Base
  belongs_to :release
  belongs_to :track   
end

class Producttracklisting < ActiveRecord::Base
  belongs_to :product
  belongs_to :track

  before_save do
     self.position = self.track.position
  end
end

class Product < ActiveRecord::Base
  belongs_to :release
  has_many :releases_tracks, :through => :release, :source => :tracks      

  has_many :producttracklistings, :dependent => :destroy
  has_many :tracks, :through => :producttracklistings

  accepts_nested_attributes_for :tracks, :reject_if => lambda { |a| a[:name].blank? }, :allow_destroy => :true
  accepts_nested_attributes_for :producttracklistings

  #Below is where a product inherits tracks from the parent release
  before_save do
    self.track_ids = self.releases_track_ids 
  end          
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T13:55:17.617

您的数据模型可能需要清理。它可能比你需要的复杂得多，但是，给定模型，让我们把事情弄清楚。

1.  没有继承。所有的记录模型都继承自 ActiveRecord::Base。
2.  您基本上拥有发布、轨道和产品，发布和轨道之间存在多对多关系，轨道和产品之间存在多对多关系。
3.  此外，products belongs_to 发布和 products has_many :releases_tracks 通过它的发布。

你的问题是

> 我目前在 ProductsTrack 模型中有这个，它似乎工作，但我没有得到我想要的价值。

> 而不是轨道表中的位置值，我想要它的位置，它是 has_many_through 连接表 release_tracks。

您没有列出 ProductsTrack 模型，因此我假设这是 Producttracklisting 类。您想将 producttracklistings 表中的位置字段设置为“*来自它的*has_many_through 连接表 release_tracks 的位置”。

所以答案是你不能这样做，因为给定的 producttracklistings 记录没有一个 release_tracks 记录。producttracklistings 指向 (belongs_to) 轨道记录，但 release_tracks 记录指向轨道记录（而不是相反），因此可以有从 0 到许多的任意数量的 release_tracks 记录，这是您的问题所指的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T19:46:22.490

> 我有以下型号；Releases、Tracks 和一个名为 ReleasesTrack 的 has_many_through 连接

所以你有了

```
class Release < ActiveRecord::Base
  has_many :release_tracks
  has_many :tracks, :through => :release_tracks
end

class Track < ActiveRecord::Base
  has_many :release_tracks
  has_many :releases, :through => :release_tracks
end

class ReleaseTrack < ActiveRecord::Base
  belongs_to :release
  belongs_to :track
end 
```

> 我也有（半）成功继承发布轨道的产品，其中轨道和发布 ID 被复制到 ProductsTrack has_many_through 连接。

```
class Products < ReleaseTrack
  #uses table release_tracks
  #belongs_to :release #from inheritance
  #belongs_to :track #from inheritance
end 
```

> 我目前在 ProductsTrack 模型中有这个，它似乎工作，但我没有得到我想要的价值。

*ProductsTrack 型号是什么？* 您之前的意思是说您有一个继承自发布轨道的 ProductsTrack 吗？

```
class ProductsTrack < ReleaseTrack
  #uses table release_tracks
  #belongs_to :release #from inheritance
  #belongs_to :track #from inheritance

  before_save do
    self.position = self.track.position
  end
end 
```

> 而不是轨道表中的位置值，我想要它的位置，它是 has_many_through 连接表 release_tracks。

到目前为止，我根据您所说的对其进行编码的方式，self.position*是*has_many_through 连接表 release_tracks 中的位置。

# vba - Visio 中的上下文相关帮助

> ID：10639497
> 
> 赞同：1
> 
> 时间：2012-05-17T16:17:06.240
> 
> 标签：vba, visio

在 Visio 中，我正在开发一些形状模具，在 Visio 2010 中，当您将鼠标悬停在母版上时，会出现一个“更多”超链接，可以打开 Visio 帮助。

是否可以连接到那个超链接并显示我自己对那个主人的帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T16:40:21.300

您只需将其添加到母版的帮助字段中（在开发人员 [选项卡] / 形状名称下）。看看这篇文章的详细信息：

[http://msdn.microsoft.com/en-us/library/aa201737%28office.10%29.aspx](http://msdn.microsoft.com/en-us/library/aa201737%28office.10%29.aspx)

# c# - 从本地机器重复加载图片框控件中的图像

> ID：10639501
> 
> 赞同：0
> 
> 时间：2012-05-17T16:17:14.223
> 
> 标签：c#

我有一些 c# 代码从网页获取图像，然后将其下载到我的本地计算机。这是在后台以 1/秒的速度完成的。如果我让这个运行正常，我的图片会正确更新。这些图片基本上是来自相机的馈送。我想将这些图片放入图片框或其他控件中，这样我就可以将图像显示为相机源。但是，当我尝试这样做时，我遇到错误说正在使用该图像，因此我无法将其加载到我的图片框中。有一个更好的方法吗？

谢谢，

```
 byte[] lnBuffer;
                    byte[] lnFile;

                    HttpWebRequest lxRequest = (HttpWebRequest)WebRequest.Create(uri);

                    lxRequest.Credentials = credentials;
                    using (HttpWebResponse lxResponse = (HttpWebResponse)lxRequest.GetResponse())
                    {

                        using (BinaryReader lxBR = new BinaryReader(lxResponse.GetResponseStream()))
                        {
                            using (MemoryStream lxMS = new MemoryStream())
                            {
                                lnBuffer = lxBR.ReadBytes(1024);
                                while (lnBuffer.Length > 0)
                                {
                                    lxMS.Write(lnBuffer, 0, lnBuffer.Length);
                                    lnBuffer = lxBR.ReadBytes(1024);
                                }
                                lnFile = new byte[(int)lxMS.Length];
                                lxMS.Position = 0;
                                lxMS.Read(lnFile, 0, lnFile.Length);
                                lxMS.Close();
                                lxBR.Close();
                            }
                        }
                        lxResponse.Close();
                    }

                            using (System.IO.FileStream lxFS = new FileStream("images/camppic1.jpg", FileMode.Create))
                            {
                                lxFS.Write(lnFile, 0, lnFile.Length);
                                lxFS.Close();

                            } 
```

这是我用来创建文件的。然后在此代码之后以相同的方法执行此操作：

image = Image.FromFile("C:\camppic1.jpg");

```
 pictureBox23.Image = image; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T19:04:08.103

如果您需要该文件，则加载文件内容并复制到 MemoryStream 并使用[Image.FromStream](http://msdn.microsoft.com/en-us/library/93z9ee4x.aspx)。如果您不需要该文件，则可以跳过它并直接从下载中使用 MemoryStream ...（更快，因为不需要访问磁盘。）

# java - Java GetInputStream 方法不返回

> ID：10639504
> 
> 赞同：1
> 
> 时间：2012-05-17T16:17:36.477
> 
> 标签：java, infinite-loop, urlconnection

我有测试代理是 SOCKS 还是 HTTP 类型的 Java 代码，但我注意到当它检查它是否是 SOCKS 时，调用方法后代码不会返回`connection.getInputStream()`。这个问题的原因是什么，我该如何解决？

```
import java.io.*;
import java.net.*;
import java.util.*;
import org.apache.commons.codec.binary.Base64;

public class ProxyChecker {

private final int timeout = (10 * 1000);

public synchronized void check(String ip, int port, String username, String password) {

    try {

        InetSocketAddress proxyAddress = new InetSocketAddress(ip, port);

        URL url = new URL("http://www.my-test-url-here.com/");

        List<Proxy.Type> proxyTypes = Arrays.asList(Proxy.Type.SOCKS, Proxy.Type.HTTP);

        for(Proxy.Type proxyType : proxyTypes) {

            Proxy proxy = new Proxy(proxyType, proxyAddress);

            try {

                long time = System.currentTimeMillis();

                URLConnection connection = url.openConnection(proxy);

                connection.setReadTimeout(timeout);
                connection.setConnectTimeout(timeout);

                connection.setRequestProperty("User-Agent", "My User-Agent");

                if(username != null && password != null) {

                    String encoded = new String(Base64.encodeBase64(new String(username + ":" + password).getBytes()));

                    connection.setRequestProperty("Proxy-Authorization", "Basic " + encoded);
                }

                String line = "";

                // connection.getInputStream() not returning
                System.out.println("Getting InputStream...");

                InputStream in = connection.getInputStream();

                System.out.println("Got InputStream.");

                StringBuffer lineBuffer = new StringBuffer();
                BufferedReader reader = new BufferedReader( new InputStreamReader( in ) );

                while ((line = reader.readLine()) != null) {

                    lineBuffer.append(line);
                }

                String response = lineBuffer.toString();

                System.out.println("Page: " + response);

                reader.close();
                in.close();

                int elapse = (int)(System.currentTimeMillis() - time);

                //If we get here we made a successful connection

                if(proxyType == Proxy.Type.HTTP) {

                    System.out.println("Proxy is Type HTTP");

                } else if(proxyType == Proxy.Type.SOCKS) {

                    System.out.println("Proxy is Type SOCKS");
                }

            } catch (SocketException se) {

                se.printStackTrace();

            } catch (IOException ioe) {

                ioe.printStackTrace();
            }
        }

    } catch(Exception e) {

        e.printStackTrace();
    }
}

public static void main(String args[]) {

    ProxyChecker proxyChecker = new ProxyChecker();

    //proxyChecker.check("127.0.0.1", 8080, "admin", "admin");

    proxyChecker.check("127.0.0.1", 80, null, null);
}
} 
```

# c# - 隔离存储异常：无法创建存储目录。（来自 HRESULT 的异常：0x80131468）

> ID：10639515
> 
> 赞同：4
> 
> 时间：2012-05-17T16:18:30.167
> 
> 标签：c#, .net, windows-server-2008, windows-server-2008-r2, isolatedstorage

我的 .NET 4 应用程序尝试访问 Windows Server 2008 R2 机器上的独立存储 (GetMachineStoreForAssembly) 以获取新的“管理员”帐户时遇到了一个有趣的问题。同一台机器上的其他用户可以正常访问它。应用程序第一次在这个新帐户下运行并尝试访问 IsolatedStorage 时，它​​失败了：

```
 System.IO.IsolatedStorage.IsolatedStorageException: Unable to create the store directory. (Exception from HRESULT: 0x80131468)
   at System.IO.IsolatedStorage.IsolatedStorageFile.GetRootDir(IsolatedStorageScope scope, StringHandleOnStack retRootDir)
   at System.IO.IsolatedStorage.IsolatedStorageFile.InitGlobalsMachine(IsolatedStorageScope scope)
   at System.IO.IsolatedStorage.IsolatedStorageFile.GetRootDir(IsolatedStorageScope scope)
   at System.IO.IsolatedStorage.IsolatedStorageFile.GetGlobalFileIOPerm(IsolatedStorageScope scope)
   at System.IO.IsolatedStorage.IsolatedStorageFile.Init(IsolatedStorageScope scope)
   at System.IO.IsolatedStorage.IsolatedStorageFile.GetStore(IsolatedStorageScope scope, Type applicationEvidenceType) 
```

我尝试通过 Windows 资源管理器浏览到 IsolatedStorage 文件，即 C:\

```
You don't currently have permission to access this folder. Click Continue to permanently get access to this folder. 
```

当我点击 Continue 时，我们的应用程序可以毫无问题地读/写到 IsolatedStorage。

谁能解释这种行为？我们是否应该为新用户分配特定权限，以便他们可以访问独立存储？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-21T03:59:28.373

当我在前一个操作系统之上重新安装新的 Windows 操作系统时，我遇到了同样的行为。如果您有同样的问题，我相信如果您检查文件夹的权限（人民币点击然后“属性”菜单），您会发现未知用户的 SID（类似`S-1-5-21-3626571138-2175758104-1447827851-1013`）。但是这个未知用户是这个文件夹的创建者和所有者，所以你必须用自己替换所有者。所以我猜这个问题是关于`NTFS`而不是.NET，尽管我确信微软在目录浏览方法/对话框方面的实现仍然很差。

无论如何，您可以将孤立的 SID 替换为现有的`setacl`：

```
setacl.exe -on C:\ 
           -ot file 
           -actn trustee -trst "n1:S-**old**-XXX;n2:S-**new**-XXX;ta:repltrst" 
           -rec cont 
```

# java - 如何用另一个 JPanel 替换一个 JPanel？

> ID：10639520
> 
> 赞同：0
> 
> 时间：2012-05-17T16:18:41.733
> 
> 标签：java, swing, jframe

我有一个类迷宫（扩展 JPanel）。我想做一个“新”按钮，用新变量替换这个类的一个变量。

```
 btnNewMaze.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent arg0) {
            maze.repaint();
            maze = new Maze((int) xSpinner.getValue(), (int) ySpinner.getValue());  
            maze.repaint();
        }
    }); 
```

其他按钮工作正常。但这不能正常工作 - 不会重新绘制，方法会引发异常等。我该如何解决这个问题或用另一个代码替换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T16:33:21.860

不知何故，我认为您想要的是当按下按钮时，已经添加到可见容器（例如 JPanel）的迷宫对象被替换为 Maze 的新实例。

如果是这种情况，并且如果这个“迷宫”对象已经添加到容器（例如 JPanel）中，那么，当您执行您提供的代码时，即：***maze = new Maze(...)***，您的旧迷宫对象将保持添加到容器中并且不受影响。该容器仍将保存对旧迷宫对象的内部引用。

事实上，当代码 ***maze = new Maze(...)***被执行时，发生的并不是之前的迷宫对象替换。实际上，发生的情况是您的引用变量***maze***指向新的 Maze() 对象，而旧实例仍然附加到容器。

如果您想要替换已添加到容器中的旧迷宫对象，则应将其从容器中移除并添加新对象。

这一切可能并非如此，但鉴于提供的信息，这是我能够理解的。请给我们更多的细节（整个类或方法、抛出的异常、你到底想要做什么，等等）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T16:20:55.253

我什至没有`JButton`在您提供的代码中看到 a 。如果你想要一个按钮，你需要构造它（就像你做任何其他对象一样），并且可能将它添加到适当的容器中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T16:35:43.570

假设您的`maze`实例已添加到面板中，您必须先将其从面板中删除，然后再将其替换为新实例：

```
this.remove(maze);
maze = new Maze(....);
this.add(maze, ...); 
```

# java - Android startActivity() 适用于一个类，但不适用于另一个

> ID：10639524
> 
> 赞同：0
> 
> 时间：2012-05-17T16:18:49.950
> 
> 标签：java, android, eclipse

我正在开发的应用程序让我很困惑。我目前有三个活动（所有这些活动都在清单中定义），它们都过渡到彼此，即介绍-->活动1-->活动2。从介绍到第一个活动的过渡使用以下方法可以正常工作：

```
public void GOTOGPS(View v)
{
    switch (v.getId()){

    case R.id.button1: startActivity(new Intent(v.getContext(), StreetLightOutageActivity.class));//Jump to StreetLightOutageActivity (main.xml)
    default: break;

    }//switch
}//GOTOGPS 
```

但是，用于转到我的第三个活动的第二个活动“StreetLightOutageActivity”中的方法不起作用：

```
 public void GOTOCAMERA1(View v)
{

    switch (v.getId()){

    case R.id.picturebutton: startActivity(new Intent(v.getContext(), Camera.class));
    default: break;

    }//switch

}//GOTOCAMERA1 
```

LogCat 给了我一个 ActivityNotFoundException：

```
05-17 15:51:41.292: E/AndroidRuntime(534): Caused by: android.content.ActivityNotFoundException: Unable to find explicit activity class {sl.reporter/android.hardware.Camera}; have you declared this activity in your AndroidManifest.xml? 
```

然后是一个 InvocationTargetException，我认为它源于上一个异常：

```
05-17 15:51:41.292: E/AndroidRuntime(534): Caused by: java.lang.reflect.InvocationTargetException 
```

现在真正让我感动的是，如果我修改方法以从我的介绍屏幕转换到我的第二个活动以转到“Camera.class”而不是 StreetLightOutageActivity.class，它可以工作。

最后，这是我的清单，以防万一，

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="sl.reporter"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="15" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.CAMERA" />
<uses-feature android:name="android.hardware.camera" />
<uses-feature android:name="android.hardware.camera.autofocus" />

<application
    android:icon="@drawable/ic_launcher">
     <activity
         android:name=".StreetLightOutageActivity">
     </activity>
     <activity
        android:name=".Camera">
     </activity>
     <activity
        android:name=".Introscreen">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
     </activity>
</application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T16:28:26.713

```
case R.id.picturebutton: startActivity(new Intent(v.getContext(), Camera.class)); 
```

我认为在上面的代码中你想使用`sl.reporter.Camera`类，但错误地你最终使用了`android.hardware.Camera`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T16:25:05.767

您为声称的相机活动类使用了错误的导入：

```
 Unable to find explicit activity class {sl.reporter/android.hardware.Camera}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T16:25:21.193

您可能引用的是 Android 内置的相机类而不是您自己的

确保在你的进口中你没有

```
import android.graphics.Camera; 
```

或者

```
import android.hardware.Camera; 
```

如果是这样，请删除它并确保在导入 Camera 类时它指向您自己的..

前任。

```
import sl.reporter.Camera; 
```

# sql-server - SQL Server Reporting Services 2008：如何在具有可展开或折叠的嵌套行组的表中嵌入子报表

> ID：10639528
> 
> 赞同：1
> 
> 时间：2012-05-17T16:18:56.687
> 
> 标签：sql-server, reporting-services, subreports

我有一个看起来像这样的主要报告（见下文）。它有 2 个行组 + 详细信息组。行组是国家和城市的层次结构，城市最初是隐藏的，但可以从国家字段 (+) 切换。详细信息组包含人口数。现在，我想在数字下方的字段中放置一个子报表（该字段是详细信息组的一部分），这样当城市折叠时，子报表显示国家的数据，而当城市展开时，显示每个城市的子报告以及该城市的数据。

* * *

乡村城市人口

* * *

[+] 丹麦 2050000 *** 子报告到这里！***

* * *

[+] 法国 4025000 *** 子报告到这里！***

* * *

[-]意大利米兰1600000 ***子报告去这里！** **罗马 2300000* ****子报告去这里！** **都灵 1250000* ****子报告去这里！** **总计 5150000* ****子报告去这里！************

 ******* * *

[+] 荷兰 3825000 *** 子报告到这里！***

* * *

[-] 挪威 Kristianstad 320000 *** 子报告去这里！** **拉维克 450000* ****子报告去这里！** **奥斯陆 800000* ****子报告去这里！** **总计 1570000* ****子报告去这里！************

 ******* * *

[+] 西班牙 5250000 *** 子报告到这里！***

* * *

[+] 瑞典 1800000 *** 子报告到这里！***

* * *

总计 23670000 *** 子报表到这里！***

* * *

但是，当我这样做并尝试在 BIDS 的“预览”窗格中测试报告时，我收到错误消息“本地报告处理期间发生错误。对象引用未设置为对象的实例。”。

如果我在“国家/地区”和“城市”行组的“组属性”对话框的“可见性”窗格中设置“隐藏”= False 和“切换项”= 空白，我已经设法使报告工作，包括子报告。所以子报表或者主报表和子报表之间的参数没有问题。但是，一旦我为 City 组打开“可以通过此报告项目切换显示”功能，报告就会以 abv 失败。错误。

有谁能帮忙吗？现在已经为这个问题挣扎了2天......************

# ios - 在 iOS 中绘制多点路线

> ID：10639530
> 
> 赞同：2
> 
> 时间：2012-05-17T16:19:00.723
> 
> 标签：ios, mapkit

我正在尝试在提供的地图应用程序中显示具有多个点的路线。

[我已经想出如何在这篇文章](https://stackoverflow.com/q/4609340/620197)之后显示两点之间的路线。我正在按照[这些指示](http://mapki.com/wiki/Google_Map_Parameters#Directions)构建多个点的列表。

据我了解，打开 maps.google.com（在 iOS 中）将打开地图应用程序（如果地图不可用，则打开 Safari）。

结果是地图应用程序仍然只显示起点和终点之间的路线。添加`mrad`参数的点不显示。

是否可以在 iOS 中显示具有多个目的地的路线（无需构建我自己的地图系统）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T08:37:00.777

对于您的问题，答案是肯定的。

但我会停止试图在那里看起来很聪明。您正在查看错误的 SO 问题和答案。您正在寻找的是一个两步过程：

*   使用 GMaps Directions API 获取航点列表等
*   使用这些点画一条线。

幸运的是，显然有一个 Github 项目可以满足您的需求。我没有使用它，所以我不知道它的质量，但它肯定比我在这里解释如何做要好得多。

[https://github.com/kishikawakatsumi/MapKit-Route-Directions](https://github.com/kishikawakatsumi/MapKit-Route-Directions)

我建议你看看它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-07T05:43:26.310

刚刚使用 Google maps api V3 编写了一个小示例以在 iOS 6+ 上显示方向 [https://github.com/manishnath/iOSPlotRoutesOnMap](https://github.com/manishnath/iOSPlotRoutesOnMap)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-24T05:22:11.673

**这是通过多个位置获取连接路线的简单代码。** 要获得完整的项目，请继续 - [https://github.com/vikaskumar113/RouteWithMultipleLocation](https://github.com/vikaskumar113/RouteWithMultipleLocation)

[![查看结果](../Images/edbe0cdc08a74db791ab2a40db41046c.png)](https://i.stack.imgur.com/7vd9u.png)

```
 NSArray *dictionary = @[
                              @{
                                @"Source_lat": @"28.6287",
                                @"Source_lon": @"77.3208",
                                @"Dest_lat": @"28.628454",
                                @"Dest_lon": @"77.376945",
                                @"S_address": @"Vaishali,Delhi",
                                },
                              @{
                                  @"Source_lat": @"28.628454",
                                  @"Source_lon": @"77.376945",
                                  @"Dest_lat": @"28.5529",
                                  @"Dest_lon": @"77.3367",
                                  @"S_address": @"Noida Sec 63",
                                  },
                              @{
                                  @"Source_lat": @"28.5529",
                                  @"Source_lon": @"77.3367",
                                  @"Dest_lat": @"28.6276",
                                  @"Dest_lon": @"77.2784",
                                  @"S_address": @"Noida Sec 44",
                                  },
                               @{
                                  @"Source_lat": @"28.6276",
                                  @"Source_lon": @"77.2784",
                                  @"Dest_lat": @"28.6287",
                                  @"Dest_lon": @"77.3208",
                                  @"S_address": @"Laxmi Nagar,Delhi",
                                  },

                             ];
     for (int i=0; i<dictionary.count; i++) {
    NSDictionary*dict=[dictionary objectAtIndex:i];
    NSString*S_lat=[dict valueForKey:@"Source_lat"];
    NSString*S_lon=[dict valueForKey:@"Source_lon"];
    NSString*D_lat=[dict valueForKey:@"Dest_lat"];
    NSString*D_lon=[dict valueForKey:@"Dest_lon"];
    NSString*address=[dict valueForKey:@"S_address"];

    NSString* apiUrlStr =[NSString stringWithFormat:@"http://maps.googleapis.com/maps/api/directions/json?origin=%@,%@&destination=%@,%@&sensor=false",S_lat,S_lon, D_lat, D_lon
                          ];

NSData *data =[NSData dataWithContentsOfURL:[NSURL URLWithString:apiUrlStr]];
[self performSelectorOnMainThread:@selector(fetchedData:) withObject:data waitUntilDone:YES];

    CLLocationCoordinate2D coord;
    coord.latitude=[S_lat floatValue];
    coord.longitude=[ S_lon floatValue];
    MKCoordinateRegion region1;
    region1.center=coord;
    region1.span.longitudeDelta=0.2 ;
    region1.span.latitudeDelta=0.2;
    [theMapView setRegion:region1 animated:YES];
    MKPointAnnotation *sourceAnnotation = [[MKPointAnnotation alloc]init];
    sourceAnnotation.coordinate=coord;
    sourceAnnotation.title=address;
    [theMapView addAnnotation:sourceAnnotation];

} 
```

# exception - 撤消删除托管对象时出现异常：“非法尝试在不同上下文中建立对象之间的关系”

> ID：10639531
> 
> 赞同：1
> 
> 时间：2012-05-17T16:19:06.943
> 
> 标签：exception, core-data, undo

除了这个例外，我收到了一些客户的报告：

```
'Illegal attempt to establish a relationship 'titleBox' between objects in different contexts
0   CoreFoundation                      0x96a856ca __raiseError + 410
1   libobjc.A.dylib                     0x921535a9 objc_exception_throw + 56
2   CoreFoundation                      0x96ad0a21 -[NSException raise] + 17
3   ExceptionHandling                   0x998d44c5 -[NSExceptionHandler _handleException:mask:] + 1877
4   ExceptionHandling                   0x998d3d52 NSExceptionHandlerExceptionRaiser + 228
5   libobjc.A.dylib                     0x921535a9 objc_exception_throw + 56
6   CoreData                            0x92da3278 _PFManagedObject_coerceValueForKeyWithDescription + 1768
7   CoreData                            0x92db9e8f _sharedIMPL_setvfk_core + 159
8   CoreData                            0x92da2a56 -[NSManagedObject(_PFDynamicAccessorsAndPropertySupport) _setGenericValue:forKey:withIndex:flags:] + 54
9   CoreData                            0x92dbd689 -[NSManagedObject(_NSInternalMethods) _maintainInverseRelationship:forProperty:oldDestination:newDestination:] + 505
10  CoreData                            0x92dbd321 -[NSManagedObject(_NSInternalMethods) _didChangeValue:forRelationship:named:withInverse:] + 961
11  CoreData                            0x92dbcf4b -[NSManagedObjectContext observeValueForKeyPath:ofObject:change:context:] + 187
12  Foundation                          0x95d4502c NSKeyValueNotifyObserver + 372
13  Foundation                          0x95d44acb NSKeyValueDidChange + 377
14  Foundation                          0x95d292b6 -[NSObject(NSKeyValueObserverNotification) didChangeValueForKey:] + 127
15  CoreData                            0x92dbce25 -[NSManagedObject didChangeValueForKey:] + 69
16  Sandvox                             0x0006ecc6 -[KSExtensibleManagedObject didChangeValueForKey:] + 858
17  CoreData                            0x92de9deb -[NSManagedObject(_NSInternalMethods) _updateFromToManyAwareSnapshot:forUndo:] + 683
18  CoreData                            0x92de6540 -[NSManagedObject(_NSInternalMethods) _updateFromUndoSnapshot:] + 48
19  CoreData                            0x92de5775 -[NSManagedObjectContext(_NSInternalChangeProcessing) _undoDeletions:] + 1093
20  Foundation                          0x95eadb60 -[_NSUndoLightInvocation invoke] + 34
21  Foundation                          0x95eadf60 -[_NSUndoStack popAndInvoke] + 265
22  Foundation                          0x95eae2a0 -[NSUndoManager undoNestedGroup] + 342 
```

到目前为止，我们还无法重现它。在我看来，Core Data 正在尝试将一个已“未删除”的对象与另一个尚未接受相同处理的对象连接起来。为什么 Core Data 会对自己这样做？

# ios - 通过 NSURLconnection 为 ios Web 服务使用 Web 服务库（RESTKIT/ASIHTTP 请求）的优点

> ID：10639534
> 
> 赞同：1
> 
> 时间：2012-05-17T16:19:24.170
> 
> 标签：ios, web-services, nsurlconnection, asihttprequest, restkit

我想了解使用 RESTKIT/ASIHTTPREquest 库相对于传统 NSURLconnection 调用 RESTFUL/SOAP Web 服务的优势。我在我的项目中使用了这两种类型的 web 服务（RESTKIT/SOAP）和 nsurlconnection 并且我成功了......因此任何人都请帮助我了解去 RESKIT/ASIhttprequest 的好处......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T17:32:54.557

RestKit 与 CoreData 有很好的集成。ASIHTTP 使用可以很好地触发一次性请求的块。我使用不同的网络库越多，我就越认为这个问题还没有单一的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T11:56:26.970

小心 ASIHTTPRequest。是的，它很棒，但它最后一次更新是在 2011 年 5 月，作者已经停止了它的开发。见[http://allseeing-i.com/%5Brequest_release%5D](http://allseeing-i.com/%5Brequest_release%5D)；

# php - 在特定事件前 24 小时安排电子邮件通知？

> ID：10639535
> 
> 赞同：2
> 
> 时间：2012-05-17T16:19:24.847
> 
> 标签：php, mysql, linux, cron

我有一个基于 PHP 的网站，其中的预订/约会存储在 MySQL 数据库中。

我想设置一个电子邮件通知，以发送给每个在预订前 24 小时进行预订的人。预订是通过常规的 PHP 表单添加的。

我知道我可以添加一个脚本，例如，检查数据库中最后 24 小时内的任何预订的索引页面，但这是不可靠的，因为我一开始不会获得太多流量。因此，索引页面可能会持续数小时没有访问，并且通知会迟到数小时。

想到的另一个解决方案是设置一个每分钟运行一次的 cron 作业，调用一个 PHP 脚本来检查是否应该发送任何电子邮件并发送它们。但我不确定这在某种程度上是否过分。有没有人有比每分钟在后台运行一些东西更好的解决方案？

总结一下 - 有没有办法在没有 cron 的情况下做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T16:28:12.970

从网页触发作业是一个**非常**糟糕的主意，原因有两个：（1）如果您的网站没有获得流量，则作业不会运行；(2) 如果您收到大量通知，该作业将减慢对 Web 请求的响应（假设您同步调用该作业）。

我也强烈劝阻你不要每分钟都跑一份工作——这绝对是一种矫枉过正。相反，请考虑您是否真的需要“正好 24 小时”作为间隔，或者“在 22 到 26 小时之间”是否可以。

我们有类似的要求 - 并通过设置每 4 小时运行一次的作业并检查在脚本运行后 22 到 26 小时之间开始的事件需要发送哪些通知来解决此问题。这样，脚本一天只执行 6 次，并且一切都被正确发送。

如果 4 小时的近似值不够好，请考虑合适的最大间隔。我相信1小时应该足够了。让脚本每小时运行一次（来自 cron），并检查从运行时间起 23 到 24 小时之间开始的事件。

请记住，一旦您的电子邮件被发送，它不会立即出现在收件人的收件箱中：有时需要几秒钟，但有时可能需要一个小时甚至更长时间 - 因此您的脚本不会出现额外的小时差异一个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T16:22:37.750

您不需要将 cron 用作间隔计时器。当您希望完成工作时，您可以设置一个非常具体的日期和时间。

**[这是一篇关于这个主题的文章](http://net.tutsplus.com/tutorials/other/scheduling-tasks-with-cron-jobs/)**

例如：

```
0 0 18 5 * <php command here> 
```

将于每年 5 月 18 日午夜运行。这足以在下一次迭代（明年）之前清除它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T16:24:02.167

除了设置 cron 或通过定期调用向服务器发送请求之外别无他法……下面是与您的问题类似的帖子，您可能会明白。

[基于 JSON 或 AJAX 定期服务器调用的实时重定向](https://stackoverflow.com/questions/4872209/live-redirect-based-on-periodic-server-calls-with-json-or-ajax)

谢谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T16:27:10.940

每分钟执行一次 cron 工作毫无意义！但是你可以每小时做一次 cron 工作，因为我认为它不会测量一个小时的差异或 2 小时。没有 cron 它不是任何其他方式。大约需要 2 秒（最多）才能完成，所以值得

# c++ - 如何确定（x，y）点是否在由边界点列表定义的多边形内

> ID：10639540
> 
> 赞同：6
> 
> 时间：2012-05-17T16:19:40.287
> 
> 标签：c++, boost, geometry, computational-geometry, boost-geometry

我有一个大的点列表，这些点定义了一些（不一定是凸的）形状的边界。然后我有一些查询点`(x, y)`，我想确定是否`(x, y)`在我的点边界定义的区域内。

所以，很简单的问题。如何确定查询点是否在边界点形成的形状内？有没有一个很好的提升模块呢？我正在寻找`boost::geometry`但还没有找到任何东西..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T16:24:33.583

看来你正在寻找`within`，不是吗？

[http://www.boost.org/libs/geometry/doc/html/geometry/reference/algorithms/within/within_2.html](http://www.boost.org/libs/geometry/doc/html/geometry/reference/algorithms/within/within_2.html)

他们在页面上给出的示例实际上是多边形中的点：

```
#include <iostream>
#include <list>

#include <boost/geometry.hpp>
#include <boost/geometry/geometries/point_xy.hpp>
#include <boost/geometry/geometries/polygon.hpp>

#include <boost/geometry/domains/gis/io/wkt/wkt.hpp>

int main()
{
    typedef boost::geometry::model::d2::point_xy<double> point_type;
    typedef boost::geometry::model::polygon<point_type> polygon_type;

    polygon_type poly;
    boost::geometry::read_wkt(
        "POLYGON((2 1.3,2.4 1.7,2.8 1.8,3.4 1.2,3.7 1.6,3.4 2,4.1 3,5.3 2.6,5.4 1.2,4.9 0.8,2.9 0.7,2 1.3)"
            "(4.0 2.0, 4.2 1.4, 4.8 1.9, 4.4 2.2, 4.0 2.0))", poly);

    point_type p(4, 1);

    std::cout << "within: " << (boost::geometry::within(p, poly) ? "yes" : "no") << std::endl;

    return 0;
} 
```

**更新：**正如@ildjarn 指出的那样，`covered_by`如果您想要位于多边形边缘本身的点来计数，您可能宁愿使用：

[http://www.boost.org/libs/geometry/doc/html/geometry/reference/algorithms/covered_by/covered_by_2.html](http://www.boost.org/libs/geometry/doc/html/geometry/reference/algorithms/covered_by/covered_by_2.html)

wrt 边缘的行为`within`“取决于”，因此请注意文档中的细微差别。

# database - 合并数据并将数据添加到mysql表中列中的字段的新行

> ID：10639542
> 
> 赞同：1
> 
> 时间：2012-05-17T16:19:49.297
> 
> 标签：database, sql-server-2008

我的表 X 中有 3 列：

```
身份状态类型
1新泽西表格1
1 纽约表格 2
1 TX 表格 3

```

我想将它合并到表 Y 中的一列：

```
Id FormTypes
1 新泽西州：Form1
     纽约：Form2
     德克萨斯州：Form3

```

这可以实现吗？？？

目前我已经做了很多：

```
DECLARE @NewLine as char(2) = char(13) + char (10)

UPDATE tableY

SET FormTypes =
(
      select substring(
         (select ':'+ [State] + ':'+ Type+ @NewLine AS 'data()' 
            from tableX  
            for xml path(''))
      ,3, 255)
as "MyList"  ) 
```

这给了我这样的垃圾：

```
NJ:Form1'&#x0D'; NY:Form2'&#x0D'; TX:Form3'&#x0D'; 
```

以这种形式获取它的原因是它在多个文件中被读取的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T16:29:19.490

```
SELECT 
     x2.id, 
     STUFF((SELECT char(10)+x1.State+':'+x1.Type FROM tableX x1 WHERE x1.id=x2.id GROUP BY x1.id for xml path(''),TYPE),1,1,'') as stype 
FROM tableX x2
GROUP BY x2.id 
```

这会给你表格形式

# iphone - 核心数据 - 如何禁用故障机制

> ID：10639546
> 
> 赞同：4
> 
> 时间：2012-05-17T16:20:17.287
> 
> 标签：iphone, ios, core-data

有没有办法告诉 Core Data 禁用它的内存管理？我在一个视图中有 NSManagedObjects 很长时间没有保存到上下文中。托管对象位于表格视图中。用户将首先看到该视图，然后导航到另一个视图，在返回表视图之前在那里花费大量时间。我收到了这个异常：“NSObjectInaccessibleException - CoreData 无法完成错误”</p>

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T16:42:26.390

要在使用 NSFetchRequest 获取核心数据实体时禁用故障，只需在执行请求之前添加 [request setReturnsObjectsAsFaults:NO] 行。

[在此处阅读更多详细信息](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdFaultingUniquing.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T16:27:30.413

Core Data 故障履行错误通常意味着您持有一个已发生故障的对象，而另一个线程已删除其中一个子对象并提交到持久存储。因此，当原始线程返回完成故障时，那里就没有任何东西了。

您可以做的一件事是让您的其他视图监听 NSManagedObjectContextDidSave 和 NSManagedObjectContextWillSave 以在更改发生时对更改做出反应（即重新加载新数据），这样您就不会在缓存中遇到坏对象。

# nhibernate - 无法解析属性：ID

> ID：10639548
> 
> 赞同：3
> 
> 时间：2012-05-17T16:20:27.573
> 
> 标签：nhibernate, fluent-nhibernate

我收到以下错误消息：

```
NHibernate.HibernateException: NHibernate.HibernateException: Unable to resolve property: Id. 
```

此错误是从以下代码行引发的：

```
User userFound = session.QueryOver<User>()
                   .Where(x => x.Id == testObjects.TestUser.Id)
                   .SingleOrDefault(); 
```

我的缩写映射如下：

```
public class UserMap : ClassMap<User>
{
    public UserMap()
    {
        Table("USER_HEADER");
        Id(x => x.Id, "USER_ID")
            .GeneratedBy.Foreign("UserLocation");

        HasOne(x => x.UserLocation)
            .PropertyRef(x => x.Id)
            .Cascade.All();
    }
}

public class LocationMap : ClassMap<Location>
{
    public LocationMap()
    {
        Table("LOC_HEADER");
        Id(x => x.Id, "LOC_ID");

        HasOne(x => x.User)
            .PropertyRef(x => x.Id);
    }
} 
```

在添加此关系之前，我能够查询用户对象，`Location`因此我知道它与它有关，但我不确定到底是什么。我可以成功创建一个`User`绑定到 a`Location`但无法查询它的对象。使用`ISession.Get`会产生与上述 QueryOver 语句相同的错误。

以下是我正在运行的失败的整体单元测试：

```
 public void Can_Create_User()
    {
        using (NHibernate.ISession session = SessionFactory.GetCurrentSession())
        {
            using (NHibernate.ITransaction tran = session.BeginTransaction())
            {
                session.Save(testObjects.TestValidationDetail);
                session.Save(testObjects.TestUser);
                tran.Commit();
            }
        }

        using (NHibernate.ISession session = SessionFactory.GetCurrentSession())
        {
            User userFound = session.QueryOver<User>().Where(x => x.Id == testObjects.TestUser.Id).SingleOrDefault();

            Assert.IsNotNull(userFound);
            Assert.AreEqual(userFound.Id, userFound.UserLocation.Id);
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T19:11:37.750

原来这是我错误使用造成的`PropertyRef`。在我的例子中，我不需要使用它。正在生成错误，因为没有名为的属性`Id`，但有一个名为 的 ID `Id`。我通过将映射更改为：

```
HasOne(x => x.UserLocation)
        .PropertyRef(x => x.Id)
        .Cascade.All(); 
```

**至**

```
HasOne(x => x.UserLocation)
        .Cascade.All(); 
```

和

```
HasOne(x => x.User)
        .PropertyRef(x => x.Id); 
```

**至**

```
HasOne(x => x.User) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T10:35:33.873

`PropertyRef`映射到`property-ref`是一项遗留功能，它旨在允许您在未在关联的主键上完成关联时创建多对一关联。

我猜您想指定要在哪个属性上进行连接，这就是您使用 PropertyRef 的原因。如果您在 UserLocation 的 Id 的映射中使用 Nhibernates 默认约定，则不需要显式指定属性。如果您明确给出列名，那么您需要在此处执行相同的操作，但在这种情况下，您需要指定完全相同的列名。

希望有帮助..

# xml - é (xE9) 字符的 xml 验证问题

> ID：10639549
> 
> 赞同：0
> 
> 时间：2012-05-17T16:20:33.290
> 
> 标签：xml, encoding, utf-8, xml-validation, google-product-search

我从数据库中的数据生成的 XML 文件存在问题。

我正在指定 UTF-8 的编码类型。

我有一些文本，当我在浏览器或数据库中查看它时，它们似乎代表一个`é`字符。但是，当我在 Notepad++ 中查看 XML 文件时，它显示为**[xE9]**。

这是我的 XML 文件顶部的定义：

```
<?xml version="1.0" encoding="UTF-8" ?>
<rss version ="2.0" xmlns:g="http://base.google.com/ns/1.0"> 
```

这是我的 XML 文件的摘录，显示了导致问题的字符。我很困惑为什么这显示为非 UTF-8 字符，但这是我的 XML 无效的原因。

```
<description><![CDATA[work appliqu顤ress. Picco three-quarter sleeved style. Cutwork appliqu顦eatures fitted, with side pockets.]]></description> 
```

在我的 PHP 脚本中，我使用了 htmlspecialchars 函数，但它似乎没有处理这个字符：

```
<description><![CDATA[<?php echo htmlspecialchars($product['product-description']) ?: 'CRMPicco Online'; ?>]]></description> 
```

不幸的是，文件中有许多实例存在此字符，因此我不能只从数据库中删除该字符*。*

我应该能够在 PHP 中清理它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T09:05:21.077

这可以使用`iconv`PHP 中的函数来完成：

```
$text = iconv("UTF-8","UTF-8//IGNORE",$text); 
```

我已经更改了代码以使用它，并且它可以工作。

# c# - 无法将选定的表数据发送到 DataTable

> ID：10639550
> 
> 赞同：0
> 
> 时间：2012-05-17T16:20:34.903
> 
> 标签：c#, datagridview, datatable

我无法理解我的代码中的问题。我希望当用户选择一个表名时，它将显示在 datagridView 上。但我无法将我的数据发送到 dataTable。当我调试 dt 变量时为空。我缺少什么？

这是我到目前为止编写的代码：

```
 public void ShowSelectedTable(string tableName, DataGridView grid, string   dbFilePath) 
    {
        try
        {
            OleDbConnection dbConn = new OleDbConnection();
            dbConn.ConnectionString = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + dbFilePath;
            dbConn.Open();

            dbSet = new DataSet();
            dbAdapt = new OleDbDataAdapter();
            dbAdapt.SelectCommand = new OleDbCommand("Select * From " + tableName + ";", dbConn);
            dbAdapt.Fill(dbSet);
            dt = dbSet.Tables["TableName"];
            grid.DataSource = dt;
        }
        catch(Exception ex)
        {
            MessageBox.Show("error");
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T16:22:26.857

快速猜测 -

也许从

```
dt = dbSet.Tables["TableName"]; 
```

至

```
dt = dbSet.Tables[tableName]; 
```

# jquery - 使用 jQuery 覆盖帮助提示

> ID：10639551
> 
> 赞同：10
> 
> 时间：2012-05-17T16:20:35.610
> 
> 标签：jquery, overlay, modal-dialog

我想创建一个覆盖层，如果用户单击“帮助”链接，该链接会弹出一个“帮助”链接，该链接显示`.png`指出网站元素的帮助提示（很可能是图像）。

我已经在其他网站上看到过此操作（尽管我目前找不到），因此整个页面上有一个半透明的覆盖层，其中显示了帮助提示。然后，如果用户单击或单击“关闭”按钮，我希望覆盖消失。

我知道有很多问题要问，但如果有人能指出我正确的方向，或者在线教程等。我真的很感激 :)

这是我想在我的网站上创建的效果示例： ![jquery 覆盖网站帮助提示](../Images/d41b2737e7f6a47306c4126692826fcd.png)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-08-16T15:34:14.763

看一下[Chardin.js](http://heelhook.github.io/chardin.js/)，它非常好且易于实现

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-17T16:23:52.397

看看 Impromptu 插件

[http://trentrichardson.com/Impromptu/](http://trentrichardson.com/Impromptu/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-17T19:52:51.223

另一个不错的插件似乎是 chardin [http://heelhook.github.io/chardin.js/](http://heelhook.github.io/chardin.js/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-17T16:27:55.590

首先，您必须学习如何创建**叠加层**。这很容易通过一些基本的 CSS 来完成。

显示帮助内容的内容（您的 PNG 图像）将包含在覆盖元素（很可能是 a `div`）中。您将不得不将它们定位在周围，您可以选择使用纯 CSS 来实现，或者使用 jQuery UI 的[Position](http://jqueryui.com/demos/position/)助手之类的东西来帮助您。

最后，您将需要一些 Javascript / jQuery 来启动覆盖的切换。您想阅读[jQuery 中的事件](http://api.jquery.com/on/)。最有可能的是，您将附加在`click`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T16:23:12.220

听起来您正在寻找类似[Colorbox的东西](http://www.jacklmoore.com/colorbox)

# c# - 将数组值组合成单个值以显示在网格的单个列中

> ID：10639552
> 
> 赞同：2
> 
> 时间：2012-05-17T16:20:39.390
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, c#-4.0, telerik

我有一个使用 Telerik 的网格控件的 MVC3 应用程序。我很好地填充了网格，但是我使用的模型内部有一个数组，需要在单个列中显示。这是我的模型

```
public class MyModel
{
    public string parentName {get; set;}
    public string[] childrenNames { get; set; }
} 
```

现在用控制器中的数据填充我的类：

```
 public ActionResult Index()
 {
            var loo = new MyModel[2];
            loo[0] = new MyModel();
            loo[0].parentName = "Troy";
            loo[0].childrenNames[0] = "chris";
            loo[0].childrenNames[1] = "tony";
            loo[1] = new MyModel();
            loo[1].parentName = "Mike";
            loo[1].childrenNames[0] = "lee";
            loo[1].childrenNames[1] = "mary";

            IEnumerable<MyModel> model = loo;
        return View(model);

 } 
```

现在我的 childrenNames 数组可以并且将有多个条目，但我需要将 childrenNames 组合成一个以逗号分隔的值并显示在我的网格中：

```
@model IEnumerable<MyModel>
@(Html.Telerik().Grid(Model)
.Columns(columns =>
{
    columns.Bound(o => o.parentName).Width(100).Title("Parent");
    columns.Bound(o => o.childrenNamesCombined).Width(250).Title("Kids");
 } 
```

我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T16:26:28.617

您不能将数组作为单列

您应该在模型中将其设为字符串，或者在连接数组中使用另一个属性：

```
public class MyModel
{
    public string parentName {get; set;}
    public string[] childrenNames { get; set; }
    public string JoinedNames { get; set; }
}

loo[1] = new MyModel();
..
...
loo[1].JoinedNames  = string.Join("," loo[1].childrenNames);

@(Html.Telerik().Grid(Model)
.Columns(columns =>
{
    columns.Bound(o => o.parentName).Width(100).Title("Parent");
    columns.Bound(o => o.JoinedNames).Width(250).Title("Kids");
 } 
```

# php - ZF + PHPUnit：如何在 ajax 响应中断言 html 元素的存在？

> ID：10639556
> 
> 赞同：0
> 
> 时间：2012-05-17T16:20:58.803
> 
> 标签：php, zend-framework, phpunit

我应该扩展 ControllerTestCase 并创建一个自定义方法来处理这个吗？什么是最好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T20:41:23.450

AJAX 响应应该与任何其他响应没有什么不同。所以不需要子类化。

但是，如果您的意思是“如何测试从我正在测试的文件生成的响应 AJAX 请求是否正确？” 没有办法做到这一点（可能除了 Selenium 测试）。测试它不是 PHP 的工作——你应该使用 JavaScript 测试来测试它。

当您确定 AJAX 使用正确的参数调用正确的 URL 时，您可以人工创建 AJAX 请求并将响应作为正常请求进行测试。

# joomla - 如何克服 Joomla 1.5 中的模板安装问题？

> ID：10639557
> 
> 赞同：0
> 
> 时间：2012-05-17T16:21:03.770
> 
> 标签：joomla, joomla1.5, joomla-extensions, joomla-template

我正在尝试部署本地开发的 Joomla 1.5 站点。我没有使用最新版本，因为我需要的一些扩展仅适用于 1.5。

迁移数据库和内容后，出现了很多问题——我相信其中大部分都与 Joom!Fish 有关。

因此，我决定在目标服务器（Yahoo Small Business 主机）上安装 Joomla 1.5 的新副本，安装模板并重建内容。

问题与第二步有关：安装模板。我使用扩展管理器安装它（没有任何错误），它显示在扩展管理器 -> 模板中，但它没有显示在模板管理器中（因此无法启用）。手动对模板文件进行 FTP 传输时，我得到了完全相同的令人失望的结果。“jos_templates_menu”表没有与我的模板对应的条目；手动添加它没有任何积极的结果。我相信*templatedetails.xml*是正确的。

我测试了其他模板（免费的在线模板）。它们中的大多数都显示在模板管理器中。

奇怪的是，如果我尝试在新安装的 Joomla 1.5 站点（本地主机上）上安装我的模板，一切正常。

任何人都可以就这个特定问题分享一些想法（来自经验或非经验）吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T16:57:19.040

I've had the same issue many times in the past, and can say with near certainty that it roots back to your templatedetails.xml file. Make sure that the names that are being used all match exactly (usually case-sensitive) because Joomla starts by looking at the subfolders found in the Templates folder, and proceeding from there with the templatedetails.xml file that it finds in each.

# c - Linux 零拷贝：使用 vmsplice 在两个进程之间传输内存页面

> ID：10639559
> 
> 赞同：21
> 
> 时间：2012-05-17T16:21:13.743
> 
> 标签：c, linux, virtual-memory, splice

目前，我正在尝试了解 splice/vmsplice 的价值。关于IPC的用例，我在stackoverflow上偶然发现了以下答案：[https ://stackoverflow.com/a/1350550/1305501](https://stackoverflow.com/a/1350550/1305501)

**问题：**如何使用vmsplice将内存页从一个进程传输到另一个进程而不复制数据（即零拷贝）？

上面提到的答案声称这是可能的。但是，它不包含任何源代码。如果我正确理解文档`vmsplice`，如果内存已正确分配和对齐，则以下函数将在不复制的情况下将内存页面传输到管道（内核缓冲区）中。为了便于演示，省略了错误处理。

```
// data is aligned to page boundaries,
// and length is a multiple of the page size
void transfer_to_pipe(int pipe_out, char* data, size_t length)
{
    size_t offset = 0;
    while (offset < length) {
        struct iovec iov { data + offset, length - offset };
        offset += vmsplice(pipe_out, &iov, 1, SPLICE_F_GIFT);
    }
} 
```

但是如何在不复制的情况下从用户空间访问内存页面呢？显然以下方法不起作用：

*   `vmsplice`: 此功能也可用于反向。但根据[内核源代码](http://git.kernel.org/?p=linux/kernel/git/torvalds/linux.git;a=blob;f=fs/splice.c;h=f8476841eb04e08edc2ad069e97cddc3da242e7f;hb=HEAD#l1640)中的注释，数据将被复制。
*   `read`: 我可以想象，如果内存正确对齐，这个函数会产生一些魔力，但我对此表示怀疑。
*   `mmap`: 在管道上不可能。但是是否有某种虚拟文件可以代替使用，即`splice`虚拟文件的内存页和`mmap`它？
*   ... ?

根本不可能`vmsplice`吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T16:46:38.160

正如 R.. 所提到的，您只需要以[某种方式](https://stackoverflow.com/questions/1350361/what-is-the-most-efficient-way-to-exchange-high-volume-data-between-2-process/1350550#1350550)将 fd 传递给接收进程，然后将其用作普通 fd。

*编辑：* 实际上，您必须在发送端使用 vmsplice() 将缓冲区映射到管道，并在管道另一端的接收端使用 splice()。[请参阅此处](http://ogris.de/howtos/splice.html)的示例。

另一种选择是使用共享映射。

# android - 将 CookieManager 添加到 android Childbrowser

> ID：10639563
> 
> 赞同：1
> 
> 时间：2012-05-17T16:21:27.653
> 
> 标签：android, cordova, phonegap-plugins, childbrowser

我正在尝试让本地 cookie (file://) 在 ChildBrowser 中的 android 3.1+ 上工作。我发现一篇博客回复谈到了这个特定问题以及如何使用 Cookie Manager 来解决它。我不知道在插件中的哪个位置放置代码。有没有人成功地实现了这一点？

* * *

[来自http://code.google.com/p/android/issues/detail?id=3739](http://code.google.com/p/android/issues/detail?id=3739)的评论如下

edtechk 发表的第 16 条评论...@gmail.com，2012 年 2 月 1 日 我得到了这个东西，对于 Android 2.2，javascript 的 document.cookie 工作正常，只需确保在您的 Webview...javascript 中启用如下：

```
yourWebViewVariable.getSettings().setJavaScriptEnabled(true); 
```

对于 Android 3.1，只需将其添加到您的 java 文件 onLoadInit：

```
CookieManager.setAcceptFileSchemeCookies(true);   //This is the line that specifically makes it work so the other lines is optional

CookieManager cookieManager = CookieManager.getInstance();
cookieManager.setAcceptCookie(true);
cookieManager.acceptCookie(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T14:23:38.487

对于那些感兴趣的人，我想通了。这根本不是 Childbrowser 的问题。您必须让父 Phonegap 项目接受本地 cookie，然后 Childbrowser 也会接受。为此，您的 PhoneGap 项目中应该有一个名为 youappname.java 的文件，可能包含以下内容或类似内容：

```
import android.os.Bundle;
import org.apache.cordova.*;

public class App extends DroidGap {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    super.loadUrl("file:///android_asset/www/index.html");
}
} 
```

修改它看起来像这个例子：

```
import android.os.Bundle;
import android.webkit.CookieManager;
import org.apache.cordova.*;

public class App extends DroidGap {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    CookieManager.setAcceptFileSchemeCookies(true);
    super.onCreate(savedInstanceState);
    super.loadUrl("file:///android_asset/www/index.html");
}
} 
```

# xmpp - ejabberd 离线消息数据包中缺少“来自”属性

> ID：10639564
> 
> 赞同：1
> 
> 时间：2012-05-17T16:21:27.813
> 
> 标签：xmpp, ejabberd

我正在尝试编写一个模块，当用户在 ejabberd 中收到脱机消息时，它会触发对 API 的 HTTP POST。它适用于支持推送通知的 iOS 应用程序。

我按照[http://jasonrowe.com/2011/12/30/ejabberd-offline-messages/上的指南进行操作](http://jasonrowe.com/2011/12/30/ejabberd-offline-messages/)

我测试了博客文章中的代码。大多数部分都在工作，但`from`截获的离线消息中缺少该属性。正如您在上面的博客文章中看到的那样，作者的屏幕截图也存在同样的问题。那么，如何在离线消息包中获取发件人的账户名呢？

我错过了什么还是一个错误（在离线消息中，`from`只是缺少属性）？

顺便说一句，我在我的 ejabberd 配置中配置了共享名册“每个人”，它允许每个人都将每个人视为“联系人”。我不确定是不是这个原因。

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-22T08:41:11.473

请使用下面的博客，它非常简单实用，对我来说很好用。

[http://symmetricinfinity.com/2013/01/23/ios-push-notifications-from-ejabberd.html](http://symmetricinfinity.com/2013/01/23/ios-push-notifications-from-ejabberd.html)

谢谢，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T09:20:24.693

我遇到了同样的问题，更改客户端代码中的消息包将解决此问题。简单地添加'from'属性到它:)

# nosql - INCR（增加 CounterColumn）的 Cassandra CQL 等效项是什么？

> ID：10639566
> 
> 赞同：4
> 
> 时间：2012-05-17T16:21:36.343
> 
> 标签：nosql, cassandra, cql

什么是 CQL 等效项：INCR MyCounter['123']['test'] BY 1

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T16:47:23.580

您可以在此处找到 CQL 语法参考：[Cassandra 查询语言 (CQL) v2.0](http://cassandra.apache.org/doc/cql/CQL.html#UpdatingCounterColumns)。在 CQL 中增加一个计数器：

```
update MyCounter set test = test + 1 where KEY = '123'; 
```

# facebook - Facebook 应用移动网址设置

> ID：10639570
> 
> 赞同：2
> 
> 时间：2012-05-17T16:21:59.717
> 
> 标签：facebook, mobile

当我输入地址时，我的 facebook 应用程序在手机上运行良好，但当我关注墙上发布的链接时就不行了。在这种情况下，我收到一条错误消息，指出应用程序“尚未配置其移动 Web URL 或无法验证该 URL 是否归应用程序所有”。我尝试添加一个移动 url，使其与我的画布 url 相同，但随后我收到一个错误，即应用程序配置错误并且它根本不起作用，即使手动输入地址也是如此。我输入的移动网址是什么意思？

# android - 在较低的 Android 版本上避免 GLES20 编译错误

> ID：10639572
> 
> 赞同：1
> 
> 时间：2012-05-17T16:22:14.153
> 
> 标签：android, eclipse, opengl-es, opengl-es-2.0

我知道android 2.1 及以下版本不支持GLES20。我的代码可以使用固定功能管道 (GLES1.x) 和可编程管道 (GLES20) 运行，具体取决于运行时确定 android 设备使用的版本并相应地设置 GLES 版本。

我的情况是，理想情况下，我希望将我的 GLES20 代码保留在我的项目中，并且在检测到版本 <= 2.1 的 android 设备时不使用在运行时使用 GLES20 的类。但是当我在 Eclipse 中将我的项目设置为 2.1 时，GLES20 会产生编译错误。我认为这是因为 Android2.1.jar 不包含 GLES20 。

他们是一种方法，我可以在将 android 版本设置为较低时保持我的 GLES20 代码而不会出现编译错误，并且在运行时不使用 GLES20 代码，这样运行的代码无论如何都不会使用 GLES20 部分。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T04:51:02.987

好的，我想通了。清单中的元素 minSdkVersion 和 targetSdkVersion 允许这样做。我引用了“Beginning Android Games”一书。“此元素允许我们将使用仅在较新版本中可用的 API 的应用程序部署到安装了较低版本的设备”。所以我将相应地使用这个元素，并在 eclipse 中使用我的目标 android 版本集进行开发。我会尽快用这个回答我的问题

与 Mārtiņš Možeiko 的评论链接的有关 Android 开发人员的相关文档。 [developer.android.com/guide/appendix/market-filters.html](http://developer.android.com/guide/appendix/market-filters.html)

# c# - 根据属性的名称在对象列表中查找对对象的引用

> ID：10639575
> 
> 赞同：0
> 
> 时间：2012-05-17T16:22:39.307
> 
> 标签：c#, search, object, reference, find

我有一个`List<CustomClass> listOfCustomClass`.

CustomClass 定义如下：

```
public class CustomClass {
   public name;
} 
```

我想在我的列表中搜索名称为“foo”的 CustomClass 并返回对此类的引用。我怎样才能做到这一点 ？以下是我尝试过的，但是它返回“null”。

```
CustomcClass class = listOfCustomClass.Find(delegate(CustomClass  findClass) {return findClass.name=="foo"; }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T16:26:43.877

使用 linq 查询...

```
var customClass = listOfCustomClass.Where(c => c.name == "foo").SingleOrDefault(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T16:27:34.607

使用 linq：

```
var returnedItem=(from item in listOfCustomClass
                  where item.name=="blah"
                  select item).FirstOrDefault(); 
```

它还具有可读性强的优点

为了帮助您入门，这里有 101 个 linq 示例[：](http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b)

Linq 让生活更美好

# iphone - 如何将来自服务器的图像设置为矩形按钮的背景图像

> ID：10639576
> 
> 赞同：1
> 
> 时间：2012-05-17T16:22:45.217
> 
> 标签：iphone, ios, xcode, ios5, storyboard

我一直在尝试将矩形按钮的背景图像设置为我的网络服务器上的 .png 文件。我已经在视图控制器 .h 中声明了该按钮，并将其添加到 .m viewdidload 下：

```
[mybutton setImage: [UIImage imageNamed: @"http://www.myserver.com/index_files/stacks_image_14.png"] forState: UIControlStateHighlighted]; 
```

但按钮中没有显示任何内容。在尝试将图像分配给对象之前，我一直在阅读 NSSURL 以了解有关调用图像的信息，但目前我有点卡住了。

谢谢你的帮助！

编辑：我尝试过的新代码：

```
 NSURL *myurl2 = [NSURL URLWithString:@"http://www.myserver.com/bigoaks.png"];
    NSURLRequest *request2 = [NSURLRequest requestWithURL:myurl2
                                             cachePolicy:NSURLRequestReloadIgnoringLocalCacheData
                                         timeoutInterval:10.0];

    NSURLConnection *connection2= [[NSURLConnection alloc] initWithRequest:request2 
                                                                 delegate:self];
    NSString *mystring2 = [NSString stringWithContentsOfURL:myurl2 encoding:NSUTF8StringEncoding error:&error]; 
    [mybutton setImage : mystring2]; 
```

似乎仍然得到“UIButton 没有可见的@interface 声明选择器'setImage：'

再次感谢所有的帮助！

编辑2：

知道了！感谢所有帮助人员 - 这是帮助其他任何人的最终代码：

```
NSURL *myurl2 = [NSURL URLWithString:@"http://www.myserver.com/bigoaks.png"];
UIImage *image = [UIImage imageWithData: [NSData dataWithContentsOfURL:myurl2]];
[mybutton setImage:image forState:UIControlStateNormal]; 
```

使用本教程：http: [//mobiledevelopertips.com/cocoa/download-and-create-an-image-from-a-url.html](http://mobiledevelopertips.com/cocoa/download-and-create-an-image-from-a-url.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T16:27:24.747

```
NSURL *url = [NSURL URLWithString:@"http://www.myserver.com/image.png"];
NSData *data = [NSData dataWithContentsOfURL:url];
UIImage *image = [UIImage imageWithData:data];
[mybutton setImage:image]; 
```

希望这就是你要找的:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T16:46:45.507

imageNamed 用于使用捆绑包中包含的图像。另一个答案是正确的，尽管如果存在连接问题或一般延迟，该代码将冻结您的 UI，因为它不是异步的。相反，我建议使用 NSURLRequest 和 NSURLConnection 异步下载图像并将按钮设置为在完成委托函数（connectionDidFinishLoading）中使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T16:54:08.370

试试这个

[mybutton setBackgroundImage:[UIImage imageNamed:@"http://www.myserver.com/index_files/stacks_image_14.png"] forState:UIControlStateNormal];

# cakephp-2.0 - 如何在 CakePHP 2.0 中从 AppController 发送电子邮件？

> ID：10639577
> 
> 赞同：0
> 
> 时间：2012-05-17T16:22:50.073
> 
> 标签：cakephp-2.0

`AppController`我正在尝试从我的 CakePHP 2.0 应用程序中发送电子邮件。如果我从 发送它可以正常工作`PagesController`，但我也需要能够发送`AppController`。

我有：

```
function sendSystemEmail($to = EMAIL_CONTACT, $from = EMAIL_FROM, $subject = null, $body = null, $view = null, $vars = null) {
    App::uses('CakeEmail', 'Network/Email');
    $email = new CakeEmail();
    $email->viewVars(array(
            'body' => $body,
            'vars' => $vars
    ));
    $email->template($view)
            ->emailFormat('html')
            ->from($from)
            ->to($to)
            ->subject($subject)
            ->send();
    return;
} 
```

当我使用它时，我没有收到任何错误，但电子邮件没有到达。我看不出这和我的代码有什么不同`PagesController`，所以我假设有些东西可能`AppController`无法访问？我不知道是什么！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T23:30:55.490

Sharon，你没有放配置方法..这个参数也可以放在classEmail的构造函数中，这样..

```
$email = new CakeEmail('pop3'); //can be smtp or the protocole you are using.. 
```

或者

```
$email->config('pop3') 
```

你需要在这里定义连接 **../app/Config/email.php**

```
class EmailConfig {

    public $pop3 = array(
        'transport' => 'Mail',
        'from' => 'you@localhost',
        //'charset' => 'utf-8',
        //'headerCharset' => 'utf-8',
    ); 
```

# php - 使用recaptcha - 相对路径问题？

> ID：10639578
> 
> 赞同：0
> 
> 时间：2012-05-17T16:22:54.710
> 
> 标签：php, relative-path, recaptcha

原谅我的无知。我试图在我的网站上设置 recaptcha。查看给定的说明，我发现似乎有问题。

说明给你这个代码：

```
 require_once('recaptchalib.php'); 
```

但这是一个相对路径，我没有得到任何下载这个 recaptcha 库文件的东西，那么它是如何工作的呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T16:31:35.360

[https://developers.google.com/recaptcha/docs/php](https://developers.google.com/recaptcha/docs/php)

> To use reCAPTCHA with PHP, you can download [reCAPTCHA PHP library](http://code.google.com/p/recaptcha/downloads/list?q=label%3aphplib-Latest). You will only need one file from there (recaptchalib.php). The other files are examples, readme and legal stuff -- they don't affect functionality.

# wpf - 如何解决此 XAML 绑定错误？

> ID：10639579
> 
> 赞同：0
> 
> 时间：2012-05-17T16:22:54.990
> 
> 标签：wpf, xaml, mvvm

首先是一些背景知识，可以浓缩为编辑VatCodeViewModel的一个属性VatCode。

我在 ViewModel 中有一个具有两个特定属性的 StockItem：

```
public class StockItemViewModel : ViewModelBase
{
    private VatCodeViewModel _vatCode;

    public VatCodeViewModel VatCode
    {
        get { return _vatCode; }
        set
        {
            if (_vatCode != value)
            {
                _vatCode = value;
                RaisePropertyChanged("VatCode");
            }
        }
    }
} 
```

VatCode 属性接受一个 VatCodeViewModel 类型。

为了管理编辑体验，我有一个名为 EditStockItemViewModel 的 ViewModel。这具有元数据，例如 IsDirty、IsNew 等，但将 Item 属性设置为正在编辑的项目 - 在本例中是 StockItemViewModel 的实例。Item 属性位于（TViewModel == StockItemViewModel 的）基类中...

```
public class UnMappedEditableViewModelBase<TViewModel> : ViewModelBase
{
    private TViewModel _item;

    public TViewModel Item
    {
        get { return _item; }
        set
        {
            if (_item != value)
            {
                _item = value;
                RaisePropertyChanged("Item");
            }
        }
    }
} 
```

和实现类（EditStockItemViewModel，它有StockItemViewModel的Item）......

```
public class EditStockItemViewModel : UnMappedEditableViewModelBase<StockItemViewModel>
{
        private ObservableCollection<VatCodeViewModel> _vatCodes=new ObservableCollection<VatCodeViewModel>();

    public ObservableCollection<VatCodeViewModel> VatCodes
    {
        get { return _vatCodes; }
        set
        {
            if (_vatCodes != value)
            {
                _vatCodes = value;
                RaisePropertyChanged("VatCodes");
            }
        }
    }

public EditStockItemViewModel()
        :base()
{
        if (IsInDesignMode)
        {
        }
        else
        {
                                RefreshVatCodesList(null); // refreshes VatCodes property

            Save = new RelayCommand(() =>
                {
                                                // save functionality snipped

                }, () =>
            {
                bool canExecute =                        Item.VatCode!=null; // this is ALWAYS null - binding failing
                return canExecute;
            });         
        }
    }

} 
```

*因此 ViewModel.Item 属性始终是正在编辑的项目。*

我观点的一个片段......

```
 <TextBlock Text="VAT Code:" Grid.Column="1" Grid.Row="3" Style="{StaticResource ComboHeaderTextBlock}" />
    <telerik:RadComboBox Grid.Column="2" Grid.Row="3" Style="{StaticResource RadComboBox}" Width="300" HorizontalAlignment="Left"
                ItemsSource="{Binding VatCodes}" SelectedValuePath="Item.VatCode" 
                ClearSelectionButtonVisibility="Collapsed"
                CanAutocompleteSelectItems="True"
                CanKeyboardNavigationSelectItems="True"
                IsEditable="False"
                OpenDropDownOnFocus="False"
                IsFilteringEnabled="False"
                EmptyText="Select ...">
        <telerik:RadComboBox.SelectedValue>
            <Binding Path="Item.VatCode" UpdateSourceTrigger="PropertyChanged" Mode="TwoWay" RelativeSource="{RelativeSource FindAncestor,AncestorType={x:Type UserControl}}" >
                <Binding.ValidationRules>
                    <DataErrorValidationRule />
                </Binding.ValidationRules>
            </Binding>
        </telerik:RadComboBox.SelectedValue>
        <telerik:RadComboBox.ItemTemplate>
            <DataTemplate>
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="{Binding Key}" Style="{StaticResource TextBlock}" />
                    <TextBlock Text="{Binding Name}" Style="{StaticResource DimTextBlock}" />
                    <TextBlock Text="{Binding ActiveRate.Rate}" Margin="5 5 0 5" />
                    <TextBlock Text="%" Margin="0 5 5 5"  />
                </StackPanel>

            </DataTemplate>
        </telerik:RadComboBox.ItemTemplate>
    </telerik:RadComboBox> 
```

所以在这一切结束时，我有：

绑定到 [ViewModel].Item.VatCode 并使用 [ViewModel].VatCodes 作为源的增值税代码。

该列表已填充并且看起来很好。我知道 ViewModel 绑定正确。

问题是增值税代码没有绑定到 Item.VatCode 属性。因此，当我使用 Save 方法时，Item.VatCode 属性为空（即不工作）。

我收到以下似乎相关的绑定错误：

> System.Windows.Data 错误：17：无法从“”（类型“VatCodeViewModel”）获取“项目”值（类型“字符串”）。BindingExpression:Path=Item.VatCode; DataItem='VatCodeViewModel' (HashCode=27875274); 目标元素是 'RadComboBox' (Name=''); 目标属性是“NoTarget”（类型“对象”） TargetParameterCountException：“System.Reflection.TargetParameterCountException：参数计数不匹配。

显然，该错误表明我的绑定表达式 Item.VatCode 是可疑的，但我不确定如何更正它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T16:50:33.210

我认为问题在于您的组合框标记的这一行：

```
ItemsSource="{Binding VatCodes}" SelectedValuePath="Item.VatCode" 
```

这表示要从*VatCodes*（类型*VatCodeViewModel*）中提取组合框的项目，并为组合框值获取一个名为*Item.VatCode的**VatCodeViewModel*属性。*没有看到VatCodeViewModel*的定义很难说，但我怀疑该属性不存在。

 **这就是我认为你的意思。使*SelectedValuePath*成为*VatCodeViewModel*的属性（假设是*VatCode*），然后将选择绑定到*Item.VatCode*。你可以这样做：

```
ItemsSource="{Binding VatCodes}" SelectedValuePath="VatCode" SelectedValue="{Binding Item.VatCode}" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T09:27:09.943

找到它，我被文档中提供的示例误导了。我不应该使用路径`SelectedValuePath`。所以我的新代码是：

```
 <TextBlock Text="VAT Code:" Grid.Column="1" Grid.Row="3" Style="{StaticResource ComboHeaderTextBlock}" />
        <telerik:RadComboBox Grid.Column="2" Grid.Row="3" Style="{StaticResource RadComboBox}" Width="300" HorizontalAlignment="Left"
                    ItemsSource="{Binding VatCodes}"  
                    ClearSelectionButtonVisibility="Collapsed"
                    CanAutocompleteSelectItems="True"
                    CanKeyboardNavigationSelectItems="True"
                    IsEditable="False"
                    OpenDropDownOnFocus="False"
                    IsFilteringEnabled="False"
                    EmptyText="Select ...">
            <telerik:RadComboBox.SelectedValue>
                <Binding Path="Item.VatCode" UpdateSourceTrigger="PropertyChanged" Mode="TwoWay">
                    <Binding.ValidationRules>
                        <DataErrorValidationRule />
                    </Binding.ValidationRules>
                </Binding>
            </telerik:RadComboBox.SelectedValue>
            <telerik:RadComboBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="{Binding Key}" Style="{StaticResource TextBlock}" />
                        <TextBlock Text="{Binding Name}" Style="{StaticResource DimTextBlock}" />
                        <TextBlock Text="{Binding ActiveRate.Rate}" Margin="5 5 0 5" />
                        <TextBlock Text="%" Margin="0 5 5 5"  />
                    </StackPanel>

                </DataTemplate>
            </telerik:RadComboBox.ItemTemplate>
        </telerik:RadComboBox> 
```**

# css - 在父元素中选择元素 3 的倍数

> ID：10639587
> 
> 赞同：15
> 
> 时间：2012-05-17T16:23:19.333
> 
> 标签：css, css-selectors

有没有办法用css选择在父元素中索引倍数为6的元素？

例如，在这种情况下，我只想选择 3 的倍数：

```
<div>
    <p></p>
    <p></p>
    <p></p> <!--to select -->
    <p></p>
    <p></p>
    <p></p> <!--to select -->
    <p></p>
    <p></p>
    <p></p> <!--to select -->
</div> 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-17T16:27:50.753

使用[`:nth-child(n)`](http://msdn.microsoft.com/en-us/library/gg721782%28v=expression.40%29.aspx)：

```
p:nth-child(3n) {
  background: red
} 
```

演示：http: [//jsbin.com/azehum/4/edit](http://jsbin.com/azehum/4/edit)

此方法适用于 IE9+（来源：[caniuse.com](http://caniuse.com/css-sel3)）。如果您需要旧浏览器的支持，您可以使用[jQuery](http://api.jquery.com/nth-child-selector/)选择元素并向它们添加一个类：

```
$("p:nth-child(3n)").addClass("redbg"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T16:27:58.640

`nth`在css中使用选择器

```
p:nth-child(6n) {/*css here*/} 
```

[在这里查看更多](http://www.w3.org/Style/Examples/007/evenodd.en.html)

# c++ - 想要开发自己的小型 C++ 浏览器，基本上可以显示 HTML、Javascript 和 Flash，从哪里开始？

> ID：10639589
> 
> 赞同：0
> 
> 时间：2012-05-17T16:23:24.483
> 
> 标签：c++, windows, linux, browser, open-source

我正在寻找开始开发浏览器（操作系统不是问题，但更喜欢 Linux 或 Windows）。我只是想弄清楚从哪里开始。我知道 Visual Studio 允许您将轻量级 IE 组件放入其中，但我不想要 IE 的问题。我希望从一个非常基本的 Mozilla 构建开始，但我似乎无法在任何地方找到一个。

有谁知道我在哪里可以找到一个好的开源起点或如何自己开始？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T17:13:27.573

如果您不反对使用 Qt，那么 Qt 的 Webkit 实现可能是跨平台工作的一个相当干净的开始：

[http://doc.qt.nokia.com/4.7-snapshot/examples-webkit.html](http://doc.qt.nokia.com/4.7-snapshot/examples-webkit.html)

特别注意“Fancy Browser”示例：

[http://doc.qt.nokia.com/4.7-snapshot/webkit-fancybrowser.html](http://doc.qt.nokia.com/4.7-snapshot/webkit-fancybrowser.html)

有许多可能的自定义和连接引擎的方法。也支持 Flash，虽然我没有尝试过：

[http://www.qtcentre.org/threads/31547-Flash-support-for-QT-Webkit-4-6](http://www.qtcentre.org/threads/31547-Flash-support-for-QT-Webkit-4-6)

尽管您可以将 Qt 与其他编译器/IDE 一起使用，但最快的入门方法是使用 Qt Creator。安装后，只需单击几下即可在 Windows 或 Linux 上构建 QtWebkit 示例：

[http://qt.nokia.com/products/developer-tools](http://qt.nokia.com/products/developer-tools)

# c# - 在文件系统上存储 ViewState

> ID：10639592
> 
> 赞同：0
> 
> 时间：2012-05-17T16:23:27.887
> 
> 标签：c#, asp.net, .net, c#-4.0, asp.net-4.0

我指的是这篇关于[在文件系统上保存 ViewState 的文章](http://www.codeproject.com/Articles/20310/Save-ViewState-on-the-File-System)

这很好但并不理想，因为它没有存储关于`viewstate`它是哪个页面的任何内容。`viewstate`页面与其文件之间似乎没有进行任何映射。我希望能够使用`Asp.Net`webforms 丰富的编程模型，同时摆脱 ViewState。我可以将它存储在 Session 中，但它太贵了。我宁愿将它存储在文件系统上。

我能想到的一种方法是`Guid`在隐藏字段中存储页面并将实际的 ViewState 存储在文件名 Guid 中。这会起作用，但是我如何清理将清除这些 ViewState 文件的目录？为这样简单的任务创建自动化服务并定期删除这些文件将是一件痛苦的事情。

有什么想法/建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T17:13:27.960

看看 MongoDB。

[http://www.mongodb.org/](http://www.mongodb.org/)

这篇文章在 MongoDB 中保留 ViewState，这是一个以文档为中心的数据库。这将比 Sql Server 快得多，并且比将其存储在平面文件中要好得多。

一篇文章正好说明了这一点：

[http://highoncoding.com/Articles/699_Storing_ViewState_in_MongoDb_Database.aspx](http://highoncoding.com/Articles/699_Storing_ViewState_in_MongoDb_Database.aspx)

但是，您最初对删除旧文件的担忧仍然存在。您可以编写代码来清理`Session_End`事件中的旧 ViewState 文档

或者

如果您使用`OutProc`或`SqlServer`会话模式来存储会话，您可能必须不断检查旧文件`LoadPageStateFromPersistedMedium`并在那里删除旧文件，因为 Session_End 不会针对这些模式触发，但我怀疑您是否会使用 Sql Server，因为您非常担心关于它 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T16:56:26.693

One thing many people overlook on ViewState is that it is defaulted to enabled on all controls, and in many cases it is not needed. If I was concerned about ViewState size, the first thing I would do would be to disable ViewState whereever it is not needed.

The solution discussed in the CP article, does not mention that ViewState *must* be used for controls where the user can directly change the value, such as a textbox. Unless you use some JavaScript or jQuery workaround and a bunch of query strings, ViewState is *the* way to get back the values a user has entered on the form.

So, the only place where the solution you are considering would be of value would be a place where you have an asp:Label or asp:Literal and are changing that value in server-side code in response to a button click or some other event, and need to make sure that the change is persisted over subsequent post backs.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T16:50:58.353

看看 Windows Server AppFabric。通过配置设置很容易实现......

[http://msdn.microsoft.com/en-us/windowsserver/ee695849](http://msdn.microsoft.com/en-us/windowsserver/ee695849)

[http://en.wikipedia.org/wiki/AppFabric](http://en.wikipedia.org/wiki/AppFabric)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T17:17:24.550

根据您的问题，如果您不希望视图状态的 HTML 重载，您可以为所有控件禁用它。你真的需要记住文本框中的值吗？

如果您想维护视图状态但不在 HTML 中，我会推荐会话，默认情况下它使用服务器内存，速度很快。您甚至可以在 SQL 或 Windows 服务中使用 Session，速度较慢的选项。

如果愿意，您也可以使用 cookie，这是另一种选择，并且保留在客户端上。

我不建议使用文件，读取速度很慢，并且只有一个用户可以访问这些文件，因此您必须生成和维护大量文件。

但根据我的经验，我会禁用视图状态，或者保持不变。

希望能帮助到你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T16:35:13.977

您可以使用 SQL 服务器来存储会话状态。这比“滚动你自己的”解决方案要好得多。

[http://support.microsoft.com/kb/317604](http://support.microsoft.com/kb/317604)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-14T16:56:28.313

保存 ViewState 的代码可以迭代您保存 ViewStates 的任何目录中的文件，并删除您认为过期的任何文件。从技术上讲，这允许非常旧的 ViewState 挂起——但前提是没有保存新的 ViewState，这样它们就不会溢出你的文件系统。

或者，它可以在后台启动一个线程来执行此操作。存储在应用程序上下文中的标志可用于避免多次启动。我不太喜欢这个解决方案，因为它更复杂。

# asp.net - 由于查询字符串，ASP.NET MVC 中的内容重复

> ID：10639596
> 
> 赞同：0
> 
> 时间：2012-05-17T16:23:41.490
> 
> 标签：asp.net, asp.net-mvc, seo

我可以向每个 ASP.NET MVC 方法添加任何其他参数，而 MVC 只是忽略这些参数。问题是谷歌将这些页面标记为重复内容。例如：

```
public ActionResult Index() 
```

如果我在此页面添加链接，例如[http://example.com/?abc=123](http://example.com/?abc=123)，则它是 Google 的重复内容。有没有办法使用 ASP.NET MVC 避免这种情况并只允许现有参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T16:45:42.317

好吧，您可以使用 Request 对象在查询字符串中循环，如果那里有您不想要的东西，则抛出错误：

```
foreach (string a in Request.QueryString.AllKeys)
{
    // throw error if there is a key here we don't want
} 
```

然而，发生这种情况实际上只是网络的一个事实，我认为你不应该担心它。如果您对此感到担忧，那么请不要在您的网站上使用无效参数创建指向页面的链接。

# javascript - 减去javascript中的不透明度

> ID：10639597
> 
> 赞同：2
> 
> 时间：2012-05-17T16:23:42.477
> 
> 标签：javascript, operators

这可能是一个愚蠢的问题，但我无法让这个超级简单的脚本工作。我需要一个可以将不透明度降低 0.1 的按钮。每次点击它。

我已经尝试了所有这些。

```
x.style.opacity-.3; //This doesn't work. Doesn't do anything.
x.style.opacity=.3; //This gives me an opacity of .3\. 
x.style.opacity-=.3; //This gives an opacity of 0\. Why?
x.style.opacity--; //This will give opacity of 0 as expected. 
```

我什至试过这个：

```
var timesTen = x.style.opacity*10;
timesTen--;
timeTen/10;
x.style.opacity=timesTen; // This gives opacity of 0; 
```

我希望这个问题的答案与对运营商缺乏了解有关。但是我看过大量的算术教程，它们似乎都充满了对我来说非常好用的整数示例。我什至复制粘贴了其中一些并更改了数字，却发现它们停止工作。如果这是一个菜鸟问题，我很抱歉（我确信它是）。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T16:29:54.593

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T16:26:51.020

```
x.style.opacity = parseFloat(x.style.opacity) - 0.1; 
```

为什么这么难？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T16:31:38.123

It doesn't work because the `x.style.opacity` property doesn't exist at this time, it is just applied thanks to css. Here is a workaround:

HTML:

```
<div id="t" style="background: black; opacity: 1;">Hello</div>
<div id="c" style="background: black;">Hello</div> 
```

JS:

```
document.getElementById( 't' ).onclick = function() {
    // This works
    this.style.opacity = this.style.opacity - 0.1;
};
document.getElementById( 'c' ).onclick = function() {
    var opacity = this.style.opacity;
    // If the property exists, just decrement it
    if ( opacity ) {
        opacity -= 0.1;
    }
    // Else, set it (it will only be set once)
    else {
        opacity = 0.9;
    }
}; 
```

Demo: [http://jsfiddle.net/Ralt/xDFBY/](http://jsfiddle.net/Ralt/xDFBY/)

# zend-framework - Zend_Form_Element_Select 的奇怪行为

> ID：10639600
> 
> 赞同：1
> 
> 时间：2012-05-17T16:23:44.897
> 
> 标签：zend-framework, zend-form, zend-db, zend-form-element

我的 Zend Form 有奇怪的行为。用“选择”按钮填充的字段在数据库中保持为空（NULL），其中一个字段的值放在另一个字段中。这是我的代码：

```
public function init()
{
    $this->setName('projet');
    $id = new Zend_Form_Element_Text('codeProjet');  //works great
    $id->setLabel('Code du Projet');
    $nomproj = new Zend_Form_Element_Text('nomProjet');  //is filled with the codeEntreprise value
    $nomproj->setLabel('Nom du Projet')
    ->setRequired(true)
    ->addFilter('StripTags')
    ->addFilter('StringTrim');
    $deb = new Zend_Form_Element_Text('dateDebut');   //works great
    $deb->setLabel('Date du début')
    ->setRequired(true)
    ->addFilter('StripTags')
    ->addFilter('StringTrim');
    $fin = new Zend_Form_Element_Text('dateFin');   //works great
    $fin->setLabel('Date de fin')
    ->setRequired(true)
    ->addFilter('StripTags')
    ->addFilter('StringTrim');
    $montant = new Zend_Form_Element_Text('montantPrevu');  //works great
    $montant->setLabel('Montant prévu')
    ->setRequired(true)
    ->addFilter('StripTags')
    ->addFilter('StringTrim');
    $chef = new Zend_Form_Element_Select('matriculeChef');  //remains empty
    $options=array('select'=>'[select]');
    $chef->setLabel('Chef de Projet')
    ->setRequired(true);

    $boss = new Application_Model_DbTable_Developpeur();
    foreach($boss->fetchAll() as $p)
        $options[$p['matricule']]=$p['prenom'].' '.$p['nom'];
    var_dump($options);
    $chef->addMultioptions($options);
    $chef->setValue($selected);

    $boite = new Zend_Form_Element_Select('codeEntreprise');   //remains empty
    $option=array('select'=>'[select]');
    $boite->setLabel('Nom de l\'entreprise');
    $entr = new Application_Model_DbTable_Entreprise();
    foreach($entr->fetchAll() as $p)
        $option[$p['codeEntreprise']]=$p['nom'];
    var_dump($option);
    $boite->addMultioptions($option);

    $envoyer = new Zend_Form_Element_Submit('envoyer');
    $envoyer->setAttrib('id', 'boutonenvoyer');

    $this->addElements(array($id, $nomproj,$deb,$fin,$montant,$chef,$boite, $envoyer));
} 
```

您是否知道为什么一个字段填充了错误的值，以及为什么有些字段在数据库中仍然为空？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T21:11:11.283

您应该使用`$form->populate($dataFromDb or $_POSTdata)`来填充 IMO 的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T22:53:29.330

在以下行：

```
$chef->setValue($selected); 
```

$selected 来自哪里？

# asp.net-mvc - 在 Webgrid 中将布尔值显示为复选框

> ID：10639605
> 
> 赞同：6
> 
> 时间：2012-05-17T16:24:03.360
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, checkbox, webgrid

我正在尝试使用 Webgrid，我可以让数据显示，但布尔值是我遇到问题的地方。我只想显示一个具有我的布尔值的复选框。我已经能够在网格中获得一个复选框，但它是可编辑的，并且没有正确显示该值。

```
grid.GetHtml(tableStyle: "table", alternatingRowStyle: "alternate", headerStyle: "header",
columns: grid.Columns(grid.Column(columnName: "string1", header: "String1", format: @<text>@item.string1</text>),
grid.Column(columnName: "bool1", header: "bool1", format: bool1? </text>), 
```

如果有人以前这样做过，并且可以阐明如何正确地将 bool 显示为复选框，那将不胜感激！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-17T16:36:36.687

试试这个 bool 列：

```
grid.Column(columnName: "bool1", 
    header: "bool1", 
    format: (item) => @Html.Raw("<input type='checkbox' " + ((item.bool1==true) ? "checked" : "") + " disabled='disabled' />")
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-19T21:44:41.467

下面是 mvc5 中复选框的工作代码。

```
grid.column("Active", header: "Assign",
  @if (@item.Active){<input type="checkbox" checked="checked"  spellcheck="true"/>}
  else{<input type="checkbox"  spellcheck="true" />} </text>) 
```

# php - 检测推文或消息的情绪

> ID：10639607
> 
> 赞同：8
> 
> 时间：2012-05-17T16:24:11.710
> 
> 标签：php, machine-learning

是否有任何 API 可以从字符串中提取情绪（用于 PHP，但可以用任何语言实现）？

如果一个不存在，我将如何构建一个分类器，大概与机器学习相关的东西，我提取具有已知正面/负面的单词。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T16:29:53.957

我会建议[AlchemyAPI](http://www.alchemyapi.com)。他们有非常简单的 API（应该不难使用。对于您的具体情况，请查看[此处](http://www.alchemyapi.com/api/sentiment/textc.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T08:27:42.457

使用 AlchemyapI 的上述建议，这是一个基于 Facebook 状态的非常简单的系统

```
 $id = CURRENT USER ID;
  $message = array(); //the users posts with scores
  $status = $fb->fql("SELECT status_id, message FROM status WHERE uid=$id LIMIT 10");
  foreach($status as $stat) {
    $message = file_get_contents("http://access.alchemyapi.com/calls/text/TextGetTextSentiment"
                      ."?outputMode=json&apikey=MYAPIKEY"
                      ."&text=".urlencode($stat['message']));
    $data = json_decode($message); //get reply
    $messages[] = array("status"=>$stat['message'], "score"=>($data->docSentiment->type!="neutral") ? $data->docSentiment->score : 0); //save reply
  }

  $user = $fb->api("/".$id); //query the user

  $content .= "<h3>".$user['name']."</h3>";

  $total = 0;
  $count = 0;
  foreach($messages as $message) {
    $total += $message['score'];
    if($message['score']!=0) $count++;
  }

  $content .= 'Has an average rating of '.$total/$count.' <meter min="-1" max="1" value="'.$total/$count.'"></meter><br /><br />';

  foreach($messages as $message) {
    $content .= '<b>'.$message['status'].'</b> '.$message['score'].'</br>'
               .'<meter ' //class="'.($message['score'] == 0 ? "yellow" : $message['score'] < 0 ? "red" : "green").'" '
               .'value="'.$message['score'].'" min="-0.5" max="0.5" optimum="0">'.$message['score'].' out of -1 to 1</meter><br /><br />';
  } 
```

# wordpress - Wordpress Index.php 未加载

> ID：10639625
> 
> 赞同：3
> 
> 时间：2012-05-17T16:25:26.527
> 
> 标签：wordpress, apache2

我是这里的新手。我在 Apache2 运行的服务器上安装了 wordpress。但是 wordpress 不加载 index.php 页面。我可以访问 deshboard 并且所有其他类别都显示良好。但是主页 url 没有加载 index.php。尽管我尝试在我的网址末尾添加 /index.php，但它仍然无法正常工作。它只是显示404错误。当我查看主题目录和 wordpress 目录时，有 (index.php) 文件。

所以我用谷歌搜索解决方案。一些建议添加 `directoryindex index.php`到`.htaccess`文件中。我这样做了，导致 500 内部服务器错误。

google 中的一些帖子建议查看 Apache2 下的 dir.conf 和 httpd.conf。在我的 httpd.conf 文件中，我有这行代码

`SSLcertificateChainfile /etc/ssl/certs/secure_yosalasd_org.ca-bundle`

在我的 dir.conf 文件中，我有这行代码

```
<IfModule mod_dir.c>
DirectoryIndex index.php index.html
</IfModule> 
```

我似乎找不到这个问题的答案。如果有人能找出这里的问题，我将不胜感激。

非常感谢你

问候

坤

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T16:30:01.643

This may be a long shot, but once saw a simillar problem which in the end the problem was that there was an index.html file as well in the folder. Make sure such file does not exist.

And did you try re-installing?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-27T01:27:44.077

您可以使用此 SSH 命令更改主目录和子目录所有 php 文件的权限

```
find /top/level/directory -type f -name "*.php" -print | xargs chmod 644 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T16:41:40.997

可能是 htaccess 的前提不允许它工作，这将导致找不到页面

如果您通过 root 访问上传脚本

试试这个命令

```
chown -hR user:user folder_path;chmod -R 644 folder_path/*.php 
```

用你的用户名替换用户，用wordpress的完整路径替换文件夹路径

# 编辑：

问题是你的主题不包括 index.php

尝试探索您的主题目录，并检查是否有 index.php 文件，或切换到另一个主题

如果文件存在，请尝试使用我上面提供的命令再次更改文件权限，我已经对其进行了编辑

# android - 启动服务和状态栏/通知并与之交互的正确方法

> ID：10639629
> 
> 赞同：0
> 
> 时间：2012-05-17T16:25:40.603
> 
> 标签：android, service, notifications

我有一个可以正常工作的广播接收器，但现在我想将发送通知发送到状态栏。由于 BroadcastReceiver 不能直接做到这一点，看起来我需要创建一个服务来为我做到这一点，对吗？

[所以我使用http://developer.android.com/reference/android/app/Service.html](http://developer.android.com/reference/android/app/Service.html)提供的示例创建了一个服务

除了一些小的调整之外，就是那个代码。我使用 context.startService(new Intent(context, AlertUser.class)); 从广播接收器启动服务

发生的事情是它确实在状态栏中显示了消息。然后当我清除并让它生成一个新的消息时，服务代码没有执行。一旦开始，我是否会以不同的方式与他的服务交互？从我读到的内容来看，如果是同一过程的一部分。

另外，我如何将诸如从 BroadcastReceiver 到服务的字符串之类的信息共享到它是要在通知中显示的信息？

谢谢，

坦率

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T16:35:52.287

> 由于 BroadcastReceiver 不能直接做到这一点，看起来我需要创建一个服务来为我做到这一点，对吗？

A`BroadcastReceiver`可以显示`Notification`.

> 一旦开始，我是否会以不同的方式与他的服务交互？

并不真地。如果您通过 向服务发送命令`startService()`，这些命令将在`onStartCommand()`.

> 我如何将诸如从 BroadcastReceiver 到服务的字符串之类的信息共享到它是要在通知中显示的信息？

`Intent`将它传递给你传递给的额外内容，然后将其从in 中`startService()`检索出来。`Intent``onStartCommand()`

# c# - resources.GetObject("") 在哪里执行？

> ID：10639632
> 
> 赞同：3
> 
> 时间：2012-05-17T16:25:56.067
> 
> 标签：c#, resources, custom-controls

我在表单上有一个自定义控件。基本上，我的 Visual Studio 在过去 5 个小时里都被 fubared 了，因为我的属性是在初始化时加载的。

**编码：**

```
this.customControl.customProp = ((System.Collections.Generic.List<customType>)(resources.GetObject("customControl.customProp"))); 
```

我想知道的是这段代码实际上是在哪里执行的，或者它是否将这些数据存储在某个地方？现在让我感到沮丧的是，实际上有与此资源对象相关联的数据，但是，在我查询数据库之前，数据不会被加载。我似乎无法找到它从哪里获取数据。

我还查看了资源文件和“其他”部分，但没有看到任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T16:33:22.937

在您的整个解决方案中搜索“customControl.customProp” - 这应该会告诉您它的定义位置。它将位于 .resx 文件中。

# c# - 无法在 Visual Studio 2010 中编辑或添加引用文件的路径

> ID：10639641
> 
> 赞同：12
> 
> 时间：2012-05-17T16:26:38.697
> 
> 标签：c#, visual-studio-2010

无法编辑或添加参考文件的路径，我无法编辑或添加参考文件的路径。我在工作中继承了一个项目。当我打开项目并转到 Visual Studio 2010 IDE 中的引用部分时，有一些黄色的小警告标志表明那里列出的引用有问题。但是当我单击该项目并查看缺少的路径时，我发现名称“路径”是灰色的，这表明我无法对其进行编辑，而且果然，我无法将路径名称添加到相邻的字段中。这是什么原因造成的？我在编辑模式下签出了解决方案文件和项目文件。

当我打开项目文件时，错误列表还针对每个缺少的引用给出警告：“找不到引用组件'（文件名）'”

好吧，我知道他们在哪里，但是编辑指向那里的路径是有问题的。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-17T16:34:48.247

我认为在这种情况下你有两个选择：

1.  删除损坏的引用并将它们重新添加到项目中 - 如果您没有太多损坏的引用，这很容易做到。

2.  在解决方案资源管理器中右键单击项目文件并选择“编辑项目文件”并手动修复参考提示路径（项目文件为 XML）。保存并再次右键单击解决方案资源管理器中的项目文件，然后选择“重新加载项目”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T17:32:00.963

手动编辑项目文件发现问题。项目文件是一个 xml 文件。没过多久，就在错误的路径中找到了引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-08T23:30:14.093

我有同样的问题，上述解决方案都没有奏效。我唯一应该做的就是右键单击我的 sln 文件，单击“启用 nuget 包还原选项”，保存它，关闭 Visual Studio。再次打开它，清理并重建解决方案。Visual Studio 成功重建了解决方案。

[![]确保您已单击启用 Nuget 包还原](../Images/8e38910a3f2e33180ed484e873a85b29.png)](https://i.stack.imgur.com/PZoDJ.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-26T11:06:47.450

我在添加引用时也遇到了问题我会添加一个引用并且路径总是空的最终帮助是右键单击项目>卸载项目再次右键单击>在项目文件中编辑项目文件滚动到底部并删除名为：

```
<Target Name="EnsureNuGetPackageBuildImports" BeforeTargets="PrepareForBuild">
....
</Target> 
```

再次重新加载项目并构建

# php - 用 preg_replace 替换 \r\n，因为 nl2br() 在 real_escape 之后不起作用

> ID：10639646
> 
> 赞同：0
> 
> 时间：2012-05-17T16:26:55.410
> 
> 标签：php, preg-replace

我有以下用户生成的字符串：

```
$str = 'A

B'; 
```

我要表演

```
$str = mysql_real_escape_string($str); 
```

给它，因为我要把它放在我的数据库中。如果我现在回显它，它会显示为“A\r\n\r\nB”。

之后如何将 \r\n 转回换行符，例如使用 preg_replace？

提前致谢

# ios - 我无法使用非主 MOC 在后台线程上创建 NSManagedObject 的新实例

> ID：10639647
> 
> 赞同：0
> 
> 时间：2012-05-17T16:27:00.850
> 
> 标签：ios, cocoa-touch, cocoa, core-data, nsmanagedobject

我研究了大量关于后台线程核心数据的帖子，我觉得我理解（在纸上）需要发生什么。我想我们会看到的。我正在将现有的 OS X 应用程序迁移到 Core Data，并且`NSManagedObject`在异步线程上创建 my 的新实例时遇到问题。

这是我在进入后台线程后立即运行的代码示例：

```
NSLog(@"JSON 1");
NSManagedObjectContext * context = [[NSManagedObjectContext alloc] init];
[context setPersistentStoreCoordinator:[[NSApp delegate] persistentStoreCoordinator]];
asset = (MTAssetInfo*)[NSEntityDescription insertNewObjectForEntityForName:@"Info" inManagedObjectContext:context];
NSLog(@"JSON 2"); 
```

结果是第一条日志消息`(@"JSON 1")`被调用了 31 次，而第二条`(@"JSON 2")`则从未被调用。该对象未正确制作和返回。

该`Info`实体的模型非常复杂，有一些可转换的属性，这些属性可能设置正确，也可能不正确。奇怪的是，类似的代码在主线程上运行，而主 MOC 运行良好。没有问题。

编辑 - 更多上下文

异步调用来自这里：

```
for (NSNumber *sectionID in sectionsToShow) {
    dispatch_group_async(group, queue, ^{
        MTAssetInfo *asset = [self assetWithRefID:[sectionID unsignedIntegerValue]];
        if (asset != nil) {
            [sectionsLock lock];
            [sectionsTemp addObject:asset];
            [sectionsLock unlock];
        }
    });
} 
```

由于其他代码片段，该`assetWithRefID`方法永远不会返回对象。它永远不会成功地将 NSManagedObject 从后台线程的上下文中拉出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T19:17:14.907

您将必须提供更多信息才能获得真正的帮助，但我敢打赌，您的问题是 NSManagedDocument 后台线程中发生的错误。

我会为所有消息（名称：nil object：nil）注册一个 NSNotificationCenter，然后将它们打印出来。我敢打赌，您会在那里看到失败的状态更改或错误消息。

您可能想在它周围尝试一个 @try/@catch 块，以查看是否抛出了异常。

也许它会给你更多的继续。

另一个建议... Swizzling 不一定是生产产品的正确工具，但它在调试方面几乎是无与伦比的。我已经对几个完整的类进行了方法转换，以便它在每次调用之前/之后发送详细的 NSNotification。

它为我节省了大量时间，并帮助我找到了一些邪恶的错误。现在，当 CoreData 中发生某些事情时，我取出我的一组类，将它们链接起来，然后查看我想要的所有细节。

我知道这并不能完全回答你的问题，但希望它能让你走上正轨，这样你就可以提供更多信息并解决所有问题。

如果这对您来说太多了，请创建一个子类并实例化它，并使用类似的方法调用 super。您可以很容易地了解整个流程。

# jquery - 如何使用 jQuery 获取自定义属性的值？

> ID：10639651
> 
> 赞同：-3
> 
> 时间：2012-05-17T16:27:23.047
> 
> 标签：jquery

如何使用 jQuery 获取自定义属性的值？

```
<a href="" custom="this value"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T16:29:02.923

```
var value = $('#ELEMENT-ID').attr('the-attribute'); 
```

`ELEMENT-ID`您的元素的占位符在哪里`id`。

[**演示**](http://jsfiddle.net/rXXVZ/)

请注意，自定义属性不是有效的 HTML，尽管在几乎所有现代浏览器中它们都会被忽略。

无论如何，你应该给你的自定义属性一个前缀，`data-`比如：
`data-the-attribute`

您可以使用 jQuery`data`来获取此值：

```
var value = $('#ELEMENT-ID').data('the-attribute'); 
```

[**演示**](http://jsfiddle.net/3wZnn/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T16:29:40.630

虽然确实可以设置和检索自定义属性，但作为一个规则使用[`data-*`](http://api.jquery.com/data/)系统会更好。

**示例 HTML：**

```
<p id="someElement" data-myValue="myValue"> Hello world </p> 
```

**示例 Javascript：**

```
// to get a data-* attribute:
var someVariable = $("#someElement").data("myValue");

// to set a data-* attribute:
$("#someElement").data("myValue", someVariable); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T16:33:05.010

使用以下内容，例如您的自定义属性名称是“`custom"`

```
var mycustomattributevalue = $("a").attr("custom"); 
```

# git - 从 powershell 启动非阻塞进程

> ID：10639654
> 
> 赞同：8
> 
> 时间：2012-05-17T16:27:31.527
> 
> 标签：git, powershell, asynchronous, nonblocking

我正在编写一个需要同时将代码推送到多个 git 存储库的 powershell 脚本？

这是我到目前为止的脚本：

```
param(
    [parameter(Mandatory=$true)]
    [string]$repoPath,
    [parameter(Mandatory=$true)]
    [array]$remoteRepos
)

pushd $repoPath
$remoteRepos | % { 
    #Want to exexcute this without blocking
    & git push $_ master --fore -v 
}
popd 
```

这是我执行脚本的方式：

```
gitdeploy.ps1 -repoPath c:\code\myrepo -remoteRepos repo1,repo2 
```

如何以`& git push $_ master --fore -v`非阻塞方式执行？

**解决方案**

感谢@Jamey 的解决方案。我执行了这个命令：

```
Start-Process "cmd.exe" "/c git push $_ master --force -v" 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-17T17:02:11.523

您还可以使用 start-process 在附加命令窗口中运行每次推送。

```
start-process -FilePath "git" -ArgumentList ("push", $_,  "master", "--fore", "-v") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T16:47:05.677

Micah，您可以使用 start-job 在后台运行它 - [http://technet.microsoft.com/en-us/library/dd347692.aspx](http://technet.microsoft.com/en-us/library/dd347692.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-13T22:40:29.870

怎么样`start git "push $_ master --force -v"`

# php - strtolower 因阿拉伯字符而失败

> ID：10639657
> 
> 赞同：4
> 
> 时间：2012-05-17T16:27:41.553
> 
> 标签：php

我的网站允许用户使用阿拉伯/英文名称注册

我正在尝试将用户的名字和姓氏转换为小写

我正在使用这个功能

```
$first_name = strtolower ( $_POST['first_name'] ); 
```

如果我尝试输入阿拉伯名称，我会得到这个编码（ø¹ù„ø§ø¡）

自己试试

```
<?
echo 'مصر'; // return مصر
echo strtolower('مصر'); // return ø¹ù„ø§ø¡
?> 
```

?>

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-17T16:29:18.413

您不能`strtolower`在 UTF-8 编码字符串上使用，只能在 ISO 8859-1 上使用。改为使用**[`mb_strtolower()`](http://il.php.net/manual/en/function.mb-strtolower.php)**。您还需要指定使用的编码，确保设置正确（可能`"UTF-8"`）。

```
<?
echo 'مصر'; // return مصر
echo mb_strtolower('مصر', 'UTF-8'); // return مصر
?> 
```

# algorithm - 检查数组 B 是否是 A 的排列

> ID：10639661
> 
> 赞同：10
> 
> 时间：2012-05-17T16:28:03.050
> 
> 标签：algorithm, permutation

我试图找到解决方案，但无法摆脱我的想法。

给定两个未排序的整数数组 A 和 B。我们必须检查数组 B 是否是 A 的置换。如何做到这一点。即使对数字进行异或也不起作用，因为可能有几个反例具有相同的异或值 bt 不是彼此的排列。

解决方案需要 O(n) 时间和 O(1) 空间

欢迎任何帮助！谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-17T16:52:50.273

这个问题是理论上的，但你可以在 O(n) 时间和 o(1) 空间内完成。^(分配一个由 2 32 个)计数器组成的数组并将它们全部设置为零。这是 O(1) 步骤，因为数组具有恒定大小。然后遍历这两个数组。对于数组 A，递增与读取的整数对应的计数器。对于数组 B，将它们递减。如果在数组 B 的迭代过程中遇到负计数器值，请停止 --- 数组不是彼此的排列。否则在最后（假设 A 和 B 具有相同的大小，一个先决条件）计数器数组全为零，并且这两个数组是彼此的排列。

这是 O(1) 空间和 O(n) 时间的解决方案。然而，这并不实用，但很容易作为面试问题的解决方案通过。至少它应该。

## 更晦涩的解决方案

*   使用*非确定性*计算模型，可以在 O(1) 空间、O(n) 时间内通过猜测两个数组上具有不同计数的元素来检查两个数组是否**相互**排列，然后计算该元素在两个数组上的实例。

*   在计算的*随机*模型中，构造一个随机交换哈希函数并计算两个数组的哈希值。如果散列值不同，则数组不是彼此的排列。否则他们可能是。重复多次以使错误概率低于所需阈值。同样在 O(1) 空间 O(n) 时间方法上，但是是随机的。

*   在*并行*计算模型中，让“n”为输入数组的大小。分配“n”个线程。每个线程 i = 1 .. n 从第一个数组中读取第 i 个数；让它成为x。然后同一个线程计算第一个数组中 x 出现的次数，然后检查第二个数组中的相同计数。每个线程都使用 O(1) 空间和 O(n) 时间。

*   将整数数组 [ a1, ..., an ] 解释为多项式 x ^(a1) + x ^(a2) + ... + x ^(an)其中 x 是一个自由变量，并以数值方式检查获得的两个多项式的等价性。对 O(1) 空间和 O(n) 时间操作使用浮点运算。由于舍入误差和等价的数值检查是概率性的，这不是一种精确的方法。或者，解释以素数为模的整数多项式，并执行相同的概率检查。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-20T04:08:31.060

如果我们被允许自由访问大量素数，您可以通过利用素数分解的特性来解决这个问题。

对于这两个数组，计算每个整数 i 的 Prime[i] 的乘积，其中 Prime[i] 是第 i 个素数。如果它们是彼此的排列，则数组乘积的值相等。

质因数分解在这里有帮助有两个原因。

1.  乘法是传递的，因此计算乘积的操作数的顺序是无关紧要的。（有些人提到如果对数组进行排序，这个问题将是微不足道的。通过乘法，我们隐式排序。）
2.  素数无损相乘。如果给定一个数字，并告诉它它只是素数的乘积，我们可以准确计算出输入了哪些素数以及具体有多少。

例子：

```
a = 1,1,3,4
b = 4,1,3,1
Product of ith primes in a = 2 * 2 * 5 * 7 = 140
Product of ith primes in b = 7 * 2 * 5 * 2 = 140 
```

也就是说，我们可能不允许访问素数列表，但这似乎是一个很好的解决方案，所以我想我会发布它。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-18T15:50:47.117

我很抱歉将其发布为答案，因为它确实应该是对 antti.huima 答案的评论，但我还没有评论的声誉。

计数器数组的大小似乎是 O(log(n))，因为它取决于输入数组中给定值的实例数。

例如，让输入数组 A 全为 1，长度为 (2^32) + 1。这将需要一个大小为 33 位的计数器进行编码（实际上，这会使数组的大小加倍，但让我们坚持理论）。将 A 的大小加倍（仍然是所有 1 值），每个计数器需要 65 位，依此类推。

这是一个非常挑剔的论点，但这些面试问题往往非常挑剔。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-20T22:39:22.800

如果我们不需要就地排序，那么以下方法可能会起作用：

1.  创建一个 HashMap，Key 作为数组元素，Value 作为出现次数。（处理相同数字的多次出现）
2.  遍历数组 A。
3.  在 HashMap 中插入数组元素。
4.  接下来，遍历数组 B。
5.  在 HashMap 中搜索 B 的每个元素。如果对应的值为 1，则删除该条目。否则，将值减 1。
6.  如果我们能够处理整个数组 B 并且此时 HashMap 为空，则成功。否则失败。

HashMap 将使用常量空间，您将只遍历每个数组一次。

不确定这是否是您正在寻找的。如果我错过了关于空间/时间的任何限制，请告诉我。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-28T14:32:05.130

解决方案需要 O(n) 时间和 O(1) 空间。这省略了排序，并且空间 O(1) 要求暗示您可能应该对字符串进行散列并进行比较。

如果您可以访问素数列表，请按照 Checheen 的解决方案进行操作。

*注意：如果面试官说您无权访问质数列表。然后生成质数并存储它们。这是 O(1)，因为字母长度是一个常数。*

否则，这是我的替代想法。为简单起见，我将 Alphabet 定义为 = {a,b,c,d,e}。字母的值定义为：

```
a, b, c, d, e
1, 2, 4, 8, 16 
```

*注意：如果面试官说这是不允许的，那么为 Alphabet 做一个查找表，这需要 O(1) 空间，因为 Alphabet 的大小是一个常数*

定义一个可以在字符串中找到不同字母的函数。

```
// set bit value of char c in variable i and return result
distinct(char c, int i) : int

E.g. distinct('a', 0) returns 1
E.g. distinct('a', 1) returns 1
E.g. distinct('b', 1) returns 3 
```

因此，如果您迭代字符串“aab”，则 distinct 函数应给出 3 作为结果

定义一个可以计算字符串中字母总和的函数。

```
// return sum of c and i
sum(char c, int i) : int

E.g. sum('a', 0) returns 1
E.g. sum('a', 1) returns 2
E.g. sum('b', 2) returns 4 
```

因此，如果您迭代字符串“aab”，sum 函数应该给出 4 作为结果

定义一个可以计算字符串中字母长度的函数。

```
// return length of string s
length(string s) : int

E.g. length("aab") returns 3 
```

在两个字符串上运行方法并比较结果需要 O(n) 运行时间。存储散列值需要 O(1) 的空间。

```
 e.g. 
 distinct of "aab" => 3
 distinct of "aba" => 3
 sum of "aab => 4
 sum of "aba => 4
 length of "aab => 3
 length of "aba => 3 
```

由于两个字符串的所有值都相等，因此它们必须是彼此的排列。

**编辑**：解决方案与评论中指出的给定字母值不正确。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-20T22:53:28.010

您有两个约束：计算 O(n)，其中 n 表示 A 和 B 的总长度以及内存 O(1)。

如果两个系列A，B是彼此的排列，那么还有一个系列C是由A或B的排列产生的。所以问题是将A和B都排列成系列C_A和C_B并比较它们。

一种这样的排列是排序。有几种排序算法可以就地工作，因此您可以就地对 A 和 B 进行排序。现在，在最佳情况下，平滑排序使用 O(n) 计算和 O(1) 内存复杂度进行排序，在最坏情况下使用 O(n log n) / O(1)。

然后每个元素的比较发生在 O(n)，但由于在 O 表示法 O(2*n) = O(n) 中，使用平滑排序和比较会给你一个 O(n) / O(1) 检查是否两个系列是彼此的排列。然而，在最坏的情况下，它将是 O(n log n)/O(1)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-18T16:01:50.380

我只是找到一个反例。所以，下面的假设是不正确的。

* * *

我无法证明这一点，但我认为这可能是真的。

由于数组的所有元素都是*整数*，假设每个数组有 2 个元素，我们有

```
a1 + a2 = s
a1 * a2 = m

b1 + b2 = s
b1 * b2 = m

then {a1, a2} == {b1, b2} 
```

如果这是真的，那么对于具有 n 个元素的数组来说也是如此。

所以我们比较每个数组的和和乘积，如果相等，一个是另一个的排列。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-17T16:53:09.110

You can convert one of the two arrays into an in-place hashtable. This will not be exactly O(N), but it will come close, in non-pathological cases.

Just use [number % N] as it's desired index or in the chain that starts there. If any element has to be replaced, it can be placed at the index where the offending element started. Rinse , wash, repeat.

UPDATE: [This is a similar (N=M) hash table](https://stackoverflow.com/a/8104713/905902) It did use chaining, but it could be downgraded to open addressing.

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-05-17T18:20:24.450

我会使用一个错误几率很低的随机算法。

关键是使用[通用散列函数](http://en.wikipedia.org/wiki/Universal_hashing)。

```
def hash(array, hash_fn):
  cur = 0
  for item in array:
    cur ^= hash_item(item)
  return cur

def are_perm(a1, a2):
  hash_fn = pick_random_universal_hash_func()
  return hash_fn(a1, hash_fn) == hash_fn(a2, hash_fn) 
```

如果数组是排列，它总是正确的。如果它们不同，算法可能会错误地认为它们是相同的，但这样做的概率非常低。此外，通过在同一输入上询问许多 are_perm() 问题，您可以通过线性工作量获得错误机会的指数减少，如果它曾经说不，那么它们绝对不是彼此的排列。

# c - 如何确定分配的 C 缓冲区的大小？

> ID：10639666
> 
> 赞同：11
> 
> 时间：2012-05-17T16:28:20.100
> 
> 标签：c, malloc, buffer, buffer-overflow

我有一个缓冲区，想测试一下缓冲区是否有足够的容量，即找到可以添加到缓冲区的元素数量。

```
char *buffer = (char *)malloc(sizeof(char) * 10); 
```

做一个

```
int numElements = sizeof(buffer); 
```

不返回 10，关于我如何实现这一点的任何想法？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-07-11T19:34:04.567

对于 GNU glibc：

```
SYNOPSIS

#include <malloc.h>
size_t malloc_usable_size (void *ptr); 
```

描述

> malloc_usable_size() 函数返回 ptr 指向的块中的可用字节数，指向 malloc(3) 或相关函数分配的内存块的指针。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-05-17T16:30:34.530

你不能做这样的测试。记住分配了多少内存是您自己的责任。如果缓冲区是由其他人给你的，要求他们也传递大小信息，并让他们有责任传递正确的值或让程序死掉。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-17T16:37:16.380

`buffer`只是一个没有大小信息的指针。但是 malloc() 例程将保存您所做的分配的大小，因此当您 free() 它时，它会释放适量的空间。因此，除非您想深入了解 malloc() 功能，否则我建议您自己保存分配的大小。（有关可能的实现，请参阅其他 API 答案中的示例）。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-17T16:33:12.030

由于`buffer`是指针（不是数组），因此`sizeof`运算符返回指针的大小，而不是它指向的缓冲区的大小。没有标准的方法来确定这个大小，所以你必须自己记账（即记住你分配了多少。）

顺便说一句，对于

```
 char *p = "hello, world\n"; /* sizeof p is not 13\. */ 
```

有趣的是，

```
 sizeof "hello, world\n" 
```

是 14。你能猜到为什么吗？

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-17T16:37:31.220

```
struct buffer
{
  void
    *memory

  size_t
    length;
};

void *buffer_allocate( struct buffer *b, size_t length )
{
  assert( b != NULL );

  b->memory = malloc( length )
  b->length = length;

      // TRD : NULL on malloc() fail
      return( b->memory );
}

int buffer_valid( struct buffer *b, size_t length )
{
  assert( b != NULL );

  if( b->memory == NULL or length > b->length )
    return( 0 );

  return( 1 );
}

void *buffer_get( struct buffer *b )
{
  assert( b != NULL );

  return( b->memory );
} 
```

使用 API 而不是 malloc/free，你不会出错。

# java - 如何找到每个单词的第一个字母？

> ID：10639668
> 
> 赞同：1
> 
> 时间：2012-05-17T16:28:23.997
> 
> 标签：java

我在哪里编辑此代码以从我的输入文件中找到每个单词的第一个字母，保持频率和百分比，而不是每个字符？例如，我可以在哪里实施`charAt(0)`或者我需要更改/添加什么？

```
import java.util.Scanner;
import java.io.File;
import java.io.FileNotFoundException;

public class FirstWordLetters
{
    public static void main(String[] args) throws FileNotFoundException
    {
        char[] capital = { 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J','K', 'L', 'M', 'N',
                'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'};

        char[] small = { 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n',
                'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z' };

        //Input Scanner into the system        
        Scanner scan; 
        //2\. Locate file using the scanner class - search to computer data location
        try {
            scan = new Scanner(new File("F:/programming principles/Programming Principles - PART B/enciphered.txt"));
        } catch (Exception e) { //throw exception e (meaning prevent any runtime errors)
            System.out.println("File not found");
            return;
        }
        //3\. Set up int's (to count, and for the complete count.)
        //the aplhabet has 26 characters so the new int will be 26\. The mem. space of the array.
        int[] count = new int[26];
        int completeTotal = 0;
        //4\. Start scanning the system
        //Scan every line and notify user that each line has been read properly. 
        //each time line has been read store value in array and increment by one
        while(scan.hasNextLine()) {
            String line = scan.nextLine();
            System.out.println("Line read: " + line);
            char[] digit = line.toCharArray();
            for(int i = 0; i < digit.length; i++) {
                for(int j = 0; j < 26; j++) {

                    if(digit[i] == capital[j] || digit[i] == small[j]) {
                        count[j]++;
                        completeTotal = completeTotal + 1;
                        break;
                    }
                }
            }
        }
        //5\. Display results
        //Print the overall data - letter, frequency and percentage.
        System.out.println("");
        System.out.println("First Word Count"); //notify user of what has been counted? (full count)
        for (int i = 0; i < 26; i++) //increment each letter frequency by one each time
        {
            System.out.print(" " + small[i]);
            System.out.print(" " + count[i]);
            //calculate and display percentage for the full count
            if (count[i] > 0)
                System.out.println(" " + (((float) count[i]/completeTotal)*100) + "%");
            else
                System.out.println(" 0%");

        }
    }    
} //end of source code. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T18:48:35.783

这段代码会做到这一点。`inputString`是将您的整个文件存储为单个字符串。另请注意，如果任何单词以非字母字符开头，它将崩溃。此外，它假设每个单词都用空格或换行符分隔。

```
 int[] charCounts = new int[26];

    //Separate the string into individual words
    //The string " /n" tells it to look for spaces and newline characters "/n"
    StringTokenizer st = new StringTokenizer(inputString, " /n");

    //Loop until all the words are processed
    while (st.hasMoreTokens()) {

        //Select the next word
        String word = st.nextToken();

        //Convert the string to upper case so that lower case and upper case characters are represented the same
        word = word.toUpperCase();

        //Get the first character from the word
        char firstChar = word.charAt(0);

        //Convert the character to an integer representing it as an ASCII code
        int charCode = (int) firstChar;

        //Increment the count for that character by 1 
        //(We subtract 65 from the ASCII code because the array starts at 0 but 'A' is at 65)
        charCounts[charCode - 65]++;
    }

    //Obviously replace this section with whatever you like. It's just to show you how to get the values out again.
    for (int i = 0; i < charCounts.length; i++){
        System.out.println((char)(i + 65) + ": " + charCounts[i]);
    } 
```

对于字符串“asduhasa ioajsdu ijqwjfoscn kopeurfc eqiwdfjs/nijoasdij iohwefscd aosd8ch”，输出：

```
A: 2
B: 0
C: 0
D: 0
E: 1
F: 0
G: 0
H: 0
I: 4
J: 0
K: 1
L: 0
M: 0
N: 0
O: 0
P: 0
Q: 0
R: 0
S: 0
T: 0
U: 0
V: 0
W: 0
X: 0
Y: 0
Z: 0 
```

如果你有什么不明白的，我会尽力解释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T16:52:29.697

使用正则表达式怎么样？这是一个样本..

```
String line = scan.nextLine();
System.out.println("Line read: " + line);
for(String s : line.split("\\s+")) { 
    System.out.println(s.charAt(0));
    break;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T16:30:15.220

只是过度使用 substring()

或者你可以使用 charAt()

# php - 按 SKU 搜索，但显示与该 SKU 关联的分组产品

> ID：10639670
> 
> 赞同：0
> 
> 时间：2012-05-17T16:28:30.007
> 
> 标签：php, zend-framework, magento, e-commerce

我需要快速搜索才能按 SKU 进行搜索。我知道这就是 Magento 默认的工作方式，但不幸的是，这只适用于简单的产品（我认为）。

在我的例子中，我有一个使用简单产品设置为“单独不可见”的商店，然后我将与这些简单产品相关联的产品分组。只有简单产品具有 SKU 属性，但它们仅在您打开分组产品时显示。

然后我需要的是让它在这些分组产品中搜索在快速搜索字段中输入 SKU 的简单产品，然后显示匹配的分组产品。

有什么可以做到这一点吗？在我看来，它应该是 Magento 的基线。

编辑：Magento 1.4.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T07:25:42.033

现在正在处理这个问题。我正在考虑尝试的解决方案在这里建议：http: [//www.magentocommerce.com/boards/viewthread/74229/](http://www.magentocommerce.com/boards/viewthread/74229/)

这个想法是设置简单的产品在搜索中可见，而不是单独可见。然后在产品模板中检查简单产品是否是组的一部分。如果是这样，JavaScript 会重定向到分组的产品页面。

仍在考虑更清洁的解决方案，但认为这可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-31T09:50:13.677

不确定人们是否仍在寻找这个问题的答案，但我是，所以无论如何我都会发布我的解决方案:)

只需将所有带空格的 SKU 添加到分组产品的 SKU 上。然后，当有人搜索其中一个时，它会显示您的分组产品。然后你根本不需要对简单的产品做任何事情，它们可以保持隐藏。也适用于可配置项目。

希望我能帮助别人！

知识产权

# ios - 如何测试适用于 iOS 的 Google AdSense

> ID：10639676
> 
> 赞同：0
> 
> 时间：2012-05-17T16:28:47.857
> 
> 标签：ios, adsense

我是 iOS 开发人员，使用 Google AdSense 制作项目。

这是文档 - 如何将 AdSense 集成到应用程序。 [AdSense iOS](https://developers.google.com/adsense-for-mobile-apps/docs/ios/)

但是当我阅读它时，文档说我应该有**客户 ID**并给我创建它的链接。在此之后，我尝试创建我的**客户 ID**。系统说我需要等几天，因为我的申请被考虑了。一段时间后，我收到一条消息**，我们目前无法接受您加入 AdSense。**

**内容不足**

但我的问题是：

*   如何在没有**客户端 ID**或**测试客户端 ID**的情况下创建测试 iOS 项目，因为我等不及 Google 批准我的应用程序。

谢谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T17:27:19.800

改用 AdMob，很简单，属于 Google，展示 Google Ads 以及其他 AdSense 认证的网络，您不需要应用批准。使用您的 Google 帐户登录。链接：[AdMob](http://admob.com/)

# c# - CLARION 日期转换 C# + 日期加/减

> ID：10639677
> 
> 赞同：6
> 
> 时间：2012-05-17T16:28:48.697
> 
> 标签：c#, tsql, clarion

*（这是针对 ISV 数据库的，所以我是一种逆向工程，无法更改）...

如何在 C# 中将以下日期转换为 int (visa/versa) ...

所以说日期是：

```
5/17/2012 
```

它被转换为 int

```
77207 
```

在数据库中。

起初我以为这是朱利安约会，但事实并非如此。我在玩[Julian Date Question](https://stackoverflow.com/questions/5248827/convert-datetime-to-julian-date-in-c-sharp-tooadate-safe)的方法，但这不匹配。

```
 var date = ConvertToJulian(Convert.ToDateTime("5/17/2012"));
   Console.WriteLine(date);

    public static long ConvertToJulian(DateTime Date)
    {
        int Month = Date.Month;
        int Day = Date.Day;
        int Year = Date.Year;

        if (Month < 3)
        {
            Month = Month + 12;
            Year = Year - 1;
        }
        long JulianDay = Day + (153 * Month - 457) 
        / 5 + 365 * Year + (Year / 4) - 
        (Year / 100) + (Year / 400) + 1721119;
        return JulianDay;
    }

Outputs 2456055 //Should be 77207 
```

我一直在使用此 SQL 进行转换：

```
SELECT Convert(date, CONVERT(CHAR,DATEADD(D, 77207, '1800-12-28'),101)) 
```

它似乎是准确的。我怎么能在 C# 中进行这种转换？有人可以告诉我这是基于什么标准，还是仅仅是随机转换。提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-17T16:51:54.293

```
//TO int
var date = new DateTime(1800,12,28,0,0,0);            
var daysSince = (DateTime.Now-date).Days;

//FROM int
var date = new DateTime(1800, 12, 28, 0, 0, 0);
var theDate = date.AddDays(77207); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-17T16:45:09.530

这似乎是一个[号角日期](http://www.iprogrammable.com/2007/07/31/clarion-date-and-time-in-net/)：

> 自 1800 年 12 月 28 日以来经过的天数

据称，[在 Excel 中显示 Clarion 日期](http://www.clarionmag.com/cmag/v4/v4n12exceldates.html)只需要

> 从值中减去 36161 并将其格式化为日期

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T16:46:20.113

如果是线性公式，应该可以计算出y=mx+b形式的公式。您至少需要两个数据点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-04T18:05:31.697

这是我用来将 Clarion Date 转换为 Julian Date 的 vb.net 代码：

```
 Dim ldblDaysToSubtract As Double = 36161.0

 mclsRevEmployeeRecd.BirthDate(istrBirthDate:=(CDbl(E1Row.Item("BIRTH_DT")) - ldblDaysToSubtract).ToString)

 mstrBirthDate = Format(CDate(Date.FromOADate(CDbl(istrBirthDate)).ToString), "MM/dd/yyyy") 
```

# java - 文件 -> 字节[] -> 字符串 -> 字节[] -> 文件转换

> ID：10639680
> 
> 赞同：1
> 
> 时间：2012-05-17T16:29:01.977
> 
> 标签：java, type-conversion

这基本上就是我想要做的。

我要存档

把它变成一个字节数组

把它变成一个字符串

将其存储在 MySQL 表中

检索字符串

将其转回字节数组

将其转回文件

现在，我为您准备了一些代码，我尽可能地对其进行评论。我的问题是，我在这段代码末尾得到的文件不正确。它缺少信息。这是一个文本文件，所以我应该能够判断文件是否完整。

据我所见，我似乎只得到文件的最后一部分，而不是整个文件。我很确定我在这个转换中的某个地方搞砸了。如果您有关于如何更有效地进行这种转换和检索的建议（仍然牢记数据库和所有这些），也请告诉我！

代码如下所示

```
import java.io.*;
import java.util.StringTokenizer;
import java.util.logging.Level;
import java.util.logging.Logger;

public class main {
    public static void main(String[] args) {
        // The file we want to save.
        File f = new File("build.xml");
        try {
            // Make it into a byte array first
            FileInputStream fis = new FileInputStream(f);
            ByteArrayOutputStream bos = new ByteArrayOutputStream();
            byte[] buf = new byte[1024];
            try {
                for(int readNum; (readNum = fis.read(buf)) != -1;) {
                    bos.write(buf, 0, readNum);
                    System.out.println("read " + readNum + " bytes,");
                }
                StringBuilder s = new StringBuilder();
                // Now we simulate making it into a String, for easier storage
                // in a database.
                for(byte b : buf) {
                    // for debugging
                    s.append(b).append(",");
                    System.out.print(b +",");
                }
                // Now we want to retrieve the file from the database as a string
                File someFile = new File("build2.xml");
                FileOutputStream fos = new FileOutputStream(someFile);
                // We count how many bytes there are in this string.
                // One byte per Token.
                StringTokenizer st = new StringTokenizer(s.toString(),",");
                buf = new byte[st.countTokens()];
                int i = 0;
                StringBuilder t = new StringBuilder();
                // Now we parse out all Bytes from the string, and put them into
                // the prepared byte array.
                while(st.hasMoreTokens()) {
                    byte b = Byte.parseByte(st.nextToken());
                    System.out.print(b + ",");
                    buf[i] = b;
                    i++;
                    // for debugging
                    t.append(b).append(",");
                }
                // Here I print true if both strings are exactly the same
                // which they should be, which means that the bytes are intact
                // before and after conversion.
                System.out.println("\n" +(t.toString().equals(s.toString()) ? true : false));
                // Here we would make the physical file on the machine.
                fos.write(buf);
                fos.flush();
                fos.close();
            } catch (IOException ex) {
                Logger.getLogger(main.class.getName()).log(Level.SEVERE, null, ex);
            }
        } catch (FileNotFoundException ex) {
            Logger.getLogger(main.class.getName()).log(Level.SEVERE, null, ex);
        }

    }
} 
```

[http://pastebin.com/699yuE8f](http://pastebin.com/699yuE8f)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T16:38:37.667

您的方法完全忽略了编码，这不是一件好事。字符**不**等于或不等于字节。

如果您必须按照您描述的顺序执行此操作，请通过以下方式创建字符串：

```
String intermediateString = new String(theByteArray,
                                       theSameEncodingTheFileWasCreatedWith); 
```

同样，当您将字符串转换回字节时，获取如下字节：

```
byte[] bytesToSave = intermediateString.getBytes(theSameEncodingTheFileWasCreatedWith); 
```

但除此之外，使用字符串还有什么意义呢？为什么不直接将字节存储到数据库中？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T16:35:56.670

`bos`您只是搞砸了字符串的创建，并且您没有阅读`buf`.

```
 for(byte b : >>buf<<) {
                // for debugging
                s.append(b).append(",");
                System.out.print(b +",");
            } 
```

否则，我不相信它会起作用或者它是一个好的解决方案。为什么不能简单地将其存储在数据库中？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T16:41:09.823

恕我直言，您共享的代码必须更加复杂。

如果您只对字符串表示感兴趣，为什么还要在字节级别阅读您的文本？

我更喜欢使用[InputStreamReader](http://docs.oracle.com/javase/6/docs/api/java/io/InputStreamReader.html)读取文件。这使您可以直接对字符进行操作。

# log4net - Log4Net RollingFileAppender 生成重复日志

> ID：10639682
> 
> 赞同：2
> 
> 时间：2012-05-17T16:29:04.640
> 
> 标签：log4net, duplicates, rollingfileappender

我在单个服务器上运行 WCF 服务，使用 Log4net 通过 INFO 和 WARN 级别的日志条目跟踪使用情况。使用具有以下非常标准配置的 RollingFileAppender：

```
<appender name="RollingLogFileAppender" type="log4net.Appender.RollingFileAppender">
      <file value="\\mylocation\data\PRD\myApp\MyService"/>
      <appendToFile value="true" />
      <rollingStyle value="Date" />
      <datePattern value="-yyyy-MM-dd'.log'" />
      <staticLogFileName value="false" />
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%date [%thread] %-5level %logger - %message%newline" />
      </layout>
    </appender>
   <root>
      <level value="ALL" />
      <appender-ref ref="RollingLogFileAppender" />
      <appender-ref ref="ADONetAppender_SqlServer" />
    </root> 
```

我还使用了 ADONetAppender，它接收重定向的“WARN”级数据并通过存储过程将其写入 SQL 服务器中的数据库表。这个配置有点长，所以为了可读性我省略了它。

我在我们的开发和 TST 环境中有这个设置，它运行良好。在 PRD 环境下，似乎会生成重复的日志文件。第一个是根据我指定的模式命名的，即“logfile-yyyy-mm-dd.log”。第二个文件看起来像第一个文件的补充，日期模式重复，即“logfile-yyyy-mm-dd.log.-yyyy-mm-dd.log”。

更有趣的是，两个文件中包含的条目按时间重叠。文件 1 可能包含上午 8 点到上午 12 点的条目，文件 2 也将包含同一时间段的条目。这些条目不是重复的，它们是由服务的不同用户生成的。文件 1 和 2 的副本几乎可以是任意大小，因此这不是达到大小或日期/时间阈值并生成下一个所需日志文件的问题。

DB 表条目包含所有预期的行，其中一些包含在每个日志文件中。这些行仅由 WARN 级别的日志记录生成，并且一些 WARNing 出现在每个日志文件中。

我已经从我们商店的一些 log4net 精明的人那里得到了这个反馈，但是没有人知道可能导致这种重复文件行为的原因。来自 Stackland 的任何想法表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T16:55:53.417

Your date pattern shouldn't have .log after it. I also am unsure why you have two appenders declared in the root. You should be able to get rid of the root altogether, given the rest of your config it has no purpose (assuming you don't have more that isn't in the example).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-15T11:26:30.413

我发现当记录到的文件被另一个线程或进程锁定时会发生这种情况。

我假设 Log4Net 创建另一个文件，因为它无法登录到配置的日志文件，因此创建一个新文件并记录到它，但我必须通过 log4net 代码来确定这个假设。

尝试添加

```
<lockingModel type="log4net.Appender.FileAppender+MinimalLock" /> 
```

到 appender 元素以最小化锁定量。请注意，使用 MinimalLock 会产生额外的开销：http: [//logging.apache.org/log4net/release/sdk/log4net.Appender.FileAppender.MinimalLock.html](http://logging.apache.org/log4net/release/sdk/log4net.Appender.FileAppender.MinimalLock.html)

# mysql - 在 MySQL 中满足条件时返回字符串而不是字段值

> ID：10639685
> 
> 赞同：4
> 
> 时间：2012-05-17T16:29:09.607
> 
> 标签：mysql

随着我正在进行的传奇尝试直接在数据库中做事而不是使用一些 php-logic，另一个问题。

例如：我有一个表：`m/ id | by | msg`一个 id，由谁完成以及消息是什么。该`by`字段是一个整数，连接到另一个存储名称的表。通常我会离开加入两个表：

```
SELECT m.id, m.msg, user.name FROM m LEFT JOIN user ON m.by = u.id 
```

与由此产生的关系，例如：

```
1 | Hello World | Richard
2 | Foo Bar     | Some else
3 | Howdy       | Richard 
```

我是理查德并且有`user.id=4`

是否可以显示结果关系`you`而不是满足`Richard`条件的`user.id = (int)`位置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T16:34:51.860

```
SELECT m.id, m.msg, IF(user.id = 4, 'you', user.name) AS name
FROM m LEFT JOIN user ON m.by = user.id 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T16:35:51.647

像这样做：

```
SELECT m.id, m.msg, 
(case when user.id = 4 then 'You'
 else user.name end) as username
FROM m LEFT JOIN user ON m.by = u.id 
```

# python - 控制复制多个文件

> ID：10639689
> 
> 赞同：0
> 
> 时间：2012-05-17T16:29:20.020
> 
> 标签：python, python-2.7

我想在一个目录中复制多个文件，并以 500 为增量复制并重命名文件。例如，C:\Pics 中的前 500 个文件（原始名称随机）将重命名为 500-1000，并将它们放置在新目录中in 被称为 500……。文件 1000-1500 将进入目录 1000，依此类推。

当前代码不会重命名放置的文件，而是将其放入具有正确编号的新目录中。这只是一个开始。我相信下面的代码是一个好的开始，任何人都可以帮助我修改以获得所需的结果吗？

```
import os, glob

target = 'C:\Pics'
prefix = 'p0'        
os.chdir(target)
allfiles = os.listdir(target)        
count = 500
for filename in allfiles:
    if not glob.glob('*.jpg'): continue
    dirname = prefix + str(count)
    target = os.path.join(dirname, filename)
    os.renames(filename, target)
    count +=1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T16:50:13.613

os.listdir 和 glob.glob 是类似的功能。它们都返回文件/目录列表，因此它们不属于同一个循环（至少不是您尝试使用它们的方式）。主要区别在于 os.listdir 只接受一个目录并基本上`*.*`从它返回（减去 . 和 ..），其中 glob.glob 需要一个“通配模式”，它可以包含`*` `?` `[]`在受限制的正则表达式格式中。您可能在这里想到的函数（而不是 glob.glob）是 fnmatch.fnmatch，它将通配模式应用于单个文件名。

> 操作系统。**列表目录**（路径）
> 
> 返回一个列表，其中包含路径给定的目录中条目的名称。该列表是任意顺序的。它不包括特殊条目“。” 和 '..' 即使它们存在于目录中。
> 
> 可用性：Unix、Windows。
> 
> 在 2.3 版更改: 在 Windows NT/2k/XP 和 Unix 上，如果 path 是 Unicode 对象，则结果 > 将是 Unicode 对象列表。无法解码的文件名仍将作为字符串对象返回。
> 
> 全球。**glob**（路径名）
> 
> 返回与路径名匹配的可能为空的路径名列表，该路径名必须是包含路径规范的字符串。路径名可以是绝对的（如 /usr/src/Python-1.5/Makefile）或相对的（如 ../../Tools/ */* .gif），并且可以包含 shell 样式的通配符。结果中包含损坏的符号链接（如在 shell 中）。

抱歉，懒得实际模拟文件并测试它，但我会为你做所有的工作。但这应该可行（或者与我认为您的目标非常接近）。;)

```
import os
import fnmatch
import os.path

target = 'C:\Pics'
os.chdir(target)
allfiles = os.listdir(target)
count = 500
for filename in allfiles:
    if not fnmatch.fnmatch(filename, '*.jpg'):
        continue
    if count % 500 == 0:
        dirname = 'p%04d' % count
        if not os.path.exists(dirname):
            os.mkdir(dirname)
    target = os.path.join(dirname, '%d.jpg' % count)
    os.rename(filename, target)
    count += 1 
```

# php - 多步骤表单 JavaScript 验证以防止继续执行其他步骤

> ID：10639690
> 
> 赞同：0
> 
> 时间：2012-05-17T16:29:21.427
> 
> 标签：php, javascript, jquery, forms

**问题**
我创建了一个多步骤表单，是的，javascript 和所有功能都已经正常运行，但我遇到了这个问题。用户也有 2 个选项在表单中导航，使用下一步按钮或直接单击标题处的步骤。假设用户有一个包含 3 个组的表单，因此他有 3 个步骤。在我的代码中，当他当前处于第 1 步并且必填字段为空时，他无法转到第 2 步，同样适用于下一步按钮。现在的问题是，如果他在第 1 步中并且他单击第 3 步，他可以继续进行，即使它们之间的必填字段为空。我已经迷失了如何捕获这个错误。

**组的格式**
组按表划分，因此 1 组在 1 个表下。

**我如何格式化我的 JS**
我通过向其传递 3 个值来格式化我的 JS。第一个值是当前类别名称，第二个是类别列表，第三个是当前之后的下一个类别。

第一个值用于在进入下一步之前检查是否所有必填字段都已填写，该数组用于隐藏除第三个值“这是在用户单击下一步时完成”之外的所有其他类别，而第三个值用于显示下一步。

**预览** [http://screencast.com/t/QwSVVolb](http://screencast.com/t/QwSVFolb)

**的HTML**

```
<li>step1</li>
<li>step2</li>
<li>step3</li>
<table id ="cat1"></table>
<table id ="cat2"></table>
<table id ="cat3"></table> 
```

**JS**

```
function dispFields2(a, b, c)
        {
            var valid2;
            var blanks2 = Array();
            var email_reg2 = /^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})$/;
            var myVal2 = $('#'+c).find('input.required').map(function() {
                                       return $(this).val();
                                       }).get().join(',');
            var myTitle2 = $('#'+c).find('input.required').map(function() {
                                       return $(this).attr("title");
                                       }).get().join(',');

            var error_form2 = myVal2.split(',');
                var error_title2 = myTitle2.split(',');
                var errorlength2 = error_form2.length;

                for(x=0;x<errorlength2;x++)
                {
                    if(error_form2[x] == '')
                    {
                            if(myVal2 == '')
                            {
                                valid2 = true;
                            }
                            else
                            {
                            blanks2[x] = "Required - "+error_title2[x];
                            valid2 = false;
                            }
                    }
                    else
                    {
                        if(error_title2[x] == 'Email')
                        {
                            if(email_reg2.test(String(error_form2[x]).toLowerCase())==false){
                                blanks2[x] = error_title2[x]+" - Should be valid email";
                                valid2 = false;
                            }
                        }
                        else
                        {
                            if(blanks2 == '')
                            {
                                valid2 = true;
                            }
                        }
                    }

                }
                var requiredS2 = blanks2.toString();
                var nblank2 = requiredS2.split(',').join("\n");

                if(valid2 != true)
                {   
                    alert("Please review:\n\n"+nblank2);
                    document.getElementById(c).style.display = "";
                    document.getElementById(a).style.display = "none";
                }
                else
                {
                    var ssplit = b.split(',');
                    var fieldlength = ssplit.length;
                    var limit;

                    for(i=0;i<fieldlength;i++)
                    {
                        if(a == ssplit[i])
                        {   

                            limit = 1 + i;
                            document.getElementById(a).style.display = "";
                            document.getElementById("tcont").style.display = "";
                            document.getElementById(i).style.color = "#FF7300";
                            if(limit == fieldlength)
                            {
                                document.getElementById("tbutton").style.display = "";
                            }
                            else
                            {
                                document.getElementById("tbutton").style.display = "none";
                            }
                        }
                        else
                        {

                            document.getElementById(ssplit[i]).style.display = "none";
                            document.getElementById(ssplit[i]).style.color = "";
                            document.getElementById(i).style.color = "";
                        }
                    }
                            if(a == "default")
                            {   

                                document.getElementById("captchas").style.display = "";             
                            }
                            else
                            {
                                document.getElementById("captchas").style.display = "none";             
                            }
                }       
        } 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T17:00:16.587

开始禁用第 3 步的按钮，并且仅在用户处于第 2 步时启用它。如果用户从第 2 步移回第 1 步，请再次禁用它。

# wpf - 从视图模型调用视图方法

> ID：10639694
> 
> 赞同：0
> 
> 时间：2012-05-17T16:29:29.867
> 
> 标签：wpf, mvvm

有没有办法从视图模型中调用视图中的方法？这是这样做的好习惯吗？如果不是，我将如何从视图模型中隐藏视图中的元素？我只是有点困惑，因为我习惯于使用 ASP.Net，背后有代码等等。

xml.cs

```
btnsave.visibility = visibility.hidden;
btnclose.visibility = visibility.hidden; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T16:41:44.203

对于在视图中隐藏元素的特定示例，您可能希望在 ViewModel 中设置一些属性，以定义这些元素可见的条件。然后，将 View 中这些元素的 Visibility 属性（最有可能使用 BooleanToVisibilityConverter）绑定到 ViewModel 中的那些属性。

更一般地说，如果可以的话，您希望尽量减少它们之间的直接耦合，但有时“现实”会妨碍您。在某些情况下，我将 View 传递给 ViewModel 的构造函数。其他情况下，它是 View 实现的接口并被传递到 ViewModel。所以有选择。但是你应该确保在做之前你必须走那条路。

例子：

XAML：

```
<Window ...>
    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="_B2VC" />
    </Window.Resources>
    <StackPanel>
        <Button Content="Save" Visibility="{Binding IsSaveButtonVisible}" />
        <Button Content="Close" Visibility="{Binding IsCloseButtonVisible}" />
    </StackPanel>
</Window> 
```

视图模型：

```
public class ViewModel: INotifyPropertyChanged
{

    #region INPC Stuff
    public event PropertyChangedEventHandler PropertyChanged;

    private void RaisePropertyChanged(String propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }
    #endregion

    private bool _IsSaveButtonVisible;
    public bool IsSaveButtonVisible
    {
        get { return _IsSaveButtonVisible; }
        set
        {
            if (_IsSaveButtonVisible != value)
            {
                _IsSaveButtonVisible = value;
                RaisePropertyChanged("IsSaveButtonVisible");
            }
        }
    }

    private bool _IsCloseButtonVisible;
    public bool IsCloseButtonVisible
    {
        get { return _IsCloseButtonVisible; }
        set
        {
            if (_IsCloseButtonVisible != value)
            {
                _IsCloseButtonVisible = value;
                RaisePropertyChanged("IsCloseButtonVisible");
            }
        }
    }
} 
```

然后，您的 ViewModel 会更改这些属性以响应它需要的任何内容（例如，仅当它们更改了某些内容时 Save 才有效 - 一旦更改了某些内容，ViewModel 上的属性就会更新并且会被传播到 View .

如果您需要更多示例，我只是建议您阅读 MVVM。摸索需要一点时间，但是一旦使用它就很棒。

# java - Maven exec:java 和 UncaughtExceptionHandler

> ID：10639711
> 
> 赞同：2
> 
> 时间：2012-05-17T16:30:21.130
> 
> 标签：java, maven, uncaughtexceptionhandler

从 java 命令行运行时，以下代码可以正常工作。但是，当使用 exec:java 运行时，我从未看到该行打印...无论如何要停止这种行为？

```
public static void main(String[] args) throws InterruptedException {
    Thread.setDefaultUncaughtExceptionHandler(new UncaughtExceptionHandler() {

        @Override
        public void uncaughtException(Thread t, Throwable e) {
            System.out.println("Uncaught exception: " + e.getMessage());

        }
    });

    Executors.newSingleThreadExecutor().execute(new Runnable() {

        @Override
        public void run() {
            int i = 1 / 0;

        }
    });
    Thread.sleep(1000);
    System.exit(0);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T16:59:42.163

我的假设是默认的 UncaughtExceptionHandler 被 Maven 本身覆盖。

从[使用指南](http://mojo.codehaus.org/exec-maven-plugin/usage.html)：

> 注意：java 目标不会产生新进程 [...] 否则请考虑使用 exec 目标。

# c++ - gtkmm/c++ first hello world example leaking memory

> ID：10639715
> 
> 赞同：7
> 
> 时间：2012-05-17T16:30:34.953
> 
> 标签：c++, memory, memory-leaks, gtkmm

I'm trying to learn gtkmm, and decided to try gtkmm 2.4 for the time being since it seems to be pretty hard to get 3.0 working on Debian. Anyway, the example I'm trying is the one here: [http://developer.gnome.org/gtkmm-tutorial/2.24/sec-helloworld.html.en](http://developer.gnome.org/gtkmm-tutorial/2.24/sec-helloworld.html.en). It compiles fine and it runs alright aswell, but when i close it valgrind reports a lot of leaks, something along the lines of this (after clicking the button once):

```
==4254== Memcheck, a memory error detector
==4254== Copyright (C) 2002-2010, and GNU GPL'd, by Julian Seward et al.
==4254== Using Valgrind-3.6.0.SVN-Debian and LibVEX; rerun with -h for copyright info
==4254== Command: ./bin/jmb
==4254== 
Hello World
==4254== 
==4254== HEAP SUMMARY:
==4254==     in use at exit: 942,940 bytes in 7,968 blocks
==4254==   total heap usage: 14,191 allocs, 6,223 frees, 3,272,961 bytes allocated
==4254== 
==4254== LEAK SUMMARY:
==4254==    definitely lost: 2,620 bytes in 6 blocks
==4254==    indirectly lost: 5,936 bytes in 187 blocks
==4254==      possibly lost: 358,625 bytes in 1,775 blocks
==4254==    still reachable: 575,759 bytes in 6,000 blocks
==4254==         suppressed: 0 bytes in 0 blocks
==4254== Rerun with --leak-check=full to see details of leaked memory
==4254== 
==4254== For counts of detected and suppressed errors, rerun with: -v
==4254== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 9 from 9) 
```

This happens if i stop the program with C-c or click the close window button (in this case i have to use Shift-Meta-C to close the window because of the window manager). Is this the expected behaviour like MySQL's connector that doesn't allow you to delete that one last pointer? In that case it seems like a lot of memory not being "allowed" to be deleted? Or am i just missing something really simple?

For the sake of it here's my code: (Changed HelloWorld to Test) main.cpp:

```
#include "gui/Test.hpp"
#include <gtkmm/main.h>
int main(int argc, char **argv)
{
  Gtk::Main kit(argc, argv);
  Test t;
  Gtk::Main::run(t);
  return 0;
} 
```

Test.hpp:

```
#pragma once

#include <gtkmm/button.h>
#include <gtkmm/window.h>

class Test
  : public Gtk::Window
{
public:
  Test();
  virtual ~Test();

protected:
  //Signal handlers:
  void on_button_clicked();

  //Member widgets:
  Gtk::Button m_button;
}; 
```

Test.cpp:

```
#include "Test.hpp"
#include <iostream>

Test::Test()
  : m_button("Hello World")   // creates a new button with label "Hello World".
{
  // Sets the border width of the window.
  set_border_width(10);

  // When the button receives the "clicked" signal, it will call the
  // on_button_clicked() method defined below.
  m_button.signal_clicked().connect(sigc::mem_fun(*this,
              &Test::on_button_clicked));

  // This packs the button into the Window (a container).
  add(m_button);

  // The final step is to display this newly created widget...
  m_button.show();
}

Test::~Test()
{

}

void Test::on_button_clicked()
{
  std::cout << "Hello World" << std::endl;
} 
```

Thanks in advance!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T07:11:25.110

考虑到您没有动态内存分配，泄漏不是来自您的代码。由于您`Test t`在堆栈上而不是动态地定义了变量，因此当它超出范围时将被删除。那将是 main() 函数完成的时候，实际上是在整个程序完成之前。Test 类也没有任何*直接*的动态内存分配。通过提及直接，我的意思是直接在该类中，而不是在它包含的属性（gtk 等）中。

为了证明您的 Test 实例确实被删除了，您可以在析构函数中放置一个 printf。当应用程序退出时，您应该会看到输出。

即使您已经动态定义/创建了 Test 实例，您也应该养成***始终***删除您创建的所有内容的习惯。在这种情况下，它只是内存，但它可能是更有价值的资源，如数据库连接、文件系统资源或其他需要在退出时执行的逻辑。

Valgrind 可以为您提供实际内存泄漏发生位置的堆栈跟踪，我很确定您会看到它们在 gtk 代码中。如果是这样，我会考虑提出一个错误。我不会太担心`still reachable`内存（它实际上不是泄漏），而是查看`definitely lost`and `indirectly lost`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T19:14:45.720

假设 Gtk-- 不泄漏内存，您发布的输出可以与此假设兼容。

在程序退出时仍然可以访问一些内存的事实与内存泄漏不同。

以下程序是否泄漏内存？

```
int main() {
     int* a = new int[10];
     return 0;
} 
```

看起来可能是这样，但完整的答案应该是：这取决于！

如果我们不使用 MS/DOS 并且直到程序结束都需要“a”，这很难定义为泄漏......我们可以说程序员将清理的责任留给了底层操作系统。

此外，Valgrind 是一个非常好的和有用的工具，但可以报告误报。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T17:40:34.310

设置 G_SLICE 环境变量以重新配置 GSlice 内存分配器。

```
G_SLICE=always-malloc ./your_application 
```

详情请看[这篇文章](https://live.gnome.org/Valgrind)。

# iphone - 是否可以使用 Core Animation 为 UIView 子类中的属性设置动画

> ID：10639718
> 
> 赞同：0
> 
> 时间：2012-05-17T16:30:44.170
> 
> 标签：iphone, objective-c, animation, core-animation

我已经创建了 UIView 的子类，并且正在尝试为该子类中的属性设置动画。

该属性在 drawRect 中使用，我希望 drawRect 在动画的每个步骤中执行。所以我把它变成了这样的属性设置器：

```
-(void) setFill:(float) f
{
    fill = f;
    [self setNeedsDisplay];
} 
```

但是当我运行动画块时，属性会立即设置。我究竟做错了什么？

动画调用如下所示：

```
[UIView animateWithDuration:3.0f
                          delay:0.0f
                        options: UIViewAnimationOptionCurveLinear
                     animations: ^{ circle1.fill = 50; }
                     completion: ^(BOOL finished) { }]; 
```

这是为 UIView 子类设置动画的正确方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T16:34:23.123

只有 UIView 的某些属性是可动画的（框架、中心、变换...）。您必须编写自己的动画来使用 NSTimer 为您的自定义属性设置动画。

# windows-phone-7 - WP7 - Check for QWERTY Keyboard

> ID：10639719
> 
> 赞同：2
> 
> 时间：2012-05-17T16:30:55.893
> 
> 标签：windows-phone-7, xaml

I'm building an app for WP7 and it occurred to me that the HTC Arrive has a sliding QWERTY keyboard. Is there a way to check for this in XAML and/or C#?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T17:15:26.983

您可以使用

```
bool hasHardwareKeyboard = Microsoft.Phone.Info.DeviceStatus.IsKeyboardPresent; 
```

请参阅[http://msdn.microsoft.com/en-us/library/microsoft.phone.info.devicestatus.iskeyboardpresent(v=vs.92)](http://msdn.microsoft.com/en-us/library/microsoft.phone.info.devicestatus.iskeyboardpresent(v=vs.92))或[硬件键盘事件](https://stackoverflow.com/questions/4883168/hardware-keyboard-event)

# asp.net - Correctly structuring this LinqToSql code

> ID：10639720
> 
> 赞同：1
> 
> 时间：2012-05-17T16:31:05.077
> 
> 标签：asp.net, linq-to-sql, c#-4.0

Normally I use stored procedures / work in SQL so apologies if I get the terminology slightly off here..

I have a database, with 3 seperate tables, and I need to search multiple fields in each of the 3 tables.

Im sure that I am not doing this the mose effective way, initially I am trying to do it in simple seteps to understand it.

I have the following;

```
 var foo1 = entities.table1.Where(a => a.bodyText.Contains(searchString) || a.pageTitle.Contains(searchString));
    var foo2 = entities.table2.Where(b => b.newsArticle.Contains(searchString) || b.newsArticle.Contains(searchString));
    var foo3 = entities.table3.Where(c => c.ImageDescriptionContains(searchString)); 
```

I need to combine all these results into a single repeater for display.

At this point all 3 sets of data are in seperate, unique collections of anonymous data. So whats the best way of converting these into a single coherent bindable source?

I was thinking of itereating through each list in turn, pulling out the fields I need to display and putting them in a new class, then binding a lsit of these classes to the repeater.

But it all seems a bit clunky to me.

Is there a way of doing the search across all 3 tables in one go, and returning just the fields I need from each table, with a common name (i.e. in SQL I could write

```
 select b.newsArticle as myText, 
```

or

```
 select newsArticle, '' 
```

to return the news article and an empty string).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T09:49:43.217

要一次性获得所有结果，您需要定义一个公共类，所有三个查询都将使用该类来存储结果。这个类也可以是匿名的，但为了清楚起见，我会命名它。

```
class Data
{
    public string Text{ get; set;}
} 
```

现在，在您的代码中，您`Data`将从数据库中获取实例，您可以使用`Union`：

```
using( var entities = new YourDataContext)
{
    var foo1 = entities.table1
                       .Where(a => a.bodyText.Contains(searchString) || 
                                   a.pageTitle.Contains(searchString))
                       .Select(a => new Data{ Text = a.bodyText});
    var foo2 = entities.table2
                       .Where(b => b.newsArticle.Contains(searchString) || 
                                   b.newsArticle.Contains(searchString))
                       .Select(b => new Data{ Text = b.newsArticle});
    var foo3 = entities.table3
                       .Where(c => c.ImageDescription.Contains(searchString))
                       .Select(c => new Data{ Text = c.ImageDescription});
    return foo1.Union(foo2).Union(foo3);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T16:39:06.660

这将结合：

```
var foos = foo1.ToList();
foos.AddRange(foo2);
foos.AddRange(foo3); 
```

为了得到你想要的：

```
var myExtractedValues = foos.Select(x => new { 
         Article = !string.IsNullOrEmpty(x.newsArticle)) 
                           ? x.newsArticle 
                           : string.Empty}); 
```

我在这里使用了匿名类型，但您可以将新的 {} 替换为您自己的类型。

我反转 IsNullOrEmpty 上的运算符，但这只是个人喜好（我更喜欢如何读取。）

# jquery - jQuery ajax load() 文件在 localhost 中不起作用 - (w3scools.com jQuery AJAX 示例教程)

> ID：10639723
> 
> 赞同：0
> 
> 时间：2012-05-17T16:31:11.317
> 
> 标签：jquery

无法让本教程在 localhost 中工作： [http ://www.w3schools.com/jquery/tryit.asp?filename=tryjquery_ajax1](http://www.w3schools.com/jquery/tryit.asp?filename=tryjquery_ajax1)

我的 jquery.js 文件有以下代码：

```
$(document).ready(function() {      
    // AJAX //
    $("button").click(function() {
        $("div").load('ajax.txt');
    });
}); 
```

并且 ajax.txt 文件在同一个文件夹中，但没有加载文件。可能是什么问题呢 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T10:12:37.747

load() 函数开始在与 ajax 文件不同的根目录中查找文件。因此，您的文件 ajax.txt 上方的代码应该位于根文件夹中。否则更改以下行：

```
$("div").load('ajax.txt'); 
```

到：

```
$("div").load('assets/js/ajax.txt'); 
```

或您拥有的任何文件夹树，从站点根文件夹开始！

# mysql - How to SELECT a record per category in mysql query?

> ID：10639725
> 
> 赞同：2
> 
> 时间：2012-05-17T16:31:28.630
> 
> 标签：mysql, select, web-crawler

In a table of articles

```
title varchar(255),
category int(11),
processed enum('yes', 'no'),
... other columns 
```

, I want to process rows (`SELECT` a row and then `UPDATE`). However, I need to do this diversely for all categories. Not processing randomly, e.g. all records for a category, but nothing for another.

1.  **Basic Case:** process x rows for each category.

2.  **Advanced Case:** define a daily limit for each category (in its table). This will be similar to crawlers, as we define how many pages should be crawled for a domain in a given period of time.

**Example:**

```
SELECT * from articles WHERE process='no' LIMIT 1
edit the columns in PHP
UPDATE articles .... WHERE id=xx (id comes from SELECT). 
```

Table:

```
id    title    category  process
1     title1   3         no
2     title2   3         no
3     title3   3         no
4     title4   3         no
5     title5   5         no
6     title6   5         no
7     title7   5         no 
```

If I run the query regularly by cron, it will process all articles in category 3 then category 5\. I want a query to process one from category 3, then one from category 5, and so forth. I want to process from all categories gradually.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T17:44:19.553

```
SELECT *
FROM Table
WHERE category =
(SELECT category
FROM Table
WHERE process = 'no'
GROUP BY category
ORDER BY COUNT(category) DESC
LIMIT 1)
ORDER BY id
LIMIT 1 
```

..将为您提供一个具有最小 id 的行，用于未处理的行数最多的类别。子查询返回具有最多 process='no' 行的类别。

如果您的 5s 多于 3s，这将继续给您 5s，直到 3s 多于 5s，然后它将开始与每个查询交替（只要您每次都将行标记为 process = 'yes'）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T18:34:15.957

`$n`要从每个类别中进行选择：

```
SET @last := NULL;
SELECT * FROM (
  SELECT   *,
           @fetch:=IF(category=@last, @fetch-1, $n) x,
           @last :=category
  FROM     articles
  WHERE    process='no'
  ORDER BY category
) t WHERE t.x > 0; 
```

要从表中为每个`category`关联选择：`number``numbers`

```
SET @last := NULL;
SELECT * FROM (
  SELECT   *,
           @fetch:=IF(category=@last, @fetch-1, numbers.number) x,
           @last :=category
  FROM     articles JOIN numbers USING (category)
  WHERE    process='no'
  ORDER BY category
) t WHERE t.x > 0; 
```

[在sqlfiddle](http://sqlfiddle.com/#!2/cfc36/3)上查看它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-20T03:23:33.180

更新**eggyal**的查询：为@n设置变量` SET @n := 3; SET @last := NULL;

SELECT * FROM ( SELECT *, @fetch:=IF(category=@last, @fetch-1, @n) x, @last :=category FROM 文章 WHERE process='no' ORDER BY category ) t WHERE tx > 0 ;

//查询运行`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T18:40:26.300

我认为要在 PHP 中完成的处理是涉及用户编辑或一些 SQL 无法完成的复杂过程（爬网）的东西。在这种情况下，您可以使用此查询从表中获取所需的列`articles`。

每个类别一篇文章：

```
SELECT 
    a.*
FROM 
    category AS c 
  JOIN
    articles AS a 
        ON  a.id = 
            ( SELECT id
              FROM articles AS aa
              WHERE category = c.id
                AND process = 'no'
              ORDER BY whatever
              LIMIT 1
            ) ; 
```

然后更新：

```
UPDATE
    articles
SET
    process = 'yes'
  , other_column = ...
WHERE
    id = ?              --- one of the ids you have previously 
                        --- selected and processed. 
```

# php - 使用php从数据库中回显信息

> ID：10639726
> 
> 赞同：-2
> 
> 时间：2012-05-17T16:31:30.317
> 
> 标签：php, mysql, html, parsing

我在 mysql 中有一个这样的表，名为 links_tbl，它有 5 行数据

```
ID,  LINKurl      LINKname

1   google.com     GOOGLE
2
3
4
5 
```

通过使用 php，我想将 5 行作为链接回显到 html 页面上，如下所示：

```
echo "<li> <a href=$linkurl></a>$LINKname</li>" 
```

我遇到的问题是我无法理解如何从表中获取所有 LINKurl 和 LINKname 行以在列表中回显它们。

任何人都可以帮我编码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T16:38:12.167

您可以使用 PDO 进行查询：

```
$dsn = 'mysql:dbname=testdb;host=127.0.0.1';
$user = 'dbuser';
$password = 'dbpass';

$dbh = new PDO($dsn, $user, $password);
$sth = $dbh->prepare("SELECT LINKurl, LINKname FROM [YOUR TABLE]");
$sth->execute();

/* Fetch all of the remaining rows in the result set */
print("Fetch all of the remaining rows in the result set:\n");

foreach($sth->fetchAll()as $result)
{
     echo "<li><a href=\"{$result[0]}\">{$result[1]}</a></li>"
} 
```

获取的结果将包含字段

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T16:36:06.700

你可以这样

```
$query = "select * from 'yourtbale'";

$result = mysql_query('yourdb',$query); 
```

在您的视图文件中，循环您的结果

```
foreach($result as $value){
     <a href='$value['linkurl']'>$value['linkname']</a>
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T16:53:58.203

这应该有效：

```
//Database Settings
$host = "sql.yourserver.com";
$user = "username";
$pass = "password";
$dbnm = "database_name";

//Connect to Database
$conn = mysql_connect ($host, $user, $pass);
if ($conn) {
$db= mysql_select_db ($dbnm);
if (!$db) {
    die ("Database Not Found"); 
}
} else {
    notify("Fatal Error. Can not connect to Database", ""); 
}

//Form Query
$query =  "SELECT * FROM `links_tbl`";

//Fetch Results
$data = mysql_query($query) or die(mysql_error());

//Start UL
echo "<ul>\n"

//Loop through results
 while($info = mysql_fetch_array( $data )) 
 { 
      //echo the list item
      echo "<li><a href=".$info['LINKurl'].">".$info['LINKname']."</a></li>\n";  
 }

//End UL
echo "</ul>\n" 
```

请记住，您需要在`<a>`输出名称后关闭标签。

# google-chrome - html fileupload control doesnt upload file in Chrome

> ID：10639730
> 
> 赞同：3
> 
> 时间：2012-05-17T16:32:00.817
> 
> 标签：google-chrome, file-upload

I have an asp.net application with a page to upload files (csv file). In this page I have an updatepanel in that I have a html fileupload control.
The fileupload works fine with both IE and Firefox. With chrome, I can see the PostedFile.Filename = "bac.csv", PostedFile.InputStream.Length = 80 But when I copy the Inputstream to a byte array, all the bytes have zero value. Remember this same code works fine with other browsers.

Fiddler also shows different postdata. see below for Chrome and Firefox data that I see in Fiddler. Clearly, Chrome is not posting the file data. What I am doing wrong and how can I fix it.

# Chorme data

```
POST http://nap1557pdv:8081/Test.aspx HTTP/1.1 
Host: nap1557pdv:8081 
Connection: keep-alive 
Content-Length: 1080 
Cache-Control: max-age=0 
Authorization: Negotiate YIIHxQYGKwYBBQUCoIIHuTCCB7WgMDAuBgkqhkiC9xIBAgIGCSqGSIb3EgECAgYKKwYBBAGCNwICHgYKKwYBBAGCNwICCqKCB38Eggd7YIIHdwYJKoZIhvcSAQICAQBuggdmMIIHYqADAgEFoQMCAQ6iBwMFACAAAACjggXiYYIF3jCCBdqgAwIBBaEWGxRVUy5HTE9CQUwuU0NIV0FCLkNPTaIyMDCgAwIBAqEpMCcbBEhUVFAbH25hcDE1NTdwZHYudXMuZ2xvYmFsLnNjaHdhYi5jb22jggWFMIIFgaADAgEXoQMCASqiggVzBIIFb90TTnez5nz7PYYCHnFWHoUr0lL7EAB6ZoYVhl57Rw+YPVA4ETppBF7d+loFVEvph67qrU35Ivax10viOxneO+Lfw3MnJyt67jtpr7nLuObPOZ5q8iSgOXC413xymPmsaaUgGdA9Ngvz2pOE8OvEbJrkYMQQxZZBdtasWTJ8vTUNIgLgiQpJDfWscCVle/++kWWr4HMZbPM4epC9yA9rMl6SF9728tW0Q/3ZLdNnccxuWb+FMUxAd53H6sb6xIotw0ZBomZOwwf++p5+r47Fcpcp/e0d/MBaLEGBeGkYYPvTfeETcoFh1Z+r7mR34YzTe7ubw+13kDs9iAtAk+sSBZDuSe2v7GJoRVaTIl+Rs9e0x4ajBJ9YNTqQ+yv8mk+ezApQW2q4jkrch0y2Z60siTTSebTbB2vkRXHxKQhYkIaieQKSz573M1Gq/fuRfVE25naOuPF0w/VeYP5LXFeTt5nULrcwvCSeMNUOH+clbcGYHYQiI3AAo7A25tge2ZK4hTcd6icgozrnWqtREGS/UrJL6hXO79aWfHmbvsO23LdqqUWQrIYf5waVLt/SKvzBgFtzhbT8l20ngs9t+f5cRCsNQQsz5G1M7JZEz+XYXKKBTwVKhVVeM+ocJGSTpc69i/s/GyVhNumuQtTR0/LDVPwmgzDDSGp31cEsST5Iw7/sWS8I4LtHw3kti4uUyGmL/J6clyMEYzgkEYD64r/tKEdwWNv6iq4PoA072ZRyXEUojGzlqbyw/ou7Evs3Slwzkku58B0nryc3H975+NDoIhHugrp2WtvJ+lEvnf1HpzGyM7KJRnCspSVvDtuQYNdswndRvnSZCeOz2IDwJJXSJK+smfbC32DnOznAHEld0/fJMNYygKhmdckCrpvvrbq5iESnCxKclJneqzhSzSo8KA3HgwUiteNFyeBkvmCw0ewbLiRD79aN8PP++S1HLQseeEAcm6/FEApJni/Vm9J6TiUTtE9/5v+fjokmqme0VhJS5c2U2WBbJSB3Z9ljkhdqySBpeOrnrRWDmJLsIE4H+RD1d3zSkL3KKR8G3agnnt/BEuxVHLpiWNJA71qIqkGW965lRdODpMSgWzQEJpfqELXlF87OvVvrS3WacqerGhQPWsgB9Jq3iVyYIgEn0k/nKd1x06sMohLy05Jwz5BXKZZ61KaYhTUv3nrQBMPe2ofTsSnqa11OYzwLibc2Ktq/fZ3lgj8fvxbFXNsaZyYq3W8Xtn+T9wruGapBDoQhASbr+ziJrgVwp2Frzs/+/0H1lZIG9QR762C6g2T58H9oCQAV89kKN/9b3RcsuZqXcF+GoQm7HyvPGtg3eD5Lp1AJK7X9OrrIiuVhBhHDdFAC2FtID47wHH9rSHewpDmQUdXuC/JKcmKrld+GRKU0VBUiWS3viU592MYOZ17T8zqLpK3yRlFHAskpqpfNClF3A1XgO4yfqcau3ZgCNMZsG6h7aYGWXGCd16KuoU87vOk/JBqd61+JgAHVAkAkIjwzXsNz/Q8KbDdh14NwiK7U2gHXnLW53nn6NTMvCF7xcAhltdmukBksHGMwTrjKA5Dx3F63Jk+8czIyjnrqfMLMZrvypErbYiAi7rsjfbCJ5TIQtzAUvGzUnDNsvncdi9Qw3HBi2NWhNf9polOaSvnfk/lv5QXWZZzY/iq4r0LPgAGR+Quckl00PMPneb+sXZsqzRhGkFSZQKIPHWxlf2DL+dVbMPYBzxqLcXgbKg1AHKzx+85m95JIJhgTm6t+KOwfAO7o2+qmwG1Rbe4VQNOlk7cMocZ2+gdUJ+l+hkRCNa9miwSj6pKt+ZoaeberFn2ii98FaokI9Ou6j9aKQtPrLuc3pIIBZTCCAWGgAwIBEqKCAVgEggFUlfYTsU7l+JAL3MNRQW0F++fScMJMOkdCC/qxS/E4ebyJyx6KCf3jg5PZYNje42R056D04HGzATVc6r7WlugfBfOOtTvlW55BBH6xocA9XRpb79Aorn7fnmEQ0Lli1Y2LymbD2ImnNeQqonjrQG6IcT5yZRVeDG4Xjv9dxKOM/AMYqIDq80PmoBxjpj21phGtt7kO3avxpwkPPSuTOJ8y5fbCwODdpwBWCZmQi80sL+VVISFiJGW+GG6GrMTiXJWMyWR/GMuCoGy4qaOGMeCcJSmAbaPCCHyMJuSn7HcLyq2QszJqW7h/873Wc0ed3xm+KjcSTWc7op1OVqnMbjKDg67I3Pa/OxoC3N1r4U19/NvP5pU1aF+Kx37MW8opo8yuMd6D/cD5I6uC7sWiy0gdeVE+mNJwAzogkbmuR12OmWKcOD0mjCd2a2aCCfgktjj31hOFpQ== 
Origin: http://nap1557pdv:8081 
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.46 Safari/536.5 
Content-Type: multipart/form-data; boundary=----WebKitFormBoundaryoVCxaJFfHyYJTJUZ 
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8 
Referer: http://nap1557pdv:8081/Test.aspx 
Accept-Encoding: gzip,deflate,sdch 
Accept-Language: en-US,en;q=0.8 
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3 
Cookie: ASP.NET_SessionId=tprepknwc3ejjfvmvewhb3ea 

------WebKitFormBoundaryoVCxaJFfHyYJTJUZ 
Content-Disposition: form-data; name="ctl07_HiddenField" 

------WebKitFormBoundaryoVCxaJFfHyYJTJUZ 
Content-Disposition: form-data; name="__EVENTTARGET" 

------WebKitFormBoundaryoVCxaJFfHyYJTJUZ 
Content-Disposition: form-data; name="__EVENTARGUMENT" 

------WebKitFormBoundaryoVCxaJFfHyYJTJUZ 
Content-Disposition: form-data; name="__VIEWSTATE" 

/wEPZwUPOGNmMDIzYmE5MWZmZTE3yZ1szJcaImr6jsC8aAj3Jr/NJZHuYmM9v1nicrGvr1I= 
------WebKitFormBoundaryoVCxaJFfHyYJTJUZ 
Content-Disposition: form-data; name="__EVENTVALIDATION" 

/wEWAgKZhrWmDwLAtdSqDb+OpffaxhvDEvRAly4rTIajFqtN7G6bde9qDsAeL/uL 
------WebKitFormBoundaryoVCxaJFfHyYJTJUZ 
Content-Disposition: form-data; name="ctl00$MainContent$fileUploadChartData"; filename="bac.csv" 
Content-Type: application/vnd.ms-excel 

???????????????????????????????????????????????????????????????????????????????? 
------WebKitFormBoundaryoVCxaJFfHyYJTJUZ 
Content-Disposition: form-data; name="ctl00$MainContent$btnUploadDocument" 

Upload 
------WebKitFormBoundaryoVCxaJFfHyYJTJUZ-- 
```

# Firefox Data

```
POST http://nap1557pdv:8081/Test.aspx HTTP/1.1 
Host: nap1557pdv:8081 
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:8.0) Gecko/20100101 Firefox/8.0 
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8 
Accept-Language: en-us,en;q=0.5 
Accept-Encoding: gzip, deflate 
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7 
Connection: keep-alive 
Referer: http://nap1557pdv:8081/Test.aspx 
Cookie: ASP.NET_SessionId=i2egjzbii2d4ttz4uhripgz4 
Content-Type: multipart/form-data; boundary=---------------------------24464570528145 
Content-Length: 1104 

-----------------------------24464570528145 
Content-Disposition: form-data; name="ctl07_HiddenField" 

-----------------------------24464570528145 
Content-Disposition: form-data; name="__EVENTTARGET" 

-----------------------------24464570528145 
Content-Disposition: form-data; name="__EVENTARGUMENT" 

-----------------------------24464570528145 
Content-Disposition: form-data; name="__VIEWSTATE" 

/wEPZwUPOGNmMDIzYzRlZjk0NDk3xSjtNc5KxDS+sptXgXIwFbIwfngQQcicVPd0sZS0Hes= 
-----------------------------24464570528145 
Content-Disposition: form-data; name="__EVENTVALIDATION" 

/wEWAgKes7e9AgLAtdSqDeYF8SG+RG8hp8rFuJK7HrsxNq8TZlkf0m0bUTEzK9Pq 
-----------------------------24464570528145 
Content-Disposition: form-data; name="ctl00$MainContent$fileUploadChartData"; filename="bac.csv" 
Content-Type: application/vnd.ms-excel 

Symbol,Date,Open,High,Low,Close,Volume 
BAC,4/25/2012,8.21,8.35,8.19,8.23,563453 
-----------------------------24464570528145 
Content-Disposition: form-data; name="ctl00$MainContent$btnUploadDocument" 

Upload 
-----------------------------24464570528145-- 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T15:17:08.367

这是 Chrome 19.0.1084.46 中的一个已知问题。请参阅[http://code.google.com/p/chromium/issues/detail?id=128574](http://code.google.com/p/chromium/issues/detail?id=128574)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T19:18:54.130

我们具有完全相同的行为（仅包含 NUL 值的 jpeg 文件）我们正在使用具有 Windows 身份验证和 Chrome 19.0.1084.46 的 IIS 网络服务器。它是在周二谷歌更新 chrome 时推出的。

现在我们恢复使用 MSIE9

# c# - 带字典的 Linq

> ID：10639739
> 
> 赞同：0
> 
> 时间：2012-05-17T16:32:46.123
> 
> 标签：c#, linq

我有一个运行良好的 linq 数据库函数，但是必须对包含某些我无法控制的信息的类型进行更改。

当前情况是我有一个 asp.net 3.5 站点，信息存储在字典中。

我的代码是

```
Table.Insert(_rules.RuleList
                     .Where(rule => !ruleRecords
                            .Any(r => r.RuleID == rule.RuleID)
             )); 
```

如您所见，它不包括 r.RuleID == rule.RuleID

一切都很好，但是 'r' 不再是一个对象，现在是一个字典。

有什么想法可以通过在 linq 查询中提供键（“RuleID”）来获取字典的值吗？

非常感谢任何建议，但是我无法更新到 4.0，并且我不能将数据不存储在对象中，除非它可以是临时转换

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T17:31:03.010

您的要求（如何获取字典中的值，提供密钥）：，`dict[key]`所以在您的情况下`r[rule.RuleID]`

正如在另一个答案中指出的那样，您可能想要的是：字典。[包含密钥](http://msdn.microsoft.com/de-de/library/kw5aaea4.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T17:13:11.273

只要您的字典的键是`RuleId`，我认为您可以将其重写为：

```
Table.Insert(_rules.RuleList.Where(rule => !ruleRecords.ContainsKey(rule.RuleId)) 
```

# php - 是否有任何用于 google + 的 php api，例如 facebook graph api？

> ID：10639740
> 
> 赞同：-4
> 
> 时间：2012-05-17T16:32:48.710
> 
> 标签：php, google-plus

> **可能重复：**
> [如何获取 google+ 的公共数据以及如何使用 php 从我的网站发布到 google+](https://stackoverflow.com/questions/8983632/how-to-get-the-public-data-of-google-and-also-how-to-post-from-my-site-to-googl)

使用 facebook graph api，我们可以在用户墙上发帖。像这样，是否有任何 api 供 google+ 访问他们的基本个人资料详细信息/张贴在他们的墙上（我不知道它是否在 g+ 中被称为墙 :)）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T16:33:58.600

“Google+ api”在 Google 上的第一个结果：

[https://developers.google.com/+/api/](https://developers.google.com/+/api/)

# jquery - 将缩略图加载到 Div 并使用 cloud-zoom

> ID：10639741
> 
> 赞同：1
> 
> 时间：2012-05-17T16:32:52.850
> 
> 标签：jquery, cloud, zooming

我在将缩略图加载到 div 然后对其使用云缩放时遇到问题，基本上 html 是这样的：

```
<!-- The Original Image -->
<p class="product-image product-image-zoom replace">
<a class="cloud-zoom" id="zoom1" href="src/to/img.jpg" rel="adjustX: 10, adjustY:-4">
<img id="" src="src/to/img.jpg" />
</a>
</p>

<div class="more-views">
   <ul>
    <li>
        <a href=""><img class="image-rollover" src="source/to/img.jpg" width="67" height="67"/></a>
    </li>
     <li>
        <a href=""><img class="image-rollover" src="source/to/img.jpg" width="67" height="67"/></a>
    </li>
     <li>
        <a href=""><img class="image-rollover" src="source/to/img.jpg" width="67" height="67"/></a>
    </li>
</ul> 
```

这是我用来将每个缩略图加载到主 img 标签中的 jquery：

```
jQuery('.image-rollover').hover(function() {
jQuery('.replace img').attr("src", this.src);
jQuery('.zoom').attr("href", this.src);
}); 
```

我还在主图像上使用云缩放：

```
<script type="text/JavaScript" src="<?php echo $this->getSkinUrl('js/cloud-zoom.1.0.2.min.js') ?>"></script> 
```

所以这是我的问题：缩略图可以加载到 div 中，但是每次我将鼠标悬停在新加载的缩略图上时，都会出现云缩放，但仍然显示初始图像，有没有办法让云缩放显示当前加载的图像？

[一只忙碌的猫 http://beta2.stocksale.ca/picture.png](http://beta2.stocksale.ca/picture.png)

请帮忙！！！啊啊啊！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T14:42:57.170

`*$('.cloud-zoom, .cloud-zoom-gallery').CloudZoom();*`只需在 jQuery 操作后重新调用。

# django - 在 django 中，我可以有多个静态应用程序实例吗？

> ID：10639744
> 
> 赞同：1
> 
> 时间：2012-05-17T16:32:59.880
> 
> 标签：django, web-services, apache, django-staticfiles

是否可以拥有多个**静态**应用程序实例？

我有不同类型的资源，我可能想从不同的服务器提供服务`STATIC_URL`：

*   我想从`/static/`
*   我想从`/documents/`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T17:14:56.993

我认为您对以下目的有点误解`contrib.staticfiles`：

> 在以前的 Django 版本中，通常将静态资产与用户上传的文件一起放在 MEDIA_ROOT 中，并在 MEDIA_URL 处提供它们。引入 staticfiles 应用程序的部分目的是更容易将静态文件与用户上传的文件分开。

PDF 文档可能是用户生成的，因此理想情况下它们不会与您的静态文件（css、js）并排存储，而是上传到[`MEDIA_ROOT`](https://docs.djangoproject.com/en/dev/ref/settings/#std%3asetting-MEDIA_ROOT).

在生产中，您必须[配置您的 Web 服务器](https://code.djangoproject.com/wiki/DjangoAndNginx)以提供特定 url 下的目录。

然而，在开发过程中，您可以使用`django.views.static.serve` [不同的 url 前缀来提供不同的目录](https://docs.djangoproject.com/en/dev/howto/static-files/#serving-other-directories)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T17:16:59.747

对的，这是可能的。

我正在使用`urls.py`.

```
if settings.DEBUG:
    urlpatterns += patterns('',
        (r'^docs/(?P<path>.*)$', 'django.views.static.serve', {'document_root': '/hdblog/docs'}),
        (r'^static/(?P<path>.*)$', 'django.views.static.serve', {'document_root': '/hdblog/static'}),
    ) 
```

你应该看看[https://docs.djangoproject.com/en/dev/howto/static-files/?from=olddocs](https://docs.djangoproject.com/en/dev/howto/static-files/?from=olddocs)和[https://docs.djangoproject.com/en/dev/howto/static-files/#服务其他目录](https://docs.djangoproject.com/en/dev/howto/static-files/#serving-other-directories)

# grep - grep 在所有目录中

> ID：10639747
> 
> 赞同：21
> 
> 时间：2012-05-17T16:33:09.697
> 
> 标签：grep, subdirectory

我有一个名为 XYZ 的目录，其中包含目录 ABC、DEF、GHI。我想在所有目录（即 XYZ、XYZ/ABC、XYZ/DEF 和 XYZ/GHI）的所有 *.c 中搜索模式 'writeText' 我可以使用什么 grep 命令？

另外，如果我只想在 XYZ、XYZ/ABC、XYZ/GHI 而不是 XYZ/DEF 中搜索，我可以使用什么 grep 命令？

谢谢！

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-05-17T16:47:41.020

```
grep -R --include="*.c" --exclude-dir={DEF} writeFile /path/to/XYZ 
```

*   `-R`表示递归，因此它将进入您正在搜索的目录的子目录
*   `--include="*.c"`意思是“寻找以`.c`”结尾的文件
*   `--exclude-dir={DEF}`表示“排除名为`DEF`. 的目录。如果要排除多个目录，请执行以下操作：`--exclude-dir={DEF,GBA,XYZ}`
*   `writeFile`是你正在寻找的模式
*   `/path/to/XYZ`是要通过 grep 遍历的目录的路径。

请注意，这些标志适用于 GNU `grep`，如果您使用的是 BSD/SysV/AIX ，可能会有所不同`grep`。如果你使用 Linux/GNU grep utils 你应该没问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-17T16:41:49.537

您可以使用以下命令至少回答问题的第一部分。

```
find . -name *.c | xargs grep "writeText" 
```

# jquery - IOS/Android - 动画网站的最佳方法

> ID：10639751
> 
> 赞同：0
> 
> 时间：2012-05-17T16:33:25.260
> 
> 标签：jquery, ios, flash, html, canvas

我的任务是构建一个基于 HTML5 的应用程序，其中包含各种动画儿童游戏。该应用程序需要在 Android 和 IOS 环境中运行。

我的明显选择是建立一个 Flash 网站，因为我有 Flash 良好的动画和动作脚本经验，但存在明显的 IOS/Flash 播放器问题。

只是想知道是否有人对跨设备动画有任何经验，并且可以就以下方法的优缺点提供任何建议 -

*   Flash App - （使用 cs5.5 编译为 IOS 友好代码）

*   使用 Jquery 动画的代码

*   使用新的 HTML Canvas 工具。

谢谢保罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T16:44:23.477

作为一个之前体验不好的开发者，我完全不推荐电话差距。有一些非常好的用于 Web 开发的“层”库，允许站点通过“中间人”翻译库与触摸屏进行交互。我会研究这些并使其成为移动网站而不是移动应用程序。如果您需要推送一个应用程序，您总是可以制作一个 NATIVE（非电话间隙）iOS/Android 应用程序，该应用程序基本上包含一个网站和某种形式的导航，以便在您网站上托管的游戏中移动。

为了您的用户，请避免使用 phonegap 之类的工具。

PS-这种方法的唯一缺点是Apple反对制作一个只是格式更好的Web应用程序的移动应用程序，尽管通过使用这些库，我认为它会通过审查。

# lucene.net - Lucene.Net：在同一文档中搜索多个日期/日期范围

> ID：10639752
> 
> 赞同：0
> 
> 时间：2012-05-17T16:33:38.693
> 
> 标签：lucene.net, lucene

我有一个事件发生在多个日期（例如接下来的 6 个月的每月 5 日）。如果用户在 4 日搜索未来 45 天的事件，则他应该得到高于事件，但对于像 6 日的未来 7 天这样的查询不应返回高于事件。

我已经为事件创建了文档，并在同一个文档中添加了多个日期。

```
var event1 = new Document();
event1.Add(new Field("Id", "2", Field.Store.YES, Field.Index.NOT_ANALYZED));
event1.Add(new Field("Name", "Ford", Field.Store.YES, Field.Index.ANALYZED));
event1.Add(new Field("Desc", "Focus", Field.Store.YES, Field.Index.ANALYZED));
event1.Add(new NumericField("Date", (int)new DateTime(2012, 6, 05).Subtract(dt).TotalMinutes, Field.Store.YES, true));
event1.Add(new NumericField("Date", (int)new DateTime(2012, 7, 05).Subtract(dt).TotalMinutes, Field.Store.YES, true));
event1.Add(new NumericField("Date", (int)new DateTime(2012, 8, 05).Subtract(dt).TotalMinutes, Field.Store.YES, true)); 
```

这个想法是，如果我搜索特定日期或日期范围，它应该可以工作。但是一旦我尝试编写这个文档，它就会抛出一个 NullReferenceException。

```
 Directory directory = FSDirectory.Open(new DirectoryInfo(Environment.CurrentDirectory + "\\LuceneIndex"));
 Analyzer analyzer = new StandardAnalyzer(Version.LUCENE_29);

 var writer = new IndexWriter(directory, true, analyzer, true);
 writer.AddDocument(event1); 
```

我不确定如何执行这些类型的搜索。

**更新 1：** writer.AddDocument(event1); 导致空引用，

**更新 2：**

```
at Lucene.Net.Store.IndexOutput.WriteString(String s)
at Lucene.Net.Index.FieldsWriter.WriteField(FieldInfo fi, Fieldable field)
at Lucene.Net.Index.StoredFieldsWriterPerThread.AddField(Fieldable field, FieldInfo fieldInfo)
at Lucene.Net.Index.DocFieldProcessorPerThread.ProcessDocument()
at Lucene.Net.Index.DocumentsWriter.UpdateDocument(Document doc, Analyzer analyzer, Term delTerm)
at Lucene.Net.Index.DocumentsWriter.AddDocument(Document doc, Analyzer analyzer)
at Lucene.Net.Index.IndexWriter.AddDocument(Document doc, Analyzer analyzer)
at Lucene.Net.Index.IndexWriter.AddDocument(Document doc)
at luceneSearch.Program.Main(String[] args) in 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T20:46:08.347

NumericField[构造函数](https://lucene.apache.org/core/old_versioned_docs/versions/2_9_0/api/all/org/apache/lucene/document/NumericField.html)接受一个precisionStep，而不是实际值。正确的用法要求您调用[SetIntValue](https://lucene.apache.org/core/old_versioned_docs/versions/2_9_0/api/all/org/apache/lucene/document/NumericField.html#setIntValue%28int%29)（或任何其他 set*Value 方法）。

```
event1.Add(new NumericField("Date", Field.Store.YES, true)
             .SetIntValue((int)new DateTime(2012, 6, 05).Subtract(dt).TotalMinutes));
event1.Add(new NumericField("Date", Field.Store.YES, true)
             .SetIntValue((int)new DateTime(2012, 7, 05).Subtract(dt).TotalMinutes));
event1.Add(new NumericField("Date", Field.Store.YES, true)
             .SetIntValue((int)new DateTime(2012, 8, 05).Subtract(dt).TotalMinutes)); 
```

发生异常是因为`NumericField.StringValue()`如果未设置值则返回 null。

# c++ - 内存错误：取消引用空指针/ SSE 未对齐

> ID：10639753
> 
> 赞同：0
> 
> 时间：2012-05-17T16:33:39.603
> 
> 标签：c++, linux

我正在远程 linux 服务器上编译一个程序。程序编译。但是，当我运行它时，程序突然结束。所以我使用 DDT 调试了程序。它吐出以下错误：

```
 Process 0:
    Memory error detected in ClassName::function (filename.cpp:6462).
    Thread 1 attempted to dereference a null pointer or execute an SSE instruction with an 
    incorrectly aligned memory address (the latter may sometimes occur spuriously if guard 
    pages are enabled)
    Tip: Use the stack list and the local variables to explore your program's current 
    state and identify the source of the error. 
```

谁能告诉我这个错误到底是什么意思？

程序停止的行如下所示：

```
 SumUtility = ParaEst[0] + hhincome * ParaEst[71] + IsBlack * ParaEst[61] + IsBachAss * (ParaEst[55]); 
```

这是在一个开关盒内。

这些是变量类型

```
 vector<double> ParaEst;
    double hhincome;
    int IsBlack, Is BachAss; 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T16:41:30.780

代表着：

1.  ParaEst 为 NULL 或错误的指针
2.  ParaEst 的各个数组值未与 SSE 所需的 16 字节边界对齐。
3.  hhincome、IsBlack 或 IsBachAss 未与 16 字节边界对齐，并且是 SSE 类型值。
4.  SumUtility 未与 16 字节对齐，是 SSE 类型字段。

如果您可以发布失败的确切行的汇编代码以及该汇编程序行的寄存器值，我们可以准确地告诉您上述哪些条件失败了。它还有助于查看显示的每个变量的类型，以帮助缩小原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T23:19:49.387

好的...问题终于解决了。

问题是代码被破坏的表达式在一个新定义的函数中。但是由于某些奇怪的原因，运行 make-file 并没有包含这些更改，并且仍在使用先前编译的 .o 文件进行编译。这导致垃圾值被分配给这个新函数中的变量。最重要的是，程序调用这个函数作为第一步。因此出现了这种系统性的崩溃。这就是迈克尔所暗示的技术方面。

在此之后，我总是建议在 make 文件中使用 make clean 选项。为什么运行 make 文件无法编译修改后的源文件的问题是一个绝对值得进一步讨论的问题。

感谢您的回复！

# c# - 带有 UTF8 的 WebRequest

> ID：10639754
> 
> 赞同：1
> 
> 时间：2012-05-17T16:33:40.163
> 
> 标签：c#, webrequest

将 WebRequest 与非英语数据一起使用时，我看到一些不一致（来自服务器）。

```
String strData = "zéro";
// String strData = "zero"; // this works
request = WebRequest.Create("http://example.com");
request.Method = strMethod;
byte[] byteArray = Encoding.UTF8.GetBytes(strData);
request.ContentType = "application/x-www-form-urlencoded";
request.ContentLength = byteArray.Length;
((HttpWebRequest)request).UserAgent = "Sailthru API C# Client";
Stream dataStream = request.GetRequestStream();
// Write the data to the request stream.
dataStream.Write(byteArray, 0, byteArray.Length);
dataStream.Close(); 
```

这只发生在使用 C# 而 java 和 PHP 按预期工作时，我认为这可能与我编码数据的方式有关。

任何建议我做错了什么？

提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-31T08:59:17.243

它应该是`application/x-www-form-urlencoded;charset=utf-8`，你的回应应该有一个`content-type: x;charset=utf-8`。

# file - 带有移动项目文件上传的 MVC 4 Beta 不起作用

> ID：10639756
> 
> 赞同：1
> 
> 时间：2012-05-17T16:33:50.737
> 
> 标签：file, mobile, upload, asp.net-mvc-4

我正在玩新的 MVC 4 beta 版本。我使用移动应用程序模板创建了一个新的 Web 项目。我只是添加了一个控制器和一个视图来上传文件，但该文件在操作结果中始终为空。这是一个错误，还是我做错了什么？控制器代码：

```
using System.IO;
using System.Web;
using System.Web.Mvc;

namespace MobileWebExample.Controllers
{
    public class FileUploadController : Controller
    {
        public ActionResult Index()
        {
            return View();
        }

        [AllowAnonymous]
        [HttpPost]
        [AcceptVerbs(HttpVerbs.Post)]
        public ActionResult Upload(HttpPostedFileBase file)
        {
            int i = Request.Files.Count;

            if (file != null)
            {
                if (file.ContentLength > 0)
                {
                    var fileName = Path.GetFileName(file.FileName);
                    var path = Path.Combine(Server.MapPath("~/App_Data/uploads"),     fileName);
                    file.SaveAs(path);
                }
            }

            return RedirectToAction("Index");
        }
    }
} 
```

视图如下所示：

```
@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>
<form action="@Url.Action("Upload")" method="post" enctype="multipart/form-data">

  <label for="file">Filename:</label>
  <input type="file" name="file" id="file" />

  <input type="submit" value="Submit" />
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T14:46:25.987

我有类似的问题，但不是手机。

代替

```
public ActionResult Upload(HttpPostedFileBase file) 
```

和

```
public ActionResult Upload(IEnumerable<HttpPostedFileBase> files) 
```

然后，您可以访问集合中的文件

# php - ajax成功但不发送帖子数据

> ID：10639757
> 
> 赞同：0
> 
> 时间：2012-05-17T16:33:57.340
> 
> 标签：php, javascript, jquery, mysql

嗨，我有这个简单的代码：

```
var datastring="123";
$.ajax({ 
        url: 'actualizarimagen.php',
        type: 'post',
        dataType: 'text',
        data: datastring,
        cache: false,
        success: function(response){
            $('.msg1').html(response);

         },
        error: function(response){
            $('.msg1').html(response);
         }

    }); 
```

在actualizariimagen.php 中：

```
$desc_larga = print('<pre>') & print_R($_POST) & print('</pre>');
$insertSQL = sprintf("INSERT INTO prueba (texto) VALUES ($desc_larga)"); 
```

我收到成功消息，但在数据库中始终保存 1。我尝试更改所有内容，dataType，成功，错误，完整功能，但它不起作用。我正在搜索，但任何答案都无济于事。

谢谢。

编辑：添加响应

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T16:39:45.507

您`datastring`应该包含编码为的数据`application/x-www-form-urlencoded`

例如：`var datastring="foo=123";`

最好不要将字符串传递给 jQuery。传递一个对象，让它为你处理编码。

例如：`data: { "foo": "123" }`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T16:37:58.270

要发送数据，有要遵循的格式。像

```
var datastring="var1=123&var2=abcd"; 
```

或者

```
var datastring=[{name:'var1',value:123},{name:'var2',value:'abcd'}]; 
```

第二种格式（对象名称值数组）类似于`<input type="text" name="var1" value="123">`html 输入元素具有要发布的名称和值的位置。

然后，您可以通过以下方式获取值：

```
$_POST['var1'] 
```

或者

```
$_POST['var2'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T16:41:39.257

**数据** *对象，字符串*

要发送到服务器的数据。如果还不是字符串，则将其转换为查询字符串。它附加到 GET 请求的 url。请参阅 processData 选项以防止此自动处理。对象必须是键/值对。如果 value 是一个 Array，jQuery 会根据传统设置的 value 序列化多个具有相同 key 的值（如下所述）。

您只是将 123 发送到服务器。

它应该是这样的

```
var datastring="myField=123"; 
```

或者

```
var datastring = {"myField" : 123 }; 
```

并且使用 PHP 你会阅读它

```
$_POST["myField"] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-17T16:57:03.507

轻松实现此目的的示例可能是：

**JS：**

```
var datastring="123";

$.post('actualizarimagen.php', { datastring:datastring }, function(data){
     if(data != 0){
        $('.msg1').html('correcto');
     } else {
        $('.msg1').html('error');
     } 
}); 
```

**在您的 actualizariimagen.php 中：**

```
if($_POST() && isset($_POST['datastring'])){

/* Connect to DB */
$link = mysql_connect('server', 'user', 'pwd');
if (!$link) {
    // No connection
    print(0);
    exit();
}

$db = mysql_select_db('db', $link);
if (!$db) {
    // DB selection error
    print(0);
    exit();
}

/* Sanitize the value */
$datastring = mysql_real_escape_string($_POST['datastring']);

// I don't understand here what you tried to do with $dec_larga but this is what I thought
$desc_larga = "<pre>".$datastring."</pre>";

/* Insert to DB */
$sql = "INSERT INTO prueba (texto) VALUES ('$desc_larga')";

if(mysql_query($sql,$link)){
    // Everything is Ok at this point
    print(1);
} else {
    // Error happened in your SQL query
    print(0);
}

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T16:40:16.397

在 ajax 调用中：

```
data: my_var : datastring, 
```

在php中：

```
$desc_larga = '<pre>'.$_POST['my_var'].'</pre>'; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-17T16:42:10.230

尝试更换

```
type: "post", 
```

和

```
type: "POST", 
```

你的数据串应该是这样的：

```
single=Single&multiple=Multiple&multiple=Multiple3&check=check2&radio=radio1 
```

如此处所述：

[http://api.jquery.com/serialize/](http://api.jquery.com/serialize/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-17T16:49:45.723

```
var datastring = "123";
$.ajax({ 
   url: 'actualizarimagen.php',
   type: 'post',
   dataType: 'text',
   data: {data : datastring},
   cache: false
}).always(function(response) {
   $('.msg1').html(response);
}); 
```

在actualizariimagen.php 中：

```
$desc_larga = '<pre>'.$_POST['data'].'</pre>';
$query =  '"INSERT INTO prueba (texto) VALUES ('.$desc_larga.')"'; 
```

# c# - 通过 asp.net 和 c# 连接到另一个网络上的 SQL Server 数据库

> ID：10639758
> 
> 赞同：0
> 
> 时间：2012-05-17T16:33:57.837
> 
> 标签：c#, asp.net, sql-server

我有一个客户数据库，它保存在我们本地网络上的 SQL Server 上。我想创建一个客户门户网站，该门户网站将位于我们通过另一家公司托管的网站上。我将如何连接到那个 SQL Server 数据库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T16:38:10.740

授予网站主机访问 sql server 的权限。假设 Sql Server 2008；转到您的管理工作室并右键单击对象资源管理器窗口中的服务器（根）并转到属性。您可以从那里管理权限。此外，它还会向您显示要在连接字符串中使用的“服务器”（类似于`[server]\SQLEXPRESS`，可以在本地和远程使用）。

在网站中创建适当的[连接字符串](http://msdn.microsoft.com/en-us/library/bf7sd233.aspx)，最好是在 web.config 中，以用于与数据库的所有连接。然后，您可以从数据层通过以下方式获取此连接字符串

```
ConfigurationManager.ConnectionStrings["ConnString_Name"].ConnectionString; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T16:49:34.500

除了正确的连接字符串之外，您还需要确保网站可以与您的 SQL Server 进行通信。如果您有防火墙，则需要配置端口（如果它们被阻止）。

另一种方法是创建一个托管在 DMZ 区域上的 Web 服务，该服务将在内部与您的 sql 服务器进行通信。网站（由第三方托管）将通过此 Web 服务进行通信以获取数据（您可以设置身份验证，以便只有有权使用此 Web 服务的人才能使用此 Web 服务）。通过这条路线，您不会直接暴露您的内部 sql 服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T16:57:52.137

There is a Beginners guide on [Code Project](http://www.codeproject.com/Articles/4416/Beginners-guide-to-accessing-SQL-Server-through-C) which is voted 5, it will give you all you need to get started.

But before you start working with the code, I suggest that you first test the connection with SQL Server management studio. make sure that you can connect and query some data, otherwise you may face some more confusion while trying to pull this off with code only at the first time.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T02:56:54.520

要从 C#.NET 连接到 SQL Server，您需要创建一个连接字符串，如下所示：

私有 SqlConnection 连接；私有字符串 connectionString = @"Server=(local);Database=Embedding_SQL_Test;User ID=sa;Password=123"; 连接 = 新的 SqlConnection( 连接字符串 );

接下来，您使用上面创建的 SqlConnection 对象来创建一个 'SqlCommand'，如下所示：

SqlCommand cmd = new SqlCommand("select * from Customer where CustomerID = @Cid", connection);

此处显示的 SQL 查询可以替换为 SELECT、INSERT、UPDATE 查询等。

接下来要在数据库中执行 SQL 查询，您可以使用以下方法： ExecuteReader - 执行 SELECT 查询 ExecuteNonQuery - 执行 INSERT、DELETE、UPDATE 和 SET 语句。

这是关于如何从 C# 连接到 SQL Server 数据库并在数据库中执行 SQL 查询的非常简短的描述。有关连接字符串、方法及其参数的详细信息，请查看以下链接：( [http://www.shahriarnk.com/Shahriar-NK-Research-Embedding-SQL-in-C-Sharp-Java.html](http://www.shahriarnk.com/Shahriar-N-K-Research-Embedding-SQL-in-C-Sharp-Java.html) ) 这里有还将找到有关如何将参数传递给 SQL 查询以及调用存储过程等的详细信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T16:38:26.143

该答案基于一些假设，因为问题并未提供所有必需的信息。

为此，您需要 `ConnectionString`为您的连接对象设置属性。例如

```
Data Source=yourIP;Initial Catalog=myDataBase;User ID=myUsername;Password=myPassword; 
```

这是 MSDN 链接[connectionStrings](http://msdn.microsoft.com/en-us/library/bf7sd233.aspx)

这是 Web.Config 中的 SQLExpress 连接字符串示例

```
<connectionStrings>
   <add 
      name="LocalSqlServer" 
      connectionString="data source=.\SQLEXPRESS;Initial Catalog=myDataBase;User ID=myUsername;Password=myPassword;" 
      providerName="System.Data.SqlClient"
   />
</connectionStrings> 
```

# java - 如何使用 java 图形绘制缓冲图像？

> ID：10639761
> 
> 赞同：2
> 
> 时间：2012-05-17T16:34:19.817
> 
> 标签：java, file-io, github, bufferedimage, graphics2d

我的问题：每次我从缓冲图像创建图形然后将另一个缓冲图像绘制到图形时，我都会得到一个空白图像。

我的代码如下。

```
Graphics2D g2d = atlas.createGraphics();
// images[i] is a buffered image read the fileio
g2d.drawImage(images[i], null, x, y); // Image is not blank, been tested
g2d.dispose();
// then save image 
```

具有讽刺意味的是，在尝试创建一个如下所示的自包含示例之后……它起作用了。我不太确定我在代码中做错了什么，我想知道是不是因为图像不是静态**的，图像或另一个不是静态的变量会影响我的绘图吗？**

```
import java.awt.Graphics2D;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.FileInputStream;
import java.io.InputStream;

import javax.imageio.ImageIO;

public class Main {

    public static void main(String[] args) {
        String FOLDER_LOCATION = "./Images/";

        BufferedImage atlas = new BufferedImage(2048, 2048, BufferedImage.TYPE_INT_ARGB);
        BufferedImage redSquare = readImage(FOLDER_LOCATION + "red.png");

        Graphics2D g2d = atlas.createGraphics();
        g2d.drawImage(redSquare, null, 0, 0);
        g2d.dispose();

        writeImage(atlas, FOLDER_LOCATION + "atlas.png");
    }

    public static BufferedImage readImage(String location) {
        BufferedImage img = null;
        InputStream is = null;
        try {
            is = new FileInputStream(location);
            img = ImageIO.read(is);
        } catch(Exception e) {
            e.printStackTrace();
        } finally {
            try {
                is.close();
            } catch(Exception e) {
                e.printStackTrace();
            }
        }
        return img;
    }

    public static void writeImage(BufferedImage bi, String location) {
        try {
            File file = new File(location);
            ImageIO.write(bi, "png", file);
        } catch(Exception e) {
            e.printStackTrace();
        }
    }

} 
```

保存图像后，我只看到一个空白的 2048 x 2048 图像。我将整个图像打印出来，得到 (0, 0, 0)，但如果我打印出任何要绘制到图集的图像，我会得到类似 (72, 32, 283) 的图像。

我不太确定我做错了什么，但我的这个项目的整个源代码在这里：[https](https://github.com/gemurdock/jTextureAtlas) ://github.com/gemurdock/jTextureAtlas我正在处理的分支在这里：[https ://github.com /gemurdock/jTextureAtlas/tree/alpha](https://github.com/gemurdock/jTextureAtlas/tree/alpha)。

**您必须查看 alpha 分支才能看到我的代码**

# java - 在java中的Thread实例上调用wait()

> ID：10639763
> 
> 赞同：0
> 
> 时间：2012-05-17T16:34:27.827
> 
> 标签：java, multithreading

如果我们在 Thread 类的实例上调用 wait() 方法会发生什么。

```
Thread t1 = new MyThread();
t1.wait(); 
```

我的线程 t1 的状态是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T16:37:19.643

这将与您致电 之前相同`wait()`。`wait()`是一种方法`java.lang.Object`。它等待与对象关联的内在监视器。在这种情况下，对象是一个线程，这不会改变 wait() 的作用。但是，将 Thread 对象用作监视器是非常奇怪的。您应该使用私有和最终对象作为监视器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T16:43:38.147

正如@Tudor（和其他人）所提到的，你不能调用`wait()`一个你不在的对象，`synchronized`所以你会得到一个`IllegalMonitorStateException`. 线程不会受到影响。

```
Thread t1 = new MyThread();
// this will throw
t1.wait(); 
```

你很可能应该打电话给`t1.join()`. 这会等待线程完成，然后再继续。但是，您还没有开始`Thread t1`，所以加入将永远等待。如果线程已经启动，那么当`Thread.run()`方法完成时（因为它返回或抛出异常），`join()`将返回。

```
Thread t1 = new MyThread();
t1.start();
// this waits for t1 to finish
t1.join(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T16:35:30.523

不会发生任何不寻常的事情。您将暂停当前线程，直到其他线程调用`t1.notify`。您只是将`t1`其用作普通显示器。

顺便说一句，您的代码会抛出一个，`IllegalMonitorStateException`因为您`wait`在同步块之外调用。

事实上，我发现 java 的方法选择有点烦人，尤其是关于线程类。

以这种情况为例：

```
Thread t = new Thread();
t.start();
t.sleep(1000); 
```

哪个线程会休眠？当前的“显然”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-17T16:59:48.573

补充一些迄今为止尚未提及的内容：实际上，当您在线程对象上调用 wait 时，会或至少会发生“不寻常的”事情。

那是因为`Thread`内部在内部等待，`this`至少可以说这显然会导致有趣的结果。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-17T16:36:34.203

它仍然是您调用的 java.lang.Object 的[等待](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html#wait%28%29)，因此只有当前线程会等待（假设您持有对象监视器，否则将抛出 IllegalMonitorStateException）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-07-25T11:33:09.587

请参考 java.lang.Thread#join(long) 中的 java doc：</p>

> 此实现使用以 this.isAlive 为条件的 this.wait 调用循环。当线程终止时，将调用 this.notifyAll 方法。建议应用程序不要在 Thread 实例上使用 wait、notify 或 notifyAll。

如果您在 Thread 实例上使用 wait ，则当线程终止时，将调用 this.notifyAll 方法。你会得到难以调试的令人困惑的行为。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-17T16:37:40.203

没有`Thread#wait`方法。`wait`继承自`Object`并用于同步。所以除非你有`synchronized(t1)`第一个，否则你只会得到一个非法的监视器异常。

`t1.wait`不会**等待线程完成**。它等待另一个线程在线程对象上加锁。

# xml - 什么时候应该使用 JSON，什么时候应该使用 SOAP？

> ID：10639764
> 
> 赞同：0
> 
> 时间：2012-05-17T16:34:31.487
> 
> 标签：xml, json, soap, comparison

这只是一个关于 JSON 和 SOAP (XML) 比较的一般问题。我知道 XML 有标签，而 JSON 没有标签，而且 JSON 通常更快，但是否存在不应该使用 JSON 和 SOAP 的场景？JSON 和 SOAP 应该在哪里使用？或者这只是一种偏好，使用 JSON 还是 SOAP 无关紧要？

# mobile - 代号一是如何工作的？

> ID：10639766
> 
> 赞同：49
> 
> 时间：2012-05-17T16:34:49.393
> 
> 标签：mobile, cross-platform, codenameone, parparvm

我正在寻找为多个移动平台开发的替代方案，并找到了[Codename One](http://www.codenameone.com/)，它使用 Java 作为*lingua franca*，而不是 HTML/CSS/JS 或脚本语言。

我找不到的是它是如何工作的。它是否将 JVM 与 iOS 和 Win7 的应用程序捆绑在一起，并在 Android 中使用 Dalvik？它是否将源代码翻译为本地代码，我们是否可以访问此源代码？考虑到他们承诺“不妥协”，还有其他魔法吗？在编写不可知的 Java 时，我应该注意哪些限制？

先发制人：这是一个关于 Codename One 的问题，*而不是*关于我应该选择哪个跨平台，或者我应该使用原生还是使用 Web。

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-05-18T03:28:40.063

[Codename One](https://www.codenameone.com/)有一种可选的 SaaS 方法，因此这可能（并且可能会）在未来发生变化以适应改进的架构。请注意，Codename One 还提供了[离线构建](https://www.codenameone.com/blog/moving-to-maven.html)的选项，这意味着有政策禁止此类云架构的公司仍然可以使用 Codename One，但会带来一些额外的开销/复杂性。这也意味着您可以免费使用它，而无需使用构建服务器。

目前在 Android 上，标准 Java 代码按原样执行。Java 8 语法在使用时使用所有平台的 retrolambda 进行翻译。这允许它与所有 Android 版本以及其他端口兼容。

在 iOS Codename One 上构建并开源[ParparVM](https://github.com/codenameone/CodenameOne/tree/master/vm)，这是一个非常保守的 VM。[ParparVM](https://github.com/codenameone/CodenameOne/tree/master/vm)具有并发（非阻塞）GC，它完全用 Java/C 编写。这实际上意味着在构建服务器上生成并编译了一个 xcode 项目，因此它就像您手动编写一个原生应用程序一样有效，因此可以为 Apple 所做的更改提供“未来证明”。例如，最近对 iOS 构建的 64 位和位码更改，ParparVM 无需修改即可符合这些更改。

过去 Codename One 使用[XMLVM](http://xmlvm.org/)以非常相似的方式生成本机代码，但 XMLVM 解决方案对于 Codename One 的需求来说过于通用。

iOS 构建使用 xcode（Apple 官方构建工具）在云中的 Mac 上编译和签名。这使它们与 Apple 当前/未来的更改兼容，并允许开发人员在针对 iOS 的同时使用 Windows/Linux。[您可以在此处](https://github.com/codenameone/CodenameOne/tree/master/vm)阅读有关 ParparVM 与 iOS 兼容性的更多信息。

过去 Codename One 使用依赖 XMLVM 的 C# 翻译器支持 Windows Phone，但这不是一种理想的方法。请注意，转换为 C# 的 XMLVM 后端与以前用于转换为 iOS 的后端非常不同。Codename One 选择[停止使用旧后端](https://www.codenameone.com/blog/first-uwp-app-and-the-way-forward.html)，因为它不如新的 UWP 后端强大，并且不符合微软向前发展和专注于[UWP（通用 Windows 平台）](https://www.codenameone.com/blog/java-developers-can-finally-target-windows-uwp.html)的目标。

对于 Windows 10 桌面和移动支持 Codename One 使用 iKVM 以[UWP（通用 Windows 平台）为目标，并在](https://www.codenameone.com/manual/appendix-uwp.html)[Codename One github 存储库](http://github.com/codenameone/CodenameOne/)中开源了对原始 iKVM 代码的更改。

请注意，UWP 构建是在云中的 Windows 10 机器上完成的，因此开发人员在构建原生 Windows 应用程序时可以使用 Mac/Linux 或更早版本的 Windows...

企业级订阅者可用的 JavaScript 构建目标使用[TeaVM](http://teavm.org/)进行静态翻译。TeaVM 通过以一种相当精细的方式分解应用程序，为使用 JavaScript 的线程提供支持。为了支持复杂的 UI Codename One 使用 HTML5 Canvas API，它为构建应用程序提供了绝对的灵活性。

对于 Codename One 使用的桌面构建`javafxpackager`，因为 Mac 和 Windows 机器都可以在云中使用，平台特定的性质`javafxpackager`不是问题。

Codename One 的突出之处在于它采用“轻量级架构”的 UI 方法，使 UI 可以在所有平台上无缝工作，并且几乎完全用 Java 开发。它通过在“轻量级”中嵌入“重量级”小部件的能力得到增强。您可以在此[博客文章](https://www.codenameone.com/blog/understanding-peer-native-components-why-codename-one-is-so-portable.html)中了解更多信息。请注意，此时[对等互连正在经历一些改进](https://www.codenameone.com/blog/new-peers-on-by-default-on-android.html)，现在支持更复杂的用法，例如分层。

轻量级组件完全用 Java 编写，这允许开发人员在模拟器和 GUI 构建器中准确预览应用程序。

Codename One 通过使用大多数平台的原生游戏 API（例如 iOS 上的 OpenGL ES）进行绘图来实现快速性能。

Codename One 背后的核心技术都是开源的，包括 Codename One 自己开发的大部分东西，例如[ParparVM](https://github.com/codenameone/CodenameOne/tree/master/vm)，还有[完整的库、平台端口、设计器工具](http://github.com/codenameone/CodenameOne/)、[设备皮肤等。您可以](https://github.com/codenameone/codenameone-skins)[在此处](https://www.codenameone.com/blog/how-to-use-the-codename-one-sources.html)了解有关使用 Codename One 资源的更多信息。

**仅供参考，此答案的作者 Shai Almog 是 Codename One 的首席执行官。**

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-10-12T23:35:19.893

代号一采用了非常平衡的可移植性方法。我想补充一句务实的评论。

从用户界面方面来看，CN1 确实在平台提供的画布上绘制了它的所有 UI。如果您选择它，它会尝试模仿平台原生的外观和感觉，但它的“原生平台外观和感觉”与 Swing 一样成功，因为原生平台不断变化，而“原生 l&f”总是落后于大多数案例感觉不太对。

但是，如果您选择独立于平台的外观和感觉（这是当今的一种趋势），您就不会受到 Codenameone 的默认组件集的任何限制：它就像具有跨平台外观和感觉的 Swing（"金属”等）。哪个好。

从语言方面：在 iOS 上，它是 java 编译成 C，然后绑定到手写的 Objective-C，它不捆绑 VM，只捆绑可移植层。这里最重要的是，java 被编译为 C 而不是 Objective-C，这使得它比惯用的 Objective-C 代码更快，因为它执行虚拟或更常见的是直接方法调用，而不是缓慢的 Objective C 消息分发。哪个好。

在 Android 上它也可能看起来快一点，因为在使用 Dalvik/Art 时，它不使用与 CN1 相比笨重的 Android 原生 UI。这可以在运行时更快地创建动态 UI，这很好。

CN1 方法的最强点之一是它的模拟器（在桌面 JavaFX 画布上实现），您可以使用它来开发软件。Emulator 使用与移动平台上相同的 UI 代码和可移植性 API，并允许您使用首选的 IDE 进行调试。它重启很快，与android相比，edit-compile-run循环非常可持续。哪个好。

第二个非常强的地方（主要的！）是他们的 UI 库、所有本地代码和字节码到 C 转换器的开放性。如果您花一些精力，您可以避免在他们的农场上构建 Android/iOS 端口，并从他们特定的产品版本中解脱出来（但不是从他们提供的许多增值服务中解脱出来，这些服务不是开源的！）。根据您的情况，这可能（也可能不会！）对您有好处！

Codenameone 的弱点在于其不够理想的成熟度，这意味着如果您以不打算使用它们的方式使用它们，那么您可以使用基本的 UI 组件轻松地击中自己的脚。也意味着它的java可移植层不够大（并且有漏洞）来满足每个人的需求，你可能不得不在某些地方使用native，并且还要移植其他纯java库。

此外，图形性能的当前状态是次优的；如果你在屏幕上看到一堆文本，你很容易错过 16 毫秒的流体动画/重绘时间限制，这可以通过双缓冲来解决，但它也有它的限制。幸运的是，两个主要平台上的实现仍有优化空间，希望他们能改进它。

总体而言，Codenameone 作为多类应用程序的跨平台框架具有很好的优势。您也可以在他们的服务中找到价值。

# grails - 在引导程序中使用 addTo 预加载数据库时出错

> ID：10639767
> 
> 赞同：0
> 
> 时间：2012-05-17T16:34:50.367
> 
> 标签：grails, groovy, grails-orm

我有以下类：SAMPLE_TYPE 和 SAMPLE_PARAMETER。每个样本可以有许多参数。在我的引导程序中，我创建了一个参数和示例：

```
 def r = new SampleParameter(name: "Color", value:"Red").save(failOnError: true)
 def b = new SampleType(sampleName: "Blood")
        .addToSampleType(r)
        .save(failOnError: true) 
```

我不断收到错误消息'没有方法 com.SampleType.addToSampleType() 的签名适用于参数类型

我只想为样本添加一个参数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T16:40:38.400

乍一看，在我看来，您正在尝试将 SampleParameter（名为 r 的变量）添加为 SampleType。也许方法应该是`.addToSampleParameter(r)`？如果不是这种情况，您能否发布一份您的 domian 课程的副本？

# django - 如何找出我在 Django 中遇到的 500 错误？

> ID：10639769
> 
> 赞同：6
> 
> 时间：2012-05-17T16:34:58.213
> 
> 标签：django, debugging

当我在由 Django 生成的服务器上提供的 Django 应用程序中访问页面 (http://68.123.151.234/static/quickstart.html) 时，页面显示为

```
A server error occurred.  Please contact the administrator. 
```

我收到了这个回溯。

```
Traceback (most recent call last):
  File "/usr/lib/python2.7/wsgiref/handlers.py", line 85, in run
    self.result = application(self.environ, self.start_response)
  File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/wsgi.py", line 241, in __call__
    response = self.get_response(request)
  File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py", line 153, in get_response
    response = self.handle_uncaught_exception(request, resolver, sys.exc_info())
  File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py", line 228, in handle_uncaught_exception
    return callback(request, **param_dict)
  File "/usr/local/lib/python2.7/dist-packages/django/utils/decorators.py", line 91, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/usr/local/lib/python2.7/dist-packages/django/views/defaults.py", line 32, in server_error
    t = loader.get_template(template_name) # You need to create a 500.html template.
  File "/usr/local/lib/python2.7/dist-packages/django/template/loader.py", line 145, in get_template
    template, origin = find_template(template_name)
  File "/usr/local/lib/python2.7/dist-packages/django/template/loader.py", line 138, in find_template
    raise TemplateDoesNotExist(name)
TemplateDoesNotExist: 500.html
[17/May/2012 11:31:45] "GET /static/quickstart.html HTTP/1.1" 500 59
Traceback (most recent call last):
  File "/usr/lib/python2.7/wsgiref/handlers.py", line 85, in run
    self.result = application(self.environ, self.start_response)
  File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/wsgi.py", line 241, in __call__
    response = self.get_response(request)
  File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py", line 153, in get_response
    response = self.handle_uncaught_exception(request, resolver, sys.exc_info())
  File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py", line 228, in handle_uncaught_exception
    return callback(request, **param_dict)
  File "/usr/local/lib/python2.7/dist-packages/django/utils/decorators.py", line 91, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/usr/local/lib/python2.7/dist-packages/django/views/defaults.py", line 32, in server_error
    t = loader.get_template(template_name) # You need to create a 500.html template.
  File "/usr/local/lib/python2.7/dist-packages/django/template/loader.py", line 145, in get_template
    template, origin = find_template(template_name)
  File "/usr/local/lib/python2.7/dist-packages/django/template/loader.py", line 138, in find_template
    raise TemplateDoesNotExist(name)
TemplateDoesNotExist: 500.html 
```

这个回溯只告诉我我需要一个 500 模板 - 而不是实际的服务器错误是什么。如何找出服务器错误是什么？

我查看了 Django 文档（[https://docs.djangoproject.com/en/1.4/topics/http/views/](https://docs.djangoproject.com/en/1.4/topics/http/views/)），它指导我创建一个 500 错误模板作为潜在的解决方案。但是，它没有说明如何在此类模板中显示错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T17:28:15.103

正如 Alasdair 所说，一个方便实用的基本 500.html 可能会泄露一些敏感信息。

但是，如果以负责任的方式在 Web 上进行调试是目标，则站点模板目录的基本 nondefault500.html 模板看起来像

```
<html><head><body>
<!-- starting with sys.exc_info but hey, it's python -->
Type: {{ type }} <br />
Value: {{ value }} <br />
Traceback: {{ traceback }} <br />
</body></head></html> 
```

并且新的处理程序将这样填充该上下文：

```
def this_server_error(request, template_name='nondefault500.html'):
    """
    500 error handler.

    Templates: `500.html`
    Context: sys.exc_info() results
     """
    t = loader.get_template(template_name) # You need to create a 500.html template.
    ltype,lvalue,ltraceback = sys.exc_info()
    sys.exc_clear() #for fun, and to point out I only -think- this hasn't happened at 
                    #this point in the process already
    return http.HttpResponseServerError(t.render(Context({'type':ltype,'value':lvalue,'traceback':ltraceback}))) 
```

并且需要进行 URLconf 调整，

```
handler500 = 'mysite.views.this_server_error' 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-17T16:59:08.123

如果您正在测试您的站点，请设置，`DEBUG=True`然后 Django 将显示回溯。

一旦站点上线，您可能不想在错误页面上显示回溯，因为它可能包含敏感信息。

如果添加 500 模板。然后，Django 将向 ADMINS 设置中列出的用户发送一封包含回溯的电子邮件。

有关更多信息，请参阅[错误报告文档。](https://docs.djangoproject.com/en/dev/howto/error-reporting/#server-errors)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T16:58:55.063

我相信你需要一个 500.html 模板`DEBUG`设置为`False`.

创建一个并将其放在您的模板目录中

每当出现 500 错误时，它将显示给用户。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-17T17:08:36.203

```
TemplateDoesNotExist: 500.html 
```

我认为您应该在模板目录中创建 500.html 。

# joomla - 如何删除 K2 和 Kunena Joomla 组件中的重复标题标签？

> ID：10639770
> 
> 赞同：0
> 
> 时间：2012-05-17T16:34:59.603
> 
> 标签：joomla, duplicates, google-search-console, joomla-k2

查看谷歌网站管理员工具，它显示了大量重复的标题标签。

来自 K2 的副本如下所示：

```
/articles/blogs/user-blogs/item/716-maiden-voyage-of-the-ss-minnow
/articles/item/716-maiden-voyage-of-the-ss-minnow 
```

Kunena 论坛的副本如下所示：

```
/forum/20-water-cooler/8586-chucktown-boondoggle
/forum/20-water-cooler/8586-chucktown-boondoggle?limit=10&start=10

/forum/21-look-what-i-did/664-gps-iphone-solution
/forum/21-look-what-i-did/664-gps-iphone-solution?limit=6&start=6 
```

解决此问题的最佳方法是什么？

# mongodb - 持久化和刷新 - Doctrine 和 MongoDB

> ID：10639772
> 
> 赞同：3
> 
> 时间：2012-05-17T16:35:17.113
> 
> 标签：mongodb, doctrine

flush() 有多快？我正在使用 persist() 将数千个项目添加到集合中，然后清空集合然后刷新它。

```
$dm = $this->get('doctrine.odm.mongodb.document_manager');

while(stuff))
{
     $item = new Item();
     $item->setItem("item stuff");           
     $dm->persist($item);
}

$qb = $dm->createQueryBuilder('Bundle:Item')->remove();
$query = $qb->getQuery();
$query->execute();

$dm->flush(); 
```

我想知道收藏品会空置多长时间。在移除和冲洗之间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T16:02:58.240

我创建了一个基准来分析不同批次大小的简单两字段文档的刷新：[https ://gist.github.com/2725976](https://gist.github.com/2725976)

```
$ php src/benchmark.php 10 100 1000 10000 20000 50000 100000
Flushing     10 items took  0.014058 seconds and   2097152 bytes
Flushing    100 items took  0.024325 seconds and    524288 bytes
Flushing   1000 items took  0.196992 seconds and   5505024 bytes
Flushing  10000 items took  2.563700 seconds and  57933824 bytes
Flushing  20000 items took  6.291873 seconds and  89915392 bytes
Flushing  50000 items took 19.118011 seconds and 240386048 bytes
Flushing 100000 items took 58.582809 seconds and 469499904 bytes 
```

如您所料，实际上将数据插入 Mongo 只占这些测量的一小部分。Doctrine 将花费相当多的时间来完成诸如事件调度和变更集计算之类的步骤，后者将受到域模型复杂性的显着影响。

`flush()`您可以通过查看[UnitOfWork::commit()](https://github.com/doctrine/mongodb-odm/blob/master/lib/Doctrine/ODM/MongoDB/UnitOfWork.php)来跟踪所有特定于 Doctrine 的操作。

# html - 显示在列表旁边的图像

> ID：10639774
> 
> 赞同：0
> 
> 时间：2012-05-17T16:35:24.353
> 
> 标签：html, css

我有一些具有属性的代码`display-inline`。因此，它水平显示列表。现在，我在我的代码中放置了一个图像，它出现在列表之后。我希望图像显示在列表下方，因此我将列表放入 div 中，但仍显示在列表旁边。这是代码，

```
<ul id="list-nav">
    <li><a href="#">Home</a></li>
    <li><a href="#">About Book</a></li>
    <li><a href="#">Contact</a></li>
  </ul>
</div><!--navigation div ends-->
<!--<div>-->
<img src="Book_Cover-465x540.png" /> 
```

列表导航的 CSS：

```
ul#list-nav {
margin:40px;
padding:0;
list-style:none;
width:525px;
}
ul#list-nav li {
display:inline
}
ul#list-nav li a {
text-decoration:none;
padding:5px 0;
width:100px;
background:#000000;
color:#eee;
float:left;
}
ul#list-nav li a {
text-align:center;
border-left:15px solid #fff;
} 
```

请帮忙。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T16:39:53.057

从 中取出浮子`a`。另外：到底是什么`border-left:15px solid #fff;`，你不是说左边距吗？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-17T16:39:42.353

试试这个：

```
<div>
<ul id="list-nav">
    <li><a href="#">Home</a></li>
    <li><a href="#">About Book</a></li>
    <li><a href="#">Contact</a></li>
  </ul>
</div><!--navigation div ends-->
<!--<div>-->
<div style="clear:both"></div>
<img src="Book_Cover-465x540.png" /> 
```

# android - 如何制作类似于 Path 应用程序中的菜单按钮？

> ID：10639779
> 
> 赞同：3
> 
> 时间：2012-05-17T16:35:50.833
> 
> 标签：android, animation, user-interface

Path 是一个社交网络应用程序，它允许您创建一个小型社交群组来亲密，而不是像 Facebook 这样的大型社交群组。

这个应用程序真正让我印象深刻的是用户界面。他们有一个签名菜单按钮，这是一个旋转释放较小圆圈作为菜单选项的圆圈。

我喜欢它的外观，并且想知道如何制作菜单/UI 动画。谁能指导我看这样的教程/文章？

谢谢。

这是 Path 应用程序：[Path](https://play.google.com/store/apps/details?id=com.path&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5wYXRoIl0.) 这是一些只有菜单动画的应用程序（不幸的是，没有源代码）：[Path UI anim demo](https://play.google.com/store/apps/details?id=com.littleorc.android.anim&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5saXR0bGVvcmMuYW5kcm9pZC5hbmltIl0.)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T16:52:53.480

[http://code.google.com/p/android-path-like-button/](http://code.google.com/p/android-path-like-button/)希望这会有所帮助，它尚未开发，因为您还看不到反弹效果，但我已经分叉了它，我正在研究更多的家具.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T16:51:02.510

看起来他们只是为按钮背景和补间位置和旋转动画使用了一些定制的可绘制对象。有关 Android UI 动画的信息，请参阅此资源：

[Android UI 动画](http://developer.android.com/reference/android/view/animation/package-summary.html)

# java - JPCAP：EXCEPTION_ACCESS_VIOLATION

> ID：10639780
> 
> 赞同：0
> 
> 时间：2012-05-17T16:35:51.577
> 
> 标签：java, exception, jpcap

我正在使用 JPCAP 代码在 pcap 文件中写入数据包（我使用的是 JDK 1.7）。这是代码

```
 JpcapCaptor captor=JpcapCaptor.openDevice(device[index], 65535, false, 20);
       //open a file to save captured packets
            JpcapWriter writer=JpcapWriter.openDumpFile(captor,"yourfilename");

                for(int i=0;i<10;i++){
         //capture a single packet
         Packet packet=captor.getPacket();
        //save it into the opened file
              writer.writePacket(packet);
         } 
```

而不是将数据包保存在 pcap 文件中。它给了我以下错误

```
 #
       # A fatal error has been detected by the Java Runtime Environment:
        #
         #  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x01cf675d, pid=5564,  tid=4876
        #
        # JRE version: 7.0-b141
        # Java VM: Java HotSpot(TM) Client VM (21.0-b11 mixed mode, sharing windows-x86 )
        # Problematic frame:
        # v  ~BufferBlob::jni_fast_GetLongField
          #
        # Failed to write core dump. Minidumps are not enabled by default on client versions of Windows 
```

#

# python - 重复相同的分配是否会导致相同的 id() 值？

> ID：10639792
> 
> 赞同：-1
> 
> 时间：2012-05-17T16:36:29.650
> 
> 标签：python, object, variable-assignment

这个问题是由这个 [问题](https://stackoverflow.com/q/10639226/1209279)引起的，我误读并提供了一个拙劣的答案（我删除了它）

我重新阅读了[http://docs.python.org/library/functions.html#id](http://docs.python.org/library/functions.html#id)并在 Python 中尝试了这个：

```
>>> a = 3
>>> id(a)
5392456

>>> a = 3
>>> id(a)
5392456 
```

又重复了几遍……

这些数字（即内存中对象的地址）相同的事实取决于实现，并且***不能***保证，这是正确的吗？他们可能不一样，对吧？我的理解是，每次我做这个简单的赋值时，我都会创建一个新对象并将它绑定到一个变量标识符，所以我*不能*假设它们会被放在内存中的同一个位置。

这种理解正确吗？如果是这样，是否有任何例外？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T16:39:34.957

您可以做出这样的假设，但是对于不可变类型，例如`int`而不是创建新对象，您的变量可能只是引用不可变对象（如果它已经存在）。当您进行分配时，您正在创建对对象的引用。该对象可能已经存在或可能已创建。

# ruby-on-rails - 从 Rails 应用程序卸载 Twitter Bootstrap

> ID：10639798
> 
> 赞同：6
> 
> 时间：2012-05-17T16:37:01.673
> 
> 标签：ruby-on-rails, twitter-bootstrap

我最近通过以下两个步骤在我的 Rails 应用程序中安装了 Twitter Bootstrap：

```
rails g bootstrap:install 
```

（这包括 Twitter Bootstrap 到我的应用程序的资产管道）

```
rails g bootstrap:layout application fixed 
```

（这为我生成了一个布局，默认情况`application.html.erb`下生成了固定布局）

我是否应该执行以下任何操作或全部操作以从我的应用程序中完全删除 Twitter Bootstrap？

1.  删除它在APP文件夹中添加的所有文件？

    *   `javascripts/bootstrap.js.coffee`

    *   `stylesheets/bootstrap.js.coffee`

    *   `layout/application.html.erb`（编辑这个文件？）

2.  是否还有其他我错过且必须删除的文件？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-09-02T06:36:48.457

试试这个

```
rails destroy bootstrap:install 
```

此外，从您的 gemfile 中删除 gem

`gem "twitter-bootstrap-rails"`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-18T04:12:20.827

如果您为此查看 github 存储库，您可以看到生成器以及它们的具体作用：

[https://github.com/seyhunak/twitter-bootstrap-rails/tree/master/lib/generators/bootstrap](https://github.com/seyhunak/twitter-bootstrap-rails/tree/master/lib/generators/bootstrap)

命令

```
rails g bootstrap:install 
```

在此处使用模板： [https ://github.com/seyhunak/twitter-bootstrap-rails/tree/master/lib/generators/bootstrap/install/templates](https://github.com/seyhunak/twitter-bootstrap-rails/tree/master/lib/generators/bootstrap/install/templates)

布局命令在这里使用模板： [https ://github.com/seyhunak/twitter-bootstrap-rails/tree/master/lib/generators/bootstrap/layout/templates](https://github.com/seyhunak/twitter-bootstrap-rails/tree/master/lib/generators/bootstrap/layout/templates)

此外，从您的 gemfile 中删除 gem

```
gem "twitter-bootstrap-rails" 
```

# android - 创建一个带有意图的android库

> ID：10639802
> 
> 赞同：1
> 
> 时间：2012-05-17T16:37:20.877
> 
> 标签：android

在哪里可以找到用于创建公开意图并编译为 jar 的库的指南或示例？

我发现很难实现这种简单的功能并且不明白为什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T16:42:19.507

> 在哪里可以找到用于创建公开意图并编译为 jar 的库的指南或示例？

这在目前是不可能的。

欢迎您创建一个 Android JAR，但它不能靠自己的“公开意图”来翻译任何可能的短语“公开意图”。

如果 JAR 包含活动、服务、接收者和提供者，则必须在包含该 JAR 的项目清单中注册这些内容。

如果您希望 JAR 中的代码需要资源，那么您不能将代码打包为 JAR，而是需要使用 Android 库项目。再一次，在库中定义的任何组件（例如，活动）都必须在合并该库的项目的清单中注册。

# .net - 无法使用 css 更改内容/子页面控件

> ID：10639809
> 
> 赞同：0
> 
> 时间：2012-05-17T16:37:52.467
> 
> 标签：.net, css

我有一个带有 .css 文件的母版页，其中包含一些说明。然后我有一个内容/子页面，上面有我只想在内容页面上显示的图像。我想用 css 更改该图像的属性。在我的内容页面中，我声明：

```
<asp:Content ID="Content1" ContentPlaceHolderID="head" runat="Server">
<link href="Styles/imageTest.css" rel="stylesheet" type="text/css" />
</asp:Content>
...
<asp:Image ImageUrl="" ID="imageDetails" runat="server" /> //this one in the other contentplaceholder. 
```

在我的 .css 文件中，我有：

```
#imageDetails
{
width:30px;
height:30px;
} 
```

我可以在我的 css 文件中更改母版页上图像的属性，但不能更改此内容页面上的控件。

这是为什么？不能为每个内容页面都有一个 .css 并在那里更改内容吗？

如果我将图像放在母版页上，那么没有问题，但我不希望它在那里..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T16:41:54.227

我相信您的两个内容页面是完全不同的视图，彼此独立。因此，您可能还必须在第二个内容页面中包含该 css 链接才能看到奇迹发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T16:48:35.060

如果您查看源代码，您可能会看到如下内容：

```
<img src="" id="ctl00_MainContent_ctl04_imageDetails" /> 
```

这不是您的 css 正在寻找的东西，这就是它不起作用的原因。

两种解决方案：

1 您可以将 id 名称交换为类名

```
.imageDetails  {  width:30px!important;  height:30px!important;  } 
```

并尝试：

```
<asp:Image ImageUrl="Images/modellbyggeSim.jpg" ID="imageDetails" class="imageDetails" runat="server"/> 
```

2 如果您使用的是 .net 4，那么您可以使用 clientmode 标签来保留您的 id

```
<asp:Image ImageUrl="" ID="imageDetails" ClientIDMode="Static" runat="server"/> 
```

[客户端模式的解释](http://www.shubho.net/2011/01/understanding-clientidmodepredictable.html)

# c# - 实体框架以非确定性方式未经许可删除有效内容？

> ID：10639810
> 
> 赞同：3
> 
> 时间：2012-05-17T16:37:52.817
> 
> 标签：c#, entity-framework, entity-framework-4.1, ef-code-first

我在使用 EF 将数据存储到数据库时遇到问题。通常所有 CRUD 操作对于程序的其余部分都可以正常工作，但最近我注意到，在 m:n 关系的情况下，棘手的部分来了。

我正在使用带有代码优先方法的 EF4.1。我的课程中有趣的部分如下所示：

```
public class Publication : IItem, IDataErrorInfo {

     ...

    [InverseProperty("Publications")]
    public virtual ICollection<Group> Groups{ get; set; }
}

public class Group : IItem, IDataErrorInfo {

     ...

    [InverseProperty("Groups")]
    public virtual ICollection<Publication> Groups{ get; set; }
} 
```

数据库创建如下：

```
 public PublicationsDB() : base("PublicationDB") {
        this.Configuration.AutoDetectChangesEnabled = true;
    }

    public DbSet<Publication> Publications { get; set; }
    public DbSet<Software> Softwares { get; set; }
    public DbSet<Group> Group{ get; set; } 
```

目的是在出版物和组之间创建 m:n 关系。

最近我从 XML 导入数据时，一切都很好。在调用 SaveChanges() 之后，出版物和组都存储了它们的 ICollection。在下面几行相同的方法中，我从数据库中获取数据（仅用于检查），并且再次填充了两个实体的 ICollection。

**麻烦来了：**

在执行不同的数据操作函数时，我从数据库中挖掘数据并：

*   出版物的集合很好，实体的啤酒已经`ICollection<Group>`从 xml 中正确填充
*   但是组的集合非常混乱。他们中的大多数都`ICollection<Publication>`设置为空。

问题可能是什么？这种行为对我来说真的很奇怪。最后但并非最不重要的一点是，删除 Collections from`DBSet<Groups>`不是确定性的。我的意思是，如果我们考虑 A 组和 B 组，而不是在程序的一次运行中，`A.ICollection = null and B.ICollection.Count =1 (which is by the way wrong)`而在另一次运行中是不同的，即`A.ICollection = null and B.ICollection = null (which is also wrong)`

有任何想法吗？

构建代码第一个数据库时模型混乱？框架错误或奇怪的内部框架优化？还是我只是个混蛋？:)

我也在考虑通过在其中放置一个新实体来改变关系。即转移`Publication (m):(n) Group`到类似的东西`Publication (m):(1) NewEntityRelation (n):1 Group`，但如果有的话，我宁愿选择不同的解决方案。

谢谢您的回复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T13:14:30.640

除非我弄错了，否则 InverseProperty 属性可帮助 EF 将关系的一侧与另一侧配对，但它不会告诉 EF 任何关于它是哪种关系的信息。我假设当您说要创建“m:n”关系时，您的意思是“多对多”，我发现 EF 并不总是能正确计算出来。我已经养成了通过重写 OnModelCreating 方法为多对多关系手动指定映射的习惯。以下是示例代码片段：

```
 protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<User>()
            .HasMany(a => a.Roles)
            .WithMany(r => r.Users)
            .Map(config =>
            {
                config.ToTable("UserRoles");
                config.MapLeftKey("UserId");
                config.MapRightKey("RoleId");
            });
    } 
```

上面的代码片段取自我的一个项目，它用于定义用户及其在系统中的角色之间的多对多关系。这样，EF 就不会“混淆”什么样的关系、数据库中的中间表的名称或用于将一侧映射到另一侧的键。我不确定你为什么只在关系的一侧看到问题，但我敢打赌这是因为 EF 无法完全弄清楚你想要做什么。

# java - 如何使用从 servlet 上传的 Apache Commons 文件上传文件？

> ID：10639819
> 
> 赞同：0
> 
> 时间：2012-05-17T16:38:28.487
> 
> 标签：java, file-upload, groovy, apache-commons

我需要从服务器端上传一个 xml 文件，其中文件的内容在一个字符串中。如何使此文件内容在服务器上上传（基本上保存）？

这就是我正在尝试的，效果很好，如果我直接给一个文件，`FileBody`但如何欺骗它让文件内容作为多部分请求发送到另一个 servlet？

```
private def createConfiguration(def sessiontoken)
{
    def xmlString=""
    HttpClient httpclient = new DefaultHttpClient();
    try {

        HttpPost httppost = new HttpPost(fileParams.create);

        //FileBody bin = new FileBody(new File("C:\\Simon\\myxml.xml"));
        StringBody st = new StringBody(sessiontoken);
        StringBody cfgname = new StringBody(reqParams.c_Cfgname[0]);
        StringBody cfgdesc = new StringBody(reqParams.c_Cfgdesc[0]);
        StringBody cfgtype = new StringBody(reqParams.c_Cfgtype[0]);
        StringBody cfgfile = new StringBody(reqParams.CFGFILE[0]);

        MultipartEntity reqEntity = new MultipartEntity();
        reqEntity.addPart("sessiontoken", st);
        reqEntity.addPart("cfgname", cfgname);
        reqEntity.addPart("cfgdesc", cfgdesc);
        reqEntity.addPart("cfgenv", cfgtype);
        //reqEntity.addPart("cfgfile", bin);
        reqEntity.addPart("cfgfile", cfgfile);

        httppost.setEntity(reqEntity);

        System.out.println("executing request " + httppost.getRequestLine());
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity resEntity = response.getEntity();

        System.out.println("----------------------------------------");
        //System.out.println(response.getStatusLine());
        if (resEntity != null) {
            //System.out.println("Response content length: " + resEntity.getContentLength());
            xmlString=resEntity.getContent().getText()
        }
        EntityUtils.consume(resEntity);
    } finally {
        try { httpclient.getConnectionManager().shutdown(); } catch (Exception ignore) {}
    }
    xmlString
} 
```

如果我使用上面的代码，我会得到以下异常

```
----------------------------------------

Exception while processing your Request.
No result defined for action com.abc.dc.actions.CreateConfiguration and
 result input 
```

**更新**

所以现在在检查了tomcat日志和其他服务器端代码之后，我知道内部`dc`正在获取`cfgfile`并将其设置为

```
public void setCfgfile(File cfgfile)
{
    this.cfgfile = cfgfile
} 
```

这给了我

```
java.lang.NoSuchMethodException: com.abc.dc.actions.CreateConfiguration.setCfgfile([Ljava.lang.String;) 
```

那么如何在这里重载`setCfgfile`方法`public void setCfgfile(String cfgfile)`并转换`cfgfile`为`File`对象呢？

甚至更好，

如何将此`cfgfile`字符串变量转换为`FileBody`对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T09:52:56.897

最后，这是我如何使它工作的:)

```
private def sendRequest(def sessiontoken,def sendUrl)
{
    logger.debug("Inside sendRequest to: "+sendUrl)
    def xmlString=""
    HttpClient httpclient = new DefaultHttpClient();
    try {

        HttpPost httppost = new HttpPost(sendUrl);

        def filename=reqParams.filename
        logger.debug("Filename: "+filename)
        FileBody bin = new FileBody(writeToFile(filename,reqParams.cfgfile));
        StringBody st = new StringBody(sessiontoken);
        StringBody cfgid=new StringBody("")
        if(reqParams.containsKey('cfgfile')&&reqParams.cfgid!=null)
        {
            cfgid= new StringBody(reqParams.cfgid);
        }

        StringBody cfgname = new StringBody(reqParams.cfgname);
        StringBody cfgdesc = new StringBody(reqParams.cfgdesc);
        StringBody cfgenv = new StringBody(reqParams.cfgenv);

        logger.debug("attaching multipart")
        MultipartEntity reqEntity = new MultipartEntity();
        reqEntity.addPart("sessiontoken", st);
        reqEntity.addPart("cfgid", cfgid);
        reqEntity.addPart("cfgname", cfgname);
        reqEntity.addPart("cfgdesc", cfgdesc);
        reqEntity.addPart("cfgenv", cfgenv);
        reqEntity.addPart("cfgfile", bin);

        httppost.setEntity(reqEntity);

        HttpResponse response = httpclient.execute(httppost);
        HttpEntity resEntity = response.getEntity();

        if (resEntity != null) {
            xmlString=resEntity.getContent().getText()
        }
        EntityUtils.consume(resEntity);
    } finally {
        try { httpclient.getConnectionManager().shutdown(); } catch (Exception ignore) {}
    }
    xmlString
} 
```

# asp.net-mvc-3 - Webforms 应用程序路由中的 MVC3 应用程序在 IIS7.5 中引发 HttpContext.SetSessionStateBehavior 错误

> ID：10639822
> 
> 赞同：5
> 
> 时间：2012-05-17T16:38:41.540
> 
> 标签：asp.net-mvc-3, iis-7.5, webforms

我在 Web 表单应用程序的子文件夹中运行混合 MVC 应用程序。

在 VS 2010 调试（Cassini）中一切正常，但是当我部署到 IIS7.5 时

我收到以下错误：

```
'HttpContext.SetSessionStateBehavior' can only be invoked before
  'HttpApplication.AcquireRequestState' event is raised. 
```

它在 MVC 应用程序子文件夹的文件的最后一行 ( `httpHandler.ProcessRequest(HttpContext.Current);`)上出错。`default.aspx`

```
public void Page_Load(object sender, System.EventArgs e)
{
    string pathToRewriteTo = Request.Path.ToLowerInvariant().Replace("default.aspx", "Home/Index");

    HttpContext.Current.RewritePath(pathToRewriteTo, false);

    IHttpHandler httpHandler = new MvcHttpHandler();

    httpHandler.ProcessRequest(HttpContext.Current);
} 
```

但是，如果我从 MVC 根文件夹手动导航到 Home/Index，我可以从那里看到我的应用程序很好。

我查看了抛出的错误，我只找到处理服务器传输而不是 MVC 路由的答案。

我还检查`IIS7.5`了路由处理模块、以集成模式运行的应用程序池等的配置。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-30T16:26:28.653

我们遇到了类似的问题。MVC2 及以上版本的 MVCHttpHandler 有变化。

您需要将其更改为使用`httpContext.Server.TransferRequest`.

试试下面的代码片段：

```
var httpContext = HttpContext.Current;
httpContext.Server.TransferRequest(Url, true); // change to false to pass query string parameters if you have already processed them 
```

# c# - 实习混乱

> ID：10639827
> 
> 赞同：0
> 
> 时间：2012-05-17T16:39:03.197
> 
> 标签：c#, string

我的理解是文字是自动插入的。让我们以下面的代码示例为例。

```
 string s = "x" + "y" + "z";  
 Console.WriteLine(String.IsInterned(s) ?? "Not Interned");  

 string ss = new string(new char[] { 'x', 'y', 'z' });  
 Console.WriteLine(String.IsInterned(ss) ?? "Not Interned");  

 string sss = new string(new char[] { 'a', 'b', 'c' });  
 Console.WriteLine(String.IsInterned(sss) ?? "Not Interned"); 
```

输出如下。

> xyz
> xyz
> 未实习

因此，从下面的代码示例中，字符串 s 和 ss 证明了文字是自动插入的。我不确定为什么字符串 sss 不是这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T16:41:53.383

你误会了`IsInterned`。

`IsInterned()`检查池中是否有与您传递的值相同的字符串；它不检查您传递的实例本身是否被实习。

`"x" + "y" + "z"`已被实习，因此`String.IsInterned(ss)`将返回该实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T18:41:01.967

字符串实习最初由编译器完成。由于不断折叠，它折叠`"x" + "y" + "z"`成一个字符串实例`"xyz"`，因为它是一个字符串文字，所以它被实习。

然后，当您在运行时创建第二个字符串实例时，它等于内部编译时实例（但它仍然是不同的实例），因此`IsInterned`可以找到该字符串并返回它。您从未显式地实习过字符串值，`"abc"`也从未以任何方式将其指定为字符串文字。这就是为什么它默认不被实习的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-27T10:32:57.147

+1 对 Wormbo 和 SLaks 的回答。下面的单元测试给出了相等比较发生了什么的想法。

```
[Test]
public void StringInterningTests()
{
    string a = "Hello";
    string stringFromCharArray = new string(new char[] {'H', 'e', 'l', 'l', 'o'});

    Assert.IsTrue("Hello" == a);
    Assert.IsTrue(stringFromCharArray == "Hello");
    Assert.IsTrue(new String(new char[]{'H','e','l','l','o'}) == stringFromCharArray);
} 
```

# c++ - 如何将 C++ 回调传递给 C 库函数？

> ID：10639829
> 
> 赞同：1
> 
> 时间：2012-05-17T16:39:10.993
> 
> 标签：c++, c, visual-c++, casting

我正在使用 C++ 开发我的代码，并希望使用 MPFIT 非线性曲线拟合库，该库是用 C 开发的，但允许在 C++ 中编译。

例如我有一个名为“myClass”的类，这个类有一个函数 myClass::Execute()

我在 myClass.h 文件中包含“mpfit.h”。并尝试从 Execute() 调用一个名为 mpfit 的函数。

```
int status = mpfit(ErrorFunction, num1, num2, xsub_1D, 0, 0, (void *) &variables, &result); 
```

问题是 ErrorFunction 是 myClass 的一个函数。所以当我尝试使用它时编译器会出错。我试图将 ErrorFunction 从类对象中取出，但这次我得到了下面给出的错误：

当 ErrorFunction 在类之外时出错：

> 错误 4 错误 C2664: 'mpfit' : 无法将参数 1 从 'int (__cdecl *)(int,int,double *,double,double *,void *)' 转换为 'mp_func'

当 ErrorFunction 在类内时出错：

```
Error   3   error C3867: 'myClass::ErrorFunction': function call missing argument list; use '&myClass::ErrorFunction' to 
```

误差函数定义：

```
int ErrorFunction(int dummy1, int dummy2, double* xsub, double *diff, double **dvec, void *vars) 
```

如何调用该函数并将其解析为 C 函数 mpfit？

`mp_func`定义为：

```
/* Enforce type of fitting function */
typedef int (*mp_func)(int m, /* Number of functions (elts of fvec) */
               int n, /* Number of variables (elts of x) */
               double *x,      /* I - Parameters */
               double *fvec,   /* O - function values */
               double **dvec,  /* O - function derivatives (optional)*/
               void *private_data); /* I/O - function private data*/ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T21:42:33.527

确保您的调用约定匹配。C 库使用 C 调用约定或 cdecl (__cdecl)。如果您在 C++ 中使用 mp_func typedef，它可能默认为编译器的标准调用约定，或 stdcall (__stdcall)。创建一个新的 typedef 或将其更改为以下内容：

```
typedef int __cdecl (*mp_func)(int m, /* Number of functions (elts of fvec) */
               int n, /* Number of variables (elts of x) */
               double *x,      /* I - Parameters */
               double *fvec,   /* O - function values */
               double **dvec,  /* O - function derivatives (optional)*/
               void *private_data); /* I/O - function private data*/ 
```

而当你声明ErrorFunction时，也要声明为__cdecl：

```
int __cdecl ErrorFunction(int, int, double*, double *, double **, void *); 
```

如果编译器在调用 mpfit 函数时仍然报错，您可以尝试使用 cdecl 将函数指针转换为 mp_func typedef：

```
int status = mpfit((mp_func)ErrorFunction, num1, num2, xsub_1D, 0, 0, (void *) &variables, &result); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T16:59:33.570

鉴于您已经展示的`mpfit()`和的定义`mp_func`，您需要使用 的`private_data`参数`mp_func`来传递您的类的`this`指针。您当前正在使用该参数来传递您的`variables`项目。成为`variables`您班级的一员（如果还没有的话），然后`this`改为`mpfit()`：

```
class MyClass
{
private:
    TheDataType variables;
    static int ErrorFunction(int m, int n, double *x, double *fvec, double **dvec, MyClass *pThis);
public:
    void DoIt();
};

void MyClass::DoIt()
{
    // ...
    int status = mpfit((mp_func)&ErrorFunction, num1, num2, xsub_1D, 0, 0, this, &result); 
    // ...
}

int MyClass::ErrorFunction(int m, int n, double* x, double *fvec, double **dvec, MyClass *pThis)
{
    // use pThis->variables as needed ...
} 
```

或者：

```
class MyClass
{
private:
    static int MPFitErrorFunction(int m, int n, double *x, double *fvec, double **dvec, MyClass *pThis);
    int MyErrorFunction(int m, int n, double *x, double *fvec, double **dvec);
public:
    void DoIt();
};

void MyClass::DoIt()
{
    // ...
    int status = mpfit((mp_func)&MPFitErrorFunction, num1, num2, xsub_1D, 0, 0, this, &result); 
    // ...
}

int MyClass::MPFitErrorFunction(int m, int n, double* x, double *fvec, double **dvec, MyClass *pThis)
{
    return pThis->MyErrorFunction(m, n, x, fvec, dvec);
} 

int MyClass::MyErrorFunction(int m, int n, double* x, double *fvec, double **dvec)
{
    // use this->variables as needed ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T16:44:09.473

看起来而不是：

```
int ErrorFunction(int dummy1, int dummy2, double* xsub, double diff, double *dvec, void *vars) 
```

它应该是：

```
int ErrorFunction(int dummy1, int dummy2, double* xsub, double *diff, double **dvec, void *vars) 
```

匹配你的

```
typedef int (*mp_func)(int m, /* Number of functions (elts of fvec) */
               int n, /* Number of variables (elts of x) */
               double *x,      /* I - Parameters */
               double *fvec,   /* O - function values */
               double **dvec,  /* O - function derivatives (optional)*/
               void *private_data); /* I/O - function private data*/ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-17T17:01:22.723

必须声明您的回调才能`extern "C"`使其正常工作。

**编辑**：我看到人们很难理解这个事实。该标准说（7.5 / 1）：

> 具有不同语言链接的两个函数类型是不同的类型，即使它们在其他方面相同。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T16:50:45.500

C++ - to - C 有一个标准的成语，使用 pimpl 成语：

foo_c.h：

```
#ifdef __cplusplus
extern "C" {
#endif
//forward declaration.  clients of foo_c.h should only hold pointers to Foo_c
typedef struct Foo_c Foo_c;

int someMethod(Foo_c* foo);
#ifdef __cplusplus
}
#endif 
```

foo_c.cpp：

```
#include <foo.h>
struct Foo_c {
       Foo foo;
}
int someMethod(Foo_c* foo) { 
     try {
         foo->foo.someMethod();
         return 0; //no error
     }
     catch(...) {
         return 1; //error
     }
} 
```

（根据以下答案为外部“C”编辑。）

# c# - 我应该将每个控制操作中的菜单项列表传递给视图，还是应该拉出列表？

> ID：10639830
> 
> 赞同：1
> 
> 时间：2012-05-17T16:39:16.740
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-3

我有一个带有扩展方法的布局，该方法采用菜单项列表并从中创建 HTML。在控制器动作中，我有：

```
public ActionResult Article(string rk)
        {
            Viewbag.menuItems = _menu.MenuItems("00");
            ..
            return View(vm);
        } 
```

我在许多动作中重复了这一点。然后在 _layout 我有：

```
Html.NavLinks(ViewBag.menuItems) 
```

我意识到我们应该为视图提供所需的内容，但在这种情况下，如果视图从操作中提取部分细节会更好吗？我问这个是因为我只有一个需要数据的布局，我认为在那里编写代码可能比在 20 多个操作中检索数据并发送到视图更好。

如果它从布局中拉出，那么 MVC 会缓存操作的结果吗？

如果从一个动作中提取结果更好，那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T16:42:57.327

> 如果它从布局中拉出，那么 MVC 会缓存操作的结果吗？

它不会缓存操作的结果，不，它会在**每次**请求时获取它们。

> 如果从一个动作中提取结果更好，那么我该怎么做呢？

而不是“从动作中拉出它们”，只需将它们放在您从控制器发回的模型中，然后您就可以在视图中使用它们。

# admob - 发布应用后才获得ID，如何将Admob ID放入应用中

> ID：10639840
> 
> 赞同：5
> 
> 时间：2012-05-17T16:40:07.780
> 
> 标签：admob

我知道这不是一个严格的编程问题，我提前为此道歉。

Admob 广告似乎存在“鸡与蛋”的情况。当您在发布之前没有获得 ID 时，如何将发布者 ID 放入应用程序中？我知道我一定是看错了，但我无法理解它，而且我在网络、谷歌或 Admob 的网站上找不到任何东西。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T22:26:57.917

创建 AdMob 网站/应用时，您不必指定 Play 商店软件包网址。您可以将其留空，然后在发布应用程序时返回并稍后填写。

因此，您可以在发布应用之前获取 AdMob ID。

# sorting - 将主干视图与集合一起排序

> ID：10639842
> 
> 赞同：5
> 
> 时间：2012-05-17T16:40:19.623
> 
> 标签：sorting, backbone.js, collections, view

我有一个集合，其中包含应该在列表中访问的几个项目。

因此集合中的每个元素都有自己的视图元素，然后将其添加到 DOM 中的一个容器中。

我的问题是：如何将我在具有比较器函数的集合中实现的排序顺序应用于 DOM？第一次渲染很简单：您遍历集合并创建所有视图，然后以正确的顺序附加到容器元素。

但是，如果模型被更改并由集合重新排序怎么办？如果添加元素怎么办？我不想重新渲染所有元素，而是只更新/移动必要的 DOM 节点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T17:10:15.080

## **模型添加**

添加元素的路径相当简单，`index`当模型添加到集合时，您可以在选项中获得。这个索引是排序索引，基于如果你有一个简单的视图，应该很容易在某个索引处插入你的视图。

## **排序属性更改**

这个有点棘手，我没有方便的答案（我有时也为此苦苦挣扎），因为在您更改模型在何时排序的属性后，集合不会自动重新调整其顺序您最初添加了它。

**来自主干文档：**

> **如果您稍后**更改模型属性，则具有比较器函数的集合不会自动重新排序，因此您可能希望在更改会影响顺序的模型属性后调用 sort。

因此，如果您对集合调用 sort ，它将触发一个`reset`事件，您可以将其挂钩以触发整个列表的重绘。

在处理相当长的列表时非常无效，并且会严重降低用户体验甚至导致挂起

因此，您可以摆脱这种情况的几件事就是知道您可以：

*   通过调用排序后总是找到模型的索引`collection.indexOf(model)`
*   从`add`事件中获取模型的索引（第三个参数）

编辑：

在考虑了一下之后，我想出了这样的事情：

```
var Model = Backbone.Model.extend({
    initialize: function () {
        this.bind('change:name', this.onChangeName, this);
    },
    onChangeName: function ()
    {
        var index, newIndex;

        index = this.collection.indexOf(this);
        this.collection.sort({silent: true});
        newIndex = this.collection.indexOf(this);
        if (index !== newIndex)
        {
            this.trigger('reindex', newIndex);
            // or
            // this.collection.trigger('reindex', this, newIndex);

        }
    }
}); 
```

然后在你看来你可以听

```
var View = Backbone.View.extend({
    initialize: function () {
        this.model.bind('reindex', this.onReindex, this);
    },
    onReindex: function (newIndex)
    {
        // execute some code that puts the view in the right place ilke
        $("ul li").eq(newIndex).after(this.$el);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-25T20:06:45.993

感谢文森特提供了一个很棒的解决方案。但是，元素的移动存在问题，具体取决于重新索引的元素移动的方向。如果它向下移动，则新位置的索引与 DOM 中的索引不匹配。这修复了它：

```
var Model = Backbone.Model.extend({
    initialize: function () {
        this.bind('change:name', this.onChangeName, this);
    },
    onChangeName: function () {
        var fromIndex, toIndex;

        fromIndex = this.collection.indexOf(this);
        this.collection.sort({silent: true});
        toIndex = this.collection.indexOf(this);
        if (fromIndex !== toIndex)
        {
            this.trigger('reindex', fromIndex, toIndex);
            // or
            // this.collection.trigger('reindex', this, fromIndex, toIndex);
        }
    }
}); 
```

示例听力部分：

```
var View = Backbone.View.extend({
    initialize: function () {
        this.model.bind('reindex', this.onReindex, this);
    },
    onReindex: function (fromIndex, toIndex) {
        var $movingEl, $replacingEl;

        $movingEl = this.$el;
        $replacingEl = $("ul li").eq(newIndex);

        if (fromIndex < toIndex) {
            $replacingEl.after($movingEl);
        } else {
            $replacingEl.before($movingEl);
        }
    }
}); 
```

# 3d - 向量和顶点有什么区别？

> ID：10639844
> 
> 赞同：11
> 
> 时间：2012-05-17T16:40:26.277
> 
> 标签：3d, xna, vector-graphics, vertex

我经常看到在 3D 编程上下文中使用“向量”和“顶点”（复数“顶点”）这两个词。

据我所知，它们都描述了 n 维空间中的一个点。例如，XNA 框架有 Vector2、Vector3 和 Vector4 类，但似乎没有 Vertex 类。

向量和顶点之间的确切区别是什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-17T17:10:10.757

“[向量](http://mathworld.wolfram.com/Vector.html)”是一个数学概念；粗略地说，它表示某个坐标空间中的位移。顶点是一些 3D（或实际上是 2D）几何的元素，通常具有位置和一些其他属性（颜色、纹理坐标等）。

如果假设向量是从坐标系原点的位移，则顶点的位置（因此有时是顶点本身）可以由向量表示。有时人们将向量的这种表示称为“位置向量”。

因此，粗略地说，不同之处在于向量可用于（全部或部分）描述顶点。

# c# - 向程序员员工隐藏我的部分代码

> ID：10639845
> 
> 赞同：1
> 
> 时间：2012-05-17T16:40:27.633
> 
> 标签：c#, asp.net, .net, asp.net-mvc-3

我正在开发一个 C# 项目，并且有两个程序员可以帮助我完成项目的某些部分。问题是我不信任这些程序员，因为他们最近加入并需要保护我公司的财产。

我需要向两个程序员隐藏部分代码，这样他们就看不到它，他们应该仍然能够处理他们的部分并运行完整的应用程序来测试它。

有这种事吗？:)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-17T17:16:39.917

知道几点：

# 您无法隐藏用户编译的代码。

C# 可以非常容易地查看您正在编译的内容，但这实际上适用于所有编程语言：如果需要编译它，则针对 dll 进行编译，或者他们可以将其作为 DLL 或作为原始文件运行C#，他们可以访问它背后的逻辑。 **没有办法解决这个问题。** 如果计算机可以运行程序并且它都驻留在您的 PC 上，那么人类也可以查看它并学习如何操作。

然而！您可以设计您的程序，使他们不需要*针对*它进行编译。

# 使用接口。

制作其他员工必须编写的代码插件。让他们将他们的代码作为一个完全独立的项目编写到一个接口，您的 API 的核心部分在运行时动态加载。

查看[托管可扩展性框架](http://mef.codeplex.com/)以获取执行此操作的工具。

# 使用 Web 或远程服务。

可以抽象出特定保密的组件，因此可以隐藏其工作原理的细节，然后通过网络调用调用。这仅适用于您要保护的核心细节对时间不敏感的情况。这也不能保护该功能背后的*想法*：员工需要了解能够使用它的目的，仅此一项就足以从头开始重建它。

# 通过代码审查建立信任。

如果您目前不信任您的员工，则需要开发它。 **您将无法知道每个人总是做的所有事情。** 这不仅是编程的关键技能，也是生活中的关键技能。如果您觉得您永远无法信任他们，那么您要么需要雇用您可以信任的新员工，要么建立对他们的信任。

建立对其能力的信任的一种方法是通过代码审查。首先，确保您使用的是允许轻松分支的版本控制系统。如果不是，请立即切换到[Mercurial](https://www.mercurial-scm.org/) *。拥有“整合”区和个别发展区，通常通过克隆分支或命名分支。在他们提交代码之前，与员工聚在一起并审查更改。如果你对他们满意，那就让他们承诺。这将在每次提交时消耗一点时间，但如果您对更改进行快速迭代，那么审查也会很快。

# 通过友情建立信任。

如果你不信任你的员工，他们很可能也不会信任你。相互不信任不会产生忠诚。没有忠诚，你就没有保护。如果他们可以访问您的存储库，而您不信任他们，那么他们很有可能只需稍加努力即可获得您想要的代码。

大多数人大部分时间都是诚实的。和他们一起工作。了解他们。如果一个人被证明是为一个敌对实体工作，那么他们可能已经获得了他们想要得到的东西，而你无论如何都被搞砸了。如果一个人被证明是一个病态的骗子或无能，立即更换他们。通过“保护”您的代码不被他们看到，这些问题都不会得到解决。

# 执行背景调查。

从安全的角度来看，提高对员工信任的另一种方法是背景调查。几百美元和几天，你可以找到关于他们的各种信息。如果您准备好向他们隐藏代码，并且您是雇主，那么您不妨在他们窃取宇宙的秘密之前进行尽职调查。

# 你的代码没那么重要。

我不想把它告诉你，但你的代码几乎有 100% 的机会不是特别的。试图通过默默无闻来保护它是浪费时间，也是一种众所周知的、糟糕的保护方法。

祝你好运！

**为什么是 Mercurial？只是因为它是一种易于上手的选项。如果它适合您的喜好，请随意使用任何其他工具，例如 Git。您使用哪一个完全无关紧要，与整个讨论无关。 *

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T16:42:40.793

**你做不到，**

即使您只给他们一个包含您的代码的 DLL，他们也可以使用反射工具提取代码，例如`reflector`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T16:43:42.997

保留单独的备份并将虚拟占位符提交给源代码控制。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-17T16:47:25.510

复杂的方法：用VS2010和他们需要的所有文件建立一个应用服务器，锁定所有东西，这样他们就不能直接访问任何文件，只能运行VS2010和构建的应用程序，并且只为受保护的代码提供DLL。

从理论上讲，他们将能够处理他们需要的代码，但永远无法直接访问 DLL，也无法安装或使用诸如 .NET Reflector 之类的工具来反汇编文件……可能仍然是一些你需要寻找的漏洞。

正确的方法：聘请值得信赖的程序员。;)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-17T17:05:53.693

将您的代码放入 DLL 并使用 Dotfuscator 来混淆内部工作。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-17T17:16:16.127

我能看到的唯一方法是给他们编译和混淆的程序集以供参考。因为您只能混淆私有成员，您可能需要修改您的代码，以便公共方法根本不做太多事情。如果公共方法中有任何有趣的代码，您应该重新排列代码，如下所示：

```
public bool ProcessSomething()
{
    return this.DoProcessSomething();
}

private bool DoProcessSomething()
{
    // your code
} 
```

即使是 VS 免费提供的混淆器也会做一些工作，使查看您的代码变得不简单。如果您需要更多保护，您当然需要更好的混淆器。

但从长远来看，这是不切实际的，并且会向那些告诉你不信任他们的开发人员发出不好的信号。不会有什么好结果。如果您不是老板（或代码的所有者），我不会那么担心 - 毕竟它不是您的财产。你可以和你的老板谈谈，表达你的担忧。如果你是老板，你一开始就不应该雇佣你不信任的人。

# ruby-on-rails - Rails 3.1 - 模型中的条件语句？

> ID：10639850
> 
> 赞同：0
> 
> 时间：2012-05-17T16:40:52.557
> 
> 标签：ruby-on-rails, ruby-on-rails-3

是否可以在 Rails 模型中使用条件语句？

我在想这样的事情：

```
if create
  before_save do
  self.position = self.track.position
  end
else
  acts_as_list :scope => :product_id
end 
```

我基本上希望acts_as_list 在初始创建完成后生效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T16:54:12.763

It looks like you're looking for before_create.

```
class Model < ActiveRecord::Base

  acts_as_list :scope => :product_id
  before_create :set_initial_position

  private

  def set_initial_position
    self.position = self.track.position
  end
end 
```

# c# - 返回 XmlTextReader 对象，我可以调用 .Close()

> ID：10639851
> 
> 赞同：0
> 
> 时间：2012-05-17T16:41:00.703
> 
> 标签：c#, xmlreader, xmltextreader

我现在陷入困境，试图找到问题的根源。我们缺乏异常处理，所以我有点猜测错误来自哪里。这是我的问题，如果一个方法返回一个 XmlTextReader 对象，如果该对象被包装在 try/catch/finally 中，而 finally 块执行 .Close() 方法，该对象是否会变为 null？

如果是，我该如何正确处理这些资源，我知道没有 .Clone() 或 .Copy() 方法，还有其他方法可以实现吗？我是否应该关心处理 XmlTextReader 和 XmlReader 对象？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T16:53:04.817

`XmlReader`在将其返回给调用者之前，您不得关闭/处置。

不，`Dispose`/`Close`不要分配`null`给一个对象——他们只是要求对象释放它认为需要释放的任何资源。

```
XmlReader GetReader()
{
   XmlRead reader = ....

   // DO NOT dispose/close reader here with 
   // reader.Dispose() or using(reader){...}

   return reader;
} 
```

用法：

```
using(var reader = GetReader()) {...} 
```

请注意，许多类型可以防止在`Dispose`调用后访问数据。[.Net 中许多类使用的方法是在调用ObjectDisposedException](https://msdn.microsoft.com/en-us/library/system.objectdisposedexception(v=vs.110).aspx)之后使所有访问对象状态的调用失败`Dispose`。

# html - CSS :target 伪类和兄弟问题

> ID：10639853
> 
> 赞同：1
> 
> 时间：2012-05-17T16:41:03.393
> 
> 标签：html, css, css-selectors, pseudo-class

当一个不同的 div 是 :target(ed) 时，我试图改变一个 div 的属性。JSFiddle 在这里：http: [//jsfiddle.net/FC5sQ/](http://jsfiddle.net/FC5sQ/)。（我相信）问题的根源是

```
#tevents:target ~ .titlewrap {top:0;} 
```

CSS 中的行。基本上，一旦 #tevents id 成为目标，我希望 titlewrap 类的最高值为 0。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T16:50:49.677

一般的兄弟组合`~`器不能向后工作。因此，由于您在 HTML`.titlewrap`中出现之前`#tevents`，您的选择器将不起作用。

不幸[的是，没有以前的兄弟组合](https://stackoverflow.com/questions/1817792/css-previous-sibling-selector)器，所以如果你不能更改标记并相应地设置更改的样式，那么你就不能使用`:target`和兄弟组合器来做到这一点。

顺便说一句，你的`top: 30%`风格也没有任何效果，那是因为你没有`height`为你的`.titlewrap`.

# performance - C# 哈希集 搜索性能（与 ObservableCollection 相比 )?

> ID：10639856
> 
> 赞同：6
> 
> 时间：2012-05-17T16:41:10.667
> 
> 标签：performance, linq, observablecollection, hashset

C# 的泛型 HashSet<T> 搜索性能应该是 O(1)，而 ObservableCollection<T> 的搜索性能应该是 O(n)。

我有大量独特的元素，每个元素都有一个不唯一的 DateTime 属性。

每个元素通过简单地返回其 DateTime.GetHashCode() 来计算其 HashCode。

现在我想获取我的数据的一个子集，例如日期在 2012 年 3 月到 2012 年 6 月之间的所有元素。

```
 var result = from p in this.Elements
                 where p.Date >= new DateTime(2012, 03, 01) &&
                       p.Date <= new DateTime(2012, 30, 06
                 select p; 
```

如果我对 300.000 个元素的集合运行此 LINQ 查询，则返回给定范围内的 80 个元素大约需要 25 毫秒 - 我使用 HashSet<T> 还是 ObservableCollection<T> 都没有关系。

如果我手动遍历所有元素并检查它们，则需要相同的时间，约 25 毫秒。

但我确实知道给定范围内的所有日期的 HashCode。是否可以从我的 HashSet<T> 中获取具有给定 HashCodes 的所有元素？我觉得这样会快很多...

是否可以加快 LINQ 查询？我假设它没有利用我的 HashSet<T> 的特殊能力？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T16:47:30.220

您没有使用正确的数据结构。您应该使用排序列表（按`Date`属性排序）之类的东西，然后您可以在其中对范围的开头和结尾进行二进制搜索。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-18T09:27:34.050

正如已经指出的那样，散列集在确定给定散列是否在集合中时非常有效。您的查询仅使用哈希集实现 IEnumerable 来迭代整个集合并进行日期比较的事实。它根本不会使用哈希。这就是手动方式与查询花费相同时间的原因。

**您无法从哈希集中获取基于哈希的元素，您只能测试该元素在集合中是否存在。** 如果您需要通过 has 获取字典，那么您想要的就是字典（您似乎不需要）

决定你需要对你的数据做什么，并使用一个为此优化的结构。这可能是您自己的类，它维护着多个内部结构，每个内部结构在一件事情上都很有效（比如一个用于搜索范围，另一个用于通过多个字段检查是否存在），或者可能有一个适合您需要的现有结构。但是，如果不知道你想用你的数据做什么，就很难给出建议。

要考虑的另一件事是您是否过早优化。如果手动搜索的 25 毫秒足够快，那么任何实现 IEnumerable 的结构都可能足够好。在这种情况下，您可以根据您需要的其他标准选择一个。

# zend-framework - Zend 根据一个控制器/动作中的请求创建表单

> ID：10639857
> 
> 赞同：0
> 
> 时间：2012-05-17T16:41:14.753
> 
> 标签：zend-framework, request, zend-form

我真的不知道如何用好标题，但这是我的问题。我决定不再使用 25 个控制器来处理页面，而是使用一个`PageController`带有 a`viewAction`参数的控制器`:page`- 例如，`http://localhost/website/page/about-us`将`PageController::viewAction()`使用`page = about-us`. 所有页面都存储在模板文件夹中，因此 viewrenderer 设置为 render `application\templates\default\about-us.phtml`。

我这样做是为了巩固，这似乎是一种更好的方法。我的问题如下：假设页面请求是`contact-us`，我需要`Zend_Form`在联系页面中使用。所以，我需要一种方法`PageController::viewAction()`来识别页面需要构建一个表单，构建表单，并且在提交时需要处理它（也许这应该在抽象处理方法中处理 - 不确定）。

我不知道如何实现这一点。我想也许我可以存储一个带有表单名称和连接页面标识符的列。更好的是，为表单创建一个一对多页面，然后在提交循环中通过表单并检查是否提交，如果是则处理它（也许`isSubmitted()`zend_form中有一个方法。我真的不知道如何处理这个，我正在寻找我能得到的任何帮助。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T17:23:46.757

以下是我想到的可能有用或帮助您指明适合您的方向的东西。

这可能只有在您每页不超过一个表单的情况下才能正常工作，如果您需要在一个页面上使用多个表单，您将不得不做一些超出此自动表单处理的事情。

为附加到页面的表单创建一个标准位置（例如应用程序/表单/页面）。这是保存与页面关联的自动表单的地方。

在您的`viewAction`中，您可以利用自动加载器来查看该页面的表单是否存在。例如：

```
$page  = $this->getParam('page');
$page  = ucfirst(preg_replace('/-(\w)/ie', "strtoupper('$1')", $page)); // contact-us -> ContactUs
$class = 'Application_Form_Page_' . $page;

// class_exists will invoke the autoloader to map a class to a file
if (class_exists($class)) {
    // a form is defined for this page
    $form = new $class();

    // check if form was posted
    if ($this->getRequest()->isPost()) {
        if ($form->isValid($this->getRequest()->getPost()) {
            // form is valid - determine how to process it
        }
    }

    // assign the form to the view
    $this->view->pageForm = $form;
} 
```

所有这些真正遗漏的是您为处理特定表单而采取的行动。由于联系表单可能会生成一封电子邮件，而另一个表单可能会将数据插入数据库，因此您将需要某种回调系统，或者可能需要另一个可以自动映射的包含表单处理器代码的类。

无论如何，首先想到的是沿着这些思路，我希望这有助于给你更多的想法。

# javascript - Javascript window.navigator.standalone 坏了

> ID：10639858
> 
> 赞同：13
> 
> 时间：2012-05-17T16:41:14.840
> 
> 标签：javascript, web-applications, fullscreen

现在真的很烦我

我已经将我的代码剥离到这个

```
$(function(){
  if ( ("standalone" in window.navigator) && !window.navigator.standalone ) {
    alert('full screen');
  }
}); 
```

然而，每次我在我的 ipad FROM safari 上运行它时，它都会触发警报。

我不知道为什么，这给我周一到期的整个 uni 项目造成了混乱！任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-19T04:08:02.183

当/如果网页处于标准/通常的 Safari 模式时，“window.navigator.standalone”值将为 False。只有当网页处于“应用模式/即全屏模式”时，该值才会为 True。注意：此 JavaScript 值在不支持“应用程序模式/即全屏模式”的浏览器中不存在。因此，您应该测试属性 window.navigator.standalone 的存在以及它的真实性。

# jpa-2.0 - 不同 entityManager 之间的 oneToMany 复制

> ID：10639860
> 
> 赞同：0
> 
> 时间：2012-05-17T16:41:19.733
> 
> 标签：jpa-2.0

我有一个实用程序可以使用两个实体管理器在两个不同的数据库之间复制实体。

```
Query q = em1.createQuery("SELECT o FROM Holder o WHERE o.id=1");
Holder holder = (List<Holder>) q.getSingleResult();
em1.clear();
em2.getTransaction().begin();
em2.merge(holder);
em2.getTransaction().commit(); 
```

除 oneToMany 关系外，一切正常：

```
@Entity
public class Holder{
@OneToMany(fetch = FetchType.LAZY, cascade = CascadeType.ALL, orphanRemoval = true)
@JoinColumn(name = "HOLDER_ID")
private Set<Piece> pieces;
}
@Entity
public class Piece{
//No mapped by to holder
} 
```

操作的结果是持有者保持正常，并且片段也保持不变，**但**HOLDER_ID 为空。如果我在 Piece 中显式地由持有者映射，则会复制连接列，但我无法将模型更改为双向。

关于什么可能是错误的任何想法？在同一个 entityManager 中分离和合并也可以正常工作。 **更新**：生成的 sql 不包含 HOLDER_ID 更新，因此在同一个 entityManager 中也“失败”。

（我使用 Hibernate 作为 JPA 提供程序）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T09:15:38.633

好的，我发现表为空时生成的sql是

```
1/ Insert for Holder
2/ Insert for each Piece
3/ Update to setup Holder_id in each Piece 
```

但是如果表格包含 Holder 但不包含碎片

```
1/ Insert for each Piece 
```

这就是碎片损失参考持有人的原因。

# python - 单行中的 Python 素数生成器

> ID：10639861
> 
> 赞同：6
> 
> 时间：2012-05-17T16:41:19.723
> 
> 标签：python, math, integer, primes

我正在尝试在一行 Python 中创建素数生成器，作为一个有趣的练习。

以下代码按预期工作，但速度太慢：

```
primes = lambda q: (i for i in xrange(1,q) if i not in [j*k for j in xrange(1,i) for k in xrange(1,i)])
for i in primes(10):
   print i, 
```

所以我试图通过只检查 j 和 k 的平方根来做到这一点：

```
primes = lambda q: (i for i in xrange(1,q) if i not in [j*k for j in xrange(1,int(round(math.sqrt(i)+1))) for k in xrange(1,int(round(math.sqrt(i)+1)))])
for i in primes(10):
   print i, 
```

但它输出：`2 3 5 6 7 8`

所以我的索引 j 和 k 一定有问题，但我不知道。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-17T16:52:00.307

这不是埃拉托色尼的筛子，尽管它看起来是。事实上，情况要糟糕得多。Sieve 是寻找素数的最佳算法。

见[http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)

**编辑**：我已将[https://stackoverflow.com/a/9302299/711085](https://stackoverflow.com/a/9302299/711085)修改为单线（最初它不是真正的筛子，但现在......可能......）：

```
reduce( (lambda r,x: r-set(range(x**2,N,x)) if (x in r) else r), 
        range(2,N), set(range(2,N))) 
```

演示：

```
>>> primesUpTo(N): lambda N: reduce(...)
>>> primesUpTo(30)
{2, 3, 5, 7, 11, 13, 17, 19} 
```

* * *

可悲的是，我认为虽然这在函数式编程语言中会很有效，但由于非持久（共享状态和不可变）数据结构，它在 python 中可能效率不高，并且 python 中的任何筛子都需要使用突变来实现可比性能。如果我们非常想的话，我们仍然可以把它塞进一个单列中。但首先...

普通筛：

```
>>> N = 100
>>> table = list(range(N))
>>> for i in range(2,int(N**0.5)+1):
...     if table[i]:
...         for mult in range(i**2,N,i):
...             table[mult] = False
... 
>>> primes = [p for p in table if p][1:]
>>> primes
[2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97] 
```

我们现在可以在同一行定义和调用匿名函数，以及`[...].__setitem__`进行内联突变的技巧，以及返回`... and foo`时评估的技巧：`...``foo`

```
>>> primesUpTo = lambda N: (lambda table: [[table.__setitem__(mult,False) for mult in range(i**2,N,i)] for i in range(2,int(N**0.5)+1) if table[i]] and [p for p in table if p][1:])(list(range(N)))
>>> primesUpTo(30)
[2, 3, 5, 7, 11, 13, 17, 19, 23, 29] 
```

继续惊恐地畏缩，单行扩展（奇怪的漂亮，因为你几乎可以直接翻译控制流，但对一切都是可怕的滥用）：

```
lambda N:
    (lambda table: 
        [[table.__setitem__(mult,False) for mult in range(i**2,N,i)] 
            for i in range(2,int(N**0.5)+1) if table[i]] 
        and [p for p in table if p][1:]
    )(list(range(N))) 
```

在我的机器上，这个单线变异版本在 10 ⁸左右放弃了，而原始变异版本在 10 ⁹左右放弃了，内存不足（奇怪）。

原版在 10 ⁷`reduce`放弃。所以也许它毕竟不是*那么*低效（至少对于您可以在计算机上处​​理的数字）。

 ***编辑**2似乎您可以更简洁地滥用副作用：

```
reduce( (lambda r,x: (r.difference_update(range(x**2,N,x)) or r)
                     if (x in r) else r), 
        range(2,N), set(range(2,N))) 
```

^(它在 10 8)左右放弃，与单线变异版本相同。

***编辑3：***这[以](http://ideone.com/Qyzjp)O(N)[经验复杂度](http://en.wikipedia.org/wiki/Analysis_of_algorithms#Empirical_orders_of_growth)运行，而没有`difference_update`它以[O(n^2.2) 复杂度](http://ideone.com/vZB5z)运行。

将减少的范围限制为上限的 sqrt，并[仅使用赔率](http://ideone.com/gl1h9)，两者都会导致额外的加速（相应地*2*倍和*1.6 倍*）：

```
reduce( (lambda r,x: (r.difference_update(range(x*x,N,2*x)) or r)
                     if (x in r) else r), 
        range(3, int((N+1)**0.5+1), 2),
        set([2] + range(3,N,2))) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T16:46:36.647

您不能只检查直到平方根的数字乘积来测试素数。看 8 - 8 的平方根是 2.8，所以它永远不会尝试 4 * 2。（事实上，唯一*不会*被视为素数的数字是平方数）。

ETA：与其尝试 j 和 k 的所有可能组合，不如检查 i 是否可以被每个 j 整除（使用`i % j == 0`）直到 j 的平方根？这既需要更少的代码，也更有效（尽管它仍然*不如*Eratosthenes 的筛子高效）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-19T10:10:50.003

这就是你想要的：

```
def primes (q) :
 # return (i for i in xrange(2,q) if i not in [j*k for j in xrange(1,i) for k in xrange(1,i)])
 # return (i for i in xrange(2,q) if i not in [j*k for j in xrange(1,i) for k in xrange(1,j+1)])
 # return (i for i in xrange(2,q) if i not in [j*k for j in xrange(1,i/2+1) for k in xrange(1,j+1)])

 return (i for i in xrange(2,q) if i not in [j*k for j in xrange(1,i/2+1) for k in xrange(1,min(j+1,i/j+1))]) 
```

在 Haskell 中，范围是包容性的，所以`primes(542)`是

```
[n | n<-[2..541], not $ elem n [j*k | j<-[1..n-1],     k<-[1..n-1]]]  --  25.66s
[n | n<-[2..541], not $ elem n [j*k | j<-[1..n-1],     k<-[1..j]]]    --  15.30s
[n | n<-[2..541], not $ elem n [j*k | j<-[1..n`div`2], k<-[1..j]]]    --   6.00s
                                                                      --   0.79s
[n | n<-[2..541], not $ elem n [j*k | j<-[1..n`div`2], k<-[1..min j (n`div`j)]]] 
```

实际上，*`1*x == x`*因此不需要*1作为乘数，因此它应该是*

```
[n | n<-[2..541], not $ elem n [j*k | j<-[2..n`div`2], k<-[2..min j (n`div`j)]]] 
```

仅需 0.59 秒。或者，在 Python 中，

```
def primes (q) :
 return (i for i in xrange(2,q) if i not in [j*k for j in xrange(2,i/2+1) for k in xrange(2,min(j+1,i/j+1))]) 
```

* * *

*更新：*出于某种原因，`min j ...`至少在 Haskell 中没有太大区别。所以表达式变得简单

```
[n | n<-[2..541], not $ elem n [j*k | j<-[2..n`div`2], k<-[2..n`div`j]]] 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-07-23T04:56:02.817

怎么样：

```
def primes(x):
  return [i for i in range(2,x) if 0 not in [i%j for j in range(2,i)]] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-04-28T09:46:12.773

使用推导

```
[x for x in range(4, 1000) if all(x % y != 0 for y in range(2, int(math.sqrt(x)) + 1))] 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-01-09T22:23:36.503

虽然这里还有其他很好的答案，但我想包括我的版本。

```
n = 1000
primes = [candidate for candidate in range(1, n) if candidate not in [x * mult for x in range(2,n // 2 + 1) for mult in range(2,n//x)]] 
```

这具有 O(n**2) 的运行时间。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-10-31T21:46:40.980

```
def isPrime(n):
    return all(n % d for d in range(2, int(n**.5)+1))

primes = set(n for n in range(2, 100) if isPrime(n)) 
```

如果需要，可以将其压缩为一行：

```
primes = set(n for n in range(2, 100) if all(n % d for d in range(2,int(n**.5)+1))) 
```

Where`all()`确保没有任何值是`False` **(或`0`)**；在这种情况下，确保我们正在测试的数字以下的数字都不是因子，在这种情况下，数字是素数。

我们检查直到数字平方根的所有因子以提高效率：如果 sqrt(n) 以下的数字不是因子，则 sqrt(n) 之上的数字都不是因子，因为因子总是成对出现。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-06-30T14:18:05.010

这是一个单行代码：

```
print((lambda n:[i for i in range(2, n) if ["A7A" for j in range(2, i) if i%j==0]==[]])(100)) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-01-27T18:48:56.777

这是另一种方式，它不是单行但更有效。积极的一面是，每次您只检查以前找到的素数而不是查看 range(n) 中的所有值：

```
def prime(n):
    pm_list = [2]
    for i in range(3,n+1):
        pm_arr = np.array(pm_list)
        if any(i // pm_arr == i / pm_arr) == False:
            pm_list.append(i)
    return pm_list 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-01-28T17:43:10.653

这是一个基于 Eratosthenes 筛子的 oneliner。

```
primes = lambda N: (N>1)*[2]+[p for s in [[1]*(N+1)] for p in range(3,N+1,2) if s[p] and not s.__setitem__(slice(p,None,p),N//p*[0])] 
```

它在我的笔记本电脑上在 0.097 秒内生成多达 1,000,000 个素数。

对于高达 10^8 的素数：11.6 秒，

对于高达 10^9 的素数：169.3 秒（2.8 分钟）

对于高达 10^10 的素数：似乎内存不足（IDLE shell 退出）

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-12-27T16:55:54.057

以下代码应打印低于值“限制”的所有数字的列表。

```
primes = lambda limit: [num for num in range(2, limit) if num > 1 and (num == 2 or num % 2 != 0) and all(num % divisor != 0 for divisor in range(3, int(num ** 0.5) + 1, 2))]

print(primes(30)) 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2021-05-09T18:24:04.573

我的代码是（对于范围（2,50）中的数字）：

```
import operator

[len(x) for x in list(map(lambda x: [operator.mod(len(range(1,x)), z) for z in range(1,x)], [item for item in range(2,50)])) if x.count(0) == 2] 
```*

# jira - JIRA rest api 4.4 的更新问题

> ID：10639871
> 
> 赞同：1
> 
> 时间：2012-05-17T16:41:59.657
> 
> 标签：jira

我正在尝试通过 JIRA rest api 更新问题的 fixVersion。JIRA 版本是 4.4.3#663-r165197。它是由 codehaus 托管的实例，不确定这是否有所作为。

请求如下所示：

```
  curl -u [用户名]:[密码] -X PUT -H 'Content-type: application/json' \
    -d“http://jira.codehaus.org/rest/api/latest/issue/GEOS-[id]”

```

```
{
   “更新”：{
      “修复版本”：[
         {
            “放”：[
               {
                  “名称”：“2.2-beta3”
               }
            ]
         }
      ]
   }
}

```

但我得到一个 405，方法不允许错误。如果我查看该版本 [1] 的其余 api 文档，这是有道理的。他们似乎表明没有办法以这种方式更新问题。但是，如果我查看最新版本 [2] 的文档，他们似乎表明这是可能的。

所以我想问题是如何在 JIRA 4.4 中以这种方式更新问题？还是不可能？

谢谢！

[1] [https://developer.atlassian.com/static/rest/jira/4.4.1.html#id151460](https://developer.atlassian.com/static/rest/jira/4.4.1.html#id151460)

[2] [http://docs.atlassian.com/jira/REST/latest/#id165544](http://docs.atlassian.com/jira/REST/latest/#id165544)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T18:06:40.403

对于 4.4，您必须使用 SOAP updateIssue 方法。5.0 修复了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-22T14:02:47.250

```
Prepare Json data as below(Here java as technology i had used), and pass using put method/API.

public static String generateJson(String customFieldId, Object value,
        String attribute) {

    if (isBlankOrNull(attribute)) {
        return "\"" + customFieldId + "\":" + "\"" + value + "\"";
    } else {
        return "\"" + customFieldId + "\":{\"" + attribute + "\":\"" + ""
                + value + "\"}";
    }
}

    public static int invokePutMethod(String auth, String url, String data) {

            int statusCode = 0;
            try {
                Client client = Client.create();
                WebResource webResource = client.resource(url);
                ClientResponse response = webResource
                        .header("Authorization", "Basic " + auth)
                        .type("application/json").accept("application/json")
                        .put(ClientResponse.class, data);
                statusCode = response.getStatus();
                return statusCode;
            } catch (Exception e) {
                Constants.ERROR.info(Level.INFO, e);
                // vjErrorLog.info(Level.INFO, e);
            }
            return statusCode;
        }

attribute could be key, id, name, value etc,

In case of fix version or components, you may have one more way to prepare json data

    return "\"" + customFieldId + "\":[{\"set\" :[{ \"" + attribute
                        + "\" :" + "\"" + data + "\"}]}]";

and invoke put method with above json data. 
```

# javascript - 重新加载页面；锚链接被忽略并且先前的滚动位置受到青睐？

> ID：10639874
> 
> 赞同：4
> 
> 时间：2012-05-17T16:42:05.480
> 
> 标签：javascript, html, google-chrome, browser

这让我感到困惑，我担心我可能会做一些非常愚蠢的事情。

我有一个执行 ajax 调用的表单，成功后，重新加载（相同）页面并使用 URL 哈希/片段跳转到页面底部的提交数据。

```
window.location.href = "/this/url/#post-10";
window.location.reload();

...

<div id="post-10">...</div> 
```

我注意到，至少对于 Chrome，之前的滚动位置比我提供的锚链接更受青睐 - 所以页面重新加载，成功跳转到我的`id`锚点，但是一旦页面完成加载，它就会跳转到滚动的位置在上一页。

这是标准行为吗？解决此问题的最佳方法是简单地强制页面位置使用`onLoad`或类似的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T16:44:01.503

`window.location.href = "/this/url/#post-10";`将自行工作，无需再次重新加载页面，这将（据我所知）有利于先前的滚动位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T17:17:05.890

如果您使用的是ajax，为什么要重新加载页面？

只需删除该行`window.location.reload();`

`window.location.href = "/this/url/#post-10";`足以将卷轴带到那`post-10`部分。

顺便说一句，更好（酷）的方法是使用滚动效果。

```
var targetOffset = $('#post-10').offset().top ;
var scrollElem = scrollableElement('html', 'body');

$(scrollElem).animate({scrollTop: targetOffset}, 400, function() {
    // scroll is complete
      location.hash = 'post-10';
});

   // Use the first element that is "scrollable"  (cross-browser fix?)
function scrollableElement(els) {
    for (var i = 0, argLength = arguments.length; i <argLength; i++) {
        var el = arguments[i],
        $scrollElement = $(el);
        if ($scrollElement.scrollTop()> 0) {
            return el;
        } else {
            $scrollElement.scrollTop(1);
            var isScrollable = $scrollElement.scrollTop()> 0;
            $scrollElement.scrollTop(0);
            if (isScrollable) {
                return el;
            }
        }
    }
    return [];
} 
```

# c++ - 类中对象构造函数/初始化失败

> ID：10639885
> 
> 赞同：0
> 
> 时间：2012-05-17T16:42:59.880
> 
> 标签：c++, object, constructor

我对 C++ 术语很陌生，所以希望我的标题不会太离谱。但我 100% 确定有人会告诉我 ;)

我有这段代码：

```
struct B {
  struct A {
    A() : a(0) { }
    A(int a) { this->a = a; }
    int a;
  }
    a0,    // OK
    a1(1); // NOT OK!

  B() : b(0) { }
  B(int b) { this->b = b; }
  int b;
}
  b0,    // OK
  b1(1); // OK 
```

但是 gcc 无法编译并生成以下输出：

```
8:8: error: expected identifier before numeric constant
8:8: error: expected ‘,’ or ‘...’ before numeric constant
2:3: error: new types may not be defined in a return type
2:3: note: (perhaps a semicolon is missing after the definition of ‘B::A’) 
```

如果我删除 'a1(1)' 对象或将其更改为 'a1' 然后它编译没有问题。但是我不能使用'A（int a）'构造函数。类似的？对象“b1”的构造函数没有问题。对此有何解释？谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T16:45:46.987

您不匹配对象和实例。在类 B 的定义中不能有一个预先构造的对象（A 的实例），除非它是静态 const，但是你仍然不能在类声明中初始化它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T16:46:13.070

您不允许在类/结构定义中初始化成员变量（例外：`static const`整数（例如`int`，，`short`）`bool`成员）

在 and 的情况下`b0`，`b1`您声明（和初始化）两个全局变量，而不是成员变量

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T16:47:36.210

`a0`并且`a1`是外部结构的成员，就像普通属性一样，您不能内联初始化它们。您需要在构造函数初始化器列表`a0`中进行初始化。`a1``B`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-17T16:49:21.103

如果您要求正确的语法..，

```
struct B {
    struct A {
        int a;

        A()      : a(0) { }
        A(int a) : a(a) { }
    } a0, a1;

    int b;

    B()      : a0(), a1(1), b(0) { }
    B(int b) : a0(), a1(1), b(b) { }
} b0, b1(1); 
```

# objective-c - 为什么我不需要在标题中声明 UIAlertViewDelegate？

> ID：10639886
> 
> 赞同：4
> 
> 时间：2012-05-17T16:43:01.480
> 
> 标签：objective-c, ios, delegates, protocols

我以为我终于设法理解了委托的概念，直到发生以下情况：我更改了头文件以删除对委托的引用，并且警报仍然有效。唯一的区别是我失去了代码提示。

```
//.h
#import <UIKit/UIKit.h>
//@interface ViewController : UIViewController <UIAlertViewDelegate> 
@interface ViewController : UIViewController 
- (IBAction)showMessage:(id)sender;
@end

//.m
#import "ViewController.h"
@implementation ViewController
- (IBAction)showMessage:(id)sender {
    UIAlertView *message = [[UIAlertView alloc] initWithTitle:@"Hello World!" 
                                                      message:@"Message." 
                                                     delegate:self 
                                            cancelButtonTitle:@"Cancel" 
                                            otherButtonTitles:@"Button 1", @"Button 2", nil];
    [message show];
}

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    NSString *title = [alertView buttonTitleAtIndex:buttonIndex];

    if([title isEqualToString:@"Button 1"])
    {
        NSLog(@"Button 1 was selected.");
    }   
}
@end 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-17T16:49:46.090

标`<UIAlertViewDelegate>`头中的 只是向编译器表明您打算在类中实现委托方法。如果您不实现标记为@required 的委托方法，您将收到警告，但由于大多数委托方法通常是@optional，您的代码将编译并运行良好。这并不意味着您不应该在标题中添加代表。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-17T17:33:54.427

虽然您已经接受了答案，但这个问题比那里解决的要多。

`UIAlertViewDelegate`是一个实现**委托设计模式的****协议**。您可能需要也可能不需要通过采用它来正式通知运行时您符合任何给定协议（特别是如果它没有任何必需的方法），但这取决于声明该协议的类的设计。通过在声明类时将协议名称放在 <> 中，您可以在类中采用协议，如下所示：

 **```
@interface MyClass : NSObject <delegateProtocolName> 
```

由于许多委托的协议方法是可选方法，因此他们经常测试采用类是否实现了这样的特定方法：

```
if ([self.delegate respondsToSelector:@selector(delegatedMethod:)]) {
    // Do something
} 
```

在这种情况下，您不需要遵守头文件中的协议，因为它正在测试是否已实现特定的委托方法。

但是，测试可以这样编写（特别是如果您需要在同一个函数中引用多个必需的方法/属性）：

```
if ([self.delegate conformsToProtocol:@protocol(delegateProtocolName)]) {
    // Do something
} 
```

在这种情况下，您必须符合头文件中的协议，否则将无法通过测试。

引用文档`conformsToProtocol`（取自[The Objective-C Programming Language](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProtocols.html)和我添加的重点）：

> **此方法仅根据头文件中的正式声明来确定一致性**，如上所示。它不检查协议中声明的方法是否实际实现——这是程序员的责任。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-17T17:03:11.823

答案是苹果不想要求一个类来实现 UIAlertViewDelegate 协议。如果 Apple 希望**要求**这样做，它会将 UIAlertView 的委托属性设置为 type `id<UIAlertViewDelegate>`。如果您查看文档，则不是。

[UIAlertView 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIAlertView_Class/UIAlertView/UIAlertView.html)

> `@property(nonatomic, assign) id delegate`

他们一定有他们不成功的理由`@property(nonatomic, assign) id<UIAlertViewDelegate> delegate`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-18T06:57:01.523

您在类中提到的**<UIAlertViewDelegate>**意味着**您正在此类中实现 AlertView 委托的方法，即 ViewController**和**delegate:self**表示该对象的委托方法是在当前类中定义的。

如果要在任何其他类中定义 AlertView 委托的方法，则必须在该类中提及 <UIAlertViewDelegate> 并在该特定类中实现方法。

而且您还必须更改委托：（类名）。**

# asp.net - 带有 DIM 语句的隐含数据类型 - 从 .net 2.0 到 3.5 的重大变化

> ID：10639888
> 
> 赞同：0
> 
> 时间：2012-05-17T16:43:04.100
> 
> 标签：asp.net, vb.net, .net-3.5

我正在将 asp.net 应用程序从 .NET 2.0 转换为 .NET 3.5

我有很多像这样的内联代码：

```
 Dim Total = 0

     for each dr as DataRow in dt.Rows
             Total = Total + dr("SumOfAmount")
next
     Response.Write(FormatCurrency(Total,2)) 
```

请注意，总变量没有显式类型声明。

此代码在 .NET 2.0 下运行良好

在 .NET 3.5 下，Total 变量被定义为一个整数，因此每次通过时，总数都会四舍五入到最接近的美元。

我知道一种解决方案就是改变

```
 Dim Total = 0 
```

将 Dim Total 作为小数 = 0 或 Dim Total = 0D

但是，我宁愿不必访问系统中的每个页面来查找此问题。

是否有任何站点范围或页面范围的选项，我可以将此行为更改回 .NET 2.0 下的方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T17:13:47.687

我怀疑您会出现这种行为，因为[Option Infer](http://msdn.microsoft.com/en-us/library/bb384665%28v=vs.90%29.aspx)设置为 On。将其设置为关闭将保留旧行为。

您可以在项目属性页面中更改此设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T17:21:50.303

可能您可以确保 Option Strict 和 Option Explicit 都设置为关闭，但这是*一个糟糕的编码实践*！

显式类型的小数将比变体类型执行得更好。

希望 VB.Net 3.5 已经取消了允许隐式转换。显然它们仍然允许隐式键入，但是如果确保所有选项都关闭并不能这样做，那么唯一的另一种可能性是 Dim Total = 0.0 可能会起作用，这仍然让您在应用程序中寻找每个实例。

如果关闭所有选项*确实*有效，那么如果您打开 Option Explicit 和 Option Strict On 并修复代码，您最终会得到更健壮、性能更好的代码。

# load - 点击加载jw播放器

> ID：10639889
> 
> 赞同：0
> 
> 时间：2012-05-17T16:43:05.420
> 
> 标签：load, onclick, jwplayer

我正在尝试执行以下操作：

加载没有播放器的页面。当用户单击某个元素（即链接）时，播放器应加载到预定的 div 中。

这是我到目前为止没有太多运气的代码：

```
<div class="player-audio">
    <div id='mediaplayer2'></div>

    <a href="#" id="btn_audios">view audios player</a>
</div>

<script type="text/javascript">
$(document).ready(function() {
    $("#btn_audios").click(function() {
        jwplayer('mediaplayer2').setup({
            'flashplayer': 'jwplayer/player.swf',
            'id': 'playerID2',
            'width': '400',
            'height': '240',
            'playlistfile': 'audios.xml',
            'playlist.position': 'bottom',
            'playlist.size': '216',
            'controlbar': 'top',
            'skin': 'jwplayer/skins/yellow-player/yellow-player.zip'
          });
    });
});
</script> 
```

这个想法是当用户点击“查看音频播放器”链接时，播放器加载到“mediaplayer2”div中。如果我以通常的方式（当页面加载时）加载播放器，同样的代码可以完美地工作。

有可能我正在尝试吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T15:04:36.917

你很接近。设置功能后唯一需要添加的是：

```
jwplayer('mediaplayer2').load(); 
```

所以这使得：

```
<script type="text/javascript">
$(document).ready(function() {
    $("#btn_audios").click(function() {
        jwplayer('mediaplayer2').setup({
            'flashplayer': 'jwplayer/player.swf',
            'id': 'playerID2',
            'width': '400',
            'height': '240',
            'playlistfile': 'audios.xml',
            'playlist.position': 'bottom',
            'playlist.size': '216',
            'controlbar': 'top',
            'skin': 'jwplayer/skins/yellow-player/yellow-player.zip'
          });
          jwplayer('mediaplayer2').load();
    });
});
</script> 
```

# c# - 列表框未在 Firefox 中保持填充

> ID：10639890
> 
> 赞同：1
> 
> 时间：2012-05-17T16:43:13.150
> 
> 标签：c#, asp.net, firefox

Firefox 目前给我带来了一些问题，我无法弄清楚。

我有两个列表框，一个在页面加载时填充，另一个在选择第一个项目时填充，然后单击查看按钮。我遇到的问题是第二个列表框仅填充一瞬间，然后所有内容都被删除。该功能适用​​于我测试过的所有其他浏览器.. IE、Chrome 和 Safari..

```
using System;
using System.Collections;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.Security;
using System.Data;
using System.Data.SqlClient;
using DAL;

namespace ACESAdmin2.AcesSetup
{
public partial class storefront : System.Web.UI.Page
{
    private string selectedCustomer
    {
        get { return Session["selectedCustomer"] != null ? (string)Session["selectedCustomer"] : string.Empty; }
        set { Session["selectedCustomer"] = value; }
    }
    private string selectedCatalog
    {
        get { return Session["selectedCatalog"] != null ? (string)Session["selectedCatalog"] : string.Empty; }
        set { Session["selectedCatalog"] = value; }
    }

    protected void Page_Load(object sender, EventArgs e)
    {
            if (!IsPostBack)
        {
            LoadPage();
        }
    }

    private void LoadPage()
    {

        initControls();

        #region role setting
        try
        {
            //check user role to determine editing rights
            string usersRole = Roles.GetRolesForUser(Membership.GetUser().UserName)[0];
            MembershipUser user = Membership.GetUser();
            switch (usersRole)
            {
                case "BasicUser":
                    AlignTextNoneRadio.Enabled = false;
                    AlignTextLeftRadio.Enabled = false;
                    AlignRightRadio.Enabled = false;
                    AlignCenterRadio.Enabled = false;
                    headerText.Enabled = false;
                    returnPolicy.Enabled = false;
                    welcomeMessageTextBox.Enabled = false;
                    homeText.Enabled = false;
                    homeLink.Enabled = false;
                    updateStoreButton.Enabled = false;
                    break;

                case "Customer":
                    homeLink.Enabled = false;
                    homeText.Enabled = false;
                    break;

                case "SalesRep":
                case "Admin":
                case "SuperAdmin":
                    break;
                default:
                    break;
            }
        }

        catch (NullReferenceException error)
        {
            string message;
            message = error.ToString();
            Response.Redirect("../error.aspx");
        }
        #endregion

        #region Accordion Pane Settings

        if (ViewState["SelectedAccordionIndex"] == null)
        {
            MyAccordion.SelectedIndex = -1;
        }
        else
        {
            MyAccordion.SelectedIndex = (int)ViewState["SelectedAccordionIndex"];
        }
        #endregion
    }
    private void initControls()
    {
        //Viewable to all
        #region customer label
        if (selectedCustomer != null)
        {
            string customerName = DAL.Util.getCustomerName().ToString();
            if (customerName != null || customerName != String.Empty)
            {
                lblCustomer.Text = "Customer: <font color=maroon>" + customerName + "</font>";
                lblCustomer.Visible = true;
            }
            else
            {
                lblCustomer.Text = "Customer: <font color=maroon>" + selectedCustomer.ToString() + "</font>";
                lblCustomer.Visible = true;
            }
        }
        #endregion

        //Edit Store Front
        #region Populate Fields

        #region headerAlign

        string headerAlign = DAL.Util.getHeaderAlign().ToString();
        switch (headerAlign)
        {
            case "left":
                AlignTextLeftRadio.Checked = true;
                break;
            case "center":
                AlignCenterRadio.Checked = true;
                break;
            case "right":
                AlignRightRadio.Checked = true;
                break;
            default:
                AlignTextNoneRadio.Checked = true;
                break;
        }
        #endregion

        welcomeMessageTextBox.Text = DAL.Util.getWelcome().ToString();
        headerText.Text = DAL.Util.getHeaderText().ToString();
        returnPolicy.Text = DAL.Util.getReturn().ToString();
        homeLink.Text = DAL.Util.getHomeLink().ToString();
        homeText.Text = DAL.Util.getHomeText().ToString();
        #endregion

        //BJIT Setup
        #region popultae fields
        ddlSelectVendor.DataSource = DAL.Util.getVendors();
        ddlSelectVendor.DataBind();
        listCatalogs.DataSource = DAL.Util.getCatalogs();
        listCatalogs.DataBind();
        #endregion

    }

    protected void returnButton_Click(object sender, EventArgs e)
    {
        //Takes user back to main admin page
        Response.Redirect("../Admin/mainAdmin.aspx");
    }

    protected void dropdownlist_SelectedInexChange(object sender, EventArgs e)
    {
        ViewState["SelectedAccordionIndex"] = MyAccordion.SelectedIndex;
    }

    protected void updateStoreButton_Click(object sender, EventArgs e)
    {
        switch(MyAccordion.SelectedIndex)
        {
            case 0:
            #region Header Value
            string selectedHeaderAlign = null;
            foreach (Control control in this.RadioPanel.Controls)
            {
                if (control is RadioButton)
                {
                    RadioButton radio = control as RadioButton;
                    if (radio.Checked)
                    {
                        selectedHeaderAlign = radio.Text.ToLower();
                    }
                }
            }
            #endregion
            //updates customer information in the table
            string sqlSf = "Update Store SET HeaderAlign = @HeaderAlign, HeaderText=@HeaderText, ReturnPolicy=@ReturnPolicy, WelcomeMessage=@WelcomeMessage, HomeTextLink=@HomeTextLink, HomeLink=@HomeLink"
                + " WHERE CustomerID='" + HttpContext.Current.Session["selectedCustomer"].ToString() + "'";
            //setting parameters
            #region Parameter Values
            AdoUtil.ACESSQLParameterCollection parameters = new AdoUtil.ACESSQLParameterCollection();
            AdoUtil.ACESSQLParameter param = new AdoUtil.ACESSQLParameter();

            param.ParamName = "@HeaderAlign";
            param.ParamValue = selectedHeaderAlign.ToString();
            param.ParamDBType = SqlDbType.VarChar;
            parameters.Add(param);

            param = new AdoUtil.ACESSQLParameter();
            param.ParamName = "@HeaderText";
            param.ParamValue = headerText.Text.ToString();
            param.ParamDBType = SqlDbType.VarChar;
            parameters.Add(param);

            param = new AdoUtil.ACESSQLParameter();
            param.ParamName = "@ReturnPolicy";
            param.ParamValue = returnPolicy.Text.ToString();
            param.ParamDBType = SqlDbType.VarChar;
            parameters.Add(param);

            param = new AdoUtil.ACESSQLParameter();
            param.ParamName = "@WelcomeMessage";
            param.ParamValue = welcomeMessageTextBox.Text.ToString();
            param.ParamDBType = SqlDbType.VarChar;
            parameters.Add(param);

            param = new AdoUtil.ACESSQLParameter();
            param.ParamName = "@HomeTextLink";
            param.ParamValue = homeText.Text.ToString();
            param.ParamDBType = SqlDbType.VarChar;
            parameters.Add(param);

            param = new AdoUtil.ACESSQLParameter();
            param.ParamName = "@HomeLink";
            param.ParamValue = homeLink.Text.ToString();
            param.ParamDBType = SqlDbType.VarChar;
            parameters.Add(param);
            #endregion
            AdoUtil.ExecuteNonQuery(sqlSf, parameters);
            break;
            case 1:
                //BJIT Updates
            string sqlBJIT = "Update";
            break;

            default:
            break;

        }
        MyAccordion.SelectedIndex = -1;
    }

    #region BJIT Control Events
    //BJIT Button
    protected void btnAddCustomer_Click(object sender, EventArgs e)
    {
        if (listItems.SelectedIndex != -1)
        {
            ArrayList removeArr = new ArrayList();

            listItemProfiles.SelectedIndex = -1;

            //Copy selected items to listItemProfiles
            foreach (ListItem li in listItems.Items)
            {
                if (li.Selected)
                {
                    listItemProfiles.Items.Add(li);
                    removeArr.Add(li);
                }
            }

            //Remove the selected items from listItems
            foreach (ListItem li in removeArr)
            {
                listItems.Items.Remove(li);
            }
            Util.WebFunctions.SortListBox(listItemProfiles);
        }
    }

    //BJIT Button
    protected void btnRemoveCustomer_Click(object sender, EventArgs e)
    {
        if (listItemProfiles.SelectedIndex != -1)
        {
            ArrayList removeArr = new ArrayList();
            listItems.SelectedIndex = -1;

            //Copy selected items to listItems
            foreach (ListItem li in listItemProfiles.Items)
            {
                if (li.Selected)
                {
                    li.Selected = false;
                    listItems.Items.Add(li);
                    removeArr.Add(li);
                }
            }

            //Remove the selected items from listItemProfiles
            foreach (ListItem li in removeArr)
            {
                listItemProfiles.Items.Remove(li);
            }
            Util.WebFunctions.SortListBox(listItems);
        }
    }

    //BJIT Button
    protected void viewBtn_Click(object sender, EventArgs e)
    {
        if (listCatalogs.SelectedItem != null)
        {
            listItemCatalogs.DataSource = DAL.Util.getCatalogProfile(listCatalogs.SelectedValue.ToString());
            listItemCatalogs.DataBind();                
        }
    }

    //BJIT Button
    protected void editBtn_Click(object sender, EventArgs e)
    {
        if (listCatalogs.SelectedItem != null)
        {
            #region controls visible
            lblVendor.Visible = true;
            ddlSelectVendor.Visible = true;
            lblItemProfile.Visible = true;
            lblItems.Visible = true;
            listItems.Visible = true;
            listItemProfiles.Visible = true;
            btnAddCustomer.Visible = true;
            btnRemoveCustomer.Visible = true;

            lblItemsCatalog.Visible = false;
            listItemCatalogs.Visible = false;
            //listItemCatalogs.Items.Clear();
            #endregion

            #region disable controls
            //listCatalogs.Enabled = false;
            listItemCatalogs.Enabled = false;
            editBtn.Enabled = false;
            viewBtn.Enabled = false;
            #endregion

            listItemProfiles.DataSource = DAL.Util.getCatalogProfile(listCatalogs.SelectedValue.ToString());
            listItemProfiles.DataBind();

        }
    }

    //BJIT Drop Down List
    protected void ddlSelectVendor_Changed(object sender, EventArgs e)
    {
        listItems.DataSource = DAL.Util.getVenorItems(ddlSelectVendor.SelectedItem.ToString());
        listItems.DataBind();
    }
    #endregion
  }
} 
```

有了这个，还有一些以前没有描述过的功能，并且在这个 Firefox 中，当 editBtn_Click 启动时，它也不会保留数据/保持控件可见。

再说一次，如果有什么我可以澄清的，我会尽力改写或任何事情。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T20:46:35.327

我不完全知道发生了什么，但它现在正在工作。我重建了 .cs 页面并重新编译了整个站点，一切正常。还清除了所有浏览器的缓存..

# jquery-mobile - 更改 jQuery Mobile 可折叠集上的图标

> ID：10639892
> 
> 赞同：3
> 
> 时间：2012-05-17T16:43:18.380
> 
> 标签：jquery-mobile

我是第一次使用 jQuery Mobile，但在完成对[可折叠集 (accordion)](http://jquerymobile.com/test/docs/content/content-collapsible-set.html)上的图标进行简单更改时遇到了麻烦。

我想将可折叠集上每个标题的图标更改为展开状态的向上箭头和折叠状态的向下箭头。

我创建[了一个 Fiddle](http://jsfiddle.net/HvMNL/8/)，它的代码似乎与我几乎直接从 jQuery 移动网站复制并稍作修改的代码有相同的问题。

对此的任何帮助或指示将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T07:33:53.143

您引用的文档页面实际上使用了最新的Work in Progress版本的jquery mobile。所以这是我们可以在未来版本的JQM中期待的功能。在当前的稳定版本中，我们将无法通过指定的方式更改图标一个数据属性。

这是一个例子：它使用了 jqm 的 Work in Progress 版本 - [http://jsfiddle.net/AAYjF/](http://jsfiddle.net/AAYjF/)

但建议使用稳定版。因此您可以使用以下代码来实现这一点：

```
<!DOCTYPE html>
<html>
    <head>
    <title>My Page</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>
    <style>
        .ui-collapsible .ui-icon{
            background-position: -180px 50%;/*Position of up icon in icon sprite*/
        }

        .ui-collapsible-collapsed .ui-icon{
            background-position: -216px 50%;/*Position of down icon in icon sprite*/
        }

    </style>
</head>
<body>

<div data-role="page">

    <div data-role="header">
        <h1>My Title</h1>
    </div><!-- /header -->

    <div data-role="content">    
        <div data-role="collapsible-set">

    <div data-role="collapsible">
    <h3>Section 1</h3>
    <p>I'm the collapsible set content for section B.</p>
    </div>

    <div data-role="collapsible" >
    <h3>Section 2</h3>
    <p>I'm the collapsible set content for section B.</p>
    </div>

</div>
    </div><!-- /content -->

</div><!-- /page -->

</body>
</html> 
```

逻辑是使用图标精灵中向下和向上图标的背景位置用于折叠和展开的图标

演示：http: [//jsfiddle.net/6x8ew/](http://jsfiddle.net/6x8ew/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-17T23:41:23.470

我确信您可以改进此解决方案，但这里有一个基本想法，即在不侵入 JQM 源代码的情况下实现此目的的一种方法。

```
$(document).on('pageinit',function(){

    $('.ui-collapsible .ui-icon').removeClass('ui-icon-plus').addClass('ui-icon-arrow-u');

    $('[data-role=collapsible]')
        .on('expand',function(){ 
            $(this).find('.ui-icon').removeClass('ui-icon-arrow-u').addClass('ui-icon-arrow-d');               
        })
        .on('collapse',function(){
            $(this).find('.ui-icon').removeClass('ui-icon-arrow-d').addClass('ui-icon-arrow-u');
        });        
});​ 
```

我正在使用 jqm 的可折叠事件来切换到相应的图标。

请参阅我的[工作示例](http://jsfiddle.net/codaniel/FN5Ve/3/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-03T08:49:55.860

使用 jquery mobile version 1.4.0，您可以通过在 CSS 文件中包含以下代码来完成此操作

对于自定义右箭头

```
.ui-icon-arrow-r:after {
  background: url("Path to your image file") no-repeat scroll 0px 0px transparent; 
```

}

对于自定义向下箭头

```
.ui-icon-arrow-d:after {
  background: url("Path to your image file") no-repeat scroll 0px 0px transparent; 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T17:21:07.510

我还没有对 jQuery Mobile 做太多事情，所以请尽情享受它的价值。

我认为您需要将属性放在 上`<div data-role="collapsible-set">`，而不是每个上`data-role="collapsible"`。显然，这只适用于所有孩子，它不会让你针对个别孩子。

# android - 对 AsyncTask 中的错误感到困惑

> ID：10639894
> 
> 赞同：0
> 
> 时间：2012-05-17T16:43:26.083
> 
> 标签：android, android-asynctask

我正在计算一些需要一些时间的东西。为此，我创建了一个子类 AsyncTask 的内部类：

```
private class AsyncAllPlayAll extends AsyncTask<String, Void, CharSequence> 
{
    StournamentDbAdapter mDbHelper;

    public AsyncAllPlayAll(Context context, StournamentDbAdapter dbHelper)
    {
        this.mContext = context;
        this.mDbHelper = dbHelper;
    }

    @Override
    protected CharSequence doInBackground(String... tournamentRowIds) 
    {
        Long tournamentRowId = Long.valueOf(tournamentRowIds[0]);

        Tournament tournament = new Tournament(mDbHelper, tournamentRowId);
        tournament.setupTournament();               

        Boolean tournamentHasWinner = mDbHelper.winningTournamentParticipantsExists(tournamentRowId);

        // tournament already run: delete score
        if(tournamentHasWinner)
        {
            mDbHelper.resetTournamentsStocksScore(tournamentRowId);

            mDbHelper.resetTournamentWinnerStockId(tournamentRowId);
        }

        //run tournament!
        tournament.allPlayAll();                

        TournamentParticipant tournamentParticipant = mDbHelper.insertWinningParticipant(tournamentRowId);                      

        populateCompetitorsListView();      

        final CharSequence winner = "Winner is: " + tournamentParticipant.getStock().getName() + "(" + tournamentParticipant.getScore() + ")";

        return winner;
    }

    @Override                               //the winner
    protected void onPostExecute(final CharSequence result) {

        super.onPostExecute(result);    

        final int duration = Toast.LENGTH_LONG;

        TournamentEdit.this.runOnUiThread(new Runnable() {
            public void run() {
                Toast.makeText(mContext, "Hello", duration).show();
            }
        });

    }

} 
```

但我得到一个错误，我不明白：“**无法在未调用 Looper.prepare() 的线程内创建处理程序**”

我在 stackoverflow 上阅读了几个线程，但实现其中所写的内容并没有改变我的情况。

我确信错误来自我在 onPostExecute 中运行的 Toast，但这不是问题。错误从尝试初始化锦标赛开始。

```
Tournament tournament = new Tournament(mDbHelper, tournamentRowId); 
```

这是我的堆栈：

```
Thread [<11> AsyncTask #1] (Suspended)  
    FragmentManagerImpl$1.<init>(FragmentManagerImpl) line: 423 
    FragmentManagerImpl.<init>() line: 423  
    Tournament(Activity).<init>() line: 702 
    Tournament.<init>(StournamentDbAdapter, Long) line: 48  
    TournamentEdit$AsyncAllPlayAll.doInBackground(String...) line: 346  
    TournamentEdit$AsyncAllPlayAll.doInBackground(Object...) line: 1    
    AsyncTask$2.call() line: 264    
    FutureTask$Sync.innerRun() line: 305    
    AsyncTask$3(FutureTask).run() line: 137 
    AsyncTask$SerialExecutor$1.run() line: 208  
    ThreadPoolExecutor.runWorker(ThreadPoolExecutor$Worker) line: 1076  
    ThreadPoolExecutor$Worker.run() line: 569   
    Thread.run() line: 856 
```

我想这可能是数据库线程的一些问题？当我将它从主线程传递给 AsyncAllPlayAll 时。

所以我尝试在内部类（不同的实例）中打开数据库线程并将其构造函数更改为：

```
 public AsyncAllPlayAll(Context context, StournamentDbAdapter dbHelper)
    {
        this.mContext = context;
        this.mDbHelper = dbHelper;
        mDbHelper  = new StournamentDbAdapter(context);
        mDbHelper.open();
    } 
```

这也没有帮助:(

现在我尝试添加一个 Looper（如[AsyncTask 和 Looper.prepare() error](https://stackoverflow.com/questions/4187960/asynctask-and-looper-prepare-error)中所建议的）

```
 @Override
    protected CharSequence doInBackground(String... tournamentRowIds) 
    {
        Looper.prepare(); 
        Long tournamentRowId = Long.valueOf(tournamentRowIds[0]);

        Tournament tournament = new Tournament(mDbHelper, tournamentRowId);
        tournament.setupTournament();               

        Boolean tournamentHasWinner = mDbHelper.winningTournamentParticipantsExists(tournamentRowId);

        // tournament already run: delete score
        if(tournamentHasWinner)
        {
            mDbHelper.resetTournamentsStocksScore(tournamentRowId);

            mDbHelper.resetTournamentWinnerStockId(tournamentRowId);
        }

        //run tournament!
        tournament.allPlayAll();                

        TournamentParticipant tournamentParticipant = mDbHelper.insertWinningParticipant(tournamentRowId);                      

        populateCompetitorsListView();      

        final CharSequence winner = "Winner is: " + tournamentParticipant.getStock().getName() + "(" + tournamentParticipant.getScore() + ")";

        Looper.loop();

        return winner;
    } 
```

代码更进一步，但我收到以下错误：

引起：android.view.ViewRootImpl$CalledFromWrongThreadException：只有创建视图层次结构的原始线程才能触摸它的视图。

现在 populateCompetitorsListView() 导致崩溃，原因也很清楚：查看 populateCompetitorsListView() 的最后一行，即

```
setListAdapter(tournamentStocks); 
```

正在尝试更改主线程。我把它移到主类，这似乎已经修复了它：计算运行。

```
@SuppressWarnings("deprecation")
private void populateCompetitorsListView()
{
    // Get all of the notes from the database and create the item list
    Cursor tournamentStocksCursor = mDbHelper.retrieveTrounamentStocks(mTournamentRowId);
    startManagingCursor(tournamentStocksCursor);

    // Create an array to specify the fields we want to display in the list (only name)
    String[] from = new String[] {StournamentConstants.TblStocks.COLUMN_NAME, StournamentConstants.TblTournamentsStocks.TBL_COLUMN_TOURNAMENTS_STOCKS_STOCK_SCORE};

    // and an array of the fields we want to bind those fields to (in this case just name)
    int[] to = new int[]{R.id.competitor_name, R.id.competitor_score};

    // Now create an array adapter and set it to display using our row
    SimpleCursorAdapter tournamentStocks = new SimpleCursorAdapter(this, R.layout.competitor_row, tournamentStocksCursor, from, to);

    //tournamentStocks.convertToString(tournamentStocksCursor);
    setListAdapter(tournamentStocks);       
} 
```

但现在的问题是，由于**Looper.loop();**的实现，我似乎被困在**doInBackground( ) 中。**这是猜测运行一个无限循环？

 **还有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T10:36:29.947

经过大量研究，我发现了我的问题：我在 doInBackground() 中使用了太多代码，在我取出大部分代码并将其放回我的 Activity 之后，我的 ListView 出现了奇怪的行为：有时它显示为空结果。有时它只显示一行（共 23 行）有结果，有时显示不同的行有结果。当我运行应用程序时 - 我大多没有或只有一行结果。当我使用调试器时 - 我得到了所有结果都很好！怎么来的？？？- 好吧 - 在第二个线程设法用结果更新数据库之前，我在主线程上更新我的 ListView 是错误的。所以主线程从数据库中抓取了空结果。我也摆脱了循环。

我的 Async 类现在看起来像这样：

```
private class AsyncAllPlayAll extends AsyncTask<String, Void, Long> 
{
    Tournament mTournament = null;

    public AsyncAllPlayAll(Tournament tournament)
    {
        this.mTournament = tournament;
    }

    @Override
    protected Long doInBackground(String... string) 
    {
        Long ml = null;
        //run tournament!
        mTournament.allPlayAll();

        return ml = (long) 0;
    }

    @Override
    protected void onPostExecute(Long result) 
    {
        TournamentEdit.this.runOnUiThread(new Runnable() {

            public void run() {
                // TODO Auto-generated method stub
                populateCompetitorsListView();
            }
        });
    }
} 
```

因为我现在使用 runOnUiThread() 在我的主线程上调用填充方法。我仍然需要更新我的 Toast 消息，但我明天会这样做:-)

感谢您阅读这个超长的传奇......**

# wcf - 使用 SSL 和证书为 WCF 设置配置文件

> ID：10639897
> 
> 赞同：1
> 
> 时间：2012-05-17T16:43:41.563
> 
> 标签：wcf, web-services, binding, ssl, wcf-binding

我正在尝试使用 SSL 在 IIS 7 中设置 WCF Web 服务，但我对配置文件有点迷茫。我希望从服务器到客户端的数据出现乱码（SSL 就足够了吗？）客户端还需要通过证书向服务器标识自己。

我有以下证书：

*   **dev.test.com** - 访问 URL [https://dev.test.com/TestService.svc](https://dev.test.com/TestService.svc)表明有这个有效的证书。
*   **TestServer** - 一个标识服务器的虚拟证书（我真的需要这个吗？或者我可以重用*dev.test.com*吗？也许有*server.test.com*？）
*   **TestClient** - 客户端的虚拟证书

这就是我的配置文件的设置方式：

**Web.config（服务器）：**

```
<bindings>
  <wsHttpBinding>
    <binding name="wsHttpEndpointBinding"
             messageEncoding="Mtom">
      <security mode="Message">
        <transport clientCredentialType="None" />
        <message clientCredentialType="Certificate" />
      </security>
    </binding>
  </wsHttpBinding>
</bindings>

<services>
  <service
    name="TestService"
    behaviorConfiguration="TestServiceBehavior">
    <endpoint
      name="TestEndPoint"
      address=""
      binding="wsHttpBinding"
      bindingConfiguration="wsHttpEndpointBinding"
      bindingNamespace="http://www.example.com/"
      contract="iWebService">
      <!--<identity>
        <dns value=""/>
      </identity>-->
    </endpoint>
    <endpoint address="mex" binding="mexHttpsBinding"  bindingConfiguration="" name="MexHttpsBindingEndpoint" contract="IMetadataExchange"/>
  </service>
</services>

<behaviors>
  <serviceBehaviors>
    <behavior name="TestServiceBehavior">
      <serviceMetadata httpGetEnabled="false" httpsGetEnabled="true" />
      <serviceCredentials>
        <clientCertificate>
          <authentication certificateValidationMode="PeerOrChainTrust" />
        </clientCertificate>
        <serviceCertificate findValue="TestServer" storeLocation="LocalMachine"
          storeName="My" x509FindType="FindBySubjectName" />
      </serviceCredentials>
    </behavior>
  </serviceBehaviors>
</behaviors>

<serviceHostingEnvironment multipleSiteBindingsEnabled="true" /> 
```

**App.config（客户端）：**

```
<bindings>
  <wsHttpBinding>
    <binding name="wsHttpBinding" bypassProxyOnLocal="false"
      transactionFlow="false" hostNameComparisonMode="StrongWildcard"
      messageEncoding="Mtom" textEncoding="utf-8" useDefaultWebProxy="true"
      allowCookies="false">
      <reliableSession ordered="true"
        enabled="false" />
      <security mode="Message">
        <transport clientCredentialType="None" proxyCredentialType="None"
          realm="" />
        <message clientCredentialType="Certificate" negotiateServiceCredential="true"
          algorithmSuite="Default" />
      </security>
    </binding>
    <binding name="TestEndPoint" bypassProxyOnLocal="false"
      transactionFlow="false" hostNameComparisonMode="StrongWildcard"
      messageEncoding="Mtom"
      textEncoding="utf-8" useDefaultWebProxy="true" allowCookies="false">
      <reliableSession ordered="true"
        enabled="false" />
      <security mode="Transport">
        <transport clientCredentialType="None" proxyCredentialType="None"
          realm="" />
        <message clientCredentialType="Certificate" negotiateServiceCredential="true" />
      </security>
    </binding>
  </wsHttpBinding>
</bindings>

<client>
  <endpoint address="https://dev.test.com/TestService.svc"
    behaviorConfiguration="TestServiceBehavior"
    binding="wsHttpBinding" bindingConfiguration="wsHttpBinding"
    contract="IContractName" name="wsHttpBinding">
    <identity>
      <dns value="TestServer" />
    </identity>
  </endpoint>
  <endpoint address="https://dev.test.com/DistributionCenterService.svc"
    binding="wsHttpBinding" bindingConfiguration="TestEndPoint" contract="IContract.Name"
    name="TestEndPoint" />
</client>

<behaviors>
  <endpointBehaviors>
    <behavior name="TestServiceBehavior">
      <clientCredentials>
        <clientCertificate findValue="TestClient"
                           storeName="My"
                           storeLocation="CurrentUser"
                           x509FindType="FindBySubjectName"/>
        <serviceCertificate>
          <authentication
            certificateValidationMode="PeerOrChainTrust"
            revocationMode="NoCheck"
            trustedStoreLocation="CurrentUser"/>
        </serviceCertificate>
      </clientCredentials>
    </behavior>
  </endpointBehaviors>
</behaviors> 
```

当我尝试访问[https://dev.test.com/TestService.svc](https://dev.test.com/TestService.svc)时，我得到
`Could not find a base address that matches scheme http for the endpoint with binding WSHttpBinding. Registered base address schemes are [https].`

无论如何，我真的迷失了我应该使用的配置设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T17:02:36.380

我相信您能够使用 https，您在客户端的 wsHttpBinding 上的安全模式需要是 Transport 或（可能在您的情况下）TransportWithMessageCredential。

# android - 播放嵌入的 YouTube 视频

> ID：10639901
> 
> 赞同：0
> 
> 时间：2012-05-17T16:43:48.430
> 
> 标签：android, webview, youtube

我有一个 WebView 应用程序，其中包含页面上嵌入的 YouTube 视频。但是当我转到那个页面时，它给了我一大堆文本的错误。过去一周我在互联网上搜索过，但没有运气。有人能帮帮我吗？PS我是Android新手，所以片段真的很有帮助:)

这是错误：

```
vp.events.addOnDOMLoadHandler(function()
{vp.website.createVideoPlayer('mediaPlayer_cff30e24_42e1_4eb6
'http://youtube.com/v/XXXX', 569, 485, false);});
You need Flash Player in order to view this. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T18:59:29.923

检查您手机上的 Adob​​e Flash Player 是否确实工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T23:19:57.083

来自CommonsWare

> 除了可能在具有 Flash 的设备上之外，您不能将它们显示为嵌入的。

这是链接：[https ://stackoverflow.com/a/2292459/1084764](https://stackoverflow.com/a/2292459/1084764)

但是你可以覆盖你的 urlLoading`webviewclient`

我建议您阅读整篇文章：[在 WebView 中播放 youtube 视频](https://stackoverflow.com/questions/2292086/play-youtube-video-in-webview)

# c# - 使用 C# 恢复 SQL 数据库

> ID：10639903
> 
> 赞同：2
> 
> 时间：2012-05-17T16:44:00.677
> 
> 标签：c#, sql, database-restore

我正在尝试使用 C# 代码恢复 sql 数据库。备份工作正常。但是当恢复数据库时，它给了我一个错误。我正在使用`Microsoft.SqlServer.Management.Smo;`这个操作。错误为{“System.Data.SqlClient.SqlError: RESTORE cannot process database 'TempDb' because it is in this session. 建议执行此操作时使用主数据库。”}

在几篇文章中，它说将数据库设置为主数据库。我也试过了。但它给了我同样的错误。连接字符串：connectionString = @"server=(local);初始目录=Master;Integrated Security=True;";

我的代码如下：

```
openFileDialog1.ShowDialog();
        string databaseName = "TempDb";
        Restore sqlRestore = new Restore();

        BackupDeviceItem deviceItem = new BackupDeviceItem(openFileDialog1.FileName, DeviceType.File);
        sqlRestore.Devices.Add(deviceItem);
        sqlRestore.Database = databaseName;

        DataConnection dataConnection = new DataConnection();
        ServerConnection connection = new ServerConnection(dataConnection.DataBaseConnection);
        Server sqlServer = new Server(connection);

        Database db = sqlServer.Databases[databaseName];
        sqlRestore.Action = RestoreActionType.Database;
        String dataFileLocation = db.FileGroups[0].Files[0].FileName;
        String logFileLocation = db.LogFiles[0].FileName;
        db = sqlServer.Databases[databaseName];
        RelocateFile rf = new RelocateFile(databaseName, dataFileLocation);

        sqlRestore.RelocateFiles.Add(new RelocateFile(databaseName, dataFileLocation));
        sqlRestore.RelocateFiles.Add(new RelocateFile(databaseName + "_log", logFileLocation));
        sqlRestore.ReplaceDatabase = true;
        sqlRestore.Complete += new ServerMessageEventHandler(sqlRestore_Complete);
        sqlRestore.PercentCompleteNotification = 10;
        sqlRestore.PercentComplete += new PercentCompleteEventHandler(sqlRestore_PercentComplete);
        sqlRestore.SqlRestore(sqlServer);
        db = sqlServer.Databases[databaseName];
        db.SetOnline();
        sqlServer.Refresh(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-28T13:00:20.237

```
this code For Restore Database,Please Type Code In C#:

SqlConnection ObjConnection=new SqlConnection("Your Connection String");
ObjConnection.Open();
                SqlCommand ObjCommand = new SqlCommand();
                ObjCommand.Connection = ObjConnection;
                ObjCommand.CommandText = "Use Master   ALTER DATABASE YourDatabaseName SET                 OFFLINE WITH ROLLBACK IMMEDIATE  " +
                "Restore Database YourDatabaseName From Disk='" + LblPath.Text + "'" +
                "   ALTER DATABASE YourDatabaseName SET ONLINE WITH ROLLBACK IMMEDIATE";
                ObjCommand.CommandType = CommandType.Text;
                ObjCommand.ExecuteNonQuery();
Help:LblPath.Text is a Label Control Contain Path Backup Database You!
Mojtaba From IRAN 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T07:54:18.120

看起来您的数据库仍在被其他登录名使用。尝试在恢复之前将其设置为单用户模式，它确实有帮助。确保使用相同的连接对象将数据库带入单用户模式，然后恢复，然后将其带回多用户模式。

你可以试试这个

```
SqlConnection connection = new SqlConnection("connection string");
SqlCommand cmd = new SqlCommand("ALTER DATABASE <database name> SET SINGLE_USER WITH ROLLBACK IMMEDIATE", connection);

cmd.Connection.Open();
cmd.ExecuteNonQuery();

return connection; //to use the same connection for restore activity and setting it to multi user mode again

//up on completion of restore activity, take the database to multi user mode.
//ALTER DATABASE <database name> SET MULTI_USER 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-17T06:36:17.120

此代码用于恢复数据库

```
var conString = System.Configuration.ConfigurationManager.ConnectionStrings["CONSTRING"];
string strConnString = conString.ConnectionString;
SqlConnection cs = new SqlConnection(strConnString);

        try
        {
            cs.Open();
            String sqlquery = "Use Master ALTER DATABASE databasename SET OFFLINE WITH ROLLBACK IMMEDIATE RESTORE DATABASE databasename FROM DISK ='" + txtRestoreFileLoc.Text + "' ALTER DATABASE databasename SET ONLINE WITH ROLLBACK IMMEDIATE";
            SqlCommand cmd = new SqlCommand(sqlquery, cs);
            cmd.ExecuteNonQuery();
            cs.Close();
            cs.Dispose();
            MessageBox.Show("restore complete");
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);

        } 
```

# ios - iOS设备在越狱时可以安全吗？

> ID：10639904
> 
> 赞同：0
> 
> 时间：2012-05-17T16:44:00.737
> 
> 标签：ios, security, encryption

在研究如何通过加密保护 iOS 设备（iPhone/iPad/iPodTouch）时，我遇到了许多文章，其中提到如果设备“越狱”，那么 iOS 设备的内置加密是必不可少的。通过越狱，可以绕过默认加密。

假设这是真的，是否有办法在保持越狱的同时启用 iOS 设备的加密功能？我确实使用了很多调整（SBSettings），我不想为了维护 iOS 上的安全而不得不放弃它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T17:02:06.733

越狱消除了对应用进行数字签名的要求。任何东西现在都会运行 - 所以是的，你需要小心你在那里加载的内容。

这不是加密问题。

# c# - 使网格中的单元格不可编辑

> ID：10639906
> 
> 赞同：0
> 
> 时间：2012-05-17T16:44:03.777
> 
> 标签：c#, winforms, syncfusion

在我的同步融合网格中，我必须根据类型使一些系列单元格不可编辑。如果类型是 'XXX' 则单元格是可编辑的，如果类型是 'YYY','ZZZ' 则单元格是不可编辑的

所以在这里；这就是我所做的。

```
 private void theGrid_CurrentCellChanging(object sender, System.ComponentModel.CancelEventArgs e)
    {
        fp_data_typ typ;
        int nSeries = theData.GetNumSeries();
        for (int i = 0; i < nSeries; i++)
        {
            typ = theData.CheckType(i);
            if (!(typ == 'XXX'))
            {

                e.Cancel = true;
            }
        }

    } 
```

我不确定是否应该使用 Grid_CurrentCellChanging 事件或 Grid_CurrentCellStartEditing。文档不是很清楚。给了我大量的事件来处理单元格编辑。

之前的代码以不正确的方式工作。如果网格具有可编辑和不可编辑系列的组合，则它不起作用。i:e 如果它同时具有 xxx)editable 和 'yyy'(non-editable)，它会使两者都不可编辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T06:28:23.297

以下事件将帮助您实现您的要求。

```
//Use this if you want to control the ReadOnly setting while loading itself
grid.QueryCellInfo += new GridQueryCellInfoEventHandler(grid_QueryCellInfo);

void grid_QueryCellInfo(object sender, GridQueryCellInfoEventArgs e)
{
    if (e.Style.CellValue.Equals("YYY"))
    {
        e.Style.ReadOnly = true;
    }
}

//Use this if you want to Validate while Editing
grid.CurrentCellValidating += new CurrentCellValidatingEventHandler(grid_CurrentCellValidating);

void grid_CurrentCellValidating(object sender, CurrentCellValidatingEventArgs e)
{
    //Will deactive the cell and new value will be discarded
    //e.NewValue = e.OldValue;

    //To remain in Edit mode without committing the vlaue
    e.Cancel = true;
} 
```

谢谢， 西瓦库玛

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T17:53:03.657

我能够获取当前单元格的列索引，并从那里将 e.cancel 设置为 true/false。我没有为整个网格设置一次 e.cancel，而是选择了正在编辑的单元格。

# javascript - 在这种情况下如何阻止 jQuery 函数多次执行？

> ID：10639910
> 
> 赞同：2
> 
> 时间：2012-05-17T16:44:19.700
> 
> 标签：javascript, jquery

我正在使用带有 .load 函数的 jQuery 来更新计数，但是如果按钮被单击得如此之快，它可能会被黑客入侵。我也不能使用 unbind ，因为这会使按钮在第一次单击后无法使用。

这是单击按钮时我使用的 jQuery。

```
<script type="text/javascript">
$(function() {

    // update "likes" of a post
    $(".bubble-like a").click(function() {
        var post_id = $(this).parent().parent().parent().attr('id');
        var number = post_id.replace(/[^0-9]/g, '');
        $(this).parent().parent().children('.bubble-count').children('span').fadeOut(200);
        $(this).parent().parent().children('.bubble-like').fadeOut(200);
        $("#result-likes").load('<?php bloginfo('template_directory'); ?>/ajax/add_post_like.php?post_id=' + number);
    });

    // remove my like from a post
    $(".bubble-unlike a").click(function() {
        var post_id = $(this).parent().parent().parent().attr('id');
        var number = post_id.replace(/[^0-9]/g, '');
        $(this).parent().parent().children('.bubble-count').children('span').fadeOut(200);
        $(this).parent().parent().children('.bubble-liked').fadeOut(200);
        $(this).parent().parent().children('.bubble-unlike').fadeOut(200);
        $("#result-likes").load('<?php bloginfo('template_directory'); ?>/ajax/remove_post_like.php?post_id=' + number);
    });

});
</script> 
```

如果我点击太快或反之亦然，加载会执行多次。我还解释了 unbind 没有帮助。

任何的想法？

**更新**

我不确定我这样做是否正确，但在我的情况下似乎可以解决它..任何人都可以纠正/让我错了吗？

我将此行添加到我的点击处理程序

```
// update "likes" of a post
$(".bubble-like a").click(function() {
    $(this).css({'display' : 'none'});
    var post_id = $(this).parent().parent().parent().attr('id');
    var number = post_id.replace(/[^0-9]/g, '');
    $(this).parent().parent().children('.bubble-count').children('span').fadeOut(200);
    $(this).parent().parent().children('.bubble-like').fadeOut(200);
    $("#result-likes").load('<?php bloginfo('template_directory'); ?>/ajax/add_post_like.php?post_id=' + number);
});

// remove my like from a post
$(".bubble-unlike a").click(function() {
    $(this).css({'display' : 'none'});
    var post_id = $(this).parent().parent().parent().attr('id');
    var number = post_id.replace(/[^0-9]/g, '');
    $(this).parent().parent().children('.bubble-count').children('span').fadeOut(200);
    $(this).parent().parent().children('.bubble-liked').fadeOut(200);
    $(this).parent().parent().children('.bubble-unlike').fadeOut(200);
    $("#result-likes").load('<?php bloginfo('template_directory'); ?>/ajax/remove_post_like.php?post_id=' + number);
}); 
```

我将此行添加到我加载的脚本 add_post_like 和 remove_post_like 中：

```
$('.bubble a').show(); 
```

现在它似乎只接受一次点击..这可靠吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T16:46:53.620

您可以在单击按钮时禁用按钮，并在单击其他按钮时启用，例如切换，例如，当单击喜欢时禁用它并启用不同，反之亦然。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T16:47:08.810

`one()`想到了这个功能。

[http://api.jquery.com/one/](http://api.jquery.com/one/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T16:50:10.197

每当单击按钮直到加载过程结束时，您都可以禁用单击事件。然后在回调函数中完成后激活事件。

血腥细节：[http ://api.jquery.com/load/](http://api.jquery.com/load/)

**更新：**

我为你做了一个简单的例子：http: [//jsfiddle.net/hvfc5/1/](http://jsfiddle.net/hvfc5/1/)

当您单击按钮时，它会首先删除按钮上的事件绑定，然后在加载图像后再次将其绑定回来。但是如果在此之后再次单击它，您会发现该事件仍然可以解除绑定，但它永远不会回来。这是因为图像已经加载，因此 load() 函数甚至不会被触发。

这只是一个演示示例，供您了解如何操作事物，您仍然需要根据需要自定义自己的版本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-17T16:46:30.600

是的：按钮单击的第一个动作是禁用按钮本身。这样一来，快速点击就不再可能了。当然，您必须在加载后重新启用该按钮。

**更新**

叹息......这都是关于*密码*的，对吧？

```
$(".bubble-like a").click(function() {
    $(".bubble-like a").attr('disabled', 'disabled');
    var post_id = $(this).parent().parent().parent().attr('id');
    var number = post_id.replace(/[^0-9]/g, '');
    $(this).parent().parent().children('.bubble-count').children('span').fadeOut(200);
    $(this).parent().parent().children('.bubble-like').fadeOut(200);
    $("#result-likes").load('<?php bloginfo('template_directory'); ?>/ajax/add_post_like.php?post_id=' + number, 
                            function(){
                              $(".bubble-like a").removeAttr('disabled');
                            });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T16:50:04.157

```
 $(".bubble-like a").click(function() {
  var button = $(this);
   $(this).wrap($('<button/>', {
                                "class" : "disButton",
                                 disabled: true,
                                 width: button.width()
                               }
                   )); // wrap the anchor with button with disabled property
  ...
  ..
  $("#result-likes").load('<?php bloginfo('template_directory'); ?>/ajax/add_post_like.php?post_id=' + number, function() {
    button.unwrap(); // remove the wrapping button
  });
}); 
```

您必须纠正一些 css 以使按钮看起来像一个简单的文本。例如，

```
button.disButton {
  border: none;
  background: transparent;
}

button.disButton a{
  color: #ddd;
  text-decoration: none;
} 
```

# python - Haproxy socket.io websocket 代理总是回退到长轮询

> ID：10639912
> 
> 赞同：3
> 
> 时间：2012-05-17T16:44:26.317
> 
> 标签：python, websocket, socket.io, tornado, haproxy

嘿，我一直在尝试从 socket.io 获取 Haproxy 代理 websocket 连接

我已经阅读了我在谷歌上能找到的几乎所有内容，并尝试了 haproxy.cfg 的无数变体，但无论我尝试什么，socket.io 总是退回到长轮询。

值得一提的是，如果我将连接直接路由到我正在使用的套接字服务器，则 ws 连接可以完美地工作。

所以我使用 socket.io 客户端和 tornado tornado2 websocket 服务器。我当前的 haproxy.cfg 取自这里[haproxy example conf](https://stackoverflow.com/questions/8627070/a-good-solution-for-a-websocket-socket-io-)

```
defaults
mode    http

frontend all
bind 0.0.0.0:80
mode tcp

maxconn 200000
timeout client 86400000
default_backend www_backend

# Any URL beginning with socket.io will be flagged as 'is_websocket'
acl is_websocket path_beg /socket.io
acl is_websocket hdr(Upgrade) -i WebSocket
acl is_websocket hdr_beg(Host) -i ws

# The connection to use if 'is_websocket' is flagged
use_backend socket_backend_http if is_websocket

tcp-request inspect-delay 500ms
tcp-request content accept if HTTP   

backend www_backend
option httplog
option httpclose
balance roundrobin
option forwardfor
timeout server 30000
timeout connect 4000
server nginx localhost:81 weight 1 maxconn 1024 check

backend socket_backend_http
mode http
option httplog
option http-server-close
option forceclose
no option httpclose
balance roundrobin
option forwardfor 
timeout queue 5000
timeout server 86400000
timeout connect 86400000
timeout check 1s
server socket1 localhost:3012 weight 1 maxconn 1024 check 
```

websocket 请求被正确路由到 socket_backend_http 但浏览器控制台总是显示以下错误

```
Unexpected response code: 400 
```

然后 socket.io 在短时间消息按预期出现后回退到长轮询。我已经使用最新版本的 chrome、safari 和 firefox 进行了测试，结果都相同

我看到很多人说他们有这个工作让我绝望！我将永远感激任何设法解决这个问题的人。

再次澄清 haproxy 绑定到 80 端口，nginx 在 81 端口上运行，套接字服务器在 3012 端口上运行。如果有人觉得查看套接字服务器有用，请发表评论并用代码

提前致谢

**编辑** 当前的 haproxy.cfg 实际上导致在龙卷风服务器中引发此错误

```
Traceback (most recent call last):
File "/home/mike/.virtual-envs/watchdog-app/local/lib/python2.7/site-     packages/tornado/ioloop.py", line 399, in _run_callback
callback()
File "/home/mike/.virtual-envs/watchdog-app/local/lib/python2.7/site-packages/tornado/iostream.py", line 304, in wrapper
callback(*args)
File "/home/mike/.virtual-envs/watchdog-app/local/lib/python2.7/site-packages/tornado/httpserver.py", line 250, in _on_headers
self.request_callback(self._request)
File "/home/mike/.virtual-envs/watchdog-app/local/lib/python2.7/site-packages/tornado/web.py", line 1362, in __call__
handler._execute(transforms, *args, **kwargs)
File "/home/mike/.virtual-envs/watchdog-app/local/lib/python2.7/site-packages/tornado/web.py", line 992, in _execute
self._handle_request_exception(e)
File "/home/mike/.virtual-envs/watchdog-app/local/lib/python2.7/site-packages/tornado/web.py", line 1032, in _handle_request_exception
self.send_error(500, exc_info=sys.exc_info())
File "/home/mike/.virtual-envs/watchdog-app/local/lib/python2.7/site-packages/tornado/web.py", line 688, in send_error
self.finish()
File "/home/mike/.virtual-envs/watchdog-app/local/lib/python2.7/site-packages/tornado/web.py", line 669, in finish
self.request.finish()
File "/home/mike/.virtual-envs/watchdog-app/local/lib/python2.7/site-packages/tornado/httpserver.py", line 422, in finish
self.connection.finish()
File "/home/mike/.virtual-envs/watchdog-app/local/lib/python2.7/site-packages/tornado/httpserver.py", line 183, in finish
assert self._request, "Request closed" 
```

**更新**

好的，所以一些进一步的发展。我已经设法通过使用 stunnel 的稍微不同的设置来完成这项工作。所以 nginx 现在将 http 请求重新路由到 https 并被 stunnel 终止，然后将请求转发到 haproxy 接收的端口 8443 上。套接字握手已完成，一切都按预期工作，这很好，但我喜欢有人能够启发我为什么这适用于 ssl 而不是 http ！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T10:50:54.650

我不能谈论 Socket.io，但 SockJS 已经过测试，并且在最近的 haproxy（例如 1.4.16）之后运行良好。查看示例配置：

*   [https://github.com/sockjs/sockjs-node/blob/master/examples/haproxy.cfg](https://github.com/sockjs/sockjs-node/blob/master/examples/haproxy.cfg)

我还没有想出在 Nginx 后面运行 SockJS 的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T01:28:09.833

做了一些快速的研究——个人并不熟悉，但我一直在使用 SockJS 并注意到同样的行为。我至少发现 Nginx 与 websockets 不兼容，并且 HAProxy 需要努力才能开始工作，就像你发现的那样。 [haproxy 和 socket.io 无法正常工作](https://stackoverflow.com/questions/8662377/haproxy-and-socket-io-not-fully-working)

[示例配置与来自以下来源http://book.mixu.net/ch13.html](http://book.mixu.net/ch13.html)的配置非常相似，看起来与您的配置有 99% 的相似性。

[https://github.com/mixu/sioconfig/blob/master/single.haproxy.cfg](https://github.com/mixu/sioconfig/blob/master/single.haproxy.cfg)

我发现的另外两个花絮是 - 来自[HAProxy + WebSocket Disconnection](https://stackoverflow.com/questions/4360221/haproxy-websocket-disconnection)

*   确保您的 HAProxy 为 1.4 或更高版本
*   确保您的 socket.io 是 0.6.8 或更高版本

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T22:18:01.733

为了清楚起见，WebSocket 中没有 HTTP 内容，因此不需要任何 content-length 标头。

此外，您的配置中存在错误。前端处于 TCP 模式，因此 ACL 仅在请求来得足够快时才会匹配。事实上，有时它可能部分靠运气。请将您的前端设置为“模式 http”以解决此问题，并删除您变得无用的“tcp-inspect”规则。顺便说一句，您的“http-backend”也缺少 HTTP 模式。

我猜你没有检查日志，否则你可能会注意到它们在 TCP 中并不是真正可利用的：-/

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-09T03:21:15.630

我知道这是一个老问题，但是：

Haproxy 无法代理 websocket（截至 2013 年 6 月）。我很确定错误的原因是因为它将它视为正常的 http 连接并超时连接。您可以使超时持续很长时间，但这感觉很脏。

您的选择是：

*   Nginx 1.4 版增加了对代理 websocket 的支持，请参见[http://nginx.org/](http://nginx.org/)
*   使用 Nodejitsu 的 websocket 代理[http://blog.nodejitsu.com/http-proxy-intro](http://blog.nodejitsu.com/http-proxy-intro)（当我们放置 > 5k 并发连接时，发现它泄漏了内存并崩溃了）。
*   客户端平衡，例如使用`server<n>.x.com`
*   使用amazon的route53做DNS roundrobin（我说amazon是因为它支持健康检查，但是如果你不需要HA，普通的DNS就可以了）
*   恐慌...

要记住的一点是，您还需要进行粘性会话或使用集中式会话存储。SockJS 比 socket.io 更容易做到这一点，因为它会在每个会话的 url 中放置一个随机字符串，因此您可以简单地基于 url 进行平衡器。您可以使用集中式存储（例如 redis）与 Socket.io 进行会话，我觉得这很笨拙。

Nginx 和 nodejitsu 选项都可以为您终止 SSL。

# bing - 有没有办法获得 Bing 当天的照片？

> ID：10639914
> 
> 赞同：99
> 
> 时间：2012-05-17T16:44:57.013
> 
> 标签：bing

有什么方法可以以编程方式获取 Bing 背景图像吗？

Bing 的 API 似乎没有提供这样的功能，也许还有另一种方式？

* * *

## 回答 #1

> 赞同：130
> 
> 时间：2013-08-07T06:32:12.853

我认为最好的方法是通过 AJAX 调用模仿他们自己的方式。

他们调用这个 URL 并通过 XML 反序列化提取信息。

**XML：** [http ://www.bing.com/HPImageArchive.aspx?format=xml&idx=0&n=1&mkt=en-US](http://www.bing.com/HPImageArchive.aspx?format=xml&idx=0&n=1&mkt=en-US)

**JSON：** [http ://www.bing.com/HPImageArchive.aspx?format=js&idx=0&n=1&mkt=en-US](http://www.bing.com/HPImageArchive.aspx?format=js&idx=0&n=1&mkt=en-US)

**RSS：** [http ://www.bing.com/HPImageArchive.aspx?format=rss&idx=0&n=1&mkt=en-US](http://www.bing.com/HPImageArchive.aspx?format=rss&idx=0&n=1&mkt=en-US)

该`mkt`属性显然可以更改为与“en-US”不同的区域，但如果您不关心特定区域，也可以完全退出。

请注意，`_1366x768.jpg`添加到图像名称的后缀似乎可以修改为不同的分辨率（如`_1920x1080.jpg`全高清和可能的其他分辨率）。

这是截至 2013 年 9 月 28 日的 XML 格式数据转储。

```
<?xml version="1.0" encoding="utf-8"?>
<images>
    <image>
        <startdate>20130928</startdate>
        <fullstartdate>201309280000</fullstartdate>
        <enddate>20130929</enddate>
        <url>/az/hprichbg/rb/LakeTurkana_EN-US15976511099_1366x768.jpg</url>
        <urlBase>/az/hprichbg/rb/LakeTurkana_EN-US15976511099</urlBase>
        <copyright>Lava rock pools at the southern end of Lake Turkana, in Kenya (© Nigel Pavitt/Corbis)</copyright>
        <copyrightlink>http://www.bing.com/search?q=Lake+Turkana%2C+Kenya&amp;form=hpcapt</copyrightlink>
        <drk>1</drk>
        <top>1</top>
        <bot>1</bot>
        <hotspots>
            <hotspot>
                <desc>These are the southern reaches of a lake...</desc>
                <link>http://www.bing.com/maps/?v=2&amp;cp=2.794725~37.335197&amp;lvl=7&amp;dir=0&amp;sty=b&amp;q=Lake%20Turkana%2C%20Kenya&amp;form=hphot1</link>
                <query>That stretches for 180 miles, up into another country</query>
                <LocX>15</LocX>
                <LocY>33</LocY>
            </hotspot>
            <hotspot>
                <desc>This body of water was once called the Jade Sea.</desc>
                <link>http://www.bing.com/search?q=green+algae&amp;form=hphot2</link>
                <query>What gives the water here its sometimes vibrant hue?</query>
                <LocX>37</LocX>
                <LocY>42</LocY>
            </hotspot>
            <hotspot>
                <desc>One of the world's most powerful predators lives here.</desc>
                <link>http://www.bing.com/videos/search?q=Underwater+Croc+Cams+National+Geographic&amp;FORM=hphot3#view=detail&amp;mid=D25E1909D3514A8732C5D25E1909D3514A8732C5</link>
                <query>See some rare underwater footage of the beast</query>
                <LocX>66</LocX>
                <LocY>33</LocY>
            </hotspot>
            <hotspot>
                <desc>Many fossils of ancient human ancestors have been uncovered in the surrounding area.</desc>
                <link>http://www.bing.com/search?q=Turkana+Boy&amp;form=hphot4</link>
                <query>One skeleton was so complete, paleoanthropologists gave him a name</query>
                <LocX>82</LocX>
                <LocY>41</LocY>
            </hotspot>
        </hotspots>
        <messages></messages>
    </image>
    <tooltips>
        <loadMessage>
            <message>Indlæser...</message>
        </loadMessage>
        <previousImage>
            <text>Forrige</text>
        </previousImage>
        <nextImage>
            <text>Næste</text>
        </nextImage>
        <play>
            <text>Afspil</text>
        </play>
        <pause>
            <text>Pause</text>
        </pause>
    </tooltips>
</images> 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2014-04-18T08:33:41.907

## BING 图像的 JSON 格式

我找到了一种获取当天**Bing Image的****JSON 格式**的方法

 **> **[http://www.bing.com/HPImageArchive.aspx?format=js&idx=0&n=1](http://www.bing.com/HPImageArchive.aspx?format=js&idx=0&n=1)**

### 笔记

      `n=`您想要的图像数量（您可以使用**整数**），
      `mkt=`您的位置（例如：**en-US**）

* * *

这是 JSON 输出的样子

```
 {
  "images": [
    {
      "startdate": "20141214",
      "fullstartdate": "201412141830",
      "enddate": "20141215",
      "url": "\/az\/hprichbg\/rb\/BlackButte_EN-IN7038391888_1920x1080.jpg",
      "urlbase": "\/az\/hprichbg\/rb\/BlackButte_EN-IN7038391888",
      "copyright": "Black Butte, seen from the Mount Jefferson Wilderness, Oregon, USA (\u00a9 Marc Adamus\/Aurora Photos)",
      "copyrightlink": "http:\/\/www.bing.com\/search?q=Black+Butte&qs=n&form=hpcapt&mkt=en-in&pq=black+butte&sc=8-11&sp=-1&sk=&cvid=228ac7f125f94bbaafd4a4abd4f9a32d",
      "wp": true,
      "hsh": "94156ae1e2e1be49f9b739d2b7bff65c",
      "drk": 1,
      "top": 1,
      "bot": 1,
      "hs": [

      ],
      "msg": [
        {
          "title": "How does it feel\u2026",
          "link": "http:\/\/www.bing.com\/videos\/search?q=Climbing+Black+Butte&FORM=pgbar1&mkt=en-in#view=detail&mid=58BDB2F2B9FCB85D597558BDB2F2B9FCB85D5975",
          "text": "To climb 1961.7 m?"
        },
        {
          "title": "On top of the world",
          "link": "http:\/\/www.bing.com\/images\/search?q=Pictures+From+the+Top+of+Mount+Everest&FORM=pgbar2&mkt=en-in",
          "text": "It's mountaineer's dream view"
        }
      ]
    }
  ],
  "tooltips": {
    "loading": "Loading...",
    "previous": "Previous",
    "next": "Next",
    "walle": "This image is not available to download as wallpaper.",
    "walls": "Download this image. Use of this image is restricted to wallpaper only."
  }
} 
```

* * *

使用`url`从`images[]`

并将其添加到`'http://bing.com'`

这里的网址是`"url": "\/az\/hprichbg\/rb\/DayGecko_EN-US8730336235_1366x768.jpg"`

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-10-24T21:06:29.837

Microsoft 最近发布了适用于 Windows 7的[Bing 动态主题，其中包含](http://windows.microsoft.com/en-US/windows/downloads/bing-dynamic-theme)[一个带有 Bing 壁纸链接的 RSS 源](http://themeserver.microsoft.com/default.aspx?p=Bing&c=Desktop&m=en-US)。

还有一个[Python 脚本](https://github.com/jabbalaci/jabbapylib/blob/master/jabbapylib/apps/bing.py)会尝试加载 Bing 网站并猜测正确的图像 URL，但根据我的经验，它通常会导致图像分辨率低于 RSS 提要提供的图像。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2017-02-17T09:47:47.663

一班 PowerShell（3.0 或更高版本）

`irm`是一个别名`Invoke-RestMethod`

```
irm "bing.com$((irm "bing.com/HPImageArchive.aspx?format=js&mkt=en-IN&n=1").images[0].url)" -OutFile bing.jpg 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-11-22T21:49:07.173

我迟到了，但如果有人需要 PHP 实现：我写了一个简单的类来处理这个过程：

[https://github.com/grubersjoe/bing-daily-photo](https://github.com/grubersjoe/bing-daily-photo)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-06-12T13:15:59.447

我也喜欢 Bing 图片，但他们的应用程序过于臃肿，无法下载图片。在分析了与提琴手的联系后，我编写了这段代码。1920x1200 带有嵌入的 Bing 徽标，但较低的分辨率没有它。

您可以让 Windows 显示您设置的图像文件夹中的随机图像，因此当您每天下载它们时，它会显示更多随机图像。如果您确实保留了“imageDir”，则需要更改该文件夹的权限，否则它会崩溃，我没有为捕捉错误而烦恼。最后，如果您想将壁纸设置为今天的图像，请取消注释这些行，或者您可以创建一个任务来运行程序，比如登录后一分钟。

```
using System;
using System.IO;
using System.Net;
//using System.Runtime.InteropServices;

namespace Bing
{
    class Program
    {
      //  [DllImport("user32.dll", CharSet = CharSet.Auto)]
      //  private static extern Int32 SystemParametersInfo(UInt32 uiAction, UInt32 uiParam, String pvParam, UInt32 fWinIni);
        private static String imgDir = @"C:\Windows\Web\Wallpaper\Bing\";

        static void Main(string[] args)
        {
            String imageFileName;
            if (!Directory.Exists(imgDir))
                Directory.CreateDirectory(imgDir);

            for (byte i = 6; i >= 0; i--)
            {
                imageFileName = imgDir + DateTime.Today.AddDays(-i).ToString("yyy-MM-dd") + ".jpg";

                if (!File.Exists(imageFileName))
                {
                    string response = null;
                    Connect(ref response, i);
                    ProcessXml(ref response);
                    using (WebClient client = new WebClient())
                        client.DownloadFile("http://www.bing.com" + response + "_1920x1200.jpg", imageFileName);
                }                
            }
            //SystemParametersInfo(20, 0, imageFileName, 0x01 | 0x02);
        }

        private static void Connect(ref string res, byte i)
        {
            HttpWebRequest webrequest = (HttpWebRequest)WebRequest.Create("http://www.bing.com/hpimagearchive.aspx?format=xml&idx=" + i + "&n=1&mbl=1&mkt=en-ww");
            webrequest.KeepAlive = false;
            webrequest.Method = "GET";
            using (HttpWebResponse webresponse = (HttpWebResponse)webrequest.GetResponse())
                using (StreamReader loResponseStream = new StreamReader(webresponse.GetResponseStream()))
                    res = loResponseStream.ReadToEnd();                
        }

        private static void ProcessXml(ref string xmlString)
        {
            using (System.Xml.XmlReader reader = System.Xml.XmlReader.Create(new StringReader(xmlString)))
            {
                reader.ReadToFollowing("urlBase");
                xmlString = reader.ReadElementContentAsString();
            }
        }        
    }
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-08-18T22:01:08.933

我看到很多人也要求新的RSS链接，只需将URL中的格式参数更改为“rss”即可。

**RSS** : [http://www.bing.com/HPImageArchive.aspx?format=rss&idx=0&n=1&mkt=en-US](http://www.bing.com/HPImageArchive.aspx?format=rss&idx=0&n=1&mkt=en-US)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-08-01T12:17:47.557

此 JavaScript 将通过将 div 的背景图像更改为当天的 bing 图像的背景来回答“如何处理 api”。

```
function PullBackground() {
    var ajaxRequest = new XMLHttpRequest(), background = ''; 
    ajaxRequest.open('POST', "http://www.bing.com/HPImageArchive.aspx?format=xml&idx=0&n=1&mkt=en-US", true);
    ajaxRequest.setRequestHeader("Connection", "close");
    ajaxRequest.send('');
    ajaxRequest.onreadystatechange = function () {
        if (ajaxRequest.readyState == 4) {
            background = ajaxRequest.responseText;
            var res = background.split("<url>"); 
            var res1 = res[1].split("</url>");
            background = res1[0];

            document.getElementById('NameOfTheDivToChange').style.backgroundImage = "url('http://bing.com" + background + "')"
            document.getElementById('NameOfTheDivToChange').style.backgroundSize = "100%";
        }
    }
} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-06-12T22:22:22.800

如果有人在寻找可能的实现，我用 C# 编写了一个小的命令行程序来下载、保存并将我的背景设置为 Bing Image of the Day。随意修改它以适应您的个人需求。[https://github.com/josueespinosa/BingBackground](https://github.com/josueespinosa/BingBackground)

```
using Microsoft.Win32;
using Newtonsoft.Json;
using System;
using System.Drawing;
using System.IO;
using System.Net;
using System.Runtime.InteropServices;
using System.Windows.Forms;

namespace BingBackground
{
    class BingBackground
    {
        private static void Main(string[] args)
        {
            string urlBase = GetBackgroundUrlBase();
            Image background = DownloadBackground(urlBase + GetResolutionExtension(urlBase));
            SaveBackground(background);
            SetBackground(background, PicturePosition.Fill);
        }

        private static dynamic DownloadJson()
        {
            using (WebClient webClient = new WebClient())
            {
                Console.WriteLine("Downloading JSON...");
                string jsonString = webClient.DownloadString("https://www.bing.com/HPImageArchive.aspx?format=js&idx=0&n=1&mkt=en-US");
                return JsonConvert.DeserializeObject<dynamic>(jsonString);
            }
        }

        private static string GetBackgroundUrlBase()
        {
            dynamic jsonObject = DownloadJson();
            return "https://www.bing.com" + jsonObject.images[0].urlbase;
        }

        private static string GetBackgroundTitle()
        {
            dynamic jsonObject = DownloadJson();
            string copyrightText = jsonObject.images[0].copyright;
            return copyrightText.Substring(0, copyrightText.IndexOf(" ("));
        }

        private static bool WebsiteExists(string url)
        {
            try
            {
                WebRequest request = WebRequest.Create(url);
                request.Method = "HEAD";
                HttpWebResponse response = (HttpWebResponse)request.GetResponse();
                return response.StatusCode == HttpStatusCode.OK;
            }
            catch
            {
                return false;
            }
        }

        private static string GetResolutionExtension(string url)
        {
            Rectangle resolution = Screen.PrimaryScreen.Bounds;
            string widthByHeight = resolution.Width + "x" + resolution.Height;
            string potentialExtension = "_" + widthByHeight + ".jpg";
            if (WebsiteExists(url + potentialExtension))
            {
                Console.WriteLine("Background for " + widthByHeight + " found.");
                return potentialExtension;
            }
            else
            {
                Console.WriteLine("No background for " + widthByHeight + " was found.");
                Console.WriteLine("Using 1920x1080 instead.");
                return "_1920x1080.jpg";
            }
        }

        private static Image DownloadBackground(string url)
        {
            Console.WriteLine("Downloading background...");
            WebRequest request = WebRequest.Create(url);
            WebResponse reponse = request.GetResponse();
            Stream stream = reponse.GetResponseStream();
            return Image.FromStream(stream);
        }

        private static string GetBackgroundImagePath()
        {
            string directory = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.MyPictures), "Bing Backgrounds", DateTime.Now.Year.ToString());
            Directory.CreateDirectory(directory);
            return Path.Combine(directory, DateTime.Now.ToString("M-d-yyyy") + ".bmp");
        }

        private static void SaveBackground(Image background)
        {
            Console.WriteLine("Saving background...");
            background.Save(GetBackgroundImagePath(), System.Drawing.Imaging.ImageFormat.Bmp);
        }

        private enum PicturePosition
        {
            Tile,
            Center,
            Stretch,
            Fit,
            Fill
        }

        internal sealed class NativeMethods
        {
            [DllImport("user32.dll", CharSet = CharSet.Auto)]
            internal static extern int SystemParametersInfo(int uAction, int uParam, string lpvParam, int fuWinIni);
        }

        private static void SetBackground(Image background, PicturePosition style)
        {
            Console.WriteLine("Setting background...");
            using (RegistryKey key = Registry.CurrentUser.OpenSubKey(Path.Combine("Control Panel", "Desktop"), true))
            {
                switch (style)
                {
                    case PicturePosition.Tile:
                        key.SetValue("PicturePosition", "0");
                        key.SetValue("TileWallpaper", "1");
                        break;
                    case PicturePosition.Center:
                        key.SetValue("PicturePosition", "0");
                        key.SetValue("TileWallpaper", "0");
                        break;
                    case PicturePosition.Stretch:
                        key.SetValue("PicturePosition", "2");
                        key.SetValue("TileWallpaper", "0");
                        break;
                    case PicturePosition.Fit:
                        key.SetValue("PicturePosition", "6");
                        key.SetValue("TileWallpaper", "0");
                        break;
                    case PicturePosition.Fill:
                        key.SetValue("PicturePosition", "10");
                        key.SetValue("TileWallpaper", "0");
                        break;
                }
            }
            const int SetDesktopBackground = 20;
            const int UpdateIniFile = 1;
            const int SendWindowsIniChange = 2;
            NativeMethods.SystemParametersInfo(SetDesktopBackground, 0, GetBackgroundImagePath(), UpdateIniFile | SendWindowsIniChange);
        }
    }
} 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-08-07T09:43:01.853

看看[Github](http://github.com)上[的 bing-desktop-wallpaper-changer](https://github.com/UtkarshGpta/bing-desktop-wallpaper-changer)。该脚本是用 python 编写的，我希望你能在那里找到答案。

```
#!/usr/bin/python
#-*- coding: utf-8 -*-

import os
import urllib
import urllib2
from bs4 import BeautifulSoup

# Get BingXML file which contains the URL of the Bing Photo of the day
# idx = Number days previous the present day. 0 means current day, 1 means       yesterday, etc
# n = Number of images predious the day given by idx
# mkt denotes your location. e.g. en-US means United States. Put in your  country code
BingXML_URL = "http://www.bing.com/HPImageArchive.aspx?     format=xml&idx=0&n=1&mkt=en-US"
page = urllib2.urlopen(BingXML_URL)
BingXML = BeautifulSoup(page, "lxml")

# For extracting complete URL of the image
Images = BingXML.find_all('image')
ImageURL = "https://www.bing.com" + Images[0].url.text
ImageName = Images[0].startdate.text+".jpg"

urllib.urlretrieve(ImageURL, ImageName) 
```

**查看 Github 项目以获取详细代码**

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2018-05-08T01:12:43.453

简单的 PowerShell，放入文件夹，在 Windows 任务计划程序中创建每日任务，脚本将图像保存在其运行文件夹中，然后在您的桌面背景设置中选择该文件夹作为背景。

```
[xml]$doc = (New-Object System.Net.WebClient).DownloadString("https://www.bing.com/HPImageArchive.aspx?format=xml&idx=0&n=1&mkt=ru-RU")
$url = $doc.images.image.url
$url = "https://www.bing.com/" + $url -replace "_1366x768","_1920x1200"

Write-Output $url

$fileName = Split-Path $url -leaf
$output = "$PSScriptRoot\$fileName"

$start_time = Get-Date
Invoke-WebRequest -Uri $url -OutFile $output
Write-Output "Saved to: $output Time taken: $((Get-Date).Subtract($start_time).Seconds) second(s)" 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2018-05-24T04:23:19.757

`requests`这是一个简单的 Python 脚本，它使用和来获取当天的必应照片`json`：

```
import requests
import json

BING_URI_BASE = "http://www.bing.com"
BING_WALLPAPER_PATH = "/HPImageArchive.aspx?format=js&idx=0&n=1&mkt=en-US"

# open the Bing HPImageArchive URI and ask for a JSON response
resp = requests.get(BING_URI_BASE + BING_WALLPAPER_PATH)

if resp.status_code == 200:
    json_response = json.loads(resp.content)
    wallpaper_path = json_response['images'][0]['url']
    filename = wallpaper_path.split('/')[-1]
    wallpaper_uri = BING_URI_BASE + wallpaper_path

    # open the actual wallpaper uri, and write the response as an image on the filesystem
    response = requests.get(wallpaper_uri)
    if resp.status_code == 200:
        with open(filename, 'wb') as f:
            f.write(response.content)
    else:
        raise ValueError("[ERROR] non-200 response from Bing server for '{}'".format(wallpaper_uri))
else: 
    raise ValueError("[ERROR] non-200 response from Bing server for '{}'".format(BING_URI_BASE + BING_WALLPAPER_PATH)) 
```

这会将文件写入`TurtleTears_EN-US7942276596_1920x1080.jpg`执行脚本的同一目录。当然，可以在这里调整一大堆东西，但可以很容易地完成工作。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2019-11-26T11:42:11.030

Bash 一个班轮（需要 bash、curl 和 jq），对于放入 cronjob 很有用：

```
BACKGROUND_META=$(curl 'https://www.bing.com/HPImageArchive.aspx?format=js&idx=0&n=1&mkt=en-US'); curl -o $(echo $BACKGROUND_META | jq -r '.images[0].urlbase' | sed s/.*=//).jpg "https://bing.com$(echo $BACKGROUND_META| jq -r '.images[0].url')" 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2016-04-12T16:18:47.863

我无法获得可以与[John 的背景切换器](https://johnsad.ventures/software/backgroundswitcher/)一起使用的正确 RSS 提要，直到我发现这个 feedburner 提要似乎工作得很好： http: [//feeds.feedburner.com/bingimages](http://feeds.feedburner.com/bingimages)

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2018-12-14T13:27:10.497

我终于决定用 Python 3 编写一个脚本来从 xml 存档中获取最多的图像（16 个）。

所以现在我可以毫不费力地归档图像。只需运行 Python 脚本。
我将图像组织到年/月文件夹中，如下所示：2018 > 12 月 12 日 > 2018-12-06.jpg

该脚本位于我的 Bing 壁纸文件夹中。（在我的图片文件夹中）

```
import urllib.request as urllib
import json
from datetime import date
from dateutil import parser
import sys,os

months = "January","Febuary","March","April","May","June","July","August","September","October","November","December"

def downloadBingImages(start):
    try: data = urllib.urlopen("https://www.bing.com/hpimagearchive.aspx?format=js&idx=%i&n=8&mkt=en-NZ"%start).read()
    except: sys.exit()
    e = json.loads(data.decode())
    images = e["images"]

    for image in images:
        d = parser.parse(image["startdate"]) # parse("20181206")

        filename = str(d.date())+".jpg"                         #                  2018-12-06.jpg
        folder = "%i/%i %s/"%(d.year,d.month,months[d.month-1]) # 2018/12 December/
        file = folder+filename                                  # 2018/12 December/2018-12-06.jpg

        if not os.path.exists(folder): os.makedirs(folder)
        exists = os.path.isfile(file)

        url = "https://www.bing.com"+image["urlbase"]+"_1920x1200.jpg"
        print(("downloading","exists")[exists],filename,url)
        if not exists:
            try: urllib.urlretrieve(url,file)
            except: sys.exit()

    print()

# downloads the 16 latest bing images
downloadBingImages(-1)
downloadBingImages(7) 
```

用于更新壁纸的可选额外代码：（放在 downloadBingImages(7) 下方）

```
import ctypes,win32con

def getWallpaper():
    ubuf = ctypes.create_unicode_buffer(512)
    ctypes.windll.user32.SystemParametersInfoW(win32con.SPI_GETDESKWALLPAPER,len(ubuf),ubuf,0)
    return ubuf.value

def setWallpaper(path):
    changed = win32con.SPIF_UPDATEINIFILE | win32con.SPIF_SENDCHANGE
    ctypes.windll.user32.SystemParametersInfoW(win32con.SPI_SETDESKWALLPAPER,0,path,changed)

# update wallpaper after a week from current
wallpaper = getWallpaper()
if wallpaper.startswith(os.getcwd()): # has to be in script directory
    try: wallpaperDate = parser.parse(os.path.splitext(os.path.basename(wallpaper))[0])
    except: sys.exit() # not using an image with a parsable date

    t = date.today()
    if (t-wallpaperDate.date()).days>=7: # been a week or longer
        setWallpaper(os.path.abspath("%i/%i %s/"%(t.year,t.month,months[t.month-1])+str(t)+".jpg")) # .../2018/12 December/2018-12-14.jpg 
```

示例输出：

```
exists 2018-12-15.jpg https://www.bing.com/az/hprichbg/rb/YosemiteBridge_ROW11493343707_1920x1200.jpg
exists 2018-12-14.jpg https://www.bing.com/az/hprichbg/rb/CardinalBerries_ROW13321753978_1920x1200.jpg
exists 2018-12-13.jpg https://www.bing.com/az/hprichbg/rb/ReykjavikYuleLads_ROW12406174277_1920x1200.jpg
exists 2018-12-12.jpg https://www.bing.com/az/hprichbg/rb/PoinsettiaBuds_ROW14015106672_1920x1200.jpg
exists 2018-12-11.jpg https://www.bing.com/az/hprichbg/rb/KilimanjaroMawenzi_ROW12001033920_1920x1200.jpg
exists 2018-12-10.jpg https://www.bing.com/az/hprichbg/rb/ChristmasIslandCrab_ROW12174154872_1920x1200.jpg
exists 2018-12-09.jpg https://www.bing.com/az/hprichbg/rb/JohnDaySnow_ROW10922424229_1920x1200.jpg
exists 2018-12-08.jpg https://www.bing.com/az/hprichbg/rb/BanffEvergreens_ROW13248925556_1920x1200.jpg

exists 2018-12-07.jpg https://www.bing.com/az/hprichbg/rb/TaisetsuShirakawago_ROW12053480529_1920x1200.jpg
exists 2018-12-06.jpg https://www.bing.com/az/hprichbg/rb/Huuhkajat_ROW11700922065_1920x1200.jpg
exists 2018-12-05.jpg https://www.bing.com/az/hprichbg/rb/SurfersBronteBeach_ROW9358782018_1920x1200.jpg
exists 2018-12-04.jpg https://www.bing.com/az/hprichbg/rb/SphinxObservatory_ROW9691446114_1920x1200.jpg
exists 2018-12-03.jpg https://www.bing.com/az/hprichbg/rb/HussarPoint_ROW8654856850_1920x1200.jpg
exists 2018-12-02.jpg https://www.bing.com/az/hprichbg/rb/Nuuk_ROW12381573676_1920x1200.jpg
exists 2018-12-01.jpg https://www.bing.com/az/hprichbg/rb/RedAntarctica_ROW12620598839_1920x1200.jpg
exists 2018-11-30.jpg https://www.bing.com/az/hprichbg/rb/KilchurnSky_ROW9474162800_1920x1200.jpg 
```

PS 上面的脚本[`&mkt=en-NZ`](https://www.bing.com/hpimagearchive.aspx?format=xml&idx=-1&n=8&mkt=en-NZ)用于新西兰图像。[您可以在此处](https://docs.microsoft.com/en-us/previous-versions/bing/search/dd251064(v=msdn.10))
查看其他国家/地区的市场代码。

您还可以[在此处查看](http://bingwallpaper.anerg.com)自 2009 年以来为不同国家/地区存档的所有图像。
（虽然仅在 1366x768 中）

主要 PS 将脚本添加到任务计划程序以在登录时运行。（或每天/每周）

创建基本任务
程序/脚本：python（或 C:\Python34\python.exe，如果它不在您的环境路径中）
参数：“path/to/your/script.py”
开始于：“path/to/your”

更新！（2019 年 3 月）2019 年 3 月10 日
的图像在 xml 和 rss 格式中都被赋予了错误的开始日期 (20190309)。
改为使用 Json 格式。（因为它给出了准确的日期）

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2019-05-24T15:10:06.230

`https://peapix.com/bing/feed`将列出不带 Bing 徽标的最新 Bing 图片，由[peapix.com](https://peapix.com)维护。支持以下国家/地区：AU、CA、CN、DE、FR、JP、US、GB。

例如，日本为[https://peapix.com/bing/feed?country=jp](https://peapix.com/bing/feed?country=jp)，美国为[https://peapix.com/bing/feed?country=us 。](https://peapix.com/bing/feed?country=us)

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2020-04-23T14:55:03.850

OP 没有指定操作系统，所以这里是一个在 Linux 中使用的。[我根据此处](https://askubuntu.com/a/400984/1015102)提供的脚本进行了修改。

基本上它获取当天图像的 url，下载图像并保存到固定文件`~/.config/wallpaper.jpg`，并用于`feh`设置壁纸。同时发出通知。

```
#!/bin/sh

WP_FILE=$HOME/.config/wallpaper.jpg

bing="www.bing.com"

# $xmlURL is needed to get the xml data from which
# the relative URL for the Bing pic of the day is extracted
#
# The mkt parameter determines which Bing market you would like to
# obtain your images from.
# Valid values are: en-US, zh-CN, ja-JP, en-AU, en-UK, de-DE, en-NZ, en-CA or opted out.
#
# The idx parameter determines where to start from. 0 is the current day,
# 1 the previous day, etc.
xmlURL="http://www.bing.com/HPImageArchive.aspx?format=xml&idx=0&n=1&mkt=en-US"

# The desired Bing picture resolution to download
# Valid options: "_1024x768" "_1280x720" "_1366x768" "_1920x1200"
desiredPicRes="_1920x1080"

# The file extension for the Bing pic
picExt=".jpg"

# Extract the relative URL of the Bing pic of the day from
# the XML data retrieved from xmlURL, form the fully qualified
# URL for the pic of the day, and store it in $picURL

# Form the URL for the desired pic resolution
desiredPicURL=$bing$(curl -s $xmlURL | grep -oP "(?<=<urlBase>)(.*?)(?=</urlBase>)")$desiredPicRes$picExt

# Form the URL for the default pic resolution
defaultPicURL=$bing$(curl -s $xmlURL | grep -oP "(?<=<url>)(.*?)(?=</url>)")

# $picName contains the filename of the Bing pic of the day

# Attempt to download the desired image resolution. If it doesn't
# exist then download the default image resolution
if wget --quiet --spider "$desiredPicURL"
then

    # Download the Bing pic of the day at desired resolution
    curl -s -o "$WP_FILE" "$desiredPicURL"
else
    # Download the Bing pic of the day at default resolution
    curl -s -o "$WP_FILE" "$defaultPicURL"
fi

if [[ -f "${WP_FILE}" ]]; then
    feh --bg-scale "$WP_FILE" && \
        notify-send -i emblem-photos "Wallpaper" "Wallpaper changed" \
        -h int:suppress-sound:1 -h int:transient:1
fi 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2012-05-17T16:47:53.207

您可能会考虑获取该 url 的 file_content 并在文件中搜索图像。不确定这是最好的方法，但这是一种方法。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2017-08-02T23:29:19.350

使用来自@Siv 的 URL，这是一个更新的 JavaScript 示例`<div class="bgimg" id="background">`

```
function GetImageURL(ans) {
    var suffix = ans.images[0].url 
    document.getElementById("background").style.backgroundImage = 'url("' + 
    'http://bing.com/' + suffix + '"'
}

function GetJSON() {
    var xmlhttp = new XMLHttpRequest()
    var url = "https://www.bing.com/HPImageArchive.aspx?format=js&idx=0&n=1"

    xmlhttp.onreadystatechange = function () {
        if (this.readyState == 4 && this.status == 200) {
            var ans = JSON.parse(this.responseText);
            GetImageURL(ans);
        }
    };
    xmlhttp.open("GET", url, true);
    xmlhttp.send();
}

window.onload = function () {
    GetJSON()
} 
```

这个类的css是：

```
.bgimg {
    height: 100%;
    position: relative;
    opacity: 0.95;
    background-position: center;
    background-repeat: no-repeat;
    background-size: cover;
} 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2018-01-02T15:34:10.367

您可以在 linux 机器上使用 python 和 wget 做到这一点：

```
import os # import the os package
os.system("wget -O index.html http://www.bing.com") # download the bing index
str1 = open('index.html', 'r').read() # extract the file path using split
str2=str1.split("g_img={url: \"")[1]
str3=str2.split(".jpg")[0]
os.system("wget -O daily_im.jpg http://www.bing.com" + str3 + ".jpg") # donwload the daily image 
```

它会下载本地目录中名为daily_im.jpg 的每日必应背景。您可以将所有内容放在 script.py 中并以编程方式启动它。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2018-05-29T14:54:20.813

**编辑 09/27/2018：** [http](http://www.istartedsomething.com/bingimages) ://www.istartedsomething.com/bingimages响应 404 数周。它可能已经不存在了。:-(

您可以使用**[istartedsomething.com 的 Bing Image Archive](http://www.istartedsomething.com/bingimages)**。这是一个非官方的 Bing Image Archive。它使用一个自制端点，有助于检索图像：

```
GET /bingimages/getimage.php?id=<image_id> 
```

`id`是一个包含图像发布日期和发布国家的字符串。`id`必须符合以下格式：`YYYYMMDD-xx`，其中：

*   `YYYY`是年份，用四位数字书写。
*   `MM`是月份，用两位数书写。
*   `DD`是日期，用两位数书写。
*   `xx`是国家指标。[Bing Image Archive](http://www.istartedsomething.com/bingimages)目前支持以下国家：
    *   `au`： 澳大利亚。
    *   `br`： 巴西。
    *   `ca`： 加拿大。
    *   `cn`： 中国。
    *   `de`: 德国。
    *   `fr`： 法国。
    *   `gb`： 大不列颠。
    *   `jp`： 日本。
    *   `nz`： 新西兰。
    *   `uk`： 英国。
    *   `us`： 美国。

如果它有一些信息，它会返回一个有用的 JSON 对象，如果它没有任何信息，它会返回 false。

**示例 1：** *检索 2014 年 5 月 24 日在新西兰发布的 Bing 每日图片*

图片 ID 是`20140524-nz`因为所需图片发布于 2014 年 5 月 24 日，发布于新西兰，其国家指标为`nz`。

[http://www.istartedsomething.com/bingimages/getimage.php?id=20140524-nz](http://www.istartedsomething.com/bingimages/getimage.php?id=20140524-nz)返回以下 JSON 片段：

```
{
    "url":"\/az\/hprichbg\/rb\/LakeMagadiFlamingos_ROW9792683076_1366x768.jpg",
    "region":"nz",
    "date":"2014-05-24",
    "copyright":"Flamingos take flight, Lake Magadi, Kenya (\u00a9 Bobby Haas\/Getty Images)(Bing New Zealand)",
    "imageurl":"http:\/\/www.istartedsomething.com\/bingimages\/cache\/LakeMagadiFlamingos_ROW9792683076_1366x768.jpg",
    "hotspots":[],
    "video":[]
} 
```

您可以使用该`imageurl`字段或`url`（Bing URL 路径）字段来获取您的图像。

**示例 2：** *检索 1998 年 7 月 12 日在法国发布的 Bing 每日图像*

图片 ID 是`19980712-fr`因为所需图片发布于 1998 年 7 月 12 日，发布于法国，其国家标志为`fr`。

[http://www.istartedsomething.com/bingimages/getimage.php?id=19980712-fr](http://www.istartedsomething.com/bingimages/getimage.php?id=19980712-fr)返回`false`，因为 1998 年 7 月 12 日法国没有 Bing 每日图像（此时 Bing 甚至不存在）。**

# ruby-on-rails - 调试器-linecache 安装错误

> ID：10639919
> 
> 赞同：8
> 
> 时间：2012-05-17T16:45:28.843
> 
> 标签：ruby-on-rails, ruby, gem

我尝试安装 debugger-linecache gem，但出现以下错误，

```
Building native extensions.  This could take a while...
....
ERROR:  Error installing debugger-linecache:
        ERROR: Failed to build gem native extension.

        /usr/bin/ruby extconf.rb
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
        --with-opt-dir
        --without-opt-dir
        --with-opt-include
        --without-opt-include=${opt-dir}/include
        --with-opt-lib
        --without-opt-lib=${opt-dir}/lib
        --with-make-prog
        --without-make-prog
        --srcdir=.
        --curdir
        --ruby=/usr/bin/ruby
extconf.rb:2:in `require': no such file to load -- debugger/ruby_core_source (LoadError)
        from extconf.rb:2

Gem files will remain installed in /usr/lib/ruby/gems/1.8/gems/debugger-linecache-1.1.1 for inspection.
Results logged to /usr/lib/ruby/gems/1.8/gems/debugger-linecache-1.1.1/ext/trace_nums/gem_make.out 
```

我已经做了：

```
sudo gem install debugger-ruby_core_source 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T06:14:47.243

我首先安装了依赖项：

```
gem install debugger-linecache --version 1.1.2 
```

之后，我运行了`bundle install`命令，它运行良好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T03:04:18.073

我发现问题在于，因为我在 fedora 上，所以我使用的是 ruby​​ 1.8.3，这似乎是个问题。现在升级到 ruby​​ 1.9.3，问题解决了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T18:40:48.473

dannynjust 说了什么，并且：

`git clone git://github.com/cldwalker/debugger-ruby_core_source.git && sudo rm -rf /var/lib/gems/1.8/gems/debugger-ruby_core_source-1.1.7 && sudo mv debugger-ruby_core_source /var/lib/gems/1.8/gems/debugger-ruby_core_source-1.1.7`

# installation - 如何为 Windows 7 安装 PyQT 的步骤？

> ID：10639920
> 
> 赞同：12
> 
> 时间：2012-05-17T16:45:32.367
> 
> 标签：installation, pyqt

我没有遇到任何分步指南（我发现的那些已经过时，而关于河岸计算的一个太混乱了），我想知道是否可以得到任何帮助。到目前为止，我一直在追逐野鹅

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-17T16:50:07.307

转到[下载页面](http://www.riverbankcomputing.com/software/pyqt/download)并在那里安装可执行文件。这应该可以帮助您入门。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T13:47:02.290

不幸的是，二进制安装程序不再可用（在撰写本文时）。看起来你已经安装了 QT SDK，然后构建了 PyQT

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-10T22:03:34.167

实际上，下载链接所在的页面非常混乱。pyqt4 的最新版本是 4.10。大约在页面的中间，有一些似乎是“旧”版本（即 4.8 ）。我注意到，当我单击该可执行文件的链接时 - 它实际上提供了 4.10，这是最新的完全自动安装。

# matlab - 如何在matlab中找到最接近给定向量的向量？

> ID：10639925
> 
> 赞同：0
> 
> 时间：2012-05-17T16:46:00.667
> 
> 标签：matlab

我在matlab中有一组n维代表向量。我必须根据接近度将一组训练向量中的向量分组到由代表向量表示的组。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T16:56:03.560

You can use [`dsearchn`](http://www.mathworks.com/help/techdoc/ref/dsearchn.html) to find which representative is closest to each point. I would recommend trying the version that doesn't involve a triangulation matrix first. If the memory or CPU performance isn't good enough, look into the triangulation stuff.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T07:05:12.013

如果 n 维向量是指 n 维点的有序列表（这是我对您想要的内容的理解），那么我过去使用平均最近距离完成了此操作。基本上对于向量 1 上的每个点，找到到向量 2 上的点的最小距离。两个向量之间的距离就是所有这些距离的平均值。然而，这不是对称的，因此您应该对向量 2 上的每个点执行相同的过程，找到到向量 1 的最小距离，然后将这两个平均值聚合为最小值、最大值或平均值等...

这是我使用循环制作的一些代码（用于 3d 向量）：

```
function mcd = MCD(fiber1, fiber2, option)

%

%remove NaNs
fiber1(find(isnan(fiber1),1):length(fiber1),:) = [];
fiber2(find(isnan(fiber2),1):length(fiber2),:) = [];

dist = 0;

for k = 1:length(fiber1)

    D = [];

    for j = 1:length(fiber2)
        D = [D distance(fiber1(k,:),fiber2(j,:))];
    end;

    dist = dist + min(D);

end;

mcd = dist / length(fiber1);

if nargin > 2

    dist = 0;

    for k = 1:length(fiber2)

        D = [];

        for j = 1:length(fiber1)
            D = [D distance(fiber2(k,:),fiber1(j,:))];
        end;

        dist = dist + min(D);

    end;

    mcd2 = dist / length(fiber2);

    if strcmp(option,'mean')
        mcd = mean([mcd mcd2]);
    elseif strcmp(option,'min')
        mcd = min([mcd mcd2]);
    end;
end; 
```

但这对我来说太慢了。所以这是一个非常快的矢量化（但难以理解）版本：

```
function mcd = MCD(fiber1, fiber2, option, sampling)

%MCD(fiber1, fiber2)
%MCD(fiber1, fiber2, option)
%MCD(fiber1, fiber2, option, sampling)

%remove NaNs
fiber1(find(isnan(fiber1),1):length(fiber1),:) = [];
fiber2(find(isnan(fiber2),1):length(fiber2),:) = [];

%sample the fibers for speed. Each fiber is represented by "sampling"
%number of points.

if nargin == 4

    freq = round(length(fiber1)/sampling);
    fiber1 = fiber1(1:freq:length(fiber1),:);
    freq = round(length(fiber2)/sampling);
    fiber2 = fiber2(1:freq:length(fiber2),:);

end;

%reshape to optimize the use of distance() for speed
FIBER2 = reshape(fiber2',[1,3,length(fiber2)]);
FIBER1 = reshape(fiber1',[1,3,length(fiber1)]); %this is only used in the symmetrical case, i.e when 'min' or 'mean' option is called

%reshape amd tile filber 1 so as to eliminate the need for two nested for
%loops thus greatly increasing the computational efficiency. The goal is to
%have a 4D matrix with 1 row and 3 columns. Dimension 3 is a smearing of
%these columns to be as long as fiber2 so that each vector (1x3) in fiber1
%can be placed "on top" as in a row above the whole of fiber2\. Thus dim 3
%is as long as fiber2 and dim 4 is as long as fiber1.

fiber1 = reshape(fiber1',[1,3,length(fiber1)]); %1x3xF1
fiber1 = repmat(fiber1,[length(FIBER2),1,1]); %F2x3xF1
fiber1 = permute(fiber1,[2,1,3]); %3xF2xF1
fiber1 = reshape(fiber1,[1,3,length(FIBER2),length(FIBER1)]);%1,3,F2,F1

mcd = mean(min(distance(fiber1, repmat(FIBER2,[1,1,1,length(FIBER1)]))));

if nargin > 2

    fiber2 = reshape(fiber2',[1,3,length(fiber2)]); %1x3xF1
    fiber2 = repmat(fiber2,[length(FIBER1),1,1]); %F2x3xF1
    fiber2 = permute(fiber2,[2,1,3]); %3xF2xF1
    fiber2 = reshape(fiber2,[1,3,length(FIBER1),length(FIBER2)]);%1,3,F2,F1

    mcd2 = mean(min(distance(fiber2, repmat(FIBER1,[1,1,1,length(FIBER2)]))));

    if strcmp(option,'mean')
        mcd = mean([mcd mcd2]);
    elseif strcmp(option,'min')
        mcd = min([mcd mcd2]);
    end;
end; 
```

这是我在上面使用的 distance() 函数，在我的例子中，我使用了欧几里得距离，但你可以将它调整为最适合你的方法，只要它可以接受两个向量：

```
function Edist = distance(vector1,vector2)

%distance(vector1,vector2)
%
%provides the Euclidean distance between two input vectors. Vector1 and
%vector2 must be row vectors of the same length. The number of elements in
%each vector is the dimnesionality thereof. 

Edist = sqrt(sum((diff([vector1;vector2])).^2)); 
```

# sql - sql查询不显示重复记录

> ID：10639926
> 
> 赞同：1
> 
> 时间：2012-05-17T16:46:01.687
> 
> 标签：sql, sql-server

```
Customers
id,name,orderid
----------------------
1,Ted, 1
2,Jen, 2

Orders
id,prodname
----------------------
1,widgetA
1,widgetC
2,widgetB
2,widgetA

desired results
name, prodname
----------------------
Ted, widgetA
' ', widgetC
Jen, widgetB
' ', widgetA 
```

基本上，如果她有不止一种产品，我不想重复客户的名字。有没有办法做到这一点？

**解决方案：**

```
Select 
    (CASE WHEN myrow=1 THEN Name ELSE ' ' END) AS Name,
    product
From
(
    Select 
        ROW_NUMBER() OVER (PARTITION BY c.Name ORDER BY c.Name) AS myrow,     
        o.productname AS product 
    FROM 
        Customers c JOIN 
        Orders o ON c.orderid = o.id 
) T1

Order By Name 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T16:54:22.550

首先，这里有歧义。如果有两个 Ted，你期望会发生什么？

很可能有一种方法可以使用 SQL 来执行此操作，尽管它可能会因您运行的服务器而异。不过，我强烈建议不要这样做。您将使用单个连接（假设您已正确设置索引）将简单而有效的查询变成过于复杂的东西。

您真正想要的应该在显示器/消费者端完成。你无疑会得到一个解决方案，但我会选择标准加入。我还将客户 ID 添加到输出中以避免上述歧义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T17:08:24.770

要回答您的问题，尽管有充分的理由使用不同的解决方案；如果您使用的是 sql server，请查看“row_number()”。我不使用 SQL Server，但它可能看起来像这样：

```
Select
    ROW_NUMBER() OVER (ORDER BY c.Name) AS myrow,
    if(myrow=1,name,' ') AS name,
    o.productname AS product
FROM
    Customers c JOIN
    Orders o ON c.orderid = o.id 
```

# android - 如何将文件中的字符串与输入字符串进行比较？（安卓）

> ID：10639929
> 
> 赞同：1
> 
> 时间：2012-05-17T16:46:15.690
> 
> 标签：android, string, compare, text-files

问题是我不知道如何将这些构建在一起（代码示例）。我是 Android 编程新手，不知道如何**从文本文件中读取**并**与**输入**字符串**进行比较。现在我到目前为止：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Button btn = (Button) findViewById(R.id.bBtn);
    final EditText input = (EditText) findViewById(R.id.edittext);
    TextView display = (TextView) findViewById(R.id.tView);

    parbaudesPoga.setOnClickListener(new View.OnClickListener() {

        public void onClick(View V) {
            String check = input.getText().toString();
            if (check.contentEquals("word")) {
                Toast.makeText(getApplication(), "True",
                        Toast.LENGTH_SHORT).show();

            } else {
                Toast.makeText(getApplication(),
                        "False", Toast.LENGTH_SHORT)
                        .show();
            }
        }
    });
    InputStreamReader is = new InputStreamReader(this.getResources()
            .openRawResource(R.raw.words));
    BufferedReader reader = new BufferedReader(is);
    StringBuilder finalText = new StringBuilder();
    String line;
    try {
        while ((line = reader.readLine()) != null) {
            finalText.append(line);
        }
    } catch (IOException e) {
        e.printStackTrace();
    }
    display = (TextView) findViewById(R.id.bBtn);
    display.setText(finalText.toString()); 
```

} }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T17:19:19.670

好吧，在您设置“检查”之后，在点击侦听器中调用一个方法进行比较。您可以“检查”实例变量或将其作为参数传递给方法。

您可以在方法中读取文件，并在获得文本字符串后立即进行比较，或者在之前的某个其他时间读取它并将文本字符串存储在实例变量中。

# c# - 为什么这个简单的代码不起作用（ArgumentOutOfRangeException）

> ID：10639930
> 
> 赞同：0
> 
> 时间：2012-05-17T16:46:18.107
> 
> 标签：c#, list, while-loop

```
int i = 0;
int x = 10;
List<int> group = new List<int>();

while (i < x)
{
    RichTextBoxShowTafel.AppendText(Convert.ToString(group[i]));
    i++;
} 
```

为什么这不起作用？我想显示名为“组”的列表的前 10 个数字。

编辑：我实际上想创建变量并连续打印它......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-17T16:48:10.707

您永远不会在 group 变量中放入任何内容。您只实例化了一个空列表。

你最好这样做：

```
foreach (int item in group)
{
  RichTextBoxShowTafel.AppendText(item.ToString());
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T16:48:54.350

因为组是空的？由于它没有元素，因此您无法访问 group[0]，这是您在第一次迭代中所做的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T16:53:46.407

You should add elements in the list before you try to get them. The is the reason you got ArgumentOutOfRangeException. You can avoid the exception by adding element first.

```
 int i = 0;
    int x = 10;
    List<int> group = new List<int>();

    while (i < x)
    {
        group.Add(i);
        RichTextBoxShowTafel.AppendText(Convert.ToString(group[i]));
        i++;
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-17T16:51:31.680

这是因为`group`是空的！

当你的循环第一次执行然后`i = 0`你尝试`Convert.ToString(groups[i])`它总是会失败，因为没有`0`in 的索引`group`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T17:02:25.553

如果您希望`group`填充数字，则必须自己执行此操作。声明和初始化它`List<int> group = new List<int>();`只会创建它。里面什么都没有。如果您想尝试将变量放入其中，可以执行以下操作：

```
for(int j = 0; j < 10; j++)
{
   group.Add(j);
} 
```

# redirect - Nginx 将 domain.com/blog/posts 重定向到 sub.domain.com/blog/posts

> ID：10639932
> 
> 赞同：1
> 
> 时间：2012-05-17T16:46:22.623
> 
> 标签：redirect, nginx, subdomain, blogs

又一个 nginx 重定向问题。

我一直在尝试重定向`domain.com/blog/post-1`，`/blog/post-2`到`sub.domain.com/blog/post-1`等。

任何指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T19:53:14.597

如果您不想在没有子域的情况下在 domain.com 上提供任何内容，请添加此块：

```
server {
    server_name domain.com;
    return 301 $scheme://sub.domain.com$request_uri;
} 
```

如果您想以某种方式使用它，请将其添加到您的 domain.com 服务器块：

```
location /blog {
    rewrite     ^ http://sub.domain.com$request_uri? permanent;
} 
```

当然，在任何情况下，您都需要捕获此请求的 sub.domain.com 服务器块。

# html - 如何设置线之间的间隙

> ID：10639934
> 
> 赞同：1
> 
> 时间：2012-05-17T16:46:32.067
> 
> 标签：html

我需要为每个行`<br>`标签设置空间，占用空间很大。

```
<font color="white">
ani <br> </br>
hna <br> </br>
Raj <br> </br>
Parya <br> </br>
Sith  <br> </br>
Sududa <br> </br>
</font> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T16:49:18.620

为什么不`<p>`为每一行使用标签而不是 double `<br>`s？或者使用`<ul>`? 您将对布局有更多的控制权。

但是如果你必须使用`<br>`use[`line-height`](http://reference.sitepoint.com/css/line-height)并且每行只有一个`<br>`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T16:51:19.080

在我看来，您正在尝试关闭每个`<br>`标签，这是不可能的，而是您正在创建两个换行符。删除其中之一，你会得到正常的换行符：http: [//jsfiddle.net/LMXNY/](http://jsfiddle.net/LMXNY/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T16:47:54.390

```
<pre style="color:white">
ani 
hna 
Raj 
Parya 
Sith 
Sududa
</pre> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-17T16:49:27.520

您可以`line-height`在 CSS 中使用属性。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-17T16:50:50.520

[http://jsfiddle.net/QFHPh/](http://jsfiddle.net/QFHPh/)

```
<html>
<head>
<style>
    p {
       line-height: 1.5em;        
    }
</style>
</head>
<body>
    <p>
        this is <br />
        a test<br />
        of good text spacing
    </p>
</body>
</html> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-17T16:53:00.480

天哪，如果它看起来像一个列表并且行为像一个列表，它实际上可能是一个列表！更改列表项的下边距以更改项目之间的间距。

```
<style type="text/css">
  ul {
    color: white;
  }

  li {
    margin-bottom: 6px;
  }
</style>
<ul>
  <li>ani</li> 
  <li>hna</li> 
  <li>Raj</li> 
  <li>Parya</li> 
  <li>Sith</li> 
  <li>Sududa</li>
</ul> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-17T17:48:08.210

首先，你不使用

```
<br> </br> 
```

它只是：

```
<br /> 
```

然后在你的问题上，使用以下

```
<p style="line-height: 20px;">ani
</p><p style="line-height: 20px;">hna
</p><p style="line-height: 20px;">Raj 
</p><p style="line-height: 20px;">Parya 
</p><p style="line-height: 20px;">Sith
</p><p style="line-height: 20px;">Sududa
</p> 
```

增加/减少行高（'20'px）的数字，分别增加/减少行间距。

# ios - 如何以编程方式检索 UIScrollView？（iOS 5 故事板）

> ID：10639946
> 
> 赞同：0
> 
> 时间：2012-05-17T16:47:11.963
> 
> 标签：ios, uiview, uiviewcontroller, uiscrollview, storyboard

我只是在一个（使用情节提要）`UIScrollView`之上添加了一个。`UIView`如何以`UIScrollView`编程方式检索？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T16:55:43.627

`@property (weak, nonatomic) IBOutlet UIScrollView *myScrollView;`

Then link it in with IB

# php - MySQL 服务器已消失 (PHP)

> ID：10639951
> 
> 赞同：3
> 
> 时间：2012-05-17T16:47:29.917
> 
> 标签：php, mysql, ini

所以，我收到以下错误：

```
Error Number: 2006
MySQL server has gone away 
```

我几乎可以保证这是因为脚本需要花费数十亿分钟才能运行，然后在脚本中间运行更多查询。考虑到这是一个仅限管理员使用的大型文件编写脚本，这是意料之中的。（并且完全可以接受）我认为 MySQL 连接正在关闭，因为 PHP / MySQL / 某些东西没有保持打开状态。但是，我一生都无法弄清楚如何阻止这种超时发生！

我的 PHP 脚本顶部有以下内容，但它似乎没有帮助。

```
ini_set('default_socket_timeout', -1);
ini_set('max_execution_time', -1);
ini_set('memory_limit', -1);
ini_set('mysql.connect_timeout', -1); 
```

知道如何解决这个问题吗？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T17:01:23.187

我认为一个可行的选择是`mysql_connect`每次打电话之前`mysql_query`。这确保在每次查询之前都会有一个实时连接。

但更好的方法是首先检查连接状态，然后在必要时重新连接。[`mysql_ping`](http://php.net/manual/en/function.mysql-ping.php)对于检查连接状态很有用，因此您可以使用它来检查是否需要重新连接。@galador 的[答案](https://stackoverflow.com/a/6231453/240901)中的示例代码。

感谢@diolemo 和@galador。

# ruby-on-rails - 绑定端口 80 后，如何让 Rails 服务器放弃 root 权限？

> ID：10639957
> 
> 赞同：1
> 
> 时间：2012-05-17T16:47:47.033
> 
> 标签：ruby-on-rails, thin

所以我想在我的开发环境中切换到端口 80，但是 Rails 服务器让这变得困难。

`rvmsudo bundle exec rails server thin -p 80`工作正常，但是在我的环境中乱扔 sass 缓存和其他临时文件，所有这些都是 root 权限的，这意味着我几乎必须以 root 身份做所有事情，这是一件非常糟糕的事情。

`thin start -p 80 -u me -g staff -e development`不工作；Thin 似乎在绑定端口之前放弃了权限（？！）。即使它确实有效，但这也行不通；`rails server`为开发提供更丰富的日志记录。

需要明确的是，我很清楚绑定端口 80 需要 root。理想的解决方案是将权限降低到我在绑定端口 80 后指定的用户/组，就像过去 20 年中的每台服务器都能够做到的那样。这真的不可能`rails server`吗？我找不到任何关于它的文档。

# wpf - 如何在不丢失全局样式集的情况下使用 StyleSelector？

> ID：10639958
> 
> 赞同：0
> 
> 时间：2012-05-17T16:47:47.970
> 
> 标签：wpf, xaml, wpf-controls, telerik

假设我为 ItemsContainer 控件设置了一个全局样式，并且该样式在运行时应用得很好。现在我需要根据某些条件为每一行绘制 Row 背景。为此，我决定使用 RowStyleSelector。

```
<RadTreeListView RowStyleSelector="{StaticResource ActivityRowStyleSelector}" />

<Style x:Key="xxxTreeListViewStyle" TargetType="telerik:TreeListViewRow">
    <Setter Property="Background" Value="#FFFFE1C4" />
</Style>

<local:xxxRowStyleSelector x:Key="xxxRowStyleSelector"
                           FailureStyle="{StaticResource xxxTreeListViewStyle}"
                           .../> 
```

但这会覆盖我为行设置的全局样式，我只想将背景属性更改为现有样式。

另一个问题是：我如何将此更改应用于特定单元格，而不是行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T18:08:57.130

您可以使用[Style.BasedOn](http://msdn.microsoft.com/en-us/library/system.windows.style.basedon.aspx)属性从另一种样式“继承”一种样式。像这样使用它（`RowGlobalStyle`您之前创建的全局样式的名称在哪里）：

```
<Style x:Key="xxxTreeListViewStyle" TargetType="telerik:TreeListViewRow"
    BasedOn="{StaticResource RowGlobalStyle}">
    <Setter Property="Background" Value="#FFFFE1C4" />
</Style> 
```

# sql - Postgres 动态查询功能

> ID：10639963
> 
> 赞同：15
> 
> 时间：2012-05-17T16:48:09.630
> 
> 标签：sql, postgresql, plpgsql

我需要创建一个函数来运行查询并返回结果，表名和列名是给函数的参数。我目前有这个：

```
CREATE OR REPLACE FUNCTION qa_scf(tname character varying, cname character varying)
RETURNS SETOF INT AS
$BODY$
BEGIN
RETURN QUERY SELECT * FROM tname WHERE cname !='AK' AND cname!='CK';
END;
$BODY$
LANGUAGE plpgsql VOLATILE
COST 100
ROWS 1000; 
```

运行时，这给了我错误“关系'tname'des不存在”。我是为 Postgres 创建函数的新手，因此不胜感激。我觉得 return int 是错误的，但我不知道还有什么可以让它返回返回行的所有列。谢谢！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-17T17:23:59.737

您不能使用变量代替这样的标识符。您需要使用动态查询来完成。它看起来像这样：

```
EXECUTE 'SELECT * FROM ' || quote_ident(tname) 
        || ' WHERE ' || quote_ident(cname) || ' NOT IN (''AK'',''CK'');'
INTO result_var; 
```

如果您使用的是 PostgreSQL 9.1 或更高版本，则可以使用[format() 函数](https://stackoverflow.com/a/13289939/398670)，它可以更轻松地构建此字符串。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-05-17T17:50:58.900

如果不动态构造字符串以作为动态语句执行，则无法将表名和列名指定为参数或变量。[Postgres 有关于执行动态语句](http://www.postgresql.org/docs/current/static/plpgsql-statements.html#PLPGSQL-STATEMENTS-EXECUTING-DYN)的优秀介绍文档。`quote_ident()`用or正确引用标识符和文字很重要`quote_literal()`。[format()](http://www.postgresql.org/docs/current/static/functions-string.html#FUNCTIONS-STRING-OTHER)函数有助于清理动态 sql 语句构造。由于您将函数声明为 return `SETOF INTEGER`，因此您应该选择所需的整数字段，而不是`*`.

```
CREATE OR REPLACE FUNCTION qa_scf(tname text, cname text)
RETURNS SETOF INTEGER AS
$BODY$
BEGIN
  RETURN QUERY EXECUTE format(
    'SELECT the_integer_field FROM %I WHERE %I NOT IN (%L,  %L)',
                                   tname,   cname,    'AK', 'CK'
  );
END;
$BODY$
LANGUAGE plpgsql; 
```

# c - 程序突然终止时保持活动的套接字

> ID：10639967
> 
> 赞同：0
> 
> 时间：2012-05-17T16:48:19.913
> 
> 标签：c, sockets, visual-c++, winsock

我正在使用标准的 WinSock 函数进行套接字通信，现在假设我创建了一个套接字并且我的程序突然终止了套接字是否有机会保持活动状态？

我尝试了一个小例子，第一次调用`socket`返回的 API `4986`，在突然终止可执行文件后，第二次调用`socket`返回的 API`4946`

但是我仍然觉得如果没有关闭套接字，它会在一段时间内保持活动状态。

请帮我澄清我的疑问

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T17:02:18.823

在 linux 机器上，如果你用一个程序打开一个套接字，然后不干净地关闭程序，即崩溃它，套接字将保持打开状态。在这种情况下，操作系统会在经过一段时间后清理这些绑定的套接字（我不确定它有多长，我假设它指定了操作系统中的某个位置，它不到 10 分钟）。

[http://compgroups.net/comp.os.ms-windows.programmer.win32/bind-error-after-crash-ho/368539](http://compgroups.net/comp.os.ms-windows.programmer.win32/bind-error-after-crash-ho/368539) 我认为这意味着 WinSock 在您崩溃或忘记关闭它们后仍然保持打开状态与您的应用程序。我不确定 Windows 如何处理这些打开的套接字，但我推断它类似于 linux 并在一段时间后关闭它们

# c++ - link.exe 是否与 ld 的“--wrap”选项等效？

> ID：10639968
> 
> 赞同：2
> 
> 时间：2012-05-17T16:48:22.330
> 
> 标签：c++, linker

作为参考，我正在寻找与此行为类似的东西：

> --wrap=symbol 对符号使用包装函数。任何未定义的符号引用都将解析为“__wrap_symbol”。任何对“__real_symbol”的未定义引用都将被解析为符号。

link.exe 是否存在这种情况？我没有在 MSDN 链接器页面上看到任何突出的内容。

编辑：我的开发环境不支持 DLL，因此仅 DLL 的解决方案在这里无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T09:25:28.920

棘手但可能适用于 DLL。您的 DLL 应该实现`wrap_symbol`并链接到一个`.DEF`将其重命名为`symbol`. 您可以在 DLL 中调用原始函数，因为稍后会`symbol()`重命名。`wrap_symbol`

# php - 从远程站点连接到 localhost

> ID：10639973
> 
> 赞同：0
> 
> 时间：2012-05-17T16:48:48.367
> 
> 标签：php

我有两个网站。一个是远程（在线），另一个是本地主机（在我的开发人员机器上）。

`XXX.XXX.XXX.XXX`专用 IP 地址和 localhost 机器上的远程站点是公共 IP `YYY.YYY.YYY.YYY`。远程站点是像任何其他互联网站点一样在线运行的站点。

远程和本地机器都在运行 mysql db 和 PHP。

当访问者访问我的网站时，我需要让远程站点（在互联网上，IP 地址`XXX.XXX.XXX.XXX`）连接到我的本地计算机（使用公共 IP ）。`YYY.YYY.YYY.YYY`

如何使用 PHP 从远程网站建立到本地主机的连接？

请注意，我要求与将本地计算机连接到远程计算机的正常做法相反。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T12:17:46.323

您需要在路由器上配置端口转发或 DMZ。端口 80 上的端口转发可能是最简单和更安全的（它将阻止连接到您的 PC 的其他端口上的网络流量，否则 DMZ 会允许）。

设置端口转发的过程与路由器到路由器不同，但在路由器的管理面板中应该相对容易找到。找到您的 PC 的私有 IP，并在路由器的配置中进行设置，以便端口 80 上的所有请求都转发到 PC 的内部 IP。

# jquery - jquery ajax 数组为空

> ID：10639975
> 
> 赞同：0
> 
> 时间：2012-05-17T16:48:55.377
> 
> 标签：jquery

我不知道为什么在成功调用 ajax 后结果数组为空。我肯定是从添加到数组中的源 url 取回数据，但返回结果语句中的结果为空。

谢谢你的帮助。

```
 function locationSearch(loc) {
    var result = [];
    $.ajax({
        data: 'q=description:' + loc + '*&wt=json&json.wrf=?&fl=*',
        url: 'http://deviis:8080/Locations/select/',
        aSync: false,
        success: function (data) {
            result.push({ value: "Any", data: "*" });
            $.each(data.response.docs, function (i, item) {
                result.push({ value: item.description, data: item.id });                    
            });               
        }
    });
    return result;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T16:52:59.387

你有`return result;`ajax函数之外的地方`success`，所以你不能得到结果。因为，获取服务器响应需要一些时间，但在该`locationSearch()`函数返回`result`空数组之前。

**AJAX 中的 A 代表异步。**

你可以试试这个：

```
success: function (data) {
    result.push({ value: "Any", data: "*" });
    $.each(data.response.docs, function (i, item) {
        result.push({ value: item.description, data: item.id });                    
    }); 
    console.log(result);              
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T16:54:01.830

尝试在构建后立即返回数组 shomehow。

ajax 请求可能需要更长时间，并且您在请求完成之前返回空数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T16:55:49.273

您可能想尝试在成功回调中执行返回工作。始终注意 javascript 编程中的闭包。

John resig 对这篇[文章](https://groups.google.com/group/jquery-dev/browse_thread/thread/40d0e3def47148a0?pli=1)的回答应该会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-13T08:07:19.540

从 jQuery 1.5 开始，您现在可以使用*延迟承诺*，而不是使用 'success: ' ，它允许使用诸如 .done(); 之类的函数异步处理此请求。

请参阅：[http ://api.jquery.com/category/deferred-object/](http://api.jquery.com/category/deferred-object/)

此外，如果您从单独的脚本文件调用，您将希望回显结果而不是返回它。据我所知，这不是你在做什么，但它会导致同样的问题，所以把它留给其他可能会发现这个问题的人。

# php - 为什么这个查询异常长？

> ID：10639976
> 
> 赞同：0
> 
> 时间：2012-05-17T16:49:04.157
> 
> 标签：php, mysql, time

我正在计时网站“初始化”代码的各个部分（包括验证用户是否登录、连接到数据库、导入功能......）

此查询目前独自占用了总初始化时间的一半以上：

```
$sql = "update `users` set `lastclick`=now(),".(substr($_SERVER['PHP_SELF'],0,6) == "/ajax/" ? "" : " `lastactive`=now(),")." `lastip`='".addslashes($_SERVER['REMOTE_ADDR'])."' where `id`=".$userdata['id']; 
```

生成查询根本不需要时间，问题在于运行。示例结果查询：

```
update `users` set `lastclick`=now(), `lastactive`=now(), `lastip`='192.168.0.1' where `id`=1 
```

很简单的查询，对吧？我现在是服务器上唯一的用户，实际上没有其他任何东西在运行。那么，为什么一个简单的更新比连接到数据库、`SELECT`首先读取用户数据、验证 cookie 和定义一堆功能组合起来要花费更多的时间呢？

（我只是尝试用`now()`文字值替换，但这并没有什么区别——事实上它第一次花费了 13 毫秒而不是 4 毫秒......）

* * *

**编辑**：根据要求：

```
explain select * from  `users` where `id`=1
1 row returned

id select_type table type  possible_keys key     key_len ref   rows Extra
1  SIMPLE      users const PRIMARY       PRIMARY 4       const 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T17:06:48.790

解开了我自己的谜团。原来正在更新的字段之一 ( `lastactive`) 在索引中，而缓慢来自重建该索引。

由于唯一可能使用该索引的时间是更新在线用户列表，并且仅在每个设定的时间间隔由 cron 发生，所以我删除了索引，现在查询运行得快了很多。

感谢那些试图提供帮助的人——你确实间接地帮助我找到了问题！

# sql - 带有子查询的 SQL 查询

> ID：10639981
> 
> 赞同：1
> 
> 时间：2012-05-17T16:49:27.690
> 
> 标签：sql, oracle, subquery

我需要检索与 6 或 7 号玩家居住在同一街道和城镇的所有玩家的玩家编号、姓名、街道和城镇；

我不确定如何编写 SQL 查询，我想我需要在 WHERE 子句中有一个子查询，但不知道该怎么做。

这是我想出的，但目前我无法测试它

```
SELECT playerNo, name, street, town
FROM Players
WHERE street IN ( SELECT street, playerNo
                  FROM Players
                  WHERE playerNo IN (6,7));
AND town IN (SELECT town, playerNo
             FROM Players
             WHERE playerNo IN (6,7)); 
```

应该兼容Oracle 10g

感谢所有回复的人！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T17:03:07.017

您没有说明您的 DBMS，所以这是 ANSI SQL 解决方案（适用于 Oracle、PostgreSQL、DB2、Teradata、MySQL 以及可能还有很多其他解决方案）：

```
SELECT playerNo, name, street, town
FROM Players
WHERE (street, town) IN (SELECT street, town
                         FROM Players
                         WHERE playerNo IN (6,7)); 
```

`IN`关于运营商的旁注：

您的表达式`town IN (SELECT town, playerNO ...`无效，因为子选择必须与运算符左侧的列数完全相同`IN`。在你的情况下，你必须写`town IN (SELECT town FROM ...)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T16:51:53.903

这样的事情应该可以解决问题：

```
select t.playerNumber, t.name, t.street, t.town
from tablename t
inner join (select street, town from tablename where playerNumber in (6,7)) aux on aux.street = t.street and aux.town = t.town 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T17:05:17.543

```
SELECT p1.playerNo, p1.name, p1.street, p1.town
FROM Players AS p1
INNER JOIN Players AS p2 ON p2.street = p1.street AND p2.town = p1.town
WHERE p2.playerNo IN (6,7) 
```

通常最好避免子查询，因为数据库优化器无法“看到括号内部”。

# transactions - 云环境中的数据操作

> ID：10639985
> 
> 赞同：1
> 
> 时间：2012-05-17T16:49:42.980
> 
> 标签：transactions, azure, amazon-s3, cloud, icloud

我对在云存储服务中访问和处理数据有一些疑问。

1.是否有任何通用 API 可用于为主流云存储提供商（Amazon s3、Google 云存储、Windows Azure 编写应用程序。请指出我在此列表中遗漏的提供商。我只专注于企业域，而不是个人存储）

2.现在是sdk部分。如果我想编写一个在 iCloud 中处理数据的应用程序（让我们说一个 j2ee 应用程序），iCloud sdk 是否为我提供了那种灵活性？

3.云存储服务会为我提供交易支持吗？我的意思是支持ACID属性。或者我必须对此负责？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T07:52:58.137

*   [jClouds](http://www.jclouds.org/)提供了一个很好的存储抽象。它支持许多最常用的云存储提供商，包括 Amazon s3、MS Azure 等。有关存储提供商的列表，请参见此处：[http ://www.jclouds.org/documentation/reference/supported-providers](http://www.jclouds.org/documentation/reference/supported-providers)

以下是如何使用 jClouds 存储上下文：

```
 import static 
        org.jclouds.aws.s3.options.PutObjectOptions.Builder.withAcl;

    // get a context with amazon that offers the portable BlobStore API
    BlobStoreContext context = new BlobStoreContextFactory().
                         createContext("aws-s3", accesskeyid, secretkey);

    // create a container in the default location
    BlobStore blobStore = context.getBlobStore();
    blobStore.createContainerInLocation(null, bucket);

    // add blob
    Blob blob = blobStore.newBlob("test");
    blob.setPayload("test data");
    blobStore.putBlob(bucket, blob);

    // when you need access to s3-specific features,
    // use the provider-specific context
    AWSS3Client s3Client =
         AWSS3Client.class.cast(context.getProviderSpecificContext().getApi());

    // make the object world readable
    String publicReadWriteObjectKey = "public-read-write-acl";
    S3Object object = s3Client.newS3Object();

    object.getMetadata().setKey(publicReadWriteObjectKey);
    object.setPayload("hello world");
    s3Client.putObject(bucket, object, withAcl(CannedAccessPolicy.PUBLIC_READ));

    context.close(); 
```

*   不是真正的 iCloud 专家，但我的印象是它只用于各种苹果产品，而不是一个通用平台，正如之前的回答中提到的那样。
*   云存储服务通常不提供 ACID 属性。您正在寻找的内容听起来更像是一些云数据库服务[——Amazon SimpleDB](http://aws.amazon.com/simpledb/)和[RDS](http://aws.amazon.com/rds/)、MS [SQL Azure](http://www.windowsazure.com/en-us/home/features/sql-azure/)等。您可能可以使用 JDBC 驱动程序来连接其中的一些。但这些不是“存储”服务——它们是在云中运行的数据库，每个都有自己的语义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T17:34:44.643

任何云服务提供商的基础都是使用 REST 接口。您可以使用任何语言来包装 REST 请求，只要该语言支持网络和 PKI 安全基础设施。所有现代语言都有这样的功能。

大多数情况下，任何 SDK 都只是这些 REST 接口的包装器，因此您可以非常轻松地编写编码器和同步或异步方式并获得所需的内容。SDK 只是将工作加速到多方面，与直接使用 REST 相比。这并不意味着您不能直接使用 REST，它只是一个 SDK 可以帮助您连接到特定的云服务。

SDK 是如何实现的以及它提供了什么样的功能，因供应商和他们所拥有的服务而异。您不能使用适用于 Amazon Cloud 的 Windows Azure SDK，因为内部服务连接端点和底层接口都封装在 SDK 本身中。这并不意味着不能创建 SDK 来连接所有云服务提供，而是每个云服务都为其云服务提供个性化的 SDK。

云服务为您的用户提供基础设施和平台来部署他们的应用程序，关于 ACID，您必须处理应用程序级别的工作，但是 ACID 可能是一个完全独立且冗长的讨论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T17:05:39.383

对于问题 1。如果您要询问您列出的所有服务是否共享一个公共 API，没有。它们都使用 REST，这意味着您可以将 JSON 与它们中的任何一个一起使用，但调用将具有不同的名称和可能的语法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T02:21:16.963

关于你的3个问题：

1.  这实际上并不是一个特定的编程问题，更像是对可用产品的调查。我不知道有任何特定的库可以跨所有云提供商提供完全通用的接口。
2.  据我了解，iCloud 用于存储和同步您的 Mac/iPad/iPod 内容，而不是计算平台。
3.  我确信所有云提供商都提供不同的关系和非关系数据存储，每个都有自己的事务支持（或缺乏）。在 Windows Azure 中，除了分布式事务之外，SQL Azure 还提供类似于 SQL Server 的 ACID 支持。Windows Azure 表存储在给定分区内提供原子操作，因此只要将多记录写入写入同一个分区，就可以在一个原子操作中完成。SQL Azure 以及 Windows Azure 存储（blob、表和队列）被认为是持久的，因为存储是三重复制以实现冗余（并且 Windows Azure 存储也是异地复制）。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-19T07:11:26.780

您只能通过 Apple 的适用于 iOs 和 Mac OS X 的 SDK 使用 iClous。我几乎可以肯定您无法从 j2ee 应用程序访问它。

# java - 谷歌应用引擎：如何向连接/断开通道“ping”添加信息？

> ID：10639989
> 
> 赞同：0
> 
> 时间：2012-05-17T16:49:52.657
> 
> 标签：java, google-app-engine, channel

我在谷歌应用引擎中启用了频道存在，所以每当客户端连接/断开频道时我都会收到“ping”。这很棒！然而，这还不够。我希望得到更多的信息。例如：客户端在哪个页面（即客户端看到的uri），或者附加的JS变量。

我在谷歌的教程中没有找到任何提及这一点。我该怎么做，甚至有可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T16:51:39.493

由于技术原因，这是不可能的——生成这些请求的服务器不知道客户端的状态。但是，如果您希望该数据用于连接，则可以在获得 onopen 回调时手动 POST（到不同的 URL）。

# eclipse - 当 Eclipse 从 svn 存储库中检索信息时，最小化 ssh 窗口

> ID：10639991
> 
> 赞同：1
> 
> 时间：2012-05-17T16:50:01.013
> 
> 标签：eclipse, windows-xp, cygwin, subclipse

我在 Windows XP 和 Cygwin 上使用 Subclipse 插件和我们公司的 SVN 存储库运行 Eclipse Indigo。

总的来说，它工作得很好，但是每当我单击远程 SVN 存储库中的文件时，都会为各种 ssh 进程打开六个 cmd 窗口，Subclipse 使用 Cygwin 的 ssh 可执行文件生成。这很烦人，因为它们直接出现在我正在处理的内容前面并窃取光标焦点。

谁能告诉我如何确保在生成这些窗口时将它们最小化以便它们不会干扰？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T17:20:48.963

最好的方法是使用一个 GUI SSH 客户端，比如 TortoiseSVN 附带的 TortoisePlink。我相信另一种选择是从 Cygwin 终端启动 Eclipse。我相信 SSH 客户端随后将与该终端连接，并且不会产生任何额外的窗口。

# linq - 具有多个连接的复杂 Linq 查询

> ID：10639994
> 
> 赞同：0
> 
> 时间：2012-05-17T16:50:09.743
> 
> 标签：linq

我对 Linq 不是很熟悉，我需要创建一个查询来获取以下数据：

表：

**产品**
ID、组 ID
、产品代码
、
特定代码
...

**产品组**
ID、
状态
...

**规则**
ID、
GroupId、
ProductCode、
SpecificCode
...

**参数**：
ProductCode：字符串，
SpecificCode：字符串

**要求**：
1.获取所有ProductGroups where `Status = Active`, which 与至少一个Product 和SpecificCode 参数匹配的Product 相关联。

2.获取与这些组相关的所有规则。

3.过滤掉规则本身没有匹配的Productcode + SpecificCode的规则。

我已经分多个步骤写出来，因为这有助于我理解这个过程。在一个查询中可能有可能 - 我不知道。TBH 我真的不在乎我是否需要多个查询，我只需要它来获得正确的结果集，没有重复（这是我真正苦苦挣扎的地方）。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T17:03:35.920

```
 from pg in ProductGroup        
        where pg.status == "active" 
        select new
        {
        ProductGroup = pg,
        Products = (from p in Product
              && p.GroupId = pg.Id  
              && p.productcode == inputproductcode 
              && p.specificcode == inputspcode).ToList(),

        Rules = pg.Rules.Where(r=>r..productcode == inputproductcode && r.specificcode == inputspcode).ToList()
        } 
```

像这样的东西应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T17:05:02.813

那这个呢？假设您的属性`Products`是`ProductGroups`和`Rules`：

```
var productGroups = (from p in Products
                     join pg in ProductGroups on p.GroupId equals pg.Id
                     where pg.Status = "Active"
                     select new
                            {
                                p.ProductCode,
                                p.SpecificCode,
                                Rules = Rules.Where(r => r.ProductCode == p.ProductCode
                                    && r.SpecificCode == p.SpecificCode).ToList()
                            })
                     .ToList(); 
```

# sql - 我的 SQL CASE 语法有什么问题？

> ID：10639995
> 
> 赞同：1
> 
> 时间：2012-05-17T16:50:09.980
> 
> 标签：sql

我需要帮助编写一些 SQL。我讨厌问这样一个菜鸟问题，但是下面的 SQL 查询有什么问题？

```
select (case when mydate < '2010-1-1' Then '2000-1-1' ELSE mydate) from mytable; 
```

这个想法是我想从 获取`mydate`，`mytable`但如果日期在 2010 年 1 月 1 日之前，我希望语句返回 2000 年 1 月 1 日。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T16:51:58.123

你错过了一个`end`

```
case when mydate < '2010-1-1' Then '2000-1-1' ELSE mydate END 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T16:51:48.037

你`end`最后错过了。

`select (case when mydate < '2010-1-1' Then '2000-1-1' ELSE mydate end) from mytable;`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T16:52:37.230

从 mytable 中选择 mydate 后，您缺少 END （当 mydate < '2010-1-1' Then '2000-1-1' ELSE mydate end 时）；