# StackOverflow 问答 11264000-11264999

# facebook - 如何自定义 facebook 注册插件错误消息的布局

> ID：11264000
> 
> 赞同：0
> 
> 时间：2012-06-29T14:50:17.150
> 
> 标签：facebook, plugins, customization, registration

我在徘徊是否可以自定义 facebook 注册插件布局。

特别是我正在尝试自定义错误消息的布局。

示例：错误密码的默认错误消息是带有一些默认属性（红色、字体、宽度、高度等）的“**自定义消息”。**

如何显示（例如）绿色错误消息？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T16:19:48.710

您不能修改注册插件使用的 CSS。您可以尝试通过使用插件正在使用的相同 CSS 类名并替换您要修改的属性来覆盖 CSS，但不能保证它可以工作。

# iframe - 灯箱中的 iframe 以及如何从主窗口关闭滚动条

> ID：11264001
> 
> 赞同：0
> 
> 时间：2012-06-29T14:50:17.677
> 
> 标签：iframe, scrollbar, lightbox

我的网站上有一个灯箱。这是一个[shadowbox 脚本](http://www.shadowbox-js.com)，它为我打开了一个`iframe`. `iframe`右侧有自己的滚动条。有没有办法从主/顶部窗口关闭滚动条？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T15:08:38.470

也许 a`overflow: visible`或 a `overflow: hidden`may 有效？

CSS 属性指定当`overflow`元素内的内容溢出元素时会发生什么。

[有关更多详细信息，请参阅此 MDN 页面](https://developer.mozilla.org/en/CSS/overflow)

* * *

**更新：** OP已澄清。

你应该使用这样的东西：

```
#your-lightbox-box-which-has-scrollbars-which-you-do-not-want {
    overflow: hidden;
} 
```

# c# - 将 RouteLink 与区域一起使用

> ID：11264002
> 
> 赞同：2
> 
> 时间：2012-06-29T14:50:29.587
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-routing, asp.net-mvc-areas

在我的 MVC 应用程序中，我定义了一个默认路由：

```
routes.MapRoute(
    "Default", // Route name
    "{controller}/{action}/{id}", // URL with parameters
    new { controller = "Home", action = "Index", id = UrlParameter.Optional },
    new []{ "Demo.Controllers" }
); 
```

我创建了一个名为 Admin 的新区域，它在 AdminAreaRegistration 类中添加了一条路由：

```
public override void RegisterArea(AreaRegistrationContext context)
{
    context.MapRoute(
        "Admin_default",
        "Admin/{controller}/{action}/{id}",
        new { action = "Index", controller = "Home", id = UrlParameter.Optional }
    );
} 
```

在我的主 _Layout 文件中，我尝试执行以下操作：

```
@Html.RouteLink("Admin", "Admin_default") 
```

它仅在某些情况下有效（例如，如果我已经在管理页面中）。如果我在我网站的 /Home/About 部分，那么 URL 会像这样生成：

```
/Admin/Home/About 
```

如果我在 Home 控制器的 Index 操作中（在主区域，而不是管理员），那么 URL 会像这样生成：

```
/Admin 
```

为什么 RouteLink 不像我认为应该在 MVC 中使用区域那样工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T15:00:58.487

`@Html.RouteLink("Admin", "Admin_default")`此路由使用名称为的路由，`Admin_default`因此它将始终使用该路由来生成 url。

`@Html.RouteLink("Admin", "Admin_default", new { controller = "Home", action = "Index" })`

当您不指定诸如路由值之类的东西时，大多数 MVC 使用当前存在的值。在这种情况下，由于`action`and`controller`值为 null，它会查看`RouteValues`并检查它们是否存在，如果找到它们，则使用在那里找到的值。

这有时很有帮助。例如，如果您想`{id}`填充页面上使用的相同值。

网址：`/home/edit/1701`

`@Html.RouteLink("Refresh", "Default")`会产生完全相同的 url - 如果需要，您可以指定覆盖。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T15:16:54.923

我还建议不要命名您的路线。您可以通过在创建路由名称时将 null 传递给路由名称 arg 来强制自己执行此操作。

```
public override void RegisterArea(AreaRegistrationContext context)
{
    context.MapRoute(null,
        "Admin/{controller}/{action}/{id}",
        new { action = "Index", controller = "Home", id = UrlParameter.Optional }
    );
} 
```

然后，您可以像这样使用 RouteLink：

```
@Html.RouteLink("Admin", 
    new { controller = "Home", action = "Index", area = "Admin" }) 
```

**回复评论**

希望我能说我想出了这个主意。从 Steve Sanderson 的 MVC 书中学到了这一点。有大量的方法重载将路由名称作为参数（RouteLink，还有 RedirectToRoute 等）。不使用路由名称会迫使您使用这些方法的其他重载，IMO 更直观且更容易“正确”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T15:11:52.213

不建议为您的路线命名，因为它会在您的视图中创建对现有路线的依赖关系。我建议使用空值

# javascript - 谷歌地图多边形

> ID：11264003
> 
> 赞同：0
> 
> 时间：2012-06-29T14:50:32.800
> 
> 标签：javascript, google-maps, math

我有一个纬度/经度坐标点，我正在谷歌地图上围绕它绘制一个多边形（六边形）。这是我计算六边形坐标的代码：

```
for (var i = 0; i < 6; i++) {
    x =  lat + r * Math.sin(i * 2 * Math.PI / 6);
    y =  lng + r * Math.cos(i * 2 * Math.PI / 6);
} 
```

这会计算正六边形中的所有坐标，如果它的中心靠近（0 纬度，0 度长），我可以毫无问题地在地图上绘制它。问题是当我想把它从 (0, 0) 画出来时，它会变成一个细长的形状。我猜这是因为地球不是平的，谷歌地图考虑到了这一点。所以我可能需要更改计算中的半径以反映这一点，有人知道它是如何完成的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T15:21:18.207

远离 (0,0) 的各种正多边形[示例](http://www.geocodezip.com/v3_MW_example_eshapes.html)

# python - 使用 RegEx 匹配 IP 地址

> ID：11264005
> 
> 赞同：21
> 
> 时间：2012-06-29T14:50:46.147
> 
> 标签：python, regex

我正在尝试进行测试以检查 sys.argv 输入是否与 IP 地址的 RegEx 匹配...

作为一个简单的测试，我有以下...

```
import re

pat = re.compile("\d{1,3}.\d{1,3}.\d{1,3}.\d{1,3}")
test = pat.match(hostIP)
if test:
   print "Acceptable ip address"
else:
   print "Unacceptable ip address" 
```

但是，当我将随机值传递给它时，在大多数情况下它会返回“可接受的 IP 地址”，除非我有一个基本上等同于`\d+`.

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-06-29T15:13:38.200

使用正则表达式来验证 IP 地址是一个坏主意 - 这将通过 999.999.999.999 作为有效。改用套接字尝试这种方法 - 更好的验证，即使不是更容易做到也同样简单。

```
import socket

def valid_ip(address):
    try: 
        socket.inet_aton(address)
        return True
    except:
        return False

print valid_ip('10.10.20.30')
print valid_ip('999.10.20.30')
print valid_ip('gibberish') 
```

如果您真的想改用解析主机方法，则此代码将完全执行此操作：

```
def valid_ip(address):
    try:
        host_bytes = address.split('.')
        valid = [int(b) for b in host_bytes]
        valid = [b for b in valid if b >= 0 and b<=255]
        return len(host_bytes) == 4 and len(valid) == 4
    except:
        return False 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-06-29T14:53:24.007

您必须通过以下方式修改您的正则表达式

```
pat = re.compile("^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$") 
```

那是因为`.`是一个通配符，代表“每个字符”

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-06-30T20:05:01.413

ip v4 的正则表达式：

```
^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$ 
```

否则您将使用无效的 IP 地址，例如 999.999.999.999、256.0.0.0 等

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2017-09-25T10:14:57.287

我遇到了同样的情况，我发现使用套接字库的答案很有帮助，但它不提供对 ipv6 地址的支持。找到了一个更好的方法：

不幸的是，它仅适用于 python3

```
import ipaddress

def valid_ip(address):
    try: 
        print (ipaddress.ip_address(address))
        return True
    except:
        return False

print (valid_ip('10.10.20.30'))
print (valid_ip('2001:DB8::1'))
print (valid_ip('gibberish')) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-29T14:52:37.057

您正在尝试使用 . 作为一个 。不作为任何字符的通配符。改为使用`\.`来表示句点。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-16T08:48:47.383

```
str = "255.255.255.255"
print(str.split('.'))

list1 = str.split('.')

condition=0

if len(list1)==4:
    for i in list1:
        if int(i)>=0 and int(i)<=255:
            condition=condition+1

if condition!=4:
    print("Given number is not IP address")
else:
    print("Given number is valid IP address") 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-01-04T05:16:16.993

```
import re
ipv=raw_input("Enter an ip address")
a=ipv.split('.')
s=str(bin(int(a[0]))+bin(int(a[1]))+bin(int(a[2]))+bin(int(a[3])))
s=s.replace("0b",".")
m=re.search('\.[0,1]{1,8}\.[0,1]{1,8}\.[0,1]{1,8}\.[0,1]{1,8}$',s)
if m is not None:
    print "Valid sequence of input"
else :
    print "Invalid input sequence" 
```

为了简单起见，我使用了这种方法。就像解释如何评估真正的 ipv4 地址一样简单。尽管不需要检查其是否为二进制数。希望你喜欢这个。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-07-03T18:11:30.917

```
def ipcheck():
# 1.Validate the ip adderess
input_ip = input('Enter the ip:')
flag = 0

pattern = "^\d{1,3}.\d{1,3}.\d{1,3}.\d{1,3}$"
match = re.match(pattern, input_ip)
if (match):
    field = input_ip.split(".")
    for i in range(0, len(field)):
        if (int(field[i]) < 256):
            flag += 1
        else:
            flag = 0
if (flag == 4):
    print("valid ip")
else:
    print('No match for ip or not a valid ip') 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-06-06T16:31:54.873

如果你真的想使用 RegEx，下面的代码可能会过滤文件中的无效 ip 地址，无论文件的组织方式如何，每行一个或多个，即使有更多的文本（RegEx 的概念本身）：

```
def getIps(filename):
    ips = []
    with open(filename) as file:
        for line in file:
            ipFound = re.compile("^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$").findall(line)
            hasIncorrectBytes = False
            try:
                    for ipAddr in ipFound:
                        for byte in ipAddr:
                            if int(byte) not in range(1, 255):
                                hasIncorrectBytes = True
                                break
                            else:
                                pass
                    if not hasIncorrectBytes:
                        ips.append(ipAddr)
            except:
                hasIncorrectBytes = True

    return ips 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2015-02-11T14:55:52.830

IP 地址使用以下身份验证：

1.  255 ---> 250-255
2.  249 ---> 200-249
3.  199 ---> 100-199
4.  99 ---> 10-99
5.  9 ---> 1-9

    ```
    import re    
    k = 0
    while k < 5 : 
        i = input("\nEnter Ip address : ")
        ip = re.match("^([1][0-9][0-9].|^[2][5][0-5].|^[2][0-4][0-9].|^[1][0-9][0-9].|^[0-9][0-9].|^[0-9].)([1][0-9][0-9].|[2][5][0-5].|[2][0-4][0-9].|[1][0-9][0-9].|[0-9][0-9].|[0-9].)([1][0-9][0-9].|[2][5][0-5].|[2][0-4][0-9].|[1][0-9][0-9].|[0-9][0-9].|[0-9].)([1][0-9][0-9]|[2][5][0-5]|[2][0-4][0-9]|[1][0-9][0-9]|[0-9][0-9]|[0-9])$",i)
        k = k + 1 
        if ip:
            print ("\n=====================")
            print ("Valid IP address")
            print ("=====================")
            break
        else :
            print ("\nInvalid IP")
    else :
        print ("\nAllowed Max 5 times") 
    ```

如果您有疑问，请回复我？

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2017-07-20T09:18:59.953

```
import re

st1 = 'This is my IP Address10.123.56.25 789.356.441.561 127 255 123.55 192.168.1.2.3 192.168.2.2 str1' 
```

在这里，我的有效 IP 地址只是`192.168.2.2`并且假设`10.123.56.25`不是有效的，因为它与一些字符串组合并且`192.168.1.2.3`无效。

```
pat = r'\s(((25[0-5]|2[0-4][0-9]|[01]?[0-9]?[0-9])\.){3}((25[0-5]|2[0-4][0-9]|[01]?[0-9]?[0-9])\s|$))'

match = re.search(pat,st1)

print match.group()

================ RESTART: C:/Python27/Srujan/re_practice.py ================
192.168.2.2 
```

这将 grep 确切的 IP 地址，我们可以忽略任何看起来像 IP 地址但不是有效的模式。例如：`'Address10.123.56.25', '789.356.441.561' '192.168.1.2.3'`。

如果需要任何修改，请发表评论。

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2017-07-31T12:36:37.213

这适用于 python 2.7：

```
import re
a=raw_input("Enter a valid IP_Address:")
b=("[0-9]+"+".")+"{3}"
if re.match(b,a) and b<255:
    print "Valid"
else:
    print "invalid" 
```

* * *

## 回答 #13

> 赞同：-2
> 
> 时间：2020-07-10T11:16:18.490

""" 用于查找有效 IP 地址的正则表达式 """

```
import re

IPV4 = re.fullmatch('([0-2][0-5]{2}|\d{2}|\d).([0-2][0-5]{2}|\d{2}|\d).([0-2][0-5]{2}|\d{2}|\d).([0-2][0-5]{2}|\d{2}|\d)', '100.1.1.2')

if IPV4:
    print ("Valid IP address")

else:
    print("Invalid IP address") 
```

# vb.net - 显示数据表文本

> ID：11264008
> 
> 赞同：0
> 
> 时间：2012-06-29T14:50:49.103
> 
> 标签：vb.net, visual-studio-2010

我有一个包含许多行和列的数据表。如何将第 1 行第 1 列中的值（文本）显示到消息框？

我能够显示行数，但似乎无法弄清楚如何显示单元格的实际内容。

我正在使用 VS2012，并在 VB 中编码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T14:55:27.897

```
Dim myDataRow AS DataRow = myDataTable.Rows(0)
MessageBox.Show(myDataRow(0)) 
```

我认为这也有效：

```
myDataTable.Rows(0).Field(Of String)(0) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T14:55:52.780

尝试，

```
MessageBox.Show(datatabelname.rows(1)(1)) 
```

# ajax - 使用 Ajax 会产生陈旧的结果

> ID：11264011
> 
> 赞同：1
> 
> 时间：2012-06-29T14:51:08.440
> 
> 标签：ajax, asp.net-mvc

**编辑**

我的`Ajax`表单正确`Id`更新内容和`replace`选项。提交是通过单击`<input type="submit" value="submit!" />`。

`Problem`: 当我点击`submit`我没有看到任何更新。二审给出了预期的结果。当我刷新页面时，丢失的记录（第一次成功）就在现场。

**模型**

```
[Serializable]
public abstract class AbstractEntity {
    public Guid Id { get; set; }
    public DateTime LastModified { get; set; }
}

[Serializable]
public class Product : AbstractEntity {
    public Product() {
        this.Attachments = new HashSet<Attachment>();
    }
    public String Title { get; set; }        
    public String Commentary { get; set; }
    public DateTime PlacedOn { get; set; }
    public String User { get; set; }
    public ICollection<Attachment> Attachments { get; set; }
}

[Serializable]
public class Attachment {
    public String MimeType { get; set; }
    public String Description { get; set; }
    public String Filename { get; set; }
} 
```

**控制器**

```
[HandleError]
public class ProductController : Controller {
    private readonly IDocumentSession documentSession;

    public ProductController(IDocumentSession documentSession) {
        this.documentSession = documentSession;
    }

    public ActionResult ListRecent() {
        return View(ListAll());
    }

    [Audit, HttpPost]
    public ActionResult Delete(Guid id) {
        documentSession.Delete<Product>(documentSession.Load<Product>(id));
        documentSession.SaveChanges();
        return PartialView("ProductsList", ListAll());
    }

    [Audit, HttpPost]
    public ActionResult Create(Product product) {
        if(ModelState.IsValid) {
            documentSession.Store(product); 
            documentSession.SaveChanges();
        }
        return PartialView("ProductsList", ListAll());
    }

    private IEnumerable<Product> ListAll() {
        return documentSession.Query<Product>().ToArray();
    }
} 
```

**视图（'无脚本'）**

> 布局

```
<head>
    <title>@ViewBag.Title</title>        
    <link href="@Url.Content("~/Content/stylesheets/normalize.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/stylesheets/site.core.css")" rel="stylesheet" type="text/css" />
    <script src="@Url.Content("~/Scripts/jquery-1.7.2.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.js")" type="text/javascript"></script>
</head>
<body>
    <div id="main-wrapper">
        <div id="header">[@Html.ActionLink("List", "ListRecent", "Product")]</div>
        <div id="content">@RenderBody()</div>
    </div>        
</body> 
```

> ListRecent.cshtml

```
@model IEnumerable<lamp.DomainLayer.Entities.Product>
@{ 
    ViewBag.Title = "ListRecent";
    var options = new AjaxOptions {
        InsertionMode = InsertionMode.Replace,
        UpdateTargetId = "productsList"        
    };
}

<h2>List</h2>

@Html.Partial("ProductsList", Model)

@using(Ajax.BeginForm("Create", "Product", options)) {
    <fieldset>
        <p>
            <label class="autoWidth">Title</label>
            @Html.Editor("Title")
            @Html.ValidationMessage("Title")
        </p>
        <p>
            <label class="autoWidth">Commentary</label>
            @Html.TextArea("Commentary")
            @Html.ValidationMessage("Commentary")
        </p>
        @* Some fields I have omitted.. *@

        <input type="submit" value="submit" />
        <input type="reset" value="clear" />

    </fieldset>
} 
```

> ProductsList.cshtml

```
@model IEnumerable<lamp.DomainLayer.Entities.Product>
@{
    var options = new AjaxOptions {
        InsertionMode = InsertionMode.Replace,
        UpdateTargetId = "productsList"
    };
}

<div id="productsList">
    @foreach(var p in Model) {
        <div class="productCard">
            <p class="title"><strong>Title</strong>: @p.Title</p>
            <p class="author"><strong>User</strong>: @p.User</p>
            <p class="date"><strong>Placed on</strong>: @idea.PlacedOn.ToShortDateString()</p>
            <p class="link">@Html.ActionLink("details", "Details", "Product")</p>
            <p class="link">
                @using(Ajax.BeginForm("Delete", "Product", new { id = p.Id }, options))  {                
                    <input type="submit" value="you!" />
                }
            </p>
        </div>
    }
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T16:42:27.450

我猜这是 IE 的错（正是 IE 缓存 AJAX 请求的方式）。看这里 - 它可能是解决方案：

[http://viralpatel.net/blogs/ajax-cache-problem-in-ie/](http://viralpatel.net/blogs/ajax-cache-problem-in-ie/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T05:49:25.230

好的。达林是对的！我发现将我的控制器代码更改为这个：

```
private IEnumerable<Product> ListAll() {
    return documentSession
       .Query<Product>()
       .Customize((x => x.WaitForNonStaleResults()))
       .ToArray();
} 
```

修复一切。

> .Customize((x => x.WaitForNonStaleResults()))

是解决方案！

感谢大家！

# .htaccess - PyroCMS - 资产类不会缩小和合并

> ID：11264015
> 
> 赞同：0
> 
> 时间：2012-06-29T14:51:23.500
> 
> 标签：.htaccess, pyrocms

我对 Assets 类有一些问题来缩小和组合我的 css 和 js。我有这个插件广告，它似乎可以正常工作：

```
class Plugin_Theme_Assets extends Plugin
{
    /**
    * combine and insert multiple js files
    *
    * usage:
    * { theme_assets:js_files files="file1.js,file2.js" }
    */
    function js_files()
    {
        $files = $this->attribute('files');
        preg_match_all('/[\w-\.]+\.js/i', $files, $files_a);
        foreach($files_a[0] as $file)
        {
            Asset::js($file);
        }
        return Asset::render_js();
    }

    /**
    * combine and insert multiple css files
    *
    * usage:
    * { theme_assets:css_files files="file1.css,file2.css" }
    */
    function css_files()
    {
        $files = $this->attribute('files');
        preg_match_all('/[\w-\.]+\.css/i', $files, $files_a);
        foreach($files_a[0] as $file)
        {
            Asset::css($file);
        }
        return Asset::render_css();
    }
} 
```

这是我的 .htaccess 文件，你可以看到我取消了 SetEnv 的注释：

```
# Multiple Environment config
# Set this to development, staging or production
  SetEnv PYRO_ENV production

<IfModule mod_rewrite.c>

    # Make sure directory listing is disabled
    Options +FollowSymLinks -Indexes
    RewriteEngine on

    # NOTICE: If you get a 404 play with combinations of the following commented out lines
    #AllowOverride All
    RewriteBase /

    # Restrict your site to only one domain
    # !important USE ONLY ONE OPTION

    # Option 1: To rewrite "www.domain.com -> domain.com" uncomment the following lines.
    RewriteCond %{HTTPS} !=on
    RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
    RewriteRule ^(.*)$ http://%1/$1 [R=301,L]

    # Option 2: To rewrite "domain.com -> www.domain.com" uncomment the following lines.
    #RewriteCond %{HTTPS} !=on
    #RewriteCond %{HTTP_HOST} !^www\..+$ [NC]
    #RewriteCond %{HTTP_HOST} (.+)$ [NC]
    #RewriteRule ^(.*)$ http://www.%1/$1 [R=301,L]

    # Remove index.php from URL
    #RewriteCond %{HTTP:X-Requested-With}   !^XMLHttpRequest$
    #RewriteCond %{THE_REQUEST}             ^[^/]*/index\.php [NC]
    #RewriteRule ^index\.php(.*)$           $1 [R=301,NS,L]

    # Keep people out of codeigniter directory and Git/Mercurial data
    RedirectMatch 403 ^/(system\/cms\/cache|system\/codeigniter|\.git|\.hg).*$

    # Send request via index.php (again, not if its a real file or folder)
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d

    <IfModule mod_php5.c>
        RewriteRule ^(.*)$ index.php/$1 [L]
    </IfModule>

    <IfModule !mod_php5.c>
        RewriteRule ^(.*)$ index.php?/$1 [L]
    </IfModule>

</IfModule> 
```

所以，如果我是对的，那么 PYRO_ENV 现在是“生产”。

如果我刷新我的页面，css 和 js 文件不会被缩小并组合成一个文件......这是插件返回的内容

```
<link href="http://example:8888/addons/default/themes/mytheme/css/nivo-slider.css" rel="stylesheet" type="text/css" />
<link href="http://example:8888/addons/default/themes/mytheme/css/default.css" rel="stylesheet" type="text/css" /> 
```

你能帮我么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T18:07:44.673

如果您的主机不允许`SetEnv`在 .htaccess 中，您可以使用重写规则发送环境变量：

```
RewriteCond %{HTTP_HOST} ^local.yoursite.com$
RewriteRule (.*) $1 [E=PYRO_ENV:development]

RewriteCond %{HTTP_HOST} ^beta.yoursite.com$
RewriteRule (.*) $1 [E=PYRO_ENV:staging]

RewriteCond %{HTTP_HOST} ^yoursite.com$
RewriteRule (.*) $1 [E=PYRO_ENV:production] 
```

默认情况下，资产缩小和合并将在生产或登台系统上进行，开发环境不会出于开发/调试目的而缩小和合并。您可以`system/cms/config/asset.php`出于测试目的覆盖它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T22:05:17.313

这是你自己写的插件，对吧？我很困惑为什么在文档中你建议人们`{ theme_assets:css_files files="file1.css,file2.css" }`在你完全不需要自定义插件就可以做到这一点时使用：

```
{{ asset:css file="file1.css" }}
{{ asset:css file="file2.css" }}
{{ asset:render }} 
```

（同样是的，一旦您正确设置了环境，它就应该可以工作（您也可以修改*/system/cms/config/asset.php*进行测试）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T14:06:27.373

问题是我的主机，它不允许我`SetEnv`在 .htaccess中使用

# iphone - 在 tableview 中显示录制的音频

> ID：11264017
> 
> 赞同：0
> 
> 时间：2012-06-29T14:51:39.400
> 
> 标签：iphone, objective-c, ios, avaudiorecorder

我有一个负责录制音频的视图。如何录制多个音频并在表格视图中显示它们？我正在尝试使用 docs 目录来保存录制的音频：

```
NSArray *folders = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask, YES);

NSString *documentsFolder = [folders objectAtIndex:0];

NSString *recordedAudio = [documentsFolder stringByAppendingPathComponent:newAudio]; 
```

newAudio 是一个字符串，其中包含用户键入的新音频名称，后缀为 .m4a。要检索保存的音频，我正在尝试这样的事情：

```
NSArray *folders = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

NSString *documentsFolder = [folders objectAtIndex:0];

NSArray *folderContents = [[NSArray alloc] initWithContentsOfFile:documentsFolder]; 
```

我希望folderContents 将所有音频都存储在documentsFolder 中，因此可以加载我的表，但它的计数为0。我是docs 目录中的新手，可能我遗漏了一些东西，或者做错了。

出了什么问题，或者有另一种方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T14:57:26.230

您获取的文档目录的内容不正确。这是正确的方法：

`NSArray *folderContents = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:documentsFolder error:nil];`

Documents 不是文件，而是文件夹。

**编辑：**这是您保存文件的方式

假设您有一个 NSData 对象，例如

`NSData *audioData = ...; // initialiazed with your recording`

创建`recordedAudio`字符串后，它实际上只是您要写入的文件名（可能应该称为`audioPath`或其他），您需要添加以下内容：

`[audioData writeToFile:recordedAudio atomically:YES];`

# node.js - Socket.io.js 在 Ubuntu 上找不到，但在 Windows 上

> ID：11264020
> 
> 赞同：1
> 
> 时间：2012-06-29T14:51:47.117
> 
> 标签：node.js, ubuntu, express, socket.io

我一直在拔头发试图解决这个问题。我有一个在 Windows 中运行良好的 node.js 应用程序。我将所有内容压缩并放在我的 linux 机器（Ubuntu 12）上并通过 npm 安装了所有库，但我仍然收到一条 404 消息，提示找不到我的 socket.io.js 文件。我尝试了各种解决方案，例如链接到 cdn.socket.io 脚本，但这只会引发“require not found”错误。我的html中的代码如下：

```
<script src="/socket.io/socket.io.js"></script> 
```

我什至试过`<script src="localhost:4000/socket.io/socket.io.js"></script>`

这是我的服务器端：

```
var express = require('express');
var app = express.createServer();
var io = require('socket.io').listen(app);
...
app.listen(4000);
console.log('server started'); 
```

这个问题很相似，但是它的答案只是一个更新的表达语义，它不应该适用于我的代码：[socket.io.js not found](https://stackoverflow.com/questions/10191048/socket-io-js-not-found)

如果我的理解是正确的，那么脚本路径应该可以工作，因为当 socket.io 运行时，它应该将该请求定向到正确的路由。我真的不知道我还应该寻找什么来修复，这可能是 Ubuntu 中的路径吗？任何帮助将不胜感激！

刚刚测试了这个：

```
var io = require('socket.io').listen(8000); 
```

转到 localhost:8000 并显示“欢迎使用 socket.io”消息，所以我知道它正在运行....

**路径**
node_modules：`/home/alex/node_modules/socket.io`
我的节点应用程序：`/home/alex/documents/project/app.js`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T21:41:49.230

我遇到了同样的问题，似乎原因是在安装 socket.io 期间出现了问题。实际上，我发现的唯一解决方法是创建一个新目录，将所有代码复制到那里并重新安装 Express 和 socket.io 模块：
npm install express socket.io
也许我很幸运，但它奏效了！

# javascript - 使用 Jquery 中的链接输入 type="file"

> ID：11264024
> 
> 赞同：2
> 
> 时间：2012-06-29T14:51:56.273
> 
> 标签：javascript, jquery, html

是否可以使用链接和 jQuery 模拟`<input type="file">`和获取文件浏览器？

我试图找到一个教程来做到这一点，但在谷歌上搜索并没有显示任何答案。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T14:53:55.233

简短的回答：没有。

`file`输入让浏览您的磁盘等来选择一个文件。这是任何其他标准 HTML/JS 技术都无法模拟的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T14:57:47.417

我在过去也取得了类似的成就，但它有点像黑客：

*   在页面上放置一个正常的文件上传。
*   使其完全透明（使用不透明度 - 不要将其可见性更改为隐藏）
*   将您的链接放在文件上传浏览按钮下。

当用户认为他们正在点击链接时，他们实际上会点击浏览按钮。

太可怕了，但我不知道其他方法。

# c++ - 将字符串转换为 C 风格的字符串

> ID：11264027
> 
> 赞同：2
> 
> 时间：2012-06-29T14:52:02.270
> 
> 标签：c++, string, cstring

我正在尝试将 int 转换为 cstring。我决定通过 stringstream 将 int 读入常规字符串，然后将字符串读入 char 数组。以下似乎正在工作，但我想知道我是否只是对我的编译器感到幸运。代码看起来不错吗？谢谢！

```
int zip = 1234;    

char zipString[30];

stringstream str;

str << zip;

str >> zipString;

cout << zipString; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T14:55:54.360

`std::string`您可以从流的函数中获取 C++ `str()`，并从字符串的`c_str()`函数中获取不可变的 C 风格以零结尾的字符串：

```
std::string cpp_string = str.str();
char const * c_string = cpp_string.c_str(); 
```

您可能想将这些组合成一个表达式，`str.str().c_str()`但这是*错误*的；在您可以对指针执行任何操作之前，C++ 字符串将被销毁。

只要您确定缓冲区足够大，您正在做的事情就会起作用；但是使用 C++ 字符串消除了溢出缓冲区的危险。一般来说，最好避免使用 C 风格的字符串，除非您需要使用需要它们的 API（或者，在极端情况下，作为避免内存分配的优化）。`std::string`通常更安全，更容易使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T14:59:17.643

除非您有特定原因需要 char 数组而不是标准字符串，否则我会使用后者。尽管在这种情况下并非绝对必要，但我通常也会使用 Boost[`lexical_cast`](http://www.boost.org/doc/libs/1_50_0/doc/html/boost_lexical_cast.html)而不是通过字符串流显式移动内容来进行转换：

```
std::string zipString = lexical_cast<std::string>(zip); 
```

然后，如果您确实需要将结果作为 c 风格的字符串，您可以使用`zipString.c_str()`它来获取它（尽管它在一种方式上仍然不同——您不能修改返回的内容）。

在这种特定情况下，它不会为您带来很多好处，但在此一般订单上持续使用转换会增加，如果您要这样做，您也可以在这里使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T14:56:07.433

的成员函数返回一个（又名 C 风格的字符串）`std::string`。`c_str()``const char*`

```
std::string str = "world";
printf("hello, %s", str.c_str()); 
```

# ruby-on-rails - Rails gem 添加视图内容

> ID：11264030
> 
> 赞同：0
> 
> 时间：2012-06-29T14:52:09.307
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, views

因为我经常比较生产和开发网站的输出，有时我会尝试在实时网站上查看最新的开发编辑（只是因为它们是相等的，我没有看到 URLbar 地址）并且我在意识到之前失去了几分钟我只是在看制作网站。

所以我愿意创建一个必须安装在“开发”组下的 Rails3 Gem，它会自动向所有视图添加一些输出（例如警告消息“开发模式”或类似的东西，并且可能添加在底部一些关于当前页面的调试信息）。

我已经意识到我可以通过创建一些视图助手来做到这一点，`nil`如果环境是“生产”则返回，但它需要全局安装 gem 以使其也在生产服务器上找到视图助手。

所以我只是想弄清楚是否有另一种不那么侵入性的方式来添加这些内容。在那儿？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T15:07:39.260

我们出于同样的目的使用了类似下面的东西。您可以将此代码放在布局视图上。它查找客户端 IP 地址，将其与存储在配置文件中的预配置 IP 地址进行比较，如果匹配，则在页面顶部显示红色条。

有点hacky，但它对我们有用。

```
<% if Rails.env.production? and request.remote_ip == ip_address_from_config %>
<div class="heavy-red">
  WARNING! Production Url
</div>
<% end %> 
```

# c++ - c++ 为什么没有长度（数组）之类的东西？

> ID：11264032
> 
> 赞同：14
> 
> 时间：2012-06-29T14:52:21.517
> 
> 标签：c++, arrays, language-design

好吧，我认为这并不重要，但是由于程序必须存储长度，因为 delete[] 反正我们为什么不能得到这个“存储的信息”？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-29T14:57:46.160

实现只需要存储长度，并且通常仅在类型不是可简单破坏的情况下（即，它需要生成对析构函数的调用）并且数组是使用 new[] 运算符创建的。

由于数组类型的该属性与数组的大小无关，因此将长度“cookie”简单地称为私有实现细节更为优雅。

要获取完整数组对象的长度（不仅仅是指针），您可以使用`std::extent< decltype( arr ) >::value`or `std::end( arr ) - std::begin( arr )`。

`new[]`与带有析构函数的类一起使用是一种代码味道。`std::vector`改为考虑。开销与原始`new[]`（考虑到需要分配的所有字节，无论它们在哪里）是一个指针的字节价值，其好处是数不清的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T15:04:05.550

考虑以下情况：

```
char* a = new char[100]; 
```

现在`a`需要指向一个至少有 100 个字符大的缓冲区，*但系统可能已经分配了一个更大的缓冲区来完成这个*。

考虑到这一点，我们可以看到系统可以立即忘记程序要求的大小，只要它以后仍然可以正确地释放缓冲区。（通过记住分配缓冲区的大小或使用一些只需要指向开始的指针的智能数据结构进行内存分配）

因此，在一般情况下，您要查找的信息实际上*并不*存储在任何地方。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T15:01:52.047

并非所有数组都由`new`.

```
void f(int* arr, size_t n)
{
  length(arr);  //  ???
}

int main()
{
  int a[5];
  f(a);
} 
```

虽然写起来很简单，只是 call `(std::end(arr) - std::begin(arr))`，虽然它只适用于数组，而不是指向数组开头的指针。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-29T15:20:50.390

我的理解是，c++ 的理念是不强迫人们使用任何具有潜在成本的功能，除非不可避免。

存储此信息可能会产生额外费用，如果用户不需要该信息，他们可能不想支付该费用。而且，如果您想要自己存储长度是微不足道的，因此没有理由提供一种语言功能，这对使用数组的每个人来说都是有成本的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-29T15:42:23.810

对于**正确的**数组，即`int a[length]`，您已经拥有该功能：只需执行

```
#define length(A) (sizeof(A) / sizeof(*A)) 
```

你就完成了。

如果您正在谈论获取指针指向的数组的长度，那么指针和数组是两个不同的概念，将它们耦合是没有意义的，即使适当的数组在需要时“衰减”到指针并且您通过指针访问数组算术。

但是即使我们不考虑这一点并谈论技术方面，`C++`运行时也可能不知道您的数组的长度是多少，因为`new`可以依赖`malloc`，它以特定的方式存储数组的长度，这是可以理解的only by `free`：`C++`运行时仅在您有非空析构函数时才存储额外信息。好乱的图啊

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-29T14:55:35.127

因为它取决于存储此信息的实现。所以没有一般​​的方法来做一个长度（数组）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-29T15:10:59.103

长度肯定不会存储在所有实现中。例如，C++ 允许垃圾收集（例如 boehmgc），许多收集器不需要知道长度。在传统的分配器中，存储的长度通常会大于实际长度，即分配的长度，而不是使用的长度。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-29T15:19:57.917

但是，数组的长度究竟是多少？是数组中的字节数还是数组中的元素数？

例如：对于某些 100 字节大小的 A 类，

A* myArray = 新 A[100];

length(myArray) 应该返回 100 还是 100 * 100？有人可能想要 100，有人可能想要 10000。所以，这两者都没有真正的论据。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-06-29T19:17:15.100

与支持语言中的“数组”最相似的 c++ 类型`length(array)`是`std::vector<>`，并且它*确实*具有`std::vector<>::size()`.

当然，普通`[]`数组的大小在大小是明确的范围内是编译器知道的，但是可以将它们传递给编译器*不知道大小的范围。*与必须支持疑问句的语言相比，这为 c++ 提供了*更多*`length`处理类数组数据的方法（因为它们必须确保始终传递大小）。

# javascript - 如何在 JavaScript 中转义“/”？

> ID：11264034
> 
> 赞同：-2
> 
> 时间：2012-06-29T14:52:27.540
> 
> 标签：javascript

如果我尝试

```
escape('/') 
```

它只是返回相同的东西。是否有一些功能可以逃避'/'？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T14:53:07.977

我认为你的意思是你想对它进行urlencode。尝试 `encodeURIComponent('/');`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T14:56:54.890

或者，如果在正则表达式中使用它，您可以在它前面加上`\`.

```
foo.test(/\black\/white/) // foo = 'black/white' 
```

# drupal - 从模块中渲染没有主题的节点（没有主题编辑）

> ID：11264035
> 
> 赞同：1
> 
> 时间：2012-06-29T14:52:30.890
> 
> 标签：drupal, module, drupal-6, drupal-modules

我有一个模块，它仅用于创建几个页面节点（在 .install 中完成）。这工作正常。问题是这些节点包含xml、json、jsonp内容，所以我希望能够在没有主题、没有页眉、没有页脚、没有样式的情况下渲染它们，只有节点->内容。该模块将与其他几个 Drupal 站点共享，因此我无法通过主题开发来执行此操作，我不希望任何人都必须创建或修改模板。

有没有办法使用模块内的钩子来做到这一点，.module？基本上检测节点标题或节点别名（或其他东西）然后阻止主题渲染并仅渲染内容。我会知道节点的标题和别名，因为我是在 .install 中创建它们的。

我还想修改标题以正确说出返回的内容是 xml、json 等。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T17:21:42.350

通常，我会以另一种方式解决这个问题。我会通过`hook_menu()`菜单路由器项而不是节点内容来定义内容，因为它很少打算直接供用户编辑。如果有很多处理，您可以将其与 .module 分开，并将其作为`file`每个项目的 a 包含在内。

```
/**
 * Implementation of hook_menu().
 */
function MODULE_menu() {
  $items = array();

  $items['example/json'] = array(
    'title'            => 'JSON example',
    'page callback'    => '_MODULE_json',
    'access arguments' => array('access content'),
    'type'             => MENU_CALLBACK,
  );
  $items['example/xml'] = array(
    'title'            => 'XML example',
    'page callback'    => '_MODULE_xml',
    'access arguments' => array('access content'),
    'type'             => MENU_CALLBACK,
  );

  return $items;
}

/**
 * JSON example.
 */
function _MODULE_json($string = '') {
  $data = array();
  $data['something']    = 0;
  $data['anotherthing'] = 1;
  drupal_json($data);
}

/**
 * XML example. No idea if this actually produces valid XML,
 * but you get the idea.
 */
function _MODULE_xml($string = '') {
  $data = array();
  $data['different'] = 2;
  $data['evenmore']  = 3;

  // Build XML
  $output  = "<?xml version=\"1.0\" encoding=\"utf-8\"?>\n";
  $output .= "<data>\n";
  $output .= format_xml_elements($data);
  $output .= "</data>\n";

  // We are returning XML, so tell the browser.
  drupal_set_header('Content-Type: application/xml');
  echo $output;
} 
```

# php - 按 date_modified 排序

> ID：11264042
> 
> 赞同：-3
> 
> 时间：2012-06-29T14:52:48.980
> 
> 标签：php, mysql, sql, timestamp, sql-order-by

我有一个 mysql 表，其中有一列 date_modified 和一个设置了当前时间戳默认值的时间戳。当我插入表格时，我得到一个时间戳。在 php 脚本中显示记录时，如何按最新时间戳排序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T14:54:56.933

您的 SQL 查询将使用[`ORDER BY`](http://dev.mysql.com/doc/refman/5.0/en/sorting-rows.html)语句。然后，您的 PHP 脚本可以正常循环它们，以正确的顺序显示它们。

按时间顺序显示它们：

```
ORDER BY date_modified ASC 
```

最近的第一：

```
ORDER BY date_modified DESC 
```

# entity-framework - 更新具有虚拟属性的类时，实体框架验证失败

> ID：11264046
> 
> 赞同：3
> 
> 时间：2012-06-29T14:53:00.767
> 
> 标签：entity-framework, entity-framework-4.1, entity-framework-4.3

当类包含虚拟属性时，我在更新类的属性时遇到问题。这是我的代码

```
 public class Policy
            {
                [Key]
                [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
                public long id { get; set; }

                [UIHint("Company"), Required]
                public virtual Company company { get; set; }

                [UIHint("Productor"), Required]
                public virtual Productor productor { get; set; }

                [MaxLength(1000)]
                public string comments { get; set; }
            }

        public class Company
        {
            [Key]
            [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
            public long id { get; set; }

            [MaxLength(100)]
            public string name { get; set; }

        }

    //Then Productor class is the same as company but with another name

     public static int updateComment(long id, string comments)
            {
                MemberPolicies mp = new MemberPolicies();

                Policy p = mp.Policies.Single(o => o.id == id);
                p.comments = comments;

                int afectedRecords = -1;
                try
                {
                    afectedRecords = mp.SaveChanges();
                }
                catch (DbEntityValidationException dbEx)
                {
                    foreach (var validationErrors in dbEx.EntityValidationErrors)
                    {
                        foreach (var validationError in validationErrors.ValidationErrors)
                        {
                            Trace.TraceInformation("Property: {0} Error: {1}", validationError.PropertyName, validationError.ErrorMessage);
                        }
                    }
                }
                return afectedRecords;
            } 
```

导致验证错误的属性是公司和公司，但我只想更新属性注释。

一些帮助是感激的。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-20T21:27:22.110

当您尝试保存实体（该死）时，EF 不会延迟加载您的虚拟属性。您可以执行以下任一操作。

使用包括：

```
Policy p = mp.Policies
    .Include(p => p.company)
    .Include(p => p.productor).Single(o => o.id == id);
p.comments = comments; 
```

或使用负载：

```
Policy p = mp.Policies.Single(o => o.id == id);
p.comments = comments;
mp.Entry(p).Reference(p => p.company).Load();
mp.Entry(p).Reference(p => p.productor).Load(); 
```

或者更好的是，您可以编写更优雅的代码，如此[处](https://stackoverflow.com/questions/8784005/modifying-a-property-on-an-entity-in-entity-framework-causes-validation-error/21244331#21244331)所述。

# c# - C# 到 Excel 设置自定义日期显示和值

> ID：11264051
> 
> 赞同：2
> 
> 时间：2012-06-29T14:53:10.377
> 
> 标签：c#, excel, datetime, date, datetime-format

给定某个日期，我想使用 DateTime 对象设置单元格的**值**，但没有“时间”信息。例如，今天的值将只是**"29/06/2012"**而不是**"29/06/2012 16:54:36"**。

关于显示，对于今天的日期，我希望它写成这样（它是法语，我不知道它会是英语）：**"29 juin"**而不是**"29/06/2012"**。

我怎样才能做到这一点？

**编辑**：我只是看了一下我在 Excel 中需要的显示格式，它是“jj mmmm”（C# 中的“dd mmmm”）。但是单元格虽然采用值，但不采用格式。这是一段代码：

```
 cell.Value = string.Format("{0:dd/MM/yyyy}", DateTime.Now);
                 cell.NumberFormat = "jj mmmm"; 
```

我也试过：

```
 cell.Value = DateTime.Now;
                 cell.NumberFormat = "jj mmmm"; 
```

在这种情况下，显示格式正常，但单元格值包含时间信息，这是不正常的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T15:23:56.480

请参阅[这个](https://stackoverflow.com/questions/10720498/how-can-i-change-the-text-format-of-a-excel-cell-using-c/10720603#10720603)StackOverflow 问题以及我的回答。它将允许您直接在 Excel 工作表中设置单元格的自定义格式，从那里您只需要研究不同的日期格式字符串是什么。

不过，这仅在您使用 excel 自动化时才有用。

否则，格式化 DateTime.ToString 输出会更好。再一次，研究不同的 DateStringFormatting 选项将对您有所帮助。

最后的选择。直接更改模板，不使用自动化。转到单元格并手动更改单元格格式，直到显示是您想要的。这不会改变实际数据，只会改变它的显示。

**更新**

有两个具体问题需要处理。

问题一是确保 excel 识别这是一个日期。为此，请确保日期数据本身采用 en-US 格式。为什么，因为微软很笨，不承认国际日期格式。

问题二是单元格的显示格式。对于月份的 3 个字母缩写，请使用字符串`d mmm`。如果您想要完整的月份名称，请使用`d-mmmm`.

我正在测试并注意到 excel 拒绝将 29/06/2012 16:54:36 视为日期，但它接受了 06/29/2012 16:54:36 没有问题。正如我所说，微软是愚蠢的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T14:59:32.563

DateTime 有一个名为 ToShortDateString 的方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T15:00:49.863

```
// Displays Fri 29 Aug
Console.WriteLine(date1.ToString("ddd d MMM", CultureInfo.CreateSpecificCulture("fr-FR"))); 
```

这对您来说是一个很好的资源： [msdn custom date and time format strings](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T15:51:11.267

只需更改`DateTime.Now`为`DateTime.Date`，时间将归零

# javascript - 在门户中显示图片库

> ID：11264052
> 
> 赞同：1
> 
> 时间：2012-06-29T14:53:17.480
> 
> 标签：javascript, html, liferay

我正在使用 Liferay 门户并希望在其上显示图片，该门户有图片库，但它太混乱了，我只想要简单的封面流式显示 - 顶部的大图像加上缩略图或下一个/上一个按钮。

有没有办法在javascript中实现它只假设我有一个图像列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T15:27:35.000

您可以找到一个[默认的 Web 内容挂钩](http://sourceforge.net/projects/lportal/files/Liferay%20Plugins/6.1.0%20GA1/default-web-content-hook-6.1.0.1-ce-ga1-20120106155615760.war/download)，它将在全局范围（轮播）中提供结构和模板（Web 内容管理的元素）。有了这些，您可以创建参考图像和建议尺寸的文章。模板将负责其余的渲染。

如果它不能满足您的需求，您可以将其作为起点。至少这是一种将图像选择与演示分开的好方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T05:41:15.907

有许多 javascript 库可以实现这一点，我想到的一个是[Colorbox](http://www.jacklmoore.com/colorbox)。

**一些考虑：**

如果您想在 Image Gallery 内置 portlet 中显示图像，那么您需要一个挂钩来修改 liferay 的代码（用于 Image Gallery 显示 portlet）并包含您自己的 javascript 来执行此操作。

要不然

您还可以自己制作一个插件 portlet，并使用 Liferay 的 Image Gallery API 来获取图像并使用自定义 javascript 库显示它们。这种方法的优势在于，您可以更自由地选择想要显示的方式和想要显示的内容，而且您不必处理内置 portlet 中的整个 liferay jsp 代码。

**注意：**从**Liferay 6.1**开始，没有单独的图像库 portlet，而是合并为一个`Documents & Media portlet`，并且有两个不同的显示 portlet：`Document Library Display portlet`和`Media display portlet`.

希望这可以帮助。

# c# - 使用 Roslyn 获取方法参数

> ID：11264058
> 
> 赞同：13
> 
> 时间：2012-06-29T14:53:27.717
> 
> 标签：c#, .net, roslyn

我可以使用以下代码从对特定方法的所有调用的解决方案中获取列表：

```
var createCommandList = new List<MethodSymbol>();
INamedTypeSymbol interfaceSymbol = 
   (from p
    in solution.Projects
    select p.GetCompilation().GetTypeByMetadataName(
        "BuySeasons.BsiServices.DataResource.IBsiDataConnection")
    ).FirstOrDefault();
foreach (ISymbol symbol in interfaceSymbol.GetMembers("CreateCommand"))
{
    if (symbol.Kind == CommonSymbolKind.Method
        && symbol is MethodSymbol)
    {
        createCommandList.Add(symbol as MethodSymbol);
    }
}
foreach (MethodSymbol methodSymbol in createCommandList)
{
    foreach (ReferencedSymbol referenceSymbol
        in methodSymbol.FindReferences(solution))
    {
        foreach (ReferenceLocation referenceLocation
            in from l
               in referenceSymbol.Locations
               orderby l.Document.FilePath
               select l)
        {
            if (referenceLocation.Location.GetLineSpan(false)
                    .StartLinePosition.Line ==
                referenceLocation.Location.GetLineSpan(false)
                    .EndLinePosition.Line)
            {
                Debug.WriteLine("{0} {1} at {2} {3}/{4} - {5}",
                    methodSymbol.Name,
                    "(" + String.Join(",",
                       (from p
                        in methodSymbol.Parameters
                        select p.Type.Name + " " + p.Name).ToArray()
                       ) + ")",
                Path.GetFileName(referenceLocation.Location.GetLineSpan(false)
                    .Path),
                referenceLocation.Location.GetLineSpan(false)
                    .StartLinePosition.Line,
                referenceLocation.Location.GetLineSpan(false)
                    .StartLinePosition.Character,
                referenceLocation.Location.GetLineSpan(false)
                    .EndLinePosition.Character));
            }
            else
            {
                throw new ApplicationException("Call spans multiple lines");
            }
        }
    }
} 
```

但这给了我一个`ReferencedSymbol`. 虽然这给了我调用该方法的文件和行号，但我还想获得调用该方法的特定参数。我怎样才能转换我拥有的东西或获得与 Roslyn 相同的信息？（请注意，我首先使用该方法加载解决方案，`Solution.Load`然后循环查找该方法的定义/声明位置（`createCommandList`））。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-30T17:59:37.980

您已经在这里使用 Roslyn。当您拥有 时`referenceSymbol`，您可以获取方法声明语法，然后向下查看树以获取参数列表。

我插入了一个`arguments`使用您的变量`referenceSymbol`：

```
// Snip start
foreach (MethodSymbol methodSymbol in createCommandList)
{
    foreach (ReferencedSymbol referenceSymbol
        in methodSymbol.FindReferences(solution))
    {
        var arguments = referenceSymbol.Definition.DeclaringSyntaxNodes.First()
            .DescendantNodes().OfType<ParameterSyntax>().ToList();

        foreach (ReferenceLocation referenceLocation in
            from l
            in referenceSymbol.Locations
            orderby l.Document.FilePath
            select l)
        {
// Snip end 
```

当您执行调试输出时，您可以使用该参数列表来获取名称。

我的解决方案需要获取 的`First()`，`DeclaringSyntaxNodes`我不太喜欢，但找不到另一种方法来获取语法树的后代节点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-24T03:53:46.720

我发现了另一种从可能对其他人也有效的方法中获取参数列表的方法。

假设我有以下具有两个参数的方法：

```
public string DebugPage(string enabled, string show){
  //do stuff 
} 
```

然后，您可以随心所欲地获得节点。例如，这给了我一个公共方法列表：

```
IEnumerable<MethodDeclarationSyntax> methods = from m in root.DescendantNodes().OfType<MethodDeclarationSyntax>() where m.Modifiers.ToString().Contains("public") select m; 
```

然后我可以遍历该方法列表以获取该方法的[ParameterList](http://www.coderesx.com/roslyn/html/F5EB5EF5.htm)属性，该属性被公开以使此操作非常容易。在此循环结束时，列表`parameters`将保存方法中每个参数的名称（在`Debug`上面的方法示例中，它将保存值`enabled`并且`show`如预期的那样）：

```
var parameters = new List<string>();

foreach (var method in methods)
{
   foreach (var n in method.ParameterList.Parameters)
   {
     var parameterName = n.Identifier.Text;
     parameters.Add(parameterName);
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T19:43:17.870

您可以在它出现的特定源位置搜索引用的语法树以找到您要查找的节点。您需要从树的根节点使用 DescendentNodes 之类的调用，并且您可能需要请求您正在寻找的语言特定节点类型。在引用树中拥有节点后，您就可以使用该树的语义模型来告诉您有关参数的其他信息。

# c# - Assembly.GetAssembly(type) 与 type.Assembly

> ID：11264060
> 
> 赞同：3
> 
> 时间：2012-06-29T14:53:30.430
> 
> 标签：c#, reflection, .net-assembly

我想知道调用这两种方法有什么好处（如果有的话），为什么？
它们在功能上是等效的，还是我应该总是选择一个而不是另一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T14:57:58.893

AFAIK 它们在功能上是等效的，但是 Assembly.GetAssembly(Type) 在 core-clr （Silverlight 等）中不可用

`Type`根据您是否为空 ，您会得到不同的错误。`Type.Assembly`将抛出 NullReferenceException（自然），而`Assembly.GetAssembly(Type)`将抛出 ArgumentNullException。根据您的代码，您可能更喜欢其中一种。

编辑：查看源代码`Assembly.GetAssembly`：

```
public static Assembly GetAssembly(Type type)
{
    if (type == null)
        throw new ArgumentNullException("type");
    Contract.EndContractBlock();

    Module m = type.Module;
    if (m == null)
        return null;
    else
        return m.Assembly;
} 
```

鉴于`System.Type.Assembly`：

```
public abstract Assembly Assembly {
    get;
} 
```

如果我没记错的话，运行时类型的 System.Type 是它们自己的子类（或类似的东西）所以我猜每个可能都会覆盖并直接返回一个程序集引用。除此之外，我认为除了 null 处理之外，您的代码无需担心任何重大差异，这取决于您。（或者，如果您正在运行 Core-CLR，在这种情况下您没有 Assembly.GetAssembly，因此您*必须* 使用 Type.Assembly）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T14:58:09.360

从[文档中`Type.Assembly`](http://msdn.microsoft.com/en-us/library/system.type.assembly.aspx)

> 如果当前`Type`对象表示构造的泛型类型，则此属性返回包含泛型类型定义的程序集。
> 
> 例如，假设您创建了一个名为 `MyGenerics.dll`包含泛型类型定义 的程序集`MyGenericStack<T>`。如果 `MyGenericStack<int>`在另一个程序集中创建 的实例，则构造类型的 Assembly 属性返回一个 Assembly 对象，该对象表示`MyGenerics.dll`

从[Assembly.GetAssembly](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.getassembly.aspx)的文档中：

> 为了调用此方法，您必须有一个`Type`对象，这意味着定义该类的程序集必须已经加载。

# ruby - 使用进程监视器时，Ruby Open3.popen3 标准输出管道不起作用

> ID：11264061
> 
> 赞同：1
> 
> 时间：2012-06-29T14:53:33.473
> 
> 标签：ruby, process, stdout, pipe, monitor

我注意到，当我使用进程监视器（例如 God 或 Bluepill）运行 ruby​​ 应用程序时，应用程序的`Open3.popen3() { |stdin, stdout, stderr| }`调用部分不起作用，特别是在从`stdout`. 当我直接使用`ruby`.

有任何想法吗？

# javascript - 使用 Javascript Bookmarklet 在当前窗口中打开本地 html 文件

> ID：11264065
> 
> 赞同：1
> 
> 时间：2012-06-29T14:54:00.093
> 
> 标签：javascript, browser, bookmarklet

我正在尝试构建一个示例书签来获取当前网页源代码并将其传递给验证器。Validator 不是一个在线网站，而是一个包含一堆 javascript 和 html 文件的文件夹。我正在尝试借助 javascript 小书签代码打开 file:///C:/Users/Electrifyings/Desktop/Validator/Main.html 文件，并将源代码放在新打开的窗口的文本区域中，但它是由于某些我不知道的原因而无法工作。

这是带有算法的示例代码：

```
javascript:(function(){var t = document.body.innerHTML;window.open('file:///C:/Users/RandomHero/Desktop/test.html',_self);document.getElementById("validator_textarea")=t;})() 
```

以下是步骤：

1.  在变量中获取当前网页源代码。
2.  在当前或新窗口或新选项卡中打开本地存储的 HTML 网页（无论哪种方式都适合我，但没有运气）
3.  将变量中的源代码放入新打开的 HTML 文件的验证器文本区域。

我已经尝试了上面的代码有很多变化，但是卡在了它打开新窗口的部分。要么根本没有打开新窗口，要么在不加载文件的情况下打开空白窗口。

很想在这个问题上得到一些帮助，非常感谢。

哦，顺便说一句，

Windows 7 x64，尝试过 IE、Firefox 和 Chrome。所有最新和稳定的版本。我想这不是浏览器方面的问题，而是与 javascript 代码相关的问题，而不是使用 file:/// 协议打开 URI。让我知道是否需要更多详细信息。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T17:08:35.317

您不希望您访问的网页能够打开，`file://c:/Program Files/Quicken/YourSensitiveTaxInfo`对吗？因为如果你犯了一个错误并访问了一个“坏”的网站（无论是低劣的网站还是被黑客入侵的好网站），intarweb 上的坏人会突然访问你的私人信息。那会很糟糕。

浏览器制造商知道这一点，因此他们设置了非常严格的限制，以防止 Javascript 代码访问用户本地计算机上的文件。这就是阻碍你计划的事情。

解决方案？

*   将整个验证器构建到书签中（除非它真的很小，否则不太可能工作）
*   将您的验证器代码放在网络上的某个地方
*   写一个插件（因为用户必须选择安装一个插件，他们比网页获得更多的自由......即使对于Firefox，Chrome等插件基本上只是Javascript）

*** * 编辑 * ***

*   额外的奖励解决方案，如果您不将自己限制为纯客户端实现：
    1.  让您的小书签向页面添加一个普通 (HTML) 表单。
    2.  还要在页面中添加一个 iframe（如果你用 CSS 样式隐藏它就可以了）
    3.  将表单的目标属性设置为指向 iframe。这样一来，当用户提交表单并且服务器回复该提交时，服务器的回复将转到（隐藏的）iframe，而不是像通常那样替换页面。
    4.  将文件输入添加到您的表单 - 您将无法使用 Javascript 访问该输入中的文件，但这没关系，因为您的服务器将进行访问，而不是您的书签。
    5.  编写一个服务器端脚本，该脚本接受表单提交，读取随附的文件，然后将该文件作为响应复制回来。换句话说，您将拥有一个可以 POST 到的 URL，当它在 POST 的内容中看到一个文件时，它会以该文件的内容进行响应。
    6.  现在您已经获得了用户可以使用文件输入选择他们的验证器文件的所有内容，将其上传到您的服务器，您的服务器将返回它刚刚获得的文件，并且该文件将显示为 iframe 的内容。
    7.  现在您终于拥有了您努力获得的文件（在您的 iframe 中）`$('#thatIframe').html()`，您可以使用 viola 来访问您的文件。您可以保存当前页面的源代码，然后用上传的文件替换整个页面（然后将保存的页面源代码传递回新的验证器页面），或者您可以对上传的验证器文件的内容执行任何其他操作。

当然，如果文件在不同计算机之间没有变化，那么您可以通过一个服务器将验证器文件发回，从而使这一切变得更简单*；*这可能是一个没有任何逻辑的纯 Apache 服务器，因为它所要做的就是提供一个静态文件。

但无论哪种方式，如果您采用这种方法并且您的新文件上传脚本与您的起始网页*不在*同一台服务器上，您将遇到一个新的安全问题：跨域脚本限制。但是，这些限制远没有本地文件访问限制那么严格，因此有一些方法可以解决它们（JSONP、跨站点策略文件等）。已经有很多很棒的 Stack Overflow 帖子解释了这些技术，所以我不会在这里重复它们。

希望有帮助。

# iphone - iOS反转tableView排序顺序

> ID：11264066
> 
> 赞同：4
> 
> 时间：2012-06-29T14:54:01.897
> 
> 标签：iphone, ios, xcode, sorting, tableview

有没有办法反转 tableView 顺序？

例如，我有一个按 firstUpdated 到 LastUpdated 排序的 tableView。它确实会自动导致其由 plist 数据组成。但是如果我想把最新的数据放在上面，把旧的放在下面怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T15:05:29.197

您应该对用于填充表格视图的数组进行排序。

其他两个答案会起作用，但是如果您需要按对象的任何属性进行排序，我还有另一种方法：

您可以创建一个方法`-sortMyArray`

它看起来像：

```
-(void)sortMyArray
{
    NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"SomeObjectSortProperty" ascending:YES];

    NSArray *sortDescriptors = [NSArray arrayWithObject:sortDescriptor];

    [MyArray sortUsingDescriptors:sortDescriptors];
    [sortDescriptor release];
} 
```

当然，每次调用此方法后，都需要调用表视图重新加载数据方法。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-29T15:00:27.100

另一种解决方案可以正常工作，但这个解决方案要短一些。

`NSArray *reversedArray = [[originalArray reverseObjectEnumerator] allObjects];`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T15:27:59.823

`UITableViewDataSource`另一种选择（仅维护原始数组的副本）是使用原始数组并在函数中以倒序抓取对象。

例子：

`id currentObject = [originalArray objectAtIndex:(originalArray.count - indexPath.row - 1)];`

这实际上可能是一个更好的解决方案，因为您不需要仅仅为了颠倒顺序而维护相同数据的 2 个副本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T15:03:18.617

您正在使用数组来填充表格视图中的数据...

对该数组进行排序，而不是对表顺序进行排序..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-29T14:58:13.777

```
self.yourCurrentArrayOfObjects = ...;
NSMutableArray *reversedArray = [NSMutableArray arrayWithCapacity:yourCurrentArrayOfObjects.count];
for (id object in yourCurrentArrayOfObjects.reverseObjectEnumerator)
{
    [reversedArray addObject:object];
}
self.yourCurrentArrayOfObjects = [reversedArray copy];
[self.tableView reloadData]; 
```

# ruby-on-rails-3 - 链轮和性能

> ID：11264073
> 
> 赞同：0
> 
> 时间：2012-06-29T14:54:24.850
> 
> 标签：ruby-on-rails-3, sprockets

我注意到许多带有大量 javascript 的页面最后会加载某些文件，因此页面加载速度更快，sprockets 可以帮助我在 Rails 3 中做到这一点吗？如果没有，在使用脚本时我可以使用哪些方法来提高性能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T15:09:03.253

这里有几件事需要考虑 - 首先是浏览器。大多数现代浏览器都可以异步加载资源，因此将 javascript 放在 html 末尾的旧技巧不再像以前那样必要了。在 css-tricks 上阅读这篇关于异步的文章：http: [//css-tricks.com/thinking-async/](http://css-tricks.com/thinking-async/)

接下来，资产管道的重点是将所有 javascript 和 css 连接、缩小和压缩成两个文件，一个“application.js”和一个“application.css”。这有助于减少 HTTP 请求，意味着只有第一个页面加载会占用逻辑是，通过适当的缓存，第一次加载将花费更长的时间来获取怪物文件，但是一旦它们被下载，用户就有了 js和缓存在他们机器上的样式表。阅读资产管道指南，了解有关其使用和优势的更多信息：http: [//guides.rubyonrails.org/asset_pipeline.html](http://guides.rubyonrails.org/asset_pipeline.html)

# java - 用于新 GCM 的 Android HttpsURLConnection 和 JSON

> ID：11264074
> 
> 赞同：1
> 
> 时间：2012-06-29T14:54:27.360
> 
> 标签：java, android, json, google-cloud-messaging

我正在大修我的应用程序的某些部分以使用新的 GCM 服务来替换 C2DM。我只是想从 Java 程序创建 JSON 请求以进行测试，然后读取响应。截至目前，我找不到我的 JSON 请求的任何格式问题，并且谷歌服务器总是返回代码 400，这表明我的 JSON 有问题。 [http://developer.android.com/guide/google/gcm/gcm.html#server](http://developer.android.com/guide/google/gcm/gcm.html#server)

```
JSONObject obj = new JSONObject();
    obj.put("collapse_key", "collapse key");
    JSONObject data = new JSONObject();
    data.put("info1", "info_1");
    data.put("info2", "info 2");
    data.put("info3", "info_3");
    obj.put("data", data);
    JSONArray ids = new JSONArray();
    ids.add(REG_ID);
    obj.put("registration_ids", ids);
    System.out.println(obj.toJSONString()); 
```

我将请求打印到 Eclipse 控制台以检查其格式

```
byte[] postData = obj.toJSONString().getBytes();
    try{
    URL url = new URL("https://android.googleapis.com/gcm/send");
    HttpsURLConnection.setDefaultHostnameVerifier(new JServerHostnameVerifier());
    HttpsURLConnection conn = (HttpsURLConnection) url.openConnection();
    conn.setDoOutput(true);
    conn.setDoInput(true);
    conn.setUseCaches(false);

    conn.setRequestMethod("POST");
    conn.setRequestProperty("Content-Type", "application/json");

conn.setRequestProperty("Authorization", "key=" + API_KEY);
    System.out.println(conn.toString());
    OutputStream out = conn.getOutputStream();
              // exception thrown right here. no InputStream to get
    InputStream in = conn.getInputStream();
    byte[] response = null;
    out.write(postData);
    out.close();
    in.read(response);
    JSONParser parser = new JSONParser();
    String temp = new String(response);
    JSONObject temp1 = (JSONObject) parser.parse(temp);
    System.out.println(temp1.toJSONString());
    int responseCode = conn.getResponseCode();
     System.out.println(responseCode + "");
    } catch(Exception e){
        System.out.println("Exception thrown\n"+ e.getMessage());
    }

} 
```

我确定我的 API 密钥是正确的，因为这会导致错误 401，所以说谷歌文档。这是我第一次使用 JSON，但由于它的简单性，它很容易理解。有人对我为什么总是收到代码 400 有任何想法吗？

更新：我已经测试了 gcm 提供的谷歌服务器示例类，所以问题一定出在我的代码上。

```
{"collapse_key":"new-test-notification","data":{"info1":"info_1","info3":"info_3","info2":"info 2"},"registration_ids":["APA91bG3bmCSltzQYl_yOcjG0LPcR1Qemwg7osYJxImpSuWZftmmIjUGH_CSDG3mswKuV3AAb8GSX7HChOKGAYHz1A_spJus5mXFtfOrK0fouBD7QBpKnfc_ly0t3S8vSYWRjuGxtXrt"]} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T15:10:28.830

我使用不同的方法解决了它，所以它一定是我最初的实现。

```
List<NameValuePair> list = new ArrayList<NameValuePair>();
        list.add(new BasicNameValuePair("username",username));
        list.add(new BasicNameValuePair("deviceId",regId));
        list.add(new BasicNameValuePair("deviceType","AndroidPhone"));
        DefaultHttpClient client = new DefaultHttpClient();
        HttpPost post = new HttpPost("example.url.com");
        post.setEntity(new UrlEncodedFormEntity(list));
        ResponseHandler<String> handler = new BasicResponseHandler();
        HttpResponse response = client.execute(post);
        String responseString = handler.handleResponse(response);
        JSONObject jsonResponse = new JSONObject(responseString); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T09:14:33.163

我在这里读到您应该将“浏览器应用程序密钥” [GCM 与 PHP（谷歌云消息传递）一起使用](https://stackoverflow.com/questions/11242743/gcm-with-php-google-cloud-messaging)（在评论中）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T19:11:17.097

尝试使用 curl 或其他命令行工具重现错误，这样我们就可以消除您的 java 中存在我们都遗漏的错误的可能性。

# vb6 - 任何实现vb形式复制纸质表格然后打印保存的小技巧

> ID：11264076
> 
> 赞同：0
> 
> 时间：2012-06-29T14:54:35.853
> 
> 标签：vb6

我正在寻找可用于使以下内容尽可能简单和/或可重复使用的技巧。我需要在 vb6 中重新创建一个纸质表单，允许用户填写值，然后能够打印并保存完成的表单。我正在考虑扫描表单并将其保存为 jpeg。使用此 jpg 作为图片框中的图片。用复选框/文本框等覆盖它。将各种控件的值保存到数据库等。

似乎只有 1 种形式的工作量很大，而且可重用性不强。

有没有更好的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T15:53:38.047

好吧，如果您想要的是“简单” - 没有任何工具可以自动完成您想要的一切。有一些工具可以将纸质表格转换为 PDF - 但您仍然需要自己完成数据库工作。

至于“可重用”——我想创建一个简单的 Web 应用程序将满足这个标准，因为您的用户不必安装您的应用程序。

# asp.net-mvc - Spark 视图引擎和 MVC.NET 4

> ID：11264078
> 
> 赞同：3
> 
> 时间：2012-06-29T14:54:45.137
> 
> 标签：asp.net-mvc, spark-view-engine

有谁知道[Spark](http://sparkviewengine.com/ "火花视图引擎")是否会过渡到 MVC.NET 4？

我查看了[repo](https://github.com/loudej/spark/branches)上的公共分支，但没有任何迹象表明有任何努力，而且自 2 月份以来也没有任何活跃的提交。

如果是这样...任何想法它会有多远？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T16:37:40.437

**更新：感谢一位**[善良的贡献者](https://github.com/SparkViewEngine/spark/pull/39)的努力，现在已经发布了

在这里找到它 --> [http://nuget.org/packages/Spark.Web.Mvc4](http://nuget.org/packages/Spark.Web.Mvc4)

* * *

尚未完成的原因是，自从 Razor 出现以来，我们在 ASP.NET MVC 4 中没有看到对 Spark 的任何需求。Razor 与 MVC 和工具支持紧密结合，以至于作为默认设置，它完全消除了任何竞争。

我们在 NancyFX、FubuMVC 和 ServiceStack 等替代框架领域看到了更多需求，因此我们将大部分有限资源集中在那里。

如果您希望看到对 MVC 4 的支持并准备帮助实现它，请务必与我联系，因为我想提供帮助，但我的时间很长，因为它在许多其他希望 Spark 集成的项目上出色地。

# cakephp - CakePHP 路由和分页

> ID：11264079
> 
> 赞同：1
> 
> 时间：2012-06-29T14:54:45.190
> 
> 标签：cakephp, pagination, routes, paginator

我创建了一条看起来像这样的路线

```
Router::connect('/:slug', array('controller' => 'categories', 'action' => 'view'), 
                                                    array('pass' => array('slug'))); 
```

直到这里，一切正常，访问链接`http://example.com/animals-and-pets`，工作完美。

在此页面上，我有一个分页，这给了我很大的问题，页面的链接生成错误，如下所示：[http](http://example.com/categories/view/animals-and-pets/page:2) ://example.com/categories/view/animals-and-pets/page:2 。

我想要得到的结果是`example.com/animals-and-pets/2`。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T15:21:03.900

我曾经这样做过： [更改 CakePhp1.3 分页器目标 url？](https://stackoverflow.com/questions/4225632/change-cakephp1-3-paginator-destination-url)

但是，如果您使用`\page:2`而不是`\2`

现在在 cake 2.0 中，我调用`$this->Paginator->options()`以在视图中的其余分页选项之前设置正确的 url。就像是：

```
//Set the correct url for the pagination, cake will add the "page:" and "sort:" variables to this url
$this->Paginator->options(array('url'=> array('controller' => 'categories', 'action' => 'view', 'slug' => $this->params['pass'][0])));
//now display the pagination
echo $this->Paginator->counter(array('format' => __('Page {:page} of {:pages}')));
echo $this->Paginator->prev('«', array(), null, array('class' => 'prev disabled'));
echo $this->Paginator->numbers(array('separator' => ''));
echo $this->Paginator->next('»', array(), null, array('class' => 'next disabled')); 
```

希望这可以帮助

# php - codeigniter - 插入返回 true，不修改数据库

> ID：11264085
> 
> 赞同：2
> 
> 时间：2012-06-29T14:55:04.190
> 
> 标签：php, database, codeigniter

我在 for 中得到了这个更新脚本：

```
if(isset($_POST[$i+1 . '_create_metier'])){
  $new_entry = array(
    'id_parent' => $current[0]->id,
    'work' => $_POST[$i+1 . '_create_metier'],
    'days' => $_POST[$i+1 . '_create_daycount'],
    'price' => $_POST[$i+1 . '_create_price'],
    'cr_date' => date('d-m-Y H:i:s'),
    'user' => ''
  );
  var_dump($new_entry);
  if(!$this->db->insert('meta_parent',$new_entry)){
    echo 'fail';
    $p3 = 0;
  }else{
    echo 'success';
  }
} 
```

为我的`var_dump`数据库结构返回一个填充良好的数组，并打印“成功”，这意味着查询有效。

但我的数据库中没有任何修改。这不是我第一次使用 codeigniter，我从来没有遇到过这样的问题。

感谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T14:16:55.213

我认为错误是日期格式，MySQL接受这种格式的日期：Ymd H:i:s

尝试更换

```
'cr_date' => date('d-m-Y H:i:s'), 
```

和

```
'cr_date' => date('Y-m-d H:i:s'), 
```

# assembly - 将两个 obj 文件链接到 bin

> ID：11264086
> 
> 赞同：1
> 
> 时间：2012-06-29T14:55:04.247
> 
> 标签：assembly, linker, bin, object-files

在过去的几天里，我正在玩引导加载程序和汇编语言。我已将文件编译为 .obj 文件格式。现在我需要链接它们。有谁知道可以使用哪个链接器，或者任何人都可以在这里放置链接到带有示例的页面？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T15:06:01.873

使用 GNU 工具链中的 'ld'。

这是一个包含正确放置内核所需的所有链接器脚本的页面。

[http://www.osdever.net/bkerndev/Docs/basickernel.htm](http://www.osdever.net/bkerndev/Docs/basickernel.htm)

第一阶段引导加载程序是一个带有操作码的“平面”二进制文件。对于基于 x86 BIOS 的引导，您所要做的就是将代码放在 0x7C00（您知道，我敢肯定）。

# c# - NHIbernate 条件投影查询

> ID：11264096
> 
> 赞同：0
> 
> 时间：2012-06-29T14:55:33.720
> 
> 标签：c#, nhibernate, nhibernate-criteria, nhibernate-projections

我有要求，其中我必须使用条件投影查询分别计算现金和信用卡的总数。我下面的代码不起作用，它给了我数据类型不匹配错误。它说真条件返回十进制，假返回货币。我不确定它为什么会这样，因为 0.0M 确实代表十进制。有人可以帮我查询吗？

```
RefundTemplate.Criteria.SetProjection(
                        Projections.ProjectionList()

                        .Add(Projections.Sum(Projections.Conditional
                            (Restrictions.Eq("PaymentType", "CK"),
                                  Projections.Property("Gross"), Projections.Constant(0.0M))), "CashRefund")
                        .Add(Projections.Sum(Projections.Conditional
                            (Restrictions.Eq("PaymentType", "CC"),
                                  Projections.Property("Gross"), Projections.Constant(0.0M))), "CreditRefund")); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T06:59:45.260

您可以明确指定要使用的类型。例如：

```
Projections.Constant(0.0M, NHibernateUtil.Decimal) 
```

`NHibernateUtil`在此处查看该类的文档：http: [//elliottjorgensen.com/nhibernate-api-ref/NHibernate/NHibernateUtil.html](http://elliottjorgensen.com/nhibernate-api-ref/NHibernate/NHibernateUtil.html)

# php - 使用 php 将我在 facebook 上受邀参加的活动导入我的网站

> ID：11264108
> 
> 赞同：0
> 
> 时间：2012-06-29T14:56:09.930
> 
> 标签：php, facebook, facebook-fql

我想基本上让我在 facebook 上被邀请参加的所有活动都为我的内部网站数据库提供这些信息；假设每天都使用 cron。问题是，如果您是发布活动的人而不是收到邀请的人，我认为您可以获得活动。

我错了吗，或者有人可以为我提供一些关于如何完成这项工作的见解

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T15:14:53.063

`me/events/not_replied`您可以使用或使用[Graph Api Explorer](https://developers.facebook.com/tools/explorer?method=GET&path=me/events/not_replied)获取尚未回复的事件。

您可以通过电话获取您已订阅/接受的所有即将发生的事件`me/events`。[绘制 APi Exlporer](https://developers.facebook.com/tools/explorer?method=GET&path=me/events) 并将时间保存在您的数据库中，并使用`since`该时间的参数来获取最新的订阅事件。
如果您正在运行 cron 作业，请确保您没有重复或丢失某些事件。

# javascript - Microsoft Ajax Minifier 重命名我的函数名称

> ID：11264109
> 
> 赞同：4
> 
> 时间：2012-06-29T14:56:22.970
> 
> 标签：javascript, jquery-plugins, microsoft-ajax-minifier

我正在使用 jQuery 插件并通过 Microsoft Ajax Minifier 运行它。我的脚本对我来说效果很好，但现在我遇到了这个插件的问题。问题是插件使用字符串按名称调用函数：

```
var s = (getCachedSortType(table.config.parsers, c) == "text") ? ((order == 0) ? "sortText" : "sortTextDesc") : ((order == 0) ? "sortNumeric" : "sortNumericDesc"); 
```

注意“sortNumeric”和“sortNumericDesc”。这调用了这些函数：

```
function sortNumeric(a, b) {
            return a - b;
        }

function sortNumericDesc(a, b) {
            return b - a;
        } 
```

这是调用这些函数的唯一位置，因此 IDE VS2010 不会认为这些函数是从任何地方调用的……它们是通过上面的代码有条件地调用的。

******这是问题******

 **当它被缩小时，函数的字符串名称会保留，但函数会被删除，因为它不会被引用。

**有没有办法调整设置缩小器不这样做？**

我也看到它改变了函数的名称，所以

```
function testFunctionName(a,b) 
```

会成为

```
function a 
```

这也会导致像我这样的情况出现问题......请注意，我知道这样硬编码函数名称是糟糕的代码设计。就像我说的那样，这是我正在使用的插件。我会接受一种直接调用函数而不是通过字符串调用函数的解决方案，但我总是对修改插件犹豫不决。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T15:06:02.577

使用`-unused:keep`switch 保留未使用的功能。这自然会阻止 minifier 删除真正未使用的代码。

使用[`-rename`switch](http://ajaxmin.codeplex.com/wikipage?title=Command-Line%20Switches)为您按名称调用的函数分配永久名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T15:10:31.577

从[文档](http://ajaxmin.codeplex.com/wikipage?title=Command-Line%20Switches)：

> -evals:(ignore|immediate|safeall) 指定如何处理 eval 语句。这是一个需要注意的重要开关。默认情况下，Ajax Minifier 将忽略任何 eval 语句，如果它包含引用命名局部变量或函数的 eval 语句，则可能会破坏您的缩小代码。这是因为默认情况下 Ajax Minifier 也会重命名局部变量和函数，但它不会修改传递给 eval 函数的文本，因此这些引用可能会中断。如果您缩小代码并且它停止正常工作，请检查代码中的 eval 语句。如果有，请尝试指定其他两个 –evals 开关选项之一。“立即”选项不会重命名与任何 eval 调用相同范围内的任何变量或函数；“safeall”选项不会重命名任何变量或函数，不仅在与任何 eval 调用相同的范围内，而且在任何父范围内。这将严重影响代码的缩小，但应确保对 eval 函数的任何调用都能按预期工作。默认设置是全部忽略。

然后尝试`-evals:immediate`，如果您的代码仍然损坏，您必须使用`-evals:safeall`（即使这会使您的 JavaScript 文件变大）。

**更新**
如果您不使用，`eval`那么您必须完全跳过函数重命名：

> -rename:(all|localization|none) 指定是否自动重命名局部变量和函数。全局变量和函数不会自动重命名，属性名称也不会。如果指定了“localization”，只有不以“L_”开头的变量才会被重命名。默认值为全部。

只需添加`-rename:none`.**

# jquery - 使用 jQuery getScript 方法访问加载的脚本

> ID：11264111
> 
> 赞同：0
> 
> 时间：2012-06-29T14:56:29.670
> 
> 标签：jquery, fullcalendar, getscript

我正在使用`$.getScript`在我自己的插件中加载一个 jQuery 插件。问题是我只能访问加载的插件并在`$.getScript`方法的回调函数中实例化一个对象。

我想知道是否有办法在回调函数之外进行实例化。请参阅以下代码中的实际实现：

```
init = function( options ) {
    $.getScript('javascript/lib/fullcalendar-1.5.3/fullcalendar/fullcalendar.js', function() {
        // Instantiation is require to be done here
        self.fullCalendar(options);
    });

    self.opt = $.extend(true, {}, defaults, options);
    self.data('settings', self.opt);
    if (typeof options.test === 'function') {
        // I would liked to do this here but at this point fullcalendar is not defined
        self.fullcalendar(options);

        var tests = test.call(self, 3, 1);
        options.test.call(self, tests, null);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T16:53:25.763

每当您启动 fullCalendar 时，创建一个全局变量并将日历分配给它。

```
init = function( options ) {
    var myCalendar;

    $.getScript('javascript/lib/fullcalendar-1.5.3/fullcalendar/fullcalendar.js', function() {
                        // Instantiation is require to be done here
        myCalendar = self.fullCalendar(options);
    });

    // Test full Calendar
    var viewName = myCalendar.fullCalendar('getView').name;
    alert(viewName);
} 
```

我没试过这个。但这只是一个主要想法。我希望这有帮助。

# mercurial - hg convert 无法识别来自 svn 存储库的主干/标签/分支

> ID：11264113
> 
> 赞同：2
> 
> 时间：2012-06-29T14:56:51.197
> 
> 标签：mercurial, mercurial-convert

我尝试使用`svnsync`然后将 SVN 项目转换为 Mercurial：

```
mercurial-2.2.2/hg convert --authors ../authors.txt project 
```

[如此处](http://mercurial.selenic.com/wiki/ConvertExtension)所述（Ubuntu 提供的 Mercurial 版本在尝试转换存储库时崩溃，因此我删除了输出并下载了最新版本的 Mercurial）。

但是，生成的存储库有

```
project/trunk/blah 
```

和

```
project/tags/1.1/blah 
```

作为修订中的文件，而不是将主干识别为`default`分支，将标签识别为标签。

转换它的正确方法是什么？

请注意：该项目最初存储在 SVN 中是这样的（由于开发人员错误）：

```
project/project/trunk 
```

但在最近的 SVN 版本中是这样的：

```
project/trunk 
```

我以为`hg convert`会查看 HEAD 中的文件结构并推断出正确的结构，但显然我错了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T15:13:27.703

添加到命令行：

```
--config convert.svn.trunk=project/trunk --config convert.svn.branches=project/branches --config convert.svn.tags=project/tags 
```

# javascript - ASP:label 和 javascript getElementById

> ID：11264117
> 
> 赞同：0
> 
> 时间：2012-06-29T14:56:56.540
> 
> 标签：javascript, asp.net

我正在尝试使用以下代码获取带有 Javascript方法的`Text`属性的值`asp:label``document.getElementById`

```
<asp:Label ID="lblThis" runat="server" Visible="False" Text="this is a label" />
<script type="text/javascript" language="javascript">
    var lblThis = document.getElementById('<%= lblThis.ClientID %>')
    var lblThisText = lblThis.innerText
    alert(lblThisText)
</script> 
```

当我打开页面时，什么也没有发生。我不是 javascript 人，所以我不知道我哪里出错了。我也不想在这里设置任何属性，只是将 an 的值读`asp:label`入 javscript。

感谢您提供的任何提示、指示或帮助。

更新

我已按照[Mennan 的回答](https://stackoverflow.com/a/11264150/312777)`Visible="false"`替换为，现在收到带有“未定义”的警报。正确的方向，但我还没有到那里。`style="display:none"`

更新

我现在有一段工作代码。 `innerText`什么都没有，但`innerHTML`有正确的字符串。正确代码：

```
<asp:Label ID="lblThis" runat="server" style="display:none" Text="this is a label" />
<script type="text/javascript" language="javascript">
    var lblThis = document.getElementById('<%= lblThis.ClientID %>')
    var lblThisText = lblThis.innerHTML
    alert(lblThisText)
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T14:59:04.713

利用

```
<asp:Label ID="lblThis" runat="server" style="display:none" Text="this is a label" /> 
```

不是

```
Visible="False" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T14:59:13.767

您是否在脚本标签类型中拼错了 javascript？

```
<script type="text/javascript"> 
```

此外，当您使用“可见”属性时，控件甚至不会发送到页面。这与在样式中使用“display: none”不同。您需要将“显示”的样式设置为“无”，然后 javascript 会找到该元素。

# android - 禁用android中的系统按钮

> ID：11264131
> 
> 赞同：0
> 
> 时间：2012-06-29T14:57:55.573
> 
> 标签：android

我正在开发一个应用程序，它将在一个小型展览的平板电脑上运行。我想阻止访问者关闭应用程序，因此我尝试找出如何禁用平板电脑上的系统按钮（例如主页按钮）。

平板电脑是带有 android ICS 的华硕变压器。

# java - Tomcat：跟踪所有（甚至捕获的）异常

> ID：11264133
> 
> 赞同：0
> 
> 时间：2012-06-29T14:58:00.830
> 
> 标签：java, exception, tomcat, primefaces, trace

是否可以跟踪 Tomcat 服务器（或者，一般来说，JVM）中的所有异常？

谢谢大家！

PS我需要它，因为发生异常 [`org.primefaces.application.PrimeResourceHandler.handleResourceRequest()`](http://code.google.com/p/primefaces/source/browse/primefaces/trunk/src/main/java/org/primefaces/application/PrimeResourceHandler.java)并打印了一条微不足道的消息（第79行）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T15:10:18.500

当然。使用它启动tomcat：

```
./catalina jpda start 
```

然后使用 eclipse 调试器进行连接，如下所述：

[http://wiki.apache.org/tomcat/FAQ/Developing#Q1](http://wiki.apache.org/tomcat/FAQ/Developing#Q1)

例如当连接了 Eclipse 后，进入 Breakpoints 面板，如果在那里设置 java.lang.Exception 或 java.lang.RuntimeException 将会有一个按钮“Add Java Exception breakpoint”，所有的子类都会被捕获。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T15:17:00.240

在全球范围内，日志记录要么配置在

```
${catalina.base}/conf/logging.properties file or {java.home}/lib/logging.properties 
```

您可以通过取消注释以下属性并将其设置为 ALL 来更改跟踪级别。

```
org.apache.catalina.level=ALL 
```

更多信息：[文档](http://tomcat.apache.org/tomcat-7.0-doc/logging.html#Using_java.util.logging_%28default%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T15:06:07.550

我不知道 JVM 中有这样的功能。

我相信您希望弄清楚抛出异常的原因，对吗？我会使用诸如 Netbeans 之类的 IDE，将该库作为依赖项包含在内，下载源代码并在该行上放置一个断点。然后，通过标准调试器，我会在断点被命中时扫描堆栈跟踪以寻找线索。

# javascript - 任何 JavaScript 库都可以像 Cut The Rope JavaScript 实现一样执行吗？

> ID：11264139
> 
> 赞同：-2
> 
> 时间：2012-06-29T14:58:16.603
> 
> 标签：javascript, html, windows-8, microsoft-metro

现在画布标签开始得到许多浏览器的硬件执行[加速 - 谢谢大家！]，用 HTML5 开发休闲游戏变得更加可行。ZeptoLabs 在将 Cut The Rope 移植到 HTML5 以用作 Windows 8 Metro 应用程序方面做得很好。[您可以在此处](http://www.cuttherope.ie/dev/)找到一些详细信息，但它们没有详细说明。我想知道是否有人知道他们是否使用了库（例如[Impact](http://impactjs.com/)或[Crafty](http://craftyjs.com/)），或者您是否需要编写所有自定义和优化的 JavaScript 代码才能获得这种类型的性能。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T15:07:06.943

我不确定这是否是一个严格的 StackOverflow 问题（它是提供信息的，而不是寻找编程问题的解决方案），但看起来，因为[`libraries.js`](http://www.cuttherope.ie/scripts/libraries.js)包含许多库，但没有一个是真正的“游戏”库（例如， SoundManager2、jQuery 等），他们自己完成了大部分繁重的工作。

至于你提到的那些游戏框架是否会提供你正在寻找的高性能，嗯，只有一种方法可以找到。

# wcf - 如何使用 dll 在 IIS 上托管 Web 服务

> ID：11264144
> 
> 赞同：0
> 
> 时间：2012-06-29T14:58:34.150
> 
> 标签：wcf, web-services, iis, iis-7, web-hosting

我需要在 IIS 上托管一个 web 服务。我之前这样做过，我将拥有一个 .svc(WCF) 文件或 amsx 文件。但从来没有只用一个dll来做到这一点。我应该如何设置它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T18:27:50.183

使用 asp.net 兼容模式创建一个像这样的类...

```
[ServiceContract]
[AspNetCompatibilityRequirements(RequirementsMode =  AspNetCompatibilityRequirementsMode.Required)]
public class MyService    
{

//Some methods

} 
```

将 global.asax 文件中的类注册为 Web 服务

```
public class Global : System.Web.HttpApplication
{

    public void Application_Start(object sender, EventArgs e)
    {
        RegisterRoutes();
    }

    private static void RegisterRoutes()
    {
        RouteTable.Routes.Add(new ServiceRoute("myServiceUrl", new WebServiceHostFactory(), typeof(MyService)));
    }
} 
```

如果您的应用程序在端口 8080 上运行，那么您可以点击该服务

```
http://localhost:8080/myServiceUrl 
```

# google-drive-api - 任何能够获得目录列表功能的人都可以在 Android 中使用

> ID：11264145
> 
> 赞同：0
> 
> 时间：2012-06-29T14:58:43.140
> 
> 标签：google-drive-api

看来，最近发布的 Google Drive SDK 支持目录列表。

[https://developers.google.com/drive/v2/reference/files/list](https://developers.google.com/drive/v2/reference/files/list)

我尝试将其集成到我的 Android 应用程序中。

```
package com.jstock.cloud;

import java.io.IOException;
import java.util.ArrayList;
import java.util.List;

import android.util.Log;

import com.google.api.client.googleapis.auth.oauth2.GoogleCredential;
import com.google.api.client.googleapis.services.GoogleKeyInitializer;
import com.google.api.client.http.HttpTransport;
import com.google.api.client.json.JsonFactory;
import com.google.api.client.json.gson.GsonFactory;
import com.google.api.client.extensions.android2.AndroidHttp;
import com.google.api.services.drive.Drive;
import com.google.api.services.drive.Drive.Files;
import com.google.api.services.drive.model.File;
import com.google.api.services.drive.model.FileList;
import com.jstock.gui.Utils;

public class CloudFile {
    public final java.io.File file;
    public final long checksum;
    public final long date;
    public final int version;
    private CloudFile(java.io.File file, long checksum, long date, int version) {
        this.file = file;
        this.checksum = checksum;
        this.date = date;
        this.version = version;
    }

    public static CloudFile newInstance(java.io.File file, long checksum, long date, int version) {
        return new CloudFile(file, checksum, date, version);
    }

    public static CloudFile loadFromGoogleDrive(String authToken) {
        final HttpTransport transport = AndroidHttp.newCompatibleTransport();
        final JsonFactory jsonFactory = new GsonFactory();
        GoogleCredential credential = new GoogleCredential();
        credential.setAccessToken(authToken);
        Drive service = new Drive.Builder(transport, jsonFactory, credential)
            .setApplicationName(Utils.getApplicationName())
            .setJsonHttpRequestInitializer(new GoogleKeyInitializer(ClientCredentials.KEY))
            .build();

        List<File> files = retrieveAllFiles(service);
        Log.i("CHEOK", "size is " + files.size());
        for (File file : files) {
            Log.i(TAG, "title = " + file.getTitle());
        }
        return null;
    }

    /**
     * Retrieve a list of File resources.
     *
     * @param service Drive API service instance.
     * @return List of File resources.
     */
    private static List<File> retrieveAllFiles(Drive service) {
        List<File> result = new ArrayList<File>();
        Files.List request = null;
        try {
            request = service.files().list();
        } catch (IOException e) {
            Log.e(TAG, "", e);
            return result;
        }

        do {
            try {
                FileList files = request.execute();

                result.addAll(files.getItems());
                request.setPageToken(files.getNextPageToken());
            } catch (IOException e) {
                Log.e(TAG, "", e);
                request.setPageToken(null);
            }
        } while (request.getPageToken() != null && request.getPageToken().length() > 0);

        Log.i("CHEOK", "yup!");
        return result;
    } 

    private static final String TAG = "CloudFile";
} 
```

我总是从服务器返回 0 文件，并且没有抛出任何异常。有什么我错过的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T00:18:02.317

您必须请求访问完整的云端硬盘范围才能列出所有文件：[https ://developers.google.com/drive/scopes#requesting_full_drive_scope_for_an_app](https://developers.google.com/drive/scopes#requesting_full_drive_scope_for_an_app)

如果您使用默认（和推荐）范围`https://www.googleapis.com/auth/drive.file`，您将只能看到应用程序创建或打开的文件。

# php - PHP 和自定义 HTTP 标头，不好的做法？

> ID：11264149
> 
> 赞同：15
> 
> 时间：2012-06-29T14:58:55.767
> 
> 标签：php, http, http-headers

我有一个用于返回 json 数据的 PHP 应用程序的 RESTful API 的自定义实现，并且为了传达操作的状态，即请求中是否有失败，我正在设置一个自定义 HTTP 标头（非常tiny) json 对象作为字符串。这很好用，因为我可以发送响应并轻松地在客户端检索它们，而不会弄乱发送的实际数据。

问题是，使用这种方法有没有我可能没有意识到的缺点？应用程序设置自定义 http 标头似乎并不常见，所以我想知道这是一种不好的做法还是某种不好的“品味”。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-29T15:08:09.233

这是个有趣的问题。应该没有任何理由让它成为问题，但您应该考虑以下几点：

1.  标头对于您的应用程序必须是唯一的。不只是现在，而是永远。您应该确保为它们添加前缀，例如`X-MyApplication-Foo: Bar`. 不这样做可能会导致将来发生冲突。

2.  防火墙*有时*（很少）有点过分热衷于过滤未知的 HTTP 标头。这应该不是问题，但需要牢记。

3.  与现代浏览器相比，旧浏览器对标头字段大小的限制更小，因此您需要尽可能多地进行测试。

您是否有理由不能使用标准的 HTTP 错误代码？我了解您可能想要提供堆栈跟踪或其他有用的调试信息，但在发生错误的情况下，您不会只返回一个包含错误信息的 JSON blob，而不是正常的“结果”JSON 数据吗？您可以根据 HTTP 错误代码轻松检测到差异，并以不同方式处理这两种情况。

我担心您建议的方法的原因是标头用于更改或导致浏览器*行为*-它们并非旨在成为数据存储机制。

伪代码示例：

```
switch(httpResponseCode)
{
    case 200:
        parseResult(json);
        break;
    case 403:
        parseForbidden(json);
        break;
    case 500:
        parseServerError(json);
        break;
    default:
        // bad response code, handle appropriately
} 
```

# php - PHP/Drupal 7 错误解析错误：语法错误，意外的 T_GLOBAL in (C\......)

> ID：11264159
> 
> 赞同：1
> 
> 时间：2012-06-29T14:59:48.683
> 
> 标签：php, drupal-7

我正在构建一个自定义节点，它输出 3 组图像，所有图像都将根据传递给 mooFoo() 函数的参数而改变。但是我收到“解析错误：语法错误，意外的 T_GLOBAL”错误，而且它的描述性不是很强，谁能给我点头，我可能出错了，我通过谷歌进行了扫描，没有找到任何东西超级有帮助。我的代码在下面...

```
<?php

$rooPath = 'http://localhost/';

//path from application root
$relPath = 'trl/sites/default/files/';

$labTrl = 'TRL';
$dClass = 'ovinline';

//DEV
$imgPathRed = 'redNodePng6160.png';
$imgPathAmb = 'amberNodePng6160.png';
$imgPathGre = 'greenNodePng6160.png';

function mooFoo($img){

$img2 = $img;

switch($img2){
case 1:
      $fullPath = global $rooPath . global $relPath . global $imgPathRed;
      break;
case 2:
      $fullPath = global $rooPath . global $relPath . global $imgPathAmber;
      break;
case 3:
      $fullPath = global $rooPath . global $relPath . global $imgPathGreen;
      break;    
 }
return $fullPath;
}

?>

    <div class="<?php echo $dClass?>">
        <div class="field-label"><?php echo $labTrl?> 1:&nbsp;</div>
            <div class="field-items">
                <div class="field-item even">
                    <img typeof="foaf:Image" src="<?php echo mooFoo(2)?>" width="61" height="60" alt="" />
                </div>
            </div>
    </div> 
```

在我的脑海中，我可能无法以我在 html 中调用 mooFoo() 的方式打印到屏幕上，但我认为这不是它的无聊之处，所以我假设它与我正在尝试的方式有关使用全局变量，但我无法理解它的具体细节......如果有人能帮助我，我将不胜感激。

非常感谢

彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T15:16:06.557

做你的全球性的事情，比如：

```
function mooFoo($img){
  global $rooPath, $relPath, $imgPathAmber, $imgPathGreen, $imgPathRed;
 // ... more stuff here ...
 $fullPath = $rooPath . $relPath .$imgPathGreen;
 // ... more stuff here ...
} 
```

您不能像在那里使用它那样使用[全局关键字](http://php.net/manual/en/language.variables.scope.php)。

# java - 用于操作数据库的类，可在 Android 和 Java 桌面上运行

> ID：11264161
> 
> 赞同：0
> 
> 时间：2012-06-29T15:00:10.117
> 
> 标签：java, android, sqlite, ormlite

我想在桌面测试我的逻辑（以消除等待每次编译并在设备/模拟器上运行的痛苦......）所以我制作了普通的 Java 项目。

我在桌面和 Android 上都使用 ORMLite 和 SQLite。什么是最好的解决方案，它可以帮助我根据我正在运行的内容调用特定的 ORMLite 方法 - Android 还是桌面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T15:21:07.010

ORMLite 的全部意义在于对您隐藏底层数据库。也就是说，Android 环境与 JDBC 大不相同，所以我看不到在 Android 和桌面上使用相同代码的简单方法。

我会看一下[示例程序](http://ormlite.com/docs/examples)，看看它们有何不同。这应该可以帮助您编写不同的测试代码。

*   [简单的基本 JDBC 示例](http://ormlite.com/docs/example-simple)
*   [HelloAndroid 示例应用程序](http://ormlite.com/docs/android-hello)

# .net - 如何在 iOS 中实现用户注册和认证？

> ID：11264163
> 
> 赞同：3
> 
> 时间：2012-06-29T15:00:17.393
> 
> 标签：.net, objective-c, ios, authentication

我有一个在 .NET 中创建的网站，用户需要注册/登录才能访问他们的数据。我有一个 SQL Serber 数据库，并且注册/登录模块功能齐全。在 iOS 应用程序中实现此功能的最佳方法是什么？

我正在考虑使用 Web 服务来调用 Web 方法进行身份验证。但是每次我想检索数据时，我都必须在请求中传递用户登录名和密码。我不确定这是否是实现这一点的最有效方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T15:02:20.190

我不会每次都传递用户登录名和密码。首先让用户登录，然后创建一个身份验证令牌，将其存储在您的服务器上，然后将其传递回客户端并将其存储在钥匙串中。然后，您可以每次都传入令牌。

# iphone - iphone 发行版 Build 未安装在客户端 iphone 上，但它适用于我

> ID：11264164
> 
> 赞同：3
> 
> 时间：2012-06-29T15:00:23.280
> 
> 标签：iphone, xcode

我为客户端创建了一个应用程序，为它创建了一个新的分发证书和配置文件。

然后我`.ipa`为客户端创建了一个新的无线链接。和`.ipa`链接都安装在我的设备中，但它不适用于我的客户 iPhone。

不是因为UDID。我已经检查过很多次了。

我还添加了 armv7、armv6 和 i386。

谁能告诉我，是什么原因？

以下是客户端设备的详细信息。

> 版本：5.1.1(9B206) 可用空间：9.6 GB 型号：MD234E

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T03:55:58.547

您必须在配置文件中添加客户端的 UDID，下载更新的配置文件并使用您的临时分发设置对应用程序进行签名，将 .app 文件转换为 .ipa 并使用[https://testflightapp.com/](https://testflightapp.com/)共享它，还要确保检查所有在 TestFlight 上上传构建时的设备。
我不知道您的确切错误是什么。如果您有任何疑问，请告诉我。

# javascript - 给定边权时两个火车站之间的最短路径

> ID：11264168
> 
> 赞同：-2
> 
> 时间：2012-06-29T15:00:35.793
> 
> 标签：javascript, optimization

我必须找到火车站之间的最短距离——

给出的是代表火车站的节点，边被认为是距离。我必须计算最小距离。我使用的逻辑有一些错误。

这是我尝试过的代码。但我没有得到两点之间的最短路径。 ***实现它***：控制台： var e=new calc_route("1","3",steps) 解决方案应该给我 1 和 3 之间的最小距离.....例如可能有从 1 到 2 的路径wgt 5 和 2 到 3 总共 wgt 4 是 9。在 1 到 3 之间可能存在 wgt 10 的直接路径。那么应该选择第一条路径

```
steps=[
    {from:1, to:8},
    {from:1, to:2},
    {from:2, to:7},
    {from:7, to:9},
    {from:8, to:9}
];

function calc_route(start, end, data)
{           
    console.log(start+", "+end);
    console.log(data);              
    for(var i=0; i<data.length; i++)
    {

        if(data[i].to == end && data[i].from == start)
        {
            console.log("Return");                  
            console.log(data[i]);
            return data[i];
        }
        else
        {
            if(data[i].from == start)
            {                       
                calcfor =   data.splice(i, 1);                                      
                calc_route(calcfor[0].topoint, end, data);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T15:04:44.177

你应该看看 Dijkstra 的算法。[http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)

在 javascript 中找到它的实现，并重用已经测试过的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T15:04:45.740

似乎您需要实现的是 A* 算法... [http://en.wikipedia.org/wiki/A*_search_algorithm](http://en.wikipedia.org/wiki/A%2a_search_algorithm) 一个快速的谷歌会给你很多已经实现的结果。

# jquery - 如何使用 Jquery 在 Plupload 中查找和修改排队元素？

> ID：11264170
> 
> 赞同：0
> 
> 时间：2012-06-29T15:00:37.003
> 
> 标签：jquery, find, status, plupload

我目前正在使用 plupload 直接上传到 S3。它工作得很好，我想做的是一旦上传图像，启动一个脚本，然后下载图像以在我的网络服务器上创建一个缩略图，从而限制我的 S3 帐户获取缩略图的请求量. 在完成此操作时，我希望将 plupload 小部件中排队的文件名更新为“FileName.jpg 现在正在处理”。

我的问题是找到更新文本的元素。这是我目前所拥有的......

**在上传器设置中：**

```
init: attachCallbacks, 
```

**被调用的函数：**

```
function attachCallbacks(uploader){
    uploader.bind('FileUploaded', function(up, file, response){
        $('tr#'+file.id).find('td:first').find('span').html(file.name+' is Now Processing...');
    });
} 
```

**我试图查找和更新的地方：**

```
<table id="uploader_filelist" class="plupload_filelist_content" unselectable="on">
<tbody>
<tr id="p170sanph11rqv1cnts6h1ujm1gnm3" class="plupload_done ui-state-default plupload_file">
<td class="plupload_cell plupload_file_name">
<span>FileName.jpg</span>
</td>
<td class="plupload_cell plupload_file_status">100%</td>
<td class="plupload_cell plupload_file_size">28 KB</td>
<td class="plupload_cell plupload_file_action">
</tr>
</tbody>
</table> 
```

有任何想法吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T15:31:59.373

我最初问过这个问题是因为我使用的是[Plupload 的 S3](https://github.com/moxiecode/plupload/tree/master/examples/jquery)示例，但想要一个自定义 UI。我最终使用了[plupload 的自定义示例](http://www.plupload.com/example_custom.php)并将其与他们的 S3 示例相结合，一切正常。

# java - java - 如何在java中将文件存储在特定的HD块中？

> ID：11264171
> 
> 赞同：-6
> 
> 时间：2012-06-29T15:00:47.097
> 
> 标签：java

我想使用 btree 在 java 中编写一个简单的数据库，我必须将 btree 的每个节点存储在一个特定的 HD 块中并将地址存储在节点中......我该怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T15:09:20.160

`/dev/sda1`在 Unixoids 上，您可以像打开任何其他文件一样打开原始设备。然后您可以使用`RandomAcccessFile`.

但是：要**非常**确定你**真的**知道你在做什么！评论可能会给你一个线索。

# php - 将使用 PDO 删除的行作为对象返回

> ID：11264177
> 
> 赞同：1
> 
> 时间：2012-06-29T15:01:28.787
> 
> 标签：php, mysql, pdo

如何将删除的行作为对象返回？我是否必须查询它们，删除它们，然后将删除的 id 与查询的 id 进行比较，还是有内置的方法？

* 我**不想删除多少****行**，我想要行**的值**

 ****将 PDO 与 MySql 一起使用，并将行作为“媒体”类返回。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T15:13:45.327

寻找从数据库中删除行的替代方法通常有充分的理由。听起来您可能已经发现了这一点。您是否考虑过添加“标志”，例如 removed = 1 或 0 ？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T15:11:02.693

您需要在删除它们之前查询这些行。UPDATE、INSERT 和 DELETE 仅返回受影响的行数值。您可能可以使用触发器扩展此功能，但就个人而言，这可能是矫枉过正。****

# objective-c - Objective-C iOS，设置文本更新延迟

> ID：11264187
> 
> 赞同：0
> 
> 时间：2012-06-29T15:02:20.647
> 
> 标签：objective-c, ios, timer

我正在尝试找到解决我刚刚偶然发现的问题的方法。试图搜索它，但它不是我正在寻找的。

我正在做一个带有两个标签栏的 GPS 应用程序。我在地图视图中跟踪距离（使用 CLLocation），当我将选项卡更改为不同的视图时，显示距离我开始时的距离的字符串文本不会立即更新，它需要几秒钟。

当我按下停止按钮时，我希望它等待几秒钟，以便更新实际距离。但我不想冻结应用程序。(*NSDate*未来 = [NSDate dateWithTimeIntervalSinceNow: 3.0]; [NSThread sleepUntilDate:future];* )

我将带有距离的字符串保存在第二个选项卡的单元格中，所以如果我在应用程序运行时执行多项任务，我只想启动应用程序并按停止。然后新的距离将正确并保存。希望我没有用这么多的文字混淆你我希望你明白我的要求！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T15:05:10.377

```
[label performSelector:@selector(setText:) withObject:newText afterDelay:3.0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T15:07:53.933

所以你想要做的是使用dispatch_after：

```
dispatch_after(3 seconds, dispatch_get_main_queue(), ^
    {
        myLabel.text = <the value you want to appear>;
    } ); 
```

# angularjs - 如何在 AngularJS 中检测 onKeyUp？

> ID：11264188
> 
> 赞同：48
> 
> 时间：2012-06-29T15:02:22.683
> 
> 标签：angularjs

如何在 AngularJS 中检测 onKeyUp？

我正在寻找一个类似于 ngChange 的“ngOnkeyup”指令，但我找不到任何合适的东西。

如果没有这样的指令，是否有一种干净的方法可以从浏览器原生 onkeyup 事件调用控制器？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-08-30T13:57:54.413

对于今天寻找该功能的每个人，请使用官方[ng-keyup](http://docs.angularjs.org/api/ng.directive:ngKeyup)指令：

```
<input type="text" ng-keyup="{expression}" /> 
```

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2012-06-29T18:41:07.210

**编辑：见下面来自 maklemenz 的第二个答案，它指的是新的内置 ng-keyup 指令**

您可以使用[angular-ui 库](http://angular-ui.github.com/)：

使用 angular-ui，你可以做到

```
<input ui-event="{keyup: 'myFn($event)'}" 
```

如果您不想使用其他库，最有效和最简单的方法是：

JS

```
myApp.directive('onKeyup', function() {
  return function(scope, elm, attrs) {
    elm.bind("keyup", function() {
      scope.$apply(attrs.onKeyup);
    });
  };
}); 
```

HTML：

```
<input on-keyup="count = count + 1"> 
```

* * *

**编辑**：如果您想检测按下了哪个键，您实际上有两个基本选项。您可以向指令添加一个属性来处理指令中允许的键，或者您可以将按下的键传递给您的控制器。我通常会推荐该指令处理关键方法。

这是两种方式的示例：http: [//jsfiddle.net/bYUa3/2](http://jsfiddle.net/bYUa3/2)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-29T18:37:20.143

如果默认指令还不够，您必须创建自定义指令。像这样的东西，可能是？

```
<!doctype html>
<html lang="en" ng-app="app">
  <body ng-controller="ctrl">
    <input ng-onkeyup="keyup()"/>
    <script src="js/lib/angular-1.0.0.min.js"></script>
    <script>
      angular.module('app', []).directive('ngOnkeyup', function() {
        return {
          restrict: 'A',
          scope: {
            func: '&ngOnkeyup'
          },
          link: function( scope, elem, attrs ) {
            elem.bind('keyup', scope.func);
          }
        };
      });

      function ctrl($scope) {
        $scope.keyup = function() {
          alert('keyup fired');
        };
      }
    </script>
  </body>
</html> 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-04-09T00:34:46.300

除了已经提到的事件绑定器之外，您现在还可以在 Angular UI 中使用这些方便的 ui-key* 指令：

```
<textarea
 ui-keypress="{13:'keypressCallback($event)'}">
</textarea>
<textarea
  ui-keydown="{'enter alt-space':'keypressCallback($event)'}">
</textarea>
<textarea
  ui-keyup="{'enter':'keypressCallback($event)'}">
</textarea>

<script>
$scope.keypressCallback = function($event) {
alert('Voila!');
$event.preventDefault();
};
</script> 
```

[http://angular-ui.github.io/#/directives-keypress](http://angular-ui.github.io/#/directives-keypress)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-11-26T16:54:43.143

只是为了帮助那些像我一样只想在某个键上触发事件的人。这是当且仅当按下转义时`ng-keyup`调用我的函数的代码。`cancel()`要找出您想要的键码，请查看[此网站](http://keycode.info/)

```
ng-keyup="$event.keyCode == 27 ? cancel() : ''" 
```

请注意，正如@maklemenz 提到的，这使用了现在可用的内置 Angular 指令

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-12T14:42:55.573

如果我正确理解您的问题，那么您正在寻找 ng-keyup 指令。这是一个链接：[http ://docs.angularjs.org/api/ng.directive:ngKeyup](http://docs.angularjs.org/api/ng.directive:ngKeyup)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-31T20:21:38.777

仅供参考 - 我今天只是在搜索这个，看来 Angular 的 github 中有一个分支可以解决 keyup keydown 的问题。

[https://github.com/angular/angular.js/pull/1622](https://github.com/angular/angular.js/pull/1622)

它已被合并到 master 中......但是它看起来不会出现在 1.1.3 之前的版本中

为了使用 ng-keyup 选项构建角度，您可以从 git 下载代码并`rake package`在文件夹上运行。当然在 Windows 上意味着安装 Node.js 和 Ruby 以及可能的其他一些箍（我在 win32 上遇到了 fork 错误）

不过，我最终确实得到了“内置”键。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-08-10T23:14:22.800

我知道我的回答为时已晚，但我希望它对某些人有所帮助。如果您正在寻找一种快速简便的方法，您可以使用以下方法：

```
 // in the controller

    // get element by id, you can use by class...
    var element = angular.element('#element');

    element.keyup(function () {
    console.log('keyup fired');
    })
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.23/angular.min.js"></script>

<input id="element" type="text" />
```

# image - 如何给图片命名，以免其他图片名称被轻易猜到？

> ID：11264189
> 
> 赞同：1
> 
> 时间：2012-06-29T15:02:30.707
> 
> 标签：image, security

用户将能够上传图像并且名称将被更改，因此它不会与另一个文件具有相同的名称。使用简单的约定，例如称它们为 1.jpg、2.jpg、3.jpg 等，这意味着其他用户可以简单地输入 4.jpg 并查看其他人的图像。

有没有一种方法或约定来命名不同的图像，同时仍然确保猜测图像名称是困难的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T15:07:59.207

您可以编写一个 PHP 脚本来每次生成一些伪随机图像名称，例如 21412adfs.jpg。

更好的是，取上传文件的名称，并在其上附加一个 6 位随机数或其他内容，例如 19353--toy--car.png，您甚至可以将 6 位数字替换为代表日期的数字上传的图片。

命名约定可以是您真正想要的任何形式，任何最适合您的设置和存档目的的形式。在图像名称中包含日期可能会很好，因为您可以根据日期等轻松地将图像分类到不同的上传文件夹中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T15:13:11.633

最好的办法是使用散列函数生成可以使用的随机字符串。例如，在 PHP 中，您可以使用以下内容。

`$filename = md5('SOME RANDOM STRING'.rand(0,200000).time());`

MD5 有时会生成相同的随机字符串，这会导致文件名冲突，但这种情况发生的可能性很小，如果是这样......你所要做的就是再次运行名称生成 - 连续两次冲突极不可能。

确保将“一些随机字符串”更改为只有您知道并在您的网站上使用的内容。这就是所谓的“站点盐”，这意味着外人将很难猜测您生成的文件名的名称，因为他们将无法预测和逆向工程您放入混合生成的所有内容它。

希望有帮助吗？

# javascript - 两个 javascripts 不合作，tick 和 ticker

> ID：11264190
> 
> 赞同：0
> 
> 时间：2012-06-29T15:02:37.557
> 
> 标签：javascript, clock, marquee, ticker, xhtml-transitional

谁能告诉我为什么这两个 javascripts 不能在同一个页面上合作？

脚本 #1

这在头脑中：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<script type="text/javascript">
//<![CDATA[
<!--
var tWidth='600px';                  // width (in pixels)
var tHeight='18px';                  // height (in pixels)
var moStop=true;                     // pause on mouseover (true or false)
var fontfamily = 'arial,sans-serif'; // font for content
var tSpeed=7;                        // scroll speed (1 = slow, 5 = fast)

// enter your ticker content here (use \/ and \' in place of / and ' respectively)
var content='<a href="http:\/\/www.url.com\/">7679 - Reset Passwords<\/a>, ';

var cps=tSpeed; var aw, mq; var fsz = parseInt(tHeight) - 4; function startticker(){if (document.getElementById) {var tick = '<div style="position:relative;width:'+tWidth+';height:'+tHeight+';overflow:hidden;"'; if (moStop) tick += ' onmouseover="cps=0" onmouseout="cps=tSpeed"'; tick +='><div id="mq" style="position:absolute;left:0px;top:0px;font-family:'+fontfamily+';font-size:'+fsz+'px;white-space:nowrap;"><\/div><\/div>'; document.getElementById('ticker').innerHTML = tick; mq = document.getElementById("mq"); mq.style.left=(parseInt(tWidth)+10)+"px"; mq.innerHTML='<span id="tx">'+content+'<\/span>'; aw = document.getElementById("tx").offsetWidth; lefttime=setInterval("scrollticker()",50);}} function scrollticker(){mq.style.left = (parseInt(mq.style.left)>(-10 - aw)) ?parseInt(mq.style.left)-cps+"px" : parseInt(tWidth)+10+"px";} window.onload=startticker;
//-->
//]]>
</script> 
```

这在脚本 #1 的正文中：

```
<div id="ticker" align="center">
</div> 
```

上面的脚本在屏幕上（选取框）选取文本 RTOL（从右到左）。鼠标悬停时停止选取框。方便的小脚本，但问题是当我在页面上实现下一个脚本时它会中断......

脚本 #2

这在头脑中：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<script type="text/javascript">
//<![CDATA[
<!--

function show2(){
if (!document.all&&!document.getElementById)
return
thelement=document.getElementById? document.getElementById("tick"): document.all.tick
var Digital=new Date()
var hours=Digital.getHours()
var minutes=Digital.getMinutes()
var seconds=Digital.getSeconds()
var dn="PM"
if (hours<12)
dn="AM"
if (hours>12)
hours=hours-12
if (hours==0)
hours=12
if (minutes<=9)
minutes="0"+minutes
if (seconds<=9)
seconds="0"+seconds
var ctime=hours+":"+minutes+":"+seconds+" "+dn
thelement.innerHTML=""+ctime+""
setTimeout("show2()",1000)
}
window.onload=show2
//-->
//]]>
</script> 
```

这在脚本 #2 的正文中：

```
<span id="tick"></span> 
```

上面的脚本只显示当前机器时间，作为时钟工作，计算小时、分钟和秒。当我将此脚本添加到页面时，我上面的脚本 #1（选框）从页面中消失了。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T15:06:29.727

两个脚本都在使用`window.onload = something`，所以第二个脚本阻止第一个脚本初始化。

在第一个中，删除 window.onload，并将第二个更改为：

```
function loadBothScripts()
{
    startticker();
    show2();
}

window.onload = loadBothScripts; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T15:08:23.147

您的第一个脚本中有这一行：

```
window.onload = startticker; 
```

然后你在第二个脚本中有这个：

```
window.onload = show2; 
```

第二个覆盖了 window.onload 事件，因此第一个脚本不会触发。您可以使用此函数将多个处理程序附加到一个事件：

```
// addEventListener fix for IE
// o: object to which event listener is assigned
// e: event name as string
// f: the function
function myAddEventListener(o, e, f) {
    if (o.addEventListener) { // standards compliant browsers
        o.addEventListener(e, f, false);
    } else if (o.attachEvent) { // IE8 and earlier
        o.attachEvent("on" + e, f);
    }
}

// replace all window.load = someFunction statements with this:
myAddEventListener(window, "load", startticker);
myAddEventListener(window, "load", show); 
```

# c++ - cocos2d-x CCTouchDispatcher - 没有 sharedDispatcher

> ID：11264191
> 
> 赞同：10
> 
> 时间：2012-06-29T15:02:41.563
> 
> 标签：c++, cocos2d-iphone, cocos2d-x

我目前正在将 ObjC cocos2d 游戏移植到 cocos2d-x，但是在尝试创建 registerWithTouchDispatcher 方法时遇到了一些问题，目前我正在做

```
void GameLayer::registerWithTouchDispatcher()
{
    CCTouchDispatcher::sharedDispatcher()->addTargetedDelegate(this,0,true);
} 
```

但这会在 cocos2d::CCTouchDispatcher 中给出错误“没有名为 sharedDispatcher 的成员”。

有没有另一种方法必须在 cocos2d-x 中完成？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-29T23:40:29.123

如果您使用的是 2.0，它们已被合并到 CCDirector。请用

```
 CCDirector::sharedDirector()->getTouchDispatcher() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-26T16:57:25.717

使用这些代码代替 ccdirector。将代码放到 cclayer init 函数中。

```
setTouchMode(kCCTouchesOneByOne);

registerWithTouchDispatcher(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-05T11:36:48.773

在 cocos2d-x 中你可以这样做。

```
CCDirector::sharedDirector()->getTouchDispatcher()->addStandardDelegate(this,0); 
```

# java - 在 Java 中使用文档鼠标单击修改 SVG 文件

> ID：11264192
> 
> 赞同：2
> 
> 时间：2012-06-29T15:02:48.837
> 
> 标签：java, dom, svg, dom-events, batik

我需要使用 Batik 修改和使用 SVG 地图文件，但我无法修改它。我正在努力做的是修改一个国家的填充颜色值（我可以在解析 SVG 文件后从路径元素中获得）。为此，我需要确定单击哪个国家/地区以获取其其他标识符的 id 以修改正确的填充参数。

这是我的代码：

```
public class SVGEditor{
    public File svgEditFile;
    public SVGDocument svgDoc;
    public JSVGCanvas svgCanvas;
    public SAXSVGDocumentFactory svgDocumentFactory;
    public Document doc;
    public Vector<String> colors = new Vector<String>();

    public SVGEditor(File f, JSVGCanvas canvas){
        svgEditFile = f;
        svgCanvas = canvas;
        svgCanvas.getInteractors().add(this);
    }

    public void editFile() throws IOException{
        String parser = XMLResourceDescriptor.getXMLParserClassName();
        svgDocumentFactory  = new SAXSVGDocumentFactory(parser);
        doc = svgDocumentFactory.createDocument(svgEditFile.toURI().toString());

    }
    public void pathParser(){
        doc.getDocumentElement().normalize();
        NodeList listOfPathNodes = doc.getElementsByTagName("path");
        int totalPaths = listOfPathNodes.getLength();
        System.out.println("Total number of paths: " + totalPaths); 
        for(int i = 0; i < totalPaths; i++){
            Element el = (Element) listOfPathNodes.item(i);
            EventTarget target = (EventTarget) el;
            target.addEventListener("click", 
                new org.w3c.dom.events.EventListener() {
                    public void handleEvent(org.w3c.dom.events.Event evt) {
                        if(evt.getType().equals("click")){
                            //Here is where I want to get the clicked path from the interaction with the DOM document
                            Element el  = (Element)evt.getTarget();
                            System.out.println("Clicked Path:" + el.getElementsByTagname("path");

                         }
                     }

                 }, false);
             // Get id data
             id = el.getAttribute("id");
             // Get path data
             String path = el.getAttribute("d");
             if(id.equals("ro"))
                 System.out.println(path);
             addPoint(path);

             // Get color data
             String style = el.getAttribute("style");
             int index1 = style.indexOf("fill:#");
             String color = style.substring((index1+5),(index1 + 12));
             colors.add((id + ":" +color));

         }
     }
 } 
```

这是 SVG 文件： http: [//upload.wikimedia.org/wikipedia/commons/b/b3/Blank_map_of_Europe.svg](http://upload.wikimedia.org/wikipedia/commons/b/b3/Blank_map_of_Europe.svg)`editFile()` ，您可以在方法 中直接使用此链接。

我希望很容易理解，我想要做的是使用此解决方案或您提供的其他解决方案使用单击事件来查找在文档上修改填充颜色值的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-02T13:57:16.070

我在您的代码中有一些更改。

```
 public class SVGEditor {
    public File svgEditFile;
    public SVGDocument svgDoc;
    public JSVGCanvas svgCanvas;
    public SAXSVGDocumentFactory svgDocumentFactory;
    public Document doc;
    public Vector<String> colors = new Vector<String>();

    public SVGEditor(File f, JSVGCanvas canvas){
        svgEditFile = f;
        svgCanvas = canvas;
        svgCanvas.getInteractors().add(this);
    }

    public void editFile() throws IOException{
        String parser = XMLResourceDescriptor.getXMLParserClassName();
        svgDocumentFactory  = new SAXSVGDocumentFactory(parser);
        doc = svgDocumentFactory.createDocument(svgEditFile.toURI().toString());

    }
    public void pathParser(){
        doc.getDocumentElement().normalize();
        NodeList listOfPathNodes = doc.getElementsByTagName("path");
        int totalPaths = listOfPathNodes.getLength();
        System.out.println("Total number of paths: " + totalPaths); 
        for(int i = 0; i < totalPaths; i++){
            Element el = (Element) listOfPathNodes.item(i);
            EventTarget target = (EventTarget) el;
            target.addEventListener("click", 
                new org.w3c.dom.events.EventListener() {
                    public void handleEvent(org.w3c.dom.events.Event evt) {
                        if(evt.getType().equals("click")){
                            //Here is where I want to get the clicked path from the interaction with the DOM document
                            Element el  = (Element)evt.getTarget();
                            System.out.println("Clicked Path:" + el.getElementsByTagName("path"));

                         }
                     }

                 }, false);
             // Get id data
             String id = el.getAttribute("id");
             // Get path data
             String path = el.getAttribute("d");
             if(id.equals("ro"))
                 System.out.println(path);

             // Get color data
             String style = el.getAttribute("style");
             int index1 = style.indexOf("fill:#");
             String color = style.substring((index1+5),(index1 + 12));
             colors.add((id + ":" +color));

         }
     }

    public static void main(String[] args) throws IOException {
        System.out.println("SVG start");

        JSVGCanvas canvas = new JSVGCanvas();
        canvas.setDocumentState(JSVGCanvas.ALWAYS_DYNAMIC);
        SVGEditor svgEditor = new SVGEditor(new File(
                "C:\\Users\\neda.danilovic\\Desktop\\batik 1.7\\miscPOC-master\\batik-poc1\\src\\main\\java\\glasspane\\Blank_map_of_Europe.svg"), canvas);
        svgEditor.editFile();
        svgEditor.pathParser();
        System.out.println("SVG end");
    }
}

package glasspane;

import java.awt.Dimension;
import java.io.File;
import java.io.IOException;
import java.util.Vector;

import javax.swing.JLabel;
import javax.swing.JPanel;

import org.apache.batik.dom.svg.SAXSVGDocumentFactory;
import org.apache.batik.dom.svg.SVGDOMImplementation;
import org.apache.batik.dom.svg.SVGOMSVGElement;
import org.apache.batik.swing.JSVGCanvas;
import org.apache.batik.swing.svg.AbstractJSVGComponent;
import org.apache.batik.util.XMLResourceDescriptor;
import org.w3c.dom.DOMImplementation;
import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.NodeList;
import org.w3c.dom.events.Event;
import org.w3c.dom.events.EventListener;
import org.w3c.dom.events.EventTarget;
import org.w3c.dom.svg.SVGSVGElement;

public class SvgGlassPaneExample {

    private JSVGCanvas  canvas;
    private JLabel      target;
    private SAXSVGDocumentFactory svgDocumentFactory;
    private Document doc;
    private File svgEditFile;
    private Vector<String> colors = new Vector<String>();

    /** Creates a new instance of SvgGlassPaneExample 
     * @throws IOException */
    public SvgGlassPaneExample(JPanel panel) throws IOException {
        panel.removeAll();
        canvas = new JSVGCanvas();
        canvas.setDocumentState(AbstractJSVGComponent.ALWAYS_DYNAMIC);
        File file = new File("C:\\Users\\neda.danilovic\\Desktop\\batik 1.7\\miscPOC-master\\batik-poc1\\src\\main\\java\\glasspane\\Blank_map_of_Europe.svg");
        String parser = XMLResourceDescriptor.getXMLParserClassName();
        svgDocumentFactory  = new SAXSVGDocumentFactory(parser);
        canvas.setDocument(svgDocumentFactory.createDocument(file.toURI().toString()));
        panel.add(canvas);
        panel.repaint();
    }

    public void addGlassPane() {
        String svgNS = SVGDOMImplementation.SVG_NAMESPACE_URI;
        Document doc = canvas.getSVGDocument();
        Element rectangle = doc.createElementNS(svgNS, "rect");
        rectangle.setAttributeNS(null, "x", "0");
        rectangle.setAttributeNS(null, "y", "0");
        rectangle.setAttributeNS(null, "width", "700");
        rectangle.setAttributeNS(null, "height", "700");
        rectangle.setAttributeNS(null, "style", "fill:none;pointer-events:fill");
        rectangle.setAttributeNS(null, "id", "glasspane");
        Element svgRoot = doc.getDocumentElement();

        svgRoot.insertBefore(rectangle, doc.getElementById("rectangles"));

    }

    public void registerListeners(JLabel target) {
        //this label provides feedback on the selected item
        this.target = target;
        // Gets an element from the loaded document.
        // document is your SVGDocument

        NodeList listOfPathNodes = canvas.getSVGDocument().getElementsByTagName("path");
        int totalPaths = listOfPathNodes.getLength();
        System.out.println("Total number of paths: " + totalPaths); 
        for(int i = 0; i < totalPaths; i++){
            Element el = (Element) listOfPathNodes.item(i);
            EventTarget eventTarget = (EventTarget) el;
            eventTarget.addEventListener("click", 
                new EventListener() {
                    public void handleEvent(Event evt) {
                        System.out.println("click happend!!!");
                     }
                 }, false);

             // Get id data
             String id = el.getAttribute("id");
             // Get path data
             String path = el.getAttribute("d");
             if(id.equals("ro"))
                 System.out.println(path);

             // Get color data
             String style = el.getAttribute("style");
             int index1 = style.indexOf("fill:#");
             String color = style.substring((index1+5),(index1 + 12));
             colors.add((id + ":" +color));

         }
    }

    public class GlassPaneClick implements EventListener {

        @Override
        public void handleEvent(Event evt) {
            target.setText("Glasspane event " + ((Element) evt.getTarget()).getAttribute("id"));
            target.repaint();
        }
    }

    public class ObjectClick implements EventListener {

        @Override
        public void handleEvent(Event evt) {
            target.setText("Rectangles event " + ((Element) evt.getTarget()).getAttribute("id"));
            target.repaint();
        }
    }

    public void makeDocument() throws IOException{
        String parser = XMLResourceDescriptor.getXMLParserClassName();
        svgDocumentFactory  = new SAXSVGDocumentFactory(parser);
        doc = svgDocumentFactory.createDocument(svgEditFile.toURI().toString());

    }
}

How to make that click on SVG works? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T10:57:26.013

为了获取您单击的国家/地区 ID，您应该注册`mousedown`事件侦听器。（`click`不适用于我的蜡染版本）

如果您想了解您点击的是哪个国家/地区：

```
@Override
public void handleEvent(Event e) {
    Element element = (Element) e.getCurrentTarget();

    String countryISO = element.getAttribute("id");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-10T14:18:21.650

我也为这个问题苦苦挣扎了几个小时。我终于找到了！事实上，我认为你只缺少这个声明：

```
svgCanvas.setDocumentState(JSVGCanvas.ALWAYS_DYNAMIC); 
```

我将我的解决方案上传到 github，可以在这里找到：[https](https://github.com/fmarot/miscPOC/tree/master/batik-poc1) ://github.com/fmarot/miscPOC/tree/master/batik-poc1 顺便说一句，使用 Batik 1.7（我尝试过的），“点击”确实有效；）

# unit-testing - 我可以在哪里放置单个可执行文件以在 Jenkins 构建中使用？

> ID：11264193
> 
> 赞同：0
> 
> 时间：2012-06-29T15:02:59.783
> 
> 标签：unit-testing, jenkins, bdd, behat

我希望能够在 Jenkins 中执行基于 Behat 的测试场景。Behat 本身是一个使用 PHP 运行的单一可执行文件 (behat.phar)。

我可以在哪里放置 Behat 以便它位于 Jenkins 文件夹结构中？我能想到的唯一地方是：'C:\Program Files (x86)\Jenkins\jobs'。有人有更好的建议吗？

我浏览了 Jenkins 文档，但找不到关于此主题的任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T15:31:08.903

将 Behat 安装在您通常会使用的任何位置（例如，`C:\Program Files (x86)\Behat\behat.phar`），然后将系统环境变量设置为您的 behat 目录。例如，设置`BEHAT_HOME`为`C:\Program Files (x86)\Behat\`。最后，在您的执行脚本中使用环境变量（.bat 文件、Ant 文件、Gradle 文件等）。

有许多不同的方法可以做到这一点，环境变量并不总是最好的选择，但它是一个适用于你可以从 Jenkins 执行程序的所有不同方式的选项。

# ruby-on-rails - SignedCookieJar 是如何工作的？

> ID：11264194
> 
> 赞同：0
> 
> 时间：2012-06-29T15:03:03.960
> 
> 标签：ruby-on-rails

具体是`SignedCookieJar`做什么的？

`MessageEncryptor.encrypt_and_sign`和使用cookie 值有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T15:13:10.500

如果您正在寻找给定课程的*确切*功能，我建议您咨询源代码。`SignedCookieJar`，例如，在 中[`rails/actionpack/lib/action_dispatch/middleware/cookies.rb`](https://github.com/rails/rails/blob/master/actionpack/lib/action_dispatch/middleware/cookies.rb#L284)。

看起来 a`SignedCookieJar`是标准 cookie jar 的包装器，但是在将 cookie 设置为其父 jar 之前，它将使用`ActiveSupport::MessageVerifier`' 的方法对其进行签名，并且在从父 jar 获取 cookie 时，如果验证者的方法无效`generate`，它将返回签名。`nil``verify`

不同之处似乎是`MessageVerifier`只对数据进行*签名*，但保留原始数据不变，而`MessageEncryptor`在签名之前会额外加密数据。Rails 文档说，用例的不同之处在于：

> [MessageEncryptor] 可用于类似于 MessageVerifier 的情况，但您不希望用户能够确定有效负载的值。

对于签名的 cookie，我们通常不会太担心。

# jquery - 如何在 jQuery Mobile 创建的子页面上获取页眉和页脚

> ID：11264196
> 
> 赞同：2
> 
> 时间：2012-06-29T15:03:05.653
> 
> 标签：jquery, jquery-mobile, html-lists, footer

我有一个带有一堆 JQM“页面”的 HTML 文件。因此，我能够创建一个漂亮的页眉和页脚，该页眉和页脚在此文件中的所有页面中都是持久的……除了 JQM 在导航包含子列表的列表时自行创建的页面。

当您单击 Page2，然后单击 Foo 时，您将获得一个 JQM 制造的 Foo 子列表页面，其中包含 Baz1、2 和 3。该页面缺少页眉和页脚。关于如何将它们放入该页面的任何想法，除了将其拆分为手动创建的新页面吗？

谢谢，戴夫

这是一个工作示例页面： http: [//geology.wwu.edu/dept/testnew/prospectives/test2.php](http://geology.wwu.edu/dept/testnew/prospectives/test2.php)

这是一些演示代码：

```
<body>
<div data-role="page" id="home">
    <div data-role="header" class='geobanner'><a href="#home" data-icon="home" data-theme="b" data-direction="reverse">Home</a></div>
    <div data-role="content">
        <h1>Main Content - Page 1</h1>
        <p>Lorem ipsum.</p>
        <ul data-role="listview" data-theme="c">
            <li><a href="#page2" >Page2</a></li>
            <li><a href="#" >Page3</a></li>
        </ul>
    </div>
    <div data-role="footer" data-id="foo" data-position="fixed">
        <div data-role="navbar" data-theme="c">
            <ul>
                <li><a href="#">Ftr1</a></li>
                <li><a href="#">Ftr2</a></li>
            </ul>
        </div>
    </div>
</div>
<div data-role="page" id="page2">
    <div data-role="header" class='geobanner'><a href="#home" data-icon="home" data-theme="b" data-direction="reverse">Home</a></div>
    <div data-role="content">
        <ul data-role="listview" data-inset="true" data-theme="c" data-dividertheme="f">
            <li><a href="#" >Foo</a>
            <ul>
                <li><a href="#" >Baz1</a></li>
                <li><a href="#" >Baz2</a></li>
                <li><a href="#" >Baz3</a></li>
            </ul></li>
            <li><a href="#" >Bar</a></li>
        </ul>
    </div>
    <div data-role="footer" data-id="foo" data-position="fixed">
        <div data-role="navbar" data-theme="c">
            <ul>
                <li><a href="#">Ftr1</a></li>
                <li><a href="#">Ftr2</a></li>
            </ul>
        </div>
    </div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T20:48:59.120

像这样加载js：</p>

```
$(document).ready(function() {
    var hdhtml = $($.mobile.activePage).children('div').eq(0).clone();
    var fthtml = $($.mobile.activePage).children('div').eq(2).clone();
    $('div:jqmData(role="page")').live('pageinit',function() {
        $('div:jqmData(role="header")').remove();
        $('div:jqmData(role="footer")').remove();
        $('div:jqmData(role="page")').prepend(hdhtml).append(fthtml);
    });
    if( $('div:jqmData(role="page")').length > 2 ){
        $('div:jqmData(role="header")').remove();
        $('div:jqmData(role="footer")').remove();
        $('div:jqmData(role="page")').prepend(hdhtml).append(fthtml);
    }
}); 
```

如果您不习惯将标题标签设置`<h1>`为`<div data-role="header">`，请将高度或边距底部设置为 header-div。

# java - 带有命名参数的 Java 字符串模板器/格式化器

> ID：11264197
> 
> 赞同：10
> 
> 时间：2012-06-29T15:03:09.963
> 
> 标签：java, string-formatting, template-engine

是否有类似的标准或至少广泛的实现`String.format`，但带有命名参数？

我想以这样的方式格式化模板化字符串：

```
Map<String, Object> args = new HashMap<String, Object>();
args.put("PATH", "/usr/bin");
args.put("file", "foo");
String s = someHypotheticalMethod("#{PATH}/ls #{file}");
// "/usr/bin/ls foo" 
```

从技术上讲，它几乎与以下内容相同：

```
String[] args = new String[] { "/usr/bin", "foo" };
String s = String.format("%1$s/ls %2$s", args);
// "/usr/bin/ls foo" 
```

但带有命名参数。

我知道：

*   [字符串格式](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html)
*   [格式化程序](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html)
*   [消息格式](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/MessageFormat.html)

但它们都使用有序或至少编号的参数，而不是命名的。我知道实现它很简单，但是我是否在标准 Java 库或至少在 Apache Commons / Guava / 类似的东西中寻找一种机制，而不引入高调的模板引擎？

**注意**：我对成熟的模板引擎并不感兴趣，它具有一些命令/功能逻辑、流控制、修饰符、子模板/包含、迭代器等功能。通常，以下方法是一个有效的 4 行实现- 这就是我所需要的：

```
public static String interpolate(String format, Map<String, ? extends Object> args) {
    String out = format;
    for (String arg : args.keySet()) {
        out = Pattern.compile(Pattern.quote("#{" + arg + "}")).
                matcher(out).
                replaceAll(args.get(arg).toString());
    }
    return out;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-13T11:24:26.427

`org.apache.commons.lang3.text.StrSubstitutor`如果 Java 7 不是一个选项，您也可以尝试。它*完全*符合您的要求。它是否轻量级可能取决于您是否也使用了其他的 commons-lang。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-29T15:29:28.027

[Matcher#appendReplacement()](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#appendReplacement%28java.lang.StringBuffer,%20java.lang.String%29)会有所帮助

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-21T08:14:16.350

我最近发现了非常符合描述的[JUEL](http://juel.sourceforge.net/)。它是从 JSP 中取出的表达语言。它也声称非常快。

我将在我自己的一个项目中尝试一下。

但是对于轻量级的，这是你的一个变体，试试这个（包含在一个单元测试中）：

```
public class TestInterpolation {

    public static class NamedFormatter {
        public final static Pattern pattern = Pattern.compile("#\\{(?<key>.*)}");
        public static String format(final String format, Map<String, ? extends Object> kvs) {
            final StringBuffer buffer = new StringBuffer();
            final Matcher match = pattern.matcher(format);
            while (match.find()) {
                final String key = match.group("key");
                final Object value = kvs.get(key);
                if (value != null)
                    match.appendReplacement(buffer, value.toString());
                else if (kvs.containsKey(key))
                    match.appendReplacement(buffer, "null");
                else
                    match.appendReplacement(buffer, "");
            }
            match.appendTail(buffer);
            return buffer.toString();
        }
    }

    @Test
    public void test() {
        assertEquals("hello world", NamedFormatter.format("hello #{name}", map("name", "world")));
        assertEquals("hello null", NamedFormatter.format("hello #{name}", map("name", null)));
        assertEquals("hello ", NamedFormatter.format("hello #{name}", new HashMap<String, Object>()));
    }

    private Map<String, Object> map(final String key, final Object value) {
        final Map<String, Object> kvs = new HashMap<>();
        kvs.put(key, value);
        return kvs;
    }
} 
```

我会扩展它以添加方便的方法来快速键值对

```
format(format, key1, value1)
format(format, key1, value1, key2, value2)
format(format, key1, value1, key2, value2, key3, value3)
... 
```

从 java 7+ 转换到 java 6- 应该不会太难

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-29T15:07:49.550

[StringTemplate](http://www.stringtemplate.org/)可能是您可能获得的轻量级插值引擎，尽管我不知道它如何在资源方面与[FreeMarker](http://freemarker.sourceforge.net/)、[Mustache](https://github.com/spullara/mustache.java/)或[Velocity](http://velocity.apache.org/)之类的东西相提并论。

另一种选择可能是像[MVEL](http://mvel.codehaus.org/)这样​​的 EL 引擎，它有一个[模板引擎](http://mvel.codehaus.org/MVEL+2.0+Templating+Guide)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-29T19:56:20.783

我知道我的回答来得有点晚，但是如果您仍然需要此功能，而无需下载成熟的模板引擎，您可以查看[aleph-formatter](https://github.com/nomemory/aleph-formatter)（我是作者之一）：

```
Student student = new Student("Andrei", 30, "Male");

String studStr = template("#{id}\tName: #{st.getName}, Age: #{st.getAge}, Gender: #{st.getGender}")
                    .arg("id", 10)
                    .arg("st", student)
                    .format();
System.out.println(studStr); 
```

或者您可以链接参数：

```
String result = template("#{x} + #{y} = #{z}")
                    .args("x", 5, "y", 10, "z", 15)
                    .format();
System.out.println(result);

// Output: "5 + 10 = 15" 
```

在内部，它使用 StringBuilder 通过“解析”表达式来创建结果，不进行字符串连接，执行正则表达式/替换。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-12-04T06:37:19.903

这是我的解决方案：

```
public class Template
{

    private Pattern pattern;
    protected Map<CharSequence, String> tokens;
    private String template;

    public Template(String template)
    {
        pattern = Pattern.compile("\\$\\{\\w+\\}");
        tokens = new HashMap<CharSequence, String>();
        this.template = template;
    }

    public void clearAllTokens()
    {
        tokens.clear();
    }

    public void setToken(String token, String replacement)
    {
        if(token == null)
        {
            throw new NullPointerException("Token can't be null");
        }

        if(replacement == null)
        {
            throw new NullPointerException("Replacement string can't be null");
        }

        tokens.put(token, Matcher.quoteReplacement(replacement));
    }

    public String getText()
    {
        final Matcher matcher = pattern.matcher(template);
        final StringBuffer sb = new StringBuffer();

        while(matcher.find()) 
        {
            final String entry = matcher.group();
            final CharSequence key = entry.subSequence(2, entry.length() - 1);
            if(tokens.containsKey(key))
            {
                matcher.appendReplacement(sb, tokens.get(key));
            }
        }
        matcher.appendTail(sb);
        return sb.toString();
    }

    public static void main(String[] args) {
        Template template = new Template("Hello, ${name}.");
        template.setToken("name", "Eldar");

        System.out.println(template.getText());
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-11-05T14:54:18.617

我还在我的 str utils (nottested) 中做了一个`string.MapFormat("abcd {var}",map)`。

```
//util
public static String mapFormat(String template, HashMap<String, String> mapSet) {
    String res = template;
    for (String key : mapSet.keySet()) {
        res = template.replace(String.format("{%s}", key), mapSet.get(key));
    }
    return res;
}

//use

public static void main(String[] args) {
    boolean isOn=false;
    HashMap<String, String> kvMap=new HashMap<String, String>();
    kvMap.put("isOn", isOn+"");
    String exp=StringUtils.mapFormat("http://localhost/api/go?isOn={isOn}", kvMap);
    System.out.println(exp);
} 
```

# css - 为什么 90% 宽度的 div 的左侧和右侧的 5% 填充不给我 100% 的宽度？

> ID：11264209
> 
> 赞同：2
> 
> 时间：2012-06-29T15:04:06.790
> 
> 标签：css, html, percentage

我在移动网站的标题中遇到了一个奇怪的问题，代码如下：

```
padding: 10px 5% 10px 5%;
width: 90%; 
```

你可以在这里看到效果-> [http://cssdesk.com/vEMCY](http://cssdesk.com/vEMCY)

包含此代码的 div 比没有填充且宽度为 100% 的 div 略短。

我通过将边距围绕标题中的元素并取消填充并将宽度设置为 100% 来解决它，但我很好奇为什么会这样做，因为我上次检查了 5 + 5 + 90 = 100。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T15:14:43.707

基于 Webkit 的浏览器存在百分比测量的舍入错误。

不久前，我问了一个非常相似的问题，这似乎就是问题所在。参考：[Chrome 及其对 %s 的处理](https://stackoverflow.com/q/9797874/1181243)

**[可以在此处找到](http://css-tricks.com/percentage-bugs-in-webkit/)**详细说明问题的帖子（最初由**bookcasey**共享）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T15:08:19.943

不确定这是如何在 CSS 规范中定义的，因为我不倾向于使用百分比填充，但填充与包含元素或本身相关？如果是元素本身，那么它将是 90% 的 5%，即 4.5%。你会损失 1%，就像它看起来的样子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T07:45:52.167

解决了css

```
 .header {
 background: blue;
 width: 90%;
 padding:10px 5.05% 10px 5.05%;

} 
```

但无法找出 0.1% 的填充用于 div#header 的位置...

# android - 无法在 Eclipse Juno 中创建新的 Android 项目

> ID：11264211
> 
> 赞同：-4
> 
> 时间：2012-06-29T15:04:13.810
> 
> 标签：android, eclipse

我无法创建新的 android 项目。没有“安卓项目”。有 android 活动，android 应用程序项目....我怎样才能创建它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T15:22:09.087

你有安装ADT插件吗？（[这里](http://developer.android.com/tools/sdk/eclipse-adt.html)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T16:05:33.670

类似的问题[Eclipse Juno won't create Android Activity](https://stackoverflow.com/questions/11260619/eclipse-juno-wont-create-android-activity)

查看问题：[http ://code.google.com/p/android/issues/detail?id=33859](http://code.google.com/p/android/issues/detail?id=33859)

# android - 在旧版本的 Android（3.0 之前）中使用 ActionBarSherlock 和 Fragments 重复菜单项

> ID：11264213
> 
> 赞同：2
> 
> 时间：2012-06-29T15:04:16.133
> 
> 标签：android, menu, tabs, android-fragments

我正在使用`Fragments`和`ActionBarSherlock`标签。我的菜单项在旧版本的 Android 中表现得非常奇怪。起初菜单正常运行，但是当我更改选项卡（更改片段，虽然它是相同的活动）时，似乎菜单被复制了，因为图标（通常有点透明）变得非常白色，就像他们正在画了好几次。然后他们开始表现得很奇怪，我必须在选择任何东西后等待很长时间才能执行。任何不更改活动或片段的按钮保持选中状态（突出显示）。

由于在较新的操作系统（4.0 +）中不会发生这种情况，我不确定是什么原因造成的。我猜它与标签和片段有关。每当我更改选项卡时，如果它们不为空，我会删除所有片段，并用新片段替换容器。

![在此处输入图像描述](../Images/b990ec2a19af22e13388446699f6f65a.png) ![在此处输入图像描述](../Images/13d1caefcfa0f39cd8636bd7af8d5113.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-03T17:20:14.467

是的，当您插入另一个片段时，菜单项不仅会消失。所以也许试着打电话`menu.clear()`。`onCreateOptionsMenu`

# android - 将数据存储在可供所有活动访问的 SharedPreferences 中

> ID：11264214
> 
> 赞同：7
> 
> 时间：2012-06-29T15:04:32.727
> 
> 标签：android, sharedpreferences

我想使用 SharedPreferences 存储和检索我的应用程序中的所有活动都可以访问的数据。那可能吗？到目前为止，我一直在这样做，以便为特定活动存储数据。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-29T15:08:11.037

是的。SharePreferences 正是这样做的。在每项活动中，您都可以：

```
SharedPreferences prefs = getSharedPreferences(ApplicationConstants.PREFERENCES, Context.MODE_PRIVATE);
SharedPreferences.Editor editor = prefs.edit();
editor.putString(name, value);
editor.commit(); 
```

然后在其他活动中检索值：

```
mPrefs.getString(name, ""); 
```

这是文档：http: [//developer.android.com/reference/android/content/SharedPreferences.html](http://developer.android.com/reference/android/content/SharedPreferences.html)

这是一个很好的例子：

[http://myandroidsolutions.blogspot.it/2012/03/android-preferenceactivity.html](http://myandroidsolutions.blogspot.it/2012/03/android-preferenceactivity.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T15:09:13.657

是的，这就是它的全部目的。

这是你应该如何写它，通过`Editor`

```
 final SharedPreferences shp         = ctx.getSharedPreferences(ctx.getString(R.string.app_name), Context.MODE_PRIVATE);
    final SharedPreferences.Editor ed   = shp.edit(); 
    ed.putString("var1", "var1");
    ed.putString("var2", "var2"); 
```

并加载它：

```
shp.getString("var1", "defvalue"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-04-11T21:07:09.027

我有更好的版本。有时当您尝试执行**getSharedPreferences**时，您可能会收到一个错误，因为它无法找到。这就是我在我的 Android 项目中存储值的方式。

**添加**

```
SharedPreferences sharedPreferences=this.getSharedPreferences("packagename", Context.MODE_PRIVATE);

 sharedPreferences.edit().putString("username", "specify name here").apply(); 
```

**包名称**可以直接从活动顶部复制：com.example.name.projectname

**取回**

```
String username = sharedPreferences.getString("username",""); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T12:10:04.353

如果您想访问所有活动中的值，我认为更好的方法是将存储在自定义应用程序类中，然后在活动中存储，您可以：

```
((CustomApplication)getApplication()).getStoredValue() 
```

共享首选项存储在文件中，此文件访问速度较慢。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-12T02:37:19.423

是我创建函数的示例，用于设置并获取名为“USER”的对象数据

**对于设置 sharePreference 数据**

```
public void saveUser(User usuario) {
        SharedPreferences sharedPref = getSharedPreferences("A", Context.MODE_PRIVATE); // sharedpreference set named "A"

        SharedPreferences.Editor editor = sharedPref.edit();
        editor.putString("name", usuario.getNombre());
        editor.putString("username", usuario.getUsername());
        editor.putString("pass", usuario.getContrasena());
        editor.putString("roll",usuario.getRol());
        editor.commit();
    } 
```

**获取 sharePreference 数据**

```
public Usuario getUser() {
        SharedPreferences sharedPref = getSharedPreferences("A", Context.MODE_PRIVATE);   // sharedpreference set named "A"
        User usuario = new User();
        usuario.setNombre(sharedPref.getString("name", "null"));
        usuario.setUsername(sharedPref.getString("username", "null"));
        usuario.setContrasena(sharedPref.getString("pass", "null"));
        usuario.setRol(sharedPref.getString("roll", "null"));
        return usuario;
    } 
```

**重要提示：**在这种情况下将名称设置为 sharePreference “A”

# c# - 循环和列表逻辑

> ID：11264219
> 
> 赞同：1
> 
> 时间：2012-06-29T15:04:45.457
> 
> 标签：c#, wpf, list, xaml, loops

我有一个程序，在加载用户控件时，将图形添加到地图层（你不应该对地图有太多的了解，我相信问题出在我的循环逻辑上。）

这是我的代码：

```
private void UserControl_Loaded(object sender, RoutedEventArgs e)
{
    con = new System.Data.SqlClient.SqlConnection();

    con.ConnectionString = "Data Source=USSW7DEVWS16\\DEVELOPER;Initial Catalog=acrGIS;Integrated Security=True";

    con.Open();
    using (SqlCommand command = new SqlCommand("SELECT * FROM arcObjects", con))
    {
        SqlDataReader reader = command.ExecuteReader();
        while (reader.Read())
        {
            int ID = reader.GetInt32(0);
            Object = reader.GetString(1);
            OComment = reader.GetString(2);
            OStreet = reader.GetString(3);
            OCity = reader.GetString(4);
            OState = reader.GetString(5);
            OZip = reader.GetString(6);
            OSpec = reader.GetString(7);

            arcObjects.Add(new arcObject() { Object_Num = Object, Comments = OComment, Street = OStreet, City = OCity, State = OState, Zip = OZip, Spec = OSpec });
        }

        con.Close();
        foreach (arcObject objects in arcObjects)
        {
            Locator InitialLocatorTask = new Locator("http://tasks.arcgisonline.com/ArcGIS/rest/services/Locators/TA_Streets_US_10/GeocodeServer");
            InitialLocatorTask.AddressToLocationsCompleted += InitialLocatorTask_AddressToLocatonCompleted;
            InitialLocatorTask.Failed += InitialLocatorTask_Failed;
            AddressToLocationsParameters addressParams = new AddressToLocationsParameters();

            Dictionary<string, string> address = addressParams.Address;

            address.Add("Street", objects.Street);
            address.Add("City", objects.City);
            address.Add("State", objects.State);
            address.Add("Zip", objects.Zip);

            InitialLocatorTask.AddressToLocationsAsync(addressParams);
        }
    }
}

private void InitialLocatorTask_AddressToLocatonCompleted(object sender, ESRI.ArcGIS.Client.Tasks.AddressToLocationsEventArgs args)
{
    con = new System.Data.SqlClient.SqlConnection();

    con.ConnectionString = "Data Source=USSW7DEVWS16\\DEVELOPER;Initial Catalog=acrGIS;Integrated Security=True";

    con.Open();
    using (SqlCommand command = new SqlCommand("SELECT * FROM arcObjects", con))
    {
        SqlDataReader reader = command.ExecuteReader();
        while (reader.Read())
        {
            int ID = reader.GetInt32(0);
            Object = reader.GetString(1);
            OComment = reader.GetString(2);
            OStreet = reader.GetString(3);
            OCity = reader.GetString(4);
            OState = reader.GetString(5);
            OZip = reader.GetString(6);
            OSpec = reader.GetString(7);

            CandidateListBox.Items.Clear();

            List<AddressCandidate> returnedCandidates = args.Results;

            foreach (AddressCandidate candidate in returnedCandidates)
            {
                if (candidate.Score >= 80)
                {
                    CandidateListBox.Items.Add(candidate.Address);

                    if (OSpec == "Meter")
                    {
                        Graphic graphic = new Graphic()
                        {
                            Symbol = AddressLayout.Resources["WaterMeterRenderer"] as ESRI.ArcGIS.Client.Symbols.Symbol,
                            Geometry = candidate.Location
                        };

                        string address2 = OCity + ", " + OState + " " + OZip;

                        graphic.Attributes.Add("MeterNum", Object);
                        graphic.Attributes.Add("Comment", OComment);
                        graphic.Attributes.Add("Address1", OStreet);
                        graphic.Attributes.Add("Address2", address2);

                        if (candidate.Location.SpatialReference == null)
                        {
                            candidate.Location.SpatialReference = new SpatialReference(4326);
                        }

                        // if (!candidate.Location.SpatialReference.Equals(MyMap.SpatialReference))
                        //{
                        // if (MyMap.SpatialReference.Equals(new SpatialReference(102100)) && candidate.Location.SpatialReference.Equals(new SpatialReference(4326)))
                        // graphic.Geometry = _mercator.FromGeographic(graphic.Geometry);
                        // else if (MyMap.SpatialReference.Equals(new SpatialReference(4326)) && candidate.Location.SpatialReference.Equals(new SpatialReference(102100)))
                        // graphic.Geometry = _mercator.ToGeographic(graphic.Geometry);
                        // else if (MyMap.SpatialReference != new SpatialReference(4326))
                        // {
                        GeometryService geometryService = new  
GeometryService("http://sampleserver3.arcgisonline.com/ArcGIS/rest/services/Geometry/GeometryServer");

                        geometryService.ProjectCompleted += (s, a) =>
                        {
                            graphic.Geometry = a.Results[0].Geometry;
                        };

                        geometryService.Failed += (s, a) =>
                        {
                            MessageBox.Show("Projection error: " + a.Error.Message);
                        };

                        //geometryService.ProjectAsync(new List<Graphic> { graphic }, MyMap.SpatialReference);
                        //    }
                        //}

                        FeatureLayer graphicsLayer = MyMap.Layers["WaterMeterLayer"] as FeatureLayer;
                        graphicsLayer.Graphics.Add(graphic);
                        //return;
                    }

                    if (OSpec == "Lot")
                    {
                        Graphic graphic = new Graphic()
                        {
                            Symbol = AddressLayout.Resources["LotRenderer"] as ESRI.ArcGIS.Client.Symbols.Symbol,
                            Geometry = candidate.Location
                        };

                        string address2 = OCity + ", " + OState + " " + OZip;

                        graphic.Attributes.Add("MeterNum", Object);
                        graphic.Attributes.Add("Comment", OComment);
                        graphic.Attributes.Add("Address1", OStreet);
                        graphic.Attributes.Add("Address2", address2);

                        if (candidate.Location.SpatialReference == null)
                        {
                            candidate.Location.SpatialReference = new SpatialReference(4326);
                        }

                        //if (!candidate.Location.SpatialReference.Equals(MyMap.SpatialReference))
                        // {
                        // if (MyMap.SpatialReference.Equals(new SpatialReference(102100)) && candidate.Location.SpatialReference.Equals(new SpatialReference(4326)))
                        // graphic.Geometry = _mercator.FromGeographic(graphic.Geometry);
                        // else if (MyMap.SpatialReference.Equals(new SpatialReference(4326)) && candidate.Location.SpatialReference.Equals(new SpatialReference(102100)))
                        // graphic.Geometry = _mercator.ToGeographic(graphic.Geometry);
                        //    else if (MyMap.SpatialReference != new SpatialReference(4326))
                        //    {
                        GeometryService geometryService = new GeometryService("http://sampleserver3.arcgisonline.com/ArcGIS/rest/services/Geometry/GeometryServer");

                         geometryService.ProjectCompleted += (s, a) =>
                         {
                             graphic.Geometry = a.Results[0].Geometry;
                         };

                         geometryService.Failed += (s, a) =>
                         {
                             MessageBox.Show("Projection error: " + a.Error.Message);
                         };

                         //geometryService.ProjectAsync(new List<Graphic> { graphic }, MyMap.SpatialReference);
                         // }
                         // }

                         FeatureLayer graphicsLayer = MyMap.Layers["LotLayer"] as FeatureLayer;
                         graphicsLayer.Graphics.Add(graphic);
                         // return;
                     }
                 }
             }
         }
     }
     con.Close();
 }

public void InitialLocatorTask_Failed(object sender, TaskFailedEventArgs e)
{
    MessageBox.Show("Locator service failed: " + e.Error);
} 
```

我知道它发生了什么，UserControl_Loaded 中的 foreach 循环正在向字典中添加内容，然后 InitailTask​​ToAddress_Completed 中的 while 循环一遍又一遍地运行（准确地说是 9 次）。问题是，虽然所有图形都放置在正确的位置，但这些图形的属性都是相同的......

由于某种原因，它没有得到它们。如果你想让我澄清任何事情，请告诉我。此外，如果您想查看我的 XAML，我也可以向您展示。我正在使用 C# 和 WPF，以及 arcGIS。谢谢您的帮助。

# performance - Scala动态类管理

> ID：11264222
> 
> 赞同：4
> 
> 时间：2012-06-29T15:04:59.567
> 
> 标签：performance, scala, dynamic, compilation, classloader

我想知道在 Scala 中是否可以执行以下操作（但我认为这个问题也可以应用于 Java）：

*   动态创建 Scala 文件*（好的，这里没问题）*
*   编译它*（我认为这不是一个真正的问题）*
*   动态加载/卸载新类

除了知道动态代码加载/重新加载是否可能（在 Java 中是可能的，所以我认为在 Scala 中也是可行的）我还想知道这对性能下降的影响（我可以有很多类，没有名字冲突，但真的很多！）。

蒂亚！

PS：我知道还有其他关于 Scala 中的类加载的问题，但我还没有找到关于性能的答案！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T17:06:24.840

是的，你想做的一切当然都是可能的。您可能想看看[ScalaMock](http://scalamock.org/)，它是动态创建 Scala 源代码的示例。在[SBT](http://www.scala-sbt.org/)这是从代码调用编译器的一个例子。然后有许多不同的系统可以动态加载类 - 查看[loadLibrary](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/System.html#loadLibrary%28java.lang.String%29)的文档作为起点。

但是，根据您想要实现的目标，您可能希望改用 Scala 宏。它们提供了与生成源代码然后编译它相同的灵活性，但没有这种方法的许多缺点。ScalaMock 的原始版本过去是通过生成源代码来工作的，但[我正在改用宏](http://www.paulbutcher.com/2012/06/scalamock-3-0-preview-release/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T17:09:25.943

正如 REPL 清楚地证明的那样，这在 Scala 中都是可能的。使用 Scala 2.10 甚至会变得相对容易。

# security - 只有所有者可以删除他/她的书吗？

> ID：11264224
> 
> 赞同：-1
> 
> 时间：2012-06-29T15:05:14.057
> 
> 标签：security, zend-framework, frameworks, zend-acl

我的问题是其他不拥有这本书的用户，但如果他们知道 Book ID，他们可以删除这本书，并且很容易获得 Book ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T15:11:30.680

看[这里（ZF 手册）](http://framework.zend.com/manual/en/zend.acl.advanced.html)

请参阅“使用断言编写条件 ACL 规则”。您将需要找到一种方法将图书 ID 传递给该`assert()`方法，但从那时起就很容易了。

# android - Facebook链接将在应用程序而不是浏览器中打开

> ID：11264225
> 
> 赞同：2
> 
> 时间：2012-06-29T15:05:14.807
> 
> 标签：android, iphone, facebook, html

> **可能重复：**
> [从其他应用程序启动 facebook 应用程序](https://stackoverflow.com/questions/4191492/launch-facebook-app-from-other-app)

我正在寻找是否可以执行以下操作：

有一封电子邮件，其中包含指向 Facebook 页面的社交链接，但是，点击后，它不会打开您的手机浏览器，而是打开官方的 Facebook 应用程序。

有谁知道这是否可能？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T15:13:13.310

您可以使用以下选项：

```
fb://profile – Open Facebook app to the user’s profile
fb://friends – Open Facebook app to the friends list
fb://notifications – Open Facebook app to the notifications list (NOTE: there appears to be a bug with this URL. The Notifications page opens. However, it’s not possible to navigate to anywhere else in the Facebook app)
fb://feed – Open Facebook app to the News Feed
fb://events – Open Facebook app to the Events page
fb://requests – Open Facebook app to the Requests list
fb://notes- Open Facebook app to the Notes page
fb://albums – - Open Facebook app to Photo Albums list 
```

还有很多。至于android可能有类似的东西。 **较新版本的 Android FB 应用程序可能使用相同的 URL。我没有可以检查的设备。**

# facebook - Facebook like 已损坏，在最终 url 添加尾随 #

> ID：11264230
> 
> 赞同：-2
> 
> 时间：2012-06-29T15:05:35.870
> 
> 标签：facebook, facebook-like, scrape, cargo

我在 Cargo Collective 上运行我的网站，并试图让每页都有点赞。我不能仅在 body 标记内修改 head 标记中的代码。

当我调试页面时，我得到以下信息；

```
Response Code   206
Fetched URL http://www.iamneuron.com/Break-this
Canonical URL   http://www.iamneuron.com/Break-this
URL for Likes   http://www.iamneuron.com/#Break-this
Final URL   http://www.iamneuron.com/#Break-this 
```

我无法弄清楚这一点，我已经搜索了一段时间。即使我明确指定了 url 而不是留下代码来解决它，facebook 仍然会将 url 调整为一个不适用于尾随 # 的 URL。

最初我试图通过 facebook 创建类似的代码，但我现在已经切换到这个更适用于货物但仍然产生相同的错误： [http ://randomcodescraps.tumblr.com/post/1363402555/js-dynamic-like-货物集体项目的按钮](http://randomcodescraps.tumblr.com/post/1363402555/js-dynamic-like-button-on-cargo-collective-projects)

有人有什么想法吗？顺便说一句，提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T16:16:55.607

您的页面没有任何 Facebook 可以使用的 OG 标签。您页面中的内容已被注释掉。添加适当的OG标签，然后使用链接工具检查您的标签，看看是否仍然有同样的问题。

# windows - 有没有办法强制复制？复制没有覆盖提示，使用Windows？

> ID：11264231
> 
> 赞同：94
> 
> 时间：2012-06-29T15:05:46.697
> 
> 标签：windows, command-line

我想写一个 Windows 命令列表（这是一个很长的列表），它为我做了所有这些神奇的事情，但是每当我使用复制时，它就会停止询问覆盖提示。当我输入 yes 时，它会覆盖旧文件，然后就停在那里。

我该如何做到这一点，每当 Windows 看到复制命令时，它只会在没有提示的情况下覆盖旧文件？

* * *

## 回答 #1

> 赞同：184
> 
> 时间：2012-06-29T15:06:50.490

你正在寻找[`/Y`开关](http://technet.microsoft.com/en-us/library/bb490886.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-05-30T02:15:27.997

MOVE /-Y 源目标

注意：/-y 将宣​​布是/否进行覆盖

# android - 关闭显示为 Popup 的 android 活动

> ID：11264232
> 
> 赞同：2
> 
> 时间：2012-06-29T15:05:55.747
> 
> 标签：android, popup, android-listview, android-activity

所以我有一个服务，它启动一个显示为弹出窗口的活动，感谢“android：style/Theme.Dialog”

此活动显示一个列表视图，其中包含应用程序列表。在列表视图的每个元素上，都有应用程序的简短描述和两个按钮。1 用于启动应用程序 2 用于显示带有更多信息的 toast。

这是我的服务中的代码：它启动了活动

```
Intent intent = new Intent(this, PopUpActivity.class);
intent.addFlags(Intent.FLAG_DEBUG_LOG_RESOLUTION);
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
getApplicationContext().startActivity(intent); 
```

此活动使用自定义布局，带有列表视图，使用自定义 ArrayAdapter

在这个适配器中，我在开始按钮上设置了一个动作以启动当前应用程序

```
Button lanceur = (Button) v.findViewById(R.id.Buttonlancer);
            lanceur.setOnClickListener(new View.OnClickListener() {

                public void onClick(View v) {
                    p.start(mcontext);
                }
            }); 
```

使用 p.start，我启动应用程序。

但是现在，如果我从应用程序中按“返回”，我会回到弹出窗口……我可以启动另一个应用程序。我不希望它成为可能。

这就是为什么我希望我可以解除/销毁/完成我的 PopupActivity，但我无法用我拥有的代码来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T15:17:24.123

这可以通过`startActivityForResult()`和 来完成`onActivityResult()`

```
 Intent intent = new Intent(this, PopUpActivity.class);
 intent.addFlags(Intent.FLAG_DEBUG_LOG_RESOLUTION);
 intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
 getApplicationContext().startActivityForResult(intent,1); 

 @Override
 protected void onActivityResult(int requestCode, int resultCode, Intent data) {
     Log.d("CheckStartActivity","onActivityResult and resultCode = "+resultCode);
     // TODO Auto-generated method stub
     super.onActivityResult(requestCode, resultCode, data);
     this.finish();
 } 
```

并添加 AndroidManifest.xml：

`<activity android:name=".PopUpActivity" android:noHistory="true" />`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T15:08:09.110

在调用next之后，只需`finish()`在`Activity`显示为弹出窗口的内部调用。`start``Activity`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T15:12:38.537

像这样更改您的 luanch 代码：

```
Button lanceur = (Button) v.findViewById(R.id.Buttonlancer);
lanceur.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {
        p.start(mcontext);
        finish();
    }
}); 
```

此外，您可能不需要在服务中调用 getApplicationContext() 可以粘贴更多代码吗？您应该能够使用`NameOfYourService.this.startActivity();`，甚至可能仅`startActivity();`取决于您的结构。

另请注意，根据[Developer Docs](http://developer.android.com/guide/topics/ui/notifiers/notifications.html)，直接从服务启动 Activity 是一个***非常糟糕的主意***。看到这个问题的原因：[为什么服务不应该启动活动？](https://stackoverflow.com/questions/11263772/why-service-should-not-start-activity/11263843#11263843)

# asp.net - nHibernate 使用 where 子句或多列映射的多表映射

> ID：11264237
> 
> 赞同：0
> 
> 时间：2012-06-29T15:06:12.930
> 
> 标签：asp.net, nhibernate, orm, mapping, translation

我正在尝试翻译表格“RoomType”。

我创建了一个“文本”表，其中包含：

```
Id, LangID, TranslatedText
001, EN, Single
001, IT, Singola
002, EN, Double
002, IT, Doppia 
```

这是数据库模式 ![在此处输入图像描述](../Images/a974be13a65d41cf7a88ce9775d63d6d.png)

表 RoomType 包含：ID、TextID、MaxBed 01、001、1 02、002、2

我需要创建一个连接 RoomType 和 Text 的 nHibernate 映射，并允许在 LandID = CurrentLanguage 上使用 WHERE 子句加载 RoomType 排队文本。

这是一个小映射，但我不知道下一步该怎么做：

```
public class RoomTypeaMap : ClassMapping<RoomType>
    {
        public RoomTypeaMap()
        {
            Join("Texts", el =>
                {
                    el.Key(k => k.Column("TextID"));
                });
        }
    } 
```

**作为替代方案，我可以为每种语言添加一列**

![在此处输入图像描述](../Images/cd767aa5b35c7740bcb78d6f8e262860.png)

在这种情况下，我需要映射从和（首选）不同的列获取房间类型的本地化名称。

像这样的东西：

```
public class RoomTypeaMap : ClassMapping<RoomType>
    {
        public RoomTypeaMap()
        {
            Property(el => el.Name, m =>
                {
                    m.Formula("Name_" + currentLanguage);
                });
        }
    } 
```

我发现了这篇有趣的帖子，但对我没有帮助：http: [//nhforge.org/wikis/howtonh/localization-techniques.aspx](http://nhforge.org/wikis/howtonh/localization-techniques.aspx)

感谢您的帮助！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T06:57:28.117

我会摆脱语言表并将文本表作为地图的元素表

```
public class RoomType
{
    public virtual int Id { get; set; }
    public virtual IDictionary<string, string> Names { get; private set; }
    public virtual string Name
    {
        get { return Names[Thread.CurrentThread.CurrentUICulture.Name]; } // FIXME: fall back to default language if language not available
        set { Names[Thread.CurrentThread.CurrentUICulture.Name] = value; }
    }
} 
```

并使用以下映射

```
public RoomTypeMap()
{
    [...]
    HasMany(mc => mc.Names)
        .Table("Texts")
        .KeyColumn("RoomType_id")
        .AsMap("language_id")
        .Element("value") 
```

更新：

实施回退

```
string name;
var currentlanguage = Thread.CurrentThread.CurrentUICulture;     // eg en-US
if (!map.TryGetValue(currentlanguage.Name, out result) &&        // en-US
    !map.TryGetValue(currentlanguage.Parent.Name, out result))   // en
{
    result = "fallback name";
}
return name; 
```

# google-maps - 在 Google Maps 元素上添加插入框阴影

> ID：11264240
> 
> 赞同：14
> 
> 时间：2012-06-29T15:06:24.307
> 
> 标签：google-maps, css

我愿意为包含 Google Maps 元素的标签添加一些插入框阴影。但是，似乎什么也没发生，可能是因为 Google 在原始元素中加载了一些其他 div，因此覆盖了生成的 box-shadow。

我怎样才能达到这个效果？

这是我的代码：

```
<section id="map-container">
    <figure id="map"></figure>
</section>

#map-container  {
    position: relative;
    float: right;
    width: 700px;
    background-color: #F9FAFC;
    border-top-right-radius: 5px;
    border-bottom-right-radius: 5px;
}

#map    {
    position: relative;
    height: 400px;
    border-top-right-radius: 5px;
    border-bottom-right-radius: 5px;
    box-shadow: 0 1px 0 0 #F6F7FB inset, 0 -1px 0 0 #E0E5E1 inset, 0 -2px 0 0 #EBEBED inset, 0 -3px 0 0 #F4F4F6 inset;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-05-17T15:56:42.013

我就是这样做的。以下方法不会与地图控件重叠，因此您**将能够对地图进行操作**，即拖动、单击、缩放等。

*HTML：*

```
<div class="map-container">
    <div class="map"></div>
</div> 
```

*CSS：*

```
.map-container {
    position: relative;
    overflow: hidden;
}
.map-container:before, .map-container:after, .map:before, .map:after {
    content: '';
    position: absolute;
    box-shadow: 0 0 10px 0 rgba(0, 0, 0, 0.3);
    z-index: 1;
}
.map-container:before { top: -5px; left: 0; right: 0; height: 5px; }
.map-container:after { right: -5px; top: 0; bottom: 0; width: 5px; }
.map:before { bottom: -5px; left: 0; right: 0; height: 5px; }
.map:after { left: -5px; top: 0; bottom: 0; width: 5px; } 
```

**演示：http:** [//jsfiddle.net/dkUpN/80/](http://jsfiddle.net/dkUpN/80/)

* * *

**更新：**旧的解决方案（见[1 ^(st) revision](https://stackoverflow.com/revisions/98d0cf92-4346-440d-ac3b-4dedd49d372e/view-source)）不支持伪元素并且与旧的浏览器兼容。演示仍然可以在此处获得：http: [//jsfiddle.net/dkUpN/](http://jsfiddle.net/dkUpN/)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-05-31T02:47:15.070

我在尝试向嵌入地图的一侧添加嵌入阴影时遇到了同样的问题。我尝试将它添加到 map-canvas 元素，但没有可见的阴影。不知道这种行为的原因，可能是位置：地图中某些元素的绝对值。

无论如何，与其在代码中添加其他无意义的元素，我宁愿选择一个由覆盖在地图上的薄（5px）条带制成的伪元素：

**这会在左侧**添加阴影：

```
#map-container:before {
    box-shadow: 4px 0 4px -4px rgba(0, 0, 0, 0.5) inset;
    content: "";
    height: 100%;
    left: 0;
    position: absolute;
    width: 5px;
    z-index: 1000;
} 
```

演示：http: [//jsfiddle.net/marcoscarfagna/HSwQA/](http://jsfiddle.net/marcoscarfagna/HSwQA/)

* * *

对于**右侧**阴影：

```
#map-container:before {
    box-shadow: -4px 0 4px -4px rgba(0, 0, 0, 0.5) inset;
    content: "";
    height: 100%;
    right: 0;
    position: absolute;
    width: 5px;
    z-index: 1000;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-29T15:30:27.890

弄清楚了。这里工作的CSS：

```
#map-container  {
    position: relative;
    float: right;
    width: 700px;
    border-top-right-radius: 5px;
    border-bottom-right-radius: 5px;
    box-shadow: 0 1px 0 0 #F6F7FB inset, 0 -1px 0 0 #E0E5E1 inset, 0 -2px 0 0 #EBEBED inset, 0 -3px 0 0 #F4F4F6 inset;
}

#map    {
    position: relative;
    height: 400px;
    border-top-right-radius: 5px;
    border-bottom-right-radius: 5px;
    z-index: -1
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-08T17:49:55.033

遇到此类问题时，我通常会恢复使用自定义叠加层。（[https://developers.google.com/maps/documentation/javascript/overlays#AddingOverlays](https://developers.google.com/maps/documentation/javascript/overlays#AddingOverlays)）

使用自定义叠加层在地图内添加最适合您的图层上的 div，您将能够使用 CSS 设置此 div 的样式。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-10-10T15:13:35.170

Andrei Horak 的回答效果最好。

但有时由于您的布局，使用 z-index 不是一种选择。向谷歌地图附加一个额外的 div 是第二好的选择：

```
#map_canvas .shadow{
    width:100%;
    position:absolute;
    left:0;
    top:0px;
    height:100%;
    z-index:99999;
    position:relative;
    -webkit-box-shadow: inset 0px 0px 0px 1px rgba(0, 0, 0, 0.2);
    box-shadow: inset 0px 0px 0px 1px rgba(0, 0, 0, 0.2);
    pointer-events: none;
} 
```

然后在你的谷歌地图脚本中：

```
google.maps.event.addListener(map, 'idle', function() {
        // Add shadow effect on map
        $("#map_canvas .shadow").remove();
        $("#map_canvas").prepend('<div class="shadow">');

    }); 
```

由于跨浏览器兼容性，这`pointer-events:none;`有点棘手。[在此处](https://developer.mozilla.org/en-US/docs/Web/CSS/pointer-events)查找有关指针事件的更多信息

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-03-04T14:58:12.900

另一种选择，虽然不是在所有情况下都有效，但将 box-shadow 放在地图旁边的元素上。[谷歌自己在这里](https://www.google.com/maps/views/streetview/churchill-canada?hl=en&gl=ca)这样做

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-29T15:09:28.467

您将需要查看 Google 正在添加的元素，并使用您的 CSS 样式来定位和覆盖这些元素。使用 Firebug、webkit “检查元素”等来查看添加的元素及其样式。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-29T15:12:54.063

如果您正在寻找样式信息窗口，请查看[此问题](https://stackoverflow.com/questions/5634991/styling-google-maps-infowindow)。

这适用于谷歌地图上出现的大多数对象。用你自己的 css 来定位它们是*可能的*，但我怀疑有人做过，因为这**很难**（我试过）。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-27T16:51:20.397

我添加了一个包含嵌入阴影的额外内容。HTML: ... #mapContainer{ 位置：相对；}

```
.map{
width:425px;
height:350px;
z-index:9999;
position:absolute;
top:0;
left:0;
@include borderAffect($pad:0,$borderCol:#00467F,$insetVal:true);        
} 
```

# c - Mac OS X 上的 Std Lib 源

> ID：11264242
> 
> 赞同：1
> 
> 时间：2012-06-29T15:06:27.367
> 
> 标签：c, macos, vi, std, ctags

我最近开始在 Mac OS X (10.7.4) 上编写 C 语言。我在/usr/include 中有stdlib 的各种头文件，但希望获得源代码。这主要是我自己学习所需要的，但我也想针对它生成 Ctag，以便在 Vim 中轻松导航。

是否有可能从某个地方得到这个，如果是从哪里得到的？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T15:08:02.247

你在这里：[http ://www.opensource.apple.com/source/Libc/Libc-763.13/](http://www.opensource.apple.com/source/Libc/Libc-763.13/)

# javascript - 关闭并重新打开时的 Highslide iframe 不会更新内容

> ID：11264247
> 
> 赞同：0
> 
> 时间：2012-06-29T15:06:56.063
> 
> 标签：javascript, prototypejs

我正在使用 Highslide，它运行良好，除非我尝试重新打开包含新内容的 highslide 弹出窗口。我实际上不需要它重新打开，但由于它的 contentId 相同，它确实如此。虽然内容没有更新。这是代码：

```
function doSomething() {
  //Changes to fileExistList (removed for simplicity)
  var newHTML = $('fileExistList').clone(true); //Cloning div as Highslide removes it
  $(newHTML).id = 'fileExistList2'; //Change cloned divs id
  $('fileExistList').insert({ //add cloned div to page
    before: newHTML 
  });
  hs.htmlExpand(null, { contentId: 'fileExistList2', align:'center' });
} 
```

第一次调用它时，它会正确显示，但在此之后的所有时间，直到刷新显示初始弹出内容而不是更新的内容。我正在为 Highslide 弹出窗口使用 iframe。

任何人有任何想法如何修改它以使用更新的内容打开？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T17:56:23.387

Highslide 有一些配置选项，其中一个是 preserveContent，您需要将其设置为 false 以获取 HTML 内容。这不是我必须做的唯一事情。我必须检查 hs.clones 对象并删除我正在复制的 HTML 内容的 id。这迫使 highslide 获取更新的 id 内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T13:03:33.003

也许回答迟了，但最好的方法是在完成工作后重定向您的页面（显示在 iframe 中的页面）。

像这样的东西：

```
Page1->Enter your data->Redirect to itself->Page1 
```

我总是在我的作品中这样做并且它总是有效的。

# java - 有谁知道为什么抛出这个异常？线程“AWT-EventQueue-0”中的异常 java.lang.NullPointerException

> ID：11264250
> 
> 赞同：-1
> 
> 时间：2012-06-29T15:07:02.260
> 
> 标签：java, exception, nullpointerexception, awt, rollover

> **可能重复：**
> [谁能帮我识别线程“AWT-EventQueue-0”java.lang.NullPointerException 65 行中的异常？](https://stackoverflow.com/questions/11141425/can-anyone-help-me-identify-the-exception-in-thread-awt-eventqueue-0-java-lang)

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at SelectUnitFrame.<init>(SelectUnitFrame.java:112)
    at CoolingTowerFrame$ButtonListener.actionPerformed(CoolingTowerFrame.java:184)
    at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
    at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
    at java.awt.Component.processMouseEvent(Unknown Source)
    at javax.swing.JComponent.processMouseEvent(Unknown Source)
    at java.awt.Component.processEvent(Unknown Source)
    at java.awt.Container.processEvent(Unknown Source)
    at java.awt.Component.dispatchEventImpl(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Window.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$000(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source) 
```

代码很长，但我可以编辑这篇文章并添加是否有帮助

我认为由于这个[第112行]代码不起作用，`tableButton.setRolloverEnabled(false);` 我需要禁用翻转功能的原因是，当按下按钮时按钮发生变化时，它不会返回到原始图像。如果对此有任何修复，那也可能有效。

继承人的代码：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.io.*;
import java.util.*;

public class SelectUnitFrame extends JFrame
{
  public JLabel showNumbersLabel;
  public JPanel showPanel = new JPanel();
  public JButton tableButton;
  public JPanel buttonPanel = new JPanel();
  public JButton goBackButton = new JButton("Change Variables");
  public JButton exitButton = new JButton("Done");
  public JButton nextButton = new JButton(">");
  public JButton prevButton = new JButton("<");
  public int fRate;
  public int wbTemp;
  public int r;
  public int a; 
  public int rcTons;
  public int count;
  public String [] tablesFor80 = {"80F_FG2003.GIF", "80F_FG2004.GIF", "80F_FG2005.GIF", "80F_FG2007.GIF", "80F_FG2009.GIF", "80F_FG2011.GIF", "80F_FG2015.GIF"};
  public String [] tablesFor78 = {"78F_FG2003.GIF", "78F_FG2004.GIF", "78F_FG2005.GIF", "78F_FG2007.GIF", "78F_FG2009.GIF", "78F_FG2011.GIF", "78F_FG2015.GIF"};
  public String [] tablesFor76 = {"76F_FG2003.GIF", "76F_FG2004.GIF", "76F_FG2005.GIF", "76F_FG2007.GIF", "76F_FG2009.GIF", "76F_FG2011.GIF", "76F_FG2015.GIF"};
  public String [] tablesFor74 = {"74F_FG2003.GIF", "74F_FG2004.GIF", "74F_FG2005.GIF", "74F_FG2007.GIF", "74F_FG2009.GIF", "74F_FG2011.GIF", "74F_FG2015.GIF"};
  public String [] tablesFor72 = {"72F_FG2003.GIF", "72F_FG2004.GIF", "72F_FG2005.GIF", "72F_FG2007.GIF", "72F_FG2009.GIF", "72F_FG2011.GIF", "72F_FG2015.GIF"};
  public String [] tablesFor70 = {"70F_FG2003.GIF", "70F_FG2004.GIF", "70F_FG2005.GIF", "70F_FG2007.GIF", "70F_FG2009.GIF", "70F_FG2011.GIF", "70F_FG2015.GIF"};
  public String [] tablesFor68 = {"68F_FG2003.GIF", "68F_FG2004.GIF", "68F_FG2005.GIF", "68F_FG2007.GIF", "68F_FG2009.GIF", "68F_FG2011.GIF", "68F_FG2015.GIF"};
  public ImageIcon tablePicture;   

  public SelectUnitFrame(int flowRate, int wetBulbTemp, int roundedCoolingTons, int approach, int range)
  {
    super("Unit Selected");
    Toolkit toolkit = Toolkit.getDefaultToolkit();
    Dimension dimensions = toolkit.getScreenSize();
    int x = (dimensions.width - 750)/2; 
    int y = (dimensions.height - 350)/2;
    setBounds(x, y, 750, 350); 

    setVisible(true);
    setResizable(false);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    goBackButton.addActionListener(new ButtonListener());
    exitButton.addActionListener(new ButtonListener());
    nextButton.addActionListener(new ButtonListener());
    prevButton.addActionListener(new ButtonListener());

    fRate = flowRate;
    wbTemp = wetBulbTemp;
    r = range;
    a = approach;
    rcTons = roundedCoolingTons;

    buttonPanel.add(goBackButton);
    buttonPanel.add(exitButton);

    add(buttonPanel, BorderLayout.SOUTH);

    showNumbersLabel = new JLabel("Wet Bulb: " + wbTemp + "(deg)F     " + "Range: " + r + "     Approach: " + a + "     Tons/GPM: " + rcTons + "/" + fRate);
    showPanel.add(showNumbersLabel);

    add(showPanel, BorderLayout.NORTH);

    if ((wbTemp >= 79) && (wbTemp < 82))
    {
      tempSelection80(flowRate, wetBulbTemp, roundedCoolingTons, approach, range);
    }
    else if ((wbTemp < 79 ) && (wbTemp >= 77))
    {
      tempSelection78(flowRate, wetBulbTemp, roundedCoolingTons, approach, range);
    }  
    else if ((wbTemp < 77) && (wbTemp >= 75))
    {
      tempSelection76(flowRate, wetBulbTemp, roundedCoolingTons, approach, range);
    } 
    else if ((wbTemp < 75) && (wbTemp >= 73))
    {
      tempSelection74(flowRate, wetBulbTemp, roundedCoolingTons, approach, range);
    }
    else if ((wbTemp < 73) && (wbTemp >= 71))
    {
      tempSelection72(flowRate, wetBulbTemp, roundedCoolingTons, approach, range);
    }
    else if ((wbTemp < 71) && (wbTemp >= 69))
    {
      tempSelection70(flowRate, wetBulbTemp, roundedCoolingTons, approach, range);
    }
    else if ((wbTemp < 69) && (wbTemp >= 67))
    {
      tempSelection68(flowRate, wetBulbTemp, roundedCoolingTons, approach, range);
    }
    else
    {
      tableButton = new JButton("Cooling Tower Cannot Handle Temperatures In This Wet Bulb");
    }
    tableButton.setRolloverEnabled(false);
    add(nextButton, BorderLayout.EAST);
    add(prevButton, BorderLayout.WEST);
    add(tableButton, BorderLayout.CENTER);
  }
  private class ButtonListener implements ActionListener
  {
    @Override
    public void actionPerformed(ActionEvent e)
    {
      if (e.getSource() == goBackButton)
      {
        dispose();
      }
      else if (e.getSource() == exitButton)
      {
        System.exit(0);
      }
      else if (e.getSource() == nextButton)
      {
        String t = tableButton.getText();
        tableButton.updateUI();
        String s = ((ImageIcon)tableButton.getIcon()).toString();
        if ((wbTemp >= 79) && (wbTemp < 82))
        {
          if (t.equals("Cannot Find Model for Variables Given. Adjust or Scroll to Look Through Tables."))
          {
            count = 0;
          }
          else
          {
            for (int i = 0; i <= 6; i++)
            {
              if (s.equals(tablesFor80[i]))
              {
                if (i == 6)
                {
                  count = 0;
                }
                else
                {
                  count = (i+1);
                }
              }
            }
          }
          tableButton = new JButton(new ImageIcon(tablesFor80[count], tablesFor80[count]));
        }
        else if ((wbTemp < 79 ) && (wbTemp >= 77))
        {
          if (t.equals("Cannot Find Model for Variables Given. Adjust or Scroll to Look Through Tables."))
          {
            count = 0;
          }
          else
          {
            for (int i = 0; i <= 6; i++)
            {
              if (s.equals(tablesFor78[i]))
              {
                if (i == 6)
                {
                  count = 0;
                }
                else
                {
                  count = (i+1);
                }
              }
            }
          }
          tableButton = new JButton(new ImageIcon(tablesFor78[count], tablesFor78[count]));
        }
        else if ((wbTemp < 77) && (wbTemp >= 75))
        {
          if (t.equals("Cannot Find Model for Variables Given. Adjust or Scroll to Look Through Tables."))
          {
            count = 0;
          }
          else
          {
            for (int i = 0; i <= 6; i++)
            {
              if (s.equals(tablesFor76[i]))
              {
                if (i == 6)
                {
                  count = 0;
                }
                else
                {
                  count = (i+1);
                }
              }
            }
          }
          tableButton = new JButton(new ImageIcon(tablesFor76[count], tablesFor76[count]));
        }
        else if ((wbTemp < 75) && (wbTemp >= 73))
        {
          if (t.equals("Cannot Find Model for Variables Given. Adjust or Scroll to Look Through Tables."))
          {
            count = 0;
          }
          else
          {
            for (int i = 0; i <= 6; i++)
            {
              if (s.equals(tablesFor74[i]))
              {
                if (i == 6)
                {
                  count = 0;
                }
                else
                {
                  count = (i+1);
                }
              }
            }
          }
          tableButton = new JButton(new ImageIcon(tablesFor74[count], tablesFor74[count]));
        }
        else if ((wbTemp < 73) && (wbTemp >= 71))
        {
          if (t.equals("Cannot Find Model for Variables Given. Adjust or Scroll to Look Through Tables."))
          {
            count = 0;
          }
          else
          {
            for (int i = 0; i <= 6; i++)
            {
              if (s.equals(tablesFor72[i]))
              {
                if (i == 6)
                {
                  count = 0;
                }
                else
                {
                  count = (i+1);
                }
              }
            }
          }
          tableButton = new JButton(new ImageIcon(tablesFor72[count], tablesFor72[count]));
        }
        else if ((wbTemp < 71) && (wbTemp >= 69))
        {
          if (t.equals("Cannot Find Model for Variables Given. Adjust or Scroll to Look Through Tables."))
          {
            count = 0;
          }
          else
          {
            for (int i = 0; i <= 6; i++)
            {
              if (s.equals(tablesFor70[i]))
              {
                if (i == 6)
                {
                  count = 0;
                }
                else
                {
                  count = (i+1);
                }
              }
            }
          }
          tableButton = new JButton(new ImageIcon(tablesFor70[count], tablesFor70[count]));
        }
        else if ((wbTemp < 69) && (wbTemp >= 67))
        {
          if (t.equals("Cannot Find Model for Variables Given. Adjust or Scroll to Look Through Tables."))
          {
            count = 0;
          }
          else
          {
            for (int i = 0; i <= 6; i++)
            {
              if (s.equals(tablesFor68[i]))
              {
                if (i == 6)
                {
                  count = 0;
                }
                else
                {
                  count = (i+1);
                }
              }
            }
          }
          tableButton = new JButton(new ImageIcon(tablesFor68[count], tablesFor68[count]));
        }
        tableButton.setRolloverEnabled(false);
        add(tableButton, BorderLayout.CENTER);
      }
      else if (e.getSource() == prevButton)
      {
        String t = tableButton.getText();
        tableButton.updateUI();
        String s = ((ImageIcon)tableButton.getIcon()).toString();
        if ((wbTemp >= 79) && (wbTemp < 82))
        {
          if (t.equals("Cannot Find Model for Variables Given. Adjust or Scroll to Look Through Tables."))
          {
            count = 0;
          }
          else
          {
            for (int i = 0; i <= 6; i++)
            {
              if (s.equals(tablesFor80[i]))
              {
                if (i == 0)
                {
                  count = 6;
                }
                else
                {
                  count = (i-1);
                }
              }
            }
          }
          tableButton = new JButton(new ImageIcon(tablesFor80[count], tablesFor80[count]));
        }
        else if ((wbTemp < 79 ) && (wbTemp >= 77))
        {
          if (t.equals("Cannot Find Model for Variables Given. Adjust or Scroll to Look Through Tables."))
          {
            count = 0;
          }
          else
          {
            for (int i = 0; i <= 6; i++)
            {
              if (s.equals(tablesFor78[i]))
              {
                if (i == 0)
                {
                  count = 6;
                }
                else
                {
                  count = (i-1);
                }
              }
            }
          }
          tableButton = new JButton(new ImageIcon(tablesFor78[count], tablesFor78[count]));
        }
        else if ((wbTemp < 77) && (wbTemp >= 75))
        {
          if (t.equals("Cannot Find Model for Variables Given. Adjust or Scroll to Look Through Tables."))
          {
            count = 0;
          }
          else
          {
            for (int i = 0; i <= 6; i++)
            {
              if (s.equals(tablesFor76[i]))
              {
                if (i == 0)
                {
                  count = 6;
                }
                else
                {
                  count = (i-1);
                }
              }
            }
          }
          tableButton = new JButton(new ImageIcon(tablesFor76[count], tablesFor76[count]));
        }
        else if ((wbTemp < 75) && (wbTemp >= 73))
        {
          if (t.equals("Cannot Find Model for Variables Given. Adjust or Scroll to Look Through Tables."))
          {
            count = 0;
          }
          else
          {
            for (int i = 0; i <= 6; i++)
            {
              if (s.equals(tablesFor74[i]))
              {
                if (i == 0)
                {
                  count = 6;
                }
                else
                {
                  count = (i-1);
                }
              }
            }
          }
          tableButton = new JButton(new ImageIcon(tablesFor74[count], tablesFor74[count]));
        }
        else if ((wbTemp < 73) && (wbTemp >= 71))
        {
          if (t.equals("Cannot Find Model for Variables Given. Adjust or Scroll to Look Through Tables."))
          {
            count = 0;
          }
          else
          {
            for (int i = 0; i <= 6; i++)
            {
              if (s.equals(tablesFor72[i]))
              {
                if (i == 0)
                {
                  count = 6;
                }
                else
                {
                  count = (i-1);
                }
              }
            }
          }
          tableButton = new JButton(new ImageIcon(tablesFor72[count], tablesFor72[count]));
        }
        else if ((wbTemp < 71) && (wbTemp >= 69))
        {
          if (t.equals("Cannot Find Model for Variables Given. Adjust or Scroll to Look Through Tables."))
          {
            count = 0;
          }
          else
          {
            for (int i = 0; i <= 6; i++)
            {
              if (s.equals(tablesFor70[i]))
              {
                if (i == 0)
                {
                  count = 6;
                }
                else
                {
                  count = (i-1);
                }
              }
            }
          }
          tableButton = new JButton(new ImageIcon(tablesFor70[count], tablesFor70[count]));
        }
        else if ((wbTemp < 69) && (wbTemp >= 67))
        {
          if (t.equals("Cannot Find Model for Variables Given. Adjust or Scroll to Look Through Tables."))
          {
            count = 0;
          }
          else
          {
          for (int i = 0; i <= 6; i++)
          {
            if (s.equals(tablesFor68[i]))
            {
              if (i == 0)
              {
                count = 6;
              }
              else
              {
                count = (i-1);
              }
            }
          }
          }
          tableButton = new JButton(new ImageIcon(tablesFor68[count], tablesFor68[count]));
        }
        tableButton.setRolloverEnabled(false);
        add(tableButton, BorderLayout.CENTER);
      }
    }
  } 
```

问题是在一个称为主体的方法中的这个语句太长了，我无法添加它

```
else
      {
        tableButton = new JButton("Cannot Find Model for Variables Given. Adjust or Scroll to Look Through Tables.");
      }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T15:31:50.597

`tableButton`为空，除非`else`您的长列表中的部分//`if`运行。`else if``else`

换句话说，如果`wbTemp`介于 69 和 82 之间，您将获得 NullPointerException。

`tableButton = new JButton(...)`结论：如果`wbTemp`介于 69 和 82 之间，您需要运行这样的语句。

**编辑**

为了解决您的评论，我在下面添加了一个代码示例，其中：

*   如果条件 1 为真，则仅运行块 1
*   如果条件 1 为假且条件 2 为真，则仅运行块 2
*   如果条件 1 为假且条件 2 为假，则仅运行块 3

我建议您阅读该语言的基础知识，例如[Java 教程](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/if.html)

```
if(condition1) {
    //(Block 1)
} else if(condition2) {
    //(Block 2)
} else {
    //(Block 3)
} 
```

# java - 使用 JMenuItem 选择 JTabbedPane 面板

> ID：11264252
> 
> 赞同：0
> 
> 时间：2012-06-29T15:07:03.907
> 
> 标签：java, jtabbedpane, jmenuitem, pane

我在框架中有一个菜单栏和一个选项卡式窗格，我希望如果我选择一个菜单项，那么请求的选项卡将打开。请帮我解决这个问题，谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T07:27:50.560

在`ActionListener`中`JMenuItem`，可以调用[`JTabbedPane#setSelectedIndex`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTabbedPane.html#setSelectedIndex%28int%29)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T09:43:09.753

就像 SoboLAN 说的：

```
 final JTabbedPane tabs = new JTabbedPane();
    JPanel panel = new JPanel();
    tabs.add("title", panel);
    //add more tabs...

    // here the important part starts
    JMenuItem item = new JMenuItem("open tab 1");
    item.addActionListener(new ActionListener() {
        //this function get called when you click the item.
        @Override
        public void actionPerformed(ActionEvent e) {
            //insert the index you want to select
            tabs.setSelectedIndex(0);
        }
    }); 
```

# wcf - WCF：如何跟踪邮件正文？

> ID：11264260
> 
> 赞同：8
> 
> 时间：2012-06-29T15:07:35.337
> 
> 标签：wcf, logging, trace

我正在尝试诊断在相对简单的服务主机进程 (Service.exe) 中自托管的 WCF 服务。

我这样配置了 Service.exe.config：

```
<?xml version="1.0" ?>
<configuration>
  <system.diagnostics>
    <sources>
      <source name="System.ServiceModel" 
              switchValue="All"
              propagateActivity="true">
        <listeners>
          <add name="traceListener" 
               type="System.Diagnostics.XmlWriterTraceListener" 
               initializeData= "c:\temp\Service.svclog" />
        </listeners>
      </source>
    </sources>
  </system.diagnostics>
  <system.serviceModel>
    <diagnostics>
      <messageLogging maxMessagesToLog="1"
                      maxSizeOfMessageToLog="2147483647"
                      logEntireMessage="true"
                      logMessagesAtServiceLevel="true"
                      logMalformedMessages="true"
                      logMessagesAtTransportLevel="true">
      </messageLogging>
    </diagnostics>
  </system.serviceModel>
  <startup>
    <supportedRuntime version="v4.0"
                      sku=".NETFramework,Version=v4.0" />
  </startup>
</configuration> 
```

当我查看生成的 svclog 文件时，我看到记录了许多跟踪事件（我希望只记录第一条消息），并且所有被跟踪的消息都没有显示消息正文（只有标头）。

我确定我必须在这里遗漏一些简单的东西，但我没有看到。

更新：当我查看 WCF 配置编辑器时，“诊断”下有两个部分：MessageLogging 和 Tracing。当我单击“EnableMessageLogging”链接时，我的配置文件得到更新：

```
 <system.diagnostics>
    <sources>
      <source propagateActivity="true" name="System.ServiceModel" switchValue="All">
        <listeners>
          <add type="System.Diagnostics.DefaultTraceListener" name="Default">
            <filter type="" />
          </add>
          <add initializeData="c:\temp\MessageBodyTracing.svclog" type="System.Diagnostics.XmlWriterTraceListener"
            name="traceListener">
            <filter type="" />
          </add>
        </listeners>
      </source>
      <source name="System.ServiceModel.MessageLogging" switchValue="Warning, ActivityTracing">
        <listeners>
          <add type="System.Diagnostics.DefaultTraceListener" name="Default">
            <filter type="" />
          </add>
          <add name="ServiceModelMessageLoggingListener">
            <filter type="" />
          </add>
        </listeners>
      </source>
    </sources>
    <sharedListeners>
      <add initializeData="c:\users\me\documents\visual studio 2010\projects\messagebodytracing\messagebodytracing\app_messages.svclog"
        type="System.Diagnostics.XmlWriterTraceListener, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"
        name="ServiceModelMessageLoggingListener" traceOutputOptions="Timestamp">
        <filter type="" />
      </add>
    </sharedListeners>
  </system.diagnostics> 
```

我猜名为 System.ServiceModel.MessageLogging 的源是关键 - 我在任何消息跟踪文档中都没有看到......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T15:16:42.987

尝试添加：

```
<endToEndTracing propagateActivity="true" activityTracing="true" messageFlowTracing="true" /> 
```

在您的`diagnostics`节点中，在`messageLogging`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T21:33:53.630

在服务配置编辑器的 Diagnostics->MessageLogging 下将**LogEntireMessage设置为 true**

# c# - TweetSharp GetRequestToken

> ID：11264261
> 
> 赞同：1
> 
> 时间：2012-06-29T15:07:36.577
> 
> 标签：c#, oauth, twitter

我正在使用 TweetSharp Api，但我遇到了一些关于 service.GetRequestToken() 的问题。
例如，在我的 Asp.net C# 函数中，我执行了一个简单的 sendTweet()。
在我的 Tweeter 帐户上，我的应用程序未注册。
所以我得到了一个未经授权的响应，我调用了我的 Authorize 方法。

```
TwitterService service = new TwitterService("ConsumerKey", "ConsumerSecret");
OAuthRequestToken requestToken = service.GetRequestToken("callbacklink");
Uri uri = service.GetAuthorizationUri(requestToken);
return new RedirectResult(uri.ToString(), false); 
```

问题是，当我第一次被重定向到 Twitter 授权窗口时，我有一个好的窗口，但是如果我在没有授权我的应用程序的情况下再次尝试，则 url 就像：

> [https://api.twitter.com/oauth/authorize?oauth_token=](https://api.twitter.com/oauth/authorize?oauth_token=)？

我得到一个错误。
如果我继续，我会得到好的 url，然后是空的，依此类推......

你有什么解释吗？
非常感谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:01:21.127

您可能忘记在 twitter 应用程序的设置选项卡上配置“回调 URL”字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-26T12:36:48.593

您可能忘记在 Twitter 应用程序的设置选项卡上配置“回调 URL”字段。

注意：localhost 将不起作用，您可以使用 localhost 使用技巧查看详细信息： [您可以在 localhost 中运行使用 Twitter OAuth 的应用程序吗？](https://stackoverflow.com/questions/2306459/can-you-run-in-localhost-an-app-that-use-twitter-oauth)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-25T07:22:08.447

再也没有问题了，我只是将用户令牌存储在数据库中并在每次访问时获取它。

# mysql - 选择属于多个类别的行

> ID：11264264
> 
> 赞同：1
> 
> 时间：2012-06-29T15:07:43.550
> 
> 标签：mysql, sql

我有2张桌子。第一个表充满了条目。第二个表定义了该条目所属的类别：

表格1：

```
entry_id | title
       1 | Entry1
       2 | Entry2
       3 | Entry3 
```

表 2

```
entry_id | cat_id
       1 | 233
       1 | 234
       1 | 678
       2 | 235
       2 | 453
       2 | 21
       3 | 234
       3 | 233 
```

我正在尝试使用属于多个类别的所有帖子的单个查询来选择一个条目。例如，我想返回属于类别 ID 233 和 234 的条目。我相信这需要一个子查询，尽管我不太确定。任何帮助任何人？:)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-29T15:10:00.480

了解[SQL 连接](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)。

```
SELECT * FROM tbl1 JOIN tbl2 USING (entry_id) WHERE cat_id IN (233,234); 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/55073/1/0)上查看。

* * *

**更新**

*要选择这两个*类别中的所有条目，您可以对联接的结果进行分组，并仅选择包含这两个类别的那些组：

```
SELECT   tbl1.*
FROM     tbl1 JOIN tbl2 USING (entry_id)
WHERE    cat_id IN (233,234)
GROUP BY entry_id
HAVING   COUNT(DISTINCT cat_id) = 2 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/55073/5/0)上查看。

显然可以用`COUNT(DISTINCT cat_id)`（便宜得多）`COUNT(*)`if被替换`(entry_id, cat_id)`为唯一的`tbl2`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-29T15:10:16.080

试试这个：

```
select * from entity e
where exists (select * from category c where c.entry_id=e.entry_id AND c.cat_id=233)
  and exists (select * from category c where c.entry_id=e.entry_id AND c.cat_id=234) 
```

*这将返回同时*属于233 和 234 的行（无论如何，这就是我阅读您的问题的方式；我可能误解了“属于多个类别”部分）。

# jquery - 使用 jQuery 获取 2 组单选按钮的选中值

> ID：11264272
> 
> 赞同：0
> 
> 时间：2012-06-29T15:08:04.410
> 
> 标签：jquery, radio-button

我在这里有一个奇怪的问题。它可能只是一些愚蠢的东西，但我没有看到。我有两组单选按钮 group1 和 group2，我想在一个函数中获取它们的值。

我在该 div 中的所有单选按钮上有 1 个 clickevent，当我单击它们时，我想显示两个组的检查值。但他只读取第一组的值。所以它总是显示 1-1 2-2 3-3 4-4 而不是可能的 1-2 3-1 等等....

这里有一个[jsfiddle](http://jsfiddle.net/UWcuh/)我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T15:10:40.967

去掉`@`函数中的符号：

```
function changeOutput() {
    gval1 = $("input:radio[name='group1']:checked").val();
    gval2 = $("input:radio[name='group2']:checked").val();
    $('#generator_output').text(gval1 + ' ' + gval2);
}​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/UWcuh/1/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T15:12:11.147

看看这里：http: [//jsfiddle.net/AbdEx/](http://jsfiddle.net/AbdEx/)

看起来使用`@name`选择器把事情搞砸了。

# java - 两个 Java 列表元素如何相互访问？

> ID：11264274
> 
> 赞同：0
> 
> 时间：2012-06-29T15:08:07.283
> 
> 标签：java, android

对我来说问题的根源是 Java 不允许引用。

这个问题可以简单概括。假设您有一个 Blob 对象列表：

```
class Blob {
    public int xpos;
    public int ypos;
    public int mass;
    public boolean dead;
    private List<Object> giganticData;
    public void blobMerge(Blob aBlob) {
        . . .
        if (. . .) {
            this.dead = true;
        } else {
            aBlob.dead = true;
        }
    }
} 
```

如果两个 blob 足够接近，它们应该被合并，这意味着被比较的两个 blob 中的一个应该具有另一个的属性（在这种情况下，添加质量并合并巨大的数据集），另一个应该被标记为删除从列表中。

抛开如何以最佳方式识别相邻 blob 的问题（本身就是一个 stackoverflow 问题）不谈，如何在 Blob 类中保留 blobMerge() 逻辑？在 C 或 C++ 中，这很简单，因为您只需将一个 Blob 指针传递给另一个 Blob，“主机”就可以对“客人”做任何它喜欢的事情。

但是，上面在 Java 中实现的 blobMerge() 将对“来宾”Blob 的副本进行操作，这有两个问题。1) 无需承担复制 giganticData 的高昂成本，并且 2) “guest” Blob 的原始副本在包含列表中将不受影响。

我只能看到两种方法：

1) 把副本传进去，每件事都做两次。换句话说，Blob A 托管 Blob B，而 Blob B 托管 Blob A。您最终得到了正确的答案，但所做的工作超出了必要的范围。

2) 将 blobMerge() 逻辑放在包含 List 的 Class 中。但是，当您开始对 Blob（BlueBlob、RedBlob、GreenBlob 等）进行子类化时，这种方法的扩展性很差，因此每个排列的合并逻辑都不同。您最终会在包含列表的通用容器中获得大多数特定于子类的代码。

我已经看到了一些关于使用库向 Java 添加引用的内容，但是您必须使用库才能使用引用的想法让我放弃了这个想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T15:10:23.387

为什么它会在副本上运行？Java 传递对对象的引用。引用与 C++ 指针非常相似。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T15:11:27.200

嗯...传递的引用不是整个对象的副本。原始对象将被修改，实际上没有数据移动。

# flash - 自定义 Flash 播放器进度条上的预览帧

> ID：11264284
> 
> 赞同：0
> 
> 时间：2012-06-29T15:08:22.820
> 
> 标签：flash, video, video-streaming

最近我构建了一个 Flash 视频播放器（它根据加载的 xml 文件从目录加载不同的视频）。无论如何，我已经在我想实现的自定义 Flash 播放器（HULU、youtube 等）中看到了这个很酷的功能，但完全不知道它是如何完成的（或者它叫什么，这使得搜索谷歌而不是难的 ）。

当您将鼠标悬停在视频进度条上时，会弹出一个小框并显示视频中该点的帧。

有谁知道如何做到这一点，或者可以指点我一些教程？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-30T19:39:36.037

Sunil 的回答可能是一个解决方案，但会是一个缓慢的解决方案，IMO。我真的不知道 Youtube 或其他视频播放器是如何做到的。但在我们的例子中，我们预先生成了一个 CSS sprite，其中包含每个视频的帧预览图像。当用户打开一个视频网页时，该视频的 CSS sprite 也会被下载到客户端。因此，当用户沿着进度条移动鼠标时，我们将计算光标在哪一帧，并从 CSS sprite 中获取该帧预览图像。我们使用 CSS sprite 来确保浏览器下载帧预览图像时只有 1 个连接。希望这有帮助。

顺便问一下，谁能告诉我这个功能的已知名称？我一直在问很多人，但没有人知道这个功能的正式名称。
~~~~
EDIT @ 2012/8/15
我想我从一些网页上得到了这个功能更好听的名字，它叫做故事板。这比视频缩略图好得多。

# sql - 使用 log4j 记录休眠 SQL

> ID：11264288
> 
> 赞同：1
> 
> 时间：2012-06-29T15:08:28.687
> 
> 标签：sql, hibernate, logging, log4j

我正在使用休眠，我正在尝试将休眠自动生成的所有 SQL 记录到控制台，以便我可以查看映射中是否存在错误。我正在使用 log4j，所以我正在尝试使用

```
log4j.logger.org.hibernate.SQL=ALL, SQL_APPENDER 
```

显示hibernate正在使用的所有SQL，但这不起作用。我已将这行代码添加到我的`log4j.properties`文件中，但它不起作用！我是忘记了什么还是做错了什么

我想显示这样的东西

```
Hibernate: INSERT INTO mkyong.stock_transaction (CHANGE, CLOSE, DATE, OPEN, STOCK_ID, VOLUME) 
VALUES (?, ?, ?, ?, ?, ?) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T15:25:36.743

我设法解决了这个问题。而不是使用

```
log4j.logger.org.hibernate.SQL=ALL, SQL_APPENDER 
```

在我的`log4j.properties`文件中应该是

```
log4j.category.org.hibernate.SQL = ALL 
```

# mysql - 如何使用 MySQL 中的过程验证用户登录？

> ID：11264292
> 
> 赞同：0
> 
> 时间：2012-06-29T15:08:39.317
> 
> 标签：mysql, sql, stored-procedures

目前我正在验证用户登录，因此使用程序将用户名和密码与注册表单进行比较，然后找到记录集值>0（成功）或<0（失败），但我对程序概念不太了解，我尽力了我的水平，但我无法解决这个问题，请帮助我。提前致谢

在这里我试过这个：

```
Create table signupform (username varchar(10), password varchar(10)); 
Insert into signupform values ('sampath','s96000');
Insert into signupform values ('yuvaraj','y96297');
select * from signupform;

// CREATE PROCEDURE for compare username and password
create procedure testing (@username varchar(10), @password varchar(10))
AS
BEGIN
select * from signupform where username = @username and password = @password
End; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T15:13:55.217

我建议你创建函数：

```
create function testing(@username varchar(10), @password varchar(10))
RETURNS bit
BEGIN
   if EXISTS(select * from signupform where username = @username and password = @password)
   then
      return 1;
   else
      return 0; 
   end if;
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T15:13:37.163

尝试检查您的用户表中是否存在某些登录名/密码

```
if EXISTS(SELECT TOP 1 * FROM signupform WHERE username = @username AND password = @password)
begin

set @res = 1;
end

    select @res as valid
    return 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T15:14:07.793

您可以确保无论如何都返回一个值，这样您就不必担心计算行数

```
IF EXISTS(  
   SELECT *  
   FROM signupform  
   WHERE username = @username AND password = @password)  
BEGIN  
   SELECT 'Y'  
END  
ELSE  
BEGIN  
   SELECT 'N'  
END 
```

或者做一个计数，虽然效率可能较低

```
SELECT COUNT(*)  
FROM signupform  
WHERE username = @username AND password = @password 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-07-22T10:45:20.603

试试这些`SELECT`语句：

```
SELECT UPPER(LEFT(@TypeName, 3)) into @TypeCode;
SELECT UPPER(LEFT(BranchName, 3)) into @Branch from tbl_erp_branches where BranchId=BranchIds;
-- SELECT UPPER(LEFT(AccountHeadName, 3)) into @Head from fin_erp_account_head where AccountHeadId=AccountHeadIds;
SELECT UPPER(LEFT(AccountHeadName, 3)) into @Head from fin_erp_account_head where AccountHeadId=AccountHeadIds;
SELECT UPPER(LEFT(CurrencyCode, 3)) into @Currency from tbl_erp_currency where CurrencyId=CurrencyIds; 
```

# solr - Solr - 复杂排序

> ID：11264299
> 
> 赞同：0
> 
> 时间：2012-06-29T15:09:10.553
> 
> 标签：solr

我需要按以下方式对属性列表进行排序：

1.  搜索词（例如城市：亚特兰大）
2.  距离（例如到乔治亚州亚特兰大市中心的距离）：geodist(LatLng,34.002878,-84.144637) desc
3.  包级 asc
4.  PackageLevel 1-5 的随机顺序：product(map(PackageLevel, 1, 5, 1), seedrandom_10) desc
5.  距离：geodist() asc

我可以处理除第一个要求之外的所有要求。我试过 termfreq(City, 'Atlanta')，但它返回一个错误：

> 排序参数无法解析为查询，并且不是索引中存在的字段：termfreq(City,'Atlanta')

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T16:56:32.867

除非您使用的是 4.0，否则您在 3.6 中没有这些功能...请参阅[此处](http://www.mail-archive.com/solr-user@lucene.apache.org/msg52368.html)

# php - PHP上传代码问题

> ID：11264301
> 
> 赞同：1
> 
> 时间：2012-06-29T15:09:16.530
> 
> 标签：php

我不断收到无效文件错误。谁能看看这个脚本有什么问题。我从 w3 学校得到它，并且文件夹“pics/2012/Blackhall Primary/”确实存在

```
<?php

    if ((($_FILES["file"]["type"] == "image/gif")
    || ($_FILES["file"]["type"] == "image/jpeg")
    || ($_FILES["file"]["type"] == "image/png")
    || ($_FILES["file"]["type"] == "image/jpg")
    || ($_FILES["file"]["type"] == "image/pjpeg"))
    && ($_FILES["file"]["size"] < 20000))
      {
      if ($_FILES["file"]["error"] > 0)
        {
        echo "Return Code: " . $_FILES["file"]["error"] . "<br />";
        }
      else
        {
        echo "Upload: " . $_FILES["file"]["name"] . "<br />";
        echo "Type: " . $_FILES["file"]["type"] . "<br />";
        echo "Size: " . ($_FILES["file"]["size"] / 1024) . " Kb<br />";
        echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br />";

        if (file_exists("pics/2012/Blackhall Primary/" . $_FILES["file"]["name"]))
          {
          echo $_FILES["file"]["name"] . " already exists. ";
          }
        else
          {
          move_uploaded_file($_FILES["file"]["tmp_name"],
          "pics/2012/Blackhall Primary/" . $_FILES["file"]["name"]);
          echo "Stored in: " . "pics/2012/Blackhall Primary/" . $_FILES["file"]["name"];
          }
        }
      }
    else
      {
      echo "Invalid file";
      }
    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T15:59:17.037

包括更多这样的错误检查：

```
<?php

echo process_files();

function process_files()
{
    $allowed_file_types=array('image/gif','image/jpeg','image/png','image/jpg','image/pjpeg');

    if(0==sizeof($_FILES)) return 'no files uploaded';

    if(!stristr($_FILES['file']['type'], 'image')) return 'file is not an image';

    if(!in_array($_FILES['file']['type'], $allowed_file_types)) return 'image type '.$_FILES['file']['type'].' is not allowed';

    if($_FILES['file']['size'] < 20000) return 'file size too large. Max:20000, File:'.$_FILES['file']['size'];

    // rest of your code here!
}

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T17:13:56.393

检查你的图片的扩展名，可能是大写的

# python - 向 MultiIndex 添加级别，删除而不丢失

> ID：11264307
> 
> 赞同：10
> 
> 时间：2012-06-29T15:09:28.940
> 
> 标签：python, pandas

假设我有一个`DataFrame`带有 MultiIndex 的 df 并且它的级别为 L。

有没有办法从索引中删除 L 并再次添加它？

`df = df.index.drop('L')`从 DataFrame 中完全删除 L （与`df= df.reset_index()`具有 drop 参数不同）。我当然可以`df = df.reset_index().set_index(everything_but_L, inplace=True)`。

现在，让我们假设索引包含除 L 之外的所有内容，并且我想添加 L。 `df.index.insert(0, df.L)`不起作用。同样，我当然可以打电话`df= df.reset_index().set_index(everything_including_L, inplace=True)`，但感觉不对。

为什么我需要这个？由于索引不必是唯一的，因此我可能想添加一个新列，以便索引变得唯一。在拆分数据后一级索引不再包含任何信息的情况下，删除可能很有用（比如我的索引是 A，B 并且我在 A=x 的 df 上进行操作，但我不想丢失会发生的 A使用 index.droplevel('A'))。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-17T08:34:29.440

在当前版本 (0.17.1) 中，可以

```
df.set_index(column_to_add, append=True, inplace=True) 
```

和

```
df.reset_index(level=column_to_remove_from_index). 
```

与重置 n 列然后将 n+1 添加到索引相比，这带来了显着的加速。

# amazon-web-services - 如何使用 Amazon 的 RDS 记录连接？

> ID：11264309
> 
> 赞同：2
> 
> 时间：2012-06-29T15:09:34.943
> 
> 标签：amazon-web-services, amazon-rds

我需要做什么才能记录到 Amazon RDS 实例的所有连接？

现在我正在使用 MySQL Workbench，可以使用它轻松查看所有当前连接。但我真的很想记录这些数据。

我知道如果我有自己的服务器运行 MySQL，我可以编辑 my.ini 中的日志设置，但在 RDS 中我无权访问它，并且确实有任何方法可以 ssh 进入实例......

这可能吗？如果是这样，我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T15:16:10.990

您可以更改 my.ini 的一些参数。请参阅以下资源：
[如何修改 Amazon RDS 实例的 my.ini 参数](https://stackoverflow.com/questions/8725491/how-to-modify-my-ini-parameters-of-an-amazon-rds-instance)
[http://aws.amazon.com/articles/2935](http://aws.amazon.com/articles/2935)

# c# - 更改 CSS 样式表并将所选样式表保存到数据库

> ID：11264312
> 
> 赞同：0
> 
> 时间：2012-06-29T15:09:54.627
> 
> 标签：c#, sql, css, database, stylesheet

我有两个 CSS 样式表`blue.css`，一个叫做`red.css`. 两者都包含更改按钮背景的代码，`blue.css`使按钮变为蓝色并使按钮变为`red.css`红色。

我有一个下拉列表，其中包含红色和蓝色，并且按钮的背景更改为所选选项。但是当网站被重新访问时，按钮会返回默认的灰色。我知道我必须创建一个`SQL`数据库并以某种方式将所选值保存到数据库中，因此下次运行该站点时，例如：显示默认颜色灰色，我在下拉列表中选择红色，然后关闭网页并然后重新打开它，按钮的背景仍然是红色的。

我知道如何创建 tablea 并在其中编辑它们，`SQL`但不知道如何让它与我的代码一起使用。我正在编码`c#`。如果有人可以提供帮助，将不胜感激:)

编辑* 我不允许为此使用 cookie

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T16:19:11.570

不，您实际上并不需要数据库，因为您可以将信息（`blue.css`或`red.css`）存储在 cookie 中。如果数据存储在数据库中，cookie 甚至是必要的，因为您需要识别用户。然后根据每个请求，您可以检查该 cookie（通过 C# 的服务器端或通过 JavaScript 的客户端）并插入相应的样式表。

# objective-c - ios 4.x 和 5.0 之间的自动调整大小不同

> ID：11264315
> 
> 赞同：0
> 
> 时间：2012-06-29T15:10:03.997
> 
> 标签：objective-c, ios, xcode

几天来一直试图弄清楚为什么会发生这种情况。

我的应用程序应该在处理导航的所有屏幕之间具有共享视图。所以我为导航做了一个笔尖，上面有几个按钮，然后将该视图添加到窗口（我被告知这是一个糟糕的选择）

这个全局视图存储了 4 个导航控制器，因此用户可以在它们之间切换而不会丢失它们的位置（很像标签栏的工作方式）。但似乎将视图添加到窗口影响了我的应用程序为通话状态栏调整大小的方式。在 5.0 中，整个应用程序完美运行，但在 4.0 中完全错误。

在 4.0 上，如果我在屏幕上启用通话栏，它根本不会移动。

如果我使用通话栏推送视图控制器，导航栏会出现在顶部，但视图显示的比应有的低 20 像素

如果我启用了通话栏，按下屏幕，然后返回，导航栏向下移动 20 像素（应该如此），但视图保持在原位并被导航栏剪裁。

iOS 5 上发生了什么，而 iOS 4.x 上没有发生这些变化？该应用程序在 4.3 上都是错误的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T15:51:40.693

创建一个“虚拟”视图控制器（UINavigationController 效果很好）。然后将您的观点添加到其中。不使用视图控制器层次结构事件将无法正确传播。

我怀疑这适用于 iOS 5，因为新的“容器”视图控制器系统。他们已经使系统在这些领域更加宽松。如果没有看到您的整个应用导航设计，我无法给出更具体的答案。

编辑：也尝试使用 WantsFullScreenLayout 属性。它可能会有所帮助。

# winforms - VBA 表单可以有流布局吗？

> ID：11264316
> 
> 赞同：2
> 
> 时间：2012-06-29T15:10:07.940
> 
> 标签：winforms, ms-access, vba, layout

我猜这是不可能的，但是就这样吧。

Java 和最近的 .Net 更新能够实现流布局——布局管理器重新排列表单控件以适应可用空间。

我只见过使用硬编码绝对位置的 VBA 和 WinForms。

有没有人在这种情况下遇到过流布局管理器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T22:00:05.150

我有一个这样布置的表格。我的所有控件都根据它们的垂直位置依次命名：txt_R1、txt_R2、txt_R3 等...

![表单设计](../Images/10f9c780fb51487d32831cce53943d03.png)

当表单加载时，它看起来像这样：

![已加载表单](../Images/00bb74d93be0b79b02bdd989fc373168.png)

当我更新组合框时，将执行以下代码：

```
Dim s_tier As String
Dim s_rate As String
Dim s_lbl_Rate As String
Dim s_lbl_Tier As String
Dim s_obj As String

Me.TXT_Min.Visible = True
Me.LBL_MIN.Visible = True
Me.TXT_Min.Value = 0

Me.TXT_Scale.Visible = True
Me.lbl_Scale.Visible = True
Me.TXT_Scale.Value = 0

Me.txt_MinMax.Visible = True
Me.lbl_MinMax.Visible = True
Me.txt_MinMax.Value = 0

s_tier = "TXT_T"
s_rate = "TXT_R"
s_lbl_Rate = "LBL_R"
s_lbl_Tier = "LBL_T"

For i = 1 To numActive

    'Tier Text Box
    s_obj = s_tier & i

    Me(s_obj).Visible = True
    Me(s_obj).Value = "NULL"

    'Tier Label
    s_obj = s_lbl_Tier & i

    Me(s_obj).Visible = True

    'Rate Text Box
    s_obj = s_rate & i

    Me(s_obj).Visible = True
    Me(s_obj).Value = "NULL"

    'Rate Label
    s_obj = s_lbl_Rate & i

    Me(s_obj).Visible = True

Next i

'set last tier to infinite, since last tier typically goes on forever
s_obj = s_tier & numActive

Me(s_obj).Value = ChrW(&H221E)
Me(s_obj).FontSize = 16

'Make Test button visible and move to appropriate place

s_obj = s_lbl_Tier & (numActive + 1)

Me.Btn_Test.Top = Me(s_obj).Top
Me.Btn_Test.Left = Me(s_obj).Left
Me.Btn_Test.Visible = True

s_obj = s_tier & (numActive + 1)
'Make Test button visible and move to appropriate place

Me.btn_SQL.Top = Me(s_obj).Top
Me.btn_SQL.Left = Me(s_obj).Left
Me.btn_SQL.Visible = True
Me.Refresh 
```

如果在组合框中选择了“1”，则刷新后的表单现在如下所示： ![选择一个选项](../Images/9bc2f29933d7b0e6a95edaec6ac168c5.png)

...或者如果在组合框中选择了“2”： ![选择一个选项](../Images/54d1fbb1604938c7327c1e70cb49c101.png)

...或者如果在组合框中选择了“3”： ![选择一个选项](../Images/f13097170b10cd934d58d6f25bae9bd4.png)

我的方法的关键是使用顺序命名约定来利用

```
for i = 1 to numactive 
```

一段代码。循环结束后，所有静态控件都可见。我可以将 numactive 变量添加 1 以确定第一个不可见控件的位置，并将我的“浮动”控件锚定到该位置。

可以调整此方法以使用偏移量而不是其他控件的位置实际将任何控件放置到任何位置。让想象力自由驰骋！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T15:20:46.430

Access 2007 及更高版本通过锚定实现此功能：[使控件在调整窗体大小时拉伸、缩小或移动](http://office.microsoft.com/en-us/access-help/make-controls-stretch-shrink-or-move-as-you-resize-a-form-HA010253986.aspx)

如果您想在早期版本中执行此操作，您可以使用表单的 On Resize 事件自行滚动。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T15:19:10.367

WinForms 当然有[FlowLayoutPanel](http://msdn.microsoft.com/en-us/library/system.windows.forms.flowlayoutpanel.aspx)和[TableLayoutPanel](http://msdn.microsoft.com/en-us/library/system.windows.forms.tablelayoutpanel.aspx) ..

MSDN 上有一个[AutoLayout for Winforms 的示例](http://blogs.msdn.com/b/permanenttan/archive/2006/03/07/545445.aspx)。

# objective-c - GMGridView 出现在屏幕外，但与屏幕视图重叠

> ID：11264321
> 
> 赞同：2
> 
> 时间：2012-06-29T15:10:23.590
> 
> 标签：objective-c, ios, gmgridview

我正在使用自定义控制器进行转换（由于项目中的固有循环，无法使用导航控制器，这将允许导航控制器堆栈无限增长[我认为这会导致内存问题]）​​。我正在使用 UIView animateWithDuration:animations:completion 模拟导航控制器的滑动动画（过渡到新屏幕时）：

当按下触发转换的按钮时，我要转换到的新视图的框架设置为屏幕外位置。在过渡动画（UIView animateWithDuration:animations:completion:) 中，当前屏幕上的视图将其框架设置为屏幕外位置，而新视图设置为屏幕上位置。

这是在我的自定义控制器中进行转换：

```
CGFloat windowWidth = self.mainView.frame.size.width;
CGFloat windowHeight = self.mainView.frame.size.height;
CGRect offScreenLeft = CGRectMake(-1*windowWidth, 0.0, windowWidth, windowHeight);
CGRect onScreen = self.mainView.frame;
CGRect offScreenRight =  CGRectMake(windowWidth, 0.0, windowWidth, windowHeight);

if (direction == TransitionDirectionForward)
{
    if (dragBackgroundOnscreen){
        [self.mainView addSubview:self.backgroundView];
        [self.mainView sendSubviewToBack:self.backgroundView];
        self.backgroundView.frame = offScreenRight;
    } 

    self.currentViewController.view.frame = offScreenRight;

    [UIView animateWithDuration:0.65
                     animations:^{
                         oldViewController.view.frame = offScreenLeft;
                         if (dragBackgroundOffscreen)
                             self.backgroundView.frame = offScreenLeft;
                         else if (dragBackgroundOnscreen)
                             self.backgroundView.frame = onScreen;

                         self.currentViewController.view.frame = onScreen;
                     }
                     completion:^(BOOL finished){
                         [oldViewController.view removeFromSuperview];  
                         if (dragBackgroundOffscreen)
                             [self.backgroundView removeFromSuperview];
                         [oldViewController willMoveToParentViewController:nil];
                         [oldViewController removeFromParentViewController];
                         [self.currentViewController didMoveToParentViewController:self]; 
                     }];

}
else if (direction == TransitionDirectionBackward)
{
    if (dragBackgroundOnscreen){
        [self.mainView addSubview:self.backgroundView];
        [self.mainView sendSubviewToBack:self.backgroundView];
        self.backgroundView.frame = offScreenLeft;
    } 
    self.currentViewController.view.frame = offScreenLeft;
    [UIView animateWithDuration:0.65 
                     animations:^{
                         oldViewController.view.frame = offScreenRight;

                         if (dragBackgroundOffscreen)
                             self.backgroundView.frame = offScreenRight;
                         else if (dragBackgroundOnscreen)
                             self.backgroundView.frame = onScreen;

                         self.currentViewController.view.frame = onScreen;
                     }
                     completion:^(BOOL finished){
                         [oldViewController.view removeFromSuperview]; 
                         if (dragBackgroundOffscreen)
                             [self.backgroundView removeFromSuperview];
                         [oldViewController willMoveToParentViewController:nil];
                         [oldViewController removeFromParentViewController];
                         [self.currentViewController didMoveToParentViewController:self];
                     }];

} 
```

我还希望背景（self.backgroundView）保持静态，除非移动到具有自己背景的屏幕（即，如果新视图背景是相同的背景，我不希望背景滑动）。

我使用 TransitionDirectionBackward 和 TransitionDirectionForward 只是为了区分向左滑动和向右滑动。

一切都很好，除非转换涉及 GMGridView。当 Gridviews 框架设置为离屏框架时的问题，它实际上将其当前选定页面的框架设置为该离屏框架。gridview 的其他页面不受此框架的限制，因此它们甚至可以在转换之前出现在屏幕上。我尝试在 GridView 的 viewcontroller 视图上设置 frame 和 bounds 属性，但我仍然可以在过渡动画之前获得出现在屏幕上的 gridview 页面。

有人看到解决方案吗？我试图找到一种方法来在过渡期间剪辑 GridView 的视图，这样除了当前选择的页面之外，页面不会出现，但没有发现任何有用的东西。

更新：我通过为可见但不应该的单元格设置 alpha = 0.0 找到了一个可能的修复方法（稍后在过渡动画完成时设置 alpha = 1.0）。但是，我需要知道要为哪些单元格执行此操作。我需要一种方法来访问 GMGridView 当前所在的页面，以便我可以将相邻页面的单元格设置为具有 0.0 的 alpha。

更新：找到了一种通过使用 myGridView convertPoint 使其工作的方法：（我通过反复试验发现位于页面的第一个单元格上的 cgpoint。）fromView：myGridView.window。注意：我需要一个 if/else if 来检查我是在横向左侧还是横向右侧，因为当设备旋转时窗口坐标不会旋转。有了这个，我能够在我指定的屏幕上的点处获取单元格的索引，然后将上一页设置为透明，直到过渡动画之后。

我仍然想知道是否有一种“剪裁”网格视图的方法，以便单元格可以是不透明的，但从不显示......？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T19:32:41.487

我想我把问题复杂化了。我正在寻找 `clipsToBounds` UIView 的方法（尽管我可以发誓我之前尝试过）。无论如何，它现在正在工作！

# javascript - 触发多层元素的悬停行为

> ID：11264323
> 
> 赞同：1
> 
> 时间：2012-06-29T15:10:28.927
> 
> 标签：javascript, jquery, html, css

我有一个页面，上面有一个图像网格。这些图像的不透明度最初设置为零（即，它们是隐藏的）。当鼠标移到图像上时，它的不透明度立即设置为 1，当鼠标移开时，它的不透明度迅速变回零。相关代码如下所示：

HTML

```
<img class="Image" src="./img/foo.png"> 
```

CSS

```
.Image {
    opacity: 0;
} 
```

JS

```
$(".CircleImage").hover(
    function() {
        $(this).fadeTo(0,1);  // mouseenter
    },
    function() {
        $(this).fadeTo(200,0);  // mouseleave
    }
); 
```

现在：我想添加一些将显示*在*此图像网格上方的链接。这里有一个问题：我希望图像保持它们的悬停行为。真正棘手的一点是每个链接的文本将跨越多个图像，并且链接文本和图像的大小会随着窗口大小而动态改变。

例如，假设我有一个链接，其文本是“点击我”，并且在一个特定的窗口大小下，“点击”的“cli”在一个图像上，而“我”在另一个图像上。我希望页面的行为方式是，当鼠标悬停在“cli”上时，会出现下面的图像，当鼠标悬停在“我”上时，会出现该文本下方的图像，并且始终可以单击链接.

**那就是：我希望悬停行为不仅针对最上面的元素触发，而且还针对其下方的元素触发。**

有人对我如何做到这一点有任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T15:17:02.927

您可以将图像和链接包装在容器中并更改该容器的不透明度。

```
<span class="imgContainer">
    <a href="#">X</a>
    <img class="Image" src="./img/foo.png" width="100" height="100">
</span>

.imgContainer {
    opacity: 0.1;
    width: 100px;
    height: 100px;
}

.imgContainer a {
    position: absolute;
} 
```

[**演示**](http://jsfiddle.net/E58uH/)

# jquery - jQuery UI 1.8 和 addClass / removeClass 动画在超时时不起作用

> ID：11264327
> 
> 赞同：1
> 
> 时间：2012-06-29T15:10:33.213
> 
> 标签：jquery, jquery-ui, animation

我有一个页面，我基本上希望一个元素“闪烁”一段时间，然后返回其初始状态。使用 jquery UI，您可以为 addClass() 和 removeClass() 方法设置动画：

```
 $this.addClass('success', 400); 
```

进而

```
 setTimeout(function(){                 

     $this.removeClass('success', 400);

 }, 1000); 
```

“成功”类有一个

```
background-color: green 
```

第一个作品。但是 setTimeout 中的 removeClass() 只是删除了类而不做任何动画。这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T15:23:42.967

也许您会使用像[.delay()](http://api.jquery.com/delay/)这样有用的方法？

```
$('button#test_add').click(function() {
    $('#content').addClass('success', 400);
});

$('button#test_remove').click(function() {
    $('#content').delay(1000).removeClass('success', 400);
}); 
```

这是一个可以玩的[JSFiddle 。](http://jsfiddle.net/vT3KH/)

# serial-port - 是否有一种构建协议的好方法，以便在每种情况下都可以检测到数据损坏？

> ID：11264329
> 
> 赞同：1
> 
> 时间：2012-06-29T15:10:38.760
> 
> 标签：serial-port, protocols, crc, data-integrity

背景：我花了一段时间使用各种设备接口，并且看到了很多协议，很多串行和 UDP，其中数据完整性是在应用程序协议级别处理的。我一直在寻求改进我对协议的接收常规处理，并考虑协议的“理想”设计。

我的问题是：是否有任何协议框架方案可以在所有情况下明确识别损坏的数据？例如，考虑许多协议的标准成帧方案：

```
Field: Length in bytes
<SOH>: 1
<other framing information>: arbitrary, but fixed for a given protocol
<length>: 1 or 2
<data payload etc.>: based on length field (above)
<checksum/CRC>: 1 or 2
<ETX>: 1 
```

对于绝大多数情况，这可以正常工作。当您收到一些数据时，您搜索 SOH（或任何您的起始字节序列），将固定数量的字节移动到您的长度字段，然后将该数量的字节（加上或减去一些固定的偏移量）移动到将数据包的末尾发送到您的 CRC，如果检查出来，您就知道您有一个有效的数据包。如果您的输入缓冲区中没有足够的字节来查找 SOH 或根据长度字段获得 CRC，那么您将等到收到足够的字节来检查 CRC。忽略 CRC 冲突（我们对此无能为力），这可以保证您的数据包格式正确且未损坏。

但是，如果长度字段本身已损坏并且具有很高的值（我遇到了），那么您无法检查（损坏的）数据包的 CRC，直到您用足够的字节填充输入缓冲区以满足损坏的长度场的要求。

那么有没有一种确定的方法来解决这个问题，无论是在接收处理程序中还是在协议设计本身中？我可以设置最大数据包长度或超时来刷新接收处理程序中的接收缓冲区，这应该在实际层面上解决问题，但我仍然想知道是否有适用于一般情况的“纯”理论解决方案并且不需要设置特定于实现的最大长度或超时。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T15:57:17.673

我所知道的所有协议，包括那些处理“流”数据的协议，都将数据流分割成较小的传输单元，每个传输单元都有自己的检查，这正是为了避免您描述的问题。您的协议设计中的根本缺陷可能是块太大。

这个 SO question的[公认答案](https://stackoverflow.com/questions/3800788/what-is-the-hamming-distance-and-how-do-i-determine-it-for-a-crc-scheme)包含一个很好的解释和一个关于这个主题的非常有趣（但数学相当重）的论文的链接。

所以简而言之，您应该坚持使用较小的传输单元，不仅因为与实际编程相关的参数，而且因为消息长度在确定您的 crc 提供的安全性方面的作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T20:09:08.437

一种方法是对长度参数进行编码，以便很容易检测到它已损坏，并避免读取大缓冲区以检查 CRC。

例如，XModem 协议嵌入了一个 8 位的数据包编号，后跟它的补码。

这可能意味着将您的长度块大小加倍，但这是一种选择。

# entity-framework - 实体框架外键id字段处理

> ID：11264336
> 
> 赞同：1
> 
> 时间：2012-06-29T15:11:04.237
> 
> 标签：entity-framework, entity-framework-4.3

我正在使用 EF 4.3.1 和从 EF DbContext Generator 生成的 POCO。

例如，如果我有两个对象的以下关系：

```
class ClassA
{
  int Id
  ...
}

class ClassB
{
  int Id
  int ClassAId
  ClassA ClassA
  ...
} 
```

确保 ClassB 的 ClassAId 和 ClassA 属性同步的最佳方法是什么？如果 POCO 未附加到 DbContext，这也应该有效。

我正在考虑将两个属性设置器设为私有并自己实现一个设置器，但也许有一个更好的解决方案，它不需要手动修改/添加生成的 POCO 类？

# ms-access - Access 2003 文本导入向导错误

> ID：11264337
> 
> 赞同：1
> 
> 时间：2012-06-29T15:11:13.927
> 
> 标签：ms-access, ms-access-2003

在 Access 2003 中，我尝试使用导入向导导入逗号分隔的文本文件。当我进入字段选项窗口时，“字段名称：”控件显示 Field1 和 Field1 在窗口底部突出显示。当我在窗口底部突出显示 Field2 时，“字段名称：”控件仍然显示 Field1。它不会更改为 Field2。无论我在底部突出显示哪个字段，“字段名称：”控件仍然显示并停留在 Field1 上。这发生在某些电脑上，但不是其他电脑。

任何想法为什么？

# html - CSS 中 100% 的中间 div？

> ID：11264339
> 
> 赞同：2
> 
> 时间：2012-06-29T15:11:24.737
> 
> 标签：html, height, stretch, css

> **可能重复：**
> [CSS - 百分比高度](https://stackoverflow.com/questions/5657964/css-percentage-height)

我无法让 3 个 div 的中间 div 适合 100% 的可用空间。

```
<body>
<div id="container">
    <div id="header">
    </div>
    <div id="content">
    </div>
    <div id="footer">
    </div>
</div>
</body> 
```

我的 CSS 是：

```
html, body {
    margin: 0;
    padding: 0;
    border:1px;
    vertical-align:top;
    font-family:"Trebuchet MS", Arial, Helvetica, sans-serif;
    font-size:14px;
    color:#333;
    height: 100%;
}
#container {
    height: 100%;
    width: 100%;
}
#header {
    height: 100px;
    width: 100%;
    background: #069;
}
#content {
    height: 100%;
    width: 100%;
    background: #F60;
}
#footer {
    height: 75px;
    width: 100%;
    background: #060;
} 
```

中心 div 实际上是 100%，但它不适合可用空间。

**它正在做这样的事情：如果屏幕是 500px**

```
30px
100% (500px)
30px 
```

**我需要的是：**

```
30px
100% (460px)
30px 
```

这可能不使用javascript吗？

非常感谢

**编辑：
对不起，我的意思是高度我有 3 个元素，页眉、中间和页脚。页眉和页脚具有固定高度，但我希望中间适合所有可用空间**

根据其他stackoverflow问题找到了另一个解决方案：

```
* { margin: 0; padding: 0 }
html, body {
    margin: 0;
    padding: 0;
    vertical-align:top;
    font-family:"Trebuchet MS", Arial, Helvetica, sans-serif;
    font-size:14px;
    color:#333;
    height: 100%;
    border: 0;
}
#header
{
    height: 100px;
    background:#C60;
}

#container
{
    min-height: 100%; 
    height: auto !important; /*Cause footer to stick to bottom in IE 6*/
    height: 100%; 
    margin: 0 auto -100px; /*Allow for footer height*/
    vertical-align:bottom;
    background:#096;
}

#footer
{
    height: 100px; /*Push must be same height as Footer */
    background:#C60;
} 
```

HTML

```
<body>
<div id="container">
<div id="header"> </div>
<div id="content"> </div>
</div>
<div id="footer"> </div>
</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T15:21:50.373

试试这样的[jsfiddle](http://jsfiddle.net/rv4XS/)。

html

```
<body>
    <div id="wrap">
<div id="container">
    <div id="header">header
    </div>
    <div id="content">qweW
    </div>
</div>
</div>
    <div id="footer">footer
    </div>
</body> 
```

css

```
* { margin: 0; padding: 0 }
html, body {
    margin: 0;
    padding: 0;
    border:1px;
    vertical-align:top;
    font-family:"Trebuchet MS", Arial, Helvetica, sans-serif;
    font-size:14px;
    color:#333;
    height: 100%;
    background: #F60;
}
#container {
    width: 100%;
    padding-bottom: 75px;
}
#wrap {min-height: 100%;}
#header {
    height: 100px;
    width: 100%;
    background: #069;
}
#content {
    height: 100%;
    width: 100%;
}
#footer {
    position: relative;
    margin-top: -75px;
    clear:both;
    height: 75px;
    width: 100%;
    background: green;
} 
```

我调整了您的 HTML 以在“容器”div 周围添加“包装器”，并将“页脚”移出两者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T15:15:49.803

您可以绝对定位 div：

```
<body>    
    <div id="header">
    </div>
    <div id="content">
    </div>
    <div id="footer">
    </div>
</body> 
```

和

```
#header {
    position:absolute;
    top:0px;
    left:0px;
    right:0px;
    height: 100px;
    background: #069;
}
#content {
    position:absolute;
    top: 100px;
    bottom: 75px;
    left:0px;
    right:0px;
    background: #F60;
}
#footer {
    position:absolute;
    bottom: 0px;
    height: 75px;
    left:0px;
    right:0px;
    width: 100%;
    background: #060;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T15:32:28.050

我认为一个好主意是摆弄['display：flexbox'](http://benfrain.com/understanding-the-css3-flexbox-flexible-box-layout-module/)来实现那种响应能力。这是一篇关于它的好文章。

# ruby-on-rails-3 - 简单形式：非对象相关属性。如何？

> ID：11264342
> 
> 赞同：1
> 
> 时间：2012-06-29T15:11:28.470
> 
> 标签：ruby-on-rails-3, simple-form

我有一个简单的表格，如下所示：

```
 <%= simple_form_for @study,:url => studies_path, :html => { :class => 'form-horizontal' } do |f| %>
    <%= f.input :category, :collection => @categories, :label => "Category", :selected => @categories.first %>
  <%= f.button :submit, t('add_form'),:class => 'btn-primary' %> 
```

我想以这种形式添加一个新字段，它只是视觉上的糖。它将是动态更改 :category 字段的助手。

我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T15:13:37.460

使用`text_field_tag`或任何其他`_tag`助手生成表单元素，而不将其附加到模型的任何特定属性：

```
<%= simple_form_for @study,:url => studies_path, :html => { :class => 'form-horizontal' } do |f| %>
  <%= f.input :category, :collection => @categories, :label => "Category", :selected => @categories.first %>
  <%= text_field_tag :blah %>
  <%= f.button :submit, t('add_form'),:class => 'btn-primary' %>
<% end %> 
```

# c# - 具有 2 个类型参数的显式泛型方法实现——仅显式命名 1 个类型参数

> ID：11264345
> 
> 赞同：2
> 
> 时间：2012-06-29T15:11:31.257
> 
> 标签：c#, .net

我有一个接口，它有一个带有两个类型参数的泛型方法。我想在一个类中部分显式地实现该泛型方法。这可能吗？下面的一些示例代码：

```
public interface ISomeInterface
{
    TResultType Results<TResultsType,TSearchCriteriaType>(TSearchCriteriaType searchCriteria);
}

public class SomeConcrete : ISomeInterface
{
    public TResultsType Results<TResultsType, ConcreteSearchCriteria>(ConcreteSearchCriteria searchCriteria)
{
    return (TResultsType)Results;
}
} 
```

我是否必须显式地实现这两个类型参数才能使其工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T15:17:31.117

我想这就是你要找的：

```
public class SomeConcrete : ISomeInterface
{
    TResultsType ISomeInterface.Results<TResultsType, TSearchCriteriaType>(TSearchCriteriaType searchCriteria)
    {
        return Results<TResultsType>((ConcreteSearchCriteria)(object)searchCriteria);
    }
    public TResultsType Results<TResultsType>(ConcreteSearchCriteria searchCriteria)
    {
        // return something
    }
} 
```

请注意，这将在运行时失败，尽管编译器看不到任何问题：

```
ISomeInterface someInterface = new SomeConcrete();
var result = someInterface.Results<object, SomeOtherSearchCriteria>(null); 
```

更一般地说，您不再像预期的那样实现接口。您可能想制作它`ISomeInterface<TResultsType, TSearchCriteriaType>`，然后制作`SomeConcrete<TResultsType> : ISomeInterface<TResultsType, ConcreteSearchCriteria>`。这样您就可以按预期实现接口，并强烈声明它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T15:22:10.100

> 我是否必须显式地实现这两个类型参数才能使其工作？

为了实现这个接口，你的类必须允许*任何*类型用于那个方法。（任何符合*interface*中定义的约束的类型，在这种情况下，由于没有约束，因此意味着任何类型。）

您不能将接口限制在实现它的特定类中，因为这是一个泛型方法（不是泛型类型），并且没有任何约束可以使其正常工作。

为了做你想做的事，我认为，你需要使接口通用：

```
public interface ISomeInterface<TSearchCriteriaType>
{
    TResultType Results<TResultsType>(TSearchCriteriaType searchCriteria);
} 
```

然后，您可以将其实现为：

```
public class SomeConcrete : ISomeInterface<ConcreteSearchCriteria>
{ 
    public TResultsType Results<TResultsType>(ConcreteSearchCriteria searchCriteria)
    {
         var results = GenerateResults();
         return (TResultsType)results;
    }
} 
```

通过使接口在搜索条件上通用，您允许您的类基于*搜索条件的特定类型*来实现它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T15:41:33.063

你不能专门化这样的通用方法。如果它在接口中是通用的，那么它在实现类中必须是通用的。如果您将类型参数移动到接口本身，那么您可以这样做（并且您还可以有方差注释，使其在结果类型中是协变的，在搜索条件类型中是逆变的）：

```
public interface ISomeInterface<out TResultsType, in TSearchCriteriaType> {
  TResultsType Results(TSearchCriteriaType searchCriteria);
}

public class SomeConcrete<TResultsType> : 
  ISomeInterface<TResultsType, ConcreteSearchCriteria> {
  public TResultsType Results(ConcreteSearchCriteria searchCriteria) {
    ...
  }
} 
```

现在您的类在结果类型上是通用的。

您还可以有一个专门用于某种结果类型的类，并且在标准类型中是通用的：

```
public class IntSearcher<TSearchCriteriaType> : 
  ISomeInterface<int, TSearchCriteriaType> {
  public int Results(TSearchCriteriaType searchCriteria) {
    ...
  }
} 
```

I think this is a more consistent design, since both generic parameters are at the same level (and it looks like they should go together). But only you can say whether this is better for your code or not.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T15:17:27.210

是的，我认为你这样做，否则你没有直接实现接口。

您的实现不像接口合同那样通用。

# python - 使 python raw_input() 或 input() 不等待

> ID：11264346
> 
> 赞同：4
> 
> 时间：2012-06-29T15:11:42.317
> 
> 标签：python, terminal

> **可能重复：**
> [raw_input 和 timeout](https://stackoverflow.com/questions/3471461/raw-input-and-timeout)

`raw_input()`将等待用户输入。等待几秒钟后如何让它去？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T15:32:25.687

一种可能的选择：

```
import select, sys
r, w, x = select.select([sys.stdin], [], [], 3) 
```

这将阻塞约 3 秒 - 任何存在的数据都将在`r`之后出现。

# powershell - 如何在不淹没 PowerShell 控制台的情况下显示命令的输出？

> ID：11264347
> 
> 赞同：0
> 
> 时间：2012-06-29T15:11:44.737
> 
> 标签：powershell

我正在从 .ps1 安装脚本运行静默 SQL 安装程序。SQL 安装程序设置为 /Quiet 和 /DisplayProgress。我最近将它发送到一个新的控制台窗口以显示输出但没有淹没控制台，但最近我已经在我远程通过的地方进行了切换`Enter-PSSession`，所以我看不到新窗口。

有没有一种方法可以让我一次`Write-Progress`显示 6 条滚动线？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T15:47:42.630

你可以尝试这样的事情：

```
function Write-SomeContent {
    [CmdletBinding()]
    param (
        [Object[]] $Content
    )

    Clear-Host;
    $pos = New-Object -TypeName System.Management.Automation.Host.Coordinates;
    $pos.X = 0;
    $pos.Y = 0;
    $Host.ui.RawUI.CursorPosition = $pos;

    foreach ($Object in $Content) {
        Write-Host -Object $Object;
    }
}

Write-SomeContent 'Message 1', 'Message 2', 'Message 3', 'Message 4', 'Message 5', 'Message 6'; 
```

只需继续调用 Write-SomeContent，它只会占用与传递给它的对象一样多的行。

# webforms - 30-40 表格、asp.net web 矩阵或 web 表格的 Legacy Access 应用程序？

> ID：11264351
> 
> 赞同：1
> 
> 时间：2012-06-29T15:11:53.523
> 
> 标签：webforms, webmatrix, asp.net-webpages

我的任务是尽快将遗留的 Access 应用程序转换为 .net 框架解决方案。我不确定要采用哪种方法。我更喜欢带有网络矩阵的 asp.net 网页，因为我在这种环境中很舒服，但不确定它是否是适合这项工作的正确方法/最佳工具。我知道 Web 表单非常适合此访问应用程序大量使用的基于网格的屏幕。

我将使用 SQL Server 作为后端。

以前有没有人将访问应用程序转移到 .net 框架解决方案？如果是这样，您推荐什么方法？ASP.net Webpages Web 矩阵或 Web 表单？还有什么？

感谢：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T15:42:13.963

如果您对网页更满意，请使用它。我最近一直在玩 Web Pages 和 Knockoutjs。这可能是一个很好的组合： http: [//www.mikesdotnetting.com/Article/190/Using-Knockout-With-Razor-Web-Pages-In-WebMatrix-2](http://www.mikesdotnetting.com/Article/190/Using-Knockout-With-Razor-Web-Pages-In-WebMatrix-2)

# php - AJAX 使用复选框过滤 MySQL 结果

> ID：11264354
> 
> 赞同：2
> 
> 时间：2012-06-29T15:11:57.557
> 
> 标签：php, mysql, ajax

我正在尝试根据用户复选框选择在 PHP 页面中显示可过滤的 MySQL 数据。我有一个域名数据库以及根据 Nominet DAC 信息需要更新这些域名的日期，我可以获得未过滤的数据来显示，但是通过域扩展过滤结果对我来说很难完成。在这个阶段我应该指出，对于我在这里尝试学习的许多想法，我是一个认真的新手，所以请保持温和。我也尝试过在这里关注其他一些文章，但没有骰子。

到目前为止，我有以下内容：

HTML

```
<input type="checkbox" class="extensions" name="extensions" value=".co.uk">.co.uk</input>
<input type="checkbox" class="extensions" name="extensions" value=".org.uk">.org.uk</input> 
```

脚本

```
$('.extensions').live('click', function() {
var all_boxes = $('.extensions');
var all_boxes_values = [];
var i = 0;
for (var i; i < all_boxes.length; i++) {
    if (all_boxes[i].checked) {
        all_boxes_values.push(all_boxes[i].value)
    }
}   
var all_boxes_values_clean = all_boxes_values.join(", ");
console.log(all_boxes_values_clean);
$.get("sql-test.php", {q: all_boxes_values_clean},
function(result) {
$("div#output").html(result);
}   
    )}); 
```

PHP

```
$g = $_GET['q'];
$extensionsql="";
$extension=1;
if(isset($g))   {
$extension=1;
$param = "" . str_replace(",", "','", $_GET['q']) . "";
} 
```

这就是我以我有限的能力所能得到的。接下来我想做的是在 domainName 列中搜索字符串匹配并将适当的结果返回给用户。模仿以下内容的东西，但我不确定如何实现它。任何帮助将非常感激：

```
SELECT * FROM `refresh` WHERE `domainName` LIKE '%.co.uk%' AND renewalDate LIKE '%2012-06-30%' ORDER BY `domainName` ASC 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T15:31:03.820

将 name="extensions" 更改为 name="extensions[]" 因为这将创建一个元素数组，而不是用最后检查的值覆盖（如果您正常发布）

和

```
$g = explode(',', $_GET['q']);

$param='';
while(list($key,$value)=each($g))
{
    $param.="`domainName` LIKE '%".mysql_real_escape_string($value)."' OR ";
}
$param=substr($param,-3); // knock off last OR

$sql="SELECT * FROM `refresh` WHERE renewalDate LIKE '%2012-06-30%' AND (".$param.") ORDER BY `domainName` ASC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T15:49:32.843

更改复选框的名称 (extensions[]) 以在 POST 回 PHP 时将它们设为数组：

```
<input type="checkbox" class="extensions" name="extensions[]" value=".co.uk">.co.uk</input>
<input type="checkbox" class="extensions" name="extensions[]" value=".org.uk">.org.uk</input> 
```

可能应该清理一下你的javascript：

```
$('.extensions').live('click', function() {
var all_boxes = $('.extensions');
var checked_boxes = $('.extensions:checked');
var all_boxes_values = [];

checked_boxes.each(function(){
 var cb_value = $(this).val();
 all_boxes_values.push(cb_value);
});

var all_boxes_values_clean = all_boxes_values.join(", ");
console.log(all_boxes_values_clean);
$.get("sql-test.php", {q: all_boxes_values_clean},
      function(result) {
       $("div#output").html(result);
      })
}); 
```

# java - 非常大的 n 的线性递归

> ID：11264356
> 
> 赞同：1
> 
> 时间：2012-06-29T15:12:09.913
> 
> 标签：java, recurrence

我试图在 SPOJ (http://www.spoj.pl/problems/REC/) 上解决这个问题

`F(n) = a*F(n-1) + b`我们必须找到`F(n) Mod (m)` 哪里

```
0 <= a, b, n <=  10^100
       1 <= M <= 100000
F(0)=1 
```

我正在尝试使用 JAVA 中的 BigInteger 来解决它，但是如果我运行从 0 到 n 的循环，它将获得 TLE。我该如何解决这个问题？谁能给点提示？不要发布解决方案。我想提示如何有效地解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T15:27:51.767

请注意，残基 mod (m) 的模式应该在线性递归中具有重复模式，并且根据鸽巢原理，长度 <= m。您只需要计算前 m 个条目，然后找出其中哪些条目将适用于 F(n) 以获得 n 的实际值。

它还有助于解决更简单的问题。让我们选择非常小的值，比如 a=2、b=1、m=5、n=1000。

*   F(0) = 1
*   F(1) = 2*F(0) + 1 = 2*1 + 1 = 3 -> 3 模 5 = 3
*   F(2) = 2*F(1) + 1 = 2*3 + 1 = 7 -> 7 模 5 = 2
*   F(3) = 2*F(2) + 1 = 2*7 + 1 = 15 -> 15 Mod 5 = 0
*   F(4) = 2*F(3) + 1 = 2*15 + 1 = 31 -> 31 Mod 5 = 1
*   F(5) = 2*F(4) + 1 = 2*31 + 1 = 63 -> 63 Mod 5 = 3
*   等等

请注意，残基是 [1, 3, 2, 0, 1, 3, ...]，它将永远重复。那么从这个例子中，你将如何确定 F(1000) Mod 5 而不会一直循环到第 1000 个条目？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T20:59:01.783

首先，我会告诉你如何解决一个更简单的问题。假设 b 为零。然后你只需要计算一个^n mod M。而不是乘 n-1 次，使用分而治之的技术：

```
// Requires n >= 0 and M > 0.
int modularPower(int a, int n, int M) {
    if (n == 0)
        return 1;
    int result = modularPower(a, n / 2, M);
    result = (result * result) % M;
    if (n % 2 != 0)
        result = (result * a) % M;
    return result;
} 
```

因此，您可以根据 floor(n/2) 计算 a n ^，^(然后)将其平方，如果 n 为奇数，则再次乘以 a 。

要解决您的问题，首先定义函数 f(x) = (ax + b) (mod M)。您需要计算fn (1)，即对初始值¹应用 fn 次。因此您可以像上一个问题一样使用分治法。幸运的是，两个线性函数的组合也是线性的。您可以用三个整数（两个常数和模数）来表示一个线性函数。编写一个函数，它接受一个线性函数和一个指数，并返回多次组合的函数。

# algorithm - 算法来组合数据进行线性拟合？

> ID：11264358
> 
> 赞同：3
> 
> 时间：2012-06-29T15:12:14.710
> 
> 标签：algorithm, regression, correlation, genetic

我不确定这是否是问这个问题的最佳地点，但是你们过去对我的大量 CS 作业很有帮助，所以我想我会试一试。

我正在寻找一种算法来盲目地将几个因变量组合成一个索引，以产生与外部变量的最佳线性拟合。基本上，它将使用不同的数学运算符组合因变量，包括或不包括每个变量等，直到开发出与我的外部变量最相关的索引。

有没有人见过/听说过这样的事情？即使你能指出我正确的方向或正确的地方问，我会很感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T15:19:30.770

听起来您正在尝试进行多元线性回归或多元回归。最简单的方法（阅读：不太准确）是单独计算每个组件变量的线性回归线，然后对每条线进行加权平均。除此之外，恐怕我也帮不上什么忙了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T11:42:48.607

这似乎是使用多个解释变量的简单线性回归。*由于这里的含义是您正在使用一种计算方法，您可以使用您拥有的解释变量的每个可能组合*（是否要包括交互效果是您的选择）来做一些简单的事情，将线性模型应用于您的数据，选择拟合优度（R^2 只是一个例子）并使用它来对您拟合的每个模型的拟合度进行排名？模型的质量在许多领域也有些主观 - 如果一个包含 15 个变量的模型与仅包含 3 个变量的简单得多的模型相比，它仅适度提高了拟合度，则您可以拒绝该模型。如果您还没有阅读它，我相信您会在以下文本中找到许多有用的建议：

*Draper, NR 和 Smith, H. (1998). 概率和统计中的应用回归分析 Wiley 系列*

您也可以尝试使用 google 搜索模型选择的 LASSO 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T06:04:31.820

你要的东西本质上是整个[回归分析](http://en.wikipedia.org/wiki/Regression_analysis)。

这就是线性回归所做的，这是“机器学习”所做的很好的一部分（机器学习基本上只是更复杂的回归和分类算法的名称）。有成百上千种不同的折衷方法，但基本的方法通常效果很好。

如果您想了解更多信息，机器学习[课程](https://class.coursera.org/ml/auth/welcome?visiting=%2Fml%2Fclass%2Findex)是深入了解这一点的好地方。

# c++ - 为什么有两种 std::sort 实现（有和没有比较器），而不是有一个默认模板参数的实现？

> ID：11264361
> 
> 赞同：2
> 
> 时间：2012-06-29T15:12:18.337
> 
> 标签：c++, templates, stl, parameters, default

在我的代码中，我采用了类似于某些标准库算法的设计策略，因为可以通过函数对象自定义确切的行为。最简单的例子是 std::sort，其中函数对象可以控制对象之间的比较方式。

我注意到 Visual C++ 提供了 std::sort 的两种实现，这自然会涉及代码重复。我会想象它可能只有一个实现，并提供一个默认比较器（使用 operator< ）作为默认模板参数。

两个不同版本背后的原因是什么？我的建议会以某种方式使界面更复杂吗？或者当对象不提供 operator< 时会导致混乱的错误消息？或者它只是不起作用？

谢谢，

大卫

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-29T15:13:16.293

因为标准不允许函数模板具有默认类型参数。

[但是，这已在 C++11 中进行了修改](https://stackoverflow.com/a/2447556/726361)，现在函数模板可以具有默认类型参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T15:16:00.597

在 C++11 之前，函数模板不能有默认模板实参，并且模板实参不能从默认函数实参推导出来，因此无法实现。

在支持函数模板的默认模板参数的 C++11 中，您可以使用单个函数模板，但现在更改它会破坏与依赖于具有特定类型的函数的旧 C++ 代码的向后兼容性。

# php - 了解 Web 开发/CodeIgniter 中脚本的数据/生命周期的传递

> ID：11264365
> 
> 赞同：3
> 
> 时间：2012-06-29T15:12:50.600
> 
> 标签：php, codeigniter

我希望我对标题的措辞足够准确，但我通常使用 Java，并且在 Web 开发/PHP/CodeIgniter 方面没有太多经验。我很难理解脚本的生命周期，因为我发现尝试在我正在开发的网站上实现某个功能（作为一种学习方法）。我将首先描述我尝试实现的功能，然后我遇到的问题让我质疑我对脚本如何工作的基本理解，因为我习惯了典型的 OOP。

好的，这就去...

我有一个网页，用户可以执行两项基本任务，即创建和删除条目。我试图实现的是一种计算用户完成某项任务需要多长时间的方法。我这样做的方法是有一个主页，其中有一个用户可以选择的任务列表（在本例中为 2，创建和删除）。用户将单击将链接到“真实”主页的任务，然后期望用户在该主页上完成任务。我的脚本如下所示：

```
<?php

class Site extends CI_Controller {

var $task1;
var $tasks = array(
                        "task1" => NULL,
                        "date1" => 0,
                        "date2" => 0,
                        "diff" => 0);

function __construct()
{
    parent::__construct();
    include 'timetask.php';
    $this->task1 = new TimeTask("create");      
}   

function index() 
{   
    $this->tasks['task1'] = $this->task1->getTask();
    $this->tasks['diff'] = $this->task1->getTimeDiff();

    if($this->tasks['diff'] == NULL)
    {
            $this->tasks['diff'] = 0;
    }   

    $this->load->view('usability_test', $this->tasks);
}

function origIndex() 
{   
    $this->task1->setDate1(new DateTime());
    $this->tasks['date1'] = $this->task1->getDate1()->getTimestamp();
    $data = array();

    if($q = $this->site_model->get_records())
    {
        $data['records'] = $q;
    }

    $this->load->view('options_view', $data);
}

function create()
{
    $this->task1->setDate2(new DateTime());
    $this->tasks['date2'] = $this->task1->getDate2()->getTimestamp();

    $data = array(
            'author' => $this->input->post('author'),
            'title' => $this->input->post('title'),
            'contents' => $this->input->post('contents')
    );  

    $this->site_model->add_record($data);
    $this->index();

} 
```

我只包括 create 以保持简短。然后我还有 TimeTask 类，实际上另一个 StackOverflow 非常好心地帮助了我：

```
<?php

class TimeTask
{
private $task;

/**
 * @var DateTime
 */
private $date1, $date2;

function __construct($currTask) 
{
    $this->task = $currTask;
}

public function getTimeDiff() 
{
    $hasDiff = $this->date1 && $this->date2;
    if ($hasDiff) {
        return $this->date2->getTimestamp() - $this->date1->getTimestamp();
    } else {
        return NULL;
    }
}

public function __toString() 
{
    return (string) $this->getTimeDiff();
}

/**
 * @return \DateTime
 */
public function getDate1()
{
    return $this->date1;
}

/**
 * @param \DateTime $date1
 */
public function setDate1(DateTime $date1)
{
    $this->date1 = $date1;
}

/**
 * @return \DateTime
 */
public function getDate2()
{
    return $this->date2;
}

/**
 * @param \DateTime $date2
 */
public function setDate2(DateTime $date2)
{
    $this->date2 = $date2;
}

/**
 * @return get current task
 */
 public function getTask()
 {
        return $this->task;
 }

}

?> 
```

我不认为发布这些观点对于这个问题是必要的，但至少这里是链接的制作方式。

```
<?php echo form_open('site/create');?>
...and...
<?php echo anchor("site/delete/$row->id", $row->title); ?> 
```

现在代码中没有错误，但它没有达到我的预期，我认为原因是因为每次通过新页面调用脚本的函数时，它都不是调用的脚本的同一个实例以前，因此任何以前创建的对象都不再存在。这让我很困惑，让我很不确定如何优雅地实现它。我猜想如何做到这一点的一些方法是通过 URL 传递必要的数据，或者将数据保存在数据库中并稍后检索它以比较时间。推荐的方法是什么，不仅仅是这个，而是任何需要以前创建的数据的方法？另外，我认为脚本一次只对一个网页“活着”是否正确？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T15:22:07.097

您可以使用 flashdata 使数据可用于下一个服务器请求。

参考：[http ://codeigniter.com/user_guide/libraries/sessions.html](http://codeigniter.com/user_guide/libraries/sessions.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T16:22:43.787

Web 开发与“标准”开发有点不同——主要是因为 HTTP 的性质。对 Web 应用程序的每个请求都必须使用 HTTP 在网络上传输，正如所有 Web 开发人员所知，HTTP 是无状态的。这意味着 Web 服务器不必记住有关先前 HTTP 请求的任何信息。通常，webdevs 以一种或另一种方式使用 cookie 来解决这个问题 - 其中 cookie 是一些数据，编码为文本字符串，它被发送回浏览器，以便它可以在下一个请求时将其重新发送给应用程序。就像这样，cookie 是一种可转移的记忆。

因此，每次您发出请求时，除非您使用 cookie（HTTP cookie，或者有时称为 URL cookie - 编码在 URL 中的状态数据）传输一些数据，否则它看起来像一个全新的 Web 应用程序请求，与任何过去的请求无关。因此，为了让您的应用程序正常工作，您需要以某种方式使用 cookie 来记住或恢复检测到用户完成任务时的开始时间。您可以 (i) 使用 CI 的内置工具来记住数据（闪存数据，如上所述，或来自 CI Session 类的用户数据 - 请参阅[http://codeigniter.com/user_guide/libraries/sessions.html](http://codeigniter.com/user_guide/libraries/sessions.html))，它们建立在 CI cookie 之上），(ii) 使用您自己的 cookie 数据执行此操作（不推荐 - 为什么在这种情况下使用框架？），或 (iii) 使用隐藏的表单字段 - 一个老歌，但有时是老歌该技术需要 PHP 脚本生成一个视图来编写隐藏的表单字段，其值是您想要记住的数据，并在下一次请求时发回给您。

此类问题在 Web 开发中会一次又一次地遇到 - 所以要好好了解问题及其解决方案！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-29T17:53:18.563

您可以使用会话进行额外的步骤并实现数据库表来存储当前会话。这使您能够验证 id 并确认它是有效的会话，而不是通过修改的 cookie 意外恢复的旧会话。

这是非常直接的。

创建表：

```
CREATE TABLE IF NOT EXISTS  `ci_sessions` (
session_id varchar(40) DEFAULT '0' NOT NULL,
ip_address varchar(45) DEFAULT '0' NOT NULL,
user_agent varchar(120) NOT NULL,
last_activity int(10) unsigned DEFAULT 0 NOT NULL,
user_data text NOT NULL,
PRIMARY KEY (session_id),
KEY `last_activity_idx` (`last_activity`) 
```

);

修改配置文件（application/config/config.php）：

```
$config['sess_use_database'] = TRUE;
$config['sess_table_name'] = 'ci_sessions'; 
```

然后，使用标准方法设置和获取值。

这是指南：[CI 用户指南 - 会话类](http://codeigniter.com/user_guide/libraries/sessions.html)

# java - 这个递归函数有什么作用？

> ID：11264367
> 
> 赞同：1
> 
> 时间：2012-06-29T15:13:05.980
> 
> 标签：java, recursion

这个函数有什么作用？你如何评价它？

如何追踪它？如何理解递归方法？

我就是看不懂递归，考试的日子快到了，而且我知道要想理解递归，就必须先理解递归。

但我就是不能写一个稍微复杂的递归方法，谁能帮我用最简单的英文单词。

```
public class BalancedStrings {

    public static void printBalanced(String prefix, int a, int b) {
        if (a > 0)
            printBalanced(prefix + "a", a - 1, b);
        if (b > 0)
            printBalanced(prefix + "b", a, b - 1);
        if (a == 0 && b == 0)
            System.out.println(prefix);
    }

    public static void printBalanced(int n) {
        if (n % 2 == 0) {
            printBalanced("", n / 2, n / 2);
        }
    }

    public static void main(String[] args) {
        printBalanced(4);
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T15:16:27.650

调用`printBalanced()`是递归调用。识别递归的方法是函数调用自身。使用树绘制时最好理解递归：

![在此处输入图像描述](../Images/ccff2352fd61c6d139cc09c62c028eea.png)

树的分支将继续创建更多函数，直到满足**结束条件**，在本例中为`a == 0 && b == 0`. 您提供的函数看起来像是以递归方式打印字符串“前缀”与指定数量的“a”和“b”字符连接。当变量`a`和`b`到达`0`时，递归停止并使用打印结果`System.out.println(prefix);`

在主函数中，您将整数 4 传递给`printBalanced(int n)`调用`printBalanced(String prefix, int a, int b)`参数，如下所示：`printBalanced("",2,2);`

总体结果是前缀与平衡数量的 a 和 b 连接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T15:20:55.507

你的停止条件是

```
a == 0 & b == 0 
```

在满足此条件之前，您递归地调用函数并降低 a 和 b 直到它们都为 0。

尝试在 printBalanced() 中设置一些断点，以便了解它是如何工作的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T15:21:43.717

在最基本的计算机科学意义上，递归是一个调用自身的函数。递归的实际用法很少。

树遍历
图
Lexing/Parsing
排序

递归的基本思想是你把原始问题分成更小的（更容易解决的）实例，解决那些更小的实例（通常再次使用相同的算法），然后将它们重新组合成最终的解决方案。

例如，考虑以下计算一个数的阶乘的 C 代码

```
function factorial(int n)
{
  int fact = 1;
  for( int i = 2; i <= n; i++)
  {
    fact = fact * i;
  }
  return fact;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T15:30:22.593

通过在每次调用 printBalanced 之前放置 print 语句以及将 print 语句作为每个 printBalanced 方法定义的第一行，它可以帮助您查看递归。见下文：

```
public class BalancedStrings {

    public static void printBalanced(String prefix, int a, int b) {
        System.out.println( "printBalanced called prefix = " + prefix + " a = " + a + " b = " + b );
        if (a > 0) {
            System.out.println( "printBalanced calling printBalanced with prefix = " + prefix + " a-1 = " + (a-1) + " b = " + b );
            printBalanced(prefix + "a", a - 1, b);
        }
        if (b > 0) {
            System.out.println( "printBalanced calling printBalanced with prefix = " + prefix + " a = " + a + " b-1 = " + (b-1) );
            printBalanced(prefix + "b", a, b - 1);
        }
        if (a == 0 && b == 0)
            System.out.println(prefix);
    }

    public static void printBalanced(int n) {
        System.out.println( "printBalanced called n = " + n );
        if (n % 2 == 0) {
            printBalanced("", n / 2, n / 2);
        }
    }

    public static void main(String[] args) {
        printBalanced(4);
    }
} 
```

此外，printBalanced 也被称为重载方法，因为它有两个“方法签名”，这基本上意味着它被定义了不止一次，并且每个方法定义都有一组不同的变量传递给方法。

基本上，printBalanced 会一直调用自己，直到变量 a 和 b 减为零。然后它将打印出它不断累积的结果前缀。

此外，所有这些魔法都可能发生，因为每个方法调用都会将前缀、a 和 b 的当前状态推送到调用堆栈上。当方法最终返回而不进行递归调用时，堆栈就会展开。

我希望这个对你有用！递归可能很难理解。您还可以通过自己玩计算机并通过在纸上写下将被压入调用堆栈的前缀、a 和 b 的值来跟踪方法的执行来手动跟踪调用。

这是包含跟踪打印的程序的输出：

```
C:\Users\>java BalancedStrings
printBalanced called n = 4
printBalanced called prefix =  a = 2 b = 2
printBalanced calling printBalanced with prefix =  a-1 = 1 b = 2
printBalanced called prefix = a a = 1 b = 2
printBalanced calling printBalanced with prefix = a a-1 = 0 b = 2
printBalanced called prefix = aa a = 0 b = 2
printBalanced calling printBalanced with prefix = aa a = 0 b-1 = 1
printBalanced called prefix = aab a = 0 b = 1
printBalanced calling printBalanced with prefix = aab a = 0 b-1 = 0
printBalanced called prefix = aabb a = 0 b = 0
aabb
printBalanced calling printBalanced with prefix = a a = 1 b-1 = 1
printBalanced called prefix = ab a = 1 b = 1
printBalanced calling printBalanced with prefix = ab a-1 = 0 b = 1
printBalanced called prefix = aba a = 0 b = 1
printBalanced calling printBalanced with prefix = aba a = 0 b-1 = 0
printBalanced called prefix = abab a = 0 b = 0
abab
printBalanced calling printBalanced with prefix = ab a = 1 b-1 = 0
printBalanced called prefix = abb a = 1 b = 0
printBalanced calling printBalanced with prefix = abb a-1 = 0 b = 0
printBalanced called prefix = abba a = 0 b = 0
abba
printBalanced calling printBalanced with prefix =  a = 2 b-1 = 1
printBalanced called prefix = b a = 2 b = 1
printBalanced calling printBalanced with prefix = b a-1 = 1 b = 1
printBalanced called prefix = ba a = 1 b = 1
printBalanced calling printBalanced with prefix = ba a-1 = 0 b = 1
printBalanced called prefix = baa a = 0 b = 1
printBalanced calling printBalanced with prefix = baa a = 0 b-1 = 0
printBalanced called prefix = baab a = 0 b = 0
baab
printBalanced calling printBalanced with prefix = ba a = 1 b-1 = 0
printBalanced called prefix = bab a = 1 b = 0
printBalanced calling printBalanced with prefix = bab a-1 = 0 b = 0
printBalanced called prefix = baba a = 0 b = 0
baba
printBalanced calling printBalanced with prefix = b a = 2 b-1 = 0
printBalanced called prefix = bb a = 2 b = 0
printBalanced calling printBalanced with prefix = bb a-1 = 1 b = 0
printBalanced called prefix = bba a = 1 b = 0
printBalanced calling printBalanced with prefix = bba a-1 = 0 b = 0
printBalanced called prefix = bbaa a = 0 b = 0
bbaa 
```

# asp.net-mvc - 实体中的 Fk 关系

> ID：11264376
> 
> 赞同：2
> 
> 时间：2012-06-29T15:13:30.970
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework, linq-to-entities

我知道这是一个非常基本的问题。我有两张桌子

项目 - ID、名称、类型ID ProjectType - ID、名称

在 MVC 中，我有一个控制器操作来创建一个新项目。创建项目时，我在将项目传递给视图之前分配项目的类型，如下所示

```
//
        // GET: /Project/Create

        public ActionResult Create(string id= null)
        {

            ProjectType selprojtype = null;
            if (id != null)
            {
                selprojtype = db.ProjectTypes.Include("Projects").Single(p => p.Name == id);
          }

            Project project = new Project();
            project.ProjectType = selprojtype;
            //project.TypeID = selprojtype.ID;  -
            var model = new ProjectViewModel(project);
            PopulateDropDownLists(model);
            return View(model);
        } 
```

我的问题是执行以下仅关联 ProjectType 对象。

```
Project project = new Project();
 project.ProjectType = selprojtype; 
```

项目上的 TypeID 仍然为空。除非我这样做

```
 project.TypeID = selprojtype.ID; 
```

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T15:17:58.587

我不会将 存储`TypeID`在`Project`类上，因为该值已经在`ProjectType`类上。如果你需要访问这个值，你可以这样做：

```
project.ProjectType.ID 
```

如果需要直接从`Project`类中访问 ID，可以创建传递属性。例如

```
public class Project
{
    public ProjectType ProjectType { get; set; }
    public int TypeID
    {
        get { return ProjectType.ID; }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T20:16:51.917

没有 ： ）

让 ProjectViewModel() 的构造函数从传入的 Project 实例中读取它，并通过从 project.ProjectType 读取它来设置 id

# javascript - 使用 JS / CSS 创建一个包含文本的大纲

> ID：11264384
> 
> 赞同：4
> 
> 时间：2012-06-29T15:13:47.953
> 
> 标签：javascript, css

假设您有一个图像`float:left;`和一个围绕图像流动的文本。

代码非常简单：

```
<img src="image.jpg" style="float:left">
<p style="outline: 1px dotted blue">Lorem ipsum...</p> 
```

有没有办法显示轮廓，环绕文本而不是图像。文本上的正常轮廓为您提供：

![在此处输入图像描述](../Images/a548813d452d8810cee985d50837576f.png)

但我想要这个：

![在此处输入图像描述](../Images/340821805806b87d9e1fa6cf64fd3524.png)

使用 a在每行`display:inline;`上`<p>`显示一个轮廓，而不是在文本的可见边界上“逐块”显示。

CSS3 是合法的，任何核心 CSS/JS 都是允许的...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T15:24:15.163

你可以尝试这样的事情。将图像向上和向左移动，使其遮挡常规边框。然后给它自己的边界来完成幻觉。

```
<article>
 <img src="image.jpg" style="float:left">
 <p>Lorem ipsum...</p>
</article>

article {
 border: 1px blue dotted;
}

img {
 background-color: white;
 border-right: 1px blue dotted;
 border-bottom: 1px blue dotted;
 margin: -1px 0 0 -1px;
 padding: 0 5px 10px 0;
} 
```

这是小提琴：http: [//jsfiddle.net/KW45t/](http://jsfiddle.net/KW45t/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T15:32:48.300

检查这个jsfiddle [http://jsfiddle.net/pollirrata/rKaHk/1/](http://jsfiddle.net/pollirrata/rKaHk/1/)

这并不花哨，但可以完成工作

# php - 将所有mysql选定的行放入一个数组中

> ID：11264395
> 
> 赞同：21
> 
> 时间：2012-06-29T15:14:39.853
> 
> 标签：php, mysql, arrays

我想知道 php 中是否有一个函数可以让我将所有选择的数据放入一个数组中。目前我正在使用 mysql_fetch_array 并且正如我在手册中阅读的那样，该函数不会获取表中的每条记录。

```
$result = mysql_query("SELECT * FROM $tableName");            
$array = mysql_fetch_array($result);

  echo json_encode($array); 
```

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-06-29T15:17:02.050

出于性能和安全目的，我建议使用 MySQLi 或 MySQL PDO，但要回答这个问题：

```
while($row = mysql_fetch_assoc($result)){
     $json[] = $row;
}

echo json_encode($json); 
```

如果你切换到 MySQLi，你可以这样做：

```
$query = "SELECT * FROM table";
$result = mysqli_query($db, $query);

$json = mysqli_fetch_all ($result, MYSQLI_ASSOC);
echo json_encode($json ); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-29T15:18:25.790

1.  循环遍历结果并将每个结果放入数组中

2.  用于[`mysqli_fetch_all()`](http://us2.php.net/manual/en/mysqli-result.fetch-all.php)一次获取所有内容

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-06-29T15:18:04.980

**你可以试试：**

```
$rows = array();
while($row = mysql_fetch_array($result)){
  array_push($rows, $row);
}
echo json_encode($rows); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-31T09:36:47.577

```
$name=array(); 
while($result=mysql_fetch_array($res)) {
    $name[]=array('Id'=>$result['id']); 
    // here you want to fetch all 
    // records from table like this. 
    // then you should get the array 
    // from all rows into one array 
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-09-23T08:40:47.377

这个方法也很不错，大家可以试试。

```
 try {
       while ($row=mysqli_fetch_array($res)) {
        array_push($row...);           
    }    
} catch (Exception $e) {
     print($e->getMessage());
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-03-31T14:07:53.257

您可以在 no_of_row 时间内调用 mysql_fetch_array()

# ios - Xcode 代码设计（失败）警告：App Store 被拒绝？

> ID：11264401
> 
> 赞同：1
> 
> 时间：2012-06-29T15:14:57.573
> 
> 标签：ios, xcode, certificate, code-signing

我有一个无法解决的错误...我正确注册为Apple Developer，获得Apple 批准，获得Development and Distribution 证书和WWDR 中间证书。

在 iTunes Connect 中正确设置我的应用程序的详细信息、信息和参数。

我的应用程序运行良好，模拟器或测试设备没有错误或警告。但是当我用 Xcode 归档它以提交时，我有这个错误：

> 应用程序未通过协同设计验证。签名无效，或未使用 Apple 提交证书签名。(-19011)

两个问题：

*   知道为什么我会得到这个，以及如何摆脱它吗？
*   如果我将我的应用程序提交给 Apple 并显示此警告，我的应用程序是否会被确定拒绝？

感谢您的建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T16:56:51.060

此警告意味着您没有在应用程序本身的代码签名下设置正确的证书。

如果您已下载证书，将它们导入 x-code，并在 buildsettings 中的 codesigning 下选择它们，但仍然出现此错误，您应该尝试重新下载它们。当一切都正确设置并简单地再次修复它时，我已经不止一次看到这个错误。

至于您的第二个问题，如果不解决此问题，您将根本无法提交应用程序。

# android - 如何将文件从应用程序包路径复制到 sdcard？

> ID：11264404
> 
> 赞同：-1
> 
> 时间：2012-06-29T15:15:01.810
> 
> 标签：android

我想将 pdf 文件从应用程序路径（/data/data/package name）复制到 sdcard.for 我已经准备好了，

```
try {
        source = new FileInputStream(sourceFile).getChannel();
        destination = new FileOutputStream(destFile).getChannel();
        destination.transferFrom(source, 0, source.size());
    }
    finally {
        if(source != null) {
            source.close();
        }
        if(destination != null) {
            destination.close();
        }
    } 
```

它不工作。请帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T15:22:01.783

这是复制文件的示例代码

```
 private static void copyfile(String srFile, String dtFile){
        try{
            File f1 = new File(Source Fine Name);
            File f2 = new File(Destination File Name);
            InputStream in = new FileInputStream(f1);

//                  If you want to append the file.
//          OutputStream out = new FileOutputStream(f2,true);

            //For Overwrite the file.
            OutputStream out = new FileOutputStream(f2);

            byte[] buf = new byte[1024];
            int len;
            while ((len = in.read(buf)) > 0){
                out.write(buf, 0, len);
            }
            in.close();
            out.close();
            System.out.println("File copied.");
        }
        catch(FileNotFoundException ex){
            System.out.println(ex.getMessage());

        }
        catch(IOException e){
            System.out.println(e.getMessage());         
        }
    } 
```

# php - 表单帖子和 jquery 帖子之间的区别

> ID：11264405
> 
> 赞同：4
> 
> 时间：2012-06-29T15:15:17.373
> 
> 标签：php, jquery, html, post

我需要知道之间的确切区别：

```
<form method="POST" action="https://mywebsite/signon.php">
<input name="harv_acc" value="940322903" type="hidden" />
<input name="harv_eml" value="a@b.com" type="hidden" />
<input type="submit" value="SignOn" /> 
```

和

```
var url = "https://mywebsite/signon.php";
$.ajax({
    url: url,
    type: 'POST',
    //dataType: 'html', -- this was something I tried later
    //data: "harv_acc=" + accountnumber + "&harv_eml=" + email , this is also what I tried last but below is what I tried first
    data: { harv_acc: account, harv_eml: email },
    success: function (data) {
        closePopup("div_PleaseWait");
        alert(data);
        //window.location = encodeURI('<%= Url.Action("DownloadDocument", "Documents") %>?DocumentID=' + documentID + '&DownloadType=' + downloadType + '&DownloadPath=' + data);
    }
}); 
```

当我发布后者时，我得到 200 但没有回应。如果我提交第一个，我会得到正确的回复。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-29T15:24:44.760

从评论：

> 我要发布到另一个网站

啊哈！有你的问题。出于安全原因，浏览器会阻止 AJAX 访问外部网站。抱歉，您不会通过 XHR 请求发出该请求。

如果其他网站*希望*您与他们交流，他们可以通过 JSON-P 公开网站的这一部分，其工作原理如下：

1.  我的站点添加`<script src="http://othersite.com/signon.js?username=foo&password=bar&callback=myCallback">`到源代码（是的，为此使用 GET 很麻烦，但 JSON-P 不能以任何其他方式工作），并创建一个名为`myCallback`处理响应数据的函数。
2.  另一个站点登录，然后返回类似`myCallback({success: false, errorMessage: "Incorrect password, try again!"})`
3.  该脚本在我的网站上运行，调用`myCallback`，一切都很愉快。

JSON-P 是一个强大的协议，但只有在远程站点同意的情况下才有效。不过，如果他们这样做了，jQuery 有一个很好的快捷方式：只需设置`dataType: "jsonp"`，它就会为您处理整个回调。

但是，如果您没有与该网站密切相关，这不太可能发生，您可能会被迫放弃这种跨站点交互。抱歉，但这种跨域策略对在线安全至关重要。（我不希望其他站点`bankofamerica.com`代表我发出请求，kthx。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T15:26:21.170

传递给您的`complete`函数的第一个参数将是一个`jqXHR`对象，它是浏览器`XMLHttpRequest`对象的包装器。处理响应的更方便的方法是使用`done`方法：

```
var url = "https://mywebsite/signon.php";
$.ajax({
    url: url,
    type: 'POST',
    dataType: 'html',
    data: "harv_acc=" + accountnumber + "&harv_eml=" + email
}).done(function(data) {
    closePopup("div_PleaseWait");
    alert(data);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T15:22:27.557

尝试将数据作为 key:value 对象发送。这是来自 jQuery 文档的示例

```
 $.ajax({
  type: "POST",
  url: "some.php",
  data: { name: "John", location: "Boston" }
}).done(function( msg ) {
  alert( "Data Saved: " + msg );
}); 
```

更新：正如用户 Matchu 指出的那样，这不是问题，因为无论如何数据都将转换为查询字符串，如 jQuery 文档中所述：

> "data 选项可以包含 key1=value1&key2=value2 形式的查询字符串，也可以包含 {key1: 'value1', key2: 'value2'} 形式的映射。如果使用后一种形式，则转换数据在发送之前使用 jQuery.param() 将其转换为查询字符串。"

所以，是的，我在那里有些轻率的回答。至少*我*学到了一些东西！;)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T15:32:47.463

浏览器不支持跨域 ajax 请求。但是还有另一种方法可以解决这个问题。

您可以将[JSONP](http://en.wikipedia.org/wiki/JSONP)用于跨域请求。它易于使用，并允许您从支持回调的任何服务器/脚本请求任何内容（只要是 JSON 格式）。JSONP 的好处是它也适用于旧版浏览器。

唯一严重的限制似乎是它总是使用 HTTP GET 方法

你也可以检查一下吗。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-06-29T15:21:04.230

使用 POST 方法时，在您的情况下，您应该将数据发布为 JSON

```
var url = "https://mywebsite/signon.php";
$.ajax({
    url: url,
    type: 'POST',
    dataType: 'html',
    data: {
      harv_acc : accountnumber,
      harv_eml : email
    },
    success: function (data) {
        closePopup("div_PleaseWait");
        alert(data);
        //window.location = encodeURI('<%= Url.Action("DownloadDocument", "Documents") %>?DocumentID=' + documentID + '&DownloadType=' + downloadType + '&DownloadPath=' + data);
    }
}); 
```

注意：我使用数据类型：JSON

# awk - 用于返回值的 shell 脚本

> ID：11264409
> 
> 赞同：-1
> 
> 时间：2012-06-29T15:15:50.890
> 
> 标签：awk

我有下面的shell脚本，可以根据需要产生输出。

```
RuleNum=$1    

cat input.txt |awk -v var=$RuleNum '$1==var {out=$1; for(i=NF;i >=0;i--)if($i~/bps/){sub("bps","",$i);out=out" "$i} print out;out=""}' 

./downup.sh 20
20 BW-IN:2560000 BW-OUT:2048000 
```

我想要输出如下

```
./downup.sh 20    
256000 2048000
./downup.sh 36
2560000 2048000 
```

下面是`input.txt`

```
20 name:abc addr:203.45.247.247/255.255.255.255 WDW-THRESH:12 BW-OUT:10000000bps BW-IN:15000000bps STATSDEVICE:test247 STATS:Enabled (4447794/0) <IN OUT>
25 name:xyz160 addr:203.45.233.160/255.255.255.224 STATSDEVICE:test160 STATS:Enabled priority:pass-thru (1223803328/0) <IN OUT>
37 name:testgrp2 <B> WDW-THRESH:8 BW-BOTH:192000bps STATSDEVICE:econetgrp2 STATS:Enabled (0/0) <Group> START:NNNNNNN-255-0 STOP:NNNNNNN-255-0
62 name:blahblahl54 addr:203.45.225.54/255.255.255.255 WDW-THRESH:5 BWLINK:cbb256 BW-BOTH:256000bps STATSDEVICE:hellol54 STATS:Enabled (346918/77) <IN OUT> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T16:50:44.970

`sub("BW.*:", "", $i)`在现有的`sub()`.

而且`cat`没有必要。只需将文件名放在行尾：

```
awk ... input.txt 
```

要从输出中消除规则编号，请删除`out = $1;`.

这是一个添加的结果，以避免在每行的开头打印一个空格：

```
awk -v var=$RuleNum '$1==var {for(i = NF; i >= 0; i--) if ($i ~ /bps/) {sub("bps","",$i); sub("BW.*:", "", $i); out = out delim $i; delim = OFS} print out; out = delim = ""}' 
```

# php - CodeIgniter Ion_auth 检查登录

> ID：11264411
> 
> 赞同：3
> 
> 时间：2012-06-29T15:15:59.913
> 
> 标签：php, codeigniter, codeigniter-2, ion-auth

我如何检查用户是否已**登录**？

像这样的东西：

```
if ($this->ion_auth->logged_in())
{
    // do something ..
}
else
{
    // do something else ..
} 
```

以及如何将用户数据转换为变量？

多谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-29T15:27:10.810

在您的控制器中，您可以执行类似的操作

```
function some_method() {
    if ($this->ion_auth->logged_in()) {
      $loggedin = true;
    } else {
      $loggedin = false;
    }

    $data['loggedin'] = $loggedin;

    $this->load->view('some_view.php', $data);
} 
```

然后在你看来

```
<?php if ($loggedin): ?>
    <p>Logged in</p>
<?php else: ?>
    <p>Please log in</p>
<?php endif; ?> 
```

或者，如果用户登录与否，您可以从控制器加载不同的视图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T15:40:00.050

正如stealthyninja 所说，它应该在控制器中执行。您可以通过扩展基本 CodeIgniter 控制器来减少控制器中的代码量，然后让您的控制器用于项目的经过身份验证的区域扩展您的自定义控制器。您的自定义控制器可以有一个构造函数来检查用户是否经过身份验证并适当地路由它们。同样的构造函数也可以在其中设置变量，以便自定义控制器的子类可以轻松访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-17T06:47:20.780

控制器：

```
$this->ion_auth->logged_in() ? $data['logged'] = true : $data['logged'] = false;

$this->load->view('index', $data); 
```

看法：

```
<?php if ($logged): ?>
    do something...
<?php else: ?>
    do something else...
<?php endif; ?> 
```

# php - 邮件文本编码

> ID：11264413
> 
> 赞同：-1
> 
> 时间：2012-06-29T15:16:00.440
> 
> 标签：php, encoding

我的文本编码有一个小问题，当用户通过这样的邮件提交带有传入信息的 textarea 字段`(copy&paste)`或`Also – can you give me some...`提交`line item – QA coverage`它时，在我的 $_POST 可验证文本中看起来像`line item вЂ“ QA`，`Also вЂ“ can you give me some...`我的网站校对是 latin1_swedish_ci。

任何人都知道，如何避免这种情况？谢谢。最好的问候，安东。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T15:22:00.567

# asp.net-mvc-3 - 通过 ASP.NET 同步上下文安全地执行任务，无需 AsyncManager.Sync

> ID：11264417
> 
> 赞同：5
> 
> 时间：2012-06-29T15:16:07.193
> 
> 标签：asp.net-mvc-3, asynchronous, task-parallel-library

我正在尝试将 AsyncController 与依赖注入混合。有问题的 MVC 应用程序通过异步 Web 服务调用获取几乎所有数据。我们将异步工作包装在 TPL 中的 Tasks 中，并在这些任务完成时通知控制器的 AsyncManager。

有时我们必须在这些任务的延续中触及 HttpContext——添加一个 cookie 等等。根据[在 ASP.NET MVC 中使用异步控制器](http://msdn.microsoft.com/en-us/library/ee728598%28v=vs.100%29.aspx)执行此操作的正确方法是调用该`AsyncManager.Sync`方法。这会将 ASP.NET 线程上下文（包括 HttpContext）传播到当前线程，执行回调，然后恢复之前的上下文。

但是，那篇文章还说：

> 从已经受 ASP.NET 控制的线程调用 Sync() 具有未定义的行为。

如果您在控制器中完成所有工作，这不是问题，因为您通常知道在延续中应该使用哪个线程。但我想做的是在我们的异步数据访问和我们的异步控制器之间创建一个中间层。所以这些也是异步的。一切都由 DI 容器连接起来。

所以和以前一样，调用链中的一些组件需要使用“当前”HttpContext。例如，登录后，我们想要存储从单点登录服务返回的“会话”令牌。做这件事的抽象是 ISessionStore。考虑一个 CookieSessionStore，它在响应中放置一个 cookie，或者从请求中获取 cookie。

我可以看到两个问题：

1.  这些组件无权访问 AsyncManager，甚至不知道它们正在控制器中使用。
2.  组件不知道从哪个线程调用它们，因此 AsyncManager.Sync 或任何等效项在理论上无论如何都是有问题的。

为了解决 #1，我基本上注入了一个`TaskScheduler.FromCurrentSynchronizationContext()`在请求开始时抓取的对象，并且可以通过使用该调度程序启动的任务调用一个动作，将 HttpContextBase 作为参数。

也就是说，从我的组件中，我可以调用类似于：

```
MySyncObject.Sync(httpContext => /* Add a cookie or something else */); 
```

我还没有发现任何问题，但我担心问题 #2。我已经查看了Reflector`AsyncManager`和`SynchronizationContextTaskScheduler`Reflector，它们的操作类似，在 ASP.NET 上执行回调`SynchronizationContext`。这让我害怕 :)

当我看到任务调度程序实现将直接调用而不是通过同步上下文（如果它是内联的）时，我有点希望。但不幸的是，这似乎不是通过正常的`Task.Start(scheduler)`代码路径发生的。相反，任务可以在其他情况下内联，例如在开始之前等待它们。

所以我的问题是：

1.  用这种方法我会在这里遇到麻烦吗？
2.  有没有更好的办法？
3.  在这种情况下同步的用处仅仅是为了序列化对非线程安全的 HttpContext 的访问吗？即我可以用线程安全的 HttpContextBase 包装器代替（ick）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T17:28:18.120

依赖线程局部静态很少是一个好主意。虽然`HttpContext.Current`依赖于这种机制并且它已经工作了多年，但现在我们要异步了，这种方法正在迅速恶化。最好将此静态的值捕获为局部变量并将其与您的异步工作一起传递，这样您就可以始终拥有它。因此，例如：

```
public async Task<ActionResult> MyAction() {
    var context = HttpContext.Current;
    await Task.Yield();
    var item = context.Items["something"];
    await Task.Yield();
    return new EmptyResult();
} 
```

或者更好的是，`HttpContext.Current`如果你在 MVC 中，完全避免：

```
public async Task<ActionResult> MyAction() {
    await Task.Yield();
    var item = this.HttpContext.Items["something"];
    await Task.Yield();
    return new EmptyResult();
} 
```

可以说，您的中间件业务逻辑尤其不应该依赖于 HttpContext 或 ASP.NET 库中的任何其他内容。因此，假设您的中间件回调到您的控制器（通过回调、接口等）以设置 cookie，那么您将`this.HttpContext`可以用于访问该上下文。

# spring - 0-9-1 在 AMQP 0-9-1 协议中代表什么

> ID：11264420
> 
> 赞同：1
> 
> 时间：2012-06-29T15:16:11.797
> 
> 标签：spring, rabbitmq, amqp, middleware, spring-amqp

我在 AMQP 0-9-1 协议中找不到 0-9-1 背后的确切逻辑。请有人解释一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T15:21:53.153

完整的规范在这里：

*   [http://www.amqp.org/specification/0-9-1/amqp-org-download](http://www.amqp.org/specification/0-9-1/amqp-org-download)

“0-9-1”恰好是版本#：

```
AMQP
Advanced Message Queuing Protocol
Protocol Specification
Version 0-9-1, 13 November 2008
A General-Purpose Messaging Standard 
```

***1.4.2 版本编号***

AMQP 版本使用两位或三位数字表示——主要编号、次要编号和可选的修订号。按照惯例，版本表示为major-minor[-revision] 或major.minor[.revision]：

*   对于官方规范，主要、次要和修订号可以采用 0 到 99 之间的任何值。
*   100 及以上的主要、次要和修订号保留用于内部测试和开发目的。
*   版本号表示句法和语义互操作性。
*   版本 0-9-1 表示为major = 0，minor = 9，revision = 1。
*   版本 1.1 将表示为major = 1，minor = 1，revision = 0。写“AMQP/1.1”相当于写“AMQP/1.1.0”或AMQP/1-1-0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T15:19:00.927

它是[0.9.1 版本](http://www.rabbitmq.com/resources/specs/amqp0-9-1.xml)。

```
<amqp major="0" minor="9" revision="1" port="5672" comment="AMQ Protocol version 0-9-1"> 
```

# php - 如何使用 ID 从关联表中获取值？

> ID：11264421
> 
> 赞同：0
> 
> 时间：2012-06-29T15:16:12.143
> 
> 标签：php, mysql, pdo

首先，我不知道标题是否相关（如果不相关，请原谅我）。

我有 2 张桌子`userprofile`和`country`.

```
userprofile table:-
-----------------------------------------
userid | email |............|**countryid**
-----------------------------------------

country table:-
-----------------------------------------
**countryid** | countryname
----------------------------------------- 
```

我想从 userpfofile 表中选择数据，即 `$query="select * from userprofile`......但问题是这个数据返回 countryid 但我实际上想返回 countryname。

我是 MySQL 新手，所以请提出实现这一目标的最佳方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T15:16:52.457

您需要将这两个表连接在一起以获取所需的数据，如下所示[：](http://dev.mysql.com/doc/refman/5.5/en/join.html)

```
SELECT * FROM userprofile u
    LEFT JOIN country c
    ON c.countryid = u.countryid 
```

这将产生类似于以下内容的结果集：

```
---------------------------------------------------------
| userid | email | .......... | countryid | countryname |
--------------------------------------------------------- 
```

# c# - 使用当前目录填充文本框

> ID：11264422
> 
> 赞同：0
> 
> 时间：2012-06-29T15:16:21.283
> 
> 标签：c#, winforms, textbox

我正在用 C# 编写一个 winform，我在组合框旁边有一个文本框，用于显示所做的选择。组合框用于选择保存文件的目录，我想用当前目录填充文本框作为默认值。这是我正在使用的代码不起作用：

```
private void Form1_Load(object sender, EventArgs e)
{
    textBox4.Text = Directory.GetCurrentDirectory();
} 
```

任何建议表示赞赏。

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T15:35:24.527

我怀疑`Form1_Load`事件处理程序永远不会被调用。尝试在该函数处设置断点，看看它是否被调用。

您也可以将此行放在表单构造函数中：

```
public Form1()
{
   InitializeComponent();
   textBox4.Text = Directory.GetCurrentDirectory();
} 
```

这种获取当前目录的方法（使用`Directory.GetCurrentDirectory()`）是正确的，我看不出它有什么不起作用的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T15:25:34.107

我刚刚做了类似的事情，但有一个打开的文件对话框。我追求的是完整的路径。我用了以下。Path.GetFullPath 返回文件的完整路径。它是 System.IO 命名空间的一部分。

```
textboxPath = Path.GetFullPath(opendialog.FileName); 
```

# javascript - 在 IE 中动态加载 jquery

> ID：11264425
> 
> 赞同：0
> 
> 时间：2012-06-29T15:16:36.350
> 
> 标签：javascript, jquery, load

因此，如果 CSS 转换不起作用，我想加载 jquery 作为备份。为此使用现代化器，它工作正常。

如果我将它包含在标题中，jquery 可以正常工作

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

但如果我尝试像动态添加它

```
 var fileref=document.createElement('script')
  fileref.setAttribute("type","text/javascript")
  fileref.setAttribute("src", "http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js") 
```

或者

```
 var jqueryscript = document.createElement("script");
jqueryscript.type = "text/css";
jqueryscript.setAttribute("http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js");
document.body.appendChild(jqueryscript); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T15:19:27.777

在您的第二个片段中，您应该使用：

```
jqueryscript.type = "text/javascript";
jqueryscript.src = "http://ajax.blahblahblah"; 
```

不是

```
jqueryscript.type = "text/css";
jqueryscript.setAttribute("http://ajax.blahblahblah") 
```

.setAttribute() 有两个参数——第一个是属性名，第二个是值。传递一个值是无效的（我想）......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T15:23:42.437

对于第一个示例，您**必须**将脚本标记添加到文档中。不这样做会在内存中创建元素，但浏览器不会费心下载文件：

```
var fileref = document.createElement("script");
fileref.setAttribute("type", "text/javascript");
fileref.setAttribute("src", "http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js");
document.getElementsByTagName("head")[0].appendChild(fileref); 
```

请注意，使用`el.setAttribute("src", ...)`and`el.src =`并没有真正的区别（[讨论here](https://stackoverflow.com/questions/3919291/when-to-use-setattribute-vs-attribute-in-javascript)）。

如果您以这种方式加载 JavaScript 文件，您必须意识到`jQuery`或`$`变量在文件加载之前将不可用。您必须将使用的代码包装在函数内部，并在加载脚本*后*`jQuery`调用该函数。一个简单的例子：

 *```
function onScriptLoaded() {
    alert(jQuery.fn.jquery); // alerts jQuery version number
}
var fileref = document.createElement("script");
fileref.setAttribute("type", "text/javascript");
fileref.setAttribute("src", "http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js");
fileref.onload = onScriptLoaded;
fileref.onreadystatechange = function () {
    if (this.readyState == 'complete') {
        onScriptLoaded();
    }
}
document.getElementsByTagName("head")[0].appendChild(fileref); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T15:23:44.133

两个片段都不正确，试试这个：

```
var headID = document.getElementsByTagName("head")[0];  
var newScript = document.createElement('script');
newScript.type = 'text/javascript';
newScript.src = 'http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js';
headID.appendChild(newScript); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T15:27:16.497

尝试

```
 document.write('<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"><\/script>'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-29T15:19:14.810

问题可能是在执行之前您不能使用 jQuery，在这种情况下，您必须侦听一个事件，并且只有在该事件运行后才运行您的 jQuery 代码。

```
script.onload = script.onreadystatechange = function() {
    // run your jquery dependent code
    // only after this function ran
} 
```*

# c# - 委托定义 - 内部/外部方法有什么不同吗？

> ID：11264429
> 
> 赞同：1
> 
> 时间：2012-06-29T15:16:43.253
> 
> 标签：c#, delegates, mono

如标记的那样，如果重要的话，我正在使用 Mono，而不是 .NET。

在使用委托时，我对范围的最佳实践感到困惑。请注意，在此示例中，*autoOrientations*和*autoRotationSetups*将在*Awake()*之外的类中的其他位置使用。另请注意，在使用[Unity](http://unity3d.com/)时，您经常[使用*Awake()*，否则您可能会使用构造函数](http://docs.unity3d.com/Documentation/ScriptReference/index.Writing_Scripts_in_Csharp_26_Boo.html)：

```
List<ScreenOrientation> autoOrientations;
Dictionary<ScreenOrientation, Action> autoRotationSetups;

void Awake() {
    var verticalOrientations = new List<ScreenOrientation>(
        new []{ScreenOrientation.Portrait, ScreenOrientation.PortraitUpsideDown});  
    Action setAutoRotationsToVertical = () => {
        // I don't think this defintion is important for this question,
        // but it does use the just-defined List.
    };
    var horizontalOrientations = new List<ScreenOrientation>(
        new []{ScreenOrientation.LandscapeLeft, ScreenOrientation.LandscapeRight});
    Action setAutoRotationsToHorizontal = () => {// See last comment.
    };
    autoRotationSetups = new Dictionary<ScreenOrientation, Action>() {
        {ScreenOrientation.Portrait, setAutoRotationsToVertical},
        {ScreenOrientation.PortraitUpsideDown, setAutoRotationsToVertical},
        {ScreenOrientation.LandscapeLeft, setAutoRotationsToHorizontal},
        {ScreenOrientation.LandscapeRight, setAutoRotationsToHorizontal},
    }; //... 
```

或者，我可以定义类方法，然后将它们分配给委托。这种改变看起来像：

```
List<ScreenOrientation> verticalOrientations, horizontalOrientations;
void SetAutoRotationsToVertical() {}
void SetAutoRotationsToHorizontal() {}

void Awake() {
    Action setAutoRotationsToVertical = SetAutoRotationsToVertical;
    Action setAutoRotationsToHorizontal = SetAutoRotationsToHorizontal; //... 
```

这两种方法之间有什么不同的地方吗？以我目前的知识水平，我最关心的是存在错误的记忆区域的变量；[关于价值类型的真相](http://blogs.msdn.com/b/ericlippert/archive/2010/09/30/the-truth-about-value-types.aspx)可能会澄清这一点，我想我很清楚，但我对它的理解还不够好，还不能完全自信。此外，我不知道采取一种或另一种方式的任何其他可能原因，因此这个问题。

我最近一直在关闭问题，因为人们认为它们是主观的，所以，尽管我重视你的意见，“不”。将是一个可以接受的答案。“是”可能需要进一步解释这不是纯粹的风格选择。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T15:19:58.570

> 这两种方法之间有什么不同的地方吗？

当您通过 lambda 表达式创建匿名方法时，编译器只会为您创建一个方法。实际上，这两个版本的差异可能很小。

主要区别在于，通过允许编译器创建匿名方法，您确实可以在`Awake()`方法中围绕本地定义的变量使用闭包。这可能是一件好事，也可能是一件坏事，这取决于你想要什么——因为它可能会导致生成额外的类来保存变量。

> 以我目前的知识水平，我最关心的是生活在错误的记忆区域的变量

我不会太担心这一点——它不像有一个“正确”和一个“错误”的记忆区域......

# c# - 找不到类型或命名空间名称“readFullyStream”

> ID：11264442
> 
> 赞同：0
> 
> 时间：2012-06-29T15:17:35.760
> 
> 标签：c#, stream, streaming, mp3, naudio

我尝试在 Csharp 中使用 NAudio 演示应用程序进行 MP3 流式传输，当我测试他们的演示时，它运行良好。我尝试以 ac# 形式创建它，但出现错误。它说

> “错误 1 ​​找不到类型或命名空间名称‘readFullyStream’（是否缺少 using 指令或程序集引用？） c:\users\alioriyadho\documents\visual studio 2010\Projects\WindowsFormsApplication5\WindowsFormsApplication5\Form1.cs 89 47 WindowsFormsApplication5"

我不知道为什么会出错，我添加了所有引用并这样认为。

```
 using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Text;
using System.Windows.Forms;
using NAudio.Wave;
using System.Net;
using System.Threading;
using System.Net.Sockets;
using System.IO;
using System.Diagnostics;
using System.ComponentModel.Composition;

namespace WindowsFormsApplication5
{
    public partial class MP3StreamingPanel : Form
    {
        enum StreamingPlaybackState
        {
            Stopped,
            Playing,
            Buffering,
            Paused
        }

        public MP3StreamingPanel()
        {
            InitializeComponent();
            this.volumeSlider1.VolumeChanged += new EventHandler(volumeSlider1_VolumeChanged);
            this.Disposed += this.MP3StreamingPanel_Disposing;
        }

        void volumeSlider1_VolumeChanged(object sender, EventArgs e)
        {
            if (this.volumeProvider != null)
            {
                this.volumeProvider.Volume = this.volumeSlider1.Volume;
            }
        }

        private BufferedWaveProvider bufferedWaveProvider;
        private IWavePlayer waveOut;
        private volatile StreamingPlaybackState playbackState;
        private volatile bool fullyDownloaded;
        private HttpWebRequest webRequest;
        private VolumeWaveProvider16 volumeProvider;

        delegate void ShowErrorDelegate(string message);

        private void ShowError(string message)
        {
            if (this.InvokeRequired)
            {
                this.BeginInvoke(new ShowErrorDelegate(ShowError), message);
            }
            else
            {
                MessageBox.Show(message);
            }
        }

        private void StreamMP3(object state)
        {
            this.fullyDownloaded = false;
            string url = (string)state;
            webRequest = (HttpWebRequest)WebRequest.Create(url);
            HttpWebResponse resp = null;
            try
            {
                resp = (HttpWebResponse)webRequest.GetResponse();
            }
            catch (WebException e)
            {
                if (e.Status != WebExceptionStatus.RequestCanceled)
                {
                    ShowError(e.Message);
                }
                return;
            }
            byte[] buffer = new byte[16384 * 4]; // needs to be big enough to hold a decompressed frame

            IMp3FrameDecompressor decompressor = null;
            try
            {
                using (var responseStream = resp.GetResponseStream())
                {
                    var readFullyStream = new readFullyStream(responseStream);
                    do
                    {
                        if (bufferedWaveProvider != null && bufferedWaveProvider.BufferLength - bufferedWaveProvider.BufferedBytes < bufferedWaveProvider.WaveFormat.AverageBytesPerSecond / 4)
                        {
                            Debug.WriteLine("Buffer getting full, taking a break");
                            Thread.Sleep(500);
                        }
                        else
                        {
                            Mp3Frame frame = null;
                            try
                            {
                                frame = Mp3Frame.LoadFromStream(readFullyStream);
                            }
                            catch (EndOfStreamException)
                            {
                                this.fullyDownloaded = true;
                                // reached the end of the MP3 file / stream
                                break;
                            }
                            catch (WebException)
                            {
                                // probably we have aborted download from the GUI thread
                                break;
                            }
                            if (decompressor == null)
                            {
                                // don't think these details matter too much - just help ACM select the right codec
                                // however, the buffered provider doesn't know what sample rate it is working at
                                // until we have a frame
                                WaveFormat waveFormat = new Mp3WaveFormat(frame.SampleRate, frame.ChannelMode == ChannelMode.Mono ? 1 : 2, frame.FrameLength, frame.BitRate);
                                decompressor = new AcmMp3FrameDecompressor(waveFormat);
                                this.bufferedWaveProvider = new BufferedWaveProvider(decompressor.OutputFormat);
                                this.bufferedWaveProvider.BufferDuration = TimeSpan.FromSeconds(20); // allow us to get well ahead of ourselves
                                //this.bufferedWaveProvider.BufferedDuration = 250;
                            }
                            int decompressed = decompressor.DecompressFrame(frame, buffer, 0);
                            //Debug.WriteLine(String.Format("Decompressed a frame {0}", decompressed));
                            bufferedWaveProvider.AddSamples(buffer, 0, decompressed);
                        }

                    } while (playbackState != StreamingPlaybackState.Stopped);
                    Debug.WriteLine("Exiting");
                    // was doing this in a finally block, but for some reason
                    // we are hanging on response stream .Dispose so never get there
                    decompressor.Dispose();
                }
            }
            finally
            {
                if (decompressor != null)
                {
                    decompressor.Dispose();
                }
            }
        }

        private void buttonPlay_Click(object sender, EventArgs e)
        {
            if (playbackState == StreamingPlaybackState.Stopped)
            {
                playbackState = StreamingPlaybackState.Buffering;
                this.bufferedWaveProvider = null;
                ThreadPool.QueueUserWorkItem(new WaitCallback(StreamMP3), textBoxStreamingUrl.Text);
                timer1.Enabled = true;
            }
            else if (playbackState == StreamingPlaybackState.Paused)
            {
                playbackState = StreamingPlaybackState.Buffering;
            }
        }

        private void StopPlayback()
        {
            if (playbackState != StreamingPlaybackState.Stopped)
            {
                if (!fullyDownloaded)
                {
                    webRequest.Abort();
                }
                this.playbackState = StreamingPlaybackState.Stopped;
                if (waveOut != null)
                {
                    waveOut.Stop();
                    waveOut.Dispose();
                    waveOut = null;
                }
                timer1.Enabled = false;
                // n.b. streaming thread may not yet have exited
                Thread.Sleep(500);
                ShowBufferState(0);
            }
        }

        private void ShowBufferState(double totalSeconds)
        {
            labelBuffered.Text = String.Format("{0:0.0}s", totalSeconds);
            progressBarBuffer.Value = (int)(totalSeconds * 1000);
        }

        private void timer1_Tick(object sender, EventArgs e)
        {
            if (playbackState != StreamingPlaybackState.Stopped)
            {
                if (this.waveOut == null && this.bufferedWaveProvider != null)
                {
                    Debug.WriteLine("Creating WaveOut Device");
                    this.waveOut = CreateWaveOut();
                    waveOut.PlaybackStopped += waveOut_PlaybackStopped;
                    this.volumeProvider = new VolumeWaveProvider16(bufferedWaveProvider);
                    this.volumeProvider.Volume = this.volumeSlider1.Volume;
                    waveOut.Init(volumeProvider);
                    progressBarBuffer.Maximum = (int)bufferedWaveProvider.BufferDuration.TotalMilliseconds;
                }
                else if (bufferedWaveProvider != null)
                {
                    var bufferedSeconds = bufferedWaveProvider.BufferedDuration.TotalSeconds;
                    ShowBufferState(bufferedSeconds);
                    // make it stutter less if we buffer up a decent amount before playing
                    if (bufferedSeconds < 0.5 && this.playbackState == StreamingPlaybackState.Playing && !this.fullyDownloaded)
                    {
                        this.playbackState = StreamingPlaybackState.Buffering;
                        waveOut.Pause();
                        Debug.WriteLine(String.Format("Paused to buffer, waveOut.PlaybackState={0}", waveOut.PlaybackState));
                    }
                    else if (bufferedSeconds > 4 && this.playbackState == StreamingPlaybackState.Buffering)
                    {
                        waveOut.Play();
                        Debug.WriteLine(String.Format("Started playing, waveOut.PlaybackState={0}", waveOut.PlaybackState));
                        this.playbackState = StreamingPlaybackState.Playing;
                    }
                    else if (this.fullyDownloaded && bufferedSeconds == 0)
                    {
                        Debug.WriteLine("Reached end of stream");
                        StopPlayback();
                    }
                }

            }
        }

        private IWavePlayer CreateWaveOut()
        {
            return new WaveOut();
            //return new DirectSoundOut();
        }

        private void MP3StreamingPanel_Disposing(object sender, EventArgs e)
        {
            StopPlayback();
        }

        private void buttonPause_Click(object sender, EventArgs e)
        {
            if (playbackState == StreamingPlaybackState.Playing || playbackState == StreamingPlaybackState.Buffering)
            {
                waveOut.Pause();
                Debug.WriteLine(String.Format("User requested Pause, waveOut.PlaybackState={0}", waveOut.PlaybackState));
                playbackState = StreamingPlaybackState.Paused;
            }
        }

        private void buttonStop_Click(object sender, EventArgs e)
        {
            StopPlayback();
        }

        private void waveOut_PlaybackStopped(object sender, StoppedEventArgs e)
        {
            Debug.WriteLine("Playback Stopped");
            if (e.Exception != null)
            {
                MessageBox.Show(String.Format("Playback Error {0}", e.Exception.Message));
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T15:21:28.633

你的问题在这里：

```
 var readFullyStream = new readFullyStream(responseStream);
                do 
```

“readFullyStream”`new readFullyStream(responseStream)`需要是`Type`某种类型的，可能位于您的 MP3 库中。相反，您使用的名称与您尝试声明的变量相同。

# c++ - 在简单示例中使用 C++ 中的多态性有什么好处？

> ID：11264445
> 
> 赞同：-4
> 
> 时间：2012-06-29T15:17:38.880
> 
> 标签：c++, polymorphism

我有一个显示多态性的简单程序。问题：在简单调用 dr1.test() 和 dr2.test() 之上使用 bs->test() 有什么好处？

```
#include <iostream>
using namespace std;
class base
{
public:
    virtual void test()=0;
};
class derieved1:public base
{
public:
    void test(){cout<<"Derieved 1"<<endl;}
};
class derieved2:public base
{
public:
    void test(){cout<<"Derieved 2"<<endl;}
};
int main()
{   
    derieved1 dr1;
    derieved2 dr2;
    base* bs;
    bs=&dr1;bs->test();
    bs=&dr2;bs->test();
    dr1.test();
    dr2.test();
    return 0;
} 
```

感谢你的回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T15:24:36.020

在您的示例中，使用多态性没有附加价值。在您不再知道派生类是什么的情况下，多态性会增加价值。

例如：

```
void testFunction(base* tester)
{
  tester->test();
} 
```

**编辑：**
当然，还有一个附加值：表明多态性确实有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T15:33:05.080

尽管这似乎是一个愚蠢的问题，但我已经多次从新手那里听到这个问题，这对于刚开始学习 oop 的任何人来说都是一个真正的疑问。当然，在那个例子中你是对的。但是，**在现实世界中，您并不是在一个页面上编写所有程序**！所以，当你有一些复杂的逻辑可以分成你知道的和你不知道的东西时，它会有所帮助。**您可以编写您所知道**的代码，并为其他人**提供钩子**来填充您不知道的内容，但他们知道的内容。

以旅行社为例，他们不知道巴士公司和火车运营商如何安排和运行他们的服务。但是，他们知道如何从不同类型的运营商那里获得最优惠的价格（但请记住，他们都是公共汽车/火车运营商）。所以，**他们只需要一份合同**（相当于您的基类），他们知道如何从每个公共汽车/火车运营商那里获取给定日期的时间表（即，我想要某某目的地的某某日期的可能时间表）。只要所有的经营者都遵守这个合同，旅行社就可以做他们最了解的事情。即，获取所有这些可能的时间表并为他们的客户选择最好的。选择最好的是旅行社的任务。他们不必关心公共汽车/火车运营商如何在内部维护时间表/成本等（这是派生类实现）。由于旅行社只与巴士/火车运营商签订合同，以后如果有新的巴士/火车运营商来，旅行社的逻辑不需要修改（考虑你的问题，如果你使用 d1.test() 和 dr2 .test() 如果添加了新的 DerivedClass3，

你会在各行各业看到这种模式。你知道外出就餐的合同。查看菜单，订购食物，付款并返回（基类方法）。无需知道他们如何烹饪，如何制作菜单等。

因此，简而言之，多态性可以帮助您实现这样的情况：您可以在不知道依赖实现的内部细节的情况下独立实现程序的一部分，而只能通过了解接口来实现。

因此，在您的示例中，您可以仅使用基类来实现复杂的算法或逻辑，而无需关心那里有哪些派生类。你的算法的用户可以添加不同类型的派生类的各种实例，你的算法仍然可以工作。

希望这可以帮助..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T15:32:39.833

**在这种特殊情况下**，使用多态性*可能*有一个缺点。调用`dr1.test()`将静态解析，而通过基指针调用*可以*动态解析调用，因此会产生一些开销。（我说“可以”，因为编译器可以优化它）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T15:37:56.257

多态性通常没有好处。除了像您这样的实验外，除非找到明确的理由使用多态性，否则可能应该避免使用多态性。

然而，确实出现了使用多态性的明确理由。众所周知，大多数这样的原因很难在几段中充分解释——而且在太多的编程书籍中也很难解释清楚。令人遗憾的是，这些书中给出的例子往往被人为设计到完全无用的地步——但这并不完全是这些书的错。

*指向*对象的指针的容器（如列表或向量）可能是多态性的最典型情况。当您的代码的一部分必须注册一个对象以供您的代码的另一部分以后使用时，并且该对象不仅具有不同的数据而且具有不同的行为，那么多态性可能会有所帮助。

多态性最有用的特性之一在于它如何支持将新类型添加到现有代码中，这些类型在设计原始代码时并未预见到。因此，多态性可能更多地是维护实践的问题，而不是逻辑概念的问题。

在许多实质性程序中，根本不需要多态性，并且在少于 2000 行的程序中很少需要或有用。多态性解决了一个实际设计问题，该问题往往出现在 10,000 行或更长的程序中——这正是为什么通常给出的多态性示例往往如此无用的人为设计的原因。在编写足够大的程序之前，很难看出多态性的必要性。

# mysql - mysql中auto_increment（整数）的限制是什么

> ID：11264447
> 
> 赞同：16
> 
> 时间：2012-06-29T15:17:43.207
> 
> 标签：mysql, integer, auto-increment

我有一个 mysql 数据库，我在其中使用 auto_increment(integer)，你能告诉我它可以递增到什么整数。我们如何增加 auto_increment 的限制？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-06-29T15:20:22.903

列的限制是`auto_increment`列[的大小](https://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html)：

> 为 AUTO_INCREMENT 列使用足够大的整数数据类型来保存您需要的最大序列值。当列达到数据类型的上限时，下一次生成序列号的尝试失败。例如，如果您使用 TINYINT，则允许的最大序列号为 127。对于 TINYINT UNSIGNED，最大值为 255。

[整数类型](https://dev.mysql.com/doc/refman/5.0/en/integer-types.html)的限制是：

```
TINYINT            - 127
UNSIGNED TINYINT   - 255
SMALLINT           - 32767
UNSIGNED SMALLINT  - 65535
MEDIUMINT          - 8388607
UNSIGNED MEDIUMINT - 16777215
INT                - 2147483647
UNSIGNED INT       - 4294967295
BIGINT             - 9223372036854775807
UNSIGNED BIGINT    - 18446744073709551615 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-29T15:19:56.087

整数可以高达 2147483647。如果未签名，它可以是 4294967295。

有关所有整数值，[请参见此图表。](http://dev.mysql.com/doc/refman/5.0/en/integer-types.html)

# eclipse - Eclipse 3.5 的 CXF

> ID：11264448
> 
> 赞同：1
> 
> 时间：2012-06-29T15:17:46.290
> 
> 标签：eclipse, web-services, cxf, eclipse-3.6, eclipse-3.5

我有 Eclipse 3.5.2 并且我有一个 Web 服务，在 Windows-> Preferences 下我看不到 CXF，我知道它在 Eclipse 3.6 中可用，但有什么方法可以让它在 Eclipse 3.5 中可用？也许通过下载 CXF 罐子之类的？我的目标是从我的 Web 服务接口生成 WSDL 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T11:04:29.210

我正在使用日食靛蓝。所以我不确定这是否适合你。如果您转到帮助 > 安装新软件。查找我正在使用 Eclipse Indigo 的 Eclipse Web 工具平台 (WTP) 软件存储库 > [http://download.eclipse.org/webtools/repository/indigo](http://download.eclipse.org/webtools/repository/indigo)

现在它将列出不同的“Eclipse Web Tools Platform (WTP)”版本，选择最新的版本，您应该会在其下看到 CXF Web Services。我将安装整个平台。如果您愿意，也可以安装平台 sdk。有关更多信息，请参见下图。

[安装软件 http://www.greenkode.com/wp-content/uploads/2012/06/6-30-2012-12-58-24-PM.jpg](http://www.greenkode.com/wp-content/uploads/2012/06/6-30-2012-12-58-24-PM.jpg)

# fullcalendar - 停留在当月

> ID：11264449
> 
> 赞同：1
> 
> 时间：2012-06-29T15:17:51.800
> 
> 标签：fullcalendar

当我在 FullCalendar 的月视图中，然后说我回到 3 月的几个月并点击一个事件，然后点击浏览器的“返回”按钮，我怎样才能让浏览器知道回到 3 月? 目前，它只是回到当月。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T21:12:26.513

这是一种可能的解决方案：

当您将用户重定向到其他页面时，来自**eventClick回调。**还可以在 URL 中发送日历的当前日期、月份和年份。在该页面上从 URL 获取值并将它们存储在会话变量中。

这是获取完整日历的当前日期的方法：

```
var calCurrDate = $('#calendar').fullCalendar('getView').start;
var date = calCurrDate.getDate();
var month = calCurrDate.getMonth();
var year = calCurrDate.getFullYear(); 
```

现在在日历页面上检查是否定义了这些会话变量。如果已定义，请将以下属性添加到 fullCalendar

```
<cfif isDefined('SESSION.d')>
    <cfoutput>
        date: #SESSION.d#,
        month: #SESSION.m#,
        year: #SESSION.y#,
    </cfoutput>
</cfif> 
```

对于服务器端语言，我使用了 Coldfusion（我只知道这一点）。您可以轻松理解逻辑并将其翻译成您想要的语言。

注意：在日历页面结束时，您必须销毁会话变量。否则，每次刷新页面时，您都会被带到同一天、同一个月和同一年。

我希望这有帮助。谢谢

# java - 将单个特定方法打印到 Java 中的文件

> ID：11264453
> 
> 赞同：0
> 
> 时间：2012-06-29T15:18:38.993
> 
> 标签：java

我正在为一个学校项目开发一个基本的加密程序，我想拥有易于互换的密钥。就目前而言，我有一个加密类和一个解密类，有多种方法。其中一种方法是我要打印到文件的键。因为我将对这两个类进行许多更改（除了键），我希望能够仅将一个方法打印到文件中。我还需要能够再次加载它。有什么简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T15:27:15.573

您可以使用 java 序列化，因为您评论说您有一个要保存的字符串数组，您可以执行以下操作：

```
// save object to file
ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream(new File("/tmp/file")));
oos.writeObject(myArray); // where myArray is String[]

// load object from file
ObjectInputStream ois = new ObjectInputStream(new FileInputStream(new File("/tmp/file")));
String[] read = (String[]) ois.readObject(); 
```

一个工作示例；），保存应用程序执行时收到的参数。

```
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.util.Arrays;

public class TestSerialization {

    public static void main(final String[] array) throws FileNotFoundException, IOException, ClassNotFoundException {
        // save object to file
        ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream(new File("/tmp/file")));
        oos.writeObject(array); // where myArray is String[]

        // load object from file
        ObjectInputStream ois = new ObjectInputStream(new FileInputStream(new File("/tmp/file")));
        String[] read = (String[]) ois.readObject();

        System.out.println(Arrays.toString(read));
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T15:33:06.247

我发现用户 Speath 指出的序列化是一种非常好的方法。

如果您想在写入文件时更有选择性，可以使用简单的文件 I/O 写入文件，如下所示：

使用 FileWriter 类在文件系统上创建一个新文件，然后使用 BufferedWriter 启动一个 I/O 流以写入该文件：

```
// create a new file with specified file name
FileWriter fw = new FileWriter("myFile.log");

// create the IO strem on that file
BufferedWriter bw = new BufferedWriter(fw);

// write a string into the IO stream
bw.out("my log entry");

// don't forget to close the stream!
bw.close(); 
```

为了捕捉 IO 异常，整个事情必须用 try/catch 包围。

希望这可以帮助。

# c# - 具有基类和不同实现配置选项的 Automapper

> ID：11264455
> 
> 赞同：25
> 
> 时间：2012-06-29T15:18:53.420
> 
> 标签：c#, .net, automapper

我有两个类（MVC 视图模型），它们继承自一个抽象基类。

```
abstract class BaseModel { }

class Car : BaseModel 
{
    public string Speed { get; set; }
}

class Camper : BaseModel
{
    public int Beds { get; set; } 
} 
```

并希望使用基类配置 AutoMapper，例如：

```
Mapper.CreateMap<BaseModel, DataDestination>();

var someObj = new DataDastination();
Mapper.Map(instanceOfBaseModel, someObj); 
```

在这里我得到错误，因为 Automapper 没有 Car 或 Camper 的配置。尝试使用以下方式配置 Automapper：

```
Mapper.CreateMap<BaseModel, DataDestination>()
    .ForMember(dest => dest.SomeProp, mapper => mapper.MapFrom( .... )); 
```

在 MapFrom 中，我只看到基类的属性！如何配置 Automapper 以使用 BaseClass，以及 Car 和 Camper 的特定 ForMember 表达式？例如，如果是 Car，则从 this 映射此属性，如果是 Camper，则从其他位置映射此属性。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-06-29T21:15:27.637

这是描述[映射继承](http://docs.automapper.org/en/stable/Mapping-inheritance.html)的主题。

以下内容应该适合您：

```
Mapper.CreateMap<BaseModel, DataDastination>()
    .Include<Car, DataDastination>()
    .Include<Camper, DataDastination>();//.ForMember(general mapping)
Mapper.CreateMap<Car, DataDastination>();//.ForMember(some specific mapping)
Mapper.CreateMap<Camper, DataDastination>();//.ForMember(some specific mapping) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2020-02-14T18:32:09.583

使用 .IncludeAllDerived()

```
Mapper.CreateMap<BaseModel, DataDestination>().IncludeAllDerived()
Mapper.CreateMap<Car, DataDestination>();
Mapper.CreateMap<Camper, DataDestination>(); 
```

# facebook - Facebook fql 不显示照片和相册查询

> ID：11264457
> 
> 赞同：-1
> 
> 时间：2012-06-29T15:19:02.577
> 
> 标签：facebook, facebook-fql, photos

我正在使用 php-sdk 来显示用户的 facebook 信息。我已成功显示用户个人资料信息，但在获取任何相册或照片时，我收到了空白数据。我阅读的照片需要 access_token。此外，如果我将此查询放在 facebook graph api explorer 中，它会向我展示完美的结果。所以查询是正确的可能是我传递 url 的方式是错误的。

我没有得到这个问题。请帮忙。'; $app_secret = ''; $my_url = '';

```
 $config = array(
            'appId' => '<appid>',
            'secret' => '<appsecrete>',
           );

            $facebook = new Facebook($config);
            $user_id = $facebook->getUser();

            $code = $_REQUEST["code"];
            if($user_id) {
             //auth user
             if(empty($code)) {
                $dialog_url = 'https://www.facebook.com/dialog/oauth?client_id=' 
                    . $app_id . '&redirect_uri=' . urlencode($my_url) ;
                    echo("<script>top.location.href='" . $dialog_url . "'</script>");
              }

              //get user access_token
              $token_url = 'https://graph.facebook.com/oauth/access_token?client_id='
                . $app_id . '&redirect_uri=' . urlencode($my_url) 
                . '&client_secret=' . $app_secret 
                . '&code=' . $code;
              $access_token = file_get_contents($token_url);

             $fql_query_url = 'https://graph.facebook.com/'.'fql?q=SELECT+pid,src_small+FROM+photo+WHERE+aid+IN+(SELECT+aid+FROM+album+WHERE+owner=+me())&'.$access_token;
             $fql_query_result = file_get_contents($fql_query_url);
             $fql_query_obj = json_decode($fql_query_result, true);

          //display results of fql query
          echo '<pre>';
          print_r("query results:");
          print_r($fql_query_obj);
          echo '</pre>'; 
```

}
?>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T11:46:24.187

需要为 $dialog_url 变量添加一个参数，它是“范围”，它定义了为应用程序提供的权限

```
$dialog_url = 'https://www.facebook.com/dialog/oauth/?client_id='.$app_id.'&redirect_uri='.urlencode($my_url).'&scope=user_photos';
                    echo("<script>top.location.href='" . $dialog_url . "'</script>"); 
```

以供参考，

[http://developers.facebook.com/docs/reference/dialogs/oauth/](http://developers.facebook.com/docs/reference/dialogs/oauth/)

谢谢

什雷亚斯

# jquery - 带有 jQ uery 的 ASP.NET 控件。控制的特定版本

> ID：11264458
> 
> 赞同：0
> 
> 时间：2012-06-29T15:19:04.687
> 
> 标签：jquery, asp.net

下面是如何在控件中使用特定版本的 jQuery（之前已在页面上分配）并将其设置回之前的版本以获取剩余控件。

我知道这并不理想，但稍后会清理 who 应用程序。

提前致谢。

```
<!-- This would be set earlier on the page. Possibly at page level or in a previous control -->
<script type="text\javascript" src='jquery-1.7.1.js'></script>

<!-- This would at the start of the control -->
<script>
var $origJquery = null; //Should be unique var name for the control

if(typeof jQuery != 'undefined')
    $origJquery = jQuery.noConflict();
</script>

<script type="text\javascript" src='jquery-1.7.2.js'></script>

<script>
var $newJquery = jQuery.noConflict();

//Can use $newJquery here

</script>

<script>
//Set back when finished at end of control
if($origJquery != null)
{
    $ = $origJquery;
    $origJquery = null;
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T15:42:33.497

我会在加载默认版本之前加载特定（新）版本。

```
<script type="text\javascript" src='jquery-1.7.2.js'></script>

<script>

    // Assign it to the new name space
    var $ns = jQuery.noConflict();

</script> 
```

现在 jQuery 版本被分配给新的命名空间。然后

```
<script type="text\javascript" src='jquery-1.7.1.js'></script> 
```

在默认的 jQuery 命名空间 ($) 上无法访问默认版本。

新组件可以使用 $ns('.selector') 访问其版本。

在您的版本中，新命名空间仅在加载期间有效，如果您的新组件在加载后（准备就绪）执行操作，您就会遇到问题。

# android - On key down 循环直到 key up

> ID：11264464
> 
> 赞同：0
> 
> 时间：2012-06-29T15:19:28.457
> 
> 标签：android

我所拥有的是一个由按钮控制的搜索栏，而不是使用设置/获取进度的滑块。

我试图让搜索栏进度在用户按下按钮时增加，然后在他们抬起按钮时停止增加。我有一个 onkey 监听器，可以检测上下。我只是不确定将 setprogress 部分放在哪里，如果我在 ACTION_DOWN 上放置一个循环，那么它会循环而不是检测 ACTION_UP，如果我有一个用于 ACTION_DOWN 的 while 循环，似乎也会发生同样的情况。

我想我可能还必须设置 refreshDraweableState，但我也没有太多看。

可能我试图过多地使用搜索栏，但我会很感激任何帮助/建议。谢谢！

这是我的 keylistner，这是我一直在搞乱的地方。

```
public boolean onKey(View view, int keyCode, KeyEvent event) {
    builder.setLength(0);
    switch (event.getAction()){
        case KeyEvent.ACTION_DOWN:
            builder.append(event.getKeyCode());
            String text = builder.toString();
            Log.w("seekbar", text);
            textView.setText(text);
            while (sk.getProgress() < 100){
                sk.setProgress(sk.getProgress()+1);
                sk.refreshDrawableState();
                try {
                    Thread.sleep(50);
                } catch (InterruptedException e) {
                    break;
                }
            }
            break;
        case KeyEvent.ACTION_UP:
            break;
    }
    return true;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T15:37:29.990

您甚至需要能够在 ACTION_DOWN 中停止您的 while 循环，否则它将继续运行直到达到 99。

你的while循环也阻塞了UI线程，所以我会把它放在一个新线程中（不知道如何在普通Android上做到这一点，我使用Mono for Android），或者在ACTION_UP事件发生时停止该线程，或者进行另一个检查在你的while循环中打破它。

在 Android 的 Mono 中，这样做有点像这样：

```
public bool OnKey(View view, int keyCode, KeyEvent e)
{
    switch(e.Action)
    {
        case KeyEventAction.Down:
            Start();
        break;
        case KeyEventAction.Up:
            Stop();
        break;
    }
}

private volatile bool _shouldStop;

public void IncreaseProgress()
{
    while (!_shouldStop && sk.Progress < 100)
    {
        //Working
        RunOnUiThread(() => {
            sk.Progress = sk.Progress+1;
            sk.RefreshDrawableState();
        });
        Thread.Sleep(50);
    }
    //Terminating
}

public void Start()
{
    _shouldStop = false;
    Thread workerThread = new Thread(IncreaseProgress);
    workerThread.Start();
}

public void Stop()
{
    _shouldStop = true;
    workerThread.Stop();
} 
```

# android - 网页可以知道android虚拟键盘吗

> ID：11264465
> 
> 赞同：9
> 
> 时间：2012-06-29T15:19:30.770
> 
> 标签：android, jquery, browser, virtual-keyboard

我有带有 jquery 终端和隐藏文本区域（触发 Android 虚拟键盘）的[网页，我可以输入字符，但是当我输入几个命令时，内容隐藏在虚拟键盘后面。](http://terminal.jcubic.pl/android.html)终端内容正在滚动到底部，因为当我输入更多命令时它正在滚动。当我在手机中使用硬件键盘时，滚动是正确的（触摸滚动还没有工作）。

我添加了这个 CSS

```
.terminal textarea { top: 0; width:0; margin-left: -8px; pointer-events: none; } 
```

到以前

```
.terminal .clipboard {
    position: absolute;
    bottom: 0;
    left: 0;
    opacity: 0.01;
    filter: alpha(opacity = 0.01);
    filter: progid:DXImageTransform.Microsoft.Alpha(opacity=0.01);
    width: 2px;
}
.cmd > .clipboard {
    position: fixed;
} 
```

并在插件中有此代码（textarea 用于剪贴板）。

```
 self.click(function() {
     self.find('textarea').focus();
 }); 
```

我的问题是：**javascript 可以检测到虚拟键盘有多大吗？或者也许还有其他方法可以改变网页的大小，所以它只是在视觉部分**（而不是键盘所在的位置）？或者我的代码可能有问题，它不是为在移动设备上工作而设计的。即使用户安装不同**的键盘，键盘的大小是否始终相同？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T15:45:54.683

1 您可以使用元素中的[android:windowSoftInputMode](http://developer.android.com/guide/topics/manifest/activity-element.html#wsoft)属性在IME 弹出时在各种调整大小策略中进行选择。这些包括（不限于）：`<activity>``Manifest.xml`

`adjustResize`，这将调整您的 Activity 的内容视图（以及其中的 WebView）以适应剩余空间。

`adjustPan`，这将使内容视图充满整个屏幕，部分被 IME 的窗口遮挡。

玩这些可能已经给你你正在寻找的行为。

2 Android 在 IME 弹出时滚动 (Web)View 的默认行为是它试图保持光标可见。在您的情况下，您将光标（或：焦点）放在隐藏视图上。这解释了你看到的奇怪行为，我认为你最好改变你的实现。你为什么不首先使用可见的文本区域？您的文本必须在某个地方结束，对吗？然后 Android 将自动处理焦点/滚动。

作为一种解决方法：您可以尝试更智能地定位隐藏视图并不时清除其内容，从而避免滚动问题。当然，此选项的可行性取决于您的确切用例。

3 这将是您所问问题的答案，但我不确定这将如何帮助您（可能是因为我对 html 没有经验）：

要在您的 javascript 中获取 WebView 的高度（即屏幕大小 - IME 高度），请执行以下操作：

*   在您的清单中，将`android:windowSoftInputMode="adjustResize"`属性添加到您的元素。
*   像这样扩展您的外部布局：

    ```
    public class RelativeLayoutWithLayoutListener extends RelativeLayout {

    public interface LayoutListener {
        public void onLayout();
    }

    private LayoutListener mListener;

    public RelativeLayoutWithLayoutListener(Context context) {
        super(context);
    }

    public RelativeLayoutWithLayoutListener(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    public RelativeLayoutWithLayoutListener(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public void setLayoutListener(LayoutListener aListener) {
        mListener = aListener;
    }

    @Override
    protected void onLayout(boolean changed, int l, int t, int r, int b) {
        super.onLayout(changed, l, t, r, b);
        if (mListener != null) {
            mListener.onLayout();
        }
    }
    } 
    ```

*   将旧布局替换为 layout.xml 文件中新创建的布局。

*   在您的活动代码中，执行以下操作：

    ```
    public class MainActivity extends Activity {

    private RelativeLayoutWithLayoutListener mMainLayout;

    private WebView mWebView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        mMainLayout = (RelativeLayoutWithLayoutListener)findViewById(R.id.main_layout);

        mMainLayout.setLayoutListener(new LayoutListener() {

            @Override
            public void onLayout() {
                mWebView.loadUrl("javascript:setSize(" + mMainLayout.getWidth() + "," + mMainLayout.getHeight() + ")");             
            }
        });

        mWebView = (WebView)findViewById(R.id.webview);
    }
    } 
    ```

当然，在 loadUrl() 调用中，您必须调用您定义的 javascript 方法。如果您先进行一些计算，您当然也可以传入 IME 的高度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T08:51:52.057

从我所见，当虚拟键盘弹出时，页面没有调整大小（以适应较小的视图区域，在虚拟键盘打开时可见）。所以这不会给你的页面提示键盘是否启动。而且我真的不认为还有另一种获取该信息的方法。

您可以在查看用户代理的位置进行设置，如果是针对 Android 手机，当用户单击各种文本输入元素时，您可以在屏幕底部为虚拟键盘腾出一些空间。

对于键盘的尺寸，普通的 Android 可能有一个标准的尺寸或比例或百分比，但结合有很多 Android 模块的事实，加上有多种屏幕分辨率和屏幕比例的事实翻译无法为此设置固定数字（例如键盘高 x 像素或屏幕空间的 y%）。但是，您可以做出一个常识性的假设，即底部大约占屏幕的一半。

所以基本上，使用用户代理、屏幕分辨率和用户“点击”文本输入字段这一事实，您可以大致了解是否显示虚拟键盘，以及留出多少空间它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T15:01:08.293

如果您正在寻找即使在键盘弹出时也能保持终端内容可见的方法，则无需知道键盘大小。问题在于你的`"#shell"`身高。尝试在 Chrome（桌面）上打开开发者工具并调整窗口大小。您会看到`"#shell"`div 的高度始终适合设备高度，而不是内容区域高度。因此，当键盘弹出时，内容将在键盘的背面。为了使它起作用，您应该强制您的`"#shell"`高度适合内容区域。我尝试修改 css，它在我的 android 模拟器中正常工作。也`touch-scroll js`从您的页面中删除，这是不必要的。您可以将此 css 代码附加到您的 css 文件中。

```
#shell {
    position: fixed !important;
    top: 0; left: 0;
    width: 100% !important; height: 100% !important;
    margin: 0 !important; padding: 0 !important;
    -webkit-transition: none !important;
    -webkit-transform: none !important;
    overflow-y: visible !important;
}

#shell .terminal-output, #shell .cmd {
    margin: 10px;
} 
```

希望这有帮助。:)

# perl - 如何使用 HTTP 请求 (Perl) 发布内容

> ID：11264470
> 
> 赞同：12
> 
> 时间：2012-06-29T15:19:45.373
> 
> 标签：perl, http, lwp

```
use LWP::UserAgent;
use Data::Dumper;

my $ua = new LWP::UserAgent;
$ua->agent("AgentName/0.1 " . $ua->agent);
my $req = new HTTP::Request POST => 'http://example.com';
$req->content('port=8', 'target=64'); #problem
my $res = $ua->request($req);

print Dumper($res->content); 
```

如何使用 $req->content 发送多条内容？$req->content 期望什么样的数据？

它只发送最后一个。

编辑：

发现如果我将它格式化为 'port=8&target=64' 它可以工作。有没有更好的办法？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-29T15:23:11.343

```
my $ua      = LWP::UserAgent->new(); 
my $request = POST( $url, [ 'port' => 8, 'target' => 64 ] ); 
my $content = $ua->request($request)->as_string(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-12-12T18:34:54.070

给出的答案对我不起作用。我仍然遇到与OP相同的问题。

[LWP::UserAgent](http://search.cpan.org/~ether/libwww-perl-6.15/lib/LWP/UserAgent.pm)的文档需要哈希或数组引用。

这有效：

```
my $url = 'https://www.google.com/recaptcha/api/siteverify';
my $ua      = LWP::UserAgent->new(); 

my %form;
$form{'secret'}='xxxxxxxxxxxxxxxxxxxxxxx';
$form{'response'}=$captchaResponse;

my $response = $ua->post( $url, \%form ); 
my $content = $response->as_string(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-03-16T09:33:20.313

一起使用 LWP::UserAgent 和 HTTP::Request 因为它也很常见，如果不是更频繁的练习，我对标准的 POST 和 GET / request 几乎没有在 SO 除了 json 之外讨论过，因为它们非常广泛多数使用。

邮政

```
 my $ua  = LWP::UserAgent->new();
    my $req = new HTTP::Request( 
       'POST' => "http://url/path", 
       ['Content-Type' => 'application/x-www-form-urlencoded; charset=UTF-8'],
       'par1=par1value&par2=par2value'
    );
    $ua->request($req); 
```

同样对于 GET

```
 my $ua  = LWP::UserAgent->new();
    my $req = new HTTP::Request( 
       'GET' => "http://url/path", 
       ['Content-Type' => 'application/x-www-form-urlencoded; charset=UTF-8'],
       'par1=par1value&par2=par2value' # or I presume attaching the query string directly to the url
    );
    $ua->request($req); 
```

另一种格式形式，其中前两个参数（方法和url）没有融合成一个，不像前面那样，而是分开

```
my $request = HTTP::Request->new( 'POST', $url, [ parameter1 => 'parameter1Value' ] );
request->header( 'Content-Type' => 'application/json' ) 
```

有一个类似的问题，但只考虑 LWP 和 Json，但它可能只能通过使用 LWP 和 HTTP::Request 来完成已经很明显了

[如何使用 LWP 发出 JSON POST 请求？](https://stackoverflow.com/questions/4199266/how-can-i-make-a-json-post-request-with-lwp)

注意：我也特别发布了这个，因为即使在文档 [https://metacpan.org/pod/HTTP::Request中也没有提到 POST/GET 的具体/简洁用法](https://metacpan.org/pod/HTTP::Request)

# mysql - 解释 MySQL 中的子查询

> ID：11264477
> 
> 赞同：2
> 
> 时间：2012-06-29T15:20:01.983
> 
> 标签：mysql, subquery

我发现很难学习如何在 MySQL 中制定子查询

例如，此代码似乎不起作用。

```
SHOW COLUMNS FROM $table WHERE Field NOT IN (
    SELECT column_name FROM INFORMATION_SCHEMA.COLUMNS
    WHERE table_name = $table
    AND column_name LIKE 'project_images_%'
); 
```

有没有人有什么建议？或关于子查询的好资源？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T15:30:51.157

您的查询很好，您只是忘记了引号。

```
SHOW COLUMNS FROM $table WHERE Field NOT IN (
    SELECT column_name FROM INFORMATION_SCHEMA.COLUMNS
    WHERE table_name = '$table' 
    AND column_name LIKE 'project_images_%'
); 
```

请注意添加到子查询中 where 子句的引号。

# php - php cURL错误上传未对齐的文件大小

> ID：11264478
> 
> 赞同：0
> 
> 时间：2012-06-29T15:20:04.063
> 
> 标签：php, curl, centos

我正在尝试将文件从一台服务器传输到另一台服务器。我正在使用带有 curl 的 php5

```
$fp = fopen("/tmp/help.txt", "r");    
$url = "ftp://admin:support@portal-test.uk.xxx.com:21/tmp/help.txt";    
$ch = curl_init();        
curl_setopt($ch, CURLOPT_URL, $url);     
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);     
curl_setopt($ch, CURLOPT_UPLOAD, 1);     
curl_setopt($ch, CURLOPT_INFILE, $fp);     
//curl_setopt($ch, CURLOPT_FTPASCII, 1);     
curl_setopt($ch, CURLOPT_INFILESIZE, filesize(__FILE__));     
$result = curl_exec($ch);         
print_r(curl_getinfo($ch));    
echo "\n\ncURL error number:" .curl_errno($ch);    
echo "\n\ncURL error:" . curl_error($ch);   
curl_close($ch); 
```

我收到如下错误：

```
Array
(
    [url] => ftp://admin:support@portal-test.uk.xxx.com:21/tmp/help.txt
    [content_type] => 
    [http_code] => 550
    [header_size] => 0
    [request_size] => 0
    [filetime] => -1
    [ssl_verify_result] => 0
    [redirect_count] => 0
    [total_time] => 0.033012
    [namelookup_time] => 0.015422
    [connect_time] => 0.015798
    [pretransfer_time] => 0
    [size_upload] => 0
    [size_download] => 0
    [speed_download] => 0
    [speed_upload] => 0
    [download_content_length] => 0
    [upload_content_length] => 0
    [starttransfer_time] => 0
    [redirect_time] => 0
)
cURL error number:9
cURL error:Server denied you to change to the given directory 
```

我想将文件从 /tmp/ 传输到另一台服务器 /tmp/。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T15:58:09.223

您有权访问该目录吗？您是否尝试过使用标准 FTP 客户端登录 FTP 服务器，然后切换到该目录？我很确定您无法通过 FTP 访问 /tmp 目录。该错误只是将其传达给您。

您可以将该文件保存在您可以通过 FTP 登录访问的其他位置，然后运行该脚本。您还可以查看 SFTP，看看对于有权访问该文件夹的用户来说，这是否适合您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-24T11:23:44.190

`cURL error:Uploaded unaligned file size (6 out of 1197 bytes)`由于提供了错误的文件大小，您会收到错误消息：

```
$fp = fopen("/tmp/help.txt", "r");    
// ...
curl_setopt($ch, CURLOPT_INFILESIZE, filesize("/tmp/help.txt")); // XXX: was __FILE__ 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-17T16:46:46.527

这是我的脚本

```
<?php
error_reporting(E_ALL|E_STRICT);
ini_set('display_errors', 1);
date_default_timezone_set('Europe/London');
set_include_path('.' . PATH_SEPARATOR . '/opt/eposdatatransfer/application/../library' . PATH_SEPARATOR . get_include_path());
require('Zend/Date.php');
$use_pasv = true;$ftp_server = "172.16.0.65"; 
$ftp_user_name = "h3111142";
$ftp_user_pass = "seismic";
$ftp_remote_path = "/tmp";
$ftp_remote_file = array("/files/nas1/epos4/eposbulk/h3111142/seismic/Line_58/0000000500900bc1.000000.00000005.headers","/files/nas1/epos4/eposbulk/h3111142/seismic/Line_58/0000000500900bc1.000000.00000005.headers.ext0","/files/nas1/epos4/eposbulk/h3111142/seismic/Line_58/0000000500900bc1.000000.00000005.history","/files/nas1/epos4/eposbulk/h3111142/seismic/Line_58/0000000500900bc1.000000.00000005.pds","/files/nas1/epos4/eposbulk/h3111142/seismic/Line_58/0000000500900bc1.000000.00000005.pkey","/files/nas1/epos4/eposbulk/h3111142/seismic/Line_58/0000000500900bc1.000000.00000005.traces","/files/nas1/epos4/eposbulk/h3111142/seismic/Line_58/0000000500900bc1.000000.00000005.traces.ext0",) ;
$ftp_local_file = array(59,59,59,59,59,59,59,) ;
$emailNotifications = array();
$GLOBALS['start']="";
$GLOBALS['current']="";
date_default_timezone_set ( "Europe/London" );

$conn_id = ftp_connect($ftp_server);
if (!$conn_id){
    echo "Unable to connect to $ftp_server";
    updateStatus($ftp_local_file[$count], 0);
    exit(1);
}

$login_result = ftp_login($conn_id, $ftp_user_name, $ftp_user_pass);

if (!$login_result){
    echo "Inavalid login/password for $ftp_user_name on $ftp_server";
    updateStatus($ftp_local_file[$count], 0);
    ftp_close($conn_id);
    exit(2);
}

ftp_pasv($conn_id, $use_pasv);

if (!ftp_chdir($conn_id, $ftp_remote_path)){
    echo "Invalid remote path $ftp_remote_path";
    ftp_close($conn_id);
    updateStatus($ftp_local_file[$count], 0);
    exit(3);
}   

$count = 0;
foreach($ftp_remote_file as $key => $value){
    updateStatus($ftp_local_file[$count], 2);

    if(!empty($value)){
        if (ftp_put($conn_id, $value, $value, FTP_BINARY)){
            updateStatus($ftp_local_file[$count], 1);

        }else{
            $use_pasv = false;
            ftp_pasv($conn_id, $use_pasv);

            if (ftp_put($conn_id, $value, $value, FTP_BINARY)){
                updateStatus($ftp_local_file[$count], 1);
            }else{
                updateStatus($ftp_local_file[$count], 0);
                ftp_close($conn_id);
                echo "Error while uploading $value";
                exit(4);
            }
        }
    }
    $count++;
}

ftp_close($conn_id);

$GLOBALS['current'] = null;
sendmail($emailNotifications,$ftp_remote_file, $ftp_local_file);

function updateStatus($id, $status){

    $con = mysql_connect('hero','eposdata','support');
    if (!$con)
      {
      die('Could not connect: ' . mysql_error());
      }

    mysql_select_db('eposdatatransfer', $con);

    //$mysqldate = date( 'Y-m-d H:i:s');
    $mysqldate = new Zend_Date();
    if($status == 2){
        if($GLOBALS['current']==$id){
            return;
        }else{
            $GLOBALS["current"] = $id;
        }
        $GLOBALS['start'] = $mysqldate;
        $mysqldate = new Zend_Date($mysqldate, Zend_Date::ISO_8601);
        $start = $mysqldate->toString('Y-MM-dd HH:mm:ss');
        //echo $start;
        mysql_query("UPDATE queue SET status=$status, started='$start' WHERE id=$id");
    }elseif($status == 1){
        $dateDiff = ($mysqldate->getTimestamp() - $GLOBALS['start']->getTimestamp()) ;

        $complete = $mysqldate->toString('Y-MM-dd HH:mm:ss');
        mysql_query("UPDATE queue SET status=$status, completed='$complete', duration='$dateDiff' WHERE id=$id");

    }else{
        mysql_query("UPDATE queue SET status=$status WHERE id=$id");
    }

    mysql_close($con);

}

function sendmail($emailNotifications, $ftp_remote_file, $idArr){   
    $message = "";

    $count = 0;
    $data = array();
    foreach($ftp_remote_file as $key => $value){
        if($GLOBALS['current']==$idArr[$count]){
            //return;
        }else{
            $GLOBALS['current'] = $idArr[$count];
            $data = getLineName($idArr[$count]);
            $message =  $message .  $data['data_name'] . "
";
        }

        $count++; 
    }

    $message = $message . "
Downloaded to Woking" ;

    $message = $message . "
This is an automated message. DO NOT REPLY";

    // In case any of our lines are larger than 70 characters, we should use wordwrap()
    $message = wordwrap($message, 70);

    //Send
    foreach($emailNotifications as $key => $value){
        mail("$value", 'Transfer Complete Line: ' . $data['line_name'], $message);
    }
}

function getLineName($id){
    $con = mysql_connect('hero','eposdata','support');
    if (!$con)
      {
      die('Could not connect: ' . mysql_error());
      }

    mysql_select_db('eposdatatransfer', $con);

    $result = mysql_query("select * from queue WHERE id=$id");
    $row = mysql_fetch_assoc($result); 

    return $row;

} 
```

# sql-server - T-SQL，选择进入

> ID：11264481
> 
> 赞同：2
> 
> 时间：2012-06-29T15:20:21.733
> 
> 标签：sql-server

在 SQL Server 中，如何将多个值选择到临时表中？

例如，我想将 'A' ， 'B' 放入#tmp 表中，该怎么做？

```
select 'A'
union
select 'B'
into #tmp 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T15:25:11.993

您需要将“Into”放在第一个选择上，另外，如果您真的在做文字，那么您必须给它一个列名的标签。

```
Select 'A' As 'Label'
Into #tmp
Union
Select 'B' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T15:23:53.227

将其包装为子查询（或 CTE）

```
select * into #tmp
from
(
    select col='A'
    union select col='B'
) sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T15:22:57.617

```
insert #tmp (yourcol)
  select 'A' union 
  select 'B' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T15:24:33.890

```
insert into #tmp
select 'A'
union
Select 'B' 
```

# .net - 无法在服务器上设置 DLL 的路径，因为不允许创建名为 .NETFramework 的文件夹

> ID：11264483
> 
> 赞同：1
> 
> 时间：2012-06-29T15:20:25.540
> 
> 标签：.net

我使用 .NET 4 在 64 位机器上开发了一个程序。它引用了下图中显示的 DLL。我正在尝试将程序部署到 32 位服务器。因为服务器是 32 位的，所以我们需要创建通向 DLL 的目录结构（我不能改变这个结构，同样的程序部署在 64 位机器上，所以路径需要保持一致）。但是当我尝试创建文件夹“...\Microsoft\Framework\.NETFramework”时，Windows Server 会提示“您必须键入文件名”。它不允许我在开始时创建一个带有句点的文件夹。我怎样才能做出这样的路径？如何以句点开头的文件夹名称？SA 最近在此服务器上安装了 .NET 4，但未创建此路径。

![在此处输入图像描述](../Images/c6b21cc62c5c12eb9f5189d4cb0e19f3.png)

**更新**也许安装出了点问题？当我查看 GAC (C\Windows\Assembly) 时，我没有看到其中的 .net 4 DLL。如果我正确地获得了 .NET 4 DLL，那么一切都应该“正常工作”，对吗？

![在此处输入图像描述](../Images/445951b2a693f2e2db98e896e7251dfb.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T15:26:59.113

> 它引用了下图中显示的 DLL。我正在尝试将程序部署到 32 位服务器。因为服务器是 32 位的，所以我们需要创建通向 DLL 的目录结构（我不能改变这个结构，同样的程序部署在 64 位机器上，所以路径需要保持一致）。

作为 .NET Framework 本身的一部分安装的任何 DLL 都应该在 GAC 中。您不需要创建此路径，或者根本不需要担心路径 - 只需*从 GAC*引用 DLL而不是绝对路径，并确保您使用的是任何依赖项的 32 位版本，它应该“只是工作”。

# forms - 如何在 Symfony 2 表单字段中设置默认值？

> ID：11264491
> 
> 赞同：2
> 
> 时间：2012-06-29T15:20:41.237
> 
> 标签：forms, symfony, validation

我一直在尝试使用`Symfony 2`.

所以我按照[教程](http://symfony.com/doc/current/book/forms.html)，我创建了一个特殊的类来创建表单和处理控制器外部的验证过程（如文档中所示）

但是现在我需要自动填写一个字段，我听说我必须在 ProductType.php 中完成，其中创建了表单（用于我的产品）。

但我不知道该怎么做，这是我在 ProductType.php 中的 buildForm 函数：

```
class QuotesType extends AbstractType
{
    private $id;

    public function __construct($id){
        $this->product_id = $id;
    }

    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder
            ->add('user_name',              'text')
            ->add('user_lastname',          'text')
            ->add('user_email',             'email')
            ->add('user_comments',          'textarea')
            ->add('user_product_id',        'hidden', array(
                'data' => $this->product_id,
            ));
        ;
    } 
```

它显然不起作用，因为我收到一个 SQL 错误，说我的字段为空。

如何为 user_product_id 设置默认值？我应该直接对对象做吗？

编辑：

这是我的实体代码的一部分：

```
namespace QN\MainBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Validator\Constraints as Assert;

/**
 * QN\MainBundle\Entity\Quotes
 *
 * @ORM\Table()
 * @ORM\Entity(repositoryClass="QN\MainBundle\Entity\QuotesRepository")
 */
class Quotes
{

    public function __construct($p_id)
    {
        $this->date = new \Datetime('today');
    }
    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @var integer $user_product_id
     *
     * @ORM\Column(name="user_product_id", type="integer")
     */
    private $user_product_id = "1";

    /**
     * @var datetime $date
     *
     * @ORM\Column(name="date", type="datetime")
     */
    private $date; 
```

我的控制器：

```
public function requestAction($id)
    {
        $repository = $this->getDoctrine()
                           ->getEntityManager()
                           ->getRepository('QNMainBundle:Categories');
    $categories = $repository->findAll();

    $quote = new Quotes($id);
    $form = $this->createForm(new QuotesType(), $quote);

    $formHandler = new QuotesHandler($form, $this->get('request'), $this->getDoctrine()->getEntityManager());

    if( $formHandler->process() )
    {
        return $this->redirect( $this->generateUrl('QNMain_Product', array('id' => $id)) );
    }

    return $this->render('QNMainBundle:Main:requestaform.html.twig', array(
        'categories' => $categories,
        'id' => $id,
        'form' => $form->createView(),
    ));

} 
```

我的处理程序：

```
namespace QN\MainBundle\Form;

use Symfony\Component\Form\Form;
use Symfony\Component\HttpFoundation\Request;
use Doctrine\ORM\EntityManager;
use QN\MainBundle\Entity\Quotes;

class QuotesHandler
{
    protected $form;
    protected $request;
    protected $em;

    public function __construct(Form $form, Request $request, EntityManager $em)
    {
        $this->form    = $form;
        $this->request = $request;
        $this->em      = $em;
    }

    public function process()
    {
        if( $this->request->getMethod() == 'POST' )
        {
            $this->form->bindRequest($this->request);

            if( $this->form->isValid() )
            {
                $this->onSuccess($this->form->getData());

                return true;
            }
        }

        return false;
    }

    public function onSuccess(Quotes $quote)
    {
        $this->em->persist($quote);
        $this->em->flush();
    }

} 
```

我还把`Date`我尝试在实体中设置的内容放在这里，我可能在这两种情况下都做错了，因为我也不能让它工作..日期不在`buildForm`函数中，我不知道我是否应该..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-07-22T20:25:39.283

另一种方法是创建[表单类型扩展](http://symfony.com/doc/current/cookbook/form/create_form_type_extension.html)：

```
namespace App\Form\Extension;

// ...

class DefaultValueTypeExtension extends AbstractTypeExtension
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        if (null !== $default = $options['default']) {   
            $builder->addEventListener(
                FormEvents::PRE_SET_DATA,
                static function (FormEvent $event) use ($default) {
                    if (null === $event->getData()) {
                        $event->setData($default);
                    }
                }
            );
        }
    }

    public function configureOptions(OptionsResolver $resolver)
    {
        $resolver->setDefault('default', null);
    }

    public static function getExtendedTypes(): iterable
    {
        yield FormType::class;
    }
} 
```

现在任何可能的值都可以默认传递给任何表单字段：

```
$form->add('user', null, ['default' => $this->getUser()]);
$form->add('user_product_id', null, ['default' => 1]); 
```

当您没有机会挂钩到绑定对象的初始化过程时，此方法特别有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T15:55:21.487

您在这里尝试做的是创建一个安全漏洞：任何人都可以在`user_product_id`现场注入任何 ID 并欺骗您的应用程序。更不用说渲染一个字段而不显示它是没用的。

您可以`user_product_id`在实体中设置默认值：

```
/**
 * @ORM\Annotations...
 */
private $user_product_id = 9000; 
```

# git - 恢复 Git 存档

> ID：11264496
> 
> 赞同：0
> 
> 时间：2012-06-29T15:20:55.433
> 
> 标签：git, git-archive

我已经按照指南并通过执行以下操作创建了我的 git 存储库的 zip 存档：

```
git archive HEAD --format=zip > c:\myarchive.zip 
```

我想这样做的原因是我已经完成了项目，所以我将删除我一直在进行开发的 VM，但我想要备份我所做的工作，以便我可以如果需要，请稍后参考。但是，我不知道如何打开创建的 zip 文件。

通常，我会双击一个 zip 文件来打开它，但是当我这样做时，我会看到这个错误：

```
Windows cannot open the folder.
The Compressed (zipped) Folder 'C:\myarchive.zip' is invalid.' 
```

我已经尝试过几次重新创建 zip 文件，但它没有改变任何东西。有什么想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-29T20:57:31.510

**警告** `git archive`不会创建您的 git 存储库的存档；它创建一个存档文件，其中包含给定提交内容的快照。

要创建真正的存档（如果您不能合理地推送到安全的存储库），您应该使用`git bundle`并确保包含所有分支。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T15:22:33.620

解压到一个目录。

git archive 命令似乎是一种帮助您创建 zip 存档的方法，但假定使用[zip 工具](http://www.7-zip.org/download.html)来解压缩。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T16:34:10.550

不太清楚为什么要这样做（除了看看是否可以）。如果您在 Git 上苦苦挣扎（这是一个学习曲线），我们在经历相同过程时制作了一些视频。我们记录了帮助我们的人... [http://www.ava.co.uk/git](http://www.ava.co.uk/git)希望他们有所帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-21T09:32:53.317

尝试使用`powershell`. 尝试一下`cmd`，它就像一个魅力。

# nginx - 我应该为高流量网站使用什么虚拟主机设置？

> ID：11264502
> 
> 赞同：0
> 
> 时间：2012-06-29T15:21:11.097
> 
> 标签：nginx, amazon-web-services, hosting, high-traffic, google-compute-engine

我对处理高流量网站相当陌生，我正在寻找一种能够很好地扩展到未来的设置。

我的网站目前使用一个主要脚本来提取数据并将其存储到数据库中。网站的其余部分主要是从数据库中展示这些数据。

我一直在研究使用 Amazon Web Services (EC2) 或 Google Compute Engine 运行主脚本的可能性。然后将该数据传输到更典型的网络托管服务。我不确定我需要担心的一件事是负载平衡，我已经看到使用 NGINX 进行负载平衡可以帮助提高性能。

我的目标是让网站在 99.99% 的时间内启动并尽可能快地执行脚本。如果出现问题，最好有一个很好的支持。

欢迎任何想法、意见或建议。我正在尝试学习如何处理这个问题，因为我有几个其他网站目前正在增长，并且在不久的将来可能需要这样的设置。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T20:10:41.533

Google Compute Engine 仍处于早期阶段。仅出于这个原因，我建议使用 EC2。使用 EC2，您拥有所需的所有功能。ELB 可以在任意数量的服务器之间进行无缝负载平衡，这将有助于 99.99% 的正常运行时间。

使用 CloudFormation，您可以定义扩展模板以在集群环境中运行该脚本。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-29T14:00:41.740

只需为自己找到一个具有良好 SLA 的好主机，在云中运行关系数据库就会在您确实获得高数据库负载时提出问题。

不要被愚弄了，云是解决某些问题的一个非常好的解决方案。但不是全部！NoSQL 以及云和 NoSQL 的组合也是如此。做你自己的研究，不要被营销机器和不做功课的人骗了。

负载平衡很好，但你的数据库的大变化是你遇到的第一个瓶颈。在需要之前不要优化东西！

如果您要问我，请为自己找到一个不错的专用（非虚拟）服务器，并提供不错的 SLA 和备份计划。

计算 99.9% 的正常运行时间实际上是多少，并意识到只要您有一个体面的 SLA 和适当的备份，达到这个目标就没有问题。

你总是可以从铁到云，..反过来就是另一回事了。

# excel - 为 Excel 图表引用宏中的上一张表

> ID：11264503
> 
> 赞同：1
> 
> 时间：2012-06-29T15:21:11.690
> 
> 标签：excel, worksheet, vba

我希望能够使用 VBA 引用工作簿中的下一个工作表，但避免引用工作表名称，因为我希望能够将宏应用于许多不同的工作簿。

我正在编写一个用于格式化 Excel 图表的 Excel 宏。在图表的系列标题中，我想让系列名称引用下一个工作表中的单元格。

我尝试了以下不起作用的方法：

```
ActiveChart.SeriesCollection(1).Name = "='ActiveChart.Next.Select'!$B$1" 
```

但是，这是行不通的。

获取图表的系列名称字段以引用宏中以下**工作表中的单元格的最有效方法是什么？**

我也尝试了以下方法，但也不起作用：

```
ActiveChart.SeriesCollection(1).Name = "=Sheets(1)!$B$1" 
```

请记住，这是一个由图表构成的工作簿，然后是工作表、图表、工作表等......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T04:22:18.503

你可以使用这个单线

`ActiveChart.SeriesCollection(1).Name = "='" & Sheets(ActiveChart.Parent.Parent.Name).Next.Name & "'!B1`

1.  `Sheets(ActiveChart.Parent.Parent.Name`返回下一张工作表的名称。
2.  在引用工作表名称时，这对`'`很重要。即名为 My Sheet 的工作表将无法正常工作`My Sheet!B1`，它必须是 `'My Sheet'!B1`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T16:10:40.137

看起来您正在尝试放置 VBA 代码而不是经典的 Excel 公式参考。我从未尝试过，但我认为它不会起作用。如果您想将某些内容引用到单元格，则必须使用 =、sheetname、!、单元格地址等良好的旧式清晰语法创建公式：

```
=Sheet1!A1 
```

您当然可以使用 VBA 为您创建此公式并将其分配给字段。试试这个代码：

```
Dim ws As Worksheet
Dim formula As String

Set ws = ActiveSheet.Next
formula = "=" & ws.name & "!A1"

ActiveChart.SeriesCollection(1).name = formula 
```

# python - 如何使用 python 获取 eumetsat 图像像素的纬度和经度？

> ID：11264508
> 
> 赞同：6
> 
> 时间：2012-06-29T15:21:42.517
> 
> 标签：python, geocoding, geospatial, satellite-image, proj

我有一个地球静止 eumetsat 卫星的 3712x3712 像素大小的图像。地球周围有一些黑色，因此图像看起来像这样：

![不是 eumetsat 图像的示例图像](../Images/afd7636eca4ea97026c7a22ce3aa2a52.png)

对于地球的每个像素，我想得到它的纬度和经度。我知道有 pyproj 并且我能够像这样实例化一个投影：

```
sat = pyproj.Proj('+proj=geos +lon_0 +h=035785831.0 +x_0=0 +y_0=0') 
```

但是获取像素的纬度（使用图像`sat(x,y,inverse=True)`中像素`x`的`y`坐标）显然是不可能的，因为投影不知道我图像的尺寸（3712x3712）。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T15:11:53.440

我认为您使用的是正确的投影库和设置。

典型的像素分辨率（km's per pixel）在 eumetsat 网站上报告在[这里](http://www.eumetsat.int/groups/ops/documents/document/pdf_typ_geomet_acc_msg-1-2.pdf) 它报告大约每像素 3km。

您可以通过在经线上将 lon/lat 转换为 x,y 并将其除以像素数（-81 度，81 度是最大范围，请参阅 eumetsat 站点以获取参考，[http://www. eumetsat.int/](http://www.eumetsat.int/) ):

```
import pyproj
sat = pyproj.Proj('+proj=geos +lon_0 +h=035785831.0 +x_0=0 +y_0=0')
x,y =  sat( 81.299, 0, radians = False, errcheck = True)
print (x * 2.0 / 3712.0 ) / 1000.0 
```

将为您提供符合 eumetsat 提供的信息的 2.927 值。

接下来，您可以通过定义一组众所周知的地图点（例如海岸特征）、确定它们的 x/y 位置并在线查找它们的纬度/经度坐标来进一步校准。您可以尝试使用一系列像素分辨率并检查哪个最适合或使用更精细的例程。

分辨率可能取决于您与赤道的距离，请参见[此处](http://www.sat.dundee.ac.uk/pdusfaq.html)）。因此，您可能需要在多个纬度使用上述例程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-14T09:08:39.640

首先，这不是 EUMETSAT 图像。您的图像显示澳大利亚，地球同步 EUMETSAT 卫星位于（大约）（0°N，0°E）和（0°N，41.5°E）上方，用于零度服务 (ZDS) 和印度洋数据覆盖 (IODC) ) 服务，分别。两种观点都看不到澳大利亚。您的卫星图像可能来自日本气象厅 (JMA) 运营的[多功能运输卫星 (MTSAT)成像仪，直到 2015 年被 HIMAWARI 取代。](https://en.wikipedia.org/wiki/Multi-Functional_Transport_Satellite)

要从 Meteosat SEVIRI、MTSAT、HIMAWARI AHI 或任何其他地球观测成像仪获取图像中像素的地理位置，您还可以考虑使用[satpy](/questions/tagged/satpy "显示标记为“satpy”的问题")库读取数据：

```
from satpy import Scene
from glob import glob
filenames = glob('/path/to/your/files/*')  # for SEVIRI, can be HRIT, Native, or NetCDF
sc = Scene(filenames=filenames)
sc.load(["IR_108"], upper_right_corner="NE")
print(sc["IR_108"].attrs["area"].get_lonlat_from_array_coordinates(1000, 2000)) 
```

这使：

`(-24.259016114751823, -3.9842388279769465)`

对于地球静止图像，这不是最快的方法，因为答案是不变的，所以您不需要实际读取数据。但是，使用经过良好测试和广泛使用的库可以降低您出错的风险。至少，它可以作为参考。请记住，对于许多卫星成像仪，不同的通道具有不同的空间分辨率，因此答案可能取决于通道。1 级数据也可以存储为先南后北，这样简单的阅读和显示就会在图像的上部显示南部而在下部显示北部，这与映射约定相反。因此，值得验证您的结果是否准确。

# jquery - 尝试在 span 中使用 html 块为页面上的多个图像设置 img alt 标签。

> ID：11264512
> 
> 赞同：0
> 
> 时间：2012-06-29T15:21:59.973
> 
> 标签：jquery, html, jquery-selectors, css-selectors

我希望标题是不言自明的。

这是我的 HTML（其中有很多）：

```
<div class="shopTextWrapper">
                <div class="shop_item"> 
                    <a href="#dialog2" name="modal">
                    <img src="objetdart/images_sm/ethanol-i.jpg" width="75" height="75"></a> 
                </div>
                <br clear="all" />
                <p class="desc_text">
                Ethanol
                </p>
            </div> 
```

我当前的 jQuery（不工作）：

```
$(document).ready(function() {
    $('img').each(function(){
    var $altText = $(this).find('div p.desc_text');
    $('img').attr('alt', $altText);
    });
}); 
```

我需要找到包含在父 div 中的每个 span desc_text，该父 div 还包含适当的图像。我目前正在返回对象 Object。

任何想法如何获取包含在 shopTextWrapper div 中的图像的标题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T15:27:30.000

```
$('img').each(function(){
    var $altText = $(this).closest('div.shopTextWrapper').find(".desc_text").text();
    $(this).attr('alt', $altText);
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T15:25:27.210

```
var $altText = $(this).parents('.shop_item').next($('p.desc_text')).text(); 
```

# .net - 创建可导出的自签名证书

> ID：11264520
> 
> 赞同：1
> 
> 时间：2012-06-29T15:22:15.213
> 
> 标签：.net, security, winapi, x509certificate2

我正在尝试在 Windows 机器上创建一个自签名证书。我希望证书是可导出的（甚至是私钥）。但是，我在完成这项任务时遇到了一些困难。

我发现了一些指向 WIN32 调用的网站。当我在 Windows XP 上运行代码时，证书存储在个人证书中，可以很好地导出。当我在 Windows 7 64 位上运行此代码时，我得到的证书没有错误，但证书不可导出。然后我不能将它用于我分配证书的网站。

```
 Certificate.Check(Certificate.NativeMethods.CryptAcquireContextW(
                out providerContext,
                containerName,
                null,
                1, // PROV_RSA_FULL
                8)); // CRYPT_NEWKEYSET

            Certificate.Check(Certificate.NativeMethods.CryptGenKey(
                providerContext,
                1, // AT_KEYEXCHANGE
                1, // CRYPT_EXPORTABLE
                out cryptKey));

            IntPtr errorStringPtr;
            int nameDataLength = 0;
            byte[] nameData;

            // errorStringPtr gets a pointer into the middle of the x500 string,
            // so x500 needs to be pinned until after we've copied the value
            // of errorStringPtr.
            dataHandle = GCHandle.Alloc(commonName, GCHandleType.Pinned);

            if (!Certificate.NativeMethods.CertStrToNameW(
                0x00000001, // X509_ASN_ENCODING
                dataHandle.AddrOfPinnedObject(),
                3, // CERT_X500_NAME_STR = 3
                IntPtr.Zero,
                null,
                ref nameDataLength,
                out errorStringPtr))
            {
                string error = Marshal.PtrToStringUni(errorStringPtr);
                throw new ArgumentException(error);
            }

            nameData = new byte[nameDataLength];

            if (!Certificate.NativeMethods.CertStrToNameW(
                0x00000001, // X509_ASN_ENCODING
                dataHandle.AddrOfPinnedObject(),
                3, // CERT_X500_NAME_STR = 3
                IntPtr.Zero,
                nameData,
                ref nameDataLength,
                out errorStringPtr))
            {
                string error = Marshal.PtrToStringUni(errorStringPtr);
                throw new ArgumentException(error);
            }
            Console.WriteLine("THIS IS CHANGED");

            dataHandle.Free();

            dataHandle = GCHandle.Alloc(nameData, GCHandleType.Pinned);
            Certificate.CryptoApiBlob nameBlob = new Certificate.CryptoApiBlob(
                nameData.Length,
                dataHandle.AddrOfPinnedObject());

            Certificate.CryptKeyProviderInformation kpi = new Certificate.CryptKeyProviderInformation();
            kpi.ContainerName = containerName;
            kpi.ProviderType = 1; // PROV_RSA_FULL
            kpi.KeySpec = 1; // AT_KEYEXCHANGE

            certContext = Certificate.NativeMethods.CertCreateSelfSignCertificate(
                IntPtr.Zero,
                ref nameBlob,
                0,
                ref kpi,
                IntPtr.Zero, // default = SHA1RSA
                ref startSystemTime,
                ref endSystemTime,
                IntPtr.Zero);
            Certificate.Check(certContext != IntPtr.Zero);
            dataHandle.Free();

            X509Certificate2 tempCert = new X509Certificate2(certContext);
            //result = new X509Certificate2(tempCert.RawData, "", X509KeyStorageFlags.Exportable | X509KeyStorageFlags.PersistKeySet);
            result = tempCert;

            X509Store store = new X509Store(StoreName.My, StoreLocation.LocalMachine);
            store.Open(OpenFlags.ReadWrite);
            store.Add(result);
            store.Close(); 
```

请注意，Certificate 类是一个内部类，它只包含我正在使用的不同静态方法和 WIN32 定义。这是 NativeMethods 类定义（显示了我正在使用的 WIN32 API 调用）：

```
 internal static class NativeMethods
{
    [DllImport("kernel32.dll", SetLastError = true, ExactSpelling = true)]
    [return: MarshalAs(UnmanagedType.Bool)]
    public static extern bool FileTimeToSystemTime(
        [In] ref long fileTime,
        out SystemTime systemTime);

    [DllImport("AdvApi32.dll", SetLastError = true, ExactSpelling = true)]
    [return: MarshalAs(UnmanagedType.Bool)]
    public static extern bool CryptAcquireContextW(
        out IntPtr providerContext,
        [MarshalAs(UnmanagedType.LPWStr)] string container,
        [MarshalAs(UnmanagedType.LPWStr)] string provider,
        int providerType,
        int flags);

    [DllImport("AdvApi32.dll", SetLastError = true, ExactSpelling = true)]
    [return: MarshalAs(UnmanagedType.Bool)]
    public static extern bool CryptReleaseContext(
        IntPtr providerContext,
        int flags);

    [DllImport("AdvApi32.dll", SetLastError = true, ExactSpelling = true)]
    [return: MarshalAs(UnmanagedType.Bool)]
    public static extern bool CryptGenKey(
        IntPtr providerContext,
        int algorithmId,
        int flags,
        out IntPtr cryptKeyHandle);

    [DllImport("AdvApi32.dll", SetLastError = true, ExactSpelling = true)]
    [return: MarshalAs(UnmanagedType.Bool)]
    public static extern bool CryptDestroyKey(
        IntPtr cryptKeyHandle);

    [DllImport("Crypt32.dll", SetLastError = true, ExactSpelling = true)]
    [return: MarshalAs(UnmanagedType.Bool)]
    public static extern bool CertStrToNameW(
        int certificateEncodingType,
        IntPtr x500,
        int strType,
        IntPtr reserved,
        [MarshalAs(UnmanagedType.LPArray)] [Out] byte[] encoded,
        ref int encodedLength,
        out IntPtr errorString);

    [DllImport("Crypt32.dll", SetLastError = true, ExactSpelling = true)]
    public static extern IntPtr CertCreateSelfSignCertificate(
        IntPtr providerHandle,
        [In] ref CryptoApiBlob subjectIssuerBlob,
        int flags,
        [In] ref CryptKeyProviderInformation keyProviderInformation,
        IntPtr signatureAlgorithm,
        [In] ref SystemTime startTime,
        [In] ref SystemTime endTime,
        IntPtr extensions);

    [DllImport("Crypt32.dll", SetLastError = true, ExactSpelling = true)]
    [return: MarshalAs(UnmanagedType.Bool)]
    public static extern bool CertFreeCertificateContext(
        IntPtr certificateContext);

    [DllImport("Crypt32.dll", SetLastError = true, ExactSpelling = true)]
    public static extern IntPtr CertOpenStore(
        [MarshalAs(UnmanagedType.LPStr)] string storeProvider,
        int messageAndCertificateEncodingType,
        IntPtr cryptProvHandle,
        int flags,
        IntPtr parameters);

    [DllImport("Crypt32.dll", SetLastError = true, ExactSpelling = true)]
    [return: MarshalAs(UnmanagedType.Bool)]
    public static extern bool CertCloseStore(
        IntPtr certificateStoreHandle,
        int flags);

    [DllImport("Crypt32.dll", SetLastError = true, ExactSpelling = true)]
    [return: MarshalAs(UnmanagedType.Bool)]
    public static extern bool CertAddCertificateContextToStore(
        IntPtr certificateStoreHandle,
        IntPtr certificateContext,
        int addDisposition,
        out IntPtr storeContextPtr);

    [DllImport("Crypt32.dll", SetLastError = true, ExactSpelling = true)]
    [return: MarshalAs(UnmanagedType.Bool)]
    public static extern bool CertSetCertificateContextProperty(
        IntPtr certificateContext,
        int propertyId,
        int flags,
        [In] ref CryptKeyProviderInformation data);

    [DllImport("Crypt32.dll", SetLastError = true, ExactSpelling = true)]
    [return: MarshalAs(UnmanagedType.Bool)]
    public static extern bool PFXExportCertStoreEx(
        IntPtr certificateStoreHandle,
        ref CryptoApiBlob pfxBlob,
        IntPtr password,
        IntPtr reserved,
        int flags);
} 
```

我是在 32 位还是 64 位机器上重要吗？在这一点上，我不知道该怎么做。我从以下链接获得此代码：[在 C# 中创建自签名证书](http://blogs.msdn.com/b/dcook/archive/2008/11/25/creating-a-self-signed-certificate-in-c.aspx)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T17:50:28.543

我发现了导致我无法导出证书的问题。事实证明，我实际上也无法在 Windows XP 上导出它（我见过几次，但那是在我调试的时候，后来没有执行导致它崩溃的代码）。

在清理例程中，密钥集被删除：

```
NativeMethods.CryptAcquireContextW(
    out providerContext,
    containerName,
    null,
    1, // PROV_RSA_FULL
    0x10); // CRYPT_DELETEKEYSET 
```

这会导致证书不再能够导出私钥。当此行被注释掉时，证书已安装在本地计算机的个人证书存储中。它也被允许导出，因此允许我将 IIS 配置为指向该证书。

# python - matplotlib 中的日期刻度和旋转

> ID：11264521
> 
> 赞同：220
> 
> 时间：2012-06-29T15:22:18.987
> 
> 标签：python, matplotlib

我在尝试让我的日期刻度在 matplotlib 中旋转时遇到问题。下面是一个小示例程序。如果我尝试在最后旋转刻度，则刻度不会旋转。如果我尝试旋转注释“崩溃”下显示的刻度，则 matplot lib 崩溃。

仅当 x 值为日期时才会发生这种情况。如果我用调用中的变量替换变量，调用`dates`在内部就可以正常工作。`t``avail_plot``xticks(rotation=70)``avail_plot`

有任何想法吗？

```
import numpy as np
import matplotlib.pyplot as plt
import datetime as dt

def avail_plot(ax, x, y, label, lcolor):
    ax.plot(x,y,'b')
    ax.set_ylabel(label, rotation='horizontal', color=lcolor)
    ax.get_yaxis().set_ticks([])

    #crashes
    #plt.xticks(rotation=70)

    ax2 = ax.twinx()
    ax2.plot(x, [1 for a in y], 'b')
    ax2.get_yaxis().set_ticks([])
    ax2.set_ylabel('testing')

f, axs = plt.subplots(2, sharex=True, sharey=True)
t = np.arange(0.01, 5, 1)
s1 = np.exp(t)
start = dt.datetime.now()
dates=[]
for val in t:
    next_val = start + dt.timedelta(0,val)
    dates.append(next_val)
    start = next_val

avail_plot(axs[0], dates, s1, 'testing', 'green')
avail_plot(axs[1], dates, s1, 'testing2', 'red')
plt.subplots_adjust(hspace=0, bottom=0.3)
plt.yticks([0.5,],("",""))
#doesn't crash, but does not rotate the xticks
#plt.xticks(rotation=70)
plt.show() 
```

* * *

## 回答 #1

> 赞同：288
> 
> 时间：2012-06-29T21:40:03.377

如果您更喜欢非面向对象的方法，请移至两个调用*之前*`plt.xticks(rotation=70)`的右侧，例如*`avail_plot`*

 *```
plt.xticks(rotation=70)
avail_plot(axs[0], dates, s1, 'testing', 'green')
avail_plot(axs[1], dates, s1, 'testing2', 'red') 
```

这会在设置标签之前设置旋转属性。由于您在这里有两个轴，`plt.xticks`因此在制作完这两个图后会感到困惑。在什么都不做的时候*，没有*`plt.xticks`给`plt.gca()`你想要修改的轴，所以作用在当前轴上的，是行不通的。*`plt.xticks`*

 *对于不使用的面向对象方法`plt.xticks`，您可以使用

```
plt.setp( axs[1].xaxis.get_majorticklabels(), rotation=70 ) 
```

*两次`avail_plot`通话*后。*这会专门设置正确轴上的旋转。*

 ** * *

## 回答 #2

> 赞同：175
> 
> 时间：2017-10-09T17:47:02.933

**解决方案适用于 matplotlib 2.1+**

存在`tick_params`可以更改刻度属性的轴方法。它也作为轴方法存在`set_tick_params`

```
ax.tick_params(axis='x', rotation=45) 
```

或者

```
ax.xaxis.set_tick_params(rotation=45) 
```

附带说明一下，当前的解决方案通过使用 command 将有状态接口（使用 pyplot）与面向对象的接口混合在一起`plt.xticks(rotation=70)`。由于问题中的代码使用面向对象的方法，因此最好始终坚持这种方法。该解决方案确实给出了一个很好的显式解决方案`plt.setp( axs[1].xaxis.get_majorticklabels(), rotation=70 )`

* * *

## 回答 #3

> 赞同：52
> 
> 时间：2017-03-19T15:25:39.120

一个避免在ticklabes上循环的简单解决方案就是使用

[`fig.autofmt_xdate()`](http://matplotlib.org/api/figure_api.html#matplotlib.figure.Figure.autofmt_xdate)

此命令自动旋转 xaxis 标签并调整它们的位置。默认值为 30° 旋转角度和水平对齐“右”。但是可以在函数调用中更改它们

```
fig.autofmt_xdate(bottom=0.2, rotation=30, ha='right') 
```

附加`bottom`参数等效于 setting `plt.subplots_adjust(bottom=bottom)`，它允许将底部轴填充设置为更大的值以承载旋转的刻度标签。

所以基本上在这里，您拥有在单个命令中拥有漂亮日期轴所需的所有设置。

一个[很好的例子](http://matplotlib.org/examples/api/date_demo.html)可以在 matplotlib 页面上找到。

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2017-01-26T20:39:49.980

另一种应用`horizontalalignment`和`rotation`每个刻度标签的方法是在`for`要更改的刻度标签上循环：

```
import numpy as np
import matplotlib.pyplot as plt
import datetime as dt

now = dt.datetime.now()
hours = [now + dt.timedelta(minutes=x) for x in range(0,24*60,10)]
days = [now + dt.timedelta(days=x) for x in np.arange(0,30,1/4.)]
hours_value = np.random.random(len(hours))
days_value = np.random.random(len(days))

fig, axs = plt.subplots(2)
fig.subplots_adjust(hspace=0.75)
axs[0].plot(hours,hours_value)
axs[1].plot(days,days_value)

for label in axs[0].get_xmajorticklabels() + axs[1].get_xmajorticklabels():
    label.set_rotation(30)
    label.set_horizontalalignment("right") 
```

[![在此处输入图像描述](../Images/552dac180e46c311041a20dd6e1fdcff.png)](https://i.stack.imgur.com/MiE0E.png)

如果您想控制主要和次要刻度的位置，这是一个示例：

```
import numpy as np
import matplotlib.pyplot as plt
import datetime as dt

fig, axs = plt.subplots(2)
fig.subplots_adjust(hspace=0.75)
now = dt.datetime.now()
hours = [now + dt.timedelta(minutes=x) for x in range(0,24*60,10)]
days = [now + dt.timedelta(days=x) for x in np.arange(0,30,1/4.)]

axs[0].plot(hours,np.random.random(len(hours)))
x_major_lct = mpl.dates.AutoDateLocator(minticks=2,maxticks=10, interval_multiples=True)
x_minor_lct = matplotlib.dates.HourLocator(byhour = range(0,25,1))
x_fmt = matplotlib.dates.AutoDateFormatter(x_major_lct)
axs[0].xaxis.set_major_locator(x_major_lct)
axs[0].xaxis.set_minor_locator(x_minor_lct)
axs[0].xaxis.set_major_formatter(x_fmt)
axs[0].set_xlabel("minor ticks set to every hour, major ticks start with 00:00")

axs[1].plot(days,np.random.random(len(days)))
x_major_lct = mpl.dates.AutoDateLocator(minticks=2,maxticks=10, interval_multiples=True)
x_minor_lct = matplotlib.dates.DayLocator(bymonthday = range(0,32,1))
x_fmt = matplotlib.dates.AutoDateFormatter(x_major_lct)
axs[1].xaxis.set_major_locator(x_major_lct)
axs[1].xaxis.set_minor_locator(x_minor_lct)
axs[1].xaxis.set_major_formatter(x_fmt)
axs[1].set_xlabel("minor ticks set to every day, major ticks show first day of month")
for label in axs[0].get_xmajorticklabels() + axs[1].get_xmajorticklabels():
    label.set_rotation(30)
    label.set_horizontalalignment("right") 
```

[![在此处输入图像描述](../Images/92809d6d0f93ede4b89781c2b0f7474f.png)](https://i.stack.imgur.com/GZq89.png)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2020-05-18T14:52:26.563

只需使用

```
ax.set_xticklabels(label_list, rotation=45) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-07-02T13:14:16.493

我显然迟到了，但有一个官方例子使用

```
plt.setp(ax.get_xticklabels(), rotation=45, ha="right", rotation_mode="anchor") 
```

旋转标签，同时保持它们与刻度线正确对齐，既干净又容易。

参考：[https ://matplotlib.org/stable/gallery/images_contours_and_fields/image_annotated_heatmap.html](https://matplotlib.org/stable/gallery/images_contours_and_fields/image_annotated_heatmap.html)***

# javascript - 用于变量更改的 YUI 事件监听器

> ID：11264523
> 
> 赞同：0
> 
> 时间：2012-06-29T15:22:32.737
> 
> 标签：javascript, jquery, html, yui

```
/* listen for the submit button press */

YAHOO.util.Event.addListener(webserver.result_form, 'submit', webserver.result_submit); 
```

我的`main.js`. YUI 中有什么方法可以让我监听一个变量，所以当这个变量发生变化时，事件就会发生。我想知道是否有类似的东西：

```
YAHOO.util."Variable".addListener(webserver.result_form, 'submit', webserver.result_submit); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T16:28:17.317

您不能直接将侦听器分配给 javascript 变量，但可以通过以下方式间接执行。

您可以将变量的值保存在 div 或任何 html 节点中

例如

```
<div id="variable-name" style="display:none;">variable-value</div> 
```

或者

```
<span id="variable-name" style="display:none;">variable-value</span> 
```

然后使用下面的js来监控节点的任何变化。这将适用于 YUI3 或更高版本。（我不确定 YUI2.x）

```
var Y = YUI().use('node', 'event', function (Y) {
    // node and event modules are loaded.
});    
var demo = Y.one('#variable-name');
    // And we can listen for DOM events.
        demo.on('change', function (e) {
            alert('value changed');
        }); 
```

有关监听 YUI 节点事件的更多信息

[http://yuilibrary.com/yui/docs/event/#listening-for-events](http://yuilibrary.com/yui/docs/event/#listening-for-events)

和可用的事件列表

[http://yuilibrary.com/yui/docs/event/#event-whitelist](http://yuilibrary.com/yui/docs/event/#event-whitelist)

**编辑**

基于[http://www.quirksmode.org/dom/events/change.html](http://www.quirksmode.org/dom/events/change.html)，

更改事件仅在其表单字段时触发

例如`input` `textarea`和`select`

所以当 div 的内容发生变化时不会触发 change 事件。

# javascript - 使用 Require.js 嵌套依赖 Backbone.js 视图 Backbone.js 导致视图加载为对象而不是函数

> ID：11264525
> 
> 赞同：2
> 
> 时间：2012-06-29T15:22:36.383
> 
> 标签：javascript, jquery, backbone.js, underscore.js, requirejs

我将 Require.js 与 Backbone.js 和 Underscore.js 一起使用，并且我有一个嵌套视图，当作为依赖项调用时，它会出现未定义，但是当我在同一个模块中有两个视图时，它们工作正常。我想知道我做错了什么。这是一个例子：

子视图.js

```
define([
'jQuery',
'Underscore',
'Backbone', 
], function ($, _, Backbone) {
var ChildView = Backbone.View.extend({
    initialize: function () {
        _.bindAll(this, 'render');
        this.render();
        },
    });
    return ChildView;
}); 
```

父视图.js

```
define([
'jQuery',
'Underscore',
'Backbone',
'src/views/child-view'
], function ($, _, Backbone, ChildView){
 var ParentView = Backbone.View.extend({

        initialize: function () {
            _.bindAll(this, 'render');

            this.render();
        },
       render: function () {
              child = new ChildView({});
       }
    });
    return ParentView;
}); 
```

尝试调用新的 ChildView 时收到“未捕获的类型错误：未定义不是函数”。如果我在 Parentview 之外但在 parentview.js 内部引用 ChildView，它会显示视图，但作为对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T15:50:52.360

变量名区分大小写。在 child-view.js 中，您返回的是未定义的“ChildView”（您已分配了 childView）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T08:18:00.413

只是从你的代码来看，应该没有问题，我测试了你的代码居然没有发现问题。这是我的测试代码，你可以试试： [http://files.cnblogs.com/justinw/test_byfejustin.zip](http://files.cnblogs.com/justinw/test_byfejustin.zip)

我认为可能是你的“require.js”有问题，你可以在我的代码包中用我的“test_byfejustin\js\libs\require\require.js”替换你的“require.js”，然后再试一次。

# c# - 从 Form1 访问 Form3.pictureBox1

> ID：11264528
> 
> 赞同：-1
> 
> 时间：2012-06-29T15:22:46.507
> 
> 标签：c#, .net, winforms

我搜索了一种简单的方法来访问不同表单上的不同控件，而无需像在 Visual Basic 6 中那样做任何变通方法。

例子：

```
Form3.pictureBox1.Image = MyImage; 
```

但不知何故，C# 不允许访问其他表单上的其他控件，即使是我自己的类也不行。我已经将`pictureBox1`Form3 中的“”更改为`public`，如果我键入“Form3.”，C# 仍然不知道这个控件。

我必须做什么才能访问我的控件？我已经以提升的权限运行 Visual Studio（微软在他们的支持区域回答了我的问题，提升的权限对于访问其他表单及其控件很重要）但到目前为止没有任何帮助。所以我现在一直使用 C# 中的一种形式，这不适合开发任何应用程序。大多数应用程序需要多个表单，因此应该是一种从类或其他表单中的任何上下文访问控件的简单方法。我不想使用任何“设置...或获取属性” - 我什至不知道如何！我在某个地方找到了这个特定的解决方法，但是我通常在我的应用程序中有很多控件和标签要访问，如果每个控件属性都需要一个 get 和 set 语句或任何写入它的东西，这将产生很多无用的开销。

也许你们中的某个人知道一种更优雅的方法来以更简单的方式做到这一点，即使需要提升。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T16:13:37.560

在 VB6 中，您可以通过使用类名来访问表单的默认实例，在 VB.Net 中，它们继续这种行为。C# 没有这种行为，因此您必须创建自己的 Form 实例。否则，您会尝试像静态类一样使用它。即使您不想这样做，最好的方法是通过属性公开它们，它将所有内容都封装起来。

```
Form3 frm3 = new Form3();
frm3.pictureBox1.Image = Image.FromFile("ImageName");
frm3.Show(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T15:29:11.600

我想我知道出了什么问题。`Form1`并且`Form3`实际上是类，因此键入`Form1.something`意味着它`something`必须是静态成员。为了能够访问图片，您需要一个类的实例。

为了更好地解释这一点，这里有一个例子：

```
string a; 
```

`string`是类类型，并且`a`是该类的一个实例。

一种方法是修改启动代码（在`Program.cs`源文件中的 windows 窗体中），并将窗体保存在静态类中，然后从那里访问它。

这就是 Program.cs 可能的样子：

```
static void Main()
{
    Application.EnableVisualStyles();
    Application.SetCompatibleTextRenderingDefault(false);
    Application.Run(new Form1());
} 
```

您可以看到正在创建 Form1 的新实例，这就是 new 关键字的作用。您还可以执行以下操作：

```
static void Main()
{
    Application.EnableVisualStyles();
    Application.SetCompatibleTextRenderingDefault(false);

    Form1 f = new Form1();
    Application.Run(f);
} 
```

该变量`f`包含正在显示的表单。

我真的不知道你的程序是如何工作的，但无论如何......为了能够访问 的成员`Form3`，你需要找到实例。也许您`new Form3().Show()`的代码中有某个地方，我不知道确切...但是您需要将其保存到变量中，这就是您可以访问它的方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T15:53:26.390

您需要将对象的修饰符属性更改为公共，而不是创建表单的实例并调用您想要的对象

```
Form2 frm2 = new Form2();
frm2.show();
frm2.pictureBox1.Image = "MyImage"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T15:28:42.370

Form3 可以引用类。您需要使用一个对象来访问picturebox1（或使该字段静态）

# java - Eclipse 包括来自 web 部署程序集中的 apache ivy IDE 插件的多个 jar

> ID：11264530
> 
> 赞同：1
> 
> 时间：2012-06-29T15:22:49.957
> 
> 标签：java, eclipse, apache, ivy, ivyde

我最近更新了我的项目设置以解决我的 groovy 插件和 ivy 插件之间的资源问题。

我在 64 位机器上使用 apache ivy IDE plugin 2.2.0 final & eclipse Helios Service Release 1。

在我做之前：项目->右键单击常春藤插件->属性->高级：
启用项目特定设置
使用以下内容构建类路径：
检索到的工件
检索模式：WebContent/WEB-INF/lib/[artifact]-[revision]。[ ext]
删除旧检索到的工件 [选中]

这对我有用，除非我的项目中也有 groovy 插件，groovy 项目将保留复制到 WebContent/WEB-INF/lib/ 的 jars，我不会被允许删除 WebContent/WEB-INF/lib/ 中的任何 jar，直到我重新启动 eclipse

现在我删除了常春藤插件设置添加了我的常春藤插件作为部署程序集我现在遇到的问题是，每当我使用 eclipse 发布到 tomcat 时，它会**根据我的一些常春藤条目复制两个 jar**。其中一个 jar 始终是最新版本，然后另一个 jar 似乎是同一 jar 的随机早期版本。但是，一旦我切换回使用 ivy 插件复制 jar 的旧方式，问题就解决了。

我不知道这个新问题是常春藤插件问题还是 Eclipse 部署程序集问题。工作中的其他人尝试在同一个项目中做同样的事情，他们没有**两个罐子**的问题。

以前有没有其他人遇到过这个问题并有解决方案？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-12T16:51:39.250

你在使用 Ant 和 Ivy 吗？然后，您可以定义一个 Ant 任务来复制 Jars：

```
<copy todir="@{target-dir}">
    <fileset dir="@{source-dir}">
        <include name="*.jar" />
    </fileset>
</copy> 
```

您甚至可以以更详细的方式指定文件集。我的 Ant 构建文件中的一些示例：

```
<fileset dir="...">
    <include name="${ivy.module}-${ivy.revision}-jar.jar" />
    <include name="${ivy.module}-test-unit-${ivy.revision}-jar.jar" />
    <include name="lib/*.jar" />
    <include name="lib-tests/*.jar" />
    <exclude name="**/*.java" />
    <exclude name="**/*.class" />
</fileset> 
```

# asp.net - 托管网站后的连接字符串问题

> ID：11264533
> 
> 赞同：0
> 
> 时间：2012-06-29T15:23:04.493
> 
> 标签：asp.net, sql, entity-framework, web, hosting

请在这件事上给予我帮助！我把我的网站放在 somee.com 上，他们给了这个连接字符串

```
Connection string:  workstation id=GWAPDataBase.mssql.somee.com;packet size=4096;user id=xxxx;pwd=xxxxx;data source=GWAPDataBase.mssql.somee.com;persist security info=False;initial catalog=GWAPDataBase 
```

我在本地主机上时自动生成的连接字符串是

```
<add name="ApplicationServices" connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnetdb.mdf;User Instance=true" providerName="System.Data.SqlClient" />
<add name="GWAP_Entities" connectionString="metadata=res://*/App_Code.GWAPModel.csdl|res://*/App_Code.GWAPModel.ssdl|res://*/App_Code.GWAPModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=.\SQLEXPRESS;attachdbfilename=|DataDirectory|\aspnetdb.mdf;integrated security=True;user instance=True;multipleactiveresultsets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" /> 
```

我试图修改它，但我收到一条错误消息

> 指定的命名连接在配置中未找到，不打算与 EntityClient 提供程序一起使用，或者无效。
> 
> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.ArgumentException：在配置中找不到指定的命名连接，不打算与 EntityClient 提供程序一起使用，或者无效。
> 
> 源错误：
> 
> 第 19 行：#region 构造函数第 20 行：第 21 行：public GWAP_Entities() 第 22 行：：base(ConnectionString, ContainerName) 第 23 行：{

请帮助我应该如何修改连接字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T15:50:23.907

听起来您的连接字符串名称和实体框架期望的名称不匹配。如果没有有关代码外观的更多信息，我假设您使用 Visual Studio 中的向导从数据库生成模型。当您这样做时，您输入连接字符串的名称，然后将其硬编码在您的设计器文件中。一个例子：

```
public FooEntity() : base("name=FooEntity", "FooEntity")
{
    this.ContextOptions.LazyLoadingEnabled = true;
    OnContextCreated();
} 
```

在这种情况下，字符串“FooEntity”需要是连接字符串的名称。如果它们不同，将找不到连接字符串。确保这些值匹配。

# javascript - Google Closure Linter 在 Windows 的 Sublime Text 2 中不起作用

> ID：11264535
> 
> 赞同：7
> 
> 时间：2012-06-29T15:23:13.077
> 
> 标签：javascript, python, google-closure-compiler, sublimetext2

有没有人让 Google Closure Linter ( **gjslint** ) 与 Windows 的 Sublime Text 2 一起工作？

当我运行它时，我得到以下信息（通过工具菜单或 CTRL+SHIFT+J）：

> 文件名、目录名或卷标语法不正确。
> 
> 关闭 linter：忽略 0 个错误。

我的步骤如下：

*   安装[Python 2.7](http://www.python.org/download/releases/2.7.3/)
*   已安装的[安装工具](http://pypi.python.org/pypi/setuptools/)，[便于安装](http://peak.telecommunity.com/DevCenter/EasyInstall#installing-easy-install)
*   安装了[Closure Linter](https://developers.google.com/closure/utilities/docs/linter_howto)
*   安装[ST2 插件](https://github.com/fbzhong/sublime-closure-linter)

开箱即用，所有功能均无效。但是，如果我在默认设置中硬编码路径，我可以让**fixjsstyle**插件工作：

```
{
    // Path to the gjslint.
    "gjslint_path": "/python27/scripts/gjslint",

    // Path to the fixjsstyle.
    "fixjsstyle_path": "/python27/scripts/fixjsstyle"
} 
```

可以确认它们都存在：

```
C:\>dir c:\python27\scripts
 Volume in drive C is OSDisk
 Volume Serial Number is 36E3-7433

 Directory of c:\python27\scripts

...
06/29/2012  09:48 AM               304 fixjsstyle-script.py
06/29/2012  09:48 AM             7,168 fixjsstyle.exe
06/29/2012  09:48 AM               525 fixjsstyle.exe.manifest
06/29/2012  09:48 AM               298 gjslint-script.py
06/29/2012  09:48 AM             7,168 gjslint.exe
06/29/2012  09:48 AM               522 gjslint.exe.manifest
              17 File(s)         34,580 bytes
               2 Dir(s)  186,377,805,824 bytes free 
```

这听起来确实像是一个参考问题，我什至尝试将可执行文件复制到插件目录，但也没有用。

*编辑*：我应该补充一点，我确实打开了`debug: true`标志，但什么也没出现。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-02T14:05:51.717

我在 Windows 7 上遇到了同样的问题。我发现解决它的唯一方法是删除`gjslint`调用周围的双引号

**包`gjslint.py`内第**34**行`sublime`**

 **原始（不工作）：

```
cmd = '"' + s.get('gjslint_path', 'jslint') + '" ' + s.get('gjslint_flags', '') + ' "' + file_path + '"' 
```

在职的 ：

```
cmd = '' + s.get('gjslint_path', 'jslint') + ' ' + s.get('gjslint_flags', '') + ' "' + file_path + '"' 
```

请确保您的`gjslint`路径没有任何空格来完成这项工作，因为您就是这种情况。

如果有人有其他解决方案，请分享。**

# android - 无法在未调用 Looper.prepare() 的线程内创建处理程序 - 对话框内的 AsyncTask

> ID：11264538
> 
> 赞同：0
> 
> 时间：2012-06-29T15:23:20.333
> 
> 标签：android, facebook, multithreading, android-asynctask

在我的活动中有一个切换按钮。我希望每次您将切换按钮更改为未选中时都会出现一个对话框，并且当您按下“是”时，会在 Facebook 的墙上发布一条消息。

我在没有 facebook 对话框的情况下在 facebook 上发布代码[https://stackoverflow.com/a/4376415/1403979](https://stackoverflow.com/a/4376415/1403979)

这是我的代码：

```
OnCheckedChangeListener toggleButtonListener = new OnCheckedChangeListener() {
    // called when user toggles session state
    @Override
    public void onCheckedChanged(CompoundButton buttonView,
            boolean isChecked) {
            if (!isChecked) {
            AlertDialog.Builder builder = new AlertDialog.Builder(
                    SocialFootActivity.this);
            builder.setMessage(
                    "Do you want to share on facebook")
                    .setCancelable(false)
                    .setPositiveButton("Yes",
                            new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog,
                                        int id) {           
                                    SocialFootActivity.this.runOnUiThread(new Runnable() {
                                        @Override
                                        public void run() {
                                    new PostMsg().execute("Hello World");
                                        }});
                                }
                            })
                    .setNegativeButton("No",
                            new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog,
                                        int id) {
                                    dialog.cancel();
                                }
                            });
            AlertDialog alert = builder.create();
            alert.show();

        } else {
            //do somethings
        }
    }
}; 
```

异步任务

```
public class PostMsg extends AsyncTask<String,Void,Void>{

@Override
protected Void doInBackground(String... msg) {
    // TODO Auto-generated method stub
    try {
        SocialFootActivity sf = new SocialFootActivity();
        String response = sf.facebook.request("me");
        Bundle parameters = new Bundle();
        parameters.putString("message", msg[0]);
        parameters.putString("description", "test test test");
        response = sf.facebook.request("me/feed", parameters, "POST");
        Log.d("Tests", "got response: " + response);
        if (response == null || response.equals("")
                || response.equals("false")) {
            Log.v("Error", "Blank response");
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
    return null;
}

} 
```

编辑：Logcat

```
06-29 17:37:19.055: W/System.err(24427): java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
06-29 17:37:19.155: D/dalvikvm(24427): GC_CONCURRENT freed 1080K, 25% free 6038K/8003K, paused 2ms+5ms
06-29 17:37:19.175: W/CursorWrapperInner(24427): Cursor finalized without prior close()
06-29 17:37:19.175: W/System.err(24427):    at android.os.Handler.<init>(Handler.java:121)
06-29 17:37:19.175: W/System.err(24427):    at android.app.Activity.<init>(Activity.java:735)
06-29 17:37:19.175: W/System.err(24427):    at com.google.android.maps.MapActivity.<init>(MapActivity.java:272)
06-29 17:37:19.185: W/System.err(24427):    at it.univpm.dii.socialfoot.SocialFootActivity.<init>(SocialFootActivity.java:56)
06-29 17:37:19.185: W/System.err(24427):    at it.univpm.dii.socialfoot.PostMsg.doInBackground(PostMsg.java:13)
06-29 17:37:19.185: W/System.err(24427):    at it.univpm.dii.socialfoot.PostMsg.doInBackground(PostMsg.java:1)
06-29 17:37:19.185: W/System.err(24427):    at android.os.AsyncTask$2.call(AsyncTask.java:264)
06-29 17:37:19.185: W/System.err(24427):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
06-29 17:37:19.185: W/System.err(24427):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
06-29 17:37:19.195: W/System.err(24427):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
06-29 17:37:19.195: W/System.err(24427):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
06-29 17:37:19.195: W/System.err(24427):    at java.lang.Thread.run(Thread.java:856) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T15:29:01.833

这行代码中有一个错误：

```
SocialFootActivity.this.runOnUiThread(new Runnable() {
                                    @Override
                                    public void run() {
                                new PostMsg().execute("Hello World");
                                    }}); 
```

您为什么要尝试`AsyncTask`使用运行`runOnUiThread()`？

您应该像这样简单地调用`AsyncTask`方法`OnClick()`：

```
OnCheckedChangeListener toggleButtonListener = new OnCheckedChangeListener() {
// called when user toggles session state
@Override
public void onCheckedChanged(CompoundButton buttonView,
        boolean isChecked) {
        if (!isChecked) {
        AlertDialog.Builder builder = new AlertDialog.Builder(
                SocialFootActivity.this);
        builder.setMessage(
                "Do you want to share on facebook")
                .setCancelable(false)
                .setPositiveButton("Yes",
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,
                                    int id) {

                                new PostMsg().execute("Hello World");
                                    });
                            } 
```

然后`progressdialog`在`onPreExecute()`你的中显示一个，`AsyncTask`这将显示在 UI 线程上，而你`doInBackground()`将发生在后台非 UI 线程中。

# javascript - 追加新按钮时没有触发jQuery单击事件

> ID：11264540
> 
> 赞同：1
> 
> 时间：2012-06-29T15:23:20.800
> 
> 标签：javascript, jquery

当我单击“显示”按钮时，将调用显示侦听器并显示一个新的隐藏按钮。但是为什么当我单击“隐藏”时没有调用隐藏按钮？

```
 $('.myCss').append('<input type="button" class="show" value="Show"/>');

$('.show').on('click', function () {
        console.log('show clicked');
    $('.myCss').append('<input type="button" class="hide" value="Hide"/>');
});

    $('.hide').on('click', function () {
    console.log('hide clicked');
    $('.myCss').append('<input type="button" class="show" value="Show"/>');
    }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T15:26:15.913

它与添加到页面的元素的顺序有关。如果您将隐藏代码放在显示代码中它可以工作（尽管您应该检查您的逻辑）：

```
$('.show').on('click', function() {
    console.log('show clicked');
    $('.myCss').append('<input type="button" class="hide" value="Hide"/>');
    $('.hide').on('click', function() {
        console.log('hide clicked');
        $('.myCss').append('<input type="button" class="show" value="Show"/>');
    });
});​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/uRmsH/)**

在您的原始代码中，将单击事件绑定到隐藏按钮的代码存在于实际隐藏按钮之前，因此它实际上并未绑定到任何东西。通过在另一个代码块中移动它，您可以延迟该块的执行。您还可以使用`.on()`将 click 事件绑定到 DOM 中更高的事件，但它实际上基本上是相同的最终结果。

从[文档](http://api.jquery.com/on/)：

> 事件处理程序仅绑定到当前选定的元素；当您的代码调用 .on() 时，它们必须存在于页面上。为确保元素存在并且可以被选择，请在页面 HTML 标记中的元素的文档就绪处理程序内执行事件绑定。如果将新 HTML 注入页面，请在将新 HTML 放入页面后选择元素并附加事件处理程序。或者，使用委托事件来附加事件处理程序，如下所述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T15:27:59.933

因为当您设置事件时，.hide 元素不存在。您可以尝试设置事件，例如：

```
$('.myCss').append('<input type="button" class="show" value="Show"/>');

$('.myCss').on('click', '.show', function () {
  console.log('show clicked');
  $('.myCss').append('<input type="button" class="hide" value="Hide"/>');
});

$('.myCss').on('click', '.hide', function () {
  console.log('hide clicked');
  $('.myCss').append('<input type="button" class="show" value="Show"/>');
}); 
```

这会将单击附加到 .myCss 元素（shich 始终存在），但仅在单击其中的 .hide 元素时触发该函数。

此解决方案比每次创建元素时都创建事件更有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T15:26:51.383

问题是当您尝试在其上定义 onclick 事件时，您“隐藏”按钮不存在。我建议你添加它，设置 display=none，然后显示它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T15:27:08.347

创建“.hide”事件处理程序时，“隐藏”按钮尚不存在。

您可以在创建元素后设置事件处理程序，使用[事件冒泡](http://www.quirksmode.org/js/events_order.html)，或使用 .live。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-29T15:28:57.693

有几个人正确回答了隐藏按钮是在事件绑定到控件之后创建的。我建议在更高级别（在我的示例中为文档）使用处理程序的不同方法，该处理程序将附加到未来的控件（现在已弃用的[.live](http://api.jquery.com/live/)的当前方法）。

示例：http: [//jsfiddle.net/kQ2JA/1/](http://jsfiddle.net/kQ2JA/1/)

这将更好地满足您将事件绑定到所有当前和未来控件的期望。

# tridion - tridion 2009 - 将多媒体组件从一个出版物复制到另一个出版物

> ID：11264544
> 
> 赞同：4
> 
> 时间：2012-06-29T15:23:44.853
> 
> 标签：tridion, multimedia

如何在 2009 年使用 api 将图像组件从一个出版物复制到另一个出版物？

这可能吗？我尝试使用

```
 newComponent.Multimedia.SetUploadedMultimediaFilename(originalComponent.Multimedia.Filename); 
```

+newComponent.save(); 我的 newComponent 是我从原始组件创建的。

```
 <tcm:Error xmlns:tcm="http://www.tridion.com/ContentManager/5.0"                                                         ErrorCode="80040325" Category="3" Source="Kernel" Severity="2">
    - <tcm:Line ErrorCode="80040325" Cause="false" MessageID="16137">
    - <![CDATA[ Unable to save Component (tcm:0-0-0).
      ]]> 
      <tcm:Token>RESID_4574</tcm:Token> 
      <tcm:Token>RESID_4418</tcm:Token> 
      <tcm:Token>tcm:0-0-0</tcm:Token> 
      </tcm:Line>
    - <tcm:Line ErrorCode="80040325" Cause="true" MessageID="16010">
    - <![CDATA[ Operation is not supported on a new item (or on a null URI).
      ]]> 
      </tcm:Line>
    - <tcm:Details>
    - <tcm:CallStack>
      <tcm:Location>UtilitiesBL.AssertValidURI</tcm:Location> 
      <tcm:Location>ComponentBL.CheckMultiMediaProperties</tcm:Location> 
      <tcm:Location>ComponentBL.Create</tcm:Location> 
      <tcm:Location>XMLState.Save</tcm:Location> 
      <tcm:Location>Component.Save</tcm:Location> 
      </tcm:CallStack>
      </tcm:Details>
      </tcm:Error> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T15:32:00.220

那行不通...您需要先将多媒体项目保存到文件位置，然后使用此位置上传。您现在所做的只是告诉 Tridion，有一个文件`originalComponent.Multimedia.Filename`可能是真的，也可能不是。

ñ

# android - 保存到 SD 卡

> ID：11264549
> 
> 赞同：0
> 
> 时间：2012-06-29T15:24:02.903
> 
> 标签：android, android-sdcard

此代码用于将图片保存在 /Android/data/com.ocr.id/files/IDOCR/Number/

```
public static File save(Activity activity, Bitmap bm, String name) {
    boolean mExternalStorageAvailable = false;
    boolean mExternalStorageWriteable = false;
    File number = null;
    String state = Environment.getExternalStorageState();

    if (Environment.MEDIA_MOUNTED.equals(state)) {
        // We can read and write the media
        mExternalStorageAvailable = mExternalStorageWriteable = true;
        OutputStream outStream = null;

        File externalFilesDir = activity.getExternalFilesDir(null);
        File outFile = new File(externalFilesDir, "IDOCR" + File.separator
                + "Numbers");

        if (!outFile.exists())
            outFile.mkdirs();

        String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss")
                .format(new Date());

        number = new File(outFile, timeStamp + "_" + name + ".PNG");

        try {
            outStream = new FileOutputStream(number);
            bm.compress(Bitmap.CompressFormat.PNG, 100, outStream);

            outStream.flush();
            outStream.close();
            outStream = null;

            bm.recycle();
//              bm = null;

            System.gc();

        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    } else if (Environment.MEDIA_MOUNTED_READ_ONLY.equals(state)) {
        // We can only read the media
        mExternalStorageAvailable = true;
        mExternalStorageWriteable = false;
        Toast.makeText(activity, "Your SDcared is read only.",
                Toast.LENGTH_LONG).show();
    } else {
        // Something else is wrong. It may be one of many other states, but
        // all we need
        // to know is we can neither read nor write
        mExternalStorageAvailable = mExternalStorageWriteable = false;
        Toast.makeText(activity, "Your SDcared is unmounted.",
                Toast.LENGTH_LONG).show();
    }
    return number;
} 
```

该代码中的错误是什么，该代码抛出空指针异常作为这一行

```
 bm.compress(Bitmap.CompressFormat.PNG, 100, outStream); 
```

这段代码以前和我一起工作，但现在给我一个异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T07:11:41.507

尝试在您的 XML 文件中添加用户权限！

```
 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

# android - 更改振动设置

> ID：11264550
> 
> 赞同：1
> 
> 时间：2012-06-29T15:24:08.257
> 
> 标签：android, vibration

好的，所以我对android很陌生。我的女朋友让我为她制作一个非常简单的应用程序，这样她就可以轻松地从始终振动切换到永不振动。似乎是一个足够简单的任务。所以我有一个切换按钮，它改变了设置，但我一直遇到一个大问题。它不会在永远和永远之间改变。如果我将其设置为始终，它将在始终和仅在静音模式之间切换，或者如果我将其设置为从不，它将仅在非静音模式和从不之间切换。我是否遗漏了一些明显但很模糊的细节？这是我的交换代码。

`public void onClick(View arg0) {`

```
 if (vibrateOn) {
                vibrateOn = false;
                adManag.setVibrateSetting(AudioManager.VIBRATE_TYPE_RINGER, AudioManager.VIBRATE_SETTING_OFF);
                adManag.setVibrateSetting(AudioManager.VIBRATE_TYPE_NOTIFICATION, AudioManager.VIBRATE_SETTING_OFF);
            } else {
                vibrateOn = true;
                adManag.setVibrateSetting(AudioManager.VIBRATE_TYPE_RINGER, AudioManager.VIBRATE_SETTING_ON);
                adManag.setVibrateSetting(AudioManager.VIBRATE_TYPE_NOTIFICATION, AudioManager.VIBRATE_SETTING_ON);
            }

            Log.d(TAG, "after " + Integer.toString(adManag.getVibrateSetting(AudioManager.VIBRATE_TYPE_RINGER)));
        } 
```

# sql - 在 SQL 中使用 TOP X * 格式会显着加快查询速度吗？

> ID：11264552
> 
> 赞同：0
> 
> 时间：2012-06-29T15:24:15.790
> 
> 标签：sql, sql-server-2008, query-optimization

所以最近当我在大表上运行查询时，我将使用如下`top 10 *`符号：

```
select  top 10 * from BI_Sessions (nolock)
where SessionSID like 'b6d%'
and CreateDate between '03-15-2012' AND '05-18-2012' 
```

我以为它可以让它跑得更快，但似乎并非如此，这个花了 4 分钟（或者那是可以的时间）？

我想我很好奇该`top`功能是否在它提取所有数据之后发生（这似乎效率低下）。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T15:31:19.480

这完全取决于查询，除了“Top 0”。“前 0”确实返回得更快。

在您的情况下，查询必须查看大表中的行以查找与 WHERE 子句匹配的行。如果未找到任何行，则返回的行数无济于事。如果行在表扫描的末尾，则返回的行数没有帮助。

在某些情况下，查询更复杂，“顶部”可能会影响性能。整体优化和返回的第一行之间存在差异。我不确定 SQL Server 的优化器是否认识到这种差异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T15:32:50.743

这要看情况。如果您在 BI_sessions 及其大型数据库上没有覆盖索引，那么答案可能是。一个好的覆盖索引可能类似于：CreateDate、SessionSIS 以及您实际需要返回的所有列。如果你确实有一个覆盖索引，那么 SQL 甚至不会读取表，它会从覆盖索引中获取它需要的所有数据。如果您指定了实际需要返回的列，则可能会在几分之一秒内返回 10 行。有关更多有用信息 [http://www.mssqltips.com/sqlservertip/1078/improve-sql-server-performance-with-covering-index-enhancements/](http://www.mssqltips.com/sqlservertip/1078/improve-sql-server-performance-with-covering-index-enhancements/) 和更多技术信息： [http://www.simple-talk。 com/sql/learn-sql-server/using-covering-indexes-to-improve-query-performance/](http://www.simple-talk.com/sql/learn-sql-server/using-covering-indexes-to-improve-query-performance/) 也 [http://www.sqlserverinternals.com/](http://www.sqlserverinternals.com/) 和 [http://www.insidesqlserver.com/thebooks.html](http://www.insidesqlserver.com/thebooks.html)

# sql - 调用存储过程在另一个存储过程中返回多个表结果

> ID：11264554
> 
> 赞同：2
> 
> 时间：2012-06-29T15:24:16.490
> 
> 标签：sql, sql-server, stored-procedures

是否可以在返回多个表结果的另一个存储过程 (sp2) 中调用存储过程 (sp1)？

我必须在执行的存储过程（sp2）中使用返回的结果。

据我所知，这是不可能的。但我想确定。

有没有其他方法可以实现这种要求？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T15:42:14.357

您可以`INSERT INTO <table> EXEC <sp>`用于*一个*结果集。

但这不适用于多个结果集。

而且你不能嵌套它。 *（SP2 在调用 SP1 时可以使用它。但如果 SP3 调用 SP2，则不能做同样的事情。）*

如果您确实要返回多个结果集，则需要将结果插入表中。然后外部 SP 可以使用这些表。

如果外部 SP 创建一个临时表 ( `CREATE TABLE #temp`)，则内部 SP 可以看到它插入其中。

同样，您可以使用永久表。我建议有一个名为 SPID 的列，并使用 @@spid 作为您插入其中的值。 *（@@spid 唯一标识每个会话。）* 但是您必须记住在插入表后进行清理。

所有这些选项都假定您可以修改两个 SP。如果不能，我不确定您是否可以在 SQL Server 中执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T15:39:32.823

为此，您可以在 SP2 中创建一个临时表并在 SP1 中使用它

# sublimetext2 - 有没有办法阻止 Sublime Text 在文本编辑器中预览二进制文件？

> ID：11264555
> 
> 赞同：27
> 
> 时间：2012-06-29T15:24:19.913
> 
> 标签：sublimetext2

正如标题所示，我想知道是否有办法阻止 ST2 在我单击二进制文件时打开它们。例如，当我单击图像时，在文本编辑器中显示十六进制表示是没有意义的。

附加说明：我对从侧边栏中隐藏二进制文件不感兴趣。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2014-08-15T05:38:13.370

默认情况下，包含空字节的文件以十六进制打开在您的用户或默认设置文件中：

```
"enable_hexadecimal_encoding": false 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-29T17:55:22.523

不幸的是，我不知道禁用预览特定格式的方法，但如果您想避免意外点击可能会减慢编辑器速度的巨大二进制文件，您可以禁用所有从侧边栏点击进行的预览。

在您的用户或默认设置文件中：

```
"preview_on_click": false 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-09-19T08:24:59.013

我和你有类似的情况。我不想要像 jpg png 文件这样的二进制文件的崇高打开编辑器。反而打开系统默认应用更合理。

1.  **创建一个 Build**。请参阅[Sublime Text 2 键盘快捷键以在指定浏览器（例如 Chrome）中打开文件](https://stackoverflow.com/questions/8023879/sublime-text-2-keyboard-shortcut-to-open-file-in-specified-browser-e-g-chrome) 它会打开默认应用程序和十六进制编辑器。
2.  **插件 OpenDefaultApplication** [https://github.com/SublimeText/OpenDefaultApplication](https://github.com/SublimeText/OpenDefaultApplication) 它将具有上下文右键菜单 OpenInDefaultApplication。但它也会打开默认应用程序和十六进制编辑器
3.  **插件：非文本文件** [https://packagecontrol.io/packages/Non%20Text%20Files](https://packagecontrol.io/packages/Non%20Text%20Files) 在用户设置中添加配置

    ```
    "binary_file_patterns": ["*.JPG","*.jpg", "*.jpeg", "*.png", "*.gif", "*.ttf", "*.tga", "*.dds", "*.ico", "*.eot", "*.pdf", "*.swf", "*.jar", "*.zip"],
    "prevent_bin_preview": true,
    "open_externally_patterns": [
       "*.JPG",
       "*.jpg",
       "*.jpeg",
       "*.JPEG",
       "*.png",
        "*.PGN",
       "*.gif",
        "*.GIF",
        "*.zip",
        "*.ZIP",
        "*.pdf",
        "*.PDF"
    ] 
    ```

我选择第三种方式，很适合我。它将在系统默认应用程序中打开 jpg 文件并自动快速关闭编辑模式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-06T08:47:46.270

# 对于崇高的文字 3

## `file_exclude_patterns`环境

如果您的二进制文件具有文件扩展名，那么可以。

在您的 Sublime 设置中，您可以使用此设置来防止您看到左侧项目文件夹中的文件：

```
"file_exclude_patterns":
[
    "*.db",
    "*.dll",
    "*.ds_store",
    "*.egg",
    "*.enc",
    "*.eot",
    "*.exe",
    "*.ko",
    "*.otf",
    "*.pdb",
    "*.pdf",
    "*.pgn",
    "*.plist",
    "*.psd",
    "*.pxm",
    "*.pyc",
    "*.rdb",
    "*.sqlite",
    "*.sublime-workspace",
    "*.ttf",
    "*.woff",
    "*.woff2",
    "*.zip",
], 
```

只需根据您的需要修改它，然后您将不会在 Sublime 的项目文件夹中看到它。

## 切换

也许您只是想为当前文件关闭或打开它？

尝试`Sublime Command Palette`使用`CTRL`OR `Command`+ `Shift`+`P`

并输入：

```
HexViewer: Toggle Hex View 
```

并按`Enter`或然后文件将在和`Return` 之间切换。`HEX``TEXT`

## 额外的

如果您不想将任何文件转换为 HEX，请使用[@steven-teo 的答案。](https://stackoverflow.com/a/25321719/1896134)

如果您想了解有关 HEX 查看器的更多信息，可以在[此处查看代码](https://github.com/facelessuser/HexViewer)和[文档。](http://facelessuser.github.io/HexViewer/#overview)

**注意：关于这方面的`Sublime Command Palette` [更多信息，密钥会有所不同。](https://packagecontrol.io/docs/usage)

# nosql - RavenDB 中的附件

> ID：11264557
> 
> 赞同：2
> 
> 时间：2012-06-29T15:24:23.887
> 
> 标签：nosql, ravendb, attachment

在 RavenDB 中处理附件的最佳方式是什么？

除了其他字段外，网页还有一个上传 pdf 按钮。所有这些字段都保存在 ravendb 中的一个文档中。

同样，我也希望用户使用上传按钮上传的 pdf 保存在某处......

RavenDB如何做这样的事情......处理这样的附件信息......我是否必须只存储pdf文件的路径？或者有没有办法存储entore pdf文件本身？有没有我能看到的例子已经完成了这个..

谢谢你提供的详情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T08:24:28.250

已经在这里回答了。 [https://groups.google.com/group/ravendb/browse_thread/thread/f4e8440cfd6ec6df/ac1b2334ebc04c6f?lnk=gst&q=pdf#ac1b2334ebc04c6f](https://groups.google.com/group/ravendb/browse_thread/thread/f4e8440cfd6ec6df/ac1b2334ebc04c6f?lnk=gst&q=pdf#ac1b2334ebc04c6f)

# jquery - 等待链式延迟完成

> ID：11264567
> 
> 赞同：1
> 
> 时间：2012-06-29T15:24:57.210
> 
> 标签：jquery

我想知道链接 Deferreds 的最佳设计是什么。请考虑以下代码段：

组件 X：

```
_functionRaisingEvent: function()
{
    $.when(this.raiseEvent('myEvent', args)).done(function(args){ // Check for args.cancel });
},

_raiseEvent: function(event, args)
{
    var def = new $.Deferred();

    // Call subscribers of myEvent in different components and pass them args
    // Subscribers possibly make ajax calls

    return def.promise();
}, 
```

订阅者 Y：

```
_onMyEvent:function(args)
{
    $.ajax(....).done(function(data){ if(data == 1) args.cancel = true;});
}, 
```

订阅者 Z：

```
_onMyEvent:function(args)
{
    document.getElementById('abx').display = 'block';
} 
```

_functionRaisingEvent 调用 _raiseEvent 触发订阅者的回调。

我想要实现的是， _functionRaisingEvent 中的 done 回调仅在所有订阅者完成后执行。

我应该将订阅者自己的 Deferred 作为参数传递并使用管道吗？是否有任何最佳实践或设计模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T16:08:11.103

关键是改变这部分

```
_raiseEvent: function(event, args) {
    var def = new $.Deferred();
    //Call subscribers...
    return def.promise();
} 
```

...返回一个延迟集合，而不仅仅是一个，然后将这些作为集合传递给`$.when`. 由于`$.when`不接受集合，并且坚持将对象作为单独的参数传递，因此常见的解决方法是通过所有函数继承`$.when`的方法进行调用。`apply()`

```
_raiseEvent: function(event, args) {
    var def = new $.Deferred();
    //Call subscribers... - let's assume each returns an AJAX object
    var result_subscr1 = call_subscriber_1();
    var result_subscr2 = call_subscriber_2();
    return [def.promise(), result_subscr1, result_subscr2];
} 
```

...然后将您的电流更改`$.when()`为

```
$.when.apply(null, this.raiseEvent('myEvent', args)).done(... 
```

然后将每个延迟的结果`done()`按照对象传递给的顺序传递给您的回调`$.when()`。

# java - 使用 Lambdaj 对 Map / EntrySet 进行排序

> ID：11264568
> 
> 赞同：1
> 
> 时间：2012-06-29T15:24:58.237
> 
> 标签：java, lambdaj

我想知道是否可以使用 lambdaj 基于 K 的某些属性对 EntrySet< K, V > 进行排序？

我不认为 Lambdaj 会让我我只是想确认一下。

例如，如果我有一个 Map< A, B > 其中 A 具有以下结构：

```
public class A{
private double published;

     public double getPublished()
     {
           return double; 
     }
} 
```

我可以在 A.getPublished 上使用 lambdaj 对条目集进行排序吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T22:02:58.827

不幸的是，由于类型擦除，您所要求的内容是不可能的。确实，假设您有 Map 类型的地图，您想要做的是：

```
sort(map.entrySet(), on(Map.Entry.class).getKey().getPublished()); 
```

这是行不通的，因为 lambdaj 不知道 Map.Entry 实际上是 Map.Entry （当然不允许使用像 on(Map.Entry.class).getKey()... 这样的语法）。这意味着 on(Map.Entry.class).getKey() 调用只返回一个 Object 类的对象，然后你不能调用它的 getPublished() 方法。

# facebook-graph-api - Graph APi：尝试回复私人消息时出现“（＃3）未知方法”错误

> ID：11264569
> 
> 赞同：1
> 
> 时间：2012-06-29T15:25:01.093
> 
> 标签：facebook-graph-api, fan-page, reply, private-messaging

我正在使用 Facebook Graph API 回复直接消息。我已经发布了我的消息，它使用有效的访问令牌
发出 HTTP POST 请求。 但我收到以下错误： `/CONVERSATION_ID/messages`

```
{
  "error": {
    "message": "(#3) Unknown method",
    "type": "OAuthException",
    "code": 3
  }
} 
```

Graph API Explorer 上的相同测试返回了相同的错误。
谁能帮帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-09-14T17:39:22.823

我的工作场所（Facebook 商业版）GRAPH API 应用程序在尝试执行的操作没有 POST 或 DELETE 权限时收到“(#3) Unknown method”错误。更改集成/应用程序权限为我解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T16:10:15.953

您无需添加`/messages`到 API。只需调用 API`https://graph.facebook.com/{message_id}`即可获取线程。

# java - 使用 Hyperic Sigar 获取网络下载（每秒接收字节数）和上传速度（每秒发送字节数）

> ID：11264576
> 
> 赞同：2
> 
> 时间：2012-06-29T15:25:36.980
> 
> 标签：java, networking, hyperic, sigar

我最近从 hyperic sigar 添加了一些外部 jar 文件，名称为 log4j.jar 和 sigar.jar。目的是让系统（操作系统）的下载（每秒接收字节数）和上传速度（每秒发送字节数）速度为 40 kb/s 或 1.3 kb/s，以便开发中的系统监控计算机性能。

我遇到了这个库中的一些类，比如 NetInterfaceStat，它们具有 NetInterfaceStat.getRxBytes 和 NetInterfaceStat.getTxBytes 等功能。但是我相信 NetInterfaceStat 类需要一些初始化/构造函数。

谁能教我如何初始化这个类？这是我的代码示例。我在 Mac Osx Snow Leopard 和 Windows 7 上开发

```
package pack;

import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.util.*;
import java.util.Map.Entry;
import java.lang.management.*;
import org.hyperic.sigar.*;

public class systemMonitor extends Thread {
    private static Sigar sigar;
    NetInterfaceStat netstat;
    boolean truefalse=true;
public void run(){

try{

Thread.sleep(5000);
sigar = new Sigar();
System.out.print("System Monitor Started\n");
netstat = sigar.getNetInterfaceStat("en1");
System.out.print(sigar.getNetInterfaceList().toString());
}
catch(Exception e){
    System.out.print(e);
}

while(truefalse){

if(data.firstExecution!=true){
    try{
        System.out.print(netstat.getRxBytes()+" "+netstat.getTxBytes());
    }
    catch(Exception e){
    System.out.print(e);
    break;
    }
}
}
} 
```

如果我没有提供任何详细信息，我很抱歉^^ 我的问题的一些外部链接...... [http://www.hyperic.com/support/docs/sigar/](http://www.hyperic.com/support/docs/sigar/)

我也在论坛中发现了一个几乎相似的主题，但缺乏信息...... [Sigar网络速度](https://stackoverflow.com/questions/11034753/sigar-network-speed)

# android - 在列表视图中添加 viewpager 作为滚动标题

> ID：11264579
> 
> 赞同：8
> 
> 时间：2012-06-29T15:25:58.440
> 
> 标签：android

我正在尝试在列表标题中添加 Viewpager（使用支持 library4），但它不显示任何内容。这是我的代码，请帮忙。它将在列表标题中而不是作为一个项目，所以它不应该是一个问题。

```
public class CustomActivity extends ListActivity {

    private static int NUM_AWESOME_VIEWS = 20;
    private Context cxt;
    private CustomPageAdapter pageAdapter;

        /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        String[] items = { "this", "is", "my", "list",    "view", "data" };
        this.cxt = this;

        ViewPager viewPager =  new ViewPager(this);

        pageAdapter = new CustomPageAdapter();
        viewPager.setAdapter(pageAdapter);
        viewPager.requestLayout();

        getListView().addHeaderView(viewPager);
        setListAdapter(new ArrayAdapter<String>(this,  android.R.layout.simple_list_item_1, items));

    }

    private class CustomPageAdapter extends PagerAdapter{

            @Override
            public int getCount() {
                    return NUM_AWESOME_VIEWS;
            }

        /**
         * Create the page for the given position.  The adapter is responsible
         * for adding the view to the container given here, although it only
         * must ensure this is done by the time it returns from
         * {@link #finishUpdate()}.
         *
         * @param container The containing View in which the page will be shown.
         * @param position The page position to be instantiated.
         * @return Returns an Object representing the new page.  This does not
         * need to be a View, but can be some other container of the page.
         */
            @Override
            public Object instantiateItem(View collection, int position) {
                    TextView tv = new TextView(cxt);
                    tv.setText("Bonjour PAUG " + position);
                    tv.setTextColor(Color.WHITE);
                    tv.setTextSize(20);

                    ((ViewPager) collection).addView(tv,0);

                    return tv;
            }

        /**
         * Remove a page for the given position.  The adapter is responsible
         * for removing the view from its container, although it only must ensure
         * this is done by the time it returns from {@link #finishUpdate()}.
         *
         * @param container The containing View from which the page will be removed.
         * @param position The page position to be removed.
         * @param object The same object that was returned by
         * {@link #instantiateItem(View, int)}.
         */
            @Override
            public void destroyItem(View collection, int position, Object view) {
                    ((ViewPager) collection).removeView((TextView) view);
            }

            @Override
            public boolean isViewFromObject(View view, Object object) {
                    return view==((TextView)object);
            }

        /**
         * Called when the a change in the shown pages has been completed.  At this
         * point you must ensure that all of the pages have actually been added or
         * removed from the container as appropriate.
         * @param container The containing View which is displaying this adapter's
         * page views.
         */
            @Override
            public void finishUpdate(View arg0) {

            }

            @Override
            public void restoreState(Parcelable arg0, ClassLoader arg1) {

            }

            @Override
            public Parcelable saveState() {
                    return null;
            }

            @Override
            public void startUpdate(View arg0) {

            }

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-23T06:35:25.037

listview 页眉和页脚在 setadapter 之后显示。

如果您尝试 setadapter，但看不到 viewpager。检查viewpager的宽度和高度。

如果viewpager的宽度或高度值为0。创建LienarLayout（或anyViewGroup）并在viewgroup中添加view viewpager，layoutparame包括宽度和高度设置。和 addHeader 视图组。

我的英语水平不好，如果不明白，请加我评论。

我希望有所帮助。

# c++ - 将 Derived** 转换为 Base** 并将 Derived* 转换为 Base*

> ID：11264587
> 
> 赞同：4
> 
> 时间：2012-06-29T15:26:22.090
> 
> 标签：c++, pointers, inheritance

好的，我正在阅读FQA 中关于将 a 转换为 a以及为什么禁止它的问题的[这个条目](http://yosefk.com/c++fqa/inheritance-proper.html#fqa-21.2)，我知道问题是你可以分配一个不是 a 的东西，所以我们禁止这样做。`Derived**``Base**``Base*``Derived*`

到现在为止还挺好。

但是，如果我们深入应用这个原则，我们为什么不禁止这样的例子呢？

```
void nasty_function(Base *b)
{
  *b = Base(3); // Ouch!
}

int main(int argc, char **argv)
{
  Derived *d = new Derived;
  nasty_function(d); // Ooops, now *d points to a Base. What would happen now?
} 
```

我同意这样`nasty_function`做是愚蠢的，所以我们可以说让这种转换很好，因为我们启用了有趣的设计，但我们也可以说对于双重间接：你有 a `Base **`，但你不应该给它分配任何东西尊重，因为你真的不知道它`Base **`来自哪里，就像`Base *`.

那么问题来了：这个额外的间接层级有什么特别之处？也许关键是，只有一层间接，我们可以玩 virtual`operator=`来避免这种情况，而相同的机制在普通指针上不可用？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-29T15:35:36.100

```
nasty_function(d); // Ooops, now *d points to a Base. What would happen now? 
```

不，它没有。它指向一个`Derived`. 该函数只是更改`Base`了现有对象中的子`Derived`对象。考虑：

```
#include <cassert>

struct Base {
    Base(int x) : x(x) {}
    int x;
};
struct Derived : Base {
     Derived(int x, int y) : Base(x), y(y) {}
     int y;
};

int main(int argc, char **argv)
{
  Derived d(1,2); // seriously, WTF is it with people and new?
                  // You don't need new to use pointers
                  // Stop it already
  assert(d.x == 1);
  assert(d.y == 2);
  nasty_function(&d);
  assert(d.x == 3);
  assert(d.y == 2);
} 
```

`d`不会神奇地变成 a `Base`，是吗？它仍然是`Derived`，但它的`Base`一部分发生了变化。

* * *

在图片中:)

这是对象`Base`的`Derived`样子：

![布局](../Images/96270fe60ca6276e167e8e496d577311.png)

当我们有两个间接级别时，它不起作用，因为分配的东西是指针：

![分配指针 - 类型不匹配](../Images/5db37d244ebe6dbc0093d6e5b8985088.png)

请注意如何没有尝试更改所讨论的`Base`或对象：只有中间指针是。`Derived`

但是，当您只有一个间接级别时，代码会以对象允许的方式修改对象本身（它可以通过将赋值运算符设为私有、隐藏或删除 a 来禁止它`Base`）：

![仅使用一级间接分配](../Images/8ef3f0e280b66ecc940622e38d5ae912.png)

注意这里没有指针改变。这就像任何其他更改对象部分的操作一样，例如`d.y = 42;`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-29T15:36:33.647

不，`nasty_function()`并不像听起来那么讨厌。由于指针`b`指向*is-a* `Base`，因此为其分配 -value 是完全合法的`Base`。

注意：您的“哎呀”评论不正确：`d`仍然指向与`Derived`通话前相同！只是，`Base`它的一部分被重新分配（按价值！）。如果这让你的整体`Derived`失去一致性，你需要通过`Base::operator=()`虚拟化来重新设计。然后，在 中`nasty_function()`，实际上`Derived`将调用赋值运算符（如果已定义）。

因此，我认为，您的示例与指针对指针的情况没有太大关系。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-29T15:36:51.827

`*b = Base(3)`调用`Base::operator=(const Base&)`，它实际上`Derived`作为成员函数（包括运算符）存在于被继承。

然后会发生的事情（调用`Derived::operator=(const Base&)`）有时被称为**[“切片”](http://en.wikipedia.org/wiki/Object_slicing)**，是的，这很糟糕（通常）。`=`这是C++ 中“变得类似”运算符 (the ) 无处不在的一个可悲的结果。

（请注意，大多数 OO 语言（如 Java、C# 或 Python）中不存在“become-like”运算符；`=`在对象上下文中，这意味着引用赋值，类似于 C++ 中的指针赋值；）。

* * *

加起来：

强制转换`Derived**`->`Base**`是被禁止的，因为它们会导致**类型错误**，因为这样你最终可能会得到一个指向类型`Derived*`对象的类型指针`Base`。

您提到的问题不是类型错误；这是一种不同类型的错误：对象**接口**的误用`derived`，源于它继承了其父类的“变得类似”运算符的遗憾事实。

* * *

（是的，我故意在对象上下文中将 op= 称为“变得类似”，因为我觉得“赋值”不是一个显示这里发生的事情的好名字。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T15:38:46.033

好吧，您提供的代码很有意义。实际上，赋值运算符不能覆盖特定于 Derived 的数据，而只能覆盖基数。虚函数仍然来自 Derived 而不是来自 Base。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-29T15:40:25.043

```
*b = Base(3); // Ouch! 
```

这里的对象`*b`真的是 a `B`，它是 的基础子对象`*d`。只有基础子对象被修改，派生对象的其余部分没有改变，`d`仍然指向派生类型的同一个对象。

您可能不希望修改基数，但就类型系统而言，它是正确的。A`Derived` **是一个** `Base`。

对于非法指针情况，情况并非如此。A`Derived*`可转换为`Base*`但不是同一类型。它违反了类型系统。

允许您询问的转换与此没有什么不同：

```
Derived* d;
Base b;
d = &b;
d->x; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-29T16:48:48.150

通读我的问题的好答案，我想我明白了问题的重点，它来自 OO 中的第一原则，与子对象和运算符重载无关。

关键是您可以在需要 a`Derived`时使用 a `Base`（替换原则），但您**不能**`Derived*`在需要 a时使用 a `Base*`，因为可能会将派生类实例的指针分配给它。

使用此原型获取一个函数：

```
void f(Base **b) 
```

`f`可以用 做很多事情`b`，除其他外取消引用它：

```
void f(Base **b)
{
  Base *pb = *b;
  ...
} 
```

如果我们传递给`f`a `Derived**`，则意味着我们将 a`Derived*`用作 a `Base*`，这是不正确的，因为我们可以将 a 分配`OtherDerived*`给`Base*`而不是给`Derived*`。

另一方面，采用此功能：

```
void f(Base *b) 
```

如果`f`dereferences `b`，那么我们将使用 a`Derived`代替 a `Base`，这完全可以（前提是您给出了类层次结构的正确实现）：

```
void f(Base *b)
{
  Base pb = *b; // *b is a Derived? No problem!
} 
```

换句话说：替换原则（使用派生类而不是基类）适用于**实例**，而不是**指针**，因为指针的“概念”`A`是“指向继承的任何类的实例`A`”，并且继承的类`Base`集严格包含继承的类集`Derived`。

# sql - 在执行任何其他插入之前，如何强制插入触发器在其插入之后执行？

> ID：11264589
> 
> 赞同：1
> 
> 时间：2012-06-29T15:26:45.270
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-server-2008-r2

这个问题是关于并发高速插入的。我必须承认这在我看来很有趣。

我正在使用 SQL Server 2008 R2 执行 T-SQL 插入和插入触发器之后。

我想确保在插入与其后插入触发器之间不会执行任何命令。

使用隔离级别会导致死锁或**不能解决**问题。

我正在使用的过程是从菲尔到 [SQL Server 依赖身份的答案/解决方案 - 有这样的事情吗？](https://stackoverflow.com/questions/10769780/sql-server-dependent-identity-is-there-such-a-thing)

问题是：

有时插入在前一个插入与其后插入触发器之间，导致此结果：

```
RoomID  ItemID  ItemDescription ID
------  ------  --------------- --
7       1       Door             1
7       2       Window (West)    2
7       3       Window (North)   3
8       1       Door             4
8       2       Table #1         5
8       3       Table #2         6
7       4       Table #1         7
8       4       Chair #1         8
7       6       Table #2         9
7       5       Table #3        10
8       5       Chair #2        11 
```

参见 ID #9 和 #10。Thair ItemID 已切换。ItemID 应该分别是 5 和 6，而不是 6 和 5，但第 10 次插入可能发生在 #9 的后插入触发器完成执行之前。

此问题发生在少于 0.5% 的插入中：2 次开关涉及 4 条记录，插入次数为 1000 次或更少。是的，有时没有开关发生。

一步提高隔离级别无济于事，甚至会导致更多的key/dependent-keys不时切换。提高两个隔离级别会导致死锁。

降低隔离级别会减少开关，但它们仍然会被创建。

在每次插入之前开始提高隔离级别并在触发器结束时移回默认隔离级别会导致死锁（在我的实验中，所有插入都没有提交！）。

有没有人看到出路？

如何强制插入及其后插入触发器一起执行，禁止其他插入到同一张表之间？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T15:37:32.853

如何使用[而不是插入触发器](http://msdn.microsoft.com/en-us/library/ms175089%28v=sql.105%29.aspx)？

当然，您必须自己进行实际插入，但这是 SQL Server 中支持的行为。没有*前插入触发器*或类似的东西。

无论如何，您仍然可以在此类触发器中使用当前的触发器处理逻辑。

为了尝试想象一个更好的解决方案，您能解释一下您要做什么吗？此表中是否插入了多个线程？这是一个实时过程吗？

> 就像拍卖一样。是的，该表中插入了多个线程。问题在后面，但发生了。还没有抱怨的理由，但可能有（现在发生的转变不是在关键点）。发起插入的用户需要知道他们在订单列表中的优先级。ItemID 几乎立即使用，因此，可能不会在稍后需要几毫秒时即时计算（使用 select count(*)... where..）。错误的ItemID顺序可能会导致一个人的损失和另一个人的不正当收益。

好吧，多线程插入在 SQL Server 中几乎从来都不是一个好主意。至少不是没有某种同步。

你需要某种排队。例如，我有一个类似的系统，每天需要插入 2.5-3 百万条记录（嗯，工作时间）。

起初我还使用 8-16 个线程直接在数据库上进行插入。我注意到了这种行为：死锁。所以我开始考虑如何将这些消息排队，以便随时插入 1 个线程（1 个连接）。

我最终在 MSMQ（事务性）中对这些记录进行了排队。其他一些过程从这里（也是事务性的）来并把它们分批插入到数据库中。我的记录保证以正确的顺序出现，也就是发送它们的顺序。

因此，这个辅助过程会插入成批的记录，并且像您一样，我需要在插入之前进行一些预处理，我正在使用而不是插入触发器来执行此操作。在那里，我可以“安静地”更新整个`inserted`表格，而不必担心有人会来弄乱我的东西。

这只是一个想法。您可能还需要考虑使用 Service Broker 进行排队，特别是如果您不想在 SQL Server 之外进行处理。

此外，值得尝试的是具有[快照隔离级别和行版本控制](http://msdn.microsoft.com/en-us/library/tcbchxcb%28v=vs.100%29.aspx)的事务，但我建议采用 MSMQ/Service Broker 方式。

# sorting - Ant中的慢排序

> ID：11264594
> 
> 赞同：1
> 
> 时间：2012-06-29T15:27:01.283
> 
> 标签：sorting, ant, copy

我想复制映射网络目录上的最新文件。我已经将网络目录映射到`${drive.letter}`使用`NET USE`.

```
<copy todir="${dest.dir}" overwrite="true">
    <first>
        <sort>
            <fileset dir="${drive.letter}\">
                <filename name="FileIWant-*.tar.gz" />
            </fileset>
            <date xmlns="antlib:org.apache.tools.ant.types.resources.comparators"/>
        </sort>
    </first>
</copy> 
```

这项任务需要很长时间才能完成，我想知道为什么需要这么长时间以及我是否可以加快速度。网络目录中有 20K+ 文件。排序任务是否先运行，然后是文件集选择器？或者它只是需要一段时间，因为它正在通过网络？

我能想到的唯一其他解决方案是`FileIWant-*.tar.gz`在本地复制所有文件然后执行排序，但我不确定副本是否会更改时间戳。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T20:21:16.603

如果您使用的是 UNIX，我会说使用在单行命令行中执行此操作。使用 ls/find、sort 和 head，这可以是一个单行。这样做的好处是不需要很多额外的工作（Ant 正忙于构建文件集并通过网络一次做很多事情）并让操作系统对其进行优化。

然后我搜索了如何在 Windows 中执行此操作，并找到[了这一](https://stackoverflow.com/questions/97371/how-do-i-write-a-windows-batch-script-to-copy-the-newest-file-from-a-directory)行。同样的想法。我怀疑在操作系统级别上做起来会更快。（虽然没有本地文件那么快。）

另一种选择是运行 dir 并解析/排序该结果。如果必须在运行时完成，我无法想象在本地复制文件会更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T18:08:40.737

我最终为我编写了一个 bat 脚本来执行此操作，因为它要快得多，而且我只是从我的 Ant 脚本中调用它。

```
echo Logging on to Server
net use %NetworkDir% 
if not errorlevel 0 goto error

pushd  %NetworkDir%
for /f "tokens=*" %%A in ('dir %FileIWant% /b /o:D') do (set sourceFile=%%A)
echo Copying %%A...
xcopy /V/F/Z/Y "%sourcefile%" "%copyTo%"
popd 
```

# abap - 防止创建特定的信息类型记录？

> ID：11264600
> 
> 赞同：1
> 
> 时间：2012-06-29T15:27:20.043
> 
> 标签：abap, badi, sap-hr

我的目标是保护用户免受某些 HR 人员创建 105 信息类型（通信）的影响。我发现每次保存信息类型更新时都会调用**HRPAD00INFTY BADI。**但问题是我无法阻止在**IN_UPDATE**方法中创建/更新信息类型。

有人知道问题的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T08:34:35.667

在客户出口的帮助下解决了问题（[http://wiki.sdn.sap.com/wiki/display/ABAP/Customer+Exits+%28CMOD%29](http://wiki.sdn.sap.com/wiki/display/ABAP/Customer+Exits+%28CMOD%29)）在我们的例子中，我们使用**PBAS0001**出口的组件**EXIT_SAPFP50M_002**

# jquery - jCarousel 属性

> ID：11264602
> 
> 赞同：0
> 
> 时间：2012-06-29T15:27:22.217
> 
> 标签：jquery, jcarousel

我正在与一位客户合作调整他们的徽标轮播速度，但我对 jQuery 的了解有限。我在这里（stackoverflow）和 Sorgolla 文档（[http://sorgalla.com/projects/jcarousel/](http://sorgalla.com/projects/jcarousel/)）中对其进行了一些研究，但我无法弄清楚如何将这些属性添加到现有脚本中。客户只想延长滚动之间的时间，我认为这是“自动”属性？

任何帮助/指导将不胜感激

* * *

**此轮播中使用的脚本如下：**

```
$(document).ready(function(){

  $('#mycarousel').css('visibility', 'visible');

}); 
```

* * *

可以在实时站点上找到一个示例：http: [//www.trustivo.com](http://www.trustivo.com)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T15:37:50.760

我查看了您页面的源代码，实际启动轮播的代码如下所示：

```
jQuery('#mycarousel').jcarousel({
    visible:6,
    auto: 4,
    scroll:6,
    wrap: 'circular',
    animation:"slow",
    initCallback: mycarousel_initCallback
}); 
```

`auto: 4`意味着滚动每 4 秒发生一次。增加数字以减少滚动频率。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T15:37:24.117

您可以通过更改动画选项来更改轮播速度。它默认为 400 毫秒，但可以像这样覆盖：

```
$("#carousel").jcarousel({ animation: 400 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T15:35:25.343

尝试：

```
$(document).ready(function() {

    // $('#mycarousel').css('visibility', 'visible');

    $('#mycarousel').jcarousel({
        auto: 5
    });
}); 
```

该文档对“自动”配置变量并不完全清楚。像许多其他类似的插件一样，该值可能以毫秒为单位，这意味着您必须将其设置为 5000（而不是 5）才能获得 5 秒。

我认为您不需要第一行，因此我已将其注释掉，但如有必要，请将其添加回来。

# macos - 是否可以动态启用/禁用 OSX 服务菜单中的项目？

> ID：11264606
> 
> 赞同：0
> 
> 时间：2012-06-29T15:27:32.570
> 
> 标签：macos, cocoa, service, menu

我有一个在 OSX 服务菜单中注册服务的应用程序，它工作正常。

只有当用户运行应用程序并输入密码（应用程序提供加密）时，应用程序才能执行服务操作。

有没有一种方法可以禁用甚至仅在满足这些条件时才显示服务菜单？我似乎找不到任何表明它是可能的东西。

谢谢

# java - 使用 JPA Hibernate 没有 Spring 的多个数据库

> ID：11264607
> 
> 赞同：0
> 
> 时间：2012-06-29T15:27:33.187
> 
> 标签：java, hibernate, jpa

我有一个没有 Spring 的 JPA Hibernate 应用程序，我需要连接到多个数据库（具有相同的结构）。

将为每个客户端创建数据库，并且必须使用相同的实体管理器。请我需要一些关于如何做到这一点的想法。我没有使用弹簧。我的应用程序使用 MySql、JPA2、Hibernate 和 JSF。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T15:39:37.790

如果一切都相同，除了 dbname/username/pass，然后创建一个带有持久性单元的 persistence.xml，将所有静态的东西放在那里。

然后使用以下方法创建实体管理器：

```
javax.persistence.Persistence.createEntityManagerFactory(String persistenceUnitName, Map properties); 
```

在地图中提供可变参数，如下所示：

```
properties.put("hibernate.connection.url", "jdbc:postgresql://127.0.0.1/test");
properties.put("hibernate.connection.username", "joe");
properties.put("hibernate.connection.password", "pass"); 
```

# c# - 如何在ac#接口中使用泛型类型参数

> ID：11264609
> 
> 赞同：2
> 
> 时间：2012-06-29T15:27:39.500
> 
> 标签：c#, generics, interface, parameters

我有

```
public interface IPersistedModel<TModel, TIdentifier> 
```

我想定义一个接口，其中我有一个使用上述泛型类型参数的泛型方法。有没有办法做到这一点？我已经尝试了以下但都没有编译。

```
public interface IModelCollection1<IPersistedModel<TModel, TIdentifier>>
{
    IEnumerable<TModel> ReadCollection(TIdentifier identifier);
} 
```

或者

```
public interface IModelCollection2<T> where T : IPersistedModel<TModel, TIdentifier>
{
    IEnumerable<TModel> ReadCollection(TIdentifier identifier);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T15:33:41.123

不幸的是，您需要在接口本身中包含泛型类型：

```
public interface IModelCollection<T, TModel, TIdentifier> 
       where T : IPersistedModel<TModel, TIdentifier>
{
    IEnumerable<TModel> ReadCollection(TIdentifier identifier);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T15:33:31.600

您可以简单地使用一个泛型方法，该方法仅向该方法添加泛型参数

```
class A
{

static void Swap<T>(ref T lhs, ref T rhs)
{
    T temp;
    temp = lhs;
    lhs = rhs;
    rhs = temp;
}

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T15:35:51.730

尝试这个：

```
public interface Ione <T, U> where T : IInterfaceOne<T> where U : IInterfaceTwo<U>
{

}

public interface IInterfaceOne<T>
{

}

public interface IInterfaceTwo<U>
{

} 
```

# c# - 如何强制一个字段/属性代表某种类型的物理量？

> ID：11264610
> 
> 赞同：2
> 
> 时间：2012-06-29T15:27:41.487
> 
> 标签：c#

在某些类型的代码（例如模拟/游戏/优化）中，许多物理量/属性被存储、操作和暴露给对象（位置、速度、距离、面积、体积、时间、时差）。在这些类型的代码中，所有这些量通常由浮点数表示，即在 c# 中是双精度数。

这允许您将时间添加到距离、面积添加到体积、时间添加到时间以及位置添加到位置。

但你*永远*不想这样做。您只想将时间差添加到时间，添加到其他距离或位置的距离，并将区域与距离相乘。尽管如此，还是很容易出错，尤其是在处理其他人的代码时。

有很多选择可以减轻这种危险。您可以定义表示各种物理量的自定义类，然后以编程方式禁止某些类型的交互。或者您遵守严格的命名约定（例如 delay_timedifference）。在什么情况下（如果有的话），这两个选项中哪一个是最好的？如何实施第一个选项？如何为第二个选项命名？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T15:31:40.220

通常，使用第二个选项，但更多是为了方便。命名变得很明显你正在处理什么，即：命名属性`Area`和`Volume`，但即使那样，也存在单位问题。

您可以通过创建一整套自定义类（或不可变结构类型）来处理第一种情况来处理每种不同的组合，这可以很好地工作，但会使代码使用起来更加麻烦。框架中的`DateTime`struct 就是一个很好的例子 - 在它的核心，它基本上只是一个长整数值，但它被包装到一个 struct 中以防止它在某个时刻被使用。

请注意，其他语言对此有选择 - 例如，F# 允许在语言级别处理[单元](http://msdn.microsoft.com/en-us/library/dd233243.aspx)，但在 C# 中不支持任何方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T15:34:17.947

我认为将它们实现为结构而不是类是最有意义的，因为它们是值类型。您希望进行运算符重载以确保适当的运算符可用于相同类型的其他结构和适当的不同类型。您可能还想重载 ToString 函数以输出标量值，可能带有单位。

您还可以创建通用结构来创建其他结构的向量 - 这些可以是 2 维（x 和 y 属性）、3 维（x、y 和 z 属性）或 N 维（值数组）。这些结构还可以具有适当的运算符重载来执行向量计算。如果你做得正确，这将是一种与数据交互的非常自然的方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T15:35:06.883

您描述的两个选项都是可行的，但它们都有缺点。第一个选项导致太多类（然后你需要定义很多关系），第二个可能容易出错。

更好的选择可能是创建一个自定义类，它既封装了浮点数，也封装了单位列表及其多重性。例如每秒 1 米可能变成 {n=1, types={length:1, time:-1}}。然后，您可以强制禁止任何数字进行比较、加法或减法，除非它们的单位相同。乘法和除法会将匹配类型的多重性加在一起。

例如。

```
1 m/s * 4 seconds = 4 meters
{n=1, types={length:1, time:-1}} * {n=4, types={time:1}} = {n=4, types={length:1,time:0}} 
```

# c# - 如何在 WinRt Xaml 中访问 UserControl 的父资源

> ID：11264616
> 
> 赞同：0
> 
> 时间：2012-06-29T15:28:09.657
> 
> 标签：c#, .net, xaml, windows-runtime, winrt-xaml

我有这个 xaml 代码：

```
<Common:LayoutAwarePage.Resources>
   <CollectionViewSource x:Name="cvs" IsSourceGrouped="true" />
</Common:LayoutAwarePage.Resources>
<Grid>
    <Full:TestSnapPage Name="MainView" />     
    ... 
```

从 UserControl 的代码隐藏中，我如何访问 CollectionViewSource？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T04:27:25.073

1.  绑定`collectionviewsource`到标签并从后面的代码中访问它

    ```
    < Full:TestSnapPage Name="MainView" Tag="{Binding Source={StaticResource cvs}}"/> 
    ```

2.  走到父页面，并在后面的代码中访问资源

    ```
     var parentPage = GetParentsPage(this); 
            if (parentPage != null)
            {
               //parentPage.Resources["cvs"]
            }

            private ParentPage GetParentsPage(FrameworkElement @this)
            { 
                FrameworkElement temp = @this;
                while (temp.Parent != null)
                {

                    if (temp.Parent is ParentPage)
                        return temp.Parent as ParentPage;

                    temp = temp.Parent as FrameworkElement;
                }
                return null;
            } 
    ```

3.  使用[MVVMLight](http://mvvmlight.codeplex.com/)框架在视图之间（或视图模型之间）进行通信。

# joomla - 此显示的模板不可用

> ID：11264622
> 
> 赞同：4
> 
> 时间：2012-06-29T15:28:30.773
> 
> 标签：joomla, joomla2.5, joomla-template

我有一个 joomla 模板，我安装了模板，一切都很好，但是当我选择这个模板并看到页面时，我有这个消息

此显示的模板不可用。请联系站点管理员。

任何的想法！！！

谢谢

大家好，感谢您的评论，但我有同样的错误......我在 joomla 中看到了其他模板，我看到我的模板没有 index.php 只有 index.html 和 css 文件和 javascript 文件。

我更改了一个 htaccess.html 文件...像这样

我包括 DirectoryIndex index.html index.php

并像这样 .htaccess 更改这个 htaccess.html 的扩展名

但我仍然有同样的错误。

任何的想法！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T15:38:25.233

这种情况发生在我身上好几次了，在所有情况下都是模板安装有问题，或者文件丢失。我的后备方案一直是将原始文件解压缩到已安装的文件夹中，或者在我的笔记本电脑上安装模板并将该模板文件夹通过 FTP 传输到服务器。总是证明模板安装中缺少文件/文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T08:26:44.277

检查您是否在名称为“模板”的 url 或 post 方法中传递任何参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-08T10:34:13.920

我碰巧将文件（index.php）从/template 移动到/template/images 中。有时使用 Cyber​​duck 会发生这种情况，而您却没有意识到。

```
The template for this display is not available. Please contact a Site administrator. 
```

我确定了文件并将其放回原处，一切正常。

希望能帮助到你

# objective-c - iphone obj-c错误：使用Core Plot时分配给只读属性

> ID：11264624
> 
> 赞同：1
> 
> 时间：2012-06-29T15:28:36.807
> 
> 标签：objective-c, ios, xcode, core-plot

所以我正在尝试使用 Core Plot 创建一些图表，但是对于以下代码行：

```
CPTLineStyle *lineStyle = [[[CPTLineStyle lineStyle] alloc] init];
[lineStyle lineColor] = [CPTColor blackColor];
[lineStyle lineWidth] = 2.0f; 
```

当很明显 lineColor 和 lineWidth 是可分配属性时，我收到“分配给只读属性”错误（对于第二行和第三行）。我已经为此绞尽脑汁一段时间了，所以希望有人知道问题可能是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T01:00:56.910

需要使用CPTMutableLineStyle，CPTLineStyle中的所有属性都是只读的，只能在初始化LineStyle时设置。
而且您设置属性的语法是错误的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T15:29:47.813

这与核心情节无关。你的语法是错误的。任何一个：

```
[lineStyle setLineColor:[CPTColor blackColor]];
[lineStyle setLineWidth:2.0f]; 
```

或者：

```
lineStyle.lineColor = [CPTColor blackColor];
lineStyle.lineWidth = 2.0f; 
```

# magento - Magento 无需密码即可迁移客户。

> ID：11264628
> 
> 赞同：4
> 
> 时间：2012-06-29T15:28:47.113
> 
> 标签：magento

我正在将一个过时的 Saas 站点迁移到一个新的 magento 企业安装，并且不相信我能够转移客户密码。它们是使用 Perl crypt() 函数加密的。

我想知道最好的工作流程可能是什么，因为我相信其他人一定遇到过类似的事情。

我不介意必须发送一封电子邮件，要求我们所有的客户创建一个新密码，或者在他们下次登录时要求他们创建一个新密码。

但是我应该在密码字段中输入什么进行导入？为了安全起见，我肯定不能给每个人相同的临时密码。

我们有近 123,000 名客户（其中许多可能不再活跃），因此可能需要一段时间。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T22:08:56.003

我认为最好的方法是自动生成密码以及帐户，所有这些都使用 Magento 的内置功能，如下所示：

```
$customer = Mage::getModel('customer/customer');

$password = '123456';
$email = 'testuser@test.com';

$customer->setWebsiteId(Mage::app()->getWebsite()->getId());
$customer->loadByEmail($email);

if(!$customer->getId()) { // if customer does not already exists, by email
    // new data
    $customer->setEmail($email);
    $customer->setFirstname('Johnny');
    $customer->setLastname('Doels');
    $newPassword = $customer->generatePassword(); // generate a new password
    $customer->changePassword($newPassword); // set it

} else {
    // do something here for existing customers
}

try {
    $customer->save();
    $customer->setConfirmation(null);
    $customer->save();
    $customer->sendPasswordReminderEmail(); // save successful, send new password
}

catch (Exception $ex) {
    //Zend_Debug::dump($ex->getMessage());
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T15:53:50.950

> 正如这个 wiki 页面所指出的，Magento 支持加盐和不加盐的 MD5 哈希。这在技术上是正确的，但让它工作起来就这么简单。
> 
> 基本上，您需要使用空字符串作为盐复制 MD5 散列密码。
> 
> 例如，取密码“foobar”，MD5 哈希为“3858f62230ac3c915f300c664312c63f”。如果你把它直接放在数据库中，它将不起作用。身份验证系统在密码哈希中查找“：”以获取盐。最重要的是，在末尾添加一个“：”，Magento 将对密码进行加盐，因此您只需返回常规的 MD5 哈希值。
> 
> “3858f62230ac3c915f300c664312c63f”->“3858f62230ac3c915f300c664312c63f：”</p>

*   [http://www.magentocommerce.com/boards/viewthread/16700/](http://www.magentocommerce.com/boards/viewthread/16700/)
*   [http://www.magentocommerce.com/wiki/doc/webservices-api/api/customer](http://www.magentocommerce.com/wiki/doc/webservices-api/api/customer)

您也可以简单地随机创建密码，它们是一种散列方式，客户可以轻松地重置密码以生成新密码，该密码将通过电子邮件发送给他们，而不是尝试导入现有密码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-20T22:25:51.913

重置用户密码将是我最后的手段。如果您知道用于加密密码的散列方法，那么您不需要重置密码。

将客户密码作为哈希和盐组合迁移到 magento 数据库中。然后，您可以在 magento 中重载密码散列方法，以检查客户是旧散列还是旧散列或新散列。

如果客户有旧的哈希，请使用旧的 crypt 方法和 salt 来检查密码。如果你愿意，你可以更新到它成功验证的新方法。

如果您能够在 php 中创建散列函数，那将是最简单的。或者，只需从 php 调用 perl 程序。

# php - php json_encode 没有转义新行

> ID：11264631
> 
> 赞同：14
> 
> 时间：2012-06-29T15:28:57.950
> 
> 标签：php, json

我在使用 json_encode 时遇到了一些问题。

当我对具有新行的数组进行 json_encode 时，它​​不会转义新行，而是删除 \ 并保留 n。

```
ex: $array = array('name'=> "some text \n\r text");
$results = json_encode($array); 
```

它保存`some text nr text`在数据库中。

我正在使用`php 5.3.8`。

**编辑：**

这是我正在使用的原始代码

```
$attr = array();
for($i=0; $i < count($_POST['key']); $i++){
    $attr[$_POST['key'][$i]] = $_POST['value'][$i];
}
echo json_encode(array('custom' => $attr)); 
```

这些`POST`值来自表单。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-29T15:36:30.113

**[换行符不是 JSON 字符串中的有效字符](http://json.org/ "JSON 规范")**。这是预期的行为：

> ### 字符
> 
> 除 " 或 \ 或控制字符外的任何 Unicode 字符
> 
> *   \"
> *   \
> *   /
> *   \b
> *   \F
> *   \n
> *   \r
> *   \t
> *   \u 四位十六进制数字

JSON 将这些控制字符转义为列表中的控制字符。

所以现在我们有了`'\n'`（字面意思是一个反斜杠后跟'n'），如果没有正确转义，它将在数据库中保存为`n`. 这**就是**您遇到的问题。

### 解决方案

使用准备好的语句正确转义您存储在数据库中的字符串中的所有斜杠。这会将它们保存为`'\n'`，您可以`"\n"`在检索数据时将其转换为。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-29T15:33:50.100

我不相信 json_encode 是你的问题。我的猜测是您的数据库将 \ 解释为转义字符，因此它只是将它们剥离出来。

[为了解决这个问题，只需使用addlashes](http://us3.php.net/addslashes)转义转义字符：

```
$results=addslashes($results); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-29T15:35:55.177

您可以手动转义它们：

```
$array = array('name'=> "some text \n\r text");

$results = json_encode(array_filter($array, function($arr) use ($array){
        return preg_replace('~\\[nrtfd]~', '\\\\$1', $arr);
}));

print_r($results); 
```

您可以扩展您自己的 json_encode 函数，并替换您对`json_encode`to的使用`my_json_encode`：

```
function my_json_encode($json){
    $results = json_encode(array_filter($json, function($arr) use ($array){
        return preg_replace('~\\[nrtfd]~', '\\\\$1', $arr);
    }));

    return $results;
}

print_r($results); 
```

仅供参考，以上返回：`{"name":"some text \n\r text"}`而不是`{"name":"some text nr text"}`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-30T04:10:57.613

I figured out this issue. it is not in json_encode problem. it is an error while saving to database.

The problem is **magic_quotes_gpc** enabled in server. in my application if magic_quotes enabled i am striping the slashes.

i disabled **magic_quotes_gpc**. working fine now.

Thanks for every body.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-11-05T05:34:41.363

我使用这个命令来清除反斜杠。

```
$info = file_get_contents('my_file.txt');
**$info = str_replace(array("r\n","\n", "\r"), "", $info);**    
$info = json_decode($info); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-12-05T08:28:46.143

您可以`JSON_PRETTY_PRINT`按照 PHP 手册中的说明使用。

[https://www.php.net/manual/function.json-encode.php](https://www.php.net/manual/function.json-encode.php)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-09-04T17:45:47.300

你可以用`PHP_EOL`换新线。在哪里包含新行取决于您想要的方式。在下面的情况下，我需要在最后一个右方括号和每个大括号之后换行：

```
tit1: {
"prop1" : [ "", "", []], 
"prop2" : [ "", "", []]
}, 
tit2: {
"prop1" : [ "", "", []], 
"prop2" : [ "", "", []]
} 
```

功能是

```
$jsonDataTxt = $this->own_format_json($jsonData);
file_put_contents("C:/Users/mm/Documents/Data.json", $jsonDataTxt);

function own_format_json($json, $html = false) {
        $tabcount = 0; 
        $result = ''; 
        $bnew = 0;
        $brack=0;  
        $tab = "\t"; 
        $newline = PHP_EOL; 
        for($i = 0; $i < strlen($json); $i++) { 
            $char = $json[$i]; 
            if($char!==',' && $bnew===1) { $bnew=0; $result.=  $newline; } //insert new line after ], which is not proceeded by ,
            switch($char) { 
                case '{': 
                    $tabcount++; 
                    $result .= $char . $newline . str_repeat($tab, $tabcount); 
                    break; 
                case '}': 
                    $tabcount--; 
                    $result = trim($result) . $newline . str_repeat($tab, $tabcount) . $char . $newline; 
                    break; 
                case '[': 
                    $brack++; 
                    $result .= $char;// . $newline . str_repeat($tab, $tabcount); 
                    break; 
                case ']': 
                    $brack--;
                    $result .= $char;// . $newline . str_repeat($tab, $tabcount); 
                    if($brack===0) { $bnew=1; }
                    //echo "<br><br> case  ]  char=".$char.',   brack='.$brack. ",  bnew=".$bnew.",   result=".$result ; 
                    break; 
                case ',': 
                    $result .= $char;// . $newline . str_repeat($tab, $tabcount); 
                    if($bnew===1) { $bnew=0; $result.=  $newline; } //insert new line after ],
                    break; 
                case '"': 
                    $result .= $char; 
                    break; 
                default: 
                    $result .= $char; 
            } 
        } 
    return $result; 
   } 
```

# visual-studio - 为什么我看到“？？” 在 HeapFree 之后的 Visual Studio 内存窗口中？

> ID：11264633
> 
> 赞同：1
> 
> 时间：2012-06-29T15:29:08.207
> 
> 标签：visual-studio, debugging, visual-studio-2008, visual-c++

我正在使用 Visual Studio 2008 进行调试。我使用分配了一个大缓冲区（大约 12MB）

`buf = new unsigned char[bigValue];`

稍后当我使用 释放缓冲区时`delete[] buf;`，我看到“?? ?? ?? ??” 调试内存窗口中的值。通常我会看到“fe ee fe ee”。我的内存管理是否出现了我没有看到的问题？

我发现了几个相关的问题：

[为什么我只能看到“？？” 在 0x70000 之前的任何地址](https://stackoverflow.com/questions/3108651)

[在 Visual Studio C++ 中，内存分配表示形式是什么？](https://stackoverflow.com/questions/127386)

但他们没有回答这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T15:45:58.700

通常，这`??`意味着进程地址空间的那部分没有被映射。也就是说，这些地址不再被进程使用。要直接观察这种行为，您可以`VirtualAlloc`使用一块内存，在“内存”窗口中观察它，然后`VirtualFree`将其释放回操作系统。

该`0xfe`标志是一个标记值，调试堆使用该值填充仍归堆所有的已释放内存。如果您释放了一个非常大的内存块，它很可能会立即释放回操作系统，而不是从堆中返回。

# c# - 使用 C# 和 XAML 在 Metro App 中自动滚动

> ID：11264636
> 
> 赞同：3
> 
> 时间：2012-06-29T15:29:15.083
> 
> 标签：c#, xaml, windows-8, microsoft-metro

我正在制作这个 Metro 应用程序，它有一个包含 3 列的父网格。在 col# 1 中，我有这个登录表单。我希望它在应用程序加载时出现在中心。在 col# 0 和 col# 2 中分别使用 Sign Up 和 Recover 密码。所以我把网格放在滚动查看器中：`

```
<ScrollViewer HorizontalScrollBarVisibility="Auto"
              VerticalScrollBarVisibility="Disabled">

<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="*" />
        <RowDefinition Height="3*" />
        <RowDefinition Height="*" />
    </Grid.RowDefinitions>

    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*" /> <!--For Sign Up-->
        <ColumnDefinition Width="*" /> <!--For Sign In-->
        <ColumnDefinition Width="*" /> <!--To Recover Password-->
    </Grid.ColumnDefinitions>` 
```

我不想明确设置网格的宽度。因为那样我要么必须针对非常大的分辨率或非常小的分辨率优化尺寸。我想要的是中间的 col#1，在 col#1 的两侧可以看到一些 col#0 和 col#2。

我应该将网格的宽度设置为什么，以便无论分辨率如何，它看起来都是一致的？以及如何自动滚动并将 col#1 放在中间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T21:04:35.960

我认为您需要以编程方式捕获屏幕宽度。我是 HTML/JS 开发人员，所以我不知道 XAML/C# 中的属性是什么。然后你可以设置你的网格大小相对于它。然后，如果它发生变化，您的网格会更大。就滚动而言，我认为您正在寻找类似于我在这里写的内容（http://www.codefoster.com/post/2012/06/24/How-to-Make-Your-Grid-Pan -Automatically.aspx），但您必须在 JavaScript 和 C# 之间进行转换，因为我是用 JS 编写的。希望有帮助。

# php - 如何使用 Kohana auto_login()？

> ID：11264641
> 
> 赞同：0
> 
> 时间：2012-06-29T15:29:38.187
> 
> 标签：php, kohana

相当基本的问题，但我无法找到任何资源。如何使用 auto_login()。

建议如果方法类似，

```
Auth::instance()->logged_in()
Auth::instance()->login() 
```

它应该是：

```
Auth::instance()->auto_login() 
```

但是没有找到这个方法。我该如何使用它？还是在新版本中删除了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T20:29:11.950

您不必像那样直接使用它。可以在get_user方法中使用，logged_in方法也可以使用。

ORM Auth Driver 中的这种用法示例： [https ://github.com/kohana/orm/blob/3.2/master/classes/kohana/auth/orm.php](https://github.com/kohana/orm/blob/3.2/master/classes/kohana/auth/orm.php)

这是学习如何为 Auth 创建自己的驱动程序的一个很好的起点。

# cakephp - Cakephp 嵌套包含

> ID：11264645
> 
> 赞同：1
> 
> 时间：2012-06-29T15:29:59.173
> 
> 标签：cakephp, containable

我有这个结构和表格的树模型：

```
Rate:
id, model_name, object_id
1 , SocialPost, 12
public $belongsTo => array(
                'SocialPost' => array(
                    'className' => 'Social.SocialPost',
                    'foreignKey' => 'object_id',
                    'conditions' => array(
                        'Rate.object_id = SocialPost.id',
                    ),
                )
            ) 
```

社会邮报：id，file_id

```
public $hasOne = array(
    'File' => array(
        'className' => 'File',
        'foreignKey' => false,
        'conditions' => array(
            'File.id = SocialPost.file_id',
        ),
    ),
); 
```

文件：id，标题

* * *

所有树模型都作为可包含的

此代码在 SocialPostsController 中运行良好：

```
$posts = $this->SocialPost->find('all', array(
        'limit' => 5,
        'contain' => array(
            'File'
        )

    )); 
```

输出： http: [//pastie.org/private/9ixxufncwlr3tofgp8ozw](http://pastie.org/private/9ixxufncwlr3tofgp8ozw)

但是 RatesController 中的这段代码为所有 SocialPost 返回相同的文件：

```
$mostRated = $this->Rate->find('all', array(
        'limit' => $count,
        'contain' => array(
            'SocialPost' => array(
                'File'
            )
        )

    )); 
```

输出： http: [//pastie.org/private/lbqryo1gxgvxjb5omfwrw](http://pastie.org/private/lbqryo1gxgvxjb5omfwrw)

这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T13:32:24.323

我认为您的关联都应该属于：

```
class Rate extends AppModel {
  public $belongsTo = array(
    'SocialPost' => array(
      'className' => 'Social.SocialPost',
      'foreignKey' => 'object_id',
    )
  );
}

class SocialPost extends AppModel {
  public $belongsTo = array(
    'File'
  );
} 
```

然后你的 find 命令看起来像：

```
$mostRated = $this->Rate->find('all', array(
  'limit' => $count,
  'contain' => array(
    'SocialPost.File'
  )
)); 
```

另外，我会仔细检查您`'className' => 'Social.SocialPost'`是否正确。这意味着该`SocialPost`模型存在于一个名为`Social`.

# reporting-services - 过滤参数列表时级联多值参数违反 CONSTRAINED 标志

> ID：11264646
> 
> 赞同：0
> 
> 时间：2012-06-29T15:30:01.833
> 
> 标签：reporting-services, ssrs-2008, reportbuilder

在我们的多维数据集中，我们将层次结构`All`作为顶层的默认成员，`All`然后显示在 SSRS 报告的参数列表中。

由于当参数是多值参数时，参数列表中同时包含`All`和是多余`(select all)`的，因此我们希望摆脱`All`在参数列表中看到的选项。我们通过在自动生成的数据集中为参数 (ParameterLevel <> 0) 设置过滤器来实现这一点。

当我们引入级联参数时，麻烦就开始了......似乎当用户选择顶部参数中的所有参数时，下一个参数尝试默认为`All`并因此遇到 CONSTRAINED 错误：

```
The restrictions imposed by the CONSTRAINED flag in the STRTOSET function were violated. 
```

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T15:38:01.233

It turns out it wasn't because of the second parameter defaulting to `All`... the error seems to show up when `Unknown`(auto-generated by BIDS) was selected. 不知道为什么这会导致 STRTOSET 错误...

# ruby-on-rails - ruby on rails net ssh strickhostkeychecking=no

> ID：11264647
> 
> 赞同：0
> 
> 时间：2012-06-29T15:30:19.827
> 
> 标签：ruby-on-rails, net-ssh

嗨，我`net:ssh`在`controller`. 我可能会`host name`在建立连接时动态更改。但是当它第一次登录时，shell 可能会询问是否连接。由于我通过网络连接到它，我看不到任何弹出窗口询问我。因此，我阅读了 [https://groups.google.com/group/comp.lang.tcl/browse_thread/thread/ca0cd6ec905eb702](https://groups.google.com/group/comp.lang.tcl/browse_thread/thread/ca0cd6ec905eb702) 并且我想`"-oStrictHostKeyChecking=no"`在连接到主机时添加此标签。正如我们所知，以下是 rails 中 net::ssh 的标准格式

```
 @HOST = 'hostname'
     @USER = 'username'
     @PASS = 'password'

     Net::SSH.start( @HOST, @USER, :password => @PASS ) do|ssh| 
```

建立连接时我会在哪里传递这个额外的参数`"-oStrictHostKeyChecking=no"`？

我已经试过了

```
@HOST = 'hostname -oStrictHostKeyChecking=no' 
```

但它不起作用。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T01:49:33.223

您可以使用 ruby​​ 的 begin/rescue 如下所示，它将通过记住主机并重试连接来处理主机密钥不匹配。

```
begin
  Net::SSH.start(@host, @user, :password => @pass) do |ssh|
    ... #what ever you want to do
  end
rescue Net::SSH::HostKeyMismatch => e
  e.remember_host!
  retry
end 
```

# deployment - 网站部署策略

> ID：11264653
> 
> 赞同：0
> 
> 时间：2012-06-29T15:30:35.910
> 
> 标签：deployment, web

当我将网站部署到服务器（DEV、QA、STAGE 和 PROD）时，我会创建一个新文件夹

```
WebSite-YYYY-MM-DD 
```

然后我将文件部署到该文件夹​​。一切就绪后，我复制环境的特定配置。准备好后，我打开 IIS 并更改站点的路径以使用新创建的部署文件夹。

如果有任何问题，我只需将 IIS 指向上一个文件夹。

好处：

*   允许在不使站点脱机或使其处于无效状态的情况下设置新部署。
*   快速切换
*   轻松回滚
*   易于使用的版本控制
*   不必与锁定的组件作斗争

缺点：

*   使用持续集成/自动部署设置时不能以这种方式工作

这是部署的好方法吗？我试图说服我的团队不要创建现有文件夹的 zip 文件，然后复制现有文件。

缺点：

*   您不知道当前部署何时发布，因此版本控制不准确（我想这可以通过使用整数而不是日期轻松解决）
*   必须处理锁定的文件
*   在部署完成之前，该站点处于不稳定状态
*   部署/回滚时必须等待 zip/unzip
*   可能必须重置站点以强制使用新程序集

我的重点是在出现问题时快速/准确的回滚以及易于使用且准确的版本控制系统

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T15:35:54.967

您可能遇到的另一个问题是，如果您只是压缩然后复制文件，它将留下不再需要的旧文件。您需要压缩、清除目录（可能需要时间并中断站点操作），然后复制新文件（移动时需要更多停机时间）

总而言之，只要您记得返回并存档或删除旧文件，您的解决方案就是一个很好的解决方案。

# apache - Apache Mod-Rewrite .htaccess 段交换

> ID：11264654
> 
> 赞同：1
> 
> 时间：2012-06-29T15:30:39.800
> 
> 标签：apache, .htaccess, mod-rewrite

我需要一个 .htaccess 文件，它可以采用这样的 url：

```
http://example.com/api/module/something/something/something...... 
```

url 可以有 n 个段，并且模块是可变的，我需要完成的是将其重写为：

```
http://example.com/module/api/something/something/something...... 
```

目前这是通过以下 PHP 代码完成的，但这不是一个优雅的解决方案

```
$pieces = explode("/", $_SERVER['REQUEST_URI']);
$pieces = array_slice($pieces, 2, count($pieces)-2,false);
$module = $pieces[0];
unset($pieces[0]);
$end = implode('/', $pieces);
header('Location: /'.$module.'/api/'.$end); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T15:57:35.600

尝试将此添加到文档根目录中的 htaccess 文件中

```
RewriteEngine On
RewriteRule ^api/([^/]+)/(.*)$ /$1/api/$2 [L] 
```

如果您希望它像在 PHP 代码中那样实际重定向，请将括号中的`L`a替换为。`R=301`

# python - 通过 id 获取对象时出现 ValueError

> ID：11264655
> 
> 赞同：1
> 
> 时间：2012-06-29T15:30:46.337
> 
> 标签：python, django, django-views, django-urls

我试图在我的 django 应用程序中通过 id 获取数据。问题是我不知道用户将点击的 id 类型。我在视图中输入以下代码。

意见

```
def cribdetail(request, meekme_id):
    post=Meekme.objects.get(id=meekme_id)
    return render_to_response('postdetail.html',{'post':post, 'Meekme':Meekme},context_instance=RequestContext(request)) 
```

网址配置

```
url(r'^cribme/(?P<meekme_id>)\d+/$', 'meebapp.views.cribdetail', name='cribdetail'), 
```

在模板中：

```
<a href="{% url cribdetail post.id %}">{{ result.object.title }}</a> 
```

当我单击模板中的上述链接时，出现以下错误：

```
ValueError at /cribme/0/

invalid literal for int() with base 10: ''

Request Method:     GET
Request URL:    http://127.0.0.1:8000/cribme/0/
Django Version:     1.4
Exception Type:     ValueError
Exception Value:    

invalid literal for int() with base 10: ''

Exception Location:     C:\Python27\lib\site-packages\django\db\models\fields\__init__.py in get_prep_value, line 537
Python Executable:  C:\Python27\python.exe
Python Version:     2.7.3 
```

一直在与这个斗争一段时间。我怎样才能摆脱这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T15:34:10.973

在我看来，你的 urlconf 是罪魁祸首，应该是：

```
url(r'^cribme/(?P<meekme_id>\d+)/$', 'meebapp.views.cribdetail', name='cribdetail'), 
```

不是：

```
url(r'^cribme/(?P<meekme_id>)\d+/$', 'meebapp.views.cribdetail', name='cribdetail'), 
```

`?P<meekme_id>`表示“在括号之间给出匹配的字符串这个名称。 () 不匹配任何内容，这就是为什么您的应用程序在尝试使用 id 查找项目时会出错的原因`''`。

当括号括起来时`\d+`，您匹配一个自然数，这应该有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T15:34:13.850

urlconf 中的正则表达式需要稍作调整：

```
url(r'^cribme/(?P<meekme_id>\d+)/$', 'meebapp.views.cribdetail', name='cribdetail'), 
```

参数的值`meekme_id`没有被捕获，因为`\d+`在括号之外。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T15:32:58.070

你放错了右括号：

```
url(r'^cribme/(?P<meekme_id>\d+)/$', 'meebapp.views.cribdetail', name='cribdetail'), 
```

请注意，`(?P<meekme_id> .. )`组构造应包含`\d+`您尝试匹配的字符。在您不正确的正则表达式中，您定义了一个不包含任何匹配字符的组，因此始终为空字符串`''`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T15:41:09.550

除了 URL 问题之外，您一开始并没有生成正确的链接 - 您在模板中引用了`result.object.title`但`post.id`在模板中，这就是为什么您的 URL 包含 0 的 ID。我希望你的意思是`result.id`或`result.object.id`。

# javascript - 如何从 GWT 读取 JS 变量？

> ID：11264656
> 
> 赞同：0
> 
> 时间：2012-06-29T15:30:48.413
> 
> 标签：javascript, gwt, jsni

我有一个需要读取在 javascript 中设置的变量（***apiCall***）的要求，如下所示：

```
<script type="text/javascript">
    var oidValue = "";
    var apiCall = false;

    function firePatientSearch(lastname, firstname, dob, mrn, OID) {
        apiCall = true;
        SUBMIT_PDQ.focus();
        SUBMIT_PDQ.click();
        }
</script> 
```

从我的 GWT 代码中，我这样做：

```
public native Boolean isAPICall()/*-{
    return $wnd.apiCall;
}-*/; 
```

但答案总是错误的！我在发出 JS 函数***firePatientSearch***后阅读了调用***isAPICall()***。这应该是真的还是我在这里做错了什么？

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T11:06:26.867

尝试使用 boolean 而不是 Boolean 作为 JSNI 方法的返回值。

```
public native boolean isAPICall()/*-{
    return $wnd.apiCall;
}-*/; 
```

根据[Dev Guide](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsJSNI#passing-javascript)，仅支持原始布尔值。

编辑：必须在您的 JSNI 代码中检查未定义（和其他特殊情况）。*

# javascript - 从 javascript 调用本地驱动器

> ID：11264659
> 
> 赞同：0
> 
> 时间：2012-06-29T15:31:06.370
> 
> 标签：javascript

我在 D:\testDownload 中有一个文件夹。我想通过单击按钮打开该文件夹。如何将代码放置在 javascript 函数中。

函数打开（）{

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T15:34:38.987

如果您想简单地浏览到您可以使用的位置`window.location = 'd:\\testDownload'`。大多数浏览器都允许您浏览本地光盘。这相当于在地址栏中键入该 URL。

但这仅适用于您在本地计算机上的特定情况。在网络环境中不可能做这样的事情。对于初学者，您不知道人们的下载位置在哪里，您不能保证他们允许文件浏览（移动浏览器等）。

如果你想打开一个资源管理器窗口，那么你就不走运了。

编辑：Travis Pessetto 是错误的。这有效，从本地磁盘提供。

```
<html>
<body>
<script type="text/javascript">
    function test() {
        window.location = "/tmp/"
    }
</script>
<a onclick="test()">click me</a>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T15:34:58.367

由于安全原因，这是不可能的，正如在这个问题[Open local folder from link](https://stackoverflow.com/questions/5246292/open-local-folder-from-link)中看到的那样。您可以使用 Java 小程序来完成此操作，但不能使用 JavaScript。

这也不是一个很好的解决方案，因为 Mac 和 Linux 不使用驱动器号，而且 Windows 用户可能不使用相同的驱动器号。

# android - 7 个声音有效 - 第 8 个和第 9 个声音不起作用

> ID：11264664
> 
> 赞同：0
> 
> 时间：2012-06-29T15:31:27.563
> 
> 标签：android

我正在写一个基本的音板。我已经把它放在我的手机上，它工作正常。大多数情况下都很好。前 7 个按钮有效，但第 8 和第 9 个按钮无效。我唯一的想法是这是一个内存问题，我不应该在程序开始时同时创建所有 9 个 mp。也许第 8 和第 9 的记忆有点太多了。

有人对为什么第 8 个和第 9 个按钮在以下代码中不起作用有任何想法吗？他们在模拟器中工作，但让我的手机崩溃。我知道代码并不完美 - 我正在学习。但是朝着正确的方向前进会很棒。

谢谢你尽你所能的帮助！

```
package testing.Variables.Levack;

import android.app.Activity;
import android.os.Bundle;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Button;
import android.view.View.OnClickListener; 
import android.widget.Button;
import android.view.View;
import android.media.MediaPlayer;

public class TestingVariablesActivity extends Activity {
    /** Called when the activity is first created. */
    TextView tt;
    Button messageButton1,messageButton2,messageButton3,messageButton4,messageButton5,messageButton6,messageButton7,messageButton8,messageButton9;

  MediaPlayer mp1,mp2,mp3,mp4,mp5,mp6,mp7,mp8,mp9 = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        mp1 = MediaPlayer.create(this, R.raw.baboon);
        mp2 = MediaPlayer.create(this, R.raw.backoff);
        mp3 = MediaPlayer.create(this, R.raw.dark6);
        mp4 = MediaPlayer.create(this, R.raw.dontneedroads);
        mp5 = MediaPlayer.create(this, R.raw.hua);
        mp6 = MediaPlayer.create(this, R.raw.hulk);
        mp7 = MediaPlayer.create(this, R.raw.itsaclipon);
        mp8 = MediaPlayer.create(this, R.raw.ht);
        mp9 = MediaPlayer.create(this, R.raw.truth1);

   messageButton1=(Button)findViewById(R.id.messageButton1);
   messageButton1.setOnClickListener(startListener);

   messageButton2=(Button)findViewById(R.id.messageButton2);
   messageButton2.setOnClickListener(startListener);

   messageButton3=(Button)findViewById(R.id.messageButton3);
   messageButton3.setOnClickListener(startListener);

   messageButton4=(Button)findViewById(R.id.messageButton4);
   messageButton4.setOnClickListener(startListener);

   messageButton5=(Button)findViewById(R.id.messageButton5);
   messageButton5.setOnClickListener(startListener);

   messageButton6=(Button)findViewById(R.id.messageButton6);
   messageButton6.setOnClickListener(startListener);

   messageButton7=(Button)findViewById(R.id.messageButton7);
   messageButton7.setOnClickListener(startListener);

  messageButton8=(Button)findViewById(R.id.messageButton8);
 messageButton8.setOnClickListener(startListener);

   //messageButton9=(Button)findViewById(R.id.messageButton9);
   //messageButton9.setOnClickListener(startListener);

    }

  private OnClickListener startListener =new OnClickListener()  {
    public void onClick(View v)
    { 

               switch(v.getId()) { 
                   case R.id.messageButton1: 
                        mp1.start();
                        break; 
                   case R.id.messageButton2: 
                         mp2.start();
                         break; 
                   case R.id.messageButton3: 
                        mp3.start();
                        break; 
                   case R.id.messageButton4: 
                        mp4.start();
                        break;  
                   case R.id.messageButton5: 
                        mp5.start();
                        break; 
                   case R.id.messageButton6: 
                        mp6.start();
                        break;  
                   case R.id.messageButton7: 
                        mp7.start();
                        break; 
                   case R.id.messageButton8: 
                        mp8.start();
                        break;
                //   case R.id.messageButton9: 
                       //   mp9.start();
                        //break; 

           } 

        }   
        };

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T16:59:33.803

我以前也遇到过类似的问题——这个问题似乎比其他任何问题都更具体。我会创建一个 MediaPlayers 集合，在第七个之后，它会在使用某些设备时崩溃，在我的例子中是 Droid X2。

在 X2 上创建各种 MediaPlayer 实例时，8 日创建的 MediaPlayer 总是会捕获一个`java.io.IOException: Prepare failed.: status=0x1`. 当我在其他几台设备上进行测试时，该错误从未出现。

附带说明，请务必在`mp1.release();`使用完 MediaPlayer 后致电 - 我已发现大量内存泄漏导致无法释放这些资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T15:38:40.037

如果您的声音不是很长，也许您应该使用 SoundPool 类而不是 MediaPlayer 解决方案。它允许您同时更好地管理许多声音。

这是文档：http: [//developer.android.com/reference/android/media/SoundPool.html](http://developer.android.com/reference/android/media/SoundPool.html)

这是一个很好的起点：[http ://www.droidnova.com/creating-sound-effects-in-android-part-1,570.html](http://www.droidnova.com/creating-sound-effects-in-android-part-1,570.html)

这是一篇简短的文章，介绍了 SoundPool 和 MediaPlayer 之间的区别 [http://www.stealthcopter.com/blog/2010/08/android-soundpool-vs-mediaplayer-focus-on-soundboards-and-memory-问题/](http://www.stealthcopter.com/blog/2010/08/android-soundpool-vs-mediaplayer-focus-on-soundboards-and-memory-problems/)

# c++ - 如何获取哈希值，c++ hash_map

> ID：11264675
> 
> 赞同：0
> 
> 时间：2012-06-29T15:32:02.407
> 
> 标签：c++, stl, hashmap

我想访问 c++ hash_map 的哈希值。我试过了：

```
__gnu_cxx::hash_map<string, int> my_table;
const hash<string> hh = my_table.hash_funct();
string s("hello");
size_t j = hh(s); 
```

最后一行不会编译：

```
no match for call to '(const __gnu_cxx::hash<std::basic_string<char, std::char_traits<char>, std::allocator<char> > >) (std::string&) 
```

所以很明显我不知道如何使用哈希函数。如果有人有小费，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T15:48:15.137

旧的 STL 不包括 for 的专门化`hash`，`std::string`因为`std::string`它不是 STL 的一部分。STL 提供的专业化的完整列表记录在[http://www.sgi.com/tech/stl/hash.html](http://www.sgi.com/tech/stl/hash.html)。

最好的选择可能是使用现代等效的 , `std::unordered_map`，或者`std::tr1::unordered_map`如果您不能使用 C++11。

如果您确实出于某种原因需要使用`hash_map`，那么您可能可以自己专门研究它：

```
namespace __gnu_cxx {
    template <> struct hash<std::string> {
        size_t operator()(std::string const & s) const {
            hash<const char *> h;
            return h(s.c_str());
        }
    };
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T15:48:09.047

我在 cplusplus.com 上找不到 hash_map 参考，但阅读了这一行：`hash_map<string, int>`

我认为您在这里缺少模板参数：`const hash<string> hh`

不？

# angularjs - 如何检测是否注册了新的侦听器？

> ID：11264676
> 
> 赞同：0
> 
> 时间：2012-06-29T15:32:02.617
> 
> 标签：angularjs

如果另一段代码调用`$scope.$on`，我希望我的服务收到通知，以便它可以订阅具有相同命名通道的 websocket。是否有`$rootScope`我可以收听的事件或我可以观看的表达式？

我试过这个：http: [//jsfiddle.net/polidore/AZ7Av/](http://jsfiddle.net/polidore/AZ7Av/)

我在哪里`$watching` `Object.keys($scope.$$listeners).length`，但除了初始负载外，它似乎没有被调用。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T17:28:07.353

最好的方法不是调用`$on`，而是创建自己的函数，该函数`$on`在通知您的服务时调用您。

如果您确实需要通过该`$on`函数检测它，那么您可以像这样覆盖该函数：

```
var old$on = $scope.$on;
$scope.$on = function(name, listener) {
    // Code to notify your service here

    old$on.apply(this, arguments);
} 
```

# php - 在 PHP 中从线性数组创建关联数组

> ID：11264679
> 
> 赞同：4
> 
> 时间：2012-06-29T15:32:11.443
> 
> 标签：php, arrays

我正在使用一个返回 JSON 数据的 Web 服务，当我使用 PHP 的[json_decode](http://php.net/manual/en/function.json-decode.php)函数解码时，它给了我一个如下所示的数组：

```
Array
(
 [0] => eBook
 [1] => 27
 [2] => Trade Paperback
 [3] => 24
 [4] => Hardcover
 [5] => 4
) 
```

是否有一个 PHP 函数可以获取这个数组并将其组合成一个关联数组，其中每个其他元素都是键，后面的元素是它的值？我想提出以下几点：

```
Array
(
 [eBook] => 27
 [Trade Paperback] => 24
 [Hardcover] => 4
) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T15:32:12.160

据我所知，没有内置函数可以做到这一点，但您可以使用如下函数：

```
function combineLinearArray( $arrayToSmush, $evenItemIsKey = true ) {
    if ( ( count($arrayToSmush) % 2 ) !== 0 ) {
        throw new Exception( "This array cannot be combined because it has an odd number of values" );
    }

    $evens = $odds = array();

    // Separate even and odd values
    for ($i = 0, $c = count($arrayToSmush); $i < $c; $i += 2) {
        $evens[] = $arrayToSmush[$i];
        $odds[] = $arrayToSmush[$i+1];
    }

    // Combine them and return
    return ( $evenItemIsKey ) ? array_combine($evens, $odds) : array_combine($odds, $evens);
} 
```

您可以使用要组合成关联数组的数组和可选标志来调用它，该标志指示是使用偶数还是奇数元素作为键。

**编辑：**我将代码更改为仅使用一个 for 循环，而不是使用单独的循环来提取偶数和奇数值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-29T15:58:03.577

您自己的解决方案肯定会更清晰，但是这个仅由 PHP 函数组成的单行代码执行相同的工作：

```
$output = call_user_func_array('array_combine', call_user_func_array('array_map', array_merge(array(null), array_chunk($input, 2)))); 
```

您的问题是“是否有 PHP 函数...”。答案是否定的，但对于它们的组合来说是肯定的。

这里棘手的部分是分块数组的转置，这是通过调用`array_map`with`null`作为第一个参数来实现的（参见[手册](http://php.net/manual/en/function.array-map.php)，其中说“这个函数的一个有趣的使用......”）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T15:43:27.797

像这样的循环可以工作：

```
$array = json_decode(....);

$received = array();
for ($i = 0; $i < count($array); $i++) {
    $received[$array[$i]] = $array[$i+1];
    $i++;
}

var_dump($received); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-29T15:45:35.190

调整另一个答案中的代码：

```
function combineLinearArray( $arrayToSmush) {

if ( ( count($arrayToSmush) % 2 ) !== 0 ) {
    throw new Exception( "This array cannot be combined because it has an odd number of values" );
}

$combined = array();
for ($i = 0, $i<count($arrayToSmush); $i++) {
    $combined[$arrayToSmush[$i]] = $arrayToSmush[$i+1];
    $i++; // next key
}

// Combine them and return
return $combined;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T13:02:50.613

说到 1-liner：

```
array_reduce(array_chunk($input, 2), function(&$r, $i) { !empty($i[0]) && $r[$i[0]] = @$i[1]; return $r; }, array()); 
```

这个 1-liner 还验证了生成的关联密钥的即时有效性，并且比公认的密钥短 10 个左右的字符[https://stackoverflow.com/a/11265111/1990515](https://stackoverflow.com/a/11265111/1990515)

# python - 扁平化列表列表

> ID：11264684
> 
> 赞同：127
> 
> 时间：2012-06-29T15:32:31.270
> 
> 标签：python, arrays, list, brackets

我在 Python 中遇到方括号问题。我编写了一个产生以下输出的代码：

```
[[180.0], [173.8], [164.2], [156.5], [147.2], [138.2]] 
```

但我想用它进行一些计算，但方括号不允许我这样做。

我怎样才能去掉括号？我看到了一些例子来做到这一点，但我无法将它们应用于这种情况。

* * *

## 回答 #1

> 赞同：199
> 
> 时间：2012-06-29T15:36:19.280

使用嵌套列表推导展平列表以*“删除括号” 。*这将取消嵌套存储在列表列表中的每个列表！

```
list_of_lists = [[180.0], [173.8], [164.2], [156.5], [147.2], [138.2]]
flattened = [val for sublist in list_of_lists for val in sublist] 
```

嵌套列表推导的评估方式与它们展开的方式相同（即为每个新循环添加换行符和制表符。所以在这种情况下：

```
flattened = [val for sublist in list_of_lists for val in sublist] 
```

相当于：

```
flattened = []
for sublist in list_of_lists:
    for val in sublist:
        flattened.append(val) 
```

最大的区别在于列表 comp 的计算速度比 unraveled 循环快得多，并且消除了附加调用！

如果子列表中有多个项目，则列表组合甚至会将其展平。IE

```
>>> list_of_lists = [[180.0, 1, 2, 3], [173.8], [164.2], [156.5], [147.2], [138.2]]
>>> flattened  = [val for sublist in list_of_lists for val in sublist]
>>> flattened 
[180.0, 1, 2, 3, 173.8, 164.2, 156.5, 147.2,138.2] 
```

* * *

## 回答 #2

> 赞同：144
> 
> 时间：2012-06-29T15:39:39.593

我会使用`itertools.chain`- 这也将满足每个子列表中 > 1 个元素：

```
from itertools import chain
list(chain.from_iterable([[180.0], [173.8], [164.2], [156.5], [147.2], [138.2]])) 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2012-06-29T15:35:40.783

给定

```
d = [[180.0], [173.8], [164.2], [156.5], [147.2], [138.2]] 
```

以及您的***具体****问题：* **如何删除括号？**

使用列表理解：

```
new_d = [i[0] for i in d] 
```

会给你这个

```
[180.0, 173.8, 164.2, 156.5, 147.2, 138.2] 
```

然后您可以使用适当的索引访问单个项目，例如，`new_d[0]`将给您`180.0`等，然后您可以将其用于数学。

如果您要收集数据，您将有某种括号或括号。

**请注意**，此解决方案专门针对您的问题/问题，*它不提供通用解决方案*。即，它将适用于您的情况。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-29T15:36:21.800

```
>>> lis=[[180.0], [173.8], [164.2], [156.5], [147.2], [138.2]]
>>> [x[0] for x in lis]
[180.0, 173.8, 164.2, 156.5, 147.2, 138.2] 
```

# c# - 使用 asp.net 发送电子邮件而不会导致应用程序崩溃

> ID：11264686
> 
> 赞同：0
> 
> 时间：2012-06-29T15:32:33.777
> 
> 标签：c#, asp.net

我正在开发一个用于发送电子邮件的 asp.net 应用程序。我想确保如果出现问题，它会记录错误并移至下一条记录。我正在使用 SmtpClient 类发送电子邮件。但是现在，如果某些电子邮件地址有误，它就会崩溃。如何强制它移动到下一条记录？

我的代码是这样的：

```
 var EmailsQueue = context.WC_EmailToolQueue.Where(t => t.EmailDate == null).ToList();

            foreach (var email in EmailsQueue)
            {
                MailMessage message = new MailMessage();
                message.From = new MailAddress(email.WC_EmailToolTemplates.SenderEmail);
                message.To.Add(new MailAddress(email.Email));
                message.Body = body;
                message.IsBodyHtml = true;
                message.Subject = subject;

                using (SmtpClient smtp = new SmtpClient
                {
                    Host = email.WC_EmailToolTemplates.Host, 
                    Port = email.WC_EmailToolTemplates.Port,  
                    Credentials = new NetworkCredential(email.WC_EmailToolTemplates.SMTPUser, email.WC_EmailToolTemplates.SMTPPass), 
                    EnableSsl = email.WC_EmailToolTemplates.EnableSSL 
                })
                   try
                {
                    smtp.Send(message);
                }
                catch (Exception ex) {

                }
                } 
```

问候， 阿西夫·哈米德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T15:35:23.463

使用 Try/Catch 捕获异常。

```
try
{
    // Send Email code
}
catch (Exception ex) //Or specific exceptions
{
    Log(ex.ToString());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T15:36:48.610

你可以使用一个`try catch`块。如果地址格式无效，`Add`函数将抛出错误。如果需要，您也可以记录它

```
 try
    {
         message.To.Add(new MailAddress(email.Email));
    }
    catch (FormatException ex)
    {
        //If you want you may log it here
    } 
```

**编辑**：根据 OP 的问题编辑。

下面的代码将跳过向那些有问题的项目（地址错误等）发送电子邮件。但循环执行剩余的项目

```
foreach (var email in EmailsQueue)
{
    MailMessage message = new MailMessage();
    try
    {
        message.From = new MailAddress(email.WC_EmailToolTemplates.SenderEmail);
        message.To.Add(new MailAddress(email.Email));            
        message.Body = body;
        message.IsBodyHtml = true;
        message.Subject = subject;

        using (SmtpClient smtp = new SmtpClient
        {
            Host = email.WC_EmailToolTemplates.Host,
            Port = email.WC_EmailToolTemplates.Port,
            Credentials = new NetworkCredential(email.WC_EmailToolTemplates.SMTPUser, email.WC_EmailToolTemplates.SMTPPass),
            EnableSsl = email.WC_EmailToolTemplates.EnableSSL
        })
        smtp.Send(message);
    }
    catch (Exception ex)
    {
        //error in sending email to one item in collection
        //Log it ig you want .Foreach will continue with remaining items    
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T15:57:13.250

只需将一些日志记录到您已经拥有的内容的 catch 块中。然后 foreach 循环将继续到下一条记录：

```
var EmailsQueue = context.WC_EmailToolQueue.Where(t => t.EmailDate == null).ToList();

    foreach (var email in EmailsQueue)
    {
        MailMessage message = new MailMessage();
        message.From = new MailAddress(email.WC_EmailToolTemplates.SenderEmail);
        message.To.Add(new MailAddress(email.Email));
        message.Body = body;
        message.IsBodyHtml = true;
        message.Subject = subject;

        using (SmtpClient smtp = new SmtpClient
        {
            Host = email.WC_EmailToolTemplates.Host,
            Port = email.WC_EmailToolTemplates.Port,
            Credentials = new NetworkCredential(email.WC_EmailToolTemplates.SMTPUser, email.WC_EmailToolTemplates.SMTPPass),
            EnableSsl = email.WC_EmailToolTemplates.EnableSSL
        })
            try
            {
                smtp.Send(message);
            }
            catch (Exception ex)
            {
                //log the error here <--------
            }
    } 
```

# coldfusion - 迁移到新服务器后如何验证站点？

> ID：11264690
> 
> 赞同：0
> 
> 时间：2012-06-29T15:32:43.137
> 
> 标签：coldfusion, migration, windows-server-2008, link-checking

我们目前正在设置新服务器，以便从旧的 Windows 2003/Coldfusion 8 服务器升级到 Windows 2008/Coldfusion 9 服务器。

这不是一个简单的迁移。IIS 和 Coldfusion 中更新/更改的功能迫使我们更改代码和设置以及一点点。

我们想知道是否有某种程序，甚至是基于云的服务，我们可以使用它来比较迁移前后的站点。我想简单的链接检查就足够了，但要彻底彻底，我们想知道是否有一种解决方案也可以检查页面的内容。（这是我们老板的想法，考虑到网站可能有多大，我怀疑这是一项可行的任务；所以我很乐意检查链接并比较响应状态。）

我想目标是如果“foo.cfm”在迁移之前是好的，但是之后抛出 500 个服务器错误，我们就会知道需要查看一些东西。

我知道链接检查器很常见，但不知道是否有任何支持这种功能（比较一个运行的结果）。我也想不出如何在 Google 搜索中准确地表达这一点，所以我想我会在 StackOverflow 上向伟大的思想家提问。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T15:44:48.963

您可以使用 Selenium 来测试 UI。

您甚至可以通过 CFSelenium 将它与 MXUnit 一起使用，以使其更加自动化。

*   [http://seleniumhq.org/](http://seleniumhq.org/)
*   [http://cfselenium.riaforge.org/](http://cfselenium.riaforge.org/)
*   [http://mxunit.org/](http://mxunit.org/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T16:01:13.013

如果您的站点是相对静态的，您可以尝试使用[curl](http://curl.haxx.se/)或[wget](http://www.gnu.org/software/wget/)在迁移前抓取站点，然后在迁移后使用它来抓取站点。然后使用[Beyond Compare](http://scootersoftware.com/)（或其他支持目录的 diff 工具）来比较两个文件夹树。

如果您的网站包含随机元素或与日期相关的内容，这种方法不会很好地工作，但您现在可以尝试一下，只需间隔几个小时抓取当前网站，看看有多少不同。

这可以让您对网站进行内容感知比较，并很可能让您快速调查的内容列表。您也可以在新站点的开发版本上试用它，以在发布前查找问题。

# drop-down-menu - Twitter引导下拉菜单出现在错误的菜单项

> ID：11264696
> 
> 赞同：0
> 
> 时间：2012-06-29T15:32:53.640
> 
> 标签：drop-down-menu, twitter-bootstrap, navbar

我有一个导航栏，里面有 4 个元素。第一个只是一个主页链接，第二个和第三个有下拉菜单，第四个是用下拉菜单向右拉的。

现在第二个和第三个元素的下拉菜单总是出现在第一个菜单项下，而不是在单击的菜单项下。

第四个没有这个问题，我做错了什么？

```
<div class="navbar navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container">
      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>
      <a class="brand" href="#"><span class="blue">art</span><span class="black">ly.de</span></a>
      <div class="pull-right">
        <ul class="nav">
          <li class="divider-vertical"></li>
          <li>
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
              <i class="icon-user"></i> Patrick Fraley
              <span class="icon-caret-down"></span>
            </a>
            <ul class="dropdown-menu">
              <li><a href="#"><i class="icon-edit"></i> Profile</a></li>
              <li><a href="#"><i class="icon-cog"></i> Account Settings</a></li>
              <li class="divider"></li>
              <li><a href="#"><i class="icon-signout"></i> Sign Out</a></li>
            </ul>
          </li>
        </ul>
      </div>
      <div class="nav-collapse">
        <ul class="nav">
          <li class="active"><a href="#">Dashboard</a></li>
          <li>
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
              Elements
              <span class="icon-caret-down"></span>
            </a>
            <ul class="dropdown-menu">
              <li><a href="#">Calendar</a></li>
              <li><a href="#">Forms</a></li>
              <li><a href="#">Graphs</a></li>
              <li><a href="#">Tables</a></li>
              <li><a href="#">Typography</a></li>
            </ul>
          </li>
          <li>
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
              Pages
              <span class="icon-caret-down"></span>
            </a>
            <ul class="dropdown-menu">
              <li><a href="#">Login</a></li>
              <li class="divider"></li>
              <li><a href="#">Error 404</a></li>
              <li><a href="#">Error 500</a></li>
            </ul>
        </ul>
      </div><!--/.nav-collapse -->
    </div>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T18:18:05.850

我认为您忘记了`class="dropdown"`保存`.nav li`下拉列表的 s 。

你也错过了一个`</li>`

```
<div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container">
            <!-- ... -->
            <div class="pull-right">
                <ul class="nav">
                    <li class="divider-vertical"/>
                    <li class="dropdown">
                        <!-- ... -->
                    </li>
                </ul>
            </div>
            <div class="nav-collapse">
                <ul class="nav">
                    <li class="active">
                        <!-- ... -->
                    </li>
                    <li class="dropdown">
                        <!-- ... -->
                    </li>
                    <li class="dropdown">
                        <!-- Missed this /li -->
                    </li>
                </ul>
            </div>
            <!--/.nav-collapse -->
        </div>
    </div>
</div> 
```

# java - Java 时区 - IST 的奇怪行为？

> ID：11264697
> 
> 赞同：2
> 
> 时间：2012-06-29T15:32:56.007
> 
> 标签：java, timezone

我有以下代码：

```
DateFormat df = new SimpleDateFormat("M/d/yy h:mm a z");
df.setLenient(false);
System.out.println(df.parse("6/29/2012 5:15 PM IST")); 
```

假设我现在将 PC 的时区设置为太平洋时间（PDT 为 UTC-7），这将打印

> 2012 年 6 月 29 日星期五 08:15:00 PDT

PDT 不是比 IST（印度标准时间）晚 12.5 小时吗？任何其他时区都不会出现此问题 - 我在日期字符串中尝试了 UTC、PKT、MMT 等而不是 IST。Java中是否有两个IST？

PS：实际代码中的日期字符串来自外部来源，所以我不能使用 GMT 偏移量或任何其他时区格式。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-28T19:45:23.443

时区的缩写名称不明确，并且已弃用 Olson 时区名称。以下内容始终如一，因为 parse() 和 getTimezone() 的行为方式可能有所不同。

```
SimpleDateFormat sdf = new SimpleDateFormat("M/d/yy h:mm a Z");
TimeZone istTimeZone = TimeZone.getTimeZone("Asia/Kolkata");
Date d = new Date();
sdf.setTimeZone(istTimeZone);
String strtime = sdf.format(d); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-29T15:59:32.437

对不起，我必须为此写一个答案，但试试这个代码：

```
public class Test {

    public static void main(String[] args) throws ParseException {
        DF df = new DF("M/d/yy h:mm a z");
        String [][] zs = df.getDateFormatSymbols().getZoneStrings();
        for( String [] z : zs ) {
            System.out.println( Arrays.toString( z ) );
        }
    }

    private static class DF extends SimpleDateFormat {
        @Override
        public DateFormatSymbols getDateFormatSymbols() {
            return super.getDateFormatSymbols();
        }

        public DF(String pattern) {
            super(pattern);
        }
    }

} 
```

您会发现 IST 在列表中出现了多次，而第一个确实是以色列标准时间。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-29T16:04:11.953

不是答案，但请参阅下面的输出 + 代码 - 似乎确实`parse`将 IST 与`TimeZone.getTimeZone("IST")`...

> 2012 年6 月 29 日
> 星期五 16:15:00 BST 2012 年 6 月 29 日星期五 12:45:00 BST 2012 年 6 月 29 日
> 星期五 12:45:00 BST 2012
> *BST = 伦敦

```
public static void main(String[] args) throws InterruptedException, ParseException {
    DateFormat fmt1 = new SimpleDateFormat("M/d/yy h:mm a Z");
    Date date = fmt1.parse("6/29/2012 5:15 PM IST");
    System.out.println(date);

    DateFormat fmt2 = new SimpleDateFormat("M/d/yy h:mm a");
    fmt2.setTimeZone(TimeZone.getTimeZone("IST"));
    System.out.println(fmt2.parse("6/29/2012 5:15 PM"));

    DateFormat fmt3 = new SimpleDateFormat("M/d/yy h:mm a");
    fmt3.setTimeZone(TimeZone.getTimeZone("Asia/Kolkata"));
    System.out.println(fmt3.parse("6/29/2012 5:15 PM"));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-10T12:29:39.600

这是因为 IST 将具有多种含义，例如爱尔兰标准时间、以色列标准时间、印度标准时间。

参考：[https ://www.timeanddate.com/time/zones/](https://www.timeanddate.com/time/zones/)

专门使用 setTimezone() 方法来设置时区。

例如： parser.setTimeZone(TimeZone.getTimeZone("请在此处详细指定时区"));

# android - 无法在android中滚动列表视图

> ID：11264704
> 
> 赞同：0
> 
> 时间：2012-06-29T15:33:15.700
> 
> 标签：android

我有一个问题，我通过代码在 LinearLayout 中动态添加 listview 并将 EndlessAdapter 设置到其中，数据显示正确，但我们无法在列表中从上到下滚动。我不知道为什么？请向我建议任何有关相同的解决方案。

**代码：**

```
public void setValuesInCategoryChild(String url, final String filter,
            final String from, final String to) {
        if (isOnline()) {
            final ProgressDialog dialog = ProgressDialog.show(
                    ResearchList.this, "Research List       ",
                    "Please wait...   ", true);

            final Handler handler = new Handler() {

                public void handleMessage(Message msg) {

                    // System.out.println("The id after Save:"+id.get(0).toString());

                    // catagory.addAll(keyword_vector1);
                    linear_Category_Child.setVisibility(View.GONE);
                    linear_Category_Child_Child.setVisibility(View.VISIBLE);
                    // tv_Child_Header.setText("Volvo");
                    tv_CategoryChildHeader.setText(from);
                    setHeaderImage(tv_CategoryChildHeader.getText().toString());
                    System.out.println("The size of Cat Display names:"
                            + coll.getDisplayNames().size());
                    System.out.println("The size of Cat Images:"
                            + coll.getImages().size());
                    System.out.println("The size of Cat price:"
                            + coll.getPrice().size());
                    System.out.println("The size of Cat Year:"
                            + coll.getYears().size());
                    System.out.println("The size of Cat Rating:"
                            + coll.getRating().size());
                    System.out.println("The size of Cat Mpg:"
                            + coll.getMpg().size());
                    setHeaderImage(tv_CategoryChildHeader.getText().toString());
                    if(coll.getDisplayNames().size()!=0)
                    {
                        lvCategory = new ListView(ResearchList.this);
                        LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(
                                LayoutParams.FILL_PARENT,
                                LayoutParams.FILL_PARENT);

                        lvCategory.setLayoutParams(params);

                    // Adapter for MPG Search
                    demoAdapterCat = new DemoAdapterCat();
                    lvCategory.setAdapter(demoAdapterCat);
                    layout_ResearchList_BrandList.addView(lvCategory);
                    Utility.setListViewHeightBasedOnChildren(lvCategory);
                    }
                    else
                    {
                        /*lvCategory.invalidate();
                        lvCategory.setAdapter(null);*/
                        AlertDialog.Builder builder = new Builder(ResearchList.this);
                        builder.setTitle("Attention!");
                        builder.setMessage("No Data Available for the Particular Search.");
                        builder.setPositiveButton("OK",
                                new DialogInterface.OnClickListener() {

                                    @Override
                                    public void onClick(DialogInterface dialog, int which) {
                                        // TODO Auto-generated method stub

                                    }
                                });

                        builder.create().show();
                    }
                    /*Utility util = new Utility();
                    util.setListViewHeightBasedOnChildren(lvCategory);*/
                    dialog.dismiss();
                }
            };

            final Thread checkUpdate = new Thread() {

                public void run() {
                    try {
                        String sortEncode = URLEncoder.encode("mpg");
                        String filterEncode = URLEncoder.encode(filter);
                        String clientEncode = URLEncoder.encode("10030812");
                        String fromEncode = URLEncoder.encode(from);
                        String toEncode = URLEncoder.encode(to);
                        String catUrl = "/v1/vehicles/get-make-models.json?sort="
                                + sortEncode
                                + "&filter="
                                + filterEncode
                                + "&client-id="
                                + clientEncode
                                + "&from="
                                + fromEncode;
                        genSig = new GetSignature(catUrl, "acura");
                        try {
                            signature = genSig.getUrlFromString();
                        } catch (InvalidKeyException e1) {
                            // TODO Auto-generated catch block
                            e1.printStackTrace();
                        } catch (NoSuchAlgorithmException e1) {
                            // TODO Auto-generated catch block
                            e1.printStackTrace();
                        }
                        // jsonString =
                        // getJsonSring("http://api.highgearmedia.com/v1/vehicles/get-models.json?make=acura&client-id=10030812&signature=LWQbdAlJVxlXZ1VO2mfqAA==");
                        // String signatureEncode =
                        // URLEncoder.encode(signature);
                        String urlEncode = URLEncoder.encode(catUrl
                                + "&signature=" + signature);
                        jsonString = getJsonSring("http://apibeta.highgearmedia.com"
                                + catUrl + "&signature=" + signature);
                        System.out.println("The json category:===>"
                                + jsonString);
                    } catch (ClientProtocolException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    } catch (URISyntaxException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                    JsonParse json = new JsonParse(jsonString);
                    json.parseCat();
                    LIST_SIZE = coll.getDisplayNames().size();
                    for (int i = 0; i <= BATCH_SIZE; i++) {
                        // countriesSub.add(COUNTRIES[i]);
                        countriesSubCat.add(coll.getDisplayNames().get(i));
                        imagesSubCat.add(coll.getImages().get(i));
                        YearSubCat1.add(coll.getYears().get(i));
                        YearSubCat2.add(coll.getYears().get(i + 1));
                        mpgSubCat1.add(coll.getMpg().get(i));
                        mpgSubCat2.add(coll.getMpg().get(i + 1));
                        priceSubCat1.add(coll.getPrice().get(i));
                        priceSubCat2.add(coll.getPrice().get(i + 1));
                        ratingSubCat1.add(coll.getRating().get(i));
                        ratingSubCat2.add(coll.getRating().get(i + 1));
                    }
                    setLastOffset(BATCH_SIZE);
                    handler.sendEmptyMessage(0);

                }

            };
            checkUpdate.start();
        } else {
            AlertDialog.Builder builder = new Builder(ResearchList.this);
            builder.setTitle("Attention!");
            builder.setMessage("Network Connection unavailable.");
            builder.setPositiveButton("OK",
                    new DialogInterface.OnClickListener() {

                        @Override
                        public void onClick(DialogInterface dialog, int which) {
                            // TODO Auto-generated method stub

                        }
                    });

            builder.create().show();
        }

    } 
```

**布局：**

```
<LinearLayout
                android:id="@+id/linear_ResearchListCategoryChild_Child"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical"
                android:visibility="gone" >

                <RelativeLayout
                    android:id="@+id/linear_ResearchListCategoryChild_Child_HeaderBlock"
                    android:layout_width="fill_parent"
                    android:layout_height="40dip"
                    android:background="@drawable/catagory_bar"
                    android:orientation="horizontal" >

                    <TextView
                        android:id="@+id/tv_ResearchListCategoryChild_Child_Header"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_centerVertical="true"
                        android:text="Work in Progress"
                        android:textColor="#ffffff"
                        android:textStyle="bold" android:layout_marginLeft="60dip"/>

                    <ImageView
                        android:id="@+id/img_ResearchListCategory_ChildHeader"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignParentLeft="true"
                        android:layout_centerVertical="true"
                        android:layout_marginLeft="10dip"
                        android:src="@drawable/up_arrow" />

                    <ImageView
                        android:id="@+id/imageView2"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignParentRight="true"
                        android:layout_centerVertical="true"
                        android:layout_marginRight="10dp"
                        android:src="@drawable/list_arrow_up" />

                </RelativeLayout>

                <RelativeLayout
                    android:id="@+id/linear_ResearchListCategoryChild_Child_Header"
                    android:layout_width="fill_parent"
                    android:layout_height="40dip"
                    android:background="@drawable/nav_bg"
                    android:orientation="horizontal" >

                    <TextView
                        android:id="@+id/textView5"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignParentLeft="true"
                        android:layout_centerVertical="true"
                        android:layout_marginLeft="5dip"
                        android:clickable="true"
                        android:text="Highest Rated"
                        android:textColor="#ffffff"
                        android:textStyle="bold" android:gravity="center"/>

                    <TextView
                        android:id="@+id/textView6"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignBaseline="@+id/textView5"
                        android:layout_alignBottom="@+id/textView5"
                        android:layout_marginLeft="30dp"
                        android:layout_toRightOf="@+id/textView5"
                        android:clickable="true"
                        android:text="A-Z"
                        android:textColor="#ffffff"
                        android:textStyle="bold" android:gravity="center"/>

                    <TextView
                        android:id="@+id/textView7"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignBaseline="@+id/textView6"
                        android:layout_alignBottom="@+id/textView6"
                        android:layout_marginLeft="40dp"
                        android:layout_toRightOf="@+id/textView6"
                        android:clickable="true"
                        android:text="Price"
                        android:textColor="#ffffff"
                        android:textStyle="bold" android:gravity="center"/>

                    <TextView
                        android:id="@+id/textView8"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignBaseline="@+id/textView7"
                        android:layout_alignBottom="@+id/textView7"
                        android:layout_alignParentRight="true"
                        android:layout_marginRight="14dp"
                        android:clickable="true"
                        android:text="MPG"
                        android:textColor="#ffffff"
                        android:textStyle="bold" android:gravity="center"/>
                </RelativeLayout>

                <!--
                <RelativeLayout 
                    android:id="@+id/relative_down_arrow"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:visibility="visible"
                    >

                </RelativeLayout>

                -->

                <LinearLayout
                    android:id="@+id/linearArrowLayout"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:orientation="horizontal"
                    android:visibility="visible">

                    <ImageView
                        android:id="@+id/Highly_rated"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginLeft="51dp"
                        android:src="@drawable/selector_arrow"
                        android:visibility="invisible" />

                    <ImageView
                        android:id="@+id/AZ_arrow"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginLeft="78dp"
                        android:src="@drawable/selector_arrow"
                        android:visibility="invisible" />

                    <ImageView
                        android:id="@+id/Price_arrow"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginLeft="59dp"
                        android:src="@drawable/selector_arrow"
                        android:visibility="invisible" />

                    <ImageView
                        android:id="@+id/MPG"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginLeft="55dp"
                        android:src="@drawable/selector_arrow"
                        android:visibility="invisible" />
                </LinearLayout>
                <LinearLayout 
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="12dip"
                    android:layout_marginRight="12dip" android:background="#ffffff" android:id="@+id/layout_ResearchList_BrandList">
                </LinearLayout>
            </LinearLayout> 
```

**DemoAdapterCat：（已编辑）**

```
class DemoAdapterCat extends EndlessAdapter {
        ImageLoader image = new ImageLoader(ResearchList.this);
        private RotateAnimation rotate = null;
        ArrayList<String> tempListNamesCat = new ArrayList<String>();
        ArrayList<String> tempListImagesCat = new ArrayList<String>();
        ArrayList<String> tempListYearCat1 = new ArrayList<String>();
        ArrayList<String> tempListYearCat2 = new ArrayList<String>();
        ArrayList<String> tempListmpgCat1 = new ArrayList<String>();
        ArrayList<String> tempListmpgCat2 = new ArrayList<String>();
        ArrayList<String> tempListpriceCat1 = new ArrayList<String>();
        ArrayList<String> tempListpriceCat2 = new ArrayList<String>();
        ArrayList<String> tempListRatingCat1 = new ArrayList<String>();
        ArrayList<String> tempListRatingCat2 = new ArrayList<String>();

        DemoAdapterCat() {
            super(new CategoryListLazyAdapter(ResearchList.this,
                    countriesSubCat, imagesSubCat, YearSubCat1, YearSubCat2,
                    mpgSubCat1, mpgSubCat2, priceSubCat1, priceSubCat2,
                    ratingSubCat1, ratingSubCat2));
            /*Utility util = new Utility();
            util.setListViewHeightBasedOnChildren(lvCategory);*/
            rotate = new RotateAnimation(0f, 360f, Animation.RELATIVE_TO_SELF,
                    0.5f, Animation.RELATIVE_TO_SELF, 0.5f);
            rotate.setDuration(600);
            rotate.setRepeatMode(Animation.RESTART);
            rotate.setRepeatCount(Animation.INFINITE);
        }

        /*
         * @Override public int getCount() { return
         * brandList.getDisplayNames().size(); //return count+=10; }
         */
        @Override
        protected View getPendingView(ViewGroup parent) {
            row = getLayoutInflater().inflate(R.layout.categorylist, null);

            child = row.findViewById(R.id.tv_CategoryItem_Name);
            child.setVisibility(View.GONE);
            child = row.findViewById(R.id.tv_CategoryItem_MPG1);
            child.setVisibility(View.GONE);
            child = row.findViewById(R.id.tv_CategoryItem_MPG2);
            child.setVisibility(View.GONE);
            child = row.findViewById(R.id.tv_CategoryItem_Price1);
            child.setVisibility(View.GONE);
            child = row.findViewById(R.id.tv_CategoryItem_Price2);
            child.setVisibility(View.GONE);
            child = row.findViewById(R.id.tv_CategoryItem_Rating1);
            child.setVisibility(View.GONE);
            child = row.findViewById(R.id.tv_CategoryItem_Rating2);
            child.setVisibility(View.GONE);
            child = row.findViewById(R.id.tv_CategoryItem_Year1);
            child.setVisibility(View.GONE);
            child = row.findViewById(R.id.tv_CategoryItem_Year2);
            child.setVisibility(View.GONE);
            child = row.findViewById(R.id.linear_CategoryList_itemlayer1);
            child.setVisibility(View.GONE);
            child = row.findViewById(R.id.linear_CategoryList_itemlayer2);
            child.setVisibility(View.GONE);
            /*
             * child = row.findViewById(R.id.img_CategoryItem);
             * child.setVisibility(View.GONE); child =
             * row.findViewById(R.id.img_CategoryItem_Arrow);
             * child.setVisibility(View.GONE);
             */

            /*
             * child = row.findViewById(R.id.linear_main_MPG);
             * child.setVisibility(View.GONE);
             */
            child = row.findViewById(R.id.throbber);
            child.setVisibility(View.VISIBLE);
            child.startAnimation(rotate);

            return (row);
        }

        @Override
        protected boolean cacheInBackground() {
            //count += 10;
            SystemClock.sleep(100000);
            tempListNamesCat.clear();
            tempListImagesCat.clear();
            tempListmpgCat1.clear();
            tempListmpgCat2.clear();
            tempListpriceCat1.clear();
            tempListpriceCat2.clear();
            tempListYearCat1.clear();
            tempListYearCat2.clear();
            tempListRatingCat1.clear();
            tempListRatingCat2.clear();
//          countriesSubCat.clear();
//          imagesSubCat.clear();
//          YearSubCat1.clear();
//          YearSubCat2.clear();
//          mpgSubCat1.clear();
//          mpgSubCat2.clear();
//          priceSubCat1.clear();
//          priceSubCat2.clear();
//          ratingSubCat1.clear();
//          ratingSubCat2.clear();

            int lastOffset = getLastOffset();
            if (lastOffset < LIST_SIZE) {
                int limit = lastOffset + BATCH_SIZE;
                for (int i = (lastOffset + 1); (i <= limit && i < LIST_SIZE); i++) {
                    tempListNamesCat.add(coll.getDisplayNames().get(i));
                    tempListImagesCat.add(coll.getImages().get(i));
                    tempListmpgCat1.add(coll.getMpg().get(i));
                    tempListmpgCat2.add(coll.getMpg().get(i + 1));
                    tempListpriceCat1.add(coll.getPrice().get(i));
                    tempListpriceCat2.add(coll.getPrice().get(i + 1));
                    tempListRatingCat1.add(coll.getRating().get(i));
                    tempListRatingCat2.add(coll.getRating().get(i + 1));
                    tempListYearCat1.add(coll.getYears().get(i));
                    tempListYearCat2.add(coll.getYears().get(i + 1));
                }

                setLastOffset(limit);

                if (limit < LIST_SIZE) {
                    // return true;
                    return (getWrappedAdapter().getCount() < coll
                            .getDisplayNames().size());
                } else {
                    return false;
                }
            } else {
                return false;
            }
        }

        @Override
        protected void appendCachedData() {

            @SuppressWarnings("unchecked")
            // Activity activity = this;
            // ArrayAdapter<String> arrAdapterNew =
            // (ArrayAdapter<String>)getWrappedAdapter();
            CategoryListLazyAdapter arrAdapterNewCategory = (CategoryListLazyAdapter) getWrappedAdapter();
            // int listLen = tempList.size();
            // int listLen = tempListNames.size();
            countriesSubCat.addAll(tempListNamesCat);
            imagesSubCat.addAll(tempListImagesCat);
            mpgSubCat1.addAll(tempListmpgCat1);
            mpgSubCat2.addAll(tempListmpgCat2);
            priceSubCat1.addAll(tempListpriceCat1);
            priceSubCat2.addAll(tempListpriceCat2);
            ratingSubCat1.addAll(tempListRatingCat1);
            ratingSubCat2.addAll(tempListRatingCat2);
            YearSubCat1.addAll(tempListYearCat1);
            YearSubCat2.addAll(tempListYearCat2);
            arrAdapterNewCategory.notifyDataSetChanged();
            /*Utility util = new Utility();
            util.setListViewHeightBasedOnChildren(lvCategory);*/
            /*
             * for(int i=0; i<listLen; i++){ //
             * arrAdapterNew.add(tempList.get(i)); }
             */
        }
    } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-28T06:54:49.503

您需要将**android:nestedScrollingEnabled="true"**设置为其 XML 声明 **或** 通过显式调用**setNestedScrollingEnabled(true)**。

> *检查：[https ://stackoverflow.com/a/6211286](https://stackoverflow.com/a/6211286)*

# java - 声纳上的 java.lang.ClassCastException

> ID：11264707
> 
> 赞同：0
> 
> 时间：2012-06-29T15:33:27.547
> 
> 标签：java, junit, sonarqube

最近，我被分配使用 Sonar 和 Maven 检查 Java 代码覆盖率。我运行`mvn sonar:sonar`并且构建出来的很好，而且我可以从仪表板看到结果。

但是，测试用例会以错误的形式出现，如果我正常运行它就不会发生。这是错误堆栈跟踪：

```
$Proxy11 cannot be cast to com.epsilon.agility.message.dao.MessageDAO
java.lang.ClassCastException: $Proxy11 cannot be cast to                    com.epsilon.agility.message.dao.MessageDAO
at  com.epsilon.agility.message.utils.MessageDBAdaptorService.getMessageDAO(MessageDBAdaptorSer vice.java:32)
at com.epsilon.agility.message.facade.MessageClassificationFacadeImpl.initilaizeDAOs(MessageClassificationFacadeImpl.java:91)
at com.epsilon.agility.message.facade.MessageClassificationFacadeImpl.<init>(MessageClassificationFacadeImpl.java:86)
at com.epsilon.agility.message.dao.test.TestMessageClassificationFacadeImpl.setUp(TestMessageClassificationFacadeImpl.java:85)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.junit.internal.runners.ClassRoadie.runBefores(ClassRoadie.java:49)
at org.junit.internal.runners.ClassRoadie.runProtected(ClassRoadie.java:36)
at org.junit.internal.runners.JUnit4ClassRunner.run(JUnit4ClassRunner.java:42)
at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:62)
at org.apache.maven.surefire.suite.AbstractDirectoryTestSuite.executeTestSet(AbstractDirectoryTestSuite.java:140)
at org.apache.maven.surefire.suite.AbstractDirectoryTestSuite.execute(AbstractDirectoryTestSuite.java:127)
at org.apache.maven.surefire.Surefire.run(Surefire.java:177)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.apache.maven.surefire.booter.SurefireBooter.runSuitesInProcess(SurefireBooter.java:345)
at org.apache.maven.surefire.booter.SurefireBooter.main(SurefireBooter.java:1009) 
```

以下是错误中涉及的方法：

```
@BeforeClass
@Transactional(propagation = Propagation.REQUIRED, timeout = 10)
public static void setUp() throws IOException {
    conn = TestDBUtils.getDBConnection();

    MessageDBAdaptorService.init(conn);

    msgclassificationFacade = new MessageClassificationFacadeImpl(conn);

    messageDAO = MessageDBAdaptorService.getMessageDAO();
    messageAssetDAO = MessageDBAdaptorService.getMessageAssetDAO();
    channelDAO = MessageDBAdaptorService.getChannelDAO();
    folderItemDAO = MessageDBAdaptorService.getFolderItemDAO();
    folderDAO = MessageDBAdaptorService.getFolderDAO();

    Assert.assertNotNull(messageDAO);
    Assert.assertNotNull(messageAssetDAO);
    Assert.assertNotNull(channelDAO);
    Assert.assertNotNull(folderItemDAO);
    Assert.assertNotNull(folderDAO);

} 
```

我已经在网上搜索了解决方案，但似乎 Sonar 没有类似的解决方案。我怀疑问题*可能*来自 Sonar 对测试用例的不同方法，因为测试用例在正常情况下运行良好。

如果以上内容还不够，我将发布更多代码和信息。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T12:16:14.393

这似乎不是声纳问题。从堆栈跟踪中，我假设 maven surefire 插件无法执行特定测试。如果我是你，我会这样做。- 验证您的自定义构建和 Sonar 是否使用相同的 Maven Surefire 插件版本并具有相同的配置。

# c - 空白计数程序给出不正确的输出

> ID：11264709
> 
> 赞同：1
> 
> 时间：2012-06-29T15:33:29.870
> 
> 标签：c

下面是我编写的一个小程序，用于计算从键盘输入空格、换行符或制表符的次数。

但是，我不知道出了什么问题。无论输入多少空格或换行符，我的计数总是为零。

```
#include <stdio.h>

/*program to count blanks ,tabs and newlines */

int main()
{
       int cnt_space=0,cnt_newline=0,cnt_tab=0;
       int c;

       while(c=getchar()!=EOF)
       {
         if(c==' ')
         {
           ++cnt_space;
         }
         if(c=='\n')
         {
           ++cnt_newline;
         }
         if(c=='\t')
         {
           ++cnt_tab;
         }
       }

       printf("spaces=%d\nnewlines=%d",cnt_space,cnt_newline);
       return 0;
 } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-29T15:34:50.087

改变这个

```
while(c=getchar()!=EOF) 
```

到

```
while((c=getchar())!=EOF) 
```

这很重要的原因是 getchar 返回值首先与 EOF 进行比较，结果为 0 或 1。然后将结果值存储在 c 中。所以它永远不会匹配任何条件。

getchar 首先与 EOF 进行比较的原因是 != 运算符的优先级高于 = 运算符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T15:35:17.587

您在循环标题中缺少一对括号：

```
while ( (c=getchar()) != EOF ) {
    ....
} 
```

目前，您的作业需要`getchar()!=EOF`，即`1`或`0`，并将其分配给`c`。这从不匹配空格`' '`或`'\n'`.

要了解有关C 中*操作优先级*的更多信息，请查看[此图表](http://www.swansontec.com/sopc.html)。但是，一般来说，添加一对括号来强制执行您需要的操作顺序永远不会有什么坏处。如果您对正在编写的表达式中的操作优先级有疑问，那么您的读者很可能也会有疑问。

# c# - 选择并投射以将通用列表转换为 DataRow[]

> ID：11264715
> 
> 赞同：0
> 
> 时间：2012-06-29T15:33:59.530
> 
> 标签：c#, linq, casting, dataset

有一个名为 DsPerson 的类型化数据集和一个名为 ListPerson 的自定义类型化通用列表

```
DsPerson Ds1Person;

List<Person> ListPerson; 
```

想做类似下面代码的事情，

请帮我纠正这个：

```
 DataTable dtPerson = Ds1Person.Tables["Person"];
 DataRow drPerson = dtPerson.NewRow();

 DsPerson.PersonRow[] updRows = ListPerson.Cast<Person>().Select(row => dtPerson.NewRow()
                      {
                          Nick = row.Nick,
                          Name = row.NameX,
                       }).ToArray(); 
```

需要以这种方式制作的 DataRow Array 或通用 DataTable。

由于我正在处理的代码规范，不在这里寻找实体或任何其他替代方案。

任何帮助都非常感谢...

* * *

**`More Clarifying :`**

**需要什么：**

像扭转这些：（相反的方式）

[http://www.stackoverflow.com/questions/441023/fastest-way-to-convert-datatable-to-generic-list](http://www.stackoverflow.com/questions/441023/fastest-way-to-convert-datatable-to-generic-list)

或者一种更清洁和 Linqy 的方式来做类似的事情：

[http://beecy.net/post/2009/05/18/convert-generic-list-to-datatable-using-reflection.aspx](http://beecy.net/post/2009/05/18/convert-generic-list-to-datatable-using-reflection.aspx)

获取正确的**DsPerson.PersonRow[] updRows** 以与 adapter.Update(updRows); 一起使用

**怎么了 ？**

Cast - Select 语句有轻微错误：我只知道它应该与此类似，所以我不确定这行代码的结构，

***现在报告的错误是：***

*错误 2 无法将类型“System.Collections.Generic.IEnumerable”隐式转换为“DsPerson.PersonRow[]”。存在显式转换（您是否缺少演员表？）*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T15:48:13.370

这同样适用于强类型`DataSet`：

```
DataRow[] updRows = 
    ListPerson.Select(p => dtPerson.Rows.Add(p.Nick, p.Name)).ToArray(); 
```

# sql - 在不知道基表的情况下更改非保留键表（视图）中的属性值

> ID：11264719
> 
> 赞同：1
> 
> 时间：2012-06-29T15:34:14.497
> 
> 标签：sql

实际上我正在寻找修改 dba_users 的密码属性中的值。但是，每当我尝试更新密码属性的值时，它都会给出错误“无法修改映射到非键保留表的列”。

有什么方法可以更改 dba_users 视图的密码属性值。这个视图的基表是什么。

这是代码

```
update dba_users set password='01DA2594F386175C' where username='HR'; 
```

在这里，我在 Oracle 10g 上执行此操作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T15:42:27.193

如果 SQL 无法确定要更新的内容，则无法更新视图。这不是 SQL 问题，这是视图逻辑的结果。

例如，如果用户名和密码不是一对一的关系怎么办？您可能有多个用户 ID 具有相同的用户名，但密码不同，并且服务器无法知道该怎么做。

# haskell - 快速排序列表并将其转换为元组列表（elem，count）

> ID：11264723
> 
> 赞同：0
> 
> 时间：2012-06-29T15:34:27.320
> 
> 标签：haskell, quicksort

如何将未排序的单词列表转换为元组列表（单词，计数），按单词排序（fst）min-max 不区分大小写？

```
["AAA","America", "England", "Spain"," Ireland"," aeroplane",
 "aeroplane", "Aeroplane", "AeRoPlAne", "helicopter", "HELICOPTER",
 "Zebra", "America", "Elephant", "abc", "A.B.C." , "haskell", "Haskell", "ZZZ", "zzz"] 
```

预期产出：

```
[("a.b.c.",1),("aaa",1),("abc",1),("aeroplane",4),("america",2),("elephant",1)
,("england",1),("haskell",2),("helicopter",2),("ireland",1),("spain",1),("zebra",1),("zzz",2)]

[("a.b.c",1), ("zzz", 2)] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T17:02:11.337

我已将其分解为应该使这更容易掌握的步骤。首先，对列表进行排序，然后将其缩减为 (Word, Count) 元组的列表。

```
import Data.Char (toLower)

quicksort :: (Ord a) => [a] -> [a]
quicksort [] = []  
quicksort (x:xs) =
  (quicksort [a|a<-xs, a<=x]) ++ [x] ++ (quicksort [a|a<-xs, a>x])

addCount :: String -> [(String, Int)] -> [(String, Int)]
addCount a [] = [(a, 1)]
addCount a (x:xs)
  | a == fst x = (fst x, (snd x) + 1) : xs
  | otherwise  = x : (addCount a xs)

occurrences :: [(String, Int)] -> [String] -> [(String, Int)]
occurrences counts [] = counts
occurrences counts (x:xs) =
  occurrences countL xs
  where countL = addCount x counts

myList = ["AAA","America", "England", "Spain","Ireland", "aeroplane",
          "aeroplane", "Aeroplane", "AeRoPlAne", "helicopter", "HELICOPTER",
          "Zebra", "America", "Elephant", "abc", "A.B.C." , "haskell", "Haskell",
          "ZZZ", "zzz"]

main = do
  let downcased = map (map toLower) myList
  let sorted = quicksort downcased
  let occurencesL = occurrences [] sorted
  putStrLn . show $ occurencesL
  putStrLn . show $ [head occurencesL, last occurencesL] 
```

这*非常*冗长，但我希望您能更轻松地理解这种方式发生的事情。

更短方式的示例：

```
 import Data.Char (toLower)
  import Data.List

  main = do
    let l = map (\a -> (head a, length a)) $ groupBy (\x y -> (map toLower x) == (map toLower y)) myList
    putStrLn . show $ l
    putStrLn . show $ [head l, last l] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T11:52:47.877

这是一个单行：

```
 Data.List.sort $ Data.Map.toList $ Data.Map.fromListWith (+) [(map Data.Char.toLower word, 1) | word <- lst] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T22:19:47.947

分组功能：

```
myGroup :: [[Char]] -> [([Char],Int)]
myGroup = fmap (\x -> (head x,length x)) . groupBy (==) . sort . fmap (fmap toLower . filter (not . isSpace)) 
```

请注意，我假设您想从字符串中删除空格。您可以通过更改过滤器轻松更改该部分。

那么边界函数：

```
headLast :: [t] -> [t]
headLast xs = [head xs,last xs] 
```

# php - MIMI 类型定义的变化？

> ID：11264724
> 
> 赞同：0
> 
> 时间：2012-06-29T15:34:31.280
> 
> 标签：php, mime-types

我曾经在使用 finfo_open(FILEINFO_MIME_TYPE) 时获得不同的 MIMI 类型。

例如，基于内存，我相信 docx 是 application/vnd.openxmlformats-officedocument.wordprocessingml.document （请参阅此 StackOverflow 帖子[What is a correct mime type for docx, pptx etc?](https://stackoverflow.com/questions/4212861/what-is-a-correct-mime-type-for-docx-pptx-etc)）。我还记得它们显示为 application/zip，但这可能是在使用 mime_content_type() 时。此外，认为 js 文件以 application/x-javascript 的形式出现。

下面是我现在与脚本一起显示它们的内容。我最近更新到 PHP 5.14，想知道是否有新标准或者我是否搞砸了。我对此很好，但必须更改我的脚本，将扩展与 MIMI 类型进行比较。

编辑 - 刚刚在 PHP 手册中找到以下内容。

> 自 PHP >= 5.3.11 和 >= 5.4.1 起，magic 数据库格式发生了变化。因此，升级了内部 mime 数据库。这尤其会影响读取外部魔法的代码。读取旧格式的魔法文件将不起作用。此外，mime 类型的一些文本表示也发生了变化，例如对于 PHP，将返回“PHP 脚本，ASCII 文本”而不​​是“PHP 脚本文本”。

谢谢

基于以下脚本的 MIMI 列表

```
- directory
csv - text/plain
doc - application/msword
docx - application/msword
htm - text/html
ini - text/plain
jpg - image/jpeg
js - text/plain
mp3 - application/octet-stream
pdf - application/pdf
php - text/html
pptx - application/vnd.ms-powerpoint
pst - application/octet-stream
so - application/x-sharedlib
txt - text/plain
wmv - video/x-ms-asf
xls - application/msword
xlsx - application/vnd.ms-excel
zip - application/zip 
```

PHP 代码

```
<?php
$finfo = finfo_open(FILEINFO_MIME_TYPE); // return mime type ala mimetype extension
foreach (glob("*") as $filename) {
    $files[pathinfo($filename, PATHINFO_EXTENSION)]=array('filename'=>$filename,'finfo'=>finfo_file($finfo, $filename));
}
ksort($files);
foreach ($files as $fileext=>$file) {
    echo ($fileext.' - '.$file['finfo'].'<br />');
}
finfo_close($finfo);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T15:38:00.143

打印的 mime 类型会因系统配置而异。如果系统配置为在 MSWord 中打开 .docx 文件，那么它将具有`application/msword`mime 类型。同样，如果将相同的扩展名 .docx 配置为在 LibreOffice 中打开，它将具有`application/vnd.openxmlformats-officedocument.wordprocessingml.document`mime 类型。

由于这种对服务器配置的依赖性，mime 类型不是很可靠。

# visual-studio-2010 - 我可以在 xaml 中强制在 xmlns:local 上使用程序集名称吗？

> ID：11264732
> 
> 赞同：1
> 
> 时间：2012-06-29T15:35:10.637
> 
> 标签：visual-studio-2010, xaml, workflow-foundation-4

在 .xaml 活动中，对同一程序集中的类型的引用使用命名空间“xmlns:local”，而没有像这样的程序集引用：

```
xmlns:local="clr-namespace:Foo.Bar" 
```

由于没有程序集，我的单元测试加载 xaml 失败，我的代码在第三个程序集（Azure Worker Role）中也无法加载它，因为它不知道命名空间属于哪个程序集。

无论如何我可以强制 xmlns 像这样引用程序集（以及 xaml 文件中的所有其他 xmlns）：

```
xmlns:local="clr-namespace:Foo.Bar;assembly=Foo" 
```

如果我`;assembly=Foo`手动添加它可以工作，但是当我更改某些内容时，Visual Studio 会不断删除程序集字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T23:10:55.937

不，您不能强制 LocalAssembly。

您可以只引用程序集并以这种方式使用活动。或者，如果您正在加载 .xaml 文件，则可以使用 XamlXmlReader 指定 LocalAssembly。

我在最新版本的[Microsoft.Activities.Extensions](http://wf.codeplex.com/wikipage?title=Microsoft.Activities%20Overview&referringTitle=Documentation/)中添加了一个名为 XamlHelper 的类，它可以为您执行此操作，但它的工作原理如下

```
 /// <summary>
    /// Loads a XAML or XAMLX file
    /// </summary>
    /// <param name="xamlFile">
    /// The xaml file. 
    /// </param>
    /// <param name="localAssembly">
    /// The local assembly. 
    /// </param>
    /// <returns>
    /// The activity or root activity of a WorkflowService 
    /// </returns>
    public static Activity Load(string xamlFile, Assembly localAssembly)
    {
        Contract.Requires(localAssembly != null);
        if (localAssembly == null)
        {
            throw new ArgumentNullException("localAssembly");
        }

        var readerSettings = new XamlXmlReaderSettings
            {
                LocalAssembly = localAssembly, 
                AllowProtectedMembersOnRoot = true
            };

        var xamlType = GetXamlType(xamlFile);
        switch (xamlType)
        {
            case WorkflowXamlFileType.Activity:
                using (var reader = new XamlXmlReader(xamlFile, readerSettings))
                {
                    return ActivityXamlServices.Load(reader);
                }

            case WorkflowXamlFileType.WorkflowService:
                using (var reader = new XamlXmlReader(xamlFile, readerSettings))
                {
                    return ((WorkflowService)XamlServices.Load(reader)).GetWorkflowRoot();
                }

            default:
                throw new ArgumentException("Invalid file extension on xamlFile");
        }
    } 
```

# delphi - Delphi - 保持 Word 文档的焦点

> ID：11264733
> 
> 赞同：0
> 
> 时间：2012-06-29T15:35:12.710
> 
> 标签：delphi, ms-word, office-automation

我在 Delphi 中处理的当前应用程序遇到了一个有趣的问题。问题是在某些情况下，我们的 TWordApplication 的 ActiveDocument 可以在文档完成之前更改。

我有一个 TWordApplication (WordApp) 和一个 TWordDocument (WordDoc)，它们的初始化如下：

```
WordApp.Connect;
WordApp.Documents.Add(Template, EmptyParam, EmptyParam, EmptyParam);
WordApp.ChangeFileOpenDirectory(jdir);
WordDoc.ConnectTo(WordApp.ActiveDocument); 
```

大多数情况下，我会更新一些书签或从许多模板中插入文本：

```
Range := '';
convert := msoFalse;
LinkFile := msoFalse;
Attach := msoFalse;
WordApp.Selection.InsertFile(Template, Range, Convert, LinkFIle, Attach); 
```

在一个工作流程中，文档的创建被第二个文档的创建中断。如果此文档在保存后未关闭，则它会“窃取”原始文档的焦点。我认为用户不需要记住关闭第二个文档是合法的。

我想要做的是将**WordApp**的焦点切换到**WordDoc**，或者直接将 WordDoc 用于 InsertFile - 但这似乎不是一个选项。

**（还有第三种选择，我在创建第一个文档之前**整理第二个文档所需的数据，但这需要更改应用程序逻辑。）

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T08:43:58.463

最后，我重写了逻辑以在工作流程的早期准备第二个文档，这意味着我可以不间断地编译最终文档。

# java - Java 序列化行为

> ID：11264734
> 
> 赞同：-2
> 
> 时间：2012-06-29T15:35:16.323
> 
> 标签：java, serialization

我正在进行序列化，但我无法理解以下内容：

我不明白为什么这段代码的输出是：

```
import java.io.*;

public class InnerOuterTest {
    public static ObjectOutputStream out;
    public static ObjectInputStream in;

    static {
        try {
            out = new ObjectOutputStream(new FileOutputStream("save.ser"));
            in = new ObjectInputStream(new FileInputStream("save.ser"));
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    public static void main(String[] args) throws IOException, ClassNotFoundException {
        try {
            ShouldForgive f = new ShouldForgive();
            f.x = 5;
            write(f);
            ShouldForgive g = read();
            System.out.println(g.x);
            f.x = 0;
            g.x=8;
            write(f);
            ShouldForgive v = read();
            System.out.println("is "+v.x);
        } finally {
            out.close();
            in.close();
        }
    }

    private static void write(ShouldForgive f) throws IOException {
        out.writeObject(f);
    }

    public static ShouldForgive read() throws ClassNotFoundException, IOException {
        return (ShouldForgive) in.readObject();
    }
}

class ShouldForgive implements Serializable {
    int x = -1;
} 
```

是

```
5
8 
```

并不是

```
5
0 
```

我尝试`f == g`了返回false，如果我重置输入流。我发现如果我实现`readObject`它只会被调用一次......我不明白这种行为。（为什么对象只读取一次？）

我觉得序列化只发生一次......对象是如何跟踪的？即使我实现`readObject`并且`writeObject`没有从文件中实际读取或写入，我仍然得到`8`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T01:57:38.353

如果您`out.reset()`在第一次写入后调用，您将获得您期望的行为，或者如果您使用`writeUnshared()`而不是`writeObject()`. 已经写入流的对象不会被重写；而是写入先前写入的对象的“句柄”。有关详细信息，请参阅 Javadoc。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-29T15:48:41.643

好吧……我想我明白了……

1.  **在序列化期间**，它**不是被序列化的对象，而是它的实例变量......作为提取和存储。**对于一个对象，它的实例变量就是一切......

2.  因此，在反序列化过程中，**相同的实例变量会膨胀回来**，并使用这些实例变量值，**在堆上创建另一个相同的对象。**

3.  如果您检查**这两个对象的哈希码，它们将是不同的。**

那就是导致您提到的上述行为。

要么按照这个顺序

```
f.x = 0;
g.x=8; 
```

或这个

```
g.x=8;       
f.x = 0; 
```

**结果仍然是 8，因为它现在是堆上完全不同的对象，具有不同的实例变量。**

**编辑部分**

`The below code will print f as 5..... for both the sysout`

```
public static void main(String[] args) throws IOException, ClassNotFoundException {
        try {
            ShouldForgive f = new ShouldForgive();
            f.x = 5;
            write(f);
            ShouldForgive g = read();
            System.out.println(g.x);

            f.x=0;
            write(f);
            ShouldForgive v = read();
            System.out.println("is "+v.x);
        } finally {
            out.close();
            in.close();
        }
    } 
```

# linux - 确定 EC2 分区指向的卷

> ID：11264740
> 
> 赞同：0
> 
> 时间：2012-06-29T15:35:28.053
> 
> 标签：linux, amazon-ec2

我有一个中高 CPU EC2 实例设置。我如何知道 /proc/partitions 中列出的设备映射到哪些卷？如果我`cat /proc/partitions`得到以下信息：

```
# cat /proc/partitions
major minor  #blocks  name

202       65    6291456 xvde1
202      144  356485632 xvdj
202       67     917504 xvde3
202      176   10485760 xvdl 
```

我很确定第一个是根卷。我还为日志文件等创建了第二个卷。我知道那个卷是 10GB，所以我很确定那是`xvdl`.

我不知道是什么`xvdj`。它看起来像它的 356 GB！？我可以使用吗？我怎么知道它是什么以及如何使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T16:56:55.043

如果您键入`mount`，您将看到所有文件系统及其设备的列表。如果特定设备上没有文件系统，您可以尝试将其用于其他目的。过去我发现我能够将文件系统放在这些未使用的分区之一上并在实例中使用它。

# c++ - SDL fscanf 函数问题

> ID：11264744
> 
> 赞同：0
> 
> 时间：2012-06-29T15:35:47.990
> 
> 标签：c++, sdl, scanf

我创建了一个函数，它加载了一个非常基本的地图文件，格式如下：

```
1:1 2:1 1:1 2:2 2:2 2:2 ...
................... 2:1 1:1 
```

但是，当`fscanf`用于读取文件时，我得到了一些非常奇怪的行为。

查看`FILE`我为读取地图而设置的变量，`base`“流”的元素`FILE`似乎已经完美地读取了文件。但是，`_ptr`的“流”`FILE`缺少第一个数字和最后一个数字。所以它被读作：

```
:1 2:1 1:1 2:2 2:2 2:2 ...
................... 2:1 1: 
```

并产生错误。

这是我的功能：

```
/**
 *  loads a map
 */
bool Map::LoadMap(char* tFile)
{
    FILE* FileHandle = fopen(tFile, "r");           // opens map file for reading

    if (FileHandle == NULL)                         // returns if the map file does not exist
        return false;

    for(int Y = 0; Y < MAP_HEIGHT; Y++)             // iterates through each row
    {
        for(int X = 0; X < MAP_WIDTH; X++)          // iterates through each column
        {
            Node    tNode;                          // temp node to put in the map matrix

            int     tTypeID     = 0;
            int     tNodeCost   = 0;

            fscanf(FileHandle, "%d:%d", tTypeID, tNodeCost);

            tNode.SetPosition(X, Y);
            tNode.SetType(tTypeID);
            tNode.SetNodeCost(tNodeCost);

            mMap[X][Y]      = tNode;                // inserts temp node into list
        }
        fscanf(FileHandle, "\n");
    }

    fclose(FileHandle);

    return true;
} 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T15:38:00.810

您需要将变量的地址传递给`fscanf()`：

```
fscanf(FileHandle, "%d:%d", &tTypeID, &tNodeCost); 
```

建议检查返回值`fscanf()`以确保成功：

```
// fscanf() returns the number of assignments made or EOF.
if (2 == fscanf(FileHandle, "%d:%d", &tTypeID, &tNodeCost))
{
} 
```

# javascript - 调用如下函数：

> ID：11264755
> 
> 赞同：1
> 
> 时间：2012-06-29T15:36:31.550
> 
> 标签：javascript, syntax

我知道`break`,`continue`和`return`函数是内置的。

但我看到[http://summerofgoto.com/](http://summerofgoto.com/)允许写`goto <label>`。

我们应该写什么才能像这样调用函数？

注意：我得到错误：`Missing ; before statement`如果我写`foo bar;`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T15:42:20.563

你不能。["Summerofgoto" / "goto.js"](http://summerofgoto.com/js/goto.js)使用了一个笨拙的 hack 来启用这个语句：它逐行解析 JS 源代码并使用正则表达式来查找像 "goto xy;" 这样的模式。

基本上，[“goto.js”](http://summerofgoto.com/js/goto.js)它是 JavaScript 的预处理器，它将您的实际代码（包含标签和 goto）重写为常规 JS - 它将您的标签和 goto 语句替换为函数和函数调用。

不过，你可以做同样的事情。但是，出于性能原因，我强烈建议您不要这样做。

“break”之类的不是函数，它们是核心语言的一部分。那是完全不同的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T15:41:40.747

`goto.js`是隐身的。它不是将您的脚本实际作为 Javascript 运行，而是读取文档的`<script type="text/jsplusgoto">`（*不是* `text/javascript`！），然后将标签和 goto 重写为实际的 Javascript。

无论你想做什么，这种技术几乎肯定是矫枉过正。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T15:42:08.057

这些是语言的关键字，而不是函数。当一个人想用新的关键字扩展一种语言时，通常必须解析包含这些关键字的代码，并且每个新关键字的每次出现都替换为原始语言中可用的函数调用或其他合适的构造。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T15:43:48.593

> 我知道`break`,`continue`和`return`函数是内置的。

`break`, `continue`, 和`return`根本不是函数。通常`goto`被认为是有害的，并且`break`,`continue`和任何`return`在函数中间的都是 goto。

# jquery - 滚动时如何自动选择锚点

> ID：11264758
> 
> 赞同：1
> 
> 时间：2012-06-29T15:36:43.670
> 
> 标签：jquery, scroll, anchor, vertical-scrolling

我会尽量解释清楚。

我有一个侧边栏，例如 3 个项目。每个项目都是指向页面中锚点的链接。当我单击一个项目时，我使用 scrollTo 函数进行平滑滚动。它工作得很好。

但是我现在想要的是，当我滚动时，例如转到锚点 3，将自动选择滚动时显示的当前锚点。清除 ？

例如：项目 1 被选中。我开始滚动并到达锚点 2。自动选择项目 2 并且项目 1 将进入未选择状态。

我继续滚动并到达锚点 3。项目 2 将进入未选择状态，项目 3 被自动选择。

因此，项目状态会通过滚动而自动更改，而不仅仅是单击项目。

有没有聪明的方法来做到这一点？

提前谢谢。

巴斯蒂安

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T16:10:25.377

Twitter bootstrap 有一个实现：http: [//twitter.github.com/bootstrap/javascript.html#scrollspy](http://twitter.github.com/bootstrap/javascript.html#scrollspy)

此外，jQuery 航点提供了足够的功能：http: [//imakewebthings.com/jquery-waypoints/](http://imakewebthings.com/jquery-waypoints/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T15:38:54.650

看看这个插件：[http ://remysharp.com/2009/01/26/element-in-view-event-plugin/](http://remysharp.com/2009/01/26/element-in-view-event-plugin/)

# c# - 向数据集添加了不允许设置值的列

> ID：11264759
> 
> 赞同：0
> 
> 时间：2012-06-29T15:36:43.527
> 
> 标签：c#, .net, dataset

所以我有一个已经从数据库中填充的类型化数据集。在显示特定的 Windows 窗体时，我想向该数据集添加一些临时列以显示在网格中。

问题是我可以很好地添加这些列，但是每当我尝试为我以编程方式添加的列之一设置一个值时，该值不会改变，并且该行的行状态保持不变。

```
//DataSet has already been filled from database
private void AddColumns( MyTypedDataSet DataSet )
{
   DataSet.Table1.Columns.Add( "newCol", typeof(double));

   foreach( MyTypedDataSet.Table1Row dataRow in DataSet.Table1 )
      dataRow["newCol"] = 123.4;
} 
```

如果我打开监视窗口，则会在整个 foreach 循环中`dataRow.RowState`保留。`Unchanged`

如果我在循环运行后打开 DataSet Visualizer，每行的列仍然是 DBNull

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T15:41:51.917

在添加修改之前尝试提交您的数据（AcceptChanges）

```
 DataSet.Table1.AcceptChanges();

           foreach( MyTypedDataSet.Table1Row dataRow in DataSet.Table1 )
           {
                dataRow["newCol"] = 123.4;
           } 
```

# javascript - Google Maps API v3 - fitBounds 仅居中一个标记

> ID：11264762
> 
> 赞同：1
> 
> 时间：2012-06-29T15:36:50.933
> 
> 标签：javascript, google-maps, google-maps-api-3, bounds

我有一些我要检索并希望将地图居中的标记。是的，我已经阅读了所有其他答案，但它似乎对我不起作用： [Google Map API v3 — set bounds and center](https://stackoverflow.com/questions/1556921/google-map-api-v3-set-bounds-and-center)

JS：

```
geocoder.geocode( {'address': loc}, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            var markerBounds = new google.maps.LatLngBounds();
            var coordinate = results[0].geometry.location;
            var icon = new google.maps.MarkerImage("images/icon-"+type+".png", new google.maps.Size(37, 44));   

            //create the marker
            var marker = new google.maps.Marker({
                map: map, 
                position: coordinate,
                visible: true,
                id: type,
                shadow: shadow,
                icon: icon
            });
            markerBounds.extend(coordinate);
            map.fitBounds(markerBounds);
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T15:49:35.017

您的代码总是使用只有一个点的 LatLngBounds 调用 fitBounds，最后一个标记...如果您多次调用该函数，每次调用它时，都会 fitBounds 最后一个标记。您可以在 geocoder.geocode 函数之外定义 markerBounds 变量，因此它将保留它的值。

```
var markerBounds = new google.maps.LatLngBounds();
geocoder.geocode( {'address': loc}, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            var coordinate = results[0].geometry.location;
            var icon = new google.maps.MarkerImage("images/icon-"+type+".png", new google.maps.Size(37, 44));   

            //create the marker
            var marker = new google.maps.Marker({
                map: map, 
                position: coordinate,
                visible: true,
                id: type,
                shadow: shadow,
                icon: icon
            });
            markerBounds.extend(coordinate);
            map.fitBounds(markerBounds);
        }
} 
```

现在，markerBounds 被初始化一次，并随着每个新的标记进行扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-07T05:51:42.187

实际上，您可以通过以下方式输出存储在边界中的坐标：

```
console.log("mapFitBounds:"+bounds);
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
```

然后只需检查您的 Chrome 登录控制台。你会知道这个问题，因为我发现它有两个重复的坐标在我的范围内，然后定位问题。

# c++ - seekg() 函数失败

> ID：11264764
> 
> 赞同：2
> 
> 时间：2012-06-29T15:37:09.760
> 
> 标签：c++, std, ifstream, seekg

我正在尝试编写一些简单的代码来读取文本文件但读取第一行两次。我认为这就像这样简单

```
 std::ifstream file;
    file.open("filename", std::ios_base::in);
    std::string line;
    std::getline(file, line);
    // process line
    file.seekg(0, ios::beg);

    while (std::getline(file, line))
    {
        // process line
    } 
```

但是，由于第一行未处理两次，因此 seekg 必须失败。知道为什么吗？

请注意：这不是我面临的问题，而是它的简化版本，因此不必粘贴多个类代码和多​​个函数。真正的问题涉及将文件指针传递给多个类中的多个函数。第一个函数可能会或可能不会被调用并读取文件的第一行。第二个函数读取整个文件，但必须首先调用 seekg 以确保我们位于文件的开头。

我只是使用上面的代码来简化讨论。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T15:53:15.967

我认为我不会回到开头并阅读第一行两次，而是使用以下方法来处理事情：

```
std::ifstream file("filename");

std::string line;

std::getline(file, line);
process(line);

do { 
    process(line);
} while (getline(file, line)); 
```

目前，这假设`process`不修改`line`（但如果需要，很容易为第一次调用制作一个额外的副本）。

编辑：鉴于已编辑答案中的修改要求，听起来确实需要寻找。在这种情况下，`clear`在继续之前它可能对流最干净：

```
std::getline(file, line);
process1(line);

file.seekg(0);
file.clear();

process2(file); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T15:43:38.297

理想情况下，您的代码应如下所示：

```
std::ifstream file("filename"); //no need of std::ios_base::in

if ( file ) //check if the file opened for reading, successfully
{
   std::string line;
   if ( !std::getline(file, line) )
   {
        std::cerr << "read error" << std::endl;
        return;
   }

   // process line

   if ( !file.seekg(0, ios::beg) )
   {
        std::cerr << "seek error" << std::endl;
        return;
   }

   while ( std::getline(file, line) )
   {
      // process line
   }
}
else
{
   std::cerr << "open error" << std::endl;
} 
```

# c# - MVC3 - 自动虚拟收集（数据库保存更改）

> ID：11264765
> 
> 赞同：0
> 
> 时间：2012-06-29T15:37:17.613
> 
> 标签：c#, asp.net-mvc-3, entity-framework

编辑：

我发现了为什么它没有看到我更改了与modelbinder绑定的对象的更改的问题。在这种情况下，它不会被上下文跟踪。

你好

我的应用程序中的虚拟 ICollections 有问题。EF 自动保存您对实体所做的更改是否正确？*** *

例如，如果我将一个项目添加到列表（将玩家添加到团队），它会在不使用存储库和 dbset 将其保存到数据库的情况下工作吗？

我有这样的东西

```
 public int RayonId { get; set; }
    public String Rayonnaam { get; set; }
    public virtual ICollection<Duivenmelker> Duivenmelkers { get; set; }

    public Rayon()
    {
           Duivenmelkers = new List<Duivenmelker>();

    }      

    public void AddMelker(Duivenmelker m)

    {
        Duivenmelkers.Add(m);
    } 
```

上面的代码仅在本地更改列表。但是不保存对数据库的更改。我可以调用存储库将新对象直接添加到数据库中，但这不是我认为的好方法。

什么可能是错误的导致这不起作用？*** *

***savechanges 返回 0（认为没有进行任何更改）***

我现在添加了

```
 c.Vluchten.Attach(v);
            c.Entry(v).State = EntityState.Added; 
```

这显然有效，但我仍然不知道为什么 EF 在没有明确告诉他的情况下看不到这些变化

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T16:59:16.380

不要使用模型绑定器中的绑定对象，而是搜索附加到上下文的对象并在那里进行更改。（EntityChangetracker 不跟踪绑定对象）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T15:40:06.573

你需要打电话`SaveChanges()`

# java - Dispatcher 没有订阅者

> ID：11264766
> 
> 赞同：1
> 
> 时间：2012-06-29T15:37:23.687
> 
> 标签：java, spring-integration

我有一个小问题，我已经弄清楚它发生的时间和原因，但我不知道如何解决它。问题如下：

我有 jms:outbound-channel-adapter、网关和直接通道。在 ConsumerEndpointFactoryBean 初始化我的适配器和生命周期激活端点之间，我收到一条消息。所以导致了**org.springframework.integration.MessageDeliveryException: Dispatcher has no subscribers**

如何告诉我的发送方 bean 等待端点已激活？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T16:03:24.007

实现 SmartLifeCycle 并返回 Integer.MAX_VALUE 的相位。然后，您的 bean 将成为最后一个被初始化的 bean（CEFB 的阶段 = 0）。

# jquery - jquery 图像滚轮

> ID：11264773
> 
> 赞同：1
> 
> 时间：2012-06-29T15:37:45.430
> 
> 标签：jquery, thumbnails, scroller

我在整个网络上寻找一个简单的 jquery 缩略图滚动器已经超过 2 小时，但没有找到我想要的确切内容:(

我需要一个简单的 jquery img 滚动条，而不是幻灯片等，请参阅：

[http://manos.malihu.gr/tuts/jquery_thumbnail_scroller_multiple.html](http://manos.malihu.gr/tuts/jquery_thumbnail_scroller_multiple.html)

挺好的，但只能让我排一排！我不知道为什么，但我发现的所有插件都是这样的，它们只能处理 1 行。我需要一个简单的拇指滚动器，它可以处理 3 行图像和每行 4 个 img，并带有“下一个”和“上一个”按钮，仅此而已！（支持 IE7+）

任何人都可以帮助我吗？我真的很感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T15:42:19.137

这里有一个多行轮播插件：

[http://www.richardscarrott.co.uk/app/webroot/assets/javascript/jquery/carousel/demo/](http://www.richardscarrott.co.uk/app/webroot/assets/javascript/jquery/carousel/demo/)

您可以像这样启用多行：

```
$('#my-carousel-3').carousel({
itemsPerPage: 3,
itemsPerTransition: 3,
easing: 'linear',
noOfRows: 2
}); 
```

更新：

我在这里也发现了一个类似的问题：[Multiple rows with jcarousel](https://stackoverflow.com/q/213680/484072)这可能会回答您的问题。

# mysql - 有没有办法在mysql中为utf8获取区分大小写的排序规则？

> ID：11264778
> 
> 赞同：2
> 
> 时间：2012-06-29T15:37:59.530
> 
> 标签：mysql, utf-8, collation

我有一个 IPA 发音音节的 mysql 表，我想在一个唯一键上区分大小写，一个包含许多带有重音符号的字符的 varchar。我还希望将具有不同口音的字符视为不平等。

我查看了 [http://www.sitepoint.com/forums/showthread.php?580030-case-sensitive-unicode-table](http://www.sitepoint.com/forums/showthread.php?580030-case-sensitive-unicode-table)，虽然我认为它可以解决我的唯一性问题，但我不希望有奇怪的排序引起通过 utf8_bin。

我只需要通过 java 通过 hibernate 以编程方式访问数据库，所以我想我可以将唯一键更改为音节 varchar 和整数（java.lang.String 或字符串的一些自定义哈希）上的唯一键，但这会留下很小的碰撞可能性。

如果工作量不大，我愿意为此用例创建自己的自定义排序规则。什么是 utf8_bin 排序规则的好选择？任何指导表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T15:42:07.290

您可以[在每个查询、每个子句的基础上](http://dev.mysql.com/doc/refman/5.6/en/charset-collate.html)选择排序规则，创建表时选择的排序规则只是默认设置。因此，您可以使用`bin`排序规则进行比较，使用排序规则进行排序。

# css - 当我使用 CSS3 缩放 iframe 内容时，我得到了几乎正确的结果

> ID：11264790
> 
> 赞同：1
> 
> 时间：2012-06-29T15:39:03.780
> 
> 标签：css, iframe, scaling

我使用以下代码在一个站点内显示其他网站的微型实时版本：

```
iframe {
    -moz-transform: scale(0.25, 0.25); 
    -webkit-transform: scale(0.25, 0.25); 
    -o-transform: scale(0.25, 0.25);
    -ms-transform: scale(0.25, 0.25);
    transform: scale(0.25, 0.25); 
    -moz-transform-origin: top left;
    -webkit-transform-origin: top left;
    -o-transform-origin: top left;
    -ms-transform-origin: top left;
    transform-origin: top left;
    border: solid #ccc 10px;
    width:1024px;
    height:768px;
} 
```

似乎高度和宽度属性也被缩放了，所以我把它们做成了我的显示器的大小（这也是我希望它们显示的大小的 4 倍）。这导致 iframe 为 256 像素 x 192 像素，但占用了页面上的空间，就好像它是 1024 像素 x 768 像素一样。我通过定义 iFrames 包装器的大小解决了这个问题。

我的问题是，为什么如果它已经缩放了一个物体，它仍然会占用它原来的空间吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T16:46:21.897

## 一个解释

[W3C 文档](http://www.w3.org/TR/css3-transforms/)有助于回答您的问题。下面的引用来自它。

css3 转换的当前实现（据我所知）遵循两个模型中的第一个，具体而言：

> 调整受影响内容的位置而不改变该内容的正常布局的转换（很像相对定位）

此外，它指出：

> 该模块定义了一组 CSS 属性，这些属性会影响应用这些属性的元素的视觉呈现；这些效果在元素根据 [CSS21] 中的视觉格式化模型调整大小和定位后应用。

最后一句话的关键是“视觉渲染”。也就是说，虽然缩放（在您的情况下）在视觉上改变了它的外观，但它不会改变 html 本身流中对象的实际像素尺寸。正如第一个引用所指出的，它很像一个元素使用`position: relative`元素占据的“空间”仍处于其正常流动位置的位置进行移动，但它的视觉显示可能会在其他地方移动（通过一个`top: 100px`或其他定位移动）。

## 解决方案？

**更新**：我删除了本节中的原始答案，因为测试表明它不起作用。所以没有真正的解决方案来做你想做的事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T16:03:19.950

如果我不得不猜测，我会说这个 css：

```
width:1024px;
height:768px; 
```

是这个原因。这告诉 iframe 它的尺寸是 1024x768，因此，这些是 iframe 向浏览器报告的尺寸。然后，浏览器将 iframe 视为占用了这么多空间并相应地呈现它。

为了验证，我建议使用像 Firefox 中的 Firebug 或 Chrome 中的开发者工具这样的工具，并检查有问题的元素，看看它报告的尺寸是什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-18T07:57:12.360

正如其他答案所指出的，css3 转换只会改变元素的视觉呈现。但是正如您所意识到的，您可以调整包装器的大小以使其他元素很好地放置在适当的位置。

如果您希望它更易于管理，您可能想尝试使用 Zurb Responsive-YouTube-iframe 方法。他们是这样做的：

## 调整 iframe 大小的最简单方法

```
.flex-video {
    position: relative;
    padding-top: 25px;
    padding-bottom: 67.5%;
    height: 0;
    margin-bottom: 16px;
    overflow: hidden;
}

.flex-video.widescreen { padding-bottom: 57.25%; }
.flex-video.vimeo { padding-top: 0; }

.flex-video iframe,
.flex-video object,
.flex-video embed {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}
@media only screen and (max-device-width: 800px), only screen and (device-width: 1024px) and (device-height: 600px), only screen and (width: 1280px) and (orientation: landscape), only screen and (device-width: 800px), only screen and (max-width: 767px) {
  .flex-video { padding-top: 0; }
} 
```

因为他们知道 youtube 视频的纵横比，他们可以给 'flex-video' 包装器高度：0；填充底部：67.5%。内部 iframe/youtube 视频被赋予绝对定位宽度：100%；height:100%，这自然允许它响应。从这里，您可以通过设置包装器大小来控制 iframe 的宽度。您也可以为包装器设置其他比率，例如 width:100%; 高度：0；padding-bottom:100%;，它基本上给你一个方框来适应你的 iframe。

## 如果您需要使用 CSS3 缩放...

如果这不起作用，那么就剩下 CSS3 缩放方法，这有点混乱并且需要 JS。我最近在尝试在响应式网站上使用 Google 广告时遇到了这个问题。为了解决这个问题，我编写了一个轻量级（并且未经测试）的[jQuery 插件](https://github.com/mattnish/rad)，它通过将元素包装在相对定位的 div 中来使 iframe 具有响应性。

它使用 iframe 的原始宽度和其相对定位的包装器的宽度来查找使用 CSS3 缩小它需要多少。除了应用 CSS3 缩放，它使用相同的比率设置相对定位的包装器的高度。这确保了写在 iframe 下方的 DOM 中的元素按预期向上移动。这一切都基于 iframe 的原始宽度/高度比，因此这些属性必须可用。它仍然需要一些重构，但如果您需要，也许您可​​以修改它以更好地满足您的需求。

如果您需要使用或修改它，这里是：

[Rad.js - 响应式广告插件](https://github.com/mattnish/rad)

# cxf - CXF 故障拦截器：记录有用信息

> ID：11264792
> 
> 赞同：3
> 
> 时间：2012-06-29T15:39:22.453
> 
> 标签：cxf, soapfault

我想记录一些信息以防出现故障。特别是，我想记录与服务器联系的客户端的 IP 地址和端口，如果安全处于活动状态，则为用户名，如果可能的话，还记录传入的消息。

我在端点的getOutFaultInterceptors 链中添加了一个拦截器，但是在handleMessage 中我不知道可以使用哪些属性。

一些想法？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T16:00:50.467

在您的端点 xml 定义中，您可以添加以下内容来记录传入消息：

```
<bean id="logInInterceptor" 
    class="org.apache.cxf.interceptor.LoggingInInterceptor" />
<jaxws:inInterceptors>
    <ref bean="logInInterceptor"/>
</jaxws:inInterceptors> 
```

然后使用总线限制要记录的字符数：

```
<cxf:bus>
    <cxf:features>
        <cxf:logging limit="102400"/>
    </cxf:features>
<cxf:bus> 
```

您还没有提到您的身份验证方法是什么，所以如果您使用的是 的实现`UsernameTokenValidator`，您可以在那里记录传入的用户名。

要记录客户端的 IP 地址和端口等详细信息，请扩展`LoggingInInterceptor`，然后使用以下代码`handleMessage()`：

```
handleMessage() {
    HttpServletRequest request =
            (HttpServletRequest)message.get(AbstractHTTPDestination.HTTP_REQUEST);
    if (null != request) {              
        String clientAddress = request.getRemoteAddr();
        int remotePort = request.getRemotePort();
        // log them
    }
} 
```

也看看[这个](http://cxf.547215.n5.nabble.com/Obtaining-source-address-and-operation-name-td550869.html)线程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T08:42:02.690

我是这样解决的

```
public FaultInterceptor() {
    super(Phase.MARSHAL);
}

public void handleMessage(SoapMessage message) throws Fault {
    Fault fault = (Fault) message.getContent(Exception.class);
    Message inMessage = message.getExchange().getInMessage();
    if (inMessage == null) return;

    String xmlMessage = null;
    InputStream is = inMessage.getContent(InputStream.class);
    String rawXml = null;
    if (is != null) {
        rawXml = is.toString();
    }

    String username = null;
    if (rawXml != null && rawXml.length() > 0) {
        try {
            XPath xpath = XPathFactory.newInstance().newXPath();
            XPathExpression xpathExpression;

            xpathExpression = xpath.compile("//*[local-name()=\'Envelope\']/*[local-name()=\'Header\']/*[local-name()=\'Security\']" +
                    "/*[local-name()=\'UsernameToken\']/*[local-name()=\'Username\']");

            InputSource source = new InputSource(new StringReader(rawXml));

            username = xpathExpression.evaluate(source);
        } catch (XPathExpressionException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        xmlMessage = XMLUtils.prittyPrinter(is.toString());
    }

    String clientAddress = "<unknown>";
    int clientPort = -1;
    HttpServletRequest request = (HttpServletRequest)inMessage.get(AbstractHTTPDestination.HTTP_REQUEST); 
    if (null != request) {               
        clientAddress = request.getRemoteAddr(); 
        clientPort = request.getRemotePort();
    }

    logger.warn("User: " + username + " [" + clientAddress + ":" + clientPort + "] caused fault: " + fault +
            "\nMessage received: \n" + xmlMessage);

} 
```

我找到了“inMessage”属性，并在其上找到了原始消息（我可以检索用户名）和从中检索主机和端口的“请求”。

谢谢你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-19T12:27:41.193

我认为您应该在处理故障时将请求输入流视为已消耗。

我建议您始终记录传入的消息，并提取某种消息相关 id - 例如用户名。将其保留为 Message 标头。

对于故障记录，使用仅限于查看输入请求的故障拦截器。

将常规 + 故障日志记录与消息相关 ID 结合在一起。

记录完整的soap请求，而不仅仅是有效负载。除了正文之外，Soap 请求可能还有标头。

请参阅[此问题](https://stackoverflow.com/questions/11038313/how-to-get-incoming-outgoing-soap-xml-in-a-simple-way-using-apache-cxf/29966530#29966530)以获取常规日志记录，另外添加一个输出故障拦截器，如下所示：

```
public class SoapFaultLoggingOutInterceptor extends AbstractPhaseInterceptor<Message> {

    private static final String LOCAL_NAME = "MessageID";

    private static final int PROPERTIES_SIZE = 128;

    private String name = "<interceptor name not set>";

    protected Logger logger = null;
    protected Level level;

    public SoapFaultLoggingOutInterceptor() {
        this(LogUtils.getLogger(SoapFaultLoggingOutInterceptor.class), Level.WARNING);
    }

    public SoapFaultLoggingOutInterceptor(Logger logger, Level reformatSuccessLevel) {
        super(Phase.MARSHAL);
        this.logger = logger;
        this.level = reformatSuccessLevel;
    }

    public void setName(String name) {
        this.name = name;
    }

    public void handleMessage(Message message) throws Fault {
        if (!logger.isLoggable(level)) {
            return;
        }

        StringBuilder buffer = new StringBuilder(PROPERTIES_SIZE);

        // perform local logging - to the buffer 
        buffer.append(name);

        logProperties(buffer, message);

        logger.log(level, buffer.toString());
    }

    /**
     * Gets theMessageID header in the list of headers.
     *
     */
    protected String getIdHeader(Message message) {
        return getHeader(message, LOCAL_NAME);
    }

    protected String getHeader(Message message, String name) {
        List<Header> headers = (List<Header>) message.get(Header.HEADER_LIST);

        if(headers != null) {
            for(Header header:headers) {
                if(header.getName().getLocalPart().equalsIgnoreCase(name)) {
                    return header.getObject().toString();
                }
            }
        }
        return null;
    }        

    protected void logProperties(StringBuilder buffer, Message message) {
        final String messageId = getIdHeader(message);
        if(messageId != null) {
            buffer.append(" MessageId=");
            buffer.append(messageId);
        }

        Message inMessage = message.getExchange().getInMessage();

        HttpServletRequest request = (HttpServletRequest)inMessage.get(AbstractHTTPDestination.HTTP_REQUEST); 

        buffer.append(" RemoteAddr=");
        buffer.append(request.getRemoteAddr());
    }

    public Logger getLogger() {
        return logger;
    }

    public String getName() {
        return name;
    }

    public void setLogger(Logger logger) {
        this.logger = logger;
    }

} 
```

其中 MessageID 是相关性/面包屑 ID。

# javascript - 如何使一个函数在整个 jQuery 插件及其所有内部方法中可用？

> ID：11264793
> 
> 赞同：1
> 
> 时间：2012-06-29T15:39:31.977
> 
> 标签：javascript, jquery, jquery-plugins, closures

如果我有一个使用正常标准的 jQuery 插件：

```
(function( $ ){
  var methods = {
    init : function( options ) {
      var defaults = {
      }
      var options =  $.extend(defaults, options);
      return this.each(function(){
        var returnValue = myUniversalFunction();
      });
    },
    test : function( options ) {
      var defaults = {
      }
      var options =  $.extend(defaults, options);
      return this.each(function(){
        var returnValue = myUniversalFunction();
      });
    }
  };
  $.fn.jPlugin = function( method ) {
    if ( methods[method] ) {
      return methods[method].apply( this, Array.prototype.slice.call( arguments, 1 ));
    } else if ( typeof method === 'object' || ! method ) {
      return methods.init.apply( this, arguments );
    } else {
      $.error( 'Method ' +  method + ' does not exist on jQuery.tooltip' );
    }    

  };
})( jQuery ); 
```

我应该在哪里放置一个可以在 init 和 test 方法中访问但不能在插件本身之外使用的函数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T15:41:08.357

将其放在第 2 行，紧随其后`(function( $ ){`，如下所示：

```
(function( $ ){
    var inner_function = function() {
        // ...
    };
    var methods = {
        // ...
    };
    $.fn.jPlugin = function( method ) {
        // ...
    };
})( jQuery ); 
```

该功能`inner_function`将在其内部的任何地方可用，`(function($){ ... })(jQuery);`但不在其外部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T15:43:15.220

就在顶部。该功能将适用于该范围内的所有内容。

```
(function( $ ){
    function myFunc() {
        // ...
    } 
```

# ios - 从 viewController 调用 setDelegate 后 iOS 自定义委托返回 Nil

> ID：11264797
> 
> 赞同：1
> 
> 时间：2012-06-29T15:39:38.033
> 
> 标签：ios

我在 ARC 中使用自定义委托类时遇到了一个奇怪的问题。在 viewDidLoad 之后的视图控制器中，我调用工具栏的 setDelegate 方法并将视图控制器分配为委托。

每当我尝试引用委托时，它为零，即使在视图控制器中设置后也是如此。

```
//MPToolbar.h

#import <UIKit/UIKit.h>

//Define the protocol for the delegate
@class MPToolBar;
@protocol MPToolBarDelegate <NSObject>
@required
- (void)writeButtonSelected;
- (void)writeButtonDeSelected;
@end

@interface MPToolBar : UIView{
    id <MPToolBarDelegate> delegate;
}

@property(strong) UIButton *lastButton;

@property(strong) id <MPToolBarDelegate> delegate;
-(IBAction)buttonSelected:(id)sender;
-(void)resizeForOrientation:(UIInterfaceOrientation)orientation;

@end

//MPToolbar.m
#import "MPToolBar.h"

@implementation MPToolBar
@synthesize lastButton, delegate;

- (id)initWithFrame:(CGRect)frame
{
    if ((self = [super initWithFrame:frame])) {
        // Initialization code
    }
    NSArray *nibViews = [[NSBundle mainBundle] loadNibNamed:@"MPToolBar" owner:self options:nil];
    [self addSubview:[nibViews objectAtIndex:0]];
    return self;
}

#pragma button actions
-(IBAction)buttonSelected:(id)sender{
    UIButton *btn = (UIButton *)sender;
    if(lastButton && lastButton != btn)[self deselect:lastButton];

    if (btn.selected){
        [self deselect:btn];
        return;
    }

    [btn setSelected:YES];
    lastButton = btn;
    switch (btn.tag) {
        case 0:
            [self.delegate writeButtonSelected];
            break;
    }
}
-(void)deselect:(UIButton *)btn{
    [btn setSelected:NO];
    switch (btn.tag) {
        case 0:
            [self.delegate writeButtonDeSelected];
            break;
    }
}

/*
// Only override drawRect: if you perform custom drawing.
// An empty implementation adversely affects performance during animation.
- (void)drawRect:(CGRect)rect
{
    // Drawing code
}
*/
-(void)resizeForOrientation:(UIInterfaceOrientation)orientation{
    if (UIInterfaceOrientationIsLandscape(orientation)) {
        self.frame = CGRectMake(0, 44, 1024, 60);
    }
    if (UIInterfaceOrientationIsPortrait(orientation)) {
        self.frame = CGRectMake(0, 44, 768, 60);
    }
}
@end

//ViewTest.h
#import <UIKit/UIKit.h>
#import "MPToolBar.h"
@interface ViewTest : UIViewController <MPToolBarDelegate>
{
    MPToolBar *toolBar;
}
@property(strong) MPToolBar *toolBar;
@end

//ViewTest.m
#import "ViewTest.h"

@interface ViewTest ()

@end

@implementation ViewTest
@synthesize toolBar;
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    self.toolBar = [[MPToolBar alloc] initWithFrame:CGRectMake(0, 44, 1024, 60)];
    [self.view addSubview:self.toolBar];
    [self.toolBar setAlpha:1.0];
    [self.toolBar setDelegate:self];
    // Do any additional setup after loading the view from its nib.
}
#pragma mark - MPToolBar Delegate Methods
-(void)writeButtonSelected{
    //set new annotation for write mode and size to screen bounds.
    NSLog(@"writeButtonSelected");
}
- (void)writeButtonDeSelected{
    NSLog(@"writeButtonDeSelected");
}
- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
}

@end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T04:29:04.313

好的，所以我终于找到了问题所在。在我的 xib 文件中，我将 UIView 类设置为我的自定义控件类名称，而不是设置文件所有者。

一旦我将 xib 中的第一个 UIView 更改回标准 UIView，然后将文件所有者设置为我的自定义类，世界就一切正常了！

- 感谢所有试图提供帮助的人！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T01:42:59.233

对我来说有类似的症状，我的问题是 segue 的destinationViewController 不是我期望的对象，因为它嵌入在 UINavigationController 中。

轻松修复。看这里。[通过导航控制器时丢失指向委托的指针](https://stackoverflow.com/questions/11250385/lose-pointer-to-delegate-while-going-through-navigation-controller)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T16:40:08.653

尝试像这样更改您的委托声明：

```
@interface MPToolBar : UIView{
    id delegate;
}

@property (nonatomic, assign) id <MPToolBarDelegate> delegate; 
```

然后当你调用你的委托方法时使用这个：

```
[self.delegate ButtonSelected]; 
```

此外，原始 iPad 可升级到 iOS 5.0。如果您使用的是 ARC，则无论如何都无法与 4.3 兼容，据我了解，ARC 仅从 5.0 开始。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T15:51:29.117

可能导致问题的几件事：

1.  你真的`MPToolBarDelegate`在它的头文件中声明你的视图控制器吗？（该代码不存在）。

2.  这些是代码中的委托函数：

`-(void)ButtonSelected;`

`-(void)ButtonDeSelected;`

但是，您实际上是在调用这个：

```
[_delegate writeButtonSelected]; 
```

这不是您的协议的一部分。

# sql-server - 用于循环记录的 SQL Server

> ID：11264800
> 
> 赞同：0
> 
> 时间：2012-06-29T15:39:48.133
> 
> 标签：sql-server

在 Oracle 中，我们可以使用

```
FOR employee_rec in (select id from mytbl)
LOOP
    DBMS_OUTPUT.PUT_LINE(employee_rec.id);
END LOOP; 
```

在 SQL Server 中，我们有类似的东西吗？如果没有，如何做这个循环？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T15:42:21.107

如果你想正确地做，它在 SQL Server 中会更冗长：

```
DECLARE @id INT;

DECLARE c CURSOR LOCAL STATIC READ_ONLY FORWARD_ONLY
FOR SELECT id FROM mytbl;

OPEN c;

FETCH NEXT FROM c INTO @id;

WHILE @@FETCH_STATUS = 0
BEGIN
  PRINT @id;

  FETCH NEXT FROM c INTO @id;
END

CLOSE c;
DEALLOCATE c; 
```

但是，通常我们倾向于避免循环和游标，因为关系数据库擅长基于集合的操作（几乎在某些情况下）。当然也有例外，就像任何规则一样，但如果我不得不猜测，我会怀疑你不需要循环来做你想做的事情。你真正想做什么？为什么需要单独处理每一行？

# android - 带有两个拉伸按钮的 Android 操作栏

> ID：11264808
> 
> 赞同：23
> 
> 时间：2012-06-29T15:40:19.653
> 
> 标签：android, button, android-actionbar, stretched

有人知道如何轻松实现带有两个拉伸按钮的操作栏吗？

以下是 Google 日历应用程序的示例：

![在此处输入图像描述](../Images/df63bc2b3d51fecfc0ce809cd7fa1467.png)

谢谢！

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-11-08T03:14:52.500

如果出于某种原因您宁愿在 ActionBar 中使用它，实现此目的的一种方法是在操作栏上使用自定义视图。在您自定义视图的布局中，然后担心设置按钮宽度。

告诉活动为操作栏使用自定义视图：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);   
    final ActionBar ab = getActionBar();
    ab.setDisplayShowHomeEnabled(false);
    ab.setDisplayShowTitleEnabled(false);     
    final LayoutInflater inflater = (LayoutInflater)getSystemService("layout_inflater");
    View view = inflater.inflate(R.layout.action_bar_edit_mode,null); 
    ab.setCustomView(view);
    ab.setDisplayShowCustomEnabled(true);
} 
```

layout/action_bar_edit_mode.xml 然后看起来像：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:gravity="fill_horizontal"
    android:orientation="horizontal" >
    <LinearLayout 
        android:layout_alignParentLeft="true"
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:orientation="horizontal">

        <Button
        android:id="@+id/action_bar_button_cancel"
        android:layout_width="fill_parent"
        android:layout_height="match_parent"           
        android:layout_weight="1"
        android:text="Cancel" />

        <Button
        android:id="@+id/action_bar_button_ok"
        android:layout_width="fill_parent"
        android:layout_height="match_parent"           
        android:layout_weight="1"
        android:text="Ok" />
    </LinearLayout>    
</RelativeLayout> 
```

希望它可以帮助某人！

**注意：**我在这里意识到难看的嵌套布局，通常我不会推荐这个，但由于某种原因，操作栏自己的布局拒绝让 LinearLayout 自己占据整个宽度。通常你应该避免像这样不必要的嵌套布局！也许如果有人看到这一点，他们可以为我们指出更好的解决方案？

它看起来像什么： ![结果](../Images/76eefe4ee48620d881d08f7fe296c048.png)

**编辑：** Roman Nurik有一篇[很棒的帖子](https://plus.google.com/113735310430199015092/posts/R49wVvcDoEW)，他解释了一种很好地做到这一点的方法。

**编辑 2：**如果有人好奇，布置按钮的正确方法是让它们扩展操作栏的宽度，而无需像我上面那样嵌套布局，是使用允许的正确布局参数设置自定义视图其组件以匹配父组。

本质上：

```
actionBar.setCustomView(view,new ActionBar.LayoutParams(
        ViewGroup.LayoutParams.MATCH_PARENT,
        ViewGroup.LayoutParams.MATCH_PARENT)); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-31T04:20:07.457

我知道 2 种方法可以做到这一点，但有一种方法不能保持领先。

这是第一个：

您需要覆盖**onCreateOptionsMenu**方法，但这是在 ActionBar 上添加的，您需要 API 11 来执行此操作，并且当您旋转屏幕时，此按钮会出现在 ActionBar 上，这取决于屏幕大小。

```
 @Override
 public void onCreateOptionsMenu(Menu menu, MenuInflater inflater)
 {
     MenuItem add = menu.add(Menu.NONE, ADD_TIME, 0, R.string.add_time);
     add.setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);

     MenuItem qkAdd = menu.add(Menu.NONE, QUICK_ADD_TIME, 1, R.string.quick_add_time);
     qkAdd.setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);
 } 
```

这是结果：

![在此处输入图像描述](../Images/78879307c4f4e717ad5162e99d3a0c89.png)

如果您使用的是**Fragment** ，则需要将**setHasOptionsMenu**设置为**true**，否则菜单不会显示。

这是第2个：

```
cancel_done.xml

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@color/color_bar"
android:orientation="horizontal" >

<LinearLayout
    android:layout_width="0dp"
    android:layout_height="match_parent"
    android:layout_weight="1"
    android:dividerPadding="12dp"
    android:orientation="vertical"
    android:showDividers="end" >

    <Button
        android:id="@+id/button1"
        style="@drawable/btn_cab_done_holo_light"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_gravity="center"
        android:background="@drawable/btn_cab_done_holo_light"
        android:text="CANCEL"
        android:textSize="14sp" />

</LinearLayout>

<LinearLayout
    android:layout_width="0dp"
    android:layout_height="match_parent"
    android:layout_weight="1"
    android:dividerPadding="12dp"
    android:orientation="vertical"
    android:showDividers="beginning" >

    <Button
        android:id="@+id/button2"
        style="@drawable/btn_cab_done_holo_light"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_gravity="center"
        android:background="@drawable/btn_cab_done_holo_light"
        android:text="DONE"
        android:textSize="14sp" />

</LinearLayout>
</LinearLayout> 
```

您可以在**..\sdk\platforms\android-%%\data\res\drawable**上找到资源样式**btn_cab_done_holo_light.xml**，然后在您的布局中添加：

 **```
 <include
            android:layout_width="match_parent"
            android:layout_height="48dp"
            android:layout_gravity="fill"
            layout="@layout/cancel_done" /> 
```

这是结果：

![在此处输入图像描述](../Images/465460b6e09c447e89e8a8cd2762fa82.png)

我现在不知道是否是最好的方法，但它正在工作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-29T17:25:43.457

用两个按钮制作一个水平线性布局。然后将它们的每个宽度设置为`match_parent`和`android:layout_weight="0.5"` （然后每个按钮将占用 50% 的空间）。

编辑：

申请为`ActionBar`背景：

```
(ActionBarSherlock) getSupportActionBar().setCustomView(R.layout.my_view);
(ActionBar) getActionBar().setCustomView(R.layout.my_view); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T21:42:02.397

您可以使用 ActionBar 的 actionMode 来实现 Done 和 Cancel 操作。

请参阅[http://developer.android.com/guide/topics/ui/menus.html#CAB](http://developer.android.com/guide/topics/ui/menus.html#CAB)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-27T04:06:32.993

在android中称为done bar。看看这个会有帮助 [https://github.com/googlesamples/android-DoneBar](https://github.com/googlesamples/android-DoneBar)**

# javascript - 包含 jquery.NoConflict

> ID：11264809
> 
> 赞同：0
> 
> 时间：2012-06-29T15:40:24.587
> 
> 标签：javascript, jquery

我想包含 jQuery，并希望我可以执行以下操作：

```
$.noConflict();
 jQuery("#id").click(Alert("Hello World"));
End.noConflict(); 
```

我似乎在任何地方都看不到有关它的信息，但它会很有用，因为我们在多个站点上有一个共享库，现在随着时间的推移升级到新版本，我们将逐步淘汰 noConflict 的使用，但暂时同时我们升级遗留的java脚本这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T15:45:55.643

通常当我觉得需要`noConflict()`我做错事时。解决方案一直是（至少对我而言）在页面顶部重新排列 .js 文件导入的顺序！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T15:42:53.483

你可以只写`window.$ = jQuery`。

# shell - Emacs 相当于 VIM 的 `%`？

> ID：11264811
> 
> 赞同：5
> 
> 时间：2012-06-29T15:40:29.787
> 
> 标签：shell, vim, emacs

在 VIM 中，`%`调用 shell 命令时可以使用 One 来指示当前文件名。任何人都可以指出我在文档的方向上显示 emacs 中的等价物吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T17:57:19.900

没有一个。但这是 Emacs！所以在这里：

```
(defun my-shell-command-on-current-file (command &optional output-buffer error-buffer)
  "Run a shell command on the current file (or marked dired files).
In the shell command, the file(s) will be substituted wherever a '%' is."
  (interactive (list (read-from-minibuffer "Shell command: "
                                           nil nil nil 'shell-command-history)
                     current-prefix-arg
                     shell-command-default-error-buffer))
  (cond ((buffer-file-name)
         (setq command (replace-regexp-in-string "%" (buffer-file-name) command nil t)))
        ((and (equal major-mode 'dired-mode) (save-excursion (dired-move-to-filename)))
         (setq command (replace-regexp-in-string "%" (mapconcat 'identity (dired-get-marked-files) " ") command nil t))))
  (shell-command command output-buffer error-buffer))

(global-set-key (kbd "M-!") 'my-shell-command-on-current-file) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T21:12:02.493

每当 minibuffer 要求您输入某些内容时，您都可以使用它（警告：不适用于 ido，但显然您总是可以使用例如 Cx Cf 摆脱这种情况）。您也可以在常规缓冲区中使用它。

```
(defun insert-filename-or-buffername (&optional arg)
  "If the buffer has a file, insert the base name of that file.
  Otherwise insert the buffer name.  With prefix argument, insert the full file name."
  (interactive "P")
  (let* ((buffer (window-buffer (minibuffer-selected-window)))
         (file-path-maybe (buffer-file-name buffer)))
    (insert (if file-path-maybe
                (if arg
                    file-path-maybe
                  (file-name-nondirectory file-path-maybe))
              (buffer-name buffer)))))

(define-key minibuffer-local-map (kbd "C-c f") 'insert-filename-or-buffername) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-15T18:35:59.297

在我的例子中，使用来自 homebrew 的 emacs 24 gui 版本......我看到文件名是（次要）模式栏左下角的第三个项目，就在迷你缓冲区的上方。

要查看我在哪里，使用 ido-mode 我只是在`C-x C-f`那里不需要配置。

# sql - APEX 锁定的用户仍然可以登录

> ID：11264813
> 
> 赞同：0
> 
> 时间：2012-06-29T15:40:37.037
> 
> 标签：sql, oracle, plsql, oracle-apex

我又遇到了 APEX 的麻烦！我在应用程序中手动为我的应用程序创建用户。我有一个进程 lock_user，它在单击按钮时执行，它应该锁定用户，这样他就不能再登录到应用程序了。它似乎有效，因为在“管理用户和组”部分中，用户被锁定。无论如何，用户仍然可以登录到我的应用程序。我正在使用默认登录页面。

那是我的过程的代码：

```
BEGIN

UPDATE user
SET Status_id = '0'
WHERE user_id = :P45_user_ID;

APEX_UTIL.LOCK_ACCOUNT(p_user_name => upper(:P45_USERNAME));
commit;
END; 
```

可能出了什么问题？任何解决方案，提示或提示表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T15:52:45.120

解决方案是启用“帐户过期和锁定”设置（在管理 -> 管理服务 -> 设置工作区首选项（对工作区管理员可见））。还有一个“要求用户帐户过期和锁定”设置仅对实例管理员可用。（管理实例 -> 安全 -> 工作区登录控制）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T06:42:03.030

您在应用程序中使用哪种身份验证？我认为锁定的帐户仅在使用内置 Apex 身份验证时才有效。

# ios - Cleaver（PhoneGap / Cordova 作为组件）在 iOS 中不起作用

> ID：11264814
> 
> 赞同：8
> 
> 时间：2012-06-29T15:40:48.343
> 
> 标签：ios, cordova

我尝试使用 Cleaver，即 PhoneGap / Cordova 作为现有 iOS 应用程序的组件。我两次按照[此分步指南进行操作，但均未成功。](https://github.com/apache/incubator-cordova-ios/blob/master/guides/How%20to%20Use%20Cordova%20as%20a%20Component.md)

我的应用程序可以轻松地实例化 Web 视图，并且我可以使用该`stringbyevaluatingjavascriptfromstring`方法将内容传递给它，但是一旦我尝试访问 PhoneGap API ( `navigator.compass, navigator.network, ...`)，似乎没有任何效果。`console.log(navigator)`没有显示 Cordova 对象的迹象（`console.log`不输出任何东西是 Xcode，我正在使用[http://debug.phonegap.com/](http://debug.phonegap.com/)）。事件`deviceready`也不会被触发。

在我的 html 文件中，我包含`cordova-1.7.0rc1.js`了从另一个项目复制的 PhoneGap js 文件（因为`/www`当您使用 PhoneGap 作为组件时文件夹丢失）。

我的`ViewController.h`进口`<Cordova/CDVViewController.h>`。这里我的`ViewController.m`

```
//
//  ViewController.m
//  CordovaComponent
//

#import "ViewController.h"

@interface ViewController (){
    CDVViewController *cdvViewController ;
}
@end

@implementation ViewController

- (void)pushPhoneGap:(id)sender {

    cdvViewController = [[CDVViewController alloc] init];
    cdvViewController.wwwFolderName = @"www";
    cdvViewController.startPage = @"index.html";
    cdvViewController.view.frame = self.view.bounds;
    cdvViewController.webView.delegate = self;
    [self.navigationController pushViewController:cdvViewController animated:YES];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    UIButton * button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [button setTitle:@"Push PhoneGap view" forState:UIControlStateNormal];
    [button addTarget:self action:@selector(pushPhoneGap:) forControlEvents:UIControlEventTouchUpInside];
    button.frame = CGRectMake(60, 50, 200., 50.);
    [self.view addSubview:button];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

- (void)webViewDidFinishLoad:(UIWebView *)webView {
    NSString *jsReturn = [cdvViewController.webView stringByEvaluatingJavaScriptFromString:@"setArray([1, 1, 2, 3, 5, 8, 13, 21, 34, 1]);"];
    NSLog(jsReturn);
}

@end 
```

你知道发生了什么吗？任何帮助将不胜感激 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:34:20.403

好的，经过数小时尝试解决此问题后，我终于找到了问题所在。这是把事情搞砸的那一行：

```
cdvViewController.webView.delegate = self; 
```

您不能只覆盖视图控制器的 Web 视图的委托。原始委托具有使 PhoneGap 能够运行的实例化代码。不要覆盖它，一切都会好起来的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-03T11:15:27.800

如果您想在不破坏 Cordova 的情况下获得有关 webview 事件的通知，您可以尝试以下操作：

```
@interface WrappingWebViewDelegate : NSObject <UIWebViewDelegate>
    @property (nonatomic,retain) id<UIWebViewDelegate> wrappedDelegate;
@end

@implementation WrappingWebViewDelegate
    - (void)webViewDidStartLoad:(UIWebView*)theWebView {
        [self.wrappedDelegate webViewDidStartLoad: theWebView];
        // your code
    }

    // implement all other delegate methods and forward them to the wrapped delegate
    [...]
@end 
```

像这样的用法：

```
cdvViewController = [[CDVViewController alloc] init];
WrappingWebViewDelegate wrappingDelegate = [[WrappingWebViewDelegate alloc] init];
wrappingDelegate.wrappedDelegate = cdvViewController.webView.delegate;
cdvViewController.webView.delegate = wrappingDelegate; 
```

我没有测试过这个，所以你应该小心。

# macos - 具有自己的 xib 文件但没有视图的 NSController

> ID：11264824
> 
> 赞同：2
> 
> 时间：2012-06-29T15:41:14.950
> 
> 标签：macos, cocoa, menubar, nsmenu

我正在创建一个带有几个弹出窗口、一个 NSMenu 和一些常规窗口的菜单栏应用程序，用于设置和类似的东西。我创建了一个 NSController 来将我所有的 StatusBar 东西放在一起，并通知弹出窗口打开和关闭。弹出窗口有它自己的 PopupWindowController 和 xib 文件，就像一个魅力。但我无法让它与 NSMenu 一起工作（在我的情况下，它被归类为 RightClickMenu）

在 IB 中，我使用菜单创建了另一个名为 StatusBarController.xib 的 .xib（以 StatusBarController 作为文件的所有者）并将其链接到插座。...

```
@class RightClickMenu;
@interface StatusBarController : NSController <NSMenuDelegate> {
    IBOutlet RightClickMenu *rightClickMenu;
}
@property (nonatomic, retain) RightClickMenu *rightClickMenu;
... 
```

我的 AppDelegate 有一个 IBOutlet StatusBarController 属性和一个链接到 NScontroller 对象的主 .xib。

```
@class StatusBarController;
@interface MyAppDelegate : NSObject <NSApplicationDelegate> {
    IBOutlet StatusBarController *statusBarController;
... 
```

希望你能帮助...

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T20:57:26.503

你的变量！是一个出口，但你的财产不是

IB 使用 KVC 设置网点，这将找到您将使用 _variable 的属性

* * *

顺便说一句，以防万一：

您必须自己处理加载，除非您将 NSViewController 子类化

在控制器的初始化中，您执行 [[NSBundle mainBundle] loadNibName:@"bla" owner:self];

# c# - 使用 C# 在 WCF 中同时访问 PerSession 服务

> ID：11264825
> 
> 赞同：4
> 
> 时间：2012-06-29T15:41:17.750
> 
> 标签：c#, wcf, session, wcf-binding, wcf-client

1.）我有一个主方法处理，它将字符串作为参数，并且该字符串包含一些 x 数量的任务。

2.) 我有另一种方法 Status，它通过使用两个变量 TotalTests 和 CurrentTest 来跟踪第一种方法。每次都会在第一种方法（处理）中循环修改。

3.) 当多个客户端并行调用我的 Web 服务以通过传递字符串来调用处理方法时，具有不同任务的处理将需要更多时间。因此，同时客户端将使用第二个线程调用 Web 服务中的 Status 方法来获取第一个方法的状态。

4.）当第 3 点完成时，所有客户端都应该并行获取变量（TotalTests，CurrentTest），而不会与其他客户端请求混淆。

5.) 当我将它们设置为静态时，我在下面提供的代码会使所有客户端的变量结果混合在一起。如果我删除了变量的静态变量，那么客户端只会得到这两个变量的全 0，我无法修复它。请看下面的代码。

```
[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerSession)]
public class Service1 : IService1
{
    public int TotalTests = 0;
    public int CurrentTest = 0;

    public string Processing(string OriginalXmlString)
    {
                XmlDocument XmlDoc = new XmlDocument();
                XmlDoc.LoadXml(OriginalXmlString);
                this.TotalTests = XmlDoc.GetElementsByTagName("TestScenario").Count;  //finding the count of total test scenarios in the given xml string
                this.CurrentTest = 0;
                while(i<10)
                {
                        ++this.CurrentTest;
                         i++;
                }
    }

    public string Status()
    {
        return (this.TotalTests + ";" + this.CurrentTest);
    }
} 
```

服务器配置

```
<wsHttpBinding>
    <binding name="WSHttpBinding_IService1" closeTimeout="00:10:00"
      openTimeout="00:10:00" receiveTimeout="00:10:00" sendTimeout="00:10:00"
      bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard"
      maxBufferPoolSize="524288" maxReceivedMessageSize="2147483647"
      messageEncoding="Text" textEncoding="utf-8" useDefaultWebProxy="true"
      allowCookies="false">
      <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647"
        maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
      <reliableSession ordered="true" inactivityTimeout="00:10:00"
        enabled="true" />
      <security mode="Message">
        <transport clientCredentialType="Windows" proxyCredentialType="None"
          realm="" />
        <message clientCredentialType="Windows" negotiateServiceCredential="true"
          algorithmSuite="Default" establishSecurityContext="true" />
      </security>
    </binding>
  </wsHttpBinding> 
```

客户端配置

```
<wsHttpBinding>
            <binding name="WSHttpBinding_IService1" closeTimeout="00:10:00"
                openTimeout="00:10:00" receiveTimeout="00:10:00" sendTimeout="00:10:00"
                bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard"
                maxBufferPoolSize="524288" maxReceivedMessageSize="2147483647"
                messageEncoding="Text" textEncoding="utf-8" useDefaultWebProxy="true"
                allowCookies="false">
                <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647"
                    maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
                <reliableSession ordered="true" inactivityTimeout="00:10:00"
                    enabled="true" />
                <security mode="Message">
                    <transport clientCredentialType="Windows" proxyCredentialType="None"
                        realm="" />
                    <message clientCredentialType="Windows" negotiateServiceCredential="true"
                        algorithmSuite="Default" establishSecurityContext="true" />
                </security>
            </binding>
        </wsHttpBinding> 
```

下面提到的是我的客户端代码

```
class Program
{
static void Main(string[] args)
{
    Program prog = new Program();
    Thread JavaClientCallThread = new Thread(new ThreadStart(prog.ClientCallThreadRun));
    Thread JavaStatusCallThread = new Thread(new ThreadStart(prog.StatusCallThreadRun));
    JavaClientCallThread.Start();
    JavaStatusCallThread.Start();
}

public void ClientCallThreadRun()
{
    XmlDocument doc = new XmlDocument();
    doc.Load(@"D:\t72CalculateReasonableWithdrawal_Input.xml");
    bool error = false;
    Service1Client Client = new Service1Client();
    string temp = Client.Processing(doc.OuterXml, ref error);
}

public void StatusCallThreadRun()
{
    int i = 0;
    Service1Client Client = new Service1Client();
    string temp;
    while (i < 10)
    {
        temp = Client.Status();
        Thread.Sleep(1500);
        Console.WriteLine("TotalTestScenarios;CurrentTestCase = {0}", temp);
        i++;
    }
}
} 
```

任何人都可以帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T20:25:48.003

首先因为需要同时访问服务，当服务在处理第一个客户端调用（Processing）时，需要将服务并发模式改为Multiple。

此外，您还想维护每个客户端的处理状态，因此您需要将实例上下文模式设置为 PerSession。

```
[ServiceBehavior(ConcurrencyMode = ConcurrencyMode.Multiple, InstanceContextMode= InstanceContextMode.PerSession)] 
```

> **笔记**
> 
> *   默认 InstanceContextMode 是 PerSession
> *   默认 ConcurrencyMode 为 Single

您可以执行以下操作以确保您的配置与 PerSession InstanceContextMode 兼容，使用此方法，WCF 将在必要时抛出运行时异常

```
[ServiceContract(SessionMode=SessionMode.Required)] 
```

> **注意**使用 InstanceContextMode.PerSession 您将获得每个您创建的代理的不同实例

因此，每个客户端只需要一个“Service1Client”实例，您将调用其 Process 方法并从中检索状态。

此外，对于虚拟繁重处理，您可以仅在“处理”方法（服务端）中使用 Thread.Sleep(millisecond) 进行测试建议。

对于客户端应用程序，如果要调用“Processing”方法，然后使用 Status 方法检索状态，则需要异步调用 Process 方法。

1.在solution-explorer中右击服务引用，选择“配置服务引用”，勾选“生成异步操作”，点击确定。

2.像这样更改您的客户端代码

```
static void Main(string[] args)
{
    StartProcessing();
    StatusReport();

    Console.ReadLine();
}

static ServiceClient Client = new ServiceClient();
private static bool Completed = false;

public static void StartProcessing()
{
    XmlDocument doc = new XmlDocument();
    doc.Load(@"D:\t72CalculateReasonableWithdrawal_Input.xml");
    bool error = false;

    Client.ProcessingCompleted += Client_ProcessingCompleted;
    Client.ProcessingAsync(doc.OuterXml);

    Console.WriteLine("Processing...");
}

static void Client_ProcessingCompleted(object sender, ProcessingCompletedEventArgs e)
{
    // processing is completed, retreive the return value of Processing operation
    Completed = true;
    Console.WriteLine(e.Result);
}

public static void StatusReport()
{
    int i = 0;
    string temp;
    while (!Completed)
    {
        temp = Client.Status();
        Console.WriteLine("TotalTestScenarios;CurrentTestCase = {0}", temp);
        Thread.Sleep(500);
        i++;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T16:34:25.167

`PerSession`不会使您的静态变量不在对象实例之间共享。`PerSession`上下文模式所做的唯一一件事就是控制对象的生命周期。

在`PerSession`会话结束之前，WCF 不会破坏服务对象。会话可以由客户端或超时（默认为 10 分钟）显式关闭。来自具有相同会话 ID 的客户端的每个下一次调用都将由 WCF 路由到现有对象。

**变量不应该是静态的，以防止**在不同的服务实例之间共享。只要您使用`InstanceContextMode.PerSession`和绑定维护会话，变量的状态将由 WCF 维护。

```
public int TotalTests = 0;
public int CurrentTest = 0; 
```

我还将添加`SessionMode.Required`合同以确保正确配置服务。

```
 [ServiceContract(SessionMode = SessionMode.Required )] 
```

# java - 使用 Java 的 ScriptEngine 或 WebEngine 类调用 DOM 对象

> ID：11264826
> 
> 赞同：0
> 
> 时间：2012-06-29T15:41:19.297
> 
> 标签：java, javascript, javafx-2, scriptengine

是否可以使用 Java 中的 ScriptEngine 或 WebEngine 类修改 html 元素？我尝试了以下方法：

```
/* theSite is a WebEngine object. Assume the id 'Email' is correct */
Element email=(Element) theSite.executeScript("document.getElementById('Email');");
email.setAttribute( "value", "navon.josh" ); 
```

我在一个例子中看到了这样的东西，但它似乎没有用。我也试过这个：

```
final ScriptEngineManager manager = new ScriptEngineManager();
final ScriptEngine engine = manager.getEngineByName( "js" );
try {
    engine.eval( "document.getElementById( 'Email' ).value = 'navon.josh'" );
} catch( ScriptException e) {
    e.printStackTrace();
} 
```

这也没有奏效。是因为该语句未链接到 WebEngine 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T18:20:43.913

要访问加载到 JavaFX 2 WebView 中的 html 的 DOM 模型，您可以使用`WebEngine`API。例如，这里是向 HTML TextArea 添加监听器的示例：

```
WebEngine webEngine = webView.getEngine();
webEngine.getLoadWorker().stateProperty().addListener(new ChangeListener<State>() {
  public void changed(ObservableValue ov, State oldState, State newState) {
    if (newState == Worker.State.SUCCEEDED) {

        // note next classes are from org.w3c.dom domain
        EventListener listener = new EventListener() {
            public void handleEvent(Event ev) {
                System.out.println(ev.getType());
            }
        };

        Document doc = webEngine.getDocument();
        Element el = doc.getElementById("textarea");
        ((EventTarget) el).addEventListener("keypress", listener, false);
    }
  }
});
webEngine.loadContent("<textarea id='textarea'></textarea>"); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-29T15:47:48.887

不，DOM 是浏览器的一部分，而您没有浏览器。

# javascript - 使用 requireJs 的模块中的循环依赖

> ID：11264827
> 
> 赞同：9
> 
> 时间：2012-06-29T15:41:20.633
> 
> 标签：javascript, requirejs, dependency-management, circular-dependency

阅读 requireJs 文档，
以修复循环依赖，建议使用`exports`为模块创建一个空对象，该对象可立即供其他模块引用。

我尝试了这段代码，但它似乎不起作用。怎么了？

PS：
阅读评论以查看输出，
尤其是 setTimeout 调用中的 B 模块。

* * *

```
// A module
define([
    'b'
], function (b) {
    console.log('B:', b); // B, Object
    var A = {
        boo: 1
    };

    return A;
}); 
```

* * *

```
// B module
define([
    'a',
    'exports'
], function (a, exports) {
    console.log('A:', a); // A, undefined (as I was expecting)
    exports.A = function () {
        return a;
    }

    var B = {
        bar: 1
    };

    setTimeout(function () {
        console.log('exports.A', exports.A()); // exports.A undefined 
                                           // I would like to access the A object
                                           // which is defined in A module
    }, 500);

    return B;
}); 
```

* * *

```
// main.js

(function () {

    define([
        'a'
    ], function () {
    });
}()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-24T23:05:29.083

您应该能够使用`require()`B 模块中的同步版本来访问“A”模块：

```
// B module
define([
    'a',
    'exports'
], function (a, exports) {
    console.log('A:', a); // A, undefined (as I was expecting)
    exports.A = function () {
        return require('a');
    }
    ...
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-21T16:47:03.797

一种选择是不返回模块本身，而是实例化模块的函数（在此示例中，它将是 typescript 中定义的构造函数，**底部是生成的 js 代码**- 请注意，接口不会生成 .js 代码）

*   文件 IA.ts

    ```
    /// <reference path="IB.ts" />
    interface IA{
        funcA();
        _classB : IB;
    } 
    ```

*   文件 IB.ts

    ```
    /// <reference path="IA.ts" />
    interface IB{
        funcB();
        _classA : IA;
    } 
    ```

*   文件类A.ts

    ```
    /// <reference path="IA.ts" />
    /// <reference path="IB.ts" />

    export class ClassA implements IA
    {
        _classB : IB = null;

        constructor(classB : IB)
        {
            this._classB = classB;
            if (classB){
                this._classB._classA = this;
            }
            return this;
        }

        funcA(){
            console.log('I am ClassA');
        }
    } 
    ```

*   文件类B.ts

    ```
    /// <reference path="IA.ts" />
    /// <reference path="IB.ts" />
    export class ClassB implements IB
    {
        _classA : IA = null;
        constructor(classA : IA)
        {
            this._classA = classA;
            if (classA){
                this._classA._classB = this;
            }
            return this;
        }
        funcB(){
            console.log('I am ClassB');
        }
    } 
    ```

*   文件 MainTest.ts

    ```
    /// <reference path="../../def/require.d.ts" />
    /// <reference path="IA.ts" />
    /// <reference path="IB.ts" />
    define(['ClassA', 'ClassB'],
        function (classA, classB)
        {
            var aa : IA = new classA.ClassA();
            var bb : IB = new classB.ClassB(aa);

            bb.funcB();
            aa._classB.funcB();
            bb._classA.funcA();
            aa.funcA();
        }); 
    ```

以及生成的js代码：

*   文件 ClassA.js

    ```
    define(["require", "exports"], function(require, exports) {
        var ClassA = (function () {
            function ClassA(classB) {
                this._classB = null;
                this._classB = classB;
                if (classB) {
                    this._classB._classA = this;
                }
                return this;
            }
            ClassA.prototype.funcA = function () {
                console.log('I am ClassA');
            };
            return ClassA;
        })();
        exports.ClassA = ClassA;
    }); 
    ```

*   文件 ClassB.js

    ```
    define(["require", "exports"], function(require, exports) {
        var ClassB = (function () {
            function ClassB(classA) {
                this._classA = null;
                this._classA = classA;
                if (classA) {
                    this._classA._classB = this;
                }
                return this;
            }
            ClassB.prototype.funcB = function () {
                console.log('I am ClassB');
            };
            return ClassB;
        })();
        exports.ClassB = ClassB;
    }); 
    ```

*   文件 MainTest.js

    ```
    define(['ClassA', 'ClassB'], function (classA, classB) {

        var aa = new classA.ClassA();
        var bb = new classB.ClassB(aa);

        bb.funcB();
        aa._classB.funcB();
        bb._classA.funcA();
        aa.funcA();

    }); 
    ```

最后，输出将是：

我是B级

我是B级

我是A级

我是A级

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-16T00:16:52.630

我经常遇到循环问题，使用 AMD 模块构建一个应用程序核心，它既支持许多模块，又包含配置或其他有用的对象供这些模块使用。

我今天做了一些实验，这似乎工作得很好。

```
define(['exports', 'underscore', './config', './mediator'],
  function (exports, _, Backbone, config, Mediator){

    Core = /* ... */

    // Publicize a core 'singleton' so that it's dependencies can access it, and so can modules that define it as a dependency themselves.
    core = new Core()
    exports.core = core //publicize it in a way that supports circularity
    return core // And also publicize it normally
  }
) 
```

这两个对象都是“===”，所以这看起来很有希望。

编辑：

上述方法在优化后不起作用。这是另一种可能（未经测试）的方法： [https ://github.com/requirejs/example-multipage/blob/master/www/js/app/main1.js#L2](https://github.com/requirejs/example-multipage/blob/master/www/js/app/main1.js#L2)

```
define(function (require) {
  var $ = require('jquery'),
      lib = require('./lib'),
      Core;

   Core = /* ... */

   return new Core()
}); 
```

# c# - 将布尔值从一种形式读取到另一种 c#

> ID：11264828
> 
> 赞同：0
> 
> 时间：2012-06-29T15:41:24.290
> 
> 标签：c#, winforms, visual-studio

我在一个表单上有五个按钮，单击这些按钮可以使布尔值分别为真或假，它们还会加载一个新表单。加载该表单后，我需要新表单首先检查这些布尔值中的哪一个是真还是假。这将导致表单加载正确的数据。

我将布尔值设置为公众认为这会起作用，并在 form2_load 中检查了哪一个是正确的。但这似乎不起作用。我首先尝试更改标签和文本。文本没有改变，我认为布尔值没有被读取或检查。

有谁知道是什么问题？

表格1代码：

```
public bool Room1;
public bool Room2;
public bool Room3;
public bool Room4;
public bool Room5;

private void btnRoom1_Click(object sender, EventArgs e)
    {
        this.Hide();

        //This displays Form2
        Form2 RoomTemplate = new Form2();
        RoomTemplate.Show();

        Room1 = true;
        Room2 = false;
        Room3 = false;
        Room4 = false;
        Room5 = false;

    } 
```

表格2代码：

```
public Form3()
    {
        InitializeComponent();
        Form2 Rooms = new Form2();

        if (Rooms.Room1 == true)
        {
            lblTitle.Text = "Living Room";
        }

        if (Rooms.Room2 == true)
        {
            lblTitle.Text = "Dining Room";
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T15:45:31.217

不要创建`Form2`in的新实例`Form3`。如果您不想传递引用或做单例，那么只需将`Form2`其构造函数中的引用分配给静态属性。就像是：

```
public static Form2 Instance { get; set; }
public Form2() {
    Instance = this;
} 
```

然后使用 .`Form3`访问布尔值`Form2.Instance.Room1`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T15:45:45.480

> Form2 房间 = 新 Form2();

在 Form3 的构造函数中，您正在创建 Form2 的新对象，它将具有所有具有默认值的 bool 属性，因为这不是调用对象，而是 Form2 的新实例。您应该在 Form2 的构造函数中传递 Form2 对象并访问那里的公共属性。

**在 Form2 中**

```
Form3 RoomTemplate = new Form3(this);
RoomTemplate.Show(); 
```

**在 Form2 中**

Form3 的构造函数

```
public Form3(Form frm)
{
     MessageBox.Show(frm.Room1.ToString());    
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T15:46:03.400

在中，您需要在其他地方进行修改`Form3`的实例。`Form2`您`Form3`只会使用`Form2`设置为这些布尔值的默认值，因为您正在实例化一个新的`Form2`，它不知道您之前设置的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T15:45:52.723

看起来您正在为`btnRoom1_Click`事件设置值，但在实例化 for 之后直接引用这些`Room`值。即在该`btnRoom1_Click`方法被调用之前。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-29T15:46:15.473

Form3 中的 Form2 与按下按钮的表单不是同一个对象。您可以将 Form2 对象传递给 Form3（假设 form2 打开 Form3）或在 Form2 内部发生某些事情时通知 Form3 对象或使用单例 Formr2 或静态字段

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-29T15:53:58.510

这是一种方法：

```
public bool Room1;
public bool Room2;
public bool Room3;
public bool Room4;
public bool Room5;
private void btnRoom1_Click(object sender, EventArgs e)
{
    this.Hide();

    Room1 = true;
    Room2 = false;
    Room3 = false;
    Room4 = false;
    Room5 = false;

    //This displays Form2
    Form2 RoomTemplate = new Form2(this);
    RoomTemplate.Show();
}

public class Form2()
{
    public Form2(Form1 form1)
    {
        InitializeComponent();
        if(form1.Room1 == true)
        {
            lblTitle.Text="Living Room";
        }
        else if(form1.Room2==true)
        {
            //
        }
        //
    }
} 
```

# jquery - 我正在尝试获取具有淡入淡出效果的菜单列表（jquery）

> ID：11264829
> 
> 赞同：0
> 
> 时间：2012-06-29T15:41:29.493
> 
> 标签：jquery

```
$(document).ready(function() {
$(".menu li a").hover(function() {
$(this).fadeTo("slow", 0.33);
});
}); 
```

我想实现 mouseover 和 mouseout 但我做不到:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T15:44:21.637

```
$(document).ready(function() 
    $(".menu li a").hover(function() {
        $(this).fadeTo("slow", 0.33);
    }, function() {
        $(this).fadeIn("slow");
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T15:43:24.130

```
$(document).ready(function() {
   $(".menu li a").hover(function() {

      // do something for mouseover

   }, function() {

     // do something for mouseout

   });
}); 
```

# ios - 防止 iOS 时钟停止

> ID：11264832
> 
> 赞同：1
> 
> 时间：2012-06-29T15:41:38.080
> 
> 标签：ios, multithreading, performance

我注意到，在我的应用程序运行的处理器或内存非常密集的过程中，特别是在初始下载或执行查询期间，状态栏中的时钟将停止运行并停留在进程启动的时间。有没有办法防止这种情况发生，以防这样的事情导致应用程序被拒绝？我没有任何代码可以提供，因为我不确定应用程序在哪里执行此操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T15:48:29.333

考虑到您的评论，您不应在主线程上执行内存密集型或 CPU 密集型工作。只应在主线程上执行与 UI 的交互，否则 UI 看起来会冻结，包括您的应用程序和状态栏。

# cakephp-2.0 - 使用 CakePhp 2.0 访问 public_html 中的子目录

> ID：11264833
> 
> 赞同：0
> 
> 时间：2012-06-29T15:41:39.067
> 
> 标签：cakephp-2.0, subdirectory, public-html

我的问题很简单。

我的 /public_html 目录上有一个 /cms 子目录。

当我尝试这样做时：mysite.com/cms cake 尝试查找 cms 控制器，而不是显示 /cms 包含的 index.php。

如何制作蛋糕以在 public_html 中搜索此文件夹？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T15:52:39.810

这是属于您的应用程序的文件夹还是外部文件夹？这个问题很可能是因为你的 public_html 文件夹是你的蛋糕根文件夹（或者至少你有 .htaccess 在那里路由）

您可能希望将蛋糕应用程序放在子文件夹中，而不是将其放在您网络服务器的根目录中

如果内容属于您的应用程序，您可以将 cms 文件夹放在`wwwroot`您的应用程序的文件夹中，或者按照[此](http://richardathome.wordpress.com/2007/08/13/cakephp-tip-routing-for-static-pages/)提示将所有内容从 cms 移动到`Pages`文件夹

# vba - Outlook - 根据收件人插入文本

> ID：11264834
> 
> 赞同：3
> 
> 时间：2012-06-29T15:41:39.653
> 
> 标签：vba, outlook

我需要根据收件人自动将文本插入到外发电子邮件中。我在另一个看起来很有希望的问题（归功于 76Mel）的答案中找到了一些代码。看来我可以将代码附加到 ThisOutlookSession 中的 ItemSend

```
Private Sub Application_ItemSend(ByVal Item As Object, Cancel As Boolean)
   If Item.MessageClass = "IPM.Note" Then
       For Each myRecipient In Item.Recipients
           If myRecipient.Address = "<EMAIL ADDRESS TO FIND>" Then 
           <code to add text>
           End If
       Next
   End If
End Sub 
```

将文本添加到电子邮件正文的代码是什么 - 这甚至会起作用吗？此代码会在电子邮件发送之前触发，还是已经太晚了？

我确实需要它是自动化的（创建一个按钮或手动运行宏并不是一个真正的选择；这是一个记忆问题：如果我记得运行宏，我可以手动添加文本）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T16:19:12.603

这是你正在尝试的吗？我已经添加了评论，所以你不应该有任何理解它的问题:) 如果你还有问题，只需问......

```
Private Sub Application_ItemSend(ByVal Item As Object, Cancel As Boolean)
    '~~> Check if it is an email
    If TypeName(Item) <> "MailItem" Then Exit Sub

    Dim srchString As String, NewText As String

    '~~> Email Address which you want to search for
    srchString = "abc@gmail.com"

    '~~> New text that you want to add
    NewText = "Blah Blah"

    '~~> Search To, CC, BCC Fields
    If InStr(1, Item.To, srchString, vbTextCompare) Or _
    InStr(1, Item.CC, srchString, vbTextCompare) Or _
    InStr(1, Item.BCC, srchString, vbTextCompare) Then
        '~~> Add the relevant text to the body
        Item.Body = Item.Body & vbNewLine & NewText
    End If
End Sub 
```

我会推荐这个 MSDN 链接。

**主题**：MailItem 对象成员

**链接**：http: [//msdn.microsoft.com/en-us/library/bb176688%28v=office.12%29.aspx](http://msdn.microsoft.com/en-us/library/bb176688%28v=office.12%29.aspx)

**从上面的链接引用**

> 表示收件箱文件夹中的邮件消息。
> 
> 列出 MailItem 对象的所有方法/属性

# python - 如何获取C的numpy数组的内存地址

> ID：11264838
> 
> 赞同：28
> 
> 时间：2012-06-29T15:41:48.747
> 
> 标签：python, numpy

我构造了一个 numpy 数组::

```
a=np.ndarray([2,3]) 
```

然后我想看看它的数据在哪里::

```
a.data 
>>>Out[213]: <read-write buffer for 0x0482C1D0, size 48, offset 0 at 0x049E87A0> 
a.data 
>>>Out[214]: <read-write buffer for 0x0482C1D0, size 48, offset 0 at 0x049E82A0> 
a.data 
>>>Out[215]: <read-write buffer for 0x0482C1D0, size 48, offset 0 at 0x049E81C0> 
```

...

为什么每次偏移地址都不一样？如果我想通过以下方式使用 c_types 将数据传输到 ac 函数：

```
ctypes_array = (ctypes.c_char * a.size * 8).from_address(ptr) 
```

我应该如何获得 ptr 的值？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-06-29T17:18:08.727

另外，看看[`ndarray.__array_interface__`](http://docs.scipy.org/doc/numpy/reference/arrays.interface.html)，这是一个包含您所追求的所有信息的字典。

在你的情况下，

```
pointer, read_only_flag = a.__array_interface__['data'] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T16:17:50.370

`a.data`可能是一个属性，它的 getter 函数在每次调用时都会创建一个新的缓冲区对象（元数据）。

要获取地址，请查看如何[`numpy.ctypeslib.as_ctypes()`](https://github.com/numpy/numpy/blame/master/numpy/ctypeslib.py)实现。

# web - 网站如何识别网络浏览器？

> ID：11264847
> 
> 赞同：2
> 
> 时间：2012-06-29T15:42:16.917
> 
> 标签：web, browser

通过智能手机或电脑访问时，有些网站会自行安排布局。我想知道它是如何完成的（Javascript？获取浏览器数据？）。我真的很感激一些帮助，我正在学习 JAVA，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T15:44:34.567

Web 浏览器的每个请求都有代理字符串，其中包含必要的信息。查看此页面以获取代理字符串的描述。[http://en.wikipedia.org/wiki/User_agent](http://en.wikipedia.org/wiki/User_agent)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T15:45:00.877

浏览器会在每个 GET 请求中发送一个标头，其中包含有关自身的各种信息。有关示例，请参见[此处](http://pgl.yoyo.org/http/browser-headers.php)`User-Agent`，但您正在谈论的特定信息（浏览器类型）是在该字段中发送的。使用一些 http 客户端库，您可以控制发送的一些字段，以假定其他类型客户端的身份。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T15:45:12.787

这是通过读取用户代理来完成的，通常使用 javascript（在网站上）。

Javascript 示例[在这里](http://www.quirksmode.org/js/detect.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T15:53:20.227

网站通过用户代理字符串识别浏览器。这是告诉站点浏览器类型和版本的唯一标识符。

这可以通过 javascript 在 javascript 中检测到`navigator.userAgent` 它也作为头字段在[Get Request中发送到服务器](http://en.wikipedia.org/wiki/GET_request#Request_methods)

**例子：**

> 用户代理：Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.56 Safari/536.5

得到这个的**Java Servlet 代码**是（[更多信息在这里](http://www.javamex.com/tutorials/servlets/request_headers.shtml)）：

```
public final void doGet(HttpServletRequest req, HttpServletResponse res)
    throws ServletException, IOException {
  String agent = req.getHeader("user-agent");
  if (agent != null && agent.indexOf("MSIE") > -1) {
    // Internet Explorer mode
  } else {
    // Non-Internet Explorer mode
  }
} 
```

**强制性维基百科参考：**

[http://en.wikipedia.org/wiki/User_agent](http://en.wikipedia.org/wiki/User_agent)

> User-Agent 字符串格式目前由 RFC 2616 (HTTP/1.1) 的第 14.43 节指定。HTTP 中 User-Agent 字符串的格式是带有可选注释的产品标记（关键字）列表。例如，如果您的产品名为 WikiBrowser，您的用户代理字符串可能是 WikiBrowser/1.0 Gecko/1.0。首先列出“最重要”的产品组件。该字符串的部分如下：
> 
> 产品名称和版本 (WikiBrowser/1.0) 布局引擎和版本 (Gecko/1.0)。在这种情况下，这表示布局引擎和版本。不幸的是，在浏览器大战期间，许多 Web 服务器被配置为仅将需要高级功能的网页发送到被标识为某些版本的 Mozilla 的客户端。
> 
> 出于这个原因，大多数 Web 浏览器使用如下的 User-Agent 值：Mozilla/[version] ([system and browser information]) [platform] ([platform details]) [extensions]。例如，iPad 上的 Safari 使用了以下内容：
> 
> Mozilla/5.0 (iPad; U; CPU OS 3_2_1 like Mac OS X; en-us) AppleWebKit/531.21.10 (KHTML, like Gecko) Mobile/7B405 这个字符串的组成部分如下：
> 
> Mozilla/5.0：以前用于表示与 Mozilla 渲染引擎的兼容性（iPad；U；CPU OS 3_2_1，如 Mac OS X；en-us）：运行浏览器的系统的详细信息 AppleWebKit/531.21.10：平台浏览器使用（KHTML，如 Gecko）：浏览器平台详细信息 Mobile/7B405：浏览器使用它来指示可直接在浏览器中或通过第三方获得的特定增强功能。这方面的一个例子是 Microsoft Live Meeting，它注册了一个扩展，以便 Live Meeting 服务知道该软件是否已安装，这意味着它可以为加入会议提供简化的体验。

# c# - Devexpress 12.1 MVC GridView Inside Tab Strip 问题

> ID：11264857
> 
> 赞同：2
> 
> 时间：2012-06-29T15:42:31.913
> 
> 标签：c#, asp.net-mvc-3, gridview, devexpress

我是一名实习生，从来没有做过任何网络开发，只是为了让你知道我来自哪里。我目前正在尝试使用 devexpress 12.1 工具学习 asp.NET MVC 3。我从一个模板开始，该模板在链接到 Northwind db 的内容区域中有一个 devexpress gridview。它自己工作，但是当我创建一个 devexpress 选项卡条并将 gridview 放在第二个选项卡内时，我得到了列标题，但没有显示任何数据。当我单击列标题对数据进行排序时，就会显示出来。我希望在单击选项卡后而不是在页面加载时加载 gridview。也许我的回调是问题所在。我的标签条使用 ajax 回调，gridview 也用于分页。我已将模型添加到 TabControlPartial 页面，并在控制器中为 TabControlPartial 操作传入模型。我' 我尝试查看 mvc.devexpress.com 上的演示，但没有任何东西可以将两者结合在一起。我不 100% 理解将模型传递到我猜的视图中。我知道这很简单，但我不知道该怎么做。谢谢你的帮助。

* * *

控制器（这可能是我的问题）：

```
public ActionResult LookUp()
{
    return View(NorthwindDataProvider.GetCustomers());
}

public ActionResult _TabControlPartial()
{
    return PartialView("_TabControlPartial", NorthwindDataProvider.GetCustomers());
}

public ActionResult _GridViewPartial()
{
    return PartialView("_GridViewPartial", NorthwindDataProvider.GetCustomers());
} 
```

* * *

查找视图（索引）：

```
@model System.Collections.IEnumerable

@Html.Partial("_TabControlPartial", Model) 
```

* * *

标签部分：

```
@model System.Collections.IEnumerable

@Html.DevExpress().PageControl(
settings =>
{
    settings.Name = "TabControl";
    settings.Width = System.Web.UI.WebControls.Unit.Percentage(100);
    settings.Height = System.Web.UI.WebControls.Unit.Percentage(100);
    settings.CallbackRouteValues = new { Controller = "Customers", Action =
        "_TabControlPartial" };

    settings.TabPages.Add(
        tabOne =>
        {
            tabOne.Name = "TabOne";
            tabOne.Text = "Start";
            tabOne.SetContent(() =>
            {
                ViewContext.Writer.Write("Start");
            });
        });
    settings.TabPages.Add(
        tabTwo =>
        {
            tabTwo.Name = "TabTwo";
            tabTwo.Text = "Customer List";
            tabTwo.SetContent(() =>
            {
                 Html.RenderPartial("_GridViewPartial", Model);
            });
        });
}).GetHtml() 
```

网格视图部分：

```
@Html.DevExpress().GridView(
settings =>
{
    settings.Name = "GridView";
    settings.CallbackRouteValues = new { Controller = "Customers", Action = 
          "_GridViewPartial" };

    settings.Width = System.Web.UI.WebControls.Unit.Percentage(100);
    settings.Height = System.Web.UI.WebControls.Unit.Percentage(100);
    settings.SettingsPager.Visible = true;
    settings.SettingsPager.PageSize = 15;
    settings.ControlStyle.Paddings.Padding = System.Web.UI.WebControls.Unit.Pixel(0);
    settings.ControlStyle.Border.BorderWidth = System.Web.UI.WebControls.Unit.Pixel(0);
    settings.ControlStyle.BorderBottom.BorderWidth =   
       System.Web.UI.WebControls.Unit.Pixel(1);

//Configure grid's columns in accordance with data model fields
    settings.Columns.Add("ContactName");
    settings.Columns.Add("Address");
    settings.Columns.Add("City");
    settings.Columns.Add("PostalCode");
    settings.Columns.Add("Phone");
}).Bind(Model).GetHtml() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-27T15:03:20.857

打开选项卡时，您缺少 GridView 中的数据。打开页面时，需要在返回的模型中加载 GridView 的数据。现在您加载页面（在 LookUp 中），但您没有推送网格的数据。每当发生任何回调时，只有在那时才会从数据库中提取数据并返回到屏幕（请注意，您只在回调方法 _TabControlPartial 和 _GridViewPartial 中返回数据）。当您对列或过滤器等进行排序时，将触发回调并从服务器返回数据。

您拥有的代码看起来是正确的，但在过程中的某个地方，模型正在失去它的价值。最好的选择是在选项卡控件、网格绑定和控制器中放置一个断点，并确保您期望的数据在绑定时就位。

您可以在激活选项卡时打回回来来“作弊”，例如：

```
@Html.DevExpress().PageControl(
settings =>
{
    settings.Name = "TabControl";
    settings.ClientSideEvents.Init = "TabControl_Init";
    ...
}).GetHtml() 
```

在 JavaScript 中有：

```
function TabControl_Init(s, e) {
    GridView.PerformCallback();
} 
```

这样，标签页初始化后，GridView 会运行回调，并正确抓取数据。但是最好通过单步执行代码来弄清楚为什么数据没有被发送下来。

# r - 是否可以更改 ggplot2 中的刻度角度

> ID：11264859
> 
> 赞同：1
> 
> 时间：2012-06-29T15:42:42.807
> 
> 标签：r, ggplot2

正如问题所述，是否可以更改比例尺文本的角度`ggplot`？

我的意思是，我希望将 x 轴上使用的标签旋转 90 度。

您显然可以使用`angle`图例，但它似乎不适用于比例。

任何的想法 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T16:04:31.200

您可以使用：

```
 + opts(axis.text.x=theme_text(angle=90)) 
```

从 0.9.2 版开始，`opts`已被[替换](http://docs.ggplot2.org/current/theme.html)为`theme`：

```
+ theme(axis.text.x = element_text(angle = 90)) 
```

# c++ - MATLAB Wrapper 中的 MEX 代码

> ID：11264860
> 
> 赞同：0
> 
> 时间：2012-06-29T15:42:51.760
> 
> 标签：c++, matlab, mex

我有以下代码：

```
for i=1:N,
    some_mex_file();
end 
```

我的 MEX 文件执行以下操作：

1.  声明一个我定义的类的对象，它有 2 个大内存块，即双精度类型的 32x2048x2。
2.  处理此对象中的数据。
3.  销毁对象。

我想知道当我在为其对象分配大内存块的循环中调用 MEX 文件时是否需要更多时间。我正在考虑迁移到 C++，这样我就可以只声明一次对象并重置它的内存空间，这样它就可以在没有新声明的情况下一次又一次地使用。这会有所作为还是会成为一文不值的努力？换句话说，在 MEX 文件中分配内存是否比声明一次并重用它需要更多时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:27:41.417

所以，这里通常的建议适用：分析**你的代码（在 Matlab 中和使用 C/C++ 分析器）**，或者至少在调试器中停止它几次，看看它在哪里花费时间。停止“想知道”它在哪里花费时间，并实际*衡量*它在哪里花费时间。

但是，我遇到了这样的问题，在 MEX 函数中分配/取消分配内存是主要的性能下降。但是，您应该通过分析（或在调试器中停止代码）来*验证这一点。*

此类性能问题的最简单解决方案是双重的：

1.  将循环移动到 MEX 函数中。使用迭代计数调用 MEX 函数，让您的快速 C/C++ 代码实际执行循环。这消除了从 Matlab 调用到您的 MEX 函数的成本（这对于大 N 来说可能是巨大的），并促进了第二次优化：

2.  让您的 MEX 函数缓存其分配/解除分配，如果您将循环移动到 MEX 函数中，这样做会容易得多（也更安全）。这可以通过多种方式完成，但最简单的方法是只分配一次空间（在循环外），然后在循环完成后释放它。

# ipython - 用 Qt 控制台替换 InteractiveShellEmbed

> ID：11264865
> 
> 赞同：2
> 
> 时间：2012-06-29T15:43:04.890
> 
> 标签：ipython

我正在通过（简化）运行嵌入式 ipython 控制台：

```
# the code uses PyQt4, this makes sure it is initialized properly
import IPython.lib.inputhook
qapp=IPython.lib.inputhook.enable_gui(gui='qt4')
# create the embedded terminal
from IPython.frontend.terminal.embed import InteractiveShellEmbed
ipshell=InteractiveShellEmbed()
ipshell() 
```

如果我想运行 ipython 的[Qt 控制台](http://ipython.org/ipython-doc/dev/interactive/qtconsole.html)而不是嵌入式终端 shell，这段代码会是什么样子？到处都有使用的例子`ipython qtconsole`，但没有如何将它集成到我自己的代码中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T10:11:15.653

有一个示例脚本适用于这个问题：[Embedding IPython Qt console in a PyQt application](https://stackoverflow.com/questions/11513132/embedding-ipython-qt-console-in-a-pyqt-application)

在这里您可以找到它以供参考：

```
from IPython.zmq.ipkernel import IPKernelApp
from IPython.lib.kernel import find_connection_file
from IPython.frontend.qt.kernelmanager import QtKernelManager
from IPython.frontend.qt.console.rich_ipython_widget import RichIPythonWidget
from IPython.utils.traitlets import TraitError
from PySide import QtGui, QtCore
import atexit

def event_loop(kernel):
    kernel.timer = QtCore.QTimer()
    kernel.timer.timeout.connect(kernel.do_one_iteration)
    kernel.timer.start(1000*kernel._poll_interval)

def default_kernel_app():
    app = IPKernelApp.instance()
    app.initialize(['python', '--pylab=qt', '--profile=plask'])
    app.kernel.eventloop = event_loop
    return app

def default_manager(kernel):
    connection_file = find_connection_file(kernel.connection_file)
    manager = QtKernelManager(connection_file=connection_file)
    manager.load_connection_file()
    manager.start_channels()
    atexit.register(manager.cleanup_connection_file)
    return manager

def console_widget(manager):
    try: # Ipython v0.13
        widget = RichIPythonWidget(gui_completion='droplist')
    except TraitError:  # IPython v0.12
        widget = RichIPythonWidget(gui_completion=True)
    widget.kernel_manager = manager
    return widget

def terminal_widget(**kwargs):
    kernel_app = default_kernel_app()
    manager = default_manager(kernel_app)
    widget = console_widget(manager)

    # Update namespace                                                           
    kernel_app.shell.user_ns.update(kwargs)

    kernel_app.start()
    return widget

# This simply opens qtconsole widged in a new window. But you can find embed it wherever you want
app = QtGui.QApplication([''])
widget = terminal_widget(testing=123)
widget.setWindowTitle("Your console") 
widget.show()
app.exec_() 
```

# full-text-search - Google BigQuery 是否支持全文搜索

> ID：11264868
> 
> 赞同：9
> 
> 时间：2012-06-29T15:43:23.973
> 
> 标签：full-text-search, google-bigquery

我正在考虑将我的文本可搜索内容复制到 Google 的 BigQuery，然后使用 BigQuery API 执行全文搜索。

Google BigQuery 是否支持这种情况？

我在 Google BigQuery API 中找不到“搜索”命令： [https ://developers.google.com/bigquery/docs/reference/v2/](https://developers.google.com/bigquery/docs/reference/v2/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-29T16:28:45.440

BigQuery 支持 RegEx 和 String 查询函数的集合，使其适用于跨 STRING 字段的文本搜索查询。但是，每个 BigQuery 记录的每行（和字段）限制为 64k，因此可能无法支持完全非结构化、无限大小的文档文本搜索案例。

*   [https://developers.google.com/bigquery/docs/query-reference#stringfunctions](https://developers.google.com/bigquery/docs/query-reference#stringfunctions)
*   [https://developers.google.com/bigquery/docs/query-reference#regularexpressionfunctions](https://developers.google.com/bigquery/docs/query-reference#regularexpressionfunctions)

对于 App Engine 应用程序中的全文搜索功能，我建议查看新的 Search API：

*   [https://developers.google.com/appengine/docs/python/search/overview](https://developers.google.com/appengine/docs/python/search/overview)

# ruby-on-rails-3 - 如何通过rails中的参数传递对象？

> ID：11264874
> 
> 赞同：0
> 
> 时间：2012-06-29T15:43:42.307
> 
> 标签：ruby-on-rails-3, parameters

我确信有更好的方法可以做到这一点，但由于我缺乏经验，我很难找到更好的方法。我有一个链接需要发送并反对控制器进行处理。它无法正常工作：

意见/主页/index.html.erb

```
<% search_term = "pizza" %>

<% @tag = Tag.find(:all, :conditions => ["name = ?", search_term ]).first %>

<li> <%= link_to(search_term, {:controller => "restaurants", :action => "index", :search_item => @tag}) %> </li> 
```

控制器/餐厅.rb

```
def index
  search_tag = params[:search_item]
  @restaurants = Restaurant.search_by_tag(search_tag) 
```

模型/餐厅.rb

```
Class Restauarant < ActiveRecord::Base

 def self.search_by_tag(search_tag)
  search_condition = search_tag.name
  @tags = Tag.find(:all, :conditions => [" name = ?", search_condition ])  
  @tag = @tags.first     
  @Restaurants = @tag.restaurants
 end

end 
```

这会导致 ResataurantsController#index 中出现 NoMethodError

参数：

{"搜索项" => "15"}

出于某种原因，标签对象没有从 中正确传递，`home/index.html.erb`而只是将 Tag-object :id 传递给餐馆控制器。不可能以这种方式传递一个完整的对象。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T15:49:03.687

您不能像这样通过获取参数提交对象。通常，您只需传递对象的 id（您已经在这样做），然后在控制器中进行查找：

```
@tag = Tag.find(params[:search_item]) 
```

将“search_item”参数重命名为“tag_id”会更有意义。

# asp.net - ASP-响应-刷新-刷新-部分数据

> ID：11264875
> 
> 赞同：2
> 
> 时间：2012-06-29T15:43:44.500
> 
> 标签：asp.net

我正在开发一个带有 ASP 服务器端的 Web 应用程序，并且我使用 iframe 进行数据推送。

一个 ASP 处理程序会每隔一段时间将一些 javascript 刷新到 iframe：

```
context.Response.Write("<script language='javascript'>top.update('lala');</script>");
context.Response.Flush(); 
```

我的问题是有时，当我收到数据时，我没有得到全文。例如我会收到这个：update('lala');

我的一种解决方法是每 500 毫秒有一个线程刷新'...​​....'。（然后我会收到脚本>......这将完成我的javascript。）

但是我确信必须有办法让 Response.Flush() 发送整个数据块。有人知道如何正确使用 Response.Flush() 吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T20:03:48.267

显然经过大量谷歌搜索后，我找到了答案。IIS 服务器正在使用 GZIP 压缩输出，然后它似乎会忽略所有 Response.Flush 调用。这在 IIS7 和 Windows 7 中默认打开。如果禁用它，它可以正常工作。

# php - 小程序崩溃..不同的错误和不同的时间崩溃

> ID：11264880
> 
> 赞同：0
> 
> 时间：2012-06-29T15:43:51.120
> 
> 标签：php, zend-framework, simple-html-dom

由于某种原因，该程序不断崩溃，并出现 zend_mm_heap 错误，同时也出现 zend_hash_destroy() 错误。有任何想法吗？我在网上找不到太多关于这个的信息，在 irc 上问过，他们也不知道。我确实阅读了有关此的其他线程并尝试了这些解决方法，但对我没有任何作用。

```
 <?
include('../simple_html_dom.php');

getAlluc();

function getAlluc(){
    $url = 'http://www.alluc.org/';
    $movieLinks = array();
    $tvLinks = array();
    $animeLinks = array();
    $cartoonLinks = array();
    $documentaryLinks = array();
$musicClipLinks = array();
$sportLinks = array();
$html = setPage($url."/movies.html");
foreach($html->find('a[class$=linklist_header]') as $movies){
    $ml = str_replace("&amp;","&",$movies->href);
    echo $ml."\n";
    array_push($movieLinks,$url.$ml);
}

//get actual movie links below

foreach($movieLinks as $letter){
    echo $letter."\n";
    $html = setPage($letter);
    foreach($html->find('li.linklist2') as $li){
            foreach($li->find('a[href]') as $href){
                echo $href->href."\n".$href->plaintext."\n";
            }
        }
    }
}

function setPage($url){

    $html = new simple_html_dom();
    $html->load_file($url);
    return $html;
}

?> 
```

# c# - Distinct 不删除重复项？

> ID：11264886
> 
> 赞同：-1
> 
> 时间：2012-06-29T15:44:23.057
> 
> 标签：c#, linq, c#-4.0

我尝试使用 linq 删除重复项：

```
 var MyItems = (from b in this.result
               select new Item{ Name = b.Name, ID = b.ID }).Distinct(); 
```

我检查了结果，它没有删除重复的项目。如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T15:49:00.820

默认情况下，`Distinct()`使用`EqualityComparer<T>.Default`，它具有以下规则：

> 默认相等比较器 Default 用于比较实现 IEquatable 泛型接口的类型的值。要比较自定义数据类型，您需要实现此接口并为该类型提供您自己的 GetHashCode 和 Equals 方法。

在您的情况下，这意味着`Item`需要实施`IEquatable<Item>`.

或者，您可以使用直接采用 a的[重载`Distinct`](http://msdn.microsoft.com/en-us/library/bb338049.aspx)`IEqualityComparer<T>`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T15:55:06.837

您可以传递 Distinct() 一个比较器对象：

```
var MyItems = (from b in this.result
           select new Item{ Name = b.Name, ID = b.ID }).Distinct(new ItemComparer()); 
```

这是自定义比较器类的示例

```
// Custom comparer for the Item class
class ItemComparer: IEqualityComparer<Product>
{
    // Items are equal if their names and IDs are equal.
    public bool Equals(Item x, Item y)
    {

        //Check whether the compared objects reference the same data.
        if (Object.ReferenceEquals(x, y)) return true;

        //Check whether any of the compared objects is null.
        if (Object.ReferenceEquals(x, null) || Object.ReferenceEquals(y, null))
            return false;

    //Check whether the items' properties are equal.
    return x.ID == y.ID && x.Name == y.Name;
    }

    // If Equals() returns true for a pair of objects 
    // then GetHashCode() must return the same value for these objects.

    public int GetHashCode(Item item)
    {
        //Check whether the object is null
        if (Object.ReferenceEquals(item, null)) return 0;

        //Get hash code for the Name field if it is not null.
        int hashItemName = item.Name == null ? 0 : item.Name.GetHashCode();

        //Get hash code for the ID field.
        int hashItemID = item.ID.GetHashCode();

        //Calculate the hash code for the item.
        return hashItemName ^ hashItemID;
    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T15:48:58.463

当您比较对象而不是基元时，您将不得不做一些工作来定义`Distinct`含义。

查看`Distinct`包含以下内容的覆盖：http `IEqualityComparer`: [//msdn.microsoft.com/en-us/library/bb338049.aspx](http://msdn.microsoft.com/en-us/library/bb338049.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-29T15:46:22.957

常规`Distinct()`使用默认的相等比较器从集合中返回元素。

您可以为此使用自定义[比较器](http://msdn.microsoft.com/en-us/library/bb338049.aspx)：

```
// modified example from docs, not tested
class MyComparer : IEqualityComparer<Item>
{
    // Items are equal if their ids are equal.
    public bool Equals(Item x, Item y)
    {

        // Check whether the compared objects reference the same data.
        if (Object.ReferenceEquals(x, y)) return true;

        // Check whether any of the compared objects is null.
        if (Object.ReferenceEquals(x, null) || Object.ReferenceEquals(y, null))
            return false;

        //Check whether the items properties are equal.
        return x.ID == y.ID;
    }

    // If Equals() returns true for a pair of objects 
    // then GetHashCode() must return the same value for these objects.

    public int GetHashCode(Product product)
    {
        //Check whether the object is null
        if (Object.ReferenceEquals(item, null)) return 0;

        //Get hash code for the ID field.
        int hashProductId = product.ID.GetHashCode();

        return hashProductId;
    }

}

var myItems = (from b in this.result
               select new Item{ Name = b.Name, ID = b.ID }).Distinct(new MyComparer()); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-29T15:53:49.243

由于我不知道您如何使用`Items`之后，我在这里赌博。

如果真的只需要 ID-Name 对，您可以使用匿名类型并免费获得比较：

```
var MyItems = (from b in this.result
               select new { b.Name, b.ID }).Distinct(); 
```

在此之后（再次假设*您只需要 Name-ID 对*），生成的对象将具有您需要的属性：

```
foreach(var item in MyItems)
    Console.WriteLine("{0} -> {1}", item.ID, item.Name); 
```

* * *

[在C# 匿名类型](http://msdn.microsoft.com/en-us/library/bb397696.aspx)上引用 MSDN ：

> 因为匿名类型的 Equals 和 GetHashCode 方法是根据属性的 Equals 和 GetHashcode 方法定义的，所以相同匿名类型的两个实例只有在它们的所有属性都相等时才相等。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-10-02T13:22:00.303

Enumerable.Distinct 方法 (IEnumerable) 通过使用默认的相等比较器来比较值，从序列中返回不同的元素。

请检查： [https ://msdn.microsoft.com/en-us/library/bb348436.aspx](https://msdn.microsoft.com/en-us/library/bb348436.aspx)

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2012-06-29T15:57:51.797

您需要将新项目添加到列表中，使用 foreach 考试：

```
foreach(var _item in result.Distinct()){
//Code here
} 
```

好的 ：）

# android - 使用 maven 构建 apk 中的 ClassNotFoundException

> ID：11264887
> 
> 赞同：5
> 
> 时间：2012-06-29T15:44:31.123
> 
> 标签：android, maven, maven-3, apk, android-maven-plugin

我想在 Android 开发中为我的构建过程切换到 maven。我按照[http://www.sonatype.com/books/mvnref-book/reference/android-dev-sect-archetype.html](http://www.sonatype.com/books/mvnref-book/reference/android-dev-sect-archetype.html)创建 pom.xml 并稍微调整了版本以便我使用最新版本的android-maven-plugin。

虽然我的 apk 可以从我的 IDE（IntellJ）中手动构建，但使用 maven 构建的 apk 存在问题。显然缺少一些不会将类放入 apk 的东西。

当我检查两个生成的apk（解压缩它）时，**我发现maven生成的apk的classes.dex（2.6kB）比常规的（24.9kB）小得多。**显然那里缺少课程。

因此，在启动此 apk 时，我收到以下错误：

```
E/AndroidRuntime(31228): FATAL EXCEPTION: main
E/AndroidRuntime(31228): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.mycompany.abc/com.mycompany.abc.ABCActivity}: java.lang.ClassNotFoundException: com.mycompany.abc.ABCActivity in loader dalvik.system.PathClassLoader[/mnt/asec/com.mycompany.abc-1/pkg.apk]
E/AndroidRuntime(31228):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1569)
E/AndroidRuntime(31228):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
E/AndroidRuntime(31228):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
E/AndroidRuntime(31228):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
E/AndroidRuntime(31228):    at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(31228):    at android.os.Looper.loop(Looper.java:130)
E/AndroidRuntime(31228):    at android.app.ActivityThread.main(ActivityThread.java:3683)
E/AndroidRuntime(31228):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(31228):    at java.lang.reflect.Method.invoke(Method.java:507)
E/AndroidRuntime(31228):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
E/AndroidRuntime(31228):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
E/AndroidRuntime(31228):    at dalvik.system.NativeStart.main(Native Method)
E/AndroidRuntime(31228): Caused by: java.lang.ClassNotFoundException: com.mycompany.abc.ABCActivity in loader dalvik.system.PathClassLoader[/mnt/asec/com.mycompany.abc-1/pkg.apk]
E/AndroidRuntime(31228):    at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
E/AndroidRuntime(31228):    at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
E/AndroidRuntime(31228):    at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
E/AndroidRuntime(31228):    at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
E/AndroidRuntime(31228):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561)
E/AndroidRuntime(31228):    ... 11 more
W/ActivityManager( 4964):   Force finishing activity com.mycompany.abc/.ABCActivity
W/ActivityManager( 4964): Activity pause timeout for HistoryRecord{40902960 com.mycompany.abc/.ABCActivity} 
```

这是我使用的 pom.xml：`mvn install -P sign`或`mvn android:apk`

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.mycompany</groupId>
  <artifactId>com.mycompany.abc</artifactId>
  <version>1.0-SNAPSHOT</version>
  <packaging>apk</packaging>
  <name>com.mycompany.abc</name>

    <dependencies>
        <dependency>
            <groupId>com.google.android</groupId>
            <artifactId>android</artifactId>
            <version>2.2.1</version>
            <scope>provided</scope>
        </dependency>
    </dependencies>

    <build>
        <plugins>
            <plugin>
                <!-- Simply read properties from file -->
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>properties-maven-plugin</artifactId>
                <version>1.0-alpha-2</version>
                <executions>
                    <execution>
                        <phase>initialize</phase>
                        <goals>
                            <goal>read-project-properties</goal>
                        </goals>
                        <configuration>
                            <files>
                                <file>android.properties</file>
                            </files>
                        </configuration>
                    </execution>
                </executions>
            </plugin>

            <plugin>
                <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                <artifactId>android-maven-plugin</artifactId>
                <version>3.2.0</version>
                <configuration>
                    <androidManifestFile>${project.basedir}/AndroidManifest.xml</androidManifestFile>
                    <assetsDirectory>${project.basedir}/assets</assetsDirectory>
                    <resourceDirectory>${project.basedir}/res</resourceDirectory>
                    <nativeLibrariesDirectory>${project.basedir}/src/main/native</nativeLibrariesDirectory>
                    <sdk>
                        <platform>11</platform>
                    </sdk>
                    <deleteConflictingFiles>true</deleteConflictingFiles>
                    <undeployBeforeDeploy>true</undeployBeforeDeploy>
                    <device>usb</device>
                </configuration>
                <extensions>true</extensions>
            </plugin>

            <plugin>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>

            <plugin>
                <artifactId>exec-maven-plugin</artifactId>
                <groupId>org.codehaus.mojo</groupId>
                <configuration>
                    <executable>${basedir}/scripts/run_app.sh</executable>
                </configuration>
            </plugin>

        </plugins>
    </build>

    <profiles>
        <profile>
            <id>sign</id>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-jarsigner-plugin</artifactId>
                        <version>1.2</version>
                        <executions>
                            <execution>
                                <id>signing</id>
                                <goals>
                                    <goal>sign</goal>
                                </goals>
                                <phase>package</phase>
                                <inherited>true</inherited>
                                <configuration>
                                    <archiveDirectory></archiveDirectory>
                                    <includes>
                                        <include>target/*.apk</include>
                                    </includes>
                                    <keystore>/path/to/debug.keystore</keystore>
                                    <storepass>android</storepass>
                                    <keypass>android</keypass>
                                    <alias>androiddebugkey</alias>
                                    <arguments>
                                        <argument>-sigalg</argument><argument>MD5withRSA</argument>
                                        <argument>-digestalg</argument><argument>SHA1</argument>
                                    </arguments>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                    <plugin>
                        <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                        <artifactId>android-maven-plugin</artifactId>
                        <inherited>true</inherited>
                        <configuration>
                            <sign>
                                <debug>false</debug>
                            </sign>
                        </configuration>
                    </plugin>
                </plugins>
            </build>
        </profile>
    </profiles>

</project> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-29T16:58:25.670

发现问题：

```
<sourceDirectory>src</sourceDirectory> 
```

`build`该部分中缺少。想知道为什么 Android 原型（运行时`archetype:generate`）还没有包含它，因为它在 Android 中是相当标准的。

# android - 无法在 AVD 管理器中创建 AVD

> ID：11264894
> 
> 赞同：0
> 
> 时间：2012-06-29T15:44:59.840
> 
> 标签：android, android-emulator

我已经在 avd 管理器中下载了 android 4.0.3 的文件，包括所有额外内容。现在，当我使用下面给出的设置创建一个新的 avd 时，只要我单击创建 avd 按钮，窗口就会在一段时间内没有响应（大约 10-20 秒），然后它开始响应.....bu什么也没有发生……当我再次点击时，同样的事情又发生了。请帮我解决这个问题。只是想告诉我，我使用的是 Windows 7 x86，它安装在 e: 驱动器中而不是 c: 驱动器中，而且我没有安装 eclipse，但它没有必要吗？.....是创建问题？我在创建新的 avd 时添加了这些细节：

```
name : avd
target: Android 4.0.3 - API Level 15
CPU/ABI : ARM (armeabi-v7a)
SdCard : Size: 4 GiB
Snapshot : Not Enabled
Skin : Built-in: Default (WVGA800) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T16:03:23.323

我测试了你的 avd 配置，我也遇到了创建模拟器的问题，它真的很慢，但最后我可以创建它。我想也许你应该安装 eclipse，可能你的 android sdk 不完整或者它缺少另一个插件。

# css - 显示 twitter bootstrap btn-group inline with text

> ID：11264897
> 
> 赞同：23
> 
> 时间：2012-06-29T15:45:08.327
> 
> 标签：css, twitter-bootstrap

**问题**

我希望能够将 btn 组用于 twitter 引导程序，并将按钮显示在某些文本的左侧。不确定这是否已经在 twitter bootstrap 中可用，或者我是否需要添加一些 css。

**是）我有的**

我目前有一个用两个按钮定义的 btn 组。然后我在按钮后面有一串文本。

```
<p>
    <div class="btn-group" data-toggle="buttons-checkbox">
        <div class="btn btn-small">BTN Text 1</div>
        <div class="btn btn-small">BTN Text 2</div>
    </div>
   String to display after buttons on same line
</p> 
```

**我试过的**

我在这里尝试了一些东西。我将`<p>`标签修改为`<div class="row">`带有两个跨度 div 的标签，一个用于按钮，一个用于文本，但这不起作用。我还尝试了以下方法：

```
<div>
    <div class="btn-group inline" data-toggle="buttons-checkbox">
        <div class="btn btn-small">BTN Text 1</div>
        <div class="btn btn-small">BTN Text 2</div>
    </div>
   <span class="inline">String to display after buttons on same line</span>
</div> 
```

并在css中定义`.inline {display:inline-block; zoom:1; *display: inline;}`但是这也不起作用。这就是我得到的。如您所见，文本显示在按钮组下方。我想要按钮组右侧的文本。

![以上给了我什么](../Images/4969d5ee640c8802147def488bf8c154.png)

**问题**

我该怎么做才能让按钮组显示在字符串的右侧？twitter bootstrap 中是否已经为此内置了一些东西，如果有的话？如果不是，我是否在创建内联类的正确轨道上，如果是这样，为什么它不起作用？

**更新**

感谢 RichardTowers 对按钮组上的 pull-left 类的建议。但是，当添加更多集（需要）时，我得到以下信息： ![向 btn-group 添加了 pull-left 类](../Images/1c5b2a5f7bcf4b52a96a4431ce598167.png)

我认为这是因为浮动。这是正确的，我将如何解决它？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-29T16:10:08.560

戴上`pull-left`按钮 div：http: [//jsfiddle.net/dbTqC/653/](http://jsfiddle.net/dbTqC/653/)

我认为这只是设置`float: left`，所以你需要清除它下面的东西。有一`clearfix`堂课。

有必要查看[一些 CSS 资源](https://developer.mozilla.org/en/CSS/float)，以便了解这里发生了什么。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-20T20:30:49.653

```
<p class="btn-toolbar">
  <span class="btn-group">
    <a href="#" class="btn">Button 1</a>
  </span>
  <span class="btn-group">
    <a class="btn" href="#">Button 2</a>
    <a class="btn" href="#">Button 3</a>
  </span>
  <span class="btn-group">Text here.</span>
</p> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-11T15:03:51.207

这有效：

```
<p>Hello <span class="btn-group">...</span></p> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-07T11:40:08.490

我按照[这个 SO answer](https://stackoverflow.com/a/12274171/540776)中的建议做了，所以基本上我从`.navbar .brand`风格开始并适应了一点。
如果有兴趣，这是我改变的风格：

```
/* See .navbar .brand style in bootstrap.css for a reference */ 
.btn-toolbar .title {
  display: block;
  float: left;
  margin-top: -4px; /* Recover part of margin set in child Header nodes */
  margin-left: 10px;
  font-size: 20px;
  font-weight: 200;
  color: #777777;
  text-shadow: 0 1px 0 #ffffff;
} 
```

HTML 用法：

```
<div class="btn-toolbar">
    <div class="btn-group pull-left">
        <a class="btn" href="#/search">Search...</a>
    </div>
    <div class="title">
        <h4>View offers</h4>
    </div>
    <div class="btn-group pull-right">
        <a class="btn" href="#/batchDelete">Delete ...</a>
        <a class="btn" href="#/new">New</a>
    </div>
</div> 
```

和最终结果：

![工具栏中的标题](../Images/0b13334473196946f668900e18d52c79.png)

# linux - Linux 上的 Qt 配置文件（qtrc）在哪里？

> ID：11264899
> 
> 赞同：0
> 
> 时间：2012-06-29T15:45:14.500
> 
> 标签：linux, qt

我没有在以下位置找到它：

```
~/.config/Trolltech
~/.qt
~/.config/Nokia 
```

我应该在哪里搜索它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T16:03:26.833

这将取决于您的系统在哪里可以找到它。你可以试试跑步`locate qtrc`。请注意，这将要找到的位置不一定是您应该进行更改的位置 - 在我的系统上，我只有一个系统范围`qtrc`的`/etc`. 对于本地更改，您应该在主目录中添加一个新的。同样，您的主目录中的特定位置将取决于您的安装（特别是您使用的是 Qt3 还是 Qt4）。

# mysql - 在更新中使用逻辑并使用尽可能少的查询返回更新的字段

> ID：11264901
> 
> 赞同：0
> 
> 时间：2012-06-29T15:45:25.527
> 
> 标签：mysql

我正在将信息保存在 mysql 数据库中的服务器上用 javascript 编写视频游戏，并且我正在尝试将我的第一个效果附加到简单的治疗药水项目上。为了实现效果，我使用 spell_id 调用了一个 spells 表，它得到一个名为 effect 的字段，其中包含要在我的服务器上执行的代码。我使用 eval() 函数来执行字符串中的代码。为了优化游戏，我想运行尽可能少的查询。对于这种情况（我认为答案将帮助我评估其他类似的效果）我想更新包含像“健康”这样的统计列的“玩家”表 然后我希望它添加 n 这将是一个递减的数字 15 然后 250 毫秒后添加 14 然后 13 直到 n = 1 净效果是健康的大幅跳跃然后越来越小如果玩家的健康达到这一目标相对容易他的最大允许限制效果将立即停止......但我想为每次增加做一个更新语句，而不是每 250 毫秒选择和更新一次，以检查 health > max_health 并确保玩家的健康没有超过他的最大生命值。所以为了离题一点，我想要一个给定这些数据的更新 max_health 并确保玩家的生命值不超过他的最大生命值。所以为了离题一点，我想要一个给定这些数据的更新 max_health 并确保玩家的生命值不超过他的最大生命值。所以为了离题一点，我想要一个给定这些数据的更新

```
player_id   health   max_health
=========   ======   ==========
1           90       100 
```

除非 (max_health-health) < 15 ... 在这种情况下它应该只增加 10，否则将增加 15 的健康。

一个更简单的解决方案可能是，如果我可以在每次更新后返回健康和最大健康 我不介意做一个最终的伪代码 if health > max_health update health set health = max health

因此，如果有人可以解释如何在更新后返回字段会有所帮助。或者，如果有人可以展示如何在更新中使用逻辑，这也会有所帮助。

另外，如果我没有提供足够的信息，我很抱歉我很乐意提供更多信息，我只是不想让这个问题难以理解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T15:50:51.177

```
update health
set health = least(max_health, health +<potion effect>)
where player_id = ... 
```

**编辑**

对于您的另一个问题：通常，我认为更新会返回受影响的行数。因此，如果您在 health 已经 = max_health 时尝试更新 health，它应该返回 0。

例如，我知道如何在 php 中执行此操作，但只是说您在哪里使用 javascript... 所以？

[http://dev.mysql.com/doc/refman/5.6/en/update.html](http://dev.mysql.com/doc/refman/5.6/en/update.html)

> UPDATE 返回实际更改的行数。mysql_info() C API 函数返回匹配和更新的行数以及 UPDATE 期间发生的警告数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T16:04:38.863

使用 ANSI 标准 CASE 函数，或 mysql only minimum 函数，如另一个答案

```
UPDATE player
SET health = CASE WHEN health + [potion] > max_health 
             THEN max_health  
             ELSE health + [potion] 
             END CASE
WHERE player_id = [player_id] 
```

# wcf - 私有 NuGet 服务器：请求实体太大

> ID：11264902
> 
> 赞同：18
> 
> 时间：2012-06-29T15:45:30.530
> 
> 标签：wcf, nuget

我们有一个内部 NuGet 服务器（使用 NuGet.Server 包的 ASP.net 应用程序），我们希望将它与 Octopus 一起使用来部署包。所以你遇到的第一件事就是包裹太大了。

当您推送大于 7 Meg 左右的包裹时，您会得到： 无法处理请求。'请求的实体太大'。远程服务器返回错误：(413) Request Entity Too Large..

根据 Octopus 上的文档，我更新了 web.config 文件以进行更改。

```
<configuration>
    <configSections>
        <sectionGroup name="elmah">
            <section name="security" requirePermission="false" type="Elmah.SecuritySectionHandler, Elmah"/>
            <section name="errorLog" requirePermission="false" type="Elmah.ErrorLogSectionHandler, Elmah"/>
            <section name="errorMail" requirePermission="false" type="Elmah.ErrorMailSectionHandler, Elmah"/>
            <section name="errorFilter" requirePermission="false" type="Elmah.ErrorFilterSectionHandler, Elmah"/>
        </sectionGroup>
    </configSections>
    <system.web>
        <compilation debug="true" targetFramework="4.0"/>
        <httpModules>
            <add name="ErrorLog" type="Elmah.ErrorLogModule, Elmah"/>
            <add name="ErrorMail" type="Elmah.ErrorMailModule, Elmah"/>
            <add name="ErrorFilter" type="Elmah.ErrorFilterModule, Elmah"/>
        </httpModules>
        <httpRuntime maxRequestLength="419430400" executionTimeout="3600"/>
    </system.web>
    <system.webServer>
        <validation validateIntegratedModeConfiguration="false"/>
        <modules runAllManagedModulesForAllRequests="true">
            <add name="ErrorLog" type="Elmah.ErrorLogModule, Elmah" preCondition="managedHandler"/>
            <add name="ErrorMail" type="Elmah.ErrorMailModule, Elmah" preCondition="managedHandler"/>
            <add name="ErrorFilter" type="Elmah.ErrorFilterModule, Elmah" preCondition="managedHandler"/>
        </modules>
        <staticContent>
            <mimeMap fileExtension=".nupkg" mimeType="application/zip"/>
        </staticContent>
        <security>
            <requestFiltering>
                <requestLimits maxAllowedContentLength="419430400"/>
            </requestFiltering>
        </security>
    </system.webServer>
    <elmah>
        <security allowRemoteAccess="false"/>
        <errorLog type="Elmah.XmlFileErrorLog, Elmah" logPath="~/App_Data"/>
    </elmah>
    <location path="elmah.axd" inheritInChildApplications="false">
        <system.web>
            <httpHandlers>
                <add verb="POST,GET,HEAD" path="elmah.axd" type="Elmah.ErrorLogPageFactory, Elmah"/>
            </httpHandlers>
        </system.web>
        <system.webServer>
            <handlers>
                <add name="ELMAH" verb="POST,GET,HEAD" path="elmah.axd" type="Elmah.ErrorLogPageFactory, Elmah" preCondition="integratedMode"/>
            </handlers>
        </system.webServer>
    </location>
    <appSettings>
        <add key="apiKey" value="KeyHere"/>
        <add key="packagesPath" value=""/>
    </appSettings>
    <system.serviceModel>
        <serviceHostingEnvironment aspNetCompatibilityEnabled="true"/>
    </system.serviceModel>
</configuration> 
```

那是行不通的。其他帖子谈论运行类似（IIS7）的东西：appcmd.exe set config -section:system.webServer/serverRuntime /uploadReadAheadSize:"419430400" /commit:apphost

或 (IIS6)：cscript adsutil.vbs 设置 w3svc/1/uploadreadaheadsize 419430400

我两个都试了都无济于事。两个命令都没有返回错误，所以我假设值 '419430400' 对于所有调用都是正确的（字节与其他一些大小单位）。

有人知道我错过了什么吗？

我最终只是将包复制到 Web 服务器上的共享中，但我真的希望 push 命令能够正常工作。

谢谢。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-07-23T14:36:06.470

不完全回答 OP 的问题，但与主题相关，我`(413) Request Entity Too Large`在使用`NuGet push`推送到本地 SymbolSource 服务器时遇到错误 - 原来我提交到一个稍微不正确的 URL，一旦我更正了指​​向基本`/NuGet/`URL的命令，它运行得很好。

不知道为什么不正确的 URL 会导致 413 错误，但是你去吧。希望这可以帮助某人。

编辑：根据下面的评论，您可能更幸运只是引用基本`http://www.myserver.com/`URL 而不是包括 /NuGet。值得玩一下。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-02-12T11:47:10.677

我知道这是一个老问题，但今天我遇到了同样的错误。值得注意的是，我正在使用`TeamCity`包构建和发布。无论如何，当我尝试使用`Publish`我的大包（大约 200 MB）时，我被阻止了。解决方案很简单：

而不是发布到`http://mynugetserver/api/v2/`，**使用：** `http://mynugetserver/`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-20T07:14:03.667

您必须将这些人设置为更高的值：

*   system.web - httpRuntime - maxRequestLength 到，比如说，1048576
*   system.webserver - 安全 - requestFiltering - requestLimits - maxAllowedContentLength to，比如说 1073741824

这两个值的单位不同，因此第二个值应大于第一个值。

另外，请查看 www.myget.org，我在使用 Octopus Deploy 时发现它很棒。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-31T17:24:50.110

检查您的`serverRuntime`配置。

`maxRequestEntityAllowed`和`uploadReadAheadSize`属性分别配置请求的实体正文中允许的最大字节数以及 Web 服务器将读取到缓冲区并传递给 ISAPI 扩展的字节数的限制。

更多细节：[http ://www.iis.net/configreference/system.webserver/serverruntime](http://www.iis.net/configreference/system.webserver/serverruntime)

我的猜测是您正在使用`SSL`和设置`uploadReadAheadSize`将解决问题。因为在客户端重新协商过程中，请求实体主体必须使用 SSL preload 进行预加载。SSL 预加载将使用`uploadReadAheadSize`用于 ISAPI 扩展的属性值。

**这是默认值**

```
<location path="Default Web Site"> 
   <system.webServer> 
      <serverRuntime enabled="true" 
         uploadReadAheadSize="49152" 
         maxRequestEntityAllowed="4294967295" /> 
   </system.webServer> 
</location> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-02-25T00:47:56.583

基于[@Keith](https://stackoverflow.com/a/17813278/26167)和[@Nubigetter](https://stackoverflow.com/a/28901575/26167)的回答，我做了一些进一步的研究，因为这种行为对我来说真的很奇怪。

答案实际上在 Nuget.Server 的[文档](https://docs.nuget.org/create/hosting-your-own-nuget-feeds#step-5:-deploy-and-run-your-brand-new-package-feed!)中（如果你*仔细*看的话），只是不是很明显：

*   使用[http://mynugetserver/nuget](http://mynugetserver/nuget)进行列表/恢复
*   使用[http://mynugetserver/](http://mynugetserver/)进行推送

我在[https://github.com/NuGet/NuGetGallery/issues/2903](https://github.com/NuGet/NuGetGallery/issues/2903)向 Nuget 团队提出了这个问题，因为我认为这种行为是“提供改进的机会”。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-22T08:37:03.740

我遇到过同样的问题：

```
[Step 1/2] Publishing package to feed at http://localhost/OctopusDeploy/nuget/packages...
[Step 1/2] Failed to push to package feed at 'http://localhost/OctopusDeploy/nuget/packages/'. 
[Step 1/2] (The server responded with: [413] Request Entity Too Large)
[Step 1/2] Process exited with code 1 
```

但那是因为 Octopus Deploy 服务停止了！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-08-13T09:22:46.587

这是由于 nginx 的限制，Linux 系统中的 nuget 服务器使用 nginx 作为代理，配置文件位于：

```
/etc/nginx/conf.d/nuget.conf

server_name localhost;
root /var/www/public/;
client_max_body_size 200M; 
```

更改 client_max_body_size 200M 对我有用。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2015-03-06T15:04:38.800

对我有用的是这篇文章：

[http://blogs.blackmarble.co.uk/blogs/rfennell/post/2012/10/31/403-and-413-errors-when-publishing-to-a-local-Nuget-Server.aspx](http://blogs.blackmarble.co.uk/blogs/rfennell/post/2012/10/31/403-and-413-errors-when-publishing-to-a-local-Nuget-Server.aspx)

“重要提示：第​​二个错误是一个红鲱鱼，您不需要 URL 末尾的 /nuget”

# jasper-reports - 表达式和内联样式时使用打印的粗体字体

> ID：11264908
> 
> 赞同：0
> 
> 时间：2012-06-29T15:45:50.547
> 
> 标签：jasper-reports, ireport

我目前有一个`PrintWhenExpression`正在尝试使用这样的 if/else 语句：

`$F{group_description} == "Total Accounts Opened:" ? $F{group_description}.text.setStyle(boldStyle) : $F{group_description}`

唯一的问题是它不起作用。我想在 $F{group_description} 等于“开户总数：”时加粗，否则不要加粗。

加粗字体的正确内联样式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T17:07:32.130

我通常为这样的事情设置条件样式。在 iReport 的 Report Inspector 中，您必须创建一个基本样式（但您不需要对其应用任何元素），然后右键单击该样式并选择“添加条件样式”。在该样式的条件表达式中，您可以输入 $F{group_description} == "Total Accounts Opened:"，然后选中该框使其变为粗体。

# z3 - 在 C# 中运行存在量词和定点 Z3 时出现错误

> ID：11264914
> 
> 赞同：1
> 
> 时间：2012-06-29T15:46:07.683
> 
> 标签：z3, z3-fixedpoint

我尝试在定点中使用 ctx.mkExist ，但是出现错误说“**包含递归谓词**”，我不知道为什么？以及如何在定点中使用 ctx.MkExists？例如：存在 (lamda real) that lamb>=0 AND inv(c,i) AND phi(c+lamb,i) => phi(c，i)

```
 using (Context ctx = new Context())
        {
            var s = ctx.MkFixedpoint();

            IntSort B = ctx.IntSort;
            BoolSort T = ctx.BoolSort;
            RealSort R = ctx.RealSort;

            FuncDecl phi = ctx.MkFuncDecl("phi", new Sort[] { R,B }, T);
            s.RegisterRelation(phi);
            FuncDecl Inv = ctx.MkFuncDecl("inv", new Sort[] { R, B }, T);
            s.RegisterRelation(Inv);

            RealExpr c= (RealExpr)ctx.MkBound(0, R);
            IntExpr i = (IntExpr) ctx.MkBound(1, B);

            Expr[] InvArg=new Expr[2];
            InvArg[0] = ctx.MkConst("inv0" , Inv.Domain[0]);
            InvArg[1] = ctx.MkConst("inv1", Inv.Domain[1]);

            Expr invExpr = ctx.MkImplies(ctx.MkOr(
                 ctx.MkAnd(ctx.MkEq(InvArg[1], ctx.MkInt(0)), ctx.MkGe((RealExpr)InvArg[0], ctx.MkReal(0))),
                 ctx.MkAnd(ctx.MkEq(InvArg[1], ctx.MkInt(1)), ctx.MkGe((RealExpr)InvArg[0], ctx.MkReal(2)))
                 ),
              (BoolExpr)Inv[InvArg]);
            Quantifier invQ = ctx.MkForall(InvArg, invExpr, 1);
            s.AddRule(invQ);

            RealExpr[] lamb = new RealExpr[1];
            lamb[0] = ctx.MkRealConst("lamb");
            Expr existExpr = ctx.MkAnd(
                (BoolExpr)Inv[c,i],
                (BoolExpr)phi[ctx.MkAdd(c,lamb[0]),i],
                ctx.MkGe(lamb[0], ctx.MkReal(0)));
            BoolExpr t= ctx.MkExists(lamb, existExpr, 1);
            s.AddRule(ctx.MkImplies(t,(BoolExpr)phi[c,i]));
        } 
```

有时，会出现错误提示“ **AccessViolationException** was unhandlered,Attempted to read or write protected memory. 这通常表明其他内存已损坏。” 当运行到 ctx.MkExists()

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T14:53:29.137

定点求解器仅支持顶层的通用量词。你应该重写规则如下：

```
 s.AddRule(ctx.MkForall(lamb, 
          ctx.MkImplies((BoolExpr)existExpr,(BoolExpr)phi[c,i]))); 
```

理想情况下，Z3 不应导致任何访问冲突。这通常表明存在错误。当/如果您遇到此类错误时，我将非常感谢您的重现。

# ember.js - Ember.Select 和 Ember.Router

> ID：11264915
> 
> 赞同：0
> 
> 时间：2012-06-29T15:46:08.463
> 
> 标签：ember.js

我正在玩*Ember.Router*。在浏览了 Kasper Tidemann 的优秀示例[canonical-emberjs-routing-example](https://github.com/KasperTidemann/canonical-emberjs-routing-example)之后，我想我基本上明白了。

但是我想知道如何最好地将它与*Ember.Select*结合起来。
用例：我希望用户能够从下拉列表中选择模块，然后路由到正确的模块。

重新打开*Ember.Select*并覆盖*valueDidChange*怎么样？有更好的方法吗？

```
Em.Select.reopen({
  valueDidChange: Ember.observer(function() {
    this._super();
    console.log('selection changed');
    App.router.transitionTo(this.get('value'))
  }, 'value')
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:41:16.320

在我的评论中：

> 如果您重新打开 Em.Select，您将把您的更改应用到您的 Ember 应用程序中的所有 Select 控件。您可能想要创建一个扩展 Ember.Select 的视图，然后覆盖 valueDidChange 方法

我的意思与此*类似*

```
var RoutableSelect = Ember.Select.extend({
    valueDidChange: Ember.observer(function() {
        this._super();
        App.router.transitionTo(this.get('value'))
    }, 'value');
}); 
```

这样，您就不会覆盖`Ember.Select`应用程序其余部分的原始功能。现在您可以使用`RoutableSelect`您希望此功能退出的特定视图。

# javascript - 我想在不重新加载页面的情况下从数据库中的 div 中显示我的数据。我怎么能做到这一点？

> ID：11264916
> 
> 赞同：0
> 
> 时间：2012-06-29T15:46:09.573
> 
> 标签：javascript, asp.net

我使用 div 标签作为数据容器，当用户单击链接时，页面上会显示链接列表页。我正在使用 asp.net C# 目前我正在使用 diff-2 div 标签中的链接点击显示数据，并且全部使用

```
 divid.InnerHtml=""; 
```

在后面的代码中，但现在我想使用将在单击链接时出现的单个 div，并且我想从数据库加载内容以加载到与单击的链接相对应的 div 中。

```
 <div id="popUpDiv"  runat="server"
        style="
            display:none;
            position:fixed;
            top:20%;
            left:20%;
            right:20%;
            min-width:60%;
            min-height:60%;
            background-color:Gray;
    z-index: 10002;">
         My popup box
         </div> 
```

这是目前显示 div 的按钮

```
<asp:Button ID="btnPopUp" OnClientClick="togglePopUp('popUpDiv'); return false;"
             text="Pop Up a div box" runat="server" /> 
```

这是 C# 代码

```
while (dr.Read())
            {
                sr = sr + "<table border=\"0px\" ><tr valign=\"top\"><td align=\"left\" valign=\"top\"><a href=\"About.aspx\">" + dr.GetString(2) + "</a></td></tr><tr><td align=\"left\">"+"<img alt=\"\" src=\"Container/Images/aus.jpg\" />"+"</td></tr><tr valign=\"top\" ><td style=\"text-align:Justify;\" valign=\"top\">" + dr.GetString(3) + "</td></tr></table>";
            }
            con.Close();
            dr.Close();
            popUpDiv.InnerHtml = sr; 
```

这是我显示 div 的 javascript

```
 <script type="text/javascript" language="javascript">
    function togglePopUp(div_id) {
        var el = document.getElementById(div_id);
        if (el.style.display == 'block') { el.style.display = 'none'; }
        else { el.style.display = 'block'; }
    }
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T16:59:14.053

此解决方案使用 ajax 和结束请求处理程序来显示 div，将其添加到您的 aspx 页面。

```
<asp:ScriptManager ID="ScriptManager1" runat="server">
</asp:ScriptManager>
<script type="text/javascript" language="javascript"> 
 Sys.WebForms.PageRequestManager.getInstance().add_endRequest(endRequestHandle);
 function endRequestHandle(sender, Args) {
        if (pbControl.name.toString() == "btnPopUp") {
        var el = document.getElementById(div_id);
        if (el.style.display == 'block') { el.style.display = 'none'; }
        else { el.style.display = 'block'; }                  
        }
</script>
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
 <ContentTemplate>
  <asp:Button ID="btnPopUp" text="Pop Up a div box" runat="server" />
 </ContentTemplate>
</asp:UpdatePanel> 
```

代码隐藏：

```
while (dr.Read())
 {
   sr = sr + "<table border=\"0px\" ><tr valign=\"top\"><td align=\"left\" valign=\"top\"><a href=\"About.aspx\">" + dr.GetString(2) + "</a></td></tr><tr><td align=\"left\">"+"<img alt=\"\" src=\"Container/Images/aus.jpg\" />"+"</td></tr><tr valign=\"top\" ><td style=\"text-align:Justify;\" valign=\"top\">" + dr.GetString(3) + "</td></tr></table>";
 }
con.Close();
dr.Close();
popUpDiv.InnerHtml = sr; 
```

# python - 如何在网站上嵌入 Python 解释器

> ID：11264918
> 
> 赞同：17
> 
> 时间：2012-06-29T15:46:16.337
> 
> 标签：python, web-applications, interpreter

我正在尝试建立一个类似于[Codecademy](http://www.codecademy.com)的教育编码网站，但坦率地说，我不知道应该采取哪些步骤。在 webapp 中包含一个简单的 python 解释器时，我是否可以指出正确的方向？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-29T16:12:46.853

一种选择可能是使用 PyPy 创建沙盒 python。这将限制某人可以进行的外部操作。

设置完成后，您的网站将获取代码源，通过 ajax 将其发送到您的网络服务器，然后服务器将在沙盒 python 实例的子进程中运行代码。如果它花费的时间超过 5 秒，您也可以终止该进程。然后将输出作为对客户端的响应返回。

有关 PyPy 沙箱的帮助，请参阅以下链接：http:
[//doc.pypy.org/en/latest/sandbox.html](http://doc.pypy.org/en/latest/sandbox.html)
[http://readevalprint.com/blog/python-sandbox-with-pypy.html](http://readevalprint.com/blog/python-sandbox-with-pypy.html)

创建一个完全交互式的 REPL 将更加复杂。您需要为服务器上的每个客户端保持一个解释器。然后接受输入的ajax“行”并通过与正在运行的进程通信通过interp运行它们，并返回输出。

总的来说，不是小事。你需要一些强大的开发技能才能轻松地做到这一点。如果您只是在学习，您可能会发现这项任务有点令人生畏。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-29T15:54:00.347

在这里要做的事情比你想象的要多。

主要问题是您*不能*让人们在您的网络服务器上运行任意 Python 代码。例如，如果他们这样做会发生什么

```
import os
os.system("rm -rf *.*") 
```

很明显，你必须安全地运行这个 Python 代码。但是你遇到*了*保护 Python 的问题，这基本上是不可能的，因为它是动态的。因此，您可能不得不在虚拟机中运行 Python shell，这也带来了一些麻烦。

* * *

你见过例如[http://code.google.com/p/google-app-engine-samples/downloads/detail?name=shell_20091112.tar.gz&can=2&q=](http://code.google.com/p/google-app-engine-samples/downloads/detail?name=shell_20091112.tar.gz&can=2&q=)吗？

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-02-24T11:24:17.250

最近的一个选项是使用[repl](http://repl.it/languages)。

这个选项很棒，因为编译器**是使用 JavaScript 制作**的，所以**编译**和**执行**是在**用户端**进行的，这意味着服务器没有漏洞。

他们有以下编译器：*Python3、Python、Javascript、Java、Ruby、PHP* ...

我强烈建议您查看他们的网站[http://repl.it](http://repl.it)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-04T16:22:10.003

查看 LXC 容器。他们有一个很酷的 api，你可以用它来创建轻量级的 linux 容器。您可以在该容器内运行子进程命令，这样最终用户就不会弄乱您的主服务器。

# php - Mage 注册表项“original_include_path”已存在

> ID：11264921
> 
> 赞同：1
> 
> 时间：2012-06-29T15:46:33.303
> 
> 标签：php, magento, mage

我的 magento 1.3 站点出现错误。每当我尝试添加或复制产品时，我都会收到以下错误消息（Mage 注册表项“original_include_path”已存在）。这个问题是在我解决了我们网站的问题后开始的赢得了%E2%80%99t-run-on-php-5-3/)。我试图通过调用 mage.php 上的 unregister 函数来手动取消注册此密钥。但是，当我尝试这样做时出现以下错误：“致命错误：无法在第 61 行的 /home/pipesand/public_html/app/Mage.php 中重新声明类 Mage”

谢谢，

# python - 在 Python 中定义方法别名？

> ID：11264923
> 
> 赞同：21
> 
> 时间：2012-06-29T15:46:46.593
> 
> 标签：python, class, operator-overloading, overriding, operator-keyword

我有一个向量类，我定义了`__mul__`将向量乘以数字的方法。

这是`__mul__`方法：

```
def __mul__(self, other):
    x = self.x * other
    y = self.y * other
    new = Vector()
    new.set_pos((x, y))
    return new 
```

我的问题是我不知道数字和向量之间哪个是哪个。如果 self 是数字，self.x 会引发错误。（我可能在这一点上弄错了：“其他”总是一个数字吗？）

所以我在这里找到：[Python：我可以做的乘法覆盖](https://stackoverflow.com/questions/6892616/python-multiplication-override) ：

```
__rmul__ = __mul__ 
```

但我怎么能在类定义中做到这一点？

就像是 ：

```
def __rmul__ = __mul__ 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-29T15:54:08.520

`self`永远不会是数字，`__mul__()`因为方法所附加的对象不是数字，而是向量，根据定义，它是被乘数。

`other`如果您的对象被一个数字相乘，它将是一个数字。或者它可能是其他东西，例如另一个你可以测试和处理的向量。

当您的对象是乘数时，`__rmul__()`如果被乘数不知道如何处理操作，则会调用该对象。

要处理 which`__mul__`和`__rmul__`should 是相同方法的情况，因为操作是可交换的，您只需在类定义中进行赋值即可。

```
class Vector(object):
    def __mul__(self, other):
        pass

    __rmul__ = __mul__ 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-29T15:49:00.223

只需将其列为属性：

```
__rmul__ = __mul__ 
```

这与在模块中创建函数别名的方式相同；在类体内创建方法的别名也是如此。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-29T15:50:30.613

关键是在 Python 中，您可以告诉对象如何将自己与事物相乘。这意味着

```
a * b 
```

可能意味着“告诉`a`自己乘以`b`”或“告诉`b`自己乘以`a`”。在代码中，这转化为

```
a.__mul__(b) 
```

或者

```
b.__rmul__(a) 
```

# javascript - 无法删除 IE9 中的默认工具提示

> ID：11264933
> 
> 赞同：0
> 
> 时间：2012-06-29T15:47:29.387
> 
> 标签：javascript, jquery, internet-explorer-9, tooltip, title

我想使用基于“标题”属性的自定义工具提示，并尝试删除默认行为。它在 Firefox bot 中运行良好，在 IE9 中不起作用。

我正在做这样的事情：

```
 $(element).on('mouseover mouseout', '[title], [tipText]', function (e) {
                e.stopPropagation();
                e.preventDefault();
                if (e.type == 'mouseover') {
                        var org_elem = $(e.currentTarget);
                        var tipText = org_elem.attr('title');
                        org_elem.attr('tipText', tipText);
                        org_elem.removeAttr('title');
//then I create custom tooltip which based on tipText attribute
.... 
```

当我在 IE9 中第一次在元素上移动鼠标时，会显示两个工具提示（默认和自定义）。所有其他时间仅显示自定义工具提示。

那么如何防止IE9中的默认工具提示呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T15:49:53.650

你试过让它空着吗？

```
org_elem.attr("title", ""); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-29T16:12:11.680

请改用 JQuery[数据](http://api.jquery.com/data/)属性和方法。这就是它的用途。

代替：

 ~~~~```
var tipText = org_elem.attr('title'); 
```~~ 

~~它会是这样的：~~

 ~~```
var tipText = org_elem.data('title'); 
```

您的 HTML 将是：

```
<div data-title="text information that would show up on a tooltip"><div> 
```

代替：

 ~~~~```
<div title="text information that would show up on a tooltip"><div> 
```~~ 

~~您实际上不需要额外的 tipText 属性。~~~~~~~~

# drupal - drupal - jQuery，无法通过 jQuery 选择任何元素

> ID：11264934
> 
> 赞同：0
> 
> 时间：2012-06-29T15:47:35.590
> 
> 标签：drupal, drupal-modules

我有一个表单，我通过 drupal_add_js() 在模块的初始化代码中添加了一个 js 文件。

我看到了第一条调试消息，但我似乎无法从文档中选择任何项目。我只是得到返回的 jQuery 对象。

但是当我将同一行添加到萤火虫中时，它可以工作。

```
console.log('called => init()');
console.log(jQuery('#quiz-form').find('#edit-next')); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T18:04:44.170

如果您尝试从表单元素中检索值，请尝试：

```
console.log(jQuery('#quiz-form').find('#edit-next').val()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T10:35:26.880

将 jQuery 对象作为返回是非常好的，因为像`find`实际返回 jQuery 对象这样的方法。您应该检查作为 return ie 获得的 jQuery 对象的长度`console.log(jQuery('#quiz-form').find('#edit-next').length);`。如果长度为零，那么当然找不到元素。在这种情况下，您应该确保在 DOM 准备好之后调用您的 JS 代码，即您应该使用 Drupal 行为包装您的代码`jQuery(document).ready`或使用 Drupal 行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T15:51:11.527

我偶然发现了它。jQuery 对象试图在页面初始化之前找到选定的对象。

我在想初始化模块中的 drupal_add_js 就足够了。

但是我还必须将 jquery 代码包装在 Dom Ready 函数中......正如我们一直应该做的那样。

# .net - 登录用户的 WMI 查询的奇怪结果

> ID：11264946
> 
> 赞同：1
> 
> 时间：2012-06-29T15:48:23.707
> 
> 标签：.net, powershell, wmi

全部！

我正在尝试执行一个非常常见的 WMI 查询来获取登录到任何给定机器的用户列表。如下所示（使用 Powershell 代码）：

```
 $wmi_result = Get-WmiObject -Query "SELECT LogonId FROM Win32_LogonSession WHERE LogonType=2" 
 foreach ($obj in $wmi_result) {
      $id = $obj.LogonId
      $user_list = Get-WmiObject -Query "ASSOCIATORS OF {Win32_LogonSession.LogonId=$id} WHERE AssocClass=Win32_LoggedOnUser Role=Dependent" | Select Name
 } 
```

这在我的本地机器上运行良好，但在远程机器上什么也没有。但是，如果我手动解析关联类的 Dependent 属性，我可以很容易地获得这些信息，如下所示：

```
 $wmi_result = Get-WmiObject -Query "SELECT LogonId FROM Win32_LogonSession WHERE LogonType=2" -ComputerName <computer>
 foreach ($obj in $wmi_result) {
      $id = $obj.LogonId
      $user_list = Get-WmiObject -Query "SELECT * FROM Win32_LoggedOnUser" | where {$_.Dependent -match $id} -ComputerName <computer>
      foreach ($path in $user_list) {
            $user = ([wmi]$path).name
      }
 } 
```

我尝试更改 WMI 连接的模拟和身份验证级别，但无济于事。在 WbemTest 中运行此查询也不会显示任何结果或错误。最后，无论我是直接使用 PowerShell 还是 System.Management，我都会得到相同的结果。当然，谷歌在这里让我失望了。

谁能给我一些关于下一步我应该尝试什么的指示？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T13:01:19.463

我做过很多这样的事情，我所做的就是制作一个在远程盒子上运行代码的函数，试试看。只需更改计算机名称、用户名和密码。

```
function remote-pscode ($ServerName,$UserName,$password,$PSCode)
{

# Set the user name you would like to use for the connection
$global:RemoteUserName = $UserName
$global:RemoteServerName = $ServerName
$global:RemoteCode = $PSCode

# Set the password you would like to use for the connection
# Check to see if you have a file on you drive c:\cred.txt with a password to use in it,if you don't it will create one
# for you and ask you for the password you would like to use 

$global:RemotePassword = convertto-securestring $password -AsPlainText -Force
$global:credentials = new-object -typename System.Management.Automation.PSCredential -argumentlist $RemoteUserName,$RemotePassword

#Create a connection to the remote computer , put a list of IPAddresses or Computer Names.
$global:session = new-PSSession -ComputerName $RemoteServerName -Credential $credentials

$ScriptBlock = $executioncontext.invokecommand.NewScriptBlock($RemoteCode)

invoke-command -Session $session -ScriptBlock $ScriptBlock

#Close the sessions that where created     
$global:closesession = Get-PSSession
Remove-PSSession -Session $closesession

$t = ($wmi_result = Get-WmiObject -Query "SELECT LogonId FROM Win32_LogonSession WHERE LogonType=2" 
 foreach ($obj in $wmi_result) 
 {$id = $obj.LogonId
  $user_list = Get-WmiObject -Query "ASSOCIATORS OF {Win32_LogonSession.LogonId=$id} WHERE AssocClass=Win32_LoggedOnUser Role=Dependent" | Select Name
 })

remote-pscode -ServerName "testserver" -UserName "testserver\testuser" -password "testpassword" -PSCode "$t" 
```

# ajax - 带有 Ajax 和 Codeigniter 的子类别

> ID：11264953
> 
> 赞同：0
> 
> 时间：2012-06-29T15:48:52.063
> 
> 标签：ajax, codeigniter

我有带有类别的选择框，我想使用 ajax 和 CodeIgniter 在另一个选择框中显示子类别。

这是我观点的一部分：

```
<script type="text/javascript">
$(document).ready(function(){

    $('#tip_category').change(function(){
        msg = 'category_id='+$(this).val();
            $.ajax({
                type : 'POST',
                url : '<?php echo base_url().'admin/tips/ajax_subcategory';?>',
                data : msg

    });
    });    
});

</script>

Category:<br/>
<select name="tip_category" id="tip_category">
    <?php foreach($categories as $category): ?>
        <option value="<?php echo $category['id'] ?>"><?php echo $category['name'] ?>
        </option>    
    <?php endforeach; ?>
</select><br/>

Subcategory:<br/>
<select name="tip_subcategory"
    <?php if(isset($subcategories)): ?>
        <?php foreach($subcategories as $subcategory): ?>
            <option value="<?php echo $subcategory['id'] ?>"><?php echo $subcategory['name'] ?>
            </option>    
        <?php endforeach; ?>
    <?php endif; ?>
</select><br/> 
```

这是我的控制器的一部分：

```
public function ajax_subcategory() {
    $this->load->model('tips_model');
    $data['subcategories'] = $this->tips_model->get_subcategories($this->input->post('category_id'));     
} 
```

我的问题是我不知道如何将数据 ($data['subcategories']) 发送回查看和显示子类别。谢谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T15:54:48.930

我认为您只是错过了退货（以您需要的任何格式）：

> 返回$数据；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T16:49:45.183

您可以将控制器修改为：

```
public function ajax_subcategory() {
    $this->load->model('tips_model');
    $data['subcategories'] = $this->tips_model->get_subcategories($this->input->post('category_id'));
    return $this->output->set_output($data);     
} 
```

# javascript - 将模式与输入字段的最大长度相结合

> ID：11264954
> 
> 赞同：2
> 
> 时间：2012-06-29T15:48:53.813
> 
> 标签：javascript, html, regex, jquery-mobile

是否可以在 jquerymobile 的输入字段上将模式属性与 maxlength 属性结合起来？

```
<input name="aNumber" type="number" pattern="[0-9]{6}" maxlength="6" placeholder="dddddd" value="">
<input name="anotherNumber" type="number" pattern="[0-9]{3,4}" maxlength="4" placeholder="ddd(d)" value=""> 
```

我希望出现大数字键盘，但只能使用`pattern="[0-9]*"`. 不幸的是，在任何情况下都不尊重 maxlength 属性。

我想要的是出现一个数字键盘（大的一个/拨号；iPhone 显然有两个：只有数字/拨号和带有特殊字符的数字）让用户输入多达 6 个或 3 到 4 个数字字符。

* * *

编辑：应用了@raina77ow 的建议，目前可行，但仍然感觉不对，所以我愿意接受建议！

```
<input name="aNumber" type="tel" pattern="[0-9]*" maxlength="6" placeholder="dddddd" value=""> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-07T07:38:18.657

{6} 表示正好 6 位 {0,6} 表示最少 0 位，最多 6 位

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-19T11:52:05.280

type="tel" 模式="{X,6}" maxlength="6"

如果您想将输入限制为严格的数字（如数学数字而不是电话号码），请使用：

模式="[0-9]{X,6}"

其中 x 是 0 到 6 之间的整数，将为您提供 X 的最小值和 6 位的最大值作为输入。

如果以这种方式键入模式，则仅对于不支持模式属性的浏览器才需要 maxlength，我会保留它。

# php - 在PHP中搜索数据库从单列到全部

> ID：11264955
> 
> 赞同：1
> 
> 时间：2012-06-29T15:48:56.587
> 
> 标签：php, mysql

好的，我对此很陌生，但这就是我需要的。我有一个代码将搜索特定列并返回我搜索的内容，但是如何修复此代码以搜索我的数据库中的任何内容并显示相应的行信息。

```
<?php
//PHP CODE STARTS HERE

if(isset($_GET['submit'])){

    // Change the fields below as per the requirements
    $db_host="localhost";
    $db_username="megan";
    $db_password="megan";
    $db_name="megan";
    $db_tb_name="user";
    $db_tb_atr_name="location";

    mysql_connect("$db_host","$db_username","$db_password");
    mysql_select_db("$db_name");

    $query=mysql_real_escape_string($_GET['query']);

    $query_for_result=mysql_query("SELECT * FROM $db_tb_name WHERE 
    $db_tb_atr_name like '%".$query."%'");

    echo "<h2>Search Results</h2><ol>";
    while ($data_fetch=mysql_fetch_array($query_for_result))
    {
        echo "<li>";
        echo substr($data_fetch[$db_tb_atr_name], 0,160);
        echo "</li><hr/>";
    }
    echo "</ol>";

    mysql_close();
}
?> 
```

这就是我所拥有的。如您所见，它当前在位置列中搜索信息。但我希望能够在任何列中搜索任何单词。目前，它将显示该关键字出现的次数，但不显示其余的行信息。我希望这是有道理的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T15:58:35.213

看看这个[SQLFiddle 演示](http://sqlfiddle.com/#!2/d2d56/1)。

据我所知，您可以获得的最接近的方法是 CONCAT'ing 您的所有列，并进行类似操作。

```
SELECT * FROM Test WHERE CONCAT(cola,colb,colc,cold) LIKE '%keyword%' 
```

# javascript - Javascript函数难度

> ID：11264958
> 
> 赞同：0
> 
> 时间：2012-06-29T15:49:00.490
> 
> 标签：javascript, function, input

我是 Javascript 新手，遇到了一些困难。我想让用户输入一个单词并有一个函数识别该单词并将其打印回同一页面上的用户。每次我运行此代码时，它都会将我带到不同的页面并打印“[object]”。这是我的代码。有人可以帮帮我吗。

健康长寿·繁荣昌盛。

```
<html>
<head>
<script src="raphael-min.js"></script>
<script src="jquery-1.7.2.js"></script>

<script type="text/javascript">
function animate() {
var txt = document.getElementById("words");
document.write(txt);
}
</script>
</head>
<body>

Text: <input type="text" id="words" value="" />
<input type="submit" value="Animate" onclick="animate()" />

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T15:53:15.777

将 div 添加到您的页面

`<div id='msg'></div>`

并将您的 js 函数更改为

```
 <script type="text/javascript">
    function animate() {
    var txt = document.getElementById("words").value;
    document.getElementById("msg").innerHTML = txt;
    return false;
    }
    </script> 
```

还要对您的提交按钮进行以下更改

```
<input type="submit" value="Animate" onclick="return animate()" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T15:51:50.990

这段代码：

```
var txt = document.getElementById("words"); 
```

给你一个`input`, 即 DOM 对象（`[object]`当变成字符串时由它表示）。而你想检索它的内容，即价值。试试这个：

```
var txt = document.getElementById("words").value; 
```

刷新是由提交按钮引起的。将其类型更改为`type="button"`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T15:53:01.450

代替

```
 function animate() {
       var txt = document.getElementById("words");
       document.write(txt);
   } 
```

尝试

```
 function animate() {
       var txt = document.getElementById("words").value;
       document.write(txt);
   } 
```

# objective-c - 在不同的类中释放/访问同名的不同对象

> ID：11264963
> 
> 赞同：2
> 
> 时间：2012-06-29T15:49:07.730
> 
> 标签：objective-c, ios, uitableview

我是objective-c的新手（以及苹果的所有东西，就此而言）。

我正在设计一个 iOS 应用程序并遇到了一个对我来说似乎很有趣的错误。基本上，我从一个 VC (LoginViewController) 开始，在此过程中我会将另一个 VC 推送到我的导航控制器 (MyProfileViewController) 上。

但是当我通过堆栈返回 LoginViewController 时，触摸屏幕上的任何对象都会导致`EXEC_BAD_ACCESS`错误。经过一番摸索，我决定更改视图中的表名（我的两个 ViewController 都包含一个`UITableView`，在它们各自的 .m 文件中定义，并且我将这两个都命名为“myTable”）。

事实证明，对于我的应用程序，除了导致可读性差（您不必在这一点上责备我）之外，将两个表命名为相同是导致崩溃的原因。所以我猜想当 MyProfileViewController 被释放时，它也从 LoginViewController 中释放了“myTable”？？？

对于正常的错误，我意识到我的错误，尝试从中吸取教训，然后继续前进。但这对我来说没有意义，为什么它首先会造成崩溃。有什么见解吗？作为参考，这是我在两个 ViewController 中定义和发布 UITableView 的方式。

```
@implementation MyProfileViewController//same format as LoginViewController

UITableView* myTable;//It's since been renamed to something more descriptive

//code...

-(void)viewDidLoad{
    [super viewDidLoad];
    myTable = [[UITableView alloc] initWithFrame:CGRectMake(0, 0, 320, 460) style:UITableViewStyleGrouped];
    [myUpdateTable setDataSource:self];
    [myTable setDelegate:self];
    [self.view addSubview:myTable];
}

//code...

-(void)dealloc{
    [myTable release];
    [super dealloc];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T16:41:02.523

首先，我是否正确阅读了您的代码，您的代码`UITableView`中没有定义`@interface`？如果是这样，则您已定义`myTable`为全局变量。这不是一个好主意，虽然我很惊讶如果您在两个 .m 文件中使用相同的全局变量，链接器没有抱怨（但它肯定会解释为什么使用相同的名称会导致问题）。你真的希望你`UITableView`成为一个实例变量。您可以在 .m 文件的顶部定义私有实例变量，如下所示（将其放在 .m 之前`@implementation`）：

```
@interface MyProfileViewController ()
{
    UITableView* _myTable;
}
@end 
```

如果你这样做，那么一个类中的实例变量的名称是否恰好与另一个类中的相同并不重要。类实例变量的范围仅限于该类。（顺便说一句，作为一种风格，许多人在他们的类实例变量前加上下划线，通常是为了将它们与类属性和局部变量区分开来。）

第二个（与您最初的问题无关），我建议发布 in `viewDidLoad`，因此：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    _myTable = [[UITableView alloc] initWithFrame:CGRectMake(0, 0, 320, 460) style:UITableViewStyleGrouped];
    [_myTable setDataSource:self];
    [_myTable setDelegate:self];
    [self.view addSubview:_myTable];
    [_myTable release];
} 
```

（而且，显然，`release`从您的 . 中删除该声明`dealloc`。）

没有理由推迟`release`：当您分配/初始化时，它的保留计数为 +1，当您`addSubview`的保留计数为 +2 时，当您释放时，您只需将释放计数返回到 +1（意思是它不会因为`self.view`保留它而被释放，但是当视图最终释放它时，您的 tableview 将自动为您释放）。但是，有充分的理由*不*推迟它（如果你`didReceiveMemoryWarning`在推送到新的视图控制器后得到一个，你的原始代码将会泄漏）。

如果您使用 ARC，通常会为您清理这种愚蠢的内存管理问题，但鉴于您没有使用 ARC，您可能需要调整释放位置。

# ruby-on-rails - Rails：以编程方式获取验证范围

> ID：11264965
> 
> 赞同：2
> 
> 时间：2012-06-29T15:49:10.833
> 
> 标签：ruby-on-rails, validation, range

我在模型中设置了验证：

```
validates_inclusion_of :height, :in => 36..96, :allow_nil => true, :message => 'must be between 3 and 8 feet' 
```

现在我想在 JQ 验证中设置相同的验证范围。我可以在 JavaScript 文件中重复相同的值，但更好的方法是以编程方式获取验证范围并通过视图输出。

如果可能的话，如何在 Rails 中以编程方式获取验证范围？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T15:54:19.970

您可以像这样访问模型的验证：

```
Model.validators 
```

要获得这些特定值，例如：

```
Model.validators_on(:height).select {|v| v.class == ActiveModel::Validations::InclusionValidator}.first.options[:in] 
```

将返回您的范围：

```
36..96 
```

您可以使用`Range#min`and[`Range#max`](http://ruby-doc.org/core-1.9.3/Range.html#method-i-max)来获取整数值。

为了方便起见，请使用如下方法：

```
class Model < ActiveRecord::Base
  validates_inclusion_of :height, :in => 36..96, :allow_nil => true, :message => 'must be between 3 and 8 feet'

  def self.min_height
    validators_on(:height).select {|v| v.class == ActiveModel::Validations::InclusionValidator}.first.options[:in].min
  end
end 
```

# c++ - “减速”输出

> ID：11264966
> 
> 赞同：2
> 
> 时间：2012-06-29T15:49:16.927
> 
> 标签：c++, character

我有一个问题，我不知道如何解释好，但我会尝试...例如，在某些游戏中，文本输出“慢”，一个接一个地写 char，而不是所有短语都在一个时间......那么，我怎样才能复制这种行为？

我认为这样......我可以做一个循环，我写一个字符和睡眠1毫秒，写一个字符和睡眠，等等......还有另一种方法，或者这是唯一/最好/简单的方法我可以实现这个技巧吗？我正在尝试在 C++ 中执行此操作，但欢迎提出其他建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T15:55:49.960

嗯，是的，usleep 是一个解决方案，但你应该线程化它，否则它也会减慢你的游戏速度。不过，从视觉上讲，1ms 可能还不够。我建议你做一些测试才能看到。

输出？是在终端上制作的？如果是这样，也许您也可以使用一些术语容量。

编辑：您也可以使用时钟！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T16:05:33.847

如果你问我，使用单独的线程来更新一段文本会有点浪费资源。我建议这样做的方法是定义一些应该在一秒钟内显示在屏幕上的字符，然后计算自上次更新文本以来的毫秒数。然后你乘以那个值

例子：

```
float charsPerSecond = 60/1000;
float lastUpdated;
...
int nrChars = (int) (charsPerSecond * (currentTime - lastUpdated));
//output nrChars characters
lastUpdated = currentTime; 
```

# eclipse - 安装eclipse + svn

> ID：11264967
> 
> 赞同：1
> 
> 时间：2012-06-29T15:49:25.390
> 
> 标签：eclipse, svn, ubuntu

我有一个由 svn 版本化的 Java 项目，并尝试为 linux 配置构建。在我的工作计算机上一切正常，我提交了更改。但是，对于我的两台家用计算机，我都会收到此错误，这似乎是一些微不足道的设置问题：

```
Exception in thread "main" java.lang.NoClassDefFoundError: adventure/Adventure
Caused by: java.lang.ClassNotFoundException: adventure.Adventure
    at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
Could not find the main class: adventure.Adventure. Program will exit. 
```

我是否忘记将 src 添加到某个路径？它在 ubuntu 中的外观如下：

![在此处输入图像描述](../Images/bc0dabf6a0807a7cfb2924da9bf73277.png)

它是用 Java 7 提交的，但在 ubuntu 上我只有 Java 6。它还能工作还是我需要完全协调 Java 版本？

## 更新

我清理了构建路径并再次设置了 JAR，我将添加 Java 6 JRE，因为我不使用任何 Java 7 特定功能，所以如果我只设置 JRE，它应该可以工作。但我不知道如何在 linux 中添加我的 JRE？我也可以尝试使用 windows，然后也许我可以添加一个合适的 JRE。现在有一个构建问题：

谢谢，但现在我没有 JDK，这看起来像是主要问题，只是一个构建问题：

```
Exception in thread "main" java.lang.Error: Unresolved compilation problem: 
    String cannot be resolved to a type

    at adventure.Adventure.main(Adventure.java:74) 
```

我的 Java 版本看起来不错：

```
$ java -version
java version "1.6.0_24"
OpenJDK Runtime Environment (IcedTea6 1.11.1) (6b24-1.11.1-4ubuntu3)
OpenJDK 64-Bit Server VM (build 20.0-b12, mixed mode) 
```

安装的 JRE 是应该可以工作的 OpenJDK 6：

![在此处输入图像描述](../Images/b1d0f96437c8124b07b813a6ac4985f1.png)

我的类路径变量看起来像这样

![在此处输入图像描述](../Images/5485b841a8e15a43d5c7ff1a3b02986d.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T18:11:21.627

通常 Java 项目应该在没有 bin 文件夹的情况下提交（将其设置为忽略）。

看起来您的项目已签入，包括从 Java 7 编译的类文件，当然 Java 6 无法加载。

您应该按以下步骤进行：

打开终端并切换到您的项目目录

*   执行`svn delete bin`
*   执行`svn propset svn:ignore bin .`

*有人如何从 Eclipse 中做到这一点吗？*

切换回 Eclipse 并在项目上执行“清理”命令，以便 Eclipse 使用您的 Java 版本重新构建它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T18:14:28.180

> 但我不知道如何在 linux 中添加我的 JRE？

你肯定知道 Preferences->Java->Installed JREs。请在 usr/lib/jvm 子目录中浏览您的 Java 安装。

# jquery - 检查 HTML 选择元素是否具有选定值

> ID：11264971
> 
> 赞同：0
> 
> 时间：2012-06-29T15:49:41.960
> 
> 标签：jquery, html

我有一个网页，我在其上使用 jQuery 来访问`select`元素的值。当元素具有“空”值（值 = `""`）时，我想*隐藏*页面上其他位置的链接。不幸的是 - 我似乎无法让它工作。

这是我当前的代码：

```
$(document).ready(function(e) {
    if ($('#cancelNumber').select().val() == "") {
        $('#ticketsLink').hide();
    } else {
        $('#ticketsLink').show();
    }
}); 
```

每个`div`标签都有一个唯一的 ID（已经检查过了）——我也尝试过使用`===`insetad of——`==`但这也不起作用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T15:56:05.497

您的调用`.select()`只会触发元素`select`上的事件。`#cancelNumber`我认为您正在寻找的更类似于：

```
$(document).bind('ready', function () {
    var $cancelNumber = $('#cancelNumber');
    var $ticketsLink = $('#ticketsLink');

    var updateLink = function () {
        if ($cancelNumber.children(':selected').val() == '') {
            $ticketsLink.hide();
        } else {
            $ticketsLink.show();
        }
    };

    // Then assuming you want it to re-update every time the box is changed...
    $cancelNumber.bind('change', function () {
        updateLink();
    });

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T15:51:45.777

假设 cancelNumber 是 select 的 id。

*您代码中的以下语句*

```
$('#cancelNumber').select().val() 
```

*将会*

```
$('#cancelNumber').val() 
```

*您的代码将是*

```
$(document).ready(function(e) {    
   if ($('#cancelNumber').val() == "") {    
       $('#ticketsLink').hide();    
   }else{
       $('#ticketsLink').show();
   }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T15:53:11.297

你在滥用`.select()`. 你只是想要`$('#cancelNumber').val()`。

# javascript - 在对象为布尔值的情况下，Javascript 中的类型强制如何？

> ID：11264974
> 
> 赞同：4
> 
> 时间：2012-06-29T15:49:55.330
> 
> 标签：javascript, type-conversion

据我所知，`(x == false)`应该做与 相同的事情`!x`，因为他们都试图解释`x`为布尔值，然后否定它。

但是，当我尝试对此进行测试时，我开始出现一些非常奇怪的行为。

例如：

`false == []`并且`false == ![]`都返回true。

此外

`false == undefined`并且`true == undefined`两者都返回false，就像

`false == Infinity`并且`true == Infinity`和

`false == NaN`和`true == NaN`。

这里到底发生了什么？

[http://jsfiddle.net/AA6np/1/](http://jsfiddle.net/AA6np/1/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T16:05:55.673

都在这里：[http ://es5.github.com/#x11.9.3](http://es5.github.com/#x11.9.3)

对于以下情况`false == []`：

*   `false`被转换为数字 (0)，因为这总是用布尔值完成的。
*   [] 通过调用 转换为原语`[].valueOf().toString()`，即为空字符串。
*   `0 == ""`然后通过将空字符串转换为数字来评估，因为结果也是 0，`false == []`所以为真。

对于以下情况`false == ![]`：

*   [逻辑非运算符`!`](http://es5.github.com/#x11.4.9)是通过返回相反的`ToBoolean(GetValue(expr))`
*   [`ToBoolean()`](http://es5.github.com/#x9.2)对任何对象始终为真，因此`![]`计算结果为`false`(because `!true = false`)，因此`false == ![]`也为真。

* * *

`(false == undefined) === false`甚至`(true == undefined) === false`更简单：

*   `false`并`true`再次转换为数字（分别为 0 和 1）。
*   因为 undefined 不能与数字进行比较，所以链会冒泡到默认结果，即`false`.

其他两种情况的评估方式相同：首先将布尔值与数字进行比较，然后将其与另一个数字进行比较。由于 0 和 1 都不等于 Infinity 或不是数字，因此这些表达式的计算结果也为`false`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T16:10:52.650

[规范的第 9.3 节](http://es5.github.com/#x11.9.3)描述了抽象相等算法。

对于`x == y`其中 x =`false`和 y = `[]`：

1.  没有。类型不相等。
2.  不，x 不为空。
3.  没有。x 不是未定义的。
4.  不，x 不是数字
5.  不，x 不是字符串。
6.  是的，x 是一个布尔值，所以我们比较 ToNumber(x) 和 y。

重复算法， x=`0`和 y= `[]`。
我们在第 8 步结束：Type(x) == number。和类型（y）==对象。
因此，让结果为 x == [ToPrimitive](http://es5.github.com/#x9.1) (y)。
ToPrimitive([]) == ""

`0`现在，使用 x=和 y=再次重复该算法`""`。我们在 4 结束：“返回比较结果 x == ToNumber(y)。”
ToNumber("") == 0

算法的最后一次重复在步骤 1 结束（类型相等）。通过 1.c.iii，0 == 0，返回 true。

通过使用该算法，可以以类似的方式获得其他结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T16:22:08.233

```
false == [] 
```

`==`允许使用Javascript 应用转换。该对象将转换为原始类型以与布尔值匹配，留下一个空字符串。false 将转换为数字 0。将空字符串与数字 0 进行比较。字符串转换为数字 0，因此表达式为“true”

```
![] 
```

Javascript 将对象转换为布尔值 true，因此否认 true 结束为 false。

```
false == undefined true == undefined
false == Infinity and true == Infinity
false == NaN and true == NaN 
```

又有点像！false 转换为 0，true 转换为 1。然后， undefined 转换为一个数字，即...... NaN！无论如何都是假的

我建议`=== !==`尽可能多地使用以获得“预期”的结果，除非您非常清楚自己在做什么。使用类似`Boolean(undefined) == fals`e 的东西也会很好。

转换内容时检查 ECMAScript 规范以获取所有详细信息。

# parameters - 如何将参数从 Batch (.bat) 传递到 VBScript (.vbs)？

> ID：11264975
> 
> 赞同：6
> 
> 时间：2012-06-29T15:49:56.320
> 
> 标签：parameters, vbscript, batch-file

如何将参数从批处理传递到 vbscript？我的批处理脚本在自动执行结束时发送一封电子邮件。为此，它使用/调用我的 vbscript (email.vbs) 发送带有实际日志文件（具有执行结果）的电子邮件。所有这些日志文件都存储在特定文件夹中，例如：201207（2012 年 7 月）、201208（2012 年 8 月）等等......我想传递文件夹名称或部分（我正在考虑硬编码2012 部分并通过我的批处理从该参数中获取月份编号）它作为我的 email.vbs 的参数，以便它可以去寻找正确的文件夹来获取正确的日志文件。说得通？

```
ECHO Checking the log file for errors...
FINDSTR /C:"RC (return code) = 0" %workDir%\%filenm%_Log.txt && (ECHO Deployment was successful. 
ECHO Email is sent out...
cscript //nologo success_mail_DEV.vbs %workDir%  'passing the directory param. here.
ECHO Press ENTER to exit...
GOTO offshore) || (ECHO Deployment was not successful. Errors were found!
ECHO Email is sent out...
ECHO Press ENTER to exit...
cscript //nologo fail_mail_DEV.vbs %workDir%  'and here
GOTO offshore) 
```

这是我现在拥有的一部分。它正在检查日志文件中的错误并相应地调用该成功/失败邮件。现在，您在上面看到的 2 个 vbs 邮件脚本中硬编码了位置名称/编号。我确信有一种方法可以将参数传递给发送电子邮件的 vbscript。但是，我不知道该怎么做。

这是我的邮件 vbscript：

```
Const ForReading = 1

Set args = WScript.Arguments
directory = args.Item(0) 'thought that workDir would come in here

Set objFSO = CreateObject("Scripting.FileSystemObject")
Set objTextFile = objFSO.OpenTextFile(&directory&"\filename.txt", ForReading)
fileName = objTextFile.ReadLine

Dim ToAddress
Dim FromAddress
Dim MessageSubject
Dim MyTime
Dim MessageBody
Dim MessageAttachment
Dim ol, ns, newMail
MyTime = Now

ToAddress = "destination@email.com"
MessageSubject = "SUCCESS"
MessageBody = "It was successful" 
MessageAttachment = &directory&"\"&fileName&"_Log.txt"
Set ol = WScript.CreateObject("Outlook.Application")
Set ns = ol.getNamespace("MAPI")
Set newMail = ol.CreateItem(olMailItem)
newMail.Subject = MessageSubject
newMail.Body = MessageBody & vbCrLf & MyTime
newMail.RecipIents.Add(ToAddress)
newMail.Attachments.Add(MessageAttachment)
newMail.Send

objTextFile.Close 
```

但不工作...

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-29T15:59:48.037

要回答这个问题...

以这种方式调用您的脚本：

```
cscript //nologo success_mail_DEV.vbs  ARG1  ARG2 
```

[通过WScript.Arguments](http://technet.microsoft.com/library/ee156618.aspx)处理 vbscript 中的参数。

* * *

但我也可以建议您完全消除系统的批处理部分。

VBSCript 完全能够调用 FINDSTR 并处理输出。或者实际上，您可以完全在 VBScript 中实现搜索，而根本不需要调用 FINDSTR。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T15:51:07.473

好的，我正在更新我的问题。伙计们，在你们的帮助下，它终于奏效了。谢谢。以下是我调用 vbscript 并向其传递参数的方式：

```
cscript //nologo fail_mail.vbs something.sql 'something.sql is the param. that i'm passing. 
```

这是我的邮件 vbscript 的样子：

```
Const ForReading = 1

Set args = WScript.Arguments
arg1 = args.Item(0)  'the parameter from batch comes in here to arg1
...
...
ToAddress = "my@address.com"
MessageSubject = "WORKED"
MessageBody = "Success" 
MessageAttachment = ""&arg1&""  'here those quotes are important. dk why.
Set ol = WScript.CreateObject("Outlook.Application")
Set ns = ol.getNamespace("MAPI")
Set newMail = ol.CreateItem(olMailItem)
newMail.Subject = MessageSubject
newMail.Body = MessageBody & vbCrLf & MyTime
newMail.RecipIents.Add(ToAddress)
newMail.Attachments.Add(MessageAttachment)
newMail.Send 
```

它正在工作。*一个人可以使用相同的技术传递多个参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T16:01:00.247

您的 VBScript 需要一些代码来接受参数，例如：

```
set args = WScript.Arguments
' Parse args
select case args.Count
case 0
    help
case 1
    sVariable = args(0)
end select 
```

当您调用 VBScript 时，只需将 arg 传递给脚本，就像您使用命令一样：

```
cscript //nologo MyScript.vbs arg 
```

# java - Java Opengl 3D 渲染

> ID：11264976
> 
> 赞同：0
> 
> 时间：2012-06-29T15:50:02.540
> 
> 标签：java, lwjgl

我正在尝试创建几个具有 2D 纹理的 3D 块，但由于立方体的某些面对其他人是透明的，因此无法正常工作。这是我定义块的类的一部分代码：

```
 public void Render(){

            try {
        this.texture = TextureLoader.getTexture("PNG", new FileInputStream(new File("res/gold1.png")));
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    squareDisplayList = glGenLists(1);
    glNewList(squareDisplayList, GL_COMPILE);
    {

        glBegin(GL_QUADS);
        //trás
        glTexCoord2f(1, 0);
        glVertex3f(x2, y1, z1);
        glTexCoord2f(1, 1);
        glVertex3f(x2, y2, z1);
        glTexCoord2f(0, 1);
        glVertex3f(x1, y2, z1);
        glTexCoord2f(0, 0);
        glVertex3f(x1, y1, z1);

        //cima
        glTexCoord2f(1, 0);
        glVertex3f(x2, y1, z2);
        glTexCoord2f(1, 1);
        glVertex3f(x1, y1, z2);
        glTexCoord2f(0, 1);
        glVertex3f(x1, y1, z1);
        glTexCoord2f(0, 0);
        glVertex3f(x2, y1, z1);

        //baixo
        glTexCoord2f(1, 0);
        glVertex3f(x2, y2, z1);
        glTexCoord2f(1, 1);
        glVertex3f(x2, y2, z2);
        glTexCoord2f(0, 1);
        glVertex3f(x1, y2, z2);
        glTexCoord2f(0, 0);
        glVertex3f(x1, y2, z1);

        //direito
        glTexCoord2f(1, 0);
        glVertex3f(x2, y1, z2);
        glTexCoord2f(1, 1);
        glVertex3f(x2, y2, z2);
        glTexCoord2f(0, 1);
        glVertex3f(x2, y2, z1);
        glTexCoord2f(0, 0);
        glVertex3f(x2, y1, z1);

        //esquerdo
        glTexCoord2f(1, 0);
        glVertex3f(x1, y1, z2);
        glTexCoord2f(1, 1);
        glVertex3f(x1, y2, z2);
        glTexCoord2f(0, 1);
        glVertex3f(x1, y2, z1);
        glTexCoord2f(0, 0);
        glVertex3f(x1, y1, z1);

        //frente
        glTexCoord2f(1, 0);
        glVertex3f(x2, y1, z2);
        glTexCoord2f(1, 1);
        glVertex3f(x2, y2, z2);
        glTexCoord2f(0, 1);
        glVertex3f(x1, y2, z2);
        glTexCoord2f(0, 0);
        glVertex3f(x1, y1, z2);
        glEnd();

    }
    glEndList();

}

 public void Draw(){

    glCallList(squareDisplayList);

} 
```

这是我称之为几个块的类：

```
 glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    gluPerspective((float) 30, 880f / 580f, 0.001f,100);
    glMatrixMode(GL_MODELVIEW);
    glEnable(GL_TEXTURE_2D);

    for(int ix = 0; ix < world_width; ix++){

        for(int iy = 0; iy < world_hight; iy++){    

            for(int iz = 0; iz < world_height; iz++){

                render[ix][iy][iz].Render();

            }

        }

    }   

    while(!Display.isCloseRequested()){

        glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

        glTranslatef(xspeed, -jumpsd, zspeed);

        for(int ix = 0; ix < world_width; ix++){

            for(int iy = 0; iy < world_hight; iy++){    

                for(int iz = 0; iz < world_height; iz++){

                    render[ix][iy][iz].Draw();

                }

            }

        }

        Display.update();
        Display.sync(35);

    } 
```

如何解决透明度问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T15:58:44.450

将以下代码放入您的初始化块中：

```
glEnable(GL_DEPTH_TEST);
```

# java - Dijkstra 没有存储最短路径

> ID：11264982
> 
> 赞同：1
> 
> 时间：2012-06-29T15:50:20.753
> 
> 标签：java, shortest-path, dijkstra

我在为我的 Dijkstra 算法保持最短路径正确时遇到问题。它正确地找到最短的长度并将其返回（使用实际输出验证正确使用的算法），但正在制作的数组不正确。我相信当我更新arraylist时可以找到这个问题。我的代码如下：

```
public static Double Dijkstras(String startVertexName,
        String endVertexName, ArrayList<String> shortestPath) {
    HashSet<String> S = new HashSet<String>();
    HashMap<String, String> temp = new HashMap<String, String>();
    HashMap<String, Double> cost = new HashMap<String, Double>();
    cost.put(startVertexName, 0.0);
    for (String e : dataMap.keySet()) {
        if (e.compareTo(startVertexName) != 0) {
            cost.put(e, Double.MAX_VALUE);
        }
    }
    while (!S.containsAll(dataMap.keySet())) {

        ArrayList<String> notInS = new ArrayList<String>();
        for (String x : dataMap.keySet()) {
            if (!S.contains(x)) {
                notInS.add(x);
            }
        }
        Double smallest = Double.MAX_VALUE;
        String foundK = "this is not right";
        for (String k : notInS) {
            if (cost.get(k) < smallest) {
                smallest = cost.get(k);
                foundK = k;
            }
        }
        S.add(foundK);
        notInS.remove(foundK);
        HashSet<String> notInSAdjacent = new HashSet<String>();
        for (String g : adjacencies.get(foundK).keySet()) {
            if (notInS.contains(g)) {
                notInSAdjacent.add(g);
            }
        }
        String temp2 = "";
        for (String j : notInSAdjacent) {
            if ((cost.get(foundK) + adjacencies.get(foundK).get(j)) < cost
                    .get(j)) {
                cost.put(j,
                        cost.get(foundK) + adjacencies.get(foundK).get(j));
                temp2 = j;
            }
        }
        if (!temp.containsKey(temp2)) {
            shortestPath.add(foundK);
        } else {
            int index = shortestPath.indexOf(temp.get(temp2));
            shortestPath.remove(index);
            shortestPath.add(index, foundK);

        }
        temp.put(temp2, foundK);

        if (foundK.compareTo(endVertexName) == 0) {
            break;
        }

    }
    return cost.get(endVertexName);

} 
```

让我知道是否有人可以看到明显的错误。如果需要，我可以提供样本输入和输出。谢谢！

# xml - 在 Web 浏览器中将 xml 显示为 .doc

> ID：11264983
> 
> 赞同：0
> 
> 时间：2012-06-29T15:50:22.970
> 
> 标签：xml, telerik, browser, dotnetnuke-module, .doc

我有一个保存为 xml 的 .doc。我想在网络浏览器上以 .doc 格式显示这个 xml。我要加载 xml 而不是原始 .doc 的原因是因为我在要替换的文档中放置了一些关键标签。例如人名。

我应该提到这是一个 DNN 模块，因此我可以访问 Telerik 控件，并且它正在 vb.net 中开发。我正在考虑在 RadEditor 中显示它。

# asp.net - 根据子表过滤器从父表中选择记录

> ID：11264985
> 
> 赞同：0
> 
> 时间：2012-06-29T15:50:27.423
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

这应该很简单，但我很困惑。

我有一个父/子表 - 我想做的就是从父表中选择，具体取决于子表的过滤。

因此，父表 Rooms 与 clients 表一对多地链接 - 我想选择在 Clients 表中没有链接记录的房间，其中 clients.Departure 日期在特定日期之前：

```
 public class Room
    {
        public int RoomId { get; set; }
        public string RoomName { get; set; }
        public List<Client> Clients { get; set; }
    }

  public class Client
    {
        public int ClientId { get; set; }
        public int RoomId { get; set; }
        public string Name { get; set; }
        public DateTime Arrival { get; set; }
        public DateTime Departure { get; set; }
        public Room Room { get; set; }
    } 
```

在我的控制器中，我一直在尝试：

```
 public ActionResult Avail()
        {
            DateTime dteFrom = DateTime.Parse("2012-07-01");  //hard coded for testing
            Room room = db.Rooms.Where(r => r.Clients.Any(c => c.Departure <= dteFrom)); 
```

但我收到错误消息：

```
Cannot implicitly convert type 'System.Linq.IQueryable<ttp.Models.Room>' to 'ttp.Models.Room'. An explicit conversion exists (are you missing a cast?) 
```

任何人都可以建议我是否需要更改我的模型类或我的 Where 语句？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T15:52:44.047

`Room room`表示单个房间，而`db.Rooms.Where(r => r.Clients.Any(c => c.Departure <= dteFrom))`返回房间列表。

如果您希望您的查询只会返回一个结果，您可以执行以下操作：

```
Room room = db.Rooms.SingleOrDefault(r => r.Clients.Any(c => c.Departure <= dteFrom)); 
```

或者，如果您想返回与查询匹配的所有房间，您可以执行以下操作：

```
IQueryable<Room> rooms = db.Rooms.Where(r => r.Clients.Any(c => c.Departure <= dteFrom)); 
```

# iphone - 我如何在 IBAction（按钮）中放置一个 void（摇动手势）？

> ID：11264989
> 
> 赞同：0
> 
> 时间：2012-06-29T15:50:47.227
> 
> 标签：iphone, ios, xcode, button, motion

我正在创建一个应用程序，但遇到了一个问题。我的应用程序有一个播放按钮，一旦用户按下它，动画就会播放并结束。我已经在下面显示的代码中创建了上面的代码，但我需要一些帮助。当播放器按下播放时，它应该显示一个标签说摇动开始，当用户摇动iPhone时标签会消失并且动画会开始。我无法将动画代码放入 IBAction 代码中。请帮忙 ：）

```
-(IBAction)startanimation { 

animation.animationImages= [NSArray arrayWithObjects:
                                [UIImage imageNamed:@"Frame0.png"],
                                [UIImage imageNamed:@"Frame1.png"],
                                [UIImage imageNamed:@"Frame2.png"],
                                [UIImage imageNamed:@"Frame3.png"],
                                [UIImage imageNamed:@"Frame4.png"],
                                [UIImage imageNamed:@"Frame5.png"],
                                [UIImage imageNamed:@"Frame6.png"],
                                [UIImage imageNamed:@"Frame7.png"],
                                [UIImage imageNamed:@"Frame8.png"],
                                [UIImage imageNamed:@"Frame9.png"],
                                [UIImage imageNamed:@"Frame10.png"],
                                [UIImage imageNamed:@"Frame11.png"],
                                [UIImage imageNamed:@"Frame12.png"],
                                [UIImage imageNamed:@"Frame13.png"],
                                [UIImage imageNamed:@"Frame14.png"], 
                                nil];

    [animation setAnimationRepeatCount:1];
    animation.animationDuration = 1;
    [animation startAnimating];

    button.hidden = 1;
    animation.hidden = 0;
    Menu.hidden = 0;
    replay.hidden = 0;

} 
```

我是编码初学者，所以请解释任何答案:)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T15:53:10.220

在您的 IBAction 中，将名为“readyToShake”之类的 BOOL 设置为 TRUE。然后在您的 Shake 监听器中检查“readyToShake”是否为 TRUE，如果是，则启动动画。如果为 FALSE，则忽略摇晃手势。

# ms-access - 查询未使用“*”条件运行

> ID：11264995
> 
> 赞同：1
> 
> 时间：2012-06-29T15:51:02.877
> 
> 标签：ms-access

我有一个查询，我希望条件查看组合框。我使用以下行源填充组合框以添加“全部”选项：

```
SELECT id, team FROM tblTeams ORDER BY team UNION SELECT "*", "<ALL>" FROM tblTeams; 
```

如果我选择一个团队，查询运行良好（条件是针对 id，组合框的绑定列是 1）。但是，如果我选择 <ALL>，我会收到警告：“此表达式键入错误，或者它太复杂而无法计算。例如，一个数字表达式可能包含太多复杂元素。尝试通过分配部分来简化表达式变量的表达式。”

该字段是一个整数，所以我认为 * 引起了问题。我尝试将其更改为“> 0”，但这给了我同样的错误。任何关于使这项工作的建议，这样我就不必使用 VBA 来操作查询（我可以这样做，但如果你不这样做，我觉得它会更干净——让我知道这是否是一个错误的想法） ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T16:18:05.207

如果 tblTeams 中的 'id' 字段是数字，则尝试使用诸如 '*' 或 '>0' 之类的字符串将在它们被 UNION 连接在一起时产生错误。

根据您的需要，我建议使用如下查询，其中使用 -1 作为您的“id”，或其他某种唯一的数字“id”。

假设您的“id”字段都是正数。然后，您可以测试负数以确定是否应返回所有记录。

```
SELECT id, team FROM tblTeams 
UNION 
SELECT -1 as id, "<ALL>" as team FROM tblTeams 
ORDER BY team 
```

或者，您可以将您的 'id' 字段转换为字符串，因此它是一个字符串，就像 '*' 或 '>0' 一样。重要的是字段具有相同的数据类型。

```
SELECT Cstr(id), team FROM tblTeams
UNION
SELECT "*" as id, "<All>" as team from tblTeams
ORDER BY team 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T16:52:12.383

在我看来，您希望将您的表单称为查询中的标准行。

尝试使用喜欢。这对我有用：

```
SELECT Table1.ID, Table1.Team
FROM Table1
WHERE Table1.ID Like [Forms]![Table1]![MyCombo] 
```

这不需要任何代码即可工作。如果选择了一个数字，则返回该数字，如果选择 All，则返回所有非空记录。

# javascript - Javascript 作为链接

> ID：11264999
> 
> 赞同：0
> 
> 时间：2012-06-29T15:51:18.220
> 
> 标签：javascript, hyperlink, href

我正在做一个网站。在这种情况下，当用户选择链接时，特定 div 的内容会使用 Javascript 和 json 进行更改。

我面临的问题是我无法使用后退按钮，因为我用于更改 div 内容的所有链接都像：

```
<a href=" **some javascript function**"> 
```

我应该如何更改它以有效地使用默认的后退/前进按钮。

我知道它可以通过使用#来导航到div，但问题是我所有的链接都在同一个div中。

有什么方法可以让后退按钮执行之前执行的 javascript？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T16:04:15.960

您正在寻找[history.js](https://github.com/balupton/history.js/)。也是`<a href="javascript:…">`一个非常糟糕的做法。用于`<a>`引用其他文档/文件，而不是（直接）调用 javascript 函数。