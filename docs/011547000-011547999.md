# StackOverflow 问答 11547000-11547999

# android - 从 Motorola Razr Android 4.0.4 上的耳机捕获媒体按钮

> ID：11547001
> 
> 赞同：3
> 
> 时间：2012-07-18T17:27:47.817
> 
> 标签：android, motorola, headset

这是我的第一篇文章，所以如果我做任何事情或表达任何错误，请让我知道未来，如果这比正常更长或更冗长，我很抱歉，我只是想提供一个好的背景。同样，如果这不是正常格式，请让我知道，因为我想在未来使用并在此站点上做出更多贡献。

我正在维护一个应用程序，它控制耳机按钮将执行的操作，并具有单击、双击、长按等的手势识别功能。该应用程序在我们所有的测试设备（三星 Galaxy S3、摩托罗拉）上运行良好Droid 4 和其他一些运行不同版本的 android 操作系统的人），但我们最近得到消息，使用 motorola razr 该应用程序根本无法运行。

我最初以为他们在谈论运行 4.1 的新高清，但它显然是运行 android 4.0.4 的常规摩托罗拉 razr（至少那是我们的测试设备正在运行的）。插入设备后，我们收到了应用程序的一些响应，我们可以执行长按和单击，但设备无法识别双击和打开等手势。

谷歌搜索了一段时间后，我发现很多人在论坛上谈论这个问题，但我找不到任何开发人员谈论潜在的修复。

这是我所知道的唯一运行 4.0.4 的设备，所以我将开始更多地查看该版本，看看是否有一些注释，但如果有人在这些设备上工作过并且可能知道为什么会发生这种情况如果您对此事有任何了解，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T13:51:17.367

我发现了更多关于这个问题/我的问题的答案。事实证明，该应用程序在 razr 上运行良好，但设备上耳机按钮的响应时间非常慢，因此手势识别超时。但是对于以后遇到类似问题的参考，对我来说，razr 响应时间不超过每 600 毫秒 3 次点击。（我注册最快的是616）

# php - 无法在 codeigniter 视图中访问控制器数据

> ID：11547005
> 
> 赞同：0
> 
> 时间：2012-07-18T17:28:11.323
> 
> 标签：php, codeigniter

我在控制器中使用以下代码。但是 data['msg'] 没有被传递给视图文件。

代码：

```
class Operator{

public function view ($page)
{
    if ( ! file_exists('application/views/pages/'.$page.'.php'))
    {
        // Whoops, we don't have a page for that!
        show_404();
    }

    $data['title'] = $this->getTitle($page); 
    $this->load->view('templates/header', $data);
    $this->load->view('pages/'.$page, $data);
    $this->load->view('templates/footer', $data);

}
public function create_company()
{
        // some code
    $data['msg1']='my mesg';
    redirect('operator/view/operator_success','refresh');
}
}; 
```

加载 operator_success(view page) 时显示错误消息：未定义变量“$msg1”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:31:25.007

这是因为`data['msg1']`设置了，然后页面被重定向（不携带`data`数组）。

如果你想`data`坚持，那么你需要使用[session](http://codeigniter.com/user_guide/libraries/sessions.html)或[cookies](http://codeigniter.com/user_guide/helpers/cookie_helper.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T17:31:50.103

您在设置变量后重定向，因此您必须在会话（“flash”消息）或 operator/view/operator_success 控制器上设置此消息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T18:04:29.800

重定向后，您不能使用变量或数组。而是设置变量 keep in session 或 CodeIgniter Flash Data。

```
class Operator
{

    public function view($page)
    {
        if (!file_exists('application/views/pages/' . $page . '.php')) {
            // Whoops, we don't have a page for that!
            show_404();
        }

        $data['title'] = $this->getTitle($page);
        $this->load->view('templates/header', $data);
        $this->load->view('pages/' . $page, $data);
        $this->load->view('templates/footer', $data);
    }

    public function create_company()
    {
        // some code
        $data['msg1'] = 'my mesg';

        // DO THIS 
        $this->session->set_flashdata('msg1', 'my mesg');
        // OR 
        $this->session->set_userdata('msg1', 'my mesg');
        redirect('operator/view/operator_success', 'refresh');
    }

} 
```

重定向后，您可以简单地调用 flashdata。

```
echo $this->session->flashdata('msg1');
// OR
echo $this->session->userdata('msg1'); 
```

您必须在使用前初始化会话，自动加载会话库或手动加载。

[ 1 ] 自动加载会话库 (config/autoload.php)

```
$autoload['libraries'] = array('session'); 
```

[2]手动加载库

```
$this->load->library('session'); 
```

[在此处](http://codeigniter.com/user_guide/libraries/sessions.html)查看有关会话和闪存数据的更多信息。希望这对您有所帮助。谢谢！！

# android - 使用同一客户端的 Android 多个 Asynctask 和多个 Httppost 请求

> ID：11547006
> 
> 赞同：0
> 
> 时间：2012-07-18T17:28:15.673
> 
> 标签：android, http, android-asynctask

我在我的代码中使用多个 asynctask 来发出多个 http 请求，并且我必须为它们使用相同的客户端。但是android不允许我这样做。它要求我先关闭连接，然后重新启动一个新连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T17:34:34.893

> 我必须为他们使用相同的客户端

为什么？

> 它要求我先关闭连接，然后重新启动一个新连接。

好吧，那就照它说的做。基本上，它清楚地告诉你你正在（ab）使用 httpclient，它还没有准备好做你想做的事。幸运的是，您应该使用其他可用的 httpclients 而不是内置的。或者，根据目标 sdk，使用[http://developer.android.com/reference/android/net/http/AndroidHttpClient.html](http://developer.android.com/reference/android/net/http/AndroidHttpClient.html)

# vb.net - 每个循环都没有收集 - 如何处理它？

> ID：11547008
> 
> 赞同：6
> 
> 时间：2012-07-18T17:28:24.613
> 
> 标签：vb.net

当集合什么都不是时，我如何处理每个循环，我认为它会跳过但我得到一个例外？

我是否需要将 foreach 循环包装在 if 中以检查任何内容，并且仅当它不是什么内容时才进入 for each 循环？

```
For Each item As String In MyStringList 

    'do something with each item but something myStringList will be nothing?

Next 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-18T17:30:11.187

> 我是否需要将 foreach 循环包装在 if 中以检查任何内容，并且仅当它不是什么内容时才进入 for each 循环？

是的。

```
If MyStringList IsNot Nothing Then
    For Each item As String In MyStringList 
       'do something ...
    Next
End If 
```

[微软](http://connect.microsoft.com/VisualStudio/feedback/details/93497/foreach-should-check-for-null "回应关于 Connect 的建议")说这是设计使然：

> 我认为大多数 foreach 循环都是为了迭代非空集合而编写的。如果您尝试通过 null 进行迭代，您应该得到您的异常，以便您可以修复您的代码。Foreach 基本上是一种语法便利。因此，它不应该是“神奇的”并且在引擎盖下做意想不到的事情。我同意建议使用空集合而不是 null 的帖子。（它们通常可以使用单例技术大量重复使用）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T05:45:55.400

添加`If collection IsNot Nothing Then`并不是那么繁重，但是如果您确实有很多这种构造，则此扩展方法可能更可取：

```
 '''---------------------------------------------------------------------
    ''' Extension Function: OrEmpty
    ''' 
    ''' <summary>
    '''   Returns an empty enumeration if the source is Nothing.
    ''' </summary>
    ''' 
    ''' <typeparam name="T">The type to create an enumeration of. Normally inferred.</typeparam>
    ''' 
    ''' <param name="Source">The source enumeration.</param>
    ''' 
    ''' <returns>The source enumeration unless it is Nothing; then an empty enumeration.</returns>
    ''' 
    ''' <remarks>
    ''' </remarks>
    ''' 
    ''' <revisionhistory>
    '''   100930 MEH Created.
    ''' </revisionhistory>
    '''---------------------------------------------------------------------
    <Extension()> _
    Function OrEmpty(Of T)(ByVal Source As IEnumerable(Of T)) As IEnumerable(Of T)
        If Source IsNot Nothing Then _
            Return Source
        Return Enumerable.Empty(Of T)()
    End Function 
```

并且`Option Infer On`您不需要指定类型，因此示例使用只是：

```
For Each item As String In MyStringList.OrEmpty 

    'do something with each item but something myStringList will be nothing?

Next 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T17:30:39.523

> 我是否需要将 foreach 循环包装在 if 中以检查任何内容，并且仅当它不是什么内容时才进入 for each 循环？

是的，这就是你必须做的。或者确保返回字符串列表的函数（如果你可以控制它）永远不会返回一个空数组而是一个空集合，顺便说一句，这是返回集合的函数的标准方法——它们永远不应该为空，因为它使它们LINQ 不友好，并迫使你到处写 ifs。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T18:21:52.590

```
If Not IsNothing(collection)
' For Each goes here
End If 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-13T14:57:32.080

另一种选择是使用 [if(arg1, arg2)](https://docs.microsoft.com/en-us/dotnet/visual-basic/language-reference/operators/if-operator)运算符。

```
For Each item As String In If(MyStringList, New List(Of String)())
    'do something .....
Next 
```

if 运算符将返回第二个参数，即空列表，如果第一个参数为空

# asp.net-mvc - HttpRequestValidationException 后在 Application_Error 中重定向

> ID：11547013
> 
> 赞同：1
> 
> 时间：2012-07-18T17:28:43.743
> 
> 标签：asp.net-mvc

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:44:21.203

Try this

```
if (httpException is HttpRequestValidationException)
{
    Response.Redirect("~/error/InvalidInput");
} 
```

# php - 使用 MySQL 需要 PHP 吗？

> ID：11547019
> 
> 赞同：-3
> 
> 时间：2012-07-18T17:29:21.513
> 
> 标签：php, c++, mysql

当我看到人们使用 MySQL 时，通常是通过 PHP 绑定。是否可以使用 C++ 与 MySQL 交互，还是我需要先学习 PHP？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T17:33:04.083

您可以将 MySQL 与许多其他语言一起使用。
您只需要一个驱动程序，[这里有一个列表](http://www.mysql.com/products/connector/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T17:32:03.083

是的，这是[可能](http://www.nitecon.com/tutorials-articles/develop/cpp/c-mysql-beginner-tutorial/)的。不，您不必先学习 PHP。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T17:32:18.543

如果您打算创建网站或 Web 服务 - PHP。如果桌面程序 - C++。如果您只需要 MySQL 来存储和分析一些数据（例如 MS Access），则不需要。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T17:32:35.237

有[许多语言](http://dev.mysql.com/doc/refman/5.0/en/connectors-apis.html#connectors-apis-summary)的 MySQL 绑定，包括 C++。

# c# - 点击网页链接

> ID：11547021
> 
> 赞同：2
> 
> 时间：2012-07-18T17:29:33.207
> 
> 标签：c#, winforms, click, webbrowser-control

首先，对不起我的英语不好。

问题很简单。我想点击 C# 的链接（Windows 窗体）

这是我使用的代码：

```
int number_to_show = Convert.ToInt32(listView1_new_message.SelectedItems[0].SubItems[4].Text);
            int a_to_click = (number_to_show * 5) + 2;
            string titel_of_message = listView1_new_message.SelectedItems[0].SubItems[1].Text;
            HtmlWindow SContentFrame = webBrowser1.Document.Window.Frames[1];
            HtmlWindow Frame_A = SContentFrame.Document.Window.Frames[2];
            HtmlElementCollection links = Frame_A.Document.GetElementsByTagName("b");
            int link_counter = 0;
            foreach (HtmlElement link in links) {
                if (link_counter == a_to_click && link.InnerText.Equals(titel_of_message)) {
                    link.InvokeMember("Click");
                }
                link_counter++;
            } 
```

它想点击（我看到它发生在调试中，当我点击一个消息框时，会出现消息框），但网页没有反应。

这是在**网页上的标签：**

 **```
<b><a href="" onclick="OnPhoenixRead('/mail/MessageRead?sid=7613BA4BF987D55FD171D53FAA24A259C7FDE435&amp;userid=*******&amp;seq=+Q&amp;auth=+A&amp;srcfolder=INBOX&amp;uid=3291&amp;srch=0&amp;style=default'); return false">Doorgest: testing 2</a></b> 
```

所以不知何故它没有点击文本......（或没有激活 onclick 事件处理程序）

我怎样才能使程序按应有的方式工作？

在此先感谢：D TWCrap

**编辑 1** 这是保存所有电子邮件的表格的一段代码....

```
<table width="100%" border="0" cellspacing="0" cellpadding="0" align="center">
<tbody><tr valign="middle" bgcolor="#f0f0f0">
<td width="20" align="center"><input type="checkbox" name="CheckAll" onclick="ToggleCheckAll()"></td>
<td width="1"><img src="/graphics/telfort/null.gif" height="1" width="1"></td>
<td width="20" align="center"><font face="Verdana" size="2" color="#141F78"><b>!!</b></font></td>
<td width="1"><img src="/graphics/telfort/null.gif" height="1" width="1"></td>
<td width="20" align="center"><img src="/graphics/telfort/mail-icon.gif" width="20" height="20" border="0" alt=""></td>
<td width="1"><img src="/graphics/telfort/null.gif" height="1" width="1"></td>
<td width="20" align="center"><img src="/graphics/telfort/attachments.gif" width="20" height="21" border="0" alt=""></td>
<td width="1"><img src="/graphics/telfort/null.gif" height="1" width="1"></td>
<td class="mailtitlebar">&nbsp;<a href="" onclick="NavA('/mail/MessageSort?sid=3B886D11EEAAF546F83EFAA8506E56BC30949BC9&amp;userid=marcmeesters%40telfort.nl&amp;seq=+Q&amp;auth=+A&amp;srcfolder=INBOX&amp;sort=1&amp;style=default&amp;start=100&amp;end=1'); return false">Van&nbsp;</a>&nbsp;</td>
<td width="1"><img src="/graphics/telfort/null.gif" height="1" width="1"></td>
<td class="mailtitlebar"><a href="" onclick="NavA('/mail/MessageSort?sid=3B886D11EEAAF546F83EFAA8506E56BC30949BC9&amp;userid=marcmeesters%40telfort.nl&amp;seq=+Q&amp;auth=+A&amp;srcfolder=INBOX&amp;sort=5&amp;style=default&amp;start=100&amp;end=1'); return false">Onderwerp&nbsp;</a>&nbsp;</td>
<td width="1"><img src="/graphics/telfort/null.gif" height="1" width="1"></td>
<td class="mailtitlebar"><a href="" onclick="NavA('/mail/MessageSort?sid=3B886D11EEAAF546F83EFAA8506E56BC30949BC9&amp;userid=marcmeesters%40telfort.nl&amp;seq=+Q&amp;auth=+A&amp;srcfolder=INBOX&amp;sort=7&amp;style=default&amp;start=100&amp;end=1'); return false">Ontvangen&nbsp;</a>&nbsp;</td>
<td width="1"><img src="/graphics/telfort/null.gif" height="1" width="1"></td>
<td class="mailtitlebar"><a href="" onclick="NavA('/mail/MessageSort?sid=3B886D11EEAAF546F83EFAA8506E56BC30949BC9&amp;userid=marcmeesters%40telfort.nl&amp;seq=+Q&amp;auth=+A&amp;srcfolder=INBOX&amp;sort=9&amp;style=default&amp;start=100&amp;end=1'); return false">Grootte&nbsp;</a>&nbsp;</td>
</tr>
<tr><td colspan="15" bgcolor="#f0f0f0"><img src="/graphics/telfort/null.gif" height="1" width="1"></td></tr><!-- Message List Head --><!-- Message List --><tr valign="middle">
<td width="20" align="center" bgcolor="#f0f0f0"><input type="checkbox" name="msguid" value="3330"></td>
<td width="1" bgcolor="#f0f0f0"><img src="/graphics/telfort/null.gif" height="1" width="1"></td>
<td width="20" align="center">
<script>
var stat = '<IMG SRC="/graphics/priority_normal.gif" BORDER=0 width="10" height="18"><IMG SRC="/graphics/new.gif" BORDER=0 width="20" height="18"><IMG SRC="/graphics/attach_none.gif" BORDER=0 width="8" height="18">';
</script>
<script>
if (stat.indexOf('high.gif') > -1 )
{
document.write ('<font face="Tahoma" size="2" color="#141D7C"><b>!!</b></font>');
}
else if (stat.indexOf('low.gif') > -1 )
{
document.write ('<font face="Tahoma" size="2" color="#141D7C"><b>!</b></font>');
}
</script></td>
<td width="1" bgcolor="#f0f0f0"><img src="/graphics/telfort/null.gif" height="1" width="1"></td>
<td width="20" align="center" bgcolor="#ffffff"><script>
if (stat.indexOf('new.gif') > -1)
{
document.write ('<img src="/graphics/telfort/mail-icon.gif" width="20" height="20" border="0" alt="">');
}
else if (stat.indexOf('deleted.gif') > -1)
{
document.write ('<img src="/graphics/telfort/cancel.gif" width="20" height="20" border="0" alt="">');
}
else if (stat.indexOf('replied.gif') > -1)
{
document.write ('<img src="/graphics/telfort/reply.gif" width="20" height="20" border="0" alt="">');
}
else
{
document.write ('<img src="/graphics/telfort/mailopen-icon.gif" width="20" height="20" border="0" alt="">');
}
</script><img src="/graphics/telfort/mail-icon.gif" width="20" height="20" border="0" alt=""></td>
<td width="1" bgcolor="#ffffff"><img src="/graphics/telfort/null.gif" height="1" width="1"></td>
<td width="20" align="center" bgcolor="#ffffff"><script>
if (stat.indexOf('attach.gif') > -1)
{
document.write ('<img src="/graphics/telfort/attach-icon.gif" width="20" height="20" border="0" alt="">');
}
</script></td>
<td width="1" bgcolor="#ffffff"><img src="/graphics/telfort/null.gif" height="1" width="1"></td>
<td bgcolor="#ffffff" class="mailtxt">&nbsp;&nbsp;<b><a href="" onclick="OnPhoenixRead('/mail/MessageRead?sid=3B886D11EEAAF546F83EFAA8506E56BC30949BC9&amp;userid=marcmeesters%40telfort.nl&amp;seq=+Q&amp;auth=+A&amp;srcfolder=INBOX&amp;uid=3330&amp;srch=0&amp;style=default'); return false">Tweakers.net Nieuwsbrief</a></b></td>
<td width="1" bgcolor="#ffffff"><img src="/graphics/telfort/null.gif" height="1" width="1"></td>
<td bgcolor="#ffffff" class="mailtxt">&nbsp;&nbsp;<b><a href="" onclick="OnPhoenixRead('/mail/MessageRead?sid=3B886D11EEAAF546F83EFAA8506E56BC30949BC9&amp;userid=marcmeesters%40telfort.nl&amp;seq=+Q&amp;auth=+A&amp;srcfolder=INBOX&amp;uid=3330&amp;srch=0&amp;style=default'); return false">Samsung toont info eerste Windows Phone ...</a></b></td>
<td width="1" bgcolor="#ffffff"><img src="/graphics/telfort/null.gif" height="1" width="1"></td>
<td bgcolor="#ffffff" class="mailtxt">&nbsp;&nbsp;<b>jul 30</b></td>
<td width="1" bgcolor="#ffffff"><img src="/graphics/telfort/null.gif" height="1" width="1"></td>
<td bgcolor="#ffffff" class="mailtxt">&nbsp;&nbsp;<b>42.9 KB</b></td>
</tr>
<tr><td colspan="15" bgcolor="#bbbdbf"><img src="/graphics/telfort/null.gif" height="1" width="1"></td></tr>
<!-- Message List end--><tr valign="middle">
<td width="20" align="center" bgcolor="#f0f0f0"><input type="checkbox" name="msguid" value="3329"></td>
<td width="1" bgcolor="#f0f0f0"><img src="/graphics/telfort/null.gif" height="1" width="1"></td>
<td width="20" align="center">
<script>
var stat = '<IMG SRC="/graphics/priority_normal.gif" BORDER=0 width="10" height="18"><IMG SRC="/graphics/new.gif" BORDER=0 width="20" height="18"><IMG SRC="/graphics/attach_none.gif" BORDER=0 width="8" height="18">';
</script>
<script>
if (stat.indexOf('high.gif') > -1 )
{
document.write ('<font face="Tahoma" size="2" color="#141D7C"><b>!!</b></font>');
}
<!-- Message List end--></tbody></table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T17:35:03.263

也许尝试改变

将 href .. 行插入按钮或其他具有 onClick 事件的结构中。你这样做的方式，似乎只是 href 试图转到不存在的 url ("")

希望这是问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T14:56:42.567

更改显示的行

```
HtmlElementCollection links = Frame_A.Document.GetElementsByTagName("b"); 
```

到

```
HtmlElementCollection links = Frame_A.Document.GetElementsByTagName("a"); 
```

您设置的链接等于所有带有粗体标签的元素。因为链接在粗体标记内，内部文本条件通过。然后，您尝试单击一个粗体标记，这显然没有任何作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T08:42:11.150

如果我理解正确，您想单击服务器端的链接。我认为最好的方法是使用 JS。

例如，假设我们有一个链接（简单标签）和一个服务器端按钮。当您单击一个按钮时，您希望自动单击该链接。

解决方案：我们需要从服务器端调用返回一段可以点击链接的 Javascript 代码。该解决方案使用 jQuery。

代码隐藏：

```
protected void btnTest_Click(object sender, EventArgs e)
{
    ClientScript.RegisterClientScriptBlock(typeof(Page), "ClickOnLink", "<script type='text/javascript'>$(document).ready(function () { var link = $('#linkToClick'); link.click(); }); </script>");
} 
```

页面标记：

```
<asp:Button runat="server" ID="btnTest" OnClick="btnTest_Click" Text="Go!"/>
<a id="linkToClick" href="#" onclick="alert('Hi, Im clicked'); return false;">Click to alert</a> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T10:05:10.697

你总是可以做到老派：用鼠标模拟输入。

首先，获取链接的位置 - 在其 ClientRectangle 中使用某个点（中间效果很好）[http://msdn.microsoft.com/de-de/library/system.windows.forms.htmlelement.clientrectangle.aspx](http://msdn.microsoft.com/de-de/library/system.windows.forms.htmlelement.clientrectangle.aspx)

接下来，将鼠标移动到该点[模拟鼠标移动（C#）](https://stackoverflow.com/questions/1949609/simulating-mouse-movement-c)

并模拟点击[如何在 C# 中模拟鼠标点击？](https://stackoverflow.com/questions/2416748/how-to-simulate-mouse-click-in-c)

重要提示：这些链接必须在屏幕上，因此使您的 HTML 元素足够大或插入一些巧妙的逻辑来滚动..（或简单地使用 ScrollIntoView [http://msdn.microsoft.com/de-de/library/system。 windows.forms.htmlelement.scrollintoview.aspx](http://msdn.microsoft.com/de-de/library/system.windows.forms.htmlelement.scrollintoview.aspx) )

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T10:19:56.317

这里有两件事：

1.  您想单击链接转到页面。
2.  您想触发链接的 onClick 事件。

第一个是小菜一碟。如果你想要第二个，你正在寻找一个用于 c# 的 javascript 引擎：D

而且，是的，用户脚本可能是一个可能的解决方案。

ps如果我错了，请纠正我。

编辑：JavaScript 引擎是浏览器的一个组件，通常与它捆绑在一起。它负责页面上的所有 JavaScript。现在，cURL，或 WebClient 或 wget 没有这个引擎。他们只是为您获取纯 html 内容。因此，自动化需要 JavaScript 的东西的更好选择是用户脚本。如果您以前没有听说过用户脚本，那么它是一段 javascript 代码，可以在您指定的页面上执行，从而允许您在加载页面后立即在页面上运行代码。查看[greasemonkey](http://greasespot.net)和[用户脚本](http://userscripts.org)。如果您仍然想了解如何使用 JavaScript 引擎，您应该等待其他人对该主题做出回应。我对以独立方式使用一个没有太多想法。**

# facebook-graph-api - 使用 Facebook Graph API 搜索确切的字符串

> ID：11547023
> 
> 赞同：6
> 
> 时间：2012-07-18T17:29:38.980
> 
> 标签：facebook-graph-api

我想使用 Facebook Graph API 搜索与“我的字符串”完全匹配的页面。

我尝试了[https://graph.facebook.com/search?q=%22My%20String%22&type=page](https://graph.facebook.com/search?q=%22My%20String%22&type=page) - 但它返回匹配“字符串”或“我的”的页面。

如何构建仅返回与引用字符串完全匹配的搜索查询？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T18:41:13.810

目前，你不能。它在[愿望清单](https://developers.facebook.com/bugs/403508516352539/)上进行了分类。

因此，您必须在 Python 中包装请求：

```
import requests
query = 'My String'
r = requests.get('https://graph.facebook.com/search?q=%s&type=page' % query)
result = r.json
result['data'] = [ item for item in result['data']
                   if query.lower() in item['name'].lower() ]
print [ item['name'] for item in result['data'] ] 
```

现在你只有完全匹配。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-18T18:14:07.250

尝试使用 Unicode，U+0200 是空格键，所以连接“My”、U+0200 和“String”。不知道这是否有效。

# iphone - 不能完全降低随机化

> ID：11547027
> 
> 赞同：0
> 
> 时间：2012-07-18T17:29:49.753
> 
> 标签：iphone, objective-c, ios5, random

我已经建立了一个专门的卡片应用程序。它的作用是允许用户“绘制”一张卡片，然后查看卡片，并将其放回牌组中的随机位置。我遇到的唯一问题是，通常情况下，卡片被放在牌堆的顶部。

这是 .h 文件的内容：

```
@class _Card;

@interface _Deck : NSObject

@property (readonly) NSString *deckData;
@property (readonly) NSUInteger count;
@property (readonly) NSUInteger deckCount;
@property (readonly) BOOL needsReset;
@property (readonly) NSArray *cards;

- (id)initWithArray:(NSArray *)array;
- (id)initWithContentsOfFile:(NSString *)filePath;

- (void)shuffle;
- (NSArray *)draw;
- (void)reset;
- (void)changeEdition;

@end 
```

现在，这是我的抽牌方法，它会抽一张牌（如果牌有指定，则多张牌），然后将这张牌放回牌组，如果允许的话：

```
- (NSArray *)draw {

    // first, we create an array that can be returned, populated with the
    // cards that we drew
    NSMutableArray *drawArray = [[[NSMutableArray alloc] init] autorelease];

    // next, we get the top card, which is actually located in the 
    // indexArray (I use this for shuffling, pulling cards, etc.)
    NSNumber *index = [[[indexArray objectAtIndex:0] retain] autorelease];

    // now we get the card that the index corresponds to
    // from the cards array
    _Card *card = [cards objectAtIndex:[index integerValue]];

    // now I remove the index that we 
    // got from the indexArray...don't worry,
    // it might be put back in
    [indexArray removeObject:index];

    // if the card is supposed to discard after
    // draw, we leave it out
    if(!card.discard) {

        int insertIndex = arc4random_uniform(indexArray.count);

        // then I insert the card into the deck using the random, random 
        // number
        [indexArray insertObject:index atIndex:insertIndex];
    }

    _Card *cardCopy = [card copy];

    // we add the card to the array 
    // that we will return
    [drawArray addObject:cardCopy];

    // next, if the card is not the final card...
    if(!card.final) {

        // ...and the card has an 
        // additional draw specified...
        if(card.force) {

            // we keep drawing until we need to stop
            [drawArray addObjectsFromArray:[self draw]];
        }
    }

    return drawArray;
} 
```

有什么我可能做错了吗？如果您需要更多信息，请告诉我。提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T17:49:01.097

如果我理解正确，问题是它在 indexArray 的索引 0 处插入卡？

好的，你有没有尝试过这样的事情：

（暂时不要使用这条线`[indexArray removeObject:index];`）

```
if(!card.discard)
{
    int insertIndex = arc4random_uniform(indexArray.count);
    id obj = [indexArray objectAtIndex:index];
    [indexArray removeObjectAtIndex:index];
    [indexArray insertObject:obj atIndex:insertIndex];
NSLog(@"insertIndex is %i and obj is %@", insertIndex, obj);
}
else
{
    [indexArray removeObjectAtIndex:index];
} 
```

您的代码似乎没问题，我猜它只是不喜欢删除对象之前...我添加了日志只是为了让您可以查看它是否真的每次都将其插入顶部。给我一个更新 - 如果这不起作用，我可以看看你的项目文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T18:52:08.790

“经常”是什么意思？

你在这里展示的看起来很完美......

请记住，这是**随机**的，很有可能（尽管很少见）连续 10 次获得特定数字。 **从长远来看**，你应该得到一个均匀的分布。

运行此例程 10,000,000 次左右，并检查您获得每个数字的次数（确保每次在牌堆中拥有相同数量的卡片），然后再确定有问题。

另外，您确定您的 indexArray 包含正确的值并且您没有在其中复制 0 吗？

# ios - 在主文件夹中添加框架

> ID：11547028
> 
> 赞同：1
> 
> 时间：2012-07-18T17:29:53.270
> 
> 标签：ios, xcode

如何向 Xcode/iOS 项目添加框架，以便 Xcode 存储相对于我的主文件夹 ( `~`) 的路径？不是根目录，不是项目文件夹 - 主页。

# c# - 无论如何，是否只将类的特定值绑定到数据网格？

> ID：11547030
> 
> 赞同：0
> 
> 时间：2012-07-18T17:29:56.747
> 
> 标签：c#, datagrid

有时，我通常会使用我想要的数据类型创建一个类，如下所示：

```
public class message{
    private string subject { get; set; }
    private string message { get; set; }
} 
```

这样，我可以将 a 绑定`List<message>`到数据网格并更改`DataPropertyName`.

但是，如果我碰巧为这个类添加了更多的自动属性，我的数据网格就会开始出现问题，有时我不只是想要数据网格的一些属性。无论如何我可以将数据网格绑定到我选择的值`DataPropertyName`吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T18:02:22.147

如果您不想在数据网格中添加额外的列，为什么不从您的查询开始，并且不要在 SELECT 子句中列出它们。这具有减少网络流量的额外好处。

在同一张表上创建多个查询或视图，并在正确的时间根据您的需要使用正确的查询或视图。这是“上游”解决方案。

或者，

> 当 AutoGenerateColumns 属性设置为 true 时，每列会自动将其 DataPropertyName 属性设置为 DataSource 属性指定的数据源中的属性或数据库列的名称。此绑定也可以手动执行，当您只想显示数据源中可用的属性或数据库列的子集时，这很有用。在这种情况下，请将 AutoGenerateColumns 属性设置为 false，然后手动添加每个 DataGridViewColumn，将每个 DataPropertyName 属性的值设置为要显示的数据源中的属性或数据库列。

That is straight from MSDN, you should have researched a little more thoroughly before posting this. [http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewcolumn.datapropertyname.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewcolumn.datapropertyname.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T17:50:33.807

您可以创建一个方法来提供 DataView。

假设你有这样的事情：

```
public class message {
    private string subject { get; set; }
    private string message { get; set; }
    private string otherValue { get; set; }
} 
```

然后你可以在消息类中添加这样的方法：

```
public static DataView GetDataGridList(List<message> lstMessages) {
    DataTable dt = new DataTable();
    // Add the columns here for whatever properties you want
    dt.Columns.Add("subject");
    dt.Columns.Add("message");

    foreach (message msg in lstMessages) {
        DataRow dr = dt.NewRow(); // I think that's the call, I'm doing this off the top of my head, sorry.
        dr["subject"] = msg.subject;
        dr["message"] = msg.message;
    }

    return (dt.DefaultView);
} 
```

然后，当您创建 DataGrid 时，只需像这样绑定它：

```
List<message> lstMessages = new List<message>();
// Populate the list however you want here.
DataGrid dg = new DataGrid();
dg.DataSource = message.GetDataGridList(List<message>); 
```

你应该很高兴。请记住，如果您更改所需的属性，将列添加到 DataTable，然后在 foreach 循环中。

# user-interface - 如何在 gtk 窗口中打印变量的值？

> ID：11547031
> 
> 赞同：0
> 
> 时间：2012-07-18T17:29:58.343
> 
> 标签：user-interface, gtk

`maxflow`我的文件中有全局变量`gui.c`。我正在使用`GtkAssistant`多个窗口。上`page[5]`，我想打印这个值。这是我的代码的一部分：

```
typedef struct {
    GtkWidget *widget;
    gint index;
    const gchar *title;
    GtkAssistantPageType type;
    gboolean complete;
} PageInfo;

PageInfo page[6] = {
    {NULL, -1, "Introduction", GTK_ASSISTANT_PAGE_INTRO, TRUE},
    {NULL, -1, "Projects", GTK_ASSISTANT_PAGE_CONTENT, TRUE},
    {NULL, -1, "Profit For Projects", GTK_ASSISTANT_PAGE_CONTENT, TRUE},
    {NULL, -1, "Prerequisites For Projects", GTK_ASSISTANT_PAGE_CONTENT, TRUE},
    {NULL, -1, "Click the Button", GTK_ASSISTANT_PAGE_PROGRESS, FALSE},
    {NULL, -1, "Confirmation", GTK_ASSISTANT_PAGE_CONFIRM, TRUE},
};

page[5].widget = gtk_label_new("OUTPUT\n" "it is time to leave!"); 
```

这不是连续的代码，第一部分是结构，然后是页面的定义，然后我刚刚在页面 [5] 上展示了我在做什么。现在我想在我的窗口上显示这个文本和一个全局变量的值，任何人都可以建议更改而不是`gtk_label_new()`我应该使用什么来完成我的任务。我对 gtk 很陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:16:19.643

您可以创建一个值为`maxflow`using [`g_snprintf`](http://developer.gnome.org/glib/2.28/glib-String-Utility-Functions.html#g-snprintf)or[`snprintf`](http://pubs.opengroup.org/onlinepubs/009695399/functions/fprintf.html)或此类函数的字符串并将其传递给`gtk_label_new`. 您可以尝试以下几行：

```
char msg[32]={0};
g_snprintf(msg, sizeof msg, "OUTPUT: maxflow is %d", maxflow);
page[5].widget = gtk_label_new(msg); 
```

希望这可以帮助！

# sql-server - 数据库未确认死锁 t-sql 2005

> ID：11547041
> 
> 赞同：0
> 
> 时间：2012-07-18T17:30:14.413
> 
> 标签：sql-server, database, tsql, sql-server-2005

例如，存在表 A 和表 B，我需要在 A 和 B 中处理更新，我决定在使用期间对它们进行表锁定（按照我的架构师的要求）。同时，调用另一个过程，该表锁定 B，然后锁定 A。

这笔交易会完成吗？我有一种感觉，这是一个死锁，很确定，因为它没有释放任何资源......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:41:08.913

是的，这是一个可能的死锁。

死锁场景是

你的任务锁 A
其他任务锁 B

然后你的任务试图锁定 B 但它不能因为你有锁而其他任务试图锁定 A 但它不能因为你有它。

因此，其中一项任务必须失败/回滚，以便另一项可以完成。根据使用的 RDBMS，db 将选择其中之一来终止。

通常，解决方案是指导您必须在所有进程中以相同的顺序锁定资源，通常这必须手动强制执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T18:16:32.793

是的。这种方法将以经典的循环死锁结束，如此处[所述](http://sqlindian.com/2012/07/06/cyclic-deadlock/)

使用表级别锁进行更新是一种矫枉过正。这样做的理由是什么？如果您有正确的索引，则会在键级别获取锁，这有助于多个进程同时访问相关表。

最好的做法是尽可能以相同的顺序访问表。

# java - 让 Ksoap2 客户端与基于 PHP 的 Web 服务通信时出现问题

> ID：11547046
> 
> 赞同：0
> 
> 时间：2012-07-18T17:30:23.140
> 
> 标签：java, php, soap, wsdl, ksoap2

我在让 PC 和 Android 上的 ksoap2 客户端与 PHP Web 服务正确通信时遇到问题。我已经尝试过 PHP 包含的库和 nusoap，但都没有。

忘记错误。Android 和 PC 客户端都给出 org.xmlpull.v1.XmlPullParserException 但消息不同。例如 PC 给出的*PI 不能以 xml 开头*

这是我的 PC 客户端的代码。

```
import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.*;

public class client {

    public static void main(java.lang.String args[]) {
        final String SOAP_ACTION = "http://secure.g4apps.com/submitAxios/writegpsdata";
        final String METHOD_NAME = "writegpsdata";
        final String NAMESPACE = "http://secure.g4apps.com/submitAxios/";
        final String URL = "http://secure.g4apps.com/submitAxios.php";

        SoapObject rpc = new SoapObject(NAMESPACE,METHOD_NAME);
        SoapSerializationEnvelope env = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        rpc.addProperty("writegpsdataRequest","A1,E1,E1,AT333AT333,9055627513,2012-02-02 02:02:02,2012-02-02 02:02:02,-454545.343434,434343.232323,A334A334A334A443X,1000000,3434");

        env.bodyOut=rpc;
        env.encodingStyle = SoapSerializationEnvelope.XSD;

        HttpTransportSE ht = new HttpTransportSE(URL);
        ht.debug = true;

        try {
            ht.call(SOAP_ACTION, env);

            System.out.println(ht.requestDump);

        }
        catch(org.xmlpull.v1.XmlPullParserException ex2) {
            System.out.println("Error" + ex2.toString() );
        }
        catch (Exception ex){
            String error = ex.toString();
            System.out.println("Error: "+ error);
        }

    }
} 
```

这是我的 PHP 服务器代码。这是函数 writegpsdata 的通信，但客户端在服务器响应上出错。

```
<?php
// submitGPS is a soap server which writes GPS data to a mysql database.
// requires the writegpsdata.inc file which contains the required function
// uses submitGPS.wsdl file for defining soap service

require_once ("writegpsdata.axios.inc.php");
//require_once ("lib/nusoap.php");

ini_set("soap.wsdl_cache_enabled","0"); //disabling WSDL caching
$server = new SoapServer("http://secure.g4apps.com/submitAxios.wsdl");
$server->AddFunction("writegpsdata");
$server->handle();
?> 
```

为了更好地衡量，这里是 wsdl 文件。

```
<?xml version="1.0"?>
<wsdl:definitions xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://secure.g4apps.com/submitAxios/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" name="submitAxios" targetNamespace="http://secure.g4apps.com/submitAxios/">
  <wsdl:message name="writegpsdataRequest">
    <wsdl:part name="writegpsdataRequest" type="xsd:string"/>
  </wsdl:message>
  <wsdl:message name="writegpsdataResponse">
    <wsdl:part name="writegpsdataResponse" type="xsd:string"/>
  </wsdl:message>
  <wsdl:portType name="submitAxios">
    <wsdl:operation name="writegpsdata">
      <wsdl:input message="tns:writegpsdataRequest"/>
      <wsdl:output message="tns:writegpsdataResponse"/>
    </wsdl:operation>
      </wsdl:portType>
  <wsdl:binding name="submitAxiosSOAP" type="tns:submitAxios">
    <soap:binding style="rpc" transport="http://schemas.xmlsoap.org/soap/http"/>
    <wsdl:operation name="writegpsdata">
      <soap:operation soapAction="http://secure.g4apps.com/submitAxios/writegpsdata"/>
      <wsdl:input>
        <soap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="http://secure.g4apps.com/submitAxios/" use="encoded"/>
      </wsdl:input>
      <wsdl:output>
        <soap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="http://secure.g4apps.com/submitAxios/" use="encoded"/>
      </wsdl:output>
    </wsdl:operation>
  </wsdl:binding>
  <wsdl:service name="submitAxios">
    <wsdl:port binding="tns:submitAxiosSOAP" name="submitAxiosSOAP">
      <soap:address location="http://secure.g4apps.com/submitAxios.php"/>
    </wsdl:port>
  </wsdl:service>
</wsdl:definitions> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T14:20:08.013

事实证明，我的包含函数 writegpsdata 有一些我在 Eclipse 中看不到的额外字符或结尾（php 标记之外）。我复制了内容，删除了文件并将其粘贴到一个新文件中，离开时出现此错误。尽管我的 android 客户端仍然存在问题。稍后我可能会发布另一个问题。

# python - 如何制作 5.1 和 7.1 环绕声文件

> ID：11547050
> 
> 赞同：0
> 
> 时间：2012-07-18T17:30:30.557
> 
> 标签：python, matlab, octave, surround

我正在尝试制作/创建一个 5.1 和一个 7.1 环绕声文件，但我很难找到一种方法来做到这一点。我正在使用 ubuntu 12.04，并且可以访问 octave / matlab / python。我了解如何在 octave / matlab / python 中创建音频文件，但不确定如何为 5.1 和 7.1 环绕文件创建正确的文件格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:15:36.220

我相信 Vorbis 是唯一支持环绕声的免费声音编解码器。曾经有一些python项目可以处理这种格式，但它们似乎不再维护了。

您可以尝试浏览这些旧项目（即[pyvorbis](http://ekyo.nerim.net/software/pyogg/)）。

或者，您可以尝试使用[这个](http://www.mathworks.com/matlabcentral/fileexchange/10061-vorbis-ogg-audio-encodingdecoding)matlab 项目，看看一个普通的 6 通道 vorbis 文件是否适用于 5.1 环绕声（快速浏览一下[规范](http://xiph.org/vorbis/doc/Vorbis_I_spec.html)让我认为它应该）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-06T21:35:20.983

如果您能够创建 6 个（用于 5.1）或 8 个（7.1）单独的单声道音频文件，每个扬声器一个（front_left.wav、front_center.wav、...），您可以使用以下命令行加入它们：

```
ffmpeg -i front_left.wav -i front_right.wav -i front_center.wav -i lfe.wav -i back_left.wav -i back_right.wav -filter_complex "[0:a][1:a][2:a][3:a][4:a][5:a]join=inputs=6:channel_layout=5.1:map=0.0-FL|1.0-FR|2.0-FC|3.0-LFE|4.0-BL|5.0-BR[a]" -map "[a]" output.wav 
```

此行来自[https://trac.ffmpeg.org/wiki/AudioChannelManipulation](https://trac.ffmpeg.org/wiki/AudioChannelManipulation)，其中包含其他几个有用的频道操作示例。`LFE`（低频效果）是指低音炮。[ffmpeg](https://www.ffmpeg.org/)可用于 Windows、Mac 和 Linux（例如作为同名的 Debian 软件包）。

如果您想直接从 Python 创建多声道音频文件，请查看[pydub](https://github.com/jiaaro/pydub)包（它在后台使用 ffmpeg 库）。

要探测给定的音频文件是否具有多声道内容，您可以使用`ffprobe`ffmpeg 套件：

```
ffprobe -hide_banner output.wav 
```

其中显示例如：

```
Input #0, wav, from 'output.wav':
  Metadata:
    encoder         : Lavf58.20.100
  Duration: 00:00:01.28, bitrate: 1536 kb/s
    Stream #0:0: Audio: pcm_s16le ([1][0][0][0] / 0x0001), 16000 Hz, 5.1, s16, 1536 kb/s 
```

# windows-ce - 在更新期间迁移 Windows CE 5.0 用户帐户凭据

> ID：11547053
> 
> 赞同：1
> 
> 时间：2012-07-18T17:30:39.813
> 
> 标签：windows-ce, credentials, ntlm

凭据如何存储在 Windows CE 5.0 设备上？用户帐户存储在 [HKLM\Comm\Security\UserAccounts] 的注册表中。虽然使用 Windows CE 3.0 可以将帐户从一个注册表复制到另一个注册表，但这在 Windows CE 5.0 中不再起作用。相反，必须在每台设备上使用 NTLMSetUserInfo 注册凭据。

我需要保存凭据，升级到 Windows CE 5.0 平台的下一版本并恢复凭据。不幸的是，它们不再有效。是否有另一种方法来存储和/或迁移凭据？[HKEY_LOCAL_MACHINE\Windows CE 工具] 中的平台 GUID 未更改。

# html - 如何将包装好的 div 排列到顶部？

> ID：11547069
> 
> 赞同：2
> 
> 时间：2012-07-18T17:31:47.363
> 
> 标签：html, css

在我的 Web 应用程序屏幕中，我有许多具有相同宽度和不同高度的区域。例如。我有六个 div：

```
 <div style="height: 50px">1</div>
    <div style="height:150px">2</div>
    <div style="height:250px">3</div>
    <div style="height:130px">4</div>
    <div style="height:120px">5</div>
    <div style="height: 30px">6</div> 
```

和CSS：

```
 div{
        border:1px solid red;
        float:left;
        width:100px;
    } 
```

浏览器显示如下：

![在此处输入图像描述](../Images/b31d0fd8415cb348ab855e6b5c78bc11.png)

如果浏览器窗口更改为更小宽度的 div 会自动换行。包裹的 div 根据具有最大高度的顶部 div 对齐。屏幕上出现不必要的空白：

![在此处输入图像描述](../Images/d4cf8c5a99d6c42915d88927d3d436fc.png)

有没有办法将所有包装的 div 排列到顶部？

![在此处输入图像描述](../Images/3cc7223514606e2b97cd676fbb1fbfec.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T17:39:13.063

试试这个...

[http://masonry.desandro.com//](http://masonry.desandro.com//)

它可能比您想要/需要的更炫。但是没有一个 CSS 选项可以解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T17:34:08.433

我不知道有什么方法可以在 CSS 中做到这一点。如果您不反对使用 JavaScript，jQuery Masonry 插件应该可以让您执行此操作[。](http://masonry.desandro.com/)

# android - 无法在 TableLayout 中删除 textEdit

> ID：11547073
> 
> 赞同：1
> 
> 时间：2012-07-18T17:31:59.727
> 
> 标签：android, android-edittext

我正在使用 Android 4.2 和 Eclipse indigo (3.7.0)。我创建了一个`TableLayout`6 行。我想在 Eclipse 中使用图形布局在一行中添加一个`TextView`和一个。`EditText`添加没问题`TextView`，但是当我拖放时`EditText`，显示以下错误：

```
NOTE: This project contains Java compilation errors, which can cause rendering failures for custom views. Fix compilation problems first.
java.util.LinkedHashMap.eldest()Ljava/util/Map$Entry; 
```

我还没有写任何代码。当我第一次创建项目时，任何代码都是由 eclipse 生成的。editText 包含在 xml 中，但图形布局无法显示它。我剪切并粘贴了xml：

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:stretchColumns="1,2,3" >

        <TableRow
            android:id="@+id/tableRow1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <EditText
                android:id="@+id/editText1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:ems="10" >

                <requestFocus />
            </EditText>

        </TableRow>

        <TableRow
            android:id="@+id/tableRow2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >
        </TableRow>

        <TableRow
            android:id="@+id/tableRow3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >
        </TableRow>

        <TableRow
            android:id="@+id/tableRow4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >
        </TableRow>

        <TableRow
            android:id="@+id/tableRow5"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >
        </TableRow>

        <TableRow
            android:id="@+id/tableRow6"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >
        </TableRow>

</TableLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T19:09:20.573

我在 Eclipse 中尝试了您的代码，但没有任何问题。一切正常。在 SDK 管理器中检查您的 SDK 是否是最新的，或者您的所有插件是否都已更新。图形布局对用户友好，但对开发人员不友好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T20:06:28.183

尝试将其添加到您的 EditText 上：

android:inputType="textNoSuggestions"

[加载布局时出现异常：java.util.LinkedHashMap.eldest()Ljava/util/Map$Entry;](https://stackoverflow.com/questions/11275754/exception-in-loading-layout-java-util-linkedhashmap-eldestljava-util-mapentr/11276651#11276651)

# windows - 如何导出带有详细消息的 Windows 事件日志

> ID：11547075
> 
> 赞同：4
> 
> 时间：2012-07-18T17:32:04.117
> 
> 标签：windows, events, logging

我一直在网上搜索，似乎无法找到一个好的答案。我有点理解原因，但需要一些解决方案的帮助。

我使用以下命令导出 windows 系统日志。我希望/需要它们采用 evtx 格式供以后使用。

```
wevtutil epl system c:\SystemEvents.evtx 
```

目标是将它们发送给不会在同一服务器上查看它们的其他人。这当然会导致完整的事件文本不是导出日志的一部分，用户将看到如下内容：

> 找不到来自源 Server Administrator 的事件 ID XXX 的描述。引发此事件的组件未安装在本地计算机上，或者安装已损坏。您可以在本地计算机上安装或修复组件。
> 
> 如果事件起源于另一台计算机，则显示信息必须与事件一起保存。
> 
> 活动中包含以下信息：

我正在阅读此页面： [http ://technet.microsoft.com/en-us/library/cc749339%28WS.10%29.aspx](http://technet.microsoft.com/en-us/library/cc749339%28WS.10%29.aspx)

并在其中找到了以下信息片段：

> 要对记录在远程计算机上的事件进行故障排除，您必须导出并存档带有显示信息的日志。已保存事件的显示信息存储在 LocaleMetaData 文件夹中，当在另一台计算机上查看信息时，应将其与日志信息一起移动。

我不明白该声明所指的位置（或过程）。服务器上的任何地方都没有 LocaleMetaData 文件夹，所以我假设我需要以某种方式创建和导出一些附加数据以及 evtx 文件，然后重新合并回查看系统。

我在正确的轨道上吗？有人可以告诉我如何使用完整的详细消息完全导出事件日志吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T14:49:06.433

我找到了答案：

当你使用这个：

```
wevtutil al <FileName.evtx> [/l:<LocaleString>] 
```

导出... .evtx 文件夹的最终位置，将创建一个 LocaleMetaData 文件夹，其中包含 .MTA 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-26T12:43:15.230

试试这个：这解释了使用事件查看器导出 windows 日志事件的步骤。

[https://www.ibm.com/support/pages/exporting-windows-event-logs-event-viewer](https://www.ibm.com/support/pages/exporting-windows-event-logs-event-viewer)

# ruby-on-rails - 翻译成葡萄牙语 ActiveAdmin？

> ID：11547081
> 
> 赞同：0
> 
> 时间：2012-07-18T17:32:38.150
> 
> 标签：ruby-on-rails, activeadmin

有人可以告诉我一个教程，让管理员能够将 rails 3 翻译成葡萄牙语或其他语言？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T18:07:52.187

[http://guides.rubyonrails.org/i18n.html](http://guides.rubyonrails.org/i18n.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T18:32:56.673

active_admin 的翻译在这里： [https](https://github.com/gregbell/active_admin/tree/master/lib/active_admin/locales) ://github.com/gregbell/active_admin/tree/master/lib/active_admin/locales 选择一个文件，把它放在你的 config/locales 目录，用葡萄牙语语言环境更改第一行，然后开始翻译

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T10:28:38.427

Admin::MalfunctionsController#index 中的编码::CompatibilityError

不兼容的字符编码：UTF-8 和 ASCII-8BIT

# java - 使用 Java 扫描端口的最快方法

> ID：11547082
> 
> 赞同：32
> 
> 时间：2012-07-18T17:32:46.490
> 
> 标签：java, sockets, ip, port-scanning

我做了一个非常简单的端口扫描器，但是它运行得太慢了，所以我正在寻找一种让它扫描得更快的方法。这是我的代码：

```
public boolean portIsOpen(String ip, int port, int timeout) {
    try {
        Socket socket = new Socket();
        socket.connect(new InetSocketAddress(ip, port), timeout);
        socket.close();
        return true;
    } catch (Exception ex) {
        return false;
    }
} 
```

此代码测试特定端口是否在特定 IP 上打开。对于超时，我使用了最小值，`200`因为当我降低时它没有足够的时间来测试端口。

**它工作得很好，但是从 0 扫描到 65535 需要太多时间。有没有其他方法可以在不到 5 分钟的时间内从 0 扫描到 65535？**

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-07-18T17:34:51.690

如果 65536 个端口中的每一个都需要 200 毫秒（在最坏的情况下，防火墙会阻止一切，从而使每个端口都达到超时），那么数学非常简单：您需要 13k 秒，或大约 3 小时一半。

您有 2 个（非排他性的）选项可以使其更快：

*   减少超时
*   并行化你的代码

由于操作是受 I/O 限制的（与 CPU 限制相反——也就是说，您花费时间等待 I/O，而不是等待完成一些巨大的计算），**您可以使用很多很多线程**。尝试从 20 开始。他们会在其中划分 3 个半小时，**因此最长预期时间约为 10 分钟**。请记住，这会给另一边带来压力，即，被扫描的主机会看到带有“不合理”或“奇怪”模式的巨大网络活动，从而使扫描非常容易被检测到。

最简单的方法（即，更改最少）是使用 ExecutorService 和 Future API：

```
public static Future<Boolean> portIsOpen(final ExecutorService es, final String ip, final int port, final int timeout) {
  return es.submit(new Callable<Boolean>() {
      @Override public Boolean call() {
        try {
          Socket socket = new Socket();
          socket.connect(new InetSocketAddress(ip, port), timeout);
          socket.close();
          return true;
        } catch (Exception ex) {
          return false;
        }
      }
   });
} 
```

然后，您可以执行以下操作：

```
public static void main(final String... args) {
  final ExecutorService es = Executors.newFixedThreadPool(20);
  final String ip = "127.0.0.1";
  final int timeout = 200;
  final List<Future<Boolean>> futures = new ArrayList<>();
  for (int port = 1; port <= 65535; port++) {
    futures.add(portIsOpen(es, ip, port, timeout));
  }
  es.shutdown();
  int openPorts = 0;
  for (final Future<Boolean> f : futures) {
    if (f.get()) {
      openPorts++;
    }
  }
  System.out.println("There are " + openPorts + " open ports on host " + ip + " (probed with a timeout of " + timeout + "ms)");
} 
```

如果您需要知道*哪些端口是打开的*（而不仅仅是*多少*，如上例所示），您需要将函数的返回类型更改为`Future<SomethingElse>`，其中`SomethingElse`将保存端口和扫描结果，一些像：

```
public final class ScanResult {
  private final int port;
  private final boolean isOpen;
  // constructor
  // getters
} 
```

然后，在第一个片段中更改`Boolean`为，并返回or而不是仅仅or`ScanResult``new ScanResult(port, true)``new ScanResult(port, false)``true``false`

编辑：实际上，我只是注意到：在这种特殊情况下，您不需要 ScanResult 类来保存结果+端口，并且仍然知道哪个端口是打开的。由于您将期货添加到**List**，它是**有序**的，并且稍后，您**按照添加它们的相同顺序处理它们**，您可以有一个计数器，您可以在每次迭代时递增以了解您正在处理哪个端口. 但是，嘿，这只是为了完整和准确。**永远不要尝试这样做**，这太可怕了，我很惭愧我想到了这个......**使用 ScanResult 对象更干净**，代码更易于阅读和维护，并且允许您稍后，例如，使用 a`CompletionService`来改进扫描仪。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-18T17:49:40.513

除了并行扫描之外，您还可以使用更高级的端口扫描技术，例如此处解释的那些（TCP SYN 和 TCP FIN 扫描）：http: [//nmap.org/nmap_doc.html](http://nmap.org/nmap_doc.html)。可以在此处找到实现的 VB 代码：http: [//h.ackack.net/spoon-worlds-fastest-port-scanner.html](http://h.ackack.net/spoon-worlds-fastest-port-scanner.html)

然而，为了使用这些技术，您需要使用原始 TCP/IP 套接字。为此，您应该使用[RockSaw](http://www.savarese.com/software/rocksaw/)库。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-05-20T13:51:06.117

代码示例的灵感来自“Bruno Reis”

```
class PortScanner {

public static void main(final String... args) throws InterruptedException, ExecutionException {
    final ExecutorService es = Executors.newFixedThreadPool(20);
    final String ip = "127.0.0.1";
    final int timeout = 200;
    final List<Future<ScanResult>> futures = new ArrayList<>();
    for (int port = 1; port <= 65535; port++) {
        // for (int port = 1; port <= 80; port++) {
        futures.add(portIsOpen(es, ip, port, timeout));
    }
    es.awaitTermination(200L, TimeUnit.MILLISECONDS);
    int openPorts = 0;
    for (final Future<ScanResult> f : futures) {
        if (f.get().isOpen()) {
            openPorts++;
            System.out.println(f.get().getPort());
        }
    }
    System.out.println("There are " + openPorts + " open ports on host " + ip + " (probed with a timeout of "
            + timeout + "ms)");
}

public static Future<ScanResult> portIsOpen(final ExecutorService es, final String ip, final int port,
        final int timeout) {
    return es.submit(new Callable<ScanResult>() {
        @Override
        public ScanResult call() {
            try {
                Socket socket = new Socket();
                socket.connect(new InetSocketAddress(ip, port), timeout);
                socket.close();
                return new ScanResult(port, true);
            } catch (Exception ex) {
                return new ScanResult(port, false);
            }
        }
    });
}

public static class ScanResult {
    private int port;

    private boolean isOpen;

    public ScanResult(int port, boolean isOpen) {
        super();
        this.port = port;
        this.isOpen = isOpen;
    }

    public int getPort() {
        return port;
    }

    public void setPort(int port) {
        this.port = port;
    }

    public boolean isOpen() {
        return isOpen;
    }

    public void setOpen(boolean isOpen) {
        this.isOpen = isOpen;
    }

}
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-19T19:35:48.907

如果您决定使用 Nmap 选项并希望继续使用 Java，您应该查看[SourceForge.net 上的 Nmap4j](https://sourceforge.net/projects/nmap4j/)。

这是一个简单的 API，可让您将 Nmap 集成到 Java 应用程序中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-06-09T19:17:56.703

我编写了自己的异步 portscanner java 服务，它可以像 Nmap 一样通过 TCP-SYN-Scan 扫描端口。它还支持 IMCP ping 扫描，并且可以以非常高的吞吐量工作（取决于网络可以支持的内容）：

[https://github.com/subes/invesdwin-webproxy](https://github.com/subes/invesdwin-webproxy)

在内部，它使用 java 绑定 pcap 并通过 JMS/AMQP 公开其服务。如果您不介意它具有 root 权限，您也可以直接在您的应用程序中使用它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-09-10T18:02:03.243

不，这里最快的方法是使用动态创建的线程方法

```
Executors.newCachedThreadPool(); 
```

这样，它使用线程直到所有线程都被占用，然后当所有线程都被占用并且有一个新任务时，它将打开一个新线程并在其上执行新任务。

这是我的代码片段（感谢 Jack 和 Bruno Reis）

我还添加了搜索您输入的任何 IP 地址的功能，以获得一些附加功能和易用性。

```
 import java.net.InetSocketAddress;
    import java.net.Socket;
    import java.util.ArrayList;
    import java.util.List;
    import java.util.Scanner;
    import java.util.concurrent.Callable;
    import java.util.concurrent.ExecutionException;
    import java.util.concurrent.ExecutorService;
    import java.util.concurrent.Executors;
    import java.util.concurrent.Future;
    import java.util.concurrent.TimeUnit;

    class PortScanner {

    public static void main(final String... args) throws InterruptedException, ExecutionException 
    {
        final ExecutorService es = Executors.newCachedThreadPool();
        System.out.print("Please input the ip address you would like to scan for open ports: ");
        Scanner inputScanner = new Scanner(System.in);
        final String ip = inputScanner.nextLine();
        final int timeout = 200;
        final List<Future<ScanResult>> futures = new ArrayList<>();
        for (int port = 1; port <= 65535; port++) {
            // for (int port = 1; port <= 80; port++) {
            futures.add(portIsOpen(es, ip, port, timeout));
        }
        es.awaitTermination(200L, TimeUnit.MILLISECONDS);
        int openPorts = 0;
        for (final Future<ScanResult> f : futures) {
            if (f.get().isOpen()) {
                openPorts++;
                System.out.println(f.get().getPort());
            }
        }
        System.out.println("There are " + openPorts + " open ports on host " + ip + " (probed with a timeout of "
        + timeout + "ms)");
 es.shutdown();
    }

    public static Future<ScanResult> portIsOpen(final ExecutorService es, final String ip, final int port,
    final int timeout) 
    {
        return es.submit(new Callable<ScanResult>() {
            @Override
            public ScanResult call() {
                try {
                    Socket socket = new Socket();
                    socket.connect(new InetSocketAddress(ip, port), timeout);
                    socket.close();
                    return new ScanResult(port, true);
                } catch (Exception ex) {
                    return new ScanResult(port, false);
                }
            }
        });
    }

    public static class ScanResult {
private int port;

private boolean isOpen;

public ScanResult(int port, boolean isOpen) {
    super();
    this.port = port;
    this.isOpen = isOpen;
}

public int getPort() {
    return port;
}

public void setPort(int port) {
    this.port = port;
}

public boolean isOpen() {
    return isOpen;
}

public void setOpen(boolean isOpen) {
    this.isOpen = isOpen;
}

    }
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-07T06:59:56.160

我可能迟到了，但您可以通过使用 NIO2 单线程执行以下操作来进行批量端口扫描。通过使用单线程跟踪 NIO2 代码，我能够扫描所有主机以查找给定端口。请尝试合理的超时时间，并确保您有较大的 File Discriptor 用于处理

```
public static List<HostTarget> getRechabilityStatus(String...hosts,final int port, final int bulkDevicesPingTimeoutinMS) throws Exception {

    List<AsynchronousSocketChannel> channels = new ArrayList<>(hosts.length);
    try {
        List<CompletableFuture<HostTarget>> all = new ArrayList<>(hosts.length);

        List<HostTarget> allHosts = new ArrayList(hosts.length);
        for (String host : hosts) {
            InetSocketAddress address = new InetSocketAddress(host, port);
            HostTarget target = new HostTarget();
            target.setIpAddress(host);
            allHosts.add(target);
            AsynchronousSocketChannel client = AsynchronousSocketChannel.open();
            channels.add(client);
            final CompletableFuture<HostTarget> targetFuture = new CompletableFuture<>();
            all.add(targetFuture);
            client.connect(address, target, new CompletionHandler<Void, HostTarget>() {
                @Override
                public void completed(Void result, HostTarget attachment) {
                    attachment.setIsReachable(true);
                    targetFuture.complete(attachment);
                }

                @Override
                public void failed(Throwable exc, HostTarget attachment) {
                    attachment.setIsReachable(false);
                    attachment.errrorMessage = exc.getMessage();
                    targetFuture.complete(attachment);
                }
            });
        }

        try {
            if(bulkDevicesPingTimeoutinMS > 0) {
                CompletableFuture.allOf(all.toArray(new CompletableFuture[]{})).get(bulkDevicesPingTimeoutinMS, TimeUnit.MILLISECONDS);
            }else{
                // wait for all future to be complete 1000 scan is taking 7 seconds.
                CompletableFuture.allOf(all.toArray(new CompletableFuture[]{})).join();
            }
        } catch (Exception timeoutException) {
            // ignore
        }
        return allHosts;
    }finally {
        for(AsynchronousSocketChannel channel : channels){
            try{
                channel.close();
            }catch (Exception e){
                if(LOGGER.isDebugEnabled()) {
                    LOGGER.error("Erorr while closing socket",e);
                }
            }

        }
    }
static class HostTarget {

String ipAddress;
Boolean isReachable;
 public String getIpAddress() {
    return ipAddress;
}
public Boolean getIsReachable() {
    return isReachable;
}

public void setIpAddress(String ipAddress) {
    this.ipAddress = ipAddress;
}
public void setIsReachable(Boolean isReachable) {
    this.isReachable = isReachable;
}

} 
```

# javascript - 在复选框取消选中事件时从 HTML 下拉列表中删除项目

> ID：11547088
> 
> 赞同：0
> 
> 时间：2012-07-18T17:33:12.860
> 
> 标签：javascript, html, jsp

我有一个复选框列表和一个下拉列表。当我选中复选框时，我设法将元素动态添加到下拉列表中。

当我取消选中特定复选框时，如何从下拉列表中动态删除相应的项目。

这是我的代码

```
//<input type="checkbox" name="docCkBox" value="${document.documentName}" onclick="handleChange(this)"/>
// check box onclick event will call this function
   function handleChange(cb) {
         if (cb.checked)
    {

        // Create an Option object
        var opt = document.createElement("option");

        // Add an Option object to Drop Down/List Box
        document.getElementById("query_doc").options.add(opt);

        // Assign text and value to Option object
        opt.text = cb.value;
        opt.value = cb.value;

    }

    else{

//I want to remove a particuler Item when I uncheck the check-box
//by below method it will always remove the first element of the dropdown but not the corresponding element

 var opt = document.createElement("option");
 opt.text = cb.value;
 opt.value = cb.value;
 document.getElementById("query_doc").remove(opt);

 }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:45:45.363

您必须找到所需选项的索引并按索引将其删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T17:46:48.000

您需要访问已在 select 标记中的选项，而不是创建新选项。我会通过获取所有选项然后检查每个选项以查看它是否具有复选框的值来做到这一点。代码在 else 块中看起来像这样：

```
var opts = document.getElementById("query_doc").getElementsByTagName('option');
for(var i = 0; i < opts.length; i++){
    if(opts[i].value == cb.value){
        opts[i].parentNode.removeChild(opts[i]);
    }
} 
```

我还没有测试过代码，但大致的想法就在那里。

# forms - 如果提交的表单无效，带有 @Method("post") 的控制器应该如何处理请求？

> ID：11547090
> 
> 赞同：1
> 
> 时间：2012-07-18T17:33:26.113
> 
> 标签：forms, symfony

我在 symfony2 中有一个控制器，如下所示，如果用户表单有效，它将重定向到其他链接，但如果出现错误，它将保留在同一页面中并显示错误。当客户端验证被禁用并且只有服务器端验证正在检查错误时，这是​​一个简单的一般场景。

```
/**
 * Creates a new User entity.
 *
 * @Route("/create", name="admin_user_create")
 * @Method("post")
 * @Template("UserBundle:User:new.html.twig")
 */
public function createAction()
{
    $entity  = new User();
    $request = $this->getRequest();
    $form    = $this->createForm(new UserType() , $entity);

    $form->bindRequest($request);
    if($form->isValid())
    {
        // DO SOMETHING ... 
        return $this->redirect($this->generateUrl('some_link' , array( 'user_id' => $entity->getId() )));
    }

    // If the form is NOT valid, it will render the template and shows the errors.   
    return array(
        'entity' => $entity ,
        'form'   => $form->createView()
    );
} 
```

场景将如下所示：

1.  用户为表单输入了一些无效数据
2.  用户提交表单
3.  控制器检查表单是否有效
4.  由于它无效，它将呈现模板，在这种情况下

    ```
    @Template("UserBundle:User:new.html.twig") 
    ```

5.  浏览器中的路线将是`/create`
6.  如果用户`click`在浏览器链接上而不是它`post`会得到一个错误

我怎样才能解决这个问题 ？我必须再次重定向吗？既然方法是`post`可以重定向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T17:42:15.300

不要指定 @Method("POST") 并在方法中执行此操作：

```
if ($request->getMethod() == 'POST')
{
    $form->bindRequest($request);
    if($form->isValid())
    {
        // DO SOMETHING ... 
        return $this->redirect($this->generateUrl('some_link' , array( 'user_id' => $entity->getId() )));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T09:12:14.437

您可以接受`GET`或`POST`做某事链接：

```
/**
 * Creates a new User entity.
 *
 * @Route("/create", name="admin_user_create")
 * @Method("GET|POST")
 * @Template("UserBundle:User:new.html.twig")
 */
public function createAction()
{
    $entity  = new User();
    $request = $this->getRequest();
    $form    = $this->createForm(new UserType() , $entity);

    // Is this POST? Bind the form...
    if('POST' == $request->getMethod()) $form->bindRequest($request);

    // GET or from not valid? Return the view...
    if('GET' == $request->getMethod() || !$form->isValid()) :
        return array(
            'entity' => $entity ,
            'form'   => $form->createView()
        );
    endif;

    // Success, then persist the entity and redirect the user
    return $this->redirect($this->generateUrl('some_link',
        array('user_id' => $entity->getId()))
    );
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-06T03:13:22.190

```
/**
 * Creates a new User entity.
 *
 * @Route("/create", name="admin_user_create")
 * @Method("GET|POST")
 * @Template("Use`enter code here`rBundle:User:new.html.twig")
 */
public function createAction()
{
    $entity  = new User();
    $request = $this->getRequest();
    $form    = $this->createForm(new UserType() , $entity);
// Is this POST? Bind the form...
if('POST' == $request->getMethod()) $form->bindRequest($request);

// GET or from not valid? Return the view...
if('GET' == $request->getMethod() || !$form->isValid()) :
    return array(
        'entity' => $entity ,
        'form'   => $form->createView()
    );
endif;

// Success, then persist the entity and redirect the user
return $this->redirect($this->generateUrl('some_link',
    array('user_id' => $entity->getId()))
); 
```

}

# sql - 在 SQL Server 中以不同方式对分组值进行排序

> ID：11547092
> 
> 赞同：0
> 
> 时间：2012-07-18T17:33:30.040
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-server-2005

```
select 
  source_of_data,
  convert(varchar(10),a.DATECREATED,101),
  COUNT(*)
from some_table a
group by
  source_of_data, 
  convert(varchar(10),a.DATECREATED,101)
order by 
  source_of_data,
  convert(varchar(10),a.DATECREATED,101) 
```

输出数据如下所示：

```
mainframe 4/5/11  22
mainframe 4/6/11  45
mainframe n/n/nn  nn
sqlserver 4/5/11  44
sqlserver 4/6/11  67
sqlserver n/n/nn  nn 
```

但我希望输出看起来像这样：

```
mainframe 4/5/11  22
sqlserver 4/5/11  44
mainframe 4/6/11  45
sqlserver 4/6/11  67
mainframe n/n/nn  nn
sqlserver n/n/nn  nn 
```

通过这种方式，我可以轻松地直观地验证是否缺少任何特定日期的分组条目——比如有一天我们获得了大型机数据，但缺少 sqlserver 数据。有人可以帮助修改查询，这样我就不必求助于编写存储过程来实现我的目标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T17:47:36.907

如果我理解正确，只需将您的订单切换为

```
convert(Date, a.DATECREATED,101), source_of_data 
```

那么你的结果应该像你描述的那样出来

编辑：将其转换为 varchar，它不会按预期工作。将其转换为 DATE 类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T13:13:46.727

试试这个

```
 select 
      source_of_data,
      convert(varchar(10),a.DATECREATED,101),
      COUNT(*)
    from some_table a
    group by
      source_of_data, 
      convert(varchar(10),a.DATECREATED,101)
    order by 
     COUNT(*) 
```

# python - Python中函数的别名

> ID：11547095
> 
> 赞同：1
> 
> 时间：2012-07-18T17:33:43.073
> 
> 标签：python, introspection

我想找到函数的名称，因为它被称为......即调用函数的变量的名称。使用基本配方，即使用`__name__`,`func_name`或检查基本堆栈对我不起作用。例如

```
def somefunc():
    print "My name is: %s" % inspect.stack()[1][3]

a = somefunc
a()
# would output: out: "My name is: somefunc"
# whereas I want it to output: "My name is: a" 
```

我的直觉说我可以做到这一点，但我无法弄清楚。有没有蟒蛇大师？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:07:20.770

这里的问题是间接性。您可能会做一些复杂的事情，例如检查堆栈，获取调用该函数的模块的代码，从堆栈中解析行号以找到用于在本地上下文中调用该函数的标签，然后使用它，但是不一定会给你你想要的东西。考虑：

```
def func(x):
    print get_label_function_called_with()

def func_wrapper(func_in_func_wrapper):
    return func_in_func_wrapper

func_label = func
func_from_func_wrapper = func_wrapper(func_label)
func_from_func_wrapper() 
```

这应该打印`func`, `func_in_func_wrapper`, `func_label`, 还是`func_from_func_wrapper`? 乍一看，这似乎是一个显而易见的答案，但鉴于您永远不知道您正在调用的代码内部发生了哪种间接，您真的无法确定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T18:27:59.517

100% 正确执行此操作可能是不可能的，但您可以尝试以下方法：

```
import inspect
import parser

# this flatten function is by mike c fletcher
def flatten(l, ltypes=(list, tuple)):
    ltype = type(l)
    l = list(l)
    i = 0
    while i < len(l):
        while isinstance(l[i], ltypes):
            if not l[i]:
                l.pop(i)
                i -= 1
                break
            else:
                l[i:i + 1] = l[i]
        i += 1
    return ltype(l)

# function we're interested in
def a():
    current_func = eval(inspect.stack()[0][3])
    last_frame = inspect.stack()[1]
    calling_code = last_frame[4][0]
    syntax_tree = parser.expr(calling_code)
    syntax_tree_tuple = parser.st2tuple(syntax_tree)
    flat_syntax_tree_tuple = flatten(syntax_tree_tuple)
    list_of_strings = filter(lambda s: type(s)==str,flat_syntax_tree_tuple)
    list_of_valid_strings = []
    for string in list_of_strings:
        try:
            st = parser.expr(string)
            list_of_valid_strings.append(string)
        except:
            pass
    list_of_candidates = filter(lambda s: eval(s)==current_func, list_of_valid_strings)
    print list_of_candidates

# other function
def c():
    pass

a()
b=a
a(),b(),c()
a(),c()
c(),b() 
```

这将打印：

```
['a']
['a', 'b']
['a', 'b']
['a']
['b'] 
```

它非常丑陋和复杂，但可能适合您的需要。它通过查找调用此函数的行中使用的所有变量并将它们与当前函数进行比较来工作。

# android - 创建、安装和运行 NATIVE android 应用程序/服务

> ID：11547099
> 
> 赞同：0
> 
> 时间：2012-07-18T17:33:43.203
> 
> 标签：android, service, native

我的公司有 2 个在 Windows/Mac/Linux 上作为服务或守护程序运行的本机应用程序。我采用了这段代码并使用 Android 工具链对其进行了编译。我有一个 root 的 android 设备，我可以将这个应用程序推送到它，作为进程运行，它工作得很好。但是，我想构建某种安装程序（可能是一个 .apk），我可以在其中添加这个本机应用程序并在任何 android 设备上运行（例如，无需 root）。那么是否有人知道链接、示例甚至只是如何“安装”本机应用程序并运行？谢谢/洛伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T18:34:57.187

为了正确地做到这一点，您需要将您的原生服务重新设计为一个由 android Service 使用的库，并按照 android 的服务概念（生命周期、状态栏通知等）进行操作。

尝试运行您自己的可执行文件（相对于 android 提供的可执行文件的库）并不是 android 让您变得容易的事情，也不鼓励您这样做。

# ios - layoutSubviews 在 UITableViewCell 上调用了两次

> ID：11547100
> 
> 赞同：7
> 
> 时间：2012-07-18T17:33:45.587
> 
> 标签：ios

我在 UITableViewCell 的子类中覆盖 layoutSubviews。我注意到 layoutSubviews 为每个单元格调用了两次。在第二次调用时，内容视图框架高度比第一次调用时的高度小 1：

```
@implementation MyUITableViewCellCell

+ (NSString *)asString:(CGRect) rect {
     NSString *res = [[NSString alloc] initWithFormat:@"[%f %f %f %f]",
                 rect.origin.x, rect.origin.y, rect.size.width, rect.size.height];
     [res autorelease];
     return res;
}

- (void)layoutSubviews
{
    [super layoutSubviews];
    NSLog(@"Here I am %@ frame=%@ cvframe=%@,
      self.text, 
      [MyUITableViewCellCell asString:self.frame],
      [MyUITableViewCellCell asString:self.contentView.frame]);
}

@end 
```

以下是控制器创建表格单元格的方式：

```
- (NSString*)dataAtIndex:(NSInteger)index
{
    NSString* data = [[NSString alloc] initWithFormat:@"Row %d", index];
    return [data autorelease];
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath     *)indexPath
{
    return 30;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Alex";

    NSInteger index = [indexPath row];
    MyUITableViewCellCell* cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[MyUITableViewCellCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }
    cell.text = [self dataAtIndex:index];
    return cell;
} 
```

输出：

```
Here I am Row 0 frame=[0.000000 0.000000 320.000000 30.000000] cvframe=[0.000000 0.000000 320.000000 30.000000]
Here I am Row 1 frame=[0.000000 30.000000 320.000000 30.000000] cvframe=[0.000000 0.000000 320.000000 30.000000]
Here I am Row 0 frame=[0.000000 0.000000 320.000000 30.000000] cvframe=[0.000000 0.000000 320.000000 29.000000]
Here I am Row 1 frame=[0.000000 30.000000 320.000000 30.000000] cvframe=[0.000000 0.000000 320.000000 29.000000] 
```

每个单元格需要 2 次通话，还是我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T19:10:21.083

我的猜测是，`UITableView`将单元格的高度调整一个像素，以便为绘制分割线腾出空间。在为单元格设置新框架后，您的`layoutSubviews`方法将再次被调用。`UITableView`

# java - 未找到 WFMLRSVCApp.ear 文件

> ID：11547101
> 
> 赞同：35
> 
> 时间：2012-07-18T17:33:54.103
> 
> 标签：java, database, oracle, oracle11g, installation

我正在尝试在我的笔记本电脑上安装 Oracle 11g。我从这里下载安装文件：

```
http://www.oracle.com/technetwork/database/enterprise-edition/downloads/112010-win64soft-094461.html 
```

我已经下载`win64_11gR2_database_1of2.zip`和`win64_11gR2_database_2of2.zip`.

我已将它们放在同一个文件夹中并从该文件夹启动安装文件`1of2`。我一直到某些步骤，最后在安装过程中我得到**WFMLRSVCApp.ear**文件未找到弹出窗口。

我用谷歌搜索，我看到了一些解决方案，其中`1of2 and 2of2`文件应该解压缩到同一个文件夹，然后开始设置。我做了同样的几次，但我仍然得到同样的错误。任何人都猜到缺少什么？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-02-01T05:47:59.853

首先将 win64_11gR2_database_1of2.zip 解压到 win64_11gR2_database_1of2 文件夹中。

然后将 win64_11gR2_database_2of2.zip 解压到 win64_11gR2_database_2of2 文件夹中。

复制 win64_11gR2_database_2of2 文件夹中的 database/stage/ components 文件夹中的所有 4 个文件（解压缩）并将它们（不替换）粘贴到 win64_11gR2_database_1of2（解压缩）的 database/stage/ components 文件夹中。

然后再次运行设置。我亲身经历过。有用..

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-07-27T03:01:49.510

您需要做的是复制 win64_11gR2_database_2of2.zip 中 components 文件夹内的内容（我认为是四个文件）并将其粘贴到 win64_11gR2_database_1of2.zip 组件文件夹中，然后重新运行设置。有用

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-08-13T10:24:42.223

如果您正在安装`Oracle Identity Management 11gR2`，您可能会`WFMLRSVCApp.ear`在安装数据库期间收到文件丢失的错误。

**解决此错误的方法是：**

确保您下载了两个磁盘

*   **win64_11gR2_database_1of2.zip**
*   **win64_11gR2_database_2of2.zip**

**脚步：**

1.  右键单击该`win64_11gR2_database_1of2.zip`文件并选择 **Extract Here**。

[![在此处输入图像描述](../Images/93a495320d9a381d1f46533ca1d4af24.png)](https://i.stack.imgur.com/SsjQi.png)

2.  该软件将提取到名为**数据库**的文件夹中，如下所示，

[![在此处输入图像描述](../Images/ad278b4a2a8b177c4161ea37a58857f4.png)](https://i.stack.imgur.com/20xOj.png)

3.  **您可以在database\stage**下看到以下文件夹和文件，注意`Date modified`for **Components**文件夹。

[![在此处输入图像描述](../Images/915ef2290cbc2b010f58b1613d4fcdbe.png)](https://i.stack.imgur.com/QoyHM.png)

4.  对文件执行相同`win64_11gR2_database_2of2.zip`操作并单击此处提取，提取的文件将放置在同一**数据库**文件夹中

5.  现在检查`Date modified`

[![在此处输入图像描述](../Images/d92b8ba3733f05c4a349be06fb7c270c.png)](https://i.stack.imgur.com/WAWQ1.png)

6.  就是这样，现在您可以通过单击**数据库**文件夹`setup.exe`下开始。

 **希望它有助于容易理解。！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-16T16:43:45.123

我遇到了同样的问题，但它很容易解决：下载 WinMerge 并使用它来合并来自 Oracle 的 zip 文件的 2 个文件夹。这样就可以了。

[http://winmerge.org/](http://winmerge.org/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-05T18:33:09.053

**1）**正常**解压**win64_11gR2_database_1of2.zip和**win64_11gR2_database_2of2.zip**

 ****2）**复制目录

```
C:\Users\Fatality\Downloads\win64_11gR2_database_2of2\database\stage\Components (from extracted win64_11gR2_database_2of2 directory) 
```

到

```
C:\Users\Fatality\Downloads\win64_11gR2_database_1of2\database\stage\Components (in extracted win64_11gR2_database_1of2 directory) 
```****

# ios - 我的证书中的 Pushnotification 配置证书问题

> ID：11547110
> 
> 赞同：0
> 
> 时间：2012-07-18T17:34:34.437
> 
> 标签：ios, xcode, push-notification, ssl-certificate, provisioning

我需要为我的应用程序启用推送通知服务。当我点击此链接[https://www.parse.com/tutorials/ios-push-notifications](https://www.parse.com/tutorials/ios-push-notifications) 时，我可以从我的开发人员程序 ID 下载配置证书。

我按照每一步下载它。但是当我尝试在钥匙串访问中安装它时，它显示错误为“钥匙串警告“系统根”钥匙串无法修改”..当我尝试用谷歌搜索时，我遇到的问题'我正面临它导致下载开发者证书和 WWDRCA 证书。我不知道从哪里得到它。

我的证书如下图所示

![图片](../Images/76aa44eb71a047d3a588f65c82586838.png)

任何人都可以帮忙吗？..是否有任何教程可以帮助您逐步完成它，包括开发人员证书和 WWDRCA 证书..

另一个问题是开发者证书和 WWDRCA 证书的目的是什么？...它如何帮助推送通知配置证书...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T11:05:23.373

您可以从 Apple 开发者门户下载所有证书。一切都在那里一步一步地解释。您必须先激活开发者帐户，然后才能继续。

# mysql - mysql 不同或分组依据

> ID：11547111
> 
> 赞同：0
> 
> 时间：2012-07-18T17:34:34.387
> 
> 标签：mysql

```
SELECT DISTINCT(player2) FROM logs 
WHERE player1=3 
ORDER BY time DESC 
```

是否可以使用该查询返回其他非不同的列？

或者我的其他解决方案：

```
SELECT * FROM logs 
WHERE player1=3 
GROUP BY player2 ORDER BY time DESC 
```

这工作正常，但它没有正确订购。它选择组中的第一个。

表格示例：

```
player1 player2 time
3        5        1
3        5        2
3        6        3 
```

我希望它会返回：

```
player2 time
5        2
6        3 
```

但它返回（与分组）：

```
player2 time
5        1
6        3 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T17:37:04.987

试试这个：

```
SELECT player2, MAX(time) AS time
  FROM logs 
 WHERE player1=3 
 GROUP BY player2 
 ORDER BY time DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T17:37:25.090

```
SELECT player2, max(`time`) as max_time
FROM logs 
WHERE player1 = 3 
GROUP BY player2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T17:42:51.907

```
SELECT player2, MAX(time) AS time   
FROM logs   
WHERE player1=3  
GROUP BY player2   
ORDER BY MAX(time) 
```

# php - 如何从事务中的特定查询中检索 last_insert_id？

> ID：11547115
> 
> 赞同：1
> 
> 时间：2012-07-18T17:34:35.840
> 
> 标签：php, mysql, sql, last-insert-id

我有一个包含三个查询的 mysql 事务

在第三个查询中，我试图从前两个查询中提取 last_insert_id 值。

```
VALUES ('".$result1[last_id]."','".$result2[last_id]."')"; 
```

但它不起作用。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T17:37:29.627

您应该首先获取最后一个插入 ID，然后将其注入到查询中。假设您正在使用以下`mysql_`功能：

```
mysql_query($query1);
$id1 = mysql_insert_id();

mysql_query($query2);
$id2 = mysql_insert_id();

$query3 = "INSERT INTO ... VALUES (".$id1.", ".$id2.");";
mysql_query($query3); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T17:40:33.310

假设您使用的是 MySQL 数据库。你可以得到像这样的 id：

```
mysql_query($first_query);
$first_result_id = mysql_insert_id();

mysql_query($second_query);
$second_result_id = mysql_insert_id();

$third_query = "INSERT INTO table  (column1, column2) VALUES (".$first_result_id .", ".$second_result_id .");";
mysql_query($third_query); 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T17:42:42.073

您可以使用 MySQL 来

```
SELECT LAST_INSERT_ID() 
```

这将检索给定事务中的最后一个插入 ID。您也可以在其他 DBMS 中执行此操作，但显然您使用的是 MySQL。

既然你是，php 中的 MySQL API 也有这方面的快捷方式：

```
//mysql_*
$id = mysql_insert_id();

//PDO
$pdo = PDO_OBJECT;
$pdo->query();
$id = $pdo->lastInsertId();

//mysqli
$my = MYSQLI_OBJECT;
$my->query();
$id = $my->insert_id; 
```

**注意：** @HopeIHelped 的回答具有误导性。只要您在同一事务中，就没有竞争条件。 `LAST_INSERT_ID()`检索给定事务中的最后一个 ID（上面的 API 也是如此），因此即使您让此文件同时运行大量事务和互锁查询，您也可以安全地使用它们。

# windows - XNA 在加载内容时显示启动画面

> ID：11547120
> 
> 赞同：0
> 
> 时间：2012-07-18T17:35:04.043
> 
> 标签：windows, xna, splash-screen

我正在尝试在加载内容时将启动画面包含到我的 XNA 项目中。我尝试了一些教程，但没有一个对我有帮助。我正在尝试以更新方法加载内容，强制绘制方法等。由于我只在 Windows PC 上做我的项目，我正在寻找一种解决方案来在桌面中心显示启动画面（适当的动画）。加载内容时，启动画面应该消失，游戏画面应该弹出。

我正在寻找一些建议和技巧，因为我在互联网上找不到任何帮助。

就个人而言，我正在考虑使用 Forms，但我不太了解如何正确使用它。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T17:41:06.337

由于您正在加载内容，因此您可能正在进行跨越许多帧的方法调用。如果您在 GUI 线程上进行该调用，您将冻结游戏，这不是您想要的。

相反，调用 a 中的方法`Task`，并将游戏的状态设置为“正在加载”，当任务完成时，设置一个指示任务完成的状态。

然后，在您的绘图方法中，您可以执行以下操作：

```
if (state == State.Loading)
    // draw loading screen
else if (State == ..... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T17:53:26.400

扩展 Kendall Fray 所说的，你可以像这样使用游戏状态：

```
 public static GameState currentGameState = GameState.Loading;

    public enum GameState
    {
        Loading, Whatever
    } 
```

并在更新或绘制：

switch (currentGameState) { case (GameState.Loading): //绘制加载屏幕中断；案例（GameState.Whatever）：中断；}

# scala - ENSIME 没有找到正确的项目定义

> ID：11547122
> 
> 赞同：3
> 
> 时间：2012-07-18T17:35:07.750
> 
> 标签：scala, ensime

我在 Ubuntu 12.04 上使用 Emacs 24 快照和 Scala 2.9.2 和`ensime_2.9.2-RC1-0.9.3.RC4`.

[基本上我做了与https://groups.google.com/forum/?hl=en&fromgroups#!topic/ensime/HvvvFr5gSwg](https://groups.google.com/forum/?hl=en&fromgroups#!topic/ensime/HvvvFr5gSwg)中描述的相同的事情

*   我使用 sbt 生成 .ensime 文件`ensime generate`。
*   我在 Emacs 上使用`M-x ensime`.
*   它正确解析所有库等（自动完成工作正常等）

但是，当我尝试在 Emacs 中使用 启动 SBT 控制台时`C-c C-v s`，它会显示以下错误：

`[info] Loading project definition from /home/ximyu/.sbt/plugins`

`[info] Updating {file:/home/ximyu/.sbt/plugins/}default-86f483...`

`[error] a module is not authorized to depend on itself: default#default-86f483;0.0`

`[error] {file:/home/ximyu/.sbt/plugins/}default-86f483/*:update:` `java.lang.IllegalArgumentException: a module is not authorized to depend on itself: default#default-86f483;0.0`

显然 ENSIME 正在寻找错误的项目定义目录。它实际上不是查看我的项目目录，而是查看`~/.sbt`. 有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T21:32:06.650

我有同样的问题。我刚开始使用 ensime，所以我也不知道为什么会这样。此外，我对 scala 和 ensime 的了解非常有限，因此这只是解决可能更明显的问题的方法。

无论如何，这是有问题的 ensime 函数：

```
(defun ensime-sbt-project-dir-p (path)
  "Is path an sbt project?"
  (or (not (null (directory-files path nil "\\.sbt$")))
      (file-exists-p (concat path "/project/Build.scala" ))
      (file-exists-p (concat path "/project/boot" ))
      (file-exists-p (concat path "/project/build.properties" )))) 
```

基本上 ensime 将使用上述函数来搜索缓冲区上方的文件夹，您可以在其中点击 Cc Cv s 以确定根项目文件夹。因此，一个**简单的解决**方法是简单地**将**（空）*.sbt*文件夹添加到包含您的 .ensime 项目描述的文件夹中。

# ruby-on-rails - Rails 3.2.6 应用程序中访问视频文件的问题

> ID：11547124
> 
> 赞同：0
> 
> 时间：2012-07-18T17:35:16.373
> 
> 标签：ruby-on-rails, html5-video

我正在编写一个 Rails 3.2.6 应用程序，我想在其中显示实时流媒体 HTML5 视频以及点播视频。我正在使用 Evolv 软件创建实时 HTML5 视频片段，然后使用 AFP 将它们发送到运行最新版本 Lion Server 的 Mac Mini 服务器。创建一个播放列表，它将在其中播放 HTML5 视频片段。我的计划是在没有直播的时候播放之前录制的直播视频。

在其他网站（非 Rails）的视频标签中，我可以使用整个 url 路径访问播放列表。为了获得我的视频页面的格式，我在我的 Rails 应用程序中添加了以下视频标签。当我引用播放 HTML5 视频片段的播放列表时，视频片段按预期播放。

```
<video autobuffer="autobuffer" autoplay="autoplay" width="480" height="320"
controls="controls" src="http://www.mywebaddress.com/Live-Segments/playlist.m3u8"  
</video> 
```

我想在我的 Rails 应用程序中复制这个逻辑。但是我不确定如何做到这一点。

我已阅读 3.2.6 API 信息，Rails 将在 /public/videos 中搜索视频。我在我的 public/videos 文件夹中创建了一个 live-segments（未大写）文件夹，其中包含相同的播放列表和 HTML5 视频片段，当我从其他网站引用播放列表时，这些片段可以正常播放。

我使用 HTML5 代码尝试了以下示例，但没有一个找到视频播放列表。它确实显示带有海报的视频播放器。

```
<video autobuffer="autobuffer" autoplay="autoplay" width="480" height="320"
controls="controls" src="public/videos/live-segments/playlist.m3u8"  
</video>

<video autobuffer="autobuffer" autoplay="autoplay" width="480" height="320"
controls="controls" src="live-segments/playlist.m3u8"  
</video> 
```

我尝试了以下 Ruby 版本的视频标签。它根本什么都没有显示。

```
<% video_tag("live-segments/playlist.m3u8", :controls => true, :autobuffer => true, :autoplay => true, :size => "480x320") %>

<% video_tag("/public/videos/live-segments/playlist.m3u8", :controls => true, :autobuffer => true, :autoplay => true, :size => "480x320") %> 
```

我希望有一个简单的解决方法。希望我不会尝试做 Rails 不支持的事情。我在网上找到的大多数帖子都没有回复。那些有回应的人与我试图完成的任务无关，因为我对在网站中包含视频（而不是使用 YouTube 小部件）知之甚少。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T01:00:00.363

经过更多研究后，我能够让 html5 视频标签正常工作。我将代码更改为：

```
<video autobuffer="autobuffer" autoplay="autoplay" width="480" height="320" controls="controls" src="/videos/live-segments/playlist.m3u8"</video> 
```

但是，我无法让 Ruby on Rails 视频标签正常工作。我使用了与原始问题中提到的相同的语法，但改为使用 /videos/live-segments/playlist.m3u8。我还是一无所获。连海报都没有出现。下面的标题现在是该部分的第一行。

此时我将使用 HTML5 视频标签。

# c# - FormView.DataItem 在回发时为空

> ID：11547125
> 
> 赞同：4
> 
> 时间：2012-07-18T17:35:18.143
> 
> 标签：c#, asp.net, .net

我正在使用 LinqDataSource 和 FormView，并在 ASP.NET 页面上启用了分页。我正在尝试访问 FormView 的`DataItem`属性，`PageLoad`并且在第一页加载时没有问题，但是一旦我在 FormView 上使用 Next/Prev 页面按钮（导致回发）`DataItem`，即使有记录，该属性也为空显示在 FormView 中。任何想法为什么它在第一页加载时工作正常但在回发时不起作用？

如果你好奇我的`PageLoad`活动是什么样的，这里是：

```
protected void Page_Load(object sender, EventArgs e)
{
    Label lbl = (Label)fvData.FindControl("AREALabel");
    if (fvData.DataItem != null && lbl != null)
    {
        INSTRUMENT_LOOP_DESCRIPTION record = (INSTRUMENT_LOOP_DESCRIPTION)fvData.DataItem;
        var area = db.AREAs.SingleOrDefault(q => q.AREA1 == record.AREA);
        if (area != null)
            lbl.Text = area.AREA_NAME;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T18:51:45.620

绑定到任何数据绑定控件的对象**不会保留在页面的 ViewState 中**

因此，在后续帖子中，`DataItem`除非您重新绑定控件，否则该属性将为 null

当控件被绑定时，此属性将包含对该对象的引用。

通常，如果您想在*绑定对象时执行某些操作，*则需要访问此属性，因此您需要对`DataBound`事件做出反应

例子：

## 输出

![在此处输入图像描述](../Images/70e2db0d49d3a8162169525bda92e700.png)

## 背后的代码

```
protected void ds_DataBound(object sender, EventArgs e)
{
    var d = this.fv.DataItem as employee;
    this.lbl.Text = d.lname;
} 
```

## ASPX

```
 <asp:LinqDataSource ID="lds" runat="server"
        ContextTypeName="DataClassesDataContext"
        TableName="employees" 
    >

    </asp:LinqDataSource>
    <asp:FormView runat="server" ID="fv" DataSourceID="lds" AllowPaging="true" 
        OnDataBound="ds_DataBound">
        <ItemTemplate>
            <asp:TextBox Text='<%# Bind("fname") %>' runat="server" ID="txt" />
        </ItemTemplate>
    </asp:FormView>
    <br />
    <asp:Label ID="lbl" runat="server" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T17:52:27.140

您的数据将不会保留在`PostBack`. 您需要使用以下方法重新绑定`FormView`事件`PageIndexChanging`：

```
protected void FormView_PageIndexChanging(object sender, FormViewPageEventArgs e)
{
    FormView.PageIndex = e.NewPageIndex;
    //rebind your data here
} 
```

# java - 绘制图形后如何创建邻接列表？

> ID：11547129
> 
> 赞同：0
> 
> 时间：2012-07-18T17:35:32.257
> 
> 标签：java, graph, dijkstra, adjacency-list, adjacency-matrix

我有一个 Edge 类，它存储：源（顶点）、目标（顶点）和权重。

我有一个 Vertex 类，它存储：名称、x 坐标、y 坐标和 Ed​​ge[] 相邻列表。

我还有一个 Graph 类，它存储两个 ArrayList：边和顶点。

当前，当绘制顶点/节点和边时，它会分别自动添加到顶点和边列表中。

现在我想使用这两个数组列表填充 Edge[] 相邻列表，但我不知道该怎么做。如果有人能给我指点或概述代码的外观，我将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:47:20.393

我将创建一个 .either 方法（将 Edge 作为参数并返回任一 Vertex）和一个 .other 方法（它采用 Vertex 并返回其 Edge 的另一个 Vertex）。遍历 Graph 类中的边列表。对于每条边，调用 .either 来获取一个 Vertex，将其存储在某个变量中，我们称之为 v1。现在调用 .other 来获取另一个 Vertex，称之为 v2。

将 v1、v2 组合添加到 v1 的 Edge[] 和 v2 的 Edge[]。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T19:41:40.117

首先，您的代码中存在冗余。Edge 类不需要包含源顶点，因为您将该边存储到 Vertex 类中，因此显然该顶点将是源。

现在向任何顶点的邻接列表添加一条边：

> 假设您有两个顶点：A 和 B。其中 A 是源顶点，B 是目标顶点。要创建一条边，只需创建一个 Edge 类的实例（显然定义了一个构造函数）并将其添加到顶点 A 的邻接列表中。

```
Edge e1= new Edge('B' , weightofedge); 
```

假设 Vertex 的实例是 v1 即 Vertex A 那么`v1.adjacentList[index]=e1;`

或者你也可以在一行中完成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T19:48:59.723

有一些实现 Graph 的方法：

您可以拥有 Vertex 类，其中每个实例都包含包含其邻居的 ArrayList，或者您可以拥有 bool |V|X|V| 如果 Matrix[i][j] 为真，则表示您已将边从顶点 i 定向到顶点 j。

# javascript - 在链接中禁用窗口 onbeforeunload 功能

> ID：11547138
> 
> 赞同：0
> 
> 时间：2012-07-18T17:36:23.020
> 
> 标签：javascript, html, facebook, popup, onbeforeunload

我有一个使用窗口 onbeforeunload 功能的网站，但点击弹出窗口因此而无法正常工作。我如何集成代码

```
window.onbeforeunload="null"; 
```

在下面的弹出代码中

```
 <script type='text/javascript'>

    function ouvre(fichier) {
          ff=window.open(fichier,"popup","width=600px,height=300px,left=50%,top=50%")     //this._try = 1;            setTimeout('this._try = 1;', 4000);   }   function playMovie(_try) {      if (this._try == 1) { playlavideo(); }      else { alert('You must share the video to play.'); }        }

     </script>

<a href="#" onClick="ouvre('http://www.facebook.com/sharer.php?u=http://google.com/');return false"><img src="http://i.imgur.com/GnqwI.jpg" width="500" height="145" border="0"></a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T17:41:15.760

这似乎有效，`window.onbeforeunload=null`在打开链接之前进行了关键更改。

```
<script type='text/javascript'>
  // Set a beforeunload callback
  window.onbeforeunload = function() { return false; };

  function open_popup(url) {
    window.open(url,"popup","width=600px,height=300px,left=50%,top=50%");
    return false;
  }
</script>
<a href="http://www.facebook.com/sharer.php?u=http://google.com/" onClick="window.onbeforeunload=null;return open_popup(this.href);"><img src="http://i.imgur.com/GnqwI.jpg" width="500" height="145" border="0"></a> 
```

# javascript - 在 jQuery UI 下没有显示东西是有原因的吗？

> ID：11547139
> 
> 赞同：0
> 
> 时间：2012-07-18T17:36:26.807
> 
> 标签：javascript, jquery, css, jquery-ui, jquery-selectors

我有一个单页应用程序，当人们单击左侧的 jQuery UI 手风琴时，它会显示某些信息。如果我在页面的 CSS 中设置初始“显示：无”或调用 jQuery(selector).hide()，那么在那之后似乎无法显示，至少不使用 jQuery(selector).show()。调试语句确认它使用的选择器实际上是预期的，但没有显示。

我在做什么来抵消 jQuery 显示（） DIV 的能力？

TIA,

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv='Content-Type' content='text/html; charset=iso-8859-1' />
        <title>Anonymous</title>
        <link type='text/css' href='css/ui-lightness/jquery-ui-1.8.21.custom.css' rel='stylesheet' />
        <script type='text/javascript' src='js/jquery-1.7.2.min.js'></script>
        <script type='text/javascript' src='js/jquery-ui-1.8.21.custom.min.js'></script>
        <script type='text/javascript'>

            var agency;
            var current_program;
            var permitted = Object();
            permitted['Anonymous1.User1'] = ['Program1'];
            permitted['Anonymous1.User2'] = ['Program1'];
            permitted['Anonymous1.User3'] = ['Program1', 'Program3'];
            permitted['Anonymous1.User4'] = ['Program1', 'Program2',
                'Program3'];
            permitted['Anonymous2'] = ['Program1'];
            permitted['Anonymous3'] = ['Program1'];
            permitted['Anonymous4'] = ['Program1', 'Program3', 'Program2'];
            permitted['Anonymous6'] = ['Program1', 'Program2', 'Program3',
                'Report5'];
            permitted['Anonymous5.Anonymous5r'] = ['Program1', 'Program2'];
            permitted['Anonymous5.User4'] = ['Program1', 'Program2',
                'Program3'];

            jQuery(function(){

                // Accordion
                jQuery('#accordion').accordion({ header: 'h3' });
                jQuery('.page').hide();

                jQuery('.login').click(function(event_object)
                    {
                    current_program = event_object.target.id;
                    current_program = current_program.replace('-', ' ');
                    jQuery('#login-form').show();
                    jQuery('#login-form h3').html(current_program);
                    });

                jQuery('#login-button').click(function(event_object)
                    {
                    jQuery('#login-form').hide();
                    agency = jQuery('#login-form h3').html();
                    var key = null;
                    if (jQuery.inArray(agency, permitted))
                        {
                        key = agency;
                        }
                    else if (jQuery.inArray(agency + '.' +
                        jQuery('#login-name').val()))
                        {
                        key = agency + '.' + jQuery('#login-name').val();
                        }
                    if (key)
                        {
                        var user_permissions = permitted[key];
                        if (user_permissions.length == 1)
                            {
                            load_page(user_permissions[0]);
                            }
                        else
                            {
                            load_blank_permissions_page();
                            for (var index = 0; index <
                                user_permissions.length; ++index)
                                {
                                display_link(user_permissions[index]);
                                }
                            }
                        }
                        return false;
                    });
                });
                function display_link(drilldown)
                    {
                    var html_id = drilldown.replace(' ', '-');
                    jQuery('#' + html_id).show();
                    }
                function load_blank_permissions_page()
                    {
                    jQuery('#links-page span').hide();
                    jQuery('#links-page h3').html(agency + ' Options');
                    jQuery('#links-page').css('display', 'block');
                    jQuery('#links-page').show();
                    }
                function load_page(drilldown)
                    {
                    var html_id = drilldown.replace(' ', '-');
                    jQuery('.page').hide();
                    jQuery('#' + html_id).show();
                    }
            </script>
            <style type='text/css'>
                body{ font-family: 'Verdana', sans-serif; margin: 50px;}
                div#accordion
                    {
                    float: left;
                    position: absolute;
                    width: 18%;
                    }
                div.page
                    {
                    margin-left: 20%;
                    }
            </style>
        </head>
        <body>
        <h1>Anonymous</h1>
            <div id='accordion'>
                <div>
                    <h3><a href='#'>Demo</a></h3>
                    <p>
                    <a class='login' id='Anonymous2' href='#'>Anonymous2</a><br />
                    <a class='login' id='Anonymous1' href='#'>Anonymous1</a><br />
                    <a class='login' id='Anonymous3' href='#'>Anonymous3</a><br />
                    <a class='login' id='Anonymous4' href='#'>Anonymous4</a><br />
                    <a class='login' id='Anonymous5' href='#'>Anonymous5</a><br />
                    </p>
                </div>
                <div>
                    <h3><a href='#'>Use Cases</a></h3>
                    <div>Phasellus mattis tincidunt nibh.</div>
                </div>
                <div>
                    <h3><a href='#'>Third</a></h3>
                    <div>Nam dui erat, auctor a, dignissim quis.</div>
                </div>
            </div>
            </div>

            <div class='page' id='login-form'>
                <h3>Log in</h3>
                <p><input id='login-name' type='text'> Username<br />
                <input id='password' type='password'> Password<br />
                <button id='login-button'>Log in</button></p>
            </div>

            <div class='page' id='links-page'>
                <h3>Options</h3>
                <p>
                <span id='Program1'><a href='#'
                id='Program1-link'>Report1</a><br /></span>
                <span id='Report5'><a href='#'
                id='Report5-link'>Report5</a><br /></span>
                <span id='Program2'><a href='#'
                id='Program2-link'>Report2</a><br /></span>
                <span id='Program3'><a href='#'
                id='Program3-link'>Report3</a><br />
                </span>

                </p>
            </div>

            <div class='page' id='Program4'>
                <h3>Program1</h3>
                <p>...</p>
            </div>

            <div class='page' id='Program1'>
                <h3>Program1</h3>
                <p>...</p>
            </div>

            <div class='page' id='Program2'>
                <h3>Program2</h3>
                <p>...</p>
            </div>

            <div class='page' id='Program3'>
                <h3>Program3</h3>
                <p>...</p>
            </div>

        </body>
</html> 
```

# c# - 在 LINQ.ToList() 上使用 List.AddRange 有什么好处吗？

> ID：11547143
> 
> 赞同：5
> 
> 时间：2012-07-18T17:36:36.543
> 
> 标签：c#

我今天正在学习 MVC4 教程，看到用户以与我习惯不同的方式实现选择。他的代码是：

```
var GenreLst = new List<string>(); 

var GenreQry = from d in db.Movies 
               orderby d.Genre 
               select d.Genre; 
GenreLst.AddRange(GenreQry.Distinct()); 
ViewBag.movieGenre = new SelectList(GenreLst); 
```

我看着它并以我自己的方式重写它：

```
var genres = db.Movies
            .OrderBy(m => m.Genre)
            .Select(m => m.Genre)
            .Distinct()
            .ToList();

ViewBag.MovieGenre = new SelectList(genres); 
```

他的 GenreList 变量没有在其他地方使用，所以我把它去掉了。我的主要问题是他如何使用 AddRange。AddRange 比 ToList 更好吗？

谢谢阅读！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-18T17:39:20.377

`e.ToList<T>()`在引擎盖下实现为：

```
return new List<T>(e); 
```

`List<T>(IEnumerable<T> e)`构造函数实际上只是在内部调用`this.AddRange(e)`。

换句话说，这两位代码将以完全相同的方式做同样的事情。

# ios - 在 iOS 应用程序中保存 presentModalViewController 的状态

> ID：11547147
> 
> 赞同：0
> 
> 时间：2012-07-18T17:36:49.663
> 
> 标签：ios, objective-c, iphone, uiviewcontroller

我正在创建一个需要过滤器按钮的应用程序。当我单击过滤器按钮时，ModalViewController 将从屏幕底部弹出。

```
 [self presentModalViewController:filterActivity animated:YES]; 
```

当我完成该过滤器屏幕时，我将其解雇

```
[self dismissModalViewControllerAnimated:YES]; 
```

现在的问题是当我dismissModalViewController 然后在 UITextField 中输入的所有日期都消失了。有什么方法可以保存数据或保存 presentModalViewController 的状态吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T17:46:05.173

实现此目的的标准方法是创建一个协议，其中包含一个方法“- (void)userUpdates:(NSDIctionary *)dict”，并让主视图控制器实现它。给模态视图控制器一个“@property (non atomic, weak) id delegate”属性，并在运行模态对象之前设置它。然后，如果用户确实更新了某些信息，则使用协议将其提供回主控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T14:53:46.140

我解决问题。通过使用单例模式，我已经解决了这个问题。现在，即使我关闭 modalviewcontroller 并再次返回，我也可以在文本文件或标签中看到数据。单例代码

```
+ (MNActivityFilter *) sharedManager {
static dispatch_once_t once;
static MNActivityFilter *sharedManager;
dispatch_once(&once, ^ { sharedManager = [[MNActivityFilter alloc] init]; });
return sharedManager; 
```

}

# javascript - 如何在没有 Web 服务器的情况下将变量数据从 Python 传输到 Javascript？

> ID：11547150
> 
> 赞同：1
> 
> 时间：2012-07-18T17:37:08.290
> 
> 标签：javascript, python, html, file

我正在自动生成一个本地 HTML 文件，我需要的所有相关数据都在 Python 脚本中。如果没有网络服务器，我不确定如何继续，否则我认为 AJAX/json 解决方案是可能的。

基本上在 python 中，我有一些列表和字典对象，我需要使用它们来使用 javascript 和 HTML 创建图形。我拥有的一种解决方案（真的很糟糕）是使用字符串从 Python 中逐字编写 HTML/JS，然后保存到文件中。

我还能在这里做什么？我很确定 Javascript 没有文件 I/O 功能。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T17:49:37.767

您只需要将您在 python 代码中的数据转换为您的 javascript 可读的形式，对吗？

为什么不直接获取数据结构，将其转换为 JSON，然后编写一个`.js`文件包含在您的`.html`文件中，这很简单`var data = { json: "object here" };`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T17:41:15.293

你对使用一些[模板](http://wiki.python.org/moin/Templating)系统有什么看法？它将满足您的需求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T17:45:59.717

我知道您已经特别提到了“没有网络服务器”，但除非您真的想摆脱困境，并且过于复杂化，并限制未来使用的灵活性：-

您不能使用非常简单的网络服务器，例如：[http](http://docs.python.org/library/simplehttpserver.html) ://docs.python.org/library/simplehttpserver.html吗？这样，如果您需要公开该站点，您就已经准备好 URL 以设置适当的网络服务器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T17:47:30.560

也许您可以写入 cookie，然后通过 JavaScript 访问它？类似于这里的SO[答案](https://stackoverflow.com/a/4349222/5926)？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-18T17:48:52.477

您可以使用 Python 的 JSON 编码器和解码器库。通过这种方式，您可以将 Python 数据编码为 JSON 格式，并将其包含在 HTML 文档中。然后，您将在 HTML 文件中使用 Javascript 来处理 JSON 编码数据。

[http://docs.python.org/library/json.html](http://docs.python.org/library/json.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-18T18:01:13.947

如果这只需要用于本地主机，您可以执行以下操作。要访问，您可以拨打电话`http://localhost:8080/foo`；但是，由于跨站点注入保护，这可能会导致一些问题；这些很容易通过谷歌搜索解决。

在 JS 方面，你会像这样进行 AJAX 调用（假设是 jQuery）

```
$.ajax('http://localhost:8080/foo', function (data) {console.log(data)}); 
```

然后在 Python 端，您会将此文件放在与您要在计算机上使用的 html 文件 (index.html) 相同的目录中，然后执行它。

```
import BaseHTTPServer
import json

class WebRequestHandler(BaseHTTPServer.BaseHTTPRequestHandler):
        def do_GET(self):
            desiredDict = {'something':'sent to JS'}
            if self.path == '/foo':
                self.send_response(200)
                self.send_header("Content-type", "application/json")
                self.end_headers()
                self.wfile.write(json.dumps(desiredDict))
            else: 
                if self.path == '/index.html' or self.path == '/':
                    htmlFile = open('index.html', 'rb')
                    self.send_response(200)
                    self.send_header("Content-type", "text/html")
                    self.send_header("Access-Control-Allow-Origin","http://localhost:8080/")
                    self.end_headers()
                    self.wfile.write(htmlFile.read())
                else:
                    self.send_error(404)

server = BaseHTTPServer.HTTPServer(('',8080), WebRequestHandler)
server.serve_forever() 
```

# magento - 是否可以在 Magento 模型中使用 CamelCase 类名？

> ID：11547151
> 
> 赞同：7
> 
> 时间：2012-07-18T17:37:09.807
> 
> 标签：magento

假设您有一个类名`Space_Module_Model_LongModelName`，并且希望将其引用为：

```
Mage::getModel('module/longmodelname'); 
```

这似乎在某些开发环境中有效，但似乎并非在所有环境中都有效。可能与文件系统区分大小写设置有关。

您在它不起作用的环境中遇到的错误是`include()`for`Space/Module/Model/Longmodelname.php`失败。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-18T17:59:37.317

您的 config.xml 中有一个名为 global/models/yourpackage 的配置节点，您可以在其中保存类模型的前缀。

当您调用 Mage::getModel('packagename/classname') Magento 获取此配置节点时，例如 Company_Yourmodule_Models 添加一个 _ ，然后是带有大写首字母的类名：

Company_Yourmodule_Models_Classname

如果您有 cAMElcaSe 类名，则方法相同。因此，假设您的班级名称是 ClassName 那么您必须调用 Mage::getModel('packagename/className') 并且magento将其解析为： Company_Yourmodule_Models_ClassName

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T18:07:09.367

`app/code/core/Mage/Core/Model/Config.php`具体看一下`getGroupedClassName();`，您会注意到`uc_words`在构建 时在方法中使用了`$className`，它会将类名字符串中的每个其他单词大写。

所以你的类名将`LongModelName`成为`Longmodelname`包含。

您可以轻松地扩展它以按照您想要的方式工作，但由于它是 Magento 工厂一代的主要部分，我不会因为害怕破坏其他 3rd 方模块而接触它，并且使用非骆驼案例命名空间。

ImportExport 起作用的原因是因为它是模块名称而不是类名称。我以前也遇到过同样的问题，而且很烦人，我倾向于只保留非骆驼式的类名。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T17:44:54.293

肯定有可能使用驼峰式 - 您可以在 Magento 核心中看到模块，例如 ImportExport。我认为一切都是关于在 xmls 中设置正确的（使用骆驼案例）名称

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-10T19:41:59.910

四年后，另一个注释：

如果除了文件名之外还想使用驼峰命名的类名，请确保*{moduleName}/etc/config.xml*的以下部分也是驼峰命名的：

```xml

```
<global>
    <models>
        <ProbablyYourCompanyOrModuleName>
            <ModuleName_resource>
                <entities>
                    <!-- "longModelName" below should be CamelCased, but prob the first letter will be lowercased -->
                    <longModelName>
                        <table>your_db_table_name</table>
                    </longModelName>
                </entities>
            </ModuleName_resource>
        </ProbablyYourCompanyOrModuleName>
    </models>
</global> 
```

```

该部分应为驼峰式，首字母小写。否则，你会得到一个例外`Can't retrieve entity config: yourmodule/longModelName`

（见`Mage_Core_Model_Resource::getTableName()`）

# c - 如何重新分配（）内存到字符串数组

> ID：11547153
> 
> 赞同：1
> 
> 时间：2012-07-18T17:37:18.587
> 
> 标签：c, arrays, string

我有一个字符串数组，

```
char *string_arr[] = {     "Hi",  "Hi2", "Hi3", "Hi4"    }; 
```

现在我需要为数组重新分配内存，因为我必须在数组中插入另一个元素，比如“Hi5”。我怎样才能做到这一点？

我试过：

```
string_arr = realloc (.....); 
```

但它不起作用，它给出：“分配中的不兼容类型”错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T17:38:42.907

您只能“realloc()”指向从“malloc()”获得的内存的指针。

```
char **string_arr;

int nelms = 10;
string_array = (char **)malloc (sizeof (char *) * nelms);
if (!string_array) {
  perror ("malloc failed");
  return;
}

string_array[0] = strdup ("Hi");
string_array[1] = strdup ("Hi2");
string_array[2] = strdup ("Hi3");
string_array[3] = strdup ( "Hi4");
...
string_array = realloc (...);
... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T17:39:04.277

您不能`realloc`使用尚未`malloc`-ed 的数组。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-18T17:41:41.470

您的代码有两个问题：

1）您正在尝试重新分配（）一个固定大小的数组。realloc() 只能用于使用 malloc() 分配的内存。

2) string_arr 是一个数组，而不是一个指针。数组在表达式中用作右值时确实会退化为指针，但作为左值仍然是不同的数据类型。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-18T18:04:58.033

字符串数组的内存将在只读部分分配。

```
 .section        .rodata
    .LC0:
            .string "Hi"
    .LC1:
            .string "Hi2"
    .LC2:
            .string "Hi3"
    .LC3:
            .string "Hi4"
            .text
    .globl main
            .type   main, @function
    main:
            pushl   %ebp
            movl    %esp, %ebp
            subl    $16, %esp
            movl    $.LC0, -16(%ebp)
            movl    $.LC1, -12(%ebp)
.....
..... 
```

不在堆中。所以你不能`realloc()`用来扩展内存。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T17:40:06.417

创建一个大小为 +1 的新数组，将元素从初始数组转移到新数组。

# android - 在没有静态宽度的任何手机上水平安装按钮

> ID：11547157
> 
> 赞同：1
> 
> 时间：2012-07-18T17:37:30.180
> 
> 标签：android, xml, user-interface

好的，这是一个困扰多年的问题。我希望在 android 屏幕的顶部水平放置 5 个按钮。在任何手机上，这些按钮的宽度都必须是屏幕宽度的 20%（以便它们彼此并排没有间隙）。

我只是无法弄清楚XML。我怎样才能做到这一点？有没有人有任何想法/样本？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T17:40:46.010

对于按钮行，使用屏幕全宽的水平线性布局，将所有按钮放入其中，并给按钮布局宽度为 0 且布局权重 > 0：

```
<LinearLayout
     . . .
     android:layout_width="match_parent"
     android:orientation="horizontal"
     />

     <Button
         . . .
         android:layout_width="0"
         android:layout_weight="1"
         />

     <Button
         . . .
         android:layout_width="0"
         android:layout_weight="1"
         />

     . . .
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T17:41:10.097

```
<LinearLayout
    ...
    layout_width = "match_parent"
    layout_height = "wrap_content" />

    <Button
        ....
        layout_width = "0dp"
        layout_height = "wrap_content"
        layout_weight = 1 />

    <Button
        ....
        layout_width = "0dp"
        layout_height = "wrap_content"
        layout_weight = 1 />

    <Button
        ....
        layout_width = "0dp"
        layout_height = "wrap_content"
        layout_weight = 1 />

    <Button
        ....
        layout_width = "0dp"
        layout_height = "wrap_content"
        layout_weight = 1 />

    <Button
        ....
        layout_width = "0dp"
        layout_height = "wrap_content"
        layout_weight = 1 />

</LinearLayout> 
```

# mysql - 超级特权与 Root 帐户

> ID：11547165
> 
> 赞同：0
> 
> 时间：2012-07-18T17:38:02.037
> 
> 标签：mysql, database-administration

我想知道在 MySQL 中拥有超级权限的用户和拥有所有权限的 root 用户之间的区别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T17:42:30.550

mysql 的默认配置有一个名为 root 的预定义特权用户，允许在没有密码的情况下从 localhost 登录。该用户可以更改为 mysql 服务器中的任何其他用户

# c# - 在 ColorDialog 中设置 CustomColors

> ID：11547166
> 
> 赞同：15
> 
> 时间：2012-07-18T17:38:02.547
> 
> 标签：c#, colordialog

应该使用以下代码将颜色对话框中设置的自定义颜色设置为 {Blue, Blue}：

```
colorDialog1.CustomColors = new int[] { System.Drawing.Color.Blue.ToArgb(), 0xFF0000 };
colorDialog1.ShowDialog(); 
```

但是，我得到了一套不同的 {Black, Blue}：

![在此处输入图像描述](../Images/a0c6def5bca76104fb29c2eca9e71e4d.png)

知道我在这里做错了什么吗？谢谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-18T17:51:08.783

您需要使用**OLE 颜色**。实现这一点的最简单方法是使用内置`ColorTranslator`对象，例如

```
colorDialog1.CustomColors = new int[] { 
                                        ColorTranslator.ToOle(Color.Blue), 
                                        ColorTranslator.ToOle(Color.Red)
                                      };
colorDialog1.ShowDialog(); 
```

如果需要从 HTML 颜色转换，也可以使用该`ColorTranslator.FromHtml`方法，例如

```
colorDialog1.CustomColors = new int[]
                                {
                                    ColorTranslator.ToOle(Color.Blue), 
                                    ColorTranslator.ToOle(ColorTranslator.FromHtml("#FF0000"))
                                }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-11-30T20:25:48.957

如果你有一组颜色，你可以使用 Linq 翻译它们：

```
colorDialog1.CustomColors = ThemeColors.Select(x => ColorTranslator.ToOle(x)).ToArray() 
```

ThemeColors 数组将是这样的：

```
public static Color[] ThemeColors
{
   get => new[]
   {
      Color.FromArgb(255, 185, 0),
      Color.FromArgb(231, 72, 86),
      Color.FromArgb(0, 120, 215),
      Color.FromArgb(0, 153, 188),
      Color.DarkOrange
   }
} 
```

*注意：不要忘记添加：*

```
using System.Linq; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-09T19:25:58.173

如果您使用 ColorTranslator FromArgb，您可以保持 RGB 颜色的正确顺序。例如，ColorTranslator.ToOle(Color.FromArgb(255, 0, 0)) 是红色的。您还可以使用它来设置没有名称的颜色，例如鲜红色的 ColorTranslator.ToOle(Color.FromArgb(255, 31, 33)),。

# java - JAVA：如何在泛型函数中返回值

> ID：11547174
> 
> 赞同：2
> 
> 时间：2012-07-18T17:38:43.870
> 
> 标签：java, generics

我正在使用 JAVA 泛型概念测试一些小实用程序。

我尝试从一个通用的函数返回一个列表，但编译不允许我这样做。

检查下面的代码：

```
package com.test.generic.method;

import java.util.ArrayList;
import java.util.List;

public class Sample_3<T> {

    public <T> List<T> testReturn(T t) {
        List<T> list = new ArrayList<T> ();
        list.add(t);
        return list;
    }

    public static void main(String a[]) {
        String s = "Gunjan";

        Sample_3 sample = new Sample_3<String>();
        List<String> list =(List<String>) sample.testReturn(sample);

        for(String ab : list){
            System.out.println(ab);
        }

    }
} 
```

> 它给`ClassCastException`.

如何从通用函数返回列表？为什么 JAVA 添加了这样的编译时特性？

谢谢，甘扬。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T17:47:18.550

`The`泛型的目的是允许您自由指定。因此，您可以执行以下操作：

```
public List<T> testReturn(T t){
        List<T> list = new ArrayList<T>();
        list.add(t); 
        return list; 
    } 
```

这将允许你做例如

```
List<String> a = testReturn("A");
List<Integer> b = testReturn(1); 
```

您的代码的问题在于您的方法的意图并不是真正的通用 - 该方法被编写为返回 List<String>。您的`<T>`代码中的实际不会影响任何内容。

为了回答您的进一步问题-您已编写以下内容：

```
public class Sample_3 {
   public <T> List<T> testReturn(T t) {
    List<T> list = new ArrayList<T> ();
    list.add(t);
    return list;
   }

   public static void main(String a[]) {
    String s = "Gunjan";
    // this is wrong - the Sample_3 class is not generic. It does not get a generic type parameter.
    Sample_3 sample = new Sample_3<String>();
    // this is also wrong. Since the method is generic the "T" you get is the same as the "T" that 
    // goes into the method. Here your String output type does not match the input type of the method,
    // which you've set here as a Sample_3 object
    List<String> list =(List<String>) sample.testReturn(sample);

} 
```

您的通用参数 T 设置可以变化的类型。你可以在方法级别上做，如上所述，或者在类级别上：

```
public class Sample_3<T> {
   public List<T> getList(){ ... }
} 
```

例如

```
 List<Integer> l = new Sample_3<Integer>().getList();
 List<String> s = new Sample_3<String>().getList();
 List<Calendar> c = new Sample_3<Calendar>().getList(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T17:40:44.887

您需要进行签名：

```
public List<String> testReturn() 
```

当您`<T>`在方法声明中使用时，它会根据传入的参数之一告诉编译器您要在方法中使用泛型类型。因为您没有传入任何带有 type 的参数`T`，所以编译器无法解析`T`为类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T17:50:55.990

您正在指定 T 列表的返回类型，但正在返回字符串列表。快速修复是：

```
public List<String> testReturn(){
  List<String> list = new ArrayList<String>();
  // add stuff to list;
  return list;
} 
```

实际上，泛型的目的是允许您生成您的类（即 Sample），以便您可以创建它的新实例，但指定它为每个实例处理的对象类型。Java 在编译时检查这些泛型。以 List 为例 - 没有泛型，它不关心我放入列表中的对象 - 这意味着我可能会在没有收到警告的情况下将 Double 放入其中，并且我不知道它包含什么样的对象调用 get()。我们可以编写仅限于特定对象的新类或 List 实现——例如，StringList 只能接受字符串——但这会很耗时并且可能难以维护。相反，Java 泛型允许我们将特定列表的输入/输出限制为特定类（以及该类的任何实现） - 例如

例如生成样本：

```
public class Sample<T> {
  public List<T> makeEmptyList(){
    return new ArrayList<T>();
  }
} 
```

您还可以在静态方法中指定泛型，但您必须将泛型类型传入 - 作为对象或类引用：

```
public static <T> List<T> makeAndAddToList(T t){
  List<T> list = new ArrayList<T>();
  list.add(t);
  return list;
}

public static <T> List<T> makeEmptyList(Class<T> clazz){
  return new ArrayList<T>();
} 
```

在您的情况下，尚不清楚您的 Sample 类是否应该限制为处理 Strings 和 List 或者是否应该将其设为通用。

有关更多信息，请查看[Java 教程](http://docs.oracle.com/javase/tutorial/java/generics/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T18:04:41.003

`List<T>`我认为要问的第一个问题是，当您在方法中显式创建 a 时，为什么要声明要返回`List<String>`的方法？该示例不会通过使用泛型为您购买任何东西。您是否正在尝试解决其他一些情况？

只是给你一个快速的教训，当 Java 编译你的类时，泛型会从字节码中删除。因此，在您的编辑器中最初可能看起来像这样：

```
public <T> List<T> testReturn(){
}
public List<String> testReturn2(){
} 
```

一旦编译为字节码，看起来像这样：

```
public List testReturn(){
}
public List testReturn2(){
} 
```

这称为类型擦除。泛型的目的是允许编译时参数检查，从而在运行时消除异常。将产生运行时错误的非通用代码示例如下：

```
List list = new ArrayList();
list.add("Hello World");
list.add(Integer.valueOf(42));
for (int i = 0; i < list.size(); i++) {
    String str = (String) list.get(i);
} 
```

放在 List 中的 String 和 Integer 是不兼容的类型。泛型禁止这种不安全的访问/数据输入（尽管当你投射某些东西时它总是会相信你）。

通用的“display()”方法如下所示：

```
public static void main(String a[]) {
    List<String> list = new ArrayList<String>();
    list.add("Gunjan");
    list.add("Shah");

    new Sample_2().display(list);
}

public <T> void display(List<T> list) {
    for (T t : list) {
        System.out.println(t);
    }
} 
```

在泛型方法中使用泛型时，您必须引用您的泛型值，就好像它们是名为的对象类型一样，`T`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T17:42:57.930

我认为您将 String 对象放入 List 中，然后创建**String 类型的 List**。

```
public List<String> testReturn(){
        List<String> list = new ArrayList<String>();
        list.add("Gunjan");
        list.add("Parth");
        list.add("Devang");
        return list; 
    } 
```

泛型可以与类、方法、变量一起使用，但**最重要的是使用**它来使**集合更加类型安全**

`<T>`被称为TypeParameters，如果在方法中使用了this，那么就意味着，在方法中遇到带有.的参数时使用的Type就是this `type T`。

# html - 背景图片被截断

> ID：11547176
> 
> 赞同：1
> 
> 时间：2012-07-18T17:38:47.700
> 
> 标签：html, css, image

[http://mohrdevelopment.com](http://mohrdevelopment.com)

如您所见，我的导航栏有问题。图像被切断（与文本保持一致），我不知道如何修复它。

```
 <ul class="navigation">
            <li class="navbar"><a href="index.html" class="navbarlink" ><em class="home"/><b>Home</b></a></li>
            <li class="navbar"><a href="second.html" class="navbarlink"><em class="photos"/><b>Photos</b></a></li>
            <li class="navbar"><a href="index.html" class="navbarlink"><em class="projects"/><b>Projects</b></a></li>
            <li class="navbar"><a href="index.html" class="navbarlink"><em class="about"/><b>About</b></a></li>
            <li class="navbar"><a href="index.html" class="navbarlink"><em class="contact"/><b>Contact</b></a></li>
        </ul> 
```

CSS：

```
 .navigation {
        background:#1841c8 url(Navigation/Navigation/nav_background.png);
        height:40px;
        margin-bottom:0px;
        display:block;
    }

    .navbar {
        display:inline-block;
        line-height: 40px;
        margin-right:40px;
        }

    .navigation .navbar .navbarlink{
        color:#FFFFFF;
        padding: 11px 5px 11px;
    }

    .navigation .navbar .navbarlink b{
        padding-left:40px;
        padding-right:5px;
    }

    .navigation .navbar .navbarlink:hover{
        color:#00CCFF;
        background: url(Navigation/Navigation/nav_hover.png);
        text-decoration:none;
        padding: 11px 5px 11px;
    }

    /*Navigation bar icons*/
    .navigation .navbar .navbarlink em.home{
        background-image: url(Navigation/Icon_images/home.png);
        background-repeat: no-repeat;

    }

    .navigation .navbar .navbarlink em.photos{
        background-image: url(Navigation/Icon_images/Photo.png);
        background-repeat: no-repeat;
    }

    .navigation .navbar .navbarlink em.projects{
        background-image: url(Navigation/Icon_images/projects.png);
        background-repeat: no-repeat;
    }

    .navigation .navbar .navbarlink em.about{
        background-image: url(Navigation/Icon_images/about.png);
        background-repeat: no-repeat;
    }

    .navigation .navbar .navbarlink em.contact{
        background-image: url(Navigation/Icon_images/Contact.png);
        background-repeat: no-repeat;
    } 
```

如果有人能帮我解决它会很高兴！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:52:51.513

您需要设置图像所在标签的高度！不幸的是，内联元素不允许您设置它们的高度，因此您还需要更改`display`属性。对于初学者，您需要添加：

```
.navigation .navbar .navbarlink em {
    height: 32px;
    display: inline-block;
} 
```

您实际上可以`<b>`从代码中删除所有标签（无论如何您都不应该使用`<b>`），而只需将填充添加到您的`em`:

```
.navigation .navbar .navbarlink em {
    font-weight: bold; /* emulate the <b> tag */
    height: 32px;
    padding: 0 5px 0 40px; /* padding: top right bottom left */
    display: inline-block;
} 
```

有几件事可以让你的生活更轻松一些。您可以通过添加将图像垂直居中在导航栏中`vertical-align: middle`：

```
.navigation .navbar .navbarlink em {
    font-weight: bold;
    height: 32px;
    padding: 0 5px 0 40px;
    vertical-align: middle;
    display: inline-block;
} 
```

`background-position`您可以通过在图像中添加 a 来使文本垂直居中。我还在底部添加了一些填充以稍微提高文本：

```
.navigation .navbar .navbarlink em {
    background-position: 0 50%;
    font-weight: bold;
    height: 32px;
    padding: 0 5px 6px 40px;
    vertical-align: middle;
    display: inline-block;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T17:47:43.743

添加一个`padding-bottom`，它应该工作！我试了一下`<em>`，它出现了。然后加一个 `margin-bottom`展开

# javascript - 此代码第一次迭代时给出 0 作为高度和宽度，第二次给出正确的尺寸

> ID：11547180
> 
> 赞同：0
> 
> 时间：2012-07-18T17:39:06.290
> 
> 标签：javascript

```
var icon1 = new Image();
icon1.src = resource;
var width = icon1.width;
var height = icon1.height; 
```

迭代时，此代码在第一次迭代时给出 0 作为宽度和高度，第二次给出正确的尺寸。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T17:40:16.180

您没有真正显示足够的代码（和一般上下文）来确定，但我敢打赌，第一次，图像还没有加载，第二次，它已经加载了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T17:45:52.390

您可以确保图像首先通过`onload`事件加载。

```
var resource = "http://placehold.it/50";
var icon1 = new Image();
var wid1;
var hei1;

icon1.onload = function() {
    wid1 = icon1.width;
    hei1 = icon1.height;
    console.log(wid1);
    console.log(hei1);
};

icon1.src = resource; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T18:17:08.193

在定义 onload 函数之前尝试将资源分配给 src。

```
 var resource = "http://placehold.it/50";
    var icon1 = new Image();
    var wid1;
    var hei1;

    icon1.src = resource;

    icon1.onload = function() {
        wid1 = icon1.width;
        hei1 = icon1.height;
        console.log(wid1);
        console.log(hei1);
    }; 
```

# directory - InDesign CS5 脚本：如何显示目录？

> ID：11547186
> 
> 赞同：0
> 
> 时间：2012-07-18T17:39:29.430
> 
> 标签：directory, show, adobe-indesign, extendscript

我有一个脚本：

> *   创建一个新文件夹
> *   扫描 InDesign 文档中的图像
> *   格式化图像并将它们复制到新文件夹

当脚本完成所有这些操作后，我希望它能够关注新文件夹目录（在 Windows 中）。

截至目前，我在警报窗口中显示文件夹路径，但我宁愿它打开目录（如果还没有的话），以便用户可以看到新文件。

* * *

我希望我可以调用其中之一：

*   `myNewFolder.bringToFront()` ：仅适用于程序重点，即-                                                             `BridgeTalk.bringToFront("photoshop")`
*   `myNewFolder.open()` : 似乎只适用于文件 I/O 操作
*   `myNewFolder.show()` : 似乎只适用于  `Window`  对象

...但这些都不起作用。

* * *

**编辑**：   `new ActiveXObject("Scripting.FileSystemObject")`  也不起作用...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T22:10:49.993

您必须使用执行方法。

```
myFolder.execute(); 
```

# javascript - 数据加入d3；我一定不能正确理解选择和/或数据键功能

> ID：11547188
> 
> 赞同：4
> 
> 时间：2012-07-18T17:39:37.053
> 
> 标签：javascript, d3.js

我正在研究一个简单的 d3 示例，我使用 d3 在页面上放置一些新的 div、添加属性和添加数据驱动的样式。让我绊倒的部分是当我想使用 d3 使用新数据更新某些样式时。我从下面的 jsFiddle ( [http://jsfiddle.net/MzPUg/15/](http://jsfiddle.net/MzPUg/15/) ) 中粘贴了代码。

在最初创建 div 的步骤中，我使用键函数向元素添加索引，在更新步骤（不起作用的部分）中，我还使用键函数。但是从 d3 文档中不清楚的是实际数据连接是如何工作的（例如，索引存储在 DOM 元素中的什么位置？如果有重复的索引怎么办？等等）。

所以，我的知识存在明显的差距，但是在这里保持简单，任何人都可以解释为什么这个例子不起作用？任何有关 d3 中数据连接的精确性质的额外信息都将是锦上添花。（我已经看过[http://bost.ocks.org/mike/join/](http://bost.ocks.org/mike/join/)。）

```
//add a container div to the body and add a class
var thediv = d3.select("body").append("div").attr("class","bluediv");

//add six medium-sized divs to the container div
//note that a key index function is provided to the data method here
//where do the resulting index value get stored?
var mediumdivs = thediv.selectAll("div")
    .data([10,50,90,130,170,210],function(d){return d})
    .enter().append("div")
    .style("top",function(d){return d + "px"})
    .style("left",function(d){return d + "px"})
    .attr("class","meddiv")

//UPDATE STEP - NOT WORKING
//Attempt to update the position of two divs
var newdata = [{newval:30,oldval:10},{newval:80,oldval:50}]        
var mediumUpdate = mediumdivs.data(newdata,function(d){return d.oldval})
    .style("left",function(d){return d.newval + "px"}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:00:40.493

据我所知，您不会更新已经存在的元素。相反，您告诉 D3 要绘制哪些元素，它会确定要在屏幕上删除或更新的内容。

我用工作代码更新了你的[JSFiddle 。](http://jsfiddle.net/MzPUg/18/)我还添加了下面的代码。

```
//add a container div to the body and add a class
var thediv = d3.select("body").append("div").attr("class", "bluediv");

function update(data) {
    var mediumdivs = thediv.selectAll("div").data(data, function(d) {
        return d;
    });

    // Tell D3 to add a div for each data point.
    mediumdivs.enter().append("div").style("top", function(d) {
        return d + "px";
    }).style("left", function(d) {
        return d + "px";
    }).attr("class", "meddiv")
    // Add an id element to allow you to find this div outside of D3.
    .attr("id", function(d) { 
        return d;
     });

    // Tell D3 to remove all divs that no longer point to existing data.
    mediumdivs.exit().remove();   
}

// Draw the scene for the initial data array at the top.           
update([10, 50, 90, 130, 170, 210]);      
// Draw the scene with the updated array.
update([30, 80, 90, 130, 170, 210]); 
```

我不确定 D3 如何存储索引的内部工作原理，但您可以`id`向您创建的 div 添加一个属性，以便为自己创建唯一索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-30T04:48:38.940

到目前为止给出的其他答案使用删除和重新创建 div 的策略。这是没有必要的。Al R. 的原始代码的问题在于它使用`data`密钥的方式。*旧数据和新传入的数据都*使用相同的`data`键函数。因为在 Al R. 的示例中，旧数据是一个简单的数字数组，而新数据是一个具有属性的对象数组，该行中没有选择数据。*`mediumUpdate`*

 *这是使选择起作用的一种方法：

```
var newdata = [10, 50];
var newdatamap = {10:30, 50:80};
var mediumUpdate = mediumdivs.data(newdata, function(d){return d;})
    .style("left",function(d){return newdatamap[d] + "px";}); 
```

这是一个[jsfiddle](http://jsfiddle.net/mars0i/zr400Lg7/1/)，它也会改变所选 div 的颜色以使效果明显。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-29T22:47:31.103

在上面的答案中，需要一个更新步骤来转换具有相同键的 div。[说明性 jsfiddle](https://jsfiddle.net/MzPUg/97/)显示有/没有更新功能会发生什么。

更新函数只是 selection.stuff，而不是 selection.enter().stuff ：

```
//add a container div to the body and add a class
var updateDiv = d3.select("#updateDiv").attr("class", "bluediv");
var noUpdateDiv = d3.select("#noUpdateDiv").attr("class", "bluediv");

function update(selection,data,zeroTop,withUpdate) {
    //add six medium-sized divs to the container div
    //note that a key index function is provided to the data method here
    //where do the resulting index value get stored?
    var mediumdivs = selection.selectAll("div").data(data, function(d) {
        return d;
    });

    if(withUpdate){
        mediumdivs.style("top", function(d) {
            if(zeroTop){
                return 0
            }else{
                return d + "px";
            }        
        }).style("left", function(d) {
            return d + "px";
        }).attr("class", "meddiv");
    }

    mediumdivs.enter().append("div").style("top", function(d) {
        if(zeroTop){
            return 0
        }else{
            return d + "px";
        }        
    }).style("left", function(d) {
        return d + "px";
    }).attr("class", "meddiv");

    mediumdivs.exit().remove();   
}
//with the update function we maintain 3 of the old divs, and move them to the top
update(updateDiv,[10, 50, 90, 130, 170, 210],false,true);      
update(updateDiv,[10,50,90],true,true);

//without the update function divs are maintained, but not transitioned
update(noUpdateDiv,[10, 50, 90, 130, 170, 210],false,false);      
update(noUpdateDiv,[10,50,90],true,false); 
```*

# ruby - 如何使用 mongoid / moped 进行 upsert / push

> ID：11547193
> 
> 赞同：9
> 
> 时间：2012-07-18T17:39:39.363
> 
> 标签：ruby, mongodb, mongoid, mongoid3, moped

我正在使用 Mongoid (v3) 访问 MongoDB，并希望执行此操作：

```
db.sessionlogs.update( 
    {sessionid: '12345'}, /* selection criteria */
    {'$push':{rows: "new set of data"}},  /* modification */
    true /* upsert */
); 
```

这在 mongo shell 中运行良好。这也正是我想要的，因为它是一个单一的原子操作，这对我来说很重要，因为我会经常称呼它。我不想做两个操作——一个获取然后一个更新。我已经通过 mongoid 尝试了很多东西，但无法让它工作。

如何让 MongoID 不碍事，只需将此命令发送到 MongoDB？我猜想在 Moped 级别有一些方法可以做到这一点，但该库的文档基本上不存在。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-18T17:39:39.363

[在写问题时找到答案...]

```
criteria = Sessionlogs.collection.find(:sessionid => sessionid)
criteria.upsert("$push" => {"rows" => datarow}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T05:03:38.670

这是一种方法：

```
session_log = SessionLog.new(session_id: '12345')
session_log.upsert
session_log.push(:rows, "新数据集")

```

或其他：

```
SessionLog.find_or_create_by(session_id: '12345')。
  push(:rows, "新数据集")

```

`#push``$push`在场上执行原子操作。它在 [原子持久性](http://mongoid.org/en/mongoid/docs/persistence.html#atomic)页面上进行了解释。

（注意：示例使用 UpperCamelCase 和 snake_case 与 Ruby 约定一样。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-04T19:36:51.027

暂时不要继续使用轻便摩托车，您可以使用查找和修改操作来实现相同的目的（使用所有默认范围和继承的好东西）

如果不存在，则在图中保存边的示例

```
edge = {source_id: session[:user_id],dest_id:product._id, name: edge_name}
ProductEdge.where(edge).find_and_modify(ProductEdge.new(edge).as_document,{upsert:true}) 
```

# ms-access - 我可以在一个命令按钮上运行多个 DCount 语句吗？

> ID：11547195
> 
> 赞同：1
> 
> 时间：2012-07-18T17:39:46.463
> 
> 标签：ms-access, ms-access-2003

我正在使用以下代码对名为 FirstName 的字段中的空值进行计数，并将结果显示在文本框中。我可以添加另一个字段“LastName”并在文本框中显示两个结果语句吗？我已经为此工作了几个小时。在此先感谢您的任何建议。

```
intCountNull = DCount("*", "Scrubbed", "FirstName" & " Is Null")
TxtShowNull = intCountNull & " null values found in FirstName" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:48:25.720

我不确定我对这个问题的理解程度。这和你要找的东西一样吗？

```
intCountNullFirst = DCount("*", "Scrubbed", "FirstName Is Null")
intCountNullLast = DCount("*", "Scrubbed", "LastName Is Null")
strMsg = intCountNullFirst & " null values found in FirstName; " & _
    intCountNullLast & " null values found in LastName"
Me.TxtShowNull = strMsg 
```

# wcf - 使用错误的用户名密码打开异步 WCF 服务挂起

> ID：11547197
> 
> 赞同：1
> 
> 时间：2012-07-18T17:39:50.287
> 
> 标签：wcf, authentication, asynchronous

我有一个实现“自定义用户名密码验证器”的 WCF 服务。

服务本身根据本地文件检查用户名+密码，

如果不匹配 - 它会抛出带有消息的*FaultException*。

.

当我同步使用该服务时，它工作正常。

当我去使用它**ASYNC**时，我遇到了问题。

如果我传递了**错误**的“用户名+密码”凭据 - 并打开客户端，

而不是立即从进入我的“Channel_Faulted()”方法的服务返回，

客户端线程只是等到*超时*触发，

然后我得到一个'TimeoutException'。

```
try
{
    client = new MyServiceClient("WSDualHttpBinding_IMyervice");
    client.ClientCredentials.UserName.UserName = "username";
    client.ClientCredentials.UserName.Password = "bad password";
    client.ChannelFactory.Faulted += new EventHandler(ChannelFactory_Faulted);
    client.Open();   // This hangs for 01:00:00 minute

    // Doesn't reach here
    client.DoSomethingCompleted += new EventHandler<DoSomethingEventArgs(client_DoSomethingCompleted);
    client.DoSomethingAsync(param);
}
catch (Exception ex)
{
    // Enters here with a 'TimeoutException' exception
} 
```

为什么客户端没有触发我的“故障”方法？

为什么即使在 'CustomUserNameValidator' 的 'Validate' 方法期间服务通过 'FaultException' 服务，它也会等待来自服务的响应？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T20:46:30.713

当然，您使用的代码似乎在您的代码行之后缺少 3 行： `client.ChannelFactory.Faulted += new EventHandler(ChannelFactory_Faulted);`

但是，由于我尚未使用此选项，因此我再次在黑暗中拍摄。

`var local = client.ChannelFactory.CreateChannel();`

`((IClientChannel)local).Faulted += ChannelFaulted;`

`local.Open();`

更好的是，根据此处提供的示例，似乎不需要 open 方法：[ChannelFactory](http://msdn.microsoft.com/en-us/library/ms734681.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T17:57:11.790

我个人没有使用 ChannelFactory.Faulted 事件处理程序，但是，这里有一个帖子供您考虑：[create-wcf-channelfactory](https://stackoverflow.com/questions/3200197/creating-wcf-channelfactoryt)

# php - 如何解析 stdClass 对象？

> ID：11547198
> 
> 赞同：0
> 
> 时间：2012-07-18T17:39:52.110
> 
> 标签：php

我有一个 SOAP 响应，其 var_dump 如下所示：

```
object(stdClass)[14]
  public 'GetClientsResult' => 
    object(stdClass)[15] 
```

我无法弄清楚如何为我的一生解析这个，我以前从未使用过 stdClass 。

如何在 PHP 中解析此响应？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T17:41:45.917

对于初学者，您可以将其转换为数组（假设对象存储在 中`$response`）：

```
$response = (array) $response; 
```

或者您可以通过以下方式访问内容：

```
$response->GetClientResult->otherStuff; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T17:47:36.943

An`StdClass`是一个空类，您可以在其中设置和获取属性值。一个例子：

```
 <?php
 // $response is a normal array
 $response['GetClientResult'] = 'foo'; // set
 $response['GetClientResult']; // get

 // $response is a StdClass
 $response->GetClientResult = 'foo'; // set
 $response->GetClientResult; // get
 ?> 
```

如果你想将类转换回一个数组，你可以使用：

```
$response = (array) $response 
```

如果你想做递归，因为你有多个 StdClass：

```
function StdClass2array(StdClass $class)
{
    $array = array();

    foreach ($class as $key => $item)
    {
            if ($item instanceof StdClass) {
                    $array[$key] = StdClass2array($item);
            } else {
                    $array[$key] = $item;
            }
    }

    return $array;
} 
```

# c++ - 图像处理 - 这是一个 for 循环问题吗？

> ID：11547201
> 
> 赞同：3
> 
> 时间：2012-07-18T17:39:53.700
> 
> 标签：c++, image, pointers, for-loop

我有一张我试图模糊的图像，但它最终看起来确实很奇怪：

![在此处输入图像描述](../Images/7477318bc33d9e2b91ef65da58969486.png)

我所做的是：我获取每个像素，并在逐个颜色的基础上将其值与所有相邻像素的值进行平均。

或者我认为。但是那里显然有一个错误，我怀疑我的 for 循环有问题，但对于我的生活，我无法找出实际出了什么问题。

特别是，第五步（输出步骤）显示图像仍然是有序的——如果我在右侧输出左侧图像，而不是模糊蒙版的图像，像素仍然是正确的顺序。

```
 try
{
    // STEP ONE: MAKE MEMORY AVAILABLE FOR IMAGE
    int ***image;
    image = new int**[m_nSizeX];
    for(int i = 0; i < m_nSizeX; ++i)
    {
        image[i] = new int*[m_nSizeY];
        for(int j = 0; j < m_nSizeY; ++j)
        {
            image[i][j] = new int[nrPixels];// image[x][y][z] is now a pointer to an int

        }
    }

    // STEP TWO: MAKE MEMORY AVAILABLE FOR IMAGE MASK
    int ***mask;
    mask = new int**[m_nSizeX];
    for(int i = 0; i < m_nSizeX; ++i)
    {
        mask[i] = new int*[m_nSizeY];
        for(int j = 0; j < m_nSizeY; ++j)
        {
            mask[i][j] = new int[nrPixels];// mask[x][y][z] is now a pointer to an int

        }
    }

    //STEP THREE: COPY IMAGE INTO MEMORY

    unsigned long lOffset = 0;
    for(long i=0; i<m_nSizeX ; i++)
    {
        for(long j=0; j<m_nSizeY ; j++)
        {
            for(int k=0; k<(nrPixels) ; k++)
            {
                image[i][j][k] = *(reinterpret_cast<unsigned char*>(m_pcMemOrg + lOffset) );
                lOffset++;
            }
        }
    }

    // STEP FOUR: BLUR IMAGE

    for(long i=0; i<m_nSizeX ; i++)
    {
        for(long j=0; j<m_nSizeY ; j++)
        {
            for(int k=0; k<(nrPixels) ; k++)
            {
                // INSERT BLURRING FUNCTION HERE (New value = Old value averaged with adjacent pixels)

                if(k != 2) // 0 = blue, 1 = green, 2 = red;
                {
                    mask[i][j][k] = 0;
                }
                else

                if(i==0 && j==0)// (0,0) Corner Pixel
                {
                    mask[i][j][k] = (image[i][j][k]+image[i+1][j][k]+image[i][j+1][k]+image[i+1][j+1][k])/4;
                }
                else if(i==0 && j==(m_nSizeY-1))// (0,yMax) Corner Pixel
                {
                    mask[i][j][k] = (image[i][j][k]+image[i+1][j][k]+image[i][j-1][k]+image[i+1][j-1][k])/4;
                }
                else if(i==(m_nSizeX-1) && j==0)// (xMax,0) Corner Pixel
                {
                    mask[i][j][k] = (image[i][j][k]+image[i-1][j][k]+image[i][j+1][k]+image[i-1][j+1][k])/4;
                }
                else if(i==(m_nSizeX-1) && j==(m_nSizeY-1))// (xMax,yMax) Corner Pixel
                {
                    mask[i][j][k] = (image[i][j][k]+image[i-1][j][k]+image[i][j-1][k]+image[i-1][j-1][k])/4;
                }
                else if(i==0)// (0,---) Edge Pixels
                {
                    mask[i][j][k] = (image[i][j][k]+image[i][j+1][k]+image[i+1][j+1][k]+image[i+1][j][k]+image[i+1][j-1][k]+image[i][j-1][k])/6;
                }
                else if(j==0)// (---,0) Edge Pixels
                {
                    mask[i][j][k] = (image[i][j][k]+image[i-1][j][k]+image[i-1][j+1][k]+image[i][j+1][k]+image[i+1][j+1][k]+image[i+1][j][k])/6;                    
                }
                else if(i==(m_nSizeX-1))// (xMax,---) Edge Pixels
                {
                    mask[i][j][k] = (image[i][j][k]+image[i][j-1][k]+image[i-1][j-1][k]+image[i-1][j][k]+image[i-1][j+1][k]+image[i][j+1][k])/6;
                }
                else if(j==(m_nSizeY-1))// (---,yMax) Edge Pixels
                {
                    mask[i][j][k] = (image[i][j][k]+image[i+1][j][k]+image[i+1][j-1][k]+image[i][j-1][k]+image[i-1][j-1][k]+image[i-1][j][k])/6;
                }
                else // Mid-Image Pixels
                {
                    mask[i][j][k] = (image[i][j][k]+image[i][j+1][k]+image[i+1][j+1][k]+image[i+1][j][k]+image[i+1][j-1][k]+image[i][j-1][k]+image[i-1][j-1][k]+image[i-1][j][k]+image[i-1][j+1][k])/9;
                }
            }
        }
    }

    //STEP FIVE: OUTPUT BLURRED IMAGE
    lOffset = 0;

    for(long i=0; i<m_nSizeX ; i++)
    {
        for(long j=0; j<m_nSizeY ; j++)
        {
            for(int k=0; k<(nrPixels) ; k++)
            {
                *(reinterpret_cast<unsigned char*>(m_pcMemInv + lOffset) ) = mask[i][j][k];
                //*(reinterpret_cast<unsigned char*>(m_pcMemInv + lOffset) ) = image[i][j][k];
                lOffset++;
            }
        }
    }

    // STOP USING IMAGE MEMORY NOW

    for (int i = 0; i < m_nSizeX; ++i) {
        for (int j = 0; j < m_nSizeY; ++j)
            delete [] image[i][j];

        delete [] image[i];
    }
    delete [] image;

    // STOP USING MASK MEMORY NOW
    for (int i = 0; i < m_nSizeX; ++i) {
        for (int j = 0; j < m_nSizeY; ++j)
            delete [] mask[i][j];

        delete [] mask[i];
    }
    delete [] mask;
}
catch( ... )
{

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T18:17:46.250

使用多维索引时，通常第一个索引是`y`，第二个`x`和第三个`red/green/blue`- 您使用非标准转置布局`i`，`j`和`k`，其中`i`似乎意味着水平索引（看到您将其与 进行比较`m_nSizeX`）。

我猜你的图像在第一次复制时被转置，以一种神秘的方式转换，并在第二次复制时转回；我无法猜测细节，但建议您将尺寸正确（交换`i`和`j`）就足够了。

顺便说一句，调用协调正常名称`x`and `y`（而不是`i`and `j`，或者也许`j`and `i`？）会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T18:47:00.347

您没有显示 的​​类型`m_pcMemOrg`，但基于您需要 a 的事实，`reinterpret_cast`我猜它不是`unsigned char`。更重要的是我认为`sizeof(*m_pcMemOrg)`不是一个。因此，当您向其添加偏移量时，偏移量将乘以类型的大小。

代替：

```
image[i][j][k] = *(reinterpret_cast<unsigned char*>(m_pcMemOrg + lOffset) ); 
```

和：

```
image[i][j][k] = *(reinterpret_cast<unsigned char*>(m_pcMemOrg) + lOffset ); 
```

输出代码也是如此。

顺便说一句，其他人指出这是一种非常低效的存储和遍历图像的方式是正确的。一维数组是最好的，使用公式`[j*stride + i*nrPixels + k]`where 进行索引`stride = m_nSizeX*nrPixels`。我也会交换`i`and`j`循环，并使用`x`and`y`作为名称。

# macos - 在 MonoDevelop 中执行控制台应用程序时，如何防止 OS X 终端保持打开状态？

> ID：11547212
> 
> 赞同：1
> 
> 时间：2012-07-18T17:40:25.607
> 
> 标签：macos, console, monodevelop

我正在我的 Mac 上使用 MonoDevelop 开发一个简单的控制台应用程序。每次我运行应用程序时，都会收到这个对话框，请求`Press any key to continue...`

如何让应用程序运行，然后像使用 Windows 和 Visual Studio 一样关闭终端窗口？

![在此处输入图像描述](../Images/d524e2cc9c4553d61d9a3f30a0a0de08.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T02:10:18.280

在项目的运行选项中，取消选中“暂停控制台输出”。如果它不是交互式的，您可能还想取消选中“在外部控制台上运行”。

![项目运行选项](../Images/09fedcce440c153ead575961b4d4dc00.png)

# ios - iOS Twitter 框架：如何获取（在回调中）最后一个用于发推文的 Twitter 帐户？

> ID：11547214
> 
> 赞同：1
> 
> 时间：2012-07-18T17:40:33.267
> 
> 标签：ios, twitter, callback, account

用户发布推文后，我需要区分他使用的是哪个推特帐户。假设用户在手机上配置了 1 个或多个帐户。

推文成功后我需要知道这一点，所以正确的地方是回调。我尝试使用 ACAccountStore 获取帐户，但它提​​供了一个包含手机上设置的所有帐户的数组，而不是关于最后使用的帐户的线索（甚至不是数组的顺序）。

有谁知道 TWTweetComposeViewController 是否记得这个帐户以及如何获取它？

谢谢

我的代码：

```
if ([TWTweetComposeViewController canSendTweet])
{
    TWTweetComposeViewController *tweetSheet = 
    [[TWTweetComposeViewController alloc] init];
    [tweetSheet setInitialText:@"initial text"];
    [tweetSheet addImage:[UIImage imageNamed:image]];

    // Callback
    tweetSheet.completionHandler = ^(TWTweetComposeViewControllerResult result) {
        // if tweet was successful
        if(result == TWTweetComposeViewControllerResultDone) {

            // Get the accounts
            account = [[ACAccountStore alloc] init];
            ACAccountType *accountType = [account accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];

            [account requestAccessToAccountsWithType:accountType withCompletionHandler:^(BOOL granted, NSError *error) 
             {
                 // if access granted I populate the array
                 if (granted == YES) {
                     NSArray *arrayOfAccounts = [account accountsWithAccountType:accountType];

                     ACAccount *account1 = [arrayOfAccounts objectAtIndex:0];
                     ACAccount *account2 = [arrayOfAccounts objectAtIndex:1];

                     NSString *username1 = account1.username;
                     NSString *username2 = account2.username;

                     // Always same order
                     NSLog(userName1);
                     NSLog(userName2);

                 }
             }];

            [self furtherMethodsInCaseOfSuccessfulTweet];

        } else if(result == TWTweetComposeViewControllerResultCancelled) {
            NSLog(@"twit canceled");
        }
        [self dismissViewControllerAnimated:YES completion:nil];
    };

    [self presentModalViewController:tweetSheet animated:YES];

}
else
{
    UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"No tweet is possible on this device" delegate:self cancelButtonTitle:@"OK" otherButtonTitles: nil];
    [alertView show];

} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T08:54:34.557

我找到了一个方法。

而不是在 TWTweetComposeViewController 的实例上查找用户名，让我们使用[GET users/lookup](https://dev.twitter.com/docs/api/1/get/users/lookup)来查询 ACAccountStore 收集的名称。

> [http://api.twitter.com/1/users/lookup.xml?screen_name=username1,username2](http://api.twitter.com/1/users/lookup.xml?screen_name=username1,username2) （使用 json 代替 xml）

解析结果，我们可以得到用户最后一条推文的日期/时间（“状态”标签），瞧，我们有最后使用的帐户。[此外，您可以在控制台](https://dev.twitter.com/console)上测试 qwery 结果。

感谢@theSeanCook

# ruby-on-rails - 无法访问枚举器edit_multiple

> ID：11547221
> 
> 赞同：0
> 
> 时间：2012-07-18T17:40:54.183
> 
> 标签：ruby-on-rails, ruby

当我尝试在表单中编辑多个答案并单击保存时出现以下错误！

```
TypeError (Cannot visit Enumerator):
  app/controllers/answers_controller.rb:61:in `edit_multiple' 
```

一个用户应该能够为同一个研究多次提交答案，并且答案被保存为一个包含 study_id、user_id 和该研究中问题答案的 study_instance。在研究控制器中：

```
def group_answers
@study = Study.find_by_slug(params[:id])
@study_instance = StudyInstance.find(params[:study_instance])
@answers = @study_instance.answers
respond_to do |format|
  format.html 
  format.json { render :json => @study }
end
end 
```

在答案控制器中，我有这个：

```
def edit_multiple
  @keys = params[:answer].keys.collect
  @answers = Answer.where(:id => @keys)
  @answers.each { |t| t.attributes = params[:answer][t.id.to_s] }
  if @answers.all?(&:valid?)
    @answers.each(&:save!)
    redirect_to studies_url, :notice => 'Study was successfully changed.'
  else
    return
  end
end 
```

在 group_answers 视图中：

```
.block
  .content
    .inner
      %h2
        = @study.title
      %p.description
        = @study.description
        = @questions
= form_for :answers, :url => edit_multiple_answers_path, :html => { :multipart => true }     do |f|
  - @study_instance.answers.by_position.each do |answer|
    .block
      .content
        .inner
          %p
            = answer.position
            \.
            = answer.question.question_text
            %br/
            = fields_for "answer[#{answer.id}]" do |f|
              - if answer.question.long_text
                = f.text_area :answer_text, :value => answer.answer_text
              - elsif answer.question.short_text
                = f.text_field :answer_text, :value => answer.answer_text
              - elsif answer.question.file_upload
                = f.file_field :answer_image
                %br/
                %span.description 
                  Must be at least 500px x 500px and in gif or jpg format. 
                  %br/
                  No characters other than letters and numbers in file name.
                  %br/
                  Current_file:
                  %br/
                  = answer.answer_image_file_name ? (image_tag     answer.answer_image.url(:thumb)) : "none"
              - else
                = f.select :answer_text, answer.question.options_from_choices, :selected     => answer.answer_text, :include_blank => true

  .group.navform.wat-cf
    %button.button{:type => "submit"}
      = image_tag("web-app-theme/icons/tick.png", :alt => "#{t("web-app-theme.save",     :default => "Save")}")
      = t("web-app-theme.save", :default => "Save")
    %span.text_button_padding= t("web-app-theme.or", :default => "or")
    = link_to t("web-app-theme.cancel", :default => "Cancel"), studies_path, :class =>     "text_button_padding link_button" 
```

如果这是非常简单的事情，我仍然是 Rails 的新手，但它让我感到难过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T15:26:55.797

我发现你的代码有点奇怪......我认为最好使用嵌套属性。您可以在此处找到文档：http: [//api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)和此处的一些示例：[http ://railscasts.com/episodes?utf8=%E2%9C%93&search=嵌套](http://railscasts.com/episodes?utf8=%E2%9C%93&search=nested)的 .

# java - 在我的应用程序中捕获 google chat 发送的传出数据包

> ID：11547222
> 
> 赞同：0
> 
> 时间：2012-07-18T17:40:55.153
> 
> 标签：java, android

我熟悉使用 xmpp 库，对于 android，我使用 asmack 库。在 Google 聊天中也使用 asmack。我可以编写一个应用程序来使用 xmpp 发送/接收消息。但是现在我想在我的应用程序中跟踪 google 聊天消息. 用户在谷歌聊天中所做的任何事情都应该在我的应用程序中发生。假设用户登录了谷歌聊天，在我的应用程序中他也登录了。发送的消息/传入的消息也应该是同步的。我能够做到除了同步传出的短信之外的所有事情。当用户从谷歌聊​​天向我的应用程序发送消息时如何捕获数据包。?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:04:40.643

您不应该这样做（除非扎根），因为这将是安全问题 - 任何人都可以通过这种方式嗅探您的任何网络活动。如果您的应用程序登录到 google talk 服务器（与任何其他客户端一样），那么您应该会收到所有对话的副本，仅此而已。

# java - MySQL Query 在大型实例上发生变异：

> ID：11547229
> 
> 赞同：0
> 
> 时间：2012-07-18T17:41:15.497
> 
> 标签：java, mysql, large-data-volumes, large-data

我目前正在计算值以填充 1500 万条记录的数据库。第一个 7 磨机刚刚好，但是现在我的更新查询开始出现问题：现在 & 然后一个随机字母变成了一些乱码。在java中，我生成查询：

```
String updateSql = "UPDATE VanNaar SET time = CASE ID ";
        for (int i = 0; i < routes.size(); i++) {
            updateSql += " WHEN " + routes.get(i).ID + " THEN  " + routes.get(i).driveTime;
        }
        updateSql += " END, ";
        updateSql += " distance = CASE ID ";
        for (int i = 0; i < routes.size(); i++) {
            updateSql += " WHEN " + routes.get(i).ID + " THEN  " + routes.get(i).distance;
        }
        updateSql += " END WHERE id IN (";
        for (int i = 0; i < routes.size(); i++) {
            updateSql += routes.get(i).ID + ",";
        }
        updateSql = updateSql.substring(0, updateSql.length() - 1);
        updateSql += ");"; 
```

如前所述，效果很好。以下是 Java 现在向我提出的问题：

```
...MySQL server version for the right syntax to use near 'Ã—HEN 8284022 THEN  999.999 WHEN 8284023 THEN  3791.0 WHEN 8284024 THEN  378... 
```

或者

```
...MySQL server version for the right syntax to use near 'WÃˆEN 7468574 THEN  2273.0 WHEN 7468575 THEN  2410.0 WHEN 7468576 THEN  2472.0 W' at line 1 
```

注意奇怪的**Ã^**或**Ã-**，最后一个例子，请注意大胆的 tekst：

`...MySQL server version for the right syntax to use near **'Â** WHEN 7228125 THEN 48590.0 WHEN 7228126 THEN 47910.0 WHEN 7228127 THEN...`

...

更新：似乎变得更糟了..：

```
 Unknown column '9Â°22331' in 'where clause' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T17:44:06.887

我不是 Java 专家，但您不应该首先使用[StringBuilder](http://docs.oracle.com/javase/6/docs/api/java/lang/StringBuilder.html)吗？甚至可能使用[准备好的语句](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html)？您可以使用 stringbuilder 构建准备好的语句，而不是

```
updateSql += " WHEN " + routes.get(i).ID + " THEN  " + routes.get(i).driveTime; 
```

你会在任何地方做类似的事情

```
myStrngBldr.append(" WHEN ? THEN  ?"); 
```

或者

```
myStrngBldr.append(" WHEN @foo1 THEN @foo2"); 
```

如果支持命名参数（不知道），然后添加实际参数：

```
myPrepdStmt = myConn.prepareStatement(myStrngBldr.toString());

myPrepdStmt.setInt(1, routes.get(i).ID);
myPrepdStmt.setFloat(2, routes.get(i).driveTime);
...
myPrepdStmt.executeUpdate(); 
```

[这个页面](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)应该可以帮助你。

究竟是什么导致了“奇怪的格式错误的字符串”：我不知道。我最好的猜测是你必须在所有这些 ID 和其他非字符串值上使用类似 .ToString() 的东西，因为你要连接一个字符串。也许，不知何故，这些值被解释为字符码（因为它们没有明确地转换为字符串），从而导致奇怪的字符。

另一个猜测是：在将它们发送到数据库之前，您是否真的在内存中构建了 1500 万个查询？还是每个查询都单独发送到数据库？也许您试图在内存中存储一​​个巨大的字符串这一事实会导致一些问题（尽管它不应该导致您在此处描述的问题）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T18:18:38.043

您可能需要考虑用两个`CASE`选择器和一个`IN`用每行的单独`UPDATE`语句替换巨大的更新。我知道问题不是由此引起的，但它可能是一种更清洁、更有效的解决方案。如果您的数据库连接器支持每次执行多个语句，您可以执行以下操作：

```
int batchSize = 0;
StringBuilder sb = new StringBuilder();
for (Route r: routes) {
    sb.append("UPDATE VanNaar SET")
      .append(" time = '").append(r.driveTime).append("',")
      .append(" distance = '").append(r.distance).append("'")
      .append(" WHERE ID = '").append(r.ID).append("'; ");
    if (++batchSize == BATCH_SIZE) {
        connector.exec(sb.toString());
        sb = new StringBuilder();
        batchSize = 0;
    }
}
if (sb.length() > 0) {
    connector.exec(sb.toString());
} 
```

这将让我们`StringBuilder`负责将任何基础值类型转换为`String`. 如果`driveTime`、`distance`或`ID`已经是字符串，那么您必须使用适当的 JDBC 方法正确地转义它们。

[正如@RobIII](https://stackoverflow.com/a/11547267/41747)所建议的那样，您最好对这类事情使用准备好的语句，因为它们会自动处理 SQL 注入问题。

# php - 回显带有可变文本（取决于条件）的表格样式，而不重复表格样式

> ID：11547230
> 
> 赞同：1
> 
> 时间：2012-07-18T17:41:23.403
> 
> 标签：php, css

所以，我试图用相同的样式回显错误警告，例如（不正确的密码/电子邮件），（填写所有字段），但文本不同，但我似乎找不到捷径来做到这一点而不回显整个样式 schpiel每个回声，我相信这对大多数人来说都是显而易见的，所以请帮助我。TVM .here 代码：

```
 if ($oldpassword!==$oldpassworddb)
     { echo"<head>

<style type='text/css'>
.tab2

{
   width:400px; height:40px;
   position: absolute; right: 300px; top: 70px;
}
 .td2
{
    background-color:pink;
    color:blue;
    text-align:center;
}

</style>
</head>
<body>
<table class='tab2'>
<td class='td2'>first meggage</td>
</table>
</body>";}

else if (strlen($newpassword)>25||strlen($newpassword)<6)
   {echo "what should I put in here!!! ">second message;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T17:46:20.873

您正在错误地处理这个问题。避免混合你的 PHP 逻辑和你的输出 HTML。

在输出*任何内容*之前确定首先显示哪条消息，并将其存储在变量中。然后输出所有带有变量的 HTML。这使您还可以提前定义所需的任何其他变量，并同时将它们全部插入到输出中。

```
<?php
// First define the $message variable
$message = "";
if ($oldpassword!==$oldpassworddb) {
  $message = "first message";
}
else if (strlen($newpassword)>25||strlen($newpassword)<6) {
  $message = "Second message";
}
else {
  // some other message or whatever...
}
Close the <?php tag so you can output HTML directly
?> 
```

然后输出 HTML（不要忘记 DOCTYPE！）

```
<!DOCTYPE html>
<head>

<style type='text/css'>
.tab2

{
   width:400px; height:40px;
   position: absolute; right: 300px; top: 70px;
}
 .td2
{
    background-color:pink;
    color:blue;
    text-align:center;
}

</style>
</head>
<body>
<table class='tab2'>
<!-- the PHP variable is inserted here, using htmlspecialchars() in case it contains <>&, etc -->
<td class='td2'><?php echo htmlspecialchars($message); ?></td>
</table>
</body> 
```

将 CSS 移动到通过 .css 中的标签`<table>`链接的外部 .css 文件中会更好地用于布局，但您应该首先解决您的 PHP 问题。`<link rel='stylesheet' src='yourcss.css'>``<head>`

# android - 在 OpenGL ES 2.0 (Android) 中的纹理上打一个洞

> ID：11547231
> 
> 赞同：1
> 
> 时间：2012-07-18T17:41:37.833
> 
> 标签：android, opengl-es, opengl-es-2.0

我在屏幕上绘制背景纹理，然后是前景纹理，现在我不想在用户触摸屏幕的前景纹理上打一个洞。结果应该是带有孔的前景纹理，并且通过孔您可以看到背景纹理。我如何通过 OpenGL ES 2.0 实现这一点。我知道我可以用 canvas 和 PorterDuff 做到这一点，但这种方法对我来说太慢了。

# c++ - 如何解决使用 libcurl 进行链接的未定义引用错误？

> ID：11547237
> 
> 赞同：2
> 
> 时间：2012-07-18T17:41:48.200
> 
> 标签：c++, compiler-construction, static, libcurl

我正在尝试用静态链接编译一个程序，这样我就不必用 30 个 .dll 分发它，但`-static`给了我一大堆未定义的引用错误。

我在跑

```
$ gcc curlgetter2BAK.cpp -lcurl -static -o a.out 
```

这给了我一大堆未定义的参考错误，我不确定其来源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T19:00:46.437

`-static`不是魔术关键字，您需要拥有`.a`所有这 30 个“dll”*及其依赖*项的静态版本（文件） 。

# powershell - PowerShell 中的挂载点

> ID：11547239
> 
> 赞同：1
> 
> 时间：2012-07-18T17:42:06.277
> 
> 标签：powershell, mount-point

我正在尝试使用 Powershell 创建挂载点。它是在本地完成的，这是我遇到的代码和问题。

```
$choice = "t"
New-Item -ItemType directory -Path "E:\Data\Riptide\Ariis\Ris\Docs\interPrimary1\"
$orgdrive = "E:\Data\Riptide\Ariis\Ris\Docs\interPrimary1\"
$driveLetter= $Choice + ":\"
$driveinfo=get-wmiobject win32_volume | where { $_.driveletter -eq $choice + ":" } | select-object DeviceID
Mountvol $orgdrive $driveinfo 
```

执行时，我得到参数不正确。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T19:15:18.067

你只需要尝试：

```
mountvol $orgdrive $driveinfo.DeviceID 
```

对于未来，您可以测试：

```
$driveinfo| Get-Member 
```

您可以在[此处](http://www.silogix.fr/developpement/outils/c_param.aspx)找到一个允许您测试命令行参数的工具。

# java - Spring创建单例的多个实例？

> ID：11547240
> 
> 赞同：16
> 
> 时间：2012-07-18T17:42:13.140
> 
> 标签：java, spring, singleton, autowired, applicationcontext

我有一个相互自动装配的 Spring bean 图。高度简化的插图：

```
<context:annotation-config/>
<bean class="Foo"/>
<bean class="Bar"/>
<bean class="Baz"/>

...

public class Foo {
   @Autowired Bar bar;
   @Autowired Baz baz;
}

public class Bar {
   @Autowired Foo foo;
}

public class Baz {
   @Autowired Foo foo;
} 
```

所有这些 bean 都没有指定范围，这意味着它们是单例（使它们显式单例不会改变任何东西，我已经尝试过）。

问题在于，在**单个应用程序上下文**实例**化**之后，实例`Bar`和`Baz`包含. 这怎么可能发生？**`Foo`**

 **我试图创建 public no args 构造函数，`Foo`并且调试已确认`Foo`多次创建。所有这些创作的堆栈跟踪都在[这里](http://pastebin.com/wqCRS8H7)。

我还尝试为 Spring 启用调试日志记录，在所有其他行中，得到以下内容：

```
DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'Foo'
DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'Foo'
DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean 'Foo' 
```

我知道我的 bean 是相互交叉引用的，但我希望 Spring 框架尊重单例范围并初始化一个单例 bean，然后将它自动连接到任何想要它的人。

有趣的事实是，如果我使用带有访问器的老式`private`构造函数`public static Foo getInstance`，这工作得很好——在上下文设置期间不会抛出异常。

FWIW，我正在使用带有`o.s.c.s.ClassPathXmlApplicationContext(String ...configLocations)`构造函数的 Spring 版本 3.0.5（也尝试使用 3.1.2，结果相同）。

我可以轻松地将我的代码转换为使用静态初始化程序，但我想了解为什么 Spring 会以这种方式运行。这是一个错误吗？

**编辑：**一些额外的调查表明

*   初始化应用程序上下文后，所有后续请求`context.getBean(Foo.class)` **始终**返回相同的`Foo`.
*   `@Autowired`用 setter替换（这个 bean 大约 20 次使用）仍然会导致这个对象的多个构造，但是所有依赖项都注入**了相同的**引用。

对我来说，上面表明这是一个与`@Autowired`实现有关的 Spring 错误。如果我设法获得任何有用的信息，我将发布到 Spring 社区论坛并返回这里。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-12T17:10:52.343

如果您不小心使用 context:component-scan 注释，子上下文可以重新实例化相同的单例 bean（还有其他 Spring 上下文扫描注释，例如 MVC 和其他）。这是在 Web 应用程序中使用 Spring servlet 时的常见问题，请参阅[为什么 DispatcherServlet 创建另一个应用程序上下文？](https://stackoverflow.com/questions/7833767/why-dispatcherservlet-creates-another-application-context)

确保您没有在子上下文中重新扫描组件，或者您只扫描特定的包/注释并从根上下文组件扫描中排除所述包/注释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-29T11:50:12.027

出于某种原因，我们在集成测试和服务中也随机出现了这个问题（spring 版本 4.1.4，java 1.8）。

看起来可能有不止一个罪魁祸首 - 自动装配一开始似乎是造成这种情况的原因。

但是，我们通过确保为每个受影响的 bean 提供一个“id”字段来解决最一致的故障。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T19:02:58.603

尝试使用setter注入而不是构造方法，看看它是否有效。在spring bean xml中将Bean A ref指定给Bean B，反之亦然。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T00:42:22.880

我的 Spring 配置如下：

```
<context:annotation-config/>

<bean class="Bar" />
<bean class="Foo" />
<bean class="Baz" /> 
```

课程与您的课程相同

测试应用程序如下：

```
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class SpringTest {

    /**
     * @param args
     */
    public static void main(String[] args) {
        ApplicationContext ctx = new ClassPathXmlApplicationContext("META-INF/spring/testctx.xml");

        Foo foo = ctx.getBean(Foo.class);
        Baz baz = ctx.getBean(Baz.class);
        Bar bar = ctx.getBean(Bar.class);

        System.out.println(foo.equals(baz.foo));
        System.out.println(foo.equals(bar.foo));
        System.out.println(baz.equals(foo.baz));

        System.out.println(foo.baz.toString());
        System.out.println(baz.toString());
        System.out.println(foo.bar.toString());
        System.out.println(bar.toString());

    }

} 
```

测试应用程序的输出如下：

```
true
true
true
Baz@8aef2b
Baz@8aef2b
Bar@215bf054
Bar@215bf054 
```

使用 3.0.6 它工作得非常好（单例 bean 确实是单例）。可能还有其他你没有在这里说明的东西弄乱了你的配置。当然，作为旁注，使用默认包可能会导致一些神秘的魔法发生;-)**

# java - 刷新 JTable 时执行的 tableChange()

> ID：11547241
> 
> 赞同：0
> 
> 时间：2012-07-18T17:42:14.590
> 
> 标签：java, swing, jtable

在我的表单中，我有一个带有 TableModelListener 的 JTable。tableChanged 方法更新我的 JButton 上的逻辑。这一切正常。当用户在 jtable 中的单元格中编辑值时 - tableChanged 方法将执行并且相应地刷新按钮。

我遇到的问题是一个表演障碍。JTable 显示对象和对象的一些属性。用户从应用程序中选择对象。
如果我选择了一个对象并显示在 jtable 中。如果该用户更改了应用程序中的属性值而不是在 JTable 中编辑它。jtable 仍然刷新，并显示更改的值。但是没有发生 TableModelEvent 并且我的按钮逻辑永远不会刷新。

我看过 TableCellListeners - 但仍在寻找表格中的编辑。所以我认为这在这里行不通。

我怎么知道有些事情发生了变化并且表已经更新，而 jtable 本身没有发生事件？

编辑：放置一些 jtable 代码

这是在我的基础对话框类中

```
selectTable = new JTable(SingletonSelectTable.getInstance());
selectTable.getModel().addTableModelListener(this); 
selectTable.setDefaultRenderer(Object.class, new DefaultTableCellRenderer() {
     public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
        Component comp = super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);
        Font font = comp.getFont();
        if (SingletonSelectTable.getInstance().isCellBold(row, column) == true){
           comp.setFont(font.deriveFont(Font.BOLD));
        }
     return comp;
     }
  });

selectTable.setAutoResizeMode(JTable.AUTO_RESIZE_ALL_COLUMNS);
selectTable.setCellSelectionEnabled(false);
selectTable.setRowSelectionAllowed(true);
selectTable.setColumnSelectionAllowed(false);
JScrollPane ScrollPane = new JScrollPane(selectTable); 
```

tableChanged 方法

```
public void tableChanged(TableModelEvent e) {
  setRemoveButtonVisibility();
  setRemoveAllButtonVisibility();
  setCommentButtonVisibility();
  setOKButtonEnabledStatus(); 
```

}

我的单身班

```
public class SingletonSelectTable extends AbstractTableModel { 
```

我希望这有帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T21:11:51.353

> 我怎么知道有些事情发生了变化并且表已经更新，而 jtable 本身没有发生事件？

中从来没有事件`JTable`。`TableModel`改变的是底层`TableModel`，触发事件的是底层。向`JTable`注册一个侦听器，`TableModel`以便它知道何时应该更新显示的表格内容。

因此，如果您说`JTable`更新（自动，因此无需您滚动/选择/悬停/...）意味着`TableModel`确实会触发事件，这意味着您也可以收听它。

在您的应用程序中更改了您的元素的场景`TableModel`中，应该`TableModelEvent`从`TableModel`. 通常这是通过让`TableModel`监听器监听它包含的对象的变化，或者让更改对象的代码也通知`TableModel`底层数据已更改来完成的。无论哪种方式，都`TableModel`需要触发一个事件，因此您的听众没有理由不接收它，除非它根本没有被触发（意味着不正确的`TableModel`）。

根据您的评论，我最好的猜测是您的实现不正确，`TableModel`并且您`TableModel`根本没有触发事件，并且`JTable`“意外”更新了（根据我的经验，`JTable`对于丢失的事件来说是相当强大的，当然当没有添加/删除行时...与 a 相比明确`JTree`地

> getValueAt() 方法获取更改，然后更新 jtable

这听起来确实不正确。该`getValueAt()`方法通常`JTable`在收到事件后被调用。由于该事件，它`JTable`知道必须更新它，因此它会查询模型以获取新数据。因此，该`getValueAt`方法不会获取更改，而是作为更改的结果被调用。

我强烈建议看一下[Swing 表教程](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)，当然还有关于[创建表模型](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#data)、[侦听数据更改](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#modelchange)和[触发数据更改事件的部分](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#fire)

# wpf - 如何使用 ReactiveUI 为 TextBox 设置 ViewModel 绑定？

> ID：11547243
> 
> 赞同：1
> 
> 时间：2012-07-18T17:42:14.357
> 
> 标签：wpf, binding, mvvm, reactiveui

出于某种原因，我无法让我的文本框/属性绑定与 Reactive UI “自动”一起工作。

我的 DataContext 设置如下：

我的 ViewModel 是在 MainWindow.xaml.cs 后面的代码中设置的：

```
public MainWindowViewModel ViewModel { get; protected set; }

public MainWindow()
{
    ViewModel = new MainWindowViewModel();
} 
```

在我的 WPF MainWindow.xaml 中，我有 DataContext 并且有一个像这样的文本框元素：

（其他属性省略）

```
<Window x:Name="Window">
    <Grid DataContext="{Binding ViewModel, ElementName=Window}">
        <StackPanel x:Name="ContentGrid" Grid.Row="1">
            <TextBox Name="Password" Text="{Binding Password, Mode=TwoWay}" />
            ... 
```

在 MainWindowViewModel 我有这样的属性和字段：

```
string _PasswordConfirmation;

public string PasswordConfirmation
{
    get { return _PasswordConfirmation; }
    set { this.RaiseAndSetIfChanged(x => x.PasswordConfirmation, value); }
} 
```

我还有一个这样设置的命令：

```
var canHitOk = this.WhenAny(
    x => x.Password,
    x => x.PasswordConfirmation,
    (pass, confirm) => (pass.Value == confirm.Value && pass.Value.Length > 3));

OkCommand = new ReactiveCommand(canHitOk); 
```

你可以猜到，我也有密码确认文本框/属性设置，以及按钮的命令集（密码确认文本框也有同样的问题）。由于 ViewModel 中的字段/属性组合永远不会更新，因此该按钮永远不会启用。

我调试并确认 ViewModel 已绑定到 XAML，但在 TextBoxes 中键入时，文本永远不会在字段/属性组合中更新。

我查看[了 GitHub 存储库中的示例 WP7 应用程序，](https://github.com/xpaulbettsx/ReactiveUI/blob/master/ReactiveUI.Sample.WP7/MainPage.xaml.cs)他们手动绑定`KeyUp`事件以在属性/字段的文本中设置文本。如果我遵循这个约定，我的 MainWindow.xaml 中有这个：

```
Password.KeyUp += (o, e) =>
{
    ViewModel.Password = Password.Text;
}; 
```

但这是正确的做法吗？我认为 Reactive UI 会像我在其他 MVVM 框架中看到的那样处理绑定，除非我弄错了。有没有更简单的方法？

**更新**

正如 Paul Betts 在他的回答中的评论中指出的那样，您可以通过将此属性添加到绑定来启用绑定自动更新：

```
UpdateSourceTrigger=PropertyChanged 
```

这将使 TextBox 元素看起来像这样：

```
<TextBox Name="Password" Text="{Binding Password, UpdateSourceTrigger=PropertyChanged}" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T08:58:55.780

问题是 WP7 TextBox 不会在 KeyUp 上自动更新其绑定 - 可悲的是，这是每个 MVVM 框架的问题。

# python - 在 django 中执行 python 程序

> ID：11547245
> 
> 赞同：-1
> 
> 时间：2012-07-18T17:42:29.753
> 
> 标签：python, django

我是 Django 的新手。我成功创建了我的第一个 django 站点。我想为 python 程序制作 web 界面：

```
def func(a,b,c):
    return a*b*c 
```

输入表单域：a,b,c 的数值输出：print func(a,b,c)

我的 python 程序解决了一些微分方程，其中输入是 a、b、c、.. 的值，输出是包含结果的文本文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T18:19:40.157

创建一个表单类。编写一个显示表格和计算结果的模板。编写一个从表单接收值并执行计算的视图。阅读[教程](https://docs.djangoproject.com/en/dev/intro/tutorial01/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T18:38:43.643

您将无法使用 Django 标签将参数从模板传递给 Python。您可以通过将其结合 javascript 并通过 AJAX 或其他方法将其传递给服务器，然后使用 Django 模板标签和 javascript 的组合返回结果来实现。

请在未来进行更多描述。作为回报，答案可能会更具体。

# c# - Windows Metro 异步加载数据

> ID：11547251
> 
> 赞同：2
> 
> 时间：2012-07-18T17:42:44.010
> 
> 标签：c#, microsoft-metro, windows-runtime, .net-4.5, async-await

我创建了一个基于拆分页面示例应用程序的 Windows 8 Metro 应用程序。但是，在示例应用程序中，数据是在构造函数中同步加载的。我正在访问一个文本文件，因此需要异步加载数据。构造函数如下所示：

```
 public MyDataSource()
    {
        DataLoaded = false;

        LoadData();
    } 
```

`LoadData()`是填充数据模型的异步方法。这工作正常，并按加载它的方式显示数据（这是我想要的行为）。当我尝试测试挂起和终止时会出现问题。问题是恢复有可能在填充数据模型之前尝试访问它：

```
 public static MyDataGroup GetGroup(string uniqueId)
    {
        // If the data hasn't been loaded yet then what?
        if (_myDataSource == null)
        {
        // Where app has been suspended and terminated there is no data available yet
        }

        // Simple linear search is acceptable for small data sets
        var matches = _myDataSource.AllGroups.Where((group) => group.UniqueId.Equals(uniqueId));
        if (matches.Count() == 1) return matches.First();
        return null;
    } 
```

我可以通过将构造函数更改为 call 来解决此问题`LoadData().Wait`，但这意味着应用程序会锁定 UI 线程。我相信我需要的是一种让恢复代码`GetGroup`等待直到数据加载而不锁定 UI 线程的方法。这是可能的还是可取的，如果是的话，怎么做？

编辑：

一两个人建议将任务缓存为`LoadData()`. 这是一个好主意，但里面的代码`GetGroup`是由页面状态管理部分调用的，因此不能是异步的。为了解决这个问题，我尝试了以下方法：

```
if (!DataLoaded)
{
    //dataLoading = await MyDataSource.LoadData();
    dataLoading.RunSynchronously();
} 
```

但这给了我一个错误：

```
RunSynchronously may not be called on a task not bound to a delegate, such as the task returned from an asynchronous method. 
```

和

```
dataLoading.Wait() 
```

只是锁定用户界面。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T19:51:30.253

我认为这听起来像是最好的选择，如果你制作了 constructor `async`。但既然[这是不可能的](https://stackoverflow.com/a/8145668/41071)，你可以做的是创建一个`async`工厂方法`MyDataSource`：

```
private MyDataSource()
{
    DataLoaded = false;
}

public static async Task<MyDataSource> Create()
{
    var source = new MyDataSource();
    await source.LoadData();
    return source;
} 
```

`_myDataSource`然后使用初始化`await`：

```
_myDataSource = await MyDataSource.Create(); 
```

如果由于某种原因你不能这样做，你可以存储`Task`工厂方法返回的值并等待它`GetGroup()`：

```
_myDataSourceTask = MyDataSource.Create();

…

public static async Task<MyDataGroup> GetGroup(string uniqueId)
{
    var myDataSource = await _myDataSourceTask;

    // Simple linear search is acceptable for small data sets
    var matches = myDataSource.AllGroups.Where(group => group.UniqueId == uniqueId);
    if (matches.Count() == 1) return matches.First();
    return null;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T19:21:54.787

如果 LoadData 是异步的，则存储任何可等待对象（或创建一个新对象）并公开它（例如，像任务一样）然后 GetGroup 可以标记为异步并且可以执行 var data = await _myDataSource.LoadTask 或其他

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T20:47:39.313

我认为 Svick 最接近于回答这个问题，因为他使用了 Tasks。无论是在 GetGroup 方法上返回 Task 还是在 LoadAsync 方法上返回任务都可能无关紧要。重要的是您捕获该任务并稍后在简历中引用它。

Task 类[在此处](http://msdn.microsoft.com/en-us/library/windows/apps/system.threading.tasks.task%28v=vs.110%29.aspx)记录，您会注意到它具有**IsCanceled**、**IsCompleted**和**IsFaulted**等属性。当您的构造函数启动 LoadAsync 方法时，您可以将它返回的 Task 保存为类级变量。稍后，当您的恢复代码启动时，您可以检查任务是否仍在运行（即未完成且未出错）。如果任务已完成，您可以立即运行您的简历代码。如果尚未完成，您可以使用**Task.ContinueWith**安排您的简历代码在任务完成时运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T17:48:59.773

我还没有检查 Windows 8，但我认为它的工作原理类似于 Windows Phone，假设您使用 Silverlight（或 WPF）来开发您的应用程序，我从您的问题中不清楚这一点。如果您使用 Silverlight：

您需要使用 INotifyPropertyChanged 接口和 ObservableCollection-s 才能将数据绑定到 UI。这样，每次您更改数据时，UI 都会收到有关更改的通知，并且绑定将刷新。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T20:29:35.727

MyDataGroup 实现 iNotifyPropertyChanged 的​​公共属性。

UniqueID 一个公共属性。当 UniqueID 更改设置 MyDataGroup = null 然后调用 BackGroundWorker 到 var mathces = 但如果 LoadData(); 则延迟 正在工作中。由于这是在后台，延迟不会占用 UI。在回调设置 MyDataGroup 和 UI 将得到通知。确保您的后台工作人员是可取消的，因为您希望在 UniqueID 更改时取消它（如果它正在运行）。

我在 WPF 中执行此操作，因此如果它不能转换为 Metro 很抱歉，我将删除。

# haskell - GHCi 中的 Haskell csv-conduit

> ID：11547252
> 
> 赞同：5
> 
> 时间：2012-07-18T17:42:47.100
> 
> 标签：haskell, csv

有人建议我将[csv-conduit](https://github.com/ozataman/csv-conduit)作为一个很好的 Haskell 包来处理 CSV 文件。我想了解它是如何工作的，但是对于新手 Haskell 程序员来说，文档太简洁了。

有没有办法让我通过 GHCi 中的反复试验来弄清楚它是如何工作的？

更具体地说，我应该*从*GHCi 加载模块和文件，还是应该编写一个简单的 HS 文件来加载它们，*然后*以交互方式移动？

* * *

我提到了 csv-conduit，但我愿意使用*任何*CSV 包。我只需要拿到一个并玩弄它，直到我感到自在（就像我在 IDLE 中所做的那样）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T00:04:21.037

看看下面的函数：`readCSVFile :: :: (MonadResource m, CSV ByteString a) => CSVSettings -> FilePath -> m [a]`

调用起来相对简单，因为我们只需要一个`CSVSettings`，例如`defCSVSettings`，和一个`FilePath`（aka `String`），`"file.csv"`或其他东西。

因此，在调用之后，我们得到`(MonadResource m, CSV ByteString a)`. 我们可以一次解决这个问题，以找出合适的类型。我们正在执行`IO`这个操作，所以 for `MonadResource m`，`m`应该只是`ResourceT IO`，它恰好是`MonadBaseControl IO`as 要求的一个实例`runResourceT`。这是一个`conduit`具体的事情。

对于`CSV ByteString a`，我们需要找到 的哪些实例`CSV`。为此，请访问[http://hackage.haskell.org/packages/archive/csv-conduit/0.2.1.1/doc/html/Data-CSV-Conduit.html#t:CSV](http://hackage.haskell.org/packages/archive/csv-conduit/0.2.1.1/doc/html/Data-CSV-Conduit.html#t%3aCSV)（其中包的文档在我看来有点令人讨厌的是所有都塞进了类型类...）然后单击 Instances 以查看我们有哪些可用的实例`CSV ByteString a`。两个选项是`CSV ByteString ByteString`和`CSV ByteString Text`。

在这两者中，`Text`更可取，因为它处理 unicode，而 CSV 不太可能包含二进制数据。`ByteString`或多或少类似于一段`[Word8]`时间`Text`更类似于`[Char]`这可能是您想要的。因此，`a`应该是`Text`（尽管`ByteString`仍然有效）。

这意味着函数调用的结果是`ResourceT IO [Row Text]`. 我们对此无能为力，但因为`ResourceT`它是一个 monad 转换器，我们可以使用 函数轻松“弹出” monad 转换层`runResourceT`。因此，

```
readFile :: FilePath -> IO [Row Text]
readFile = runResourceT . readCSVFile defCSVSettings 
```

这很容易在 main 中使用，然后您可以使用 a或 a`[Row Text]`进行迭代以获取各个行。`map``fold`

要在 GHCI 中运行这类事情，您绝对必须特别指出类型。原因是结果类实例不依赖于任何参数；因此，对于任何一组`CSVSettings`and `FilePath`，`readCSVFile`只要它们 as`m`是`MonadResource m`和`a`的一个实例，就可以返回任意数量的不同类型`CSV ByteString a`。因此，我们必须明确指出 GHCi 您想要哪种类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T20:08:20.230

你试过[Text.CSV](http://hackage.haskell.org/packages/archive/csv/0.1.1/doc/html/Text-CSV.html)吗？如果您刚开始使用 Haskell，它可能更合适，因为它更简单。至于探索新的模块，你可以把它加载到 GHCi 中，不需要编写额外的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-26T00:46:57.967

这适用于最新版本的 csv-conduit 包（版本 0.6.3）。请注意 readCsv 的签名，没有它我无法编译。

```
{-# LANGUAGE OverloadedStrings #-}

import Data.CSV.Conduit
import Data.Text (Text)
import qualified Data.Vector as V
import qualified Data.ByteString as B

csvset :: Char ->  CSVSettings 
csvset c =  CSVSettings {csvSep  = c, csvQuoteChar = Just '"'}

readCsv :: String -> Char -> IO (V.Vector (Row Text))
readCsv fp del = readCSVFile (csvset del) fp

main = readCsv "C:\\mydir\\myfile.csv" ';' 
```

# c# - + 在正则表达式中

> ID：11547257
> 
> 赞同：1
> 
> 时间：2012-07-18T17:43:12.857
> 
> 标签：c#, regex

我正在尝试从字符串中捕获一个值。字符串的格式应该是

```
01+XXXX 
```

我想使用正则表达式捕获 XXXX。这就是我想出的-

```
01+\\s*(?<1>[.0-9]*) 
```

但这行不通。起作用的是-

```
01+\\s*(?<1>[+.0-9]*) 
```

唯一的区别是将 + 添加到字符类中。我的主要问题是 - 为什么第二个表达式有效而第一个表达式无效？在第一个中，我寻找 01+，其余的应该转到 [.0-9]。在我看来，第二个想要阅读 + 两次 - 这不是它在做什么吗？我对正则表达式很陌生，所以我觉得我可能会遗漏一些小东西。

在此站点[http://www.codeproject.com/Articles/9099/The-30-Minute-Regex-Tutorial](http://www.codeproject.com/Articles/9099/The-30-Minute-Regex-Tutorial)上，它说 + 用于“重复一次或多次”。那么它是否试图多次阅读 01+ ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T17:46:50.653

它正在阅读`1`一次或多次。也就是说，正则表达式`01+`匹配`01`or `011`or`0111`等​​。

但它与`+`. 如果要匹配文字`+`，请为正则表达式编写`01\+`或`01[+]`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-18T17:47:30.953

the`+`是一个特殊字符，意思是“一次或多次”。在这种情况下，它表示`01`, `011`,`0111`等而不是`01+`。如果您想按字面意思使用它，则需要将其转义，如下所示：`\+`

注意：看起来您正在将它与字符串一起使用，因此您需要双重转义：`\\+`

它在字符类 ( `[+]`) 中工作，因为字符类从字面上理解大多数字符，包括`\`and在内的例外`]`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-18T17:48:19.080

'+' 是正则表达式中的特殊字符，表示“1 次或多次”。所以你写的意思是：

*   字符“0”
*   字符“1”*一次或多次*
*   空格 0 次或多次
*   等等

如果要匹配文字加号，则需要对其进行转义：

```
01\+\\s*(?<1>[.0-9]*) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T17:48:49.737

这`+`是一个[量词](http://www.regular-expressions.info/repeat.html)，如您链接的教程中所述。所以，你的正则表达式的意思是“匹配一个零，然后是一个或多个，然后是零个或多个空格，然后......”。

加号需要转义：

```
01\\+\\s*(?<1>[.0-9]*) 
```

您的第二个正则表达式有效，因为 + 是[字符类](http://www.regular-expressions.info/charclass.html)的一部分，不需要在那里转义。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T17:54:34.063

```
01\+(?<cap>[\d.]*) 
```

解释：

```
01                       '01'

\+                       '+'

[\d.]*                   any character of: digits (0-9), '.' 
                         (0 or more times, matching the most amount possible) 
```

# sql-server-2008 - 如何从内部存储过程回滚和停止执行

> ID：11547263
> 
> 赞同：0
> 
> 时间：2012-07-18T17:43:32.280
> 
> 标签：sql-server-2008, tsql, sql-server-2008-r2

假设我有两个存储过程，`Outer`并且`Inner`：

```
CREATE PROCEDURE dbo.Outer
AS
BEGIN
  SET NOCOUNT ON;
  SET XACT_ABORT ON;

  BEGIN TRAN
    EXEC Inner

    -- Perform additional processing (which should not occur if there is 
    -- a ROLLBACK in Inner)
    ...
  COMMIT
END;
GO 
```

`Outer`存储过程打开 XACT_ABORT 并启动显式事务。然后它调用`Inner`事务内部的存储过程。

```
CREATE PROCEDURE dbo.Inner
AS
BEGIN
  DECLARE @Id INT=(SELECT Id FROM SomeTable WHERE ...);

  IF (@Id IS NOT NULL)
    ROLLBACK;

  INSERT INTO SomeTable(...)
  VALUES (...);
END;
GO 
```

`Inner`存储过程执行检查以查看是否存在某些内容，以及是否要回滚在存储过程中启动的整个事务并中止和中的`Outer`所有进一步处理。`Inner``Outer`

发生的事情不是我所期望的，而是我收到了错误消息：

在内部：

> EXECUTE 之后的事务计数表明 BEGIN 和 COMMIT 语句的数量不匹配。先前计数 = 1，当前计数 = 0。

在外：

> COMMIT TRANSACTION 请求没有对应的 BEGIN TRANSACTION。

显然，`ROLLBACK`即使打开了 XACT_ABORT 也不会停止执行流程。在 之后放一条`RETURN`语句`ROLLBACK`让我们退出`Inner`，但`Outer`继续执行。我需要做什么才能`ROLLBACK`停止所有进一步的处理并有效地导致退出`Outer`？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T17:31:06.870

发出回滚不会中止批处理（无论 XACT_ABORT 设置如何）。如果抛出严重程度足够高的错误（系统或通过 RAISERROR 生成的自定义），批处理将在您的情况下自动中止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T18:26:04.993

你必须实施`Exception Handling`

```
Begin Try
    Set NOCOUNT ON
    SET XACT_ABORT ON
    Begin Tran
        --Your Code
    Commit Tran
End Try

Begin Catch
    Rollback Tran
End Catch 
```

# mysql - #1242：子查询返回多于一行

> ID：11547265
> 
> 赞同：0
> 
> 时间：2012-07-18T17:43:46.273
> 
> 标签：mysql, sql, phpmyadmin, mysql-error-1242

我有一个关于mysql的问题。

我有几张桌子，例如`course`，，，，`papers``students``studentspapers`

现在我想要的是我的查询应该返回如下结果：

它应该从学生表中选择学生姓名，学生类别，从学生纸中选择学生可选论文，但我没有在我的学生论文表中提到任何内容，而是在论文表中。

论文表以 id 作为主键，我在 studentpaper 中使用它作为外键。

现在我使用的简单查询是：

```
select
  st.name,
  s.paperid
from
  students st,
  sps s join papers
  on paperid
where
  paperid = (select p.p_id from papers p where type='optional')
  and st.course=1 
```

我不知道我该怎么办。

它说子查询返回超过 1 行 #1242

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T17:48:24.137

在这种情况下，您必须将您的 SQL 更改为：

```
select st.name, s.paperid 
from students st, sps s join papers on paperid 
where paperid in (select p.p_id from papers p where type='optional') and st.course=1 
```

我只是将“=”更改为“in”。

这应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T18:19:54.563

您的查询是：

```
select st.name, s.paperid
from students st,
     sps s join
     papers
     on paperid
where paperid= (select p.p_id from papers p where type='optional') and st.course=1 
```

它缺少学生和sps之间的连接。我想你的意思是：

```
select st.name, s.paperid
from students st join
     sps s
     on st.studentid = sps.studentid join
     papers p
     on p.paperid = sps.paperid
where p.type='optional' and st.course=1 
```

但是，如果没有看到表的结构，很难说这是否是正确的查询。

# jquery - jQuery slideDown/slideUp 行为

> ID：11547266
> 
> 赞同：1
> 
> 时间：2012-07-18T17:43:50.300
> 
> 标签：jquery

我正在使用 jQuery slideDown/slideUp 函数来创建一个菜单，当您将鼠标悬停在它上面时会显示链接。菜单是包含菜单标题的图像，当您将鼠标悬停在图像上时，它会垂直增长以显示链接。菜单图像/链接包含在 div 中以帮助定位图像。

我能够让菜单图像垂直增长以显示所有链接，但是当我尝试将**鼠标悬停**在底部链接上时，jQuery 会过早地折叠图像。更奇怪的是，菜单在屏幕顶部时可以正常工作，但是当我将菜单图像放置在背景图像上它们所属的位置时，它会完全停止工作。

看起来**悬停区域**没有随图像垂直增长，而是保持折叠图像的原始高度。

以下是我的 jQuery 函数：

```
 $( document ).ready
       (
          function()
          {
             $( '.down-list' ).width( $( '.dropdown-menu' ).width() );

             $( '.dropdown-menu' ).hover
                (
                   function()
                   {
                      $( '.menu-first', this ).addClass( 'slide-down' );
                      $( '.down-list', this ).slideDown( 50 );
                   },

                   function()
                   {
                      obj = this;

                      $( '.down-list', this ).slideUp
                         (
                            50,

                            function()
                            {
                               $( '.menu-first', obj ).removeClass( 'slide-down' );
                            }
                         );
                   }
                );
          }
       ); 
```

这是HTML：

```
 <body>
          <div id="container">
             <img name="background" src="images/background.jpg" width="1600" height="1238" border="0" alt="Legend of Kung Fu - Branson, MO" usemap="#navMap" />

             <map name="navMap">
                <area shape="rect" coords="387,9,717,95" href="http://www.kungfubranson.com" alt="Home" />
                <area shape="rect" coords="833,0,1008,100" href="http://foursquare.com/venue/6109987" target="_blank" alt="Four Square" />
                <area shape="rect" coords="1045,45,1080,79" href="http://twitter.com/KungFuBranson" target="_blank" alt="Twitter" />
                <area shape="rect" coords="1087,45,1122,78" href="http://www.facebook.com/kungfubranson" target="_blank" alt="Facebook" />
                <area shape="rect" coords="1131,45,1167,79" href="http://www.youtube.com/kungfubranson" target="_blank" alt="YouTube" />
                <area shape="circle" coords="1273,56,37" href="https://tickets.kungfubranson.com" target="_blank" alt="Buy Tickets Now!" />
             </map>

             <div id="menuLinks">
                <div class="dropHolder">
                   <div class="dropdown-menu">
                      <div class="menu-first">
                         <div class="menu-first2">
                            Show <br />
                            Info
                         </div>
                      </div>

                      <ul class="down-list" style="display:none;">
                         <li style="padding-top: 24px;">
                            <a href="story.php">Story</a>
                         </li>

                         <li>
                            <a href="news.php">News</a>
                         </li>

                         <li>
                            <a href="reviews.php">Reviews</a>
                         </li>

                         <li>
                            <a href="contact.php">Contact</a>
                         </li>
                      </ul>

                      <img src="images/lanternBottom.png" alt="" />
                   </div>
                </div>
             </div>

             <div id="content">
             </div>
          </div>
       </body> 
```

这是相应的CSS：

```
 /*-------------------------------*/
    /* Contains every Division Layer */
    /*-------------------------------*/
    body
    {
       margin: 0px;
       padding: 0px;
       background-color: #FFF0E0;
       font-family: Arial, Helvetica, sans-serif;
       font-size: 16px;
       font-style: normal;
       font-variant: normal;
       font-weight: normal;
    }

    /*-------------------------------------------------------------------*/
    /* Primary Division Layer and the ONLY one with a Relative Position  */
    /* permitting entire page to resize according to browser window size */
    /*                                                                   */
    /* Used on Home Page and contains all subsequent Division Layers     */
    /*-------------------------------------------------------------------*/
    #container
    {
       position: relative;
       margin: 0 auto 0 auto;
       width: 1600px;
       height: 1238px;
    }

    /*---------------------------------*/
    /* Contains Menu Image Label Links */
    /*---------------------------------*/
    #menuLinks
    {
       position: absolute;
       top: 200px;
       left: 491px;
       width: 582px;
       height: 200px;
    }

    .dropHolder
    {
       width: 90px;
       float: left;
       height: 1px;
       margin-left: 2px;
       line-height: 1.2em;
       color: #000;
       font-variant: normal;
       font-size: 13.5px;
       font-family: "Trebuchet MS", Helvetica, sans-serif;
       font-weight: bolder;
    }

    .dropHolder html, .dropHolder div, .dropHolder span, .dropHolder applet, .dropHolder object, .dropHolder iframe, .dropHolder blockquote, .dropHolder pre,
    .dropHolder a, .dropHolder abbr, .dropHolder acronym, .dropHolder address, .dropHolder big, .dropHolder cite, .dropHolder code,
    .dropHolder del, .dropHolder dfn, .dropHolder em, .dropHolder font, .dropHolder img, .dropHolder ins, .dropHolder kbd, .dropHolder q, .dropHolder s, .dropHolder samp,
    .dropHolder small, .dropHolder strike, .dropHolder strong, .dropHolder sub, .dropHolder sup, .dropHolder tt, .dropHolder var,
    .dropHolder dl, .dropHolder dt, .dropHolder dd, .dropHolder ol, .dropHolder ul, .dropHolder li
    {
       margin: 0;
       padding: 0;
       border: 0;
       outline: 0;
       vertical-align: baseline;
    }

    .dropHolder ol, .dropHolder ul
    {
       list-style: none;
    }

    .dropdown-menu
    {
       position: absolute;
       width: 90px;
       cursor: pointer;
       z-index: 1000px;
    }

    .dropdown-menu a:link, .dropdown-menu a:visited
    {
       color: #000 !important;
       display: block !important;
       text-decoration: none !important;
       margin: 0 !important;
       width: 90px;
    }

    .dropdown-menu a:hover
    {
       color: #cb0202 !important;
       text-decoration: none !important;
       width: 90px;
    }

    .dropdown-menu .slide-down
    {
       background: url(../images/lanternTop.png) no-repeat;
       width: 90px;
    }

    .menu-first
    {
       background: transparent url(../images/lanternTop.png) no-repeat;
       width: 90px;
       height: 38px;
       text-align: center;
       padding: 0px 0px 0px 0px;
       vertical-align: bottom;
       line-height: 14px;
    }

    .menu-first2
    {
       position: relative;
       bottom: -23px;
       z-index: 100;
    }

    .down-list
    {
       background: url(../images/lanternMiddle.png) repeat-y;
       width: 90px;
       margin-left: 0px;
       z-index: 500;
       font-size: 13px;
    }

    .down-list li
    {
       background: url(../images/lanternMiddle.png) repeat-y;
       width: 90px;
       height: 25px;
       padding: 0px 0px 0px 0px;
       text-align: center;
       line-height: 24px;
       vertical-align: bottom;
    }

    .down-list_OFF .lastLI_OFF
    {
       background: url(../images/lanternMiddle.png) repeat-y;
       width: 88px;
       height: 8px;
       line-height: 12px;
       vertical-align: bottom;
    }

    /*-----------------------*/
    /* Contains Page Content */
    /*-----------------------*/
    #content
    {
       position: absolute;
       top: 316px;
       left: 413px;
       width: 771px;
       height: 825px;
       text-align: justify;
       overflow-x: hidden;
       overflow-y: auto;
    } 
```

我正在使用 jquery-1.7.2.min.js。

提前感谢您的帮助。

布兰登

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T17:59:51.853

从此替换**#menuLinks** css

```
#menuLinks {
  float: left;
  height: 200px;
  margin-left: 491px;
  margin-top: 200px;
  width: 582px;
} 
```

# grails - 如何从域类中删除自由形式的“标签”？

> ID：11547268
> 
> 赞同：0
> 
> 时间：2012-07-18T17:44:05.930
> 
> 标签：grails

我创建了 2 个名为 Asset 和 Tag 的域类。资产可以有很多标签

```
// Asset.groovy
class Asset {
    static hasMany = [tags: Tag]
}

// Tag.groovy
class Tag {
    static belongsTo = Asset
    String word
} 
```

标签被输入到视图中的文本字段中，每个标签用逗号分隔。

提交 Asset 表单时，AssetController 将用于`Tag.findOrSaveWhere`创建新标签或`Asset.addToTag`

```
def tags_list = params?.tags?.split(",")
tags_list.each {
    def tag = Tag.findOrSaveWhere(word: it.trim())
    assetInstance.addToTags(tag)
} 
```

所有这些都很好，但是如果用户更新并删除了标签，我会尝试从资产中删除标签。

如何在更新时删除标签？

**编辑**通过采取删除所有标签然后尝试保存资产实例的旧方法，我对此有了更进一步的了解。

```
assetInstance.tags.clear()
def tags_list = params?.tags?.split(",")
tags_list.each {
    def tag = Tag.findOrSaveWhere(word: it.trim())
    assetInstance.addToTags(tag)
} 
```

但是，如果标签为空，这将引发异常。换句话说，如果我删除所有标签，保存失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T18:09:58.110

解决了我的问题。清除更新操作中的标签是正确的举措，但我必须注意表单中的空标签字符串。

我的最终结果是我的以下块`AssetController`

```
assetInstance.tags.clear()
def tags_list = params?.tags?.split(",")
tags_list.each {
def tag = Tag.findOrSaveWhere(word: it.trim())
if (tag.id != null) // to prevent null id exceptions
    assetInstance.addToTags(tag)
} 
```

# asp.net - 列表框选择了错误的项目

> ID：11547277
> 
> 赞同：1
> 
> 时间：2012-07-18T17:44:40.720
> 
> 标签：asp.net, vb.net, listbox, listitem

*更新*我已经解决了这个问题，但是将完成发布（在发布之前解决），希望它可以帮助其他人。

问题：从列表框中引用和操作列表项要求列表框的列表项都具有唯一的 listbox.value。就我而言，我将表名指定为列表框值，将列名指定为 listbox.text（我为用户提供了一个 sql 表中的字段列表以供选择）。所以一个包含以下内容的列表框：

```
Index 0: Text:street Value:"dbo.incident"
Index 1: Text:city Value:"dbo.incident" 
Index 2: Text:state Value:"dbo.incident" Selected 
```

然后您通过代码引用 textbox1.selected 项目，它的处理是意外的。它开始知道选定的项目，但在它处理引用的列表项的某个时刻，它开始通过值引用它，此时返回文本或索引将为“street”或“0”。我知道一旦您开始从列表框中拉出项目，它就会拉出第一个匹配项。

***开始原始帖子***

好的项目是一个 vb .net web 表单项目我有 2 个列表框，我想填充和来回移动条目，上下。我知道如何做到这一点，但是我似乎无法克服正在发生的这种奇怪的错误行为。

如果我像这样手动添加项目，它工作正常，列表项在列表框之间传输，我可以按预期更改索引。（对于这篇文章，我将把创建的条目称为静态条目）

```
ListBox1.Items.Add(New ListItem("1", "1"))
...through...
ListBox1.Items.Add(New ListItem("10", "10")) 
```

但是，如果我从 linq 语句以编程方式添加它们，则网页中的手动选择与所选项目无关，它始终为 0，单击页面上的任何按钮，回发将列表框返回到索引 0。（对于本次讨论，我将以这种方式创建的条目称为动态条目）

```
 Dim db As New MSCRMDataContext
    Dim datamodel = db.Mapping
    For Each r In datamodel.GetTables
        If r.TableName = "dbo.IncidentFull" Then
            For Each r1 In r.RowType.DataMembers
                ListBox1.Items.Add(New ListItem(r1.MappedName, r.TableName))

            Next
        End If
    Next 
```

我有一个 aspx 按钮：

```
<asp:Button ID="Button1" runat="server" Text="Button" /> 
```

具有以下点击事件：

```
Protected Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click

    mlbs_transferitem(ListBox1, ListBox2, ListBox1.SelectedItem)

End Sub 
```

我有一个在单独的 .vb 文件中传输列表项的子

```
Public Class multilistboxselector
Shared Sub mlbs_transferitem(srclb As ListBox, dstlb As ListBox, lbitem As ListItem, Optional sort As Boolean = False)
'checks if srclb had a selected listitem
If IsNothing(lbitem) Then
    Exit Sub
End If
'check for dupes
For Each li As ListItem In dstlb.Items
    If li.Text = lbitem.Text Then
        If li.Value = lbitem.Value Then
            Exit Sub
        End If
    End If
Next
'add lbitem to dst
dstlb.SelectedIndex = -1
dstlb.Items.Add(lbitem)
'remove lbitem from src
srclb.Items.Remove(lbitem)
'sort dst
If sort = True Then

End If
End Sub 
```

需要明确的是，代码与静态条目完美配合。我创建了一个新页面并在那里重新创建了所有内容，并且我的体验与我的源页面相同。

***编辑***

修剪我的故障排除步骤，因为它们被证明与问题无关并且相当冗长。

# linux - 如何同时保护共享资源不受用户进程和内核进程的影响？

> ID：11547278
> 
> 赞同：2
> 
> 时间：2012-07-18T17:44:44.760
> 
> 标签：linux, operating-system, locking

如何同时保护用户进程和内核进程的共享资源？这是罕见且非常极端的情况。我在一次采访中被问到这个问题。TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T01:16:08.117

好吧，它可以通过几种方式来完成。一种这样的方法是

***系统调用***
创建两个系统调用，一个获取锁，一个释放锁。如果用户进程想要访问共享资源，它会调用acquire-lock系统调用。如果系统调用成功返回，用户进程就可以访问共享资源。当用户进程完成时，它会通过调用 release 系统调用来释放锁。系统调用自身获取释放`spinlock_t`或`mutex_t`（或任何其他锁定机制）。想要访问共享资源的内核进程必须使用`spin_lock/spin_unlock`or`mutex_lock/mutex_unlock`。

正如@Damon 所指出的，这是非常笼统的问题，您应该在面试中提出具体问题才能给出具体答案。

# c# - 如何将 TextBox 绑定到多个数据上下文

> ID：11547280
> 
> 赞同：0
> 
> 时间：2012-07-18T17:44:47.537
> 
> 标签：c#, wpf, binding

我想批量更新人员数据。

```
public class Person
{
    public long personID { get; set; }
    public long FirstName { get; set; }
    public long LastName { get; set; }
    public long Department { get; set; }
} 
```

列表 m_list = new List();

我有一个 TextBox“TextBox1”控件，我想将它绑定到 m_list 的每个 Person 的“Department”属性。

```
foreach(Person current in m_list)
{
    //string bindingPath = "Department";
    //Binding binding = new Binding(bindingPath);
    //binding.Mode = BindingMode.TwoWay;
    //binding.Source = current;
    //TextBox1.SetBinding(TextBox1.Text, binding);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T18:41:16.800

在你的视图模型中很容易做到这一点：

```
public class MainViewModel
    {
        private readonly Lazy<ObservableCollection<Person>> _people = new Lazy<ObservableCollection<Person>>(
            () =>
                {
                    return new ObservableCollection<Person>
                            {
                                new Person {Department = "Dept1", FirstName = "Person", LastName = "1"},
                                new Person {Department = "Dept2", FirstName = "Person", LastName = "2"},
                            };
                });
        public ObservableCollection<Person> People { get { return _people.Value; } }

        public string Department
        {
            set
            {
                foreach (var p in People)
                    p.Department = value;
            }
        }
    } 
```

示例 XAML：

```
 <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>
        <TextBox Grid.Column="0" Text="{Binding Department, UpdateSourceTrigger=PropertyChanged}" />
        <ListView ItemsSource="{Binding People}" Grid.Column="1">
            <ListView.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Vertical" Margin="0,0,0,15">
                        <TextBlock Text="{Binding Department}"/>
                        <TextBlock>
                            <TextBlock.Text>
                                <MultiBinding StringFormat="{}{0} {1}">
                                   <Binding Path="FirstName"/>
                                   <Binding Path="LastName"/>
                                 </MultiBinding> 
                            </TextBlock.Text>
                        </TextBlock>
                    </StackPanel>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>
    </Grid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T18:45:31.210

我想你可能误解了`DataContext`

WPF 应用程序包含两层：UI 层和数据层。是数据层，而`DataContext`您的控件（例如 a `TextBox`）是 UI 层。

如果要批量更新数据，只需在数据层中执行更新即可。您根本不需要涉及 UI 层（除非您从中获得价值）。

例如，如果您有一个单曲`TextBox`，并且您想在 to 中设置 every 的属性`Department`，`Person`那么只需循环遍历您的列表，并将每个属性设置为`List<Person>``TextBox.Text``Person``Department``TextBox1.Text`

```
foreach(Person current in m_list)
{
    current.Department = TextBox1.Text;
} 
```

# django - csv阅读器在没有分隔符的新行上失败

> ID：11547281
> 
> 赞同：1
> 
> 时间：2012-07-18T17:44:53.573
> 
> 标签：django, csv

我正在构建一个接受 csv 数据作为上传文件的应用程序。

这是我观点的相关部分：

```
def climate_upload(request):
    ...
    reader = csv.reader(file, delimiter=';')    # news csv reader instance 
    next(reader)    # skip header row

    for line in reader:
        if not line:
            continue    
        report = site_name
        report.year = line[1]
        report.month = line[2]
        ...
        report.save()
    file.close()    # close file
    ... 
```

因此，这适用于如下所示的数据：

```
;"headers"
;2012;5;2012-06-01;27.1;24.5;29.8;26.8;85;0.8
;2012;5;2012-06-02;27.1;24.5;29.8;26.8;85;0.8 
```

但在这方面失败了：

```
"headers"
2012;5;2012-06-01;27.1;24.5;29.8;26.8;85;0.8
2012;5;2012-06-02;27.1;24.5;29.8;26.8;85;0.8 
```

*请注意每行缺少初始分隔符。*

不幸的是，MS Excel 似乎吐出了第二个版本。我认为这`reader`不是将新行识别为分隔符。是否有一些带有 reader 的标志会强制它接受`\n`作为分隔符`;`？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T17:54:21.667

分隔符或换行符不是问题 - 你计数不正确。

列表的第一个元素具有索引`0`。所以应该是

```
report.year = line[0]
report.month = line[1]
# etc. 
```

我猜您在`List index out of range`最后一个元素 ( `line[9]`) 上遇到了异常。

# c++ - InterlockedCompareExchange128 用法

> ID：11547284
> 
> 赞同：0
> 
> 时间：2012-07-18T17:45:16.257
> 
> 标签：c++, multithreading, visual-c++

我正在尝试使用 MS VC++ Intrinsic InterlockedCompareExchange128 函数。

作为一个 hello-world，我试图将一个 16 字节的地址与其自身进行比较，并将其替换为其他内容。这编译，但它不工作 - 地址不与新值交换。const_cast 用于使其编译（否则它会因为无法转换 volatile 而哭泣）。

```
typedef struct t_node
{
    volatile __int64 arr[2];
}node;

int main()
{   

    node *a = new node();

    a->arr[0] = 100;
    a->arr[1] = 1;

    __int64 i = 200;
    __int64 j = 500;

    char r = _InterlockedCompareExchange128(a->arr, i,j, const_cast<__int64*>(&a->arr[0]));

    cout<<endl<<"Interlocked Compare Res: "<<r;

    cin.get();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T17:52:23.157

从[文档](http://msdn.microsoft.com/en-us/library/bb514094.aspx)中：

```
unsigned char _InterlockedCompareExchange128(
   __int64 volatile * Destination,
   __int64 ExchangeHigh,
   __int64 ExchangeLow,
   __int64 * ComparandResult
); 
```

> [in, out] ComparandResult
> 指向两个 64 位整数数组（被视为 128 位字段）的指针，用于与目标进行比较。**在输出时，这将被目标的原始值覆盖**。

因此，发生的事情是在伪代码中：

```
if(ComparandResult != Destination)
{
    temp = Destination
    Destination = ExchangeHigh:ExchangeLow
    ComparandResult = temp
} 
```

当`Destination == ComparandResult`（您的情况）是：

```
if(ComparandResult != Destination)
{
    temp = Destination
    Destination = ExchangeHigh:ExchangeLow
    Destination = temp
} 
```

这是一个nop。
此外，在同一页面中还有一个注释：

> 注意
> ComparandResult 的值总是被覆盖。在锁定指令之后，此内在函数立即将 Destination 的初始值复制到 ComparandResult。因此，ComparandResult 和 Destination 应该指向不同的内存位置以避免意外行为。

# asp.net - 如何在 ASP.Net 超链接中居中文本？

> ID：11547291
> 
> 赞同：0
> 
> 时间：2012-07-18T17:45:40.033
> 
> 标签：asp.net

我有`Hyperlink`一个设置高度的 ASP.Net。文本呈现在它的左上角。我如何垂直居中它（-文本）？

（在 C# 中我有：`label1.TextAlign = ContentAlignment.MiddleCenter;`。它是如何在 ASP.Net 中完成的？）

尝试了以下但它不起作用（无论是在 FF 还是在 IE 上）。

```
<form id="form1" runat="server">
<div>
<asp:HyperLink NavigateUrl="~/WebForm1.aspx" runat="server" CssClass="MyClass" BackColor="White" 
Height="100px" Text="MyText"  Width="200px" ></asp:HyperLink>
</div>
</form> 
```

和：

```
.MyClass
{
    display: table-cell;
    text-align: center;
    vertical-align: middle;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:03:18.803

将以下样式添加到您的`HyperLink`:

```
display:table-cell;
text-align:center;
vertical-align:middle; 
```

如果您要重用该样式，最好定义一个类：

```
<asp:HyperLink ... class="myClass" >HyperLink</asp:HyperLink> 
```

然后在您的样式表中：

```
.myClass{
    display:table-cell;
    text-align:center;
    vertical-align:middle;
} 
```

或者添加内联样式：

```
<asp:HyperLink ... style="display:table-cell;text-align:center;vertical-align:middle;" >HyperLink</asp:HyperLink> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-15T07:31:15.660

向 CssClass 或内联样式添加以下属性：

```
{
 display: table-cell;
 vertical-align: middle;

 line-height: 32px;
} 
```

请注意，将“32px”替换为您的超链接高度。

# facebook-fql - 错误：page_fans_city 查询导致 500 内部服务器错误

> ID：11547294
> 
> 赞同：1
> 
> 时间：2012-07-18T17:45:45.620
> 
> 标签：facebook-fql, facebook-insights

有些人似乎有我看到的相同错误；如果我使用 FQL 查询以获取洞察指标 page_fans_city，我会收到 500 Internet Server Error 响应。对 page_fans_country 或其他指标的相同查询可以正常工作。

如何记录一个新的错误？找不到任何可以告诉我的方法...

FQL：从其中 object_id=######### AND metric='page_fans_city' AND end_time=end_time_date('2012-07-15') AND period=period('lifetime') 的见解中选择指标、值

谁能确认这是一个错误……并记录错误？

# javascript - 在表格中添加新行

> ID：11547296
> 
> 赞同：31
> 
> 时间：2012-07-18T17:45:57.617
> 
> 标签：javascript, jquery, html-table

> **可能重复：**
> [在 jQuery 中添加表格行](https://stackoverflow.com/questions/171027/add-table-row-in-jquery)

我想在更改事件中向我的表中添加一个新行。这是我到目前为止所拥有的：

```
$('#CourseID').change(function() {
    $('#CourseListTable > tr > td:last').append('<td>...</td>');
}); 
```

这是我的桌子：

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<dynamic>" %>    
<table id="CourseListTable">
    <tr>
        <th>Course ID</th>
        <th>Course Section</th>
        <th>Level</th>            
    </tr>
    <tr>
        <td><select name="CourseID" id="CourseID"></select></td>
        <td><select name="CourseSection" id="CourseSection"></select></td>
        <td><select name="Level" id="Level"></select></td>            
    </tr>
</table> 
```

我无法让它工作。我在这里遗漏了一些东西，谁能告诉我我的错误在哪里？

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-18T17:51:06.127

您提到附加行，但在您的代码中，您只附加了单元格。

如果您需要实际附加一整行，请尝试以下操作：

```
$('#CourseID').change(function() {
    $('<tr/>').append('<td>...</td>').insertAfter('#CourseListTable tr:last');
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-18T17:47:15.087

这一行：

```
$('#CourseListTable > tr > td:last').append('<td>...</td>'); 
```

将 TD ( ) 附加`<td>...</td>`到现有的 TD ( `td:last`) 上；您想将其附加到 TR，例如。

```
$('#CourseListTable > tr').append('<td>...</td>'); 
```

当然，您提到要添加一个新的*row*，在这种情况下，您根本不应该附加 a ，而`<td>`应该附加 a `<tr>`（显然，您应该将其附加到表中）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-18T17:48:58.623

```
$('#CourseID').change(function() {
    $('#CourseListTable > tbody > tr:eq(1)').append('<td>...</td>');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T17:51:27.127

如果要添加新行，则必须添加`tr`

```
$('#CourseListTable tr:last').after('<tr><td>...</td><td>...</td><td>...</td></tr>'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T17:52:51.120

您应该`after`改用，`append`将元素附加到`tr`.

```
$('#CourseID').change(function() {
    $('#CourseListTable tr:last').after('<tr><td>test</td><td>test</td><td>test</td></tr>');
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-18T18:03:31.320

按照这个：

[自定义 JQuery 克隆行属性](https://stackoverflow.com/questions/6835342/customizing-jquery-cloned-row-attributes)

它可以让您克隆、附加然后自定义每个单元格.. 非常灵活。

# iphone - 在 iOS 5 中制作没有功能的 Web 浏览器

> ID：11547303
> 
> 赞同：0
> 
> 时间：2012-07-18T17:46:05.517
> 
> 标签：iphone, ios, web

我对 iOS 网络编程很陌生，所以我需要帮助。

我想制作一个应用程序，在选项卡栏控制器的 1 个选项卡上显示带有商店的地图（我实际上是用 MapKit 制作的）。在 2-4，我想提供一些信息（销售、新闻、新品等）。我想我可以制作 3 个没有任何功能的网络浏览器，例如：搜索、网址、后退和前进按钮。我将加载准备好的 URL 并在不下载的情况下显示信息。

我的问题是：你能用这种方式制作一个网络浏览器吗？如果是这样，请告诉我如何或提供链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T18:42:09.820

[UIWebView](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html)是您正在寻找的。您可以使用 webViews 创建 viewControllers 并将它们添加到 tabBarController 以获得您想要的。

# sql - 将 SSIS 包配置应用于多个包

> ID：11547304
> 
> 赞同：2
> 
> 时间：2012-07-18T17:46:07.937
> 
> 标签：sql, sql-server-2008, ssis

我有大约 85 个使用相同连接管理器的 SSIS 包。我知道每个包都有自己的连接管理器。我正在尝试根据包所在的服务器来决定简单地设置连接管理器的连接字符串的最佳配置方法。我已经在网上访问了各种建议，但在任何地方都找不到我可以简单地将配置从一个包复制到其余包的做法。显然有很多方法，例如 XML 文件、SQL Server、环境变量等。

那里的所有文章都指向通过使用 XML 或 SQL 方法来使用间接方法。为什么只使用环境变量来保存连接字符串是一种糟糕的方法？

任何建议都受到高度赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T19:19:34.837

## 为什么只使用环境变量来保存连接字符串是一种糟糕的方法？

我发现环境变量或注册表项配置方法受到严重限制，因为它一次只能配置一项。对于连接字符串，您需要为给定服务器上的每个目录定义一个环境变量。也许它只有 2 或 3 个，这是可以管理的。我们每个数据库实例有 30 多个实例，并且我们有多实例机器，因此您可以看到这个问题有多快演变成维护噩梦。与可以为给定配置键保存多个配置项的基于表或 xml 的方法进行对比。

## ...最佳配置方法，可以根据包所在的服务器简单地设置连接管理器的连接字符串。

如果你走这条路，我建议创建一个变量 ConnectionString 并使用它来配置属性。这是一个额外的步骤，但我再次发现调试变量上的复杂表达式与属性上的复杂表达式相比更容易。使用变量，您始终可以在包上弹出断点并查看本地窗口以查看当前值。

创建一个名为 ConnectionString 的变量后，我右键单击它，选择 Properties 并将 EvaluateAsExpression 设置为 True 并将 Expression 属性设置为类似`"Data Source="+ @[System::MachineName] +"\\DEV2012;Initial Catalog=FOO;Provider=SQLNCLI11.1;Integrated Security=SSPI;"`

评估时，它将填写当前机器的名称 (DEVSQLA)，并且我将拥有一个连接到命名实例 DEV2012 的有效 OLE DB 连接字符串。

```
Data Source=DEVSQLA\DEV2012;Initial Catalog=FOO;Provider=SQLNCLI11.1;Integrated Security=SSPI; 
```

如果您有比一个变量更复杂的配置需求，那么我可以看到您使用它来配置一个连接管理器到一个包含所有配置键和值的完整存储库的 sql 表。

## ...在任何地方都找不到我可以简单地将配置从一个包复制到其余包的做法

我将通过编程路线修改所有 80something 包。我们从第三方收到了一批包裹，但他们没有遵循我们的配置和日志记录程序。代码并不难，如果您准确描述为解决您的需求所做的更改类型，我很乐意将一些代码扔到这个答案上。它可以像下面这样简单。调用该函数后，它将通过将 SSISDB ole 连接管理器上的 sql server 配置添加到名为 dbo.sysdtsconfig 的表中，以用于名为 Default.2008.Sales 的过滤器来修改包。

```
string currentPackage = @"C:\Src\Package1.dtsx"

public static void CleanUpPackages(string currentPackage)
{
    p = new Package();
    p.app.LoadPackage(currentPackage, null);
    Configuration c = null;

    // Apply configuration Default.2008.Sales
    // ConfigurationString => "SSISDB";"[dbo].[sysdtsconfig]";"Default.2008.Sales"
    // Name => MyConfiguration
    c = p.Configurations.Add();
    c.Name = "SalesConfiguration";
    c.ConfigurationType = DTSConfigurationType.SqlServer;
    c.ConfigurationString = @"""SSISDB"";""[dbo].[sysdtsconfig]"";""Default.2008.Sales""";

    app.SaveToXml(sourcePackage, p, null);
} 
```

在包中添加变量不会占用更多代码。在清理过程中，添加这样的代码以将新变量添加到具有上述表达式的包中。

```
string variableName = string.Empty;
bool readOnly = false;
string nameSpace = "User";
string variableValue = string.Empty;
string literalExpression = string.Empty;

variableName = "ConnectionString";
literalExpression = @"""Data Source=""+ @[System::MachineName] +""\\DEV2012;Initial Catalog=FOO;Provider=SQLNCLI11.1;Integrated Security=SSPI;""";

p.Variables.Add(variableName, readOnly, nameSpace, variableValue);
p.Variables[variableName].EvaluateAsExpression = true;
p.Variables[variableName].Expression = literalExpression; 
```

让我知道我是否遗漏了任何内容，或者您​​想澄清任何问题。

# c++ - Qt/C++ 将指针指向另一个构造函数

> ID：11547305
> 
> 赞同：0
> 
> 时间：2012-07-18T17:46:15.257
> 
> 标签：c++, qt

所以我希望有人能在以下方面再次帮助我。我想在另一个类中使用一个类的指针。

***汽车.h***

```
class wheel;

class car : public QMainWindow
{
public:
    car (QWidget *parent = 0);

    wheel *test;
};

class wheel : QGraphicsPixmapItem
{
public:
    wheel();

    void hoverEnterEvent (QGraphicsSceneHoverEvent*);
}; 
```

***汽车.cpp***

```
#include "car.h"

wheel::wheel()
{

}

car::car (QWidget*)
{
    test = new wheel;
    test -> setAcceptHoverEvents (true);
}

wheel::hoverEnterEvent (QGraphicsSceneHoverEvent*)
{
    test -> setPixmap (/*thePixmap*/);
} 
```

问题是，我不能在类轮中使用指针“测试”，而且我真的不知道如何在“不”使指针“测试”全局的情况下做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T17:49:47.910

`wheel::hoverEnterEvent`是轮组的一部分。它不需要指向自身的指针来对自身进行操作，所以只需替换

```
test -> setPixmap (/*thePixmap*/); 
```

和

```
setPixmap (/*thePixmap*/); 
```

# entity-framework-4 - sql azure 批量大小

> ID：11547313
> 
> 赞同：0
> 
> 时间：2012-07-18T17:46:38.300
> 
> 标签：entity-framework-4, azure-sql-database, sqlbulkcopy, azure-worker-roles

有一些员工细分任务会导致需要插入 SQL Azure 的大量记录（大约 2000 条）。记录本身非常小，大约 4 个整数。Azure 辅助角色执行分段任务并将结果行插入到 SQL Azure 表中。队列中可能有多个这样的任务（每个大约有 1000 - 2000 行），因此每个插入都需要非常快地执行。

使用本地计算机对 SQL Azure 进行计时测试花费了大量时间（1000 次插入大约需要 2 分钟）。这可能是由于网络延迟引起的。我假设工人角色的插入应该更快。

但是，由于实体框架不能很好地批量插入，我们正在考虑使用 SQLBulkCopy。如果批量大小为 1000，使用 SQLBulkcopy 会导致查询受到限制吗？有什么推荐的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T17:54:46.310

Bulk Copy API 应该完美地满足您的目的，并带来非常显着的性能改进。

我已经测试了将批量大小为 2000 的 1000 万条记录插入到 Azure 数据库中，并且从我的本地计算机运行时，没有发生任何限制，每批次的性能约为 10 秒。

# java - 在 Web 应用程序中使用不同的线程进行处理

> ID：11547314
> 
> 赞同：1
> 
> 时间：2012-07-18T17:46:39.250
> 
> 标签：java, multithreading, thread-safety

我有一个 Java EE Web 应用程序。现在，当一个特定的请求到来时（比如 /xyz url 模式），我想做如下复杂的处理

以下 3 个步骤中的每一个都非常复杂且需要时间。

1.  从 DB 中获取一张表的数据。表数据量大，查询需要时间。
2.  对其他一些网络服务 A 进行网络服务调用并获取其数据。
3.  对其他一些网络服务 B 进行另一个网络服务调用并获取其数据。
4.  使用 1, 2, 3 的输出做一些处理

1、2、3相互独立，可以并行调用。

现在的问题是：

1.  我可以在三个单独的线程中执行操作 1、2 和 3 吗？
2.  是否建议为每个请求创建 3 个线程？
3.  我应该使用线程池吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:14:38.570

为了解决您的**第一个问题**，我经历了 4 个步骤：

1.  是的，如果您使用的数据库驱动程序允许并发访问，则分别可以安全地从不同线程使用。
2.  Web 服务通常设计为同时处理不同的请求，因此这应该也可以，这里的问题是您要使用多少线程（以及处理一个请求需要多长时间）以及 Web 服务是否会一次保护自己免受太多请求。
3.  这里同样适用。
4.  是的，但是您必须在此处进行同步，例如：等到所有线程都收到它们的结果。[您可以使用java.util.concurrent.CyclicBarrier](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/CyclicBarrier.html)来实现这一点

**第二个问题** 这取决于您的数据，尤其是网络服务的响应速度，您应该尝试一下。

**第三个问题**明确地说，这就是他们的目的。这也将帮助您构建应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T18:15:18.413

1）我可以在三个单独的线程中执行操作 1 ,2 和 3 吗？是的你可以。

2) 是否建议为每个请求创建 3 个线程？只要这些东西不相互依赖，并且只要你不依赖于在同一个事务中获得这些东西，那么看起来应该没问题。当然，您将不得不处理一个或多个线程不成功的情况。如果线程花费的时间太长或返回失败，您将需要一个单独的看门狗线程来取消线程。

3）我应该使用线程池吗？不管你做什么，每当你使用线程时，你都应该使用一个池。这样，如果出现线程未完成或进入某种不良状态或以其他方式变得不可用的问题，您可以保护您的应用程序不会耗尽线程。

# database - 在控制器 cakephp 中加载数据库表

> ID：11547316
> 
> 赞同：-1
> 
> 时间：2012-07-18T17:46:47.287
> 
> 标签：database, cakephp, model, controller

我为我的预设数据库表制作了一个模型。现在在我的控制器的操作中，我有：

```
$this->loadModel('Preset');
$preset = $this->Preset->find(); 
```

表中的每个预设行都有多个字段，我希望`$preset`变量具有一行中的所有信息。我将如何按名称搜索行，然后从中获取所有其他字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T19:29:13.667

假设您的模型有效：

```
$preset = $this->Preset->findAllByName('foo'); 
```

您想要完成的工作非常简单，并且在[CakePHP 的文档](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#findallby)中得到了很好的介绍。

# linux - Shell 编程 - 如何让 printf 像表格一样对齐我的输出？

> ID：11547318
> 
> 赞同：4
> 
> 时间：2012-07-18T17:46:47.467
> 
> 标签：linux, shell, sh

如何 printf 像表格一样对齐我的输出？

```
Title                                             Author
BaokyBook                                              Baoky2
Use basename commandUse basename command ..             Baoky 
```

我的部分代码是这样的

```
titlelength=${#title}; 
```

首先我得到标题长度，然后我像这样 printf

```
titlespace=`expr 60 - titlelength`;
printf "%s %${titlespace}s\n" "$title" "$author" 
```

但是对齐不正确，我如何让它很好地对齐

回复以下答案：

进行更改后

我所有的左边都向右对齐。它似乎不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T17:48:15.687

最简单的方法是以固定宽度打印标题：

```
printf "%30s %s\n" "$title" "$author" 
```

如果要确定最大宽度，则需要在进行任何输出之前读取所有数据。或者您可以简单地将输出通过管道传输到`column -t`. 或者，将标题截断为所选宽度（这种截断字符串的技术是一种 bashism）：

```
 printf "%30s %s\n" "${title:0:30}" "$author" 
```

# c++ - 需要对条件变量寻求的互斥保护（原子）赋值吗？

> ID：11547320
> 
> 赞同：0
> 
> 时间：2012-07-18T17:46:49.237
> 
> 标签：c++, multithreading, boost-thread

我了解如何使用条件变量（这个构造的糟糕名称，IMO，因为 cv 对象既不是变量也不是表示条件）。所以我有一对线程，用 Boost.Thread[规范地](http://www.boost.org/doc/libs/1_49_0/doc/html/thread/synchronization.html#thread.synchronization.condvar_ref)设置为：

```
bool awake = false;
boost::mutex sync;
boost::condition_variable cv;
void thread1()
{
    boost::unique_lock<boost::mutex> lock1(sync);
    while (!awake)
        cv.wait(lock1);
    lock1.unlock();    // this line actually not canonical, but why not?
    // proceed...
}
void thread2()
{
    //...
    boost::unique_lock<boost::mutex> lock2;
    awake = true;
    lock2.unlock();
    cv.notify_all();
} 
```

我的问题是：thread2 真的需要保护对 的分配`awake`吗？在我看来，这个`notify_all()`电话应该就足够了。如果被操作和检查的数据不仅仅是一个简单的“可以继续”标志，我会看到互斥锁中的值，但在这里看起来有点过头了。

第二个问题是代码片段中提出的问题：为什么 Boost 文档没有显示线程 1 中的锁在“处理数据”步骤之前被解锁？

编辑：也许我的问题真的是：有没有比简历更干净的结构来实现这种等待？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:04:43.090

> thread2 真的需要保护分配唤醒吗？

是的。从一个线程修改对象并在不同步的情况下从另一个线程访问它会产生未定义的行为。哪怕只是一个`bool`。

例如，在某些多处理器系统上，写入可能只影响本地内存；如果没有显式的同步操作，其他线程可能永远不会看到更改。

> 为什么 Boost 文档没有显示 thread1 中的锁在“处理数据”步骤之前被解锁？

如果您在清除标志之前解锁了互斥锁，那么您可能会错过另一个信号。

> 是否有比 CV 更简洁的结构来实现这种等待？

在 Boost 和标准 C++ 库中，没有；条件变量足够灵活，可以处理任意共享状态，并且对于这种简单的情况不会特别复杂，因此不需要任何更简单的东西。

更一般地说，您可以使用信号量或管道在线程之间发送简单的信号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T18:15:17.623

形式上，你肯定需要两个线程中的锁：如果任何线程修改了一个对象，并且有多个线程访问它，那么*所有* 访问都必须同步。

在实践中，您可能会在没有锁的情况下侥幸逃脱；几乎可以肯定，`notify_all`它将发出必要的栅栏或 membar 指令，以确保内存正确同步。但是为什么要冒险呢？

As to the absense of the `unlock`, that's the whole point of the scoped locking pattern: the `unlock` is in the destructor of the object, so that the mutex will be unlocked even if an exception passes through.

# asp.net-mvc - 具有多个全局 asax 文件的 StructureMap

> ID：11547321
> 
> 赞同：0
> 
> 时间：2012-07-18T17:46:49.283
> 
> 标签：asp.net-mvc, inversion-of-control, structuremap

我正在开发一个包含多个 MVC 项目的项目。我想使用 StructureMap，但我不确定如何（或者是否可能）定义一个 IOC 容器，该容器可以被两个 global.asax 文件（每个项目一个）重用。我不想为每个定义两个 IoC 容器。这可以通过其他方式完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T19:01:49.717

假设您的问题是相同的配置，您可以将您的注册放在一个公共注册表中：

```
public class CommonRegistry : Registry
{
    public CommonRegistry()
    {
        // configuration here
    }
} 
```

然后在每个应用程序中初始化它：

```
ObjectFactory.Initialize(x =>
{
    x.AddRegistry<CommonRegistry>();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T17:48:21.997

> （或者如果可能的话）

不，那是不可能的。DI 容器将对象存储在内存中。内存是每个 AppDomain 的。AppDomain 是每个应用程序。应用程序是每个 Global.asax。所以 2 Global.asax => 2 ASP.NET 应用程序 => 2 AppDomains => 2 个不同且不相关的内存区域。您当然可以将 DI 容器配置放在一个类库中，供两个 ASP.NET 应用程序重用。

# java - Android 将字节数组转换为位图的最佳方法？

> ID：11547327
> 
> 赞同：11
> 
> 时间：2012-07-18T17:47:03.353
> 
> 标签：java, android, byte

我知道为什么会发生 OutOfMemoryError 异常。但是有任何最好的方法可以将字节数组转换为位图。我使用了下面的代码，但是当大字节时它会强制关闭应用程序并给出 OutOfMemoryError 异常。

我有 API，它只返回字节数组。

```
Bitmap bmp = BitmapFactory.decodeByteArray(bytearray, 0, bytearray.length); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-04-15T12:16:49.480

```
Bitmap bitmap = BitmapFactory.decodeByteArray(bitmapbytes , 0, bitmapbytes .length); 
```

返回 解码的位图，如果图像无法解码，则返回 null。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T08:22:27.567

这对我有用：顺便说一下，照片是一串图像。

```
byte[] imgbytes = Base64.decode(photo, Base64.DEFAULT);
Bitmap bitmap = BitmapFactory.decodeByteArray(imgbytes, 0,
imgbytes.length);
imageupload.setImageBitmap(bitmap); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T11:06:26.470

您可能必须使用以下方法（[DOC](http://developer.android.com/reference/android/graphics/BitmapFactory.html#decodeByteArray%28byte%5B%5D,%20int,%20int,%20android.graphics.BitmapFactory.Options%29)，相同的方法，但使用 options 参数）：

```
public static Bitmap decodeByteArray (byte[] data, int offset, int length, BitmapFactory.Options opts) 
```

并使用[options](http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html)参数。希望这会帮助你=）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T08:16:14.657

您可能希望使用 AQuery 库来加载图像，这将帮助您调整大小、查看等并避免最常见的内存泄漏。这个工具可以在这里找到：[http ://code.google.com/p/android-query/](http://code.google.com/p/android-query/)

# mysql - 是否可以构造一个查询来匹配两个表，并在它们之间强制执行 1:1 关系？

> ID：11547341
> 
> 赞同：1
> 
> 时间：2012-07-18T17:47:43.840
> 
> 标签：mysql, sql

对于那些对这个问题背后的推理感兴趣的人：我有一个运行良好的电子商务网站，但没有礼券功能。添加货币 GC 应该非常简单，但我也希望允许赠送特定产品（听起来很奇怪，但与我的行业相关）。因此，我计划创建一个新表来存放与特定用户和产品相关联的礼券，并且我需要一种有效的方法来评估购物车和结帐页面上的该表。

想象一下存在类似于以下内容的表：

```
CartContents
CartID          Integer (Unique sequential row identifier)
UserID          Integer
ProductID       Integer
Quantity        Integer

Gifts
GiftID          Integer (Unique sequential row identifier)  
ProductID       Integer
UserID          Integer
Quantity        Integer 
```

这是一个过于简化的布局，但展示了这个想法。第一个表格列出了用户购物车中的物品；每个产品一条记录（尽管实际产品会有可能会有所不同的其他详细信息）。产品表还有更多关于产品的属性，但为了简单起见，我没有在这里列出。第二个表是一组礼券，每个礼券用于特定产品，已提供给该用户 ID。

表数据可能如下所示：

```
CartContents
CartID          UserID      ProductID       Quantity
1               1           1               1
2               1           2               2
3               1           1               2
4               2           3               1

Gifts
ProductID       UserID      Quantity
1               1           1
2               1           1
3               3           1 
```

考虑到每个礼物只能链接到每个购物车项目一次，是否可以构建一个查询，为每个购物车项目提供一行并链接上述两个表？或者这需要在脚本中处理吗？

换句话说，因为用户 1 在他们的购物车中有两次产品 1，并且他们只被承诺过一件免费产品 1，所以查询应该返回与 cartID 1 匹配的 Gifts 记录，而不是 cartID 3。查询，拉取用户 ID 1、会返回：

```
CartID      ProductID       Quantity        unpaidQuantity
1           1               1               0
2           2               2               1
3           1               2               2 
```

或者

```
CartID      ProductID       Quantity        unpaidQuantity
1           1               1               1
2           2               2               1
3           1               2               1 
```

我意识到这个问题有不止一个“正确”答案这一事实引发了一个危险信号。实际上，每个 GC 应用于哪个购物车记录并不重要，因为最终结果（价格）将是相同的。我很高兴地说“第一个”（最低购物车 ID）是应该链接的。

我的假设是，数据库在这方面的效率将比我编写的任何脚本都要高得多；我什至愿意打赌有一些我从未听说过专门为它设计的疯狂类型的加入。我还假设任何这样的 ColdFusion 脚本可能有些复杂，因此需要相当多的开发和测试时间，而单个查询可能相对简单（尽管显然超出了我有限的 SQL 能力）。如果我在这方面不正确，我也将不胜感激。

我的设置，如果重要的话：

*   MySQL 5.0

*   冷融合 9

*   视窗 2000 作为

**编辑：** 听起来数量列真的会引起问题，所以让我们继续假设礼品表上不存在数量。但是，它仍然必须存在于 cartContents 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:15:46.267

我想到了另一种方法，只需要额外的 group by 和 join。但是，它需要 CartContents 上的唯一 ID。我不确定这是 CartId 应该是什么。但是，似乎一个用户可以拥有多个购物车，所以我认为不会。

这个想法是识别每个购物车中给定产品的第一条记录。然后，在加入礼物时使用此信息。

```
select CartID, UserID, ProductID, Quantity, FirstCCId  
from CartContents cc join
     (select CartID, UserID, ProductID, min(CartContentsId) as FirstCCId
      from CartContents cc
      group by CartID, UserID, ProductID
     ) ccmin
     on cc.CartId = ccmin.CartId and cc.UserId = ccmin.UserId and
        cc.ProductId = ccmin.ProductId left outer join
     Gifts g
     on cc.ProductID= g.ProductId and cc.UserID = g.userId and
        cc.CartContentsId = ccmin.FirstCCId 
```

当礼品仅应用于一个产品线行时，此方法有效。如果礼物的数量实际上大于任何给定行上的数量，则此查询仍然只将其放在一行上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T18:35:26.363

这行得通吗？

```
select c.cartid, c.productid, c.quantity, c.quantity -
         case 
           when (select sum(c2.quantity) from CartContents c2 
                 where c.userid = c2.userid 
                   and c.productid = c2.productid 
                   and c.cartid < c2.cartid) < 
                 (select g.quantity from gifts g 
                  where c.userid = g.userid 
                    and c.productid = g.productid) then
             (select g.quantity from gifts g 
              where c.userid = g.userid 
                and c.productid = g.productid) - 
             (select sum(c2.quantity) from CartContents c2 
              where c.userid = c2.userid 
                and c.productid = c2.productid 
                and c.cartid < c2.cartid) 
           else 0 
         end UnpaidQuantity
from CartContents c
where userid = 1 
```

# iphone - 单元格 detailTextLable 未正确显示数字

> ID：11547344
> 
> 赞同：0
> 
> 时间：2012-07-18T17:48:00.497
> 
> 标签：iphone, uitableview, nsdate, nsdateformatter, ios6

当我尝试将 UITableView 单元格中的日期显示为 detailTextLable 时，我得到了由额外空格分隔的数字，如附图中所示，尽管当我尝试 NSLog 它显示正确例如（2012 年 7 月 19 日）显示（7 月 1 日 9 , 2 0 1 2) 或 (2 0 1 2 - 0 7 - 1 9) 如果使用所附的“yyyy-MM-dd”格式。（图片下方的代码）

![在此处输入图像描述](../Images/c926816f69c4b65baa0355bd238bb28f.png)

这是我的代码：

```
//Format the date
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
//[dateFormat setDateFormat:@"yyyy-MM-dd"];

[dateFormat setDateStyle:NSDateFormatterMediumStyle];
/*NSLocale *usLocale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_US"];
[dateFormat setLocale:usLocale];*/

NSString *theDate = [dateFormat stringFromDate:[occasion date]];

//test
NSLog(@"The formatted date is:%@",theDate);

NSString *detailText = [NSString stringWithFormat:
                        @"%@",

                        theDate];
//test
NSLog(@"The detailed text is:%@", detailText);

[[cell detailTextLabel] setText:detailText]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T07:53:31.433

您的代码看起来不错，这可能是字体问题，您是否更改了 detailTextLabel 字体？（看起来你做了，这不是默认字体......）

# javascript - “粘性”滚动位置

> ID：11547346
> 
> 赞同：4
> 
> 时间：2012-07-18T17:48:01.530
> 
> 标签：javascript, jquery, html, scroll

有没有办法根据滚动位置来构建内容；每当用户滚动经过某个标记点时，页面就会被推送（锁定）到某个位置（幻灯片），引导用户查看该幻灯片上的内容（该页面基于[https://github.com/richardshepherd/Parallax -滚动/](https://github.com/richardshepherd/Parallax-Scrolling/)）。会有多个标记点，因此引导用户查看幻灯片上的内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T18:06:32.787

是的。有一个漂亮的小 jquery 插件可以处理这个问题：[https ://github.com/bigspotteddog/ScrollToFixed](https://github.com/bigspotteddog/ScrollToFixed)

或者您可以参考之前处理相同主题的这篇文章：[在某个点停止固定位置滚动？](https://stackoverflow.com/questions/5902822/stopping-fixed-position-scrolling-at-a-certain-point)

# c# - 在 .NET 4 中异步运行方法的简单方法？

> ID：11547353
> 
> 赞同：0
> 
> 时间：2012-07-18T17:48:29.487
> 
> 标签：c#, .net-4.0, asynchronous

这是一个简单的 .NET 4 应用程序。这是我要运行的代码：

```
string username = "userfoo";
string password = "passwordfoo";

for (int i = 0; i < 2000; i++)
{    
    uint matchId;
    if (!uint.TryParse(i.ToString(), out matchId))
    {
        Console.WriteLine("Invalid Match ID!");
        return;
    }

    Client client = new Client (username, password, matchId);

    // connect
    client.Connect();

    client.Wait();

    if (client.Match != null)
    {
        Console.WriteLine("Inserting match: #{0}", client.Match.match_id);
        Helpers.MatchHelper.AddMatchToDatabase(client.Match);
    }
    else
    {
        Console.WriteLine("Couldn't get match: #{0}", 1);
    } 
```

}

而是一个接一个地执行此操作（根据我的计算，这将永远需要 415 天不间断），异步调用此 for 循环的每次迭代的最简单方法是什么？

大多数问题和文章都很古老（大约在 2001 年！）肯定有更现代的方法吗？

[http://msdn.microsoft.com/en-us/magazine/cc301332.aspx](http://msdn.microsoft.com/en-us/magazine/cc301332.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T17:53:00.157

您可以在此处找到信息：http: [//msdn.microsoft.com/en-us/library/ff963552.aspx](http://msdn.microsoft.com/en-us/library/ff963552.aspx)。基本上，您只需使用`Parallel.For(0, n, x => doSomething)`. 这需要处理并行化。这是 PLINQ 的一个功能，它非常易于使用，在我的经验中效果很好。

您的示例将如下所示：

```
string username = "userfoo";
string password = "passwordfoo";

Parallel.For(0, 2000, i =>
{    
    uint matchId;
    if (!uint.TryParse(i.ToString(), out matchId))
    {
        Console.WriteLine("Invalid Match ID!");
        return;
    }

    Client client = new Client (username, password, matchId);

    // connect
    client.Connect();

    client.Wait();

    if (client.Match != null)
    {
        Console.WriteLine("Inserting match: #{0}", client.Match.match_id);
        Helpers.MatchHelper.AddMatchToDatabase(client.Match);
    }
    else
    {
        Console.WriteLine("Couldn't get match: #{0}", 1);
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T17:52:19.290

我认为这就是您要寻找的：http: [//www.codeproject.com/Articles/71285/Introducing-NET-4-0-Parallel-Programming](http://www.codeproject.com/Articles/71285/Introducing-NET-4-0-Parallel-Programming)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T17:52:21.110

你应该看看[任务并行库](http://msdn.microsoft.com/en-us/library/dd537609)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T18:10:05.163

如果我理解正确，您想在单独的线程中运行这些。这是执行此操作的一种方法：您需要将代码从循环移动到 void 函数中：

```
void MyThreadInsteadOfLoop(object parameter)
{
int i  = (int)parameter;
uint matchId;
if (!uint.TryParse(i.ToString(), out matchId))
{
    Console.WriteLine("Invalid Match ID!");
    return;
}

Client client = new Client (username, password, matchId);

// connect
client.Connect();

client.Wait();

if (client.Match != null)
{
    Console.WriteLine("Inserting match: #{0}", client.Match.match_id);
    Helpers.MatchHelper.AddMatchToDatabase(client.Match);
}
else
{
    Console.WriteLine("Couldn't get match: #{0}", 1);
}
} 
```

在您的主线程中，如果您愿意，您需要准备线程以运行、启动它们并等待它们完成。这是代码：

```
//Create threads
List<Thread> threads = new List<Thread>();
for(int i=0;i<2000;i++)
{
    threads.Add(new Thread(new ParameterizedThreadStart(MyThreadInsteadOfLoop)));
}
//Start threads
int x = 0;
foreach(var t in threads)
{
    t.Start(x);
    x++;
}
//wait for the threads to finish
foreach(var t in threads)
{
    t.Join();
} 
```

请注意，您必须使 MatchHelper 类以及与您的线程交换数据的其他类线程安全，这往往会给您的程序增加大量开销。此外，您可能会遇到网络连接问题。一次只有 [NumberOfCpuCores]*2 个线程会主动工作（*2 因为超线程），但是由于您必须等待客户端（我真的希望这不是一段时间（真）循环隐藏），所以可能会被隐藏至少部分。

# c# - 方法仅因可选参数错误而有所不同

> ID：11547355
> 
> 赞同：0
> 
> 时间：2012-07-18T17:48:36.627
> 
> 标签：c#, vb.net

```
Function GetAuthor(entityId As Integer, authorId As Integer, Optional ByVal authorImageWidth As Integer = 250) As String

Function GetAuthor(entityId As Integer, authorId As Integer, feedId As Integer, Optional ByVal authorImageWidth As Integer = 250) As String 
```

我不知道这有什么问题。我收到此错误消息。

> 'Function GetAuthor(entityId As Integer, authorId As Integer, [authorImageWidth As Integer = 250]) As String' 和 'Function GetAuthor(entityId As Integer, authorId As Integer, feedId As Integer, [authorImageWidth As Integer = 250]) As String ' 不能互相重载，因为它们的区别仅在于可选参数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T17:51:50.137

如果您调用 GetAuthor(int, int, int) 编译器将不知道您想要这两种方法中的哪一种，因为这两种方法都适合（这就是这条消息告诉您的内容）

如果您删除第二个方法的可选部分，它将编译 `GetAuthor(int, int)`，并且`GetAuthor(int, int, int)`只能解析为您的第一个方法和`GetAuthor(int, int, int, int)`您的第二个方法，从而通过其参数使重载独一无二

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T17:59:05.277

您必须找到一种方法来区分所有这些可能的调用：

```
GetAuthor(entityId, authorId)
GetAuthor(entityId, authorId, authorImageWidth)    
GetAuthor(entityId, authorId, feedId)              
GetAuthor(entityId, authorId, feedId, authorImageWidth) 
```

第 2 行和第 3 行具有相同的签名。另一种方法是更改​​其中一个函数的名称，或者在`authorImageWidth`其他地方定义，或者将类型更改为`authorImageWidth`to`String`或以外的其他内容`Integer`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T17:59:39.810

编译器对要解析哪种方法感到困惑。

如果你打电话怎么办

```
GetAuthor(1, 1, 250) 
```

编译器应该如何决定调用哪一个？

“嗯……也许他们指的是这个人，因为没有第三个参数。”

```
Function GetAuthor(entityId As Integer, authorId As Integer, Optional ByVal authorImageWidth As Integer = 250) As String 
```

“但是等等！这家伙需要第三个参数，但第四个是可选的。”

```
Function GetAuthor(entityId As Integer, authorId As Integer, feedId As Integer, Optional ByVal authorImageWidth As Integer = 250) As String 
```

“作为编译器，我很困惑，所以我要让你知道。”

两者都是有效的，因为正如编译器已经告诉您的那样，它**......不能相互重载，因为它们仅在可选参数上有所不同。**

# html - 水平滚动条出现在所有移动浏览器中

> ID：11547356
> 
> 赞同：0
> 
> 时间：2012-07-18T17:48:38.347
> 
> 标签：html, css

我有一个非常简单的网站，它在下面创建一个水平滚动条：

**安卓：**

铬合金

火狐

歌剧迷你

*不在 Android 默认浏览器中，但该网站看起来已损坏*

**IOS：**

苹果浏览器

* * *

这真的没什么大不了的，但我将我的网站与完整的桌面网站进行比较，`http://google.com`而谷歌的网站并没有遇到与我相同的问题。

我对 CSS 和 HTML 还是很陌生，我觉得我正在打破一些我不知道的非常简单的规则，这会造成这个问题。有想法该怎么解决这个吗？

如果你想测试它。访问[http://natio.in](http://natio.in)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:17:48.350

出现水平滚动条是因为您在元素上设置了固定宽度，当在移动浏览器上查看网站时，这些元素的宽度设置为比视口宽度更宽。如果您使用百分比作为宽度，您的网页将能够相应地进行调整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T17:51:16.697

好吧，你可以`overflow-x: hidden;`在你的 body 标签的样式中包含，但是如果有超出手机宽度的内容，你将无法访问它。或者，您可以使用媒体查询创建响应式布局。

# ipad - Mediaplayer.swf jw player 3.16 无法在 iPad 中播放

> ID：11547360
> 
> 赞同：0
> 
> 时间：2012-07-18T17:48:52.690
> 
> 标签：ipad, video, jwplayer

我们在我们的网站中使用 mediaplayer.swf (jw player 3.16) 来播放视频，但是视频没有在 iPad 上播放，任何解决方案如何在现有框架下在 iPad 上播放视频。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T18:32:56.543

Apple 便携产品不支持 Flash 播放器。寻找闪光灯的替代品。

# php - MongoLab：使用 php 使用 CURL 进行 PUT 更新

> ID：11547367
> 
> 赞同：1
> 
> 时间：2012-07-18T17:49:23.443
> 
> 标签：php, mongodb, curl, mlab

我一直在尝试使用 MongoLabs api 来简化我的生活，并且在大多数情况下它一直在工作，直到我尝试使用 php 和 curl 将更新推送到数据库，无论如何都没有骰子。我的代码与此类似：

```
$data_string = json_encode('{"user.userEmail": "USER_EMAIL", "user.pass":"USER_PASS"}');
try { 
$ch = curl_init();

//need to create temp file to pass to curl to use PUT
$tempFile = fopen('php://temp/maxmemory:256000', 'w');
if (!$tempFile) {
    die('could not open temp memory data');
}
fwrite($tempFile, $data_string);
fseek($tempFile, 0); 

curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "PUT");
//curl_setopt($ch, CURLOPT_BINARYTRANSFER, true);
//curl_setopt($ch, CURLOPT_INFILE, $tempFile); // file pointer

curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, DB_API_REQUEST_TIMEOUT);                                                                    
curl_setopt($ch, CURLOPT_POSTFIELDS, $data_string);                                                     
curl_setopt($ch, CURLOPT_HTTPHEADER, array(                                                                          
    'Content-Type: application/json',                                                                       
    'Content-Length: ' . strlen($data_string),
    )                                                                              
);   

$cache = curl_exec($ch);
curl_close($ch);
} catch (Exception $e) {
    return FALSE;
} 
```

我的问题似乎出在 MongoLab 的 api 上。除了实验室告诉我我传递的数据是“无效对象{“user.firstName”：“Pablo”，“user.newsletter”：“true”}：存储在db 不能有 . 在他们中。'。我曾尝试传递一个文件并使用后域，但都没有奏效。

当我在 Firefox 的海报插件上对其进行测试时，该值工作正常。如果有人对 MongoLabs 的东西有更好的理解，我会喜欢一些启发。提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T18:11:27.763

您需要从字段名称中删除点。您可以尝试使用这样的模式：

```
{ "user": { "userEmail": "USER_EMAIL", "pass": "USER_PASS" } } 
```

不幸的是，MongoDB 不支持在字段名称中使用点。这是因为它的查询语言使用点作为运算符来链接嵌套字段名称。如果 MongoDB 允许在字段名称中使用点，那么如果没有某种转义机制，点查询就会变得模棱两可。

如果此文件是合法的：

```
{ "bow.ties": "uncool", "bow": { "ties": "cool" } } 
```

这个查询将是模棱两可的：

```
{ "bow.ties": "cool" } 
```

不清楚文件是否匹配。您的意思是字段“bow.ties”还是嵌套在字段“bow”的值中的字段“ties”？

这是演示这些想法的 mongo shell 会话的捕获。

```
% mongo
MongoDB shell version: 2.1.1
connecting to: test
> db.stuff.save({"bow.ties":"uncool"})
Wed Jul 18 11:17:59 uncaught exception: can't have . in field names [bow.ties]
> db.stuff.save({"bow":{"ties":"cool"}})
> db.stuff.find({"bow.ties":"cool"})
{ "_id" : ObjectId("5006ff3f1348197bacb458f7"), "bow" : { "ties" : "cool" } } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T13:29:21.423

在使用了该项目的其他一些功能后，我意识到了我的错误，并最终导致了混乱。

curl PUT 旨在将修饰符操作发送到 MongoDB。我将所有数据作为 JSON 发送，并中断解码以在 PHP 中使用，然后重新编码其中的一部分以发送回。所以收到的原始数据看起来像这样：

```
{"userEmail":"p@g.com","pass":"****", "$oid":"5555", "$set":{"user.firstName":"Pablo","user.newsletter":"true"}} 
```

问题是我正在获取“$set”对象的值（在 php 中）并仅重新编码该值，`{"user.firstName":"Pablo","user.newsletter":"true"}`没有操作员`"$set"`并且正在发送它给出错误。在这种情况下，要发送的正确字符串应该是`{"$set":{"user.firstName":"Pablo","user.newsletter":"true"}}`

虽然这是一个简单的错误，但我希望下次有人做这样的事情并得到一个无效的对象错误时，他们很幸运能够找到这个错误。

# editor - sublime - 如何在关闭时自动保存文件

> ID：11547382
> 
> 赞同：1
> 
> 时间：2012-07-18T17:50:15.997
> 
> 标签：editor, text-editor, sublimetext2

如何配置 Sublime 2 以自动保存我关闭的文件？它的行为应该像，用户打开文件，进行编辑，关闭文件，并且即使用户没有手动保存编辑的文件，编辑也会自动保存。

这很接近，但我希望它保存文件关闭而不是失去焦点。

[https://docs.sublimetext.io/reference/settings.html](https://docs.sublimetext.io/reference/settings.html)
save_on_focus_lost

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T10:43:39.860

您是否希望在仅关闭一个文件或所有打开的文件（窗口）都关闭时神奇地保存文件？在第一种情况下，我建议将每个文件打开到 SublimeText2 的不同窗口中。

在第二种情况下，您正在寻找**hot_exit**： Preferences.sublime-settings

```
// Exiting the application with hot_exit enabled will cause it to close
// immediately without prompting. Unsaved modifications and open files will
// be preserved and restored when next starting.
//
// Closing a window with an associated project will also close the window
// without prompting, preserving unsaved changes in the workspace file
// alongside the project.
"hot_exit": true, 
```

除了**remember_open_files**之外，您还可以在退出时自动保存并选择下次是否打开这些文件。

# c# - 使用 html-agility-pack 查找具有唯一类和 id 的 div

> ID：11547383
> 
> 赞同：0
> 
> 时间：2012-07-18T17:50:29.250
> 
> 标签：c#, vb.net, html-agility-pack

如何在 htmlagilitypack 中获取所有具有**class = 'round'**和**id = 'footer'**的 div？

我以为我可以在下面做，但它不起作用？

```
Dim s As HtmlNodeCollection = htmlDoc.DocumentNode.SelectNodes("//div[@class ='round' and @id='footer']") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:58:31.757

XPath 对我来说看起来不错，我会仔细检查 HTML 以确保它包含这样的元素。

# android - 当 DialogFragment 位于顶部时，方向更改时的 InstantiationException

> ID：11547386
> 
> 赞同：10
> 
> 时间：2012-07-18T17:50:37.023
> 
> 标签：android

我在班级中有一个`DialogFragment`定义为**内部**`Fragment`班级。在方向更改时，甚至会弹出以下异常：

```
 Caused by: android.app.Fragment$InstantiationException: Unable to instantiate fragment my.package.fragments.ImportFragment$FailedImportDialog: make sure class name exists, is public, and has an empty constructor that is public
        at android.app.Fragment.instantiate(Fragment.java:585)
        at android.app.FragmentState.instantiate(Fragment.java:96)
        at android.app.FragmentManagerImpl.restoreAllState(FragmentManager.java:1682)
        at android.app.Activity.onCreate(Activity.java:861)
        at my.package.activities.ImportActivity.onCreate(ImportActivity.java:8)
        at android.app.Activity.performCreate(Activity.java:4465)
        at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
        ... 12 more
        Caused by: java.lang.InstantiationException: can't instantiate class my.package.fragments.ImportFragment$FailedImportDialog; no empty constructor
        at java.lang.Class.newInstanceImpl(Native Method)
        at java.lang.Class.newInstance(Class.java:1319)
        at android.app.Fragment.instantiate(Fragment.java:574) 
```

但我确实有公共构造函数：

```
class FailedImportDialog extends DialogFragment {

        private EditText edtPassword;
        private Button button;

        public FailedImportDialog() { // Here it is!
        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
            View v = inflater.inflate(R.layout.another_password_dialog, container, false);
            edtPassword = (EditText) v.findViewById(R.id.another_password_dialog_et_password);

            getDialog().setTitle(R.string.failed_to_decrypt);

            Button button = (Button) v.findViewById(R.id.another_password_dialog_btn_ok);
            button.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {

            });

            return v;

    }
} 
```

这是xml：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
              android:orientation="vertical"
              android:padding="10dp">

    <TextView android:id="@+id/another_password_dialog_tv_text"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:text="@string/what_password_did_you_use">
    </TextView>

    <EditText android:id="@+id/another_password_dialog_et_password"
              android:layout_height="wrap_content"
              android:layout_width="match_parent"
              android:inputType="textPassword">
        <requestFocus>
        </requestFocus>
    </EditText>

    <Button android:id="@+id/another_password_dialog_btn_ok"
            android:layout_height="wrap_content"
            android:layout_width="match_parent"
            android:text="OK">
    </Button>

</LinearLayout> 
```

你们知道为什么会发生这种异常吗？谢谢！

**更新：**如果我将一个类移动到一个单独的文件中，没有这样的异常，一切都会顺利进行。所以问题是 - 为什么这个异常发生在`DialogFragment`内部类时？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T10:23:44.333

调用 setRetainInstance(true) 将导致 FragmentManager 保存您的实际 Fragment 实例。它不会销毁和重新创建 Fragment，而是将相同的片段传递给新的 Activity。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-18T18:41:07.870

尝试使内部类静态：

```
public static class FailedImportDialog extends DialogFragment 
```

我会在一段时间内发布更多关于此的解释。与此同时，试试这个，让我知道它是否有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T18:00:36.967

像这样定义你的内部类：

```
public class FailedImportDialog extends DialogFragment {
....
} 
```

用公共符号。

因为，这就是您的 LogCat 所说的：

```
Caused by: android.app.Fragment$InstantiationException: Unable to instantiate fragment
my.package.fragments.ImportFragment$FailedImportDialog: make sure class name exists 
is public, and has an empty constructor that is public 
```

# django - 如何在 django 中处理项目或应用程序的特定设置？

> ID：11547396
> 
> 赞同：0
> 
> 时间：2012-07-18T17:51:35.053
> 
> 标签：django

如何存储、检索和允许用户更改项目或应用程序的设置？settings.py 中的常量不够好，因为我希望某些用户能够更改设置的值。在管理界面中呈现这些的方法是最佳的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:08:17.267

如果是通过管理界面，那么使用数据库听起来像是一个肯定的选择。在 StackOverflow 上查看这个[类似的问题。](https://stackoverflow.com/questions/1394126/keep-settings-in-database)

# ios - ios - 一个随着滚动而变化的静态标题

> ID：11547397
> 
> 赞同：0
> 
> 时间：2012-07-18T17:51:39.753
> 
> 标签：ios, uiview, uilabel, sectionheader

我一直在寻找一吨，似乎无法找到答案......

我有一个 tableView 滚动所有月份的所有日子。而且我有一个 titleForHeaderInSection: 和 viewForHeaderInSection: 在每个月的顶部显示一个节标题，它在顶部适当地替换，很酷。但是如何创建一个标题标签在我滚动时更改为正确月份的单个标题（换句话说，没有多个部分标题，只有一个）？

我不知道这是否应该设置为“一个（大）部分的标题发生变化”或“一个标题视图发生变化”，或者其他什么......任何例子都将不胜感激。先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T18:29:39.297

您可以创建一个静态视图并将其放在您的 tableView 上方。然后您可以使用该`visibleCells`属性来确定哪些单元格是可见的。当这些单元格更改为新部分的单元格时，您可以更新`UITableView`.

一旦你是`delegate`那个`UITableView`你也是它所建立`delegate`的那个。`UIScrollView`

因此，您可以捕获`scrollViewDidScroll:`委托调用并在那里更新您的标题。

所以把它摆出来：

1.）在您的上方创建一个标题视图`UITableView`

`delegate`2\. )成为`UITableView`

3.) 实现`scrollViewDidScroll:`检测滚动的方法

4.) 在`scrollViewDidScroll`方法内部使用 的`visibleCells`属性`UITableView`来确定正在显示哪些单元格并适当地更新您的标题视图。

我从来没有做过这样的事情，但我不明白为什么它不起作用。

编辑：正如 Husker Jeff 指出的那样。`indexPathsForVisibleRows`确定屏幕上的内容可能更容易使用。然后，您可以很容易地使用它来确定正在显示的部分/部分。谢谢杰夫！

# php - PHP - 单击链接时执行特定的 php 代码

> ID：11547405
> 
> 赞同：1
> 
> 时间：2012-07-18T17:52:24.600
> 
> 标签：php, web, hyperlink, click

我目前正在网站上工作，我希望能够执行以下操作：

*   当单击 sideMenu 中的一个链接时，我唯一想更改的是我的 contentMain div 的内容，没有其他内容（页面布局/设计/等）

谁能给我一些关于如何在 php 中实现这一点的一般指示？

提前谢谢你：D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T17:55:29.450

这是使用 PHP 无法完成的客户端更改。PHP 在服务器端进行评估，因此一旦为用户加载页面，它就无法控制用户看到的内容（除非您使用客户端代码调用 PHP）。

为此，您需要使用 Javascript 和/或 jQuery。

**参考**：[https ://developer.mozilla.org/en/JavaScript/](https://developer.mozilla.org/en/JavaScript/)

**jQuery**：http: [//jquery.org/](http://jquery.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T17:54:56.080

iFrame、frameset 或 AJAX 都适用于您的情况，具体取决于您实际想要实现的目标。

对于 AJAX 调用（依赖 Javascript 的三种方法中最现代的方法），您可以使用 jQuery 等库。

[http://api.jquery.com/category/ajax/](http://api.jquery.com/category/ajax/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T17:59:42.320

您可以为此使用ajax。使用 jQuery 来检测链接上的点击或使用普通的 JavaScript onClick 函数。然后做你想做的事情。

```
<a href="" id="my_link">My link<a>

<script type="text/javascript">
   jQuery(document).ready(function(){
         jQuery('#my_link').click(function(){
            jQuery.ajax({
                url: 'ajax page need to be called',
                success: function(data) {
                     //do your operations on success
                }
           });
         });
   });
</script> 
```

您可以获得更多详细信息：

[jQuery](http://jquery.com/) [jQuery Ajax](http://api.jquery.com/jQuery.ajax/)

希望这可以帮助你

# busybox - BusyBox - 语法错误：意外重定向

> ID：11547408
> 
> 赞同：0
> 
> 时间：2012-07-18T17:52:32.153
> 
> 标签：busybox, openwrt, ash

我在 OpenWRT（它使用 BusyBox）。

当我运行这个脚本时：

```
 while read oldIP ; do
    iptables -t nat -D PREROUTING --dst $oldIP -p tcp --dport 443 -j DNAT --to 192.168.2.1:443
 done < <(comm -23 <(sort /tmp/currentIPs) <(sort /tmp/newIPs)) 
```

我收到此错误：

```
 syntax error: unexpected redirection 
```

我相信它不喜欢 "<(" 部分。所以，我的问题是......我怎样才能更改这个脚本以便 BusyBox 喜欢它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T17:58:54.147

“<()”称为进程替换，是 bash 特有的功能。您需要使用临时文件和管道，它才能在其他 POSIX shell 上工作。

```
sort /tmp/currentIPs > /tmp/currentIPs.sorted
sort /tmp/newIPs > /tmp/newIPs.sorted
comm -23 /tmp/currentIPs.sorted /tmp/newIPs.sorted | while read oldIP ; do
    iptables -t nat -D PREROUTING --dst $oldIP -p tcp --dport 443 -j DNAT --to 192.168.2.1:443
done
rm /tmp/currentIPs.sorted /tmp/newIPs.sorted 
```

# r - 将 chr 转换为 scale_x_date (ggplot2) 的日期格式

ID：11547414

赞同：1

时间：2012-07-18T17:52:56.117

标签：r, date, ggplot2, datetime-format

# php - 处理此指令 PHP 时发生错误

> ID：11547419
> 
> 赞同：0
> 
> 时间：2012-07-18T17:53:13.273
> 
> 标签：php, forms

我有一个包含相册的表单。每张照片都有一个复选框。当用户按下提交时，复选框被发送到另一个页面进行处理。到目前为止，这适用于大多数相册，甚至最多 100 张照片，但有一个相册有 262 张照片。

如果用户尝试提交该表单，则会出现错误：`an error occurred while processing this directive`显示。任何线索可能导致这种情况以及为什么它只发生在较大的专辑中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T22:04:50.583

也许您达到了最大 POST 大小或 GET 大小？

第一个是 php.ini 中的一个选项，第二个[是 URL 大小的限制](https://stackoverflow.com/a/2659995/208623)。

# visual-studio-2008 - 错误：生成的 SELECT 语句。语法错误：预期

> ID：11547424
> 
> 赞同：0
> 
> 时间：2012-07-18T17:53:25.397
> 
> 标签：visual-studio-2008, query-builder

下面是我的 SQL 以及上面的错误。我不知道问题是什么了。我已经尝试了很多。有人可以帮忙吗？

> 错误：生成的 SELECT 语句语法错误：在列别名或“*”之后需要“，”或“FROM” 要将这些组件添加到数据集，请单击“完成”。

```
SELECT ALCIE.POLINE.DISTDIV
    , ALCIE.POLINE.DISTDEPT
    , ALCIE.POLINE.DISTGL
    , ALCIE.POLINE.LINENO
    , ALCIE.POLINE.ITEM
    , ALCIE.POLINE.ITEMDES1
    , ALCIE.POLINE.ITEMDES2
    , ALCIE.POLINE.PO
    , ALCIE.POLINE.PODATE
    , ALCIE.POLINE.PURCHUOM
    , ALCIE.POLINE.QTYORD
    , ALCIE.POLINE.CUMQTYREC
    , ALCIE.POLINE.UNITCOST
    , ALCIE.POLINE.CUMQTYREC * ALCIE.POLINE.UNITCOST AS EXPR1
    , ALCIE.POLINE.RECDATE
    , ALCIE.POLINE.VENDOR
    , ALCIE.APMASTER.NAME1
    , ALCIE.POLINE.STATUS
    , ALCIE.POHEADER.STATUS AS EXPR2
    , ALCIE.POLINE.STKLOC
    , ALCIE.POLINE.LAST_REC_USERID
    , ALCIE.POLINE.ITEMDES3
    , 'ALCIE_POLINE.PO' || 'ALCIE_POLINE.LINENO' AS EXPR3
    , ALCIE.POHEADER.COMMENTS4
FROM ALCIE.POLINE, ALCIE.POHEADER, ALCIE.APMASTER
WHERE ALCIE.POLINE.CO = ALCIE.POHEADER.CO 
    AND ALCIE.POLINE.PO = ALCIE.POHEADER.PO 
    AND ALCIE.POHEADER.CO = ALCIE.APMASTER.CO 
    AND ALCIE.POHEADER.VENDOR = ALCIE.APMASTER.VENDOR 
    AND (ALCIE.POLINE.CO = 'WSA') 
    AND (ALCIE.POLINE.PO = :EnterPoNumber)
ORDER BY ALCIE.POLINE.ITEMDES1, ALCIE.POLINE.PO 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T18:23:39.753

尝试这个：

```
选择 ALCIE.POLINE.DISTDIV，
ALCIE.POLINE.DISTDEPT,
ALCIE.POLINE.DISTGL,
ALCIE.POLINE.LINENO,
ALCIE.POLINE.ITEM,
ALCIE.POLINE.ITEMDES1,
ALCIE.POLINE.ITEMDES2,
ALCIE.POLINE.PO,
ALCIE.POLINE.PODATE,
ALCIE.POLINE.PURCHUOM,
ALCIE.POLINE.QTYORD,
ALCIE.POLINE.CUMQTYREC,
ALCIE.POLINE.UNITCOST,
ALCIE.POLINE.CUMQTYREC * ALCIE.POLINE.UNITCOST AS EXPR1,
ALCIE.POLINE.RECDATE，
ALCIE.POLINE.供应商，
ALCIE.APMASTER.NAME1,
ALCIE.POLINE.STATUS,
ALCIE.POHEADER.STATUS 作为 EXPR2，
ALCIE.POLINE.STKLOC,
ALCIE.POLINE.LAST_REC_USERID,
ALCIE.POLINE.ITEMDES3,
(ALCIE.POLINE.PO | ALCIE.POLINE.LINENO) 作为 EXPR3，
ALCIE.POHEDER.COMMENTS4
来自 ALCIE.POLINE、ALCIE.POHEADER、ALCIE.APMASTER
其中 ALCIE.POLINE.CO = ALCIE.POHEADER.CO
    和 ALCIE.POLINE.PO = ALCIE.POHEADER.PO
    和 ALCIE.POHEADER.CO = ALCIE.APMASTER.CO
    和 ALCIE.POHEADER.VENDOR = ALCIE.APMASTER.VENDOR
    和（ALCIE.POLINE.CO = 'WSA'）
    AND (ALCIE.POLINE.PO = :EnterPoNumber)
由 ALCIE.POLINE.ITEMDES1、ALCIE.POLINE.PO 订购

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-14T12:20:12.810

就我而言，问题出在 select 语句上，您需要将所有计算转换`TO_NUMBER`为如下：

尝试这个：

```
SELECT
   TO_NUMBER(TABLE_NAME.COLUMN * TABLE_NAME.COLUMN) AS EXPR1, 
   TO_NUMBER(TABLE_NAME.COLUMN * 100) AS EXPR2
FROM TABLE_NAME 
```

# javascript - removeClass() 在 if 语句之外工作，但不在 if 语句内

> ID：11547428
> 
> 赞同：0
> 
> 时间：2012-07-18T17:54:02.933
> 
> 标签：javascript, jquery

我有以下 HTML：

```
<div id="wrapper">
      <div class="p1">
          <a href="#" class="quickFlipCta"><img src="Test Pictures/QuestionMark.gif" /></a>
      </div>

      <div class="p2">
          <a href="#" class="quickFlipCta"><img src="Test Pictures/flower.gif" /></a>
      </div>
</div> 
```

除了其他一些事情，我希望在特定条件后删除类“quickFlipCta”。这是我的代码片段：

```
if ( $(this).attr('id') != last.attr('id') ) {
  var that = this;
  var that2 = last;
  setTimeout(function(){
     $(that).parent().parent().quickFlipper({refresh :1}); 
     $(that2).parent().parent().quickFlipper({refresh :1}); 
  }, 1500);
  $('a').removeClass('quickFlipCta');
} 
```

第一条语句完美运行：

```
 setTimeout(function(){
        $(that).parent().parent().quickFlipper({refresh :1});
        $(that2).parent().parent().quickFlipper({refresh :1});
    }, 1500); 
```

但是`$('a').removeClass('quickFlipCta');`不起作用。我认为它有问题，但我在 if 语句之外尝试了它并且它有效。知道是什么原因造成的吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:21:11.357

变量**last**只有值**null**或**$(this)**

```
$('a').click(function() {
    if (last) {
        // ...
        // if this if is executed that means last = $(this), 
        // so the condition returns false
        if ($(this).attr('id') != last.attr('id')) {
            // this code is never executed
            $('a').removeClass('quickFlipCta');
        }
        // ...
        last = null;
    } else {
        last = $(this);
    }
}); 
```

# c++ - 通过引用返回通过引用传递的向量的实用程序

> ID：11547429
> 
> 赞同：3
> 
> 时间：2012-07-18T17:54:04.890
> 
> 标签：c++, string, vector, pass-by-reference

我最近看到以下代码块作为对这个问题的回应：[Split a string in C++?](https://stackoverflow.com/questions/236129/splitting-a-string-in-c)

```
std::vector<std::string> &split(const std::string &s, char delim, std::vector<std::string>     
&elems) {
    std::stringstream ss(s);
    std::string item;
    while(std::getline(ss, item, delim)) {
        elems.push_back(item);
    }
    return elems;
} 
```

为什么在这里返回按引用传递的数组“elems”如此重要？我们不能让它成为一个 void 函数，或者返回一个整数来表示成功/失败吗？无论如何，我们正在编辑实际的数组，对吧？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T17:56:32.877

通过返回对您传入的对象的引用，您可以在一个表达式中进行一些**链接**或**级联**，并始终使用同一个向量。有些人觉得这很方便：IE

```
 std::vector<std::string> elems;
  std::cout << "Number of items:" << split("foo.cat.dog", '.', elems).size();

  // get just foo
  std::cout << "First item is:" << split("foo.cat.dog", '.', elems)[0];

  // change first item to bar
  split("foo.cat.dog", '.', elems)[0] = "bar"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T18:25:32.980

它不是返回内存地址，它实际上是通过非常量引用返回对象。传入的方式相同。这可能看起来有点矫枉过正，因为调用代码可以依赖于传递的第三个参数，该参数将在函数返回时填充，或者返回参数。

这样做的原因是允许链接。所以你可以这样做：

```
split(myString, ',', asAVector).size(). 
```

它将执行该函数并允许您通过调用向量上的函数来链接结果（在这种情况下`size`）

尽管简洁，但这种方法有一些潜在的缺点：例如，返回值中不存在错误代码，因此您依赖于函数正常工作或抛出异常；因此，您通常希望用`try`/`catch`语义包装上面的内容。当然，你做的链接越多，不同类型异常的可能性就越大，所以你可能不得不覆盖更多的`catch`块。

请注意，通过引用传回比通过指针传回要好得多。当链中的某个函数决定失败并返回 0 时，使用指针进行链接会因崩溃而臭名昭著。

# php - PHP+MySQL 是否支持这种类型的虚拟表连接？

> ID：11547430
> 
> 赞同：2
> 
> 时间：2012-07-18T17:54:17.953
> 
> 标签：php, mysql

我使用一种专有的服务器端语言，它位于 Oracle 数据库之上。使用这种语言，您可以使用虚拟表来获取填充了数据的现有记录结构，并在连接到该记录结构上运行查询，就好像它是一个表一样。

这是一个简单的例子：

```
 //DECLARE THE RECORD STRUCTURE
    record data_out (
        1 prsnl [*]
            2 person_id = f8
            2 full_name = vc
            2 position = vc
            2 status = vc
            2 last_access_dt_tm = vc
            2 role [*]
                3 role_name = vc
                3 role_id = f8  
    ) with persistscript

    //QUERY PEOPLE
    select into "NL:"
    from person p
    where p.whatever_field = "QUALIFIER"
    detail

        a = a + 1
        stat = alterlist(data_out->prsnl, a)

        data_out->prsnl[a]->person_id = p.person_id
        data_out->prsnl[a]->full_name = p.name_full_formatted
        data_out->prsnl[a]->position = p.position

    with time=10

    //USE A DUMMY TABLE TO PULL IN MORE DATA FOR EACH PERSON
    select into "NL:"
    from (dumt d with seq = size(data_out->prsnl,5))
        ,rnd_role_def rrd
        ,rnd_r_assign_hx rah
    plan d
    join rah
        where rah.team_id = data_in->team_id
        and rah.prsnl_id = data_out->prsnl[d.seq]->person_id
        and rah.handoff_dt_tm > cnvtdatetime(curdate-90,curtime)
    join rrd
        where rrd.role_id = rah.role_id
    order by d.seq, rrd.role_name
    head d.seq
        i = 0
    head rrd.role_name
        i = i + 1
        stat = altlist(data_out->prsnl[d.seq]->role, i)

        data_out->prsnl[d.seq]->role[i]->role_id = rrd.role_id
        data_out->prsnl[d.seq]->role[i]->role_name = rrd.role_name

    with time=10 
```

PHP+MySQL 有这样的东西吗？如果是这样，可以以某种方式将我指向包含更多信息或操作方法的链接。谷歌搜索并没有为我找到任何东西——可能是搜索错误的关键字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T17:59:54.403

使用临时表：

```
CREATE TEMPORARY TABLE temp1 
```

临时表将在当前会话中持续存在。您可以通过正常`CREATE TABLE`语法定义临时表的字段：

```
CREATE TEMPORARY TABLE temp1(
    `id` INT(11) NOT NULL AUTO_INCREMENT,
    `name` VARCHAR(50),
) 
```

...或者您可以创建一个临时表并允许查询数据定义列：

```
CREATE TEMPORARY TABLE temp1;
INSERT INTO temp1
  SELECT id, name FROM normal_table 
```

**文档**

*   MySQL`CREATE TABLE`语法 - [http://dev.mysql.com/doc/refman/5.1/en/create-table.html](http://dev.mysql.com/doc/refman/5.1/en/create-table.html)
*   MySQL 临时表教程 - [http://www.tutorialspoint.com/mysql/mysql-temporary-tables.htm](http://www.tutorialspoint.com/mysql/mysql-temporary-tables.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T18:07:21.880

可能有用的三件事：

1.  [内存表](http://dev.mysql.com/doc/refman//5.5/en/memory-storage-engine.html)( `CREATE TABLE mem_t (id (int)) ENGINE=MEMORY;`)
2.  临时表 ( `CREATE TEMPORARY TABLE temp_t (id (int));`)
3.  [意见](http://dev.mysql.com/doc/refman/5.0/en/views.html)

请注意，临时表仅对当前连接可见，而视图和内存表是共享资源（如常规表）。

还可以查看有关 SO 的这些相关问题：

*   [https://stackoverflow.com/a/2454357/473637](https://stackoverflow.com/a/2454357/473637)
*   [存储过程中的 MySQL 临时表与内存表](https://stackoverflow.com/q/1767672/473637)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T18:02:13.223

您可以使用[临时表](http://dev.mysql.com/doc/refman/5.1/en/create-table.html)和[INSERT SELECT](http://dev.mysql.com/doc/refman/5.0/en/insert-select.html)语法来实现它，然后删除该表 - 但是性能不是最好的

# asp.net - 采用 Telerik Control 并通过服务器端的 ajax 请求动态引用它并推动新的界限？

> ID：11547431
> 
> 赞同：0
> 
> 时间：2012-07-18T17:54:20.357
> 
> 标签：asp.net, ajax, user-controls, telerik, markup

使用 ASP 控件，如 Telerik Controls，您拥有引用的服务器端并将标记发送到客户端。我试图用它做一些新的事情。

我有一个 ajax 调用，它会返回一个 MODAL 的 json 对象。此模式将包含一个 TreeView。从我所查找的内容来看，如果我要这样做，它实际上不会有后端可供参考，因为它实际上是在 ping 服务器以获得一些 1 次使用输出。

我正在努力改变这一点。我的目标是让 ajax ping 构建电视，然后在每个后续节点扩展中，返回单击节点的所有子节点？听起来很容易对吧？好吧，不是从我这样做的方式来看。

我的 ajax 请求只是要返回一个字符串，用 jQuery 将其解析为 HTML，然后插入到模式中。我正在尝试各种事情，例如：

```
StringWriter writer = new StringWriter();
HtmlTextWriter tOut = new HtmlTextWriter(writer);
ddFieldFilter.RenderControl(tOut);
tvFields = new RadTreeView();
tvFields.NodeExpand += new RadTreeViewEventHandler(tvFields_NodeExpand);
tvFields.NodeClick += new RadTreeViewEventHandler(tvFields_NodeClick);
startTree();
tvFields.RenderControl(tOut);
ret += writer.ToString(); 
```

这不是我想要的方式，它会崩溃。它不会让我在 TreeView 上执行 toString 以将标记放入字符串中。

旁注：树不需要保留，但是如果您可以将树发送回服务器进行更新，然后返回它也可以。

我在想，在树打印出来之后，我会在每片叶子上，对 TreeViewNodes 做一个 ajax 请求，或者......类似的东西。

想法？想法？从我所看到的和我的思考过程来看，你不能让 DIV 成为网络服务器更新的目标。这更像是一种框架之类的东西，我可以这样做....在 div 中放置一个框架，但我试图保持它看起来不错，没有框架。

# ember.js - 对数组进行排序不会更新 Dom

> ID：11547434
> 
> 赞同：0
> 
> 时间：2012-07-18T17:54:22.590
> 
> 标签：ember.js

我无法使以下代码在我的测试应用程序中工作：

```
this.propertyWillChange('tableContent');
this.get('tableContent').sort(function (a, b) {
     var nameA = a.artikel_name,
     nameB = b.artikel_name;
     if (nameA < nameB) {
        return -1;
     }
     if (nameA > nameB) {
        return 1;
      }
      return 0 //default return value (no sorting)
  });
 this.propertyDidChange('tableContent'); 
```

数据已排序，但 dom 未更新。

模板如下所示：

```
<tbody>
    {{#each NewApp.router.gridController.tableContent}}
        {{#view NewApp.TableRow rowBinding="this"}}
            <td style="width: 100px">{{view.row.product_no}}</td>
            <td align="right" style="width: 100px">{{view.row.price}}</td>
            <td>{{view.row.artikel_name}}</td>
        {{/view}}
    {{/each}}
</tbody> 
```

我试图用一个简短的 jsfiddle 片段重现这个问题。但它在那里工作。唯一的区别是，我使用 ajax 调用（以及一些额外的路由器设置）来获取数据。

```
selectionChanged: function () {
   var that = this;
   if (this.selection) {
    $.getJSON("api/v1/lists/" + this.selection.id + "/prices", function (content) {
        that.set('tableContent', content);
    });
}
}.observes('selection') 
```

如果我复制数组并重新分配复制的数组，则相同的代码有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T19:56:19.240

您是否尝试使用内置的 SortableMixin ？如果没有，这对你有好处吗？

JavaScript：

```
App = Ember.Application.create();

App.activities = Ember.ArrayController.create({
  content: [{name: 'sleeping'}, {name: 'eating pizza'},
            {name: 'programming'}, {name: 'looking at lolcats'}],
  sortProperties: ['name']
});

App.ActivityView = Ember.View.extend({
  tagName: "li",
  template: Ember.Handlebars.compile("{{content}}")
});

App.SortButton = Ember.View.extend({
  tagName: "button",
  template: Ember.Handlebars.compile("Sort"),
  click: function() {
    App.activities.toggleProperty('sortAscending');
  }
}); 
```

jsfiddle：http: [//jsfiddle.net/Sly7/cd24n/#base](http://jsfiddle.net/Sly7/cd24n/#base)

# c# - 为 Combobox SelectedItem.Text 分配一个字符串

> ID：11547435
> 
> 赞同：0
> 
> 时间：2012-07-18T17:54:32.320
> 
> 标签：c#, asp.net, combobox, oracle10g

尝试将“模型”中的值分配到名为 ModelNumTB 的组合框时，我收到以下异常。

由于某种原因，我无法将字符串的值复制到组合框的默认加载值中。你应该怎么做？字符串模型；

```
 <ajaxToolkit:ComboBox ID="ModelNumTB" runat="server" 
                    AutoCompleteMode="Suggest" AutoPostBack="True" DataSourceID="ComboboxDS" 
                    DataTextField="MODEL_NUMBER" DataValueField="MODEL_NUMBER" MaxLength="0" 
                    style="display: inline;" 
                    onselectedindexchanged="ModelNumTB_SelectedIndexChanged"></ajaxToolkit:ComboBox> 
```

![空引用异常](../Images/a7d6f95c28bdcbf2153db4bf495217a4.png)

将其更改为以下内容也不起作用：

![在此处输入图像描述](../Images/07d3350e463e50eaca69c08b05cf43db.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:57:22.797

改变

```
ModelNumTB.SelectedItem.Text = model; 
```

至：

```
ModelNumTB.Text = model; 
```

SelectedItem 属性为空

# c# - C# Windows 窗体应用程序：将 GUI 与业务逻辑分开

> ID：11547438
> 
> 赞同：10
> 
> 时间：2012-07-18T17:54:45.643
> 
> 标签：c#, events, user-interface, business-logic

我想要一些关于如何在一个简单的 C# Windows 窗体应用程序中分离 UI 和业务逻辑的建议。

让我们看这个例子：

UI 由一个简单的文本框和一个按钮组成。用户输入一个介于 0 和 9 之间的数字并单击按钮。程序应将 10 添加到数字并使用该值更新文本框。

![在此处输入图像描述](../Images/82f3d2f7586310e7503a1bcf9b947f08.png)

业务逻辑部分应该不知道 UI。如何实现？

这是空的 Process 类（业务逻辑）：

```
namespace addTen
{
    class Process
    {
        public int AddTen(int num)
        {
            return num + 10;
        }
    }
} 
```

要求是：

1.  当用户单击按钮时，会以某种方式调用 Process::AddTen。
2.  必须使用 Process::AddTen 的返回值更新文本框。

我只是不知道如何连接这两个。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-18T17:58:28.323

首先，您需要更改您的班级名称。“ **Process** ”是类库中的一个类的名称，可能会使任何阅读您的代码的人感到困惑。

让我们假设，对于这个答案的其余部分，您将类名更改为**MyProcessor**（仍然是一个坏名字，但不是一个众所周知的、经常使用的类。）

此外，您还缺少要检查的代码，以确保用户输入确实是 0 到 9 之间的数字。这适用于 Form 的代码而不是类代码。

*   假设 TextBox 被命名为 textBox1 （VS 为添加到表单的第一个 TextBox 生成默认值）
*   进一步假设按钮的名称是 button1

在 Visual Studio 中，双击按钮以创建按钮单击事件处理程序，如下所示：

```
protected void button1_Click(object sender, EventArgs e)
{

} 
```

在事件处理程序中，添加代码使其如下所示：

```
 protected void button1_Click(object sender, EventArgs e)
 {
   int safelyConvertedValue = -1;
   if(!System.Int32.TryParse(textBox1.Text, out safelyConvertedValue))
   {
     // The input is not a valid Integer value at all.
     MessageBox.Show("You need to enter a number between 1 an 9");
     // Abort processing.
     return;
   }

   // If you made it this far, the TryParse function should have set the value of the 
   // the variable named safelyConvertedValue to the value entered in the TextBox.
   // However, it may still be out of the allowable range of 0-9)
   if(safelyConvertedValue < 0 || safelyConvertedValue > 9)
   {
     // The input is not within the specified range.
     MessageBox.Show("You need to enter a number between 1 an 9");
     // Abort processing.
     return;
   }

   MyProcessor p = new MyProcessor();
   textBox1.Text = p.AddTen(safelyConvertedValue).ToString();
 } 
```

* * *

正确设置访问修饰符的类应如下所示：

```
namespace addTen       
{       
    public class MyProcessor
    {       
        public int AddTen(int num)       
        {       
            return num + 10;       
        }       
    }       
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T18:03:42.957

例如，您可以创建另一个名为“Process.cs”的类。涉及您移动到那里的处理或数据计算的方法。以您为例：

```
public class Process
{
 public int AddTen(int num)
 {
   return num + 10;
 }
} 
```

您的 UI 点击事件将调用您的“流程层”：

```
 var myProcess = new Process();
  //and then calculation
  var initNumber = Convert.ToInt32(textBox.Text);
  var calculatedValue = myProcess.AddTen(initNumber);

  textBox.Text = calculatedValue.ToString(); 
```

这样，您的业务逻辑（例如计算）将单独保存。如果您的 UI 发生变化，您仍然可以简单地调用 myProcess.AddTen() 方法，无论它是 Web、Windows 还是移动表单。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T18:02:53.020

公开您的“流程”课程（正如@DavidStratton 所说，更改名称）：

```
public class MyProcess 
```

我会说你应该将你的`string`价值解析`TextBox.Text`为`int`：

```
private void button1_Click(object sender, EventArgs e)
{
    MyProcess myProcess = new MyProcess();
    string result = textBox1.Text;
    int number;

    if(int.TryParse(textBox1.Text, out number))
    {
        result = myProcess.AddTen(number).ToString();
    }

    textBox1.Text = result;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-09T16:07:10.573

要完全分离逻辑，您可以声明一个可以包含按钮和管理处理程序的基类。你的具体流程可以继承基类，逻辑可以设置。最后，表单可以声明类的实例并传入按钮。

它看起来像这样：

```
class BaseProcessor
{

    System.Windows.Forms.Button myButton;
    public System.Windows.Forms.Button MyButton
    {
        get
        {
            return myButton;
        }
        set
        {
            myButton = value;
            myButton.Click += new System.EventHandler(this.MyButton_Click);
       }
    }

    public BaseProcessor()
    {
    }

    public virtual void MyButton_Click(object sender, EventArgs e)
    {
    } 
```

然后声明流程：

```
class MyProcess : BaseProcessor
{

    public override void MyButton_Click(object sender, EventArgs e)
    {
        MessageBox.Show("This is my process");
    }
} 
```

然后在表单中，声明一个流程实例并附加按钮：

```
public partial class Form1 : Form
{

    MyProcess myProcess = null;

    public Form1()
    {
        InitializeComponent();

        myProcess = new MyProcess
        {
            MyButton = button1
        };
    }

} 
```

使用这种方法，表单中没有业务逻辑代码。父类很有用，因为像单击按钮这样的事件非常常见，因此在我看来更容易集中声明它们。

# php - 基于 id 的 iframe 链接

> ID：11547440
> 
> 赞同：0
> 
> 时间：2012-07-18T17:54:47.753
> 
> 标签：php, jquery, iframe, hyperlink

所以事情就是这样，我有一个 php 站点，出于某些原因，我必须在 iframe 上显示所有信息（菜单除外）（我知道，糟糕的 SEO，老派）。

所以我的菜单调用不同的链接并通过给 iframe an`id`和链接显示在 iframe 上`target="id-name"`。

正如您可以想象的那样，我无法发送该`services`部分，因为我没有显示所有布局的链接。

所以，我的问题是：
有没有办法给我的链接一个`id`并将其用作链接，所以它可能像：`http://example.com/#services`使用 php、jquery、.htaccess

希望您能够帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T18:05:27.170

[您可以使用location.hash](http://www.w3schools.com/jsref/prop_loc_hash.asp)检查哈希值（#services），然后使用 javascript 更改相应的 iframe，具体取决于它

# php - SQL：基于条件的字段值？

> ID：11547442
> 
> 赞同：3
> 
> 时间：2012-07-18T17:54:56.137
> 
> 标签：php, mysql, sql

我需要返回一个特殊值来告诉我当前时间是否在营业时间内：

在餐桌**上**

```
ID    OPEN     CLOSE  
1     14:00    16:00  
2     12:00    15:00
3     10:00    14:00 
```

我需要在查询中返回一个特殊字段：PLACE_IS_OPEN - true 或 false。

使得时间为的返回结果`14:35`为：

```
ID      PLACE_IS_OPEN
1       1
2       1
3       0 
```

什么是下降的方式来解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T17:56:52.923

位于打开和关闭时间之间的测试，`TIME(NOW())`并将其布尔结果作为列返回。*如果*您`OPEN,CLOSE`是 MySQL DATETIME 或 TIME 列，这将按原样工作。

```
SELECT
  ID,
  OPEN,
  CLOSE,
  CASE WHEN TIME(NOW()) BETWEEN `OPEN` AND `CLOSE` THEN 1 ELSE 0 END AS PLACE_IS_OPEN
FROM yourtable 
```

如果这些是字符列而不是正确的`TIME`类型，则需要`STR_TO_TIME()`转换它们

```
 CASE WHEN TIME(NOW()) BETWEEN TIME(STR_TO_DATE(`OPEN`, '%H:%i')) AND TIME(STR_TO_DATE(`CLOSE`, '%H:%i')) THEN 1 ELSE 0 END AS PLACE_IS_OPEN 
```

MySQL 应该允许你简化`CASE`语句，因为它`BETWEEN`会返回 0 或 1：

```
SELECT
  ID,
  OPEN,
  CLOSE,
  (TIME(NOW()) BETWEEN TIME(STR_TO_DATE(`OPEN`, '%H:%i')) AND TIME(STR_TO_DATE(`CLOSE`, '%H:%i'))) AS PLACE_IS_OPEN
FROM yourtable 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T18:03:47.023

这将返回指定的结果集：

```
SELECT t.ID
     , CASE WHEN t.open <= DATE_FORMAT(NOW(),'%H:%i')
             AND t.close > DATE_FORMAT(NOW(),'%H:%i')
       THEN 1 ELSE 0 END AS PLACE_IS_OPEN
  FROM places t
 ORDER BY t.ID 
```

鉴于`OPEN`和`CLOSE`列是字符数据类型，包含格式为 24 小时制的字符串。

（注意：使用 BETWEEN 会在 CLOSE 的确切分钟上给出错误的结果。`DATE_FORMAT`将修剪当前时间的秒部分，例如，时间 '16:00:45' 将被格式化为 '16 :00'，可能等于指定的 CLOSE，但实际上比 CLOSE 指定的实际时间晚了 45 秒。）

您还需要确保没有任何“跨越”午夜的行，例如从晚上 10 点到凌晨 2 点开放，`CLOSE`否则该值将小于`OPEN`. （要使此查询起作用，这样的时间段需要在表中表示为两个单独的行，一行从 OPEN 到 '24:00'，另一行从 '00:00' 到 CLOSE。）

请注意，`CLOSE`午夜时间需要表示为“24:00”。（也就是说，一个 24 小时营业的地方可以表示为 OPEN='00:00' 和 CLOSE='24:00'。）

如果您的数据不遵循这些规则（例如，关闭的午夜表示为 00:00 或 CLOSE 小于 OPEN，则需要“改进”查询以处理这些条件。

* * *

如果您的 OPEN 和 CLOSE 列的数据类型为 TIME（而不是字符），则还需要修改查询，使用`TIME()`函数代替`DATE_FORMAT()`函数。（此外，在这种情况下，您可以使用 BETWEEN，如果允许在当前时间与关闭时间完全匹配时返回值 1：当前时间值“16:00:00”将等于关闭时间'16:00:00'，所以在这种情况下，这真的取决于你是要返回 1 还是 0。

另请注意，NOW() 函数将在`time_zone`(MySQL) 会话的变量的当前设置中进行评估。（因此，该表中的 OPEN 和 CLOSE 时间正在被有效地评估，就好像它们是在 MySQL 会话时区中指定的一样。

# c - 右箭头符号导致 fread 突然结束？

> ID：11547443
> 
> 赞同：3
> 
> 时间：2012-07-18T17:54:59.447
> 
> 标签：c, msvcrt

我正在尝试编写一个 bittorrent 客户端。为了解析文件等，我需要将一个 torrent 文件读入内存。我注意到 fread 没有将整个文件读入我的缓冲区。经过进一步调查，似乎只要在文件中遇到下面显示的符号，fread 就会停止读取文件。在 FILE* 指针上调用 feof 函数返回 16，表示已到达文件末尾。无论符号放置在何处，都会发生这种情况。有人可以解释为什么会发生这种情况以及任何可能有效的解决方案。

该符号在下面突出显示：

![在此处输入图像描述](../Images/26059cf538f6054b9a4837def6d53305.png)

这是执行读取操作的代码：

```
char *read_file(const char *file, long long *len){
struct stat st;
char *ret = NULL;
FILE *fp;

//store the size/length of the file
if(stat(file, &st)){
    return ret;
}
*len = st.st_size;

//open a stream to the specified file
fp = fopen(file, "r");
if(!fp){
    return ret;
}

//allocate space in the buffer for the file
ret = (char*)malloc(*len);
if(!ret){
    return NULL;
}

//Break down the call to fread into smaller chunks
//to account for a known bug which causes fread to
//behave strangely with large files

//Read the file into the buffer
//fread(ret, 1, *len, fp);
if(*len > 10000){
    char *retTemp = NULL;
    retTemp = ret;
    int remaining = *len;
    int read = 0, error = 0;
    while(remaining > 1000){
        read = fread(retTemp, 1, 1000, fp);
        if(read < 1000){
            error = feof(fp);
            if(error != 0){
                printf("Error: %d\n", error);
            }
        }
        retTemp += 1000;
        remaining -= 1000;
    }
    fread(retTemp, 1, remaining, fp);
} else {
    fread(ret, 1, *len, fp);
}

//cleanup by closing the file stream
fclose(fp);

return ret;
} 
```

感谢您的时间 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T18:29:29.043

您的问题非常相关，因为我最近在上周工作的应用程序中遇到了这个问题！

该字符的 ASCII 值是十进制 26 (0x1A, \SUB, [SUBSTITUTE](http://en.wikipedia.org/wiki/Substitute_character) )。这用于表示 CTRL+Z 键序列或文件结束标记。

更改您的[`fopen`模式](http://msdn.microsoft.com/en-us/library/yeby3zcb%28v=vs.80%29.aspx)（*“在 [Text] 模式下，CTRL+Z 被解释为输入时的文件结尾字符。”*）以在 Windows 上解决此问题：

```
fp = fopen(file, "rb"); /* b for 'binary', disables Text-mode translations */ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-18T18:29:10.857

您应该以二进制模式打开文件。某些平台在文本（默认）模式下，将某些字节解释为文件标记的物理结束。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-18T18:30:26.240

您正在以文本而不是原始/二进制模式打开文件 - 箭头是 EOF 的 ASCII。为您的 fopen 调用指定“rb”而不仅仅是“r”。

# c# - 如何使用 Listview 虚拟模式访问数据库？

> ID：11547445
> 
> 赞同：1
> 
> 时间：2012-07-18T17:55:04.120
> 
> 标签：c#

我有这段代码从数据库中检索数据，但我的问题是它只显示我的`ListViewItem`. 这是代码：

```
 private void patientLvw_RetrieveVirtualItem(object sender, RetrieveVirtualItemEventArgs e)
    {

        cmd = new OleDbCommand("SELECT * FROM PATIENTS ORDER BY PATIENTS.PatientNo;", conn);

        reader = cmd.ExecuteReader();
        while (reader.Read())
        {
            String patientNo = ""; ;
            String lastName = "";
            String firstName = "";
            String middleInitial = "";
            String age = "";
            String address = "";
            String type = "";
            String status = "";
            if (!reader.IsDBNull(0))
            {
                patientNo = reader.GetInt32(0).ToString();
            }

            if (!reader.IsDBNull(1))
            {
                lastName = reader.GetString(1);
            }

            if (!reader.IsDBNull(2))
            {
                firstName = reader.GetString(2);
            }
            if (!reader.IsDBNull(3))
            {
                middleInitial = reader.GetString(3);
            }
            if (!reader.IsDBNull(4))
            {
                age = reader.GetInt32(4).ToString();
            }
            if (!reader.IsDBNull(5))
            {
                address = reader.GetString(5);
            }
            if (!reader.IsDBNull(6))
            {
                type = reader.GetString(6);
            }
            if (!reader.IsDBNull(7))
            {
                status = reader.GetBoolean(7).ToString();
            }

            ListViewItem lvi = new ListViewItem(patientNo);

            e.Item.SubItems.Add(lastName);

            e.Item.SubItems.Add(firstName);
            e.Item.SubItems.Add(middleInitial + ".");
            e.Item.SubItems.Add(age);
            e.Item.SubItems.Add(address + ".");
            e.Item.SubItems.Add(type);
            e.Item.SubItems.Add(status);

            e.Item = lvi;

        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T02:13:45.307

为每个项目调用 RetreiveVirtualItem，并且每次调用它时您都在循环每个患者。您每次都覆盖 e.Item，因此每个项目都以最后一组值结束。

您需要检查`e.ItemIndex`并仅检索该特定行的数据。

或者，也许您实际上并不想使用虚拟模式，您应该只在启动时执行一次查询，然后手动将它们全部添加到列表中。

*编辑之前问题的答案：*

另外，你为什么要创建两个 ListViewItems？我认为你的代码应该是这样的：

```
e.Item = new ListViewItem(patientNo);    

if (status.Equals("Yes"))
{
    e.Item.ForeColor = Color.Red;
}

e.Item.SubItems.Add(lastName);

e.Item.SubItems.Add(firstName);
e.Item.SubItems.Add(middleInitial + ".");
e.Item.SubItems.Add(age));
e.Item.SubItems.Add(address + ".");
e.Item.SubItems.Add(type);
e.Item.SubItems.Add(status); 
```

# r - 用列循环 ggplot2

> ID：11547448
> 
> 赞同：4
> 
> 时间：2012-07-18T17:55:26.913
> 
> 标签：r, ggplot2

我正在尝试遍历数据框和列以生成多个图。我有一个数据框列表，对于每个数据框，我想针对几个预测变量之一绘制响应。

例如，我可以轻松地遍历数据框：

```
df1=data.frame(response=rpois(10,1),value1=rpois(10,1),value2=rpois(10,1))
df2=data.frame(response=rpois(10,1),value1=rpois(10,1),value2=rpois(10,1))

#Looping across data frames
lapply(list(df1,df2), function(i) ggplot(i,aes(y=response,x=value1))+geom_point()) 
```

但是我在数据框中的列之间循环时遇到了问题：

```
lapply(list("value1","value2"), function(i) ggplot(df1,aes_string(x=i,y=response))+geom_point()) 
```

我怀疑这与我对待美学的方式有关。

最终我想串起来`lapply`生成数据框和列的所有组合。

任何帮助表示赞赏！

* * *

编辑：乔兰有！使用时必须将非列表响应放在引号中`aes_string`

```
lapply(list("value1","value2"), function(i) ggplot(df1,aes_string(x=i,y="response"))+geom_point()) 
```

作为参考，这里将`lapply`函数串起来以生成所有组合：

```
lapply(list(df1,df2), function(x)
  lapply(list("value1","value2"), function(i) ggplot(x,aes_string(x=i,y="response"))+geom_point() ) ) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T18:11:02.647

在 中`aes_string()`，所有变量都需要表示为`character`。在“响应”周围添加引号。

```
lapply(list("value1","value2"), 
       function(i) ggplot(df1, aes_string(x=i, y="response")) + geom_point()) 
```

# java - JVM、JDK、JRE 和 OpenJDK 有什么区别？

> ID：11547458
> 
> 赞同：360
> 
> 时间：2012-07-18T17:56:11.957
> 
> 标签：java, jvm, difference

**JVM**、**JDK**、**JRE**和**OpenJDK**之间有什么区别？

我在用Java编程时遇到了这些短语，它们之间有什么区别？

* * *

## 回答 #1

> 赞同：392
> 
> 时间：2012-07-20T13:26:36.297

# 虚拟机

**Java 虚拟机**(JVM) 是运行 Java 字节码的虚拟机。JVM 不理解 Java 源代码；这就是为什么您需要编译`*.java`文件以获取`*.class`包含 JVM 可以理解的字节码的文件。它也是使 Java 成为“可移植语言”（*一次编写，随处运行*）的实体。事实上，JVM 有针对不同系统（Windows、Linux、macOS，[参见 Wikipedia 列表](https://en.wikipedia.org/wiki/List_of_Java_virtual_machines)）的特定实现，目的是使用相同的字节码，它们都给出相同的结果。

# JDK 和 JRE

要解释JDK和JRE之间的区别，最好阅读[Oracle文档](https://www.oracle.com/technetwork/java/javase/tech/index-jsp-140763.html)并参考图表：

> **Java 运行时环境 (JRE)**
> 
> Java 运行时环境 (JRE) 提供库、Java 虚拟机和其他组件来运行用 Java 编程语言编写的小程序和应用程序。此外，JRE 还包含两项关键部署技术：Java 插件，它使小程序能够在流行的浏览器中运行；和 Java Web Start，它通过网络部署独立的应用程序。它也是用于企业软件开发和部署的 Java 2 平台企业版 (J2EE) 技术的基础。JRE 不包含用于开发小程序和应用程序的工具和实用程序，例如编译器或调试器。
> 
> **Java 开发工具包 (JDK)**
> 
> JDK 是 JRE 的超集，包含 JRE 中的所有内容，以及开发小程序和应用程序所需的编译器和调试器等工具。

请注意，Oracle 并不是唯一提供 JDK 的公司。

# OpenJDK

**[OpenJDK](https://en.wikipedia.org/wiki/OpenJDK)**是 JDK 的开源实现，也是 Oracle JDK 的基础。Oracle JDK 和 OpenJDK 几乎没有区别。

[此博客](https://web.archive.org/web/20131211114810im_/https://blogs.oracle.com/henrik/entry/java_7_questions_answers)中说明了差异：

> 问：在 OpenJDK 存储库中找到的源代码与您用于构建 Oracle JDK 的代码有什么区别？
> 
> 答：非常接近——我们的 Oracle JDK 版本的构建过程是在 OpenJDK 7 上构建的，只添加了几个部分，例如部署代码，其中包括 Oracle 的 Java 插件和 Java WebStart 实现，以及一些封闭源代码的第三方第三方组件，例如图形光栅化器，一些开源第三方组件，例如 Rhino，以及一些零碎的东西，例如附加文档或第三方字体。展望未来，我们的目标是开源 Oracle JDK 的所有部分，除了那些我们认为商业功能的部分，例如 JRockit Mission Control（Oracle JDK 中尚不可用），并用开源替代品替换受阻的第三方组件以实现更接近的平等代码库之间。

# JDK 11 的更新

Donald Smith 的一篇文章试图消除 Oracle JDK 和 Oracle 的 OpenJDK 之间的区别：[https ://blogs.oracle.com/java-platform-group/oracle-jdk-releases-for-java-11-and-later](https://blogs.oracle.com/java-platform-group/oracle-jdk-releases-for-java-11-and-later)

正如@Alan Evangelista 在评论中提到的，Java Web Start 在 Java SE 9 中已被 Oracle 弃用，并在 Java SE 11 中被删除。

* * *

## 回答 #2

> 赞同：100
> 
> 时间：2012-07-18T17:59:03.130

JVM 是 Java 虚拟机——它实际上运行 Java ByteCode。

JRE 是 Java 运行时环境——它包含一个 JVM 等，是运行 Java 程序所需要的。

JDK 是 Java 开发工具包——它是 JRE，但添加了 javac（这是编译 Java 源代码所需的）和其他编程工具。

OpenJDK 是一个特定的 JDK 实现。

* * *

## 回答 #3

> 赞同：49
> 
> 时间：2013-06-14T03:42:16.707

**JDK（Java 开发工具包）**

Java Developer Kit 包含开发 Java 程序所需的工具，以及运行程序所需的 JRE。工具包括编译器（javac.exe）、Java应用程序启动器（java.exe）、Appletviewer等……</p>

编译器将 java 代码转换为字节码。Java 应用程序启动器打开一个 JRE，加载该类，并调用它的 main 方法。

如果您想编写自己的程序并编译它们，您需要 JDK。对于运行 java 程序，JRE 就足够了。

JRE 的目标是执行 Java 文件

**即**JRE = JVM + Java 包类（如 util、math、lang、awt、swing 等）+运行时库。

JDK主要针对java开发。即您可以创建一个Java 文件（借助Java 包）、编译一个Java 文件并运行一个Java 文件。

**JRE（Java 运行时环境）**

Java 运行时环境包含 JVM、类库和其他支持文件。它不包含任何开发工具，如编译器、调试器等。实际上JVM 运行程序，它使用JRE 中提供的类库和其他支持文件。如果你想运行任何java程序，你需要在系统中安装JRE

Java 虚拟机提供了一种独立于平台的代码执行方式；这意味着在任何机器上编译一次并在任何地方（任何机器）运行它。

**JVM（Java虚拟机）**

众所周知，当我们编译 Java 文件时，输出不是“exe”而是“.class”文件。'.class' 文件由 JVM 可以理解的 Java 字节码组成。Java 虚拟机根据底层操作系统和硬件组合将字节码解释为机器码。它负责垃圾收集、数组边界检查等所有事情……JVM 是平台相关的。

JVM 之所以称为“虚拟”，是因为它提供了一个不依赖于底层操作系统和机器硬件架构的机器接口。这种对硬件和操作系统的独立性是 Java 程序的一次写入随处运行价值的基石。

那里有不同的JVM实现。这些可能在性能、可靠性、速度等方面有所不同。这些实现将在 Java 规范未提及如何实现这些功能的领域有所不同，例如垃圾收集过程的工作方式取决于 JVM，Java 规范没有定义任何特定的方式来做到这一点。

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2012-07-18T18:02:31.000

**Java 虚拟机 (JVM)**是可以执行 Java ByteCode 的虚拟机。它是Java软件平台的代码执行组件。

**Java Development Kit (JDK)**是 Oracle Corporation 针对 Java 开发人员的产品。自 Java 推出以来，它一直是迄今为止使用最广泛的 Java 软件开发工具包 (SDK)。

**Java Runtime Environment**，也称为Java Runtime、Runtime Environment

**OpenJDK（Open Java Development Kit）**是 Java 编程语言的免费开源实现。这是 Sun Microsystems 于 2006 年开始努力的结果。该实现是根据 GNU 通用公共许可证 (GPL) 许可的，但有一个链接例外。

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2012-07-18T18:01:22.403

**JVM**是 Java 代码在其上执行的虚拟机

**JRE**是运行 Java 应用程序所需的环境（标准库和 JVM）

**JDK**是具有开发人员工具和文档的 JRE

**OpenJDK**是 JDK 的开源版本，不同于 Oracle 拥有的普通 JDK

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2013-07-14T23:27:35.397

**JDK**（Java 开发工具包）：

*   包含开发 Java 程序所需的工具。
*   如果您想编写自己的程序并编译它们，您需要 JDK。
*   JDK主要针对java开发。

**JRE**（Java 运行时环境）

Java 运行时环境包含 JVM、类库和其他支持文件。JRE 的目标是执行 Java 文件。

**JVM**（Java虚拟机）

JVM根据底层操作系统和硬件组合**将字节码解释为机器码。**它负责垃圾收集、数组边界检查等所有事情……Java 虚拟机提供了一种与平台无关的代码执行方式。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2015-07-31T16:54:44.947

**JDK** - 将 java 编译为字节码。由调试器、编译器等组成。

```
javac file.java // Is executed using JDK 
```

**JVM** - 执行字节码。JVM是使Java平台独立的一种。但是 JVM 因平台而异。

**JRE** - JVM 与 java 运行时库一起执行 java 程序。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2013-05-03T19:08:49.943

另一个值得一提的方面：

**JDK（Java开发工具包）**

顾名思义，您将需要它用于开发目的。

例如：一家软件公司将在他们的计算机上安装 JDK，因为他们需要开发新的软件，这也涉及编译和运行他们的 Java 程序。

所以我们可以说JDK = JRE + JVM。

**JRE（Java 运行时环境）**

它是运行 Java 程序所必需的。你不能用它编译 Java 程序。

例如：一个普通的计算机用户想要运行一些网络游戏，那么他的系统中需要 JRE 来运行 Java 程序。

**JVM（Java虚拟机）**

您可能知道它运行字节码。它使 Java 平台独立，因为它执行`.class`您在编译 Java 程序后获得的文件，无论您是在 Windows、Mac 还是 Linux 上编译它。

**打开 JDK**

嗯，就像我上面说的。现在 JDK 是由不同的公司制造的，其中一个恰好是开源且免费供公众使用的是 OpenJDK，而其他一些是 Oracle Corporation 的 JRockit JDK 或 IBM JDK。

然而，对于一般用户来说，它们可能看起来都一样。

**结论**

如果您是 Java 程序员，您的系统中将需要 JDK，并且此软件包中还将包含 JRE 和 JVM，但如果您是喜欢玩网络游戏的普通用户，则您只需要 JRE，此软件包中不会包含 JDK .

换句话说，JDK 是祖父 JRE 是父亲，JVM 是他们的儿子。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2014-07-16T17:07:51.827

Java 是一种语言，包括严格且强类型的语法。

Java 2 Platform, Standard Edition，也称为 J2SE，指的是该平台，并包括 java.lang 和 java.io 包中的类等。它是构建 Java 应用程序的基石。

Java 虚拟机或 JVM 是运行已编译 Java 代码的软件虚拟机。因为编译后的 Java 代码仅仅是字节码，JVM 负责在运行之前将该字节码编译为机器码。（这通常称为即时编译器或 JIT 编译器。）JVM 还负责内存管理，因此应用程序代码不必这样做。

Java 开发工具包或 JDK 过去和现在都是 Java 开发人员用来创建 Java 应用程序的软件。它包含一个 Java 语言编译器、一个文档生成器、用于处理本机代码的工具，以及（通常）平台的 Java 源代码，以启用调试平台类。

Java 运行时环境 (JRE) 曾经是并且仍然是最终用户下载以运行已编译的 Java 应用程序的软件。它包含一个 JVM，但不包含任何捆绑在 JDK 中的开发工具。但是，JDK 确实包含 JRE。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2015-08-06T03:30:48.727

**JVM ：**描述运行 java 程序的方式/资源的规范。实际执行字节码并使java平台独立。这样做，对于不同的平台是不同的。Windows 的 JVM 不能作为 UNIX 的 JVM。

**JRE：** JVM 的实现。（JVM + 运行时库）

**JDK：** JRE + java编译器和其他从零开始构建java程序的必备工具

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2013-10-10T09:15:50.473

**JVM**：这实际上意味着字节码解释器。它依赖于平台。例如：在Windows 平台中，' *java.exe* ' 或' *javaw.exe* ' 进程是jvm 进程。

**JDK**：是一个工具包，包含开发和执行java程序/应用程序所需的库和实用程序

**JRE**：是java应用程序的执行环境。即，它只支持编译程序的运行时依赖，包括jvm。如果我们想编译一个java程序，我们需要jdk。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2015-04-21T08:12:19.730

**虚拟机**

JVM（Java虚拟机）是一种抽象机器。它是一种提供运行时环境的规范，可以在其中执行 java 字节码。JVM 可用于许多硬件和软件平台。

**JRE**

JRE是Java Runtime Environment的首字母缩写。它用于提供运行时环境。它是JVM的实现。它物理存在。它包含一组库+ JVM在运行时使用的其他文件。

**JDK**

JDK是Java Development Kit的首字母缩写。它物理存在。它包含JRE+开发工具。

链接：- [http://www.javatpoint.com/difference-between-jdk-jre-and-jvm](http://www.javatpoint.com/difference-between-jdk-jre-and-jvm)

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2017-01-15T11:02:50.403

JVM：java的虚拟机。告诉机器如何处理 Java 代码。您不能按原样下载 JVM。它包装在其他一些组件中。

JRE：上面提到的其他一些组件是 JRE。创建运行时环境是 JVM+ 其他 jars

JDK：包含 JRE（它又包含 JVM）。获得 JDK 后，您无需单独安装 JRE 和 JVM。它包含编译器，可将您的 .java 文件编译为 .class 文件

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2020-06-04T21:41:54.327

总之：

*   JRE = JVM + Java 包（如 util、math、lang、awt、swing 等）+ 运行时库
*   JDK = JRE + 开发/调试工具

如果你想用java开发，你需要JDK，但如果你只想运行java，你需要JRE。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2021-08-31T00:07:29.883

1.  开发者使用**JDK**进行开发，首先我们编写.java源代码
2.  开发者调试代码并将代码编译成**JRE中的.class字节码可执行文件**
3.  可执行文件由**JVM**执行，将字节码转换为机器可以执行的本机机器码

[![在此处输入图像描述](../Images/fffcdeb2b592e0e954ba4e324926b45e.png)](https://i.stack.imgur.com/uiu0S.png)

这是他们的关系：

[![在此处输入图像描述](../Images/165be77b6d2c036fe52b5b5789c0e8ec.png)](https://i.stack.imgur.com/V8Uvs.png)

参考：
[Java JDK、JRE 和 JVM](https://howtodoinjava.com/java/basics/jdk-jre-jvm/)

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2021-10-21T05:13:48.000

**JDK** -`javac`用于将*.java 文件**编译**为 *.class 字节码文件的工具（主要是开发 Java 程序）

**JRE** -**运行***.jar 文件的工具（基本上运行 Java 程序）

**JVM** - 将*.class 文件**编译**为可执行机器代码的工具（运行所有 Java 字节码）

OpenJDK 只是 Java JDK 的一个发行版。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2022-01-15T19:25:37.373

用于说明 JDK、JRE、JDK 的简单图像。[![JDK、JRE、JVM](../Images/181d7a0cb81ff9d775a0f2515930a4ae.png)](https://i.stack.imgur.com/aNJNs.png)

**JDK**通常，它只会安装在开发设置中，例如开发人员、公司公司的实时 QA 系统。在服务器中运行的原始代码将没有 JDK。

**JRE**是 JDK 的一部分，也可以独立安装在服务器中。在为用户请求提供服务的实时服务器中，将仅安装 JRE 和开发人员开发的代码（*.class 格式）

**JVM** Developer 开发代码 > 在开发机器中测试和执行。执行阶段需要 Java 的媒介。

**.class 文件不是本机代码**（cpu 可以理解的代码）。如果将.java文件直接转换为本机代码，就无法实现WO​​RA（Write Once Run Anywhere）的概念。

本机代码因操作系统而异。因此，Java 创建了一个名为 .class 的中间文件和一个名为**“JVM”**的神奇程序。它的 JVM 有责任将 .class 转换为本机代码。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2014-10-25T07:12:09.323

**JVM** Java 虚拟机，实际执行的是 java 字节码。它是JAVA平台上的执行块。它将字节码转换为机器码。

**JRE** Java Runtime Environment ，提供执行 Java 应用程序的最低要求；它由 Java 虚拟机 (JVM)、核心类和支持文件组成。

**JDK** Java Development Kit，它拥有开发应用软件的所有工具。它就像 JRE+JVM

**Open JDK** 是 Java 平台的免费和开源实现。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2015-02-11T15:40:12.103

用外行的话来说：- *JDK = JRE + 开发/调试工具*，其中 JDK 是我们使用 Java 的完整包，从创建编译到运行它。另一方面，JRE 只是运行代码（字节码）。

注意：- 无论我们是安装 JDK 还是 JRE，JVM 都会与这两个软件包捆绑在一起，而 JVM 是 JIT 编译器将字节码转换为机器特定代码的部分。

只需阅读有关[JDK、JRE、JVM 和 JIT的文章](http://www.ufthelp.com/2015/02/key-components-of-java.html)

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2016-08-24T11:49:56.050

**JDK**：你需要编写和运行java代码的完整包

**OpenJDK**：JDK 的独立实现，使其变得更好

**JVM**：将 Java 代码转换为字节码，并提供规范说明如何编译、加载、验证、检查错误和执行 Java 代码。

**JRE**：JVM的实现，一些Java库用于运行程序

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2017-04-21T16:20:07.103

**JRE**执行应用程序，但 JVM 逐行读取指令，因此它是解释器。

**JDK** =JRE+开发工具

**JRE** =JVM+库类

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2018-12-14T14:06:06.050

**JVM**简称 **Java Virtual Machine**，JVM是Java架构的主要组成部分。JVM 是用 C 编程语言编写的。Java 编译器为 JVM 生成字节码。JVM 读取字节码验证字节码并将代码与库链接。

**JRE**缩写为**Java Runtime Environment**。它在运行时提供环境。它是物理存在的。它包含 JVM + 库集（jar）+其他文件。

**JDK**缩写为 **Java Development Kit**。它是开发Java应用程序。还有调试和监控java应用程序。JDK包含JRE+开发工具(javac,java)

**OpenJDK** OpenJDK 是 sun JDK 的开源版本。Oracle JDK 是 Sun 的官方 JDK。

# java - GWT：在 Java 代码中捕获本机 JSNI 异常

> ID：11547460
> 
> 赞同：4
> 
> 时间：2012-07-18T17:56:18.403
> 
> 标签：java, javascript, exception, gwt, jsni

我在本地方法中有一些逻辑，它返回 sth 或 null - 它们都是有效且有意义的状态，我想在方法失败时抛出异常。由于它是本机 JSNI，我不知道该怎么做。

所以考虑方法：

```
public final native <T> T myNativeMethod() /*-{

    //..some code

    //in javascript you can throw anything, not only the exception object:
    throw "something"; 

}-*/; 
```

但是如何捕捉抛出的物体？

```
void test() {
    try {
        myNativeMethod();
    }
    catch(Throwable e) { // what to catch here???
    }
} 
```

是否有任何特殊的 Gwt 异常类型包装从 JSNI 抛出的“异常对象”？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T18:18:46.243

来自 gwt 文档：

> 在执行普通 Java 代码或 JSNI 方法中的 JavaScript 代码期间，可能会引发异常。当在 JSNI 方法中生成的异常向上传播调用堆栈并被 Java catch 块捕获时，抛出的 JavaScript 异常在被捕获时被包装为 JavaScriptException 对象。此包装器对象仅包含发生的 JavaScript 异常的类名和描述。推荐的做法是处理 JavaScript 代码中的 JavaScript 异常和 Java 代码中的 Java 异常。

这是完整的参考： http: [//www.gwtproject.org/doc/latest/DevGuideCodingBasicsJSNI.html#exceptions](http://www.gwtproject.org/doc/latest/DevGuideCodingBasicsJSNI.html#exceptions)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-30T07:44:23.550

至于丹尼尔·库尔卡的回答（和我的直觉；））。我的代码可能看起来像这样：

```
public final native <T> T myNativeMethod() throws JavaScriptException /*-{

    //..some code

    //in javascript you can throw anything it not just only exception object:
    throw "something"; 

    //or in another place of code
    throw "something else";

    //or:
    throw new (function WTF() {})();

}-*/;

void test() throws SomethingHappenedException, SomethingElseHappenedException, UnknownError {
    try {
        myNativeMethod();
    }
    catch(JavaScriptException e) { // what to catch here???

        final String name = e.getName(), description = e.toString(); 

        if(name.equalsIgnoreCase("string")) {

            if(description.equals("something")) {
                throw new SomethingHappenedException(); 
            }
            else if(description.equals("something else")) {
                throw new SomethingElseHappenedException(); 
            }
        }
        else if(name.equals("WTF")) {
            throw new UnknownError();
        }
    }
} 
```

# php - 使用 PHP 将多维数组插入数据库

> ID：11547461
> 
> 赞同：-2
> 
> 时间：2012-07-18T17:56:21.200
> 
> 标签：php, arrays, multidimensional-array

如何将此数组插入我的数据库？假设我已经有一个数据库？

```
<?php

if(isset($_POST['myname'], $_POST['myage'], $_POST['mygen']) === true){ 
```

> //这是我设置键和值的代码

```
$array = array($_POST['myname'], $_POST['myage'], $_POST['mygen']);

foreach ($array as $i => $values) {
    print "<pre>$i {\n";
    foreach ($values as $key => $value) {
        print "    $key => $value\n";
    }
    print "}\n</pre>";
}
}

?>
<html>
    <head>
    <script type="text/javascript" >
function CreateTextbox() 
```

> //我通过这段代码动态生成文本框

```
{
createTextbox.innerHTML = createTextbox.innerHTML +"Name: <input type='text' name='myname[]' /><br>"
+"Age: <input type='text' name='myage[]' /><br>"
+"Gender: <input type='text' name='mygen[]' /><br>" 
}
    </script>
    </head>
    <body> 
        <form action="" method="post">
            <div id="createTextbox"></div>
            <input type="button" value="clickHere" onClick="CreateTextbox()" />
            <input type="submit" value="Submit" name="submit" />
        </form>
    </body>
</html> 
```

请帮忙 ：（

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T19:35:12.807

您可能需要像这样计算传入的帖子数组中的元素数量

```
$data_count = count($_POST['myname']); 
```

您也可以考虑在这里添加一些错误处理来验证所有 post 数组的大小是否相同，但我会跳过它。

然后你想遍历数组并像这样进行数据库插入：

```
for ($i=0; $i<$data_count; $i++) {
    $name = $_POST['myname'][$i];
    $age = $_POST['myage'][$i];
    $gen = $_POST['mygen'][$i];
    // clean up data for DB insert here 
    // make DB insert
} 
```

请注意，我省略了用于清理数据和插入数据的实际代码，因为这超出了本讨论的范围。

# visual-c++ - OpenCL image2d_t 主要写零

> ID：11547462
> 
> 赞同：1
> 
> 时间：2012-07-18T17:56:22.860
> 
> 标签：visual-c++, opencl

我正在尝试使用 OpenCL 和 image2d_t 对象来加速图像卷积。当我注意到输出是全零的空白图像时，我将 OpenCL 内核简化为从输入读取并写入输出的基本操作（如下所示）。通过一点点调整，我可以将图像的一些分散像素写入输出图像。

我已经验证图像在 OpenCL 内核中调用 read_imageui() 之前是完整的。我使用 CommandQueue::enqueueWriteImage() 将图像写入 GPU 内存，并立即使用 CommandQueue::enqueueReadImage() 将其读回 CPU 内存中的全新缓冲区。此调用的结果与原始输入图像匹配。但是，当我在内核中使用 read_imageui() 检索像素时，绝大多数像素都设置为 0。

C++ 源代码：

```
int height = 112;
int width = 9216;
unsigned int numPixels = height * width;
unsigned int numInputBytes = numPixels * sizeof(uint16_t);
unsigned int numDuplicatedInputBytes = numInputBytes * 4;
unsigned int numOutputBytes = numPixels * sizeof(int32_t);

cl::size_t<3> origin;
origin.push_back(0);
origin.push_back(0);
origin.push_back(0);
cl::size_t<3> region;
region.push_back(width);
region.push_back(height);
region.push_back(1);

std::ifstream imageFile("hri_vis_scan.dat", std::ifstream::binary);
checkErr(imageFile.is_open() ? CL_SUCCESS : -1, "hri_vis_scan.dat");
uint16_t *image = new uint16_t[numPixels];
imageFile.read((char *) image, numInputBytes);
imageFile.close();

// duplicate our single channel image into all 4 channels for Image2D
cl_ushort4 *imageDuplicated = new cl_ushort4[numPixels];
for (int i = 0; i < numPixels; i++)
    for (int j = 0; j < 4; j++)
        imageDuplicated[i].s[j] = image[i];

cl::Buffer imageBufferOut(context, CL_MEM_WRITE_ONLY, numOutputBytes, NULL, &err);
checkErr(err, "Buffer::Buffer()");

cl::ImageFormat inFormat;
inFormat.image_channel_data_type = CL_UNSIGNED_INT16;
inFormat.image_channel_order = CL_RGBA;
cl::Image2D bufferIn(context, CL_MEM_READ_ONLY | CL_MEM_COPY_HOST_PTR, inFormat, width, height, 0, imageDuplicated, &err);
checkErr(err, "Image2D::Image2D()");

cl::ImageFormat outFormat;
outFormat.image_channel_data_type = CL_UNSIGNED_INT16;
outFormat.image_channel_order = CL_RGBA;
cl::Image2D bufferOut(context, CL_MEM_WRITE_ONLY, outFormat, width, height, 0, NULL, &err);
checkErr(err, "Image2D::Image2D()");

int32_t *imageResult = new int32_t[numPixels];
memset(imageResult, 0, numOutputBytes);

cl_int4 *imageResultDuplicated = new cl_int4[numPixels];
for (int i = 0; i < numPixels; i++)
    for (int j = 0; j < 4; j++)
        imageResultDuplicated[i].s[j] = 0;

std::ifstream kernelFile("convolutionKernel.cl");
checkErr(kernelFile.is_open() ? CL_SUCCESS : -1, "convolutionKernel.cl");
std::string imageProg(std::istreambuf_iterator<char>(kernelFile), (std::istreambuf_iterator<char>()));
cl::Program::Sources imageSource(1, std::make_pair(imageProg.c_str(), imageProg.length() + 1));
cl::Program imageProgram(context, imageSource);
err = imageProgram.build(devices, "");
checkErr(err, "Program::build()");

cl::Kernel basic(imageProgram, "basic", &err);
checkErr(err, "Kernel::Kernel()");

basic.setArg(0, bufferIn);
basic.setArg(1, bufferOut);
basic.setArg(2, imageBufferOut);

queue.finish();

cl_ushort4 *imageDuplicatedTest = new cl_ushort4[numPixels];
for (int i = 0; i < numPixels; i++)
{
    imageDuplicatedTest[i].s[0] = 0;
    imageDuplicatedTest[i].s[1] = 0;
    imageDuplicatedTest[i].s[2] = 0;
    imageDuplicatedTest[i].s[3] = 0;
}
double gpuTimer = clock();

err = queue.enqueueReadImage(bufferIn, CL_FALSE, origin, region, 0, 0, imageDuplicatedTest, NULL, NULL);
checkErr(err, "CommandQueue::enqueueReadImage()");

// Output from above matches input image

err = queue.enqueueNDRangeKernel(basic, cl::NullRange, cl::NDRange(height, width), cl::NDRange(1, 1), NULL, NULL);
checkErr(err, "CommandQueue::enqueueNDRangeKernel()");

queue.flush();

err = queue.enqueueReadImage(bufferOut, CL_TRUE, origin, region, 0, 0, imageResultDuplicated, NULL, NULL);
checkErr(err, "CommandQueue::enqueueReadImage()");

queue.flush();

err = queue.enqueueReadBuffer(imageBufferOut, CL_TRUE, 0, numOutputBytes, imageResult, NULL, NULL);
checkErr(err, "CommandQueue::enqueueReadBuffer()");

queue.finish(); 
```

OpenCL 内核：

```
__kernel void basic(__read_only image2d_t input, __write_only image2d_t output, __global int *result)
{
const sampler_t smp = CLK_NORMALIZED_COORDS_TRUE | //Natural coordinates
     CLK_ADDRESS_NONE | //Clamp to zeros
     CLK_FILTER_NEAREST; //Don't interpolate

int2 coord = (get_global_id(1), get_global_id(0));

uint4 pixel = read_imageui(input, smp, coord);
result[coord.s0 + coord.s1 * 9216] = pixel.s0;
write_imageui(output, coord, pixel);
} 
```

内核中的坐标当前映射到 (x, y) = (width, height)。

输入图像是单通道灰度图像，每像素 16 位，这就是为什么我必须复制通道以适应 OpenCL 的 Image2D。卷积后的输出将为每像素 32 位，这就是为什么将 numOutputBytes 设置为该值的原因。另外，虽然宽度和高度看起来很奇怪，但输入图像的尺寸是 9216x7824，所以我只取其中的一部分先测试代码，所以它不会永远花费。

从内核中的图像读取后，我添加了对全局内存的写入，以查看问题是读取图像还是写入图像。内核执行后，这部分全局内存也主要包含零。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T19:15:49.653

[read_imageui](http://www.khronos.org/registry/cl/sdk/1.0/docs/man/xhtml/read_imagei2d.html)的文档指出

> 此外，采用整数坐标的 read_imagei 和 read_imageui 调用必须使用标准化坐标设置为**CLK_NORMALIZED_COORDS_FALSE**且寻址模式设置为**CLK_ADDRESS_CLAMP_TO_EDGE、CLK_ADDRESS_CLAMP 或 CLK_ADDRESS_NONE**的采样器；否则返回的值是未定义的。

但是您正在使用 CLK_NORMALIZED_COORDS_TRUE 创建一个采样器（但似乎传递了非标准化坐标 :S ？）。

# coldfusion - 在 IE 9 和 Firefox 13 中被忽略的内容配置

> ID：11547469
> 
> 赞同：5
> 
> 时间：2012-07-18T17:56:34.130
> 
> 标签：coldfusion, coldfusion-9, cfdocument

我正在尝试动态创建一个内联 PDF，当用户选择保存它时，会提示我的自定义文件名。根据[文档](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7c21.html)，该`saveasname`属性应该做我想要的。

> （仅 format="PDF"）当用户保存写入浏览器的 PDF 文件时出现在“另存为”对话框中的文件名。

但是，在 IE 9 和 Firefox 13.0.1 中发生的情况是，SaveAs 对话框中显示的文件名与我的 CF 模板相同，但具有 PDF 扩展名。（换句话说，我的代码在`makepdf.cfm`其中，并且 SaveAs 提示我保存`makepdf.pdf`。）但是，在 Chrome 中，它可以完美运行。（全部在 Windows 7 上。）

这是我创建 PDF 的代码：

```
<cfdocument format="pdf" bookmark="true" saveasname="MyReport.pdf"> 
```

如果我明确声明内容处置和内容类型，就像这样

```
<cfheader name="Content-Disposition" value="inline; filename=MyReport.pdf">
<cfcontent type="application/x-pdf">
<cfdocument format="pdf" bookmark="true" saveasname="MyReport.pdf"> 
```

*   Chrome 告诉我“Content-Disposition”已经被声明了两次
*   Firefox 告诉我 PDF 文件已损坏
*   IE 只是忽略它（并且仍然没有显示正确的文件名）

如果我只依赖标题

```
<cfheader name="Content-Disposition" value="inline; filename=MyReport.pdf">
<cfcontent type="application/x-pdf">
<cfdocument format="pdf" bookmark="true"> 
```

我得到与第一段代码相同的行为。

我知道如何让浏览器提示下载而不是显示内联，然后一切都按预期工作，但这不是所需的行为。

我需要在文件名中使用时间和日期，而最终用户不够精明，无法避免覆盖他们的文件（如果他们选择保存它们）。

有什么我遗漏的东西可以让 IE 和 Firefox 做他们应该做的事情吗？其他浏览器会这样做吗？移动Safari？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T09:12:09.940

问题似乎是“filename=xxx”实际上是为“附件”配置而设计的，并不是所有的浏览器 PDF 插件都将其识别为指定内联“另存为”的机制，正如您所发现的那样。

让他们都使用您的首选文件名的另一种方法是使用 Web 服务器重写规则来操作 URL。作为一个简单的示例，您将拥有用于生成 pdf 并内联提供它们的脚本：**pdf.cfm**

```
<cfheader name="Content-Disposition" value="inline">
<cfdocument format="PDF" mimetype="application/pdf">Test</cfdocument> 
```

**然后创建一个匹配/pdf/myfilename**形式的 URL 的重写规则，并将它们传递给**pdf.cfm**。在 IIS7 上，这可能是：

```
<rule name="Inline PDF SaveAs" stopProcessing="true">
    <match url="^/pdf/[\w-]+$" ignoreCase="true" />
    <action type="Rewrite" url="/pdf.cfm" appendQueryString="false" />
</rule> 
```

这将匹配仅包含字母数字、下划线和连字符的文件名。您不希望允许空格或无效的文件名字符。

当您访问**/pdf/myreport**时，PDF 将由插件内联显示，当您保存它时，默认文件名将是**myreport.pdf**。

如果您使用的是支持搜索引擎安全 URL 或“路由”的框架，您可以在不需要 Web 服务器重写的情况下执行相同的操作。

更新：实际上您不需要使用 URL 重写：只需将正斜杠和所需的文件名附加到 CF 脚本 URL，例如

**/pdf.cfm/myreport**

该插件将使用最后一个斜杠之后的任何内容作为“另存为...”名称。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-19T15:36:51.133

确保使用 ATTACHMENT 而不是 INLINE。

IE 不喜欢 INLINE 并且会以只读方式打开一个 word 文档，并且不会假设您给它的文件名。

例子：

```
<cfheader name="content-disposition" value="attachment; filename=#filename#.doc" charset="utf-8"> 
```

不是

```
<cfheader name="content-disposition" value="inline; filename=#filename#.doc" charset="utf-8"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T15:07:07.283

我会使用标签的`name`属性，`cfdocument`它将内容存储在变量中。然后像上面一样使用`cfheader`and`cfcontent`标记，除了替换“inline;”。带有“附件”；

我使用这样的代码：

```
<cfdocument name="pdf"> ... </cfdocument>
<cfheader name="Content-Disposition" value="attachment;filename=MyReport.pdf;" />
<cfcontent type="application/pdf" variable="#pdf#" /> 
```

# c# - JSIL vs Script# vs SharpKit

> ID：11547471
> 
> 赞同：20
> 
> 时间：2012-07-18T17:56:43.057
> 
> 标签：c#, javascript, .net, asp.net-mvc

我正在将 Script#、JSIL 和 SharpKit 作为用于将 C# 编译为 Javascript 的工具，因此我可以在 Visual Studio 中使用 C# 对 AJAX 的客户端功能进行编程。

每个 JSIL、Script# 和 SharpKit 的优缺点是什么？

我的项目是一个使用 razor 引擎和 C# 的 MVC4 项目，如果重要的话。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-19T06:58:01.877

如果您希望直接与 MVC 项目集成，那么像 Script# 或 SharpKit 之类的东西可能是您最好的选择 - 我知道 Script# 有内置的东西可以使这种集成更容易，所以我会从那里开始。

如果您确实想尝试使用 JSIL，它可能具有您需要的核心功能，但您可能想要的东西 - 如 Visual Studio 集成、自动部署等 - 不存在。目前它主要针对应用程序的交叉编译，所以它在这方面做得很好，但在其他用例方面做得不好。

我将尝试总结您可能想要考虑 JSIL 而不是其他替代方案的原因 - 我无法深入评论这些替代方案的优缺点，因为我没有使用它们：

* * *

JSIL 对 C# 4 中可用的功能提供了极其广泛的支持。值得注意的（因为其他工具不支持它们，或者它们很复杂）包括：

[**dynamic**](https://github.com/kevingadd/JSIL/blob/master/Tests/TestCases/DynamicGenericMethods.cs)、 [**yield**](https://github.com/kevingadd/JSIL/blob/master/Tests/TestCases/YieldReturn.cs)、 [Structs](https://github.com/kevingadd/JSIL/blob/master/Tests/AnalysisTestCases/MutateNestedStruct.cs)、 [**ref** / **out**](https://github.com/kevingadd/JSIL/blob/master/Tests/SimpleTestCases/MemberRefParameters.cs)、 [Delegates](https://github.com/kevingadd/JSIL/blob/master/Tests/TestCases/DelegatesReturningDelegates.cs)、 [Generics](https://github.com/kevingadd/JSIL/blob/master/Tests/TestCases/GenericParameterNameShadowing.cs)、 [Nullables](https://github.com/kevingadd/JSIL/blob/master/Tests/TestCases/NullableArithmetic.cs)、 [Interfaces](https://github.com/kevingadd/JSIL/blob/master/Tests/SimpleTestCases/InheritedInterfaces.cs)和[Enums](https://github.com/kevingadd/JSIL/blob/master/Tests/TestCases/EnumArrayLookup.cs)。

当然，上面的一些内容没有*完全*的支持——要了解绝对可行的东西，你可以[查看测试用例](https://github.com/kevingadd/JSIL/tree/master/Tests)——每个都是一个小的独立的 .cs 文件，经过测试以确保JSIL 和本机 C# 产生相同的输出。

这种广泛支持的原因是我的目标是让 JSIL 使您能够将*完全未修改*的C# 应用程序转换为工作 JS。对于 JSIL 网站上的所有演示，这是真的，而且我还有一些即将完成的大型真实游戏的移植，这也是真的。

* * *

另一个原因是 JSIL 使您的 C# 和 JavaScript 对话变得相对简单。

您的所有 C# 类型和方法都通过一个尽可能对 javascript 友好的接口公开。JS 版本具有基本的重载解析和分派，因此本机 C# 接口可以从脚本代码调用，就像在大多数情况下它们是本机 JS 一样。除非您愿意，否则您不必采取任何步骤来专门标记您希望公开给 JS 的方法，或者给它们特殊的名称，或类似的东西。

当您想从 C# 调用到 JS 时，可以通过以下几种方式进行：

*   [JSIL.Verbatim.Expression](https://github.com/kevingadd/JSIL/blob/master/Tests/SpecialTestCases/Verbatim.cs)允许您将原始 javascript 直接插入到函数的翻译版本中。
*   [JSIL.Builtins.Global](http://jsil.org/try/#2508547)可以与**dynamic**和**var**结合使用，直接在 C# 函数体中编写类似 JavaScript 的代码。
*   [JSReplacement 属性](https://github.com/kevingadd/JSIL/blob/master/Proxies/String.cs#L183)可用于将 C# 函数的调用替换为参数化的 JavaScript 表达式。
*   以上所有功能都可以与 JSIL 的更改类型信息的机制（称为代理）结合使用，即使您没有源代码，也可以更改您使用的库的类型信息，以便将它们的方法映射到 JavaScript你写过。
*   最后，未转换为 JS 的 C# 方法会生成一个名为 External 的空方法，然后您可以在运行时将其替换为 JavaScript 以使其再次工作。您尚未替换的任何外部方法都会在运行时产生清晰的警告消息，以便您知道缺少什么。

* * *

JSIL 积极使用类型信息以及您提供的元数据，以尝试并安全地优化它为您生成的 JavaScript。在某些情况下，这可以产生比您手工编写的更好的等效 JavaScript - 目前主要的领域是使用结构的代码，但它也可以应用于其他情况。

例如，[在这个代码片段](https://github.com/kevingadd/JSIL/blob/master/Tests/AnalysisTestCases/PureStructOperator.cs)中，JSIL 能够静态地确定，尽管代码*暗示*了结构副本的数量，但实际上没有一个副本对于代码的正确运行是必需的。[生成的 JavaScript](https://gist.github.com/2136227#file_struct_copy_elimination.js)最终没有任何不必要的副本，因此它的运行速度比您天真地翻译原始 C# 的语义所得到的要快得多。这是编写简单的基于结构的东西（Vector2s 无处不在！）和[完全疯狂地手动进行命名返回值优化](https://github.com/toji/gl-matrix/)之间的一个很好的中间地带，[正如我过去所描述的那样，这很容易出错](http://www.altdevblogaday.com/2011/06/18/performance-challenges-in-compiling-code-to-javascript/)。

* * *

好的，现在来说一些缺点。不要认为此列表详尽无遗：

*   .NET BCL 的大部分没有 JSIL 为您提供的实现。将来，这可能会通过将整个 Mono mscorlib 转换为 JavaScript 来解决，但我没有足够好的工作来提倡它作为一个直接的解决方案。（到目前为止，这对游戏来说很好，因为它们不使用太多 BCL。）这个问题主要是由于与翻译 Microsoft 的 mscorlib 相关的 IP 问题 - 如果我能合法地这样做，我会做对的现在 - 我上次测试它时它工作了。
*   如上所述，没有视觉工作室集成。JSIL*很*容易使用——你可以给它一个 .sln 文件来自动获得一堆 .js 输出，并使用项目旁边的配置文件自动配置它——但它远没有脚本那么完善或集成#.
*   没有供应商或支持人员。如果您想在昨天修复错误或遇到问题，我几乎是您目前唯一的选择（尽管有一些多产的贡献者帮助改善事情，而且总是欢迎更多！）
*   JavaScript 性能是一个充满隐形地雷的该死迷宫。如果你只是想让应用程序工作，你可能不会有任何问题，但如果你像我一样试图让*真正的游戏*在浏览器中快速运行，[JavaScript 会让你的生活变得更糟，在某些情况下，JSIL 会让情况变得更糟](https://github.com/kevingadd/JSIL/wiki/JavaScript-Performance-For-Madmen). 我在这里唯一能说的就是我正在努力。:)
*   明确不支持像 Closure 这样的 JavaScript 压缩器和优化器，因为它们需要您的代码生成器跳过一堆麻烦。根据您打算如何使用代码，我可以看到这是一个真正的障碍。
*   静态分析器仍然有点脆弱，在语言支持方面仍然存在差距。我使用 JSIL 移植的每个大型应用程序通常都会揭示 JSIL 中的一两个错误 - 不是严重的游戏破坏者，而是肯定会破坏功能或使事情运行缓慢的错误。

希望这些信息有帮助！感谢您的关注。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-18T19:17:20.137

脚本#优点：

*   自由的
*   开源
*   生成干净的 JavaScript

脚本# 缺点：

*   仅支持 C# 2.0 语言的子集
*   只能在单独的项目中编译，不能在客户端和服务器之间混合/重用代码
*   版本更新频率低
*   不提供支持
*   有限的第 3 方库支持，C# API 与 JavaScript API 不同。
*   不开源
*   仅在 JavaScript 中调试

SharpKit 优点：

*   商业产品
*   支持完整的 C# 4.0 语言
*   版本更新频率高
*   支持可用
*   客户端/服务器代码可以在同一个项目中混合和重用
*   广泛的 3rd 方库支持，作为开源维护 - C# API 与 JavaScript API 完全匹配
*   支持 Chrome 浏览器的基本 C# 调试
*   生成干净的 JavaScript

SharpKit 缺点：

*   有免费版本，没有时间限制，但仅限于小型/开源项目
*   非开源（只有库是开源的）

JSIL 优点：

*   自由的
*   开源

JSIL 缺点：

*   从 IL（中间语言）转换，而不是从 C# 转换，这意味着较低的抽象层，因为代码已经是低级的。
*   生成复杂的 JavaScript 代码 - 几乎像 IL，难以阅读和调试

对反馈的答复：

Kevin：JSIL 输出还*不错*，它只是为了实现完整的 .NET 行为而生成的，很像 SharpKit 的 CLR 模式。另一方面，SharpKit 支持*本机*代码生成，其中任何本机 JavaScript 代码都可以从 C# 生成，就像手写一样。

SharpKit 干净生成的 JavaScript 代码示例： [http ://sharpkit.net/Wiki/Using_SharpKit.wiki](http://sharpkit.net/Wiki/Using_SharpKit.wiki)

开发人员可以选择创建更复杂的代码生成并获得更多功能，例如支持编译时方法重载。指定时，SharpKit 为重载方法生成方法后缀。

Script# 需要 .NET 4 才能运行，但它不支持完整的 C# 4.0 语法，如泛型、ref 和 out 参数、命名空间别名等...

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-02-05T15:22:55.947

另一种选择是[WootzJs](https://github.com/kswoll/WootzJs/)。完全披露，我是它的作者。

WootzJs 是开源的，并致力于成为一个相当轻量级的交叉编译器，它允许所有主要的 C# 语言功能。

**支持的显着语言功能：**

*   `yield`语句（作为高效状态机生成）
*   `async/await`方法（生成为像 C# 编译器一样的状态机）
*   `ref`和`out`参数
*   表达树
*   lambdas 和代表（正确捕获`this`）
*   编译器和运行时都支持泛型（无效转换为`T`将引发转换异常）
*   封闭变量的 C# 语义（相对于 Javascript 语义）

它是使用 Roslyn 实现的，这意味着它将率先利用未来的语言改进，因为这些现在将通过 Roslyn 本身实现。它提供了一个自定义版本，`mscorlib`因此您可以准确了解脚本中实际可用的库功能。

**它的缺点是什么？**

*   Javascript 并不是为了看起来“漂亮”。它显然是机器生成的，尽管通过查看单个方法应该很容易推理出来。
*   由于其对核心库和反射的广泛支持，生成的输出并不是块上最小的。缩小应该产生一个 ~100k 的 JS 文件，但还不支持缩小。
*   WootzJs 毫不掩饰地使用函数来污染本机类型，以封装那些只能在 C# 中找到的类型的行为。例如，所有的方法`System.String`都添加到原生 Javascript`String`类型中。
*   目前很少支持绑定到 3rd-party Javascript 库。（目前只有 jQuery）

**与其他交叉编译器的比较：**

*   **Script#**非常稳定，并与 3rd 方 Javascript 库广泛集成。此外，它具有出色的 Visual Studio 集成，并提供了`mscorlib`. 这意味着您可以准确地知道在工具级别实际实现了哪些功能。例如，如果`Console.Write()`未实现，则该方法在您的编辑器中将不可用。

    但是，由于它的自定义解析器，它仍然停留在 C# 2.0 中（甚至没有在该版本的 C# 中找到的泛型）。这意味着现代 C# 开发人员正在放弃我们大多数人毫无保留地依赖的*大量语言特性——尤其是除了 lambda 和 LINQ 之外的上述泛型。*这使得 Script# 对于许多开发人员来说基本上是一个非入门者。

*   **JSIL**是一项*非常*令人印象深刻的工作，它将 IL 交叉编译成 Javascript。它非常强大，可以轻松处理大型 3D 视频游戏的交叉编译。缺点是由于其完整性，生成的 Javascript 文件非常*庞大*。如果您只需要 mscorlib.dll 和 System.dll，则下载量约为 50MB。此外，这个项目实际上并不是为在 Web 应用程序的上下文中使用而设计的，而且开始所需的工作量有点令人生畏。

    这个工具包也实现了一个 custom `mscorlib`，再次让您知道您可以使用哪些功能。但是，它的 Visual Studio 集成很差，迫使您创建调用编译器所需的所有自定义构建步骤并将输出复制到所需位置。

*   **SharpKit**：这个商业产品致力于为大多数 C# 4.0 语言特性提供支持。它通常会成功，并且该产品很有可能满足您的需求。它是轻量级的（小的 .JS 文件），支持现代 C# 语言功能（泛型、LINQ 等）并且通常是可靠的。它还为 3rd 方 Javascript 库提供了大量绑定。但是，您总是会遇到数量惊人的不受支持的边缘情况。

    例如，类型系统很浅，不支持表示泛型或数组（即`typeof(Foo[]) == typeof(Bar[])`，`typeof(List<string>) == typeof(List<int>)`）。对反射的支持有限，各种成员类型无法支持属性。表达式树支持不存在，yield 实现效率低下（没有状态机）。此外，自定义`mscorlib`不可用，脚本 C# 文件和普通 C# 文件混合在您的项目中，迫使您使用属性装饰每个脚本文件，`[JsType]`以将它们与正常编译的类区分开来。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-02-20T07:45:02.960

We have SharpKit for two years and I must say that's upgraded the way we write code. The pros as I see them:

*   The code is much more structured - we can now developed infrastrcture just like we did in C# without "banging our heads" with prototype.
*   It is very easy to refactor
*   We can use Code Snippets which results in better productivity and less development time
*   You can control the way the JS is rendered (you have several modes to choose from).
*   We can debug our C# code in the browser (Currently supported on Chrome only, but still :->)
*   Great support! If you send them a query you get a response very fast.
*   Support a large number of libraries & easily extensible

The cons:

*   The documentation is a bit poor, however once you get a hang of it you'll boost your development.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-18T18:02:54.150

很高兴这能有所帮助！

对于 ScriptSharp，这个 stackoverflow 链接可能会有所帮助。
[ScriptSharp 能为我的工具包带来哪些优势？](https://stackoverflow.com/questions/788933/what-advantages-can-scriptsharp-bring-to-my-tool-kit)

如果您有任何 SVN 工具，请从[https://github.com/kevingadd/JSIL](https://github.com/kevingadd/JSIL)下载示例，这是一个有效的源代码，可以帮助您走好几步。

# mysql - 包含文本的mysql查询列

> ID：11547475
> 
> 赞同：-1
> 
> 时间：2012-07-18T17:56:55.200
> 
> 标签：mysql

我正在使用的 mysql 表如下所示：

```
 id    |   name  | other_names  
 ---------------------------------
    1    |  john   | peter johny mike
    2    |  jane   | kevin pite janes john
    3    |  carl   | carlo nick pole 
```

我想作为每个用户的查询 id# 的结果，在表“other_names”中包含以查询中的单词开头的名称。例如，如果查询中的单词是“joh”，则需要获取结果 ID 1 和 2。

我尝试使用包含 LIKE %joh% 的查询，但结果我得到每个用户 ID#，“其他名称”列的名称包含查询中的单词。

```
SELECT * FROM table WHERE name LIKE  '".$word."%' OR other_names LIKE '%".$word."%' 
```

我需要列“other_names”中的名称以查询中的单词开头，而不是包含该单词。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T18:01:03.043

`%`从查询中删除前导

```
SELECT * FROM table 
WHERE other_names LIKE '".$word."%' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T18:01:43.843

您需要[REGEXP](http://dev.mysql.com/doc/refman/5.5/en/regexp.html)运算符和边框关键字

```
SELECT * FROM table WHERE name REGEXP '[:<:]]someword' 
```

# html - 单独的表格一起呈现

> ID：11547480
> 
> 赞同：0
> 
> 时间：2012-07-18T17:57:28.890
> 
> 标签：html, html-table, alignment

是否可以在 HTML 中让两个单独的表格的列对齐？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:59:57.983

您可以为`<td>`两者上的元素设置宽度并使其`overflow: hidden`大于宽度的东西不会改变它。

就像是：

```
td {
   width: 50px;
   max-width: 50px;
   overflow: hidden;
   white-space: nowrap;
} 
```

[如此处](http://jsfiddle.net/H3327/)所见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T18:03:17.300

您可以从以完全相同的方式设置列的宽度（无论您使用什么技术）开始，然后`table-layout: fixed`在两个表上进行设置。仍然存在单元格内容强制宽度变得不同的情况，但通常这应该足够了。

# c# - 基于用户角色使用表单身份验证的任何简单方法？

> ID：11547489
> 
> 赞同：1
> 
> 时间：2012-07-18T17:58:35.923
> 
> 标签：c#, asp.net, forms-authentication

我想为客户做一个应用程序。它应该包含：

*   1.登录页面
*   2.简单用户的页面
*   3.管理员页面

我在 google 上找到了很多示例，但 90% 的示例有 20 多页，其中包含许多高级内容，我无法从它们中阅读所有内容。

我只想制作一个简单的登录页面，并将“用户角色”用于重定向用户的页面，将“管理员角色”用于重定向管理员的页面。

当我完成该页面时，我将在虚拟主机上公开它，主要问题是我需要用户角色，密码，名称在 asp 的数据库中而不是在网站上。

有什么简单的例子可以效仿吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T18:01:41.913

很长一段时间以来，我都遇到了同样的问题-大多数示例都让您创建了具有疯狂数量的表的默认架构。

我发现的最简单的例子是：

[如何：实现简单表单身份验证](http://msdn.microsoft.com/en-us/library/xdt4thhy.aspx)

它根本不处理持久层，因此根据您认为合适的方式进行调整非常简单。

# javascript - 进度条中的 Javascript 会话超时倒计时

> ID：11547490
> 
> 赞同：1
> 
> 时间：2012-07-18T17:58:38.403
> 
> 标签：javascript, jsp

我需要您的帮助以获取适当的代码，以在进度条或屏幕的任何部分显示会话超时的倒计时。

但是，应包括以下操作：

第一个警报：“您的会话到期前还有 5 分钟时间”单击此处继续您的会话。或点击此处退出

如果 5 分钟内没有任何操作，则将页面更改为显示“您的会话已过期”，并将重定向到 logout.jsp。

我试图找到好的例子，但我没有找到任何人。

任何人都可以帮助解决这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T18:10:45.077

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <title> New Document </title>
  <meta name="Generator" content="EditPlus">
  <meta name="Author" content="">
  <meta name="Keywords" content="">
  <meta name="Description" content="">
  <script type="text/javascript">
    var timeoutHandle = null;
    function startTimer(timeoutCount) {
        if (timeoutCount == 0) {
            window.location.href = 'logout.jsp';
        } else if (timeoutCount < 3) {
            document.getElementById('sessionTimer').innerHTML = 'You have ' + (timeoutCount * 3000)/1000 + 'seconds until timeout' ;
        }
        timeoutHandle = setTimeout(function () { startTimer(timeoutCount-1);}, '3000');
    }
    function refreshTimer() {
        killTimer(timeoutHandle);
        startTimer(3);
    }
  </script>
 </head>

 <body onload="startTimer(3)">
  <div id="sessionTimer"></div>
 </body>
</html> 
```

# sql - Rails - 在哪里存储带有进入数据库的数据的 sql 文件

> ID：11547493
> 
> 赞同：2
> 
> 时间：2012-07-18T17:58:44.333
> 
> 标签：sql, ruby-on-rails-3, convention

我已经使用种子文件生成需要进入数据库的数据，但是现在我需要将一些国家、省和城市生成到三个不同的表中，我一直无法找到一个好的方法将其放入数据库中种子。

但是我找到了一个包含所有这些信息的 sql 文件，我应该将其转储到数据库中。我的问题是：

作为约定，我应该将它存储在我的 Rails 文件夹中的什么位置？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T19:29:59.513

我会在 db/seeds 中创建一个目录，并将该种子文件以及您可能拥有的任何其他文件放在其中。

# ruby-on-rails - 如何将 " 替换为空格或删除第一个和最后一个符号？

> ID：11547494
> 
> 赞同：0
> 
> 时间：2012-07-18T17:58:44.353
> 
> 标签：ruby-on-rails, string, character

我得到 xml 数据并从中获得价值。

我需要删除符号 [ 和 ]

这是我的代码，它给了我关于未定义变量的错误：

```
 @xml = XmlSimple.xml_in(res.content)//here I get xml document
         payKey = @xml["payKey"]//gere I get needed value
         //it looks like "[some character]" so I need to delete [ and ]
         //I tried
         payKey = @xml["payKey"].to_s()//to use tr method
         payKey = payKey.tr("[]", "")//replacing
        redirect_to "https://svcs.sandbox.paypal.com/AdaptivePayments/Pay?cmd=_ap-payment&paykey=#{paykey}"//inserting into url 
```

结果：

```
 svcs.sandbox.paypal.com/AdaptivePayments/Pay?cmd=_ap-payment&paykey="AP-7NK73769LH704515X" 
```

所以我需要删除“标志。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T18:21:28.843

我愚蠢的回答

```
 payKey = payKey[1..20] 
```

# iphone - 为什么 UPDATE 语句适用于 initWithFormat 而不适用于 stringWithFormat？

> ID：11547500
> 
> 赞同：1
> 
> 时间：2012-07-18T17:59:06.143
> 
> 标签：iphone, ios, ipad, sqlite

正如我在这里所说的那样，我的 UPDATE 语句有问题：[使用 sqliteManager 更新问题](https://stackoverflow.com/questions/11541405/update-issue-with-sqlitemanager/)

我发现initWithFormat WORKS

```
NSString *sqlStr = [[NSString alloc] initWithFormat:@"UPDATE User SET Name = :Name WHERE Id = :Id"]; 
```

但不是 stringWithFormat：

```
 NSString* sqlStr = [NSString stringWithFormat:@"UPDATE User SET Name = :Name WHERE Id = :Id"]; 
```

为什么会这样？我想了解背后的逻辑/推理..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T18:05:55.557

我猜它与字符串的内存管理有关，它可能没有被充分保留，所以它在被使用之前被清理掉了。两种方法的区别在[这里定义](https://discussions.apple.com/thread/1690966?start=0&tstart=0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T08:22:37.437

我刚刚从这个线程中发现了一些有趣的东西：[How to refresh TableView Cell data during an NSTimer loop](https://stackoverflow.com/questions/5427196/how-to-refresh-tableview-cell-data-during-an-nstimer-loop)

我相信这就是背后的原因..

我引用“petergb”的话：

> **[NSString stringWithFormat:...]**返回一个自动释放的对象。在控制从程序代码返回到苹果提供的运行循环代码后，自动释放的对象被释放。它们或多或少是一种方便，因此我们不必在这里和那里释放我们使用一次或两次的所有小对象。（例如，想象一下如果您必须释放使用 @"" 语法创建的每个字符串会是多么乏味......）
> 
> 我们可以告诉**stringWithFormat**：返回一个自动释放的对象，因为按照惯例，名称不以 alloc 或 copy 开头的方法总是返回自动释放的对象。像这样的方法被称为“出售”一个对象。我们可以在不久的将来使用这些对象，但我们不“拥有”它（即，在我们将控制权交还给系统后，我们不能指望它存在。）如果我们想获得一个出售对象的所有权，我们必须在它上面调用 [object retain]，然后它会一直存在，直到我们显式调用 [object release] 或 [object autorelease]，如果我们在失去对它的引用之前不调用它的 release 或 autorelease通过将变量更改为其他内容，我们将泄漏它。
> 
> **与[[NSString alloc] initWithFormat:**对比。此方法“创建”一个对象。我们拥有它。同样，它会一直存在，直到我们明确调用 [object release]。

# java - 从本机代码调用 Java 代码？

> ID：11547501
> 
> 赞同：1
> 
> 时间：2012-07-18T17:59:06.603
> 
> 标签：java, android, c, android-ndk

我知道可以从 java 代码调用本机代码中的函数，但反之亦然呢？

我可以从本机 C 代码调用 Java 函数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-27T12:54:50.220

是的！您对[Java Native Interface](http://docs.oracle.com/javase/1.5.0/docs/guide/jni/spec/jniTOC.html)感兴趣。

# javascript - 多种模式 Codemirror

> ID：11547506
> 
> 赞同：4
> 
> 时间：2012-07-18T17:59:28.997
> 
> 标签：javascript, xml, json, textarea, codemirror

我希望我的 TextArea 能够支持多种 CodeMirror 模式。现在我希望它支持 json 和 xml。这可能吗？另外，是否可以自动检测用户是否在区域中放置了 json 或 xml？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T22:05:22.700

CodeMirror 实际上有一个非常接近您在[此处](http://codemirror.net/demo/changemode.html)寻找的示例。

这是一个更具体的示例，可以满足您的需求。

1.  创建一个 CodeMirror 实例。
2.  当内容发生变化时，我们决定是否应该切换模式。

我用于确定您处于哪种模式的逻辑非常简单，可以重构以支持您认为适合任何一种模式的强大检查。（如果你想花哨的话，Regex 非常适合进行复杂的检查......即使在我的简单示例中，这也是我使用它的唯一原因）目前，我的示例代码只检查第一个非空格字符为“< " 从而表示 xml 模式。当决定切换回来时，它只检查第一个非空格字符不是“<”并且它不是空白（以防用户刚刚删除所有内容以使用更多 xml 重新开始）。

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Code Mirror Example</title>
<script src="lib/codemirror.js"></script>
<link rel="stylesheet" href="lib/codemirror.css">
<script src="mode/javascript/javascript.js"></script>
<script src="mode/xml/xml.js"></script>
<style type="text/css">.CodeMirror{border:1px solid black;}</style>
</head>
<body>
    <div><span>Mode: </span><span id="modeType">JSON</span></div>
    <textarea class='codeEditor'></textarea>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript">
    function determineCodeMirrorType(cm)
    {
        if (cm.getMode().name == 'javascript')
        {
            checkAndSwitchToXML(cm, cm.getValue());
        }
        else if (cm.getMode().name == 'xml')
        {
            checkAndSwitchToJSON(cm, cm.getValue());
        }
    }

    function checkAndSwitchToXML(cm, val)
    {
        if (/^\s*</.test(val))
        {
            cm.setOption("mode", "xml");
            $('#modeType').html("XML");
        }
    }
    function checkAndSwitchToJSON(cm, val)
    {
        if (!/^\s*</.test(val) && val.match(/\S/))
        {
            cm.setOption("mode", "javascript");
            $('#modeType').html("JSON");
        }
    }

    function buildCMInstance(mode, value)
    {
        var cm = CodeMirror.fromTextArea($('.codeEditor')[0], {
            mode:mode,
            value:value,
            lineNumbers:true,
            onChange:function(cmInstance){
                determineCodeMirrorType(cmInstance);
            }
        });
        return cm;
    }
    $(document).ready(function(){
        //mode changing demo:  "http://codemirror.net/demo/changemode.html";
        var cm = buildCMInstance("javascript");
    });
    </script>
</body>
</html> 
```

# ios - 为 iOS 打包时找不到 lib

> ID：11547515
> 
> 赞同：2
> 
> 时间：2012-07-18T17:59:55.097
> 
> 标签：ios, air, air-native-extension

*() 中的数字，见文末链接*

我正在开发一个 Air Native Extension (ANE)，以便能够在移动设备上使用突发广告。

至于我的设置，我使用的是 FlashDevelop 4.0.4 和 Adob​​e Air 3.3。我正在使用 Flex 4.6.0 SDK。该项目是在 Windows7 上设置的。

为了在 iOS 设备上工作，Burstly 需要一些框架和库

我设法为 iOS 编写和编译 .a 库。我也有将被编译成 swc 和 librairy.swf 的 Android 和 iOS 共享的界面（actionscript 代码）。所有这些都成功打包到我的项目中包含的 .ane 中。

在 MacOS 上编译 .a 库时，使用的所有框架和库似乎都没有打包在“.a”中。这就是为什么我必须为 -platformsdk 选项 (1) 使用 Air 3.3。

由于我在 Windows 上工作，因此我按照本文中的说明获取了 iOS SDK (2)。

按照所需的框架和（1），我做了一个这样的platformConfig.xml文件，打包在.ane中

```
<platform xmlns="http://ns.adobe.com/air/extension/3.1">
    <sdkVersion>4.2</sdkVersion>
    <linkerOptions>
        <!-- to use the AssetsLibrary framework -->
        <option>-framework AssetsLibrary</option>
        <option>-framework AudioToolbox</option>
        <option>-framework AddressBook</option>
        <option>-framework AVFoundation</option>
        <option>-framework CFNetwork</option>
        <option>-framework CoreLocation</option>
        <option>-framework MapKit</option>
        <option>-framework MediaPlayer</option>
        <option>-framework MessageUI</option>
        <option>-framework OpenAL</option>
        <option>-framework OpenGLES</option>
        <option>-framework QuartzCore</option>
        <option>-framework StoreKit</option>
        <option>-framework SystemConfiguration</option>
        <option>-framework Foundation</option>
        <option>-framework CoreGraphics</option>
        <option>-libsqlite3</option>
        <option>-libxml2</option>
        <option>-libz</option>
    </linkerOptions>
</platform> 
```

这是编译实际 .ane 的行

```
call "%FLEX_SDK%\bin\adt" -package -target ane ../release/burstlyadsextension.ane extension.xml -swc burstlyAds.swc -platform iPhone-ARM library.swf libBurstlyAds.a -platformoptions platformConfig.xml 
```

当我尝试使用 ADT 打包 iOS 应用程序时出现问题：

```
call adt -package -target %TYPE%%TARGET% %OPTIONS% %SIGNING_OPTIONS% "%OUTPUT%" "%APP_XML%" %FILE_OR_DIR% -extdir lib/external/ -platformsdk ../Libraries/iPhoneOS5.0.sdk/ 
```

有时候是这样的：

“ld：未找到 -libsqlite3 的库 执行时编译失败：ld64”

框架似乎添加得很好，但 dylib 不是。我试图添加这一行：

```
<option>-L usr/lib/</option> 
```

在包含lib之前，但我收到了这个错误：

“ld：警告：找不到选项'-Lusr/lib/'的目录ld：找不到-libsqlite3的库执行时编译失败：ld64”

我尝试使用完整路径，其他相对路径，但无论我在选项中输入什么路径，我总是得到一个“警告：找不到选项的目录”。甚至“-L ../”也会给我这个警告。唯一似乎有效的是“-L /../”，但我的 .dylib 明显不存在。

所以我的问题是：我做错了什么？知道我还能尝试什么吗？即使解释为什么它不起作用也会有所帮助！

链接：

# 1：http: [//blogs.adobe.com/rajorshi/2011/11/16/ios5-support-for-airusing-external-sdks-to-package-apps/](http://blogs.adobe.com/rajorshi/2011/11/16/ios5-support-for-airusing-external-sdks-to-package-apps/)

# 2：http: [//blogs.adobe.com/airodynamics/2012/05/18/using-platformsdk-for-ios-on-windows/](http://blogs.adobe.com/airodynamics/2012/05/18/using-platformsdk-for-ios-on-windows/)

# php - 在实体之间创建关联 Doctrine 2

> ID：11547517
> 
> 赞同：0
> 
> 时间：2012-07-18T17:59:58.393
> 
> 标签：php, orm, doctrine, doctrine-orm

我正在尝试连接 2 个实体，但遇到了麻烦。我有两个类：用户和性别。每个用户都来自一种性别（男性或女性）。在我的数据库中，我有两个具有这种结构的表：

```
 user(**id**, firstName, gender);
 gender(**id**, type); 
```

现在我在我的系统中创建了两个实体。User.php 和 Gender.php

# 用户

```
<?php  

/**
 * @Entity @Table(name="User")
 **/

class User
{
/**
 * @Id @Column(type="integer") @GeneratedValue
 **/  
private $id;

 /**
 * @Column(type="string")
 **/
private $firstName;

 /**
 * @Column(type="string")
 * @ManyToOne(targetEntity="Gender")
 * @JoinColumn(name="type", referencedColumnName="type")
 * @var Gender[]
 **/
private $gender;

public function __construct($content) {
    $this->setContent($content);
}   

/**
 * @return int
 */
public function getId() {
    return $this->id;
}

/**
 * @return string
 */
public function getFirstName() {
    return $this->firstName;
}

  /**
 * @return int
 */
public function getGender() {
    return $this->gender;
}

/**
 * @param string $content
 */
public function setFirstName($content) {
    $this->firstName = (string) $content;
}

/**
 * @param string $content
 */
public function setGender($content) {
    $this->gender = (string) $content;
}

} 
```

# 性别

```
<?php  

/**
 * @Entity @Table(name="Gender")
 **/

class Gender
{
/**
 * @Id @Column(type="integer") @GeneratedValue
 **/  
private $id;

 /**
 * @OneToMany(targetEntity="User", inversedBy="gender")
 * @JoinColumn(name="gender", referencedColumnName="gender")
 * @Column(type="string")
 **/
private $type;

/**
 * @param integer $content
 * 
 */
public function getId() {
    return $this->id;
}

/**
 * @param string $content
 * 
 */
public function getType() {
    return $this->type;
}

/**
 * @param string $content
 */
public function setGender($content) {
    $this->gender = (string) $content;
}

} 
```

我想要的是在获得用户时获得性别类型，因此两个实体都必须通过性别类型属性连接。我曾尝试使用**@ManyToOne**或**@JoinColumn**功能这样做，但我无法获得它。

我该怎么做？我做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T07:40:27.543

可能是题外话，但性别表是无用的。您将永远只有 2 个（男性/女性），所以这样做没有意义。

您应该在 User 表中创建新列，type=integer 并使用 0/1 作为性别。使用常量，如

```
Class User
{
   const MALE=0 ;
   const FEMALE=1 ;

  .... ORM definition...

 public function isMale()
 {
     return $this->getGender() == self::MALE ;
 } 
```

在控制器中：

```
if ( !$user->isMale() ) {
    .... buy shoes ....
} else {
    .... buy beer ....
} 
```

或类似的。因为您只有 2 个选项，所以只需要一个函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T18:25:38.000

在用户类中替换它：

```
* @JoinColumn(name="type", referencedColumnName="type") 
```

接着就，随即 ：

```
 * @JoinColumn(name="gender", referencedColumnName="type") 
```

您的字段名称是性别，而不是在用户表中输入。

仅在 Gender 类中使用：

```
 * @OneToMany(targetEntity="User", mappedBy="gender") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T17:00:03.577

You have to join the gender relation if you want to get if from the query.

```
$dql = "SELECT a,g FROM user a LEFT JOIN a.gender g";
$query = $em->createQuery($dql);
$query->setMaxResults(30);
$users = $query->getResult(); 
```

# java - 更快的屏幕捕获方式（java）

> ID：11547518
> 
> 赞同：0
> 
> 时间：2012-07-18T18:00:02.310
> 
> 标签：java, screen, screenshot, capture

我发现`robot.createScreenCapture(rectangle)`屏幕捕获的方法非常慢。

我的目标是创建一个流畅的 GIF 动画，为了实现这一点，我需要捕获我的屏幕（每 10-30 毫秒大约 1 帧）。这样做的同时将缓冲图像保存为 JPEG 文件会大大降低我的小程序的速度。

我受够了，最终将所有缓冲图像存储到一个 ArrayList 中，然后一次保存它们（这次）；这并不奇怪 - 我的小程序在崩溃前冻结了 2 分钟......

我不介意外部程序/库是否可以更好地完成任务，如果您建议前者，我希望程序能够在运行时在 java 中执行。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:02:17.810

使用 JNA 访问操作系统的内部捕获方法（如 Windows 的 BitBlt）。

# mysql - 与我们网络上的其他机器共享 MySQL 数据库时遇到问题

> ID：11547519
> 
> 赞同：0
> 
> 时间：2012-07-18T18:00:05.900
> 
> 标签：mysql, networking, mamp

我一直试图在我们的内部网络中共享一个 MySQL 数据库，但我没有让它工作。我正在使用 MAMP。我已经编辑了 my.cnf 模板并注释掉了 bind-address 行，所以它看起来像这样：`#bind-address = 127.0.0.1`

托管 MySQL 数据库的机器的 IP 是 192.168.0.152。当我在通过 PHP 建立 MySQL 连接时输入此 IP 时，出现以下错误：

```
Can't connect to MySQL server on '192.168.0.152' (61) 
```

显然我在某处错过了一步。我还需要做什么？

# ios5.1 - 文本字段 - 动作和出口

> ID：11547521
> 
> 赞同：0
> 
> 时间：2012-07-18T18:00:29.123
> 
> 标签：ios5.1

可以将相同的文本字段设置为“操作”和“出口”吗？

我正在尝试使用触摸操作来 Segue 到 DatePicker 和插座以在同一文本字段中捕获结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T18:15:01.650

是的。但要小心无限循环。如果 textFieldA 的 action 方法是 actionA，而 actionA 设置了 textFieldA 的值，则可以锁定进程。

# c# - 识别 Dokan 文件系统上的 Office 文件写入操作

> ID：11547522
> 
> 赞同：0
> 
> 时间：2012-07-18T18:00:32.740
> 
> 标签：c#, .net, excel, ms-word, dokan

我使用 dokan 作为文件系统，不知道如何识别 office 文件写入操作。特别是锁定和临时文件。我必须识别它们，因为只有主文件必须上传到外部数据库。

从理论上讲，我得到了办公室的话，但这更像是一种解决方法。我希望有一个特殊的属性来识别临时文件。

问候克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:23:01.650

您可以检查 ProccessId 以查看其 Office 的进程。检查文件名是否与临时文件匹配。某些 Office 版本使用 FILE_FLAG_TEMPORARY 调用 CreateFile，稍后在 SetAttributes 中对其进行设置。最好的方法是延迟文件上传直到清理，即使这样你也可以添加一个计时器在几秒钟后上传它。（不确定，但我想我记得 OpenOffice 会关闭临时文件，然后再次打开它以调用 MoveFile）。希望能帮助到你。

# c# - 将对象添加到另一个列表？

> ID：11547523
> 
> 赞同：-1
> 
> 时间：2012-07-18T18:00:34.567
> 
> 标签：c#

我想知道是否可以像这样将一个列表中的对象添加到另一个列表中：

```
objectToRemoveList.Add(listOfObjects.ElementAt(i)); 
```

然后，我想删除列表中的所有对象，如下所示：

```
objectToRemoveList.Clear(); 
```

我想知道，因为对象似乎还在那里！？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T18:05:28.370

那是行不通的。让我以图形的方式解释它。您的对象存在于内存中的某处：

```
 a     b     c     d 
```

您的列表`listOfObjects`仅包含对以下每个对象的**引用：**

```
listOfObjects:  |     |     |     |     
                |     |     |     |     
                v     v     v     v     
                a     b     c     d 
```

如果您将其中一些项目（比如说`b`and `d`）添加到`objectToRemoveList`，您也**只是添加了一个参考**：

```
listOfObjects:  |     |     |     |     
                |     |     |     |     
                v     v     v     v     
                a     b     c     d
                      ^           ^
                      |           |
objToRemoveLst:       |           | 
```

通过执行`objectToRemoveList.Clear`，您只是删除了那里的所有引用。请注意如何`listOfObjects`完全不受影响：

```
listOfObjects:  |     |     |     |     
                |     |     |     |     
                v     v     v     v     
                a     b     c     d

objToRemoveLst: 
```

* * *

要实现您想要做的，您可以使用以下循环：

```
foreach (object o in objectToRemoveList) {
    listOfObjects.Remove(o);
} 
```

这样，引用实际上是从 中删除的`listOfObjects`，这就是您想要的：

```
listOfObjects:  |           |           
                |           |           
                v           v           
                a     b     c     d
                      ^           ^
                      |           |
objToRemoveLst:       |           | 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T18:08:17.993

是的，原始列表中的对象将保持不变，因为您要在索引 i 处添加项目的引用。如果您有值类型，那么它将创建一个副本。

`listOfObjects.RemoveAt(i)`如果您想从原始列表中的已知索引中删除项目，为什么不这样做呢？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T18:05:21.833

当您从`listOfObjects`to添加元素时`objectToRemoveList`，您只是将对象的引用添加到您的列表中，而不是对象本身（除非您的列表是值类型，但情况似乎并非如此）。因此，当您使用`Clear()`其中一个列表时，另一个列表仍将包含原始项目，因为您没有修改它们。

# jquery - 如何使用 html 内联链接更改 css 样式

> ID：11547527
> 
> 赞同：0
> 
> 时间：2012-07-18T18:00:46.007
> 
> 标签：jquery, css

我有一个页面，里面有很多盒子，里面有内联的 html 链接，所以用户可以快速找到它们。这是我的问题：

是否有可能使用 jquery 当您单击链接 mysite.com/test/#box1 时，相应的框可以更改其样式（例如 - 在 box1 周围添加红色边框以便用户快速看到它）或不？我怎么能完成这样的事情？

**HTML**：

```
<div class="box1">
  <a name="box1"></a>
  ...content1...
</div>
<div class="box2">
  <a name="box2"></a>
  ...content2...
</div>
<div class="box3">
  <a name="box3"></a>
  ...content3...
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T18:09:35.420

你也可以通过css3来做！

```
<div id="boxDiv1">
    <a name="box1" href="#boxDiv1" >Test Link</a>
</div>

<style>
#boxDiv1:target { border:1px solid red; }
</style> 
```

您也可以为锚点执行此操作

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T18:04:36.497

尝试以下操作：

```
.border {
   border: 1px solid red;
} 
```

```
$('a').click(function() {
   e.preventDefault()
   $(this).closest('div').addClass('border')
}) 
```

或者：

```
$('a').click(function(e) {
   e.preventDefault();
   var h = document.location.hash.replace('#', '')
   $('.'+h).addClass('border')
}) 
```

# ruby-on-rails - sublime text ruby .erb 块注释键盘快捷键？

> ID：11547528
> 
> 赞同：2
> 
> 时间：2012-07-18T18:00:53.633
> 
> 标签：ruby-on-rails, ruby, sublimetext2

我正在寻找 sublime text 2 中的快捷方式，它将在 .erb 文件中进行块注释。

例如说我的 .erb 中有这段代码

```
<% @posts.each do |post| %>
  <p>my code</p>
<% end %> 
```

我想快速评论一下整个事情，比如：

```
<% 
=begin %> 
<% @posts.each do |post| %>
  <p>my code</p>
<% end %>
<% 
=end %> 
```

有没有办法突出显示该块并点击键盘快捷键来添加这些评论块？我尝试突出显示该块，然后选择 Edit > Comment > Toggle Comment 和 Edit > Comment > Toggle Block Comment，但没有任何反应。

我已经安装了 ERB 插入和切换命令包，但也许我需要别的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T21:24:42.373

用于评论/取消评论选择的常用 Sublime 键盘快捷键是`cmd-/`，而块评论是`cmd-opt-/`，但它们与 Edit > Comment > Toggle Comment 具有相同的效果，所以如果这不起作用，它们可能也不会。我已经尝试在 .erb 模板中使用这些，它不仅可以工作，而且对插值段使用 ruby​​ 注释似乎非常好，其余部分使用 html 注释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T21:56:35.613

在 Mac 上，我通过选择文本并同时点击命令和 / 来注释掉一段代码。我最近学到的另一个有用的方法是，如果您需要缩进几行或从几行中获取我们的内容，请按住选项并选择要调整的行。

# java - 在运行时设置 xml

> ID：11547529
> 
> 赞同：0
> 
> 时间：2012-07-18T18:00:59.013
> 
> 标签：java

我有一个虚拟 jar，它唯一的工作是显示一个简单的 jdialog 并要求用户从提供的组合中选择所需的内存大小。选择所需的最大内存后，用户单击开始按钮运行我的主 Jar。

我在虚拟 jar 中使用 runtime.getRuntime.exec() 方法来调用我的主 jar。

我已经硬编码了我的主罐子路径，它工作正常。但是我想知道当两个罐子位于不同的位置时，如何以编程方式获取我的主罐子的位置？

我可以使用以下链接中使用的方法获取我的虚拟 jar 的路径。

[如何获取正在运行的 JAR 文件的路径？](https://stackoverflow.com/questions/320542/how-to-get-the-path-of-a-running-jar-file)

但请建议我获取我的主程序的 jar 路径..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:09:19.330

你不能，除非你知道它们将在哪里安装/部署。为什么不将它们都打包在同一个 JAR 中，然后您可以使用您描述的技术找到 JAR 路径？

您应该有两个带有`main()`方法的类，例如`org.kittu.Main`和`org.kittu.Dummy`。将它们打包`main.jar`并确保`org.kittu.Dummy`是默认执行的类（在清单中）。

在您的`Dummy`班级中，获取`main.jar`用户想要的内存的位置和数量，然后`exec()`是：

`java -Xmx <memory> -jar <path to main.jar> org.kittu.Main`

运行你的`Main`课程。

# maven - 在 maven 项目中，是否可以使用刚刚在同一个项目中构建的插件？

> ID：11547530
> 
> 赞同：0
> 
> 时间：2012-07-18T18:00:59.407
> 
> 标签：maven, maven-plugin

假设您有某种输入文件，它们将以某种自定义方式进行处理（即使文件格式对于所讨论的文件包也非常特殊）。

为了处理它们，我决定制作一个 maven 插件，它恰好仅在这些文件的上下文中有用。

是否可以将它们全部（上述文件和插件的源代码）放在一个项目中，构建插件，在输入文件上运行插件并将其输出收集为该项目*的输出*？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:18:52.753

简短的回答是你不能，因为 Maven 会在启动时解析插件类路径。

但是，您可以创建单独的模块，首先是一个插件，其次是使用该插件来处理文件。这两个模块都可以从父 pom 调用。

# c - 发送原始 eth 数据包。我应该什么时候关闭套接字？

> ID：11547532
> 
> 赞同：3
> 
> 时间：2012-07-18T18:01:03.073
> 
> 标签：c, sockets, network-programming, raw-sockets

我通过从 nfqeueue 获取数据包来实现桥接，打开到 eth 卡的套接字并发送数据包（我中间有一些逻辑）。

我是 cpp 和低级别的新手，所以我可能会问一些愚蠢的问题。

如果我理解正确，我不应该为每个数据包打开关闭套接字。我根据这个例子编写我的代码 - [http://austinmarton.wordpress.com/2011/09/14/sending-raw-ethernet-packets-from-a-specific-interface-in-c-on-linux/](http://austinmarton.wordpress.com/2011/09/14/sending-raw-ethernet-packets-from-a-specific-interface-in-c-on-linux/)

我像这样打开套接字：

```
sockfd = socket(AF_PACKET, SOCK_RAW, IPPROTO_RAW)) 
```

我的问题是： 1.**插座能活多久？** 2.如何检查我的插座是否仍然打开？3.如何关闭？我看到了关机，但我不知道这是否是 API？4.有人可以指导我举一个生产级别的例子吗？意味着处理套接字异常...

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T18:16:15.737

只要您有要发送或接收的帧，就保持该套接字打开。用 normal 关闭套接字[`close(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/close.2.html)。这是另一个给你的原始套接字教程 - [http://www.tenouk.com/Module43a.html](http://www.tenouk.com/Module43a.html)

[`shutdown(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/shutdown.2.html)仅对 TCP 有意义，与此处无关。

### 编辑0：

没有连接，你在这里说的是以太网。

帮自己一个忙，阅读这本书 - [TCP/IP 图解，第 1 卷：协议。](http://www.kohala.com/start/tcpipiv1.html)由 W. Richard Stevens 撰写 - 将为您节省大量的困惑。

# css - 当父级包含特定子级时如何设置父级样式？

> ID：11547535
> 
> 赞同：1
> 
> 时间：2012-07-18T18:01:11.930
> 
> 标签：css, css-selectors

我有一些看起来像这样的html：

```
<div id="parent">
  <div id="child"></div>
</div> 
```

我想应用默认背景颜色，`#parent`除非它包含`#child`.

所以 CSS 最终应该看起来像这样：

```
#parent {
  background: red
}
#parent:contains(#child) {
  background: none
} 
```

但是，我无法让`:contains`伪选择器以这种方式工作。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:06:20.773

[`:contains()`仅用于匹配包含某些 text](http://www.w3.org/TR/2001/CR-css3-selectors-20011113/#content-selectors)的元素，而不是包含某些其他元素的元素。正是由于与通过文本匹配元素相关的复杂性，几乎没有浏览器实现，导致[`:contains()`从规范中删除](http://www.w3.org/TR/2009/PR-css3-selectors-20091215/#content-selectors)。

由于[CSS 中没有父选择器](https://stackoverflow.com/questions/1014861/is-there-a-css-parent-selector)，并且`:has()`（它确实查看元素）仅存在于[jQuery](http://api.jquery.com/has-selector)中，因此您将无法使用 CSS 实现这[一点](https://stackoverflow.com/questions/1014861/is-there-a-css-parent-selector/1014958#1014958)。

作为记录，[jQuery 也实现`:contains()`了](https://stackoverflow.com/questions/9007060/what-tool-can-i-use-to-test-the-contains-css3-pseudo-class-in-a-browser/9008184#9008184)，但它是根据旧规范执行的，因此它使用`:has()`元素的名称来代替。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T18:05:07.823

用 jquery

```
if($("#child").length>0) $("#parent").css("backgroundColor","#fff"); 
```

纯css是不可能的。

# java - 调用 SwingWorker.get() 时防止 GUI 冻结

> ID：11547537
> 
> 赞同：3
> 
> 时间：2012-07-18T18:01:18.517
> 
> 标签：java, swing, swingworker

我有一个程序，我正在加载文件，同时我正在显示一个窗口以通知用户正在加载文件。我决定创建一个 FileLoader 类，它是一个 SwingWorker，它实际处理加载文件，以及一个实现 PropertyChangeListener 的 ProgressWindow，以通知用户传递给它的 SwingWorker 的状态。

我的代码目前如下所示：

```
FileLoader loader = new FileLoader(filePath);
new ProgressWindow(loader, "Loading File", "Loading File");
//ProgressWindow's constructor calls loader.execute() inherited from SwingWorker
doc = loader.get(); //GUI Freezes when called 
```

问题是每当我调用 loader.get() 时，它都会冻结 GUI，因此进度窗口中的进度条不会运行，整个事情毫无意义。据我所知，这是因为控制 GUI 的线程与调用 loader.get() 的线程相同，它在 loader.execute() 运行时暂停。

到目前为止，我已经尝试为 loader.get() 命令或 loader.execute() 方法创建一个新线程，并在线程上调用 SwingUtilities.invokeLater()，但随后整个程序冻结。

我考虑过在 SwingWorker.isDone() 时创建一个 ChangeListener，然后运行 ​​loader.get()，但这需要对我的代码进行一些我不想做的修改。

谁能告诉我最好的方法是让它工作吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T18:14:01.713

`get()`就像`join()`它会阻塞直到被调用，并在被调用之前等待 SwingWorker 完成。首先错误地使用它会完全抵消使用 SwingWorker 的所有优势。

`get()`解决方案：在您知道 SwingWorker 完成处理之前不要调用，方法是在 SwingWorker 的`done()`方法中调用它，或者如果您需要从调用代码中调用它，则在已添加到 SwingWorker 的 PropertyChangeListener 中调用当 SwingWorker 的“状态”属性为 SwingWorker.StateValue.DONE 时。

就像是：

```
 final FileLoader loader = new FileLoader(filePath);

  loader.addPropertyChangeListener(new PropertyChangeListener() {
     @Override
     public void propertyChange(PropertyChangeEvent evt) {
        if ("state".equals(evt.getPropertyName())) {
           // since DONE is enum, no need for equals(...) method
           if (evt.getNewValue() == SwingWorker.StateValue.DONE) {
              try {
                 loader.get();
              } catch (InterruptedException e) {
                 e.printStackTrace();
              } catch (ExecutionException e) {
                 e.printStackTrace();
              }
           }
        }
     }
  });

  new ProgressWindow(loader, "Loading File", "Loading File"); 
```

注意：代码未编译也未测试

编辑：添加了尝试/捕获。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T18:05:55.553

> 到目前为止，我已经尝试为 loader.get() 命令或 loader.execute() 方法创建一个新线程，并在线程上调用 SwingUtilities.invokeLater() ，但随后整个程序冻结了。

如果您调用`SwingUtilities.invokeLater()`将在 EDT 中执行冻结 GUI 的线程的线程。相反，通过调用它的`start()`方法来运行线程，并且仅`SwingUtilities.invokeLater()`在需要更新`PropertyChangeListener`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-23T12:25:32.163

我已经创建了一个 WorkerThread 类来处理 Threads 和 GUI current/main thread 。当事件触发以启动 XXXServer 时，我已将我的 GUI 应用程序放入 WorkerThread 的construct() 方法中，然后所有线程都被激活并且 GUI 工作顺利，而不会冻结。看一看。

```
/**
* Action Event
* 
* @see java.awt.event.ActionListener#actionPerformed(java.awt.event.ActionEvent)
*/
public void actionPerformed(ActionEvent ae) {
    log.info("actionPerformed begin..." + ae.getActionCommand());

    try {
        if (ae.getActionCommand().equals(btnStart.getText())) {
             final int portNumber = 9990;
             try {

                 WorkerThread workerThread = new WorkerThread(){
                    public Object construct(){

                        log.info("Initializing the Server GUI...");
                        // initializing the Server
                         try {
                            xxxServer = new XXXServer(portNumber);
                            xxxServer.start();
                            btnStart.setEnabled(false);                             
                        } catch (IOException e) {
                            // TODO Auto-generated catch block
                            log.info("actionPerformed() Start button ERROR IOEXCEPTION..." + e.getMessage());
                            e.printStackTrace();
                        }
                        return null;
                    }
                };workerThread.start();
                } catch (Exception e) {
                    log.info("actionPerformed() Start button ERROR..." + e.getMessage());
                    e.printStackTrace();
             }

        } else if (ae.getActionCommand().equals(btnStop.getText())) {
            log.info("Exit..." + btnStop.getText());
            closeWindow();
        }

    } catch (Exception e) {
        log
            .info("Error in ServerGUI actionPerformed==="
                + e.getMessage());
    }

} 
```

# java - BufferedImage：将所有像素设置为白色，其中 alpha = 0

> ID：11547539
> 
> 赞同：0
> 
> 时间：2012-07-18T18:01:19.667
> 
> 标签：java, bufferedimage

我有一个 BufferedImage 并且想将所有完全透明的像素设置为完全透明的白色（而不是透明的空白，或者源文件中可能存在的任何内容）。我当然可以使用 getRGB 和 setRGB 循环遍历整个图像，但是还有其他更快的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T18:56:40.563

You can set the pixels like this:

```
public void setRGB(int startX,
               int startY,
               int w,
               int h,
               int[] rgbArray,
               int offset,
               int scansize) 
```

This method sets an array of integer pixels in the default RGB color model (TYPE_INT_ARGB) and default sRGB color space, into a portion of the image data. Color conversion takes place if the default model does not match the image ColorModel. There are only 8-bits of precision for each color component in the returned data when using this method. With a specified coordinate (x, y) in the this image, the ARGB pixel can be accessed in this way:

```
 pixel   = rgbArray[offset + (y-startY)*scansize + (x-startX)]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T19:45:34.500

我不能确定它是否更快，但请看一下[`ColorConvertOp`](http://docs.oracle.com/javase/7/docs/api/java/awt/image/ColorConvertOp.html)课程。

我没有亲自使用它，但它可能是你正在寻找的。

# php - PHP 和 HTML 的安全性

> ID：11547541
> 
> 赞同：1
> 
> 时间：2012-07-18T18:01:36.017
> 
> 标签：php, html, security

我围绕 API 设计了 ​​php 和 html 代码。

html 代码允许用户键入特定项目以进行评估。然后将该项目发布到 php 并通过 API 运行。它得到响应并吐出一个 php 页面。

API 得到了很好的保护，但我想知道我的页面中是否有任何可能出错的地方，包括 PHP 和 html。

如果你能想出任何可能有害的东西，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:09:25.397

我们有一个非常相似的问题和担忧。在我们的网站上，我们有几十个 PHP 'API' 文件。当用户登录我们的站点时，会使用唯一信息设置特定的 _SESSION 变量。在 API 文件中，我们检查该会话变量，如果未设置，则会重定向到登录页面。这应该可以防止直接调用 API 文件而走得太远。

此外，在 PHP 脚本目录中有一个 index.php，它还会进行重定向，以防万一该目录在没有它的情况下以某种方式可见。

此外，我们确保清理每个 _POST 和 _GET 变量以防止 SQL 注入攻击。PHP 的 mysql 客户端有一个函数（这个名字让我忘记了），这将有助于清理这方面的参数。

这是几个建议。希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T18:07:07.910

如果你的 php 使用数据库来存储用户发布的信息，那么你需要有一些安全措施来防止注入攻击，推荐准备好的语句和加盐哈希。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T18:03:12.530

如果您还没有这样做，您需要通过在其上使用**Captcha**验证的 html 页面来防止 API 滥用。

# authentication - 用于身份验证的 REST 服务设计

> ID：11547553
> 
> 赞同：1
> 
> 时间：2012-07-18T18:02:14.913
> 
> 标签：authentication, rest

我想设计用于身份验证和帐户管理的 REST 服务。请让我知道以下是否满足 REST 风格。

```
POST http://server/security/authenticate?username=xxx&password=yyy
POST http://server/security/forgotPassword?username=xxx&email=yyy
PUT  http://server/security/changePassword?oldPassword=xxx&newPassword=yyy 
```

HTTP 方法 POST 和 PUT 是否在这里？由于身份验证不会修改任何内容，因此在这里使用 GET 会更好吗？我很困惑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T18:17:20.777

不要那样做。请勿出于任何原因在 URL 中输入密码。

在这种情况下，我对您尝试做的事情感到有些困惑——通常，REST API 中的身份验证/授权不是由资源本身处理的，但是如果您正在设计一个单独的身份验证 API，也许这个说得通。简单的答案是，将身份验证数据放在请求的正文中，然后通过 SSL 发送它们。所以

```
 POST https://server/security/changePassword/ 
```

并在正文中有数据。并确保用户必须在您的服务中进行身份验证！

从 REST 设计的角度来看，将 POST 视为对主体执行操作的服务。理想情况下，让它响应 200/201 状态和带有创建/修改资源 URL 的 Location 标头。

PUT 旨在在 URL（而不是查询参数）包含要创建资源的位置时使用。

可以说，这将是一个平静的举动

```
GET https://server/security/{username}/{email}/forgottonPassword/ 
```

但这有点滥用......坚持这些帖子。

如果您尝试对资源进行身份验证，则 Authorization 标头（名称错误，但要使用的标头）是这些标头的位置。

在这种情况下，进行用户名/密码身份验证的标准休息方式称为[基本身份验证](http://en.wikipedia.org/wiki/Basic_access_authentication#Example)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-18T19:02:38.713

在对 REST 风格的服务进行建模时，您会考虑资源。资源是一个`user`. 您要公开的服务（不好，因为在服务中考虑强制 RPC 样式）是身份验证并获取稍后可用于授权 HTTP 标头的安全令牌、忘记密码和更改密码功能。

首先，我们对在基本 URL 下始终可访问的资源用户进行建模

```
https://server/user/{username} 
```

要进行身份验证，我们需要一些安全令牌，以便我们可以向创建安全令牌的用户子资源发出 POST：

```
POST https://server/user/{username}/securityToken 
```

这会发出一个新的安全令牌，我们可以在 HTTP 授权标头中使用它。我在`POST`这里发出请求，因为我们将 securityToken 建模为 user 的某种子资源`user/someusername/securityToken`。您可以使用在安全令牌下创建的子资源向用户公开功能以查看所有成功或失败的登录请求。

接下来我们要请求忘记密码。这里重要的是`request`。这意味着我们发出请求并创建用户的新密码忘记请求子资源。为了创建子资源，REST 风格使用`POST`：

```
POST https://server/user/{username}/password/request 
```

这可以（但不是必须的）为每个密码请求创建一个子资源，该子资源只有在经过身份验证时才能访问。因此，您可以公开一个 REST 样式的 URL，用户可以在其中获取随时间发出的所有密码请求。

现在更改密码的最后一个功能非常简单，因为我们拥有用户的密码子资源，我们可以`POST`对密码资源发出请求：

```
POST https://server/user/{username}/password 
```

# ruby - Node.js（云存储 API）是否有 ruby Fog gem 的等价物？

> ID：11547557
> 
> 赞同：7
> 
> 时间：2012-07-18T18:02:22.450
> 
> 标签：ruby, api, node.js, cloud

是否有用于主要云服务的包装 API，例如带有[https://github.com/fog/fog](https://github.com/fog/fog)的 Ruby 和Node.js？

Fog 是许多云存储 API 的包装器，如下所示：

*   [https://github.com/fog/fog/tree/master/lib/fog](https://github.com/fog/fog/tree/master/lib/fog)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T04:53:16.297

目前没有等效的，但有一个项目朝着这个方向工作。

[节点阳光](https://github.com/ryan-roemer/node-sunny)

# flash - 在 Flash CPU 中为 PNG 文件制作动画

> ID：11547558
> 
> 赞同：0
> 
> 时间：2012-07-18T18:02:26.007
> 
> 标签：flash, actionscript

我有一个 1024 x 768 的 PNG 文件。除此之外，我还有其他较小的 PNG 文件通过 ENTER_FRAME 处理程序“滑入”（仅沿 x 和 y 移动）？

我只是想知道，动画 PNGS 是否需要比基本矢量形状更多的 CPU？我可以做些什么来优化我的动画吗？

它的字面意思是：

```
private function onEnterFrame(e:Event):void {
  myPng.x += speed; // and so on
} 
```

另外，如果我将 PNG 放在 MovieClip 中，我应该将 MovieClip“cacheAsBitmap”设置为 true 还是如果我将 PNG 文件放入其中是否暗示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T19:18:08.257

CPU 使用率很大程度上取决于向量的复杂性。简单矢量的动画可能比大位图快，但复杂矢量的动画速度要慢得多 - 除非 cacheAsBitmap 对于该复杂矢量为真。您的 PNG 已经是位图，因此 cacheAsBitmap 与它们无关。

如果可能的话，最好的办法是确保您使用 GPU 加速来进行简单优化。如果您需要更高的性能，更好的是利用 Flash Player 11 的原生 3D 支持。即使不做实际的 3D，您也可以使用像 starling (http://gamua.com/starling/) 这样的 2D 框架，它仍然可以利用 3D 支持，从而为您提供更好的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T19:10:33.223

实际上恰恰相反。考虑 ：

*   **PNG / 位图 图像**作为要在屏幕上表示的数据块。
*   **矢量图像**作为生成要在屏幕上表示的数据块的公式。

现在想想你想做什么。您想移动图像，而数据块绝对没有变化。显而易见的答案是PNG。

现在关于优化。我相信您在此任务中的优化空间非常小，除非您考虑对结果进行[blitting 和缓存](http://www.adobe.com/devnet/flash/articles/blitting_mc.html)。

Blitting & 缓存影片剪辑只是*从内存*中读取位图表示（数据块）并重新绘制它，从而减少读取 PNG 的开销。但是，除非您当前的方法确实存在一些性能问题，否则我不会考虑麻烦。

# php - 如何在zend框架中获取缩略图

> ID：11547560
> 
> 赞同：0
> 
> 时间：2012-07-18T18:02:39.953
> 
> 标签：php, zend-framework, phpthumb, php-gd

我将较大的图像存储在一个文件夹中。我不想创建缩略图，将其存储在某个地方并检索。我正在寻找脚本来动态创建较大图像的缩略图并显示在浏览器中，但从不将缩略图存储在服务器上。有人可以向我推荐一些教程链接或提供我这样做的脚本吗？我发现 phpthumb() [http://phpthumb.sourceforge.net/](http://phpthumb.sourceforge.net/)在 php 中做这样的工作。我怎么能用它zend框架或其他库，请推荐

编辑：如何使用 phpthumb() [http://phpthumb.sourceforge.net/](http://phpthumb.sourceforge.net/)？phpthumb() 有一堆类文件。要在 phpthumb() 中生成缩略图，我们只需要编写以下行：

```
<img src="phpthumb.php?src=image.jpg&w=150"/> 
```

我想在 zend 框架中使用它。我应该把这个库放在哪里？放置在库文件夹中，我将不得不重命名所有类及其引用。如何使用它？任何其他技术

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T19:28:46.253

如果您愿意提供对源图像的 HTTP 访问，您可以使用像[TinySrc](http://www.sencha.com/products/io/)这样的免费服务来提供缩略图。Zend Framework v1 或 Zend Framework v2 都没有提供对我可以看到的图像处理的支持。

# c++ - 使用 Nginx 在 C++ 中使用 fastcgi 访问环境变量

> ID：11547562
> 
> 赞同：2
> 
> 时间：2012-07-18T18:02:52.800
> 
> 标签：c++, nginx, fastcgi, environment

我正在尝试编写一个由 nginx 服务的 c++ fastcgi 程序。我已经编译了程序，并且 hello world 示例有效，但我似乎无法从 nginx 获取任何环境变量（REQUEST_METHOD）等。据我所知，我正在关注教程并且具有相同的配置，所以我真的在这里拉扯我的头发，为什么它不起作用。这是我的配置：

```
location /cgi {
  fastcgi_pass 127.0.0.1:9000;
  fastcgi_index index.html;
  include /etc/nginx/fastcgi_params;
} 
```

（fastcgi_params 与默认的 nginx 安装相比没有变化）。

然后来自c++程序的相关代码：

```
streambuf * cin_streambuf  = cin.rdbuf();
streambuf * cout_streambuf = cout.rdbuf();
streambuf * cerr_streambuf = cerr.rdbuf();

FCGX_Request request;

FCGX_Init();
FCGX_InitRequest (&request, 0, 0);

while (FCGX_Accept_r (&request) == 0)
{
  fcgi_streambuf cin_fcgi_streambuf (request.in);
  fcgi_streambuf cout_fcgi_streambuf (request.out);
  fcgi_streambuf cerr_fcgi_streambuf (request.err);

#if HAVE_IOSTREAM_WITHASSIGN_STREAMBUF
  cin  = &cin_fcgi_streambuf;
  cout = &cout_fcgi_streambuf;
  cerr = &cerr_fcgi_streambuf;
#else
  cin.rdbuf(&cin_fcgi_streambuf);
  cout.rdbuf(&cout_fcgi_streambuf);
  cerr.rdbuf(&cerr_fcgi_streambuf);
#endif

  //figure out what kind of request we have
  char * request_type = FCGX_GetParam("REQUEST_METHOD", request.envp);

  cout << "Content-type: text/html\r\n"
  "\r\n";
  cout << "Environment is: " << *request.envp;

} 
```

对 FCGX_GetParam 的调用返回 null，当我输出 request.envp 时，显示的唯一变量是 FCGI_ROLE=RESPONDER。

我正在使用以下命令启动该过程：

```
spawn-fcgi -p 9000 -n FCGI-App 
```

一切都在 Ubuntu 11.10 下运行。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T07:27:20.103

您正在尝试使用`char **envp;`打印`cout << *request.envp`。预计这只会打印数组中的第一个字符串，这并不奇怪。

[请尝试使用官方 FCGI 示例](http://www.fastcgi.com/devkit/examples/echo-cpp.cpp)的代码：

```
static void penv(const char * const * envp)
{
    cout << "<PRE>\n";
    for ( ; *envp; ++envp)
    {
        cout << *envp << "\n";
    }
    cout << "</PRE>\n";
}

...

penv(request.envp); 
```

# javascript - 使用 HTML/Javascript 访问动态创建的 div 中的元素

> ID：11547574
> 
> 赞同：3
> 
> 时间：2012-07-18T18:03:27.737
> 
> 标签：javascript, jquery, html, jquery-selectors

我对 javascript 和 JQuery 编程很陌生。通常，要访问元素，我会给它们一个 id，这样我就可以得到它们`$("#"+id).blabla().`

但现在我需要动态创建一个 div，并访问其中的元素。

就像是

```
<div id="automaticallyGeneratedId">
   <div ???></div> <!-- first div -->
   <div ???></div> <!-- second div -->
</div> 
```

访问和识别每个内部 div 的最佳实践是什么？我为他们生成另一个ID？要不然是啥？

我没有完全清楚选择器的理论。

**编辑**：修改了从识别单个内部 div 到识别其中许多 div 的问题

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T18:09:56.407

您可以在生成`id`. 例如：

如果你总是生成`id`这样的：`myid1`, `myid2`, `myid3`...

```
<div id="myid1">
   <div></div>
</div>

<div id="myid2">
   <div></div>
</div>

...... 
```

那么你可以试试：

```
$('div[id^=myid]').find('div').foo(); 
```

或者

```
$('div[id^=myid] div').foo(); 
```

这里，`^=`是以选择器开头的，所以`div[id^=myid]`会选择`div`谁`id`以 开头`myid`。

您还可以使用包含单词选择器`~=`和使用 like `$('div[id~=myid]')`。这将选择`div`包含`id`单词`myid`。

而不是`id`如果你想使用其他属性，例如。`name`然后更改选择器，例如：

`$('div[name^=myid]')`或`$('div[name~=myid]')`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T18:07:16.083

如果您已经有对该外部 div 的引用，则通常是一个很好的做法，只需使用 find 从那里进行搜索。

您可以给它一个 id，或者如果您想使用更通用的方法，您可以使用类。

```
<div class="subdiv">...

$('#automaticallyGeneratedId').find('div.subdiv') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T18:18:57.240

通常，当您创建它们时，您可以直接在它们上分配事件处理程序等。像这样：

```
var div = $( '<div></div>' );
div.on( 'click', function() {
    // Do something when the generated div is clicked
});

// Then, add it to the DOM
$( 'body' ).append( div ); 
```

您无需费心使用 ID 或类来选择它们，它们已经在您的代码中可用。

另一种方法是使用事件冒泡来处理同一类的新创建元素。关于这个的一个很好的链接是这个： http: [//beneverard.co.uk/blog/understanding-event-delegation/](http://beneverard.co.uk/blog/understanding-event-delegation/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T18:08:51.707

您可以通过多种方式创建一个元素并给他一个 Id 或 Class，或者使用 DOM 来访问它。

```
$("html").prepend('<div id="foo"></div>');
$("#foo").doSomething(); 
```

其他方式

```
$("#automaticallyGeneratedId").find("div").doSomething(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T18:12:35.263

使用 id 访问元素中的 div：

```
$("#automaticallyGeneratedId div").whatever 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-18T18:20:48.063

如果你缓存 div，你可以使用类似的东西：

```
var myDiv1Child = $('div', myDiv1); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-06-02T11:52:52.483

创建一个委托侦听器，在侦听器中，您可以通过执行此操作找到元素

```
//If a div inside the parent is clicked then execute the function within
$('.PARENT_CLASS').click("div", function(){
//This variable holds all the elements within the div
var rows = document.querySelector('.PARENT_CLASS').getElementsByTagName('div');
for (i = 0; i < rows.length; i++) {
    rows[i].onclick = function() {
        console.log(this);  //The element you wish to manipulate
    }
  }
}); 
```

# php - 如何使用 PHP 从外部 url 获取“传输编码”和“内容编码”标头？

> ID：11547577
> 
> 赞同：1
> 
> 时间：2012-07-18T18:03:32.503
> 
> 标签：php, header, content-encoding, transfer-encoding

我有一个客户想要从 Web 服务响应中获取所有标头的基于 Web 的报告。我的客户还使用[SoapUI](http://www.soapui.org/)来检查方法响应，并且他可以仔细检查该应用程序上的响应标头。

我已经尝试过 PHP [get_headers()](http://www.php.net/manual/en/function.get-headers.php)和[cURL](https://stackoverflow.com/questions/9183178/php-curl-retrieving-response-headers-and-body-in-a-single-request)方法，并且可以访问大多数标头参数，但是我的客户端也可以通过 SoapUI 获取“传输编码”和“内容编码”参数，而我的 PHP 请求没有得到这些。

我的 PHP get_headers 结果（与 cURL 相同）：

```
Cache-Control: private
Content-Length: 3037
Content-Type: text/html; charset=utf-8
Server: Microsoft-IIS/7.5
X-AspNet-Version: 2.0.50727
X-Powered-By: ASP.NET
Date: Wed, 18 Jul 2012 17:38:32 GMT 
```

我客户的 SoapUI 标头（我只粘贴了不同的标头）：

```
Content-Type: application/soap+xml; charset=utf-8
Vary: Accept-Encoding
Content-Encoding: gzip
Transfer-Encoding: chunked 
```

对我来说，通过 PHP 在我们的基于 Web 的应用程序上获取完整的标题集（就像 SoapUI 一样）非常重要。我的客户想要检查响应是否通过 gzip 分块和/或压缩。我是否错过了另一种实现此类标头的方法？

# error-handling - 在丢失的令牌上输出适合上下文的错误消息

> ID：11547581
> 
> 赞同：1
> 
> 时间：2012-07-18T18:03:45.610
> 
> 标签：error-handling, antlr

我有一个语法来解析一些源代码：

```
document
  : header body_block* EOF
    -> body_block*
  ;

header
  : header_statement*
  ;

body_block
  : '{' block_contents '}'
  ;

block_contents
  : declaration_list
  | ... other things .... 
```

文档有没有正文的标题或没有标题的正文是合法的。

如果我尝试解析一个看起来像

```
int i; 
```

然后 ANTLR 抱怨`int`它在预期的时候发现了`EOF`。这是真的，但我想说它在期待`{`. 也就是说，如果输入在标题和 EOF 之间包含不是 a 的内容`body_block`，那么我想向用户建议他们打算将该文本包含在 a`body_block`中。

我已经做了一些*几乎*可行的尝试，如果这很有启发性，我可以发布，但我希望我只是错过了一些简单的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:54:18.027

不漂亮，但这样的事情会做到这一点：

```
body_block
 : ('{')=> '{' block_contents '}'
 | t=.
   {
     if(!$t.text.equals("{")) {
       String message = "expected a '{' on line " + $t.getLine() + " near '" + $t.text + "'";
     }
     else {
       String message = "encountered a '{' without a '}' on line " + $t.getLine();
     }
     throw new RuntimeException(message);
   }
 ; 
```

（*未经测试，可能包含语法错误！*）

因此，只要`'{' ... '}'`不匹配，它就会下降到`.`¹并产生更易于理解的错误消息。

* * *

¹请注意，`.`解析器规则中的 a 匹配任何标记，而不是任何字符！

# c# - 从内存映射文件读取时出现问题

> ID：11547583
> 
> 赞同：6
> 
> 时间：2012-07-18T18:03:47.537
> 
> 标签：c#, ipc, shared-memory

我正在尝试在我的应用程序（特别是 Windows 服务）中实现内存映射文件，然后使用 C# 表单从服务写入的 MMF 中读取。不幸的是，我似乎无法让表单从 MMF 中读取任何内容，更重要的是，表单似乎从未找到由服务创建的 MMF。下面是概述我在做什么的代码片段，任何人都可以看到我做错了什么或能够为我指出更好的方向吗？

服务 ：

```
private MemoryMappedFile mmf = MemoryMappedFile.CreateOrOpen("AuditStream", 1024 * 1024);
private Mutex mutex = new Mutex(false, "MyMutex");

byte[] msg = new byte[1];
var view = mmf.CreateViewStream(0, 1);
byte[] rmsg = new byte[1];

for (int i = 0; i < 400; i++)
{
     mutex.WaitOne();
     for (int j = 0; j < msg.Length; j++)
     {
          msg[j] = (byte)i;
     }

     view.Position = 0;
     view.Write(msg, 0, bufferSize);

     //the next 3 lines verify that i wrote to the mmf and can potentially read from it
     //These are just for testing
     view.Position = 0;
     view.Read(rmsg, 0, 1);
     Log.Error("Finished MMF", rmsg[0].ToString());

     mutex.ReleaseMutex();
 } 
```

形式：

```
private MemoryMappedFile mmf;
private Mutex mutex;
Thread t = new Thread(MmfMonitor);
t.Start();

private void MmfMonitor()
    {

        byte[] message = new byte[1];
        while(!quit)
        {
            try
            {
                **mmf = MemoryMappedFile.OpenExisting("AuditStream");**
                mutex = Mutex.OpenExisting("MyMutex");
                var view = mmf.CreateViewStream(0, 1);

                mutex.WaitOne();
                view.Position = 0;
                view.Read(message, 0, 1);
                Invoke(new UpdateLabelCallback(UpdateLabel), message[0].ToString());
                mutex.ReleaseMutex();
            }catch(FileNotFoundException)
            {
                **//The AuditStream MMF is never found, and therefore doesnt every see the proper values**
            }
        }
    } 
```

此外，当服务“运行”时，MMF 应该始终有一个句柄并且不应该被垃圾收集器收集；

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-18T18:26:56.830

该服务在另一个会话中运行，即著名的“会话 0”。Windows 对象位于与进程会话关联的命名空间中，因此您的表单无法看到在服务使用的会话中创建的对象。

您必须`Global\`在 mmf 名称前添加才能在全局命名空间中创建和访问对象。

所以在服务中：

```
mmf = MemoryMappedFile.CreateOrOpen(@"Global\AuditStream", ...) 
```

并采用以下形式：

```
mmf = MemoryMappedFile.OpenExisting(@"Global\AuditStream"); 
```

# search - GOOGLE CUSTOM SEARCH API - （与功能相关的搜索）

> ID：11547584
> 
> 赞同：1
> 
> 时间：2012-07-18T18:03:52.870
> 
> 标签：search, google-custom-search

我需要你的帮助。我正在寻找创建一个自定义搜索引擎。

我目前正在考虑使用 Google 自定义搜索 API。我试图调查这个，但我找不到任何具体的东西。

有没有办法在 Google 自定义搜索网站上设置相关搜索词？是否有任何 API 可以生成**“相关搜索”**？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:35:52.077

是的，SimilarSites 提供了一项服务，它输出的数据与[Google 相关 API](http://dev.similarsites.com/similar-websites-api/)非常相似，但它们使用自己的专有算法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-21T19:52:07.640

这里有几个有趣的 API 可以为您提供帮助。

*   [关键字竞争对手 API](https://developer.similarweb.com/organic_paid_search_comptetitors_pro_api) - 这是一个 API，可让您查询域并获取所有其他在相同付费或自然搜索关键字上竞争的域。

*   [搜索关键字 API](https://developer.similarweb.com/keywords_api) - 另一个 API，它将为给定域提供所有领先的关键字（付费和自然）。这甚至可以细分到特定的国家。

*   [SimilarWeb API](https://developer.similarweb.com/similar_websites_api) - 根据包括关键字和标签在内的许多不同因素，获取更多与给定域相似的网站。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T17:26:13.677

我不太确定您所说的“搜索相关”是什么意思。尽管如此，对于 CSE API 中的每个请求，您都可以指定以下参数：

1.  linkSite - “指定所有搜索结果都应包含指向特定 URL 的链接”。
2.  relatedSite - “指定所有搜索结果都应该是与指定 URL 相关的页面”。
3.  orTerms - “提供额外的搜索词以在文档中检查，其中搜索结果中的每个文档必须至少包含一个额外的搜索词”。
4.  hq - “将额外的查询词附加到查询”。

更多信息可以在[这里](https://developers.google.com/custom-search/v1/cse/list "这里")找到。

可能对你有用。

# vb.net - 将点云导出为 .RAW

> ID：11547587
> 
> 赞同：0
> 
> 时间：2012-07-18T18:04:11.983
> 
> 标签：vb.net, export, point-clouds, point-cloud-library

我正在处理大量点，并且希望将点云导出为 .raw 格式。我搜索了如何在 Java 中执行此操作，它返回了 java.io.BufferedOutputStream 类，该类很好地处理了我的搜索，但我还没有找到与 VB .NET 类似的东西。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:36:38.707

该类可能是 .NET 框架中与Java`BufferedStream`中的类最接近的东西。`BufferedOutputStream`

[http://msdn.microsoft.com/en-us/library/system.io.bufferedstream.aspx](http://msdn.microsoft.com/en-us/library/system.io.bufferedstream.aspx)

# python - 为什么 Python 的“sorted()”比“copy, then .sort()”慢

> ID：11547588
> 
> 赞同：7
> 
> 时间：2012-07-18T18:04:14.653
> 
> 标签：python, performance, sorting, optimization

这是我运行的代码：

```
import timeit

print timeit.Timer('''a = sorted(x)''', '''x = [(2, 'bla'), (4, 'boo'), (3, 4), (1, 2) , (0, 1), (4, 3), (2, 1) , (0, 0)]''').timeit(number = 1000)
print timeit.Timer('''a=x[:];a.sort()''', '''x = [(2, 'bla'), (4, 'boo'), (3, 4), (1, 2) , (0, 1), (4, 3), (2, 1) , (0, 0)]''').timeit(number = 1000) 
```

结果如下：

```
0.00259663215837
0.00207390190177 
```

**我想知道为什么使用 .sort() 总是比 sorted() 快，即使两者都在复制列表？**

注意：我在带有 Win7 的 2.53Ghz i5 上运行 Python 2.7

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-18T18:13:14.540

您正在查看的差异是微乎其微的，并且对于更长的列表完全消失。简单地添加`* 1000`到我的机器上的定义`x`给出以下结果：

```
2.74775004387
2.7489669323 
```

我最好的猜测是`sorted()`因为你`sorted()`需要使用一些可以将*任何*可迭代对象复制到列表的通用代码，而直接复制列表可以假设源也是一个列表。CPython 使用的排序代码实际上与`list.sort()`and相同`sorted()`，因此这不是造成差异的原因。

**编辑**：[当前开发版本的源代码`sorted()`](http://hg.python.org/cpython/file/11a08c377a3b/Python/bltinmodule.c#l1848)在道德上等同于

```
a = list(x)
a.sort() 
```

事实上，使用此代码而不是您的第二个版本可以消除任何列表大小的任何显着速度差异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T18:20:36.970

支持[@Sven Marnach 的回答](https://stackoverflow.com/a/11547729/4279)：

小列表有一个小的区别：

```
$ python2.7 -mtimeit -s "x = [(2, 'bla'), (4, 'boo'), (3, 4), (1, 2) , (0, 1), (4, 3), (2, 1) , (0, 0)]; s=sorted" "a=s(x)"
1000000 loops, best of 3: 1.87 usec per loop

$ python2.7 -mtimeit -s "x = [(2, 'bla'), (4, 'boo'), (3, 4), (1, 2) , (0, 1), (4, 3), (2, 1) , (0, 0)]" "a=x[:];a.sort()"
1000000 loops, best of 3: 1.66 usec per loop 
```

`* 1000`差异随着（更大的列表）而消失：

```
$ python2.7 -mtimeit -s "x = [(2, 'bla'), (4, 'boo'), (3, 4), (1, 2) , (0, 1), (4, 3), (2, 1) , (0, 0)]*1000; s=sorted" "a=s(x)"
100 loops, best of 3: 3.42 msec per loop

$ python2.7 -mtimeit -s "x = [(2, 'bla'), (4, 'boo'), (3, 4), (1, 2) , (0, 1), (4, 3), (2, 1) , (0, 0)]*1000" "a=x[:];a.sort()"
100 loops, best of 3: 3.48 msec per loop 
```

# jqgrid - jqGrid - 我有一列说 ColumnA 但需要从不同的列表加载添加表单

> ID：11547590
> 
> 赞同：0
> 
> 时间：2012-07-18T18:04:22.403
> 
> 标签：jqgrid

在网格中，我通过返回 XML 类型的 java servlet 显示用户可编辑数据库表中的“列 A”字段。但是当用户单击“添加”时，我需要添加表单中的此字段“A 列”作为从不同数据库表加载的选择列表，例如允许用户选择的查找/引用表可用值的列表。我怎样才能做到这一点？有没有办法设置一个加载字段的数据 URL，但仅在“添加表单”中仅加载该特定字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T11:16:10.443

我不知道我是否正确理解了这个问题..

但我认为您需要在 col 模型中定义编辑类型和编辑 dataUrl..

尝试这个

```
{
     name:'Column A',
     index:'Column A',          
     editable:true,
     edittype:'select',
     editoptions:{
          dataUrl:'your/url/for/data/data.php'          
     }     
} 
```

# string - 带有 flashVars 和查询字符串的 SWF

> ID：11547591
> 
> 赞同：0
> 
> 时间：2012-07-18T18:04:26.747
> 
> 标签：string, flash, flashvars

我有一个适用于查询字符串的 swf 文件。但同时，如果我通过 flashvars 传递值，它就不起作用。SWF 处理 flashVars 和查询字符串之间传递的值的方式有什么不同吗？

注意：我没有 flash 的源代码，它可能是 flash 6 中的旧代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T14:10:56.017

不，没有区别，因此您应该能够使用 flashvars 而不是使用查询字符串传递它们。

你如何嵌入swf？[手动使用对象和嵌入标签](http://helpx.adobe.com/flash/kb/pass-variables-swfs-flashvars.html)？如果是这样，请确保您已为对象和嵌入添加了 flashvar。如果使用 SWFObject 嵌入，可以显示代码吗？

# sql-server - t-sql 存储过程中的可选参数可以跟在可选参数后面吗？

> ID：11547600
> 
> 赞同：0
> 
> 时间：2012-07-18T18:04:42.730
> 
> 标签：sql-server, sql-server-2008, tsql, sql-server-2005

这是我想要的声明。

```
CREATE PROCEDURE UpdateTimeProc  
(  
    @Hours int,  
    @Minutes int,  
    @Seconds int = 0,  
    @ResetCounter bit  
) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T18:08:17.153

是的，没有要求具有默认值的参数必须位于没有的参数之前或之后。但这意味着如果您不包括所有参数，则需要命名参数。你***不能***说...

```
EXEC dbo.UpdateTimeProc 5, 5, 1; 
```

...并期望`1`与`@ResetCounter`. 如果您想保留可选参数，则需要命名参数（如康拉德的回答所示）。

让我重复一遍：**上面的语法不起作用。**

您可以选择这样做（您只需在命名第一个参数后开始命名参数）：

```
EXEC dbo.UpdateTimeProc 5, 5, @ResetCounter = 1; 
```

但我真的不推荐它，因为人们必须查看其他参数是什么。一般来说，我们应该更喜欢自记录代码而不是简洁的代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T18:08:07.703

是的，但是你必须在调用它时使用命名参数

例如，从 SSMS 调用就像这样

```
EXECUTE UpdateTimeProc @Hours = 1, @Minutes =2 , @ResetCounter = 0; 
```

如果您使用从另一个客户端调用它（比如说 C#），您需要要么不设置参数的 value 属性，要么不将其包含在参数集合中

# java - eclipse 项目，由轴构建的存根... Q2。3... 我可以使用 jax-ws 来重建 java 存根/类文件吗？

> ID：11547601
> 
> 赞同：0
> 
> 时间：2012-07-18T18:04:43.957
> 
> 标签：java, xml, web-services, wsdl, axis

Q1。所以我在 Eclipse Java EE 中有一个 webapp 项目，它已经有 wsdl2java.xml 和存根文件。这一切都是使用早期版本的 Apache 轴完成的。现在，为了从 apache axis2 获取新的 wsdl2java.xml，我是否必须从命令行重新构建所有内容，然后将其放入现有项目中？我会在指定参数、目标和 wsdl 文件的命令行中执行 wsdl2java jar 吗？

Q2。现在，当我最初尝试在不更改任何内容的情况下执行构建文件（wsdl2java.xml）时，我收到了来自 java 的错误，与“...java 方法中的参数太多，不能超过 255...”或其他相关事实。现在，axis2 或 jax-ws 能解决这个问题吗？

最后...

Q3。如果我使用 jax-ws 可以用新的 jax-ws 生成的存根替换我拥有的由轴构建的当前存根吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T20:17:22.163

1.  如果 Axis 的早期版本是 1.x，那么是的，您必须生成新的存根。

2.  Axis2 提供了自己的代码生成工具——旧的 xml 可能不是很有用，准备新的。

3.  好吧，我不完全知道您想要实现什么，如果您更改 ws 运行时，您必须更换存根。

# jquery - jQuery：从字符串数组创建多个跨度

> ID：11547609
> 
> 赞同：2
> 
> 时间：2012-07-18T18:05:13.363
> 
> 标签：jquery, css, html, chaos

我有一个程序应该采用关键字并使用 CSS 突出显示/着色它们。

我使用 jQuery 是因为我想最终更改突出显示的单词，所有这些都由用户完成。

现在的问题不是没有突出显示*（耶）*，而是不是所有的东西都没有突出显示*（哦，不）*。我设置了几个单词要通过并突出显示*（气球，多萝西，旋风），*但通常发生的情况是某些单词中的所有（如果有的话）都会被着色。

希望[这个 jsFiddle 东西](http://jsfiddle.net/Wexcode/c8N7t/)比我能更好地解释它。您会在第二行注意到第一个单词和关键字 Dorothy 并不像我预期的那样是红色的。

谢谢。对不起，如果我太不连贯或任何东西，感谢反馈

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T18:14:25.693

这是[你](http://jsfiddle.net/564jY/5/)想要的吗？

```
$(function(){
     var keyWord = new Array("Dorothy","cyclone","miles","house","balloon");
     var regexp = new RegExp(keyWord.join("|"),"g");
     $('#oz li').html( function(i,value){
          return value.replace(regexp ,
               '<span containsStringImLookingFor="true" id="$&">$&</span>');
     });
}); 
```

*解释*

`regexp`是`/Dorothy|cyclone|miles|house|balloon/g`正则表达式，它匹配数组中所有列出的单词。方法用 ' ' 模板`.replace()`替换所有匹配的单词。`<span containsStringImLookingFor="true" id="{matched word}">matched word</span>`replace 方法中的 ' `$&`' 表示当前匹配的单词。

# javascript - jQuery 在特定表单中切换类

> ID：11547612
> 
> 赞同：-2
> 
> 时间：2012-07-18T18:05:25.720
> 
> 标签：javascript, jquery, toggle

我有一个点击功能，可以切换表单中某些文本的措辞。这个相同的区域/措辞在我的 javascript 应用程序中多次出现。

为了使我的代码更简洁，我认为如果我只有一次切换代码块是有意义的。因此，我觉得我需要根据用户所在的相关表单进行切换。

这是我的代码.. 有没有办法可以将表单名称传递给它，以便影响用户当前正在查看的表单，而不是我的应用程序中的其他类实例？

```
$("#.myLink").click(function(){
$("#myContainer").toggle();
$(this).text($(this).text() == 'Add' ? 'Remove' : 'Add');
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:07:34.580

> 有没有办法可以将表单名称传递给它，以便仅影响用户当前正在查看的表单，而不是我的应用程序中类的其他实例？

您可以使用：

```
$(this).closest('form') 
```

获取表单用户已打开。如果需要，您还可以将表单分配给变量：

```
var $frm = $(this).closest('form');
// do something with $frm 
```

# mysql - MySQL 非常大的 INT 字段

> ID：11547613
> 
> 赞同：-1
> 
> 时间：2012-07-18T18:05:26.540
> 
> 标签：mysql, sql

我正在创建一个包含两列的表。[用户ID、点数]

点数的最大值约为 1000 亿。

将点数存储为 INT 值会有问题吗？或者它需要是一个VARCHAR？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:06:51.863

使用[BIGINT](http://dev.mysql.com/doc/refman/5.5/en/integer-types.html)，它会很容易地保持你的值范围。

无符号的最大值为 (2 ^ 64) - 1，或：18,446,744,073,709,551,615。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T18:06:58.947

`BigInt`如果您的 MySQL 版本是 5.0 或更高版本，您可以尝试使用。

[来自这里](http://dev.mysql.com/doc/refman/5.0/en/integer-types.html)的学分

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T18:08:04.253

信息[在这里](http://dev.mysql.com/doc/refman/5.0/en/integer-types.html)。无论您使用哪种语言，最好先查看文档。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T18:13:21.290

请参阅 mysql 类型大小：[http](http://dev.mysql.com/doc/refman/5.0/en/integer-types.html) ://dev.mysql.com/doc/refman/5.0/en/integer-types.html 1000 亿 = 10^11，因此 BIGINT 类型将起作用。

# iphone - 在 iPhone 和 iPod 上测试 iOS 应用程序的区别

> ID：11547616
> 
> 赞同：0
> 
> 时间：2012-07-18T18:05:27.137
> 
> 标签：iphone, ios, ipod

我正在开发一个不使用任何电话功能的应用程序。但它需要互联网连接。如果我在 iPod 而不是 iPhone 上测试应用程序就足够了吗？主要是视网膜显示器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T18:16:46.633

如果你有一个更新的 iPod touch 带有视网膜显示屏，那么是的，它应该没问题。如果不是，您可能还想在具有视网膜显示屏的设备上进行测试。但总的来说，在多个设备上测试您的应用程序是个好主意。

# user-interface - 如何使用在 GTK 的文本框中输入的值？

> ID：11547617
> 
> 赞同：0
> 
> 时间：2012-07-18T18:05:30.183
> 
> 标签：user-interface, gtk

我有一个文本框要求一个值。如何捕获此值并将其传递给另一个函数？

```
int main (int argc, char *argv[]) {
  GtkWidget *window,*table,*label,*entry;
  gtk_init(&argc, &argv);

  //Create the main window
  window = gtk_window_new(GTK_WINDOW_TOPLEVEL);
  initialize_window(window);

   /* Create a 1x2 table */
   table = gtk_table_new (1, 2, TRUE);
   gtk_container_add (GTK_CONTAINER (window), table);

  /* create a new label. */
  label = gtk_label_new ("Enter some text:" );
  //gtk_misc_set_alignment (GTK_MISC (label), 0, 0);
  gtk_table_set_homogeneous(GTK_TABLE (table), TRUE);
  gtk_table_attach_defaults (GTK_TABLE (table), label, 1, 2, 0, 1);

  //create a text box
  //  entry = gtk_entry_new ();
  gtk_entry_set_max_length (GTK_ENTRY (entry),0);
  gtk_table_attach_defaults (GTK_TABLE (table), entry, 0, 1, 0, 1);
  gtk_widget_show_all(window);
} 
```

现在我想使用这个值并将它传递给某个函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T18:27:11.137

像这样的东西应该工作。当`Enter`按键被按下时，`entry_activated`将被调用：

```
static void entry_activated(GtkEntry *entry, gpointer user_data)
{
    int i;
    const gchar *entered = gtk_entry_get_text(entry);

    i = atoi(entered); // strtol() would be better, but this will work.

    g_message("Entry: %d", i);
}

int main (int argc, char *argv[]) {
    /* ... stuff ... */

    entry = gtk_entry_new();
    g_signal_connect(G_OBJECT(entry), "activate", G_CALLBACK(entry_activated), NULL);

    /* ... stuff ... */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T14:54:31.503

作为旁注，如果你想要的只是一个数值，你最好首先使用 GtkSpinButton 。这样你就不必经历转换字符串的麻烦了。就目前而言，用户仍然可以输入任何文本并可能搞砸您的程序。

您可以使用轻松创建 SpinButton

```
GtkWidget *sbutton = gtk_spin_button_new_with_range(<minimum>, <maximum>, <step>); 
```

然后连接到“value-changed”信号。然后只需提取值

```
gdouble value = gtk_spin_button_get_value(GTK_SPIN_BUTTON(sbutton)); 
```

# c# - ApiController (MVC4 Web API) 的输出缓存

> ID：11547618
> 
> 赞同：49
> 
> 时间：2012-07-18T18:05:32.533
> 
> 标签：c#, asp.net-web-api, outputcache, http-caching

我正在尝试在 Web API中缓存[ApiController方法的输出。](http://msdn.microsoft.com/en-us/library/system.web.http.apicontroller.aspx)

这是控制器代码：

```
public class TestController : ApiController
{
    [OutputCache(Duration = 10, VaryByParam = "none", Location = OutputCacheLocation.Any)]
    public string Get()
    {
        return System.DateTime.Now.ToString();
    }
} 
```

注意我还尝试了控制器本身的 OutputCache 属性，以及其参数的几种组合。

路由在 Global.asax 中注册：

```
namespace WebApiTest
{
    public class Global : HttpApplication
    {
        protected void Application_Start(object sender, EventArgs e)
        {
            RouteTable.Routes.MapHttpRoute("default", routeTemplate: "{controller}");
        }
    }
} 
```

我得到了成功的响应，但它没有缓存在任何地方：

```
HTTP/1.1 200 OK
Cache-Control: no-cache
Pragma: no-cache
Content-Type: application/xml; charset=utf-8
Expires: -1
Server: Microsoft-IIS/7.5
X-AspNet-Version: 4.0.30319
X-Powered-By: ASP.NET
Date: Wed, 18 Jul 2012 17:56:17 GMT
Content-Length: 96

<string xmlns="http://schemas.microsoft.com/2003/10/Serialization/">18/07/2012 18:56:17</string> 
```

我无法在 Web API 中找到输出缓存的文档。

这是 MVC4 中 Web API 的限制还是我做错了什么？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-07-18T18:18:07.547

WebAPI 没有对该`[OutputCache]`属性的任何内置支持。查看[这篇文章](http://www.strathweb.com/2012/05/output-caching-in-asp-net-web-api/)，了解如何自己实现此功能。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-03-13T21:27:11.053

Aliostad 的回答指出 Web API 关闭了缓存，而 HttpControllerHandler 的代码显示它在 response.Headers.CacheControl 为空时会这样做。

要使您的示例 ApiController Action 返回可缓存的结果，您可以：

```
using System.Net.Http;

public class TestController : ApiController
{
    public HttpResponseMessage Get()
    {
        var response = Request.CreateResponse(HttpStatusCode.OK);
        response.Content = new StringContent(System.DateTime.Now.ToString());
        response.Headers.CacheControl = new CacheControlHeaderValue();
        response.Headers.CacheControl.MaxAge = new TimeSpan(0, 10, 0);  // 10 min. or 600 sec.
        response.Headers.CacheControl.Public = true;
        return response;
    }
} 
```

你会得到一个像这样的 HTTP 响应头：

```
Cache-Control: public, max-age=600
Content-Encoding: gzip
Content-Type: text/plain; charset=utf-8
Date: Wed, 13 Mar 2013 21:06:10 GMT
... 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-07-19T08:09:41.023

在过去的几个月里，我一直在研究 ASP.NET Web API 的 HTTP 缓存。我为服务器端的[WebApiContrib](https://github.com/WebApiContrib/WebAPIContrib)做出了贡献，相关信息可以在我的[博客](http://byterot.blogspot.co.uk/2012/06/aspnet-web-api-caching-handler.html)上找到。

最近我开始扩展工作并在[CacheCow](https://github.com/aliostad/CacheCow)库中添加客户端。现在已经发布了第一个 NuGet 包（感谢[Tugberk](https://stackoverflow.com/users/463785/tugberk)）。我很快就会就此写一篇博文。所以看空间。

* * *

但为了回答您的问题，ASP.NET Web API 默认关闭缓存。如果您希望响应被缓存，您需要将 CacheControl 标头添加到控制器中的响应中（实际上最好是在类似于 CacheCow 中的 CachingHandler 的委托处理程序中）。

此片段来自`HttpControllerHandler`ASP.NET Web Stack 源代码：

```
 CacheControlHeaderValue cacheControl = response.Headers.CacheControl;

        // TODO 335085: Consider this when coming up with our caching story
        if (cacheControl == null)
        {
            // DevDiv2 #332323\. ASP.NET by default always emits a cache-control: private header.
            // However, we don't want requests to be cached by default.
            // If nobody set an explicit CacheControl then explicitly set to no-cache to override the
            // default behavior. This will cause the following response headers to be emitted:
            //     Cache-Control: no-cache
            //     Pragma: no-cache
            //     Expires: -1
            httpContextBase.Response.Cache.SetCacheability(HttpCacheability.NoCache);
        } 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-04-19T13:49:12.487

我很晚了，但仍然想在 WebApi 中发布这篇关于缓存的精彩文章

[https://codewala.net/2015/05/25/outputcache-doesnt-work-with-web-api-why-a-solution/](https://codewala.net/2015/05/25/outputcache-doesnt-work-with-web-api-why-a-solution/)

```
public class CacheWebApiAttribute : ActionFilterAttribute
{
    public int Duration { get; set; }

    public override void OnActionExecuted(HttpActionExecutedContext filterContext)
    {
        filterContext.Response.Headers.CacheControl = new CacheControlHeaderValue()
        {
            MaxAge = TimeSpan.FromMinutes(Duration),
            MustRevalidate = true,
            Private = true
        };
    }
} 
```

在上面的代码中，我们重写了 OnActionExecuted 方法并在响应中设置了所需的标头。现在我将 Web API 调用修饰为

```
[CacheWebApi(Duration = 20)]
        public IEnumerable<string> Get()
        {
            return new string[] { DateTime.Now.ToLongTimeString(), DateTime.UtcNow.ToLongTimeString() };
        } 
```

* * *

## 回答 #5

> 赞同：-22
> 
> 时间：2012-09-26T05:24:18.787

您可以在常规 MVC 控制器上使用它：

```
[OutputCache(Duration = 10, VaryByParam = "none", Location = OutputCacheLocation.Any)]
public string Get()
{
    HttpContext.Current.Response.Cache.SetOmitVaryStar(true);
    return System.DateTime.Now.ToString();
} 
```

但是 OutputCache 属性位于 System.Web.Mvc 命名空间中，并且在 ApiController 中不可用。

# java - 获取没有key的Struts请求参数

> ID：11547619
> 
> 赞同：0
> 
> 时间：2012-07-18T18:05:33.760
> 
> 标签：java, servlets, struts, struts-1

假设我有以下网址：

> [http://example.com/myvariable1](http://example.com/myvariable1)

在 Struts 1.x 中访问 myvariable1 的最佳方式是什么？

替代方案 - 向变量添加参数：

> [http://example.com/mykey=myvariable1](http://example.com/mykey=myvariable1)

我发现了一个类似的问题，可以用一个参数解决这个问题，但是，我非常想要一个可以让我隐含地得到这个的解决方案。

[无法在struts动作类中获取请求属性](https://stackoverflow.com/questions/6897227/cant-get-request-attribute-in-struts-action-class)

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-07-18T20:34:36.660

除了标准的 Servlet API 之外，Struts1 不提供任何帮助。您需要使用`HttpServletRequest`类中的方法来获取此信息，例如[getRequestURI()](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getRequestURI%28%29)。

Struts1 已经完全过时了。您会从更现代的框架（如 Stripes、Spring MVC、Play 等）中获得更好的支持。

# yii - Yii 使用 CActiveRecord ->with () 方法和共享列名

> ID：11547624
> 
> 赞同：0
> 
> 时间：2012-07-18T18:05:53.440
> 
> 标签：yii

我正在使用 Yii CActiveRecord A ->with('B')->findAll() 方法，其中 hte 列之一与 A 和 B 通用，并且该列也是条件的一部分。

现在的问题是，在执行它时，我得到了 SQL 错误，因为 mySQL 不知道我是要引用 A.column 还是 B.column。我查看了执行的查询，似乎 yii 在执行查询时将表命名为 't'，所以我在条件中附加了 't'.columnname 并且一切正常。

我的问题是这种代码是否适合我使用条件为

'CURDATE() <= `date`AND `t`. `removed`= :删除 AND `ispublic`= 1 AND `isopen`= 1'

虽然我没有提到查询中的“t”。Yii 自己重命名表。如果这似乎是一种很好的编码实践，或者是否有更好的方法，请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T05:22:20.927

当您不使用“with()”时，您可以在不使用列名附加别名“t”的情况下编写条件，但是当您使用“with()”查找关系数据时，您需要添加别名“t”基本模型条件。如果它们不是具有关系的公共列，那么您可以避免基本模型的别名。

Yii 默认为基本模型“t”添加别名，所以你应该使用“t”和基本模型的列名。

# php - 使用 array_filter() 返回两个数组？

> ID：11547627
> 
> 赞同：1
> 
> 时间：2012-07-18T18:06:13.820
> 
> 标签：php, arrays

我正在使用一个 Web 服务，它返回一个对象数组，`$viewData`如下所示：

```
Array
(
    [0] => stdClass Object
        (
            [id] => 64757
            [title] => Frogger
            [votes] => 1
            [status] => gotit
        )

    [1] => stdClass Object
        (
            [id] => 64758
            [title] => The Legend of Zelda
            [votes] => 1
            [status] => wantit
        )

    [2] => stdClass Object
        (
            [id] => 64759
            [title] => Grand Theft Auto
            [votes] => 1
            [status] => wantit
        )

) 
```

我需要将其拆分为两个单独的数组 - 一个包含状态为 wantit 的所有对象，另一个包含状态为 gotit 的对象。

我可以通过使用`array_filter()`自定义函数从中获取一个数组：

```
if(is_array($viewData) and (!empty($viewData))) {
    function splitGames($v){
        if ($v->status==="gotit") {
          return true;
        }
        return false;
    }

    $gotEm = array_filter($viewData, "splitGames");
    print_r($gotEm);

} 
```

这个函数返回我所期望的：

```
Array
(
    [0] => stdClass Object
        (
            [id] => 64757
            [title] => Frogger
            [votes] => 1
            [status] => gotit
        )
) 
```

有没有办法自动将原始数组的剩余部分放入第二个数组，或者我是否需要第二个自定义函数来查找“wantit”状态并`array_filter()`在原始数组上重新运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:18:52.920

如果需要两个数组，则需要调用`array_filter`两次。

或者，您可以从两个空数组开始，然后循环一次`$viewData`，根据值将每个数组成员放入两个数组之一`status`。

这有帮助吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T18:49:06.870

您也可以使用 array_walk。

```
$wantit = array();
$gotit = array();

function wantitorgetit($arr, $key, $arrs)
{

 if ($arr->status=='wantit')
    {

       $arrs[0][]=$arr;
    }
 else
  {
     $arrs[1][] =$arr; 
  }

}

$arrs = array(&$wantit,&$gotit);
array_walk($Viewdata, 'wantitorgetit', $arrs);

print_r($wantit);
print_r($gotit); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-21T17:34:22.193

```
$wantit = [];
$gotit = [];

array_filter($viewData, function ($item) use (&$wantit, &$gotit) {
if ($item['status'] == "wantit") {
    $wantit[] = $item;
} else {
    $gotit[] = $item;
}
return true;
}); 
```

# asp.net-mvc - Html.Label 显示电子邮件地址

> ID：11547631
> 
> 赞同：6
> 
> 时间：2012-07-18T18:06:37.650
> 
> 标签：asp.net-mvc, razor, html.label

我正在使用 Html.Label 在我的 MVC 应用程序中显示一些数据。当我尝试显示电子邮件地址时，它无法正确呈现

```
Model.CopyToEmail = lab@gmail.com
@Html.Label((string)(Model.CopyToEmail)) 
```

但我看到的渲染输出是

```
com 
```

谁能建议如何使用 Html.Label 显示

```
lab@gmail.com 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-18T18:43:10.927

`Html.Label`接受一个字段来显示一个`<label>`标签。
它将您的字符串作为嵌套属性读取，并打印最内层属性的名称。

您只想编写普通文本：

```
@Model.CopyToEmail 
```

您也可以调用`@Html.DisplayFor(m => m.CopyToEmail)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T18:42:09.257

使用强类型视图（将视图模型传递给视图，而*不是使用 ViewBag/ViewData*）是一种很好的做法，并且允许您使用 html 助手的通用重载。这是您使用强类型 html 帮助程序重写的示例

```
Html.LabelFor(model => model.CopyToEmail) 
```

html中的标签不是用来显示数据的，它是*用来编辑标签*属性的。您可以在您的财产上使用[[DisplayAttribute] ，或使用](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.displayattribute.aspx)[此重载](http://msdn.microsoft.com/en-us/library/gg453858%28v=vs.98%29)

```
public static MvcHtmlString Label(
    this HtmlHelper html,
    string expression,
    string labelText
) 
```

//

```
Html.LabelFor(model => model.CopyToEmail, Model.CopyToEmailLabelText) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T18:42:58.873

您能否查看模型或您的数据源到视图以返回属性值：即喜欢，`Html.Encode(Model.Email)`

# php - 管理个人资料图片的最可扩展和最有效的方式是什么

> ID：11547637
> 
> 赞同：1
> 
> 时间：2012-07-18T18:07:05.613
> 
> 标签：php, mysql

我知道这个问题之前已经被问过很多次，但我还没有找到解决我具体情况的答案。

使用 PHP 和 MySQL...

我即将将用户个人资料图片添加到应用程序中，正如我所见，我有几个选择。其中两个如下：

**1.**不参考数据库中的图像并像这样存储图像：-

*   /assets/avatars/32px/userid.jpg

*   /assets/avatars/90px/userid.jpg

*   /assets/avatars/256px/userid.jpg

这意味着没有额外的数据库查找，因为我已经有了相关的用户 ID。

**1.**将相对路径存储在 users_meta 表中，并在检索用户数据时使用连接检索 url。

每种方法的优缺点是什么？如果在您看来，这两种方法都不是最好的方法，那么您认为存储/引用和检索用户个人资料图片的最有效和可扩展的方法是什么。

非常感谢

**编辑：**添加更多细节：

我对选项 1 的担忧是，我不确定文件系统将如何处理单个目录中的 100 万多个文件。它会慢到爬行吗？如果是这样，我该如何解决这个问题？有没有可以消除这个潜在问题的结构？也许使用用户加入的时间作为 url 的一部分并按月存储图像。

例如/assets/avatars/10_2012/small/userid.jpg

10_2012 表示所有在 2012 年 10 月注册的用户。

或者在每个目录中只存储 1000 张图像并访问类似的内容：

*   /assets/avatars/0/small/userid.jpg
*   /assets/avatars/1000/small/userid.jpg
*   /assets/avatars/2000/small/userid.jpg

每次应用达到 1000 * n 个注册用户时添加一个新目录。

这会带来优势吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T19:17:37.103

您可以使用选项 1，但使用部分 id 来创建路径。例如，如果您有六位 id，则可以将前两位数字作为路径的一部分：Id 123456.xyz 将变为 /1/2/123456.xyz。等等......在这个例子中，使用数字 ID，它将限制每个目录包含 1000 个文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T18:09:53.317

我倾向于在我的应用程序中做的是保存原始图像。

查找时，生成缩略图（或任何大小的图像）并将其放入缓存目录中，或者如果图像已存在于缓存目录中，则将其返回给用户。

如果上传图片的人删除或更新了原始图片，您也会将其从缓存中删除。

这样做非常有用，因为您不需要知道最初保存时图像将使用的每个维度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T18:11:05.350

正如您正确指出的那样 - 如果根据您的需要使用文件系统，您不必进行**额外的**数据库查找。这可以节省您的时间和资源。

我可以看到为此使用数据库的唯一好处是“单点”备份。但我怀疑这是一个非常有效的“专业人士”，或者它是否甚至超过了由数据库查找引起的额外间接级别引入的额外复杂性

**编辑**（以匹配问题中的编辑）：文件系统的工作方式很大程度上取决于操作系统。你的目标平台是什么？

# java - 从 JSON 文件将数据导入 Sencha Touch 存储

> ID：11547648
> 
> 赞同：0
> 
> 时间：2012-07-18T18:07:21.473
> 
> 标签：java, json, sencha-touch, webserver, java-server

将数据从 JSON 文件导入到 Store

我已经开始开发一个应用程序，我使用 Sencha Touch 进​​行前端设计和 java 查询后端的数据库。但是，我无法将两者结合在一起。我尝试将来自 java 查询的数据以 json 格式返回到 .json 文件中，然后通过商店将其加载到我的应用程序中，但它似乎不起作用。我在 Chrome 控制台中收到错误，如下所示。

选项 localhost:8080/ProficyAppData/WebContent/app/store/info.json?_dc=1342618907990&page=1&start=0&limit=25 资源加载失败

我的项目包含在一个 Eclipse Java Web 项目中，这样我就可以轻松地使用 localhost 服务器。我不确定为什么 json 数据没有加载到商店中。

店铺：

```
Ext.define('MyApp.store.Questions', {
extend: 'Ext.data.Store',

config: {
autoLoad: true,
model: 'MyApp.model.Question',

proxy: {
type: 'ajax', 
url: 'localhost:8080/ProficyAppData/WebContent/app/store/info.json',
reader: 'json'
},
listeners: {
load: function() {
console.log(this);
}
},
}
}); 
```

模型：

```
Ext.define('MyApp.model.Question', {
extend: 'Ext.data.Model',

config: {
fields: ['id', 'criteria', 'description', 'questionName', 'type']
}
}); 
```

信息.json：

```
[
     {
          "id": 1,
          "criteria": "no criteria yet",
          "description": "no description yet",
          "questionName": "no question yet",
          "type": "n/a"
     },
     {
          "id": 2,
          "criteria": "no criteria yet",
          "description": "no description yet",
          "questionName": "no question yet",
          "type": "n/a"
     },
     {
          "id": 3,
          "criteria": "no criteria yet",
          "description": "no description yet",
          "questionName": "no question yet",
          "type": "n/a"
     },
     {
          "id": 4,
          "criteria": "no criteria yet",
          "description": "no description yet",
          "questionName": "no question yet",
          "type": "n/a"
     },
     {
          "id": 5,
          "criteria": "no criteria yet",
          "description": "no description yet",
          "questionName": "no question yet",
          "type": "n/a"
     },
     {
          "id": 6,
          "criteria": "no criteria yet",
          "description": "no description yet",
          "questionName": "no question yet",
          "type": "n/a"

     }
]

  [1]: http://i.stack.imgur.com/3zxuD.png 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-02T05:57:52.957

我确实有一个类似的样本，我想出了哪种与您的问题相匹配...看看

模型：

```
 Ext.define('MyApp.model.user',{
 extend: 'Ext.data.Model',

   config: {

        identifier:{
          type:'uuid'
        },
       fields: [
        {
          name:'id',
          type:'string'
        },

       {
          name: 'name',
          type:'string'
       },
       {
          name: 'mobile',
          type:'number'
       },
        {
          name: 'birthday',
          type:'date'
       },
       {
          name: 'email',
          type:'email'
       },
        {
          name: 'password',
          type:'password'
       },
       {
          name:'haveid',
          type:'boolean'
       },
       {
        name:'photo'
       }
       ],

 }}); 
```

店铺：

```
Ext.define('MyApp.store.UserStore',{
extend:'Ext.data.Store',

   config: {
    model: 'MyApp.model.user',
    storeId: 'userstore',
    autoload:true,
    proxy: {
        type: 'ajax',
        id: 'userstoreproxy',
        url:'./resources/json/user.json',
        method:'POST',

    // .../RESOURCES/JSON/USER.JSON
        reader:
        {
            type:'json',
            rootProperty:'form.fields'
        }

    }
}}); 
```

要添加到视图中的侦听器：

```
listeners:{
painted:function()
{
    var store=Ext.getStore('userstore');

    store.load({
        callback:function(records)
        {
            localStorage.name=records[0].getData().name;
            localStorage.mobile=records[0].getData().mobile;
            localStorage.birthday=records[0].getData().birthday;
            localStorage.email=records[0].getData().email;
            localStorage.password=records[0].getData().password;

        }

    });
    console.log(store.data);
    // var data=JSON.parse(store.data);
    // console.log(data);        
    var record=store.getAt();
    console.log(record);
     // var bday=localStorage.birthday;
     // if(bday)
     // {
     //    bday.setHours(0);
     //    bday.setMinutes(0);
     //    bday.setSeconds(0);
     //    bday.setMilliseconds(0);
     // }
     // console.log(bday);
    Ext.getCmp('name').setValue(localStorage.name);
    Ext.getCmp('mobile').setValue(localStorage.mobile);
     Ext.getCmp('birthday').setValue();
    Ext.getCmp('email').setValue(localStorage.email);
     Ext.getCmp('password').setValue(localStorage.password);

}} 
```

控制器：

```
Ext.define('MyApp.controller.usercontroller', {
extend: 'Ext.app.Controller',

config: {
    control: {
       save: {
            tap: 'FormSave'
        }

    },

    refs: {
        form:'basicform',
        save: 'button[action=save]'

    }
},

FormSave: function(button,e,options){

  var details=this.getForm().getValues();
  console.log(details);
  var userStore = Ext.getStore('userstore');
  userStore.add(details);
  userStore.sync();
  console.log(details.id);
  Ext.Msg.alert('SUCCESS', 'Data Saved to Local Storage Successfully');}}); 
```

请写一个适当的视图和json ..这应该可以正常工作，除了生日

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T20:05:14.443

你可以从你最喜欢的浏览器启动应用程序，像这样，

```
http://localhost:8080/ProficyAppData/your_name_app.html 
```

我希望这有帮助。:)

# c# - 使用 C# 确定文件类型

> ID：11547654
> 
> 赞同：30
> 
> 时间：2012-07-18T18:07:42.143
> 
> 标签：c#

我有一个网页，其中包含文件上传组件，仅将允许的文档类型上传到我的系统（仅限图像）。我不想使用正则表达式来确定文件类型和使用扩展名。

请让我知道是否有任何其他方法可以在 C# 中确定文件类型。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-07-18T18:35:38.393

我刚刚将我的[VB.NET](https://stackoverflow.com/a/4465905/284240)类转换为 C# 来检测 mime 类型。它们将通过嗅探文件的前 256 个字节（`urlmon.dll`Internet Explorer 使用的 fe）和一组已知类型的组合来识别。

您还可以使用它来检查文件是否是它所伪装的（如果扩展名与类型匹配）。

```
// check whether or not the uploaded file is an image:
var contentType = MimeTypes.GetContentType(FileUpload1.PostedFile.FileName);
if(contentType.StartsWith("image"))
{
    // do something with the image ...
} 
```

这是课程：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.InteropServices;
using System.IO;

public class MimeTypes
{
    private static List<string> knownTypes;

    private static Dictionary<string, string> mimeTypes;

    [DllImport("urlmon.dll", CharSet = CharSet.Auto)]
    private static extern UInt32 FindMimeFromData(
        UInt32 pBC, [MarshalAs(UnmanagedType.LPStr)]
        string pwzUrl, [MarshalAs(UnmanagedType.LPArray)]
        byte[] pBuffer, UInt32 cbSize, [MarshalAs(UnmanagedType.LPStr)]
        string pwzMimeProposed, UInt32 dwMimeFlags, ref UInt32 ppwzMimeOut, UInt32 dwReserverd
    );

    public static string GetContentType(string fileName)
    {
        if (knownTypes == null || mimeTypes == null)
            InitializeMimeTypeLists();
        string contentType = "";
        string extension = System.IO.Path.GetExtension(fileName).Replace(".", "").ToLower();
        mimeTypes.TryGetValue(extension, out contentType);
        if (string.IsNullOrEmpty(contentType) || knownTypes.Contains(contentType))
        {
            string headerType = ScanFileForMimeType(fileName);
            if (headerType != "application/octet-stream" || string.IsNullOrEmpty(contentType))
                contentType = headerType;
        }
        return contentType;
    }

    private static string ScanFileForMimeType(string fileName)
    {
        try
        {
            byte[] buffer = new byte[256];
            using (FileStream fs = new FileStream(fileName, FileMode.Open))
            {
                int readLength = Convert.ToInt32(Math.Min(256, fs.Length));
                fs.Read(buffer, 0, readLength);
            }

            UInt32 mimeType = default(UInt32);
            FindMimeFromData(0, null, buffer, 256, null, 0, ref mimeType, 0);
            IntPtr mimeTypePtr = new IntPtr(mimeType);
            string mime = Marshal.PtrToStringUni(mimeTypePtr);
            Marshal.FreeCoTaskMem(mimeTypePtr);
            if (string.IsNullOrEmpty(mime))
                mime = "application/octet-stream";
            return mime;
        } catch (Exception ex)
        {
            return "application/octet-stream";
        }
    }

    private static void InitializeMimeTypeLists()
    {
        knownTypes = new string[] {
        "text/plain",
        "text/html",
        "text/xml",
        "text/richtext",
        "text/scriptlet",
        "audio/x-aiff",
        "audio/basic",
        "audio/mid",
        "audio/wav",
        "image/gif",
        "image/jpeg",
        "image/pjpeg",
        "image/png",
        "image/x-png",
        "image/tiff",
        "image/bmp",
        "image/x-xbitmap",
        "image/x-jg",
        "image/x-emf",
        "image/x-wmf",
        "video/avi",
        "video/mpeg",
        "application/octet-stream",
        "application/postscript",
        "application/base64",
        "application/macbinhex40",
        "application/pdf",
        "application/xml",
        "application/atom+xml",
        "application/rss+xml",
        "application/x-compressed",
        "application/x-zip-compressed",
        "application/x-gzip-compressed",
        "application/java",
        "application/x-msdownload"
    }.ToList();

        mimeTypes = new Dictionary<string, string>();
        mimeTypes.Add("3dm", "x-world/x-3dmf");
        mimeTypes.Add("3dmf", "x-world/x-3dmf");
        mimeTypes.Add("a", "application/octet-stream");
        mimeTypes.Add("aab", "application/x-authorware-bin");
        mimeTypes.Add("aam", "application/x-authorware-map");
        mimeTypes.Add("aas", "application/x-authorware-seg");
        mimeTypes.Add("abc", "text/vnd.abc");
        mimeTypes.Add("acgi", "text/html");
        mimeTypes.Add("afl", "video/animaflex");
        mimeTypes.Add("ai", "application/postscript");
        mimeTypes.Add("aif", "audio/aiff");
        mimeTypes.Add("aifc", "audio/aiff");
        mimeTypes.Add("aiff", "audio/aiff");
        mimeTypes.Add("aim", "application/x-aim");
        mimeTypes.Add("aip", "text/x-audiosoft-intra");
        mimeTypes.Add("ani", "application/x-navi-animation");
        mimeTypes.Add("aos", "application/x-nokia-9000-communicator-add-on-software");
        mimeTypes.Add("aps", "application/mime");
        mimeTypes.Add("arc", "application/octet-stream");
        mimeTypes.Add("arj", "application/arj");
        mimeTypes.Add("art", "image/x-jg");
        mimeTypes.Add("asf", "video/x-ms-asf");
        mimeTypes.Add("asm", "text/x-asm");
        mimeTypes.Add("asp", "text/asp");
        mimeTypes.Add("asx", "application/x-mplayer2");
        mimeTypes.Add("au", "audio/basic");
        mimeTypes.Add("avi", "video/avi");
        mimeTypes.Add("avs", "video/avs-video");
        mimeTypes.Add("bcpio", "application/x-bcpio");
        mimeTypes.Add("bin", "application/octet-stream");
        mimeTypes.Add("bm", "image/bmp");
        mimeTypes.Add("bmp", "image/bmp");
        mimeTypes.Add("boo", "application/book");
        mimeTypes.Add("book", "application/book");
        mimeTypes.Add("boz", "application/x-bzip2");
        mimeTypes.Add("bsh", "application/x-bsh");
        mimeTypes.Add("bz", "application/x-bzip");
        mimeTypes.Add("bz2", "application/x-bzip2");
        mimeTypes.Add("c", "text/plain");
        mimeTypes.Add("c++", "text/plain");
        mimeTypes.Add("cat", "application/vnd.ms-pki.seccat");
        mimeTypes.Add("cc", "text/plain");
        mimeTypes.Add("ccad", "application/clariscad");
        mimeTypes.Add("cco", "application/x-cocoa");
        mimeTypes.Add("cdf", "application/cdf");
        mimeTypes.Add("cer", "application/pkix-cert");
        mimeTypes.Add("cha", "application/x-chat");
        mimeTypes.Add("chat", "application/x-chat");
        mimeTypes.Add("class", "application/java");
        mimeTypes.Add("com", "application/octet-stream");
        mimeTypes.Add("conf", "text/plain");
        mimeTypes.Add("cpio", "application/x-cpio");
        mimeTypes.Add("cpp", "text/x-c");
        mimeTypes.Add("cpt", "application/x-cpt");
        mimeTypes.Add("crl", "application/pkcs-crl");
        mimeTypes.Add("css", "text/css");
        mimeTypes.Add("def", "text/plain");
        mimeTypes.Add("der", "application/x-x509-ca-cert");
        mimeTypes.Add("dif", "video/x-dv");
        mimeTypes.Add("dir", "application/x-director");
        mimeTypes.Add("dl", "video/dl");
        mimeTypes.Add("doc", "application/msword");
        mimeTypes.Add("dot", "application/msword");
        mimeTypes.Add("dp", "application/commonground");
        mimeTypes.Add("drw", "application/drafting");
        mimeTypes.Add("dump", "application/octet-stream");
        mimeTypes.Add("dv", "video/x-dv");
        mimeTypes.Add("dvi", "application/x-dvi");
        mimeTypes.Add("dwf", "drawing/x-dwf (old)");
        mimeTypes.Add("dwg", "application/acad");
        mimeTypes.Add("dxf", "application/dxf");
        mimeTypes.Add("eps", "application/postscript");
        mimeTypes.Add("es", "application/x-esrehber");
        mimeTypes.Add("etx", "text/x-setext");
        mimeTypes.Add("evy", "application/envoy");
        mimeTypes.Add("exe", "application/octet-stream");
        mimeTypes.Add("f", "text/plain");
        mimeTypes.Add("f90", "text/x-fortran");
        mimeTypes.Add("fdf", "application/vnd.fdf");
        mimeTypes.Add("fif", "image/fif");
        mimeTypes.Add("fli", "video/fli");
        mimeTypes.Add("flv", "video/x-flv");
        mimeTypes.Add("for", "text/x-fortran");
        mimeTypes.Add("fpx", "image/vnd.fpx");
        mimeTypes.Add("g", "text/plain");
        mimeTypes.Add("g3", "image/g3fax");
        mimeTypes.Add("gif", "image/gif");
        mimeTypes.Add("gl", "video/gl");
        mimeTypes.Add("gsd", "audio/x-gsm");
        mimeTypes.Add("gtar", "application/x-gtar");
        mimeTypes.Add("gz", "application/x-compressed");
        mimeTypes.Add("h", "text/plain");
        mimeTypes.Add("help", "application/x-helpfile");
        mimeTypes.Add("hgl", "application/vnd.hp-hpgl");
        mimeTypes.Add("hh", "text/plain");
        mimeTypes.Add("hlp", "application/x-winhelp");
        mimeTypes.Add("htc", "text/x-component");
        mimeTypes.Add("htm", "text/html");
        mimeTypes.Add("html", "text/html");
        mimeTypes.Add("htmls", "text/html");
        mimeTypes.Add("htt", "text/webviewhtml");
        mimeTypes.Add("htx", "text/html");
        mimeTypes.Add("ice", "x-conference/x-cooltalk");
        mimeTypes.Add("ico", "image/x-icon");
        mimeTypes.Add("idc", "text/plain");
        mimeTypes.Add("ief", "image/ief");
        mimeTypes.Add("iefs", "image/ief");
        mimeTypes.Add("iges", "application/iges");
        mimeTypes.Add("igs", "application/iges");
        mimeTypes.Add("ima", "application/x-ima");
        mimeTypes.Add("imap", "application/x-httpd-imap");
        mimeTypes.Add("inf", "application/inf");
        mimeTypes.Add("ins", "application/x-internett-signup");
        mimeTypes.Add("ip", "application/x-ip2");
        mimeTypes.Add("isu", "video/x-isvideo");
        mimeTypes.Add("it", "audio/it");
        mimeTypes.Add("iv", "application/x-inventor");
        mimeTypes.Add("ivr", "i-world/i-vrml");
        mimeTypes.Add("ivy", "application/x-livescreen");
        mimeTypes.Add("jam", "audio/x-jam");
        mimeTypes.Add("jav", "text/plain");
        mimeTypes.Add("java", "text/plain");
        mimeTypes.Add("jcm", "application/x-java-commerce");
        mimeTypes.Add("jfif", "image/jpeg");
        mimeTypes.Add("jfif-tbnl", "image/jpeg");
        mimeTypes.Add("jpe", "image/jpeg");
        mimeTypes.Add("jpeg", "image/jpeg");
        mimeTypes.Add("jpg", "image/jpeg");
        mimeTypes.Add("jps", "image/x-jps");
        mimeTypes.Add("js", "application/x-javascript");
        mimeTypes.Add("jut", "image/jutvision");
        mimeTypes.Add("kar", "audio/midi");
        mimeTypes.Add("ksh", "application/x-ksh");
        mimeTypes.Add("la", "audio/nspaudio");
        mimeTypes.Add("lam", "audio/x-liveaudio");
        mimeTypes.Add("latex", "application/x-latex");
        mimeTypes.Add("lha", "application/lha");
        mimeTypes.Add("lhx", "application/octet-stream");
        mimeTypes.Add("list", "text/plain");
        mimeTypes.Add("lma", "audio/nspaudio");
        mimeTypes.Add("log", "text/plain");
        mimeTypes.Add("lsp", "application/x-lisp");
        mimeTypes.Add("lst", "text/plain");
        mimeTypes.Add("lsx", "text/x-la-asf");
        mimeTypes.Add("ltx", "application/x-latex");
        mimeTypes.Add("lzh", "application/octet-stream");
        mimeTypes.Add("lzx", "application/lzx");
        mimeTypes.Add("m", "text/plain");
        mimeTypes.Add("m1v", "video/mpeg");
        mimeTypes.Add("m2a", "audio/mpeg");
        mimeTypes.Add("m2v", "video/mpeg");
        mimeTypes.Add("m3u", "audio/x-mpequrl");
        mimeTypes.Add("man", "application/x-troff-man");
        mimeTypes.Add("map", "application/x-navimap");
        mimeTypes.Add("mar", "text/plain");
        mimeTypes.Add("mbd", "application/mbedlet");
        mimeTypes.Add("mc$", "application/x-magic-cap-package-1.0");
        mimeTypes.Add("mcd", "application/mcad");
        mimeTypes.Add("mcf", "image/vasa");
        mimeTypes.Add("mcp", "application/netmc");
        mimeTypes.Add("me", "application/x-troff-me");
        mimeTypes.Add("mht", "message/rfc822");
        mimeTypes.Add("mhtml", "message/rfc822");
        mimeTypes.Add("mid", "audio/midi");
        mimeTypes.Add("midi", "audio/midi");
        mimeTypes.Add("mif", "application/x-frame");
        mimeTypes.Add("mime", "message/rfc822");
        mimeTypes.Add("mjf", "audio/x-vnd.audioexplosion.mjuicemediafile");
        mimeTypes.Add("mjpg", "video/x-motion-jpeg");
        mimeTypes.Add("mm", "application/base64");
        mimeTypes.Add("mme", "application/base64");
        mimeTypes.Add("mod", "audio/mod");
        mimeTypes.Add("moov", "video/quicktime");
        mimeTypes.Add("mov", "video/quicktime");
        mimeTypes.Add("movie", "video/x-sgi-movie");
        mimeTypes.Add("mp2", "audio/mpeg");
        mimeTypes.Add("mp3", "audio/mpeg3");
        mimeTypes.Add("mpa", "audio/mpeg");
        mimeTypes.Add("mpc", "application/x-project");
        mimeTypes.Add("mpe", "video/mpeg");
        mimeTypes.Add("mpeg", "video/mpeg");
        mimeTypes.Add("mpg", "video/mpeg");
        mimeTypes.Add("mpga", "audio/mpeg");
        mimeTypes.Add("mpp", "application/vnd.ms-project");
        mimeTypes.Add("mpt", "application/x-project");
        mimeTypes.Add("mpv", "application/x-project");
        mimeTypes.Add("mpx", "application/x-project");
        mimeTypes.Add("mrc", "application/marc");
        mimeTypes.Add("ms", "application/x-troff-ms");
        mimeTypes.Add("mv", "video/x-sgi-movie");
        mimeTypes.Add("my", "audio/make");
        mimeTypes.Add("mzz", "application/x-vnd.audioexplosion.mzz");
        mimeTypes.Add("nap", "image/naplps");
        mimeTypes.Add("naplps", "image/naplps");
        mimeTypes.Add("nc", "application/x-netcdf");
        mimeTypes.Add("ncm", "application/vnd.nokia.configuration-message");
        mimeTypes.Add("nif", "image/x-niff");
        mimeTypes.Add("niff", "image/x-niff");
        mimeTypes.Add("nix", "application/x-mix-transfer");
        mimeTypes.Add("nsc", "application/x-conference");
        mimeTypes.Add("nvd", "application/x-navidoc");
        mimeTypes.Add("o", "application/octet-stream");
        mimeTypes.Add("oda", "application/oda");
        mimeTypes.Add("omc", "application/x-omc");
        mimeTypes.Add("omcd", "application/x-omcdatamaker");
        mimeTypes.Add("omcr", "application/x-omcregerator");
        mimeTypes.Add("p", "text/x-pascal");
        mimeTypes.Add("p10", "application/pkcs10");
        mimeTypes.Add("p12", "application/pkcs-12");
        mimeTypes.Add("p7a", "application/x-pkcs7-signature");
        mimeTypes.Add("p7c", "application/pkcs7-mime");
        mimeTypes.Add("pas", "text/pascal");
        mimeTypes.Add("pbm", "image/x-portable-bitmap");
        mimeTypes.Add("pcl", "application/vnd.hp-pcl");
        mimeTypes.Add("pct", "image/x-pict");
        mimeTypes.Add("pcx", "image/x-pcx");
        mimeTypes.Add("pdf", "application/pdf");
        mimeTypes.Add("pfunk", "audio/make");
        mimeTypes.Add("pgm", "image/x-portable-graymap");
        mimeTypes.Add("pic", "image/pict");
        mimeTypes.Add("pict", "image/pict");
        mimeTypes.Add("pkg", "application/x-newton-compatible-pkg");
        mimeTypes.Add("pko", "application/vnd.ms-pki.pko");
        mimeTypes.Add("pl", "text/plain");
        mimeTypes.Add("plx", "application/x-pixclscript");
        mimeTypes.Add("pm", "image/x-xpixmap");
        mimeTypes.Add("png", "image/png");
        mimeTypes.Add("pnm", "application/x-portable-anymap");
        mimeTypes.Add("pot", "application/mspowerpoint");
        mimeTypes.Add("pov", "model/x-pov");
        mimeTypes.Add("ppa", "application/vnd.ms-powerpoint");
        mimeTypes.Add("ppm", "image/x-portable-pixmap");
        mimeTypes.Add("pps", "application/mspowerpoint");
        mimeTypes.Add("ppt", "application/mspowerpoint");
        mimeTypes.Add("ppz", "application/mspowerpoint");
        mimeTypes.Add("pre", "application/x-freelance");
        mimeTypes.Add("prt", "application/pro_eng");
        mimeTypes.Add("ps", "application/postscript");
        mimeTypes.Add("psd", "application/octet-stream");
        mimeTypes.Add("pvu", "paleovu/x-pv");
        mimeTypes.Add("pwz", "application/vnd.ms-powerpoint");
        mimeTypes.Add("py", "text/x-script.phyton");
        mimeTypes.Add("pyc", "applicaiton/x-bytecode.python");
        mimeTypes.Add("qcp", "audio/vnd.qcelp");
        mimeTypes.Add("qd3", "x-world/x-3dmf");
        mimeTypes.Add("qd3d", "x-world/x-3dmf");
        mimeTypes.Add("qif", "image/x-quicktime");
        mimeTypes.Add("qt", "video/quicktime");
        mimeTypes.Add("qtc", "video/x-qtc");
        mimeTypes.Add("qti", "image/x-quicktime");
        mimeTypes.Add("qtif", "image/x-quicktime");
        mimeTypes.Add("ra", "audio/x-pn-realaudio");
        mimeTypes.Add("ram", "audio/x-pn-realaudio");
        mimeTypes.Add("ras", "application/x-cmu-raster");
        mimeTypes.Add("rast", "image/cmu-raster");
        mimeTypes.Add("rexx", "text/x-script.rexx");
        mimeTypes.Add("rf", "image/vnd.rn-realflash");
        mimeTypes.Add("rgb", "image/x-rgb");
        mimeTypes.Add("rm", "application/vnd.rn-realmedia");
        mimeTypes.Add("rmi", "audio/mid");
        mimeTypes.Add("rmm", "audio/x-pn-realaudio");
        mimeTypes.Add("rmp", "audio/x-pn-realaudio");
        mimeTypes.Add("rng", "application/ringing-tones");
        mimeTypes.Add("rnx", "application/vnd.rn-realplayer");
        mimeTypes.Add("roff", "application/x-troff");
        mimeTypes.Add("rp", "image/vnd.rn-realpix");
        mimeTypes.Add("rpm", "audio/x-pn-realaudio-plugin");
        mimeTypes.Add("rt", "text/richtext");
        mimeTypes.Add("rtf", "text/richtext");
        mimeTypes.Add("rtx", "application/rtf");
        mimeTypes.Add("rv", "video/vnd.rn-realvideo");
        mimeTypes.Add("s", "text/x-asm");
        mimeTypes.Add("s3m", "audio/s3m");
        mimeTypes.Add("saveme", "application/octet-stream");
        mimeTypes.Add("sbk", "application/x-tbook");
        mimeTypes.Add("scm", "application/x-lotusscreencam");
        mimeTypes.Add("sdml", "text/plain");
        mimeTypes.Add("sdp", "application/sdp");
        mimeTypes.Add("sdr", "application/sounder");
        mimeTypes.Add("sea", "application/sea");
        mimeTypes.Add("set", "application/set");
        mimeTypes.Add("sgm", "text/sgml");
        mimeTypes.Add("sgml", "text/sgml");
        mimeTypes.Add("sh", "application/x-bsh");
        mimeTypes.Add("shtml", "text/html");
        mimeTypes.Add("sid", "audio/x-psid");
        mimeTypes.Add("sit", "application/x-sit");
        mimeTypes.Add("skd", "application/x-koan");
        mimeTypes.Add("skm", "application/x-koan");
        mimeTypes.Add("skp", "application/x-koan");
        mimeTypes.Add("skt", "application/x-koan");
        mimeTypes.Add("sl", "application/x-seelogo");
        mimeTypes.Add("smi", "application/smil");
        mimeTypes.Add("smil", "application/smil");
        mimeTypes.Add("snd", "audio/basic");
        mimeTypes.Add("sol", "application/solids");
        mimeTypes.Add("spc", "application/x-pkcs7-certificates");
        mimeTypes.Add("spl", "application/futuresplash");
        mimeTypes.Add("spr", "application/x-sprite");
        mimeTypes.Add("sprite", "application/x-sprite");
        mimeTypes.Add("src", "application/x-wais-source");
        mimeTypes.Add("ssi", "text/x-server-parsed-html");
        mimeTypes.Add("ssm", "application/streamingmedia");
        mimeTypes.Add("sst", "application/vnd.ms-pki.certstore");
        mimeTypes.Add("step", "application/step");
        mimeTypes.Add("stl", "application/sla");
        mimeTypes.Add("stp", "application/step");
        mimeTypes.Add("sv4cpio", "application/x-sv4cpio");
        mimeTypes.Add("sv4crc", "application/x-sv4crc");
        mimeTypes.Add("svf", "image/vnd.dwg");
        mimeTypes.Add("svr", "application/x-world");
        mimeTypes.Add("swf", "application/x-shockwave-flash");
        mimeTypes.Add("t", "application/x-troff");
        mimeTypes.Add("talk", "text/x-speech");
        mimeTypes.Add("tar", "application/x-tar");
        mimeTypes.Add("tbk", "application/toolbook");
        mimeTypes.Add("tcl", "application/x-tcl");
        mimeTypes.Add("tcsh", "text/x-script.tcsh");
        mimeTypes.Add("tex", "application/x-tex");
        mimeTypes.Add("texi", "application/x-texinfo");
        mimeTypes.Add("texinfo", "application/x-texinfo");
        mimeTypes.Add("text", "text/plain");
        mimeTypes.Add("tgz", "application/x-compressed");
        mimeTypes.Add("tif", "image/tiff");
        mimeTypes.Add("tr", "application/x-troff");
        mimeTypes.Add("tsi", "audio/tsp-audio");
        mimeTypes.Add("tsp", "audio/tsplayer");
        mimeTypes.Add("tsv", "text/tab-separated-values");
        mimeTypes.Add("turbot", "image/florian");
        mimeTypes.Add("txt", "text/plain");
        mimeTypes.Add("uil", "text/x-uil");
        mimeTypes.Add("uni", "text/uri-list");
        mimeTypes.Add("unis", "text/uri-list");
        mimeTypes.Add("unv", "application/i-deas");
        mimeTypes.Add("uri", "text/uri-list");
        mimeTypes.Add("uris", "text/uri-list");
        mimeTypes.Add("ustar", "application/x-ustar");
        mimeTypes.Add("uu", "application/octet-stream");
        mimeTypes.Add("vcd", "application/x-cdlink");
        mimeTypes.Add("vcs", "text/x-vcalendar");
        mimeTypes.Add("vda", "application/vda");
        mimeTypes.Add("vdo", "video/vdo");
        mimeTypes.Add("vew", "application/groupwise");
        mimeTypes.Add("viv", "video/vivo");
        mimeTypes.Add("vivo", "video/vivo");
        mimeTypes.Add("vmd", "application/vocaltec-media-desc");
        mimeTypes.Add("vmf", "application/vocaltec-media-file");
        mimeTypes.Add("voc", "audio/voc");
        mimeTypes.Add("vos", "video/vosaic");
        mimeTypes.Add("vox", "audio/voxware");
        mimeTypes.Add("vqe", "audio/x-twinvq-plugin");
        mimeTypes.Add("vqf", "audio/x-twinvq");
        mimeTypes.Add("vql", "audio/x-twinvq-plugin");
        mimeTypes.Add("vrml", "application/x-vrml");
        mimeTypes.Add("vrt", "x-world/x-vrt");
        mimeTypes.Add("vsd", "application/x-visio");
        mimeTypes.Add("vst", "application/x-visio");
        mimeTypes.Add("vsw", "application/x-visio");
        mimeTypes.Add("w60", "application/wordperfect6.0");
        mimeTypes.Add("w61", "application/wordperfect6.1");
        mimeTypes.Add("w6w", "application/msword");
        mimeTypes.Add("wav", "audio/wav");
        mimeTypes.Add("wb1", "application/x-qpro");
        mimeTypes.Add("wbmp", "image/vnd.wap.wbmp");
        mimeTypes.Add("web", "application/vnd.xara");
        mimeTypes.Add("wiz", "application/msword");
        mimeTypes.Add("wk1", "application/x-123");
        mimeTypes.Add("wmf", "windows/metafile");
        mimeTypes.Add("wml", "text/vnd.wap.wml");
        mimeTypes.Add("wmlc", "application/vnd.wap.wmlc");
        mimeTypes.Add("wmls", "text/vnd.wap.wmlscript");
        mimeTypes.Add("wmlsc", "application/vnd.wap.wmlscriptc");
        mimeTypes.Add("word", "application/msword");
        mimeTypes.Add("wp", "application/wordperfect");
        mimeTypes.Add("wp5", "application/wordperfect");
        mimeTypes.Add("wp6", "application/wordperfect");
        mimeTypes.Add("wpd", "application/wordperfect");
        mimeTypes.Add("wq1", "application/x-lotus");
        mimeTypes.Add("wri", "application/mswrite");
        mimeTypes.Add("wrl", "application/x-world");
        mimeTypes.Add("wrz", "model/vrml");
        mimeTypes.Add("wsc", "text/scriplet");
        mimeTypes.Add("wsrc", "application/x-wais-source");
        mimeTypes.Add("wtk", "application/x-wintalk");
        mimeTypes.Add("xbm", "image/x-xbitmap");
        mimeTypes.Add("xdr", "video/x-amt-demorun");
        mimeTypes.Add("xgz", "xgl/drawing");
        mimeTypes.Add("xif", "image/vnd.xiff");
        mimeTypes.Add("xl", "application/excel");
        mimeTypes.Add("xla", "application/excel");
        mimeTypes.Add("xlb", "application/excel");
        mimeTypes.Add("xlc", "application/excel");
        mimeTypes.Add("xld", "application/excel");
        mimeTypes.Add("xlk", "application/excel");
        mimeTypes.Add("xll", "application/excel");
        mimeTypes.Add("xlm", "application/excel");
        mimeTypes.Add("xls", "application/excel");
        mimeTypes.Add("xlsx", "application/excel");
        mimeTypes.Add("xlt", "application/excel");
        mimeTypes.Add("xlv", "application/excel");
        mimeTypes.Add("xlw", "application/excel");
        mimeTypes.Add("xm", "audio/xm");
        mimeTypes.Add("xml", "text/xml");
        mimeTypes.Add("xmz", "xgl/movie");
        mimeTypes.Add("xpix", "application/x-vnd.ls-xpix");
        mimeTypes.Add("xpm", "image/x-xpixmap");
        mimeTypes.Add("x-png", "image/png");
        mimeTypes.Add("xsr", "video/x-amt-showrun");
        mimeTypes.Add("xwd", "image/x-xwd");
        mimeTypes.Add("xyz", "chemical/x-pdb");
        mimeTypes.Add("z", "application/x-compress");
        mimeTypes.Add("zip", "application/x-compressed");
        mimeTypes.Add("zoo", "application/octet-stream");
        mimeTypes.Add("zsh", "text/x-script.zsh");
    }
} 
```

当 MIME 类型未知且仅知道它是 不足够时，您必须更新此列表`application/octet-stream`。检查扩展名是否为 txt 但 mime 类型为二进制数据可能就足够了，因为这意味着该文件不是它所伪装的。

* * *

除此之外，使用`RegularExpressionValidator`.

例如（仅 jpg 图像）：

```
<asp:FileUpload ID="FileUpload1" runat="server" /><br />
<br />
<asp:Button ID="Button1" runat="server" OnClick="Button1_Click" 
 Text="Upload File" />&nbsp;<br />
<br />
<asp:Label ID="Label1" runat="server"></asp:Label>
<asp:RegularExpressionValidator 
 id="RegularExpressionValidator1" runat="server" 
 ErrorMessage="Only jpeg files are allowed!" 
 ValidationExpression="^(([a-zA-Z]:)|(\\{2}\w+)\$?)(\\(\w[\w].*))
    +(.jpg|.JPG|.jpeg|.JPEG)$" 
 ControlToValidate="FileUpload1"></asp:RegularExpressionValidator> 
```

在代码隐藏中：

```
if (FileUpload1.HasFile)
{
    string fileExt = 
       System.IO.Path.GetExtension(FileUpload1.FileName);

    if (fileExt == ".jpeg" || fileExt == ".jpg")
    {
        //do what you want with this image
    }
    else
    {
        Label1.Text = "Only .jpeg files are allowed!";
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-18T18:13:23.570

.NET 中有一个帮助程序类，称为 Path。你需要的是

```
Path.GetExtension(); 
```

它位于 System.IO 命名空间中。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-03-14T21:04:22.463

像这样编写代码从来都不是一个好主意：

```
string fileExt = System.IO.Path.GetExtension(FileUpload1.FileName);

if (fileExt == ".jpeg" || fileExt == ".jpg")
{
    //do what you want with this image
} 
```

原因是它会给你文件名的扩展名。让我们假设用户足够聪明，可以将文件名从 foo.exe 更改为 foo.png 并上传。在此代码示例验证将通过，这对您不利。

识别文件类型的唯一适当方法是检查它的魔术字节。根据维基百科，这个术语（“幻数”）用于文件开头的一组特定的 2 字节标识符，但由于任何二进制序列都可以被视为一个数字，因此文件格式的任何特征都可以唯一区分它可用于识别。这种方法可以更好地保证正确识别格式，并且通常可以确定有关文件的更精确信息。参考[原帖](https://en.wikipedia.org/wiki/File_format#Magic_number)。

正因为如此，一年前我遇到了同样的问题，我创建了一个可以帮助你解决这种情况的[库。](https://github.com/AJMitev/FileTypeChecker)它易于使用，只需几行代码，您就会很安全。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-02-10T04:48:57.467

你可以使用 Myrmec 来识别文件类型，这个库使用文件字节头。这个库在 nuget "Myrmec" 上可用，这是[repo](https://github.com/rocketRobin/myrmec)，myrmec 也支持 mime 类型，你可以试试。代码将是这样的：

```
// create a sniffer instance.
Sniffer sniffer = new Sniffer();

// populate with mata data.
sniffer.Populate(FileTypes.CommonFileTypes);

// get file head byte, may be 20 bytes enough.
byte[] fileHead = ReadFileHead();

// start match.
List<string> results = sniffer.Match(fileHead); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-18T18:15:46.630

看到一个与此类似的示例。应该为您指明正确的方向。来自 msdn 网站。

```
string fileName = @"C:\mydir.old\myfile.ext";
string path = @"C:\mydir.old\";
string extension;

extension = Path.GetExtension(fileName);
Console.WriteLine("GetExtension('{0}') returns '{1}'", 
fileName, extension);

extension = Path.GetExtension(path);
Console.WriteLine("GetExtension('{0}') returns '{1}'", 
path, extension);

// This code produces output similar to the following:
//
// GetExtension('C:\mydir.old\myfile.ext') returns '.ext'
// GetExtension('C:\mydir.old\') returns '' 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-18T18:16:17.773

听起来您正在寻找[`FindMimeFromData`](http://msdn.microsoft.com/en-us/library/ms775107%28VS.85%29.aspx). [这个问题](https://stackoverflow.com/questions/58510/using-net-how-can-you-find-the-mime-type-of-a-file-based-on-the-file-signature?rq=1)中有很多额外的信息和代码。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-18T18:15:00.333

```
 HttpFileCollection hfc = Request.Files;
        for (int i = 0; i < hfc.Count - 1; i++)
        {
            HttpPostedFile hpf = hfc(i);
            if (hpf.ContentType == "image/jpeg")
            {

                //its a jpeg

            }
        } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-07-24T16:30:18.400

*   使用 FileExtensionContentTypeProvider()

```
[HttpGet]
public string Get(string fileName)
{
    var provider = new FileExtensionContentTypeProvider();
    string contentType;
    if(!provider.TryGetContentType(fileName, out contentType))
    {
        contentType = "application/octet-stream";
    }
    return contentType;
} 
```

# php - 为什么有些人抛出异常后返回？

> ID：11547656
> 
> 赞同：27
> 
> 时间：2012-07-18T18:07:53.687
> 
> 标签：php, exception

我在 Github 上的一些代码中看到

```
if($something_funky_happens){
  throw new \LogicException(...);
  return;
} 
```

这是必需的，还是退货不重要？因为我知道在你抛出异常后脚本会停止，所以进一步的代码不会运行

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-07-18T18:34:43.533

# 无法访问的代码

我倾向于在他们的代码中表示它是一个错误。该语句不可访问。每个静态代码分析工具都会抱怨这个无法访问的语句。即使在这种情况下它没有任何危害，您在检查代码时也会收到大量警告。如果您关闭这些警告类型，您可能会错过代码中的其他逻辑错误。这是一种真正的难闻气味，需要修复。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-18T18:13:19.490

因为他们犯了一个错误，或者这是他们的个人喜好。无法访问`return`该代码中的内容，但包含它并没有真正的危害。

从[文档](http://us.php.net/manual/en/language.exceptions.php) *^(（强调我的）)*：

> 当抛出异常时，**语句后面的代码将不会被执行**，PHP 将尝试找到第一个匹配的 catch 块。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-18T18:21:32.823

我想这只是为了更好的可读性......所以如果你假装每个退出点都被一个新行分隔，你可以更快地扫描代码以查找退出点。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-01-06T04:14:33.403

我发现这个约定很有用，因为在尝试读取现有代码时，**提前退出**可能会破坏对代码流的期望。并且经常值得被标记。这几乎是一个goto。

我是从最外面的块到最里面的，而不是按顺序读取的，所以乍一看，埋在块内的任何东西看起来都不那么重要。

比较：

```
function doStuff {
  if (Y) {
    ##
    ## Stuff happens
    ##
  }
  else {
    ##
    ## Other Stuff happens
    ##
  }
  ##
  ## So I assume this always happens
  ##
} 
```

和

```
function doStuff {
  if (Y) {
    ##
    ## Stuff happens
    ##
  }
  else {
    ##
    ## Other Stuff happens
    return; 
    # ^- this is easy to spot when scanning
    ##
  }
  ##
  ## This *usually* happens
  ##
} 
```

我更喜欢后者，*即使它可能有点多余*。

我确实接受这主要是因为我将“return”视为一个重要关键字的条件要高出 100 倍，而我不得不期待例外的次数，但我可以发现一个独立的“return”；（或'break;'，甚至'continue;'）在一屏代码中比我能挑出“throw new Exception(xxx,yyy);”*要快得多* 快速滚动时在远处。

如果我处理的代码中异常处理是一种*更*常见的流程管理方法，我可能会更敏感地发现“throw”作为关键字，但我不是。

但是，我也犯了多余的路标，例如：

```
function doStuff() {
  if (X) {
    ## Do this
  }
  else {
    ## Do that
  }
  /* Should not get here. */
  return NULL;
} 
```

... but only in extreme cases where the above logic is hard to follow, *such as when there were early exits expected.*

# objective-c - IONotificationPortDestroy - 打电话还是不打电话？

> ID：11547658
> 
> 赞同：1
> 
> 时间：2012-07-18T18:08:07.407
> 
> 标签：objective-c, macos, usb, iokit

我有代码在 OS X 10.7.4 上使用 XCode 4.3.3 设置 USB 设备添加/删除通知。对于带有 myVid 和 myPid 的 USB 设备，它是非常样板：

```
// Global declarations somewhere near the top of the file.  
IONotificationPortRef g_notificationPort= NULL;  
io_object_t g_notification= 0;  
io_iterator_t g_iteratorAdded= 0; 
.
.
.
- (BOOL)setupDeviceNotification  
{  
// Set up matching dictionary.  
NSMutableDictionary* matchingDictionary= (NSMutableDictionary*)IOServiceMatching(kIOUSBDeviceClassName);  
[matchingDictionary setObject:[NSNumber numberWithLong:myVid] forKey:[NSString stringWithUTF8String:kUSBVendorID]];  
[matchingDictionary setObject:[NSNumber numberWithLong:myPid] forKey:[NSString stringWithUTF8String:kUSBProductID]];  

// Create a run loop source for the notification object.  
g_notificationPort= IONotificationPortCreate(kIOMasterPortDefault);  
CFRunLoopSourceRef notificationRunLoopSource= IONotificationPortGetRunLoopSource(g_notificationPort);  
CFRunLoopAddSource(CFRunLoopGetCurrent(), notificationRunLoopSource, kCFRunLoopDefaultMode);  

// Set up a notification callback for device addition on first match.  
kern_return_t kRet= IOServiceAddMatchingNotification(g_notificationPort, kIOFirstMatchNotification, (CFMutableDictionaryRef)matchingDictionary, deviceAddedCallback, (void*)self, &g_iteratorAdded);  

// Rudimentary error handling.  
if(KERN_SUCCESS != kRet)  
{  
  [matchingDictionary release];  
  return FALSE;  
}  

// Arm the notification and check for existing devices.  
[self deviceWasAdded:g_iteratorAdded];  

return TRUE;
} 
```

此代码运行良好，当添加设备时，我使用 IOServiceAddInterestNotification 使用 IONotificationPortRef 并将设置的 io_object_t 存储在全局对象中。

在分析此代码以进行一些重构（将全局变量转换为类中的对象变量）后，我意识到我从未在我的 IONotificationPortRef 对象上调用 IONotificationPortDestroy。我应该叫它吗？另外，我没有对 IOServiceAddInterestNotification 中分配的 io_object_t 做任何事情 - 那里需要清理吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:58:44.827

好的，我在查阅了很多 Apple 文档后发现的一件事是，我真的应该在通知的 io_object_t 上执行 IOObjectRelease。我找到了一些对它的引用，但最简单的是在 Apple Developer 网站上的文档“用户模式 ​​USB 设备仲裁”中。

# javascript - 广告标签并尝试使用 append / appendTo 而不是 document.write - 不起作用

> ID：11547661
> 
> 赞同：0
> 
> 时间：2012-07-18T18:08:10.020
> 
> 标签：javascript, jquery

我做了很多搜索，但找不到答案。这是代码

```
<div id="uniquediv"></div>
     <script language="JavaScript">
            (function($){
               var srcitem = 'http://someURL_to_an_AD_tag';
                   $('<script/>', {
                      type:    'text/javascript',
                      src:     srcitem
                   }).appendTo("#uniquediv");
            })(jQuery);
     </script> 
```

无论我做什么（尝试了许多不同的东西），js代码都在“uniqueid”div之外。我需要它在 div 中，因为 div 有填充，我需要保留它，因为我包含的 js 是一个广告，我需要在它周围有填充。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T18:33:12.200

（我完全收回我之前的回答）。

当您`$("<script>")`在 jQuery 中执行此操作时，脚本会立即下载并执行。在这种情况下，.appendTo 可能没有任何效果，尤其是在广告正在执行 document.write 的情况下。

在这种情况下，document.write 可能是要走的路。我认为真的没有任何缺点。如果您的广告 src 是静态的，您甚至可能想完全跳过 javascript，只在您的 div 中添加一个标记。

# vim - 我怎样才能在vim中否定一个glob？

> ID：11547662
> 
> 赞同：7
> 
> 时间：2012-07-18T18:08:09.743
> 
> 标签：vim, glob

我正在尝试使用目录中不包含“matcher”的所有文件名填充 vim arglist。我可以使用包含“matcher”的文件名填充它

```
args *matcher* 
```

有没有一种简单的方法来否定 glob 以获取所有不匹配的文件？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-18T19:18:24.073

我知道的唯一方法如下：

```
:args * | silent! argdelete *matcher* 
```

该`silent!`部分需要省略`No match`错误。

**更新。** 还可以创建一个方便的命令来键入更少的键：

```
:command! -nargs=* Args args * | silent! argdelete <args> 
```

并像这样使用它：

```
:Args *matcher* 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T19:31:02.800

xaizek 的命令简短而巧妙；不幸的是，它只处理当前目录中的参数文件。我已经扩展了它以使用任何目录，并将它与其他有用的命令捆绑在一起，以便在我的[ArgsAndMore 插件](http://www.vim.org/scripts/script.php?script_id=4152)中处理参数。

# c# - 在 IIS7 中运行 C# ASP.net Soap Web 服务

> ID：11547663
> 
> 赞同：0
> 
> 时间：2012-07-18T18:08:10.507
> 
> 标签：c#, asp.net, soap, iis-7

我目前正在处理 ac# asp.net web 项目，我正在尝试安装要在 iis7 中使用的soap服务。

`Only files need to run the application`我已经使用 Visual Studio 通过在包/发布设置窗口中进行选择来构建部署包。

然后，我已将构建包的内容复制到我网站内的某个位置，但是当我尝试使用并访问该服务`http://localhost/EmailSoapService/EmailSoapService.asmx`时，却出现错误。我得到的错误是

```
Description: An error occurred during the parsing of a resource required to service this request. Please review the following specific parse error details and modify your source file appropriately. 

Parser Error Message: Could not create type 'EmailSoapService.EmailSoapService'.

Source Error: 

Line 1:  <%@ WebService Language="C#" CodeBehind="EmailSoapService.asmx.cs" Class="EmailSoapService.EmailSoapService" %>

Source File: /EmailSoapService/EmailSoapService.asmx    Line: 1 

Version Information: Microsoft .NET Framework Version:2.0.50727.5456; ASP.NET Version:2.0.50727.5456 
```

我不明白为什么它说它找不到 .cs 文件。诚然，这不在服务器上，但由于我选择仅导出运行应用程序所需的内容，因此我假设网络服务器上不需要 .cs 文件。

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:17:30.210

构建包通常包含一个“引导”可执行文件，该可执行文件会启动该包的安装程序。听起来好像您复制了包，但没有*安装*包，因此该站点认为它需要核心 .cs 文件来适应请求。您不能只复制构建/部署包 - 您通常需要将其部署到目标服务器。

您可能会在这里找到一些额外的见解[。](http://learn.iis.net/page.aspx/1081/building-a-web-deploy-package-from-visual-studio-2010/)希望这会有所帮助。祝你好运！

# javascript - Rails 3 Ajax 表单不发送参数

> ID：11547669
> 
> 赞同：2
> 
> 时间：2012-07-18T18:08:23.267
> 
> 标签：javascript, jquery, ajax, ruby-on-rails-3, remote-forms

我的索引页面上有一个表单，用于对记录进行排序，我想向它添加一些 Ajax 功能，但由于某种原因，它不会在我将 Ajax 添加到组合中后立即发送我的表单参数。

这是我的表格：

```
<div id="sort-options">
    <%= form_tag uploads_path, :method => "get", :remote => true do %>          
            <%= select_tag "sort", options_for_select([["Creation Date", "created_at"], ["File Name", "name"], ["Rating", "rating_average"], ["Downloads", "downloads"]]) %>
            <%= select_tag "direction", options_for_select([["Descending", "desc"], ["Ascending", "asc"]]) %>                   
            <%= submit_tag "Sort" %>
    <% end %>   
</div> 
```

还有我的 Ajax javascript：

```
jQuery(document).ready(function($) 
{ 
    $(function () {  
        $('#sort-options input, .pagination a').live("click", function () {  
            $.get(this.href, null, null, 'script');  
            return false;  
        });  
    });

}); 
```

当我单击提交按钮并查看我的 Firebug 控制台以查看发生了什么时，很明显它成功地调用了 Ajax 并且它为页面提供服务没有问题。但是，它完全忽略了我发送的参数，并且在重新查询数据库时没有考虑到这一点。如果我取出'：remote => true'并删除指向Ajax文件的链接，则参数成功地被发送回索引操作 - 只是没有Ajax :(

我应该补充一点，Ajax 目前适用于我在同一页面上的分页。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T18:36:18.480

问题是您将另一个单击处理程序绑定到您的提交按钮，它覆盖了 Rails 的内置 AJAX 功能 ( `:remote => true`)。您的选择器`#sort-options input, .pagination a`不仅匹配分页链接，还匹配表单的提交按钮。按钮没有 href 属性，这是`$.get()`作为 URL 传递的。所以`$.get(this.href, ...)`尝试向空 URL 发出 AJAX GET 请求（它的行为就像它是一个空字符串，因此是当前 URL，没有任何 GET 参数）。

# javascript - 如何对事件对象进行字符串化？

> ID：11547672
> 
> 赞同：40
> 
> 时间：2012-07-18T18:08:30.930
> 
> 标签：javascript, json, serialization, stringify

`JSON.stringify(eventObject);`

给出：

`TypeError: Converting circular structure to JSON`

* * *

`dojox.json.ref.toJson(eventObject);`

给出：

`TypeError: Accessing selectionEnd on an input element that cannot have a selection.`

* * *

是否有一些库/代码可以用来完成它？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-18T18:20:11.610

您将无法使用 JSON.stringify 序列化事件对象，因为事件对象包含对 DOM 节点的引用，并且 DOM 到处都有循环引用（例如，子/父关系）。JSON 默认不能处理这些，所以你有点不走运。

我建议看看[How to serialize DOM node to JSON 即使有循环引用？](https://stackoverflow.com/questions/2303713/how-to-serialize-dom-node-to-json)其中有一些关于如何序列化 DOM 节点的建议。此外，以下问题似乎有有用的信息：

*   [如何使用循环引用保存对象？](https://stackoverflow.com/questions/7420597/javascript-how-to-save-an-object-with-circular-references)
*   [字符串化（转换为 JSON）具有循环引用的 JavaScript 对象](https://stackoverflow.com/questions/10392293/stringify-javascript-object-with-circular-reference)

能够处理循环引用的 JSON 库似乎是

*   [JSON-js（参见cycle.js）](https://github.com/douglascrockford/JSON-js)
*   [dojox.json.ref](http://dojotoolkit.org/reference-guide/1.7/dojox/json/ref.html)

~~或者，如果不需要，可以删除对 DOM 节点的所有引用，然后序列化对象。~~毕竟你不应该这样做。请参阅@PointedEars 评论 :)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-12-29T21:15:08.760

使用“替换器”功能避免错误：

```
JSON.stringify(evt, function(k, v) {
    if (v instanceof Node) {
        return 'Node';
    }
    if (v instanceof Window) {
        return 'Window';
    }
    return v;
}, ' '); 
```

**2019 年更新：**浏览器 API 发生了一些变化，这是一种在事件原型链中公开所有可用键的方法

```
function stringifyEvent(e) {
  const obj = {};
  for (let k in e) {
    obj[k] = e[k];
  }
  return JSON.stringify(obj, (k, v) => {
    if (v instanceof Node) return 'Node';
    if (v instanceof Window) return 'Window';
    return v;
  }, ' ');
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-02-16T20:59:20.507

我遇到了类似的问题，并编写了一个简单的事件序列化程序，它带有一个帮助方法来清理事件的路径属性。此解决方案将数据从事件转换为可序列化对象的方法：

*   复制原始属性
*   复制事件对象中元素属性的 outerHTML
*   计算path属性的选择器路径（这样可以避免复制整个HTML页面的outerHTML）

```
// Calculate a string representation of a node's DOM path.
var pathToSelector = function(node) {
  if (!node || !node.outerHTML) {
    return null;
  }

  var path;
  while (node.parentElement) {
    var name = node.localName;
    if (!name) break;
    name = name.toLowerCase();
    var parent = node.parentElement;

    var domSiblings = [];

    if (parent.children && parent.children.length > 0) {
      for (var i = 0; i < parent.children.length; i++) {
        var sibling = parent.children[i];
        if (sibling.localName && sibling.localName.toLowerCase) {
          if (sibling.localName.toLowerCase() === name) {
            domSiblings.push(sibling);
          }
        }
      }
    }

    if (domSiblings.length > 1) {
      name += ':eq(' + domSiblings.indexOf(node) + ')';
    }
    path = name + (path ? '>' + path : '');
    node = parent;
  }

  return path;
};

// Generate a JSON version of the event.
var serializeEvent = function(e) {
  if (e) {
    var o = {
      eventName: e.toString(),
      altKey: e.altKey,
      bubbles: e.bubbles,
      button: e.button,
      buttons: e.buttons,
      cancelBubble: e.cancelBubble,
      cancelable: e.cancelable,
      clientX: e.clientX,
      clientY: e.clientY,
      composed: e.composed,
      ctrlKey: e.ctrlKey,
      currentTarget: e.currentTarget ? e.currentTarget.outerHTML : null,
      defaultPrevented: e.defaultPrevented,
      detail: e.detail,
      eventPhase: e.eventPhase,
      fromElement: e.fromElement ? e.fromElement.outerHTML : null,
      isTrusted: e.isTrusted,
      layerX: e.layerX,
      layerY: e.layerY,
      metaKey: e.metaKey,
      movementX: e.movementX,
      movementY: e.movementY,
      offsetX: e.offsetX,
      offsetY: e.offsetY,
      pageX: e.pageX,
      pageY: e.pageY,
      path: pathToSelector(e.path && e.path.length ? e.path[0] : null),
      relatedTarget: e.relatedTarget ? e.relatedTarget.outerHTML : null,
      returnValue: e.returnValue,
      screenX: e.screenX,
      screenY: e.screenY,
      shiftKey: e.shiftKey,
      sourceCapabilities: e.sourceCapabilities ? e.sourceCapabilities.toString() : null,
      target: e.target ? e.target.outerHTML : null,
      timeStamp: e.timeStamp,
      toElement: e.toElement ? e.toElement.outerHTML : null,
      type: e.type,
      view: e.view ? e.view.toString() : null,
      which: e.which,
      x: e.x,
      y: e.y
    };

    console.log(JSON.stringify(o, null, 2));
  }
};

// Create a mock event for this example
var evt = new MouseEvent("click", {
  bubbles: true,
  cancelable: true,
  view: window
});
var cb = document.getElementById("clicker");

// Add a click listener
cb.addEventListener("click", serializeEvent);

// Fire the event
cb.dispatchEvent(evt);
```

```
<div>
  <button id="clicker" /> JSONify my click!
</div>
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-10-16T14:59:28.703

Alexander Shutau 给出的代码的改进版本，因为它处理多级对象（ES6）：

```
function stringify_object(object, depth=0, max_depth=2) {
    // change max_depth to see more levels, for a touch event, 2 is good
    if (depth > max_depth)
        return 'Object';

    const obj = {};
    for (let key in object) {
        let value = object[key];
        if (value instanceof Node)
            // specify which properties you want to see from the node
            value = {id: value.id};
        else if (value instanceof Window)
            value = 'Window';
        else if (value instanceof Object)
            value = stringify_object(value, depth+1, max_depth);

        obj[key] = value;
    }

    return depth? obj: JSON.stringify(obj);
} 
```

就这样称呼它：

```
stringify_object(event, 2); 
```

例如，在一个 touchstart 事件中，我得到这个：

```
touchstart : {"isTrusted":true,"touches":{"0":{"identifier":0,"target":{"id":"screen"},"screenX":548,"screenY":281.5,"clientX":498.1817932128906,"clientY":185.90908813476562,"pageX":498.1817932128906,"pageY":185.90908813476562,"radiusX":29.77272605895996,"radiusY":27.954544067382812,"rotationAngle":0,"force":0.5},"length":1,"item":{}},"targetTouches":{"0":{"identifier":0,"target":{"id":"screen"},"screenX":548,"screenY":281.5,"clientX":498.1817932128906,"clientY":185.90908813476562,"pageX":498.1817932128906,"pageY":185.90908813476562,"radiusX":29.77272605895996,"radiusY":27.954544067382812,"rotationAngle":0,"force":0.5},"length":1,"item":{}},"changedTouches":{"0":{"identifier":0,"target":{"id":"screen"},"screenX":548,"screenY":281.5,"clientX":498.1817932128906,"clientY":185.90908813476562,"pageX":498.1817932128906,"pageY":185.90908813476562,"radiusX":29.77272605895996,"radiusY":27.954544067382812,"rotationAngle":0,"force":0.5},"length":1,"item":{}},"altKey":false,"metaKey":false,"ctrlKey":false,"shiftKey":false,"view":"Window","detail":0,"sourceCapabilities":{"firesTouchEvents":true},"which":0,"initUIEvent":{},"NONE":0,"CAPTURING_PHASE":1,"AT_TARGET":2,"BUBBLING_PHASE":3,"type":"touchstart","target":{"id":"screen"},"currentTarget":{"id":"screen"},"eventPhase":2,"bubbles":true,"cancelable":true,"defaultPrevented":false,"composed":true,"timeStamp":192516.7899999651,"srcElement":{"id":"screen"},"returnValue":true,"cancelBubble":false,"path":{"0":{"id":"screen"},"1":{"id":"back"},"2":{"id":""},"3":{"id":""},"4":{},"5":"Window"},"composedPath":{},"stopPropagation":{},"stopImmediatePropagation":{},"preventDefault":{},"initEvent":{}} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-06-11T11:17:54.223

不确定它是否有帮助，但我只是在 Angular JS 文档中偶然发现了这一点：

*来源：[https ://code.angularjs.org/1.5.5/docs/guide/expression#-event-](https://code.angularjs.org/1.5.5/docs/guide/expression#-event-)

```
/*
 * return a copy of an object with only non-object keys
 * we need this to avoid circular references
 */
function simpleKeys (original) {
  return Object.keys(original).reduce(function (obj, key) {
    obj[key] = typeof original[key] === 'object' ? '{ ... }' : original[key];
    return obj;
  }, {});
} 
```

现在您可以执行以下操作：

```
JSON.stringify(simpleKeys(eventObject)); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-02-12T10:13:09.487

因此，问题在于 JSON.stringify 似乎在找到循环引用后立即退出。反正我对循环引用的属性不感兴趣。我得到其他人的方式是

```
var str = "{"
for (var key in data) {
  if (JSON.stringify(data[key]) !== "") {
    str += key + ":" + data[key]) + ",";
  }
}
str += "}" 
```

这基本上会给你剩下的属性。为避免 JS 错误，您可以将 if 放入 try/catch。

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2018-12-10T06:21:16.377

只需使用 JSON.stringify(event) 并将事件数据转换为字符串。

# mysql - 集群 MySQL 环境中运行缓慢的查询

> ID：11547680
> 
> 赞同：1
> 
> 时间：2012-07-18T18:09:12.190
> 
> 标签：mysql

我有一个非常简单的查询，直接相当于

`SELECT * FROM sometable t WHERE somecol = 'somevalue' ORDER BY createdon DESC LIMIT 0,20000;`

当我在我的非集群开发机器上运行此查询时，它会在 0.07 秒内运行以返回 14k 行结果集。当我在我们的一个集群负载平衡服务器上运行相同的查询时，需要半个小时以上才能完成（如果它完全完成的话）。两种环境中的数据完全相同。

对集群框上的查询运行 EXPLAIN 会返回 6 的“行”值，而如果我在我的开发机器上运行它，它会返回 11177 的行值！

任何人都可以解释为什么会这样吗？我怀疑这是由于集群或网络延迟/同步问题造成的，但我不知道如何确定故障排除/诊断。

以下是有关设置的更多信息：

*   表中的总行数约为 19k，因此它甚至没有达到`LIMIT`限制
*   MySQL 版本是 MySQL 服务器：5.1.56-ndb-7.1.15a-cluster-gpl
*   Ubuntu 11.04（GNU/Linux 2.6.38-8-server x86_64）。
*   存储引擎在集群上是 NDBCLUSTER，在我的开发机器上是 InnoDB

表架构如下，其中 {X} 是我本地机器上的 InnoDB 或生产服务器上的 NDBCluster。

```
CREATE TABLE `sometable` (
    `Id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
    `UserId` bigint(20) unsigned NOT NULL,
    `Cookie` varchar(255) DEFAULT NULL,
    `somecol` varchar(30) DEFAULT NULL,
    `IpAddress` varchar(255) DEFAULT NULL,
    `SomeCollection` text,
    `someothercolumn` decimal(6,2) NOT NULL,
    `someothercolumn2` decimal(6,2) DEFAULT NULL,
    `Result` tinyint(4) NOT NULL,
    `Version` tinyint(4) NOT NULL,
    `Source` varchar(255) DEFAULT NULL,
    `CreatedOn` datetime NOT NULL,
    PRIMARY KEY (`Id`),
    KEY `CreatedOnIndex` (`CreatedOn`),
    KEY `SomeColIndex` (`somecol`),
    KEY `ResultIndex` (`Result`),
    KEY `SomeCol2Index` (`someothercolumn2`)
) ENGINE={X} AUTO_INCREMENT=97043 DEFAULT CHARSET=latin1; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:44:32.757

首先，您可能要考虑是否真的需要 MySQL Cluster，它的性能和复杂性是很多人选择不使用它的原因。一对 MySQL Master-Master 复制或 Master-Slave 复制对于很多商店来说已经足够了。其次，如果您必须保持当前架构，您可以在“somecol”列上添加索引，首先尝试 HASH，然后尝试 B-TREE 索引，它们应该会有所帮助，但性能仍然不如您的简单主机实例。

# c# - 使用桌面应用程序访问在线 SQL Server

> ID：11547682
> 
> 赞同：0
> 
> 时间：2012-07-18T18:09:18.050
> 
> 标签：c#, .net, sql-server

什么是最好的，例如以最安全的方式使用独立桌面应用程序访问在线数据库？有人告诉我，出于安全原因，建议您使用本地数据库。但我希望 Web 应用程序和桌面应用程序共享同一个在线数据库，这样我就可以更新它而无需更新桌面应用程序。

我正在使用 .net 4 框架和 c#。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T18:34:52.770

需求决定了实现，而且通常，需求会排除什么是“最好的”。最好是一种理想。有时你只需要完成工作，大约 75% 的时间“相当好”胜过“最好”。如果您必须让多个应用程序访问相同的数据，那么您已经排除了本地数据库。除非您愿意使用复制设置，否则这不是一个选择，一般来说，这实际上还不错（[http://msdn.microsoft.com/en-us/library/ms151198.aspx](http://msdn.microsoft.com/en-us/library/ms151198.aspx)）。

如果您要在网络上使用完整的 SQL Server 实例，那么您的安全选项将视情况而定。内联网还是互联网？每个人都在使用 Windows 或 Linux/Unix 或 Mac 的风格吗？如果它在公司内部并且他们都使用 Windows，则使用 Windows 集成。您可以将其与桌面和 Web 应用程序一起使用。它非常强大，您不必滚动自己的安全代码。如果人们来自世界各地，您可能需要编码和访问表并加密密码。不要以纯文本形式存储它们。如果它通过 Internet，并且世界上的任何人都可以使用面向外部的 Web 应用程序访问它，那么 Microsoft 也可以为您提供选择。先保护应用程序，然后保护数据库。解析这个有用的选项：http: [//msdn.microsoft.com/en-us/magazine/cc301387。](http://msdn.microsoft.com/en-us/magazine/cc301387.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T18:12:57.803

目前还不清楚您为什么要这样做，但 SQL Server 确实支持 SSL 进行加密连接。有关详细信息，请参阅[加密与 SQL Server 的连接。](http://msdn.microsoft.com/en-us/library/ms189067%28v=sql.105%29.aspx)

# java - 如何找到词流中出现频率最高的词？

> ID：11547686
> 
> 赞同：2
> 
> 时间：2012-07-18T18:09:26.573
> 
> 标签：java, restrictions

> **可能重复：**
> [查找数组中的最大重复元素](https://stackoverflow.com/questions/3740371/finding-the-max-repeated-element-in-an-array)

如果有一个词流，其中一个词的出现率在51%以上，如果只有string我们怎么能找到出现频率最高的词呢，内存中可以一次存一个int来帮助我们找到。

我们只能访问每个单词一次，因为这是一个流。

不需要特定的语言，但这主要是针对 Java 的。

另外我不是要代码，只是想法。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T18:33:28.203

[为了完整起见，在我指出的副本](https://stackoverflow.com/questions/3740371/finding-the-max-repeated-element-in-an-array)中提出的算法的 Java 实现，应用于一个示例：

```
public static void main(String[] args) throws InterruptedException {
    List<String> list = Arrays.asList("a", "b", "c", "a", "d", "e", "a", "a", "b", "b", "a");
    int counter = 0;
    String mostFrequentWord = "";
    for (String streamed : list) {
        if (streamed.equals(mostFrequentWord)) {
            counter++;
        } else if (counter == 0) {
            mostFrequentWord = streamed;
            counter = 1;
        } else {
            counter--;
        }
    }
    System.out.println(mostFrequentWord);
} 
```

# ruby-on-rails - 使用 Ruby on Rails 压缩目录中的文件

> ID：11547689
> 
> 赞同：-1
> 
> 时间：2012-07-18T18:09:42.177
> 
> 标签：ruby-on-rails, ruby, zip

我正在尝试使用 RubyZip 压缩目录中包含的所有文件。这是我所拥有的：

```
def bundle
      #create the ZIPfile with the title of (:id).zip
bundle_filename = "public/attachments/#{self.id}/#{self.id}.zip"

      #open the ZIPfile in order to add items in
Zip::ZipFile.open(bundle_filename, Zip::ZipFile::CREATE) {
  |zipfile|
    Dir.foreach("public/attachments/#{self.id}") do |item|
    t = File.open(item)
    zipfile.add(t, "public/attachments/#{self.id}")
    end
  }

    #change permissions on ZIPfile
  File.chmod(0644, bundle_filename)
  self.save
  end 
```

这成功地执行了第一行并创建了具有正确名称的 zip 文件，但它没有添加该目录中包含的所有文件。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-07-03T06:33:01.377

让您的生活变得轻松并在 ruby​​ 方法中使用命令行功能：

在这个实现中，我压缩了一个 rails 目录，所以我在 Rails 函数的帮助下访问该目录的完整路径。您可以自己指定整个路径。

```
path = Rails.root.to_s + "/public/tmpFiles"
archive = path + "/tempFilesArchive.zip"
puts "Path: #{path}"
puts "Archive: #{archive}"
`rm "#{archive}"` # remove the archive file, if it exists.
`zip -rj "#{archive}" "#{path}"` # zip the contents of the directory 
```

这应该在您压缩的同一目录中创建一个名为“tempFilesArchive.zip”的压缩文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T19:23:47.300

我不知道这是否是最正确的方法，但这对我有用。这会将 dir 中的所有文件和文件夹压缩到 zip

```
 require 'zip/zip'

   def bundle
      bundle_filename = "abc.zip"
      FileUtils.rm "abc.zip",:force => true
      dir = "testruby"
      Zip::ZipFile.open(bundle_filename, Zip::ZipFile::CREATE) { |zipfile|
        Dir.foreach(dir) do |item|
          item_path = "#{dir}/#{item}"
          zipfile.add( item,item_path) if File.file?item_path
        end
      }
     File.chmod(0644,bundle_filename)
   end 
```

# django - Django i18n 无法识别语言文件

> ID：11547690
> 
> 赞同：5
> 
> 时间：2012-07-18T18:09:52.397
> 
> 标签：django, internationalization, translation

在 Django 1.4 上，我想在我的网站中使用两种语言，土耳其语（'tr'）和英语（'en'）。

这是我目前的设置：

设置.py：

```
USE_I18N = True
LANGUAGES = (
    ('en', 'English'),
    ('tr', 'Turkish'),
)

MIDDLEWARE_CLASSES = (
    'django.contrib.sessions.middleware.SessionMiddleware',    
    'django.middleware.locale.LocaleMiddleware', # I have locale middleware
    'django.middleware.common.CommonMiddleware',    
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
)

LOCALE_PATHS = (
    '/myproject/locale/', 
) 
```

我的语言环境文件是这样的目录顺序：

```
#tr files
/myproject/locale/tr/LC_MESSAGES/django.mo
/myproject/locale/tr/LC_MESSAGES/django.po
#en files
/myproject/locale/en/LC_MESSAGES/django.mo
/myproject/locale/en/LC_MESSAGES/django.po 
```

而且我仍然看不到我的翻译，从我的 shell 中尝试（它也不适用于 {% trans "Corporate" %} 模板）：

```
>>> from django.utils import translation
>>> translation.activate('tr')
>>> translation.ugettext('Corporate')
u'Corporate' 
```

我在这里错过了什么吗？奇怪的是，它翻译成“家”之类的词，因为原始 Django 有这些翻译，但没有我的翻译文件。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-23T09:35:27.447

在您的情况下，您必须放入`LOCALE_PATHS`您的语言环境目录的绝对路径，即

```
LOCALE_PATHS = (
    '/home/path_to_your_project/myproject/locale/', 
) 
```

我猜你已经尝试在那里设置相对路径。

我有类似的问题：我一直在使用 django 1.3，并且我的语言环境目录在我的项目的根目录中，即在 settings.py 和 manage.py 文件附近。但是当我使用 django 1.4 创建项目时，项目目录结构已更改：settings.py 已移至 myproject/myproject 文件夹。我仍然在 myproject/ 中创建`locale`文件夹（不在 myproject/myproject 中）。使用 django 1.4 它不再工作了。

阅读我理解的[文档](https://docs.djangoproject.com/en/dev/topics/i18n/translation/#how-django-discovers-translations)，django 就是找不到我的`locale`文件夹。因此，对我有帮助的解决方案 - 要么将`locale`dir 移动到 myproject/myproject 中并且不设置任何，要么将 dir`LOCALE_PATHS`留`locale`在 myproject/ 路径中，并在`LOCALE_PATHS`元组的 settings.py 中添加完整路径。

# php - 如何使用 javascript 或 jQuery 进行计算，从各种不同的元素中获取值？

> ID：11547699
> 
> 赞同：0
> 
> 时间：2012-07-18T18:10:36.063
> 
> 标签：php, javascript, jquery

我目前正在尝试为我的第一个网站构建报价计算器，我已经学习了一周的 Javascript，我使用 jQuery 在网站加载时隐藏各种元素，然后在单击相关按钮时显示。第一个问题，通过这样做，我是否会在任何新的 javascript 代码和 jQuery 代码之间产生任何冲突？

我已经建立了一个弹出界面来分解提供的服务，有 5 个类别。当单击“您需要存储多少个盒子？”时，我进一步开发了一个类别来显示。它下面有一个文本框，旁边有一个提交按钮。单击提交按钮时，它会显示一个新问题；“你想存放多久？” 还有两个名为“周”和“月”的文本框，带有另一个提交按钮。

我希望实现的是创建一个函数来获取输入到第一个框中的值，将给定的数字除以 18 并将其向上舍入到下一个整数，即使它是 1.000001。同时，我需要将输入“月”的值乘以 4.33 并向上取整。然后将months*4.33的结果与输入到weeks的值相加，得到总持续时间，最终的计算必须是(totalduration*2.50)*resultofthefirstcalculation。最终结果必须显示在我选择的文本框中作为货币价值 - 0.00 英镑

许多问题：

我使用的所有文本框都必须在“表单”标签内，以便 javascript 正确找到它们吗？如果是这样，是否必须全部采用一种形式，还是我可以使用多种形式？
我可以在同一个“脚本”标签中混合使用 Javascript 和 jQuery 吗？如果是这样，一个应该先于另一个吗？

稍后，一旦报价计算器功能正常，我计划使用 PHP 向用户发送一封包含报价详细信息的电子邮件，并发送给我自己。我是否需要在我的 HTML/Javascript 中考虑这一点？我想发送的所有细节都必须是：一种形式/不止一种形式/没关系，可以是任何元素吗？

这是几乎完美工作状态的弹出按钮（减去计算lol），右侧元素有轻微缺陷，但我已在网站代码中修复此问题。在脚本标签的顶部，在代码的底部，我已经包含了我在进行一些思维导图之后进行部分计算的最佳尝试，以了解所需的内容和顺序。

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <title>Untitled Document</title>
    <script type="text/javascript" src="jquery.js"></script>
    <style type="text/css">
    body { width:100%; height:100%; text-align:center; margin:0px; }
    div#bodycontainer { position:absolute; min-width:100%; height:100%; padding:0px; z-index:100; }
    div.centerdiv { position:relative; width:1100px; height:100%; margin:0 auto; border-left:solid 2px #ddd; border-right:solid 2px #ddd; background-image:url(images/transport_background_alt.png); overflow:visible; background-position:0px 0px; background-repeat:no-repeat; z-index:1 }
    div#getaquote { width:320px; height:55px; border:solid 1px #516c84; border-radius:15px; float:right; background:url(images/quotebkgd.png) no-repeat #fff; background-position:500px -50px; padding:none; }
    button#quote { width:300px; height:50px; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:22px; color:#516c84; background-color:#fff; border:none; }
    p#quotetitle { position:relative; top:20px; left:20px; width:500px; height:100px; font-family:"Bookman Old Style", Times New Roman, Times, serif; font-size:28px; color:#516c84; margin:0px; text-align:left; }
    div#callus { position:absolute; top:435px; width:340px; height:110px; font-family:"Bookman Old Style", Times New Roman, Times, serif; float:left;/*border:solid 1px #000;*/ }
    div#emailus { position:absolute; top:435px; left:340px; width:370px; height:110px; font-family:"Bookman Old Style", Times New Roman, Times, serif; float:left; }
    img.icon { float:left; }
    p#email { position:absolute; top:10px; left:120px; font-size:30px; font-weight:bold; color:#516c84; margin:0px; line-height:34px; }
    p#smallertxt { position:absolute; top:50px; left:100px; font-size:22px; color:#516c84; margin:0px; }
    p#call { position:absolute; top:10px; left:105px; font-size:28px; font-weight:bold; color:#516c84; margin:0px; line-height:34px; }
    div#minbutton { width:52px; height:52px; position:absolute; top:15px; left:915px;/*border:solid 1px #000;*/ }
    div#minbutton a:hover img { background:#516c84; }
    div.quotebuttons { position:absolute; top:70px; left:15px; width:200px; height:auto; }
    button#servcat1 { position:relative; display:block; float:left; width:200px; height:60px; margin-top:7px; font-family:"Bookman Old Style", Times New Roman, Times, serif; font-size:22px; color:#516c84; background:#fff; border:outset 3px #516c84; border-radius:5px; }
    button#servcat1:hover { background:#516c84; color:#fff; }
    button#servcat1:click {
    background:#516c84;
    color:#fff;
    }
    button#servcat2 { position:relative; display:block; float:left; width:200px; height:60px; margin-top:7px; font-family:"Bookman Old Style", Times New Roman, Times, serif; font-size:22px; color:#516c84; background:#fff; border:outset 3px #516c84; border-radius:5px; }
    button#servcat2:hover { background:#516c84; color:#fff; }
    button#servcat3 { position:relative; display:block; float:left; width:200px; height:60px; margin-top:7px; font-family:"Bookman Old Style", Times New Roman, Times, serif; font-size:22px; color:#516c84; background:#fff; border:outset 3px #516c84; border-radius:5px; }
    button#servcat3:hover { background:#516c84; color:#fff; }
    button#servcat4 { position:relative; display:block; float:left; width:200px; height:60px; margin-top:7px; font-family:"Bookman Old Style", Times New Roman, Times, serif; font-size:22px; color:#516c84; background:#fff; border:outset 3px #516c84; border-radius:5px; }
    button#servcat4:hover { background:#516c84; color:#fff; }
    button#servcat5 { position:relative; display:block; float:left; width:200px; height:60px; margin-top:7px; font-family:"Bookman Old Style", Times New Roman, Times, serif; font-size:22px; color:#516c84; background:#fff; border:outset 3px #516c84; border-radius:5px; }
    button#servcat5:hover { background:#516c84; color:#fff; }
    div#transportopt { position:absolute; top:73px; left:230px; width:500px; height:330px; border:outset 3px #000; }
    div#storageopt { position:absolute; top:73px; left:230px; width:500px; height:330px;/*border:outset 3px #000;*/
    }
    div#freightopt { position:absolute; top:73px; left:230px; width:500px; height:330px; border:outset 3px #000; }
    div#relocationopt { position:absolute; top:73px; left:230px; width:500px; height:330px; border:outset 3px #000; }
    div#exhibitionopt { position:absolute; top:73px; left:230px; width:500px; height:330px; border:outset 3px #000; }
    div#quoteelements { position:absolute; left:750px; width:auto; height:auto; left:750px; }
    form#form { position:absolute; top:270px; width:205px; height:225px; /*border:solid 1px #000;*/ font-family:"Bookman Old Style", Times New Roman, Times, serif; font-size:20px; color:#fff; line-height:30px; }
    form#quoteform { background:none; }
    input.formdata { height:30px; width:200px; border-radius:5px; }
    input#submitbtn { position:relative; display:block; float:right; width:130px; height:50px; margin-top:7px; font-family:"Bookman Old Style", Times New Roman, Times, serif; font-size:22px; background:#516c84; color:#fff; border:outset 3px #516c84; border-radius:5px; }
    input#submitbtn:hover { color:#516c84; background:#fff; border-radius:5px; }
    div#quotecalc { position:absolute; top:63px; width:205px; height:210px; }
    div#total { width:200px; height:52px; margin-top:7px; background:#516c84; border-radius:5px; border:outset 1px #fff; padding:4px; }
    div#tax { width:200px; height:52px; margin-top:7px; background:#516c84; border-radius:5px; border:outset 1px #fff; padding:4px; }
    div#grandtotal { width:200px; height:52px; margin-top:7px; background:#516c84; border-radius:5px; border:outset 1px #fff; padding:4px; }
    p.calctitles { font-family:"Bookman Old Style", Times New Roman, Times, serif; font-weight:bold; color:#fff; text-align:left; margin-left:5px; margin-top:0px; text-decoration:underline; }
    #numberprice { max-width:150px; max-height:22px; font-family:"Bookman Old Style", Times New Roman, Times, serif; font-weight:500; font-size:20px; padding:0px; color:#fff; text-align:right; text-decoration:underline; margin-top:0px; border:none; background:#516c84; }
    #storagebutton1 { width:230px; height:70px; font-family:"Bookman Old Style", Times New Roman, Times, serif; font-size:22px; background:#516c84; color:#fff; border:outset 3px #516c84; border-radius:5px; margin-right:10px; }
    #storagebutton1:hover { background:#fff; color:#516c84; font-weight:bold; }
    #storagebutton2 { width:230px; height:70px; font-family:"Bookman Old Style", Times New Roman, Times, serif; font-size:22px; background:#516c84; color:#fff; border:outset 3px #516c84; border-radius:5px; }
    #storagebutton2:hover { background:#fff; color:#516c84; font-weight:bold; }
    #backbutton { width:70px; height:70px; font-family:"Bookman Old Style", Times New Roman, Times, serif; font-size:16px; background:#516c84; color:#fff; border:outset 3px #516c84; border-radius:5px; margin-right:10px; }
    #backbutton:hover { background:#fff; color:#516c84; font-weight:bold; }
    #backbutton2 { width:70px; height:70px; font-family:"Bookman Old Style", Times New Roman, Times, serif; font-size:16px; background:#516c84; color:#fff; border:outset 3px #516c84; border-radius:5px; margin-right:10px; }
    #backbutton2:hover { background:#fff; color:#516c84; font-weight:bold; }
    .optdisplay { width:470px; height:8px; background:#516c84; margin:10px auto; border:outset 3px #116c84; border-radius:5px; }
    .boxtext { font-family:"Bookman Old Style", Times New Roman, Times, serif; font-size:28px; font-weight:bold; color:#fff; margin-top:10px; }
    #numbofboxes { width:85px; height:55px; background:#fff; color:#516c84; text-align:center; border:outset 2px #516c84; border-radius:5px; font-size:34px; font-weight:bold; margin:0px; }
    #numbweeks { width:60px; height:40px; background:#fff; color:#516c84; text-align:center; border:outset 5px #516c84; border-radius:5px; font-size:34px; font-weight:bold; margin:0px; }
    #numbmonths { width:60px; height:40px; background:#fff; color:#516c84; text-align:center; border:outset 5px #516c84; border-radius:5px; font-size:34px; font-weight:bold; margin-top:0px; }
    .btw { font-family:"Bookman Old Style", Times New Roman, Times, serif; font-size:18px; font-weight:bold; color:#fff; }
    #smtbxno { width:85px; height:55px; background:#516c84; color:#fff; text-align:center; border-top:solid #fff 2px; border-left:solid #eee 1px; border-right:outset 3px #516c84; border-bottom:outset 2px #516c84; border-radius:5px; font-size:24px; font-weight:bold; font-family:"Bookman Old Style", Times New Roman, Times, serif; }
    #tick2 { width:85px; height:55px; background:#516c84; color:#fff; text-align:center; border-top:solid #fff 2px; border-left:solid #eee 1px; border-right:outset 3px #516c84; border-bottom:outset 2px #516c84; border-radius:5px; font-size:24px; font-weight:bold; font-family:"Bookman Old Style", Times New Roman, Times, serif; }
    </style>
    </head><body>
    <div id="bodycontainer">
    <div id="getaquote"> <a>
    <button id="quote"> <strong>Get A Quote Now</strong></br>
    </button>
    </a>
    <p id="quotetitle"> <strong>Choose The Services You Require:</strong> </p>
    <div id="callus"> <img class="icon" src="images/phoneicon.gif" />
    <p id="call"> 0208 208 4411 </br>
    07850 495 804 </p>
    </div>
    <div id="emailus"> <img class="icon" src="images/aticon.gif" />
    <p id="email"> EMAIL: INFO

    <p id="smallertxt"> <strong>BelmontTransport.com</strong> </p>
    </p>
    </div>
    <div id="minbutton"> <a><img class="minimize" src="images/minimizebutton.png" /></a> </div>
    <div class="quotebuttons"> <a>
    <button id="servcat1"> <strong>Transport</strong> </button>
    </a> <a>
    <button id="servcat2"> <strong>Storage</strong> </button>
    </a> <a>
    <button id="servcat3"> <strong>Freight</strong> </button>
    </a> <a>
    <button id="servcat4"> <strong>Relocation</strong> </button>
    </a> <a>
    <button id="servcat5"> <strong>Exhibition</strong> </button>
    </a> </div>
    <div id="transportopt">
    <div id="dedicatedtransport" onclick="addselected">
    <input type="checkbox" name="options" onclick="options" value=250>
    Dedicated Transport
    </input>
    </div>
    <div id="commercialtransport"> Commercial Transport </div>
    </div>
    <div id="storageopt"> <a>
    <button id="backbutton"> Back </button>
    </a> <a>
    <button id="backbutton2"> Back </button>
    </a> <a>
    <button id="storagebutton1"> Palletised Storage </button>
    </a> <a>
    <button id="storagebutton2"> Boxed Storage </button>
    </a>
    <div class="optdisplay">
    <div id="noboxes">
    <p class="boxtext">How many boxes do you need to store?</p>
    <div id="boxinputs">
    <input type="text" id="numbofboxes" value="0" name="boxnumber"/>
    <button id="smtbxno"> <img src="images/tick.gif" alt="proceed"/> </button>
    </div>
    <p class="btw"> Standard box dimensions: 40cm x 40cm x 40cm </p>
    </div>
    <div id="storetimebox">
    <p class="boxtext"> How long do you need to store for? </p>
    <p class="btw"> Weeks
    <input type="text" id="numbweeks" value="0" name="weekno" />
    Months
    <input type="text" id="numbmonths" value="0" name="monthno"/>
    </p>
    <button id="tick2" onclick="workitout()"> <img src="images/tick.gif" alt="proceed"/> </button>
    </div>
    </div>
    </div>
    <div id="freightopt"> This is where freight options are displayed </div>
    <div id="relocationopt"> This is where relocation options are displayed </div>
    <div id="exhibitionopt"> This is where exhibition options are displayed </div>
    <div id="quoteelements">
    <form id="form">
    <strong>Name:</strong>
    <input class="formdata" type="text" name="name">
    <strong>Business:</strong>
    <input class="formdata" type="text" name="business">
    <strong>Email Address:</strong>
    <input class="formdata" type="text" name="email">
    <a>
    <input id="submitbtn" type="submit" value="Get Quote">
    </a>
    </form>
    <div id="quotecalc">
    <div id="total">
    <p class="calctitles"> Sub-Total </p>
    <p id="stresult"> WOULD LIKE SUB TOTAL HERE </p>
    </div>
    <div id="tax">
    <p class="calctitles"> VAT </p>
    </div>
    <div id="grandtotal">
    <p class="calctitles"> Grand Total </p>
    <p id="numberprice"> </p>
    </div>
    </div>
    </div>
    </div>
    </div>
    <script type="text/javascript">

    var totalprice=""
    var storagetime=""
    var boxno=""

    function workitout(){
    var a=parseInt(document.boxnumber.value);
    var b=parseInt(document.weekno.value);
    var c=parseInt(document.monthno.value);
    storagetime=(c*4.3);
    Math.round(storagetime)=totalprice;
    document.quotecalc.grandtotal.value=totalprice;
    };

    $(document).ready(function(){
    $("#quotetitle").hide();
    $("#callus").hide();
    $("#emailus").hide();
    $(".quotebuttons").hide();
    $("#minbutton").hide();
    $("#transportopt").hide();
    $("#storageopt").hide();
    $("#freightopt").hide();
    $("#relocationopt").hide();
    $("#exhibitionopt").hide();
    $("#quoteelements").hide();
    $("#quotecalc").hide();
    $("#quoteform").hide();
    $(".optdisplay").hide();
    $("#backbutton").hide();
    $("#backbutton2").hide();
    $("#noboxes").hide();
    $("#storetimebox").hide();

    });

    $("#quote").click(function(){
    $("#getaquote").animate({height:"550px",position:"absolute",top:"125px"});
    $("#getaquote").animate({width:"980px",left:"-245px"})
    $("#quotetitle").show(1000);
    $("#getaquote").css({"border-style":"solid","border-width":"2px","border-color":"#516c84"});
    $("#quote").hide(500);
    $("#bodytext").fadeTo(2500,0.15);
    $("#callus").show(1000);
    $("#emailus").show(1000);
    $(".quotebuttons").show(2000);
    $("#minbutton").show(1500);
    $("#quotecalc").show();
    $("#quoteelements").show(1000);

    /*$("#bodytext").css({"background":"#516c84"});9e9ec6*/

    });

    $("#minbutton").click(function(){
    $("#getaquote").animate({width:"320px",left:"435px"});
    $("#getaquote").animate({height:"55px",position:"absolute",top:"65px"});
    $("#quotetitle").hide();
    $("#getaquote").css({"border-style":"none"});
    /*$("#getaquote").css({"border-style":"solid","border-width":"2px","border-color":"#516c84"});*/
    $("#quote").show(2000);
    $("#bodytext").fadeTo(2500,1);
    $("#callus").hide(1000);
    $("#emailus").hide(1000);
    $(".quotebuttons").hide();
    $("#minbutton").hide();
    $("#transportopt").hide();
    $("#storageopt").hide();
    $("#freightopt").hide();
    $("#relocationopt").hide();
    $("#exhibitionopt").hide();
    $("#quoteelements").hide();

    });

    $("#servcat1").click(function(){
    $("#transportopt").show();
    $("#storageopt").hide();
    $("#freightopt").hide();
    $("#relocationopt").hide();
    $("#exhibitionopt").hide();

    });

    $("#servcat2").click(function(){
    $("#transportopt").hide();
    $("#storageopt").show();
    $("#freightopt").hide();
    $("#relocationopt").hide();
    $("#exhibitionopt").hide();

    });

    $("#servcat3").click(function(){
    $("#transportopt").hide();
    $("#storageopt").hide();
    $("#freightopt").show();
    $("#relocationopt").hide();
    $("#exhibitionopt").hide();

    });

    $("#servcat4").click(function(){
    $("#transportopt").hide();
    $("#storageopt").hide();
    $("#freightopt").hide();
    $("#relocationopt").show();
    $("#exhibitionopt").hide();

    });

    $("#servcat5").click(function(){
    $("#transportopt").hide();
    $("#storageopt").hide();
    $("#freightopt").hide();
    $("#relocationopt").hide();
    $("#exhibitionopt").show();

    });

    $("#storagebutton1").click(function(){
    $("#backbutton").show();
    $(".optdisplay").show()
    $(".optdisplay").animate({height:"245px"});
    $("#storagebutton2").hide();
    $("#storagebutton1").animate({width:"390px"})(5000)

    });

    $("#storagebutton2").click(function(){
    $("#backbutton").show();
    $(".optdisplay").show()
    $(".optdisplay").animate({height:"245px"});
    $("#storagebutton1").hide();
    $("#noboxes").show(500);
    $("#storagebutton2").animate({width:"390px"})(5000)

    });

    $("#backbutton").click(function(){
    $("#storagebutton1").show();
    $("#storagebutton2").show();
    $(".optdisplay").hide();
    $("#backbutton").hide();
    $("#storagebutton2").animate({width:"230px"});
    $("#noboxes").hide();
    $("#storagebutton1").animate({width:"230px"})(5000);

    });

    $("#smtbxno").click(function(){
    $("#noboxes").hide(1000);
    $("#storetimebox").show(1500);
    $("#backbutton").hide();
    $("#backbutton2").show();
    });

    $("#backbutton2").click(function(){
    $("#noboxes").show(1000);
    $("#storetimebox").hide(500);
    $("#backbutton").show();
    $("#backbutton2").hide();
    });

    </script>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T18:46:28.840

首先是一点背景。jQuery 只是一个 javascript 辅助函数和对象的库。这一切都是用 javascript 编写的——它不是一种不同的语言。它只是 javascript。jQuery 和 javascript 之间不存在冲突。

您的问题的一些答案：

> 我目前正在尝试为我的第一个网站构建报价计算器，我已经学习了一周的 Javascript，我使用 jQuery 在网站加载时隐藏各种元素，然后在单击相关按钮时显示。第一个问题，通过这样做，我是否会在任何新的 javascript 代码和 jQuery 代码之间产生任何冲突？

对不起，但这个问题对我来说没有多大意义。jQuery 只是 javascript，因此使用 javascript 和 jQuery 之间没有冲突。

> 我使用的所有文本框都必须在“表单”标签内，以便 javascript 正确找到它们吗？

不，文本框可以在 HTML 中的任何位置。

> 我可以在同一个“脚本”标签中混合使用 Javascript 和 jQuery 吗？

jQuery 是 JavaScript。它们可以自由混合。

> 稍后，一旦报价计算器功能正常，我计划使用 PHP 向用户发送一封包含报价详细信息的电子邮件，并发送给我自己。我是否需要在我的 HTML/Javascript 中考虑这一点？

当您想要实现此功能时，您需要将适当的 HTML/javascript 添加到您的页面。在此之前，您无需执行任何操作。

> 我想发送的所有细节都必须是：一种形式/不止一种形式/没关系，可以是任何元素吗？

这取决于您如何将数据发送到您的服务器。如果是非javascript表单提交，那么所有数据都需要在表单中。如果您使用 javascript 通过 URL 或 ajax 调用将数据发送到服务器，那么数据可以在任何地方，您可以使用 javascript 将其组装成正确的形式以发送到服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T19:00:37.033

如果我理解正确，您希望在单击某个提交按钮或其他控件后获取用户输入数据。尽管您有很多一般性问题，但我会直接跳船并发布您迟早会遇到的实际解决方案。

jQuery 使用一种`val()`方法从输入字段中获取数据。您可能希望将此方法用作`on.('click', function(){})`事件绑定中的回调，以获取该值。

然后您可以处理您的计算，创建一个新的输入字段并重复该过程。

# java - Java- 从同一个 Statement 对象中创建多个 ResultSets- 它会有什么影响吗？

> ID：11547701
> 
> 赞同：4
> 
> 时间：2012-07-18T18:10:55.433
> 
> 标签：java, database, jdbc, resultset

我从同一个**Statement**对象生成了 2 个**ResultSet 。**

 **代码示例如下：

```
Connection con            = null;
Statement  stmt           = null;
ResultSet rs = null;

con = DBAccess.getConnection();
stmt = con.createStatement();

rs = stmt.executeQuery(Query1);
// operate on the resultset

rs = stmt.executeQuery(Query2);   // Is it legal and do not have side-effects?
// operate on the resultset

// close everythings (Resultset, Statement, Connection) 
```

我检查它运行良好。我怀疑它会有任何副作用吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-18T18:12:21.960

从[javadoc](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/Statement.html)：

> 默认情况下，每个 Statement 对象只能同时打开一个 ResultSet 对象。因此，如果一个 ResultSet 对象的读取与另一个 ResultSet 对象的读取交错，则每个对象都必须由不同的 Statement 对象生成。Statement 接口中的所有执行方法都会隐式关闭语句的当前 ResultSet 对象（如果存在打开的对象）。

所以是的，你可以安全地做到这一点。执行第二个查询后，您就无法使用第一个结果集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T09:47:33.290

每个语句对象只有一个Resultset 对象。因此，当您执行另一个查询时，它会在内部关闭现有的结果集对象并打开一个新的结果集对象。但是您无法访问以前的结果集对象。

不会有副作用。你可以随心所欲地使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T21:17:01.517

请记住在使用相同变量引用第二个结果集之前关闭第一个结果集。如果仅在执行第二条语句后关闭结果集，则第二个结果集将关闭，而第一个结果集不会关闭。**

# c# - 为什么我的表单控件都没有被识别为组合框？

> ID：11547704
> 
> 赞同：1
> 
> 时间：2012-07-18T18:11:26.467
> 
> 标签：c#, winforms, dynamic, combobox, event-handling

我正在以这种方式制作一个“只读”组合框：

```
private void comboBox1_SelectedValueChanged(object sender, EventArgs e)
{
     // for this to work, set the comboboxes' Tag to its SelectedIndex after setting that
    ComboBox cb = sender as ComboBox;
     int validSelection = Convert.ToInt32(cb.Tag);
    if (cb.SelectedIndex != validSelection )
    {
        cb.SelectedIndex = validSelection;
    } 
} 
```

...然后尝试将表单上的所有组合框设置为该处理程序，如下所示：

```
foreach (Control c in this.Controls)
{
    if (c is ComboBox)
    {
        (c as ComboBox).SelectedValueChanged += comboBox1_SelectedValueChanged;
    }
} 
```

...但是 if 条件永远不等于 true；表单上有几个 ComboBoxes ......？？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T18:26:35.443

ComboBoxes 最有可能在其他面板中。

尝试递归地遍历它们：

```
private void button1_Click(object sender, EventArgs e) {
  ChangeCombos(this);
}

private void ChangeCombos(Control parent) {
  foreach (Control c in parent.Controls) {
    if (c.Controls.Count > 0) {
      ChangeCombos(c);
    } else if (c is ComboBox) {
      (c as ComboBox).SelectedValueChanged += comboBox1_SelectedValueChanged;
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T18:16:33.473

尽管它在 begin { 上设置了一个断点并调用 c.gettype()

你也可能想这样做

```
if( c.gettype() == typeof(ComboBox))
{

} 
```

# android - 带有警报的 RSS 阅读器

> ID：11547706
> 
> 赞同：1
> 
> 时间：2012-07-18T18:11:30.027
> 
> 标签：android, rss

RSS 阅读器有很多示例，但我试图找到一个示例，当 rss 提要中的新项目可用时使用警报。

我发现[这个](http://automateddeveloper.blogspot.com/2010/08/android-rss-reader-tutorial.html)Android 开源 rss 阅读器似乎是一个很好的起点。当有新项目可用时，我如何调整这个 rss 阅读器来提醒用户。我能想到提醒用户的唯一方法是设置服务以在后台获取 rss，然后他们比较两个数组以查看它们是否匹配。但这可能比我的技能更复杂。

**我在哪里可以找到带有警报的 RSS 阅读器的示例项目，或者如何使开源 Android RSS 阅读器具有警报。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T18:14:31.763

试试这个开始[http://www.ibm.com/developerworks/xml/tutorials/x-androidrss/](http://www.ibm.com/developerworks/xml/tutorials/x-androidrss/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T00:17:35.203

我不知道一个真正能满足你需要的库，但你可以按照以下步骤实现你想要的：

*   在标准 RSS 中，您总是有每个项目的日期。请记住这一点。
*   第一次使用所需的任何库解析 RSS 时，提取最后一项的日期。这可以通过存储第一个用户访问提要的日期或使用后台服务轮询 URI 来完成。
*   存储（在 SQLlite、SharedPreferences 或文件中）最后日期。
*   通过后台服务定期轮询 URL，以使用存储的日期查找新项目。
*   如果有新项目，请显示警报。（状态栏是一个很好的模式选择）。
*   每次您找到新项目时（或者更好的是，每次用户真正访问提要项目时），请记住用新的“最新日期”替换旧的存储日期。

只有当你有信心时，你才能用全新的谷歌云消息来补充我的状态栏建议，这是一种更优雅的通知用户的方式：http: [//developer.android.com/guide/google/gcm/index.html](http://developer.android.com/guide/google/gcm/index.html)

希望这能让你知道你能做什么。

PS：对于 RSS，我发现这个库与 Android 配合得非常好，我自己也在几个项目中使用它。 [https://github.com/ahorn/android-rss/](https://github.com/ahorn/android-rss/)

# matrix - 计算图像 x 和 y

> ID：11547708
> 
> 赞同：1
> 
> 时间：2012-07-18T18:11:51.637
> 
> 标签：matrix, svg, inkscape

我导入图像，`inkscape`然后旋转该图像，然后保存该 svg 文档

我在文件中得到了这个：

```
 .
       .

        <image
           y="-421.28461"
           x="335.27295"
           id="image2991"
           xlink:href="file:///C:/Users/tom/Documents/t.jpg"
           height="369"
           width="360"
           transform="matrix(0.22297057,0.97482518,-0.97482518,0.22297057,0,0)" />
       .
       . 
```

现在在保存文档时，如果 1 可以注意到在 inkscape 编辑器（在其顶部菜单）中**x**和**y的值对于图像对象是不同的，当我们保存文档并在记事本中打开它时，值是不同的。**`x`我们在记事本中看到的&`y`属性的值并不是图像对象的实际`top-left`位置。但是当我们在inkscape中打开它时，inkscape会以某种方式计算出正确的值并将图像放置在正确的位置。

**问题**：现在我只想知道inkscape如何根据图像属性的&值计算正确的`x`& ？`y``x``y`

**注意**：图像已旋转。

**编辑**

[看看这篇文章](http://inkscape.13.n6.nabble.com/text-object-rotation-amp-position-coordinates-x-and-y-values-td2818730.html)，这里`Bric`发布了我试图解释给你的同样的问题。也许这篇文章会让你清楚问题。

# forms - 3 个 jqUI 选项卡，每个选项卡一个表单，获取前 2 个选项卡之一的操作

> ID：11547710
> 
> 赞同：1
> 
> 时间：2012-07-18T18:12:13.163
> 
> 标签：forms, jquery-ui, action, jquery-ui-tabs

我最难获得三种形式之一的动作，以便我可以调用正确的控制器动作。你怎么能做到这一点？

有没有办法获得正确的表格，以便我可以序列化正确的数据并将其发送给我的控制器？我想出了如何采取正确的行动

```
'@Url.Action("SearchByDemographic", "SearchPatients")' 
```

我不知道如何序列化表单...这行不通...

```
$('#searchByDemographics').serialize() 
```

这是在一个ajax调用中......

```
$('#searchByDemographics').submit(function (event) {
        event.preventDefault();
        var urlVal = this.action;// $('#searchByDemographics').attr('action');
        var type = this.method; //$('#searchByDemographics').attr('method');
        debugger;
        event.preventDefault();
        $.ajax({
            url: '@Url.Action("SearchByDemographic", "SearchPatients")', //"SearchPatients/SearchByDemographic",
            type: "POST", //this.method,
            data: $('#searchByDemographics').serialize(),
            dataType: "json",
            contentType: 'application/json; charset=utf-8',
            success: function (data) {
                debugger;
                $('#list').html(data);
                bindData(data);
            }
        });
        return false;
    }); 
```

您如何获取表单以将其海化并将其返回给控制器。

**更新：** 我最近考虑不提交强类型模型，而是尝试通常的表单提交方法。没有骰子。我仍然得到 0 表单数据......我在这里不知所措。这里的任何人都对 Jquery UI 选项卡有任何经验，并且在每个选项卡上都有一个表单，可以将 JSON 数据返回到同一个选项卡，或者返回到立即打开的另一个选项卡？

**更新：内部 HTML**

```
<DIV class="ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix" sizset="0" jQuery17203071998293053285="41" sizcache05855682300806401="4"><SPAN id=ui-dialog-title-1 class=ui-dialog-title jQuery17203071998293053285="42">&nbsp;</SPAN><A class="ui-dialog-titlebar-close ui-corner-all" role=button href="http://localhost:19283/Encounters/ShowAllEncounters?popId=2#" jQuery17203071998293053285="40"><SPAN class="ui-icon ui-icon-closethick" jQuery17203071998293053285="43">close</SPAN></A></DIV>
<DIV style="MIN-HEIGHT: 304px; WIDTH: auto; DISPLAY: block; HEIGHT: auto" class="ui-dialog-content ui-widget-content" jQuery17203071998293053285="38" scrolltop="0" scrollleft="0">
<DIV>
<DIV id=searchPatient class="float-left ui-tabs ui-widget ui-widget-content ui-corner-all" jQuery17203071998293053285="52">
<P></P>
<P></P>
<P></P>
<UL class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
<LI class="ui-state-default ui-corner-top" jQuery17203071998293053285="56"><A href="#searchByMRN" jQuery17203071998293053285="58">Search By MRN</A></LI>
<LI class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active" jQuery17203071998293053285="57"><A href="#searchByDemographics" jQuery17203071998293053285="59">Search By Demo</A></LI></UL>
<DIV style="MARGIN-TOP: 6px; DISPLAY: inline; FLOAT: left; MARGIN-LEFT: 6px; MARGIN-RIGHT: 6px" id=searchByMRN class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide">
<FORM id=formSearchByMRN method=post action=/SearchPatients/SearchByMRN?Length=13 data-ajax-update="#retTable" data-ajax-success="switchToResultTab" data-ajax-mode="replace" data-ajax-method="POST" data-ajax="true">
<P>
<UL>
<LI><LABEL for=MRN>MRN#</LABEL><BR><INPUT id=MRN name=MRN></LI>
<LI><LABEL for=MRNDrop>MRNDrop</LABEL><BR><SELECT id=MRNDrop name=MRNDrop><OPTION selected value=MPACMRN>Medipac</OPTION> <OPTION value=NWMRN>NorthWest</OPTION> <OPTION value=BEDFORD>Epic</OPTION> <OPTION value=CHILDRENS>Bedford</OPTION> <OPTION value=CHILDRENS>Childrens</OPTION> <OPTION value=MAGEE>Magee</OPTION> <OPTION value=PASSAVANT>Passavant</OPTION> <OPTION value=MERCY>Mercy</OPTION> <OPTION value=BEST>Medicare</OPTION> <OPTION value=HEALTHPLAN>4L Health Plan</OPTION> <OPTION value=EMPIID>EMPI</OPTION></SELECT></LI></UL>
<P></P><INPUT id=submitMRN value="Search by MRN" type=submit> </FORM></DIV>
<DIV style="WIDTH: 50%; DISPLAY: inline; FLOAT: left" id=searchByDemographics class="ui-tabs-panel ui-widget-content ui-corner-bottom" jQuery17203071998293053285="70">
<FORM id=searchByDemographics class="ui-tabs-panel ui-widget-content ui-corner-bottom" method=post action=/SearchPatients/SearchByDemographic>
<UL>
<LI><LABEL for=SSN>SSN</LABEL> <BR><INPUT id=SSN name=SSN></LI></UL>
<UL>
<P>Or</P></UL>
<UL>
<LI><LABEL for=FirstName>FirstName</LABEL> <BR><INPUT id=FirstName name=FirstName></LI>
<LI><LABEL for=LastName>LastName</LABEL> <BR><INPUT id=LastName name=LastName></LI>
<LI><LABEL for=dateOfBirth>dateOfBirth</LABEL> <BR><INPUT id=dateOfBirth name=dateOfBirth></LI>
<LI><LABEL for=Address1>Address1</LABEL> <BR><INPUT id=Address1 name=Address1></LI>
<LI><LABEL for=Address2>Address2</LABEL> <BR><INPUT id=Address2 name=Address2></LI>
<LI><LABEL for=City>City</LABEL> <BR><INPUT id=City name=City></LI>
<LI><LABEL for=State>State</LABEL> <BR><INPUT id=State name=State></LI>
<LI><LABEL for=Country>Country</LABEL> <BR><INPUT id=Country name=Country></LI>
<LI><LABEL for=PostCode>PostCode</LABEL> <BR><INPUT id=PostCode name=PostCode></LI></UL><INPUT id=submitDemo class=button value="Search By Demographics" type=submit> </FORM></DIV></DIV>
<DIV class="content-wrapper main-content clear-fix">
<DIV style="WIDTH: 826px" dir=ltr id=gbox_list class="ui-jqgrid ui-widget ui-widget-content ui-corner-all">
<DIV id=lui_list class="ui-widget-overlay jqgrid-overlay"></DIV>
<DIV style="DISPLAY: none" id=load_list class="loading ui-state-default ui-state-active" jQuery17203071998293053285="69">undefined</DIV>
<DIV style="WIDTH: 826px" id=gview_list class=ui-jqgrid-view>
<DIV class="ui-jqgrid-titlebar ui-widget-header ui-corner-top ui-helper-clearfix"><A style="RIGHT: 0px" class="ui-jqgrid-titlebar-close HeaderButton" role=link href="javascript:void(0)" jQuery17203071998293053285="66"><SPAN class="ui-icon ui-icon-circle-triangle-n"></SPAN></A><SPAN class=ui-jqgrid-title>My first grid</SPAN></DIV>
<DIV style="WIDTH: 826px" class="ui-state-default ui-jqgrid-hdiv" loading="false" jQuery17203071998293053285="67">
<DIV class=ui-jqgrid-hbox>
<TABLE style="WIDTH: 429px" class=ui-jqgrid-htable role=grid aria-labelledby=gbox_list border=0 cellSpacing=0 cellPadding=0>
<THEAD>
<TR class=ui-jqgrid-labels role=rowheader jQuery17203071998293053285="68">
<TH style="WIDTH: 34px" id=list_Select class="ui-state-default ui-th-column ui-th-ltr" role=columnheader jQuery17203071998293053285="60"><SPAN style="CURSOR: col-resize" class="ui-jqgrid-resize ui-jqgrid-resize-ltr">&nbsp;</SPAN>
<DIV id=jqgh_list_Select class="ui-th-div-ie ui-jqgrid-sortable" sizset="0" sizcache05855682300806401="6">Select<SPAN class=s-ico sizset="0" sizcache05855682300806401="6"><SPAN class="ui-grid-ico-sort ui-icon-asc ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-ltr" sort="asc"></SPAN><SPAN class="ui-grid-ico-sort ui-icon-desc ui-icon ui-icon-triangle-1-s ui-sort-ltr" sort="desc"></SPAN></SPAN></DIV></TH>
<TH style="WIDTH: 115px" id=list_First_Name class="ui-state-default ui-th-column ui-th-ltr" role=columnheader jQuery17203071998293053285="61"><SPAN style="CURSOR: col-resize" class="ui-jqgrid-resize ui-jqgrid-resize-ltr">&nbsp;</SPAN>
<DIV id=jqgh_list_First_Name class="ui-th-div-ie ui-jqgrid-sortable">First Name<SPAN style="DISPLAY: none" class=s-ico><SPAN class="ui-grid-ico-sort ui-icon-asc ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-ltr" sort="asc"></SPAN><SPAN class="ui-grid-ico-sort ui-icon-desc ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-ltr" sort="desc"></SPAN></SPAN></DIV></TH>
<TH style="WIDTH: 115px" id=list_Last_Name class="ui-state-default ui-th-column ui-th-ltr" role=columnheader jQuery17203071998293053285="62"><SPAN style="CURSOR: col-resize" class="ui-jqgrid-resize ui-jqgrid-resize-ltr">&nbsp;</SPAN>
<DIV id=jqgh_list_Last_Name class="ui-th-div-ie ui-jqgrid-sortable">First Name<SPAN style="DISPLAY: none" class=s-ico><SPAN class="ui-grid-ico-sort ui-icon-asc ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-ltr" sort="asc"></SPAN><SPAN class="ui-grid-ico-sort ui-icon-desc ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-ltr" sort="desc"></SPAN></SPAN></DIV></TH>
<TH style="WIDTH: 145px" id=list_MRN class="ui-state-default ui-th-column ui-th-ltr" role=columnheader jQuery17203071998293053285="63"><SPAN style="CURSOR: col-resize" class="ui-jqgrid-resize ui-jqgrid-resize-ltr">&nbsp;</SPAN>
<DIV id=jqgh_list_MRN class="ui-th-div-ie ui-jqgrid-sortable">MRN<SPAN style="DISPLAY: none" class=s-ico><SPAN class="ui-grid-ico-sort ui-icon-asc ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-ltr" sort="asc"></SPAN><SPAN class="ui-grid-ico-sort ui-icon-desc ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-ltr" sort="desc"></SPAN></SPAN></DIV></TH></TR></THEAD></TABLE></DIV></DIV>
<DIV style="WIDTH: 826px; HEIGHT: 150px" class=ui-jqgrid-bdiv jQuery17203071998293053285="65">
<DIV style="POSITION: relative; HEIGHT: 0.01%">
<DIV></DIV>
<TABLE style="WIDTH: 429px" id=list class=ui-jqgrid-btable role=grid tabIndex=1 aria-labelledby=gbox_list aria-multiselectable=false border=0 cellSpacing=0 cellPadding=0 jQuery17203071998293053285="64">
<TBODY>
<TR style="HEIGHT: auto" class=jqgfirstrow role=row>
<TD style="WIDTH: 34px; HEIGHT: 0px" role=gridcell></TD>
<TD style="WIDTH: 115px; HEIGHT: 0px" role=gridcell></TD>
<TD style="WIDTH: 115px; HEIGHT: 0px" role=gridcell></TD>
<TD style="WIDTH: 145px; HEIGHT: 0px" role=gridcell></TD></TR></TBODY></TABLE></DIV></DIV></DIV>
<DIV id=rs_mlist class=ui-jqgrid-resize-mark>&nbsp;</DIV></DIV></DIV></DIV></DIV>
<DIV style="Z-INDEX: 1000" class="ui-resizable-handle ui-resizable-n" jQuery17203071998293053285="44"></DIV>
<DIV style="Z-INDEX: 1000" class="ui-resizable-handle ui-resizable-e" jQuery17203071998293053285="45"></DIV>
<DIV style="Z-INDEX: 1000" class="ui-resizable-handle ui-resizable-s" jQuery17203071998293053285="46"></DIV>
<DIV style="Z-INDEX: 1000" class="ui-resizable-handle ui-resizable-w" jQuery17203071998293053285="47"></DIV>
<DIV style="Z-INDEX: 1000" class="ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se ui-icon-grip-diagonal-se" jQuery17203071998293053285="48"></DIV>
<DIV style="Z-INDEX: 1000" class="ui-resizable-handle ui-resizable-sw" jQuery17203071998293053285="49"></DIV>
<DIV style="Z-INDEX: 1000" class="ui-resizable-handle ui-resizable-ne" jQuery17203071998293053285="50"></DIV>
<DIV style="Z-INDEX: 1000" class="ui-resizable-handle ui-resizable-nw" jQuery17203071998293053285="51"></DIV> 
```

如您所见，从技术上讲，我在此页面上有两个表格，但您认为通过识别您使用的表格，即`$('#formID').submit()`您应该能够减轻混淆。不知何故，这是行不通的。

**更新：更改了 ID，但仍然无法正常工作......但是我确实使用 Ajax.BeginForm 让它工作**

```
<DIV class="ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix" sizset="0" jQuery17205444165684387369="41" sizcache016230309957162758="4"><SPAN id=ui-dialog-title-1 class=ui-dialog-title jQuery17205444165684387369="42">&nbsp;</SPAN><A class="ui-dialog-titlebar-close ui-corner-all" role=button href="http://localhost:19283/Encounters/ShowAllEncounters?popId=2#" jQuery17205444165684387369="40"><SPAN class="ui-icon ui-icon-closethick" jQuery17205444165684387369="43">close</SPAN></A></DIV>
<DIV style="MIN-HEIGHT: 304px; WIDTH: auto; DISPLAY: block; HEIGHT: auto" class="ui-dialog-content ui-widget-content" sizset="1" jQuery17205444165684387369="38" sizcache016230309957162758="8" scrolltop="0" scrollleft="0">
<DIV sizset="1" sizcache016230309957162758="8">
<DIV id=searchPatient class="float-left ui-tabs ui-widget ui-widget-content ui-corner-all" sizset="1" jQuery17205444165684387369="52" sizcache016230309957162758="8">
<P></P>
<P></P>
<P></P>
<UL class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
<LI class="ui-state-default ui-corner-top" jQuery17205444165684387369="55"><A href="#searchByMRN" jQuery17205444165684387369="57">Search By MRN</A></LI>
<LI class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active" jQuery17205444165684387369="56"><A href="#searchByDemographics" jQuery17205444165684387369="58">Search By Demo</A></LI></UL>
<DIV style="MARGIN-TOP: 6px; DISPLAY: inline; FLOAT: left; MARGIN-LEFT: 6px; MARGIN-RIGHT: 6px" id=searchByMRN class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide">
<FORM id=formSearchByMRN method=post action=/SearchPatients/SearchByMRN?Length=13 sizset="0" sizcache016230309957162758="8" data-ajax-update="#retTable" data-ajax-success="switchToResultTab" data-ajax-mode="replace" data-ajax-method="POST" data-ajax="true">
<P>
<UL>
<LI><LABEL for=MRN>MRN#</LABEL><BR><INPUT id=MRN name=MRN></LI>
<LI><LABEL for=MRNDrop>MRNDrop</LABEL><BR><SELECT id=MRNDrop name=MRNDrop><OPTION selected value=MPACMRN>Medipac</OPTION> <OPTION value=NWMRN>NorthWest</OPTION> <OPTION value=BEDFORD>Epic</OPTION> <OPTION value=CHILDRENS>Bedford</OPTION> <OPTION value=CHILDRENS>Childrens</OPTION> <OPTION value=MAGEE>Magee</OPTION> <OPTION value=PASSAVANT>Passavant</OPTION> <OPTION value=MERCY>Mercy</OPTION> <OPTION value=BEST>Medicare</OPTION> <OPTION value=HEALTHPLAN>4L Health Plan</OPTION> <OPTION value=EMPIID>EMPI</OPTION></SELECT></LI></UL>
<P></P><INPUT id=submitMRN value="Search by MRN" type=submit> </FORM></DIV>
<DIV style="WIDTH: 50%; DISPLAY: inline; FLOAT: left" id=searchByDemographicsDiv sizset="1" sizcache016230309957162758="8">
<FORM id=searchByDemographics class="ui-tabs-panel ui-widget-content ui-corner-bottom" method=post action=/SearchPatients/SearchByDemographic sizset="1" jQuery17205444165684387369="69" sizcache016230309957162758="8">
<UL>
<LI><LABEL for=SSN>SSN</LABEL> <BR><INPUT id=SSN name=SSN></LI></UL>
<UL>
<P>Or</P></UL>
<UL>
<LI><LABEL for=FirstName>FirstName</LABEL> <BR><INPUT id=FirstName name=FirstName></LI>
<LI><LABEL for=LastName>LastName</LABEL> <BR><INPUT id=LastName name=LastName></LI>
<LI><LABEL for=dateOfBirth>dateOfBirth</LABEL> <BR><INPUT id=dateOfBirth name=dateOfBirth></LI>
<LI><LABEL for=Address1>Address1</LABEL> <BR><INPUT id=Address1 name=Address1></LI>
<LI><LABEL for=Address2>Address2</LABEL> <BR><INPUT id=Address2 name=Address2></LI>
<LI><LABEL for=City>City</LABEL> <BR><INPUT id=City name=City></LI>
<LI><LABEL for=State>State</LABEL> <BR><INPUT id=State name=State></LI>
<LI><LABEL for=Country>Country</LABEL> <BR><INPUT id=Country name=Country></LI>
<LI><LABEL for=PostCode>PostCode</LABEL> <BR><INPUT id=PostCode name=PostCode></LI></UL><INPUT id=submitDemo class=button value="Search By Demographics" type=submit> </FORM></DIV></DIV>
<DIV class="content-wrapper main-content clear-fix">
<DIV style="WIDTH: 826px" dir=ltr id=gbox_list class="ui-jqgrid ui-widget ui-widget-content ui-corner-all">
<DIV id=lui_list class="ui-widget-overlay jqgrid-overlay"></DIV>
<DIV style="DISPLAY: none" id=load_list class="loading ui-state-default ui-state-active" jQuery17205444165684387369="68">undefined</DIV>
<DIV style="WIDTH: 826px" id=gview_list class=ui-jqgrid-view>
<DIV class="ui-jqgrid-titlebar ui-widget-header ui-corner-top ui-helper-clearfix"><A style="RIGHT: 0px" class="ui-jqgrid-titlebar-close HeaderButton" role=link href="javascript:void(0)" jQuery17205444165684387369="65"><SPAN class="ui-icon ui-icon-circle-triangle-n"></SPAN></A><SPAN class=ui-jqgrid-title>My first grid</SPAN></DIV>
<DIV style="WIDTH: 826px" class="ui-state-default ui-jqgrid-hdiv" loading="false" jQuery17205444165684387369="66">
<DIV class=ui-jqgrid-hbox>
<TABLE style="WIDTH: 429px" class=ui-jqgrid-htable role=grid aria-labelledby=gbox_list border=0 cellSpacing=0 cellPadding=0>
<THEAD>
<TR class=ui-jqgrid-labels role=rowheader jQuery17205444165684387369="67">
<TH style="WIDTH: 34px" id=list_Select class="ui-state-default ui-th-column ui-th-ltr" role=columnheader jQuery17205444165684387369="59"><SPAN style="CURSOR: col-resize" class="ui-jqgrid-resize ui-jqgrid-resize-ltr">&nbsp;</SPAN>
<DIV id=jqgh_list_Select class="ui-th-div-ie ui-jqgrid-sortable" sizset="0" sizcache016230309957162758="6">Select<SPAN class=s-ico sizset="0" sizcache016230309957162758="6"><SPAN class="ui-grid-ico-sort ui-icon-asc ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-ltr" sort="asc"></SPAN><SPAN class="ui-grid-ico-sort ui-icon-desc ui-icon ui-icon-triangle-1-s ui-sort-ltr" sort="desc"></SPAN></SPAN></DIV></TH>
<TH style="WIDTH: 115px" id=list_First_Name class="ui-state-default ui-th-column ui-th-ltr" role=columnheader jQuery17205444165684387369="60"><SPAN style="CURSOR: col-resize" class="ui-jqgrid-resize ui-jqgrid-resize-ltr">&nbsp;</SPAN>
<DIV id=jqgh_list_First_Name class="ui-th-div-ie ui-jqgrid-sortable">First Name<SPAN style="DISPLAY: none" class=s-ico><SPAN class="ui-grid-ico-sort ui-icon-asc ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-ltr" sort="asc"></SPAN><SPAN class="ui-grid-ico-sort ui-icon-desc ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-ltr" sort="desc"></SPAN></SPAN></DIV></TH>
<TH style="WIDTH: 115px" id=list_Last_Name class="ui-state-default ui-th-column ui-th-ltr" role=columnheader jQuery17205444165684387369="61"><SPAN style="CURSOR: col-resize" class="ui-jqgrid-resize ui-jqgrid-resize-ltr">&nbsp;</SPAN>
<DIV id=jqgh_list_Last_Name class="ui-th-div-ie ui-jqgrid-sortable">First Name<SPAN style="DISPLAY: none" class=s-ico><SPAN class="ui-grid-ico-sort ui-icon-asc ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-ltr" sort="asc"></SPAN><SPAN class="ui-grid-ico-sort ui-icon-desc ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-ltr" sort="desc"></SPAN></SPAN></DIV></TH>
<TH style="WIDTH: 145px" id=list_MRN class="ui-state-default ui-th-column ui-th-ltr" role=columnheader jQuery17205444165684387369="62"><SPAN style="CURSOR: col-resize" class="ui-jqgrid-resize ui-jqgrid-resize-ltr">&nbsp;</SPAN>
<DIV id=jqgh_list_MRN class="ui-th-div-ie ui-jqgrid-sortable">MRN<SPAN style="DISPLAY: none" class=s-ico><SPAN class="ui-grid-ico-sort ui-icon-asc ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-ltr" sort="asc"></SPAN><SPAN class="ui-grid-ico-sort ui-icon-desc ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-ltr" sort="desc"></SPAN></SPAN></DIV></TH></TR></THEAD></TABLE></DIV></DIV>
<DIV style="WIDTH: 826px; HEIGHT: 150px" class=ui-jqgrid-bdiv jQuery17205444165684387369="64">
<DIV style="POSITION: relative; HEIGHT: 0.01%">
<DIV></DIV>
<TABLE style="WIDTH: 429px" id=list class=ui-jqgrid-btable role=grid tabIndex=1 aria-labelledby=gbox_list aria-multiselectable=false border=0 cellSpacing=0 cellPadding=0 jQuery17205444165684387369="63">
<TBODY>
<TR style="HEIGHT: auto" class=jqgfirstrow role=row>
<TD style="WIDTH: 34px; HEIGHT: 0px" role=gridcell></TD>
<TD style="WIDTH: 115px; HEIGHT: 0px" role=gridcell></TD>
<TD style="WIDTH: 115px; HEIGHT: 0px" role=gridcell></TD>
<TD style="WIDTH: 145px; HEIGHT: 0px" role=gridcell></TD></TR></TBODY></TABLE></DIV></DIV></DIV>
<DIV id=rs_mlist class=ui-jqgrid-resize-mark>&nbsp;</DIV></DIV></DIV></DIV></DIV> 
```

这里是`Ajax.BeginForm(...){`

```
@using (Ajax.BeginForm("SearchByDemographic", "SearchPatients", null, new AjaxOptions { HttpMethod = "POST", LoadingElementId = Url.Content("~/Images/ajax-loader.gif"), OnSuccess = "binddata", OnFailure = "FailToTab" }, new { id = "searchByDemographics" })){ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T23:24:15.180

看起来您有一些导致问题的无效标记：

```
<DIV style="WIDTH: 50%; DISPLAY: inline; FLOAT: left" id=searchByDemographics class="ui-tabs-panel ui-widget-content ui-corner-bottom" jQuery17203071998293053285="70">
<FORM id=searchByDemographics class="ui-tabs-panel ui-widget-content ui-corner-bottom" method=post action=/SearchPatients/SearchByDemographic> 
```

和：

```
<DIV style="MARGIN-TOP: 6px; DISPLAY: inline; FLOAT: left; MARGIN-LEFT: 6px; MARGIN-RIGHT: 6px" id=searchByMRN class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide">
<FORM id=formSearchByMRN method=post action=/SearchPatients/SearchByMRN?Length=13 data-ajax-update="#retTable" data-ajax-success="switchToResultTab" data-ajax-mode="replace" data-ajax-method="POST" data-ajax="true"> 
```

上述两个（成对）元素具有相同的`id`属性，这是不允许的。您的选择器很可能会抓住它遇到的 DOM 中的第一个元素，`id`您提供的 （`div`）。`div`没有`action`or`method`属性，所以它们最终是未定义的。

该`submit`事件仍在冒泡`div`，`id`这就是您的提交处理程序仍在工作的原因。

如果您使`id`s 独一无二，那么一切都应该正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T07:00:10.467

像这样尝试手动表单Searlization，

```
 function formSubMission(){
        var obj = {};
        $('#formId :input').each(function(i, el){
            var name = el.name;
            var val = el.value;
            if(name!=""){
                obj[name] = val;
            }
        });

         $.ajax({
                  url: "test.html",
                  type: "POST",
                  data: obj,
                  dataType: "json",
                  success: function(data){
                    alert("Sucess")
                  }, 
                  error: function(jqXHR, textStatus, errorThrown){
                     alert("Error")
                  }
            });
 } 
```

# c# - TimeSpan 到微秒？

> ID：11547713
> 
> 赞同：7
> 
> 时间：2012-07-18T18:12:24.930
> 
> 标签：c#, datetime, timespan

你好，我的问题是是否可以在 C# 中使用 TimesSpan 打印微编码。

我有下一个例子：

```
DateTime startTime = DateTime.Now;
..../some code
DateTime endTime = DateTime.Now;
TimeSpan totalTimeTaken = endTime.Subtract(startTime);
Label3.Text=(totalTimeTaken.Milliseconds).ToString(); 
```

此代码允许我以毫秒为单位显示，但我需要显示微秒有没有办法将其更改为微秒或者我必须使用其他东西？

必须编辑我的问题：我的目标是测量在 2 个 DateTime 之间花费的时间，因为它是几行代码，毫秒不会削减它，这就是我需要微秒的原因。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-18T18:17:04.567

您将通过[Stopwatch 类](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)找到最高分辨率。如果您的 CPU 支持高分辨率计时器，则 Stopwatch 类将使用它。您可以通过`IsHighResolution`and/or`Frequency`属性进行检查。

这是您应该用于性能测量的类，而不是`DateTime`.

编辑：我刚刚学到了一些关于 DateTime 的新知识。从[文档](http://msdn.microsoft.com/en-us/library/03ybds8y%28v=VS.100%29.aspx)...

> 时间值以 100 纳秒为单位，称为刻度，特定日期是公历中自 0001 年 1 月 1 日午夜 12:00 以来的刻度数（不包括闰秒添加的刻度） . 例如，刻度值 31241376000000000L 表示日期，即 0100 年 1 月 1 日星期五午夜 12:00:00。DateTime 值始终在显式或默认日历的上下文中表示。

但是， 的分辨率*仍然*`DateTime.Now`约为 15 毫秒，因此无法正常工作（这最多会使文档产生误导......）使用秒表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T18:14:34.747

如果您需要高精度，请使用[System.Diagnostics.Stopwatch 。](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)

从代码示例中，如果看起来您正在尝试计时。`DateTime`这是一个糟糕的结构。有关详细信息，请参阅 Eric Lippert 的文章[“日期时间的精度和准确性”](http://blogs.msdn.com/b/ericlippert/archive/2010/04/08/precision-and-accuracy-of-datetime.aspx)。

> 现在，问题是“从开始到结束经过了多少时间？” 是一个与“现在几点了？”完全不同的问题。如果您要问的问题是某个操作花费了多长时间，并且您想要一个高精度、高精度的答案，那么请使用 StopWatch 类。它确实具有接近其精度的纳秒精度和准确度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T18:18:21.620

您可以使用 DateTime 类。DateTime 有一个名为 Ticks 的属性。

[日期时间.Ticks](http://msdn.microsoft.com/en-us/library/system.datetime.ticks.aspx)

从链接：

“一个滴答声代表一百纳秒或百万分之一秒。一毫秒内有 10,000 个滴答声。

此属性的值表示自 0001 年 1 月 1 日午夜 12:00:00 以来经过的 100 纳秒间隔数，它表示 DateTime.MinValue。它不包括可归因于闰秒的滴答数。”

```
DateTime dt1 = DateTime.Now;
// do stuff here...
DateTime dt2 = DateTime.Now;

long nanoseconds = (dt2.Ticks - dt1.Ticks) * 100; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T19:44:07.497

其他人写了关于减去 2 时可以预期的精度的好东西`DateTime.Now`。但还有一点很重要：使用`totalTimeTaken.TotalMilliseconds`，**而不是** `totalTimeTaken.Milliseconds`。通常，该数字将有 4 位小数。

要获得微秒，只需使用`1000.0 * totalTimeTaken.TotalMilliseconds`. 小数点后一般会有一位小数。但要重复一遍：对于典型的硬件和实现，并非所有这些数字都是可靠的。

# python - 按字典中一个键的值的顺序对字典列表进行排序

> ID：11547715
> 
> 赞同：2
> 
> 时间：2012-07-18T18:12:32.660
> 
> 标签：python, list, dictionary

`a=[{'post': 3, 'value': 42}, {'post': 4, 'value': 12}, {'post': 12, 'value': 25}]`

我怎样才能把它排序到这个：

`a=[{'post': 3, 'value': 42}, {'post': 12, 'value': 25}, {'post': 4, 'value': 12}]`

我的意思是为了反向估值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T18:15:49.833

您可以使用`key`and`reverse`参数：

```
result = sorted(a, key=lambda d:d["value"], reverse=True) 
```

`key`必须是一个函数，它给定列表的一个元素，返回一个应该对其进行排序的值。在这种情况下，传递的函数是一个匿名函数，它给定一个字典，返回与键关联的值`"value"`。

请注意，它`sorted(x)`返回列表的排序**副本**。如果要对列表进行就地排序，只需调用`sort`传递相同参数的列表对象的方法。另请注意，这`x = sorted(x)`不等于`x.sort()`.

希望这仍然被认为是合理的 Python，即使包含丑陋的“lambda”怪物...... :-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T18:15:03.303

```
a=[{'post': 3, 'value': 42}, {'post': 4, 'value': 12}, {'post': 12, 'value': 25}]

a.sort(key=lambda d: -d['value']) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T00:05:20.080

```
>>> from operator import itemgetter
>>> a=  [{'post': 3, 'value': 42}, {'post': 12, 'value': 25}, {'post': 4, 'value': 12}]
>>> sorted(a, key=itemgetter('value'), reverse=True)
[{'post': 3, 'value': 42}, {'post': 12, 'value': 25}, {'post': 4, 'value': 12}] 
```

# php - php中的对象数组

> ID：11547717
> 
> 赞同：1
> 
> 时间：2012-07-18T18:12:33.167
> 
> 标签：php

# 我不明白为什么我会收到此错误！在php中是如此简单但又非常不同。

```
<?php
    $x=new DisplayTaxonomy ();
    $myarray= array();
    $x->setADTitle("bunkers"); 
    echo $x->getADTitle();

    $myarray =$x;//i also tried array_push($$x, $myarray); same error
    echo $myarray[0]->getADTitle();
?> 
```

致命错误：不能在 C:\xampp\htdocs\wordpress\wp-content\plugins\exec-php\includes\runtime.php(42) 中使用 DisplayTaxonomy 类型的对象作为数组：第 9 行的 eval() 代码

```
<?php
 class DisplayTaxonomy {
    public $ADTitle;
 public function setADTitle($ADTitle)
    {
        $this->ADTitle = $ADTitle; 
    }
    public function getADTitle()
    {
        return $this->ADTitle;
    }
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T18:14:25.357

使用`[]`运算符附加`$x`到`$myarray`：

```
$myarray[] = $x;
echo $myarray[0]->getADTitle(); 
```

或者 via [`array_push()`](http://us3.php.net/manual/en/function.array-push.php)，作为函数调用，它的效率可能比使用`[]`lanugage 构造低一点。

```
array_push($myarray, $x); 
```

定义和添加到数组的方法在[PHP 的数组手册](http://php.net/manual/en/language.types.array.php)中有详细说明。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T18:14:32.397

```
$myarray = $x; 
```

应该

```
$myarray[] = $x 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T18:19:03.980

> 从 PHP 5.4 开始，您还可以使用短数组语法，它将 array() 替换为 []。

[这](http://php.net/manual/en/language.types.array.php)允许您初始化对象并将对象添加到数组中：

```
<?php  
class DisplayTaxonomy
{     
    public $ADTitle;  

    public function setADTitle($ADTitle) 
    {         
        $this->ADTitle = $ADTitle;
    }

    public function getADTitle()
    {
        return $this->ADTitle;
    } 
}

$x = new DisplayTaxonomy();
$x->setADTitle("bunkers");
//echo $x->getADTitle();

$myarray[] = $x; // Notice no previous array initialization
echo $myarray[0]->getADTitle(); 
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T18:17:16.347

在 php 中，数组追加是这样的：

```
$myarray[] = $x 
```

您正在做的是分配`$myarray`给您的`DisplayTaxonomy`对象，然后尝试将您的对象用作具有数组下标（`$myarray[0]`）的数组。因此错误。

顺便说一句，如果您打算对属性使用 getter 和 setter，则不应将该属性公开。尝试或者`protected $ADTitle;`不使用 getter 和 setter。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T18:23:43.930

原因是您在`$myarray`执行以下操作时将对象分配给： `$myarray = $x`. 此时，`$myarray`不再是数组，而是您分配给它的对象，即`$x`.

在您对代码的评论中，您说您也尝试过`array_push($$x, $myarray)`. 这不起作用的原因有两个。

原因 1：您使用`$$x`的是`$x`. 如果有`$$x`两个`${$x}`美元符号`$x`（`${'Object #1'}`. 例如，如果您有一个名为 的变量`$something`，您也可以像这样使用它：`${'something'}`. 因此，如果您有一个包含文字字符串“某物”的变量，例如`$var_name = 'something';`，那么您可以执行`${$var_name}`或`$$var_name`。这两种情况都会得到变量 $something 的内容。

原因 2：您还将它们以错误的顺序排列在`array_push`.

这应该起作用： `array_push($myarray, $x)`

但正如其他人所指出的，这是完全等价的：`$myarray[] = $x`.

我希望这有助于解释事情是如何运作的。

# html - 使用 favicon.png

> ID：11547719
> 
> 赞同：2
> 
> 时间：2012-07-18T18:12:34.560
> 
> 标签：html

我无法让我的 facvicon 工作。我究竟做错了什么？我首先尝试了 favicon.ico。没运气。现在我正在尝试一个png。

```
<head>
<link rel="icon" href="favicon.png"/>
</head>! 
```

[我的收藏夹](http://i.stack.imgur.com/rvlP0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:19:06.610

好吧，“最好的方法”是制作一个 .ico 格式的图标，将其命名为 favicon.ico 并将其放置在您的文档根目录中（即可以通过 www.example.com/favicon.ico 访问它）。

如果你真的不想使用 favicon.ico，你可以使用：

```
<link rel="shortcut icon" href="http://example.com/custom/file/anything.ico" /> 
```

并不是说 IE 出于某种原因使用“快捷方式图标”作为属性，即使它有一个空格！

如果这不起作用，您的浏览器可能已经缓存了一些东西，所以这样做，然后清除您的浏览器缓存，然后重试。

制作小型 .ico 文件的好网站是[http://www.favicon.cc/](http://www.favicon.cc/)。

如果您不想这样做，那么您可以使用 png，但它在 Internet Explorer 中不起作用。你必须使用：

```
<link rel="icon" type="image/png" href="http://example.com/image.png" /> 
```

让它工作。

但不要，只需使用 .ico！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T18:24:18.047

浏览器将简单地`favicon.ico`在站点根目录中查找并使用它。对于像 IE6 这样的旧浏览器，它必须是 16x16px，但 IE6 支持已正式停止，所以没关系。

`.ico`支持完整的 alpha 并具有 1600 万个调色板，因此使用 PNG 没有多大意义。对于我的网站，我制作了一堆不同大小的图标（16px、32px、48px、64px、128px），然后我使用命令行实用程序 ICOBundle 将它们压缩成一个多分辨率的图标文件。

Apple 还提供有关如何设置 iOS 兼容图标以将网站添加到主屏幕的文档。最后，`rel`favicon 最好是`"shortcut icon"`.

# python - Python 多重继承

> ID：11547724
> 
> 赞同：5
> 
> 时间：2012-07-18T18:12:48.920
> 
> 标签：python

我有 3 个 A、B 和 D 类，如下所示

```
class A(object):
    def test(self):
        print "called A"

class B(object):
    def test(self):
        print "called B"

class D(A,B):
    def test(self):
        super(A,self).test()

inst_d=D()
inst_d.test()

----------------------------------------
Output:
  called B 
```

问题：在`D.test()`，我正在打电话`super(A,self).test()`。`B.test()`为什么即使方法也存在也只调用`A.test()`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T18:15:46.000

因为你告诉它不要。在`D.test`您告诉它调用 A 的*父*级的测试方法时-就是这样`super`做的。

通常你想在`super`调用中使用当前的类名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T19:09:09.993

通常使用当前类名调用 super 并且您让 python 的 MRO 根据它遵循的算法来处理它应该调用哪个父类。因此，对于您想要的行为，您的代码将如下所示。

```
class D(A,B):
    def test(self):
        super(D,self).test() 
```

笔记`super(D,self).test()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T18:57:17.020

`super(A,self).test()`意思是：`test`在 A`self`的方法解析顺序 (mro) 之后调用对象的方法。

使用`D.__mro__`你看到的方法解析顺序是：

```
<class '__main__.D'>, <class '__main__.A'>, <class '__main__.B'>, <type 'object'> 
```

所以称为`test`。`B`

在 Python 3 中，您只需键入`super().test()`，它就会执行您想要的操作。在 Python 2 中，您需要键入：`super(D,self).test()`

# c#-4.0 - 如何将对象列表转换为 XElement C#

> ID：11547725
> 
> 赞同：-3
> 
> 时间：2012-07-18T18:12:55.893
> 
> 标签：c#-4.0

如何将对象列表转换为 XElement 或 XMLDocument C#

没有循环

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:23:11.980

你有没有尝试过：

```
XElement element = new XElement("yourNewXElement", YourList); 
```

# jquery - 如何在窗口边缘创建一个滑入式 DIV？

> ID：11547727
> 
> 赞同：0
> 
> 时间：2012-07-18T18:12:56.730
> 
> 标签：jquery, css

这是一个相当酷的效果......我在此页面上查找了一些内容，并注意到在您到达页面后大约一分钟左右加载的滑入式窗口。它从右侧滑入，在 250x180 处停留大约 10 秒钟，然后缩小到 250 x 50 并保持可见一段时间。

我很想重新创建此窗口并将其用作我们页面上的实时聊天链接。

我很想知道是否有办法用 jQuery/CSS 做到这一点。

你们可以看看这个页面上的窗口（这是一个“推荐给你”的幻灯片）：[带有幻灯片窗口的页面，](http://www.webdesignerdepot.com/2010/01/css-transitions-101/)并给我一些关于如何使用 jQuery 重新创建它的指导？

加载需要一分钟（仅供参考）......谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T18:21:21.277

看起来它只是一个 Wordpress 插件：[http ://wordpress.org/extend/plugins/simplereach-slide/](http://wordpress.org/extend/plugins/simplereach-slide/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T18:27:30.857

尝试这个：

```
var myTimeout = window.setTimeout(function() {
    $(myDiv).animate({
        left: '-=100%'
    });
}, 60000); 
```

前提是您的 div 不在屏幕右侧。

# php - 通过 PHP 在 Wordpress 上上传和下载文件

> ID：11547728
> 
> 赞同：0
> 
> 时间：2012-07-18T18:12:57.517
> 
> 标签：php, forms, wordpress, file-upload, download

我正在使用 wordpress 源代码来开发网站/博客。我创建了一个表单，其中加上我在数据库中插入的数据的输入，我有一个上传文件部分。在这里我需要你们的建议。我想在我的 wordpress 代码中有一个文件夹，并在处理表单数据时将文件上传到该位置。

要下载上传的文件，最好在 wordpress 面板中有另一个部分（如“媒体”），用户可以去那里下载之前上传的文件。

这就是我的想法，但我不知道该怎么做。所以，如果你们能帮我给我一些灯，那就太好了。如果您认为您对如何实现这一点有更好的想法，我想听听他们的意见。

所以，恢复，这就是我假装的： - 在提交表单时将文件上传到模板/网站代码文件夹内由我创建的文件夹；-在wordpress面板中按类别列出上传文件，以便管理员可以从那里下载文件；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T18:27:31.230

我用它来用 wordpress 上传文件。我创建了一个 upload.php 并放置了这段代码，还请记住，您需要关心安全性:)

```
<?php
define('WP_USE_THEMES', false);
require('./wp-blog-header.php');
status_header( 200 );
$upload = wp_upload_bits($_FILES['Filedata']["name"], null, file_get_contents($_FILES['Filedata']["tmp_name"]));
?> 
```

或者使用这个 PHP 函数[http://php.net/manual/en/function.move-uploaded-file.php](http://php.net/manual/en/function.move-uploaded-file.php)

然后另一个选项是将此文件保存为自定义帖子然后您注册此自定义帖子，如下所示 [http://codex.wordpress.org/Post_Types](http://codex.wordpress.org/Post_Types) 它将在 wordrpress 仪表板中显示为媒体

# asp.net-mvc-3 - 在模型中包含 SampleData.cs 后尝试运行 MVC 音乐商店时出现异常

> ID：11547732
> 
> 赞同：2
> 
> 时间：2012-07-18T18:13:19.930
> 
> 标签：asp.net-mvc-3

当我尝试运行[http://mvcmusicstore.codeplex.com/releases/view/64379](http://mvcmusicstore.codeplex.com/releases/view/64379)中列出的 MVC Music Store 应用程序时出现异常。一旦我包含`SampleData.cs`在 Models 文件夹中并进行一些更改以包含此模型，我就会收到 ArgumentException，路径中的非法字符。有没有类似的经历？有人可以帮助解决这个问题，因为我现在被这个问题困扰了一段时间。

谢谢

请输入任何内容

确切的代码如下，

```
public class MusicStoreEntities : DbContext
{
    public DbSet<Album> Albums { get; set; }
    public DbSet<Genre> Genres { get; set; }
} 
```

我将`SampleDat.cs`文件添加到我的模型中。这是一个巨大的文件，我在这里只列出了其中的一部分。

```
 using System;
 using System.Collections.Generic;
 using System.Linq;
 using System.Web;
 using System.Data.Entity;

 namespace MvcMusicStore.Models
 {
     public class SampleData : DropCreateDatabaseIfModelChanges<MusicStoreEntities>
     {
        protected override void Seed(MusicStoreEntities context)
        {
            var genres = new List<Genre>
            {
                new Genre { Name = "Rock" },
                new Genre { Name = "Jazz" }
            };

            var artists = new List<Artist>
            {
                new Artist { Name = "Aaron Copland & London Symphony Orchestra" },
                new Artist { Name = "Aaron Goldberg" }
            };

            new List<Album>
            {
                new Album { Title = "The Best Of Men At Work", 
                            Genre = genres.Single(g => g.Name == "Rock"), 
                            Price = 8.99M,
                            Artist = artists.Single(a => a.Name == "Men At Work"),
                            AlbumArtUrl = "/Content/Images/placeholder.gif"
                          },
                new Album { Title = "A Copland Celebration, Vol. I",
                            Genre = genres.Single(g => g.Name == "Classical"),
                            Price = 8.99M,
                            Artist = artists.Single(a => a.Name == "Aaron Copland & London Symphony Orchestra"),
                            AlbumArtUrl = "/Content/Images/placeholder.gif"
                          }
            }.ForEach(a => context.Albums.Add(a));
        }
    }
} 
```

我在 中设置了一个数据初始化器`Global.asax`，

```
protected void Application_Start()
{
    System.Data.Entity.Database.SetInitializer(new MvcMusicStore.Models.SampleData());
} 
```

在我的控制器中，`StoreController.cs`我正在做

```
var genres = storeDB.Genres.ToList(); 
```

并得到以下异常。

> 例外是“路径中的非法字符”。
> 
> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.ArgumentException：路径中有非法字符。
> 
> 源错误：
> 
> ```
> public ActionResult Index()
> {
>     var genres = storeDB.Genres.ToList();
>     return View(genres);
> } 
> ```
> 
> 堆栈跟踪：
> 
> ```
> [ArgumentException: Illegal characters in path.]
> System.IO.Path.CheckInvalidPathChars(String path) +126
> System.IO.Path.NormalizePath(String path, Boolean fullCheck, Int32 maxPathLength) +145
> System.IO.Path.GetFullPathInternal(String path) +46
> System.IO.Path.GetFullPath(String path) +33
> System.Data.SqlServerCe.SqlCeUtil.DemandForPermission(String filename, FileIOPermissionAccess permissions) +71
> System.Data.SqlServerCe.SqlCeEngine.CreateDatabase() +1217
> System.Data.SqlServerCe.SqlCeProviderServices.DbCreateDatabase(DbConnection connection, Nullable`1 timeOut, StoreItemCollection storeItemCollection) +288
> System.Data.Objects.ObjectContext.CreateDatabase() +84
> System.Data.Entity.Internal.DatabaseOperations.Create(ObjectContext objectContext) +35
> System.Data.Entity.Database.Create() +70
> System.Data.Entity.DropCreateDatabaseIfModelChanges`1.InitializeDatabase(TContext context) +477
> System.Data.Entity.<>c__DisplayClass2`1.<SetInitializerInternal>b__0(DbContext c) +143
> System.Data.Entity.Internal.<>c__DisplayClass5.<PerformDatabaseInitialization>b__3() +59
> System.Data.Entity.Internal.InternalContext.PerformInitializationAction(Action action) +101
> System.Data.Entity.Internal.InternalContext.PerformDatabaseInitialization() +260
> System.Data.Entity.Internal.LazyInternalContext.<InitializeDatabase>b__4(InternalContext c) +31
> System.Data.Entity.Internal.RetryAction`1.PerformAction(TInput input) +147
> System.Data.Entity.Internal.LazyInternalContext.InitializeDatabaseAction(Action`1 action) +276
> System.Data.Entity.Internal.LazyInternalContext.InitializeDatabase() +112
> System.Data.Entity.Internal.InternalContext.Initialize() +41
> System.Data.Entity.Internal.InternalContext.GetEntitySetAndBaseTypeForType(Type entityType) +34
> System.Data.Entity.Internal.Linq.InternalSet`1.Initialize() +148
> System.Data.Entity.Internal.Linq.InternalSet`1.GetEnumerator() +33
> System.Data.Entity.Infrastructure.DbQuery`1.System.Collections.Generic.IEnumerable<TResult>.GetEnumerator() +91
> System.Collections.Generic.List`1..ctor(IEnumerable`1 collection) +315
> System.Linq.Enumerable.ToList(IEnumerable`1 source) +58
> MvcMusicStore.Controllers.StoreController.Index() in C:\My Projects\MvcMusicStore\MvcMusicStore\Controllers\StoreController.cs:16
> lambda_method(Closure , ControllerBase , Object[] ) +96
> System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters) +17
> System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters) +208
> System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +27
> System.Web.Mvc.<>c__DisplayClass15.<InvokeActionMethodWithFilters>b__12() +55
> System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation) +263
> System.Web.Mvc.<>c__DisplayClass17.<InvokeActionMethodWithFilters>b__14() +19
> System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +191
> System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) +343
> System.Web.Mvc.Controller.ExecuteCore() +116
> System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) +97
> System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext) +10
> System.Web.Mvc.<>c__DisplayClassb.<BeginProcessRequest>b__5() +37
> System.Web.Mvc.Async.<>c__DisplayClass1.<MakeVoidDelegate>b__0() +21
> System.Web.Mvc.Async.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _) +12
> System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62
> System.Web.Mvc.<>c__DisplayClasse.<EndProcessRequest>b__d() +50
> System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f) +7
> System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action) +22
> System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +60
> System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) +9
> System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +8970061
> System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +184 
> ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T08:39:09.873

解决方案在这篇文章 [http://mvcmusicstore.codeplex.com/discussions/359070][1]

确保 MusicStoreEntities 将 DbContext 实现为：

```
namespace MvcMusicStore.Models
{
    public class MusicStoreEntities : DbContext
    {
        public DbSet<Album> Albums { get; set; }
        public DbSet<Genre> Genres { get; set; }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T20:07:21.303

当我阅读本教程时，由于添加到 Web.Config 文件中的行中有错字而出现此错误。确保您的`<connectionString>`节点看起来完全像这样：

```
 <connectionStrings>
    <add name="MusicStoreEntities"
         connectionString="Data Source=|DataDirectory|MvcMusicStore.sdf"
         providerName="System.Data.SqlServerCe.4.0" />
  </connectionStrings> 
```

# javascript - 是否可以看到 div 的继承背景颜色？

> ID：11547734
> 
> 赞同：5
> 
> 时间：2012-07-18T18:13:27.167
> 
> 标签：javascript, jquery, html, css

是否可以看到 div 的继承背景颜色？

如何获取 html 元素继承的颜色？默认情况下，元素是透明的。因此，当一个 div 被放置在某个地方时，它不会显示在渲染中（但如果该 div 的背景颜色为红色，它将立即可见）。如果没有明确的背景颜色，我怎样才能找到隐含的背景颜色？

这是一些示例代码。埃菲尔铁塔图片的左上角有一个 1px x 1px 的 div。该div的背景颜色是什么？

```
<html>
<body style="margin: 0px;">
<img src="http://www.eiffel-tower.us/Eiffel-Tower-Images/eiffel-tower-landmark-4.jpg">
<div style="position: absolute;top: 0px; left: 0px; width: 1px; height: 1px;z-index:1">
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T18:16:48.903

### 每个人都会推荐的方法，遗憾的是它在所有情况下都不起作用..

*您可以使用元素parent*属性遍历节点树，检查是否有任何元素具有显式*background-color*。

这种方法的问题是无法识别设置为位于其父级之外的元素（例如使用*position:relative和适当的兄弟值）。*

* * *

### 有任何便携式和 100% 有效的解决方案吗？

我能想到的唯一可移植的方法总是会产生正确的结果，就是找到元素在浏览器中的 (x,y) 位置。

然后遍历所有元素以查看是否有任何元素 (x,y) 导致它位于*针元素*后面，然后检查该元素是否具有*背景颜色*属性。

这可以保证工作，但会对性能产生非常严重的影响。如果您确定元素不会将其自身浮动到其真正父级的边界之外，请使用所描述的第一种方法。

如果您希望此方法适用于具有图像作为背景属性的元素，您可以将所述图像加载到画布上并读取您想要的像素的值，尽管这会使已经性能下降的操作甚至更吸吮，但它会工作。

**还有**；

*   如果一个元素浮动在多个元素之上怎么办？
*   在实现您所描述的功能的函数中应该返回哪种颜色？
*   颜色在你的针元素的中心闪耀，或者在左上角？

* * *

### 元素浮动在 4 个不同的元素上，元素的背景颜色是什么？

![浮动 div 超过 4 个 div](../Images/6397c06289675a4da24399d0df8e9d0a.png)

^(没人知道..)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-18T18:17:05.557

好吧，你可以尝试这样的事情：

```
window.getComputedStyle = window.getComputedStyle || function(x) {return x.currentStyle;}
function getActualBackgroundColor(elem) {
    while(elem && window.getComputedStyle(elem).backgroundColor == "transparent")
        elem = elem.parentNode;
    return elem ? window.getComputedStyle(elem).backgroundColor : "transparent";
} 
```

但是，请记住，这仅适用于`position: absolute/relative/fixed`非浮动且其父级没有背景图像的静态定位元素（即 not ）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T19:03:10.713

您在这里真正要做的是对网页的一部分进行 1x1 屏幕截图。试试这个问题：[https ://stackoverflow.com/questions/7618368/how-to-capture-the-screen-using-javascript](https://stackoverflow.com/questions/7618368/how-to-capture-the-screen-using-javascript)

结论似乎是（除非有特殊的扩展、插件等）使用[html2canvas](https://github.com/niklasvh/html2canvas)的方法是：[使用 HTML5/Canvas/JavaScript 截取屏幕截图](https://stackoverflow.com/questions/4912092/using-html5-canvas-javascript-to-take-screenshots)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-18T18:17:11.657

如果 div 从父元素继承了背景颜色，您实际上会在 div 中看到它。这就是级联样式表的美妙之处；-)

因此，为了找到隐含的背景颜色，您必须向上移动 DOM 树，直到找到具有背景颜色集的父元素。

这真的很容易做到，例如 Firefox 的 Firebug 或 Chrome 的开发者工具等。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-18T18:16:26.523

您可以递归地定义一个函数，该函数传递一个检查背景属性的 jQuery 对象。

```
function get_inherited_bg(jquery_object) {
    if (jquery_object.css("background") != "rgba(0, 0, 0, 0) none repeat scroll 0% 0%") {
        return jquery_object.css("background");
    }
    return get_inherited_bg(jquery_object.parent());
} 
```

享受和好运！

# php - Memcache 缓存结果

> ID：11547737
> 
> 赞同：1
> 
> 时间：2012-07-18T18:13:39.147
> 
> 标签：php, performance, memcached

考虑以下代码：

```
function getUser($uid) {
    global $_memcache;
    $u = $_memcache->get("user-".$uid);
    if( !$u) {
        $u = ... // get user from database
        $_memcache->set("user-".$uid,$u);
    }
    return $u;
} 
```

现在，这个函数可能会被称为很多。例如，在论坛上，它可能在单个页面加载中被调用 30 多次。是否值得做以下事情，或者 Memcache 是否已经足够优化？

```
function getUser2($uid) {
    static $localcache = [];
    if( isset($localcache[$uid])) return $localcache[$uid];
    return $localcache[$uid] = getUser($uid);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T18:31:14.280

嗯，最终 memcached 是在内存存储中，就像在 PHP 数组中存储值一样。如果 memcached 实例位于您运行代码的同一台服务器上，那么我肯定会说只使用 memcached 而不是 memcached 和 PHP 数组，因为您最终会在机器上使用 ~ 两倍的内存将相同的数据存储在内存中两次。

如果 memcached 位于单独的基础架构上（这很可能），那么我想我会考虑为用户存储的数据的大小。如果它很大并且您可能会在 PHP 数组中存储大量用户，这意味着您可能会在 Web 服务器上占用比您认为需要的更多的内存，在这种情况下，从 memcached 中重复访问数据，同时稍微整体访问时间较慢，可能会在服务器负载下提供显着的应用程序性能。

就个人而言，我可能倾向于对每个请求都依赖 memcached，因为它更具可扩展性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T23:54:14.197

Kolink，我想对 Mike 提出另一种看法。首先，如果 getUser 请求的数量约为 50 个/页甚至几百个，那么存储问题就无关紧要了。

**其次，memcached 的进程用完了，所以即使 memcached 在同一个系统上，每次get()**调用仍然会遇到两次用户模式上下文切换，所以这里的关键问题是一个简单的统计问题：预期是什么每页的用户出现次数？例如，如果这是 2，那么您的本地 PHP 缓存将减少与 memcached 相关的上下文切换次数的一半。

然而，真正的节省将是通过使用 memcached 的*multi-get*功能——如果你用一组值调用**memcache::get() ，PHP memcache 扩展会使用这个。**但是，这需要两次算法和对代码的一些更改。安全地执行此操作的一种方法是根据您的第二个示例使用本地缓存的 getUser() 但添加页面结构的第 0 遍扫描以检测假定的 memcache 获取目标，进行唯一排序，然后使用基于此列表的多获取。

主线仍然可以使用缓存的 get 和故障返回到 D/B 以在 memcache 中设置 user-XXX，但是这样一来，高（比如 95%）的用户查询将满足单个进程外调用 memcached。

Yes, a bit of added complexity, but I think that the performance dividends make it well worthwhile trying.

# c# - 将 WebResponse 字符串解密为数组列表

> ID：11547738
> 
> 赞同：3
> 
> 时间：2012-07-18T18:13:42.913
> 
> 标签：c#, winforms, data-transfer, encryption

网站上有一个 PHP 脚本。我还有一个 C# winforms 程序，它使用 WebRequest/WebResponse 方法发送 POST 消息。

这个 PHP 脚本连接到 mysql 数据库，获取一些数据并将其发送回 WinForms 应用程序。数据格式如下：

> 约翰，32 岁，可能
> 
> 彼得，6 月 24 日
> 
> ETC..

所有这些文本都作为单个字符串发送。**将这个字符串破译成字符串列表的最佳方法是什么？**

现在我正在使用自制的方法。PHP 脚本执行以下操作：

*   首先我们用“，”分隔每个单词

*   然后我们用“|”分隔每一行

当我收到消息时，我使用“|”将其划分为一个列表 信

```
List<string> names = input.Split('|').ToList<string>(); 
```

然后我在列表中划分每个字符串：

```
List<string[]> namestwo = new List<string[]>();
foreach (string str in names)
{
string[] sep = str.Split(',').ToArray();
namestwo.Add(sep);
} 
```

我想有更好的方法来做到这一点..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T18:21:23.090

你的一般方法很好。在发送这样的数据时使用分隔符是很常见的。显然，您需要确保您的数据中永远不会包含任何逗号 (',') 或竖线 ('|')，或者正确转义这些字符，然后在解析时正确处理它。如果您发现自己有很多逗号或管道，您可以考虑使用其他分隔符（制表符是一个不错的选择，因为您通常可以用几个空格替换数据中的所有制表符，而不是转义它们）。

如果您愿意，可以稍微清理一下代码。像这样的东西对我来说看起来更好，但它基本上会做同样的事情：

```
var result = input.Split('|')
             .Select(line => line.Split(',').ToList()).ToList(); 
```

# mysql - 使用 varchar(x) 有什么危害？

> ID：11547739
> 
> 赞同：1
> 
> 时间：2012-07-18T18:13:45.293
> 
> 标签：mysql, allocation, varchar

正如文档所说，mysql 不会分配您为 varchar 指定的全部空间。它存储数据的实际长度。所以我想那里也可能有副作用。就像如果varchar记录的原始长度是10，现在我想将它更新为20，仍然没有达到指定的限制50。但是，以前分配的空间现在已经不够了。所以我的问题是 MySQL 如何处理这种情况？移动该记录之后的所有内容需要很长时间吗？还是必须这样做？有没有人可以告诉我它是如何在内部工作的？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:33:10.790

MySQL 处理得很好，你不应该关心细节。尽管具有不规则长度的记录比具有固定长度的记录管理起来要慢一些，但是如果您的记录通常小于固定大小，则通过读取显着更少的数据可以获得巨大的性能提升。

请记住，`CHAR`列总是以其最大大小存储和检索。即使平均记录只有 10-15 个字节的数据，一个 255 个字符的字段也需要传输 255 个字节。这是一个很大的开销。

使用`CHAR`会带来一大堆其他问题，因为该字段将始终是那个长度，这意味着它必须完整地传输，并且通常在客户端中被剥离。这比它的价值要麻烦得多。

在现代时代，`CHAR`列的唯一用途是用于始终定义且始终具有特定大小的事物。一个示例可能是用作标识符的 40 个字符的十六进制编码哈希，但这些通常很少见，并且在几乎所有情况下`VARCHAR`都可以正常工作。

# java - Joda LocalDate 和 java.util 的 Date 有什么区别？

> ID：11547741
> 
> 赞同：2
> 
> 时间：2012-07-18T18:13:55.823
> 
> 标签：java, jodatime

我只是想知道 Joda 的 LocalDate 类和 java.util 的 Date 类之间的区别是什么。另外，使用其中一个有什么优势吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-18T18:23:40.223

我认为[Joda Time 网站](http://www.joda.org/joda-time/)很好地解释了这一切。

创建 Joda-Time 是为了从根本上改变 Java 中的日期和时间处理。JDK 类 Date 和 Calendar 设计得很糟糕，有很多错误并且有奇怪的性能影响。以下是我们开发和使用 Joda-Time 的一些原因：

*   **易于使用**。由于缺乏简单的方法，日历使访问“正常”日期变得困难。Joda-Time 具有简单的字段访问器，例如 getYear() 或 getDayOfWeek()。

*   **易于扩展**。JDK 通过 Calendar 的子类支持多个日历系统。这很笨重，实际上很难编写另一个日历系统。Joda-Time 通过基于 Chronology 类的可插拔系统支持多个日历系统。

*   **全面的功能集**。该库旨在提供日期时间计算所需的所有功能。它已经提供了开箱即用的功能，例如对古怪日期格式的支持，这些功能很难用 JDK 复制。

*   **最新的时区计算**。时区实现基于公共 tz 数据库，该数据库每年更新数次。新的 Joda-Time 版本包含对此数据库所做的所有更改。如果更早需要更改，手动更新区域数据很容易。

*   **日历支持**。该库目前提供 8 个日历系统。将来会添加更多。

*   **易于互操作**。该库在内部使用与 JDK 相同且类似于其他常见时间表示的毫秒瞬间。这使得互操作性变得容易，并且 Joda-Time 具有开箱即用的 JDK 互操作性。

*   **更好的性能特点**。日历具有奇怪的性能特征，因为它会在意想不到的时刻重新计算字段。Joda-Time 只对正在访问的字段进行最少的计算。

*   **良好的测试覆盖率**。Joda-Time 有一套全面的开发人员测试，为库的质量提供保证。

*   **完整的文档**。有一个完整的用户指南，它提供了一个概述并涵盖了常见的使用场景。javadoc 非常详细，涵盖了 API 的其余部分。

*   **成熟度**。该库自 2002 年以来一直在积极开发中。尽管随着新功能和错误修复的添加而不断改进，但它是一个成熟且可靠的代码库。现在有许多相关的项目可用。

*   **开源**。Joda-Time 在商业友好的 Apache 许可证版本 2.0 下获得许可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T18:38:04.657

帮助我决定使用 JodaTime 的具体事情之一是日期验证。这对于标准的 java.util.Date 来说是非常困难的。

```
DateTime expireDate = new DateTime( year, month, 1, 0, 0 );

if ( expireDate.isBeforeNow() ) {
    // Expired handling here
} 
```

# perl - IO::Socket::IP 和 Socket 在 perl 5.8.8 上不起作用

> ID：11547743
> 
> 赞同：1
> 
> 时间：2012-07-18T18:14:01.180
> 
> 标签：perl, ipv6

我对 IO::Socket::IP 页面上的代码进行了测试：

```
use strict;
use warnings;
use IO::Socket::IP -register;

 my $sock = IO::Socket->new(
    Domain    => PF_INET6,
    LocalHost => "::1",
    Listen    => 1,
 ) or die "Cannot create socket - $@\n";

 print "Created a socket of type " . ref($sock) . "\n"; 
```

我在 perl 5.8.8 机器上得到的输出是：

`Cannot create socket - Address family for hostaname not supported`

在装有 perl 5.12.3 的 slackware 机器上，它成功了。

因此，将 Socket.pm 升级到最新版本似乎不足以在 perl 5.8.8 上启用 ipv6 支持。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T14:31:52.490

正如我已经评论过您之前的粘贴中链接的错误，`HTTP::Server::Simple`它根本不是为处理 IPv6 而编写的。它到处都是大量的 IPv4 特定代码。您不能简单地通过安装一些其他模块来启用它。

一旦基本的 IPv6 支持`Socket`独立于 中工作`HTTP::Server::Simple`，您就可以着手修复代码`HTTP::Server::Simple`以支持 IPv6。在这里要清楚，这将涉及编辑`lib/HTTP/Server/Simple.pm`自身，并实际修复代码。删除 IPv4 特定部分并编写一些家庭网络代码；理想情况下使用`IO::Socket::IP`它自己而不是它当前拥有的原始`Socket`使用代码。这将使其在未来更加标准和更好的支持。

再次总结——实际代码需要在这里重写；仅仅安装模块是不够的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T21:33:33.487

我最好的想法是查看程序已加载的模块文件列表（显式或隐式）。这段代码应该可以解决问题

```
use File::Spec;
print File::Spec->canonpath($_), "\n" for sort values %INC; 
```

查看每个相关文件（显然您可以忽略类似的内容`strict.pm`）以确保您已更新的文件正在被使用，并查看您是否忽略了可以使用升级的任何内容。

# r - 绘图点的边框颜色 - R 绘图

> ID：11547745
> 
> 赞同：6
> 
> 时间：2012-07-18T18:14:17.783
> 
> 标签：r, plot, scatter-plot

> **可能重复：**
> [如何在 R 中创建带有自定义点的图？](https://stackoverflow.com/questions/9958025/how-to-create-a-plot-with-customized-points-in-r)

我知道在 R 中你可以使用 plot 来指定点的颜色

`plot(......,col="red")`使散点图中的点，例如，红色。

如何指定点的边框颜色，使边框颜色与填充颜色不同。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-18T18:19:09.160

您可以使用该`bg`参数来处理点的填充方式。在某些类型的绘图字符上，这将是可见的。例如...

```
plot(1,1,col=3, bg=2, pch=23) 
```

# javascript - 揭示模块模式和超时

> ID：11547755
> 
> 赞同：0
> 
> 时间：2012-07-18T18:14:40.217
> 
> 标签：javascript, closures

我想知道是否有人可以给我一个简单的解决方案。

我想让两个狗实例重复吠叫+摇尾组合。

如果所有逻辑都包含在 barkNameAndTime 函数中，我很好，但是通过 setTimout 调用 wagTail 我会丢失上下文。我写的 JS 不多，所以我的闭包知识有点生疏，我似乎找不到干净的解决方案。

问题是Baloo最终会吠叫和摇尾巴，而Lola在人群中消失了:)

谢谢沃里克

```
<script type="text/javascript">
$(document).ready(function () {
    var zDog1 = new dog("Lola");
    var zDog2 = new dog("Baloo");

    zDog1.bark();
    zDog2.bark();
});

function dog(aName) {
    var name = aName,
        barkNameAndTime = function () {
            var time = new Date().getTime();
            $('#MyDiv').html($('#MyDiv').html() + "<br />" + name + " barked @ " + time);
            setTimeout(wagTail, 1000);
        };

        wagTail = function () {
            var time = new Date().getTime();
            $('#MyDiv').html($('#MyDiv').html() + "<br />" + name + "  wagged tail @ " + time);
            setTimeout(barkNameAndTime, 1000);
        }

    return {
        bark: barkNameAndTime
    };
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T18:23:52.680

在您的实现中，`wagTail`是一个全局变量（可能是错误的），因此每次您创建一个新的狗对象时，它的一个全局值和上下文都会被替换。

如果将其设为局部变量（通过将一个分号更改为逗号），它应该可以工作。

```
function dog(aName) {
    var name = aName,
        barkNameAndTime = function () {
            var time = new Date().getTime();
            $('#MyDiv').html($('#MyDiv').html() + "<br />" + name + " barked @ " + time);
            setTimeout(wagTail, 1000);
        }, 

        wagTail = function () {
            var time = new Date().getTime();
            $('#MyDiv').html($('#MyDiv').html() + "<br />" + name + "  wagged tail @ " + time);
            setTimeout(barkNameAndTime, 1000);
        }

    return {
        bark: barkNameAndTime
    };
} 
```

当它是一个局部变量时，每个副本都会`wagTail`保留自己的闭包上下文（因此可以访问同一堆栈帧中的局部变量）。当它是一个全局变量时，所有调用都`wagTail`将具有相同的上下文，这将是最后一次分配给它的上下文。

仅供参考，这是我不喜欢这种在多行初始化程序时声明局部变量的方式的原因之一，因为一个微妙的错字会呈现其中一些隐式全局变量。我宁愿预先声明当地人，然后在正文中分配给他们。遭受此错误的可能性要小得多。或者，在这种情况下，您不需要使用变量语法，您可以将`barkNameAndTime`和声明`wagTail`为本地函数（Bergi 添加的代码示例）：

```
function dog(name) {
    function barkNameAndTime() {
        var time = new Date().getTime();
        $('#MyDiv').html($('#MyDiv').html() + "<br />" + name + " barked @ " + time);
        setTimeout(wagTail, 1000);
    }
    function wagTail() {
        var time = new Date().getTime();
        $('#MyDiv').html($('#MyDiv').html() + "<br />" + name + "  wagged tail @ " + time);
        setTimeout(barkNameAndTime, 1000);
    }

    return {
        bark: barkNameAndTime
    };
} 
```

# oop - 多重回报 vs 单一回报

> ID：11547756
> 
> 赞同：1
> 
> 时间：2012-07-18T18:14:47.030
> 
> 标签：oop

我已经使用了很长时间的单返回风格（作为结构化编程风格）。我已经开始阅读 Fowler 的“重构”，并在他写道的地方找到了“删除控制标志”和“用保护子句替换嵌套条件”，应该避免单次返回。

对我来说，使用单次返回有很多好处，只是阅读困难一些。那么使用多重回报的利润是多少？

**好处**：

1.  单次返回允许轻松地将断点设置为返回语句
2.  如果有单个返回值，很容易为结果值添加 Assert
3.  单次返回使代码更具可读性

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:00:36.077

即使有多个返回，也有一个函数退出点。它是结束大括号。只需在其上放置一个断点并设置一个条件来检查 rAX（如果 IA32e）。

```
int f()
{
    if (condition)
        return 1;
    return 0;
} // Place here. Would break at epilog just before return. 
```

# css - FullCalendar 中不显示绝对位置弹出 Div

> ID：11547758
> 
> 赞同：1
> 
> 时间：2012-07-18T18:14:53.350
> 
> 标签：css, fullcalendar, css-position

我想在 FullCalendar 中单击事件时显示一个弹出窗口。根据我的 CSS，div 被正确创建和定位，但是，div 不可见。可见性未设置为“隐藏”。请注意，当我将位置更改为“固定”时，它会显示。我试过弄乱 z-index 无济于事。

CSS：

```
._detail {
  position:absolute;
  left:-260px;
  font-size:1em;
  padding:5px;
  height:150px;
  width:250px;
    background-color:lightgrey;
    border-radius:4px;
    border:1px solid darkgrey;
} 
```

基本JS：

```
eventClick: function(calEvent, jsEvent, view) {
  // create div with class '_detail', fill it with stuff
  jsEvent.target.appendChild(_div); } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T19:10:06.687

```
 jsEvent.target.appendChild(_div); 
```

是愚蠢的。它将 div 附加到一个跨度。我决定将弹出 div 附加到日历容器中。解决这个问题并不能回答技术问题，但对我有用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-18T18:27:35.227

如果弹出设置位置有父 div：相对于包含弹出窗口的父 div 否则设置相对于页面的主包装 div 的位置

# batch-file - 在同一控制台中启动 exe

> ID：11547763
> 
> 赞同：2
> 
> 时间：2012-07-18T18:15:02.823
> 
> 标签：batch-file

快速简单的问题：我有一个批处理文件，它需要一些 .exe，如下所示：

```
START /WAIT GVE %opt% 
```

我的问题是程序在一个新的控制台中启动，他们是否让它在同一个控制台中启动？我试过 /NOCONSOLE 选项但没有成功。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T19:43:44.840

我认为您只需要该`/B`选项（假设 exe 是控制台应用程序）

```
start "" /b /wait gve %opt% 
```

# javascript - 主干.js 视图事件不执行

> ID：11547765
> 
> 赞同：0
> 
> 时间：2012-07-18T18:15:11.877
> 
> 标签：javascript, events, backbone.js

我有如下所示的backbone.js 视图。它工作正常，现在单击表单按钮时单击事件不会执行。控制台中没有错误，也没有显示任何其他明显的原因迹象。

```
window.FormOptionView = Backbone.View.extend({
    template: _.template($('#test-option').html()),
    render: function (eventName) {
        $('#test1').append(this.template(this.model.toJSON()));
         $('#test2').append(this.template(this.model.toJSON()));
        return this;
    }

});

window.AddTestView = Backbone.View.extend({

    template: _.template($('#test-add').html()),

    initialize: function () {
        this.collection.bind("reset", this.render, this);
        this.render();

    },

    events: {
             "click button": "addTest" 
    },

    addTest: function(event){
        event.preventDefault();
        var test = new Test({
            test1: {
                firstName: $("#test1 option:selected").val(),
                lastName: $("#test1Score").val()
            },
            test2: {
                firstName: $("#test2 option:selected").val(),
                lastName: $("#test2Score").val()
            }
        });

        test.add(result);
        app.navigate("tests", true);

    },

    render: function (eventName) {
        $('#content').html(this.template());
        _.each(this.collection.models, function (test) {
             this.renderSelectBox(test);
        }, this);
        return this;
    },

    renderSelectBox: function (item) {
       var optionView = new FormOptionView({
           model: item
       });
       $(this.el).append(optionView.render().el);
    }
}); 
```

对应的 HTML

```
 <script type="text/template" id="test-option">
        <option><%= firstName %> <%= lastName %></option>
    </script>

    <script type="text/template" id="test-add">

                <form id="addTest" action="#">
                        <label for="test1">Test1:</label>

                        <select id="test1">
                            <option></option>
                        </select>

                        <label for="test1Score">Score:</label>

                        <input id="test1Score" type="number" />

                        <label for="test2">Test 2:</label>

                        <select id="test2">
                            <option></option>
                        </select>

                        <label for="test2Score">Score:</label>

                        <input id="test2Score" type="number" />

                        <button id="add">Add</button>
                    </form>

           </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:23:53.633

在没有看到相应的 HTML 的情况下，我最好的猜测是您`<button>`超出了您的视图范围。单击事件仅附加到视图根元素的子元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T19:19:55.883

正如您已经发现的那样，您的问题是您的视图没有`el`正确处理它。

当你的视图被渲染时，Backbone 通过[`delegate`](http://api.jquery.com/delegate/)在视图的`this.el`.

如果您没有明确设置`el`（通过构造函数 as `new V({ el: ... })`，在视图的定义中`el: ...`，或通过调用[`setElement`](http://backbonejs.org/#View-setElement)），那么将使用[文档中所述的](http://backbonejs.org/#View-el)`el`各种视图属性来构造；默认只是一个简单的. 这就是你的 empty s 的来源。`el``<div>``<div>`

你正在这样做：

```
render: function (eventName) {
    $('#content').html(this.template());
    _.each(this.collection.models, function (test) {
         this.renderSelectBox(test);
    }, this);
    return this;
} 
```

在其他地方你可能正在做一个简单的`add_test_view.render()`. 结果是事件`delegate`被绑定到视图的`el`（一个空的`<div>`）并且`el`永远不会添加到 DOM 中；如果您`delegate`绑定了不在 DOM 中的东西，那么您将永远不会收到任何事件。

如果您`el: '#content'`在视图定义中说，那么 Backbone 将`#content`用作您`el`的视图，您的视图看起来更像这样：

```
el: '#content',
//...
render: function (eventName) {
    this.$el.html(this.template());
    this.collection.each(function(test) {
        this.renderSelectBox(test);
    }, this);
    return this;
},
renderSelectBox: function (item) {
    var optionView = new FormOptionView({
        model: item
    });
    this.$el.append(optionView.render().el);
} 
```

请注意，我切换到`this.collection.each`，Backbone 集合[混合了各种 Underscore 方法，](http://backbonejs.org/#Collection-Underscore-Methods)因此您不必`collection.models`手动访问；我也切换到了，[`this.$el`](http://backbonejs.org/#View-%24el)因为 view 已经有一个缓存的 jQuery 版本的`this.el`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T18:31:34.583

刚刚发现views`el`标签对应的是一堆空`<div>`的s。不知道为什么，但一个简单的`el: $('#content')`设法解决了这个问题。谢谢

# android - 解析XML在线文件Android

> ID：11547768
> 
> 赞同：0
> 
> 时间：2012-07-18T18:15:22.110
> 
> 标签：android, xml, xml-parsing

我正在为 Android 制作应用程序，我需要显示此页面的 XML 文件：http: [//www.bovalpo.com/cgi-local/xml_bcv.pl?](http://www.bovalpo.com/cgi-local/xml_bcv.pl?URL=7009) URL=7009 我尝试了页面上给出的解决方案，但我发现它错了，因为它在您运行应用程序时不显示。我只想显示“tipo= DOLAR SPOT INTERCambio”

这是 XML 代码

![XML 代码](../Images/f39704aa78c058c63f15a0bdc156abd3.png)

这是我的代码：

xmlpruebaprueba.jar

```
XMLdataCollected sitesList= null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_xmlpruebaprueba);

    //creando un Layout
    LinearLayout layout = new LinearLayout(this);
    layout.setOrientation(1);

    //creando TextView

    TextView Registro[];
    TextView Tipo[];

    try {
        SAXParserFactory spf = SAXParserFactory.newInstance();
        SAXParser sp = spf.newSAXParser();
        XMLReader xr = sp.getXMLReader();

        URL sourceURL = new URL("http://www.bovalpo.com/cgi-local/xml_bcv.pl?URL=7009");

        handlingXml  HandlingXml = new handlingXml();
        xr.setContentHandler(HandlingXml);
        xr.parse(new InputSource(sourceURL.openStream()));
    }catch (Exception e){
        System.out.println("XML Parsing Exception= " + e);
    }

    sitesList = handlingXml.sitesList;

    Registro = new TextView[sitesList.getRegistro().size()];
    Tipo = new TextView[sitesList.getTipo().size()];

    for (int i = 0; i < sitesList.getRegistro().size(); i++) {
        Registro[i] = new TextView(this);
        Registro[i].setText("Registro = "+sitesList.getRegistro().get(i));
        Tipo[i] = new TextView(this);
        Tipo[i].setText("Tipo = "+sitesList.getTipo().get(i));

        layout.addView(Registro[i]);
        layout.addView(Tipo[i]);
    } 
} 
```

}

* * *

这是我的处理程序

```
Boolean currentElement = false;
String currentValue = null;
public static XMLdataCollected sitesList = null;

public static XMLdataCollected getDataCollected (){
    return sitesList;
}

public static void setSitesList(XMLdataCollected sitesList){
    handlingXml.sitesList = sitesList;
}

@Override
public void startElement(String uri, String localName, String qName,
        Attributes attributes) throws SAXException {
    // TODO Auto-generated method stub

    currentElement = true;

    if(localName.equals("Root"))
    {
        sitesList = new XMLdataCollected();
    }else if (localName.equals("Registro")){
        String attr = attributes.getValue("tipo");
        sitesList.setTipo(attr);
    }
}

@Override
public void endElement(String uri, String localName, String qName)
        throws SAXException {
    // TODO Auto-generated method stub

    currentElement = false;

    if (localName.equalsIgnoreCase("Registro"))
        sitesList.setRegistro(currentValue);
        else if (localName.equalsIgnoreCase("Root"))
        sitesList.setRoot(currentValue);    
    }

@Override
public void characters(char[] ch, int start, int length)
        throws SAXException {
    // TODO Auto-generated method stub
    if (currentElement) {
        currentValue = new String(ch, start, length);
        currentElement = false;
        }
}

} 
```

* * *

这是我的数据收集

公共类 XMLdataCollected {

```
private ArrayList<String> root = new ArrayList<String>();
private ArrayList<String> registro = new ArrayList<String>();
private ArrayList<String> tipo = new ArrayList<String>();

public ArrayList<String> getRoot (){
    return root;
}

public void setRoot(String root){
    this.root.add(root);
}

public ArrayList<String> getRegistro (){
    return registro;
}

public void setRegistro(String registro){
    this.registro.add(registro);
}

public ArrayList<String> getTipo (){
    return tipo; 
}

public void setTipo(String tipo){
    this.tipo.add(tipo);
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T18:28:49.513

您正在调用您`Web Request`的主 UI 线程。

**请不要这样做**

使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)调用 web 您的请求。

# iphone - Obj-C：核心图形库中 Malloc 6.00 KB 的内存泄漏

> ID：11547770
> 
> 赞同：0
> 
> 时间：2012-07-18T18:15:31.933
> 
> 标签：iphone, xcode, memory-leaks

我从这个应用程序中得到了这些巨大的泄漏，我似乎无法解决这个问题。

负责的 Frame 是 CGDataProviderCreateWithCopyOfData

这是泄漏。

![在此处输入图像描述](../Images/86f7ef7209f8fb3267335936416ad21c.png) ![在此处输入图像描述](../Images/1d1c51dce128913cd6315e001559e42d.png)

**编辑**

我认为导致问题的线路

```
 CGRect frame = CGRectMake(0, 0, 320, 49);
    UIView *myview = [[UIView alloc] initWithFrame:frame];
    myview.backgroundColor = [UIColor blackColor];
    [myview addSubview:[[UIImageView alloc]initWithImage:[UIImage imageNamed:@"tabbar-3.png"]]];
    if ([[[UIDevice currentDevice] systemVersion] floatValue] < 5)  {
        [[tabController tabBar] insertSubview:myview atIndex:0];
    }else{
        [[tabController tabBar] insertSubview:myview atIndex:1];
    }

    if ([UITabBar instancesRespondToSelector:@selector(setSelectedImageTintColor:)]){
        [[tabController tabBar] setSelectedImageTintColor:[UIColor colorWithRed:189.f/255 green:224.f/255.f blue:2.f/255.f alpha:1]];

        [[tabController tabBar] setTintColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"g1.png"]]];

        [[UITabBar appearance] setSelectedImageTintColor:[UIColor colorWithRed:189.f/255 green:224.f/255.f blue:2.f/255.f alpha:1]];

        [[tabController tabBar] setSelectionIndicatorImage:[UIImage imageNamed:@"hover.png"]];
        [[UITabBar appearance] setSelectionIndicatorImage:[UIImage imageNamed:@"hover.png"]];

        for (int i=0; i<[tabController.viewControllers count]; i++) {
            UIViewController *tab= [tabController.viewControllers objectAtIndex:i];

            [tab.tabBarItem setTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys:
                                                [UIColor colorWithRed:189.f/255 green:224.f/255.f blue:2.f/255.f alpha:1], UITextAttributeTextColor, 
                                                [NSValue valueWithUIOffset:UIOffsetMake(0,0)], UITextAttributeTextShadowOffset, 
                                                [UIFont fontWithName:@"Lucida Grande-Bold" size:10.0], UITextAttributeFont, nil]
                                      forState:UIControlStateSelected];
        } 
```

导致这个问题。我的任务是修复这些泄漏，但需要帮助修复这些泄漏。任何帮助都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:22:16.790

通常很难隔离泄漏。根据评论与答案的比率，我认为您不会在 Stack Overflow 上得到答案。

我认为这种情况下最好的策略是复制你的项目，然后删除代码，直到你可以用尽可能少的代码重现泄漏。在那时候：

1.  解决方案将是显而易见的；或者
2.  您将能够在此处发布更集中的问题；或者
3.  这显然是一个错误，您将能够向 Apple 提交一份*有用*的报告。

您可能还想退后一步，看看是否存在不相关的内存问题。启用 ARC 后，您可能会“废弃”内存：可访问，因此严格来说不是泄漏，但不再使用。[bbum 有一些以这种方式使用 Instruments 的好技巧](http://www.friday.com/bbum/2010/10/17/when-is-a-leak-not-a-leak-using-heapshot-analysis-to-find-undesirable-memory-growth/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-25T03:17:52.170

我看到诸如 addSubview 和 insertSubview 之类的东西，但没有任何东西可以删除。您确定要根据需要删除子视图吗？看起来您正在分配其他对象并将它们放在其他对象之上。

# jquery - 根据在搜索框中输入的内容显示 tr

> ID：11547771
> 
> 赞同：0
> 
> 时间：2012-07-18T18:15:32.340
> 
> 标签：jquery

[http://jsfiddle.net/YxU2H/2/](http://jsfiddle.net/YxU2H/2/) 这是我正在尝试做的一个例子。根据在框中键入的内容隐藏该行。由于某种原因，keyup 无法正常工作。帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:19:14.713

检查这个：

```
$(document).ready(function() {
    var search$ = $('#search'),
        table$ = $('#attribute'),
        content = '';
    search$.keyup(function() {
        var val = $.trim(this.value).toLowerCase();
        if (val === content) { // this.value gives the types value
            return;
        }
        content = val;
        table$.find('tbody>tr').show();
        table$.find('tbody h4').filter(function(index, element) {
            return $(this).text().toLowerCase().indexOf(content) === -1;
        }).closest('tr').hide();
    });
}); 
```

**[演示](http://jsfiddle.net/YxU2H/9/)**

# c - 此代码在任何 C 标准下都有效吗？

> ID：11547777
> 
> 赞同：-2
> 
> 时间：2012-07-18T18:15:47.607
> 
> 标签：c, main

此代码是否遵循 C 标准（例如 C89、C99、C10x）？

```
void 
main(int a,int b, int c, int d,char *msg){
    if(d==1){
        printf("%s\n",msg);
    }else{
        main(1,2,3,1,&"Hello Stackoverflow");
    }
} 
```

如果不是，为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-18T18:20:32.987

有一个错误：`&"Hello Stackoverflow"`没有 type `char*`，所以你不应该将它传递给期望该类型的函数。

除此之外，标准允许该程序作为特定于实现的扩展，但编译器可以自由拒绝它。

> 程序启动时调用的函数名为`main`. 实现没有声明这个函数的原型。它应定义为返回类型`int`且不带参数：

```
int main(void) { /* ... */ } 
```

> 或带有两个参数（这里称为`argc`and `argv`，尽管可以使用任何名称，因为它们对于声明它们的函数是本地的）：

```
int main(int argc, char *argv[]) { /* ... */ } 
```

> 或同等学历; **或以其他一些实现定义的方式**。

（2011 标准，最新草案第 5.1.2.2.1 节，已添加重点。）

C 标准中没有禁止递归调用`main`。这是与 C++ 的区别，它确实禁止这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T18:20:00.703

你的意思是旁边它不会运行？ `main`被定义为`int, char**`作为参数。

根据编译器的不同，这可能会因为运行时找不到而无法启动`main(int, char**)`，或者在较旧的编译器上它只会崩溃，因为它会在堆栈上乱跑。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T18:24:10.470

它仅在 C99 及更高版本下有效，如果实现*明确*记录`main`可能采用 5 个参数（4`int`和 1 `char *`）并返回`void`（这是 larsmans 在他现在未删除的答案中引用的“或以某种其他实现定义的方式”子句，而且我认为 C89 中不存在该条款）。

否则行为是未定义的，这意味着编译器可能会或可能不会阻塞它。

# android - load 函数不会加载所有网页

> ID：11547784
> 
> 赞同：0
> 
> 时间：2012-07-18T18:16:24.247
> 
> 标签：android, jquery-mobile

我是 web dev 和 android 的新手，我正在尝试开发一个有电话间隙的 web 应用程序，并为此使用 jquery mobile。

我正在尝试在移动屏幕上查看和显示我的网页，其中页眉和页脚也通过 jquery 代码添加。

我为显示网页而编写的代码确实显示为例如[http://www.msn.com](http://www.msn.com)但是当我给出例如[http://46.137](http://46.137) ....（显然那是一个不完整的地址）它不起作用。顺便提一下，在这两种情况下都会显示警报。下面是代码

```
<div id="cnt" data-role="content">  
    <script>
    $("#cnt").load("http://46.137....", function() {
        alert('Load was performed.');
    });
    </script>
    <!-- <iframe src="http://46.137...."></iframe>  --> 
</div><!-- /content --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T19:18:41.737

嘿@LivingThing 试试这样，

```
...
<div id="video1" data-role="content">
    <iframe id="cnt" width="560" height="315" frameborder="0" allowfullscreen></iframe>
</div>
...

<script>
   function l() {
      document.getElementById('cnt').src = "http://www.cnn.com/US/index.html"
   }
   $(window).load(function() {
      l()
      alert('Load was performed.');
   });
</script> 
```

这一切都成`<div data-role="page">`

**我希望这有帮助。:)**

![在此处输入图像描述](../Images/ee8d60ff62ce0c1485cc4ecb21f37669.png)

![在此处输入图像描述](../Images/b24c9db71eb0c68761d31d26b4b942fb.png)

# javascript - 用另一个字符替换任意数量的字符

> ID：11547787
> 
> 赞同：0
> 
> 时间：2012-07-18T18:16:30.133
> 
> 标签：javascript, regex

使用 JavaScript 的替换功能如何用相同的字符替换多个字符？

```
Input = "blah...blah..blah....blah"
Output = "blah.blah.blah.blah" 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T18:18:24.007

```
input = input.replace(/\.+/g, "."); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T18:25:05.210

如果您需要匹配*任何*重复的字符而不仅仅是句点，您可以使用：

```
input = input.replace(/(.)\1+/g, "$1"); 
```

所以`blaaaah...blahhh..blah....bbblah`变成`blah.blah.blah.blah`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T18:21:56.353

想到一个 Javascript 正则表达式替换，搜索 (.+) 并替换为 .

就像是

```
s.replace(/(\.+)/mg,"."); 
```

未经测试，但应该足够接近以使您朝着正确的方向前进。祝你好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T18:22:55.427

在括号之间设置您的字符，例如使用“.”：

```
var s = "blah ... blah ...";
s.replace(/[.]+/gi, '.')
alert(s); 
```

所以：用 Y 之一替换任意数量的 X

```
s.replace(/[X]+/gi, 'Y'); 
```

# extjs - 从 ExtJS 的控制器中的单击事件中获取表单？

> ID：11547795
> 
> 赞同：4
> 
> 时间：2012-07-18T18:17:03.013
> 
> 标签：extjs, extjs4, extjs-mvc

我正在扩展[http://docs.sencha.com/architect/2-0/#!/guide/views_forms_extjs](http://docs.sencha.com/architect/2-0/#!/guide/views_forms_extjs)中给出的示例，以使用更以 MVC 为中心的方法。因此，为此我想将点击处理程序从视图移动到新创建的控制器。

我的点击甚至可以正常工作，但我不知道如何从控制器的上下文中操作表单（视图使用 this.getForm()）。

这是我到目前为止所拥有的，

```
Ext.define('LoginExample.controller.LoginController', {
    extend: 'Ext.app.Controller',

    onLoginButtonClick: function(button, e, options) {
        console.log('button clicked');

        if (this.getForm().isValid()) {
            this.getForm().submit({
                url: 'login.php',
                success: function(form, action) {
                    Ext.Msg.alert('Login Successful!');
                },
                failure: function(form, action) {
                    Ext.Msg.alert('Login Failed!');
                }
            });
        }
    },

    init: function() {
        this.control({
            "#loginButton": {
                click: this.onLoginButtonClick
            }
        });
    }

}); 
```

显然 onLoginButtonClick 上下文中的 this 不再是视图，而是控制器。

给定给我的参数（Ext.button.Button 按钮、事件 e、对象选项），我如何在适当的表单上提交？

我应该使用 ExtJS 4 注意到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T18:25:14.380

```
button.up('form'); 
```

会成功的。

要获取要操作的 BasicForm 对象，请使用

> button.up('form').getForm()

# html - 谷歌地图 V3 信息窗口的大小不适合图像

> ID：11547802
> 
> 赞同：0
> 
> 时间：2012-07-18T18:17:13.977
> 
> 标签：html, google-maps, infowindow

我在让我的信息窗口具有我想要的大小时遇到​​了一些麻烦。我试图在 infowindow 内放置一个 15px x 15px 的图像，并相应地设置 infowindow 的大小。但是，无论我做什么，似乎信息窗口都比图像大得多。这是我试图放入信息窗口的代码：

```
<div style="width: 15px; height 15px">
  <img src="http://maps.gstatic.com/mapfiles/transit/iw/6/walk.png" width="15" height="15">
</div> 
```

然后是制作和显示窗口本身的代码：

```
var infowindow = new google.maps.InfoWindow({
  content: window_text,
  position: GPS_coordinates,
  maxWidth: "15px"
});
infowindow.open(map); 
```

我在这里做错了吗？感谢所有的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:49:13.880

InfoWindow 有一个最小尺寸，因为它是由图形构成的。最小宽度为 247px，设置`maxWidth`为小于此数字的任何值都会导致宽度为 247px。

**参考**
[https://groups.google.com/forum/m/#!topic/google-maps-js-api-v3/Dnew8W5Trjg](https://groups.google.com/forum/m/#!topic/google-maps-js-api-v3/Dnew8W5Trjg)
[如何在 Javascript (v3 API) 中调整 Google Maps InfoWindow 的大小](https://stackoverflow.com/questions/9142233/how-to-size-a-google-maps-infowindow-in-javascript-v3-api)

**其他资源**
您可以尝试实用程序库[http://code.google.com/p/google-maps-utility-library-v3/wiki/Libraries中的](http://code.google.com/p/google-maps-utility-library-v3/wiki/Libraries)*InfoBox*或*InfoBubble*

# f# - 可能的 F# 类型推断限制

> ID：11547804
> 
> 赞同：2
> 
> 时间：2012-07-18T18:17:17.680
> 
> 标签：f#, type-inference

我很确定我遇到了某种限制，但我不明白：

```
type IRunner = 
    abstract member Run : (string -> 'a) -> 'a
type T() = 
    let run4 doFun = doFun "4"
    let run5 doFun = doFun "5"
    let parseInt s = System.Int32.Parse(s)
    let parseFloat s = System.Double.Parse(s)
    let doSomething () = 
        let i = parseInt |> run4
        let f = parseFloat |> run4
        f |> ignore

    // Make it more generic ->
    //let doSomething2 (runner:(string->'a)->'b) =
    let doSomething2 runner = 
        // Error on the following lines with both declarations
        let i = parseInt |> runner
        let f = parseFloat |> runner
        f |> ignore

    // Want to do something like
    let test () = 
        doSomething2 run4
        doSomething2 run5

    // Workaround
    let workaround (runner:IRunner) = 
        let run f = runner.Run f
        let i = parseInt |> run
        let f = parseFloat |> run
        f |> ignore 
```

有人可以对此有所了解吗？我没有找到任何相关的问题，对不起，如果我重复了一些东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T18:35:33.683

问题是，如果有`doSomething2`type ，`((string->'a) -> 'b) -> unit`然后在每次*调用*.`'a``'b``doSomething2``'a``int``float`*`doSomething2`*

 *看起来你真正想要的更像是：`doSomething2 : (forall 'a. (string -> 'a) -> 'a) -> unit`，但这种直接的全称量化在 F# 中不存在。正如您所发现的，解决此问题的方法是使用具有泛型方法的类型。

即使 F# 确实支持`forall`类型，正如我在评论推断中提到的那样，仍然不可能。考虑您的`doSomething2`功能-我们知道`runner`需要能够将输入类型`string -> int`转换为某些输出类型，并将类型输入`string -> float`转换为某些（可能不同的）输出类型。这里有几个不同的签名`doSomething2`都满足这个要求：

1.  `forall 'a. 'a -> 'a`
2.  `forall 'a. (string -> 'a) -> 'a`
3.  `forall 'a. 'a -> unit`

请注意，这些类型中没有一个比其他类型更通用，它们都是不兼容的。在第一种情况下，我们可以传递`id`给函数，在第二种情况下，我们可以传递`run4`给它，而在第三种情况下，我们可以传递`ignore`给它（但这些函数都不与其他可能的签名兼容！）。*

# php - PHP在使用for时获取名称和值

> ID：11547806
> 
> 赞同：1
> 
> 时间：2012-07-18T18:17:28.433
> 
> 标签：php

我有这个问题，当我使用数组时

```
Array
(
    [11] => /2
    [10] => /2
) 
```

使用时无法获取数组名称或值

```
for($i=0; $i < count($_SESSION['CHECKBOX']);$i++){ 
```

我怎样才能得到这个名字？和价值？分离？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T18:19:34.977

给定一个数组`$_SESSION['CHECKBOX']`，您可以使用：

```
foreach($_SESSION['CHECKBOX'] as $key=>$value) {
    echo $key . '->' . $value . '<br />';
} 
```

获取键和值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T18:26:42.787

使用[`foreach`](http://us2.php.net/manual/en/control-structures.foreach.php)构造：

> foreach 构造提供了一种迭代数组的简单方法。foreach 仅适用于数组和对象，当您尝试在具有不同数据类型的变量或未初始化的变量上使用它时会发出错误。有两种语法：

它将迭代您的数组并将键分配给`$key`变量并将值分配给`$value`数组：

```
foreach($_SESSION['CHECKBOX'] as $key => $value){
    echo "$key = $value";
} 
```

或连接字符串：

```
echo $key . '=' . $value; 
```

# python - 如何在python中获取选定列表项的路径

> ID：11547808
> 
> 赞同：0
> 
> 时间：2012-07-18T18:17:43.257
> 
> 标签：python, wxpython

我正在制作音乐播放器。我正在尝试添加一个功能，它是“歌曲”文件夹/目录中所有歌曲的列表框。我将它放在歌曲出现在列表框中的位置，但是一旦在列表框中选择歌曲，我将如何让歌曲播放？

这是我的一些代码：

```
 songlist = os.listdir('songs')
    listbox = wx.ListBox(panel2, -1, (10,200), (140,200), songlist, wx.LB_SINGLE)

    self.Bind(wx.EVT_LIST_ITEM_SELECTED, self.selLoadFile, listbox) 
```

这是我的列表框的代码。我的 selLoadFile 函数会是什么样子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:35:39.447

```
def selLoadFile(self,evt):
    my_selection = self.myListBox.GetStrings()[self.myListBox.GetSelection()]
    file_path = os.path.join(os.os.getcwd(),"songs",)
    print "My File Selected:",file_path
    #play song somehow 
```

但是您需要保存对列表框的一些引用

# qt - Qt .pro 文件中的条件命令

> ID：11547813
> 
> 赞同：0
> 
> 时间：2012-07-18T18:18:00.657
> 
> 标签：qt, makefile

我对我的 Qt .pro 文件有疑问...我[在此链接](https://stackoverflow.com/questions/5140895/lupdate-and-conditional-includes-in-a-pro-file)中看到了有关类似问题的另一篇文章，但我使用了 contains() 函数但没有用。

就我而言，我有一个名为 mainconfig.h 的文件，我在其中定义了一些项目配置标志，我确实在那里创建了定义，例如：“#define MY_CONFIG_DEFINE”。这些标志定义了将显示哪些菜单选项等。我的问题是：所有文件总是被编译，即使我不使用它，因为我在“mainconfig.h”文件中定义了一些标志。我想避免编译一些我不会使用的文件，在我的 .pro 文件中定义一些变量并执行条件命令，仅包括我想要的文件。

有人能帮我吗？

我在我的 .pro 文件中试过这个：

```
 # This variable defines the current project ADRIANO_PROJECT = PROJECT_TYPE_1
    ADRIANO_PROJECT = PROJECT_TYPE_1

    (...) 

    FORMS += ui/form1.ui \ 
    contains(ADRIANO_PROJECT, PROJECT_TYPE_1) {
            ui/myform1.ui \
            ui/myform2.ui \ 
    }
             ui/form2.ui \
             ui/form3.ui

    (...)

    # This is only a example, ok? 
```

对不起我的英语，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T20:30:41.673

恕我直言，您的语法错误。试试这个：

```
ADRIANO_PROJECT = PROJECT_TYPE_1

FORMS += ui/form1.ui \ 
         ui/form2.ui \
         ui/form3.ui

contains(ADRIANO_PROJECT, PROJECT_TYPE_1) {
        FORMS + = ui/myform1.ui \
                  ui/myform2.ui 
} 
```

# android - 将 OnClickListener 与多个 ImageButton 一起使用？

> ID：11547816
> 
> 赞同：0
> 
> 时间：2012-07-18T18:18:10.247
> 
> 标签：android, android-intent, zxing

我正在尝试使用他们的 ScannerViaIntent 源代码通过 zxing 从带有纯文本的条形码中提取数据。当我为单个 ImageButton 设置代码时，它工作得非常好，但是当我设置其他两个按钮时，我在从条形码扫描仪返回结果时收到此错误。

错误：

```
07-18 14:16:00.080: E/AndroidRuntime(9004): java.lang.RuntimeException: Unable to resume activity {com.fmi.inventory/com.fmi.inventory.MainActivity}: java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=49374, result=0, data=null} to activity {com.fmi.inventory/com.fmi.inventory.MainActivity}: java.lang.NullPointerException
07-18 14:16:00.080: E/AndroidRuntime(9004): Caused by: java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=49374, result=0, data=null} to activity {com.fmi.inventory/com.fmi.inventory.MainActivity}: java.lang.NullPointerException
07-18 14:16:00.080: E/AndroidRuntime(9004):     at com.fmi.inventory.MainActivity.onActivityResult(MainActivity.java:70) 
```

代码：

```
package com.fmi.inventory;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.widget.EditText;
import android.widget.ImageButton;

public class MainActivity extends Activity {

    ImageButton button;
    ImageButton button1;
    ImageButton button2;
    EditText editField;
    Activity activity;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        activity = this;
        button = (ImageButton)findViewById(R.id.scanCubeID);
        button1 = (ImageButton)findViewById(R.id.scanEmployeeID);
        button2 = (ImageButton)findViewById(R.id.scanConfigID);
        button.setOnClickListener(listener);
        button1.setOnClickListener(listener);
        button2.setOnClickListener(listener);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    @Override
    public void onResume() {
        super.onResume();

    }
    private View.OnClickListener listener = new View.OnClickListener() {
        public void onClick(View v) {
            IntentIntegrator integrator = new IntentIntegrator(activity);
            switch (v.getId()){
                case (R.id.scanCubeID):
                    editField = (EditText)findViewById(R.id.editCubeID);
                    integrator.initiateScan();
                case (R.id.scanEmployeeID):
                    editField = (EditText)findViewById(R.id.editEmployeeID);
                    integrator.initiateScan();
                case (R.id.scanConfigID):
                    editField = (EditText)findViewById(R.id.editConfigID);
                    integrator.initiateScan();
            }

        }
    };

    public void onActivityResult(int requestCode, int resultCode, Intent intent) {
           IntentResult scanResult = IntentIntegrator.parseActivityResult(requestCode, resultCode, intent);
          if (scanResult != null) {
              String barcode = scanResult.getContents();
              this.editField.setText(barcode);
          }
            // else continue with any other code you need in the method

         }
} 
```

布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <EditText
        android:id="@+id/editCubeID"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/scanEmployeeID"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_toLeftOf="@+id/scanCubeID"
        android:ems="10"
        android:hint="@string/edit_cubeid" >

        <requestFocus />
    </EditText>

    <EditText
        android:id="@+id/editEmployeeID"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/scanConfigID"
        android:layout_alignParentLeft="true"
        android:layout_alignRight="@+id/editCubeID"
        android:layout_below="@+id/editCubeID"
        android:ems="10"
        android:hint="@string/edit_employeeid" />

    <EditText
        android:id="@+id/editConfigID"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/scanConfigID"
        android:layout_alignParentLeft="true"
        android:layout_alignRight="@+id/editEmployeeID"
        android:layout_below="@+id/editEmployeeID"
        android:ems="10"
        android:hint="@string/edit_configid" />

    <ImageButton
        android:id="@+id/scanCubeID"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:contentDescription="@string/desc"
        android:layout_alignParentTop="true"
        android:src="@drawable/ic_action_scan"/>

    <ImageButton
        android:id="@+id/scanEmployeeID"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:contentDescription="@string/desc"
        android:layout_below="@+id/scanCubeID"
        android:src="@drawable/ic_action_scan"/>

    <ImageButton
        android:id="@+id/scanConfigID"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:contentDescription="@string/desc"
        android:layout_below="@+id/scanEmployeeID"
        android:src="@drawable/ic_action_scan"/>

    <Button
        android:id="@+id/submit"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/editConfigID"
        android:text="@string/button_continue" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T18:21:49.293

在 switch 中添加`break`case 为：

```
public void onClick(View v) {
            IntentIntegrator integrator = new IntentIntegrator(activity);
            switch (v.getId()){
                case (R.id.scanCubeID):
                    editField = (EditText)findViewById(R.id.editCubeID);
                    integrator.initiateScan();

                 break ;  // add here

                case (R.id.scanEmployeeID):
                    editField = (EditText)findViewById(R.id.editEmployeeID);
                    integrator.initiateScan();

                 break ;// add here

                case (R.id.scanConfigID):
                    editField = (EditText)findViewById(R.id.editConfigID);
                    integrator.initiateScan();

                 break ; // add here

            }

        }
    }; 
```

# python - 访问 __init__ 参数

> ID：11547818
> 
> 赞同：0
> 
> 时间：2012-07-18T18:18:15.940
> 
> 标签：python

是否可以访问传递给 的参数`__init__`，而无需显式存储它们？

例如

```
class thing(object):
  def __init__(self, name, data):
    pass # do something useful here

t = thing('test', [1,2,3,])
print t.__args__ # doesn't exist

>> ('test', [1,2,3]) 
```

用例是创建一个超类，它可以自动存储用于创建从它派生的类的实例的参数，*而*无需将所有参数显式传递给超类`__init__`。也许有更简单的方法来做到这一点！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-18T18:21:03.853

不，您必须存储它们。否则，它们会在`__init__()`返回后消失，就像所有局部变量一样。

如果您不想显式传递所有参数，可以使用`**kwargs`：

```
class Base(object):
    def __init__(self, name, data):
        # store name and data

class Derived(Base):
    def __init__(self, **kwargs):
        Base.__init__(self, **kwargs)

Derived(name="Peter", data=42) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T19:39:02.020

这并不完全推荐，但这里有一个自动存储参数变量的包装器：

```
from functools import wraps
def init_wrapper(f):
    @wraps(f)
    def wrapper(self, *args, **kwargs):
        func_parameters = f.func_code.co_varnames[1:f.func_code.co_argcount]

        #deal with default args
        diff = len(func_parameters) - len(args)
        if diff > 0:
            args += f.func_defaults[-diff:]

        #set instance variables
        for pos, arg in enumerate(func_parameters):
            print pos, arg
            setattr(self, arg, args[pos])

        f(self, *args, **kwargs) #not necessary to use return on __init__()
    return wrapper 
```

用法：

```
class A(object):
    @init_wrapper
    def __init__(self, a, b, c):
        print a + b + c 
```

例子：

```
>>> a = A(1, 2, 3)
6
>>> a.a
1
>>> a.b
2
>>> a.c
3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T19:08:58.883

一句话：没有。

你可以做的是：

```
def __init__(self, *args, **kwargs):
    self.args = args
    self.kwargs = kwargs 
```

如果您发现自己需要做很多事情，您还可以使用装饰器来抽象任务。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-18T18:20:54.687

我认为您正在寻找[任意参数列表](http://docs.python.org/tutorial/controlflow.html#arbitrary-argument-lists)和[关键字参数](http://docs.python.org/tutorial/controlflow.html#keyword-arguments)与`super.__init__`.

不过，在开始这条道路之前，请先阅读“Python 的 Super 很漂亮，但你[*不能使用它” 。*](https://fuhm.net/super-harmful/)

# iphone - 将 uiimage 传递给新视图

> ID：11547833
> 
> 赞同：0
> 
> 时间：2012-07-18T18:19:11.063
> 
> 标签：iphone, objective-c, ios

我正在尝试创建一个图像数组（来自网络），然后将该数组传递给一个新视图。这是我正在使用的代码：

```
WebViewController *webController = segue.destinationViewController;

NSURL *url = [NSURL URLWithString:[gift objectForKey:@"smallImageUrl"]];
NSData *data = [NSData dataWithContentsOfURL:url];
UIImage *image = [UIImage imageWithData:data];
webController.image = image; 
```

在我的 WebViewController.hi 中还有：

```
@property(strong,nonatomic) UIImage *image; 
```

但是当我尝试在 WebViewController.m 中使用“图像”时，我得到的只是一个（空）值。我哪里错了？谢谢！

更新：问题似乎不像我之前所说的那样。该图像使其成为 WebViewController。我正在尝试将图像保存到一个数组中，该数组必须是我的问题所在。这是我在保存方法中的代码（在 WebViewController.m 中）：

```
NSMutableArray *imageArray = [[NSMutableArray alloc] init];
[imageArray addObject:image];
[imageArray writeToFile:imageFileName atomically:YES]; 
```

在我的 viewdidload 中我也这样做：

```
paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
documentsDirectory = [paths objectAtIndex:0];
imageFileName = [NSString stringWithFormat:@"%@/imageArray",documentsDirectory]; 
```

# header - 验证文件头的最佳方法

> ID：11547838
> 
> 赞同：1
> 
> 时间：2012-07-18T18:19:37.317
> 
> 标签：header, metadata, archive

我正在尝试验证文件头（元数据）是否具有正确的信息并且没有损坏。

例如：有人操纵存档标题中的文件大小以利用零日。如何检查文件大小实际上是那个大小？

*   最好的方法是什么？

# java - 将 24 位图像 RGB 转换为 3 位 8 色

> ID：11547841
> 
> 赞同：1
> 
> 时间：2012-07-18T18:19:55.787
> 
> 标签：java, rgb, bufferedimage, color-palette

我能够`BufferedImage`获得 640x640 图像的每个像素的 RGB 值，输出如下所示：

```
[...]
Pixel :(640, 634) RGB: 166 94 82
Pixel :(640, 635) RGB: 166 94 80
Pixel :(640, 636) RGB: 163 91 77
Pixel :(640, 637) RGB: 157 88 73
Pixel :(640, 638) RGB: 157 88 73
Pixel :(640, 639) RGB: 159 90 74
Pixel :(640, 640) RGB: 158 89 73
This image has 69197 colors. 
```

我需要将这种方式获得的每种 RGB 颜色分类为 3 位 RGB（8 种颜色），我需要知道如何做到这一点......如何知道 8 种颜色中每种颜色的 RGB 范围的 3 位 RGB。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T18:36:38.027

您生成的图像对于每个颜色分量都有 1 位。

例如，对于红色，您应该这样做：

```
 red1Bit = redOriginal > 127 ? 1 : 0; 
```

你也应该对蓝色和绿色做同样的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T18:44:41.530

24 位 RGB 调色板对红色、绿色和蓝色分量各使用 8 位：

`RGB([0..255], [0..255], [0..255])`.

3 位 RGB 调色板对红色、绿色和蓝色分量各使用 1 位：

`RGB([0..1], [0..1], [0..1])`.

由于每个通道的范围只有两个值，因此需要将 8 位编码减少为 1 位编码。为此，除以八位编码中最大值的一半 ( `255 / 2 = 127`)

您可以使用整数除法来转换每个 RGB 组件：

```
3 bit R : (8-bit Red Value) / 127
      G : (8-bit Green Value) / 127 
      B : (8-bit Blue Value) / 127 
```

例子：

```
3 bit R : (56) / 127 = 0
      G : (225) / 127 = 1
      B : (127) / 127 = 1 
```

# java - 哪个列表实现最适合从正面和背面移除和插入？

> ID：11547843
> 
> 赞同：4
> 
> 时间：2012-07-18T18:20:08.317
> 
> 标签：java, performance, list, data-structures

我正在研究一种算法，它将一小部分对象存储为一大组对象的子列表。对象本质上是有序的，因此需要一个有序列表。

执行的最常见操作将按频率顺序排列：

1.  从列表中检索第 n 个元素（对于一些任意 n）
2.  在列表的开头或结尾插入一个
3.  从列表中删除第一个或最后一个 n 元素（对于一些任意 n）

从中间删除和插入永远不会完成，因此无需考虑其效率。

我的问题是，对于 Java 中的这个用例（即 LinkedList、ArrayList、Vector 等），List 的哪种实现最有效？请通过解释不同数据结构的实现来捍卫您的答案，以便我做出明智的决定。

谢谢。

**笔记**

不，这不是作业问题。不，我没有可以为我做这项工作的军队研究助理。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T18:32:50.573

根据您的第一个标准（任意访问），您应该使用 ArrayList。ArrayLists（和一般的数组）在恒定时间内提供查找/检索。相反，在 LinkedList 中查找项目需要线性时间。

对于 ArrayLists，末尾的插入或删除是免费的。它也可能与 LinkedLists 一起使用，但这将是特定于实现的优化（否则它是线性的）。

对于 ArrayLists，前面的插入或删除需要线性时间（随着空间的一致重用，这些可能会根据实现变得恒定）。列表前面的 LinkedList 操作是恒定的。

最后两个用例在某种程度上相互平衡，但您最常见的情况肯定建议使用基于阵列的存储。

至于基本的实现细节：ArrayLists 基本上只是内存的顺序部分。如果您知道起点在哪里，则只需进行一次加法即可找到任何元素的位置。前线的操作成本很高，因为可能必须转移元素以腾出空间。

LinkedLists 在内存中是不相交的，由相互链接的节点组成（引用第一个节点）。要找到第 n 个节点，您必须从第一个节点开始并跟随链接，直到到达所需的节点。前面的操作只需要创建一个节点并更新你的开始指针。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T18:25:01.137

我投票支持双链表。[http://docs.oracle.com/javase/6/docs/api/java/util/Deque.html](http://docs.oracle.com/javase/6/docs/api/java/util/Deque.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T22:36:51.797

用于此目的的最佳数据结构可能是使用动态数组实现的[双端队列](http://en.wikipedia.org/wiki/Deque "双端队列")，它基本上是一个`ArrayList`开始将元素添加到内部数组的中间而不是开头的元素。不幸的是，Java`ArrayDeque`不支持查找第 n 个元素。

然而，自己实现一个（或查找现有实现）非常容易，然后所有三个描述的操作都可以在 O(1) 中完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T18:38:31.887

绝对去LinkedList。对于在列表的开头/结尾插入一个值和删除列表中的第一个/最后一个元素，它在 O(1) 中运行。这是因为执行这些操作需要更改的只是几个指针，这是一个成本最低的操作。

虽然 ArrayLists 在 O(1) 中检索第 n 个元素，而 LinkedLists 在 O(n) 中检索第 n 个元素，但 ArrayLists 存在在插入元素时必须调整其大小的危险。当分配给 ArrayList 的内存用完并且您尝试插入另一个元素时，您认为会发生什么？那么发生的事情是 ArrayList 复制自身然后分配更多内存（总计是最初分配的两倍），这是一个非常昂贵的操作。LinkedLists 没有这个问题，因为，再次，所做的只是添加一个指针。

我对 Java 向量了解不多，但如果它们类似于 C++ 向量，那么它们与 ArrayLists 非常相似。

我希望这有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T18:25:29.313

如果您不担心效率，您可以使用 arrayList 完成所有这些操作，而不会造成混淆。

如果我只在前端或末端插入，我会使用某种队列或堆栈。他们的开销最小。或者你也可以使用链表。

要从第一个或最后删除 N 个元素，我将使用链表，您只需删除一个节点，然后删除它之前或之后的节点。即，如果我删除前 5 个元素，只需删除第 5 个元素，它之前的元素就会消失。此外，如果我删除最后 6 个元素，只需删除第 6 个到最后一个元素，其余元素就会消失。而java会为你做垃圾收集。对于此操作，这将是 (1) 的顺序。

这是一个家庭作业问题吗？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-08-21T15:13:03.940

java.util.TreeMap 的 Long 到 Object，并使用 i+tm.firstKey() 的索引

# fabricjs - 如何一键缩放画布的所有元素？

> ID：11547844
> 
> 赞同：1
> 
> 时间：2012-07-18T18:20:09.050
> 
> 标签：fabricjs

我在我的一个项目中使用了 fabric.js。我正在使用缩放功能。我想知道是否有一种简单的方法可以在单击时放大所有画布（包含所有元素）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T14:46:37.663

试试这个 jsfiddle 演示按钮的缩放 onclick：http: [//jsfiddle.net/cmontgomery/H7Utw/1/](http://jsfiddle.net/cmontgomery/H7Utw/1/)。本质上，您将所有对象都放在画布上并按相同的因子缩放/移动它们，从而提供缩放的视觉外观。

```
var objects = canvas.getObjects();
for (var i in objects) {
    var scaleX = objects[i].scaleX;
    var scaleY = objects[i].scaleY;
    var left = objects[i].left;
    var top = objects[i].top;

    var tempScaleX = scaleX * SCALE_FACTOR;
    var tempScaleY = scaleY * SCALE_FACTOR;
    var tempLeft = left * SCALE_FACTOR;
    var tempTop = top * SCALE_FACTOR;

    objects[i].scaleX = tempScaleX;
    objects[i].scaleY = tempScaleY;
    objects[i].left = tempLeft;
    objects[i].top = tempTop;

    objects[i].setCoords();
}

canvas.renderAll(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-03T11:54:43.897

如果您在不修改所有对象的情况下使用带有 fabricjs 的缩放，请使用：[https](https://github.com/wojtek-krysiak/fabricjs-viewport) ://github.com/wojtek-krysiak/fabricjs-viewport 。

示例：[http ://wojtek-krysiak.github.io/fabricjs-viewport/](http://wojtek-krysiak.github.io/fabricjs-viewport/)

# jquery - 有什么方法可以使用 jquery-ui-map 插件禁用 poi？

> ID：11547847
> 
> 赞同：0
> 
> 时间：2012-07-18T18:20:25.197
> 
> 标签：jquery, mobile, google-maps-api-3, maps, jquery-ui-map

我正在尝试在我正在处理的移动页面中禁用 poi 标记。看起来 gmap-constructor 应该接受 style 选项。但到目前为止我无法让它工作。

```
 $('#map_canvas').gmap({styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}]}); 
```

有任何想法吗？我知道这可以在不使用插件的情况下完成。我只是希望在不走那条路的情况下让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T19:42:58.793

尝试这个

```
$('#map_canvas').gmap({'center' : mapdata.origin, 
    'mapTypeControl' : true, 
    'navigationControl' : true,
    'navigationControlOptions' : {'position':google.maps.ControlPosition.LEFT_TOP},
    'styles':[{'featureType': "poi.business",
        'elementType': "labels",
        'stylers': [
          { 'visibility': "off" }]}] 
```

`mapdata.origin`有经纬度。

# c# - C# MVC Linq 子查询无法在 LINQ to Entities 查询中构造实体或复杂类型“XXX”

> ID：11547849
> 
> 赞同：0
> 
> 时间：2012-07-18T18:20:29.200
> 
> 标签：c#, asp.net-mvc, linq, count, subquery

我有这个错误。“无法在 LINQ to Entities 查询中构造实体或复杂类型 'MvcApp.Models.Survey'。”

这是我的查询：

```
 var surveys3 = (from s in db.Surveys
                        where s.AccountId == appAcc.Id
                        select new Survey
                        {
                            Id = s.Id,
                            Title = s.Title,
                            Description = s.Description,
                            NumberOfQuestions = (from q in s.Questions
                                                 select q).Count()
                        }).ToList();
        View(surveys3); 
```

我试图将 .ToList() 更改为 .AsEnumerable()，但是当尝试使用 foreach 循环模型时，它们的 View(surveys3) 失败

我的模型类如下所示：

```
public class Survey
    {
        [Required]
        [Key]
        public long Id { get; set; }

        [Required]
        [StringLength(100)]
        public string Title { get; set; }

        [DataType(DataType.MultilineText)]
        public string Description { get; set; }

        [DataType(DataType.DateTime)]
        public DateTime CreatedOn { get; set; }

        [NotMapped]
        public Int32 NumberOfQuestions { get; set; }

        public virtual ICollection<Question> Questions { get; set; }

        [ForeignKey("AccountId")]
        public ApplicationAccount Account { get; set; }
        [Required]
        public long AccountId { get; set; }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T18:38:36.813

这不应该工作。相反，您可以考虑创建一个视图模型来保存您需要的字段（并将您的视图更新为该类型而不是调查）并将其传递给视图或在创建新对象**之前调用 ToList()。**例如：

```
var surveys3 =  db.Surveys.Where( s => s.AccountId == appAcc.Id)
                                .ToList()
                                .Select( s => 
                                     new Survey {
                                          Id = s.Id,
                                          Title = s.Title,
                                          Description = s.Description,
                                          NumberOfQuestions = (from q in s.Questions
                                                     select q).Count()
                                           }); 
```

编辑：重新阅读您的问题和更新的代码后，我真的认为您想要在这里做的是创建一个 ViewModel 来保存您需要发送到视图的数据。您不想为正在执行的操作创建新记录，因此使用实体类来保存视图所需的数据是对实体类的滥用。如果您需要有关 ViewModel 的更多信息，请阅读以下内容：

[http://geekswithblogs.net/michelotti/archive/2009/10/25/asp.net-mvc-view-model-patterns.aspx](http://geekswithblogs.net/michelotti/archive/2009/10/25/asp.net-mvc-view-model-patterns.aspx)

# c++ - 从类继承时如何检查对象是哪个类类型

> ID：11547852
> 
> 赞同：1
> 
> 时间：2012-07-18T18:20:34.807
> 
> 标签：c++, arrays, class, object

假设我有 3 个不同的类别：设备、武器和工具。武器和工具继承装备。我创建了一个 Weapon 或 Tool 对象并将其添加到 Equipment 数组中。当我检索对象时，如何编写“IF”语句来检查该对象是武器还是工具？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:24:40.360

使用 dynamic_cast 如下：

```
Equipment *pMyObj = ... //got it somewhere

Weapon *pWeapon = dynamic_cast<Weapon *>(pMyObj);

if( pWeapon != NULL ){ 
 //you have weapon 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T18:25:14.523

您正在谈论 RTTI ( [link](http://en.wikipedia.org/wiki/Run-time_type_information#C.2B.2B_Example) )，但是如果您在 Equipment 基类中保留一个“类型”枚举可能会更好，然后只需检查它以找出派生类型是什么。然后，您可以`dynamic_cast`将 Equipment 对象设置为正确的派生类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T18:25:31.183

if (dynamic_cast< Weapon* >(Equipment_ptr) != NULL) // 然后是 Weapon

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T18:27:32.807

相信 typeid 是另一种选择..

```
if (typeid(thing)==typeid(otherthing)){
  //...
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T18:36:58.017

不过，我对 dynamic_cast 的感觉有些复杂。

虽然它会起作用，但如果选择的数量可以增加，它可能不是最佳选择。在这种情况下，我更喜欢“种类”枚举和虚拟 GetKind() 方法。这允许在枚举上使用一个不错的 switch() 语句，如果您忘记列出枚举值之一，大多数编译器甚至应该能够警告您。

由于您已经知道在 case: 部分中处理的是什么类，因此您不再需要 dynamic_cast，因此您不需要两次进行相同的检查。

Of course, DO try to keep your switch() or if-else-cascades limited; take a look at why you need to check for the class, and spend a minute or two to consider putting the code into a virtual method instead. I'm not saying to never test for the class type, but I think one should at least make it a concious decision :-)

# arduino - 按钮问题（Arduino）

> ID：11547853
> 
> 赞同：2
> 
> 时间：2012-07-18T18:20:35.940
> 
> 标签：arduino

堆栈溢出！我是一个对 Arduino 编码相当陌生的少年，正在调查一个问题。如果这有所作为，我正在运行 Linux Ubuntu 10.10。我有一个自制的板子，由五个按钮组成，左、右、上、下各一个，一个中心按钮和一个日立 2x16 字符 LCD 屏幕，使用 Arduino Uno 板。我的程序目的是播放我的初始屏幕，从屏幕上的三个开始倒计时，显示一条有用的消息，然后进入程序，它只是打开一个项目列表，一次显示一个，并允许您使用滚动浏览它们向上和向下按钮，然后单击中心按钮退出程序。所以，问题来了：程序的其余部分工作得很好，但是当涉及到菜单时，它正确地显示了第一项，但是这些按钮并没有起到它们的作用。我使用串行监视器进行了检查，按下时按钮的状态没有改变。但这是踢球者。我用电压表检查按钮是否正确使用电源，它们是。他们只是似乎没有以数字方式工作。我检查了我的接线，一切都是正确的。我认为问题可能出在代码中，所以我把它留给你更有经验的人：

```
// include the library code:
#include <LiquidCrystal.h>

int itemNum = 0;

// Declare variables for on and off states, for efficiency!
int on = LOW;
int off = HIGH;

// Declare the buttons' digital pins and states respectively
const int upbtnpin = 8;
const int dwnbtnpin = 9;
const int cntrbtnpin = 10;

int upbtnstate = off;
int dwnbtnstate = off;
int cntrbtnstate = off;

// initialize the library with the numbers of the interface pins
LiquidCrystal lcd(12, 11, 5, 4, 3, 2);

void setup() {

  // Activate Serial Monitor
  Serial.begin(9600);

  // Declare buttons to be INPUT
  pinMode(upbtnpin, INPUT);
  pinMode(dwnbtnpin, INPUT);  
  pinMode(cntrbtnpin, INPUT);

  // Activate Pullups
  digitalWrite(upbtnpin, HIGH);
  digitalWrite(dwnbtnpin, HIGH);
  digitalWrite(cntrbtnpin, HIGH);

  // Begin LCD
  lcd.begin(16, 2);

  // Splash Screen
  lcd.setCursor(0, 0);
  lcd.print(" _@ Paradigm @_");
  lcd.setCursor(0,1);
  lcd.print("<-> Robotics <->");
  delay(3000);
  lcd.clear();

  // Display Message and countdown
  cntrbtnstate = digitalRead(cntrbtnpin);
  lcd.setCursor(0, 0);
  lcd.print("Menu Program 1.0");
  lcd.setCursor(0, 1);

  int i = 3;
  while (i > 0) {

  if (i == 3) {
    lcd.setCursor(0, 1);
    lcd.print("Wait 3 second(s)");
    delay(1000);
    i--;
  }

  else if (i == 2) {
    lcd.setCursor(0, 1);
    lcd.print("Wait 2 second(s)");
    delay(1000);
    i--;
  }

  else if (i == 1) {
    lcd.setCursor(0, 1);
    lcd.print("Wait 1 second(s)");
    delay(1000);
    i--;
  }

 }
   lcd.clear();
   delay(500);
   lcd.setCursor(0, 0);
   lcd.print("Press enter any");
   lcd.setCursor(0, 1);
   lcd.print(" time to exit. ");
   delay(1200);
   lcd.clear();

}

// ...And finally, to the actual program!

void loop() {
  upbtnstate = digitalRead(upbtnpin);
  dwnbtnstate = digitalRead(dwnbtnpin);
  cntrbtnstate = digitalRead(cntrbtnpin);

  while (cntrbtnstate != on) {

    if (upbtnstate == on) {
      delay(250);
      itemNum++;
    }

    else if (dwnbtnstate == on) {
      delay(250);
      itemNum--;
    }

    // OPTIONAL for debugging
    delay(150);
    Serial.print(" ! "); 
    delay(150);
    Serial.print(int(upbtnstate));
    Serial.print(" ");
    delay(150);
    Serial.print(int(dwnbtnstate));
    Serial.print(" ");
    delay(150);
    Serial.print(int(cntrbtnstate));

    String item = "";
    int itemNum = 0;

    switch(itemNum) {

      case 0:
        lcd.setCursor(0, 1);
        lcd.print("END OF LIST");
        break;
      case 1:
        lcd.setCursor(0, 1);
        lcd.print("Water Bottle");
        break;
      case 2:
        lcd.setCursor(0, 1);
        lcd.print("Biker Jacket");
        break;
      case 3:
        lcd.setCursor(0, 1);
        lcd.print(".44 Magnum");
        break;
      case 4:
        lcd.setCursor(0, 1);
        lcd.print(".44 Rounds (x14)");
        break;
      case 5:
        lcd.setCursor(0, 1);
        lcd.print("Machete");
        break;
      case 6:
        lcd.setCursor(0, 1);
        lcd.print("END OF LIST");
        break;
      default:
        lcd.setCursor(0, 0);
        lcd.print("  An error has  ");
        lcd.setCursor(0, 1);
        lcd.print("    occoured    ");
    }

    if (itemNum > 6) {
      itemNum == 6;
    }

    else if (itemNum < 0) {
      itemNum == 0;
    }

   lcd.setCursor(0, 1);
   lcd.print(item);
  }
  lcd.clear();
  lcd.setCursor(0, 1);
  lcd.print("    Goodbye!    ");

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T23:10:50.490

首先，您需要对按钮进行去弹跳。

[http://arduino.cc/it/Tutorial/Debounce](http://arduino.cc/it/Tutorial/Debounce)

其次，在您的 case 语句之前，您将 itemNum 设置为 0。这可能应该移至 setup 部分，否则它将在循环的每次迭代中重置 itemNum，并且您将始终卡在“END OF LIST”上。

同样与 String item = ""; 您在循环的每次迭代中都将字符串消隐，并且它的运行速度比您按下按钮的速度要快。

此外，我没有看到任何代码将字符串项设置为除“”之外的任何内容。由于您在案例语句中打印项目名称，也许您可​​以删除“字符串项目”和所有引用。

最后，您可以将延迟循环部分缩短为：

```
int i = 3;
  while (i > 0) {
    lcd.setCursor(0, 1);
    lcd.print("Wait " + i + " second(s)");
    delay(1000);
    i--;
  } 
```

# azure - 从 IISExpress 切换到完整 IIS 时出现 Azure“角色发现数据不可用”错误

> ID：11547855
> 
> 赞同：1
> 
> 时间：2012-07-18T18:20:43.943
> 
> 标签：azure

我有一个配置有一个 MVC4 Web 角色和两个后端 Web 角色的 azure 解决方案。我一直在使用内部 http 端点在 IISExpress 上对此进行测试。这很好用。我现在想测试 tcp 端点，因为我们可能会在 Azure live 上使用这些端点，所以我更改了部署选项以使用完整的 IIS，因为据我了解，IISExpress 不支持 tcp 绑定。我还没有对端点进行任何更改，也没有更改有关部署的任何其他内容。这会导致角色环境初始化失败，并出现“角色发现数据不可用错误”。我在输出窗口中有这个：

```
\Microsoft.Data.Services.Client\v4.0_4.99.2.0__31bf3856ad364e3 
\Microsoft.Data.Services.Client.dll', Skipped loading symbols. Module is optimized and the   
debugger option 'Just My Code' is enabled.
'w3wp.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\assembly\GAC_32\msshrtmi  
\1.7.0.0__31bf3856ad364e35\msshrtmi.dll'
Microsoft.WindowsAzure.ServiceRuntime Information: 100 : Role environment . INITIALIZING
Microsoft.WindowsAzure.ServiceRuntime Information: 100 : Role environment . INITIALED RETURNED.  
HResult=-2147467259
Microsoft.WindowsAzure.ServiceRuntime Error: 102 : Role environment . FAILED TO INITIALIZE
A first chance exception of type 'System.InvalidOperationException' occurred in    
Microsoft.WindowsAzure.ServiceRuntime.dll 
```

我的所有实例都是可见的，无论是作为 IIS 下的站点还是在计算模拟器中。我在模拟器诊断中没有看到任何异常情况，对于 MVC4 Web 角色来说是这样的，对于 WCF 服务来说也是类似的：

```
[fabric] Role Instance: deployment17(123).Azure.Web.Test.0
[fabric] Role state Unhealthy
[Diagnostics]: UpdateState(Microsoft.WindowsAzure.Diagnostics.DiagnosticMonitorStartupInfo,    
Microsoft.WindowsAzure.Diagnostics.DiagnosticMonitorConfiguration, )
[Diagnostics]: Acquired mutex
[Diagnostics] Information: C:\Users\User\AppData\Local\dftmp\Resources\5911e3b3-15ce-4b36-ab50-
f04dda461e60\directory\DiagnosticStore\Monitor
[Diagnostics] Information: D:\Work\CLIENTS\Test\Solutions\Test\Azure\csx\Debug\roles\Web.Test
\diagnostics\x64\monitor\MonAgentHost.exe -LocalPath "C:\Users\User\AppData\Local\dftmp\Resources
\5911e3b3-15ce-4b36-ab50-f04dda461e60\directory\DiagnosticStore\Monitor" -StaticConfigFile 
"C:\Users\User\AppData\Local\dftmp\Resources\5911e3b3-15ce-4b36-ab50-f04dda461e60\directory
\DiagnosticStore\Monitor\Configuration\mastaticconfig.xml" -ConfigFile "C:\Users\User\AppData
\Local\dftmp\Resources\5911e3b3-15ce-4b36-ab50-f04dda461e60\directory\DiagnosticStore\Monitor
\Configuration\maconfig.xml" -ShutDownEvent WADDM-ShutDown-38fb5936e7b14b058ae4a7c0b516945d 
-InitializedEvent WADM-StartUp-38fb5936e7b14b058ae4a7c0b516945d -parent 15308 -events
[Diagnostics]: Creating config channel server
[MonAgentHost] Output: Agent will exit when WADDM-ShutDown-38fb5936e7b14b058ae4a7c0b516945d is 
signaled.
[MonAgentHost] Output: Will signal WADM-StartUp-38fb5936e7b14b058ae4a7c0b516945d after the agent 
is initialized.
[MonAgentHost] Output: Registered as an event consumer.
[MonAgentHost] Output: Agent will exit when parent process 15308 exits.
[MonAgentHost] Output: Monitoring Agent Started
[Diagnostics]: Starting configuration channel polling
[fabric] Role state Started
[runtime] Role entrypoint . CALLING   OnStart()
[runtime] Role entrypoint . COMPLETED OnStart()
[runtime] Role entrypoint . CALLING   Run() 
```

知道是什么原因造成的吗？是否有进一步的配置步骤可以让 IIS 完全正常工作？

有关我的环境的更多详细信息：

赢 7 x64 | IIS 7.5 | 最新版本的 Azure SDK

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T00:31:47.250

为了理解您的问题，我创建了一个带有 HTTP/80 和 Internal-HTTP (port-auto) 端点的 MVC4 Web 角色和两个带有内部 TCP 端点的 Worker 角色。我在每个工作角色中设置以下内容：

```
var endpoints = RoleEnvironment.Roles["WorkerRole1"].Instances.Select(i => i.InstanceEndpoints["EndPoint11"]).ToArray();

var endpoints = RoleEnvironment.Roles["WorkerRole2"].Instances.Select(i => i.InstanceEndpoints["EndPoint12"]).ToArray(); 
```

以及 MVC4 HomeController 中的以下内容：

```
var endpoints = RoleEnvironment.Roles["MVCWebRole1"].Instances.Select(i => i.InstanceEndpoints["HttpInternal"]).ToArray(); 
```

我可以使用 IISExpress 和 IIS7.5 运行这个场景，没有任何问题。

如果您只是创建一个显示问题的 helloworld VS2010 解决方案（包括您的完整配置），并在此处分享，我当然可以查看并为您找到解决方案。

# asp.net - 数据绑定到视图模型不起作用

> ID：11547868
> 
> 赞同：2
> 
> 时间：2012-07-18T18:21:50.983
> 
> 标签：asp.net, ajax, data-binding, ajaxcontroltoolkit, modalpopupextender

我的 Web 表单上有一个 AJAX 手风琴控件。我在 Accordion Pane 中有一个 Asp.Net 标签。我想将标签的文本属性数据绑定到我正在运行的视图模型。

标签文本属性似乎永远不会与视图模型进行数据绑定？如果我将标签拉到 Accordion Pane 外面而不是里面，它会很好地工作吗？

这有效：

```
<asp:Label runat="server" Text='<%# Model.Program.NameVisible.ToString() %>' /> 
```

这不会：

```
<asp:AccordionPane ID="AccordionPane2" runat="server">
    <Header>
        Advanced Search
    </Header>
    <Content>
        <asp:Panel ID="pnlAdvancedSearch" runat="server">
            <table cellpadding="2" cellspacing="0" width="100%" runat="server">
                <tr>
                    <td align="right">
                        <asp:Label runat="server" Text='<%# Model.Program.NameVisible.ToString() %>' />                                
                    </td>
                </tr>
            </table>
        </asp:Panel>
    </Content>
</asp:AccordionPane> 
```

有什么想法或解决方法吗？

谢谢。

更新：当嵌套在任何 AJAX 控件中时，这显然不起作用。我也遇到了同样的问题，绑定也没有发生在 ModalPopUpExtender 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T12:48:04.957

控件的不会`DataBind`为每个显式定义的自定义控件调用。根据 Jupaol 提供的答案，它将使用模板构建窗格。`Accordion``DataBind``AccordionPane`

在您的示例中，您将需要显式调用`DataBind`要绑定的控件，或者调用将在所有子级上调用数据绑定的父级。因此，在您的示例中，调用`pnlAdvancedSearch.DataBind()`足以绑定您的标签以及搜索面板中的任何其他控件。

`<asp:Label>`但是，我觉得值得补充的是，用一个简单的方法完全替换您的控件似乎也更简单：

```
<%: Model.Program.NameVisible.ToString() %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T23:40:20.647

我刚刚找到了一个方法

首先该`Accordion`控件确实支持数据绑定：

> 手风琴也可以是数据绑定的。只需通过 DataSource 或 DataSourceID 属性指定数据源，然后在 HeaderTemplate 和 ContentTemplate 属性中设置您的数据项。

[来源](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/Accordion/Accordion.aspx)

例子：

### 输出

![在此处输入图像描述](../Images/f61cd7eb4c1b51fa7e0f29c80a7249cb.png)

### ASPX

```
<ajax:Accordion runat="server" ID="ajax22"  RequireOpenedPane="true"
    HeaderCssClass="accordionHeader"
    HeaderSelectedCssClass="accordionHeaderSelected"
    ContentCssClass="accordionContent"
>
    <ContentTemplate>
        Even cooler content
        <br />
        <asp:Label Text='<%# DataBinder.Eval(Container.DataItem, "Something") %>' ID="lbl" runat="server" />
    </ContentTemplate>
    <HeaderTemplate>
        Cool header
        <br />
        <asp:Label Text='<%# DataBinder.Eval(Container.DataItem, "Something") %>' ID="lbl" runat="server" />
    </HeaderTemplate>
</ajax:Accordion> 
```

### ASPX 代码背后

您需要指定`Accordion.DataSource`属性，该属性仅支持`IEnumerable`or `IListSource`，因此您需要按如下方式绑定您的手风琴：

```
this.ajax22.DataSource = new[] { this.Model };

this.DataBind(); 
```

### 模型

```
public class MyModel
{
    public MyModel()
    {
        this.Something = "plop!";
    }

    public string Something { get; set; }
} 
```

* * *

当你绑定你`Accordion`的 时，`AccordionPanes`会创建一些来代表每个绑定的项目。

如果您指定额外的 custom `AccordionPanes`，当您按照上面指定的方式应用绑定时，这些`AccordionPanes`将被忽略并且不会被呈现。

# forms - 如果选择浏览器后退按钮，如何避免表单重新提交？

> ID：11547871
> 
> 赞同：2
> 
> 时间：2012-07-18T18:21:55.747
> 
> 标签：forms, symfony

让我们考虑如下场景：

1.  Symfony2 为实体提供了移除表单
2.  用户选择删除按钮
3.  Symfony2 控制器将删除实体并将用户重定向到确认页面
4.  如果用户选择浏览器后退按钮，他/她将再次看到记录和删除表格
5.  选择删除按钮将引发异常，因为它已被删除

避免返回按钮和重新提交的最佳方法是什么？

此问题的控制器与[此处](https://stackoverflow.com/questions/11547090/how-should-a-controller-with-methodpost-handle-the-request-if-submitted-fo)相同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T18:33:21.617

所有数据更改请求都应该使用`POST`方法来完成 - 或`PUT`，`POST`或者`DELETE`如果您正在以 RESTful 方式进行。在这样的请求之后，重定向到一个`GET`页面。如果用户按下后退按钮，浏览器将显示一条警告，指出应再次发送请求，并且可能导致不需要的结果。如果用户坚持重新发送请求，她应该会得到一个`404`错误页面，因为她正在尝试对不再存在的东西做一些事情。

# html - 将带有 HTML 标签的 CSV 文件解析到 Rails 数据库中？

> ID：11547872
> 
> 赞同：0
> 
> 时间：2012-07-18T18:22:04.713
> 
> 标签：html, ruby-on-rails, ruby-on-rails-3, csv

我有一个 CSV 文件，我正在尝试将其导入 Rails 数据库。我写了一个 rake 任务来为我做解析。

```
task :csv2, [:file] => :environment do |t, args|
  CSV.foreach(args[:file]) do |row|
    issue = {
      "element1" => row[0],
      "element2" => row[3]
    }

  Issue.create(issue)
end 
```

它工作得很好，除了一个问题。有时，CSV 中的字段具有 html 标记和特殊字符（例如 < p> 和 " ;）。当我将每一列转储到数据库中时，Rails 只是将所有内容作为纯文本读取。如何让 Rails 理解 HTML 并进行相应调整？

或者，如果这是一个更好的选择，我会将 HTML 转储到数据库中，然后只使用视图来理解 HTML？

Ruby 1.9.3、Rails 3.2.6、SQLite3 3.6.20。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T21:24:42.063

对rails中的HTML一无所知！这只是简单的字符。

如果您想在视图中显示已在数据库中的内容，则需要在 rails 3 中对其进行清理以防止跨边脚本。

为了做到这一点，请使用`raw`命令或制作您的字符串`html_safe`。

# c - 图邻接表表示

> ID：11547875
> 
> 赞同：0
> 
> 时间：2012-07-18T18:22:29.300
> 
> 标签：c

我正在尝试用 c 编写一个基本的图形程序。但是，会显示一条错误消息，指出`The arrayOfVertices is undeclared`. 我正在使用邻接表表示，代码是

* * *

```
#include <stdio.h>
#include <stdlib.h>

struct graphnode
{
int name;
struct graphnode *next;
};

void addNode(struct graphnode *G[],int startNode, int endNode)
{
// creating a new linked list which is to be added
struct graphnode *tmp;
tmp->name=endNode;
tmp->next=G[startNode];
startNode=tmp;
}

void printGraph(struct graphnode *G[], int numofnodes)
{
int i;
for(i=0;i<numofnodes;i++)
{
    struct graphnode *tmp;
    tmp=G[i];
    printf("%d",i);

    while(tmp!=NULL)
    {
        printf("%d",tmp->name);
        tmp=tmp->next;
    }
}
}

int main(void)
{
int numofnodes;
printf("Enter the number of nodes: ");
scanf("%d",&numofnodes);

// Note that we have created depending upon the size inputted by the user
struct graphnode *arrayOfVertices[numofnodes];
int i;      // for iteration

for(i=0;i<numofnodes;i++)
{
    arrayOfVertices[i]->name=i;
    arrayOfVertices[i]->next=NULL;
}

addNode(arrayOfVertices,0,1);
addNode(aarrayOfVertices,0,2);
printGraph(arrayOfVertices,numofnodes);

return 0;
} 
```

* * *

我的方法是创建一个数组（struct graphnode 类型），其中包含用户输入的尽可能多的节点。该结构包含两个字段，一个包含数字，另一个包含指针。

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T19:43:13.767

```
--- graph.c 2012-07-18 21:33:52.405175347 +0200
+++ graph2.c    2012-07-18 21:40:01.150704287 +0200
@@ -1,3 +1,4 @@
+
 #include <stdio.h>
 #include <stdlib.h>

@@ -11,9 +12,10 @@
 {
 // creating a new linked list which is to be added
 struct graphnode *tmp;
+tmp = malloc (sizeof *tmp);
 tmp->name=endNode;
 tmp->next=G[startNode];
-startNode=tmp;
+G[startNode] = tmp;
 }

 void printGraph(struct graphnode *G[], int numofnodes)
@@ -22,13 +24,11 @@
 for(i=0;i<numofnodes;i++)
 {
     struct graphnode *tmp;
-    tmp=G[i];
     printf("%d",i);

-    while(tmp!=NULL)
+    for(tmp = G[i]; tmp; tmp = tmp->next)
     {
         printf("%d",tmp->name);
-        tmp=tmp->next;
     }
 }
 }
@@ -36,21 +36,24 @@
 int main(void)
 {
 int numofnodes;
+int i;
+struct graphnode **arrayOfVertices;
+
 printf("Enter the number of nodes: ");
 scanf("%d",&numofnodes);

 // Note that we have created depending upon the size inputted by the user
-struct graphnode *arrayOfVertices[numofnodes];
-int i;      // for iteration
+arrayOfVertices = malloc ( numofnodes * sizeof *arrayOfVertices);

 for(i=0;i<numofnodes;i++)
 {
+    arrayOfVertices[i] = malloc (sizeof *arrayOfVertices[i] );
     arrayOfVertices[i]->name=i;
     arrayOfVertices[i]->next=NULL;
 }

 addNode(arrayOfVertices,0,1);
-addNode(aarrayOfVertices,0,2);
+addNode(arrayOfVertices,0,2);
 printGraph(arrayOfVertices,numofnodes);

 return 0; 
```

注意：我只发现了明显的错误。我用动态分配的数组替换了可变大小的数组。

# android - 通过 ADB 向手机发送短信

> ID：11547876
> 
> 赞同：4
> 
> 时间：2012-07-18T18:22:38.203
> 
> 标签：android, sms, adb, galaxy

我想通过 adb 从我的电脑向手机发送测试短信。这可能吗？*我已经看到了自动从*手机发送短信的脚本，但我想模拟短信到手机。我可以通过远程登录通过模拟器来做到这一点。我可以用真正的手机（Galaxy Nexus）做些什么。我没有将开发电话连接到电话服务；我希望这是直接从电脑到手机。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T22:07:30.853

您可以开发一个小型应用程序来接收 Intent 并能够根据接收到的数据发送 SMS。

你需要`<intent-filer>`在你的 Intent 中声明一个自定义`AndroidManifest.xml`并绑定一个`BroadcastReceiver`。因此，每次应用程序发出*此*Intent 时，您都会被宣传。

另一方面，使用命令行向您的虚拟机发送意图：

```
adb shell am start -a broadcast com.messenger.sms.send -e message my_message 
```

在 中`BroadcastReceiver`，可以通过调用来访问额外的数据：

```
intent.getExtras().getString("message"); 
```

您还可以[在此处](http://en.androidwiki.com/wiki/ADB_Shell_Command_Reference)找到有关使用`am`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T23:25:39.197

你有另一部有实际服务的手机吗？

如果您要寻找的只是一个粗略的模拟，我建议您设置一个[Google Voice](http://voice.google.com)帐户以通过 wifi 接收来自 Google Voice 号码的文本，或者只使用[MightyText](http://mightytext.net/)之类的东西来同步来自您的短信/通知使用您停用的开发手机（通过 wifi）激活手机。

我认为 MightyText 可能是两者之间最容易和最快的设置。

# c# - c# 使用什么库来绘制圆度计软件的图形？

> ID：11547877
> 
> 赞同：4
> 
> 时间：2012-07-18T18:22:43.837
> 
> 标签：c#, charts

我在计量实验室工作，我需要用 c# 开发一个用于圆度计设备的软件，我已经开始并且发现了一个问题，我需要该软件来显示来自测量的实时图形正在制作中，因为我需要使用像 Mscharts 或 Zedgraph 这样的库，它刷新信息的速度非常快，并且支持像 Polar 或雷达这样的圆形图，尤其是极坐标图。我在大多数库中看到的问题是它们都缺乏对圆形图的支持并且速度相对较慢。有人推荐我可以使用的图书馆吗？

感谢您的帮助。PS：软件应显示如下图形： ![在此处输入图像描述](../Images/8a41ffcdbcf52ff3d70fbdfe102562bc.png)

![在此处输入图像描述](../Images/e5a5b838398e586bcc7dd25924c1dbff.png) ![最终的软件应该是这样的](../Images/98356d52604a9ce77d1b18942d706e80.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:31:56.250

不确定这是否有帮助。 [Xceed Charts](http://xceed.com/Chart_WinForms_Intro.html)在其高级部分中谈到了制作极坐标图。不幸的是，他们没有提供任何图像，因此您应该与他们的销售人员交谈，看看您是否可以获得评估副本进行评估。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T18:32:32.057

我会用 GDI(+) 渲染它们（在 winforms 应用程序中）。

是的，这是基本的线条图，但对于您提供的示例来说，它已经足够强大了。你需要更新你的高中数学，但它会让你对输出有很多控制，而且速度很快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T18:57:39.087

考虑使用 roguewave IMSL Numerical .NET 库

[IMSL 数值 .NET 库的主页](http://www.roguewave.com/products/imsl-numerical-libraries/.net-library.aspx)

[图表示例，类似于您在上面发布的内容](http://www.roguewave.com/Portals/0/products/imsl-numerical-libraries/net-library/docs/5.0.1/chartpg/polar.html)

尤其是极地情节似乎是您在这里所需要的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-19T14:57:03.747

我很惊讶 ZedGraph 不支持开箱即用的极坐标图，并且在线示例很少。使用[这个 guildline](https://sourceforge.net/p/zedgraph/discussion/392231/thread/d74e10c5/)，我用 C# 中的 ZedGraph 创建了我自己的极坐标图。我希望 WillKraemer 已经解决了他的问题（4 年过去了），并且其他人发现我的实现很有用。

首先是 ZedGraphControl 初始化：

```
 myZg = new ZedGraphControl();
        GraphPane myPane = myZg.GraphPane;

        // Init lists
        RadarPointList dseries1 = new RadarPointList();
        RadarPointList dseries2 = new RadarPointList();

        // Maximize available space in pane
        myPane.Legend.Position = LegendPos.InsideTopLeft;
        myPane.Title.IsVisible = false;
        myPane.XAxis.IsVisible = false;
        myPane.YAxis.IsVisible = false;
        myPane.Border.IsVisible = false;
        myPane.Chart.Border.IsVisible = false;
        myPane.Margin.All = 0;

        // Create concentric grid with 30 degrees spacing & add corresponding labels
        for (double i = 0; i < 36; i+=3.0)
        {
            TextObj gridlbs = new TextObj((i * 10.0).ToString("0°"), (radius + 10.0) * Math.Cos((i * 10.0 * Math.PI) / 180.0), (radius + 10.0) * Math.Sin((i * 10.0 * Math.PI) / 180.0));
            gridlbs.FontSpec.Border.IsVisible = false;
            LineObj gridlns = new LineObj(0, 0, radius * Math.Cos((i * 10.0 * Math.PI) / 180.0), radius * Math.Sin((i * 10.0 * Math.PI) / 180.0));

            myPane.GraphObjList.Add(gridlbs);
            myPane.GraphObjList.Add(gridlns);
        }

        // Draw circular grid, 5 should look okay
        for (double i = (radius / 5.0); i <= radius; i += (radius / 5.0))
        {
            EllipseObj gridcrl = new EllipseObj(-i, i, 2.0 * i, 2.0 * i);
            gridcrl.ZOrder = ZOrder.E_BehindCurves;
            myPane.GraphObjList.Add(gridcrl);
        }

        // Make sure the pane is big enough to fit the labels around the polar plot
        myPane.XAxis.Scale.Min = -(radius + 20.0);
        myPane.XAxis.Scale.Max = (radius + 20.0);
        myPane.YAxis.Scale.Min = -(radius + 20.0);
        myPane.YAxis.Scale.Max = (radius + 20.0);

        _selectedRadius = radius;
        // Keep X & Y axis in the correct ratio to avoid distorting polar circle 
        myZg_Resize((object)"Startup", EventArgs.Empty);
        myZg.Resize += new EventHandler(myZg_Resize);
        myZg.ZoomEvent  += new ZedGraphControl.ZoomEventHandler(myZg_ZoomEvent2);

        // Draw snailly curves (example)
        for (int i = 0; i < 360; i++)
        {
            double r = (double)i/360.0 * radius;
            PointPair pt = new PointPair(PointPair.Missing, r, null);
            dseries1.Add(pt);
            PointPair pt2 = new PointPair(PointPair.Missing, radius - r, null);
            dseries2.Add(pt2);
        }

        // Curves are somple LineItem
        FirstCurve = myPane.AddCurve("Snail", dseries1, Color.Blue, SymbolType.None);
        SecondCurve = myPane.AddCurve("antiSnail", dseries2, Color.Red, SymbolType.None);

        // Rotate the lists to aling with labels
        dseries1.Rotation = 0;
        dseries2.Rotation = 0; 
```

我必须确保在窗体/控件调整大小时图表不会失真，所以我在调整大小事件中添加了这个：

```
 protected void myZg_Resize(object sender, EventArgs e)
    {
        GraphPane pane = myZg.GraphPane;
        myZg.AxisChange();
        bool IsXMin = ( pane.Rect.Width < pane.Rect.Height ) ? true : false;
        if (IsXMin)
        {   
            // Scale based on X (width)
            pane.XAxis.Scale.Max = (radius + 20.0); pane.XAxis.Scale.Min = -(radius + 20.0);
            double xPixPerUnit = (double)pane.Chart.Rect.Width / (pane.XAxis.Scale.Max - pane.XAxis.Scale.Min);
            pane.YAxis.Scale.Max = (double)pane.Chart.Rect.Height / xPixPerUnit / 2.0;
            pane.YAxis.Scale.Min = -pane.YAxis.Scale.Max;
            myZg.AxisChange();
        }
        else
        {
            // Scale based on Y (height)
            pane.YAxis.Scale.Max = (radius + 20.0); pane.YAxis.Scale.Min = -(radius + 20.0);
            double yPixPerUnit = (double)pane.Chart.Rect.Height / (pane.YAxis.Scale.Max - pane.YAxis.Scale.Min);
            pane.XAxis.Scale.Max = (double)pane.Chart.Rect.Width / yPixPerUnit / 2.0;
            pane.XAxis.Scale.Min = -pane.XAxis.Scale.Max;
            myZg.AxisChange();
        }
    } 
```

此外，我决定阻止用户进行任何缩放操作：

```
 protected void myZg_ZoomEvent2(ZedGraphControl sender, ZoomState oldState, ZoomState newState)
    {
        myZg_Resize("zoomevent", EventArgs.Empty);
    } 
```

输出如下图所示：

[![在此处输入图像描述](../Images/2590e6ddd5dce5b12987ba33680866fc.png)](https://i.stack.imgur.com/YnLW7.jpg)

建议随时欢迎！

# javascript - 覆盖 Backbone.Collection.prototype.add

> ID：11547884
> 
> 赞同：5
> 
> 时间：2012-07-18T18:23:06.470
> 
> 标签：javascript, backbone.js

是否可以像这样在主干中全局覆盖 collection.add 方法：

```
Backbone.Collection.prototype._add = Backbone.Collection.prototype.add;
Backbone.Collection.prototype.add = function(models, options) {
    var = newModels = models.items;
    Backbone.Collection.prototype._add(newModels, options);
} 
```

我使用的 api 总是包含集合的实际模型低一级。在下`items`，我发现自己覆盖了`.add`所有集合的方法。我尝试了上面的方法，但似乎没有用。有任何想法吗？

谢谢，

路易斯

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-18T18:28:53.960

尝试以下操作：

```
var Example = Backbone.Collection.extend({
    add: function(models, options) {
        Backbone.Collection.prototype.add.call(this, models.items, options);
    }
}) 
```

然后你可以扩展所有的集合`Example`。

# javascript - jQuery .on() 不触发事件处理程序

> ID：11547888
> 
> 赞同：1
> 
> 时间：2012-07-18T18:23:25.460
> 
> 标签：javascript, jquery, event-handling, jquery-1.7, jquery-on

### 设想

我有一个用户列表，每个列表项中都有一个`<header>`和一个`<div>`包装器-它们是兄弟姐妹：

```
<li class="user">
    <header>
        // ...
    </header>
    <div class="user-wrapper">
        // ...
    </div>
</li> 
```

单击用户时，我正在切换`div`包装器`header`。

### 目前有效的方法：

```
// the handler is called
$('li.user > header').live('click', function () {
    $(this).next('.user-wrapper').toggle();
}); 
```

由于`live()`已被弃用并且*我*使用的是 jQuery 1.7.2，我想使用`on()`.

### 什么不起作用：

```
// Direct style
$('li.user > header').on('click', function () {
    $(this).next('.user-wrapper').toggle();
});

// Delegated style
$('li.user').on('click', 'header', function () {
    $(this).next('.user-wrapper').toggle();
}); 
```

在任何一种`on()`情况下，都不会调用匿名处理函数。

### 问题

首先……为什么会`on()`窒息？

第二......如果/当它工作时，使用委托样式，我仍然可以以与上述相同的方式引用标题的兄弟 div 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T18:24:12.617

### [编辑]

对于委托事件处理，语法**[`.on()`](http://api.jquery.com/on)**是：

```
// 'element' must be static and an ancestor to 'target'.
$(element).on(eventName, target, handlerFunction); 
```

假设您的`li.user`标签在绑定时是静态的，您的上述委托方案应该可以工作。

```
$('li.user').on('click', 'header', function () {
    $(this).next('.user-wrapper').toggle();
}); 
```

如果您在 jsFiddle 中对此进行测试，它会按原样工作。似乎您的`li.user`元素是动态创建的。

如果`li.user`是动态创建的，则使用不同的（静态）父选择器。如果您的列表`ul`始终存在，例如：

```
// HTML
<ul class="user-list">
  <li class="user">
    <header>
        // ...
    </header>
    <div class="user-wrapper">
        // ...
    </div>
  </li>
</ul>

// JavaScript
$('ul.user-list').on('click', 'li.user > header', function() {
  $(this).next('.user-wrapper').toggle();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T21:25:16.387

### 谢谢

非常感谢**@thecodeparadox** - 他的回答最好地解释了这个问题并被标记为这样。我在下面的回答只是解释了列表项如何/为什么变得动态的细节。

### 进一步说明

`Knockout.js`用于模板`li`元素。这本身不是问题，因为`li`元素是在`.on()`绑定发生之前创建的，并且仍然被视为“静态”。

杀手是`ko.computed()`淘汰赛模型的财产。该属性在此处/那里重新加载集合。从重新加载收藏的那一刻起，`li`项目的脚手架就被重做，所有的`.on()`休息。

# sql - 如何在 Oracle SQL 中使这种继承或覆盖关系查询性能良好？

> ID：11547894
> 
> 赞同：2
> 
> 时间：2012-07-18T18:23:50.280
> 
> 标签：sql, oracle, inheritance, overriding

我的系统中有以下（例如简化的）表：

[查看 ER 图](http://postimage.org/image/vaj6i3pu9/)

目的是可以为给定类别指定功能，然后在子类别或产品级别覆盖。

有不同类型的要素具有不同的属性，这些类型由与要素具有 1:1 关系的“扩展”表表示。

例如，假设：

*   所有电脑和灯都有交流适配器（类别）
*   所有计算机都有 CPU（类别）
*   所有笔记本电脑和平板电脑都有电池（子类别）
*   所有 MacBook Pro 都有 HDMI 端口（产品）
*   所有 MacBook Pro 和 iPad 都有 Retina 显示屏（产品）

这将被建模为：

分类：

*   特征容器：ID：1
*   类别：id：1，名称：“计算机”
*   特征容器：ID：2
*   类别：id：2，名称：“光”

子类别：

*   特征容器：ID：3
*   子类别：id：3，category_id：1，名称：“桌面”
*   特征容器：ID：4
*   子类别：id：4，category_id：1，名称：“笔记本电脑”
*   特征容器：ID：5
*   子类别：id：5，category_id：1，名称：“平板电脑”

*   特征容器：ID：6

*   子类别：id：6 category_id：2，名称：“地灯”
*   特征容器：ID：7
*   子类别：id：7，category_id：2，名称：“台灯”

产品：

*   特征容器：ID：7
*   产品：id：7，subcategory_id：4，名称：“Apple MacBook Air”
*   特征容器：ID：8
*   产品：id：8，subcategory_id：4，名称：“Apple MacBook Pro”
*   特征容器：ID：9
*   产品：id：9，subcategory_id：5，名称：“Apple iPad”

应用于类别的功能：

*   特征：id：1，feature_container_id：1
*   has_ac_adapter_feature：id：1，model_number：“ABC”

*   特征：id：2，feature_container_id：2

*   has_ac_adapter_feature：id：2，model_number：“DEF”

*   特征：id：3，feature_container_id：1

*   has_cpu_feature：id：3，model_number：“123”

应用于子类别的功能：

*   特征：id：4，feature_container_id：4
*   has_battery_feature：id：4，battery_type：“锂离子”
*   特征：id：5，feature_container_id：5
*   has_battery_feature：id：5，battery_type：“锂离子”

应用于产品的特点：

*   特征：id：6，feature_container_id：8
*   has_retina_display_feature: id:6
*   特征：id：7，feature_container_id：9
*   has_retina_display_feature: id:7
*   特征：id：8，feature_container_id：8
*   has_hdmi_port_feature: id:8

我不会费心为 Light 层次结构插入数据，但你明白了。请记住，我有：

*   数以百万计的产品
*   数以千计的子类别
*   上百个类别
*   几千个特征，主要定义在子类别上，但也有一些定义在产品和类别上。
*   没有什么可说的，通常在类别级别（交流适配器）定义的功能实际上可能只在产品级别定义。这是一个业务呼叫，由灵活性与可维护性驱动。换句话说，我必须假设可以在任何级别分配任何功能。

我想查询以下内容：

> 给我所有具有 CPU 和 AC 适配器并具有（Retina 显示器或 HDMI 端口）的产品

我应该得到：

*   苹果 MacBook Pro
*   苹果iPad

这是我尝试过的...

我从这样的事情开始：

[http://sqlfiddle.com/#!4/2f6cd/4/0](http://sqlfiddle.com/#!4/2f6cd/4/0)

这试图处理继承问题，但后来我很快意识到，如果我开始过滤这个（产品有这个特性和那个特性），我不能轻易找到哪些产品有多个和/或特性（或者我可以？）。

然后我开始做这样的事情：

```
SELECT prd.id AS prd_id,
   CASE
       WHEN    prd_lvl.ac_ftr = 1
            OR cat_lvl.ac_ftr = 1
            OR scat_lvl.ac_ftr = 1
       THEN
           1
       ELSE
           0
   END
       AS ac_ftr
FROM product prd
   LEFT JOIN (SELECT prd.id AS prd_id,
                     prd.name AS prd_name,
                     NVL2 (ac_ftr.id, 1, 0) AS ac_ftr,
                     NVL2 (cpu_ftr.id, 1, 0) AS cpu_ftr,
                     NVL2 (bat_ftr.id, 1, 0) AS bat_ftr,
                     NVL2 (hdmi_ftr.id, 1, 0) AS hdmi_ftr,
                     NVL2 (ret_ftr.id, 1, 0) AS ret_ftr
                FROM feature_container fc
                     INNER JOIN product prd
                         ON fc.id = prd.id
                     INNER JOIN feature ftr
                         ON fc.id = ftr.feature_container_id
                     LEFT JOIN has_ac_adapter_feature ac_ftr
                         ON ftr.id = ac_ftr.id
                     LEFT JOIN has_cpu_feature cpu_ftr
                         ON ftr.id = cpu_ftr.id
                     LEFT JOIN has_battery_feature bat_ftr
                         ON ftr.id = bat_ftr.id
                     LEFT JOIN has_hdmi_port_feature hdmi_ftr
                         ON ftr.id = hdmi_ftr.id
                     LEFT JOIN has_retina_display_feature ret_ftr
                         ON ftr.id = ret_ftr.id) prd_lvl
       ON prd.id = prd_lvl.prd_id
   LEFT JOIN (      --All Products and subcategory-level-features assigned
              SELECT prd.id AS prd_id,
                     prd.name AS prd_name,
                     NVL2 (ac_ftr.id, 1, 0) AS ac_ftr,
                     NVL2 (cpu_ftr.id, 1, 0) AS cpu_ftr,
                     NVL2 (bat_ftr.id, 1, 0) AS bat_ftr,
                     NVL2 (hdmi_ftr.id, 1, 0) AS hdmi_ftr,
                     NVL2 (ret_ftr.id, 1, 0) AS ret_ftr
                FROM feature_container fc
                     INNER JOIN subcategory scat
                         ON fc.id = scat.id
                     INNER JOIN feature ftr
                         ON fc.id = ftr.feature_container_id
                     INNER JOIN product prd
                         ON scat.id = prd.subcategory_id
                     LEFT JOIN has_ac_adapter_feature ac_ftr
                         ON ftr.id = ac_ftr.id
                     LEFT JOIN has_cpu_feature cpu_ftr
                         ON ftr.id = cpu_ftr.id
                     LEFT JOIN has_battery_feature bat_ftr
                         ON ftr.id = bat_ftr.id
                     LEFT JOIN has_hdmi_port_feature hdmi_ftr
                         ON ftr.id = hdmi_ftr.id
                     LEFT JOIN has_retina_display_feature ret_ftr
                         ON ftr.id = ret_ftr.id) scat_lvl
       ON prd.id = scat_lvl.prd_id
   LEFT JOIN (         --All Products and category-level-features assigned
              SELECT prd.id AS prd_id,
                     prd.name AS prd_name,
                     NVL2 (ac_ftr.id, 1, 0) AS ac_ftr,
                     NVL2 (cpu_ftr.id, 1, 0) AS cpu_ftr,
                     NVL2 (bat_ftr.id, 1, 0) AS bat_ftr,
                     NVL2 (hdmi_ftr.id, 1, 0) AS hdmi_ftr,
                     NVL2 (ret_ftr.id, 1, 0) AS ret_ftr
                FROM feature_container fc
                     INNER JOIN category cat
                         ON fc.id = cat.id
                     INNER JOIN feature ftr
                         ON fc.id = ftr.feature_container_id
                     INNER JOIN subcategory scat
                         ON cat.id = scat.category_id
                     INNER JOIN product prd
                         ON scat.id = prd.subcategory_id
                     LEFT JOIN has_ac_adapter_feature ac_ftr
                         ON ftr.id = ac_ftr.id
                     LEFT JOIN has_cpu_feature cpu_ftr
                         ON ftr.id = cpu_ftr.id
                     LEFT JOIN has_battery_feature bat_ftr
                         ON ftr.id = bat_ftr.id
                     LEFT JOIN has_hdmi_port_feature hdmi_ftr
                         ON ftr.id = hdmi_ftr.id
                     LEFT JOIN has_retina_display_feature ret_ftr
                         ON ftr.id = ret_ftr.id) cat_lvl
       ON prd.id = cat_lvl.prd_id order by prd_id 
```

但这有同样的问题：我不能在同一行得到东西。关于如何解决这个问题的任何建议？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T22:37:27.950

我认为你在这里建立的东西比[EAV 模型](http://en.wikipedia.org/wiki/Entity%E2%80%93attribute%E2%80%93value_model)更糟糕。只是，您没有将所有属性和值存储在一个表中，而是创建了大约一千个*表*作为属性，而实际值很少。尽管这听起来很疯狂，但您可能想要更改为更多的 EAV 模型。查询会更容易，但不会太多。

数据模型的另一个大问题是`feature`表格。据我所知，它没有提供任何价值，需要在每个“实际”功能（如`has_ac_adapter_feature`）和`feature_container`. 您可以将每个“实际”功能表与一个`feature`表连接起来——每个表都需要一个。

你说你有几千个特征。我希望你明白你将不得不不断地构建动态查询，就好像你在一个 SQL 中包含所有“实际”特征表一样它太大了。

我已包含此 SQL 以演示您如何回答以下问题

> 给我所有具有 CPU 和 AC 适配器并具有（Retina 显示器或 HDMI 端口）的产品

*我现在不在 Oracle DB 附近，所以语法可能有点偏差。对不起。*

```
WITH 
    AC_ADAPTER_VIEW AS (
        SELECT feature.feature_container_id, ac_ftr.id
        FROM feature
            LEFT JOIN has_ac_adapter_feature ac_ftr
            ON ac_ftr.id = feature.id
    ),
    CPU_VIEW AS (
        SELECT feature.feature_container_id, cpu_ftr.id
        FROM feature
            LEFT JOIN has_cpu_feature cpu_ftr
            ON cpu_ftr.id = feature.id
    ),
    HDMI_VIEW AS (
        SELECT feature.feature_container_id, hdmi_ftr.id
        FROM feature
            LEFT JOIN has_hdmi_port_feature hdmi_ftr
            ON hdmi_ftr.id = feature.id
    ),
    RETINA_VIEW AS (
        SELECT feature.feature_container_id, ret_ftr.id
        FROM feature
            LEFT JOIN has_retina_display_feature ret_ftr
            ON ret_ftr.id = feature.id
    ),
    FEATURE_CONTAINER_VIEW AS (
        SELECT 
             fc.id as feature_container_id,
             ac_ftr.id AS ac_ftr,
             cpu_ftr.id AS cpu_ftr,
             bat_ftr.id AS bat_ftr,
             hdmi_ftr.id AS hdmi_ftr,
             ret_ftr.id AS ret_ftr
        FROM feature_container
             LEFT JOIN AC_ADAPTER_VIEW ac_ftr
                 ON feature_container.id = ac_ftr.feature_container_id
             LEFT JOIN CPU_VIEW cpu_ftr
                 ON feature_container.id = cpu_ftr.feature_container_id
             LEFT JOIN HDMI_VIEW hdmi_ftr
                 ON feature_container.id = hdmi_ftr.feature_container_id
             LEFT JOIN RETINA_VIEW ret_ftr
                 ON feature_container.id = ret_ftr.feature_container_id
    ),
    PRODUCT_VIEW AS (
        SELECT  product.id, FEATURE_CONTAINER_VIEW.*
        FROM    FEATURE_CONTAINER_VIEW
            INNER JOIN product
            ON product.id = FEATURE_CONTAINER_VIEW.feature_container_id
    ),
    SUBCATEGORY_VIEW AS (
        SELECT  product.id, FEATURE_CONTAINER_VIEW.*
        FROM    FEATURE_CONTAINER_VIEW
            INNER JOIN product
            ON product.subcategory_id = FEATURE_CONTAINER_VIEW.feature_container_id
    ), 
    CATEGORY_VIEW AS (
        SELECT  product.id, FEATURE_CONTAINER_VIEW.*
        FROM    FEATURE_CONTAINER_VIEW
            INNER JOIN subcategory
            ON subcategory.category_id = FEATURE_CONTAINER_VIEW.feature_container_id
            INNER JOIN product
            ON subcategory.id = product.subcategory_id
    )
SELECT
    product.*
FROM    
    product
    INNER JOIN PRODUCT_VIEW
        ON PRODUCT_VIEW.id = product.id
    INNER JOIN SUBCATEGORY_VIEW
        ON SUBCATEGORY_VIEW.id = product.id
    INNER JOIN CATEGORY_VIEW
        ON CATEGORY_VIEW.id = product.id
WHERE 
    --Check for CPU
    COALESCE( PRODUCT_VIEW.cpu_ftr, SUBCATEGORY_VIEW.cpu_ftr, CATEGORY_VIEW.cpu_ftr) is not null
    --Check for AC
    AND COALESCE( PRODUCT_VIEW.ac_ftr, SUBCATEGORY_VIEW.ac_ftr, CATEGORY_VIEW.ac_ftr) is not null
    --OR condition
    AND (
        --Check for HDMI
        COALESCE( PRODUCT_VIEW.hdmi_ftr, SUBCATEGORY_VIEW.hdmi_ftr, CATEGORY_VIEW.hdmi_ftr) is not null
        --Check for HDMI
        OR COALESCE( PRODUCT_VIEW.ret_ftr, SUBCATEGORY_VIEW.ret_ftr, CATEGORY_VIEW.ret_ftr) is not null
    ) 
```

# php - file_exists 对我不起作用

> ID：11547897
> 
> 赞同：0
> 
> 时间：2012-07-18T18:23:53.837
> 
> 标签：php

我正在使用以下代码，但它对我不起作用。

```
$img1=$info['available_now']; //http://www.jjbsports.com/pws/client/images/catalogue/products/65014201/zoom/65014201_white.jpg

$filename = $img1;

if (file_exists($filename)) {
      echo "The file $filename exists";
       echo '<img src="'; echo $id1; echo '"width="50" height="50"/>'."<br>";
} else {
      echo "The file $filename does not exist";
       echo '<img src="'; echo $id1; echo '"width="50" height="50"/>'."<br>";
} 
```

请帮助我问候，

**找到代码**

```
 $headers = get_headers($filename, 1); 
 echo $filename."=".$headers['Content-Length']."<br>"; // size in bytes 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T18:28:00.387

PHP [HTTP 包装器](http://us.php.net/manual/en/wrappers.http.php)不支持，因此当提供 HTTP URL 时`stat()`，类似的函数将永远无法工作。`file_exists()`

如果文件位于本地服务器上，请使用相对于文件系统的文件路径。否则你不能使用`file_exists()`.

# eclipse - 在我的 Eclipse rcp 应用程序中禁用了“重置透视...”菜单

> ID：11547898
> 
> 赞同：0
> 
> 时间：2012-07-18T18:23:54.427
> 
> 标签：eclipse, rcp, perspective

我有一个非常简单的基于 eclipse 3.6 的 rcp 应用程序。我有一个现有的“Windows”菜单，我试图通过创建一个**commandId**值为**org.eclipse.ui.window.resetPerspective**的命令条目来添加“Reset Perspective...”子菜单。子菜单看起来很好，但它被禁用了。有人可以帮我启用它吗？感谢您的时间！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T11:57:45.560

尝试在 ApplicationActionBarAdvisor 类中使用编程解决方案，如下所示：

```
public class ApplicationActionBarAdvisor extends ActionBarAdvisor {

    private IWorkbenchAction resetPerspectiveAction;

    @Override
    protected void makeActions(IWorkbenchWindow window) { 
        // ...
        // create and register the actions
        resetPerspectiveAction = ActionFactory.RESET_PERSPECTIVE.create(window);
        register(resetPerspectiveAction);
        // ...
    }

    @Override
    protected void fillMenuBar(IMenuManager menuBar) {
        // ...
        // create and fill the window menu
        MenuManager windowMenu = new MenuManager("&Window", WorkbenchActionConstants.M_WINDOW);
        menuBar.add(windowMenu);
        windowMenu.add(resetPerspectiveAction);
        // ...
     }
} 
```

# jquery - Wordpress 上的 jQuery 版本

> ID：11547899
> 
> 赞同：-1
> 
> 时间：2012-07-18T18:23:56.613
> 
> 标签：jquery, wordpress

我在 Wordpress 主题上遇到问题

我包括 Nivo Slider (jQuery) 和 jquery flexylisder。

现在我的插件有问题 - >“Ether Content Builder”

Nivo Slider 无法正常工作...

标题

```
<?php wp_head(); ?>   
 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js" type="text/javascript"></script>
<script src="wp-content/themes/psr_v1/js/jquery.flexislider.js" type="text/javascript"></script> 
```

那是在body标签之前

```
 <script type="text/javascript" src="wp-content/themes/psr_v1/js/jquery.nivo.slider.js"></script>

 <script type="text/javascript">
$(window).load(function() {
    $('#slidder').nivoSlider();
});
</script> 
```

我怎样才能使一切正常？我测试了 jquery.noConflict() 但它不起作用..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T19:14:17.543

您将 NivoSlider 附加到实际称为“滑块”的 div id 还是拼写错误？

如果不是这样，请尝试使用以下内容（欢呼 Jezen）

```
<script type="text/javascript">
    (function ($) {
        $('#slidder').nivoSlider();
    }(jQuery));
</script> 
```

*   编辑

首先，由于某种原因，您正在加载一个非常旧的 jQuery 版本，即使您确实启动了它，也会导致各种问题。

共。Wordpress 附带 jQuery，您只需将其加入队列即可。在您的 functions.php 中，将其排入队列，然后将依赖于它的脚本排入队列；

```
if ( !is_admin() ) {
   wp_enqueue_script('jquery');
   wp_enqueue_script( 'jquery.nivoslider', get_bloginfo('template_directory').'/js/jquery.nivo.slider.js', array('jquery'));
   wp_enqueue_script( 'jquery.flexislider', get_bloginfo('template_directory').'/js/jquery.flexislider.js', array('jquery'));       
} 
```

*   再次编辑。

是的，我已经开始工作并查看了您的消息来源。你已经完成了我所说的并将你的脚本排入functions.php - 它们现在被加载到头部proplery中。但是，您需要删除页脚中的内容。目前它看起来像;

```
 <script type="text/javascript" src="wp-content/themes/psr_v1/js/jquery-1.7.1.min.js"></script>  

 <script type="text/javascript">
$(window).load(function() {
    $('#slidder').nivoSlider();
});
</script>

<script src="wp-content/themes/psr_v1/js/jquery.nivo.slider.js" type="text/javascript"></script>
<script src="wp-content/themes/psr_v1/js/jquery.flexislider.js" type="text/javascript"></script> 
```

它需要看起来像这样（由 Jezen 提供）；

```
<script type="text/javascript">
    (function ($) {
        $('#slidder').nivoSlider();
    }(jQuery));
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T08:13:08.053

1 - 删除这一行：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js" type="text/javascript"></script> 
```

2 - 你的脚本应该在你的结束正文标签之前，所以把它们放在你的`footer.php`：

```
<script type="text/javascript" src="wp-content/themes/psr_v1/js/jquery.nivo.slider.js"></script>
<script type="text/javascript">
    (function ($) {
        $('#slidder').nivoSlider();
    }(jQuery));
</script>
</body>
</html> 
```

# javascript - 获取文件对象的 Base 64 编码

> ID：11547906
> 
> 赞同：1
> 
> 时间：2012-07-18T18:24:17.517
> 
> 标签：javascript, encoding, base64

过去几天我一直在执行一项任务，导致我绊倒的一小部分是我需要获取本地二进制文件的 base64 编码。我可以准备好文件（如下），但我不确定是否有任何方法等来获取文件的 base64 编码，因为我“拥有”文件。

有什么想法吗？说到这个，我完全是个菜鸟：/我看过一些例子，但没有对我有用，而且它们似乎过于复杂。

限制：必须是客户端！必须与 IE 8 兼容。

```
<!doctype html> 
```

```
<script type="text/javascript">
function getsize()
{
    var myObject, afile, size;
    myObject = new ActiveXObject("Scripting.FileSystemObject");
    afile = myObject.GetFile("C:\\test.txt)
    size = afile.Size;
    alert("The size of the file is:" + size);
}

</script>
Get the size for the file "test.txt"
<form name="myForm">
<input type="Button" value="Get Size" onClick='getsize()'>
</form>
</body>
</html> 
```

# java - 使用 Java Generic SOAPClient (SAAJ) 时抛出异常？

> ID：11547908
> 
> 赞同：3
> 
> 时间：2012-07-18T18:24:34.853
> 
> 标签：java, web-services, soap, wsdl, saaj

我正在尝试使用以下 SOAPClient for Java（我从以下教程[http://users.skynet.be/pascalbotte/rcx-ws-doc/saajpost.htm](http://users.skynet.be/pascalbotte/rcx-ws-doc/saajpost.htm)获得的详细信息）。

但是，它似乎引发了异常。

这是我的代码：

```
javax.xml.soap.SOAPMessage msg;
MessageFactory mf = MessageFactory.newInstance();
msg = mf.createMessage();
SOAPPart part = msg.getSOAPPart();
StreamSource source = new StreamSource(new File("samples/input1.xml”));
part.setContent(source);
msg.saveChanges();

String endpoint = "http://ws1.parasoft.com/glue/calculator";

SOAPConnectionFactory scf = SOAPConnectionFactory.newInstance();
SOAPConnection conn = scf.createConnection();
javax.xml.soap.SOAPMessage response = conn.call(msg, endpoint);
TransformerFactory tff = TransformerFactory.newInstance();
Transformer tf = tff.newTransformer();
Source sc = response.getSOAPPart().getContent();
ByteArrayOutputStream ostream = new ByteArrayOutputStream(); 
StreamResult result = new StreamResult(ostream);
tf.transform(sc, result);
conn.close();

System.out.println(new String(ostream.toByteArray(), "UTF-8”)); 
```

在此示例中，我们假设`samples/input1.xml`拥有以下内容：

```
<s11:Envelope xmlns:s11="http://schemas.xmlsoap.org/soap/envelope/">
   <s11:Body>
      <ns1:add xmlns:ns1="http://www.parasoft.com/wsdl/calculator/">
         <ns1:x>248</ns1:x>
         <ns1:y>365</ns1:y>
      </ns1:add>
   </s11:Body>
</s11:Envelope> 
```

我正在尝试使用的示例网络服务可以在这里找到： [http ://www.service-repository.com/client/operations](http://www.service-repository.com/client/operations)

运行上述 Java 代码（使用 SOAPClient 库）时，会引发以下异常：

```
Jul 19, 2012 3:50:11 AM com.sun.xml.internal.messaging.saaj.client.p2p.HttpSOAPConnection post
SEVERE: SAAJ0008: Bad Response; cannot find /calculator
Exception in thread "main" com.sun.xml.internal.messaging.saaj.SOAPExceptionImpl: com.sun.xml.internal.messaging.saaj.SOAPExceptionImpl: Bad response: (404cannot find /calculator
    at com.sun.xml.internal.messaging.saaj.client.p2p.HttpSOAPConnection.call(HttpSOAPConnection.java:148)
    at corebus.test.deprecated.TestMain.main(TestMain.java:1870)
Caused by: com.sun.xml.internal.messaging.saaj.SOAPExceptionImpl: Bad response: (404cannot find /calculator
    at com.sun.xml.internal.messaging.saaj.client.p2p.HttpSOAPConnection.post(HttpSOAPConnection.java:258)
    at com.sun.xml.internal.messaging.saaj.client.p2p.HttpSOAPConnection.call(HttpSOAPConnection.java:144)
    ... 1 more

CAUSE:

com.sun.xml.internal.messaging.saaj.SOAPExceptionImpl: Bad response: (404cannot find /calculator
    at com.sun.xml.internal.messaging.saaj.client.p2p.HttpSOAPConnection.post(HttpSOAPConnection.java:258)
    at com.sun.xml.internal.messaging.saaj.client.p2p.HttpSOAPConnection.call(HttpSOAPConnection.java:144) 
```

使用此网站，服务似乎已启动并运行，并且运行良好。

我什至通过执行一个简单的 cURL 请求验证了服务端点是活动的，这令人惊讶地产生了正确的输出。

```
curl -H "Content-Type: text/xml; charset=utf-8" -H "SOAPAction:http://www.parasoft.com/wsdl/calculator/" -d@soap-request.xml http://ws1.parasoft.com/glue/calculator 
```

产生的输出是：

```
<soap:Envelope xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xmlns:xsd='http://www.w3.org/2001/XMLSchema' xmlns:soap='http://schemas.xmlsoap.org/soap/envelope/‘&gt;
    <soap:Body>
        <n:addResponse xmlns:n='http://www.parasoft.com/wsdl/calculator/‘&gt;
            <n:Result xsi:type='xsd:float'>613.0</n:Result>
        </n:addResponse>
    </soap:Body>
</soap:Envelope> 
```

所以，我的问题是：首先，Java 代码有什么问题？它怎么能被修复？或者，还有其他更好/更可靠的通用 SOAPClient 库可以推荐吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T18:55:21.363

通过在浏览器的 url 中附加 ?wsdl 来查看 WSDL，或者以某种方式获取 WSDL。检查 WSDl 是否指定它是文档样式还是 PRC 样式，并在此基础上准备输入 xml。

如果可能，请使用非常方便的 SOAP UI 工具。

# c# - 调试来自 .net Web 服务的错 误消息

> ID：11547911
> 
> 赞同：2
> 
> 时间：2012-07-18T18:24:49.640
> 
> 标签：c#, .net, web-services

我有一个托管在用`c#`. 它与一些公开的 Web 方法开箱即用。当我在本地使用这些网络方法时，它们运行良好。一旦我的客户尝试使用`Soap Client`(soapclient.com) 或之类的测试应用程序点击其中任何一个`SoapUI`，他们就会收到从服务器返回的以下错误消息：

```
We are sorry, the requested operation failed. The server returned the following messages

Error Message: The extern component has failed in processing your requests. 
```

我尝试用谷歌搜索错误，但没有找到任何有用的解决方案......所以我在这里有点茫然。有人对如何解决这个问题有任何意见吗？

# php - 供用户在网站上使用的插件-PHP

> ID：11547912
> 
> 赞同：0
> 
> 时间：2012-07-18T18:24:49.843
> 
> 标签：php, javascript, facebook, codeigniter

我正在使用 CodeIgniter 制作网站。

我想为用户提供插件/Iframe/横幅等，以便他们可以通过复制粘贴代码来使用它。

由于限制和动态数据，我不想制作图像横幅。

就像下面的 facebook 一样。与图像横幅不同，它可以通过不同的链接点击。

每次刷新页面时（几乎是实时的），Box 中的数据都会发生变化。

该框应该是动态的，即对于具有 ID1、ID2 的用户来说是不同的。

使用 iframe 是一个选项，例如 example.php?banner=ID1

但我不希望用户在其中编辑链接/文本。

我应该如何进行？

![Fb 社交插件](../Images/73c9fb72603f71cd0468dc44eb7e0e8f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T18:45:33.030

这很简单。

[ 1 ] 开始构建您的动态应用程序。您可以根据 USERID 或 USERNAME 为每个用户提供唯一的 URL，例如

[http://www.stackovrflow.com/users/content/{user_id} 或 {用户名}](http://www.stackovrflow.com/users/content/%7Buser_id%7D%20OR%20%7Busername%7D)

[ 2 ] 创建 JavaScript API / Restful API。当访问者点击链接时，用 JS 控制点击。我的意思是打开像 Facebook 这样的新窗口或重定向到您的网站。页面在动态 URL 上方加载。请参阅有关新窗口的详细信息。

[如何在新窗口中打开链接？](https://stackoverflow.com/questions/2827637/jquery-open-link-in-new-window)

[ 3 ] 这很可能使用 IFrame 也提供几行代码。但这不是首选。使用/提供 API 总是最好的。

# java - 为什么运行时异常是未经检查的异常？

> ID：11547914
> 
> 赞同：21
> 
> 时间：2012-07-18T18:24:57.597
> 
> 标签：java, exception, runtimeexception

通常，如果任何类 extends `Exception`，它就会成为检查异常。`Runtime exception`还扩展了异常。那怎么样`unchecked exception`？

他们是否有针对这种特殊情况的自定义检查**编译器？**

**编辑：** 我对***checked v/s unchecked exception***及其优点和cos等有正确的想法。我不接受它们之间的差异。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-18T18:48:22.950

它在规范中明确，[第 11.1.1 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-11.html#jls-11.1.1)：

> `RuntimeException`它的所有子类统称为*运行时异常类*。
> 
> 未经检查的*异常类*是运行时异常类和错误类。
> 
> 已*检查异常类*是除未检查异常类之外的所有异常类。也就是说，检查的异常类都是 Throwable 的子类，除了 RuntimeException 及其子类和 Error 及其子类。

所以是的，编译器肯定知道`RuntimeException`.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-18T18:27:40.433

是的。Any`Throwable`是一个检查异常，除了`Error`, `RuntimeException`, 和（直接或间接）子类。

但是，这些是由*编译器*而不是 JVM 检查的；检查的异常是编译时功能，而不是运行时功能。（*更新：*我现在看到您已经编辑了您的问题以指定“编译器”而不是“JVM”。☺）

* * *

再详细一点。. . 好像没有任何类型的“检查异常”接口。逻辑只是硬编码：“任何异常类都是检查异常，除非它是`RuntimeException`or的子类型`Error`”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T18:29:19.450

这是一个有用的链接：[http ://www.javapractices.com/topic/TopicAction.do?Id=129](http://www.javapractices.com/topic/TopicAction.do?Id=129)

它解释了未选中和选中之间的区别，并给出了一些示例。

“这有点令人困惑，但也要注意 RuntimeException（未选中）本身就是 Exception（选中）的子类。”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-25T12:54:24.930

根据[11.1.1。](http://docs.oracle.com/javase/specs/jls/se7/html/jls-11.html#jls-11.1.1)例外的种类

异常由 Throwable 类（Object 的直接子类）或其子类之一的实例表示。

Throwable 及其所有子类统称为异常类。

请注意，Throwable 的子类不能是通用的（第 8.1.2 节）。

Exception 和 Error 类是 Throwable 的直接子类。

异常是普通程序可能希望从中恢复的所有异常的超类。

错误是普通程序通常不希望从中恢复的所有异常的超类。

错误及其所有子类统称为错误类。

Error 类是 Throwable 的一个单独子类，与类层次结构中的 Exception 不同，它允许程序使用习语“} catch (Exception e) {”（第 11.2.3 节）来捕获所有可能从中恢复的异常没有捕获通常无法恢复的错误。

RuntimeException 类是 Exception 的直接子类。RuntimeException 是所有异常的超类，在表达式评估期间可能由于多种原因引发，但仍可能从中恢复。

**RuntimeException 及其所有子类统称为运行时异常类。**

**未经检查的异常类是运行时异常类和错误类。**

已检查异常类是除未检查异常类之外的所有异常类。也就是说，检查的异常类都是 Throwable 的子类，除了 RuntimeException 及其子类和 Error 及其子类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-12T09:48:56.003

运行时异常称为未经检查的异常，因为它在编译时未检查。除了`ERROR`和`RuntimeException`检查异常之外的所有东西都可以抛出。在程序中添加运行时异常会降低程序的清晰度。

```
class Divide {
    public static void main(String [] args){
        int a = 10;
        int b = 0;
        int c = a/b; // This will throw run time exception due to unexpected value of b.
    }
} 
```

请阅读此链接[The Java™ Tutorials - Unchecked Exceptions — The Controversy](https://docs.oracle.com/javase/tutorial/essential/exceptions/runtime.html)

# iphone - 检查字符串是否包含主题标签，然后更改主题标签颜色

> ID：11547919
> 
> 赞同：2
> 
> 时间：2012-07-18T18:25:05.833
> 
> 标签：iphone, string, parsing, ios5, twitter

我正在开发一个从 twitter 获取推文的 iPhone 应用程序。我正在通过 Json 执行此操作，并且一切正常。我正在搜索每条推文，看看它是否包含主题标签，然后更改该特定标签的颜色。

例如：“这是一条推文#MYTWEET”

所以我希望“这是一条推文”是一种颜色，而“#MYTWEET”是一种单独的颜色。我知道如何搜索主题标签，但我似乎无法弄清楚如何仅更改以下文本。

编辑：

也没有特定的主题标签，因此它需要能够更改出现的任何主题标签的颜色。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-18T19:54:43.670

```
NSString *tweet = @"This is a tweet #MYTWEET";

NSArray *words = [tweet componentsSeparatedByString:@" "];

NSMutableAttributedString *attrString = [[NSMutableAttributedString alloc] initWithString:tweet];

for (NSString *word in words) {

    if ([word hasPrefix:@"#"]) {

        // Colour your 'word' here
        NSRange matchRange = [tweet rangeOfString:word];

        [attrString addAttribute:kCTForegroundColorAttributeName 
                           value:[UIColor redColor] 
                           range:matchRange]; 
        // Remember to import CoreText framework (the constant is defined there)

    }
}

//Display your attributed string ... 
```

注意：如果您想知道如何显示字符串，这里有一个不错的开源项目：[https ://github.com/AliSoftware/OHAttributedLabel](https://github.com/AliSoftware/OHAttributedLabel)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T18:29:06.567

```
 NSRange hashLocation = [tweetString rangeOfString:@"#MYTWEET"];
 if  (hashLocation.location == NSNotFound) 
      {
          //do coloring stuff here
      } 
```

编辑：我认为您只想为子字符串着色。这在当前版本的 iOS 中是不可能的，但您可以通过为每种颜色创建一个标签并将它们彼此相邻放置，使其读起来像单行文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-04T17:26:36.327

如果你使用 an`UILabel`来显示字符串，你可以使用**[ActiveLabel.swift](https://github.com/optonaut/ActiveLabel.swift)**，它是一个**支持 Hashtags (#)、Mentions (@) 和 URLs (http://)**用 Swift 编写的`UILabel`替代品。

 **[![在此处输入图像描述](../Images/6f05aab6af93db384e6116fae31f0db9.png)](https://i.stack.imgur.com/AeW2K.gif)

更改用户名、主题标签和链接的颜色就这么简单：

```
label.textColor = .blackColor()
label.hashtagColor = .blueColor()
label.mentionColor = .greenColor()
label.URLColor = .redColor() 
```

*免责声明：我是图书馆的作者。***

# ruby-on-rails - 不断得到Authentication+failed.+API+credentials+are+incorrect

> ID：11547920
> 
> 赞同：3
> 
> 时间：2012-07-18T18:25:09.483
> 
> 标签：ruby-on-rails, paypal

我正在尝试创建简单的 PayPal Pay API 操作，当我从控制台运行此代码时，它给了我响应，即创建了付款。

现在，当我试图从我的控制器运行它时，它给了我

```
 Authentication+failed.+API+credentials+are+incorrect. 
```

这是我的控制器：

```
 def pay
require 'httpclient'
require 'xmlsimple'
clnt = HTTPClient.new
credentials = {
    'USER' => 'payer_1342623102_biz_api1.gmail.com',
   'PWD' => '1342623141',
   'SIGNATURE' => 'Ay2zwWYEoiRoHTTVv365EK8U1lNzAESedJw09MPnj0SEIENMKd6jvnKL '
 }

header =  {"X-PAYPAL-SECURITY-USERID" => "payer_1342623102_biz_api1.gmail.com",
               "X-PAYPAL-SECURITY-PASSWORD" => "1342623141",
               "X-PAYPAL-SECURITY-SIGNATURE" => "Ay2zwWYEoiRoHTTVv365EK8U1lNzAESedJw09MPnj0SEIENMKd6jvnKL ",
               "X-PAYPAL-REQUEST-DATA-FORMAT" => "NV",
               "X-PAYPAL-RESPONSE-DATA-FORMAT" => "XML",
               "X-PAYPAL-APPLICATION-ID" =>  "APP-80W284485P519543T"
                }
data = {"actionType" => "PAY",
           "receiverList.receiver(0).email"=> "denmed_1342605975_biz@gmail.com",
           "receiverList.receiver(0).amount" => "10",
           "currencyCode" => "USD",
           "cancelUrl" => "http://127.0.0.1:3000",
           "returnUrl" => "http://127.0.0.1:3000",
           "requestEnvelope.errorLanguage" => "en_US"}
uri = "https://svcs.sandbox.paypal.com/AdaptivePayments/Pay"
res = clnt.post(uri, data, header)
@xml = XmlSimple.xml_in(res.content)
payKey = @xml["payKey"].to_s()
payKey = payKey.tr("[]", "")
payKey = payKey[1..20]
redirect_to "https://svcs.sandbox.paypal.com/AdaptivePayments/Pay?cmd=_ap-payment&paykey=#{payKey}"
end 
```

一切都顺利吗 ？谁能提出我的请求失败的原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T06:15:22.430

一位好人发现了我的错误。我将用户重定向到错误的网址。

这一行：

```
redirect_to "https://svcs.sandbox.paypal.com/AdaptivePayments/Pay?cmd=_ap-payment&paykey=#{payKey}" 
```

应该：

```
redirect_to "https://sandbox.paypal.com/webscr?cmd=_ap-payment&paykey=#{paykey}" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-05T22:43:44.240

我得到了同样的错误：我意识到我忘了包括

```
sandbox_email_address: xxx@example.com 
```

在我的 yml 文件中

# ruby-on-rails - FasterCSV - 而不是获取内容文件获取文件的路径

> ID：11547923
> 
> 赞同：0
> 
> 时间：2012-07-18T18:25:18.550
> 
> 标签：ruby-on-rails, ruby, csv, fastercsv

```
 def csv_parsing
    require 'csv'
    csv_file_path = File.join(File.dirname(__FILE__), "csv_data.csv")
    CSV.parse(csv_file_path) do |line|
      puts line[0]
    end
  end 
```

这是一个简单的例子，我如何尝试解析 CSV 文件。上面的动作放在控制器中，文件在项目的根目录下。

但是，我没有从 CSV 文件中获取数据，而是获取了文件的路径，例如：

```
/Users/my_mane/ruby_folder/my_project/app/controllers/csv_data.csv 
```

注意：该文件包含真实数据。

为什么只打印文件路径而不是自己的数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T18:31:45.750

因为 CSV#parse 实际上解析的是您传递给它的字符串，而不是来自该字符串包含的位置的文件。您需要的是 CSV#read：[http ://ruby-doc.org/stdlib-1.9.2/libdoc/csv/rdoc/CSV.html#method-c-read](http://ruby-doc.org/stdlib-1.9.2/libdoc/csv/rdoc/CSV.html#method-c-read)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T18:45:50.503

如果您使用文件路径而不是字符串中的数据，则可以使用以下命令逐行读取此文件：

```
CSV.foreach(csv_file_path) do |line|
  ...
end 
```

# entity-framework - 在我的 EF 项目中使用 System.Transactions 时应该考虑哪些事项？

> ID：11547925
> 
> 赞同：1
> 
> 时间：2012-07-18T18:25:22.387
> 
> 标签：entity-framework, transactions, isolation-level

# 背景

我有一个 MVC 应用程序和一个 Windows 服务，它们访问使用 EntityFramework 的相同数据访问库。Windows 服务监视几个表上的某些活动并执行一些计算。

我们正在对数百个数据库使用 DAL 项目，在运行时为上下文生成连接字符串。

我们有许多函数（存储过程和调用 EF 实体的 .NET 方法），由于我们使用的数据范围非常大，因此可能会相互阻塞。

# 问题

Windows 服务不是那么重要，它不能等待。如果必须阻止某些东西，Windows 服务可以。早些时候，我发现了一些 SO 问题，这些问题表明这`System.Transactions`是将事务隔离级别设置为 READ UNCOMMITTED 以最小化锁的方法。

我试过这个，我可能会误解发生了什么，所以我需要澄清一下。

windows服务中的方法结构如下：

```
private bool _stopMe = false;

public void Update()
{
    EntContext context = new EntContext();
    do
    {
        var transactionOptions = new System.Transactions.TransactionOptions();
        transactionOptions.IsolationLevel = System.Transactions.IsolationLevel.ReadUncommitted;
        using (var transactionScope = new System.Transactions.TransactionScope( System.Transactions.TransactionScopeOption.Required, transactionOptions))
        {
            List<Ent1> myEnts = (from e....Complicated query here).ToList();
            SomeCalculations(myEnts);
            List<Ent2> myOtherEnts = (from e... Complicated query using entities from previous query here).ToList();
            MakeSomeChanges(myOtherEnts);
            context.SaveChanges();
        }
        Thread.Sleep(5000);  //wait 5 seconds before allow do block to continue
    }while (! _stopMe)
} 
```

当我执行第二个查询时，会引发异常：

```
The underlying provider failed on Open.
    Network access for Distributed Transaction Manager (MSDTC) has been disabled. Please
    enable DTC for network access in the security configuration for MSDTC using the
    Component Services Administrative tool.
        The transaction manager has disabled its support for remote/network
        transactions. (Exception from HRESULT: 0x8004D024) 
```

我可以假设我不应该在那个 using 块中调用多个查询？第一个查询返回得很好。这是一次在一个数据库上执行的（实际上其他实例正在不同的线程中运行，并且该线程中的任何内容都不会触及其他实例）。

我的问题是，这是应该如何使用它还是我应该知道的更多？

注意：这是一个监控功能，所以必须反复运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T18:25:33.593

在您的代码中，您使用的是事务范围。看起来第一个查询使用了轻量级数据库事务。当第二个查询到来时，事务范围将事务升级为分布式事务。

分布式事务使用 MSDTC。

这是错误出现的地方，默认情况下未启用 MSDTC。即使启用并启动它，也需要将其配置为允许远程客户端创建分布式事务。

# mysql - DbVisualizer 在 Mac OS X 10.7 上找不到数据库

> ID：11547926
> 
> 赞同：0
> 
> 时间：2012-07-18T18:25:23.197
> 
> 标签：mysql, sql, macos, dbvisualizer

我正在尝试连接到 SQL 数据库，但遇到了很多麻烦。任何和所有的帮助将不胜感激。

如下所示，sql文件的位置是/Users/agoodkind/mockup/test-database.sql：
![查找器窗口](../Images/aa13410bbad6d0beb4ef6a3f2c733c0a.png)

在 DbVisualizer 中，我有以下设置：
![Dbvisualizer 屏幕截图](../Images/c93f63cf1fbb34353a547054cad3996b.png)

整个连接消息说：

> 建立连接时出错：
> 
> 长消息：未知数据库'/users/agoodkind/mockup/test-database.sql'
> 
> 详细信息：
> 类型：com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException
> 错误代码：1049
> SQL 状态：42000

如果有人能指出我正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T20:21:16.917

**test-database.sql**不是一个实际的数据库，它很可能是用于构建数据库的 SQL 语句的文本文件。

# multithreading - Delphi如何使用线程

> ID：11547928
> 
> 赞同：2
> 
> 时间：2012-07-18T18:25:30.170
> 
> 标签：multithreading, delphi, listbox

我为这个应用程序工作了几天。表格冻结，直到整个事务。如何使用胎面？

```
procedure TForm1.ListBox1Click(Sender: TObject);
var
  I: Integer;
  S: String;

  begin

   I := Listbox1.ItemIndex;

    if I <> -1 then
    begin
    S := Listbox1.Items[I];
    IdHTTP1.ProxyParams.ProxyServer := Fetch(S, ':');
    IdHTTP1.ProxyParams.ProxyPort := StrToInt(S);

    try

    IdHTTP1.ReadTimeout:=strtoint(form1.ComboBox1.Text); // ZMAAN AŞIMI
   IdHTTP1.Get(Edit4.Text);                         // POST GET

  Memo1.Lines.Add(Format('Sıra %d %s', [I, 'Bağlandı.']));

 except

 Memo1.Lines.Add(Format('Sıra %d %s', [I, 'Bağlanamadı.']));

IdHTTP1.Disconnect;   // ÖLDÜR.
end;
end;
end;

procedure TForm1.Timer1Timer(Sender: TObject);
begin
   Timer1.Enabled := False;
  try
    ListBox1Click(nil);
    if ListBox1.ItemIndex < ListBox1.Items.Count - 1 then
      ListBox1.ItemIndex := ListBox1.ItemIndex + 1
    else
      ListBox1.ItemIndex := -1;
   finally
    Timer1.Enabled := True;
  end;

  if ListBox1.ItemIndex = -1 then
Timer1.Enabled:=false;

end;

procedure TForm1.BitBtn2Click(Sender: TObject);
begin
  Timer1.Enabled := true;
end; 
```

先感谢您。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T21:53:17.750

这是一个线程示例：

```
type
  TMyThread = class(TThread)
  protected
    procedure Execute; override;
  public:
    ProxyIndex: Integer;
    ProxyServer: String; 
    ProxyPort: TIdPort;
    Url: String;
    ReadTimeout: Integer;
    property ReturnValue;
  end;

procedure TMyThread.Execute;
var
  IdHTTP: TIdHTTP; 
begin 
  if Terminated then Exit;
  IdHTTP := TIdHTTP.Create(nil); 
  try
    IdHTTP.ProxyParams.ProxyServer := ProxyServer; 
    IdHTTP.ProxyParams.ProxyPort := ProxyPort; 
    IdHTTP.ReadTimeout := ReadTimeout;
    IdHTTP.Get(Url);
    ReturnValue := 1;
  finally
    IdHTTP.Free;
  end;
end; 
```

.

```
var
  CheckingAllProxies: Boolean = False;

procedure TForm1.ThreadTerminated(Sender: TObject);
var
  LThread: TMyThread;
begin
  LThread := TMyThread(Sender);

  ListBox1.Items.Objects[LThread.ProxyIndex] := nil;

  Memo1.Lines.Add(Format('Sıra %d %s', [LThread.ProxyIndex, iif(LThread.ReturnValue = 1, 'Bağlandı.', 'Bağlanamadı.')])); 

  if CheckingAllProxies then
  begin
    if not CheckProxy(LThread.ProxyIndex + 1) then
      CheckingAllProxies := False;
  end;
end;

function TForm1.CheckProxy(ItemIndex: Integer): Boolean; 
var 
  S: String; 
  LThread: TMyThread;
begin 
  Result := False;
  if (ItemIndex < 0) or (ItemIndex >= ListBox1.Items.Count) then Exit;
  if ListBox1.Items.Objects[ItemIndex] <> nil then Exit;
  S := ListBox1.Items[ItemIndex]; 
  LThread := TMyThread.Create(True);
  try
    LThread.ProxyIndex := ItemIndex;
    LThread.ProxyServer := Fetch(S, ':'); 
    LThread.ProxyPort := StrToInt(S); 
    LThread.Url := Edit4.Text;
    LThread.ReadTimeout := StrToInt(ComboBox1.Text);
    LThread.OnTerminate := ThreadTerminated;
    LThread.FreeOnTerminate := True;
    ListBox1.Items.Objects[ItemIndex] := LThread;
  except
    LThread.Free;
    raise;
  end;
  LThread.Resume;
  Result := True;
end; 

procedure TForm1.ListBox1Click(Sender: TObject); 
begin
  if not CheckingAllProxies then
    CheckProxy(ListBox1.ItemIndex);
end;

procedure TForm1.BitBtn2Click(Sender: TObject); 
begin 
  if not CheckingAllProxies then
    CheckingAllProxies := CheckProxy(0);
end; 

procedure TForm1.BitBtn3Click(Sender: TObject); 
begin 
  CheckingAllProxies := False;
end; 
```

# html - 如何使用 CSS 设置 HTML 段落样式以防止它们之间出现空行？

> ID：11547934
> 
> 赞同：2
> 
> 时间：2012-07-18T18:25:42.950
> 
> 标签：html, css, xhtml, paragraph

如果我有 2 个完整的连续段落，我应该如何设置它们的样式，以便它们之间只有一个换行符（所以没有空行）？

例如

```
<p>First paragraph</p>
<p>Second paragraph</p> 
```

应该呈现为

```
First paragraph
Second paragraph 
```

我正在使用 XSLT 生成这个 HTML。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-18T18:31:32.743

删除顶部和底部边距：

```
p{
    margin-top:0;
    margin-bottom:0
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T18:30:59.980

通常`<p>`，标签将具有非零垂直边距，这会产生“额外”换行符的外观。如果您不希望它们之间没有“额外”空间，您可以将段落边距设置为零。

例如

```
<p style="margin: 0;">First paragraph</p>
<p style="margin: 0;">Second paragraph</p> 
```

# javascript - 为什么 ajax 回调在我的局部变量中设置未定义？

> ID：11547939
> 
> 赞同：1
> 
> 时间：2012-07-18T18:26:14.693
> 
> 标签：javascript, jquery

由于这种奇怪的行为，我在我的网站中发现了一个错误。第二个函数警告“未定义”而不是“一”。

```
function test() {
    var myParam = "one"
    if (false) {
        var myParam = "two";
    }
    alert(myParam);
}
test(); // alert "one"

function testAjax() {
    var myParam = "one";
    $.ajax({
        url:    "http://url-to-get-error",
        error:  function(){
            if (false) {
                var myParam = "two";
            }
            alert(myParam);
        }
    });
}
testAjax(); // alert "undefined" 
```

如果我在下面评论块，正确地提醒“一个”。有人知道为什么吗？

```
if (false) {
var myParam = "two";
} 
```

请参阅[http://jsfiddle.net/EaW8D/2/](http://jsfiddle.net/EaW8D/2/)。

* * *

**更新**

各位大侠，我知道怎么解决这个问题了，非常感谢！

但问题是为什么 js在一个从不运行的块中**设置 undefined**`if (false)` ( )。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T18:39:42.937

> 有人知道为什么吗？

`myParam`您正在错误处理程序内部重新声明，在外部范围中**隐藏**具有相同名称的变量。变量声明被**“提升”**到函数的顶部，因此您的代码实际上与以下内容相同：

```
error:  function(){
    var myParam;  // <- declaration
    if (false) {
        myParam = "two"; // <-  initialization
    }
    alert(myParam);
} 
```

并且由于该`if`块永远不会执行，`myParam`因此将是`undefined`（未初始化变量的默认值）。

这是一个简单的例子来证明这种行为。如果变量没有被提升，`foo`将成为一个全局变量（假设非严格模式）和一个属性`window`，但它不会：

```
(function() {
    if(false) {
        var foo = 'bar';
    }
    foo = 'baz';
    console.log(window.foo); // yields `undefined`
}()); 
```

* * *

要解决这个问题，只需删除`var`，以便`myParam`引用在外部范围中声明的变量，`testAjax`：

```
error:  function(){
    if (false) {
        myParam = "two";
    }
    alert(myParam);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T18:29:06.407

`myParam`因为你`new` `var`又在创造

```
function testAjax() {
    var myParam = "one";
    $.ajax({
        url:    "http://url-to-get-error",
        error:  function(){
            if (false) {
                myParam = "two";
            }
            alert(myParam);
        }
    }); 
}
testAjax(); // alert "undefined"​ 
```

[http://jsfiddle.net/mKdhx/](http://jsfiddle.net/mKdhx/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T18:42:44.903

表单的所有变量声明`var myParam`都被[*提升*](https://developer.mozilla.org/en/JavaScript/Reference/Statements/var#var_hoisting)到函数范围的顶部。即使它们在不可访问的块中或在函数的末尾，在*任何地方*`var`都有声明的函数将把该变量名的所有实例视为本地的。

 *考虑这个处理程序：

```
 error:  function(){
        alert(myParam);
        var myParam;
    } 
```

它也会引起`undefined`警报，因为`var myParam`底部的意思是，“*将此声明之前和之后**的所有实例`myParam`*都视为此函数中的局部变量。 ”在这种情况下适用的相同提升适用于您的不可访问逻辑-块案例。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-18T18:30:42.523

在第二种情况下，您的 myParam=one 和 myParam=two 位于不同的块中 - 此外，就变量可见性而言，ajax 错误的回调不是“低于”testAjax - 它是异步的。您将需要 myParam 在全局范围内*

# javascript - 来自 javascript 的参考文件。路径修复

> ID：11547941
> 
> 赞同：0
> 
> 时间：2012-07-18T18:26:23.850
> 
> 标签：javascript, jquery, path

也许这是一个虚拟的问题，但是......我有一个文件要求提供图像，它工作得很好。问题是当我从其他目录链接 javascript 文件时。文件的路径相对于当前文件，而不是相对于它自身的 javscript 文件。我的错误是什么？不能？

提前致谢。

目录：

```
/
--css
--js
    --file.js
--imagenes
    --close.png
index.html 
```

如果我在 file.js 和 index.html 中链接图像，我必须调用

```
 this.img = $('<img>');
    this.img.attr('src', 'imagenes/close.png');
    this.div.append(this.img); 
```

如果我移动 Index.html，我将无法再次引用该图像。

# compiler-construction - 将 .NET 托管代码编译为本机 Win32 应用程序

> ID：11547943
> 
> 赞同：0
> 
> 时间：2012-07-18T18:26:26.130
> 
> 标签：compiler-construction, clr, native, converter

我在 .NET 4.0 中编写了一个应用程序，然后编译它，生成 CLR 代码，

我正在寻找的是，交叉手指，一些编译器编译我的 .NET 代码并制作本机 Win32 应用程序，或者将我编译的 CLR 转换为本机 Win32 应用程序。

那里有任何这样的编译器或转换器。如果是，请告诉我。

现在一些天才必须拥有这样的编译器或转换器，当然这样的实用程序将不得不拾取并静态链接托管库。

ps 我需要一个基于 Windows 的解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T18:31:42.533

任何 .NET 代码都需要 .NET 运行时。

[我试用了.NET Linker](http://www.rustemsoft.com/net_link_dll.htm)的试用版，它可以将 .NET 运行时链接到您的可执行文件/DLL 中，这样就没有对 .NET 的外部依赖。我从未在生产环境中尝试过。

据推测，如果您公开您的类，例如使用 COM（COM 可见），最终结果可能会以这种方式使用。

# php - 实现随机数和数组的编程思想

> ID：11547951
> 
> 赞同：2
> 
> 时间：2012-07-18T18:27:01.183
> 
> 标签：php, arrays, random

我一般是编程新手，我发现先在这里问是个好主意。

所以，假设我有大约 900 组 6 个数字存储在某个地方（也许在数组中？）。我希望每次生成一组随机的 6 个数字，与其他 900 不同。如果相同（与其他 900 核对），则不要接受它并生成一个新的。我想过使用数组，每次都和其他人一起检查新的集合，但我认为之前有 900 个数组有点“痛苦”。

任何想法，将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T18:30:53.697

老实说，我无法想象你需要这个来完成的任务。)) 但是通常当您需要确保某种集合的唯一性时，您会使用哈希。

例如，假设我们有 900 个数组，其结构如下：

```
$arr1 = [n1, n2, n3, n4, n5, n6];
$arr2 = [m1, m2, m3, m4, m5, m6];
... 
```

我们需要另一个数组，它不应该和这些数组一样。

我认为，解决方案是创建一个元结构，将这些数组与其哈希一起存储。就像是...

```
$arrayCollection = array(
  hash($arr1) => $arr1,
  hash($arr2) => $arr2,
  ...
); 
```

然后，当创建一个新集合时，我也会生成它的散列 - 并检查我的集合中是否已经存在具有相同散列的元素。像这样：

```
do {
  $newArr = generateArray();
  $newArrHash = hash($newArr);
} while (isset($arrayCollection[$newArrayHash])); 
```

它会非常快，比一次又一次地比较这些集合要快得多。)

至于`hash`功能，可以很简单...

```
function hash(array $arr) {
  return implode('|', $arr);
} 
```

...或者您可能需要将它包装到一些摘要函数中（`md5($x, true)`我想会很好），如果`$arr`可能包含一些非常大的字符串/数字。

# asp.net - 带有访问数据库的 asp.net LIKE 查询

> ID：11547955
> 
> 赞同：0
> 
> 时间：2012-07-18T18:27:16.187
> 
> 标签：asp.net

我正在尝试使用参数进行类似查询，但在 WHERE 行中出现语法错误。有任何想法吗？

```
SELECT Textboxvalue 
FROM            tblTest 
WHERE        Textboxvalue LIKE '*' & @textboxvalue & '*' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T18:33:34.893

我的经验是，虽然 Access 会正确使用 *。但是，当它从 OleDb 连接中询问时，它需要`%`。

```
SELECT Textboxvalue 
FROM   tblTest 
WHERE  Textboxvalue LIKE '%' & @textboxvalue & '%' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T18:30:20.293

这样做：

```
SELECT Textboxvalue 
FROM  tblTest 
WHERE ((Textboxvalue) LIKE "*" & @textboxvalue & "*"); 
```

# cluster-analysis - 如何以相似度为度量进行聚类？

> ID：11547956
> 
> 赞同：1
> 
> 时间：2012-07-18T18:27:16.580
> 
> 标签：cluster-analysis, cosine-similarity

我阅读了有关球形kmeans的信息，但没有遇到实现。要清楚，相似性很简单，是两个文档单位向量的点积。我读过标准k均值使用距离作为度量。距离被指定为矢量距离，就像在坐标几何 sqrt((x2 -x1)^2 + (y2-y1)^2) 中一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T06:43:28.980

有比 k-means 更多的聚类方法。k-means 的问题与其说是建立在欧几里得距离上，不如说是*平均值*必须减少算法收敛的距离。

但是，还有许多*其他*聚类算法不需要计算均值或三角不等式。如果您阅读有关 DBSCAN 的 Wikipedia 文章，它还提到了一个名为 GDBSCAN，Generalized DBSCAN 的版本。您绝对应该能够将相似函数插入 GDBSCAN。最有可能的是，您可以只使用 1/similarity 并将其用作距离函数，除非该算法需要三角不等式。所以这个技巧应该适用于 DBSCAN 和 OPTICS，例如。可能还有层次聚类、k-median 和 k-medoids (PAM)。

# html - 角落上的css边框渐变

> ID：11547957
> 
> 赞同：0
> 
> 时间：2012-07-18T18:27:28.830
> 
> 标签：html, css

我正在尝试构建我的网页，并且我想要`div`只定义角的 s。本质上，我希望右上角和左下角有渐变边框。我希望我的“ASCII 艺术”对你有意义。

```
 -    -  -  - - - - ----.
                            |
                            |
                            '
                            |
                            '

                            '

                            ' 
```

我也想要左下角的相应效果。

到目前为止，我不正确的代码并没有产生预期的效果：

```
-webkit-border-image: 
-webkit-gradient(linear, 0 0, 100% 0, from(#666), to(#fff)) 1 100%; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T19:33:50.033

据我所知，你想要一个从右上角到左下角的渐变，只显示在边框上。据我所知，您要么需要为整个事物创建背景图像，要么至少需要为边框创建背景图像。此外，五个主要浏览器中只有两个支持这样的渐变。抱歉，我无法提供更多帮助。

# asp.net-mvc-3 - MVC 3 自定义 DropDownListFor 项目

> ID：11547968
> 
> 赞同：0
> 
> 时间：2012-07-18T18:28:00.513
> 
> 标签：asp.net-mvc-3

我的数据库中有一张表，例如：

![在此处输入图像描述](../Images/ffa31d1050775f1a0191599d3a4532e4.png)

我想用扩展名填充`select`标签。`MainTab``Html.DropDownListFor()`

最难的部分是，我希望这些项目`string`像`TabA_Name/TabB_Name/TabC_Name`我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T18:44:05.737

为您拥有下拉列表的页面使用视图模型。例如，

```
public class MyViewModel
{
    /* You will keep all your dropdownlist items here */
    public IEnumerable<SelectListItem> Items { get; set; }

    /* The selected value of dropdown will be here, when it is posted back */
    public String DropDownListResult         { get; set; }

} 
```

在您将视图模型返回到视图的控制器中，填写列表并返回该模型。

```
public ActionResult Create()
{
    /* Create viewmodel and fill the list */
    var model = new MyViewModel();

    // TODO : Select all data from MainTab to variable. Sth like below.
    var data= unitOfWork.Reposityory.GetAll();

    /* Foreach of the MainTab entity create a SelectListItem */
    var dropDownListData =  data.Select().(x = > new SelectListItem 
    {
        /* Value of SelectListItem is the pk of MainTab entity. */
        Value = x.MainTabID,

        /* This is the string you want to display in dropdown */
        Text = x.TabA.Name + "/" + x.TabB.Name + "/" + x.TabC.Name
    });

    model.Items = new SelectList(dropdownListData, "Value", "Text");

    return View(model);
} 
```

这是你的看法。

```
/* Make your view strongly typed via your view model */
@model MyNamespace.MyViewModel

/* Define your dropdown such that the selected value is binded back to 
 * DropDownListResult propery in your view model */
@Html.DropDownListFor(m => m.DropDownListResult, Model.Items) 
```

当您将视图发布回控制器时，您的视图模型应该具有`DropDownListResult that is filled with the selected dropdownlist item.`

# ios - 如何在 iPhone 应用程序中创建弹出框？

> ID：11547969
> 
> 赞同：15
> 
> 时间：2012-07-18T18:28:00.933
> 
> 标签：ios, iphone, popover

我正在寻找 iPhone 中的弹出框，我想让它像 iOS 5 阅读器功能：

![在此处输入图像描述](../Images/3cb01671596f8bc206b931223ee8e221.png)

经过一番研究，我发现了 WEPopover 和 FPPopover，但我正在寻找是否有类似这个 API 内置 iphone SDK 的东西。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-18T18:38:27.537

您可以`UIView`使用一些自定义艺术品制作一个，并在您的视图顶部显示一个动画作为“弹出框”，其中包含一些按钮，如下所示：

```
UIView *customView = [[UIView alloc] initWithFrame:CGRectMake(25, 25, 100, 50)]; //<- change to where you want it to show.

//Set the customView properties
customView.alpha = 0.0;
customView.layer.cornerRadius = 5;
customView.layer.borderWidth = 1.5f;
customView.layer.masksToBounds = YES;

//Add the customView to the current view
[self.view addSubview:customView];

//Display the customView with animation
[UIView animateWithDuration:0.4 animations:^{
    [customView setAlpha:1.0];
} completion:^(BOOL finished) {}]; 
```

如果您想`#import <QuartzCore/QuartzCore.h>`使用`customView.layer`.

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-05-23T22:01:53.933

从 iOS8 开始，我们现在可以创建弹出框了，这在 iPhone 上和在 iPad 上是一样的，这对于那些制作通用应用程序的人来说尤其棒，因此不需要制作单独的视图或代码。

您可以在这里获得课程和演示项目：[https ://github.com/soberman/ARSPopover](https://github.com/soberman/ARSPopover)

您需要做的就是 subclass `UIViewController`，符合`UIPopoverPresentationControllerDelegate`协议并设置所需`modalPresentationStyle`的`delegate`值：

```
// This is your CustomPopoverController.m

@interface CustomPopoverController () <UIPopoverPresentationControllerDelegate>

@end

@implementation CustomPopoverController.m

- (instancetype)init {
    if (self = [super init]) {
        self.modalPresentationStyle = UIModalPresentationPopover;
        self.popoverPresentationController.delegate = self;
    }
    return self;
}

- (UIModalPresentationStyle)adaptivePresentationStyleForPresentationController:(UIPresentationController *)controller {
    return UIModalPresentationNone; //You have to specify this particular value in order to make it work on iPhone.
} 
```

然后，在要显示它的方法中实例化新创建的子类，并为 和 分配另外两个`sourceView`值`sourceRect`。它看起来像这样：

```
CustomPopoverController *popoverController = [[CustomPopoverController alloc] init];
popoverController.popoverPresentationController.sourceView = sourceView; //The view containing the anchor rectangle for the popover.
popoverController.popoverPresentationController.sourceRect = CGRectMake(384, 40, 0, 0); //The rectangle in the specified view in which to anchor the popover.
[self presentViewController:popoverController animated:YES completion:nil]; 
```

你有它，漂亮，整洁的模糊弹出框。

# php - 如何设置自定义 PHP.ini

> ID：11547973
> 
> 赞同：0
> 
> 时间：2012-07-18T18:28:19.733
> 
> 标签：php

*加载*的配置文件路径是`/usr/local/lib/php.ini`（使用 找到`phpinfo();`）。

如何在任何我希望的地方编辑此文件或制作此文件的副本？在某些论坛中，我被要求执行此命令，

`cp /usr/local/lib/php.ini /public_html`以便将 PHP.ini 文件复制到 public_html 文件夹。但我不明白在哪里执行这个命令。

我对 PHP 没有太多了解，所以我可以自己解决这个问题。执行此操作的详细程序是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T18:31:39.247

**如果您有权访问自己的专用服务器或虚拟机：**

打开终端，输入`sudo nano /usr/local/lib/php.ini`，进行所需的更改，点击`Ctrl`+`O`保存，然后`Ctrl`+`X`退出。

如果要复制到其他地方，请使用`cp /usr/local/lib/php.ini /path/to/new/location`

**如果您使用共享托管服务提供商**

您*不能*修改*php.ini*文件或使用其他版本。您将需要覆盖`.htaccess`文件或 PHP 运行时中的设置。请注意，您的共享主机可能禁用了这些设置，因此您不能占用共享服务器的 RAM。

### 文件*.htaccess*示例

```
php_value memory_limit 16M 
```

### 运行时示例（位于 PHP 脚本的最顶部）

```
ini_set('memory_limit', '16M'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T18:43:19.293

您还可以在运行时更改大多数 ini 设置。这是一个改变的例子`memory_limit`。只需使用`ini_get_all()`获取所有设置的数组和值，找到要更改的值，然后使用`ini_set()`. 配置选项将在脚本执行期间保留此新值，并将在脚本结束时恢复：

```
<?PHP
// before...
print_r(ini_get_all());
/**
 * Array
  (
        ...
        [memory_limit] => Array
            (
                [global_value] => 128M
                [local_value] => 128M
                [access] => 7
            )
        ...
  )
 */

// Set the new value
ini_set('memory_limit', '16M');

// after...
print_r(ini_get_all());
/**
 * Array
   (
       ...
       [memory_limit] => Array
           (
               [global_value] => 128M
               [local_value] => 16M
               [access] => 7
           )
      ...
  )
 */ 
```

这也取决于您的主机允许的权限。

# python - Python Win32 和 excel

> ID：11547974
> 
> 赞同：0
> 
> 时间：2012-07-18T18:28:21.463
> 
> 标签：python, excel, win32com

我正在使用 WIN32com 来使用 excel。我需要确保 excel 每次都打开新实例。因此，如果我运行它并且已经打开了 excel，我需要它来打开一个新的 excel，并且在脚本中我需要它来打开文件 2 的第二个 excel 窗口。这就是我正在使用的：我可以打开它，但不能在新实例中打开。

```
 import win32com.client
 import os

 x1 = win32com.client.Dispatch("Excel.Application")

 wb1= x1.workbooks.Open("X:\File1.xlsx")
 wb2 = x1.workbooks.Open("X:\File2.xlsm")
 x1.close("X:\File1.xlsx") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T21:22:12.947

您可以使用 DispatchEx 创建应用程序的新实例。

```
x1 = win32com.client.DispatchEx("Excel.Application")
x2 = win32com.client.DispatchEx("Excel.Application")
wb1 = x1.Workbooks.Open(.....
wb2 = x2.Workbooks.Open(..... 
```

罗杰

# ruby - 如何公开用不同语言编写的对象/函数？

> ID：11547976
> 
> 赞同：0
> 
> 时间：2012-07-18T18:28:31.590
> 
> 标签：ruby, api, programming-languages

我正在用 ruby​​ 编写一个应用程序，并希望访问一些用另一种语言 (php) 编写的遗留代码。不幸的是，这个遗留代码没有 HTTP API，但它存在于同一个文件系统上。我有一个想法，也许不是构建一个 API，或者用 ruby​​ 重写所有代码，而是有一些聪明的方法可以公开这些 PHP 函数，以便 ruby​​ 可以访问它们。您有什么想法或方法可以用来完成此任务吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T18:44:33.383

假设您的意思是可在命令行调用的代码，使用[反引号](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-60)或[`%x`](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-60)运算符或更复杂[`system`](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-system)的命令[`popen`](http://www.ruby-doc.org/core-1.9.3/IO.html#method-c-popen)，[`popen3`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/open3/rdoc/Open3.html)您可以执行单独的代码片段并收集结果。

例如在 IRB 中：

```
irb(main):002:0> puts `ls`
Desktop
Documents 
```

将其包装在一个方法中，它就成为一种调用外部程序的方法：

```
def ls(s='')
`ls #{s}`
end

ls() # => "Desktop\nDocuments\nDownloads\nLibrary\nMovies\nMusic\nPictures\nPublic\nSites\nVirtualBox VMs\nbin\ndevelopment\nlibsmi\nperl5\nproduction\nshare\ntest.data\ntmp\n"
ls('M*') # => "Movies:\n\nMusic:\niTunes\n" 
```

有关更多信息，请参阅“ [Ruby，exec、system 和 %x() 或反引号之间的区别](https://stackoverflow.com/questions/6338908/ruby-difference-between-exec-system-and-x-or-backticks)”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-07T04:49:31.510

我能想到的唯一合理的解决方案是重写 php 块或编写一个 http api。

如果你想走上一条更冒险的路线，你可以看看将 php 编译成 exes（[将 PHP 脚本转换为独立的 windows 可执行文件](https://stackoverflow.com/questions/9046675/convert-a-php-script-into-a-stand-alone-windows-executable)），然后通过反引号、系统等执行它们......

不过，最好重写它。

# mysql - 如何在 CHAR (1) = y/n 的列中设置/检查唯一值

> ID：11547982
> 
> 赞同：-1
> 
> 时间：2012-07-18T18:28:53.583
> 
> 标签：mysql, sql, row

我对 SQL 语句不是很擅长，但我想知道一件我愿意知道的事情。

想象一个包含“y”或“n”值的“可见”列。在将所需行设置为“y”之前，是否可以**只有**一个“y”而不启动将所有行的该表更新为“n”值的预查询？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:33:27.263

假设您要将 ID 为 123 的行设置为可见，您可以执行以下操作。第一个查询不会更新*所有*行，只会更新已设置为 Y 的行：

```
update MyTable set Visible = 'N' where
Visible = 'Y';
update MyTable set Visible = 'Y' where
ID = 123; 
```

另一种方法是，与其将 Visible 设为标志，不如将其设为 VisibleDate 列。然后将该列设置为要显示的行的当前日期。然后，要确定当前可见的行，请从 VisibleDate 列中选择最大日期以查找该行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T18:47:02.103

您可能会考虑另一种方法来处理您正在做的事情。想象一下，你的表有一个主键（它应该）叫 id。

创建一个名为 Visible 的表：

```
create table Visible (id int) 
```

现在，您可以通过以下查询创建标志：

```
select t.*, (case when v.id is not null then 'Y' else 'N' end) as VisibleFlag
from table t left outer join
     Visible v
     on t.id = v.id 
```

您可以将此查询包装在视图中，以简化其他编码。

这使您能够将一行设置为可见，而不会影响其他行。性能应该是相当不错的，因为在表中查找一行，使用主键是一个快速的操作。您也可以将类似的表用于其他类型的标志，但您必须在每一行中指定标志的名称。

# android - Android 跟踪更快的线程结束 whitout 冻结的应用程序

> ID：11547992
> 
> 赞同：1
> 
> 时间：2012-07-18T18:29:27.547
> 
> 标签：android, multithreading, progress-bar, simultaneous

我是一名 android 开发初学者，所以我想让 2 个线程在后台同时运行（或不同时运行），一个用于测试 Wifi 连接，另一个用于超时响应进度条（或另一个用于显示应用程序没有死的东西)，在“main”中我要等待，如果 wifi 测试比超时快，则发送用户一页，如果超时用完，则发送用户另一页。我已经有线程，一个做超时+进度条和其他检查连接，我的问题是谁在等待快速线程结束，我尝试循环检查thread.isalive（），但这样进度条没有t 显示，并且应用程序冻结，直到某个线程结束... =\

有什么帮助吗？！对不起我的英语不好...

公共无效 startProgress() {

```
 Runnable r1 = new Runnable() {
        public void run() {
            for (int i = 0; i <= 10; i++) {
                final int value = i;
                try {
                    Thread.sleep(200);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
                handler.post(new Runnable() {
                    public void run() {
                        progress.setProgress(value);
                    }
                });
            }
            setContentView(R.layout.error_menu);
            //finish();
        }
    };
    Thread th1 = new Thread(r1);
    th1.start();

    Runnable r2 = new Runnable() {
        // Setup the run() method that is called when the background thread
        // is started.
        public void run() {
            // Do you background thread process here...
            // Checking if WIFI is ON and IF URL is Reachable
            if(isOnline()){
                String URL_STR="http://10.0.1.2/ShopList_for_app.php";
                try
                {
                    URL url = new URL(URL_STR);
                    HttpURLConnection urlc = (HttpURLConnection) url.openConnection();
                    urlc.setRequestProperty("User-Agent", "Test");
                    urlc.setRequestProperty("Connection", "close");
                    urlc.setConnectTimeout(7000); // This is time limit if the connection time limit
                    urlc.connect();
                    if (urlc.getResponseCode() == 200){ 
                        setContentView(R.layout.menu1);
                        //finish();//return;
                    }else{
                        //finish();//return;
                    }
                }
                catch (MalformedURLException e){
                    Toast.makeText(getBaseContext(), e.getMessage(), Toast.LENGTH_LONG).show();
                    //finish();//return;
                }
                catch (IOException e){
                    Toast.makeText(getBaseContext(), e.getMessage(), Toast.LENGTH_LONG).show();
                    //finish();//return;
                }
            }else{
                //finish();//return;
            }
        }
    };
    Thread th2 = new Thread(r2);
    th2.start();
    Toast.makeText(getBaseContext(), "..Correu todas as Threads..", Toast.LENGTH_LONG).show();

    while(true){
        if(th2.isAlive()){
            //Toast.makeText(getBaseContext(),"checking...", Toast.LENGTH_LONG).show();

        }else{              
            th1.interrupt();
            setContentView(R.layout.menu1);
            break;
        }           
            if(th1.isAlive()){
            //Toast.makeText(getBaseContext(),"checking...", Toast.LENGTH_LONG).show();

        }else{
            th2.interrupt();
            setContentView(R.layout.error_menu);
            break;
    }

}
} 
```

# mysql - NOT EXISTS 在返回 false 的空表上

> ID：11547994
> 
> 赞同：2
> 
> 时间：2012-07-18T18:29:32.243
> 
> 标签：mysql, subquery, not-exists

我有一个跨 2 个未返回任何结果的表的 SELECT 查询，我不知道为什么不返回。这是不返回任何行的查询：

```
SELECT b.name, b.description, b.badge_id 
FROM badges AS b 
WHERE b.type = 'have' AND b.brand_id = 'zTR7wH5FMl' AND ISNULL(b.series_id) AND b.amount <= 89 
AND NOT EXISTS (SELECT date_earned 
                FROM users_badges AS ub 
                WHERE ub.user_id = 'fMcBBx' AND ub.badge_id = b.badge_id) 
```

如果我只是在最后去掉 AND NOT EXISTS 子句以检查他们是否还没有获得徽章，我会得到这些结果：

```
name            description                                             badge_id
Baker's Dozen   Add 13 items to your Johnny Cupcakes shelf.             sdfKHJkun7
Cupcaker        Have 82 items on your Johnny Cupcakes shelf.            4MeoheBdik
Freshly Baked   Have your first item on your Johnny Cupcakes shelf...   kdJGH98NdI 
```

这正是我期望得到的。AND NOT EXISTS 检查是唯一的区别。users_badges 表中还没有数据，所以我不明白为什么它会返回 false。在我看来，它将无法返回 false。为什么它会使整个查询无效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:37:39.710

在表中添加一行似乎已经解决了它。我猜如果表是空的，SQL 甚至不会检查 EXISTS 条件并且总是返回 false，因为该行不可能存在于表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T18:41:01.480

尝试用`NOT EXISTS`/`LEFT JOIN`替换`IS NULL`：

```
SELECT    b.name, b.description, b.badge_id 
FROM      badges b 
LEFT JOIN user_badges ub ON b.badge_id = ub.badge_id AND ub.user_id = 'fMcBBx'
WHERE     b.type = 'have' AND 
          b.brand_id = 'zTR7wH5FMl' AND 
          b.amount <= 89 AND
          b.series_id IS NULL AND 
          ub.badge_id IS NULL 
```

# objective-c - Mountain Lion OSX 10.8 的 Hello world 代码显示 iChat 等通知

> ID：11547997
> 
> 赞同：15
> 
> 时间：2012-07-18T18:29:39.220
> 
> 标签：objective-c, cocoa, osx-mountain-lion

有没有在 Mountain Lion OSX 10.8（新的通知中心）上显示 hello world 通知的示例。

只是为了增加视觉清晰度，这就是我所说的： ![通知中心通知](../Images/3dcee24f770505a61ece5a4ba112a97c.png)

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-07-18T20:29:36.383

在@Alexsander 的一点帮助下，我终于找到了答案。

```
NSUserNotification *notification = [[NSUserNotification alloc] init];
[notification setTitle:@"Hello World"];
[notification setInformativeText:@"Hello world message"];
[notification setDeliveryDate:[NSDate dateWithTimeInterval:20 sinceDate:[NSDate date]]];
[notification setSoundName:NSUserNotificationDefaultSoundName];
NSUserNotificationCenter *center = [NSUserNotificationCenter defaultUserNotificationCenter];
[center scheduleNotification:notification]; 
```

希望它可以帮助人们

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-18T20:21:25.980

向上看`NSUserNotification`和`NSUserNotificationCenter`。