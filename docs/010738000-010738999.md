# StackOverflow 问答 10738000-10738999

# javascript - 如何在 jquery 中为每天、每周和每月的步骤创建一个范围滑块

> ID：10738001
> 
> 赞同：2
> 
> 时间：2012-05-24T13:01:17.073
> 
> 标签：javascript, jquery

我想创建一个范围滑块，它在下拉菜单{每日、每周和每月}上运行。

在选择每日步数时更改为 7，minDate 更改为 maxDate 表示今天的日期为 7。在选择每周步骤时，更改为 4(7-7-7-7=30)，minDate 更改为 (maxDate)today date-30。在选择每月步骤时，将更改为 12（12 个月 = 365 天），将 minDate 更改为 (maxDate)today date-365。

并且鼠标指针都指向 maxDate

```
var maxdate1 = new Date(),
    minDate1 = removeDays(new Date(), -7);
alert(minDate1);

$( "#slider" )
  .slider({range: true,
      step:  1,
      animate:true,
      value: maxDate1,
      values [minDate1, maxDate1],
      max: Math.floor((maxDate1.getTime() - minDate1.getTime()) / 86400000),

      slide: function(event, ui) {

        var date = new Date(minDate1.getTime());
        date.setDate(date.getDate() + ui.values[0]);

        $('#startDate').val($.datepicker.formatDate('mm/dd/yy', date));
        $('#from').val($.datepicker.formatDate('M d, yy', date));          

        date = new Date(minDate1.getTime());

        date.setDate(date.getDate() + ui.values[1]);

        $('#endDate').val($.datepicker.formatDate('mm/dd/yy', date));
        $('#to').val($.datepicker.formatDate('M d, yy', date));
      }
  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-12T20:07:34.393

如果我理解正确，您希望能够在初始化后更改滑块的参数（例如，步长、最小值、最大值等）。像这样的东西应该工作：

```
$('#dropdown').change(function() {
    switch ($(this).val()) {
    case 'daily':
        $('#slider').slider('option', 'step', 1);
        break;
    case 'weekly':
        $('#slider').slider('option', 'step', 7);
        break;
    case 'monthly':
        $('#slider').slider('option', 'step', 30);
        break;
    }
}); 
```

# github - 一个人可以从 GitHub Archive 检索数据多远？

> ID：10738002
> 
> 赞同：2
> 
> 时间：2012-05-24T13:01:25.413
> 
> 标签：github, google-bigquery, github-archive

**[GitHub 存档](http://www.githubarchive.org/)**项目 状态

> GitHub Archive 是一个**记录**公共 GitHub 时间线、将其**存档**并**使其易于访问**以进行进一步分析的项目。

该档案也可通过**[Google Big Query](https://bigquery.cloud.google.com/)**进行查询。但是，看起来我要么遗漏了某些东西，要么只有一部分数据可用。

事实上，运行以下查询只返回`1636`WatchEvents（*started*或*stopped*），而**[Rails 存储库](https://github.com/rails/rails)**的帐户比`14300`观察者更多。

```
SELECT actor_attributes_login, created_at, payload_action
FROM [githubarchive:github.timeline]
where repository_name = "rails"
and type="WatchEvent"
order by created_at asc; 
```

看起来最早检索到的数据大约有 2.5 个月的历史。

数据会被截断吗（这对于存档来说可能看起来很奇怪）？是否存在与使用 BigQuery 相关的限制/配额？

![github存档](../Images/cf60276dc45685dda3ac845ff8a28c8d.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T19:01:57.660

这是正确的。该项目/爬虫于今年 3 月 11 日上线，因此当前存档从那天开始。[在githubarchive.org](http://www.githubarchive.org/)页面上有一个关于这个的注释，但我想我应该让它更加可见和明确。

GitHub 团队有一个关于让更多历史可用的线程，但我还没有 ETA。*手指交叉*:-)

# .net - 访问新签名的第三方 DLL 会出错

> ID：10738008
> 
> 赞同：4
> 
> 时间：2012-05-24T13:01:48.633
> 
> 标签：.net, dll, .net-assembly, strongname

我有一个使用第三方 DLL 的签名应用程序。这些 DLL 未签名。- 到目前为止，第一步没有问题：我刚刚签署了它们（使用 ildasm.exe 获取 *.il，在 *.il 中获取 publickeytoken，因为它们具有相互依赖性，并使用 ilasm.exe 生成 *.dll）

该项目现在可以正常编译并且也可以启动。

但是，当在我的代码中，调用 3rd-party-DLL 的类构造函数（或其他什么？ - 只是我做的第一件事），我收到错误*“强名称签名的程序集必须在它们的InternalsVisibleTo 声明”*

如果您有 DLL 的源并且可以通过设置在 AssemblyInfo.cs 中进行调整，似乎不会有问题

```
[assembly: InternalsVisibleTo("MyProject.Domain.Tests, PublicKey=..."] 
```

**但是：**如上所述，我有一个第三方 DLL，但我**没有**源代码。所以没有办法解决这样的问题。

有什么建议可以让它运行吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-30T17:47:35.360

我有完全相同的问题。

**为什么会发生**

*   声明第 3 方程序集`InternalsVisibleTo`以使其成为其他程序集的“朋友”，例如`InternalsVisibleTo("OtherAssembly")`
*   .NET 要求强名称程序集只能是其他强名称程序集的“朋友”，在这种情况下，`InternalsVisibleTo`属性必须指定那些其他程序集的公钥，例如`InternalsVisibleTo("OtherAssembly, PublicKey=[key]")`
*   在运行时，CLR 发现`InternalsVisibleTo`没有为相关程序集正确声明它，因此它引发异常。

**怎么修**

如果程序执行不需要“朋友”程序集（例如，它是一个测试程序集，未部署在生产中），请按照下列步骤操作：

*   拆卸有问题的组件：`ildasm.exe ThirdParty.dll /OUTPUT=ThirdParty.il`
*   使用文本编辑器编辑 IL 文件，删除任何声明`InternalsVisibleTo`
*   组装并签署 IL：`ilasm.exe ThirdParty.il /DLL /OUTPUT=ThirdParty.modified.dll /KEY=key.snk`
*   ***注意**：通过以下方式生成密钥：`sn.exe -k key.snk`*

如果程序执行需要“朋友”程序集，您必须签署所有这些朋友程序集。然后按照与上述类似的步骤进行操作，除了删除之外`InternalsVisibleTo`，您必须使用正确的公钥修改每个声明。

# android - Android WebView - history.go(-1)

> ID：10738013
> 
> 赞同：2
> 
> 时间：2012-05-24T13:02:07.477
> 
> 标签：android, webview

我正在为 Web 开发人员开发一个简单的 android 应用程序。我在 WebView 中遇到 history.go(-1) 问题。

如果我从第 1 页导航到第 2 页，然后单击带有 history.go(-1) 的按钮，则 web 视图将导航到第 1 页。

如果我从第 1 页导航到第 2 页，再到第 3 页，然后点击带有 history.go(-1) 的按钮，则 web 视图将转到第 2 页。如果我再次点击带有 history.go(-1) 的按钮， webview 转到第 3 页，而不是第 1 页。

这是android的webview中的错误吗？在 iOS 和桌面浏览器中就像魅力一样工作！有解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T13:12:47.817

为此，您需要使用任务和返回堆栈，这将允许您移动到以前的活动，避免您正在运行的问题。看看 [这个](http://developer.android.com/guide/topics/fundamentals/tasks-and-back-stack.html)，你应该知道你哪里出错了以及如何解决它

# wpf - 将 BoundingRectangle 绑定到自定义控件依赖属性

> ID：10738018
> 
> 赞同：0
> 
> 时间：2012-05-24T13:02:32.703
> 
> 标签：wpf, binding, dependency-properties, pixelsense

在我们的项目中，我们创建了一个具有一些依赖属性的自定义控件。在我们使用此控件的 xaml 页面上，我们将 Map 控件的 BoundingRectangle 属性绑定到此自定义控件，以便我们可以在自定义控件中使用这些 LocationRect 对象。

当我们对此进行调试时，我们看到 BoundingRectangle（North、NorthEast 等）中的每个属性都具有相同的位置。如果我们检查地图上的属性，我们会发现这些属性并不完全相同。（如预期）

我已将更改回调附加到依赖属性，并且在那里我看到所有属性都具有相同的值。但是，如果我绑定 Center 属性，我会看到它正确更新。

我们将属性绑定到自定义控件上，如下所示：

```
<CustomControls:MiniMap Name="SmallMap" BoundingBox="{Binding ElementName=Map, Path=BoundingRectangle}" /> 
```

这是我们的依赖属性：

```
 public static readonly DependencyProperty BoundingBoxProperty =
            DependencyProperty.Register("BoundingBox", typeof(Location), typeof(MiniMap), new UIPropertyMetadata(new LocationRect())); 
```

任何人都知道为什么在 Map 上更新 LocationRectangle 时没有更新 BoundingBox 属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T08:00:19.850

按照 fmunkert 的建议检查了文档，发现 Bing 地图控件上的 BoundingBox 不是依赖属性。

我们创建了一个自定义映射，它实现了 ViewChanged 事件并更新了我们自己的依赖属性，我们现在可以使用它来绑定到我们的其他控件。

# java - 如何使用 PropertyUtils 从地图内的列表中获取元素？

> ID：10738019
> 
> 赞同：2
> 
> 时间：2012-05-24T13:02:34.810
> 
> 标签：java, apache-commons-beanutils, indexed-properties

我一直在尝试使用用于 PropertyUtils 的 getProperty 的索引表示法来检索包含为映射值的列表中的元素。这是一个示例（我在这里使用通用语法）：

```
map = {"aList": ["elem1", "elem2", "elem3"]} 
```

比方说，我想获得值“elem2”，我正在尝试使用：

```
PropertyUtils.getProperty(map, "aList[1]"); 
```

但它似乎不起作用。我总是得到一个空值。有没有另一种方法可以做到这一点。需要明确的是，我知道我可以做一个`getProperty("aList").get(0)`（当然，在显式转换之后），但我正在研究一个需要上述代码才能工作的解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T03:27:24.627

好的，所以我想通了。下面的代码就像我想要的那样工作：

```
PropertyUtils.getProperty(map, "(aList)[1]"); 
```

我认为，基于[this documentation](https://commons.apache.org/proper/commons-beanutils/apidocs/org/apache/commons/beanutils/PropertyUtilsBean.html)，我在这里所做的是我指定这`aList`是一个键而不是bean的索引属性。类似的东西。

# r - data.frame 到数组（2 列）

> ID：10738026
> 
> 赞同：2
> 
> 时间：2012-05-24T13:02:45.397
> 
> 标签：r, class, geometry, morphological-analysis

我想知道如何将 data.frame 转换为 R 中的数组。因此我的 data.frame 由 16 列和 >100 行组成。每一行代表一个人（蜗牛）。我确实在每只蜗牛上放了 8 个地标。所以现在我有 16 个坐标/个人。不，我想将 data.fram 转换为一个数组，其中每个人都有自己的矩阵，所有个人都放在一个（大）数组中。

我的数据看起来像这样：6 个人有 8 个地标，也就是 16 个坐标 (X&Y)

```
 X1.Lms    Y1.Lms    X2.Lms    Y2.Lms    X3.Lms    Y3.Lms    X4.Lms    Y4.Lms    X5.Lms    Y5.Lms   X6.Lms    Y6.Lms    X7.Lms    Y7.Lms X8.Lms Y8.Lms
1 132500000 132500000 114500000 132000000 150100000 121500000  97600000 123500000 164700000 107800000 77600000 110400000 181600000  81700000     NA     NA
2 135700000 150900000 114100000 152000000 147500000 142500000  96900000 143800000 161900000 128600000 78300000 131200000 178000000 100500000     NA     NA
3 134100000 136900000 113700000 135400000 148700000 129900000  99600000 127800000 164700000 115900000 76600000 115100000 183600000  87600000     NA     NA
4 137400000 147100000 119500000 145600000 149500000 143000000 102400000 136800000 169400000 128200000 84000000 123400000 186700000 106000000     NA     NA
5 141300000 144200000 115800000 141300000 154000000 135800000 103900000 132700000 171300000 122400000 83600000 120800000        NA        NA     NA     NA
6 136300000 153700000 118100000 150200000 151700000 146900000 105500000 143700000 168400000 135200000 83600000 132000000 188900000 111600000     NA     NA 
```

您可以通过输入以下内容将此表放入 R：

```
sample <- structure(list(X1.Lms = c(132500000L, 135700000L, 134100000L, 137400000L, 141300000L, 136300000L), Y1.Lms = c(132500000L, 150900000L, 136900000L, 147100000L, 144200000L, 153700000L), X2.Lms = c(114500000L, 114100000L, 113700000L, 119500000L, 115800000L, 118100000L), Y2.Lms = c(132000000L, 152000000L, 135400000L, 145600000L, 141300000L, 150200000L), X3.Lms = c(150100000L, 147500000L, 148700000L, 149500000L, 154000000L, 151700000L), Y3.Lms = c(121500000L, 142500000L, 129900000L, 143000000L, 135800000L, 146900000L ), X4.Lms = c(97600000L, 96900000L, 99600000L, 102400000L, 103900000L, 105500000L), Y4.Lms = c(123500000L, 143800000L, 127800000L, 136800000L, 132700000L, 143700000L), X5.Lms = c(164700000L, 161900000L, 164700000L, 169400000L, 171300000L, 168400000L ), Y5.Lms = c(107800000L, 128600000L, 115900000L, 128200000L, 122400000L, 135200000L), X6.Lms = c(77600000L, 78300000L, 76600000L, 84000000L, 83600000L, 83600000L), Y6.Lms = c(110400000L, 131200000L, 115100000L, 123400000L, 120800000L, 132000000L ), X7.Lms = c(181600000L, 178000000L, 183600000L, 186700000L, NA, 188900000L), Y7.Lms = c(81700000L, 100500000L, 87600000L, 106000000L, NA, 111600000L), X8.Lms = c(NA_integer_, NA_integer_, NA_integer_, NA_integer_, NA_integer_, NA_integer_), Y8.Lms = c(NA_integer_, NA_integer_, NA_integer_, NA_integer_, NA_integer_, NA_integer_ )), .Names = c("X1.Lms", "Y1.Lms", "X2.Lms", "Y2.Lms", "X3.Lms", "Y3.Lms", "X4.Lms", "Y4.Lms", "X5.Lms", "Y5.Lms", "X6.Lms", "Y6.Lms", "X7.Lms", "Y7.Lms", "X8.Lms", "Y8.Lms"), row.names = c(NA, 6L ), class = "data.frame") 
```

或者，我将代码[放在 pastebin 上](http://pastebin.com/0ks3p2sk)。

结果应该类似于“shapes”包中的雌性大猩猩样本数据，其中每个坐标（X1.S 和 Y1.S）都是一个矩阵。我猜尺寸必须是（8 x 2 xn）。n 是原始 data.frame 中的行数。

```
install.packages("shapes")
library(shapes)
data(gorf.dat)
gorf.dat 
```

数据被组织为一个维度为 (8 x 2 xn) 的数组

```
, , 1

       [,1] [,2]
 [1,]    5  193
 [2,]   53  -27
 [3,]    0    0
 [4,]    0   33
 [5,]   -2  105
 [6,]   18  176
 [7,]   72  114
 [8,]   92   38

, , 2

        [,1] [,2]
  [1,]   51  191
  [2,]   55  -31
  [3,]    0    0
  [4,]    0   33
  [5,]   25  106
  [6,]   56  171
  [7,]   98  105
  [8,]   99   15

, , 3

      [,1] [,2]
[1,]   36  187
[2,]   59  -31
[3,]    0    0
[4,]    0   36
[5,]   12  102
[6,]   38  171
[7,]   91  103
[8,]  100   19 
```

等等....

我已经尝试过 x <- as.array(sample, dim=...) 但到目前为止我无法找到解决方案。我想我必须尝试类似于 ms excel 中的转置功能的东西。

问候，卢克

***- - 编辑 - -***

你的答案很有帮助，但我想你误解了我的意思。第一个人有 8 个具有 16 个坐标的地标（X1、Y1、X2、Y2、X3、Y3....）。所以要绝对清楚我想要的结果:)......我的想法应该看起来更像这样：

```
, , 1
      [,1]       [,2]
 132500000  132500000
 114500000  132000000
 150100000  121500000
  97600000  123500000
 164700000  107800000
  77600000  110400000
 181600000   81700000
        NA         NA

, , 2
        [,1]       [,2]
   135700000  150900000
   114100000  152000000
   147500000  142500000
   969000000  143800000
   161900000  128600000
    78300000  131200000 
   178000000  100500000
          NA         NA 
```

第一行（又名第一种情况）有 8 个具有 16 个坐标的地标。所有这些都应该存储在一个矩阵中。之后，我想将所有案例（> 100）组合成一个数组，其中每个人都有自己的矩阵。

谢谢你们的快速反应！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T13:37:37.890

修改以处理新的数据结构：

```
sdat <- apply(sample, 1,matrix, ncol=2, byrow=TRUE ) #unfolds the interleaved columns
dim(sdat) <- c(8,2,6)  # expands 16 x 6 into one X column and one Y column per slice
#-----------------
> sdat[, , 1:2]
, , 1

          [,1]      [,2]
[1,] 132500000 132500000
[2,] 114500000 132000000
[3,] 150100000 121500000
[4,]  97600000 123500000
[5,] 164700000 107800000
[6,]  77600000 110400000
[7,] 181600000  81700000
[8,]        NA        NA

, , 2

          [,1]      [,2]
[1,] 135700000 150900000
[2,] 114100000 152000000
[3,] 147500000 142500000
[4,]  96900000 143800000
[5,] 161900000 128600000
[6,]  78300000 131200000
[7,] 178000000 100500000
[8,]        NA        NA

    .... remaining 4 slices omitted 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T14:58:08.263

试试这个：

```
nlandmarks = 8; nind = nrow(sample)
array(t(sample[,c(1:nlandmarks*2 -1, 1:nlandmarks * 2)]), 
  dim = c(nlandmarks, 2, nind)) 
```

# java - 如何在 Android 上的活动之间的 HttpContext 中保留 HTTP 会话 cookie？

> ID：10738029
> 
> 赞同：7
> 
> 时间：2012-05-24T13:03:04.030
> 
> 标签：java, android, http, session, keep-alive

这是我的应用程序当前的简单描述。它使用一些使用标准 HTTP 会话的远程服务器 API。登录活动。它调用 auth 类，传递登录名和密码。

```
public class Auth extends AsyncTask{
...
private DefaultHttpClient client = new DefaultHttpClient();
private HttpContext localContext = new BasicHttpContext();
private CookieStore cookieStore = new BasicCookieStore();
...
public void auth(String login, String password) {
    localContext.setAttribute(ClientContext.COOKIE_STORE, cookieStore);
    HttpPost request = new HttpPost(url);
    ...
}
protected void onPostExecute(Boolean result){
    parent.loginresponse(result)
} 
```

验证成功后，远程服务器创建标准 HTTP 会话，向我发送 cookie，保存在 CookiStore 中。登录后，loginresponse 启动主要活动。我希望为所有 API 请求提供一个通用类。

如何正确保持活动 HTTP 会话信息，在登录后创建，在所有活动之间，并将其传递给相应 API 方法所需的函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-28T12:05:30.660

如果你使用像[Dagger](http://square.github.io/dagger/)这样的 DI 框架，你可以维护一个`HttpContext`between Activity 并在任何你喜欢的地方注入它！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-19T20:59:01.917

您可以使用如下所示的单例类：

```
public class UserSession
{
    private static UserSession sUserSession;

    /*
       The rest of your class declarations...
    */

    public get(){
        if (sUserSession == null)
        {
            sUserSession = new UserSession();
        }
        return sUserSession;
    }
} 
```

一旦初始化此类的实例，它将保留在内存中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T13:19:38.087

您可以执行以下操作：

```
HttpClient client = getNewHttpClient();
        // Create a local instance of cookie store
        CookieStore cookieStore = new BasicCookieStore();

        // Create local HTTP context
        HttpContext localContext = new BasicHttpContext();
        // Bind custom cookie store to the local context
        localContext.setAttribute(ClientContext.COOKIE_STORE, cookieStore);
        try {
            request = new HttpPost(url);
            // request.addHeader("Accept-Encoding", "gzip");
        } catch (Exception e) {
            e.printStackTrace();
        }

        if (postParameters != null && postParameters.isEmpty() == false) {

            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(
                    postParameters.size());
            String k, v;
            Iterator<String> itKeys = postParameters.keySet().iterator();
            while (itKeys.hasNext()) {
                k = itKeys.next();
                v = postParameters.get(k);
                nameValuePairs.add(new BasicNameValuePair(k, v));
            }

            UrlEncodedFormEntity urlEntity = new UrlEncodedFormEntity(
                    nameValuePairs);
            request.setEntity(urlEntity);

        }
        try {

            Response = client.execute(request, localContext);
            HttpEntity entity = Response.getEntity();
            int statusCode = Response.getStatusLine().getStatusCode();
            Log.i(TAG, "" + statusCode);

            Log.i(TAG, "------------------------------------------------");

            if (entity != null) {
                Log.i(TAG,
                        "Response content length:" + entity.getContentLength());

            }
            List<Cookie> cookies = cookieStore.getCookies();
            for (int i = 0; i < cookies.size(); i++) {
                Log.i(TAG, "Local cookie: " + cookies.get(i));

            }

            try {
                InputStream in = (InputStream) entity.getContent();
                // Header contentEncoding =
                // Response.getFirstHeader("Content-Encoding");
                /*
                 * if (contentEncoding != null &&
                 * contentEncoding.getValue().equalsIgnoreCase("gzip")) { in =
                 * new GZIPInputStream(in); }
                 */
                BufferedReader reader = new BufferedReader(
                        new InputStreamReader(in));
                StringBuilder str = new StringBuilder();
                String line = null;
                while ((line = reader.readLine()) != null) {

                    Log.i(TAG, "" + str.append(line + "\n"));
                }
                in.close();
                response = str.toString();
                Log.i(TAG, "response" + response);
            } catch (IllegalStateException exc) {

                exc.printStackTrace();
            }

        } catch (Exception e) {

            Log.e("log_tag", "Error in http connection " + response);

        } finally {
            // When HttpClient instance is no longer needed,
            // shut down the connection manager to ensure
            // immediate deallocation of all system resources
            // client.getConnectionManager().shutdown();
        }

        return response;
    enter code here 
```

# android - Android - 基于同一类的多个片段

> ID：10738032
> 
> 赞同：2
> 
> 时间：2012-05-24T13:03:15.230
> 
> 标签：android, android-fragments

我正在开发一个 Android 应用程序，其中我需要在`FragmentActivity`. 目前，我的代码主要基于官方文档中的[这个示例](http://developer.android.com/resources/samples/Support4Demos/src/com/example/android/supportv4/app/FragmentTabsPager.html)，除了我为每个片段实例化相同的类：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.fragment_tabs_pager);
    mTabHost = (TabHost)findViewById(android.R.id.tabhost);
    mTabHost.setup();

    mViewPager = (ViewPager)findViewById(R.id.pager);

    mTabsAdapter = new TabsAdapter(this, mTabHost, mViewPager);

    mTabsAdapter.addTab(mTabHost.newTabSpec("tab1").setIndicator("Tab 1"), MyFragment.class, null);
    mTabsAdapter.addTab(mTabHost.newTabSpec("tab2").setIndicator("Tab 2"), MyFragment.class, null);
    mTabsAdapter.addTab(mTabHost.newTabSpec("tab3").setIndicator("Tab 3"), MyFragment.class, null);
    mTabsAdapter.addTab(mTabHost.newTabSpec("tab4").setIndicator("Tab 4"), MyFragment.class, null);

    if (savedInstanceState != null) {
        mTabHost.setCurrentTabByTag(savedInstanceState.getString("tab"));
    }
} 
```

这个类`MyFragment`很简单：

```
public class MyFragment extends Fragment {

    View v;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

        if (container == null) {
                return null;
        }

        v = inflater.inflate(R.layout.test, container, false);
        return v;
    }
} 
```

我将 Fragment 类膨胀的布局简化为一个简单的 TextView：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">

<TextView
    android:id="@+id/test_textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/some_default_value"
    android:textAppearance="?android:attr/textAppearanceLarge" />

</LinearLayout> 
```

所以，问题是，我希望能够`test_textView1`在每个片段被实例化**后分别修改它们的值。**我的问题是我无法访问片段布局的元素。我不能直接使用该`findViewById()`方法，因为它会影响所有片段。在`TabsAdapter`类中，我尝试访问单个片段，然后通过执行以下操作访问其视图：

```
getItem(number).getView(); 
```

但它返回`null`。（`getItem()`返回正确的片段但`getView()`返回 null）。

我也阅读[了这个解决方案](https://stackoverflow.com/questions/6495898/findviewbyid-in-fragment-android)，但是如果我在我的中声明一个 TextView `Fragment`，添加一个方法`setTextView(String s)`并从中调用它`FragmentActivity`会生成一个 NullPointerException。

那么，有没有一种特定的方法可以单独访问我的片段中的布局项？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T13:07:00.983

如果您有片段：frag1、frag2、frag3 等，您可以使用 frag1.getView().findViewById() 将范围限制为该片段，因为每个片段都扩展同一个类。

例子：

```
TextView frag1text = (TextView)frag1.getView().findViewById(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T13:06:47.413

在你的片段的 onCreateView 中记得保存一个指向视图的指针。然后你总是可以说 myPointer.findViewById(); 为了获得您的视图的子项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T13:32:39.933

好的，最后我重新开始，并以此为基础编写了代码[，](https://stackoverflow.com/questions/7263291/viewpager-pageradapter-not-updating-the-view)并且成功了。

# hibernate - Hibernate - 接受查询中的重复项

> ID：10738036
> 
> 赞同：1
> 
> 时间：2012-05-24T13:03:26.330
> 
> 标签：hibernate

我有一个休眠查询，它可以并且确实从旧数据中返回重复的行。有没有一种方法可以告诉休眠接受重复的行而不必创建某种伪键？

这是我的 hbm 的样子：

```
<hibernate-mapping package="mycompany.cms.domain">

    <class name="mycompany.cms.domain.DelDeadline" table="cms.del_deadlines">
        <id column="nid"                     name="nid"/>
        <property column="deadline_type"     name="deadline_type"/>
        <property column="del_run_date"      name="del_run_date"/>
        <property column="deadline_day"      name="deadline_day"/>
        <property column="deadline_time"     name="deadline_time"/>
    </class>

    <query name="DelDeadline.getAll">
            <![CDATA[from mycompany.cms.domain.DelDeadline]]>
    </query>
</hibernate-mapping> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T06:14:54.567

正如 JB Nizet 所说，Hibernate 需要一个唯一的 ID。你可以将所有列映射为一个大的compositeId，然后你会得到不同的结果，但nid可能会被复制

# html - 如何在 html 中包含 html 文件

> ID：10738039
> 
> 赞同：-2
> 
> 时间：2012-05-24T13:03:31.253
> 
> 标签：html

我试图在我的 index.htm 文件中放置一个 footer.htm，但到目前为止我还不能。这是我的代码。

索引.htm

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title></title>
</head>
<body>
<p>This is my index page!</p>
<!--#include virtual="footer.htm" -->

<!--#include file="footer.htm" -->

</body>
</html> 
```

页脚.htm

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title></title>
</head>
<body>
<p>This is my footer</p>
</body>
</html> 
```

我已经在 Visual Studio 2010 内置 Web 服务器中尝试过，我也通过 apache 尝试过，但没有任何运气。请注意，我正在 html5 中尝试

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T13:04:53.100

您正在使用[服务器端包含](http://bignosebird.com/ssi.shtml)语法。您需要配置您的网络服务器来处理 SSI 指令的 HTML 文档。

Apache 手册中有[配置 SSI的指南。](http://httpd.apache.org/docs/2.0/howto/ssi.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T13:07:16.820

对于 SSI，该语法看起来是正确的。也许你应该检查：

您的网络主机支持 SSI 文件名正确（即 htm 而不是 html。）

# javascript - 没有标题栏但保留关闭按钮的 jQuery UI 对话框

> ID：10738043
> 
> 赞同：12
> 
> 时间：2012-05-24T13:03:40.970
> 
> 标签：javascript, jquery, jquery-ui, dialog

我想删除 jQuery 对话框的标题栏。但我想将关闭（交叉）按钮保留在那里。

我发现了这个问题：

[jquery UI 对话框：如何在没有标题栏的情况下进行初始化？](https://stackoverflow.com/questions/1023072/jquery-ui-dialog-how-to-initialize-without-a-title-bar)

那里的答案解释了如何删除标题栏，但如果我这样做，它也会删除关闭按钮。还有其他链接，但它们都一样。他们只是隐藏了整个标题栏以及关闭按钮。

### 是否有任何解决方案可以在保留关闭按钮的同时隐藏标题栏？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T07:21:47.687

使用它来删除 jQuery 对话框的标题栏而不是关闭按钮

```
 $(function() {
    $( "#dialog" ).dialog();
    $("#ui-dialog-title-dialog").hide();
    $(".ui-dialog-titlebar").removeClass('ui-widget-header');
 }); 
```

对于较新版本的 jquery UI > 1.10.3

```
$("#dialog .ui-dialog-titlebar").css({ 
     "background-color" : "transparent", 
     "border" : "0px none" 
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T10:52:13.930

这也有效

```
$(function() {
$( "#dialog" ).dialog();
$(".ui-dialog-titlebar").removeClass('ui-widget-header');
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T15:28:36.717

您可以使用上述技术删除带有关闭图标的栏，然后自己添加一个关闭图标。

CSS：

```
.CloseButton {
background: url('../icons/close-button.png');   
width:15px;
height:15px;
border: 0px solid white;
top:0;
right:0;
position:absolute;
cursor: pointer;
z-index:999;
} 
```

HTML：

```
var closeDiv = document.createElement("div");
closeDiv.className = "CloseButton"; 
```

//将此div附加到包含您的内容的div

JS：

```
 $(closeDiv).click(function () {
         $("yourDialogContent").dialog('close');
     }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-08T09:30:34.493

我认为最简单和最强大的解决方案（这里的其他解决方案不适用于 1.10.3，因为他们假设事情会发生变化”）是直接为其设置您期望它具有的 CSS 样式。

```
$("#dialog .ui-dialog-titlebar").css({ 
     "background-color" : "transparent", 
     "border" : "0px none" 
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-31T20:39:03.480

我在这里尝试了其他建议更改`background-color`属性但没有帮助的解决方案。我的解决方案是将`background`属性更改为透明。

`.ui-dialog-titlebar { background: transparent; border: 0 none; }`

# java - JSTL / EL 相当于测试 null 和列表大小？

> ID：10738044
> 
> 赞同：5
> 
> 时间：2012-05-24T13:03:42.267
> 
> 标签：java, jsp, jakarta-ee, jstl, el

> **可能重复：**
> [评估空或空 JSTL c 标记](https://stackoverflow.com/questions/2811626/evaluate-empty-or-null-jstl-c-tags)

我正在将 scriptlet 重构为 JSTL 和 EL，我想知道如何在 JSTL / EL 中编写以下内容：

```
if(sokandeList != null && sokandeList.size() > 0) { %>
... 
```

我不知道如何测试 null 并且 AFAIK EL 只能在这种情况下访问 getter，所以我必须向 sokandeList 类添加一个方法 getSize() 。正确的？JSTL / EL 表达式应该是什么样的？谢谢你的帮助

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-24T13:08:52.133

使用`empty`关键字，它检查空值和空值。

```
<c:if test="${not empty sokandeList}">
    ...
</c:if> 
```

请注意，当您的意图是使用 then 遍历列表`<c:forEach>`时，最好知道当提供`items`的是`empty`. 如果`<c:forEach>`直接被这个检查包围，那么这个检查完全是多余的。

### 也可以看看：

*   [Java EE 6 教程 - EL 中的运算符](http://docs.oracle.com/javaee/6/tutorial/doc/bnaik.html)
*   [Java EE 6 教程 - EL 表达式示例](http://docs.oracle.com/javaee/6/tutorial/doc/bnaim.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T13:07:22.107

这是一种方法：

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn" %>
<c:if test="${fn:length(sokandeList) > 0}"> 
```

我认为您也可以使用它：

```
<c:if test="${!empty myObject.sokandeList}"> 
```

[很棒的 JSTL 备忘单](http://ndpsoftware.com/JSPXMLCheatSheet.html)

# java - 切换 maven 版本 - mvn 命令未绑定

> ID：10738046
> 
> 赞同：1
> 
> 时间：2012-05-24T13:04:09.467
> 
> 标签：java, linux, shell, maven

我正在尝试使用以下命令将 maven 从 2 切换到 3（在 Linux 上）：

```
sudo update-alternatives --set mvn /path/to/maven3/bin/mvn 
```

无论如何`mvn -v`仍然给出版本2，所以我总是必须执行`/path/to/maven3/bin/mvn`才能使用maven。如何将 mvn 命令重新绑定到适当的 maven 路径？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-25T15:15:34.197

跑：

```
sudo update-alternatives --config mvn 
```

然后选择您要使用的版本。

还要检查比`which mvn`符号链接`/etc/alternatives/mvn`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T13:09:35.700

`which mvn`

然后重新创建符号链接以指向新的 Maven 版本。并验证环境变量是否`MAVEN_HOME`指向正确的目录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-16T06:13:26.110

将系统属性 M2_HOME 设置为 Maven 主页的路径。

# php - 数据库查询不同的结果

> ID：10738050
> 
> 赞同：0
> 
> 时间：2012-05-24T13:04:18.163
> 
> 标签：php, mysql, magento

我在编辑我的 Magento 商店时遇到了一个新问题。这个问题与 PHP 和 MySQL 相关，与 Magento 无关，因为我尝试使用处理数据库的原始 PHP 代码，而不是 Magento 处理程序和帮助程序。

```
$a = "Tapet colectia Alice Whow C";

$sql = "
  SELECT *
  FROM `catalog_product_entity_varchar`
  WHERE `value` LIKE '%".$a."%'
  LIMIT 0, 30
"; 
```

当我搜索`$a`变量时，我得到 0 个结果，但是当我搜索变量的 value`Tapet colectia Alice Whow C`时，我得到了想要的结果。

为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T14:19:28.207

所以你正在调用 Magento 数据库，对吧？好吧，这就是我通常的做法：

```
require_once '/path/to/app/Mage.php';
Mage::app();

$db = Mage::getSingleton('core/resource')->getConnection('core_read');
$a = 'Tapet colectia Alice Whow C';
$select = $db->select()
             ->from('catalog_product_entity_varchar')
             ->where($db->quoteIdentifier('value') . ' LIKE ?', "%{$a}%");
$result = $db->fetchAll($select);
echo count($result); 
```

# java - JavaFX PieChart 的问题

> ID：10738052
> 
> 赞同：2
> 
> 时间：2012-05-24T13:04:19.193
> 
> 标签：java, javafx-2

我有一个带有复选框和 2 个动画图表的应用程序：饼图和条形图。选中复选框时，将触发向图表添加新数据的方法。当 checkBox * *un* *checked 时，会触发从图表中删除数据的方法。

当我单击复选框不是很快时，一切都很好。但是，如果我在动画完成之前再次单击复选框，我会收到一个错误：

```
 java.lang.NullPointerException
at javafx.scene.chart.PieChart$7.handle(PieChart.java:370)
at javafx.scene.chart.PieChart$7.handle(PieChart.java:367)
at   com.sun.scenario.animation.shared.TimelineClipCore.visitKeyFrame(TimelineClipCore.java:217)
at com.sun.scenario.animation.shared.TimelineClipCore.playTo(TimelineClipCore.java:158)
at javafx.animation.Timeline.impl_playTo(Timeline.java:182)
at com.sun.scenario.animation.shared.SingleLoopClipEnvelope.timePulse(SingleLoopClipEnvelope.java:119)
at javafx.animation.Animation.impl_timePulse(Animation.java:953)
at com.sun.scenario.animation.shared.AnimationPulseReceiver.timePulse(AnimationPulseReceiver.java:117)
at com.sun.scenario.animation.AbstractMasterTimer.timePulseImpl(AbstractMasterTimer.java:366)
at com.sun.scenario.animation.AbstractMasterTimer$MainLoop.run(AbstractMasterTimer.java:289)
at com.sun.javafx.tk.quantum.QuantumToolkit.pulse(QuantumToolkit.java:454)
at com.sun.javafx.tk.quantum.QuantumToolkit$8.run(QuantumToolkit.java:325)
at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
at com.sun.glass.ui.win.WinApplication.access$100(WinApplication.java:29)
at com.sun.glass.ui.win.WinApplication$2$1.run(WinApplication.java:62)
at java.lang.Thread.run(Unknown Source) 
```

而这一切都只发生在饼图上。条形图正常工作。

这是checkBox onAction事件的方法：

```
 public void OnCheckFired(ActionEvent event) {
    Boolean b = checkBox.isSelected();
    chart.modifyChart(currentChart,b);
} 
```

Thant 是用于修改饼图的代码：

```
@Override
public void makeModifications(Chart chart, Boolean b) {
    PieChart pie = (PieChart) chart;
    ObservableList<PieChart.Data> pieChartData = pie.getData();
    pieChartData = modify(b, pieChartData);
    pie.setData(pieChartData);
}

private ObservableList<Data> modify(Boolean b, ObservableList<PieChart.Data> pieChartData)  {
    if (b) {
        pieChartData.add(new PieChart.Data("newValue", 34));
    } else {
        int size = pieChartData.size() - 1;
        pieChartData.remove(size);
    }
    return pieChartData;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T15:58:29.447

不幸的是，你发现了一个错误。我已将其归档为[http://javafx-jira.kenai.com/browse/RT-21783](http://javafx-jira.kenai.com/browse/RT-21783)

同时，作为一种解决方法，您可以在每次单击后禁用复选框一秒钟。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T17:02:30.943

我已经修改了附加到 Sergey 在他的回答中提到的错误问题的代码。将按钮替换为在播放动画时禁用的复选框，并在动画完成时额外半秒。每次选择更改时，它都会以这种方式运行。

```
public class Tdesst extends Application {

    private void init(Stage primaryStage) {
        VBox root = new VBox();
        Scene scene = new Scene(root);
        primaryStage.setScene(scene);
        final ObservableList<PieChart.Data> pieChartData = FXCollections.observableArrayList(
                new PieChart.Data("Sun", 20),
                new PieChart.Data("IBM", 12),
                new PieChart.Data("HP", 25),
                new PieChart.Data("Dell", 22),
                new PieChart.Data("Apple", 30));
        final PieChart chart = new PieChart(pieChartData);

        final CheckBox chkbox = new CheckBox("add/remove data");

        final Timeline animation = new Timeline(
                new KeyFrame(Duration.seconds(.5),
                new EventHandler<ActionEvent>() {
                    @Override public void handle(ActionEvent actionEvent) {
                        chkbox.setDisable(false);
                    }
                }));
        animation.setCycleCount(1);

        chkbox.selectedProperty().addListener(new ChangeListener<Boolean>() {

            @Override
            public void changed(ObservableValue<? extends Boolean> arg0, Boolean oldVal, Boolean newVal) {
                chkbox.setDisable(true);
                if (newVal) {
                    pieChartData.add(new PieChart.Data("newValue", 34));
                } else {
                    pieChartData.remove(pieChartData.size() - 1);
                }
                animation.play();
            }
        });

        root.getChildren().add(chart);
        root.getChildren().add(chkbox);
    }

    @Override
    public void start(Stage primaryStage) throws Exception {
        init(primaryStage);
        primaryStage.show();
        primaryStage.setTitle(VersionInfo.getRuntimeVersion());
    }

    public static void main(String[] args) {
        launch(args);
    }
} 
```

或者你可以完全禁用动画

```
chart.setAnimated(false); 
```

# ios - 美国以外的行政区、子行政区等的名称是什么？

> ID：10738058
> 
> 赞同：1
> 
> 时间：2012-05-24T13:04:36.430
> 
> 标签：ios, google-maps, reverse-geocoding, clgeocoder

我正在开发具有地理意识的高分服务器，并希望能够列出诸如“达奇斯县第一名”或“纽约州第三名”之类的分数。我可以对用户的位置进行反向地理编码并获得一个列出管理区域等的地标。

对于上述示例，iOS 和 Google 使用的反向地理编码器将返回“Dutchess”和“New York”，因此我需要为美国提供“County”和“State”。

但是，游戏是全球性的，所以我需要知道其他英语国家的每个地理组织级别的名称。

因此，在美国，Google / iOS 地标级别将描述如下：

行政区 = “州”

SubAdministrativeArea =“县”（或路易斯安那州的“教区”）

地点 =“城市”或“城镇”

Sublocality =（我称其为“社区”）

PostalCode = "邮政编码"

在其他英语国家，所有这些级别都被称为什么？（加拿大、英国、澳大利亚、新西兰、新加坡等）。如果有列出所有这些的资源，我很想知道。我想我可能只是不知道在网上搜索什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T14:17:01.397

我不完全确定这个练习的努力/价值比。这可能会变得相当困难，尤其是在英格兰的单一权力区域。

在英国的大部分地区，
`country`是“英国”[即**国家名称**]
`administrative_area_level_1`可能是“英格兰”或“苏格兰”等[即**国家名称**]
`administrative_area_level_2`可能是“东萨塞克斯”[**县**]
`locality`可能是“Hailsham”[**城镇**]
`postal_code`是**邮政编码**

但是在伦敦，
`administrative_area_level_2`不是县的
`administrative_area_level_2`“伦敦”可能是“大伦敦”，也
`administrative_area_level_3`可能是“刘易舍姆的伦敦自治市”[耶！**自治市镇**有意义]
`locality`是“伦敦”，这不是一个地方

在英格兰的单一权力区域，
`administrative_area_level_2`可能是“梅德韦”
单一权力机构取代县议会和自治市镇/区议会，但它们位于大多数人通常使用的“礼仪县”内。梅德韦议会辖区的地方在肯特。不幸的是，地理编码器不会返回这些县名。一些县（例如伯克希尔）被完全废除并完全由单一当局取代。然而，旧县名（肯特或伯克希尔）是正确的名称。

# mysql - 将文本加载到mysql

> ID：10738060
> 
> 赞同：-1
> 
> 时间：2012-05-24T13:04:50.097
> 
> 标签：mysql

我在 MySQL 5 中工作时遇到问题，当我想从文本输入文件将数据加载到表中时，我收到以下消息： `Unknown database n`

我的输入是：

```
Sim cat male    \n
rim dog female  \n
kin fog male    \n 
```

我的 SQL 代码是

```
LOAD DATA LOCAL INFILE 'D/pet.txt' INTO TABLE pet
-> LINES TERMINATED BY '\r\n'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T13:32:41.237

如果没有[`USE database_name;`](http://dev.mysql.com/doc/refman/5.0/en/use.html)先查询，MySQL 不知道要在哪个数据库中查找`pet`表。

# android - 使用edittext和按钮从android eclipse消费Web服务

> ID：10738061
> 
> 赞同：2
> 
> 时间：2012-05-24T13:04:51.493
> 
> 标签：android, eclipse, web-services

我更倾向于 android.Right 现在我正在通过**SOAP**方法在 android eclipse 中使用 Web 服务。所以我创建了两个页面。第一页由一个 edittext 和一个按钮组成，第二页只由一个文本框组成。我正在创建与android eclipse 中的这个 web[服务 GetBibleWordsbyKeyWord完全一样的东西。](http://www.webservicex.net/ws/WSDetails.aspx?WSID=6&CATID=11)

在这里，我需要通过第一页上的编辑文本框从用户那里获取输入，并在第二页的文本框上显示适当的文本，这正是上述 Web 服务将根据用户的输入调用（显示）的内容。这些东西必须是单击第一页上的按钮时发生。

**注意：-** *我已经尝试过了。它正在运行。但它只在第二页显示空白页*

怎么做才能实现这个概念？

请找到我的代码以供参考

**Web 服务后端类**[DYNAMIC PROJECT]

```
public class GetStudentInformation {
    public String GetStudentInformation(String str){
        return(str);
    }
} 
```

**Android java类page1**

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Button next = (Button) findViewById(R.id.btn);
        next.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                Intent myIntent = new Intent(view.getContext(), Web_concept.class);
                startActivityForResult(myIntent, 0);
            }

        });
    }
} 
```

**Android java类page2**

```
@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main1);

            try
            {
                SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
                EditText num1 = (EditText) findViewById(R.id.editT);
                request.addProperty("str", Integer.valueOf(num1.getText().toString()));
                SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
                envelope.dotNet = true;
                envelope.setOutputSoapObject(request);
                HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
                androidHttpTransport.call(SOAP_ACTION,envelope);
                Object result = envelope.getResponse();
                System.out.println("Result : " + result.toString());
                ((TextView) findViewById (R.id.textView1)).setText(result.toString());
                } 
            catch (Exception E) {
                    E.printStackTrace();
                }
            }
       } 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T10:55:20.027

首先将您的输入更改为 Web 服务方法中定义的 Web 服务，即更改行`request.addProperty("str", Integer.valueOf(num1.getText().toString()));`

如 `request.addProperty("str", num1.getText().toString());` 您`str`在您的**`webmethod`**

第二件事改变`Object result = envelope.getResponse();`

到`Object result = envelope.bodyIn;`

请在互联网上查看如何访问`textView`第一页中的第二页。我不确定。可能是不可能的。

# python - Python 看不到我的子包

> ID：10738064
> 
> 赞同：2
> 
> 时间：2012-05-24T13:04:56.220
> 
> 标签：python, module, package

如果我想使用它们，为什么我必须导入所有子包？
我将用一个例子来解释自己：

```
In [1]: import cime

In [2]: cime.runners
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
/home/miki/testit/<ipython-input-2-35e09c66121a> in <module>()
----> 1 cime.runners

AttributeError: 'module' object has no attribute 'runners'

In [3]: import cime.runners

In [4]: cime.runners
Out[4]: <module 'cime.runners' from '/home/miki/testit/venv/lib/python2.7/site-packages/cime/runners/__init__.pyc'> 
```

如您所见，它是一个普通的 Python 包：

```
In [5]: cime.__file__
Out[5]: '/home/miki/testit/venv/lib/python2.7/site-packages/cime/__init__.pyc'

In [6]: ls /home/miki/testit/venv/lib/python2.7/site-packages/cime
download.py   __init__.py   log.py   runners/  run.pyc   utils.pyc
download.pyc  __init__.pyc  log.pyc  run.py    utils.py 
```

但这不会发生在内置模块中。为什么？

```
In [7]: import os  # instead of import os.path

In [8]: os.path
Out[8]: <module 'posixpath' from '/home/miki/testit/venv/lib/python2.7/posixpath.pyc'> 
```

谢谢，
魔方

PS我在一个virtualenv中，但我不知道这是否重要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T13:07:10.447

这是`cime`（无论是什么）开发人员的设计决策。一个包不会神奇地导入它的所有子包。这是一件好事，因为否则像 SciPy 这样的大包需要永远导入（就像 NLTK 一样）。

一些包，如`os.path`NumPy 和 NLTK 会导入子模块，但它们会明确地这样做。如果您希望这发生在您自己的模块中，请执行

```
# __init__.py
import .submodule 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T13:06:38.737

`os.path`是与实现细节相关的异常。Python 对于它会做多少工作通常是保守的，所以它只导入你实际需要的模块。因为实际的实现`os.path`很大程度上取决于你的操作系统，python 会计算出你需要的实现，并`os.path`在 python 启动时导入它。

如果你想要的话，你可以通过添加一些额外的导入来获得非常相似的效果`cime/__init__.py`

```
from cime import runners 
```

等等。

# c# - 共享点 2007 中的 ULS 日志

> ID：10738067
> 
> 赞同：3
> 
> 时间：2012-05-24T13:05:02.010
> 
> 标签：c#, .net, sharepoint, logging, sharepoint-2007

有没有办法从 wss 或 moss 中的场中的所有服务器获取 ULS 日志。我需要使用 C# 以编程方式获取日志。我可以从场中的一台服务器获取日志，但我需要所有这些。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T13:14:28.790

您可以使用 ULS 查看器： [http ://ulsviewer.codeplex.com/](http://ulsviewer.codeplex.com/)

或者您可以使用编写自己的日志记录服务`SPDiagnosticsService`

[http://msdn.microsoft.com/en-us/library/gg512103.aspx](http://msdn.microsoft.com/en-us/library/gg512103.aspx)

从评论中编辑：

要直接读取文件，您可以执行以下操作：

```
 try 
    {
        // Create an instance of StreamReader to read from a file.
        // The using statement also closes the StreamReader.
        using (StreamReader sr = new StreamReader("FilePath:\\SharePointlogfile.uls")) 
        {
            string line;
            // Read and display lines from the file until the end of 
            // the file is reached.
            while ((line = sr.ReadLine()) != null) 
            {
                Console.WriteLine(line);
            }
        }
    }
    catch (Exception e) 
    {
        // Let the user know what went wrong.
        Console.WriteLine("The file could not be read:");
        Console.WriteLine(e.Message);
    } 
```

[http://msdn.microsoft.com/en-us/library/system.io.streamreader.aspx](http://msdn.microsoft.com/en-us/library/system.io.streamreader.aspx)

# facebook - 如何安全地将 Facebook ID 从客户端传递到服务器

> ID：10738068
> 
> 赞同：8
> 
> 时间：2012-05-24T13:05:04.387
> 
> 标签：facebook, authentication, facebook-c#-sdk

我有一个 Facebook 画布应用程序。我正在使用 JS SDK 在浏览器端对用户进行身份验证，并通过 FB.api 请求各种信息（例如姓名、朋友等）。

我还想通过 ajax 调用将一些额外的用户信息（不在 Facebook 上）保存到我服务器上的数据库中：

```
{ userFavouriteColour: "Red" } 
```

要将其保存在服务器上并与正确的用户关联，我需要知道 Facebook uid，这会带来问题。如何将 uid 从客户端传递到服务器。

**选项 1：将 uid 添加到 ajax 请求**：

```
{ uid: "1234567890",
  userFavouriteColour: "Red" } 
```

这显然不好。任何人使用别人的 Facebook ID 向我的网络服务发出 ajax 请求并更改他们最喜欢的颜色都是微不足道的。

**选项 2：在服务器上，从 cookie 中提取 uid**：这甚至可能吗？我读到 Facebook 设置了一个包含 uid 和访问令牌的 cookie，但我可以访问我的域上的这个 cookie 吗？更重要的是，我可以*安全地*从 cookie 中提取 uid，还是像选项 1 一样对欺骗开放。

**选项 3：服务器上的用户服务器端身份验证**：我可以使用服务器端身份验证来验证服务器上的用户身份。但是，如果我已经在浏览器上使用客户端身份验证，这会起作用吗？我最终会得到两个不同的访问令牌吗？我想从浏览器发出 FB.api 请求，所以我需要客户端上的访问令牌（而不仅仅是服务器上）。

这一定是一个非常常见的场景，所以我认为我缺少一些基本的东西。我已经阅读了很多 Facebook 文档（各种身份验证流程、访问令牌、签名请求等）和许多关于 SO 的帖子，但我仍然不明白客户端身份验证和服务器端身份验证如何很好地结合在一起。

**简而言之，我想知道服务器上用户的身份，但仍然从客户端浏览器向 Facebook api 发出请求？**

（我在服务器上使用 ASP.NET 和 Facebook C# SDK）

**编辑**：增加赏金。我希望得到一个关于如何处理这种情况的更权威的官方建议，甚至是一个例子。如前所述，我已经阅读了很多关于身份验证流程的官方 FB 文档，但我仍然找不到任何关于客户端和服务器端身份验证如何协同工作的明确信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T15:48:14.327

**选项1：** 我能想到的最简单的方法是在JS中包含accessToken并通过ajax调用传递它。

**选项 2：** 使用与选项 1 相同的方法，但不是仅发送 accessToken，而是发送 signedRequest。

在服务器端，您可以使用（`TryParseSignedRequest`方法）对其进行解码，这将为您提供`UserID`:-)

注意：`signedRequest`使用应用程序 Secret 加密。**你是唯一应该知道的人，所以你在这方面是安全的。**

免责声明：

我没有 C# 编码经验，但在 google 中的一些搜索给了我这个：

[适用于 ASP.NET 的 Facebook C# SDK](http://csharpsdk.org/docs/web/)

[使用 Facebook C# SDK 发出 AJAX 请求](http://csharpsdk.org/docs/web/ajax-requests)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T10:51:42.720

其实很简单。

当用户加载您的应用程序时，使用[服务器端身份验证](http://developers.facebook.com/docs/authentication/server-side/)，获取访问令牌并通过从服务器发出 api 请求来加载用户数据。
在服务器端，您将拥有所需的一切，并且它是沙盒的。

当页面为用户呈现时，使用[js sdk](http://developers.facebook.com/docs/reference/javascript/)获取用户身份验证数据，您应该能够使用[FB.getLoginStatus](http://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/)，因为用户已经通过了服务器端身份验证。
现在在客户端，您还有一个访问令牌，您可以使用它从图形 api 获取用户数据。

这两个令牌会有所不同，并且也会有不同的到期时间，但这应该不是问题，两个令牌都应该像您期望的那样正常工作。
由于双方都有自己的令牌和向 api 发出请求的方式，因此无需在它们之间发送任何 fb 数据。

所以你提到的第三个选项，对我来说，听起来是最好的，而且实现起来也很简单。

* * *

# 编辑

所有 facebook SDK 都只是 http 请求的包装器，因为整个 fb api 都是基于 http 请求的。
SDK 只是让您可以轻松、更短地访问数据，而无需自己构建 url（使用所有不同的可能参数）、发出请求并解析响应。

老实说，我认为停止为 C# SDK 提供支持服务器端身份验证的方法是一个非常糟糕的决定。
提供一个不实现整个 api 的 SDK 有什么意义？

根据我的经验，对您的问题的最佳答案是同时使用服务器端和客户端身份验证，并且由于 C# SDK 不支持它，我对您的建议是创建自己的 SDK。
它一点也不复杂，我已经为 python 和 java 实现了它（两次），并且由于您将根据自己的需要开发它，因此它可以根据您的确切需求进行定制，这与应该支持所有可能选项的公共 SDK 不同。

* * *

# 第二次编辑

无需创建全新的 SDK，您只需“扩展”您正在使用的 SDK 并添加您需要的缺失部分，例如服务器端身份验证支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T15:29:38.330

我最近有完全相同的问题。这是选项 2。查看Facebook 博客中的[这篇](https://developers.facebook.com/blog/post/534/)文章。

老实说，我还不足以知道您是否可以在 cookie 中欺骗 UID，但这似乎是“官方”的做法。

编辑：对于选项 2 下的另一个问题，是的，我相信您必须在您的域上访问此 cookie。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T13:12:56.043

我不知道它是否是特定于语言的，但同时使用服务器端和客户端身份验证并没有什么害处。

您可以使用选项 2，但是是的，这也容易受到欺骗。

执行选项 3，您将拥有该用户会话的单个访问令牌，因此根据我的说法，这将是最佳选择，因为在从客户端传递用户信息时，您总是有机会进行欺骗。

# iphone - 如何在iphone中的应用程序之间共享数据

> ID：10738069
> 
> 赞同：2
> 
> 时间：2012-05-24T13:05:06.103
> 
> 标签：iphone, xcode, sqlite

我创建了一个应用程序。这是另一个应用程序的更新。启动第二个应用程序时，我必须使用第一个应用程序的数据。我怎样才能做到这一点？我的数据库文件具有相同的名称。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T13:07:22.183

iPhone 应用程序是沙盒的。您无法访问任何其他应用程序的文档文件夹。甚至不是你自己的。您可以在应用程序之间共享钥匙串，也可以使用参数或文档打开其他应用程序。就是这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T16:02:25.113

除了前面提到的 keychain 共享： [如何在 iOS 应用程序之间共享 keychain 数据](https://stackoverflow.com/questions/4115744/how-to-share-keychain-data-between-ios-applications) ，如果涉及到服务器，则可以使用服务器作为中介，在两个沙箱之间交换信息。

也可以让一个应用程序通过注册的 mime 类型将另一个文件发送到另一个应用程序（尽管这会导致从一个沙箱复制到另一个）： [如何将文件类型与 iPhone 应用程序关联？](https://stackoverflow.com/questions/2774343/how-do-i-associate-file-types-with-an-iphone-application)

您还可以通过 URL 处理程序共享信息。 [http://mobileorchard.com/apple-approved-iphone-inter-process-communication/](http://mobileorchard.com/apple-approved-iphone-inter-process-communication/)

# xml - 如何在保持其他列表框数据对齐的同时对列表框中的项目进行排序？

> ID：10738072
> 
> 赞同：-1
> 
> 时间：2012-05-24T13:05:22.150
> 
> 标签：xml, vb.net, arrays, sorting, listbox

我有这个 XML 文件，我从中获取所有数据：

```
<?xml version="1.0" encoding="utf-8"?>
<Tabel>
  <Member>
    <Naam>Cruciatum</Naam>
    <Kills>10</Kills>
    <Deaths>2</Deaths>
    <Score>2222</Score>
  </Member>
  <Member>
    <Naam>test</Naam>
    <Kills>123</Kills>
    <Deaths>12</Deaths>
    <Score>12222</Score>
  </Member>
  <Member>
    <Naam>test2</Naam>
    <Kills>159</Kills>
    <Deaths>12</Deaths>
    <Score>2222</Score>
  </Member>
  <Member>
    <Naam>test3</Naam>
    <Kills>159</Kills>
    <Deaths>122</Deaths>
    <Score>222284</Score>
  </Member>
  <Member>
    <Naam>test4</Naam>
    <Kills>15</Kills>
    <Deaths>1229</Deaths>
    <Score>129453</Score>
  </Member>
</Tabel> 
```

我把它全部显示在 5 个不同的列表框中（“成员”下的每个子节点 1 个）。

我有以下代码可以做到这一点。

```
Public Class Rank
    Dim memberNodes As XmlNodeList
    Dim memberNode As XmlNode
    Dim x As Short
    Dim dataNodes As XmlNodeList
    Dim firstinrow As Boolean
    Dim datalist(5) As String
    Dim y As Short

    Private Sub Rank_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
        lstView.Items.Clear()
        x = 0
        Dim doc As New XmlDocument()
        doc.Load("C:\Members.xml")
        memberNodes = doc.GetElementsByTagName("Member")
        For Each memberNode In memberNodes
            dataNodes = memberNode.ChildNodes
            y = 1
            For Each dataNode As XmlNode In dataNodes
                datalist(y) = dataNode.InnerText
                datalist(0) = (x + 1).ToString
                y += 1
            Next
            datalist(5) = datalist(4)
            datalist(4) = FormatNumber((datalist(2) / datalist(3)), 3)
            Dim lvi As New ListViewItem(datalist)
            lstView.Items.Add(lvi)
            x += 1
        Next

    End Sub
End Class 
```

该代码目前运行良好，显示完整列表。但是现在我需要按列表视图的 Score 列中的值排序的所有数据，因此在以下示例中： ![到目前为止的结果](../Images/9cf5fca81a23c4dfbd5e1d308ad21f56.png)

我需要第一行说：“1 test3 159 122 1.303 222284”

第二行得分第二名等。

**更新：** 按照@SteveDog 的建议，我现在使用 1 个列表视图，而不是单独的列表框

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T13:11:35.200

使用 View 属性设置为 Details 的 ListView 控件或使用 DataGridView 控件，而不是单独的列表框。如果您必须使用类似的单独列表框，则需要在每个类上实现 IComparable 接口以覆盖排序。

诚然，在 ListView 控件中排序有点痛苦。让它如此灵活很好，但是当你想做的只是一个简单的排序时，它会很痛苦。首先，您需要创建一个实现 IComparer 接口的排序器对象。例如：

```
Public Class ScoreSorter
    Implements IComparer

    Public Function Compare(ByVal x As Object, ByVal y As Object) As Integer Implements IComparer.Compare
        Try
            Dim xItem As ListViewItem = CType(x, ListViewItem)
            Dim yItem As ListViewItem = CType(y, ListViewItem)
            Dim xInt As Integer = Integer.Parse(xItem.SubItems(5).Text)
            Dim yInt As Integer = Integer.Parse(yItem.SubItems(5).Text)
            Return yInt - xInt
        Catch
            Return 0
        End Try
    End Function
End Class 
```

然后需要将ListView控件的ListViewItemSorter属性设置为一个新的sorter对象实例，然后告诉它进行排序，如：

```
ListView1.ListViewItemSorter = New ScoreSorter()
ListView1.Sort() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T13:14:58.543

试试这个（未测试）：

```
Dim sortedNodes = memberNodes.OrderBy(Function(n) n.ChildNodes(3))
For Each memberNode In sortedNodes
   ...
Next 
```

您将需要一个`Imports System.Linq`.

# javascript - Socket.io + PhoneGap

> ID：10738073
> 
> 赞同：22
> 
> 时间：2012-05-24T13:05:25.260
> 
> 标签：javascript, node.js, cordova, socket.io

当我尝试将[Socket.IO](https://socket.io/)与[PhoneGap](https://phonegap.com/)一起使用时，我收到此错误：

（在应该支持 socket.io 的 iOS 上）

> Access-Control-Allow-Origin 不允许 Origin null。

这是因为我的应用程序是通过`file://`协议提供的。我能做些什么来解决这个问题？

谢谢！！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-04T18:48:29.150

您必须将 socketio 主机添加到 PhoneGap.plist 中的“ExternalHosts”键。

见[常见问题](http://wiki.phonegap.com/w/page/41631150/PhoneGap%20for%20iOS%20FAQ)：

> 问：无法加载来自外部主机的链接和导入文件？
> 
> A. 最新代码新增白名单功能。如果您引用外部主机，则必须在“ExternalHosts”键下的 PhoneGap.plist 中添加主机。通配符没问题。因此，如果您要连接到“ [http://phonegap.com](http://phonegap.com) ”，则必须将“phonegap.com”添加到列表中（或使用通配符“*.phonegap.com”，它也将匹配子域）。（注意：如果您在 Xcode 中打开 plist 文件，则无需摆弄 XML 语法。）

对于 android，您必须编辑 cordova.xml 并添加对 socketio 主机的访问权限：

```
<access origin="HOST*"/> 
```

* * *

index.html（带有 socketio 示例）：

```
...
<script src="HOST/socket.io/socket.io.js"></script>
<script>
    var socket = io.connect('HOST');
    socket.on('news', function (data) {
        socket.emit('my other event', { my: 'data' });
    });
</script>
... 
```

* * *

app.js（服务器端 javascript / 基本 socketio 示例）：

```
var io = require('socket.io').listen(80);

io.sockets.on('connection', function (socket) {

socket.emit('news', { hello: 'world' });
    socket.on('my other event', function (data) {
        console.log(data);
    });
}); 
```

* * *

您必须用 socket.io 服务器的主机名替换 HOST！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-24T13:33:24.887

使用 PhoneGap 使用*file://*协议打开网页

使用*file://*协议没有为 WebSocket 连接设置来源，因此如果服务器没有将*Access-Control-Allow-Origin标头设置为启用*[CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)的响应，浏览器将引发该安全异常

考虑使用一些像下面这样的PhoneGap插件，它使用本机代码来处理连接，但在webviews中启用（希望是标准兼容的）WebSocket API

安卓：[https ://github.com/anismiles/websocket-android-phonegap](https://github.com/anismiles/websocket-android-phonegap)

iPhone：[https ://github.com/remy/PhoneGap-Plugin-WebSocket](https://github.com/remy/PhoneGap-Plugin-WebSocket)

这些插件只是我发现的第一个，不确定它们的积极开发和稳定程度

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T04:38:15.577

因此，如果在 PhoneGap 中使用 file:// url 协议打开的网页是发送标头“Access-Control-Allow-Origin: *”——理论上它应该与 socket.io 一起使用？

（可以通过 NSURLProtocol 做到这一点，但我不想在不知道修复的情况下进入这个兔子洞）

# php - Youtube定时文本

> ID：10738074
> 
> 赞同：0
> 
> 时间：2012-05-24T13:05:28.863
> 
> 标签：php, youtube

我想从 youtube 获取视频的定时文本。下面提供了一个示例 URL。我想了解如何访问 php 中的定时文本。我已经推荐了[https://developers.google.com/youtube/2.0/reference](https://developers.google.com/youtube/2.0/reference)。但我不知道如何在 PHP 中访问它

例如考虑以下视频 [http://www.youtube.com/watch?v=lX16OrIVfeQ&feature=relmfu](http://www.youtube.com/watch?v=lX16OrIVfeQ&feature=relmfu)

# actionscript-3 - Flash As3 在线人数

> ID：10738079
> 
> 赞同：-1
> 
> 时间：2012-05-24T13:05:46.853
> 
> 标签：actionscript-3, flash, flash-cs5

我创建了一个想要用萤火虫填充的 Jar，具体取决于在线用户的数量。

我做了一点挖掘，发现了如何创建 XMLSocket。它有效，但我不知道如何获取有多少人在线的信息，而且它需要一个 CMD 窗口一直运行。

我发现的第二种方法是通过我在 Apache 服务器上运行的 PHP、MYSQL 女巫，但是我发现的教程和脚本对我不起作用，[例如](http://www.shaddeen.com/posts/read/id-1326397267). 我没有创建所需的表。

我的问题是在您的页面/闪存文件上查找当前在线用户数的最简单方法是什么？有没有一种快速的方法可以在 Flash 中完成而不涉及 MYSQL 或 PHP？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T21:53:47.863

我让它工作了，但我不想通过它的 HTTP 地址链接 php 文件，而只是相对于 .swf 文件的路径（只是 myFile.php 或 path/myFile.php）。

```
AS3 file:

NewRequest = new URLRequest("numOnline.php");
var numberOfVisitors:int = 10;
var NewRequest:URLRequest;
var UrlLoader:URLLoader;

UrlLoader = new URLLoader();
UrlLoader.dataFormat = URLLoaderDataFormat.TEXT;
UrlLoader.addEventListener(Event.COMPLETE, onLoaded);
UrlLoader.load(NewRequest);

function onLoaded(e:Event):void {
    trace(e.target.data);
    numberOfVisitors = int(e.target.data);
} 
```

我将 As3 接收的文本转换为 int，因为我还不知道如何发送 veria

[.php 文件](http://www.shaddeen.com/posts/read/id-1326397267)

```
main PHP file (the file that as3 connects to):

<?php
include_once 'config.php'; //This file would contain the variables needed to connect to the database with $link, below
include_once 'functions.php'; //We include the functions we have created

$database = "online";

$link = mysql_connect($server, $db_user, $db_pass)or die ("Could not connect to mysql because ".mysql_error());
mysql_select_db($database)or die ("Could not select database because ".mysql_error());

usersOnline(5); //We call the usersOnline function with a time span of 5 minutes

showUsersOnline(1); //Show the number of users online, and the list of users

mysql_close($link);

?> 
```

函数文件发送在线访问者的数量`echo $count;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T21:13:14.767

是的，你可以在没有数据库（MYSQL）和 PHP 的情况下做到这一点；但是您仍然需要一个（媒体）服务器。如果您的“唯一”目的是计算连接客户端，我不会建议以下内容，但如果您有原因并且可以访问**Flash Media Server**，您可以尝试以下操作：

**在服务器端：**

1.  在 FMS 上创建一个应用程序（文件夹），在该文件夹中创建 main.asc 文件。
2.  在 main.asc 里面；创建一个（远程）[SharedObject（服务器端）](http://help.adobe.com/en_US/flashmediaserver/ssaslr/WS5b3ccc516d4fbf351e63e3d11a11afc95e-7e63SSASLR.html)（例如`users_so`：）
3.  注意在`application.onConnect`事件中连接客户。将每个连接客户端添加到此处理程序内的 SharedObject。
4.  `application.onDisconnect`还要注意在事件中断开客户端。从此处理程序内的 SharedObject 中删除每个断开连接的客户端。

**在客户端：**

1.  当应用程序在浏览器中加载时，将每个 Flash 客户端连接到 FMS（在 URI 中使用您的新应用程序文件夹路径）。
2.  注意`NetStatusEvent.NET_STATUS`事件和`"NetConnection.Connect.Success"`代码。连接时；创建一个[SharedObject（客户端）](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/SharedObject.html)并从服务器获取远程。
3.  将`SyncEvent.SYNC`事件侦听器添加到`SharedObject`. 当用户连接或断开与服务器的连接时，这将与每个 Flash 客户端同步。
4.  在同步事件处理程序中，从事件响应中获取并计算用户数。
5.  在您的 Flash 客户端上显示计数。

请参阅[Flash Media Server 4.5 的服务器端 ActionScript 语言参考](http://help.adobe.com/en_US/flashmediaserver/ssaslr/WS5b3ccc516d4fbf351e63e3d11a11afc95e-7edfSSASLR.html)，尤其是**应用程序类**。也很有用：[Flash Media Server 开发人员中心](http://www.adobe.com/devnet/flashmediaserver.html)

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T13:19:35.730

我不这么认为，flash player 必须需要一种方法来在服务器上“检查”在线用户的数量。最简单的方法是将 URLRequest（我希望我的类名正确）发送到服务器脚本，该脚本可以是 php 或 aspx（或任何服务器技术）脚本/页面。

该服务器脚本应返回站点拥有的用户数。

例如

```
var numberOfVisitors:Int = 0;

function onLoaded(e:Event):void {
    numberOfVisitors = e.target.data;

    // now print this 'numberOfVisitors' where you want to on the client
}

var numVisitors:URLLoader = new URLLoader();
numVisitors.addEventListener(Event.COMPLETE, onLoaded);
numVisitors.load(new URLRequest("num_users.php")); 
```

下一部分将是一个跟踪用户数量的 php 脚本（或任何其他服务器脚本）。我认为您应该将其作为另一个 SO 问题发布吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T13:12:57.300

不，没有一种简单的方法可以只在 Flash 中完成而不使用任何外部部件（PHP、MySQL、Java 等等......）。请记住，Flash 是在本地运行的，因此需要与 PHP 或类似的交互来与服务器交互，以告知服务器用户的活动并询问服务器其他用户的活动（在线用户数）。

如果您只想在线显示用户，我推荐您发布的示例中显示的方式。只需在用户看到活动时更新数据库，并在 x 分钟内没有看到任何活动时将该用户计为离线。除非您希望用户以任何方式相互交互，否则无需为此涉及 XMLSockets。

如果您想要的不仅仅是在线显示用户，我建议在 ActionScript 中使用 XMLSockets 并研究 PHP Sockets。

# javascript - 如何在 JavaScript 中正确使用模块模式？

> ID：10738084
> 
> 赞同：2
> 
> 时间：2012-05-24T13:05:58.490
> 
> 标签：javascript, oop, design-patterns

在我的公司，我们有一个调查框架来帮助利益相关者创建调查，我正在尝试创建一个可重复使用的对象，该对象将允许团队成员轻松设置调查的特定问题的宽度 - 它们有时可能有点压缩取决于答案的长度。我正在尝试结合使用模块和构造函数模式，但不确定我是否正确完成了它。有没有更好的方法来编写我的代码？

```
 var WidthIncreaser = (function(){
            return function (element, words, width) {

                var element = $(element);
                var re = new RegExp(words, 'gi');

                return {
                    init: function() {
                        if (element.text().match(re)) {
                            element.width(width);
                        }
                    }
                };
            };
        })();

        var tr = new WidthIncreaser('td.choicev-question:first', 'Applicable from the', 400);
        tr.init(); 
```

这个想法是，有人可以创建一个 WidthIncreaser 的新实例并传入一个元素，一个与问题文本匹配的字符串，因此它是正确的问题目标以及设置问题宽度的大小。

提前感谢您的建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T13:09:38.543

你是双重包装的东西。无论如何，我看到的通用模块模式只是一个返回带有闭包的对象的函数。

不需要`new`关键字，也不需要立即函数。当只创建一个对象并将其直接分配给一个变量时，通常使用立即函数。就您而言，您想制作“实例”。

```
var WidthIncreaser = function(element, words, width) {

    var element = $(element),
        re = new RegExp(words, 'gi');

    return {
        init: function() {
            if (element.text().match(re)) {
                element.width(width);
            }
        }
    };
};

var tr = WidthIncreaser('td.choicev-question:first', 'Applicable from the', 400);

tr.init();​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T13:12:17.567

我使用的模块模式通常如下所示：

```
var myModule = (function () {
    var myPrivateVar = 'foo';
    var myPrivateFunc = function () {
        console.log('bar');
    };

    return {
        myPublicFunc: function () {
            console.log(myPrivateVar);
        }
    };
}) (); 
```

然后它将像这样使用：

```
myModule.myPublicFunc(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T13:20:20.707

我认为您在这里实际上不需要“模块模式”。您可以利用闭包，仅此而已：

```
function WidthIncreaser(element, words, width) {
    element = $(element);
    var re = new RegExp(words, 'gi');

    this.init = function () {
        if (element.text().match(re)) {
            element.width(width);
        }
    }
}

var tr = new WidthIncreaser('td.choicev-question:first', 'Applicable from the', 400);

tr.init(); 
```

当然，在这种情况下您不需要必要`init`，因为您可以将所有内容都放在 ctor 中，但我认为这只是一个示例，也许您需要延迟初始化。

这样你就可以保留你的`prototype`链条，你的陈述如下：

tr instanceof WidthIncreaser // true

将起作用。

此外，您还可以填充`prototype`不需要访问作用域变量的方法，至少不需要直接访问：

WidthIncreaser.prototype.doSomething = function() { /* .. */ }

例如，如果你因为跨浏览限制而不能使用 getter 和 setter，你可以有这样的功能：

```
function WidthIncreaser(element, words, width) {
    element = $(element);
    var re = new RegExp(words, 'gi');

    this.element = function() { return element };

    this.init = function () {
        if (element.text().match(re)) {
            element.width(width);
        }
    }
}

WidthIncreaser.prototype.reset = function () {
    this.element().text("")
} 
```

所以基本上你可以从外部检索元素，但它是只读的，`WidthIncreaser`只能在实例化期间设置元素。

**编辑**：我复制并粘贴`init`了它当然不适用于与 的依赖关系`re`，因此这是说明该方法的一个坏例子。

# html - 为什么即使输入名称不同，Firefox 也会自动完成？

> ID：10738090
> 
> 赞同：17
> 
> 时间：2012-05-24T13:06:23.043
> 
> 标签：html, firefox, autocomplete

或者 Firefox 如何确定密码/用户名的去向？

如果我更改输入元素的名称、id、标题、类，Firefox 会不断用密码或电子邮件填充它。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-05-24T21:57:53.603

如果我正确理解了 Firefox 的源代码，浏览器首先会在表单中查找密码字段。如果表单包含超过 3 个密码字段，自动填充功能会忽略该表单。

找到 1 到 3 个密码字段后，浏览器会查找登录字段。浏览器从第一个密码字段开始向后搜索，并假设登录字段是类型为`text`or`email`或`url`or`tel`的第一个找到的字段`number`。

下一步取决于我们是否在页面加载或提交表单时检查表单。如果我们在页面加载期间检查并且有一个登录字段和一个密码字段，那么情况很简单，浏览器可以填写表格。

其他情况（表单提交或超过 1 个密码字段）执行一些“智能”逻辑来确定哪个密码字段包含新密码和哪个旧密码，可能是为了更新存储的密码）。如果您对细节感兴趣，请下载源代码并打开`toolkit/components/passwordmgr/nsLoginManager.js`文件。要检查的函数`_fillForm`是`_getFormFields`和`_getPasswordFields`。

总结一下，Firefox 不需要任何 ID、名称或类属性来猜测哪个字段是登录名或密码。它只依赖于类型和表单字段的顺序。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-07-16T17:12:00.270

我尝试了一个迄今为止有效的简单解决方案。创建 2 个隐藏字段，浏览器将自动填充这些字段。

```
<input type="text" style="display: none">
<input type="password" style="display: none"> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-11-23T08:30:03.177

看起来在登录和密码输入之间使用禁用的输入文本可以很好地解决问题：

```
<input type="text" disabled="disabled" style="display:none"> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-24T15:37:41.937

这些是表单上仅有的两个元素吗？Firefox 可能会存储表单的结构（两个输入框，一个标记为正常，一个标记为密码）并填写保存的信息，而不考虑输入元素的 ID。

试试这个：向表单添加一个额外的输入元素，看看会发生什么。要么 Firefox 不会填写任何内容，要么您会在第一个字段中找到您的姓名，而密码字段已填写，而第二个输入元素为空白。

# android - 在 Android 上更新 sqlite 的最佳方法

> ID：10738091
> 
> 赞同：0
> 
> 时间：2012-05-24T13:06:32.030
> 
> 标签：android, json, sqlite

我想要一些建议。我将使用一个 sqlite 数据库，该数据库将从我的服务器中提取信息，然后将其保存在数据库中，然后显示它。有人可以告诉我填充数据库的最佳方法，我应该...

1.  使用 http 请求并返回一个用say a | 分隔的字符串。并使用循环写入数据库。

2.  使用 JSON 检索信息，然后将其存储在数据库中。

信息将只是文本，某些字段将包含指向我要下载的图像的链接（稍后再下载）。只是想要一些关于最佳实践的建议。我在 SO 和其他网站上进行了一些搜索，但找不到太多建议。另外作为旁注，您知道的任何示例都对新手有好处:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T13:18:29.803

根据您在这里写的内容，我会选择 JSON。

核心点：

*   JSON 是一种标准格式。
*   Android 附带一个 JSON 库 (org.json)，使其易于处理（编码/解码数据）。
*   JSON 为大型社区所熟知，因此您可以很容易地提出问题并得到答案。使用自定义格式，您不能在 SO 将问题标记为“json”... ;-)

使用标准格式和库可以帮助您避免自己设计和实现这些东西，从而使您的软件更加健壮。

稍后您可能需要向项目中添加更复杂的数据。到那时，使用 JSON 的数组和对象将相当简单。使用您的私有方案，您必须向它添加此功能并扩展您的解析代码。这很容易引入微妙的错误。或者您可能会在这一点上决定使用自定义格式太难并决定转移到 JSON、XML 等标准。那时转移成本比从标准格式开始要多得多. 考虑花费时间编写和测试当前代码，然后再考虑将额外时间更改为当前系统的标准格式。

# mysql - 防止 MySQL 将隐式默认值插入非空列

> ID：10738094
> 
> 赞同：5
> 
> 时间：2012-05-24T13:06:40.203
> 
> 标签：mysql, sql, database

我正在尝试使用多个插入（在一个语句中）并且我有这个表结构

```
CREATE TABLE Scores
(
  studentID varchar(50) not null,
  score int
)
ENGINE = InnoDB 
```

我的查询：

```
INSERT INTO Scores Values
('Barry', 45),
(NULL, 41),
('Jones', 53) 
```

由于 [StudentID] 列不接受 NULL，因此该语句（我预期）应该会失败。问题是 MySQL 将空字符串 ('') 插入到第 2 行......并允许其余部分继续。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-24T13:07:54.697

问题：

```
SET SQL_MODE='STRICT_ALL_TABLES' 
```

或放

```
SQL_MODE='STRICT_ALL_TABLES' 
```

下`[mysqld]`进入`my.cnf`（然后重新启动`MySQL`）。

# php - 如何处理 CURL 403 禁止错误？任何解决方案？

> ID：10738097
> 
> 赞同：9
> 
> 时间：2012-05-24T13:06:45.727
> 
> 标签：php, curl

我正在使用 multi curl 从远程站点获取数据。我的脚本就像

```
foreach ($urls as $i => $url) {
            $ch[$i] = curl_init($url['url']);
            curl_setopt($ch[$i], CURLOPT_TIMEOUT, 0);
            curl_setopt($ch[$i], CURLOPT_RETURNTRANSFER, 1);
            curl_setopt($ch[$i], CURLOPT_CONNECTTIMEOUT, 0);
            curl_setopt($ch[$i], CURLOPT_SSL_VERIFYPEER, false);
            curl_multi_add_handle($multiCurlHandler, $ch[$i]);
} 
```

它返回我 403 禁止响应。

提前感谢您的建议和意见。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-24T13:08:56.390

只需尝试为用户代理添加两行，看看它是否有效。有些服务器不接受来自脚本的请求，这取决于用户代理。

```
// line 1
$agent = 'Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 1.0.3705; .NET CLR 1.1.4322)';

foreach ($urls as $i => $url) {
    $ch[$i] = curl_init($url['url']);
    curl_setopt($ch[$i], CURLOPT_TIMEOUT, 0);
    curl_setopt($ch[$i], CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch[$i], CURLOPT_CONNECTTIMEOUT, 0);

    // line 2
    curl_setopt($ch[$i], CURLOPT_USERAGENT, $agent);

    curl_setopt($ch[$i], CURLOPT_SSL_VERIFYPEER, false);
    curl_multi_add_handle($multiCurlHandler, $ch[$i]);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T13:09:54.550

联系运行您尝试连接的站点的任何人，并询问他们为什么禁止您的请求。

然后，您可以停止（如果您所做的只是他们认为不可接受）或更改请求以使其符合他们的规则。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-17T20:08:01.273

尝试设置 Referer 和 User-Agent 标头，但是！

... 将 CURLOPT_SSL_VERIFYPEER 设置为 false 是危险的，绝不应该在生产中进行。至少将该行包含在某种 is_dev 检查中。

您这样做是在破坏 SSL 的目的，允许攻击者拦截您的请求并返回他们喜欢的内容，而无需验证他们的 SSL 证书。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-31T03:50:49.767

桑杰的[**回答**](https://stackoverflow.com/a/10738133/6521116)可能总是有帮助。但是当客户端IP被服务器端阻塞时，在客户端执行curl也会出现这个错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-18T18:53:46.753

**我通过删除以下行**来解决问题

 **```
curl_setopt($ch, CURLOPT_IPRESOLVE, CURL_IPRESOLVE_V4 ); 
```**

# google-app-engine - 在 GAE 中使用 DatastoreService 与 PersistentManager 的优缺点

> ID：10738099
> 
> 赞同：1
> 
> 时间：2012-05-24T13:06:48.957
> 
> 标签：google-app-engine, google-cloud-datastore

我正在使用 Java 开发一个带有 GAE 的应用程序。如果有人能解释使用 DatastoreService 与 PersistentManager 进行数据存储访问的优缺点，我将不胜感激。

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T14:25:53.100

DatastoreService - 低级 API。PersistentManager (JDO) - 基于 DatastoreService 的高级 API。

性能：DatastoreService 消耗更少的资源，PersistentManager (JDO) - 有一些开销。

开发：PersistentManager 的开发/支持速度更快。

另一个承诺在性能上比 JDO 更快并且在开发上比低级 api 更快的选项 - Objectify。这是一项很有前途的新技术。试试看。

# forms - Chrome：禁用重新发布 POST 表单的提示

> ID：10738100
> 
> 赞同：1
> 
> 时间：2012-05-24T13:06:50.080
> 
> 标签：forms, google-chrome, post, repost

Chrome 有这个令人讨厌的重新发布 POST 表单的提示。

虽然防止重复发帖的想法很好，但这并不总是有意义的，因为不是每个 POST 表单都在论坛中*发布*数据或在网上商店购买东西。

但是 Chrome 无法禁用这种烦人的行为。

无法“撤消”：

我有一个 POST 表单，您可以在其中美化文本（通过 POST 发送，返回美化文本）。有时它会出错，你想“撤消”提交，所以你回到浏览器，但没有！Chrome 令人讨厌的重新发布错误消息让您大吃一惊。

我不能使用 GET，因为我的表单文本很长，所以我收到“URI 太长”错误。

如何解决这个问题？

在过去，命令行开关`-disable-prompt-on-repost`似乎可以工作，但这无论如何都不是解决方案，因为我不能告诉我的所有用户都这样做才能使用我的网站。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-11T20:27:36.630

今天早上令我高兴的是，这似乎已被删除（重新发布时的弹出窗口），我正在运行版本 29.0.1547.57。不知道什么时候被删除。

但是，我确信您很久以前就重新设计了您的代码/站点。

# android - Android：拨出电话录音，不带录音铃声

> ID：10738107
> 
> 赞同：1
> 
> 时间：2012-05-24T13:07:07.300
> 
> 标签：android, recording

我是android的新手，我想记录来电和去电，但是当我记录去电时，它也会记录铃声。如果对方用户没有接听电话，那么它只记录振铃是不可行的，所以给我一个建议。提前致谢。

# ruby-on-rails - nginx 去除了 last-modified 和 if-modified-since 标头，但我的 rails 应用程序需要它们

> ID：10738118
> 
> 赞同：1
> 
> 时间：2012-05-24T13:07:48.563
> 
> 标签：ruby-on-rails, nginx, http-headers, unicorn

我的 Rails 3.2 应用程序使用 - via `#stale?`-`If-Modified-Since`请求中的 HTTP 标头和`Last-Modified`响应中的标头来决定它是否应该动态生成一些数据。这在开发中非常有效（无论是使用 webrick 还是 unicorn_rails），这`curl -D headers.txt`表明如果`If-Modified-Since`提供了正确的值，则会发送 304 响应，而`Last-Modified`标头会随请求数据一起发送。

不幸的是，一旦部署在 nginx 后面，`If-Modified-Since`（提供正确的标头值）都不会传递给 unicorn——因此也不会传递给 Rails 应用程序——也不会`Last-Modified`传播到客户端：请求是无条件生成的，并且响应永远不会包含正确的标头。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T08:36:36.767

事实证明 nginx 实际上并没有剥离任何东西。仪表显示`If-Modified-Since`控制器已收到该信息。Rails`#stale?`收到一个包含错误结果的请求，这导致了一个`nil`争论，默默地吞下了它，随后忽略了与 的比较和`If-Modified-Since`定位。`Last-Modified``nil`

# tomcat - 在 Java EE 服务器（如 tomcat 或独立服务器）中运行 Sonar 更好吗？

> ID：10738119
> 
> 赞同：0
> 
> 时间：2012-05-24T13:07:48.537
> 
> 标签：tomcat, sonarqube

将它用于生产环境，我在他们的网站上没有看到任何推荐

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T15:20:22.117

大多数运营团队会告诉您，最好使用像 Tomcat 这样的独立 Web 服务器，因为他们更容易管理服务器（大部分时间是因为他们有知识）。

但是，Jetty（嵌入在独立版本中）也是一个“真正的”Web 服务器，并且丢失的人可能会告诉您 Jetty 足够强大并且 Sonar 在这种模式下运行良好。

所以实际上，你应该让你的运营团队来选择，因为最终他们将处理 Sonar 基础设施。

# c++ - 如何始终在相同的坐标处并行存储 3D 数据？

> ID：10738121
> 
> 赞同：3
> 
> 时间：2012-05-24T13:08:12.617
> 
> 标签：c++, c, hdf5

我正在尝试将 3D 数据（内存布局是单个数组；数据维度是`NX * NY * NZ`）存储到 HDF5 文件中。由于我想将大数组分配给多个 MPI 进程，每个进程都有一个大小为`myNX * NY * NZ`where的数据数组`myNX = NX / mpi_size`。

我希望它始终将相同的数据写入 HDF5 文件内的相同“坐标”，因此写入/读取 HDF5 文件的进程数不会对数据布局产生任何影响。这是我的一些代码：

设置本地数组：

```
data = new double[myNX * NY * NZ];
for(unsigned int k = 0; k < NZ; k++) {
    for(unsigned int j = 0; j < NY; j++) {
        for(unsigned int i = 0; i < myNX; i++) {
            data[k * (myNX * NY) + j * myNX + i] = getValue(i, j, k);
        }
    }
} 
```

`getValue()`返回一个`double`like `i.j0k`，这样我就可以看到每个条目在文件中的最终位置（例如，，`i = 3`将导致）。为了测试，我放了；.`j = 2``k = 1``3.201``NX = 9``NY = NZ = 2`

文件 hyperslab：

```
hid_t h5_hyperslab_file_id = H5Dget_space(h5_dataset_id);
hsize_t offset[] = {0, 0, 0};
offset[0] = getOffsetX(mpi_rank, mpi_size);
hsize_t length[] = {myNX, NY, NZ};
hsize_t stride[] = {1, 1, 1};
H5Sselect_hyperslab(h5_hyperslab_file_id, H5S_SELECT_SET, offset, stride, length, NULL); 
```

内存超切片和文件写入：

```
hid_t h5_memory_dataspace_id = H5Screate_simple(3, length, length);
h5_plist_id = H5Pcreate(H5P_DATASET_XFER);
H5Pset_dxpl_mpio(h5_plist_id, H5FD_MPIO_COLLECTIVE);
H5Dwrite(h5_dataset_id, H5T_NATIVE_DOUBLE, h5_memory_dataspace_id, h5_hyperslab_file_id, h5_plist_id, data); 
```

我弄乱了内存和文件超平板的各种设置，但找不到正确的设置。此外，关于此的文档有点模糊（或者至少我没有正确理解它:()。

提前谢谢你，
Velines

编辑：澄清：我的问题是我的数据保存在不同的位置，具体取决于写入文件的处理次数。所以我需要一种在我的数据数组和 HDF5 文件之间创建“映射”的方法。我怎样才能做到这一点？

# javascript - 从 iframe 访问主站点中的工作 javascript

> ID：10738123
> 
> 赞同：0
> 
> 时间：2012-05-24T13:08:20.613
> 
> 标签：javascript, security, iframe

我从外部站点加载的脚本有问题。有时未加载，主站点中的所有脚本都被浏览器中的核心 js 停止。

我将脚本放入 iframe。JS想消除iframe对主页面的影响，不知道怎么做。

安全=“受限”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T13:46:06.217

```
parent.document 
```

应该给你父文件。如果您想在父窗口中添加任何其他内容，请使用“父”而不是“窗口”。
这在 Firefox 中有效，但较新的 IE 对 javascript 的限制很大。我不知道他们是否会让你这样做

# sphinx - Sphinx Daemon 返回错误：查询错误：没有字段

> ID：10738124
> 
> 赞同：0
> 
> 时间：2012-05-24T13:08:25.357
> 
> 标签：sphinx, thinking-sphinx

如果现在在我的应用程序上设置 Thinking Sphinx

一切正常

直到我决定使用 Thinking Sphinx 进行条件查询

```
PartPriceRecord.search "50002" ,:conditions => { :supplier_id =>
"supp50002" },:star => true 
```

它向我报告了上述错误

```
ThinkingSphinx::SphinxError: index part_price_record_core: query
error: no field 'supplier_id' found in schema 
```

甚至看到 Ryan Bates [Screencast](http://railscasts.com/episodes/120-thinking-sphinx) ，他似乎也使用为该列定义的“ **has ”方法实现了条件子句**

就像是

```
 has :author_id 
```

阅读 Pate Allen 的一篇[文章](https://groups.google.com/group/thinking-sphinx/browse_thread/thread/1dad41c934bfae41/bfe498c6266102b1?lnk=gst&q=%20query%20error%3a%20no%20field%20#bfe498c6266102b1)（**向下滚动到底部**）

```
 :with should be used for attribute filters, and :conditions for
field queries. 
```

**所以用**子句改变我上面的代码

```
PartPriceRecord.search "PartNumber50002",:with => {:supplier_id =>
"supp50002" },:star => true 
```

我没有得到错误的结果，因为我可以**在数据库中看到 part_number "PartNumber50002" 的 "supplier_id" 记录**

现在我很困惑

**为什么会出现上述错误以及“字段**”和“**属性**”之间的根本区别是什么

谁能帮忙

顺便说一句，我的索引定义

```
 define_index  do
   indexes part_number
   has supplier_id
 end

 sphinx_scope(:supplier) { |name|
   {:conditions => {:supplier_id => supplier}}
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T13:41:00.610

在 Sphinx 中，目前只能过滤数字属性。:supplier_id => "supp50002" 建议一个字符串属性。

我不明白红宝石或思考狮身人面像。但鉴于潜在的狮身人面像无法做到这一点，我猜想斯芬克斯不会允许这样做。

*   字段，是来自原始数据集的文本列。Sphinx 对它们进行索引，并且它们可以通过主要的“全文查询”进行查询。

*   而属性，只是按原样存储在索引中。它们对于检索[1]、排序、分组和直接过滤很有用。附带条件是不支持按字符串属性进行过滤。可以按其他属性过滤

[1] Sphinx 可以在结果集中返回属性的值；而没有存储字段 - 仅索引，因此您不会将它们取回

# mysql - 计数列中的分隔值

> ID：10738125
> 
> 赞同：1
> 
> 时间：2012-05-24T13:08:31.560
> 
> 标签：mysql, csv

请向我建议一个 SQL 查询，用于以下我将项目 ID 存储在一个列中，例如 1、2、3、4 作为分隔或 CSV 值。
现在我想计算一个特定单元格中某一特定行中的项目数。

即如果我在表格的单元格中有 25,45,26,45,46。
我想要像 5 这样的输出，它只不过是单元格中一行中的项目数（0,0）。非常感谢您的回复

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T13:19:48.827

假设您没有像“123,123”这样的值（请注意末尾的逗号），这应该可以：

```
SELECT
LENGTH(yourColumn) - LENGTH(REPLACE(yourColumn, ',', '')) + 1 AS numberOfItemsInRow
FROM yourTable; 
```

[在这里](http://dev.mysql.com/doc/refman/5.1/en/string-functions.html)找到更多信息。

**但是规范化你的数据库真的会更好！**

# asp.net-mvc-3 - 从组合存储过程中选择项目

> ID：10738127
> 
> 赞同：0
> 
> 时间：2012-05-24T13:08:35.823
> 
> 标签：asp.net-mvc-3, stored-procedures, report

我有两个单独的存储过程，每个过程都有自己的列描述和信息。现在我将它们组合在一起，显示了存储过程的信息，但显示了我的第一个 select 语句（存储过程）的列描述。我有可能以任何方式区分这两种说法吗？原因是因为我使用报表页面来显示信息，但是因为我不能在一个列表中包含两个数据集，所以我认为我可以将所有信息组合到一个数据集中，然后区分要在不同表中但在同一个表中显示的信息列表/数据集。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T15:23:23.080

或许您应该为报表返回一个 DataTable，并且只使用报表分组功能。这通常比尝试操作数据集中的多个数据集和/或多个数据表要容易得多。我已经使用 5 或 6 个 DataSet 将极其复杂的报表重写为一个带有报表分组的 DataSet，而且它要简单得多。我可以接受数据按行重复的事实，因为创建和维护更容易。

也就是说，当然取决于您的数据。如果您可以将相关数据从逻辑上查询到一个结果集中（例如，客户及其订单），则您可以在一个结果集中查询客户及其所有订单。自然，客户信息会为每条记录重复多次，但使用报告工具的分组功能将其显示一次。

# android - 我必须导入 com.companyname.productname.R 吗？

> ID：10738129
> 
> 赞同：0
> 
> 时间：2012-05-24T13:08:47.927
> 
> 标签：android, intellij-idea, r.java-file

我收到 R 无法解决错误。我读到[R 无法解决 - Android 错误](https://stackoverflow.com/questions/885009/r-cannot-be-resolved-android-error)。但是有android.R文件。如果 .java 文件包含 import com.companyname.productname.R 语句，我的项目就会编译。如果我在 AndroidManifest.xml 中更改我的产品名称，则会出现许多错误，说明包 com.companyname.productname 不存在。我试图删除所有 import com.companyname.productname.R 行，但后来我得到包 R 不存在 R.* 行上的错误。我该如何解决这个问题？谢谢。

**更新：**
所以答案是肯定的，我必须导入 com.companyname.productname.R。在 AndroidManifest 中更改产品名称后，我设法编译项目，并使用新产品名称查找并替换所有 import com.companyname.productname.R 语句。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T13:13:59.603

您的自定义 R 类是根据您的 AndroidManifest 中的包名称生成的。因此，如果您在那里更改它，它将使用新的包名称新生成。

因此，请确保导入正确的并删除所有旧的导入。

如果未生成 R 类，则应检查资源文件和/或 AndroidManifest 中的 XML 错误。修复那里的问题，您的 R 文件应该再次生成。

# java - Java Regex 匹配数字、字符、逗号和引号...

> ID：10738131
> 
> 赞同：0
> 
> 时间：2012-05-24T13:08:53.537
> 
> 标签：java, regex

我是正则表达式的新手...

我有一个关于匹配字符串的正则表达式的问题，它只包含：

**0-9、az、AZ、空格、逗号**和**单引号**？

如果字符串包含任何不属于上述表达式的字符，则它是无效的。

是这样的吗：

```
Pattern p = Pattern.compile("\\s[a-zA-Z0-9,']");
Matcher m = p.matcher("to be or not");
boolean b = m.lookingAt(); 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T13:10:47.783

您需要在字符类中包含空格并允许多个字符：

```
Pattern p = Pattern.compile("[\\sa-zA-Z0-9,']*");
Matcher m = p.matcher("to be or not");
boolean b = m.matches(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T13:12:27.793

修复您的表达式添加边界：

`Pattern p = Pattern.compile("^\\s[a-zA-Z0-9,']+$");`

现在您可以说`m.find()`并确保`true`仅当您的字符串仅包含枚举符号时才返回。顺便说一句，你一开始是不是错`\\s`了？这意味着字符串必须从单个空格开始。如果这不是要求，请删除它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T13:30:51.653

请注意，\s 将匹配任何空白字符（包括换行符、制表符、回车符等），而不仅仅是空格字符。

你可能想要这样的东西：

"^[a-zA-Z0-9,' ]+$"

# scala - Scala中`def`和`val`的不同类型推断

> ID：10738137
> 
> 赞同：18
> 
> 时间：2012-05-24T13:09:00.723
> 
> 标签：scala, type-inference

当应用于`def`和时，我观察到 Scala 的类型推断有所不同`val`。

使用`def`，我可以定义一个抽象的 nullary 方法`const`返回一些类型的值`Int => Int`。当`const`使用函数字面量实现时，我不需要提供参数类型，因为它可以由编译器推断：

```
trait D {
  def const: Int => Int
}
object D extends D {
  def const = i => i + 1
} 
```

这可以。（不利的一面是，每次访问都会创建一个新的函数实例`D.const`。）

现在考虑使用 的类似构造`val`：

```
trait V {
  val const: Int => Int
}
object V extends V {
  val const = i => i + 1
} 
```

这将无法编译，失败

```
error: missing parameter type
   val const = i => i + 1
               ^ 
```

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T22:07:04.673

如果您使用选项 -Xprint all 构建此代码，您将看到：

```
abstract trait V extends scala.AnyRef {   
<stable> <accessor> def const: Int => Int
};

final object V extends java.lang.Object with V with ScalaObject {

def this(): object V = {
  V.super.this();
  ()
};

private[this] val const: <error> => <error> = ((i: <error>) => i.+(1));
<stable> <accessor> def const: <error> => <error> = V.this.const
} 
```

因此错误发生在创建私有 val 和访问器时。在创建访问器 def const 之前，编译器尝试评估影响 val const 的值。

如果您查看 trait 中定义的 val const，您会看到私有 val 的创建被禁用，因为它只是 def const 访问器的定义。

我认为具有先前定义（在特征或超类中）的推理类型仅在他尝试创建访问器时发生，而不是用于评估值。

而对于最后一个 def const ，类型仅基于 private[this] val const type : error => error

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T10:42:34.667

从 Scala 2.9.1 开始，这是“按规定”的。引用[SI-2742](https://issues.scala-lang.org/browse/SI-2742)中的 Martin Odersky 的话：

> 对于方法，继承的抽象方法中的返回类型被视为右侧的预期类型。对于值，没有这样的规则。因此，正如我所见，这将是一个规范增强请求。

这张票是低优先级的，自 2009 年底首次讨论以来一直保持不变，因此它似乎不太可能很快改变。

# javascript - Node.js 应用程序的结构和流程

> ID：10738145
> 
> 赞同：0
> 
> 时间：2012-05-24T13:09:33.967
> 
> 标签：javascript, node.js, asynchronous, qlibrary

我刚刚完成了我的第一个 Node 应用程序的编写。它运行良好，但是当我从社区阅读更多内容并吸收详细信息时，我得出的结论是，我的应用程序与我正在阅读的示例有点不同。

所以我更深入地寻找解决方案并阅读了很多 howtonode.org。我偶然发现了控制流、承诺和 Q 库的概念。我开始消化这一切，我想我明白了，但我想确认我的研究和发现。在我决定使用 Qlibrary 重组所有内容之前，我想知道我是否至少已经掌握了我的核心应用程序和方法，它基本上将代表我在这一点上如何前进。

应用程序.js

```
// Require global libraries
var app = {
    config     : require('../../config.json'), // my custom config files
    restify    : require('restify'),
    path       : require('path'),
    mongo      : require('mongodb'),
    model      : require('./models.js'),
    q          : require('q'),
    api        : require('./api_util.js'),
    underscore : require('underscore')
};
app.server.pre(function (request, response, next) {
    request.app = app;
    return next();
});
app.server = app.restify.createServer(app.config.api);
require('controller.js')(app);
app.server.listen(app.config.api.port); 
```

控制器.js

```
module.exports = function Controller(app, parcel, controller_name) {
    app.server.get({
        path : '/my/controller/',
        version  : '1.0.0',
        name     : 'My REST GET Controller'
    }, function(request, response, next){
        var model = new request.app.model();
        // do some other stuff
    ));
} 
```

我采取了将我所有的库和重要组件封装在应用程序变量中的方法，并将其传递到我的控制器中，这样我就可以直接调用引用，并且在每个回调之间只传递一个变量。

对于之后的每个请求，我都从我附加到 app.js 中 pre 的请求值访问 app 变量（因此路由回调函数中的 request.app.model() 函数。

我想知道我是否应该关注以这种方式构建我的代码。它使来回传递引用变得非常容易，而不必担心全局变量或任何类似的东西。我读到了一些类似的东西，有人暗示这是一个聪明的方向，因为它确实有助于命名空间和解决整个全局变量声明问题（这是一个很大的禁忌）。

如果我被推向正确的方向，我认为 Q 库和其他一切都会很好地到位。

谢谢！

# java - 基本的java打印

> ID：10738148
> 
> 赞同：2
> 
> 时间：2012-05-24T13:09:48.840
> 
> 标签：java

请注意下面代码段中的打印语句。我的问题是，如果我尝试在 print 语句中添加两个双精度值，它会打印不正确，但是如果我将它们添加到 print 语句之外并将结果存储在变量中，我就无法正确打印它。

为什么这会起作用并打印出正确的结果？

```
public static void main(String argsp[]){
        Scanner input = new Scanner(System.in);

        double first, second, answer;

        System.out.println("Enter the first number: ");
        first = input.nextDouble();

        System.out.println("Enter the second number: ");
        second = input.nextDouble();

        answer = first + second;

        System.out.println("the answer is " + answer);

    } 
```

为什么这会打印出错误的结果？

```
public static void main(String argsp[]){
        Scanner input = new Scanner(System.in);

        double first, second;

        System.out.println("Enter the first number: ");
        first = input.nextDouble();

        System.out.println("Enter the second number: ");
        second = input.nextDouble();

        System.out.println("the answer is " + first+second);

    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T13:14:45.943

这是因为您在第二部分中所做的*基本上是：*

```
System.out.println("the answer is " + String.valueOf(first) + String.valueOf(second)); 
```

这就是编译器解释它的方式。因为`+`给方法赋值时的运算符`String`不是*计算*而是*串联*。

如果您想在一行中完成，请这样做：

```
System.out.println("the answer is " + (first + second)); //Note the () around the calculation. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T13:14:38.547

如果对运算符的优先级有疑问，请使用括号。读起来也更清楚。

```
System.out.println("the answer is " + (first+second)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T13:15:39.903

在第二种情况下，双精度数被转换为`String`s 因为`+`被认为是`String`串联。要解决此问题，请使用括号对应该执行数值计算的表达式进行分组：

```
 System.out.println("the answer is " + (first + second)); 
```

# c++ - delete(Object) 是否等同于调用 Object.~Object()

> ID：10738158
> 
> 赞同：6
> 
> 时间：2012-05-24T13:10:26.500
> 
> 标签：c++, memory

我有几个连接到[AngelScript](http://www.angelcode.com/angelscript/)引擎的类。该引擎使用有趣的方式来分配对象：它分配所需的内存量（可能使用`malloc()`），当作者建议使用这样的构造在此内存中创建对象时：

```
static void Constructor(ObjectType *thisPointer)
{
    new(thisPointer) ObjectType();
} 
```

和这样的代码来销毁对象：

```
static void Destructor(ObjectType *thisPointer)
{
     thisPointer->~ObjectType();
} 
```

我有几个问题：

*   以这种方式使用析构函数是否正确？（Eclipse 判断这是一个错误）据我所知，这段代码应该调用析构函数而不释放内存（调用`free()`）
*   是否可以使用`delete(thisPointer)`（或类似的东西）代替这种结构，它是否等效？（至少这段代码在编译和运行时没有出错）
*   有没有其他方法可以在不释放内存的情况下调用析构函数？

先感谢您。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-24T13:13:15.677

C++ 在这里有点误导：

构造和内存管理实际上是完全不相关的过程，C++为了方便`new`而将它们混合在一起。`delete`

然而，C++ 实际上并没有专门的语法来调用现有内存上的构造函数——为此，您需要使用`new`实际上根本*不是*常规的“放置”语法`new`——即，它不分配内存。

另一方面，有*一种*语法可以调用对象的析构函数。并且您的代码正确使用它。不，使用`delete`不等同，除了调用析构函数之外，它还会释放内存。

将此与[`std::allocator`](http://en.cppreference.com/w/cpp/memory/allocator)具有方法（及其相应语义）的类进行比较

*   `allocate`(== `::operator new(sizeof T)`)
*   `deallocate`(== `::operator delete(&x)`)
*   `construct`(== `new (&x) T()`)
*   `destroy`(== `x.~T()`)

这些精确地对应于对象生命周期的不同方面。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-24T13:15:52.463

> 以这种方式使用析构函数是否正确？

是的。您使用placement-new就地构造了对象，因此必须使用显式的析构函数调用将其销毁（假设它具有非平凡的析构函数）。

> 是否可以使用`delete(thisPointer)`（或类似的东西）代替这种结构，它是否等效？

No.`delete`将尝试使用`operator delete()`释放内存到空闲存储区；这仅在分配了正常`new`表达式（或者可能显式使用`operator new()`）时才有效。

> 有没有其他方法可以在不释放内存的情况下调用析构函数？

并不真地。调用析构函数当然是调用析构函数最清晰和最简单的方法。

# android - 数组的捆绑数组不起作用 - Android

> ID：10738159
> 
> 赞同：0
> 
> 时间：2012-05-24T13:10:27.100
> 
> 标签：android, arrays, bundle

我试图捆绑一个数组数组但不工作。下面是一段代码，以便更好地理解：

声明和初始化变量

```
Inversor[][] reg_equipment= new Inversor[7][5];
for(int i=0; i<7; i++)
{
  for(int j=0;j<5;j++)
  {
    reg_equipment[i][j]= new Inversor();
  }
}
//.... 
```

将变量放入包中

```
bundle.putSerializable("reg_equipment", reg_equipment);

Intent myIntent =new  Intent(RegisterEquipmentInversor.this,RegisterEquipmentMain.class);
                myIntent.putExtras(bundle);

                startActivity(myIntent); 
```

此时， reg_equipment 充满了 Inversor **[Inversor[0],Inversor[1]....,Inversor[6]]**并且在这些里面有**更多的 Inversor**。

但是当我去“得到”另一个班级的捆绑包时

```
reg_equipment = (Inversor[][]) extras.getSerializable("reg_equipment"); 
```

这是 de reg_equipment 内部的内容 - **[Object[0],Object[1],...,[Object[6]]**并且**在这些对象内部有 Inversors**。为什么会发生这种情况？我该如何解决？

**Inversor 类实现了 Serializable**

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T13:30:44.920

您应该尝试创建一个只有一个属性的 Serializable 类，它应该是您的 Inversor 数组数组，并将该对象放入您的意图中。就像是

```
public class InversorArrays implements Serializable {
    public final static int serialVersionUID = //let eclipse generate your uid
    public Inversor[][] myArray = null;
    public InversorArrays (Inversor[][] _myArray){
        this.myArray = _myArray;
    }
} 
```

然后，在您的活动中，创建 InversorArrays 的实例并将其传递给意图

当然，Inversor 及其属性也应该是可序列化的。

这种解决方法有时为我节省了很多时间，并解决了类型转换和转换问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T13:30:40.233

我不确定，但是您是否使投资者类可序列化？我认为，如果我们能够对投资者阶层有一个基本的了解，那可能会带来一些启示。

我会说从让 Investor 可序列化开始。[http://www.tutorialspoint.com/java/java_serialization.htm](http://www.tutorialspoint.com/java/java_serialization.htm)

# wpf - 是否可以在 wpf 的选项卡控件中重新排列选项卡项？

> ID：10738161
> 
> 赞同：13
> 
> 时间：2012-05-24T13:10:38.470
> 
> 标签：wpf, wpf-controls, wpftoolkit

是否可以在运行时重新排列选项卡控件中的选项卡项？例如，我有 3 个关于汽车的标签项目和 4 个关于房子的标签。我希望能够使用拖放重新排列它们。有可能还是太棒了？

我在这里有选项卡控件是 XAML。

```
<TabControl x:Name="tc" Visibility="Collapsed" GotFocus="Focus" AllowDrop="True" >
            </TabControl> 
```

选项卡项将在运行时添加。谢谢你帮助我！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-24T13:16:01.247

在 MSDN 论坛中找到了解决方案。

链接在这里：

[拖放选项卡项](http://social.msdn.microsoft.com/Forums/en/wpf/thread/ed077477-a742-4c3d-bd4e-3efdd5dd6ba2)

这是解决方案：

C# 解决方案

**WPF代码：**

```
<TabControl>
    <TabControl.Resources>
        <Style TargetType="TabItem">
            <Setter Property="AllowDrop" Value="True"/>
                <EventSetter Event="PreviewMouseMove" Handler="TabItem_PreviewMouseMove"/>
                <EventSetter Event="Drop" Handler="TabItem_Drop"/>
        </Style>
    </TabControl.Resources>

    <TabItem Header="Tabitem 1"/>
    <TabItem Header="Tabitem 2"/>
    <TabItem Header="Tabitem 3"/>
    <TabItem Header="Tabitem 4"/>
    <TabItem Header="Tabitem 5"/>
</TabControl> 
```

**后面的 C# 代码：**

```
private void TabItem_PreviewMouseMove(object sender, MouseEventArgs e)
{
    if (!(e.Source is TabItem tabItem))
    {
        return;
    }

    if (Mouse.PrimaryDevice.LeftButton == MouseButtonState.Pressed)
    {
        DragDrop.DoDragDrop(tabItem, tabItem, DragDropEffects.All);
    }
}

private void TabItem_Drop(object sender, DragEventArgs e)
{
    if (e.Source is TabItem tabItemTarget &&
        e.Data.GetData(typeof(TabItem)) is TabItem tabItemSource &&
        !tabItemTarget.Equals(tabItemSource) &&
        tabItemTarget.Parent is TabControl tabControl)
    {
        int targetIndex = tabControl.Items.IndexOf(tabItemTarget);

        tabControl.Items.Remove(tabItemSource);
        tabControl.Items.Insert(targetIndex, tabItemSource);
        tabItemSource.IsSelected = true;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-11T15:03:39.583

当我尝试实现此解决方案时，drop 事件触发了两次（移动选项卡但它们立即将它们移回）。我必须添加一个整数来跟踪最后一个选项卡目标索引。我的解决方案是在 VB.NET

```
'additional variable
Dim lastTabTargetIndex As Integer = Nothing

Private Sub tc1_PreviewMouseMove(sender As Object, e As MouseEventArgs) Handles tc1.PreviewMouseMove

    Dim Tabi = TryCast(e.Source, TabItem)

    If Tabi Is Nothing Then
        Exit Sub
    Else
        If Mouse.PrimaryDevice.LeftButton = MouseButtonState.Pressed Then
            DragDrop.DoDragDrop(Tabi, Tabi, DragDropEffects.All)
        End If
    End If
End Sub

Private Sub tc1_Drop(sender As Object, e As DragEventArgs) Handles tc1.Drop

    Dim tabItemTarget = TryCast(e.Source, TabItem)
    Dim tabItemSource = TryCast(e.Data.GetData(GetType(TabItem)), TabItem)

    If Not tabItemTarget.Equals(tabItemSource) Then
        Dim tabControl = TryCast(tabItemTarget.Parent, TabControl)
        Dim sourceIndex As Integer = tabControl.Items.IndexOf(tabItemSource)
        Dim targetIndex As Integer = tabControl.Items.IndexOf(tabItemTarget)

        'had to use this extra statement
        If sourceIndex <> lastTabTargetIndex Then
            'assign lastTabTargetIndex here
            lastTabTargetIndex = targetIndex
            tabControl.Items.Remove(tabItemSource)
            tabControl.Items.Insert(targetIndex, tabItemSource)
            tabControl.Items.Remove(tabItemTarget)
            tabControl.Items.Insert(sourceIndex, tabItemTarget)
        End If

    End If
End Sub 
```

# typo3 - 生成嵌套列表

> ID：10738162
> 
> 赞同：0
> 
> 时间：2012-05-24T13:10:40.570
> 
> 标签：typo3, typoscript

我对打字稿很陌生。我知道包装，但你如何生成格式良好的嵌套列表？

这是我目前正在使用的代码：

```
// Side menu with each li acting as a category
lib.subMenu.1 {
  NO.allWrap=<li class="category">|</li>

// (...)

lib.subMenu {
  2 < .1
  // LI placed just underneath and wrapped inside a UL.
  // Ideally the UL should be inside the LI described above.
  2.wrap = <li><ul class="items">|</ul></li> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T14:39:30.250

您需要`wrapItemAndSub`用于包装物品

```
lib.subMenu = HMENU
lib.submenu {
   1 = TMENU
   1 {
      wrap = <ul>|</ul>
      NO.wrapItemAndSub = <li>|</li>
   }

   2 < .1
   2.wrap = <ul class="level_2">|</ul>
} 
```

# c# - 如何使构造函数只能由基类访问？

> ID：10738163
> 
> 赞同：8
> 
> 时间：2012-05-24T13:10:41.367
> 
> 标签：c#, .net, inheritance, constructor

如果我想要一个只能从子类访问的构造函数，我可以`protected`在构造函数中使用关键字。

现在我想要相反的。

我的子类应该有一个可以由其基类访问但不能从任何其他类访问的构造函数。

这甚至可能吗？

这是我当前的代码。问题是子类有一个公共构造函数。

```
public abstract class BaseClass
{
    public static BaseClass CreateInstance(DataTable dataTable)
    {
        return new Child1(dataTable);
    }
    public static BaseClass CreateInstance(DataSet dataSet)
    {
        return new Child2(dataSet);
    }
}

public class Child1 : BaseClass
{
    public Child1(DataTable dataTable)
    {
    }
}

public class Child2 : BaseClass
{
    public Child2(DataSet dataSet)
    {
    }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-24T13:19:01.743

我认为你有两个选择：

1.  制作子构造函数`internal`。这意味着它可以从同一个程序集中的所有类型访问，但在大多数情况下这应该足够了。
2.  使子类嵌套在基类中：

    ```
    public abstract class BaseClass
    {
        public static BaseClass CreateInstance(DataTable dataTable)
        {
            return new Child1(dataTable);
        }

        private class Child1 : BaseClass
        {
            public Child1(DataTable dataTable)
            {
            }
        }
    } 
    ```

    这样，`BaseClass`可以使用构造函数，但没有其他外部类型可以做到这一点（甚至看到子类）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T13:34:15.897

我想我只是自己解决了。在阅读了嵌套类的 svicks 解决方案后，我想`why not use an protected nested class as an argument?`

外部没有人能够创建 Arg 的实例，而我的子类中的公共构造函数只能由可以创建`Arg<T>`实例的 BaseClass 使用。

```
public abstract class BaseClass
{
    protected class Arg<T>
    {
        public T Value { get; set; }
        public Arg(T value) { this.Value = value; }
    }

    public static BaseClass CreateInstance(DataTable dataTable)
    {
        return new Child1(new Arg<DataTable>(dataTable));
    }

    public static BaseClass CreateInstance(DataSet dataSet)
    {
        return new Child2(new Arg<DataSet>(dataSet));
    }
}

public class Child1 : BaseClass
{
    public Child1(Arg<DataTable> arg) : this(arg.Value) { }
    private Child1(DataTable dataTable)
    {
    }
}

public class Child2 : BaseClass
{
    public Child2(Arg<DataSet> arg) : this(arg.Value) { }
    public Child2(DataSet dataSet)
    {
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T13:17:18.330

问题的答案是“否”

OOP 中不存在允许子类构造函数仅对它的基类可见的东西......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T16:29:32.520

可以通过让基本构造函数接受一个`ref`参数来在运行时强制执行所需的行为，并执行类似（非线程安全）的操作：

```
private int myMagicCounter;

public DerivedClass makeDerived(whatever) // A factory method
{
  DerivedClass newThing;
  try
  {
    ... do whatever preparation
    newThing = new DerivedClass(ref myMagicCounter, whatever);
  }
  finally
  {
    ... do whatever cleanup
  }
  return newThing;
}

BaseClass(ref int magicCounter, whatever...)
{
  if (magicCounter != myMagicCounter)
    throw new InvalidOperationException();
  myMagicCounter++;
  if (magicCounter != myMagicCounter)
    throw new InvalidOperationException();
} 
```

请注意，派生类构造函数调用在没有完成工厂方法的准备的情况下不可能获得控制权，或者在没有进行工厂方法的清理的情况下将控制权返回给它的调用者。但是，没有什么可以阻止派生类构造函数将其部分构造的实例传递给外部代码，外部代码可以在任意时间内对其进行任意操作，然后将控制权返回给工厂方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-22T18:57:19.850

从派生类的类型初始化器传递并注册一个工厂委托，然后你就完成了工作：

```
public abstract class BaseClass {
    static readonly Dictionary<Type, Delegate>
            m_factories = new Dictionary<Type, Delegate> { };

    public static BaseClass CreateInstance(DataTable dataTable) {
        var type = typeof(Child1);
        RuntimeHelpers.RunClassConstructor(type.TypeHandle);
        return (Child1)m_factories[type].DynamicInvoke(dataTable);
    }

    public static BaseClass CreateInstance(DataSet dataSet) {
        var type = typeof(Child2);
        RuntimeHelpers.RunClassConstructor(type.TypeHandle);
        return (Child2)m_factories[type].DynamicInvoke(dataSet);
    }

    protected static void AddFactory<TArgs, T>(Func<TArgs, T> factory) {
        m_factories.Add(typeof(T), factory);
    }
}

public class Child1:BaseClass {
    Child1(DataTable dataTable) {
    }

    static Child1() {
        BaseClass.AddFactory((DataTable dt) => new Child1(dt));
    }
}

public class Child2:BaseClass {
    Child2(DataSet dataSet) {
    }

    static Child2() {
        BaseClass.AddFactory((DataSet ds) => new Child2(ds));
    }
}

public static class TestClass {
    public static void TestMethod() {
        var child2 = BaseClass.CreateInstance(new DataSet { });
        var child1 = BaseClass.CreateInstance(new DataTable { });
    }
} 
```

如果所有派生类都直接从基类继承，那么您不必担心注册冲突——没有主体可以访问另一个类的构造函数。

因为您可能希望将它声明`TArgs`为`Func<TArgs, T>`可变参数泛型参数，尽管它不是 C♯ 的一个特性，但它`Tuple`是模拟它的方法之一。有关此主题的更多信息，您可能需要查看：

[在 C# 中模拟可变参数模板](https://stackoverflow.com/questions/6844890/simulate-variadic-templates-in-c-sharp)

# java - 是否有一个库可以模仿 Java 中 Matlab 的所有功能？

> ID：10738165
> 
> 赞同：3
> 
> 时间：2012-05-24T13:10:52.883
> 
> 标签：java, matlab, open-source

是否有一个开源库，它具有 Matlab 的所有功能，具有高级高级功能，但纯粹是在 java 中完成的？

编辑：有些人误解了我的意思。

我正在寻找一个模仿 matlab 的函数库，所以没有 matlab 语法。（也许有一个对象会处理所有的鸭子打字）具有 matlab 功能/功能的 Java 语言。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T13:16:19.903

**MATLAB 的**所有功能？**不，没有。**

 **Java有一些数值库。但是，覆盖范围远不如 MATLAB 广泛。此外，可以说，该语言本身并不是非常适合计算线性代数之类的东西（例如，缺少运算符重载使得任何矩阵操作代码都很难阅读）。

有关一些指针，请参阅[Java Numerics](http://math.nist.gov/javanumerics/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T13:16:55.530

试试 Mathworks - [http://www.mathworks.in/help/techdoc/matlab_external/f44062.html](http://www.mathworks.in/help/techdoc/matlab_external/f44062.html)

或 jMatlab。链接 - [http://www.jmathlib.de](http://www.jmathlib.de)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T13:20:16.493

我想不是; Octave 是一个 MatLab 外观（不是真正的库），但用 C++ 编写（http://www.gnu.org/software/octave） 对于一些数值库，请参见[http://en.wikipedia.org/ wiki/List_of_numerical_libraries#Java](http://en.wikipedia.org/wiki/List_of_numerical_libraries#Java)**

# oracle - 开始跟踪其他会话时出现 Oracle 11g 错误

> ID：10738166
> 
> 赞同：2
> 
> 时间：2012-05-24T13:10:54.280
> 
> 标签：oracle

在 Oracle 11g 中，我尝试跟踪会话，但失败了。该工具是 SQL Developer。我没有权限？但我可以查询 v$session。

谢谢

```
BEGIN
  DBMS_MONITOR.SESSION_TRACE_ENABLE(session_id=>72, 
                                         serial_num=>36449, 
                                         waits=>TRUE, 
                                         binds=>TRUE);
END;
Error report:
ORA-06550: line 2, column 3:
PLS-00201: identifier 'DBMS_MONITOR' must be declared
ORA-06550: line 2, column 3:
PL/SQL: Statement ignored
06550\. 00000 -  "line %s, column %s:\n%s"
*Cause:    Usually a PL/SQL compilation error.
*Action: 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T13:13:55.070

您没有该软件包的`execute`特权。`dbms_monitor`

让您的 DBA 运行

```
GRANT execute ON dbms_monitor TO your_username; 
```

# c# - 如何使用 PowerShell 远程处理从 C# 向 Active Directory 用户添加图像？

> ID：10738168
> 
> 赞同：2
> 
> 时间：2012-05-24T13:10:59.783
> 
> 标签：c#, powershell, active-directory, exchange-server, powershell-remoting

我正在用 C# 编写一个程序，将图片添加到 Active Directory 用户对象（在 ThumbnailPhoto 属性中）。该程序在 Exchange Server 2010 之外的另一台 PC 上运行。例如，我可以使用 PowerShell 远程处理为 AD 用户启用邮箱。

当我在 PowerShell 中执行以下命令时（在 Exchange Server 以外的另一台 PC 上），它运行良好：

```
enter-pssession exchange_server_fqdn
$cred = get-credential          ( domain\administrator , **** )
$sess = new-pssession -configurationName Microsoft.Exchange -ConnectionUri http://exchange_server_fqdn/PowerShell/ -Authentication Kerberos -Credential $cred
import-pssession $sess
Import-RecipientDataProperty -Identity ADusername -Picture -FileData ([Byte[]]$(Get-Content -Path 'C:\\person.jpg' -Encoding Byte -ReadCount 0))
remove-pssession $sess 
```

但我需要从 C# 执行命令。以下代码运行（不引发异常），但图像未添加到 AD 用户对象：

```
string username = "xxx";
string password = "yyy";
string exchangeServer = "zzz"; // FQDN of Exchange Server 2010
string liveIdconnectionUri = "http://" + exchangeServer + "/Powershell?serializationLevel=Full";

// credentials
SecureString passwordSecureString = new SecureString();
foreach (char c in password) passwordSecureString.AppendChar(c);
PSCredential credential = new PSCredential(username, passwordSecureString);

WSManConnectionInfo connectionInfo = new WSManConnectionInfo(
    new Uri(liveIdconnectionUri),
    "http://schemas.microsoft.com/powershell/Microsoft.Exchange",
    credential);
connectionInfo.AuthenticationMechanism = AuthenticationMechanism.Kerberos;

PowerShell powershell = PowerShell.Create();
Runspace runspace = System.Management.Automation.Runspaces.RunspaceFactory.CreateRunspace(connectionInfo);
runspace.Open();
powershell.Runspace = runspace;
PSCommand command = new PSCommand();

// Add ThumbnailPhoto attribute to Active Directory user
// This command works when executed on the Exchange Server 2010 in the Exchange Management Shell,
// But it doens't work when executed in C#.
command.AddScript("Import-RecipientDataProperty -Identity ADusername -Picture -FileData ([Byte[]]$(Get-Content -Path 'C:\\person.jpg' -Encoding Byte -ReadCount 0))");

powershell.Commands = command;
try {
    Collection<PSObject> commandResults = powershell.Invoke<PSObject>();
    foreach (PSObject result in commandResults) Console.WriteLine(result.ToString());
}
catch (Exception ex) {
    Console.WriteLine(ex.Message);
} 
```

代码中唯一的问题是带有`command.AddScript`. 例如，如果我将该行替换为：

```
command.AddCommand("Get-Mailbox");
command.AddParameter("Identity", "ADusername"); 
```

...然后它确实有效。启用邮箱也可以。

如何从 C# 执行命令以将图像添加到 Active Directory 用户对象（使用 PowerShell 远程处理）？

**基于公认答案的工作代码：**

```
DirectoryEntry container = new DirectoryEntry(LDAP_URI + USERS_DIR);
DirectoryEntry user = container.Children.Add("cn=" + username, "user");

// Set other property's of the user object:
//// user.Properties ["xxx"].Value = "yyy";
//// ...

byte [] buffer;
FileStream fileStream = new FileStream(@"c:\photo.jpg", FileMode.Open, FileAccess.Read);

try {
    int length = (int) fileStream.Length;  // get file length
    buffer = new byte [length];            // create buffer
    int count;                             // actual number of bytes read
    int sum = 0;                           // total number of bytes read

    // read until Read method returns 0 (end of the stream has been reached)
    while ((count = fileStream.Read(buffer, sum, length - sum)) > 0)
        sum += count;  // sum is a buffer offset for next reading
}

finally {
    fileStream.Close();
}

user.Properties ["thumbnailPhoto"].Value = buffer;

user.CommitChanges(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T13:21:29.427

这听起来像是一个身份验证问题。即使您在 Exchange 服务器上运行该命令，它实际上是针对 Active Directory 执行的，并且无法保证它将针对哪个域控制器执行。这是双跳场景，可以通过在 WS-Man 远程会话中使用 CredSSP 来解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T15:56:31.800

我会采取不同的方法：

```
byte[] pictureBytes = //Use a FileStream to read the data

command.AddCommand("Import-RecipientPropertyData");
command.AddParameter("Identity", "fooUser");
command.AddParameter("Picture", "$true");
command.AddParameter("Encoding", "Byte");
command.AddParameter("ReadCount", 0);
command.AddParameter(FileData, pictureBytes); 
```

或者，您可以将图片读入您的图片字节并使用 ADSI ( `DirectoryEntry`) 直接写入`thumbnailPhoto`属性。只要确保它`pictureBytes`<= 10KB，因为这是 AD 中属性的最大值。

# regex - 传递子域作为参数

> ID：10738175
> 
> 赞同：2
> 
> 时间：2012-05-24T13:11:27.307
> 
> 标签：regex, .htaccess, subdomain, isapi-rewrite, wildcard-subdomain

我是 ISAPI_Rewrite 的新手，我对正则表达式很不满意。我需要[ISAPI_Rewrite](http://www.helicontech.com/isapi_rewrite/)的重写规则，它将删除子域并将其作为参数传递。例如：

```
mysubdomain.mydomain.com 
```

应该成为

```
mydomain.com/Landing.aspx?ID=mysubdomain 
```

我*找到*了一个似乎匹配除 之外的所有子域的正则表达式`www`，但我不确定如何将子域作为参数传递，如上例所示。

```
^((?:(?!www).)*) 
```

任何帮助，将不胜感激。

**注意：**我使用的是完整版本的 ISAPI_Rewrite，因此该规则将位于站点级别。

* * *

全局规则：

```
# Helicon ISAPI_Rewrite configuration file
# Version 3.1.0.89

#Disable extentionless processing for ASP.Net v 4.0
RewriteRule (.*)eurl.axd/.* $1

# Don't rewrite urls that are inside the assets folder or have the following extentions
RewriteRule ((^/Assets/.*)|(.*\.axd.*)|(.*\.asmx.*)|(.*\.png.*)) $1 [NC,L]

#Rewrite URL, pass last portion of URL to Landing.aspx + purl
RewriteRule  (.*) $2/landing.aspx\?id=$1 [NC] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T13:23:44.657

这样的事情可能对你有用：

```
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{QUERY_STRING} ^$
RewriteCond %{HTTP_HOST} ([^.]+)(?<!^www)(\.|$) [NC]
RewriteRule ^ Landing.aspx?ID=%1 [L,QSA] 
```

PS：看起来您的全局规则与我的上述规则相冲突。因此，我建议您使用这样的全局规则以避免冲突：

```
RewriteCond %{QUERY_STRING} ^$
RewriteCond %{HTTP_HOST} !mydomain\.com$ [NC]
RewriteRule ^(.*)$ landing.aspx?id=$1 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T13:39:53.443

尝试使用以下内容：

```
RewriteEngine on
RewriteBase /

RewriteCond %{HTTP:Host} !^www\.mydomain\.com$
RewriteCond %{HTTP:Host} ^([^.]+)\.mydomain\.com$
RewriteRule ^$ /Landing.aspx?ID=%1 [NC,L] 
```

您没有指定是否需要 301 重定向或重写，因此如果您希望它被重定向，请使用 [NC,R=301,L] 而不是 [NC,L]。

# php - 日食很慢

> ID：10738176
> 
> 赞同：1
> 
> 时间：2012-05-24T13:11:33.137
> 
> 标签：php, eclipse

我正在用 PHP (PDO) 编程。我已经在 gedit 中完成了这项工作，但现在我使用的是 Eclipse。问题是它非常慢。首先，我使用 FTP 连接并直接在 FTP 连接中编辑 PHP 文件。

我做了一些研究，发现了这些链接：

*   [所以问题](https://stackoverflow.com/questions/4495913/slow-typing-in-between-php-tags-with-eclipse-helios-with-pdt) - 我的问题是整个文档都很慢。
*   [博客发布](http://blog.elijaa.org/index.php?post/2010/09/21/Tricks-to-speed-up-Eclipse-PHP-Helios-PDT-2.2) ——我已经尝试了所有的技巧，但没有好的结果。

我曾尝试编辑硬盘驱动器上的文件，但这对我也不起作用。

我正在使用带有 Intel 双核 2.4GHz 4GB RAM 的 ubuntu 12.04。我的电脑用了大约 3 年。我希望你能帮我解决这个问题！这很烦人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T23:13:36.190

在 Linux 上，我注意到将 Theme 设置为 Classic（以前是 GTK）有很好的性能改进。

Window -> Preferences, General, Appearance，将 Theme 改为 Classic，点击 Apply，重启 Eclipse。

当然 eclipse.ini JVM 设置也有帮助，但我之前已经做过了，除了其他答案已经提到过。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T13:14:18.433

您应该尝试调整运行 eclipse 的 JVM 的设置，在 StackOverflow 上查看[这篇](https://stackoverflow.com/questions/142357/what-are-the-best-jvm-settings-for-eclipse/1409590#1409590)文章，其中列出了 eclipse 的最佳设置。

# java - 使用通用控制器时，如何返回特定控制器固有的视图？

> ID：10738182
> 
> 赞同：6
> 
> 时间：2012-05-24T13:11:49.970
> 
> 标签：java, playframework-2.0

由于这个答案：[https](https://stackoverflow.com/a/10708026/694597) ://stackoverflow.com/a/10708026/694597 ，我想知道在使用通用控制器时如何返回特定控制器固有的视图。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T18:06:07.603

当您在控制器操作中渲染视图时，您只需调用模板引擎生成的普通函数：

```
public Application extends Controller {
  public static Result index() {
    return ok(views.html.index.render(42));
  }
} 
```

在这里，是具有类型`render`的对象的方法。`index``Template1<Integer, Html>`

现在的问题是：如何编写能够调用特定于另一个控制器的视图的通用控制器？或者简单地说：**如何抽象视图**？

我看到了两种解决方案：**[控制反转](http://en.wikipedia.org/wiki/Inversion_of_control)**和**反射**。

让我们看看如何在一个简单的用例上实现这两者。假设您有以下通用`Shower<T>`类能够计算包含任何类型值的 HTML 表示的 HTTP 响应`T`：

```
public class Shower<T> {
  public Result show(T value) {
    // TODO return an HTML representation of `value`
  }
} 
```

# 控制反转

要`Shower<T>`使用控制反转来实现，我们只需要注入`Template1<T, Html>`用于执行渲染的值：

```
public class Shower<T> {

  public final Template1<T, Html> template;

  public Shower(Template1<T, Html> template) {
    this.template = template;
  }

  public Result show(T value) {
    return ok(template.render(value));
  }

} 
```

要在控制器中使用它，请创建一个静态实例`Shower<T>`并将其注入要使用的模板：

```
public class Application extends Controller {
  public static Shower<Foo> foo = new Shower<Foo>(views.html.Foo.show.ref());
} 
```

# 反射

您可能会发现它太样板而不必显式地注入要用于 的每个实例的模板`Shower<T>`，因此您可能很想根据命名约定通过反射来检索它，例如，要显示 type 的值`Foo`，只需查找一个对象`show`在包中命名`views.html.Foo`：

```
public class Shower<T> {

  private final Class<T> clazz;

  public Shower(Class<T> clazz) {
    this.clazz = clazz;
  }

  public Result show(T value) throws Exception {
    Class<?> object = Play.application().classLoader().loadClass("views.html." + clazz.getSimpleName() + ".show$");
    Template1<T, Html> template = (Template1<T, Html>)object.getField("MODULE$").get(null);
    return ok(template.render(value));
  }
} 
```

（这是使用反射访问 Scala 对象的方式）

您可以在控制器中按如下方式使用它：

```
public class Application extends Controller {
  public static Shower<Foo> foo = new Shower<Foo>(Foo.class);
} 
```

# 优点和缺点

基于反射的解决方案在调用站点上需要**较少的样板**，但它依赖于命名约定的事实使其**更加脆弱**。此外，此解决方案只会**在运行时失败时才会失败，而第一个解决方案会****在编译时**向您显示您丢失的模板。最后但同样重要的是，基于反射的解决方案可能会由于反射而增加一些**性能开销**。

# c# - 在 application.run 之后在 Windows 窗体上调用公共方法

> ID：10738185
> 
> 赞同：5
> 
> 时间：2012-05-24T13:12:11.253
> 
> 标签：c#, winforms

我有一个通常作为计划任务运行的 Windows 窗体，所以我的想法是我会在任务中传递命令参数以使其自动运行。这样我就可以在没有参数的情况下在本地运行它，以便在必要时手动运行它。但是我不太确定如何让它在作为任务运行时调用 Application.Run 之后调用新表单的方法。现在它只是显示表单并退出那里，而不是继续到 i.RunImport() 行。有任何想法吗？这是我的代码。谢谢。

```
static void Main(string[] args)
{
    Application.EnableVisualStyles();
    Application.SetCompatibleTextRenderingDefault(false);
    if (args.Length > 0)
    {
        if (args.Any(x => x == "run=1"))
        {
            var i = new Importer();
            Application.Run(i);
            i.RunImport();
        }
    }
    else
    {
        Application.Run(new Importer());
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T13:20:57.320

为事件编写事件处理程序`Form.Load`：

```
static void Main(string[] args)
{
    Application.EnableVisualStyles();
    Application.SetCompatibleTextRenderingDefault(false);
    if (args.Length > 0)
    {
        if (args.Any(x => x == "run=1"))
        {
            var i = new Importer();
            // modify here
            i.Load += ImporterLoaded;
            Application.Run(i);

            // unsubscribe
            i.Load -= ImporterLoaded;
      }
    }
    else
    {
        Application.Run(new Importer());
    }
}

static void ImporterLoaded(object sender, EventArgs){
   (sender as Importer).RunImport();
} 
```

# php - Doctrine2 应该自动合并关联实体

> ID：10738193
> 
> 赞同：3
> 
> 时间：2012-05-24T13:12:41.243
> 
> 标签：php, symfony, doctrine-orm

我正在构建一个订单流程，其中一个`Order`对象是通过许多步骤构建的。在每一步之后，我将部分完成的`Order`对象放入 . `session`，并在最后一步中将其保存到数据库中。

在这些步骤中，我将其他（已经存在的）关联对象加载到我的`Order`对象中（例如`DiscountCoupon`）。问题是，当我将`Order`其保存到`session`然后在下一步中加载它时，所有关联的实体都将被分离。所以当我想把它保存到数据库时，`EntityManager`抛出一个异常，要求`cascade=persist`在关系上设置一个。

当然，我不需要持久化这些对象（它们已经在数据库中）。显而易见的解决方案可能是将那些关联的对象更改为合并的对象（使用`EntityManager#merge`方法），但是，我有一个相当复杂的对象结构，其中包含多个级别的嵌入式实体，因此执行上述过程会相当不方便。

Doctrine 不能自动为我完成这项任务吗？因此，它可以自动合并它们，而不是“抱怨”我分离的实体。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T15:23:30.653

据我所知，如果你试图让它完全自动化，你会创造一些严肃的魔法。

您最好的选择可能是实现一个具有类似签名的函数：mergeOrderEntities($Order, $EntityManager)，它知道如何谈论 Order 结构并在所有分离的关联实体上调用 EntityManager::merge()。

至于为什么教义不会自动执行此操作，我不确定。我怀疑在某些用例中，实体的自动合并可能是危险的，或者至少是不可取的。

# java - Internet Exlorer 6 中的“未知名称”JSException 是什么？

> ID：10738197
> 
> 赞同：1
> 
> 时间：2012-05-24T13:12:51.790
> 
> 标签：java, javascript, applet, jsobject

我正在使用 JSObject 从我的 Applet 调用 Javascript 函数。

我的小程序的 SSCCE：

```
package ch.vrag.web;

import java.applet.Applet;
import java.security.AllPermission;
import java.security.CodeSource;
import java.security.PermissionCollection;
import java.security.Permissions;
import java.security.Policy;

import netscape.javascript.JSObject;

public class Sscce extends Applet {

private static final long serialVersionUID = -5403444704039831864L;

public void init() {
    try {
        Policy.setPolicy(new Policy() {
            Permissions perms = new Permissions();

            public PermissionCollection getPermissions(CodeSource codesource) throws SecurityException {
                AllPermission grant = null;
                grant = new AllPermission();
                perms.add(grant);
                return perms;
            }

            public void refresh() {
                // Do nothing
            }
        });
    }
    catch (Exception e) {
    }

    JSObject window = JSObject.getWindow(this);

    JSObject phoneNums = (JSObject) window.eval("getWindowRectangle()");

    int x;
    int y;
    int width;
    int height;

    if (phoneNums.getSlot(0) instanceof Integer) {
        x = (Integer) phoneNums.getSlot(0);
        y = (Integer) phoneNums.getSlot(1);
        width = (Integer) phoneNums.getSlot(2);
        height = (Integer) phoneNums.getSlot(3);
    }
    else if (phoneNums.getSlot(0) instanceof Double) {
        x = ((Double) phoneNums.getSlot(0)).intValue();
        y = ((Double) phoneNums.getSlot(1)).intValue();
        width = ((Double) phoneNums.getSlot(2)).intValue();
        height = ((Double) phoneNums.getSlot(3)).intValue();
    }
    else {
        return;
    }

    System.out.println("x: " + x + " y: " + y + " width: " + width + " height: " + height);

};
} 
```

我的 HTML 文件的 SSCCE：

```
 <?xml version="1.0" encoding="ISO-8859-1" ?>
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
        <script type="text/javascript">
        function getWindowRectangle(){

            var winX = (document.all)?window.screenLeft-2:window.screenX;
            var winY = (document.all)?window.screenTop-2:window.screenY;

            var winWidth = (document.all)?document.documentElement.offsetWidth+4:window.outerWidth;
            var winHeight = (document.all)?document.documentElement.offsetHeight+4:window.outerHeight;

            return([winX,winY,winWidth,winHeight]);
        }       
    </script>

    <title>SSCCE</title>
</head>
<body>
    this is an SSCCE
    <APPLET CODE="ch.vrag.web.Sscce.class" name="SSCCE" codebase="scripts" archive="Sscce.jar" width=0 height=0 MAYSCRIPT >
    </APPLET>
</body> 
```

这在 Internet Explorer 6 中效果很好。我有这个 Java 异常：

```
java.lang.Exception: netscape.javascript.JSException: Unknown Name 
```

这个异常有什么用？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T14:48:41.547

Internet Explorer 6 的命令似乎有问题`getSlot()`，但我可以使用解决方法。

使用此对象：
`JSObject phoneNums = (JSObject) window.eval("getWindowRectangle()");`

我可以从 phoneNumbs ( `phoneNums.toString();`) 中得到一个字符串，这个字符串以这种形式给我返回值：

> “数字 1，数字 2，数字 3，数字 4”

所以我可以拆分字符串并获得我需要的数字。

这个故事的寓意是，Internet Exlorer 6 不是现代的，不应该再使用了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T13:41:11.343

这与浏览器不能正确运行 Javascript 有关。确保 IE6 已修补到 SV3 版本，并且启用了 Javascript 以及可能的安全设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T15:15:51.950

[从 Java 读取/写入 HTML 字段值](http://www.rgagnon.com/javadetails/java-0177.html)的底部是细则：

> 为获得最佳结果，切勿在 Applet 的 init() 方法中使用 LiveConnect JSObject。

原因是它通常是`null`在那个时候。我`JSObject`在小程序`start()`方法中获得了对 的引用，取得了更大的成功。

* * *

```
JSObject phoneNums = (JSObject) window.eval("getWindowRectangle()"); 
```

我怀疑这应该是[`JSObject.call("getWindowRectangle()")`](https://developer.mozilla.org/en/LiveConnect/LiveConnect_Reference/JSObject#call)。对返回的 进行一些调试，`Object`在调试器中检查它以检查内容是否符合您的预期。

# php - 带有 jQ uery 的警报消息

> ID：10738204
> 
> 赞同：0
> 
> 时间：2012-05-24T13:13:29.973
> 
> 标签：php, jquery, css, html

如果 ，我需要输出警报消息`val = -1`，但问题是此消息出现在页面底部，这不取决于 val 的值。

```
if ($val == -1) 
        echo '
        <script>
            $(function() {
                $( "#dialog:ui-dialog" ).dialog( "destroy" );
                $( "#dialog-message" ).dialog({
                    modal: true,
                    buttons: {
                        Ok: function() {
                            $( this ).dialog( "close" );
                        }
                    }
                });
            });
        </script>
        ';
    else { //...  }

<div id="dialog-message" title="Process failed.">
<p><span class="ui-icon ui-icon-circle-check"
    style="float: left; margin: 0 7px 50px 0;"></span> Error message.</p>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T13:17:21.130

隐藏 div 使用 css

```
#dialog-message{
 display:none;
} 
```

为了获得更好的警报，有一个不错的警报、确认和提示插件，请使用该插件

[http://labs.abeautifulsite.net/archived/jquery-alerts/demo/](http://labs.abeautifulsite.net/archived/jquery-alerts/demo/)

它的下载页面在这里

[http://www.abeautifulsite.net/blog/2008/12/jquery-alert-dialogs/](http://www.abeautifulsite.net/blog/2008/12/jquery-alert-dialogs/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T13:21:48.803

您可以使用**位置**函数来定位对话框：

[关联](http://jqueryui.com/demos/position/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T13:16:05.140

老式的 alert() javascript 函数有什么问题？在这种情况下，它应该可以很好地完成工作。

# jquery - jQuery scrollLocal 问题

> ID：10738207
> 
> 赞同：0
> 
> 时间：2012-05-24T13:13:38.200
> 
> 标签：jquery, scroll

我一直试图让一个 jquery 插件工作但没有成功。该插件是“scrollTo”的“scrollLocal”部分，我试图使页面水平滚动到页面外部的 div。

据我所知，代码没有大问题，但由于某种原因它不执行动画。

我在这里都标记了：

[http://pastebin.com/6QeWprH3](http://pastebin.com/6QeWprH3)

任何人都可以找到解决此问题的方法或提供执行相同工作的替代方法吗？

编辑：作为参考，我试图达到类似于： http: [//michel-doudin.com/](http://michel-doudin.com/)

谢谢！！

本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T13:19:46.080

试试 jscrollpane，非常容易使用，你可以自定义一切[http://jscrollpane.kelvinluck.com/](http://jscrollpane.kelvinluck.com/)

# jquery - 在执行按钮的服务器端 onClick 事件后调用 jQuery 函数。

> ID：10738208
> 
> 赞同：0
> 
> 时间：2012-05-24T13:13:41.810
> 
> 标签：jquery, asp.net

在一个aspx页面中，如果我们对同一个控件使用`onClientClick`and ，事件会先触发后触发。`onClick``onClientClick``onClick`

`onClick`我想在触发事件后做点什么。例如，对于一个`Button`控件，我为其单击事件编写了代码`(button1_click)`。执行此代码后，我需要触发一些 jQuery 函数，是否可能。谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T13:28:58.283

在按钮单击事件例程结束时，使用 Page.RegisterStartupScript 使用 javascript 调用 JQuery 函数。链接中的示例。

[http://msdn.microsoft.com/en-us/library/system.web.ui.page.registerstartupscript.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.page.registerstartupscript.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T13:32:34.670

你可以只有 onClientClick="PostData"

```
<script language="javascript">
  function PostData(){
     //do something here
     __doPostBack("triggerBTN", "@@@@" + _paymentPageData);
  }
</script> 
```

在你的 aspx 页面中添加一个隐藏按钮

```
 <asp:Button runat="server" ID="triggerBTN" Visible="false" /> 
```

在代码隐藏页面中

```
var postBackArg = Request["__EVENTARGUMENT"];
        if (postBackArg != null)
            if (postBackArg.StartsWith("@@@@")) {
               //do your business logic here
            } 
```

希望对你有帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T13:33:09.770

如果您想在页面回发后调用 jQuery 函数，那么有几种方法可以做到这一点。

其中之一是使用`Page.RegisterStartupScript`or `Page.RegisterClientScriptBlock`。这两个都会在回发后将 javascript 输出到您的页面上。

我倾向于做的另一种方法是在页面上创建一个公共字符串`public string _JS`，然后在我的 .aspx 页面上我有以下代码；

```
<script>
    $(function(){ <%=_JS%> });
</script> 
```

通过这种方式，您可以构建`_JS`字符串，并且您知道它会在 DOM 加载后触发。

# ajax - 我可以更新标题栏吗？

> ID：10738211
> 
> 赞同：1
> 
> 时间：2012-05-24T13:13:57.247
> 
> 标签：ajax, jsf, primefaces

在上一个[问题](https://stackoverflow.com/questions/10671133/how-do-i-update-a-menu-bar-in-a-calling-template)中，我询问了有关更新菜单栏的问题。BalusC 告诉我，我需要添加包含菜单栏的表单。

我想扩展该问题以询问我是否可以更新标题中的文字。正在使用模板，我使用

```
 <ui:define name="AreaTitle">
        #{viewBacking.current.firstName}  #{viewBacking.current.surName}
    </ui:define> 
```

模板有

```
<h:head>
<title><ui:insert name="AreaTitle">Master template</ui:insert></title>
<link href="style.css" rel="stylesheet" type="text/css" media="screen" />
</h:head> 
```

在标题中定义一个表单似乎很奇怪，所以没有定义。我在 viewBacking.current 中设置了一个断点，以便查看它何时使用它。即使我点击刷新以重新显示表单，它也不会再次遇到断点。只有当我转到具有不同内容的不同页面时，它才会再次达到断点。刷新的是

```
public void refreshForm() {
    RequestContext context = RequestContext.getCurrentInstance(); 
    context.update("menuForm:masterMenuBar");
    context.update("AreaTitle");
} 
```

这显示了 BalusC 在 masterMenuBar 上给我的先前解决方案。很可能我不能做我要求做的事情，但如果是这样的话，我想确认一下。

谢谢，伊兰

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T13:52:19.163

`<title>`您不能仅仅因为不是 JSF 组件而通过 JSF ajax update 来更新标题。您也不能将 HTML 或 JSF 组件放入`<title>`，这是[非法](http://validator.w3.org)的HTML 语法。

最好的办法是使用 JavaScript 来更新标题，方法是将其分配给`document.title`. 你可以用`RequestContext#execute()`这个。

```
String fullName = current.getFirstName() + " " + current.getSurName();
context.execute("document.title='" + fullName + "'"); 
```

由于这似乎是用户控制的数据，我会使用[`StringEscapeUtils#escapeJavaScript()`](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringEscapeUtils.html#escapeJavaScript%28java.lang.String%29)它来逃避它以防止潜在的[XSS 攻击漏洞](http://en.wikipedia.org/wiki/Cross-site_scripting)。

```
String fullName = current.getFirstName() + " " + current.getSurName();
context.execute("document.title='" + StringEscapeUtils.escapeJavaScript(fullName) + "'"); 
```

另一种方法是使用[OmniFaces](http://omnifaces.org) [`<o:onloadScript>`](http://showcase.omnifaces.org/components/onloadScript)。

```
<o:onloadScript>document.title='#{of:escapeJS(viewBacking.current.firstName)} #{of:escapeJS(viewBacking.current.surName)}'</o:onloadScript> 
```

这将在每个 ajax 请求上重新执行。

# cakephp - CakePHP 从文件中解析数据并添加到数据库

> ID：10738216
> 
> 赞同：0
> 
> 时间：2012-05-24T13:14:07.010
> 
> 标签：cakephp

我有一个要解析并添加到数据库的文件。

我希望这样做的方式是：

1.  用户上传文件
2.  文件被解析
3.  为用户提供解析的数据并选择他们想要保留的内容
4.  他们提交

（更详细的解释如下）

我有一个电影脚本文件，我希望解析并输入场景及其各自的角色和道具。我已经设法使用 php 将此文件解析为一个数组。

我现在想做的是

1.  提示用户各种场景及其内容
2.  允许用户在将数据提交到数据库之前修复/修改数据。

问题是脚本文件中有多个场景，所以我不确定如何处理这个问题的数据输入方面。

这些类型的数据条目是否有任何“最佳实践”？

（如果我没有解释得足够详细，请告诉我，我会更新问题）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T13:21:16.547

我会简单地解析文件并将其保存到数据库中。像 Script hasMany Scenes 这样的东西。让他们选择他们的脚本并简单地对场景记录进行分页并让他们删除它们。

是否迫切需要在导入后*不*将它们全部保存？您的方法的另一个缺点是，如果浏览器崩溃或用户关闭它，他必须重新开始，因为您只是将数据保存在内存中，但不是持久的。

如果您想依赖您的方法，您将不得不处理从表单返回的数据，并且只需从表单数据中删除密钥。

就像在运行数据结构的 foreach 中执行此操作一样

```
if ($data['Scene][$key]['delete'] == 1) { unset($data['Scene'][$key]); } 
```

# c++ - 如何使用 shell 魔法使用 GNU etags 创建递归 etags？

> ID：10738219
> 
> 赞同：10
> 
> 时间：2012-05-24T13:14:22.853
> 
> 标签：c++, bash, gnu, etag, exuberant-ctags

标准 GNU`etags`不支持 exuberant 所做的递归遍历目录`ctags -R`。如果我只能访问 GNU etags，我如何使用 bash shell 魔术来获取 etags 为当前目录中的所有 C++ 文件`*.cpp`和`*.h`文件以及当前目录下的所有目录递归生成一个 TAGS 表具有正确路径名的当前目录，用于`emacs`解析 TAGS 表条目。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-25T02:09:35.007

[Emacs Wiki](http://www.emacswiki.org/emacs/)通常是解决常见问题或最佳实践的好来源。对于您的具体问题，有适用于 Windows 和 Unixen 的解决方案：

[http://www.emacswiki.org/emacs/RecursiveTags#toc2](http://www.emacswiki.org/emacs/RecursiveTags#toc2)

基本上，您运行一个命令来查找所有`.cpp`文件`.h`（如果您使用不同的文件结尾，例如，请更改文件选择器`.C`）并将结果通过管道传输到 etags。由于 Windows 似乎没有 xargs，因此您需要可以从标准输入读取的更新版本的 etags（请注意该行末尾的破折号表示标准输入）。当然，如果您使用最新版本的 etags，您也可以使用 dash 参数而不是 xargs。

**窗户**：

```
cd c:\source-root
dir /b /s *.cpp *.h *.hpp | etags --your_options - 
```

**Unix**：

```
cd /path/to/source-root
find . -name "*.cpp" -print -or -name "*.h" -print | xargs etags --append 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-05-16T18:03:36.500

此命令以递归方式为 .c、.cpp、.Cpp、.hpp、.Hpp .h 文件创建默认名称为“TAGS”的 etags 文件

```
find . -regex ".*\.[cChH]\(pp\)?" -print | etags - 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-07-01T20:06:32.010

此处发布的大多数答案都将`find`输出传递到`xargs`. 如果目录树内的文件名中有空格，则会中断。

如果文件名（用于`.c`和`.h`文件）中有空格，则更通用的解决方案可能是：

```
find . -name "*.[cChH]" -exec etags --append {} \; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T13:17:15.793

使用查找。如果需要，请查找。

# ftp - 将文件从一台机器传输到另一台机器

> ID：10738224
> 
> 赞同：0
> 
> 时间：2012-05-24T13:14:33.463
> 
> 标签：ftp, file-transfer

> 网络上有 2 台机器未安装 GUI 以节省内存。将文件从一台这样的机器传输到另一台类似的机器。

我认为可能的方法是 1\. 如果我们可以在网络上的另一台计算机上，我们可以将项目放入“共享”文件夹（或将现有文件夹设为“共享”）。2.在命令行上使用 ftp 协议并连接到其中一台充当 ftp 服务器的机器，并使用命令“get”从该机器下载文件以下载文件 3\. 在两台机器之间创建 TCP 连接。拥有该文件的一台机器将读取它并将其写入套接字和另一个将从套接字读取它。

可以有更多的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T13:16:06.060

通常的解决方案是使用 SCP 通过 SSH 连接传输文件。

# javascript - javascript/jQuery：如何在 jQuery 对话框中使用 click 事件中的 var？

> ID：10738227
> 
> 赞同：2
> 
> 时间：2012-05-24T13:14:42.033
> 
> 标签：javascript, jquery, jquery-ui, global-variables, jquery-ui-dialog

使用 jQuery 对话框打开一个模态框来确认，例如从朋友中删除特定用户。我想在模态框中使用朋友的名字（目前我在链接`php`的`name`-tag 中打印它并使用 jQuery 从那里获取它）。

```
//create the html for the modal box
var dialog_html_ignore = $('<div id="dialog-confirm" title="Ignore Friend Request?"><p>Some text... ignore [put the name here], ...?</p></div>')

//set up the jQuery dialog
var dialog_ignore=$( dialog_html_ignore ).dialog({
        autoOpen:false,
        resizable: false,
        modal: true,
        buttons: {
            "No": function() {
                $( this ).dialog( "close" );
            },
            "Yes": function() {
                window.location.href = targetUrl;
            }
        }
    });

//open the dialog on click event
$('.click_ignore').click(function() {
    window.fName = $(this).attr("name");
    alert(fName); /* this gives me the right username */
    dialog_ignore.dialog('open');
    return false;
}); 
```

如何/什么是实际使用用户名变量作为文本的一部分（在模式框的 html 中）的最佳方式？

任何帮助都非常感谢，在此先感谢您！！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T13:25:51.517

试试这个：

```
var dialog_html_ignore = $('<div id="dialog-confirm" title="Ignore Friend Request?"><p>Some text... ignore <span class="name"></span>, ...?</p></div>')

$('.click_ignore').click(function() {
    window.fName = $(this).attr("name");
    $(".name", dialog_html_ignore).text(fName);
    dialog_ignore.dialog('open');
    return false;
}); 
```

[**示例小提琴**](http://jsfiddle.net/ft5D8/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T13:29:35.540

我会将对话框 HTML 编写为页面中的实际 HTML，而不是作为要由`$`. 然后，我将通过 ID 选择它并对话化它，以便它立即隐藏。

我还将`<span id='ignore-dialog-fname'></span>`在对话框 HTML 中包含一个空，然后按 ID 选择以将其`textContent`/设置`innerText`为`fname`.

```
<script>
$(function() {
    //set up the jQuery dialog
    var dialog_ignore=$("#dialog-confirm").dialog({
        autoOpen:false,
        resizable: false,
        modal: true,
        buttons: {
            "No": function() {
                $( this ).dialog( "close" );
            },
            "Yes": function() {
                window.location.href = targetUrl;
            }
        }
    });

    //open the dialog on click event
    $('.click_ignore').click(function() {
        window.fName = $(this).attr("name");
        $("#ignore-dialog-fname").text(fName);
        dialog_ignore.dialog('open');
        return false;
    });
});
</script>

<div id="dialog-confirm" title="Ignore Friend Request?">
    <p>Some text... ignore <span id='ignore-dialog-fname'></span>, ...?</p>
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T13:32:36.737

在您的点击事件中使用以下代码，

```
dialog_html_ignore.attr("name", fname); 
```

在对话框中，您可以像这样访问

```
dialog_html_ignore.attr("name"); 
```

# objective-c - 调整帧大小后的 UITableView 滚动速度

> ID：10738235
> 
> 赞同：3
> 
> 时间：2012-05-24T13:15:20.197
> 
> 标签：objective-c, ios, cocoa-touch, ipad

我有一个 UITableView，它在 iPad 纵向模式下覆盖了一半的屏幕。每当我单击时，展开按钮计算并动画 tableview 的 superview 的框架以覆盖整个屏幕，滚动变得非常混乱和闪烁，即使只有一行。特别是弹跳动画似乎更长。TableView 被 autoresizeheight 屏蔽。在我恢复 superview 的框架后，tableview 滚动再次变得更平滑。tableview的初始帧和滚动速度之间有什么关系吗？这种行为的可能根本原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T09:24:11.050

也许您在 cellForRowAtIndexPath 方法中插入了调整大小，因此每次滚动时它都会设置大小表视图。我将此代码片段插入到 viewDidLoad 的检查中，然后大小将在开始时设置一次，一切正常。

```
CGPoint tvFrameO = _TableView.frame.origin;
CGSize tvFrameS = _TableView.frame.size;
float valueToResize = 50.0f;
_TableView.frame = CGRectMake(tvFrameO.x, 
                                     tvFrameO.y, 
                                     tvFrameS.width, 
                                     tvFrameS.height + valueToResize); 
```

# qt - 无法连接到父插槽

> ID：10738238
> 
> 赞同：0
> 
> 时间：2012-05-24T13:15:37.480
> 
> 标签：qt

我以为我开始明白这一点，但似乎没有。

我正在尝试将一个堆叠的小部件连接在一起，以便孩子们可以向父母发送一条消息，告诉它改变视图。QStackedWidget 是主窗口的子窗口，它的页面是由我自己创建的。我认为这是正确的做法吗？

因此，在其中一种儿童形式中，我尝试了以下方法：

```
// Set up a mapping between the buttons and the pages
QSignalMapper *mapper = new QSignalMapper(this);

mapper->setMapping(ui->automatedButton, 1); // Value of the index
connect(ui->automatedButton, SIGNAL(clicked()), mapper, SLOT(map()));

connect(mapper, SIGNAL(mapped(int)), ((QStackedWidget*)parentWidget()), SLOT(setCurrentIndex(int))); 
```

但这似乎不起作用。我单击按钮，没有任何变化。但是，如果我这样做：

```
void MySelectionForm::on_automatedButton_clicked()
{
    ((QStackedWidget*)parentWidget())->setCurrentIndex(1);
} 
```

我认为这和我以前做的一样吗？

我在运行时确实看到了消息，我猜这是相关联的：

```
QObject::connect: Cannot connect QSignalMapper::mapped(int) to (null)::setCurrentIndex(int) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T13:35:48.377

你有没有检查过你打电话时`parentItem()`没有回来？听起来可能是在构造函数*之后*设置了父项，这意味着确实会返回。我怀疑这可能就是 Qt Designer 的运行方式。如果是这样，您将需要在构造函数之外连接信号/插槽，或者在另一种方法中（在构造函数内部未调用的方法），或者完全在子节点之外。`NULL``QObject::connect()`*`parentItem()``NULL`*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T14:23:38.903

根据消息，

```
((QStackedWidget*)parentWidget()), SLOT(setCurrentIndex(int))); 
```

导致

```
(null)::setCurrentIndex(int) 
```

这意味着`parentWidget()`是`NULL`。

这基本上意味着表单不是`QStackedWidget`. 如果您手动创建表单，则必须执行以下操作

```
MyForm *form = new MyForm( ui->stackedWidget ); 
```*

# class - 学说 2 代理类中的 EntityNotFoundException

> ID：10738243
> 
> 赞同：5
> 
> 时间：2012-05-24T13:15:45.973
> 
> 标签：class, inheritance, proxy, mapping

访问原则 2 中的代理类属性时出现 EntityNotFoundException 的可能原因是什么？无论如何，以下是我的实体的结构：

```
/**
 * @ORM\Table(name="comments")
 *
 * @ORM\InheritanceType("JOINED")
 * @ORM\DiscriminatorColumn(name="comment_type", type="smallint")
 * @ORM\DiscriminatorMap({
 *    1 = "VisitorComment",
 *    2 = "MemberComment"
 * })
 */
 class Comment
 {
    //with common properties of its subclasses
 } 
```

子类如下：

```
/**
 * @ORM\Table(name="member_comments")
 */
class MemberComment extends Comment
{
    /**
     * owning side
     *
     * @var Member $author
     * 
     * @ORM\ManyToOne(targetEntity="Member")
     * @ORM\JoinColumn(name="author_id", referencedColumnName="id", nullable=false)
     */
     private $author;

    /**
     * Set author
     *
     * @param Member $author
     */
    public function setAuthor($author)
    {
        $this->author = $author;
    }

    /**
     * Get author
     *
     * @return Member
     */
    public function getAuthor()
    {
        return $this->author;
    }
}

/**
 * @ORM\Table(name="visitor_comments")
 */
class VisitorComment extends Comment
{
   /**
    * owning side
    *
    * @var Visitor $author
    * 
    * @ORM\ManyToOne(targetEntity="Visitor")
    * @ORM\JoinColumn(name="author_id", referencedColumnName="id", nullable=false)
    */
    private $author;

    /**
     * Set author
     *
     * @param string $author
     */
     public function setAuthor($author)
     {
        $this->author = $author;
     }

    /**
     * Get author
     *
     * @return Visitor
     */
    public function getAuthor()
    {
        return $this->author;
    }
} 
```

当我调用 $comment->getAuthor()->getFirstName() <*假设是 Member 或 Visitor 实体的作者具有 firstName 属性*时，会发生异常。在这种情况下，getAuthor() 返回一个 VisitorProxy 或 MemberProxy 的代理类。

请帮助我。我对教义还是新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-04T16:33:29.057

正如 Floricel 发现的那样，这可能是由指向 Proxy 类引用的表的列中的无效外键引起的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-14T05:05:21.463

@Dave Lancea 是对的，我将 FK 更改为非 Null，然后开始出现此错误，手动更新了损坏的记录，使其指向现有实体并且问题消失了。

# visual-studio - BuildingInsideVisualStudio 属性值不适用于文件参考和项目参考条件

> ID：10738246
> 
> 赞同：5
> 
> 时间：2012-05-24T13:16:00.833
> 
> 标签：visual-studio, msbuild, csproj

我正在尝试使用 BuildingInVsideisualStudio 属性在 csproj 中添加对同一 dll 的项目和文件引用。但是当它们一起在 csproj 中时，只会拾取文件引用。如果我删除文件引用，它会拾取 csproj。我曾尝试交换订单，但没有运气。任何想法为什么这不起作用？

这是基本思想：

```
<ItemGroup Condition="'$(BuildingInsideVisualStudio)' == false">
    <Reference Include="MyNamespace.Mine">
        <HintPath>..\$(OutDir)\MyNamespace.Mine.dll</HintPath>
    </Reference>
</ItemGroup>
<ItemGroup Condition="'$(BuildingInsideVisualStudio)' == '' Or '$(BuildingInsideVisualStudio)' == true">
    <ProjectReference Include="..\MyNamespace.Mine.csproj">
        <Project>{GUID}</Project>
        <Name>MyNamespace.Mine</Name>
    </ProjectReference>
</ItemGroup> 
```

[其他人](https://stackoverflow.com/questions/1872553/msbuild-conditional-construct-project-reference-file-reference)也走上了这条路，但似乎有[一些警告](https://stackoverflow.com/questions/1872553/msbuild-conditional-construct-project-reference-file-reference#comment4993647_1872699)。由于我的构建过程无法更改，因此我需要有条件地执行此操作。使用文件引用会迫使我失去 Go to Definition 和 Find All References（抱歉，我也无法安装 ReSharper 来解决这个问题）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-28T22:26:54.117

我看到的两个问题：

1.  您没有考虑到`$(BuildingInsideVisualStudio)`可以为空（`''`）。对于第一个条件使用：

    `<ItemGroup Condition="'$(BuildingInsideVisualStudio)' != 'true'">`

2.  始终用单引号将两个操作数括起来：

    `<ItemGroup Condition="'$(BuildingInsideVisualStudio)' == 'true'">`

* * *

[MSDN 参考：](http://msdn.microsoft.com/en-us/library/7szfhaft.aspx)

> 简单的字母数字字符串或布尔值不需要单引号。**但是，空值需要单引号。**

* * *

更新：

可能是一个很长的镜头，但您可以尝试在属性定义上使用条件：

```
<PropertyGroup Condition="'$(BuildingInsideVisualStudio)' != 'true'"><!-- In CMD -->
    <ReferenceInclude>MyNamespace.Mine"</ReferenceInclude>
    <ReferenceIncludePath>..\$(OutDir)\MyNamespace.Mine.dll</ReferenceIncludePath>
</PropertyGroup>
<PropertyGroup Condition="'$(BuildingInsideVisualStudio)' == 'true'"><!-- In VS -->
    <ProjectReferenceInclude>..\MyNamespace.Mine.csproj</ProjectReferenceInclude>
    <ProjectReferenceIncludeId>{GUID}</ProjectReferenceIncludeId>
</PropertyGroup> 
```

所以引用将有条件地得到解决：

```
<ItemGroup>
    <Reference Include="$(ReferenceInclude)">
        <HintPath>$(ReferenceIncludePath)</HintPath>
    </Reference>
</ItemGroup>
<ItemGroup>
    <ProjectReference Include="$(ProjectReferenceInclude)">
        <Project>$(ProjectReferenceIncludeId)</Project>
        <Name>%(ProjectReferenceInclude.MSBuildProjectName)</Name>
    </ProjectReference>
</ItemGroup> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T12:02:20.810

在 Visual Studio 2010 和 2012 中，您还可以使用选择语句而不是添加带有条件的引用。这似乎工作得更好：

```
<Choose>
  <When Condition="('$(VisualStudioVersion)' == '10.0' or '$(VisualStudioVersion)' == '') and '$(TargetFrameworkVersion)' == 'v3.5'">
    <ItemGroup>
      <Reference Include="Microsoft.VisualStudio.QualityTools.UnitTestFramework, Version=10.1.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a, processorArchitecture=MSIL" />
    </ItemGroup>
  </When>
  <Otherwise>
    <ItemGroup>
      <Reference Include="Microsoft.VisualStudio.QualityTools.UnitTestFramework" />
    </ItemGroup>
  </Otherwise>
</Choose> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T01:24:30.943

假设我在经过一些实验后正确理解了这个问题，似乎以不同的方式命名它们可以解决大部分问题；msbuild 会尊重条件并使用程序集引用，VS 会在解决方案资源管理器中显示它们，但会像项目类型一样预构建引用，并且会在没有 R# 工作的情况下保持 goto-definition。条件导入是其他值得研究的东西，但我还没有尝试过。

```
<ItemGroup>
    <ProjectReference Include="..\ClassLibrary1\ClassLibrary1.csproj" Condition="'$(Foo)'=='Bar1'">
        <Project>{FD0E01BC-7777-4620-9EF2-5F60804B3173}</Project>
        <Name>ClassLibrary1-ProjRef</Name>
    </ProjectReference>
    <Reference Include="ClassLibrary1" Condition="'$(Foo)'=='Bar2'">
        <Name>ClassLibrary1-AssRef</Name>
        <HintPath>..\ClassLibrary1\bin\Debug\ClassLibrary1.dll</HintPath>
    </Reference>
</ItemGroup> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T14:38:32.570

微软在 Connect 上[对此](https://connect.microsoft.com/VisualStudio/feedback/details/666113/conditional-projectreference-in-visual-studio)问题的回复表明，Visual Studio 故意忽略程序集引用的条件，无论项目与否。这是可以理解的；但是，当项目文件包含对同一程序集的多个引用时，解析过程似乎总是更喜欢基于文件的引用，这是没有实际意义的。

简而言之，你很不走运，除非有办法告诉 VS 考虑项目引用，即使文件引用存在于同一个程序集中。我不知道这样做的方法，我也有兴趣了解它是否仍然可能以某种方式。

# c# - 删除任何特殊字符之前的字符c#

> ID：10738250
> 
> 赞同：1
> 
> 时间：2012-05-24T13:16:06.137
> 
> 标签：c#, regex

我正在尝试删除字符串中任何非字母数字字符之前的字符。例如，假设您有一个名字“James Ebanks-Blake”，我可以使用以下方法将其拆分为一个数组：

```
var s = "James Ebanks-Blake".Split(' '); 
```

即使有多个空格，它也只会创建更多的数组索引。所以我需要做的是遍历所有数组，找到带有特殊字符的索引，然后删除所有索引和特殊字符。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T13:22:02.937

这在这里有效

```
[-^$#](.*) 
```

只需在字符类中添加您认为的特殊字符

您想要的字符串将在第 1 组中

```
resultString = Regex.Match(subjectString, "[-^$#](.*)", RegexOptions.Singleline).Groups[1].Value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T13:22:44.340

`[-'](.*)`

那应该抓住 a`-`和 a之后的任何东西`'`。如果需要，可以在 [ ] 部分添加更多字符。只要确保逃避特殊的正则表达式。

# html - 菜单栏布局解决方案

> ID：10738251
> 
> 赞同：2
> 
> 时间：2012-05-24T13:16:09.930
> 
> 标签：html, css

我在创建正确的菜单栏布局时遇到了一些问题。

我的菜单栏分为三个部分：

**left (logo)** , **center (menu)** , **right (登录信息)**

还有两种不同的菜单，一种是管理员菜单（很少有额外的按钮 - 宽度为 701px）和普通用户菜单（宽度为 447px）。

整个菜单栏宽度设置为 100%。

现在我需要帮助的是为每个部分设置宽度属性。

*如果我将固定宽度（px）设置为中心（菜单）部分，我无法计算出其他两个部分的正确宽度百分比。由于屏幕分辨率较小（菜单保持宽），我也无法为其他部分设置固定宽度值。*

*如果我将百分比宽度设置为中心（菜单）部分，菜单可能会在较小的屏幕分辨率下中断。*

那么最好的解决方案是什么？

**HTML：**

```
<body>
    <div id="main">
        <div id="left"></div>
        <div id="center"></div>
        <div id="right"></div>
    </div>
</body> 
```

**CSS：**

```
#main {
    width:100%;
    height:77px;
    background-color:#373737;
    }

    #left, 
    #center,     
    #right {
        height:77px;
        }

    #left {
        float:left;
        } /* width? % or px*/

    #center {
        display:inline-block;
        } /* width? % or px*/

    #right {
        float:right;
        } /* width? % or px*/ 
```

管理菜单栏： ![在此处输入图像描述](../Images/64572c8b654762bef9438dbd168191e5.png)

普通用户菜单栏： ![在此处输入图像描述](../Images/ab3d675d792e8d58685f2a7412faf60b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T13:38:22.367

如果您希望以百分比汇总到主 div 的 100%，您可以尝试这个 CSS 并调整每个宽度：

* * *

```
#main {

    width:100%;
    height:77px;
    background-color:#373737;
    padding:5px;
}

#left, #center, #right {height:77px;}

#left {float:left;background-color:black;width:25%}  /*width? % or px*/
 #center {display:inline-block;background-color:blue;width:50%; float:left}/* width? % or px*/
#right {float:left;background-color:yellow;width:25%}  /*width? % or px*/​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T14:14:40.397

我认为您可能必须使用 JavaScript 来根据需要调整元素的大小。有几种解决方案，但没有一个允许混合动态和静态宽度。

浮动是因为当你降低屏幕尺寸时它们会跳来跳去。除非你想让它们在太小时低于其他部分。

只需将每个 div 视为一个单独的元素，而不是将它们一起工作。如果您的目标是跨浏览器兼容性，我强烈建议您不要在这种情况下使用浮点数。

*   祝你好运。:)

# php - Mysql查询问题

> ID：10738258
> 
> 赞同：1
> 
> 时间：2012-05-24T13:16:27.073
> 
> 标签：php

我的数据库表（**Name:Wall**）结构如下：

```
-----------------------------------------------------
id(type = int)    like(type = int)       wall_id(type =int)           
-----------------------------------------------------
1                 0                        1
2                 0                        2
----------------------------------------------------- 
```

在 wall.php 文件中有一个文本按钮名称“ **Like this** ”。**那么有没有什么办法在点击这个文本（像这样**）后向Mysql数据库发送查询。

其实我想创建一个类似的系统。如果有人喜欢用户墙帖子，那么他/她可以单击此文本（**喜欢这个**）来喜欢用户墙。所以每次点击后，mysql数据库之**类**的字段值应该增加1。

通常我可以通过以下方式向数据库发送查询：

```
$sql = mysql_query("INSERT INTO wall VALUES('', '1')"); 
```

谁能给我解决方案:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T13:20:37.337

```
$sql = mysql_query("UPDATE wall SET like = like+1 WHERE wall_id = ". (int)$wall_id ); 
```

# mysql - Mysql，实现日期时间列

> ID：10738265
> 
> 赞同：0
> 
> 时间：2012-05-24T13:16:53.740
> 
> 标签：mysql, database

我有一个带有时间戳列的 mysql 表。我们现在要做的是使 datetime 列中的时间戳更新。

例如，当最新记录是 10 小时前。我想在每行的日期时间上增加 10 小时。在该操作之后，最新的时间戳具有 value= now()

这可以通过一个查询来实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T13:59:33.410

这现在有效（经过测试）：

```
SELECT MAX(`timestamp`) FROM yourTable INTO @a_variable;
UPDATE yourTable
SET `timestamp` = DATE_SUB(`timestamp`, INTERVAL TIMESTAMPDIFF(SECOND, NOW(), @a_variable) SECOND) 
```

有关更多信息，请参阅[手册](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T13:21:35.107

您是否尝试过在 UPDATE 查询中使用子查询？（请注意，我没有对此进行测试，但我想它应该可以工作）

```
UPDATE table
SET timestamp = ADDTIME(timestamp,
                       (SELECT TIMEDIFF(NOW(), timestamp)
                        FROM table
                        ORDER BY timestamp DESC
                        LIMIT 1)) 
```

# c++ - C++ 中数组允许的最大维数是多少？

> ID：10738267
> 
> 赞同：20
> 
> 时间：2012-05-24T13:16:57.933
> 
> 标签：c++, multidimensional-array

您可以声明一个包含 10 个元素的非常简单的数组并以这种方式使用它：

```
int myArray[10];
myArray[4] = 3;
std::cout << myArray[4]; 
```

或者将具有 10x100 个元素的二维数组声明为`int myArray[10][100];`

甚至创建更复杂的 3-d 数组`int myArray[30][50][70];`

我什至可以写：

```
int complexArray[4][10][8][11][20][3];
complexArray[3][9][5][10][15][3] = 5;
std::cout <<  complexArray[3][9][5][10][15][3]; 
```

那么，**声明数组时可以使用的最大维数是多少？**

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-24T13:21:27.913

该标准建议实现至少接受 256（ISO 14882，B.2），但它们可能支持更少或更多：

> 这些限制可能会限制包括以下描述的数量或其他数量。建议将每个数量后面的括号中的数字作为该数量的最小值。但是，这些数量仅作为指导，并不能确定合规性。
> 
> […]
> 
> — 指针、数组和函数声明符（任意组合）修改声明中的算术、结构、联合或不完整类型 [256]。

在 C++03 和 C++11 中都是一样的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-01-05T16:03:42.467

我的第一篇文章！

值得一提的是，我的系统上的限制是静态分配时只有 30 个维度，而在堆栈上分配时是 19 个维度。系统是 AMD A10-7700K，64 位（8 GB RAM）。使用默认设置在 Visual C++ 2013 上编译。

请注意，为了确定系统上的最大值，请使用具有最小维度大小 (2) 的最小数据类型 (char)。当维度为 1 时没有限制，因为 1 的维度（在任何维度中）都是多余的，并且不会影响数组的整体大小。按理说，数据类型越大或维度的大小越大，您可以拥有的维度就越少。但是，我发现任何一个（并且只有一个）维度都可以是 3，但不能是 4。

```
#include<iostream>
int main()
{
   char a[2][2][2][2][2][2][2][2][2][2][2][2][2][2][2][2][2][2][2] = {0}; // ok
   char b[2][2][2][2][2][2][2][2][2][2][2][2][2][2][2][2][2][2][2][2] = {0}; // fail!
   static char c[2][2][2][2][2][2][2][2][2][2][2][2][2][2][2][2][2][2][2][2][2][2][2][2][2][2][2][2][2][2] = {0}; // ok
   static char d[2][2][2][2][2][2][2][2][2][2][2][2][2][2][2][2][2][2][2][2][2][2][2][2][2][2][2][2][2][2][2] = {0}; // fail!

} 
```

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2014-05-07T16:01:36.993

写入数组时唯一的限制是计算机的内存容量。

# ajax - Ajax 回调找不到授权标头

> ID：10738268
> 
> 赞同：0
> 
> 时间：2012-05-24T13:16:58.763
> 
> 标签：ajax, wcf, http-headers, xmlhttprequest

我尝试使用 ajax (xmlHttpRequest) 使用 WCF 服务 (REST)。该服务需要基本身份验证。

我的ajax调用是：

```
 var httpRequest = new XMLHttpRequest();
         httpRequest.onreadystatechange = function () {
             if (httpRequest.readyState == 4) {
                 if (httpRequest.status == 200) {
                     //do some stuff
                 }
             }

         };
         httpRequest.open('PUT', 'http://localhost:59000/v1/users/1', true, 'user1', 'user1');
         httpRequest.withCredentials = "true";
         //must authenticate both..in open() but also set header manually ...cf http://stackoverflow.com/questions/1358550/xmlhttp-request-basic-authentication-issue
         httpRequest.setRequestHeader('Auhtorization', 'Basic user1:user1');
         httpRequest.setRequestHeader('Accept', 'application/json');
         // overridemimeType() does not set content type header .... don't know why ?
         httpRequest.setRequestHeader('Content-Type', 'application/json');
         var params = { "UserName": "user1" };
         var requestBodyString = JSON.stringify(params);
         httpRequest.send(requestBodyString); 
```

我首先在服务器端处理请求的方式如下

```
 HttpContext.Current.Response.AddHeader("Access-Control-Allow-Origin",
                      crossDomain);

        //preflight request : cf https://developer.mozilla.org/en/http_access_control 
        if (HttpContext.Current.Request.HttpMethod == "OPTIONS")
        {
            HttpContext.Current.Response.AddHeader("Access-Control-Allow-Methods",
                          "GET, POST, PUT, DELETE");
            HttpContext.Current.Response.AddHeader("Access-Control-Allow-Credentials", "true");

            HttpContext.Current.Response.AddHeader("Access-Control-Allow-Headers", "Content-Type, Authorization, Accept, DummyOneForTest");

            HttpContext.Current.Response.AddHeader("Access-Control-Max-Age",
                          "1728000");
            HttpContext.Current.Response.End();
        } 
```

我的浏览器向我发送错误“请求标头字段授权不受 Access-Control-Allow-Headers 的允许”，但您可以看到它在响应标头中。

此外，当我尝试使用 Fiddler 时，一切都很好，我什至允许标题虚拟一个。

所以我真的很困惑，如果有人可以帮忙，请做！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T08:52:52.100

明白了，在“使用 Visual Studio 开发服务器”上运行服务器时，当您尝试添加标头（第二个代码块）时抛出异常：“此操作需要 IIS 集成管道模式”。

解决方案是在应用程序配置中“使用 IIS Web 服务器”

根据此链接[http://msdn.microsoft.com/en-us/library/d14azbfh.aspx#addexceptionscommand](http://msdn.microsoft.com/en-us/library/d14azbfh.aspx#addexceptionscommand)

您不能要求 Visual Studio 告诉您何时抛出异常而我错过了它。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T19:52:14.160

也许它不相关，但上面的 Ajax 片段也将标题名称拼错为“Authorization”而不是“Authorization”。

# java - 具有外部资源目录的 Java Web 应用程序

> ID：10738273
> 
> 赞同：0
> 
> 时间：2012-05-24T13:17:22.320
> 
> 标签：java, spring, tomcat, war

我有一个作为 Java 战争文件运行的站点。这很好，除了引用站点地图。

是否可以将 Java/Spring/Tomcat 配置为让 WAR 文件处理所有站点，并在战争之外拥有站点地图？有很多链接，所以我有一个 sitemapindex.xml 文件和多个 (140) sitemap.xml 文件。索引文件位于 Web 应用程序的根目录中，站点地图文件位于根目录的文件夹 (/sitemaps) 中。

我理想地寻找的是某种方式说 /sitemaps 文件夹是 WAR 之外的物理文件夹，以便不同的团队可以处理站点地图的生成。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T13:21:23.157

你可以让tomcat允许符号链接

[http://www.isocra.com/2008/01/following-symbolic-links-in-tomcat/](http://www.isocra.com/2008/01/following-symbolic-links-in-tomcat/)

然后创建一个，假设你在 unix

# android - 如何在 Android 中设置音频均衡器

> ID：10738278
> 
> 赞同：6
> 
> 时间：2012-05-24T13:17:34.863
> 
> 标签：android, audio

我正在制作一个媒体播放器，其中需要使用“seek bar”作为“Bass”、“terrible”、“Rock”、“Pop”、“Medium”来设置均衡器效果。我得到了一个链接，其中使用了一些 NDK 库。是否有任何 Java 库可以做到这一点，请解释一下这样做的逻辑是什么。

```
 @Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.equalizertab);

      f
   }
  } else {
   try {
    ((GlobalState) getApplicationContext())
      .resetEQ();
   } catch (RemoteException re) {
    // TODO:
   }
  }
 }
}); 
```

在下面注销 cat：

```
05-25 11:52:16.630: E/AndroidRuntime(19088): FATAL EXCEPTION: main
05-25 11:52:16.630: E/AndroidRuntime(19088): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.android.apis.media/com.example.android.apis.media.AudioFxDemoActivity}: java.lang.RuntimeException: Cannot initialize Visualizer engine, error: -1
05-25 11:52:16.630: E/AndroidRuntime(19088):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1818)
05-25 11:52:16.630: E/AndroidRuntime(19088):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1834)
05-25 11:52:16.630: E/AndroidRuntime(19088):    at android.app.ActivityThread.access$500(ActivityThread.java:122)
05-25 11:52:16.630: E/AndroidRuntime(19088):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1027)
05-25 11:52:16.630: E/AndroidRuntime(19088):    at android.os.Handler.dispatchMessage(Handler.java:99)
05-25 11:52:16.630: E/AndroidRuntime(19088):    at android.os.Looper.loop(Looper.java:132)
05-25 11:52:16.630: E/AndroidRuntime(19088):    at android.app.ActivityThread.main(ActivityThread.java:4126)
05-25 11:52:16.630: E/AndroidRuntime(19088):    at java.lang.reflect.Method.invokeNative(Native Method)
05-25 11:52:16.630: E/AndroidRuntime(19088):    at java.lang.reflect.Method.invoke(Method.java:491)
05-25 11:52:16.630: E/AndroidRuntime(19088):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:844)
05-25 11:52:16.630: E/AndroidRuntime(19088):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:602)
05-25 11:52:16.630: E/AndroidRuntime(19088):    at dalvik.system.NativeStart.main(Native Method)
05-25 11:52:16.630: E/AndroidRuntime(19088): Caused by: java.lang.RuntimeException: Cannot initialize Visualizer engine, error: -1
05-25 11:52:16.630: E/AndroidRuntime(19088):    at android.media.audiofx.Visualizer.<init>(Visualizer.java:182)
05-25 11:52:16.630: E/AndroidRuntime(19088):    at com.example.android.apis.media.AudioFxDemoActivity.setupVisualizerFxAndUI(AudioFxDemoActivity.java:151)
05-25 11:52:16.630: E/AndroidRuntime(19088):    at com.example.android.apis.media.AudioFxDemoActivity.onCreate(AudioFxDemoActivity.java:53)
05-25 11:52:16.630: E/AndroidRuntime(19088):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1050)
05-25 11:52:16.630: E/AndroidRuntime(19088):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1782) 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-24T13:46:16.397

您可以在 AudioFxDemo 类中找到均衡器。

这是您可以找到锻炼权限的链接：

[Android Visualizer 实现崩溃](https://stackoverflow.com/questions/8595692/android-visualizer-implementation-crash)

# php - facebook app获取userID绕过Oauth2.0

> ID：10738279
> 
> 赞同：0
> 
> 时间：2012-05-24T13:17:39.880
> 
> 标签：php, facebook, facebook-like, facebook-fql

我想创建一个类似于此页面的 Facebook 应用

[https://www.facebook.com/carlorinosg/app_150206515038121](https://www.facebook.com/carlorinosg/app_150206515038121)

用户点击喜欢，页面会检查用户是否使用正确的用户ID点击“喜欢”，它将允许用户访问下面的内容。

如果我没记错的话，所有 fb 应用程序都需要用户通过权限页面才能与应用程序交互。

然而，这个应用程序似乎允许用户点击喜欢并通过 $facebook->getUser(); 获取用户 ID。（如果我没记错的话）**没有经过许可页面**..

我想知道如何实现与这个 facebook 应用程序相同的设计？

为什么UID总是返回null。? 下面的代码

```
 <?php
            require_once("facebook.php");
            $config = array();
            $config['appId'] = 'xxx';
            $config['secret'] = 'xxxx';
            $config['fileUpload'] = false; // optional

            $facebook = new Facebook($config);

                $fql = 'SELECT  uid FROM user where uid = me()';
                        $ret_obj = $facebook->api(array(
                            'method' => 'fql.query',
                            'query' => $fql,
                                ));

                        var_dump($ret_obj );
            ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T14:55:14.687

1）如果您需要用户 ID 或用户信息或来自 facebook 的任何类型的数据，那么您需要要求用户授权该应用程序。

2）如果您不关心查看应用程序的用户是谁，但您想查看用户是否喜欢您的页面，那么您可以使用此代码并在用户喜欢页面时显示内容。

```
<?php
 require 'facebook/src/facebook.php';
 $facebook = new Facebook(array(
  'appId'  => $CONF['FB_APP_ID'],
  'secret' => $CONF['FB_APP_SECRET'],
  'cookie' => false,
 ));

 // Get User ID
 $user = $facebook->getUser();
 $signed_request = $facebook->getSignedRequest();
 $like_status = $signed_request["page"]["liked"];
 if($like_status == 1){ 
 echo 'You liked the page. so you are able to see this';
 }else{  echo 'Please like the page to access'; 
 } ?> 
```

3）如果您不关心查看应用程序的用户是谁并且您不希望用户喜欢，请发送 html 页面。

# php - 上传 1 个文件后，第 0 行的未知中已超出允许的最大文件上传数

> ID：10738280
> 
> 赞同：0
> 
> 时间：2012-05-24T13:17:42.160
> 
> 标签：php, linux

我知道这是一个通常与批处理文件上传有关的问题，因为默认的 php 设置应该是 20 个文件。但是，当我尝试处理单个文件上传时，我得到一个空的 $_FILES 数组和一个错误

第 0 行的未知中已超过允许的文件上传的最大数量

出现在日志文件中。

服务器正在运行 php 版本 5.2.9，即使我尝试在 php.ini 中设置 max_file_uploads 也没有任何反应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T08:35:12.063

事实证明，托管公司的布偶错误地设置了我的服务器。他用 php 5.3 安装它，但无法让它工作，所以恢复到 5.2.9。功能 max_file_uploads 似乎保留在安装中，并且由于它在 5.2.9 中不存在，它总是失败。

# excel - 轻松参考偏移中的单元格

> ID：10738284
> 
> 赞同：1
> 
> 时间：2012-05-24T13:17:45.623
> 
> 标签：excel, vba, reference

我有一个包含许多公式的工作表，这些公式在上方或右侧的一个单元格中显示。如果我使用 ctrl-D 填充行，则公式会正确更新（因此 B2 中的 =B1 + A2 变为 B3 中的 =B2+A3）。但是当我在行之间插入时，事情变得一团糟（所以在 B3 上方插入一行，将其移动到 B4 使其公式变为 =B2+A4，这不是我想要的）

所以我想创建一个 CellAbove 和 CellRight 公式（所以我可以写 =CellAbove() + CellRight()）。我怎样才能做到这一点？

我的尝试：

```
Function CellAbove()
   CellAbove = [Address(Row() - 1, Column())].Value
End Function 
```

不起作用。

更新：下面的功能有效，但有它的单元格没有更新：

```
Function CellAbove()
   CellAbove = Range([Address(Row() - 1, Column())])
End Function 
```

因此，如果 A1 有 2 而 A2 有 =CellAbove() 那么 A2 将显示 2。但是如果现在我将 A1 更改为 3，那么 A2 仍将显示 2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T13:53:27.023

=INDIRECT("R"&ROW()-1&"C"&COLUMN(),FA​​LSE) 将作为函数工作。

假设您在 B2 上。然后括号内的位将评估为 R1C2。然后，INIDRECT 函数将计算第 1 行第 2 列的内容（您需要 FALSE 以确保您使用的是 R1C1 样式的单元格地址）。

我相信您可以使用以下方法做一些更简单的事情：

偏移量（当前单元格，-1,0）

但我看不到您如何引用当前单元格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T14:36:51.980

由于您的功能有效，而且您似乎只需要在插入行时重新计算即可。你说：

“但是拥有它的单元格没有更新”

用户定义函数默认情况下不是易失性的，因此它们不会自动重新计算。您可以将现有功能更改为此。

```
Function CellAbove()
 Application.Volatile (True)
 CellAbove = Range([Address(Row() - 1, Column())])
End Function 
```

这可能会影响性能，但似乎是您所要求的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T13:53:12.020

***你的功能***

```
Function CellAbove()
   CellAbove = Range([Address(Row() - 1, Column())])
End Function

Function CellRight()
   CellRight = Range([Address(Row(), Column() + 1)])
End Function 
```

***可以称为***

```
Function test000000()
    ActiveCell = CellAbove + CellRight
End Sub 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T13:59:27.257

您可以使用内置的 Excel 函数（如 INDIRECT、ADDRESS、ROW 和 COLUMN）来执行此操作，如...

```
=INDIRECT(ADDRESS(ROW()-1,COLUMN())) 
```

...对于上面的单元格，或者...

```
=INDIRECT(ADDRESS(ROW(),COLUMN()+1)) 
```

...对于右侧的单元格。

再次使用内置功能的另一种方法是使用 OFFSET 函数。例如，在单元格 B2 中，您可以输入公式...

```
=OFFSET(B2,-1,0) 
```

...对于上面的单元格，或者...

```
=OFFSET(B2,0,1) 
```

...对于右侧的单元格。它看起来像一个循环引用，但事实并非如此，因为您引用的不是同一个单元格的值，而是它的地址。

无论哪种方式，您都或多或少失去了使用“Trace Dependents”和“Trace Precedents”功能的能力，因为每个单元格基本上只引用自己。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T14:03:00.780

跟进我的评论。我们不需要 vba :)

插入空白行后

**第1步**

将公式从 下拉`B2`到`B3`或直接选择`B3`并按下`CTL D`

**第2步**

选择单元格`B3`。双击单元格的右下角进行自动填充。

![在此处输入图像描述](../Images/bead71d560f2fc0e77c54266c313a14b.png)

# ruby-on-rails-3 - netzke extjs 4 rails Grid 不可见

> ID：10738287
> 
> 赞同：0
> 
> 时间：2012-05-24T13:17:54.897
> 
> 标签：ruby-on-rails-3, extjs, netzke

我正在玩 ExtJs 4.x 和 netzke gems (netzke-basepack (0.7.4) netzke-core (0.7.5) netzke-persistence (0.1.0)

我已经正确配置了所有内容，但当然，一定有问题，因为我在浏览器上看不到我的 GridPane。

如果我检查源页面，我可以正确地看到 div

我可以看到 netzke 构建的 ExtJs 代码，甚至是从我的控制器中获取的数据......

但它在浏览器上不可见。

我错过了什么？

在视图 application.html.erb 我已正确初始化它：

```
 <%= netzke_init %>
  <%= csrf_meta_tags %> 
```

并且 ExtJs javascript 在 Public 文件夹中正确符号链接。

调用 Grid 对象的代码：

```
 <%= netzke :expedient, :class_name => "Netzke::Basepack::GridPanel" , :model => "Expedient" %> 
```

谢谢，

## 编辑：

使用 ExtJS 4.0.x 而不是 ExtJS4.1.x 解决

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T08:41:35.963

使用 ExtJS 4.0.x 而不是 ExtJS4.1.x 解决

# coffeescript - Coffeescript 中的文字数组

> ID：10738288
> 
> 赞同：13
> 
> 时间：2012-05-24T13:17:59.280
> 
> 标签：coffeescript

在 JS 中创建文字数组时：

```
[{ name: 'david', value: 'blue' }, { name: 'harold', value: 'orange' }] 
```

我能看到在 Coffeescript 中写这个的唯一方法是：

```
[
  name: 'david'
  value: 'blue'
,
  name: 'harold'
  value: 'orange'
] 
```

对我来说，这很丑陋，那个“浮动”逗号并不能很好地放置。是否有任何替代语法？我知道你可以继续在 Coffeescript 中使用 JS 风格的方法，但我希望能有更简洁的东西。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-24T16:40:24.910

我不记得为什么会这样，或者即使它对您有用，但它是您正在编写的代码的另一种替代方案。

```
[
  {}= name: 'david', value: 'blue'
  {}= name: 'harold', value: 'orange'
] 
```

[是的，这似乎有效。](http://coffeescript.org/#try:%5B%0A%20%20%7B%7D=%20name:%20%27david%27,%20value:%20%27blue%27%0A%20%20%7B%7D=%20name:%20%27harold%27,%20value:%20%27orange%27%0A%5D)

这似乎也很奇怪。我敢肯定有一个简单的原因，但我不确定。

```
[
  {}= 
    name: 'david'
    value: 'blue'
  {}= 
    name: 'harold'
    value: 'orange'
  {}= 
    name: 'david'
    value: 'blue'
] 
```

[查看编译后的代码。](http://coffeescript.org/#try:%5B%0A%20%20%7B%7D=%20%0A%20%20%20%20name:%20%27david%27%0A%20%20%20%20value:%20%27blue%27%0A%20%20%7B%7D=%20%0A%20%20%20%20name:%20%27harold%27%0A%20%20%20%20value:%20%27orange%27%0A%20%20%7B%7D=%20%0A%20%20%20%20name:%20%27david%27%0A%20%20%20%20value:%20%27blue%27%0A%5D)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-24T13:26:43.013

这似乎是每个 CoffeeScript 开发人员都会遇到的一件事。

恐怕这就是我们现在所拥有的一切。我能想到的唯一其他选择是：

```
[
  { name: 'david', value: 'blue' }
  { name: 'harold', value: 'orange' }
] 
```

……但它本身远非理想。

如果有人想建议一种替代的、简洁的和 CS-y 语法，我很乐意尝试在解析器中实现它并为它提出拉取请求。我很想有比这更好的。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-24T17:08:51.337

要摆脱对象文字中的逗号，您可以使用：

```
[
  {
    name: 'david'
    value: 'blue'
  }, {
    name: 'harold'
    value: 'orange'
  }, {
    name: 'david'
    value: 'blue'
  }
] 
```

或者，如果你*真的*讨厌逗号：

```
[
  {
    name: 'david'
    value: 'blue'
  }
  {
    name: 'harold'
    value: 'orange'
  }
  {
    name: 'david'
    value: 'blue'
  }
] 
```

虽然我个人觉得浮动逗号缩进一级，看起来还不错：

```
[
    name: 'david'
    value: 'blue'
  , 
    name: 'harold'
    value: 'orange'
  , 
    name: 'david'
    value: 'blue'
] 
```

我认为当对象字面量开始和结束时它非常明显，并且几乎不可能忘记对象字面量之间的逗号 =D

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-21T18:02:13.623

@Yuki Izumi 询问应该如何实施（我没有业力直接评论他的回复）。

我在coffeescript中幼稚地尝试做的是这样的：

```
arrayOfLiterals =
  'somekey': 'someval'
  'otherkey': 'otherval'
     'keyInOtherArrayElement': 'andItsVal'
     'yetMoreInSecondElement': 'andItsVal'
  'thirdElement': 'val'
     'fourthElement': 'val' 
```

这是我的两分钱

# javascript - Grease Monkey 脚本不运行 - 第一次脚本尝试

> ID：10738293
> 
> 赞同：0
> 
> 时间：2012-05-24T13:18:10.460
> 
> 标签：javascript, greasemonkey

好的，所以我创建了一个小脚本，我想根据页面上某些标签中的数据更改表格行的格式，离线脚本工作正常，但我正在尝试调整它以作为用户脚本提供油脂猴，首先我的脚本不会通过站点安装，其次当我使用“新用户脚本”在本地安装时，它似乎什么也没做，控制台也没有记录任何内容，这是我的代码：

```
// // ==UserScript==
// @name    Cerberus Time-since Row Colouring
// @author  David Duke, Luke Mulholland-Helme-Kelsall 
// @description Looks for ABBR tags and their title parameter, and then calculates the time difference between Now and the timestamps. The parent table row then has an appropraite CSS class added to it based on the time difference calculated.
// @include http://{removed url}/*
// @require     http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// @require     http://www.datejs.com/build/date.js

// ==/UserScript==
$(document).ready(function(){
$('abbr').each(function(index){
    var _then = Date.parse($(this).attr('title'));
    var _now = new Date().getTime();
    _then = _then.getTime();            
    var a_minute = 60000;
    if(_now < _then + (a_minute*30)){
        $(this).parent(tr).css("background-color","green");
    } else if(_now < _then + (a_minute*60)){
        $(this).parent(tr).css("background-color","yellow");
    } else {
        $(this).parent(tr).css("background-color","red");
    }
    console.log("title:" + $(this).attr('title') + ",_then:"+_then+",_now:"+_now);
});
}); 
```

对此的任何帮助都会很棒，因为我正在绞尽脑汁，可能与@require部分有关，但从我在谷歌上找到的内容来看，这应该足以使用这些脚本中的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-26T18:35:13.593

```
// @include http://{removed url}/* 
```

如果您的实际脚本与此匹配，则可能是问题所在...我在某处读到缺少空格会导致问题...

尝试这个：

```
// @include     http://{removed url}/*
// @require     http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-15T22:54:08.580

您的问题是，您已经注释掉了应该是什么，GM scipt 声明。

代替

```
// // ==UserScript==
// @name    Cerberus Time-since Row Colouring
// @author  David Duke, Luke Mulholland-Helme-Kelsall 
// @description Looks for ABBR tags and their title parameter, and then calculates the time difference between Now and the timestamps. The parent table row then has an appropraite CSS class added to it based on the time difference calculated.
// @include http://{removed url}/*
// @require     http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// @require     http://www.datejs.com/build/date.js

// ==/UserScript== 
```

利用：

```
// ==UserScript==
@name    Cerberus Time-since Row Colouring
@author  David Duke, Luke Mulholland-Helme-Kelsall 
@description Looks for ABBR tags and their title parameter, and then calculates the time difference between Now and the timestamps. The parent table row then has an appropraite CSS class added to it based on the time difference calculated.
@include http://{removed url}/*
@require     http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
@require     http://www.datejs.com/build/date.js

// ==/UserScript== 
```

这将解决您的脚本检测或安装问题。

# ruby-on-rails - 我在模块“ActionView::Helpers::AssetTagHelper”的 compute_public_path' 中遇到覆盖方法问题

> ID：10738295
> 
> 赞同：0
> 
> 时间：2012-05-24T13:18:16.743
> 
> 标签：ruby-on-rails, ruby

我正在将 ruby​​ 版本从 3.0.5 迁移到 3.2.3，并将 ruby​​ 版本从 1.8.7 更改为 1.9.3。

我想覆盖方法 compute_public_path(ActionView::Helpers::AssetTagHelper)。

现在我在迁移应用程序（3.2.3）时遇到了这个错误。

`alias_method': undefined method`模块 `ActionView::Helpers::AssetTagHelper' 的 compute_public_path' (NameError)

请给我您对上述问题的宝贵建议。

我做过小程序。它运行良好。

```
class String

   alias_method :old_to_s, :to_s

   def to_s
       if  self=="one"
         "coming if "
       else
        "coming else"
       end

   end

end

str = String.new("one")
p str.to_s

p str.old_to_s 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T13:55:21.847

从 rails 3.1 开始，该方法存在于`ActionView::AssetPaths`类中

[http://apidock.com/rails/ActionView/AssetPaths/compute_public_path](http://apidock.com/rails/ActionView/AssetPaths/compute_public_path)

# php - 如何使用这些 HTTP 标头提供此文件？

> ID：10738298
> 
> 赞同：0
> 
> 时间：2012-05-24T13:18:28.757
> 
> 标签：php

我使用的是共享主机，因此无法编辑 Apache 设置。我需要允许用户以这种方式下载 .crx 文件：

```
1) The file has the content type application/x-chrome-extension
2) The file is not served with the HTTP header X-Content-Type-Options: nosniff
3) The file is served with one of the following content types:
- empty string
- "text/plain"
- "application/octet-stream"
- "unknown/unknown"
- "application/unknown" 
```

我怎样才能用 PHP 或其他方式做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T13:21:09.837

使用[`header()`](http://php.net/manual/en/function.header.php)功能。

```
header('Content-Type: text/plain'); 
```

**更新：**

抱歉，我忘记了文件是 .crx :)

如果您的文件是`cool_app.crx`，请编写一个包装器，例如`cool_app.php`：

```
<?php
header('Content-Type: application/x-chrome-extension');
include 'cool_app.crx'; 
```

然后将您的链接指向`cool_app.php`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T13:45:59.500

```
<?php
header("Content-Type: application/x-chrome-extension; charset=UTF-8");   // use here both proper settings for your case
//  header("Content-Length: " .filesize($your_crx_file));    // this is realy optional, I do recomend to not include this sentence
header('Content-Disposition: attachment; filename="TheNameThatYouWant.crx"');    // this set the name of the downloaded file on browser side.
readfile($your_crx_file)
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T14:02:57.987

尝试添加这一行：

```
AddType application/x-chrome-extension crx 
```

到您的 .htaccess 文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T13:31:02.080

根据我的评论：

```
header('content-type: text/plain'); // set the content-type
readfile('path-to-crx.crx'); 
```

您首先使用该`header`函数设置内容类型。

然后，如果文件存在于您的服务器上，请使用该`readfile`方法发送文件，或者如果它是在执行期间生成的，则只需回显文件内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-12T20:29:44.263

这项工作很好

```
<?php
$file = 'extension.crx';

if (file_exists($file)) {
    header('Content-Description: File Transfer');
    header('Content-Type: application/x-chrome-extension');
    header('Content-Disposition: attachment; filename='.basename($file));
    header('Content-Transfer-Encoding: binary');
    header('Expires: 0');
    header('Cache-Control: must-revalidate');
    header('Pragma: public');
    header('Content-Length: ' . filesize($file));
    ob_clean();
    flush();
    readfile($file);
    exit;
}
?> 
```

# java - 为什么 JoinColumnsOrFormulas 和 LAZY 不起作用？

> ID：10738300
> 
> 赞同：1
> 
> 时间：2012-05-24T13:18:32.470
> 
> 标签：java, hibernate, persistence

实体部分：

```
public class Shortcut extends IRepositoryObject {

..
    @ManyToOne(fetch = FetchType.LAZY, optional=true, cascade=CascadeType.REFRESH)
    @JoinColumnsOrFormulas({
    @JoinColumnOrFormula(formula=@JoinFormula(value=CONTENT_ID_FIELD, referencedColumnName=UUID))
    })
    private Content providerContent;
} 
```

我有一个代码：

```
 Shortcut shortcut = basicRepository.findOne(Shortcut.class, 407);
    log.info("get provider");
    log.info("provider content: {}", shortcut.getProviderContent()); 
```

并记录：

```
Hibernate: select shortcut0_.id as id5_0_, shortcut0_.created_at as created3_5_0_, shortcut0_.updated_at as updated4_5_0_, shortcut0_.name as name5_0_, shortcut0_.title as title5_0_, shortcut0_.fk_parent_id as fk21_5_0_, shortcut0_."path" as path7_5_0_, shortcut0_.position as position5_0_, shortcut0_.accept as accept5_0_, shortcut0_.adult as adult5_0_, shortcut0_.deleted_at as deleted11_5_0_, shortcut0_.deleted as deleted5_0_, shortcut0_.hidden as hidden5_0_, shortcut0_.validity_to_date as validity14_5_0_, shortcut0_.validity_from_date as validity15_5_0_, shortcut0_.target as target5_0_, shortcut0_.version as version5_0_, shortcut0_.cost as cost5_0_, shortcut0_.op_ext_id as op18_5_0_, shortcut0_.preview as preview5_0_, shortcut0_.content_id as content20_5_0_, shortcut0_.content_id as formula1_0_ from OBJECT shortcut0_ where shortcut0_.id=? and shortcut0_.target='SHORTCUT'
Hibernate: select content0_.content_type as content1_0_0_, content0_.ext_id as ext2_0_0_, content0_.fk_provider_id as fk21_0_0_, content0_.provider_price as provider3_0_0_, content0_.adult as adult0_0_, content0_.created_at as created5_0_0_, content0_.hash as hash0_0_, content0_.name as name0_0_, content0_.fk_parent_content_type as fk22_0_0_, content0_.fk_parent_id as fk23_0_0_, content0_.fk_parent_provider_id as fk24_0_0_, content0_.fk_parent_price as fk25_0_0_, content0_.FK_PRICE_CATEGORY_ID as FK26_0_0_, content0_.priority as priority0_0_, content0_.title as title0_0_, content0_.updated_at as updated10_0_0_, content0_.uuid as uuid0_0_, content0_.accept as accept0_0_, content0_.deleted as deleted0_0_, content0_.deleted_at as deleted14_0_0_, content0_.description as descrip15_0_0_, content0_.hidden as hidden0_0_, content0_.preview as preview0_0_, content0_.stkPage as stkPage0_0_, content0_.validity_to_date as validity19_0_0_, content0_.validity_from_date as validity20_0_0_ from PROVIDER_CONTENT content0_ where content0_.uuid=?
INFO  ru.icb.liteicms.service.DomainTest.test(DomainTest.java:29) : 2012-05-24 16:54:04,724 - get provider
INFO  ru.icb.liteicms.service.DomainTest.test(DomainTest.java:31) : 2012-05-24 16:54:04,724 - provider content: ru.icb.liteicms.domain.Content@edb15a 
```

为什么 LAZY sql 查询不起作用？？？

Jira 链接：[https ://hibernate.onjira.com/browse/HHH-7352](https://hibernate.onjira.com/browse/HHH-7352)

# c++ - 许多在线评委的素数生成器程序即使尝试了很多也没有被接受

> ID：10738303
> 
> 赞同：0
> 
> 时间：2012-05-24T13:18:36.057
> 
> 标签：c++

spoj.pl n codechef.com 中的“Prime 生成器”存在问题。我已经成功解决了它，但即使尝试了很多也没有提交。请帮忙。我得到一个错误的答案，即使我认为它是正确的。它满足了我所知道的所有案例。问题陈述是（取自[http://www.spoj.pl/problems/PRIME1/](http://www.spoj.pl/problems/PRIME1/)）：

```
Input

The input begins with the number t of test cases in a single line (t<=10).
In each of the next t lines there are two numbers m and n (1 <= m <= n
<= 1000000000, n-m<=100000) separated by a space.

Output

For every test case print all prime numbers p such that m <= p <= n, one number per
line, test cases separated by an empty line. 
```

这是我的程序：

```
#include <iostream>
using namespace std;

#define LLI long long int
#define sll(n) scanf("%lld",&n)
#define s(n) scanf("%d",&n)

int main()
{
    LLI m,n;
    int t,count=0;
    s(t);
    while(t--)
    {
        sll(m);
        sll(n);
        int a[32000]={0};
        int b[100005]={0};
        for(LLI i=2;i*i<=n;i++)
        {
            if(!a[i])
            {
                for(LLI j=i*i;j*j<=n;j=j+i)
                {
                    a[j]=1;
                }
                if(!(m%i))
                    b[0]=1;
                for(LLI j=i-(m%i);j<=n-m;j=j+i)
                {
                    if(m+j!=i)
                        b[j]=1;
                    }
                }
            }
            if(m==1)
                b[0]=1;
            for(LLI i=0;i<=n-m;i++)
            {
                if(!b[i]){
                    printf("%lld\n",m+i);
                    count++;
                }
            }
            printf("\n");
            printf("%d",count);
        }    
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T13:57:33.297

你的算法真的很奇怪。
您使用众所周知的筛法，`a[j]=1`为每个复合材料设置`j`。现在您应该做的就是打印`j`所需范围内的任何内容，其中`a[j]==0`.
但相反，你有`b`数组，我就是不明白你想用它做什么。

另一点是您以打印您找到的素数的数量结束。
问题并没有要求它，因此自动法官很可能因此而使您失望（它会将这个数字视为质数之一，而事实并非如此）。

# prolog - 如何在prolog中进行修剪以防止子节点再次生成它的父节点

> ID：10738304
> 
> 赞同：0
> 
> 时间：2012-05-24T13:18:52.067
> 
> 标签：prolog

假设我有一个搜索树，我正在尝试找到一个目标的所有解决方案。如果我不修剪树以便仍然允许子节点生成它的父节点，则搜索空间会变得非常大。所以有人可以向我展示一个这样做的谓词，或者向我解释它是如何完成的，因为我对 Prolog 很陌生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T16:00:36.427

最简单的方法可能是在“搜索”谓词中添加一个额外的参数，以跟踪已经访问过的节点（父、子等），以及一个禁止访问前一个节点的子句。

一些术语值得澄清。树是没有循环（循环）的图，因此在“搜索树”中，您实际上没有重新访问节点两次的潜力。

可能您正在寻找某种通向目标的路径，而解决方案就是可能的路径。寻找“目标的所有解决方案”的既定要求与排除那些多次重访节点的路径存在一定的紧张关系。但是，让我们假设允许不重新访问节点的限制。

如果您在如何编码搜索谓词方面提供了更多信息，我将能够具体说明如何添加额外的“已访问列表”参数。

# javascript - 是否可以使用 javaScript 突出显示文本并检查 html？

> ID：10738305
> 
> 赞同：0
> 
> 时间：2012-05-24T13:18:53.390
> 
> 标签：javascript, google-chrome-extension

是否可以突出显示网页上的文本，然后使用 JavaScript 检查 html？（假设 javascript 将 HTML 吐到另一个 DIV 中）

我正在为 chrome 构建一个扩展，我希望用户能够突出显示文本，并且我希望扩展能够做两件事：复制该文本（在 textarea/input 或 span/div/any-元素或检查 span/div/any-element 中选定文本的 HTML。

这一切都是假设 chrome 有能力编辑和检查 DOM。我相信是这种情况，因为我在 GC 的扩展管理器中收到了这个警告， ![在此处输入图像描述](../Images/11755e9629553e1b58f3085ebab3f5bb.png) 这告诉我扩展有一些访问权限。至少到页面地址。有更多的访问权限吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T14:39:58.330

注意：以下在 IE < 9 中不起作用。有关跨浏览器解决方案，请参阅[HTML of selected text](https://stackoverflow.com/questions/4176923/html-of-selected-text)。

```
function getSelectionText() {
    var text = "";
    if (typeof window.getSelection != "undefined") {
        text = window.getSelection().toString();
    }
    return text;
}

function getSelectionHtml() {
    var html = "";
    if (typeof window.getSelection != "undefined") {
        var sel = window.getSelection();
        if (sel.rangeCount) {
            var container = document.createElement("div");
            container.appendChild(sel.getRangeAt(0).cloneContents());
            html = container.innerHTML;
        }
    }
    return html;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T20:01:47.630

首先，不要介意 Chrome 对隐身模式发出的警告。它只是为了警告人们，当在隐身模式下启用扩展程序时，用户并不是 100% 安全，他的浏览行为不会被记录（一些邪恶的扩展程序可能会收集例如银行访问数据）。

如果您想捕捉用户在某些文本区域/输入字段中选择的文本，您需要从阅读和实现扩展中的[内容脚本开始。](http://code.google.com/chrome/extensions/content_scripts.html)然后，Chrome 会将此类脚本注入您选择的网站。从那里它可以操作 DOM 并监听事件（就像嵌入网站的常规脚本一样）。

有关获取选定文本的详细信息，请参阅 Tims 对您的问题的回答或简单地搜索 stackoverflow - 这个问题之前被问过多次。

# http - 用于将 Web 重定向到移动版本的 HTTP 重定向状态代码

> ID：10738306
> 
> 赞同：3
> 
> 时间：2012-05-24T13:18:58.920
> 
> 标签：http, mobile

哪个 HTTP 重定向状态代码最适合将网页重定向到移动版本？

来自：www.example.com

至：m.example.com

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T14:27:40.527

我会在使用[*Vary*](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.44)指定导致此服务器驱动的协商决策的请求标头字段时发送[301 。](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3.2)[](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.44)

 *因此，假设*User-Agent*标头字段用于区分请求是否由移动设备发出，我将使用以下命令：

```
HTTP/1.1 301 Moved Permanently
Vary: User-Agent
Location: http://m.example.com/... 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-22T05:58:25.093

临时重定向（302 或 307）应该足够了。

智能手机网站重定向的[Google 指南](https://developers.google.com/webmasters/smartphone-sites/redirects)指出：

> 为此，服务器是否使用 HTTP 301 或 302 状态代码进行重定向并不重要。

因此，302 可能比 307 更可取。

指南建议“vary”标头应该是 200 响应的一部分。*

# magento - magento 禁用某些类别页面上的横幅或具有多个链接的横幅

> ID：10738309
> 
> 赞同：0
> 
> 时间：2012-05-24T13:19:10.293
> 
> 标签：magento, categories, banner

有没有办法在某些类别页面上禁用横幅，但不是全部？我试图在我的类别页面上有一个横幅，其中包含指向其子类别的 3 个链接。由于横幅只能作为 jpg 而不是 html 图像上传，我猜它需要用 XML 或扩展来解决？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T08:05:57.317

```
<?xml version="1.0" ?>
<layout version="0.1.0">
   <default>
   </default>
   <catalog_category_view>
     <remove name="left.permanent.callout" />
   </catalog_category_view>
</layout> 
```

**这将从类别视图页面中删除横幅（狗照片横幅）。
如果你写在下面的默认标签下**

```
<?xml version="1.0" ?>
    <layout version="0.1.0">
       <default>
          <remove name="left.permanent.callout" />
       </default>
    </layout> 
```

**横幅将从每个页面中删除**

**PS :- 将此代码写入 local.xml
路径：-magento_folder/app/design/frontend/mytheme(your_package_folder)/neo(your_theme_folder)/layout/local.xml**

# android - Android - 通过 PendingIntent 发送额外内容

> ID：10738311
> 
> 赞同：0
> 
> 时间：2012-05-24T13:19:22.883
> 
> 标签：android, android-intent, widget

点击我想启动 DetailsActivity 后，我在循环中呈现小部件项目（它应该将 ID 发送到该活动）

```
Cursor currentCursor = dbHelper.getWidgetCursor();
for(int k=0; k < currentCursor.getCount(); k++){
    currentCursor.moveToPosition(k);

    RemoteViews rw = new RemoteViews(context.getPackageName(), R.layout.w_calendar_item);

    Intent intentRow = new Intent(context, DetailsActivity.class);
    Log.v("a", "index: "+currentCursor.getInt(currentCursor.getColumnIndex(SqlHelper.COLUMN_ID)));
    intentRow.putExtra("index", currentCursor.getInt(currentCursor.getColumnIndex(SqlHelper.COLUMN_ID)));
    PendingIntent pendingIntentRow = PendingIntent.getActivity(context, 1, intentRow, PendingIntent.FLAG_CANCEL_CURRENT);
    rw.setOnClickPendingIntent(R.id.w_li, pendingIntentRow);

    views.addView(R.id.w_list, rw);
} 
```

我的问题是 DetailsActivity 总是收到索引 103（这是列表中的最后一个），我点击哪个项目并不重要

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T13:25:52.453

那是因为您在 PendingIntent.getActivity 中设置了[PendingIntent.FLAG_CANCEL_CURRENT](http://developer.android.com/reference/android/app/PendingIntent.html#FLAG_CANCEL_CURRENT)标志。对于每一行，Android 都会取消前一个待处理的意图，所以最后一个自然会“存活”。也许只需删除该标志即可工作？我对 RemoteViews 没有任何经验，所以不确定如果没有帮助，最好的办法是什么。

# perl - Perl Excel解析器截断列

> ID：10738312
> 
> 赞同：3
> 
> 时间：2012-05-24T13:19:23.593
> 
> 标签：perl, excel, file

我是 Perl 的新手，并试图解码读取 Excel 文件并将数据导出到文本文件的 Perl 脚本。脚本中的步骤之一执行异常。这是步骤：

```
@array_name = grep {$_} @array_name; 
```

如果值为`0`;这一步只是截断最后一列。否则它可以正常工作。如果我删除这一步，最后一列有值`0`又回来了，但它`NULL`在我的提取中包含一些不属于我的源 Excel 文件的虚拟列。

有人可以帮我理解这一步吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T13:59:47.957

grep 命令过滤非空内容。因此，所有不评估为真的东西都将被丢弃。空单元格和包含的单元格`0`将被删除。如果您只想删除空单元格，您可以使用

```
@array_name = grep { defined && length } @array_name ; 
```

反而。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T06:57:25.463

```
$A->[$i][10]=~s/\n//g;

$variable_value =~s/\n//g; 
```

`$variable_value`是存储值的变量。

它将删除下一行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T13:55:55.137

`grep`基本上返回数组中的所有真值，0 被内插为假。

例如`grep`这里用来过滤真值到@b，

```
my @dirty = (0,1,2,3,,0,5,);
my @clean = grep {$_} @dirty;
for(@clean) {print "$_\n";} 
```

退货

```
1
2
3
5 
```

保留零的一个小技巧是在 grep 参数中添加一个换行符：

```
my @dirty = (0,1,2,3,,0,5,);
my @clean = grep {"$_\n"} @dirty;
for(@clean) {print "$_\n";} 
```

哪个返回，

```
0
1
2
3
0
5 
```

# javascript - 将鼠标悬停在网站菜单上？

> ID：10738313
> 
> 赞同：2
> 
> 时间：2012-05-24T13:19:24.177
> 
> 标签：javascript, html, css, menu, drop-down-menu

我正在寻找一种创建（或搭载现有解决方案）菜单栏的方法，该菜单栏在悬停时显示一系列选项。这有点难以描述，所以这里是一个显示我所追求的截图：

![在此处输入图像描述](../Images/ab62b8d85082ac1225b69c2bd7ebbcbf.png)

我唯一需要不同的是下拉菜单的配色方案。我认为这应该很容易改变（无论如何请告知）。

我试过用谷歌搜索这个，但我不确定我是否在寻找正确的东西，因为我不知道与网页设计相关的技术术语。

请问有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T14:48:09.190

你甚至不需要 javascript，你可以创建纯 CSS 下拉菜单。如果你觉得懒惰，试试这个链接： [purecssmenu.com](http://purecssmenu.com/)

Ĵ

# c# - 树视图克隆事件

> ID：10738314
> 
> 赞同：1
> 
> 时间：2012-05-24T13:19:29.967
> 
> 标签：c#, treeview, clone

我想要以下代码做的是单击时将节点及其目录结构从一棵树添加到另一棵树，但是代码行不正确，我不确定我能做些什么来修复它...什么在这种情况下使用 node.Clone() 的正确方法是什么？

我敢肯定它是一个简单的修复。

```
private void treeView_NodeMouseClick(object sender, TreeNodeMouseClickEventArgs e)
{
    tVS.Nodes.Add(e.Node.Clone());
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T13:27:23.090

此处需要演员表

```
tVS.Nodes.Add((TreeNode)e.Node.Clone()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T13:25:36.827

尝试

```
Node newNode = (Node)e.Node.Clone();
tVS.Nodes.Add(newNode); 
```

# apache - Apache 从外部文件中的 ip 列表中拒绝

> ID：10738320
> 
> 赞同：6
> 
> 时间：2012-05-24T13:19:45.637
> 
> 标签：apache

我想维护一个文件，其中包含被阻止使用站点的 ip 列表。我知道可以使用拒绝来实现这一点（例如拒绝来自 127.0.0.1 10.0.0.1 some.other.ip.address）。

但是，我想要一个外部文件，以便无权访问配置的个人可以使用 ip 更新 txt 文件，然后将其包含在拒绝中。

有没有人对如何实现这一点有任何建议？非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-24T13:57:42.177

查看 Apache Include 指令：

[http://httpd.apache.org/docs/2.2/mod/core.html#include](http://httpd.apache.org/docs/2.2/mod/core.html#include)

您可以创建一个单独的配置文件，其中包含您的拒绝列表并包含在任何其他配置文件中，即站点可用的站点。下面的示例用法：

在 /etc/apache2/sites-enabled/yoursite.conf

```
<VirtualHost *:80>
...

Include /etc/apache2/sites-access/yoursite.conf

...
</VirtualHost> 
```

在 /etc/apache2/sites-access/yoursite.conf

```
order allow,deny
deny from 10.0.0.1
allow from all 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-10-26T16:26:11.273

使用`RewriteMap`映射作为外部 IP 地址文件适用于单个 IP 地址的列表：

```
RewriteEngine on
RewriteMap allowed "txt:${site_dir}/etc/allowed_ip_addresses"

UnsetEnv ALLOWED

RewriteCond ${allowed:%{REMOTE_ADDR}} 1
RewriteRule ^ - [E=ALLOWED]

<Location />
  Deny  from all
  Allow from env=ALLOWED
</Location> 
```

然后`allowed_ip_addresses`包含如下行：

```
10.42.1.123      1
192.168.100.456  1 
```

这将允许的 IP 地址映射到 value `1`，并将所有其他 IP 地址映射到空字符串。

在地图中`RewriteCond`查找`REMOTE_ADDR`，如果是，`1`则设置环境变量。`UnsetEnv`确保变量绝对未设置，否则。

然后`Allow from`仅在设置了该环境变量时才允许访问。

外部映射文件可以具有与您的 Apache 配置不同的文件系统权限，并且对它的更改会立即生效，而无需重新启动 Apache。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T13:22:29.037

这不是真正的安全方法，但您可以将此 txt 文件放在共享目录中，并使用 cron 作业更新 apache 配置...

另一种方法是使用 htaccess ..

```
order allow,deny
deny from 10.0.0.1
allow from all 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-16T09:14:50.220

```
'In windows httpd.conf'
'<Directory />'
'Include "C:/Program Files (x86)/Apache Software Foundation/Apache2.2/logs/deny.txt"'
'</Directory>'
'deny.txt contain'
'Deny from xxx.xxx.xxx.xxx'
'etc' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-28T14:40:31.723

我使用.htaccess，一个文件夹和一个以禁止IP为标题的文件列表四处走动。

如果banned_ips 中的IP 文件存在，则返回禁止标志：

```
RewriteCond "%{DOCUMENT_ROOT}/banned_ips/%{HTTP:X-FORWARDED-FOR}" -f
RewriteRule .* - [F] 
```

我的示例适用于 AWS Cloudfront，但您可以替换`HTTP:X-FORWARDED-FOR`为`REMOTE_ADDR`或包含访问者 ip 的任何变量。

或者，您可以使用 HTTP_HOST 按以下站点保存目录：

```
RewriteCond "%{DOCUMENT_ROOT}/banned_ips/%{HTTP_HOST}/%{HTTP:REMOTE_ADDR}" -f
RewriteRule .* - [F] 
```

这样您就无需更新您的 htaccess 文件，您甚至可以以编程方式从蜜罐列表中添加 ips 我们自己的跟踪器。

请在评论中告诉我您对这种方法在可扩展性和/或安全性方面的看法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-17T11:18:19.220

从 Apache httpd 版本 2.3.6 及更高版本，您可以使用该指令

```
IncludeOptional /etc/myfilewithrequireip.conf 
```

请参阅[https://httpd.apache.org/docs/2.4/mod/core.html#includeoptional](https://httpd.apache.org/docs/2.4/mod/core.html#includeoptional)

使用Include也是可以的，但是如果conf文件不存在会报错。

# jquery - 在 iPad 上滚动期间操作 DOM

> ID：10738331
> 
> 赞同：1
> 
> 时间：2012-05-24T13:20:15.077
> 
> 标签：jquery, ipad, scroll

我的网站上有一个粘性导航栏，当用户向上滚动时，它需要弹回原位。我已经使用该`scroll()`功能完成了这项工作。

但在 iPad 上，它会暂停该功能，直到滚动完成，导致该栏粘在页面的最前面一秒钟，然后又弹回原位。

我能做些什么吗？目前是否有让 iPad 处理滚动事件与其他浏览器相同的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T13:28:10.327

当前版本的 iOS[支持](https://stackoverflow.com/questions/4889601/css-position-fixed-into-ipad-iphone)CSS中的`position:fixed`属性。当然，那么您将把 Android 抛在脑后。

考虑使用[iScroll](http://cubiq.org/iscroll-4) - 它旨在考虑各种移动浏览器的怪癖。

# php - 浏览器关闭时会话不会过期

> ID：10738333
> 
> 赞同：1
> 
> 时间：2012-05-24T13:20:17.353
> 
> 标签：php, session, browser, global

我有一些 $_SESSION 变量来跟踪用户来自哪个页面。这样，我可以使错误消息更加具体，从而使 Web 应用程序更加用户友好。当用户不是来自任何页面时，主页顶部应该有一条“欢迎”消息。但是，当我关闭浏览器并访问主页时，我会收到与我在关闭会话之前链接的页面相对应的消息。这是我的功能：

```
function come_from($from_page, $updates_occurred) { 
    $message = "";
    if ($updates_occurred == false) {
        $message .= "Welcome to the User List.<br/>";
        $message .= "Select the user you wish to update, or add a new user. ";
    } elseif ($from_page == "edit_user.php") {
        $message .= "The user was successfully updated";
    } else { 
        $message .= "The user was successfully added";
    }
return $message; 
} 
```

在主页的顶部，我有以下代码：

```
if (isset($_SESSION['updates_occurred'])) {
    $updates_occurred = $_SESSION['updates_occurred'];
} else {
    $updates_occurred = false;
}

if (isset($_SESSION['come_from'])) {
    $come_from = $_SESSION['come_from'];
} else {
    $come_from = NULL;
    echo "got here";
}

echo come_from($come_from, $updates_occurred); 
```

*updates_occurred 只是跟踪用户是否在前一页上成功编辑/添加。

我想我主要关心的是：我使用会话变量的方式有问题吗？如果我的理解是正确的，会话变量应该在浏览器关闭时过期，对吧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T13:33:17.853

关闭浏览器选项卡不会关闭会话

您应该关闭整个浏览器以关闭会话

# asp.net - 从动态注册的用户控件中获取值

> ID：10738334
> 
> 赞同：2
> 
> 时间：2012-05-24T13:20:17.500
> 
> 标签：asp.net, user-controls

在我的主 .aspx 页面中，我有一个占位符，它在其中动态注册了两种类型的用户控件。

```
case "1":
   var control = (ControlType)LoadControl("~/PathToControl.ascx");
   control.Property = value;
   control.Initialize();
   placeholder.controls.add(control);
break;
case "2":
   var control1 = (ControlType)LoadControl("~/PathToControl1.ascx");
   control1.Property = value;
   control1.Initialize();
   placeholder.controls.add(control1);
break; 
```

每个控件都有一些用户控件。

现在，在主页中，我有一个提交按钮，我想从上面的自定义控件中获取每个用户 coltrol 的值。我试图获取占位符的控件，但回发后的占位符为空。

```
if(placeholder.Controls.count>0){
  var userControl = ((UserControlType)placeholder.Controls[0]);
  var controlName = userControl.FindControl("ControlName") as TextBox;
} 
```

我还尝试在 page_init 上构建自定义控件，但我仍然无法获取用户控件。

有谁知道我怎样才能做到这一点？

**解决方案**

每次访问都必须在 Init Event 中设置动态用户控件。

有关详细信息[http://msdn.microsoft.com/en-us/library/ms972976.aspx#viewstate_topic4](http://msdn.microsoft.com/en-us/library/ms972976.aspx#viewstate_topic4)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T16:27:51.287

由于用户将单击提交按钮，因此值将与表单一起发布。这是获取值的最简单方法：

1.  创建动态控件时，设置 ID 属性，例如：

    `control1.ID = "control1";`

2.  在回发时，从表单中检索值：

    `var control1Value = Request.Form["control1"];`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T08:15:57.470

控件必须在 Init 事件中注册

```
protected override void OnInit(EventArgs e) {
   case "1":
        var control = (ControlType)LoadControl("~/PathToControl.ascx");
        control.ID = "controlID";
        placeholder.controls.add(control);
  break;
  case "2":
      var control1 = (ControlType)LoadControl("~/PathToControl1.ascx");
      control.ID = "controlID_1";
      placeholder.controls.add(control1);
   break;
base.OnInit(e);
} 
```

在初始化之后设置你想要的任何属性

```
case "1":
  var control = (ControlType)placeholder.findControl("ControlID");
  control.Property = value;
 control.Initialize();
break;
case "2":
 var control1 = (ControlType)placeholder.findControl("ControlID_1");
 control1.Property = value;
 control1.Initialize();
break; 
```

页面回帖后

```
void LoadControls(){
   case "1":
    var control = (ControlType)placeholder.findControl("ControlID");
    var txtControl =  control.FindControl("controlName") as TextBox;
   break;
   case "2":
    var control1 = (ControlType)placeholder.findControl("ControlID_1");
    var txtControl_1 =  control1.FindControl("controlName") as TextBox;
   break;
 } 
```

# asp.net - 文件 I/O 在 ASP .Net C# 工作线程中不起作用

> ID：10738340
> 
> 赞同：0
> 
> 时间：2012-05-24T13:20:42.780
> 
> 标签：asp.net, c#-4.0, file-io

嗯……我觉得自己很愚蠢。原因如下：

我一直在使用我 2 年前编写的一些库函数。深埋了几层，我正在使用这些功能来帮助构建我想要的路径：

System.Web.HttpContext.Current.Request.ApplicationPath System.Web.HttpContext.Current.Server.MapPath

而不是使用这个：

HttpRuntime.AppDomainAppPath

System.Web.HttpContext.Current 肯定会为空，因为没有 http 上下文。而且，当然，没有任何异常被抛出，因为我陷入了困境并忽略了它们。

你不知道我盯着我的项目看了多少小时，想知道到底出了什么问题！

**请原谅我浪费了大家的时间。这太丢人了！！！**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T13:24:39.090

不鼓励在 ASP.NET 应用程序中生成线程。我知道这在技术上是可以做到的，但是您必须考虑很多问题。推荐的最佳实践是创建一个 Windows 服务来运行您的后台任务。然后，您的 ASP.NET 应用程序可以向服务发出请求，该服务在后台处理它们。

**更新了参考资料**

来自[对 asp.net 上多线程的](https://stackoverflow.com/questions/10293668/multi-threading-on-asp-net#comment13245710_10293768)评论：

> 关于在 ASP.NET 站点上使用后台处理的一个警告。IIS 可以在任何给定时刻回收应用程序，并在执行此操作时终止任何正在运行的后台线程。所以不能保证你的线程池线程会成功运行。如果这是一个问题，最好使用 Windows 服务来进行后台处理。

此外，SO 用户[Mr. Disappointment在](https://stackoverflow.com/users/263681/mr-disappointment)[这里](https://stackoverflow.com/questions/5553001/how-should-i-perform-a-long-running-task-in-asp-net-4/5553048#5553048)进行了详细介绍，他说：

> Windows 服务旨在长期运行，如果出现问题，您通常需要担心的不仅仅是您的单个服务。

# web-services - 是否有托管客户区服务？

> ID：10738342
> 
> 赞同：0
> 
> 时间：2012-05-24T13:20:48.943
> 
> 标签：web-services

你知道一些网络服务（不一定是免费的），在那里你可以创建受密码保护的客户区，在那里上传一些文件。额外的功能将包括上传文件的良好预览和可能的一些品牌选项。

干杯

# knockout.js - 如何使用引导程序风格的淘汰赛遍历树枝中的数据？

> ID：10738343
> 
> 赞同：3
> 
> 时间：2012-05-24T13:20:49.450
> 
> 标签：knockout.js, twitter-bootstrap, knockout-2.0

这必须是唯一的：p

我在 symfony2 中使用树枝。我用引导流体布局来设计它。看哪，我正在用淘汰赛循环数据，连续 4 个（span3）（每 5 个将换行）。但我不知道如何识别每 4 次迭代。

```
<div class="row-fluid">
    <div class="structureWhite clearfix" data-bind="foreach: stores">
        <div class="span3">
            <h5 data-bind="text: name"></h5>
            <p data-bind="text: address"></p>
            <p data-bind="text: contact"></p>
        </div>
    </div>
</div> 
```

所以我要么需要`<div class="row-fluid"></div>`在每 4 次迭代之后放置，要么每 5 次删除一次。问题是 bootstrap 没有给出第一个 span3 边距，但其余的都得到 margin-left: 2.12766%。这意味着第 5 个 span3 （第二行的第一个）不符合要求。

因此，要么我必须将其拆分为流体行，要么删除第 5 个元素（或每 4 个元素之后）的填充，或者向第一个元素添加（尽管它会响应如此可变）边距。任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T13:28:33.487

KO 2.1 现在包含一个`$index`上下文变量，您可以访问该变量`foreach`以获取当前项目的索引。

它是一个可观察的，所以如果你在表达式中使用它，你需要像这样使用它：

```
<!-- ko if: $index() % 4 === 3 -->
<div>some element</div>
<! /ko --> 
```

# java - Easy mock 不识别 mocked 服务

> ID：10738345
> 
> 赞同：3
> 
> 时间：2012-05-24T13:20:55.500
> 
> 标签：java, spring, unit-testing, junit, easymock

我在测试我的一项服务时遇到了这个奇怪的问题......我正在使用 easymock 3.0 模拟两个服务并使用 Spring 注入它们，但是我在其中一个处得到“java.lang.IllegalArgumentException: Not a mock: $Proxy43”异常他们。我在我的配置文件中以相同的方式声明它们，如下所示：

```
<bean id="recurringSchedulesJobsService" class="org.easymock.EasyMock" factory-method="createMock">
    <constructor-arg value="com.spmsoftware.recurringschedules.service.RecurringSchedulesJobsService"/>
</bean>

<bean id="jobPeriodService" class="org.easymock.EasyMock" factory-method="createMock">
    <constructor-arg value="com.spmsoftware.jobdefinition.service.JobPeriodService"/>
</bean> 
```

在我的 junit 测试中，我以下列方式使用它们：

```
@Autowired
private RecurringSchedulesJobsService recurringSchedulesJobsService;
@Autowired
private JobPeriodService jobPeriodService;

@Before
public void setUp() throws Exception {
    reset(recurringSchedulesJobsService);
    expect(recurringSchedulesJobsService.getBasedOnRecurringScheduleId(RECURRING_SCHEDULE_ID)).andReturn(buildRecurringScheduleJob());
    replay(recurringSchedulesJobsService);

    reset(jobPeriodService);
    expect(jobPeriodService.findPeriodByJobId(RECURRING_SCHEDULE_JOB_ID)).andReturn(buildJobDefinitionPeriod());
    replay(jobPeriodService);
} 
```

recurringSchedulesJobsService 被嘲笑，当我评论第二个服务时，它的行为符合预期。另一方面，jobPeriodService 不被识别为模拟。相反，我得到了这个例外：

```
java.lang.IllegalArgumentException: Not a mock: $Proxy43
at org.easymock.internal.ClassExtensionHelper.getControl(ClassExtensionHelper.java:66)
at org.easymock.EasyMock.getControl(EasyMock.java:2068)
at org.easymock.EasyMock.reset(EasyMock.java:1983)
at com.spmsoftware.recurringschedules.occurrences.generator.OccurrenceGeneratorTest.setUp(OccurrenceGeneratorTest.java:64)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:27)
at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:74)
at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:83)
at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
at org.junit.runner.JUnitCore.run(JUnitCore.java:157)
at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:63) 
```

仅在 reset() 方法中引发异常，但是...

我发现一件有趣的事情是这两个对象不是同一个实例。这是我在调试时得到的：

![在此处输入图像描述](../Images/77c8c1f8578df3631bc31939271fdc10.png)

对此的任何想法都将非常有价值。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T13:34:52.070

Spring 将 bean 包装到代理中，可能是为了在方法周围应用 AOP 方面（事务性、安全性）。因此，它在您的测试中注入的 bean 是 mock 周围的 Spring 代理，而不是 mock 本身。

但是，为什么要使用 spring 上下文和依赖注入？您可以简单地在单元测试中实例化您的服务对象，在对象中注入模拟依赖项，然后对其进行测试。不需要 Spring 容器。这可能是 IoC 框架的主要有趣特性：它使单元测试变得简单：

```
@Before
public void setUp() {
    this.recurringSchedulesJobsService = mock(RecurringSchedulesJobsService.class);
    this.jobPeriodService = mock(JobPeriodService.class);
}

@Test
public void testSomeMethod() {
    expect(recurringSchedulesJobsService.doThis()).andReturn(that);
    expect(jobPeriodService.doThat()).andReturn(1);

    replay(recurringSchedulesJobsService, jobPeriodService);

    MyServiceImplementation serviceToTest = 
        new MyServiceImplementation(recurringSchedulesJobsService, jobPeriodService);
    serviceToTest.someMethod();
    verify(recurringSchedulesJobsService, jobPeriodService);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T16:05:03.357

看起来 jobPeriodService 正在由 Spring 自动代理，而 recurringSchedulesJobsService 不是。这很可能是因为 Spring 已将 recurringSchedulesJobService 标记为不符合自动代理的条件（没有潜在的切入点匹配，它在某处被明确关闭等）。如果不查看您的其他配置，我真的不知道具体原因是什么

如果您将 Spring 的日志记录级别设置为 DEBUG，它应该会告诉您为什么 recurringSchedulesJobService 不符合自动代理的条件。

# javascript - 强制定时更新 CSS 文件

> ID：10738348
> 
> 赞同：0
> 
> 时间：2012-05-24T13:21:05.123
> 
> 标签：javascript, css, settimeout

编辑：

感谢 Akshat 和 Jefferey 的帮助和建议。我将以非常简单的方式重新提出我的问题：

当坐标发生变化时，如何使我的网页平滑地重新定位图像。应用程序每分钟左右将坐标写入服务器上的文件。我说得很顺利，因为我不希望用户干预或强制页面刷新（META HTTP-EQUIV=REFRESH CONTENT=300），这很容易但不是很好的用户体验。

我希望这是有道理的。再次感谢你。

* * *

我有一个带有图像的简单网页 - 一张地图 - 每分钟左右都会发生变化。地图每 30 秒动态更新一次，如下所示：

```
<script language="JavaScript">
<!--
function refreshMap1() {
   if (!document.images) return;
   document.images['map1'].src = 'map1.jpg?' + Math.random();
   setTimeout('refreshMap1()',30000);
}
//--></script> 
```

然后：

```
<body onload=" setTimeout('refreshMap1()',30000)">
<img src="map1.jpg" name="map1"> 
```

这工作正常。

我通过加载包含绝对定位的样式表在地图上覆盖动画 gif，如下所示：

```
<link rel="stylesheet" type="text/css" href="position.css" /> 
```

然后：

```
<img src="animation.gif" class="pos1" id="a1"> 
```

css 文件 (position.css) 仅包含：

```
.pos1 { position: absolute; left: 300px; top: 400px; } 
```

这也可以正常工作，但是.... css 文件将每分钟左右更改一次，与地图相同，以反映 gif 的新位置。我想通过以与地图类似的方式每 30 秒强制更新一次 css 来动态更改动画 gif 的位置。我还没有找到一种方法来强制对 css 文件进行动态定时更新。

有任何想法吗？

TIA。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T13:25:54.800

您不需要更改 css 文件。只需将其放入刷新功能中：

```
document.getElementById("a1").style.top = XXX+"px";
document.getElementById("a1").style.left = XXX+"px"; 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T13:32:21.543

如果`id`or`class`在每个 CSS 文件中是唯一的，您可以预先加载所有 CSS，然后每 30 秒更改一次标识符。CSS 文件很少太大。

动态加载 CSS 是可能的，但我真的不建议这样做；它违反了网络标准，并欢迎潜在的安全问题。一种方法是将内容注入`style`标签，正如这个答案所述：

[动态加载页面内容及其CSS - 如何防止由于尚未加载CSS而跳转？](https://stackoverflow.com/questions/5232160/loading-page-content-and-its-css-dynamically-how-to-prevent-jump-because-css-i)

最后一点，您可能应该练习为`setTimeout`函数使用字符串。使用匿名函数，或者如果该函数是全局的（在您的情况下是全局的），则对该函数的引用。例如`setTimeout(refreshMap1, 30000);`可以替换。`setTimeout('refreshMap1()',30000);`

# c++ - C++ WinSDK 头文件编译错误

> ID：10738357
> 
> 赞同：1
> 
> 时间：2012-05-24T13:21:27.967
> 
> 标签：c++, windows, visual-studio-2010

我正在尝试在 Windows 7 的 Visual Studio 2010 中编译一个程序。我在标记行的 Windows 标头中收到编译错误**C2061：语法错误：标识符“KNOWN_FOLDER_FLAG” ：**`shlobj.h`

```
#if (NTDDI_VERSION >= NTDDI_VISTA)

typedef enum
{
    KF_FLAG_DEFAULT         = 0x00000000,
    KF_FLAG_CREATE          = 0x00008000,
    KF_FLAG_DONT_VERIFY     = 0x00004000,
    KF_FLAG_DONT_UNEXPAND   = 0x00002000,
    KF_FLAG_NO_ALIAS        = 0x00001000,
    KF_FLAG_INIT            = 0x00000800,
    KF_FLAG_DEFAULT_PATH    = 0x00000400,
    KF_FLAG_NOT_PARENT_RELATIVE = 0x00000200,
    KF_FLAG_SIMPLE_IDLIST   = 0x00000100,
    KF_FLAG_ALIAS_ONLY      = 0x80000000,
} KNOWN_FOLDER_FLAG;

DEFINE_ENUM_FLAG_OPERATORS(KNOWN_FOLDER_FLAG);

STDAPI SHGetKnownFolderIDList(__in REFKNOWNFOLDERID rfid,
                              __in DWORD /* KNOWN_FOLDER_FLAG */ dwFlags,
                              __in_opt HANDLE hToken,
                              __deref_out PIDLIST_ABSOLUTE *ppidl);

STDAPI SHSetKnownFolderPath(__in REFKNOWNFOLDERID rfid,
                            __in DWORD /* KNOWN_FOLDER_FLAG */ dwFlags,
                            __in_opt HANDLE hToken,
                            __in PCWSTR pszPath);

STDAPI SHGetKnownFolderPath(__in REFKNOWNFOLDERID rfid,
                            __in DWORD /* KNOWN_FOLDER_FLAG */ dwFlags,
                            __in_opt HANDLE hToken,
                            __deref_out PWSTR *ppszPath);

#endif  // NTDDI_VISTA

#if (NTDDI_VERSION >= NTDDI_WIN7)

STDAPI SHGetKnownFolderItem(__in REFKNOWNFOLDERID rfid,
                            __in KNOWN_FOLDER_FLAG flags, <<<ERROR AT THIS LINE
                            __in_opt HANDLE hToken,
                            __in REFIID riid,
                            __deref_out void **ppv);
#endif // NTDDI_WIN7 
```

在我的程序中，版本宏定义如下

```
#define NTDDI_VERSION NTDDI_WINXP 
```

它不编译的原因是什么？

在我看来，我得到错误的部分根本不能编译，但它以某种方式编译。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T13:25:40.603

只有一个合乎逻辑的结论：由于某种原因，`NTDDI_VERSION`编译此标头时的扩展不是您认为的那样。

通过搜索`#undef NTDDI_VERSION`和构建项目的干净构建尝试进行故障排除（如果您使用预编译的头文件可能相关）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T15:28:04.280

编辑：我的答案是在没有向下滚动代码示例的情况下编写的......您是否确认错误来自定义 SHGetKnownFolderItem 的行？当我遇到这类问题时，我通常会为您的文件创建一个预处理器输出文件，并确认错误实际上来自您期望的位置。可能还有其他一些代码没有得到正确的 NTDDI_VERSION 保护。

Windows SDK 标头旨在允许您为特定版本的 Windows 构建应用程序。

在这种情况下，您要求为 Windows XP 构建应用程序（通过将 NTDDI_VERSION 设置为 NTDDI_WINXP）。那太棒了。但随后您尝试使用 Windows Vista 中引入的枚举 (KNOWN_FOLDER_FLAG)。

您需要做出选择：使用 Windows Vista 版本的 Windows API 构建您的应用程序（通过将 NTDDI_VERSION 设置为 NTDDI_VISTA）或找出另一种分离 Windows Vista 特定功能的方法。

有几种方法可以做到这一点。第一个（也是最棘手的）是使用 Vista 标头构建您的应用程序，然后小心避免在 XP 上使用仅限 Vista 的功能。或者，您可以将 vista 特定功能隔离在另一个源文件/dll 中，并使用 NTDDI_VISTA 编译该文件。然后仅在您不在 XP 上时调用 vista 特定功能。

请注意，如果您在应用程序中添加对 SHGetKnownFolderPath 的直接调用，它将无法在 Windows XP 上运行 - 这是因为 XP 上不存在该 API。因此，您必须使用 LoadLibrary/GetProcAddress 技巧来调用 API。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-16T09:50:44.473

改变

# 定义 NTDDI_VERSION NTDDI_WINXP

到

# 定义 NTDDI_VERSION NTDDI_VISTA

在声明 ShlObj 标头之前在 Windows 10 中工作正常

# objective-c - 为什么 UIProgressview 进度条不能调整大小？

> ID：10738361
> 
> 赞同：3
> 
> 时间：2012-05-24T13:21:40.027
> 
> 标签：objective-c, xcode, progress-bar, uiprogressview

来自 Bavarious 关于[UIProgressViews 的问题：](https://stackoverflow.com/questions/7980891/uiprogressview-and-custom-track-and-progress-images-ios-5-properties/7981853#comment13940084_7981853)

我尝试实现 Dave DeLong 所说的内容，并且按照他在示例中展示的方式进行了所有操作，但是当我运行程序时，如果我尝试更改进度的值，我的进度条就会变成拉伸的图像。然而，轨道图像完美地调整大小并沿轨道重复。出于某种原因，进度并没有沿着进度条执行此操作。

```
UIImage * load = [[UIImage imagedNamed:@"load.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 1, 0, 1)];
UIImage * track = [[UIImage imageNamed:@"track.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 1, 0, 1)]; 
[progressbar progressImage:load];
[progressbar trackImage:track];
[progressbar setProgress:0.5]; 
```

![原始图像和进度条结果](../Images/51e2dfc9be961482eada08878f27ea13.png)

我尝试将我的图像变量从进度图像切换到轨道图像，看看它是否是不可调整大小的图像（它不应该是因为它们是完全相同的图像，只是颜色不同）。除了当我这样做时，轨道图像再次完美调整大小，进度图像是拉伸的图像。有谁知道为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-24T21:42:32.807

您的可调整大小的帽子插图可能不应该是`{0,1,0,1}`. 在您的情况下，它们看起来应该是`{0,0,0,0}`, 或`UIEdgeInsetsZero`.

我剪掉了红色和蓝色的小方块：

![蓝色的](../Images/4909fc79c96dcdb2fed44860b16982bf.png) ![红色的](../Images/6faf2032af60b4da586bf0744a68640c.png)

...然后把它们扔进一个`UIProgressView`：

```
UIImage *red = [[UIImage imageNamed:@"red"] resizableImageWithCapInsets:UIEdgeInsetsZero];
UIImage *blue = [[UIImage imageNamed:@"blue"] resizableImageWithCapInsets:UIEdgeInsetsZero];

[pv setTrackImage:blue];
[pv setProgressImage:red]; 
```

当进度视图以 0.5 放置在 UI 上`progress`时，我得到了这个：

![进度视图](../Images/6a9eea1053a442a41f7bcb10f0847c80.png)

在我看来很好。

# javascript - 无法对 sencha tabpanel 中的选项卡执行操作

> ID：10738362
> 
> 赞同：0
> 
> 时间：2012-05-24T13:21:46.873
> 
> 标签：javascript, sencha-touch, tabpanel

我正在尝试使用 sencha 实现单击选项卡面板中的选项卡的操作。不知何故，我无法在单击选项卡时收到警报。

这是我的代码。我尝试在不同的选项卡上使用处理程序和侦听器这两种方法，但我无法使用它们中的任何一个获得警报消息。

```
Int.views.bottomTabs = new Ext.TabPanel({

        dock: 'bottom',

        tabBar: {
        id:'bottomtab',
            dock: 'bottom',
            ui: 'dark',
            layout: {
                pack: 'center'
            }
        },

            defaults: {
                scroll: 'vertical',
                xtype: 'button'
            },

        items: [
        {
            title: 'Tab1',
        iconCls: 'und',
        handler: function(){
        alert('It is clicked');             

       },
        {
            title: 'Tab2',
            iconCls: 'und',
            listeners: {activate: update},
        },
        {
            title: 'Tab3',
        iconCls: 'und',

        },
        {
        title :'Tab4',
        iconCls: 'und',

         }
        ]
    });
    var update = function() {
    alert('tab2 is clicked');
    } 
```

请帮我看看我在哪里做错了。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T18:02:56.957

您要附加侦听器的方式（如果您想内联）如下：

```
items : [
    {
        title     : 'Hello World',
        listeners : {
            activate : function() {
                alert('hello world');
            }
        }
    }, 
    {
        //...
    }
] 
```

您的第二种方法通过调用更新函数不起作用的原因是因为您在实例化 Ext.TabPanel 后声明了更新

如果您想引用一个函数而不是内联编写它，那么您需要在 initComponent() 中定义您的项目（更好的做法）并扩展您的类。

```
//..
onActivate    : function() {
    alert('hello world');
},
initComponent : function() { 
    this.items = [
        {
            title     : 'Hello World',
            listeners : {
                activate : this.onActivate
            }
        }, 
        {
            //...
        }
    ]
    // apply to superClass
} 
```

您应该阅读 Sencha Touch Class 系统。在您的情况下，这将是 Sencha Touch 1 方式。看看这个系列教程：[http ://www.onlinesolutionsdevelopment.com/blog/mobile-development/creating-a-sencha-touch-mvc-application-from-scratch-part-1/](http://www.onlinesolutionsdevelopment.com/blog/mobile-development/creating-a-sencha-touch-mvc-application-from-scratch-part-1/)

# codesmith - 如何在特定构建步骤后运行 Team City AssemblyInfo 修补程序

> ID：10738369
> 
> 赞同：3
> 
> 时间：2012-05-24T13:22:24.440
> 
> 标签：codesmith, teamcity-7.0

构建项目时的通常过程是，一旦所有文件都从源代码管理中被拖下来，AssemblyInfo 修补程序就会运行。

我们在使用 CodeSmith 时遇到了这个问题。问题是我们有两个构建步骤。

**第 1 步 - 运行 CodeSmith 模板构建**

这会生成一个 Visual Studio 解决方案

**第 2 步 - 构建 Visual Studio 项目**

这会生成我们的构建。

我们希望在第 1 步完成后运行 AssemblyInfo 修补程序，因为在 CodeSmith 模板生成之前不会有 AssemblyInfo.cs 文件。

有没有办法做到这一点？

我们在 Windows 7 上使用 TeamCity 7.0.3 和 Visual Studio 2010 (SP1)。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-20T20:34:16.867

我会将您的构建配置拆分为两个构建配置，其中包含工件和它们之间的快照依赖关系。

**构建配置 1**：

1.  运行 CodeSmith 模板构建

2.  将解决方案文件发布为工件

**构建配置 2**：

1.  解决构建配置的工件
2.  应用 AssemblyInfo 修补程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T17:34:19.940

是的，您可以通过以下三种方法之一完成此操作：

1.  右键单击 Visual Studio 项目中的 csp 文件（在 vs 中）。然后确保选中生成时生成。最后，您只需要在您的构建服务器上以 teamcity 使用的用户身份安装并激活 Generator。

2.  按照[以下步骤手动启用生成时生成](http://docs.codesmithtools.com/display/Generator/Using+a+Generator+Project+from+MSBuild)。最后，您只需要在您的构建服务器上以 teamcity 使用的用户身份安装并激活 Generator。

3.  使用由 CodeSmith 员工同事编写的[MsBuildCommunityTasks 。](https://github.com/loresoft/msbuildtasks)它将生成一个 AssemblyInfo 文件等等。

谢谢-布莱克·涅米斯基

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-30T09:59:06.010

我有同样的问题，我在这里找到了解决方案（使用构建依赖项） [https://stackoverflow.com/a/30423872/4888142](https://stackoverflow.com/a/30423872/4888142)

# wpf - 自动关闭扩展器

> ID：10738371
> 
> 赞同：5
> 
> 时间：2012-05-24T13:22:29.683
> 
> 标签：wpf, wpf-controls

我使用扩展器控件创建了某种滑出式面板，其中包含一些过滤选项。用户可以选择将此扩展器“固定”到视图。一切顺利，但现在我想知道当用户单击扩展器外的某个位置时，如何让扩展器自动关闭。我尝试了 LostFocus 和其他几个活动，但无济于事。当用户点击其他地方时，哪个事件可以通知我？

（目前我只是使用一个计时器，它会在鼠标离开扩展器后 +- 2 秒后关闭扩展器，但我更喜欢其他解决方案）

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-24T14:01:54.167

假设你`Expander`的名字是“yourExpander”，你可以这样做：

```
<Window PreviewMouseDown="Window_PreviewMouseDown" 
```

如果`e.OriginalSource`不是扩展器的后代，请关闭扩展器：

```
private void Window_PreviewMouseDown(object sender, MouseButtonEventArgs e)
{
    Visual visual = e.OriginalSource as Visual;

    if (!visual.IsDescendantOf(yourExpander))
        yourExpander.IsExpanded = false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-03T18:33:37.107

为了让我的用户在鼠标悬停在扩展器的任何部分上时自动展开扩展器，并在没有时将其关闭，我使用了以下代码；

在 viewModel 中添加一个 MenuIsVisible 属性、一个 closeMenu 方法、一个 openMenu 方法和 2 个 ICommand；CloseExpanderCommand 和 OpenExpanderCommand

```
public class TripsViewModel : ViewModelBase
{

    private bool _menuIsVisible;
    public bool MenuIsVisible
    {
        get=>_menuIsVisible;
        set
        {
            if (value == _menuIsVisible) { return;}
            _menuIsVisible = value;
            RaisePropertyChanged();
        }
    }

    private void CloseExpander() { MenuIsVisible = false;}
    private void OpenExpander() { MenuIsVisible = true;}

    public ICommand CloseExpanderCommand { get; }
    public ICommand OpenExpanderCommand { get; } 
```

在您看来：确保您参考：

```
xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity" 
```

然后

```
<Border >
   <i:Interaction.Triggers>
       <i:EventTrigger EventName="MouseEnter">
           <i:InvokeCommandAction Command="{Binding OpenExpanderCommand}" />
       </i:EventTrigger>
         <i:EventTrigger EventName="MouseLeave">
            <i:InvokeCommandAction Command="{Binding CloseExpanderCommand}" />
         </i:EventTrigger>
       </i:Interaction.Triggers>
       <Expander Tag="Menu"
              ExpandDirection="Right"
              Header="Menu"
              IsExpanded="{Binding MenuIsVisible}">
            <StackPanel>
            </StackPanel>
       </Expander>
    </Border> 
```

事件触发器是魔法发生的地方。

# c# - EF Codefirst 获取 POCO 的配置

> ID：10738382
> 
> 赞同：0
> 
> 时间：2012-05-24T13:23:13.050
> 
> 标签：c#, .net, code-first

我有一个 POCO 对象（EF 代码优先）

```
public class ExampleTestOfDataTypes
{
        public string StringProp { get; set; }
} 
```

比我有它的配置类：

```
public class ExampleTestOfDataTypesConfig : EntityTypeConfiguration<ExampleTestOfDataTypes>
    {
        public ExampleTestOfDataTypesConfig()
        {
            ToTable("CustomTableName");
            this.Property(m => m.StringProp).HasColumnName("CustomString");
        }
    } 
```

当我在配置文件中更改它时，如何获得新的表名和新的 StringProp 名称（考虑到我有 ExampleTestOfDataTypesConfig 和 ExampleTestOfDataTypes）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T13:17:34.580

如果您想知道映射文件中的内容，请尝试以下方法：

```
void ExportMappings(DbContext context, string edmxFile)  
{  
     var settings = new XmlWriterSettings { Indent = true };  
     using (XmlWriter writer = XmlWriter.Create(edmxFile, settings))  
     {  
         System.Data.Entity.Infrastructure.EdmxWriter.WriteEdmx(context, writer);  
     }  
} 
```

它会将您的所有自定义设置导出到 xml 文件。最好将其命名为 .edmx，然后 VS.NET 将能够自动打开它。

# stream - 从android上传文件到wowza

> ID：10738387
> 
> 赞同：4
> 
> 时间：2012-05-24T13:23:25.087
> 
> 标签：stream, wowza

我已经安装了 wowza 服务器并且能够使用 android 中的视频视图从客户端播放文件现在我必须录制视频并且必须将文件上传到 wowza 服务器。如何编写服务器端应用程序？以及如何从android代码连接？有没有人有这方面的经验？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T13:28:50.110

在 Wowza 中没有内置的东西可以做到这一点。您可以使用 scp 和类似[https://play.google.com/store/apps/details?id=com.perdeas.droidscp&hl=en](https://play.google.com/store/apps/details?id=com.perdeas.droidscp&hl=en)的应用程序来获取文件。另一个想法是构建一个 Web 界面来上传文件，然后将该应用程序 scp 发送到您的 Wowza 服务器。如果您的文件托管在 ec2 上，另一种选择是将文件获取到 s3，并从那里进行流式传输。

# c# - Linq 表达式更改数据存储

> ID：10738388
> 
> 赞同：0
> 
> 时间：2012-05-24T13:23:26.930
> 
> 标签：c#, .net, linq, entity-framework, linq-to-entities

我有以下代码：

```
public class MyContext:DbContext
{
    DbSet<ABFoo> ABFoo { get; set; }
    DbSet<CDFoo> CDFoo { get; set; }
} 
```

ABFoo 和 CDFoo 是具有相同成员的类。我现在有这个查询：

```
var t = context.ABFoo.Where(a => a.ID == 10); 
```

我想以这种方式使 ABFoo 表发生动态变化

```
var t = context.ABFoo.Where(a => a.ID == 10).OnThePrefixTable("CD"); 
```

即使在 ABFoo 表上执行查询，我也必须切换到 CDFoo 表。我知道我必须使用 ExpressionVisistors 并更改“对象”，但不知道我该怎么做！十分感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T13:49:38.657

你可以使用像 AutoMapper [https://github.com/AutoMapper/AutoMapper这样的库](https://github.com/AutoMapper/AutoMapper)

初始化它

```
Mapper.CreateMap<ABFoo, CDFoo>(); 
```

并使用

```
var cdFooList = Mapper.Map(context.ABFoo.SingleOrDefault(a => a.ID == 10), new CDFoo()); 
```

或者如果你返回一个列表

```
var cdFoo = Mapper.Map(context.ABFoo.Where(a => a.Id == 10).ToList(), new List<CDFoo>()); 
```

# ruby-on-rails-3 - 如何创建自定义 Rails 命名空间路由

> ID：10738391
> 
> 赞同：1
> 
> 时间：2012-05-24T13:23:42.287
> 
> 标签：ruby-on-rails-3, namespaces, routes

我第一次开始使用带有命名空间的路由。我理解以下内容的概念。

```
namespace :company do
    namespace :project, defaults:{format: 'json'}  do
      resources :registration 
    end
  end 
```

我的控制器看起来像这样

```
class Company::Project::RegistrationController  < ApplicationController

    before_filter :authenticate_user!
    #responds_to :json

    def register

    end

    def entry

    end
end 
```

因此，在资源中，我想为`register`and定义路线，`entry`但我没有找到任何真正告诉我如何做到这一点的东西。我知道如果我不使用命名空间，那么我通常会在我的路由文件中执行类似的操作。

```
match 'company/project/registration/register' => "Registration#register" 
```

有没有办法在命名空间块中做到这一点？

---------- 更改后 -------------- 在第一个答案中进行以下建议更改后，这就是运行 >rake routes 给我的

```
register_company_project_registration POST       /company/project/registration/:id/register(.:format) company/project/Registration#register {:format=>"json"}
   entry_company_project_registration POST       /company/project/registration/:id/entry(.:format)    company/project/Registration#enrty {:format=>"json"}
   company_project_registration_index GET        /company/project/registration(.:format)              company/project/registration#index {:format=>"json"}
                                             POST       /company/project/registration(.:format)              company/project/registration#create {:format=>"json"}
     new_company_project_registration GET        /company/project/registration/new(.:format)          company/project/registration#new {:format=>"json"}
    edit_company_project_registration GET        /company/project/registration/:id/edit(.:format)     company/project/registration#edit {:format=>"json"}
         company_project_registration GET        /company/project/registration/:id(.:format)          company/project/registration#show {:format=>"json"}
                                             PUT        /company/project/registration/:id(.:format)          company/project/registration#update {:format=>"json"}
                                             DELETE     /company/project/registration/:id(.:format)          company/project/registration#destroy {:format=>"json"} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T13:34:01.847

我希望我对你的理解是正确的。您想为子路线添加额外的路线吗？

方法可能是这样的：

```
namespace :company do
   namespace :project, defaults:{format: 'json'}  do
     resource :registration do
       member do
         get 'register', :to => 'registration#register', :as => :register
         get 'entry', :to => 'registration#enrty', :as => :entry
       end     
     end
   end
end 
```

# ajax - JSF 后退/前进按钮和 Ajax

> ID：10738399
> 
> 赞同：0
> 
> 时间：2012-05-24T13:24:21.163
> 
> 标签：ajax, jsf

希望有人可以向我解释一些行为。我有一个带有数据表和复选框的 JSF 页面。我有一个 Primefaces 命令按钮，它可以做一些事情，然后通过 ajax 重新渲染表格。这一切都按预期工作，但是我有一个问题。当我单击后退按钮然后单击前进按钮时，数据表页面将重新显示为其前 ajax 状态。从萤火虫我可以看到在页面转发上发送了一个新的 Post 请求。我需要转发来显示页面后 ajax。如果您查看 Primefaces 展示 - [http://www.primefaces.org/showcase/ui/datatableRowSelectionRadioCheckbox.jsf](http://www.primefaces.org/showcase/ui/datatableRowSelectionRadioCheckbox.jsf)这可以按我的意愿工作。在复选框表中，如果您单击几个复选框，然后单击查看，则会弹出一个对话框。现在单击后退和前进，页面与您离开时一样。没有在页面转发上发送额外的 post/get 请求。

任何想法 Primefaces 如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T14:06:30.513

PrimeFaces 没有这样做。是你的浏览器在这样做。您的浏览器对 GET 请求显然具有相对激进的缓存设置。尝试使用其他浏览器（例如 Chrome），您会发现无法重现相同的浏览器。

这是你无法控制的。您最多可以用 GET 导航替换 webapp 上的 POST 导航。

# tridion - 在 SDL Tridion 2011 的 Dreamweaver TBB 中循环遍历多个组件链接以获取链接组件的架构名称

> ID：10738405
> 
> 赞同：2
> 
> 时间：2012-05-24T13:24:44.430
> 
> 标签：tridion, tridion-2011

我正在研究 Dreamweaver 模板构建块并为页面实现 SiteEdit。

我正在使用 SDL Tridion 2011 SP1 和 Site Edit 2012 以及 Default Dream Weaver 模板。

我的架构有一个“组件链接”类型的多值字段。我的主要组件 XML 看起来像这样。

```
<Content xmlns="UUID">
    <link xlink:type="simple" xlink:href="tcm:202-8121"
          xmlns:xlink="http://www.w3.org/1999/xlink"></link>
    <link xlink:type="simple" xlink:href="tcm:202-8122"
          xmlns:xlink="http://www.w3.org/1999/xlink"></link>
</Content> 
```

链接组件 XML 如下所示。

```
<Content xmlns="Some other UUID">
    <text>Hi all</text>
</Content> 
```

我的目标是获取链接组件的架构名称，并为链接组件的字段启用内联编辑。我为带有 URI 的链接组件的架构创建了一个单独的组件模板`tcm:202-8142-32`。

我已经为这样的主要组件编写了 DWT TBB。

```
<!-- TemplateBeginRepeat name="Fields.link" -->
    <div>
        (FieldPath=@@FieldPath@@, TemplateRepeatIndex=@@TemplateRepeatIndex@@)
    </div>

    <!-- Not able to get the schema name of the linked component -->            
    @@RenderComponentPresentation(link, "tcm:202-8142-32")@@
<!-- TemplateEndRepeat --> 
```

我无法遍历组件链接字段“链接”。

然后我更改了只允许单个组件链接的架构。当 TBB 编写如下时，一切正常：

```
@@RenderComponentPresentation(link, "tcm:202-8142-32")@@ 
```

我知道问题在于循环遍历多个组件链接。

请建议如何遍历多个组件链接并获取每个链接组件的架构名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T13:53:08.713

我认为您不可能使用 DWT 获取模式名称。您需要做的是编写 ac# 构建块来提取您要查找的值，然后将这个值放入包中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T20:54:24.990

当您循环遍历多值字段的值时（就像您在此处所做的那样），当前值可在名为`Field`. 因此，如果您只是将调用更改`RenderComponentPresentation`为引用它，我认为它应该可以工作：

```
<!-- TemplateBeginRepeat name="Fields.link" -->
    <!-- Not able to get the schema name of the linked component -->            
    @@RenderComponentPresentation(Field, "tcm:202-8142-32")@@
<!-- TemplateEndRepeat --> 
```

# selenium - 如何使用 selenium 在不同的应用程序中重用相同的 WebDriver

> ID：10738407
> 
> 赞同：3
> 
> 时间：2012-05-24T13:24:47.443
> 
> 标签：selenium, webdriver, selenium-firefoxdriver

我在这里写信是想问是否可以初始化`WebDriver`

```
WebDriver driver = new FirefoxDriver(); 
```

并为许多 jar 应用程序使用相同的浏览器，这样做，在其他 jar 文件中，类似：

```
int port = ...;
String host = ...;
WebDriver driver = getDriver(host,port); 
```

我问这个问题是因为 FirefoxDriver 加载和出现的速度非常慢，我需要调用许多 jar 来加载该驱动程序。我认为通过这种方式，只加载一次我的驱动程序，我的整个应用程序将比打开该驱动程序的 N 次 N 实例快。我希望我的问题是明确的和格式良好的:) 谢谢大家！

编辑：我看到有可能使用`RemoteWebDriver`.

```
DesiredCapabilities capability = DesiredCapabilities.firefox();
WebDriver driver = new RemoteWebDriver(new URL("http://localhost:4444/wd/hub"), capability); 
```

我该如何使用它？当我必须在 localhost:4444 中实例化 webdriver 时？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T14:44:21.243

这是[Selenium 中最需要的功能请求](http://code.google.com/p/selenium/issues/detail?id=18)。但是，仍然无法将 a 附加`WebDriver`到正在运行的浏览器窗口。您发现的`RemoteWebDriver`是在另一台计算机上远程运行测试的可能性。但是那台计算机仍然需要启动一个新的浏览器窗口。

我猜你可以把你的应用程序写成一个 HUB，它将所有 jars（类）排入队列以运行，启动一个 Firefox 实例并传递`driver`引用。这不是一个好的解决方案，据我所知，还没有人这样做。

但！在 Firefox 中启动时花费的大部分时间是创建一个新的[`FirefoxProfile`](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/firefox/FirefoxProfile.html). 如果您创建了一个专门用于测试的配置文件并始终使用此配置文件启动 Firefox，它会明显更快。

# python - 我可以用 C 重写我昂贵的 pygame 函数吗？

> ID：10738409
> 
> 赞同：4
> 
> 时间：2012-05-24T13:24:59.173
> 
> 标签：python, c, pygame, path-finding, a-star

我是否可以在我的 pygame 游戏中找到昂贵的功能（例如，A* 寻路）并将它们重写为[此处](http://docs.python.org/extending/extending.html)概述的扩展？

这样做有速度优势吗？有更好的（python）解决方案吗？

我问这个问题是因为我刚刚开始学习 C 的原因不相关，当我想到这可能是我回到 Python 和 pygame 时的好主意。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-24T13:30:22.847

> 这样做有速度优势吗？

如果不知道自己在做什么，就不可能说出来，但一般的答案是“很可能”。

> 有更好的（python）解决方案吗？

再次，这是不可能的。比什么更好？

如果您正在使用数值数组，那么第一步可能应该是使用[NumPy](http://numpy.scipy.org/)。

完成此操作后，除了在原始 C 中编码扩展之外，还有多种途径可以加快速度：

*   [Cython](http://cython.org/)：用类似 Python 的语言编写扩展；
*   [numexpr](http://code.google.com/p/numexpr/) : 数组表达式的快速评估引擎。

最后，如果您确实发现自己正在编写 C 或 C++ 扩展，请考虑使用[SWIG](http://www.swig.org/)或[Boost.Python](http://www.boost.org/doc/libs/1_49_0/libs/python/doc/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-24T13:41:44.113

您可以使用 cProfile 查找代码中最昂贵的函数。我很确定在将一些代码移至 C 之后，您会看到性能改进。根据我的测试，它可以是 2 倍到 200 倍的任何改进，具体取决于您的代码。

实现这一点的最简单方法是将昂贵的函数移动到单独的模块中，添加变量声明并使用 Cython 编译它们。然后，您可以将它们导入到您的主程序中，因为它们是 python 模块。

这是一个很棒的教程，介绍了可用于优化代码的不同方法，包括分析和 Cython：

[http://ianozsvald.com/HighPerformancePythonfromTrainingatEuroPython2011_v0.2.pdf](http://ianozsvald.com/HighPerformancePythonfromTrainingatEuroPython2011_v0.2.pdf)

# numpy - 涉及 Scitools、NumPy 和 SciPy 的推荐设置

> ID：10738412
> 
> 赞同：6
> 
> 时间：2012-05-24T13:25:19.103
> 
> 标签：numpy, python-3.x, scipy, scientific-computing

我有一本书名为“Scientific Programming with Python (2009)”，其中示例代码大量使用了 SciTools。我使用 Python 3.2 64（考虑使用 2.7 的并行安装/开发环境；稍后会详细介绍），SciTools 尚未移植到该版本。

Scitools 是否已被 NumPy/SciPy 出于多种目的而取代？要不然是啥？易视？我完全可以通读这本书并将代码转换为 3.2 中最新的任何 API / 模块。我宁愿这样做，也不愿设置 Python 2.7 系统。

您推荐的设置是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-24T13:47:40.173

Scipy/Numpy 是使用 python 进行科学/数值计算的事实标准。绝大多数软件包都是在它们之上构建的（包括 Scitools）。在许多方面，Scitools 看起来只是 Numpy/Scipy/Matplotlib 的一个方便的包装器。

就 Python 3 的支持而言，Numpy 和 Scipy 都在那里，但 Matplotlib 还没有（虽然我认为它可能在 github 上的开发 repo 中得到支持）：

[http://onpython3yet.com/packages/requirements?r=numpy%0D%0Amatplotlib%0D%0Ascipy](http://onpython3yet.com/packages/requirements?r=numpy%0D%0Amatplotlib%0D%0Ascipy)

就我个人而言，我从未使用过 Scitools，因为我更喜欢直接使用其他库的较低级别的控制。我也坚持使用 Python 2.7，因为完整的科学编程堆栈还没有完成向 Python 3 的迁移。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T03:56:35.877

还要看看[Pandas](http://pandas.pydata.org)的数值工作。它建立在 NumPy 之上。

# .net - 在标签中显示组合框字段

> ID：10738413
> 
> 赞同：1
> 
> 时间：2012-05-24T13:25:26.420
> 
> 标签：.net, vb.net

我有一个组合框，它读取一个目录并在组合框中显示文件名。我想要做的是当在组合框中选择一个值时，我希望在标签中显示它。

我试过以下

```
 Label1.Text = Combobox1.SelectedValue 
```

但这似乎不起作用。

我在组合框中显示值的编码

```
With Combobox1
     .DisplayMember = "Name" 
     .ValueMember = "FullName"
     .DataSource = New IO.DirectoryInfo("Path").GetFiles().Select( _ 
       Function(fi) New With {.Name = IO.Path.GetFileNameWithoutExtension( _ 
       fi.FullName), fi.FullName}).ToArray()
End With 
```

我在 Combobox1_SelectedIndexChanged 事件中有第一个编码片段。

当我在组合框中选择一个值但我想在 label1.text 中显示“名称”时，“全名”与 textbox1 一起使用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T13:43:11.077

使用`SelectedItem.ToString()`. `SelectedValue`是分配给用户看不到的项目的值。它有点像一个标签，如果你想这样看的话。如果您没有明确设置项目的值，它将为 NULL，这就是您在标签中看不到任何内容的原因。

`SelectedValue`对数据绑定非常有用。例如，您希望用户看到名称“John Smith”，但您希望将该值设置为绑定到的数据库行的主键。如果您根据该项目更新数据库，则可以将`SelectedValue`作为参数（John Smith 行的 PK）传递，因为它已经设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T13:47:39.487

请像这样跟随。希望这可以帮助。

```
private void comboBox1_SelectedIndexChanged(object sender, System.EventArgs e)
{
    label1.Text=comboBox1.SelectedItem.ToString(); 

                    OR
    label1.Text=comboBox1.SelectedValue.ToString();

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T20:25:08.743

您可以使用 ：

```
ComboBox1.SelectedItem.Name 
```

或者

```
ComboBox1.SelectedItem.FullName 
```

取决于你想要做什么。

`SelectedItem`是一个匿名对象，因此如果您在具有不同键/值的不同组合框上使用它，属性的名称将不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-15T14:39:35.733

试试这个它对我有用，只需在此代码中给出您要从中访问文本的列名。

```
label1.Text = specific.Rows[comboBox1.SelectedIndex]["Column name"].ToString(); 
```

# java - Java通过单击小程序上的某个位置来移动绘制的图像？

> ID：10738418
> 
> 赞同：0
> 
> 时间：2012-05-24T13:25:37.427
> 
> 标签：java

当您单击小程序上的某个位置时，我如何移动使用绘制的图像，`g.drawImage`它将滑动到该位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T13:29:53.760

您需要在小程序上使用[MouseListener](http://docs.oracle.com/javase/tutorial/uiswing/events/mouselistener.html)。基本上，您可以在小程序中定义自己的`implements MouseListener`. 然后，当您通过单击（覆盖`public void mouseClicked (MouseEvent me)`）抓住鼠标位置时，您可以重绘图像。[这是 Applet 上 MouseListener 的一个很好的例子](http://www.realapplets.com/tutorial/MouseClickExample.html)

# asp.net-mvc - 将物理文件和动态文件合并为一个文件

> ID：10738419
> 
> 赞同：0
> 
> 时间：2012-05-24T13:25:40.773
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2, asp.net-mvc-4

我需要将一堆文件合并到一个“文件”中。但我还需要其中一些文件是动态的，所以我有返回动态资源的操作。例如

```
[OutputCache(VaryByParam = "culture", Duration = 3600)]
public ActionResult Settings(string culture)
{
    CultureInfo cultureInfo;
    try
    {
        cultureInfo = new CultureInfo(culture);
    }
    catch
    {
        cultureInfo = Configuration.Current.DefaultCulture;
    }
    var sb = new StringBuilder();
    sb.AppendFormat("Cms.Settings.Language = '{0}';", cultureInfo.TwoLetterISOLanguageName);

    sb.AppendFormat("Cms.Settings.DayNames = [{0}];", string.Join(",", cultureInfo.DateTimeFormat.DayNames.Select(d => "\"" + d + "\"")));
    sb.AppendFormat("Cms.Settings.ShortDayNames = [{0}];", string.Join(",", cultureInfo.DateTimeFormat.AbbreviatedDayNames.Select(d => "\"" + d + "\"")));
    sb.AppendFormat("Cms.Settings.FirstDay = {0};", (int)cultureInfo.DateTimeFormat.FirstDayOfWeek);

    sb.AppendFormat("Cms.Settings.ShortMonthNames = [{0}];", string.Join(",", cultureInfo.DateTimeFormat.AbbreviatedMonthNames.Take(12).Select(m => "\"" + m + "\"")));

    var languages = new[]{cultureInfo.TwoLetterISOLanguageName};
    var keys = translator.GetKeys(languages[0]);
    foreach (var key in keys)
    {
        sb.AppendFormat("Cms.Settings.Texts['{0}'] = '{1}';", key, translator.GetText(key, key, languages));
    }

    // TODO: from settings
    sb.AppendFormat("Cms.Settings.IconDir = '{0}';", VirtualPathUtility.ToAbsolute("~/img/icons/"));
    return JavaScript(sb.ToString());
} 
```

我想要做的是将这些物理文件和 ActionResults 合并到一个“文件”中。我已经做了这个动作来进行组合，但我不知道通过路径获取动作输出的简单方法。

```
// files is like "jquery.js,/js/settings?culture=fi,jquery-ui.js,..."
[OutputCache(VaryByParam = "files", Duration=3600)]
public ActionResult Bundle(string files)
{
    var paths = files.Split(new[] { ',' }, StringSplitOptions.RemoveEmptyEntries);
    var sb = new StringBuilder();
    foreach (var path in paths)
    {
        appendFile(sb, path);
    }
    return JavaScript(sb.ToString());
}
private void appendFile(StringBuilder sb, string path)
{
    if (/* path is file on disk */)
    {
        var filename = Server.MapPath(path);
        if (!System.IO.File.Exists(filename))
        {
            return;
        }
        sb.Append(System.IO.File.ReadAllText(filename));
    }
    else if(/* is action */)
    {
        // how do I get the output?
        var output = getActionOutput(path);
        sb.Append(output);
    }
} 
```

我尝试的另一个选项是将 VirtualPathProvider 用于动态文件，但由于某种原因，没有为不在磁盘上的文件调用“GetFile”。

```
public class JsVirtualPathProvider : VirtualPathProvider
{
    public override bool FileExists(string virtualPath)
    {
        if (virtualPath == "~/js/settings/fi.js")
        {
            // this was called
            return true;
        }
        return base.FileExists(virtualPath);
    }
    public override VirtualFile GetFile(string virtualPath)
    {
        // never called for this "file"?
        if (virtualPath == "~/js/settings/fi.js")
        {
                return new JsFile(virtualPath, "Cms.Settings.Foo = 'Bar';");
        }
        return base.GetFile(virtualPath);
    }

    class JsFile : VirtualFile
    {
        private readonly string content;
        public JsFile(string virtualPath, string content) : base(virtualPath)
        {
                this.content = content;
        }
        public override Stream Open()
        {
                return new MemoryStream(Encoding.UTF8.GetBytes(content), false);
        }
    }
} 
```

将物理文件与动态/虚拟文件结合起来的最简单方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T07:43:23.637

我使用以下代码获得了操作的输出。

```
var url = string.Format("{0}://{1}", Request.Url.Scheme, Request.Url.Host);
if (Request.Url.Port != 80)
{
    url += ":" + Request.Url.Port;
}
url += path;
var writer = new StringWriter(sb);
var httpContext = new HttpContext(new HttpRequest("", url, ""), new HttpResponse(writer));
HttpContextBase httpContextBase = new HttpContextWrapper(httpContext);
var routeData = System.Web.Routing.RouteTable.Routes.GetRouteData(httpContextBase);
var handler = RouteData.RouteHandler.GetHttpHandler(new RequestContext(httpContextBase,routeData));
handler.ProcessRequest(httpContext); 
```

由于某种原因，被调用操作（设置）中的 QueryStringValueProvider 具有调用操作（捆绑）的值，所以我将路径更改为`/js/settings/{culture}`（以前`/js/settings?culture={culture}`）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-24T13:31:05.810

```
else if(/* is action */)
{
    // how do I get the output?

    // You need to send an HTTP request (for example using WebClient) 
    // to fetch the result of the execution of this action
    ...
} 
```

# ios - 如何从 Windows 机器发送 Apple 推送通知？

> ID：10738421
> 
> 赞同：1
> 
> 时间：2012-05-24T13:25:49.830
> 
> 标签：ios, windows-7, apple-push-notifications

我有 Mac 机器和 Windows 机器。我想使用 Windows 机器作为服务器来连接 APNS。是否可以将 Windows 机器用作 APN 的服务器？如果可能，我需要为 APNS 连接设置什么？如何在 Windows中保留/安装`.pem`文件和文件？`.csr`谁能帮我解决这个问题？我已经为 Windows 搜索了 MAMP 以使用 Apache 服务器和 MySQL 服务器，但 MAMP 仅适用于 Mac 机器。Windows 7 有什么替代方案吗？

# jquery - 根据用户先前选择的选项预先检查一个框

> ID：10738430
> 
> 赞同：0
> 
> 时间：2012-05-24T13:26:22.020
> 
> 标签：jquery, ajax, database

我可以让用户选择退出我网站的某个功能。这会将他们的选择加入/退出决定与“0”或“1”一起存储在数据库中。一切都很好，但是当他们再次访问该站点时，即使他们之前已选中该框，该框也未选中。

我想要它，这样当他们访问该网站时，他们之前的选择就会被记住。我认为这样做的一种方法是在页面加载时简单地执行 ajax 请求以查看数据库中的值，但我已经在使用 AJAX 来保存单击复选框时的选项。

一页中有太多的ajax调用吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T13:29:15.523

并不真地。您可以使用 ajax 调用它，但为什么要在 ajax 中执行此操作，如果您进入页面，从加载页面的那一刻起就需要将其设置为检查？那么为什么要进行 AJAX 调用呢？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T13:35:43.053

如果您真的想使用 jQuery 而不是在呈现页面时执行此操作，请执行以下操作：

```
$("#<idOfCheckbox>").attr('checked', <some condition to check> ? 'checked' : null); 
```

# jasper-reports - JasperReports：通过参数值更改字体大小

> ID：10738431
> 
> 赞同：8
> 
> 时间：2012-05-24T13:26:27.107
> 
> 标签：jasper-reports

```
<style name="blueStyle" >
    <conditionalStyle>
        <conditionExpression><![CDATA[($P{INDIRIZZO}).length()>30 ?  Boolean.TRUE : Boolean.FALSE]]></conditionExpression>
        <style  style="blueStyle"  fontSize="3"/>
    </conditionalStyle>
</style>
<parameter name="INDIRIZZO" class="java.lang.String"/>

[...]

<textField>
    <reportElement x="178" y="94" width="157" height="17"/>
    <textElement>
        <font fontName="Arial" size="9"/>
    </textElement>
    <textFieldExpression class="java.lang.String"><![CDATA[$P{INDIRIZZO}]]></textFieldExpression>
</textField> 
```

***当INDIRIZZO***长度 > 30时，我想缩小字体...

但这没有用....

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-24T13:38:14.310

您忘记将自定义样式应用于*textField*。

正确的片段将是：

```
 <textField>
        <reportElement style="blueStyle" x="178" y="94" width="157" height="17"/>
        <textElement>
            <font fontName="Arial" size="9"/>
        </textElement>
        <textFieldExpression class="java.lang.String"><![CDATA[$P{INDIRIZZO}]]></textFieldExpression>
    </textField> 
```

我的工作样本：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="conditional_styl" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20">
    <style name="style1" forecolor="#66FF66" backcolor="#009966">
        <conditionalStyle>
            <conditionExpression><![CDATA[$P{parameter1}.length() < 2]]></conditionExpression>
            <style forecolor="#FFCC00"/>
        </conditionalStyle>
    </style>
    <parameter name="parameter1" class="java.lang.String"/>
    <queryString>
        <![CDATA[SELECT DOCUMENTID FROM POSITIONS]]>
    </queryString>
    <field name="DOCUMENTID" class="java.lang.Integer"/>
    <detail>
        <band height="20" splitType="Stretch">
            <textField>
                <reportElement style="style1" x="0" y="0" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{DOCUMENTID}]]></textFieldExpression>
            </textField>
        </band>
    </detail>
</jasperReport> 
```

***另一个修改fontSize***的工作示例：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="conditional_styl" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20">
    <style name="style1" fontSize="6">
        <conditionalStyle>
            <conditionExpression><![CDATA[$F{DOCUMENTID} % 2 == 0]]></conditionExpression>
            <style fontSize="8"/>
        </conditionalStyle>
        <conditionalStyle>
            <conditionExpression><![CDATA[$F{DOCUMENTID} % 3 == 0]]></conditionExpression>
            <style fontSize="10"/>
        </conditionalStyle>
        <conditionalStyle>
            <conditionExpression><![CDATA[$F{DOCUMENTID} % 5 ==0]]></conditionExpression>
            <style fontSize="12"/>
        </conditionalStyle>
        <conditionalStyle>
            <conditionExpression><![CDATA[$F{DOCUMENTID} % 7 ==0]]></conditionExpression>
            <style fontSize="14"/>
        </conditionalStyle>
        <conditionalStyle>
            <conditionExpression><![CDATA[$F{DOCUMENTID} % 11 ==0]]></conditionExpression>
            <style fontSize="16"/>
        </conditionalStyle>
        <conditionalStyle>
            <conditionExpression><![CDATA[$F{DOCUMENTID} % 13 ==0]]></conditionExpression>
            <style fontSize="18"/>
        </conditionalStyle>
    </style>
    <queryString>
        <![CDATA[SELECT distinct DOCUMENTID FROM POSITIONS]]>
    </queryString>
    <field name="DOCUMENTID" class="java.lang.Integer"/>
    <detail>
        <band height="34" splitType="Stretch">
            <textField>
                <reportElement style="style1" x="0" y="0" width="100" height="34"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{DOCUMENTID}]]></textFieldExpression>
            </textField>
        </band>
    </detail>
</jasperReport> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-06-12T08:00:15.200

您还可以使用样式文本来允许动态更改文本大小。将 textElement 标记设置为`styled`，然后`<style>`在 textFieldExpression 的内容周围添加一个标签。

```
<textField>
    <reportElement x="10" y="10" width="150" height="13" />
    <textElement markup="styled"/>
    <textFieldExpression>
        <![CDATA["<style size=\"" + $V{fontSize} + "\">" + $F{name} + "</style>"]]>
    </textFieldExpression>
</textField> 
```

在这种情况下，文本大小由`Integer`报表中定义的变量指定，但它同样可以来自另一个字段或报表参数。

```
<variable name="fontSize" class="java.lang.Integer">
    <variableExpression><![CDATA[12]]></variableExpression>
</variable> 
```

这使您可以做一些聪明的事情，例如根据字段的长度改变文本大小：

```
<variable name="fontSize" class="java.lang.Integer">
    <variableExpression><![CDATA[$F{firstName}.length()]]></variableExpression>
</variable> 
```

可以看到图片下方名字的字体大小是基于名字的长度的：

[![动态文本大小](../Images/a4cce1cba28862b7f546ad52e2543ec0.png)](https://i.stack.imgur.com/XJiMW.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T15:33:52.610

我正在使用*iReport 2.0.2*，虽然我可以剪切和粘贴上面的内容并使其工作，但当我从头开始尝试我自己的版本时它不起作用。

我最终做的是创建两个相互重叠的字段，并在表达式中使用相反的打印。我确定给定框的长度，57 个字符将在 10 pt 字体下正确显示。

当表达式结束时，我的打印结果如下：

```
Box 1 ($F{DATA1}.length() >= 58 ? Boolean.TRUE : Boolean.FALSE)  (font size is lowered)
Box 2 ($F{DATA1}.length() < 58 ? Boolean.TRUE : Boolean.FALSE)   (10 pt font size) 
```

我知道这并不优雅，但它有效。在尝试让 Style 工作并失败了几天之后，我查看了其他选项并确定了这个。

我希望这种风格适合你，但如果不是，这可能是一个很好的 B 计划。

# jquery - 鼠标离开 div 时悬停熄灯（关闭）（几乎完成但错过了一些找不到的东西）

> ID：10738435
> 
> 赞同：0
> 
> 时间：2012-05-24T13:26:47.250
> 
> 标签：jquery, menu, hover, mouseover, light

我正在使用 joomla 菜单，当鼠标悬停在菜单上时，我尝试设置 1 个效果（“灯”熄灭位置....但是**当鼠标** 消失时，**它正在移除**（退出）**悬停** 位置的问题从 div id="menu" 到网站中的任何其他 div / 位置...

 **这是我们可以测试（和更新）的完整代码：http: [//jsfiddle.net/FEBkJ/](http://jsfiddle.net/FEBkJ/)

HTML：

```
<div id="menu" class="standout">
            <jdoc:include type="modules" name="menu" />
</div>
<div id="the_lights" style="display: block; opacity: 0; "></div> 
```

CSS：

```
#menu{height:30px;width:960px;zoom:1;margin-top:5px;background:#C15F56;z-index:1001;}
#the_lights {opacity:0.5; background-color:#000; width:100%; height:100%; z-index:10; top:0; left:0; position:fixed; }
.standout {position: relative;z-index: 10000}​ 
```

脚本：

```
 jQuery(document).ready(function () {
        jQuery("#the_lights").fadeTo(1, 0);
        jQuery(".turnon").hide();

        jQuery("#menu").hover(function () {
            jQuery("#the_lights").css({ 'display': 'block' });
            jQuery("#the_lights").fadeTo("slow", 0.8);
            jQuery(".turnon").show();
            jQuery(".turnoff").hide();
        });          
    });​ 
```

我也在论坛中搜索了一些解决方案......但找不到它......感谢您的帮助！来自铂的最诚挚的问候！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T13:34:16.923

如果我对您的理解正确，并且看着 Fiddle，您想在鼠标离开正确`div` `#the_lights`时将其淡化回 0 不透明度？`#menu`

如果是这样，您可以使用`.mouseenter`and `'.mouseleave'

```
jQuery("#menu").mouseenter(function () {
    jQuery("#the_lights").css({ 'display': 'block' });
    jQuery("#the_lights").fadeTo("slow", 0.8);
    jQuery(".turnon").show();
    jQuery(".turnoff").hide();
});

jQuery("#menu").mouseleave(function () {
    jQuery("#the_lights").css({ 'display': 'block' });
    jQuery("#the_lights").fadeTo("slow", 0);
    jQuery(".turnon").show();
    jQuery(".turnoff").hide();
}); 
```

或者您可以使用`.toggle`将功能合二为一。

我找不到对`.turnon`和`.turnoff`类的任何引用，所以我假设它们在页面的另一部分。**

# ios - 在 IOS 上创建 facebook 应用程序

> ID：10738436
> 
> 赞同：0
> 
> 时间：2012-05-24T13:26:57.003
> 
> 标签：ios, facebook, actionscript-3, mobile

我从[http://code.google.com/p/facebook-actionscript-api/](http://code.google.com/p/facebook-actionscript-api/)获得了 actionscript facebook api， 并使用了 FriendsListMobile 的示例代码。我更改了我的 APP id，但我该如何处理 SITE_URL？

```
//Place your application id here.
protected static const APP_ID:String = 'YOUR_APP_ID';
//Place your specified site URL for your app here. This is needed for clearing cookies when logging out.
protected static const SITE_URL:String = 'http://your.site.url/'; 
```

如何在 Facebook 上为 Native iOS App 设置我的应用程序：

*   我必须填写所有字段吗
*   我的应用不在应用商店中，所以我没有 iPad App Store ID
*   捆绑包 ID 是强制性的
*   可以将所有字段留空，只需获取我的应用程序的 APP ID 并稍后填写其余部分 - 可以吗？

目前，facebook 代码示例无法在 Ipad 上运行 - 它只是显示干扰项。一定有什么我错过了。

有什么想法吗？谢谢

# javascript - 从具有相同类名的不同输入字段中获取值

> ID：10738437
> 
> 赞同：2
> 
> 时间：2012-05-24T13:27:02.873
> 
> 标签：javascript, jquery

我正在开发一个图像共享网站，现在我正在渲染页面上的用户相册。每个相册至少包含一个图像，我想将所有相册显示为每个框中有四个缩略图（相册中的前四个图像）的框。

图像文件名存储在每个框中隐藏输入字段的值中，我想要做的是从每个相册框中获取所有文件名并将它们显示为缩略图。

我需要帮助的部分是如何从每个相册框中逐个获取文件名。下面的代码由于明显的原因不起作用，但是如何重写它才能起作用呢？所有输入字段都具有相同的类名。

提前致谢！

```
 if ($('.hiddenAlbumNames').length > 0){

        var images = $(this).val();

                    // the rest of the code (creating images and putting them in the album boxes)
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T13:28:49.767

您必须循环`$('.hiddenAlbumNames')`jQuery 集合以获取所有输入的值

```
$('.hiddenAlbumNames').each(function() {
       console.log( $(this).val() );
       /* rest of the code for each name retrieved */
}) 
```

# jquery - 检测链接类已更改

> ID：10738441
> 
> 赞同：1
> 
> 时间：2012-05-24T13:27:18.397
> 
> 标签：jquery, class

> **可能重复：**
> [jQuery 中的类名更改事件](https://stackoverflow.com/questions/3139608/class-name-change-event-in-jquery)

我在 bxsilder 旁边使用 jquery。

我需要 jquery 来识别链接上的类更改，然后该链接将沿一条线为图像设置动画。

在页面加载时 div1 .pager-active 将图像沿线向左移动：15% 按下下一个时，div2 下的链接将获取类 .pager-active 等等。

所以我需要 jquery 来识别 div2 现在有类 .pager-active 用于将 img 动画到左侧：50%

下面是我一直在使用的代码，它适用于 div1 的初始加载，但在加载后未检测到任何类更改。

```
if( $('#div1 .pager-active').length){
    $('.line img').animate({'left' : '15%'},600);
        };

if( $('#div2 .pager-active').length){
    $('.line img').animate({'left' : '50%'},600);
        };

if( $('#div3 .pager-active').length){
    $('.line img').animate({'left' : '85%'},600);
        }; 
```

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T13:45:51.100

尝试`DOMAttrModified`事件：

```
document.getElementsById('div2').addEventListener('DOMAttrModified', function(e){
  if (e.attrName === 'style') {
    ...
  }
}, false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T13:33:47.017

您可以获取此处发布的课程更改事件：

[jQuery中的类名更改事件](https://stackoverflow.com/questions/3139608/class-name-change-event-in-jquery)

但您也可以尝试此解决方案：

按下下一个时，获取具有类 .pager-active 的 div 的 id。为此使用 getAttr()。获得 id 后，删除它的类，将类附加到下一个 div 并执行效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T13:34:03.057

```
var oldClass = $("#div").attr('class');
if(oldClass != $("#div").attr('class');
{
 //Do something?
} 
```

可能是这样的吗？

# android - 跨不同的 Android 平台构建应用程序？

> ID：10738444
> 
> 赞同：0
> 
> 时间：2012-05-24T13:09:29.750
> 
> 标签：android

我看到一大堆平台/SDK，从 1.x 到 4.x。

这是否意味着我必须为所有不同版本分别构建我的应用程序？

我的目标是包装我的 HTML5 Web 应用程序，并将其作为原生应用程序在应用商店中提供。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T13:44:11.663

通常，您可以编写一个针对 android 1.6 的应用程序并将其部署到支持更高 API 级别的每个设备上。您可以编译针对 android 4.0 的应用程序，只要您编写的代码不依赖于 1.6 中不存在的 API，它仍将在 1.6 上运行。

由于自 1.6 以来发生了很多变化，因此您可以使用一个[兼容性库。](http://developer.android.com/sdk/compatibility-library.html)此库不包含操作栏。因此，您可以使用[Actionbar Sherlock](http://actionbarsherlock.com/)。

使用这两个库，您应该能够为 1.6 编写应用程序，而不必费力地传授新技术。

如果您仍然依赖最少量的 API 功能，您可以在运行时请求 API 级别并仅为新设备实现功能。您应该避免在旧设备上使用此 API。您可以编译它，但如果这样做，它会在运行时崩溃。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T13:32:15.560

您通常针对您计划支持和测试的最新 SDK 进行构建。这通常表示“当前 SDK”，并在清单中表示为“targetSDKVersion”。另一个名为“minSDKVersion”的值表示您在 API 级别方面支持多远。Google 在过去版本的 SDK 中保持 API 的一致性，因此测试最新版本通常符合您的最佳利益。

但是，在较新的 SDK 中，可能会有一些因素导致您的应用程序外观或行为有所不同，因此当您更新 SDK、工具和 targetSDKVersion 时，您可能需要做一些工作以使您的应用程序看起来像它所属的那样。

# jetty - 同时执行多个jetty runner实例

> ID：10738445
> 
> 赞同：0
> 
> 时间：2012-05-24T13:27:36.693
> 
> 标签：jetty

是否可以同时运行 jetty runner 的多个实例。就像多个用户喜欢在同一服务器上启动不同的战争（都使用码头），码头必须同时执行所有请求战争。关于实施这个的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T18:02:16.920

您需要为其提供不同的端口，并为每个端口设置不同的 JETTY_RUN 变量，否则他们将尝试使用相同的 pid 文件并且无法启动。我个人发现启动多个实例会在服务器上产生非常高的负载，因此我更喜欢只有 1 个具有多个上下文。

# postgresql - Postgresql选择列=数组的行

> ID：10738446
> 
> 赞同：113
> 
> 时间：2012-05-24T13:27:38.400
> 
> 标签：postgresql

这是我正在尝试做的总结：

```
$array[0] = 1;
$array[1] = 2;

$sql = "SELECT * FROM table WHERE some_id = $array" 
```

显然，存在一些语法问题，但这是我想要做的，我还没有找到任何可以说明如何做到这一点的东西。

目前，我的计划是按照以下方式做一些事情：

```
foreach($idList as $is)
    $where .= 'some_id=' . $id . ' OR';
endforeach

$sql = "SELECT * FROM table WHERE " . $where; 
```

那么 PostgreSQL 中是否支持使用数组进行搜索，还是我必须做一些类似于我的解决方案的事情？

* * *

## 回答 #1

> 赞同：206
> 
> 时间：2012-05-24T13:28:33.970

```
SELECT  *
FROM    table
WHERE   some_id = ANY(ARRAY[1, 2]) 
```

或`ANSI`- 兼容：

```
SELECT  *
FROM    table
WHERE   some_id IN (1, 2) 
```

`ANY`首选语法是因为整个数组可以在绑定变量中传递：

```
SELECT  *
FROM    table
WHERE   some_id = ANY(?::INT[]) 
```

您需要传递数组的字符串表示形式：`{1,2}`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-03-23T09:09:28.700

对于动态 SQL 使用：

`'IN(' ||array_to_string(some_array, ',')||')'`

## 例子

```
DO LANGUAGE PLPGSQL $$

DECLARE
    some_array bigint[];
    sql_statement text;

BEGIN

    SELECT array[1, 2] INTO some_array;
    RAISE NOTICE '%', some_array;

    sql_statement := 'SELECT * FROM my_table WHERE my_column IN(' ||array_to_string(some_array, ',')||')';
    RAISE NOTICE '%', sql_statement;

END;

$$; 
```

结果： `NOTICE: {1,2} NOTICE: SELECT * FROM my_table WHERE my_column IN(1,2)`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-09-21T13:45:44.200

就我而言，我需要使用包含数据的列，因此使用 IN() 不起作用。感谢@Quassnoi 提供的示例。这是我的解决方案：

```
SELECT column(s) FROM table WHERE expr|column = ANY(STRING_TO_ARRAY(column,',')::INT[]) 
```

在我偶然发现这篇文章之前，我花了将近 6 个小时。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-04-08T15:50:29.530

```
 $array[0] = 1;
   $array[2] = 2;
   $arrayTxt = implode( ',', $array);
   $sql = "SELECT * FROM table WHERE some_id in ($arrayTxt)" 
```

# android - Android 如何从图库中的 sdcard 查看文档？

> ID：10738448
> 
> 赞同：5
> 
> 时间：2012-05-24T13:27:41.467
> 
> 标签：android, search, gallery, document, sd-card

我有一个应用程序，用户可以在其中从 sdcard 搜索图像、音频、视频、doc 文件，然后选择 1 个文件将其上传到服务器上。使用下面的代码，我可以打开图库并选择图像、音频、视频但我不知道如何从图库中搜索文档。

这是我的代码。

```
 Intent intent = new Intent();
    intent.setAction(Intent.ACTION_GET_CONTENT);
    //intent.setType("video/*");
    //intent.setType("audio/*");
    //intent.setType("image/*");
    //**What I have to do for view document[.pdf/text/doc] file**
    startActivityForResult(Intent.createChooser(intent, "Complete action using"), REQUEST_CODE); 
```

有谁知道如何实现这一目标？任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-19T07:14:04.337

试试这个库**aFileChooser** 它的工作正常

请看这个[链接](https://github.com/iPaulPro/aFileChooser)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T17:08:54.823

试试下面的，

```
File docfolder = new File(Environment.getExternalStorageDirectory() + "/"
                + "Documents/");
File docList[] = docfolder.listFiles();
for(int i=0;i<docList.length;i++)
{   
        if (docList[i].exists()) {
            Uri path = Uri.fromFile(docList[i]);
            Intent intent = new Intent(Intent.ACTION_VIEW);
            intent.setDataAndType(path, "application/msword");
            intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

            try {
                startActivity(intent);
            }
             catch (ActivityNotFoundException e) {

            }
        }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T13:33:50.440

希望这可以帮助您打开文档

```
public void openDOC(String name) {

        File file = new File(Environment.getExternalStorageDirectory() + "/"
                + bmodel.getUserMasterBO().getUserid() + "/" + name);
        if (file.exists()) {
            Uri path = Uri.fromFile(file);
            Intent intent = new Intent(Intent.ACTION_VIEW);
            intent.setDataAndType(path, "application/msword");
            intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

            try {
                startActivity(intent);
            } catch (ActivityNotFoundException e) {
                Toast.makeText(this, "No Application Available to View DOC",
                        Toast.LENGTH_SHORT).show();
            }
        }

    } 
```

# javascript - 在 Backbone.js 事件回调中这是什么，以及如何访问触发的元素？

> ID：10738449
> 
> 赞同：3
> 
> 时间：2012-05-24T13:27:42.410
> 
> 标签：javascript, backbone.js

我想知道为什么 this 或 $(this) 选择器在将函数附加到 Backbone js 中的事件时不起作用。看这个示例代码：

```
var testView = Backbone.View.extend({
    el: $('#test'),
    events: {
        'keyup #signup-fullname': 'validateFullname'
    },
    validateFullName: function(e){
        if($(this).val() == "mike"){
            alert('You are just amazing!');
        } else if($(this).val() == "tom"){
            alert("mmm.. you fail...")
        }
    }
}); 
```

它不起作用，只有在我这样做时才起作用：

```
var testView = Backbone.View.extend({
    el: $('#test'),
    events: {
        'keyup #signup-fullname': 'validateFullname'
    },
    validateFullName: function(e){
        if($('#signup-fullname').val() == "mike"){
            alert('You are just amazing!');
        } else if($('#signup-fullname').val() == "tom"){
            alert("mmm.. you fail...")
        }
    }
}); 
```

可以用 this 或 $(this) 来完成，这不是有点矫枉过正吗？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-24T13:29:31.647

在backbone.js 中，“this”绑定到视图对象。

如果您需要访问目标元素，您仍然可以通过 event.target 或 event.targetElement 进行。看看这个问题 [Backbone.js Event Binding](https://stackoverflow.com/questions/5270188/backbone-js-event-binding)

# xml - CDATA的解释？

> ID：10738453
> 
> 赞同：0
> 
> 时间：2012-05-24T13:28:12.160
> 
> 标签：xml, web-services, cdata

我注意到，如果我将解码的 XML 发送到端点，它会因错误的请求错误而失败，但如果我将请求包装在 CDATA 中或对字符进行编码，它运行良好，所以我的两个问题是：

为什么我需要使用 CDATA 或对字符进行编码？

Web 服务是什么让我不得不这样做？

在 CDATA 中包装消息和对字符进行编码有什么区别？

如果解析器忽略 CDATA，这是否意味着您尝试发送的消息不会被处理？

我的 web 服务有一个名为 Process 的 web 方法，但是尝试发送的消息是 MessageB，所以我需要将 MessageB 的内容包装在 CDATA 中，因为 XML Parser 不会理解它吗？

如果我的 web 服务包含一个名为 MessageB 的 web 方法，是否仍需要将其包装在 CDATA 中或转义？我的情况是我没有 Web 方法 MessageB，而是一个名为 Process 的东西，它通过 switch 语句侦听 MessageB 请求。我在想是因为我没有将 MessageB 定义为 web 方法，这就是为什么我必须将它包装在 CDATA 中或转义它的原因，但我相信我的想法是错误的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T13:30:06.597

`&`喜欢和`<`不允许*出现*在 XML 中的字符。

XML 标准要求它们要么使用 XML 实体进行转义，要么包装在`<![CDATA[`块中，这告诉 XML 解析器将整个块视为纯文本。

您应该使用一个 XML 库来为您解决这个问题；您永远不应该手动构建 XML。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T13:32:55.560

如果您不对数据进行包装或编码，它将成为主要 XML 文档的一部分。当 Web 服务尝试解析文档时，它会找到无法映射到预期内容的元素，并将其吐出。

这不是特定于 Web 服务的，而是适用于任何您想在 XML 文档中使用 XML 代码作为值的时候。

使用 CDATA 和编码字符之间几乎没有实际区别。这只是在 XML 文档的值中嵌入特殊字符的两种不同方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T13:33:15.943

某些字符在 XML 中具有特殊含义。例如，`<`表示“标签开始”和`&`“字符引用开始”。

CDATA 标记表示某些内容是纯文本而不是标记，因此`<`表示“小于号”和“与号`&`”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T15:50:39.380

如果您将消息发送`<a><b/></a>`给某人，则与 message 不同`<a><[CDATA[<b/>]]></a>`。两者都没有对错，但其中一个可能是接收者所期望的，而另一个则不是。由 XML 的使用者决定它理解什么样的消息。Web 服务本身并没有说任何东西都必须在 CDATA 中，只是这个特定的 Web 服务似乎是这样设计的。

# nhibernate - 嵌套嵌套属性上的休眠投影

> ID：10738456
> 
> 赞同：6
> 
> 时间：2012-05-24T13:28:20.687
> 
> 标签：nhibernate, nhibernate-criteria

我有域类位置

```
 public abstract class BaseEntity<T> where T: struct 
    {
    public virtual T Id { get; set; }
    public virtual bool Equals(BaseEntity<T> other)
    }

    public class Location : BaseEntity<Int32>
    {

    public  User User {get;set;}
    }

    public class User : BaseEntity<Int32>
    {
    public string Name {get;set;
    }

    public OtherInfo Otherinfo {get;set;};
     }
    public class OtherInfo
    {
    public  string preference {get;set;};
    }

    var criteria = session.CreateCriteria(typeof(Location), "alias");
    criteria.CreateCriteria("User", "user", JoinType.InnerJoin);
    criteria.CreateCriteria("user.Otherinfo", "userInfo",JoinType.InnerJoin); 
    criteria.Add(Restrictions.Eq("user.Id", 100));
    criteria.SetProjection(Projections.Alias(Projections.Id(), "Id"),                            Projections.Alias(Projections.Property("user.Name"), "Name"),  Projections.Alias(Projections.Property("userInfo.preference "), "pref")); 
```

现在当我执行上述标准时，它会在 userInfo.preference 上给出错误。{NHibernate.QueryException：无法解析属性：Otherinfo of：Location.User 这里有什么错误。是不是因为有多个嵌套对象

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T14:27:40.917

请改用 CreateAlias：

```
criteria.CreateAlias("User", "user", JoinType.InnerJoin);
criteria.CreateAlias("user.Otherinfo", "userInfo",JoinType.InnerJoin); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-23T14:26:55.327

这适用于寻找嵌套投影和 NHibernate Criteria 的嵌套连接的其他人：

```
public class A
{
    public B {get;set;}
    public string PropertyA {get;set;}
}
public class B
{
    public C {get;set;}
}    
public class C
{
    public string CName {get;set;}
}
//you want to project and join 3 tables querying from A and get CName of C
//  InstanceA.B.C.CName 
```

你不能使用“。” 点作为您的别名 + 您只能在别名中访问 1 级（aliasA.PropertyA）

```
//you have to create 3 alias for each class/instance/table
DetachedCriteria joinNested3tables = DetachedCriteria.For<A>("aliasA") //level 1 alias
            .CreateAlias("aliasA.B", "aliasB", JoinType.InnerJoin) //level 2 alias
            .CreateAlias("aliasB.C", "aliasC", JoinType.InnerJoin) //level 3 alias
          .SetProjection(Projections.ProjectionList()
            .Add(Projections.Property("aliasC.CName"), "CNameProjection")
            //you cannot have more than 1 dot operator like below
            //.Add(Projections.Property("aliasB.C.CName"), "CNameProjection")
            ); 
```

# c# - 如何在 C# 中通过 WIA 选择扫描仪光源

> ID：10738457
> 
> 赞同：0
> 
> 时间：2012-05-24T13:28:26.497
> 
> 标签：c#, scanning, wia

我正在编写一个 GUI 来控制和自动化扫描仪。但是，我似乎找不到在扫描仪中选择光源以使其扫描反射或透射的控件。这会是 item.property 索引吗？我试着浏览它们，但没有发现任何有用的东西。 [http://msdn.microsoft.com/en-us/library/windows/desktop/ms630202(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms630202(v=vs.85).aspx)

如果您知道解决方案，请告诉我。

# node.js - 如何使用 nowjs 防止客户端在卸载事件时断开连接？

> ID：10738465
> 
> 赞同：1
> 
> 时间：2012-05-24T13:29:11.730
> 
> 标签：node.js, socket.io, onbeforeunload, nowjs-sockets

我使用 node.js、nowjs 和 expressjs 服务器端和 javascript / jquery 客户端开发应用程序。

当客户端离开页面而之前没有保存文档时，我有一个触发客户端。

```
$(window).bind("beforeunload",function(e) {
    if (isFileModified) {
        return "File not saved.";
    }
}); 
```

我的问题是，当这个事件被调用时，nowjs在我的事件之前自动断开客户端。因此，如果客户端决定停留在当前页面上，则 now 对象将被卸载并且其方法是未知的。

我发现可以将 socket.io 选项“卸载时同步断开连接”设置为 false，但我不知道如何使用 nowjs 设置此选项客户端。显然这个选项在Firefox中不起作用......

在我的情况下，我有一个很好的解决方案来防止客户端断开连接吗？

非常感谢。

# ios - 未创建简单导航控制器

> ID：10738467
> 
> 赞同：0
> 
> 时间：2012-05-24T13:29:25.253
> 
> 标签：ios, ios5, ios4

创建了一个简单的基于导航控制器的应用程序。应用程序委托类具有窗口和导航控制器的 Outlets。

MainWindow.xib 有一个 Window 和一个导航控制器。文件所有者是 UIApplication，我有一个 Application Delegate（类当然是我的 App Delegate），带有一个到窗口和导航控制器的出口，以及一个连接到文件所有者的委托。

在 applicationDidFinishLaunching 我试图将窗口的 rootViewController 设置为 navigationController 但是 navigationController 的 Outlet 是 nil 并且（当然）应用程序出现了一个空白窗口......并且错误“应用程序窗口应该有一个根视图应用程序启动结束时的控制器”。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T13:32:59.357

导航控制器本身是否有根视图控制器？导航控制器不能单独存在。它是其他 ViewController 的包装视图。Interface Builder 中的视图控制器属性选项卡中应该有一个设置，可以让您将 xib 中的另一个视图控制器设置为其根，或者从不同的 xib 加载它。

# winforms - ClickOnce 版本未更新

> ID：10738473
> 
> 赞同：6
> 
> 时间：2012-05-24T13:29:48.680
> 
> 标签：winforms, installation, clickonce

我的 ClickOnce 应用程序当前版本为 2.0.0.12。我更新了应用程序，将已发布和程序集的版本号更改为 2.0.0.13。当我在客户端桌面上启动应用程序时，它会检查更新但不识别更新可用并正常运行。

我启动了提琴手并观察了请求和它撤回的清单仍然有 2.0.0.12 版本参考。

在服务器上，我一并删除了 2.0.0.12 版本，关闭了服务器上的缓存并从桌面上卸载了该应用程序。

当我启动安装程序时，它无法下载文件，因为它找不到 2.0.0.12 版本文件夹。我更新了服务器上的 Application.htm、Setup.exe 和 .application 文件，它们反映了正确的 2.0.0.13 版本。

我的问题是：ClickOnce 应用程序到底从哪里获得对先前版本的引用？

这是错误日志：

平台版本信息 Windows：6.1.7601.65536 (Win32NT) 公共语言运行时：4.0.30319.17020 System.Deployment.dll：4.0.30319.17020 构建者：FXM3REL clr.dll：4.0.30319.17020 构建者：FXM3REL 319.dll：FXM3REL dfdll.17作者：FXM3REL dfshim.dll：4.0.31106.0（Main.031106-0000）

来源 部署网址：{URL_REMOVED}\AlphaManager.application 服务器：Microsoft-IIS/7.0 X-Powered-By：ASP.NET 部署提供程序网址：{URL_REMOVED}/install/AlphaManager.application 应用程序网址：{URL_REMOVED}/install/Application %20Files/AlphaManager_2_0_0_12/AlphaManager.exe.manifest 服务器：Microsoft-IIS/7.0 X-Powered-By：ASP.NET

身份部署身份：AlphaManager.application，版本=2.0.0.12，文化=中性，PublicKeyToken=4bf6f9c465057aee，处理器架构=x86 应用程序身份：AlphaManager.exe，版本=2.0.0.12，文化=中性，PublicKeyToken=4bf6f9c465057aee，处理器架构=x86，类型=win32

应用程序摘要 * 可安装的应用程序。

错误摘要 下面是错误摘要，这些错误的详细信息在日志后面列出。* {URL_REMOVED}/install/AlphaManager.application 的激活导致异常。检测到以下失败消息： + 下载 {URL_REMOVED}/install/Application Files/AlphaManager_2_0_0_12/Microsoft.mshtml.dll.deploy 未成功。+ 远程服务器返回错误：（404）未找到。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-27T19:02:07.973

在您的项目属性下，单击更新按钮...。

![在此处输入图像描述](../Images/8dfdf9394bde6448471cf923cf9b1bed.png)

然后确保您设置了正确的最低要求版本。此编号不会像您的其他发布版本号一样自动更新：

![在此处输入图像描述](../Images/8599c770379b29e2ed40ad37c7cc68b3.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-08-14T13:54:27.580

原因是互联网上的设置文件被缓存。

要解决此问题，您可以在 Internet 上的安装文件夹中创建 .htaccess 文件

编辑文件并添加此示例并更改 index.html 和 .application 文件的文件名

```
 >  FileETag None Header unset ETag Header set
> Cache-Control "max-age=0, no-cache, no-store, must-revalidate" Header
> set Pragma "no-cache" Header set Expires "Wed, 11 Jan 1984 05:00:00
> GMT"   FileETag None Header unset ETag
> Header set Cache-Control "max-age=0, no-cache, no-store,
> must-revalidate" Header set Pragma "no-cache" Header set Expires "Wed,
> 11 Jan 1984 05:00:00 GMT" 

```

[在此处输入图像描述](https://i.stack.imgur.com/jSrHJ.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T05:18:51.537

在我看来，ClickOnce 没有意识到它安装了应用程序的 v12，或者它只是部分安装了它，或者（更有可能）您将发布属性设置为仅在线。确保将其设置为在线/离线。

如果这仍然不能解决您的问题，请卸载该应用程序并重新安装它，然后尝试发布 v14 并查看它是否可以使用。

确保您没有设置 updateURL（假设您希望它从用于安装的同一 URL 中获取更新，这通常是这种情况）。

我不相信使它成为必需的更新会解决您的问题。听起来它没有访问正确的清单。我还要确保它在您的部署目录的顶部文件夹中查找部署清单（.application 文件），而不是在版本化文件夹（应用程序文件/yourapp_1_1_1_12/yourapp.application）下的那个。您是直接从 VS 发布，还是以另一种方式手动/以编程方式创建清单？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-18T15:48:14.220

我的互联网缓存有问题，它使用的是代理缓存（公司局域网）中的 .application，它没有下载新内容......

当我打开最低版本时，停止工作......

所以我问IT他们是否可以帮助我，他们做到了......之后没有更多问题......

# ios - iOS 触摸报告频率

> ID：10738477
> 
> 赞同：1
> 
> 时间：2012-05-24T13:29:59.183
> 
> 标签：ios

我有一个自定义 UISlider 子类，旨在限制滑块可以移动的速率。理想情况下，我希望这种限制以口头上合理的方式进行，例如“每秒 5 个单位”。现在我能做的最好的事情就是限制滑块的值可以在每次更新的基础上改变的量。从理论上讲，我可以跟踪自上次触发更新以来的时间，但是如果用户在短时间内没有移动他/她的手指，那么该计算就会消失。

简而言之：有没有一种方法可以获得设备的触摸事件频率，以便在一个设备或另一个设备上的触摸事件较慢的情况下，相对于实时的变化率保持不变？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T13:42:44.773

你为什么不监控触摸的开始和结束，看看触摸何时开始？

然后在触摸结束之前，查看触摸事件的 X 轴变化量，并根据移动相应地移动滑块？

您需要的是使用这 3 个委托方法：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event 
```

你可以有一个布尔值来标记触摸的开始/结束，然后如果布尔值为真，你可以使用 touchesMoved 委托来移动滑块。

# algorithm - 如何使用 A* 算法找到所有最短路径？

> ID：10738478
> 
> 赞同：3
> 
> 时间：2012-05-24T13:30:02.090
> 
> 标签：algorithm, shortest-path, a-star

我知道 A* 算法可以找到最短路径。但我工作中的问题是我需要找到所有最短路径。更准确地说，可能存在多条最短路径，但我需要选择顺时针优先级**的**最短路径。

如果我能得到所有最短路径，我就能得到我想要的（顺时针优先）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-24T14:05:34.490

**A***算法的特点是它是*完整*的和*最优*的。这意味着如果存在路径，它将找到解决方案的路径，而且保证首先找到最短路径。

这是因为 A* 使用的启发式函数必须是[可接受的启发式；也就是说，它不能高估到目标的距离。](http://en.wikipedia.org/wiki/A%2a_search_algorithm)

这反过来确保*一旦*您找到解决方案的路径，您就会*知道*在搜索空间的其余部分中没有比该路径更短的路径。

假设到您的第一个解决方案的距离是*d(problem)*。现在，我的最后一句话实际上意味着，如果您在找到第一个解决方案*d(problem)*之后继续前进，并找到另一个解决方案*d2(problem)*，则有两种可能性：

*   *d2(problem)* = *d(problem)*：你想保留那个，因为你想要*所有*的最佳路径。此外，所有新路径都可以等于或大于*d2* = *d*
*   *d2(problem)* > *d(problem)*：现在，我上面写的同样的事情是有效的：没有比*d2**短*的路径了。而且，*d2*已经比您正在寻找的解决方案更长。因此，您可以丢弃*d2*并完成搜索
****   **请注意**，**没有第三个选项**，*d2(problem)*永远不会比您已经找到的最佳*d(problem)*短，因为这是算法的基本属性之一。***

 ***所以，总结一下：在找到第一个*最优解之后，你就继续前进，并且接受所有距离相同的解。第一条距离更远（更长）的路径，您丢弃并停止搜索。

* * *

我刚刚看到问题的“顺时针”部分。您可以通过以某种方式将*顺时针*插入到您的启发式或成本函数中来避免搜索*所有*最佳解决方案。例如，我有时使用的一个技巧是：你的成本是一个整数，从 0 到*inf*。然后，添加顺时针分量，它可以具有区间*[0, 1)中的**实*数值。这样，无论以前是否正确，它都会保持不变，但如果顺时针分量不同，则关系可能会改变。****`a > b``a == b`****

 ***如果您不明确希望使用数值，则可以比较的另一种方法是将成本设为一*对*值。如果该对的第一个组件在两个路径成本中不同，您只需比较它们。如果第一个组件相同，则仅比较成对中的第二个值。

也就是说，在我脑海中，我不确定我是否会建议您修改成本或启发式函数（或两者）。另外，我不确定这个精确的技巧是否能解决你的问题，但我相信你应该能够通过修改这些函数之一来将算法推向最顺时针的解决方案，如果你只是玩一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-30T16:41:51.000

澄清@penelope 的意思：“......在找到第一个最佳解决方案后继续*......* ”

**要从 A* 获得一组等效成本最优路径**：

一旦 A* 找到最短路径（成本 = C*），您可以通过继续从 OPEN 列表中弹出解决方案来获得其他等长路径，直到遇到成本超过 C* 的解决方案。（有一个警告，如果您的启发式方法不完美，您可能需要做一些额外的工作。）请注意，这将为您提供一组最佳路径，但不一定是*所有*最佳路径的集合 - 这取决于您如何'已经设置了重复检测。

**要从 A* 获得顺时针路径：**

至于更喜欢顺时针路径，请考虑在比较方法中使用平局来对 OPEN 列表进行排序。如果两个候选人具有相同的 f 成本，则选择最顺时针方向的候选人。（我认为你可以通过查看你的候选人相对于​​开始/目标节点来获得顺时针的概念。）如果你以这种方式打破平局，顺时针解决方案将被推到 OPEN 列表的前面，你会从 A* 中得到最顺时针的解。

* * *

## 回答 #3

> 赞同：-6
> 
> 时间：2012-05-24T13:38:54.770

Dijkstra 的算法为您提供所有最短路径。A* 是作为改进的 Dijkstra 制作的，带有额外的约束。改进是您不需要访问所有节点。如果你想探索所有节点（这是确保你检查了所有最短路径所必需的），那么使用 A* 没有意义，只需坚持通用祖先*****

# css - css 媒体查询来处理新的高分辨率手机，同时忽略平板电脑

> ID：10738479
> 
> 赞同：4
> 
> 时间：2012-05-24T13:30:04.657
> 
> 标签：css, mobile, media-queries

根据我的研究；新的智能手机人像分辨率高达 800px
平板电脑最低人像分辨率 600px

现在我正在尝试使用媒体查询将移动 css 渲染到支持高达 800px 分辨率的手持设备，但我遇到的问题是像 ipad1 这样具有 768px 纵向分辨率的旧平板电脑也在渲染移动 css。

我需要确保 600px 及更高的平板电脑 + 台式机渲染宽屏 css，而最大纵向分辨率为 800px 的手机渲染移动 css。

尽管移动和平板电脑的宽度交叉，我怎么能做到这一点？

这是我目前的设置...

```
<meta name="viewport" content="initial-scale=1.0,maximum-scale=1.0,
user-scalable=0,width=device-width" />
<link rel="stylesheet" media="screen and (max-device-width: 800px)" 
href="/css/mobile.css" />
<link rel="stylesheet" media="screen and (min-device-width: 600px)"
href="/css/widescreen.css" /> 
```

提前感谢奥马尔。

更新：

以下 2 合 1 媒体查询似乎符合我的目的。我已经在 samsung Galaxy s2、google nexus 和 iphone4 上进行了测试，它似乎工作正常。需要验证平板电脑。

```
<link rel="stylesheet" type="text/css" media='only screen and (max-width:480px) and    
(orientation: portrait), only screen and (max-width:800px) and (orientation:  
landscape)' href="mobile.css" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T20:20:55.760

我认为您尝试基于媒体查询的哲学从一开始就存在缺陷：正如 Ethan（该技术的“发明者”）经常引用的那样，断点不应该来自屏幕/设备尺寸，而是来自内容如何适合自然到页面。开始使用排版和颜色的基本样式构建移动优先，然后随着屏幕的增长，使用 min-width:500px （例如）添加一些布局/列，并继续直到你认为你利用了可用空间桌面宽 22 英寸分辨率，如 1900 像素及以上。我为我的博客 ( [http://www.gplus.gr/blog](http://www.gplus.gr/blog) ) 这样做了 - 仅在桌面中使用 Chrome 开发，当在其他设备上查看网站时，它就像一个魅力：Android 2.x，Android 4 .x、Kindle、iPad 等。

[http://coding.smashingmagazine.com/2012/03/22/device-agnostic-approach-to-responsive-web-design/](http://coding.smashingmagazine.com/2012/03/22/device-agnostic-approach-to-responsive-web-design/)

# ruby-on-rails - 在应用程序之间共享 memcached 服务器中的数据

> ID：10738484
> 
> 赞同：0
> 
> 时间：2012-05-24T13:30:26.907
> 
> 标签：ruby-on-rails, memcached, sinatra, data-sharing

我正在尝试在 Rails 应用程序和 Sinatra 应用程序之间共享一些数据。这些数据由 Rails 应用程序生成并存储到 memcached 中。然后，Sinatra 应用程序应该能够进入 memcached 服务器并在用户请求时获取数据。

我的问题是，在 Sinatra 端出现的数据通常是一串略微乱码的几乎对象，例如：

在：{“数据”=>“数据”}

输出：“我”{“数据”“数据”}：EG”

如果我在 Rails 中存储和检索数据，没有问题。如果在 Sinatra 中存储和检索数据，则没有问题。我尝试存储和检索哈希、ActiveRecord 对象、数组、YAML 序列化对象、Marshal 序列化对象。这两个应用程序之间没有任何作用。

我在两个应用程序上都使用了默认的 gem memcache。因为，这个 gem 使用 Marshal 序列化所有插入到 memcached 服务器的数据，我认为它可能以某种方式相关。

我不知道我还能提供什么有用的东西，如果您需要查看其他内容，请询问。任何建议都将不胜感激，包括解决方案、帮助调试问题或相关的 memcached 经验。谢谢。

# c - 用 antlr 解析评论

> ID：10738487
> 
> 赞同：1
> 
> 时间：2012-05-24T13:30:38.597
> 
> 标签：c, parsing, comments, antlr

我正在使用 ANTLR 来解析自定义数据定义语言。我使用 C 作为语言，我正在输出一个抽象语法树。到目前为止一切顺利，但现在我需要添加文档并且我需要允许以下形式的块：

```
DOC
Free text here
ENDDOC 
```

我尝试添加一条规则：

```
docstm  :   'DOC' ContentDoc=(.*) 'ENDDOC' -> ^(T_DOCCLASS $ContentDoc); 
```

其中`T_DOCCLASS`是节中定义的虚构标记`tokens {...}`。不幸的是，虽然块的解析`DOC ... ENDDOC`没有失败，但树只有`T_DOCCLASS`没有任何子节点。

其他附加信息：我正在使用 ANTLR 3.2 和以下前奏：

```
options {   
output   = AST;
language = C;
ASTLabelType = pANTLR3_BASE_TREE;
} 
```

而且我还有另一个跳过空格的规则：

```
WS  :   ( ' '
    | '\t'
    | '\r'
    | '\n'
    ) {$channel=HIDDEN;}
; 
```

提前感谢您可以给我的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T15:29:42.387

而不是`.*`（零个或多个标记，在解析器规则中！），这样做更安全`(~ENDDOC)*`（零个或多个标记，除了`ENDDOC`）：

```
docstm      : DOC innerDocstm ENDDOC -> ^(T_DOCCLASS innerDocstm); 
innerDocstm : (~ENDDOC)*;
DOC         : 'DOC';
ENDDOC      : 'ENDDOC';
ID          : ('a'..'z' | 'A'..'Z')+;
WS          : (' ' | '\t' | '\r' | '\n') {$channel=HIDDEN;}; 
```

导致：

![在此处输入图像描述](../Images/82fc24f737340bc18bd8fc2e96d41cb0.png)

如您所见，`T_DOCCLASS`AST 内没有空格。如果要保留空格，则需要将规则放入词法分析器中：

```
DOCSTM : 'DOC' .* 'ENDDOC'; 
```

*（你必须`.*`现在使用）*

# css - 背景图像的 src 是否与其来自 css 的路径或正在使用的文件相关？

> ID：10738490
> 
> 赞同：0
> 
> 时间：2012-05-24T13:30:40.480
> 
> 标签：css, path, background, image, src

当您使用背景图像并设置 src 时，您是否将 css 文件中的 src 设置为背景图像实际处于活动状态的文件的路径或源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T13:37:32.197

HTML 中的`src`属性与呈现的文档相关。如果你有一个文件`/index.html`并且你想要包含的 img 是 at `/img/1.png`，那么属性将读取`src="img/1.png"`.

同样，CSS 中的`url`属性是相对于 CSS 文档而言的。如果您的 CSS 文件位于`/css/styles.css`属性中，则为`background:url('../img/1.png')`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T13:32:53.850

css文件的路径是你应该使用的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T13:37:41.127

CSS 文件中的链接总是相对于该 CSS 文件的位置。这是可取的，因为 CSS 可以从任何子目录甚至从不同的服务器链接。

# stringtemplate - StringTemplate：生成 Javascript 数组时跳过尾随逗号

> ID：10738500
> 
> 赞同：2
> 
> 时间：2012-05-24T13:31:10.150
> 
> 标签：stringtemplate, stringtemplate-4

我在 StringTemplate 4 中生成了一个 Javascript 数组，并且在最后一个元素之后跳过尾随逗号时遇到了问题。每个项目都是使用模板生成的，然后我想使用逗号将它们分开以创建一个数组，格式如下：

```
[ item1, item2, item3, item4 ] 
```

目前，我最好的生成这个数组的方法是：

```
array(elems) ::= <<
  [ 
    $first(elems):elem_noComa()$
    $rest(elems):elem()$
  ]
>>

elem_noComa(el) ::= <<  { ...element generation... } >>

elem(el) ::= <<
  , $elem_noComa(el)$
>> 
```

有没有办法让它更容易/更短？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T16:06:17.430

这对你有用吗？

```
<elems:itemTemplate(); separator=","> 
```

它将 itemTemplate() 应用于 elems 数组的每个元素，并在两者之间使用“，”。特伦斯

# c# - 在升级之间保留应用程序设置的最佳方式？

> ID：10738501
> 
> 赞同：1
> 
> 时间：2012-05-24T13:31:19.833
> 
> 标签：c#

我们的产品有几个用户定义的设置，迄今为止，这些设置已经使用项目的设置变量进行存储，例如

```
public string MySetting {
  get { return Settings.Default.MySetting; }
  set { 
    Settings.Default.MySetting = value;
    Settings.Default.Save();
  }
} 
```

这很好用 - 但它有一个不幸的特点，如果您卸载应用程序并重新安装较新版本（不存在直接升级路径 - 不要问），所有设置都会丢失。

我可以想出几种方法来实现这一点，但它们对我来说似乎都有点笨拙。您认为在卸载和重新安装之间保留用户定义的应用程序设置的最佳方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T13:45:12.217

在 Windows 上，我能想到有两种方法可以实现这一点。第一个是在用户的 AppData 文件夹中简单地存储一个 XML/INI/JSON/whatever 文件。这会将文件放在应用程序的路径之外，这意味着您可以轻松地再次获取它。您可以像这样找到 AppData 文件夹：

```
Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData) 
```

另一个适合此类数据的地方是注册表。.NET 框架对此有很好的支持。[MSDN](http://msdn.microsoft.com/en-us/library/2kzb96fk.aspx)和[其他地方](http://coders-project.blogspot.com/2008/06/writing-registry-keys.html)有很多文档可以帮助您入门。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T13:51:08.797

我知道对于 ClickOnce 应用程序，一个简洁的功能是使用用户设置来指示`true`默认情况下是否需要更新。然后，例如在 中`Program.cs`，您可以这样：

```
if (Properties.Settings.Default.SettingsUpgradeRequired)
{
    Properties.Settings.Default.Upgrade();
    Properties.Settings.SettingsUpgradeRequired = false;
    Properties.Settings.Default.Save();
} 
```

即使您不使用 ClickOnce 作为部署方法，这是否适用于您的情况？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T13:52:56.920

您可以向 UnInstall 添加自定义操作，询问用户是否要保留用户设置或删除所有数据。

如果用户决定保留设置，您可以在保留所有参数的安装路径中保留一个设置文件，并向安装添加自定义操作，将安装时的设置替换为旧文件的设置。

您还可以将值添加到注册表中，并在安装中检查它们。

# c# - 如果导航属性不存在则插入导航属性，如果它确实存在则使用它而没有键

> ID：10738502
> 
> 赞同：1
> 
> 时间：2012-05-24T13:31:22.243
> 
> 标签：c#, .net, performance, entity-framework, navigation-properties

我有 2 张桌子：

```
Person table - 
       PersonID
       Name (unique index).
Orders table - 
       OrderID
       Price
       Item
       PersonID (FK) 
```

我想对订单表进行插入（使用 EF），它将插入一个订单列表（所有订单都是同一个人，我只知道人名），如果人员表中不存在该人，我希望他将被插入其中，并且他确实存在，订单将填充正确的人。我不想先查询这个人是否在 person 表中，因为它是一个多余的调用。是否有可能仅在保存更改期间添加它并事先查询服务器？类似的东西：

```
Person thePerson = new Person {Name = "knownName"};
foreach (var order in orders)
{
   context.Orders.AddObject(new Order
   {
      Price = order.Price,
      Item = order.ItemName,
      Person = thePerson
   });
}
context.SaveChanges(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T13:48:53.603

如果您使用 PersonID 属性，EF 会执行您想要的操作，而不是创建具有 Name 属性的 Person 对象。但是这种行为仅限于主键，所以我认为不可能使用 Name 来实现这一点。

```
Person thePerson = new Person {PersonID = Id}; // Id is either previously fetched or a newly created one
foreach (var order in orders)
{
   context.Orders.AddObject(new Order
   {
      Price = order.Price,
      Item = order.ItemName,
      Person = thePerson
   });
}
context.SaveChanges(); 
```

# macos - Mac OS X 'compress' 选项与命令行 zip（为什么它们会产生不同的结果？）

> ID：10738505
> 
> 赞同：14
> 
> 时间：2012-05-24T13:31:42.620
> 
> 标签：macos, compression, zip, finder

我注意到命令行 'zip' 工具和 Mac OS X 的 'Compress XXX' 选项（可通过在查找器中右键单击获得）提供不同的输出文件。文件的大小不仅大了几百字节，而且内容也大不相同。

如何找出 Finder 用于压缩的命令？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-24T16:24:04.107

答案在`man ditto`：

```
 The command:
       ditto -c -k --sequesterRsrc --keepParent src_directory archive.zip
 will create a PKZip archive similarly to the Finder's Compress function-
 ality. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T06:44:39.657

查看[An AppleScript 以压缩 Finder 选择](http://hints.macworld.com/article.php?story=2011030403522197)文章。

```
try
    tell application "Finder"
        set theSelection to the selection
        set selectionCount to count of theSelection
        if selectionCount is greater than 1 then
            error "Please select only one Finder item before running this script."
        else if selectionCount is less than 1 then
            error "Please select one Finder item before running this script."
        else
            set theItem to (item 1 of theSelection) as alias
            set destFolder to (container of theItem) as alias
            set itemName to name of theItem
        end if
    end tell

    do shell script ("ditto -c -k --sequesterRsrc --keepParent " & quoted form of POSIX path of theItem & space & quoted form of (POSIX path of destFolder & itemName & ".zip"))
on error theError
    tell me
        activate
        display dialog "Error: " & theError buttons {"OK"} default button 1 with icon stop
    end tell
end try 
```

# c# - 更改列表的值 物品

> ID：10738506
> 
> 赞同：4
> 
> 时间：2012-05-24T13:31:44.243
> 
> 标签：c#, list

我正在（学校）申请绘制曲线。我通过鼠标单击设置点并将它们的位置添加到顶点列表中。现在我正在使用鼠标向下和鼠标向上的动作来移动点。在鼠标按下时，我发现鼠标的位置是否在顶点列表中任何顶点周围的小正方形（4x4 px）中，然后在鼠标向上时，我想将顶点的坐标更改为我抬起鼠标按钮的坐标。但是我遇到了问题，`List`因为 Visual Studio 说无法更改列表项，因为它不是变量。我该如何解决这个问题？

```
List<Point> vertices = new List<Point>(); //list of vertices
void canvas_MouseUp(object sender, MouseEventArgs e) {
    if (!move) return; //if moving is off returns
    vertices[indexOfMoved].X = e.X; //change X position to new position
    vertices[indexOfMoved].Y = e.Y; //change Y position to new position
    indexOfMovedLabel.Text = "Moved: ?";
} 
```

**问题：**

> 错误 1 ​​无法修改 'System.Collections.Generic.List.this[int]' 的返回值，因为它不是变量

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T13:36:18.273

这是因为它`Point`是一个结构体而不是一个对象。您可以将结构视为分组值。

因此，当您访问 vertices[indexOfMoved] 时，您会得到列表中内容的副本，而不是实际的“对象”。

你可以这样做：

```
vertices[indexOfMoved] = new Point { X = e.X, Y = e.Y }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T13:39:59.577

你不能改变这个值，因为 Point 是一个结构。在给出很多细节之前；您需要将功能更改为以下内容：

```
private void canvas_MouseUp(object sender, MouseEventArgs e)
{
    if (!move) return; //if moving is off returns
    Point p = vertices[indexOfMoved];
    p.X = e.X;
    p.Y = e.Y;
    vertices[indexOfMoved] = p;            
    indexOfMovedLabel.Text = "Moved: ?";
} 
```

发生这种情况是因为您使用的是结构。如果编译器没有给出任何警告，则将在堆栈中创建一个新结构，并对堆栈中的结构进行更改；这对列表中的结构没有影响。编译器会发出警告以防止这种情况发生。

# static - F#：如何指定要使用的静态重载？

> ID：10738507
> 
> 赞同：3
> 
> 时间：2012-05-24T13:31:45.627
> 
> 标签：static, f#, overloading

我在 C# 代码中声明了两个类：

```
public class A
{
     public static bool TryParse(string value, out A result)
     {
         ...
     }
}

public class B : A
{
     public static bool TryParse(string value, out B result)
     {
         ...
     }
} 
```

虽然从 C# 调用`B.TryParse`没有问题，因为正确的重载是由 out 参数类型决定的，应该提前声明。由于 out 参数是 F# 中结果的一部分的转换，我们得到了两个具有相同参数签名的函数......并且从 F# 调用会导致`A unique overload for method 'TryParse' could not be determined based on type information prior to this program point. A type annotation may be needed.`错误。我理解这个问题，甚至会声明`TryParse`为`new`......如果它不是静态的。

消息本身并不是很有帮助：绝对不清楚要添加哪种注释以及在哪里添加。

我该怎么打这个电话？最愚蠢的想法是重命名函数之一，但可能有更聪明的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T13:55:00.073

您需要为传递给 try 方法的变量添加类型注释，在本例中是 out 变量，因为这是发生变化的东西。我认为这样的事情应该有效：

```
let res, (b:B) = B.TryParse "MyString" 
```

在 F# 中，类型注释位于标识符之后，并以冒号 (:) 开头。

（注意：在 F# 中，输出参数可以从结果中恢复为元组）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T14:01:06.717

有几种方法可以解决这个问题：

*   添加显式类型注释（如 Robert 建议的那样）。
*   使用保存从 out 参数返回的值的变量作为稍后函数调用的参数，其中函数的参数“已知”为“B”类型；如果函数的参数显式声明为类型“B”（通过添加显式类型注释），这通常效果最好。
*   Create a inline helper function which uses statically-resolved generics to invoke the TryParse method of whatever object it's passed.

# c# - 每4个循环后添加div

> ID：10738508
> 
> 赞同：1
> 
> 时间：2012-05-24T13:31:45.437
> 
> 标签：c#, loops, foreach

我需要在每 5 张图片之后添加一个 div 标签，因此 html 标记应该是这样的：

```
<div>
      <img src="http://farm1.static.flickr.com/143/321464099_a7cfcb95cf_t.jpg" />
      <img src="http://farm4.static.flickr.com/3089/2796719087_c3ee89a730_t.jpg" />
      <img src="http://farm1.static.flickr.com/79/244441862_08ec9b6b49_t.jpg" />
      <img src="http://farm1.static.flickr.com/28/66523124_b468cf4978_t.jpg" />

</div>
<div>

      <img src="http://farm1.static.flickr.com/163/399223609_db47d35b7c_t.jpg" />
      <img src="http://farm1.static.flickr.com/135/321464104_c010dbf34c_t.jpg" />
      <img src="http://farm1.static.flickr.com/40/117346184_9760f3aabc_t.jpg" />
      <img src="http://farm1.static.flickr.com/153/399232237_6928a527c1_t.jpg" />
    </div>
<div>

      <img src="http://farm4.static.flickr.com/3629/3323896446_3b87a8bf75_t.jpg" />
      <img src="http://farm4.static.flickr.com/3023/3323897466_e61624f6de_t.jpg" />
      <img src="http://farm4.static.flickr.com/3650/3323058611_d35c894fab_t.jpg" />
      <img src="http://farm4.static.flickr.com/3635/3323893254_3183671257_t.jpg" />
    </div> 
```

我必须使用 foreach 循环，这就是要求，除此之外我可以使用任何控制语句，任何人都可以为这个逻辑提供任何帮助，我尝试过这样的事情但没有成功，最大图像为 100，这就是我初始化的原因整数到 100

```
 foreach (var page in images)
 {
    int b = 100 ;
    for (int a = 0 ; a = b ; a++)
    {
        <div><img src="page.name" alt="page.alt" /> </div>
    }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T13:37:11.447

您可以计算行数，并`<div>`在计数可被四整除时添加：

```
var count = 0;
foreach (var row in myData) {
    // Open before rows 0, 4, 8, 12, 16, and so on
    if (count%4 == 0) {
        // Add <div>
    }
    // Write the line
    // Close after rows 3, 7, 11, 15, and so on
    if (count%4 == 3) {
        // Add </div>
    }
}
// Don't forget the closing row in case the number of images
// is not divisible by four
if (count%4 != 3) {
    // Add </div>
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T13:37:50.123

这些方面的东西应该让你朝着正确的方向前进

```
foreach (var page in images)
 {
    int b = 100 ;
    bool first=true;
    bool wroteDivEnd = false;
    for (int a = 0 ; a = b ; a++)
    {
        wroteDivEnd=false;
        if (a% 4==0)
        {
           if (!first)
           { 
              // as long as this is not the first time we have written a 
              //start div, then we need to write and end one
              //write previous div end </div>
              wroteDivEnd=true;
           }
           //write new div start <div>
           //set the flag so we know we have written the first start div
           first=false;
        }
        // write out the images
        <img src="page.name" alt="page.alt" /> 

    }
    //make sure your last </div> is written
    if(!wroteDivEnd)
    { 
     //write out the final missing </div>
    }
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T13:40:29.800

试试这个：

```
var imagesInDiv = 4;
var maxItems = 100;
for (var i = 0; i < images.Length && i < maxItems; ++i)
{
    if (i % imagesInDiv == 0)
    {
        <div>
    }

    <img src="@images[i].name" alt="@images[i].alt" />

    // if this is the last image in a set OR last image that you have OR last image allowed
    if (i % imagesInDiv == imagesInDiv - 1 || i == images.Length - 1 || i == maxItems - 1)
    {
        </div>
    }
} 
```

编辑1：我添加了一些评论

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T13:45:31.293

```
string finalstring = "";
foreach (var page in images)
{
   for (int a = 0 ; a < 100 ; a++)
   {
      if (a % 4 != 0)
         str += <img src="page.name" alt="page.alt" />;  
      else
      {
         str = "<div>" + str + "</div>";
         finalstring += str;  
         str = "";
      }
   }
} 
```

# java - SharedPreferences 的问题

> ID：10738510
> 
> 赞同：0
> 
> 时间：2012-05-24T13:31:50.780
> 
> 标签：java, android

我想通过sharepreferance将字符串存储在内存中，但是有一些问题无法存储在内存中，请告诉我如何解决这个问题？需要任何许可吗？

**代码：：**

```
SavePreferences("MEM1", LanguageSelcted); 
LoadPreferences(); 
```

**方法：：**

```
public void SavePreferences(String key, String value) {
            try {
                SharedPreferences sharedPreferences = getPreferences(MODE_PRIVATE);
                SharedPreferences.Editor editor = sharedPreferences.edit();
                editor.putString(key, value.trim());
                editor.commit();
            } catch (Exception e) {

            e.printStackTrace();

            }

private void LoadPreferences() {
        try {
            SharedPreferences sharedPreferences = getPreferences(MODE_PRIVATE);
            LanguageSelection = sharedPreferences.getString("MEM1", "");
            Log.i(TAG, "LanguageSelection is :>>>" + LanguageSelection);
            Toast.makeText(getBaseContext(), "LanguageSelection is :>>>" + LanguageSelection, Toast.LENGTH_LONG).show();
            /*
             * textSavedMem1.setText(strSavedMem1);
             * textSavedMem2.setText(strSavedMem2);
             */
        } catch (Exception e) {
            e.printStackTrace();
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T13:39:18.927

保存应该是

```
SharedPreferences myPrefs1 = this.getSharedPreferences(
                                "update", MODE_PRIVATE);
                        SharedPreferences.Editor prefsEditor = myPrefs1.edit();
                        prefsEditor.putString("URL", apkurl);
                        prefsEditor.commit(); 
```

得到应该是

```
SharedPreferences pref = this.getSharedPreferences("update",
                MODE_PRIVATE);
        String key = pref.getString("URL", ""); 
```

getSharedPreferences 将采用两个参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T13:35:05.443

突出的一件事是这一行：

```
LanguageSelection = sharedPreferences.getString("MEM1", ""); 
```

应该有参考...

```
LanguageSelection whateverNameYouWant = sharedPreferences.getString("MEM1", ""); 
```

或者你的意思是……

```
String LanguageSelection = sharedPreferences.getString("MEM1", ""); 
```

# c# - 如何使用对象数据源编辑/保存 GridView 中的更改？

> ID：10738516
> 
> 赞同：0
> 
> 时间：2012-05-24T13:32:19.927
> 
> 标签：c#, asp.net

我有自己的对象类，用作gridview 的数据源。我将列绑定到显示完美的类属性。但是它不会在编辑时保存。我想知道如何从 Gridview 保存更改？具体来说，无论如何要在我的类属性中调用 SET 方法吗？这是一些代码片段：

注意：我直接使用我的对象作为数据源，而不是通过 ObjectDataSource 接口。所以我不能使用updateMethod。

捆绑：

```
 <asp:TextBox ID="txb_customerName" runat="server" Text='<%# Bind("customerName") %>' /> 
```

对象属性：

```
 public string customerName
    {
        get
        {
            if (!_loaded) { load(); }
            return _customerName;
        }
        set { _customerName = value; }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T13:45:15.750

尝试设置对象数据源的 updatemethod 属性（参见链接）。更新方法是您用来更新/保存类中记录的方法的名称。

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.objectdatasource.updatemethod.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.objectdatasource.updatemethod.aspx)

# c++ - .txt 文件到类对象的向量

> ID：10738519
> 
> 赞同：1
> 
> 时间：2012-05-24T13:32:34.690
> 
> 标签：c++, oop, file-io

我有以下课程，我希望从文本文件构建`Repository`初始向量。`students`对象是类型的`{string, int, int}`，我正在考虑使用换行符作为对象之间的分隔符。是否可以从文件构造/初始化私有向量？

这是我`Repository`班级的标题：

```
class StudentRepository{
private:
    vector <Student> students;
public:
    vector <Student> getAll();

    ~StudentRepository();
}; 
```

PS：欢迎对我的问题或有用教程的链接提出任何建议。

编辑：
这是我得到的，但我在加载对象时遇到问题，因为它们看起来像这样，如何将字符串与整数分隔？：

```
Foo bar 100 23
Bar Foo 101 42 
```

代码：

```
void StudentRepository::loadStudents(){
ifstream fl;
fl.open("studs.txt");
Student A();
if(fl.is_open()){
    while(!(fl.eof())){
        getline(A.);/// i connot manage to delimite parts of the line.
    }
}
else{
    cout<<"~~~ File couldn't be open! ~~~"<<endl;
}
}

void StudentRepository::saveStudents(){
    ofstream fl;
    fl.open("studs.txt");
    if(fl.is_open()){
        for(int i=0; i<students.size(); i++){
            fl<<students[i];
        }
    }
    else{
        cout<<"~~~ File couldn't be open! ~~~"<<endl;
    }
} 
```

# php - 从数据库生成动态复选框时遇到困难

> ID：10738523
> 
> 赞同：0
> 
> 时间：2012-05-24T13:32:40.037
> 
> 标签：php, mysql, codeigniter, datamapper, codeigniter-datamapper

我正在使用 Codeigniter 和 Datamapper 进行数据库查询。我的控制器如下

```
function fetch_interested_in()
{
    $in = new Interested_in();      
    $in -> get();
    $interested_in = array();
    foreach($in -> all as $data)
    {
        $interested_in[$data -> in_id] = $data -> in_title;
    }
    return $interested_in;
} 
```

我的视图文件如下

```
 <?php foreach($interested_in as $in)

                        echo form_checkbox('in_in[]', $in -> in_id); 

    ?> 
```

我的表中有 3 行名为 Interested_in。有 2 列，名称是 in_id 和 in_title。当我运行代码时，我在页面中的 3 个位置一个接一个地收到以下错误。

**

> 遇到 PHP 错误 严重性：通知消息：尝试获取非对象文件名的属性：views/poverview.php 行号：137

**

请让我知道我哪里错了。我真的会非常感谢你。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T13:35:21.003

```
<?php foreach($interested_in as $in)

                    echo form_checkbox('in_in[]', $in); 

?> 
```

足够的。

您的标题/ID 被“保存”在`$in`而不是`$in->id_id`.

但在你的情况下，我猜你想要：

```
<?php foreach(array_keys($interested_in) as $id):

      echo '<label>'.$interested_in[$id].'</label>';
      echo form_checkbox('in_in[]', $id); 

      endforeach;
?> 
```

# ios - 如何进行经过身份验证的服务调用

> ID：10738525
> 
> 赞同：1
> 
> 时间：2012-05-24T13:32:47.277
> 
> 标签：ios, nsurlconnection

您好我正在尝试连接到将使用用户名和密码作为凭据的某些服务器。以下是我正在使用的代码。NSString *post =[[NSString alloc] initWithFormat:@"userName=******&password=*** "]; NSURL *url=[NSURL URLWithString:@"******* *** ***** "];****

 ****```
NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];

NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];

NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease];
[request setURL:url];
[request setHTTPMethod:@"POST"];
[request setValue:postLength forHTTPHeaderField:@"Content-Length"];
[request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
[request setHTTPBody:postData];
NSLog(@"request:%@",request);
     urlConnection = [[NSURLConnection alloc] initWithRequest:request delegate:self]; 
```

这里的问题是服务器给用户无效的消息。但我给的凭据很好。这个用户名和密码没有进入请求对象..你们中的任何一个都可以帮助我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T14:47:10.430

您需要以包含您的用户名和密码的字符串开头。这将形成 http POST 正文。您需要将 username_input_field 和 password_input_field 替换为网络服务器的正确输入字段名称。我的建议是使用 Firefox 和 httpFox 扩展来登录你的网络服务器。httpFox 将显示请求的所有输入字段名称。您可能还需要添加额外的隐藏字段。

```
NSString *post = [NSString stringWithFormat:
    @"username_input_field=%@&password_input_field=%@",username,password]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T09:56:46.280

将用户名添加到请求标头对象中，如下所示：

```
[request addValue:@"<username>" forKey:@"<username parameter>"] 
```****

# ui-automation - 如何使用 UIAutomation 验证窗口是最顶层的窗口？

> ID：10738526
> 
> 赞同：0
> 
> 时间：2012-05-24T13:32:51.887
> 
> 标签：ui-automation, foreground, topmost

我在许多论坛中搜索过解决方案，但他们都告诉我，如果窗口在顶部，则使用 WindowPattern 并检查最上面的值应该返回 true。然而，这对我来说不是这样。我正在测试一个位于 outlok 选项卡中的应用程序。然后，用户可以在应用程序中单击并打开一个新窗口。我想验证这个窗口是否在前台。另外..这是一个 WPF 应用程序，因此我无法为打开的新窗口获取单独的句柄。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T07:11:53.077

这可能是一个术语问题：'Topmost' 在 Win32 中具有特殊含义（[参见此处对 WS_EX_TOPMOST 的描述](http://msdn.microsoft.com/en-us/library/61fe4bte(v=vs.71).aspx)），其基本意思是“浮动在其他普通窗口之上”——它通常用于工具提示、菜单弹出窗口、通知气球和像，它漂浮在屏幕上的所有其他窗口之上。它很少通过实际的应用程序窗口。

一个应用程序可以是当前前台窗口，位于其他窗口之上，但不具有此属性。

查看窗口是否在前台的另一种方法是查看它是否包含当前焦点或活动窗口。

# asp.net-mvc - 我可以将 [Required] 属性动态应用于 ASP.NET MVC ViewModel 吗？

> ID：10738534
> 
> 赞同：0
> 
> 时间：2012-05-24T13:33:17.533
> 
> 标签：asp.net-mvc, razor, viewmodel

根据每个站点的配置，表单上的某些字段可能需要也可能不需要。我可以在代码中将 [Required] 属性应用于我的 ViewModel 的字段吗？我想利用表单验证的所有便利，但我不能硬编码 [Required] 属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T13:35:34.950

结帐[FluentValidation.NET](http://fluentvalidation.codeplex.com/)。它可以用作数据注释的替代品，并且与[ASP.NET MVC](http://fluentvalidation.codeplex.com/wikipage?title=mvc&referringTitle=Documentation)有很好的集成。它允许您根据运行时条件定义动态验证规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T13:34:29.280

否。* 元数据已编入程序集。

*（好吧，我猜你可以在运行时发出程序集，但是老天，这将是很多疯狂的工作）

# google-maps-api-3 - “懒惰”地理编码

> ID：10738537
> 
> 赞同：1
> 
> 时间：2012-05-24T13:33:21.783
> 
> 标签：google-maps-api-3, geocoding, gmaps4rails

gmaps4rails 中是否有任何功能可以处理“惰性”地理编码？

我的情况：

我有一个公司数据库，其中有一个地址。手动添加公司时（只有1条记录），没有任何问题，默认`process_geocoding`设置为`true`。

每两周一次，我们使用导入脚本更新我们的数据库。当我们使用导入时，我们设置 `process_geocoding`为`false`，因为地理编码会使我们的导入脚本减慢 4 到 5 倍（在我的情况下 - 这是不可接受的）。

我需要惰性一个地理编码功能，它可以处理地理编码`if !address.blank? && lat.blank? && lng.blank?`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T15:46:55.880

从 1.5 开始，您可以执行以下操作：

```
process_geocoding: lambda { |obj| !obj.address.blank? && obj.lat.blank? && obj.lng.blank? } 
```

或者：

```
process_geocoding: :method_name 
```

# jquery - 使用 .attr 禁用 asp 控件在 FF 和 Chrome 中不起作用，而它适用于 IE

> ID：10738540
> 
> 赞同：0
> 
> 时间：2012-05-24T13:33:28.633
> 
> 标签：jquery, asp.net

这是我用来禁用单击按钮时的控件的方法：

```
$('#cmdbtnreleaseOwner').attr('disabled', true); 
$('#cmdlnkbtnreleaseOwner').attr('disabled', true); 
```

这会禁用 IE 中具有相应 ID 的控件，但不适用于 Mozilla FF 和 Chrome。

编辑：

这是我的 Aspx 代码：

```
<asp:ImageButton ID="cmdbtnreleaseOwner" ClientIDMode="Static" runat="server" ImageUrl="~/images/add-prospect.png" CommandName="Release" OnClientClick="return OnServiceOrderButtonClick();" />

 <asp:LinkButton Text="Release OwnerShip" ClientIDMode="Static" runat="server" ID="cmdlnkbtnreleaseOwner" CommandName="Release" OnClientClick="return OnServiceOrderButtonClick();" /> 
```

来自 Source 的 HTML：

```
<input type="image" name="ctl00$ContentPlaceHolder1$ServiceOrderGridView$ctl00$ctl02$ctl00$cmdbtnreleaseOwner" id="cmdbtnreleaseOwner" src="../images/add-prospect.png" onclick="return OnServiceOrderButtonClick();" />

<p>
<a onclick="return OnServiceOrderButtonClick();" id="cmdlnkbtnreleaseOwner" href="javascript:__doPostBack(&#39;ctl00$ContentPlaceHolder1$ServiceOrderGridView$ctl00$ctl02$ctl00$cmdlnkbtnreleaseOwner&#39;,&#39;&#39;)">Release OwnerShip</a>
</p> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T13:35:47.877

尝试`prop()`改用：

```
$('#cmdbtnreleaseOwner').prop('disabled', true); 
$('#cmdlnkbtnreleaseOwner').prop('disabled', true); 
```

这是假设这些元素`disabled`当然支持该属性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T13:38:01.697

正如罗里所说，或者：

```
$('#cmdbtnreleaseOwner').attr('disabled', 'disabled');  
$('#cmdlnkbtnreleaseOwner').attr('disabled', 'disabled'); 
```

在 IE 和其他环境中工作 -`.prop`我认为这是更好的方法。

# jquery-masonry - 如何使用同位素与砌体布局避免间隙

> ID：10738542
> 
> 赞同：2
> 
> 时间：2012-05-24T13:33:46.120
> 
> 标签：jquery-masonry, jquery-isotope

如何修复由元素滑动到下一行引起的间隙，如下图所示？

我正在使用 Isotope 和砌体布局模式。

谢谢你。

![问题](../Images/bf1a4d8c3189c9676e36ebff4adda60a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T11:34:44.657

我有一个类似的问题，我将通过预先计算元素的顺序来“修复”这个问题，这样就不会有空格，并且框总是适合网格布局。AFAIK 这个同位素 jQuery 插件没有解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T01:46:25.273

我猜我会说——

因为订单中的下一个项目是下面的那个大块。

或者以下项目是左下角的另一个较小的块。就算是往上挪了挪，占据了那个空白处，它的来源处还是会留下一个白色的空隙。

也许砌体有利于左边缘而不是右边缘或其他东西。从字面上看，今天才开始使用它，所以我不是专家。在寻找我自己的答案时发现了这个问题。

# c# - Scala：Java、C#、Scala 和 C++ 中的更高种类、开放类型和通配符泛型

> ID：10738543
> 
> 赞同：11
> 
> 时间：2012-05-24T13:33:46.720
> 
> 标签：c#, java, c++, scala, generics

我一直在使用 C# 进行编程，但对其类型系统的局限性感到沮丧。我了解到 Scala 的第一件事是 Scala 具有更高种类的泛型。但即使在我查看了许多文章、博客条目和问题之后，我仍然不确定什么是更高级的泛型。无论如何，我编写了一些编译良好的 Scala 代码，**这个片段是否使用更高的种类？**

```
abstract class Descrip [T <: DTypes, GeomT[_ <: DTypes] <: GeomBase[_]](newGeom: NewGeom[GeomT])
{
  type GeomType = GeomT[T]
  val geomM: GeomT[T] = newGeom.apply[T]()  
} 
```

然后我想也许我已经在使用更高种类的泛型了。据我所知，我是，但现在我明白了，在我听说 Scala 之前，我已经很高兴地在 C# 中使用了更高种类的类型。**这个片段是否使用更高种类的类型**？

```
namespace ConsoleApplication3
{
    class Class1<T>
    {
        List<List<T>> listlist;
    }
} 
```

因此，为了避免进一步的混淆，我认为澄清 Java、C# 和 Scala 在高级类型、通配符和开放/部分开放类型的使用方面允许的内容是有用的。由于 C# 和 Scala 之间的主要区别似乎是 Scala 允许通配符和开放类型，而 C# 没有通配符并且要求在使用之前关闭所有泛型类型。我知道它们有些不同，但我认为将这些功能的存在与它们在 C++ 模板中的等价物联系起来会很有用。

**那么下面的说法正确吗？**该表已针对 Alexey 的回答进行了更正

```
Lang:   Higher-kind Wild-card Open-types

Scala    yes         yes       yes

C#       no          no        no

Java     no          yes       no

C++      yes         yes       yes 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-24T14:05:52.323

> 这是更高种类的类型，不是吗：

不，更高种类的类型类似于

```
class Class1<T>
{
    T<String> foo; // won't compile in actual C#
} 
```

即一个泛型类型，其参数本身必须是泛型的。请注意，在此示例中`Class1<IList>`应该编译，但`Class1<String>`或`Class1<IDictionary>`不应该。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-24T21:24:29.397

看来您需要了解什么是高级类型，以及它们为何有用。

考虑以下接口（Java，`F<X,Y>`用作闭包替换）：

```
interface ListFun {
   public <A,B> List<B> fmap(F<A,B> fn, List<A> list);
}

interface SetFun {
   public <A,B> Set<B> fmap(F<A,B> fn, Set<A> set);
} 
```

这些接口看起来很有用，因为它们为集合定义了一种“转换”（这称为“函子”）。但它们看起来很像代码重复。**但是你不能**用 Java 和 C# 编写一个“统一的”接口。

它应该是什么样子？你会*很想*写类似的东西

```
interface Fun<X> {
   public <A,B> X<B> fmap(F<A,B> fn, X<A> col);
}

class ListFun implements Fun<List> {...} 
```

但`X<A>`在 Java 或 C# 中是不允许的，如果`X`不是像 那样的固定类型`List`，而是*类型参数*。但是，如果以某种方式允许这种抽象（例如在 Scala 或 Haskell 中），那么您将拥有更高种类的类型（或“高阶类型多态性”，术语对此仍然模糊不清）。这是 Scala 特征和实现：

```
trait Fun[X[_]] {
  def fmap[A,B](fn: A => B, col:X[A]):X[B]
}

class ListFun extends Fun[List]{
  def fmap[A,B](fn: A => B, list: List[A]) = list.map(fn)
} 
```

这是基本的想法。通常你并不经常需要这些东西，但是*当*你需要它时，它会非常有用。

# objective-c - 如何在 iPad 上播放系统按钮点击声音？

> ID：10738551
> 
> 赞同：5
> 
> 时间：2012-05-24T13:34:14.227
> 
> 标签：objective-c, ios, xcode, ipad

当用户在 iPad 上运行的应用程序中单击按钮时，我需要播放一些系统声音。如何在 iOS 中实现它？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-24T14:04:37.737

如果你想播放一个短的声音（少于 30 秒），你可以像这样轻松地做到这一点：

**注意**：您必须添加 AudioToolbox 框架并导入它 ( `#import <AudioToolbox/AudioToolbox.h>`)

```
SystemSoundID mySSID;

NSString *path = [[NSBundle mainBundle] pathForResource:@"beep" ofType:@"wav"];
AudioServicesCreateSystemSoundID((CFURLRef)[NSURL fileURLWithPath: path], &mySSID); 

AudioServicesPlaySystemSound(mySSID); 
```

另请注意，该文件可以是：

*   持续时间不超过 30 秒
*   线性 PCM 或 IMA4 (IMA/ADPCM) 格式
*   打包在 .caf、.aif 或 .wav 文件中

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T13:50:13.290

您应该使用 AVAudioPlayer。

[这里](http://mobileorchard.com/easy-audio-playback-with-avaudioplayer/)有一个关于使用 AVAudioPlayer 播放声音的很棒的教程。一个非常简单的使用示例：

```
NSURL *url = [NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/audiofile.mp3",dataPath];

NSError *error;
audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:&error];

if (audioPlayer == nil)
    NSLog([error description]);
else
    [audioPlayer play]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T06:05:35.883

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"gorilla 2" ofType:@"mp3"];
AVAudioPlayer* theAudio=[[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path] error:NULL];

theAudio.delegate=self;
[theAudio play]; 
```

# json - MVC3 应用程序中的 JsonResult 需要在结果顶部添加一个默认条目...

> ID：10738553
> 
> 赞同：0
> 
> 时间：2012-05-24T13:34:16.360
> 
> 标签：json, asp.net-mvc-3, var

我需要在结果的顶部插入一个默认值，如下所示......

有人可以给我一个线索如何使用匿名类型吗？

```
public JsonResult GetThingsForStuff(string stuff)
    {
        var things= from c in db.MYTABLE
                         where c.idofstuff == stuff
                         select new { id = c.realid, name = c.realname};
        return Json(things, JsonRequestBehavior.AllowGet);
    } 
```

在我的控制器中，我最初是通过

```
List<SelectListItem> items3 = new SelectList(db.MYTABLE.ToList().Distinct(), "realid", "realname").ToList();
        items3.Insert(0, (new SelectListItem { Text = "Select Me", Value = "0" }));
        ViewBag.Things = items3; 
```

通过我有一个 javascript 函数根据选定的“东西”重新加载这个下拉列表，我需要这个默认值回到顶部。

任何帮助将不胜感激。

谢谢，大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T13:51:17.983

您可以将它们连接起来：

```
public JsonResult GetThingsForStuff(string stuff)
{
    var things = db
        .MYTABLE
        .Where(x => x.idofstuff == stuff)
        .ToList()
        .Select(x => new SelectListItem
        {
            Value = x.realid.ToString(),
            Text = x.realname
        });

    var items = new[] { new SelectListItem { Text = "Select Me", Value = "0" } }
        .Concat(things);

    return Json(items, JsonRequestBehavior.AllowGet);
} 
```

# ios - stringByReplacingOccurrencesOfString 替换较长单词的组合

> ID：10738556
> 
> 赞同：0
> 
> 时间：2012-05-24T13:34:21.607
> 
> 标签：ios, objective-c, regex, string, nsstring

使用时`stringByReplacingOccurrencesOfString`，它似乎替换了单词中的单词。例如，

```
The house was held together by... 
```

用“A”替换出现的“the”将导致

```
A house was held togeAr by... 
```

我怎样才能避免这种情况？我知道我可以在被替换的单词的任一侧添加空格以确保它不是更长单词的一部分，但这并不适用于所有情况，特别是在被替换的单词是句子中的第一个或最后一个单词的情况下（也就是说，当两边都没有空白时）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T13:50:24.587

您应该使用`NSRegularExpression`with 表示单词边界的`\bthe\b`模式`\b`。

```
NSString *input = @"The house was held together by...";
NSString *string = @"the";
NSString *replacement = @"A";

NSString *pattern = [NSString stringWithFormat:@"\\b%@\\b", string];
NSRegularExpression *regex = [[NSRegularExpression alloc] initWithPattern:pattern options:NSRegularExpressionCaseInsensitive error:nil];
NSString *result = [regex stringByReplacingMatchesInString:input options:0 range:NSMakeRange(0, input.length) withTemplate:replacement];

NSLog(@"%@", result);
// A house was held together by... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T13:39:41.830

对于更复杂的替换操作，您可以使用`NSRegularExpression`. 您可以搜索类似的内容`(^| )the($| )`并替换匹配项。

# iphone - 如何禁用点击后退按钮，iphone

> ID：10738559
> 
> 赞同：1
> 
> 时间：2012-05-24T13:34:33.750
> 
> 标签：iphone, objective-c

我的导航栏上有后退按钮和编辑按钮，如下所示 ![在此处输入图像描述](../Images/5525e896cd494ffa5b34b9aec642a77c.png)

单击编辑按钮后，我有

![在此处输入图像描述](../Images/91a580743baa49ca00eb599be55cd0b2.png)

**我的问题**：当我处于编辑模式时，如何禁用单击后退按钮，以便用户在完成之前无法返回上一个屏幕.....

我正在尝试的是

```
self.navigationItem.backBarButtonItem.enabled   =   NO; 
```

但是后退按钮仍然可以点击

PS：我将返回按钮添加到导航栏的方式是

```
self.navigationItem.hidesBackButton             =   NO; 
```

我可以隐藏后退按钮，但我不想要那个选项......

请就这个问题给我建议。欢迎任何意见在这里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T14:32:19.013

最好的解决方案是在您离开屏幕时结束编辑模式，可能首先显示确认警报（`UIAlertView`带有两个按钮“确定”和“取消”）。

但是，要回答这个问题 - 您必须创建一个`UIButton`外观与后退按钮相同的按钮（使用图像）。使用此按钮创建一个`UIBarButtonItem`作为其自定义视图并在其中使用它`leftBarButtonItem`（注意`backBarButtonItem`不能有自定义视图）。

然后，您就可以在该自定义视图上`enabled`进行设置。`NO`

编辑：我错了。`UIBarButtonItem`有财产`enabled`。禁用后退按钮的问题可能是因为您禁用`backBarButtonItem`了错误的`navigationItem`. 后退按钮始终由堆栈中的前一个控制器定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T13:46:07.167

如果按钮被阻止，也许你应该隐藏它。因为在我看来，按钮反应迟钝对用户不利。

```
- (void)setEditing:(BOOL)editing animated:(BOOL)animated {
    [super setEditing:editing animated:animated];

    [UIView animateWithDuration:0.35f animations:^{
        self.navigationItem.hidesBackButton = editing;       
    }];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T14:00:53.907

self.navigationItem.backBarButtonItem.enabled = NO;

你把上面的代码放在哪里。将上面的代码放在编辑按钮的 IBAction 方法中。

# python - 在scrapy框架python的start_urls列表中为url构造正则表达式

> ID：10738560
> 
> 赞同：1
> 
> 时间：2012-05-24T13:34:37.027
> 
> 标签：python, scrapy

我对scrapy很陌生，而且我以前没有使用过正则表达式

以下是我的`spider.py`代码

```
class ExampleSpider(BaseSpider):
   name = "test_code
   allowed_domains = ["www.example.com"]
   start_urls = [
       "http://www.example.com/bookstore/new/1?filter=bookstore",
       "http://www.example.com/bookstore/new/2?filter=bookstore",
       "http://www.example.com/bookstore/new/3?filter=bookstore",
   ]

   def parse(self, response):
       hxs = HtmlXPathSelector(response) 
```

现在，如果我们查看`start_urls`所有三个 url 都是相同的，除了它们在整数值上有所不同，`2?, 3?`依此类推，我的意思是根据网站上存在的 url 不受限制，现在我们可以使用 crawlspider，我们可以为 URL 构造正则表达式，如下所示，

```
 from scrapy.contrib.spiders import CrawlSpider, Rule
    from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor
    import re

    class ExampleSpider(CrawlSpider):
        name = 'example.com'
        allowed_domains = ['example.com']
        start_urls = [
       "http://www.example.com/bookstore/new/1?filter=bookstore",
       "http://www.example.com/bookstore/new/2?filter=bookstore",
       "http://www.example.com/bookstore/new/3?filter=bookstore",
   ]

        rules = (
            Rule(SgmlLinkExtractor(allow=(........),))),
        ) 

   def parse(self, response):
       hxs = HtmlXPathSelector(response) 
```

`start_url`你能指导我吗，我怎样才能为上面的列表构建一个爬虫规则。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T18:02:02.297

如果我理解正确，您需要大量具有特定模式的起始 URL。

如果是这样，您可以覆盖[BaseSpider.start_requests](http://doc.scrapy.org/en/latest/topics/spiders.html#scrapy.spider.BaseSpider.start_requests)方法：

```
class ExampleSpider(BaseSpider):
    name = "test_code"
    allowed_domains = ["www.example.com"]

    def start_requests(self):
        for i in xrange(1000):
            yield self.make_requests_from_url("http://www.example.com/bookstore/new/%d?filter=bookstore" % i)

    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T17:27:14.713

如果您使用的是 CrawlSpider，覆盖 parse 方法通常不是一个好主意。

规则对象可以将您感兴趣的网址过滤到您不关心的网址。

请参阅文档中的[CrawlSpider](http://doc.scrapy.org/en/0.14/topics/spiders.html#crawlspider-example)以供参考。

```
from scrapy.contrib.spiders import CrawlSpider, Rule
from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor
import re

class ExampleSpider(CrawlSpider):
    name = 'example.com'
    allowed_domains = ['example.com']
    start_urls = ['http://www.example.com/bookstore']

    rules = (
        Rule(SgmlLinkExtractor(allow=('\/new\/[0-9]\?',)), callback='parse_bookstore'),
    )

def parse_boostore(self, response):
   hxs = HtmlXPathSelector(response) 
```

# java - 如何判断当前客户端socket已经关闭并连接到另一台服务器？

> ID：10738561
> 
> 赞同：0
> 
> 时间：2012-05-24T13:34:42.597
> 
> 标签：java, multithreading, sockets, timeout

我想在我的代码中实现一个处理程序，以允许客户端自动连接到同一网络上的服务器的第二个实例，如果连接到该客户端的服务器在 10 秒后没有响应。我究竟做错了什么？？

```
private static void connectToServer(String serverHostname, int port) throws UnknownHostException, IOException
    {
        try {
            echoSocket = new Socket(serverHostname, 10118);
            out = new PrintWriter(echoSocket.getOutputStream(), true);
            in = new BufferedReader(new InputStreamReader(echoSocket
                    .getInputStream()));
        } catch (UnknownHostException e) {
            System.err.println("Unknown host: " + serverHostname);
            System.exit(1);
        } catch (IOException e) {
            System.err.println("Not connected to server: "
                    + serverHostname);
            System.exit(1);
        }
    }

 public static void main(String[] args) throws IOException {
            listServer.add("10.196.113.31");
            listServer.add("10.196.113.27");
            BufferedReader stdIn = new BufferedReader(new InputStreamReader(
                    System.in));
            try {

            if (args.length > 0)
                serverHostname = args[0];
            System.out.println("Trying to connect to host " + serverHostname
                    + " at port 10118.");

            connectToServer(getServer(), 10118);
            echoSocket.setSoTimeout(10000);

            String userInput;
            System.out.print("Input: ");

                while ((userInput = stdIn.readLine()) != null) {
                    out.println(userInput);

                    if (!echoSocket.isConnected()) connectToServer(serverHostname, 10118);

                    System.out.println("echo: " + in.readLine());
                    System.out.print("Input: ");
                }
            } catch (SocketTimeoutException e) {
                NextServer();
                connectToServer(getServer(), 10118);
                System.out.println("Timeout");
                // TODO: handle exception
            }

            out.close();
            in.close();
            stdIn.close();
            echoSocket.close();
        }

        private static void NextServer(){
            idServer ++;        
        }

        private static String getServer(){
            return listServer.get(idServer);
        } 
```

**编辑**

当我运行服务器，然后是客户端时，一切都很好。然后我在同一网络的另一台机器上启动第二个服务器，并尝试从同一个客户端发送文本，客户端应该自动检测到第一个服务器断开连接，连接到服务器的第二个实例并发送文本消息。这是我得到的例外：

> 线程“主”java.net.SocketException 中的异常：在 sun.nio.cs.StreamDecoder.readBytes(Unknown Source) at sun.nio.cs.StreamDecoder.implRead 的 java.net.SocketInputStream.read(Unknown Source) 处的连接重置(Unknown Source) at sun.nio.cs.StreamDecoder.read(Unknown Source) at java.io.InputStreamReader.read(Unknown Source) at java.io.BufferedReader.fill(Unknown Source) at java.io.BufferedReader.readLine (Unknown Source) at java.io.BufferedReader.readLine(Unknown Source) at Q3.Client.main(Client.java:62)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T13:43:26.177

如果您希望您的客户端在服务器断开连接时执行某些操作，您需要做的不仅仅是 catch `SocketTimeoutException`。如堆栈跟踪所示，断开的连接将导致`SocketException`抛出泛型。你也应该抓住这个。

换句话说，您似乎只是在处理从客户端到服务器的初始连接失败的情况；并且您没有处理现有条件被删除的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T13:44:13.760

如果服务器没有响应`connect`，您`setSoTimeout`将不会涵盖这种情况，因此请确保您在连接建立代码中有超时。写这个：

```
SocketAddress a = new InetSocketAddress(serverHostname, 10118);
echoSocket = new Socket();
echoSocket.connect(a, 10000); 
```

# php - 使用 UTF-8 时无法将字符串插入 MySQL

> ID：10738564
> 
> 赞同：0
> 
> 时间：2012-05-24T13:34:48.040
> 
> 标签：php, mysql, unicode, utf-8

我想插入一些从谷歌翻译获得的数据。例如： [http ://translate.google.com/translate_a/t?client=t&hl=en&sl=auto&tl=fa&multires=1&prev=btn&ssel=0&tsel=3&uptl=fa&alttl=en&sc=1&text=hello](http://translate.google.com/translate_a/t?client=t&hl=en&sl=auto&tl=fa&multires=1&prev=btn&ssel=0&tsel=3&uptl=fa&alttl=en&sc=1&text=hello)

收到结果后，我想将其插入到 MySQL 表中。所以我写了以下代码：

```
$link     = "http://translate.google.com/translate_a/t?client=t&hl=en&sl=auto&tl=fa&multires=1&prev=btn&ssel=0&tsel=3&uptl=fa&alttl=en&sc=1&text=";

$server   = "127.0.0.1";
$username = "AliAhmadi";
$password = "AliAhmadi";
$database = "AliAhmadi";

$conn     = mysql_pconnect($server, $username, $password);
if (!$conn)
     die("Bye Bye");
mysql_select_db($database, $conn);
mysql_set_charset('utf8',$conn);
$ch       = curl_init();
$url          = $link."hello";
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$WebContent   = curl_exec($ch);
$update_query = 'update `en_db` SET `meaning`="'.mysql_real_escape_string($WebContent).'" where `id`=1';
mysql_query($update_query,$conn);
mysql_close($conn); 
```

Google 发送了以下文本文件：

```
[[["سلام", "你好", "", ""]], [["感叹词", ["سلام", "هالو", "الو"], [["سلام", ["你好", “嗨”、“阿罗哈”、“万岁”]]、[“هالو”、[“你好”、“你好”、“你好”]]、[“الو”、[“你好”]]]]]、 "en", , [["سلام", [5], 0, 0, 1000, 0, 1, 0]], [["你好", 4, , , ""], ["你好", 5, [["سلام", 1000, 0, 0], ["خوش", 0, 0, 0], ["میهمان گرامی", 0, 0, 0], ["خوش آمدید", 0, 0, 0] , ["درود کاربر", 0, 0, 0]], [[0, 5]], "hello"]], , , [["en"]], 74]
```

但在表中只保存了字符串的第一部分：

```
[[[”
```

我认为问题来自 unicode，因为当我发表评论时`mysql_set_charset('utf8',$conn);`，它会在表格中保存一些东西，但看起来像

```
[[["Èå","to","",""]],[["介词",["Èå","ÈÑÇ\u06CC","ÏÑ","ÏÑ ÈÑÇÈÑ","\u06CCÔ", "Óæ\u06CC","äÒÏ","ØÑÝ","ÈÓæ\u06CC","ÊÇ äÓÈÊ Èå","ÈÑ ÍÓÈ","ÈØÑÝ","ÑæÈØÑÝ"],[["Èå",["to" ,"into","in","on","at","against"]],["ÈÑÇ\u06CC",["for","to","on","为了","向","为了"]],["ÏÑ",["at","to","about","unto"]],["ÏÑ ÈÑÇÈÑ",["反对","对", "to","for","unto"]],["\u06CCÔ",["before","to","with","unto"]],["Óæ\u06CC",["to","unto"]],["äÒÏ",["to","near","about"]],["ØÑÝ ",["towards","to"]],["ÈÓæ\u06CC",["toward","to","into","off","unto","at"]],["ÊÇ äÓÈÊ Èå",["to","unto"]],["ÈÑ ÍÓÈ",["根据","in","at","to"]],["ÈØÑÝ",["toward" ,"at","unto","to","in","into"]],["ÑæÈØÑÝ",["unto","to"]]]],["",["ÚáÇãÊ ãÕÏÑ Çäá \u06CCÓ\u06CC ÇÓÊ"],[["ÚáÇãÊ ÕÏÑ Çäá\u06CCÓ\u06CC ÇÓÊ",["to"]]]]],"en",,[["Èå",[5],0,0, 1000,0,1,0]],[["to",4,,,""],["to",5,[["Èå",1000,0,0],["ÈÑÇ\u06CC",0,0,0],["ÊÇ", 0,0,0],["ÑÇ Èå",0,0,0],["Èå ãäÙæÑ",0,0,0]],[[0,2]],"to"]],,, ,5]
```

谷歌翻译返回的 unicode 是什么？我对这段代码的问题在哪里？我更改了 utf8_unicode_ci、utf8_general_ci 和 utf8_presian_ci 之间的排序规则，但这个问题又发生了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T08:13:59.710

我相信您的`en_db.meaning`列被定义为默认排序规则`latin1_swedish_ci`。这使用 ISO-8859-1 (Latin-1) 编码，它不能存储阿拉伯字符。

（当您删除`mysql_set_charset`调用时，MySQL 会将您的 UTF-8 阿拉伯语误解为拉丁字符，这些字符确实适合该列，但看起来完全错误。）

确保在创建表时指定使用 UTF-8 的排序规则，例如`CREATE TABLE en_db (...) COLLATE utf8_general_ci`或一般情况下`(...) CHARACTER SET utf8`（或`utf8mb4`用于星体平面支持，如果可用）。

您可以使用 更改现有表及其中所有文本列的排序规则`ALTER TABLE en_db CONVERT TO CHARACTER SET utf8`，但如果您已经在其中包含非 ASCII 字符，则它们都可能是错误的。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2014-01-31T17:52:04.633

```
<?php
//Set Beginning of php code:
header("Content-Type: text/html; charset=UTF-8");
mysql_query("SET NAMES 'utf8'"); 
mysql_query('SET CHARACTER SET utf8');

//then create the connection 
$CNN=mysql_connect("localhost","usr_urdu","123") or die('Unable to Connect');
$DB=mysql_select_db('db_urdu',$CNN)or die('Unable to select DB'); 
```

# sql - cakephp 搜索数据库

> ID：10738566
> 
> 赞同：0
> 
> 时间：2012-05-24T13:34:53.570
> 
> 标签：sql, database, cakephp

大家好我正在尝试使用 cakephp 在数据库中搜索用户名，用户名不是数据库中的主键，但它必须是唯一的。这是我用于搜索功能的代码，但蛋糕不喜欢它。

```
 function index(){
    $this->User->recursive = 0;
    if ($this->data['users']['username']) { 
$this->set('users',  
$this->paginate('users', array('or' => array('users.username LIKE' => '%' .  )));
    else { 
$this->set('users', $this->paginate()); 
        }
        }
    } 
```

数据库包含一个 id（主键）和一个用户名。这样做的目的是发送好友请求。用户搜索用户名，然后如果用户名在那里，其他用户将在关系收件箱中收到他们的请求，并且可以选择“是”或“否”。

另一件事是，如果用户名存在，我希望将数据存储在名为 users_users 的表中 - 我意识到一旦搜索发生，我没有任何代码可以做什么。但我正在努力解决这个问题，因为他们在网上似乎没有很多教程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T13:45:25.397

通过在输入用户名时对其进行验证，确保您的用户名是唯一的。 [http://book.cakephp.org/2.0/en/models/data-validation.html](http://book.cakephp.org/2.0/en/models/data-validation.html)

我不确定，但是这个 users.username 看起来你正在使用用户名作为可连接的外键！？那是完全错误的。

即使是这样，符号也是错误的并且不遵循 CakePHP 标准并且不会工作。那么它应该是 User.username 。

我建议您从 CakePHP 的博客教程重新开始并阅读这本书。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T13:49:08.700

我可能错了，但是为什么除了'％'之外还有一个点？点是字符串连接运算符，您没有提供任何内容作为第二个参数。此外，您提出了 OR 条件，但只有一个论点。所以试试这个：

```
 function index(){
        $this->User->recursive = 0;
        if ($this->data['users']['username']) { 
              $this->set('users',  
                    $this->paginate('users', array('users.username LIKE' => '%')));
        }
        else { 
              $this->set('users', $this->paginate()); 
        }
  } 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T14:16:00.157

Cake 默认为 AND，但您可以指定 AND 和 OR 或 AND 或 OR 的任何层次结构...直到您头晕目眩:)

您的搜索可能格式如下：

```
 'or' => array( 
        'Model.column1 LIKE' => '%keyword%', 
        'Model.column2 LIKE' => '%keyword' 
```

# haskell - 四舍五入到最接近的整数奇怪的结果

> ID：10738569
> 
> 赞同：23
> 
> 时间：2012-05-24T13:35:06.673
> 
> 标签：haskell, floating-point

`round`Haskell中的函数有官方规范吗？在 GHCi 7.0.3 版中，我看到以下行为：

```
ghci> round (0.5 :: Double)
0
ghci> round (1.5 :: Double)
2 
```

由于 0.5 和 1.5 都可以精确地表示为浮点数，我希望看到与 Python 中相同的行为：

```
>>> round(0.5)
1.0
>>> round(1.5)
2.0 
```

这种差异有什么理由吗，还是 GHCi 的怪癖？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-24T13:43:23.010

它在规范中。[您可以在 Haskell 报告](http://www.haskell.org/definition/haskell2010.pdf)的第 6.4.6 节中看到它：

> `round x`返回最接近的整数`x`，如果`x`两个整数之间等距，则返回偶数。

[正如@dflemstr](https://stackoverflow.com/users/230461/dflemstr)所指出的，这符合[IEEE Standard for Floating-Point Arithmetic](http://en.wikipedia.org/wiki/IEEE_754-2008#Rounding_rules)。

# asp.net-mvc-3 - 将我的表单绑定到模型

> ID：10738574
> 
> 赞同：0
> 
> 时间：2012-05-24T13:35:23.280
> 
> 标签：asp.net-mvc-3

我有一个包含我的模型列表的 ViewModel，如下所示：

```
public class OrderConfirm
{
    public ICollection<DayBookQuoteLines> SalesLines { get; set; }
    public ICollection<DayBookQuoteLines> LostLines { get; set; }
    public string Currency { get; set; }
} 
```

然后我在我的视图中使用这个 ViewModel，如下所示：

```
@model btn_intranet.Areas.DayBook.Models.ViewModels.OrderConfirm
@{
    ViewBag.Title = "Daybook - Order Confirmation";
}

<h6>Sales Lines</h6>
<div id="SalesOrders">
@using (Ajax.BeginForm("ConfirmSalesOrder", new AjaxOptions()
{
    InsertionMode = InsertionMode.Replace,
    UpdateTargetId = "SalesOrders",
    OnBegin = "SalesOrderConfirm"
}))
{
    @foreach(var item in Model.SalesLines)
    {
        <p>@item.ItemName</p>
        <p>@item.Qty</p>

        @* Other Properties *@
    }

    <input type="submit" value="Submit Sales Order" />
}
</div>

<h6>Lost Lines</h6>
<div id="LostOrders">
@using (Ajax.BeginForm("ConfirmLostOrder", new AjaxOptions()
{
    InsertionMode = InsertionMode.Replace,
    UpdateTargetId = "LostOrders",
    OnBegin = "LostOrderConfirm"
}))
{
    @foreach(var item in Model.SalesLines)
    {
        <p>@item.ItemName</p>
        <p>@item.Qty</p>

        @* Other Properties *@
    }

    <input type="submit" value="Submit Lost Order" />
}
</div> 
```

问题是，在我的`[HttpPost]`行动中，`ConfirmSalesOrder`和`ConfirmLostOrder`. 作为参数传递的我的模型的值为空：

```
[HttpPost]
public ActionResult ConfirmSalesOrder(List<DayBookQuoteLines> quoteLines)
{

    // Process order...

    return PartialView("Sales/_ConfirmSalesOrder");
} 
```

`quoteLines`空值也是如此。如何将表单绑定到我的模型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T13:37:15.137

您的表单中没有任何输入字段可以将值发送到服务器。您只是在显示它们。这就是为什么当您提交表单时它们为空 => 没有任何东西发送到服务器。

但是，如果在此表单中，用户不应该修改任何值，您需要做的就是将一个 id 传递给控制器​​操作，这将允许您从您获取模型的完全相同的位置获取模型GET 呈现此表单的操作。

在这种情况下，您的操作将如下所示：

```
[HttpPost]
public ActionResult ConfirmSalesOrder(int id)
{
    List<DayBookQuoteLines> quoteLines = ... fetch them the same way as in your GET action
    // Process order...

    return PartialView("Sales/_ConfirmSalesOrder");
} 
```

另一方面，如果用户应该修改表单中的值，您需要向他提供必要的输入字段：文本框、复选框、单选按钮、下拉列表、textereas 等内容......并且为了生成正确的名称对于那些输入字段，我建议您使用编辑器模板，而不是在视图中编写 foreach 循环。

* * *

更新：

似乎用户不应该编辑数据，因此没有相应的输入字段。在这种情况下，为了在 AJAX 请求期间保留模型，您可以将 替换`Ajax.BeginForm`为普通`Html.BeginForm`的，然后使用 jQuery 手动连接 AJAX 请求。这种方法的优点是现在您拥有更多控制权，例如您可以将整个模型作为 JSON 请求发送。为此，您可以将模型存储为视图内的 javascript 编码变量：

```
<script type="text/javascript">
    var model = @Html.Raw(Json.Encode(Model));
</script> 
```

然后 AJAXify 表单：

```
$('#formId').submit(function() {
    $.ajax({
        url: this.action,
        type: this.method,
        contentType: 'application/json',
        data: JSON.stringify({ quoteLines: model }),
        success: function(result) {
            $('#someTargetIdToUpdate').html(result);
        }
    });
    return false;
}); 
```

# c - 如何使用 C 将证书安装到本地计算机根目录中

> ID：10738576
> 
> 赞同：0
> 
> 时间：2012-05-24T13:35:29.780
> 
> 标签：c, windows, winapi, driver, x509certificate

我通过参考[此链接](http://www.itninja.com/question/guide-to-signing-unsigned-drivers)创建了一个自签名证书，现在我得到了一个`.cer`文件，我将使用`certmgr.exe`. 但我想以编程方式安装此证书。

要使用的语言：C。
编译器正在使用：MINGW

它应该支持所有版本的windows。

而且我找不到合适的API，如果我得到任何提示会很有帮助？？

# java - 带有 mssql 关键字的 HSQLDB 表名

> ID：10738583
> 
> 赞同：0
> 
> 时间：2012-05-24T13:35:46.010
> 
> 标签：java, hibernate, hsqldb

我正在尝试将所有 junit 测试切换到 hsqldb（真正的数据库是 oracle）。当我尝试映射包含以下内容的 .hbm.xml 文件时出现问题：

```
<property name="begin" type="integer" column="BEGIN" /> <property name="end" type="integer" column="END" /> 
```

现在在 mem db build 期间，我得到了以下信息：

```
错误 - 不成功：创建表 BLOCKTIME（ID bigint 不为空，BEGIN 整数，END 整数，TIMEZONE varchar(255)，主键 (ID)）
错误 - 意外令牌：语句中的 END [创建表 BLOCKTIME（ID bigint 不为空，BEGIN 整数，END]

```

问题似乎是限制为 mssql 作为关键字的 BEGIN 和 END 表名。

知道如何省略这个问题吗？

谢谢，马雷克。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T13:46:04.257

您可以转义列名：

```
<property name="begin" type="integer" >
  <column name="[begin]" />
</property> 
```

或者

```
<property name="begin" type="integer" >
  <column name='"begin"' />
</property> 
```

# php - 检查 PHP cookie 是否存在，如果没有设置它的值

> ID：10738593
> 
> 赞同：38
> 
> 时间：2012-05-24T13:36:39.520
> 
> 标签：php, cookies, setcookie

我正在开发一个多语言网站，所以我尝试了这种方法：

```
echo $_COOKIE["lg"];
if (!isset($_COOKIE["lg"]))
    setcookie("lg", "ro");
echo $_COOKIE["lg"]; 
```

这个想法是，如果客户端没有`lg`cookie（因此，这是他们第一次访问此站点）`lg = ro`，则为该用户设置一个 cookie。

一切正常，除了如果我第一次进入这个页面，第一个和第二个`echo`什么都不返回。仅当我刷新页面时才设置 cookie，然后都`echo`打印我期望的“ro”字符串。

如何设置此 cookie 以便`echo`在用户第一次访问/页面加载时从第二个中查看其值？应该不需要刷新页面或创建重定向。

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2012-05-24T13:40:01.450

## 回答

您不能根据[PHP 手册](http://php.net/setcookie)：

> 一旦设置了 cookie，就可以在下一页加载时使用 $_COOKIE 或 $HTTP_COOKIE_VARS 数组访问它们。

这是因为 cookie 在响应标头中发送到浏览器，然后浏览器必须将它们与下一个请求一起发送回来。这就是为什么它们仅在第二个页面加载时可用。

## 解决方法

`$_COOKIE`但是您也可以通过设置when you call来解决它`setcookie()`：

```
if(!isset($_COOKIE['lg'])) {
    setcookie('lg', 'ro');
    $_COOKIE['lg'] = 'ro';
}
echo $_COOKIE['lg']; 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-24T13:39:10.247

Cookie*仅*在请求时发送，因此无法在分配后立即检索（仅在重新加载后可用）。

> 一旦设置了 cookie，就可以在**下一页加载**时使用 $_COOKIE 或 $HTTP_COOKIE_VARS 数组访问它们。
> 
> 如果在调用此函数之前存在输出，则 setcookie() 将失败并返回 FALSE。如果 setcookie()*成功运行*，它将返回 TRUE。这*并不表示用户**是否**接受了 cookie*。
> 
> **直到下次加载**cookie 应该可见的页面时，cookie 才会变得可见。要测试 cookie 是否设置成功，请在 cookie 过期之前检查下一个加载页面上的 cookie。过期时间通过 expire 参数设置。调试 cookie 存在的一个好方法是简单地调用 print_r($_COOKIE);。

[资源](http://php.net/manual/en/function.setcookie.php)

# git - Git 中的错误合并冲突解决方案。重试错误的提交，从那以后保持更改？

> ID：10738596
> 
> 赞同：2
> 
> 时间：2012-05-24T13:36:50.210
> 
> 标签：git, merge, git-extensions, merge-conflict-resolution

我正在和另一个开发人员一起做一个小项目，我们遇到了一些情况。我们都熟悉 SVN，但 Git 对我们俩来说都是新手。

我们正在处理存储库中的一个分支，每个分支都处理我们项目的不同方面。

发生的事情是他提交了一些东西，然后我提交了一些东西，发生了冲突（在设计器文件中，因为它试图将我们的两个新文件放在同一个“位置”），当我解决它们时，我一定错过了一些东西，但现在它不工作。我设法以某种方式使文件进入工作状态，并继续我快乐的方式，添加更多不受糟糕冲突解决方案影响的东西。

所以看起来。

A（好）-> B（坏）-> C（尝试修复）-> D（恢复错误提交）-> A -> E（全新文件）-> F（全新文件）-> G（其他dev 第一次提交，因为大问题，引入了更多的问题和冲突。）

我基本上想做的是回到A。并合并我的B，E和F提交，此时另一个开发人员可以提交G。此时我不知道B和E之间发生了什么，所以我宁愿放弃它，因为这只是我试图解决问题。但是，当我回到 A 时，我不会收到与最初提交 B 时相同的冲突提示。

请上帝帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T14:32:43.970

尝试使用 SHA 引用签出您的 A 提交，使用 git 中的 cherry-pick 命令从 A 和樱桃挑选 B、E 和 F 创建一个新分支。

```
git checkout -f A23FDE (A)
git checkout -b new-branch-name
git cherry-pick F45HJ2 (B)
git cherry-pick E49FG2 (E)
git cherry-pick K83D87 (F) 
```

# c++ - Ubuntu 12.04 上的 Boost.MPI

> ID：10738598
> 
> 赞同：3
> 
> 时间：2012-05-24T13:36:57.063
> 
> 标签：c++, boost, ubuntu, mpi

## 背景

大家好，

我正在尝试使用 Boost::MPI，目前我只是在尝试运行[教程](http://www.boost.org/doc/libs/1_45_0/doc/html/mpi/tutorial.html)中的简单第一个示例。我在构建/运行它时遇到了麻烦。

我使用 apt-get 安装了 boost，并使用 synaptic 包管理器安装了 boost_mpi 和 boost_serialization (1.48.0)。我使用 apt-get 安装了 MPICH2。

尽管 OpenMPI 从未显式安装，但它似乎在我的系统上，我认为这是 Boost::MPI 的依赖项，但 MPICH2 和 OpenMPI 似乎在互相踩踏。

## 信息

如果我使用

```
g++ test.cpp -I/usr/include/mpich2 -L/usr/lib -lboost_mpi -lboost_serialization 
```

然后使用

```
mpiexec -n 2 ./a.out 
```

它引发了一堆似乎来自 OpenMPI 的错误。如果我尝试通过链接 OpenMPI 库使用

```
g++ test.cpp -L/usr/lib -lboost_mpi -lboost_serialization -lmpi -I/usr/include/openmpi 
```

我收到以下错误：

```
/usr/bin/ld: /tmp/ccJ5ezv7.o: undefined reference to symbol 'ompi_op_set_cxx_callback'
/usr/bin/ld: note: 'ompi_op_set_cxx_callback' is defined in DSO /usr/lib/libmpi.so.0 so try adding it to the linker command line
/usr/lib/libmpi.so.0: could not read symbols: Invalid operation 
```

如果我尝试使用`mpic++`以下命令进行构建

```
mpic++ test.cpp -lboost_mpi -lboost_serialization 
```

它不会链接返回一堆表单错误

```
 /usr/lib/libmpich.so: undefined reference to `MPL_trid' 
```

所以我尝试链接 libmpi 即

```
mpic++ test.cpp -lboost_mpi -lboost_serialization -lmpi 
```

这会构建但在运行时会`mpiexec`产生以下错误

```
Fatal error in PMPI_Errhandler_set: Invalid communicator, error stack:
PMPI_Errhandler_set(118): MPI_Errhandler_set(comm=0x370500, errh=0x370be0) failed
PMPI_Errhandler_set(70).: Invalid communicator 
```

## 问题

在我看来，不知何故 OpenMPI 和 MPICH2 在真正不应该的地方交织在一起。有谁知道我如何仅针对 OpenMPI 或 MPICH2 构建然后使用正确的运行`mpiexec`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T17:04:41.230

通常不支持混合针对不同 MPI 库编译的代码。如果您的 Boost::MPI 链接到 Open MPI，那么您**必须**在应用程序的其余部分使用 Open MPI。

要获取`mpic++`其他编译器包装器和所有头文件，您应该安装`-dev`Open MPI 包。如果该库已作为依赖项安装，则只有运行时部分将在那里。

# javascript - 获取跨域 iFrame 内部文档的高度

> ID：10738600
> 
> 赞同：1
> 
> 时间：2012-05-24T13:37:03.913
> 
> 标签：javascript, jquery, iframe, cross-domain

我在[这里](https://stackoverflow.com/questions/153152/resizing-an-iframe-based-on-content)找到并使用了以下 stackoverflow 问题和答案。我正在使用 iFrame 内部的 iFrame 来引用父域，以便将我的身高传达给它。我完全理解这个概念，并且很容易实现。问题是，当我尝试从 jQuery 或仅通过 document.body.scrollHeight 获取 $(document).height() 时，当我的页面在 iFrame 内被引用时，我在所有浏览器中都看到了奇怪的结果。

这是我页面上发生的事情的一些背景。我正在做一些 ajax 调用来搜索第三方提供商的服务，并根据结果在我的页面内生成 html，这是非常标准的东西。顺便说一句，我正在等待将我的 html 添加到 DOM 中，然后再获取文档的高度。这是我的页面位于 iFrame 内时 $(document).height() 的结果。

FireFox 10.0.2，其中拾取的高度几乎比文档的实际高度小 1000 像素或更多。

Google Chrome 18.0.1025.162 在大多数情况下会选择正确的高度。有时高度仅小几百像素。

Safari 5 的行为也与 FireFox 一样。

我看过许多博客文章，其中包含显示行为的代码。我是否使用 jQuery 或 javascript 文档对象对我可用的东西都没有关系。我总是看到来自这些电话中的任何一个的结果不一致。我必须相信其他使用过这种技术的人也遇到过这种情况。

我不需要显示我的 iFrame 调整大小或辅助 iFrame 的代码，因为它们按预期运行。我要展示的主要代码是在 ajax 事件和 dom 操作完成后如何从搜索表单开始调整大小过程：

```
function resizeMe() {
    var iFrameHelper = $("#iFrameHelper");
    iFrameHelper.attr("src", iFrameHelper.attr("data-url") + "?height=" + $(document).height() + "&cacheb=" + Math.random());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T15:05:32.047

所以我最终弄清楚了问题所在。$(document).height() 部分工作正常。问题全在于时机。ajax 调用完成后我在页面中呈现的项目包含导致请求从页面发出以获取图像的图像。图像上没有设置默认高度，因此在我更改页面内 iFrame 上的 src 属性之前没有正确计算高度，这会启动父级的调整大小。

我最终做的只是默认我所有图像的高度，因为它们共享相同的尺寸。我责怪 iFrame 而不是我自己。2天因为这么简单的原因拔掉我的头发。

我希望这可以帮助其他人在未来。

# actionscript-3 - 自定义事件调度

> ID：10738603
> 
> 赞同：1
> 
> 时间：2012-05-24T13:37:13.653
> 
> 标签：actionscript-3, event-handling, dispatchevent, custom-event

我正在尝试从子类中触发一个事件，我有 3 个类；事件处理程序、主类、子类

**事件处理程序.as**

```
 public class EventHandler extends Event
{
    public static const TEST_EVENT:String = "Test"; 

    public function EventHandler($type:String, $params:Object, $bubbles:Boolean = false, $cancelable:Boolean = false)
    {
        super($type,$params, $bubbles, $cancelable);
        this.params = $params;
    }

    public override function clone():Event
    {
        return new EventHandler(type, this.params, bubbles, cancelable);
    }

} 
```

**主类.as**

```
 public function MainClass()
    {
        addEventListener(EventHandler.TEST_EVENT, testFunc);

    }

    private function testFunc(e:EventHandler){
        trace("OK");
    } 
```

**子类.as**

```
private function CustomFunction(event:MouseEvent):void {
        dispatchEvent(new EventHandler(EventHandler.TEST_EVENT,customObject));

    } 
```

我得到 VerifyError: Error #1063: flash.events::Event() 我的架构师出了什么问题？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T13:49:56.673

定义一个自定义事件，例如：

```
 package com.mysite.events 
  {
     import flash.events.Event;

    public class PendingEvent extends Event 
    {
    public var payload:Object = {};
    public static const CONTENT_COMPLETE:String = "contentComplete";

    public function PendingEvent(type:String, bubbles:Boolean=false, cancelable:Boolean=false) 
    { 
        super(type, bubbles, cancelable);

    } 

    public override function clone():Event 
    { 
        return new PendingEvent(type, bubbles, cancelable);
    } 

}

} 
```

其他地方调度如：

```
 var event:PendingEvent = new PendingEvent(PendingEvent.CONTENT_COMPLETE);
    event.payload.someStuff = "stuff";
    event.payload.moreStuff = "moreStuff"
    dispatchEvent(event); 
```

然后在别的地方听：

```
 this.component.addEventListener(PendingEvent.CONTENT_COMPLETE, componentContentComplete);

    private function componentContentComplete(event:PendingEvent):void 
    {
                    // remove listener
        this.component.removeEventListener(PendingEvent.CONTENT_COMPLETE, componentContentComplete);

                    // do something useful with payload
        var payload:Object = event.payload;
                    trace(payload.someStuff); // stuff
                    trace(payload.moreStuff); // moreStuff
    } 
```

**编辑：**

很明显，您不会将 an`Object`用于您的有效负载，而是创建另一个您选择的类型化类并在该对象上设置道具，但您明白了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T13:58:44.063

像这样删除`$params`： `super($type,$params, $bubbles, $cancelable);`

```
public class EventHandler extends Event
{
    public static const TEST_EVENT:String = "Test"; 

    public function EventHandler($type:String, $params:Object, $bubbles:Boolean = false, $cancelable:Boolean = false)
    {
        super($type, $bubbles, $cancelable);
        this.params = $params;
    }

    public var params:Object;

    public override function clone():Event
    {
        return new EventHandler(type, this.params, bubbles, cancelable);
    }

} 
```

# xml - Scala - 将 XML 文字转换为没有换行符的字符串

> ID：10738607
> 
> 赞同：0
> 
> 时间：2012-05-24T13:37:26.487
> 
> 标签：xml, scala

为了更清楚地说明 XML 结构，我将把每个标签写在一行中。

不幸的是，结果包含（转换为文本后）不止一行，因此断言失败。我需要将整个结果作为没有换行符的单行

```
val row = <row>
            <fromSubsystem>02</fromSubsystem>
            <toSubsystem>01</toSubsystem>
            <action>E013</action>
            <comment>return to customer</comment>
          </row>

println("==> " + row.text)  

assert(row.text == "0201E013return to customer")   

==> 
             02
             01
             E013
             return to customer
Exception in thread "main" java.lang.AssertionError: assertion failed
    at scala.Predef$.assert(Predef.scala:146) 
```

在此先感谢您提供优雅的解决方案！

庞戈

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T14:15:38.137

```
row.child.map(_.text.trim).mkString 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T13:55:10.177

你为什么不使用正则表达式？

```
assert(row.text.replaceAll("\n[ ]+","") == "0201E013") 

//or just "\n +" in replaceAll 
```

如果您不喜欢正则表达式并且不关心标签文本中的空格，您可以执行以下操作：

```
assert(row.text.filterNot(Set(' ','\n')) == "0201E013") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T14:17:30.960

将您的断言更改为：

```
assert(row.text.split('\n').map(_.trim).mkString == "0201E013return to customer") 
```

# java - “注释处理器支持的源版本'RELEASE_5'......”是什么意思？

> ID：10738609
> 
> 赞同：1
> 
> 时间：2012-05-24T13:37:33.540
> 
> 标签：java, maven, annotations, sonatype, plexus

这是什么意思以及如何删除它（重新格式化以提高可读性）？

```
[INFO] Compiling 30 source files to ...\target\test-classes
[INFO] -------------------------------------------------------------
[ERROR] COMPILATION ERROR :
[INFO] -------------------------------------------------------------
[ERROR] Failure executing javac, but could not parse the error:
warning: Supported source version 'RELEASE_5' from annotation processor 
'org.sonatype.guice.bean.scanners.index.QualifiedIndexAPT6' 
less than -source '1.6'
warning: No processor claimed any of these annotations: 
org.junit.Ignore,org.junit.Test,org.junit.BeforeClass 
```

当`org.sonatype.sisu:sisu-inject-plexus:2.1.1`是项目依赖项之一时会发生这种情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T19:47:09.573

升级到以下版本后，第一个警告已删除`sisu-inject-plexus`：

```
<dependency>
  <groupId>org.sonatype.sisu</groupId>
  <artifactId>sisu-inject-plexus</artifactId>
  <version>2.3.0</version>
</dependency> 
```

[使用javac](http://docs.oracle.com/javase/7/docs/technotes/tools/solaris/javac.html)`-Xlint:-processing`编译器标志后的第二个：

```
<plugin>
  <artifactId>maven-compiler-plugin</artifactId>
  <executions>
    <execution>
      <id>default-testCompile</id>
      <configuration>
        <compilerArgument>-Xlint:-processing</compilerArgument>
      </configuration>
    </execution>
  <execution>
</plugin> 
```

否则，我们可以使用

```
<compilerArgument>-proc:none</compilerArgument> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T13:41:20.470

这里有两个不相关的警告。首先，有一个类声称它想查看注解，但它只理解 Java 5 语法，并且您已经在命令行中指定了 Java 6 语法；其次，您在其中有一些 JUnit 注释，但没有看到它们。

它们听起来都相当安全，可以忽略，但不幸的是，无论试图在`javac`这里运行什么（是`apt`吗？）都无法理解输出。

# jasper-reports - iReport 在 x 轴上显示太多标签

> ID：10738612
> 
> 赞同：3
> 
> 时间：2012-05-24T13:37:44.037
> 
> 标签：jasper-reports, ireport

早上好！我在使用 Jaspersoft iReport 4.5.0 时遇到问题，希望能得到一些帮助。基本上，当我显示 xy 折线图时，它会尝试在 x 轴上为每个数据点添加标签。我有近 200 个数据点，所以即使我调整刻度标签的旋转或其他什么，它最终看起来也只是一条实线。

我知道对这个问题的一般反应是改用时间序列图。这通常会起作用，但在我的例子中，我使用的是多轴图表，其中相反轴是条形图。由于条形图没有时间序列变化，iReport 不允许我将条形图与时间序列图混合，迫使我使用 xy 折线图。

有什么办法可以让我的蛋糕也吃吗？某种方式我可以过滤掉一些标签？或者可能限制可以显示的标签数量，分布在 x 轴上？我还没有在互联网上的任何地方看到明确的答案！

提前致谢！- 伊恩

编辑：这是我要修改的多轴图表之一的 jrxml：

```
<multiAxisChart>
    <chart evaluationTime="Report" hyperlinkType="LocalAnchor">
        <reportElement x="42" y="441" width="440" height="292"/>
        <chartTitle position="Top">
            <titleExpression><![CDATA["CICS Elapsed"]]></titleExpression>
        </chartTitle>
        <chartSubtitle/>
        <chartLegend/>
        <anchorNameExpression><![CDATA["CICS Elapsed Small"]]></anchorNameExpression>
        <hyperlinkAnchorExpression><![CDATA["CICS Elapsed Big"]]></hyperlinkAnchorExpression>
        <hyperlinkTooltipExpression><![CDATA["Click to Enlarge"]]></hyperlinkTooltipExpression>
    </chart>
    <multiAxisPlot>
        <plot/>
        <axis position="leftOrTop">
            <lineChart>
                <chart>
                    <reportElement x="0" y="0" width="0" height="0" backcolor="#FFFFFF"/>
                    <chartTitle position="Top" color="#000000">
                        <titleExpression><![CDATA["CICS Elapsed"]]></titleExpression>
                    </chartTitle>
                    <chartSubtitle color="#000000"/>
                    <chartLegend textColor="#000000" backgroundColor="#FFFFFF"/>
                </chart>
                <categoryDataset>
                    <dataset>
                        <datasetRun subDataset="wmprod_cics"/>
                    </dataset>
                    <categorySeries>
                        <seriesExpression><![CDATA["Cpu Time"]]></seriesExpression>
                        <categoryExpression><![CDATA[$F{TIMESTAMP}]]></categoryExpression>
                        <valueExpression><![CDATA[$F{ELAPSTIME}]]></valueExpression>
                    </categorySeries>
                </categoryDataset>
                <linePlot isShowShapes="false">
                    <plot/>
                    <categoryAxisLabelExpression><![CDATA["Date/Time"]]></categoryAxisLabelExpression>
                    <valueAxisLabelExpression><![CDATA["Avg Elapsed Time (ms)"]]></valueAxisLabelExpression>
                </linePlot>
            </lineChart>
        </axis>
        <axis position="rightOrBottom">
            <barChart>
                <chart>
                    <reportElement x="0" y="0" width="0" height="0" backcolor="#FFFFFF"/>
                    <chartTitle position="Top" color="#000000">
                        <titleExpression><![CDATA["CICS Elapsed"]]></titleExpression>
                    </chartTitle>
                    <chartSubtitle color="#000000"/>
                    <chartLegend textColor="#000000" backgroundColor="#FFFFFF"/>
                </chart>
                <categoryDataset>
                    <dataset>
                        <datasetRun subDataset="wmprod_cics"/>
                    </dataset>
                    <categorySeries>
                        <seriesExpression><![CDATA["Volume (transactions)"]]></seriesExpression>
                        <categoryExpression><![CDATA[$F{TIMESTAMP}]]></categoryExpression>
                        <valueExpression><![CDATA[$F{TRANSCOMPL}]]></valueExpression>
                    </categorySeries>
                </categoryDataset>
                <barPlot>
                    <plot/>
                    <itemLabel/>
                    <valueAxisLabelExpression><![CDATA["Volume (transactions)"]]></valueAxisLabelExpression>
                </barPlot>
            </barChart>
        </axis>
    </multiAxisPlot>
</multiAxisChart> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T16:00:47.873

我有同样的问题。我认为答案是这样的：

```
<chart>
  <reportElement x="0" y="0" width="802" height="215">
    <property name="net.sf.jasperreports.chart.domain.axis.tick.interval" value="1"/>
  </reportElement> 
```

根据需要设置刻度间隔。注意：我的图表是散点图。未经折线图测试。

# iphone - iPhone SDK - 在 UINavigationController 动画期间绘制到视图

> ID：10738617
> 
> 赞同：0
> 
> 时间：2012-05-24T13:37:54.870
> 
> 标签：iphone, objective-c, uinavigationcontroller

我目前有一个基于标准`UINavigationController`的 iPhone 应用程序，但我遇到了问题 - 我目前需要一些建议。

我有一个被推送到堆栈的视图，并且`ViewDidLoad`我正在以编程方式添加**96 个子视图**（是的，我想这很多）。这在大多数情况下都可以正常工作，但是当视图被推送时，动画是生涩的。我想这是因为它同时绘制子视图，但我不确定。

有人对这个有经验么？**有没有办法在视图动画之前添加这 96 个子视图？**

干杯，布雷特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T14:26:43.780

您可以在“ **initWithNibName** ”中调用您的子视图创建者函数或视图控制器的任何**初始化**函数，否则，在推送该视图控制器之前调用您的函数。所以[@Rick van der Linde](https://stackoverflow.com/users/739302/rick-van-der-linde)是对的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T13:47:29.923

你切把它放在loadView中？或者您可以创建一个名为“addSubViews”的方法，在其中添加 96 个子视图（wtf btw），然后执行以下操作：

```
NextViewController * nextViewController = [[NextViewController alloc] init];
[nextViewController addSubViews];
[[self navigationController] pushViewController:nextViewController animated:YES];
[nextViewController release]; // Or not, if you are using ARC ;) 
```

# android - 从无根设备中的资产文件夹复制数据库

> ID：10738623
> 
> 赞同：19
> 
> 时间：2012-05-24T13:38:08.007
> 
> 标签：android, android-emulator, android-ndk, rooted-device

我正在尝试将数据库从资产文件夹复制到设备。此代码在模拟器和根设备上运行良好。我只想知道它是否会在无根设备上产生任何问题，或者它会起作用。

```
private void StoreDatabase() {
    File DbFile = new File(
            "data/data/packagename/DBname.sqlite");
    if (DbFile.exists()) {
        System.out.println("file already exist ,No need to Create");
    } else {
        try {
            DbFile.createNewFile();
            System.out.println("File Created successfully");
            InputStream is = this.getAssets().open("DBname.sqlite");
            FileOutputStream fos = new FileOutputStream(DbFile);
            byte[] buffer = new byte[1024];
            int length = 0;
            while ((length = is.read(buffer)) > 0) {
                fos.write(buffer, 0, length);
            }
            System.out.println("File succesfully placed on sdcard");
            // Close the streams
            fos.flush();
            fos.close();
            is.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-24T13:59:01.710

这肯定适用于所有设备和模拟器，无需root。

```
/**
 * Copies your database from your local assets-folder to the just created
 * empty database in the system folder, from where it can be accessed and
 * handled. This is done by transfering bytestream.
 * */
private void copyDataBase(String dbname) throws IOException {
    // Open your local db as the input stream
    InputStream myInput = myContext.getAssets().open(dbname);
    // Path to the just created empty db
    File outFileName = myContext.getDatabasePath(dbname);
    // Open the empty db as the output stream
    OutputStream myOutput = new FileOutputStream(outFileName);
    // transfer bytes from the inputfile to the outputfile
    byte[] buffer = new byte[1024];
    int length;
    while ((length = myInput.read(buffer)) > 0) {
        myOutput.write(buffer, 0, length);
    }
    // Close the streams
    myOutput.flush();
    myOutput.close();
    myInput.close();
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-03-15T08:32:00.203

```
 /**
 * Copy database file from assets folder inside the apk to the system database path.
 * @param context Context
 * @param databaseName Database file name inside assets folder
 * @param overwrite True to rewrite on the database if exists
 * @return True if the database have copied successfully or if the database already exists without overwrite, false otherwise.
 */
private boolean copyDatabaseFromAssets(Context context, String databaseName , boolean overwrite)  {

    File outputFile = context.getDatabasePath(databaseName);
    if (outputFile.exists() && !overwrite) {
        return true;
    }

    outputFile = context.getDatabasePath(databaseName + ".temp");
    outputFile.getParentFile().mkdirs();

    try {
        InputStream inputStream = context.getAssets().open(databaseName);
        OutputStream outputStream = new FileOutputStream(outputFile);

        // transfer bytes from the input stream into the output stream
        byte[] buffer = new byte[1024];
        int length;
        while ((length = inputStream.read(buffer)) > 0) {
            outputStream.write(buffer, 0, length);
        }

        // Close the streams
        outputStream.flush();
        outputStream.close();
        inputStream.close();

        outputFile.renameTo(context.getDatabasePath(databaseName));

    } catch (IOException e) {
        if (outputFile.exists()) {
            outputFile.delete();
        }
        return false;
    }

    return true;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T13:48:14.593

我不确定，但这适用于我测试过的每台设备。我偷了这个方法（从这里的某个地方），并将它用于备份和恢复：

```
public static void movedb(File srcdb, File destdb)
{
    try 
    {
        if (Environment.getExternalStorageDirectory().canWrite()) 
        {                 
            if (srcdb.exists()) 
            {
                FileChannel src = new FileInputStream(srcdb).getChannel();
                FileChannel dst = new FileOutputStream(destdb).getChannel();
                dst.transferFrom(src, 0, src.size());
                src.close();
                dst.close();                    
            }
            else
            {
                //ERROR: "Database file references are incorrect"                    
            }
        }
        else
        {
           //ERROR: "Cannot write to file"
        }
    }
    catch (Exception e) 
    {
        //ERROR: e.getMessage()
    }
} 
```

然后我只是通过调用来备份它：

```
movedb(this, getDatabasePath(getDbName()), new File(Environment.getExternalStorageDirectory(), getDatabaseBackupPath())); 
```

Where`getDatabasePath()`和`getDatabaseBackupPath()`只是字符串值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-12T10:57:39.333

```
private void copyDataBase(Context context) throws IOException {

    //Log.i(TAG, "Opening Asset...");
    // Open your local db as the input stream
    InputStream myInput = context.getAssets().open(DBHelper.DATABASE_NAME);

   // Log.i(TAG, "Getting db path...");
    // Path to the just created empty db
    File dbFile = getDatabasePath(DBHelper.DATABASE_NAME);

    if (!dbFile.exists()) {
        SQLiteDatabase checkDB = context.openOrCreateDatabase(DBHelper.DATABASE_NAME, context.MODE_PRIVATE, null);
        if (checkDB != null) {
            checkDB.close();
        }
    }

    //Log.i(TAG, "Getting output stream...");
    // Open the empty db as the output stream
    OutputStream myOutput = new FileOutputStream(dbFile);

  //  Log.i(TAG, "Writing data...");
    // transfer bytes from the inputfile to the outputfile
    byte[] buffer = new byte[1024];
    int length;
    while ((length = myInput.read(buffer)) > 0) {
        myOutput.write(buffer, 0, length);
    }
    // Close the streams
    myOutput.flush();
    myOutput.close();
    myInput.close();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-08T05:19:33.827

这适用于 Kotlin。

```
assets.open("sqlite_db_in_assets.db")
      .copyTo(getDatabasePath("sqlite_db_in_device.db").outputStream()) 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2019-08-13T11:40:21.833

虽然在技术上可行，但我不认为复制（复制到或复制）潜在的实时数据库文件是一个好主意。

# xcode - 尝试在 Jenkins slave 上使用工作区编译 XCode 项目

> ID：10738624
> 
> 赞同：0
> 
> 时间：2012-05-24T13:38:14.217
> 
> 标签：xcode, continuous-integration, jenkins, continuous-deployment

我有一个 Jenkins slave 构建单个 xcode 项目，工作完美。

但是，我得到了一个带有工作区的项目，其中一些 3rd 方文件在工作区的根目录中设置了一个 gitmodule，然后[按照此处所述](https://github.com/RestKit/RestKit/wiki/Installing-RestKit-in-Xcode-4.x)导入到项目中。

当 Jenkins 编译并到达`AppDelegate.h`它时，尝试从库中导入文件时会抛出错误。

```
fatal error: 'RestKit/Restkit.h' file not found #import <RestKit/Restkit.h> 
```

我通过指向工作区来编译项目。但是，它现在在到达包装阶段时会失败。我没有看到工作区中创建的构建目录。

```
** BUILD SUCCEEDED **

Cannot remove *.ipa files from a non-existing directory:
 /Users/leon/Work/projects/wearehive/flatstr/build/Flatstr/dev/jenkins/workspace/Snug-debuOLD/build/Debug-iphoneos

 Packaging IPA
 FATAL: null
 java.lang.NullPointerException
at au.com.rayh.XCodeBuilder.perform(XCodeBuilder.java:421)
at hudson.tasks.BuildStepMonitor$1.perform(BuildStepMonitor.java:19)
at hudson.model.AbstractBuild$AbstractRunner.perform(AbstractBuild.java:705)
at hudson.model.Build$RunnerImpl.build(Build.java:178)
at hudson.model.Build$RunnerImpl.doRun(Build.java:139)
at hudson.model.AbstractBuild$AbstractRunner.run(AbstractBuild.java:475)
at hudson.model.Run.run(Run.java:1434)
at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:46)
at hudson.model.ResourceController.execute(ResourceController.java:88)
at hudson.model.Executor.run(Executor.java:239) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T08:30:12.990

您的项目=>构建设置=>标题搜索路径，添加以下路径：

```
"$(SOURCE_ROOT)/RestKit/Build/Headers" 
```

确保选中它们前面的复选框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T12:49:02.200

我使用 xcode 插件并将其用于`SYMROOT`值而不是空间来解决问题。

`${workspace}/build/[app name]/Build/Products`

# sql-server-2008r2-express - 运行 SQL Server 2008 R2 Express 时出现与网络相关或特定于实例的错误

> ID：10738626
> 
> 赞同：1
> 
> 时间：2012-05-24T13:38:15.020
> 
> 标签：sql-server-2008r2-express

运行 Web 项目时遇到问题

错误 ：

> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定实例）**

然后我在 SQL Server 配置管理器中发现 SQL Server Express 停止了

当我尝试运行 SQL Server Express 时，出现错误

错误 ：

> 请求失败或服务没有及时响应。有关详细信息，请参阅事件日志或其他适用的错误日志

当我打开 services.msc 以启动 SQL Server（`SQLEXPRESS`实例）时，会发生此错误

错误：

> Window 无法在本地计算机上启动 sql server (SQLEXPRESS)。有关更多信息，请查看系统事件日志。如果这是非 Microsoft 服务，请联系服务供应商，并参阅服务特定错误代码 3417

有什么办法可以解决我的问题？？？

# php - PHP 将 $_FILES 和 $_POST 作为参数传递给函数

> ID：10738627
> 
> 赞同：4
> 
> 时间：2012-05-24T13:38:19.490
> 
> 标签：php, file, upload

我在网上搜索了一个使用 ajax 上传 PHP 图像的代码。我在下面找到了代码。问题是我改变了一些东西（小调整）以使其在我的服务器上工作。最初它只是一个处理从表单发布的数据的 php 页面（不是类或函数）。我把它变成了课堂然后发挥作用。我现在正在关注 OOP。我认为在从过程到 OOP 的转换中做事的最好方法是将 $_FILES 和 $_POST 传递给一个方法并在内部处理它们。我认为这行不通。看看这个例子，请就如何前进提出建议。

```
function uploadImageChosen($_FILES, $_POST){
            $path = "../uploads/images/";
            $valid_formats = array("jpg", "png", "gif", "bmp");
            $connectionInstance = new ConnectionClass();
            $connectionInstance->connectToDatabase();
            $imgName;
            $imgURL;
            $imgSize;
            $imgDir = $_POST['directory'];
            if(isset($_POST) and $_SERVER['REQUEST_METHOD'] == "POST")
            {
                $name = $_FILES['photoimg']['name'];
                $imgSize = $_FILES['photoimg']['size'];
                if(strlen($name))
                {
                    list($txt, $ext) = explode(".", $name);
                    if(in_array($ext,$valid_formats))
                    {
                        if($size<(1024*1024))
                        {
                            $imgName = time().substr(str_replace(" ", "_", $txt), 5).".".$ext;
                            $tmp = $_FILES['photoimg']['tmp_name'];
                            if(move_uploaded_file($tmp, $path.$imgName))
                            {
                                $imgURL = $path.$imgName;
                                $connectionInstance->query("INSERT INTO imagesupload(id, title, url, size, directory) VALUES (null, '$imgName','$imgURL', '$imgSize', '$imgDir')");
                                //echo "<img src='uploads/".$imgName."'  class='preview'>";
                            }
                            else{
                                echo "failed";
                            }
                        }else{
                            echo "Image file size max 1 MB";                    
                        }
                    }else{
                        echo "Invalid file format..";   
                    }
            }else{
                echo "Please select image..!";
            }           

          }//end of if      

        }//end of function 
```

至于调用类函数的页面，这里是：

```
<?php
    require_once("../classes/UploadImages.php");
    $uploadInstance = new UploadImages();
    $uploadInstance->uploadImageChosen($_FILES, $_POST);
    //header("LOCATION:portfolio.php");
?> 
```

非常感谢你 ：）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T13:51:18.557

`$_POST`并且`$_FILES`是超全局数组，它们总是可用的，在函数或方法中重新定义它们是一个坏主意。

你可以这样做：

```
$uploadInstance->uploadImageChosen(); 
```

..

```
function uploadImageChosen(){
           $path = "../uploads/images/";
           $valid_formats = array("jpg", "png", "gif", "bmp");
...
$name = $_FILES['photoimg']['name'];
... 
```

或者，如果您需要本地范围内的副本，请执行以下操作：

```
$uploadInstance->uploadImageChosen($_FILES, $_POST); 
```

..

```
function uploadImageChosen($files, $post){
               $path = "../uploads/images/";
               $valid_formats = array("jpg", "png", "gif", "bmp");
...
$name = $files['photoimg']['name'];
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T13:41:51.400

尝试`$_SERVER['REQUEST_METHOD'] == "POST"`从 IF 语句中删除，看看它做了什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T14:17:29.940

上面的脚本有一个在错误日志中没有检测到的问题。当我实例化连接类时，首先出现了这个问题。我应该创建另一个变量来接收打开连接以进行查询工作这已解决并且数据现在存在于数据库中。第二个问题是 JPG 格式不在可接受的类型数组中，因此我将其与 jpg（变体）一起添加。这使得文件实际上传输到上传文件夹。谢谢大家的支持，给您带来的不便敬请谅解：）

# asp.net - 子域 web.config 文件可以清除继承的设置吗？

> ID：10738629
> 
> 赞同：0
> 
> 时间：2012-05-24T13:38:27.577
> 
> 标签：asp.net, asp.net-mvc, web-config, web-hosting, shared-hosting

我必须将 MVC 应用程序部署到托管在 GoDaddy 上的子域中。根域是一个 DotNetNuke 站点。当我尝试在子域中访问我的应用程序时，我收到此错误：

```
CS0246: The type or namespace name 'DotNetNuke' could not be found 
(are you missing a using directive or an assembly reference?) 
```

我认为这是因为我的应用程序继承了根 DNN 应用程序的设置，但我的 bin 目录没有 DNN 二进制文件，因此 ASP.NET 找不到它需要的内容。

所以问题是：如何在我的 web.config 中指定我**不**希望它从根目录继承 DNN 设置？

（顺便说一句，我为此打电话给 GoDaddy，他们的建议是“不要将 DNN 站点放在根目录上，因为这个确切的原因”。他们提出了一些解决方法，但没有一个像我*想做*的那样方便，并且有一天，当我根本无法控制根站点时会发生这种情况，所以我真的很想知道如何做到这一点。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T23:17:32.427

Go Daddy 不支持在您的主机帐户根目录中安装 DotNetNuke。您可以查看此帮助指南以获取更多信息：http: [//support.godaddy.com/help/article/1463/can-i-install-dotnetnuke-in-my-root-folder](http://support.godaddy.com/help/article/1463/can-i-install-dotnetnuke-in-my-root-folder)

# php - 根据选择框中的选择显示文本

> ID：10738632
> 
> 赞同：0
> 
> 时间：2012-05-24T13:38:32.640
> 
> 标签：php, javascript, jquery

如何运行 PHP 查询，该查询仅在从选择下拉列表中选择一个选项时运行，而且每次选择不同选项时都会刷新？

例如，这里是 HTML：

```
<html>
<head>
<script type="text/javascript" src="/hr/includes/jui/js/jquery-ui-1.8.20.min.js"</script>
<script>
$(document).ready(function() {
    $('#select_box_1').change(function() {
       if($(this).val() != '')
        $.ajax({
            type: 'get',
            url: 'balance1.php',
            data: 'value' + $(this).val() ,
            success: function(data) {
                $("#result-div").html(data);
            }
        });
     }
    });
});
</script>
</head>

<body>

<form name="form" id="form" method="post" action="validate.php">

<div id="select_box_1">
<select name="drop_down">
<option value="">Please choose</option>
<option value="1">John</option>
<option value="2">Bob</option>
<option value="3">Mike</option>
</select>
</div>

<div id="result-div">

</div>

<input type="submit">

</form>

</body>

</html> 
```

balance1.php

```
<?php 
print "GET Value:".$_GET['value'];
?> 
```

我想根据选择的值在选择框下方运行一个查询 - 例如，当没有选择任何内容时，就没有运行查询。如果用户从列表中选择 John，则查询在 id=1 的位置运行并显示 John 的结果。如果用户随后选择 Bob，查询应该在 id=2 的地方再次运行，等等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T19:15:35.323

这是有效的：

```
[...]
<select name="drop_down" id="sel_something">
[...]

$('#sel_something').change(function() {
    if($(this).val() != '') {
        $.ajax({
            type: 'get',
            url: 'someurl',
            data: { 'value' : $(this).val() } ,
            success: function(data) {
                // do your stuff
            }
        });
    }
}); 
```

我给 select 一个 id 并修改了数据行（并添加了一些语法更正）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T13:51:54.973

我建议你使用 jquery.ajax，它比你想象的要强大得多！下面是使其工作的示例代码

```
$('#select_box_1').change(function() {
   if($(this).val() != '')
    $.ajax({
        type: 'get',
        url: 'URL To Your PHP Script',
        data: 'value' + $(this).val() ,
        success: function(data) {
            $("#result-div").html(data);
        }
    });
 }
}); 
```

**编辑：** `$_GET['value']`将值保存在您的 php 脚本中，您可以使用该值查询数据库并将结果或输出返回给 ajax 调用，然后您可以简单地在 html 视图中填充数据

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T14:05:10.157

如果您每次在下拉列表中更改值时都重新加载页面，那么您可以在 SELECT 标记中使用 onchange 属性。

更改值时重新加载页面并在 URL 中设置 GET 变量。如果此 GET 变量为 NULL，则不处理 PHP 代码……否则相应处理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T13:50:16.347

尝试这样的事情：

```
$("#select_box_1").change(function(){

    if ($(this).val() != "") {

      $.ajax({
         type: "POST",
         url: "foo.php",
         data: "id=" + $("#select_box_1").val(),
         success: function(msg){
           $("#result").text(msg);
         }
      });

    }

}); 
```

# asp.net-mvc - Visual Studio 调试器未通知视图中错误的模型属性名称？

> ID：10738633
> 
> 赞同：0
> 
> 时间：2012-05-24T13:38:36.753
> 
> 标签：asp.net-mvc, asp.net-mvc-3, visual-studio-2010

为了解释我的问题，一个例子更好。

我有一个 ASP.NET MVC 3 控制器操作，它返回一个带有对象作为模型的视图。此对象包含视图使用的一些业务属性，例如联系人列表。

如果我在视图中调用我的对象的属性（来自模型。），然后我更改了这个属性名称，Visual Studio 的调试器什么也没说。但是，这个应该提醒我，我试图在视图中加载一个不存在的属性！

此外，当我编译这个项目时，它会通过，直到我尝试渲染视图！

有没有办法从视觉工作室检查？

提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T13:56:14.940

您可以通过将以下内容放入您的 ASP.NET MVC 视图来[启用编译](http://www.stefanprodan.eu/2011/05/compile-views-in-asp-net-mvc-3-with-visual-studio/)`.csproj`：

```
<MvcBuildViews>true</MvcBuildViews> 
```

这样你会得到一个编译时错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T14:02:27.073

您可以在模式下编译`Release`以突出显示所有交易破坏者。编译需要更长的时间，但可以捕获所有内容，一直到视图中的属性，甚至将您带到导致问题的视图中的行。

# java - 使用 For 循环从 ArrayList 中删除数据

> ID：10738634
> 
> 赞同：20
> 
> 时间：2012-05-24T13:38:38.833
> 
> 标签：java, android, arraylist

我遇到了一个奇怪的问题。我以为这会花费我几分钟，但我现在挣扎了几个小时......这是我得到的：

```
for (int i = 0; i < size; i++){
    if (data.get(i).getCaption().contains("_Hardi")){
        data.remove(i);
    }
} 
```

在ArrayList`data`中`ArrayList.` 我得到了一些字符串（总共 14 个左右），其中 9 个在其中得到了名称 _Hardi。

使用上面的代码，我想删除它们。如果我`replace data.remove(i);`用 a`System.out.println`那么它会打印出 9 次，这很好，因为 _Hardi 在 ArrayList 中出现了 9 次。

但是当我使用`data.remove(i);`then 它不会删除所有 9 个，而只会删除一些。我做了一些测试，我也看到了这个：

当我将字符串重命名为： Hardi1 Hardi2 Hardi3 Hardi4 Hardi5 Hardi6

然后它只删除偶数（1、3、5 等）。他一直在跳过1，但不知道为什么。

如何解决这个问题？或者也许是另一种删除它们的方法？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-05-24T13:48:30.563

这里的问题是您正在**从 0 迭代到 size 并且在循环内您正在删除 items**。删除项目将减少列表的大小，当您尝试访问大于有效大小（删除项目后的大小）的索引时，列表将失败。

**有两种方法可以做到这一点。**

如果您不想处理索引，请**使用迭代器**删除。

```
for (Iterator<Object> it = data.iterator(); it.hasNext();) {
if (it.next().getCaption().contains("_Hardi")) {
    it.remove();
}
} 
```

否则，**从最后删除。**

```
for (int i = size-1; i >= 0; i--){
    if (data.get(i).getCaption().contains("_Hardi")){
            data.remove(i);
    }
 } 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-05-24T13:41:22.743

迭代列表时不应从列表中删除项目。相反，使用`Iterator.remove()`如下：

```
for (Iterator<Object> it = list.iterator(); it.hasNext();) {
    if ( condition is true ) {
        it.remove();
    }
} 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-05-24T13:50:06.767

每次删除一个项目时，都会更改它前面的项目的索引（因此，当您删除 list[1] 时，list[2] 变为 list[1]，因此会跳过。

这是一个非常简单的解决方法：（倒数而不是倒数）

```
 for(int i = list.size() - 1; i>=0; i--)
{
  if(condition...)
   list.remove(i);
} 

```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-06-11T11:56:42.623

这是因为当您从列表中删除一个元素时，列表的元素会向上移动。因此，如果您删除第一个元素，即索引 0 处的元素，则索引 1 处的元素将移动到索引 0，但您的循环计数器将在每次迭代中不断增加。因此，您没有获得更新的第 0 个索引元素，而是获得了第 1 个索引元素。因此，每次从列表中删除一个元素时，只需将计数器减一即可。

您可以使用以下代码使其正常工作：

```
for (int i = 0; i < data.size(); i++){
    if (data.get(i).getCaption().contains("_Hardi")){
        data.remove(i);
        i--;
    }
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-05-24T13:48:06.863

如果你仔细考虑的话，这是完全有道理的。假设你有一个清单`[A, B, C]`。第一次通过循环，`i == 0`。您看到元素`A`，然后将其删除，因此列表现在为`[B, C]`，元素 0 为`B`。现在你在循环结束时递增`i`，所以你正在查看`list[1]`which is `C`。

一种解决方案是`i`在您删除项目时递减，以便它“取消”随后的递增。正如 matt b 上面指出的，一个更好的解决方案是使用`Iterator<T>`具有内置`remove()`函数的 an 。

一般来说，当遇到这样的问题时，拿出一张纸并假装你是计算机是个好主意——遍历循环的每一步，边走边写下所有变量。那将使“跳过”清楚。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-12-22T13:56:30.257

我不明白为什么这个解决方案对大多数人来说是最好的。

```
for (Iterator<Object> it = data.iterator(); it.hasNext();) {
    if (it.next().getCaption().contains("_Hardi")) {
        it.remove();
    }
} 
```

第三个参数是空的，因为已经移到下一行。此外`it.next()`，不仅递增循环的变量，而且还用于获取数据。对我来说，使用`for`循环具有误导性。为什么你不使用`while`？

```
Iterator<Object> it = data.iterator();
while (it.hasNext()) {
    Object obj = it.next();
    if (obj.getCaption().contains("_Hardi")) {
            it.remove();
    }
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-08-31T21:50:17.500

除了现有答案之外，您还可以使用带有条件增量的常规 while 循环：

```
int i = 0;
while (i < data.size()) {
    if (data.get(i).getCaption().contains("_Hardi"))
        data.remove(i);
    else i++;
} 
```

请注意，`data.size()`必须每次在循环条件中调用，否则您最终会得到一个`IndexOutOfBoundsException`，因为删除的每个项目都会改变列表的原始大小。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-05-24T13:48:40.307

```
for (Iterator<Object> it = data.iterator(); it.hasNext();) {
    if ( it.getCaption().contains("_Hardi")) {
        it.remove(); // performance is low O(n)
    }
} 
```

如果您的删除操作在列表中需要很多。最好使用**LinkedList**，它可以*提供更好的性能 Big* `O(1)`（大致）。

ArrayList 的性能在哪里`O(n)`（大致）。因此对删除操作的影响非常大。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2012-05-24T13:41:10.033

因为一旦你删除一个值，你的索引就不再好

此外，您将无法访问，`size`因为如果您删除一个元素，则大小会发生变化。

您可以使用 an`iterator`来实现。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2015-12-14T16:32:48.723

为时已晚，但它可能对某人有用。

```
Iterator<YourObject> itr = yourList.iterator();

// remove the objects from list
while (itr.hasNext())
{
    YourObject object = itr.next();
    if (Your Statement) // id == 0
    {
        itr.remove();
    }
} 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2012-05-24T13:40:42.590

发生这种情况是因为通过删除元素您修改了`ArrayList`.

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2017-02-28T03:11:47.983

有一种更简单的方法可以解决这个问题，而无需创建新的迭代器对象。这是概念。假设您的 arrayList 包含一个名称列表：

```
names = [James, Marshall, Susie, Audrey, Matt, Carl]; 
```

要从 Susie 中删除所有内容，只需获取 Susie 的索引并将其分配给一个新变量：

```
int location = names.indexOf(Susie);//index equals 2 
```

现在你有了索引，告诉 java 计算你想从 arrayList 中删除值的次数：

```
for (int i = 0; i < 3; i++) { //remove Susie through Carl
    names.remove(names.get(location));//remove the value at index 2
} 
```

每次循环值运行时，arrayList 的长度都会减少。由于您已经设置了索引值并且正在计算删除值的次数，因此您已经准备就绪。以下是每次通过后的输出示例：

```
 [2]
names = [James, Marshall, Susie, Audrey, Matt, Carl];//first pass to get index and i = 0
                           [2]
names = [James, Marshall, Audrey, Matt, Carl];//after first pass arrayList decreased and Audrey is now at index 2 and i = 1
                           [2]
names = [James, Marshall, Matt, Carl];//Matt is now at index 2 and i = 2
                           [2]
names = [James, Marshall, Carl];//Carl is now at index 3 and i = 3

names = [James, Marshall,]; //for loop ends 
```

以下是您的最终方法的一个片段：

```
public void remove_user(String name) {
   int location = names.indexOf(name); //assign the int value of name to location
   if (names.remove(name)==true) {
      for (int i = 0; i < 7; i++) {
         names.remove(names.get(location));
      }//end if
      print(name + " is no longer in the Group.");
}//end method 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2017-12-13T21:53:50.710

这是使用 Arraylist 时的常见问题，这是由于 Arraylist 的长度（大小）可以更改而发生的。删除时，大小也会发生变化；所以在第一次迭代之后，你的代码就乱套了。最好的建议是使用 Iterator 或从后面循环，但我会推荐 backword 循环，因为我认为它不那么复杂，并且它仍然适用于许多元素：

```
//Let's decrement!
for(int i = size-1; i >= 0; i--){
    if (data.get(i).getCaption().contains("_Hardi")){
        data.remove(i);
    }
 } 
```

仍然是您的旧代码，只是循环方式不同！

我希望这有帮助...

编码快乐！！！

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2016-09-09T08:01:51.573

```
import java.util.ArrayList;

public class IteratorSample {

    public static void main(String[] args) {
        // TODO Auto-generated method stub

        ArrayList<Integer> al = new ArrayList<Integer>();
        al.add(1);
        al.add(2);      
        al.add(3);
        al.add(4);

        System.out.println("before removal!!");
        displayList(al);

        for(int i = al.size()-1; i >= 0; i--){
            if(al.get(i)==4){
                al.remove(i);
            }
        }

        System.out.println("after removal!!");
        displayList(al);

    }

    private static void displayList(ArrayList<Integer> al) {
        for(int a:al){
            System.out.println(a);
        }
    }

} 
```

输出：

拆除前！！1 2 3 4

删除后！！1 2 3

# javascript - 在用户突出显示的文本周围放置标签？

> ID：10738635
> 
> 赞同：6
> 
> 时间：2012-05-24T13:38:42.337
> 
> 标签：javascript, jquery

我需要获取用户选择的 textarea 区域，然后在`<a>`其周围插入标签。

我用它来获取用户选择的区域：

```
var textComponent = document.getElementById('article');
var selectedText;

if (document.selection != undefined)
{
    textComponent.focus();
    var sel = document.selection.createRange();
    selectedText = sel.text;
}

// Mozilla version
else if (textComponent.selectionStart != undefined)
{
    var startPos = textComponent.selectionStart;
    var endPos = textComponent.selectionEnd;
    selectedText = textComponent.value.substring(startPos, endPos)
} 
```

现在，我知道我可以对用户选择的文本进行字符串搜索并在其周围插入一个标签，但是如果该用户选择的文本在文本中出现两次会发生什么情况。

> 你好，再见。

如果用户为他们想要的链接突出显示第二个“你”，那么字符串替换肯定会在“你”的每个实例周围放置一个标签。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T14:02:44.560

您可以为此使用我的[jQuery 插件](http://code.google.com/p/rangyinputs/)（[演示](http://rangyinputs.googlecode.com/svn/trunk/demos/textinputs_jquery.html)）：

```
$("#article").surroundSelectedText('<a href="foo.html">', "</a>"); 
```

或者，您可以使用[`getInputSelection()`](https://stackoverflow.com/questions/263743/how-to-get-caret-position-in-textarea/3373056#3373056)我在 Stack Overflow 上发布过几次的函数来获取所有主要浏览器中的选择开始和结束字符索引，然后在 textarea 上进行字符串替换`value`：

```
var sel = getInputSelection(textComponent);
var val = textComponent.value;
textComponent.value = val.slice(0, sel.start) +
                      '<a href="foo.html">' +
                      val.slice(sel.start, sel.end) +
                      "</a>" +
                      val.slice(sel.end); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T14:12:38.483

为什么要捕获选定的文本？您真正想要的是放入标签的开始/结束位置。

```
var textComponent = document.getElementById('article');
var selectedText;
var startPos;
var endPos;

// the easy way
if (textComponent.selectionStart != undefined)
{
    startPos = textComponent.selectionStart;
    endPos = textComponent.selectionEnd;
}
// the hard way
else if (document.selection != undefined)
{
    textComponent.focus();
    var sel = document.selection.createRange();
    var range = document.selection.createRange();
    var stored_range = range.duplicate();
    stored_range.moveToElementText(textComponent);
    stored_range.setEndPoint( 'EndToEnd', range );
    startPos = stored_range.text.length - range.text.length;
    endPos = startPos + range.text.length;
} 

// add in tags at startPos and endPos
var val = textComponent.value;
textComponent.value = val.substring(0, startPos) + "<a>" + val.substring(startPos, endPos) + "</a>" + val.substring(endPos); 
```

IE 代码从此[参考](http://the-stickman.com/web-development/javascript/finding-selection-cursor-position-in-a-textarea-in-internet-explorer/)修改。

**编辑：**注意 Tim Down 关于换行符的评论。另外，可能使用他的解决方案，因为它更好。

# android - 访问数据库或网络服务

> ID：10738638
> 
> 赞同：1
> 
> 时间：2012-05-24T13:39:09.503
> 
> 标签：android, database, web-services

我想访问在线 MySQL 数据库以检索和操作数据。我读到最好的方法是实现一个自己的 web 服务，它返回 XML，然后在 Android 中解析它，对吗？
有人有基础教程吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T14:09:34.497

因为你想访问一个拥有你的数据库和其他东西的远程服务器。你基本上有两个选择。

1 - ) 通过套接字等直接访问您的服务器。

2 - ) 或者创建一个将您的服务器连接到外部的网络服务。（即：Android客户端，iOS客户端等）

最佳实践是创建一个 Web 服务，然后在您的 Android 应用程序中使用它。

检查这些以在 Android 中使用 XML。

[http://www.ibm.com/developerworks/opensource/library/x-android/](http://www.ibm.com/developerworks/opensource/library/x-android/)

[http://www.warriorpoint.com/blog/2009/07/19/android-reading-using-and-working-with-xml-data-and-web-services-in-android/](http://www.warriorpoint.com/blog/2009/07/19/android-reading-using-and-working-with-xml-data-and-web-services-in-android/)

检查这些以在服务器端创建 Web 服务。（堆栈独立）

[http://davidwalsh.name/web-service-php-mysql-xml-json](http://davidwalsh.name/web-service-php-mysql-xml-json) (PHP)

[http://www.roseindia.net/webservices/buildingsimplewebservice.shtml](http://www.roseindia.net/webservices/buildingsimplewebservice.shtml) (Java)

[http://www.codeguru.com/csharp/csharp/cs_webservices/article.php/c19391/Creating-a-NET-Web-Service.htm](http://www.codeguru.com/csharp/csharp/cs_webservices/article.php/c19391/Creating-a-NET-Web-Service.htm) (.NET)

等等有很多堆栈来创建 Web 服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T23:05:48.767

同样，Webservice 是最好的方法。但是您必须根据从服务器检索的数据量以及事务需要与服务器同步的频率来做出决定。

Arvind 试图向您解释什么，如果数据量太大而无法通过 web 服务下载，那么您可能需要考虑一些将数据转换为 json 并将其发送到您的设备的中间层。原因是，如果您通过无线传输 1k 的肥皂响应，对于相同的响应，如果您通过 json 传输，它可能是 100k 或 200k 或 300k 取决于。这样您就可以节省网络传输成本，而且周转时间更快。

# c# - 缓存ServiceChannelFactory时如何避免ServiceChannel泄漏？

> ID：10738643
> 
> 赞同：1
> 
> 时间：2012-05-24T13:39:28.357
> 
> 标签：c#, wcf, caching

目前我缓存并在每次需要时`ServiceChannelFactory`创建一个新的。`ServiceChannel`我预计`ServiceChannels`垃圾收集器会处理它。但是，工厂会保留对每个通道的引用，以便在您调用时关闭通道`ServiceFactoryChannel.Close()`。这导致许多旧渠道一直活跃，直到一切都停止工作。

我怎样才能缓存工厂并且仍然让垃圾收集器处理我的频道？

我的代码如下所示：

```
public class ServiceChannel
{
    // Returns a ServiceChannel
    public static TService Get<TService>()
    {
        var factory = GetChannelFactory<TService>();
        string url = GetEndpoint<TService>();
        var endPoint = new EndpointAddress(url);
        return factory.CreateChannel(endPoint);
    }

    // Returns a ServiceChannelFactory, preferably from the cache
    public static ChannelFactory<TService> GetChannelFactory<TService>()
    {
        var cacheKey = string.Format("MyProduct.Library.ServiceChannel.GetChannelFactory<{0}>()", typeof(TService));
        var cache = HttpRuntime.Cache;
        var factory = cache[cacheKey] as ChannelFactory<TService>;
        if (factory == null)
        {
            factory = GetChannelFactoryUncached<TService>();
            cache.Insert(cacheKey, factory);
        }
        return factory;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T14:22:24.820

你可以使用像 Autofac/Unity/Ninject 这样的 IoC 容器，或者对于一个非常基本但快速的容器，使用 DynamoIOC。

设置容器时，对 ServiceChannelFactory 有一个引用。当您创建一个 IServiceChannel（到您的服务 IMyService）时，也要注册它。

但要小心，当您的 IServiceChannel.Faulted 事件被触发时，您需要关闭、处置并重新创建它，并将其添加回 IoC 容器中。这样，每当调用者需要访问您的服务时，它将处于非故障状态。

# php - 如何获取 Symfony2 中的所有帖子参数？

> ID：10738647
> 
> 赞同：31
> 
> 时间：2012-05-24T13:39:38.503
> 
> 标签：php, symfony

我想获取[symfony](http://symfony.com/)表单的所有发布参数。

我用了 ：

```
$all_parameter = $this->get('request')->getParameterHolder()->getAll(); 
```

我得到这个错误

```
Fatal error: Call to undefined method Symfony\Component\HttpFoundation\Request::getParameterHolder() in /Library/WebServer/Documents/Symfony/src/Uae/PortailBundle/Controller/NoteController.php on line 95 
```

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-05-24T14:08:47.587

```
$this->get('request')->request->all() 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-24T14:18:12.723

Symfony[请求对象](http://api.symfony.com/2.0/Symfony/Component/HttpFoundation/Request.html)有相当多的公共属性，代表请求的不同部分。描述它的最简单方法可能是向您展示代码`Request::initialize()`

```
/**
 * Sets the parameters for this request.
 *
 * This method also re-initializes all properties.
 *
 * @param array  $query      The GET parameters
 * @param array  $request    The POST parameters
 * @param array  $attributes The request attributes (parameters parsed from the PATH_INFO, ...)
 * @param array  $cookies    The COOKIE parameters
 * @param array  $files      The FILES parameters
 * @param array  $server     The SERVER parameters
 * @param string $content    The raw body data
 *
 * @api
 */
public function initialize(array $query = array(), array $request = array(), array $attributes = array(), array $cookies = array(), array $files = array(), array $server = array(), $content = null)
{
    $this->request = new ParameterBag($request);
    $this->query = new ParameterBag($query);
    $this->attributes = new ParameterBag($attributes);
    $this->cookies = new ParameterBag($cookies);
    $this->files = new FileBag($files);
    $this->server = new ServerBag($server);
    $this->headers = new HeaderBag($this->server->getHeaders());

    $this->content = $content;
    $this->languages = null;
    $this->charsets = null;
    $this->acceptableContentTypes = null;
    $this->pathInfo = null;
    $this->requestUri = null;
    $this->baseUrl = null;
    $this->basePath = null;
    $this->method = null;
    $this->format = null;
} 
```

因此，如您所见，`Request::$request`是一个`ParameterBag`POST 参数。

# java - 如何在一个按钮中对齐两个文本

> ID：10738648
> 
> 赞同：2
> 
> 时间：2012-05-24T13:39:39.717
> 
> 标签：java, android, textview, alignment

我是一名新的 android 开发人员，我知道使用 /n 在一个按钮中对齐两个文本，但不知道在一个按钮中对齐两个文本一个文本右对齐另一个左对齐请任何人帮助我并解决我的问题，因为我使用阿拉伯语（从右到左），所以我想以编程方式执行此操作，而不是通过 xml 设计。我需要将两个文本对齐在另一个下方，即顶部为英文文本，底部为阿拉伯文提前谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T14:26:46.780

使用以下代码：

```
Button  availableText = (Button)findViewById(R.id.request); 
            Spannable span =Spannable.Factory.getInstance().newSpannable(availableText.getText());
            span.setSpan(new AlignmentSpan.Standard(Alignment.ALIGN_NORMAL),0, 7, 
            Spannable.SPAN_EXCLUSIVE_EXCLUSIVE); 
            span.setSpan(new AlignmentSpan.Standard(Alignment.ALIGN_OPPOSITE),8, 
            span.length()-1, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE); 
            availableText.setText(span); 
```

* * *

假设您有一个在 XML 中定义的按钮，或者可以在代码中创建一个带有文本**“English\nArbi”的按钮。**

输出如下：

![按钮布局示例](../Images/c49c537eb7413d49de5432dc50e51412.png)

# jquery - 在 jquery 中附加一个带有 live() 的插件

> ID：10738665
> 
> 赞同：1
> 
> 时间：2012-05-24T13:40:49.847
> 
> 标签：jquery

我编写了一个 div ( `#div1`)，它有一个 form ( `#frm1`) 并附加了[formWizard](http://thecodemine.org/#_demoForm=first)插件。单击 div 外部的按钮时，会打开一个对话框，单击该按钮时会使用该按钮重新`#div1`加载`$('#leftMenu').load('MainLeftMenu.jsp');`

问题是`#div1`重新加载了新值，并且`formWizard`表单附带了相同的插件，但没有显示表单的输入框，就好像我检查了它们在各自位置的元素一样。

我想让这个工作，以便`#frm1`来自加载的新表单（）应该得到一个附加的 formWizard 插件。

所以，总而言之，我可以使用 live 将第三方插件附加到 DOM 元素吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T14:28:32.797

jQuery 的`.live`方法已被弃用（[`.on`](http://api.jquery.com/on/)从现在开始使用）。您是否考虑过在[`.load`](http://api.jquery.com/load/)方法的回调中激活新表单上的插件？

```
$("#leftMenu").load("MainLeftMenu.jsp", function(){
    // At this point, your new elements are in the DOM
    $("#frm1", this).formwizard();
}); 
```

# log4j - log4j SyslogAppender - TCP 支持？

> ID：10738667
> 
> 赞同：1
> 
> 时间：2012-05-24T13:40:55.323
> 
> 标签：log4j, syslog

log4j 中的当前 SyslogAppender 使用 UDP 将日志传输到 syslog 服务器。它可能存在丢失数据的风险。

是否已经存在任何定制的 TCPsyslogappender？或者可以用另一种方式来问这个问题：我们如何让 SyslogAppender 100% 免受数据丢失的影响。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T08:12:14.867

有[各种](http://www.rsyslog.com/tcp-syslog-rfc5424-log4j-appender/) [解决](http://markmail.org/message/2ylfsfyiqijes3wp)方案。

请注意，纯 TCP 并非 100% 不受数据丢失的影响，因为它可能会在套接字缓冲区中丢失。您需要使用专门为此设计的协议：RELP、HTTP 或向发送者回复 ACK 的协议。

# php - Cronjobs Plesk 10.2.0 不工作

> ID：10738668
> 
> 赞同：1
> 
> 时间：2012-05-24T13:40:59.410
> 
> 标签：php, cron, scheduled-tasks, plesk

目前我正在尝试让一个 cronjob 在 Parallels Plesk Panel 10.2.0 中工作。

我要运行的脚本位于子域上。

我在命令行中尝试了很多选项，但没有任何效果。

试过：

`/usr/bin/php /home/httpd/vhosts/subdomain.domain.com/httpdocs/file.php`

`/usr/bin/wget -O - -q http://www.subdomain.domain.com/file.php`

`/usr/curl http://subdomain.domain.com/controller/action`

`/var/www/vhosts/subdomain.domain.com/httpdocs/file.php`

`php /var/www/vhosts/subdomain.domain.com/httpdocs/file.php`

以上都不起作用。同样在`Send notification messages from scheduler to e-mail address`我填写我的电子邮件地址下的计划任务设置中，但我不会收到任何电子邮件。

请帮助我，谢谢！

**编辑**

我的设置`Access to the server over SSH`设置为`Forbidden`我不知道这是否是一个原因

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-18T22:56:01.480

如果您使用的是 Parallels，则需要以下 SHH 命令以允许完全访问权限，因为 cron 任务使用受限访问权限运行

> /usr/local/psa/bin/server_pref -u -crontab-secure-shell "/bin/sh"

并恢复访问权限

> /usr/local/psa/bin/server_pref -u -crontab-secure-shell ""

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T12:08:39.270

我已按照本教程进行操作，该教程为我在并行 plesk 中设置 cron 作业提供了积极的结果。

对我有用的句子是：

```
/usr/bin/php -f /var/www/vhosts/bonusgo.com/httpdocs/cron.php 
```

不要忘记在您的主机管理面板中设置 cron 作业消息/警报的电子邮件地址

检查以下网址：[在 plesk 中设置 Magento cron 作业](http://www.e-commercewebdesign.co.uk/blog/magento-tutorials/setting-up-a-cron-job-for-magento.php)

# entity-framework - 转换时我得到 LINQ to Entities Int32 ToInt32(System.String)

> ID：10738669
> 
> 赞同：2
> 
> 时间：2012-05-24T13:41:00.570
> 
> 标签：entity-framework, linq-to-sql

当 convert.i 尝试 int.Parse() 、 SqlFunction 和 EdmFunction 时，我得到 LINQ to Entities Int32 ToInt32(System.String) 但问题仍然存在。

例外：

```
System.NotSupportedException: LINQ to Entities does not recognize the method 'Int32 ToInt32(System.String)' method, and this method cannot be translated into a store expression 
```

代码：

```
try
    {
        ModelEntities me = new ModelEntities();
        var query = from p in me.Products
                    join c in me.ProductCategories
                    on Convert.ToInt32(p.CategoryId) equals c.CategoryId
                    select new
                    {
                        p.ProductTitle,
                        c.CategoryName
                    };
        rptProducts.DataSource = query;
        rptProducts.DataBind();
    }
    catch (Exception ex)
    {
        Response.Write(ex.Message);
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-24T13:48:42.887

您不能在 linq 查询中使用 Convert.ToInt32 。Linq 有自己的语法，不识别外部方法。

您必须将要查找的变量提取到 C# 中，对其进行转换，然后将其用作另一个查询中的变量。或者，如果您有权访问数据库，则可以将两个 categoryID 都设为整数。类似的字段应该属于同一类型是有道理的。

希望有帮助！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-24T13:55:31.143

我建议将 c.CategoryId 转换为这样的字符串

```
 var query = from p in me.Products
             from c in me.ProductCategories
             let categoryId = me.ProductCategories.Take(1).Select(x => c.CategoryId).Cast<string>().FirstOrDefault()
             where p.CategoryId == categoryId 
             select new
             {
               p.ProductTitle,
               c.CategoryName
             }; 
```

# c# - 限制某些用户的文件访问

> ID：10738673
> 
> 赞同：0
> 
> 时间：2012-05-24T13:41:13.227
> 
> 标签：c#, authentication, iis-7, web-config, authorization

我有一个站点，用户使用表单身份验证登录该站点，我想在该站点中将特定文件夹中的文件的访问权限限制为某些用户。

因此，例如，`dir/foo`用户 1 可以访问文件夹，但用户 2 或用户 3 不能访问文件夹，用户 2 可以访问文件夹，但用户 1 或用户 3 不能访问文件夹`dir/bar`。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T13:46:15.913

然后用户角色在 web.config 中设置位置

```
<location path="foo">
    <system.web>
        <authorization>
            <allow roles="fooUsers"/>
            <deny users="*"/>
        </authorization>
    </system.web>
</location> 
```

或者为每个创建的文件夹添加一个新的 web.config 到文件夹根目录

```
<?xml version="1.0"?>
<configuration>
    <system.web>
        <authorization>
            <allow roles="folderUsers"/>
            <deny users="*" />              
        </authorization>
    </system.web>
</configuration> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T13:47:53.913

检查 web.config 的[<location>](http://msdn.microsoft.com/en-us/library/ms178692.aspx)元素

# android - 设置动画时出现 ClassCastException

> ID：10738676
> 
> 赞同：0
> 
> 时间：2012-05-24T13:41:25.070
> 
> 标签：android, android-animation, classcastexception

我在我的开发人员文档中收到此错误，我不知道为什么。我在这里用我的几部手机测试过，没有问题。

```
private Animation slideLeftIn;
private Animation slideLeftOut;
private Animation slideRightIn;
private Animation slideRightOut;

              private void swipeInit() {

                    viewFlipper = (ecm2.android.ContentViewFlipper) findViewById(R.id.statusFlipper);
                    slideLeftIn = AnimationUtils.loadAnimation(this, R.anim.slide_left_in);
// line 2366        slideLeftOut = AnimationUtils.loadAnimation(this, R.anim.slide_left_out); //error
                    slideRightIn = AnimationUtils.loadAnimation(this, R.anim.slide_right_in);
                    slideRightOut = AnimationUtils.loadAnimation(this, R.anim.slide_right_out);
} 
```

日志错误

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{ecm2.android/ecm2.android.MainActivity}: java.lang.ClassCastException: android.widget.ViewFlipper
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1833)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1854)
at android.app.ActivityThread.access$1500(ActivityThread.java:135)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1041)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:150)
at android.app.ActivityThread.main(ActivityThread.java:4333)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.ClassCastException: android.widget.ViewFlipper
at ecm2.android.MainActivity.swipeInit(MainActivity.java:2366)
at ecm2.android.MainActivity.onCreate(MainActivity.java:837)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1072)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1797) 
```

日志说它在第 2366 行，它正在设置其中一个动画，但在此之前它做得很好，所以我不确定这里的问题

动画xml

```
<set xmlns:android="http://schemas.android.com/apk/res/android">
<translate android:fromXDelta="0" android:toXDelta="-100%p" android:duration="300"/> 
```

这一切都始于我改用自定义 viewflipper 以解决一个 android 错误。我实际上并没有在其中做任何事情，只是尝试在它中捕获异常，`onDetachedFromWindow`因为我在使用的所有东西中都调用了 super

编辑：

ContentViewFlipper 类

```
public class ContentViewFlipper extends ViewFlipper {
//class is used to try to prevent force closes on certain phone where the onDetachFromWindow would be 
//called when its not suppose to, this is an android bug

public ContentViewFlipper(Context context) {
    super(context);
}

public ContentViewFlipper( Context context, AttributeSet attrs ) {
      super( context, attrs );
   }

@Override
protected void onDetachedFromWindow() {
      try {
         super.onDetachedFromWindow();
      }
      catch( Exception e ) {
          stopFlipping();
      }
   }
} 
```

viewFlipper 声明

```
private ContentViewFlipper viewFlipper; 
```

XML

```
<ecm2.android.ContentViewFlipper
    android:id="@+id/statusFlipper"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        android:id="@+id/incLayout"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_marginBottom="40dp"
        android:orientation="vertical" >

        <ListView
            android:id="@+id/lvIncidents"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="50dp"
            android:divider="@drawable/divider"
            android:dividerHeight="2dip"
            android:visibility="visible" >
        </ListView>
    </LinearLayout>

    <LinearLayout
        android:id="@+id/statusLayout"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" android:layout_marginBottom="40dp">

        <ListView
            android:id="@+id/lvStatus"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:choiceMode="singleChoice"
            android:divider="@drawable/divider"
            android:dividerHeight="2dip"
            android:visibility="visible" android:layout_marginTop="50dp">
        </ListView>

    </LinearLayout>

    <LinearLayout
        android:id="@+id/dlLayout"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" android:layout_marginBottom="40dp">

        <ListView
            android:id="@+id/lvDistList"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:divider="@drawable/divider"
            android:dividerHeight="2dip"
            android:visibility="visible" android:layout_marginTop="50dp">
        </ListView>

    </LinearLayout>

    <LinearLayout
        android:id="@+id/emNotesLayout"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" android:layout_marginBottom="40dp">

        <ListView
            android:id="@+id/lvEmNotes"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" android:layout_marginTop="50dp">
        </ListView>

    </LinearLayout>

    <LinearLayout
        android:id="@+id/stCalenLayout"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" android:layout_marginBottom="40dp">

        <ListView
            android:id="@+id/lvStCalendar"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" android:layout_marginTop="50dp">
        </ListView>

    </LinearLayout>

</ecm2.android.ContentViewFlipper> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T14:08:34.480

正如异常所说的错误发生 cast `android.widget.ViewFlipper`，我很确定该`viewFlipper = ...`行的任一侧都有错误的类型。

`viewFlipper`变量是 an`android.widget.ViewFlipper`并且布局中的控件是 an`ecm2.android.ContentViewFlipper`并且不能转换为，或者`android.widget.ViewFlipper`布局中的控件是 an`android.widget.ViewFlipper`不能转换为`ecm2.android.ContentViewFlipper`。

在为该行设置断点后，在调试模式下单步执行代码时，错误真正发生在哪一`viewFlipper = ...`行？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T13:44:59.577

我猜可能与行号有些混淆，并且您的对象 viewFlipper 被定义为 ViewFlipper viewFlipper，如果这不是后裔，当您从 ecm2.android.ContentViewFlipper 投射它时可能会出现问题。

# c# - 调整大小并将控件保持在三分之一

> ID：10738677
> 
> 赞同：2
> 
> 时间：2012-05-24T13:41:32.853
> 
> 标签：c#, wpf, xaml, resize

是否可以让控件在窗口调整大小时自动将空间分成三份？在代码中很容易做到，但如果可能的话，我想直接在 xaml 中设置参数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T13:44:05.657

使用网格控件。它占用了任何可用的空间。你可以通过做得到三分之二（假设你想要三列）

```
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinitions Width="*"/>
        <ColumnDefinitions Width="*"/>
        <ColumnDefinitions Width="*"/>
    </Grid.ColumnDefinitions>
    <Button Grid.Column="0"/>
    <Button Grid.Column="1"/>
    <Button Grid.Column="2"/>
</Grid> 
```

# mysql - mysql 的 CakePHP 限制是 20 没有我设置它。如何取消此限制？

> ID：10738678
> 
> 赞同：1
> 
> 时间：2012-05-24T13:41:33.667
> 
> 标签：mysql, cakephp, limit

我有一个带有分页的 mysql 调用，如下所示：

```
$this->paginate['limit'] = 400;
$this->paginate['Word']= array('contain'=>"");
$wording = $this->paginate('Word'); 
```

结果是：

```
SELECT `Word`.`id`, `Word`.`special`, FROM `words` AS `Word` WHERE `Word`.`writing_translation_id` = 197 LIMIT 20 
```

所以这个 20 的限制是从某个地方出现的，我找不到在哪里。我检查了控制器和模型，但找不到任何类似的东西。如您所见，我无法将特定限制设置为 400 来覆盖它；

问题出在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T13:48:19.810

试试 $this->paginate['Word] = array('contain' => '', 'limit' => 400);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-30T17:22:46.570

虽然上面的答案是正确的，但范围非常有限。当返回值超过 400 时会发生什么？将值设置为 999999999？这是不好的编程习惯。我们正在使用可以在纳秒内执行查询、操作数据和执行计算的机器。因此，我们应该在可能的情况下保持极高的精度。这绝对是其中一种情况。

这个问题的一个非常简单的解决方案是，如果已经发出“查看全部”请求（可能通过 $_GET 参数传递），则以与分页查询相同的条件运行快速 find->('count')，并将限制设置为此值。

# perl - 使用 Parse::RecDescent 进行解析

> ID：10738684
> 
> 赞同：1
> 
> 时间：2012-05-24T13:41:54.303
> 
> 标签：perl, yacc, lex

我无法让解析器正确返回我想要的结果。现在我刚开始解析一个基本的字符串，但我最终想要获得完整的 ACL。我借用了一些我在网上找到的为 Cisco ASA 执行此操作的代码，但他的场景与我的略有不同，所以我无法使用该代码。

最终我希望能够匹配一些字符串，如下所示：

```
permit ip any 1.2.0.0 0.0.255.255
permit ip host 1.2.3.4 1.2.3.4 0.0.0.31
deny   ip 138.145.211.0 0.0.0.255 any log-input
etc... 
```

这是代码：

## 解析器.pm

```
package AccessList::Parser;

use 5.008008;
use strict;
use warnings;
use Carp;
use Parse::RecDescent;

our $VERSION = '0.05';

sub new {
    my ($class) = @_;
    my $self = { PARSER => undef, };
    bless $self, $class;
    $self->_init();
    return $self;
}

sub _init {
    my ($self) = @_;
    $self->{PARSER} = Parse::RecDescent->new( $self->_grammar() );
}

sub parse {
    my ( $self, $string ) = @_;
    defined ($string) or confess "blank line received";
    my $tree = $self->{PARSER}->acl_action($string);
    defined($tree) or confess "unrecognized line\n";
    return $tree;
}

sub _grammar {
    my ($self) = @_;

    my $grammar = q{
<autotree>

acl_action : "permit" | "deny"
acl_protocol :
        PROTOCOL EOL
    |   <error>

PROTOCOL :
        /\d+/ | "ah" | "eigrp" | "esp" | "gre" | "icmp" | "icmp6" | "igmp" 
    | "igrp" | "ip" | "ipinip" | "ipsec" | "nos" | "ospf" | "pcp" 
    | "pim" | "pptp" | "snp" | "tcp" | "udp"

EOL :
        /$/ 
};

    return $grammar;
}

1; 
```

## 我的测试：parse.t

```
use strict;
use warnings;
use Scalar::Util 'blessed';
use Test::More tests => 2;
use AccessList::Parser;

my $parser = AccessList::Parser->new();

ok( defined($parser), "constructor" );

my $string;
my $tree;
my $actual;
my $expected;

#
# Access list 1
#

$string = q{permit ip};
$tree = $parser->parse($string);
$actual = visit($tree);
$expected = {
    'acl_action'   => 'permit',
    'acl_protocol' => 'ip',
};

is_deeply($actual, $expected, "whatever");

#
# Finished tests
#

sub visit {
    my ($node) = @_;

    my $Rule_To_Key_Map = {
        "acl_action"              => 1,
        "acl_protocol"            => 1
    };

    my $parent_key;
    my $result;

    # set s of explored vertices
    my %seen;

    #stack is all neighbors of s
    my @stack;
    push @stack, [ $node, $parent_key ];

    my $key;

    while (@stack) {

        my $rec = pop @stack;

        $node       = $rec->[0];
        $parent_key = $rec->[1];    #undef for root

        next if ( $seen{$node}++ );

        my $rule_id = ref($node);

        if ( exists( $Rule_To_Key_Map->{$rule_id} ) ) {
            $parent_key = $rule_id;
        }

        foreach my $key ( keys %$node ) {
            next if ( $key eq "EOL" );
            my $next = $node->{$key};
            if ( blessed($next) ) {
                if ( exists( $next->{__VALUE__} ) ) {
                    #print ref($node), " ", ref($next), " ", $next->{__VALUE__},"\n";
                    my $rule  = ref($node);
                    my $token = $next->{__VALUE__};
                    $result->{$parent_key} = $token;
                    #print $rule, " ", $result->{$rule}, "\n";
                }
                push @stack, [ $next, $parent_key ];
                #push @stack, $next;
            }
        }
    }
    return $result;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T13:50:57.640

你忘了在你的问题中包含一个问题，但看起来你的问题是你正在调用`acl_action`你的解析的根规则，但`acl_action`只匹配终端`accept`或`deny`. 您想编写一个匹配整行输入的规则，然后调用该规则。

# c++ - 原子类型和线程

> ID：10738685
> 
> 赞同：0
> 
> 时间：2012-05-24T13:42:01.140
> 
> 标签：c++, multithreading, mutex, atomic

这是本主题之后的下一步：[修改线程中的数据](https://stackoverflow.com/questions/10737625/modifying-data-in-threads)

```
class Nginx_sender
{
    private:
        std::atomic_int data;
        boost::mutex mMutex;
   void SendMessage(const std::string &msg)
   {
       mMutex.lock();
       data++;
       mMutex.unlock();

       std::cout << "DATA: " << data << std::endl;
   }

   void NewThreadFunction()
   {
      while(true) {
        mMutex.lock();
         std::cout << data;
        mMutex.unlock();

        boost::this_thread::sleep(boost::posix_time::milliseconds(200));
      }
   }
};
int main()
{
   Nginx_sender *NginxSenderHandle;
   boost::thread sender(boost::bind(&Nginx_sender::NewThreadFunction, &NginxSenderHandle));
   // ...
} 
```

在`NewThreadFunction`数据中始终为 0 并且`SendMessage`每次我调用时都会更改`SendMessage`。那么，使用这个的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T13:47:01.350

你为什么将`Nginx_sender **`（双指针）传递给`boost::bind`？这似乎是错误的，并且可以解释为什么您的线程似乎在对象的第二个副本而不是主线程上运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T13:50:07.350

从要绑定的第二个参数中删除 &。您已经有一个指向该对象的指针，这就是您可能尝试使用的。其次，指针未初始化，这也可能是您问题的根源。请注意，您必须确保对象在线程加入之前保持有效。

```
int main()
{
   Nginx_sender *NginxSenderHandle = new Nginx_sender  ;
   boost::thread sender(boost::bind(&Nginx_sender::NewThreadFunction, NginxSenderHandle));
   // ...
} 
```

# django - Django：在测试用例中获取cookie

> ID：10738689
> 
> 赞同：10
> 
> 时间：2012-05-24T13:42:13.230
> 
> 标签：django, testing, cookies, testcase

我有一个使用`response.set_cookie`方法设置 cookie 的视图。我想测试 cookie 是否设置在`TestCase`.

根据[docs](https://docs.djangoproject.com/en/1.3/topics/testing/#django.test.client.Client.cookies)，cookie 应该可以在客户端对象中访问，但`client.cookies.items`返回一个空列表。cookie 已在浏览器中正确设置。

有任何想法吗？

编辑：添加测试用例

```
>>> response = self.client.get(url)
>>> self.client.cookies.items()
[] 
```

最后一条语句返回一个空列表。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-25T11:35:25.090

您需要使用响应的客户端实例：

```
response = self.client.get(url)
response.client.cookies.items() 
```

# linux - 如何从目录复制内容而不是符号链接？

> ID：10738690
> 
> 赞同：50
> 
> 时间：2012-05-24T13:42:14.323
> 
> 标签：linux

在目录上`cp -rvf dir .`复制符号链接而不是实际内容。src 被复制到`module/hal/`

```
.
|-- comm
|   `-- alchemist.c
|-- module
|   `-- hal
|       `-- src
|           `-- comm -> ../comm
`-- src
    `-- comm -> ../comm 
```

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-05-24T13:44:18.853

来自`cp(1)`：

```
 -L, --dereference
          always follow symbolic links in SOURCE 
```

# design-patterns - 我该如何重构这个不幸的部分类？

> ID：10738692
> 
> 赞同：2
> 
> 时间：2012-05-24T13:42:41.513
> 
> 标签：design-patterns, refactoring, partial-classes

我已经开始使用 Linq2Sql 数据访问层，它有一个“God Class”部分类，其中另一个部分是生成的 EntitySet。这个分部类做了各种各样的事情，比如将自己序列化为 Json，进行数据库调用和各种实用功能，以及定义许多方便的属性和方法来与它“分部”的模型进行交互。

这样做的副作用是无法序列化，以及“God Class”反模式的所有其他问题。

拆分这些类以获得更好的关注点分离的良好设计模式是什么？我想强调易于重构，因为这个类遍布整个应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T13:47:51.713

与大多数遗留代码的重构一样，我建议引入一个中间适配器类（请参阅[适配器模式](http://en.wikipedia.org/wiki/Adapter_pattern)），该类开始时仅代表旧功能。然后随着新代码的引入，包装器可以开始将工作委托给新代码。直到最终，可以完全移除包装器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T13:48:11.640

另外，我想说你应该尽可能地编写测试（单元或集成）来发现/验证类的各个部分的功能，然后当你重构时，你会确保你没有破坏任何功能因为您将有一组回归测试可以依靠。

# ipad - 在方向更改时在 web 视图中调整 youtube 视频的大小

> ID：10738710
> 
> 赞同：2
> 
> 时间：2012-05-24T13:44:25.423
> 
> 标签：ipad, uiwebview, youtube, orientation

我有一个不占用全屏的网络视图。我将它的 url 设置为 youtube 视频以在网络视图区域中播放视频。当我更改设备的方向时，视图会调整大小，但内容不会。如果我将比例页面设置为适合 Web 视图上的标志，它会正确更改方向，但无论方向如何，右侧和底部的视频周围总是有空白区域。

如何让视频填充 Web 视图，并在不浪费填充的情况下通过方向更改调整大小。或者，如何让视频像在 iPhone 上一样全屏播放（这对我来说是一个可行的选择，跳过布局问题）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T16:41:03.323

I read this tutorial and was able to solve the problem. [http://webdesignerwall.com/tutorials/css-elastic-videos](http://webdesignerwall.com/tutorials/css-elastic-videos)

basically you can set the size of the containing item to one thing for portrait and another for landscape.

Also set your object embed code to have a height width of 100% instead of a fixed width.

This is my html:

```
<span class="youtube">
    <object type="application/x-shockwave-flash" id="ytPlayer" style="visibility: visible;" allowscriptaccess="always">
    </object>
</span> 
```

This is my javascript:

```
var ytswf = document.getElementById('ytPlayer');
var videoID = 'Nky9omXFZD4';
ytswf.outerHTML = "<object height=\"100%\" width=\"100%\" type=\"application/x-shockwave-flash\" data=\"http://www.youtube.com/v/" + videoID + "&amp;enablejsapi=1&amp;playerapiid=ytplayerObj&amp;rel=0&amp;fs=1&amp;autoplay=0&amp;egm=0\" id=\"ytPlayer\" style=\"visibility: visible;\" ><param name=\"allowFullScreen\" value=\"True\" /><param name=\"allowScriptAccess\" value=\"always\" /></object>"; 
```

This is my css:

```
.youtube{width:432px; height:245px;}
@media only screen and (orientation:portrait)
{
   .youtube{width:702px; height:398px;}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T11:48:37.090

我使用以下代码，它适用于我

```
 // css
    // You can add your own width and height values or insert this values using stringWithFormat
    NSString *css = @"<style type=\"text/css\">\
    .youtube{width:320px; height:363px;}\
    @media only screen and (orientation:portrait) { \
    .youtube{width:320px; height:363px;}\
    }\
    \
    @media only screen and (orientation:landscape) {\
    .youtube{width:480px; height:203px;}\
    }\
    </style>\
    ";

    // different format of urls for iOS 5 and iOS 6
    NSString *src = ([[[UIDevice currentDevice] systemVersion] compare:@"6" options:NSNumericSearch] == NSOrderedAscending)
    ? @"http://www.youtube.com/watch?v=%@?autoplay=1"        //  iOS  5
    : @"http://www.youtube.com/v/%@?autoplay=1";             //  iOS  6

    // inserting css in <head> and inserting src
    NSString *youTubeVideoHTML =  [NSString stringWithFormat:
                                   (@"<html><head>%@</head>\
                                    <body style=\"margin:0\">\
                                    <embed class=\"youtube\" id=\"yt\" src=\"%@\" type=\"application/x-shockwave-flash\" \
                                    ></embed>\
                                    </body></html>") , css , src  ];
    // setting YouTube video ID
    finalHtml = [NSString stringWithFormat: youTubeVideoHTML , videoID ];

    [self.webView loadHTMLString:finalHtml baseURL:nil]; 
```

# asp.net-mvc-3 - EF-code-first多对多相关对象生成两个不同的SQL表（MVC3）

> ID：10738711
> 
> 赞同：1
> 
> 时间：2012-05-24T13:44:39.407
> 
> 标签：asp.net-mvc-3, sql-server-2008, entity-framework, many-to-many

我已经阅读[了这篇很棒的问答，](https://stackoverflow.com/questions/7050404/create-code-first-many-to-many-with-additional-fields-in-association-table)并尝试制作类似的东西。我的模型类是：

```
public class Person
{
    public int PersonId { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }

    public ICollection<Course> CoursesAttending { get; set; }

    public Person()
    {
        this.CoursesAttending = new List<Course>();
    }
}

public class Course
{
    public int CourseId { get; set; }
    public string Title { get; set; }

    public ICollection<Person> Students { get; set; }
}

public class PersonCourse
{
    [Key, Column(Order = 0)]
    public int PersonID { get; set; }
    [Key, Column(Order = 1)]
    public int CourseID { get; set; }

    public virtual Person Student { get; set; }
    public virtual Course StudentCourse { get; set; }

    public int Mark { get; set; }
    public string Comment { get; set; }
}

public class SchoolContext : DbContext
{
    public DbSet<Course> Courses { get; set; }
    public DbSet<Person> People { get; set; }
    public DbSet<PersonCourse> PersonCourseLinks { get; set; }

    public SchoolContext()
        : base("ManyToManyTest")
    {
    }
} 
```

现在，我尝试添加一个新人并将新课程添加到他的课程列表中：

```
[HttpPost]
    public ActionResult Create(Person person)
    {
        if (ModelState.IsValid)
        {
            Course studentCourse;
            try
            {
                studentCourse = db.Courses.ToList<Course>().First();
            }
            catch
            {
                studentCourse = new Course() { Title = "HTML" };
            }

            person.CoursesAttending.Add(studentCourse);
            db.People.Add(person);
            db.SaveChanges();
            return RedirectToAction("Index");  
        }

        return View(person);
    } 
```

一切顺利，但是当我打开创建的数据库时，我看到 Person 和 Course 类有 2 个链接表 - PersonCourse（带有字段：PersonID、CourseID、Mark、Comment）和 PersonCourse1（带有字段：PersonID、CourseID），并且只有 PersonCourse1 有行（实际上是一行）。为什么会这样？我做错了什么吗？我希望只看到一个链接表 - PersonCourses 表......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T13:52:30.067

> 我希望只看到一个链接表 - PersonCourses 表

然后你必须通过导航属性将`PersonCourse`实体与`Person`实体链接起来。`CoursesAttending`必须对`Course`实体做同样的事情。

```
public class Person
{
    public int PersonId { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }

    public ICollection<PersonCourse> CoursesAttending { get; set; }

    public Person()
    {
        this.CoursesAttending = new List<PersonCourse>();
    }
}

public class Course
{
    public int CourseId { get; set; }
    public string Title { get; set; }

    public ICollection<PersonCourse> Students { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-08T10:46:59.537

就这样你现在为什么你的代码没有按预期工作：

```
public class PersonCourse
{
    [Key, Column(Order = 0)]
    public int PersonID { get; set; }
    [Key, Column(Order = 1)]
    public int CourseID { get; set; }

    public virtual Person Person { get; set; } // Follow built in conventions
    public virtual Course Course { get; set; }

    public int Mark { get; set; }
    public string Comment { get; set; }
} 
```

这现在遵循内置的实体框架约定

```
public int [ClassName][Id] or [Id] //Database Foreign Key column

and

public NavigationProperty [ClassName] // Navigation Property 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T13:57:46.710

为您的动名词表中的外键属性提供外键关联：

```
public class PersonCourse
{
    [Key, Column(Order = 0)]
    public int PersonID { get; set; }
    [Key, Column(Order = 1)]
    public int CourseID { get; set; }

    [ForeignKey("PersonID")]
    public virtual Person Student { get; set; }

    [ForeignKey("CourseID")]
    public virtual Course StudentCourse { get; set; }

    public int Mark { get; set; }
    public string Comment { get; set; }
} 
```

# css - 底部有插入角的 CSS3 文件选项卡

> ID：10738712
> 
> 赞同：-1
> 
> 时间：2012-05-24T13:44:47.393
> 
> 标签：css

![圆角图像](../Images/2f88811ddc6b1465e321cbf2fe1d16a0.png)

你好，

谁能帮我在css3中创建下面提到的设计。我已经尝试了以下属性，但仍然无法获得确切的设计

```
background:#c6d92d;
height: 5em;
width: 20em;
-moz-border-radius: 1em 4em 1em 4em;
border-radius: 5em 5em 1em 1em;
padding:20px; 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T13:49:37.560

您需要多个 div 才能实现这一目标。

您必须在黑色背景上放置两个其他 div（一个在左侧，一个在右侧），半径为白色。

这是我在我的网站上实现的效果：http: [//dystroy.org/re7210/](http://dystroy.org/re7210/)（单击“Toutes les recettes”）。

你这样做：

```
 _________
       /         \
div C |  div A    |  div B
     /            \ 
```

C 和 B 是白色 div，覆盖 100% 具有黑色背景的单元格（仅在边界半径不为 0 的情况下可见）。

在这种情况下，主要右侧的 div 具有以下 css ：

```
#divB {
background-color: white;
border-radius: 0 0 0 10px;
} 
```

这是我的最终效果：

![在此处输入图像描述](../Images/6b6927fe1e885cfa29978f218be9adda.png)

这是我的“divB”，它应该清楚地表明我在哪里有白色在黑色上，在哪里有黑色在白色上：

![在此处输入图像描述](../Images/83efb04dd3c0ea374537a6b8f762d8a5.png)

（如您所见，我发现使用表格更容易编写所有这些，但您可能可以不使用表格来完成）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T13:52:10.487

您正在寻找的属性是： `border-top-left-radius`和`border-top-right-radius`
[http://www.css3.info/preview/rounded-border/](http://www.css3.info/preview/rounded-border/)

# mysql - mysql查询需要帮助

> ID：10738713
> 
> 赞同：0
> 
> 时间：2012-05-24T13:44:49.140
> 
> 标签：mysql

在我的 MySQL 表中，我有一个名为`member_id`. 该列存储如下值：

```
1,2,3,4,5 
```

我需要通过使用来检查

```
SELECT * 
FROM member 
WHERE 5 IN member_id 
```

它运作不佳。请帮我编写一个 SQL 查询来找到合适的结果。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T13:48:24.570

使用此查询：

```
SELECT  *
FROM    mytable
WHERE   FIND_IN_SET(5, member_id) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T13:48:44.617

Quassnoi 的方法是 MySQL 的首选，但对于可移植的跨平台技术，您可以这样做：

```
select * 
from member 
where member_id = '5' 
    or member_id like '5,%' 
    or member_id like '%,5,%' 
    or member_id like '%,5' 
```

这假设您的数据中没有额外的空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T13:47:08.047

```
SELECT * FROM member WHERE member_id LIKE '%5%' 
```

# asp.net - 处理母版页上的按钮单击事件

> ID：10738720
> 
> 赞同：0
> 
> 时间：2012-05-24T13:45:24.737
> 
> 标签：asp.net, vb.net

我的母版页上有一个搜索字段和按钮。当用户输入搜索词并点击提交时，我希望搜索结果显示在内容页面中。

处理这个问题的最好、最合乎逻辑的方法是什么？

我想在我的内容页面上使用 FindControl 来查找按钮，然后以某种方式确定它是否已被点击……但我的逻辑很快就走下坡路了。

有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T13:53:02.930

也许处理这个问题的最简单方法是将表单用作获取而不是发布。如果您有问题，因为您正在使用回发事件。您可以使用在 URL 中具有搜索条件的查询字符串重定向回相同的位置。然后您只需要使用 Request("[SearchVariable]") 从 URL 中读取搜索条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T13:53:14.697

我以一种非常简单的方式处理这个问题：

单击按钮时，我只需将要搜索的信息设置到会话变量中，然后将页面重定向到我的搜索页面，该页面采用该值

```
 protected void btnSearch_OnClick(object sender, EventArgs e)
    {
            Session["General"] = txtSearch.Text;
            Response.Redirect("\\Search.aspx");
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T13:55:06.953

最简单的方法（可能不是最好的）可能是重定向到您的结果页面并将搜索词放在查询字符串中。然后，当您到达结果页面时，检查查询字符串并在内容页面上进行搜索。

[这里](https://stackoverflow.com/questions/6035730/asp-net-how-to-call-a-master-page-event-handler-from-content-page-event-handle)还有另一个帖子我在快速搜索后刚刚找到，但我不确定这是否是一个好方法

我很想知道你最终会怎么做。

# objective-c - NSGarbageCollector 的 disableCollectorForPointer: 调用是否由 enableCollectorForPointer: 调用平衡？

> ID：10738722
> 
> 赞同：2
> 
> 时间：2012-05-24T13:45:30.303
> 
> 标签：objective-c, cocoa, garbage-collection

**情况：**

我需要将 Objective-C 对象作为不透明引用 ( `void*`) 传递给异步 C API，稍后将传递给我提供的回调函数。回调然后调用对象上的方法。代码需要在存在垃圾收集的情况下工作，并且在我对 C API 的调用和我的回调被它调用的时间之间不得对对象进行 GC。

该类`NSGarbageCollector`提供[`disableCollectorForPointer:`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSGarbageCollector_class/Introduction/Introduction.html#//apple_ref/occ/instm/NSGarbageCollector/disableCollectorForPointer%3a)和`enableCollectorForPointer:`方法用于将对象标记和取消标记为不可收集的根。

**问题：**

我无法从文档和网络搜索中解决的问题是，`disableCollectorForPointer:`是否计算调用次数并且必须通过相同数量的`enableCollectorForPointer:`调用来平衡。如果*不是*这种情况，并且每个对象都被标记为 root，那么`enableCollectorForPointer:`在我的回调中调用可能会清除由其他代码设置的现有 root 标志，从而导致对象被收集，即使它不应该被收集！

我见过的替代方法是使用`CFRetain`-`CFRelease`这些在我自己的`NSObject`子类中使用安全吗？我以前只在免费桥接 CF 对象上使用过这些功能。

提供证据的答案加分。我看到`disableCollectorForPointer:`到处都是推荐的，没有提到这个安全方面。

**笔记：**

*   我必须支持垃圾收集，因为此代码将被 PrefPane 用于系统偏好设置。PrefPane 的 64 位版本*必须*使用垃圾回收。因此，不能选择使用 ARC 或手动引用计数。
*   C API 是 Apple 的（IOKit）之一，所以我也无法控制它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T14:02:43.103

我想我找到了答案。垃圾收集器的源代码似乎不可用，但声明接口的头文件`NSGarbageCollector`包含`NSGarbageCollector.h`以下`Foundation.framework`内容：

```
// references outside the heap, globals, and the stack, e.g. unscanned memory, malloc memory, must be tracked by the collector
- (void)disableCollectorForPointer:(void *)ptr;     // this pointer will not be collected...
- (void)enableCollectorForPointer:(void *)ptr;      // ...until this (stacking) call is made 
```

请注意**“堆叠”**注释 - 我认为这意味着调用确实被计算在内？更多证据仍然欢迎！

**更新：**

为了确定这一点，我决定使用一个小测试程序（**gcbridgetest.m**）来测试我的假设：

```
#import <Foundation/Foundation.h>

@interface PJGarbageCollectionTest : NSObject
@end

@implementation PJGarbageCollectionTest

- (id)init
{
    self = [super init];
    if (!self) return nil;
    NSLog(@"%@ -init", self);
    return self;
}

- (void)finalize
{
    NSLog(@"%@ -finalize", self);
    [super finalize];
}

@end

static void* ext_ptr1 = NULL;
static void* ext_ptr2 = NULL;

static void create()
{
    PJGarbageCollectionTest* test = [[PJGarbageCollectionTest alloc] init];
    [[NSGarbageCollector defaultCollector] disableCollectorForPointer:test];
    ext_ptr1 = test;
    [[NSGarbageCollector defaultCollector] disableCollectorForPointer:test];
    ext_ptr2 = test;
}

static void killref(void** ext_ptr)
{
    [[NSGarbageCollector defaultCollector] enableCollectorForPointer:*ext_ptr];
    *ext_ptr = NULL;
}

int main()
{
    NSLog(@"collector: %@", [NSGarbageCollector defaultCollector]);
    create();
    NSLog(@"Collecting with 2 external references");
    [[NSGarbageCollector defaultCollector] collectExhaustively];
    killref(&ext_ptr1);
    NSLog(@"Collecting with 1 external reference");
    [[NSGarbageCollector defaultCollector] collectExhaustively];
    killref(&ext_ptr2);
    NSLog(@"Collecting with 0 external references");
    [[NSGarbageCollector defaultCollector] collectExhaustively];
    return 0;
} 
```

编译`gcc -fobjc-gc-only -g -Wall -Wextra -ObjC gcbridgetest.m -framework Foundation -o gcbridgetest`并运行 as `./gcbridgetest`，它给出以下输出，确认 enable/disableCollectorForPointer: 调用确实被计算在内：

```
2012-06-12 16:08:08.278 gcbridgetest[29712:903] collector: <NSGarbageCollector: 0x20000f420>
2012-06-12 16:08:08.281 gcbridgetest[29712:903] <PJGarbageCollectionTest: 0x20000ee60> -init
2012-06-12 16:08:08.284 gcbridgetest[29712:903] Collecting with 2 external references
2012-06-12 16:08:08.285 gcbridgetest[29712:903] Collecting with 1 external reference
2012-06-12 16:08:08.286 gcbridgetest[29712:903] Collecting with 0 external references
2012-06-12 16:08:08.286 gcbridgetest[29712:903] <PJGarbageCollectionTest: 0x20000ee60> -finalize 
```

# c - 类型转换为未定义类型的结构

> ID：10738725
> 
> 赞同：2
> 
> 时间：2012-05-24T13:45:47.090
> 
> 标签：c, struct, io, rtos, micrium

基本上我正在从 RTOS 中的另一个线程获取数据。该数据是板上的一个引脚。所有 IO 端口都位于 iodefine.h 文件中的结构/联合中。例如，请参阅 Micrium 如何制作它：

```
struct st_portd {
union {
    unsigned char BYTE;
    struct {
        unsigned char B0:1;
        unsigned char B1:1;
        unsigned char B2:1;
        unsigned char B3:1;
        unsigned char B4:1;
        unsigned char B5:1;
        unsigned char B6:1;
        unsigned char B7:1;
    } BIT;
} DDR;
unsigned char wk0[31];
union {
    unsigned char BYTE;
    struct {
        unsigned char B0:1;
        unsigned char B1:1;
        unsigned char B2:1;
        unsigned char B3:1;
        unsigned char B4:1;
        unsigned char B5:1;
        unsigned char B6:1;
        unsigned char B7:1;
    } BIT;
} DR;
unsigned char wk1[31];
union {
    unsigned char BYTE;
    struct {
        unsigned char B0:1;
        unsigned char B1:1;
        unsigned char B2:1;
        unsigned char B3:1;
        unsigned char B4:1;
        unsigned char B5:1;
        unsigned char B6:1;
        unsigned char B7:1;
    } BIT;
} PORT;
unsigned char wk2[31];
union {
    unsigned char BYTE;
    struct {
        unsigned char B0:1;
        unsigned char B1:1;
        unsigned char B2:1;
        unsigned char B3:1;
        unsigned char B4:1;
        unsigned char B5:1;
        unsigned char B6:1;
        unsigned char B7:1;
    } BIT;
} ICR;
unsigned char wk3[95];
union {
    unsigned char BYTE;
    struct {
        unsigned char B0:1;
        unsigned char B1:1;
        unsigned char B2:1;
        unsigned char B3:1;
        unsigned char B4:1;
        unsigned char B5:1;
        unsigned char B6:1;
        unsigned char B7:1;
    } BIT;
} PCR;
}; 
```

如果你问我，这是非常聪明的方式。所以我将此引脚保存为结构中的 2 个字符，称为端口和引脚。

```
struct StepperMotor {
  CPU_INT32U ID;
  CPU_CHAR *EnablePort;
  CPU_CHAR EnablePin;
  CPU_CHAR *DirectionPort;
  CPU_CHAR DirectionPin;
  CPU_CHAR *PulsePort;
  CPU_CHAR PulsePin;
}; 
```

我想以这种方式使用引脚：

```
(struct st_portd)(steppermotor->PulsePort)->DR.BYTE ^= (1 << steppermotor->PulsePin); 
```

steppermotor 是结构。只有这样我才能得到一个错误说

> 在非结构或联合的情况下请求成员“DR”

我如何能够使用 steppermotor->PulsePort->DR.BYTE 而无需为其创建新变量？我希望有人能帮助我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T13:53:12.797

由于您正在转换指针，因此您应该将其转换为指向结构的*指针*，而不是结构本身，如下所示：

```
((struct st_portd*)steppermotor->PulsePort)->DR.BYTE ^= (1 << steppermotor->PulsePin); 
```

另请注意，您的括号放在错误的位置。

# git - git 登录预先过滤的历史子集

> ID：10738726
> 
> 赞同：3
> 
> 时间：2012-05-24T13:45:49.993
> 
> 标签：git, reporting, git-log

我想使用 git log 来显示我自己过滤的提交之间的一组差异。git log 确实具有内部历史过滤功能，它将（当与 --patch 标志一起使用时）显示历史中可能相距甚远的提交之间的差异。但是当我尝试将其与 --stdin 结合以传递提交列表时，我会获得这些提交的完整历史记录（实际上是它们所在分支的完整历史记录）。添加 -1 不会让我更接近所需的行为，它只会将我限制为一次提交。

我正在寻找一个更干净的版本（过去几周发生的所有提交的每日差异）：

```
git log --date=short --format='%H %ad' --since 2012-05-15 \
  |uniq -f1 |while read hash date
do
  if [[ -n $hash0 ]]; then
    echo ${date}..${date0}
    git diff $hash $hash0
  fi
  hash0=$hash
  date0=$date
done |less 
```

# r - R strsplit 与多个无序拆分参数？

> ID：10738729
> 
> 赞同：58
> 
> 时间：2012-05-24T13:45:51.403
> 
> 标签：r, split

给定一个字符串

```
test_1<-"abc def,ghi klm"
test_2<-"abc, def ghi klm" 
```

我想获得

```
"abc"
"def"
"ghi" 
```

但是，使用 strsplit，必须知道字符串中拆分值的顺序，因为 strsplit 使用第一个值进行第一次拆分，第二个进行第二次...然后循环使用。

但这不会：

```
strsplit(test_1, c(",", " "))
strsplit(test_2, c(" ", ","))

strsplit(test_2, split=c("[:punct:]","[:space:]"))[[1]] 
```

我希望在一步中找到任何拆分值的地方拆分字符串。

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-05-24T13:52:30.193

实际上`strsplit`也使用 grep 模式。（逗号是正则表达式元字符，而空格不是；因此需要对模式参数中的逗号进行双重转义。因此，使用 of`"\\s"`将更多地提高可读性而不是必要的）：

```
> strsplit(test_1, "\\, |\\,| ")  # three possibilities OR'ed
[[1]]
[1] "abc" "def" "ghi" "klm"

> strsplit(test_2, "\\, |\\,| ")
[[1]]
[1] "abc" "def" "ghi" "klm" 
```

如果不同时使用`\\,`and `\\,` （请注意 SO 未显示的额外空间），您将获得一些 character(0) 值。如果我写的话可能会更清楚：

```
> strsplit(test_2, "\\,\\s|\\,|\\s")
[[1]]
[1] "abc" "def" "ghi" "klm" 
```

@Fojtasek 非常正确：使用字符类通常可以简化任务，因为它创建了一个隐含的逻辑 OR：

```
> strsplit(test_2, "[, ]+")
[[1]]
[1] "abc" "def" "ghi" "klm"

> strsplit(test_1, "[, ]+")
[[1]]
[1] "abc" "def" "ghi" "klm" 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-24T13:57:00.847

如果你不喜欢正则表达式，你可以`strsplit()`多次调用：

```
strsplits <- function(x, splits, ...)
{
    for (split in splits)
    {
        x <- unlist(strsplit(x, split, ...))
    }
    return(x[!x == ""]) # Remove empty values
}

strsplits(test_1, c(" ", ","))
# "abc" "def" "ghi" "klm"
strsplits(test_2, c(" ", ","))
# "abc" "def" "ghi" "klm" 
```

**为添加的示例**更新****

 **```
strsplits(test_1, c("[[:punct:]]","[[:space:]]"))
# "abc" "def" "ghi" "klm"
strsplits(test_2, c("[[:punct:]]","[[:space:]]"))
# "abc" "def" "ghi" "klm" 
```

但是如果你要使用正则表达式，你不妨使用@DWin 的方法：

```
strsplit(test_1, "[[:punct:][:space:]]+")[[1]]
# "abc" "def" "ghi" "klm"
strsplit(test_2, "[[:punct:][:space:]]+")[[1]]
# "abc" "def" "ghi" "klm" 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-24T13:55:27.320

你可以和`strsplit(test_1, "\\W")`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-24T21:57:44.300

```
 test_1<-"abc def,ghi klm"
 test_2<-"abc, def ghi klm"
 key_words <- c("abc","def","ghi")
 matches <- str_c(key_words, collapse ="|")
 str_extract_all(test_1, matches)
 str_extract_all(test_2, matches) 
```**

# android - Android：创建一个带有禁用“确定”按钮的单选对话框，直到被选中

> ID：10738739
> 
> 赞同：0
> 
> 时间：2012-05-24T13:46:23.930
> 
> 标签：android, dialog

我想用简单的单选项目创建对话框。默认情况下，不选择任何项目。我只想要一个确定和取消按钮。在选择项目之前，确定按钮必须保持禁用状态。是否有一些内置的方法可以做到这一点，还是我必须创建自己的自定义对话框？这是我目前拥有的：

```
AlertDialog.Builder builder = new AlertDialog.Builder(context);

builder.setTitle(getString(R.string.lbl_MarkReviewAs))
    .setSingleChoiceItems(items, -1, new DialogInterface.OnClickListener()
    {
      public void onClick(DialogInterface dialog, int item)
      {
        selectedReviewStatusIndex = item;
        AlertDialog alertDialog = (AlertDialog)dialog;
        alertDialog.getButton(0).setEnabled(true);
      }
    })
    .setPositiveButton(getString(R.string.lbl_ButtonOK), new DialogInterface.OnClickListener()
    {
      public void onClick(DialogInterface dialog, int whichButton)
      {
        dialog.dismiss();
      }
    })
    .setNegativeButton(getString(R.string.lbl_ButtonCancel), new DialogInterface.OnClickListener()
    {
      public void onClick(DialogInterface dialog, int whichButton)
      {
        dialog.dismiss();
      }
    });

AlertDialog dialog =  builder.create();
dialog.getButton(AlertDialog.BUTTON_POSITIVE).setEnabled(false);
dialog.show(); 
```

这里的问题是 dialog.getButton(AlertDialog.BUTTON_POSITIVE) 返回 null。那么如何访问积极按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T13:56:18.287

将侦听器设置为选定的项目并启用“确定”按钮

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T14:19:22.057

我最好的办法是继承 ListActivity。这是[示例](http://www.mubasheralam.com/tutorials/android/how-create-single-choice-list)。

为了使这个活动（在清单中）的样式很好地设置为某个对话框（最佳选择是“@android:style/Theme.DeviceDefault.Dialog”）。

```
<activity android:name="YourDialogActivity"
    android:label="@string/title"
    android:theme="@android:style/Theme.DeviceDefault.Dialog">
    <intent-filter>
          ...
    </intent-filter>
</activity> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-29T06:52:15.930

你需要显示对话框然后禁用按钮正面。

```
AlertDialog dialog =  builder.create();

dialog.show();

dialog.getButton(AlertDialog.BUTTON_POSITIVE).setEnabled(false); 
```

# xml - 用 CSV 表示 XML：处理子标签的建议

> ID：10738740
> 
> 赞同：0
> 
> 时间：2012-05-24T13:46:32.510
> 
> 标签：xml, csv, data-structures

我正在构建一个数据可视化，我想使用 CSV 作为我的基本数据格式，以实现轻巧和易用。我的源数据采用大量 XML 格式，因此我使用 Python 和 lxml 将其转换为 CSV。

我的问题是这个。当我在 XML 中有多个子标签`<City>`时，如下所示：

```
<Country>
   <Name>France</Name>
   <Cities>
   <City><Name>Paris</Name></City>
   <City><Name>Lyon</Name></City>
   </Cities>
</Country>
<Country>
   <Name>Germany</Name>
   <Cities>
   <City><Name>Berlin</Name></City>
   <City><Name>Munich</Name></City>
   <City><Name>Aachen</Name></City>
   </Cities>
</Country> 
```

我应该如何在我的 CSV 文件中表示它们？我可以想到两个选择。首先是为每个城市添加一列，直到 CityN：

```
 Country,City1,City2,City3
 France,Paris,Lyon,,
 Germany,Berlin,Munich,Aachen 
```

第二种是对所有城市使用一个数组：

```
 Country,Cities
 France,[Paris,Lyon]
 Germany,[Berlin,Munich,Aachen] 
```

最好的格式可能只是取决于我想如何查询数据，但我想我会在这里检查一下是否有一个完善的或更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T01:00:29.443

鉴于您将使用 CSV，数组版本更好地保留了文档的基于字段的结构。如果没有数组命名法，逗号既作为字段分隔符又作为字段分隔符内的值被重载，除了从记录左侧计算字段外，无法确定哪个在起作用。

非数组版本还将您的数据限制为每个记录类型一个嵌套集合。这在当前示例中不是问题，但可能是您的应用程序中的另一种记录类型。使用（单一）标准方法可以提高清晰度和可维护性。

# kentico - Kentico 未显示 Visual Studio 2010 中添加的页面

> ID：10738742
> 
> 赞同：0
> 
> 时间：2012-05-24T13:46:53.133
> 
> 标签：kentico

我正在本地计算机上的 Visual Studios（Web 项目）中使用 Kentico。当我将文件夹或文件添加到解决方案并在浏览器中运行时，页面不会显示在 CMS 桌面或站点管理器中。我是否在解决方案中的错误位置创建了这些文件夹/文件（例如：{web 项目目录}/CMSPages/filename.aspx）？或者可能有不正确的设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T14:05:56.490

这不是它的工作方式——如果你把它们放在文件系统上，系统就不知道你的页面。但是，您可以创建 ASPX 页面模板，然后将其用于文档。请参阅[Devnet 论坛](http://devnet.kentico.com/Forums.aspx?forumid=57&threadid=28869)

最好的问候， Juraj Ondrus

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-20T17:25:38.190

您想在哪里使用此页面？

在访问者网站或 CMS 页面中

如果您想使用访问者站点，您可以创建一个 Web 部件并将您的 Web 部件添加到在内容树上创建的页面。

如果您想在 cmsdesk 中使用，您需要在模块中注册您的页面

# c# - 在 TabControl 中防止页面的多个实例

> ID：10738743
> 
> 赞同：1
> 
> 时间：2012-05-24T13:46:57.113
> 
> 标签：c#, .net, wpf, xaml, tabcontrol

我正在制作一个应用程序，我在选项卡控件中打开 wpf 页面。但我可以在 tabcontrol 中一次又一次地打开同一页面。我希望一旦打开页面就无法再次打开，如果我尝试再次打开它，它应该集中在 tabcontrol 上。我做了以下代码但没有工作。我正在使用自定义的 closableTabItem 用户控件。

```
private void Set_Fee_Click(object sender, RoutedEventArgs e)
{
    // Adding page to frame and then adding that frame to tab item and then adding tab item to main tab.
    FeeStructure feePage = new FeeStructure();
    _closableTab = new ClosableTabItem();
    _formFrame = new Frame();
    _formFrame.Content = feePage;
    _closableTab.Content = _formFrame;
    _closableTab.Header = "Set Fee Structure";

    if (!mainTab.Items.Contains(_closableTab))
    {
        mainTab.Items.Add(_closableTab);
        _closableTab.Focus();
    }
    else
    {
        _closableTab.Focus();
    }
}

private void Database_RecoveryBackup_Click(object sender, RoutedEventArgs e)
{
    // Adding page to frame and then adding that frame to tab item and then adding tab item to main tab.
    DbRecoveryBackup dbRecBack = new DbRecoveryBackup();
    _closableTab = new ClosableTabItem();
    _formFrame = new Frame();
    _formFrame.Content = dbRecBack;
    _closableTab.Content = _formFrame;
    _closableTab.Header = "Data Base";

    if (!mainTab.Items.Contains(_closableTab))
    {
        mainTab.Items.Add(_closableTab);
        _closableTab.Focus();
    }
    else
    {
        _closableTab.Focus();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T07:04:27.020

它永远不会发生，你想要什么，因为你正在创建一个每次的新实例`ClosableTabItem`，因此它每次都是唯一的，所以`.Items.Contains`在这种情况下永远不会工作，因为它匹配使用`object.Equals`.

现在，既然你说你只想要一个实例`ClosableTabItem`，那么使用 Linq，你可以检查项目中是否存在任何类型的项目`ClosableTabItem`，

```
...
// Here we're checking the array 'Items',
// if it contains any item whose type is 'ClosableTabItem'
if (!mainTab.Items.Any(item => item is ClosableTabItem)))    
... 
```

# c++ - 在构造函数中传递指针 (*&) 时出现奇怪的错误

> ID：10738744
> 
> 赞同：-2
> 
> 时间：2012-05-24T13:47:00.483
> 
> 标签：c++, pointers, function-calls

我根本不是 C++ 大师，我试图在各种小试验中复制这个错误。事实是，当我用我想做的事情做一个有 2 或 3 个类的小程序时，没有错误。但是在主要应用程序中，即使我尝试了很多（甚至是胡说八道）解决方案，我也想写错误仍然存​​在。

问题是我有一个实例化一些资源（作为指针）的主类和一个策略模式，该模式用于实例化不同的具体行为，这些行为在构造函数中选择资源。

在主应用程序中，init()：

```
device = new Kinect();
controls = new Gui();

UserPositionBehaviour = new UserPositionBehaviour(device, controls); 
```

并且，行为构造函数：

```
UserPositionBehaviour(Kinect * device, Gui * controls); 
```

这是错误：

```
src/App.cpp:30: error: no matching function for call to ‘UserPositionBehaviour::UserPositionBehaviour(Kinect*&, ofTrueTypeFont*&, ofxGui*&)’
src/UserPositionBehaviour.h:15: note: candidates are: UserPositionBehaviour::UserPositionBehaviour(Kinect*, ofxGui*, ofTrueTypeFont*)
src/UserPositionBehaviour.h:13: note:                 UserPositionBehaviour::UserPositionBehaviour(const UserPositionBehaviour&) 
```

嗯？？嘿，这是怎么回事？我传递的是指针，而不是***&**（我不知道如何阅读）

一些忠告？

我尝试使用仅在 couts 上构建的简单案例来复制错误，但没有问题，所以也许在其他地方隐藏了一些错误..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T14:01:09.867

导致错误的代码传递了三个参数（不是您想象的两个），并且最后两个的顺序错误。您必须查看源文件的错误版本，或类似的东西。

检查愚蠢的东西，比如过时的副本`src/UserPositionBehaviour.h`和`src/App.cpp`到处乱放的东西，你可能正在查看而不是查看编译器实际正在编译的版本。或者，也许您正在使用预编译的标头，但那里出了点问题。

未找到函数的错误消息通常如下所示。是类型“对指向 Foo 的指针的`Foo *&`引用”，它只是意味着您的参数表达式是一个指向 Foo 的左值指针。该调用*可以*匹配按值获取指针的函数，或按引用获取指针的函数。编译器也没有找到，但它必须为错误消息选择一些东西，而你的编译器会选择那个。如果您的调用包含参数表达式`device+0`而`device`不是.`device+0``&`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T14:01:55.343

根据错误消息，您正在使用三个参数而不是两个参数调用构造函数，并且您将最后两个参数弄错了。

如果这是真正的错误消息，那么您的代码可能如下所示：

```
UserPositionBehaviour = new UserPositionBehaviour(device, font, controls);
//                                                        ^^^^  ^^^^^^^^ 
```

应该是：

```
UserPositionBehaviour = new UserPositionBehaviour(device, controls, font);
//                                                        ^^^^^^^^  ^^^^ 
```

如果您的代码确实看起来像您发布的内容，并给出了错误消息，那么确实发生了一些非常奇怪的事情；在这种情况下，请发布一个完整的可编译示例，以便我们进一步调查。

您可以忽略`&`gcc 错误消息中的额外 s：这是一种有点奇怪的说法，它正在寻找通过值或引用获取参数的函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T13:53:38.327

如果您确实拥有构造函数，则代码应该编译

```
UserPositionBehaviour(Kinect * device, Gui * controls); 
```

定义，根据编译器，您不会：

> src/UserPositionBehaviour.h:15: 注意: 候选人是: UserPositionBehaviour::UserPositionBehaviour(Kinect*, ofxGui*, ofTrueTypeFont*) src/UserPositionBehaviour.h:13: 注意:
> UserPositionBehaviour::UserPositionBehaviour(const UserPositionBehaviour&)

简单的`*&`意思是您通过引用传递指针 - 即它可以在构造函数中修改。

# ruby-on-rails - 无法在我的视图中调用我的关联表

> ID：10738746
> 
> 赞同：-1
> 
> 时间：2012-05-24T13:47:06.443
> 
> 标签：ruby-on-rails

在我看来，无法调用我的关联表。试过这个。这是一个只添加到播放器的应用程序。按下“开始游戏”之后，他应该来到结果查看所有玩家的结果。那么我当然会有“玩家”表的名称，然后是“结果”表中的绑定结果。现在询问，我在后台输入bidningen，只要

看法：

```
<% @playersname.each do |p|%> 
 <ul>
    <li><%= p.name %></li>
    <li><%= p.results.try(:result) %></li>
 </ul>
<%end%> 
```

控制器：

```
 class ResultsController < ApplicationController
 def index
        @playersname = Player.all
  end 
```

结尾

模型：

```
class Result < ActiveRecord::Base
  # attr_accessible :title, :body
  has_many :players
end 
```

移民：

```
class CreateResults < ActiveRecord::Migration
 def change
   create_table :results do |t|
        t.string "result", :limit => 40
        t.string "cal", :limit => 40
            t.string "sum",:limit => 300
            t.timestamps
     end
  end 
```

结尾

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T14:30:04.937

CreateResults 迁移错过了 player_id 列。

在您`belongs_to :player`的 Result 类中执行并更正迁移（或执行另一个迁移）。

[编辑]我不够清楚：我认为你颠倒了关系逻辑。你实际上做了“一个结果有几个玩家”。我想你希望一个玩家有几个结果？

```
class Player
  has_many :results
end

class Result
  belongs_to :player
end 
```

所以你可以这样做：

```
@myplayer = Player.all.first
@myplayer.results #it is an array of player's results
@myplayerresult = @myplayer.results.first
puts @myplayerresult.result 
```

如果您想要一对一的关系，请考虑替换`has_many :results`为`has_one :result`，这样您就可以`@myplayer.result`得到您的结果。

# r - 跨列的 R 顺序观察

> ID：10738749
> 
> 赞同：0
> 
> 时间：2012-05-24T13:47:14.133
> 
> 标签：r, sorting, data-mining

我有一份家庭清单，以及他们搬入新邮政编码的日期。一小段如下：

```
ADD0 <- as.Date(c("2008-07-01", "1998-07-01", "2001-11-01", "1997-08-01"), format="%Y-%m-%d")
ADD1 <- as.Date(c(NA, "2001-09-01", "2002-03-01", NA), format="%Y-%m-%d")
ADD2 <- as.Date(c(NA, "1992-09-01", "2001-09-01", "2007-12-01"), format="%Y-%m-%d")
ZIP0 <- as.character(c(30126, 30345, 30068, 30253))
ZIP1 <- as.character(c(NA, 30263, 31064, NA))
ZIP2 <- as.character(c(NA, 30345, 30067,30062))
DF <- data.frame(ADD0, ZIP0, ADD1, ZIP1, ADD2, ZIP2)
> DF
        ADD0  ZIP0       ADD1  ZIP1       ADD2  ZIP2
1 2008-07-01 30126       <NA>  <NA>       <NA>  <NA>
2 1998-07-01 30345 2001-09-01 30263 1992-09-01 30345
3 2001-11-01 30068 2002-03-01 31064 2001-09-01 30067
4 1997-08-01 30253       <NA>  <NA> 2007-12-01 30062 
```

所以房子 2 在 98 年 7 月、01 年 9 月和 92 年 9 月搬迁。如您所见，我的问题是日期的顺序不一定正确，我需要它们。我能看到的唯一方法是遍历数据集并编写我自己的排序算法，我对此几乎没有经验。效率也很重要，因为我有 45 万次观察。

以前有人做过这种事情吗？有小费吗？有没有我找不到的干净解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T14:27:18.740

使用基本`reshape`包，我会添加一列`house`然后重新整形数据。然后订购它。

```
DF$house <- row.names(DF)
df.long <- reshape(DF, 
                   idvar='house', 
                   varying=list(c('ADD0', 'ADD1', 'ADD2'),
                                c('ZIP0', 'ZIP1', 'ZIP2')),
                   v.names=c('add', 'zip'), 
                   timevar=NULL, 
                   direction='long')
df.long <- df.long[order(df.long$house, df.long$add),]

    house        add   zip
1.1     1 2008-07-01 30126
1.2     1       <NA>  <NA>
1.3     1       <NA>  <NA>
2.3     2 1992-09-01 30345
2.1     2 1998-07-01 30345
2.2     2 2001-09-01 30263
3.3     3 2001-09-01 30067
3.1     3 2001-11-01 30068
3.2     3 2002-03-01 31064
4.1     4 1997-08-01 30253
4.3     4 2007-12-01 30062
4.2     4       <NA>  <NA>
> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T14:37:25.980

基于循环的解决方案可能很慢，但会保留您的格式。

```
DF <- data.frame(ADD0, ZIP0, ADD1, ZIP1, ADD2, ZIP2, stringsAsFactors = F)
DF2 = DF

for (i in 1:nrow(DF)){ 
  DF2[i,] =  DF[i,
    rep(order( DF[i,1:(ncol(DF) / 2) * 2 -1])*2, each = 2) + (-1:0)] 
} 
```

我同意其他回答者的观点。我认为这里造成困难的核心原因是数据存储在这里的方式，这对使用没有帮助。

# sql-server - 在 SQL Server 表中查找最大和最小日期值

> ID：10738753
> 
> 赞同：0
> 
> 时间：2012-05-24T13:47:30.510
> 
> 标签：sql-server

我有两张桌子：

查找表 ( `tabOne`)：

```
 KEY  |  Group  |  Name  |  Desc  | Val_Key
    ----------------------------------------
     1   |     a   | NameA  | DescA  |  10
     2   |     b   | NameB  | DescB  |  20
     3   |     c   | NameC  | DescC  |  30
     4   |     d   | NameD  | DescD  |  40
     5   |     e   | NameE  | DescE  |  50
     6   |     f   | NameF  | DescF  |  60 
```

第二个表格包含读数 ( `tabTwo`)：

```
 KEY  |  Date  |  Reading  | Val_Key
    ----------------------------------------
     1   |  Date   | Read     |  10
     2   |  Date   | Read     |  20
     3   |  Date   | Read     |  40
     4   |  Date   | Read     |  40
     5   |  Date   | Read     |  30
     6   |  Date   | Read     |  20
     7   |  Date   | Read     |  40
     8   |  Date   | Read     |  20
     9   |  Date   | Read     |  10
     10  |  Date   | Read     |  20
     11  |  Date   | Read     |  50
     12  |  Date   | Read     |  60 
```

我需要做的是加入`tabTwo`并`TabOne`创建一个包含最新阅读的列和一个包含最旧阅读的列`TabOne`。

归根结底，我想要一张如下所示的表格：

```
 KEY  |  Group  |  Name  |  Desc  | Val_Key | LastReading | FirstReading |
    -------------------------------------------------------------------------
     1   |     a   | NameA  | DescA  |  10     |             |              |   
     2   |     b   | NameB  | DescB  |  20     |             |              |
     3   |     c   | NameC  | DescC  |  30     |             |              |
     4   |     d   | NameD  | DescD  |  40     |             |              |
     5   |     e   | NameE  | DescE  |  50     |             |              |
     6   |     f   | NameF  | DescF  |  60     |             |              | 
```

谢谢！房地美

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T14:10:22.530

如果这是 Sql Server 2005 或更新版本，则[外部应用](http://msdn.microsoft.com/en-us/library/ms175156%28v=sql.105%29.aspx)将有所帮助：

```
select TabOne.*, 
       last.Reading LastReading, 
       first.Reading FirstReading
from TabOne
outer apply
(
  select top 1
         Reading
    from TabTwo
   where TabTwo.Val_Key = TabOne.val_Key
  order by TabTwo.Date desc
) last
outer apply
(
  select top 1
         Reading
    from TabTwo
   where TabTwo.Val_Key = TabOne.val_Key
  order by TabTwo.Date asc
) first 
```

[现场测试是@Sql Fiddle](http://sqlfiddle.com/#!3/ef7af/1)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T10:00:04.490

[如果子查询直接移动到主查询的 SELECT 子句，则@Nikola Markovinović 的解决方案](https://stackoverflow.com/a/10739166/297408)可以更普遍适用，这可能每个子查询只检索一个值，因此作为标量表达式有效：

```
SELECT
  t1.[KEY],
  t1.[Group],
  t1.Name,
  t1.[Desc],
  t1.Val_Key,
  (
    SELECT TOP 1 Reading
    FROM TabTwo
    WHERE Val_Key = t1.Val_Key
    ORDER BY Date DESC
  ) AS LastReading,
  (
    SELECT TOP 1 Reading
    FROM TabTwo
    WHERE Val_Key = t1.Val_Key
    ORDER BY Date ASC
  ) AS FirstReading
FROM TabOne t1 
```

如果您需要沿途约会，您可能不得不坚持 Nikola 的解决方案。有一个替代方案，但它更麻烦（尽管也更标准）：它将涉及对`TabTwo`的数据进行分组`Val_Key`以获取每个 的最早/最新日期`Val_Key`，然后加入`TabTwo`以访问与找到的日期相对应的整行以最终拉出必要的列，并最终连接两个结果集以`TabOne`获得最终的列集。

# django - django 更新用户时如何发送 post_save 信号？

> ID：10738754
> 
> 赞同：4
> 
> 时间：2012-05-24T13:47:32.197
> 
> 标签：django, django-signals

阅读了文档，

> [https://docs.djangoproject.com/en/dev/topics/signals/](https://docs.djangoproject.com/en/dev/topics/signals/)

我在我的 signals.py 文件中创建了这个：

```
from django.db.models.signals import post_save
from django.dispatch import receiver
from models import User

from models import Story

@receiver(post_save, sender=User)
def create_initial_story(sender,instance, signal, created, **kwargs):
    print "helloooo!"
    if created:
        Story(user = instance, title = 'Random Stories', description="Random stories", is_closed = False, is_random = True).save() 
```

从我读到的内容来看，我认为我需要做的就是发送一条消息。好吧，那并创建一个新用户（我使用 django-registration 框架）但是，没有发送任何内容（好吧，我拥有的接收器方法什么都不做）。我还删除了 @receiver 注释的“sender=User”参数 - 离开

```
@receiver(post_save) 
```

但这无济于事。没有任何内容输出到控制台，没有保存新数据......保存用户时我需要从用户*发送信号吗？*如果是这样，我会怎么做？我正在使用 django-registration，所以我定义了一个 UserProfile ......我的意思是，我会告诉用户在哪里（在什么文件/方法中）发送信号？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-24T13:54:52.087

你应该导入你的`signals.py`某个地方来运行它。例如在`models.py`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-24T14:24:56.370

首先，它们被称为“装饰器”。注释在 Django 中是另外一回事，所以最好不要在那里混淆术语。

`post_save`顾名思义，每次保存后都会调用该信号。指定`sender`将接收器限制为仅`post_save`发送用于保存该特定模型的信号。如果你忽略它，当保存*任何*模型时，你的接收器将被调用，这肯定不是你想要的。

您的问题是您的接收器，出于所有意图和目的不*存在*。Django 不会`signals.py`为你自动导入 import，所以从来没有见过。让它看到的唯一方法是将它导入 Django 确实看到的某个地方，例如 models.py（如 @DrTyrsa 所建议的那样）。

但是，如果您这样做，最终会出现循环导入错误，因为您已经将 models.py 导入到 signals.py 中。因此，您可以将信号代码直接放入 models.py 中，也可以找其他地方导入；`__init__.py`可能会起作用，但我通常只是将我的信号放在 models.py 中并收工。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-12T17:05:43.087

或者你可以使用这个：

```
from django.db.models.signals import post_save 
```

# linux - 监控 Linux 中的传输、网络和链路层缓冲区/队列（加载、空、满和丢弃）

> ID：10738761
> 
> 赞同：0
> 
> 时间：2012-05-24T13:47:46.060
> 
> 标签：linux, udp

据我所知，这些是 Linux 中 UDP 的缓冲区/队列（如果我错了，请纠正我）

UDP Tx : [sendto] UDP socket buffer(getsockopt(SO_SNDBUF)) -> interface socket buf() -> driver ring buffer UDP_Rx : driver ring buffer -> backlog queue -> [recvfrom] UDP socket buffer(getsockopt(SO_RCVBUF))

我知道我们可以监控丢弃/队列：-socket buffer(UDP) at /proc/net/udp -interface queue(IP) at /proc/net/dev

我在哪里可以监控驱动程序队列/缓冲区（MAC）是否在 Linux 中下降？

p/s：如果我们在 WLAN 上的 UDP 传输期间断开连接，我想看看并证明这些队列中的数据报会发生什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:08:57.517

使用 $tc -s -d qdisc ls dev eth0 作为 eth0 接口

# php - PHP file_exists 和 Linux 机器上的 Å Ø Æ 等特殊字符

> ID：10738765
> 
> 赞同：3
> 
> 时间：2012-05-24T13:48:05.833
> 
> 标签：php, linux, special-characters, file-exists

file_exists("file_å.txt");

当文件存在时返回**false 。**有什么可以让 *file_exists* 查看具有这种名称的文件吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-06-01T10:25:44.180

例如，当从 Excel 读取文件名并在磁盘上查找给定路径时，我已经遇到过几次这种情况。问题可能是“ä”是特定的 unicode 字符 (\u00e4) 或其“组合分叉”形式 (a\u0308)，即带有两个点的“a”。

自 php 5.3 以来的最佳解决方案是使用 Normalizer 库。您可能需要`sudo apt-get install php5-intl`将该类放入您的 PHP 中。之后只是

```
$normalizer = new \Normalizer();
$normalizer->normalize($val, \Normalizer::FORM_D) 
```

第二个参数有几种不同的形式，所以你必须查找你需要哪一个

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T13:35:58.517

检查这个答案： [https ://stackoverflow.com/a/2685818/190791](https://stackoverflow.com/a/2685818/190791)

我的解决方案是转换为 windows 文件格式：

```
$winfilename= iconv('utf-8', 'cp1252', $utffilename); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T13:52:52.987

尝试

`file_exists(mb_convert_encoding("file_å.txt", "UTF-8"));`

假设文本不是 utf-8

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-24T13:52:41.483

检查您的 php 脚本在哪个编码中。可能它与文件系统不同。（例如 latin1 与 utf-8）

# asp.net - 实例化对象生命周期

> ID：10738771
> 
> 赞同：1
> 
> 时间：2012-05-24T13:48:18.727
> 
> 标签：asp.net

我正在设计一个新的 ASP.NET 网站（ASP.NET 对我来说有点新，所以请原谅愚蠢的问题），我想知道我将在 Global.asax 的`Application_Start`事件中实例化的对象的生命周期（即`new myClass()`）。我会通过某处的静态指针来引用该对象。

我考虑这样做的原因是为正在运行的 ASP.NET 应用程序创建一个主对象，该对象将跟踪每个用户（浏览器）的一些信息，即使我将大部分信息存储在我的数据库中。换句话说，我想使用一个由用户键索引的会话数组，这个数组将是一个元素`myClass`，如上所述，在 Global.asax 的`Application_Start`事件中被实例化。我会定期修剪我的数组，以考虑在 NN 分钟后离开或没有做任何事情的用户。

或者，这只是疯了，因为在应用程序生命周期内实例化的对象在生命周期方面并不可靠。

提前致谢！

亲切的问候，德里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T13:56:41.580

为什么不使用应用程序缓存？

不幸的是，msdn 现在似乎已关闭，但链接是 [http://msdn.microsoft.com/en-us/library/system.web.httpcontext.cache.aspx](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.cache.aspx)

[它可以通过当前HttpApplication](http://msdn.microsoft.com/en-us/library/system.web.httpapplication.aspx)的 Context 属性在您的 asp.net 站点中访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T13:54:41.010

创建对象的位置无关紧要，重要的是存储对象引用的位置。

如果将引用放在静态变量中，只要应用程序正在运行，该对象就会继续存在。

在 Web 应用程序中使用静态变量可以有其用途，但您必须小心，因为 Web 应用程序是多线程的。如果更改对象中的任何数据，则必须同步对数据的访问，以便一次只有一个线程可以访问它。

# knockout.js - model in knockout trying to map again every time the ajax request returns. view is not updated

> ID：10738772
> 
> 赞同：2
> 
> 时间：2012-05-24T13:48:19.447
> 
> 标签：knockout.js, knockout-mapping-plugin

I started using knockout in my asp.net mvc 2 project

anyway i tried something simple. i created a model like so:

```
var userViewModel = {
ID: ko.observable(),
assignedGroups: ko.observableArray(),
avilableGroups: ko.observableArray(),
permissions: ko.observableArray()
}; 
```

then on the document.ready of jquery i called:

```
ko.applyBindings(userViewModel); 
```

in the aspx itself i have:

```
<select multiple id="groupOfUser" class="multi_added_groups" data-bind="foreach:    assignedGroups">
  <option data-bind="text: $data, value: $data"></option>
</select> 
<span data-bind="text: ID"></span> 
```

if i first put data into userViewModel the view displays as expected. and that's great but i want the view to start off empty at first. then after the user chooses a user i make an ajax request my response is this:

```
{"ID":691,
"assignedGroups":["group1","group2"],
"avilableGroups":["role.administrator","role.editor"],
"permissions":[{"name":"admin","level":"ReadWrite"},
{"name":"admin.errorInfo","level":"Read"}]
 } 
```

then in my callback function:

```
ko.mapping.fromJS(res, userViewModel); 
```

and that's it i guess. my view doesn't get refreshed with the new data from the server... what am i doing wrong?

thanks!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T15:49:11.457

I've run into this issue myself a couple of times. It seems that the mapping plugin expects your object to have been initially created from mapped data. This is a bit of a limitation of the plugin but can easily be worked around. Here is an example of creating your properties with the plugin where the update works correctly.

[http://jsfiddle.net/madcapnmckay/8BVMZ/1/](http://jsfiddle.net/madcapnmckay/8BVMZ/1/)

```
var userViewModel = function () {
    var self = this;
    ko.mapping.fromJS({
        ID: "",
        assignedGroups: [],
        avilableGroups: [],
        permissions: []            
    }, {}, self);

    userSelected = function () {
        ko.mapping.fromJS(ajaxResponse, {}, self);
        console.log(JSON.stringify(ko.toJS(self)));
    }
}; 
```

Hope this helps.

# c++ - Boost python，暴露meyers单例

> ID：10738776
> 
> 赞同：5
> 
> 时间：2012-05-24T13:48:35.160
> 
> 标签：c++, python, boost, singleton

我想以正确的方式去做。我已经看到在这里公开 boost::serialization::singleton [Boost python export singleton](https://stackoverflow.com/questions/5299179/boost-python-export-singleton)但我不想使用它。我想改用简单的 meyers 单例。

下面的代码有效，但文档说使用 [http://www.boost.org/doc/libs/1_43_0/libs/python/doc/v2/reference_existing_object.html#reference_existing_object-spec/](http://www.boost.org/doc/libs/1_43_0/libs/python/doc/v2/reference_existing_object.html#reference_existing_object-spec/) 是危险的。

代码：

```
class Singleton 
{
private:
Singleton(){};

public:
static Singleton & getInstance()
{
    static Singleton instance;
    return instance;
}

int getNumber() { return 5; }
}; 
```

在模块中：

```
class_<Singleton>("singleton", no_init)
    .def("getInstance", &Singleton::getInstance, return_value_policy<reference_existing_object>()).staticmethod("getInstance")
    .def("getNumber", &Singleton::getNumber)

    ; 
```

有什么好方法吗？在执行 python 代码时使用`return_internal_reference<>()`导​​致错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T13:50:14.740

我们的代码中有很多这样的东西，我没有想到一个简单的方法，但是我们通过使用空删除器从引用返回 boost::shared_ptr<> 来公开它们（我们以某种方式将部分代码移动到 shared_ptr 和其他人没有，所以这是一个混合物）。这不是最好的事情，但它可以按预期工作并且没有缺陷，如果您确保在 main 离开后不对指针做任何事情。

您的对象的生命周期将超过解释器，因此您不必担心在此处将任何引用传回 python 时出现任何问题。该库仅在解释器退出后才会释放（可能会调用或不调用您的析构函数，有时可能会有一个整体以防出错左右。）。因此，在这种情况下，您可以将解释器视为经典的 main() 函数。

```
class_<XY, shared_ptr<XY>, boost::noncopyable >("XY",no_init)
  .def("getInstance",&XY::getSharedInstance )
  .staticmethod("getInstance")

struct NullDeleter
{
  void operator()(const void*){}
};

XY& XY::getInstance()
{
  static XY in;
  return in;
}

// This can also be written as a standalone function and added to the python class above.
shared_ptr<XY> XY::getSharedInstance()
{
  return shared_ptr<XY>( &getInstance(), NullDeleter() );
} 
```

或者您可以将 sharedInstance 非侵入式写入单独的函数并在 python 包中使用它：

```
shared_ptr<XY> getSharedInstance()
{
  return shared_ptr<XY>( &XY::getInstance(), NullDeleter() );
}

class_<XY, shared_ptr<XY>, boost::noncopyable >("XY",no_init)
  .def("getInstance",&getSharedInstance )
  .staticmethod("getInstance") 
```

# extjs4 - extjs 4 如何在 JSON 字符串中传递函数

> ID：10738778
> 
> 赞同：1
> 
> 时间：2012-05-24T13:48:41.977
> 
> 标签：extjs4

我正在使用 JSON 字符串创建门户。

就像是

```
 appPortalItems.add({ 
        id: PortletID,
        collapsed: true,
        title: PortletTitle,
        height: PortletHeight,
        tools: getToolsBar(String),
        html: htmlContent,
        listeners: {
            'close': Ext.bind(panel.onPortletClose, panel),
            'endDrag': Ext.bind(panel.onPortletDrag, panel),
            'resize': Ext.bind(panel.onPortletResize, panel)
        }
     }); 
```

所以在上面的代码中有工具：getToolBar(String)

我在这里传递 String ，它只是 JSON。

```
 "max": {
      "type": "maximize",
      "handler": function(e,target,panelHeader,tool){
        userMaximize(e,target,panelHeader,tool)
      }
    } 
```

userMaximize 是我的函数，我想在用户单击菜单项时调用它。

所以我没有在函数中添加 "" （e 等。在 Chrome 和 FF 中它工作正常。但在 IE 中它给了我错误。

请建议我如何将函数作为 JSON 中的对象传递，以便在菜单项单击事件 userMaximize 上执行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T08:55:06.750

如果您正在尝试使用工具，请编写一些这样的代码

```
tools:[{
    type:'maximize',
    tooltip: 'maximize !',      
    handler: function(event, toolEl, panel){
        userMaximize(e,target,panelHeader,tool)// check the parameters passed
    }
},
{
    type:'help',
    tooltip: 'Get Help',
    handler: function(event, toolEl, panel){
        // show help here
    }
}] 
```

# fluentvalidation - 在 FluentValidation AbstractValidator 中注入 ISession

> ID：10738782
> 
> 赞同：4
> 
> 时间：2012-05-24T13:48:50.810
> 
> 标签：fluentvalidation

试图找出让 NHibernate ISession 成为流畅的验证抽象验证器的最佳方法。问题是 ISession 是根据 Web 请求注册的，而验证器出于性能原因根据 fluent 的最佳实践注册为单例。这显然会导致 ISession 在需要之前被处置。

非常感谢任何提示，尽量避免传入容器实例

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T10:23:20.720

您可以使用 TypedFactoryFacility，最简单的方法是使用委托，请参阅[http://stw.castleproject.org/Windsor.Typed-Factory-Facility-delegate-based-factories.ashx](http://stw.castleproject.org/Windsor.Typed-Factory-Facility-delegate-based-factories.ashx)

但是，我建议使用基于接口的工厂，因为首先您可以在完成会话后显式释放会话，其次在代码中您正在执行的操作更加明显，请参阅[http://stw.castleproject.org/Windsor .Typed-Factory-Facility-interface-based-factories.ashx](http://stw.castleproject.org/Windsor.Typed-Factory-Facility-interface-based-factories.ashx)

# java - 在带有 Java 的 Internet Explorer 上运行 Selenium 2.12 失败

> ID：10738783
> 
> 赞同：0
> 
> 时间：2012-05-24T13:48:52.587
> 
> 标签：java, internet-explorer, selenium, webdriver

我刚刚安装了最新版本的 Selenium 2.12。

我正在尝试在 IE 上使用 Selenium 运行以下 java 程序。但不幸的是，它不起作用。

[示例程序](http://openwritings.net/public/selenium-2/first-selenium-2-application-java)

这是错误消息。

```
May 24, 2012 7:12:50 PM org.apache.http.impl.client.DefaultRequestDirector tryExecute
INFO: Retrying request
Exception in thread "main" org.openqa.selenium.UnhandledAlertException: Modal dialog present (WARNING: The server did not provide any stacktrace information)
Command duration or timeout: 849 milliseconds
Build info: version: '2.21.0', revision: '16552', time: '2012-04-11 19:08:38'
System info: os.name: 'Windows 7', os.arch: 'amd64', os.version: '6.1', java.version: '1.7.0_04'
Driver info: driver.version: InternetExplorerDriver
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at org.openqa.selenium.remote.ErrorHandler.createThrowable(ErrorHandler.java:175)
    at org.openqa.selenium.remote.ErrorHandler.throwIfResponseFailed(ErrorHandler.java:134)
    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:459)
    at org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:140)
    at org.openqa.selenium.ie.InternetExplorerDriver.setup(InternetExplorerDriver.java:113)
    at org.openqa.selenium.ie.InternetExplorerDriver.<init>(InternetExplorerDriver.java:66)
    at ExampleProgram.main(ExampleProgram.java:13) 
```

这是使用 URL “” 启动 IE 8`http://localhost:15194/`并显示内容 -`This is the initial start page for the WebDriver server.`

请帮我解决我在这里做错的事情。[我已经完成了wiki](http://code.google.com/p/selenium/wiki/InternetExplorerDriver)中提到的基本设置

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T14:55:33.257

只是一个小修正，最新版本是 2.21 而不是 2.12。

用这个开始你的脚本

```
driver = Selenium::WebDriver.for :ie, :switches => %w[--ignore-certificate-errors --disable-popup-blocking --disable-translate] 
```

以管理员身份打开浏览器，并更改 Internet 选项中的设置以允许弹出窗口并禁用“保护模式”。

除此之外，我猜模态消息也可能是因为 https 网站上可能显示了一些不安全的内容。

因此，为避免显示该消息，还请执行以下步骤

*   IE->以管理员身份打开
*   转到 Internet 选项
*   转到安全选项卡
*   单击自定义级别按钮
*   在杂项下 - 启用混合内容

如果这不能解决问题，请分享模态弹出窗口上显示的确切消息。希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T10:30:14.160

这在安装新的 IE 版本 - 9 后对我有用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-22T08:52:32.440

您必须下载“IEDriverServer_Win32_2.29.0.zip”。将其解压缩到目标文件夹并实例化 Internet Explorer 浏览器，如下所示：

```
File file = new File("E:\\Global Blue\\globalblue-selenium-test\\gb-selenium-test\\lib\\IEDriverServer_Win32_2.29.0\\IEDriverServer.exe");
System.setProperty("webdriver.ie.driver", file.getAbsolutePath());
WebDriver oWebDriver = new InternetExplorerDriver(); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-12-23T12:24:05.047

尝试使用：

```
Thread.sleep(3000); 
```

它对我有用。

# ihttphandler - http 处理程序启用会话状态

> ID：10738784
> 
> 赞同：0
> 
> 时间：2012-05-24T13:48:53.347
> 
> 标签：ihttphandler

使用 http 处理程序，我将用户重定向到其他页面。示例：如果我们输入 about.aspx，我将使用 server.transfer 将用户重定向到 page.aspx?pageid=20。但问题是，在 page.aspx 中的以下语句中，我遇到了错误。会话[“用户 ID”]=“xyz”；

会话状态只能在 enableSessionState 设置为 true 时使用，无论是在配置文件中还是在 Page 指令中。还请确保 System.Web.SessionStateModule 或自定义会话状态模块包含在应用程序配置的 \\ 部分中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T13:59:22.660

如果要在 httphandler 中访问会话状态，则必须与 IHttpHandler 一起实现 IRequiresSessionState 接口。

# c# - 匿名代表的“动态”？

> ID：10738787
> 
> 赞同：4
> 
> 时间：2012-05-24T13:49:08.140
> 
> 标签：c#, dynamic, delegates, anonymous-delegates

我想知道是否有可能使变量的“动态”类型适用于匿名代表。

我尝试了以下方法：

```
dynamic v = delegate() {
}; 
```

但后来我收到以下错误消息：

`Cannot convert anonymous method to type 'dynamic' because it is not a delegate type`

不幸的是，以下代码也不起作用：

```
Delegate v = delegate() {
};
object v2 = delegate() {
}; 
```

如果我想创建一个接受任何类型的委托的方法，即使是内联声明的方法，我该怎么办？

例如：

```
class X{
    public void Y(dynamic d){
    }
    static void Main(){
        Y(delegate(){});
        Y(delegate(string x){});
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T13:55:57.013

这有效，但看起来有点奇怪。你可以给它任何委托，它会运行它并返回一个值。

您还需要*在某个时候*指定匿名方法签名，以便编译器能够理解它，因此需要指定`Action<T>`or`Func<T>`或其他内容。

[为什么不能将匿名方法分配给 var？](https://stackoverflow.com/questions/4965576/why-cant-an-anonymous-method-be-assigned-to-var)

```
 static void Main(string[] args)
    {
        Action d = () => Console.WriteLine("Hi");
        Execute(d); // Prints "Hi"

        Action<string> d2 = (s) => Console.WriteLine(s);
        Execute(d2, "Lo"); // Prints "Lo"

        Func<string, string> d3 = (s) =>
        {
            Console.WriteLine(s);
            return "Done";
        };
        var result = (string)Execute(d3, "Spaghettio"); // Prints "Spaghettio"

        Console.WriteLine(result); // Prints "Done"

        Console.Read();
    }

    static object Execute(Delegate d, params object[] args)
    {
        return d.DynamicInvoke(args);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T13:59:23.767

如果您为每个委托声明一个类型，它就可以工作。

```
// Declare it somewhere
delegate void DelegateType(string s);

// The cast is required to make the code compile
Test((DelegateType)((string s) => { MessageBox.Show(s); }));

public static void Test(dynamic dynDelegate)
{
    dynDelegate("hello");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-29T21:10:08.753

```
Action _;
dynamic test = (_ = () => Console.WriteLine("Test"));
test() // Test 
```

# extjs - Rownumberer 确实增加了超过我的 Ext.grid.ColumnModel 行上的数字 1

> ID：10738790
> 
> 赞同：0
> 
> 时间：2012-05-24T13:49:18.977
> 
> 标签：extjs

我无法让 rownumberer 计算我的行数。我只得到每一行的数字 1，而不是 1、2、3 等等。我哪里错了？谢谢您的帮助。

```
 var iLineItemCM = new Ext.grid.ColumnModel([
    new Ext.grid.RowNumberer(),
{
    id:'i_line_item_name',
    header: "Line Item Name",
    dataIndex: 'i_line_item_name',
    width: 280,
    editor: new Ext.form.TextArea({
        allowBlank: false
    })
}
,{
    header: "Amount",
    dataIndex: 'i_line_item_amt',
    width: 80,
    align: 'right',
    renderer: 'usMoney',
    editor: new Ext.form.NumberField({
        allowBlank: false,
        allowNegative: false,
        maxValue: 100000
    })
}
]); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:54:25.210

在使用网格面板并在运行时一次添加一条记录时，我遇到了类似的问题。行编号器从记录索引中获取数字，我必须手动告诉每条记录它的索引是什么

```
store.load(function(records, operation, success) {
            if (success) {
                // set the index on the record so that the rows will be numbered correctly.
                // this is a known bug in extjs when adding records dynamically
                records[0].index = me.current_count;
                me.current_count++;
                // There is only 1 compound record returned
                me.getGrid().getStore().add(records[0]); 
```

# java - 在 nocache.js 加载后 gwt 应用程序不启动

> ID：10738791
> 
> 赞同：2
> 
> 时间：2012-05-24T13:49:24.133
> 
> 标签：java, gwt

我们有一个 GWT 应用程序在生产环境中运行良好，但我们注意到在一些罕见的随机情况下出现了奇怪的行为。

问题是我们的主页（GWT 入口点）被加载消息卡住了。

查看生成的网络流量，从登录尝试到加载消息，我们可以看到 *.nocache.js 已从服务器（http 200）正确加载，但在 *.gwt.xml 文件中声明的 js 文件未加载（根本没有服务器请求）。

似乎 nocache.js 文件已正确加载，但未执行，因此没有服务器请求。

任何帮助将不胜感激。

# regex - 理解正则表达式 [\s\S-[<>]]*

> ID：10738792
> 
> 赞同：6
> 
> 时间：2012-05-24T13:49:28.593
> 
> 标签：regex

我有这个正则表达式：`[\s\S-[<>]]*`

你能帮我理解这个表达是什么意思吗？在我看来，这意味着一个由空格和从非空格字符到 < 或 > 的范围组成的字符类？

没有多大意义。。

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-24T13:53:13.050

这是一种仅受少数正则表达式引擎（.NET、JGSoft、XML Schema 和 XPath，但不包括本机 Java 正则表达式）支持的变体，它被称为[字符类减法](http://www.regular-expressions.info/xmlcharclass.html)。

例如，

```
[A-Z-[EFG]] 
```

`A`匹配从到 的任何字母`Z`except`E`或。`F``G`

但在你的情况下，它真的没有多大意义，因为`[\s\S]`匹配任何字符 - 可以通过以下方式实现相同的结果（在任何正则表达式中）

```
[^<>]* 
```

# apache - 特定文件的 .htaccess 和 HTTP 标头

> ID：10738799
> 
> 赞同：1
> 
> 时间：2012-05-24T13:49:55.623
> 
> 标签：apache, .htaccess

我需要以这种方式提供 .crx 文件：

```
1) The file has the content type application/x-chrome-extension
2) The file is not served with the HTTP header X-Content-Type-Options: nosniff
3) The file is served with one of the following content types:
- "text/plain"
- "application/octet-stream"
- "unknown/unknown"
- "application/unknown" 
```

我必须如何设置我的 .htaccess 文件才能做到这一点？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-25T17:08:09.930

第 1 条和第 3 条相互矛盾。最简单的方法是将其重命名为`.php`并使用：

```
<? 
header('Content-Type: application/x-chrome-extension'); 
?>
...original-file-contents... 
```

我认为您不需要 .crx 扩展名。如果由于某种原因你这样做，你可以使用`file.php/fake.crx`而不是只是`file.php`.

# haskell - 未定义的显示实例

> ID：10738806
> 
> 赞同：3
> 
> 时间：2012-05-24T13:50:14.310
> 
> 标签：haskell, undefined

可以做任何事情来为未定义的值定义 Show 实例吗？也许存在一些 GHC 扩展？我想要这样的东西：

```
> print (1,undefined)

(1,"undefined") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T13:59:24.080

根据[Haskell 2010 报告第 9 章](http://www.haskell.org/onlinereport/haskell2010/haskellch9.html)，评估`undefined`总是会导致错误：

```
-- It is expected that compilers will recognize this and insert error
-- messages that are more appropriate to the context in which undefined
-- appears.
undefined :: a
undefined = error "Prelude.undefined" 
```

由于打印一个值包括评估它，这总是会出错。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T15:13:51.757

底部值（其中`undefined`一种风味）是一个从未构造过的值，因此无法观察到。这意味着您也无法打印它。该值无法与`null`其他语言进行比较，通常可以观察甚至检查。

`undefined`将以及`error "blah"`所有其他底部视为等效于无限循环的结果是很有用的。永远不会构造无限循环的结果，因此无法观察到。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T17:21:51.793

从概念上讲：“未定义”不是像“X”这样的值。“X”值的类型为 Char。“未定义”有什么类型？符号“未定义”是多态的，它可以有任何类型（任何类型的 *）。

类型类如“Show t”在类型 t 上调度。所以不同的类型可以并且确实有不同的显示功能来显示它们。哪个函数得到你的“未定义”取决于类型。

在 GHCI 中，大多数多态类型默认为 ()，因此它可以运行命令。可以为不查看值的新类型创建 show 函数：

```
Prelude> data Test = Test
Prelude> instance Show Test where show x = "I did not look at x"
Prelude> show Test
"I did not look at x"
Prelude> show (undefined :: Test)
"I did not look at x" 
```

但是正如您所看到的，这通过根本不检查值来避免 undefined 的错误。所以这有点没用。

您可以制作自己的类型类和在 IO 中运行并捕获错误并执行您想要的操作的打印机器：

```
import Control.Exception
perr s = do x <- try (evaluate (show s)) :: IO (Either SomeException  String)
            return (either show id x)) 
```

以上将错误转换为错误的字符串形式：

```
Prelude Control.Exception> perr True
"True"
Prelude Control.Exception> perr (undefined :: Bool)
"Prelude.undefined" 
```

注意：更好的“perr”需要强制使用整个字符串，而不仅仅是 WHNF。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T14:36:02.113

即使（正如其他人已经指出的那样）您不能为 指定`Show`实例`undefined`，您也可以通过使用`catch`以下代码中的 as 来组合一种解决方法：

```
import qualified Control.Exception as C
import System.IO.Unsafe (unsafePerformIO)

showCatch :: (Show a) => a -> IO String
showCatch = showCatch' "undefined"

showCatch' :: (Show a) => String -> a -> IO String
showCatch' undef x = C.catch (C.evaluate (show x)) showUndefined
  where
    showUndefined :: C.ErrorCall -> IO String
    showUndefined _ = return undef

unsafeShowCatch :: (Show a) => a -> String
unsafeShowCatch x = unsafePerformIO (showCatch x) 
```

但是这个例子只适用于简单的表达式：

```
*Main> let v1 = showCatch 1
v1 :: IO String
*Main> let v2 = showCatch $ if True then undefined else 0
v2 :: IO String
*Main> v1
"1"
*Main> v2
"undefined"
*Main> let v3 = unsafeShowCatch 1
v3 :: String
*Main> let v4 = unsafeShowCatch $ undefined
v4 :: String
*Main> v3
"1"
*Main> v4
"undefined" 
```

它不适用于像

```
showCatch (1,undefined) 
```

# matlab - MATLAB：引用结构中的元素

> ID：10738810
> 
> 赞同：2
> 
> 时间：2012-05-24T13:50:28.157
> 
> 标签：matlab, structure, switch-statement

我试图引用一个埋在我没有创建的结构中的元素（因此我不知道它的确切构建方式）。

加载结构后，如果我输入：

```
dataFile.RECORDINGS.eye 
```

我收到以下输出：

```
ans =

    2

ans =

    2 
```

这两个变量总是相同的，但它们可以在任何时候为 1、2 或 3。我想做的是使用如下所示的 switch 语句进行检查：

```
switch dataFile.RECORDINGS.eye
    case {1, 2}
        % action A
    case 3
        % action B
end 
```

当然，上面会引发错误，因为“case”无法检查 dataFile.RECORDINGS.eye 是否包含给定值，因为该地址下存储了两个元素。所以，我的问题是：我如何只引用其中一个元素？我认为这就像替换第一行一样简单：

```
switch dataFile.RECORDINGS.eye(1) 
```

...但是，这给出了错误：

```
??? Field reference for multiple structure elements that is followed by more reference blocks is an error. 
```

同样，我无法访问这样的元素：

```
switch dataFile.RECORDINGS.eye.1 
```

...当我收到以下错误时：

```
??? Dot name reference on non-scalar structure. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T14:03:32.457

如果这些值确实总是相同的，您可以尝试以下操作来获取可以在 switch 命令中使用的标量：

```
unique([dataFile.RECORDINGS.eye]) 
```

顺便说一句，您是否尝试过为 RECORDINGS 编制索引，即

```
dataFile.RECORDINGS(1).eye   
dataFile.RECORDINGS(2).eye 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T14:06:47.097

也许不是`eye`有多个元素，而是有多个元素`RECORDINGS`，每个元素都有一个`eye`? 您可能想要`dataFile.RECORDINGS(1).eye`或`dataFile.RECORDINGS(2).eye`.

# c# - 通过 C# 代码打开 excel 时宏不执行，而手动打开 excel 时执行 VBA 代码

> ID：10738814
> 
> 赞同：2
> 
> 时间：2012-05-24T13:50:47.593
> 
> 标签：c#, .net, excel, vba

我已经在 excel 表中的 VBA 中编写了一些代码，它将文本文件转换为 excel 表并对数据执行一些验证以过​​滤正确的数据和错误数据并将其分离到正确的文本文件和错误文本文件中。打开 excel 时运行整个逻辑。打开这个excel的逻辑是用c#写在我的.net应用程序中的。

代码是：

```
FileInfo fi = new FileInfo("C:\automate_load.xlsm");

if (fi.Exists)
{
    Excel.Application excelapp = new Excel.Application();
    excelapp.Visible = true;
    Excel.Workbook wb = excelapp.Workbooks.Open("C:\automate_load.xlsm", 0, 
        false, 5, "", "", false, Excel.XlPlatform.xlWindows, "", true, false, 0, true, false, false); 
```

当我手动打开automate_load.xlsm 文件时，整个VBA 代码运行正常，但是当我的c# 代码打开该文件时没有任何反应。

我认为当文件自动打开时，micros 会被禁用。请帮我解决一些问题。提前致谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T14:03:08.220

如果您要`sub`在打开的`xlsm`文件中运行存储，请选中该框（快捷方式：ALT + T + M + S）：

![办公室 2010](../Images/f707566dce324abb94836ac1b5c341cf.png) ![办公室2003](../Images/d643dabf44b475e198bb6998741822c8.png)

*我不太确定，但认为它可能会有所帮助。*

# objective-c - 在运行时获取实例方法的返回值类型

> ID：10738815
> 
> 赞同：0
> 
> 时间：2012-05-24T13:50:50.863
> 
> 标签：objective-c, ios, objective-c-runtime

我想在运行时获取实例的返回值类。我有一个`SEL`类型 var 来存储选择器。我有一个名为的变量`id _instance`，它指向一个我知道它执行选择器的实例。在执行该方法之前，我想知道我是否必须这样做：

```
NSObject* returnValue=[_instance performSelector:_selector withObject:params.params]; 
```

或者：

```
[_instance performSelector:_selector withObject:params.params]; 
```

我读过一篇[文章，其中有人解释了使用 Objective-C 运行时的方法](https://stackoverflow.com/questions/7447559/in-objective-c-how-to-find-out-the-return-type-of-a-method-via-reflection)：

```
Method m = class_getClassMethod([_instance class], _selector);

char ret[256];
method_getReturnType(m, ret, 256);
NSLog(@"Return type: %s", ret); 
```

但是输出并不像 ret 是空的。

实际上，知道它是 void 还是有返回类型就足够了，但我不知道在哪里搜索。我已经阅读了[objective-c 运行时参考](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html)，但我发现的唯一内容是`method_getReturnType...`. 任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T13:56:28.217

如果您正在寻找实例方法，则需要使用`class_getInstanceMethod`而不是`class_getClassMethod`. 类方法和实例方法显然是不同的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T14:31:38.767

经过一段时间的搜索，我找到了使用 Spotify 来处理这类东西的库，名称为 MAObjcRuntime，你可以在[这里找到它](https://github.com/mikeash/MAObjCRuntime/downloads)

# spring - 使用 Jetty 以编程方式部署 servlet

> ID：10738816
> 
> 赞同：11
> 
> 时间：2012-05-24T13:50:56.453
> 
> 标签：spring, servlets, jetty, context.xml

我有一个希望使用 Jetty 以编程方式部署的 servlet。servlet 使用 Spring，它的 web.xml 指向 Spring 上下文 XML 文件，正如您所期望的那样。

目前，我只是尝试使用 Jetty 文档中的示例代码，但使用的是我自己的 servlet：

```
Server server = new Server(8080);

ServletContextHandler context = new ServletContextHandler(ServletContextHandler.SESSIONS);
context.setContextPath("/");
server.setHandler(context);

context.addServlet(new ServletHolder(new BatchReceiver()),"/br/*");

server.start();
server.join(); 
```

这会导致以下异常：

```
2012-05-24 14:43:20.190:INFO:oejs.Server:jetty-8.1.3.v20120416
2012-05-24 14:43:20.266:WARN:/:unavailable
java.lang.IllegalStateException: No WebApplicationContext found: no ContextLoaderListener registered?
at org.springframework.web.context.support.WebApplicationContextUtils.getRequiredWebApplicationContext(WebApplicationContextUtils.java:84)
at com.spiffymap.sealog.server.servlet.BatchReceiver.init(BatchReceiver.java:126)
at org.eclipse.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:492)
at org.eclipse.jetty.servlet.ServletHolder.doStart(ServletHolder.java:312)
at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
at org.eclipse.jetty.servlet.ServletHandler.initialize(ServletHandler.java:778)
at org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:258)
at org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:699)
at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
at org.eclipse.jetty.server.handler.HandlerWrapper.doStart(HandlerWrapper.java:90)
at org.eclipse.jetty.server.Server.doStart(Server.java:262)
at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
at com.spiffymap.sealog.server.servlet.TestBatchReceiver.main(TestBatchReceiver.java:26)
2012-05-24 14:43:20.335:INFO:oejs.AbstractConnector:Started SelectChannelConnector@0.0.0.0:8080 
```

如何设置我的 servlet 以便 Jetty 知道它的 web.xml 和 Spring 上下文在哪里？

任何帮助将不胜感激！

**编辑**

所以，显然我不需要 web.xml，但我**确实**需要将 Jetty 指向我的 Spring 上下文。我尝试过类似以下的方法：

```
context.setInitParameter("contextConfigLocation", "classpath*:**/*Context.xml"); 
```

但它不起作用（仍然产生相同的异常）。我还尝试在 ServletHolder 上设置“contextConfigLocation”，但无济于事。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-12T08:06:20.023

对于那些有兴趣的人，我让这个工作如下：

```
Server server = new Server(8090);

ServletContextHandler context = new ServletContextHandler(ServletContextHandler.SESSIONS);
context.setContextPath("/batch");

// Setup Spring context
context.addEventListener(new ContextLoaderListener());
context.setInitParameter("contextConfigLocation", "classpath*:**/testContext.xml");

server.setHandler(context);

// Add servlets
context.addServlet(new ServletHolder(new BatchReceiver()), "/receiver/*");
context.addServlet(new ServletHolder(new BatchSender()), "/sender/*");       

server.start();
server.join(); 
```

我错过的关键步骤是

```
context.addEventListener(new ContextLoaderListener()); 
```

加载 Spring 上下文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T14:09:53.943

如果要处理 web.xml，则需要使用 WebappContext，servlet 上下文对 web.xml 的内容一无所知

请参阅： http: [//git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/example-jetty-embedded/src/main/java/org/eclipse/jetty/embedded/OneWebApp。爪哇](http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/example-jetty-embedded/src/main/java/org/eclipse/jetty/embedded/OneWebApp.java)

# android - 我们如何使用 APK 主扩展文件中的图像？

> ID：10738818
> 
> 赞同：0
> 
> 时间：2012-05-24T13:51:06.460
> 
> 标签：android, apk, expansion

我在过去 2 天面临一个问题，我们如何在 Google Play 上上传大小超过 50Mb 的 .apk 文件，然后我找到了一种从链接[http://developer.android.com上传带有 APK 扩展文件的 .apk 的方法/guide/market/expansion-files.html](http://developer.android.com/guide/market/expansion-files.html) 现在 m 最终成功但现在 m 遇到问题我如何从对象中的主扩展文件中读取文件，就像它是 .obb 格式一样

但现在可以使用主扩展文件中的 .mp3 文件，例如：

```
AssetFileDescripto assetFileDescriptor = zipResourceFile.getAssetFileDescriptor( 
  "assets/all_types_of_people1.mp3");
mediaPlayer = new MediaPlayer();
mediaPlayer.setDataSource( assetFileDescriptor.getFileDescriptor(), 
  assetFileDescriptor.getStartOffset(),assetFileDescriptor.getLength()); 
```

但是我们如何将主扩展文件中的图像使用到 WebView 中呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T23:53:24.773

由于可以从 zipResourceFile 获取流，因此可以使用 BitmapFactory 从它们创建图像。

```
InputStream is = zipResourceFile.getInputStream("myFilePath.jpg");
BitmapFactory.Options bfo = new BitmapFactory.Options();
bfo.inPreferredConfig = Bitmap.Config.ARGB_8888;
Bitmap b = BitmapFactory.decodeStream(is, null, bfo); 
```

请注意，由于解码需要一些时间，因此您需要在 UI 线程之外执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T11:34:23.770

dagalpin 已经给出了如何获取 InputStream 的方法。

读取您的 HTML 文件并将其转换为 UTF-8 字符串。

并加载如下。

```
 // you can also load from an HTML string:
 String summary = "<html><body>You scored <b>192</b> points.</body></html>";
 webview.loadData(summary, "text/html", null);
 // ... although note that there are restrictions on what this HTML can do.
 // See the JavaDocs for loadData() and loadDataWithBaseURL() for more info.
```

我还没有测试过。但它似乎正在工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-14T12:19:20.137

而不是仅使用图像名称**扩展文件/myFilePath.jpg**

InputStream is = zipResourceFile.getInputStream("expansionfile/myFilePath.jpg");

# java - 为进度条视图运行线程 - Android

> ID：10738821
> 
> 赞同：0
> 
> 时间：2012-05-24T13:51:09.570
> 
> 标签：java, android, multithreading, progress-bar

我有一个 sax 解析器，它在用户点击开始按钮时运行。我想设置一个进度条视图，它将随着解析器的进展而更新。

我的代码目前如下：

```
public void onCreate (Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    setContentView(R.layout.progressview);

    try {
        XMLParser.parse(getAssets().open("deindexed.xml"), this);
    } catch (IOException e) {
        Log.d("XML","onCreate(): parse() failed");
        return;
    }

    //Start the Main Activity.
    System.out.println("Activity recreated");
    Intent i = new Intent(this, Simple.class);
    startActivity(i);

} 
```

问题是 setContentView 在解析器完成之前不会更新（我理解这是意料之中的）。

谁能告诉我转换上述内容的最佳方法，以便它使用线程运行？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T13:55:15.217

查看 ASyncTasks。或者，使用真正的线程并使用处理程序来回传递消息。使用 ASyncTasks 通常更容易/更整洁，但有时它不能像线程那样通用。对于您的 XML 解析器，ASyncTask 应该可以正常工作。

# html - 有效的“下层显示”条件注释

> ID：10738828
> 
> 赞同：2
> 
> 时间：2012-05-24T13:51:41.633
> 
> 标签：html, internet-explorer, conditional-comments

IE<9 不理解`data:`URI，因此我输出了两种不同的样式表：一种带有指向 IE 8 及以下版本的图像的正常链接，另一种带有 base64 编码的内联图像，用于其他浏览器。

```
<!--[if lte IE 8]>
<link rel="stylesheet" type="text/css" href="/public/themes/url.style.css">
<![endif]-->
<!--[if gt IE 8]>-->
<link rel="stylesheet" type="text/css" href="/public/themes/b64.style.css">
<!--<![endif]--> 
```

问题：在 IE9 中，我在`-->`页面上看到了杂散输出。因为它在里面，`<head>`所以它出现在页面的最顶部。我应该如何摆脱它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T14:01:39.070

我明白了。我确实搜索了有效的条件评论，并找到[了一篇文章告诉我做我已经在做](http://www.456bereastreet.com/archive/200511/valid_downlevelrevealed_conditional_comments/)的事情，但后来我偶然在[另一个答案](https://stackoverflow.com/a/4821893/209139)中遇到了一个顺便说一句，这向我展示了正确的方法：

```
<!--[if lte IE 8]>
<span>This is for IE 7 and below.</span>
<![endif]-->
<!--[if gt IE 8]><!-->
<span>This is for all other browsers (IE 8, and browsers which don't do conditional comments).</span>
<!--<![endif]--> 
```

看到区别：`<!--[if gt IE 8]><!-->`而不是`<!--[if gt IE 8]>-->`.

# java - 从 servlet 调用图像和链接

> ID：10738831
> 
> 赞同：2
> 
> 时间：2012-05-24T13:51:45.783
> 
> 标签：java, servlets

使用此代码，我可以从 servlet 呈现图像，但我的业务说。我需要添加一个链接说“www.google.com”。如果我单击此图像。有什么方法可以访问图像带有链接。我需要直接从 servlet 中刷新它，不应该使用 jsp。任何人都可以帮助我。

```
 public void doPost(HttpServletRequest req, HttpServletResponse resp) throws IOException {

        ServletContext sc = getServletContext();
        String filename = sc.getRealPath("image.JPG");

        resp.setContentType("image/jpeg");

        // Set content size
        File file = new File(filename);
        resp.setContentLength((int)file.length());

        // Open the file and output streams
        FileInputStream in = new FileInputStream(file);
        OutputStream out = resp.getOutputStream();

        // Copy the contents of the file to the output stream
        byte[] buf = new byte[1024];
        int count = 0;
        while ((count = in.read(buf)) >= 0) {
            out.write(buf, 0, count);

        }
        in.close();
        out.close();
    }

    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        doPost(request , response);
        // TODO Auto-generated method stub
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T13:55:57.507

您需要在标记中的`<a>`元素周围放置一个元素。`<img>`

```
<a href="http://www.google.com">
    <img src="imageServlet" />
</a> 
```

* * *

顺便说一句，这`sc.getRealPath()`表明您的图像文件*已经*在公共 webcontent 文件夹中。为什么不直接使用`<img src="image.JPG">`呢？还是 servlet 过于简单化了？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T14:00:09.223

如果我不正确，您可以返回带有图像链接的 html：

```
<a href="http://www.google.com"><img src="yourImageRenderingServletPath"></a> 
```

因此，您将拥有一个呈现 html 的 servlet 和第二个呈现图像的 servlet。为了防止浏览器中的图像缓冲，您可以添加随机参数 id = (new Random()).nextInt()：

```
<a href="http://www.google.com"><img src="yourImageRenderingServletPath?id=124"></a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T14:02:33.797

简而言之，您要添加一个链接，例如 google.com，然后单击它会显示图像。

首先，您不需要发送图像作为响应，而是需要锚链接并在该链接上添加 javascript 函数 onclick。

```
out.println("<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 " +
                                        "Transitional//EN\">\n" +
                "<HTML>\n" +
                "<HEAD><TITLE>Hello WWW</TITLE></HEAD>\n" +
                "<BODY>\n" +
                "<a href='www.google.com'><img src='imagePath' /></a>\n" +
                "</BODY></HTML>"); 
```

# php - 如何将文本文件中的数据插入 mysql？

> ID：10738834
> 
> 赞同：-1
> 
> 时间：2012-05-24T13:52:00.760
> 
> 标签：php, json

我在文本文件中有一些 JSON 格式的数据，如下所示。我需要使用 php 将此数据插入 mysql 但不能这样做。

```
{"address":"+92 334 6629424","service_center":"Test Sending Sms","id":3,"locked":0,"person":0,"protocol":0,"read":0,"reply_path_present":2,"seen":0,"error_code":0,"status":1,"date":1873326412,"thread_id":1,"type":-1} 
```

我的 PHP 文件有这样的代码。

```
<?php $source_file  = "SMS2012-05-21.txt"; $handle = fopen("SMS2012-05-21.txt", "r");
$col_names = implode(",", fgetcsv($handle)); // Getting comma separated list of col name

 $link = mysql_connect('localhost', 'root', '');
 mysql_select_db("messages");
 while (($data = fgetcsv($handle)) !== FALSE) {
 $values = "";
 foreach($data as $key => $value) {
     if ($key != 0) $values .= ", ";
     $values .= "'".mysql_escape_string($value)."'";
 }
 mysql_query('INSERT INTO messages ('.$col_names.') VALUES ('.$values.')');
 }
 ?> 
```

我找不到任何结果或任何错误。任何人都可以在这方面帮助我，我错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T15:03:43.497

您应该使用[json_decode](http://pt.php.net/manual/en/function.json-decode.php)函数来操作 json 数据。

```
<?php

  $source_file  = "SMS2012-05-21.txt";
  $string = file_get_contents($source_file);
  $json = json_decode($string,true);

  //DB Conn Handling Stuff

  $cols = array(); $values = array();

  foreach($json as $key=>$value)
  {
      array_push($cols,'`' . $key . '`');
      if(is_string($value))
      {
         array_push($values,'\''.$value.'\'');
      }
      else
      {
         array_push ($values, $value);
      }
  }

  $col_name = implode(',',$cols);
  $col_value = implode(',',$values);

  $query = 'INSERT INTO messages('.$col_name.') VALUES ('.$col_value.')';
  mysql_query($query,$connection) or die(echo mysql_error());      

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T14:25:42.507

也许我错过了一些东西，你应该这样使用它：

```
<?php $source_file  = "SMS2012-05-21.txt"; 
$handle = fopen("SMS2012-05-21.txt", "r");
$data = fread($handle, filesize($source_file));
$jsonArray = json_decode($data, true);

$keys = implode(',', array_keys($jsonArray));
$values = "'" . implode("','", $jsonArray) . "'";

$link = mysql_connect('localhost', 'root', '');
mysql_select_db("messages");

mysql_query('INSERT INTO messages ('.$keys.') VALUES ('.$values.')'); 
```

# java - 无法使用 java 连接字符串连接到 SQL Server 2008 R2

> ID：10738835
> 
> 赞同：-1
> 
> 时间：2012-05-24T13:52:02.173
> 
> 标签：java, sql, sql-server-2008, sql-server-2008-r2

我无法使用 java 连接 SQL Server 2008 R2。相同的代码适用于 SQL Server 2005。

我试图找出 sqlserver 服务的端口和 ip，它给了我

```
ip - 0.0.0.0 and port 1434 
```

我尝试使用与 SQL Server 2005 相同的连接字符串，但它在 SQL Server 2008 中对我不起作用。这是我的连接字符串：

```
conn=DriverManager.getConnection(jdbc:sqlserver://127.0.0.1:1434:DatabaseNameconnect?autoReconnect=true,user, password); 
```

这是错误：

```
jdbc:sqlserver://127.0.0.1:1434;DatabaseName=connect;user=falcon;Password=admin
Could not connect to database
com.microsoft.sqlserver.jdbc.SQLServerException: The TCP/IP connection to the host  has failed. java.net.ConnectException: Connection refused: connect
    at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDriverError(Unknown Source)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.connect(Unknown Source)
    at com.microsoft.sqlserver.jdbc.SQLServerDriver.connect(Unknown Source)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at com.dnb.discovery.connection.ConnectionBean.makeMsSqlConnection(ConnectionBean.java:62)
    at com.dnb.discovery.factory.MssqlDAOFactory.<init>(MssqlDAOFactory.java:18)
    at com.dnb.discovery.dao.mssqldao.MssqlCompanyDAO.<init>(MssqlCompanyDAO.java:8)
    at com.dnb.discovery.relevance.Relevance.modifyRelevanceIndex(Relevance.java:67)
    at com.dnb.discovery.relevance.Relevance.calulateRelevanceScore(Relevance.java:36)
    at com.dnb.discovery.dao.SolrDAO.readDataFromSolr(SolrDAO.java:222)
    at com.dnb.discovery.searchservice.SearchService.buyerTextSearchAnonymous(SearchService.java:124)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.sun.xml.internal.ws.api.server.InstanceResolver$1.invoke(Unknown Source)
    at com.sun.xml.internal.ws.server.InvokerTube$2.invoke(Unknown Source)
    at com.sun.xml.internal.ws.server.sei.EndpointMethodHandler.invoke(Unknown Source)
    at com.sun.xml.internal.ws.server.sei.SEIInvokerTube.processRequest(Unknown Source)
    at com.sun.xml.internal.ws.api.pipe.Fiber.__doRun(Unknown Source)
    at com.sun.xml.internal.ws.api.pipe.Fiber._doRun(Unknown Source)
    at com.sun.xml.internal.ws.api.pipe.Fiber.doRun(Unknown Source)
    at com.sun.xml.internal.ws.api.pipe.Fiber.runSync(Unknown Source)
    at com.sun.xml.internal.ws.server.WSEndpointImpl$2.process(Unknown Source)
    at com.sun.xml.internal.ws.transport.http.HttpAdapter$HttpToolkit.handle(Unknown Source)
    at com.sun.xml.internal.ws.transport.http.HttpAdapter.handle(Unknown Source)
    at com.sun.xml.internal.ws.transport.http.server.WSHttpHandler.handleExchange(Unknown Source)
    at com.sun.xml.internal.ws.transport.http.server.WSHttpHandler.handle(Unknown Source)
    at com.sun.net.httpserver.Filter$Chain.doFilter(Unknown Source)
    at sun.net.httpserver.AuthFilter.doFilter(Unknown Source)
    at com.sun.net.httpserver.Filter$Chain.doFilter(Unknown Source)
    at sun.net.httpserver.ServerImpl$Exchange$LinkHandler.handle(Unknown Source)
    at com.sun.net.httpserver.Filter$Chain.doFilter(Unknown Source)
    at sun.net.httpserver.ServerImpl$Exchange.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T15:07:39.757

您的问题有很多可能性：

*   防火墙
*   没有 TCP/IP 连接器
*   一些服务没有运行

尝试使用 SQL-management Studio 连接到您的数据库。如果这可行，请尝试通过 TCP/IP 使用 SQL-Authentification 进行连接。

**更新**

查看[http://msdn.microsoft.com/en-en/library/ms143693(v=sql.90).aspx上的文档](http://msdn.microsoft.com/en-en/library/ms143693(v=sql.90).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T14:40:35.527

一个明显的问题是 SQL Server 侦听端口 1433，而不是 1434。我已经在[其他地方](https://stackoverflow.com/questions/6649518/cannot-connect-to-mssql-due-to-login-based-server-access-validation-failed-with)回答过这个问题，但我不能确定它是否与您的问题完全匹配，因为您没有告诉我们您的错误消息是什么得到。

# ruby-on-rails - Resque worker 日志会减慢 Rails 的响应速度

> ID：10738836
> 
> 赞同：1
> 
> 时间：2012-05-24T13:52:04.877
> 
> 标签：ruby-on-rails, ruby-on-rails-3, resque

我有一个 Resque 作业，它从远程服务器中提取一个 csv 数据列表，然后运行 ​​+40k 条目以将任何新项目添加到现有数据库表中。该作业运行良好，但它严重减慢了对服务器的任何后续请求的响应时间。在我启动“bundle exec rails server”的控制台中，虽然作业正在运行，但我看不到打印语句。然而，一旦我点击了我的 Rails 服务器（通过页面引用），我看到多个 SELECT / INSERT 语句在服务器响应之前滚动。SELECT/INSERT 语句显然是由我的 Resque 作业生成的，但奇怪的是，它们等待打印到我通过浏览器访问服务器的控制台单元。

确实感觉我做错了什么或没有遵循“轨道方式”。建议？

**这是我的 Resque 作业中执行 SELECT/INSERTS 的代码**

```
# data is an array of hashes formed from parsing csv input. Max size is 1000
ActiveRecord::Base.transaction do
  data.each do |h|
    MyModel.find_or_create_by_X_and_Y( h[:x], h[:y], h )
  end
end 
```

**软件堆栈**

*   导轨 3.2.0
*   PostgreSQL 9.1
*   Resque 1.20.0

**编辑**

我终于花时间对此进行更多调试。即使是一个非常简单的工作者，如下所示，也会减慢下一个服务器响应。在我启动 rail sever 进程的控制台中，我看到只有在我 ping 服务器后才打印来自工作人员的 b/c stdout 延迟。

```
 def perform()
    s = Time.now
    0.upto( 90000 ) do |i|
      Rails.logger.debug  i * i
    end
    e = Time.now
    Rails.logger.info "Start: #{s} ---- End #{e}"
    Rails.logger.info "Total Time: #{e - s }"
  end 
```

如果我在启动 rails 时抑制标准输出，我可以让 rails 服务器再次恢复正常响应，但似乎没有必要这样做......`bundle exec rails server > /dev/nul`

有关解决此问题的更好方法的任何意见？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T23:35:16.927

我认为[这个对“使用 Resque 记录问题”的回答](https://stackoverflow.com/a/6508720/109618)会有所帮助。

Rails 服务器在开发模式下打开了日志文件。我的理解——我需要确认这一点——是它在写入任何新内容之前刷新日志，以保持顺序。如果您将 Rails 服务器连接到终端，它希望首先输出所有更改！如果您的工作人员已将大量数据写入日志，这可能会导致大量延迟。

注意：这已经发生在我身上一段时间了，但我最近才开始关注它。

# facebook - 将参数传递给 facebook 应用程序

> ID：10738838
> 
> 赞同：2
> 
> 时间：2012-05-24T13:52:16.277
> 
> 标签：facebook, facebook-apps

经过大量尝试后，我仍然卡住了，我想在将参数传递给 facebook 应用程序时确认一件事。

是否每个参数都传递给应用程序，例如，如果我有一个应用程序正在运行

[https://apps.facebook.com/example/index.php](https://apps.facebook.com/example/index.php)，我这样做[https://apps.facebook.com/example/index.php?app_data=](https://apps.facebook.com/example/index.php?app_data=) {"para1":"para1"}，这会被通过？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T05:32:11.810

要获取参数，我只需执行 $_GET 并从典型的 URL（如 apps.facebook.com//index.php?var=）中检索参数

所以，在 index.php 上，我只是在做

$_GET['var'] 从而得到 var

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T14:17:38.217

是的，在画布应用程序中，每个参数都被传递。

对于粉丝页面应用，您将在 app_data 参数中以 json 字符串形式获取数据。 [https://www.facebook.com/YourPage?v=app_1234567890&app_data=any_string_here](https://www.facebook.com/YourPage?v=app_1234567890&app_data=any_string_here)

仅供参考：[签名请求](https://developers.facebook.com/docs/authentication/signed_request/)

```
 $signed_request = $facebook->getSignedRequest();

$app_data = '';
if(isset($signed_request["app_data"])){
    $app_data = $signed_request["app_data"];
    } 
```

# sql-server-2005 - 对文件名使用全文搜索

> ID：10738844
> 
> 赞同：0
> 
> 时间：2012-05-24T13:52:31.623
> 
> 标签：sql-server-2005, full-text-search

我有一个表，它存储文件名的树状结构。此表中当前有 800 万条记录。我正在研究一种快速查找名称中嵌入了特定序列号的文件列表的方法。

```
FS_NODES
-----------------------------------
NODE_ID              bigint PK
ROOT_ID              bigint
PARENT_ID            bigint
NODE_TYPE            tinyint
NODE_NAME            nvarchar(250)
REC_MODIFIED_UTC     datetime
REC_DELETION_BIT     bit 
```

示例文件名（存储在 node_name 中）：
scriptname_SomeSerialNumber_201205240730.xml

正如预期的那样，查找文件的 LIKE 语句需要几分钟来扫描整个表，并且希望对此进行改进。名称没有一致的模式，因为每个开发人员都喜欢创建自己的命名约定。

我尝试使用全文搜索并且非常喜欢这个想法，但无法让它根据名称中的关键字查找文件。我相信问题是由于下划线造成的。

关于如何让它发挥作用的任何建议？我在目录中使用中性语言。

```
@@VERSION
Microsoft SQL Server 2005 - 9.00.4035.00 (Intel X86) 
Nov 24 2008 13:01:59 
Copyright (c) 1988-2005 Microsoft Corporation
Standard Edition on Windows NT 5.2 (Build 3790: Service Pack 2) 
```

有没有办法更改目录并手动拆分关键字？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T13:57:44.417

全文搜索不是答案。它用于单词，而不是部分字符串匹配。您应该做的是，在此表中插入或更新数据时，将与将来搜索相关的文件名部分提取到您可以索引的自己的列中。毕竟，按照您使用它们的方式，它们是独立的数据片段。您还可以考虑强制执行更可预测的命名约定，而不是让开发人员为所欲为。

**根据用户请求**编辑：****

 **添加一个计算列，即 REPLACE(filename, '_', ' ')。或者不是计算列，而是您手动填充现有数据并更改插入过程以处理前进的列。或者甚至将它们分成相关表中的单独行。**

# asp.net - ASP.NET 网站和 Sybase ASE 数据库

> ID：10738852
> 
> 赞同：0
> 
> 时间：2012-05-24T13:52:58.573
> 
> 标签：asp.net, database, .net-4.0, sap-ase

是否可以在 ASP.NET 网站中使用来自 Sybase ASE 数据库的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T14:00:57.200

您将需要创建从 Web 服务器到数据库的 ODBC 连接。

以下是 Sybase 的 asp.net[连接字符串](http://www.dofactory.com/Connect/Connect.aspx#_self100)：

# javascript - 根据用户输入隐藏/显示 HTML 页面的部分

> ID：10738863
> 
> 赞同：2
> 
> 时间：2012-05-24T13:53:25.223
> 
> 标签：javascript, html

我有一个网页，列出了公司的空缺职位，格式如下：

标题：JavaScript 开发人员

州：马里兰

描述: a;dlksfja;slfdja;sklfja;sldkfjas a;sldkfj a;lskdf a;slkdfj a;lsdkfj a;sdfj a;lsdkfj a;lsdkfj a;lsdkfj ;alsdkfj a;lskdjf ;alskdjf a;lsdkfj a;lsdkfj a; lsdkfj a;lsdkfj a;slkdfj a;lskdfj a;lsdkfj a;lsdkjf ;alskdjf ;alskdjf ;alsdkjf ;alsdkfj a;lskdjf a;lskdj f;alsdkfj a;lsdkfj as;dlfkj a;slkdfj ;alsdkjf ;asld jf;alskdjf; alsdkjf a;sdlfjk asd jf;asdkjlf ;asdklf j;as dfla;skdj f;alskdjf a;sld fa;sldkfj a;lsdkfj a;sldfj

薪资范围：$75,000 - $80,000

类别：软件开发、UI/UX

* * *

职位：网络安全分析师

州：伊利诺伊州

描述: a;dlksfja;slfdja;sklfja;sldkfjas a;sldkfj a;lskdf a;slkdfj a;lsdkfj a;sdfj a;lsdkfj a;lsdkfj a;lsdkfj ;alsdkfj a;lskdjf ;alskdjf a;lsdkfj a;lsdkfj a; lsdkfj a;lsdkfj a;slkdfj a;lskdfj a;lsdkfj a;lsdkjf ;alskdjf ;alskdjf ;alsdkjf ;alsdkfj a;lskdjf a;lskdj f;alsdkfj a;lsdkfj as;dlfkj a;slkdfj ;alsdkjf ;asld jf;alskdjf; alsdkjf a;sdlfjk asd jf;asdkjlf ;asdklf j;as dfla;skdj f;alskdjf a;sld fa;sldkfj a;lsdkfj a;sldfj

薪资范围：$85,000 - $90,000

类别：网络，网络

* * *

标题：网络软件工程师 - Hadoop

州：马里兰

描述: a;dlksfja;slfdja;sklfja;sldkfjas a;sldkfj a;lskdf a;slkdfj a;lsdkfj a;sdfj a;lsdkfj a;lsdkfj a;lsdkfj ;alsdkfj a;lskdjf ;alskdjf a;lsdkfj a;lsdkfj a; lsdkfj a;lsdkfj a;slkdfj a;lskdfj a;lsdkfj a;lsdkjf ;alskdjf ;alskdjf ;alsdkjf ;alsdkfj a;lskdjf a;lskdj f;alsdkfj a;lsdkfj as;dlfkj a;slkdfj ;alsdkjf ;asld jf;alskdjf; alsdkjf a;sdlfjk asd jf;asdkjlf ;asdklf j;as dfla;skdj f;alskdjf a;sld fa;sldkfj a;lsdkfj a;sldfj

薪资范围：$120,000 - $130,000

类别：软件工程、网络、大数据

等等

当我只有几个工作要列出时，上面的风格很好。现在我有将近 100 个，我需要给用户一种方法来过滤他们看到的工作。我想按“状态”和各种“类型”进行过滤。请参阅上面的一些示例，并注意每个作业只能有一个状态，但它可能有 1 个或多个类型。

我想在页面顶部添加一个简单的过滤部分，用户可以在其中执行以下操作：

1) 从列出美国各州的“州”下拉菜单中选择，外加“全部”选项。

2) 从“类型”下拉列表中选择，该下拉列表列出了我们用于对工作进行分类的每种类型，以及“全部”选项。

3) 单击“过滤器”按钮，使匹配的作业可见并隐藏不匹配的作业。

我不需要状态或类型字段中的多选功能。

任何有关如何以最简单的方式执行此操作的建议将不胜感激。该网站不涉及任何数据库 - 它只是一个静态网站，我每周更新一次此页面，因为新工作的开放和关闭。一旦我有了这个工作，简单的手动更新就完全没问题了。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T13:58:34.877

你需要 JavaScript （纯 HTML 不可能）

使用 id 在 div 中定义您的可过滤内容，然后使用类似

```
 <script type="text/javascript">
   var sel = document.getElementById('yourDropDown');
   sel.onchange = function() {
      var show = document.getElementById('yourDivId');
      show.style.display='none';
   }
   </script> 
```

干杯

# multithreading - 检测线程树何时完成

> ID：10738864
> 
> 赞同：1
> 
> 时间：2012-05-24T13:53:25.950
> 
> 标签：multithreading, tree, continuations

我正在创建一个简单的网络蜘蛛。它所做的只是接受一个 URL，下载 HTML 并提取剩余的 URL。然后它对每个新 URL 重复该过程。我还确保我不会两次访问同一个 URL，并且我限制了并发下载的数量。

在每个唯一的 URL 都用完之后（可能会运行几天、几周或直到我死了之后），我想执行一个操作，比如更新 UI 或简单地退出应用程序。

问题是，我不知道如何检测最后一个线程何时完成运行。

这个线程问题解决了吗？我是不是看错了问题？

一个想法是让每个线程保持活动状态，直到其所有子线程完成（加入）。问题是线程的数量呈指数增长。对于这样一个长时间运行的进程，它会很快耗尽操作系统资源。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T13:59:20.953

我不确定我们在说什么语言，所以我会笼统地说。

您需要为每个 URL 建立一个数据结构，以跟踪从中生成了多少“子”页面。每当一个 URL 被爬取时，它都会有一个“父”数据结构。每当找到新页面时，都会将其添加到父级的树数中。每当一个页面被爬取时，父级的树数就会减少。这需要以同步的方式完成，因为多个线程将对其进行更新。

您实际上可能想要保存整个 URL 结构。根 URL“http://foo.x/”有指向“/1.html”和“/2.html”的链接，所以它的子数是 2。根 URL 有一个`null`父级和“1”和“2” " 有根的父级。当“1.html”被爬取时，根的子节点数减为 1。但如果“1.html”内有 3 个链接，则根的计数增加到 4。如果你想跟踪树然后“1.html”子项计数变为 3，依此类推。然后，当“1.html”的子项之一被爬取时，“1.html”的计数变为 2，根 URL 的计数变为 3。

您当然*不*希望保留线程，然后像您提到的那样稍后加入 - 您的线程数会爆炸。您应该使用线程池并将 URL 提交给蜘蛛，每个 URL 及其在 URL 树中的关联节点，以便它们可以被相同的线程蜘蛛蜘蛛。

当一个 URL 被爬取，并且子项计数变为 0 时，您就知道您已经爬取了整个树，并且该 URL 可以从工作列表中删除并移动到完成列表中。同样，这些列表需要同步，因为多个线程将在它们上运行。

希望这会有所帮助。

# php - md5(file_contents_as_string) 会等于 md5_file(/path/to/file) 吗？

> ID：10738866
> 
> 赞同：33
> 
> 时间：2012-05-24T13:53:28.000
> 
> 标签：php, md5, md5-file

如果我做：

`<?php echo md5(file_get_contents("/path/to/file")) ?>`

...这将始终产生与以下相同的哈希：

`<?php echo md5_file("/path/to/file") ?>`

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-05-24T14:02:30.263

是的，它们返回相同：

```
var_dump(md5(file_get_contents(__FILE__)));
var_dump(md5_file(__FILE__)); 
```

在我的情况下返回这个：

```
string(32) "4d2aec3ae83694513cb9bde0617deeea"
string(32) "4d2aec3ae83694513cb9bde0617deeea" 
```

编辑：查看这两个函数的源代码：[https](https://github.com/php/php-src/blob/master/ext/standard/md5.c) ://github.com/php/php-src/blob/master/ext/standard/md5.c （第 47 和 76 行）。它们都使用相同的函数来生成哈希，只是该`md5_file()`函数首先打开文件。

第二次编辑：基本上该`md5_file()`函数根据文件内容生成哈希，而不是像文件名这样的文件元数据。这与`md5sum`Linux 系统上的工作方式相同。看这个例子：

```
pr@testumgebung:~# echo foobar > foo.txt
pr@testumgebung:~# md5sum foo.txt
14758f1afd44c09b7992073ccf00b43d  foo.txt
pr@testumgebung:~# mv foo.txt bar.txt
pr@testumgebung:~# md5sum bar.txt
14758f1afd44c09b7992073ccf00b43d  bar.txt 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T14:05:56.887

`md5_file`命令只是用 md5 散列文件的*内容*。

如果参考旧的 md5_file PHP 实现（但原理还是一样的）[源码](http://pear.php.net/package/PHP_Compat/docs/latest/__filesource/fsource_PHP_Compat__PHP_Compat-1.6.0a3CompatFunctionmd5_file.php.html)：

```
function php_compat_md5_file($filename, $raw_output = false)
{
// ...
// removed protections

 if ($fsize = @filesize($filename)) {
        $data = fread($fh, $fsize);
    } else {
        $data = '';
        while (!feof($fh)) {
            $data .= fread($fh, 8192);
        }
    }

    fclose($fh);

    // Return
    $data = md5($data);
    if ($raw_output === true) {
        $data = pack('H*', $data);
    }

    return $data;
} 
```

因此，如果您使用`md5`任何字符串或内容进行散列，您将始终获得与`md5_file`（对于相同的编码和文件内容）相同的结果。

在这种情况下，如果您通过 md5 对文件的内容进行哈希处理，`file_get_content()`或者如果您使用`md5_file`或即使您使用`md5`与文件内容相同的命令，您将始终得到相同的结果。

例如，您可以更改一个文件的文件名，对于两个具有相同内容的不同文件，它们将产生相同的 md5 哈希。

例如：考虑两个包含“stackoverflow”（不带引号）的文件，分别命名为 1.txt 和 2.txt

```
md5_file("1.txt");
md5_file("2.txt"); 
```

会输出

```
73868cb1848a216984dca1b6b0ee37bc 
```

如果您`md5("stackoverflow")`或如果您`md5(file_get_contents("1.txt"))`或`md5(file_get_contents("1.txt")).`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-12-20T05:42:21.237

> 基于文件内容，而不是像 BOM 或文件名这样的文件元数据

这对 BOM 是不正确的。BOM 是文件内容的一部分，您可以在任何非 unicode 文件编辑器中看到它的三个字节。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-24T14:29:56.293

是的，我试了好几次。就我而言，结果为：

```
<?php echo md5(file_get_contents("1.php")) ?>
<br/>
<?php echo md5_file("1.php") ?> 
```

产生输出为：

```
660d4e394937c10cd1c16a98f44457c2
660d4e394937c10cd1c16a98f44457c2 
```

这在两条线上似乎都是等效的。

# ruby-on-rails - Rails 生成脚手架 -> NameError: uninitialized constant

> ID：10738867
> 
> 赞同：0
> 
> 时间：2012-05-24T13:53:31.993
> 
> 标签：ruby-on-rails, ruby, rake, nameerror, rails-generate

我有这个愚蠢的东西......我确定我只是错过了一些明显的东西，但雅虎搜索并没有解决问题。

我所做的就是

```
rails new TestApp 
```

和

```
cd TestApp
rails generate scaffold User name:string age:integer
bundle exec rake db:create
bundle exec db:migrate 
```

效果很好。

但是当我去IRB时，没有用户！

```
u = User.first
    NameError: uninitialized constant User
    from (irb):3
    from /usr/bin/irb:12:in `<main>' 
```

这里有什么问题？

干杯

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-24T13:57:00.673

不要使用 irb，而是：

```
rails console 
```

这将导入您项目的每个模型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T13:56:53.527

您尚未创建用户，并且您使用的是普通的旧 irb 而不是`rails console`.

打开一个`rails console`并尝试：

```
User.create(:name => "Jimmy", :age => 14) 
```

然后尝试

```
u = User.first 
```

# c# - 如何按类中使用的顺序自动对方法进行排序？

> ID：10738868
> 
> 赞同：1
> 
> 时间：2012-05-24T13:53:33.147
> 
> 标签：c#, visual-studio, coding-style

想象一下以下公共方法：

```
public void DoSomethingWithInput(Input input)
{
    if (IsInputNice(input))
    {
        DoNiceThingsWithInput(input);
    }
    else if (IsInputUgly(input))
    {
        DoUglyThingsWithInput(input);
    }
    else
    {
        HandleUnknownInput(input);
    }
} 
```

现在，如果内部使用的所有方法都是私有的，我希望能够对它们进行排序，以便它们按照使用顺序出现在方法*下方：*`DoSomethingWithInput`

```
private bool IsInputNice(Input input) { }
private void DoNiceThingsWithInput(Input input) { }
private bool IsInputUgly(Input input) { }
private void DoUglyThingsWithInput(Input input) { }
private void HandleUnknownInput(Input input) { } 
```

换句话说，我希望能够首先通过访问修饰符和使用顺序对所有方法进行排序。有没有办法自动实现这一点（例如通过一些 Visual Studio 扩展）？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T14:07:18.170

也许[Regionerate](http://www.rauchy.net/regionerate/docs/2007/05/introduction.html)可以帮助你？

“Regionerate 允许您在代码中定义区域并确定成员（字段、方法、属性等）应放置在其中的方式。”

# .net - Visual Studio上的ezdb文件？

> ID：10738871
> 
> 赞同：1
> 
> 时间：2012-05-24T13:53:36.703
> 
> 标签：.net, database, visual-studio, file, plaintext

我在 Windows 上有一个 EZDB 文件，它是一个“普通”文本文件，可以用任何文本编辑器打开。（见图片）但一开始它说的是 EZDB（十六进制的 0xx455A）。有些部分是纯文本的，但它还有其他数据，我认为它是数据库格式。

我查了一下，但我找不到**任何**关于视觉音频的东西。PHP和Perl的东西，但是这个文件是生成一个桌面应用程序（不确定是VS）。

![ezdb 头文件](../Images/84ea2300969d5a784923926d5162a32f.png)

有人见过这个吗？谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T10:29:14.453

似乎是一个[voidtools “Everything”](http://www.voidtools.com/)未压缩的数据文件！

“Everyting”用于通过名称超快速定位文件和文件夹。它将该信息存储在名为 Everything.[MACHINENAME].[USERNAME].db 的文件中

# tfsbuild - 将 TFS 构建配置为在构建代理的子集上运行

> ID：10738874
> 
> 赞同：2
> 
> 时间：2012-05-24T13:53:52.367
> 
> 标签：tfsbuild

我相信我们的问题是我们需要在 TFS 2010 构建代理的子集上运行特定构建，因为它们之间的配置存在差异。如果它们的配置完全相同，这将不是问题，但在我们的特定情况下，这远非理想，因为我们正在使用 TFS 的实验室管理功能，这需要在目标实验室 VM 上安装构建代理。构建的一部分包括使用 Sandcastle 构建文档，这需要 Visual Studio SDK，而后者又需要 Visual Studio。如果我们将构建排队并针对我们的原始构建代理运行，一切都很好，但如果它在其中一个实验室 VM 上运行，它就会失败。如果我们安装了 Visual Studio 和其他所有东西，它就可以工作，

那么，有没有一种方法可以设置“构建代理亲和力”，或者可能是另一种解决方案？我知道我可以创建另一个构建控制器并以这种方式将它们分开，但据我了解，一个项目集合仅与一个构建控制器相关联，我们需要同一个团队项目来使用多个构建控制器。我们使用的是完整版的 TFS 2010。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T13:57:11.830

您应该通过设置适当的标签来区分不同的构建代理。[在这里](http://www.codewrecks.com/blog/index.php/2010/06/14/managing-multiple-tfs-build-agents-with-tag/)
查看一个不错的资源。

# c# - 限制某些用户对某些文件夹的文件访问

> ID：10738875
> 
> 赞同：0
> 
> 时间：2012-05-24T13:54:02.967
> 
> 标签：c#, authentication, iis-7, web-config, authorization

我有一个站点，用户使用表单身份验证登录该站点，我想在该站点中将特定文件夹中的文件的访问权限限制为某些用户。

因此，例如，文件夹`dir/foo`将可访问`user1`但不可访问`user2`或`user3`文件夹`dir/bar`可访问`user2`但不可访问`user1`或`user3`。

上面提到的文件夹不是在我部署站点时创建的。它们是在网站的整个生命周期中创建的，我可以通过代码（通过文件名）知道谁应该有权访问哪些文件。

我的设置是这样的，我有一些具有`Member`. A`Member`代表一家公司。每个`Member`都有角色为`Seller`和`Buyer`的用户`Viewer`。现在，每个用户，无论他是`Member`、还是应该能够看到属于他公司的文档。所以，如果有文件那么应该可以看到，应该可以看到（是所属的公司），应该可以看到（属于），应该可以看到（属于） ，但应该看不到（如果他属于`Seller``Buyer``Viewer``Seller1``a.txt``Seller1``Member1``Member1``Seller1``Buyer1``Member1``Viewer1``Member1``Buyer2``Member2`）。文档放置在以文档所属用户的名称命名的文件夹中。例如，属于的文档`Seller1`位于名为`Seller1`. 此外，还有一个名为的用户`Admin`可以查看所有文档。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T13:58:58.370

您可以在 web.config 文件中执行此操作。如果您将用户组织成组会更好，但可以逐个用户地进行：

```
<configuration>
    <system.web>
        <authorization>
            <!-- GLOBAL authorization -->
            <allow users="user1" />
            <deny users="user2, user3"/>
            <allow roles="GoodUsers" />
            <deny roles="BadUsers, MouthBreathers"/>
        </authorization>
    </system.web>
    <!-- local individual folder/file authorization
    <location path="/dir/foo">
        <system.web>
            <authorization>
                <allow users="user1" />
                <deny users="user2, user3"/>
                <allow roles="GoodUsers" />
                <deny roles="BadUsers, MouthBreathers"/>
            </authorization>
        </system.web>
    </location>
</configuration> 
```

**编辑：** 鉴于您更新的描述添加了文档管理方面和将公司添加到组合中的附加过滤器，您可以通过几种方法来做到这一点。我建议的主要方法是将所有文档放在根文件夹之外，这样任何随机用户都无法浏览它们。然后构建一个提供搜索能力的基于页面的界面。根据文件夹/文档的数量，这可以通过多种方式完成。如果每个文件夹的文档数量很少（每个文件夹少于 1000 个，少于 1000 个文件夹），那么您可以轻松地让您的系统直接访问文件系统以提供对这些文件列表的读取访问权限。如果您有更多，我建议您使用外部机制将这些文件索引到易于搜索的数据库中。

最后，为了向用户提供文件，您将构建第二个页面，其具体职责是获取特定文件并将其作为二进制流提供。

# android - 可绘制的矩形形状不会显示为复选框选择器项

> ID：10738876
> 
> 赞同：8
> 
> 时间：2012-05-24T13:54:11.690
> 
> 标签：android, checkbox, shape

我已经定义了一个可绘制的矩形，如下所示：

```
<shape xmlns:android="http://schemas.android.com/apk/res/android" 
    android:shape="rectangle">

    <corners android:radius="4dip"/>
    <solid android:color="#FF000000" />
    <stroke android:width="1dip" android:color="@color/service_checkbox_disabled_unchecked_stroke" />

</shape> 
```

我可以毫无问题地将drawble显示为imageView。但是，它应该是复选框的一种状态的可绘制对象。我的复选框按钮的选择器定义如下：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android" >

    <item android:state_checked="true" android:drawable="@drawable/bg_services_tick_unchecked_disabled" />
    <item android:state_checked="false" android:drawable="@drawable/bg_services_tick_unchecked_disabled" />

</selector> 
```

最后是我的复选框：

```
<CheckBox
    android:id="@+id/cb_tariff_3_next_month_checkbox"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:button="@drawable/checkbox_services"
    android:layout_centerHorizontal="true"/> 
```

谁能告诉我，为什么这不起作用？非常感谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-17T03:09:12.370

您必须向形状添加一个大小节点：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle"
    >
    <size android:width="30dp" android:height="30dp" />
    <solid android:color="@color/blueBase"/>
    <stroke
        android:width="1dp"
        android:color="@color/blueDark" />
</shape> 
```

# php - 更改和初始化函数中的变量

> ID：10738878
> 
> 赞同：0
> 
> 时间：2012-05-24T13:54:20.050
> 
> 标签：php

我想知道是否可以在不向函数传递参数的情况下更改和初始化函数中的变量。这是我想要实现的目标：

```
$foo = 'Lorem';
$array = array();
foobar($foo);
function foobar(){
    if (strlen($foo)== 1)
        $bar = 'Ipsum';
    else
        $array[] = 'error';
}

fubar();
function fubar(){
    if (empty($fouten))
        echo $bar;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T13:58:10.993

`$foo`是函数内的局部（未初始化）变量。它与全局变量`$foo`( `$GLOBALS['foo']`) 不同。

你有两种方法：

```
$foo;
$bar;
$array = array();

function foobar(){
    global $foo, $array, $bar;
    if (strlen($foo)== 1)
        $bar = 'Ipsum';
    else
        $array[] = 'error';
} 
```

或者通过使用`$GLOBAL`数组……</p>

不过，这并不是一个很好的做法，并且会成为具有所有这些副作用的维护噩梦

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T13:58:41.610

php 中的函数可以被赋予具有默认值的参数。您以书面形式发布的代码将为您提供未定义变量的通知。相反，你可以写：

```
function foobar($foo = null) {
    if($foo) { // a value was passed in for $foo 
    }
    else { // foo is null, no value provided
    }
} 
```

使用此功能，以下任何一行都不会产生通知

```
foobar();
foobar('test'); 
```

# php - mysql_fetch_array 返回错误的行数

> ID：10738880
> 
> 赞同：-3
> 
> 时间：2012-05-24T13:54:22.233
> 
> 标签：php, mysql

我有这个代码：

```
public function getRecurringEventsByGrouped($grouped){
    $query = "SELECT * FROM `event` AS e
    WHERE e.`grouped` = " . $grouped . " ORDER BY EventId DESC";
    $result = mysql_query($query);
    while ($ids[] = mysql_fetch_array($result, MYSQL_NUM)) ;
    return $ids;
} 
```

`mysql_fetch_array()`不返回第一行。`mysql_num_rows()`返回正确的行数。

我还在 HeidiSQL 中尝试过这个查询，它给出的行数与`mysql_num_rows()`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T13:59:30.267

您需要遍历 while 循环中的数据。

```
$ids = '';
while ($row = mysql_fetch_array($result, MYSQL_NUM)) {
   //check for proper indexing of table rows and specify $row[value] accordingly.
   $ids[] = $row[0];
}
return $ids; 
```

这应该为您获取正确的内容。

# javascript - looking for a cross browser solution to highlight tabs

> ID：10738884
> 
> 赞同：1
> 
> 时间：2012-05-24T13:54:49.647
> 
> 标签：javascript, jquery

I'm looking for a cross browser compatible solution to highlight tabs. On page load the first tab should highlight and on click of the other tabs, the first tab would unhighlight and the selected tab would highlight. Can't get this functionality working in same fashion in IE and Firefox at the same time. Any inputs on that?

Note: The below code works but when I click on any other link on the page, the focus on the tabs is lost and hence the currently selected tab is not highlighted.

JS

```
$(document).ready(function () {
    activate('focusmeplease');
    $('#tabs ul li:first').addClass('active');
    $('#tabs ul li a').click(function () {
        $('#tabs ul li').removeClass('active');
        $(this).parent().addClass('active');
    });
});

function activate(link) {
    if (document.getElementById) document.getElementById(link).focus();
    else if (document.all) document.all(link).focus();
} 
```

HTML

```
<div id="tabs">
    <ul>
        <li class="clas" onclick="javascript: addPlayer('tab-1','1649028604001');">
            <a href="javascript:void(0);" id="focusmeplease">First tab</a>
        </li>
        <li class="clas" onclick="javascript: addPlayer('tab-1','1651558610001');">
            <a href="javascript:void(0);">Second tab</a>
        </li>
    </ul>
    <div id="tab-1"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T14:00:34.247

In your `click` event, just call the `focus` method. Like so:

```
 $(document).ready(function () {
    activate('focusmeplease');
    $('#tabs ul li:first').addClass('active');
    $('#tabs ul li a').click(function () {
        $('#tabs ul li').removeClass('active');
        $(this).parent().addClass('active');
        $(this).focus(); //i've added this
    });
}); 
```

See this Fiddle [HERE](http://jsfiddle.net/NFdah/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T17:04:43.773

Finally this is the code that worked across browsers. I had to move the addPlayer function from the onClick action of the anchor tag to within the jQuery li click function.

```
jQuery(document).ready(function(){                  
                     addPlayer('tab-1', '1649028596001');//on page load, display this.
                     jQuery('#tabs ul li:first').addClass('active');
                     jQuery('#tabs ul li').click(function () {
                              addPlayer('tab-1', playerIdArray[jQuery(this).index()]);
                              jQuery('#tabs ul li').removeClass("active");
                              jQuery(this).addClass("active");
                      });

});

<ul>

     <li class="class4" ><a href="javascript:void(0);">Bond</a></li>
     <li class="class5" ><a href="javascript:void(0);">Stock</a></li>
   </ul>
   <div id="tab-1">

   </div> 
```

# javascript - Telerik MVC 网格按需填充

> ID：10738901
> 
> 赞同：1
> 
> 时间：2012-05-24T13:55:31.913
> 
> 标签：javascript, razor, telerik-grid, telerik-mvc

我正在尝试构建一个类似数据输入表单的向导，并且我在“第二页”上有一个网格，该网格是根据第一页上的值填充的。

前任：

第 1 页：公司下拉列表，选择 CompanyId

第 2 页：根据第 1 页中的 CompanyId 填充的网格

Page1 和 Page2 实际上是同一页面上的 2 个 div 标签。我试图弄清楚如何在我转到 Page2 或拥有有效的 CompanyId 之前不加载网格。

如何将 MVC Ajax 网格设置为 1。没有让网格在加载时执行 Select() Ajax 调用？2\. 使用jquery让网格按需调用Select？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T15:48:17.523

尝试以下操作：

将此javascript添加到页面：

```
<script type="text/javascript">
var initialLoad = true;
function Grid_onDataBinding(e) {
    if (initialLoad) {
        e.preventDefault();
        initialLoad = false;
    }
}

function RefreshGrid() {
    var grid = $("#TestGrid").data("tGrid");  // Modify the grid ID to your own!!!
    grid.ajaxRequest();
}
</script> 
```

注册以下客户端事件，以防止网格在初始加载时进行数据绑定。

```
.ClientEvents(events => events.OnDataBinding("Grid_onDataBinding")) 
```

然后在页面某处调用 RefreshGrid() 函数，重新绑定网格。

```
<input type="button" value="Refresh Grid" onclick="RefreshGrid()" /> 
```

More can be found on the Telerik documentation site. [http://www.telerik.com/help/aspnet-mvc/telerik-ui-components-grid-client-api-and-events.html](http://www.telerik.com/help/aspnet-mvc/telerik-ui-components-grid-client-api-and-events.html)

# android - Android 设备上的 Real 5.1 多声道音频

> ID：10738905
> 
> 赞同：0
> 
> 时间：2012-05-24T13:56:05.533
> 
> 标签：android, audio

我是一家高科技公司的实习生。自上周以来，我一直在观察关于在 Android 设备上实现 5.1 多声道音频，一旦我看到 AudioFormat 类上有一个 CHANNEL_OUT_5POINT1 枚举。

有可能这样做吗？

提前致谢

# perl - 为什么 Perl 的 chomp 会影响我的打印输出？

> ID：10738909
> 
> 赞同：3
> 
> 时间：2012-05-24T13:56:28.193
> 
> 标签：perl, chomp

自从我成为 Perling 以来已经有几个月了，但我完全不知道为什么会发生这种情况......

如果重要的话，我在 OSX 上。

我正在尝试转换文件中的行，例如

```
2011 年 8 月 3 日 01:00 PDT，1.11
```

进入标准输出行，如

```
XXX, 20120803, 0100, 千瓦时, 0.2809, A, YYY
```

由于我正在读取文件，因此我想`chomp`在读入每一行之后。但是，当我 时`chomp`，我发现我的打印变得一团糟。当我不`chomp`打印时很好（除了额外的换行符......）。这里发生了什么？

```
while(<SOURCE>) {
    chomp;
    my @tokens = split(' |,');     # @tokens now [08/03/2011, 01:00, PDT, 1.11]

    my $converted_date = convertDate($tokens[0]);
    my $converted_time = convertTime($tokens[1]);

print<<EOF;
$XXX, $converted_date, $converted_time, KWH, $tokens[3], A, YYY
EOF
} 
```

在`chomp`那里调用，输出都混在一起了：

```
, A, YYY10803, 0100, 千瓦时, 1.11
```

如果没有`chomp`调用，它至少会以正确的顺序打印，但有额外的新行：

```
XXX, 20110803, 0100, 千瓦时, 1.11
, 一, 年年
```

请注意，`chomp`在那里，就像它覆盖了第一行“顶部”的换行符。我已经添加了`$|=1;`自动刷新，但不知道这里还能做什么。

想法？并提前感谢....

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-24T14:14:08.560

您输入的行以 CR LF 结尾。您只删除了 LF。一个简单的解决方案是使用以下内容而不是`chomp`：

```
s/\s+\z//; 
```

您还可以使用`dos2unix`命令行工具在将文件传递给 Perl 之前对其进行转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T14:24:41.080

问题是你有 DOS 行尾并且运行在 Perl 的 Unix 版本上。

一种解决方案是使用[`PerlIO::eol`](https://metacpan.org/module/PerlIO%3a%3aeol). 您可能必须安装它，但程序中不需要`use`一行。

然后你可以写

```
binmode ':raw:eol(LF)', $filehandle; 
```

之后，无论文件的格式或来源如何，读取的行都将以标准`"\n"`.

# python - 比较多个文件中的值

> ID：10738914
> 
> 赞同：0
> 
> 时间：2012-05-24T13:56:51.453
> 
> 标签：python, bash, shell, awk, text-processing

我有两个文件，每个文件有 3 列和 n 行（每个文件中的行数不同）。

每个看起来像这样：

```
file1
chr1    12  32 
chr1    14  30
chr3    10002  89000 
chrx    5678900   987654 
```

和这个：

```
file2
chr1    8   15
chr1    10  14
chr1    32  34 
```

每个文件中的第二列和第三列代表起始值和结束值，而第一列是名称。

因此，如果（文件 1）第一列中的值与文件 2 第一列中的值匹配，则脚本应计算它们是否存在重叠（文件 1 中第 2 列和第 3 列中的值范围的任何重叠程度与文件 2 的第 2 列和第 3 列中的值范围）文件 2 中文件 1 的第二列和第三列中的值范围。

需要这样的输出：

```
regions from file1 present in file 2

chr1    12  32   present 
chr1    14  30   present 
chr3    10002  89000  absent
chrx    5678900   987654 absent 
```

有关 awk 操作或 python 脚本的任何建议......请帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T14:22:39.247

1.  读取`file2`以创建映射：名称 -> 间隔，即结果为：`ranges = {'chr1': [[8, 15], [10, 14], [32, 34]]}`. 如果每个名称有很多间隔，那么作为优化，您可以合并它们：`ranges = {'chr1': [[8, 15], [32, 34]]}`.

2.  定义`overlap(r1, r2)`返回两个区间是否重叠的`r1`函数。`r2`指定边缘是否包含在重叠中。

3.  对于每一行，`file1`找出是否存在重叠并打印适当的输出。

# python - 如何在 virtualenv 中添加 PYTHONPATH 的路径

> ID：10738919
> 
> 赞同：115
> 
> 时间：2012-05-24T13:57:03.263
> 
> 标签：python, virtualenv

我正在尝试添加 PYTHONPATH 环境变量的路径，该路径仅在特定的 virtualenv 环境中可见。

我在 virtualenv 命令提示符下尝试过`SET PYTHONPATH=...`，但这会为整个环境设置变量。

我该如何做到这一点？

* * *

## 回答 #1

> 赞同：175
> 
> 时间：2012-05-24T14:47:30.150

[您通常可以通过使用`.pth`files](http://docs.python.org/install/index.html#modifying-python-s-search-path)来避免对 PYTHONPATH 做任何事情。只需在您的 virtualenv 的 site-packages 文件夹中放置一个扩展名为 .pth 的文件（任何基本名称都可以），例如`lib\python2.7\site-packages`，将包含您的包的目录的绝对路径作为其唯一内容。

* * *

## 回答 #2

> 赞同：93
> 
> 时间：2013-03-07T22:23:26.407

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-05-09T12:49:50.590

You can also try to put symlink to one of your virtualenv.

eg. 1) activate your virtualenv 2) run python 3) import sys and check sys.path 4) you will find python search path there. Choose one of those (eg. site-packages) 5) go there and create symlink to your package like: ln -s path-to-your-package name-with-which-you'll-be-importing

That way you should be able to import it even without activating your virtualenv. Simply try: path-to-your-virtualenv-folder/bin/python and import your package.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-02-27T18:20:45.080

If you are using virtualenvwrapper,

```
$ cd to the parent folder
$ add2virtualenv  folder_to_add 
```

console will display

```
Warning: Converting "folder_to_add" to "/absoutle/path/to/folder_to_add" 
```

That's it, and you should be good to go

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-03-01T09:45:32.213

```
import sys
import os

print(str(sys.path))

dir_path = os.path.dirname(os.path.realpath(__file__))
print("current working dir: %s" % dir_path)

sys.path.insert(0, dir_path) 
```

I strongly suggest you use virtualenv and virtualenvwrapper to avoid cluttering the path.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-16T03:24:40.397

As suggested by @crimeminister above, you can use `virtualenvwrapper` then `add2virtualenv` like suggested by @Aneesh Panoli. If `add2virtualenv` is not working after `pip install virtualenvwrapper`, then [follow instructions in the top voted answer by @chirinosky here](https://stackoverflow.com/questions/12232421/virtualenvwrapper-commands-arent-working/23634104). Works for me.

# asp.net - VB.NET 将日期字符串 ddMMyyhhmmss 转换为日期对象

> ID：10738920
> 
> 赞同：2
> 
> 时间：2012-05-24T13:57:04.753
> 
> 标签：asp.net, vb.net

我有一个字符串，其中包含 ddMMyyhhmmss 格式的值。

例子`240512024707`

我需要能够将此日期转换为真正的 .NET Date 对象。

我目前正在使用 CDate 但似乎 CDate 无法识别格式，有没有办法将字符串格式指定为 CDate ???

`row.Item("NoteDate") = CDate(n.noteText.Substring(0, 12).ToString).ToString("dd/MM/yyyy hh:mm:ss")`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T13:58:46.087

您有带有日期的字符串，您知道确切的格式字符串 - 使用[`DateTime.ParseExact`](http://msdn.microsoft.com/en-us/library/system.datetime.parseexact.aspx)（或者[`DateTime.TryParseExact`](http://msdn.microsoft.com/en-us/library/system.datetime.tryparseexact.aspx)如果您希望避免引发潜在的异常）：

```
DateTime.ParseExact("240512024707", "ddMMyyhhmmss", CultureInfo.InvariantCulture) 
```

# android - 从安卓手机发送短信到电脑？

> ID：10738922
> 
> 赞同：0
> 
> 时间：2012-05-24T13:57:06.983
> 
> 标签：android, sms

我正在创建一个 android 应用程序，它获取手机位置、纬度和经度以及时间，并定期将其发送到中央数据库。问题是我正在使用 SMS 发送此数据，但我无法确定将其发送到何处。我首先想到的是一台计算机，它存储所有这些数据并读取它，然后根据数据执行操作，在这种情况下它映射它。

那么是否可以向计算机发送短信？还是我应该尝试不同的方法来发送数据？

任何的意见都将会有帮助。谢谢！:)

***编辑***

我知道可以将我的手机连接到电脑，然后传输短信，但实际上我现在只有一部手机，而且我不能总是把它连接到电脑上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T14:03:02.097

如果计算机具有 GSM 模块（或作为调制解调器连接的手机），则可以向计算机发送短信，但您应该考虑另一种方法。

我会发送电子邮件或 - 如果您愿意 - 创建一个 AppEngine 项目来接收数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T14:01:21.623

嗯短信？我不认为这是可能的。尝试使用 JSON。 [https://www.google.nl/search?sugexp=chrome,mod=18&sourceid=chrome&ie=UTF-8&q=Send+data+to+server+android+json](https://www.google.nl/search?sugexp=chrome,mod=18&sourceid=chrome&ie=UTF-8&q=Send+data+to+server+android+json)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T14:02:11.483

您可以将手机作为 SMS 调制解调器连接到计算机，并从手机中获取其 SMS。几乎手机可以做到这一点。但最常见的方式是与 Web 服务集成。

# java - cookie 是否被缓存？

> ID：10738925
> 
> 赞同：1
> 
> 时间：2012-05-24T13:57:12.250
> 
> 标签：java, cookies

我想从已签名的 Java 小程序中删除*所有cookie。*我删除了 Cookie 文件和所有缓存文件，但 cookie 仍然存在于浏览器中（在他的[cookie 测试页面测试](http://www.html-kit.com/tools/cookietester/)）。

cookie 是否被缓存？我可以在*不重新启动浏览器的情况下*实际删除它们吗？

**系统信息：**

OS X + 铬

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T14:28:46.540

我不这么认为cookies被缓存了。此外，在这种情况下无需重新启动浏览器。

我在您提供的链接上检查了Firefox。Cookie 正在正常清除。您使用的是哪个浏览器？

# c# - 在一组数中找到一个组合的有效算法，其总和等于一个已知数

> ID：10738926
> 
> 赞同：11
> 
> 时间：2012-05-24T13:57:12.267
> 
> 标签：c#

假设有一组数字

> 1、2、3、4、5、6、7、8、9、10

我想找出这组数字中的几种组合，使其总和等于已知数字，例如18。我们可以发现5、6、7匹配（5+6+7=18） .

组合中的数字不能重复，集合中的数字可能不连续。

我已经编写了一个 C# 程序来做到这一点。程序随机取数组成一个组合，检查组合之和是否等于已知数。但是，程序找到的组合可能会重复，这会使进度无效。

我想知道是否有任何有效的算法来找出这种组合。

这是我的代码的一部分。

```
 int Sum = 0;
        int c;
        List<int> Pick = new List<int>();
        List<int> Target = new List<int>() {some numbers}

        Target.Sort();

            while (!Target.Contains(Sum))
            {
                if (Sum > Target[Target.Count - 1])
                {
                            Pick.Clear();
                            Sum = 0;

                }
                while (true)
                {
                    if (Pick.IndexOf(c = Math0.rand(0, Set.Count - 1)) == -1)
                    {
                        Pick.Add(c);
                    }

                    //Summation Pick
                    Sum = 0;
                    for (int i = 0; i < Pick.Count; i++)
                        Sum += Set[Pick[i]];

                    if (Sum >= Target[Target.Count - 1])
                        break;
                }

            }

            Result.Add(Pick); 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-24T14:12:38.130

您可以使用递归。对于集合中的任何给定数字，找到相加为该数字的较小数字的组合：

```
public static IEnumerable<string> GetCombinations(int[] set, int sum, string values) {
  for (int i = 0; i < set.Length; i++) {
    int left = sum - set[i];
    string vals = set[i] + "," + values;
    if (left == 0) {
      yield return vals;
    } else {
      int[] possible = set.Take(i).Where(n => n <= sum).ToArray();
      if (possible.Length > 0) {
        foreach (string s in GetCombinations(possible, left, vals)) {
          yield return s;
        }
      }
    }
  }
} 
```

用法：

```
int[] set = { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };

foreach (string s in GetCombinations(set, 18, "")) {
  Console.WriteLine(s);
} 
```

输出：

```
1,2,4,5,6,
3,4,5,6,
1,2,3,5,7,
2,4,5,7,
2,3,6,7,
1,4,6,7,
5,6,7,
1,2,3,4,8,
2,3,5,8,
1,4,5,8,
1,3,6,8,
4,6,8,
1,2,7,8,
3,7,8,
2,3,4,9,
1,3,5,9,
4,5,9,
1,2,6,9,
3,6,9,
2,7,9,
1,8,9,
1,3,4,10,
1,2,5,10,
3,5,10,
2,6,10,
1,7,10,
8,10, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T15:22:19.870

一种可能的替代方法。像这样的小集合，你可以使用蛮力。你的集合`{1, 2, 3, 4, 5, 6, 7, 8, 9, 10}`有 10 个元素，每个元素可以存在或不存在。这可以映射到 0 (= 0b0000000000) 和 1023 (= 0b1111111111) 之间的二进制数。循环从 0 到 1023（含）的数字，并检查与数字的二进制表示的设置位相对应的子集的总和。

对于这个特定的问题，可能不是最有用的，但它是生成给定集合的所有可能子集的好方法。

# time - 使用 Lua 脚本读取 PCAP 文件

> ID：10738936
> 
> 赞同：2
> 
> 时间：2012-05-24T13:57:51.507
> 
> 标签：time, lua, pcap

我有一个 Lua 脚本来读取 PCAP 文件。对于一个数据包，我可以用表达式得到它的时间

```
os.date("%Y/%m/%d %X", last_pinfo.abs_ts) 
```

结果就像“2012/05/24 11:32:50”，但我想要像“2012 年 5 月 24 日 11:32:50.476690000”这样的结果。那可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T14:25:54.067

Lua 的`os.date`格式与 C 的[strftime](http://linux.die.net/man/3/strftime)函数相同。

然而，标准 Lua 中的时间只能精确到秒。您必须从另一个来源添加秒的小数部分，例如 LuaSocket 的[`socket.gettime()`](http://w3.impa.br/~diego/software/luasocket/socket.html#gettime)：

```
require 'socket'
time=socket.gettime()
print(os.date("%B %d, %Y %H:%M:%S")..select(2,math.modf(time),time) 
```

# c - 为什么 pthread_create 返回一个 int？

> ID：10738937
> 
> 赞同：0
> 
> 时间：2012-05-24T13:57:55.480
> 
> 标签：c, multithreading, pthreads

我已经看到了使用线程对数组求和的代码。在这段代码中，创建了一个线程并`int`返回了一个数据类型：

```
int iret1, iret2;   
iret1 = pthread_create( &thread1, NULL, print_message_function, (void*) message1); 
iret2 = pthread_create( &thread2, NULL, print_message_function, (void*) message2); 
```

我知道线程是进程的子进程，它用于执行程序。执行程序需要内存，内存由`void*`数据类型返回。

返回的逻辑原因是`int`什么？任何人都可以解释实际原因吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T13:59:39.267

根据`man pthread_create`：

> 返回值
> 
> 成功时，pthread_create() 返回 0；出错时，它返回一个错误号，并且 *thread 的内容是未定义的。

该值仅指示线程创建是否成功。

它不是像 那样的内存分配调用`malloc`，因此我不明白您为什么认为它应该返回一个指针。

# node.js - Node JS：请求代码片段解释

> ID：10738940
> 
> 赞同：0
> 
> 时间：2012-05-24T13:58:04.713
> 
> 标签：node.js

我只是想知道这样做的目的是什么，

```
function MyStream() {
    events.EventEmitter.call(this);
} 
```

在以下取自 Nodejs.org Docs 部分的代码块中，

```
var util = require("util");
var events = require("events");

function MyStream() {
    events.EventEmitter.call(this);
}

util.inherits(MyStream, events.EventEmitter);

MyStream.prototype.write = function(data) {
    this.emit("data", data);
}

var stream = new MyStream();

console.log(stream instanceof events.EventEmitter); // true
console.log(MyStream.super_ === events.EventEmitter); // true

stream.on("data", function(data) {
    console.log('Received data: "' + data + '"');
})
stream.write("It works!"); // Received data: "It works!" 
```

请解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T14:11:38.740

这不是第一次被问到这个问题：[https ://groups.google.com/forum/#!topic/nodejs/ab_Xih1L5R8/discussion](https://groups.google.com/forum/#!topic/nodejs/ab_Xih1L5R8/discussion)

布拉德利·梅克的名言：

在对象上使用 EventEmitter.call 将设置 EventEmitter 的实例方法/属性（非继承）。它的用途类似于 Java 中的 super(...) 或 C# 中的 base(...)，但它在 Javascript 中并不隐含。因此，我们必须自己手动调用它。至于关于 util.inherits 的讨论，这将使 MyStream 函数从另一个原型函数继承，以便 instanceof 起作用（旁注：javascript 只允许单继承）。由于 new 运算符的工作方式，如果我们将函数中的 this 变量设置为 EventEmitter 的 instanceof，并调用 EventEmitter.call，它会查找所有意图和目的，就好像在 MyStream 对象上调用 EventEmitter 的构造函数一样。

# javascript - 如何使用javascript动态加载telerik datepicker

> ID：10738946
> 
> 赞同：1
> 
> 时间：2012-05-24T13:58:29.223
> 
> 标签：javascript, jquery, asp.net-mvc-3, c#-4.0, telerik-mvc

如何动态加载telerik datepicker。

我正在构建一个带有 html 文本框的 div 标签，并考虑添加 Telerik datepicker，这可以做到吗，有人可以解释一下我的方法。

```
<div id="mainDiv"> 
str +='<div class="Subdiv" id='; 
str += data.id + ' rel="' + relData + '"><br/>Date Question<br/><label>'; 
str += data.Question + "<br/><input type='textbox' id='Date'/></br></br>"; 
str += "<input type='button' value='Submit' onclick='Submitdate(\"" + data.previousdate+"\",\"" + data.id+ "\",\"" + data.changetype+ "\")'/>"; } $('#Date').appendTo(document.body).tDatePicker(); 
str += '</label></div>'; $('#mainDiv').append(str); 
```

我收到错误`$('#Date').appendTo(document.body).tDatePicker();`不是函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T14:43:24.170

尝试这个：

注册 datepicker 客户端库：

```
$(Html.Telerik().ScriptRegistrar().DefaultGroup(group => group.Add("telerik.common.js").Add("telerik.datepicker.js"))) 
```

在表单上创建一个输入元素：

```
<input id="DatePickerInput" /> 
```

然后在页面某处添加以下 javascript：

```
$('#DatePickerInput').appendTo(document.body);
$('#DatePickerInput').tDatePicker(); 
```

或者

```
$('#DatePickerInput').appendTo(document.body).tDatePicker(); 
```

要设置日期值：

```
$('#DatePickerInput').val('5/29/2012');   //Date format may vary, you'll need to adjust it! 
```

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T17:19:47.437

利用：

```
var datePicker = $("<input>", { id: "Date", value: "1/1/2013"})
                                                      .appendTo(document.body);
datePicker.tDatePicker(); 
```

那应该工作！

# javascript - 是否可以一次动态添加 2 行？

> ID：10738951
> 
> 赞同：1
> 
> 时间：2012-05-24T13:58:44.480
> 
> 标签：javascript, jquery, asp.net

![在此处输入图像描述](../Images/0395245fdd36c20387bf5f854aa8b3eb.png)

我的表格上有 2 行，必须重复 4 次。

因此，不是同时显示 8 行，而是可以使用“添加其他行”按钮显示前 2 行

如果用户单击该按钮，则会自动添加 2 行。

从下面的代码中，每个以 ... 开头并以 ... 结尾的代码显示 4 次。

2行显示8次组合

行并不总是被填满。因此，如果需要，让用户单击一个按钮以添加额外的 2 行会很好。

我有一个可以添加一行的js，但我不能让它同时添加2。

这是带有...的代码的样子，我正在尝试自动添加。

```
<script type='text/javascript'>//<![CDATA[
    $(window).load(function () {
        var index = 1;
        $(document).ready(function () {
            $("#more").click(function () {
                addRow(1)
                //alert($("#form1").html()); Uncomment to view updated form html
            });
        });

        function addRow(rowCount) {
            for (i = 0; i < rowCount; i++) {
                index = index + 1;
                $("#form1").append($("#template").html().replace(/_1/g, "_" + index));
            }
        }

    });//]]>  

</script>

      <div id="template">
                  <table border="1" bordercolor="black" cellspacing="0">
            <tr>
            <td>

      <table style="border-top-width:2px;border-top-style:solid;border-top-color:#000000">
            <tr valign="top">
                 <td valign="middle" style="font-size:large;font-weight:bold;" class="style4"></td>
                <td style="width:105px;border-right-width:2px;border-right-style:solid;border-right-color:#000000">
                    Line #<br />
                    <asp:TextBox ID="TextBox24" runat="server" Width="25px" />
                </td>
                <td style="width:135px;border-right-width:2px;border-right-style:solid;border-right-color:#000000">
                   Code<br />
                     <asp:TextBox ID="TextBox38" runat="server" Width="25px" />
                </td>
                 <td style="width:125px;border-right-width:2px;border-right-style:solid;border-right-color:#000000">
                    Document Reference<br />
                    <asp:TextBox ID="TextBox25" runat="server" Width="45px" />
                </td>
                 <td style="width:105px;border-right-width:2px;border-right-style:solid;border-right-color:#000000">
                    Line<br />
                    <asp:TextBox ID="TextBox26" runat="server" Width="25px" />
                </td>
                 <td style="width:115px;border-right-width:2px;border-right-style:solid;border-right-color:#000000">
                    PC COMM LN<br />
                    <asp:TextBox ID="TextBox27" runat="server" Width="25px" />
                </td>
                 <td style="width:115px;border-right-width:2px;border-right-style:solid;border-right-color:#000000">
                    Vendor Invoice #<br />
                    <asp:TextBox ID="TextBox28" runat="server" Width="85px" />
                </td>
                 <td style="width:105px;border-right-width:2px;border-right-style:solid;border-right-color:#000000">
                  Fund<br />
                      <asp:DropDownList id="txtfund" runat="server"></asp:DropDownList>
                </td>
                 <td style="width:105px;border-right-width:2px;border-right-style:solid;border-right-color:#000000">
                    Agency<br />
                      <asp:DropDownList id="txtagency" runat="server"></asp:DropDownList>
                </td>
                 <td style="width:105px;border-right-width:2px;border-right-style:solid;border-right-color:#000000">
                    Org.<br />
                     <asp:DropDownList id="txtorg" runat="server"></asp:DropDownList>
                </td>
                 <td style="width:105px;border-right-width:2px;border-right-style:solid;border-right-color:#000000">
                    Sub<br />
                    <asp:TextBox ID="TextBox32" runat="server" Width="25px" />
                </td>
                 <td style="width:105px;border-right-width:2px;border-right-style:solid;border-right-color:#000000">
                    Activity<br />
                    <asp:TextBox ID="TextBox33" runat="server" Width="25px" />
                </td>
                 <td style="width:105px;border-right-width:2px;border-right-style:solid;border-right-color:#000000">
                    Object<br />
                    <asp:TextBox ID="TextBox34" runat="server" Width="25px" />
                </td>
                 <td style="width:115px;border-right-width:2px;border-right-style:solid;border-right-color:#000000">
                    Sub<br />
                    <asp:TextBox ID="TextBox35" runat="server" Width="25px" />
                </td>
                 <td style="width:115px;border-right-width:2px;border-right-style:solid;border-right-color:#000000">
                   Rev Source<br />
                    <asp:TextBox ID="TextBox36" runat="server" Width="25px" />
                </td>
                 <td style="width:105px;">
                    Sub<br />
                    <asp:TextBox ID="TextBox37" runat="server" Width="25px" />
                </td>
            </tr>
        </table>   

        <table style="border-top-width:2px;border-top-style:solid;border-top-color:#000000">
            <tr valign="top">
                 <td valign="middle" style="font-size:large;font-weight:bold;" class="style4"></td>
                <td style="width:105px;border-right-width:2px;border-right-style:solid;border-right-color:#000000">
                    <br /><br />Job #<br />
                    <asp:TextBox ID="TextBox39" runat="server" Width="45px" />
                </td>
                <td style="width:135px;border-right-width:2px;border-right-style:solid;border-right-color:#000000">
                    <br />
                    Rept<br />Category<br />
                     <asp:TextBox ID="TextBox40" runat="server" Width="25px" />
                </td>
                 <td style="width:105px;border-right-width:2px;border-right-style:solid;border-right-color:#000000">
                    <br /><br />BS Acct<br />
                    <asp:TextBox ID="TextBox41" runat="server" Width="25px" />
                </td>
                 <td style="width:105px;border-right-width:2px;border-right-style:solid;border-right-color:#000000">
                   <br /><br /> DISC<br />
                    <asp:TextBox ID="TextBox42" runat="server" Width="25px" />
                </td>
                 <td style="width:105px;border-right-width:2px;border-right-style:solid;border-right-color:#000000">
                    <br />Description (30) Spaces<br />
                    <asp:TextBox ID="TextBox403" runat="server" onKeyUp="javascript:Count(this,30);" onChange="javascript:Count(this,30);" TextMode="MultiLine" Columns="30" Rows="2" />
                </td>
                 <td style="width:105px;border-right-width:2px;border-right-style:solid;border-right-color:#000000">
                    <br /><br />Quant.<br />
                    <asp:TextBox ID="TextBox44" runat="server" Width="25px" />
                </td>
                 <td style="width:105px;border-right-width:2px;border-right-style:solid;border-right-color:#000000">
                   <br /><br /> Amount<br />
                    <asp:TextBox ID="TextBox45" runat="server" Width="55px" />
                </td>
                 <td style="width:105px;border-right-width:2px;border-right-style:solid;border-right-color:#000000">
                   Inc<br />/<br />Dec<br />
                    <asp:TextBox ID="TextBox46" runat="server" Width="25px" />
                </td>
                 <td style="width:105px;">

                    P<br />/<br />F<br />
                    <asp:TextBox ID="TextBox47" runat="server" Width="25px" />
                </td>
            </tr>
        </table>   
        </td>
        </tr>
        </table>        
        </div>

      <a href="#" id="more">Add More Rows</a>
     <div class="noprint" style="border-top-width:2px;border-top-style:solid;border-top-color:#000000"">
            <asp:Button runat="server" ID="btnSAP" Text="Save" OnClientClick=" return validate()" />
             <asp:Button ID="btnClear" OnClick="ClearFilter" height="27px" Text="Reset" runat="server" class="btn" /> 
            <asp:Button runat="server" ID="btnCancel" Text="Exit Form" />
             <!-- Results -->
            <asp:Label ID="lblResult" style ="font-weight:bold; font-size:large" runat="server"></asp:Label>
      </div>
   </form> 
```

这是 Mohammed 创建的小提琴的链接（谢谢）

[http://jsfiddle.net/TE6ac/](http://jsfiddle.net/TE6ac/)

我还发现了这个例子：

[http://jsfiddle.net/nick_craver/BE5Lr/](http://jsfiddle.net/nick_craver/BE5Lr/)

如果我复制...

我接近我正在寻找的东西。问题是我还有更多......并且不知道从哪里开始和停止。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-24T14:42:05.010

看看这里的小提琴：http: [//jsfiddle.net/dharmavir/9nHbs/](http://jsfiddle.net/dharmavir/9nHbs/) 它应该有帮助。！

```
<div id="template">
                  <table border="1" bordercolor="black" cellspacing="0">
            <tr>
            <td>

      <table style="border-top-width:2px;border-top-style:solid;border-top-color:#000000">
            <tr valign="top">
                 <td valign="middle" style="font-size:large;font-weight:bold;" class="style4"></td>
                <td style="width:105px;border-right-width:2px;border-right-style:solid;border-right-color:#000000">
                    Line #<br />
                    <asp:TextBox ID="TextBox24" runat="server" Width="25px" />
                </td>
                <td style="width:135px;border-right-width:2px;border-right-style:solid;border-right-color:#000000">
                   Code<br />
                     <asp:TextBox ID="TextBox38" runat="server" Width="25px" />
                </td>
                 <td style="width:125px;border-right-width:2px;border-right-style:solid;border-right-color:#000000">
                    Document Reference<br />
                    <asp:TextBox ID="TextBox25" runat="server" Width="45px" />
                </td>
                 <td style="width:105px;border-right-width:2px;border-right-style:solid;border-right-color:#000000">
                    Line<br />
                    <asp:TextBox ID="TextBox26" runat="server" Width="25px" />
                </td>
                 <td style="width:115px;border-right-width:2px;border-right-style:solid;border-right-color:#000000">
                    PC COMM LN<br />
                    <asp:TextBox ID="TextBox27" runat="server" Width="25px" />
                </td>
                 <td style="width:115px;border-right-width:2px;border-right-style:solid;border-right-color:#000000">
                    Vendor Invoice #<br />
                    <asp:TextBox ID="TextBox28" runat="server" Width="85px" />
                </td>
                 <td style="width:105px;border-right-width:2px;border-right-style:solid;border-right-color:#000000">
                  Fund<br />
                      <asp:DropDownList id="txtfund" runat="server"></asp:DropDownList>
                </td>
                 <td style="width:105px;border-right-width:2px;border-right-style:solid;border-right-color:#000000">
                    Agency<br />
                      <asp:DropDownList id="txtagency" runat="server"></asp:DropDownList>
                </td>
                 <td style="width:105px;border-right-width:2px;border-right-style:solid;border-right-color:#000000">
                    Org.<br />
                     <asp:DropDownList id="txtorg" runat="server"></asp:DropDownList>
                </td>
                 <td style="width:105px;border-right-width:2px;border-right-style:solid;border-right-color:#000000">
                    Sub<br />
                    <asp:TextBox ID="TextBox32" runat="server" Width="25px" />
                </td>
                 <td style="width:105px;border-right-width:2px;border-right-style:solid;border-right-color:#000000">
                    Activity<br />
                    <asp:TextBox ID="TextBox33" runat="server" Width="25px" />
                </td>
                 <td style="width:105px;border-right-width:2px;border-right-style:solid;border-right-color:#000000">
                    Object<br />
                    <asp:TextBox ID="TextBox34" runat="server" Width="25px" />
                </td>
                 <td style="width:115px;border-right-width:2px;border-right-style:solid;border-right-color:#000000">
                    Sub<br />
                    <asp:TextBox ID="TextBox35" runat="server" Width="25px" />
                </td>
                 <td style="width:115px;border-right-width:2px;border-right-style:solid;border-right-color:#000000">
                   Rev Source<br />
                    <asp:TextBox ID="TextBox36" runat="server" Width="25px" />
                </td>
                 <td style="width:105px;">
                    Sub<br />
                    <asp:TextBox ID="TextBox37" runat="server" Width="25px" />
                </td>
            </tr>
        </table>   

        <table style="border-top-width:2px;border-top-style:solid;border-top-color:#000000">
            <tr valign="top">
                 <td valign="middle" style="font-size:large;font-weight:bold;" class="style4"></td>
                <td style="width:105px;border-right-width:2px;border-right-style:solid;border-right-color:#000000">
                    <br /><br />Job #<br />
                    <asp:TextBox ID="TextBox39" runat="server" Width="45px" />
                </td>
                <td style="width:135px;border-right-width:2px;border-right-style:solid;border-right-color:#000000">
                    <br />
                    Rept<br />Category<br />
                     <asp:TextBox ID="TextBox40" runat="server" Width="25px" />
                </td>
                 <td style="width:105px;border-right-width:2px;border-right-style:solid;border-right-color:#000000">
                    <br /><br />BS Acct<br />
                    <asp:TextBox ID="TextBox41" runat="server" Width="25px" />
                </td>
                 <td style="width:105px;border-right-width:2px;border-right-style:solid;border-right-color:#000000">
                   <br /><br /> DISC<br />
                    <asp:TextBox ID="TextBox42" runat="server" Width="25px" />
                </td>
                 <td style="width:105px;border-right-width:2px;border-right-style:solid;border-right-color:#000000">
                    <br />Description (30) Spaces<br />
                    <asp:TextBox ID="TextBox403" runat="server" onKeyUp="javascript:Count(this,30);" onChange="javascript:Count(this,30);" TextMode="MultiLine" Columns="30" Rows="2" />
                </td>
                 <td style="width:105px;border-right-width:2px;border-right-style:solid;border-right-color:#000000">
                    <br /><br />Quant.<br />
                    <asp:TextBox ID="TextBox44" runat="server" Width="25px" />
                </td>
                 <td style="width:105px;border-right-width:2px;border-right-style:solid;border-right-color:#000000">
                   <br /><br /> Amount<br />
                    <asp:TextBox ID="TextBox45" runat="server" Width="55px" />
                </td>
                 <td style="width:105px;border-right-width:2px;border-right-style:solid;border-right-color:#000000">
                   Inc<br />/<br />Dec<br />
                    <asp:TextBox ID="TextBox46" runat="server" Width="25px" />
                </td>
                 <td style="width:105px;">

                    P<br />/<br />F<br />
                    <asp:TextBox ID="TextBox47" runat="server" Width="25px" />
                </td>
            </tr>
        </table>   
        </td>
        </tr>
        </table>        
        </div>

<table id="sometable">
<tbody>
</tbody>
</table>
<table id="anothertable">
<tr>
<td> some other table </td>
</tr>
</table>
      <a href="#" id="more">Add More Rows</a>
     <div class="noprint" style="border-top-width:2px;border-top-style:solid;border-top-color:#000000"">

      </div>
<input type="submit" value="Save" />
      <input type="reset" value="Reset" />
   </form> 
```

Javascript代码：

```
<script type="text/javascript">
var index = 1;
        $(document).ready(function () {
            $("#more").click(function () {
                addRow(1);
                //alert($("#form1").html()); Uncomment to view updated form html
            });
        });

        function addRow(rowCount) {
            for (i = 0; i < rowCount; i++) {
                index = index + 1;
$("#sometable").append($("#template").html().replace(/_1/g, "_" + index));
            }
        }
</script> 
```

# java - 多次打印日志数据

> ID：10738953
> 
> 赞同：3
> 
> 时间：2012-05-24T13:58:54.610
> 
> 标签：java, jakarta-ee, log4j

我已经为我的 Web 应用程序使用 log4j 实现了一个自定义日志文件。但问题是当我在该日志文件中打印任何内容时，它会打印多次。代码中是否没有循环或任何类型的迭代。任何人都可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-24T17:49:09.433

来自：[http ://www.jajakarta.org/log4j/jakarta-log4j-1.1.3/docs/TROUBLESHOOT.html](http://www.jajakarta.org/log4j/jakarta-log4j-1.1.3/docs/TROUBLESHOOT.html)

**log4j 输出中的重复项。**

在 log4j 输出中观察到重复的原因要么是由于多次将相同的 appender 添加到同一类别（通常是 root），要么将相同的 appender 添加到不同的类别而忽略了 appender 是累积继承的事实。

log4j 不会消除 appender 重复项。换句话说，如果您将相同的 appender 添加到类别 n 次，则该 appender 将被调用 n 次以附加到其目标。

一个稍微不同的原因是添加不同的附加器，它们都共享相同的基础输出目标到某个类别。在这种现象最常见的情况下，BasicConfigurator.configure() 方法被多次调用。每次调用它时，此方法都会将带有 System.out 目标的附加程序添加到根类别。

另一个常见的错误是忘记了 appender 是从层次结构中累积继承的。例如，如果您向根类别添加一个附加程序，例如 A，则所有其他类别都将继承 A 作为附加程序。因此，如果你将 A 添加到一个类别，比如 C，那么一个启用的类别 C 的语句将打印到 A 两次，一次是因为 A 在根目录中，一次是因为它在 C 中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-09T10:33:38.313

由于多个 Logger 配置使用相同的 appender，我遇到了同样的问题。这是一个示例，它会导致 LOG4J 存储一些日志消息两次：

```
log4j.logger.com.example = ERROR, out
log4j.logger.com.example.myapp = INFO, out 
```

例如，com.example.myapp.MyClass 中的错误消息将被记录两次，因为它们匹配两个记录器。

为了避免这种行为，您可以禁用默认启用的 Appender Additivity：

```
log4j.additivity.com.example.myapp = false 
```

有关详细信息，请参阅[http://logging.apache.org/log4j/1.2/manual.html#additivity](http://logging.apache.org/log4j/1.2/manual.html#additivity)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-24T14:11:12.520

在 Web 应用程序中，java 为每个请求创建单独的线程，因此函数（您放置日志的位置）可能会多次调用，因此每次都会生成日志。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-24T14:19:13.503

请检查您在 log4j 配置文件中提供的附加程序，`log4j.xml`即`log4j.properties`. 配置中可能列出了多个导致记录器多次记录语句的情况。

如果不是这种情况，请在此处粘贴您的配置详细信息，以便我们查看。

# perl - 如何合并 perl Net::LDAP 搜索对象？

> ID：10738955
> 
> 赞同：1
> 
> 时间：2012-05-24T13:58:58.653
> 
> 标签：perl, netldap

我有一项任务需要将数据库中的一些员工 ID 与 LDAP 数据库中当前员工 ID 的官方来源进行比较。

所以我有一个包含 3700 个公司 ID 的列表，它们在 LDAP 模式中称为 uid。

我意识到仅仅创建一个像这样的巨大查询可能不是一件好事

```
(|(uid=foo1)(uid2=foo2)....(uid=foo3700)) 
```

并提交。所以我想出了将我的列表切成块的想法。我做了一些计时，对于 50 个块，查询在 7 分钟内运行，100 个在 4 分钟内运行，200 个在 3.5 分钟内运行。

但现在我有几个搜索对象，每个查询一个。

我想我可以

1.  循环块并查询和处理对象并存储结果以供以后报告。或者我可以

2.  将搜索结果存储在某种数组或散列中。或者我可以

3.  以某种方式将搜索结果组合成一个大搜索对象。

我有点喜欢 3\. 的想法，因为我觉得它是最通用的解决方案，但我不知道该怎么做。

那么 3\. 是一个好方法吗？

如果是这样，该怎么做？

否则，有什么更好的方法来解决这个问题？

# raphael - 带有 raphael 或 d3 的 emberjs 视图

> ID：10738965
> 
> 赞同：6
> 
> 时间：2012-05-24T13:59:26.717
> 
> 标签：raphael, ember.js, d3.js

我想使用[raphael.js](http://raphaeljs.com/)或[d3.js](http://d3js.org/)呈现 ember.js 视图。我的理解是[可以做到这一点](http://corner.squareup.com/2012/04/building-analytics.html)，但在阅读了所有文档和谷歌搜索之后，我似乎无法弄清楚如何让它工作。有什么建议么？

一个 hello world 示例将是理想的，至少可以让我走上正确的道路。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T14:25:46.807

Johannes Fahrenkrug 有一篇博客文章，`Raphael.js`与`Sproutcore 2.0` [http://blog.sproutcore.com/using-raphael-js-with-sproutcore-2-0/](http://blog.sproutcore.com/using-raphael-js-with-sproutcore-2-0/)一起使用。代码托管在[https://github.com/jfahrenkrug/sproutcore-raphael](https://github.com/jfahrenkrug/sproutcore-raphael)。

由于 Ember.js 是从 Sproutcore 2.0 演变而来的，因此使用现有代码应该不会做太多工作。我将 Johannes 的优秀示例移植到 Ember.js 并创建了一个 JSFiddle，请参见[http://jsfiddle.net/pangratz666/BHYgQ/](http://jsfiddle.net/pangratz666/BHYgQ/)。您绝对应该在 GitHub 上查看该项目。

我移植的示例托管在[GitHub 上](https://github.com/pangratz/ember-raphael)，可以在[http://pangratz.github.com/ember-raphael](http://pangratz.github.com/ember-raphael)上实时查看。

* * *

至于 D3，你可以看看 Alex Rothenberg 的文章[Combining D3 and Ember to Build Interactive Maps](http://www.alexrothenberg.com/2012/05/30/interactive-maps-with-d3-and-ember.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T07:08:37.920

请参阅 alex rothenberg 的这篇精彩博文：

[http://www.alexrothenberg.com/2012/05/30/interactive-maps-with-d3-and-ember.html](http://www.alexrothenberg.com/2012/05/30/interactive-maps-with-d3-and-ember.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-15T13:03:17.840

我将 DC.js Crossfilter + D3 Charts 移植到 Ember 组件[https://github.com/andrewreedy/ember-dc](https://github.com/andrewreedy/ember-dc)

# android - 在活动可见之前隐藏键盘

> ID：10738972
> 
> 赞同：4
> 
> 时间：2012-05-24T13:59:34.917
> 
> 标签：android, android-activity, keyboard

我有一个活动（A），它启动活动（B）。

活动 A 在某些情况下使用键盘。

我想在 B 启动之前隐藏键盘（如果显示的话）。

但是，当 A 启动 B 时，键盘在 B 已经可见后的几秒钟内仍然可见。

```
getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN);
startActivity(..); //starts Activity B 
```

如何在调用 B 之前隐藏键盘？谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-24T14:02:19.177

在Activity B的onResume()中隐藏键盘

```
public void onResume()
{
  super.onResume();
getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN);
} 
```

在Activity A的onPause()中隐藏键盘

```
public void onPause()
    {
      super.onPause();
    getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN);
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T14:16:29.010

添加你的`AndroidManifest.xml`为你的活动 `android:windowSoftInputMode="stateHidden"` 是这样的

```
 <activity
      android:name="com.me.MyActivity"
      android:windowSoftInputMode="stateHidden"
   /> 
```

# php - 为 MySQL 数据库中的重复条目设置警告

> ID：10738979
> 
> 赞同：1
> 
> 时间：2012-05-24T13:59:55.953
> 
> 标签：php, mysql, database

我有一个有 5 列的表。ID、姓名、姓氏、公司和头衔。

所以我现在要做的是在提交过程中检查重复条目，比较姓名和姓氏组合匹配。然后，这应该会导致重复条目的警报以及继续并将其保存到数据库中的选项，或者取消内容的提交。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T10:57:38.453

好吧，这就是我尝试过的，但是还没有弄清楚问题中提到的可选选择代码。

```
$query = "INSERT INTO phptablo (Name, Surname, Company, Title) VALUES ('$name', '$surname', '$company', '$title')";

$sql = "SELECT Name AND Surname FROM phptablo WHERE Name = '$name' AND Surname= '$surname'";

$result = mysql_query($sql);
$count = mysql_num_rows($result);
$row = mysql_fetch_array($result);

echo "$sql" . '<br/><br/>'; 

echo "$result" . '<br/><br/>';

if ($count==0)
{
    if (!mysql_query($query)) 
    {
        die('Error: ' . mysql_error());
    }

    echo "Successful Entry!";
}
else 
{
    echo "Duplicate Entry found!";
} 
```

我对 php 和 MySQL 很***陌生***，所以不能真正充分利用您非常感谢的答案。有没有机会添加一些代码让我可以选择是否保存它？

我现在所在的位置，如果检测到重复条目，则输入不会保存到数据库中，否则会立即存储。如果我写的代码无论如何都不能以保存重复项的方式进行更改，我也可以在保存后使用某种屏幕显示重复项，以便可以编辑、删除它们等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T14:15:12.870

你有这个选项：

*   在“（姓名，姓氏）”上设置常规索引
*   在每次插入之前，检查“(name, surname)”组合是否已经存在
*   如果不存在，请正常插入 [这里由您来考虑在这 1 毫秒时间内其他人可能已经完成相同插入的风险]
*   如果 EXISTS AND 强制模式，无论如何添加行
*   如果 EXISTS AND NOT 强制模式，请根据您的规范继续到客户端
*   如果客户端仍然想保存，请在强制模式下重复操作。

如果您真的认为这是值得的，这里的替代方法是无论如何插入行，然后检查是否有以前的行。如果客户想保留记录，请留下，否则删除。

rgds

# websphere - wsadmin 使用集群的一个节点的 WebSphere 7

> ID：10738985
> 
> 赞同：0
> 
> 时间：2012-05-24T14:00:33.870
> 
> 标签：websphere, wsadmin

我想做 postdeploy 脚本以仅将一个属性文件添加到应用程序战争。我知道我可以通过 AdminApp.update 添加它，它可以在一台节点服务器上运行。

是否可以在集群上执行此操作？我的意思是，我想为每个服务器和集群中具有不同属性的每个节点运行 AdminApp.update 脚本。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T17:09:40.197

在 WebSphere 集群中，每个成员都会收到完全相同的应用程序二进制文件。如果您用于`AdminApp.update`修改应用程序中的属性文件，那么该更改将被推送到所有集群成员。

# php - ini_set/ini_get memory_limit 恢复内存 php

> ID：10738990
> 
> 赞同：3
> 
> 时间：2012-05-24T14:00:49.537
> 
> 标签：php, php-ini

我正在编写一个脚本，我需要在某个点将内存限制设置为非常高的值。但是，在那之后我需要恢复内存限制。

但是，如果您的脚本没有调用**ini_set**来设置内存限制 ，**则 ini_get返回 -1。** 我正在尝试做这样的事情：

 **```
$oldLimit  = ini_get("memory_limit");
ini_set("memory_limit", "220M");
do something 
//restore memory
ini_set("memory_limit", -1); 
```

但是，**$oldLimit**是 -1。
-1 在这种情况下意味着什么。
提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T14:12:09.883

-1 表示无限制，或者换句话说，您受到服务器物理内存的限制。因此，将 memory_limit 设置为高值是没有意义的

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T14:14:54.680

根据文档，-1 表示没有内存限制（http://ca.php.net/manual/en/ini.core.php）

（话虽如此，可能还有其他内存限制导致您悲伤。）

此外，ini_set() 仅适用于该运行脚本的持续时间，并且不是永久的，也不适用于当时或将来运行的任何其他脚本。因此，如果您确实进行了更改，您可能不需要将它们设置回来，因为它们只会在脚本结束时回退。**

# c# - 使用asp.net mvc 3验证html 5（移动）网站启用cookie的最佳方法是什么

> ID：10738992
> 
> 赞同：0
> 
> 时间：2012-05-24T14:00:51.223
> 
> 标签：c#, asp.net, asp.net-mvc-3, html, session-cookies

我知道这里有人问过类似的问题，但我仍然无法让它发挥作用。

我正在使用面向移动设备的 ASP.NET MVC 3 编写一个 html 5 网站。

我之前曾问过[另一个关于如何存储和检索昂贵数据的问题](https://stackoverflow.com/questions/10421121/how-do-you-pass-expensive-data-from-page-to-page-using-asp-net-mvc-3)，并决定使用 Session 变量。

我完成了应用程序并开始了内部测试，一切都很好，直到我们意识到该网站无法在某些 iPhone 上运行。经过研究，我意识到 Session 变量依赖于 cookie，并且某些 iPhone 默认情况下禁用了 cookie。

在我想出更好的解决方案之前，我想检查是否启用了 cookie 并重定向到错误页面。

我希望执行此操作的所有代码都可以编写在基本控制器中，但我不知道该怎么做。因此，我将以下代码放入基本控制器中...

```
protected void WriteCookie()
{
    Response.Cookies.Add(new HttpCookie("cookie_test"));
}

protected bool CookieCheck()
{
    return (Request.Cookies["cookie_test"] != null);
} 
```

然后在家庭控制器中，我在加载视图之前调用 WriteCookie 方法。视图本身具有重定向到两个控制器/操作之一的 javascript。通常会调用的控制器/视图（因为 html 5 无法解析位置）是 ChangeLocation / Index 控制器/动作。在那里我有以下代码......

```
if (!CookieCheck())
{
    RedirectToAction("CookieRequired", "Error");
} 
```

即使禁用了 cookie，它也不会重定向到上述错误页面。

所以我正在寻找的是一种最佳实践方法，可以用一个相当完整的代码示例来解决这个问题。

我的家庭控制器几乎总是重定向到另一个页面（在 javascript 中而不是控制器中）。我总共有大约 4 个控制器，总共有大约 6 个动作。

我的理想是在基本控制器中完全解决这个问题。如果不是这样，那么无论输入什么有效 URL，我都希望它能够正常工作（换句话说，即使 Web 应用程序不是通过 Home / Index 输入的）。如果不是这样，那么至少我希望我在代码中显示的内容能够正常工作（在 Home / Index 中设置 cookie 并在其他控制器 / 操作中检查它）并且即使重定向发生在控制器中也能工作。

# file - 如何使用 SVN 提交除一个文件之外的所有文件

> ID：10738994
> 
> 赞同：23
> 
> 时间：2012-05-24T14:00:55.977
> 
> 标签：file, svn, command, commit

我想提交所有修改过的文件，除了一个使用 Subversion 的文件。

所以这里是场景：

```
$ svn st
M    file1
M    file2
M    file3
M    file4 
```

我可以做这样的事情：

```
svn ci -m "Commit 1" file1 file2 file3
svn ci -m "Commit 2" file4 
```

但是当有大量文件时，我试图简化我的工作：

```
svn ci -m "Commit 1" `svn st | awk '{print $2}' | grep -v file4`
svn ci -m "Commit 2" file4 
```

该解决方案非常脆弱，因为这种情况不起作用：

```
$ svn st
M    file1
M    file2
D    file3
A +  file4 
```

我认为 SVN 没有针对我的问题的内置解决方案，但我不确定。还有其他方法吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-25T12:05:41.007

选项 1，AWK：

```
svn ci -m "Commit 1" `svn st | awk '{print $NF}' | grep -v file4`
svn ci -m "Commit 2" file4 
```

选项 2，--目标：

```
svn ci -m "Commit 1" --targets filesToCommit.txt
svn ci -m "Commit 2" file4 
```

选项 3，--changelist：

```
svn changelist my-changelist file1 file2 file3
svn ci -m "Commit 1" --changelist my-changelist
svn ci -m "Commit 2" file4 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-24T14:56:24.070

你可以这样做：

```
svn diff file4 > tmp.patch
svn revert file4
svn ci -m "Commit 1"
svn patch tmp.patch 
```

此时所有文件都已提交，除了`file4`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-04-28T12:03:57.447

使用更改列表提交除一个以外的所有内容：

```
svn changelist my-list -R .
svn changelist --remove file4
svn ci -m "Commit 1" --changelist my-list
svn ci -m "Commit 2" file4 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-24T14:06:33.140

虽然我确信您可以使用更复杂的`awk`命令行来制定解决方案，因为我们只讨论一个文件，为什么不

1.  将文件复制到临时位置
2.  `svn revert`修改后的文件以取回原始文件
3.  提交整个存储库
4.  将修改后的文件复制回来

简单、容易、快速。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-05-24T14:08:01.603

您可以通过将带有脚本的文件添加到[更改列表](http://svnbook.red-bean.com/en/1.7/svn.advanced.changelists.html)并提交它来稍微改进您的方法。您可以在提交之前检查列表以确保它包含正确的项目。

见`svn changelist --help`和`--changelist`选项`svn ci --help`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-26T08:25:32.353

只需提交过滤的文件列表。

```
svn ci `ls | grep -v file4` 
```

# c# - 检测为什么表单“消失”？

> ID：10738999
> 
> 赞同：1
> 
> 时间：2012-05-24T14:01:09.307
> 
> 标签：c#, .net, vb.net, winforms

在我必须修复的大型旧应用程序中，我有两种形式，如图所示（这是一个记事本示例）

![在此处输入图像描述](../Images/b9607bc1dcc9e4d9c1170808934fb0bf.png)

当我离开（用鼠标光标）我的小（Y）表单区域时，该表单将“消失”，就像我点击大表单并激活它一样。

但我没有点击 X，X 标题也没有激活，但是小 Y 形式向后退，不再可见。

如何跟踪问题？

当我离开该区域时，不会在两种形式中的任何一种上跟踪, `Resize`, `Activated`, `Deactivate`, `LostFocus`,`GotFocus`中的任何一个...`GiveFeedback``MdiChildActivate``Y`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T14:11:34.033

尝试覆盖表单 Y 的[OnVisibleChanged](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.onvisiblechanged.aspx)并在此设置断点。在调试期间重现情况并检查属性 Form.Visible 是否为 false 并检查调用堆栈。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T15:12:21.753

进行多次测试我发现了问题：**`Y`**表单是`Deactivate`由 d 的**`X`**，因为在`MouseMove`事件上`X`产生了一个 Focus() 在 (X) 表单内的特定控件上......

感谢大家的帮助！

（PS。所以，我在最初关于停用事件的帖子中错了）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T14:46:48.690

据我所知，这是一个系统范围的事情。我认为它被称为**[活动窗口跟踪](http://technet.microsoft.com/en-us/library/cc957204.aspx)**。

可能想尝试禁用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T14:25:39.887

您可以将表单 'Y' TopMost 属性设置为 'True' 这样它就永远不会消失在 'X' 后面。（假设 'X' 的 'Topmost' 属性不正确。