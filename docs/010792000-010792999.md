# StackOverflow 问答 10792000-10792999

# jquery - 最低要求的 jQuery 版本

> ID：10792001
> 
> 赞同：2
> 
> 时间：2012-05-29T01:08:01.393
> 
> 标签：jquery, methods, compression, extract

`document.ready()`我知道 jQuery和本机方法之间存在差异`javascript onload()`，因此我想`document.ready()`在准备就绪时使用它来做一些初始化的东西`DOM`。

但是，我不需要 jQuery 库提供的任何额外内容。鉴于 jQuery-1.7.2.min.js 的大小为*94.8kb*，这可能会延迟加载时间，尤其是在移动设备上，有没有办法获得仅提供该`document.ready()`方法的 jQuery 的均匀压缩版本？

如果没有，是否有任何其他库可以提供类似的功能？

另外，我知道 jQuery 有一个移动版本，但由于这个页面同时适用于 pc 和移动设备，我不确定移动版本是否可以在 pc 上运行良好。我想如果它兼容，那么可能这就是要走的路吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T01:10:49.227

你可能想看看 Zepto.js，它只有 8.4k ......

[http://zeptojs.com/](http://zeptojs.com/)

来自他们的网站——“Zepto 是一个用于现代浏览器的极简 JavaScript 库，具有很大程度上与 jQuery 兼容的 API。如果您使用 jQuery，那么您已经知道如何使用 Zepto。”

就 IE 支持而言，您可以在 IE 中使用回退来恢复到 jQuery...

```
<script>
document.write('<script src=' +
('__proto__' in {} ? 'zepto' : 'jquery') +
'.js><\/script>')
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T01:10:41.153

为您的脚本使用 CDN，以便缓存脚本库。这是 CDN 的脚本 + CDN 不可用时的后备脚本。

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<script>window.jQuery || document.write('<script src="js/vendor/jquery-1.7.2.min.js"><\/script>')</script> 
```

使用 CDN 的一些好处

*   较低的带宽
*   脚本被缓存
*   即使是下载了数千次的小脚本文件也会开始对您的带宽计产生明显影响。
*   更少的连接/访问您的网络服务器，从而提供更好的延迟

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T01:23:13.770

您需要的功能由 jQuery 的 jQuery.ready.promise 函数完成。

您只能提取和使用这部分代码。

```
jQuery.ready.promise = function( object ) {
if ( !readyList ) {

readyList = jQuery.Deferred();

// Catch cases where $(document).ready() is called after the
// browser event has already occurred.
if ( document.readyState !== "loading" ) {
// Handle it asynchronously to allow scripts the opportunity to delay ready
setTimeout( jQuery.ready, 1 );

// Mozilla, Opera and webkit nightlies currently support this event
} else if ( document.addEventListener ) {
// Use the handy event callback
document.addEventListener( "DOMContentLoaded", DOMContentLoaded, false );

// A fallback to window.onload, that will always work
window.addEventListener( "load", jQuery.ready, false );

// If IE event model is used
} else {
// ensure firing before onload,
// maybe late but safe also for iframes
document.attachEvent( "onreadystatechange", DOMContentLoaded );

// A fallback to window.onload, that will always work
window.attachEvent( "onload", jQuery.ready );

// If IE and not a frame
// continually check to see if the document is ready
var toplevel = false;

try {
toplevel = window.frameElement == null;
} catch(e) {}

if ( document.documentElement.doScroll && toplevel ) {
doScrollCheck();
}
}
}
return readyList.promise( object );
}; 
```

你可以在这里看到它：[https ://github.com/jquery/jquery/blob/master/src/core.js](https://github.com/jquery/jquery/blob/master/src/core.js)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T02:28:36.070

不完全是您所要求的，但另一种解决方案是将您的脚本仅包含在正文的末尾，就在结束`</body>`标记之前。这将获得相同的结果，甚至不需要包含 jQuery 的精简版本。

document.ready 函数的要点是，它将在 DOM 准备好之后调用，即在浏览器解析完所有 html 并准备好从 JavaScript 操作之后。将你的 JS 代码放在 body 的末尾可以达到同样的效果，因为浏览器在解析文档时会执行 JavaScript，并且在执行 JS 时它可以访问任何已经解析过的 DOM 元素。

当我在评论中提到这个想法时，你问你的代码将如何执行，所以这里有一个简单的例子：

```
// CHANGE THE FOLLOWING:

$(document).ready(function() {
    var myField = document.getElementById("someId");
    alert(myField.value);
});

// TO BE

var myField = document.getElementById("someId");
alert(myField.value); 
```

上面的内容是内联（尽管在脚本块中）还是包含在脚本标记所包含的外部 JS 文件中并不重要，只要它位于正文的末尾即可。

唯一的问题是，因为代码不包含在函数中，所以它将创建全局变量 - 作为一般规则，您要避免，因为如果将来您要包含其他外部库，他们可能会尝试使用相同的名字。您可以通过将代码包装在立即调用的匿名函数表达式中来避免此问题：

```
(function() {
    var x = "these variables are not global",
        myField = document.getElementById("someId");
    alert(myField.value);

    function test() {
        alert("this function isn't global either");
    }
    test();
})(); 
```

请注意额外的括号 - 匿名函数周围的括号使其成为函数表达式而不是函数声明（这意味着它不需要名称），最后的括号导致函数立即被调用。

您可以通过查看您现在正在阅读的 Stack Overflow 页面上的页面源代码来查看将 JS 放在正文末尾的真实示例。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-29T01:17:41.807

cdn + fallback 很不错：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="js/vendor/jquery-1.7.2.min.js"><\/script>')</script> 
```

或者您可以从较小的库中挑选您需要的内容：http: [//microjs.com/](http://microjs.com/)

# ios - 使用与其他视频文件一起使用的视频和代码时应用程序崩溃

> ID：10792002
> 
> 赞同：0
> 
> 时间：2012-05-29T01:08:06.090
> 
> 标签：ios, video, mpmovieplayercontroller, filepath

所以我正在尝试播放视频，到目前为止，以下代码对我来说与其他视频文件一起工作，但今天我渲染了一个新视频（与以前相同的渲染过程，所以它应该可以工作 - 从 AE 和文件压缩 h.264是 14.7mb），将其放入，更改文件名并尝试运行该应用程序，但它崩溃并给了我一个 SIGBART 错误并出现此错误： *** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：'***-[NSURL initFileURLWithPath:]: nil string parameter' 现在这听起来好像找不到视频文件，但它在我的侧边栏中，我的所有其他视频文件都使用相同的代码和所有内容。我在这里有点茫然......任何帮助将不胜感激。我很确定我已经提供了您需要查看发生了什么的所有代码，但如果您需要其他任何内容，请告诉我，我会用它更新帖子。

再次感谢！马特

```
NSURL *videoURL2 = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"Comp 2" ofType:@"mp4"]];
MPMoviePlayerController *player2 = [[MPMoviePlayerController alloc] initWithContentURL: videoURL2 ];
UIImage  *thumbnail2 = [player2 thumbnailImageAtTime:13.0 timeOption:MPMovieTimeOptionNearestKeyFrame];
player2.shouldAutoplay = NO;
player2.stop;
player2 = nil;
UIImageView *videoPicture2 = [[UIImageView alloc]initWithImage:thumbnail2];
videoPicture2.layer.shadowOffset = CGSizeMake(1, 1);
videoPicture2.layer.shadowRadius = 1;
videoPicture2.layer.shadowColor = [UIColor blackColor].CGColor;
videoPicture2.layer.shadowOpacity = 0.3f;
videoPicture2.layer.borderWidth = 1;
videoPicture2.layer.borderColor = [UIColor colorWithRed:0.0f green:0.0f blue:0.0f alpha:0.1f].CGColor;
videoPicture2.frame = CGRectMake(145, 3, 82, 54); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T01:57:50.557

我将大胆猜测并说文件名中的空格可能是问题所在（因为您说除了视频文件之外没有任何代码发生变化，并且因为字符串有问题）。重命名不带空格的文件，将其重新添加到您的项目中，然后重试。看看情况如何。

如果做不到这一点，请绝对确保您输入了正确的文件名——包括大小写。在我的文件名中有大小写错误之前我遇到过一些问题，它在模拟器上运行良好，但是当我把它放在设备上时它崩溃了，我不知道为什么！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T19:32:30.257

问题是视频未添加到目标

# c# - 如何使用 JayRock 将 Json 字符串转换为带有 Dictionary 的对象

> ID：10792007
> 
> 赞同：1
> 
> 时间：2012-05-29T01:08:29.603
> 
> 标签：c#, json, jayrock

我想将 Json 字符串转换为 C# 中的对象。字符串是这样的：

```
{"dealName":"name1","properties":{"a":"1", "b":"2"}} 
```

我这样定义类：

```
public class DealInfo
{
   public string dealName;
   public Dictionary<string, string> properties;
} 
```

我使用此代码进行转换：

```
DealInfo dl = JsonConvert.Import(typeof(DealInfo), jsonString) as DealInfo; 
```

我发现它只是转换了 dealName 字段，但是属性计数为 0。那么，有什么问题呢？如何解决？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T01:59:48.070

请试试：

```
DealInfo dl = JsonConvert.DeserializeObject<DealInfo>(jsonString); 
```

# python - 使用 Cherry Py 在 python 中创建 zip 文件流？

> ID：10792008
> 
> 赞同：1
> 
> 时间：2012-05-29T01:08:34.913
> 
> 标签：python, zip, cherrypy

我想即时创建一个 zip 文件以通过 Cherry Py 为用户提供服务：我尝试了以下代码，该代码生成了一个无效的 zip 文件：

```
@cherrypy.expose
def ZipDir(self, *args):
    path = "\\".join(args)
    output = StringIO.StringIO()
    file = zipfile.ZipFile(output, "w")

    zip_filename = path + ".zip"

    cherrypy.response.headers['Content-Type'] = 'application/zip'
    cherrypy.response.headers['Content-Disposition'] = 'attachment; filename="%s"' % (zip_filename,)
    dir = filter(lambda x: x.lower().endswith(".mp3") or not ("." in x), os.listdir("G:\\Music\\" + path))
    for f in dir:
        file.write("G:\\Music\\" + path + "\\" + f,f,zipfile.ZIP_DEFLATED)
    return output.getvalue() 
```

文件大小看起来差不多，但它没有注册为任何应用程序的 zip 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T01:12:29.173

我忘了在返回之前调用 file.close() 。那解决了它！

# gnuplot - gnuplot 绘制多个折线图

> ID：10792015
> 
> 赞同：23
> 
> 时间：2012-05-29T01:09:44.757
> 
> 标签：gnuplot

我有以下 dat 文件，名为`ls.dat`：

```
# Gnuplot script file for "ls"
# Version       Removed Added   Modified
8.1     0       0       0
8.4     0       0       4
8.5     2       5       9
8.6     2       7       51
8.7     2       7       51
8.8     2       7       51
8.9     2       7       51
8.10    2       7       51
8.11    2       8       112
8.12    2       8       112
8.13    2       17      175
8.17    6       33      213 
```

我试图用这个来绘制：

```
plot "ls.dat" using 1:2 title 'Removed' with lines,\
     "ls.dat" using 1:3 title 'Added' with lines,\
     "ls.dat" using 1:4 title 'Modified' with lines 
```

这将产生以下图表：

![在此处输入图像描述](../Images/5803fc1083a07c5040ecd3cbe8263abf.png)

我期待的是三个线图，它们都应该上升，但速度不同。谁能看到这里发生了什么？我敢肯定，这一定是一件非常愚蠢的事情。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-29T01:45:23.527

我认为你的问题是你的版本号。尝试制作 8.1 --> 8.01，依此类推。这应该把这些点按正确的顺序排列。

或者，您可以绘制`using X`，其中 X 是您想要的列号，而不是`using 1:X`。这将在 y 轴上绘制这些值，在 x 轴上绘制整数。尝试：

```
plot "ls.dat" using 2 title 'Removed' with lines, \
     "ls.dat" using 3 title 'Added' with lines, \
     "ls.dat" using 4 title 'Modified' with lines 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-29T02:14:31.747

安迪拉斯是完全正确的。一个小的补充，试试这个（例如）

```
plot 'ls.dat' using 4:xtic(1) 
```

这将使您的数据文件保持正确的顺序，但也会在 x 轴上保留您的版本 tic 标签。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-12-29T20:34:17.957

除了上面的答案之外，下面的命令也将起作用。我发布它是因为它对我更有意义。在每种情况下，它都是“使用 x-value-column: y-value-column”

```
plot 'ls.dat' using 1:2, 'ls.dat' using 1:3, 'ls.dat' using 1:4 
```

请注意，上面的命令假定您有一个以`ls.dat`制表符分隔的数据列命名的文件，其中第 1 列是 x，第 2 列是 y1，第 3 列是 y2，第 4 列是 y3。

**编辑`.csv`文件类型....**

请注意，如果您有`.csv`文件，那么如果您使用 gnuplot 命令

```
set datafile separator comma 
```

然后，您可以将上面的 plot 命令用于数字以逗号分隔的数据文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-04T12:52:41.490

无论您的*ls.dat*中的分隔符是什么，您都可以将其指定给**gnuplot**：

```
set datafile separator "\t" 
```

# jquery - jQuery类似于锚标签的选择菜单？

> ID：10792016
> 
> 赞同：0
> 
> 时间：2012-05-29T01:09:54.507
> 
> 标签：jquery, jquery-ui, jquery-mobile

我们在选择菜单上重新应用样式，如下所示：

`$('.select').selectmenu();`

这很好用.. 但我们也需要在我们的锚标签上这样做。

这些看起来像这样：

`<a data-callback="Continue" data-theme="b" data-role="button" name="Continue" data-transition="pop" data-direction="reverse">Continue</a>`

我们如何才能让 jQuery mobile 也将样式应用到这些元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T01:15:26.033

`$('#dialogContainer a').button();`

这似乎工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T03:18:02.593

试试这个

```
$('.selectButton').button('refresh'); 
```

更多信息

[http://jquerymobile.com/test/docs/buttons/buttons-methods.html](http://jquerymobile.com/test/docs/buttons/buttons-methods.html)

# python - NI-VISA 5.1.2 + python 2.7 + OS 10.6.8 TCPIP 错误

> ID：10792017
> 
> 赞同：0
> 
> 时间：2012-05-29T01:09:58.813
> 
> 标签：python, tcp, visa

我有一个 Keithley 2701 DMM，我正在尝试使用 python 2.7 和 pyVISA 通过 TCPIP 与它通信。我正在使用 virtualenv 和 wxPython 运行 python 2.7。我知道设备处于活动状态，因为我可以 ping IP 地址，我正在尝试使用以下代码访问机器：

```
from pyvisa.vpp43 import visa_library
visa_library.load_library("/Library/Frameworks/Visa.framework/VISA")
import visa import instrument
Keithley = visa.instrument("TCPIP::192.168.0.2::INSTR") 
```

当我运行代码时，出现以下错误：

```
Traceback (most recent call last):
  File "Keithley.py", line 4, in <module>
    Keithley = visa.instrument("TCPIP::192.168.0.2::INSTR")
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/PyVISA-1.4-py2.7.egg/pyvisa/visa.py", line 294, in instrument
    return Instrument(resource_name, **keyw)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/PyVISA-1.4-py2.7.egg/pyvisa/visa.py", line 358, in __init__
    "lock")))
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/PyVISA-1.4-py2.7.egg/pyvisa/visa.py", line 132, in __init__
    keyw.get("lock", VI_NO_LOCK))
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/PyVISA-1.4-py2.7.egg/pyvisa/vpp43.py", line 753, in open
    byref(vi))
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/PyVISA-1.4-py2.7.egg/pyvisa/vpp43.py", line 398, in check_status
    raise visa_exceptions.VisaIOError, status
pyvisa.visa_exceptions.VisaIOError: VI_ERROR_RSRC_NFOUND: Insufficient location information or the requested device or resource is not present in the system. 
```

任何帮助将不胜感激....

五

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T02:54:05.533

我没有玩过这个特定的数字万用表，但我已经使用相同的设置连接到其他几个设备。

1) 检查您的文档/数字万用表以确保电路板编号实际上为零。否则，您需要更改以下行：

```
Keithley = visa.instrument("TCPIP::192.168.0.2::INSTR") 
```

更像是

```
Keithley = visa.instrument("TCPIP1::192.168.0.2::INSTR") 
```

2）尝试使用原始`SOCKET`连接而不是典型`INSTR`方法。

[NI 插座示例](http://digital.ni.com/public.nsf/allkb/80C28CC795611E4A86256AB100209521)

[吉时利 2701 示例](http://digital.ni.com/public.nsf/allkb/92D475E7246846E786256ED700556D98)

如果我能想到其他任何事情，我会更新我的回复。

# javascript - 在声明之前调用函数，独立于浏览器？

> ID：10792021
> 
> 赞同：5
> 
> 时间：2012-05-29T01:10:22.380
> 
> 标签：javascript

如果我在我的`<head>`标签中这样做：

```
<script type="text/javascript" src="foo.js"></script> 
```

在 foo.js 我这样做：

```
var foo = new Foo();
function Foo()
{
   //code here
} 
```

即使变量包含在函数定义之上，此代码是否会可靠地实例化变量`foo`，还是应该将其移动到文件底部，如下所示：

```
function Foo()
{
   //code here
}
var foo = new Foo(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T01:26:41.507

您的示例将在任何遵循 ECMAScript 标准的浏览器中运行（至少在这个问题上都可以）。

[请参阅规范](http://www.ecma-international.org/publications/standards/Ecma-262.htm)的第 10.3-10.5 节。

首先设置本地范围，然后实际运行函数体。

阅读 10.5（该部分真的不是很长）以了解为什么 @meder 的答案是正确的。

### 如果您不想自己阅读规格：

10.5 告诉以该顺序声明变量（如果某个名称出现两次则覆盖）：

从外部范围继承=设置将影响外部范围：

*   周围范围的变量。
*   自己的函数名。

本地范围 = 设置不会影响外部范围：

*   参数（从左到右）。
*   参数对象。
*   声明所有内部变量（如果有的话，不覆盖当前值，`undefined`如果没有的话）

*总而言之：*

返回函数 x 本身：

```
function x() {
    return x;
} 
```

返回参数 x：

```
function x(x) {
    return x;
} 
```

返回内部函数 x：

```
function x(x) {
    return x; // the return does no harm, x is already set
    function x() {} // before the actual body is evaluated
} 
```

还返回内部函数 x：

```
function x(x) {
    var x; // in this case a no-op 
    return x;
    function x() {}
} 
```

返回 42：

```
function x(x) {
    var x = 42; // overwrite x in local scope
    return x;
    function x() {}
} 
```

返回第二个参数：

```
function x(x,x) { // assign left to right, last one "wins"
    return x; // arguments[0] would still name the first argument
} 
```

第二次调用时返回 2 `x`，因为 x 设置为内部函数：

```
function x() {
    x = function() { return 2; } // set x in outer scope
    return 1;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-29T01:18:08.160

如果您通过 定义它，则只需将其移至上方`var`，例如：

```
var Foo = function(){};
var foo = new Foo; 
```

否则，据我所知，解释器会提前读取函数定义。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-29T01:15:07.530

据我所知，由于提升，JS 对您的代码执行此操作：

```
var foo;          //var declarations hoisted up
function Foo(){   //function declarations hoisted up
   //code here
}
foo = new Foo();  //the operation 
```

所以应该没问题。但是，我不会仅仅依靠提升，因为至少对我来说，当声明到处都是时很难调试。为了便于阅读，请以这种方式订购代码：

*   变量声明
*   职能
*   操作

* * *

[代码1：](http://jsfiddle.net/3mYFp/4/)

```
console.log(foo); //undefined
var foo = new Foo();
console.log(foo); //Foo
function Foo(){
   //code here
}
console.log(foo); //Foo

//acts like:
var foo;          //var declaration hoisted up
function Foo(){}  //function declaration hoisted up
console.log(foo); //undefined
foo = new Foo();
console.log(foo); //Foo
console.log(foo); //Foo 
```

[代码2：](http://jsfiddle.net/3mYFp/5/)

```
console.log(foo); //undefined
function Foo(){
   //code here
}
console.log(foo); //undefined
var foo = new Foo();
console.log(foo); //Foo

//acts like:
var foo;          //var declaration hoisted up
function Foo(){}  //function declaration hoisted up
console.log(foo); //undefined
console.log(foo); //undefined
foo = new Foo();
console.log(foo); //Foo 
```

# opencv - OpenCV2.4中“matching_to_many_images.cpp”的样例无法运行

> ID：10792022
> 
> 赞同：0
> 
> 时间：2012-05-29T01:10:25.537
> 
> 标签：opencv

我下载了OpenCV2.4并安装了它，我使用的是VS2008，当我调试示例时[`matching_to_many_images.cpp`](https://github.com/Itseez/opencv/blob/master/samples/cpp/matching_to_many_images.cpp)，我在示例中发现了以下几行：

```
if( !createDetectorDescriptorMatcher( detectorType, descriptorType, matcherType, featureDetector, descriptorExtractor, descriptorMatcher ) )
{
    printPrompt( argv[0] );
    return -1;
} 
```

`createDetectorDescriptorMatcher()`返回错误。

为什么？我该怎么办？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T15:24:36.037

1.  包括 nonfree.hpp

    > #include "opencv2/nonfree/nonfree.hpp"

2.  在调用 createDetectorDescriptorMatcher() 之前初始化非自由模块

    > initModule_nonfree();

# iphone - 如何从笔尖加载uiview

> ID：10792023
> 
> 赞同：0
> 
> 时间：2012-05-29T01:10:38.923
> 
> 标签：iphone, ios, uiview, uiviewcontroller

当我滑动时，我试图改变视图。我已经通过更改背景颜色进行了测试，因此可以找到滑动工作。

但是从那时起，我添加了一个新的 view.nib 并将类设置为与当前视图相同。在这个类 .h 文件中，我已经完成了这个

```
@interface MasterViewController : UIViewController <UIGestureRecognizerDelegate>{

    UIView *myView;
    UIView *secondView;
}

@property (strong, nonatomic) IBOutlet UIView *myView; // attached to Viewcontroller nib
@property (strong, nonatomic) IBOutlet UIView *secondView; // attached to the secondView

- (void)swipedScreen; 
```

MyView 是首先出现的主视图，secondView 是我创建并更改其类以与此视图相关的 nib 的视图。

从那里我在 .m 文件中完成了这个

```
- (void) setupSwipeGestureRecognizer {
    UISwipeGestureRecognizer *swipeGesture = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(swipedScreen)];
    swipeGesture.direction = (UISwipeGestureRecognizerDirectionRight|UISwipeGestureRecognizerDirectionLeft);
    [myView addGestureRecognizer:swipeGesture];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
    self.title = @"Prototype";
    [self setupSwipeGestureRecognizer];
}

- (void)swipedScreen
{
    // Not sure what to do here.
    [[NSBundle mainBundle] loadNibNamed:@"SecondView" owner:self options:nil];

} 
```

我只是不知道在 swipedScreen 方法中要做什么才能让 secondView 出现.. 我想动画这个视图以从右侧滑入.. 但目前实际上只是让视图出现.. . 不知道我在这里做错了什么，但显然它是非常基本的。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T01:45:00.897

正如我评论的那样：

```
- (void)swipedScreen
{
    [UIView animateWithDuration:3.0f delay:0 options:UIViewAnimationOptionCurveLinear
                 animations:^{ 
                         secondView.frame = CGRectMake(180, secondView.frame.origin.y, secondView.frame.size.width, secondView.frame.size.height);
                     }
                 completion:^(BOOL finished){
                         myView.hidden = YES;
                 }];
} 
```

实际上，您必须根据需要更改 X、Y、宽度和高度值来设置动画，完成后，我将主视图设置为`myView`隐藏。

# objective-c - 多个 UIView 动画

> ID：10792026
> 
> 赞同：0
> 
> 时间：2012-05-29T01:10:48.830
> 
> 标签：objective-c, ios, core-animation, uiviewanimation

我正在尝试一个接一个地执行多个 UIView 动画。但是，我听说一个接一个地执行多个 UIView 动画是不好的做法，我应该改用 Core Animation。我试过这段代码：

```
//First Animation
[UIView beginAnimations:@"animation1" context:nil];
[UIView setAnimationDuration:2];
nwView.backgroundColor = [UIColor redColor];
nwView.frame = CGRectMake(CGRectGetMidX(screenSize),
                          CGRectGetMinY(screenSize),
                          width, 
                          height);
nwView.transform = CGAffineTransformMakeRotation(45.0f);
[UIView commitAnimations];

//Second Animation
[UIView beginAnimations:@"second animation" context:nil];
[UIView setAnimationDuration:2];

nwView.transform = CGAffineTransformMakeScale(0.5, 0.33);
nwView.backgroundColor = [UIColor purpleColor];

[UIView commitAnimations]; 
```

但它只做第二个动画。我知道这个问题类似于[UIView 两个动画共存](https://stackoverflow.com/questions/10094961/uiview-two-animations-coexisting)，但它的上下文略有不同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T01:17:55.630

我认为使用 UIView 块连续制作 2 个动画没有任何问题。只需确保在第一个动画的 completino 块中开始您的第二个动画。

没有块（您的示例）它不起作用，因为您必须为动画设置委托或为 setAnimationDidStopSelector 设置选择器。在那里你应该开始第二个动画。

但同样，用块做动画没有错（这是首选方式）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T01:32:43.107

如果您希望一个接一个地制作多个动画，这不是这样做的方法。您发布的代码几乎同时执行，这意味着动画将几乎同时执行。

相反，您应该为第一个动画设置委托，然后执行第一个动画。然后当第一个动画调用 animationDidStop 方法时，你应该做第二个动画。这样可以确保它们一个接一个。

假设您调用 doMyAnimations 来启动动画，您就是这样做的。

```
-(void)doMyAnimations{
    //First Animation
    [UIView beginAnimations:@"animation1" context:nil];
    [UIView setAnimationDuration:2];
    [UIView setAnimationDelegate:self];
    nwView.backgroundColor = [UIColor redColor];
    nwView.frame = CGRectMake(CGRectGetMidX(screenSize),
                              CGRectGetMinY(screenSize),
                              width, 
                              height);
    nwView.transform = CGAffineTransformMakeRotation(45.0f);
    [UIView commitAnimations];
}

- (void)animationWillStart:(NSString *)animationID context:(void *)context{
}

- (void)animationDidStop:(NSString *)animationID finished:(NSNumber *)finished context:(void *)context{
    if([animationID isEqualToString:@"animation1"]){
        //Second Animation
        [UIView beginAnimations:@"second animation" context:nil];
        [UIView setAnimationDuration:2];

        nwView.transform = CGAffineTransformMakeScale(0.5, 0.33);
        nwView.backgroundColor = [UIColor purpleColor];

        [UIView commitAnimations];
    }
} 
```

请记住，nwView 必须在整个班级中都可以访问。如果不是，您可以将其设为实例变量，或者在 animationDidStop 方法中找到另一种访问它的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T00:10:38.327

您可以为此目的使用块并获得非常干净的结果。

```
NSMutableArray* animationBlocks = [NSMutableArray new];

typedef void(^animationBlock)(BOOL);

// getNextAnimation
// removes the first block in the queue and returns it
animationBlock (^getNextAnimation)() = ^{
    animationBlock block = (animationBlock)[animationBlocks firstObject];
    if (block){
        [animationBlocks removeObjectAtIndex:0];
        return block;
    }else{
         return ^(BOOL finished){};
    }
};

//add a block to our queue
[animationBlocks addObject:^(BOOL finished){;
    [UIView animateWithDuration:1.0 animations:^{
        //...animation code...
    } completion: getNextAnimation()];
}];

//add a block to our queue
[animationBlocks addObject:^(BOOL finished){;
    [UIView animateWithDuration:1.0 animations:^{
        //...animation code...
    } completion: getNextAnimation()];
}];

//add a block to our queue
[animationBlocks addObject:^(BOOL finished){;
    NSLog(@"Multi-step Animation Complete!");
}];

// execute the first block in the queue
getNextAnimation()(YES); 
```

取自：http: [//xibxor.com/objective-c/uiview-animation-without-nested-hell/](http://xibxor.com/objective-c/uiview-animation-without-nested-hell/)

# php - 带有 URL 敏感符号的 $_GET 变量？（比如搜索）

> ID：10792032
> 
> 赞同：0
> 
> 时间：2012-05-29T01:11:51.753
> 
> 标签：php, url, search, get

我意识到我的搜索存在一个非常明显的问题，但不知道如何解决它。假设有人搜索“Hello there”，它当然会在 URL 中出现类似 ?s=Hello+there 的内容。

但是，我该如何处理搜索“Hello & such”之类的内容的人？浏览器会将第二个查询读取为 ?s=Hello++&+such，这使得它在“Hello”处停止搜索变量。我对磅符号有同样的问题。如果有人搜索带有井号符号的东西，它会被添加，就好像它是一个 URL 片段，而不是搜索查询的一部分。

我似乎找不到有关如何处理此问题的信息，有人可以帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T01:17:48.783

这就是编码和转义发挥作用的地方。对于 php，请参见[url 编码](http://de2.php.net/manual/en/function.urlencode.php)。

但是，由于您的问题的性质，我认为您宁愿寻找 js 功能：

[在 JavaScript 中编码 URL？](https://stackoverflow.com/questions/332872/how-to-encode-a-url-in-javascript)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T01:18:51.420

搜索`&`不会中断您的搜索。如果您使用 GET 表单进行搜索，`&`则会自动更改为`%26`. 其他符号也一样。

使用 PHP 手动转义`urlencode()`或 JS 的简单查找/替换（或在线旋转的某些功能）应该可以做到万无一失。

# mysql - 如果我更改字符集，我可以使用 ' 而不是 ` 来分隔字段吗？

> ID：10792040
> 
> 赞同：0
> 
> 时间：2012-05-29T01:12:59.813
> 
> 标签：mysql, delimiter, character-encoding

而不是这样：

```
 CREATE TABLE IF NOT EXISTS `address` (
   `Contact_ID` smallint(6) NOT NULL DEFAULT '0' COMMENT 'Primary Key',
   `Street Address` char(50) DEFAULT NULL,
   `City` char(20) DEFAULT NULL,
   `Zip Code` char(8) DEFAULT NULL,
   `Country` char(20) DEFAULT NULL,
   PRIMARY KEY (`Contact_ID`)
  ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='Moradas'; 
```

我希望能够做到这一点：

```
 CREATE TABLE IF NOT EXISTS 'address' (
   'Contact_ID' smallint(6) NOT NULL DEFAULT ´0´ COMMENT ´Primary Key´,
   'Street Address' char(50) DEFAULT NULL, (...) 
```

我在 WAMPSERVER 上这样做。这是因为每次创建表并填充它时，为了生成 ` 而必须执行 'shift+character' 真的不切实际。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T01:32:24.163

# jquery - Knockout Js 可观察数组 Jquery 事件

> ID：10792043
> 
> 赞同：0
> 
> 时间：2012-05-29T01:13:56.087
> 
> 标签：jquery, knockout-2.0

将 Knockout JS 2.0 与 jQuery 1.7.2 一起使用，我的 observableArray 创建的对象的实时（开启）事件存在问题。

如果我将函数的目标更改为页面上的 dom 元素，它已经可以工作，但是在定位将要创建的对象时，它似乎会忽略它。我才刚刚开始研究 jQuery 中的 on 绑定，所以很可能我错过了一些东西。

任何人都可以提供的任何帮助将不胜感激。

[http://jsfiddle.net/kMSQL](http://jsfiddle.net/SimplicityDigital/kMsQL/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T02:55:04.867

要设置`on`未来的元素，它是这样的：

[http://jsfiddle.net/lucuma/yD3gL/1/](http://jsfiddle.net/lucuma/yD3gL/1/)

```
$('ul').on('mouseenter', 'div',   function() {    
        $(this).addClass('hover');
    });

$('ul').on('mouseleave', 'div',   function() {
        $(this).removeClass('hover');
    }); 
```

旧的弃用方式`live`仍然有效，但不推荐：

[http://jsfiddle.net/lucuma/kMSQL/26/](http://jsfiddle.net/lucuma/kMsQL/26/)

```
$('div').live( {
    mouseenter: function() {
        $(this).addClass('hover');
    },
    mouseleave: function() {
        $(this).removeClass('hover');
    }
});​ 
```

# php - 检查提交时表单值是否已更改

> ID：10792044
> 
> 赞同：7
> 
> 时间：2012-05-29T01:13:59.173
> 
> 标签：php, forms, codeigniter

我正在使用 Codeigniter 创建一个 Web 应用程序，并且创建了一些编辑表单（从 m​​ysql 数据库中提取当前值）。用户可以通过编辑表单中的数据来编辑当前数据库数据。

如果用户更改某些值，我想要做的是执行某些操作。因此，我不只是想在字段具有特定值时执行操作，而是仅在用户更改值并提交表单时执行。（具体来说，当用户通过将值从“否”更改为“是”来指示她执行了某项任务时，我想做一些事情，例如为任务的完成设置时间戳等）

我试过用谷歌搜索一个解决方案，但我找不到我需要的东西。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T02:00:20.930

我没有使用过 CodeIgniter，但我肯定已经完成了您在纯 PHP 网站中所做的事情。

在不同的项目中，我遵循了两种思维方式。

**策略#1：多次写入很便宜。**

如果用户单击“提交”而不是“取消”，则他们至少更改了一个字段。所以做一个的成本`UPDATE table SET name=%s,email=%s,gender=%s WHERE id=%d`并不比一个简单的多得多`UPDATE table SET gender=%s WHERE id=%d`。如果您要花费 WHERE 和 write 的费用，那么让 write 增加几个额外的字段并不重要，尤其是在它发生的频率上。

所以：不用担心，只需使用您在表单中获得的内容更新所有内容。如果你用相同的数据覆盖一个字段，那没关系。归根结底，您希望您的数据库反映表单中返回的所有内容，而不管之前数据库中的内容。

**策略#2：使用会话变量。**

如果您已经使用当前数据填充了表单，那么您可能已经将其拉入了一个数组。因此将数组复制到`$_SESSION`中，并比较 POST 之后的字段。

策略 1 更易于编程，但*使用*的数据库 CPU 和带宽稍多。策略 2 对数据库的影响略小，但代价是您的 Web 服务器上使用了更多的 CPU，并且更容易出现开发错误。

我仍然不知道哪种方式更好，但两者的论点似乎都是有效的。这些天来，我倾向于选择最简单的解决方案。但是我意识到扩展 Web 集群比扩展数据库集群更容易，所以如果你正在开发非常大的东西，最好花更多的精力来优化你的数据库而不是你的 Web 服务器。

请注意，如果您将会话数据存储在数据库中而不是临时文件中，那么就数据库服务器影响而言，#2 实际上成本更高*。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T01:23:35.843

您是说用户可以编辑数据库中的条目，因此只需将记录`id`作为隐藏输入字段发送。

当用户提交表单时，您使用隐藏字段检索数据库记录并进行必要的比较。

顺便说一句，为了防止用户尝试修改其他人的记录，建议将校验和添加到`id`只有您可以验证的字段中，这可以使用[`hash_hmac`](http://au.php.net/hash_hmac). 或者，如果他们已登录，您可以验证记录所有权。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T01:19:49.860

这里唯一真正的解决方案是知道表单输入的初始值，然后将其与提交的值进行比较。您*可以*将原始值作为隐藏的表单字段和稍微不同的名称传递给浏览器，然后比较两个服务器端 - 如果您不知道原始值已经是什么，这应该会为您带来所需的效果。

# c# - 托管 WiFi 错误

> ID：10792046
> 
> 赞同：1
> 
> 时间：2012-05-29T01:14:46.323
> 
> 标签：c#, wifi, managed

我一直在成功地使用这个 API ( [http://managedwifi.codeplex.com/](http://managedwifi.codeplex.com/) ) 并且没有任何重大问题。至少到今天为止……

我在 C# 中实现了一个程序，其中包括检索连接 AP 的 BSSID 和附近可用无线网络的数量并进行多项检查。当我连接到某个 AP 时，我会收到一条消息，而当我没有连接到该特定 AP（但连接到另一个 AP 或我根本没有连接）时，我会收到另一条消息。就那么简单。

我这样做了，连接到 AP，只检查一次 - 当应用程序启动时。

但是......我想添加一个计时器，以便每 30 或 60 秒进行一次检查（而不仅仅是在开始时）。问题是它运行了几次（最多 10 次），然后程序冻结，我收到以下消息：

*Win32Exception 未处理：尝试建立与网络服务器的会话，但与该服务器建立的会话已经太多*

并且消息框指向 WlanClient client = new WlanClient();

我不知道什么是不正确的，虽然代码编译正确，但我得到了这个错误。

也许是物品的处置？

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T08:06:12.487

> “也许是物品的处置？”

您是对的，这可能是您的代码中缺少的内容。

制作 `WlanClient client = new WlanClient();` 一个类变量并尽可能频繁地使用它。

```
... class Yourclass
{
     private static WlanClient client = new WlanClient(); 
... 
```

# android - EditText 和 InputFilter 导致重复文本

> ID：10792051
> 
> 赞同：16
> 
> 时间：2012-05-29T01:15:41.997
> 
> 标签：android, android-edittext

我正在尝试实现一个 EditText，它将输入限制为仅 alpha 字符 [A-Za-z]。

我从[这篇文章](https://stackoverflow.com/questions/3349121/how-do-i-use-inputfilter-to-limit-characters-in-an-edittext-in-android)开始使用 InputFilter 方法。当我键入“a%”时，文本会消失，然后如果我按退格键，则文本是“a”。我已经尝试过过滤器功能的其他变体，例如使用正则表达式仅匹配 [A-Za-z] 有时会看到重复字符等疯狂行为，我将输入“a”然后输入“b”然后得到“aab”输入“c”得到“aabaabc”，然后按退格键得到“aabaabcaabaabc”！

这是到目前为止我正在使用的代码，我尝试过不同的方法。

```
 EditText input = (EditText)findViewById( R.id.inputText );
    InputFilter filter = new InputFilter() {
        @Override
        public CharSequence filter( CharSequence source, int start, int end, Spanned dest, int dstart, int dend ) {
            //String data = source.toString();
            //String ret = null;
            /*
            boolean isValid = data.matches( "[A-Za-z]" );
            if( isValid ) {
                ret = null;
            }
            else {
                ret = data.replaceAll( "[@#$%^&*]", "" );
            }
            */
            /*
            dest = new SpannableStringBuilder();
            ret = data.replaceAll( "[@#$%^&*]", "" );
            return ret;
            */

            for( int i = start; i < end; i++ ) {
                if( !Character.isLetter( source.charAt( i ) ) ) {
                    return "";
                }
            }

            return null;
        }
    };
    input.setFilters( new InputFilter[]{ filter } ); 
```

我完全被这个难住了，所以这里的任何帮助将不胜感激。

**编辑：** 好的，我已经对 InputFilter 做了很多试验并得出了一些结论，尽管没有解决问题。请参阅下面我的代码中的注释。我现在要试试 Imran Rana 的解决方案。

```
 EditText input = (EditText)findViewById( R.id.inputText );
    InputFilter filter = new InputFilter() {
        // It is not clear what this function should return!
        // Docs say return null to allow the new char(s) and return "" to disallow
        // but the behavior when returning "" is inconsistent.
        // 
        // The source parameter is a SpannableStringBuilder if 1 char is entered but it 
        // equals the whole string from the EditText.
        // If more than one char is entered (as is the case with some keyboards that auto insert 
        // a space after certain chars) then the source param is a CharSequence and equals only 
        // the new chars.
        @Override
        public CharSequence filter( CharSequence source, int start, int end, Spanned dest, int dstart, int dend ) {
            String data = source.toString().substring( start, end );
            String retData = null;

            boolean isValid = data.matches( "[A-Za-z]+" );
            if( !isValid ) {
                if( source instanceof SpannableStringBuilder ) {
                    // This works until the next char is evaluated then you get repeats 
                    // (Enter "a" then "^" gives "a". Then enter "b" gives "aab")
                    retData = data.replaceAll( "[@#$%^&*']", "" );
                    // If I instead always returns an empty string here then the EditText is blanked.
                    // (Enter "a" then "^" gives "")
                    //retData = "";
                }
                else { // source is instanceof CharSequence
                    // We only get here if more than 1 char was entered (like "& ").
                    // And again, this works until the next char is evaluated then you get repeats 
                    // (Enter "a" then "& " gives "a". Then enter "b" gives "aab")
                    retData = "";
                }
            }

            return retData;
        }
    };
    input.setFilters( new InputFilter[]{ filter } ); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T08:02:10.220

## 使用以下代码：

```
EditText input = (EditText) findViewById(R.id.inputText);
   input.addTextChangedListener(new TextWatcher() {

    public void onTextChanged(CharSequence s, int start, int before, int count) {
        // TODO Auto-generated method stub
         for( int i = start;i<s.toString().length(); i++ ) {
             if( !Character.isLetter(s.charAt( i ) ) ) {
                input.setText("");
             }
         }

    }

    public void beforeTextChanged(CharSequence s, int start, int count,
            int after) {
        // TODO Auto-generated method stub

    }

    public void afterTextChanged(Editable s) {
        // TODO Auto-generated method stub

    }
   }); 
```

## 如果您希望有效文本保留在 EditText 中：

* * *

```
 input.addTextChangedListener(new TextWatcher() {

    public void onTextChanged(CharSequence s, int start, int before, int count) {
        // TODO Auto-generated method stub

    }

    public void beforeTextChanged(CharSequence s, int start, int count,
            int after) {
        // TODO Auto-generated method stub

    }
    public void afterTextChanged(Editable s) {
        // TODO Auto-generated method stub
         for( int i = 0;i<s.toString().length(); i++ ) {
             if( !Character.isLetter(s.charAt( i ) ) ) {                    
                s.replace(i, i+1,"");               
             }
         }
    }
   }); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-11-29T12:46:03.543

修复重复文本，适用于所有 Android 版本：

```
public static InputFilter getOnlyCharactersFilter() {
    return getCustomInputFilter(true, false, false);
}

public static InputFilter getCharactersAndDigitsFilter() {
    return getCustomInputFilter(true, true, false);
}

public static InputFilter getCustomInputFilter(final boolean allowCharacters, final boolean allowDigits, final boolean allowSpaceChar) {
    return new InputFilter() {
        @Override
        public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {
            boolean keepOriginal = true;
            StringBuilder sb = new StringBuilder(end - start);
            for (int i = start; i < end; i++) {
                char c = source.charAt(i);
                if (isCharAllowed(c)) {
                    sb.append(c);
                } else {
                    keepOriginal = false;
                }
            }
            if (keepOriginal) {
                return null;
            } else {
                if (source instanceof Spanned) {
                    SpannableString sp = new SpannableString(sb);
                    TextUtils.copySpansFrom((Spanned) source, start, sb.length(), null, sp, 0);
                    return sp;
                } else {
                    return sb;
                }
            }
        }

        private boolean isCharAllowed(char c) {
            if (Character.isLetter(c) && allowCharacters) {
                return true;
            }
            if (Character.isDigit(c) && allowDigits) {
                return true;
            }
            if (Character.isSpaceChar(c) && allowSpaceChar) {
                return true;
            }
            return false;
        }
    };
} 
```

现在你可以像这样使用这个文件管理器：

```
 //Accept Characters Only
edit_text.setFilters(new InputFilter[]{getOnlyCharactersFilter()});

//Accept Digits and Characters
edit_text.setFilters(new InputFilter[]{getCharactersAndDigitsFilter()});

//Accept Digits and Characters and SpaceBar
edit_text.setFilters(new InputFilter[]{getCustomInputFilter(true,true,true)}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T23:36:02.827

宾果，我发现了问题！

当我在 EditText 上使用 android:cursorVisible="false" 时， start 和 dstart 参数不匹配正确。

start 参数对我来说始终为 0，但 dstart 参数也始终为 0，所以只要我使用 .replaceAll() 就可以了。这与[这篇文章](https://stackoverflow.com/questions/9815433/can-someone-help-me-with-the-parameters-to-the-android-inputfilter-filter-meth)所说的相反，所以我不太明白为什么，但至少我可以构建一些现在可以使用的东西！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-21T21:22:15.227

我们遇到了类似的问题，我相信解决方案 [0] 也对您有用。我们的要求是实现一个去除富文本输入的 EditText。例如，如果用户将粗体文本复制到剪贴板并将其粘贴到 EditText 中，则 EditText 应删除粗体强调样式并仅保留纯文本。

解决方案类看起来像这样：

```
public class PlainEditText extends EditText {
    public PlainEditText(Context context, AttributeSet attrs, int defStyleAttr) {
        super(context, attrs, defStyleAttr);
        addFilter(this, new PlainTextInputFilter());
    }

    private void addFilter(TextView textView, InputFilter filter) {
        InputFilter[] filters = textView.getFilters();
        InputFilter[] newFilters = Arrays.copyOf(filters, filters.length + 1);
        newFilters[filters.length] = filter;
        textView.setFilters(newFilters);
    }

    private static class PlainTextInputFilter implements InputFilter {
        @Override
        public CharSequence filter(CharSequence source, int start, int end, Spanned dest,
                                   int dstart, int dend) {
            return stripRichText(source, start, end);
        }

        private CharSequence stripRichText(CharSequence str, int start, int end) {
            // ...
        }
    }
} 
```

我们最初对 stripRichText() 的实现很简单：

```
// -- BROKEN. DO NOT USE --
String plainText = str.subSequence(start, end).toString();
return plainText; 
```

Java 基 String 类不保留任何样式信息，因此将 CharSequence 接口转换为具体的 String 只复制纯文本。

我们没有意识到的是，一些 Android 软键盘会添加并依赖临时组合提示来处理拼写错误和其他内容。该问题通过删除提示以及以意想不到的方式重复字符（通常使整个 EditText 字段的输入加倍）来表现出来。InputFilter.filter() 的文档[1] 以这种方式传达要求：

```
 * Note: If <var>source</var> is an instance of {@link Spanned} or
 * {@link Spannable}, the span objects in the <var>source</var> should be 
 * copied into the filtered result (i.e. the non-null return value). 
```

我相信正确的解决方案是保留临时跨度：

```
 /** Strips all rich text except spans used to provide compositional hints. */
    private CharSequence stripRichText(CharSequence str, int start, int end) {
        String plainText = str.subSequence(start, end).toString();
        SpannableString ret = new SpannableString(plainText);
        if (str instanceof Spanned) {
            List<Object> keyboardHintSpans = getComposingSpans((Spanned) str, start, end);
            copySpans((Spanned) str, ret, keyboardHintSpans);
        }
        return ret;
    }

    /**
     * @return Temporary spans, often applied by the keyboard to provide hints such as typos.
     *
     * @see {@link android.view.inputmethod.BaseInputConnection#removeComposingSpans}
     * @see {@link android.inputmethod.latin.inputlogic.InputLogic#setComposingTextInternalWithBackgroundColor}
     */
    @NonNull private List<Object> getComposingSpans(@NonNull Spanned spanned,
                                                    int start,
                                                    int end) {
        // TODO: replace with Apache CollectionUtils.filter().
        List<Object> ret = new ArrayList<>();
        for (Object span : getSpans(spanned, start, end)) {
            if (isComposingSpan(spanned, span)) {
                ret.add(span);
            }
        }
        return ret;
    }

    private Object[] getSpans(@NonNull Spanned spanned, int start, int end) {
        Class<Object> anyType = Object.class;
        return spanned.getSpans(start, end, anyType);
    }

    private boolean isComposingSpan(@NonNull Spanned spanned, Object span) {
        return isFlaggedSpan(spanned, span, Spanned.SPAN_COMPOSING);
    }

    private boolean isFlaggedSpan(@NonNull Spanned spanned, Object span, int flags) {
        return (spanned.getSpanFlags(span) & flags) == flags;
    }

    /**
     * Apply only the spans from src to dst specific by spans.
     *
     * @see {@link android.text.TextUtils#copySpansFrom}
     */
    public static void copySpans(@NonNull Spanned src,
                                 @NonNull Spannable dst,
                                 @NonNull Collection<Object> spans) {
        for (Object span : spans) {
            int start = src.getSpanStart(span);
            int end = src.getSpanEnd(span);
            int flags = src.getSpanFlags(span);
            dst.setSpan(span, start, end, flags);
        }
    } 
```

[0] 此处提供的实际实现：[https ://github.com/wikimedia/apps-android-wikipedia/blob/e9ddd8854ff15cde791a2e6fb7754a5450d6f7cf/app/src/main/java/org/wikipedia/richtext/RichTextUtil.java](https://github.com/wikimedia/apps-android-wikipedia/blob/e9ddd8854ff15cde791a2e6fb7754a5450d6f7cf/app/src/main/java/org/wikipedia/richtext/RichTextUtil.java)

[1] [https://android.googlesource.com/platform/frameworks/base/+/029942f77d05ed3d20256403652b220c83dad6e1/core/java/android/text/InputFilter.java#37](https://android.googlesource.com/platform/frameworks/base/+/029942f77d05ed3d20256403652b220c83dad6e1/core/java/android/text/InputFilter.java#37)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-06T14:08:04.087

我只想将我的解决方案添加到问题中（尽管如此）。我发现如果你添加

```
 yourEditText.setInputType(InputType.TYPE_TEXT_FLAG_NO_SUGGESTIONS); 
```

然后退格问题停止

# python - Python 凯撒密码解码器

> ID：10792052
> 
> 赞同：5
> 
> 时间：2012-05-29T01:15:56.027
> 
> 标签：python, decoding, encryption

在我的课程中，我的任务是创建一个 Caesar Cipher 解码器，它接受输入字符串并使用字母频率找到可能的最佳字符串。如果不确定这有多大意义，请发布问题：

*编写一个执行以下操作的程序。首先，它应该读取一行输入，即编码消息，由大写字母和空格组成。您的程序必须尝试使用​​移位 S 的所有 26 个可能值来解码消息；在这 26 条可能的原始消息中，打印出具有最高善意的一条。为方便起见，我们将为您预定义变量 letterGoodness，长度为 26 的列表等于上面频率表中的值*

![字母频率](../Images/2f4e6be1751c9d2ee4af0cf44b638a69.png)

到目前为止我有这个代码：

```
x = input()
NUM_LETTERS = 26 #Can't import modules I'm using a web based grader/compiler
def SpyCoder(S, N):
    y = ""
    for i in S:
        x = ord(i)
        x += N
        if x > ord('Z'):
            x -= NUM_LETTERS
        elif x < ord('A'):
            x += NUM_LETTERS
        y += chr(x)
    return y  

def GoodnessFinder(S):
    y = 0
    for i in S:
        if x != 32:
            x = ord(i)
            x -= ord('A')
            y += letterGoodness[x]
    return y 

def GoodnessComparer(S):
    goodnesstocompare = GoodnessFinder(S)
    goodness = 0
    v = ''
    for i in range(0, 26):
        v = SpyCoder(S, i)
        goodness = GoodnessFinder(v)
        if goodness > goodnesstocompare:
            goodnesstocompare = goodness
    return v

y = x.split()
z = ''
for i in range(0, len(y)):
    if i == len(y) - 1:
        z += GoodnessComparer(y[i])
print(z) 
```

编辑：Cristian Ciupitu 建议进行更改请忽略缩进错误，它们可能是在我复制代码时出现的。

该程序的工作原理如下：

*   获取输入并将其拆分为列表
*   对于每个列表值，我将其提供给善良的发现者。
*   它采用字符串的优点并将其他所有内容进行比较，当有更高的优点时，它会使更高的优点成为比较的优点。
*   然后它将该文本字符串移动 i 量，以查看优度是更高还是更低

我不太确定问题出在哪里，第一个测试：LQKP OG CV GKIJV DA VJG BQQ
打印正确的消息：在动物园旁加入我

然而下一个测试： UIJT JT B TBNQMF MJOF PG UFYU GPS EFDSZQUJOH
给出一个垃圾字符串： SGHR HR Z RZLOKD KHMD NE SDWS ENQ CDBQXOSHMF
当它应该是： 这是一个用于解密的示例文本行

我知道我必须：
尝试每个班次值
获取单词的“善良”
返回具有最高善良的字符串。

我希望我的解释是有道理的，因为我现在很困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T02:17:10.787

这是我的实现，效果很好。

您应该打印每条可能消息的优点并查看程序输出它的原因。

```
letterGoodness = dict(zip(string.ascii_uppercase,
                        [.0817,.0149,.0278,.0425,.1270,.0223,.0202,
                         .0609,.0697,.0015,.0077,.0402,.0241,.0675,
                         .0751,.0193,.0009,.0599,.0633,.0906,.0276,
                         .0098,.0236,.0015,.0197,.0007]))

trans_tables = [ str.maketrans(string.ascii_uppercase,
                 string.ascii_uppercase[i:]+string.ascii_uppercase[:i])
                 for i in range(26)]

def goodness(msg):
    return sum(letterGoodness.get(char, 0) for char in msg)

def all_shifts(msg):
    msg = msg.upper()
    for trans_table in trans_tables:
        txt = msg.translate(trans_table)
        yield goodness(txt), txt

print(max(all_shifts(input()))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T00:05:39.417

感谢出色的 Cristian Ciupitu，我的最终解决方案可行。

```
x = input()
NUM_LETTERS = 26 #Can't import modules I'm using a web based grader/compiler
def SpyCoder(S, N):
   y = ""
   for i in S:
      if(i.isupper()):
         x = ord(i)
         x += N
         if x > ord('Z'):
            x -= NUM_LETTERS
         elif x < ord('A'):
            x += NUM_LETTERS
         y += chr(x)
      else:
         y += " "
   return y

def GoodnessFinder(S):
   y = 0
   for i in S:
      if i.isupper():
         x = ord(i)
         x -= ord('A')
         y += letterGoodness[x]
      else:
         y += 1
   return y

def GoodnessComparer(S):
   goodnesstocompare = GoodnessFinder(S)
   goodness = 0
   v = ''
   best_v = S
   for i in range(0, 26):
     v = SpyCoder(S, i)
     goodness = GoodnessFinder(v)
     if goodness > goodnesstocompare:
         best_v = v
         goodnesstocompare = goodness
   return best_v

print(GoodnessComparer(x)) 
```

感谢您的所有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-11T10:03:11.423

我正在研究相同的教程并使用了稍微不同的方法。这避免了创建和调用函数：

```
inp = input()     #to hold code text
code = list(inp)  #store code as a list
soln = []         #store the 'Goodness' for each of 26 possible answers
y=0               #variable to hold total goodness during calculations
clear = []        #will hold decoded text
pos=0             #position marker for a list

#for every possible value of shift
#note range as 0 to 25 are valid shifts and shift 26 = shift 0

for shift in range(0,26):
   for i in code:                  #loop through each letter in code
      if i == " ":                 #spaces have no score so omit them
         continue
      else:                        #if it's a letter
         x = ord(i)-shift          #apply the test shift
         if x < 65:                #prevent shifting outside A-Z range
            x = x + 26             
         x = x - 64                #turn ord into character position in A-Z with A=1
         x = letterGoodness[x-1]   #turn this into the Goodness score
         y = y + x                 #add this to a running total
   soln.insert(shift-1,y)          #AFTER decoding all letters in code, add total(y) to list of scores
   y = 0                           #reset y before next test value

bestSoln=max(soln)                 #find highest possible score

for i in range(0,26):              #check the list of solutions for this score
   if soln[i]==bestSoln:           #the position in this list is the shift we need
       bestShift = i+1             #+1 as the first solution is 0

for i in code:                     #now decode the original text using our best solution
   if i == " ":                    #spaces are not encoded so just add these to the string
      clear.insert(pos," ")        #pos used to track next position for final string
      pos = pos + 1
      continue
   else:
      x = ord(i)-bestShift         #same operation as before
      if x < 65:
         x = x + 26
   z = chr(x)
   clear.insert(pos,z)             #add the decoded letter to the clear text
   pos = pos + 1
print("".join(clear))              #join the list of clear text into one string and print it 
```

请注意，此代码的许多部分可以（并且应该）被压缩，例如

```
x = x - 64
x = letterGoodness[x-1]
y = y + x 
```

它们被扩展为“展示我的工作”以进行教程练习。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-10T20:03:15.580

```
letterGoodness = {'A': 8.17, 'B': 1.49, 'C': 2.78, 'D': 4.25, 'E': 12.70,
                  'F': 2.23, 'G': 2.02, 'H': 6.09, 'I': 6.97, 'J': 0.05, 
                  'K': 0.77, 'L': 4.02, 'M': 2.41, 'N': 6.75, 'O': 7.51, 
                  'P': 1.93, 'Q': 0.09, 'R': 5.99, 'S': 6.33, 'T': 9.06, 
                  'U': 2.76, 'V': 0.98, 'W': 2.36, 'X': 0.15, 'Y': 1.97, 
                  'Z': 0.07} 

# em - input message
em = str(input()) 
em = em.upper()

# dm - guess message
dm = '' 
dmList = []
goodnessList = []
shift = 1

for g in range(25):
   goodness = 0
   dm = ''
   for i in em:
       newL = chr(ord(i) - shift)
       if i == ' ':
            dm += i

       elif ord(newL) < 65:
               A = ord(newL) + 90
               newL = chr(A - 64)
               dm += newL

       else:
            dm += newL

   for h in dm:
      if h != ' ':
         goodness += letterGoodness[h]
   goodnessList.append(goodness)

   shift += 1
   dmList.append(dm)  

highestG = max(goodnessList)
dmind = goodnessList.index(highestG)
print(dmList[dmind]) 
```

# google-analytics - 使用 Google Analytics 跟踪子域

> ID：10792053
> 
> 赞同：1
> 
> 时间：2012-05-29T01:15:58.800
> 
> 标签：google-analytics

我一直在使用主站点的代码跟踪主站点和子域，但是，当我转到站点内容>页面时，它链接到主域，而它应该链接到应该引用的已查看页面的子域到子域。

这是我的代码：

主站点：

```
 var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'xxxx']);
  _gaq.push(['_setDomainName', 'sitename.com']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })(); 
```

子域：

```
 var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'xxxx']);
  _gaq.push(['_setDomainName', 'sub.sitename.com']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })(); 
```

我已阅读有关子域的 Google Analytics 文档。因为`_setDomainName`我都尝试过`.sitename.com`和`sitename.com`，但它仍然显示相同的结果。因此，Google Analytics（分析）仪表板中的页面内容链接到主站点，但在引用子域页面时不会链接到子域。

这给索引页面带来了问题，因为我如何知道域和子域之间唯一视图的划分？我一定在这里做错了什么！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T18:43:29.400

您是否考虑过为您的子域设置单独的配置文件？例子：

**配置文件 1：**没有过滤器的汇总，获取所有内容，以便您可以查看来自任何地方的数据

**配置文件 2：**只有 www.sitename.com 的流量。创建一个过滤器以仅包含 www.sitename.com 流量。

**配置文件 3：**只有 sub.sitename.com 的流量。创建一个过滤器以仅包含 sub.sitename.com 流量。

# f# - F# 构造函数在更改 Func 参数顺序后无法构建

> ID：10792054
> 
> 赞同：2
> 
> 时间：2012-05-29T01:16:15.507
> 
> 标签：f#, constructor, overloading

在重构一些 F# 代码时，我遇到了一个我无法理解或解决的问题。我有一个类 Problem，有 2 个构造函数，一个默认用于 F# 使用，一个用于 C# 方便，它接受 Funcs 并将它们“转换”为 F# 函数：

```
open System

type Problem<'d, 's> (data: 'd, generate: 'd -> Random -> 's, mutate: 'd -> Random -> 's -> 's, evaluate: 's -> float) =

   member this.Data = data
   member this.Generate = generate this.Data
   member this.Mutate = mutate this.Data
   member this.Evaluate = evaluate   

   new (data: 'd, generator: Func<'d, Random, 's> , mutator: Func<'d, 's, Random, 's> , evaluator: Func<'s, float>) =
      let generate (data: 'd) rng = generator.Invoke(data, rng)
      let mutate  (data: 'd) (rng: Random) (solution: 's) = mutator.Invoke(data, solution, rng)
      let evaluate (solution: 's) = evaluator.Invoke(solution)
      Problem(data, generate, mutate, evaluate) 
```

据我所知，这可以按预期构建和工作。

由于有点强迫症，我注意到 C# 友好的构造函数中的 mutator Func 对参数有不同的顺序，所以我继续并以这种方式重写它（第一部分未更改）：

```
 new (data: 'd, generator: Func<'d, Random, 's> , mutator: Func<'d, Random, 's, 's> , evaluator: Func<'s, float>) =
      let generate = fun (data: 'd) rng -> generator.Invoke(data, rng)
      let mutate = fun (data: 'd) (rng: Random) (solution: 's) -> mutator.Invoke(data, rng, solution)
      let evaluate = fun (solution: 's) -> evaluator.Invoke(solution)
      Problem(data, generate, mutate, evaluate) 
```

虽然这 3 个函数似乎具有正确的签名，但最后一行失败并显示红色波浪线，告诉我“无法根据此程序点之前的类型信息确定方法 'Problem`2' 的唯一重载。可用的重载如下所示（或在错误列表窗口中）。可能需要类型注释。

谁能帮我看看我错过了什么？我试图在最后一行中对 4 个参数进行类型注释，但无济于事 - 我不知道如何解决这个问题。让我感到奇怪的是，以前的版本可以正常工作，只需在 Func 中反转 2 个参数即可。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T04:00:11.593

阅读规范（8.13.6）给出：

> 第一个类型导向的转换将匿名函数表达式和其他函数值参数转换为委托类型。鉴于：
> 
> 委托类型 D 的形式参数
> 
> · 已知类型的实际参数 farg`ty1 -> ... -> tyn -> rty`
> 
> · 委托类型 D 的 Invoke 方法的精确 n 个参数
> 
> 然后：
> 
> · 参数被解释为好像它是这样写的： `new D(fun arg1 ... argn -> farg arg1 ... argn)`

当这些条件适用时，`Func`代表被转换为柯里化形式，因此存在歧义。

# scala - () => Int 和 Unit => Int 有什么区别？Scala 中的“()”到底是什么类型？

> ID：10792059
> 
> 赞同：12
> 
> 时间：2012-05-29T01:16:58.340
> 
> 标签：scala

我想我仍然没有完全理解在函数定义过程中 type () 代表什么。所以我无法提出每种情况的具体例子： () => Int; 单位=> 诠释。

有人可以给我一个简单的函数文字示例，分别为 () => Int 和 Unit=>Int 类型吗？在那之后，我想我可以了解 () 到底是什么。

谢谢

**编辑：** destin 说它们是一样的。但以下测试似乎表明并非如此： () 不能用于期望 Unit.

```
scala> def inCase[A] ( b :Boolean, ifTrue : Unit => A, ifFalse : Unit => A ) : A  = 
 |     b match {
 |         case True => ifTrue()
 |         case _ => ifFalse()
 |     }

 inCase: [A](b: Boolean, ifTrue: Unit => A, ifFalse: Unit => A)A

scala> inCase( True,  () => 1,  () => -1 )
 <console>:11: error: type mismatch;
 found   : () => Int
  required: Unit => ?
          inCase( True,  () => 1,  () => -1 ) 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-29T02:07:07.940

`()`在函数中，类型根本不是类型，也不是值。`() =>`是简单的语法来指示一个接受零参数的函数。[请参阅Scala 规范](http://www.scala-lang.org/docu/files/ScalaReference.pdf)第 3.2.9 节中的 BNF 表示法。

当您看到`(Type1, Type2, Type3) => Type4`时，`()`包围了该函数采用的所有参数类型。`(Type1, Type2, Type3)`这里不是元组类型——括号只是语法。因此，当您看到 时`() => Type4`，您有一个带有零参数的参数列表。单参数函数很特殊，因为您可以省略括号。

没有参数的函数，没有指定`()`，只是`=> Type4`按名称参数（看起来像值，但是当您尝试评估它们的值时，它们被实现为隐式调用的函数。）它们在第 4.6.1 节中定义规格。

括号在其他情况下可能意味着一堆其他事情。

*   函数类型声明中的括号`=>`表示元组类型，并且不能为空。（第 3.2.5 节）
*   空括号`()`是返回类型为 的函数的返回值`Unit`。（第 12.2.3 节）这实际上在某些上下文中成为一个实际值，例如`println(println("foo"))`将打印

    ```
    foo                 <--- the argument to the inner println
    ()                  <--- the argument to the outer println 
    ```

*   当您进行函数调用时，括号也是函数参数的语法，您可能已经知道这一点。这些可以是空的。它们在规范的第 6.6 节中定义。

*   使用 定义方法时，括号也是函数参数的语法`def`。这些在规范的第 4.6 节中进行了描述。
*   括号也是创建元组值的语法（第 6.9 节）。如果它们不为空，您会得到一个`TupleN`where`N`是括号内的值的数量。如果它们为空，则此表达式的类型为`Unit`。（第 6.9、12.2.3 节）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T02:20:30.443

我更改了您的示例，使其具有两种表示法（并使用更流行的布尔值）：

```
def inCase[A] (b:Boolean, ifTrue: ()=> A, ifFalse: Unit => A): A = b match {
  case true => ifTrue ()
  case _    => ifFalse ()
}

inCase (true, () => 1,  (Unit) => -1) 
```

然后我必须在调用站点上使用相同的符号。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-29T06:28:16.433

`()`是 type 的唯一实例`Unit`。
因此`() => Int`，部分函数的签名意味着：获取*Unit*对象，做某事并给出一个 Int。
`Unit => Int`意思是：接受*任何*Unit 对象，做某事并给出一个 Int。

**编辑**

*“Scala 的 Unit 类型大致对应于 Java 中的 void；当函数没有返回有趣的结果时使用它。事实上，由于 Scala 是一种面向表达式的语言，每个函数都会返回一些结果。如果没有给出明确的返回表达式，则该值()，发音为“unit”，是假定的。这个值是 Unit 类型。返回单元的函数也称为过程。这是第一个快速排序实现中交换函数的更“面向表达式”的公式，它明确表示：*

```
def swap(i: Int, j: Int): Unit = {
  val t = xs(i); xs(i) = xs(j); xs(j) = t
  ()
} 
```

*这个函数的结果值只是它的最后一个表达式——不需要返回关键字。请注意，返回显式值的函数在其主体或定义表达式之前始终需要一个“=”。”*

资料来源：Scala 编程 - Martin Odersky（第 14 页）

# r - 将 read.table 的输出存储在数据结构中

> ID：10792060
> 
> 赞同：0
> 
> 时间：2012-05-29T01:17:32.467
> 
> 标签：r, list, data-structures, lapply

我尝试过使用向量、数组、列表和集合。当我稍后访问数据时，似乎数据被转换为某个一维结构。例如。

这：

```
for (i in 1:length(argv)){
    temp= read.csv(file=argv[i], header= TRUE)   
    print( temp )
    input_tables[i]= temp
    print(input_tables[i]) 
```

产生这个：

```
 V1 V2 V3 V4
1  1  5  9 13
2  2  6 10 14
3  3  7 11 15
4  4  8 12 16
[[1]]
[1] 1 2 3 4

  V1 V2 V3 V4
1  2 10 18 26
2  4 12 20 28
3  6 14 22 30
4  8 16 24 32
[[1]]
[1] 2 4 6 8

  V1 V2 V3 V4
1  4 20 36 52
2  8 24 40 56
3 12 28 44 60
4 16 32 48 64
[[1]]
[1]  4  8 12 16 
```

我查看了 R 的文档（一些谷歌搜索和帮助功能），但我无法确定 read.table 返回的对象类型。根据我以前的经验，我认为这是一个数据框或矩阵。

无论如何，我怎样才能将这些输出存储在某种结构中而不是转换它？或者至少不丢弃数据。它可能像现在一样在那里。谢谢你的时间。在我目前的情况下，我有一个解决方法，但似乎这应该很容易实现。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T01:31:12.060

read.csv 将返回一个`data.frame`（如`?read.csv`, 下所述`value`）

组合多个文件的两种方法，假设 argv 是文件名向量，并且输入将具有相同的列数和顺序。

```
.list <- lapply(argv, read.csv, header = T)
all_data <- do.call(rbind, .list) 
```

或者，使用`plyr`

```
library(plyr)
all_data <- ldply(argv, read.csv, header = T) 
```

# sql-server - 从 SQL 中的逗号分隔列表中删除 *multiple* 项

> ID：10792070
> 
> 赞同：2
> 
> 时间：2012-05-29T01:18:21.067
> 
> 标签：sql-server, tsql, triggers

我有一个遗留字段，其中包含一个逗号分隔的用户 ID 列表，我将在某个时候替换它，但现在我只需要维护它，我已经设置了一个触发器，所以当用户被添加到一个组时它坚持它进入列表没问题，但是当用户被删除时，我需要一个触发器将其从列表中删除。我使用了这段代码，当你一次只删除一个成员时它工作得很好，但是我需要让它一次用于多次删除，我通常加入到已删除的表并繁荣，我不在但在这个例如它不会工作。

你能告诉我从触发器上的多个逗号分隔的字符串中删除多个用户 ID 的最佳方法吗？

这是当前的触发器。

```
DECLARE @MemberID int

SELECT @MemberID = MemberID FROM Deleted 

UPDATE MemberGroups SET MembersList = SUBSTRING(
REVERSE (SUBSTRING (REVERSE (REPLACE(',' + mgs.MembersList + ',', ',' + CAST(@MemberID AS varchar) + ',', ',') ) , 2, 8000) ), 2, 8000)
 FROM MemberGroups mgs
 WHERE ',' + mgs.MembersList + ',' LIKE (',%' + CAST(@MemberID AS Varchar) + '%,') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T03:54:30.517

在这种情况下我会做什么：

1.  将要删除的 ID 列表存储在名为 @todelete 的临时表中。
2.  声明一个新列表。@newlist varchar(最大值)
3.  解析原始成员列表，将成员ID一一提取，放入@newlist。但是在插入时确保它不在@todelete 中。
4.  将原成员列表的内容替换为@newlist 的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T04:34:33.600

如果您想玩一下 Xml，可以将逗号分隔的值列表转换为 Xml，应用修改，然后重新创建列表。在我的示例中，我将字符串转换为格式良好的 Xml，使用`nodes`and`value`函数返回行集，加入`deleted`并保留剩余的成员 ID，使用`FOR XML PATH`. 这是代码：

```
--update the groups if the member list contains more then one item
;WITH results(GroupID, MemberID) AS (
SELECT t.GroupID, t.MemberID FROM (
    SELECT GroupID, t.c.value('text()[1]', 'INT') AS MemberID
    FROM (SELECT GroupID, CONVERT(XML, '<ms><m>' + REPLACE(MemberList, ',', '</m><m>') + '</m></ms>') AS ms FROM MemberGroups) x
    CROSS APPLY x.ms.nodes('//m') AS t(c)
    ) t
LEFT JOIN deleted d ON t.MemberID = d.MemberID
WHERE d.MemberID IS NULL 
) UPDATE mg SET
    MemberList = SUBSTRING((SELECT ',' + CONVERT(VARCHAR(10), MemberID) FROM results WHERE GroupID = r.GroupID FOR XML PATH('')), 2, 8000)
FROM MemberGroups mg
INNER JOIN results r ON mg.GroupID = r.GroupID

--update the groups if the member list contains one item only
UPDATE mg SET 
    MemberList = NULL
FROM MemberGroups mg
INNER JOIN deleted d ON mg.MemberList = CONVERT(VARCHAR(10), d.MemberID)

SELECT * FROM MemberGroups 
```

# android - Linux 和 Windows 之间的 Android SDK 平台

> ID：10792078
> 
> 赞同：20
> 
> 时间：2012-05-29T01:19:11.287
> 
> 标签：android

我正在双启动 Windows 7 和 Ubuntu 12.04 Linux。我可以将现有的 Android SDK 平台从我的 windows 分区复制到 linux 分区吗？还是平台不一样？我不想浪费时间重新下载所有的包。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-10-27T10:39:40.827

Android SDK 依赖于平台。没错。

但是如果你想腾出一些空间，你可以在两个操作系统之间共享几个文件夹。您可以使用类似`ln -s /media/Windows/sdk/XXX ./XXX`以下独立平台文件夹的方式链接 Linux 中的 Windows 文件夹：

*   附加功能
*   平台
*   样品
*   来源
*   系统映像

然后在 Linux 上启动 Android SDK`./tools/android`并检查包是否可用或是否有一些损坏。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-29T01:24:14.323

Android SDK 依赖于平台。检查这个：http: [//developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-03-24T18:56:50.677

虽然我已经设置了一个虚拟机来进行 android 开发，但[metch](https://stackoverflow.com/a/18332984/817029)是对的。它对我有用。

我使用带有以下代码的 bash 脚本来进行符号链接

```
#!/bin/bash
ln -s /home/user/software/sdk/extras /home/user/work/sdk/
ln -s /home/user/software/sdk/platforms /home/user/work/sdk/
ln -s /home/user/software/sdk/samples /home/user/work/sdk/
ln -s /home/user/software/sdk/sources /home/user/work/sdk/
ln -s /home/user/software/sdk/system-images /home/user/work/sdk/ 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-02-02T07:37:29.980

您可以在 Linux 和 Windows 文件系统之间共享的文件夹列表，因为它们与 Android SDK 的文件相同，如下所示。您可以在您使用的任何操作系统之间复制和粘贴这些文件夹：

**附加组件、文档、附加组件、ndk 捆绑包、平台、皮肤、资源、系统映像、工具**

显然，您需要为每个操作系统下载以下文件夹，即 SDK 工具，因为它们是依赖于平台的工具，它们依赖于不同的操作系统，如 Linux、Windows 和 Mac OS：

**构建工具，平台工具**

这两个文件夹不会占用太多下载带宽。因此，您可以根据您正在使用的操作系统轻松下载它。

到目前为止，我已经成功地进行了测试和尝试，并且在全力支持下一切正常。这肯定会节省大量磁盘空间以及下载带宽和时间！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-20T10:41:04.150

好吧，有一些区别和一些相似之处，文件夹platforms，platforms-tools，samples，sources可以共享，它们是最大的文件

您可以将这四个文件夹链接到 linux`s sdk 文件夹

```
ln -s /mnt/path/to/your/windows/sdk/* /home/youname/yourAndroidBundle/sdk/ 
```

# xml - Adobe Flex：从 XMLList 访问特定字段

> ID：10792081
> 
> 赞同：0
> 
> 时间：2012-05-29T01:19:37.177
> 
> 标签：xml, apache-flex, google-maps

我目前有从我的数据库返回并存储在 XMLList 中的数据。在数据库的结果处理程序中，有一个循环将标记放在谷歌地图上，并根据类型使用自定义图标。当我单击标记时，它会打开一个信息窗口并显示包含来自 XMLList 的数据的 HTML。我还希望单击标记将数据传递给我拥有的标签，但我似乎做不到。在这个函数之外，我声明了以下内容： `var dict=new flash.utils.Dictionary();`

这是我到目前为止的代码：

`protected function getBusiness_resultHandler(event:ResultEvent):void { var xml:XML = new XML(event.result as String); testList = xml.user;`

```
 for (var i:int=0; i<testList.length(); i++) 
            {

                if (testList[i].type=="Hotel") 
                {
                    var bm:Bitmap = new Hotel as Bitmap;
                }
                else 
                {
                    var bm:Bitmap = new Hostel as Bitmap;
                }

                var html:String = "<b>" + testList[i].name + "</b><br/>" + testList[i].street + "<br/>" + testList[i].city + "<br/>" + testList[i].country + ", " + testList[i].postcode;

                var testMarker:Marker = new Marker(new LatLng(testList[i].latitude,testList[i].longitude),
                    new MarkerOptions({icon:bm, iconOffset: new Point (-23, -44)}));
                testMarker.addEventListener(MapMouseEvent.CLICK, function(e:MapMouseEvent):void {
                    Marker(e.currentTarget).openInfoWindow(new InfoWindowOptions({contentHTML:dict[e.currentTarget]}));
                });
                dict[testMarker] = html;

                Map.addOverlay(testMarker);
            }

        } 
```

该代码有效，它只允许我根据纬度/经度显示所有标记，然后当我单击标记时，它会正确显示信息。在我添加的 click 函数中`testLabel.text = testList.name;`，它返回了所有 XML 标签，但我不知道如何访问特定的标签。我试过`testLabel.text = testList[i].name;`了，它给出了一个错误提示`Error #1010: A term is undefined and has no properties`。我也尝试过`testLabel.text = testList[e.currentTarget].name`，但我的标签上没有出现任何内容。

我只是不明白当我单击标记时它如何访问信息窗口的 XML 数据，而不是标签。我不完全理解字典，但如果它意味着它只能使用一次并且我必须在信息窗口和将函数返回到标签之间进行选择，那么我需要它去标签。我在这里真的很挣扎，所以我很感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T23:27:14.093

我通过在文件开头声明一个新字典`var nameDict=new flash.utils.Dictionary();`然后在我的标记单击处理程序中解决了我的问题，然后在`detailName.text = nameDict[e.currentTarget];`事件之外有以下行（但在打印标记的行旁边是以下行`nameDict[testMarker] = testList[i].name;`。

# javascript - 需要Javascript单击和悬停功能

> ID：10792085
> 
> 赞同：0
> 
> 时间：2012-05-29T01:20:07.547
> 
> 标签：javascript, html, click, hover

好的，所以我不想要这样的网站[http://colorpx.com/](http://colorpx.com/)，而是点击和悬停功能如何工作的想法。我似乎找不到他们拥有的脚本或查找它的名称。但我确信这很简单。

我希望能够单击和（而不是释放）并拖动到其他 Div 并更改乘法元素，而无需释放鼠标按钮。

如果这是非常简单的事情，对不起nooby问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T01:30:11.597

伪代码：

```
parentElement.onmousedown = function() {
   this.onmouseover = handleMouseOver;
}

document.onmouseup = function() {
   parentElement.onmouseover = null;
}

function handleMouseOver(oEvent) {
   var el = oEvent.srcElement || oEvent.target;
   // do something with he mouse overed element.
} 
```

# javascript - 使用 store.filter 的 Extjs 网格过滤器

> ID：10792090
> 
> 赞同：0
> 
> 时间：2012-05-29T01:21:11.450
> 
> 标签：javascript, extjs, filter, grid

我正在使用它从数据库中输出一个查询，该数据库按我的预期输出我的数据。

如果需要，我们现在希望通过传递“颜色”列来过滤该数据。

```
<script type="text/javascript">
Ext.onReady(function(){

        var events_ds = new Ext.data.JsonStore({
                autoLoad: true,
                autoDestroy: true,
                url: '<% $base %>json/events/WWN.json',
                storeId: 'events_ds',
                idProperty: 'id',
                fields: [ 'id', 'precedence', 'affectedWWN', 'eventType', 'color', 'CollectTime' ]
        });

        var event_grid = new Ext.grid.GridPanel({
                title: 'Events',
                ds: events_ds,
                height: 300,
                columns: [
                         { 
                          header: "ID", 
                          dataIndex: 'id',
                         },
                         {
                          header: "Priority",
                          dataIndex: 'precedence',
                          sortable: true
                         }, 
                         {
                          header: "affectedWWN",
                          dataIndex: 'affectedWWN',
                          width:150,
                          sortable: true
                         },
                         {
                          header: "eventType",
                          dataIndex: 'eventType',
                          width:300,
                          sortable: true
                         },
                         {
                          header: "color",
                          dataIndex: 'color',
                          sortable: true
                         },
                         {
                          header: "CollectTime",
                          dataIndex: 'CollectTime',
                          width:150,
                          sortable: true
                         }]
        });

        var main_panel = new Ext.Panel({
                autoScroll: true,
                renderTo: 'main_panel',
                items: [event_grid]
        });

});

</script> 
```

我是新来的，我看到的是使用类似的东西：

```
store.filter("color", "yellow"); 
```

但过滤不像我期望的那样工作。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T02:45:50.390

```
var event_grid = new Ext.grid.GridPanel({ 
                title: 'Events', 
                //ds: events_ds, ???
                store: events_ds, 
```

# java - Jbutton正在不同面板中移动组件

> ID：10792092
> 
> 赞同：2
> 
> 时间：2012-05-29T01:21:34.310
> 
> 标签：java, swing, css-position, actionlistener, look-and-feel

我已经搜索了这个问题，但没有找到任何接近的东西。我将尝试具体并发布代码，但是这是一个大型程序，因此我无法发布所有代码。一般的问题是这样的：一个面板上的 JButton 会导致另一个面板上的组件在第一次单击时移动。仅当按钮添加了动作侦听器时才会发生这种情况。（在没有动作监听器的情况下单击按钮（显然））。问题是我添加的动作监听器仅更改按钮背景、文本和大小（以适应新文本）。

这是目前的动作监听器。登录是 JButton：

```
private class LoginListener implements ActionListener{

  public void actionPerformed(ActionEvent e){

    loggedIn = !loggedIn;

    if(loggedIn){
      login.setText("Logout");
      login.setBackground(Constants.RED);
    }
    else{
      login.setText("Login");
      login.setBackground(Constants.UPPER_BOUNDARY);
    }

    login.setSize(login.getPreferredSize());
  }
} 
```

设置是这样的。动作监听器是登录按钮所在的 loginPanel 的子类。该 loginPanel 被添加到主 JFrame 框架的上 1/4 处。主 JFrame 的下 3/4 是 mainPanel，其中包含其他摆动组件。loginPanel 和 mainPanel 不共享组件或变量，也不真正知道彼此的存在（据我编码）。然而，当上面的这个动作监听器被添加到主面板中的登录按钮组件时，它们会从它们的位置转移到其他位置。唯一发生在第一次单击时，然后它们停留在它们所在的位置（而不是我想要它们的位置）。

其他因素： - 我使用绝对定位（对不起，如果你不喜欢它，但我更喜欢它） - 我使用的是 SynthLookAndFeel，但以前从未遇到过这种外观和感觉的问题。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T01:24:41.687

> 其他因素： - 我使用绝对定位（对不起，如果你不喜欢它，但我更喜欢它）

没有什么可遗憾的，解决方案很简单：不要使用绝对定位，而是学习并使用布局管理器来充分发挥其能力。使用它们的原因之一是避免像这样的有害错误。很有可能您的代码实际上正在使用组件的默认布局管理器，即使在您不知道的情况下也是如此。[你可以在这里](http://docs.oracle.com/javase/tutorial/uiswing/layout/index.html)找到更多关于它们的信息。使用它们的关键之一是使用嵌套的 JPanel 来嵌套它们，每个 JPanel 都使用自己的布局管理器。然后他们可以自动为您完成繁重的布局提升。

# javascript - Nodejs 应用结构

> ID：10792096
> 
> 赞同：5
> 
> 时间：2012-05-29T01:22:06.460
> 
> 标签：javascript, node.js, express, restify

我想知道我是否正在相应地构建我的 nodejs 应用程序以实现最佳性能。我主要关心的是我如何传递围绕模块移动我的应用程序引用。

基本上在我的 app.js 文件中，我声明了我所有的要求、库等：

```
var app = {
    config     : require('../../config.json'),
    restify    : require('restify'),
    path       : require('path'),
    mongo      : require('mongodb'),
    model      : require('./models.js'),
    step       : require('step'),
    q          : require('q'),
    api        : require('./api_util.js'),
    underscore : require('underscore')
}; 
```

在我的导出中，我传递了整个 app 对象。现在，鉴于我对 JavaScript 的了解（如果我错了，您可以纠正我），这不会创建对象的新实例，它只会将对象作为指针传入并引用内存中的同一个对象。

现在我发现自己在做的事情（为了方便）是在我的 restify 库中（同样可以使用 Express 完成），我将 app 值附加到服务器请求对象，如下所示：

```
app.server.pre(function (request, response, next) {
    request.app = app;
    return next();
}); 
```

因此，在每个请求中，如果我需要快速访问我的任何库声明、配置等。我可以轻松访问 request.app。我也不认为这是一个问题，对象的相同逻辑将指针返回到相同的内存空间，所以我不会将内存使用量加倍或任何东西。

有没有更好/更简单的方法来构建它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T01:43:19.440

您对传递引用而不是复制对象是正确的。从这个角度来看，在传递对`app`.

但是，我建议您不要这样做：如果您`app`到处传递对 around 的引用，它告诉我的是您并不真正知道在这个或那个模块中需要什么。

您应该仔细规划您的依赖项并了解每个模块需要什么，以便您可以为应用程序中的每个模块传递正确的依赖项。

`underscore`关于or之类的事情`mongodb`，你不应该做你正在做的事情。您应该只传递需要初始化的模块。`underscore`对于or之类的东西`mongodb`，node.js 会在您第一次使用时缓存定义`require()`，因此您可以真正`require`在每个需要它的模块的顶部调用。

这不会导致任何性能损失，并且会更清楚每个模块需要什么库。

# actionscript-3 - AS3 中的计时器计时不够快

> ID：10792098
> 
> 赞同：0
> 
> 时间：2012-05-29T01:22:39.097
> 
> 标签：actionscript-3, actionscript, timer

我正在用 AS3 制作一款游戏，需要在极短的时间内依次发射大量子弹。例如，在某个时刻，我需要每隔 1-5 毫秒发射一颗子弹，持续大约 1 秒。游戏以 60 FPS 的速度（流畅地）运行，屏幕上有大约 800 多个对象，但计时器似乎无法比我的帧速率更快（大约每 16 毫秒一次）。我只有一个 enterFrame，其他所有内容都从它更新。

有小费吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T01:38:02.797

屏幕上怎么可能有 800 多个对象？每个对象是单个像素还是整个屏幕都刚刚填满？我的意思是公平地说，我面前有一个 1920x1080 的屏幕，所以每个对象可能是 2 像素宽和 2 像素高，它不会完全填满 1600x1600 的整个屏幕宽度。我只是好奇你为什么会有这样的场景，因为我一直在玩游戏开发。

至于技术问题，定时器不能保证在持续时间到期后的那一刻被触发（就在一段时间之后），这取决于它能够多快处理定时器滴答的代码。我的猜测是有这么多对象会耗尽 CPU（在 *NIX 系统上使用控制台中的 top 来查看或在 Windows 中使用任务管理器是否会达到 CPU 核心的峰值？）。这可能会确认或拒绝它，或者如果您关闭对象的创建/更新并查看计时器本身是否以正确的速率滴答作响。如果其中任何一个为真，则表明 CPU 正在达到峰值。

考虑使用 Stage3D 将对象绘图卸载到 GPU 以释放 CPU 来运行您的计时器。您可能还想考虑使用像 flixel 这样的“游戏框架”来帮助管理您的资源，尽管我不知道它利用了 GPU ......实际上只是在谷歌上搜索并发现了一篇有趣的帖子讨论它：

[http://forums.flixel.org/index.php?topic=6101.0](http://forums.flixel.org/index.php?topic=6101.0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T09:47:30.740

16 毫秒听起来是对的……[根据文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/Timer.html#Timer%28%29)，它的分辨率不小于 16.6 秒。

delay:Number — 计时器事件之间的延迟，以毫秒为单位。不推荐低于 20 毫秒的延迟。定时器频率限制为每秒 60 帧，这意味着低于 16.6 毫秒的延迟会导致运行时问题。

我建议您在每个刻度上以不同的偏移量在屏幕外创建 x 个对象（子弹），以便在 1 秒内获得所需数量的对象。这假设您的上下文允许屏幕外的敌人射击。

# mysql - MySQL使用concat比较字段和两个字段

> ID：10792105
> 
> 赞同：2
> 
> 时间：2012-05-29T01:23:46.117
> 
> 标签：mysql, concatenation

我有以下 MySQL 查询：

```
SELECT concat_ws('/', exp_month, exp_year) as exp_date 
FROM `cc_info`
WHERE concat_ws('/', exp_month, exp_year) <= '05/12' 
```

该查询正在拉回未来和过去的结果。知道我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T01:35:08.880

您正在按字典顺序比较字符串，并且月份在年份之前。如果您将年份放在月份之前，那么它们将按正确的顺序排列：

```
SELECT concat_ws('/', exp_year, exp_month) as exp_date 
FROM `cc_info`
WHERE concat_ws('/', exp_year, exp_month) <= '12/05' 
```

# java - Java 正则表达式跳过匹配项

> ID：10792106
> 
> 赞同：2
> 
> 时间：2012-05-29T01:24:13.833
> 
> 标签：java, regex

我正在尝试使用 Java 正则表达式来做一些我可以发誓我已经做过很多次的事情，但似乎我有问题。

基本上，我使用“。*”来跳过我不需要的所有内容，直到找到我需要的东西。

对我来说，用代码解释比用书面解释更容易：

```
String str = "class=\"c\" div=34234542234234</span>correct<?> blah=12354234234 </span>wrong<";      
Pattern regex = Pattern.compile("class=\"c\".*</span>([^<]*)");     
Matcher matcher = regex.matcher(str);       
boolean found = false;
while (matcher.find()) {
    found = true;
    System.out.println ("Found match: " + matcher.group(1));            
}       
if (!found)
    System.out.println("No matches found"); 
```

现在我希望我的正则表达式找到“正确”，但它会跳到最后一场比赛并找到“错误”。

谁能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T01:28:51.923

之后你错过了[*不情愿的限定词*](http://docs.oracle.com/javase/tutorial/essential/regex/quant.html)`*`- 它应该是`.*?`。

# iphone - NSInternalInconsistencyException - 无法在包中加载 NIB

> ID：10792114
> 
> 赞同：0
> 
> 时间：2012-05-29T01:25:31.297
> 
> 标签：iphone, objective-c, ios, ipad, uiviewcontroller

我收到以下异常：

```
 Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Could not load NIB in bundle: 'NSBundle </var/mobile/Applications/57C8544B-05F6-445D-80A9-FAC9672F278B/MyApp.app> (loaded)' with name 'MyNibName'' 
```

我尝试了stackoverflow的类似问题中建议的解决方案数量，但仍然遇到这个问题。

此问题与加载地址簿的特定 xib 文件有关。

这只发生在 iPhone 上而不是 iPad 和模拟器上。

我还尝试删除现有的 xib 文件并创建一个新文件，但没有成功。

```
With few attempts of testing, I found that the file works fine for certain number of attempts and then starts giving above error only on iPhone. 
```

请帮忙。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T02:47:16.013

经过长时间的调试和测试，我终于找到了问题所在。问题不在于 NIB 文件，而在于我已声明并正在填充但未使用它们的两个 nsmutablearrays。我删除了它们，然后它起作用了。这对我来说有点奇怪。

# bash - 在后台 BASH 上运行 Matlab

> ID：10792115
> 
> 赞同：4
> 
> 时间：2012-05-29T01:25:42.193
> 
> 标签：bash, matlab, background

我正在尝试通过以下方式在后台在 BASH 中运行 matlab 脚本：

```
echo "matlab -nojvm -r p=setpath(/mydirectory/);addpath(p);myscript;exit" |sh & 
```

我得到的错误是：

```
sh: line 1: syntax error near unexpected token '('
sh: line 1: 'matlab -nojvm -r p=setpath(/mydirectory/);addpath(p);myscript;exit' 
```

我在一个循环中运行它，所以这个操作需要做几次

1.  错误是否与管道有关？每当我在 bg 上运行 matlab 时，它就会被挂起，对于简单的命令或上传 gui，管道运行良好。

2.  是否可以从 BASH 设置 matlab 的路径？

3.  我尝试在没有 GUI 或任何“弹出”的情况下运行 Matlab，当我使用 -nodesktop -nojvm 运行时，它不会打开 3 GUI，但仍会进入 matlab 并在命令行中等待，是否有另一个我可以使用的合成器什么都不出现在屏幕上？

可以使用你的帮助，tnx

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T01:30:02.360

试试这个：

```
echo 'matlab -nojvm -r "p=setpath(/mydirectory/);addpath(p);myscript;exit"' |sh & 
```

外部单引号保护内部双引号，因此`sh`看不到括号。

有什么理由你不能只是：

```
matlab -nojvm -r "p=setpath(/mydirectory/);addpath(p);myscript;exit" & 
```

也许：

```
matlab -nojvm -r "p=setpath(/mydirectory/);addpath(p);myscript;exit" </dev/null & 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T06:30:02.643

感谢俄亥俄州立大学的下一个网站找到了解决方案

```
matlab -nodesktop -nodisplay < file.m &> file.out & 
```

它可以在没有任何绕过路线的情况下工作

如需进一步解释，请访问

[http://www.stat.osu.edu/computer-support/programming/background-jobs](http://www.stat.osu.edu/computer-support/programming/background-jobs)

# magento - 收到付款后让 Magento 发送电子邮件

> ID：10792117
> 
> 赞同：1
> 
> 时间：2012-05-29T01:26:06.637
> 
> 标签：magento

我不相信 Magento 有一种开箱即用的方法来发送电子邮件以在收到付款时通知所有者，那么有什么方法可以编程吗？

到目前为止，我已经阅读[了这篇](https://stackoverflow.com/questions/4828781/magento-send-emails-for-different-order-status)文章，但看起来它可能更专注于将电子邮件发送给客户而不是供应商；而[这](https://stackoverflow.com/questions/1365930/how-to-trigger-an-event-on-payment-received-in-magento)除了完全迷失（因为它的声音是OP）之外，有人说接受的答案有点过时了，而且我不确定它是否是我需要的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T08:33:32.503

基本上，您需要（惊喜）一个观察者模块来做到这一点。[此外，它与您提供的其中一个链接](https://stackoverflow.com/questions/1365930/how-to-trigger-an-event-on-payment-received-in-magento)的工作完全相同。

要制作准系统观察者模块，您只需要三个文件：

/app/etc/modules/Electricjesus_Notifyowner.xml

```
<?xml version="1.0"?>
<config>
    <modules>
        <Electricjesus_Notifyowner>
            <active>true</active>
            <codePool>local</codePool>
        </Electricjesus_Notifyowner >
    </modules>
</config> 
```

/app/code/local/Electricjesus/Notifyowner/etc/config.xml

```
<?xml version="1.0"?>
<config>
    <modules>
        <Electricjesus_Notifyowner>
                <version>0.1.0</version>
        </Electricjesus_Notifyowner>
    </modules>
    <global>
        <models>
            <notifyowner>
                <class>Electricjesus_Notifyowner_Model</class>
            </notifyowner>
        </models>          
        <events>
                <sales_order_payment_pay>
                    <observers>
                        <notifyOwnerEvent>
                                <class>notifyowner/observer</class>
                                <method>notifyOwnerEvent</method>
                        </notifyOwnerEvent>
                    </observers>
                </sales_order_payment_pay >     
        </events>
     </global>
</config> 
```

/app/code/local/Electricjesus/Notifyowner/Model/Observer.php

```
<?php
class Electricjesus_Notifyowner_Model_Observer
{
    public function notifyOwnerEvent($observer)
    {

        // parameters you can get from the $observer parameter:
        // array(’payment’ ? $this, ‘invoice’ ? $invoice)

        $payment = $observer->getPayment();
        $invoice = $observer->getInvoice();

        // derivative data
        $order = $invoice->getOrder(); // Mage_Sales_Model_Order

        $ownerEmail = 'owner@shop.com';
        /*
             - build data
             - build email structure
             - send email via any php mailer method you want
        */
        return $this;  // always return $this.
    }

} 
```

您还可以使用其他事件来代替`sales_order_payment_pay`（请参阅 config.xml）。有关事件及其参数的半完整列表，请参阅[此列表。](http://www.magentocommerce.com/wiki/5_-_modules_and_development/reference/magento_events)在[本文档](http://www.magentocommerce.com/wiki/5_-_modules_and_development/0_-_module_development_in_magento/customizing_magento_using_event-observer_method#list_of_events)中，有一些技术可以使用它们的参数检查/获取当前事件列表的更新。

我建议使用 Zend_Mail 在观察者内部处理邮件。没什么特别的，我只是偏向 Zend 的东西。

[http://framework.zend.com/manual/en/zend.mail.html](http://framework.zend.com/manual/en/zend.mail.html)

- - 编辑

如果您想要一个现成的扩展来执行此操作（以及更多），并且您不介意为此付费，您可以查看：

[http://www.magentocommerce.com/magento-connect/admin-email-notifications.html](http://www.magentocommerce.com/magento-connect/admin-email-notifications.html)

# c# - 关闭窗体不会释放内存

> ID：10792118
> 
> 赞同：2
> 
> 时间：2012-05-29T01:26:11.347
> 
> 标签：c#, winforms

我有一个包含两种形式的中型应用程序。当我打开应用程序时，它会转到第一个表单，它消耗大约 17mb。然后我打开第二个表单并关闭第一个表单，大约消耗了 57mb。我关闭了第二个并重新打开了第一个，33mb。关闭第一个并重新打开第二个，66mb。为什么这段记忆没有被回收？这是我用来关闭当前表单并打开新表单的代码。

```
private void honButton_Click(object sender, EventArgs e)
{
    System.Threading.Thread t = new System.Threading.Thread(new System.Threading.ThreadStart(ThreadProc));

    this.Close();
    this.Dispose();

    t.Start();
}

 public static void ThreadProc()
 {
    Application.Run(new Form1());
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T01:31:48.063

如果内存没有被回收，可能是因为垃圾收集器还没有选择收集它。

GC 在 .NET 中不是确定性的。

事实上，我编写的应用程序会积极分配内存（处理非常大的数据结构），直到进程的可用虚拟地址空间几乎耗尽时才开始释放内存）。

GC 的运行时间取决于您使用的垃圾收集器（服务器还是工作站）、.NET 实现以及应用程序的内存使用情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T07:50:19.650

您是否使用任何分析工具来检查内存使用情况或 Windows 任务管理器。任务管理器不是检查应用程序内存使用情况的好地方。将`perfmon`'s Process 指标用于诸如 Private Bytes 之类的事情。

# php - PDOException错误PHP SQL“名字不能为空”

> ID：10792119
> 
> 赞同：1
> 
> 时间：2012-05-29T01:26:14.967
> 
> 标签：php, mysql, pdo

我目前对下面的代码有问题..

它一直在说

```
Fatal error: Uncaught exception 'PDOException' with message 'SQLSTATE[23000]: 
Integrity constraint violation: 1048 Column 'Firstname' cannot be null' 
in C:\xampp\htdocs\clubresults\checkregister.php:30 Stack trace: #0 
C:\xampp\htdocs\clubresults\checkregister.php(30): PDOStatement->execute() 
#1 {main} thrown in C:\xampp\htdocs\clubresults\checkregister.php on line 30 
```

我已经尝试了我所知道的一切，但我就是无法消除该错误......任何形式的帮助都非常感谢：D 这个 php 文件称为 checkregister.php

```
 $pdo = new PDO('mysql:host=localhost;dbname=clubresults', 'root', '12345678');
  #Set Error Mode to ERRMODE_EXCEPTION.
  $pdo->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);  

  $stmt = $pdo->prepare('INSERT INTO members 
           (firstname, surname, DD, MM, YYYY, 
           email, Player1, Player2, Player3, Player4, Player5)
          VALUES 
           (:firstname, :surname, :DD, :MM, :YYYY, 
           :email, :Player1, :Player2, :Player3, :Player4, :Player5)');

  $stmt->bindParam(':firstname', $_GET['firstname']);
  $stmt->bindParam(':surname', $_GET['surname']);
  $stmt->bindParam(':DD', $_GET['DD']);
  $stmt->bindParam(':MM', $_GET['MM']);
  $stmt->bindParam(':YYYY', $_GET['YYYY']);
  $stmt->bindParam(':email', $_GET['email']);
  $stmt->bindParam(':Player1', $_GET['Player1']);
  $stmt->bindParam(':Player2', $_GET['Player2']);
  $stmt->bindParam(':Player3', $_GET['Player3']);
  $stmt->bindParam(':Player4', $_GET['Player4']);
  $stmt->bindParam(':Player5', $_GET['Player5']);
  $stmt->execute(); 
```

这是我在另一个 php 文件中的表单：

```
<form name="register" method="post" action="checkregister.php">

<!--Text, using <p> tag for new line-->
Main Account Registration <p>
* All Fields Mandatory <P>

<div class="required_field">
<label for="leadername">Team Leader's First Name</label>
<input name="firstname" type="text" value="hihi"><p>
<span id="firstnameerror" class="error"></span>
</div>

the same code repeats for each of the other ones such as Surname, DD MM YY, etc

<input type="submit" name="submitbutton" id="submitbutton" value="Register">
<input type="reset" name="resetbutton" id="resetbutton" value="Clear all Fields">
</form> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T01:54:58.287

向后工作：

*   MySQL 抱怨 null 值；那么为什么会收到 null 呢？
*   如果传入 null 值，PDO 会将 null 传递给 MySQL `bindParam()`；为什么我们要传递一个空值？
*   当 PHP 中的变量未定义并且您尝试使用它时，它将 a) 发出警告 b) 将其隐式设置为 null；为什么我们使用未定义的变量？
*   `$_GET['firstname']`未定义（除其他外）；为什么没有定义？
*   您`method="post"`在表单中使用，因此表单条目通过`$_POST`而不是`$_GET`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-11T19:59:18.273

它是由于数据不匹配而发生的，我在运行 cronjob 以更新 magento 中的产品时遇到了同样的问题，其中一些产品已被删除，并且脚本正在从数据库中的表运行，其中已删除产品的条目待处理，同时使用产品更新产品id 它给出错误**PDOException' 并带有消息'SQLSTATE [23000]：**

我设置条件来检查产品是否存在，它对我来说很好用。

# php - mysql查询没有收到正确的响应......或者什么

> ID：10792128
> 
> 赞同：0
> 
> 时间：2012-05-29T01:27:52.757
> 
> 标签：php, mysql

好的，所以我想要做的应该通过下面的代码来清楚，对于每一行我想用它们运行代码，如果标题为 0，则运行第一个 if 语句，如果它是 1，则运行第二个。

问题是，我将它设置为什么并不重要，它总是运行第二个 if 语句认为标题始终为 1，即使它不是。

为了测试，我将 echo (int)$row['header'] 添加到第二个 if 语句中，并且对于每一行，它都回显 1。

任何人都知道如何让它做我想做的事？

谢谢您的帮助

我的PHP代码：

```
$result = mysql_query("SELECT * FROM LeftMenu_items");
while ($row = mysql_fetch_assoc($result))
{
    if ((int)$row['header'] = 0)
    {
        // echos value is on or not
        echo "<tr><td class='LeftMenu'><a href='" . $row['url'] . "'><b>" . $row['text'] . "</b></a></td></tr>\n";
    }
    else if ((int)$row['header'] = 1)
    {
        // header
        echo "<tr><td class='LeftMenu'>" . (int)$row['header'] . "<b>" . $row['text'] . "</b></td></tr>\n"; 
    }
    else echo "error displaying url"; 
```

我的表如下所示：

```
structure:
id  int 
text    text    
url text    
Header  tinyint 

data:
1   Home    http://drudexflash.com/ 1
2   test1   http://text.com/    0
3   ttt blahz   1
4   nullnull    ass 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T01:30:36.930

问题是您正在分配一个变量而不是比较。

```
if((int)$row['header'] = 0) 
```

应该

```
if ((int)$row['header'] == 0) 
```

这不是一个不常见的错误，所以我有时会切换值和变量的顺序，只是为了清楚地表明我是在比较与分配。

例子：

```
if (0 = (int)$row['header']) // even if you don't catch this as incorrect
                             // php will throw a 'parse error'
if (0 == (int)$row['header']) // correct, no error 
```

一些有用的文档：[http](http://www.php.net/manual/en/language.expressions.php) ://www.php.net/manual/en/language.expressions.php http://www.php.net/manual/en/language.operators.comparison.php

# c++ - Gradientfill 用于自定义形状控制 C++

> ID：10792130
> 
> 赞同：0
> 
> 时间：2012-05-29T01:28:47.993
> 
> 标签：c++, winapi, gdi

我想为圆角矩形的一个边缘绘制渐变填充。我尝试使用

```
GradientFill 
```

API 结合

```
BeginPath()
EndPath()
SelectClipPath() 
```

API，但它不起作用。

由于 RoundRect 是 windows API，我们是否有一些 windows API 来对圆角矩形执行渐变填充。

更具体地说，我们可以将渐变填充限制在任何边缘吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T09:32:25.690

您可以使用 GDI 执行此操作。函数顺序为：

```
BeginPath
RoundRect
EndPath
WidenPath
SelectClipPath
GradientFill 
```

这将使用渐变绘制圆角矩形的整个边框。关键是`WidenPath`。这将在设备上下文中创建一个新路径，该路径等效于使用当前笔描边旧路径时将填充的区域。

如果您只想在单个边缘上进行渐变，请在单个边缘上执行 GradientFill。您可以轻松计算边缘的位置。

**更新**

如果你还想用渐变填充来填充内部，首先使用相同的函数序列，不带`WidenPath`，然后绘制轮廓。将两者与类似的东西结合起来`BeginPath, RoundRect, EndPath, SaveDC, SelectClipPath, GradientFill, RestoreDC, WidenPath, SelectClipPath, GradientFill`。

# iphone - 适用于开发、生产和舞台环境的 iOS 推送通知最佳实践

> ID：10792134
> 
> 赞同：1
> 
> 时间：2012-05-29T01:28:54.057
> 
> 标签：iphone, ios, app-store, ios-provisioning

我对为不同的环境 + 应用商店准备应用有点困惑。我有 3 个环境——dev、prod 和 stage，看起来对于给定的 appId，我们得到了 dev 和 distribution（prod）。

我应该为暂存环境使用临时分发配置文件，为产品使用应用商店版本吗？我假设使用 3 个不同的配置文件，我可以在一部手机上运行 3 个不同版本的应用程序？

或者，我是否应该只使用 3 个不同的 appId，以便调试应用程序的所有版本，并为应用程序的 prod 版本保留分发配置文件？

编辑：重新推送通知-应用程序的所有 3 个版本都可以在同一部手机上接收通知吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T01:43:23.550

我创建了三个不同版本的应用程序：dev.[App]、qa.[App] 和 [App]。每个人都需要自己的个人资料，但他们都使用相同的 App ID。我还需要三个 SSL 证书。

* * *

我的应用程序的每个版本的令牌都不同，因此 APS 将它们视为三个独立的实体。

# android - Android getSharedPreferences onPause 帮助存储图片

> ID：10792135
> 
> 赞同：1
> 
> 时间：2012-05-29T01:29:04.170
> 
> 标签：android, sharedpreferences

尝试将图像存储在此 Flickr 画廊中，因此当用户离开活动并返回图像时不需要再次加载...我一直在阅读有关在 onPause 方法中使用的 getSharedPreferences 以防止图像被破坏...唯一的问题是我找不到任何处理图像只有文本字段等的例子......感谢您的帮助

```
package com.windmillagency;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.Reader;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URL;

import org.apache.http.HttpEntity;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.ProgressDialog;
import android.content.Context;
import android.content.SharedPreferences;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.view.ViewGroup.LayoutParams;
import android.widget.BaseAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Gallery;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.Toast;

public class AndroidFlickrActivity extends BT_activity_base {

    public String thisActivityName = "Flickr";

    ProgressDialog progressDialog;
    BackgroundThread backgroundThread;

    public class FlickrImage {
        String Id;
        String Owner;
        String Secret;
        String Server;
        String Farm;
        String Title;

        Bitmap FlickrBitmap;

        FlickrImage(String _Id, String _Owner, String _Secret, 
                String _Server, String _Farm, String _Title){
            Id = _Id;
            Owner = _Owner;
            Secret = _Secret;
            Server = _Server;
            Farm = _Farm;
            Title = _Title;

            FlickrBitmap = preloadBitmap();
        }

        private Bitmap preloadBitmap(){
            Bitmap bm= null;

            String FlickrPhotoPath = 
                    "http://farm" + Farm + ".static.flickr.com/" 
                    + Server + "/" + Id + "_" + Secret + "_m.jpg";

            URL FlickrPhotoUrl = null;

            try {
                FlickrPhotoUrl = new URL(FlickrPhotoPath);

                HttpURLConnection httpConnection 
                    = (HttpURLConnection) FlickrPhotoUrl.openConnection();
                httpConnection.setDoInput(true);
                httpConnection.connect();
                InputStream inputStream = httpConnection.getInputStream();
                bm = BitmapFactory.decodeStream(inputStream);

            } catch (MalformedURLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            return bm;
        }

        public Bitmap getBitmap(){
            return FlickrBitmap;
        }

    }

    class FlickrAdapter extends BaseAdapter{
        private Context context;
        private FlickrImage[] FlickrAdapterImage;;

        FlickrAdapter(Context c, FlickrImage[] fImage){
            context = c;
            FlickrAdapterImage = fImage;
        }

        public int getCount() {
            // TODO Auto-generated method stub
            return FlickrAdapterImage.length;
        }

        public Object getItem(int position) {
            // TODO Auto-generated method stub
            return FlickrAdapterImage[position];
        }

        public long getItemId(int position) {
            // TODO Auto-generated method stub
            return position;
        }

        public View getView(int position, View convertView, ViewGroup parent) {
            // TODO Auto-generated method stub
            ImageView image;  
            if (convertView == null) {
                image = new ImageView(context);  
                image.setLayoutParams(new Gallery.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));  
                image.setScaleType(ImageView.ScaleType.FIT_CENTER);  
                image.setPadding(8, 8, 8, 8);   
            } else {  
                image = (ImageView) convertView;    
            }  

            image.setImageBitmap(FlickrAdapterImage[position].getBitmap());

            return image; 
        }

    }

    FlickrImage[] myFlickrImage;

    /*
     * FlickrQuery = FlickrQuery_url 
     * + FlickrQuery_per_page 
     * + FlickrQuery_nojsoncallback 
     * + FlickrQuery_format
     * + FlickrQuery_tag + q
     * + FlickrQuery_key + FlickrApiKey
     */

    String FlickrQuery_url = "http://api.flickr.com/services/rest/?method=flickr.people.getPublicPhotos&api_key=fdd73dc07613841fbe325b5103d673b7&user_id=65005067@N08&per_page=25&format=json";
    String FlickrQuery_per_page = "&per_page=10";
    String FlickrQuery_nojsoncallback = "&nojsoncallback=1";
    String FlickrQuery_format = "&format=json";
    String FlickrQuery_tag = "&tags=";
    String FlickrQuery_key = "&api_key=";

    //  Apply your Flickr API:
    //  www.flickr.com/services/apps/create/apply/?
    String FlickrApiKey = "fdd73dc07613841fbe325b5103d673b7";

    final String DEFAULT_SEARCH = "flickr";

    EditText searchText;
    Button searchButton;

    Gallery photoBar;

    Bitmap bmFlickr;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        this.activityName = "AndroidFlickrActivity";
        BT_debugger.showIt(activityName + ":onCreate"); 

        //reference to base layout..
            LinearLayout baseView = (LinearLayout)findViewById(R.id.baseView);

            //setup background colors...
            BT_viewUtilities.updateBackgroundColorsForScreen(this, this.screenData);

            //setup background images..
            if(backgroundImageWorkerThread == null){
                backgroundImageWorkerThread = new BackgroundImageWorkerThread();
                backgroundImageWorkerThread.start();
            }           

            //setup navigation bar...
            LinearLayout navBar = BT_viewUtilities.getNavBarForScreen(this, this.screenData);
            if(navBar != null){
                baseView.addView(navBar);
            }

            //inflate this screens layout file...
            LayoutInflater vi = (LayoutInflater)thisActivity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            View thisScreensView = vi.inflate(R.layout.flickr, null);

            //add the view to the base view...
            baseView.addView(thisScreensView);  

       searchText = (EditText)findViewById(R.id.searchtext);
        searchText.setText(DEFAULT_SEARCH);
        searchButton = (Button)findViewById(R.id.searchbutton);

        photoBar = (Gallery)findViewById(R.id.photobar);

        searchButton.setOnClickListener(searchButtonOnClickListener);
    }

///////////////////////////////////////////////////
//activity life-cycle overrides

//onResume
@Override
public void onResume() {
super.onResume();
//Log.i("ZZ", thisActivityName + ":onResume");
tToast("onResume");
}       

private void tToast(String s) {
    Context context = getApplicationContext();
    int duration = Toast.LENGTH_SHORT;
    Toast toast = Toast.makeText(context, s, duration);
    toast.show();
}

//onPause
@Override
public void onPause() {
//Log.i("ZZ", thisActivityName + ":onPause");
super.onPause();

tToast("onPause");
}

//activity life-cycle overrides
///////////////////////////////////////////////////

    private Button.OnClickListener searchButtonOnClickListener
       = new Button.OnClickListener(){

        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            progressDialog = ProgressDialog.show(AndroidFlickrActivity.this, 
                   "Progress", "Please Wait");

            backgroundThread = new BackgroundThread();
            backgroundThread.setRunning(true);
            backgroundThread.start();

           }};

    private String QueryFlickr(String q){

        String qResult = null;

        String qString = 
                FlickrQuery_url 
                + FlickrQuery_per_page 
                + FlickrQuery_nojsoncallback 
                + FlickrQuery_format 
                + FlickrQuery_tag + q  
                + FlickrQuery_key + FlickrApiKey;

        HttpClient httpClient = new DefaultHttpClient();
        HttpGet httpGet = new HttpGet(qString);

        try {
            HttpEntity httpEntity = httpClient.execute(httpGet).getEntity();

            if (httpEntity != null){
                InputStream inputStream = httpEntity.getContent();
                Reader in = new InputStreamReader(inputStream);
                BufferedReader bufferedreader = new BufferedReader(in);
                StringBuilder stringBuilder = new StringBuilder();

                String stringReadLine = null;

                while ((stringReadLine = bufferedreader.readLine()) != null) {
                    stringBuilder.append(stringReadLine + "\n");
                    }

                qResult = stringBuilder.toString();
                inputStream.close();
            }

        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return qResult;
    }

    private FlickrImage[] ParseJSON(String json){

        FlickrImage[] flickrImage = null;

        bmFlickr = null;
        String flickrId;
        String flickrOwner;
        String flickrSecret;
        String flickrServer;
        String flickrFarm;
        String flickrTitle;

        try {
            JSONObject JsonObject = new JSONObject(json);
            JSONObject Json_photos = JsonObject.getJSONObject("photos");
            JSONArray JsonArray_photo = Json_photos.getJSONArray("photo");

            flickrImage = new FlickrImage[JsonArray_photo.length()];
            for (int i = 0; i < JsonArray_photo.length(); i++){
                JSONObject FlickrPhoto = JsonArray_photo.getJSONObject(i);
                flickrId = FlickrPhoto.getString("id");
                flickrOwner = FlickrPhoto.getString("owner");
                flickrSecret = FlickrPhoto.getString("secret");
                flickrServer = FlickrPhoto.getString("server");
                flickrFarm = FlickrPhoto.getString("farm");
                flickrTitle = FlickrPhoto.getString("title");
                flickrImage[i] = new FlickrImage(flickrId, flickrOwner, flickrSecret,
                        flickrServer, flickrFarm, flickrTitle);
            }

        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return flickrImage;
    }

    public class BackgroundThread extends Thread{
        volatile boolean running = false;
        int cnt;

        void setRunning(boolean b){
            running = b;    
            cnt = 10;
        }

        @Override
        public void run() {
            // TODO Auto-generated method stub
            String searchQ = searchText.getText().toString();
            String searchResult = QueryFlickr(searchQ);

            myFlickrImage = ParseJSON(searchResult);

            handler.sendMessage(handler.obtainMessage());

        }
    }

    Handler handler = new Handler(){

        @Override
        public void handleMessage(Message msg) {
            // TODO Auto-generated method stub

            progressDialog.dismiss();
            photoBar.setAdapter(new FlickrAdapter(AndroidFlickrActivity.this, myFlickrImage));
            Toast.makeText(AndroidFlickrActivity.this, 
                    "Images Loaded", Toast.LENGTH_LONG).show();
        }

    };

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T11:18:13.353

我认为您需要的是图像缓存。存储 SharedPreferences 带有内存限制。如果图片数量很大，可以试试 [这个库](http://code.google.com/p/android-query/wiki/ImageLoading)进行图片缓存：

希望这可以帮助 ！

# android - 在Android中动态加载类时发生ClassCastException

> ID：10792136
> 
> 赞同：8
> 
> 时间：2012-05-29T01:29:07.827
> 
> 标签：android, dynamic, classloader, classcastexception

我有一个线程，它根据系统的具体实现为它需要的资源加载不同的类。我的实现是在 Android 上，我有一个类可以返回我的实现所需的特定类。我似乎能够很好地加载该类，但是当我尝试将它分配给我的主线程中的对象时，它给了我一个 ClassCastException。以下是片段：

在我的主线程中，我这样做：

```
 try {
        grammarProcessor = config.loadObject(GrammarProcessor.class); 
```

这给了我这个堆栈跟踪：

```
 E/AndroidRuntime(6682): FATAL EXCEPTION: JVoiceXmlMain
    E/AndroidRuntime(6682): java.lang.ClassCastException: org.jvoicexml.android.JVoiceXmlGrammarProcessor
    E/AndroidRuntime(6682):     at org.jvoicexml.JVoiceXmlMain.run(JVoiceXmlMain.java:321) 
```

`GrammarProcessor`是一个接口，`JVoiceXmlGrammarProcessor`是我加载和实现该接口的类。加载代码如下：

```
else if(baseClass == GrammarProcessor.class){
        String packageName = "org.jvoicexml.android";
        String className = "org.jvoicexml.android.JVoiceXmlGrammarProcessor";           
        String apkName = null;
        Class<?> handler = null;
        T b = null;

        try {
            PackageManager manager = callManagerContext.getPackageManager();
            ApplicationInfo info= manager.getApplicationInfo(packageName, 0);
            apkName= info.sourceDir;
        } catch (NameNotFoundException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
            return null;
        }
        PathClassLoader myClassLoader =
            new dalvik.system.PathClassLoader(
                    apkName,
                    ClassLoader.getSystemClassLoader());
        try {
            handler = Class.forName(className, true, myClassLoader);
            return (T) handler.newInstance();
        } catch (ClassNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            return null;
        }           
        catch (InstantiationException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            return null;
        } catch (IllegalAccessException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            return null;
        }
} 
```

调试时，我检查从 load 方法返回的内容，它是一个带有 id 号的对象。如果我点击它，它会说`org.jvoicexml.android.JVoiceXmlGrammarProcessor@40565820`，下拉菜单会显示 a`JVoiceXmlGrammarProcessor`应该有的两个私有字段，所以看起来它已经加载好了。有任何想法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-07-27T23:38:36.007

我想我明白这里发生了什么，但我必须做出一个*不是*`org.jvoicexml.android`你的包的假设，即你是从不同的 apk 加载的（正如赏金所暗示的那样）。

 *考虑到这一点，这是不可能的，而且有充分的理由。

让我们从您自己的应用程序开始 - 您`GrammarProcessor`可以从自己的应用程序中获得类型，`classes.dex`并进入您的默认 ClassLoader（`PathClassLoader`当 zygote 为您的进程分叉时获得的类型）。我们称这种类型`GP1`。您自己的应用程序中实现的任何类`GrammarProcessor`实际上都`GP1`在其接口列表中。

然后，您实例化一个新的类加载器。如果您查看[source](https://android.googlesource.com/platform/libcore/+/jb-mr2.0-release/dalvik/src/main/java/dalvik/system/PathClassLoader.java)，您会发现它`PathClassLoader`只是一个薄包装器，[`BaseDexClassLoader`](https://android.googlesource.com/platform/libcore/+/jb-mr2.0-release/dalvik/src/main/java/dalvik/system/BaseDexClassLoader.java)它依次委托给 a [`DexPathList`](https://android.googlesource.com/platform/libcore/+/jb-mr2.0-release/dalvik/src/main/java/dalvik/system/DexPathList.java)，而后者又委托给[`DexFile`](https://android.googlesource.com/platform/libcore/+/jb-mr2.0-release/dalvik/src/main/java/dalvik/system/DexFile.java)对象，这些对象又在本机代码中进行加载。呸。

其中有一个微妙的部分是`BaseDexClassLoader`造成您麻烦的原因，但如果您以前没有见过它，您可能会错过它：

```
this.pathList = new DexPathList(this, dexPath, libraryPath, optimizedDirectory); 
```

再往下一点：

```
@Override
protected Class<?> findClass(String name) throws ClassNotFoundException {
    Class c = pathList.findClass(name);
    if (c == null) {
        ...
    }
    return c;
} 
```

**BaseDexClassLoader 不会先检查其父级！**

..简而言之就是你的问题。

更准确地说，它的`DexPathList`内部`DexFile`从另一个加载所有类，`dex`并且从不查看已经加载到 VM 中的类。

因此，您最终会得到两个不同的加载版本`GrammarProcessor`。然后，您正在实例化的对象是指新`GP2`类，而您正试图将其强制转换为`GP1`. 显然不可能。

有针对这个的解决方法吗？

有一个以前做过，但你不会喜欢它。Facebook在他们的应用程序中[使用它](https://www.facebook.com/notes/facebook-engineering/under-the-hood-dalvik-patch-for-facebook-for-android/10151345597798920)来加载一堆`dex`文件之间有很强的关系。（它就在那里，在所有乱七八糟的事情之前`LinearAlloc`）：

> 我们检查了Android源代码并使用Java反射直接修改了它的一些内部结构

我有 90% 的把握他们得到了`PathClassLoader`你得到的（`getSystemClassLoader()`），得到`DexPathList`并覆盖了私有字段，以便在另一个 dex 文件（在你的情况下是 apk）中`dexElements`有一个额外的。`Element`像地狱一样哈克，我建议不要这样做。

我突然想到，如果您不想以框架看到它们的方式使用新加载的类，您可以扩展`BaseDexClassLoader`并实现正确的查看父级，然后再尝试加载行为。我还没做过，所以我不能保证它会起作用。

我的建议？只需使用远程服务。这就是`Binder`目的。或者，重新考虑您的 apk 分离。*

# max - 使用 *within* 整数线性规划中的 min/max

> ID：10792139
> 
> 赞同：34
> 
> 时间：2012-05-29T01:29:17.913
> 
> 标签：max, mathematical-optimization, min, linear-programming

我正在尝试建立一个线性程序，其中目标函数将额外的权重添加到`max`决策变量乘以它们各自的系数。

考虑到这一点，有没有办法在线性规划的目标函数中**使用**`min`或`max`运算符？

 **例子：

```
Minimize
    (c1 * x1) + (c2 * x2) + (c3 * x3) + (c4 * max(c1*x1, c2*x2, c3*x3)) 
subject to
    #some arbitrary integer constraints:
    x1 >= ...
    x1 + 2*x2 <= ... 
    x3 >= ...
    x1 + x3 == ... 
```

请注意，这`(c4 * max(c1*x1, c2*x2, c3*x3))`是我关心的“额外重量”术语。我们让`c4`表示“额外权重”系数。另请注意，在此特定示例中`x1`，`x2`、 和`x3`是**整数。**

我认为以上内容可能超出了线性编程提供的范围。但是，也许有一种方法可以将其破解/重新格式化为有效的线性程序？

如果这个问题完全超出了线性规划的范围，也许有人可以推荐一个更适合这类问题的优化范式？（任何能让我避免手动枚举和检查所有可能的解决方案的方法都会有所帮助。）

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-05-29T04:23:40.367

添加一个带有约束的辅助变量，比如 x4：

```
x4 >= c1*x1
x4 >= c2*x2
x4 >= c3*x3  
Objective += c4*x4 
```**

# jquery - 为动画移除背景添加更多延迟

> ID：10792143
> 
> 赞同：0
> 
> 时间：2012-05-29T01:30:10.417
> 
> 标签：jquery, animation

这是一个简单的问题，我创建了一个简单的动画来为 Div 添加绿色背景颜色，然后删除，我想要的是使从绿色到没有颜色的过渡更平滑，可能会增加过渡的延迟，但是，甚至添加一个更大的延迟动画向我们展示了相同的。

这是我的代码

```
$(document).ready(function(){
    $('#ganador').empty().css('background-color', '#74DF00').append("prueba").animate({ backgroundColor: '#FFFFF' }, '60000000000');
});​ 
```

[我的现场示例](http://jsfiddle.net/g7VDq/1/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T01:39:03.297

[删除延迟http://jsfiddle.net/g7VDq/3/](http://jsfiddle.net/g7VDq/3/)周围的引号

# jquery - jQuery：如何通过单击一组其他 div 来控制一个 div 的内容

> ID：10792145
> 
> 赞同：0
> 
> 时间：2012-05-29T01:30:16.917
> 
> 标签：jquery

我大部分时间都在阅读stackoverflow，因为我正在构建一个图片库，我希望通过鼠标单击缩略图上方的一个较大的div来控制一组嵌套的缩略图div。我想使用 jQuery 而不是 iFrames，但我被卡住了。目前我有以下脚本

```
$(document).ready(function(){
$('#div_2').hide();

$("#mybutton1").click(function(){
$("#div_1").fadeOut(1000, function(){
$("#div_2").fadeIn(1000);
  });
});
$("#mybutton2").click(function(){
$("#div_2").fadeOut(1000, function(){
$("#div_1").fadeIn(1000);
    });
  });
}); 
```

我前进的挑战是我希望单击任何缩略图以将该图像的较大版本加载到预览区域中。如果我有 10 个缩略图，我不能让每个缩略图都淡出所有其他可能存在的缩略图，而是我想连接代码，以便那里的任何图像都会淡出，并且单击的缩略图的较大版本on 会淡入。

我曾考虑将缩略图链接到较大的预览图像，然后使用以下功能禁用标准链接行为：

```
$('.gallery_thumbnails a').click(function(e) {
e.preventDefault();
}); 
```

然后我想我可以合并以下内容，尽管我不确定如何完全实现它：

```
$('.gallery_preview').html('<a style="background-image:url('+photo_preview+');"></a>'); 
```

我发现其中一个向我提出类似问题的线程很有趣，但我无法完全理解它是如何工作的： [https ://stackoverflow.com/a/3420033/1422589](https://stackoverflow.com/a/3420033/1422589)

另外，如果不使用 .hide，如何动态加载页面上没有的 div？

很多问题，我知道 - 任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T01:37:03.740

```
$('.gallery_thumbnails a').click(function(e){
    e.preventDefault();
    var bigImageLink = $(this).attr("href");
    $("#div_1").fadeOut(1000, function(){
        $(this).find("img").attr("src", bigImageLink).fadeIn(1000); 
    });
}); 
```

确保`href`缩略图链接中有指向大图版本的直接链接，并且里面`#div_1`只有一个`img`标签。

# .net - 如何在没有 VB.net 中的 3rd 方库的情况下绘制到屏幕

> ID：10792147
> 
> 赞同：1
> 
> 时间：2012-05-29T01:30:37.717
> 
> 标签：.net, drawing, render

我计划在我计划制作的程序中对我的数学技能进行一些实验。我计划用它做一些渲染，但一半的乐趣将是我自己重新创建所有这些 3D 事物背后的数学。我知道 .net 图形库很慢，绝对不值得花时间和精力。我一直在使用 XNA，但我宁愿不使用那些只给我所有工具的东西。

在VB.net中逐个像素地绘制到我的表单（或在必要时直接绘制到屏幕上）的方法是什么？我想慢慢地——从头开始——创建自己的简单渲染系统。

谢谢，如果你能帮忙！我正在使用 VB.net，但所有 .net 答案都适用，所以我会全部接受 :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T01:42:52.800

您可以创建一个实例`System.Drawing.Bitmap`并使用`GetPixel(x, y)`and`SetPixel(x, y, color)`来分别获取/设置单个像素。

如果你想为你完成一些基本的事情（画线、火盆、多边形等），那么你可以`System.Drawing.Graphics`从这个位图创建一个。

获取/设置像素会非常慢，但我知道这是一种学习体验，而不是产品，这不是一个真正的问题。`Graphics`如果您不想处理线光栅化或类似的事情，使用会快很多，但似乎这些正是您想要解决的问题。如果您真的想要更快且仍然低级的图形，那么您可以`bitmap.LockBits(...)`直接在内存中使用位图并与之交互。

要将其放在您的表单上，只需将其传递给`PictureBox`.

# c# - 在 XNA 中钳制 TextureAddressMode

> ID：10792151
> 
> 赞同：3
> 
> 时间：2012-05-29T01:31:59.717
> 
> 标签：c#, xna, xna-4.0

我一直致力于在 XNA 中实现 2D 照明系统，并且我已经让系统工作了——只要我的窗户尺寸是 2 的幂。否则，程序将在这一行失败：

```
GraphicsDevice.DrawUserPrimitives(PrimitiveType.TriangleStrip, Vertices, 0, 2); 
```

异常指出“XNA Framework Reach profile 要求 TextureAddressMode 在使用不是 2 次幂的纹理大小时为 Clamp”，并且我为解决此问题所做的每一次尝试都失败了——这是我发现的最常见的解决方案在互联网上是将线`GraphicsDevice.SamplerStates[0] = SamplerState.LinearClamp;`直接放在上面的线上方，但这并没有解决我的问题。

如果我遗漏了解决此问题所需的任何信息，我深表歉意；我很乐意根据需要提供更多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:40:05.983

这不是你之前问的同一个问题吗？

在您的 HLSL 中查找声明像素着色器正在使用的采样器的行。

您可以将地址模式设置为夹在该行中。

```
SamplerState somethingLikeThis {
    Filter = MIN_MAG_MIP_LINEAR;
    AddressU = Clamp;
    AddressV = Clamp;
}; 
```

# c++ - C++ 2011：std::thread：并行化循环的简单示例？

> ID：10792157
> 
> 赞同：21
> 
> 时间：2012-05-29T01:32:24.433
> 
> 标签：c++, multithreading, c++11

C++ 2011 包含非常酷的新特性，但我找不到很多并行化 for 循环的示例。所以我非常幼稚的问题是：如何将简单的 for 循环（例如使用“omp parallel for”）与 std::thread 并行化？（我搜索一个例子）。

非常感谢你。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-29T09:17:35.343

`std::thread`不一定意味着并行循环。它旨在作为构建类似 parallel_for 算法的结构的低级抽象。如果你想并行化你的循环，你应该自己编写一个 parallel_for 算法，或者使用提供基于任务的并行性的现有库。

以下示例显示了如何使简单循环并行化，但另一方面也显示了缺点，例如缺少负载平衡和简单循环的复杂性。

```
 typedef std::vector<int> container;
  typedef container::iterator iter;

  container v(100, 1);

  auto worker = [] (iter begin, iter end) {
    for(auto it = begin; it != end; ++it) {
      *it *= 2;
    }
  };

  // serial
  worker(std::begin(v), std::end(v));

  std::cout << std::accumulate(std::begin(v), std::end(v), 0) << std::endl; // 200

  // parallel
  std::vector<std::thread> threads(8);
  const int grainsize = v.size() / 8;

  auto work_iter = std::begin(v);
  for(auto it = std::begin(threads); it != std::end(threads) - 1; ++it) {
    *it = std::thread(worker, work_iter, work_iter + grainsize);
    work_iter += grainsize;
  }
  threads.back() = std::thread(worker, work_iter, std::end(v));

  for(auto&& i : threads) {
    i.join();
  }

  std::cout << std::accumulate(std::begin(v), std::end(v), 0) << std::endl; // 400 
```

使用提供`parallel_for`模板的库，可以将其简化为

```
parallel_for(std::begin(v), std::end(v), worker); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-29T08:53:25.170

很明显，这取决于你的循环做什么，你如何选择并行化，以及你如何管理线程的生命周期。

我正在阅读[来自 std C++11 线程库的书](http://www.manning.com/williams/)（这也是[boost.thread](http://www.boost.org/doc/libs/1_49_0/doc/html/thread.html)维护者之一并编写了[Just Thread](http://www.stdthread.co.uk/)），我可以看到“它取决于”。

现在，为了让您了解使用新标准线程的基础知识，我建议您阅读这本书，因为它提供了大量示例。另外，看看[http://www.justsoftwaresolutions.co.uk/threading/](http://www.justsoftwaresolutions.co.uk/threading/)和[https://stackoverflow.com/questions/415994/boost-thread-tutorials](https://stackoverflow.com/questions/415994/boost-thread-tutorials)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-29T01:58:44.607

无法提供 C++11 特定的答案，因为我们仍然主要使用 pthreads。但是，作为与语言无关的答案，您可以通过将其设置为在单独的函数（线程函数）中运行来并行化某些东西。

换句话说，你有一个类似的功能：

```
def processArraySegment (threadData):
    arrayAddr = threadData->arrayAddr
    startIdx  = threadData->startIdx
    endIdx    = threadData->endIdx

    for i = startIdx to endIdx:
        doSomethingWith (arrayAddr[i])

    exitThread() 
```

并且，在您的主代码中，您可以分两块处理数组：

```
int xyzzy[100]

threadData->arrayAddr = xyzzy
threadData->startIdx  = 0
threadData->endIdx    = 49
threadData->done      = false
tid1 = startThread (processArraySegment, threadData)

// caveat coder: see below.
threadData->arrayAddr = xyzzy
threadData->startIdx  = 50
threadData->endIdx    = 99
threadData->done      = false
tid2 = startThread (processArraySegment, threadData)

waitForThreadExit (tid1)
waitForThreadExit (tid2) 
```

（请记住，您应该确保线程 1在主线程开始为线程 2 修改数据*之前*已将数据加载到其本地存储中，可能使用互斥锁或使用结构*数组*，每个线程一个）。

换句话说，仅仅修改一个`for`循环以使其并行运行很少是一件简单的事情，尽管这样会很好，例如：

```
for {threads=10} ({i} = 0; {i} < ARR_SZ; {i}++)
    array[{i}] = array[{i}] + 1; 
```

相反，它需要重新安排代码以利用线程。

而且，当然，您必须确保并行处理数据是有意义的。如果您将每个数组元素设置为前一个加 1，那么再多的并行处理也无济于事，因为您必须先等待前一个元素被修改。

上面的这个特定示例只是使用传递给线程函数的参数来指定它应该处理数组的哪一部分。线程函数本身包含执行工作的循环。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-08-06T07:49:26.180

使用[这个](https://github.com/hoxo-m/pforeach/blob/master/R/pforeach.R)类，你可以这样做：

```
Range based loop (read and write)
pforeach(auto &val, container) { 
  val = sin(val); 
};

Index based for-loop
auto new_container = container;
pfor(size_t i, 0, container.size()) { 
  new_container[i] = sin(container[i]); 
}; 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-07-15T10:51:13.963

使用 std::thread 和 lambda 表达式定义宏：

```
#ifndef PARALLEL_FOR
#define PARALLEL_FOR(INT_LOOP_BEGIN_INCLUSIVE, INT_LOOP_END_EXCLUSIVE,I,O)          \                                                               \
    {                                                                               \
        int LOOP_LIMIT=INT_LOOP_END_EXCLUSIVE-INT_LOOP_BEGIN_INCLUSIVE;             \
        std::thread threads[LOOP_LIMIT]; auto fParallelLoop=[&](int I){ O; };       \
        for(int i=0; i<LOOP_LIMIT; i++)                                             \
        {                                                                           \
            threads[i]=std::thread(fParallelLoop,i+INT_LOOP_BEGIN_INCLUSIVE);       \
        }                                                                           \
        for(int i=0; i<LOOP_LIMIT; i++)                                             \
        {                                                                           \
            threads[i].join();                                                      \
        }                                                                           \
    }                                                                               \
#endif 
```

用法：

```
int aaa=0; // std::atomic<int> aaa;
PARALLEL_FOR(0,90,i,
{
    aaa+=i;
}); 
```

它丑陋但有效（我的意思是多线程部分，而不是非原子递增）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-08-06T05:38:57.397

如果您确定不可能进行并发访问，AFAIK 并行化循环的最简单方法是使用 OpenMP。

除 LLVM（截至 2013 年 8 月）外，所有主要编译器都支持它。

例子 ：

```
for(int i = 0; i < n; ++i)
{
   tab[i] *= 2;
   tab2[i] /= 2;
   tab3[i] += tab[i] - tab2[i];
} 
```

这将很容易并行化，如下所示：

```
#pragma omp parallel for
for(int i = 0; i < n; ++i)
{
   tab[i] *= 2;
   tab2[i] /= 2;
   tab3[i] += tab[i] - tab2[i];
} 
```

但是，请注意，这仅对大量值有效。

如果您使用 g++，另一种非常 C++11-ish 的做法是使用 lambda 和 for_each，并使用 gnu 并行扩展（可以在后台使用 OpenMP）：

```
__gnu_parallel::for_each(std::begin(tab), std::end(tab), [&] () 
{
    stuff_of_your_loop();
}); 
```

但是，for_each 主要用于数组、向量等...但是如果您只想通过创建一个`Range`类来迭代一个范围，那么您可以“欺骗”它，`begin`并且`end`方法主要会增加一个 int。

请注意，对于执行数学运算的简单循环，其中的算法都可以与 G++ 并行化`#include <numeric>`。`#include <algorithm>`

# javascript - 改变 src 与 javascript

> ID：10792163
> 
> 赞同：62
> 
> 时间：2012-05-29T01:33:41.843
> 
> 标签：javascript, html, html5-audio

我有多个要根据用户选择流式传输的音频文件。我怎么做？这是我到目前为止所拥有的，它似乎不起作用。

*更新：进行了一些更改，现在它声称这`audio.load();`不是一个功能。谁能告诉我这是为什么？准则已更新以反映更改。

JavaScript：

```
function updateSource(){ 
    var audio = document.getElementById('oggSource');
    audio.src = 
        'audio/ogg/' + 
        document.getElementById('song1').getAttribute('data-value');
    audio.load();
} 
```

HTML：

```
<audio id="audio" controls="controls">
    <source id="oggSource" src="" type="audio/ogg"></source>
    <source id="mp3Source" type="audio/mp3"></source>
        Your browser does not support the audio format.
</audio>

<ul style="list-style: none">
    <li>Sunday May 27, 2012
        <ul style="display: none">
            <li id="song1" data-value="song1.ogg">
                <button onclick="updateSource();">Item1</button>
            </li>
            <li>Item2</li>
            <li>Item3</li>
        </ul>
    </li>
</ul> 
```

`Item2`当他们被点击时，`Item3`我会想要播放不同的音频文件。

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2012-05-29T02:54:16.223

试试这个片段

```
list.onclick = function(e) {
  e.preventDefault();

  var elm = e.target;
  var audio = document.getElementById('audio');

  var source = document.getElementById('audioSource');
  source.src = elm.getAttribute('data-value');

  audio.load(); //call this to just preload the audio without playing
  audio.play(); //call this to play the song right away
};
```

```
<ul style="list-style: none">
  <li>Audio Files
    <ul id="list">
      <li><a href="#" data-value="http://media.w3.org/2010/07/bunny/04-Death_Becomes_Fur.oga">Death_Becomes_Fur.oga</a></li>
      <li><a href="#" data-value="http://media.w3.org/2010/07/bunny/04-Death_Becomes_Fur.mp4">Death_Becomes_Fur.mp4</a></li>
      <li><a href="#" data-value="http://media.w3.org/2010/11/rrs006.oga">rrs006.oga</a></li>
      <li><a href="#" data-value="http://media.w3.org/2010/05/sound/sound_90.mp3">sound_90.mp3</a></li>
    </ul>
  </li>
</ul>

<audio id="audio" controls="controls">
  <source id="audioSource" src=""></source>
  Your browser does not support the audio format.
</audio>
```

JSFiddle [http://jsfiddle.net/jm6ky/2/](http://jsfiddle.net/jm6ky/2/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-03T12:47:03.193

使用 jQuery：

```
 $("#playerSource").attr("src", "new_src");

    var audio = $("#player");      

    audio[0].pause();
    audio[0].load();//suspends and restores all audio element

    if (isAutoplay) 
        audio[0].play(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T03:15:31.097

## 试试这个：

代替：

```
audio.load(); 
```

和：

```
audio.play(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-06-07T12:57:45.863

以下是我使用基于*Vitim.us*解决方案的 React 和 CJSX (Coffee JSX) 的方法。使用`componentWillReceiveProps`我能够检测到每个属性的变化。然后我只检查未来道具和当前道具之间的 url 是否发生了变化。瞧。

```
@propTypes =
    element: React.PropTypes.shape({
         version: React.PropTypes.number
         params:
             React.PropTypes.shape(
                 url: React.PropTypes.string.isRequired
                 filename: React.PropTypes.string.isRequired
                 title: React.PropTypes.string.isRequired
                 ext: React.PropTypes.string.isRequired
             ).isRequired
     }).isRequired

componentWillReceiveProps: (nextProps) ->
    element = ReactDOM.findDOMNode(this)
    audio = element.querySelector('audio')
    source = audio.querySelector('source')

    # When the url changes, we refresh the component manually so it reloads the loaded file
    if nextProps.element.params?.filename? and
    nextProps.element.params.url isnt @props.element.params.url
        source.src = nextProps.element.params.url
        audio.load() 
```

我不得不这样做，因为即使改变状态或强制重绘也不起作用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-29T02:01:16.563

如果您将元数据存储在标签中，请使用数据属性，例如。

```
<li id="song1" data-value="song1.ogg"><button onclick="updateSource()">Item1</button></li> 
```

现在使用属性来获取歌曲的名称

```
var audio = document.getElementById('audio');
audio.src='audio/ogg/' + document.getElementById('song1').getAttribute('data-value');
audio.load(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-08-16T05:41:41.340

为那些试图更改源元素的 src 的人找到[了这个规范说明。](https://html.spec.whatwg.org/multipage/embedded-content.html#the-source-element)`audio.load()` **对于像 React 这样导致渲染循环**的库特别有用。

> ..当元素已插入视频或音频元素时修改源元素及其属性将无效。要更改正在播放的内容，只需直接在 media 元素上使用 src 属性

```
<audio>
    <source src='./first-src'/>
</audio> 
```

更改 src

```
<audio src='./second-src'/>
    <source src='./first-src'/>
</audio> 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-05-29T01:35:44.420

改变这个

```
audio.src='audio/ogg/' + document.getElementById(song1.ogg); 
```

到

```
audio.src='audio/ogg/' + document.getElementById('song1'); 
```

# java - 在 Java Servlet 响应上以 HTML 格式呈现 JSONP

> ID：10792167
> 
> 赞同：1
> 
> 时间：2012-05-29T01:34:22.387
> 
> 标签：java, jquery, servlets, cross-domain, jsonp

我有问题。我有一个表单提交，它使用 jQuery JSONP 对我的 servlet 进行调用。此代码嵌入在另一个域中，因此使用。

**这是我的表单提交 AJAX：**

```
<script src='http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js' type='text/javascript'></script>
<script language='Javascript' type='text/javascript'>
$(\"#form1\").submit(function(event) {
    event.preventDefault();
    var $form = $(this),
        choice2 = $form.find( 'input[name=\"personChoice\"]' ).val(),
        url = $form.attr( 'action' ),
    $.ajax({
            data: {choice:choice2},
            url: url,
            dataType: 'jsonp',
            jsonp: 'callback',
            jsonpCallback: 'updatePage'
    });
});
function updatePage(renderHTML) { 
    alert(renderHTML);
}
</script> 
```

我可以在我的 Java servlet 中确认 request.getParameter("callback") 填充了 updatePage。我需要做的是在 Java Servlet 中以 JSONP 格式发回响应。如何做到这一点？我现在有一些非常简单的事情：

**Java Servlet 代码：**

```
 response.setContentType("text/javascript");
        PrintWriter out = response.getWriter();

        String renderHTML = "{ renderHTML = 'Successful'}";

        out.println(renderHTML); 
```

我还尝试了 JSON 内容类型响应，我的 javascript updatePage 中的警报没有被调用。

Java servlet 和响应 jsonpCallback 的技巧是什么？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T04:18:24.640

JSONP 响应必须包装在带有回调的请求中指定的函数调用中。

就像是

```
callback({ renderHTML = 'Successful'}); 
```

这通常应该在过滤器上加以注意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T03:09:52.253

jsonpCallback 属性不是你想象的那样。它是一个字符串（或返回字符串的函数），jquery 将其用作请求 URL 的一部分。`false`如果您不需要该功能，可以将其设置为。[查看文档](http://api.jquery.com/jQuery.ajax/#jQuery-ajax-settings)

您应该使用“成功”属性来设置响应处理程序。像这样的东西：

```
 $.ajax({
        data: {choice:choice2},
        url: url,
        dataType: 'jsonp',
        jsonp: 'callback',
        jsonpCallback: false,
        error: function(xhr, status, error) {
            alert("error");
        },
        success: updatePage
        }); 
```

此外，用于 JSONP 的最佳内容类型是`application/javascript`.

希望有帮助。

# c# - 如何检查动态对象是否是c#中的数组？

> ID：10792168
> 
> 赞同：16
> 
> 时间：2012-05-29T01:34:25.217
> 
> 标签：c#, .net

我有一个`dynamic`对象，有时是一个`object`，有时是一个`object[]`。

如何检查动态对象是否为数组？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-29T01:35:44.983

使用[`Type.IsArray`](http://msdn.microsoft.com/en-us/library/system.type.isarray%28v=vs.100%29.aspx)：

来自 MSDN：

```
int [] array = {1,2,3,4};
Type t = array.GetType();
// t.IsArray == true
Console.WriteLine("The type is {0}. Is this type an array? {1}", t, t.IsArray); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-04-15T21:23:57.327

为什么不只是 'is' 运算符（我刚刚在 Visual Studio 调试器的即时窗口上进行了快速测试），它可以工作。但不确定蒂姆的答案是否最佳。

```
void foo(object o)
{
if( o is System.Array)
{
//its array
}

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-30T20:16:14.860

为了补充 Rango 的原始响应，一种更通用的确定方法是使用类型的**IsSerializable**属性。因为如果对象是 List 或任何其他集合，IsArray 返回 false。

```
int [] array = {1,2,3,4};
Type t1 = array.GetType();
// t1.IsArray == true
List<int> list = new List();
list.AddRange(array);
Type t2 = list.GetType();
//t2.IsArray = false;
//t2.IsSerializable = true;

foreach(var i in list) {
        // do stuff
} 
```

# php - drupal 7 db_select 选项

> ID：10792170
> 
> 赞同：2
> 
> 时间：2012-05-29T01:35:01.987
> 
> 标签：php, mysql, database, drupal

基于drupal的API

```
db_select($table, $alias = NULL, array $options = array()) 
```

我想问一下选项的用途是什么以及它是如何使用的。似乎大多数来源都忽略了这个领域。我希望利用“对象关系映射”的概念。每个数据库表一个对象，并通过 PHP 中的注释添加与其对象的关系。

所以我只想知道是否可以通过drupal 7的API

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T12:16:57.430

`$options`数组似乎一直下降到，这[`DatabaseConnection::$connectionOptions`](http://api.drupal.org/api/drupal/includes!database!database.inc/property/DatabaseConnection%3A%3AconnectionOptions/7)很简单：

> 此连接对象的连接信息。

基本上，除非您挠头并思考“如何将此选项放入数据库连接字符串？”，否则您不需要使用`$options`数组。

要回答您的第二个问题，不，Drupal 没有 ORM 功能。

Drupal 6有一个用于以 ORM 方式映射 CCK 字段的[模块](http://drupal.org/project/orm)，但有一段时间没有触及它。也没有 Drupal 7 端口，并且 DB 层从 D6 到 D7 变化很大，我怀疑其中任何一个都可以挽救。

# ruby - Ruby 中类似继承的组合有什么意义（如果有的话）？

> ID：10792180
> 
> 赞同：1
> 
> 时间：2012-05-29T01:36:43.623
> 
> 标签：ruby, oop

> **可能的重复：**
> [红宝石继承与混合](https://stackoverflow.com/questions/1282864/ruby-inheritance-vs-mixins)

以下是 Ruby 中的常见模式：

```
module Persistable
  def initialize
    # Initialize a persistable document.
  end
end

class Foo
  include Persistable
end 
```

与简单的子类化相比，这里有什么优势？

```
class PersistableDocument
  def initialize
    # Initialize a persistable document.
  end
end

class Foo < PersistableDocument
end 
```

换句话说，如果完成的只是一行额外的代码，为什么还要混合*定义对象应该如何实例化的行为呢？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T01:47:32.860

当您需要为多个类而不是一个类共享代码时，应该使用模块。想想 Ruby 中最常用的模块[Enumerable](http://ruby-doc.org/core-1.9.3/Enumerable.html)。它期望包含在实现接受单个参数的**each方法的对象中。**

一旦它被包含在这样的对象中，它将为其所有方法提供一个实现。所以这是使用模块的情况，你有一个共同的行为，你想与许多类共享这个行为，那么你可以使用一个模块来实现它。

模块不是取代继承的东西，它们只是允许给你另一种选择来组合你的对象的行为。

# java - 使用drawRect时图形太慢

> ID：10792192
> 
> 赞同：1
> 
> 时间：2012-05-29T01:38:21.987
> 
> 标签：java, performance, awt, drawrect

我正在做一个绘图板，我有几个问题。

1.  每当我尝试使用它时，它都不会自动更新。广告我通常必须调整屏幕大小才能更新。
2.  我怎样才能做类似 mouseDragged 函数的事情，我可以在其中不断获得 x 和 y 坐标？

这是代码：

```
import java.awt.geom.*;
class griddedInput extends JComponent implements MouseListener
{
    int SIZE = 10;
    int scSize = 300;
    int sSize = scSize/SIZE;
    boolean [][] grid = new boolean[sSize][sSize];
    public griddedInput(boolean grid[][])
    {
        grid=grid;
        setPreferredSize(new Dimension(scSize,scSize));
        addMouseListener(this);
    }
    public void paintComponent(Graphics g)
    {
        Graphics2D g2 = (Graphics2D) g;
        int x, y;
        for(y = 0; y < sSize; y ++) {
            for(x = 0; x < sSize; x ++) {
                if(grid[y][x])
                    g2.setColor(Color.BLACK);
                else
                    g2.setColor(Color.WHITE);
                g2.fillRect((x * SIZE), (y * SIZE), sSize, sSize);
            }
        }
    }

    @Override
    public void mouseClicked(MouseEvent e) {
        int squareX = (int)e.getX() / SIZE;
        int squareY = (int)e.getY() / SIZE;
        grid[squareY][squareX] = !grid[squareY][squareX];
    }

    @Override
    public void mouseEntered(MouseEvent e) {
        // TODO Auto-generated method stub      
    }

    @Override
    public void mouseExited(MouseEvent e) {
        // TODO Auto-generated method stub
    }

    @Override
    public void mousePressed(MouseEvent e) {
        // TODO Auto-generated method stub
    }

    @Override
    public void mouseReleased(MouseEvent e) {
        // TODO Auto-generated method stub
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T01:41:04.597

`repaint()`每当您想向 JVM 建议绘制它时，您都需要调用绘图组件——最有可能是在您的 MouseListener 方法中。

例如，

```
@Override
public void mouseClicked(MouseEvent e) {
    int squareX = (int)e.getX() / SIZE;
    int squareY = (int)e.getY() / SIZE;
    grid[squareY][squareX] = !grid[squareY][squareX];
    repaint();
} 
```

为了加快重绘，您还可以调用允许您重绘 GUI 的选定矩形的重载方法，但我敢打赌，您不需要为此 GUI 这样做。

如果您希望其他人能够更好地理解它并为您提供帮助，您还希望对代码缩进少一点“创造性”。

**编辑**
关于：

> 2.我怎样才能做类似mouseDragged函数的事情，我可以不断地得到x和y坐标？

还要添加一个 MouseMotionListener。它可以是同一个类，实际上我通常为此使用一个匿名内部类，一个扩展 MouseAdapter，一个我将其单个实例用于 MouseListener 和 MouseMotionListener。我在这个论坛的几篇文章中有使用这个的例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T02:10:17.117

我的结构会有所不同：

```
private BufferedImage bi = new BufferedImage(getWidth(), getHeight());
private Graphics2D big = bi.createGraphics();

public void paintComponent(Graphics g)
{
    Graphics2D g2 = (Graphics2D) g;
    g2.drawImage(bi, 0, 0, this);
}

@Override
public void mouseClicked(MouseEvent e) {
    int squareX = (int)e.getX() / SIZE;
    int squareY = (int)e.getY() / SIZE;
    boolean b = !grid[squareY][squareX];
    grid[squareY][squareX] = b;
    if(b)
        big.setColor(Color.BLACK);
    else
        big.setColor(Color.WHITE);
    big.fillRect((x * SIZE), (y * SIZE), sSize, sSize);
    repaint();
} 
```

执行`mouseClicked`单曲`fillRect`和`paintComponent`单曲`drawImage`。将此与每次重绘执行**900** 的原始代码进行比较。`fillRects`

您还需要检测大小的变化并`BufferedImage`在那时重新创建。

# php - php mysql - 尝试为用户发布的时间添加时间限制

> ID：10792196
> 
> 赞同：2
> 
> 时间：2012-05-29T01:39:22.690
> 
> 标签：php, mysql, time

我是使用 php 的新手，但我的问题是：

我正在开发一个用户可以将内容发布到服务器的网站。我正在尝试为用户发布的频率添加 5 分钟的限制。每次用户发布时，它都会使用 CURRENT_TIMESTAMP() 更新他们在数据库中的行上的一个字段

我想做的是检查他们多久前发布的，如果不到 5 分钟前，则不允许他们发布。

我认为它看起来像这样：

```
<?php

$query = "SELECT * FROM Users_table WHERE Username = '$username'";
$result = mysql_query($query);

if (($result['last_post']-now())<=5minutes) {

echo "Please wait 5 minutes before you can post again.";

} else {

code to let user post

}

?> 
```

我遇到的问题是我不知道时间如何运作得很好，也不知道 5 分钟会是什么样子。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T01:43:08.080

除了使用数据库，您也可以使用会话：

```
session_start();
if (isset($_SESSION['last_post']) && $_SESSION['last_post'] + 300 >= time()) {
    echo "sorry, please wait for 5 minutes before next post";
} else {
    // do your post here
    $_SESSION['last_post'] = time();
} 
```

它将添加一个会话变量来跟踪此会话中的最后一篇文章；每次发布值都会更新。

如果最后一次 + 5 分钟是未来，那么距离上一次发帖还不到 5 分钟。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T01:45:06.350

您可以直接在 SQL 上检查，然后使用 PHP 来验证查询是否返回任何内容：

```
$query = "
    SELECT * FROM Users_table 
    WHERE Username = '$username' 
    AND DATE_ADD(last_post, INTERVAL 5 MINUTE) > NOW()
";
$result = mysql_query($query);
if(mysql_num_rows($result) > 0) {
    echo "Please wait 5 minutes before you can post again.";
} else {
    //code to let user post
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T01:46:20.140

`SELECT * FROM Users_table WHERE Username = ? AND DATE_ADD(last_post, INTERVAL 5 MINUTE) > NOW()`

然后检查结果是否为空。

# python - 为python机器学习包导入时，`orange`和`Orange`有什么区别？

> ID：10792201
> 
> 赞同：0
> 
> 时间：2012-05-29T01:41:17.077
> 
> 标签：python, machine-learning, orange

文档的某些部分有`import orange`，其他部分有`import Orange`，它们似乎有不同的模块组织。有什么不同？

谢谢！

乌里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T01:55:12.883

`Orange`是 2.5 中引入的新的顶级命名空间，用于统一基于 C++ 的模块和基于 Python 的模块，分别命名为`orange`和`orngXxxx`. 有关详细信息，请参阅[http://orange.biolab.si/blog/2011/12/20/orange-25-code-conversion/](http://orange.biolab.si/blog/2011/12/20/orange-25-code-conversion/)。

# php - PHP News Feed 分享按钮消失

> ID：10792202
> 
> 赞同：0
> 
> 时间：2012-05-29T01:41:17.387
> 
> 标签：php, facebook-graph-api, facebook-php-sdk, publish, feed

我正在使用 PHP 将状态更新发布到我的一些粉丝页面。

我正在发布链接，并且所有内容都正确加载，但是，发布完成后共享按钮消失了。

我看到其他几个人问同样的问题，但没有答案。

如果有人可以帮助我找到答案，我会确保告诉其他人。

谢谢大家！

```
    公共函数 addStatus($status)
    # 用于：FB Simple APi
    #           
    {

        如果（$this->_user）{

            尝试 {

                $dataArray = 数组（
                    '消息' => $状态，
                    '链接' => 'http://videomaniacsnetwork.com/wallposts/CZikEEIJiF.html'
                    );                  

                if ($this->_isPage && REPLY_AS_PAGE) {
                    $dataArray['access_token'] = $this->_getPageToken();
                }                   

                $publishStream = $this->_facebookObj->api('/' . $this->_userId . '/feed', 'post', $dataArray);

                if (TRACE) {$this->_trace[] = 'addStatus'; }
                返回真；
            } 捕捉（FacebookApiException $e）{
                $this->_errorArray[] = '无法设置状态。';
                $this->_debugArray[] = $e;
                返回假；
            }
        }
    }

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T14:27:40.287

如果您使用 if 语句来发布表单，则可能是共享按钮未通过“if”验证语句。为该表单添加 php 代码验证。

# magento - 单击任何类别链接时出现 Magento 404 错误

> ID：10792203
> 
> 赞同：0
> 
> 时间：2012-05-29T01:41:33.357
> 
> 标签：magento, http-status-code-404

网站是 www.buffalohistory.com

这是随机开始的，在问题之前没有做任何工作。

搜索也不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T02:20:48.503

确保`AllowOverride All`已设置并且`.htaccess`您的 Web 根目录中有该文件。

# django - Django Admin Page - 将 DEBUG 设置为 false 后，指向应用程序的链接处于非活动状态

> ID：10792204
> 
> 赞同：1
> 
> 时间：2012-05-29T01:42:01.453
> 
> 标签：django, django-admin, mod-wsgi

我正在使用 Apache 和 mod_wsgi 部署 django 站点。

一切正常，所以我在 settings.py 中禁用了 DEBUG。

现在大多数事情仍然有效（即通过我的设置正确提供静态内容等）。

问题是在管理页面上，我安装的应用程序出现了，但不可点击......所以我不能让它来创建帖子或上传照片或我所有的应用程序都是为了做其他事情。

将 debug 设置回 True 会立即解决问题，但我的错误日志或访问日志中都没有错误输出，可以告诉我发生此问题的位置。我的日志记录在我的 httpd.conf 中设置如下：

```
ErrorLog /srv/www/sitename.com/logs/error.log
CustomLog /srv/www/sitename.com/logs/access.log combined 
```

有任何想法吗？

# python - pycassa 的 ColumnFamily.get_indexed_slices 是否返回生成器？

> ID：10792205
> 
> 赞同：1
> 
> 时间：2012-05-29T01:42:07.513
> 
> 标签：python, indexing, nosql, cassandra, pycassa

[1] 处的文档说，它`ColumnFamily.get_range()`返回一个 python 生成器 over `(key, {column_name: column_value})`。我想知道是否 `ColumnFamily.get_indexed_slices()`还返回一个生成器。

文档对此有点不清楚。

[1] [http://pycassa.github.com/pycassa/api/pycassa/columnfamily.html#pycassa.columnfamily.ColumnFamily.get_indexed_slices](http://pycassa.github.com/pycassa/api/pycassa/columnfamily.html#pycassa.columnfamily.ColumnFamily.get_indexed_slices)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T01:42:07.653

好的，我意识到它是一个发电机。

```
>>> col_fam.get_indexed_slices(clause)
<generator object get_indexed_slices at 0x1fdcf00> 
```

# javascript - 根据文本字段中输入的值更改 Img Src

> ID：10792207
> 
> 赞同：1
> 
> 时间：2012-05-29T01:42:19.513
> 
> 标签：javascript, jquery, dynamic, image, textfield

我需要帮助创建具有以下内容的表单

1.  **TEXTFIELD**（将用于输入 7 位型号）
2.  图像占位符（将根据 url 更改图像占位符的 src，例如它将变为 src="http://yourwebsite.com/product/ **TEXTFIELD** .jpg）

3.  我需要以某种方式从产品的 url 中获取 H1 标签值

**#3 仍未解决！**

我**真的非常渴望**任何类型的帮助。我已经用谷歌搜索了一整天真的需要帮助。谢谢你 ！

我在下面有一些代码可以帮助可视化我正在寻找的内容。如果您需要澄清或我有点困惑，请与我联系。

```
<form name="form1" method="post" action="">
       <p>7-digit product#
         <input type="text" name="model" id="model">
       </p>
       <p>
         <input name="start" type="hidden" id="start" value="http://www.mywebsite.com/Products/">
       </p>
       <p>
         <input name="end" type="hidden" id="end" value=".jpg">
       </p>
       <p><img name="proudctimage" src="=#start#model#end" width="32" height="32" alt=""></p>
     </form>

<script>
    var model_input = document.getElementById('model');
    var start = document.getElementById('start');
    var end = document.getElementById('end');
    var image = document.getElementsByTagName('img');

    model_input.onkeyup = function(e){
       image[0].src = start.value + model_input.value + end.value;
    }
</script> 
```

* * *

~编辑于 2012 年 5 月 29 日上午 9:00~

* * *

1.  如果您按 Enter，则在文本字段中输入的值将被删除
2.  我需要一种方法来使用相应的 URL 来获取存储在 H1 标签中的产品描述（URL 是在文本字段中输入的型号，但使用的 url 结构与用于抓取图像的结构略有不同，见下文... [http://mywebsite.com/ProductDetails.aspx?productid=](http://mywebsite.com/ProductDetails.aspx?productid=) **TEXTFIELD** ) ***我应该注意，用于获取 H1 数据的 URL 将是“跨域”并且不一定在某些领域。我读到 jquery 可能不会在跨域上发出请求

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T01:49:47.837

您可以使用 Jquery 轻松完成此操作。

[从http://www.jquery.com 获取](http://www.jquery.com)Jquery 的副本，或者通过将其粘贴到您的 head 部分来使用 CDN 版本：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

这是一个简化版本：

如果你的 URL 的开始和结束部分不会改变，你可以简化你的表单：

```
​&lt;form>
    <label>Model Num</label>
    <input type="text" name="model" id="model" />
    <input type="button" value="Update Image" id="update" />
</form>
<img src="" /> 
```

​ 然后用下面的Jquery代码，可以检测到点击更新按钮，从文本框中抓取代码并将图片src属性改为

```
http://mysite.com/products/typed_code_here 
```

只需将 jquery 代码（和脚本标签）粘贴到您的 head 部分

```
<script>
    ​$(document).on('click','#update',function(){
        $('img').attr('src','http://mysite.com/product/'+$('#model').val()+'.jpg');
    });​​​​​​
</script> 
```

如果您想在**没有 Jquery**的情况下执行此操作，并且您的 html 必须保持如上，您可以将以下内容与原始 html 一起使用（注意代码中的拼写错误）：

```
<script>
    var model_input = document.getElementById('model');
    var start = document.getElementById('start');
    var end = document.getElementById('end');
    var image = document.getElementsByTagName('img');

    model_input.onkeyup = function(e){
       image[0].src = start.value + model_input.value + end.value;
    }
</script> 
```

onkeyup 事件可以更改为模糊、更改等，具体取决于您要如何更新图像。我建议使用一个按钮，以便用户在他们认为代码有效时可以更新图像。

**更新**​</p>

下面的 github 项目在 jQuery 的跨域 html 请求方面取得了进展。[https://github.com/padolsey/jQuery-Plugins/tree/master/cross-domain-ajax/](https://github.com/padolsey/jQuery-Plugins/tree/master/cross-domain-ajax/)

基本上，您只需要通过 ajax (jQuery.ajax()) 获取产品页面，然后在 ajax 回调中您必须扫描返回的 HTML 中的 h1 元素。最终，跨域 ajax 是一种设计模式，并且有与之相关的最佳实践。为了一个 h1 元素而抓取整个 HTML 页面并不是很有效。如果您引用的网站不是您自己的，请考虑修改您的方法并确保检查任何版权法/条款和条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T01:48:36.757

如果你使用 jquery，你可以这样做：

```
$(function () {  
    $('#model').change(function () {
        $('img[name="productimage"]').attr('src', $('#start').val() + $('#model').val() + $('#end').val());
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T02:05:03.887

在你的 html 中隐藏一个`div`. 认为

```
<div id="loadSource"></div>

   $('#model').blur(function () {
        var modelVal = $.trim(this.value),
            startVal = $.trim($('#start').val()),
            endVal = $.trim($('#end').val());
        if( modelVal &&  startVal && endVal) {
           var imgUrl = startVal + modelVal + endVal,
               siteUrl = startVal + modelVal;
           $('img[name="productimage"]')
            .attr('src', );

           // process to get h1 tag

           $('#loadSource').load(''+ siteUrl +' h1', function() {
                  console.log( $('#loadSource h1').text() );
           });
        }
    }); 
```

# objective-c - 访问另一个类中的属性而不分配该类？

> ID：10792208
> 
> 赞同：0
> 
> 时间：2012-05-29T01:42:33.357
> 
> 标签：objective-c, ios, properties, allocation

目前我想改进我的应用程序的结构，我想做的是访问我在另一个类中的第一个 CCLayer (Cocos2D) 类中创建的属性。现在显然我可以分配它然后我可以访问它但是然后调用 init 方法并且事情从那里走下坡路。

无论如何，有什么方法可以访问我的其他 CCLayer 类中的属性而无需再次分配它？

此外，我的应用程序中已经有一个 Singleton，但其中有很多变量，它变得如此混乱。除了使用单例之外，还有其他方法吗？

我已经设置了属性，只是我需要在另一个类中访问它而无需分配技术。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T01:50:20.040

我对 cocos 了解不多，但是在 Objective C 中，您需要简单地找到对相关对象的引用才能访问其属性。

有几种方法可以从其他对象访问对象：

*   将需要访问其属性的对象实例传递给需要执行访问的初始化器或对象的另一个设置器
*   创建一个单例实例并添加一个类方法来访问它
*   创建一个映射 ( `NSDictionary`) 或一个缓存 ( `NSCache`)，让您可以通过程序分配给它们的字符串键来定位对象的实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T01:47:58.407

你需要的是一个单例类。我通常是这样做的：

**标题**：

```
#import <Foundation/Foundation.h>

@interface Configuration : NSObject {
    NSString *serverPath;
    NSString *configurationServicePath;
}

// Single instance
+ (Configuration *) configuration; 
```

**实施**：

```
@implementation Configuration
@synthesize serverPath, configurationServicePath;

- (id)init {
    self = [super init];
    if (self) {
      // init
    }

    return self;
}

+ (Configuration *) configuration
{
    static Configuration *configuration;

    @synchronized(self)
    {
        if (!configuration) {
            configuration = [[Configuration alloc] init];
        }   

        return configuration;
    }
} 
```

因此，每次使用您的类时，您都可以使用以下行获取实例（如果已经有，如果没有，则只创建一次实例）：

```
Configuration configuration = [Configuration configuration]; 
```

# magento - Magento 1.7 中的重命名菜单

> ID：10792213
> 
> 赞同：0
> 
> 时间：2012-05-29T01:43:33.767
> 
> 标签：magento, menu

有一个 Magento 1.7 模板，其中包含三个左侧垂直菜单，Accordion、CSS 和 Mega，所有菜单分别命名而不是类别。我可以通过其 phtml 文件轻松重命名 CSS 菜单，但其他两个似乎无法重命名。他们的 phtml 看起来一点也不像 CSS 菜单，而且似乎有哈希数据，这是模板开发人员的猜测。我已经在我的整个网站和数据库上进行了搜索，但我无法弄清楚它是从哪里提取名称的（我在这方面花费了令人尴尬的时间）。我已经问过开发人员，但他们拒绝回答“Magento”问题。Accordion 菜单也是我可以在主页上显示产品以及单击某个类别时页面正确显示的唯一菜单。如果我使用 CSS 菜单，它将在主页上显示产品，

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T00:08:33.830

/app/design/frontend/default//locale/en_US/translate.csv 输入为：“Accordion Menu”，“Categories”

# css - 输入按钮，使用 CSS 的单图像翻转

> ID：10792216
> 
> 赞同：0
> 
> 时间：2012-05-29T01:44:14.977
> 
> 标签：css, forms, input-button-image

当谷歌搜索这个障碍时，它提出了大量关于如何在将图像用作表单中的按钮时应用 css 和*不同的静态按钮作为翻转的信息。*

**我的问题是，您将如何更改每个鼠标事件（在按钮上）的按钮，以及如果您对所有状态都使用一个图像？**

例如...我的按钮有以下 HTML

```
<input type="image" id="login_submit" name="login_submit" src="button_login.png" /> 
```

除此之外，我有以下我以前使用过的 CSS...

```
#login_submit a {
   outline: none;
   text-indent: -5000px;
   display:block;
   margin-left: auto;
   margin-right: auto;
   width: 141px;
   height: 36px;
   background: url("button_login.png") 0 0 no-repeat;
}
#login_submit a:hover {
   background-position: -141px 0;
}
#login_submit a:active {
   background-position: -282px 0;
} 
```

现在显然它目前不起作用......那我该怎么做呢？我正在寻找一个更“纯粹”的 CSS 解决方案，所以没有 JS 来照亮这一天。

还是我应该坚持为每个状态使用 2/3 个单独的按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T01:47:41.040

好吧，主要问题似乎是您正在尝试将作为孩子的锚设置为“#login_submit”而不仅仅是“#login_submit”，试试这个：

```
#login_submit {
   outline: none;
   text-indent: -5000px;
   display:block;
   margin-left: auto;
   margin-right: auto;
   width: 141px;
   height: 36px;
   background: url("button_login.png") 0 0 no-repeat;
}
#login_submit:hover {
   background-position: -141px 0;
}
#login_submit:focus {
   background-position: -282px 0;
} 
```

祝你好运，狮子座

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-08T08:27:45.133

我也有这个问题，但刚刚解决了。

通过使用输入 type="image" 并将 1x1px 空白（透明）.png 或 .gif 添加到表单元素的 src。然后使用 CSS 将背景设置为双（或在上述情况下为三）翻转图像。表单元素使用空白的 .png 作为图像，但在其下方是 CSS 处理的背景图像，显示了一个漂亮的工作翻转，并在其高度和宽度上具有提交按钮功能。

=)

代码直接取自我的情况：

HTML：

```
<div class="formrow">
<input id="send" type="image" src="../blank.png" name="Submit" onclick="submit" alt="Send" />
</div> 
```

CSS：

```
#send
{
    height: 25px;
    width: 107px;
    overflow: hidden;
    display: block;
    float: right ;
    background: url('../images/style/button-send.png');
}

#send:hover
{
    background-position: 0 -25px;
} 
```

我希望这有帮助。=)

顺便说一句，对我来说，这种方法也解决了 svict4 提到的问题。=)

# java - 抽象子类的ArrayList（必须有不同的hashcode）

> ID：10792217
> 
> 赞同：3
> 
> 时间：2012-05-29T01:44:20.977
> 
> 标签：java, arraylist, abstract

我正在为一个学校项目创建一个游戏，我有 2 个名为 Pieces 和 Powers 的类，有子类 Piece_Yellow、Piece_Blue ... 和 Power_Explode、Power_ChangeColor 等...

我是用枚举做的，这个网站上的某个人（更准确地说是 mikera）帮助我改变了这一点，并与碎片和权力建立了更好的互动。

但是现在我必须更改旧代码，并且我遇到了问题，因为我是这样做的：

```
int x = 10, y = 5;
for (int i=0; i<10; i++) {
    if (pecas[x][y] == null)
        pecas[x][y] = new Piece(arrayPecas.get(rand.nextInt(arrayPecas.size())));
} 
```

像这样，我的数组部分填充了 10 个不同颜色的新对象（但没有权力，这就是问题所在），并且每个对象都有不同的哈希码（用于稍后查找、比较和删除这些对象）......

但是由于我们不能初始化一个抽象类，我发现这个问题的唯一解决方案是这样做：

```
int x = 10, y = 5;
for (int i=0; i<10; i++) {
    if (pecas[x][y] == null)
        pecas[x][y] = arrayPecas.get(rand.nextInt(arrayPecas.size()));
} 
```

像这样仍然添加了对象，但现在我有 1 个问题： 1 - 来自具有相同颜色的部分的所有哈希码都是相同的......我真的不知道如何解决这个问题。我读过我可以覆盖 hashcode 方法，但没有信息可以区分它们（而且我无法存储位置，因为每次更改位置时我都必须更改它）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T02:53:51.930

你的问题似乎并不是真正的 hashCodes 。这是对象只是平等的。依赖于具有不同 hashCode 的两个不相等对象的代码并不严格正确。 `return 1;`是一个完全合法的实现`Object#hashCode()`。

最简单的事情似乎是在所有子类都可以实现的 Piece 上放置一个 clone() 方法，以便在您想要不同的、不同的对象的地方返回副本。

```
public abstract class Piece {

  public abstract Piece clonePiece();

}

public class YellowPiece extends Piece {

  @Override
  public Piece clonePiece() {
    return new YellowPiece(this.relevantThing1, this.relevantThing2 // etc etc)
  }
}

int x = 10, y = 5;
for (int i=0; i<10; i++) {
    if (pecas[x][y] == null)
        pecas[x][y] = arrayPecas.get(rand.nextInt(arrayPecas.size())).clonePiece();
} 
```

# c# - C# 应用程序抛出 system.BadImageFormat 异常。在 x64 中编译的依赖项

> ID：10792220
> 
> 赞同：0
> 
> 时间：2012-05-29T01:45:00.990
> 
> 标签：c#, c++, visual-studio-2010, 64-bit, pinvoke

我一直在尝试运行此处列出的第一个骨架程序： [https ://sites.google.com/site/augmentedrealitytestingsite/download](https://sites.google.com/site/augmentedrealitytestingsite/download)

我在 Windows 7 64bit 下使用 VS2010 express。

当我尝试构建和运行时，它首先抛出：

“试图加载格式不正确的程序”

由于从引用的 ARTKPManagedWrapper.DLL 调用 PInvoke 方法，紧随其后的是 System.BadImageFormatException。

我在我的电脑上重新编译了参考，但问题仍然存在。我还尝试将目标平台设置为 x86（它当前设置在任何 CPU 上），但除了任何 CPU 之外没有其他选项。

有谁知道这里还有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T02:06:04.650

如果选项不存在，您必须创建选项。我可以通过进入 Build --> Configuration Mananger 进入 Platform Column 并创建一个新的 x86 配置来让它工作。

![](../Images/ccebcdf108d5f432b329a1f4701a00fd.png)

* * *

如果您看不到配置管理器。你会想看看这个[博客](http://nichesoftware.co.nz/blog/200804/configuration-manager-visual-studio-express)

来自博客：

> 首先，选择工具|选项以打开选项对话框。确保设置了左下角的“显示所有设置”。选择 Projects and Solutions 页面并设置“显示高级构建配置”。

并从评论中

> 您只需要确保工具 -> 设置 -> 专家设置也被选中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T02:02:47.097

在 IIS 上的应用程序池中为网站在高级设置下更改以下设置

启用 32 位应用程序为真。

![在此处输入图像描述](../Images/a22d7e276f85a2ce1ca8da28b00a81f0.png)

# c++ - C++ 从用户输入更改工作目录

> ID：10792227
> 
> 赞同：4
> 
> 时间：2012-05-29T01:46:05.397
> 
> 标签：c++, directory, environment-variables, c-str

我正在设计一个模拟 shell 程序，我不能完全模仿“cd”命令。我试过 chdir()，但没有用，所以我继续尝试更改环境变量“PWD=”

这就是我所拥有的，我认为这可能很接近。（如果我错了或与 chdir() 更接近，请纠正我）

```
else if (command == "cd")
        {
            string pathEnv = "PWD=";
            string newDir;
            cin >> newDir;
            pathEnv+=newDir;
            cout << pathEnv << endl;
            putenv(pathEnv.c_str());
        } 
```

希望命令是“cd /user/username/folder”，而我的 pathEnv 变量是“PWD=/user/username/folder”，这可能会改变目录？

非常感谢任何见解。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T01:53:47.460

[chdir()](http://pubs.opengroup.org/onlinepubs/009695399/functions/chdir.html)应该是您要查找的命令。设置后是否使用[getcwd()](http://pubs.opengroup.org/onlinepubs/009695399/functions/getcwd.html)获取当前工作目录？

* * *

这是对我有用的代码。

```
#include <iostream>
#include <string>
#include <sys/param.h>
#include <unistd.h> 
```

...

```
if (command == "curr") {
    char buffer[MAXPATHLEN];
    char *path = getcwd(buffer, MAXPATHLEN);
    if (!path) {
        // TODO: handle error. use errno to determine problem
    } else {
        string CurrentPath;
        CurrentPath = path;
        cout << CurrentPath << endl;
    }
} else if (command == "cd") {
    string newDir;
    cin >> newDir;
    int rc = chdir(newDir.c_str());
    if (rc < 0) {
        // TODO: handle error. use errno to determine problem
    }
} 
```

getcwd() 有三个版本：

```
char *getcwd(char *buf, size_t size);
char *getwd(char *buf);
char *get_current_dir_name(void); 
```

有关使用的详细信息，请参阅 unix 中的手册页。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T20:23:03.600

您将始终希望在代码中使用系统调用，而不是“模拟”系统可能正在执行的操作，例如更改 PWD。如果您使用的是高级 UNIX 系统，则应该使用`chdir`，或者如果使用的是 Windows Box，请`SetCurrentDirectory`调用。我不是 Windows 开发人员，哇，但我找到了这个链接。[http://msdn.microsoft.com/en-us/library/windows/desktop/aa363806%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363806%28v=vs.85%29.aspx)

# javascript - 使用 javascript 重启谷歌浏览器

> ID：10792230
> 
> 赞同：6
> 
> 时间：2012-05-29T01:46:34.437
> 
> 标签：javascript, google-chrome

在 chrome 中，如果我转到**chrome://flags/**并在标志页面上进行更改（启用/禁用功能），页面底部会出现一个按钮，单击该按钮会重新启动 chrome 并重新打开之前的页面打开。有谁知道什么 javascript 代码允许这种情况发生？

这是按钮出现的html

```
<div class="needs-restart" jsdisplay="needsRestart">
        <div i18n-content="flagsRestartNotice">NEEDS_RESTART</div>
        <button class="experiment-restart-button"
                type="button"
                i18n-content="flagsRestartButton">RESTART</button>
</div> 
```

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-29T02:04:00.643

通过单击该按钮调用restartBrowser() 函数。

来自 flags.js：

```
/**
 * Asks the C++ FlagsDOMHandler to restart the browser (restoring tabs).
 */
function restartBrowser() {
  chrome.send('restartBrowser');
} 
```

就像评论暗示的那样，它连接到 Chrome 背后的 C++ 代码，它将尝试重新启动。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T02:00:48.310

Javascript 本身不允许您重新启动浏览器。如果是这样，网站可以随时重新启动您的浏览器，这对用户来说会很烦人。**chrome://flags/**具有与浏览器交互并告诉它请求重新启动的特殊权限。此代码未显示；它是 Chrome 的一部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-09T14:41:08.417

我认为没有 javascript 解决方案，但您可以在 url 栏中输入： [chrome://restart](http://chrome://restart)

为了手动重启谷歌浏览器。

如果您使用 Javascript 尝试此技巧：

```
window.location = 'chrome://restart'; 
```

然后您将收到一条错误消息，显示“*不允许加载本地资源：* ”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-09T13:09:19.350

在地址栏中输入以下内容会重新启动 Chrome：

```
> chrome:restart 
```

但是你需要找到一种方法来调用它： [http ://www.phpied.com/files/location-location/location-location.html](http://www.phpied.com/files/location-location/location-location.html)

# eclipse - 在 eclipse indigo 中安装 oracle weblogic 服务器工具无法完成

> ID：10792231
> 
> 赞同：1
> 
> 时间：2012-05-29T01:46:55.563
> 
> 标签：eclipse, weblogic

我只是想在我的项目中使用 weblogic，但是当我在 indigo 3.7 中安装新的服务器运行时环境时遇到了问题。它显示如下：

> 无法完成安装，因为找不到一项或多项所需项目。正在安装的软件：Oracle WebLogic Server Tools 2.0.1.201203120349 (oracle.eclipse.tools.indigo.weblogic.feature.group 2.0.1.201203120349) >
> 
> 缺少要求：Oracle Common Tools UI 4.2.1.201203120349 (oracle.eclipse.tools.common.ui 4.2.1.201203120349) 需要 'bundle org.eclipse.draw2d [3.7.0,3.8.0)' 但找不到
> 
> 无法满足依赖：来自：Oracle Upgrade Framework 4.2.1.201203120349 (oracle.eclipse.tools.common.upgrade 4.2.1.201203120349) 至：捆绑oracle.eclipse.tools.common.ui [4.2.1,4.3.0)
> 
> 无法满足依赖：来自：Oracle Common Tools 2.0.1.201203120349 (oracle.eclipse.tools.indigo.common.feature.group 2.0.1.201203120349) 到：oracle.eclipse.tools.common.upgrade [4.2.1.201203120349]
> 
> 无法满足依赖：从：Oracle WebLogic Server Tools 2.0.1.201203120349 (oracle.eclipse.tools.indigo.weblogic.feature.group 2.0.1.201203120349) 到：oracle.eclipse.tools.indigo.common.feature.group 0.0.0

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-03T17:18:04.757

It's probably a bit late to answer this, but anyhow, I think you would need the Oracle Enterprise Pack for Eclipse (OEPE). You can find all versions here:

[http://www.oracle.com/technetwork/developer-tools/eclipse/downloads/oepe-archive-1716547.html](http://www.oracle.com/technetwork/developer-tools/eclipse/downloads/oepe-archive-1716547.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-09T07:16:55.117

bundle org.eclipse.draw2d [3.7.0,3.8.0)' 找不到，因为 bundle draw2d 的版本不合适

卸载高于 version3.8 的 GEF 插件

使用此链接重新安装 GET http://download.eclipse.org/tools/gef/updates-pre-3_8/interim/ 或 http://download.eclipse.org/tools/gef/updates-pre-3_8/milestones/ 或[http ://download.eclipse.org/tools/gef/updates-pre-3_8/releases/](http://download.eclipse.org/tools/gef/updates-pre-3_8/releases/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-27T14:16:49.087

转到下面给出的 URL，然后在你的 Eclipse 中拖放 INSTALL BUTTON

[适用于 Indigo 的 Oracle Enterprise Pack for Eclipse 12c (12.1.1.1)](http://marketplace.eclipse.org/content/oracle-enterprise-pack-eclipse)

# java - SequenceFile 到 .txt 的转换

> ID：10792232
> 
> 赞同：1
> 
> 时间：2012-05-29T01:47:13.660
> 
> 标签：java, hadoop

有没有办法将序列文件转换为 .txt 文件？序列文件是在一个hadoop作业之后生成的，当我尝试使用SequenceFileReader读取它时，它给了我一个EOFException，尽管该作业成功完成。所以我虽然可以将序列文件复制到我的本地系统，然后尽可能转换为 txt 格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T12:29:24.637

将文件从 seq 更改为 text 不是一个合适的解决方案..尝试查看问题..您可以尝试类似的方法来读取键/值对 -

```
public class SequenceFileReader {
    public static void main(String args[]) throws Exception {
        System.out.println("Readeing Sequence File");
        Configuration conf = new Configuration();
        conf.addResource(new Path("/home/mohammad/hadoop-0.20.203.0/conf/core-site.xml"));
        conf.addResource(new Path("/home/mohammad/hadoop-0.20.203.0/conf/hdfs-site.xml"));  
        FileSystem fs = FileSystem.get(conf);
        Path path = new Path("/seq/file");
        SequenceFile.Reader reader = null;      
        try {
            reader = new SequenceFile.Reader(fs, path, conf);
            Writable key = (Writable) ReflectionUtils.newInstance(reader.getKeyClass(), conf);
            Writable value = (Writable) ReflectionUtils.newInstance(reader.getValueClass(), conf);
            while (reader.next(key, value)) {
                System.out.println(key + "  <===>  " + value.toString());
            }
        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            IOUtils.closeStream(reader);
        }
    }
} 
```

您可以使用“hadoop fs -text seqfile”命令将 seq 文件转换为文本文件...

# c# - 将 C# 字符串作为 SELECT WHERE IN 的 SQL 参数传递

> ID：10792233
> 
> 赞同：3
> 
> 时间：2012-05-29T01:47:16.933
> 
> 标签：c#, sql-server-2008, listbox, where-in

我正在编写一个函数，以从列表框中获取尽可能多的多个选定项目，并将值传递给 SQL 查询，以便在从另一个表中选择过滤后的值后将值插入表中。我输入的代码如下，它似乎不起作用（问题在于我将字符串传递给查询的方式。

```
string lbSites = "";

protected void Button1_Click1(object sender, EventArgs e)
{
    string cns = "server=abc;database=testDB;Trusted_Connection=True";
    using (SqlConnection con = new SqlConnection(cns))
    {
        using (SqlCommand command = con.CreateCommand())
        {
            command.CommandText = "INSERT INTO Activity (Hostname,Site,Status,System_Dept,Business_Dept)"
                + "SELECT * FROM Inventory WHERE Site IN ("+lbSites+");"
                ; 
            con.Open();
            command.Parameters.AddWithValue("@lbSites", lbSites);
            command.ExecuteNonQuery();
            con.Close();
        }
    }
}

protected void ListBox1_SelectedIndexChanged(object sender, EventArgs e)
{
    if (ListBox1.Items.Count > 0)
    {
        for (int i = 0; i < ListBox1.Items.Count; i++)
        {
            if (ListBox1.Items[i].Selected)
            {
                lbSites += "'" + ListBox1.Items[i].Value + "', ";
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T02:02:26.667

你不应该直接将这样的值传递给 SQL，因为它会让你面临 SQL 注入攻击。

相反，您可以计算出需要多少参数，然后将这些参数*名称*插入到查询中。

这种方法最多可用于大约 2,000 个值（假设 SQL Server）。如果您需要传递更多值，则需要将查询分解为子集，或者使用参数值表。

示例（未测试，因此可能存在一些错误）：

```
// Get your selected items:
var items = ListBox1.Items.Where(i=>i.Selected).Select(i=>i.Value).ToArray(); 

// Create a series of parameters @param0, @param1, @param2..N for each value.
string paramNames = string.Join(", ", Enumerable.Range(0,items.Count()).Select(e=>"@param"+e)); 

// Build the command text and insert the parameter names. 
string commandText = "INSERT INTO Activity (Hostname,Site,Status,System_Dept,Business_Dept)" 
                + "SELECT * FROM Inventory WHERE Site IN ("+ paramNames +")";

command.CommandText = commandText; 

// Now add your parameter values:  this binds @param0..N to the values selected. 

for(int param=0;param<items.Count();param++)
{
   command.Parameters.AddWithValue("@param" + param, items[param]); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T01:54:39.853

`lbSites`每次您回发时，价值都会丢失。将其保存在您的 ViewState 中。

此外，您不需要，`command.Parameters.AddWithValue("@lbSites", lbSites);`因为您的 sql 中没有`@lbSites`参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-28T14:52:54.910

```
try this 
SELECT M.REG_NO, T.TYPE_ID 
    FROM MAIN AS M 
        INNER JOIN CLASSIFICATION AS C 
            ON M.REG_NO = C.REG_NO
        INNER JOIN TYPE AS T 
            ON T.TYPE_ID = C.TYPE_ID
    WHERE (@Types) like .LIKE '%,' +T.TYPE_ID+ ',%' 
```

# css - 内联 CSS 编辑和实时预览

> ID：10792235
> 
> 赞同：0
> 
> 时间：2012-05-29T01:47:40.150
> 
> 标签：css

我**不追随**任何人编写此代码，我追随一些建议并可能链接到类似系统，我们可以从中学习

我已经搜索了很长时间，但没有运气。我想做的是：

有一个带有两个窗格的网页。下面的演示图像。

![在此处输入图像描述](../Images/1fbaa44f8bacb13954810be556fbe9f4.png)

Upper Pane：保存一个 CSS 文件，就像一个 textarea。用户可以随时编辑和保存。使用下面的预览按钮.. ..onclick 显示预览窗格或模式窗口。随着对特定文件的 css 更改。

我想它有点像 JS fiddle，但它预加载了一个特定的 css 文件。预览窗格加载了一个特定的 html 文件。这样当用户保存会话时更新 css 文件，他们可以看到他们的进度。

我知道这不是最严格意义上的问题，也许在投票否决之前，您可能只是协助一些指向类似脚本的指针.. 或逻辑。因为它是我没有找到任何可以做到这一点的运气，更不用说知道从哪里开始创建这样的东西了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T05:02:59.073

另一个纯 css *jsfiddle* [Dabblet.com](http://dabblet.com/)：

即时预览，通过 alt+up/down 键递增/递减

![在此处输入图像描述](../Images/b6420e818eeee7041c45c20555f1972a.png)

# python - 对包含 utf-8 字符的列表进行排序

> ID：10792241
> 
> 赞同：1
> 
> 时间：2012-05-29T01:48:31.947
> 
> 标签：python, sorting, utf-8

问题的开始在这里[自定义排序python](https://stackoverflow.com/questions/10645986/custom-sort-python/10657058#10657058)

我想按这个字母进行特殊排序

```
alphabet = u'aáàAâÂbBcCçÇdDeéEfFgGğĞhHiİîÎíīıIjJkKlLmMnNóoOöÖpPqQrRsSşŞtTuUûúÛüÜvVwWxXyYzZ 
```

[aáàAâÂ]**这组字符应该具有相同的优先级**。在较早的线程中，@happydave 建议使用 (alphabet.index(c)/2)，

> 这应该将列表中的每对相邻字符映射到相同的优先级。

但就我而言，我没有一对性格？例如：aáàAâÂ、eéE、uUûúÛ、óoO、iİîÎíī。

在我看来，简单的方法是添加一个项目，每个列表只包含成对的字符，但我不知道如何实现它。

```
 [['word1', <Element tag at b719a4cc>], ['word2', <Element tag at b719a6cc>]] 
```

添加一项的列表列表

```
[['word1_', 'word1', <Element tag at b719a4cc>], ['word2_', 'word2', <Element tag at b719a6cc>]] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T02:35:40.530

```
s='aáàAâÂbBcCçÇdDeéEfFgGğĞhHiİîÎíīıIjJkKlLmMnNóoOöÖpPqQrRsSşŞtTuUûúÛüÜvVwWxXyYzZ'
s2='aaaaaabbccccddeeeffgggghhiiiiiiiijjkkllmmnnoooooppqqrrssssttuuuuuuuvvwwxxyyzz'
trans = str.maketrans(s, s2)

def unikey(seq):
    return seq[0].translate(trans) 
```

使用这个函数作为`key`参数`sorted`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-29T02:00:58.610

太多的工作。[设置您的语言环境](http://docs.python.org/library/locale.html)，然后[`key=locale.strxfrm`](http://docs.python.org/library/locale.html#locale.strxfrm)。

并且永远不要对 UTF-8 字符进行排序；总是首先解码`unicode`。

# php - Twig 日期过滤器不适用于 DateTime 对象

> ID：10792246
> 
> 赞同：1
> 
> 时间：2012-05-29T01:49:19.470
> 
> 标签：php, datetime, doctrine-orm, codeigniter-2, twig

我将 CI2 与 Doctrine2 和 Twig 一起用于模板引擎。我正在尝试将实体的日期显示为字符串，但它对我不起作用。

我将一组 Entity 对象发送到模板，遍历它们并显示它们的属性：

```
{% for e in entities %}
    <span><label>username</label>{{e.getUserName}}</span>
    <span><label>email</label>{{e.getEmail}}</span>
    <span><label>date created</label>{{e.getCreatedAt | date('d.M.Y H:i:s')}}</span>
{% endfor %} 
```

该`getCreatedAt()`方法返回一个 DateTime 对象。我可以在 PHP 中很好地使用这个对象：

```
echo $e->getCreatedAt->format('YmdHis'); 
```

但是，在 Twig 中，我似乎找不到任何打印字符串的方法。当我尝试上述方式时（我读过这是正确的方法），我得到：

```
date() expects parameter 1 to be string, object given 
```

我尝试了其他几种方法：

```
{{e.getCreatedAt.format('d.M.Y H:i:s')}}
{{e.getCreatedAt}}
{{e.getCreatedAt | date('d.M.Y H:i:s') |strtotime}} 
```

什么都解决不了。

我确定使用 addFilter() 方法添加“日期”Twig 过滤器：

```
$this->twig->addFilter('date', Twig_Filter_Function('date')); 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T07:16:10.200

`date`是一个内置过滤器，你不需要注册它，尤其是`date`不能处理 DateTime 对象的 php 函数。

# php - 警告：mysqli_stmt::bind_result()：调用存储过程时绑定变量的数量与准备好的语句中的字段数量不匹配

> ID：10792250
> 
> 赞同：1
> 
> 时间：2012-05-29T01:50:03.737
> 
> 标签：php, stored-procedures, mysqli

我正在尝试调用插入新记录并返回最后一个 id 的存储过程。当我调用该页面时，我收到上述错误，参考第 6 行。

```
$Str = 'Hello world';
$parentId = 1;

$lastId = 0;
$statement = $con->prepare('call createRecordReturnsId( ? , ? )');
$statement->bind_param("si",$Str,$parentId);
$statement->bind_result($lastId);
$statement->execute(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T01:57:52.533

我只需要将绑定语句（第 7 行）移到执行语句（第 8 行）之后

以下顺序有效：

```
$Str = 'Hello world';
$parentId = 1;

$lastId = 0;
$statement = $con->prepare('call createRecordReturnsId( ? , ? )');
$statement->bind_param("si",$Str,$parentId);
$statement->execute();
$statement->bind_result($lastId); 
```

正确的操作顺序很重要，因为在调用存储过程时，mysqli 不知道在语句执行之前将返回的变量数量。

# android - 如何在 ExpandableListView 中的组项内放置一个按钮？

> ID：10792254
> 
> 赞同：8
> 
> 时间：2012-05-29T01:50:39.250
> 
> 标签：android, events, button, expandablelistview

我正在为 Android 开发一个应用程序。

如何将一个按钮放在一组 ExpandableListView 中？

通过单击按钮，将显示一个对话框，而不是打开或关闭组。单击按钮外部，该组应正常打开和关闭。

下图显示了我想插入按钮的位置。

[http://img193.imageshack.us/img193/2060/expandablelistviewbutto.png](http://img193.imageshack.us/img193/2060/expandablelistviewbutto.png)

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-10-30T07:08:39.063

Android ExpandableListView 可以在 Group 或 child 中有任何按钮。

确保按钮在适配器中不能像下面那样聚焦。

```
editButton.setFocusable(false); 
```

这将有助于分别单击 group.parent 中的 Group 和 Button

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T16:21:37.010

您需要使用包含按钮的自定义 XML 文件来扩展 groupView，例如这个（例如`inflate_xml_groupview.xml`）：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/FrameLayoutGroupView"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">

    <Button
        android:id="@+id/myButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="ButtonOfMyExpandableListGroupView"
        android:visibility="visible" />

</FrameLayout> 
```

然后，您必须创建一个扩展 BaseExpandableListAdapter 的自定义 ExpandableListAdapter 并在 getGroupView() 方法上获取 Button，如下所示：

```
public View getGroupView(int groupPosition, boolean isExpanded, View convertView, ViewGroup parent) {
        ViewHolder holder;
        if (convertView == null) {

        convertView = inflater.inflate(R.layout.inflate_xml_groupview, null);
        holder = new ViewHolder();
        holder.Button = (Button) convertView.findViewById(R.id.myButton);
        convertView.setTag(holder);
        } else {
        holder = (ViewHolder) convertView.getTag();
        }
        holder.position = ListOfItems.get(groupPosition).getPosition();
        Button.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View arg0) {
                Toast.makeText(getApplicationContext(), "Button " + groupPosition + " is clicked !", Toast.LENGTH_SHORT).show();
               // DO STUFF
        }
    });
} 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-11-12T12:06:30.230

要提供基于 XML 的解决方案，您只需将以下行添加到控件中。

`android:focusable="false"`

例子：

```
<Button
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:focusable="false"/> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T16:10:06.470

我创建了自己的 ExpandableListView。我使用 XML 和类中的布局来构建组件。

令人惊讶的是，这很容易做到。

它比标准的 ExpandableListView 更容易理解，因为我为列表的每个元素（为列表本身、组和项目）创建了一个类和一个布局。没有必要弄乱地图列表的列表，我认为这会降低代码的表达性和可读性。

此外，该列表变得非常灵活和可定制。我可以在运行时轻松添加和删除组和项目。现在我可以自由修改列表的外观和内部组件了。

我创建的 ExpandableListView 可以做和标准一样的事情，甚至更多。只是无法判断性能是否受损，但没有注意到任何明显的问题。

# css - 是否可以将全局 CSS 按钮属性关闭为一个按钮？

> ID：10792255
> 
> 赞同：0
> 
> 时间：2012-05-29T01:51:10.450
> 
> 标签：css, html

我想知道我可以为一个需要使用的按钮停用全局按钮 css 样式属性

有自己的风格。有没有办法在一个按钮中破坏按钮{} 样式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T02:43:58.773

创建一个新类并将其添加到您的按钮。

```
<button class='button2'>Click</button> 
```

手动设置 css 文件中的所有属性。

```
.button2{ style here... } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T03:54:46.723

是的你可以！您可以为要设置样式的按钮设置一个 id 或一个类，并编写任何您想要的样式，例如：

`<button id='mybutton'>Click</button>`

在你的css文件中：

`#mybutton { you style here... }`

# django - 在 django 中显示图片

> ID：10792256
> 
> 赞同：0
> 
> 时间：2012-05-29T01:52:01.507
> 
> 标签：django

我有一个新的django项目**project1**。它包含django的基本文件(settings.py,urls.py,views.py)。然后我把imgs放在**project1/static/img/**中，比如11.jpeg

现在我想在 url 请求中显示这个图片（比如**http://host:port/path/to/img**）；或者类似返回模板的响应，其中包含`<img src='...'/>`

我尝试了很多方法，但没有任何效果

有没有人可以给我一些建议，或者一些简单的代码

提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T02:06:21.660

你用的是什么版本的django？

在 1.4 中，您可以在模板中执行此操作：

```
<img src="{{ STATIC_URL }}hi.jpg" /> 
```

或者

```
<img src="../static/hi.jpg" /> 
```

在你的 settings.py 中：

```
MEDIA_ROOT = '/Users/YOURUSERNAME/Desktop/YOURPROJECTNAME/static'
^^^ this just has to be the path to the static directory in your project ^^^

MEDIA_URL = '/static/'

STATIC_ROOT = ''

STATIC_URL = '/media/' 
```

然后在你的 urls.py 中：

```
if settings.DEBUG: urlpatterns += patterns('', (r'^static/(?P<path>.*)$', 'django.views.static.serve', {'document_root': settings.MEDIA_ROOT}), ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T02:04:50.637

我猜这就是你需要的：

```
<img src="{{ STATIC_URL }}img/11.jpeg" /> 
```

# android - Android：在图库中滚动背景

> ID：10792258
> 
> 赞同：0
> 
> 时间：2012-05-29T01:52:50.263
> 
> 标签：android, animation, gallery

我正在尝试制作一个具有与图像一起滚动的背景的水平图像库。基本上，它看起来像是胶卷上的一系列图片。

有什么想法可以解决这个问题吗？有没有人尝试过这样的事情？

现在，我有一个画廊视图夹在两个带有平铺背景的线性布局之间。这让我得到了我想要的外观，但没有动画。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T16:32:30.773

我终于想通了！希望这可以帮助某人。

```
 public ImageAdapter(Context context) {
        galleryContext = context;
        imageSizeInPixels = 300;    //default value of 300x300 px
        TypedArray styleAttr = galleryContext.obtainStyledAttributes(R.styleable.imageGallery);
        galleryBackground = styleAttr.getResourceId(R.styleable.imageGallery_android_galleryItemBackground, 0);
        styleAttr.recycle();
    }

    private File[] getFiles() {
        File file = new File(GlobalVars.picDir);
        File imageList[] = file.listFiles();
        return imageList;
    }

    public int getCount() {
        return imageList.length;
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        RelativeLayout container = new RelativeLayout(galleryContext);

        ImageView imageView = null;
        if (convertView != null) {  //we can reuse the view!
            imageView = (ImageView) convertView;
        } else {
            imageView = new ImageView(galleryContext);   //boo we have to make a new view
        }

        //Get a scaled Bitmap so that it doesn't use up all our memory

        Bitmap setBitmap = loadScaledBitmap(imageList[position].getAbsolutePath(), imageSizeInPixels);

        //set up our ImageView inside the gallery to display our Bitmap...

        imageView.setImageBitmap(setBitmap);
        imageView.setLayoutParams(new Gallery.LayoutParams(imageSizeInPixels, imageSizeInPixels));
        imageView.setScaleType(ImageView.ScaleType.FIT_XY);
        imageView.setBackgroundColor(Color.BLACK);

        RelativeLayout borderImg = new RelativeLayout(galleryContext);
        borderImg.setPadding(10, 5,10, 5);
        borderImg.setBackgroundColor(0xff000000);
        borderImg.addView(imageView);

        RelativeLayout.LayoutParams imageParams = new RelativeLayout.LayoutParams(imageSizeInPixels, imageSizeInPixels);
        imageParams.addRule(RelativeLayout.CENTER_VERTICAL);
        imageParams.addRule(RelativeLayout.CENTER_HORIZONTAL);

        container.setBackgroundResource(R.drawable.repeat_reel);
        container.setLayoutParams(new Gallery.LayoutParams(imageSizeInPixels, imageSizeInPixels+40));

        container.addView(borderImg, imageParams);

        return container;
    } 
```

# ios5 - NSTimer 未被调用

> ID：10792259
> 
> 赞同：0
> 
> 时间：2012-05-29T01:53:29.447
> 
> 标签：ios5, nstimer, xcode4.3

我正在制作一个具有“更新方法”之王的应用程序，负责持续运行代码。我想使用一个`NSTimer`，因为它可以选择让它无限期地重复。我有它这样加载：

```
gameTimer = [NSTimer timerWithTimeInterval:0.01428 target:self selector:@selector(GameUpdate:) userInfo:NULL repeats:true]; 
```

声明`GameUpdate:`如下：

```
-(void)GameUpdate:(NSTimer*)timer; 
```

问题是，里面的代码`GameUpdate:`永远不会运行。它曾经在 xcode 4.2 中工作。为什么是这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T01:58:40.217

您需要将新创建的 NSTimer 对象添加到运行循环中。

（[从这个相关问题的答案中提取](https://stackoverflow.com/a/9918172/981049)）：正如[文档](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nstimer_Class/Reference/NSTimer.html)所说：

> 计时器与运行循环一起工作。要有效地使用计时器，您应该了解运行循环是如何运行的——请参阅 NSRunLoop 和线程编程指南。特别要注意的是，运行循环保留了它们的计时器，因此您可以在将计时器添加到运行循环后释放它。

如果您查看该相关问题的其他答案，您将了解如何创建一个 NSTimer 对象，并在其中自动将其添加到运行循环中。

# php - PHP 无法添加或更新子字段 - 外键错误

> ID：10792264
> 
> 赞同：0
> 
> 时间：2012-05-29T01:53:55.783
> 
> 标签：php, html, mysql

尝试将一些值插入 MySQL 数据库时出现错误 - 我的页面当前读取通过 URL 传递的值“EventID”，并允许我根据该 EventID 添加结果。我目前有一个下拉框，由成员表中的成员填充。
我收到这个可怕的错误：

> 无法添加或更新子行：外键约束失败 ( `clubresults`. `results`, CONSTRAINT `ResultEvent`FOREIGN KEY ( `EventID`) REFERENCES `events`( `EventID`) ON DELETE CASCADE)

我无法更改表结构，因此将不胜感激。注意 - 我目前正在让它回显 SQL 以查找关于它为什么不会插入的错误。

```
<?php

error_reporting (E_ALL ^ E_NOTICE); 
$con = mysql_connect("localhost","root","");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("clubresults", $con);

   // Get id from URL
    $id = mysql_real_escape_string($_GET['EventID']);

    // If id is number
    if ($id > 0) 
    {
         // Get record from database
         $sql = "
            SELECT EventID
            FROM results 
            WHERE EventID = " . $id;
         $result = mysql_query($sql); 
         }
if (isset($_POST['submit'])) {       
  $sql="INSERT INTO results (MemberID, Score, Place)
VALUES
('".$_POST['student']."', '".$_POST['Score']."', '".$_POST['Place']."')";

$add_event = mysql_query($sql) or die(mysql_error());;

echo $add_event;
} 
```

HTML 表单 -

```
$_SERVER['PHP_SELF']?>" method="post"> 
                        <table border="0"><p>
                        <tr><td colspan=2></td></tr>
                        <tr><td>Member Name: </td><td>
                        <?php
                        $query="SELECT * FROM members";

/* You can add order by clause to the sql statement if the names are to be displayed in alphabetical order */

$result = mysql_query ($query);
echo "<select name=student value=''>Student Name</option>";
// printing the list box select command

while($nt=mysql_fetch_array($result)){//Array or records stored in $nt
echo "<option value='$nt[MemberID]'>$nt[Firstname] $nt[Surname]</option>";
/* Option values are added by looping through the array */
}
echo "</select>";// Closing of list box 
?>

                        <tr><td>Score:</td><td> 
                        <input type="text" name="Score" maxlength="10"> 
                        <tr><td>Place:</td><td> 
                        <input type="text" name="Place" maxlength="10"> 
                        </td></tr> 
                        <tr><th colspan=2><input type="submit" name="submit" 
                        value="Add Result"> </th></tr> </table>
                        </form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T01:58:53.043

您必须将 插入`EventID`到您的`results`记录中：

```
$sql="INSERT INTO results (MemberID, Score, Place, EventID) VALUES (?, ?, ?, ?)"; 
```

注意我已经使用`?`占位符代替你的`$_POST`变量（这让你容易受到[SQL 注入](http://bobby-tables.com)的攻击）。

您应该使用准备好的语句，将变量作为参数传递到其中，这些参数不会为 SQL 评估，但它们在您正在使用的古老 MySQL 扩展中不可用（无论如何社区已经[开始弃用](http://news.php.net/php.internals/53799)，所以你真的应该停止用它编写新代码）；改用改进的[MySQLi](http://php.net/mysqli)扩展或[PDO](http://php.net/pdo)抽象层。

# playframework - 玩！框架 - 模型默认与显式构造函数？

> ID：10792269
> 
> 赞同：0
> 
> 时间：2012-05-29T01:55:08.467
> 
> 标签：playframework

我看到了两种使用他/她的信息创建用户对象的方法：

1）显式构造函数——我调用该`Application.getUserInfo()` 方法，其对应的视图有一个表单供用户输入其注册信息：名称、用户、密码并调用该`Application.createUser(String name, String email, String password)`方法，然后调用显式构造函数`new User(name, email, password)`。单击提交按钮将调用`Application.createUser()`方法。

2）如果我调用`Application.getUserInfo(User user)`方法，对应的视图是否有一个用户对象（由隐式默认构造函数创建）？在这种情况下，我可以只读取 user.name、user.email、user.password 这样我就不必定义显式构造函数。

有人可以告诉我方法 2) 是否有效？如果是，与 1) 相比，它有什么缺点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T10:15:11.347

两种方法都有效，但是第二种方法可能会成为安全问题。

使用方法 #2，您必须指定哪些属性可能不被绑定（使用 @NoBinding 注释的黑名单），而在方法 #1 中，您明确说明将绑定哪些数据（白名单）。

传统的安全软件系统应该围绕白名单构建......每个防火墙都以这种方式工作“阻止除我指定之外的所有内容”......

如果您的应用程序只是一个 Intranet 应用程序，那么使用方法 #2 可能没问题，如果它是一个面向成千上万用户的真实应用程序，我（个人）会使用方法 #1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T06:32:29.850

方法 2 是有效的并且是一种非常常见的方法。如果您查看[http://www.playframework.org/documentation/1.2.4/controllers#binding](http://www.playframework.org/documentation/1.2.4/controllers#binding)并查看 POJO 绑定以获取完整信息。

唯一的缺点是它将模型的结构暴露给可以阅读您的 HTML、知道您正在使用 POJO 绑定并且可以从那里解决它的人……但不确定这是否真的很重要。

# emacs - 通知模式行中的过期缓冲区

> ID：10792273
> 
> 赞同：3
> 
> 时间：2012-05-29T01:55:59.793
> 
> 标签：emacs, modeline

有时我使用另一种方法（通常是 sed）来编辑一个已经被 Emacs 编辑的文件。稍后，如果我尝试在 Emacs 中编辑文件而不先恢复更改，我会收到一条错误消息和询问我该怎么做的提示。

没关系。问题是当我做了一些并行更改时，我往往会忘记，所以我希望 Emacs 通过在模式行中显示一个红色的“M”来提醒我。

我知道如何自定义模式行（通过向 `mode-line-format`变量添加字符串），但我不知道如何检查文件是否在 Emacs 之外被修改。

**是否有检查 Emacs 缓冲区是否与它对应的文件是最新的功能？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T03:49:06.977

并不是对这个问题的直接回答，但您可以通过在 emacs 中使用`(global-auto-revert-mode t)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T06:49:33.250

尝试

```
(verify-visited-file-modtime (current-buffer)) 
```

请参阅[第 27.6 节缓冲区修改时间](http://www.gnu.org/software/emacs/manual/html_node/elisp/Modification-Time.html)。

# java - 使用 Metawidget 将对象与 GUI 中的值同步

> ID：10792275
> 
> 赞同：1
> 
> 时间：2012-05-29T01:56:19.927
> 
> 标签：java, javabeans, beans-binding

我正在使用[Metawidget](http://metawidget.sourceforge.net/)自动查看/编辑 GUI 中对象中的值。我能够绑定对象的初始值，并在它们各自的 GUI 组件中查看它们。但是，当我更改 GUI 中的值时，这些更改不会同步回对象。这或多或少地记录[在此处](http://blog.kennardconsulting.com/2008/02/beans-binding-in-metawidget.html)（已弃用）和[此处](http://metawidget.sourceforge.net/doc/reference/en/html/ch07.html)。

这是我的业务对象：

```
public static class Person {

    private String mName;

    public String getName() { return this.mName; }

    public void setName( String name ) { this.mName = name; }

    @UiAction
    public void showPersonObject() {
        JOptionPane.showMessageDialog(frame, this.mName);           
    }

    @UiAction
    public void bind() {
        metawidget.getWidgetProcessor( 
            BeansBindingProcessor.class)
                .save( metawidget );
    }
} 
```

这是我的主要方法，其中配置了 metawidget：

```
public static void main( String[] args ) {
    // Person
    Person person = new Person();
    person.setName("A cool name");
    // Metawidget
    metawidget = new SwingMetawidget();
    metawidget.setInspector( new CompositeInspector(
        new CompositeInspectorConfig().setInspectors(
            new PropertyTypeInspector(),
            new MetawidgetAnnotationInspector(),
            new BeanValidationInspector())));
    metawidget.addWidgetProcessor( 
        new BeansBindingProcessor(
            new BeansBindingProcessorConfig().setUpdateStrategy(
                UpdateStrategy.READ_WRITE )) );
    metawidget.setToInspect( person );
    // Create Frame
    ...
} 
```

在[文档](http://metawidget.sourceforge.net/doc/reference/en/html/ch07.html)中说：

> 如果设置为 READ 或 READ_WRITE（默认为 READ_ONCE），则被检查的对象必须提供 PropertyChangeSupport。如果设置为 READ_WRITE，对 UI 的更新会自动同步回 setToInspect，否则客户端必须手动调用 save：
> 
> myMetawidget.getWidgetProcessor(BeansBindingProcessor.class).save(myMetawidget)

我尝试将*UpdateStrategy*设置为 READ 和/或 READ_WRITE，和/或在*BeansBindingProcessor*上调用 save() 。我还尝试为 Person 对象提供PropertyChangeSupport *（**我*认为它指的是[this](http://docs.oracle.com/javase/7/docs/api/java/beans/PropertyChangeSupport.html)），这与添加以下代码相同：

 *```
private final PropertyChangeSupport pcs = new PropertyChangeSupport(this);

public void addPropertyChangeListener(PropertyChangeListener listener) {
    this.pcs.addPropertyChangeListener(listener);
}

public void removePropertyChangeListener(PropertyChangeListener listener) {
    this.pcs.removePropertyChangeListener(listener);
}

public void setName( String name ) {
    String oldName = this.mName;
    this.mName = name;
    this.pcs.firePropertyChange("name", oldName, mName);
} 
```

但是，*Person*对象始终保持原始值。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T18:52:07.793

好吧，我解决了这个问题。互联网上有一个“流氓”版本的 beansbinding.jar，这就是绑定不起作用的原因。我使用了随 Metawidget 示例分发的版本，现在一切正常。

[此处](https://issues.sonatype.org/browse/MVNCENTRAL-51)报告了此问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T00:22:02.190

对于 BeansBinding 的“流氓”版本的混淆，我们深表歉意。我已经更新了 Metawidget 文档，以便在将来避免其他人的挫败感。*

# playframework - 有没有人用过hazelcast和play framework 2.0

> ID：10792285
> 
> 赞同：0
> 
> 时间：2012-05-29T01:59:35.940
> 
> 标签：playframework, playframework-2.0, hazelcast

有没有人使用 Hazelcast（最好是 2.1）和游戏框架 2.0/2.1（不是 1.2+）？我在尝试使用上述版本时遇到异常（我无法为 hazelcast 运行 play install - 给出了“无效的密钥错误”作为响应）。我的项目引用了 hazelcast jar 文件 - 我也尝试在 dependencies.yml 文件中添加对 Hazelcast 的引用，但无济于事。

除了回到 1.2 之外的任何建议都将受到欢迎。如果没有别的办法，我就回玩1.2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T14:56:27.540

我已经恢复在 play 1.2.3 中使用 hazelcast。

# wpf - RadGridView：无法访问 GridViewHeaderCell

> ID：10792287
> 
> 赞同：2
> 
> 时间：2012-05-29T01:59:50.380
> 
> 标签：wpf, telerik, radgridview

需要一些关于这个的帮助。我有一个 Telerik:RadGridView 控件并在资源中定义它的 GridViewHeaderCell 样式

```
<Window.Resources>
   <LinearGradientBrush x:Key="HeaderBrush" EndPoint="0.5,1" StartPoint="0.5,0">
        <GradientStop Color="#FFEBCD97" Offset="0.028"/>
        <GradientStop Color="#FFC89C22" Offset="1"/>
        <GradientStop Color="#FFC2AA39" Offset="0.452"/>
        <GradientStop Color="#FFC49B2A" Offset="0.676"/>
        <GradientStop Color="#FFCCB073" Offset="0.404"/>
        <GradientStop Color="White" Offset="0"/>
    </LinearGradientBrush>

   <Style TargetType="{x:Type telerik:GridViewHeaderCell}" x:Key="HeaderStyle">
        <Setter Property="Background" Value="{DynamicResource HeaderBrush}" />
    </Style>
</Window.Resources> 
```

但我无法访问 RadGridView 中的 HeaderStyle 来设置它的样式

```
<telerik:RadGridView Name="radGridView1"  HeaderCellStyle="{StaticResource HeaderStyle}"  Loaded="radGridView1_Loaded_1"/> 
```

这是一个 WPF 应用程序，WPF 中是否有 RadGridView 的 HeaderCellStyle 属性？还是我缺少需要引用的 Telerik 库？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T12:26:56.983

HeaderCellStyle 存在于 WPF RadGridView 的 RadControls 中。但它在 GridViewDataColumn 或 GridViewColumn 级别上受支持。它在 RadGridView 级别上不可用。您需要为您的 rad 网格视图显式添加 gridview 列，然后添加 headercellstyle。这是我能够快速整理的内容。

```
<telerik:RadGridView x:Name="radGridView" AutoGenerateColumns="False">
        <telerik:RadGridView.Columns>
            <telerik:GridViewDataColumn Header="First Name" DataMemberBinding="{Binding FirstName}" HeaderCellStyle="{StaticResource HeaderStyle}" />
            <telerik:GridViewDataColumn Header="Last Name" DataMemberBinding="{Binding LastName}" HeaderCellStyle="{StaticResource HeaderStyle}" />
            <telerik:GridViewDataColumn Header="Title" DataMemberBinding="{Binding Title}" HeaderCellStyle="{StaticResource HeaderStyle}" />
            <telerik:GridViewDataColumn Header="City" DataMemberBinding="{Binding City}" HeaderCellStyle="{StaticResource HeaderStyle}" />
            <telerik:GridViewDataColumn Header="Country" DataMemberBinding="{Binding Country}" HeaderCellStyle="{StaticResource HeaderStyle}" />

        </telerik:RadGridView.Columns>
    </telerik:RadGridView> 
```

我使用了您提供的相同样式并将其应用于每个列标题。

这是输出：

![RadGridView 标题样式](../Images/1dd71c2e89cc932701769a3572e630da.png)

希望我能回答你的问题

Lohith (Tech Evangelist, Telerik India)

# c# - 如何将类中的方法包含在另一个类中

> ID：10792288
> 
> 赞同：0
> 
> 时间：2012-05-29T01:59:57.433
> 
> 标签：c#, class

我希望我能够将一个主类中的一堆方法包含到几个表单中。例子

```
class Master{
    public void kill(){
         this.Hide()
    }
 }

 class b : Form{
      //What must I do so that class 'b' can call kill, an it would mean that b would close
 } 
```

首先我想如果Master继承Form，那么b可以继承Master，但是失败了。一点头绪都没有，真的很挣扎，欢迎大家评论。谢谢！

## 编辑

好的，有很多函数和变量需要复制到表单中。这就是为什么我想要类似于子类的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T02:01:17.357

`kill`做成扩展方法。

```
public static class FormExtensions
{
    public static void Kill(this Form form)
    {
        ...
    }
} 
```

或者如果您不希望它应用于每个表单，那么您可以扩展一个标记接口并将其应用于适用的表单

```
public interface IKillable
{  }

public static class KillableExtensions
{
    public static void Kill(this IKillable form)
    {
        ...
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T02:12:01.587

您可以通过创建其对象来调用其他类的方法。

**例子：**

```
public class A 
{
   public void myMethod()
   {

   }
}

public class B
{
    A a = new A();            // here 'a' is an object of class 'A'
    a.myMethod(); 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T02:03:53.913

做一个主人并称之为

```
class b : Form{
      //What must i do so that class be can call kill
      Master _master = new Master();

      void Stuff()
      {
         _master.kill();
      }

 } 
```

您还可以制作扩展方法....假设没有您想要访问的 Master 成员

或者你可以让Master继承Form，然后让b继承Master

# javascript - Javascript - 如何返回我居住的时间？

> ID：10792291
> 
> 赞同：0
> 
> 时间：2012-05-29T02:00:24.980
> 
> 标签：javascript, date, time, timezone

所以我在做codecademy，我现在的部分希望你返回当前时间并根据当前时间显示不同的消息。

您可以随时通过，但我宁愿将其配置为我的时区，甚至如果有人知道，访问网页的人所在的时区甚至更多。

目前我有这个。

```
var d = new Date();
console.log(d); 
```

这将打印 GMT 时间。

我想要的是 GMT +10。

我知道有一个函数可以返回您的时区

```
var n = d.getTimezoneOffset(); 
```

但我不太确定如何让它与 Date 函数交互，以便它打印这个时区的时间。

谢谢！

问候，

马特

**已解决：**是 codecademy 中的一个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T02:17:12.387

使用日期方法。

[https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date)

例如，`d.getDate()`将返回本地日期，而`d.getUTCDate()`将返回基于 GMT 的日期。

# objective-c - 动画后旋转

> ID：10792300
> 
> 赞同：0
> 
> 时间：2012-05-29T02:02:08.853
> 
> 标签：objective-c, ios

我有一个 UIViewController 子类，它可以显示动画（主要是改变 imageview 子视图上的 alpha）。如果在设备旋转时出现动画，我希望在当前动画块完成后出现旋转动画。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T03:17:27.867

当您调用为图像设置动画的方法时，将某个 BOOLean 值设置为 NO 并有条件地允许该`-shouldAutorotateToInterfaceOrientation`方法中的旋转。像这样的东西：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {

    if (!someBool)
        return NO;
    return YES;
} 
```

# objective-c - 如何获取字符串的子字符串

> ID：10792306
> 
> 赞同：-4
> 
> 时间：2012-05-29T02:03:40.910
> 
> 标签：objective-c, ios

> **可能重复：**
> [如何获取 nsstring 的子字符串？](https://stackoverflow.com/questions/5676106/how-to-get-substring-of-nsstring)
> [如何在 iOS 中获取子字符串？](https://stackoverflow.com/questions/8330663/how-do-i-get-a-substring-in-ios)

我是 iphone 新手。在我的项目中，我有一个字符串，例如第 1 章，但实际上我只想要子字符串 1 怎么可能。如果有人知道这一点，请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T02:11:24.543

查看 NSString 的`substringFromIndex:`or`substringToIndex:`方法。[您可以在此处](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)找到 NSString 的文档。

前任：

```
 NSString *string = @"Chapter1";  
  NSString *newString = [string subStringFromIndex: ([string length] - 1)]; // => "1" 
```

# asp.net - 从 CK 编辑器解析内容

> ID：10792310
> 
> 赞同：0
> 
> 时间：2012-05-29T02:04:24.537
> 
> 标签：asp.net, ckeditor

我的应用程序是一个asp.net C#：我使用CK Editor 编辑一篇文章，然后插入到SQL 数据库。现在我想将这篇文章导出到 docx 文件。所有功能都运行良好，但在 docx 文件中导出后的文章内容如下：

```
<ul>
    <li style="text-align: justify;">
        Đối với t&ocirc;i, kh&oacute;a huấn luyện vừa qua rất bỗ &iacute;ch t&ocirc;i đ&atilde; học được rất nhiều kiến thực v&agrave; gi&aacute; trị thiết thực, bổ &iacute;ch cho c&ocirc;ng việc của t&ocirc;i .</li>
</ul>
<ul>
    <li style="text-align: justify;">
        Hỗ trợ ứng dụng tiếp theo &quot;9 nguy&ecirc;n tắc .</li>
</ul> 
```

如何纠正它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T04:37:20.237

我用 HtmlAgilityPack 和 HtmlDecode 解决了它

```
string content;
var htmldocs = new HtmlAgilityPack.HtmlDocument
            {
                OptionFixNestedTags = true,
                OptionAutoCloseOnEnd = true
            };
            htmldocs.LoadHtml(content);
string convert = WebUtility.HtmlDecode(htmldocs.DocumentNode.InnerText); 
```

# c# - 无法将类型字符串隐式转换为字节 []

> ID：10792315
> 
> 赞同：8
> 
> 时间：2012-05-29T02:05:51.323
> 
> 标签：c#, string, c#-4.0, encoding

我有一个用加盐哈希加密密码的类。

但是，如果我想将 null 传递给类，则会收到以下错误：`Cannot implicitly convert type string to byte[]`

这是课程代码：

```
public class MyHash
{
    public static string ComputeHash(string plainText, 
                            string hashAlgorithm, byte[] saltBytes)
    {
        Hash Code
    }
} 
```

当我使用该类时，出现错误：“无法将类型字符串隐式转换为字节 []”

```
//Encrypt Password
byte[] NoHash = null;
byte[] encds = MyHash.ComputeHash(Password, "SHA256", NoHash); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-29T02:09:34.167

这是因为您的“ComputeHash”方法返回一个字符串，并且您试图将此返回值分配给一个字节数组；

```
byte[] encds = MyHash.ComputeHash(Password, "SHA256", NoHash); 
```

字符串到 byte[]没有*隐式*转换，因为存在许多不同的编码来将字符串表示为字节，例如 ASCII 或 UTF8。

您需要像这样使用适当的编码类**显式转换字节；**

```
string x = "somestring";
byte[] y = System.Text.Encoding.UTF8.GetBytes(x); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T02:09:43.827

`ComputeHash`您的函数的返回类型是 a `string`。您尝试将函数的结果分配给`encds`，即`byte[]`。编译器会向您指出这种差异，因为没有从`string`to的隐式转换`byte[]`。

# c# - 使用变换旋转时防止图像裁剪

> ID：10792322
> 
> 赞同：0
> 
> 时间：2012-05-29T02:07:00.443
> 
> 标签：c#, silverlight, image, xaml

我正在将 XAML 绑定到`RotateAngle`属性，并且它与一个“但是”配合得很好。图像显示被裁剪。旋转后图像控件似乎没有刷新/调整大小。有没有办法强制调整图像和滚动查看器的大小？

```
<ScrollViewer Grid.Row="1" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" VerticalScrollBarVisibility="Auto" BorderThickness="0" HorizontalScrollBarVisibility="Auto">
            <Image 
                VerticalAlignment="Stretch" HorizontalAlignment="Stretch"  
                Source="{Binding Input, Converter={StaticResource ByteArrayToBitmapConverter}}"
                RenderTransformOrigin="0.5,0.5">
                <Image.RenderTransform>
                    <RotateTransform Angle="{Binding RotateAngle}"></RotateTransform>
                </Image.RenderTransform>
            </Image>
        </ScrollViewer> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T05:42:11.120

[http://www.silverlight.net/content/samples/sl3/toolkitcontrolsamples/run/default.html](http://www.silverlight.net/content/samples/sl3/toolkitcontrolsamples/run/default.html)

转到这个页面，有一个控件叫LayoutTransformer。请参阅该控件的示例。它处理图像、文本框、列表框等的旋转、缩放和倾斜。您将在那里获得代码。希望有帮助。！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T06:50:13.613

You can try:

```
<Image x:name="ctrl"
                VerticalAlignment="Stretch" HorizontalAlignment="Stretch"  
                Source="{Binding Input, Converter={StaticResource ByteArrayToBitmapConverter}}"
                RenderTransformOrigin="0.5,0.5">
                <Image.RenderTransform>
                    <RotateTransform Angle="{Binding DataContext.RotateAngle, ElementName=ctrl}"></RotateTransform>
                </Image.RenderTransform>
            </Image> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T06:56:49.190

或者您可以使用：

```
<Image 
                VerticalAlignment="Stretch" HorizontalAlignment="Stretch"  
                Source="{Binding Input, Converter={StaticResource ByteArrayToBitmapConverter}}"
                RenderTransformOrigin="0.5,0.5">
                <Image.RenderTransform>
                    <RotateTransform Angle="{Binding DataContext.RotateAngle, RelativeSource={RelativeSource Self}}"></RotateTransform>
                </Image.RenderTransform>
            </Image> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T10:04:37.467

假设您想缩小图像以适应原始图像空间，您可以使用我的`CalculateConstraintScale`方法从这里： [Silverlight Rotate & Scale a bitmap image to fit in rectangle without cropping](https://stackoverflow.com/questions/6801546/silverlight-rotate-scale-a-bitmap-image-to-fit-within-rectangle-without-croppi/6802332#6802332) to scale the image based on the rotation.

[单击此处查看为该答案创建的工作测试平台应用程序](http://blog.hitechmagic.com/?p=458)（如下图所示）：

![示例应用图像](../Images/b8472b6710b36e43231225530dedc5ea.png)

# php - 在 PHP 中设置为“&NULL”的变量是什么意思？

> ID：10792325
> 
> 赞同：1
> 
> 时间：2012-05-29T02:07:19.413
> 
> 标签：php, null

我正在研究 PHP 中的树结构。在遍历节点时，有时会抛出异常，因为某些不应为 null 的节点为 null，更准确地说，它设置为“&NULL”：

```
array(13) {
  // ...
  // some data...
  // ...
  ["segments"]=>
  NULL
  ["leaf"]=>
  bool(false)
  ["children"]=>
  &NULL
} 
```

由于它不在引号内，我认为它是某种特殊值，但它是什么意思？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T02:10:00.340

它只是意味着它是对一个值的引用`NULL`

```
$a = array();

$n = null;
$a[1] =& $n;

var_dump($a); // array(1) { [1]=> &NULL } 
```

如果你`$n = null;`改为`$n = 1;`- 那么你会得到`&int(1)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T02:11:45.463

它是对空值的引用。“&”是参考符号。

# language-agnostic - 识别图像时神经网络决策过程的任何可视化？

> ID：10792328
> 
> 赞同：9
> 
> 时间：2012-05-29T02:08:01.970
> 
> 标签：language-agnostic, machine-learning, neural-network, ocr, image-recognition

我注册了[Coursera ML 课程](https://class.coursera.org/ml)，并且刚刚开始学习神经网络。

真正让我感到困惑的一件事是，一旦你找到了线性组合的合适权重，如何识别如此“人性化”的东西，比如手写数字，就变得容易了。

更疯狂的是，当您了解到可以通过为线性组合找到一些*非常好的*参数并将它们组合并相互馈送来识别看似抽象的事物（例如汽车）时，就更疯狂了。

线性组合的组合比我曾经想象的更容易表达。
这让我想知道是否可以可视化 NN 的决策过程，至少在简单的情况下是这样。

例如，如果我的输入是 20x20 灰度图像（即总共 400 个特征）并且输出是对应于已识别数字的 10 个类别之一，我希望看到某种视觉解释，说明**哪些线性组合级联导致 NN结论。**

![在此处输入图像描述](../Images/14400642ad729d246d8dd806f6a803cb.png)

我天真地想象这可以作为被识别图像上的视觉提示来实现，可能是显示“对决策影响最大的像素”的温度图，或者任何有助于理解神经网络在特定情况下如何工作的东西。

是否有一些神经网络演示可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T08:59:35.200

这不是您问题的直接答案。我建议你看看卷积神经网络（CNN）。在 CNN 中，您几乎可以看到学到的概念。您应该阅读本出版物：

Y. LeCun、L. Bottou、Y. Bengio 和 P. Haffner：[基于梯度的学习应用于文档识别](http://yann.lecun.com/exdb/publis/pdf/lecun-98.pdf)，IEEE 会议记录，86(11):2278-2324，1998 年 11 月

CNN 通常被称为“可训练的特征提取器”。事实上，CNN 实现了具有可训练系数的 2D 滤波器。这就是为什么第一层的激活通常显示为 2D 图像（见图 13）。在本文中，作者使用另一个技巧使网络更加透明：最后一层是径向基函数层（具有高斯函数），即计算每个类到（可调整）原型的距离。通过查看最后一层的参数，您可以真正看到学习到的概念（见图 3）。

然而，CNN 是人工神经网络。但是这些层没有完全连接，并且一些神经元共享相同的权重。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T08:45:36.310

也许它不能直接回答这个问题，但我在这篇[Andrew Ng、Jeff Dean、Quoc Le、Marc'Aurelio Ranzato、Rajat Monga、Matthieu Devin、Kai Chen 和 Greg Corrado 的论文](http://research.google.com/pubs/pub38115.html)中发现了这篇有趣的文章（重点是我的）：

> 在本节中，我们将介绍两种可视化技术来验证神经元的最佳刺激是否确实是一张脸。第一种方法是**可视化测试集中最敏感的刺激**。由于测试集很大，该方法可以可靠地检测到被测神经元的接近最优刺激。第二种方法是进行数值优化以**找到最佳刺激**
> 
> ...
> 
> 这些可视化方法具有互补的优势和劣势。例如，可视化最敏感的刺激可能会因适应噪声而受到影响。另一方面，数值优化方法容易受到局部最小值的影响。结果如下所示，证实了被测试的神经元确实学习了人脸的概念。

![在此处输入图像描述](../Images/b78539328613f5d128c869825691a16d.png)

换句话说，他们采用了一个在识别面部和

*   从数据集中选择图像，使其输出最高置信度；
*   以数学方式找到可以得到最高置信度的图像（不在数据集中）。

有趣的是，它实际上“捕捉”了人脸的特征。
学习是**无监督**的，即输入数据没有说明图像是否是人脸。

有趣的是，这里生成了猫头和人体的“最佳输入”图像：

![在此处输入图像描述](../Images/45dbfcd097e3aa1db0b8e74615845032.png)

# php - 如何删除memcached中具有相同前缀键的项目？

> ID：10792338
> 
> 赞同：29
> 
> 时间：2012-05-29T02:09:13.143
> 
> 标签：php, memcached, prefix

例如，我有一些具有相同前缀的缓存项，例如

```
'app_111111', 'app_222222', 'app_333333', ... 
```

我可以通过任何 memcached 命令删除此类“app_xxxxxx”项目吗？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-05-29T02:13:16.257

Memcached 不提供开箱即用的此功能，因此您必须自己构建它。

我解决这个问题的方法是在我的应用程序中为键组定义一个前缀（或命名空间）。我在 memcached 中设置的任何键前面都有该前缀。每当我想从 Memcached 中“删除”内容时，我只需更改前缀即可。每当我想在 Memcached 中查找一个键时，我都会在其中添加该前缀。

在您的情况下，您可以首先将前缀设置为 , `MyAppPrefix1`，这样您的密钥将存储为`MyAppPrefix1::app_333333`, `MyAppPrefix1::app_444444`。

稍后当您想要“删除”这些条目时，请将您的应用程序设置为使用`MyAppPrefix2`. 然后，当您尝试从 Memcached 中获取一个名为 的密钥时`app_333333`，它会`MyAppPrefix2::app_333333`在第一次查找但不会找到它，就好像它已被删除一样。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-08-06T18:50:14.583

这个函数在php中怎么样：

```
function deletekeysbyindex($prefix) {
    $m = new Memcached();
    $m->addServer('localhost', 11211);
    $keys = $m->getAllKeys();
    foreach ($keys as $index => $key) {
        if (strpos($key,$prefix) !== 0) {
            unset($keys[$index]);
        } else {
            $m->delete($key);
        }
    }
    return $keys;
} 
```

删除以 $prefix 开头的键并返回所有已删除键的列表。我刚才在共享服务器上运行了 30,000 多个密钥，而且速度非常快 - 可能不到一秒。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-13T16:43:23.193

这是一个有效的技巧，虽然有点慢。在拥有 60 万个密钥的服务器上，完成需要半秒。

```
 $prefix = 'MyApp::Test';
    $len = strlen($prefix);

    $proc = popen('/usr/local/bin/memdump --servers=localhost', 'r');
    while (($key = fgets($proc)) !== false) {
        if (substr_compare($key, $prefix, 0, $len) === 0) {
            $memcached->delete(substr($key, 0, -1));
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-07T02:39:19.690

我们不能只在一个对 memcache 的请求中做到这一点。我们只能这样做：

```
public function clearByPrefix($prefixes = array()) {
    $prefixes = array_unique($prefixes);

    $slabs = $this->memcache->getExtendedStats('slabs');
    foreach ($slabs as $serverSlabs) {
        if ($serverSlabs) {
            foreach ($serverSlabs as $slabId => $slabMeta) {
                if (is_int($slabId)) {
                    try {
                        $cacheDump = $this->memcache->getExtendedStats('cachedump', (int) $slabId, 1000);
                    } catch (Exception $e) {
                        continue;
                    }

                    if (is_array($cacheDump)) {
                        foreach ($cacheDump as $dump) {
                            if (is_array($dump)) {
                                foreach ($dump as $key => $value) {

                                    $clearFlag = false;
                                    // Check key has prefix or not
                                    foreach ($prefixes as $prefix) {
                                        $clearFlag = $clearFlag || preg_match('/^' . preg_quote($prefix, '/') . '/', $key);
                                    }
                                    // Clear cache
                                    if ($clearFlag) {
                                        $this->clear($key);
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
} 
```

并像这样调用这个函数：

```
 $prefixes = array();

        array_push($prefixes, 'prefix1_');
        array_push($prefixes, 'prefix2_');
        array_push($prefixes, 'prefix3_');

        $this->clearByPrefix($prefixes); 
```

# objective-c - AVFoundation 文档代码

> ID：10792342
> 
> 赞同：0
> 
> 时间：2012-05-29T02:09:36.333
> 
> 标签：objective-c, macos, cocoa, osx-lion, avfoundation

我正在阅读有关`AVFoundation`框架的 Apple 文档。我希望我的 Cocoa 应用程序中的 NSView 在我的应用程序中播放视频。这是一个类似于苹果在其应用程序中提供的教程视频。

我的问题是，在阅读本文档时...

[AVFoundation 编程指南](http://developer.apple.com/library/mac/#documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/02_Playback.html#//apple_ref/doc/uid/TP40010188-CH3-SW2)

提到的大多数类都与 iOS 相关，例如...`PlayerView`扩展自`UIView`.

现在，在我编写代码之前，我想问一下我是否应该使用 Cocoa App 的相同示例代码来制作应用程序，我应该读`UIView`为`NSView`？那是解决方案吗？

我没有尝试过，因为它有很多代码，我认为在开始编码之前最好理解它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T05:43:53.453

在这个特定示例中，您应该可以将 UIView 替换为 NSView 并进行一些小的更改，因为看起来很多工作都在视图层上完成，这是 AppKit 以及 NSView 的 UIKit 中存在的属性UIIView 分别。

我不确定您的总体目标是什么，但是只要您不打算逐行复制文档行，就可以了；即你可能需要做一些小的改变。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T15:12:45.677

听起来您想要一个加载了视频的简单 QTMovieView 来播放

# sql-server - JDBC 使用非标准端口连接到 MSSQL 命名实例

> ID：10792348
> 
> 赞同：1
> 
> 时间：2012-05-29T02:10:19.237
> 
> 标签：sql-server, jdbc, sql-server-2008-r2, jira, windows-server-2008-r2

大家好，我正在做一个项目，我正在尝试将[JIRA](http://www.atlassian.com/software/jira/overview)连接到一个 MSSQL 别名或命名实例。如果您不知道我在说什么，请[在这里](http://www.databasejournal.com/features/mssql/article.php/3689846/Using-Non-Standard-Port-for-SQL-Server.htm)结帐。

例如，在此设置下，当您想连接到特定的数据库服务器时，假设使用 SQL Studio，您必须使用反映数据库实例的 mssql 服务器别名配置中的“servername,port”。

在这种情况下使用什么连接字符串？

当我使用 JDBC 驱动程序（JIRA 使用它）时，我已经[阅读](http://blogs.msdn.com/b/dataaccesstechnologies/archive/2010/03/03/running-sql-server-default-instance-on-a-non-default-or-non-standard-tcp-port-tips-for-making-application-connectivity-work.aspx)了有关这种设置的问题。您可以尝试使用[SQuirreL](http://squirrel-sql.sourceforge.net/)进行测试，因为它使用相同的驱动程序。

干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T13:16:44.643

对于 SQL Server JDBC，您可以连接到命名实例或特定端口。如果同时指定命名实例和端口，它将忽略实例名称。

如果要连接到不在默认端口上运行的命名实例，则需要在服务器上运行**SQL Server Browser**服务，这允许 JDBC 驱动程序根据实例名称查找正确的端口。我相信默认情况下此服务已禁用。

# android - 在 Android MapView 中绘制形状与缩放级别无关

> ID：10792349
> 
> 赞同：8
> 
> 时间：2012-05-29T02:10:23.753
> 
> 标签：android, google-maps, android-mapview, android-canvas, android-maps

我需要使用 Android 的 MapView 绘制形状，就像您在 Google 地图上使用**自定义地图创建的形状一样。**

换句话说，如果我在地图上绘制一个形状，当我缩小它时，它应该会缩小，覆盖地图的同一区域，而不管缩放级别如何。

Android参考之后的示例：

```
 @Override
  public boolean draw(Canvas canvas, MapView mapView, boolean shadow, long when)
  {
      super.draw(canvas, mapView, shadow);

      //---translate the GeoPoint to screen pixels---
      Point screenPts = new Point();
      mapView.getProjection().toPixels(p, screenPts);

      Paint boxPaint = new Paint();
      boxPaint.setColor(android.graphics.Color.WHITE);
      boxPaint.setStyle(Paint.Style.FILL);
      boxPaint.setAlpha(140);
      canvas.drawCircle(screenPts.x, screenPts.y, 20, boxPaint);

      return true;
  } 
```

这会在地图上显示一个白色圆圈，但如果您缩小，圆圈大小相同。也许使用画布不是正确的方法？

> 我需要类似谷歌地图如何突出街区或城市的东西：
> 
> ![谷歌地图显示了纽约下东区的搜索结果](../Images/39c6ef980436df82afac10031645fa8e.png)

有任何想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T23:41:33.833

我自己也遇到了同样的问题，这是一个带有演示位置的完整解决方案：

```
import java.util.*;

import android.graphics.*;
import android.graphics.Paint.Style;
import android.graphics.Region.Op;
import android.os.Bundle;

import com.google.android.maps.*;

public class ShapeOverlayTest extends MapActivity {
    private MapView m_map;

    @Override
    public void onCreate(final Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        m_map = (MapView) findViewById(R.id.mapview);
        m_map.displayZoomControls(true);
        m_map.setBuiltInZoomControls(true);
    }

    @Override
    protected void onStart() {
        super.onStart();

        Loc[][] areas = {
            {
            new Loc(51.51695436113811, -0.28686325139653757),
            new Loc(51.5268179962453, -0.28118722558738923),
            new Loc(51.526498459594215, -0.27779666308279755),
            new Loc(51.52521530775356, -0.26943974607777654),
            new Loc(51.52292555645698, -0.25813738590178786),
            new Loc(51.52054465991048, -0.2498381618983569),
            new Loc(51.51012230470141, -0.24509233633017083),
            new Loc(51.50884762913046, -0.24465130560570497),
            new Loc(51.50732063336974, -0.2441767643132881),
            new Loc(51.50431624597833, -0.24473900326760137),
            new Loc(51.49756328092904, -0.2714528238165076),
            new Loc(51.50092541797557, -0.28360267232347336),
            new Loc(51.50205958485736, -0.28490018935582045),
            new Loc(51.50488447379555, -0.28681164237730944)
            },
            {
            new Loc(51.50368617913765, -0.25313579464343156),
            new Loc(51.51978611305675, -0.24842567405905958),
            new Loc(51.51039382684418, -0.24460628015366626),
            new Loc(51.508792552597576, -0.24397604687682156),
            new Loc(51.50713008309719, -0.24346350415674722),
            new Loc(51.502411013302684, -0.2508501075008919),
            new Loc(51.502377240039664, -0.25160073203846817),
            new Loc(51.50274364303565, -0.25204783703705536)
            },
            {
            new Loc(51.49924084955314, -0.2858705706471945),
            new Loc(51.50212820259818, -0.2791479893522646),
            new Loc(51.49724510427319, -0.27427453152961206),
            new Loc(51.49429724502515, -0.2799184038304611),
            new Loc(51.494270969987404, -0.28180678948730314)
            }
        };
        String[] areaNames = { "W3 Ealing", "W3 Hammersmith & Fulham", "W3 Hounslow" };

        // for (Map.Entry<String, List<Loc>> area : m_areas.entrySet()) {
        // // to have much less points and make sure they are in order
        // // the demo data already has these properties
        // // http://en.wikipedia.org/wiki/Gift_wrapping_algorithm#Pseudocode
        // area.setValue(Algo.convexHull(area.getValue()));
        // }

        Map<String, List<GeoPoint>> areaMap = new HashMap<String, List<GeoPoint>>();
        for (int i = 0; i < areaNames.length; i++) {
            List<GeoPoint> points = new ArrayList<GeoPoint>();
            for (int j = 0; j < areas[i].length; j++) {
                points.add(areas[i][j].toGeoPoint());
            }
            areaMap.put(areaNames[i], points);
        }
        m_map.getOverlays().add(new AreasOverlay(areaMap));

        // TODO determine location better, e.g. averaging area points
        GeoPoint center = new GeoPoint(51509704, -270710);
        m_map.getController().setCenter(center);
        m_map.getController().setZoom(15);
    }

    @Override
    protected boolean isRouteDisplayed() {
        return false;
    }

    static class Loc {
        private double  m_lat;
        private double  m_lon;

        public Loc(final double lat, final double lon) {
            m_lat = lat;
            m_lon = lon;
        }

        public GeoPoint toGeoPoint() {
            return new GeoPoint((int) (m_lat * 1e6), (int) (m_lon * 1e6));
        }
    };

    static class AreasOverlay extends Overlay {
        private final Map<String, List<GeoPoint>> m_areas;
        private final Paint m_paintFill;
        private final Paint m_paintStroke;
        private static final int ALPHA = 0x30ffffff; // 48 out of 255 transparent
        private static final int[] COLORS =
        { Color.YELLOW, Color.MAGENTA, Color.CYAN, Color.RED, Color.GREEN, Color.BLUE };
        static {
            for (int i = 0; i < AreasOverlay.COLORS.length; i++) {
                AreasOverlay.COLORS[i] &= AreasOverlay.ALPHA;
            }
        }

        public AreasOverlay(final Map<String, List<GeoPoint>> areaMap) {
            m_areas = areaMap;

            // prepare paints
            m_paintFill = new Paint();
            m_paintFill.setStyle(Paint.Style.FILL);
            m_paintStroke = new Paint(Paint.ANTI_ALIAS_FLAG);
            m_paintStroke.setStyle(Style.STROKE);
            m_paintStroke.setAntiAlias(true);
            m_paintStroke.setStrokeWidth(3);
        }

        @Override
        public void draw(final Canvas canvas, final MapView mapView, final boolean shadow) {
            super.draw(canvas, mapView, shadow);
            if (shadow) {
                return;
            }
            Projection projection = mapView.getProjection();

            List<Path> areaPaths = getPaths(projection, m_areas);
            drawPaths(canvas, areaPaths);
        }

        private List<Path> getPaths(final Projection projection, final Map<String, List<GeoPoint>> areas) {
            List<Path> areaPaths = new ArrayList<Path>(areas.size());
            for (Map.Entry<String, List<GeoPoint>> entry : areas.entrySet()) {
                List<GeoPoint> sourceList = entry.getValue();
                Path path = new Path();
                path.setFillType(Path.FillType.EVEN_ODD);
                Iterator<GeoPoint> it = sourceList.iterator();
                Point point = nextDrawPoint(projection, it);
                path.moveTo(point.x, point.y);
                while (it.hasNext()) {
                    point = nextDrawPoint(projection, it);
                    path.lineTo(point.x, point.y);
                }
                path.close();
                areaPaths.add(path);
            }
            return areaPaths;
        }

        /**
         * <ul>
         * <li>Draw with different colors.
         * <li>Draw strokes first for them to be always visible.
         * <li>Draw fills next with each removing from the drawable area.
         * </ul>
         */
        private void drawPaths(final Canvas canvas, final List<Path> areaPaths) {
            int currentColorIndex;

            currentColorIndex = 0;
            for (Path path : areaPaths) {
                int currentColor = AreasOverlay.COLORS[currentColorIndex++];
                currentColorIndex %= AreasOverlay.COLORS.length;
                m_paintStroke.setColor(currentColor & 0xff7f7f7f); // make it darker by clearing the high bit
                canvas.drawPath(path, m_paintStroke);
            }
            currentColorIndex = 0;
            for (Path path : areaPaths) {
                int currentColor = AreasOverlay.COLORS[currentColorIndex++];
                currentColorIndex %= AreasOverlay.COLORS.length;
                m_paintFill.setColor(currentColor);
                canvas.drawPath(path, m_paintFill);
                canvas.clipPath(path, Op.DIFFERENCE); // don't allow to draw over each other
            }
        }

        private Point nextDrawPoint(final Projection projection, final Iterator<GeoPoint> it) {
            GeoPoint geo = it.next();
            Point p = new Point();
            projection.toPixels(geo, p);
            return p;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-30T13:17:16.773

drawCircle 的半径以像素为单位，因此圆的大小始终相同是有意义的。您必须根据缩放级别缩放半径。下面的示例将绘制来自 JTS 拓扑套件的几何图形，该几何图形将缩放。

```
public class MapOverlay extends Overlay {
    private static final String TAG = MapOverlay.class.getName();

    // Allocate once and reuse
    private final Paint mPaint = new Paint();
    private final Path mPath = new Path();

    // Region to highlight
    private Geometry mGeometry;

    /**
     * @param  geometry Region to highlight on map
     */
    public MapOverlay(Geometry geometry) {
            // Set region
            mGeometry = geometry;

            // Edit paint style
            mPaint.setDither(true);
            mPaint.setColor(Color.rgb(128, 136, 231));
            mPaint.setAlpha(100);
            mPaint.setStyle(Paint.Style.FILL_AND_STROKE);
            mPaint.setStrokeJoin(Paint.Join.ROUND);
            mPaint.setStrokeCap(Paint.Cap.ROUND);
            mPaint.setStrokeWidth(6);
    }

    /**
     * Draw the overlay over the map.
     * 
     * @see com.google.android.maps.Overlay#draw(Canvas, MapView, boolean)
     */
    @Override
    public void draw(Canvas canvas, MapView mapv, boolean shadow) {
            super.draw(canvas, mapv, shadow);

            if (mGeometry != null) {
                    // TODO There could be more than one geometries  
                    Geometry g = mGeometry.getGeometryN(0);
                    final Point p = new Point();
                    boolean first = true;

                    mPath.reset();
                    for (Coordinate c : g.getCoordinates()) {
                            // Convert lat/lon to pixels on screen
                            // GeoPoint is immutable so allocation is unavoidable
                            Projection projection = mapv.getProjection();
                            projection.toPixels(new GeoPoint((int) (c.y * 1E6), (int) (c.x * 1E6)), p);

                            // Set path starting point to first coordinate
                            // otherwise default start is (0,0)
                            if (first) {
                                    mPath.moveTo(p.x, p.y);
                                    first = false;
                            }

                            // Add new point to path
                            mPath.lineTo(p.x, p.y);
                    }
            }

            // Draw the path with give paint
            canvas.drawPath(mPath, mPaint);
    } 
```

改编自这里：[MapSelectionOverlay.java](http://code.google.com/p/spatialite-android/source/browse/spatialite-android/src/com/spatialite/activities/MapSelectionOverlay.java)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T07:24:55.730

这可能是您正在寻找的：[“叠加”大小可以与 android 上的谷歌地图一起缩放吗？](https://stackoverflow.com/questions/6599307/can-overlay-size-be-zoomed-together-with-the-google-map-on-android)

```
public class ImpactOverlay extends Overlay {

private static int CIRCLERADIUS = 0;
private GeoPoint geopoint;

public ImpactOverlay(GeoPoint point, int myRadius) {
    geopoint = point;
    CIRCLERADIUS = myRadius;
}

@Override
public void draw(Canvas canvas, MapView mapView, boolean shadow) {
    // Transfrom geoposition to Point on canvas
    Projection projection = mapView.getProjection();
    Point point = new Point();
    projection.toPixels(geopoint, point);

    // the circle to mark the spot
    Paint circle = new Paint();
    circle.setColor(Color.BLACK);
    int myCircleRadius = metersToRadius(CIRCLERADIUS, mapView, (double)geopoint.getLatitudeE6()/1000000);
    canvas.drawCircle(point.x, point.y, myCircleRadius, circle);
}

public static int metersToRadius(float meters, MapView map, double latitude) {
    return (int) (map.getProjection().metersToEquatorPixels(meters) * (1/ Math.cos(Math.toRadians(latitude))));         
}
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-24T12:43:38.737

您需要的是要在地图上绘制的每个形状的纬度/经度点列表。在 onDraw 方法中，您需要遍历该列表（对于要绘制的每个形状），然后执行以下操作：

```
//---translate the GeoPoint to screen pixels---
  Point screenPts = new Point();
  mapView.getProjection().toPixels(p, screenPts); 
```

然后在画布上绘制形状。无论缩放如何，IIRC 都能正常工作，因为 mapView 知道缩放级别，并在该缩放级别为您提供纬度/经度对的适当像素位置。

# java - android标签布局问题

> ID：10792352
> 
> 赞同：1
> 
> 时间：2012-05-29T02:10:51.043
> 
> 标签：java, android

我正在android中制作标签布局。我在这一行收到 RuntimeException 错误`tabHost.addTab(spec);`。我在哪里犯错？

仪表板活动

```
public class DashboardActivity extends TabActivity {
Button btnLogout;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.dashboard);
    btnLogout = (Button)findViewById(R.id.btnLogout);

    Resources res = getResources(); // Resource object to get Drawables
    TabHost tabHost = getTabHost();  // The activity TabHost
    TabHost.TabSpec spec;  // Resusable TabSpec for each tab
    Intent intent;  // Reusable Intent for each tab

    //Artist Tab
    intent = new Intent(this, Artists.class);
    spec = tabHost.newTabSpec("artists").setIndicator("Artist", res.getDrawable(R.drawable.tab_icon)).setContent(intent);
    tabHost.addTab(spec);

    //Songs
    intent = new Intent(this, Songs.class);
    spec = tabHost.newTabSpec("songs").setIndicator("Songs", res.getDrawable(R.drawable.tab_icon)).setContent(intent);
    tabHost.addTab(spec);

    //Albums
    intent = new Intent(this, Album.class);
    spec = tabHost.newTabSpec("artists").setIndicator("Artist", res.getDrawable(R.drawable.tab_icon)).setContent(intent);
    tabHost.addTab(spec);

    //tabHost.setCurrentTab(1);
    btnLogout.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent i = new Intent(getApplicationContext(), LoginActivity.class);
            startActivity(i);
            finish();
        }
    });
}   

} 
```

这是我的dashboard.xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@android:id/tabhost"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TabWidget
        android:id="@android:id/tabs"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >
    </TabWidget>

    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >
    </FrameLayout>

</LinearLayout>

<TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="20dip"
        android:gravity="center"
        android:text="WELCOME"
        android:textSize="40dip" />

    <Button
        android:id="@+id/btnLogout"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="80dip"
        android:background="@null"
        android:text="Logout Me"
        android:textColor="#21dbd4"
        android:textSize="20dip"
        android:textStyle="bold" />

</TabHost> 
```

这是我的 logcat 输出

```
05-29 05:02:12.556: D/dalvikvm(27476): GC_EXTERNAL_ALLOC freed 40K, 50% free 2725K/5379K, external 0K/0K, paused 121ms
05-29 05:02:12.636: D/dalvikvm(27476): GC_EXTERNAL_ALLOC freed 7K, 50% free 2743K/5379K, external 455K/518K, paused 25ms
05-29 05:02:12.781: D/CLIPBOARD(27476): Hide Clipboard dialog at Starting input: finished by someone else... !
05-29 05:02:34.136: D/dalvikvm(27476): GC_CONCURRENT freed 117K, 46% free 3054K/5639K, external 327K/661K, paused 7ms+2ms
05-29 05:02:34.151: D/AndroidRuntime(27476): Shutting down VM
05-29 05:02:34.151: W/dalvikvm(27476): threadid=1: thread exiting with uncaught exception (group=0x4001e578)
05-29 05:02:34.156: E/AndroidRuntime(27476): FATAL EXCEPTION: main
05-29 05:02:34.156: E/AndroidRuntime(27476): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.zafar.login/com.zafar.login.DashboardActivity}: android.content.ActivityNotFoundException: Unable to find explicit activity class {com.zafar.login/com.zafar.login.Artists}; have you declared this activity in your AndroidManifest.xml?
05-29 05:02:34.156: E/AndroidRuntime(27476):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
05-29 05:02:34.156: E/AndroidRuntime(27476):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
05-29 05:02:34.156: E/AndroidRuntime(27476):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
05-29 05:02:34.156: E/AndroidRuntime(27476):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
05-29 05:02:34.156: E/AndroidRuntime(27476):    at android.os.Handler.dispatchMessage(Handler.java:99)
05-29 05:02:34.156: E/AndroidRuntime(27476):    at android.os.Looper.loop(Looper.java:130)
05-29 05:02:34.156: E/AndroidRuntime(27476):    at android.app.ActivityThread.main(ActivityThread.java:3691)
05-29 05:02:34.156: E/AndroidRuntime(27476):    at java.lang.reflect.Method.invokeNative(Native Method)
05-29 05:02:34.156: E/AndroidRuntime(27476):    at java.lang.reflect.Method.invoke(Method.java:507)
05-29 05:02:34.156: E/AndroidRuntime(27476):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
05-29 05:02:34.156: E/AndroidRuntime(27476):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
05-29 05:02:34.156: E/AndroidRuntime(27476):    at dalvik.system.NativeStart.main(Native Method)
05-29 05:02:34.156: E/AndroidRuntime(27476): Caused by: android.content.ActivityNotFoundException: Unable to find explicit activity class {com.zafar.login/com.zafar.login.Artists}; have you declared this activity in your AndroidManifest.xml?
05-29 05:02:34.156: E/AndroidRuntime(27476):    at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1405)
05-29 05:02:34.156: E/AndroidRuntime(27476):    at android.app.ActivityThread.resolveActivityInfo(ActivityThread.java:1461)
05-29 05:02:34.156: E/AndroidRuntime(27476):    at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:277)
05-29 05:02:34.156: E/AndroidRuntime(27476):    at android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:691)
05-29 05:02:34.156: E/AndroidRuntime(27476):    at android.widget.TabHost.setCurrentTab(TabHost.java:341)
05-29 05:02:34.156: E/AndroidRuntime(27476):    at android.widget.TabHost.addTab(TabHost.java:226)
05-29 05:02:34.156: E/AndroidRuntime(27476):    at com.zafar.login.DashboardActivity.onCreate(DashboardActivity.java:29)
05-29 05:02:34.156: E/AndroidRuntime(27476):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-29 05:02:34.156: E/AndroidRuntime(27476):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
05-29 05:02:34.156: E/AndroidRuntime(27476):    ... 11 more
05-29 05:02:40.606: I/Process(27476): Sending signal. PID: 27476 SIG: 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T02:29:23.190

您的日志显示错误

`05-29 05:02:34.156: E/AndroidRuntime(27476): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.zafar.login/com.zafar.login.DashboardActivity}: android.content.ActivityNotFoundException: Unable to find explicit activity class {com.zafar.login/com.zafar.login.Artists}; have you declared this activity in your AndroidManifest.xml?`

您是否在 Manifest 中声明了**Artists活动？**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T03:09:08.947

您需要在文件中声明您`Activity`的 s 。`AndroidManifest.xml`

```
<activity 
    android:name="com.zafar.login.DashboardActivity" 
    android:label="@string/app_name">
</activity> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T05:18:38.123

在清单文件中声明艺术家、歌曲和专辑活动。我认为您正在尝试的这个示例来自 developer.android.com，他们没有指定将这些活动包含在清单文件中。包括它们，您的代码应该毫无例外地执行。

谢谢 ：）

# pyqt - 如何在 Qt 的 .pro 文件中设置 Python 库

> ID：10792356
> 
> 赞同：0
> 
> 时间：2012-05-29T02:11:33.880
> 
> 标签：pyqt

谁能告诉我将在以下行中添加哪些库：“LIBS += -L$(PYLIB) -lutil -lpython2.6”

看了一些网上的文章和教程后，似乎应该在python库中添加util.lib和python2.6.lib，但是我在任何地方都没有找到这两个库。任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T11:00:56.100

-L 选项添加要搜索 -l 语句的目录。所以解决 PYLIB，它应该位于 Makefile 的顶部。然后你可能会找到图书馆。

但是如果你有链接问题，因为找不到库，你下载的包可能有问题或其他什么。:)

我会提供更多帮助，但这个问题缺少一些上下文信息。

# c - 如何优雅地退出 X11 事件循环？

> ID：10792361
> 
> 赞同：40
> 
> 时间：2012-05-29T02:12:20.447
> 
> 标签：c, linux, x11, xlib

几乎我找到的每个教程都告诉我为我的事件循环执行此操作：

```
XEvent event;

while (true)
{
    XNextEvent(display, &event);

    switch (event.type)
    {
        case Expose:
            printf("Expose\n");
            break;

        default:
            break;
    }
} 
```

但是，单击 X 关闭程序会导致此消息。

```
XIO:  fatal IO error 11 (Resource temporarily unavailable) on X server ":0"
after 10 requests (10 known processed) with 0 events remaining. 
```

这些例子建议使用无限循环，这对我来说确实很奇怪。这听起来不自然，我的其他 X11 程序也不这样做。于是我四处寻找。我发现了如何捕获窗口关闭事件。

```
Atom wmDeleteMessage = XInternAtom(mDisplay, "WM_DELETE_WINDOW", False);
XSetWMProtocols(display, window, &wmDeleteMessage, 1);

XEvent event;
bool running = true;

while (running)
{
    XNextEvent(display, &event);

    switch (event.type)
    {
        case Expose:
            printf("Expose\n");
            break;

        case ClientMessage:
            if (event.xclient.data.l[0] == wmDeleteMessage)
                running = false;
            break;

        default:
            break;
    }
} 
```

这样可行。它没有错误地退出。...但我拒绝相信这是做事的正常方式。我的意思是，这是正确退出 X11 应用程序的唯一方法吗？仅仅为了捕捉关闭事件似乎需要做很多工作。如何制作“正确”的事件循环？为什么近距离事件被埋得如此之深？我错过了什么？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2014-03-24T14:55:28.687

问题在于 X 服务器和窗口管理器之间的通信。

当您调用`XCreateWindow`or`XCreateSimpleWindow`时，X 服务器会创建您的窗口（直到您通过调用 将其显式映射到屏幕上才显示它`XMapWindow`），然后窗口管理器负责在您的窗口周围附加所有装饰和按钮以及系统菜单。

您可以自己调用`XDestroyWindow`来移除窗口，这通常意味着它只是从屏幕上消失，但您的程序仍在运行并且与 X 服务器的连接仍然打开，因此您可以向它发送更多请求。

当用户单击`X`窗口管理器附加到您的窗口的那个小按钮时，问题就开始了，因为它不是由 X 服务器创建的，决定接下来做什么不是他的事。现在一切都在窗口管理器手中。

如果窗口管理器只是`XDestroyWindow`在您的窗口上调用，如果您的应用程序想要在窗口被销毁之前捕获关闭事件以执行某些操作，则会导致问题。所以在 X 服务器和窗口管理器之间建立了约定来处理这个过程。

大多数窗口管理器的默认行为是**销毁窗口并*关闭*与 X 服务器的连接**，因为这是大多数窗口管理器用户所期望的：当他们关闭窗口时，程序将结束（并且与X Server 将关闭并关闭窗口）。然后，当您尝试调用时`XCloseDisplay(display)`，它会导致您提到的IO错误，因为与服务器的连接已经关闭并且`display`结构无效。

[这是Xlib 文档](http://tronche.com/gui/x/icccm/sec-4.html#s-4.2.8.1)的摘录，它解释了这一点：

> 如果用户要求删除客户端的顶级窗口之一，则选择不包括`WM_DELETE_WINDOW`在属性中的客户端可能会与服务器断开连接。`WM_PROTOCOLS`

是的，如果他们不在他们的文档中隐藏得那么深，那就太好了：-P 但是当你已经找到它时，幸运的是它也暗示了解决方案。

如果您想要不同的行为（即从窗口管理器捕获关闭事件），则需要使用`WM_DESTROY_WINDOW`协议。

文档的另一个摘录：

> 客户端，通常是具有多个顶级窗口的客户端，其服务器连接必须在删除一些顶级窗口后仍然存在，应该在每个此类窗口`WM_DELETE_WINDOW`的属性中包含原子。`WM_PROTOCOLS`他们将收到一个`ClientMessage`如上所述的事件，其`data[0]`字段为`WM_DELETE_WINDOW`。

我有同样的错误，我想知道究竟是什么原因造成的以及为什么。我花了一些时间才弄清楚并在文档中找到了正确的解释，所以我把我的解释放在这里是为了节省其他不知情的人的时间。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-05-29T10:48:48.667

X11 中没有“退出按钮”或“应用程序”或“关闭事件”之类的东西。这是设计使然。

窗口装饰、退出按钮和我们所依赖的许多其他东西都没有内置在 X11 中。它们是在核心 X11 之上实现的。负责的特定约定集的名称`wmDeleteMessage`是 ICCCM，查找它。

Xlib 只处理核心 X11 协议。那里没有内置的关闭事件。

有一些工具包可以更轻松地处理 ICCCM 和所有其他未内置到 X11 中的东西（GTK、wxWindows、Qt，...）您可能想要使用其中之一。

# android - Android - 在 XML 文件中声明海关组件的更优雅的方式

> ID：10792362
> 
> 赞同：1
> 
> 时间：2012-05-29T02:12:25.617
> 
> 标签：android, xml, custom-component, hardcode

目前，我有一个名为 CustomizedGallery 的类，它扩展了默认图库。我将它包含在我的 XML 布局文件中，如下所示：

```
 <RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_marginLeft="80px"
    android:layout_marginTop="0px"
    android:layout_width="869px"
    android:layout_height="605px"
    android:background="#000000"
    android:orientation="horizontal" >

    <com.my.path.here.CustomizedGallery
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="864px"
        android:layout_height="600px"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:id="@+id/gallery" />
</RelativeLayout> 
```

问题是，每次我更改我的包名（com.my.path.here）时，我都必须手动编辑 XML（因为它们不会作为 .java 文件更新）。有没有一种方法可以将我的自定义库类包含在 XML 中，例如我不需要每次在使用我的自定义类的 XML 中编辑包名称？

PS：你可能想知道为什么我这么频繁地更改包名称。原因是因为我为同一个客户端构建了非常相似的应用程序，所以我每次都需要更改包名称，以便可以将稍微修改的应用程序安装在同一设备上。

先感谢您！

# user-interface - 单击 JButton 后使 UI 消失

> ID：10792364
> 
> 赞同：0
> 
> 时间：2012-05-29T02:12:54.417
> 
> 标签：user-interface, jbutton

我正在开发一个警报应用程序。当用户单击 JButton 并在后台运行时，我希望我的 ui 消失。你能告诉我怎么做吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T11:21:35.563

我得到了答案。我们只需要`setVisible(false)`在框架上调用。

# openstreetmap - osm-bundler *.ply 相机位置格式是什么？

> ID：10792373
> 
> 赞同：1
> 
> 时间：2012-05-29T02:14:56.283
> 
> 标签：openstreetmap, point-clouds

我正在试用[OpenStreetMap 捆绑](http://code.google.com/p/osm-bundler/)程序，但找不到有关相机位置数据的详细信息。点云数据位于 *.ply 文件中，如下所示：

```
ply
format ascii 1.0
element face 0
property list uchar int vertex_indices
element vertex 1340
property float x
property float y
property float z
property uchar diffuse_red
property uchar diffuse_green
property uchar diffuse_blue
end_header
-1.967914e-001 -8.918888e-001 -3.318706e+000 92 86 88
-1.745216e-001 -2.186521e-001 -3.227759e+000 50 33 31
-1.585826e-001 -1.894233e-001 -3.271651e+000 61 43 43
...
-2.649703e-003 2.197792e-002 3.906710e-002 0 255 0
-2.354721e-003 2.235805e-002 -1.093058e-002 255 255 0
5.296331e-003 4.755635e-001 -1.298959e+000 255 0 0
3.155302e-003 4.634443e-001 -1.347420e+000 255 255 0
1.910245e-003 2.891324e-001 -1.070228e-001 0 255 0
2.508708e-003 2.884968e-001 -1.570152e-001 255 255 0
-2.246127e-002 -6.257610e-001 9.884196e-001 255 0 0
-2.333330e-002 -6.187732e-001 9.389180e-001 255 255 0 
```

最后八行似乎是四个摄像机的位置（来自四个图像）。第一行是位置，第二行是方向。位置颜色为绿色或红色，方向为黄色。

我找不到这方面的信息，所以我想知道这是否正确以及红色和绿色是什么意思？好/坏数据？有关使用 osm-bundler 结果的任何其他信息都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-13T06:54:01.857

Bundler incrementally solves for the camera positions/poses and outputs the final answer in the bundler.out file. The .ply file contains point cloud vertices, faces, and RGB color information. The .ply file does not contain the camera poses. You can find information about the bundler.out file here. ( osm-bundler uses the Noah Slavely's bundler program, so this answer applies to both of your questions )

[http://www.cs.cornell.edu/~snavely/bundler/bundler-v0.4-manual.html#S6](http://www.cs.cornell.edu/~snavely/bundler/bundler-v0.4-manual.html#S6)

So, you look at the first number in the second row to determine the number of cameras. The next number tells you the number of points which follow the cameras. Each camera entry consists of five rows.

```
<f> <k1> <k2>  row one
<R>            rows two, three, and four
<t>            row five 
```

So, lines one and two give you header information. Then each group of five rows is a seperate camera entry starting with camera number zero. If rows contain zero, then their is no data for that camera/image.

If the first two rows bundle.out contain

```
#Bundle file v0.3
16 32675 
```

There will be 16 cameras and 32675 points. The camera information will be on lines 3 through (16*5 + 2). In vi or emacs you can display line numbers to help you examine the file. ( In vi, :set numbers on ) Remember that the rotation matrix is three lines of three numbers and the translation three vector is the fith and last line of a camera definition.

The points follow the camera definitions. You can find information about the format of points at the link I provided above.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T15:44:53.327

我也在研究如何从[Bundler](http://phototour.cs.washington.edu/bundler/)获取相机位置数据（注意我没有使用`osm-bundler`原始程序）。但是，除了输出 PLY 文件捆绑器外，还输出一个名为`bundle.out`. 这包含允许您计算相机位置的参数，如[捆绑器文档](http://phototour.cs.washington.edu/bundler/bundler-v0.3-manual.html#S6)中所述。

# java - 为什么这个 JOGL 代码不能正确翻译？

> ID：10792374
> 
> 赞同：2
> 
> 时间：2012-05-29T02:15:01.903
> 
> 标签：java, opengl, transformation, jogl

```
 public Cube(int x, int y, int z, int x2, int y2, int z2){
    int tmpX = x;
    int tmpY = y;
    int tmpZ = z;

    if(x > x2){x = x2; x2 = tmpX;}
    if(y > y2){y = y2; y2 = tmpY;}
    if(z > z2){z = z2; z2 = tmpZ;}

    int centerX = x2 - x;
    int centerY = y2 - y;
    int centerZ = z2 - z;

    GL11.glTranslatef(centerX, centerY, centerZ);
    GL11.glRotatef(rot, 0f, 0f, 1f);
    GL11.glBegin(GL11.GL_QUADS);

        //front
        color(255, 0, 0);
        v3d(x, y, z);
        v3d(x, y2, z);
        v3d(x2, y2, z);
        v3d(x2, y, z);

        //top
        color(0, 255, 0);
        v3d(x, y, z);
        v3d(x2, y, z);
        v3d(x2, y, z2);
        v3d(x, y, z2);

        //back
        color(0, 0, 255);
        v3d(x2, y2, z2);
        v3d(x, y2, z2);
        v3d(x, y, z2);
        v3d(x2, y, z2);

        //bottom
        color(255, 255, 0);
        v3d(x, y2, z);
        v3d(x2, y2, z);
        v3d(x2, y2, z2);
        v3d(x, y2, z2);

        //left
        color(255, 0, 255);
        v3d(x, y, z);
        v3d(x, y2, z);
        v3d(x, y2, z2);
        v3d(x, y, z2);

        //right
        color(0, 255, 255);
        v3d(x2, y, z);
        v3d(x2, y2, z);
        v3d(x2, y2, z2);
        v3d(x2, y, z2);

    GL11.glEnd();
    GL11.glRotatef(-rot, 0f, 0f, 1f);
    GL11.glTranslatef(-centerX, -centerY, -centerZ);

    rot += 0.75f;
    if(rot > 360){
        rot -= 360;
    }
} 
```

我不明白为什么这不是围绕立方体对象本身围绕 Z 轴旋转，而是它似乎只是在矩阵中围绕 0,0,0 旋转。

我也试过这个居中代码：

```
 int xWidth = x2 - x;
    int yWidth = y2 - y;
    int zWidth = z2 - z;

    int centerX = x + (xWidth / 2);
    int centerY = y + (yWidth / 2);
    int centerZ = z + (zWidth / 2); 
```

但是在测试了一些数学之后，第一个更有意义（15 - 5 = 10, 15 + 7.5 = 12.5）。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T04:20:47.947

我认为您可能正试图将您对数学变换的学习也直接转移到 OpenGL。从字面上解释您所写的内容，您正在从原点平移，应用旋转，然后尝试以相反的顺序撤消这两者到底部。看起来您正试图“撤消”这些转换，以便稍后发生其他一些转换。

当我们在数学上谈论转换时，这是有道理的，但是在代码中，我们在`glPushMatrix()`and中有一个很好的快捷方式`glPopMatrix()`，您可以在其中使用两者来“包装”特定范围内的转换。它与函数作用域或循环作用域非常相似——该块内发生的任何转换都不会影响该作用域之外的任何内容。

**好的：**

```
GL11.glTranslatef(centerX, centerY, centerZ);
GL11.glRotatef(rot, 0f, 0f, 1f); 
```

这会将您的变换应用于 centerX、centerY 和 centerZ，然后应用您围绕 z 轴的旋转。

**坏处：**

```
GL11.glRotatef(-rot, 0f, 0f, 1f);
GL11.glTranslatef(-centerX, -centerY, -centerZ); 
```

这里的`glRotatef`and`glTranslatef`是不必要的，可以注释掉或删除。

这是您使用代码定义单个“对象”范围的方式：

```
GL11.glPushMatrix();  
// Apply transformations here
GL11.glBegin(GL11.GL_QUADS); 

    // Draw object here

GL11.glEnd(); 
GL11.glPopMatrix(); 
```

因此，如果您想包含不受立方体变换和旋转影响的其他对象，您可以将这些变换包装在 Push/Pop 块中。这是另一个比我在这里更好地涵盖推送和弹出的[问题。](https://stackoverflow.com/questions/7031842/how-do-glpushmatrix-and-glpopmatrix-keep-the-scene-the-same)

# jquery - 如何使用选择器查找一组具有特定属性类型的列表

> ID：10792375
> 
> 赞同：0
> 
> 时间：2012-05-29T02:15:23.513
> 
> 标签：jquery, jquery-selectors, hide, haml, attr

我正在使用 HAML 在页面中实现用户显示

```
%li
  %label.user
    %input{value: "<%= user.nickname %>", type: "<%= user.type %>", user_avatar: "<%= user.avatar_url %>"}
      %img{src: "<%= user.avatar_url %>"}
      .name <%= user.nickname %> 
```

我有 2 种用户类型，“朋友”或“关注者”。我的目的是找到并隐藏所有 type = 'following' 的 'li'。我怎样才能做到这一点？

我尝试使用以下代码无济于事。

```
@$('ul.inputs-list li').find('input').attr('type'=='following').hide() 
```

谁能告诉我如何修改我的代码，以便我可以隐藏所有带有 type='following' 的'li'？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T02:19:05.143

```
@$('ul.inputs-list li').find('input[type=following]').hide(); 
```

或者

```
@$('ul.inputs-list li input[type=following]').hide(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T02:19:10.147

使用[属性选择器](http://api.jquery.com/attribute-equals-selector/)：

```
@$('ul.inputs-list li').find('input[type="following"]').hide() 
```

# javascript - 用于检查 PHP 页面是否输出 1 的 Javascript/AJAX 脚本

> ID：10792377
> 
> 赞同：0
> 
> 时间：2012-05-29T02:15:51.687
> 
> 标签：javascript, jquery, ajax

我正在尝试创建一个即时通讯网站。每十秒钟我想要一个 javascript/ajax 脚本来检查是否有新消息。我认为如果有的话，我可以有一个 php 页面输出 1。我已经完成了 php 编码，但无法让 javascript 端工作。我尝试过使用 $.get 并且遇到了一些麻烦。任何帮助将不胜感激。

这是我的ajax代码：

```
var check;
function checkForMessages() {
    $.get("/checkmsg.php", function(data) {
        if(data == 1) {
            alert("There is a new message");
        }
    });
}

check = setInterval(checkForMessages, 10000); 
```

我的 php 代码总是输出 1 用于测试目的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T02:24:21.770

我猜在你的 php 代码的末尾你有这个：

```
echo '1'; 
```

对于您的 JS，我建议 $.post()：

```
jQuery.post( '/checkmsg.php', function(data) { 
    if (data.search('1') !== -1) {
        alert("There is a new message");
    } else {
        alert("Something went wrong.");
    }
}); 
```

# ruby-on-rails - 没有要加载的文件 -- 超市

> ID：10792380
> 
> 赞同：2
> 
> 时间：2012-05-29T02:16:25.847
> 
> 标签：ruby-on-rails, ruby

我想使用 android-market-api jruby 版本。但是当我安装它并想要使用它时。

它会导致以下负载错误。

我使用[https://github.com/jberkel/supermarket](https://github.com/jberkel/supermarket)

java版本在这里：[http ://code.google.com/p/android-market-api/](http://code.google.com/p/android-market-api/)

谁能帮我？

```
$ rvm use jruby

$ gem install supermarket
Fetching: json-1.5.0-java.gem (100%)
Fetching: json-jruby-1.5.0-java.gem (100%)
Fetching: supermarket-0.0.5-universal-java.gem (100%)
Successfully installed json-jruby-1.5.0-java
Successfully installed supermarket-0.0.5-universal-java
3 gems installed

$ irb

jruby-1.6.5 :001 > require 'supermarket'
LoadError: no such file to load -- supermarket
      from org/jruby/RubyKernel.java:1038:in `require'
      from (irb):1:in `evaluate'
      from org/jruby/RubyKernel.java:1088:in `eval'
      from /home/grant/.rvm/rubies/jruby-1.6.5/lib/ruby/1.8/irb.rb:158:in
`eval_input'
      from /home/grant/.rvm/rubies/jruby-1.6.5/lib/ruby/1.8/irb.rb:271:in
`signal_status'
      from /home/grant/.rvm/rubies/jruby-1.6.5/lib/ruby/1.8/irb.rb:155:in
`eval_input'
      from org/jruby/RubyKernel.java:1420:in `loop'
      from org/jruby/RubyKernel.java:1192:in `catch'
      from /home/grant/.rvm/rubies/jruby-1.6.5/lib/ruby/1.8/irb.rb:154:in
`eval_input'
      from /home/grant/.rvm/rubies/jruby-1.6.5/lib/ruby/1.8/irb.rb:71:in
`start'
      from org/jruby/RubyKernel.java:1192:in `catch'
      from /home/grant/.rvm/rubies/jruby-1.6.5/lib/ruby/1.8/irb.rb:70:in
`start'
      from /home/grant/.rvm/rubies/jruby-1.6.5/bin/irb:17:in `(root)' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T03:20:09.367

第一的：

```
irb(main):003:0> require 'supermarket'
LoadError: no such file to load -- supermarket 
```

但是之后：

```
irb(main):004:0> require 'rubygems'
=> true
irb(main):005:0> require 'supermarket'
=> true 
```

您必须首先`require`让命令以 ruby​​gems 方式工作`rubygems`。`require`

**更新**正如@RobertRouse 在评论中指出的那样，您可以通过`jirb`在`--1.9`模式下运行来实现相同的效果：

```
$ jruby --1.9 -S irb
irb(main):001:0> require 'supermarket'
=> true 
```

# iphone - 为 NSDateFormatter 创建格式字符串

> ID：10792384
> 
> 赞同：0
> 
> 时间：2012-05-29T02:17:58.310
> 
> 标签：iphone, objective-c, date, nsdateformatter

我有一个`Tue, 29 May 2012 00:56:14 +0000`XML 文件格式的日期，它不受我的控制，因此无法更改原始格式。

我正在研究如何创建格式字符串`NSDateFormatter`，找到[这个页面](http://waracle.net/mobile/iphone-nsdateformatter-date-formatting-table/)，并想出了以下代码：

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"EEE', 'dd' 'MMM' 'YYYY' 'HH':'mm':'ss' 'Z"];
[dateFormatter setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];
NSDate *parsedDate = [dateFormatter dateFromString:date]; 
```

但是，在解析上面的日期后`Tue, 29 May 2012 00:56:14 +0000`，使用此格式字符串，我得到`2011-12-27 00:56:14 +0000`. 所以时间是正确的，但日期却是一团糟。

有更多知识的人可以`NSDateFormatter`解释为什么这不起作用吗？据我所知，格式字符串似乎是正确的，但显然不是。谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T02:38:57.743

你的年份格式字符串应该是小写的，'yyyy'

# sql-server-2008 - 如何在 InfoPath 2010 和 SQL Server 2008 (Live Server) 之间建立数据连接和提交？

> ID：10792389
> 
> 赞同：0
> 
> 时间：2012-05-29T02:19:18.823
> 
> 标签：sql-server-2008, database-connection, form-submit, infopath2010

我从数据库表单模板创建了一个 Infopath 2010 表单。我在实时服务器上使用的数据库源（需要互联网连接）。我已经完成了创建表单。但是当我尝试从表单提交条目时，我收到错误消息：

> InfoPath 无法提交表单。提交表单时发生错误。InfoPath 无法连接到数据源。访问被拒绝。访问被拒绝。

我根据本[教程创建此表单](http://www.bizsupportonline.net/infopath2010/connect-infopath-2010-sql-server-2008-table.htm)

我可以直接将 infopath 表单提交到实时服务器上的 SQL Server 吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-26T22:02:07.023

您需要更改表单设置以允许将数据提交到表单： 1\. 单击工具>>表单选项>>安全和信任 2.选择完全信任选项

（答案是从其他网站获取的，但我在这里发布，因为当我在寻找答案时，我首先看到了这个网站）

# sockets - node-proxy 与 host:port 一起使用，但不采用 unix 套接字路径

> ID：10792391
> 
> 赞同：1
> 
> 时间：2012-05-29T02:19:43.170
> 
> 标签：sockets, node.js, ubuntu, vhosts

我想用[`node-proxy`](https://github.com/nodejitsu/node-http-proxy). 考虑到我有一个启动并运行的从属脚本，它在 unix-socket 上进行侦听：`/tmp/node-http/cubixcraft.de` 当我想使用以下脚本将它加载到我的节点代理中时，它根本不起作用。网页没有响应。

```
var fs = require("fs"),
    httpProxy = require("http-proxy");

var options = {
    hostnameOnly: true,
    router: {
        "cubixcraft.de": "/tmp/node-http/cubixcraft.de"
    }
};

var proxyServer = httpProxy.createServer(options).listen(80); 
```

当我使用普通端口而不是套接字路径时，一切正常。我什至在成功完成的套接字路径上发出了一个 get 请求。这条路真的很管用。节点代理似乎有问题。

有人遇到同样的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T02:40:02.953

我最近想做类似的事情，但是根据这里的开放 github 问题[http://github.com/nodejitsu/node-http-proxy/issues/104](http://github.com/nodejitsu/node-http-proxy/issues/104)还不可能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T14:01:25.560

正如[zi42 指出的那样，](https://stackoverflow.com/questions/10792391/node-proxy-works-with-hostport-but-doesnt-take-a-unix-socket-path/10792487#10792487)这种行为是一个错误。我深入研究了代码并发现他们不关心套接字。没有一行处理`socketsPath`s。

由于很长一段时间没有人回应这个[问题，](https://github.com/nodejitsu/node-http-proxy/issues/104)[我自己修复了它](https://github.com/nodejitsu/node-http-proxy/issues/104#issuecomment-5983929)。你可以在[这里](https://gist.github.com/2828473)找到结果。这是一个包含`socketPath`'s 的包装模块。我会提出一个[拉取请求](https://github.com/nodejitsu/node-http-proxy/pull/254)，这样`socketPath`s 很快就会默认工作。

下面的例子展示了如何使用它。我假设您有一个 HTTP 服务器正在侦听套接字“/tmp/node-http/myserver.com”。

```
var httpProxy = require("./fixed-http-proxy.js"); // This assumes that you have my .js in your cwd and http-proxy installed as a module (npm install http-proxy)

console.log(httpProxy);
var options = {
    hostnameOnly: true,
    router: {
        "myserver.com": "/tmp/node-http/myserver.com" // Sockets are determined by a leading slash
    }
};

var proxyServer = httpProxy.createServer(options).listen(80); // myserver.com:80 now internally proxies to /tmp/node-http/myserver.com 
```

# sql-server - 累积和 - 选择层次结构的部分

> ID：10792392
> 
> 赞同：3
> 
> 时间：2012-05-29T02:19:44.333
> 
> 标签：sql-server, ssas, mdx, olap

我有一个有趣的问题。

我需要由时间维度的片段创建的集合的累积总和。时间维度基于小时和分钟。此维度从 0 小时和分钟开始，到 23 小时和 59 分钟结束。

我需要做的是从上午 09:30 - 下午 4:00 或下午 4:30 - 上午 9:30 切出部分。我需要这些值来执行我的累积总和。我希望有人可以建议一种使用标准 MDX 执行此操作的方法。如果不是，我唯一的选择是编写我自己的存储过程，该存储过程使用上述逻辑形成我的 Periods to date set 提取？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T11:56:16.373

您可以仅使用小时在时间维度中创建辅助层次结构，并使用它过滤查询。

```
[Time].[Calendar] -> the hierarchy with year, months, day and hours level
[Time].[Hour] -> the 'new' hierarchy with only hours level (e.g.) 09:30 AM. 
```

您可以在 mdx 中进行查询，将您的条件添加为过滤器：

```
SELECT
   my axis...
WHERE ( SELECT { [Time].[Hour].[09:30 AM]:[Time].[Hour].[04:00 PM] } on 0 FROM [MyCube] ) 
```

您还可以创建一个新维度而不是层次结构，不同之处在于自动存在的[行为](http://msdn.microsoft.com/en-us/library/ff487119.aspx)和性能。

# memcached - 在 memcache 上查找特定键的年龄

> ID：10792393
> 
> 赞同：1
> 
> 时间：2012-05-29T02:20:09.683
> 
> 标签：memcached

有没有一种快速的方法来发现 memcache 上特定键的年龄？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T04:00:10.273

Memcached 不会保留有关何时创建密钥的信息，因此除非您有某种客户端逻辑，否则无法执行此操作。如果这对您很重要，那么您可以简单地将创建时间作为前缀添加到键的实际值（值 = 时间 + 数据）。然后，当您从 memcached 获取数据时，您可以将值拆分为相应的数据片段。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-19T17:45:55.623

OP，您是指知道缓存条目的年龄吗？您可以将最新更新的时间戳与实际值一起存储：

```
from datetime import datetime

def put_value(key, value):
    timestamp = datetime.utcnow()
    entry = (timestamp, value)
    memcache.add(key, entry)

def get_value(key):
    entry = memcache.get(key)

    if not value:
        return None

    _, value = entry
    return value

def get_age(key):
    entry = memcache.get(key)

    if not value:
        return None

    timestamp, _ = entry
    age = datetime.utcnow() - timestamp
    return age 
```

# android - Android SQLite 获取 CursorIndexOutOfBoundsException

> ID：10792400
> 
> 赞同：1
> 
> 时间：2012-05-29T02:21:20.520
> 
> 标签：android, database, sqlite, cursor

我在使用游标对 Android 数据库执行 SQLite 查询时遇到问题，如果我尝试使用 getPage 出现`android.database.CursorIndexOutOfBoundsException: Index 0 requested, with a size of 0` 错误，我是否对游标做错了什么？做 cursor.getColumnCount() 得到 4 是正确的，并且有一行，所以这不是问题，可能导致错误的原因是什么？提前致谢

```
public class DBHandler extends SQLiteOpenHelper {
private static final int DATABASE_VERSION = 3;

// Database Name
private static final String DATABASE_NAME = "pagesManager";

// Pages table name
private static final String TABLE_PAGES = "pages";
// Pages Table Columns names
private static final String PAGES_KEY_ID = "id";
private static final String PAGES_KEY_NAME = "pageName";
private static final String PAGES_KEY_DATE = "lastDate";
private static final String PAGES_KEY_PAGE = "pageUrl";
@Override
public void onCreate(SQLiteDatabase db) {
    String CREATE_PAGES_TABLE = "CREATE TABLE " + TABLE_PAGES + "("
            + PAGES_KEY_ID + " INTEGER PRIMARY KEY AUTOINCREMENT," + PAGES_KEY_NAME + " TEXT,"+ PAGES_KEY_DATE + 
            " TEXT," + PAGES_KEY_PAGE + " TEXT" +")";
    db.execSQL(CREATE_PAGES_TABLE);
}

   public PageListItem getPage(int id) {
    SQLiteDatabase db = this.getReadableDatabase();
    Cursor cursor = db.query(TABLE_PAGES, new String[] { PAGES_KEY_ID, PAGES_KEY_NAME, PAGES_KEY_DATE, PAGES_KEY_PAGE }, PAGES_KEY_ID + "=?",
            new String[] { String.valueOf(id) }, null, null, null, null);
    if (cursor != null)
        if(cursor.moveToFirst()) {
            System.out.println("Cursor no es nulo");
        }
    PageListItem page = new PageListItem(cursor.getString(1),cursor.getString(2), cursor.getString(3),Integer.parseInt(cursor.getString(0)));
    cursor.close();
    return page;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T02:37:37.940

我使用了错误的 id，所以 getPage() 找不到它。

# iframe - 我可以从 iframe 页面访问 iframe 的父元素吗

> ID：10792401
> 
> 赞同：2
> 
> 时间：2012-05-29T02:21:31.073
> 
> 标签：iframe, element, parent

首先是同一域下的两个页面

在父 page.htm 我只有一个元素`input#test`，如

然后我在父页面中设置了一个iframe，称为child.htm，在child.html中我编写js来查找父输入元素，比如

```
var parent = window.self.top; 
```

但我无法`var input = $(parent).find('input#test')`在 parent.htm 中找到输入元素

我可以访问它吗？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T02:31:10.667

尝试

```
var input = $(window.self.top).contents().find('input#test'); 
```

或者

```
var input = $(window.self.top.document).find('input#test'); 
```

# compiler-construction - 给定一个指令地址，能否确定包含它的函数的起始地址？

> ID：10792402
> 
> 赞同：3
> 
> 时间：2012-05-29T02:21:32.830
> 
> 标签：compiler-construction, x86, reverse-engineering, decompiling, disassembly

我在当前项目中遇到了这个问题，这需要对二进制级别的代码进行推理。

我认为我们可以通过查看 CALL 指令的操作数来确定程序中所有函数的起始位置。有了这个列表后，我们是否可以通过简单地向后搜索直到找到起始地址来确定哪个函数包含一个地址？IE是包含指令的函数的起始地址是小于指令地址的最大函数地址吗？

如果上述方法不正确，是否有另一种方法可以找到包含指令的函数的起始地址？

编辑：添加了对问题的说明。

edit2：我的方法可能是错误的。编译器不能保证将函数体放置在机器代码的连续区域中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T12:58:37.550

你需要更多地限制你的问题空间。即使只限于“编译语言的输出”，现在的编译器也擅长模糊函数之间的界限。内联意味着一个函数可以包含在另一个函数中。尾调用优化在没有`CALL`指令的情况下在两个函数之间转移控制。配置文件引导的优化可以创建不连续的功能。代码流分析和`noreturn`提示可能导致代码落入数据。跳转表意味着数据可以在没有`CALL`目标的情况下进入代码。唯一可靠的方法是让编译器明确地告诉你指令到函数的映射，比如通过调试信息。你没有说你使用的是什么平台，所以很难提供更具体的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T02:24:27.383

不，汇编代码可以做各种时髦的事情。一个调用可能会完全跳过另一个函数、向后跳转或进入另一个模块。

# php - 如何使用 php webdriver 让 chrome 与 selenium 一起工作？

> ID：10792403
> 
> 赞同：7
> 
> 时间：2012-05-29T02:21:33.327
> 
> 标签：php, google-chrome, webdriver, selenium-webdriver

Firefox 一切正常，但我无法启动 chrome。我在 linux 上，使用 php webdriver 绑定。

```
require_once "/usr/local/src/selenium/php-webdriver-bindings-0.9.0/phpwebdriver/WebDriver.php";
putenv("PATH=".getenv("PATH").':'.'/usr/local/src/selenium/chrome_webdriver/'); //Prepare for chrome

$webdriver = new WebDriver("localhost", "4444");
//$webdriver->connect("chrome");
$webdriver->connect("chrome","",array(
    'webdriver.chrome.driver'=>'/usr/local/src/selenium/chrome_webdriver/chromedriver',
    )); 
```

我收到的错误消息是“ *chromedriver 可执行文件的路径必须由 webdriver.chrome.driver 系统属性设置*”。如您所见，我尝试将其设置在desiredCapabilities 数组中，但这一定是错误的位置。我可以在 selenium 日志中看到我的设置正在通过，因为此日志行显示：

```
INFO - Executing: [new session: {javascriptEnabled=true, webdriver.chrome.driver=/usr/local/src/selenium/chrom..., browserName=chrome, nativeEvents=false, version=}] at URL: /session) 
```

我从硒开始`java -jar selenium-server-standalone-2.21.0.jar`

我正在使用 Chromium v​​.18。

我创建了一个快捷方式 /usr/bin/google-chrome 指向 /usr/bin/chromium-browser

我可以毫无问题地手动启动 chromedriver。它说：

```
port=9515
version=20.0.1133.0 
```

运行与否对 selenium 给我的错误消息没有任何影响。

更新：相关问题：[selenium 2 chrome driver](https://stackoverflow.com/questions/7450416/selenium-2-chrome-driver)（答案是java，不是php）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-31T00:57:39.087

您可以尝试在启动 selenium 服务器时从命令行传递 webdriver.chrome.driver 属性。像这样：

```
 java -Dwebdriver.chrome.driver = pathtochromedriver -jar selenium-server.jar 
```

我不确定另一个不工作的原因。您需要检查它是否**真的**从代码设置系统属性..

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-26T08:43:26.163

没有任何空白，它在 WinXP32 上对我有用：

```
java -Dwebdriver.chrome.driver=C:\chromedriver.exe -jar selenium-server.jar 
```

# c++ - 有哪些学习动画编程的好资源？

> ID：10792405
> 
> 赞同：-2
> 
> 时间：2012-05-29T02:22:09.623
> 
> 标签：c++, opengl, animation, directx

我在 GLSL、OpenGL 和 3D 图形技术方面有很好的基础。然而，一个概念仍然让我感到困惑，那就是动画的过程。

有没有人有关于我可以在哪里学习 C++ 动画网格的资源？一些例子也很棒。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T03:44:29.123

动画是很多工作，无论您是要“手工”完成，还是打算模拟动画。如果模拟是您的一杯茶，请参阅我几个月前发布的[这个答案。](https://stackoverflow.com/questions/4613987/jelly-physics-3d/9013866#9013866)

# ruby-on-rails - Rails 3.2 简单形式的嵌套路由

> ID：10792407
> 
> 赞同：3
> 
> 时间：2012-05-29T02:22:42.657
> 
> 标签：ruby-on-rails, ruby-on-rails-3, simple-form, nested-routes

我在 object1 和 object2 之间有一个嵌套路由。当我尝试编辑 object2 时出现错误：

```
undefined method `object2_path' for #<#Class:0x000000040b2fa8>:0x000000029c8810>. 
```

配置/路由.rb

```
resources :object1 do
  resources :object2
end 
```

查看/object2/_form.html.haml：

```
= simple_form_for [@object1, @object2] do |f| 
```

如果我更改视图以添加特定的 url，例如：

```
= simple_form_for [@object1, @object2], :url => object1_object2_path, do |f| 
```

然后编辑工作但新的没有。

如果我设置 object1_object2s_path （索引路径）而不是 object1_object2_path 作为 url，则两个视图都被渲染，但编辑失败，因为表单指向错误的 url（很明显，这只是我尝试的一部分）。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-29T05:49:19.747

在这种情况下似乎`@object1`是：`nil`

```
simple_form_for [@object1, @object2] do |f| 
```

所以 rails 尝试`object2_path`使用`object1_object2_path`. 尝试检查 的值`@object1`。

# javascript - 打开弹出窗口并在关闭弹出窗口时刷新父页面

> ID：10792408
> 
> 赞同：100
> 
> 时间：2012-05-29T02:23:01.330
> 
> 标签：javascript, html, dom-events

我在 JavaScript 中通过 window.open 打开了一个弹出窗口，我想在关闭此弹出窗口时刷新父页面。（onclose 事件？）我该怎么做？

```
window.open("foo.html","windowName", "width=200,height=200,scrollbars=no"); 
```

* * *

## 回答 #1

> 赞同：241
> 
> 时间：2012-05-29T02:35:18.960

您可以使用“ [window.opener](https://developer.mozilla.org/en/DOM/window.opener) ”访问父窗口，因此，在子窗口中编写如下内容：

```
<script>
    window.onunload = refreshParent;
    function refreshParent() {
        window.opener.location.reload();
    }
</script> 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-05-29T02:31:18.017

弹出窗口没有任何可以收听的关闭事件。

另一方面，当窗口关闭时，有一个 closed 属性设置为 true。

您可以设置一个计时器来检查该关闭的属性，并这样做：

```
var win = window.open('foo.html', 'windowName',"width=200,height=200,scrollbars=no");   
var timer = setInterval(function() {   
    if(win.closed) {  
        clearInterval(timer);  
        alert('closed');  
    }  
}, 1000); 
```

请参阅这个[工作小提琴示例](http://jsfiddle.net/zuul/namuj/)！

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-05-29T02:38:38.493

在您的子页面上，放置以下内容：

```
<script type="text/javascript">
    function refreshAndClose() {
        window.opener.location.reload(true);
        window.close();
    }
</script> 
```

和

```
<body onbeforeunload="refreshAndClose();"> 
```

但作为一个好的 UI 设计，你应该使用 Close `button`，因为它对用户更友好。请参阅下面的代码。

```
<script type="text/javascript">
    $(document).ready(function () {
        $('#btn').click(function () {
            window.opener.location.reload(true);
            window.close();
        });
    });
</script>

<input type='button' id='btn' value='Close' /> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-10-02T03:26:03.043

我用这个：

```
<script language='javascript'>
var t;
function doLoad() {
t = setTimeout("window.close()",1000);
}

</script>
<script type="text/javascript">
function refreshAndClose() {
    window.opener.location.reload(true);
    window.close();
}
</script>
<body onbeforeunload="refreshAndClose();" onLoad='doLoad()''> 
```

当窗口关闭时，它会刷新父窗口。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-29T02:42:55.350

window.open 将返回对新创建窗口的引用，前提是打开的 URL 符合[Same Origin Policy](http://www.mozilla.org/projects/security/components/same-origin.html)。

这应该有效：

```
function windowClose() {
    window.location.reload();
}

var foo = window.open("foo.html","windowName", "width=200,height=200,scrollbars=no");
foo.onbeforeunload= windowClose;​ 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-06-27T13:02:22.897

就我而言，我在父页面中单击链接按钮时打开了一个弹出窗口。在关闭孩子时刷新父母使用

```
window.opener.location.reload(); 
```

在子窗口中导致重新打开子窗口（我猜可能是因为查看状态。如果我错了，请纠正我）。所以我决定不重新加载父页面并再次加载页面并为其分配相同的网址。

为了避免在关闭弹出窗口后再次打开弹出窗口，这可能会有所帮助，

```
window.onunload = function(){
    window.opener.location = window.opener.location;}; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-29T02:39:02.497

如果您的应用在支持 HTML5 的浏览器上运行。您可以使用[postMessage](https://developer.mozilla.org/en/DOM/window.postMessage)。那里给出的例子与你的非常相似。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-09-16T10:41:52.470

**试试这个**

```
 self.opener.location.reload(); 
```

> 打开当前窗口的父窗口并重新加载该位置。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-10-15T09:51:07.420

您可以在步骤之后使用父命令（父是窗口）访问主页，您可以制作所有内容......

```
 function funcx() {
        var result = confirm('bla bla bla.!');
        if(result)
            //parent.location.assign("http://localhost:58250/Ekocc/" + document.getElementById('hdnLink').value + "");
            parent.location.assign("http://blabla.com/" + document.getElementById('hdnLink').value + "");
    } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-11-03T04:37:45.993

您可以在父页面中使用以下代码。

```
<script>
    window.onunload = refreshParent;
    function refreshParent() {
      window.opener.location.reload();
    }
</script> 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-10-03T09:44:20.733

以下代码将设法在关闭后刷新父窗口：

```
function ManageQB_PopUp() {
            $(document).ready(function () {
                window.close();
            });
            window.onunload = function () {
                var win = window.opener;
                if (!win.closed) {
                    window.opener.location.reload();
                }
            };
        } 
```

# python - 监控 Facebook 页面

> ID：10792409
> 
> 赞同：2
> 
> 时间：2012-05-29T02:23:23.210
> 
> 标签：python, facebook

我是一名 python 程序员，我想知道是否可以处理一些 Facebook 统计数据？我听说过很多关于 Facebook Graphs 和 Facebook API 的事情。

因此，如果有人知道我如何继续通过 Python 访问 Facebook 页面的统计信息（无需使用 Mechanize 解析数据），它应该会很有帮助。

我不是在寻找一个完整的教程，而是我在互联网上阅读了很多不同的东西，所以只是想听听你关于我在哪里可以挖掘的建议 :-)

我的主要想法是监控喜欢的例子。

提前致谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T09:23:26.333

最后通过使用 graph.facebook.com/your_page 找到了一种解决方案：

```
#!/usr/bin/python
# -*- coding: utf-8 -*-

from time import strftime, gmtime
import csv
from urllib2 import urlopen
from simplejson import loads
c = csv.writer(open('FB_Monitoring.csv', "a"), delimiter=';')
First = ['Name', 'Likes', 'Talking About']
c.writerow(First)

source = open("FBPAGES.txt", "r")
FacebookPages = source.readlines()

for Page in FacebookPages:
    Page = Page.replace('facebook.com','graph.facebook.com')
    content = loads(urlopen(Page).read())
    liste = [content['name'],content['likes'],content['talking_about_count']]
    c.writerow(liste) 
```

该脚本使用 FBPAGES.txt（Facebook 页面 URL 列表，逐行）。它计算喜欢和谈论的数量，并将它们放入 CSV 文件中。

可以改进，这只是一个草稿；）

# ios - 适用于 iPad 视网膜显示屏的 Xcode 4.3.2 “无效图标”

> ID：10792410
> 
> 赞同：4
> 
> 时间：2012-05-29T02:23:34.527
> 
> 标签：ios, xcode, ipad, icons, retina-display

我徒劳地尝试将 iPad 视网膜图标添加到多个 XCode 4.3.2 项目。

我正确地将外部程序中的图像大小调整为 114x144 像素，然后将其拖到项目中“摘要”窗口的“iPad 部署信息”部分。弹出一条错误消息说图标大小无效（见图）：

![无效的图像 xcode 4.3.2](../Images/daeb7f2fe363351d53246c8d7a9d452d.png)

*文件“/Users/max/Desktop/General Images/Camera/icns/114.png”与所需大小不匹配。它的大小必须为 144 x 144 像素。*

我绝对确定它的大小是正确的，并且看到我以前能够简单地拖放，并且因为它发生在多个项目中，如果这是 XCode 中的错误？

请帮我解决这个问题。

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T05:46:14.707

请确保应遵循适当大小的命名约定

`Normal Display-icon.png(57*57)`

`Retina Display=icon@2x.png(114*114)`

我希望这会奏效。

# css - 清除元素不会向下移动？

> ID：10792412
> 
> 赞同：0
> 
> 时间：2012-05-29T02:24:02.460
> 
> 标签：css, css-float, positioning

我没有代码来显示我的问题，但我从 w3schools 网站上删除了一些代码。这是他们给你的一个例子，让你玩清楚。

```
<style type="text/css">
img
{
float:left;
}
p.clear
{
clear:left;
}
</style>
</head>
<body>

<img src="http://www.w3schools.com/cssref/logocss.gif" width="95" /><p>
<p class="clear">This is also some text. This is also some text. This is also some text. This is also some text. This is also some text. This is also some text.</p> 
```

我的问题是关于使用 clear 属性。为什么你不能将清除的元素向下移动到离它之前的浮动元素更远的地方？

意思是，假设我希望在文本段落和该图像之间有几个空行，无论出于何种原因。分页符似乎不起作用。

如果我为段落添加相对定位并给它一个更大的上边距，那么在我不再需要向您展示的示例中，它是一个浮动 div 下的清除 div，而不是一个下一个清除的段落浮动图像，在这种情况下，即使是相对定位来添加边距也不起作用。

确切地说，clear 对您应用它的元素如何与文档的其余部分一起流动有什么作用？我知道什么是明确的。我知道这是在说没有以前的浮动对象可以在哪一边，但它对元素 ITSELF 有什么作用？清除的元素是否以某种方式附加到与浮动元素相同的流？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T02:25:55.277

只是`<br class="clear" />`段落前面的一个，或为其添加上边距。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T03:13:50.213

clear 属性指定元素框的哪些边不能与浮动元素相邻，并且仅当这些浮动元素位于相同的**块格式 conext**中时才会这样做。

从站点点：

> 清除会在已清除元素的上边距上方添加空间，直到它清除受影响的浮动框。因此，如果我们想要在它和浮动框之间留出特定数量的空间，我们就不能使用已清除元素的上边距。

*尝试在浮动元素之后*放置尚未清除的其他元素，基本上会将它们保留在相同的上下文中。这与浮动的工作方式有关。

如果您想在图像和段落之间放置空白行，我会在 img 元素中添加一个 margin-bottom：

```
<style type="text/css">
img
{
  float: left;
  margin-bottom: 10px;
}
p.clear
{
  clear: both;
}
</style>
</head>
<body>

<img src="http://www.w3schools.com/cssref/logocss.gif" width="95" />
<p>This is also some text. This is also some text. This is also some text. This is also some text. This is also some text. This is also some text.</p>​​​​​​​​​​​​​​​​​​​​​​​ 
```

我可以继续，但我认为这会告诉您有关浮动和 CSS clear 属性的所有信息： [http ://reference.sitepoint.com/css/floatclear](http://reference.sitepoint.com/css/floatclear)

在这点上，我强烈建议不要使用 w3schools，因为众所周知它们有错误的信息。见： [http ://w3fools.com/](http://w3fools.com/)

# php - 摆脱空白行但保持其他人完好无损

> ID：10792413
> 
> 赞同：3
> 
> 时间：2012-05-29T02:24:12.650
> 
> 标签：php, regex

从文件中删除一个条目后，在该条目所在的位置留下一个空白行，并且想知道如何在脚本执行的同时摆脱它。

我的 data.txt 文件包含以下条目：

```
1
12
123 (line to be deleted)
1234
(blank line, carriage return) 
```

加上我想保留的行底部的空行，但不是删除条目后留下的空行。

删除条目后我剩下的内容：

```
1
12

1234
(blank line, which I want to keep intact) 
```

这是我目前的工作代码：

```
$bodycont = preg_replace("/\b({$_POST['inscripnum1']})\b/","",$index); 
```

如何在同一行上实现某些内容以删除号码所在的行？

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T02:29:27.147

捕获正则表达式中的换行符：

```
$bodycont = preg_replace("/\b({$_POST['inscripnum1']})\b\n/","",$index); 
```

# php - php curl - 使用 http 身份验证访问 url（需要帮助）

> ID：10792419
> 
> 赞同：5
> 
> 时间：2012-05-29T02:25:53.583
> 
> 标签：php, authentication, curl

我在 HTTP 身份验证中遇到问题。我无法获取此 url 的内容，因为它需要 http auth。

代码：

```
<?php

$url = "http://www.abcdefg.com/12345/";

$username = 'username';
$password = 'password';

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_ANY);
curl_setopt($ch, CURLOPT_USERPWD, "$username:$password");

$out = curl_exec($ch);

print "error:" . curl_error($ch) . "<br />";
print "output:" . $out . "<br /><br />";

curl_close($ch);

?> 
```

问题是：它没有显示真实内容，而是显示**“302 Found，文档已移至此处”。**

我试过“http://username:password@www.abcdefg.com/12345/”，还是不行。

访问此 url(1) 时，弹出窗口要求输入用户名和密码。但弹出窗口来自另一个 url(2)（一个 sso 身份验证服务器）。如果通过认证。然后它再次回到 url(1)。这时候，我可以访问这个url(1)的内容了。

我使用**firebug**通过直接从浏览器访问 url 来获取以下消息：

**步骤1**

```
URL: GET http://www.abcdefg.com/12345/
Status: 302 Found
Protocol: http 
```

**第2步**

```
URL: GET https://www.ssoauth.com/obrareq.cgi?wh=xxx wu=xxx wo=xxx rh=http://www.abcdefg.com ru=/12345/
Status: 302 Redirect
Protocol: https 
```

**第 3 步**

```
URL: GET http://www.abcdefg.com/obrar.cgi?cookie=xxxxxxxxxxxxxxx
Status: 302 Found
Protocol: http 
```

**第4步**

```
URL: GET http://www.abcdefg.com/12345/
Status: 200 OK
Protocol: http 
```

然后显示内容……</p>

**这与cookie有关吗？如何使用 php curl 读取内容？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T02:30:22.397

你必须设置：

```
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true); 
```

这将使 cURL 服从 302 并生成额外的请求。

# php - 如何将模型层的消息或输出集成到模板页面中

> ID：10792422
> 
> 赞同：1
> 
> 时间：2012-05-29T02:26:16.727
> 
> 标签：php, model-view-controller, template-engine, separation-of-concerns

我正在使用 PHP 进行模板化。我知道那里有模板引擎，但我想要一些简单的小项目。这是我的问题：

我的大部分输出都存储在变量 $contents 中并分配给模板以显示在我页面的内容部分

但有时我的模型中有 echo("blah blah") [比如出现异常，查询失败]，我想将它传递给我的页面。

问题是此输出显示在页面之前，例如

```
$contents = "I want to show this";

$news = $news->getNews();

//concatenate
$contents = $contents.''.[resultsfromnews]

$template = new Template();
$template->content = $contents; //and so on
$template->display(); 
```

如果`$news->getNews()`方法或其调用的方法回显某些内容，例如（'数据库特定错误，异常），它们会在`$template->display()`调用之前显示

> *`getNews()`在页面内容之前显示自定义错误信息/通知*
> 
> **普通页面内容**
> 
> Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat。Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat。Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi。Nam liber tempor cum soluta nobis eleifend option congue nihil imperdiet doming id

请帮助我解决方案......这些输出如何成为我要显示的内容的一部分。

我觉得所有流行的模板引擎（Smarty、Twig、phpsavant 等）都可能出现这个问题——它是如何处理的？

**我一直在寻找一段时间以了解它在其他模板引擎中的工作原理 - 还没有接近 **

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T14:28:59.997

要回答您的问题：

```
$contents = "I want to show this";    

ob_start();
$news = $news->getNews();
$buffer = ob_get_contents();
ob_end_clean();

//concatenate
$contents = $contents.$buffer.''.[resultsfromnews]

$template = new Template();
$template->content = $contents; //and so on
$template->display(); 
```

但是，不应该在模型中呼应。最好在设置输出之前抛出异常并捕获它们。

# java - java视频小程序到icecast

> ID：10792423
> 
> 赞同：0
> 
> 时间：2012-05-29T02:26:23.200
> 
> 标签：java, opencv, webcam, icecast

我正在组装一个基于 HTML5 的网络广播客户端，但遇到了网络摄像头流媒体。我目前使用 icecast 将视频流式传输到客户端，但这需要为每个操作系统使用不同的源客户端以及为每台计算机安装。在 StreamAPI 支持网络摄像头到服务器之前，我一直在研究使用 Java Applet，并且已经看到推荐使用 OpenCV 来获取视频。现在我正在尝试找到一个库来将视频传递给 Icecast。有没有这样的东西可用？如果这样会更好，我也愿意使用其他小程序设计（即闪存）。

# php - 使用 php 的更短的 url

> ID：10792425
> 
> 赞同：1
> 
> 时间：2012-05-29T02:26:51.573
> 
> 标签：php

我以前见过它，但我不知道该怎么做或在谷歌上寻找什么来找到它。基本上我想知道如何让这些缩短的网址起作用，我的意思是例如

这个：[http](http://website.com/index.php?id=666) ://website.com/index.php?id= 666 变成了这个：[http ://website.com/666](http://website.com/666)

有没有办法通过 php 来做到这一点，或者人们实际上是否会为每个 id 制作地图？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T02:28:08.010

您好，这取决于您使用的服务器，但如果您使用的是具有 mod 重写功能的 apache 服务器，您可以使用 htaccess 规则。

所以一个例子是：

首先创建一个 .htaccess 文件，然后粘贴以下内容：

```
RewriteEngine on

RewriteRule ^([^/\.]+)?$ index.php?id=$1 [L] 
```

# ms-access - Access - 从表单中的图像控件导出图像

> ID：10792426
> 
> 赞同：3
> 
> 时间：2012-05-29T02:27:04.777
> 
> 标签：ms-access, optimization, ms-access-2007

*我一直在寻找一种从访问表单中提取图像的方法。在 Google 上搜索几乎总是指向[OLEtoDisk](http://www.lebans.com/oletodisk.htm)。该软件允许导出存储在访问表内的 OLE 字段中的图像。这不是我想要的。*

我有一个带有一些徽标、标题和背景图像的表单。这些图像使数据库变得越来越大（因为它们嵌入在表单中）。我会提取它们，将它们与后端文件一起放在我们的服务器上，然后将它们添加回我的表单，但这次是作为链接图像而不是嵌入图像。

我希望我清楚自己。欢迎任何建议。

编辑：添加了我用来将图像控件的 PictureData 导出为图像文件的代码。此代码无法按预期工作。我发现 PictureData 是一个字节数组，但是在将它复制到一个文件中之后，我每两个字符得到一个 NUL 字符。

```
Public Function savePict(pImage As Access.Image)
    Dim fname As String 'The name of the file to save the picture to
    Dim iFileNum As Double

    fname = Environ("Temp") + "\temp.png" ' Destination file path
    iFileNum = FreeFile 'The next free file from the file system

    Open fname For Binary Access Write As iFileNum
        Dim tbyte As Variant
        Dim i As Double
        'Write the byte array to the file
        For i = 0 To Len(pImage.PictureData)
            Put #iFileNum, , pImage.PictureData(i)
        Next i
    Close #iFileNum
End Function 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T18:28:25.797

图片数据是一个EMF文件，有一个8字节的包装。这是您的例程修改为使用正确的文件扩展名

```
Public Function savePict(pImage As Access.Image)
    Dim fname As String 'The name of the file to save the picture to
    Dim iFileNum As Double
    Dim bArray() As Byte, cArray() As Byte
    Dim lngRet As Long

    fname = Environ("Temp") + "\temp.emf" ' Destination file path
    iFileNum = FreeFile 'The next free file from the file system

    ' Resize to hold entire PictureData prop
    ReDim bArray(LenB(pImage.PictureData) - 1)
    ' Resize to hold the EMF wrapped in the PictureData prop
    ReDim cArray(LenB(pImage.PictureData) - (1 + 8))
    ' Copy to our array
    bArray = pImage.PictureData
    For lngRet = 8 To UBound(cArray) 
        cArray(lngRet - 8) = bArray(lngRet)
    Next

    Open fname For Binary Access Write As iFileNum
    'Write the byte array to the file
    Put #iFileNum, , cArray
    Close #iFileNum
End Function 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T03:53:43.463

最后是按预期工作的代码：从表单的图像控件导出 PNG 图像。

```
Public Function savePict(pImage As Access.Image)
    Dim fname As String 'The name of the file to save the picture to
    fname = Environ("Temp") + "\temp.png" ' Destination file path

    Dim iFileNum As Double
    iFileNum = FreeFile 'The next free file from the file system

    Dim pngImage As String 'Stores the image data as a string
    pngImage = StrConv(pImage.PictureData, vbUnicode) 'Convert the byte array to a string

    'Writes the string to the file
    Open fname For Binary Access Write As iFileNum
        Put #iFileNum, , pngImage
    Close #iFileNum
End Function 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-05T17:38:34.517

1.  获取具有您喜欢的背景图像或自动套用格式的表单
2.  右键单击导航窗格中的表单并选择导出 >> XML
3.  在向导的第一页上，选择一个目标来放置一些文件（桌面很好）
4.  然后将出现一个带有三个复选框的小对话框
5.  选择第一个选项（数据）和第三个选项（演示），然后单击确定
6.  导出完成后单击向导最后一页的关闭按钮

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-27T21:48:32.577

如果您希望在另一个访问数据库中重新使用该图像（即您丢失了原始图像文件，但想在其他地方使用它），一个更简单的方法是将对象（表单、报告等）导入您的新数据库使用外部数据 -> 访问菜单访问数据库。

然后，您可以将图像控件复制粘贴到您想要使用它的位置...

不幸的是，在 Access 数据库之间复制/粘贴图像控件并不能如您所愿。

# javascript - 试图用动画制作一个随机字符串生成器

> ID：10792427
> 
> 赞同：1
> 
> 时间：2012-05-29T02:27:22.423
> 
> 标签：javascript

我正在尝试创建一个带有动画的字符串随机化器，但它不起作用。

我使用此函数按照浏览器选择的帧速率调用该函数：

```
window.requestAnimFrame = (function(){
  return  window.requestAnimationFrame       || 
          window.webkitRequestAnimationFrame || 
          window.mozRequestAnimationFrame    || 
          window.oRequestAnimationFrame      || 
          window.msRequestAnimationFrame     || 
          function( callback,  element){
            window.setTimeout(callback, 1000 / 60);
          };
})(); 
```

接下来是我生成和显示字符串的方法：

```
function create(chars,string_length){
output = [];
var randomstring = '';
    for (var i=0; i<string_length; i++) {
        var rnum = Math.floor(Math.random() * chars.length);
        randomstring += chars.substring(rnum,rnum+1);
    }

    output.push(randomstring);

    document.getElementById('cb').innerHTML = (output.join(''));
}

var chars =  "ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz";
var length = 20;

requestAnimFrame( create(chars,length) ); 
```

它为我的 div 'id' 生成一个字符串，但只生成一次 - 所以该函数可以工作，但它不会一直被调用 =/

为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T02:35:00.113

当您使用 requestAnimationFrame 时，它​​只会运行一次该函数。您需要修改`create()`以再次对自身调用 requestAnimationFrame。此外，您还犯了另一个错误：`create()`您实际上不是将函数传递给 requestAnimationFrame，而是调用`create(chars, length)`然后将结果传递给 requestAnimationFrame。这是一个应该可以工作的版本：

```
function create(chars,string_length){
    output = [];
    var randomstring = '';
    for (var i=0; i<string_length; i++) {
        var rnum = Math.floor(Math.random() * chars.length);
        randomstring += chars.substring(rnum,rnum+1);
    }

    output.push(randomstring);

    document.getElementById('cb').innerHTML = (output.join(''));

    requestAnimFrame(function(){ create(chars,string_length); });
}

var chars =  "ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz";
var length = 20;

requestAnimFrame(function(){ create(chars,length) }); 
```

# ruby-on-rails - 在 Rails 3 表单中处理非 utf-8 数据提交的最佳方法是什么？

> ID：10792435
> 
> 赞同：2
> 
> 时间：2012-05-29T02:29:18.480
> 
> 标签：ruby-on-rails, ruby, encoding, utf-8

我正在使用 Rails 3.2.3 和 Ruby 1.9.3。我有一个名为 Post 的模型，它接受标题和描述。站点前端通过ajax请求接收通过后端提交的信息。当我填写表格时，让我们说

```
title: foo
content: foobar 
```

并提交它，我可以毫无问题地通过前端查看数据。

但是，每当我通过表单提交非 utf8 数据时，例如（注意花哨的引号）：

```
title: foo
content: “foobar” 
```

当我尝试呈现表单时，出现以下错误：

```
ActionView::Template::Error (incompatible encoding regexp match (UTF-8 regexp with ASCII-8BIT string)) 
```

我的 .js.erb 文件如下所示：

```
$("#my_post").html('<%= escape_javascript(render :partial => 'post') %>'); 
```

我意识到这是编码的问题，但我不确定我应该如何以最好的方式处理它。我想到了几个选择：

1.  使用 iconv 库去除非 utf8 - 通过 before_save 过滤器为我的应用程序中的每个模型执行此操作
2.  [在 js 的顶部指定](https://stackoverflow.com/questions/9428027/why-does-rails-3-pitch-a-fit-about-utf-8-character-encoding)文档包含 utf-8（不确定这是否可行）
3.  在我的表单中使用`accept-charset="UTF-8"`强制浏览器避免提交非 utf-8 内容。

我什至不确定这些解决方案是否会有所帮助，而最有效的方法是。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T02:41:49.070

你需要仔细看看是否

*   您实际上是在向您的应用发送非 UTF-8 数据，或者
*   您正在发送 UTF-8 数据，但 Ruby/Rails 无法识别它

要查看它是什么，您需要检查“电线”上的数据。（在 Internet 上发送的内容。）使用诸如[Wireshark](http://www.wireshark.org/)之类的窥视工具或诸如[Fiddler之类的代理间谍](http://www.fiddler2.com/fiddler2/)

可以使用 8859 或 UTF-8 发送弯引号。

**建议**您应该将 HTML 页面设置为 UTF-8。从页面上的脚本发送的任何 Ajax 也应该使用 UTF-8。见[http://www.utf8.com/](http://www.utf8.com/)

**添加**（回复：关于 Rails 如何设置表单字符编码的评论）

Ajax 字符编码的问题是**页面的**编码设置如何。[一篇博文。](http://www.kanthak.net/explorations/blog/rails/ajax_and_charsets.html)所以一定要在你的页面模板中设置页面的 UTF-8 编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T03:14:19.620

我怀疑您没有使用表单助手，因为您提到了添加`accept-charset="UTF-8"`到表单的问题。

表单助手将添加`accept-charset`属性以及[snowman 参数](https://stackoverflow.com/a/3348524/283398)，它们一起应确保您从浏览器获取 UTF-8 数据。

请参阅[Rails 表单助手](http://guides.rubyonrails.org/form_helpers.html)指南。

# java - ANTLR 从命令行使用 Java：哪个 jar 以及我在哪里得到它？

> ID：10792438
> 
> 赞同：0
> 
> 时间：2012-05-29T02:29:32.180
> 
> 标签：java, antlr

我想从命令行运行一个 ANTLR jar 来运行解析器，如[http://www.antlr.org/wiki/pages/viewpage.action?pageId=729](http://www.antlr.org/wiki/pages/viewpage.action?pageId=729)底部所述，它说，

> 如果我想在不生成代码的情况下测试我的解析器怎么办？简单的。只需在解释器模式下运行 ANTLR。它无法执行您的操作，但它可以根据您的输入创建一个解析树，以向您展示它是如何匹配的。使用 org.antlr.tool.Interp 主类。在下文中，我解释了 tc 上的 simplec.g，其中包含“int x;”

并遵循

> $ java org.antlr.tool.Interp simplec.g WS 程序 tc

我要下载哪个 jar，我在哪里可以得到它？我尝试了 antlr-3.4-complete.jar，但输出表明这可能只是解析器生成器。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T19:33:59.930

我刚开始使用 ANTLR 并发现使用它进行开发，并且 java 在 Eclipse 中使用 ANTLR IDE 插件快速而直接。这将使您了解该过程是什么样的： [Testing ANTLR Grammar](https://stackoverflow.com/questions/10838068/testing-antlr-grammar/10886842#10886842)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T03:42:51.493

> 我下载哪个jar

命令后面的句子是这样说的：

> *“在上述命令中，我们正在考虑 ANTLR3 jar 位于您的类路径中。”*

其中 ANTLR3 jar 大概是指页面前面提到的 antlr-3.1.2.jar 文件。

> ...我在哪里可以得到它？

ANTLR FAQ 回答了这个问题：

*   [“我在哪里找到这该死的东西”](http://www.antlr.org/wiki/pages/viewpage.action?pageId=734)

# ios - 在 iOS 模拟器中使用 MPMediaPickerController 时出现运行时错误

> ID：10792442
> 
> 赞同：12
> 
> 时间：2012-05-29T02:30:23.797
> 
> 标签：ios, ios-simulator, mpmediapickercontroller

当我尝试`MPMediaPickerController`在 iOS 模拟器上使用 运行应用程序时，会发生以下情况。

```
2012-05-28 22:26:42.416 My App[48426:11f03] Could not load source: 3
2012-05-28 22:26:42.418 My App[48426:11f03] *** Assertion failure in -[MPMediaPickerController loadView], /SourceCache/MediaPlayer_Sim/MobileMusicPlayer-1391.72/SDK/MPMediaPickerController.m:86
2012-05-28 22:26:42.419 My App[48426:11f03] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Unable to load iPodUI.framework' 
```

这是我的 App/Xcode/iOS 模拟器中的一些问题，还是 iOS 模拟器根本不支持`MPMediaPickerController`？如果没有，除了在物理设备上运行之外，还有其他选择吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-31T20:17:38.207

MPMediaPickerController 在模拟器中不起作用。Apple在“Hello Music Player”下的“ [iPod Library Access Programming Guide ”中对此进行了说明。](http://developer.apple.com/library/ios/#documentation/Audio/Conceptual/iPodLibraryAccess_Guide/AboutiPodLibraryAccess/AboutiPodLibraryAccess.html#//apple_ref/doc/uid/TP40008765-CH103-SW9)笔记说：

> 注意：要执行这些步骤，您需要一个预配置的设备，因为模拟器无法访问设备的 iPod 库。

为了防止断言，您可以随时检查您是否可以在代码中访问执行此操作（下面的代码使用 ARC 和 iOS SDK 5.0）。

```
MPMediaPickerController *picker = [[MPMediaPickerController alloc] initWithMediaTypes:MPMediaTypeAnyAudio];

[picker setDelegate:self];
[picker setAllowsPickingMultipleItems:YES];
[picker setPrompt:NSLocalizedString(@"Add songs to play","Prompt in media item picker")];

@try {
    [picker loadView]; // Will throw an exception in iOS simulator
    [self presentViewController:picker animated:YES completion:nil];
}
@catch (NSException *exception) {
    [[[UIAlertView alloc] initWithTitle:NSLocalizedString(@"Oops!",@"Error title")
                                message:NSLocalizedString(@"The music library is not available.",@"Error message when MPMediaPickerController fails to load") 
                               delegate:nil 
                      cancelButtonTitle:@"OK" 
                      otherButtonTitles:nil] show];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T02:56:22.287

另外（如果使用故事板）你可以试试：

```
- (IBAction)showPicker:(id)sender
{
#if TARGET_IPHONE_SIMULATOR
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"playerTest"
                                                    message:@"Media picker didn't work in simulator, please run this app on device"
                                                   delegate:nil
                                          cancelButtonTitle:@"OK"
                                          otherButtonTitles:nil];
    [alert show];
#else
    [self performSegueWithIdentifier:@"ShowPickerViewSegue" sender:self];
#endif
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-11T11:42:31.227

`MPMediaPickerController`现在可以在 iOS 模拟器中工作，无需任何额外的代码更改（至少从 iOS 8 开始，可能更早）。这是一个可以演示它的项目：[GVMusicPlayerController](https://github.com/gangverk/GVMusicPlayerController)。

您必须通过从实际设备复制必要的文件（最重要的是`MediaLibrary.sqlitedb`数据库文件）来准备模拟器中的音乐库。如果您想播放文件并查看图稿，您还必须复制`iTunes_Control/Music`、`Purchases`和`Artwork`文件夹（在 中找到`/var/mobile/Media/`）。有关详细信息，请参阅此问题：[我可以在模拟器上访问 iPod 库吗？](https://stackoverflow.com/q/3159716/381233).

# php - 回显链接到更大图像的缩略图

> ID：10792444
> 
> 赞同：0
> 
> 时间：2012-05-29T02:30:32.807
> 
> 标签：php, navigation, thumbnails

我有一个脚本可以扫描缩略图目录并将它们回显到页面。它工作得很好，但缩略图不可点击，我真的希望是这样。`echo "<img src='$thumbnail' class='resizesmall'>";` 是缩略图被回显的行。我不确定如何在不破坏它的情况下写入 php 中较大图像的路径。也许这应该在 foreach 语句中完成？感谢您的帮助？

```
$dir = "../mysite/thumbnails/";
$dh = opendir($dir);

// echo "$dh";
$gallery = array();
while($filename = readdir($dh))
{
$filepath = $dir.$filename;

//pregmatch used to be ereg
if (is_file($filepath) and preg_match("/\.png/",$filename))
{
$gallery[] = $filepath;
}
}
sort($gallery);
foreach($gallery as $thumbnail)
{
echo "<img src='$thumbnail' class='resizesmall'>";
}
?>
</div>
<??> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T02:44:16.633

最简单的方法是设置您的拇指和全尺寸图像命名相同的情况。所以你可能有 thumbs/image1.png 和 full/image1.png。然后不要使用 $thumbnail，而是使用变量 $image 或类似的东西，这样代码才能更好地阅读。您还需要将 $filepath 排除在外，以便 $image 最终成为文件名。

```
foreach($gallery as $image)
{
    echo "<a href='full/$image'><img src='thumb/$image' class='resizesmall'></a>";
} 
```

您可能需要进行一些检查以确保存在匹配的图像，以防止错误或不良 UX。但是，上面的代码应该可以工作。

# .net - 如何在 WPF 中显示“IntelliSense Babel 图标”？

> ID：10792445
> 
> 赞同：4
> 
> 时间：2012-05-29T02:30:33.540
> 
> 标签：.net, wpf, babeljs

*   如何在 WPF 应用程序中显示这些“IntelliSense Babel 图标”？

    *   在哪里可以找到这些图标？

    *   是否有任何 API 可以获取这些图标？

（我将在 WPF 函数中开发智能感知功能，当用户在文本框中键入时，这些图标将显示。）

非常感谢。

![在此处输入图像描述](../Images/4d19b118c3f68b8a2291c8a09f7889a7.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T02:40:58.603

这些图标是 Visual Studio 内部的。您*可能*可以在 VS dll 中找到它们，但不能保证。我要注意的是，这些图标实际上是受微软版权保护的，所以在你的程序中使用它们可能是非法的；我不是律师，但如果您打算走这条路，请咨询律师。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T02:41:44.953

[http://msdn.microsoft.com/en-us/library/ie/bb166017.aspx](http://msdn.microsoft.com/en-us/library/ie/bb166017.aspx)

这应该为您指明正确的方向。

# php - 在动作视图的开头或结尾渲染额外的 html

> ID：10792446
> 
> 赞同：1
> 
> 时间：2012-05-29T02:30:42.823
> 
> 标签：php, model-view-controller, zend-framework

我有 Zend Framework MVC 应用程序，其模块结构类似于上面：

```
/application
  /layouts
    /sripts
      /layout.phtml
  /modules
    /default
      /controllers
        /IndexController.php
        /OtherController.php
      /views
        /scripts
          /index
            /index.phtml
            /second.phtml
            /third.phtml
            /fourth.phtml
          /other
            /index.phtml
            /second.phtml
            /third.phtml
            /fourth.phtml 
```

在我的 layout.phtml 中有一行

```
<div id="main">
    <?= $this->layout()->content ?>
</div> 
```

我想在 IndexController 和 OtherController 的每个动作中包装渲染的动作视图，除了第四个，还有一些代码，比如`<div id='top'></div>`在开始时和`<div id='bottom'></div>`渲染动作视图的末尾。我不想在每个操作视图 *.phtml 文件中手动执行此操作。实际应用中存在太多问题，除了代码看起来与该解决方案相混淆。

怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T02:35:04.733

您可以只为`IndexController`and设置不同的布局`OtherController`：在`init()`每个控制器的方法中，您可以添加以下内容：

```
Zend_Layout::getMvcInstance()->setLayout('some other layout'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T20:07:16.780

在布局文件中，您可以回显布局变量。这通常是我们放置动作呈现的 html 的地方。您可以将多个操作的渲染附加到单个布局变量中，它们将以 LIFO 顺序显示。下面是如何将该变量插入到布局文件中：

```
<?php echo $this->layout()->myLayoutVariable; ?> 
```

您还可以在布局文件中设置占位符变量：

```
<?php echo $this->placeholder('myPlaceholderVariable'); ?> 
```

然后，在您的一个视图文件中，您可以为此占位符变量提供 html 内容：

```
<?php
    $this->placeholder('myPlaceholderVariable')->append('<p>HTML GOES HERE</p>');
?> 
```

如果您没有为占位符变量设置任何值，则布局文件中不会呈现任何内容。但是，如果您确实为该占位符变量设置了一个值，它将被插入到 html 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T02:45:30.870

试试这个：

```
$(document).ready(function(){

   $("#main").before(//insert header html here);
   $("#main").after(//insert footer html here);

}); 
```

我不确定你所说的第四个是什么意思，但如果你想定位一个特定的控制器/动作，你可以抓住 window.location.href 并使你的函数依赖于你想要查找的特定 URL。

希望有帮助。

# php - 从所有其他类调用类 - PHP

> ID：10792452
> 
> 赞同：1
> 
> 时间：2012-05-29T02:33:37.860
> 
> 标签：php, oop, class, variables, instantiation

所以我有一个 config.php 文件，它包含在网站上每个页面顶部的标记之前。该文件使用 __autoload() 来获取我使用的所有 php 类。然后，在自动加载它们之后，我将类分配给像这样的变量......

```
$myclass = new Myclass();
$mysecondclass = new MySecondClass(); 
```

当我想在 $myclass 中调用 $mysecondclass 时，我得到一个未定义的变量错误。这当然是因为 $mysecondclass 没有在 $myclass 之前定义。如何解决这个问题，我可以定义任何其他类的所有类？

谢谢你的帮助：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T02:41:48.663

最好的 OOP 方法是使用带有属性的 superObject，这些属性是其他类的对象。

```
class Context{
  var $myClass;

  var $myOtherClass;

  var $db;

  //...
} 
```

在你的`MyClass`

```
class MyClass{

  var $context;

  public function __construct(&context){
    $this->context = $context;
  }

  public function otherFunction(){
    $this->context->myOtherClass->functionFromOtherClass();
  }
} 
```

您应该使用工厂方法或任何管理对象的机制来实例化这些类。

要初始化`MyClass`，您将实现类似这样的东西。

```
ObjectFactory::createObject('MyClass',$context); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T02:43:02.967

`$myclass`是不是`Myclass`它是`Myclass`（对象）的一个实例。对象不是类。如果您想在 的实例中使用 的新实例`MySecondClass`，`Myclass`只需在其中实例化它即可。

您的问题还涉及范围。您已经在全局范围内创建了这两个对象。它们不能在彼此内部自动访问。如果你有一些对象，你只有一个实例，并且你希望它是全局的并且可以被其他人访问，你可以使用`global`关键字将它导入到他们的作用域中。但是，这通常不是最好的方法。相反，您可能想要查找`Singleton Pattern`. 它为您提供了一种确保特定类仅被实例化一次的方法，并为您提供了一种访问由于该实例化而创建的对象的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T03:00:05.420

注册表模式也是在代码中的任何位置访问“全局”对象的简单方法。

你可以看看 Zend_Registry： http: [//framework.zend.com/manual/en/zend.registry.using.html](http://framework.zend.com/manual/en/zend.registry.using.html)

```
$myclass = new Myclass();
$mysecondclass = new MySecondClass();
Zend_Registry::set('mysecondclass', $mysecondclass);
$myclass->doSomething();

class Myclass
{
    public function doSomething()
    {
        // use $mysecondclass via the registry
        Zend_Registry::get('mysecondclass')->methodFromSecondClass();
    }
}

class MySecondClass
{
    public function methodFromSecondClass()
    {
        return true;        
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T03:09:04.867

根据您的类的工作方式，考虑扩展它们...扩展`MyClass`为`MySecondClass`自动提供对父属性/函数的访问。

我的课

```
class MyClass{
    function myFunction(){
         // code here
    }
} 
```

我的第二类

```
class MySecondClass extends MyClass{
    function __construct(){
         $this->myFunction();
    }
} 
```

# android - Android中的图像自动捕获

> ID：10792454
> 
> 赞同：1
> 
> 时间：2012-05-29T02:33:44.943
> 
> 标签：android, android-layout, android-intent, android-emulator

有没有办法使用以下代码自动拍照，即根本没有按钮点击。不久之后，图像可以自动拍摄并存储在 SD 卡上。

```
protected void startCameraActivity() {

    Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
    intent.putExtra(MediaStore.EXTRA_OUTPUT,Uri.fromFile(new File(file_name)));
    startActivityForResult(intent, 1);
    finish();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T03:34:15.450

不，一旦你启动了一个 Intent，你就真的无法控制你启动的 Activity（假设它不是你自己写的）。在您的情况下，您必须制作自己的 Activity 并使用 Camera API。

看看这个教程：

[http://marakana.com/forums/android/examples/39.html](http://marakana.com/forums/android/examples/39.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T02:54:31.653

您可以根据您的要求一起使用`Timer`& Class。`TimerTask`只需研究以下代码并根据您的使用情况进行修改。

```
import java.util.Timer;
import java.util.TimerTask;

class MyTimerTask extends TimerTask 
{
  public void run() 
  {
      // Put your camera capturing and photo saving code here
  }
}

public class MainClass 
{
  public static void main(String args[]) 
  {
    MyTimerTask myTask = new MyTimerTask();
    Timer myTimer = new Timer();

    /*
     * Set an initial delay of 15 second, then repeat every 10 second.
     */

    myTimer.schedule(myTask, 15000, 1000);
  }
} 
```

# java - Android，解析 JSON 对象

> ID：10792455
> 
> 赞同：1
> 
> 时间：2012-05-29T02:33:51.383
> 
> 标签：java, android, json, parsing, arrays

当我调用服务器时，它的响应基于 json 对象。实际上，我知道如何解析 JSON 对象，但这个响应对我来说很奇怪。服务器响应是：

```
{"body":"Not Available!","clazz":"SoccerMatchPreview","id":{"inc":-2024241794,"machine":415106952,"new":false,"time":1337861978000,"timeSecond":1337861978},"publishedDate":"2012-06-08 17:00:00 +0100","refKey":"SoccerMatchPreview_4fb897be18be8b87f9117595","title":"Poland vs Greece"} 
```

我需要的那些信息是 body、publishedDate、refKey 和 title。我基于 JSON 对象编写的代码是这样的：

```
JSONObject jObject = new JSONObject(response);
                    JSONArray contestantObjects = jObject.getJSONArray("id");
                    for(int i=0; i<contestantObjects.length(); i++) {
                        mPreview.setBody(contestantObjects.getJSONObject(i).getString("body").toString());
                        mPreview.setPublishedDate(contestantObjects.getJSONObject(i).getString("publishedDate").toString());
                        mPreview.setRefKey(contestantObjects.getJSONObject(i).getString("refKey").toString());
                        mPreview.setTitle(contestantObjects.getJSONObject(i).getString("title").toString());
                    } 
```

但是因为它没有“[]”，所以我认为它不是 JSON 对象。因此，我编写了另一个基于代码的 JSON 数组。

```
JSONArray contestantObjects = new JSONArray(response);
                    for(int i=0; i<contestantObjects.length(); i++) {
                        mPreview.setBody(contestantObjects.getJSONObject(i).getString("body").toString());
                        mPreview.setPublishedDate(contestantObjects.getJSONObject(i).getString("publishedDate").toString());
                        mPreview.setRefKey(contestantObjects.getJSONObject(i).getString("refKey").toString());
                        mPreview.setTitle(contestantObjects.getJSONObject(i).getString("title").toString());
                    } 
```

但结果相同，Logcat 显示：

> 值 {"id":{"timeSecond":1337861978,"time":1337861978000,"new":false,"machine":415106952,"inc":-2024241794},"body":"不可用！"," org.json 类型的标题":"波兰 vs 希腊","publishedDate":"2012-06-08 17:00:00 +0100","clazz":"SoccerMatchPreview","re​​fKey":"SoccerMatchPreview_4fb897be18be8b87f9117595"}。 JSONObject 无法转换为 JSONArray

任何建议将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T02:36:24.450

```
JSONArray contestantObjects = jObject.getJSONArray("id"); 
```

你的错误在这里，`id`它本身就是一个复杂的对象，而不是一个数组。

```
"id":{"inc":-2024241794,"machine":415106952,"new":false,"time":1337861978000,"timeSecond":1337861978} 
```

因此，在获取`id`JSON 对象后，您应该能够获取各个属性，例如`inc`、`machine`、`new`、`time`和`timeSecond`。

```
JSONObject idObject = ...getJSONObject("id");
String machine = idObject.get("machine"); 
```

JSON 数组数据结构看起来像这样：`[]`表示一个数组。

例如，`"Animals":["Pig", "Cat", "Dog"]`。

在另一个例子中，它也可以是一个复杂对象的数组，`"Animals":[{"name":"AAA", "blood":"A"}, {"name":"BBB", "blood":"B"}]`.

**编辑：这是我推荐的一个很好的 JSON 可视化工具。**

[http://jsonviewer.stack.hu/](http://jsonviewer.stack.hu/)

![在此处输入图像描述](../Images/ffbf30c0e4d46dd2e0333ef0ff9b852b.png)

# database - codeigniter insert ：特殊字符修剪我的字符串值

> ID：10792462
> 
> 赞同：0
> 
> 时间：2012-05-29T02:35:13.557
> 
> 标签：database, codeigniter, character-encoding, insert

我在执行从文本文件加载的插入命令时遇到问题。我使用codeIgniter "file" helper 来加载一个sql 行，然后我执行一个简单的db->query( `content of my file`)。问题是当从文件加载 sql 时，特殊字符会修剪字符串的其余部分。

这是一个有效的例子

```
INSERT INTO test(test) VALUES("<p>There is <strong>no special character</strong> in this string</p>"); 
```

**行不通**的例子

 **```
INSERT INTO test(test) VALUES("<p>this character <em>é</em> is a <strong>special character</strong></p>"); 
```

在第二个例子中，只有`"<p> this character <em>"`将被保存。这很奇怪，因为如果我在 phpMyAdmin 中执行同一行，它就可以正常工作。

有谁知道为什么会这样？还是我做错了什么？

谢谢

* * *

这是一个简单的“重现步骤”。

简单表：

```
CREATE TABLE `test` (
`test` TEXT CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL
) ENGINE = InnoDB; 
```

一个文件“application/view/text.txt”包含：

```
INSERT INTO test(test) VALUES("<p>this character <em>é</em> is a <strong>special character</strong></p>"); 
```

我用来执行插入的代码

```
$this->load->helper('file');
$loaded_sql = read_file(BASEPATH . "../application/views/test.txt");
$this->db->query($loaded_sql); 
```

我的数据库配置

```
$db['default']['char_set'] = 'utf8';
$db['default']['dbcollat'] = 'utf8_general_ci'; 
```

CI 配置

```
$config['charset'] = 'UTF-8'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T15:32:49.687

我终于明白了。读取文件时需要使用“utf8_encode()”来确定特殊字符是否正确编码。文本文件必须以 ANSI 编码（默认记事本编码）。如果文件是 UTF-8 或 UNICODE 它将不起作用！

解决问题的代码：

```
$loaded_sql = utf8_encode( read_file(BASEPATH . "../application/views/test.txt") ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T09:12:07.157

尝试在表中插入记录之前使用。

```
$this->db->db_set_charset('latin1', 'latin1_swedish_ci'); 
```

确保您在表格和表格列中具有相同的设置。**

# android - 如何在我的 android 应用程序中实现应用内购买？

> ID：10792465
> 
> 赞同：18
> 
> 时间：2012-05-29T02:35:34.313
> 
> 标签：android, in-app-purchase

如何在我的 android 应用程序中实现应用内购买？

我提到

[http://developer.android.com/guide/market/billing/billing_integrate.html#billing-service](http://developer.android.com/guide/market/billing/billing_integrate.html#billing-service)

此链接，但我不明白绑定到 MarketBillingService 步骤。

请给我正确的例子..

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-10T12:00:23.790

这是另一篇解释应用内购买的博客文章：

[http://blog.blundellapps.com/simple-inapp-billing-payment/](http://blog.blundellapps.com/simple-inapp-billing-payment/)

我最近还写了一个带有流程图的概述来尝试解释 InApp 购买：

[http://blog.blundellapps.com/overview-of-android-in-app-billing-flowchart/](http://blog.blundellapps.com/overview-of-android-in-app-billing-flowchart/)

![在此处输入图像描述](../Images/6aa9c35d4fc1fef13c18a53f007b6608.png)

# php - 通过进度条收集数据的 PHP 表单

> ID：10792468
> 
> 赞同：0
> 
> 时间：2012-05-29T02:35:56.967
> 
> 标签：php, mysql, forms, time, reloading

我一直在解决我的大部分问题，查看已经回答的问题，但是对于这个我找不到任何问题，而且我真的不知道从哪里开始寻找。

我想创建一个页面，收集全天 3 种类型的时间，好时间、坏时间和计划时间，所以当我从好时间到坏时间或计划时间时，我重新加载页面并节省总时间和之前的坏、好和计划时间，它基本上是对整体设备效率的衡量，我还想显示一个进度条，按颜色显示好、坏和计划停机时间，按出现的顺序，我知道如何使用 JQuery 图来做到这一点，但我不知道如何通过重新加载来“管理”时间。

我不是要代码，只是为了一个好的“搜索词”或我应该使用的函数，我只是在使用 PHP 和 MySQL。

# macos - 如何在 mac os 中使用核心音频 API 的“kAudioUnitSubType_VoiceProcessingIO”子类型？

> ID：10792469
> 
> 赞同：6
> 
> 时间：2012-05-29T02:36:12.487
> 
> 标签：macos, core-audio

我在macosx中找到了一个使用内置麦克风/扬声器和**kAudioUnitSubType_VoiceProcessingIO**子类型（不是kAudioUnitSubType_HALOutput）的简单播放应用程序的示例。核心音频 api 上的评论说 kAudioUnitSubType_VoiceProcessingIO 在桌面和 iPhone 3.0 或更高版本上可用，所以我认为macos 必须有一个例子。

你知道样品在哪里吗？或者有没有人知道如何在 macos 中使用 kAudioUnitSubType_VoiceProcessingIO 子类型？我已经尝试过与在 iOS 中相同的方法，但它不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T22:55:19.593

我发现了一些启用这个 IO 单元的东西。

1.  流格式真的很挑剔。它一定要是
    *   线性PCM
    *   标志圆锥形
    *   每通道 32 位
    *   （我做了 1 个频道，但它可能适用于更多频道）-
    *   采样率 44100（可能与其他人一起工作可能不会）
2.  您没有在其上设置 EnableIO。默认情况下启用 IO，并且该属性不可写。
3.  在初始化之前设置流格式。

与其他核心音频工作一样，您只需要检查每个函数调用的错误状态，确定错误是什么，并在每一步进行少量更改，直到您最终让它工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-09T18:07:39.030

根据频道的数量，我有两种不同的 kAudioUnitProperty_StreamFormat 设置。

```
size_t bytesPerSample = sizeof (AudioUnitSampleType);
stereoStreamFormat.mFormatID          = kAudioFormatLinearPCM;
stereoStreamFormat.mFormatFlags       = kAudioFormatFlagsAudioUnitCanonical;
stereoStreamFormat.mBytesPerPacket    = bytesPerSample;
stereoStreamFormat.mFramesPerPacket   = 1;
stereoStreamFormat.mBytesPerFrame     = bytesPerSample;
stereoStreamFormat.mChannelsPerFrame  = 2;
stereoStreamFormat.mBitsPerChannel    = 8 * bytesPerSample;
stereoStreamFormat.mSampleRate        = graphSampleRate; 
```

和

```
size_t bytesPerSample = sizeof (AudioUnitSampleType);
monoStreamFormat.mFormatID          = kAudioFormatLinearPCM;
monoStreamFormat.mFormatFlags       = kAudioFormatFlagsAudioUnitCanonical;
monoStreamFormat.mBytesPerPacket    = bytesPerSample;
monoStreamFormat.mFramesPerPacket   = 1;
monoStreamFormat.mBytesPerFrame     = bytesPerSample;
monoStreamFormat.mChannelsPerFrame  = 1;                  // 1 indicates mono
monoStreamFormat.mBitsPerChannel    = 8 * bytesPerSample;
monoStreamFormat.mSampleRate        = graphSampleRate; 
```

将 I/O 单元用作 kAudioUnitSubType_VoiceProcessingIO 时使用此音频流格式

```
AudioComponentDescription iOUnitDescription;
iOUnitDescription.componentType = kAudioUnitType_Output;
iOUnitDescription.componentSubType = kAudioUnitSubType_VoiceProcessingIO;
iOUnitDescription.componentManufacturer = kAudioUnitManufacturer_Apple;
iOUnitDescription.componentFlags = 0;
iOUnitDescription.componentFlagsMask = 0; 
```

我可以清楚地看到音频输出中断，因为缓冲区大小小于此 AudioUnit 的缓冲区大小。

切换回 kAudioUnitSubType_RemoteIO

iOUnitDescription.componentSubType = kAudioUnitSubType_RemoteIO;

那个中断消失了。

我正在处理来自麦克风的音频输入并在音频缓冲区上应用一些实时计算。

在方法中，graphSampleRate 是 AVSession 采样率

```
graphSampleRate = [AVAudioSession sharedInstance] sampleRate]; 
```

也许在这里我错了。

最后配置参数值如下：

立体声流格式：

```
Sample Rate:              44100
Format ID:                 lpcm
Format Flags:              3116
Bytes per Packet:             4
Frames per Packet:            1
Bytes per Frame:              4
Channels per Frame:           2
Bits per Channel:            32 
```

单声道流格式：

```
Sample Rate:              44100
Format ID:                 lpcm
Format Flags:              3116
Bytes per Packet:             4
Frames per Packet:            1
Bytes per Frame:              4
Channels per Frame:           1
Bits per Channel:            32 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-26T14:14:19.267

感谢[这里的 SO post，](https://stackoverflow.com/questions/12821404/apples-voice-processing-audio-unit-kaudiounitsubtype-voiceprocessingio-brok)我意识到我应该使用这个标志：

```
audioFormat.mFormatFlags        = kAudioFormatFlagsCanonical; 
```

# c# - C#如何从新表单编辑列表视图项目？

> ID：10792471
> 
> 赞同：0
> 
> 时间：2012-05-29T02:36:39.393
> 
> 标签：c#, listview

所以我有一个`ListView`填充了信息和编辑按钮的`form1`. 现在，当我选择项目`ListView`并单击编辑时，我希望它带我进入`form2`并显示所选项目数据。

*例如*，我从命中编辑中选择名称，`ListView`它将我带到`form2`哪里`TextBox`，可以说`textbox1 = Name`，`textbox2 = Age`并且在我`List<data>`的名称和年龄中有 2 个项目。

我现在需要的是，当我选择其中一项`ListView`并进行预编辑时，它会打开`form2`并加载姓名`textbox1`和年龄，`textbox2`我该怎么做？

我正在尝试`listview_SelectedIndexChanged`这样的事件：

```
Form2 edit = new Form2();
edit.textBox1.Text = People[this.listView1.SelectedItems[0].Index].Name;
edit.textBox2.Text = People[this.listView1.SelectedItems[0].Index].Age; 
```

有没有办法将此引用到按钮单击编辑？还是有其他方法？

之后如何保存更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T02:48:16.897

以构造函数的形式传入值。在您的主表单中，您的列表框将列表框选定值的值存储在一个变量中，然后在您的按钮编辑事件中调用第二种表单的构造函数

```
Form2 child= new Form2(Name,Age);
Form2.show() 
```

在第二种形式中，为名称和年龄创建全局变量

```
 private string _name = String.Empty;
 private int _age; 
```

然后为您的第二种形式创建一个构造函数

```
 public void Form2(string name, int age)
 {

  InitializeComponent();
  this._name = name;
  this._age = age;

  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T02:58:26.093

使用属性将数据传递给 Form2，使用事件返回保存的数据：

**表格1**

```
private void button1_Click(object sender, EventArgs e)
{
    Form2 edit = new Form2();
    edit.SaveEvent += new Form2.SaveEventHandler(edit_SaveEvent);  //Add event handler
    edit.name = People[this.listView1.SelectedItems[0].Index].Name;
    edit.age = People[this.listView1.SelectedItems[0].Index].Age;
    edit.ShowDialog(this);
}

void edit_SaveEvent(object sender, SaveEventArgs e)
{
    //Do Your work here with e.newAge and e.newName
    ((Form2)sender).Close(); //Close Form2
} 
```

**表格2**

```
public partial class Form2 : Form
{
    public delegate void SaveEventHandler(object sender, SaveEventArgs e);
    public event SaveEventHandler SaveEvent;
    public string name { get; set; }
    public string age { get; set; }

    public Form2()
    {
        InitializeComponent();
    }

    private void Form2_Load(object sender, EventArgs e)
    {
        textBox1.Text = name;
        textBox2.Text = age;
    }

    private void button1_Click(object sender, EventArgs e)
    {
        SaveEvent(this, new SaveEventArgs(textBox1.Text, textBox2.Text));
    }

}

public class SaveEventArgs
{
    public SaveEventArgs(string name, string age) {newName = name; newAge = age; }
    public String newName {get; private set;} // readonly
    public String newAge {get; private set;}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T03:33:32.020

为此使用自定义构造函数

在表格 1

```
private void button1_Click(object sender, EventArgs e)
{
   string name = People[this.listView1.SelectedItems[0].Index].Name;
    int age = People[this.listView1.SelectedItems[0].Index].Age;
     Form2 edit = new Form2(name,age);

    edit.ShowDialog(this);
} 
```

表格 2

```
public form2(string name,int age)
{

        textBox1.Text = name;
        textBox2.Text = age.ToString();
} 
```

使用 oop 概念..很好。

# blackberry - 在黑莓中创建一个栏（如音量栏或进度栏）

> ID：10792488
> 
> 赞同：0
> 
> 时间：2012-05-29T02:40:45.730
> 
> 标签：blackberry, progress-bar, move, touch-event

我想创建一个栏（如音量栏或进度栏）。一个这样的条形图，它是一个矩形，默认颜色为黑色，然后当我从一侧触摸条形到另一侧时，当我触摸它时它会改变颜色

我的研究表明可以为此使用 TouchEvent.MOVE 。但是我不知道如何进行它请指导我

如下图所示的进度条 ![在此处输入图像描述](../Images/2b1902693e6a35b18e317d5ed26e904e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T06:04:25.863

请从 BlackBerry Developer Support 知识库下载并配置示例代码：
[实现高级按钮、字段和管理器](http://supportforums.blackberry.com/t5/Java-Development/Implement-advanced-buttons-fields-and-managers/ta-p/488276)

# jquery - jQuery .getJSON() twitter 搜索，结果未定义。

> ID：10792490
> 
> 赞同：2
> 
> 时间：2012-05-29T02:41:03.403
> 
> 标签：jquery, twitter, getjson

jQuery代码：

```
$(document).ready(function() {
      $('#hit').click(function() {
        $.getJSON("http://search.twitter.com/search.json?q=stackoverflow&callback=?", function(data) {
            alert(data.length);
        });
      });  // #button hit click evnet
});  // document ready 
```

结果未定义。

![在此处输入图像描述](../Images/742f3963911ce3df6ef623a3f12db588.png)

我在浏览器中手动导航 api 调用，它确实返回了数据。

![在此处输入图像描述](../Images/36f00038e587b1e2f86f8fcf25a420e7.png)

为什么我的 jQuery getJSON 调用未定义结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T02:42:16.897

```
$.getJSON("http://search.twitter.com/search.json?q=stackoverflow&callback=?", function(data) {
     alert(Object.keys(data).length);
 }); 
```

返回`data`的是一个对象而不是一个数组，所以`data.length`是未定义的。

但并非所有浏览器都支持上述过程。所以你可以试试：

```
data.results.length 
```

要检查对象中是否存在键（如果您不确定），最好使用：

```
if( "key" in object) {

} 
```

对于你的情况：

```
if( "results" in data) {

} 
```

如果您的查询变得无效，twitter 将响应一个错误对象，以便确认成功的查询结果，您可以使用：

```
if("error" in data) {

} 
```

还有一个过程叫做[`hasOwnProperty()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/HasOwnProperty)

```
if(data.hasOwnProperty("results")) {

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T02:52:43.890

如果您查看返回的有效负载，实际结果位于名为`results`. 所以，试试：

```
alert(data.results.length) 
```

# android - 如何在android中控制textview的文本高度？

> ID：10792491
> 
> 赞同：0
> 
> 时间：2012-05-29T02:41:03.983
> 
> 标签：android, iphone, user-interface, view, textview

我有文本视图，它在横向模式下占据整个屏幕。如果我增加 text-size(font-size) 属性...部分文本会被隐藏。如果有人可以让我知道如何控制文本的高度，以便我可以在不影响宽度的情况下拉长文本，我将不胜感激。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T02:58:06.380

您是说要更改文本的“纵横比”吗？我不认为你能做到这一点。您最好找到一种字体或创建符合您要求的自己的字体。

将字体与应用程序打包为资产并使用它 (http://www.barebonescoder.com/2010/05/android-development-using-custom-fonts/)

# forms - 淘汰赛和表格的输入值

> ID：10792498
> 
> 赞同：0
> 
> 时间：2012-05-29T02:41:58.347
> 
> 标签：forms, html, knockout.js

我最近非常喜欢淘汰赛，这是我的第一个复制粘贴源代码片段：rolleyes：。没有运气，我无法让它在本地主机服务器上运行，尽管我已经在 file.php 的同一目录中设置了 knockout.js。我希望有人能帮忙。

```
<script type="text/javascript" src="knockout210.js"></script>
<script type="text/javascript">
    var ViewModel=function(first, last)
    {
        this.firstName=ko.observable(first);
        this.lastName=ko.observable(last);
        this.fullName=ko.computed(function()
        {
            return this.firstName()+" "+this.lastName();
        },this);
    }
    ko.applyBindings(new ViewModel("Planet","Earth"));
</script>
<p>First Name: <input data-bind="value:firstName"/></p>
<p>Last Name: <input data-bind="value:lastName"/></p>
<h2>Hello, <span data-bind="text:fullName"></span>!</h2> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T02:51:09.923

我已经在 jsfiddle 上设置了你的演示。它运行得很好。如果您发布的是页面上的实际 HTML，我建议您包含 html、head 和 body 标签，并确保确实正确引用了 knockout210.js。此外，如果您遇到 php 或其他问题，只需制作一个普通的旧 HTML 文件，它就可以运行。

这是您的有效代码：http: [//jsfiddle.net/lucuma/wD8jE/](http://jsfiddle.net/lucuma/wD8jE/)

# android - 导入greendroid eclipse

> ID：10792501
> 
> 赞同：1
> 
> 时间：2012-05-29T02:42:54.713
> 
> 标签：android, greendroid

我知道还有其他主题可以解决导入 greendroid 中的问题，但我遇到了严重的麻烦，我会谦虚地问那些已经使用 greendroid 的人能够帮助我。我在互联网上看过很多教程，展示了如何导入，但即使按照他所说的做也没有用。阿特，

# ruby - 循环遍历数组的元素

> ID：10792505
> 
> 赞同：5
> 
> 时间：2012-05-29T02:43:14.170
> 
> 标签：ruby

我想`@a`从:循环`0`。`2``0, 1, 2, 0, 1, 2`

```
def set_a
  if @a == 2 
    @a = 0
  else
    @a = @a + 1
  end
end 
```

也许有更好的方法？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-29T02:59:34.873

```
(0..2).cycle(3) { |x| puts x } #=> 0,1,2,0,1,2,0,1,2

item = [0, 1, 2].cycle.each

item.next #=> 0
item.next #=> 1
item.next #=> 2
item.next #=> 0
... 
```

# ruby-on-rails - 如何通过 has_one 和 belongs_to 关联获取方法？

> ID：10792507
> 
> 赞同：1
> 
> 时间：2012-05-29T02:43:44.760
> 
> 标签：ruby-on-rails, model, rspec, belongs-to, has-one

我有几周的经验或接近一个月的 Ruby on Rails 学习经验。我希望了解为什么我不能通过关联对象获取方法。

我正在尝试将关联对象附加到用户而不是单独使用 Profile.new，例如 profile 及其方法，如下所示。

user.profile.create

user.profile.create！

user.profile.build

相反，我收到 RSpec 错误消息。NoMethodError:nil:NilClass 的未定义方法“构建”

提前致谢

```
# == Schema Information
#
# Table name: users
#
#  id         :integer         not null, primary key
#  email      :string(255)
#  created_at :datetime        not null
#  updated_at :datetime        not null
#

class User < ActiveRecord::Base
  attr_accessible :email
  has_one :profile

  before_save { |user| user.email = email.downcase }

  VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
  validates :email, presence: true, format: { with: VALID_EMAIL_REGEX },
                    uniqueness: { case_sensitive: false }
end 
```

.

```
 # == Schema Information
    #
    # Table name: profiles
    #
    #  id         :integer         not null, primary key
    #  given_name :string(255)
    #  surname    :string(255)
    #  user_id    :integer
    #  created_at :datetime        not null
    #  updated_at :datetime        not null
    #

    class Profile < ActiveRecord::Base
      attr_accessible :given_name, :surname #, :user_id
      belongs_to :user

      validates :user_id, presence: true
    end 
```

.

```
 smileymike@ubuntu:~/rails_projects/bffmApp$ bundle exec guard
    Guard uses Libnotify to send notifications.
    Guard is now watching at '/home/smileymike/rails_projects/bffmApp'
    Starting Spork for RSpec
    Using RSpec
    Preloading Rails environment
    Loading Spork.prefork block...
    Spork is ready and listening on 8989!
    Spork server for RSpec successfully started
    Guard::RSpec is running, with RSpec 2!
    Running all specs
    Running tests with args ["--drb", "-f", "progress", "-r", "/home/smileymike/.rvm/gems/ruby-1.9.3-p194/gems/guard-rspec-0.7.2/lib/guard/rspec/formatters/notification_rspec.rb", "-f", "Guard::RSpec::Formatter::NotificationRSpec", "--out", "/dev/null", "--failure-exit-code", "2", "spec"]...
    ......FFFFFFFF...............

    Failures:

      1) Profile 
         Failure/Error: before { @profile = user.profile.build(given_name: "Michael", surname: "Colin") }
         NoMethodError:
           undefined method `build' for nil:NilClass
         # ./spec/models/profile_spec.rb:23:in `block (2 levels) in <top (required)>'

      2) Profile 
         Failure/Error: before { @profile = user.profile.build(given_name: "Michael", surname: "Colin") }
         NoMethodError:
           undefined method `build' for nil:NilClass
         # ./spec/models/profile_spec.rb:23:in `block (2 levels) in <top (required)>'

      3) Profile 
         Failure/Error: before { @profile = user.profile.build(given_name: "Michael", surname: "Colin") }
         NoMethodError:
           undefined method `build' for nil:NilClass
         # ./spec/models/profile_spec.rb:23:in `block (2 levels) in <top (required)>'

      4) Profile 
         Failure/Error: before { @profile = user.profile.build(given_name: "Michael", surname: "Colin") }
         NoMethodError:
           undefined method `build' for nil:NilClass
         # ./spec/models/profile_spec.rb:23:in `block (2 levels) in <top (required)>'

      5) Profile 
         Failure/Error: before { @profile = user.profile.build(given_name: "Michael", surname: "Colin") }
         NoMethodError:
           undefined method `build' for nil:NilClass
         # ./spec/models/profile_spec.rb:23:in `block (2 levels) in <top (required)>'

      6) Profile user 
         Failure/Error: before { @profile = user.profile.build(given_name: "Michael", surname: "Colin") }
         NoMethodError:
           undefined method `build' for nil:NilClass
         # ./spec/models/profile_spec.rb:23:in `block (2 levels) in <top (required)>'

      7) Profile when user_id is not present 
         Failure/Error: before { @profile = user.profile.build(given_name: "Michael", surname: "Colin") }
         NoMethodError:
           undefined method `build' for nil:NilClass
         # ./spec/models/profile_spec.rb:23:in `block (2 levels) in <top (required)>'

      8) Profile accessible attributes should not allow access to user_id
         Failure/Error: before { @profile = user.profile.build(given_name: "Michael", surname: "Colin") }
         NoMethodError:
           undefined method `build' for nil:NilClass
         # ./spec/models/profile_spec.rb:23:in `block (2 levels) in <top (required)>'

    Finished in 1.56 seconds
    29 examples, 8 failures

    Failed examples:

    rspec ./spec/models/profile_spec.rb:27 # Profile 
    rspec ./spec/models/profile_spec.rb:28 # Profile 
    rspec ./spec/models/profile_spec.rb:29 # Profile 
    rspec ./spec/models/profile_spec.rb:30 # Profile 
    rspec ./spec/models/profile_spec.rb:33 # Profile 
    rspec ./spec/models/profile_spec.rb:31 # Profile user 
    rspec ./spec/models/profile_spec.rb:37 # Profile when user_id is not present 
    rspec ./spec/models/profile_spec.rb:41 # Profile accessible attributes should not allow access to user_id
    Done.

    > 
```

.

```
require 'spec_helper'

describe Profile do

#  before do
    # This code is wrong but it works
#    @profile = Profile.new(given_name: "Michael", surname: "Colin", user_id: user.id)
#  end
#  but I am attempting to create a profile via User/Profile assoications
  let(:user) { FactoryGirl.create(:user) }
  before { @profile = user.profile.build(given_name: "Michael", surname: "Colin") }

  subject { @profile }

  it { should respond_to(:given_name) }
  it { should respond_to(:surname) }
  it { should respond_to(:user_id) }
  it { should respond_to(:user) }
  its(:user) { should == user }

  it { should be_valid }

  describe "when user_id is not present" do
    before { @profile.user_id = nil }
    it { should_not be_valid }
  end

  describe "accessible attributes" do
    it "should not allow access to user_id" do
      expect do
        Profile.new(user_id: user_id)
      end.should raise_error(ActiveModel::MassAssignmentSecurity::Error)
    end    
  end  
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T02:56:11.260

has_one 会给你一个关于用户的 build_profile 方法。有关详细信息，请参阅[http://guides.rubyonrails.org/association_basics.html#has_one-association-reference 。](http://guides.rubyonrails.org/association_basics.html#has_one-association-reference)

你不能做 user.profile.build 的原因是没有配置文件，所以 user.build 返回 nil 并且要求 nil 构建配置文件没有意义。这与 has_many 的情况不同，其中 out 总是返回一个东西的集合——即使集合是空的——你可以要求该集合创建另一个成员。很容易想象 has_one 访问器返回一个非零的“我不在这里”值，这将启用您的场景，但会出现其他问题（主要是这样的值不会是错误的，导致可以说是更少的 ruby​​esque 代码）

# openmp - OpenMP 与 OpenMPI

> ID：10792508
> 
> 赞同：1
> 
> 时间：2012-05-29T02:43:52.250
> 
> 标签：openmp, openmpi

我有一个 MPI 应用程序，它当前有一个进程（称为它`A`），这会导致可伸缩性的严重问题。目前，所有其他进程都在`MPI_Recv`等待那个进程向它们发送信息。

**由于我现在**想以尽可能少的努力加快速度，因此我正在考虑使用 OpenMP 并行化进程`A`。这实用吗？

由于与共享一个节点的其他进程`A`都在一个中`MPI_Recv`，我可以利用该节点的所有资源来处理进程`A`，还是会`MPI_Recv`阻止这种情况？

使用 OpenMP 的另一个好处是内存可以共享，因为进程`A`需要很多时间。

顺便说一句，如果我的处理器在等待`MPI_Send`而不是等待，它会改变什么`MPI_Recv`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T02:23:12.933

是的，可以使用 OpenMP 将某个进程与处理工作分配的 OpenMPI 结合在本地并行化（即跨节点的 OpenMPI 和节点内的 OpenMP）。这个概念被称为**OpenMP 和 MPI 的混合编程**（如果你用谷歌搜索，你会发现几个有用的链接）。

`MPI_Send`并且`MPI_Recv`调用是阻塞调用（有关详细信息，您可以查看这篇文章[In message passing (MPI) mpi_send and recv “what waits”</a>），这意味着如果您的节点被阻塞，`MPI_Recv`它们将被阻塞等待数据。但是，您可以使用各自的异步方法](https://stackoverflow.com/a/4074057/708312)[MPI_Isend](http://www.open-mpi.org/doc/v1.6/man3/MPI_Isend.3.php)和[MPI_Irecv](http://www.open-mpi.org/doc/v1.6/man3/MPI_Irecv.3.php)来提高性能，但代价是必须处理竞争条件和仔细的缓冲区处理。可以在[此处](http://supercomputingblog.com/mpi/mpi-tutorial-5-asynchronous-communication/)找到示例和更多信息。

在我看来，你有两个选择：

1.  使用 OpenMPI 均匀分布您的工作负载，然后使用 OpenMP 在本地并行化您的工作负载（如果您有多个核心和多个具有多个核心的节点，您可以使用 OpenMP 将任务分配给每个核心；OpenMPI 通过节点分配部分任务然后可以利用每个节点的本地架构并使用 OpenMP）；
2.  重新编程您的程序以使用异步方法，以便在必要时让其他节点帮助节点 A 进行计算。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T20:42:35.590

使用 OpenMP 和 MPI 相对容易，如果我理解正确的话应该加快速度。但整个事情看起来像一个黑客。您是否考虑过重新设计（[培养设计方法](http://netindonesia.net/blogs/norman/archive/2008/05/28/foster-s-methodology-a-parallel-algorithm-design-methodology.aspx)）您的程序？让一个节点阻止所有其他节点不是一个好的设计。

# java - appengine ChannelFailureException 未在 dev 中引发

> ID：10792512
> 
> 赞同：2
> 
> 时间：2012-05-29T02:44:34.133
> 
> 标签：java, google-app-engine, channel-api

AppEngine 应该在向通道发送消息时出现错误时抛出 ChannelFailureException，例如当通道未连接时。

似乎开发服务器没有抛出此异常。它确实在控制台中显示警告：

```
com.google.appengine.api.channel.dev.ChannelManager sendMessage
WARNING: Skipping message to unconnected channel: <clientId> 
```

此警告似乎是由：com.google.appengine.api.channel.dev.LocalChannelFailureException 生成的

**但是，实际的异常（即*com.google.appengine.api.channel.ChannelFailureException*）没有被抛出**。有没有人知道如何在开发中测试这个异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T14:06:27.820

在通道未连接并且您尝试向其发送消息的情况下，预计不会引发错误。

如果您提供了格式错误的 clientid 或消息，或者 Channel 基础结构存在问题导致无法发送消息，则会引发 ChannelFailureException。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T05:14:22.080

当您混淆令牌和 clientId 时，也会出现此状态。就我而言，这是因为我试图创建一个

```
message = ChannelMessage(token, message); 
```

代替

```
message = ChannelMessage(clientId, message); 
```

在哪里

```
String token = channelService.createChannel(clientId); 
```

# ios - IOS wifi 连接通知，包括 SSID

> ID：10792514
> 
> 赞同：3
> 
> 时间：2012-05-29T02:45:20.110
> 
> 标签：ios, captivenetwork

新手 IOS 程序员正在寻找一种在 iPhone 连接到 WIFI 网络时获得通知的方法。

即以下转换的通知：3G 到 WIFI WIFI 到 3G WIFI 到另一个 WIFI

它应该能够告诉我连接到哪个 SSID ...

这在Android上花了大约20分钟才弄清楚，在IOS上找不到这个功能的起点

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T08:28:36.537

使用代码您可以获取您当前连接的 WIFI 的 SSID 数据。

```
CFArrayRef myArray1 = CNCopySupportedInterfaces();
CFDictionaryRef myDict = CNCopyCurrentNetworkInfo(CFArrayGetValueAtIndex(myArray1, 0));
NSLog(@"%@",myDict); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T03:07:48.160

[为了获得网络变化的通知](https://stackoverflow.com/questions/7685152/how-do-i-receive-notifications-that-the-connection-has-changed-type-3g-edge-w)，你可以将[Apple 的 Reachability 类](http://developer.apple.com/library/ios/#samplecode/Reachability/Listings/Classes_Reachability_h.html)放到你的项目中。

[至于获取 SSID](https://stackoverflow.com/questions/5198716/iphone-get-ssid-without-private-library)，请查看[系统配置框架的 CaptiveNetwork API](http://developer.apple.com/library/ios/#documentation/SystemConfiguration/Reference/CaptiveNetworkRef/Reference/reference.html)中的解决方案（为您链接的文档）。

# sql - FREETEXT 不适用于同义词库文件 SQL Server 2012

> ID：10792518
> 
> 赞同：1
> 
> 时间：2012-05-29T02:45:39.050
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2012, freetext

根据 MSDN，我在编辑同义词库文件后执行了此操作，该文件将英文文件 ( `tseng.xml`) 加载到同义词库中：

```
EXEC sys.sp_fulltext_load_thesaurus_file 1033;
GO 
```

词库文件的迷你样本部分

```
<XML ID="Microsoft Search Thesaurus">
    <thesaurus xmlns="x-schema:tsSchema.xml">
    <diacritics_sensitive>0</diacritics_sensitive>
        <expansion>
            <sub>car</sub>
            <sub>coche</sub>
            <sub>automobile</sub>
            <sub>ride</sub>
        </expansion>
    </thesaurus>
</XML> 
```

索引列 c.keywords 字段由 'bike,car' 快速检查查询：

```
DECLARE @strsearch varchar(200)
SET @strsearch = 'automobile'
SELECT adid from ads INNER JOIN campaign c ON ads.campid=c.campaignid 
WHERE 
FREETEXT(c.keywords, @strsearch)

RESULTS
========
ad NULL 
```

寻找“汽车”的自由文本确实有效

```
DECLARE @strsearch varchar(200)
SET @strsearch = 'car'
SELECT adid from ads INNER JOIN campaign c ON ads.campid=c.campaignid 
WHERE 
FREETEXT(c.keywords, @strsearch)

RESULTS
========
ad 41 
```

因此，使用同义词库的 FREETEXT 不会返回任何结果。我认为默认情况下 FREETEXT 使用同义词库文件。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T07:20:57.343

直接来自 MSDN ( [http://msdn.microsoft.com/en-us/library/cc280598.aspx](http://msdn.microsoft.com/en-us/library/cc280598.aspx) )：

**A. 加载同义词库文件，即使它已经加载**

以下示例解析并加载英语词库文件。

```
EXEC sys.sp_fulltext_load_thesaurus_file 1033;
GO 
```

**B. 仅在尚未加载时加载同义词库文件**

以下示例解析并加载阿拉伯语词库文件，除非它已经加载。

```
EXEC sys.sp_fulltext_load_thesaurus_file 1025, @loadOnlyIfNotLoaded = 1;
GO 
```

我正在使用 tseng.xml 文件。嗯，有两个英文词库文件：tseng.xml 和 tsenu.xml

tseng.xml 用于英语（英国），而 tsenu.xml 用于英语（美国）。LCID (1033) 对应于 tsenu.xml 文件

保存时的 XML 文件必须是 Unicode 格式，并且必须指定字节顺序标记，而不是 ansi 或 UTF-8。我使用 Microsoft 记事本并将 tsenu.xml 文件保存为 Unicode。

# ruby-on-rails-3 - 为什么 Cucumber 知道规格工厂在哪里？

> ID：10792521
> 
> 赞同：1
> 
> 时间：2012-05-29T02:46:50.170
> 
> 标签：ruby-on-rails-3, rspec, cucumber

我正在做一个使用 Cucumber 和 Rspec 的项目。/spec/factories 中定义了工厂，但 Cucumber 也在使用这些工厂。

但是，/features/support/env.rb 中的 env.rb 文件中没有该要求的定义。所以我在黄瓜文件夹的任何地方都看不到这种东西：

```
require 'spec/factories' 
```

Cucumber 怎么知道工厂在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T03:50:01.247

FactoryGirl 从 spec/factories 加载工厂；它是[硬编码](https://github.com/thoughtbot/factory_girl_rails/blob/d727c8867db489356ead7ae0531a0a5ec9b73bfa/lib/factory_girl_rails/railtie.rb#L13-L17)的。

至于 Cucumber 在哪里加载 FactoryGirl，你可以`require 'spec_helper'`在你的 features/support/env.rb 和`require 'factory_girl'`你的`spec/spec_helper.rb`.

# ruby-on-rails - Rails 3.2.3 - Bundler 找不到 gem "railties" 的兼容版本

> ID：10792522
> 
> 赞同：5
> 
> 时间：2012-05-29T02:46:55.427
> 
> 标签：ruby-on-rails, heroku

我一直在关注 Michael Hartl 的[“Ruby on Rails 教程”](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book#fig%3aheroku_app_31)的更新版本，但在“git push heroku master”步骤中遇到了错误。GIT bash 产生的错误如下：

```
 $git push heroku master
 Counting objects: 70, done

 ...

 Fetching gem metadata from https://rubygems.org/.........

 Bundler could not find compatible version for gem "railties":
 In Gemfile:
 rails (= 3.2.3) ruby depends on
 railties (= 3.2.3) ruby
 jquery-rails (= 2.0.0) ruby depends on
 railties (3.2.4.rc1) 
```

另外，这是我使用的 Gemfile：

```
 source 'https://rubygems.org'

    gem 'rails', '3.2.3'

    # Bundle edge Rails instead:
    # gem 'rails', :git => 'git://github.com/rails/rails.git'

    group :development do
      gem 'sqlite3', '1.3.5'
    end

    # Gems used only for assets and not required
    # in production environments by default.
    group :assets do
      gem 'sass-rails',   '3.2.4'
      gem 'coffee-rails', '3.2.2'

      # See https://github.com/sstephenson/execjs#readme for more supported runtimes
      # gem 'therubyracer', :platform => :ruby

      gem 'uglifier', '1.2.3'
    end

    gem 'jquery-rails', '2.0.0'

    # To use ActiveModel has_secure_password
    # gem 'bcrypt-ruby', '~> 3.0.0'

    # To use Jbuilder templates for JSON
    # gem 'jbuilder'

    # Use unicorn as the app server
    # gem 'unicorn'

    # Deploy with Capistrano
    # gem 'capistrano'

    # To use debugger
    # gem 'ruby-debug19', :require => 'ruby-debug' 
```

我能找到的唯一调试说明涉及与教程中使用的版本不同的 Ruby 版本（即不是 3.2.3 的版本），因此非常感谢任何帮助。提前致谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-29T03:10:59.183

看看输出：

```
jquery-rails (= 2.0.0) ruby depends on
railties (3.2.4.rc1) 
```

您使用的**jquery-rails** gem 依赖于不同的 rails 版本。您应该更改**jquery-rails**依赖项或升级 Rails。

**更新**

看起来您可能在**bundler**中发现了一个错误。因此，要使其正常工作，您必须将 Rails 版本更改为：

```
gem 'rails', '3.2.4.rc1' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T01:15:25.000

这实际上是 jquery-rails 2.0.0 gem 中的一个错误。请参阅[GitHub 上的讨论](https://github.com/rails/jquery-rails/issues/62)。解决方法是使用更新版本的 jquery-rails，您可以在[永久 Rails 教程 Gemfile](http://railstutorial.org/gemfile)中找到它。我已经相应地更新了教程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T17:59:22.037

我将 Gemfile 中说**gem 'rails', '3.2.3'**的行更改为**gem 'rails', '3.2.5'**，它运行了很长时间，最后因为没有**libpq-fe而停止.h**（我想我已经找到了，会再试一次）。当然，这个修复可能需要你安装 Rails 3.2.5，我不知道（也许 bundle 安装了它？）

# indy10 - indy 10.5.5 上预期的 TIdSync 类型名称

> ID：10792523
> 
> 赞同：0
> 
> 时间：2012-05-29T02:47:11.463
> 
> 标签：indy10

我正在尝试创建一个从 TIdSync 派生的类，但编译器说 Type Name Expected。是我使用的版本不支持 TIdSync 类吗？

我正在使用 RAD 2010 indy 10.5.5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T02:50:42.310

如果您使用的是 Delphi，请添加`IdSync`到您的`uses`子句中。

如果您使用的是 C++，请添加`#include <IdSync.hpp>`到您的代码中。

# android - 媒体播放器过早切断声音

> ID：10792525
> 
> 赞同：12
> 
> 时间：2012-05-29T02:47:29.687
> 
> 标签：android, android-mediaplayer

我有两台可以测试我的游戏的设备：一台 US Celluar 手机 (SCH-R880) 和一台 Kindle Fire，Kindle Fire 比手机强大得多。

我有几个短（少于或大约 1 秒）的音效。为了节省内存，我加载、播放和释放其中一些音效。在电话上，他们（大部分）按预期播放。然而，在 Kindle Fire 上，它们被缩短了。真的很短的声音很快就被切断了，我什么也听不见。但是，在设置时加载并保留的那些可以正常播放。

有人知道这里发生了什么吗？我是否以某种方式过早地发布了我的媒体？下面是一个例子。在电话里，我听到“第二级！” 但在 Kindle 上，我听到类似“Lev tw”的声音。

```
mpNum = null;

try
{
    switch (level)
    {
        case 2:
            mpNum = MediaPlayer.create(contxt, R.raw.l2); break;
        case 3:
            mpNum = MediaPlayer.create(contxt, R.raw.l3); break;
        case 4:
            mpNum = MediaPlayer.create(contxt, R.raw.l4); break;
        case 5:
            mpNum = MediaPlayer.create(contxt, R.raw.l5); break;
        case 6:
            mpNum = MediaPlayer.create(contxt, R.raw.l6); break;
        case 7:
            mpNum = MediaPlayer.create(contxt, R.raw.l7); break;
        case 8:
            mpNum = MediaPlayer.create(contxt, R.raw.l8); break;
        default:
            return;
    }

    MediaPlayer vLevel = MediaPlayer.create(contxt, R.raw.level);

    vLevel.setOnPreparedListener(new MediaPlayer.OnPreparedListener()
    {
        public void onPrepared(MediaPlayer mp)
        {
            mp.start();
        }
    });

    vLevel.setOnCompletionListener(new MediaPlayer.OnCompletionListener()
    {
           public void onCompletion(MediaPlayer mpl)
           {
            mpNum.start();
            mpl.release();
           }
       });

        mpNum.setOnCompletionListener(new MediaPlayer.OnCompletionListener()
        {
            public void onCompletion(MediaPlayer mp)
            {
                mp.release();
            }
        });
    }
    catch (Exception e) {} 
```

为了尝试解决此问题，我尝试了 SoundPool，但它不起作用；我什么也没听到。以下是我尝试使用 SoundPool 播放音乐时所做的：

```
SoundPool soundPool = new SoundPool(1, AudioManager.STREAM_MUSIC, 100);
    soundPool.load(contxt, R.raw.song2, 1);
    AudioManager mgr = (AudioManager)contxt.getSystemService(Context.AUDIO_SERVICE);
    float streamVolumeCurrent = mgr.getStreamVolume(AudioManager.STREAM_MUSIC);
    float streamVolumeMax = mgr.getStreamMaxVolume(AudioManager.STREAM_MUSIC);
    float volume =  streamVolumeMax;  

    soundPool.play(1, volume, volume, 1, 5, 2); 
```

**更新**

我注意到当一个应该播放（但没有）的声音出现这个错误时：

```
AudioPolicyManager: stopOutput() oldDevice 2
AudioPolicyManager: [getDeviceForStrategy] strategy : 0,forceUse(0) 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2015-07-08T10:59:01.963

我有同样的问题，这确实是一个垃圾收集器问题！如果将媒体播放器的实例分配给方法内的某个局部变量，则离开该方法后该实例不再存在，因此 GC 可以随时随机删除它。

为避免这种情况，您需要在其他地方至少保留一个指向该实例的指针。我创建了一个静态集来保留所有指针，它看起来像这样：

```
private static Set<MediaPlayer> activePlayers = new HashSet<MediaPlayer>(); 
```

然后媒体播放器的创建如下：

```
MediaPlayer player = MediaPlayer.create(context, context.getResources().getIdentifier(id, "raw", pkg));
activePlayers.add(player);
player.setOnCompletionListener(releaseOnFinishListener);
player.start(); 
```

其中 releaseOnFinishListener 是一个侦听器，它像您的一样在完成时释放媒体播放器，但也从 activePlayers 集中删除指针：

```
MediaPlayer.OnCompletionListener releaseOnFinishListener = new MediaPlayer.OnCompletionListener() {
    public void onCompletion(MediaPlayer mp) {
        mp.release();
        activePlayers.remove(mp);
    }
}; 
```

我希望这可以帮助你。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-13T17:12:02.260

好吧，我在一个项目中遇到了同样的问题，因为在 KindleFire 中，声音在完成之前就被切断了，所以为了解决这个问题（随着发布），我在发布中添加了延迟：

```
 mpNum.setOnCompletionListener(new MediaPlayer.OnCompletionListener()
    {
        public void onCompletion(MediaPlayer mp)
        {
            // Add a handler delay
            new Timer().schedule(new TimerTask() {

                @Override
                public void run() {
                   mp.release();
               }
            }, DELAY_TIME);
        }
    }); 
```

这不是最好的解决方案，但我认为这可能会对您有所帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-29T02:57:10.323

我读过 SoundPool 类比 MediaPlayer 更适合像这样的短声音，但这可能不是问题。

您还可以发布您的点击处理程序的代码吗？

另外，我建议不要释放和重新获得 MediaPlayer 实例，而是使用一个 MediaPlayer 实例，并在需要重用它时遵循典型的 reset()、setDataSource()、prepare()、start() 序列。这将比每次都构建一个新实例更有效。IE ：

```
MediaPlayer mp = new MediaPlayer();
AssetFileDescriptor afd = getResources().openRawResourceFd(R.raw.sound1);
mp.setDataSource(afd.getFileDescriptor(), afd.getStartOffset(), afd.getLength();
mp.prepare();
mp.start();

//to reuse
mp.reset();
afd = getResources().openRawResourceFd(R.raw.sound2);
mp.setDataSource(afd.getFileDescriptor(), afd.getStartOffset(), afd.getLength();
mp.prepare();
mp.start(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-17T16:00:36.057

我遇到了这个问题并解决了它，将我的 MediaPlayer 对象设为私有，因此垃圾收集器不会清理实例。希望它可以帮助某人！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-12T02:29:03.897

这很奇怪，也不是一个好的解决方法，但我到目前为止发现的唯一解决方法。如果我删除`mp.setOnPreparedListener`and`mp.setOnCompletionListener`并且只拥有`mp.start()`，它可以工作。

# iphone - 轮换：我收到错误“wait_fences：未能收到回复：10004003”

> ID：10792526
> 
> 赞同：2
> 
> 时间：2012-05-29T02:47:33.430
> 
> 标签：iphone, objective-c, ipad, rotation

我在stackoverflow上发现了一些类似的问题，但它们不能解决我的问题。第一次做旋转时，我收到错误“wait_fences: failed to receive reply: 10004003”，它会被阻塞一两秒以在新方向上打印新视图，我的代码如下：

```
- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:    (NSTimeInterval)duration
{
    if (isLandScape) {
        [self toHorizontalBrowserView];
    } else {
        [self toVerticalBrowserView];
    }
}

- (void)toHorizontalBrowserView
{
    [horizontalBrowserViewController viewWillAppear:YES];
    [self.activeViewController viewWillDisappear:YES];
    [self.activeViewController.view removeFromSuperview];
    [_viewController.centerView insertSubview: horizontalBrowserViewController.view atIndex:0];
    [self.activeViewController viewDidDisappear:YES];
    [horizontalBrowserViewController viewDidAppear:YES];
    self.activeViewController = horizontalBrowserViewController;
}

- (void)toVerticalBrowserView
{    
    [verticalPhotoBrowserViewController viewWillAppear:YES];
    [self.activeViewController viewWillDisappear:YES];
    [self.activeViewController.view removeFromSuperview];
    [_viewController.centerView insertSubview:verticalPhotoBrowserViewController.view atIndex:0];
    [self.activeViewController viewDidDisappear:YES];
    [verticalPhotoBrowserViewController viewDidAppear:YES];
    _activeViewController = verticalPhotoBrowserViewController;
} 
```

这个问题的原因是什么？如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T03:38:51.913

我过去有这个问题。我认为问题在于您在动画时正在更新/更改视图堆栈。尝试注释掉要删除和插入子视图的位。

# objective-c - 从数组中抓取项目时崩溃...目标c

> ID：10792530
> 
> 赞同：0
> 
> 时间：2012-05-29T02:47:51.313
> 
> 标签：objective-c, ios, ios5

丢失...

当我按下一个单元格后尝试从数组（tourresult）中获取一个项目时，它会一直崩溃。我想从数组中获取索引，以便创建一个对象并将其传递到下一个窗口。看起来我的数组正在某个地方发布，但我没有在它上面设置自动释放，也没有在任何地方发布它。我已经打开了 Zombie 和其他东西，但除了“发送到已释放实例的消息”之外，它没有给我任何其他东西，但它没有被释放......

（ps：这是将数据传输到另一个视图的正确方法吗？）

我已经用 NSMutableArray *tourResult; 设置了 .h 文件。.m 中的属性和合成

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    NSDictionary* loan = [tourResult objectAtIndex:indexPath.row];
    Tour *tour = [[[Tour alloc] init] autorelease];
    tour.tourID = [loan objectForKey:@"partner_id"];
    tour.tourName = [loan objectForKey:@"name"];
    tour.tourDescription = [loan objectForKey:@"use"];
    tour.tourLat = [[loan objectForKey:@"loan_amount"] floatValue];
    tour.tourLon = [[loan objectForKey:@"id"] floatValue];

    TableViewDetailViewController *fvController = [[TableViewDetailViewController alloc] initWithNibName:@"TableViewDetailViewController" bundle:[NSBundle mainBundle]];
    fvController.tour = tour;
    [self.navigationController pushViewController:fvController animated:YES];
    [fvController release];
    fvController = nil;

}

- (void)fetchedData:(NSData *)responseData 
{

    //parse out the json data
    NSError* error;
    NSDictionary *json = [NSJSONSerialization JSONObjectWithData:responseData options:kNilOptions error:&error];

    tourResult = [[NSMutableArray alloc] init];
    tourResult = [json objectForKey:@"loans"];
    for (int x = 0;x < [tourResult count];x++)
    {
        NSDictionary* loan = [tourResult objectAtIndex:x];
        [itemsList addObject:[loan objectForKey:@"name"]];
    }
    [itemsList removeObjectAtIndex:0];
    [myTableView reloadData];

}

-(void)loadView
{

    myTableView = [[UITableView alloc] initWithFrame:[[UIScreen mainScreen] applicationFrame] style:UITableViewStylePlain];
    myTableView.delegate = self;
    myTableView.dataSource = self;

    myTableView.autoresizesSubviews = YES;

    itemsList = [[NSMutableArray alloc] init];
    [itemsList addObject:@"Loading..."];

    self.navigationItem.title = @"Tours";
    self.view = myTableView;

    dispatch_async(kBgQueue, ^{
        NSData* data = [NSData dataWithContentsOfURL: kLatestKivaLoansURL];
        [self performSelectorOnMainThread:@selector(fetchedData:) withObject:data waitUntilDone:YES];
    });

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T02:53:08.360

您在 " " 方法中分配了***两次tourResult。***`fetchedData:`第一个分配它。第二个分配是`objectForKey:`来自您的 json 对象的“”（并且“ `objectForKey:`”可能会或可能不会返回 nil）。

因此，您正在丢失（并泄漏）第一个创建的对象，并且可能在您的第二次分配中没有得到任何有效的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T02:58:36.220

也许你可以在你的方法中试试这个`fetchedData:`：

```
 tourResult = [[NSMutableArray alloc] init];
   [tourResult addObjectsFromArray:[json objectForKey:@"loans"]]; 
```

# cloud-foundry - 在任何来源中都找不到 nats-0.4.22.beta.8

> ID：10792531
> 
> 赞同：0
> 
> 时间：2012-05-29T02:48:02.183
> 
> 标签：cloud-foundry

执行 'bash <<(curl -s -k -B [https://raw.github.com/cloudfoundry/vcap/master/dev_setup/bin/vcap_dev_setup](https://raw.github.com/cloudfoundry/vcap/master/dev_setup/bin/vcap_dev_setup) )' 安装 cloudfoundry 时，出现此错误：找不到 nats -0.4.22.beta.8 在任何来源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T16:07:39.323

安装 VCAP 时，这通常表示网络或代理问题。您仍然看到错误吗？如果是这样，我建议将错误的完整输出发布到[https://groups.google.com/a/cloudfoundry.org/group/vcap-dev/topics的 vcap-dev google 组](https://groups.google.com/a/cloudfoundry.org/group/vcap-dev/topics)

# android - WebView 中的视频 - ApplicationContext vs Activity Context

> ID：10792544
> 
> 赞同：9
> 
> 时间：2012-05-29T02:51:21.827
> 
> 标签：android, memory-leaks, webview

我正在播放一个视频`WebView`。

如果要避免内存泄漏，则`ApplicationContext`（相对于`Activity`上下文）必须用于实例化`WebView`（[请参阅this](https://stackoverflow.com/questions/3130654/memory-leak-in-webview)）

如果我传入`ApplicationContext`和`VideoView`里面`WebView`需要创建一个对话框（通常是“无法播放此视频”），我会得到一个`BadTokenException`（[参考这个](https://stackoverflow.com/questions/9183610/android-badtokenexception-when-using-a-webview-container)）

我们是否应该在内存泄漏或潜在的 ANR 之间做出决定？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T04:54:21.200

我从上面的评论和进一步的测试中得出结论，问题是 SDK 中的一个错误：通过 XML 布局创建 WebView 时，活动作为 WebView 的上下文传递，而不是应用程序上下文。完成活动后，WebView 仍然保留对活动的引用，因此活动不会从内存中删除。我为此提交了一个错误报告，请参阅上面评论中的链接。

```
webView = new WebView(getApplicationContext()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-05T07:57:22.963

这绝对是一个bug，或者api设计真的很糟糕，它没有给出任何错误提示。相信很多开发者都遇到过这个问题。

# nginx - Nginx 和 tsung - 如何最好地指向 html 输出目录

> ID：10792546
> 
> 赞同：0
> 
> 时间：2012-05-29T02:51:23.300
> 
> 标签：nginx, tsung

我正在使用负载测试，输出目录具有这种格式。

```
~/.tsung/log/20120529-0139/report.html 
```

我怎样才能让 nginx 指向该目录，以便我可以加载 html 文件？

可变的路径部分是 20120529-0139。它是一个日期/时间戳。

那么，这将如何在 nginx 配置文件中工作？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T08:45:21.990

抱歉，我不知道 nginx 特定于此，但如果 apache 共享报告可以通过在 apache[文档根](http://webhostingneeds.com/Setting_document_root_in_nginx)目录中为 tsung-reports 创建单独的目录来轻松完成，然后在 tsung 测试开始时点创建目录

```
tsung -f test.xml -l /var/www/html/tsung/ start
Starting Tsung
"Log directory is: /var/www/html/tsung/20120530-0853" 
```

然后访问报告：

```
http://servername/tsung/20120530-0853/graph.html 
```

# google-maps-api-3 - 从 json Sencha Touch 2 查找最近的位置

> ID：10792547
> 
> 赞同：2
> 
> 时间：2012-05-29T02:51:30.010
> 
> 标签：google-maps-api-3, extjs, sencha-touch-2, distance

我正在尝试为我的应用程序设置一部分，其中用户的移动位置（我正在工作）用于查找最近的位置（比如说 15 英里内）与位置的 json 存储（比如说 40 个左右和它会增加）。我一直在绞尽脑汁想怎么解决这个问题。我相信距离矩阵（查看 Google API，但不知道如何从文档中实现它）是我需要的，但我不知道如何加载 json 列表并将其用于该位置（仍然是 n00b） . 如果有教程或一些关于如何去做的细节会很棒。我只需要一个正确的方向。
任何信息都很棒，提前谢谢。我正在使用 Sencha Touch 2.0.1，一个 json 存储并使用 Google Maps JavaScript API v3。

马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T19:00:31.287

是的，想出了一个办法。很可能不是最好的，但它现在可以工作。我正在将所有纬度和经度与位置一起加载到商店文件中。然后，在初始化时，它获取当前位置并将其与存储的位置进行匹配，并对每个位置运行 Haversine 公式。一旦它有了所有的距离，它就会排序并完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T23:26:33.027

您最好在后端进行该处理并仅将关闭记录发送回客户端。这将使您的客户端应用程序不会陷入困境。

如果您将纬度/经度点存储为空间数据，您可以为此使用 Postgresql/Postgis。您也可以使用 MySQL 空间扩展来执行此操作。如果您想将半正弦公式构建到 MySQL 函数中，您可以围绕所有点绘制 15 英里半径并使用 MySQL 的内置“within”函数。如果您更喜欢使用 NoSQL 的风格，那么 CouchDB 有一个不错的 GeoCouch 扩展，它可以执行您想要的功能。

# spring - 如何从 Spring 获取当前用户语言环境而不将其作为参数传递给函数？

> ID：10792551
> 
> 赞同：74
> 
> 时间：2012-05-29T02:52:10.900
> 
> 标签：spring, spring-mvc

我正在使用 Spring 3.1 并希望为当前用户找到活动的语言环境有没有一种方法可以直接获取语言环境而无需将其从控制器传递到服务层......等等。

spring 是否将语言环境存储在线程本地存储中，可以通过调用一些静态方法来获取它？

* * *

## 回答 #1

> 赞同：165
> 
> 时间：2013-04-19T13:54:38.897

我也在寻找如何在不`Locale`四处走动的情况下访问语言环境，但我对 Spring 还是很陌生，发现大多数解决方案都令人困惑。但事实证明，Spring MVC 确实将语言环境存储在线程本地存储中。它可以通过以下方式访问：

```
Locale locale = LocaleContextHolder.getLocale(); 
```

> 最后一种方法 [...] 基于本地线程，以便在架构的任何实体中提供当前语言环境。[...] 您必须知道 LocaleContextHolder 的内容默认对应于 Web 请求中指定的区域设置。

来自：[使用 Spring MVC 3 配置语言环境切换](http://templth.wordpress.com/2010/07/21/configuring-locale-switching-with-spring-mvc-3/ "使用 Spring MVC 3 配置语言环境切换")。（该帖子还提供了获取语言环境的替代配置/方法，这可能对任何想要这样做的人有用）。

您还可以在[此处](http://static.springsource.org/spring/docs/1.2.x/api/org/springframework/context/i18n/LocaleContextHolder.html)`LocaleContextHolder`查看Spring 的文档。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-29T05:02:02.857

这取决于您配置存储区域设置的位置，在会话中还是在 cookie 中？

在我的应用程序中，我已配置为使用下面提到的配置将用户语言环境存储在其会话中。

```
 <mvc:interceptors>
        <ref bean="localeChangeInterceptor"/>
    </mvc:interceptors>

    <bean id="localeChangeInterceptor" class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor">
        <property name="paramName" value="lang"/>
    </bean>

    <bean id="localeResolver" class="org.springframework.web.servlet.i18n.SessionLocaleResolver">
        <property name="defaultLocale" value="en"/>
    </bean>

    <bean id="messageSource" class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
        <property name="basenames">
        <list>
            <value>/WEB-INF/i18n/labels</value>
            <value>/WEB-INF/i18n/messages</value>
            <value>/WEB-INF/i18n/include</value>
        </list>
        </property>
        <property name="defaultEncoding" value="UTF-8"/>
    </bean> 
```

如果您已经完成了类似的操作，那么您可以轻松地从会话中检索语言环境参数。

希望这对您有所帮助。

干杯。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T14:39:14.703

我们有同样的需求，所以想出了`Locale`上下文`ThreadLocal`。我们已经在`ThreadLocal`上下文中存储了一个对象（一些用户信息），所以只是附加它（看起来像一个 hack，但我们找到了最快的解决方案）。

# iphone - 简单的uiview更改不起作用

> ID：10792552
> 
> 赞同：0
> 
> 时间：2012-05-29T02:52:13.523
> 
> 标签：iphone, ios, uiview, uiviewcontroller, uinavigationcontroller

我正在尝试为概念验证做一个简单的视图更改。

这是代码

```
- (void)swipedScreen
{
    if (self.secondView.superview == nil) {
        [myView removeFromSuperview];
        [self.view insertSubview:secondView atIndex:0];
    }
} 
```

当我滑动屏幕时，会发生什么情况是视图区域变黑......并且变得无响应。

我从一个 navigatoin 应用程序开始，只用一个标准的 uiviewcontroller 类替换了 tableview。效果很好。然后我添加了一个 secondView（仅限 xib）并更改了它的类以匹配第一个视图的 viewcontroller。

我发现这很困难的原因是因为我试图为导航控制器内的视图设置动画，而不是将整个视图推送到我习惯做的堆栈上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T03:26:25.983

我敢打赌，空白的无响应视图实际上是您的`secondView`对象。我总是通过设置`[secondView setBackgroundColor:[UIColor greenColor]]`和检查是否真的出现了巨大的绿色矩形来进行测试。

编辑：查看您的代码后，出现了多个问题：

1.  你从来没有真正`+alloc`或`-init`任何事情。
2.  你从来没有真正接触过这些笔尖或在代码中引用它们
3.  您将两个 UIView 声明为 IBOutlets 和 Strong（两个完全相反，因为 IBOutlets 是 __weak、__unsafe_unretained 或 assign），但不要将它们链接到任何东西。

我冒昧地对其进行了修改（无笔尖）。 [看一看](http://dl.dropbox.com/u/54072935/SMPrototype.zip)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T03:07:04.873

你有没有初始化第二个视图？如果初始化，您可以尝试为 secondView 设置框架

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T03:46:47.383

您在堆栈底部插入视图，

```
[self.view insertSubview:secondView atIndex:0]; 
```

尝试使用 addSubview 代替。您还需要在某处设置视图框架。

# php - 包括来自普通 PHP 文件的 codeigniter？

> ID：10792559
> 
> 赞同：0
> 
> 时间：2012-05-29T02:53:43.470
> 
> 标签：php, codeigniter

我正在使用的第 3 方服务将用户返回到如下网址：

```
site.com/something.php?id=XXX&something=abc.... 
```

因此，我只需要能够接受`$_GET`站点一部分的参数。

有没有办法把一个文件放在codeigniter的应用程序目录之外，它会做这样的事情：

```
<?
$id = $_GET['id'];
$something = $_GET['something'];

//Do something so codeigniter thinks this is a request to site.com/process/$id/$something

require('index.php'); //codeigniter's index.php file
?> 
```

我记得`putenv()`过去使用它来实现这一点，但不记得细节了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T01:12:31.987

不确定 putenv，但如果情况变得更糟，您可以通过爆炸来获取 get 数组的内容`$_SERVER['QUERY_STRING']`

get 不需要启用，您仍然可以访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T06:22:25.230

尝试

```
$this->config->set_item("allow_get_array",TRUE); 
```

在你的控制器的构造函数之前`parent::__construct();`。

> 调用新控制器时会自动调用安全过滤函数。它执行以下操作：
> 
> 如果 $config['allow_get_array'] 为 FALSE（默认为 TRUE），则销毁全局 GET 数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T03:19:01.113

尝试仅使用重定向：

```
<?php
$id = $_GET['id'];
$something = $_GET['something'];
header('Location: http://www.site.com/' . $id . '/' . $something); 
```

只要初始`something.php`请求是直接针对该文件而不是`index.php`.

这是我能想到的最安全的方法，您不必中断 CodeIgniter 的程序流程或在您的应用程序中启用查询字符串，这可能是不安全的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T03:23:38.120

也许我误解了你的架构，但你不能只为 codeigniter 启用 GET 吗？

请参阅`$config['allow_get_array']`文档：

[http://codeigniter.com/user_guide/libraries/input.html](http://codeigniter.com/user_guide/libraries/input.html)

并`$this->input->get()`在同一页上看到..

# php - PHP 查询中断

> ID：10792561
> 
> 赞同：-1
> 
> 时间：2012-05-29T02:54:02.883
> 
> 标签：php, mysql

我第一次尝试在 PHP 中调用数据库，这个查询导致我的代码中断。请注意，我已经测试了连接是否良好。罪魁祸首是mysql_query()。谁能发现可能出了什么问题？表名称是“users”，“名称”列下的条目是“mvalentine”。据我所知，一切都与大小写相符。

dbInit.php

```
<?php
$connection = mysql_connect('localhost', 'root', 'password');
$db = mysql_select_db('scaleup');
if ($db) {
    $user = mysql_query("SELECT ID FROM 'users' WHERE 'Name' = 'mvalentine'");
}
else {
die ('Error 01: Connection to database failed.');
}

?> 
```

这个修改后的代码现在正在返回一些东西。ajax 调用中的值“用户”现在返回“假”

返回的值应该是 '1'

阿贾克斯响应：

```
 <?php
include('dbInit.php');
include('objects.php'); //irrelevant, all code working properly

$layout = new Layout();
$bids = new Bids();
$out = array('layout' => $layout->_board, 'height' => $layout->_height, 'width' => $layout->_width,
                'bids' => $bids->_board, 'maxBids' => $bids- >_maxBids, 'users' => $user);
$out = json_encode($out);
echo $out;
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T03:11:49.353

if 语句中的“$db”是什么？

要连接到您的数据库，您必须使用“mysql_connect”和“mysql_select_db”。
例如，

```
<?php
    $connection = mysql_connect('localhost', 'root', 'password');
    $db = mysql_select_db('database_name');
    if($connection)
    {
        if($db)
        {
            //query here
        } else {
            die("Couldn't connect to mysql database ".mysql_error());
        }
    } else {
        die("Couldn't connect to mysql host ".mysql_error());
    }
?> 
```

此外，最好将表名和列名用主要字符括起来，如下所示

```
mysql_query("SELECT * FROM `tablename` WHERE `column_name` = 'value'"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T03:18:27.773

我现在无法验证这一点，但我相信您的查询中可能存在语法错误：

```
mysql_query("SELECT ID FROM 'users' WHERE 'Name' = 'mvalentine'"); 
```

列名和表名，如果你想引用它们，应该使用反勾号：

```
$result = mysql_query("SELECT ID FROM `users` WHERE `Name` = 'mvalentine'"); 
```

然后更改其余代码以实际获取用户详细信息：

```
$result = mysql_query("SELECT ID FROM `users` WHERE `Name` = 'mvalentine'") or die("Query failed");
$row = mysql_fetch_assoc($result);
$user = $row['ID']; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T03:22:14.270

您似乎希望 $user 包含用户 ID，但它实际上将包含一个包含所有返回行的资源。为了获取用户 ID，您将需要以下内容：

```
$result = mysql_query("SELECT ID FROM `users` WHERE `Name` = 'mvalentine'");

if (!$result) {
    die('Invalid query: ' . mysql_error());
} else {
    $row = mysql_fetch_assoc($result);
    $user = $row['ID']; 
} 
```

另外，请注意其他关于样式和 mysqli 和 PDO 对此类事物的偏好的评论和答案。

# windows-phone-7 - 如何使用 XNA 在 Windows Phone 7 上显示菜单然后进行游戏？

> ID：10792567
> 
> 赞同：0
> 
> 时间：2012-05-29T02:54:52.677
> 
> 标签：windows-phone-7, xna

我已经阅读了几本关于使用 XNA 进行 Windows Phone 7 游戏开发的书籍，它们都直接介绍了如何使用 sprotes 等，但他们没有说明如何制作一个从菜单开始的游戏，然后取决于用户点击了什么来做什么. 有没有更好的方法，而不是做一个变量来保存我们的游戏处于什么状态、菜单或游戏本身的信息，然后 Draw() 方法会根据内容进行绘制？我认为不同类型的游戏会更多地分离到不同的文件中，就像在其他编程语言中一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T03:19:49.097

[MSDN 游戏状态管理（Mango，C#/VB）](http://create.msdn.com/en-US/education/catalog/sample/game_state_management)代码示例是使用 XNA 实现基本菜单的精彩演示。我建议您下载并检查代码。

# jquery-ui - 如何将一个表单元素的值复制到另一个？

> ID：10792569
> 
> 赞同：0
> 
> 时间：2012-05-29T02:55:13.783
> 
> 标签：jquery-ui, jquery, jquery-plugins, expressionengine

这是对这个问题的跟进：

[提交表单时如何操作要忽略的表单/输入](https://stackoverflow.com/questions/10775276/how-can-i-manipulate-a-form-inputs-to-be-ignored-when-a-form-is-submitted)

我显示了信息、表单、show()s 和 hide()s 等。大多数事情似乎进展得相当顺利。我可以使用一些输入 - 没有双关语 - 是关于如何在表单中获取新值并将它们复制到仅显示 div 作为 ajaxSuccess 的一部分。

我可以复制 type=text 和 textarea 但是复选框、多选和单选。

简而言之，一旦提交了表单中的新值，我需要使用这些新值更新页面（而不是表单）。也许我需要为每种表单元素类型写一些？即便如此，我不太确定从哪里开始。

如果我的工作不清楚，请原谅我。如果是这种情况，请问您希望我澄清什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T08:44:59.410

最有意义的方法是让处理表单的脚本返回 ajaxSuccess 数据中的表单内容。这是一个例子：

的JavaScript：

```
$.ajax({
    url: 'ajax/process.php',
    success: function(data) {
        // Load returned data into page
        $('#result').html(data);
    }
}); 
```

php：

```
var $input1 = $_POST['input1'];
var $input1 = $_POST['input1'];

// DO SOMETHING WITH VARS AND IF SUCCESSFUL RETURN

if($success){
    echo "Thanks! Here is your info: ".$input1." and ".$input2;
} 
```

返回数据后，您可以随意操作它。例如，如果您需要从表单中分离出不同的值，您可以从 PHP 中返回一个逗号分隔的字符串，并使用 javascript**`.split()`**方法从该字符串创建一个数组。

希望这会有所帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T12:27:21.187

我想说您最好的选择是完全采用不同的方法，并在更新后从数据库中重新加载您的内容 - 在这种情况下通过 AJAX 调用。原因是您从表单中发布的内容可能与最终保存到数据库的内容不匹配，因为您的某些字段类型可能会处理和更改它们传递的数据（例如，剥离标签、格式化文本等）。这样，刷新的内容与来自 Channel Entries 调用的相同内容完全匹配。

# delphi - ISO 8601 字符串日期选择器（Delphi、DevExpress）

> ID：10792572
> 
> 赞同：0
> 
> 时间：2012-05-29T02:55:38.163
> 
> 标签：delphi, devexpress, iso8601, tcxgrid

我们的 Delphi 应用程序使用数据库绑定的 TcxGridDBColumns 让用户将 ISO 8601 格式的日期 (YYYY-MM-DD) 作为字符串进行操作。我想为最终用户提供一个基于日历的日期选择器。

`TcxDateEditProperties`不能（直接）使用，因为底层数据库使用字符串字段。因此，据我了解，我可以选择

1.  在所有表中创建一个额外的日期列（TDateTime DB 字段），并将日期转换为 TDataSet 的 BeforePost 事件上的 ISO 8601 字符串列

2.  创建一个自定义 Tcx***Properties 类。这可能涉及继承自`TcxPopupEditProperties`.

由于有很多表受到影响，我宁愿使用#2。你能指出帮助我的文件吗？还是有#3？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T08:32:15.670

有一个#3：不需要额外的列，DateEdit 可以理解当前系统格式（其中用户更改被写回）和 ISO 格式的字符串。在 BeforePost 中，我将系统格式转换回数据库中所需的 ISO。作为额外的奢侈，以下事件将现有的 ISO 日期更改为用户的默认日期格式：

```
procedure T_RVVorbereitung.cxGridAnalysisDateGetDataText(
  Sender: TcxCustomGridTableItem; ARecordIndex: Integer; var AText: string);
var
  ADate                                 : TDateTime;
begin
  try
    try
      ADate := TIso8601.DateTimeFromIso8601(AText);         // YYYY-MM-DD
    except
      ADate := StrToDate(AText);
    end;
    AText := DateToStr(ADate);
  except
    // neither system nor ISO date: show as it is
  end;
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T04:45:56.213

如果您所说的文档是关于编写自定义组件的，那么您可以在此处查看[创建自定义 Delphi 组件](http://delphi.about.com/library/bluc/text/uc080701a.htm)，以及 Delphi 附带的文档“组件编写器指南”pdf（它有关于自定义 DBGrid 和导航月份、年份和天也）。这可用于选项 2 的起点

# maven-2 - Maven 资源插件无法覆盖只读文件问题

> ID：10792573
> 
> 赞同：0
> 
> 时间：2012-05-29T02:55:46.883
> 
> 标签：maven-2, maven-plugin

在我看来，maven-resources-plugin copy-resource 无法覆盖只读文件。

该文件是只读的，因为我们的 svn 需要一个“锁”才能使其成为可读写的。

如果我添加了“”，它就不起作用`<overwrite>true</overwrite>`（我知道这不是为了这个目的）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T05:34:44.773

使用与 SVN 和源代码相关的锁没有意义。当然，maven-resources-plugin 不支持这种滥用。这个问题的简单答案是：不要在源文件上使用锁。

# java - libsvm java实现

> ID：10792576
> 
> 赞同：15
> 
> 时间：2012-05-29T02:56:11.850
> 
> 标签：java, svm, libsvm

我正在尝试为 libsvm 使用 java 绑定：

```
http://www.csie.ntu.edu.tw/~cjlin/libsvm/ 
```

我已经实现了一个“简单”的例子，它很容易在 y 中线性分离。数据定义为：

```
double[][] train = new double[1000][]; 
double[][] test = new double[10][];

for (int i = 0; i < train.length; i++){
    if (i+1 > (train.length/2)){        // 50% positive
        double[] vals = {1,0,i+i};
        train[i] = vals;
    } else {
        double[] vals = {0,0,i-i-i-2}; // 50% negative
        train[i] = vals;
    }           
} 
```

其中第一个“特征”是类，训练集的定义类似。

训练模型：

```
private svm_model svmTrain() {
    svm_problem prob = new svm_problem();
    int dataCount = train.length;
    prob.y = new double[dataCount];
    prob.l = dataCount;
    prob.x = new svm_node[dataCount][];     

    for (int i = 0; i < dataCount; i++){            
        double[] features = train[i];
        prob.x[i] = new svm_node[features.length-1];
        for (int j = 1; j < features.length; j++){
            svm_node node = new svm_node();
            node.index = j;
            node.value = features[j];
            prob.x[i][j-1] = node;
        }           
        prob.y[i] = features[0];
    }               

    svm_parameter param = new svm_parameter();
    param.probability = 1;
    param.gamma = 0.5;
    param.nu = 0.5;
    param.C = 1;
    param.svm_type = svm_parameter.C_SVC;
    param.kernel_type = svm_parameter.LINEAR;       
    param.cache_size = 20000;
    param.eps = 0.001;      

    svm_model model = svm.svm_train(prob, param);

    return model;
} 
```

然后评估我使用的模型：

```
public int evaluate(double[] features) {
    svm_node node = new svm_node();
    for (int i = 1; i < features.length; i++){
        node.index = i;
        node.value = features[i];
    }
    svm_node[] nodes = new svm_node[1];
    nodes[0] = node;

    int totalClasses = 2;       
    int[] labels = new int[totalClasses];
    svm.svm_get_labels(_model,labels);

    double[] prob_estimates = new double[totalClasses];
    double v = svm.svm_predict_probability(_model, nodes, prob_estimates);

    for (int i = 0; i < totalClasses; i++){
        System.out.print("(" + labels[i] + ":" + prob_estimates[i] + ")");
    }
    System.out.println("(Actual:" + features[0] + " Prediction:" + v + ")");            

    return (int)v;
} 
```

传递的数组是测试集中的一个点。

结果总是返回 0 类。确切的结果是：

```
(0:0.9882998314585194)(1:0.011700168541480586)(Actual:0.0 Prediction:0.0)
(0:0.9883952943701599)(1:0.011604705629839989)(Actual:0.0 Prediction:0.0)
(0:0.9884899803606306)(1:0.011510019639369528)(Actual:0.0 Prediction:0.0)
(0:0.9885838957058696)(1:0.011416104294130458)(Actual:0.0 Prediction:0.0)
(0:0.9886770466322342)(1:0.011322953367765776)(Actual:0.0 Prediction:0.0)
(0:0.9870913229268679)(1:0.012908677073132284)(Actual:1.0 Prediction:0.0)
(0:0.9868781382588805)(1:0.013121861741119505)(Actual:1.0 Prediction:0.0)
(0:0.986661444476744)(1:0.013338555523255982)(Actual:1.0 Prediction:0.0)
(0:0.9864411843906802)(1:0.013558815609319848)(Actual:1.0 Prediction:0.0)
(0:0.9862172999068877)(1:0.013782700093112332)(Actual:1.0 Prediction:0.0) 
```

有人可以解释为什么这个分类器不起作用吗？是否有步骤我搞砸了，或者我错过了一个步骤？

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-15T11:23:11.867

在我看来，您的评估方法是错误的。应该是这样的：

```
public double evaluate(double[] features, svm_model model) 
{
    svm_node[] nodes = new svm_node[features.length-1];
    for (int i = 1; i < features.length; i++)
    {
        svm_node node = new svm_node();
        node.index = i;
        node.value = features[i];

        nodes[i-1] = node;
    }

    int totalClasses = 2;       
    int[] labels = new int[totalClasses];
    svm.svm_get_labels(model,labels);

    double[] prob_estimates = new double[totalClasses];
    double v = svm.svm_predict_probability(model, nodes, prob_estimates);

    for (int i = 0; i < totalClasses; i++){
        System.out.print("(" + labels[i] + ":" + prob_estimates[i] + ")");
    }
    System.out.println("(Actual:" + features[0] + " Prediction:" + v + ")");            

    return v;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-11T20:19:22.667

这是我使用以下 R 代码中的数据测试过的上述示例的返工：http: [//cbio.ensmp.fr/~jvert/svn/tutorials/practical/svmbasic/svmbasic_notes.pdf](http://cbio.ensmp.fr/~jvert/svn/tutorials/practical/svmbasic/svmbasic_notes.pdf)

```
import libsvm.*;

public class libsvmTest {

  public static void main(String [] args) {

      double[][] xtrain = ...
      double[][] xtest = ...
      double[][] ytrain = ...
      double[][] ytest = ...

      svm_model m = svmTrain(xtrain,ytrain);

      double[] ypred = svmPredict(xtest, m); 

      for (int i = 0; i < xtest.length; i++){
          System.out.println("(Actual:" + ytest[i][0] + " Prediction:" + ypred[i] + ")"); 
      }  

  }

  static svm_model svmTrain(double[][] xtrain, double[][] ytrain) {
        svm_problem prob = new svm_problem();
        int recordCount = xtrain.length;
        int featureCount = xtrain[0].length;
        prob.y = new double[recordCount];
        prob.l = recordCount;
        prob.x = new svm_node[recordCount][featureCount];     

        for (int i = 0; i < recordCount; i++){            
            double[] features = xtrain[i];
            prob.x[i] = new svm_node[features.length];
            for (int j = 0; j < features.length; j++){
                svm_node node = new svm_node();
                node.index = j;
                node.value = features[j];
                prob.x[i][j] = node;
            }           
            prob.y[i] = ytrain[i][0];
        }               

        svm_parameter param = new svm_parameter();
        param.probability = 1;
        param.gamma = 0.5;
        param.nu = 0.5;
        param.C = 100;
        param.svm_type = svm_parameter.C_SVC;
        param.kernel_type = svm_parameter.LINEAR;       
        param.cache_size = 20000;
        param.eps = 0.001;      

        svm_model model = svm.svm_train(prob, param);

        return model;
    }  

  static double[] svmPredict(double[][] xtest, svm_model model) 
  {

      double[] yPred = new double[xtest.length];

      for(int k = 0; k < xtest.length; k++){

        double[] fVector = xtest[k];

        svm_node[] nodes = new svm_node[fVector.length];
        for (int i = 0; i < fVector.length; i++)
        {
            svm_node node = new svm_node();
            node.index = i;
            node.value = fVector[i];
            nodes[i] = node;
        }

        int totalClasses = 2;       
        int[] labels = new int[totalClasses];
        svm.svm_get_labels(model,labels);

        double[] prob_estimates = new double[totalClasses];
        yPred[k] = svm.svm_predict_probability(model, nodes, prob_estimates);

      }

      return yPred;
  } 

} 
```

这是输出：

```
(Actual:1.0 Prediction:1.0)
(Actual:1.0 Prediction:1.0)
(Actual:1.0 Prediction:1.0)
(Actual:1.0 Prediction:1.0)
(Actual:1.0 Prediction:1.0)
(Actual:1.0 Prediction:1.0)
(Actual:1.0 Prediction:1.0)
(Actual:1.0 Prediction:1.0)
(Actual:1.0 Prediction:1.0)
(Actual:1.0 Prediction:1.0)
(Actual:1.0 Prediction:1.0)
(Actual:1.0 Prediction:1.0)
(Actual:1.0 Prediction:1.0)
(Actual:1.0 Prediction:1.0)
(Actual:1.0 Prediction:1.0)
(Actual:-1.0 Prediction:-1.0)
(Actual:-1.0 Prediction:-1.0)
(Actual:-1.0 Prediction:-1.0)
(Actual:-1.0 Prediction:-1.0)
(Actual:-1.0 Prediction:-1.0)
(Actual:-1.0 Prediction:-1.0)
(Actual:-1.0 Prediction:-1.0)
(Actual:-1.0 Prediction:-1.0)
(Actual:-1.0 Prediction:1.0)
(Actual:-1.0 Prediction:-1.0)
(Actual:-1.0 Prediction:-1.0)
(Actual:-1.0 Prediction:-1.0)
(Actual:-1.0 Prediction:-1.0)
(Actual:-1.0 Prediction:-1.0)
(Actual:-1.0 Prediction:-1.0) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T14:05:36.913

我对 LibSVM 的 java 实现做了一个稍微重构的版本，您可能会发现它更易于使用： [https](https://github.com/syeedibnfaiz/libsvm-java-kernel) ://github.com/syeedibnfaiz/libsvm-java-kernel 。查看 Demo.java 类以了解如何使用它。

# ios5 - 让 UISearchBar 成为 UITextField 的替代品？

> ID：10792578
> 
> 赞同：0
> 
> 时间：2012-05-29T02:56:16.670
> 
> 标签：ios5, uitextfield, uisearchbar

在界面生成器中，UISearchBar 的样式似乎会出现在工具栏中（正如您所期望的，考虑到它的命名方式），而 UITextField 的样式会在空白页面上看起来不错。

有没有办法制作一个不需要在“栏”中的 UISearchBar - 例如，如果您想在页面上有多个启用搜索的文本字段？

我的最终目标是拥有一个充满 UITextFields 的页面——当用户填写表单时，每个页面都会弹出一个预测搜索弹出框。我可以在导航栏中进行预测搜索 - 但我想启用页面上的每个字段。

非常感谢帮助和指向示例代码的指针！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T02:58:59.963

实际上，在 iOS 5 中，UISearchBar 在外观上是如此令人难以置信的可定制性，以至于您可以让它看起来像您想要的样子。所以没有（而且从来没有，真的）任何需要它在“酒吧”中。

这个看起来很[可怕的东西](https://github.com/mattneub/Programming-iOS-Book-Examples/blob/master/figures/pios_2506.png?raw=true)是一个搜索栏，创建它只是为了展示 UISearchBar 的真正可定制性！

# dependency-injection - Symfony2 中的依赖注入到底是做什么的？

> ID：10792579
> 
> 赞同：0
> 
> 时间：2012-05-29T02:57:01.193
> 
> 标签：dependency-injection, symfony

我注册了我的 services.yml 文件，如下所示：

```
services:
  PMI.form.users_tasks:
        class: PMI\UserBundle\Form\UsersTasksType
        arguments: 
             EntityManager: "@doctrine.orm.default_entity_manager" 
```

我可以通过 列出它`php app/console container:debug`，这意味着我的服务已正确注册。

在我的 UsersTasksType 类中，我喜欢以下内容：

```
class UsersTasksType extends AbstractType
{

    protected $ur;

    public function __construct(EntityManager  $ur )
    {
        $this->setUr($ur);
    }

    // Get and setters
} 
```

依赖注入是否意味着我不必再将 传递`EntityManager` 给类构造函数？要不然是啥 ？

因为当我必须运行下面的代码时：

```
$form   = $this->createForm(new UsersTasksType(), $entity); 
```

我收到此错误：

```
Catchable Fatal Error: Argument 1 passed to PMI\UserBundle\Form\UsersTasksType::__construct() must be an instance of Doctrine\ORM\EntityManager, none given, called in C:\wamp\www\PMI_sf2\src\PMI\UserBundle\Controller\UsersTasksController.php on line 74 and defined in C:\wamp\www\PMI_sf2\src\PMI\UserBundle\Form\UsersTasksType.php line 19 
```

我必须在下面做一些事情：

```
$em = $this->container->get('doctrine.orm.entity_manager');
$form   = $this->createForm(new UsersTasksType($em), $entity); 
```

那么依赖注入的全部目的是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T04:36:29.060

依赖注入基本上让一个服务（在本例中为您的 UserTasksType）访问另一项服务（在本例中为您的实体管理器）。

```
arguments: 
     EntityManager: "@doctrine.orm.default_entity_manager" 
```

这两行告诉 Symfony，当您实例化一个新的 UserTasksType 对象时，实体管理器服务将被传递到构造函数中，这有效地让您的 UserTasksType 访问实体管理器。

如果您没有在 UserTasksType 中使用实体管理器，则无需在构造函数中注入它，您可以摆脱上面的两行以及 UserTasksType 中的`__construct()`/`setUr()`方法。

帮助您理解 DIC 的一个更好的例子可能是您有一个专门为发送电子邮件而编写的服务（例如 Swiftmail），您需要将它注入另一个服务，以便该服务可以发送电子邮件。

通过增加

```
arguments: [ @mailer ] 
```

对于您的服务定义，您的服务构造函数将期望您的邮件服务

```
__construct ($mailer)
{
    $this->mailer = $mailer;
} 
```

这将使其有权发送电子邮件

```
someFunction()
{
    //do something useful, then send an email using the swift mailer service
    $this->mailer->sendEmail();
} 
```

查看最新的 Symfony 文档以获得更多解释。

[http://symfony.com/doc/current/book/service_container.html](http://symfony.com/doc/current/book/service_container.html)

# clojure - Clojure：编译时插入前/后函数

> ID：10792581
> 
> 赞同：2
> 
> 时间：2012-05-29T02:57:37.387
> 
> 标签：clojure

这是[Clojure 的后续：pre post functions](https://stackoverflow.com/questions/10778539/clojure-pre-post-functions)

## 目标

对于每个 Clojure 函数，我都希望有一个执行的*pre*和*post*函数：

*   就在函数被评估之前，并且
*   在函数返回之后

    现在，我想在我的 *.clj 文件中执行*所有这些功能。*

    我更愿意（这也是一个学习练习）在 Clojure 编译器级别执行此操作。

## 问题：

我该如何开始呢？我应该阅读 Clojure 编译器源代码的哪一部分？我应该了解有关 Clojure 编译器内部的哪些文档/教程？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T03:16:26.390

首先，这听起来像是一件有点疯狂的事情。几乎可以肯定有更好的方法来实现任何明智的目标（即这是尖叫“ [XY 问题](http://www.perlmonks.org/index.pl?node_id=542341)”）。但只要你说这只是为了学习练习，那很好:-)

在破解编译器之前，我可以想到一些您可能需要考虑的策略：

*   创建您自己的`defn`宏，在创建函数时进行包装。显然，您需要确保使用您自己的 defn 版本而不是内置版本。可能是最简单的解决方案。
*   在运行时（加载后）遍历您的命名空间，并将所有函数重新定义为同一函数的包装版本。可能会有点混乱，但肯定会增强您对命名空间的理解:-)

如果您真的想破解编译器，进行此更改最简单的地方可能就是[破解](https://github.com/clojure/clojure/blob/master/src/clj/clojure/core.clj)`defn`core.clj

# php - LOCK 如何将日志写入平面文件？

> ID：10792583
> 
> 赞同：5
> 
> 时间：2012-05-29T02:58:03.773
> 
> 标签：php, concurrency, fopen, fwrite, flat-file

平面文件的读取并发几乎是无限的（如果我错了，请纠正我）；但是写的并发性如何？考虑在 PHP 中编写一个简单的访问日志（用于访问），以附加一行以结尾的访问详细信息`\n`

```
fopen(); // in append mode
fwrite();
fclose(); 
```

由于我们有并发访问者，系统（一个用户是 wbserver/php 用户）如何同时写入视图日志？

我的困惑是：该函数`file_put_contents()`（它是上述三个函数的包装器）有一个锁定选项（`LOCK_EX`）？使用此锁定选项是否有益？这将如何影响日志写入？

**更新：**我的问题是关于`LOCK`ing 最初是如何工作/影响将日志写入文件的。我不比较`file_put_contents`and `fwrite`; 甚至我的问题也不限于`PHP`. 问题是关于在写入过程中锁定文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T03:10:41.520

`file_put_contents()`确实有一个锁定选项，但在我看来，你应该使用它`flock()`。

从手册：

> 可用标志
> 
> **FILE_USE_INCLUDE_PATH**
> 在包含目录中搜索文件名。有关详细信息，请参阅 include_path。
> 
> **FILE_APPEND** 如果文件 filename 已经存在，则将数据附加到文件而不是覆盖它。
> 
> **LOCK_EX** 在进行写入时获取文件的排他锁。

`flock()`允许您使用其他方法：

> **LOCK_SH**获取共享锁（读取器）。
> **LOCK_EX**获取排他锁（写入器）。
> **LOCK_UN**释放锁（共享或独占）。

见这里： http: [//php.net/manual/en/function.flock.php](http://php.net/manual/en/function.flock.php)和这里： http: [//php.net/manual/en/function.file-put-contents.php](http://php.net/manual/en/function.file-put-contents.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T03:25:00.567

请注意，访问日志的文件锁定是一个很容易引入竞争条件的环境。也许研究另一种方法？登录到数据库，也许？对于一个设计良好的系统来说，尝试使用并行进程同时打开和写入日志太容易了。

也许看看独白？那里有一些用于异步日志记录的日志记录处理程序，这对于与访问日志记录有关的任何事情都是理想的。

[https://github.com/Seldaek/monolog](https://github.com/Seldaek/monolog)

# javascript - 想要从字符串中删除花括号

> ID：10792587
> 
> 赞同：7
> 
> 时间：2012-05-29T02:58:41.200
> 
> 标签：javascript, json

我通过该网站进行了搜索，但它仍然无法正常工作。

```
var blah2 = JSON.stringify({foo: 123, bar: <x><y></y></x>, baz: 123}); 
```

这是我尝试过的：

```
blah2.replace(/[{}]/g, ""); 
```

这就是字符串的结果：

```
got "{\"baz\":123,\"foo\":123}" 
```

（我知道这可能是一个新手问题，但这是我第一次使用 javascript，我只是不知道我错过了什么）

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-29T03:01:20.713

Javascript 字符串是不可变的。当你打电话时`blah2.replace`，你不是在替换里面的东西`blah2`，你是在创建一个新的字符串。你可能想要的是：

```
blah2 = blah2.replace(/[{}]/g, ''); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T04:05:58.700

> 因为我要用逗号分割它，所以它变成一个数组，所以当我对它进行排序时，我不想根据 { 和 } 对其进行排序

zi42 已经给你正确答案了。

但是由于您已经按照上面引用的方式编写，看起来您真正想要的是对数据进行排序并将其拆分为数组；在这种情况下，在逗号等处解析/拆分它是一个很长的路要走。这是另一种思考方式：

```
var data = {foo: 123, bar: <x><y></y></x>, baz: 123};
var key;
var dataSorted = []; // Create an empty array

for (key in data) {  // Iterate through each key of the JSON data
  dataSorted.push(key);
}

dataSorted.sort(); 
```

现在您已经对数据进行了排序。当你想使用它时，你可以这样使用它：

```
for (var i = 0; i < dataSorted.length; i++) {
  var key = dataSorted[i];
  // Now you do whatever you need with sorted data. eg:
  console.log("Key is: " + key + ", value is: " + data[key]);
} 
```

# python - 哪些脚本会进入 Python 包的 bin 文件夹？

> ID：10792588
> 
> 赞同：21
> 
> 时间：2012-05-29T02:58:42.050
> 
> 标签：python, package, directory, bin

我正在从 Learn Python the Hard Way 中学习有关 Python 包的知识，以及它所说的其中一个练习：

> 将脚本放在可以运行的 bin 目录中

对我来说，这似乎有点模糊。我不太确定 bin 文件夹中会包含什么样的脚本。[搭便车者的包装指南](https://the-hitchhikers-guide-to-packaging.readthedocs.io/)说

> 将您编写的使用您的包并且您认为对您的用户有用的任何脚本放入 bin 中。如果没有，请删除 bin 目录。

但我仍然想知道什么样的脚本会在那里。所以，我知道这听起来像是一个愚蠢的问题，但是有人可以给我一个例子，说明何时以及为什么将“脚本”放在他们包的 bin 文件夹中？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-31T19:04:25.503

我最近自己在 LPTHW 中通过了 Ex46。和你一样，我对脚本感到困惑。如果其他答案对您来说太高级了，我最终只输入了一个简单的“hello world”脚本：

```
#!/usr/bin/env python

from test3 import printstring
printstring.printstring("test script working")
print "test over" 
```

我将该文件命名为 testscript3.py （*注意，我后来了解到，如果它是一个我希望看起来像系统命令的真实脚本，那么省略 .py 文件扩展名会更方便）

我的文件 test3.py 是这样的：

```
def printstring(s='you did not provide string'):
    print s 
```

这是我在尝试使此过程正常工作时学到的一些新手知识：

*   这 ＃！符号有时发音为 shebang，简单的解释是该行上的命令告诉 shell 使用 python 来运行脚本。如果您不使用“.py”文件扩展名，那么脚本的用户不需要关心运行脚本需要什么解释器。参见[维基百科 shebang 文章](http://en.wikipedia.org/wiki/Shebang_%28Unix%29)。

*   我运行以下命令来打包发行版：

    python setup.py sdist

*   之后，我可以通过运行安装包和脚本

    sudo pip install test3-0.1.tar.gz

*   我担心的一件事是脚本文件的权限。但是，我注意到 distutils 在打包时会处理这个问题（将模式更改为 755 或其他）。

你可以在 github 上找到我的[整个项目](https://github.com/stevekochscience/Test-python-package-with-script-LPTHW-EX46)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T03:15:49.120

例如[Django 的项目创建](https://docs.djangoproject.com/en/dev/intro/tutorial01/#creating-a-project)、[Scrapy 的项目创建](http://doc.scrapy.org/en/latest/intro/tutorial.html#creating-a-project)、django-admin.py 和 scrapy 都是 bin 文件夹中的脚本。

通过检查几乎基于 python 的工具，您可以获得更多示例。

# jpa - pe中的jta和非jta

> ID：10792589
> 
> 赞同：0
> 
> 时间：2012-05-29T02:58:58.560
> 
> 标签：jpa, jta

如果我在 persistence.xml 中同时提及 jta 和非 jta 数据源，提供者将如何确定使用什么以及何时使用？有没有办法在某些情况下强制使用非 jta 数据源？我正在使用 IBM 支持的 OpenJPA。

一些提供程序允许同时声明 jta-datasource 和 non-jta-datasource 并使用后者通过非 JTA 连接进行优化读取（即，不会与正在进行的 JTA 事务相关联）。这是如何工作的以及 OpenJPA 是否支持这一点？ [“jta-datasource”和“resource-local”数据源之间的区别？](https://stackoverflow.com/questions/3217586/difference-between-a-jta-datasource-and-a-resource-local-datasource)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T05:35:25.440

1.  可能您想要的是为数据源配置单独的持久性单元，然后相应地注入。

    > ```
    > <persistence-unit name="JTA_DS" transaction-type="JTA">
    >           <jta-data-source>java:JTA_DS</jta-data-source>
    > </persistence-unit>
    > <persistence-unit name="NON_JTA_DS" transaction-type="RESOURCE_LOCAL">
    >           <non-jta-data-source>java:NON_JTA_DS</non-jta-data-source>
    > </persistence-unit> 
    > ```

    现在您可以`EnityManager`为各自的持久性单元创建。

    `@PersistenceContext(unitName="JTA_DS")`
    `private EntityManager _JTAManager;`

    `@PersistenceContext(unitName="NON_JTA_DS")`
    `private EntityManager _NonJTAManager;`

2.  否则，您可以`EntityManagerFactory`根据需要使用适当的数据源手动构建。您可以参考[此](https://stackoverflow.com/a/5280608/366964)链接了解更多详情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T03:51:15.890

很难理解为什么您在 persistence.xml 中同时提到 jta 和非 jta 数据源。您不需要同时声明两者，您可能需要声明一个，jta 或非 jta 数据源。如果您使用 jta 数据源，您将在您的应用程序服务器中配置它，并在您的 persistence.xml 中声明。如果可以t 使用 jta 数据源，您将在您的 persistence.xml 中配置 JDBC 连接。

# php - PHP MYSQL 注册页面验证

> ID：10792590
> 
> 赞同：1
> 
> 时间：2012-05-29T02:59:00.040
> 
> 标签：php, mysql

关于 php 和 mysql 的另一个问题......如果有意义的话，我正在徘徊..

基本上在下面的代码上方..是表单..我希望它通过错误计数进行验证。（代码如下）如果计数错误为0，则运行“INSERT INTO”代码..如果计数错误为1或更多，显示错误和未发送的数据。

但是有一件事..下面所述的代码实际上并没有“工作”并且没有给出任何错误:(

所有评论都非常感谢！非常感谢

```
 <?php
    global $pdo;
        $pdo = new PDO('mysql:host=localhost;dbname=clubresults', 'root', '12345678');
    #Set Error Mode to ERRMODE_EXCEPTION.
    $pdo->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);  

    ?>

<<<<<<<FORM GOES HERE>>>>>>>>

<?php

function validatePattern(&$errors, $field_list, $field_name, $pattern)
{
    if (!isset($field_list[$field_name]) || $field_list[$firld_name] == '')
        $errors[$field_name] = 'Required';
    else if (!preg_match($pattern, $field_list[$field_name]))
        $errors[$field_name] = 'Invalid';
}
    $errors = array();
    validatePattern($errors, $_GET, ':firstname', '/^[A-Z][a-zA-Z -]+$/');
    validatePattern($errors, $_GET, ':surname', '/^[A-Z][a-zA-Z -]+$/');
    validatePattern($errors, $_GET, ':Player1', '/^[0-9a-zA-Z_]$/');
    validatePattern($errors, $_GET, ':Player2', '/^[0-9a-zA-Z_]$/');    
    validatePattern($errors, $_GET, ':Player3', '/^[0-9a-zA-Z_]$/');
    validatePattern($errors, $_GET, ':Player4', '/^[0-9a-zA-Z_]$/');    
    validatePattern($errors, $_GET, ':Player5', '/^[0-9a-zA-Z_]$/');    

    if (count($errors) >0){
echo "<font face='Verdana' size='2' color=red>$msg</font><br><input type='button' value='Retry' onClick='history.go(-1)'>";
}else{
if(("$stmt = $pdo->prepare('INSERT INTO members (firstname, surname, DD, MM, YYYY, email, Player1, Player2, Player3, Player4, Player5)
VALUES (:firstname, :surname, :DD, :MM, :YYYY, :email, :Player1, :Player2, :Player3, :Player4, :Player5)');
$stmt->bindParam(':firstname', $_GET['firstname']);
$stmt->bindParam(':surname', $_GET['surname']);
$stmt->bindParam(':DD', $_GET['DD']);
$stmt->bindParam(':MM', $_GET['MM']);
$stmt->bindParam(':YYYY', $_GET['YYYY']);
$stmt->bindParam(':email', $_GET['email']);
$stmt->bindParam(':Player1', $_GET['Player1']);
$stmt->bindParam(':Player2', $_GET['Player2']);
$stmt->bindParam(':Player3', $_GET['Player3']);
$stmt->bindParam(':Player4', $_GET['Player4']);
$stmt->bindParam(':Player5', $_GET['Player5']);
$stmt->execute();")){
echo "<font face='Verdana' size='2' color=green>Welcome, You have successfully signed up</font>";}
else{ echo "Database Problem, please contact Site admin";
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T03:41:33.383

用这个检查提交

```
if(isset($_POST['submit'])){ 
//get data and validation code comes here 
}else{
//your form comes here
} 
```

我希望这会奏效

# ruby-on-rails-3.1 - Heroku / Ruby-on-Rails 错误：图像未预编译

> ID：10792598
> 
> 赞同：8
> 
> 时间：2012-05-29T03:02:34.577
> 
> 标签：ruby-on-rails-3.1, heroku, asset-pipeline, precompile

我知道 Heroku 正在运行 rake assets:precompile 任务：

```
-----> Writing config/database.yml to read from DATABASE_URL
-----> Preparing app for Rails asset pipeline
       Running: rake assets:precompile
-----> Rails plugin injection
       Injecting rails_log_stdout
       Injecting rails3_serve_static_assets
-----> Discovering process types
       Procfile declares types      -> (none)
       Default types for Ruby/Rails -> console, rake, web, worker
-----> Compiled slug size is 17.7MB
-----> Launching... done 
```

我告诉它在 production.rb 中预编译图像

```
# from: http://stackoverflow.com/questions/8052865/rails-3-1-asset-pipeline-why-my-images-do-not-precompile-for-production
config.assets.precompile += %w[*.png *.jpg *.jpeg *.gif] 
```

那么为什么我仍然会收到这个 500 错误？

```
2012-05-29T02:57:15+00:00 app[web.1]: Started GET "/signin" for 46.114.68.16 at 2012-05-29 02:57:15 +0000
2012-05-29T02:57:15+00:00 app[web.1]: Processing by SessionsController#new as HTML
2012-05-29T02:57:15+00:00 app[web.1]:   Rendered sessions/new.html.erb within layouts/application (25.4ms)
2012-05-29T02:57:15+00:00 app[web.1]: Completed 500 Internal Server Error in 27ms
2012-05-29T02:57:15+00:00 app[web.1]: 
2012-05-29T02:57:15+00:00 app[web.1]: ActionView::Template::Error (twitter_64.png isn't precompiled):
2012-05-29T02:57:15+00:00 app[web.1]:     25: <div id="auths">
2012-05-29T02:57:15+00:00 app[web.1]:     27:   <a href="/auth/twitter" class="provider">
2012-05-29T02:57:15+00:00 app[web.1]:     26:   <h2>Or sign in through one of these:</h2>
2012-05-29T02:57:15+00:00 app[web.1]:     28:     <%= image_tag "twitter_64.png", :size => "64x64", :alt => "Twitter" %>Twitter</a> 
```

有趣的是，我在其他页面上的图像显示得很好。不知道为什么有些图像不起作用，但有些会...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-08T08:44:01.243

首先，请确保您也有此设置：

```
config.assets.initialize_on_precompile = false 
```

如果这不起作用，那么值得尝试在构建 slug 之前手动运行预编译任务；我认为这样做有细微的差别：

```
RAILS_ENV=production bundle exec rake assets:precompile 
```

最后，这不是一个解决方案，但如果一切都失败了，一个临时的解决方法是设置

```
config.assets.compile = true 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T08:34:56.217

确保将图像放入

```
app/assets/images 
```

而*不是*在

```
public/assets 
```

直接地。

*然后*运行`rake assets:precompile`，看看它是否有所改善。它可能会有点混乱。

# json - 带有 json 和 web2py 的 Fullcalendar 错误

> ID：10792600
> 
> 赞同：0
> 
> 时间：2012-05-29T03:02:51.817
> 
> 标签：json, fullcalendar, web2py

我在打电话：

```
events: {
    url: '/CondominioVip/evento/evento_json.json',
    error: function() {
        alert('there was an error while fetching events!');
    }
} 
```

我也尝试添加`type: 'POST` ，但它也没有工作。

我的控制器：

```
def evento_json():
    events= "[{'title':'event1','start':'2010-01-01'},{'title':'event3','start':'2010-01-09 12:30:00','allDay':False}]"
    return events 
```

来自浏览器的测试调用 ( `http://localhost:8000/CondominioVip/evento/evento_json.json`)：

> [{'title':'event1','start':'2010-01-01'},{'title':'event3','start':'2010-01-09 12:30:00',' allDay'：假}]

来自 web2py ajax 函数的请求：

> 接受：应用程序/json，文本/javascript，*/*；q=0.01
> Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
> Accept-Encoding:gzip,deflate,sdch
> Accept-Language:pt-BR,pt;q=0.8,en -US;q=0.6,en;q=0.4
> Cache-Control:max-age=0
> Connection:keep-alive
> Content-Length:31
> Content-Type:application/x-www-form-urlencoded
> Cookie:session_id_admin=127.0。 0.1-f9db7d99-4e7e-4bae-a229-d6614e9599f0；cvip_language=pt-BR；session_id_condominiovip=127.0.0.1-b820cbe3-9a55-40bb-8618-8d3f9a43f7c2
> 主机：`localhost:8000`
> 来源：`http://localhost:8000`
> Referer：`http://localhost:8000/CondominioVip/evento/index/2`
> User-Agent：Mozilla/5.0 (Windows NT 6.1) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.46 Safari/536.5
> X-Requested-With:XMLHttpRequest

响应标头：

> Cache-Control:no-store, no-cache, must-revalidate, post-check=0, pre-check=0
> Connection:keep-alive
> Content-Length:105
> Content-Type:application/json
> Date:Tue, May 29 2012 02:54:04 GMT
> 到期时间：2012 年 5 月 29 日星期二 02:54:03 GMT
> Pragma:no-cache
> Server:Rocket 1.2.4 Python/2.7.3
> Set-Cookie:cvip_language=pt-BR; 到期=格林威治标准时间 2012 年 5 月 30 日星期三 02:54:04；路径=/，session_id_condominiovip=127.0.0.1-b820cbe3-9a55-40bb-8618-8d3f9a43f7c2；路径=/
> X-Powered-By:web2py

回复：

> [{'title':'event1','start':'2010-01-01'},{'title':'event3','start':'2010-01-09 12:30:00',' allDay'：假}]

我别无选择。任何帮助将不胜感激。

更新：

我在 Chrome 上安装了 JsonView 扩展，因此返回字符串不被视为 json 响应。

我做了一些改变：

```
def evento_json():
    rows = db(evento.id>0).select(evento.id,evento.titulo,evento.data_hora_inicio,evento.data_hora_fim)
    events = []
    for row in rows:
        event = {'title': row['titulo'],
                 'start': row['data_hora_inicio'],
                 'end': row['data_hora_fim'],
                 'allDay': False,
                 'url': URL(c='evento', f='index', args=[row['id']], extension=False)}
        events.append(event)
    return events 
```

但是 web2py 会抛出一个错误。在将其发送到 generic.json 之前，我已经打印了“events”和“json(events)”，格式正是 fullcalendar 所期望的。

我发现停止错误的方法是：

在控制器中：

```
def evento_json():
    import datetime
    start = datetime.datetime.fromtimestamp(int(request.vars['start'])).strftime('%Y-%m-%d %H:%M:%S')
    end = datetime.datetime.fromtimestamp(int(request.vars['end'])).strftime('%Y-%m-%d %H:%M:%S')
    set = db((evento.id>0) &
             (evento.data_hora_inicio >= start) &
             (evento.data_hora_fim <= end))

    if (not auth.has_membership(auth.id_group(role='site_admin'), auth.user.id)) and \
       (not auth.has_membership(auth.id_group(role='cond_admin'), auth.user.id)):
        set = set(evento.flag_disp==True)

    rows = set.select(evento.id,
                      evento.titulo,
                      evento.data_hora_inicio,
                      evento.data_hora_fim,
                      evento.flag_disp)

    events = []
    for row in rows:
        event = {'title': row['titulo'],
                 'start': row['data_hora_inicio'],
                 'end': row['data_hora_fim'],
                 'allDay': False,
                 'url': URL(c='evento', f='index', args=[row['id']], extension=False),
                 'color': 'blue' if row['flag_disp'] is True else 'red'}
        events.append(event)

    if events:
        from gluon.serializers import json
        return XML(json(events))
    else:
        return '{}' 
```

并使用以下内容创建视图 evento/evento_json.json：

> {{=response._vars)}}

有用！但对我来说似乎是一个错误。我不确定我是否做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T04:49:50.043

也许尝试：

```
events= "[{'title':'event1','start':'2010-01-01'},{'title':'event3','start':'2010-01-09T12:30:00Z','allDay':false}]" 
```

[（根据API](http://arshaw.com/fullcalendar/docs/event_data/Event_Object/)将 event3 开始日期/时间更改为 ISO8601 格式，并将“False”更改为“false”。）

# perl - 从单个哈希构建哈希哈希

> ID：10792602
> 
> 赞同：-2
> 
> 时间：2012-05-29T03:03:29.220
> 
> 标签：perl

我有以下哈希

```
my  %input_hash = (
    'test1' => '100',
    'test2' => '200',
    'test3' => '300',
    'test4' => '400',
    'test5' => '500'
); 
```

我需要的是从上面的散列中构建散列的散列。我需要将上述键值对的前 2 个放入 hash 的 hash 的一个键中。用这个例子更好地解释。期望的输出：

```
my %expected_hash = (
1 => {
    'test1' => '100',
    'test2' => '200',

},
2 => {
    'test3' => '300',
    'test4' => '400',
},
3 => {
    'test5' => '500'
}, 
```

);

我希望分裂是动态的。例如，如果我需要除以 3，则所需的输出应该是

```
my %expected_hash = (
1 => {
    'test1' => '100',
    'test2' => '200',
    'test3' => '300',
},
2 => {
    'test4' => '400',
    'test5' => '500'
}, 
```

);

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T03:57:30.887

这是一个`splice`用于获取动态元素数量的版本。请注意，您必须对散列中的键进行排序，因为散列是无序的。

```
use strict;
use warnings;
use Data::Dumper;

my  %input_hash = (
    'test1' => '100',
    'test2' => '200',
    'test3' => '300',
    'test4' => '400',
    'test5' => '500',
    'test6' => '600',
    'test7' => '700',
    'test8' => '800',
    'test9' => '900'
);

my $foo = foo(\%input_hash, 4);
print Dumper $foo;

sub foo {
    my ($href, $count) = @_;
    my @keys = sort keys %$href;
    my %hash;
    my $i = 1;
    while (@keys) {
        $hash{$i++} = { map { $_ => $href->{$_} }
            splice @keys, 0, $count };
    }
    return \%hash;
} 
```

**输出：**

```
$VAR1 = {
      '1' => {
               'test1' => '100',
               'test4' => '400',
               'test3' => '300',
               'test2' => '200'
             },
      '3' => {
               'test9' => '900'
             },
      '2' => {
               'test8' => '800',
               'test5' => '500',
               'test7' => '700',
               'test6' => '600'
             }
    }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T06:39:53.243

这是一个使用索引数组的解决方案，该数组由 in 中的键数`%input_hash`和所需大小设置为`$chunk_size`：

```
#!/usr/bin/env perl
use strict;
use warnings;
use Data::Dumper;

my  %input_hash = (
    'test1' => '100',
    'test2' => '200',
    'test3' => '300',
    'test4' => '400',
    'test5' => '500'
);

my $chunk_size = 2;
my @indexes = map {int($_ / $chunk_size) + 1} 0 .. keys %input_hash;
my %expected_hash;

for my $key (sort keys %input_hash) {
    my $index = shift @indexes;
    $expected_hash{$index}{$key} = $input_hash{$key};
}

print Dumper \%expected_hash; 
```

输出：

```
$VAR1 = {
      '1' => {
               'test1' => '100',
               'test2' => '200'
             },
      '3' => {
               'test5' => '500'
             },
      '2' => {
               'test4' => '400',
               'test3' => '300'
             }
    }; 
```

当然，正如 TLP 所提到的，您必须进行排序`%input_hash`才能实现这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T04:21:13.433

```
#! /usr/bin/perl -w
use strict;

my ($expected_hash_key, $cnt, $L1, $L2) = (1, 1, "", "");
my %expected_hash;

# Change $LIMIT to required value. 2 or 3.
my $LIMIT = 2;

my  %input_hash = (
    'test1' => '100',
    'test2' => '200',
    'test3' => '300',
    'test4' => '400',
    'test5' => '500'
);

for (sort keys %input_hash) {
    $cnt++;
    $expected_hash{$expected_hash_key}{$_} = $input_hash{$_};
    if ($cnt == $LIMIT + 1) {
        $cnt = 1;
        $expected_hash_key++;
    }
}

for $L1 (sort keys %expected_hash) {
    print "$L1 ==> \n";
    for $L2 (sort keys %{ $expected_hash{$L1} }) {
        print "$L2 -> $expected_hash{$L1}{$L2}\n";
    }
    print "\n";
} 
```

# .net - .NET 中如何传递字符串？

> ID：10792603
> 
> 赞同：132
> 
> 时间：2012-05-29T03:03:51.983
> 
> 标签：.net, string, function, parameter-passing

当我将 a 传递`string`给函数时，是传递了指向字符串内容的指针，还是像 a`struct`那样将整个字符串传递给堆栈上的函数？

* * *

## 回答 #1

> 赞同：316
> 
> 时间：2012-05-29T03:45:09.450

一个引用被传递；但是，它在技术上不是*通过引用传递的。*这是一个微妙但非常重要的区别。考虑以下代码：

```
void DoSomething(string strLocal)
{
    strLocal = "local";
}
void Main()
{
    string strMain = "main";
    DoSomething(strMain);
    Console.WriteLine(strMain); // What gets printed?
} 
```

要了解这里发生的情况，您需要知道三件事：

1.  字符串是 C# 中的引用类型。
2.  它们也是不可变的，所以任何时候你做一些看起来你正在改变字符串的事情，你不是。一个全新的字符串被创建，引用指向它，旧的被丢弃。
3.  即使字符串是引用类型，`strMain`也不是通过引用传递的。它是一个**引用类型，**但引用本身是**按值传递的**。任何时候你传递一个没有`ref`关键字的参数（不计算`out`参数），你已经通过值传递了一些东西。

所以这一定意味着你正在......按值传递引用。由于它是引用类型，因此只有引用被复制到堆栈中。但是，这是什么意思？

### 按值传递引用类型：你已经在做

C# 变量是**引用类型**或**值类型**。C# 参数要么**通过引用**传递，要么通过**值传递**。术语在这里是个问题。这些听起来像是同一件事，但事实并非如此。

如果你传递了一个 ANY 类型的参数，并且你没有使用`ref`关键字，那么你已经通过值传递了它。如果您按值传递它，那么您真正传递的是一个副本。但是如果参数是引用类型，那么你复制的东西就是**引用，**而不是它指向的任何东西。

这是该`Main`方法的第一行：

```
string strMain = "main"; 
```

我们在这一行创建了两件事：一个字符串，其值`main`存储在内存中某处，以及一个称为`strMain`指向它的引用变量。

```
DoSomething(strMain); 
```

现在我们将该引用传递给`DoSomething`. 我们已经按值传递了它，这意味着我们制作了一个副本。它是一个引用类型，这意味着我们复制了引用，而不是字符串本身。现在我们有两个引用，每个引用都指向内存中的相同值。

### 被调用者内部

这是方法的顶部`DoSomething`：

```
void DoSomething(string strLocal) 
```

没有`ref`关键字，所以`strLocal`和`strMain`是两个不同的引用指向相同的值。如果我们重新分配`strLocal`...

```
strLocal = "local"; 
```

...我们没有更改存储值；我们采用了引用`strLocal`并将其瞄准了一个全新的字符串。`strMain`当我们这样做时会发生什么？[没有。它仍然指向旧字符串。](https://rextester.com/RATDMA19761)

```
string strMain = "main";    // Store a string, create a reference to it
DoSomething(strMain);       // Reference gets copied, copy gets re-pointed
Console.WriteLine(strMain); // The original string is still "main" 
```

### 不变性

让我们改变一下场景。想象一下，我们使用的不是字符串，而是一些可变的引用类型，比如您创建的类。

```
class MutableThing
{
    public int ChangeMe { get; set; }
} 
```

如果您*遵循*`objLocal`对它指向的对象的引用，则可以更改其属性：

```
void DoSomething(MutableThing objLocal)
{
     objLocal.ChangeMe = 0;
} 
```

内存中仍然只有一个`MutableThing`，并且复制的引用和原始引用仍然指向它。[自身的属性发生了`MutableThing`变化](https://rextester.com/SFJIK37902)：

```
void Main()
{
    var objMain = new MutableThing();
    objMain.ChangeMe = 5; 
    Console.WriteLine(objMain.ChangeMe); // it's 5 on objMain

    DoSomething(objMain);                // now it's 0 on objLocal
    Console.WriteLine(objMain.ChangeMe); // it's also 0 on objMain   
} 
```

啊，但是字符串是不可变的！没有`ChangeMe`要设置的属性。在 C# 中，你不能`strLocal[3] = 'H'`像使用 C 风格的`char`数组那样做；您必须改为构建一个全新的字符串。更改的唯一方法`strLocal`是将引用指向另一个字符串，这意味着您所做的任何事情都不会`strLocal`影响`strMain`. 值是不可变的，引用是副本。

### 通过引用传递引用

为了证明存在差异，[当您通过引用传递引用时会发生以下情况：](https://rextester.com/ZKPI92674)

```
void DoSomethingByReference(ref string strLocal)
{
    strLocal = "local";
}
void Main()
{
    string strMain = "main";
    DoSomethingByReference(ref strMain);
    Console.WriteLine(strMain);          // Prints "local"
} 
```

这一次，in 中的字符串`Main`确实发生了变化，因为您传递了引用而没有将其复制到堆栈上。

因此，即使字符串是引用类型，通过值传递它们也意味着被调用者中发生的任何事情都不会影响调用者中的字符串。但是由于它们*是*引用类型，因此当您想要传递它时，您不必将整个字符串复制到内存中。

### 更多资源：

*   这是我读过[的关于 C# 中引用类型和值类型之间区别](https://jonskeet.uk/csharp/parameters.html)的最佳文章，以及为什么引用类型与引用传递的参数不同。
*   像往常一样，Eric Lippert 也有[几篇关于这个主题的优秀博客文章](https://ericlippert.com/?s=reference+types+and+value+types)。
*   他[在不变性](https://web.archive.org/web/20161022141008/https://blogs.msdn.microsoft.com/ericlippert/tag/immutability/)方面也有一些很棒的东西。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-05-29T03:05:24.150

C# 中的字符串是不可变的引用对象。这意味着对它们的引用是（按值）传递的，一旦创建了字符串，就不能修改它。生成字符串修改版本（子字符串、修剪版本等）的方法会创建原始字符串的修改*副本*。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-05-29T03:06:55.173

字符串是特殊情况。每个实例都是不可变的。当您更改字符串的值时，您将在内存中分配一个新字符串。

所以只有引用被传递给你的函数，但是当字符串被编辑时，它变成了一个新实例并且不会修改旧实例。

# python - 在python中打印空白异常

> ID：10792605
> 
> 赞同：0
> 
> 时间：2012-05-29T03:04:38.760
> 
> 标签：python

我试图弄清楚如果我首先不知道异常是什么，我将如何打印异常。我将如何执行以下操作？

```
try:
    some_command
except:
    print *full_exception_trace* 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T03:06:51.437

[就像教程说的那样。](http://docs.python.org/tutorial/errors.html#handling-exceptions)

```
try:
  something()
except SomeException as e:
  something_else(e) 
```

你可能会觉得[`traceback`](http://docs.python.org/library/traceback.html)有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T03:08:52.720

```
def exception(self)
    try:
        Something.objects.all()
    except Exception, err:
        print err.message #(if you want)
        #raise err
        raise # The 'raise' statement with no arguments inside an error
              # handler tells Python to re-raise the exception with the 
              # original traceback intact 
```

err.message 会给你异常的原因

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T03:09:49.873

该`traceback`模块的`print_exc()`功能似乎是您想要的。[文档](http://docs.python.org/library/traceback.html)

# php - 动态表单和 PHP

> ID：10792606
> 
> 赞同：1
> 
> 时间：2012-05-29T03:04:46.397
> 
> 标签：php, jquery

我已经开始研究一个动态表单脚本，它允许用户通过 Jquery 添加表单元素，然后将其提交给 PHP 脚本。

我只是在对实现这一目标的方法进行一些反馈之后。目前我有以下内容：

当用户添加表单元素时，该元素将添加以下名称数组：

```
<textarea name="element[text][123]">
<input type="text" name="element[input][456]" /> 
```

因为我需要知道提交的表单元素的类型，所以我使用了一个名为“element[][]”的多维数组，其中数组的第一级是元素的类型，数组的第二个元素是唯一的 ID和价值。

当我 var_dump() 这在提交 PHP 输出后：

```
array
text => array
123 => string 'The textarea value'

input => array
456 => string 'The input field value' 
```

我现在在脚本的 PHP 端工作，只是想知道是否有更好的方法来做到这一点。

有什么想法吗？

更新

我必须改变我这样做的方式，因为数组键名不是唯一的。如果用户添加两个文本区域

```
<textarea name="element[text][123]">
<textarea name="element[text][456]"> 
```

当用户添加表单元素时，可以拖动元素，以便在创建元素后更改位置。这允许用户添加一个元素，然后将其移动到他们希望它出现的位置。

PHP 可以很好地处理此排序并按照提交表单的顺序接受数组，但是如上所述，如果键名相同，则顺序将被破坏。

在 PHP 方面我需要知道

1.  表单域的类型
2.  表单域的值
3.  表单字段的唯一 ID，它只是一个时间戳

我想我可能需要做 Cole 提到的事情，将名称分配为：

```
element[text_123] 
```

然后我可以分解“_”上的键名以确定类型和标识符。

更新

我拿了杰克发布的脚本并稍作修改

```
$vars = $_POST['element'];

foreach ($vars as $id => $vals)
    {
    // $vars[id] outputs the ID number
    // $vars[vals] is the array containing the type and value
    echo "This fields ID is $id. ";
    foreach($vals as $key => $value)
        {
        echo "Type was: $key and the value was: $value <br />";
        }
    } 
```

对此输出的快速测试

```
This fields ID is 1338261825063\. Type was: heading and the value was: xzczxczxczxczxczxc
This fields ID is 1338261822312\. Type was: heading and the value was: asdasdasdasdad 
```

由此我知道标识符和它所属的数组、类型和值，但我也知道数据提交的顺序。

从那里我可以将我的数据包装在标记中，执行任何其他操作，然后将数据插入数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T03:10:14.420

看起来不错；你也可以考虑这样的事情（虽然它引入了更多的领域，所以你必须真的认为这样的好处是值得的）：

```
<input type="hidden" name="element[123][type]" value="text" />
<input type="hidden" name="element[456][type]" value="input" />

<textarea name="element[123][value]">
<input type="text" name="element[456][value]" /> 
```

然后你可以这样做：

```
foreach ($_POST['element'] as $name => $info) {
    // $info['type'] is 'text' or 'input'
    // $info['value'] is the user input
} 
```

# jquery - 使用 jsOAuth 从 Twitter Oauth API 检索 access_token

> ID：10792607
> 
> 赞同：0
> 
> 时间：2012-05-29T03:04:51.443
> 
> 标签：jquery, twitter, cordova, twitter-oauth

我有一个 Phonegap 应用程序，它使用 ChildBrowser 授权我的应用程序使用 Oauth 与用户 Twitter 帐户连接。一旦用户登录他们的 Twitter 帐户并授权应用程序连接，Twitter 就会将 ChildBrowser 发送到回调 url，我从该 url 中检索 request_token。但随后我尝试调用 API 以将 request_token 交换为 access_token，并且应用程序不会继续超过该点。看起来应用程序在 API 调用期间中断以获取 access_token，但我不知道如何。

任何帮助将不胜感激！！！

非常感谢大家！

这是我的javascript：

```
/* -- Twitter START -- */

var Twitter = {
    init:function() {

        var oauth; 
        var requestParams; 
        var options = { 
            consumerKey: 'blahblah',
            consumerSecret: 'blahblah',
            callbackUrl: "http://beaconize.com/" 
        };
        alert(localStorage.twitterKey);
        var cb = ChildBrowser.install(); // install our ChildBrowser ( cb )    
        var twitterKey = "twttrKey"; // what we will store our twitter user information in

        // our storedAccessData and Raw Data
        var storedAccessData, rawData = localStorage.getItem(twitterKey);

        // First thing we need to do is check to see if we already have the user saved!
        if(localStorage.getItem(twitterKey) !== null){

            // If we already have them
            storedAccessData = JSON.parse(rawData); // Parse our JSON object
            options.accessTokenKey = storedAccessData.accessTokenKey; // This is saved when they first sign in
            options.accessTokenSecret = storedAccessData.accessTokenSecret; // this is saved when they first sign in

            oauth = OAuth(options);
            oauth.get('https://api.twitter.com/1/account/verify_credentials.json?skip_status=true',
                function(data) {
                    var entry = JSON.parse(data.text);
                    alert("USERNAME: " + entry.screen_name);
                }
            );
        } else {

            // We don't have a user saved yet
            oauth = OAuth(options);
            oauth.get('https://api.twitter.com/oauth/request_token',
                function(data) {
                    requestParams = data.text;
                    cb.showWebPage('https://api.twitter.com/oauth/authorize?'+data.text); // This opens the Twitter authorization / sign in page     
                    cb.onLocationChange = function(loc){ Twitter.success(loc); }; // When the ChildBrowser URL changes we need to track that
                },
                function(data) { 
                    alert("ERROR: "+data);
                }
            );
        }
    },

    /*
     When The ChildBrowser URL changes we will track it here.
     We will also determine if the request was a success or not here
     */
    success:function(loc) {
        // The supplied oauth_callback_url for this session is being loaded

        /*
         We will check to see if the childBrowser's new URL matches our callBackURL
         */
        if (loc.indexOf("http://beaconize.com/?") >= 0) {

            // Parse the returned URL
            var index, verifier = '';            
            var params = loc.substr(loc.indexOf('?') + 1);

            params = params.split('&');
            for (var i = 0; i < params.length; i++) {
                var y = params[i].split('=');
                if(y[0] === 'oauth_verifier') {
                    verifier = y[1];
                }
            }

            // After the next line, nothing executes. It stops in ChildBrowser on my callback_url.

            oauth.get('https://api.twitter.com/oauth/access_token?oauth_verifier='+verifier+'&'+requestParams,
                      function(data) {               
                        var accessParams = {};
                        var qvars_tmp = data.text.split('&');
                        for (var i = 0; i < qvars_tmp.length; i++) {
                            var y = qvars_tmp[i].split('=');
                            accessParams[y[0]] = decodeURIComponent(y[1]);
                        }

                        oauth.setAccessToken([accessParams.oauth_token, accessParams.oauth_token_secret]);

                        // Save access token/key in localStorage
                        var accessData = {};
                        accessData.accessTokenKey = accessParams.oauth_token;
                        accessData.accessTokenSecret = accessParams.oauth_token_secret;

                        // SETTING OUR LOCAL STORAGE
                        alert("TWITTER: Storing token key/secret in localStorage3");
                        localStorage.setItem(twitterKey, JSON.stringify(accessData));
                      },
                      function(data) { 
                      console.log(data);

                      }
            );
                      oauth.get('https://api.twitter.com/1/account/verify_credentials.json?skip_status=true',
                                function(data) {
                                var entry = JSON.parse(data.text);
                                alert("TWITTER USER: "+entry.screen_name);

                                // FOR EXAMPLE ONLY
                                //app.init();
                                },
                                function(data) {
                                alert("ERROR: " + data); 
                                }
                                );

                      // Since everything went well we can close our childBrowser!                             
                      window.plugins.childBrowser.close();

        } else {
            // do nothing   
        }
    },
    tweet:function() {
        var storedAccessData, rawData = localStorage.getItem(twitterKey);

        storedAccessData = JSON.parse(rawData); // Parse our JSON object
        options.accessTokenKey = storedAccessData.accessTokenKey; // This is saved when they first sign in
        options.accessTokenSecret = storedAccessData.accessTokenSecret; // this is saved when they first sign in

        // jsOAuth takes care of everything for us we just need to provide the options
        oauth = OAuth(options);
        oauth.get('https://api.twitter.com/1/account/verify_credentials.json?skip_status=true',
            function(data) {
                var entry = JSON.parse(data.text);
                Twitter.post();
            }
        );
    },
    /*
     Now that we have the information we can Tweet!
     */
    post:function() {
        var theTweet = $("#tweet").val(); // Change this out for what ever you want!

        oauth.post('https://api.twitter.com/1/statuses/update.json',
            { 'status' : theTweet,  // jsOAuth encodes for us
            'trim_user' : 'true' },
            function(data) {
                var entry = JSON.parse(data.text);
                alert(entry);

                // FOR THE EXAMPLE
                app.done();
            },
            function(data) { 
                alert(data);
            }
        );      
    }
};

/* -- Twitter END -- */ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T13:25:57.273

好的，所以我将您的代码与您引用的原始项目进行了比较。这就是我成功的地方。

看起来你错过了导致这种破坏的几件事。

这是原始代码-这应该可以

```
oauth.get('https://api.twitter.com/oauth/access_token?oauth_verifier='+verifier+'&'+requestParams,
                      function(data) {               
                        var accessParams = {};
                        var qvars_tmp = data.text.split('&');
                        for (var i = 0; i < qvars_tmp.length; i++) {
                            var y = qvars_tmp[i].split('=');
                            accessParams[y[0]] = decodeURIComponent(y[1]);
                        }

                        oauth.setAccessToken([accessParams.oauth_token, accessParams.oauth_token_secret]);

                        // Save access token/key in localStorage
                        var accessData = {};
                        accessData.accessTokenKey = accessParams.oauth_token;
                        accessData.accessTokenSecret = accessParams.oauth_token_secret;

                        // SETTING OUR LOCAL STORAGE
                        alert("TWITTER: Storing token key/secret in localStorage3");
                        localStorage.setItem(twitterKey, JSON.stringify(accessData));
                      },
                      function(data) { 
                      console.log(data);

                      }
            );
                      oauth.get('https://api.twitter.com/1/account/verify_credentials.json?skip_status=true',
                                function(data) {
                                var entry = JSON.parse(data.text);
                                alert("TWITTER USER: "+entry.screen_name);

                                // FOR EXAMPLE ONLY
                                //app.init();
                                },
                                function(data) {
                                alert("ERROR: " + data); 
                                }
                                );

                      // Since everything went well we can close our childBrowser!                             
                      window.plugins.childBrowser.close();

        } else {
            // do nothing   
        }
    }, 
```

需要注意的一件事，这是您的代码不同的地方是第一个 oauth 请求的错误函数 - 您的代码似乎缺少这个，这并不是什么大问题 - 但是您已经删除了格式，所以这两个函数现在一个导致问题的。

如果您复制此代码并选择并粘贴到您的代码上并切换它们，您将看到导致问题的细微差别！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T08:24:25.543

到目前为止，查看您的代码，一切看起来都很合理。

我注意到您正在手动执行一些 auth-dance 工作。您是否尝试过使用 fetchRequestToken() 和 fetchAccessToken() 方法？我编写了[样板代码来演示这一点](https://gist.github.com/1071227#file_pin_auth.html)。

你能给出错误信息的输出吗？通常它会为 Twitter 未授权您的原因提供线索。

您可能会发现这个有用的[API 参考](http://bytespider.github.com/jsOAuth/api-reference/)还有一个未记录的方法来解析 url 字符串 parseTokenRequest()

# c# - 这在linq中很棘手吗？正则表达式与 Linq 组合

> ID：10792610
> 
> 赞同：0
> 
> 时间：2012-05-29T03:05:03.143
> 
> 标签：c#, linq

我有一个带有属性字符串的模型，其格式可以是“00000044”，所以假设我正在查询一个列表

```
public class Foo
{
     private string MemberNo { get; set; }
} 
```

从实体框架填充，

我们的套装包括以下内容：

```
"00000044" include this
"44000000" include this
"20440000" exclude this 
```

如何编写一个查询，以排除我们搜索条件“44”左侧非零数字的任何内容

是否可以将 Regex 与 linq 结合使用，还是有更聪明的方法？

塔

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T03:15:30.393

```
var filteredFoos = myFoos
    .Where(foo => foo.MemberNo.TrimStart('0').StartsWith("44")); 
```

现在这是如果您想带回 all `Foos`，但如果您想使用实体框架，请查看[此](https://stackoverflow.com/questions/7936718/user-trimstart-in-entity-framework-query)答案以正确翻译它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T03:13:31.917

```
var result = fooList.Where(foo => Regex.IsMatch(foo.MemberNo, @"^0*44\d*$")); 
```

您还需要公开 MemberNo 属性。

**编辑**

或者，一个无正则表达式的版本：

```
var result = fooList.Where(foo => foo.MemberNo.TrimStart('0').StartsWith("44")); 
```

# python - Python nltk.download（）'TCLError'无法下载语料库Fedora 16

> ID：10792611
> 
> 赞同：3
> 
> 时间：2012-05-29T03:05:09.213
> 
> 标签：python, tcl, fedora, nltk

我有一个全新安装的 Fedora 16 系统。我已经安装了 nltk 并开始下载语料库。正如下面的消息所示，我遇到了某种与 TclError 相关的问题。我环顾四周，似乎找不到其他有这个问题的人。

```
>>> import nltk
>>> nltk.download()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.7/site-packages/nltk-2.0.1-py2.7.egg/nltk/downloader.py", line 643, in download
    self._interactive_download()
  File "/usr/lib/python2.7/site-packages/nltk-2.0.1-py2.7.egg/nltk/downloader.py", line 956, in _interactive_download
    except TclError:
NameError: global name 'TclError' is not defined 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T08:22:54.343

`TclError`是由 Tkinter 模块 IIRC 定义的 Python 异常；Tcl 本身不会生成它（实际上，从 Tcl 的角度来看，它实际上是没有意义的）。您是否尝试过导入 Tkinter？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T14:28:53.560

我似乎已经解决了我遇到的问题。我有两个相同的系统设置，但在安装 NLTK 时采用了两种略有不同的方法，一种产生了我最初发布的错误，另一种没有。我还没弄清楚为什么。当我设置非工作系统时，我：

```
1.) yum install nltk*
2.) easy_install pyyaml
3.) python
4.) >>> import nltk
5.) >>> nltk.download()
6.) got the error 
```

基于一些尝试，我确定 Fedora 16 yum repo 2.0.1 版本中提供的 NLTK 版本没有编译 libyaml 支持，并且与 pip 提供的 pyyaml 版本不兼容。

我重新开始并删除了所有内容并遵循以下过程：

```
1.) yum install libyaml libyaml-devel
2.) easy_install pyyaml
3.) easy_install nltk
4.) python
5.) import nltk
6.) nltk.download()
7.) download corpus' 
```

我已经向 Fedora 提交了一个错误报告，让他们知道 repos 中提供的 NLTK 版本存在问题。

# php - 将值与 MySQL 检索的值一起作为 JavaScript 中的隐藏值传递给 AJAX 函数

> ID：10792615
> 
> 赞同：0
> 
> 时间：2012-05-29T03:05:44.957
> 
> 标签：php, javascript, mysql, html, jquery

我对 php，ajax 形式有疑问..让我解释一下预期的场景......

1.  我已经使用产品 ID 更新了购物车中产品的数量是关键。

2.  我正在使用下拉列表，onchange 它调用 ajax 函数并传递值（即，作为 this.value 的数量）以及从 mysql DB 检索到的产品 ID。

3.  在javascript函数中，它通过ajax传递两个值，在php中，它获取值并更新相应products_id的数量。

4.  成功后，它必须在表单上返回更新后的值，**而无需重新加载整个页面或表单**...

我在这个问题上堆了一个星期，我无法得到答案..请帮助我..

让你知道我是如何调用 javascript 函数的，

```
<select name="update" onchange="updatequantity(this.value,<?php echo $row['products_id']; ?>)" > 
```

但是这个调用函数不能将值发送到 ajax...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T03:35:01.740

这是使用道场。

在 head 标签中添加以下内容

```
<script src="http://ajax.googleapis.com/ajax/libs/dojo/1.7.2/dojo/dojo.js"></script>
<script type="text/javascript">
function updatequantity(input, id)
    dojo.xhrPost({
            url: "updatequantity.php",
            content: {
                  id: id,
                  quantity: input.value
            },
            load: function(result) {
                  result //this variable will hold the quantity
            }
    });
</script> 
```

在服务器上：updatequantity.php

```
<?php
$id = $_POST['id'];
$quantity = $_POST['quantity'];
//some sql query like "update cart_items set quantity=".$quantity." where id=".$id.";"
echo $quantity; 
```

这个解决方案非常复杂，并且很受许多攻击，例如 sql 注入和精明的 javascripters。

# opencv - 在opencv中简单但不是基本的背景减法？

> ID：10792616
> 
> 赞同：4
> 
> 时间：2012-05-29T03:05:58.863
> 
> 标签：opencv, average, background-subtraction

[我几乎必须用 OpenCV 进行高效背景减法](https://stackoverflow.com/questions/2026752/efficient-background-subtraction-with-opencv)中所说的（背景减法，前景有颜色，除了相机而不是视频文件）。问题是在那个主题中没有关于背景减法阶段本身的解释。

我查看了官方的 openCV 书和互联网，简单的**帧差异**不足以满足我的需要。我试图理解更复杂的**平均背景方法，但在帧的****cvAcc**获得平均值后我迷路了：/

如果有人可以帮助我一点，我将不胜感激..

谢谢！

**使用我现在拥有的代码进行**编辑：****

 ****和**

```
cvCvtScale( currentFrame, currentFloat, 1, 0 ); 
if(totalFrames == 0) 
 cvCopy(currentFloat, sum); 
else 
 cvAcc(currentFloat, sum); 
```

**平均**

```
cvConvertScale( sum, imgBG, (double)(1.0/totalFrames) ); 
```

**适应背景**（#define 中的 alpha 为 0.05）

```
cvRunningAvg(currentFrame, imgBG, alpha); 
```

**仅使用前景创建最终图像**（远非完美！）

```
void createForeground(IplImage* imgDif,IplImage * currentFrame)
{
cvCvtColor(imgDif, grayFinal, CV_RGB2GRAY);
cvSmooth(grayFinal, grayFinal);
cvThreshold(grayFinal, grayFinal, 40, 255, CV_THRESH_BINARY);

unsigned char *greyData= reinterpret_cast<unsigned char *>(grayFinal->imageData);
unsigned char *currentData= reinterpret_cast<unsigned char *>(currentFrame->imageData);
unsigned char *fgData= reinterpret_cast<unsigned char *>(currentFrame->imageData);

int i=0;
for(int j=0 ; j<(grayFinal->width*grayFinal->height) ; j++)
{
        if(greyData[j]==0) 
        {
            fgData[i]=0;
            fgData[i+1]=0;
            fgData[i+2]=0;
            i=i+3;
        }
        else 
        {
            fgData[i]= currentData[i];
            fgData[i+1]= currentData[i+1];
            fgData[i+2]= currentData[i+2];
            i=i+3;
        }
}
cvSetData( imgFG , fgData , imgFG->width*imgFG->nChannels);
} 
```

**现在有问题！**

现在最大的问题是，当我在图片的某个地方有一个灯泡时，当我将手“放在”它上面几秒钟后，当我把它拿走时，灯光会在前景中停留很长时间。 . 对此有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T05:43:58.123

简单的背景减法（前景提取）方法。

1.假设您的视频具有静态背景（即背景的微小变化几乎恒定的背景），然后考虑`N`一些帧并对其进行平均。然后您可以获得背景图像，即`Img_BG`。

```
 Img_BG = (1/N)*sum(framesFrom1 to N); 
```

2.如果您的视频有任何光照变化，那么您的背景图像会更新如下，称为running avg。

```
 Img_ApdatedBG =(1- alpha)*Img_BG+(alpha)*CurrentFrame;
    Img_BG =  Img_ApdatedBG; 
```

alpha 是赋予当前帧的权重，通常在 0.05 到 0.1 左右。与 1 方法相比，此方法使用更少的内存。

3.您可以计算背景图像作为计算`median of N frames.`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T07:16:54.583

您可以尝试使用**Mixture of Gaussians来**[实现](http://mmlab.disi.unitn.it/wiki/index.php/Mixture_of_Gaussians_using_OpenCV)背景减法。wiki 解释了每个步骤中使用的 OpenCV 函数。

 **这是一种强大的背景减法方法，可以处理光线变化和场景中进出的物体。

我希望这有帮助。****

# c - 在 C 中加载 8bpp 灰度 BMP

> ID：10792618
> 
> 赞同：5
> 
> 时间：2012-05-29T03:06:15.630
> 
> 标签：c, windows, image, bmp

我无法理解 BMP 格式，我知道它应该很简单，但不知何故我错过了一些东西。我认为它是 2 个标头，后跟定义图像的实际字节，但数字不相加。

例如，我只是试图将此 BMP 文件加载到内存中（640x480 8bpp 灰度），然后将其写回另一个文件。据我了解，有两个不同的标题 BITMAPFILEHEADER 和 BITMAPINFOHEADER。BITMAPFILEHEADER 是 14 字节，而 BITMAPINFOHEADER 是 40 字节（这取决于 BMP，我怎么能说这是另一个故事）。无论如何，BITMAPFILEHEADER 通过其参数 bfOffBits 表示位图位从偏移量 1078 开始。这意味着还有 1024 ( 1078 - (40+14) ) 个其他字节，携带更多信息。这些字节是什么，我如何读取它们，这就是问题所在。还是有更正确的方法来加载 BMP 并将其写入磁盘？

这里的参考是我使用的代码（我在 Windows 下做所有这些。）

```
#include <windows.h>
#include <iostream>
#include <stdio.h>

HANDLE hfile;
DWORD written;

BITMAPFILEHEADER bfh;
BITMAPINFOHEADER bih;

int main()
    hfile = CreateFile("image.bmp",GENERIC_READ,FILE_SHARE_READ,NULL,OPEN_EXISTING,FILE_ATTRIBUTE_NORMAL,NULL);
ReadFile(hfile,&bfh,sizeof(bfh),&written,NULL);

ReadFile(hfile,&bih,sizeof(bih),&written,NULL);

int imagesize = bih.biWidth * bih.biHeight;

image = (unsigned char*) malloc(imagesize);

ReadFile(hfile,image,imagesize*sizeof(char),&written,NULL);

CloseHandle(hfile); 
```

然后我正在做完全相反的事情来写入文件，

```
hfile = CreateFile("imageout.bmp",GENERIC_WRITE,FILE_SHARE_WRITE,NULL,CREATE_ALWAYS,FILE_ATTRIBUTE_NORMAL,NULL);

WriteFile(hfile,&bfh,sizeof(bfh),&written,NULL);
WriteFile(hfile,&bih,sizeof(bih),&written,NULL);
WriteFile(hfile,image,imagesize*sizeof(char),&written,NULL);

CloseHandle(hfile); 
```

***编辑---已解决***

好的，所以我终于做对了，毕竟它并不复杂。正如 Viktor 所指出的，这 1024 个字节代表了调色板。

我在我的代码中添加了以下内容：

```
RGBQUAD palette[256];
// [...] previous declarations [...] int main() [...] then read two headers
ReadFile(hfile,palette,sizeof(palette),&written,NULL); 
```

然后当我回信时，我添加了以下内容，

```
WriteFile(hfile,palette,sizeof(palette),&written,NULL); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T08:30:57.533

“那些字节是什么，我如何读取它们，这就是问题所在。”

正如 Retired Ninja 在评论中提到的那样，这些字节是 Palette（或 .BMP 格式术语中的 ColorTable）。基本上，它是一个表，它指定位图数据中遇到的每个 8bpp 值使用什么颜色。

对于灰度，调色板是微不足道的（我不是在谈论颜色模型和 RGB -> 灰度转换）：

```
for(int i = 0 ; i < 256 ; i++)
{
    Palette[i].R = i;
    Palette[i].G = i;
    Palette[i].B = i;
} 
```

但是，ColorTable 的条目中有一些填充，因此它需要 4 * 256 字节，而不是您需要的 256 * 3。ColorTable 条目中的第四个组件（RGBQUAD 结构）不是“alpha 通道”，它只是“保留”的东西。请参阅 RGBQUAD 上的 MSDN ( [MSDN, RGBQUAD](http://msdn.microsoft.com/en-us/library/dd162938%28v=vs.85%29.aspx) )。

详细的格式说明可以在维基百科页面上找到：[Wiki, bmp format](http://en.wikipedia.org/wiki/BMP_file_format)

在 SO with RGBQUAD structure 上还有这个链接问题：[Writing BMP image in pure c/c++ without other libraries](https://stackoverflow.com/questions/2654480/writing-bmp-image-in-pure-c-c-without-other-libraries)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T10:58:08.677

正如维克托在他的回答中所说，这些位就是托盘。至于你应该如何阅读它们，看看这个[仅标题的位图类](http://www.kalytta.com/bitmap.h)。特别是查看`ColorTable`有关它如何处理托盘位的参考资料，具体取决于给出的 BMP 类型。

# jquery - 克隆链接的 JQuery 不稳定行为

> ID：10792623
> 
> 赞同：0
> 
> 时间：2012-05-29T03:06:50.530
> 
> 标签：jquery, clone, hyperlink

我的页面顶部显示了指向数据页面的链接。我也将其克隆到页面底部。问题在于试图删除`href`活动页面的属性。这适用于链接的顶行，但不适用于底部。

```
<div class="pages"></div>

<div id="workspace"><br/></div>

<div id="pagesclone"></div> 
```

jQuery：

```
//Generate page number links
for (x = 1; x < 6; x++) {
    $('.pages').append(' <a href="#" class="links">' + x + '</a> ');    
}

page = 1;

//Function for link clicks
$('.links').click(function() {
    //"You clicked .."
   current = $(this).html();
   $('#workspace').html('You clicked ' + current);

    //shifting the active page    
   $('.links').slice(page - 1, page).attr('href', '#'); //activate preceeding link
   page = $(this).html(); //reset page number to the link clicked
   $('.links').slice(page - 1, page).removeAttr('href'); //remove href attribute
});

//Clone the top row of links to the bottom
$('.pages').clone(true, true).appendTo('#pagesclone'); 
```

一切对我来说都是正确的。如何使下部页面上的克隆链接在`href`单击时也具有删除属性，反之亦然？

jsfiddle：http: [//jsfiddle.net/JshnC/10/](http://jsfiddle.net/JshnC/10/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T03:11:32.873

主要问题是您的`page`索引仅指向第一行的元素。如果添加 $(".links") 长度的一半，您将获得第二行元素的索引，并且可以使其工作。

[在http://jsfiddle.net/dLKfA/](http://jsfiddle.net/dLKfA/)有一个采用这种方法的工作（但丑陋）版本

[如果您引入更多类](http://jsfiddle.net/BG8WF/)，您可以使您的代码更好：

生成时：

```
$('.pages').append(' <a href="#" class="links link-' + x + '">' + x + '</a> '); 
```

然后在更新时：

```
$('.links.link-' + page).attr('href', '#'); //activate preceeding link
page = $(this).html(); //set page number to the link clicked
$('.links.link-' + page).removeAttr('href'); //remove href attribute 
```

而且，@elclanrs 对全局变量的评价。他们很可能会在某个时候咬你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T03:35:15.523

这可能不是最有效的，但这[是一种方法](http://jsfiddle.net/JshnC/12/)：

```
var link = [1, 2, 3, 4, 5];

$.each(link, function(a) {
    $(".pages").append("<a href='#' class='a" + a + "'>" + link[a] + "</a>");
});

$("a").click(function() {
    $("." + $(this).attr('class')).removeAttr("href");
});​ 
```

# android - 按下主页时在状态栏通知栏播放的活动

> ID：10792627
> 
> 赞同：1
> 
> 时间：2012-05-29T03:07:21.053
> 
> 标签：android

我正在从我的网站获取链接的 WebView 中的音乐播放程序。

当用户按下主页按钮时，我希望我的 WebView 活动与状态栏通知保持一致。请帮助给我一些方法。

# 我在 WebView 中的代码：

```
public class playlist extends Activity {
private WebView mWebView;
MediaPlayer myMediaPlayer;
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.playlist);

    mWebView = new WebView(this);

    mWebView = (WebView) findViewById(R.id.playlist);
    mWebView.setWebViewClient(new myWebClient());
    mWebView.getSettings().setJavaScriptEnabled(true);
    mWebView.getSettings().setAllowFileAccess(true);
    mWebView.getSettings().setPluginsEnabled(true);
    mWebView.getSettings().setBuiltInZoomControls(true);
    mWebView.loadUrl("http://www.mp3skull.com/justin_bieber.html");
}

public class myWebClient extends WebViewClient  
{  
    @Override  
    public void onPageStarted(WebView view, String url, Bitmap favicon) {  
        // TODO Auto-generated method stub  
        super.onPageStarted(view, url, favicon);  
    }  
    @Override  
    public boolean shouldOverrideUrlLoading(WebView view, String url) {  
        // TODO Auto-generated method stub  
        view.loadUrl(url);  
        return true;
    }  
}
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if ((keyCode == KeyEvent.KEYCODE_BACK) && mWebView.canGoBack()) {
        mWebView.goBack();
        return true;
    }
    return super.onKeyDown(keyCode, event);
}
@Override
public void onPause() {
    mWebView.setVisibility(View.GONE);
    mWebView.destroy();
    super.onPause();
}
} 
```

当用户按下主页按钮时，此代码音乐也会因为 Vide onPause() 而停止，但我需要在状态栏通知上以正确的活动继续播放音乐。请帮我。

问候， 维拉克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T03:53:53.103

当用户按下 Home 键时，您可以使用[onUserLeaveHint ()](http://developer.android.com/reference/android/app/Activity.html)方法播放声音，如文档所述：

> 当活动由于用户选择而即将进入后台时，作为活动生命周期的一部分调用。例如，当用户按下 Home 键时，会调用 onUserLeaveHint()，但是当有来电导致通话中的 Activity 自动被带到前台时，被中断的 Activity 不会调用 onUserLeaveHint() . 如果调用它，则在活动的 onPause() 回调之前调用此方法。

要在 Home 键上播放声音，请使用[IntentService](http://developer.android.com/reference/android/app/IntentService.html)。*在您的 Activity 的onUserLeaveHint()*中启动它， 并且此服务在作业完成时自动停止。如：

```
public class MyService extends IntentService {

public MyService(String name) {
    super(name);
    // TODO Auto-generated constructor stub
}
public MyService () {
  super("MyService");
}

@Override
public IBinder onBind(Intent arg0) {
    // TODO Auto-generated method stub
    return null;
}
@Override
protected void onHandleIntent(Intent arg0) {
    // TODO Auto-generated method stub
         // PLAY SOUND HERE
    }
} 
```

# sql-server - SQL-Server：关键字“with”附近的语法不正确。如果此语句是公用表表达式

> ID：10792631
> 
> 赞同：12
> 
> 时间：2012-05-29T03:08:58.263
> 
> 标签：sql-server, sql-server-2008, sql-server-2005

```
create table #temp
(
  pName Varchar(20),
  DateBegin DateTime,
  DateEnd DateTime
)

Insert Into #temp(pName, DateBegin, DateEnd)
Values('Player1', '01/04/2012', '01/05/2012')

Insert Into #temp(pName, DateBegin, DateEnd)
Values('Player2', '02/01/2012', '02/05/2012')

With DateRange(dt) As
(
    Select Convert(Datetime, '01/01/2012')
    UNion All
    Select DateAdd(dd, 1, Dat.dt) From DateRange Dat Where Dat.dt < CONVERT(Datetime, '01/31/2012')
)

Select T.pName, Dt.dt from #temp T
Inner Join DateRange Dt on Dt.dt BETWEEN T.DateBegin and T.DateEnd

Drop Table #temp 
```

* * *

问题在于以下代码行

```
With DateRange(dt) As 
```

它显示以下错误消息

> 关键字“with”附近的语法不正确。如果此语句是公用表表达式、xmlnamespaces 子句或更改跟踪上下文子句，则前面的语句必须以分号结束。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-29T03:16:05.663

添加一些分号：

```
create table #temp
(
  pName Varchar(20),
  DateBegin DateTime,
  DateEnd DateTime
)

Insert Into #temp(pName, DateBegin, DateEnd)
Values('Player1', '01/04/2012', '01/05/2012')

Insert Into #temp(pName, DateBegin, DateEnd)
Values('Player2', '02/01/2012', '02/05/2012');

With DateRange(dt) As
(
    Select Convert(Datetime, '01/01/2012')
    UNion All
    Select DateAdd(dd, 1, Dat.dt) From DateRange Dat Where Dat.dt < CONVERT(Datetime, '01/31/2012')
)

Select T.pName, Dt.dt from #temp T
Inner Join DateRange Dt on Dt.dt BETWEEN T.DateBegin and T.DateEnd;

Drop Table #temp 
```

[http://sqlfiddle.com/#!6/06e89](http://sqlfiddle.com/#!6/06e89)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-05-21T10:46:19.437

我在 SQL Server 2017 中遇到了同样的问题。在 WITH 语句之前使用分号，如下所示。

```
;WITH 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-25T19:04:15.920

试试这个语法：

```
CREATE TABLE [dbo].[CIQTempJointMembersLink](   
    [JointMembersID] [int] NULL,
    [fk_CIQPerson_PersonID] [int] NULL)

GO

WITH Summary AS (
    SELECT p.[JointMembersID], 
           p.[fk_CIQPerson_PersonID],            
           p.[JointMembersLinkID],
           ROW_NUMBER() OVER(PARTITION BY [fk_CIQPerson_PersonID] 
                                 ORDER BY [fk_CIQPerson_PersonID] DESC) AS rownumber
      FROM [CIQRegos].[dbo].[CIQJointMembersLink] p)

INSERT INTO [CIQTempJointMembersLink]([JointMembersID], [fk_CIQPerson_PersonID])

SELECT JointMembersLink.[JointMembersID], JointMembersLink.[fk_CIQPerson_PersonID]
FROM Summary JointMembersLink
WHERE JointMembersLink.rownumber = 1 and JointMembersLink.[fk_CIQPerson_PersonID] is NOT NULL
Order by JointMembersLink.JointMembersLinkID;

Drop Table [dbo].[CIQTempJointMembersLink] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-26T22:17:15.827

我在使用 MS SQL Server 2012 时遇到了这个问题。

我试图使用下面的脚本恢复数据库

```
USE master;
GO

ALTER DATABASE com.mydb.dev SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
GO

RESTORE DATABASE com.mydb.dev
    FROM DISK = 'C:\Program Files\Microsoft SQL Server\MSSQL12.MSSQLSERVER\MSSQL\Backup\com.mydb.dev_21-08-2020.bak'
    WITH REPLACE,
         STATS = 10,
         RESTART,
    MOVE 'com.mydb.dev' TO 'C:\Program Files\Microsoft SQL Server\MSSQL12.MSSQLSERVER\MSSQL\DATA\com.mydb.dev.mdf',
    MOVE 'com.mydb.dev_log' TO 'C:\Program Files\Microsoft SQL Server\MSSQL12.MSSQLSERVER\MSSQL\DATA\com.mydb.dev_log.ldf'
GO

ALTER DATABASE com.mydb.dev SET MULTI_USER;
GO 
```

然后当我尝试执行还原任务时，这引发了以下错误：

```
Msg 102, Level 15, State 1, Line 6
Incorrect syntax near '.'.
Msg 319, Level 15, State 1, Line 6
Incorrect syntax near the keyword 'with'. If this statement is a common table expression, an xmlnamespaces clause or a change tracking context clause, the previous statement must be terminated with a semicolon.
Msg 102, Level 15, State 1, Line 6
Incorrect syntax near 'IMMEDIATE'.
Msg 102, Level 15, State 1, Line 9
Incorrect syntax near '.'.
Msg 319, Level 15, State 1, Line 11
Incorrect syntax near the keyword 'with'. If this statement is a common table expression, an xmlnamespaces clause or a change tracking context clause, the previous statement must be terminated with a semicolon.
Msg 102, Level 15, State 1, Line 17
Incorrect syntax near '.'. 
```

**这是我修复它的方法**：

问题是数据库名称包含一些特殊字符，例如 ' **。**' 特点。

我所要做的就是在数据库名称周围添加**方括号“[]” ，如下所示：**

```
USE master;
GO

ALTER DATABASE [com.mydb.dev] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
GO

RESTORE DATABASE [com.mydb.dev]
    FROM DISK = 'C:\Program Files\Microsoft SQL Server\MSSQL12.MSSQLSERVER\MSSQL\Backup\com.mydb.dev_21-08-2020.bak'
    WITH REPLACE,
         STATS = 10,
         RESTART,
    MOVE 'com.my_db.dev' TO 'C:\Program Files\Microsoft SQL Server\MSSQL12.MSSQLSERVER\MSSQL\DATA\com.mydb.dev.mdf',
    MOVE 'com.mydb.dev_log' TO 'C:\Program Files\Microsoft SQL Server\MSSQL12.MSSQLSERVER\MSSQL\DATA\com.mydb.dev_log.ldf'
GO

ALTER DATABASE [com.mydb.dev] SET MULTI_USER;
GO 
```

而这一次，数据库恢复任务运行成功。

就这样。

**我希望这有帮助**

# php - 教义中的错误还是我做错了什么？

> ID：10792634
> 
> 赞同：1
> 
> 时间：2012-05-29T03:09:19.940
> 
> 标签：php, doctrine-orm

我有以下代码来更新数据库中的对象。

```
public function update($url, $projectId) {
    $conn = ConnectionPool::getConnection();

    $project = $conn->getReference('Project', $projectId);
    $url->setProject($project);

    //only works with this workaround
    //this do nothing, only call a random method in the referenced object
    $project->getName(); #workaround

    $conn->merge($url);
    $conn->flush();
} 
```

如果我删除该`#workaround`行，则该元素不会更新，但有了它，更新可以正常工作。这是一个错误还是我的代码有问题？

# actionscript-3 - AS3 警告消息多余字节

> ID：10792636
> 
> 赞同：2
> 
> 时间：2012-05-29T03:09:37.287
> 
> 标签：actionscript-3, warnings

当我发布我的 Flash 文件时，我收到以下消息：

> `WARNING: excess bytes: -616, Tag: DefineFont3, Index: 5`
> `WARNING: excess bytes: 2, Tag: DefineFont3, Index: 36`

这些警告是什么？有什么与这些警告有关的吗？

昨天还不错，但今天我明白了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T22:03:24.277

也许您的某个库正在使用 SWFTimeline。它的源代码包含相同的警告。

以下代码片段来自 SWFTimeline.as 文件，从第 84 行开始。

```
 // Adjust position (just in case the parser under- or overflows)
   if(data.position != pos + tagHeader.tagLength) {
      trace("WARNING: excess bytes: " + 
         (data.position - (pos + tagHeader.tagLength)) + ", " +
         "Tag: " + tag.name + ", " +
         "Index: " + (tags.length - 1)
      );
      data.position = pos + tagHeader.tagLength;
   } 
```

它看起来是由格式错误的标签或文件损坏引起的，也可能是其他原因。

# jquery - Zend中的Jquery Uploadify插件

> ID：10792639
> 
> 赞同：2
> 
> 时间：2012-05-29T03:10:00.797
> 
> 标签：jquery, zend-framework, jquery-plugins, flash, uploadify

我正在使用uploadify 插件上传图片。主要代码如下：

```
<script type="text/javascript" src="/js/uploadify-v3.1/jquery-1.7.2.min.js"></script>
<link rel="stylesheet" type="text/css" href="/js/uploadify-v3.1/uploadify.css">
<script type="text/javascript" src="/js/uploadify-v3.1/jquery.uploadify-3.1.min.js"></script>
<script type="text/javascript">
$(function() {
    $('#file_upload').uploadify({
        'auto'     : false,
         'buttonCursor' : 'arrow',
        'checkExisting' : '/js/uploadify-v3.1/check-exists.php',
        'fileObjName' : 'the_files',
        'fileTypeExts' : '*.gif; *.jpg; *.png',
        'method'   : 'post',
        'queueID'  : 'some_file_queue',
        'swf'      : '/js/uploadify-v3.1/uploadify.swf',
        //'uploader' : '/js/uploadify-v3.1/uploadify.php',
        'uploader' : 'UploadifyController.php',
        'onUploadError' : function(file, errorCode, errorMsg, errorString) {
            alert('The file ' + file.name + ' could not be uploaded: ' + errorString);
        } ,
    'onUploadSuccess' : function(file, data, response) {
        alert('The file was saved to: ' + data);
    } 

        // Your options here
    });
});
</script> 
```

我已将这些代码放在 /views/scripts/ 中。

如何将uploadify.php 指定为UploadifyController.php？或者我如何在zend中使用uploadify？

另外我想知道如何将路径“上传”指定为目标文件夹？请帮忙..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T06:51:41.863

这些`uploader`选项基本上是处理上传的 PHP 的路径。显然，您不能指向 UploadifyController.php，因为控制器文件本身在 Zend 中不执行任何操作。假设该`processAction`控制器中有一个功能，您应该使用以下内容：

```
'uploader' : <?php echo $this->url(array('controller' => 'uploadify', 'action' => 'process'), default, true) ?> 
```

进入操作后，您可以接收文件并使用`move_uploaded_file`相关的 Zend 框架方法将其保存在任何地方。

# ruby-on-rails - 使用 CarrierWaveDirect 时创建表条目

> ID：10792642
> 
> 赞同：0
> 
> 时间：2012-05-29T03:10:35.640
> 
> 标签：ruby-on-rails, file-upload, amazon-s3, carrierwave

是否可以使用 CarrierWaveDirect 之类的东西直接上传到 S3 并且仍然能够收集有关正在上传的文件的一些数据？

例如，是否可以更改文件名，并在上传之前/之后将大小保存在表格中？我也不需要对文件进行任何操作（我正在阅读一些关于使用 Resque 的文档）。

我意识到这是一个非常新手的问题，但我无法在任何地方找到答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T12:38:37.330

经过一番折腾，我发现隐藏字段`success_action_redirect`返回的 S3 安全上传表单在上传文件上的参数如此之多。

# method-call - 类与实例方法 Obejctive-C 调用 - NSLocale 方法

> ID：10792647
> 
> 赞同：1
> 
> 时间：2012-05-29T03:11:06.160
> 
> 标签：method-call, nslocale

无论如何，我是一个非常绿色的 nubie，我正在完成一个教程，该教程将引导我使用 NSLocale 类来获取当地货币，如下所示：

```
NSLocale *here = [NSLocale currentLocale];
NSString *currency = [here objectForKey:NSLocaleCountryCode];
NSLog(@"Money is %@", currency); 
```

所以，我知道我正在创建一个名为“here”的 NSLocale 类的实例，然后我向“here”对象发送一条消息，询问 objectForKey，并将结果返回到名为“currency”的 NSString 中。最后，我使用 NSLog 打印货币值。

好的，这是我的问题，然后我查看了 NSLocale 类上还有哪些其他方法，我发现了一个名为“preferredLanguages”的方法，它返回了一组首选语言。所以我虽然我会调用该方法，然后将其打印到日志中，只是为了微笑和帮助我学习。离开上面的例子，我想我会这样称呼它。从上面的代码中我已经有一个名为“here”的 NSLocale 类的实例开始，我认为我只需要以下内容（我重复上面的三行只是为了便于在这里阅读。）

```
NSLocale *here = [NSLocale currentLocale];
NSString *currency = [here objectForKey:NSLocaleCountryCode];
NSLog(@"Money is %@", currency);

NSArray *prefLangs = [here preferredLanguages];
NSLog(@"Preferred Languages are: %@", prefLangs); 
```

但这不起作用，我收到一条错误消息，上面写着“'NSLocale' 没有可见的@interface 声明选择器'preferredLanguages'

我发现我必须这样做：

```
NSLocale *here = [NSLocale currentLocale];
NSString *currency = [here objectForKey:NSLocaleCountryCode];
NSLog(@"Money is %@", currency);

NSArray *prefLangs = [NSLocale preferredLanguages];
NSLog(@"Preferred Languages are: %@", prefLangs); 
```

我只是不明白为什么我必须调用这样的方法：[NSLocale preferredLanguages]，而不是[这里的preferredLanguages]。上面已经创建了“这里”的实例。有人可以解释一下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T03:40:19.903

你很快就会习惯于 Objective C 的快乐和痛苦，但简短的回答包括查看方法声明，它看起来像：

[`+ preferredLanguages:`](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSLocale_Class/Reference/Reference.html#//apple_ref/occ/clm/NSLocale/preferredLanguages)

声明中的“+”表示它是一个类方法。

[这是Apple 的“学习目标 C”文档](http://developer.apple.com/library/mac/referencelibrary/GettingStarted/Learning_Objective-C_A_Primer/_index.html#//apple_ref/doc/uid/TP40007594-CH1-SW11)中的相关段落

> Objective-C 中的一个类可以声明两种类型的方法：实例方法和类方法。实例方法是一种方法，其执行范围仅限于类的特定实例。也就是说，在调用实例方法之前，必须先创建类的实例。相比之下，类方法不需要您创建实例，但稍后会详细介绍。

如果声明以“-”开头，则使其成为实例方法，并且您需要实例化（创建）实例才能调用该对象上的方法。

希望到目前为止这是有道理的。

# android - Android MuPDF ndk build Error: No such file or directory

> ID：10792653
> 
> 赞同：2
> 
> 时间：2012-05-29T03:11:44.307
> 
> 标签：android

我按照[此处的步骤操作，](https://stackoverflow.com/a/8587527/998732)但出现以下错误：

```
jni/../../pdf/pdf_cmap_table.c:5:35: error: ../generated/cmap_cns.h: No such file or directory
jni/../../pdf/pdf_cmap_table.c:6:34: error: ../generated/cmap_gb.h: No such file or directory
jni/../../pdf/pdf_cmap_table.c:7:37: error: ../generated/cmap_japan.h: No such file or directory
jni/../../pdf/pdf_cmap_table.c:8:37: error: ../generated/cmap_korea.h: No such file or directory
jni/../../pdf/pdf_cmap_table.c:14: error: 'cmap_78_EUC_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:15: error: 'cmap_78_EUC_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:16: error: 'cmap_78_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:17: error: 'cmap_78_RKSJ_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:18: error: 'cmap_78_RKSJ_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:19: error: 'cmap_78_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:20: error: 'cmap_78ms_RKSJ_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:21: error: 'cmap_78ms_RKSJ_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:22: error: 'cmap_83pv_RKSJ_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:23: error: 'cmap_90ms_RKSJ_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:24: error: 'cmap_90ms_RKSJ_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:25: error: 'cmap_90msp_RKSJ_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:26: error: 'cmap_90msp_RKSJ_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:27: error: 'cmap_90pv_RKSJ_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:28: error: 'cmap_90pv_RKSJ_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:29: error: 'cmap_Add_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:30: error: 'cmap_Add_RKSJ_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:31: error: 'cmap_Add_RKSJ_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:32: error: 'cmap_Add_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:33: error: 'cmap_Adobe_CNS1_0' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:34: error: 'cmap_Adobe_CNS1_1' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:35: error: 'cmap_Adobe_CNS1_2' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:36: error: 'cmap_Adobe_CNS1_3' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:37: error: 'cmap_Adobe_CNS1_4' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:38: error: 'cmap_Adobe_CNS1_5' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:39: error: 'cmap_Adobe_CNS1_6' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:40: error: 'cmap_Adobe_CNS1_UCS2' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:41: error: 'cmap_Adobe_GB1_0' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:42: error: 'cmap_Adobe_GB1_1' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:43: error: 'cmap_Adobe_GB1_2' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:44: error: 'cmap_Adobe_GB1_3' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:45: error: 'cmap_Adobe_GB1_4' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:46: error: 'cmap_Adobe_GB1_5' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:47: error: 'cmap_Adobe_GB1_UCS2' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:48: error: 'cmap_Adobe_Japan1_0' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:49: error: 'cmap_Adobe_Japan1_1' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:50: error: 'cmap_Adobe_Japan1_2' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:51: error: 'cmap_Adobe_Japan1_3' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:52: error: 'cmap_Adobe_Japan1_4' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:53: error: 'cmap_Adobe_Japan1_5' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:54: error: 'cmap_Adobe_Japan1_6' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:55: error: 'cmap_Adobe_Japan1_UCS2' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:56: error: 'cmap_Adobe_Japan2_0' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:57: error: 'cmap_Adobe_Korea1_0' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:58: error: 'cmap_Adobe_Korea1_1' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:59: error: 'cmap_Adobe_Korea1_2' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:60: error: 'cmap_Adobe_Korea1_UCS2' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:61: error: 'cmap_B5_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:62: error: 'cmap_B5_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:63: error: 'cmap_B5pc_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:64: error: 'cmap_B5pc_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:65: error: 'cmap_CNS_EUC_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:66: error: 'cmap_CNS_EUC_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:67: error: 'cmap_CNS1_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:68: error: 'cmap_CNS1_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:69: error: 'cmap_CNS2_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:70: error: 'cmap_CNS2_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:71: error: 'cmap_ETHK_B5_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:72: error: 'cmap_ETHK_B5_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:73: error: 'cmap_ETen_B5_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:74: error: 'cmap_ETen_B5_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:75: error: 'cmap_ETenms_B5_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:76: error: 'cmap_ETenms_B5_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:77: error: 'cmap_EUC_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:78: error: 'cmap_EUC_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:79: error: 'cmap_Ext_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:80: error: 'cmap_Ext_RKSJ_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:81: error: 'cmap_Ext_RKSJ_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:82: error: 'cmap_Ext_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:83: error: 'cmap_GB_EUC_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:84: error: 'cmap_GB_EUC_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:85: error: 'cmap_GB_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:86: error: 'cmap_GB_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:87: error: 'cmap_GBK_EUC_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:88: error: 'cmap_GBK_EUC_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:89: error: 'cmap_GBK2K_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:90: error: 'cmap_GBK2K_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:91: error: 'cmap_GBKp_EUC_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:92: error: 'cmap_GBKp_EUC_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:93: error: 'cmap_GBT_EUC_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:94: error: 'cmap_GBT_EUC_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:95: error: 'cmap_GBT_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:96: error: 'cmap_GBT_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:97: error: 'cmap_GBTpc_EUC_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:98: error: 'cmap_GBTpc_EUC_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:99: error: 'cmap_GBpc_EUC_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:100: error: 'cmap_GBpc_EUC_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:101: error: 'cmap_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:102: error: 'cmap_HKdla_B5_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:103: error: 'cmap_HKdla_B5_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:104: error: 'cmap_HKdlb_B5_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:105: error: 'cmap_HKdlb_B5_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:106: error: 'cmap_HKgccs_B5_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:107: error: 'cmap_HKgccs_B5_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:108: error: 'cmap_HKm314_B5_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:109: error: 'cmap_HKm314_B5_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:110: error: 'cmap_HKm471_B5_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:111: error: 'cmap_HKm471_B5_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:112: error: 'cmap_HKscs_B5_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:113: error: 'cmap_HKscs_B5_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:114: error: 'cmap_Hankaku' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:115: error: 'cmap_Hiragana' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:116: error: 'cmap_Hojo_EUC_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:117: error: 'cmap_Hojo_EUC_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:118: error: 'cmap_Hojo_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:119: error: 'cmap_Hojo_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:120: error: 'cmap_KSC_EUC_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:121: error: 'cmap_KSC_EUC_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:122: error: 'cmap_KSC_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:123: error: 'cmap_KSC_Johab_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:124: error: 'cmap_KSC_Johab_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:125: error: 'cmap_KSC_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:126: error: 'cmap_KSCms_UHC_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:127: error: 'cmap_KSCms_UHC_HW_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:128: error: 'cmap_KSCms_UHC_HW_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:129: error: 'cmap_KSCms_UHC_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:130: error: 'cmap_KSCpc_EUC_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:131: error: 'cmap_KSCpc_EUC_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:132: error: 'cmap_Katakana' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:133: error: 'cmap_NWP_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:134: error: 'cmap_NWP_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:135: error: 'cmap_RKSJ_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:136: error: 'cmap_RKSJ_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:137: error: 'cmap_Roman' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:138: error: 'cmap_UniCNS_UCS2_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:139: error: 'cmap_UniCNS_UCS2_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:140: error: 'cmap_UniCNS_UTF16_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:141: error: 'cmap_UniCNS_UTF16_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:142: error: 'cmap_UniGB_UCS2_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:143: error: 'cmap_UniGB_UCS2_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:144: error: 'cmap_UniGB_UTF16_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:145: error: 'cmap_UniGB_UTF16_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:146: error: 'cmap_UniHojo_UCS2_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:147: error: 'cmap_UniHojo_UCS2_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:148: error: 'cmap_UniHojo_UTF16_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:149: error: 'cmap_UniHojo_UTF16_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:150: error: 'cmap_UniJIS_UCS2_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:151: error: 'cmap_UniJIS_UCS2_HW_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:152: error: 'cmap_UniJIS_UCS2_HW_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:153: error: 'cmap_UniJIS_UCS2_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:154: error: 'cmap_UniJIS_UTF16_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:155: error: 'cmap_UniJIS_UTF16_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:156: error: 'cmap_UniJISPro_UCS2_HW_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:157: error: 'cmap_UniJISPro_UCS2_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:158: error: 'cmap_UniKS_UCS2_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:159: error: 'cmap_UniKS_UCS2_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:160: error: 'cmap_UniKS_UTF16_H' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:161: error: 'cmap_UniKS_UTF16_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:162: error: 'cmap_V' undeclared here (not in a function)
jni/../../pdf/pdf_cmap_table.c:163: error: 'cmap_WP_Symbol' undeclared here (not in a function)
make: *** [obj/local/armeabi/objs-debug/mupdfcore/__/__/pdf/pdf_cmap_table.o] Error 1 
```

请帮我解决一下这个。我使用 ndk-r8 并使用 CMD 编译它，但我得到了那个错误，然后我按照这个[步骤在 eclipse 中构建 ndk](http://mobilepearls.com/labs/ndk-builder-in-eclipse/)，但我仍然得到了同样的错误。

**编辑：**我认为这是这里的主要问题，那么我在哪里可以获得这些 .h 文件？我搜索了这个生成的目录，但在 web.xml 中什么也没找到。有人可以建议我从哪里获得这些丢失的 .h 文件吗？

```
../generated/cmap_cns.h: No such file or directory
../generated/cmap_gb.h: No such file or directory
../generated/cmap_japan.h: No such file or directory
../generated/cmap_korea.h: No such file or directory 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T10:45:45.380

解决方案是进入`mupdf/`目录（整个项目的根目录）并首先运行`make`. 这应该会生成`generated/`包含所有需要的头文件的文件夹。

之后 ndk-build 应该可以正常运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T11:35:14.547

您好，您可以在这里找到所有头文件。

[http://code.google.com/p/ebookdroid/source/browse/#svn%2Ftrunk%2Fjni%2Fmupdf%2Fmupdf%2Fgenerated](http://code.google.com/p/ebookdroid/source/browse/#svn%2Ftrunk%2Fjni%2Fmupdf%2Fmupdf%2Fgenerated) 。我遇到了和你一样的错误，但是在父目录中“生成”文件夹并复制这个头文件之后，一切都为我解决了，干杯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-26T09:07:30.787

首先使用Visual Studio generate.vcproj 生成这些头文件，然后使用ndk-build。

# mysql - MySQL 列组织

> ID：10792656
> 
> 赞同：0
> 
> 时间：2012-05-29T03:12:05.243
> 
> 标签：mysql, code-organization

我的 Web 应用程序允许用户定义**1 到 30 封电子邮件**（可以是其他任何内容）。这些选项中哪个最好？

1) ...使用分隔符将数据仅存储在一列中，如下所示：

*   **[列电子邮件]** peter@example.com,mary@example.com,john@example.com

结构：

```
电子邮件 VARCHAR(1829)
```

2) ...或使用不同的列保存数据，如下所示：

*   **[COLUMN email1]** peter@example.com
*   **[COLUMN email2]** mary@example.com
*   **[COLUMN email3]** john@example.com
*   [...]

结构：

```
email1 VARCHAR(60)
email2 VARCHAR(60)
email3 VARCHAR(60)
[...]
email30 VARCHAR(60)
```

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T03:14:27.823

毫无疑问，第二个是更好的选择。如果您执行第一个（逗号分隔），那么它会否定使用 RDBMS 的优势（在这种情况下，您无法对您的电子邮件运行有效的查询，因此它也可能是一个平面文件）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T03:16:25.970

取决于您将如何使用数据以及 30 的数量如何固定。如果快速查询第三个地址或使用 WHERE 子句过滤是一个优势，那么：使用不同的字段；否则，创建列可能不值得。

将数据保存在数据库中仍然具有多个用户同时访问的优势。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T03:17:20.550

2号比1号好。

**但是**，您应该考虑获得[标准化](http://en.wikipedia.org/wiki/Database_normalization)结构的另一种选择，其中您有一个单独的电子邮件表，其中包含用户记录的[外键。](http://en.wikipedia.org/wiki/Foreign_key)如果您想通过电子邮件搜索以查找用户并设置[约束](http://en.wikipedia.org/wiki/Database_constraints#Constraints)以确保没有重复的电子邮件被注册，这将允许您定义[索引](http://en.wikipedia.org/wiki/Database_index)- 如果您想这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T04:59:00.297

两者都不是一个很好的选择。

选项 1 是一个糟糕的主意，因为它使通过电子邮件查找用户成为一项复杂且低效的任务。您实际上需要在用户记录中的电子邮件字段上执行全文搜索才能找到一封电子邮件。

IMO，选项 2 确实是一个更糟糕的想法，因为它使任何周围的代码编写起来都非常痛苦。再次假设您需要查找具有值 X 的所有用户。您现在需要枚举 30 列并检查每一列以查看该值是否存在。痛苦！

以这种方式存储数据——一个或多个数据元素——在数据库设计中非常常见，正如 Adam 之前提到的，在大多数情况下，最好通过使用规范化数据结构来解决。

一个正确的表结构，用 MySQL 编写，因为它被标记为这样，可能看起来像：

用户表：

```
CREATE TABLE user (
 user_id int auto_increment,
 ...
 PRIMARY KEY (user_id)
); 
```

电子邮件表：

```
CREATE TABLE user_email (
 user_id int,
 email char(60) not null default '',
 FOREIGN KEY (user_id) REFERENCES user (user_id) ON DELETE CASCADE
); 
```

该`FOREIGN KEY`语句是可选的——没有它，设计也可以工作，但是，该行会导致数据库强制建立关系。例如，如果您尝试插入一条`user_email`a`user_id`为 10 的记录，则必须有一条`user`a 为 10 的对应记录`user_id`，否则查询将失败。`ON DELETE CASCADE`告诉数据库，如果您从表中删除一条记录，与之关联的`user`所有`user_email`记录也将被删除（您可能希望也可能不希望这种行为）。

这种设计当然也意味着您需要在检索用户记录时执行联接。像这样的查询：

```
 SELECT user.user_id, user_email.email FROM user LEFT JOIN user_email ON user.user_id = user_email.user_id WHERE <your where clause>; 
```

将为存储在系统中的每个 user_email 地址返回一行。如果您有 5 个用户并且每个用户有 5 个电子邮件地址，则上述查询将返回 25 行。

根据您的应用程序，您可能希望每个用户获得一行，但仍然可以访问所有电子邮件。在这种情况下，您可以尝试一个聚合函数，例如`GROUP_CONCAT`它将为每个用户返回一行，并带有一个逗号分隔的属于该用户的电子邮件列表：

```
 SELECT user.user_id, GROUP_CONCAT(user_email.email) AS user_emails FROM user LEFT JOIN user_email ON user.user_id = user_email.user_id WHERE <your where clause> GROUP BY user.user_id; 
```

同样，根据您的应用程序，您可能希望向电子邮件列添加索引。

最后，在某些情况下，您不需要规范化的数据库设计，而带有分隔文本的单列设计可能更合适，尽管这些情况很少见。对于大多数普通应用程序，这种类型的规范化设计是可行的方法，并将帮助它更好地执行和扩展。

# jquery-mobile - 如何决定在 jquery mobile 上首先加载哪个页面？

> ID：10792660
> 
> 赞同：1
> 
> 时间：2012-05-29T03:13:18.087
> 
> 标签：jquery-mobile, cordova

我正在使用 jquery mobile 和 phonegap (Apache Cordova) 构建一个移动应用程序，问题是首先我需要在决定首先加载哪个页面之前进行数据库查询，如果它是“登录”页面或“主页”。

根据 phonegap 文档，我需要绑定“deviceready”事件以了解设备何时准备就绪，然后进行数据库查询。

```
document.addEventListener("deviceready", onDeviceReady, false); 
```

如果没有创建名为“onDeviceReady”的函数，则创建数据库，然后对名为“users”的表进行查询，如果有一个或多个用户，我不想显示名为“main.html”的页面，否则为页面命名为“login.html”。

```
function onDeviceReady() {
    var db = window.openDatabase("Database", "1.0", "Cordova Demo", 200000);
    db.transaction(populateDB, errorCB, successCB);
} 
```

基本上，问题是在执行此函数时会加载第一页，因为在调用“onDeviceReady”函数之前执行了以下代码：

```
$(document).bind( "mobileinit", function(){             
    $.mobile.listview.prototype.options.filterPlaceholder = "Buscar...";
    //-> patch for phonegap
    $.mobile.allowCrossDomainPages = true;
    $.mobile.page.prototype.options.backBtnText = "atr&aacute;s";
});
$( document ).bind( "pagebeforeload", function( event, data ){
    // here i think i would say to phone gap not to load any page until i make the db queries
    //i think i can't make the DB queries here because the "pagebeforeload" is launched before the "deviceready" function
}); 
```

如果第一页的代码按照 DOM 的 ASC 顺序加载本页：

```
<div data-role="page" id="page-init">
        <div data-role="header" data-theme="c" data-position="fixed">
            <h1>Init page</h1>
        </div><!-- /header -->
    </div> 
```

如果我将页面更改为“main.html”，`$.mobile.changePage("main.html");`一旦我检查“users”表上是否有一个或多个用户记录，则首先加载“page-init”页面，然后加载“main.html”，然后我不想要这个，因为用户可以看到一种闪光。我只想在检查“用户”表后决定首先显示哪个页面。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T08:08:45.000

我在stackoverflow上学到了以下内容，但我找不到答案了，所以我会自己回答：

在您的索引末尾：

```
 $(document).bind("mobileinit", onMobileInit);
            $(document).ready(onPageLoad); 
```

在索引中的任何 JS 文件或脚本标记中：

```
function onMobileInit() {
    console.log("mobile init");
    $.mobile.autoInitialize = false;
}

function onPageLoad() {// Document.Ready
    console.log("document ready");
    try {
        if(someCondition) {
            document.location.hash = "#profile";
        } else {
            document.location.hash = "#signIn";
        }
    } catch (exception) {

    } finally {
        $.mobile.initializePage();
    }
} 
```

PS您可以将初始化代码放在其他地方，但是加载屏幕会更好，因为它是一个数据库调用，我使用浏览器存储，我认为这要快得多

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T14:51:17.787

听起来这可以通过加载屏幕来解决。只需将您的第一页创建为加载屏幕，然后检查您的数据库并根据数据库结果加载正确的页面。您甚至可以添加 JQM 微调器来告诉您的用户正在发生的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-12T12:05:29.517

这个问题很老，但是我可以说，对我来说，只需将您想要的散列分配给 document.location.hash，例如 document.location.hash = "#profile";，而无需移动初始化程序就可以正常工作。您需要在 document.ready() 运行之前执行此操作。

# java - MongoDB (Java) - 如何运行保存在 javascript 文件中的查询？

> ID：10792663
> 
> 赞同：1
> 
> 时间：2012-05-29T03:13:44.837
> 
> 标签：java, javascript, mongodb

所以我有很多 .js 文件，以前我曾用这些文件从命令行界面查询 MongoDB，但现在我希望能够通过 Java 运行这些相同的查询（我正在使用 Java 来支持一个依赖于来自查询的信息）。如何使用来自 Java 驱动程序的那些 JavaScript 查询并返回一些我可以使用的数据（最终游戏是将结果格式化为 HTML，如果有帮助的话）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T08:55:30.753

如果你需要在构建时执行你的 js 文件，你可以使用[maven-mongodb-plugin](http://code.google.com/p/maven-mongodb-plugin/)。这个插件使用 db.eval()...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T03:22:58.470

使用 Java IO 读取您的 js 文件，过滤查询，执行查询。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T06:18:23.767

在当前的 JAVA 驱动程序中，这是不可能的。看看这里： [mongodb java driver - raw command?](https://stackoverflow.com/questions/2775921/mongodb-java-driver-raw-command)

# regex - Eclipse 正则表达式“之间的一切”

> ID：10792669
> 
> 赞同：0
> 
> 时间：2012-05-29T03:14:44.383
> 
> 标签：regex, eclipse, string, replace

我一直在浏览stackoverflow中的文档和帖子，但似乎无法正确使用语法。我想替换`return`关键字和尾随之间的所有内容，`;`如下所示：

```
return new Foo() {

    void bar(){
        System.out.print("Hello World");
    }
}; 
```

这是我迄今为止最明智的尝试，但它不起作用：`return(.*?);`

非常感谢任何帮助；）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T03:53:38.690

使用“点匹配新行”开关`(?s)`和环顾四周：

```
(?s)(?<=return).*?(?=;) 
```

整个正则表达式匹配多行之间*但不包括* `return`多`;`行之间的任何内容。

# c - 我怎么知道 sig_atomic_t 是否改变了值？

> ID：10792670
> 
> 赞同：0
> 
> 时间：2012-05-29T03:14:47.710
> 
> 标签：c, unix, signals, signal-processing

因为我需要在 SIGCHLD 到达时更新作业状态，所以我如何知道 sig_atomic_t 是否已更改值？代码看起来像这样......

```
sig_atomic_t child_status;
sig_atomic_t child_pid;  //is this ok?             
void sigHandler(int signum){
      pid_t pid;
      int status;
      while((pid = wait(-1, &status, WNOHANG) > 0){
              child_status = status;
              child_pid = (int)pid;
      }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T03:40:38.403

您不知道 a`sig_atomic_t`有多大，因此您不一定可以在其中存储 pid 或状态。也就是说，C 标准简单地说：

> ### §7.14 信号处理
> 
> ...
> 
> 定义的类型是
> 
> ```
> sig_atomic_t 
> ```
> 
> 它是可以作为原子实体访问的对象的（可能是 volatile 限定的）整数类型，即使在存在异步中断的情况下也是如此。

POSIX 不保证任何额外的东西，AFAICS。综上所述，在 n 位机器上`sig_atomic_t`很有可能是 n 位类型（但具有半宽总线的芯片，如 8088，可能会受到更多限制）。

您可以通过将变量中的当前值与您认为它上次的值进行比较来判断它是否以与任何其他变量相同的方式更改：

```
int old_status = child_status;
int old_pid    = child_pid;

...busy code...

if (child_status != old_status || child_pid != old_pid)
    ...something changed... 
```

# android - 求教sdcard权限管理原理

> ID：10792677
> 
> 赞同：0
> 
> 时间：2012-05-29T03:15:32.203
> 
> 标签：android, permissions, android-sdcard

*   为什么android中所有文件的权限都是**075 ？**
*   如何实现这个功能？
*   或者sdcard权限管理的原理是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T06:56:36.803

SD卡/外部存储没有权限管理。它使用不支持权限的 VFAT 文件系统。在较新的手机上，“外部”存储实际上是内部的，并且模拟了 SD 卡以实现向后兼容性。任何应用程序都可以在没有特殊权限的情况下从外部（共享）存储中读取文件，对于写入，您需要将 WRITE_EXTERNAL_STORAGE 权限添加到清单中。顺便说一句，权限是`0775`所有者根和组`sdcard_rw`

# java - 使用 DAO 进行事务管理

> ID：10792684
> 
> 赞同：4
> 
> 时间：2012-05-29T03:16:27.510
> 
> 标签：java, mysql, transactions, dao

在我的 Java 应用程序的 DAO 层中，我有两个 DAO 类`EmployeeDAO`和`BankDAO`. 我需要控制/处理他们的数据库事务。我使用连接池来获取数据库连接。

EmployeeDAO 类：

```
public class EmployeeDAO {
    String name;
    String empCode;
    int age;

    // Getters & Setters
} 
```

BankDAO 类：

```
public class BankDAO {
    String bankName;
    String acNo;
    String empCode;

    // Getters & Setters
} 
```

假设我要将与该员工相关的员工和银行帐户详细信息存储在两个数据库表中。首先我保存员工，然后我保存银行详细信息，*如果在存储银行详细信息时发生错误，*我需要**回滚**完整的交易。

如何在使用 DAO 时管理此类事务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T03:35:07.343

如果您使用的是普通 JDBC，您可以做的是`Connection`在 DAO 类的两个实例中共享同一个实例。

```
public class EmployeeDAO {

    private Connection conn;

    public void setConnection(Connection conn) {
        this.conn = conn;
    }

    ...
}

public class BankDAO {

    private Connection conn;

    public void setConnection(Connection conn) {
        this.conn = conn;
    }

    ...
} 
```

在客户端代码中，首先需要创建一个`Connection`对象实例。接下来，您需要启动事务，使用`conn.setAutoCommit(false);`. 将`Connection`对象实例传递给两个 DAO 类。如果任何操作都没有发生错误，`conn.commit();`则，否则，`conn.rollback();`

例如：

```
Connection conn = null;
try {
    // getConnection from pool

    conn.setAutoCommit(false);

    EmployeeDAO employeeDAO = new EmployeeDAO();
    employeeDAO.setConnection(conn);

    BankDAO bankDAO = new BankDAO();
    bankDAO.setConnection(conn);

    // save employee

    // save bank details

    conn.commit();

catch(Exception e) {
    if (conn != null) {
        conn.rollback();
    }
} finally {
    if (conn != null) {
        conn.close();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T03:29:38.787

当您从数据库打开一个连接时，您可以使用 方法启动一个新事务`[Connection#setAutoCommit][1](false)`，执行所有插入/更新/删除操作并执行提交以保存所有这些更改，如果出现错误，您可以回滚所有操作或一个保存点。这是我所说的一个例子：

```
public void saveSomeData(DAOClass daoObject) {

    Connection con = null;
    try {
        con = getConnectionFromDBPool(); //get the connection from the connection pool
        con.setAutoCommit(false);
        //start your transaction
        PreparedStatement ps = con.prepareCall("insert into tablex values(?, ?)");
        ps.setInt(1, daoObject.getAttribute1());
        ps.setString(2, daoObject.getAttribute2());
        ps.execute();
        //add another insert/update/delete operations...
        //at the end, you commit the transaction
        con.commit();
    } catch (Exception e) {
        //start a rollback
        if (con != null) {
            try {
                con.rollback();
            } catch (Exception ex) {
            }
        }
        //handle the exception
        e.printStackTrace();
    } finally {
        if (con != null) {
            try {
                con.close();
            } catch (Exception e) {
            }
        }
    }
} 
```

另一个提示：您应该在关闭连接之前手动关闭所有资源。这段代码只是解释性的，但我应该在使用后关闭准备好的语句。

有关处理交易的更多信息：

*   [使用事务](http://docs.oracle.com/javase/tutorial/jdbc/basics/transactions.html)

# javascript - 与 JQuery 的图像交换之间的定时转换？

> ID：10792685
> 
> 赞同：0
> 
> 时间：2012-05-29T03:16:37.510
> 
> 标签：javascript, jquery, image

我有这个代码：

```
$('.pic_windows img').mouseenter(function () {
    $(this).effect('shake', {
        times : 4,
        distance : 5
    }, 15).attr('src', $(this).attr('src').replace(/.jpg/, '-1.jpg'))
});

$('.pic_windows img').mouseleave(function () {
    $(this).attr('src', $(this).attr('src').replace(/-1.jpg/, '.jpg'))
}); 
```

我正在使用 JQuery 的 .attr 交换图像，但我希望交换发生在大约 1 秒的过程中。我已经用谷歌搜索了所有这些复杂的“使用 JQuery 回退的 CSS3 转换”教程。有没有办法“动画”一个 .attr 变化？

我想我应该做一个淡入淡出，而另一个淡入淡出，但我不知道怎么写，因为我几乎是一个完整的 JQuery 新手。在几页的过程中，我有许多这样的过渡要做。如果我只需要为一个实例写这个，那将是小菜一碟。

**更新** 在 mouseenter 上，图像会抖动，然后应该在此抖动期间从一张图片淡入到其交换的图片。在 mouseleave 上，图像应该只是淡化回原始图片。不幸的是，我还发现抖动效果在 IE、所有版本以及图像交换上都出现了问题（根本看不到图像 2）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T03:21:56.163

不，您不能为属性更改设置动画。您可以做的是克隆一个元素，更改一个属性并在它们之间进行转换。

```
var target = $(this).fadeOut();
var src = target.attr('src').replace(/-1.jpg/, '.jpg');
var copy = target.clone()
    .attr('src', src)
    .hide()
    .insertAfter(target)
    .fadeIn(); 
```

**编辑：**感谢您澄清您的意图，我建议不要使用“src”，这基本上需要构建一个小型有状态插件。相反，在这里坚持所需的效果，在悬停时显示图像。[jsFiddle](http://jsfiddle.net/eHQ3t/13/)

**HTML**

```
<div class="shaker">
    <img src="http://lorempixel.com/output/nature-q-c-360-240-3.jpg" />
    <img class="hover" src="http://lorempixel.com/output/technics-q-c-360-240-9.jpg" />
</div>​ 
```

**CSS**

```
.shaker {
    position: relative;
}
.shaker img {
    position: absolute;
}
.hover {
    display: none;
} 
```

**JS**

```
$('.shaker').hover(function () {
    $(this).effect('shake', {
        times: 4,
        distance: 5
    }, 15);
    $(this).find('.hover').fadeIn();
}, function () {
    $(this).find('.hover').stop().fadeOut();
});​ 
```

[http://jsfiddle.net/eHQ3t/13/](http://jsfiddle.net/eHQ3t/13/)

# sql - 日期时间的“BETWEEN AND”和“> AND <=”有什么区别？

> ID：10792686
> 
> 赞同：2
> 
> 时间：2012-05-29T03:16:52.597
> 
> 标签：sql, sql-server, sql-server-2008-r2, query-optimization

我们团队中的每个人都有自己的提取日期之间数据的方法，我们提供了两种常用的提取数据的方法：

1.  [DateTimeColumn]@StartDate 和 @EndDate 之间
2.  [DateTimeColumn] > @StartDate AND[DateTimeColumn] <= @EndDate

何时使用/区别“BETWEEN”和“日期时间”上的“> AND <=”：SQL 查询优化以及两者中哪一个最适合使用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-29T03:20:53.390

[`BETWEEN`](http://msdn.microsoft.com/en-us/library/ms187922.aspx)运算符使用*区间*的两端。每当您希望排除间隔的一端或两端时，请使用特定的比较操作。

此外，`BETWEEN`当您针对复杂表达式进行测试时也很方便：例如，编写类似

```
... AND CASE WHEN A>0 THEN open_date ELSE close_date END BETWEEN '01/01/2012' AND '05/01/2012' 
```

比重复`CASE`表达两次更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T03:32:59.557

只是补充一下 dashblinkenlight 的观点，我实际上没有看到 Between 和 <> 运算符有任何性能问题。您可以在这两种情况下检查查询计划。唯一明显的区别是Between 是包容性的。

# php - 无法使用 apache 查看本地图像

> ID：10792691
> 
> 赞同：1
> 
> 时间：2012-05-29T03:17:35.910
> 
> 标签：php, apache

我在 mac osx10.6.8 上。我正在使用 XAMPP。我通过输入 localhost/index.php 等来通过 Firefox 运行我的所有脚本。所有脚本都运行，到目前为止我编写的所有内容都运行良好。

现在，我可以浏览我的文件夹并上传图片。它将成功保存和重命名图像并将其存储在我的 htdocs 文件夹中。问题是当我尝试显示刚刚保存的图像时。

我有以下代码：

```
<img src="file:///applications/XAMPP/xamppfiles/htdocs/Images/1921304523pvyNZ.jpg"> 
```

如果我在`file:///applications/XAMPP/xamppfiles/htdocs/Images/1921304523pvyNZ.jpg`地址栏中输入，图片就会出现。但是当我尝试使用 img src 时，只显示一个损坏的图像。当我单击获取该损坏图像的信息时，它会为我提供确切的地址，甚至会在“媒体预览”中显示该图像。为什么，然后它不会显示在网站上？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T03:20:45.043

`file://`使用..而不是`http://localhost/path/to/image/`.. 那么图像将通过 xampp 而不是从文件系统提供。我希望这是您浏览器的一项安全功能，而不是混合文件系统和 http 提供的内容。

在你的情况下，你可能想要`http://localhost/Images/1921304523pvyNZ.jpg`

此外，请确保“图像”确实有一个大写字母“I”。在 OSX 上没什么大不了的，但如果你部署在 Linux/UNIX 服务器上，就会有。

正如 Fabricio 指出的那样，您可以/应该相对引用图像，并使您的 Web 应用程序易于部署。因此，如果您正在显示`http://localhost/index.php`，则图像路径只是`Images/xxxx.jpg`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-17T17:27:50.167

我有一个类似的问题。我通过查看我的 Xampp 错误日志发现了问题。由于某种原因，我的图像文件权限非常有限。-rx--------...我只是更改了文件权限以允许所有用户能够读取这些文件。在我看来只是一个注释，因为我很懒，其他人可能会不同意，如果它在你自己的计算机上，你可以给他们完全的权限，即 777。但在最佳实践中，你应该只给文件安全所需的权限原因...

由于您使用的是 Mac，因此您可以使用该`chmod`命令在终端中执行此操作。
转到终端中的文件目录。 `cd /Applications/XAMP/xamppfiles/htdocs/.../images/`

然后输入 `chmod 644 yourfilename.extension`

您可以通过使用确认已更改`ls -l`

644应该给你`-rw-r--r--`这应该很安全。

# android - Android CursorAdapter 在首次加载时不刷新

> ID：10792692
> 
> 赞同：0
> 
> 时间：2012-05-29T03:17:52.533
> 
> 标签：android, android-4.0-ice-cream-sandwich, android-cursorloader, android-cursoradapter

编辑我没有添加我的 XML

我正在编写一个用于标记选择的对话框。第一个视图是应用他们在数据库中的标签。下一个屏幕是一个对话框，用于将新标签添加到他们的数据库中。我正在为他们提供用于标签的建议。我想在他们开始输入标签时过滤列表。我为每个屏幕使用两个自定义 CursorAdapter，但它们共享相同的 ListView。我还在使用 CursorLoader 在后台运行我的查询，两者都是从支持库扩展而来的。

当我第一次打开新标签屏幕时，对话框出现后，列表不会用 Android 4.0.3 中的过滤光标刷新，快速滚动也不起作用。如果我切换到标签视图，然后返回到新标签对话框，它会按应有的方式过滤和滚动。我的查询有效，代码每次都在 Android 2.3.3 中有效。我不知道为什么这不起作用。这是我的 CursorLoader 和 Suggestion 适配器的代码。

```
package org.lds.ldssa;

import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.res.Resources;
import android.database.Cursor;
import android.os.Bundle;
import android.support.v4.app.LoaderManager;
import android.support.v4.content.CursorLoader;
import android.support.v4.content.Loader;
import android.support.v4.widget.SimpleCursorAdapter;
import android.text.Editable;
import android.text.TextWatcher;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.inputmethod.InputMethodManager;
import android.widget.*;
import org.lds.ldssa.service.MLDatabase;
import org.lds.ldssa.service.aws.Annotation;

 public class TagDialog extends AlertDialog implements LoaderManager.LoaderCallbacks<Cursor> {

private static final String TAG = "ldssa.tagdialog";
public static final int TAGLOADERID = 0;

// View Items
private EditText mEditText;
private ListView mListView;
private TextView mEmptyView;
private ProgressBar mProgressBar;
private ImageButton mNewTagButton;
private ImageButton mSortTagButton;
private TextView mTitle;
private Button mOkButton;
private Button mCancelButton;
private String mTagTitle;
private String mNewTagTitle;

private Annotation mAnnotation;
private ContentFragment mContentFragment;

private boolean isNewTagView;
private static final String KEY_NEWTAGVIEW = "new_tag_view";
private SimpleCursorAdapter mSuggestionAdapter;
private TagListAdapter mTagAdapter;

private MLDatabase mlDatabase;

protected TagDialog(Context context) {
    super(context);
}

public void onCreate(Bundle savedInstanceState){
    Context context = getContext();
    Resources r = context.getResources();

    final LayoutInflater inflater = LayoutInflater.from(context);
    View view = inflater.inflate(R.layout.dialog_tag, null);

    // Main parts of the view        
    mEditText = (EditText) view.findViewById(R.id.tag_new_tag);
    mListView = (ListView) view.findViewById(android.R.id.list);
    mProgressBar = (ProgressBar) view.findViewById(R.id.tag_spin_progress_bar);
    mEmptyView = (TextView) view.findViewById(android.R.id.empty);
    mEmptyView.setVisibility(View.INVISIBLE);

    // Titlebar
    View titleBar = inflater.inflate(R.layout.dialog_tag_title, null);
    mNewTagButton = (ImageButton) titleBar.findViewById(R.id.tag_new_icon);
    mSortTagButton = (ImageButton) titleBar.findViewById(R.id.tag_sort_icon);
    mTitle = (TextView) titleBar.findViewById(R.id.tag_title);
    mTagTitle = r.getString(R.string.tag_dialog_title);
    mNewTagTitle = r.getString(R.string.tag_new_dialog_title);
    this.setCustomTitle(titleBar);

    // Buttons
    final String OK = r.getString(R.string.ok);
    final String CANCEL = r.getString(R.string.cancel);
    this.setButton(BUTTON_POSITIVE, OK, new OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int which) { /*Never Used*/}});
    this.setButton(BUTTON_NEGATIVE, CANCEL, new OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int which) { /*Never Used*/}});

    // Setup Button Listeners
    setOnShowListener(new OnShowListener() {
        @Override
        public void onShow(DialogInterface dialog) {
            Button ok = getButton(BUTTON_POSITIVE);
            ok.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {
                    if(isNewTagView){
                        hideIMM();
                        setupTagDialog();
                        mEditText.setText("");
                    } else {
                        dismiss();
                    }
                }
            });

            Button cancel = getButton(BUTTON_NEGATIVE);
            cancel.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {
                    if(isNewTagView){
                        hideIMM();
                        setupTagDialog();
                        mEditText.setText("");
                    } else {
                        dismiss();
                    }
                }
            });
        }
    });

    mNewTagButton.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            setupNewTagDialog();
        }
    });
    mSortTagButton.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {

        }
    });

    mEditText.addTextChangedListener(new TextWatcher() {
        @Override
        public void beforeTextChanged(CharSequence s, int start, int count, int after) {}

        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {}

        @Override
        public void afterTextChanged(Editable s) {
           LoaderManager lm = getLoaderManager();
            if(lm != null){
                Loader l = lm.getLoader(TAGLOADERID);
                if(l != null){
                    l.forceLoad();
                } else {
                    restartLoader();
                }
            } else {
                restartLoader();
            }
        }
    });
    String[] UIBindFrom = {MLDatabase.CL_ID};
    int[] UIBindTo = {android.R.id.text1};
    mTagAdapter = new TagListAdapter(context, null);
    mSuggestionAdapter = new SimpleCursorAdapter(context, android.R.layout.simple_list_item_1, null,
            UIBindFrom, UIBindTo, 0);

    //Handle Rotations
    if(savedInstanceState == null){
        //New
        setupTagDialog();
    } else {
        //rotated
        isNewTagView = savedInstanceState.getBoolean(KEY_NEWTAGVIEW, false);
        if(isNewTagView){
            restoreTagState(savedInstanceState);
        } else {
            restoreNewTagState(savedInstanceState);
        }
    }

    LoaderManager lm = getLoaderManager();
    if(lm != null){
        lm.initLoader(TAGLOADERID, null, this);
    }

    this.setView(view);
    super.onCreate(savedInstanceState);
}

public void onStart(){
    restartLoader();
}

@Override
public Bundle onSaveInstanceState(){
    Bundle bundle = super.onSaveInstanceState();

    bundle.putBoolean(KEY_NEWTAGVIEW, isNewTagView);

    return bundle;
}

@Override
public void onBackPressed(){
    if(isNewTagView){
        hideIMM();
        setupTagDialog();
    } else {
        this.dismiss();
    }
}

private void setupTagDialog() {
    isNewTagView = false;
    mTitle.setText(mTagTitle);
    mNewTagButton.setVisibility(View.VISIBLE);
    mSortTagButton.setVisibility(View.VISIBLE);
    mEditText.setVisibility(View.GONE);
    mListView.setVisibility(View.GONE);
    mProgressBar.setVisibility(View.VISIBLE);
    mListView.setAdapter(mTagAdapter);
    restartLoader();
}

private void setupNewTagDialog() {
    isNewTagView = true;
    mTitle.setText(mNewTagTitle);
    mNewTagButton.setVisibility(View.INVISIBLE);
    mSortTagButton.setVisibility(View.INVISIBLE);
    mEditText.setVisibility(View.VISIBLE);
    mListView.setVisibility(View.GONE);
    mProgressBar.setVisibility(View.VISIBLE);
    mListView.setAdapter(mSuggestionAdapter);
    restartLoader();
}

private void restoreTagState(Bundle bundle) {
    setupTagDialog();
}

private void restoreNewTagState(Bundle bundle) {
    setupNewTagDialog();
}

public void setAnnotation(Annotation a) {
    mAnnotation = a;
}

public void setContentViewInterface(ContentFragment contentFragment) {
    mContentFragment = contentFragment;
}

private MLDatabase getDatabase() {
    if(mlDatabase == null){
        GospelLibraryApplication app = (GospelLibraryApplication) getContext().getApplicationContext();
        mlDatabase = app.getMlDatabase();
    }
    return mlDatabase;
}

public String getFilter() {
    return mEditText.getText().toString().trim();
}

public Integer getAnnotationID(){
    if(mAnnotation != null){
        return mAnnotation.getDbKey();
    }
    return -1;
}

private LoaderManager getLoaderManager(){
    if(mContentFragment == null){
        Log.d(TAG, "ContentFragment is NULL!");
        return null;
    }
    return mContentFragment.getContentActivity().getSupportLoaderManager();
}

private void restartLoader(){
    LoaderManager lm = getLoaderManager();
    if(lm != null){
        lm.restartLoader(TAGLOADERID, null, this);
    }
}

private void hideIMM(){
    InputMethodManager imm = (InputMethodManager)getContext().getSystemService(Context.INPUT_METHOD_SERVICE);
    imm.hideSoftInputFromWindow(mEditText.getWindowToken(), 0);
}

@Override
public Loader<Cursor> onCreateLoader(int id, Bundle args) {
    TagCursorLoader loader = new TagCursorLoader(getContext(), this);
    return loader;
}

@Override
public void onLoadFinished(Loader<Cursor> cursorLoader, Cursor data) {
    if(isNewTagView) {
        mSuggestionAdapter.changeCursor(data);
    } else {
        mTagAdapter.changeCursor(data);
    }
    mListView.invalidateViews();
    mProgressBar.setVisibility(View.GONE);
    mListView.setVisibility(View.VISIBLE);
}

@Override
public void onLoaderReset(Loader<Cursor> cursorLoader) {
    if(mSuggestionAdapter != null) {
        mSuggestionAdapter.changeCursor(null);
    }
}

public static class TagCursorLoader extends CursorLoader {
    private final ForceLoadContentObserver mObserver = new ForceLoadContentObserver();

    private TagDialog dialog;
    private MLDatabase mlDatabase;
    private Cursor mCursor;
    private String mFilter;
    private Integer mAnnotationID;

    // Runs on worker thread
    @Override
    public Cursor loadInBackground(){
        Cursor cursor = null;
        if(dialog.isNewTagView){
            mFilter = dialog.getFilter();
            cursor = mlDatabase.getTagSuggestions(mFilter);
        } else {
            mAnnotationID = dialog.getAnnotationID();
        }

        if(cursor != null){
            cursor.registerContentObserver(mObserver);
        }

        return cursor;

    }

    //Runs on UI thread
    @Override
    public void deliverResult(Cursor cursor){
        //Handle if canceled in the middle.
        if(isReset()){
            if(cursor != null){
                cursor.close();
            }
            return;
        }

        Cursor oldCursor = mCursor;
        mCursor = cursor;
        if(isStarted()) {
            super.deliverResult(cursor);
        }

        if(oldCursor != null && !oldCursor.equals(cursor) && !oldCursor.isClosed()) {
            oldCursor.close();
        }
    }

    public TagCursorLoader(Context context, TagDialog dialog) {
        super(context);
        this.dialog = dialog;
        mlDatabase = dialog.getDatabase();
    }

    @Override
    public void onStartLoading(){
        if(mCursor == null) {
            forceLoad();
        } else {
            if(dialog.isNewTagView && mFilter.equals(dialog.getFilter())) {
                deliverResult(mCursor);
            } else {
                forceLoad();
            }
        }
    }

    @Override
    protected void onStopLoading() {
        // Attempt to cancel the current load task if possible.
        cancelLoad();
    }

    @Override
    public void onCanceled(Cursor cursor) {
        if (cursor != null && !cursor.isClosed()) {
            cursor.close();
        }
    }

    @Override
    protected void onReset() {
        super.onReset();

        // Ensure the loader is stopped
        onStopLoading();

        if (mCursor != null && !mCursor.isClosed()) {
            mCursor.close();
        }
        mCursor = null;
    }
  }
}

package org.lds.ldssa;

import android.R;
import android.content.Context;
import android.database.Cursor;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.support.v4.widget.CursorAdapter;
import android.widget.TextView;
import org.lds.ldssa.service.MLDatabase;

public class TagSuggestionAdapter extends CursorAdapter {

    public TagSuggestionAdapter(Context context, Cursor cursor, int flags){
        super(context, cursor, flags);
    }

    @Override
    public View newView(Context context, Cursor cursor, ViewGroup parent) {
        LayoutInflater inflater = LayoutInflater.from(context);
        View v = inflater.inflate(R.layout.simple_list_item_1, parent, false);
        bindView(v, context, cursor);
        return v;
    }

    @Override
    public void bindView(View view, Context context, Cursor cursor) {
        TextView tv = (TextView) view.findViewById(R.id.text1);
        tv.setText(cursor.getString(cursor.getColumnIndex(MLDatabase.CL_ID)));
    }
} 
```

在此先感谢您的帮助。

XML

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/tag_layout"
    android:orientation="vertical"
    android:layout_height="wrap_content"
    android:layout_width="@dimen/min_dialog_width"
    android:padding="5dp"
    android:animateLayoutChanges="true"
    >

<!-- Here is the view to show if the list is emtpy -->
<TextView
        android:id="@android:id/empty"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="50dp"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:layout_centerInParent="true"
        android:gravity="center"
        android:text="@string/no_items"
        android:visibility="invisible"
        />

<ListView
        android:id="@android:id/list"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:visibility="invisible"
        />

<ProgressBar
        android:id="@+id/tag_spin_progress_bar"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:indeterminate="true"
        />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T20:49:48.747

不试一试

```
 android:animateLayoutChanges="true" 
```

...在您的 XML 布局中。

# javascript - php从链接中删除mysql行

> ID：10792696
> 
> 赞同：0
> 
> 时间：2012-05-29T03:18:38.840
> 
> 标签：javascript, php, mysql, sql-delete

我正在尝试创建一个动态链接，让用户根据行 ID # 从 mysql 数据库中删除一行。

我还尝试输入一些 javascript 确认用户确实想要删除有问题的行。

我的问题是如何做到这一点？我有一些想法......（见下文）我在正确的轨道上吗？

```
<head>
    <?php
        require 'include/episodelist.db.php';
        mysql_query("DELETE FROM season WHERE ID='$id'");

        mysql_close();
    ?> 
    <script type="text/javascript">
        function confSubmit(form) {
            if (confirm("Delete this record?")) {
                form.submit();
            } else {
            }
        }
    </script>
</head>
<form action="<?=$_SERVER['PHP_SELF'];?>" method="post">
    <input type="button" onClick="confSubmit(this.form);" value="Delete">
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T03:49:38.067

我可以告诉你如何做到这一点的基本想法。只需为每一行创建一个链接，该链接会将控件重定向到 delete.php（将执行删除的文件。）只有在您的用户确认删除操作时，该控件才会被重定向。链接可以是这样的。

```
 <a class="button" href="<?php echo base_url();?>delete.php/<?php echo $row->id;?>" onclick="javascript: return confirm('Are you SURE you wish to do this?');">Delete</a> 
```

# c# - 建立多列菜单的指南

> ID：10792698
> 
> 赞同：0
> 
> 时间：2012-05-29T03:18:59.713
> 
> 标签：c#, jquery, css, visual-studio-2010

我在 Visual Studio 2010 环境中工作，我正在寻找构建多列列表的最有效方法，该列表将显示在 jQuery 菜单中，例如：

![多列菜单](../Images/4d7b989c50d9a465118dd00dcd8fbf34.png)

我实际上使用了一个服务器端 DataList 控件，它为我呈现了一个带有 RepeatColumns="3" 属性的表。我想知道为此目的使用的最有效、最频繁、最常用的技术。我只是在寻找指导方针:) 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T05:53:07.573

您只需要将内容呈现为显示 - 无论是在 jQuery 下拉菜单中，还是直接在静态页面上，都没有区别。

您可以使用表格或使用 CSS 来执行此操作，具体取决于您更喜欢哪种方式。正如您所说，DataList 控件呈现给一个表，该表可能工作正常。很多人会说你应该使用直接的 CSS 而不是表格，但是对于这个例子，内容本质上是相当“表格”的，所以我认为使用表格没有问题。

# php - MySQL：避免选择具有相同用户 ID 的列

> ID：10792703
> 
> 赞同：0
> 
> 时间：2012-05-29T03:20:51.853
> 
> 标签：php, mysql

尝试选择所有列但避免超过 1 个相同的用户 ID。

```
$result = mysql_query("select *, DISTINCT userid from ringtones where deletedbyuser='0' and (lang='$lang' or lang='en') order by id desc limit 10"); 
```

请帮忙。

表结构：

```
id  int(10)
userid  int(10)
artist  varchar(100)
title   varchar(100)
lang    varchar(2)
public  int(1)
status  int(1)
deletedbyuser   int(1) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T03:31:39.297

你可以

```
select r.* from ringtones r 
    inner join (select MIN(id) as id, userid from ringtones 
                      where deletedbyuser='0' and (lang='$lang' or lang='en') 
                      group by userid) s
    on r.id = s.id
order by r.id desc
limit 10 
```

如果有多个，这将选择添加的第一个。

# android - Google Play 的特色 Android 应用是否因地区而异？

> ID：10792707
> 
> 赞同：2
> 
> 时间：2012-05-29T03:21:21.510
> 
> 标签：android, google-play

我编写了一个专门为穆斯林设计的 Android 应用程序。显然，我不希望 Google 团队在美国推出我的应用程序，但让它在马来西亚、印度尼西亚、沙特阿拉伯等大多数穆斯林国家推出是有意义的。有谁知道 Google Play 商店不同地区有不同的特色应用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T03:36:49.073

Google Play 中的特色应用是 Google Play 团队视为模范公民的应用，它们遵循各种 Android 应用设计指南和最佳实践（例如，它们以适当的方式应用 Action Bar UI 模式；它们始终如一地处理后台堆栈。 。 ETC）。我不记得有任何提及它们是针对特定地区的。不过，您可以绝对肯定地观看此[Google I/O 2011视频。](http://youtu.be/GxU8N21wfrM)

话虽如此，纯粹从观察来看，我会说 Google Play 商店中的“精选”标签*不是*特定于地区的。我住在印度，我见过一些对印度用户来说意义不大的特色应用。

但是，看起来其他一些选项卡（“热门新免费”、“热门新付费”、“趋势”）等似乎确实具有区域意识。我确实在这些标签中看到了一些高度特定于印度的应用程序；如果它们的销量如此之高，以至于登上全球“趋势”榜单，我会感到惊讶。

# bash - 在后台 BASH #2 上运行 Matlab

> ID：10792708
> 
> 赞同：0
> 
> 时间：2012-05-29T03:21:32.530
> 
> 标签：bash, matlab, background

我正在运行以下循环，该循环应该在后台的服务器上同时运行多个进程：

```
for ((i = 1; i <= n; i++)); do

matlab -nojvm -r "pth=path(/myfold);addpath(pth);script1;pause(1);func1(i,n);clear;exit" </dev/null &

done 
```

后台命令未暂停（tnx Dennis Williamson），但我得到的结果是：

1.注解：

```
 [1] 1000
 [2] 2000
 [3] 3000
 [4] 4000
 [5] 5000 
```

2\. matlab nojvm txt

```
 [1]   Done       'name of the above command'
 [2]   Done       'name of the above command'
 [3]   Done       'name of the above command'
 [4]-  Done       'name of the above command'
 [5]+  Done       'name of the above command' 
```

当我使用`ps`或`top`查看进程时，没有。

该脚本需要运行至少一个小时，但我没有得到它需要产生的结果。
有谁知道出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T22:42:42.380

在命令中使用*$i*和*$n*而不是*i*和*n*，如：

```
matlab -nojvm -r "pth=path(/myfold);addpath(pth);script1;pause(1);func1($i,$n);clear;exit" </dev/null & 
```

# lua - CoronaSDK 导向器错误

> ID：10792710
> 
> 赞同：0
> 
> 时间：2012-05-29T03:21:56.740
> 
> 标签：lua, coronasdk

我目前正在使用 CoronaSDK 和 Lua 编写一个跨平台应用程序。我正在使用director包来改变场景。但是我收到以下错误：

“导演错误：无法在‘startUp’上执行新（参数）函数。”

我知道错误来自我的主要课程。这是：

```
-----------------------------------------------------------------------------------------
--
-- main.lua
--
-----------------------------------------------------------------------------------------

local director = require("director")
local mainGroup = display.newGroup()
splash = display.newImage("images/logo.png")

local main = function()

    splash:removeSelf()
    splash = nil
    mainGroup:insert(director.directorView)
    local widget = require "widget"

    -- show default status bar (iOS)
    display.setStatusBar(display.DefaultStatusBar)

    local mainGroup = display.newGroup()

    -- event listeners for tab buttons:
    local function onFirstView( event )
        director:changeScene("startUp")
    end

    local function onSecondView( event )
        director:changeScene("home")
    end

    -- table to setup buttons
    local tabButtons = {
        { label="Home", up="icon1.png", down="icon1-down.png", width = 32, height = 32, onPress=onFirstView, selected=true },
        { label="Cards", up="icon2.png", down="icon2-down.png", width = 32, height = 32, onPress=onSecondView },
    }

    -- create the actual tabBar widget
    local tabBar = widget.newTabBar{
        top = display.contentHeight,
        buttons = tabButtons
    }

    --I think it is this line which is causing the error
    director:changeScene("startUp")

    return true
end

timer.performWithDelay(3000, main, 1) 
```

这是我的 startUp.lua 文件：

```
module(..., package.seeall)

function new()
    require "sqlite3"
    local director = require("director")
    --Connect to database or create it.
    --Each user gets there own database****
    local path = system.pathForFile("data.db", system.DocumentsDirectory)
    local db = sqlite3.open(path)

    --Create the database table if it does not already exist
    local tablesetup = [[CREATE TABLE IF NOT EXISTS User (id Integer autoincrement PRIMARY KEY, firstname, lastname);]]
    db:exec(tablesetup)

    for row in db:nrows("SELECT * FROM User") do
        --goto home if the user is in the database.
        director.changeScene("home")
    end

    --If not in the database go to forms
    director.changeScene("forms")

    --Catch application Exit
    Runtime:addEventListener("system", onSystemEvent)

    --Handle application exit - close the database connection
    local function onSystemEvent(event)
        if(event.type == "applicationExit") then
            db:close()
        end
        print("database closed")
    end

end 
```

这是我在控制台中遇到的错误：

```
Runtime Error director.lua:1092:attempt to call method 'insert' (a nil value) 
stack traceback: in function 'insert' in function 'changeScene'
---------------
Director Error: Failed to execute new(params) function on 'startUp'.
---------------
assertion failed
--------------- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T03:41:55.700

该错误是导演类错误。发生它是因为您的 startUp.lua 有一些错误。

你用的是最新的director class(1.4)吗？最新的导演课程也显示了实际错误。

并不是说文件区分大小写。您的文件必须是 startUp.lua 而不是 startup.lua。

编辑：

我能想到两件事。

1.尝试在startUp.lua的2个地方将director.changeScene改为director:changeScene

2.Try removing the second local mainGroup = display.newGroup() in main.lua (though I doubt this would be the prob)

**THE ACTUAL ERROR**

```
-----------------------
Director ERROR: Failed to execute new( params ) function on 'wifiscreen'.
-----------------------
e:\corona\satheesh\doodle2\wifiscreen.lua:231: attempt to index global 'x' (a nil value)
----------------------- 
```

The second line is the avtual error.

**ERROR FOUND I THINK**

I think the error is because you don't have a onSystemEvent function. Generally *assertion failed* error occurs if you try to add listeners to non-existing functions!

# php - 服务器中的安全文件存储

> ID：10792712
> 
> 赞同：2
> 
> 时间：2012-05-29T03:22:20.500
> 
> 标签：php, file, file-upload

我有一个工作网站，所以有许多简历上传到服务器并存储在一个公开的文件夹位置。我只是想知道我可以在 Apache、php 级别执行哪些安全措施来阻止未经授权的人访问其他人的简历

我有

1.  禁用目录浏览
2.  在 html 中创建了虚假链接，然后在 .htaccess 中映射到另一个位置

..ETC

只是想知道有没有一种方法可以完全隐藏出现在浏览器 url 中的文件名（可能带有诸如 application/pdf ..etc 之类的标题并即时读取文件的内容）这是可能的还是有更好的就像将它们存储在 MySQL 数据库中一样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T03:26:15.913

将文件存储在文档根目录之外（因此您的服务器默认情况下不会将 URL 映射到它）并使用确认经过身份验证的用户的脚本，然后仅将简历的内容流式传输给该用户。

例如...

```
<?php

session_start();

include 'app.php';

$userAuthenticated = (new Auth)->check($_SESSION['username']);

$file = isset($_GET['file']) ? 
        $_GET['file'] :
        FALSE;

$file = FILES_PATH . DIRECTORY_SEPARATOR . preg_replace('/[^\w.]/', '', $file);

if ($userAuthenticated AND file_exists($file)) {
    readfile($file);
} else {
    header('HTTP/1.1 403 Forbidden');
    echo 'You\'re not authenticated!';
} 
```

这段代码应该给你一个大致的想法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T03:27:22.560

永远不要在 docroot 中允许用户上传的文件。这是非常不安全的，因为您托管的是其他人提供的内容。

绝不允许以用户提供的名称存储用户上传的文件。想象一下，如果有人上传了 somescript.php，您将其命名为这样，并将其保存在您的 docroot 中。它可以由任何人执行。

将文件存储在 docroot 之外，将文件的详细信息（原始名称、mime 类型等）保存在数据库中，并使用脚本、使用`readfile()`或类似方式访问它们。只允许那些应该有权访问的人访问这些文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T03:25:57.743

您可以使用 .htaccess 重写。

在 php 中使用 headers 和 readfile() 函数，更改文件 ID 并将其存储在 mysql 数据库中，然后确保在 .htaccess 中拒绝所有上传目录。

# android - 构建 Android Samsung (Heimdall) 固件文件

> ID：10792716
> 
> 赞同：1
> 
> 时间：2012-05-29T03:23:11.387
> 
> 标签：android, android-source, samsung-mobile, firmware

大多数 android 手机使用 fastboot 来刷新系统和内核映像。

三星 Galaxy S 系列手机不同；有很多组件可以使用名为 Heimdall 的工具进行刷新。

那么所有这些图像/分区是什么？它们如何对应于默认 AOSP 构建中构建的系统映像？

最重要的是：如何从 Android 源代码构建这些？

*   坑
*   工厂FS
*   内核（我得到了这个。）
*   参数文件
*   主引导加载程序
*   辅助引导加载程序
*   缓存
*   数据库缓存
*   调制解调器（我得到了这个。）

这是前端的图片，它至少显示了常见的分区选项。命令行工具中实际上还有更多——没有一个被记录在案。（或者，是吗？）

[http://alexsleat.co.uk/wp-content/uploads/2011/06/Screenshot-1.png](http://alexsleat.co.uk/wp-content/uploads/2011/06/Screenshot-1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T04:16:28.537

对于刷入 Android Phoens/Tablets/Phablets 有一个名为[Odin](http://www.google.co.in/url?q=http://forum.xda-developers.com/attachment.php?attachmentid=581913&d=1304094576&sa=U&ei=gTmXUO_nOYXprQewhYCYCw&ved=0CBwQFjAB&usg=AFQjCNFxuhEbROR6kq5i4IzIl-tpOrCoBA)的工具。文件可以通过两种方式刷入。Option 1 (PIT) : 它是压缩的内核映像文件和 factoryfs.img

或 Option(2) 有以下部分： PDA - 它是 Android 文件系统映像（在 out/product// 文件夹中使用 make 命令编译 Android 目录中的 android 源代码后得到的映像。PDA 通常由sysimage、userdata 和 boot。它是这三个文件的存档文件。有时您必须包含/排除 sign_image 以在商业化产品上闪存。

电话 - 这是调制解调器图像。

CSC - 这是从一个区域到另一个区域的图像（一种区域设置图像），它具有启用语言的配置（对于区域中的特定操作员），并且与其他区域特定设置类似。

您可以在以下位置获得更多信息：[xda 开发者网站](http://forum.xda-developers.com/)

[heimdall](http://www.glassechidna.com.au/products/heimdall/)是一个基本上用于 Linux/Mac 的工具（与在 Windows 上运行的 Odin 不同）。heimdall 有 GUI 和命令行实用程序可用。Heimdall 可能支持也可能不支持大多数 android 手机，并且是开源的。

Rgds，软软的

# local-storage - 显示本地存储中的值

> ID：10792724
> 
> 赞同：2
> 
> 时间：2012-05-29T03:24:44.113
> 
> 标签：local-storage, sencha-touch-2

我在本地存储中保存了某些数据。相同的内容已保存到商店中。我需要的是从本地存储中提取特定项目并显示它。我不知道该怎么做。

例如：

```
model.data.servname = servname;
model.data.port = port;
model.data.protocol = protocol;
model.data.username = username;
model.data.password = password;
model.data.domain = domain;
model.data.apptitle = apptitle;
model.data.appconfig = appconfig;
model.save();

var store = Ext.getStore('configStore'); // Get the store
store.add({servname : 'infoimage'}); // Add an instance of you model item
store.sync(); // Will add the item to the locastorage
var item = store.getAt(0); 
```

我的这部分代码将数据保存到本地存储和存储中。现在，在我的主控制器中：

```
init : function() {
  if (!this.landingoverlay) {
    this.landingoverlay = Ext.Viewport.add({
      xtype : 'landingPageOverlay'
    });
  }
  this.landingoverlay.show();
} 
```

我想显示 apptitle 值。

但

```
console.log(Ext.getCmp('apptitle').getValue()); 
```

不起作用，因为它尚未定义。但是该值存在于本地存储中。我如何访问该值并在此处显示它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T03:53:54.833

要从配置为使用`localstorage`代理的商店获取数据：

```
`Ext.getStore('configStore').load()` 
```

要遍历您的 Store 实例并打印它们：

```
var store = Ext.getStore('configStore').
store.each(function(record){
  console.log(record.get('the_name_of_field_you_want'));
}); 
```

希望这可以帮助。

# vba - 创建图表时的 Excel 变量范围

> ID：10792732
> 
> 赞同：3
> 
> 时间：2012-05-29T03:26:37.020
> 
> 标签：vba, variables, excel, charts

所以基本上我需要能够选择最后一行来使用这种方法创建图表。

```
Sub createchart2()
    lastA = Range("A1").End(xlDown).Row
    ActiveSheet.Shapes.AddChart.Select
    ActiveChart.ChartType = xlLine
    ActiveChart.SetSourceData Source:=Range("Main!$A$3:$A$10")
End Sub 
```

我需要`A10`能够选择 A 列中的最后一行的范围。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T03:33:22.483

这是你正在尝试的吗？

```
Sub createchart2()
    Dim lastA As Long

    lastA = Range("A" & Rows.Count).End(xlUp).Row

    ActiveSheet.Shapes.AddChart.Select
    ActiveChart.ChartType = xlLine

    ActiveChart.SetSourceData Source:=Range("Main!$A$3:$A$" & lastA)
End Sub 
```

# python - Python 词法多样性计算在 Twitter JSON 中读取到一个点然后失败

> ID：10792736
> 
> 赞同：0
> 
> 时间：2012-05-29T03:27:51.760
> 
> 标签：python, json, twitter, lexical-analysis

我编写了一个脚本来计算词汇多样性和一些其他有意义的统计数据。我的问题是，在某些文件上，当它遇到我只能假设是错误的 json 行时它会失败。我的每个数据文件都包含 json 字符串，每个字符串都有自己的行。这些计算有意义的字段是“文本”字段。

我的代码：

```
import fileinput
import json
import sys
import os
from collections import defaultdict

line = []                                                       # set to list
tw = 0                                                          # set total words to int
tuw = 0                                                         # set total unique words to int
lexd = 0                                                        # set total lexical diversity to int
awpt = 0                                                        # set average words per tweet to int
line_counter = 0

inputfilename = sys.argv[1]                                     # read the first system argument as the input file name

word_count = defaultdict(int)                                   # set word_count to the default dictionary

for line in fileinput.input([inputfilename]):                   # FOR each line in the input file
        line = line.strip();                                            # strip any blank lines and throw them out
        if not line: continue                                           # if the file does contain a blank line still: in the case of EOF then continue
        tweettext = json.loads(line).get('text')                        # load the line with json.loads and get the "text" field
        if not json.loads(line).get('text'): continue                   # if the line does not contain json data then continue
        words = tweettext.split()                                       # split the words from the single line into individual dicts
        tw += len(words)                                                # total words counter
        line_counter += 1                                               # total lines counter
        print line_counter                                              # so we know what line we're on
        for word in words:                                              # FOR each word in the individual line "text" corpus
                word_count[word]+=1                                             # Take the word_count dict, insert the words and incriment

tuw = len(set(word_count))                                      # calculate the total number of unique words
lexd += 1.0*tuw/tw                                              # calculate the lexical diversity
awpt = 1.0*tuw/line_counter                                     # calc average number of words per tweet

print word_count                                                # print the word list dictionary
print "total number of words", tw                               # print the total number of words
print "total uniq words", tuw                                   # print the total number of unique words
print "total corpus lexical diversity", lexd                    # print the total lexical diversity of the entire corpus
print "average number of words per tweet", awpt                 # print the average number of words per tweet 
```

样本数据：

```
{"favorited": false, "in_reply_to_user_id": 213741147, "contributors": null, "truncated": false, "text": "@Rafinha_Angelo sim sim, manda o print l\u00e1 HUSAHUS!", "created_at": "Tue Feb 14 00:30:59 +0000 2012", "retweeted": false, "in_reply_to_status_id_str": "169216950453542912", "coordinates": null, "in_reply_to_user_id_str": "213741147", "entities": {"user_mentions": [{"indices": [0, 15], "screen_name": "Rafinha_Angelo", "id": 213741147, "name": "Rafael A. Figueiredo", "id_str": "213741147"}], "hashtags": [], "urls": []}, "in_reply_to_status_id": 169216950453542912, "id_str": "169217034821976067", "in_reply_to_screen_name": "Rafinha_Angelo", "user": {"follow_request_sent": null, "profile_use_background_image": true, "profile_background_image_url_https": "https://si0.twimg.com/images/themes/theme9/bg.gif", "verified": false, "profile_image_url_https": "https://si0.twimg.com/profile_images/1769152407/223_normal.JPG", "profile_sidebar_fill_color": "252429", "is_translator": false, "id": 67115876, "profile_text_color": "666666", "followers_count": 310, "profile_sidebar_border_color": "181A1E", "location": "Somewhere.", "default_profile_image": false, "listed_count": 0, "utc_offset": -10800, "statuses_count": 6027, "description": "it's like one more day, with no more things !", "friends_count": 106, "profile_link_color": "2FC2EF", "profile_image_url": "http://a2.twimg.com/profile_images/1769152407/223_normal.JPG", "notifications": null, "show_all_inline_media": false, "geo_enabled": true, "profile_background_color": "1A1B1F", "id_str": "67115876", "profile_background_image_url": "http://a1.twimg.com/images/themes/theme9/bg.gif", "screen_name": "Guiii_Fernandes", "lang": "en", "profile_background_tile": false, "favourites_count": 112, "name": "Guilherme Fernandes", "url": "http://facebook.com/GuiiFernandes", "created_at": "Wed Aug 19 20:43:05 +0000 2009", "contributors_enabled": false, "time_zone": "Brasilia", "protected": false, "default_profile": false, "following": null}, "place": null, "retweet_count": 0, "geo": null, "id": 169217034821976067, "source": "web"}
{"favorited": false, "in_reply_to_user_id": null, "contributors": null, "retweeted_status": {"favorited": false, "in_reply_to_user_id": null, "contributors": null, "truncated": false, "text": "On the stage in Vegas for the last few days of rehearsal...this is epic! Going to be a huge show. I like! (said in Borat voice). Xoxo, JM", "created_at": "Mon Feb 13 23:27:08 +0000 2012", "retweeted": false, "in_reply_to_status_id_str": null, "coordinates": null, "in_reply_to_user_id_str": null, "entities": {"user_mentions": [], "hashtags": [], "urls": []}, "in_reply_to_status_id": null, "id_str": "169200965151494144", "place": null, "user": {"follow_request_sent": null, "profile_use_background_image": true, "id": 69751644, "description": "", "verified": true, "profile_image_url_https": "https://si0.twimg.com/profile_images/387138234/1_normal.jpg", "profile_sidebar_fill_color": "5c5c5c", "is_translator": false, "geo_enabled": false, "profile_text_color": "333333", "followers_count": 473162, "profile_sidebar_border_color": "00e35f", "id_str": "69751644", "default_profile_image": false, "location": "Los Angeles", "utc_offset": -28800, "statuses_count": 5380, "profile_background_color": "00e35f", "friends_count": 10730, "profile_link_color": "05bcff", "profile_image_url": "http://a0.twimg.com/profile_images/387138234/1_normal.jpg", "notifications": null, "show_all_inline_media": false, "profile_background_image_url_https": "https://si0.twimg.com/profile_background_images/72720138/green.jpg", "profile_background_image_url": "http://a0.twimg.com/profile_background_images/72720138/green.jpg", "screen_name": "jamesmaslow", "lang": "en", "profile_background_tile": false, "favourites_count": 1, "name": "james maslow", "url": "http://www.JamesMaslow.com", "created_at": "Sat Aug 29 01:32:02 +0000 2009", "contributors_enabled": false, "time_zone": "Pacific Time (US & Canada)", "protected": false, "default_profile": false, "following": null, "listed_count": 8348}, "in_reply_to_screen_name": null, "retweet_count": 465, "geo": null, "id": 169200965151494144, "source": "<a href=\"http://www.osfoora.com\" rel=\"nofollow\">Osfoora for iPhone</a>"}, "truncated": true, "text": "RT @jamesmaslow: On the stage in Vegas for the last few days of rehearsal...this is epic! Going to be a huge show. I like! (said in Bora ...", "created_at": "Tue Feb 14 00:30:59 +0000 2012", "retweeted": false, "in_reply_to_status_id_str": null, "coordinates": null, "in_reply_to_user_id_str": null, "entities": {"user_mentions": [{"indices": [3, 15], "id_str": "69751644", "id": 69751644, "name": "james maslow", "screen_name": "jamesmaslow"}], "hashtags": [], "urls": []}, "in_reply_to_status_id": null, "id_str": "169217034817765377", "place": null, "user": {"follow_request_sent": null, "profile_use_background_image": true, "id": 466873377, "description": "Totally dedicate for @1LoganHenderson MINE perfect BTBoy!!!! *--* Rusher for the infinity and beyond and much more beyond!!! Since 01/17/12 =*", "verified": false, "profile_image_url_https": "https://si0.twimg.com/profile_images/1781262618/_20120126_023206_424_normal.gif", "profile_sidebar_fill_color": "940a2d", "is_translator": false, "geo_enabled": false, "profile_text_color": "eb4466", "followers_count": 103, "profile_sidebar_border_color": "d61153", "id_str": "466873377", "default_profile_image": false, "location": "", "utc_offset": -7200, "statuses_count": 3730, "profile_background_color": "070808", "friends_count": 154, "profile_link_color": "de243d", "profile_image_url": "http://a2.twimg.com/profile_images/1781262618/_20120126_023206_424_normal.gif", "notifications": null, "show_all_inline_media": false, "profile_background_image_url_https": "https://si0.twimg.com/profile_background_images/421884815/tumblr_lz7316OE041rnvmm7o1_500.jpg", "profile_background_image_url": "http://a3.twimg.com/profile_background_images/421884815/tumblr_lz7316OE041rnvmm7o1_500.jpg", "screen_name": "Logiehbear", "lang": "en", "profile_background_tile": true, "favourites_count": 209, "name": "BBFFF da Laryh!!", "url": null, "created_at": "Tue Jan 17 21:53:17 +0000 2012", "contributors_enabled": false, "time_zone": "Mid-Atlantic", "protected": false, "default_profile": false, "following": null, "listed_count": 1}, "in_reply_to_screen_name": null, "retweet_count": 465, "geo": null, "id": 169217034817765377, "source": "web"} 
```

脚本输出：

```
1
2
defaultdict(<type 'int'>, {u'be': 1, u'is': 1, u'Going': 1, u'in': 2, u'I': 1, u'(said': 1, u'RT': 1, u'huge': 1, u'for': 1, u'l\xe1': 1, u'few': 1, u'Vegas': 1, u'manda': 1, u'print': 1, u'sim,': 1, u'sim': 1, u'On': 1, u'to': 1, u'like!': 1, u'HUSAHUS!': 1, u'rehearsal...this': 1, u'@jamesmaslow:': 1, u'...': 1, u'epic!': 1, u'stage': 1, u'a': 1, u'show.': 1, u'last': 1, u'of': 1, u'days': 1, u'o': 1, u'@Rafinha_Angelo': 1, u'the': 2, u'Bora': 1})
total number of words 36
total uniq words 34
total corpus lexical diversity 0.944444444444
average number of words per tweet 17.0 
```

这实际上运行得非常快，但是在我的一些数据集上，在几千行之后它会失败：

```
Traceback (most recent call last):
  File "lex.py", line 21, in <module>
    tweettext = json.loads(line).get('text')                        # load the line with json.loads and get the "text" field
  File "/usr/lib64/python2.7/json/__init__.py", line 326, in loads
    return _default_decoder.decode(s)
  File "/usr/lib64/python2.7/json/decoder.py", line 366, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "/usr/lib64/python2.7/json/decoder.py", line 382, in raw_decode
    obj, end = self.scan_once(s, idx)
ValueError: Unterminated string starting at: line 1 column 1531 (char 1531) 
```

如果脚本挂断了它正在读取的行的格式，那么我想跳过该行并继续前进。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T05:52:05.747

我已经使用 Jesse Harris 的解决方案解决了这个问题，如果 json.loads 出现错误，则包含异常。

```
import fileinput
import json
import sys
import os
from collections import defaultdict

line = []                                                     
tw = 0                                                        
tuw = 0                                                        
lexd = 0                                                       
awpt = 0                                                       
line_counter = 0

inputfilename = sys.argv[1]                                   

word_count = defaultdict(int)                                 

for line in fileinput.input([inputfilename]):                  
        line = line.strip();                                            
        if not line: continue   
        try:         
               tweettext = json.loads(line).get('text')                       
               if not json.loads(line).get('text'): continue                   
               words = tweettext.split()                                       
               tw += len(words)                                                
               line_counter += 1                                               
               print line_counter                                              
               for word in words:                                              
                      word_count[word]+=1                                             
        except:
               print "Problem Line: " + line

tuw = len(set(word_count))                                      
lexd += 1.0*tuw/tw                                             
awpt = 1.0*tuw/line_counter                                     

# print word_count                                               
print "total number of words", tw                              
print "total uniq words", tuw                                  
print "total corpus lexical diversity", lexd                   
print "average number of words per tweet", awpt 
```

When I ran this against my data it resulted in the print out of a gzip'd line of data. As I mentioned in my previous comment this was due to switching to the gzip streaming API from twitter. Two thumbs up to @jesseharris

# vba - 查找并将项目符号列表替换为 html 样式

> ID：10792737
> 
> 赞同：4
> 
> 时间：2012-05-29T03:28:10.270
> 
> 标签：vba, macos, replace, vbscript, ms-word

我想查找项目符号列表的实例，以替换为 html 标记列表。请参阅下面的示例：

**my_doc.docx** ...

```
text,text,text
My bullet list:
   • List point one
   • List point two
Some more text here. 
```

...

查找和替换导致

...

```
text,text,text
My bullet list:
<ul>
<li>List point one</li>
<li>List point two</li>
</ul>
Some more text here. 
```

...

我试过`find and replace`子弹字符；不起作用，因为它正在格式化。还尝试`find and replace`了具有“列表项目符号”样式的行以及我能找到的任何其他列表样式；不起作用，（可能是因为我使用的 Word for Mac 看起来有问题）

编辑：我有以下 VBScript 可以在我的文档中找到具有项目符号样式的行。我现在需要这个脚本来重写它找到的最后带有 <li> 标记的行。

```
Sub FindBullet()
Dim oPara As Word.Paragraph
Dim count As Integer

count = 0
Selection.WholeStory
With Selection
    For Each oPara In .Paragraphs
    If oPara.Range.ListFormat.ListType = _
    WdListType.wdListBullet Then

          count = count + 1

            # from here down it gets shaky!!!

            With ActiveDocument.Range.Find
              .Text = #How do i convert the oPara to a string here?!?
              .Forward = True
              .Wrap = wdFindContinue
              .Format = False
              .MatchCase = True
              .MatchWholeWord = False
              .MatchWildcards = False
              .MatchSoundsLike = False
              .MatchAllWordForms = False

              .ClearFormatting
              With .replacement
                .ClearFormatting
                .Text = # how do i specify this is where i want the "<li>" & oPara & "</li>"
              End With
              .Execute Replace:=wdReplaceAll

        End If
    Next
End With
'Gives you the count of bullets in a document
MsgBox count & " replacements"
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T20:19:19.213

您可以使用（**InsertBefore**和**InsertAfter**）在段落中插入文本。这适用于 Word Mac。

```
Sub FindBullet()
Dim count As Integer
count = 0
Set myStyle = ActiveDocument.Styles("Body text") ' replacement style
bulletList = WdListType.wdListBullet

 ' each list instead of each paragraph of the document
For Each thisList In ActiveDocument.Lists
      For Each p In thisList.ListParagraphs
           If p.Range.ListFormat.ListType = bulletList Then
                p.Style = myStyle ' change the style to "Body text" 
                p.Range.InsertBefore ("<li>")
                Set aRange = p.Range
                aRange.End = aRange.End - 1
                aRange.InsertAfter ("</li>")
                count = count + 1
            End If
      Next
Next
MsgBox count & " replacements"
End Sub 
```

# java - 滚动多次时出现 OutOfMemoryException

> ID：10792738
> 
> 赞同：1
> 
> 时间：2012-05-29T03:28:15.723
> 
> 标签：java, android

我在 gridview 滚动中遇到问题。我制作了一个自定义网格视图并在原始文件中插入小部件并通过视图膨胀它们。我得到了正确的结果和正确的数据，一切都很顺利，但是当我快速向下滚动 gridview 3-4 次时，它会引发`OutOfMemoryException`.

此应用程序包含已安装应用程序列表和图标列表

这是我的客户适配器的代码：

```
 package com.AppFavorits;

import java.util.ArrayList;

import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.drawable.BitmapDrawable;
import android.graphics.drawable.Drawable;
import android.os.AsyncTask;
import android.view.Gravity;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.view.ViewGroup.LayoutParams;
import android.widget.BaseAdapter;
import android.widget.CheckBox;
import android.widget.ImageView;
import android.widget.RelativeLayout;
import android.widget.TextView;

import com.AppFavorits.ImageLoad.ImageLoader;

public class GridViewAdapter extends BaseAdapter {
    private Context activit;
    LayoutInflater inflator;
    public RelativeLayout imgvGridItem;
    public TextView txtGridItemlabel;
    public CheckBox chkbxGridItem;
     ArrayList<PInfo> lstpinfo = new ArrayList<PInfo>();
     public ImageLoader imageLoader; 
     public GridViewAdapter(Context m1, ArrayList<PInfo> lstpinfo) {

            activit = m1;
            inflator = LayoutInflater.from(m1);
            this.lstpinfo = lstpinfo;
              imageLoader=new ImageLoader(m1.getApplicationContext());

        }

    public static class ViewHolder {

    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        ViewHolder view;
        // LayoutInflater inflator = activit.getLayoutInflater();

        view = new ViewHolder();
        convertView = inflator.inflate(R.layout.gridviewrow, null);

        imgvGridItem = (RelativeLayout) convertView
                .findViewById(R.id.rlGreidItemicon);
        txtGridItemlabel = (TextView) convertView
                .findViewById(R.id.txtGridItemlabel);
        chkbxGridItem = (CheckBox) convertView
                .findViewWithTag(R.id.chkbxGridItem);
        if ((lstpinfo.get(position).appname.toString()) != null){
            Drawable d = lstpinfo.get(position).icon;  
            //new ImageLoad().execute();

            imgvGridItem.addView(getimageviewimage(lstpinfo.get(position).icon));
            txtGridItemlabel.setText(lstpinfo.get(position).appname.toString());

            // convertView.setTag(view);
        }

        return convertView;

    }

    @Override
    public int getCount() {
        return lstpinfo.size();
    }

    @Override
    public Object getItem(int position) {
        return lstpinfo.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    public RelativeLayout getimageviewimage(Drawable d) {
        RelativeLayout seprator = new RelativeLayout(activit);
        seprator.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
                LayoutParams.WRAP_CONTENT));
        seprator.setGravity(Gravity.LEFT | Gravity.CENTER);

        ImageView imgmap = new ImageView(activit);
        imgmap.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
                LayoutParams.WRAP_CONTENT));
        // imgmap.setBackgroundResource(R.drawable.a13);
        Bitmap bitmap = ((BitmapDrawable)d).getBitmap();
        imageLoader.DisplayImage(bitmap, imgmap);

        //imgmap.setImageBitmap(bitmap);
        seprator.setPadding(5, 5, 15, 5);
        seprator.addView(imgmap);

        return seprator;

    }
     private class ImageLoad extends AsyncTask<Void, Void, Void> {
           // private final ProgressDialog dialog = new ProgressDialog(tranning.this);
            protected void onPreExecute() {
            //  this.dialog.setMessage("Please Wait...");
             // this.dialog.show();
              // put your code which preload with processDialog  
            }
              @Override
              protected Void doInBackground(Void... arg0) {
                   // put your code here
                   return null;
              }

             @Override
             protected void onPostExecute(final Void unused) {
                /*if (this.dialog.isShowing()) {
                this.dialog.dismiss();
             }   */
          }
      }
} 
```

我认为有什么问题`getview`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T04:05:48.053

在 getView() 中，您不是重用 convertView，而是总是用充气机充气新的。这需要更多内存并使您的代码变慢。另外，请检查您是否没有使用 imageLoader 泄漏图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T05:18:41.297

从以下链接下载代码并使用gridview而不是listview

[延迟加载示例](https://github.com/thest1/LazyList)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T03:46:35.033

`out of memory`通常意味着没有足够的内存来加载文件。尝试关闭其他所有应用程序（或至少几个其他应用程序）并重试。

# php - 生成密码 PHP, MySQL

> ID：10792741
> 
> 赞同：1
> 
> 时间：2012-05-29T03:28:43.710
> 
> 标签：php, mysql, passwords, md5, generator

我试图创建一个 PHP 页面来生成密码并使用数据库上的新密码更新记录。数据库上有两个表我必须检查用户是否存在，我不确定更新字段所需的 MySQL。这是我到目前为止所拥有的：

```
if (isset($_POST['rest'])) {

        if (empty($_POST['email'])) { 
        echo "<h2 class='output'>You did not enter an email address</h2>"; 
        } 
        else{ 
        $email = $_POST['email'];   

        mysql_select_db($database_localhost,$localhost) or die ("Couldn't select the database."); 

        $result1=mysql_query("SELECT * FROM student WHERE email='$email'"); 
        $result2=mysql_query("SELECT * FROM admin WHERE email='$email'");

        $rowCheck1 = mysql_num_rows($result1);
        $rowCheck2 = mysql_num_rows($result2); 
        if(($rowCheck1 > 0) || ($rowCheck2 > 0)){ 

        $newPass = md5( random_gen(8));
        mysql_query("INSERT INTO admin, student (password) VALUES (".$newPass.") WHERE email="$email"");

}} 
```

任何帮助将不胜感激谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T03:43:34.680

您应该使用[sql update 语句](http://www.w3schools.com/sql/sql_update.asp)。insert 语句将向学生表和管理员表添加一个新行。

所以你的代码应该是这样的：

```
if (isset($_POST['rest'])) {

    if (empty($_POST['email'])) { 
        echo "<h2 class='output'>You did not enter an email address</h2>"; 
    } 
    else{ 
        $email = $_POST['email'];   

        mysql_select_db($database_localhost,$localhost) or die ("Couldn't select the database."); 

        $result1=mysql_query("SELECT * FROM student WHERE email='$email'"); 
        $result2=mysql_query("SELECT * FROM admin WHERE email='$email'");

        $rowCheck1 = mysql_num_rows($result1);
        $rowCheck2 = mysql_num_rows($result2); 
        if(($rowCheck1 > 0) || ($rowCheck2 > 0)){ 

            $newPass = md5( random_gen(8))
            mysql_query("UPDATE admin SET password = '$newPass' WHERE email='$email'");
            mysql_query("UPDATE student SET password = '$newPass' WHERE email='$email'");

    }
} 
```

}

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2012-05-29T03:34:28.373

不要在 mysql 表中插入新行，而是使用“更新”。

```
mysql_query("UPDATE `admin`,`student` (`password`) VALUES ('$newPass') WHERE `email` = '$email'"); 
```

另外，加了一些标点符号。

编辑：感谢@zi42 提醒我，通常不再使用 MD5 是一个好主意。更好用的是[hash_hmac](http://php.net/manual/en/function.hash-hmac.php "hash_hmac php.net")和 "sha256" 哈希。

# vb.net - VB.NET 中等效的 QueryClose 表单事件

> ID：10792742
> 
> 赞同：2
> 
> 时间：2012-05-29T03:29:13.923
> 
> 标签：vb.net, winforms, vb6, vb6-migration

我正在迁移一个 VB6 应用程序，它有一个触发[`QueryClose`](http://msdn.microsoft.com/en-us/library/aa445535%28v=vs.60%29.aspx)表单事件的子例程。据我所知，这个事件不再存在于[`System.Windows.Forms`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.formclosing.aspx).

我使用断点进行了测试，`QueryClose`当您单击 VB6 表单右上角的红色“X”时会触发，就像[`FormClosing`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.formclosing.aspx)在 VB.NET 表单中应该执行的事件一样。

我的问题是：是否`FormClosing`具有最接近的等效功能`QueryClose`，或者我应该使用不同的事件？

```
Private Sub UserForm_QueryClose(ByRef Cancel As Integer, ByRef CloseMode As Integer)
    writeToLog()
    writeRecentFoldersToFile(myTempFilePath & "Recent Folders.txt")
    writePageSetupDefaultsToFile(myTempFilePath & "Page Setup.txt")
    writeFormPositionToFile(myTempFilePath & "Form Position.txt")
    userformKillTimer(Me, Me.Text)
End Sub 
```

*这段代码最初是 VBA / VB6，我通过 ArtinSoft 的 Visual Basic Upgrade Companion (VBUC) 完成的。VBUC 显然不认为存在等效事件，或者没有足够聪明来进行这种转换。FWIW，我正在使用 Microsoft Visual Basic 2010 Express。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T04:10:59.707

我会说使用 FormClosing 它是最接近你习惯的东西。引发 MessageBox 以提示是否有需要清理的内容，然后相应地继续或中止关闭。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T04:22:27.363

我会把你的代码放在 FormClosed()

您的代码不允许用户取消表单关闭，它所做的只是保存一些数据。

# php - 加入另一个表，字段可能有新值

> ID：10792743
> 
> 赞同：1
> 
> 时间：2012-05-29T03:29:19.227
> 
> 标签：php, mysql

下面的查询效果很好。它从表格“提交”中提取邮政编码，将它们分组，然后按顺序列出它们。

我有另一个名为“地址”的表，其中也有邮政编码，它可能与“提交”中的邮政编码重复，也可能不重复。

如何加入出现在“地址”（第二个表）中但未出现在第一个表中的任何邮政编码，并将它们添加到由下面的查询创建的列表中？

```
$query2 = "SELECT submissionid, zip
FROM submission
GROUP BY zip
ORDER BY zip ASC"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T03:47:00.583

你需要联合词，你不能使用submissionid

```
select zip from submission
union
select zip from addresses 
```

union 默认情况下会给你不同的值。如果您需要 id，您可以对结果查询执行类似的操作以选择特定的：

[MySQL：避免选择具有相同用户 ID 的列](https://stackoverflow.com/questions/10792703/mysql-avoid-selecting-columns-with-the-same-userid)

这个使用一组相同拉链的最低 id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T03:59:10.577

你也可以从另一个表中伪造一个 id，因为它没有提交id

```
select * from (
    select submissionid, zip from submission
    union
    select -1, zip from addresses
    )
order by zip asc 
```

地址表中的所有邮政编码都将具有 -1 而不是 id。

# cloud-foundry - 致命：Net::HTTPServerException: remote_file[/var/vcap/services/neo4j/neo4j-hosting-extension.jar]

> ID：10792745
> 
> 赞同：1
> 
> 时间：2012-05-29T03:29:55.423
> 
> 标签：cloud-foundry

执行 'bash <<(curl -s -k -B [https://raw.github.com/cloudfoundry/vcap/master/dev_setup/bin/vcap_dev_setup](https://raw.github.com/cloudfoundry/vcap/master/dev_setup/bin/vcap_dev_setup) )' 安装 cloudfoundry 时，出现此错误：

```
[Tue, 29 May 2012 10:40:28 +0800] ERROR: Running exception handlers
[Tue, 29 May 2012 10:40:28 +0800] ERROR: Exception handlers complete
[Tue, 29 May 2012 10:40:28 +0800] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
[Tue, 29 May 2012 10:40:28 +0800] FATAL: Net::HTTPServerException: remote_file[/var/vcap/services/neo4j/neo4j-hosting-extension.jar] (neo4j::default line 22) had an error: Net::HTTPServerException: 403 "Forbidden" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T23:11:37.177

按照 https://cloudfoundry.atlassian.net/browse/CF-48 上的错误并在[https://groups.google.com/a/cloudfoundry.org/d/topic/vcap-dev/-F0y8QIVhAA](https://groups.google.com/a/cloudfoundry.org/d/topic/vcap-dev/-F0y8QIVhAA/discussion)[上](https://cloudfoundry.atlassian.net/browse/CF-48)查看解决方法[/讨论](https://groups.google.com/a/cloudfoundry.org/d/topic/vcap-dev/-F0y8QIVhAA/discussion)

# sql - 在日期上使用检查约束

> ID：10792746
> 
> 赞同：0
> 
> 时间：2012-05-29T03:29:58.167
> 
> 标签：sql

我想确保一个人的出生日期必须小于当前日期。所以我在表格中声明：

```
 staff_dob SMALLDATETIME NOT NULL CHECK (GETDATE() < staff_dob) 
```

但是当我不断与检查约束发生冲突时。我该如何解决？我是否需要将 GETDATE() 格式化为我使用的正确格式？我不确定该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T03:47:24.587

试试这个代码：

```
drop table test

create table test
(staff_dob datetime check (staff_dob < getdate()))

--this insert will fail

insert test
(staff_dob)
values
('1/1/2013')

--this insert will succeed

insert test
(staff_dob)
values
('1/1/2011') 
```

我认为您的支票比较方向错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T04:06:54.910

看看[创建和修改 CHECK 约束](http://msdn.microsoft.com/en-us/library/ms179491%28v=sql.105%29.aspx)

```
CREATE TABLE [dbo].[Staff](
        [staffid] [int] NULL,
        [dob] [date] NULL
    ) ON [PRIMARY]

    GO

    ALTER TABLE [dbo].[Staff]  WITH CHECK ADD  CONSTRAINT [CK_Staff] CHECK  (([dob]<getdate()))
    GO

    ALTER TABLE [dbo].[Staff] CHECK CONSTRAINT [CK_Staff]
    GO 
```

希望这可以帮助

# python - 有没有办法让 Fabric 跨多个主机汇总结果？

> ID：10792748
> 
> 赞同：5
> 
> 时间：2012-05-29T03:30:24.007
> 
> 标签：python, fabric

当我使用 Fabric 管理数十台服务器时，我通常不关心在每台服务器上运行的命令的细节，而是想整理来自每台主机的少量信息，并在最后进行总结。

Fabric 本身是否支持此功能？（我搜索了文档无济于事，但也许我错过了一些东西）。

否则我想可以手动聚合这些信息，然后添加一个退出处理程序，但这感觉像是一个常见的用例。

例如，我有一些脚本可以在多个服务器上进行一些基本的安全检查，我想在最后创建一个报告，而不是滚动浏览每个服务器的输出。我不想限制 Fabric 的输出，因为如果有问题我想回滚以查明它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-17T22:51:27.317

现在，这可能有点过时了，自从您提出这个问题以来，Fabric 肯定已经发展了很多……但是，正如 Morgan 所说，您基本上只需要一个包装脚本来包含主力，然后它就是来自的“只是 Python”那里。这在[执行模型](http://docs.fabfile.org/en/latest/usage/execution.html#leveraging-execute-to-access-multi-host-results)文档中有简要说明。

例如，您可能会想到包装“正常运行时间”之类的一种方式（尽管显然，这可能会变得更加复杂）：

```
@parallel
def _get_uptime():
  '''Retrieve and return uptime for each host'''
  with hide('stdout'):
    up = run( 'uptime' )
  return( up.rstrip() )

@runs_once
def uptime_sorted():
  '''System: System uptime (sorted) - Use parallel for best effect'''
  print( cyan( "[%(host)s] Executing on %(host)s as %(user)s" % env ) )
  system_uptimes = execute( _get_uptime )
  for sys,up in sorted( system_uptimes.iteritems() ):
    print "%s: %s" % ( sys, up ) 
```

这使 uptime_sorted 成为您的入口任务。_get_uptime 完成所有获取数据并返回数据的工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T22:09:44.453

它只是 python，所以你可以打印任何你想要的东西，也可以制作你自己的装饰器来包装任务并将其吐出。就目前而言，尽管核心或贡献中没有任何东西可以做到这一点。

# python - 解决 Gunicorn 下 Flask 的 TemplateNotFound 错误

> ID：10792755
> 
> 赞同：13
> 
> 时间：2012-05-29T03:31:42.730
> 
> 标签：python, nginx, installation, flask, gunicorn

我有一个尝试使用 Gunicorn 和 nginx 部署的 Flask 应用程序。然而，虽然它在本地运行良好，但当我在远程服务器上使用 Gunicorn 运行时，它会引发 TemplateNotFound 错误。

我什至不知道如何开始调试它，更不用说它为什么会失败......如果不是后者，我会喜欢前者的帮助。我认为这可能是权限问题，所以将模板文件夹更改为 777 ......不走运。这是所有相关的细节：

## 安装脚本

从一个裸 Ubuntu 10.04 安装开始，我运行它来设置服务器并拉入我的代码：[https](https://github.com/total-impact/total-impact-deploy/blob/master/deploy.sh) ://github.com/total-impact/total-impact-deploy/blob/master/deploy.sh 。然后我把这个 nginx 配置文件放在 /etc/nginx/sites-available/total-impact：

```
server {
    location / {
        proxy_pass http://127.0.0.1:8000;
    }
} 
```

最后，我浏览应用程序目录并运行`gunicorn web:app`，然后点击服务器的 IP 地址。这会在浏览器中生成 500，并在命令行上输出：

## 堆栈跟踪：

```
root@jc:/home/ti/total-impact-webapp/totalimpactwebapp# gunicorn web:app2012-05-28 23:15:06 [15313] [INFO] Starting gunicorn 0.14.3
2012-05-28 23:15:06 [15313] [INFO] Listening at: http://127.0.0.1:8000 (15313)
2012-05-28 23:15:06 [15313] [INFO] Using worker: sync
2012-05-28 23:15:06 [15316] [INFO] Booting worker with pid: 15316
2012-05-28 23:15:12,274 - totalimpactwebapp.core - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "/usr/local/lib/python2.6/dist-packages/flask/app.py", line 1292, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/local/lib/python2.6/dist-packages/flask/app.py", line 1062, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/local/lib/python2.6/dist-packages/flask/app.py", line 1060, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/local/lib/python2.6/dist-packages/flask/app.py", line 1047, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/home/ti/total-impact-webapp/totalimpactwebapp/web.py", line 60, in home
    return render_template('index.html', commits=False)
  File "/usr/local/lib/python2.6/dist-packages/flask/templating.py", line 120, in render_template
    return _render(ctx.app.jinja_env.get_template(template_name),
  File "/usr/local/lib/python2.6/dist-packages/jinja2/environment.py", line 719, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/usr/local/lib/python2.6/dist-packages/jinja2/environment.py", line 693, in _load_template
    template = self.loader.load(self, name, globals)
  File "/usr/local/lib/python2.6/dist-packages/jinja2/loaders.py", line 115, in load source, filename, uptodate = self.get_source(environment, name)
  File "/usr/local/lib/python2.6/dist-packages/flask/templating.py", line 61, in get_source
    raise TemplateNotFound(template)
TemplateNotFound: index.html 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-15T16:57:18.103

您的模板在 [app root]/templates/ 中吗？

如果是这样，请检查以确保您的路径正确。将此作为处理您的主页的视图中的第一行：

```
return app.root_path 
```

如果这是您希望看到的 - 或者如果您正在使用蓝图或其他以某种方式更改默认 Jinja 环境的方法 - 它会稍微复杂一些。

奇怪的是，Jinja 似乎没有 jinja2.Environment.FileSystemLoader.get_search_path() 方法。我以为它会有一个:(

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-30T17:25:01.640

今天，在我的 Flask 应用程序运行很长一段时间后，我遇到了同样的问题（即没有抛出 TemplateNotFound 异常）。这里其他人提到的方法都没有达到目标或似乎合适（例如`app.debug`，路径操作）。

相反，我将其追踪到标准的 Flask 应用程序初始化行：

```
app = Flask(__name__) 
```

我已更改`__name__`为另一个值（以访问命名记录器），没想到所有这些大屠杀都会展开 :-) 除非您非常熟悉 Flask 内部结构，否则不要更改此值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T21:40:10.527

我刚刚在非常相似的情况下花了 2 个小时，并认为我会发布最终成为解决方案的内容。

我突然从我的 Flask 应用程序的 Apache 日志中收到 TemplateNotFound 错误，在生产中，在此之前一直运行良好。这导致整个站点出现 500 个错误。

第一个问题是 TemplateNotFound 错误没有显示，除非我打开了 Flask 的“调试”标志——尽管 LogLevel 设置为 .Apache 日志中根本没有任何问题的迹象`info`。

“本地”运行应用程序（Flask 监听`localhost:5000`）很好（可以通过 测试页面`wget 127.0.0.0:5000`）。事实证明，主 Web 应用程序 python 代码的副本不知何故落在了它应该在上面的目录中。这是首先由 wsgi 导入的，因此模板的相对路径不正确。

# matlab - 如何在没有 LU 且没有旋转的情况下在 Matlab 中求解线性方程组？

> ID：10792756
> 
> 赞同：1
> 
> 时间：2012-05-29T03:32:10.897
> 
> 标签：matlab, math, linear-algebra

我为 LU 分解、部分旋转和全旋转编写了代码。现在，我想找到方程的“真正”解`A*x = b`。真正的解决方案是不使用 pivoting (partial/full) ，也不使用 LU factorization 。

我怎样才能在 matlab 中做到这一点？我想它应该是一个保存的单词，但不是`linsolve`，因为它使用`LU factorization with partial pivoting when A is square and QR factorization with column pivoting otherwise`.

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T03:39:21.220

是`A`可逆的吗？

如果是这样，那么

```
x= A\b; %This is preferred to x=inv(A)*B; 
```

应该做的伎俩。如果`A`是单数，您可以使用该`svd()`命令找到它的伪逆。

# c++ - 将 const int 转换为指针？

> ID：10792757
> 
> 赞同：0
> 
> 时间：2012-05-29T03:32:14.003
> 
> 标签：c++, pointers, casting

> **可能重复：**
> [通过非常量指针修改 const](https://stackoverflow.com/questions/2508605/modifying-a-const-through-a-non-const-pointer)

我有以下代码：

```
const int x = 5;
int *p = (int*)&x;

*p = 2; // Line 1

cout << x << " - " << *p << endl;
cout << &x << " - " << p << endl; 
```

并得到了结果：

```
5 - 2
0012FF28 - 0012FF28 
```

我知道代码很奇怪，永远不应该这样做。但我想知道为什么相同的地址却得到不同的结果？`Line 1`2号店在哪里？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-29T03:34:06.673

因为无论如何更改固有`const`变量的值都是**未定义的行为**^([Ref #1])。

一旦你做了：

```
*p = 2; // Line 1 
```

所有的赌注都没有了，您的代码不再是有效的 C++ 代码，一旦编写了该行，您就不能期望任何特定的行为。推测为什么 Undefined Behavior 给出任何特定行为是没有意义的，因为它允许显示*任何*行为^([Ref #2])，这就是*Undefined Behavior*的含义。

* * *

^([参考 #1])
**C++03 标准 7.1.5.1 cv 限定符：**
**第 4 段：**

> 除了可以修改任何声明为 mutable (7.1.1) 的类成员外，任何在 const 对象的生命周期 (3.8) 期间修改它的尝试都会导致未定义的行为。

^([参考 #2])
**C++03 标准 1.3.24：**

> 允许的未定义行为的范围从完全忽略具有不可预测结果的情况，到在翻译或程序执行期间以环境特征的记录方式表现（有或没有发出诊断消息），到终止翻译或执行（发出的诊断消息）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T03:38:43.560

声明某事`const`使编译器允许假定该值不会改变。这意味着他们可以使用“立即”指令来加载值`5`，而不是引用分配给的位置（如果有的话）`x`。

此外，修改 a`const`违反了您向编译器提供的保证，即该“变量”不会被修改，并且可能产生各种意外行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T03:41:35.587

while some compilers do allocate an address for const values, it is a big no-no to access it. the reason you get 5-2 is because the compiler is replacing x directly with 5, even though you modified the address where x would have been given an address if it were not const and unless you access x's value through p* you are going to get 5 every time no matter what you do - also, p* may yield an undefined value since the getting the address of a const may actually fail with some compilers (and i think it should with all of them, personally)

# css - 让孩子自动展开一个水平滚动的 div

> ID：10792758
> 
> 赞同：1
> 
> 时间：2012-05-29T03:32:24.377
> 
> 标签：css, html

[我在这里](http://jsfiddle.net/seB5F/375/)有我想要的，但是我必须手动输入宽度。我想要一个父容器来保存包含子 div 的可拉伸 div。父容器是固定大小的。我需要可拉伸的 div 足够大以水平包含子 div。将可拉伸 div 设置为自动宽度不起作用，我不想手动设置大小。除了手动设置大小还有其他选择吗？

```
#parent{
    width:50%;
    height:200px;
    background:red;
    overflow-x: scroll;
    overflow-y: hidden;
}

#stretchable-div{
    background:darkblue;
    /* width: 600px; works but don't want to manually size*/
    width: auto;
}

.child {
   background:blue;
   width: 100px;
   height: 150px;
   float:left;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T03:55:41.570

如果你需要使可伸缩的 div 自动宽度，它必须由它的孩子决定。这与孩子的浮动属性冲突（浮动行为由它的父宽度决定）。所以你必须改变父母的宽度或孩子的浮动。

我可以使用**display: inline-block**和**nowrap**属性将孩子放在一行中。但是你必须在 IE7 下破解 inline-block。例子在[这里](http://jsfiddle.net/seB5F/378/)。

目前找不到一个很好的解决方案。只是给它一个提示。

# php - Visual Basic - 将文件上传到 PHP 网页

> ID：10792777
> 
> 赞同：0
> 
> 时间：2012-05-29T03:35:40.087
> 
> 标签：php, vb.net, visual-studio-2010

我正在尝试将图像文件上传到 Web 服务器上的 PHP 文件。

在 VB.NET 上 ->

```
My.Computer.Network.UploadFile(tempImageLocation, "website.com/upload.php") 
```

tempImageLocation 是图像所在的硬盘驱动器上的位置。该图像**位于**我指定它的硬盘驱动器上。

在 PHP 上 ->

```
$image = $_FILES['uploads']['name']; 
```

我不明白，因为它正在加载页面 - 但 PHP 在“上传”下找不到文件

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-01T07:43:16.230

当我搜索相同的问题时，谷歌把我带到了这里。感谢人们，它给了我这个想法，并且对 PHP 有一点了解，我已经实现了。我知道这是一个老问题，但我仍然会分享我的代码，以便将来可以帮助人们......

VB：

```
My.Computer.Network.UploadFile("e:\file1.jpg", "http://www.mysite.com/upl/upl.php") 
```

PHP：

```
move_uploaded_file($_FILES["file"]["tmp_name"], "upload/" . $_FILES["file"]["name"]); 
```

并且不要忘记给上传文件夹适当的权限。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-10-06T21:25:25.703

我知道，是旧的.. 但这里是我的解决方案工作：

```
 Private Sub HttpUploadFile(
ByVal uri As String,
ByVal filePath As String,
ByVal fileParameterName As String,
ByVal contentType As String)

    Dim myFile As New FileInfo(filePath)
    Dim sizeInBytes As Long = myFile.Length

    Dim boundary As String = "---------------------------" & DateTime.Now.Ticks.ToString("x")
    Dim newLine As String = System.Environment.NewLine
    Dim boundaryBytes As Byte() = Encoding.ASCII.GetBytes(newLine & "--" & boundary & newLine)
    Dim request As Net.HttpWebRequest = Net.WebRequest.Create(uri)
    request.ContentType = "multipart/form-data; boundary=" & boundary
    request.Method = "POST"
    request.KeepAlive = True
    'request.Credentials = Net.CredentialCache.DefaultCredentials

    Using requestStream As IO.Stream = request.GetRequestStream()
        Dim formDataTemplate As String = "Content-Disposition: form-data; name=""{0}""{1}{1}{2}"
        requestStream.Write(boundaryBytes, 0, boundaryBytes.Length)

        Dim headerTemplate As String = "Content-Disposition: form-data; name=""{0}""; filename=""{1}""{2}Content-Type: {3};"
        Dim header As String = String.Format(headerTemplate, fileParameterName, filePath, newLine, contentType)
        header = header & vbNewLine & "Content-Length: " & sizeInBytes.ToString & vbNewLine
        header = header & "Expect: 100-continue" & vbNewLine & vbNewLine

        'MsgBox(header)
        Debug.Print(header)

        Dim headerBytes As Byte() = Encoding.UTF8.GetBytes(header)
        requestStream.Write(headerBytes, 0, header.Length)

        Using fileStream As New IO.FileStream(filePath, IO.FileMode.Open, IO.FileAccess.Read)
            Dim buffer(4096) As Byte
            Dim bytesRead As Int32 = fileStream.Read(buffer, 0, buffer.Length)
            Do While (bytesRead > 0)
                requestStream.Write(buffer, 0, bytesRead)
                bytesRead = fileStream.Read(buffer, 0, buffer.Length)
            Loop
        End Using
        Dim trailer As Byte() = Encoding.ASCII.GetBytes(newLine & "--" + boundary + "--" & newLine)
        requestStream.Write(trailer, 0, trailer.Length)
        requestStream.Close()
    End Using

    Dim response As Net.WebResponse = Nothing
    Try
        response = request.GetResponse()
        Using responseStream As IO.Stream = response.GetResponseStream()
            Using responseReader As New IO.StreamReader(responseStream)
                Dim responseText = responseReader.ReadToEnd()
                Debug.Print(responseText)
            End Using
        End Using
    Catch exception As Net.WebException
        response = exception.Response
        If (response IsNot Nothing) Then
            Using reader As New IO.StreamReader(response.GetResponseStream())
                Dim responseText = reader.ReadToEnd()
                Diagnostics.Debug.Write(responseText)
            End Using
            response.Close()
        End If
    Finally
        request = Nothing
    End Try
End Sub 
```

使用：

```
HttpUploadFile("https://www.yousite.com/ws/upload.php?option1=sss&options2=12121", FULL_FILE_NAME_PATH_IN_YOUR_PC, "files", "multipart/form-data") 
```

我在一个我不记得的网站上复制了一些代码。我只使用了这 2 行代码：

header = header & vbNewLine & "Content-Length: " & sizeInBytes.ToString & vbNewLine header = header & vbNewLine & "Expect: 100-continue" & vbNewLine

希望有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-15T13:05:18.120

**这是使用Visual Basic**和服务器端**PHP (Rest API)** [**GitHub 链接**](https://github.com/MuhammadUsman722/File-Uploading-using-VB-PHP)上传文件的完整示例[](https://github.com/MuhammadUsman722/File-Uploading-using-VB-PHP)

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T03:43:24.810

这是给你的快速而肮脏的教程：[PHP文件上传](http://www.w3schools.com/php/php_file_upload.asp)

“上传”只是表单元素的名称属性值：

`<input type="file" name="uploads" />`

或者换句话说，这是通过 $_FILES 全局访问的 POST 变量名。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-29T04:01:35.287

如果不设置字段名，可以用这个保存上传的文件

```
$file = array_shift($_FILES);
move_uploaded_file($file['tmp_name'], '/path/to/new/location/'.$file['name']); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-29T04:05:21.837

看看[其他](https://stackoverflow.com/a/10631355/288357)[一些](https://stackoverflow.com/a/981894/288357) 答案。PHP 要求使用 POST 方法上传的文件使用[某些标题](http://us3.php.net/manual/en/features.file-upload.post-method.php)，这些标题通常在从 Web 表单上传时由浏览器设置，但可以在 VB 中使用[HttpWebRequest 类](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx)进行设置。

至于 PHP 方面，您将无法在使用`$image = $_FILES['uploads']['name'];`. `$_FILES['uploads']['tmp_name']`PHP 使用可通过变量访问的临时文件名存储上传，使用`move_uploaded_file()`是将上传从临时存储转移到永久上传目录的标准方法。[PHP 手册](http://us3.php.net/manual/en/function.move-uploaded-file.php)对此进行了很好的概述。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-04-14T04:31:50.340

这是我的示例服务器 php 文件：

```
<?php
// write to a log file so you know it's working
$msg = $_POST['w'];
$logfile= 'data.txt';

$fp = fopen($logfile, "a");
fwrite($fp, $msg);
fclose($fp);

$file = array_shift($_FILES);
move_uploaded_file($file['tmp_name'], '/MAMP/htdocs/test/'.$file['name']);

?> 
```

这是调用@Rodrigo 代码的代码：

```
HttpUploadFile("http://localhost/test/test.php?w=hello&options2=12121", "C:\temp\bahamas.mp3", "files", "multipart/form-data") 
```**

# javascript - 有没有办法直接绑定到观察箭头的“数字”输入字段？

> ID：10792778
> 
> 赞同：0
> 
> 时间：2012-05-29T03:35:40.520
> 
> 标签：javascript, html, data-binding, input, range

我有一组输入，对于我输入的每个值，我都有一个“范围”滑块和一个“数字”输入。我有一点 JS 被滑块和数字字段调用，每个输入都使用 onchange="send(input_id, input_kind, this.value)" 属性。如果滑块移动，我更新数字，如果数字改变，我更新滑块。

这对于滑块来说很好，只要一个人移动它，数字就会开始跟踪。当使用小向上/向下箭头调整数字或键入数字时，滑块不会更新。在选择另一个字段之前，不会调用 JS，即。输入失去焦点，然后将其数据传递给我 bind{k, d, v} 函数。

HTML：

```
 <div class="number-pair">
                <sub-title>X-Position</sub-title><br />
                <input id="/layout/1/slider" class="slider" type="range" value="0" min="-1" max="1" step="0.01" onchange="bind('/layout/1', 'slider', parseFloat(this.value))" />
                <input id="/layout/1/number" class="number-box" type="number" value="0" min="-1" max="1" step="0.01" onchange="bind('/layout/1', 'number', parseFloat(this.value))" /><br />    
            </div> 
```

JS：

```
 function bind(id, control, v)
        { 
            if (control=="slider")
            {
            if (console) console.log("It's a slider");
                e = document.getElementById("/layout/1/number");
                if (e)
                {
                    e.value = v;
                }
            } else if (control=="number")
            {
            if (console) console.log("It's a float");                   
                e = document.getElementById("/layout/1/slider");
                if (e)
                {
                    e.value = v;
                }
            }
        } 
```

如何使用数字箭头获得响应更快的绑定？

注意，我不仅将两个输入相互绑定，还绑定到其他地方的屏幕效果，因此在这种情况下移动响应式绑定是可取的，而不仅仅是我可以使用的滑块。此外，我正在使用文字来更新我的 JS 中的配对值，但文字将被动态表达式替换，因此我可以绑定整个范围的滑块/文本数字输入对。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T03:43:10.480

在输入字段上，绑定到`onkeypress`，而不是`onchange`事件，因为`onchange`在控件失去焦点之前不会调用事件。要捕获箭头按下，请绑定到`onclick`事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T03:46:46.897

为什么不尝试使用 onkeypress 和 onclick：

```
<div class="number-pair">
<br /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T04:05:01.413

`onchange`仅在元素失去焦点时触发事件。

要获得更及时的反馈，您应该使用：

`onmousedown` `onmouseup`滑块上的事件，您还可以使用`onmousemove`“实时”效果。 `onkeypress`在文本字段上。

# iphone - 如何处理只读属性的内存

> ID：10792781
> 
> 赞同：1
> 
> 时间：2012-05-29T03:36:11.940
> 
> 标签：iphone, objective-c, ios

我在我的一个班级中有以下财产

```
@property (nonatomic, retain, readonly) NSMutableArray *children; 
```

我有以下方法来为这个属性分配内存。

```
- (NSMutableArray *)children {
    if (!children) {
        children = [[NSMutableArray alloc] initWithCapacity:1];
    }

    return children;
} 
```

当我在 xcode 中运行分析器时，它显示我在上述方法中存在内存泄漏。我对在这种情况下释放内存感到困惑。如果我按如下方式将它与 autorelase 一起使用可以吗？

```
children = [[[NSMutableArray alloc] initWithCapacity:1] autorelease]; 
```

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T08:40:09.020

为什么不让编译器为您完成工作？您可以执行以下操作：

```
- (id) init {
if(self=[super init]) {
    children = [[NSMutableArray alloc] init]
} 
```

使用 iTukker 向您展示的 dealloc 并合成属性。

至少对我来说，这要简​​单得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T04:06:31.103

你释放你的dealloc中的孩子吗？如果没有，那是你的问题！

```
- (void)dealloc {
   [children release];
   ...
   [super dealloc];
} 
```

# php - 允许从类方法访问包含文件中的全局变量

> ID：10792783
> 
> 赞同：0
> 
> 时间：2012-05-29T03:36:52.453
> 
> 标签：php

我有一个奇怪的问题，我正在将一个现有的应用程序导入我的项目。

我有一个类，该类有一个方法，该方法需要包含函数的文件。这些函数使我们使用全局变量。

我注意到这些函数不能在它们之间共享一个全局变量，因为它们是从类方法中调用的。

我知道，如果我首先声明全局变量，然后需要文件，我可以包含函数来使用它们。我遇到的问题是，这些包含的文件具有自己的函数，具有 100 个全局变量引用。浏览所有文件并重新声明全局变量将非常耗时。

有没有更直接的方法来做到这一点？

例子是

```
//class file
class run
{
    public function install()
    {
        require_once('file.php);
    }
}

//file.php
require('some/other/file.php);
function checks() {
   global $someVar;
   $somVar->test();
} 
```

除非我在`run::install()`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T11:44:29.170

只需在全局级别（即在其他任何事情之前）而不是在您的方法中执行您对 Wordpress 文件的要求。在您的示例中，您只需要能够访问该`checks()`功能。当然，没有名字冲突的交叉手指......

# android - Android 上 OpenGL ES 2.0 中的快速动态顶点

> ID：10792784
> 
> 赞同：9
> 
> 时间：2012-05-29T03:37:24.403
> 
> 标签：android, optimization, opengl-es

我正在尝试使用 OpenGL ES 2.0 在 Android 上批量绘制一堆线条，我需要知道执行此操作的最佳方法。

现在我创建了一个名为 LineEngine 的类，它构建了一个包含所有要绘制的顶点的 FloatBuffer，然后一次绘制所有线条。问题是 FloatBuffer.put() 显然非常慢，并且正在疯狂地吞噬 CPU 时间。

这是我的课

```
public class LineEngine {
    private static final float[] IDENTIY = new float[16];
    private FloatBuffer mLinePoints;
    private FloatBuffer mLineColors;
    private int mCount;

    public LineEngine(int maxLines) {
        Matrix.setIdentityM(IDENTIY, 0);

        ByteBuffer byteBuf = ByteBuffer.allocateDirect(maxLines * 2 * 4 * 4);
        byteBuf.order(ByteOrder.nativeOrder());
        mLinePoints = byteBuf.asFloatBuffer();

        byteBuf = ByteBuffer.allocateDirect(maxLines * 2 * 4 * 4);
        byteBuf.order(ByteOrder.nativeOrder());
        mLineColors = byteBuf.asFloatBuffer();

        reset();
    }

    public void addLine(float[] position, float[] color){
        mLinePoints.put(position, 0, 8); //These lines
        mLineColors.put(color, 0, 4); // are taking
        mLineColors.put(color, 0, 4); // the longest!
        mCount++;
    }

    public void reset(){
        mLinePoints.position(0);
        mLineColors.position(0);
        mCount = 0;
    }

    public void draw(){
        mLinePoints.position(0);
        mLineColors.position(0);
        GraphicsEngine.setMMatrix(IDENTIY);
        GraphicsEngine.setColors(mLineColors);
        GraphicsEngine.setVertices4d(mLinePoints);
        GraphicsEngine.disableTexture();
        GLES20.glDrawArrays(GLES20.GL_LINES, 0, mCount * 2);
        GraphicsEngine.disableColors();
        reset();
    }
} 
```

有没有更好的方法将所有这些行批处理在一起？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-12T22:04:02.107

您正在尝试做的事情称为 SpriteBatching。如果你希望你的程序在 openGL es 中是健壮的，你必须检查以下内容（一个让你的程序变慢的列表）：

-每帧更改为许多 opengl ES 状态。

- 一次又一次地启用//禁用（纹理等）。一旦你启用了一些你不必再做的事情，它将自动应用它的框架。

- 使用许多资产而不是 spriteSheets。是的，这会对性能产生巨大影响。例如，如果您有 10 张图像，则必须为每张图像加载不同的纹理，这很慢。一个更好的方法是创建一个 spriteSheet。（您可以在 google 上查看免费的 spriteSheet 创建者）。

-您的图像质量很高。是的！检查您的分辨率和文件扩展名。首选 .png 文件。

-照顾 api 8 浮动缓冲区错误（您必须使用 int 缓冲区来修复错误）。

- 使用 java 容器。这是最大的陷阱，如果你使用字符串连接（这不是一个容器，但它每次都返回一个新字符串）或一个列表或任何其他返回新类实例的容器，你的程序可能会因为垃圾收集而变慢。对于输入处理，我建议您搜索一个名为 Pool Class 的 teqnique。它的用途是回收对象而不是创建新对象。垃圾收集器是最大的敌人，尽量让他开心，并避免任何可能召唤他的编程技术。

- 永远不要动态加载东西，而是创建一个加载器类并在应用程序开始时加载所有必要的资产。

如果您确实实施了此列表，那么您的程序很可能是健壮的。

最后一个补充。什么是精灵批处理器？spriteBatcher 是一个使用单个纹理来渲染多个对象的类。它将自动创建顶点、索引、颜色、u - v 坐标，并将它们作为批处理渲染。这种模式将节省 GPU 功率以及 cpu 功率。从您发布的代码中，我无法确定是什么导致 cpu 变慢，但根据我的经验，这是由于我之前提到的列表中的一个（或多个）事情。检查列表，按照它，在谷歌搜索 spriteBatching，我相信你的程序会运行得很快。希望我有帮助！

编辑：我想我找到了导致你的程序变慢的原因，你不要翻转缓冲区！您只需重置位置。您只需添加添加更多对象并导致缓冲区过载。在重置方法中，只需翻转缓冲区。mLineColors.flip mLinePaints.flip 将完成这项工作。如果您每帧发送新的验证，请确保您每帧都调用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T21:05:31.657

具有相对较大的浮点数组的 FloatBuffer.put(float[]) 应该要快得多。单个 put(float) 调用有很多开销。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-27T22:06:01.247

只需使用一个非常简单的本机函数，该函数将从您的类中调用。您可以直接放入`float[]`OpenGL，无需使用愚蠢的缓冲区接口杀死 CPU 时间。

# c# - 如何在 C# 中判断一个类方法当前是否正在执行

> ID：10792790
> 
> 赞同：0
> 
> 时间：2012-05-29T03:38:34.000
> 
> 标签：c#, multithreading

假设我有以下代码（请假设所有适当的导入语句）：

```
public class CTestClass {

    // Properties
    protected Object LockObj;
    public ConcurrentDictionary<String, String> Prop_1;
    protected System.Timers.Timer TImer_1;

    // Methods

    public CTestClass () {
        LockObj = new Object ();
        Prop_1 = new ConcurrentDictionary<String, String> ();
        Prop_1.TryAdd ("Key_1", "Value_1");
        Timer_1 = new System.Timers.Timer ();
        Timer_1.Interval = (1000 * 60); // One minute
        Timer_1.Elapsed += new ElapsedEventHandler ((s, t) => Method_2 ());
        Timer_1.Enabled = true;
    } // End CTestClass ()

    public void Method_1 () {
        // Do something that requires Prop_1 to be read
        // But *__do not__* lock Prop_1
    } // End Method_1 ()

    public void Method_2 () {
        lock (LockObj) {
            // Do something with Prop_1 *__only if__* Method_1 () is not currently executing
        }
    } // End Method_2 ()

} // End CTestClass

// Main class
public class Program {

    public static void Main (string[] Args) {
        CTestClass TC = new CTestClass ();
        ParallelEnumerable.Range (0, 10)
            .ForAll (s => {
                TC.Method_1 ();
            });
    }

} 
```

我知道可以使用 MethodBase.GetCurrentMethod，但是（没有对全局变量进行混乱的簿记）是否可以在不反思的情况下解决问题？

提前感谢你的帮助。

**编辑**

(a) 更正了 LockObj 范围的错误

（b）通过解释添加更多内容（摘自我下面的评论）

我已经更正了我的代码（在我的实际项目中）并将 LockObj 作为类属性。问题是，Method_2 实际上是由 System.Timers.Timer 触发的，当它准备触发时，Method_1 很可能已经在执行。但在这种情况下，重要的是等待 Method_1 完成执行，然后再继续 Method_2。

我同意我试图创建的最小工作示例并没有明确后一点。让我看看我是否可以编辑 MWE。

**代码编辑完成**

**最终编辑**

我正在使用 Visual Studio 2010 和 .NET 4.0，所以我没有可以让我的生活更轻松的异步/等待功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T05:14:19.407

首先 ConcurentDictionary 是线程安全的，因此您不需要锁定生产/消费。因此，如果只关心访问您的字典，则不需要额外的锁定。但是，如果您只需要相互排除方法 1 和 2 的执行，则应将锁定对象声明为类成员，并且可以使用它锁定每个函数体，但正如我所说，如果要使用 ConcurentDictionary，则不需要。如果你真的需要每时每刻都执行哪个方法，你可以使用每个线程的堆栈帧，但这会很慢，我相信这种情况没有必要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T06:20:38.047

您可以将其视为经典读者/作者问题的一种变体，其中读者不消费作者的产品。我认为你可以在一个 int 变量和三个 Mutex 的帮助下做到这一点。

一个 Mutex (mtxExecutingMeth2) 保护 Method2 的执行并阻止 Method2 和 Method1 的执行。Method1 必须立即释放它，否则您不能有 Method1 的其他并行执行。但这意味着当有 Method1 执行时，您必须告诉 Method2，这是使用 mtxThereAreMeth1 Mutex 完成的，只有在没有更多 Method1 执行时才释放该互斥锁。这由 numMeth1 的值控制，该值必须由另一个 Mutex (mtxNumMeth1) 保护。

我没有尝试，所以我希望我没有介绍一些比赛条件。无论如何，它至少应该让您对可能的方向有所了解。

这是代码：

```
protected int numMeth1 = 0;
protected Mutex mtxNumMeth1 = new Mutex();
protected Mutex mtxExecutingMeth2 = new Mutex();
protected Mutex mtxThereAreMeth1 = new Mutex();

public void Method_1() 
{
    // if this is the first execution of Method1, tells Method2 that it has to wait
    mtxNumMeth1.WaitOne();
    if (numMeth1 == 0)
        mtxThereAreMeth1.WaitOne();
    numMeth1++;
    mtxNumMeth1.ReleaseMutex();
    // check if Method2 is executing and release the Mutex immediately in order to avoid 
    // blocking other Method1's
    mtxExecutingMeth2.WaitOne();
    mtxExecutingMeth2.ReleaseMutex();

    // Do something that requires Prop_1 to be read
    // But *__do not__* lock Prop_1

    // if this is the last Method1 executing, tells Method2 that it can execute
    mtxNumMeth1.WaitOne();
    numMeth1--;
    if (numMeth1 == 0)
        mtxThereAreMeth1.ReleaseMutex();
    mtxNumMeth1.ReleaseMutex();
} 

public void Method_2() 
{
    mtxThereAreMeth1.WaitOne();
    mtxExecutingMeth2.WaitOne();

    // Do something with Prop_1 *__only if__* Method_1 () is not currently executing

    mtxExecutingMeth2.ReleaseMutex();
    mtxThereAreMeth1.ReleaseMutex();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T05:33:28.517

您正在寻找的术语是[Thread Synchronization](http://msdn.microsoft.com/en-us/library/ms173179.aspx)。在 .NET 中有很多方法可以实现这一点。您发现
了其中之一 ( )。`lock`

一般来说，锁对象应该可以被所有需要它的线程访问，并在任何线程尝试锁定它之前进行初始化。

该`lock()`语法确保对于该锁对象一次只能有一个线程继续。任何其他试图锁定同一对象的线程都将停止，直到它们能够获得锁定。

无法超时或以其他方式取消对锁的等待（终止线程或进程除外）。

例如，这是一个更简单的形式：

```
public class ThreadSafeCounter
{
    private object _lockObject = new Object();  // Initialise once
    private int count = 0; 
    public void Increment()
    {
        lock(_lockObject) // Only one thread touches count at a time
        { 
            count++; 
        }
    } 
    public void Decrement()
    {
        lock (_lockObject) // Only one thread touches count at a time
        {
            count--; 
        }
    } 
    public int Read()
    {
        lock (_lockObject) // Only one thread touches count at a time
        {
            return count; 
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T04:29:30.530

如上所述，您应该更加熟悉.net 中存在的 不同[同步原语。](http://msdn.microsoft.com/en-us/library/ms228964.aspx)
您不能通过反射或分析谁是并发运行方法来解决此类问题，而是通过使用信号原语，这将通知任何感兴趣的人该方法正在运行/结束。

# html - 字段集高度为其父级的 100%

> ID：10792791
> 
> 赞同：12
> 
> 时间：2012-05-29T03:38:34.447
> 
> 标签：html, css

我有 2 个`fieldsets`包裹在 a 中`<div>`，我们称它们为`blah1`and `blah2`。

`blah2`可以增长为`<div>`其父级的最大值，但我需要`blah1`与他的兄弟姐妹具有相同的 % 高度`blah2`

[这是我的演示](http://jsfiddle.net/luissanchezm86/nGCdx/7/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T23:48:48.380

答案有点奇怪，但我让它工作，看起来边缘在这里弄得一团糟，如果我把它设置为`margin: 0 5px;`那么我可以让两者`fieldsets`都与`height`他们的父母一样

部分**CSS**标记：

```
fieldset
{
    border: 1px solid #ddd;
    padding: 0 1.4em 1.4em 1.4em;
    margin: 0 0 1.5em 0;
    border-radius: 8px;
    margin: 0 5px;
    height: 100%;
}

legend
{
    font-size: 1.2em;
    font-weight: bold;
}
.blahContainer{
    width: 100%;
    height: 100%;
}

.blahColumna1{
    width: 70%;
    height: 100%;
} 
```

如果您想观看最终演示，[请单击此处](http://jsfiddle.net/luissanchezm86/nGCdx/13/)。

希望它可以帮助别人......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T04:04:05.900

尝试将两个 s 包装在一个不固定高度`<fieldset>`的单个容器中——它会整齐地包围 s ，并且会长大到你父母的最大尺寸。将的高度设置为包含的 100% 。`<div>``blah2``<div>``blah1``<div>`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-10T18:48:47.193

我只能通过添加`padding-bottom`到 Chrome 的字段集来使其工作。这平衡了一些额外的高度％。很好的是，即使在调整大小时它也能正常工作（相对一致）。

```
if (navigator.userAgent.toLowerCase().indexOf('chrome')) { // Replace this with your preferred way of checking userAgent
    $('fieldset').css('padding-bottom', '4%'); // Exact percent may vary
} 
```

正如一个注释，我发现这至少在 IE8 - IE11 中也是一个问题，因此可以将修复应用于 IE。

# android - Java Android 传递数据 Array double

> ID：10792794
> 
> 赞同：1
> 
> 时间：2012-05-29T03:38:58.773
> 
> 标签：android, android-intent, double

我对 android 应用程序中的意图有疑问

**我在class1**中有一个数组

 **```
double [][] tableCityPair = new double[100][100]; 
```

---这里填充数组的代码---在类的末尾我想将 tableCityPair 发送到另一个类**class2**。

我应该如何在 class2 中声明数组？
这是正确的吗？

```
Intent it = getIntent();
double tabelJarakAntarKota= it.getDoubleExtra("tableCityPair",3); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T03:58:51.963

该类`Bundle`具有传递和检索 s 数组的方法`double`：

*   [`void putDoubleArray(String, double[])`](http://developer.android.com/reference/android/os/Bundle.html#putDoubleArray%28java.lang.String,%20double%5B%5D%29)
*   [`double [] getDoubleArray(String)`](http://developer.android.com/reference/android/os/Bundle.html#getDoubleArray%28java.lang.String%29)

但是，这些适用于一维数组。您正在尝试传递一个二维数组。我不知道这样做的直接方法。实现此目的的一种方法是将 N 个双精度数组放入一个循环中。

```
for(int i=0;i<tableCityPair.length;i++){
    bundle.put("tableCity"+i, tableCityPair[i]);
} 
```

在接收端，您可以：

```
double [] aPair = it.getExtras().getDoubleArray("tableCity"+i); 
```

不过，我不确定这对性能的影响；因为您将添加 100 个附加功能作为捆绑包的一部分。

可能有更好的方法（也许让你的一对 a`List<List<Double>>`然后实现`Parcelable`）但我没有尝试过任何一个，所以我不会建议它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T03:43:34.890

```
double [][] tableCityPair = new double[100][100]; 
```

然后...使意图它=....然后

```
put: `it.putExtra("size",tableCityPair.length)` 
```

然后：

```
 for(i=0;i<tableCitypair.length;i++)
{

it.putExtra("table"+i,tableVityPair[i][]);

} 
```

然后在 B 类

```
double [][] tableCityPairinB = new double[100][100];
for(i=0;i<getIntent().getExtras("size");i++)
{
double[i][]=getIntent().getExtras("table"+i);

} 
```**

# linux - ld-linux-x86-64.so.2 的默认路径

> ID：10792801
> 
> 赞同：0
> 
> 时间：2012-05-29T03:40:46.820
> 
> 标签：linux

反正有没有看到 default-rpath 硬编码到 ld-linux-x86-64.so.2 中？

基本上，当 glibc 被编译/安装时，它可以采用 default-rpath 并因此硬编码到加载程序二进制文件中。

# javascript - 从 jquery 转换为 mootools 时出错？

> ID：10792804
> 
> 赞同：0
> 
> 时间：2012-05-29T03:41:19.597
> 
> 标签：javascript, jquery, mootools

我有一些使用 jquery 的代码：

```
$(document).ready(function(){
   $('#tabs div').hide();
   $('#tabs div:first').show();
   $('#tabs ul li:first').addClass('active');
   $('#tabs ul li a').click(function(){ 
      $('#tabs ul li').removeClass('active');
      $(this).parent().addClass('active'); 
      var currentTab = $(this).attr('href'); 
      $('#tabs div').hide();
      $(currentTab).show();
      return false;
   });
}); 
```

我将其转换为使用 mootools

```
window.addEvent('domready', function() {
    $$('#tabs div').hide();
    $$('#tabs div:first').show();
    $$('#tabs ul li:first').addClass('active');
    $$('#tabs ul li a').addEvent('click', function(event) {
        $$('#tabs ul li').removeClass('active');
        $$(this).parent().addClass('active'); 
        var currentTab = $(this).attr('href'); 
        $$('#tabs div').hide();
        $$(currentTab).show();
        return false;

    });
}); 
```

但我收到一个错误：`$$(this).parent is not a function`

我如何解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T08:39:12.177

这很可怜。许多不良做法和api差异。

```
window.addEvent('domready', function() {
    // cache what we will reuse into vars
    var tabs = document.id('tabs'), 
        divs = tabs.getElements('div'),
        // for loop
        len = divs.length,
        ii = 1;

    // hide all but the first one w/o extra lookups.
    for (;ii < len;++ii)
        divs[ii].hide();

    // first match
    tabs.getElement('ul li').addClass('active');

    // attach the events to all links
    tabs.getElements('ul li a').addEvent('click', function(event) {
        event && event.stop();

        tabs.getElement('ul li').removeClass('active');
        this.getParent().addClass('active'); 
        tabs.getElement(this.get('href')).show();
        return false;
    });
}); 
```

基本上，您需要考虑一些做法：

*   缓存你的选择器，尤其是重复的东西
*   避免去dom和凭记忆工作
*   使用普通的 js 数组循环或方法来避免额外的选择器，如 :first 或 :last，你已经有了数据
*   直接停止事件，不返回false
*   `.getElement()`将返回第一场比赛
*   避免将内容存储到您不会重复使用的变量中
*   考虑使用事件委托并将点击处理程序附加到 ul 而不是所有子 A 上 - 例如，`tabs.getElement('ul').addEvent('click:relay(li a)', fn)`将实现相同但只创建单个事件处理程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T16:33:29.897

mootools中没有`parent`方法，取而代之的是方法名[`getParent`](http://mootools.net/docs/core/Element/Element#Element%3agetParent)。从jquery转换到mootools并不难。查看文档很有帮助。

# javascript - ntp4 在 Chrome 源代码中代表什么？

> ID：10792809
> 
> 赞同：1
> 
> 时间：2012-05-29T03:42:16.797
> 
> 标签：javascript, google-chrome, chromium

“铬/src/铬/浏览器/资源/ntp4/”

我试图弄清楚chrome如何创建新标签页的过程。我想知道'ntp4'代表什么。希望能得到一些帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T20:58:03.797

它代表新标签页 v4。

# java - 获取网页的压缩版本

> ID：10792811
> 
> 赞同：1
> 
> 时间：2012-05-29T03:42:38.260
> 
> 标签：java, html, httpclient

我正在使用 HttpClient 4.1 下载网页。我想得到一个压缩版本：

```
 HttpGet request = new HttpGet(url);
    request.addHeader("Accept-Encoding", "gzip,deflate");

    HttpResponse response = httpClient.execute(request,localContext);
    HttpEntity entity = response.getEntity(); 
```

`response.getFirstHeader("Content-Encoding")``"Content-Encoding: gzip"` 然而，显示`entity.getContentEncoding()`的是`null`.

如果我放：

```
entity = new GzipDecompressingEntity(entity); 
```

我得到：

```
java.io.IOException: Not in GZIP format 
```

看起来生成的页面是纯文本并且未压缩，即使“Content-Encoding”标头显示它是 gzip 压缩的。

我已经在几个 URL（来自不同的网站）上尝试过这个，但得到了相同的结果。

如何获得网页的压缩版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T13:11:24.270

如果您不希望您的 API 处理诸如解压缩之类的普通事情，请不要使用 HttpClient。

您可以使用基本的 URLConnection 类来获取压缩流，如以下代码所示：

```
public static void main(String[] args) {
    try {
        URL url = new URL("http://code.jquery.com/jquery-latest.js");
        URLConnection con = url.openConnection();
        // comment next line if you want to have something readable in your console
        con.addRequestProperty("Accept-Encoding", "gzip,deflate");
        BufferedReader in = new BufferedReader(new InputStreamReader(con.getInputStream()));
        String l;
        while ((l=in.readLine())!=null) {
            System.out.println(l);
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

# sqlite - SQLite 'INSERT INTO' 错误 - 填充新表

> ID：10792824
> 
> 赞同：3
> 
> 时间：2012-05-29T03:45:10.463
> 
> 标签：sqlite, syntax-error, insert-into

在发布此问题时，我搜索了提示的帖子，但没有发现类似的帖子，因此如果我错过任何内容，我深表歉意。

这是我的问题。我在 SQLite Administrator 中创建了一个表及其字段，然后我编写了以下查询来填充表：

```
 USE Contact_Database;

  INSERT into Names (Contact_ID, FirstName, LastName) VALUES
  (1, 'Joana', 'Tavares'),
  (2, 'Patrícia', 'Dias'),
  (3, 'Paulo', 'Costa'),
  (4, 'Marco', 'Almeida'),
  (5, 'Bruno', 'Lindo'),
  (6, 'Manuela', 'Lindo'),
  (7, 'João', 'Lindo'),
  (8, 'Rui', 'Trindade'); 
```

结果错误：SQL 错误：“USE”附近：语法错误

我也尝试过：

```
 INSERT into Contact_Database.Names 
```

结果错误：SQL错误：靠近“，”：语法错误<

我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T03:49:59.430

不支持在一个查询中插入多个。

有关更多信息，请参阅[此问题](https://stackoverflow.com/questions/1609637/is-it-possible-to-insert-multiple-rows-at-a-time-in-an-sqlite-database)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-02T08:44:52.143

我有同样的问题，但我在创建表期间忽略（删除）插入查询时解决了它。

我改变了这个

```
db.execSQL("INSERT INTO MessageTable VALUES(datetime(),'Pir Fahim',00923359110795','Hello,testing');"); 
```

到：

```
db.execSQL("INSERT INTO CallTable VALUES('"+call_time+"','"+name+"','"+phone_no+"','"+interface_style+"','"+tone+"','"+voice_path+"','"+vibration_mode+"');"); 
```

# iphone - 在 UITableViewCell 中调整 UITextView 的大小

> ID：10792835
> 
> 赞同：0
> 
> 时间：2012-05-29T03:47:41.027
> 
> 标签：iphone, uitextview

我正在尝试调整 UITableViewCell 中的 UITextView 的大小。我也想相应地调整 UITableViewCell 的大小。我的 UITableViewCell 正确调整大小，但 UITextView 没有。它最终只有两条线，而不是正确的大小。当我在 cellForRowAtIndexPath 方法中初始化它时，它看起来像：

```
 UITextView *notesTextView = [[UITextView alloc] initWithFrame:CGRectMake(83, 12, TEXTVIEW_WIDTH, 22)]; 

        notesTextView.tag = TEXTVIEW_TAG;
        notesTextView.delegate = self;

        [cell.contentView addSubview:notesTextView]; 
```

当我尝试在 textView 委托方法中修改它时，我会：

```
CGSize size = [textView.text sizeWithFont:textView.font constrainedToSize:CGSizeMake(TEXTVIEW_WIDTH, 460) lineBreakMode:UILineBreakModeWordWrap];
NSLog(@"size: %@", NSStringFromCGSize(size)); // has the correct size
if (size.height > self.notesRowHeight) {
    self.notesRowHeight = size.height;
    UITextView *aTextView = (UITextView *)[self.view viewWithTag:TEXTVIEW_TAG];
    CGRect textViewFrame = CGRectMake(aTextView.frame.origin.x, aTextView.frame.origin.y, TEXTVIEW_WIDTH, size.height);
    aTextView.frame = textViewFrame;
    aTextView.contentSize = size;
    [aTextView sizeToFit];
    [aTextView sizeThatFits:size];
    NSLog(@"%@", NSStringFromCGRect(aTextView.frame)); // has the correct height 
```

所以最终发生的是 tableView 正确调整大小，即使 textView 框架的大小正确（例如 {{83, 12}, {197, 120}}），textView 只有 2 行。它最终不会像我预期的那样占用 UITableViewCell 的大小。

编辑：当我尝试在不是 UITableViewCell 的普通 UIView 中调整 UITextView 的框架时，它工作得很好。所以我不确定在这种情况下有什么不同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T21:26:16.697

我找到了答案。我不应该重新加载该行，而只是调用

```
[tableView beginUpdates];
[tableView endUpdates]; 
```

更多信息可以在以下位置找到： [UITableViewCell 中的 UITextView 平滑自动调整大小显示和隐藏 iPad 上的键盘，但适用于 iPhone](https://stackoverflow.com/questions/4015557/uitextview-in-a-uitableviewcell-smooth-auto-resize-shows-and-hides-keyboard-on-i)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T20:03:32.500

我找到了解决这个问题的最佳方法。

首先，当然，您需要创建 UITextView 并将其添加到单元格的 contentView 中。我创建了一个名为“cellTextView”的 UITextView 实例变量这是我使用的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView fileNameCellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Cell"];

    if (!cellTextView) {
        cellTextView = [[UITextView alloc] initWithFrame:CGRectMake(5.0, 5.0, cell.bounds.size.width - 30.0, cell.bounds.size.height - 10.0)]; // I use these x and y values plus the height value for padding purposes.
    }
    [cellTextView setBackgroundColor:[UIColor clearColor]];
    [cellTextView setScrollEnabled:FALSE];
    [cellTextView setFont:[UIFont boldSystemFontOfSize:13.0]];
    [cellTextView setDelegate:self];
    [cellTextView setTextColor:[UIColor blackColor]];
    [cellTextView setContentInset:UIEdgeInsetsZero];
    [cell.contentView addSubview:cellTextView];

    return cell;
} 
```

然后，创建一个名为 numberOfLines 的 int 变量，并在您的 init 方法中将该变量设置为 1。之后，在您的 textViewDelegate 的 textViewDidChange 方法中，使用以下代码：

```
- (void)textViewDidChange:(UITextView *)textView
{
    numberOfLines = (textView.contentSize.height / textView.font.lineHeight) - 1;

    float height = 44.0;
    height += (textView.font.lineHeight * (numberOfLines - 1));

    CGRect textViewFrame = [textView frame];
    textViewFrame.size.height = height - 10.0; //The 10 value is to retrieve the same height padding I inputed earlier when I initialized the UITextView
    [textView setFrame:textViewFrame];

    [self.tableView beginUpdates];
    [self.tableView endUpdates];

    [cellTextView setContentInset:UIEdgeInsetsZero];
} 
```

最后，将此代码粘贴到您的 heightForRowAtIndexPath 方法中：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    float height = 44.0;
    if (cellTextView) {
        height += (cellTextView.font.lineHeight * (numberOfLines - 1));
    }
    return height;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T04:28:21.917

我给你一个不一样的看法......

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{
       .
       .
       if(_YOUR_ROW_ && _YOUR_SECTION_)
       {

           cell.textView.text = Text_Of_TextView;
       }
       .
       .

}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
   .
   .
   if(_YOUR_ROW_ && _YOUR_SECTION_)
   {

       UIFont * FontSize = [UIFont systemFontOfSize:14.0];  
       CGSize textSize = [Text_Of_TextView sizeWithFont:FontSize constrainedToSize:CGSizeMake(Width_OF_textView, MAXFLOAT) lineBreakMode:UILineBreakModeWordWrap];

       return textSize.height+PADDING;
   }
   .
   .
}

-(void)textViewDidEndEditing:(UITextView *)textView
{

    [Text_Of_TextView setText:textView.text];

 CGRect frame = textViewInRow.frame;
        frame.size.height = textViewInRow.contentSize.height;
        textViewInRow.frame = frame;
 [TableView_InView reloadRowsAtIndexPaths:[NSArray arrayWithObject:[NSIndexPath indexPathForRow:_YOUR_ROW_ inSection:_YOUR_SECTION_]] withRowAnimation:UITableViewRowAnimationNone];

} 
```

并且不要忘记为 textview 实现自动调整大小的行为

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-05T05:31:15.337

这是一个简单的项目，演示了如何使用自动布局来调整 iOS 8 的单元格大小。几乎不需要特殊代码。有关关键点，请参阅 readme.md。

[github上的项目](https://github.com/ksoftllc/UITableView-with-UITextView-and-UILabel-Resize)

# android - 如何确保为 GridView 扩展 BaseAdapter 的适配器将 View 放在某个列中？

> ID：10792837
> 
> 赞同：0
> 
> 时间：2012-05-29T03:48:16.330
> 
> 标签：android, calendar

我了解如何设置我的适配器以动态添加视图。但是我有一个问题，我需要一种方法来确保在该 GridView 的任何给定列中只插入 7 个视图。

我这样做的原因是因为我正在创建一个日历视图，并且当我插入当天的数字时，我需要确保不会意外地将其插入到它之前或之后的列中。任何帮助将非常感激！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T04:08:09.587

定义要显示的列数。

在布局中，添加`android:numColumns`

或者

在代码中，添加`setNumColumns(int)`

[http://developer.android.com/reference/android/widget/GridView.html](http://developer.android.com/reference/android/widget/GridView.html)

# java - 了解 Java 线程中的“优先级”

> ID：10792840
> 
> 赞同：4
> 
> 时间：2012-05-29T03:48:40.100
> 
> 标签：java, multithreading

我是 Java 和线程世界的新手。我只是通过如下示例代码：-

```
package com.alice.learnthread;

class NewThread implements Runnable{
Thread t;
long clicker=0;

private volatile boolean running=true;
NewThread(int p){
    t=new Thread(this);
    t.setPriority(p);
}
public void run(){
    while(running){
        clicker++;
    }
}
public void stop(){
    running=false;
}
public void start(){
    t.start();
} 
```

}

```
 public class TestThread {
public static void main(String[] args){
    Thread r=Thread.currentThread();
    r.setPriority(Thread.MAX_PRIORITY);
    NewThread hi=new NewThread(Thread.NORM_PRIORITY+2);
    NewThread lo=new NewThread(Thread.NORM_PRIORITY-2);
    hi.start();
    lo.start();
    try{
        r.sleep(5000);
    }catch(InterruptedException e){
        System.out.println("caught");
    }
    hi.stop();
    lo.stop();
    try{
        hi.t.join();
        lo.t.join();
    }catch(InterruptedException e){
        System.out.println("cau1");
    }
    System.out.println("hi = "+hi.clicker+" lo="+lo.clicker);
} 
```

}

然而，根据书中的输出，具有高优先级的线程应该对变量 clicker 具有更高的值。但在我的情况下，较低优先级线程的变量 clicker 的值比较高优先级线程的值高得多。输出对我来说如下所示：-

```
hi = 2198713135 lo=2484053552 
```

这是否意味着较低优先级的线程比较高优先级的线程获得更多的 CPU 时间......我错过了什么......在 ubuntu 和 win7 上的结果是相同的（较低优先级线程的更高点击器值）......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T04:07:15.197

Java 中的线程优先级不能保证预期的行为。这就像对 JVM 的提示。实际行为取决于底层操作系统。

另外，阅读这个关于协作与抢占线程的漂亮小段落：http: [//www.cafeaulait.org/course/week11/32.html](http://www.cafeaulait.org/course/week11/32.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T04:25:47.793

正如 sul 所说，优先级更像是一个提示，而不是 JVM 的合同。在您的情况下，您的结果可以用几种理论来解释：

*   第二个线程运行得更快，因为它利用了第一个编译的好处，并在第一个之后停止。
*   while 循环检查 volatile 变量的值的事实迫使 jvm 实现该值，并且在此期间可以为其他线程提供 CPU。
*   stop 方法需要花费大量时间来停止线程。

这只是一些事实，说明线程的行为是不可预测的。例如尝试先启动低优先级线程，我相信你会有不同的结果。

另外，试试这个：

```
public class TestThread
{
    public static void main(String[] args){
        Thread r=Thread.currentThread();
        r.setPriority(Thread.MAX_PRIORITY);
        NewThread hi=new NewThread(Thread.MAX_PRIORITY);
        NewThread lo=new NewThread(Thread.MIN_PRIORITY);
        hi.start();
        lo.start();
        try{
            r.sleep(5000);
        }catch(InterruptedException e){
            System.out.println("caught");
        }
        hi.interrupt();
        lo.interrupt();

        System.out.println("hi="+hi.clicker);
        System.out.println("lo="+lo.clicker);
    }
}
class NewThread extends Thread{
    long clicker=0;

    NewThread(int p){
        setPriority(p);
    }
    public void run(){
        while(true){
            clicker++;
        }
    }
} 
```

我确信删除 volatile 变量并更改线程停止的方式会给您带来另一个结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-19T11:46:43.287

仅针对那些寻求更多解释的人...以下是“完整参考，Java，Herbert Shieldt”的摘录

> 作为绝对值，优先级是没有意义的；如果高优先级线程是唯一运行的线程，则它不会比低优先级线程运行得更快。**相反，线程的优先级用于决定何时从一个正在运行的线程切换到下一个。**这称为上下文切换。确定何时发生上下文切换的规则很简单：
> 
> *   线程可以自愿放弃控制。这是通过显式让步、休眠或阻塞挂起的 I/O 来完成的。在这种情况下，将检查所有其他线程，并为准备好运行的最高优先级线程分配 CPU。
> *   线程可以被更高优先级的线程抢占。在这种情况下，一个不让出处理器的低优先级线程简单地被一个高优先级线程抢占——不管它在做什么。基本上，只要更高优先级的线程想要运行，它就会运行。这称为抢先式多任务

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T04:20:27.407

线程本质上是不可预测的。当高优先级线程由于某些原因无法运行时，低优先级线程运行，而且当所有线程都在竞争 CPU 时，线程优先级意义不大。

但是当我执行上面的程序时，我得到了你书中提到的预期结果。

```
hi = 1707497920 lo=1699648942

hi = 1702682202 lo=1685457297 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-29T04:20:44.477

我在 Windows 7 上发现，如果我将线程数量增加到实际争夺系统资源的程度，*并*增加运行时间，那么优先级越高的线程执行的点击次数就会增加一个数量级。如果不是这种情况会很好奇。我认为您的测试用例在线程数量上都太小而无法用尽他们必须竞争的足够资源，而且在 JVM 绑定到本机线程的运行时间上也是如此。

```
 public static void main(String[] args) {
        Thread r = Thread.currentThread();
        r.setPriority(Thread.MAX_PRIORITY);
        List<NewThread> hiThreads = new LinkedList<NewThread>();
        List<NewThread> lowThreads = new LinkedList<NewThread>();
        for (int i = 0; i < 10; i++) {
            NewThread hi = new NewThread(Thread.NORM_PRIORITY + 2);
            NewThread lo = new NewThread(Thread.NORM_PRIORITY - 2);
            hiThreads.add(hi);
            lowThreads.add(lo);
            hi.start();
            lo.start();
        }
        try {
            r.sleep(30000);
        } catch (InterruptedException e) {
            System.out.println("caught");
        }
        for (NewThread h : hiThreads) {
            h.stop();
        }
        for (NewThread l : lowThreads) {
            l.stop();
        }
        try {
            for (NewThread h : hiThreads) {
                h.t.join();
            }
            for (NewThread l : lowThreads) {
                l.t.join();
            }
        } catch (InterruptedException e) {
            System.out.println("cau1");
        }
        long hiClicker = 0l;
        for (NewThread h : hiThreads) {
            hiClicker += h.clicker;
        }
        long lowClicker = 0l;
        for (NewThread l : lowThreads) {
            lowClicker += l.clicker;
        }
        System.out.println("hi = " + hiClicker + " lo=" + lowClicker);
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-27T10:35:37.603

我写了一个小应用程序来看看 Java 线程是如何工作的：

[https://github.com/vinhqdang/java-thread-example](https://github.com/vinhqdang/java-thread-example)

# haskell - 在 Haskell 中使用 Data.Reflection 返回具体类型

> ID：10792841
> 
> 赞同：5
> 
> 时间：2012-05-29T03:48:46.967
> 
> 标签：haskell, reflection, types

这是一个关于 Haskell 中 Data.Reflection 的类型问题。反射让我接受一个 Int 并将其转换为一种类型。

下面的函数 f 和 g 是我们对合理事物的最佳尝试，如果您有更好的方法，让我们拥有它！

例如，我可以通过执行以下操作添加数字 mod 41：

```
import Data.Reflection
import Data.Proxy

newtype Zq q i = Zq i deriving (Eq)
instance (Reifies q i, Integral i) => Num (Zq q i) where
   (...)
zqToIntegral :: (Reifies q i, Integral i) => Zq q i -> i
   (...)

f :: forall i . (Integral i) => i -> (forall q . Reifies q i => Zq q i) -> i
f modulus k = 
    reify modulus (\ (_::Proxy t) -> zqToIntegral (k :: Zq t i) 
```

然后

```
>>:t (f 41 (31+15))
(f 41 (31+15)) :: Integral i => i 
```

但是，我们想编写如下函数：

```
g :: forall i . (Integral i) => i -> (forall q . Reifies q i => Zq q i) -> Zq q i
g modulus k = 
    reifyIntegral modulus (\ (_::Proxy t) -> (k :: Zq t i) 
```

并想得到：

```
>>:t (g 41 (31+15))
(g 41 (31+15)) :: <some type info> => Zq q i 
```

不同之处在于我们希望能够返回一个使用 reified int 的类型。上述定义的至少一个问题是 rank-2 类型 q 对返回类型不可见。

Data.Reflection 中 reify 的签名是

```
reify :: a -> (forall s. Reifies s a => Proxy s -> r) -> r 
```

据我们所知，这需要 rank-2 类型，并且我们不知道（如果确实可能）如何将此类型公开给函数的返回类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T03:53:39.270

您可以将值提升为类型。但是该类型无法逃避执行提升的功能。这就是 rank 2 类型的工作方式。`g`想象一下，如果我们能像你描述的那样写作。然后，给定一些用户输入值，我们可以`Zq`在运行时得到不同的 qs。

但是我们能用它们做什么呢？

如果我们有两个`Zq`相同的`q`，我们可以添加它们。但是直到运行时我们才*知道*它们是否相同！现在检查类型为时已晚，因为我们需要在编译时决定是否可以添加它们。如果您忽略处于幻像位置的事实`q`，这与您不能在编译时根据输入返回 an`Int`或 a的函数的原因相同（当然，您可以使用 an ）。`Bool``Either`

因此，如评论中所述，您可以做一些不同的事情。

您可以做的一件事就是在运行时返回模数（即 的值级版本`q`）以及您的结果。然后您可以随时使用它。

看起来像这样：

```
g :: forall i . (Integral i) => i -> (forall q . Reifies q i => Zq q i) -> (i,i)
g modulus k = reify modulus (\ m@(_::Proxy t) -> (zqToIntegral (k :: Zq t i), reflect m)) 
```

您可以做的另一件事是像这样使用存在主义：

```
data ZqE i = forall q. ZqE (Zq q i)

h :: forall i . (Integral i) => i -> (forall q . Reifies q i => Zq q i) -> ZqE i
h modulus k = reify modulus (\ (_::Proxy t) -> ZqE (k :: Zq t i)) 
```

现在我们对 ZqE 唯一能做的就是解压它并返回其他也不会`q`直接暴露在类型中的东西。

请注意，我们无法知道`q`任意两个`ZqE`中的 是否相等，因此我们不能直接将它们组合在一起，而是应该在同一个`reify`调用下创建它们。这不是一个错误，而是一个功能！

# python - 交叉编译 GDB 时出现 Python 丢失或无法使用的错误

> ID：10792844
> 
> 赞同：14
> 
> 时间：2012-05-29T03:49:26.660
> 
> 标签：python, gdb

尝试交叉编译 GDB（使用`--with-python`标志）时出现此错误：

```
checking for python: /usr/bin/python
checking for python2.7: no
configure: error: python is missing or unusable 
```

我确保我在`/usr/bin`. 我什至删除了软件包并重新安装了它。我尝试使用`--with-python=/usr/bin`and `--with-python=/usr/local`，但没有运气。我确定虽然安装了 2.7。知道该怎么做吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-23T14:19:38.210

编译 GDB 7.4.1 时，我在 Debian 6.0 上遇到了同样的问题

解决方案是安装 python 头文件

```
sudo apt-get install python2.6-dev 
```

然后用正确的标志配置

```
./configure --with-python 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-22T12:46:26.737

我在 gdb 7.4 上遇到了同样的问题，在花了一些时间调试后终于让它工作了。

通过检查文件`<gdb-source-path>/gdb/config.log`，您会注意到一行：

```
configure:11031: gcc -o conftest -g -O2   -I/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7   conftest.c -lncurses -lz -lm    -L/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/config -ldl -framework CoreFoundation -lpython2.7 -u _PyMac_Error Python.framework/Versions/2.7/Python >&5 
```

似乎该脚本`python/python-config.py`返回了一些导致`gcc`命令失败的无效标志。

解决方案是打开`<gdb-source-directory>/gdb/python/python-config.py`并注释掉这两行：

```
#            if getvar('LINKFORSHARED') is not None:
#                libs.extend(getvar('LINKFORSHARED').split()) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-10-31T04:47:18.933

我刚刚遇到了使用 Continuum 的 Python 2.7 构建 gdb 7.8.1 的类似问题，就我而言，它安装在非标准位置。

在这种情况下，解决方案是在运行“配置”之前提供额外的配置：

```
export LDFLAGS="-Wl,-rpath,<non-standard-Python-lib-location> -L<non-standard-Python-lib-location>"
configure --with-python=<non-standard-Python-executable-location> 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-04-21T17:45:57.713

我在构建 ESP8266 SDK 时遇到了这个错误。刚刚做了一个 sudo apt-get install python-dev ，现在它可以工作了。

# java - 使用 Play Framework 和 Ebean 进行复杂连接

> ID：10792853
> 
> 赞同：7
> 
> 时间：2012-05-29T03:51:32.660
> 
> 标签：java, sql, playframework-2.0, ebean

我正在使用 PlayFramework，我真的很喜欢它。当我想从表中获取数据时，例如我有一个`user`表，我使用以下语法：

```
List<User> users = User.find.where().eq("email", email).findList(); 
```

我的问题是，当我得到用户对象时，我有一`id`列。使用该`id`值，我可以映射到其他表，并且`id`这些表的 's 可以映射到更多表，因此连接多个表的基本概念。有没有我可以阅读的示例或地方，其中描述了如何使用上述语法实现它？

我试图找到自己并且做不到，此时我能想到的唯一方法是将直接 sql 与准备好的语句一起使用，而我不想这样做。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-29T07:01:22.547

你好卡尔维什

`Relationships`模型之间使用常见的 JPA 注释设置，如`@OneToMany`, `@ManyToOne`,`@OneToOne`等。

因此，如果您有`User.java`用户表`Question.java`的模型和用户问题的模型，您可以将它们加入`@OneToMany`（一个`User`有很多`Question`）

用户

```
@Entity
public class User extends Model {
    @Id
    public Long id;

    public String email;

    @OneToMany
    public List<Question> questions;
} 
```

问题

```
@Entity
public class Question extends Model {
    @Id
    public Long id;

    public String question;
} 
```

当您在控制器中选择用户时，Ebean 将默认执行“加入”并获取所有用户的问题：

```
User user = User.find.where().eq("email", email).findUnique();
List<Question> usersQuestion = user.questions; 
```

默认情况下，Ebean 会获取所有对象的属性和关系，因此您不需要创建子查询。当然，您可以甚至应该只选择/获取当前所需的数据。

在[官方 Ebean 文档页面上](http://www.avaje.org/ebean/documentation.html)，您会找到相当不错的**参考指南 (pdf)**，关系的一般描述可在部分中找到`11.6.2 Relationships`。

在部分`4.1.2 Query`中有一个示例（第二个），它演示了如何使用`select()`and获取“部分”对象`fetch()`

# c++ - 共享指针持有的指针过早删除

> ID：10792854
> 
> 赞同：0
> 
> 时间：2012-05-29T03:51:36.327
> 
> 标签：c++, shared-ptr

我的一类有析构函数，如：

```
virtual ~MergeMove()
{

    mergeIndex1=-1; // for debugging
    mergeIndex2=-1; // for debugging
} 
```

另一个类包含一个类型的成员`boost::shared_ptr<Move>`，其中`Move`是 的基类`MergeMove`。的析构函数`Move`是虚拟的。

```
class Forest
{
     vector< boost::shared_ptr<Move> > moves;
     ....
} 
```

在我的代码崩溃时，我发现`moves.at(i)->mergeIndex1=-1`. 我很确定只有析构函数可以将其设置为`-1`. 此外，valgrind 报告了一些无效读取。我已经调试这个问题超过 24 小时......没有运气。我想我已经遵循了使用 shared_ptrs 的标准指南。

1) 总是立即将 new 的结果分配给 shared_ptr。没有原始指针。

2）在传递`this`给期望的函数`shared_ptr`时，我使用了`shared_from_this()`. 但是我已经`*this`将一些函数传递给了一些参考——我想应该没问题。

可能是什么问题呢？我使用的是 gcc 版本 4.4.5 (Ubuntu/Linaro 4.4.4-14ubuntu5.1) 有一些已知的错误吗？如何进一步调试它？

这是 valgrind 的输出...确认过早删除：

```
==28242== Invalid read of size 8
==28242==    at 0x5CAAFA: boost::shared_ptr<Symbol>::get() const (shared_ptr.hpp:424)
==28242==    by 0x5E0160: bool boost::operator==<Symbol, Symbol>(boost::shared_ptr<Symbol> const&, boost::shared_ptr<Symbol> const&) (shared_ptr.hpp:481)
==28242==    by 0x5C5851: MergeMove::applyMove(Forest&) (mcmcParsh.h:1022)
==28242==    by 0x5C43C4: Forest::applyMove(int) (mcmcParsh.h:704)
==28242==    by 0x5C4408: Forest::applyMoveToClone(int) (mcmcParsh.h:709)
==28242==    by 0x5C46C1: Forest::genMoveAndApplyToClone() (mcmcParsh.h:753)
==28242==    by 0x5C64D3: BeamSearch::sampleNextBeam() (mcmcParsh.h:1414)
==28242==    by 0x5C65F9: BeamSearch::runBeamSearch() (mcmcParsh.h:1431)
==28242==    by 0x58F2CA: find_most_violated_constraint_marginrescaling(pattern, label, structmodel*, struct_learn_parm*) (svm_struct_api.cpp:221)
==28242==    by 0x5AC5FE: find_most_violated_constraint(svector**, double*, example*, svector*, long, structmodel*, struct_learn_parm*, double*, double*, long*) (svm_struct_learn.cpp:944)
==28242==    by 0x5AB339: svm_learn_struct_joint(sample, struct_learn_parm*, learn_parm*, kernel_parm*, structmodel*, int) (svm_struct_learn.cpp:719)
==28242==    by 0x5A62F5: main (svm_struct_main.cpp:81)
==28242==  Address 0x31461568 is 152 bytes inside a block of size 200 free'd
==28242==    at 0x4C27A83: operator delete(void*) (vg_replace_malloc.c:387)
==28242==    by 0x5C4EC0: MergeMove::~MergeMove() (mcmcParsh.h:971)
==28242==    by 0x60A0BA: void boost::checked_delete<MergeMove>(MergeMove*) (checked_delete.hpp:34)
==28242==    by 0x63A299: boost::detail::sp_counted_impl_p<MergeMove>::dispose() (sp_counted_impl.hpp:78)
==28242==    by 0x5AFBD9: boost::detail::sp_counted_base::release() (sp_counted_base_gcc_x86.hpp:145)
 ==28242==    by 0x5AFC9C: boost::detail::shared_count::~shared_count() (shared_count.hpp:217)
==28242==    by 0x5C367D: boost::shared_ptr<Move>::~shared_ptr() (shared_ptr.hpp:169)
==28242==    by 0x61EA5F: void std::_Destroy<boost::shared_ptr<Move> >(boost::shared_ptr<Move>*) (stl_construct.h:83)
==28242==    by 0x615EFF: void std::_Destroy_aux<false>::__destroy<boost::shared_ptr<Move>*>(boost::shared_ptr<Move>*, boost::shared_ptr<Move>*) (stl_construct.h:93)
==28242==    by 0x609806: void std::_Destroy<boost::shared_ptr<Move>*>(boost::shared_ptr<Move>*, boost::shared_ptr<Move>*) (stl_construct.h:116)
==28242==    by 0x5F57C4: void std::_Destroy<boost::shared_ptr<Move>*, boost::shared_ptr<Move> >(boost::shared_ptr<Move>*, boost::shared_ptr<Move>*, std::allocator<boost::shared_ptr<Move> >&) (stl_construct.h:142)
==28242==    by 0x5DF807: std::vector<boost::shared_ptr<Move>, std::allocator<boost::shared_ptr<Move> > >::~vector() (stl_vector.h:313) 
```

* * *

这是基类的代码

```
class Move
{
 private:
double costDelta;
double transProb;
LOSS_MAP_TYPE addMap;
LOSS_MAP_TYPE delMap;
protected:
bool transProbSet;
bool applied;

void setTransProbFromDelta()
{
    transProb=exp(costDelta/10.0);
    transProbSet=true;
}

public:
typedef  boost::shared_ptr<Move> SPtr;

virtual Move::SPtr clone()=0;
void applylabelMapDelta( LOSS_MAP_TYPE & lab)
{
    subtractLabelmap(delMap,lab);

    appendLabelmap(addMap,lab);
}

typedef SupportComplex<Floor> SCENE_TYPE;
void resetCostDelta()
{
    costDelta=0;
}

void adjustCostDeltaForNodeAddition(Symbol::Ptr newNode, Forest & cfor);
void adjustCostDeltaForNodeRemoval(Symbol::Ptr remNode, Forest & cfor);
virtual void adjustCostDeltaByLossForNodeAddition(Symbol::Ptr newNode, Forest & cfor);
virtual void adjustCostDeltaByLossForNodeRemoval(Symbol::Ptr remNode, Forest & cfor);

virtual string toString()=0;
double getCostDelta()
{
    return costDelta;
}

Move()
{
    transProb=false;
    costDelta=0;
    applied=false;
}

virtual bool moveCreationSucceded()
{
    return true;
}

virtual void applyMove(Forest & cfor)=0;
/**
 * 
 * @return Q(f',f) where f' is the forest which will be generated when
 * applyMove is called on f
 */
virtual double getTransitionProbUnnormalized()
{
    assert(transProbSet);
    return transProb;
}

virtual bool isInvalidatedOnDeletion(int index)=0;
virtual bool handleMove(int oldIndex, int newIndex)=0;
virtual ~Move() {}
}; 
```

`Symbol::Ptr`也是一个shared_ptr

```
class MergeMove: public Move
{
int mergeIndex1,mergeIndex2;
Symbol::Ptr mergeNode1,mergeNode2; // store nodes also for additional safety check
RulePtr mergeRule;
NonTerminal_SPtr mergeResult;

public:
virtual Move::SPtr clone()
{
    boost::shared_ptr<MergeMove> ret (new MergeMove(*this));
    cerr<<"mmclon:"<<toString()<<":"<<this<<"->"<<ret.get()<<endl;
    assert(ret->mergeIndex1!=-1);
    assert(ret->mergeIndex2!=-1);
    return ret;
}
typedef  boost::shared_ptr<MergeMove> SPtr;

virtual bool moveCreationSucceded()
{
    return (mergeResult!=NULL);
}

vector<Symbol::Ptr> marshalParams(RulePtr mergeRule)
{
    vector<Symbol::Ptr> nodes;
    if(mergeRule->getChildrenTypes().at(0)==string(typeid(*mergeNode1).name()))
    {
          nodes.push_back(mergeNode1);
          nodes.push_back(mergeNode2);
    }
    else
    {            
        assert(mergeRule->getChildrenTypes().at(0)==string(typeid(*mergeNode2).name()));
          nodes.push_back(mergeNode2);
          nodes.push_back(mergeNode1);            
    }
    return nodes;
}

virtual ~MergeMove()
{

    if(moveCreationSucceded())
            cerr<<"mmdel:"<<toString()<<":"<<this<<endl;
    mergeIndex1=-1; // for debugging
    mergeIndex2=-1; // for debugging
}

MergeMove(Forest & cfor, int mergeIndex1, int mergeIndex2, RulePtr mergeRule)
{

    assert(mergeIndex1>=0);
    assert(mergeIndex2>=0);
    this->mergeIndex1=mergeIndex1;
    this->mergeIndex2=mergeIndex2;
    this->mergeRule=mergeRule;
    assert(mergeRule->getChildrenTypes().size()==2);

    assert(mergeIndex1!=mergeIndex2);

    mergeNode1=cfor.getTree(mergeIndex1);
    mergeNode2=cfor.getTree(mergeIndex2);

    assert(cfor.getTree(mergeIndex1)==mergeNode1);
    assert(cfor.getTree(mergeIndex2)==mergeNode2);
    mergeResult=mergeRule->applyRuleMarshalledParams(marshalParams(mergeRule));

    if(mergeResult==NULL)
    {
        return;
    }

    mergeResult->declareOptimal(false);

            adjustCostDeltaForNodeAddition(mergeResult,cfor);
    adjustCostDeltaForNodeRemoval(mergeNode1,cfor);
    adjustCostDeltaForNodeRemoval(mergeNode2,cfor);
    setTransProbFromDelta();
            cerr<<"mmcreat:"<<toString()<<endl;

}

virtual string toString()
{
    return mergeNode1->getName()+","+mergeNode2->getName()+"->"+mergeResult->getName();
}

virtual void applyMove(Forest & cfor)
{
    applied=true;
    // safety checks ... in the face of index updates
    assert(cfor.getTree(mergeIndex1)==mergeNode1);
    assert(cfor.getTree(mergeIndex2)==mergeNode2);

    cfor.deleteTree(mergeIndex1);// max to reduce #index updates in moves

    assert(cfor.getTree(mergeIndex2)==mergeNode2);

    cfor.replaceTree(mergeIndex2,mergeResult); // isSpanDisjo
}

virtual bool isInvalidatedOnDeletion(int index)
{
    if(index==mergeIndex1 || index==mergeIndex2)
        return true;

    return false;
}

virtual bool handleMove(int oldIndex, int newIndex )
{
    bool changed=false;

    if(mergeIndex1 == oldIndex)
    {
        mergeIndex1 = newIndex;
        changed=true;
    }

    if(mergeIndex2 == oldIndex)
    {
        mergeIndex2 = newIndex;
        changed=true;
    }

    return changed;
}
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T05:51:17.987

看起来我修复了段错误。此外，valgrind 不再报告无效读取。但我不确定为什么它会更早出现段错误。可能，我在问题第二点的第二行中的假设是错误的——“但我已经将 *this 传递给了一些作为参考的函数——我想应该没问题。”

以前，Move::applyMove 被声明为

```
virtual void applyMove(Forest & cfor)=0; 
```

我做了一个包装器并确保所有调用都使用包装器。

```
virtual void applyMove(boost::shared_ptr<Forest> cfor)
{
    applyMove(*cfor);
} 
```

我的代码中的所有 Forest 对象都是动态分配和管理的`shared_ptr`

相应地，我的 Forest::applyMove(int) 从

```
void applyMove(int index)
{
    Move::SPtr selMove=moves.at(index);
    selMove->applyMove(*this);
} 
```

至

```
void applyMove(int index)
{
    Move::SPtr selMove=moves.at(index);
    selMove->applyMove(shared_from_this());
} 
```

# jquery - Joomla 中的 jQuery 冲突 MooTools

> ID：10792855
> 
> 赞同：0
> 
> 时间：2012-05-29T03:52:17.007
> 
> 标签：jquery, joomla

我想在我的 Joomla 网站上添加一个 jQuery 滑块，但滑块不起作用。一段时间后，我发现了问题：jQuery 和 MooTools 冲突。我用谷歌搜索了这个问题，但我无法解决它。

**jQuery 脚本：**

```
<script>
     jQuery.noConflict();

   </script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script src="js/jquery.flexslider-min.js"></script> 
```

我已将此脚本放在正文标记的末尾。谁能帮我？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T03:56:21.863

把你包含的jquery.min.js`jQuery.noConflict()` *之后*`jQuery`，否则不定义。

我不熟悉 flexslider，但如果它是一个表现良好的插件，它将在`.noConflict()`.

（没有看到更多你的代码，我无法猜测是否还有其他问题。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-26T05:18:43.167

将脚本放入 head 标记中，放入`js\jquery.flexslider-min.js`put内，放入括号`$.noConflict()`内的`(function()`put内。`$`

PS请张贴jquery.flexslider-min.js的内容

# php - 在 Smarty 中获取多维数组中的特定数组

> ID：10792856
> 
> 赞同：1
> 
> 时间：2012-05-29T03:52:33.843
> 
> 标签：php, arrays, multidimensional-array, smarty

我有以下 multidim 数组；

```
[features] => Array
    (
        [0] => Array
            (
                [value] => Foo
                [id_feature] => 9
            )

        [1] => Array
            (
                [value] => Bar
                [id_feature] => 10
            )

    ) 
```

作为 Smarty 的新手，而且它的处理方法经常是逆向的，我不知道从哪里开始，如果我想根据该数组的值获得一个特定的`id_feature`数组。

也就是说，我需要将例如包含“9”的数组放入一个变量中`id_feature`。

我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T04:19:20.703

使用 in_array 怎么样？

```
<?php
function getArray($search) {
   foreach($features as $val) {
      if(in_array($search, $val)){
        return $val;
      }
   }
 }
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T06:33:17.683

前提是您在 PHP 中分配了这样的内容：

```
$features = array( 
    array("value" => "Foo", "id_feature" => 9), 
    array("value" => "Bar", "id_feature" => 10) );
$smarty->assign('features', $features); 
```

在 Smarty 模板中，`{$features[0].value}`会给你`Foo`.

您还可以使用`{for}`或`{foreach}`- 检查文档[http://www.smarty.net/docsv2/en/遍历数组](http://www.smarty.net/docsv2/en/)

甚至可以`{php}`直接用tag来写PHP：

```
{php}
  global $features;
  print_r($features);
{/php} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T08:22:14.213

试试这个聪明的代码：

```
{foreach from=$features item=f}

  {if $f.id_feature eq 9}

   {$f.value}

   {$f.id_feature}

  {/if}

{/foreach} 
```

# mysql - Rails 开发 - 无法连接到“localhost”上的 MySQL 服务器 (10061)

> ID：10792862
> 
> 赞同：15
> 
> 时间：2012-05-29T03:54:07.393
> 
> 标签：mysql, ruby-on-rails, mysql2

我是使用 MySQL 作为数据库的 Rails 开发新手。我可以使用以下命令成功连接到 MySQL：

```
 MySQL -u macDaddy -p 
```

在命令提示符下，所以我知道用户是有效的并且 MySQL 正在运行。但是当我尝试跑步时

```
 rake db:schema:dump 
```

在命令行我得到这个错误：rake aborted！无法连接到“localhost”上的 MySQL 服务器 (10061)

我的 database.yml 有问题吗？这里是：

```
 development:
      adapter: mysql2
      encoding: utf8
      reconnect: false
      database: bookmobile
      pool: 5
      username: macDaddy
      password: booklover
      host: localhost
      socket: mysql
      port: 3306 
```

我也试过删除端口和套接字线，但我仍然得到同样的错误。请帮忙。这是我的版本：

*   在 Windows 7 上开发
*   MySQL Ver 14.14 distrib 5.5.21 for win64
*   服务器版本 5.5.21
*   导轨 3.2.1

谢谢！

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-05-29T04:33:50.510

我最好的猜测是您表示为 Windows 的机器启用了 IPv6 网络。因此，当您尝试访问 localhost 时，它会解析为“::1”。这实际上是本地机器，然而，默认 MySQL 安装通常将绑定地址设置为 127.0.0.1，这将导致 localhost 在此设置中失败。

您可以通过`ping localhost`从命令提示符运行来验证这一点，并查看是否收到如下响应：

```
 Reply from ::1: time<1ms 
```

要解决此问题，您可以更改配置以指定：

```
 host: 127.0.0.1 
```

或者，您可以更改 MySQL 的配置以允许不同的绑定地址，例如 localhost 而不是 127.0.0.1。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-11T19:25:39.637

只需将您的主机更改为主机：127.0.0.1

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-06-08T11:08:22.117

将**database.yml中的****主机**值更改为**“127.0.0.1”**即可。或者，您可以修改您电脑的主机文件，添加一个项目为“localhost 127.0.0.1”。

 ***** * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-08-18T12:34:32.047

我遇到了类似的错误，但这是因为 database.yml 中缺少端口：3306。一旦我添加了端口：3306 问题就解决了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-29T04:30:36.907

这是因为您没有在数据库服务器（mysql）中设置密码，试试这个：

```
development:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: bookmobile
  pool: 5
  username: macDaddy
  password:
  host: localhost
  socket: mysql
  port: 3306 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-02-08T15:29:27.577

确保您在创建 MySQL 时设置的端口号（例如：7777），请使用适当的“用户名”和“密码”添加端口号。

```
default: &default
  adapter: mysql2
  encoding: utf8
  pool: 5
  username: root
  password: admin
  host: localhost
  port: 7777 
```

在 app 目录的 config 目录中的 database.yml 中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-10-09T05:36:12.123

确保 mysql 服务器正在运行。****

# iphone - NSDocumentDirectory 加载图像

> ID：10792873
> 
> 赞同：0
> 
> 时间：2012-05-29T03:55:38.860
> 
> 标签：iphone, ios, xcode, ipad

我能够将我的文件数组保存在我的`NSDocumentDirectory`. 这是我使用的：

```
 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *documentsDir = [paths objectAtIndex:0];
        NSString *savedImagePath = [documentsDir stringByAppendingPathComponent:[NSString stringWithFormat:@"Images%d.png", i]];
         ALAssetRepresentation *rep = [[info objectAtIndex: i] defaultRepresentation];
        UIImage *image = [UIImage imageWithCGImage:[rep fullResolutionImage]];
        //NSData *imageData = UIImagePNGRepresentation(image);
        [UIImageJPEGRepresentation(image, 1.0) writeToFile:savedImagePath atomically:YES]; 
```

我的问题是如何将这种格式的图像加载`@"Images%d.png"`到这段代码中：

。H

```
@property (strong, nonatomic) NSMutableArray *images; 
```

.m

```
 self.images = ?????? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-26T10:35:34.427

用于将图像保存到`NSDocumentDirectory`

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask, YES);
        NSString *documentsDirectory = [paths objectAtIndex:0];//m_nImageIndex
        NSString *imagename = [NSString stringWithFormat:@"savedImage%d.png",m_nImageIndex];
        NSString *savedImagePath = [documentsDirectory stringByAppendingPathComponent:imagename];
        // Get PNG data from following method
        NSData *myData =     UIImagePNGRepresentation(image);
        // It is better to get JPEG data because jpeg data will store the location and other related information of image.
        [myData writeToFile:savedImagePath atomically:NO];
        //[UIImageJPEGRepresentation(image ,1) writeToFile:savedImagePath atomically:NO]; 
```

用于检索图像

```
 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,     NSUserDomainMask, YES);
          NSString *documentsDirectory = [paths objectAtIndex:0];
          NSString *getImagePath = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"savedImage%d.png",indexPath.row]];
          UIImage *img = [UIImage imageWithContentsOfFile:getImagePath];

          cell.backgroundView = [[UIImageView alloc] initWithImage:img]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T06:35:13.050

这是从 bundle 中读取图像名称的代码。请将捆绑路径修改为文档目录路径。代码片段将为您提供排序图像名称的数组，也使您免于使用*for 循环*来读取名称。

```
NSString *bundlePath = [[NSBundle mainBundle] bundlePath];
NSFileManager *fileManager = [NSFileManager defaultManager];
NSArray *dirContents = [fileManager contentsOfDirectoryAtPath:bundlePath error:nil];
NSPredicate *filter = [NSPredicate predicateWithFormat:@"self ENDSWITH '.png'"];
NSArray *unsortedImages = [dirContents filteredArrayUsingPredicate:filter];
NSArray *sortedImages = [unsortedImages 
                     sortedArrayUsingComparator:
                     ^NSComparisonResult (id obj1, id obj2){
                         return [(NSString*)obj1 compare:(NSString*)obj2 
                                                 options:NSNumericSearch];
                    }]; 
```

**友情提示：**避免在**NSDocumentDirectory**目录中存储任何可下载的数据/图像，因为应用程序可能会被拒绝。改用**NSCachesDirectory**。请阅读Apple 开发者门户上的这篇[文章和相关文档。](http://iphoneincubator.com/blog/data-management/local-file-storage-in-ios-5)

干杯！！
阿马尔。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T16:48:47.887

您将 png 扩展名保存为 jpg 文件。我相信这应该有效：

```
 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDir = [paths objectAtIndex:0];
    NSString *savedImagePath = [documentsDir stringByAppendingPathComponent:[NSString stringWithFormat:@"Images%d.jpg", i]];
    ALAssetRepresentation *rep = [[info objectAtIndex: i] defaultRepresentation];
    UIImage *image = [UIImage imageWithCGImage:[rep fullResolutionImage]];
    [UIImageJPEGRepresentation(image, 1.0) writeToFile:savedImagePath atomically:YES];

    // to load the image later:
    UIImage *imageFromDisk = [UIImage imageWithContentsOfFile:savedImagePath]; 
```

# antlr - 使用 ANTLR 的 QuickBasic 语法

> ID：10792880
> 
> 赞同：1
> 
> 时间：2012-05-29T03:57:31.280
> 
> 标签：antlr

我正在使用 ANTLR 和以下语法：

```
grammar QuickBasic;

options 
{
    language = 'CSharp2';
    output = AST;
}

parse
    :    block EOF
    ;

block
    :    (labelStatement | labeledStatement | statement)*
    ;

labelStatement
    :    label ':' -> ^(label)
    ;

labeledStatement
    :    label statement -> ^(label statement)
    ;

statement
    :    assignment
    ;

assignment
    :    IDENTIFIER '=' value -> ^('=' IDENTIFIER value)
    ;

value
    :    (IDENTIFIER | constant)
    ;

constant 
    :    (STRING | INTEGER | REAL)
    ;

label
    :    (ALPHANUMERIC)+
    ;

IDENTIFIER
    :    LETTER (ALPHANUMERIC)*
    ;

REAL
    :    (INTEGER '.' NATURAL)
    ;

INTEGER
    :    ('-')? NATURAL
    ; 

SPACE
    :    (' ' | '\t' | '\r' | '\n' | '\u000C') {Skip();} 
    ;

STRING
    :    '"' ('""' | ~'"')* '"'
    ;

fragment NATURAL
    :    (DIGIT)+
    ;   

fragment ALPHANUMERIC
    :    (DIGIT | LETTER)
    ;

fragment DIGIT
    :    '0'..'9'
    ;

fragment LETTER
    :    ('a'..'z' | 'A'..'Z')
    ; 
```

有了这个，我正在尝试解析以下文件：

```
PI = 3.141592
CALC:
100 A = 1 
```

接下来发生的是'CALC：'行应该是一个标签，但它试图解析为一个语句，并给我一个错误，说不匹配的输入'：'期待'='。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T07:53:09.627

你的`label`规则是错误的：

```
label
    :    (ALPHANUMERIC)+
    ; 
```

因为`ALPHANUMERIC`是一个片段词法分析器规则，它只能被其他词法分析器规则使用，而不能在解析器规则中使用。您的词法分析器将仅生成以下标记：`IDENTIFIER`、、`INTEGER`和（`REAL`以及`STRING`解析器规则中的文字标记，例如`'.'`等）：使这些成为您可以在解析器规则中使用的唯一词法分析器规则。

此外，您应该只创建具有单个*唯一*根的 AST。您正在尝试为两者创建一个根，这`labelStatement`不会`labeledStatement`使其与其他解析器规则区分开来：使 tree walker（ANTLR 的 tree walker 或您自己的 tree walker）在遇到此类 AST 的根时遇到问题. 更好地创建（想象的）`LABEL`和`LABELED_STAT`令牌并使它们成为您的 AST 的根：

```
...

tokens 
{
    LABEL;
    LABELED_STAT;
}

parse
    :    block EOF
    ;

...

labelStatement
    :    label ':' -> ^(LABEL label)
    ;

labeledStatement
    :    label statement -> ^(LABELED_STAT label statement)
    ;

...

label
    :    IDENTIFIER
    |    INTEGER
    ; 
```

这将创建以下 AST：

![在此处输入图像描述](../Images/1e93820ba43b8efcecb04e88673da474.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T05:02:17.117

尝试使用小写的 skip() 而不是 Skip() 和类似的东西来允许多个空格

```
SPACE
    :    (' ' | '\t' | '\u000C' | '\n' | '\r' )+ {skip();} 
    ; 
```

# c# - 我需要更改与给定 VisualStyle 不同的 GridDataControl 中所选单元格的背景

> ID：10792881
> 
> 赞同：0
> 
> 时间：2012-05-29T03:57:53.217
> 
> 标签：c#, wpf, syncfusion

正如主题所描述的，我在我的应用程序中使用了 Syncfusion GridDataControl，我已将 VisualStyle="DefaultOffice2007Silver" 和 ShowFilterBar="True" 设置为。

我的应用程序基于 c# .net、wpf 概念。

现在，当我单击网格控件或过滤器栏中的单元格时，所选单元格显示与我选择一行时相同的蓝色。我的要求是将所选单元格更改为某种浅色可见颜色（可能是白色），以便用户可以轻松识别所选单元格，而无需更改视觉样式。

最初我们使用的是 8.403 版本的 dll，它具有与我所需的行为相同的行为，但我们现在已经升级到 10.104 dll，因此假设行为发生了变化。

请求尽快回答问题，因为它有点紧急。

谢谢，马纳利

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T06:54:35.343

You can customize the selection and Current cell background using StyleManager.

```
<syncfusion:GridDataControl x:Name="datagrid"
                            Grid.Row="1"
                            ItemsSource="{Binding GDCSource}"
                            ShowFilterBar="True"
                            VisualStyle="Office14Blue">
    <syncfusion:GridDataControl.StyleManager>
        <syncfusion:GridDataStyleManager>
            <syncfusion:GridDataStyleManager.RowAppearence>
                <syncfusion:RowAppearence CurrentCellSelectionBackground="Green" CurrentCellSelectionForeground="White" 
                                            HighlightSelectionBackground="AliceBlue" HighlightSelectionForeground="Black"/>
            </syncfusion:GridDataStyleManager.RowAppearence>
        </syncfusion:GridDataStyleManager>
    </syncfusion:GridDataControl.StyleManager>
</syncfusion:GridDataControl> 
```

The background of filter bar in edit mode is customized through customer cell renderer in the below sample, [http://www.syncfusion.com/downloads/Support/DirectTrac/95320/SyncGDC_948121498908578.zip](http://www.syncfusion.com/downloads/Support/DirectTrac/95320/SyncGDC_948121498908578.zip)

Regards, Sivakumar

# ios - Apple 如何对视图控制器中的元素执行自动旋转？

> ID：10792882
> 
> 赞同：0
> 
> 时间：2012-05-29T03:58:00.937
> 
> 标签：ios, opengl-es

我在希望特定视图始终保持纵向模式时遇到自动旋转问题。

我发现的一个建议是在检测到这样的横向旋转时将视图旋转回来：

```
- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation 
                                         duration:(NSTimeInterval)duration
{
    float rotation;

    if (toInterfaceOrientation==UIInterfaceOrientationPortrait) {
        rotation = 0;
    } 
    else 
    if (toInterfaceOrientation==UIInterfaceOrientationLandscapeLeft) {
        rotation = M_PI_2;
    } 
    else
    if (toInterfaceOrientation==UIInterfaceOrientationLandscapeRight) {
        rotation = -M_PI_2;
    }

    videoWindow.transform = CGAffineTransformMakeRotation(rotation);
    openGLView.transform = CGAffineTransformMakeRotation(rotation);

} 
```

所以结果是，每当用户更改为横向模式时，视频视图都会正确地向后旋转，因此看起来不错，就好像它没有从一开始就旋转一样。

我的问题是 OpenGL 视图。当我将其旋转回来时，我的 OpenGL 绘图的内容会被扭曲，直到它们失败，并且我在日志上收到一条错误消息“无法制作完整的帧缓冲区对象 8cd6”

现在，如果我注释前面的代码并让视图控制器自动旋转 OpenGL 视图，它确实会旋转并且没有任何东西被扭曲（但在风景中，这些措施不适合。

所以我的问题是，苹果如何在检测到设备旋转时旋转事物，以便我可以向后模拟确切的过程以实现模拟旋转锁定 OpenGL 视图。

# javascript - jQuery中的选择器和条件问题

> ID：10792883
> 
> 赞同：0
> 
> 时间：2012-05-29T03:58:09.240
> 
> 标签：javascript, jquery

我有一个在整个文档中多次使用的简单 HTML 模板。它本质上是以下`div`元素，它围绕着几个`p`元素和另一个`div`带有 class 的元素`button`。出于可视化目的，这是一个示例：

```
<div class="content">    
    <p>First paragraph</p>
    <p>Second paragraph</p>

    <div><a class="button" href="http://www.apple.com/ipad/">Change me jQuery!</a></div>
</div>

<div class="content">    
    <p>First paragraph</p>
    <p>Second paragraph</p>

    <div><a class="button" href="http://www.apple.com/iphone/">Change me jQuery!</a></div>
</div> 
```

现在，将使用此模板在网站上发布内容的用户并不总是会在该锚标记中使用完全相同的 url，但我确实知道他们可以使用哪些。所以我试图用我的代码做的是：

1.  一旦内容发布并且锚标签给出了一个 url 地址，我想检查该地址并查看其中是否有特定的单词。如果找到该词，则将锚文本更改为我选择的内容。
2.  再次执行相同操作，但这次检查 url 字符串中的不同单词。

这是我写的：

```
$('.content').each(function () {
    var $this = $(this),
        $findP = $this.find('p');

    if ($findP.length > 2) {
        // Run some code
    } else if ( ($findP.length <= 2) && ($('a[href*="ipad"]')) ) {
        $this.find('a.button').text('Visit iPad site');
    } else if ( ($findP.length <= 2) && ($('a[href*="iphone"]')) ) {
        $this.find('a.button').text('Visit iPhone site');
    }
});​ 
```

**问题：**

*   两个锚标记的文本*仅*更改为我在jQuery 方法内的第一个**else if**语句中编写的文本字符串。`.text()`在我的示例中，第一个锚标记应采用文本“访问 iPad 站点”，而第二个锚标记应采用“访问 iPhone 站点”。这是这个例子的一个工作小提琴：http: [//jsfiddle.net/vj4xZ/1/](http://jsfiddle.net/vj4xZ/1/)

我猜问题出在这里，一旦找到第一个元素，所有锚标记都被分配 .text() 方法中的内容，代码就停在那里而不寻找第二个**else if**语句中的内容。如果是这种情况，或者手头的问题是其他问题，那么我怎样才能让它正常工作？对此的任何帮助将不胜感激。感谢您的时间！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T04:03:07.617

[http://jsfiddle.net/zerkms/vj4xZ/2/](http://jsfiddle.net/zerkms/vj4xZ/2/)

您需要将条件更改为：

```
} else if ( ($findP.length <= 2) && ($this.find('a[href*="ipad"]').length) ) { 
```

`$('a[href*="ipad"]')`*- 表示 - 如果文档中某处*有带有`ipad`in href的锚点

 *我改变的 - 仅限于通过当前元素搜索锚点`$this.find()`

您也可以`$('a[href*="ipad"]', $this)`改用，它会做同样的工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T04:22:25.287

Hiya 在这里做了一个不同的**演示：http:** [//jsfiddle.net/bKJfq/15/](http://jsfiddle.net/bKJfq/15/)

上面的演示使用了这个选择器之一：http: [//api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

[http://api.jquery.com/attribute-contains-selector/](http://api.jquery.com/attribute-contains-selector/)

一旦选择器匹配，它会将文本更改为您想要的所需文本。

这很可能是不那么冗长的方式；如果我错过了什么，请告诉我。

希望这会有所帮助 B-)

**代码**

```
 $('a[href*="ipad"]').text("Visit iPad site");
   $('a[href*="iphone"]').text("Visit iPhone site"); 
```*

# iphone - UITextView 文本不是从顶部开始

> ID：10792884
> 
> 赞同：48
> 
> 时间：2012-05-29T03:58:18.390
> 
> 标签：iphone, uitextview

我有一个`UITextView`. 我希望它的文本从顶部开始，但我不是从顶部开始。请看一下我的代码：

```
UITextView *myTextView = [[UITextView alloc] init];
myTextView.frame = rect;
myTextView.editable = NO;
myTextView.font = [UIFont fontWithName:@"Helvetica" size:MAIN_FONT_SIZE];
myTextView.backgroundColor = [UIColor clearColor];
myTextView.text = sourceNode.label;
myTextView.dataDetectorTypes = UIDataDetectorTypeAll;
[cell.contentView addSubview:myTextView];
[myTextView sizeToFit];
[self alignTextToTopTextView:myTextView]; 
```

**alignTextToTopTextView**：

```
-(void)alignTextToTopTextView :(UITextView*)textView{

    CGRect frame = textView.frame;
    frame.size.height = textView.contentSize.height;
    textView.frame = frame;
} 
```

**请看下面的截图**。

`UITextView`位于右侧。

![在此处输入图像描述](../Images/ff8af3a3d7d8af3de1df0c7a3c686f45.png)

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-05-29T04:50:14.357

在你的 UITextView 中像这样设置 Content Inset

```
youtextView.contentInset = UIEdgeInsetsMake(-7.0,0.0,0,0.0); 
```

以您想要的方式调整顶部值。这应该解决你的问题。

**编辑：**

如果您在使用 iOS7 或更高版本时遇到问题，请尝试使用...

> [yourTextView setContentOffset: CGPointMake(x,y) 动画:BOOL];

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2014-11-05T03:43:21.927

在 viewDidLoad 方法中添加

```
self.automaticallyAdjustsScrollViewInsets = false 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2016-02-23T22:44:34.803

我是这样做的。当滚动禁用时，从顶部加载的文本。加载后比启用滚动。

```
- (void)viewDidLoad{
myTextView.scrollEnabled = NO;  
}       
- (void)viewDidAppear:(BOOL)animated {
[super viewDidAppear:animated];
myTextView.scrollEnabled = YES;
} 
```

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2017-03-12T11:25:14.407

现有的解决方案都没有帮助，但这有**帮助**：

目标-C：

```
- (void)viewDidLayoutSubviews {
    [self.yourTextView setContentOffset:CGPointZero animated:NO];
} 
```

**斯威夫特 3**：

```
override func viewDidLayoutSubviews() {
    textView.setContentOffset(CGPoint(x: 0, y: 0), animated: false)
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-04-30T13:43:09.940

这就是我使用的

```
textView.textContainerInset = 
    UIEdgeInsetsMake(
        0,
        -textView.textContainer.lineFragmentPadding, 
        0, 
        -textView.textContainer.lineFragmentPadding
    )
; 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-07-04T12:03:33.793

```
self.yourTextView.scrollEnabled = NO;

self.yourTextView.textContainerInset = UIEdgeInsetsMake(0, 0, 0, 0); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-01-23T12:00:13.720

```
- (void) viewDidLoad {
   [textField addObserver:self forKeyPath:@"contentSize" options:(NSKeyValueObservingOptionNew) context:NULL];
   [super viewDidLoad];
}

-(void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context {
   UITextView *tv = object;
   //Center vertical alignment
   //CGFloat topCorrect = ([tv bounds].size.height - [tv contentSize].height * [tv zoomScale])/2.0;
   //topCorrect = ( topCorrect < 0.0 ? 0.0 : topCorrect );
   //tv.contentOffset = (CGPoint){.x = 0, .y = -topCorrect};

   //Bottom vertical alignment
   CGFloat topCorrect = ([tv bounds].size.height - [tv contentSize].height);
    topCorrect = (topCorrect <0.0 ? 0.0 : topCorrect);
    tv.contentOffset = (CGPoint){.x = 0, .y = -topCorrect};
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-02-01T15:02:15.160

这是答案

在斯威夫特

```
termsTextView.contentOffset = CGPointMake(0, -220) 
```

在 Objective-C 中

```
[termsTextView setContentOffset: CGPointMake(0,-220) animated:NO]; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-06-02T11:31:27.437

这发生在我在 iOS 7 和 8 中设置`autoresizingMask`属性之后。`UITextView`

我找到了一个可选的解决方法：

```
- (void)viewWillAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    [yourTextView scrollRectToVisible:CGRectMake(0, 0, yourTextView.contentSize.width, 10) animated:NO];
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-03-06T02:36:06.163

如果您只想在不添加视图控制器管理的情况下正确加载故事板中的文本视图，则可以这样做（iOS 12，Swift 4.2）：

```
final class UITopLoadingTextView: UITextView {

    var shouldEnableScroll = false

    required init?(coder aDecoder: NSCoder) {
        super.init(coder: aDecoder)
        shouldEnableScroll = isScrollEnabled
        self.isScrollEnabled = false
    }

    override func layoutSubviews() {
        super.layoutSubviews()
        isScrollEnabled = shouldEnableScroll
    }
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-05-14T18:57:22.747

快速4解决方案：

```
self.textView.scrollRangeToVisible(NSMakeRange(0, 0)) 
```

# regex - 正则表达式的评估 /^\s*(\*|[\w\-]+)(?:\b|$)?/i

> ID：10792885
> 
> 赞同：0
> 
> 时间：2012-05-29T03:58:33.290
> 
> 标签：regex

我需要一些帮助来评估某些代码中的正则表达式。我正在尝试评估正则表达式

```
/^\s*(\*|[\w\-]+)(?:\b|$)?/i 
```

我想我想到了以下几点：

`^`- 字符的开始

`\s*`- 零次或多次出现空白

`(\*|[\w\-]+)`- 我了解`\w`word 的标准，但我不确定`\*`and the or`|`正在评估什么，并且`+`指定了前面模式的另一个出现。

`(?:\b|$)?`- 我需要帮助来理解这个和整个表达。

`i`- 忽略大小写

有些人可以帮助我理解`(?:\b|$)?`评估的内容和整个表达式吗？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T04:03:28.267

```
/                # Start regex delimiter.
^                # Anchor to start of string.
\s*              # Match 0 or more whitespace (\s) characters.
(\*|[\w\-]+)     # Alternation between a literal `*` and one or more word
                 # characters (\w) or a dash (needlessly escaped). Store in
                 # capturing group 1.
(?:\b|$)?        # Create a non capturing alternation between a word boundary
                 # or the end of the string. This entire alternation is 
                 # optional.
/                # End regex delimiter.
i                # Make the regex case insensitive. Needless here as there is 
                 # no literal alphabetical characters used. 
```

# javafx-2 - 如何使用 JavaFX 中的首选项中的值加载 FXML？

> ID：10792890
> 
> 赞同：3
> 
> 时间：2012-05-29T03:59:04.983
> 
> 标签：javafx-2

从 FXML 文件加载时，我使用的似乎是典型的 JavaFX start() 方法：

```
 public void start(Stage stage) throws Exception {
    this.stage = stage;
    Scene scene = new Scene(FXMLLoader.<AnchorPane>load(getClass().getResource("layout.fxml")));
    stage.setScene(scene);
    stage.show();
} 
```

我有一些与控件相对应的变量，例如：

```
 @FXML private TextField userName; 
```

我想将 userName 初始化为 Preferences 中的一个值，如下所示：

```
 prefs = Preferences.userRoot().node(this.getClass().getName());
    userName.setText(prefs.get("userName", userName.getText())); 
```

但我什么时候可以这样称呼？如果我在*stage.show* ()之前做，*userName*还没有被实例化。

TIA

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-29T08:28:23.963

使您的控制器实现`Initializable`并加载到`initialize()`：

```
public class Sample implements Initializable {
    @FXML private TextField userName;

    @Override
    public void initialize(URL url, ResourceBundle rb) {
        Preferences prefs = Preferences.userRoot().node(this.getClass().getName());
        userName.setText(prefs.get("userName", userName.getText()));
    }    
} 
```

另请注意，您可以使用`ResourceBundle`默认值并将其直接放入`fxml`文件中。只需创建`my.properties`文件并在加载期间使用它：

```
FXMLLoader.load(
    getClass().getResource("layout.fxml"),
    ResourceBundle.getBundle("my")); 
```

然后在您的 fxml 中，您可以使用以下属性`my.properties`：

```
<TextField fx:id="userName" text="%userName" /> 
```

# extjs - sencha android 打包错误 - 未记录的参数？

> ID：10792892
> 
> 赞同：7
> 
> 时间：2012-05-29T03:59:13.760
> 
> 标签：extjs

我的 sencha 配置似乎缺少一个参数，无法弄清楚它是从构建中生成的。

执行`sencha package build config.json`

使用 sencha 文档中指定的配置，该工具会生成命令：

`android create project --target android-7 --name appname --activity STActivity --path apppath --package pkg`

产生错误

> 无法创建android项目无法打包应用程序[错误]错误：目标ID无效。使用 'android list targets' 获取目标 ID。

煎茶论坛上也有[类似的投诉。](http://www.sencha.com/forum/showthread.php?190729-andriod-application-build-native&p=800012)有没有人找到解决这个问题的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T02:10:31.597

使用 Android SDK manager 安装 7 级平台。除非您在应用程序中需要更高级别的东西，否则它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-21T15:31:53.200

如果这不起作用，您可以尝试其他替代方法：使用 cordova 命令行界面创建 android 项目

```
$ cordova create hello com.example.hello HelloWorld 
```

然后使用

```
sencha app build package 
```

并将此内容粘贴到 assets/www 文件夹 andorid cordova app 中。

# python - 在 numpy 中查找对角线总和（更快）

> ID：10792897
> 
> 赞同：7
> 
> 时间：2012-05-29T04:00:50.980
> 
> 标签：python, numpy, sum

我有一些`board`像这样的numpy数组：

```
array([[0, 0, 0, 1, 0, 0, 0, 0],
       [1, 0, 0, 0, 0, 1, 0, 1],
       [0, 0, 0, 0, 0, 0, 0, 1],
       [0, 1, 0, 1, 0, 0, 0, 0],
       [0, 0, 0, 0, 0, 0, 0, 1],
       [0, 0, 0, 0, 1, 0, 0, 0],
       [0, 0, 1, 0, 0, 0, 1, 0],
       [1, 0, 0, 0, 0, 1, 0, 0]]) 
```

我正在使用以下代码来查找电路板从 -7 到 8 的每个第 n 条对角线上的元素总和（以及它的镜像版本）。

```
n = 8
rate = [b.diagonal(i).sum()
        for b in (board, board[::-1])
        for i in range(-n+1, n)] 
```

经过一些分析后，此操作大约需要整体运行时间的 2/3，这似乎是因为 2 个因素：

*   该`.diagonal`方法构建一个新数组而不是视图（看起来 numpy 1.7 将有一个新`.diag`方法来解决这个问题）
*   迭代是在列表理解中的 python 中完成的

那么，有什么方法可以更快地找到这些总和（可能在 numpy 的 C 层中）？

* * *

经过更多的测试，我可以通过缓存这个操作来减少 7.5 倍的总时间......也许我正在寻找错误的瓶颈？

* * *

还有一件事：

刚刚找到了`.trace`替换`diagonal(i).sum()`东西的方法……性能并没有太大的提升（大约2%到4%）。

所以问题应该是理解。有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T23:31:05.513

有一个可能的解决方案使用`stride_tricks`. 这部分基于[此问题](https://stackoverflow.com/q/4998587/577088)的答案中可用的大量信息，但我认为，问题只是不同而已，不能算作重复。这是应用于方阵的基本思想——参见下面的实现更通用解决方案的函数。

```
>>> cols = 8
>>> a = numpy.arange(cols * cols).reshape((cols, cols))
>>> fill = numpy.zeros((cols - 1) * cols, dtype='i8').reshape((cols - 1, cols))
>>> stacked = numpy.vstack((a, fill, a))
>>> major_stride, minor_stride = stacked.strides
>>> strides = major_stride, minor_stride * (cols + 1)
>>> shape = (cols * 2 - 1, cols)
>>> numpy.lib.stride_tricks.as_strided(stacked, shape, strides)
array([[ 0,  9, 18, 27, 36, 45, 54, 63],
       [ 8, 17, 26, 35, 44, 53, 62,  0],
       [16, 25, 34, 43, 52, 61,  0,  0],
       [24, 33, 42, 51, 60,  0,  0,  0],
       [32, 41, 50, 59,  0,  0,  0,  0],
       [40, 49, 58,  0,  0,  0,  0,  0],
       [48, 57,  0,  0,  0,  0,  0,  0],
       [56,  0,  0,  0,  0,  0,  0,  0],
       [ 0,  0,  0,  0,  0,  0,  0,  7],
       [ 0,  0,  0,  0,  0,  0,  6, 15],
       [ 0,  0,  0,  0,  0,  5, 14, 23],
       [ 0,  0,  0,  0,  4, 13, 22, 31],
       [ 0,  0,  0,  3, 12, 21, 30, 39],
       [ 0,  0,  2, 11, 20, 29, 38, 47],
       [ 0,  1, 10, 19, 28, 37, 46, 55]])
>>> diags = numpy.lib.stride_tricks.as_strided(stacked, shape, strides)
>>> diags.sum(axis=1)
array([252, 245, 231, 210, 182, 147, 105,  56,   7,  21,  42,  70, 105,
       147, 196]) 
```

当然，我不知道这实际上会有多快。但我敢打赌，它会比 Python 列表理解更快。

为方便起见，这里有一个完全通用的`diagonals`函数。它假设您要沿最长轴移动对角线：

```
def diagonals(a):
    rows, cols = a.shape
    if cols > rows:
        a = a.T
        rows, cols = a.shape
    fill = numpy.zeros(((cols - 1), cols), dtype=a.dtype)
    stacked = numpy.vstack((a, fill, a))
    major_stride, minor_stride = stacked.strides
    strides = major_stride, minor_stride * (cols + 1)
    shape = (rows + cols - 1, cols)
    return numpy.lib.stride_tricks.as_strided(stacked, shape, strides) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T10:30:06.460

正如我在评论中发布的那样，我不会进入 C 代码。

尝试使用**PyPy**。实际上它的 numpy 支持非常好（但是它不直接支持 array.diagonal） - 我没有检查是否有其他的 buidin 方法。紧张，我尝试了以下代码：

```
try:
    import numpypy  # required by PyPy
except ImportError:
    pass
import numpy

board = numpy.array([[0, 0, 0, 1, 0, 0, 0, 0],
       [1, 0, 0, 0, 0, 1, 0, 1],
       [0, 0, 0, 0, 0, 0, 0, 1],
       [0, 1, 0, 1, 0, 0, 0, 0],
       [0, 0, 0, 0, 0, 0, 0, 1],
       [0, 0, 0, 0, 1, 0, 0, 0],
       [0, 0, 1, 0, 0, 0, 1, 0],
       [1, 0, 0, 0, 0, 1, 0, 0]])

n=len(board)
def diag_sum(i, b):
    s = 0
    if i>=0:
        row = 0
        end = n
    else:
        row = -i
        end = n+i
        i = 0
    while i<end:
        s += b[row, i]
        i+=1
        row+=1
    return s

import time
t=time.time()
for i in xrange(50000):
    # rate = [b.diagonal(i).sum()
    #         for b in (board, board[::-1])
    #         for i in range(-n+1, n)]

    rate = [diag_sum(i,b)
            for b in (board, board[::-1])
            for i in range(-n+1, n)]

print time.time() - t 
```

结果是：

*   0.64s PyPy 与`diag_sum`
*   6.01s CPython 版本与`diag_sum`
*   5.60s CPython 版本与`b.diagonal`

# json - Lua 的等效 CURL，（Django API Json 到 Lua Json）POST 方法

> ID：10792898
> 
> 赞同：1
> 
> 时间：2012-05-29T04:00:55.757
> 
> 标签：json, curl, lua, coronasdk, django-piston

我有一个具有 JSON API 的 Django，我希望它能够在我的 Lua (Corona SDK) 项目中使用它。

如果我是`CURL`我的 Django 项目。

```
curl -l -X POST -d "message=getstrings" http://127.0.0.1:8000/api/getstrings/ 
```

这将返回：

```
{
    "message": "Something good happened on the server!", 
    "data": [
        {
            "code": "003", 
            "doc1": "sd.doc", 
            "title": "Test", 
            "artist": "ABBA", 
            "img": "sd.png", 
            "genre": "Pop"
        }, 
        {
            "code": "004", 
            "doc1": "sdsd.doc", 
            "title": "sdf", 
            "artist": "ABBA", 
            "img": "sdsd.png", 
            "genre": "Pop"
        }
    ], 
    "success": true
} 
```

`post method`我在for `json`in 中有问题`Lua`。我希望返回的 json 将在 Lua 中获取。

我在我的`Lua`.

```
local response = {}
local r, c, h = http.request{
  url= "http://127.0.0.1:8000/api/getstrings/",
  method = "POST",
  headers = {
    ["content-length"] = "",
    ["Content-Type"] = "application/x-www-form-urlencoded"
  },
  source = ltn12.source.string(post),
  sink = ltn12.sink.table(response)

}
local path = system.pathForFile("r.txt", system.DocumentsDirectory)
local file = io.open (path, "w")

file:write (response[1] .. "\n")
io.close (file) 
```

当我打开时`r.txt`：

我懂了 ...

```
File "home/myhome/workspace/djangoproj/api/handlers.py", line 21, in create
  if attrs['message'] == 'getstrings':

KeyError: 'message' 
```

我知道错误的原因是什么，因为`message`它的值没有被 Lua 传递。我的问题是像这个 CURL 这样的等效代码是什么

```
curl -l -X POST -d "message=getstrings" http://127.0.0.1:8000/api/getstrings/ 
```

在 Lua（Corona SDK）中，以便 Lua 可以获取并下载返回的`Json`? 我的代码`Lua`是正确的吗？

有人知道我的案子吗？提前致谢 ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T04:16:45.137

为什么不使用 Corona 提供的 network.request 功能呢？
它也是异步的。

```
local function listener(event)
    print(event.response)
    print(event.isError)
    print(event.status)
end

local url = "http://127.0.0.1:8000/api/getstrings/"

local body = "message=getstrings"

local headers = {}
headers["content-length"] = body:len(),
headers["Content-Type"] = "application/x-www-form-urlencoded"

local postData = {}
postData.body = body
postData.headers = headers

network.request(url,"POST",listener,postData) 
```

在这里阅读 [http://developer.anscamobile.com/reference/index/networkrequest](http://developer.anscamobile.com/reference/index/networkrequest)

**编辑**

如果你真的想使用 http.request 那么你可以这样做。

```
local url = "http://127.0.0.1:8000/api/getstrings/"
local body = "message=getstrings"
local headers = {
    ["content-length"] = body:len(),
    ["Content-Type"] = "application/x-www-form-urlencoded"
  }

local response = {}
local r, c, h = http.request{
  url= url,
  method = "POST",
  headers = headers,
  source = ltn12.source.string(body),
  sink = ltn12.sink.table(response)

} 
```

# javascript - 如何向 CSS 垂直下拉菜单添加延迟

> ID：10792903
> 
> 赞同：2
> 
> 时间：2012-05-29T04:01:41.837
> 
> 标签：javascript, jquery, menu

我需要为下拉菜单的 mouseover 事件添加延迟，这样如果有人将鼠标悬停在菜单上并转到页面上的另一个链接，则菜单不会立即下拉。谢谢你的帮助。

[http://jsfiddle.net/cgagliardi/NPVVQ/](http://jsfiddle.net/cgagliardi/NPVVQ/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T04:25:40.133

您可以添加一个`setTimeout()`来延迟`show()`，并在悬停时清除超时，这样如果用户在延迟结束之前将鼠标移出，它将被取消。您可以将其封装在您自己的 jQuery 插件中：

```
jQuery.fn.hoverWithDelay = function(inCallback,outCallback,delay) {
    this.each(function(i,el) {
        var timer;
        $(this).hover(function(){
           timer = setTimeout(function(){
              timer = null;
              inCallback.call(el);
           }, delay);
        },function() {
           if (timer) {
              clearTimeout(timer);
              timer = null;
           } else
              outCallback.call(el);
        });
    });
}; 
```

您可以像这样使用它：

```
$('ul.top-level li').hoverWithDelay(function() {
    $(this).find('ul').show();
}, function() {
    $(this).find('ul').fadeOut('fast', closeMenuIfOut);
}, 500); 
```

我匆忙拼凑了那个插件，所以我确信它可以改进，但它似乎在你的演示的这个更新版本中工作：http: [//jsfiddle.net/NPVVQ/3/](http://jsfiddle.net/NPVVQ/3/)

至于解释我的代码是如何工作的：`.each()`循环遍历调用函数的 jQuery 对象中的所有元素。对于每个元素，都会创建一个悬停处理程序，用于`setTimeout()`延迟调用所提供的回调函数 - 如果 mouseleave 在时间结束之前发生，则清除此超时，以便`inCallback`不调用。该`.call()`方法用于`inCallback`和`outCallback`为 设置正确的值`this`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T04:11:51.257

您可以使用 CSS3 动画或过渡。

[http://www.css3maker.com/css3-animation.html](http://www.css3maker.com/css3-animation.html)

[http://www.css3maker.com/css3-transition.html](http://www.css3maker.com/css3-transition.html)

或者您可以在 Javascript 中处理超时，我认为一种简单的方法是附加一个`setTimeout`before`show();`并`clearTimeout`在 mouseleave 事件上使用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T04:29:56.733

我更新了代码，现在您的菜单在**1/2 秒**后出现。 [演示](http://jsfiddle.net/ankur20us/NPVVQ/8/)

```
$('#navigation').show(2000); 
```

这足以延迟**jquery**中的***动画***....of **show()**。

 **我只是用另一个 div 来暂停你可以看到的动画。**

# php - 提高 xampp 本地主机上的执行速度 php 脚本

> ID：10792904
> 
> 赞同：-1
> 
> 时间：2012-05-29T04:01:58.157
> 
> 标签：php, mysql, performance, xampp, localhost

我必须从大量文本文件中提取单词并检查它们是否存在于 phpmyadmin 的这个大型 wordnet 数据库中。由于循环和检查（mysql），执行需要 3 到 4 分钟。

有什么办法可以优化吗？增加 db 缓冲区大小会有所帮助吗？如果是，那么该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T04:08:41.830

只需将单词作为哈希图一次全部加载到 php 内存中。喜欢

```
$words = array(
    'foo' => 1, 'bar' => 1, 'baz' => 1
);

//then check like
$exists = isset($words[ $word ]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T04:08:52.447

您可以将内存中所有单词的索引缓存在树结构中，并存储指向记录的指针，其中包含单词所在位置的偏移量。您可以使用[二叉树](http://en.wikipedia.org/wiki/Binary_search_tree)或自定义树，其节点可能有 26 个指针来获取下一个字母。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T04:50:39.893

在搜索和排序包含 1600 万行大学结果数据的数据库时，我曾经遇到过这个问题（印度大学很大:)）。我们经历了惊人的改进，使用`MyISAM`代替`InnoDB`并保持字段上的索引与子句中的顺序完全相同***。***`where`

这将使 MySQL 更快，但为了使 PHP 更快，我们只发现 Intel Xeon 适合此目的。对于测试环境，我们在多 CPU 四核 Xeon 服务器上安装了一个虚拟服务器，该服务器具有丰富的 RAM（16GB 是 4 年前丰富的）。我们在那里运行 PHP 脚本，MySQL 服务器位于附近的另一台服务器上，结果异常快速。仅供参考，我们没有任何线程或特殊代码，但是当我们的高端台式机和带有台式处理器的笔记本电脑似乎需要很长时间才能运行相同的脚本时，我们的普通脚本在那种环境中以惊人的速度运行！

不知道这是否会对您有所帮助，但只是想分享我的经验！

# wpf - 以英寸为单位设置richtextbox的大小，与显示器的大小和分辨率无关

> ID：10792905
> 
> 赞同：0
> 
> 时间：2012-05-29T04:02:29.843
> 
> 标签：wpf

我在 wpf 应用程序中使用富文本框。我想将 rtb 的宽度设置为 8.5"，将 rtb 的高度设置为 11.0"。它应该与显示器的分辨率、尺寸无关。请在这种情况下帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T04:43:46.903

对于所有显示器，没有统一的方法来执行此操作。您[可以以英寸为单位设置](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.width.aspx)宽度，但暗示显示器具有 96 DPI。有[一篇文章](http://www.odewit.net/ArticleContent.aspx?id=WpfDpiScaling&lang=en)详细解释了它。

# php - 如果 $_POST 变量存在，如何刷新页面？

> ID：10792916
> 
> 赞同：-1
> 
> 时间：2012-05-29T04:05:13.423
> 
> 标签：php, javascript, jquery

我有一些邮寄表格。单击提交按钮后，转到另一个页面。如果存在某些 $_POST 变量，我需要一次刷新页面。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T04:07:45.207

使用[POST/Redirect/GET](http://en.wikipedia.org/wiki/Post/Redirect/Get)模式。

定义`POST`请求以更新服务器端的某些状态。请求用于`GET`请求没有副作用的资源。因此，`POST`请更新您的服务器，然后将重定向标头发送到`GET`页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T09:21:16.567

不完全清楚您要达到的目标，但您可以尝试

```
if(isset($_POST['foo']) && !isset($_GET['refresh'])) {
  header("Location: /mypage.php?refresh");
} 
```

# java - 数组列表 - 级别的大小？

> ID：10792917
> 
> 赞同：0
> 
> 时间：2012-05-29T04:05:17.207
> 
> 标签：java, arrays, return

作为我家庭作业的一部分，我有以下代码：

```
 ArrayList <Integer> marks = new ArrayList();

  Collections.addAll(marks, (Integer.parseInt(markInput.getText())));

  private void analyzeButtonActionPerformed(java.awt.event.ActionEvent evt) 
  {
      analyzeTextArea.setText("Number at level R:" + calculateLevelR());
  }

  private int calculateLevelR() {
      int sum = 0;
      for (Integer mark: marks) {
          if(mark < 50)
              sum += mark;
          sum = marks.size();
      }
      return sum;
  } 
```

当用户输入一组成绩时，我试图计算并显示“R 级”（低于 50）的成绩数量，但上述代码无法正常工作，而是计算整个数组的大小。

我怎样才能让它只计算“R级”的成绩数量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T04:38:16.003

其他答案已经指出了确切的问题，看你的评论可能是一个代码片段可以更好地解释。见下文

```
 private int calculateLevelR() {
      int sum = 0;
      for (Integer mark: marks) {
          if(mark < 50)
              sum += mark;
          sum = marks.size(); // If mark is less than 50 add mark to sum else sum = size of arrayList
      }
      return sum;
  } 
```

你需要的是：

```
 private int calculateLevelR() {
      int sum = 0;
      for (Integer mark: marks) {
          if(mark < 50)
              sum++; // If mark is less than 50 increment sum
      }
      return sum; // finally when check all marks return sum, this sum will represent total number of marks less than 50.
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T04:07:57.007

也许是因为您在循环中`sum = marks.size();`紧随其后`sum += mark;`。

此外，您应该对分数进行加总，而不是值，因此如果分数低于 50（例如`++sum`），您应该只加 1，而不是实际分数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T04:07:59.653

那是因为您在调用 sum += mark; 之后将 sum 设置为 Marks.size()；只需删除 som=marks.size() 行。

# sql - 实现插件 cakePHP

> ID：10792921
> 
> 赞同：0
> 
> 时间：2012-05-29T04:06:30.657
> 
> 标签：sql, shell, cakephp, plugins

我正在尝试在我正在创建的应用程序中实现我发现的搜索插件。

[这是插件](http://www.neilcrookes.com/2009/11/21/cakephp-searchable-plugin/)；

到目前为止，我已将插件放入`'..cakePHP/app/Plugin/'`，添加`CakePlugin::loadAll()`到引导配置文件中并运行它提到的 SQL 查询，一切正常。

问题是当我尝试下一步并`'cake build_search_index'`从路径在终端中运行时`'app pjmil$'`，我得到了；

```
'Error: Shell class BuildSearchIndexShell could not be found.' 
```

我是否试图从错误的路径在 shell 中执行命令？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T05:47:02.733

问题是插件适用于 Cakephp 1.x，而不是 2.x。

# html - 你能在背景图像中淡入淡出，同时保持孩子的东西可见吗？

> ID：10792923
> 
> 赞同：0
> 
> 时间：2012-05-29T04:06:48.107
> 
> 标签：html, css, transitions

所以我有一个`<header>`标签，`<h1>`里面有一个标签。该`<header>`标签有一个 CSS 背景图像，我想使用 CSS 或 jQuery 慢慢淡入。

```
<header>
    <h1>Title</h1>
</header> 
```

这是否可能在不淡入整个`<header>`标签的情况下（这也会淡入`<h1>`标签？我不想以任何方式修改 HTML。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T04:10:38.607

子元素继承其父元素的不透明度。

如果您的背景是一种颜色，您可以`background-color`改为为属性设置动画。

如果它不是颜色，您可以将子元素移到动画元素之外，然后使用 CSS 定位，使它们看起来像子元素（或任何与您的设计相匹配的元素）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T04:24:39.540

我确定您可以`transition`使用以下方法从背景颜色转换为图像：

```
transition: background 5s linear 
```

因此，例如：

```
#div {
    -webkit-animation:ani 5s;       
    background: url('http://tinyurl.com/cxnemfx');
}

@-webkit-keyframes ani {
from {background: black;}
to {background: url('http://tinyurl.com/cxnemfx');}
}​ 
```

Chrome/Safari 演示：http: [//jsfiddle.net/f32RS/1/](http://jsfiddle.net/f32RS/1/)

但是，您可能希望从另一个图像过渡到最终图像以获得完整效果。这个例子就是这样，以及什么是可能的例子。;)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T04:12:45.980

这是不可能的，因为您`<h1>`是子节点。

如果不想修改 HTML，可以使用 jquery 将其`<h1>`移出，`<header>`然后分别对 header 进行动画处理。

例如：

```
$('header:first')
    .find('h1')
        .insertBefore('header:first')
        .end()
    .fadeIn(); 
```

您需要应用 CSS 规则，以便即使它不是子节点也`<h1>`能定位在它之上。`<header>`

# android - Android MediaPlayer 的 getDuration() 方法从元数据而不是实际媒体长度中获取值

> ID：10792929
> 
> 赞同：3
> 
> 时间：2012-05-29T04:07:23.850
> 
> 标签：android, android-mediaplayer

我正在开发一个应用程序，用户将能够通过 MediaPlayer 通过该应用程序播放他们的音乐。

我遇到的问题是，当调用 getDuration() 方法时，用户编辑的媒体文件给出的值不正确。我做了一些实验，似乎经常当用户使用音频编辑工具编辑歌曲时，元数据（包括歌曲长度）保持不变。这导致媒体播放器将歌曲视为 3 分钟歌曲，但实际上只有 30 秒。这是一个大问题，因为许多用户会在应用程序的媒体播放器中使用铃声或其他歌曲片段，这将导致进度条和显示歌曲长度的 TextView 不正确。

显然，我无法控制人们在使用我的应用程序之前使用的音频编辑工具的种类。我可以在应用端做些什么来提供准确的 getDuration() 值吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T04:48:49.677

以编程方式对媒体文件所做的修改不会反映在 MediaScanner 中。因此，如有必要，您可以尝试在应用程序启动时重新扫描媒体存储。请参阅[https://groups.google.com/group/android-developers/browse_thread/thread/cf41cc88b6eb4393](https://groups.google.com/group/android-developers/browse_thread/thread/cf41cc88b6eb4393)。

# c++ - 在这种情况下，atoi 到底发生了什么？

> ID：10792931
> 
> 赞同：1
> 
> 时间：2012-05-29T04:07:30.167
> 
> 标签：c++, c, atoi

我对 C 比较陌生，我很好奇为什么我`atoi`在这种情况下会遇到问题。我觉得我不理解一些基本的东西。这是我的示例代码：

```
int main()
{
    char last[3];
    last[2]='\0';
    uint16_t num1;
    uint16_t num2;

    // I read in num1 and num2 from a file and do an integer operation on them. bigarray is the file contents. bigarray[i] is a integer
    num1=bigarray[i] - 1;
    num2=bigarray[i+1] - 1;
    last[0]=(char)num1;
    last[1]=(char)num2;
    printf("%i\n:", atoi(last));
} 
```

当我打印出来 `last[0]`并`last[1]`单独打印时，它会给我正确的值。当我打印出来时`atoi(last)`，它给了我`0`。

为什么在这种情况下`atoi`给我，我`0`该如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T04:10:47.267

`atoi`需要 ASCII 字符，所以如果数组是，比如说`last[0] = 1`and `last[1] = 2`，它将找不到任何字符，如果是 `last[0] = '1'`并且`last[1] = '2'`它会打印`12`。

在这种特殊情况下，您可以通过以下方式实现：

```
last[0]='0' + num1;
last[1]='0' + num2; 
```

（假设`num1`和`num2`介于 0-9 之间）

简短的编辑来解释这个想法：

`'0'`数字(0x30) 到`'9'`(0x39)的 ascii 值是连续的，因此添加`0`到`'0'`(0x30) 将得到`'0'`(0x30)，添加`2`到`'0'`(0x30) 将得到`'2'`(0x32)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T04:59:24.277

看一下这个

```
char a=48;
printf("%i",a); //this would give you an output of 48
printf("%c",a); //this would give you an output of 0
printf("%c",48); //this would give you an output of 48
printf("%i",atoi(a)); //this would give you an output of 0
printf("%i",atoi("50")); //this would give you an output of 2 
```

atoi() 函数要求值采用 ascii 格式。

含义字符“0”等于整数 48。
含义字符“1”等于整数 49。
含义字符“2”等于整数 50
。...依此类推

当您进行类型转换时，您只是在更改数据大小。比如你的代码

```
...
last[0]=(char)num1;
... 
```

来自 num1 的数据的大小被缩减，以便它可以适合字符数据类型，然后将其存储到字符类型变量中，但该值仍然与存储在 num1 中的值相同。

所以，如果你仍然打算这样做，只需更改这些行

```
...
last[0]=(char)num1;
last[1]=(char)num1;
... 
```

至

```
...
last[0]=(char)num1+48;
last[1]=(char)num2+48;
... 
```

甚至可以这样做

```
...
last[0]=num1+48;
last[1]=num2+48;
... 
```

并且更改上面的代码行后，您可以使用代码正确显示值

```
...
printf("%i\n:", atoi(last));
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T04:11:27.320

我认为这是因为您正在尝试打印出数组。你想打印出一个值吗？还是使用 for 循环的所有值？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T04:11:45.007

这`last[0]=(char)num1;`只是将数字转换为一个字符，但它的值保持不变（并在您的情况下被截断，因为`num1`它是 16 位长）。

因此，在使用之前您没有将数字转换为其`char*`表示形式`atoi`，您只是在不同类型上转换数字（不涉及 ASCII 编码）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-29T04:12:15.637

`atoi()`适用于以 null 结尾的 ascii 字符串，而不是数字。你可能只是想要`printf("%d%d\n", num1, num2);`

将数字分配给 char 与将该字符串作为 ASCII 十进制数字的可读表示不同。为此，请尝试`sprintf()`.

# php - 元素（按钮）得到ajax响应不起作用？

> ID：10792937
> 
> 赞同：0
> 
> 时间：2012-05-29T04:08:01.237
> 
> 标签：php, ajax, yii

我有一个要更新状态和评论的网站我必须从数据库中列出我的所有状态和评论查询，并且在更新它时我有要更新的表单在我使用 html 代码（如状态）之前插入评论按钮不起作用我的代码是第一个是 ajax 请求的返回字符串

```
 echo '
    <div class="stbody">
        <div class="stimg">
            <img width="40" height="40" src="/images/uploads/.' . $json_data["picture"] .'">
       </div>
        <div class="sttext">' .
         "  AAAAAAA" .
        '</div>
        <a href="#" class="delete" style="display: none; "> Remove</a>

        <a href="#"id ="comment_link">Comment</a>
        <span class="icodot"> 5 comment</span>
        <span class="likelink"><a  href="" isliked="0">Like</a> 10 liked</span>
        <div id="box_comment" class="bxcomment">
            <form>
                <div id="status' . $model->status_id . '" class="rowcomment" >
                    <div class="rowcommentlt">
                        <a>
                            <img width="40" height="40" src="http://3.1.s50.avatar.zdn.vn/avatar_files/3/c/d/8/giaosudau_50_3.jpg">
                        </a>                                        
                        <textarea class ="text_area"  id="txtComment' . $model->status_id . '"></textarea>
                        <br>
                    </div> 
                    <div class="bxcmtend">
                        <span class="tipcmtend">Nhấn Shift + Enter để xuống dòng</span>
                        <span class="btncmtend">
                            <a class="comment_submit" href="#" 
                            onclick="return false;" id="' . $model->status_id . '"><em>Comment</em></a>             
                            <a onclick="return false;" rel="for_3073657831" id="emofeed_3073657831" class="emofeed" href="#" tabindex="0"></a>
                        </span>
                    </div>
                </div>
            </form>

        </div>
    </div> 

'; 
```

在接收我有脚本来处理更新状态和更新评论 **首先是处理评论**

```
$(".comment_submit").click(function(){
    var element = $(this);
    var status_id = element.attr("id");
    var comment = $("#txtComment"+status_id).val();
    var dataString = 'comment='+ comment + '&status_id=' + status_id;
    if(comment=='')
    {
        alert("Please Enter Some Text");
    }
    else
    {

        $("#flash"+status_id).show();
        $("#flash"+status_id).fadeIn(400).html('<img src="ajax-loader.gif" align="absmiddle"> loading.....');
        $.ajax({
            type: "POST",
            url: "insertajax.php",
            data: dataString,
            cache: false,
            success: function(html){
                $("#loadplace"+Id).append(html);
                $("#flash"+Id).hide();
            }
        });
    }
    return false;
}); 
```

**二是处理更新状态**

```
success: function(data){

                $(data).prependTo(".timeline").slideDown("slow");                                
                $(".loading").hide();
                $(".input_box").val("So what's on your mind?").css("color","#808080")
                .css("height","30px");
            } 
```

当我收到 html 代码时可以，但我点击评论它不起作用。

感谢提前。 **我应该怎么做我应该响应客户端 json 并在客户端中使用 html 代码插入它们？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T17:10:30.333

我问过一个人，我的问题是处理所有页面中的事件，你应该使用 .on() 或 live() 在这种情况下，我从更改`$(".comment_submit").click(function(){`为`$(document).on('click', '.comment_submit', function(){`

它有效。谢谢大家

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T11:30:45.470

Are you saying the reponse never works? IN

```
$("#loadplace"+Id).append(html); 
$("#flash"+Id).hide(); 
```

the "ID" is undefined. This means the response will never show. You probably mean status_id?

# vb.net - 在 VB .net 中将对象日期转换为字符串

> ID：10792944
> 
> 赞同：0
> 
> 时间：2012-05-29T04:09:20.970
> 
> 标签：vb.net, date, text

我需要将 item.MergedDate（一个日期）转换为字符串。

代码如下

```
If item.MergeDate.ToString() = "12/31/9999 11:59:59 PM" Then
    item.MergeDate = ""
End If 
```

显然这是一次可怕的尝试，但是

我试过 = 什么都没有，也没有用。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T06:56:45.197

只是 SSS 想法的扩展，但您可以向项目添加另一个属性 MergeDateAsString （或者我想重载它）

```
 Public Property Merge() As String
        Get
            Return _MergeDate
        End Get
        Set(ByVal value As String)
            _MergeDate = value
        End Set
    End Property

    Public ReadOnly Property MergeDateAsString
        Get
            Dim returnValue As String = String.Empty
            If _MergeDate <> Date.MinValue Then
                returnValue = _MergeDate.ToString
            End If
            Return returnValue
        End Get
    End Property 
```

然后改为绑定到新属性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T04:45:12.500

将 Item.MergeDate 属性的数据类型更改为 String

您不能将文本存储在 Date 变量中。

# r - 用于更新 R Markdown 代码以使用“$latex”分隔符的命令行程序

> ID：10792946
> 
> 赞同：7
> 
> 时间：2012-05-29T04:09:36.530
> 
> 标签：r, sed, awk, mathjax, rstudio

**更新（2012 年 6 月 13 日）：** [RStudio 现在支持一系列 mathjax 分隔符，](http://www.rstudio.org/docs/authoring/using_markdown_equations)包括不带`latex`.

* * *

在 0.96中， [RStudio 将其 Mathjax 语法](http://blog.rstudio.org/2012/05/25/mathjax-syntax-change/)从`$<equation>$`to更改为`$latex <equation>$`用于内联方程，从`$$<equation>$$`to 更改`$$latex <equation>$$`为用于显示方程。

因此，总而言之：

> 修改后的语法将`latex`限定符添加到 $ 或 $$ 等式开始分隔符。

我有一些使用原始`$`分隔符的现有脚本，我想更新它们以使用新的`$latex`分隔符。我在想 sed 或 awk 可能是合适的。

像这样出现在 r 代码块中的美元也不应该被更改。

```
```{r ...}
x <- Data$asdf
``` 
```

### 问题

*   什么是一个好的简单命令行程序，可能使用 sed 或 awk 来更新我的 R Markdown 代码以使用 R Studio 中较新的 mathjax 分隔符？

## 工作示例 1

原文：

```
$y = a + b x$ is the formula.
This is some text, and here is a displayed formula
$$y = a+ bx\\
x = 23$$

```{r random_block}
y <- Data$asdf
```

and some more text     
$$y = a+ bx\\
x = 23$$ 
```

变身后变成

```
$latex y = a + b x$ is the formula.
This is some text, and here is a displayed formula
$$latex y = a+ bx\\
x = 23$$

```{r random_block}
y <- Data$asdf
```

and some more text     
$$latex y = a+ bx\\
x = 23$$ 
```

## 工作示例 2

```
`r opts_chunk$set(cache=TRUE)`
<!-- some comment -->

Some text

<!-- more -->
Observed data are $y_i$ where $i=1, \ldots, I$.  
$$y_i \sim N(\mu, \sigma^2)$$

Some text $\sigma^2$ blah blah $\tau$. 

$$\tau = \frac{1}{\sigma^2}$$

blah blah $\mu$ and $\tau$

$$\mu \sim N(0, 0.001)$$
$$\tau \sim \Gamma(0.001, 0.001)$$ 
```

应该成为

```
`r opts_chunk$set(cache=TRUE)`
<!-- some comment -->

Some text

<!-- more -->
Observed data are $latex y_i$ where $latex i=1, \ldots, I$.  
$$latex y_i \sim N(\mu, \sigma^2)$$

Some text $latex \sigma^2$ blah blah $latex \tau$. 

$$latex \tau = \frac{1}{\sigma^2}$$

blah blah $latex \mu$ and $latex \tau$

$$latex \mu \sim N(0, 0.001)$$
$$latex \tau \sim \Gamma(0.001, 0.001)$$ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T05:37:21.543

使用`perl`并回顾一下，应该可以解决问题：

```
perl -pe 's/\b(?<=\$)(\w+)\b /latex $1 /g' file.txt 
```

使更改与`-i`标志一致：

```
perl -pe -i 's/\b(?<=\$)(\w+)\b /latex $1 /g' file.txt 
```

**编辑：**

试试这个怪物：

```
perl -pe 's/\b(?<=\$)(\w+)\b(\$?)([ =])/latex $1$2$3/g;' -pe 's/(?<=\$)(\\\w+)/latex $1/g' file.txt 
```

高温高压

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T19:37:16.997

这可能对您有用：

```
sed '/^```{r/,/^```$/b;/^`r/b;:a;/\\\\$/{$!{N;ba}};s/\(\$\$\)\([^$]*\(\$[^$]*\)*\$\$\)\|\(\$\)\([^$]*\$\)/\1\4latex \2\5/g' file 
```

注意`r codeblock`代码可能需要扩展/更改，因为从示例代码来看，它的构成并不明显。

# ios - 以弯曲的格式显示文本

> ID：10792948
> 
> 赞同：2
> 
> 时间：2012-05-29T04:09:55.197
> 
> 标签：ios, text-rendering

我希望以弯曲格式绘制一些文本。我使用哪个控件无关紧要`UITextField`：`UILabel`或`UITextView`.

我只想显示类似图像中显示的文本

![在此处输入图像描述](../Images/3e88aad93451c265cfa0e6b3858c0fd0.png)

仍在寻找解决方案。请帮忙 ？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-29T04:27:29.857

[看看这个链接](https://nodeload.github.com/yllan/funtextfield/zipball/master)。虽然这是针对 mac 的，但我认为您可以将其移植到 ios

以上链接已过时。请从此[链接中找到您的解决方案](https://stackoverflow.com/a/22655562/1357774)

我能想到的其他事情并不是一个简单的出路。将一个字符串作为一个字母数组，稍后为每个字母取标签，然后将每个标签旋转到某个角度，以便为您的文本创建一个弧线。第二种方法需要更多的操作和逻辑:) 一切顺利。

# css - 如何制作具有圆角和背景颜色的 Div？

> ID：10792950
> 
> 赞同：4
> 
> 时间：2012-05-29T04:10:45.980
> 
> 标签：css, html, background-color, rounded-corners

当我分配“背景颜色：foo;”时 到我的 CSS 文件中的一个元素，我没有得到任何颜色。我还需要声明哪些其他属性，我设置了绝对宽度？它是否需要一个父容器（它有一个基本的父容器）？我在这里想念什么？！

另外我想用 HTML5 给它圆角。角落只需要在 Safari 中工作，因为它是用于网络应用程序而不是一般消费。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-29T04:22:06.950

看来您有 2 个问题： 1\. 为元素设置背景；2\. 你想为一个元素设置圆角并在 safari 中工作。

1.  如果您的元素是 div 标签，则需要设置 div 标签的宽度和高度，例如：

    `<div id='mydiv'>some elements here</div>`

你的CSS：

```
 #mydiv { 
      background-color: #111;
      height: 100px;
      width:100px
   } 
```

2.设置圆角（以下代码适用于所有浏览器）：

```
 .round-corner {
      -webkit-border-radius: 5px 5px 5px 5px; 
      -moz-border-radius: 5px 5px 5px 5px;
      -o-border-radius: 5px 5px 5px 5px;
      border-radius: 5px 5px 5px 5px;
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T04:13:30.693

背景颜色必须是十六进制或浏览器可识别的有效字符串

所以，像这样：

`background: #F0F0F0;`

或者

`background: white;`

对于边框：

`border-radius: 4px;`

**[演示](http://jsfiddle.net/ncVBh/1/)**

# javascript - 这2个javascript有什么区别？

> ID：10792952
> 
> 赞同：1
> 
> 时间：2012-05-29T04:10:50.123
> 
> 标签：javascript, jquery

我一直在使用 Javascript，但更多的是程序方式而不是面向对象的方式。最近，我刚刚开始以 OOP 方式学习 Javascript。任何人都可以告诉有什么区别：

```
var foo = {
   method1 : function(){
  }
} 
```

和

```
var foo = function(){
   method: function(){
  }
} 
```

这两个是相同的还是第一个静态类？如果两者相同，那么我的第二个问题是如何编写方法并静态调用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T04:14:09.820

第一个可以被认为是一个静态类，例如你可以调用`foo.method1()`.

第二个是完全**错误**的，会导致语法错误。

编写静态类以供重用的一种方法是使用[`module pattern`](http://www.adequatelygood.com/2010/3/JavaScript-Module-Pattern-In-Depth)：

```
var Foo = (function() {
    var private_variable = 1;

    function private_function() {
        return private_variable + 5;
    }

    return {
        get_private_variable: function() { return private_variable; },
        run_private_function: function() { return private_function(); }
    }
}());

Foo.get_private_variable(); // returns 1
Foo.get_private_function(); // returns 6 
```

顺便说一句，像上面这样的静态类通常以标题大小写（`Foo`而不是`foo`）来编写，以将它们与常规对象或变量区分开来。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T04:14:23.447

它们之间的**主要**区别在于第二个是不正确的并且没有意义。如果你运行它，你会看到`SyntaxError: Unexpected token (`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T04:38:55.297

在第一种情况下，您使用对象字面量定义对象。从 OOP 的角度来看，它是一个单例。

```
var myObject = {
    field: value,
    method: function() { }
} 
```

另一个在语法上不正确。然而，该代码可能想要类似于的是构造函数。

```
var myConstructor = function() {
    this.field = value;
    this.method = function() {};
} 
```

如果使用关键字`myConstructor`调用它，`new`

*   将创建一个新对象
*   `myConstructor`将使用`this`set 运行以引用这个新对象，因此`field`and`method`属性将被附加到它上面
*   新对象将被返回

例子：

```
var myObject = new myConstructor(); 
```

构造的每个新对象实例都`myConstructor()`将收到它自己的函数副本`method`。这种方式`prototype`通常用于存储函数，但这超出了这个问题的范围。

至于静态方法，一种可能是将其直接添加到构造函数中。这是可能的，因为函数在 JS 中也是对象。想象一下这个例子。

```
var myConstructor = function() {
   // keep track of this instance
   myConstructor.addInstance(this);
}

myConstructor.instances = new Array();

myConstructor.addInstance = function(obj) {
    myConstructor.instances.push(obj);
}

myConstructor.getInstances = function() {
    return myConstructor.instances;
}

var myObject1 = new myConstructor();
var myObject2 = new myConstructor();
alert(myConstructor.getInstances()); // [object Object],[object Object] 
```

在这种情况下，构造函数包含一个包含所有现有实例和操作它的方法的数组。这些字段和方法可以被认为是 的静态属性`myConstructor`，因为它们包含在构造函数（替代经典 OOP 的类）本身中，并且不需要实例化来访问它们。

# compiler-construction - Lisp / Clojure DSL 的函数与符号

> ID：10792961
> 
> 赞同：3
> 
> 时间：2012-05-29T04:11:57.283
> 
> 标签：compiler-construction, clojure, lisp, dsl

我正在 Clojure 中创建一个 DSL，并且可以选择：

a) 以符号形式表示 DSL，以后可以转换为 AST：

```
'(foo (bar (baz 1) (boo 3))) 
```

b) 将 DSL 表示为生成 AST 节点的纯函数：

```
(foo (bar (baz 1) (boo 3)))
=> [AST with foo at top level] 
```

随后将编译 AST。

是否有充分的理由偏爱一种方法而不是另一种方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T04:23:45.943

看起来方法 a) 更灵活，因为解析器将解析 s 表达式，并且基本上可以在表达式树中前后移动以生成 ex 所需的代码：在解析 foo 的子项时，解析器可以回溯到 foo 或可能到 foo 的父级以获取其他一些必需的信息等。而在 b) 方法中，DSL 是正常的函数调用，所以 boo 调用不知道它的父级等等，因此在这种情况下你不能应用回溯.

就复杂性而言 - a) 方法虽然很灵活，但可能有点复杂，特别是如果实施回溯，而方法 b) 应该易于实施，

# c++ - 多个文件包含到单个类冲突

> ID：10792965
> 
> 赞同：2
> 
> 时间：2012-05-29T04:12:36.547
> 
> 标签：c++, class, c-preprocessor, conflict

**这是问题的设置：**

1.  MainFile.c 调用文件 SubFileA.h 和 SubFileB.h
2.  SubFileA.h 需要调用类 SigleClass.h
3.  SubFileB.h 还需要调用类 SingleClass.h

**这是文件的内容。**

MainFile.h 包含以下几行：

```
#include "SubFileA.h"
#include "SubFileB.h"
... 
```

SubFileA.h 包含以下几行：

```
#include "SingleClass.h"
...
void InsertPendingRejectedTrx(SingleClass oLogic);
... 
```

SubFileB.h 包含以下几行：

```
#include "SingleClass.h"
...
void InsertPendingRejectedTrx(SingleClass oAnotherLogic); //line 52
... 
```

SingleClass.h 文件包含以下几行：

```
#ifndef SC_LOGIC
#define SC_LOGIC
...
[lots of codes]
...
#endif 
```

**这是错误代码：**

```
SubFileB.h: At global scope:
SubFileB.h:52: error: âSingleClassâ has not been declared 
```

当我尝试编译时，编译器返回错误。它说从 SubFileB 中，不包括“SingleClass”。我怎么解决这个问题？
注意：这些代码之前已经可以运行，但是当我出于某些原因从 SubFileB.h 中包含 SingleClass 时，编译器返回了错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T20:38:41.200

你需要集中你的头文件，创建一个头文件并将你的头文件包含在你给定的文件中。squid缓存服务器使用相同的算法，当然，你应该优先使用#include指令，因为它们依赖在一起。

# css - 将 div 与所有其他框对齐到顶部

> ID：10792966
> 
> 赞同：0
> 
> 时间：2012-05-29T04:12:36.993
> 
> 标签：css, css-float

嘿，这里都是我的表，我为每个表都放在了一个 DIV 中。

![浮动问题](../Images/fb0b24637e3f8547e8d1eb85ec44c1a7.png)

用于此的 CSS 代码是：

```
#PackageBG1 {
      position:relative;
      width:218px;
      z-index:10;
      top: 30px;
      bottom: 0;
      margin-left: 5px;
    }
    #PackageBG2 {
      position:relative;
      width:218px;
      z-index:10;
      top: 30px;
      bottom: 0;
      margin-left: 5px;
    }
    #PackageBG3 {
      position:relative;
      width:218px;
      z-index:10;
      top: 30px;
      bottom: 0;
      margin-left: 5px;
    }
    #PackageBG4 {
      position:relative;
      width:218px;
      z-index:10;
      top: 30px;
      bottom: 0;
      margin-left: 5px;
    } 
```

盒子的布局是：

```
<div id="PackageBG1">
<table id="PackageOne" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0" rowspan="4">&nbsp;</td>
        <td colspan="3">
            <img src="images/mobileit-design-work-MOBILEITINC3_03.jpg" width="215" height="10" alt=""></td>
        </tr>
    <tr>
        <td style="background-image: url(images/mobileit-design-work-MOBILEITINC3_11.jpg); background-repeat:repeat-y; background-position:left top;" width="3px"></td>
        <td style="background-image: url(images/mobileit-design-work-MOBILEITINC3_12.jpg); background-repeat:no-repeat; background-color:#ececec;">
            <div id="Package">
              <div id="playIcon">
                <img src="images/playIcon_53.png" width="28" height="24" />
              </div>
              <span class="packageTitle">Virtual Desktop</span>
              <span class="packageTitle-sub">Standard Package 1</span>
            </div>
            <div class="packages-text"><p>
              - Enter text here<br>
              - About<br>
              - Pkg<br>
              - Enter text here<br>
              - About<br>
              - Pkg <br>
              - Pkg <br>
              - another<br>
              - and another<br>
              - Pkg <br>
              - another<br>
              - and another<br>
              - another<br>
              - and another<br>              
              - and again
              </p></div>
            <span class="packages-price">$29.95</span><span class="packages-text-bold"> /month</span><br>
            </p>
            <div id="Package-ON"><img src="images/ordernow_55.png" width="133" height="35"></div>        
        </td>
        <td style="background-image: url(images/mobileit-design-work-MOBILEITINC3_13.jpg); background-repeat:repeat-y; background-position:right top;" width="3px"></td>
    </tr>
    <tr>
        <td colspan="3">
            <img src="images/mobileit-design-work-MOBILEITINC3_23.jpg" width="215" height="10" alt="">
      </td>
    </tr>
</table>
          </div> 
```

当第二个表格没有其他表格那么多的文本时，我试图让第二个表格与左右表格对齐。

**继承 JDFiddle 链接：http: [//jsfiddle.net/RBq3a/2/](http://jsfiddle.net/RBq3a/2/) **

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T05:04:40.310

给`vertical-align:top`你的TD。像这样写：

```
td,th {
    vertical-align:top;
} 
```

检查这个[http://jsfiddle.net/RBq3a/4/](http://jsfiddle.net/RBq3a/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T04:17:26.163

尝试添加`position: absolute; top: 0;`到框（表格）的内容。*编辑：*表格是块元素，所以我相信`vertical-align:top;`是正确的属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T04:34:42.927

添加`vertical-align:top;`到您的中心盒装..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T04:44:41.667

您的#PackageBG2、#PackageBG2、#PackageBG3、#PackageBG4 具有完全相同的代码，因此应移至 .packageBG 类。对于您的问题，请尝试以下操作：

```
.packageBG {
  position:relative;
  width:218px;
  display: inline-block; //made your element display inline
  vertical-align: top; //made your element align top
  z-index:10;
  top: 30px;
  bottom: 0;
  margin-left: 5px;
} 
```

将这些属性应用于所有元素

# ios - 链接错误引用

> ID：10792967
> 
> 赞同：0
> 
> 时间：2012-05-29T04:12:41.977
> 
> 标签：ios

我试图更新我们之前使用的框架，因为他们已经完全更新了它，所以更新文件的方法不仅仅是简单的。

在我的项目中，我刚刚删除了当前框架并添加了较新的框架。经过一些测试，我想回到旧版本，所以我删除了新框架并再次添加了旧框架。所以基本上代码或文件中没有任何变化。

但是，当我现在尝试构建我的文件时，我再次收到此链接错误，没有对代码进行任何更改。

> ld：在 /Users/wouter/Library/Developer/Xcode/DerivedData/WiC-dubdfuwbsdrffuatbuonqmpzuvcz/Build/Intermediates/WiC.build/Debug-iphonesimulator/WiC.build/Objects-normal/i386/DocumentViewController 中重复符号 _OBJC_IVAR_$_DocumentViewController.thumbPage -B98A1B42C236E973.o 和 /Users/wouter/Library/Developer/Xcode/DerivedData/WiC-dubdfuwbsdrffuatbuonqmpzuvcz/Build/Intermediates/WiC.build/Debug-iphonesimulator/WiC.build/Objects-normal/i386/DocumentViewController-B98A1B42C236E973.o架构 i386
> 
> clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

如果一切都和以前一样，为什么会给我这个错误？我的猜测是 Xcode 保留了一些对已删除文件的引用（即使我要求删除它们）。

关于如何摆脱这个的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T04:26:07.440

你确定你在同一个版本？你能用 git 回到那个版本吗？

所以你的项目是找到至少 2 个 ivar DocumentViewController.thumbPage 的副本......你有没有：

1.  做一个干净的一切
2.  删除构建目录

如果这不起作用，我将搜索项目或 project.pbxproj 文件（仅使用文本编辑器）并查看是否可以找到将添加到包含此目标的对象或 2 个框架。

如果这不起作用，请删除 .xcodeproj 目录并创建一个新目录并将所有文件添加到其中......但这是最后的手段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T04:17:53.093

我敢打赌，您不小心#imported .m 文件而不是 .h 文件。检查以确保您的#import 读取

```
#import DocumentViewController.h 
```

做一个清洁并再次运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T04:34:37.237

事实证明，我的“编译源”保留了对先前删除的同一个文件的引用，试图删除它并没有帮助。在执行 Clean and Clean 构建文件夹后，问题神奇地得到了解决。

# python - 2.7版的Python星解包

> ID：10792970
> 
> 赞同：34
> 
> 时间：2012-05-29T04:12:55.697
> 
> 标签：python, iterable-unpacking

[如此处](https://stackoverflow.com/a/431959/386279)所述，您可以使用星号来解压缩未知数量的变量（如在函数中），但仅限于 python 3：

```
>>> a, *b = (1, 2, 3)
>>> b
[2, 3]
>>> a, *b = (1,)
>>> b
[] 
```

在 python 2.7 中，我能想到的最好的方法是（不可怕，但很烦人）：

```
c = (1, 2, 3)
a, b = c[0], c[1:] if len(c) > 1 else [] 
```

有没有办法像除法一样从 __future__ 导入它，还是我需要自己的函数在 python 2.7 中进行未知长度的解包？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-29T04:16:45.613

在 python 2.X 中，你可以这样做：

```
c = (1, 2, 3)
a, b = c[0], c[1:] 
```

只要`c`至少有一个成员，它就可以工作，因为如果它只有`c`1 个东西。`c[1:]``[]`

您可能应该确保至少有一件事`c`，否则`c[0]`会引发异常。

您可以执行以下操作：

```
try:
    c = tuple(c)
    a, b = c[0], c[1:]
except TypeError, IndexError:
    # c is not iterable, or c is iterable, but it doesn't have any stuff in it.
    # do something else
    pass 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-04T22:31:01.577

```
(a,b) = (None, []) if not len(c) else (c[0], c[1:]) 
```

也是处理 c 为空序列的情况的一种选择，尽管它不会区分 [None] 和 [] 作为对 a、b 的赋值。所以小心使用它，try / except 可能是最好的。

在处理空容器时，我看不出 Python 3 和 2.7 之间没有真正的区别，但这里 Python 3 的好处是它适用于任何可迭代对象。

如果您知道 c 是生成器，这在 2.7 中有效。

```
a,b = c.next(), c 
```

但是解包的全部美感似乎需要 Python 3。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-03-29T02:14:26.970

# 回答 ex13.py

```
from sys import argv

script=argv

def Fun(arg1, *argv): 
    print "First argument :", script 

    for arg in argv: 
        print"Your variable is:", arg

Fun('scrpit', 'first', 'second', 'third') 
```

# asp.net-mvc - 如何将图像从数据库加载到 Kendo UI 网格中

> ID：10792972
> 
> 赞同：0
> 
> 时间：2012-05-29T04:13:05.183
> 
> 标签：asp.net-mvc, visual-studio-2010, kendo-ui

我的数据库中有一个名为 Image 的字段。我想直接从数据库加载图像。我给了这样的模板：

`{ field: "Image", title: "image", template:"<img src ='#= Image #'/>"}`

它显示带有十字标记的图像。我怎样才能得到图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-07T05:40:52.813

```
public JsonResult GetData([DataSourceRequest] DataSourceRequest request)
        {
            var list = db.imageModels.ToList();
            return Json(list.ToDataSourceResult(request));
        }

@(Html.Kendo().Grid<TelerikMvcAppCombo.Models.ImageModel>()
.Name("grdImageModel")
.DataSource(datasource => datasource
    .Ajax()
    .Model(model => model.Id(p=>p.IMAGESIZE_ID))
    .Create(create => create.Action("Create", "Imagetest"))
    .Update(update => update.Action("Editing_Update", "Imagetest"))
    .Destroy(delete => delete.Action("Delete", "Imagetest"))
    .Read(read => read.Action("GetData", "Imagetest"))
        .Model(model =>
        {
            model.Field(p => p.IMAGESIZE_ID).Editable(true);
            model.Id(p => p.IMAGESIZE_ID);
            model.Field(p => p.IMAGESIZE_ID).Editable(false);
           // model.Field(p => p.isenabled).DefaultValue(true);
        })
    )
.Columns(columns =>
{
    //columns.Bound(c => c.IMAGESIZE_ID).ClientTemplate("<input type='checkbox' value #=IMAGESIZE_ID#  />").Width(50);
    columns.Bound(c => c.IMAGESIZE_ID).ClientTemplate("<input type='checkbox' value #=IMAGESIZE_ID#  />").Title("Image No");
    columns.Bound(c => c.IMAGESIZE_NAME).Width(140).Title("Image Name");
    columns.Bound(c => c.IMAGESIZE_DESC).ClientTemplate("<img src='" + Url.Content("~/Images/") + "#=IMAGESIZE_NAME#'/>").Title("Image");
    columns.Bound(c => c.created_by).Title("Created By");
    columns.Bound(c => c.created_date).Title("Created Date");
    columns.Bound(c => c.modified_by).Title("Modified By");
    columns.Bound(c => c.modified_date).Title("Modified Date");
    columns.Command(command =>
        {
            command.Edit(); command.Destroy();
        });
})
.ToolBar(toolbar => toolbar.Create())
.Editable(editable =>editable.Mode(GridEditMode.PopUp))//TemplateName("ImageModel")
.HtmlAttributes(new { style = "height: 580px;" })
.Scrollable()
.Sortable()
.Pageable(pageable => pageable
    .Refresh(true)
    .PageSizes(true)
    .ButtonCount(5)
)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T07:00:35.370

我们发布[了一篇详细的博客文章，演示了如何通过 ASP.NET Web API 公开数据](http://www.kendoui.com/blogs/teamblog/posts/12-05-11/hello_services_webapi_rest_json_and_ajax.aspx)。一旦您的数据可以通过 HTTP 访问，通过 Kendo UI 的 DataSource 组件绑定一个 Grid 小部件就很简单了。

# android - 使 Imageview 显示在全屏上

> ID：10792973
> 
> 赞同：1
> 
> 时间：2012-05-29T04:13:11.617
> 
> 标签：android

我在一个活动中有 4 个图像视图，我希望如果用户单击任何图像.. 图像应该弹出并全屏显示.. 我怎么能做到这一点？

使用 webviews 是更好的选择吗？

代码：包com.integrated.mpr；

```
import java.io.File;

import android.app.Activity;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.Bundle;
import android.os.Environment;
import android.widget.ImageView;
import android.widget.TextView;

public class FinalShow extends Activity{

    ImageView iva;
    ImageView ivb;
    ImageView ivc;
    ImageView ivd;

    File folder = null;

    Model model = new Model();

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.finalshow);

        iva = (ImageView) findViewById(R.id.iva);
        ivb = (ImageView) findViewById(R.id.ivb);
        ivc = (ImageView) findViewById(R.id.ivc);
        ivd = (ImageView) findViewById(R.id.ivd);

        String sdcardstate = android.os.Environment.getExternalStorageState();

        if(sdcardstate.contentEquals(android.os.Environment.MEDIA_MOUNTED)){

            String filepath = Environment.getExternalStorageDirectory().getPath();
            folder = new File(filepath,model.s);//model.s contains the name of folder

            File fa = new File(folder,"bmp1.png");
            Bitmap bmpa = BitmapFactory.decodeFile(fa.getAbsolutePath());
            iva.setImageBitmap(bmpa);

            File fb = new File(folder,"bmp2.png");
            Bitmap bmpb = BitmapFactory.decodeFile(fb.getAbsolutePath());
            ivb.setImageBitmap(bmpb);

            File fc = new File(folder,"bmp3.png");
            Bitmap bmpc = BitmapFactory.decodeFile(fc.getAbsolutePath());
            ivc.setImageBitmap(bmpc);

            File fd = new File(folder,"bmp4.png");
            Bitmap bmpd = BitmapFactory.decodeFile(fd.getAbsolutePath());
            ivd.setImageBitmap(bmpd);

        }

    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T04:40:22.763

创建一个在开始时不可见的图像视图（给出父级的完整高度和宽度）。单击任何图像时，将图像设置为此新的图像视图并使其可见。

首先确保新添加的 imageview 覆盖了整个高度和宽度。更好的是，您使用相对布局

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginLeft="14dp"
    android:src="@drawable/ic_launcher" />

<ImageView
    android:id="@+id/imageView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_marginLeft="16dp"
    android:layout_toRightOf="@+id/imageView1"
    android:src="@drawable/ic_launcher" />

<ImageView
    android:id="@+id/imageView3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/imageView1"
    android:layout_below="@+id/imageView1"
    android:layout_marginTop="19dp"
    android:src="@drawable/ic_launcher" />

<ImageView
    android:id="@+id/imageView4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignRight="@+id/imageView2"
    android:layout_alignTop="@+id/imageView3"
    android:src="@drawable/ic_launcher" />

<ImageView android:id="@+id/fullview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:src="@drawable/ic_launcher"
    android:visibility="gone"/> 
```

在java代码中，

```
 firstImageView.setOnclickListener(new ClickListener());
      secondImageView.setOnclickListener(new ClickListener());
      thirdImageView.setOnclickListener(new ClickListener());
      fourthImageView.setOnclickListener(new ClickListener());

 class ClickListener implements OnClickListener {

    public void onClick(View v) {
        // TODO Auto-generated method stub
        switch(v.getId()) {
                     case R.id.firstimage: // set image to fullimageview; break;
                      case R.id.secondimage:// set this image to fullimage break;
                    }

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T04:40:41.900

做一件事做一个新的活动：然后在图像点击调用另一个活动之间你可以添加动画弹出：

如您所说，在新活动中显示您的图像：对于图像的传递值，您也可以使用共享首选项或意图：祝您好运

# java - Java中JList中JCheckBox检查切换逻辑的问题

> ID：10792974
> 
> 赞同：3
> 
> 时间：2012-05-29T04:13:19.650
> 
> 标签：java, swing, jlist, jcheckbox, listcellrenderer

嗨，我在切换 JList 中的复选框时遇到问题，我希望在单击某个项目时使复选框打勾，如果再次打勾，我希望它切换为未打勾。我希望可以在不使用 ctrl 或 shift 键的情况下勾选或取消勾选多个项目。

```
public class CustCellRenderer extends JCheckBox
implements ListCellRenderer
{
    boolean selected = false;

    void CustCellRenderer()
    {
        setOpaque(true);
        setIconTextGap(12);
    }

// allows a custom list cell rendering which will enable me to display an icon as well as filename
    @Override
    public Component getListCellRendererComponent(JList list, Object value, int index, boolean isSelected, boolean cellHasFocus) 
    {
        JCheckBox checkBox = (JCheckBox)value;

        if (isSelected)
        {
            setBackground(list.getSelectionBackground());
            setForeground(list.getSelectionForeground());

            if (!selected)
            {
                selected = true;
                setSelected(selected);
            }
            else
            {
                selected = false;
                setSelected(selected);
            }
        }
        else
        {
            setBackground(list.getBackground());
            setForeground(list.getForeground());

            setSelected(selected);
        }

        setText(checkBox.getText());

        return this;
    }
} 
```

这是我尝试将数据添加到表中的方式，由于某种原因没有出现任何内容，有什么想法吗？

```
public void addDirectoryLabelsToList() 
{
    // clears all the previous labels from the listModel to ensure only labels
    // that refelect the current directory are shown
    for (int x = 0; x < tableModel.getRowCount(); x++)
        tableModel.removeRow(x);

    // iterate through the dirLabels and add them to the listModel
    for (JCheckBox j : dirLabels) 
    {
        Vector<Object> obj = new Vector<>();

        obj.add(Boolean.FALSE);
        obj.add(j.getText());

        tableModel.addRow(obj);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T06:10:46.660

如果我理解这个问题...

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class JListToggleLogicTest {
  private final ClearSelectionListener listener = new ClearSelectionListener();
  public JComponent makeUI() {
    JList<String> list = new JList<String>(makeModel()) {
      @Override public void setSelectionInterval(int anchor, int lead) {
        if(anchor==lead && lead>=0 && anchor>=0) {
          if(listener.isDragging) {
            addSelectionInterval(anchor, anchor);
          } else if(!listener.isCellInsideDragging) {
            if(isSelectedIndex(anchor)) {
              removeSelectionInterval(anchor, anchor);
            } else {
              addSelectionInterval(anchor, anchor);
            }
            listener.isCellInsideDragging = true;
          }
        } else {
          super.setSelectionInterval(anchor, lead);
        }
      }
    };
    list.setCellRenderer(new CheckBoxCellRenderer());
    list.addMouseListener(listener);
    list.addMouseMotionListener(listener);
    JPanel p = new JPanel(new GridLayout(1,2));
    p.add(makeTitledPanel("Default", new JList<String>(makeModel())));
    p.add(makeTitledPanel("SelectionInterval", list));
    return p;
  }
  private static DefaultListModel<String> makeModel() {
    DefaultListModel<String> model = new DefaultListModel<>();
    model.addElement("aaaaaaa");
    model.addElement("bbbbbbbbbbbbb");
    model.addElement("cccccccccc");
    model.addElement("ddddddddd");
    model.addElement("eeeeeeeeee");
    return model;
  }
  private static JComponent makeTitledPanel(String title, JComponent c) {
    JPanel p = new JPanel(new BorderLayout());
    p.setBorder(BorderFactory.createTitledBorder(title));
    p.add(new JScrollPane(c));
    return p;
  }
  public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
      @Override public void run() {
        createAndShowGUI();
      }
    });
  }
  public static void createAndShowGUI() {
    JFrame f = new JFrame();
    f.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
    f.getContentPane().add(new JListToggleLogicTest().makeUI());
    f.setSize(320, 240);
    f.setLocationRelativeTo(null);
    f.setVisible(true);
  }
}

class ClearSelectionListener extends MouseAdapter {
  private static void clearSelectionAndFocus(JList list) {
    list.getSelectionModel().clearSelection();
    list.getSelectionModel().setAnchorSelectionIndex(-1);
    list.getSelectionModel().setLeadSelectionIndex(-1);
  }
  private static boolean contains(JList list, Point pt) {
    for(int i=0; i<list.getModel().getSize(); i++) {
      Rectangle r = list.getCellBounds(i, i);
      if(r.contains(pt)) return true;
    }
    return false;
  }
  private boolean startOutside = false;
  private int     startIndex = -1;
  public boolean  isDragging = false;
  public boolean  isCellInsideDragging = false;
  @Override public void mousePressed(MouseEvent e) {
    JList list = (JList)e.getSource();
    startOutside = !contains(list, e.getPoint());
    startIndex = list.locationToIndex(e.getPoint());
    if(startOutside) {
      clearSelectionAndFocus(list);
    }
  }
  @Override public void mouseReleased(MouseEvent e) {
    startOutside = false;
    isDragging = false;
    isCellInsideDragging = false;
    startIndex = -1;
  }
  @Override public void mouseDragged(MouseEvent e) {
    JList list = (JList)e.getSource();
    if(!isDragging && startIndex == list.locationToIndex(e.getPoint())) {
      isCellInsideDragging = true;
    } else {
      isDragging = true;
      isCellInsideDragging = false;
    }
    if(contains(list, e.getPoint())) {
      startOutside = false;
      isDragging = true; //add:2012-06-01
    } else if(startOutside) {
      clearSelectionAndFocus(list);
    }
  }
}
class CheckBoxCellRenderer extends JCheckBox implements ListCellRenderer<String> {
  @Override public Component getListCellRendererComponent(
      JList<? extends String> list, String value, int index,
      boolean isSelected, boolean cellHasFocus) {
    setOpaque(true);
    if(isSelected) {
      setBackground(list.getSelectionBackground());
      setForeground(list.getSelectionForeground());
      setSelected(true);
    }else{
      setBackground(list.getBackground());
      setForeground(list.getForeground());
      setSelected(false);
    }
    setText(value);
    return this;
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T04:29:01.777

`JList`允许自定义渲染器，但您也需要自定义编辑器。作为替代方案，请考虑`JTable`具有一`Boolean.class`列，如图[所示](https://stackoverflow.com/a/4528604/230513)。

附录：*我已经改变了我的问题，请检查*。

我不确定哪里出了问题，但我怀疑您的模型的`getColumnClass()`方法不会返回`Boolean.class`相关列。您可以将您的实现与此相关[示例](https://sites.google.com/site/drjohnbmatthews/table)进行比较并发布[sscce](http://sscce.org/)。

# android - 如何设置 ExpandableListView 的子文本颜色

> ID：10792977
> 
> 赞同：1
> 
> 时间：2012-05-29T04:13:46.513
> 
> 标签：android, colors, set, expandablelistview

我在活动中有一个 ExpandableListView。代码是：

```
 final ExpandableListView expandableListView = (ExpandableListView)findViewById(R.id.expandableListView1);  
  expandableListView.setDivider(null);
  expandableListView.setCacheColorHint(0);
  expandableListView.setGroupIndicator(null);
  final EEInterviewExpandableListAdapter adapter = new EEInterviewExpandableListAdapter(this);  
  expandableListView.setAdapter(adapter); 
```

适配器中的相关代码是：

```
public View getChildView(int groupPosition, int childPosition,
        boolean isLastChild, View convertView, ViewGroup parent) {
    String string = pageArray.get(groupPosition).get(childPosition); 
    boolean highlight=false;
    return getChildGenericView(string,highlight);    
}
public TextView getChildGenericView(String string,boolean highlight)    
{    
    // Layout parameters for the ExpandableListView    
    AbsListView.LayoutParams layoutParams = new AbsListView.LayoutParams(    
            ViewGroup.LayoutParams.FILL_PARENT, ViewGroup.LayoutParams.WRAP_CONTENT);
    TextView text = new TextView(activity);    
    text.setLayoutParams(layoutParams);    
    // Center the text vertically    
    text.setGravity(Gravity.CENTER | Gravity.LEFT);    
    // Set the text starting position    
    text.setPadding(0, 2, 0, 2);    
    text.setText(string.trim());    
    text.setBackgroundResource(R.drawable.childsep);
    if(highlight)
        text.setTextColor(R.color.expchdhighlightcolor);
    else
        text.setTextColor(R.color.expchdcolor);
    text.setTextSize(EEEnv.EEfontSize);
   return text;    
} 
```

我的问题是 settextcolor() 不起作用。我在网上搜索。据说expandableListView.setCacheColorHint(0); 可以解决。但问题仍然存在。有人知道这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T04:28:27.980

您需要像这样访问某些 XML 资源：

```
text.setTextColor(getResources().getColor(R.color.expchdhighlightcolor)); 
```

否则，您将传递引用资源的唯一 id ... 请注意运行时的区别：

```
Log.v("Test", "Not what I expected: " + R.color.expchdhighlightcolor);
Log.v("Test", "The hex value in decimal: " + getResources().getColor(R.color.expchdhighlightcolor)); 
```

# javascript - 为什么这个 Javascript/HTML5 Canvas 不起作用？

> ID：10792978
> 
> 赞同：1
> 
> 时间：2012-05-29T04:13:47.270
> 
> 标签：javascript, html, event-handling, html5-canvas

我正在尝试创建一个简单的游戏，并在按下左右按钮时，一张图片应该移动（并且在另一张图片和 之间变化`trexf`）`trexb`。

```
<canvas id="canvas" width="640" height="480" >
    Browser doesn't support canvas.
</canvas> 
```

```
var canvas = document.getElementById('canvas');
var ctx = canvas.getContext('2d');

var width, height, rightKey = false, leftKey = false, upKey = false, downKey = false, rex_x, rex_y = 300, trexf, trexb;

trexf = new Image('Trexf.png');
trexb = new Image('Trexb.png');

function clearCanvas() {
    canvas.width = canvas.width;
}

function drawRex() {
    if(rightKey) {
        rex_x += 5;
    } else if(leftKey) {
        rex_x -= 5;
    }

    ctx.drawImage(trexf, rex_x, rex_y);
    if(rightKey == false || leftKey == false) {
        ctx.drawImage(trexb, rex_x, rex_y);
    }
}

function loop() {
    clearCanvas();
    drawRex();
}

function keyDown(e) {
    if(e.keyCode == 39)
        rightKey = true;
    else if(e.keyCode == 37)
        leftKey = true;
}

function keyUp(e) {
    if(e.keyCode == 39)
        rightKey = false;
    else if(e.keyCode == 37)
        leftKey = false;
}

function init() {

    ctx.canvas.width = window.innerWidth - 30;
    ctx.canvas.height = window.innerHeight - 30;

    document.addEventListener('keydown', keyDown, false);
    document.addEventListener('keyup', keyUp, false);

    rex_x = canvas.width / 2;

    setInterval(loop, 1000);
}

init(); 
```

**在 JSFiddle 上试试[。](http://jsfiddle.net/bTvBn/)**

为什么这不能按我的预期工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T15:45:48.430

调低您的间隔计时器延迟计数：

[http://jsfiddle.net/bTvBn/42/](http://jsfiddle.net/bTvBn/42/)

它现在工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T15:41:26.347

这在 Chrome 中对我有用，但是您的绘制间隔太大（1 秒），因此在重绘之前触发了按键事件。

# javascript - 引导 api 中的 Javascript ......是什么！意思是

> ID：10792982
> 
> 赞同：0
> 
> 时间：2012-05-29T04:14:14.847
> 
> 标签：javascript, twitter-bootstrap

在 bootstrap.js 代码文件的开头，他们有这个

```
!function($) { 
```

这是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T04:41:14.567

如果您编写 this: `function something() {something}`，它是一个函数的声明，但它不会调用该函数（您必须`something()`稍后运行）。

因此，要实际调用该函数，您需要执行类似`(function(){})();`..." `!function($) {}`" 之类的操作，而不是将整个函数包装在括号中。感叹号语法是编写它的捷径。“！” 将该行转换为返回的表达式`true`。

# facebook-graph-api - 我如何通过 Open Graph API 知道活动是否有自定义个人资料图片或只是默认图片？

> ID：10792984
> 
> 赞同：0
> 
> 时间：2012-05-29T04:14:18.227
> 
> 标签：facebook-graph-api

> **可能重复：**
> [从用户（通过图形）获取 Facebook 个人资料图片 - 检测它是否是空白（即默认）图像？](https://stackoverflow.com/questions/7984041/getting-facebook-profile-pic-from-user-via-graph-detect-if-its-a-blank-i-e)

就像在 facebook 网站上一样，如果活动没有自定义个人资料图片，它将显示创建者的图片，我想知道是否有标志来指示它。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T04:55:38.657

没有标志表明这一点。`/eventid/picture`只返回 URL，没有标志。欲了解更多信息[http://developers.facebook.com/docs/reference/api/event/](http://developers.facebook.com/docs/reference/api/event/)

# javascript - 使用 ASP.NET 在服务器上将 HTML 5 Canvas 保存为图像

> ID：10792986
> 
> 赞同：21
> 
> 时间：2012-05-29T04:14:35.540
> 
> 标签：javascript, c#, file-upload, html5-canvas, base64

我需要一些帮助..

我试图在绘制后保存画布图像..

按照这个例子（[http://www.dotnetfunda.com/articles/article1662-saving-html-5-canvas-as-image-on-the-server-using-aspnet.aspx](http://www.dotnetfunda.com/articles/article1662-saving-html-5-canvas-as-image-on-the-server-using-aspnet.aspx)）

```
$("#btnSave").click(function () {

    var image = document.getElementById("canvas").toDataURL("image/png");
    image = image.replace('data:image/png;base64,', '');

    $.ajax({
        type: 'POST',
        url: "../../Home/UploadImage?imageData=" + image,
        contentType: 'application/json; charset=utf-8',
        dataType: 'json',
        success: function (msg) {
            alert('Image saved successfully !');
        }
    });
}); 
```

控制器：

```
public void UploadImage(string imageData)
{
    string fileNameWitPath = path + DateTime.Now.ToString().Replace("/", "-").Replace(" ", "- ").Replace(":", "") + ".png";
    using (FileStream fs = new FileStream(fileNameWitPath, FileMode.Create))
    {
        using (BinaryWriter bw = new BinaryWriter(fs))
        {
            byte[] data = Convert.FromBase64String(imageData);
            bw.Write(data);
            bw.Close();
        }
    }
} 
```

但是当我试图将在方法中像参数一样传递的字符串转换成base64时，抛出一个错误

> 字符数组 Base-64 的长度无效。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-29T07:47:15.757

您不能使用查询字符串参数发布数据

试试这个;

```
 $("#btnSave").click(function () {

        var image = document.getElementById("canvas").toDataURL("image/png");
        image = image.replace('data:image/png;base64,', '');

        $.ajax({
            type: 'POST',
            url: "../../Home/UploadImage",
            data: '{ "imageData" : "' + image + '" }',
            contentType: 'application/json; charset=utf-8',
            dataType: 'json',
            success: function (msg) {
                alert('Image saved successfully !');
            }
        });
    }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-20T09:52:33.960

在该示例中，作者使用隐藏字段发布了图像数据，请注意他文章中的以下代码行

```
<input type="hidden" name="imageData" id="imageData" /> 
```

[http://www.dotnetfunda.com/articles/show/2665/saving-html-5-canvas-as-image-in-aspnet-mvc](http://www.dotnetfunda.com/articles/show/2665/saving-html-5-canvas-as-image-in-aspnet-mvc)

单击按钮后，他将画布数据获取到隐藏字段后提交表单，因此请遵循相同的方法。正如 Mehmet 所写，querystring 有局限性，并且在通过 url 时很容易被修改。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-07-18T09:07:35.520

而不是这个

```
image = image.replace('data:image/png;base64,', ''); 
```

用这个：

```
image = image.substr(23, image.length); 
```

删除前导字符直到第一个逗号（使用任何开发工具查看您发布的内容）。

# linq - LINQ to MongoDB：.Any 带有谓词

> ID：10792988
> 
> 赞同：3
> 
> 时间：2012-05-29T04:14:51.647
> 
> 标签：linq, mongodb, mongodb-.net-driver

我有一个`MongoDB`S 文件的集合。每个`S`都有一个集合`UserPermission objects`，每个集合都有一个`UserId`属性。我想选择所有具有特定的`S`文档：`UserPermission``UserId`

```
return collection.Where(s => s.UserPermissions.Any(up => up.UserId == userIdString)).ToList(); 
```

我收到一条错误消息，告诉我`.Any`不支持使用谓词。MongoDB 文档说：“您通常可以通过在投影之前放置等效的 where 子句来重写这样的查询（在这种情况下，您可以删除投影）。”

这意味着什么？知道如何更改查询以绕过此限制吗？

这是一个完整的例子。您可以看到我尝试了 2 个不同的查询，但都不支持：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

using MongoDB.Bson;
using MongoDB.Driver;
using MongoDB.Driver.Linq;

namespace MongoSample
{
    class Program
    {
        static void Main(string[] args)
        {
            App app1 = new App() { Name = "App1", Users = new List<User>() 
                { 
                    new User() { UserName = "Chris" } } 
                };

            App app2 = new App() { Name = "App2", Users = new List<User>() 
                { 
                    new User() { UserName = "Chris" }, 
                    new User() { UserName = "Carlos" } } 
                };

            MongoServer server = MongoServer.Create();
            MongoDatabase database = server.GetDatabase("test");
            MongoCollection appCollection = database.GetCollection("app");

            appCollection.Insert(app1);
            appCollection.Insert(app2);

            // Throws "Any with a predicate not supported" error
            //var query = appCollection.AsQueryable<App>()
            //    .Where(a => a.Users.Any(u => u.UserName == "Carlos"));

            // Throws "Unsupported Where Clause" error.
            var query = appCollection.AsQueryable<App>()
                .Where(a => a.Users.Where(u => u.UserName == "Carlos").Any());

            foreach (App loadedApp in query)
            {
                Console.WriteLine(loadedApp.ToJson());
            }
            Console.ReadLine();
        }
    }

    class App
    {
        public string Name { get; set; }
        public List<User> Users { get; set; }
    }

    class User
    {
        public string UserName { get; set; }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T07:33:25.697

`Any()`不支持谓词，因此您可以执行以下操作：

```
collection.Where(s => s.UserPermissions
    .Where(up => up.UserId == userIdString).Any() ) 
```

（这是放在 之前的“等效 where 子句” `Any`）

# java - 格式化json日期

> ID：10792990
> 
> 赞同：3
> 
> 时间：2012-05-29T04:15:23.460
> 
> 标签：java, json

*大家好，*

我正在将我的数据放到 Web 服务上，但是我在处理为 Date 数据类型返回的 JSON 数据时遇到了一些问题。基本上，后面的字符串看起来像这样：

`/Date(1154970000000+0700)/`

如何在 java 中将其格式化为 dd/mm/yyyy。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T05:17:32.427

如果你谷歌它，你会发现很多用 Java 解析它的实现。

[只看一个](http://www.java2s.com/Code/Java/Data-Type/ISO8601dateparsingutility.htm)
除此之外你也可以使用这个 - -

```
var date = eval(jsonDate.replace(/\/Date\((\d+)\)\//gi, "new Date($1)")); 
```

我不知道我是否可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T11:16:05.297

似乎您正在尝试格式化 .Net JSON 日期字符串。但是，您是想使用 Java 还是 JavaScript，还不是很清楚。假设您要使用 Java，您可以尝试以下方法：

```
import java.util.TimeZone;
import java.text.SimpleDateFormat;
import java.util.Date;

public class FormatDate 
{
    public static void main(String[] args) 
    {
        String date = "/Date(1154970000000+0700)/".replaceAll("/Date\\((-?\\d+).*$","$1");
        String zone = "/Date(1154970000000+0700)/".replaceAll("/Date\\(-?\\d+([+-].*?)\\)/$","$1");
        long ldate = Long.parseLong(date);
        SimpleDateFormat df = new SimpleDateFormat("dd/MM/yyyy");
        System.out.println ("Local "+TimeZone.getDefault().getDisplayName()+" Date: "+df.format(new Date(ldate)));
        df.setTimeZone(TimeZone.getTimeZone("GMT"+zone));
        System.out.println ("Parsed Zone GMT"+zone+" Date: "+df.format(new Date(ldate)));
    }
} 
```

我的电脑上的输出（时区东部标准时间）：

```
Local Eastern Standard Time Date: 07/08/2006
Parsed Zone GMT+0700 Date: 08/08/2006 
```

如果您正在寻找 Javascript 解决方案，这样的事情会有所帮助：

```
 <script type="text/javascript">
      var jsonDate = "/Date(1154970000000+0700)/";
      var date = eval(jsonDate.replace(/\/Date\((-?\d+).*/i, "new Date($1)"));
      var offset = date.getTimezoneOffset()*60*1000;//convert timezone offset to milliseconds
      offset += 7*3600*1000;//convert to actual time zone 
      date = new Date(date.getTime()+offset);
      var mm = date.getMonth() + 1;         
      if(mm<10) mm = '0'+mm;
      var dd = date.getDate();
      if(dd<10) dd = '0'+dd;
      var yyyy = date.getFullYear();
      var date_str = dd + '/' + mm + '/' + yyyy;
      document.write(date_str + " GMT+700");
 </script> 
```

**注意：**传递给 Date 对象的参数是毫秒值，表示自 1970 年 1 月 1 日 00:00:00.000 GMT 以来经过的毫秒数。

如果您想知道偏移量为 7 的时区的 id，可以使用：

```
 String[] ids = java.util.TimeZone.getAvailableIDs(1000*3600*7);
   System.out.println(java.util.Arrays.deepToString(ids)); 
```

输出：

```
[Antarctica/Davis, Asia/Bangkok, Asia/Ho_Chi_Minh, Asia/Hovd, Asia/Jakarta, Asia
/Krasnoyarsk, Asia/Phnom_Penh, Asia/Pontianak, Asia/Saigon, Asia/Vientiane, Etc/
GMT-7, Indian/Christmas, VST] 
```

**更新：** JavaScript Date.getTimezoneOffset() 和 Java TimeZone.getRawOffset() 或 TimeZone.getOffset(long ldate) 方法之间存在**符号**差异。JavaScript 方法 getTimezoneOffset() 和 Java 方法 getOffset() 都考虑了本地时区 DST 引入的差异。

# sql - SQL 查询动态 PIVOT

> ID：10792991
> 
> 赞同：0
> 
> 时间：2012-05-29T04:15:29.380
> 
> 标签：sql, sql-server, tsql

> **可能重复：**
> [SQL Server 动态 PIVOT 查询？](https://stackoverflow.com/questions/10404348/sql-server-dynamic-pivot-query)

我有以下结构的临时表：

```
MONTH  ID           CNT
-----  -----------  ---
4      TOTAL_COUNT  214
5      TOTAL_COUNT  23
6      TOTAL_COUNT  23
4      FUNC_COUNT   47
5      FUNC_COUNT   5
6      FUNC_COUNT   5
4      INDIL_COUNT  167
5      INDIL_COUNT  18
6      INDIL_COUNT  18 
```

我如何在此表中获得一个月的 Pivot，例如：

```
ID           APRIL  MAY  JUNE 
-----------  -----  ---  ----
TOTAL_COUNT  214    23   23
FUNC_COUNT   47     5    5
INDIL_COUNT  167    18   18 
```

请考虑这种表格格式。我在发布这种格式时有点乱。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T04:41:21.180

我会将月份整数到月份名称的转换留给您，但这将为您执行 PIVOT。

```
declare @t table
( [month] int, [id] nvarchar(20), [cnt] int )

insert @t values (4,'TOTAL_COUNT',214)
insert @t values (5,'TOTAL_COUNT',23)
insert @t values (6,'TOTAL_COUNT',23)
insert @t values (4,'FUNC_COUNT',47)
insert @t values (5,'FUNC_COUNT',5)
insert @t values (6,'FUNC_COUNT',5)
insert @t values (4,'INDIL_COUNT',167)
insert @t values (5,'INDIL_COUNT',18)
insert @t values (6,'INDIL_COUNT',18)

SELECT 
    [id], [4], [5], [6]
FROM
    (SELECT [month], [id], [cnt] FROM @t) src
PIVOT
    (SUM([cnt]) FOR [month] IN ([4], [5], [6])) p 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T15:14:43.670

虽然您可以使用**静态枢轴**- 一个您对月份进行硬编码的枢轴。在评论中，您说月数可能是未知的，如果是这种情况，那么您将需要使用**动态枢轴**来生成月份列表。使用 Dynamic Pivot 使您可以灵活地在运行它之前不知道所需的列。

```
create table t
( 
    [month] int, 
    [id] nvarchar(20), 
    [cnt] int 
)

insert t values (4,'TOTAL_COUNT',214)
insert t values (5,'TOTAL_COUNT',23)
insert t values (6,'TOTAL_COUNT',23)
insert t values (4,'FUNC_COUNT',47)
insert t values (5,'FUNC_COUNT',5)
insert t values (6,'FUNC_COUNT',5)
insert t values (4,'INDIL_COUNT',167)
insert t values (5,'INDIL_COUNT',18)
insert t values (6,'INDIL_COUNT',18)

DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX);

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(month) 
            FROM t 
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT id, ' + @cols + ' from 
            (
                select month, id, cnt
                from t
           ) x
            pivot 
            (
                 sum(cnt)
                for month in (' + @cols + ')
            ) p '

execute(@query)

drop table t 
```

结果将是：

![在此处输入图像描述](../Images/40001b2e54e0ca7952558df7f708c00b.png)

# r - 无法使用 read.zoo 阅读

> ID：10792993
> 
> 赞同：2
> 
> 时间：2012-05-29T04:16:30.567
> 
> 标签：r, zoo

我使用 write.zoo 制作了这个数据集，为此我使用了以下代码：

```
z <- structure(c(9.82, 9.83, 9.82, 9.9, 9.81, 9.83, 12.57, 12.57, 
12.57, 12.57, 12.57, 12.57, 2.75, 2.74, 2.75, 2.67, 2.76, 2.74
), .Dim = c(6L, 3L), .Dimnames = list(c("15", "14", "13", "12", 
"11", "10"), c("depth", "from_sensor_to_river_bottom", "Depth_from_river_surface_to_bottom"
)), index = structure(c(1337810422, 1337811320, 1337812220, 1337813118, 
1337814021, 1337814919), class = c("POSIXct", "POSIXt"), tzone = ""), class = "zoo") 
```

所以，`z`是一个动物园对象：

```
z
   depth from_sensor_to_river_bottom Depth_from_river_surface_to_bottom
15  9.82                       12.57                               2.75
14  9.83                       12.57                               2.74
13  9.82                       12.57                               2.75
12  9.90                       12.57                               2.67
11  9.81                       12.57                               2.76
10  9.83                       12.57                               2.74
attr(,"index")
[1] "2012-05-23 23:00:22 BST" "2012-05-23 23:15:20 BST" "2012-05-23 23:30:20 BST" "2012-05-23 23:45:18 BST"
[5] "2012-05-24 00:00:21 BST" "2012-05-24 00:15:19 BST"
attr(,"class")
[1] "zoo" 
```

我使用以下方法将其写入文件：

```
 write.zoo(z, file = "y.txt", row.names=1:length(z[,1]),col.names=NULL) 
```

这是输出文件“y.txt”的样子：

```
 "Index" "depth" "from_sensor_to_river_bottom" "Depth_from_river_surface_to_bottom"
 "1" 2012-05-23 15:00:22 9.82 12.57 2.75
 "2" 2012-05-23 15:15:20 9.83 12.57 2.74
 "3" 2012-05-23 15:30:20 9.82 12.57 2.75
 "4" 2012-05-23 15:45:18 9.9 12.57 2.67
 "5" 2012-05-23 16:00:21 9.81 12.57 2.76 
```

我正在尝试使用以下方法阅读它：

```
 read.zoo("y.txt", tz="") 
```

这给了我这个错误：

```
 Error in scan(file, what, nmax, sep, dec, quote, skip, nlines, na.strings,  : 
  line 1 did not have 6 elements. 
```

我无法弄清楚问题是什么？还有问题是我写入文件还是读取文件？

谢谢您的考虑。我感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T05:23:51.037

问题是由时间戳引起的：值没有被引用，日期和时间之间的空格被错误地理解为列分隔符。

您可以通过使用另一个列分隔符来规避该问题。

```
write.zoo(z, file = "y.txt", sep="\t",
  row.names=1:length(z[,1]),col.names=NULL
)
read.zoo("y.txt", tz="", sep="\t") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T04:45:10.810

我认为在标题中您缺少一个列名。添加它后安装chron库并运行它

read.zoo("zoo.txt", FUN = as.chron)

# javascript - 在 ipad 上使用触摸时滑动 div/修改 css 属性

> ID：10792995
> 
> 赞同：0
> 
> 时间：2012-05-29T04:16:44.007
> 
> 标签：javascript, jquery, ipad, swipe-gesture

我想要实现的是当有人在 ipad 上的 div 上滑动手指时修改 div 的 margin-left css 属性。

为了解释我想要做什么，我设置了这个页面： http: [//littleirrepressiblewonton.com/wp7/category/all/](http://littleirrepressiblewonton.com/wp7/category/all/)

现在，当有人单击缩略图时，它会加载大图像的水平幻灯片。有些图像太宽，无法放在 ipad 上，他们希望使用触摸来左右拖动此水平幻灯片图像。

div的设置方式如下：

```
<div class='WontonGalleryFullsMask'>
<div class='WontonGalleryFulls' data-animating='no'>
    <div class="WontonGalleryFullImage" data-idx="0"  ><img src="http://littleirrepressiblewonton.com/wp7/wp-content/uploads/cache/VP_test_poster022/2835976114.jpg" alt="VP_test_poster022"  /></div>
    <div class="WontonGalleryFullImage" data-idx="1"  ><img src="http://littleirrepressiblewonton.com/wp7/wp-content/uploads/cache/VP_test_poster021/663128145.jpg" alt="VP_test_poster021"  /></div>
    <div class="WontonGalleryFullImage" data-idx="2"  ><img src="http://littleirrepressiblewonton.com/wp7/wp-content/uploads/cache/VP_test_poster020/3945564367.jpg" alt="VP_test_poster020"  /></div>
</div>
</div> 
```

div.WontonGalleryFullsMask 具有以下 css 并设置为掩码。

```
height: 523px;
overflow: hidden;
width: 100%; 
```

然后修改 div.WontonGalleryFulls div 的 margin-left 属性来左右移动画廊。

所以如果有人在ipad上滑动300px，我需要修改div.WontonGalleryFulls的margin-left css属性

我正在寻找一个 jquery 解决方案，因为该站点已经在使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T01:07:58.923

我最终从[http://popdevelop.com/2010/08/touching-the-web/修改了一个脚本](http://popdevelop.com/2010/08/touching-the-web/)

```
$.fn.draggable = function() {

var offset = null;
  var start = function(e) {
    var orig = e.originalEvent;
    var ml = parseInt($(this).css('margin-left'));
    offset = {
      x: orig.changedTouches[0].pageX - ml //pos.left
    };
  };
  var moveMe = function(e) {
    e.preventDefault();
    var orig = e.originalEvent;
    $(this).css({
      'margin-left': orig.changedTouches[0].pageX - offset.x
    });
  };
  this.bind("touchstart", start);
  this.bind("touchmove", moveMe);
};

$('div.WontonGalleryFulls').css('position', 'absolute');
$('div.WontonGalleryFulls').draggable(); 
```

# ruby-on-rails - ruby on rails 一个模型与另一个模型的多个关联

> ID：10792999
> 
> 赞同：1
> 
> 时间：2012-05-29T04:16:53.387
> 
> 标签：ruby-on-rails, database, activerecord, associations, has-many

`has_many`让一个模型同时具有 a和 a`has_one`关系的正确（Rails）方式是什么？在我的例子中，我希望我的`Device`模型同时跟踪它的当前位置和它之前的所有位置。这是我的尝试，它很实用，但有更好的方法吗？

# 楷模

```
class Location < ActiveRecord::Base
  belongs_to :device
end

class Device < ActiveRecord::Base
  has_many :locations # all previous locations
  belongs_to :location # current location
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T04:27:25.733

```
class Device < ActiveRecord::Base
  has_and_belongs_to_many :locations
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T04:33:08.607

好吧，Rails 的方式是您可以创建许多您喜欢的关联。您也可以根据您的逻辑命名您的关联。只需将`:class_name`选项传递给您的关联逻辑。

```
class Location < ActiveRecord::Base
  belongs_to :device
end

class Device < ActiveRecord::Base
  has_many :previous_locations,
           :class_name => "Location",
           :conditions => ["locations.created_at < ?", DateTime.now]
  has_one  :location,
           :class_name => "Location",
           :conditions => ["locations.created_at = ?", DateTime.now]
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T04:34:34.317

在“Active Record 关联指南”中，我推荐阅读第 2.8 节：在 has_many :through 和 has_and_belongs_to_many 之间进行选择

> 最简单的经验法则是，如果您需要将关系模型作为独立实体使用，则应该设置一个 has_many :through 关系。如果您不需要对关系模型做任何事情，那么设置 has_and_belongs_to_many 关系可能会更简单（尽管您需要记住在数据库中创建连接表）。
> 
> 如果您需要验证、回调或连接模型上的额外属性，您应该使用 has_many :through。

[http://guides.rubyonrails.org/association_basics.html#choosing-between-has_many-through-and-has_and_belongs_to_many](http://guides.rubyonrails.org/association_basics.html#choosing-between-has_many-through-and-has_and_belongs_to_many)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T06:45:59.937

```
class Location < ActiveRecord::Base
  belongs_to :device
end

class Device < ActiveRecord::Base
  has_many  :locations

  def previous_locations
    self.locations.order('created_at asc').limit( self.locations.count-1)
  end

  def current_location # or last_location
    self.locations.order('created_at desc').limit(1)
  end

  # you may like to add this one
  def current_location= args
    args = Location.new args unless args.is_a? Location
    self.locations << args
  end
end 
```

请注意，所有 @device.locations、@device.previous_locations 和 @device.current_location 都将返回 ActiveRecord::Relation

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-29T12:48:20.447

```
class Location < ActiveRecord::Base
  belongs_to :device
  has_one :current_location, :class_name => 'Device',
                              :conditions => { :active => true }
end

class Device < ActiveRecord::Base
  has_many :locations # all previous locations
end 
```

位置有一个名为“活动”的布尔字段，您将其设置为真/假。