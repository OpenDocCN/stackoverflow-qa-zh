# StackOverflow 问答 12190000-12190999

# mysql - 重命名 MySQL 数据库

> ID：12190000
> 
> 赞同：112
> 
> 时间：2012-08-30T04:41:22.310
> 
> 标签：mysql, database, linux, rename

我创建了一个名为`hrms`. 现在我需要将数据库名称更改为`sunhrm`. 但是，它在 MySQL 工作台中被禁用。我可以在 Linux 服务器本身上执行此操作吗？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-12-19T03:05:40.970

如果您需要从命令行执行此操作，只需复制、调整和粘贴此代码段：

```
mysql -e "CREATE DATABASE \`new_database\`;"
for table in `mysql -B -N -e "SHOW TABLES;" old_database`
do 
  mysql -e "RENAME TABLE \`old_database\`.\`$table\` to \`new_database\`.\`$table\`"
done
mysql -e "DROP DATABASE \`old_database\`;" 
```

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2012-08-30T04:59:34.570

我不认为你能做到这一点。基本答案在许多情况下都有效，而在其他情况下会导致数据损坏。需要根据对数据库的启发式分析来选择策略。 **这就是实现此功能的原因，[然后将其删除](https://stackoverflow.com/questions/12190000/rename-mysql-database/21429268#comment21558791_12190318)。**[[文档](http://dev.mysql.com/doc/refman/5.1/en/rename-database.html)]

您需要转储该数据库*中的所有对象类型*，创建新命名的对象类型，然后导入转储。如果这是一个实时系统，您需要将其删除。如果不能，则需要设置从该数据库到新数据库的复制。

*如果您想查看可以执行此操作的命令，[@satishD 有详细信息](https://stackoverflow.com/a/21429268/263858)，其中传达了一些挑战，您需要围绕这些挑战构建与目标数据库匹配的策略。*

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2013-07-24T14:13:05.457

可以通过 mysqldump 命令复制数据库而不将转储存储到文件中：

1.  `mysql -u root -p -e "create database my_new_database"`
2.  `mysqldump -u root -p original_database | mysql -u root -p my_new_database`
3.  `mysql -u root -p -e "drop database original_database"`

* * *

## 回答 #4

> 赞同：33
> 
> 时间：2013-03-09T07:40:26.307

您可以像以前的数据库一样创建一个新数据库，然后在完成后删除旧数据库。使用 mysqldump 工具创建数据库的 .sql 备份，`mysqldump orig_db > orig_db.sql`或者如果您需要使用用户名和密码，然后运行`mysqldump -u root -p orig_db > orig_db.sql`。orig_db 是您要“重命名”的数据库的名称，root 是您登录的用户，orig_db.sql 是创建的包含备份的文件。现在使用您想要的数据库名称创建一个新的空数据库。例如，`mysql -u root -p -e "create database new_db"`。一旦完成，然后运行`mysql -u root -p new_db < orig_db.sql`​​. new_db 现在作为 orig_db 的完美副本存在。然后，您可以删除原始数据库，因为您现在将它存在于具有您想要的数据库名称的新数据库中。

没有上述所有解释的简短、快速的步骤是：

1.  `mysqldump -u root -p original_database > original_database.sql`
2.  `mysql -u root -p -e "create database my_new_database"`
3.  `mysql -u root -p my_new_database < original_database.sql`
4.  `mysql -u root -p -e drop database originl_database`

希望这会有所帮助，这是一种可靠的方法来完成它，而无需使用一些会破坏您的数据并造成不一致的临时方法。

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2012-08-30T05:17:41.830

创建新模式“other_db”后，您可以通过 RENAME 语句为“current_db”中的每个表执行此操作

```
RENAME TABLE current_db.tbl_name TO other_db.tbl_name 
```

源[重命名表语法](http://dev.mysql.com/doc/refman/5.5/en/rename-table.html)

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2014-01-29T11:09:17.483

那么有2种方法：

**方法 1**：重命名数据库模式的一种众所周知的方法是使用 Mysqldump 转储模式并将其恢复到另一个模式中，然后删除旧模式（如果需要）。

从`Shell`

```
 mysqldump emp > emp.out
 mysql -e "CREATE DATABASE employees;"
 mysql employees < emp.out 
 mysql -e "DROP DATABASE emp;" 
```

上述方法虽然简单，但是费时费空间。如果架构超过**100GB 怎么办？**有一些方法可以将上述命令连接在一起以节省空间，但这不会节省时间。

> 为了纠正这种情况，还有另一种快速重命名模式的方法，但是，在执行此操作时必须小心。

**方法 2**：MySQL 有一个非常好的重命名表的特性，甚至可以跨不同的模式工作。此重命名操作是原子操作，在重命名表时没有其他人可以访问该表。这需要很短的时间才能完成，因为更改表的名称或其架构只是元数据更改。这是进行重命名的程序方法：

1.  创建具有所需名称的新数据库模式。
2.  使用 MySQL 的“RENAME TABLE”命令将表从旧模式重命名为新模式。
3.  删除旧的数据库模式。

如果`views, triggers, functions, stored procedures`架构中有，则也需要重新创建。如果表上存在触发器，MySQL 的“重命名表”将失败。为了解决这个问题，我们可以做以下事情：

**1）** `Dump the triggers, events and stored routines in a separate file.`这使用-E，-R标志（除了-t -d转储触发器）到mysqldump命令完成。一旦触发器被转储，我们需要将它们从模式中删除，以便 RENAME TABLE 命令起作用。

```
 $ mysqldump <old_schema_name> -d -t -R -E > stored_routines_triggers_events.out 
```

**2)**生成仅包含“BASE”表的列表。这些可以使用对 information_schema.TABLES 表的查询来找到。

```
 mysql> select TABLE_NAME from information_schema.tables where 
    table_schema='<old_schema_name>' and TABLE_TYPE='BASE TABLE'; 
```

**3)**将视图转储到输出文件中。可以使用对同一 information_schema.TABLES 表的查询来找到视图。

```
mysql> select TABLE_NAME from information_schema.tables where 
   table_schema='<old_schema_name>' and TABLE_TYPE='VIEW';
 $ mysqldump <database> <view1> <view2> … > views.out 
```

**4)**删除 old_schema 中当前表上的触发器。

```
mysql> DROP TRIGGER <trigger_name>;
... 
```

**5)**重命名步骤#2 中找到的所有“基本”表后，恢复上述转储文件。

```
mysql> RENAME TABLE <old_schema>.table_name TO <new_schema>.table_name;
...
$ mysql <new_schema> < views.out
$ mysql <new_schema> < stored_routines_triggers_events.out 
```

上述方法的复杂性：我们可能需要更新`GRANTS`用户，以便他们匹配正确的 schema_name。这些可以通过简单`UPDATE`的 on `mysql.columns_priv`, `mysql.procs_priv`, `mysql.tables_priv`, mysql.db 表更新`old_schema name`到`new_schema`并调用“刷新权限”来修复。尽管“<code>method 2”看起来比“<code>method 1”复杂一些，但这完全是可编写脚本的。一个简单的 bash 脚本以正确的顺序执行上述步骤，可以帮助您在下次重命名数据库模式时节省空间和时间。

Percona Remote DBA 团队编写了一个名为“rename_db”的脚本，其工作方式如下：

```
[root@dba~]# /tmp/rename_db
rename_db <server> <database> <new_database> 
```

为了演示此脚本的使用，使用了示例模式“emp”，创建了测试触发器，并在该模式上存储了例程。将尝试使用脚本重命名数据库模式，这需要几秒钟才能完成，而不是耗时的转储/恢复方法。

```
mysql> show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| emp                |
| mysql              |
| performance_schema |
| test               |
+--------------------+

[root@dba ~]# time /tmp/rename_db localhost emp emp_test
create database emp_test DEFAULT CHARACTER SET latin1
drop trigger salary_trigger
rename table emp.__emp_new to emp_test.__emp_new
rename table emp._emp_new to emp_test._emp_new
rename table emp.departments to emp_test.departments
rename table emp.dept to emp_test.dept
rename table emp.dept_emp to emp_test.dept_emp
rename table emp.dept_manager to emp_test.dept_manager
rename table emp.emp to emp_test.emp
rename table emp.employees to emp_test.employees
rename table emp.salaries_temp to emp_test.salaries_temp
rename table emp.titles to emp_test.titles
loading views
loading triggers, routines and events
Dropping database emp

real    0m0.643s
user    0m0.053s
sys     0m0.131s

mysql> show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| emp_test           |
| mysql              |
| performance_schema |
| test               |
+--------------------+ 
```

正如您在上面的输出中看到的那样，数据库模式“emp”在不到一秒的时间内被重命名为“emp_test”。最后，这是来自 Percona 的脚本，上面用于“<code>method 2”。

```
#!/bin/bash
# Copyright 2013 Percona LLC and/or its affiliates
set -e
if [ -z "$3" ]; then
    echo "rename_db <server> <database> <new_database>"
    exit 1
fi
db_exists=`mysql -h $1 -e "show databases like '$3'" -sss`
if [ -n "$db_exists" ]; then
    echo "ERROR: New database already exists $3"
    exit 1
fi
TIMESTAMP=`date +%s`
character_set=`mysql -h $1 -e "show create database $2\G" -sss | grep ^Create | awk -F'CHARACTER SET ' '{print $2}' | awk '{print $1}'`
TABLES=`mysql -h $1 -e "select TABLE_NAME from information_schema.tables where table_schema='$2' and TABLE_TYPE='BASE TABLE'" -sss`
STATUS=$?
if [ "$STATUS" != 0 ] || [ -z "$TABLES" ]; then
    echo "Error retrieving tables from $2"
    exit 1
fi
echo "create database $3 DEFAULT CHARACTER SET $character_set"
mysql -h $1 -e "create database $3 DEFAULT CHARACTER SET $character_set"
TRIGGERS=`mysql -h $1 $2 -e "show triggers\G" | grep Trigger: | awk '{print $2}'`
VIEWS=`mysql -h $1 -e "select TABLE_NAME from information_schema.tables where table_schema='$2' and TABLE_TYPE='VIEW'" -sss`
if [ -n "$VIEWS" ]; then
    mysqldump -h $1 $2 $VIEWS > /tmp/${2}_views${TIMESTAMP}.dump
fi
mysqldump -h $1 $2 -d -t -R -E > /tmp/${2}_triggers${TIMESTAMP}.dump
for TRIGGER in $TRIGGERS; do
    echo "drop trigger $TRIGGER"
    mysql -h $1 $2 -e "drop trigger $TRIGGER"
done
for TABLE in $TABLES; do
    echo "rename table $2.$TABLE to $3.$TABLE"
    mysql -h $1 $2 -e "SET FOREIGN_KEY_CHECKS=0; rename table $2.$TABLE to $3.$TABLE"
done
if [ -n "$VIEWS" ]; then
    echo "loading views"
    mysql -h $1 $3 < /tmp/${2}_views${TIMESTAMP}.dump
fi
echo "loading triggers, routines and events"
mysql -h $1 $3 < /tmp/${2}_triggers${TIMESTAMP}.dump
TABLES=`mysql -h $1 -e "select TABLE_NAME from information_schema.tables where table_schema='$2' and TABLE_TYPE='BASE TABLE'" -sss`
if [ -z "$TABLES" ]; then
    echo "Dropping database $2"
    mysql -h $1 $2 -e "drop database $2"
fi
if [ `mysql -h $1 -e "select count(*) from mysql.columns_priv where db='$2'" -sss` -gt 0 ]; then
    COLUMNS_PRIV="    UPDATE mysql.columns_priv set db='$3' WHERE db='$2';"
fi
if [ `mysql -h $1 -e "select count(*) from mysql.procs_priv where db='$2'" -sss` -gt 0 ]; then
    PROCS_PRIV="    UPDATE mysql.procs_priv set db='$3' WHERE db='$2';"
fi
if [ `mysql -h $1 -e "select count(*) from mysql.tables_priv where db='$2'" -sss` -gt 0 ]; then
    TABLES_PRIV="    UPDATE mysql.tables_priv set db='$3' WHERE db='$2';"
fi
if [ `mysql -h $1 -e "select count(*) from mysql.db where db='$2'" -sss` -gt 0 ]; then
    DB_PRIV="    UPDATE mysql.db set db='$3' WHERE db='$2';"
fi
if [ -n "$COLUMNS_PRIV" ] || [ -n "$PROCS_PRIV" ] || [ -n "$TABLES_PRIV" ] || [ -n "$DB_PRIV" ]; then
    echo "IF YOU WANT TO RENAME the GRANTS YOU NEED TO RUN ALL OUTPUT BELOW:"
    if [ -n "$COLUMNS_PRIV" ]; then echo "$COLUMNS_PRIV"; fi
    if [ -n "$PROCS_PRIV" ]; then echo "$PROCS_PRIV"; fi
    if [ -n "$TABLES_PRIV" ]; then echo "$TABLES_PRIV"; fi
    if [ -n "$DB_PRIV" ]; then echo "$DB_PRIV"; fi
    echo "    flush privileges;"
fi 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-08-30T04:49:05.597

简而言之，没有。通常认为重命名数据库太危险了。MySQL 曾经有过这个特性，但它被删除了。您最好使用工作台将模式和数据都导出到 SQL，然后在运行/导入之前更改 CREATE DATABASE 名称。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-09-11T05:11:53.860

我使用以下方法重命名数据库

1.  使用 mysqldump 或任何 DB 工具（例如 heidiSQL、mysql 管理员等）备份文件

2.  在一些文本编辑器中打开备份（例如backupfile.sql）文件。

3.  搜索并替换数据库名称并保存文件。

4.  恢复编辑后的 ​​SQL 文件

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-01-12T17:50:51.827

对于不耐烦的 mysql 用户（比如我），解决方案是：

```
/etc/init.d/mysql stop
mv /var/lib/mysql/old_database /var/lib/mysql/new_database 
/etc/init.d/mysql start 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2014-04-02T07:17:34.390

如果您的数据库仅包含 MyISAM 表（如果您有 InnoDB 表，请**不要使用此方法）：**

1.  关闭 MySQL 服务器
2.  进入mysql`data`目录，重命名数据库目录（注意：非字母字符需要特殊编码）
3.  重启服务器
4.  根据需要调整权限（授予对新数据库名称的访问权限）

您可以在一个命令中编写所有脚本，这样停机时间只需一两秒。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-12-24T04:21:00.833

首先备份名为 HRMS 的旧数据库并编辑脚本文件，将单词 HRMS 替换为 SUNHRM。在这一步之后将数据库文件导入mysql

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-03-07T10:24:29.403

重命名数据库或获取数据库映像的另一种方法是使用数据库选项卡中的逆向工程选项。它将为数据库创建一个 ERR 图。在那里重命名架构。

之后转到文件菜单并转到导出和正向工程数据库。

然后就可以导入数据库了。

# android - 从 Android 使用 Youtube 进行身份验证

> ID：12190014
> 
> 赞同：1
> 
> 时间：2012-08-30T04:42:21.720
> 
> 标签：android

我希望能够从我的 android 应用程序中使用 youtube 验证用户帐户，以便我可以获得喜欢的视频列表或关联帐户的其他帐户信息。是否有可用的 API。我该怎么做 ？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T05:03:08.600

您正在寻找[YouTube 数据 API](https://developers.google.com/youtube/getting_started#data_api)。在您的应用程序中使用此 API，您可以“执行 YouTube 网站上可用的许多操作”，其中包括能够“验证用户身份以上传视频、修改用户播放列表等”。在我提供的链接中，有 2.0 和 3.0 版本的文档。对于更挑剔的程序员，也有大量的[示例代码](https://developers.google.com/youtube/code#sample_code)可用。

# jsp - JSTL 问题，嵌套 hashMap

> ID：12190020
> 
> 赞同：0
> 
> 时间：2012-08-30T04:43:06.290
> 
> 标签：jsp, jstl

```
HashMap<String, HashMap<Integer, String>> hMap = new HashMap<String, HashMap<Integer,String>>();

HashMap<Integer, String> xx = new HashMap<Integer, String>();
xx.put (1, "ABC");
xx.put (2, "def");

HashMap<Integer, String> yy = new HashMap<Integer, String>();
yy.put (1, "ABC");
yy.put (2, "def");

hMap.put ("20120826", xx);
hMap.put ("20120827", yy);

request.setAttribute("hoursByProjectByDay", hMap);

ArrayList<String> displyDtArr = new ArrayList<String>();
displyDtArr.add("20120826");
displyDtArr.add("20120827");
request.setAttribute("displayDates", displyDtArr);

ArrayList<Integer> projects= new ArrayList<Integer>();
projects.add(1)
projects.add(2);
request.setAttribute("projects", projects);

      <c:forEach var="pl" items="${projects}">
 <c:forEach var="displayDt" items="${displayDates}">
    <c:forEach var="hoursByProjByday" items="${hoursByProjectByDay[displayDt]}">
            <c:set var="userHour"  value="${hoursByProjByday[pl]}"/>

        </c:forEach>
    </c:forEach>
</c:forEach> 
```

它给出了以下错误：

堆栈跟踪：

```
org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:524)
org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:435)
org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:320)
org.apache.jasper.servlet.JspServlet.service(JspServlet.java:266)
javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
edu.uchospitals.timetrack.FrontController.dispatch(FrontController.java:121)
edu.uchospitals.timetrack.FrontController.processRequest(FrontController.java:116)
edu.uchospitals.timetrack.FrontController.doPost(FrontController.java:152)
javax.servlet.http.HttpServlet.service(HttpServlet.java:710)
javax.servlet.http.HttpServlet.service(HttpServlet.java:803)

root cause 
javax.el.PropertyNotFoundException: Property '1' not found on type java.util.HashMap$Entry
javax.el.BeanELResolver$BeanProperties.get(BeanELResolver.java:193)
javax.el.BeanELResolver$BeanProperties.access$400(BeanELResolver.java:170)
javax.el.BeanELResolver.property(BeanELResolver.java:279)
javax.el.BeanELResolver.getValue(BeanELResolver.java:60)
javax.el.CompositeELResolver.getValue(CompositeELResolver.java:53)
org.apache.el.parser.AstValue.getValue(AstValue.java:97)
org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:186)
org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:923)
org.apache.jsp.WEB_002dINF.jsp.main_jsp._jspx_meth_c_005fset_005f0(main_jsp.java:548)
org.apache.jsp.WEB_002dINF.jsp.main_jsp._jspx_meth_c_005fforEach_005f5(main_jsp.java:513)
org.apache.jsp.WEB_002dINF.jsp.main_jsp._jspx_meth_c_005fforEach_005f4(main_jsp.java:471)
org.apache.jsp.WEB_002dINF.jsp.main_jsp._jspx_meth_c_005fforEach_005f1(main_jsp.java:338)
org.apache.jsp.WEB_002dINF.jsp.main_jsp._jspService(main_jsp.java:138)
org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:393)
org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:320)
org.apache.jasper.servlet.JspServlet.service(JspServlet.java:266)
javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
edu.uchospitals.timetrack.FrontController.dispatch(FrontController.java:121)
edu.uchospitals.timetrack.FrontController.processRequest(FrontController.java:116)
edu.uchospitals.timetrack.FrontController.doPost(FrontController.java:152)
javax.servlet.http.HttpServlet.service(HttpServlet.java:710)
javax.servlet.http.HttpServlet.service(HttpServlet.java:803) 
```

任何想法如何照顾这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T05:47:00.433

您正在*迭代* 一个集合，这就是*问题*所在。

尝试，

```
<c:forEach var="project" items="${projects}">
    <c:forEach var="displayDt" items="${displayDates}">
        <c:forEach var="userHours" items="${hoursByProjectByDay[displayDt][project]}">
             <br/>${userHours}
        </c:forEach>
    </c:forEach>
</c:forEach> 
```

# extjs - 如何在 Ext JS 3.4 的网格面板中编辑单元格？

> ID：12190021
> 
> 赞同：-1
> 
> 时间：2012-08-30T04:43:12.090
> 
> 标签：extjs, extjs3

是否可以在 ext js 3.4 中使单元格可编辑`gridpanel`？

如果是请回复我如何？

> 这是我试过的代码，

```
var fm = Ext.form;
var grid = new Ext.grid.EditorGridPanel({
    height: 500,
    renderTo: Ext.getBody(),
    width: 800,
    loadMask: false,
    viewConfig: {
        emptyText: 'No data to display'
    },
    selModel: checkboxselection,
    tbar: mainGridToolbar,
    clicksToEdit: 1,
    store: cartStore,
    listeners: {
        afteredit: function(o) {

            var pos = o.record.get('POS');
            var quantity = o.value;

        }
    },
    columns: [
        checkboxselection,
        {
            header: "quantity",
            align: 'right',
            dataIndex: 'QUANTITY',
            sortable: true,
            editor: new fm.TextField({
                allowBlank: false
            })
        }
    ]
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T06:06:25.340

**编辑**

您缺少插件行...（我从未听说过 EditorGridPanel，但我在 4.x 上，此时可能会弄错）

```
plugins: new Ext.ux.grid.RowEditor({saveText: 'Update'}); 
```

**起源**

对这些使用行编辑器插件。您可以为每个单元格指定它是否应该是可编辑的。你真的应该看看图书馆附带的例子！这些行可以在 ext-3.4.0\examples\grid\row-editor.js 下找到

```
Ext.onReady(function(){
Ext.QuickTips.init();

var Employee = Ext.data.Record.create([{
    name: 'name',
    type: 'string'
}, {
    name: 'email',
    type: 'string'
}, {
    name: 'start',
    type: 'date',
    dateFormat: 'n/j/Y'
},{
    name: 'salary',
    type: 'float'
},{
    name: 'active',
    type: 'bool'
}]);

// hideous function to generate employee data
var genData = function(){
    var data = [];
    var s = new Date(2007, 0, 1);
    var now = new Date(), i = -1;
    while(s.getTime() < now.getTime()){
        var ecount = Ext.ux.getRandomInt(0, 3);
        for(var i = 0; i < ecount; i++){
            var name = Ext.ux.generateName();
            data.push({
                start : s.clearTime(true).add(Date.DAY, Ext.ux.getRandomInt(0, 27)),
                name : name,
                email: name.toLowerCase().replace(' ', '.') + '@exttest.com',
                active: true,
                salary: Math.floor(Ext.ux.getRandomInt(35000, 85000)/1000)*1000
            });
        }
        s = s.add(Date.MONTH, 1);
    }
    return data;
}

var store = new Ext.data.GroupingStore({
    reader: new Ext.data.JsonReader({fields: Employee}),
    data: genData(),
    sortInfo: {field: 'start', direction: 'ASC'}
});

var editor = new Ext.ux.grid.RowEditor({
    saveText: 'Update'
});

var grid = new Ext.grid.GridPanel({
    store: store,
    width: 600,
    region:'center',
    margins: '0 5 5 5',
    autoExpandColumn: 'name',
    plugins: [editor],
    view: new Ext.grid.GroupingView({
        markDirty: false
    }),
    tbar: [{
        iconCls: 'icon-user-add',
        text: 'Add Employee',
        handler: function(){
            var e = new Employee({
                name: 'New Guy',
                email: 'new@exttest.com',
                start: (new Date()).clearTime(),
                salary: 50000,
                active: true
            });
            editor.stopEditing();
            store.insert(0, e);
            grid.getView().refresh();
            grid.getSelectionModel().selectRow(0);
            editor.startEditing(0);
        }
    },{
        ref: '../removeBtn',
        iconCls: 'icon-user-delete',
        text: 'Remove Employee',
        disabled: true,
        handler: function(){
            editor.stopEditing();
            var s = grid.getSelectionModel().getSelections();
            for(var i = 0, r; r = s[i]; i++){
                store.remove(r);
            }
        }
    }],

    columns: [
    new Ext.grid.RowNumberer(),
    {
        id: 'name',
        header: 'First Name',
        dataIndex: 'name',
        width: 220,
        sortable: true,
        editor: {
            xtype: 'textfield',
            allowBlank: false
        }
    },{
        header: 'Email',
        dataIndex: 'email',
        width: 150,
        sortable: true,
        editor: {
            xtype: 'textfield',
            allowBlank: false,
            vtype: 'email'
        }
    },{
        xtype: 'datecolumn',
        header: 'Start Date',
        dataIndex: 'start',
        format: 'm/d/Y',
        width: 100,
        sortable: true,
        groupRenderer: Ext.util.Format.dateRenderer('M y'),
        editor: {
            xtype: 'datefield',
            allowBlank: false,
            minValue: '01/01/2006',
            minText: 'Can\'t have a start date before the company existed!',
            maxValue: (new Date()).format('m/d/Y')
        }
    },{
        xtype: 'numbercolumn',
        header: 'Salary',
        dataIndex: 'salary',
        format: '$0,0.00',
        width: 100,
        sortable: true,
        editor: {
            xtype: 'numberfield',
            allowBlank: false,
            minValue: 1,
            maxValue: 150000
        }
    },{
        xtype: 'booleancolumn',
        header: 'Active',
        dataIndex: 'active',
        align: 'center',
        width: 50,
        trueText: 'Yes',
        falseText: 'No',
        editor: {
            xtype: 'checkbox'
        }
    }]
});

var cstore = new Ext.data.JsonStore({
    fields:['month', 'employees', 'salary'],
    data:[],
    refreshData: function(){
        var o = {}, data = [];
        var s = new Date(2007, 0, 1);
        var now = new Date(), i = -1;
        while(s.getTime() < now.getTime()){
            var m = {
                month: s.format('M y'),
                employees: 0,
                salary: 0,
                index: ++i
            }
            data.push(m);
            o[m.month] = m;
            s = s.add(Date.MONTH, 1);
        }
        store.each(function(r){
            var m = o[r.data.start.format('M y')];
            for(var i = m.index, mo; mo = data[i]; i++){
                mo.employees += 10000;
                mo.salary += r.data.salary;
            }
        });
        this.loadData(data);
    }
});
cstore.refreshData();
store.on('add', cstore.refreshData, cstore);
store.on('remove', cstore.refreshData, cstore);
store.on('update', cstore.refreshData, cstore);

var chart = new Ext.Panel({
    width:600,
    height:200,
    layout:'fit',
    margins: '5 5 0',
    region: 'north',
    split: true,
    minHeight: 100,
    maxHeight: 500,

    items: {
        xtype: 'columnchart',
        store: cstore,
        url:'../../resources/charts.swf',
        xField: 'month',
        yAxis: new Ext.chart.NumericAxis({
            displayName: 'Employees',
            labelRenderer : Ext.util.Format.numberRenderer('0,0')
        }),
        tipRenderer : function(chart, record, index, series){
            if(series.yField == 'salary'){
                return Ext.util.Format.number(record.data.salary, '$0,0') + ' total salary in ' + record.data.month;
            }else{
                return Ext.util.Format.number(Math.floor(record.data.employees/10000), '0,0') + ' total employees in ' + record.data.month;
            }
        },

        // style chart so it looks pretty
        chartStyle: {
            padding: 10,
            animationEnabled: true,
            font: {
                name: 'Tahoma',
                color: 0x444444,
                size: 11
            },
            dataTip: {
                padding: 5,
                border: {
                    color: 0x99bbe8,
                    size:1
                },
                background: {
                    color: 0xDAE7F6,
                    alpha: .9
                },
                font: {
                    name: 'Tahoma',
                    color: 0x15428B,
                    size: 10,
                    bold: true
                }
            },
            xAxis: {
                color: 0x69aBc8,
                majorTicks: {color: 0x69aBc8, length: 4},
                minorTicks: {color: 0x69aBc8, length: 2},
                majorGridLines: {size: 1, color: 0xeeeeee}
            },
            yAxis: {
                color: 0x69aBc8,
                majorTicks: {color: 0x69aBc8, length: 4},
                minorTicks: {color: 0x69aBc8, length: 2},
                majorGridLines: {size: 1, color: 0xdfe8f6}
            }
        },
        series: [{
            type: 'column',
            displayName: 'Salary',
            yField: 'salary',
            style: {
                image:'../chart/bar.gif',
                mode: 'stretch',
                color:0x99BBE8
            }
        }]
    }
});

var layout = new Ext.Panel({
    title: 'Employee Salary by Month',
    layout: 'border',
    layoutConfig: {
        columns: 1
    },
    width:600,
    height: 600,
    items: [chart, grid]
});
layout.render(Ext.getBody());

grid.getSelectionModel().on('selectionchange', function(sm){
    grid.removeBtn.setDisabled(sm.getCount() < 1);
});
}); 
```

# php - 如何避免空格被 URL 中的 %20 替换？

> ID：12190024
> 
> 赞同：1
> 
> 时间：2012-08-30T04:43:33.820
> 
> 标签：php, url, whitespace

如果有类似的 URL `www.test.com/all properties`，它在 Firefox 中很好，但在所有其他浏览器中，空格默认被替换为 %20，并且 URL 看起来像这样 `www.test.com/all%20properties`。我想要像 `www.test.com/all properties`. 如何处理？

# php - PHP中前向声明（函数）的示例？

> ID：12190027
> 
> 赞同：6
> 
> 时间：2012-08-30T04:43:36.190
> 
> 标签：php

我发布这个是因为它在 Google 或 php.net 上并不明显

==>请用***PHP****语言**演示几个前向**声明**函数的**语法示例。***

 ****例如（在 C++ 中）：

```
int foo(); // forward declaration

int x = foo(); // calling the function.

int foo()  // the actual implementation
{
   return 5;
} 
```

这在 PHP 中看起来如何？有多个参数怎么样？使用默认参数怎么样？最佳实践是什么，为什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-30T04:46:30.383

您不需要在 PHP 中进行前向声明，而是需要在当前脚本（即使它在调用之后）或任何包含/必需的脚本中声明函数，前提是执行了 include/require 语句在调用函数之前。

没有前向声明。

如果在当前脚本上，即使在最后，在调用之后：没问题

如果它在当前脚本 INCLUDEd/REQUIREd 的脚本上，则应该在调用函数之前执行 INCLUDE/REQUIRE 语句。

如果它在包含/要求当前脚本的脚本上：没关系（即使在 INCLUDE/REQUIRE 语句之后声明）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-04T14:01:55.207

我想说所请求的示例并不是证明前向声明需要的最佳示例。说，我们需要以下内容：

```
function foo($n) {
  echo 'Foo';
  if($n>0) bar($n-1);
}
function bar($n) {
  echo 'Bar';
  if($n>0) foo($n-1);
}
foo(200); 
```

**尽管foo**中有“未定义”函数**bar** ，但上面的代码在 PHP 中可以完美运行。似乎 PHP 在调用时会检查函数定义。

 **所以答案是：

1.  PHP 没有前向声明。
2.  该函数不必在出现在文本中之前定义，但必须在调用之前定义。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T04:50:44.990

会不会只是...

```
$x = foo();

function foo() {
    return 5;
}

echo $x; //echos "5" 
```

?

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T04:52:37.467

PHP*不做*前向函数声明（或“函数原型设计*”）。我们拥有的最接近的是**对象接口**和**抽象方法**。这些被称为“方法原型”或“方法声明”（声明而不是定义，它带有一个 c式语义）

```
Interface MyWidgetInterface {
  function calculateThings(SomeClass $foo);
}

Abstract Class MyAbsClass {
  public abstract function sayHello();
}

Class MyObj Extends MyAbsClass Implements MyWidgetInterface {
  public function calculateThings(SomeClass $foo) {

  }
  public function sayHello() {
    echo "Hi!\n";
  }

}

$thing = new MyObj();
$thing->sayHello(); 
```

我们没有/不需要前向声明函数的原因之一是 php 在每次编译之前都会解析您的脚本。它会在开始执行文件之前找到您的函数，因此它知道它们在那里。事实上，我不记得你必须走多远才能在调用它之前定义函数。我做 PHP 已经 9 年了，从来不需要它 :-)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-30T04:52:58.753

如果你想让一个函数在 PHP 中返回某个类型的值，你可以使用这样的东西。

```
function foo($param) {
  // code
  return (int) $param;   // or (string), (float)
} 
```

或者，当您访问该功能时：

```
$x = (int) foo($param); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-30T05:10:02.417

参考默认参数，您可以这样做

```
function foo( $param1="value1" , $param2="value2" ){
    echo $param1." ".$param2;
}

foo();
foo("not default","not default");
foo(NULL,"not default"); 
```******

# c# - 使用 RSACryptoProvider 在 C# 中验证 PHP OpenSSL 签名

> ID：12190028
> 
> 赞同：3
> 
> 时间：2012-08-30T04:43:36.313
> 
> 标签：c#, php, openssl, bouncycastle, rsacryptoserviceprovider

我正在尝试使用 C#验证*`OpenSSL`*签名。它使用正确的公钥证书返回 false。`(created using openssl_sign with SHA1 in PHP)`**`RSACryptoProvider.VerifyData`**

关于如何成功做到这一点的任何想法？

编辑：

我尝试使用以下代码使用 BouncyCastle 验证 OpenSSL SHA1 签名，但验证失败。签名的计算方式是否不同？如何使用 OpenSSL 创建可由 .NET 验证的签名？

```
byte[] signatureBytes = UTF8Encoding.Default.GetBytes(signature);
  byte[] dataBytes = UTF8Encoding.Default.GetBytes(data);

  StreamReader sr = new StreamReader(Path.Combine(@"C:\test", @"test\test.crt"));
  PemReader pr = new PemReader(sr);

  Org.BouncyCastle.X509.X509Certificate cert = (Org.BouncyCastle.X509.X509Certificate)pr.ReadObject();

  ISigner sig = SignerUtilities.GetSigner("SHA1WithRSAEncryption");
  sig.Init(false, cert.GetPublicKey());
  sig.BlockUpdate(dataBytes, 0, dataBytes.Length);
  if (sig.VerifySignature(signatureBytes)) {
    Console.WriteLine("all good!");
  } 
```

PHP代码：

```
function signTokenWithPrivateKey($message, $keyLocation) {
  try {
    if (file_exists($keyLocation)) {
      $privateKey= openssl_get_privatekey(file_get_contents($keyLocation));

      $signature = '';
      if (!openssl_sign($message, $signature, $privateKey)) {
        die('Failed to encrypt');
      }

      openssl_free_key($privateKey);
    }
  }
  catch (Exception $ex) {

  }

  return $signature;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T04:42:10.640

以下代码应该可以为您解决问题。它从给定的文件路径加载证书，然后使用公钥根据给定的签名验证数据。如果有效则返回真。

```
 byte[] signature = Convert.FromBase64String(Signature);

            byte[] data = Encoding.UTF8.GetBytes(Data);

            var x509 = new X509Certificate2(Path.Combine(@"C:\test", @"test\test.crt"));

            var rsa = x509.PublicKey.Key as RSACryptoServiceProvider;
            if (rsa == null)
            {
                LogMessage("Authorize", "Invalid", Level.Alert);
                return false;
            }

            string sha1Oid = CryptoConfig.MapNameToOID("SHA1");

            //use the certificate to verify data against the signature
            bool sha1Valid = rsa.VerifyData(data, sha1Oid, signature);

            return sha1Valid; 
```

# java - Java ImageIO.read() 加载大量文件时出现OutOfMemoryError

> ID：12190034
> 
> 赞同：0
> 
> 时间：2012-08-30T04:44:10.963
> 
> 标签：java, image, loading, out-of-memory, javax.imageio

我正在用 Java 编写 2D 游戏，但无法将图像加载到图像处理程序中。首先，我想说系统可以正常工作，直到我开始加载超过 15 张图像。

我有一个 AnimationHandler 类，它被赋予了图像的名称和路径，并且应该将它们加载到 Animation 类中并存储这些动画。我这样做是为了让我的游戏中的每个对象实例都可以使用相同的动画，而不是单独加载它们。

无论如何，我的问题是当我尝试加载大量图像时（我将解释为什么我将在一秒钟内拥有这么多图像。）我收到以下错误：

```
Exception in thread "main" java.lang.OutOfMemoryError: Java heap space 
```

我正在加载图像：

```
BufferedImage im = ImageIO.read(getClass().getResources(imgName)); 
```

我将不得不加载这么多图像的原因是因为 a) 每帧一张图像或每个动画至少一张更大的图像。b）一些动画（例如背景）很大，所以我把这些动画的每一帧都分成了几部分。

从我看到的情况来看，任何人似乎得到的唯一响应是增加 JVM 可用的内存量，但我还没有构建 .jar 文件，我正在从 NetBeans 执行并且不知道如何从 NetBeans 内部更改它。

此外，它加载图像的方式是为每个正在加载的图像创建一个新线程。我不知道这是否会有所帮助，但有没有办法跟踪当前正在加载的图像数量，并根据该数字选择等待加载下一张图像？

任何帮助将不胜感激，谢谢彼得

编辑：继承人完整的堆栈跟踪：

```
Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
at java.awt.image.DataBufferByte.<init>(DataBufferByte.java:59)
at java.awt.image.ComponentSampleModel.createDataBuffer(ComponentSampleModel.java:397)
at java.awt.image.Raster.createWritableRaster(Raster.java:938)
at javax.imageio.ImageTypeSpecifier.createBufferedImage(ImageTypeSpecifier.java:1056)
at javax.imageio.ImageReader.getDestination(ImageReader.java:2879)
at com.sun.imageio.plugins.png.PNGImageReader.readImage(PNGImageReader.java:1263)
at com.sun.imageio.plugins.png.PNGImageReader.read(PNGImageReader.java:1560)
at javax.imageio.ImageIO.read(ImageIO.java:1422)
at javax.imageio.ImageIO.read(ImageIO.java:1374)
at Loaders.ImageLoader.loadImage(ImageLoader.java:25)
at MediaHandlers.AnimationHandler.loadAnimation(AnimationHandler.java:53)
at MediaHandlers.AnimationHandler.initAnimations(AnimationHandler.java:38)
at MediaHandlers.AnimationHandler.<init>(AnimationHandler.java:22)
at Main.PlatformGame.<init>(PlatformGame.java:90)
at Main.PlatformGame.main(PlatformGame.java:105) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T04:51:19.750

更改 Netbeans 中的设置；

*   右键单击主项目节点
*   选择“属性”
*   选择“运行”节点
*   将您的内存要求添加到该`VM Options`字段......即`-Xms128M -Xmx1024M`

至于你的加载过程。如果您还没有这样做，我会使用[ExecutorService](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html)来加载图像（可能是一个[固定的线程池](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Executors.html#newFixedThreadPool%28int%29)服务）。

一般来说，它会让事情变得更容易管理，也有助于限制失控线程的数量（因为在某些时候，拥有大量线程并没有带来更多的性能优势而不是没有线程）

# c# - 我应该使用什么来替代 System.Collections.Concurrent.ConcurrentDictionary (3.5)

> ID：12190039
> 
> 赞同：2
> 
> 时间：2012-08-30T04:44:49.107
> 
> 标签：c#, .net-3.5

我需要一个线程安全的集合，但无法使用 ConcurrentDictionary 作为其 .NET 4.0，我需要使用 .NET 3.5。有哪些替代品？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T22:42:39.027

最后我找到了我想要的。向后移植到 3.5 的 TPL 的 nuget 包。可以在这里找到 [http://nuget.org/packages/TaskParallelLibrary](http://nuget.org/packages/TaskParallelLibrary)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T04:51:44.457

看看这篇文章

[“线程安全”字典（TKey,TValue）](http://www.grumpydev.com/2010/02/25/thread-safe-dictionarytkeytvalue/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-28T22:21:50.453

对于 Framework 3.5，我看到以下选项：

*   *字典*+[监视器](http://msdn.microsoft.com/en-us/library/system.threading.monitor%28v=vs.90%29.aspx)。简单的换行*锁定*
*   *字典*+ [ReaderWriterLock](http://msdn.microsoft.com/en-us/library/system.threading.readerwriterlock%28v=vs.90%29.aspx)。比前一个更好，因为有读写锁。所以几个线程可以读取，只有一个 - 写入。
*   *字典*+ [ReaderWriterLockSlim](http://msdn.microsoft.com/en-us/library/system.threading.readerwriterlockslim%28v=vs.90%29.aspx)。这只是对上一个的优化。
*   [哈希表](http://msdn.microsoft.com/en-us/library/system.collections.hashtable%28v=vs.90%29.aspx)。根据我的经验，这是最慢的方法。检查[Hashtable.Synchronized()](http://msdn.microsoft.com/en-us/library/system.collections.hashtable.synchronized%28v=vs.90%29.aspx)方法，这是 Microsoft 的现成解决方案。

我会使用*Dictionary* + *ReaderWriterLock*或*ReaderWriterLockSlim*。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-30T05:28:42.583

您可以创建一个简单的包装器，只实现您需要的。请记住，对依赖于先前调用结果的 Dictionary 执行操作不是线程安全的。这在`TryAdd`方法中得到了例证。

```
class ConcurrentMap<K, V>
{
    readonly Dictionary<K, V> _map = new Dictionary<K, V>();

    public bool TryGetValue(K key, out V value)
    {
        lock (_map)
        {
            return _map.TryGetValue(key, out value);
        }
    }

    public bool TryAdd(K key, V value)
    {
        lock (_map)
        {
            if (!_map.ContainsKey(key))
            {
                _map.Add(key, value);
                return true;
            }
            return false;
        }
    }

    public bool TryRemove(K key)
    {
        lock (_map)
        {
            return _map.Remove(key);
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-07-23T18:59:30.467

我只需要.Net 3.5 ......有人还在那里:)

添加我的课程，添加了比以前附加的代码更多的功能。

```
 public class SafeDictionary<TKey, TValue> : IEnumerable<KeyValuePair<TKey, TValue>>
{

    private readonly object _Padlock = new object();

    private readonly Dictionary<TKey, TValue> _Dictionary = new Dictionary<TKey, TValue>();
    public TValue this[TKey key]
    {
        get
        {
            lock (_Padlock)
            {
                return _Dictionary[key];
            }
        }

        set
        {
            lock (_Padlock)
            {
                _Dictionary[key] = value;
            }
        }
    }

    public bool TryGetValue(TKey key, out TValue value)
    {
        lock (_Padlock)
            return _Dictionary.TryGetValue(key, out value);

    }
public bool TryAdd(TKey key, TValue value)
{
    lock (_Padlock)
    {
        if (!_Dictionary.ContainsKey(key))
        {
            _Dictionary.Add(key, value);
            return true;
        }
        return false;
        }
  }

public bool TryRemove(TKey key)
{
    lock (_Padlock)
    {
        return _dictionary.Remove(key);
    }
}
}

    internal void Add(TKey key, TValue val)
    {
        lock (_Padlock)
        {
            _Dictionary.Add(key, val);
        }
    }

    public bool ContainsKey(TKey id)
    {
        lock (_Padlock)
            return _Dictionary.ContainsKey(id);
    }

    public List<KeyValuePair<TKey, TValue>> OrderBy(Func<KeyValuePair<TKey, TValue>, TKey> func)
    {
        lock (_Padlock)
            return _Dictionary.OrderBy(func).ToList();
    }

    public Dictionary<TKey, TValue>.ValueCollection Values
    {
        get
        {
            lock (_Padlock)
                return _Dictionary.Values;
        }
    }
    public Dictionary<TKey, TValue>.KeyCollection Keys
    {
        get
        {
            lock (_Padlock)
                return _Dictionary.Keys;
        }
    }

    IEnumerator<KeyValuePair<TKey, TValue>> IEnumerable<KeyValuePair<TKey, TValue>>.GetEnumerator()
    {
        lock (_Padlock)
            return _Dictionary.GetEnumerator();

    }

    IEnumerator IEnumerable.GetEnumerator()
    {
        lock (_Padlock)
            return _Dictionary.GetEnumerator();

    }
} 
```

# jquery - Struts2 JQuery：Ajax 提交表单、服务器表单验证和成功重定向

> ID：12190040
> 
> 赞同：0
> 
> 时间：2012-08-30T04:44:49.347
> 
> 标签：jquery, forms, validation, struts2, submit

我在使用 struts2 框架的 Web 应用程序中有以下布局。

**main_layout.jsp**

```
<html>
<head>
    jquery is linked here

    <script>
    $(document).ready(function (){
    $.ajaxSetup ({  
        cache: false  
    });

        $("#newRecord").click(function(){
            $("#content").html("loading...").load("showNewRecordEntry.action");
        });
});
    </script>
</head>  
<body>
<div id='header'>
</div>
<div id='content_wrapper'>
    <div id='navigation'>
        <input type="button" id="newRecord" value="New Record" />
    </div>
    <div id='content'>
       --- ajax is called to put contents
    </div>
</div>
<div id='footer'>
</div>`
</body></html> 
```

**struts.xml**

```
<action name="showNewRecordEntry" method="showNewRecordEntry"  class="recordAction">
<result name="success">/WEB-INF/web/new_record.jsp</result>
</action>

<action name="saveRecord" method="saveRecord"  class="recordAction">
<result name="success" type="redirectAction">
    <param name="actionName">showRecordList</param>
</result>

<result name="input" type="redirectAction">
   <param name="actionName">showNewRecordEntry</param>
</result>

<result name="error" type="redirectAction">
    <param name="actionName">showNewRecordEntry</param>
</result>
</action>

<action name="showRecordList" method="showRecord"  class="recordAction">
<result name="success">/WEB-INF/web/record_list.jsp</result>
</action> 
```

**new_record.jsp**

```
<%@taglib uri="/struts-tags" prefix="s"%>

<s:form action="saveRecord">
<s:textfield  name="name" />
<s:textfield   name="address" />
<s:submit />
</s:form> 
```

我在此页面的标记中手动添加了 jquery-1.8.js`<head>`来执行 Ajax 调用。当从导航中单击菜单时，`<div>`我正在调用 struts2 操作，`$.ajax`并在 content 中加载结果`<div>`。这包括我的应用程序中的数据输入表。

我想`submit`将数据发送到 struts2 操作，成功后我想调用另一个 struts2 操作（记录列表），而不刷新整个页面，仅替换内容`<div>`。并且在服务器验证错误的情况下，使用 Ajax，验证错误消息必须显示在有错误的字段顶部。（无需重新加载页面）

我想在不使用 struts2-jquery 插件的情况下执行此操作，因为我已经在我的主页中手动添加了 jquery1.8.js。

提交工作正常，它将表单提交给我的 struts2 操作，但成功后，成功操作会重新加载整个页面。

我希望你们能帮助我找到解决我的问题的方法。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T06:43:58.433

请参阅下面的示例，我曾经在不提交整个页面并显示该页面的情况下上传图像。

```
<html>
<script>
 function addMatsImage(){       

    $("#matImageFormDialog").dialog("open");

    var asyncFormFrame=document.getElementById("acsyncFormSubmitterFrame");
    asyncFormFrame.removeAttribute("onload");
    var brwsRequestId = Math.random();
    asyncFormFrame.onload = function() {
        $("#matImgDisp").empty();
        var imgURL1='<s:url action="async.streamImage?brwsRequestId='+brwsRequestId+'&token=_matImageUploaded&imgType=jpeg" namespace="/misc" />'
        var img1 = $("<img width='200' height='200' />").attr('src', imgURL1)
        .load(function() {
            if (!this.complete || typeof this.naturalWidth == "undefined" || this.naturalWidth == 0) {

            } else {
                $("#matImgDisp").append(img1);
            }
        });

    };

}
</script>

<body>
<table>
    <tr>
            <td width="200" height="200" style="border: 1px solid black;">
                <a id="matImgDisp" class="zoomImage" title="" style="cursor: url('<%= request.getContextPath()%>/images/zoomin.cur');" href="<s:url action="async.streamImage?token=_matImageUploaded&imgType=jpeg" namespace="/misc" />">
                    <img width="200" height="200" alt="" src="<s:url action="async.streamImage?token=_matImageUploaded&imgType=jpeg" namespace="/misc" />">
                </a>                                                            
            </td>
        </tr>
        <tr>
            <td width="200" >
                <input type="button" value="Upload" onclick="addMatsImage()" Class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text" Style="background-image: url('../layout/images/btnplanning.jpg'); background-repeat: repeat; color: #FFFFFF" />                                                          
            </td>
        </tr>
    <tr>
    <td>    
        <sj:dialog id="matImageFormDialog" autoOpen="false" cssStyle="font: inherit;"
            modal="true" width="350" height="150" title="Upload Image"
            buttons="{
                        'Submit':function() { uploadMatImage(); },
                        'Cancel':function() { cancelMatImageUpload(); }
                    }" >
            <s:form id="IDmatImageForm" name="matImageForm" action="async.uploadImage" namespace="/misc" target="acsyncFormSubmitterFrame" enctype="multipart/form-data">                               

            <table border="0" cellspacing="0" cellpadding="0" width="100%" align="left" style="font: inherit;">
                <tr>
                    <td><s:text name="Upload Image" /></td>
                    <td>
                        <s:hidden name="tokenName" id="IDtokenName" value="_matImageUploaded" />
                        <s:file name="imageFileUploaded" id="imageFileUploaded"/>
                    </td>
                </tr>                                               

            </table> 
            </s:form>
        </sj:dialog>                                        
    </td>
</tr>
<tr>
    <td>
        <iframe id="acsyncFormSubmitterFrame" name="acsyncFormSubmitterFrame" style="display: none;"></iframe>  
    </td>                                   
</tr>
</table>

</body>
</html> 
```

# c++ - 使用委托构造函数时的成员初始化

> ID：12190051
> 
> 赞同：108
> 
> 时间：2012-08-30T04:46:02.870
> 
> 标签：c++, gcc, c++11, ctor-initializer

我已经开始尝试 C++11 标准，我发现[这个](https://stackoverflow.com/questions/308276/c-call-constructor-from-constructor "这")问题描述了如何从同一个类中的另一个 ctor 调用你的 ctor 以避免使用 init 方法等。现在我正在尝试使用如下代码做同样的事情：

惠普：

```
class Tokenizer
{
public:
  Tokenizer();
  Tokenizer(std::stringstream *lines);
  virtual ~Tokenizer() {};
private:
  std::stringstream *lines;
}; 
```

cp:

```
Tokenizer::Tokenizer()
  : expected('=')
{
}

Tokenizer::Tokenizer(std::stringstream *lines)
  : Tokenizer(),
    lines(lines)
{
} 
```

但这给了我错误： `In constructor ‘config::Tokenizer::Tokenizer(std::stringstream*)’: /path/Tokenizer.cpp:14:20: error: mem-initializer for ‘config::Tokenizer::lines’ follows constructor delegation`我尝试将 Tokenizer() 部分移到列表中的第一个和最后一个，但这没有帮助。

这背后的原因是什么，我应该如何解决它？我已经尝试将它`lines(lines)`移到身体上，`this->lines = lines;`并且效果很好。但我真的很想能够使用初始化列表。

* * *

## 回答 #1

> 赞同：134
> 
> 时间：2012-08-30T04:55:13.910

当您将成员初始化委托给另一个构造函数时，假设另一个构造函数*完全*初始化对象，包括所有成员（即包括`lines`您的示例中的成员）。因此，您不能再次初始化任何成员。

该标准的相关引用是（强调我的）：

> (§12.6.2/6) mem-initializer-list 可以使用任何表示构造函数类本身的 class-or-decltype 委托给构造函数类的另一个构造函数。如果一个 mem-initializer-id 指定了构造函数的类，**它应该是唯一的 mem-initializer**；构造函数是委托构造函数，选择的构造函数是目标构造函数。[...]

您可以通过定义*首先*采用参数的构造函数的版本来解决此问题：

```
Tokenizer::Tokenizer(std::stringstream *lines)
  : lines(lines)
{
} 
```

然后使用委托定义默认构造函数：

```
Tokenizer::Tokenizer()
  : Tokenizer(nullptr)
{
} 
```

作为一般规则，您应该完全指定采用最大数量参数的构造函数版本，然后从其他版本进行委托（使用所需的默认值作为委托中的参数）。

# jakarta-ee - 从 ModalPanel RichFaces 返回时父窗口为空白

> ID：12190052
> 
> 赞同：0
> 
> 时间：2012-08-30T04:46:05.613
> 
> 标签：jakarta-ee, jsf-2, richfaces, popupwindow

对于我的 Web 应用程序，我使用 RichFaces 4.X 版本的 ModalPanel 作为弹出窗口。该应用程序在 JSF2.0 中并在 Apache Tomcat 7 上运行。现在，我的弹出窗口工作正常，但是当我关闭弹出窗口时，我的父窗口没有刷新。我可以看到父页面正在加载（因为我可以看到绑定变量的所有 getter 方法都被调用），但我得到的只是一个空白页面。我的支持 bean 的范围是“会话”。我在这里粘贴我的 JSF 文件。

请让我知道我错过了什么。我已经尝试了一整天，但现在什么都没有出现在我的脑海中。:(

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<%@taglib uri="http://java.sun.com/jsf/core" prefix="f"%>
<%@taglib uri="http://java.sun.com/jsf/html" prefix="h"%>    
<%@taglib uri="http://richfaces.org/rich" prefix="rich"%>
<%@taglib uri="http://richfaces.org/a4j" prefix="a4j"%>

<html> 
<head>

<title>ILE Designs</title> 
<script type="text/javascript">   

function actionWhenMouseOver(imgName) {  
    var img = document.getElementById(imgName); 
    img.style['width'] = "300px"; 
    img.style['height'] = "300px"; 
}

function actionWhenMouseOut(imgName) { 
    var img = document.getElementById(imgName); 
    img.style['width'] = "100px"; 
    img.style['height'] = "100px"; 
} 
</script>

</head>

<body bgcolor="000000">
<f:view>
<h:form> 

    <h:panelGrid border="0" columns="2">
            <h:graphicImage id="logo" alt="jsf-sun" width="375" height="130" url="/default/logo.gif"> 
            </h:graphicImage>
            <h:outputText style="font-family:verdana;font-size:26pt;color:white"  value="Welcome to ILE Designs Customer Portal"></h:outputText>
    </h:panelGrid>

    <h:panelGrid border="0" columns="3">   
        <h:graphicImage id="image" alt="jsf-sun" width="500" height="400" url="#{startupBean.defaultRenderedImg}"> 
        </h:graphicImage>
        <h:panelGrid style="font-family:verdana;font-size:10pt;color:black" columns="1" border="1">
                <h:outputText  value="Default"></h:outputText>
                <rich:dataTable value="#{startupBean.objectList}" var="ObjectBO" cellspacing="20">

                    <rich:column>             
                        <h:outputText style="font-family:verdana;font-size:10pt;color:black" value="#{ObjectBO.displayName}"/>                      
                    </rich:column>
                    <rich:column>      
                        <h:graphicImage width="50" height="50" id="choice" alt="jsf-sun" url="#{ObjectBO.color_url}" value="#{ObjectBO.color_url}"> 
                        </h:graphicImage>  
                    </rich:column>  
                </rich:dataTable>
            </h:panelGrid>
            <h:panelGrid id="choicetable" style="font-family:verdana;font-size:12pt;color:black" columns="1" border="1" rendered="#{startupBean.choicesFlag}">

                    <rich:dataTable id="datat" value="#{startupBean.choiceKeys}" var="mapEntry" cellspacing="20">

                    <rich:column>   

                        <h:outputText style="font-family:verdana;font-size:12pt;color:black"  value="Choice"></h:outputText><h:outputText style="font-family:verdana;font-size:10pt;color:black" value="#{mapEntry.key}"/>
                        <rich:dataTable value="#{mapEntry.value}" var="ObjectBO">
                        <rich:column>
                        <a4j:commandLink id="objs" action="#{startupBean.getCategory}" reRender="materialTree" ajaxSingle="true" oncomplete="Richfaces.showModalPanel('selectMaterial',{top:'10px', left:'10px', height:'400px', width:'400px'});" >      
                                <h:outputText style="font-family:verdana;font-size:10pt;color:black" value="#{ObjectBO.displayName}" binding="#{startupBean.outTxt}"/>
                                <f:setPropertyActionListener target="#{startupBean.key}" value="#{mapEntry.key}" />
                        </a4j:commandLink>
                        </rich:column>
                        <rich:column>      

                            <h:graphicImage width="50" height="50" id="choice" alt="jsf-sun" url="#{ObjectBO.color_url}" value="#{ObjectBO.color_url}"> 
                            </h:graphicImage>  
                        </rich:column>  
                        </rich:dataTable>
                        </rich:column>

                    </rich:dataTable>
            </h:panelGrid>
    </h:panelGrid> 
    <h:panelGrid border="0" columns="2" >
                <h:commandButton action="#{startupBean.copyDefault}" image="/default/Duplicate.png"></h:commandButton>
                <h:commandButton action="#{startupBean.renderImg}" image="/default/Previous.png"></h:commandButton>
            </h:panelGrid> 

</h:form> 

<rich:modalPanel id="selectMaterial">
    <f:facet name="header"> 
        Material Selection
    </f:facet>
    <a4j:form ajaxSubmit="true">
        <h:panelGrid id="materialTree">
            <h:panelGrid id="tree1" border="0" columns="1">  
                            <rich:tree style="width:300px" nodeSelectListener="#{startupBean.processSelection}" 
                                        reRender="colordtl" ajaxSubmitSelection="true"  switchType="client"
                                         value="#{startupBean.treeNode}" var="item">
                            </rich:tree>

                        </h:panelGrid>

                        <h:panelGrid id="colordtl" > 
                        <h:panelGrid>
                            <rich:dataTable value="#{startupBean.colorList}"  var="colorBO">

                            <f:facet name="header" >
                              <h:outputText value="Colors"/>
                            </f:facet>
                            <rich:column>

                            <a4j:commandLink id="color" actionListener="#{startupBean.getColor}"> 
                                 <h:graphicImage width="100" height="100" id="colors" alt="jsf-sun" url="#{colorBO.color_url}" value="#{colorBO.color_url}" binding="#{startupBean.graphicColor}" > 
                                </h:graphicImage> 
                            </a4j:commandLink>

                    </rich:column>
                </rich:dataTable>
        </h:panelGrid>
                   <h:panelGrid border="0" columns="4">
                <h:outputText value="Please select from the below options" >        
                </h:outputText>    

                <h:selectOneMenu value="#{startupBean.selectedPattern}" >         
                    <f:selectItems value="#{startupBean.selectPattern}" /> 
                </h:selectOneMenu>

                <h:selectOneMenu value="#{startupBean.selectedFinish}" >         
                    <f:selectItems value="#{startupBean.selectFinish}" /> 
                </h:selectOneMenu>
            </h:panelGrid>
            </h:panelGrid>
            <h:panelGrid columns="1">
                <a4j:commandButton image="/default/Add1.png" oncomplete="#{Richfaces.hideModalPanel('selectMaterial')};"></a4j:commandButton>
            </h:panelGrid>
        </h:panelGrid>
    </a4j:form>
</rich:modalPanel>
</f:view>
</body>
</html> 
```

此外，在 ModalPanel commandButton oncomplete 方法中，我尝试了返回 true 和 false。

谢谢，简

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T08:23:51.353

您的父页面似乎根本没有刷新。那是因为您需要在要刷新的父页面上重新渲染组件：

```
<a4j:commandButton image="/default/Add1.png" 
       reRender="someComponentId(s) on the parent page" 
            oncomplete="Richfaces.hideModalPanel('selectMaterial');"> 
```

# c# - 如何在 Windows azure 中删除 blob

> ID：12190059
> 
> 赞同：2
> 
> 时间：2012-08-30T04:46:54.493
> 
> 标签：c#, azure, azure-blob-storage

我在blob中保存了一些文件，我的blob文件结构是：

```
/container/B1/1
/container/B1/2
/container/B1/3
/container/B1/4

/container/B2/1
/container/B2/2
/container/B2/3
/container/B2/4 
```

现在我想删除 B1 blob 中存在的所有子 blob（即 1,2,3,4 ）。我怎样才能删除这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T06:20:34.907

从技术上讲，这些不是“子块”。Azure Blob 存储有两个级别，容器和 Blob。您实际上有四个不同的、不相关的 blob，名称分别为“B1/1”、“B1/2”、“B1/3”和“B1/4”，您需要单独删除它们。

如果您只想手动执行此操作，[Cerebrata Cloud Storage Studio](http://www.cerebrata.com/Products/CloudStorageStudio/Default.aspx)或[Cloudberry Explorer 等](http://www.cloudberrylab.com/free-microsoft-azure-explorer.aspx)实用程序是非常宝贵的工具。

[以编程方式，各种 SDK 中的每个存储客户端 API 都有一个用于进行最终 REST 调用](http://msdn.microsoft.com/en-us/library/windowsazure/dd179413)的包装器。[List Blobs API](http://msdn.microsoft.com/en-us/library/windowsazure/dd135734.aspx)确实有一个可选的分隔*符*参数来列出具有给定前缀的所有 blob，因此例如使用 List Blobs 和前缀“B1/”，您将返回四个感兴趣的 blob，然后您将发出单个删除他们。如果您使用的是 .NET SDK，请查看ListBlobs 的[此重载](http://msdn.microsoft.com/en-us/library/windowsazure/ee758385)以使用[BlobRequestOptions.UseFlatBlobListing](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storageclient.blobrequestoptions_members)选项）

# objective-c - AFNetwork 与 ASP.net Web 服务

> ID：12190060
> 
> 赞同：0
> 
> 时间：2012-08-30T04:47:04.083
> 
> 标签：objective-c, json, afnetworking

我使用 getPath 方法调用我的网络服务，如下所示：

```
[[AFTwitterAPIClient sharedClient] getPath:@"GetWineCategoryList"
                                parameters:parameters success:^(AFHTTPRequestOperation *operation, id JSON) {
                                    NSLog(@"JSON = %@",JSON);
                                    NSMutableArray *mutableTweets = [NSMutableArray arrayWithCapacity:[JSON count]];
                                    for (NSDictionary *attributes in mutableTweets) {
                                        Tweet *tweet = [[Tweet alloc] initWithAttributes:attributes];
                                        [mutableTweets addObject:tweet];
                                    }

                                    if (block) {
                                        block([NSArray arrayWithArray:mutableTweets], nil);
                                    }
                                } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
                                    if (block) {
                                        block([NSArray array], error);
                                    }
                                }]; 
```

它始终输出为 NSData。如果我将此 NSData 转换为字符串，我会得到一个 JSON 字符串。

```
JSON = <5b7b2243 61746567 6f72794e 616d6522 3a224f54 48455222 7d2c7b22 43617465 676f7279 4e616d65 223a2252 4544227d 2c7b2243 61746567 6f72794e 616d6522 3a22524f 5345227d 2c7b2243 61746567 6f72794e 616d6522 3a225748 49544522 7d5d> 
```

为什么它不会转换为 NSArray？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T05:10:43.360

您可以使用[NSJSONSerialization 类](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)将您的 NSData 对象转换为 NSArray。

```
NSArray *array = (NSArray*)[NSJSONSerialization JSONObjectWithData:JSON 
                                                 options:0
                                                   error:&error]; 
```

这假设您知道您的 JSON 是数组类型而不是字典类型。

# mysql - 如何管理在 Azure 中创建的 mysql 数据库？

> ID：12190067
> 
> 赞同：19
> 
> 时间：2012-08-30T04:47:42.787
> 
> 标签：mysql, azure

Azure 网站让我们可以使用新的 MySQL 数据库而不是 SQL Azure 来配置我们的站点。但创建后它永远不会在管理面板中可见。我相信这是因为托管在第三方服务器中，但我不知道如何访问它，有什么提示吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-30T14:06:47.057

要从外部工具管理它，[请查看我的回复](https://stackoverflow.com/questions/12111760/accessing-azure-mysql-service/12112187#12112187)。

尽管该数据库由第三方 (ClearDB) 托管，但您应该会在 Windows Azure 门户网站的仪表板上看到它作为“链接资源”列出。当您删除网站时，它会询问您是否还想删除链接的资源。

如果您选择不这样做或显式取消链接 MySQL 资源，它仍然存在，当您随后执行显式链接时，您将看到它是现有资源的列表。（我还没有找到查看未链接 MySQL 数据库列表的方法，但当我听到时会更新此响应）。

所以我会说你可以删除 MySQL 数据库

1.  删除整个网站，并在出现提示时选择要删除的 MySQL 数据库

2.  取消 MySQL 数据库与您要保留的网站的链接；创建一个新的临时网站，并将现有的 MySQL 数据库作为链接资源添加到其中。然后删除新的临时网站以及链接的数据库。不优雅，但似乎在我的测试中有效。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T12:20:00.063

目前您无法管理 MySQL 服务器。

至于作为第三方 - 是的，服务（MySQL-as-a-Service）由 Azure 中的第三方提供！它不在其他服务器上，它在 Azure 服务器上。最有可能（只是我的猜测）工人角色。但由于该功能仍处于预览阶段，因此缺少管理。

第三方供应商是[ClearDB](http://www.cleardb.com/partners)。他们在 Windows Azure 之上提供 MySQL 作为服务。所以不用担心，您的数据与您的网站位于同一个数据中心（当然，如果您选择相同的话）。但是你不能直接管理它，除非你在你的网站上安装了像[PhpMyAdmin这样的东西。](http://www.phpmyadmin.net/home_page/index.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-08T21:07:22.563

我有一个稍微不同的问题，Jim O'Neil 的 #2 没有完全工作，因为孤立的数据库是通过“附加组件”库创建的。要解决此问题，您可以按照建议将孤立的数据库链接到新的临时站点，然后在选中数据库的情况下单击“链接资源”选项卡中的“管理”链接。这将带您进入 ClearDB 的数据库管理。

从那里，您可以单击第一个选项卡，然后单击“删除”从 ClearDB 中手动删除数据库。这是一个异步操作，因此可能需要一些时间，并且您可能还必须刷新门户，因为条目已缓存。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-03T23:44:50.033

您还可以添加 ClearDB 插件并创建免费层或每月 9.99 的 Venus 1gb 层。免费层只有 20mb，所以这并不多。对于数据库名称，您可以输入现有的 MySQL 数据库，ClearDB Add-on 将链接到该数据库。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-05-19T15:28:09.427

我知道这是一个非常古老的问题，但这是我在谷歌搜索删除 mysql azure 数据库时出现的第一个结果。您现在*可以*通过链接资源页面从管理门户管理您的 MySql 数据库。要么直接点击mysql DB的名称，要么选择行并点击底部的manage down。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-11-19T22:13:07.033

我知道这是一个迟到的答案，但我跟着他们获得了确切的访问权限

1.  选择您的网络应用
2.  点击的链接资源
3.  单击 mysql 数据库名称（它会将您重定向到您帐户的 cleardb 网站）
4.  安装mysql工作台
5.  点击端点信息
6.  在 mysql 工作台中给出主机名的值，并访问凭据，即用户名、密码

你很高兴:)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-06-20T20:03:14.773

恢复一年前的线程，但它仍然出现在谷歌搜索中。无论如何，我已经逐步概述了如何在 Azure 上配置 MySQL 以允许外部连接并通过您最喜欢的 DB 工具连接到它。它是特定于产品的，但适用于任何工具。 [关联](https://bradwulf.wordpress.com/2016/06/20/getting-started-with-the-cloud-and-mysql-on-microsoft-azure/)

# sql - 在类型化的 xml 列上选择节点的原子值

> ID：12190068
> 
> 赞同：3
> 
> 时间：2012-08-30T04:47:46.483
> 
> 标签：sql, sql-server-2008, xpath

如果不能在其上使用 text() ，如何获取类型化 xml 列中元素的原子值？

这个查询；

```
-- Add schema
CREATE XML SCHEMA COLLECTION MySchema AS N'<xs:schema xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xmlns:xs="http://www.w3.org/2001/XMLSchema"
            attributeFormDefault="unqualified"
            elementFormDefault="qualified"
            xmlns="http://mynamespace"
            targetNamespace="http://mynamespace">

  <xs:element name="element1" type="element1Type">
  </xs:element>

  <xs:complexType name="element1Type">
    <xs:sequence minOccurs="0" maxOccurs="unbounded">
      <xs:element name="element2" type="element2Type" />
    </xs:sequence>
  </xs:complexType>

  <xs:complexType name="element2Type">
    <xs:sequence>
      <xs:element name="element3" type="element3Type" minOccurs="0" maxOccurs="unbounded" />
    </xs:sequence>
  </xs:complexType>

  <xs:complexType name="element3Type">
    <xs:sequence minOccurs="0">
      <xs:element minOccurs="0" name="element4" />
    </xs:sequence>
  </xs:complexType>

</xs:schema>'
GO

-- Create table
CREATE TABLE [dbo].[MyTable](
    [XmlColumn] [xml](CONTENT [dbo].[MySchema]) NOT NULL
)
GO

-- Add test data
INSERT INTO MyTable SELECT N'<element1 xmlns="http://mynamespace" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <element2>
    <element3>
      <element4>my text here</element4>
    </element3>
  </element2>
</element1>'
GO

-- run query
WITH XMLNAMESPACES(
    'http://mynamespace' as s,
    DEFAULT 'http://mynamespace'
)
SELECT 
    T.rows.value('(element3/element4)[1]/text()', 'varchar(100)') as [AtomicValue]
FROM
    MyTable
CROSS APPLY
    XmlColumn.nodes('/element1/element2') T(rows) 
```

结果是;

```
XQuery [MyTable.XmlColumn.value()]: 'text()' 不支持简单类型或
'http://www.w3.org/2001/XMLSchema#anyType' 元素，找到
'元素（{http://mynamespace}:element4,xs:anyType）？'。

```

我已经读过[这个](http://www.sqlskills.com/BLOGS/BOBB/post/Fun-with-static-XQuery-evaluation-3.aspx)，但是在我希望能够读取的每个原子值上大规模编辑模式感觉就像是矫枉过正......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T06:28:45.407

您可以使用`query`然后`value`.

```
WITH XMLNAMESPACES(
    'http://mynamespace' as s,
    DEFAULT 'http://mynamespace'
)
SELECT 
    T.rows.query('element3/element4').value('.', 'varchar(100)')
FROM
    MyTable
CROSS APPLY
    XmlColumn.nodes('/element1/element2') T(rows) 
```

或者您可以`element4`在模式中指定类型。

```
<xs:element minOccurs="0" name="element4" type="xs:string"/> 
```

并使用此查询

```
WITH XMLNAMESPACES(
    'http://mynamespace' as s,
    DEFAULT 'http://mynamespace'
)
SELECT 
    T.rows.value('(element3/element4)[1]', 'varchar(100)') as [AtomicValue]
FROM
    MyTable
CROSS APPLY
    XmlColumn.nodes('/element1/element2') T(rows) 
```

# c++ - 为什么我不能使用函数适配器compose2？

> ID：12190069
> 
> 赞同：2
> 
> 时间：2012-08-30T04:47:59.467
> 
> 标签：c++, stl, sgi

我在linux上使用GCC 4.1.2，STL必须是SGI STL。写完之后：

```
#include <functional>
 std::find_if(PirateFlush, PirateFlush + size,
                compose2(std::logical_and<bool>(), bind2nd(std::greater<UInt32>(), time),
                    bind2nd(std::less<UInt32>(), now))); 
```

编译器说：

错误：“compose2”未在此范围内声明

怎么了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T05:19:24.053

`compose2`不是标准的，既不在全局也不在`std`命名空间中。

gcc 在命名空间中提供了一些非标准的 SGI 扩展`__gnu_cxx`。

Use`__gnu_cxx::compose2`或 boost 有许多预定义的。

-缺口

# jquery - 下载为excel时如何从文件扩展名中删除部分

> ID：12190072
> 
> 赞同：0
> 
> 时间：2012-08-30T04:48:21.233
> 
> 标签：jquery

[工作代码 JSFIDDLE](http://jsfiddle.net/n9XRx/8/)

```
$( "#clickExcel" ).click(function() {  
  var dtltbl = $('#dtltbl').html();    
  window.open('data:application/vnd.ms-excel,' + encodeURIComponent($('#dtltbl').html()));
}); 
```

当我单击下载为 excel ...我得到 .part 以及扩展名，例如`GhCRExp0.xls.part`如何下载没有名称 .part 的文件`GhCRExp0.xls`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T07:23:38.273

.part 是 chrome 中未完成的下载，也可能在其他浏览器中。你的小提琴词对我来说很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T07:19:53.003

您使用的是哪个浏览器？Meybe它的浏览器扩展和那里有什么问题吗？

在我的 chrome 中它没有扩展名（它只是“下载”）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-02T14:50:46.553

该文件将在文件下载后消失。等到下载完成有问题吗？

# c++ - 避免许多类型转换

> ID：12190074
> 
> 赞同：0
> 
> 时间：2012-08-30T04:48:38.940
> 
> 标签：c++, casting

我正在为我的 OpenGL 应用程序创建一个 UI 系统，并且我有这个设计......

用户界面管理器：

```
class UIManager {
public:
  UIElement *add(UIElement *element);
} 
```

示例元素：

```
class Button : public UIElement {
public:
  Button(UIElement *parent, const string &caption, const Point &position);
} 
```

现在每次我想实例化一个按钮并保留指向它的指针时，我都必须这样写：

```
// somewhere in the header file
UIManager *manager;
Button *button1, *button2;

// in cpp
button1 = static_cast<Button *>(manager->add(new Button(0, "Enter", Point(10, 10))));
button2 = static_cast<Button *>(manager->add(new Button(0, "Exit", Point(10, 50)))); 
```

这对我来说看起来有点冗长，尤其是当我有十几个元素时。

这是一个糟糕的设计吗？还有其他方法可以克服吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T05:07:17.980

您可以将按钮分配给要添加的参数内的变量：

```
// somewhere in the header file
UIManager *manager;
Button *button1, button2;

manager->add(button1 = new Button(0, "Enter", Point(10, 10)));
manager->add(button2 = new Button(0, "Exit", Point(10, 50))); 
```

还要从 add 方法中删除返回的参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T11:16:37.273

您可以 declate`add`作为模板方法，并避免所有转换：

```
class UIManager {
public:
    template<typename T> 
    T* add(T *element) {
      // do something with element
      return element;
    }
} 
```

然后你的客户代码变成

```
button1 = manager->add(new Button(0, "Enter", Point(10, 10))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T07:37:52.587

将该方法声明`add`为转发给实际方法的方法模板：

```
class UIManager {
public:
    UIElement *add(UIElement *element);
    template<typename T> T *add(T *element) {
        return static_cast<T *>(add(static_cast<UIElement *>(element))); }
}

Button *button1 = manager->add(new Button(0, "Enter", Point(10, 10))); 
```

请注意，您应该使用托管指针（`unique_ptr`或者，在这种情况下为`shared_ptr`），而不是原始指针。

# asp.net - 绑定 Datalist 中的 Colorbox 和 ASP.NET

> ID：12190076
> 
> 赞同：0
> 
> 时间：2012-08-30T04:48:44.220
> 
> 标签：asp.net, colorbox, datalist

我的图像存储在 SQL 数据库中。我绑定到表并使用生成的图像控件和 ashx 处理程序。没问题。我现在有一个被锚标签包围的缩略图。问题在于找到隐藏的 div 中的大图像并只显示那个.. 我不想要一个画廊只是那个图像。如果您正在阅读本文，您就会知道数据列表在生成其控件时会将损坏的 ID 分配给其组件。如何从我的缩略图中处理该图像？

```
<asp:DataList ID="datalist" runat="server" RepeatColumns="3" RepeatDirection="Horizontal">
    <ItemTemplate>
       <a class="colorme" href="#">Actual thumbnail image</a>
       <div style="display:none">
          <div id="colorme" runat="server">Actual image to display            
          </div>
       </div>
    </ItemTemplate>
</asp:DataList> 
```

ASP.NET 4.0 没有母版页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T04:55:14.960

为您的图像分配 ID 并在服务器上运行并使用 `<%= yourimage.ClientID %>`它将返回该特定图像，无论您将使用它..而不是 Datalist 控件生成的损坏的 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T04:56:21.223

最简单的解决方案是使用 jQuery，并使用[next-sibling selector](http://api.jquery.com/next-siblings-selector/)找到元素。

```
$(".colorme").click(function(){
    $(this).find("~ div").show();
}); 
```

无论页面上有多少图像，这都会起作用。

# matlab - 如何用上面的行替换连续的nans元素

> ID：12190077
> 
> 赞同：4
> 
> 时间：2012-08-30T04:48:45.407
> 
> 标签：matlab

我有以下矩阵

```
A = [ 0    0  
      0    0 
      1   -1 
    NaN  NaN 
    NaN  NaN 
      0    0 
    NaN  NaN 
    NaN  NaN] 
```

我想`NaN`用它上面的行替换所有行。对于上面的矩阵，这将是

```
A = [0  0 
     0  0 
     1  -1 
     1  -1 
     1  -1 
     0   0 
     0   0 
     0   0] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T07:02:53.360

一个想法是首先创建一个*压缩*矩阵`B`，它不包含带有 a 的行，`NaN`然后再次扩展该矩阵以与原始矩阵具有相同的长度：

```
mask = any(isnan(A), 2);
B = A(~mask, :);
result = B(cumsum(~mask), :); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T05:23:32.867

我不确定这是否可以矢量化......更简单的解决方案可能是一个循环：

```
newRow = [];
nans = isnan(A(:,1));
for ii = 1:size(A,1)

    if nans(ii)

        %# first row might be NaN -- skip it
        if ii==1
            continue; end

        %# for all other rows:
        if isempty(newRow) 
            newRow = A(ii-1,:); end

        A(ii,:) = newRow;

    else
        newRow = [];
    end

end 
```

# html - 样式表被汉字接管/替换

> ID：12190078
> 
> 赞同：13
> 
> 时间：2012-08-30T04:48:49.247
> 
> 标签：html, css, character-encoding

好吧，有些事情疯了。除非中国从我的 iepage 上的测试 style.css 文件开始接管 - 好吧，我猜他们是从右脚开始讨厌 IE，但无论如何。它加载时没有样式表 - 可悲:(我进入网络检查器，看到我所有的链接文件都充满了[可能]汉字（瑨汭笠ऊ楷瑶......）我已经尝试删除服务器上的文件和重新上传它们。本地文件看起来很好，直接加载文件时它们看起来很好。我没有做任何应该改变渲染或任何事情的事情。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-30T05:13:26.797

所以我想我想通了。这很*奇怪*。但无论如何。

我将您的 HTML 复制并粘贴到本地文件中进行试验。它加载得很好。它被保存为 UTF-8。然后我把它改成 UTF-16，我得到了你所看到的！据我所知，浏览器（对我来说是 Firefox for Linux）假设链接的文件都与 HTML 采用相同的编码......

所以 - 我假设服务器上的文件是 UTF-16，如果你把它改成 UTF-8，你应该很好。希望修复它！

**PS：** 根据 Firebug 的说法，您的 HTML*是*由您的服务器压缩的，即使您从未明确告诉过它。但这似乎并没有造成任何问题，谢天谢地。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-29T17:25:37.993

我从嵌入在 iFrame 中的 PowerShell 导出的 XML 文件遇到了同样的问题。

在 IE10/11 或 Edge 中没有问题，但 Firefox 和 Chrome 不会加载样式表。

加载 iFrame 的原始页面是 UTF8 编码的，与样式表相同。但是，XML 文件被导出为 UTF16LE（PowerShell 中的“Unicode”）。从 iFrame 加载 XML 文件时，它会将样式表加载为中文字符。

我在 PowerShell 中转换了编码...

```
Get-Content C:\foldername\file.html -Encoding Unicode | Set-Content -Encoding UTF8 C:\foldername\file.html 
```

......它奏效了！我的猜测是 IE 必须将所有文件的编码与父文件相同，这意味着 UTF16LE 编码的文件被呈现为 UTF8。Chrome 和 Firefox 显然不这样做。

感谢 Xavier Holt 让我走上了正确的道路！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-13T09:14:19.733

另一个快速的解决方案是使用记事本更改文件编码。在记事本中打开文件并使用从下拉列表中选择的 UTF-8 选项另存为

[![在此处输入图像描述](../Images/6d72109c71bc5f6befd5666d2682e715.png)](https://i.stack.imgur.com/4G1AN.png)

# jquery - 如何将fancybox调整为自定义创建的iframe大小

> ID：12190079
> 
> 赞同：1
> 
> 时间：2012-08-30T04:48:51.967
> 
> 标签：jquery, fancybox

我想让花式框尺寸与“手动创建”iframe 的内容大小相匹配。

我试过这个：http: [//jsfiddle.net/ystLD/3/](http://jsfiddle.net/ystLD/3/)

但它不起作用，现在我有点卡在这里。

有谁知道如何做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T07:50:00.010

“手动创建”`iframe`的缺点是，fancybox 并不真正知道`type`内容正在处理什么。我宁愿用选项打开fancybox `type: "iframe"`。

然后，我认为您可以根据 的内容重新调整fancybox 大小的唯一方法`iframe`是对在 中打开的页面内的尺寸进行硬编码`iframe`，或者在 中`html`，`body`或者在包装容器中，例如

```
<html style="width: 800px; height: 650px;"> 
```

那么你可以使用`beforeShow`回调来获取`iframe`类似的尺寸

```
 beforeShow: function(){
   this.width = $('.fancybox-iframe').contents().find('html').width();
   this.height = $('.fancybox-iframe').contents().find('html').height();
  } 
```

如果您不拥有打开的页面并且您无法对其尺寸进行硬编码，您仍然可以尝试获取or标记的`innerWidth()`and `innerHeight()`，但正如您在这个[fork fiddle](http://jsfiddle.net/eaKbU/6/)中看到的那样，它可能真的有问题`html``body`

Here is the answer that worked for someone else [https://stackoverflow.com/a/10776520/1055987](https://stackoverflow.com/a/10776520/1055987)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T06:10:24.313

您可以将宽度和高度附加到 iframe 的属性，因为无论如何您都是手动创建的。

```
.attr({ name: 'blah', width: '500px', height: '500px' }) 
```

如果您想要的东西与您正在获取的页面大小完全匹配，那么这是一项非常乏味的任务，因为 iframe 非常类似于打开浏览器窗口。您必须通过分析结构以编程方式确定最宽 div 的大小。此外，您必须确定页面是否使用响应式布局并为此使用特定大小。

# mysql - 如何更新选定列表中的一个变量并将其他变量设置为零？

> ID：12190082
> 
> 赞同：0
> 
> 时间：2012-08-30T04:49:13.617
> 
> 标签：mysql

我从 post 表中获得了此查询中的 ID（要更新的行），这些 ID 作为成绩表中的行，我想将一个 var 设置为 1，将此数组中的其他设置为 0，并将其余行保留在等级表不变：

```
SELECT ID FROM posts
WHERE post_parent = ''
AND post_status IN ( '')
AND post_type = '' 
```

我想了解如何如上所述更新成绩表。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T04:52:26.723

您可以使用此解决方案：

```
UPDATE grade g
JOIN   post p ON g.id          = p.id
             AND p.post_parent = $parent_id
             AND p.post_status = $post_status
             AND p.post_type   = $post_type
SET    g.grade = CASE WHEN g.id = $id THEN 1 ELSE 0 END 
```

# object - 什么时候应该有一个将操作名称映射到函数而不是常规 Switch 语句的对象

> ID：12190086
> 
> 赞同：1
> 
> 时间：2012-08-30T04:50:33.993
> 
> 标签：object, switch-statement

我什么时候应该使用这样的东西而不是常规的 Switch 语句？各自的优缺点是什么？

```
function ABC(i, j, a) {
  var ops = {
    'add': function(i, j) { return i + j; },
    'minus': function(i, j) { return i - j; },
    'multiply': function(i, j) { return i * j; },
    'random': function(i, j) {
      return ops[['add', 'minus', 'multiply'][Math.floor(Math.random() * 3)]](i, j);
    }
  };
  return ops[a](i, j);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T04:54:04.753

优点：它更灵活。您可以在任何地方定义函数，并且可以在运行时重新分配它们，甚至以编程方式生成字典，如果有可以分解的模式，这是一个巨大的胜利。您也可以稍后重用字典，或将其传递。

缺点：在编译语言中，它可能会更慢。（使用 JIT 并不重要。）对于小代码片段，切换版本更具可读性。

就我个人而言，我更喜欢 dict 方法，但我还是主要用 Python 编写代码。

# javascript - 带车把的 qtip

> ID：12190090
> 
> 赞同：0
> 
> 时间：2012-08-30T04:51:02.117
> 
> 标签：javascript, coffeescript, handlebars.js, qtip

我已经为此环顾了一段时间，但找不到任何东西。我正在尝试将车把模板与 qtip 结合使用。我想一种方法是将车把模板转换为字符串并将其作为值放在“内容”中，但我不确定如何将车把模板转换为字符串。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T05:04:58.990

所以我明白了，对不起，如果问题不清楚，我不知道该怎么问！

```
objectData = {field1 : value, field2: value1}
html = Handlebarstemplates[templateHere](objectData)
$(".tooltip").qtip({
content:{
  text:html
}
  }) 
```

# algorithm - 随机数发生器测试

> ID：12190091
> 
> 赞同：7
> 
> 时间：2012-08-30T04:51:05.753
> 
> 标签：algorithm, unit-testing, testing

您将如何测试随机数生成器是否正在生成实际的随机数？

我的方法：首先构建一个大小为 M 的哈希，其中 M 是质数。然后取随机数生成器生成的数字，并用 M. 取 mod，看看它填充了所有散列或只是部分。这就是我的方法。我们可以用可视化来证明吗？

因为我对测试知之甚少。你能建议我彻底解决这个问题吗？提前致谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-30T05:53:36.790

您应该知道，您不能*保证*随机数生成器正常工作。请注意，即使是 [1,10] 范围内的完美均匀分布 - 在 10 个数字的随机抽样中，有 10 ^(-10)的机会获得 10 乘以 10。

有可能吗？当然不是。

那么——我们*能*做些什么呢？

我们可以**统计证明**，如果随机数生成器确实是均匀分布的，则组合 (10,10,....,10) 是*不可能的。*这个概念称为**[假设检验](http://en.wikipedia.org/wiki/Statistical_hypothesis_testing)**。使用这种方法，我们可以说“以 x% 的确定性水平 - 我们可以拒绝数据取自均匀分布的假设”。

一种常见的方法是使用**[Pearson's Chi-Squared test](http://en.wikipedia.org/wiki/Pearson%27s_chi-squared_test)**，这个想法与你的相似 - 你填写一个表格 - 检查每个单元格的*观察*（生成）数字是多少，以及*预期*的数字是多少零假设下每个单元格的数字（在您的情况下，预期为`k/M`- 其中 M 是范围的大小，k 是所取数字的总数）。
然后，您对数据进行一些操作（有关此操作的详细信息，请参阅维基百科文章） - 并获得一个数字（测试统计数据）。然后检查这个数字是否*可能*来自[卡方分布](http://en.wikipedia.org/wiki/Chi-squared_distribution). 如果是——你不能拒绝原假设，如果不是——你可以用 x% 的把握确定数据不是从一个统一的随机生成器中获取的。

**编辑：**示例：
您有一个立方体，并且您想检查它是否“公平”（均匀分布在 中`[1,6]`）。抛出 200 次（例如）并创建下表：

```
number:                1       2         3         4          5          6
empirical occurances: 37       41        30        27         32         33
expected occurances: 33.3      33.3      33.3      33.3       33.3       33.3 
```

现在，根据 Pearson 的检验，统计数据为：

```
X = ((37-33.3)^2)/33.3 + ((41-33.3)^2)/33.3 + ... + ((33-33.3)^2)/33.3 
X = (18.49 + 59.29 + 10.89 + 39.69 + 1.69 + 0.09) / 33.3
X = 3.9 
```

对于 random `C~ChiSquare(5)`，更高的概率`3.9`是`~0.45`（这不是不可能的）¹。

所以我们*不能*拒绝原假设，我们可以得出结论，数据*可能*均匀分布在`[1,6]`

* * *

(1) 如果值小于 0.05，我们通常会拒绝原假设，但这取决于具体情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T04:59:14.010

我天真
的想法：生成器遵循分布。（至少应该如此。）进行合理数量的运行，然后将值绘制在图表上。在这些点上拟合回归曲线。如果它与分布的形状相关，那么你很好。（这也可以在 1D 中使用投影和直方图。并且可以使用正确的工具完全自动化，例如 MatLab）
您还可以使用前面提到的顽固测试，这肯定更好，但涉及的直觉要少得多，至少在您的边。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T05:14:11.657

假设您想在区间 [0, 1] 上生成均匀分布。

然后一种可能的测试是

```
for i from 1 to sample-size
when a < random-being-tested() < b
counter +1
return counter/sample-size 
```

并查看结果是否接近于 ba（b 减去 a）。

当然，您应该定义一个函数，将 0 和 1 之间的 a、b 作为输入，并返回 counter/sample-size 和 ba 之间的差值。循环遍历可能的 a、b，例如 0.01 的倍数，a < b。当差值大于预设的 epsilon（例如 0.001）时，打印出 a、b。

那些是有太多异常值的a，b。

如果您让样本大小为 5000。您的随机测试总共将被调用约 5000 * 5050 次，希望不会太糟糕。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-31T08:42:13.283

我有同样的问题。当我完成编写代码时（使用外部 RNG 引擎）

我查看了结果，发现每当我有很多结果时，它们都没有通过卡方检验。

我的代码生成一个随机数并保存每个结果范围的数量。当我有很多结果时，我不知道为什么卡方检验会失败。

在我的研究中，我看到 C# Random.next() 在任何随机范围内都失败了，并且其中一些数字比另一个数字具有更好的几率，而且我还看到 RNGCryptoServiceProvider 随机提供程序不支持大数字。

当尝试获取 0-1,000,000,000 范围内的数字时，0-300M 范围内的数字出现的几率更高......

因此，我使用的是 RNGCryptoServiceProvider，如果我的范围高于 100M，我将结合我自己的数字（RandomHigh*100M + RandomLow），并且两个随机数的范围都小于 100M，所以很好。

祝你好运！

# iphone - 如何在 UiWebView 中仅垂直而不是水平捏/缩放

> ID：12190094
> 
> 赞同：1
> 
> 时间：2012-08-30T04:51:30.683
> 
> 标签：iphone, ios, uiwebview, zooming, pinch

我想让我的 webview 仅垂直收缩/缩放。通过缩放 web 视图，我想让它仅垂直缩放而不是水平缩放。有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T04:58:48.730

UIWebView 也有 UIScrollView 作为它的子类。

因此，请参阅[how-to-lock-the-horizo​​ntal-scrolling-of-a-scrollview-in-ios](https://stackoverflow.com/questions/5271521/how-to-lock-the-horizontal-scrolling-of-a-scrollview-in-ios)链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T06:58:26.870

通过快速搜索，我找到了其他在您之前开辟道路的人： [自定义捏缩放](https://stackoverflow.com/questions/1531698/implement-custom-zooming-for-a-uiscrollview)

简短的回答是不，你不能像你想要的那样做一个完全自定义的捏缩放。但是，您可以通过在自动捏缩放释放后手动重新缩放您的内容来轻松获得您正在寻找的*最终行为。*它不是那么漂亮，但如果您决定进行垂直缩放，它可能是最好的选择。

# c# - 尝试计算总数时不显示总库存 C#

> ID：12190098
> 
> 赞同：-1
> 
> 时间：2012-08-30T04:51:50.850
> 
> 标签：c#, inheritance

当我调用我的 Counter Stock 方法时：

```
 FoodProducts FoodProd1 = new FoodProducts("FP001", "Meat", 15.99, 200, 100, "Australia");
 FoodProducts FoodProd2 = new FoodProducts("FP002", "Bread", 2.99, 150, 50, "Italy");

 Console.WriteLine("This is the Total Stock For the Store: {0}", CounterStock(ProductList)); **//Not Displaying the Total Stock of All items it equals to 0**

List<Products> ProductList = new List<Products>();

static int CounterStock(List<Products> ProductList)
{
        int CounterStoreStock = 0;
        foreach (Products Count in ProductList)
        {
            CounterStoreStock += Count.StockCount++;
        }
        return CounterStoreStock;
    } 
```

我正在使用继承

```
class Products
{
    string id;
    string name;
    double price;
    int soldCount;
    int stockCount;

    public Products(string id, string name, double price, int soldCount, int stockCount)
    {
        this.id = id;
        this.name = name;
        this.price = price;
        this.soldCount = soldCount;
        this.stockCount = stockCount;
    }

    public string ID
    {
        get{return id;}
    }

    public string Name
    {
        get { return name; }
        set {name = value;}
    }

    public double Price
    {
        get {return price;}
        set {price = value;}
    }

    public int SoldCount
    {
        get {return soldCount;}
        set { soldCount = value; }
    }

    public int StockCount
    {
        get {return stockCount;}
        set  {stockCount = value;}
    }

    public virtual double Tax()
    {
        /*
        double tax;
        const double Rate = 0.05;
        tax = Price * Rate;
        */
        return 0;
    }

    // Print Method for the Products Class
    public virtual void Print()
    {
        Console.WriteLine("Product ID: {0}", this.id);
        Console.WriteLine("Product Name: {0}", this.name);
        Console.WriteLine("Prodcut Price: {0}", this.price);
        Console.WriteLine("Sold Counter: {0}", this.soldCount);
        Console.WriteLine("Stock Count: {0}", this.stockCount);
        Console.WriteLine();
        //Console.WriteLine(Tax());
    }
} 
```

这是产品类别，如果您需要更多信息，请提出。谢谢，因为当我尝试计算所有库存的总和时，当前的输出总是一直为 0，我不太确定我做错了什么。

```
class FoodProducts : Products
{

    private string origin;

    public FoodProducts(string id, string name, double price, int soldCount, int stockCount, string origin)
        : base(id, name, price, soldCount, stockCount)
    {
        this.origin = origin;
    }

    private string Origin
    {
        get { return origin; }
        set { origin = value; }
    }

    public override void Print()
    {
        base.Print();
        Console.WriteLine("Origin: {0}", this.Origin);
        Console.WriteLine("------------------");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T05:01:00.097

当您在第 4 行创建产品列表时，如何访问第 3 行的产品列表？用以下 4 行替换您的前 4 行代码：

```
FoodProducts FoodProd1 = new FoodProducts("FP001", "Meat", 15.99, 200, 100, "Australia");
FoodProducts FoodProd2 = new FoodProducts("FP002", "Bread", 2.99, 150, 50, "Italy");
List<Products> ProductList = new List<Products>();
ProductList.items.add(FoodProd1 );
ProductList.items.add(FoodProd2 );
Console.WriteLine("This is the Total Stock For the Store: {0}", CounterStock(ProductList)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T05:24:13.377

您对以下行的使用是错误的：

```
 CounterStoreStock += Count.StockCount++; 
```

`++`您使用的运算符是“post-fix”版本。在将当前值添加到`Count.StockCount` **后**，它会尝试更新 的值`CounterStoreStock`。

你应该试试这个：

```
 CounterStoreStock += ++Count.StockCount; 
```

这将在将值添加到`Count.StockCount` **之前**递增`CounterStoreStock`。

`Count.StockCount`但是，无论如何，您似乎并不想实际更改 的值。

所以，试试这个：

```
 CounterStoreStock += Count.StockCount; 
```

作为替代方案，您可以尝试使用 LINQ 方法：

```
static int CounterStock(List<Products> ProductList)
{
    return ProductList.Sum(p => p.StockCount);
} 
```

# asp.net - 如何动态更改母版页的内容

> ID：12190099
> 
> 赞同：0
> 
> 时间：2012-08-30T04:51:50.217
> 
> 标签：asp.net, master-pages

我正在为电子商务网站开发母版页。我在母版页上有左侧菜单栏。此左侧菜单栏包含类别列表并随着用户更改类别而更改。类别存储在 SQL DB 中。所以，我想随着类别的变化重建这个菜单栏，有可能吗？

看看[www.actgreen.com.au/www](http://www.actgreen.com.au/www)

而且我想为网站创建面包屑，我该怎么做。

我正在使用 asp.net 4.0。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T05:10:55.003

好吧，我们不知道您在代码中使用什么确切的方法来绑定左侧菜单。此外，您必须在母版页本身中绑定左侧菜单。因此，每次单击左侧菜单时，您都可以通过为其提供一些参数来重新绑定它。或者如果您需要从其他页面或内容页面调用它..那么您可以像这样尝试..

```
System.Reflection.MethodInfo mInfo = this.Page.Master.GetType().GetMethod("RefreshLeftMenu");
mInfo.Invoke(this.Page.Master, null); 
```

我是这样做的……希望对你也有帮助……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T05:14:36.247

您可以在母版页上使用控件并在 OnLoad 页面上更改它们

```
Label MyLabelBrand = (Label)Master.FindControl("LabelBrand");
MyLabelBrand.Text = "Fabrikam"; 
```

如果要调用`Refresh()`母版页的方法，则需要调用`Master.Refresh();`。为此，您需要在 ContentPage 上注册主类型：

```
<%@ Page Title="Home Page" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true"
CodeBehind="Default.aspx.cs" Inherits="WebApplication1._Default" %>

<%@MasterType VirtualPath="Site.Master" %> 
```

# c++ - 静态全局变量 V 静态全局 类变量

> ID：12190100
> 
> 赞同：3
> 
> 时间：2012-08-30T04:52:10.403
> 
> 标签：c++, static, global-variables

更推荐哪种方式来声明字符串 const？

1.  是在文件范围内声明全局变量。
2.  将其声明为类的全局。

该变量将仅在类成员函数中使用。我倾向于觉得 2 更好，因为它仅特定于类成员函数。

```
A.cpp
---------------------
static const std::string hello_str = "Hello";

void A::print()
{
    std::cout << hello_str;
} 
```

（或者）

```
A.h
---------------------
class A{
public:
    static const std::string hello_str;
    void print();
}

A.cpp
---------------------
const std::string A::hello_str = "Hello";

void A::print()
{
    std::cout << A::hello_str;
} 
```

编辑-1：

让我说 hello_str 的内容可以改变。例如。每当他对文件进行更改时，开发人员都会手动更新该字符串。

在这种情况下，将变量初始化保留在函数中是否有意义？用户更新字符串可能不清楚/不明显。如果它对文件 (1) 或类 (2) 保持全局，则其他开发人员可以“识别”并修改此字符串。

鉴于上述用例，您仍然建议使用返回字符串的函数吗？或者我可以使用类级别的静态变量（带有私有访问说明符）吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T04:56:22.777

匿名命名空间是另一种选择：

A.cpp

```
namespace {
  const std::string hello_str("Hello");
}

void A::print() {
    std::cout << hello_str;
} 
```

但是您应该真正将其包装在延迟初始化的函数中。

这将采取以下形式：

```
A.h
---------------------
class A{
public:
    static const std::string& hello_str();
    void print();
}

A.cpp
---------------------
const std::string& A::hello_str() {
  static const std::string str("Hello"); // << constructed on first call of A::hello_str()
  return str;
}

void A::print() {
    std::cout << A::hello_str();
} 
```

在这种情况下，您也可以简单地按值返回，并完全避免静态/全局。您的 std c++ 库实现可能使用所谓的“小字符串优化”——如果是这样，则不需要堆分配来创建或移动这么短的字符串。

另请注意，您的两个示例不一样；一个实际上是私有的，另一个是公开可见的。

最终，您不应该使用您提出的*任何一种方法。*考虑延迟初始化的函数中的静态，或者（在许多情况下甚至更好）按值返回。

回答你原来的问题：我赞成课堂内的声明，但私人的。我发现这在事件实现发生变化时更容易维护。当然，如果外部实现可以以某种方式访问​​ cpp 中的静态，那么您可能还希望在类中将其声明为私有，以便其他人无法访问它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T04:53:58.360

简单的规则：

*   `string`逻辑上属于类，因此它应该是类成员 。
*   类的所有实例共享相同的字符串，因此它属于该类而不是类的特定实例（所有实例共享相同的字符串），因此使其成为`static`成员。

这为您提供了以下优势：

*   只有需要访问字符串的类成员才能访问，这与将其声明为全局字符串不同。

# opengl - NvTriStrip：什么是许可模型，我可以在我的代码中使用它吗？

> ID：12190101
> 
> 赞同：3
> 
> 时间：2012-08-30T04:52:14.610
> 
> 标签：opengl, graphics, opengl-es, 3d, directx

我计划将 NvTriStrip 库用于将根据商业许可获得许可的软件。这里可以集成NvTriStrip吗？

我找不到与 NvTriStrip 的许可协议，

> [http://www.nvidia.in/object/nvtristrip_library.html](http://www.nvidia.in/object/nvtristrip_library.html)

# java - Checkstyle : 总是接收包含制表符的文件（这是第一个实例）

> ID：12190103
> 
> 赞同：27
> 
> 时间：2012-08-30T04:52:30.467
> 
> 标签：java, eclipse, checkstyle

我在 Eclipse IDE 中使用 Checkstyle for Java。我不知道在每个 java 文件中，在第二行，我总是在 Checkstyle 中收到警告：（尽管我很确定我没有按 Tab 键）

> 文件包含制表符（这是第一个实例）。

```
public class Percolation {
    private boolean[][] grid;
...
} 
```

当我输入 :`public class Percolation {`时，按回车，Eclipse 会为我缩进，然后，我输入`private boolean[][] grid;`. 但是，我仍然收到这个警告。

请告诉我如何解决这个问题。（我不想关闭此警告，因为这是必须的。其他人将再次检查我的文件）。

谢谢 ：）

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-22T15:27:52.643

**第 1 步**在 Eclipse 中，Preference > Java > Code Style > Formatter。编辑活动配置文件。（如果您不想编辑内置配置文件，请创建一个新配置文件）。在“活动配置文件：”下有一个下拉对话框......在它旁边，单击“编辑...”打开编辑对话框。在“缩进”选项卡下，您会找到**Tab Policy**。将 Tab Policy 从**Mixed 更改为 Space only**并应用更改。

**第 2 步**回到您的 Eclipse 透视图，通过菜单栏导航：Source > **Format Element** (not "Format") 并保存。

运行 checkstyle 你不会找到“文件制表符：文件包含制表符（这是第一个实例）。” 警告了。

通过启用您将在工具栏中找到的空白字符来可视化差异。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-08-30T05:04:53.280

在 Eclipse 中，转到 Preferences > General > Editors > Text Editors 并选中“Insert spaces for tabs”复选框。然后它将用空格而不是制表符缩进。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-07-19T10:25:36.953

另一种可能性是查找和替换： - 复制选项卡 - 到查找和替换窗口查找：粘贴选项卡替换：键入 4 个空格（或选项卡包含的空格数）-> 替换全部

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-09-27T09:48:13.967

对于 Java 代码：

**步骤 1**在 Eclipse 中，`Preference > Java > Code Style > Formatter.`创建一个新配置文件并使用默认配置文件对其进行初始化。有一个下拉对话框..在它旁边，单击“编辑...”打开编辑对话框。在“缩进”选项卡下，您会找到选项卡策略。将 Tab Policy 从 Mixed 更改为“Space only”并应用更改。

**第 2 步**更正代码的缩进`ctrl+I`。它将用空格替换 Tab。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-06-03T00:32:50.333

要修复此导航到`Preferences > Java > Code Style > Formatter.` 然后单击`New > give name for the formatter > click on ok`。

[![在此处输入图像描述](../Images/a84c0f904cc18eb9c85f1c7425f8fe22.png)](https://i.stack.imgur.com/Lx7yB.png)

完成此步骤后，在自动弹出的窗口（即您创建的格式化程序）上，单击`indentation > tap policy > select space only`。 *或者，如果您稍后回来，您可以单击编辑并按照相同的步骤操作。*
[![在此处输入图像描述](../Images/492329708083cf42bb353a93d21c8ee5.png)](https://i.stack.imgur.com/mltCn.png)

在我更喜欢的缩进尺寸中`put 4 > click apply and close.`

之后`right click`在要格式化的类文件上 >`source > format.` 这将导致缩进为空格而不是制表符。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-05T05:11:49.717

我也面临这个问题，但我得到了解决方案。

**第 1 步**：转到 Window > Preferences > Checkstyle。

**第 2 步**：在右侧您将看到全局检查配置。在那里你会发现有**两种**配置可用。**使用Eclipse**选择配置并单击**Set as Default**按钮并单击**OK**。

希望这能解决您的问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-08-24T20:07:06.713

对于 Java 编辑器

单击 Window » Preferences Expand Java » Code Style 单击 Formatter 单击 Edit 按钮 单击 Indentation 选项卡 在 General Settings 下，将 Tab policy 设置为： Spaces only 单击 OK ad nauseum 以应用更改。

对于其他编辑器，请参阅此处[如何更改 Eclipse 以使用空格而不是制表符？](https://stackoverflow.com/questions/407929/how-do-i-change-eclipse-to-use-spaces-instead-of-tabs)

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2019-05-22T09:46:23.937

通过删除带有空格缩进的 TAB 来简单地修复该样式问题（由 scalaStyle 触发）:)

# c++ - 为什么我的函数不产生输出

> ID：12190110
> 
> 赞同：0
> 
> 时间：2012-08-30T04:53:16.977
> 
> 标签：c++, class, cout

我正在为一个班级做 C++ 评估，十年来我没有使用过 C++，所以这可能是我想念的简单的东西；但是，我似乎无法弄清楚。

我有一个用不产生输出的函数定义的类；看起来它甚至没有运行，我不知道为什么。有人可以向我指出我的问题吗？

问题： `cout`来自`getwords`类的函数`readwords`不显示任何结果。

这是我的课：

```
class readwords {
    private:
            char c;
            //string aword;

    public:
            void getwords(std::istream& file) {
                            cout << "I got here" << std::flush;
                    /*while(file.good()) {
                            cout << "I got here\n";
                            c = file.get();
                            if(isspace(c)) cout << "\n"; //continue;
                            if(isalnum(c)) {
                                    cout << c; //aword.insert(aword.end(),c);
                            }
                    }
                    */
            }
}; 
```

这是从我的主要调用：

```
#include <fstream>
#include <stdlib.h>
#include "lab1.h"

using namespace std;
readwords wordsinfile;
words wordslist;

int main ( int argc, char *argv[] )
{
    if ( argc != 2 ) {
            // Looks like we have no arguments and need do something about it
            // Lets tell the user
            cout << "Usage: " << argv[0] <<" <filename>\n";
    } else {
            // Yeah we have arguements so lets make sure the file exists and it is readable
            ifstream ourfile(argv[1]);
            if (!ourfile.is_open()) {
                    // Then we have a problem opening the file
                    // Lets tell the user and exit
                    cout << "Error: " << argv[0] << " could not open the file. Exiting\n";
                    exit (1);
            }

            // Do we have a ASCII file?
            if (isasciifile(ourfile)) {
                    cout << "Error: " << argv[0] << " only can handle ASCII or non empty files. Exiting\n";
                    exit(1);
            }

            // Let ensure we are at the start of the file
            ourfile.seekg (0, ios::beg);
            // Now lets close it up
            ourfile.close();
    }

    // Ok looks like we have past our tests
    // Time to go to work on the file

    ifstream ourfile2(argv[1]);
    wordsinfile.getwords(ourfile2);

} 
```

感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T05:48:07.407

尝试使用调试器。大多数 IDE（NetBeans、Code::Blocks 等）都提供与 gdb 的交互界面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T18:45:24.617

问题似乎是重新定义我自己的班级。在实际编码我需要使用的功能时：

```
in readwords::countwords(std::istream& file) {
 ....
} 
```

一旦做这个输出产生罚款。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T07:08:12.047

我刚刚编译并运行了您的代码，但代码本身没有任何问题，除了我需要包含以使用“cout”方法。“I got here”已成功显示在我的 ubuntu 机器上。你的执行环境是什么？你应该先检查一下。

# android - ios、android和windows的数据库？

> ID：12190111
> 
> 赞同：1
> 
> 时间：2012-08-30T04:53:22.273
> 
> 标签：android, iphone, ios, windows

我打算开发一个应用程序。此应用程序需要与网站集成/接口，即数据对于应用程序和网站都是通用的。将来我必须在 Android 和 Windows Mobile 中发布相同的应用程序。因此，请通过回答以下问题来提供帮助

1) 是否有可能为 ios、android、windows 和网站提供通用数据库？
2) 我应该使用哪个数据库，以便应用程序、android、windows 和网站通用

请帮忙。如果我的问题不清楚，请告诉我。

谢谢你的建议。

# javascript - 一旦出现，如何在 Bootstrap 模式中为特定字段设置焦点

> ID：12190119
> 
> 赞同：183
> 
> 时间：2012-08-30T04:54:28.097
> 
> 标签：javascript, twitter-bootstrap, modal-dialog

我已经看到了一些关于引导模式的问题，但没有一个完全像这样，所以我会继续。

我有一个模态，我称之为 onclick 像这样......

```
$(".modal-link").click(function(event){
  $("#modal-content").modal('show');
}); 
```

这很好用，但是当我显示模式时，我想关注第一个输入元素......在可能的情况下，第一个输入元素的 id 为#photo_name。

所以我尝试了

```
 $(".modal-link").click(function(event){
     $("#modal-content").modal('show');
     $("input#photo_name").focus();
   }); 
```

但这无济于事。最后，我尝试绑定到“显示”事件，但即便如此，输入也不会集中。最后只是为了测试，因为我怀疑这是关于 js 加载顺序的，所以我输入了一个 setTimeout 只是为了看看我是否延迟了一秒钟，焦点是否有效，是的，它有效！但是这种方法显然是废话。有没有办法在不使用 setTimeout 的情况下产生与下面相同的效果？

```
 $("#modal-content").on('show', function(event){
    window.setTimeout(function(){
      $(event.currentTarget).find('input#photo_name').first().focus()
    }, 0500);
  }); 
```

* * *

## 回答 #1

> 赞同：371
> 
> 时间：2012-08-30T05:34:40.973

试试这个

这是旧的[**演示**](http://codebins.com/bin/4ldqp7x/1/bootstrap%20modal%20focus)：

**编辑：（** 这是一个使用 Bootstrap 3 和 jQuery 1.8.3的工作[**演示）**](http://jsfiddle.net/jlaw/BeL2V/3/)

```
$(document).ready(function() {
    $('#modal-content').modal('show');
    $('#modal-content').on('shown', function() {
        $("#txtname").focus();
    })
}); 
```

启动 bootstrap 3 需要使用 shown.bs.modal 事件：

```
$('#modal-content').on('shown.bs.modal', function() {
    $("#txtname").focus();
}) 
```

* * *

## 回答 #2

> 赞同：75
> 
> 时间：2013-08-02T13:38:48.213

只是想说 Bootstrap 3 处理这个有点不同。事件名称是“shown.bs.modal”。

```
$('#themodal').on('shown.bs.modal', function () {
   $("#txtname").focus();
}); 
```

或将焦点放在第一个可见输入上，如下所示：

```
.modal('show').on('shown.bs.modal', function ()
{
    $('input:visible:first').focus();
}) 
```

[http://getbootstrap.com/javascript/#modals](http://getbootstrap.com/javascript/#modals)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-08-31T15:19:23.647

我在我的布局中使用它来捕获所有模式并专注于第一个输入

```
 $('.modal').on('shown', function() {
     $(this).find('input').focus();
  }); 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-11-05T14:19:51.397

我在 bootstrap 3 中遇到了同样的问题，当我单击链接时会聚焦，但在使用 javascript 触发事件时却没有。解决方案：

```
$('#myModal').on('shown.bs.modal', function () {
    setTimeout(function(){
        $('#inputId').focus();
    }, 100);
}); 
```

应该是动画的问题吧！

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2015-01-08T22:12:08.397

我在捕捉“shown.bs.modal”事件时遇到了问题。这是我完美的解决方案。

取而代之的是简单的 on()：

```
$('#modal').on 'shown.bs.modal', -> 
```

将 on() 与委托元素一起使用：

```
$('body').on 'shown.bs.modal', '#modal', -> 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2012-08-30T06:08:18.047

似乎是因为启用了模态动画（`fade`在对话框的类中），调用后`.modal('show')`对话框不是立即可见的，所以此时无法获得焦点。

我可以想到两种方法来解决这个问题：

1.  从类中移除`fade`，因此在调用`.modal('show')`. 您可以查看[http://codebins.com/bin/4ldqp7x/4](http://codebins.com/bin/4ldqp7x/4)进行演示。（对不起@keyur，我错误地编辑并保存为您示例的新版本）
2.  像@keyur 写`focus()`的那样调用事件。`shown`

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2016-01-19T20:19:05.233

我创建了一种动态方式来自动调用每个事件。聚焦一个领域是完美的，因为它只调用一次事件，使用后将其删除。

```
function modalEvents() {
    var modal = $('#modal');
    var events = ['show', 'shown', 'hide', 'hidden'];

    $(events).each(function (index, event) {
        modal.on(event + '.bs.modal', function (e) {
            var callback = modal.data(event + '-callback');
            if (typeof callback != 'undefined') {
                callback.call();
                modal.removeData(event + '-callback');
            }
        });
    });
} 
```

您只需要`modalEvents()`准备好文件即可。

采用：

```
$('#modal').data('show-callback', function() {
    $("input#photo_name").focus();
}); 
```

因此，您可以使用相同的模式来加载您想要的内容，而不必担心每次都删除事件。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-05-24T02:20:54.120

我在 bootstrap 3 上遇到了同样的问题，并解决了这样的问题：

```
$('#myModal').on('shown.bs.modal', function (e) {
    $(this).find('input[type=text]:visible:first').focus();
})

$('#myModal').modal('show').trigger('shown'); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-12-20T11:34:05.213

Bootstrap 添加了加载事件。

[https://getbootstrap.com/docs/3.3/javascript/#modals](https://getbootstrap.com/docs/3.3/javascript/#modals)

捕获模态上的“loaded.bs.modal”事件

```
$('#mymodal').on('loaded.bs.modal', function(e) {
  // do cool stuff here all day… no need to change bootstrap
}) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-12-21T14:23:09.003

Bootstrap 模态显示事件

```
$('#modal-content').on('show.bs.modal', function() {
$("#txtname").focus(); 
```

})

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2013-03-07T19:43:20.383

更清洁和更模块化的解决方案可能是：

```
$(document).ready(function(){
    $('.modal').success(function() { 
        $('input:text:visible:first').focus();
    });  
}); 
```

或者以您的 ID 为例：

```
$(document).ready(function(){
    $('#modal-content').modal('show').success(function() {
        $('input:text:visible:first').focus();
    });  
}); 
```

希望有帮助..

# php - 如何在php中限制用户每天登录一次以上

> ID：12190120
> 
> 赞同：3
> 
> 时间：2012-08-30T04:54:29.073
> 
> 标签：php, mysql

有没有办法限制用户每天登录次数不超过一次。这在PHP中可能吗？如果是这样，你能指导我怎么做吗？

在我的数据库中，我有用户名和密码字段以及时间戳？我还应该添加什么？

我试过这个，但问题是我不希望它限制*IP*并且应该尊重用户。

```
<?php
mysql_connect("localhost", "root", "");
mysql_select_db("");

mysql_query("delete from restrict where time >= " . time() + (24*3600));

$result = mysql_query("select * from restrict where ip =\"{$_SERVER['REMOTE_ADDR'}\"");

if(mysql_num_rows($result) == 0) {
$sql = "insert into restrict values('', '{$_SERVER['REMOTE_ADDR']}', '" . time() . "')";
mysql_query($sql);
} else {
die("You cannot access this page for 24hrs after you viewed it last...");
}

mysql_close();
?> 
```

对此的任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T04:58:14.930

您是正确的，您不应受 IP 地址限制。一些原因包括：

*   一些用户可以通过使用智能手机在街上行走或重新启动路由器来获得新的 IP 地址。
*   一些 IP 地址由*大量*用户共享。一些 AOL IP 地址被数以万计的 AOL 用户（代理网关）共享。

如果您有上次成功登录的时间戳，只需检查该用户之前是否有过登录，如果有，那么他们尝试登录时该登录是多久之前的。

请记住，此方案中的任何内容都不会阻止用户尽可能长时间地*保持*登录状态，尽管他们必须经常与网站交互（亲自或使用机器人）以防止会话计时出去）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T04:59:13.257

您只需查询时间戳大于 24 小时前的位置。

```
$sql = "SELECT COUNT(1) FROM `users` WHERE `timestamp` >= DATE_SUB(NOW(), INTERVAL 1 DAY)"; 
```

如果有结果，不要让他们进来。

这假设您有一个带有时间戳字段的用户表，该字段在用户登录时更新。我不知道您在帖子中对整个限制表做了什么。

这是一个有缺陷的系统。您应该存储一个 cookie 或其他东西，以防出现问题并且他们被注销、发生某些事情等，在他们完成您所提供的任何服务之前。当然，如果不知道你到底在做什么，我能知道什么？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T04:58:03.953

我只需在 login/users/whatever 表中添加一个类似“lastLoginTime”的列，并在用户登录时更新该时间。然后在登录时检查它以查看他们登录的时间 lastLoginTime 是否在最后12/24/任何时间。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T05:05:25.783

是的，你可以像你说的那样做一个单独的表

```
id_user | date 
```

两个整数

```
$db = new PDO('mysql:host=localhost;dbname=testdb', 'username', 'password');
$stmt = $db->prepare("SELECT * FROM `restrict` WHERE `id_user`=:id_user");
$stmt->execute(array(':id_user' => $_POST['username']));
$exist = $stmt->rowCount();
if(!$exist){
    $stmt = $db->prepare("INSERT INTO `restrict` VALUES(:id_user,:date)");
    $stmt->execute(array(':id_user' => $_POST['username']), ':date' => date('Ymd'));
} else {
    $row = $stmt->fetch(PDO::FETCH_ASSOC);
    if($row['date'] != date('Ymd')){
        $stmt = $db->prepare("UPDATE `restrict` SET `date`=:date WHERE `id_user`=:id_user)");
        $stmt->execute(array(':id_user' => $_POST['username']), ':date' => date('Ymd'));
    } else {
        die("You already accessed this page today.");
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T04:58:23.343

您可以创建另一个名为 last_login 的列，用于存储登录时间。下次用户尝试登录时，检查 last_login 时间和当前时间之间的差异，如果小于 24 小时，则限制用户。

# ios - 仅在 Testflight 上崩溃

> ID：12190121
> 
> 赞同：15
> 
> 时间：2012-08-30T04:54:39.483
> 
> 标签：ios, xcode, testflight

我们正在使用 TestFlight 来发送我们应用程序的飞行员。

应用程序的一部分崩溃了，我们在重现崩溃时遇到了很多麻烦。他们的代码相当简单。

事实证明，通过 TestFlight 获得应用程序的用户会崩溃，而如果您构建应用程序并使用 IDE 安装它，它不会崩溃！

有人对可能导致这种情况的原因有任何想法吗？

任何解决方法的想法？我们不想停止使用 TestFlight。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-30T08:45:26.810

确保在发布模式而不是调试中构建您的应用程序。该应用程序可能仅在发布时崩溃。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-30T05:48:28.387

我要尝试的第一件事是将崩溃堆栈跟踪映射到应用程序中的函数名称。这可能会对崩溃的性质产生有用的洞察：

1.  一旦报告崩溃请求崩溃日志。这可以通过 Xcode 的管理器获得，或者如果这不是一个选项，则可以从 iPhone 的设置 -> 常规 -> 关于 -> 诊断和使用 -> 诊断和使用数据中截屏。滚动到应用名称或LatestCrash-AppName.plist 部分。
2.  虽然理论上你可以象征崩溃，但我发现下面描述的过程是从堆栈中获取符号的万无一失的方法。将崩溃线程的所有堆栈地址转换为方法名称。
3.  （可选）请求 iDevice 系统日志。这可能包括同样非常宝贵的断言失败消息。请注意，这应该尽快完成，因为系统日志在它们被删除之前只保存了这么多条目。您可以使用 Organizer 或 cmd 行 idevicesyslog 来获取它。

手动符号化：只要您的构建有调试信息，这将起作用。

1.  获取崩溃的_exact_same_ .ipa。如果您没有保存它，您可以使用 iFunBox 或 cmd 行 ideviceinstaller 实用程序从设备下载它。
2.  解压 .ipa
3.  对可执行文件 (Payload/AppName.app/AppName) 运行以下命令：

    otool -tv AppName.app | c++filt>listing.asm

4.  等待上一步完成（可能需要一段时间）。生成的listing.asm 文件将有几兆字节长。

5.  使用可以处理大文件的编辑器搜索listing.asm 以查找堆栈跟踪中列出的地址。请注意，地址可能相差几个字节（通常指向前面 3 个左右的字节）。此外，listing.asm 中未找到的地址表示 iOS 库中的地址。暂时忽略那些。

当然，如果你能够符号化，你可以跳过这个过程。

祝调试顺利！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T08:35:41.493

我们遇到了类似的问题。我们的问题是静态库。当我们从头开始构建应用程序并进入 testflight 时，它正在崩溃，但从 IDE 中却没有。崩溃是因为在构建时没有包含静态库，但是如果我直接连接 iPad 并使用 XCode 安装，就会被包含在内。

一个简单的测试将证明这一点：-

1.) 不要从 IDE 构建，而是创建一个 .app 文件，然后通过 iTunes 加载它并检查您是否遇到崩溃。

我们通过手动创建 .iPA 来解决这个问题，即创建 .app 然后创建一个 Payload 文件夹并将 .app 与 info.plist 一起放入其中。

然后事情也开始在 Testflight 中发挥作用。

# iphone - 将浮点值更改为电影播放器 的时间格式，

> ID：12190124
> 
> 赞同：1
> 
> 时间：2012-08-30T04:55:01.453
> 
> 标签：iphone, ipad

我使用“moviePlayer.duration”来查找视频的总时间，但我只得到浮点值，我如何将浮点值转换为时间格式“HH-MM-SS”

```
{

 duration=moviePlayer.duration;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T05:03:56.160

根据您的要求使用方法：

```
- (NSString *)timeFormatted:(float)totalSeconds
{
   float seconds = totalSeconds % 60; 
   float minutes = (totalSeconds / 60) % 60; 
   float hours = totalSeconds / 3600; 
   return [NSString stringWithFormat:@"%02f:%02f:%02f",hours, minutes, seconds]; 
} 
```

# python - 文件更改未立即反映

> ID：12190125
> 
> 赞同：1
> 
> 时间：2012-08-30T04:55:09.677
> 
> 标签：python, apache, mod-wsgi, pyramid

我面临的问题是，每当我对我的 Python 代码进行更改时，例如在文件中`__init__.py`或`views.py`文件中，它们都不会立即反映在服务器上。我正在使用 Apache+mod_wsgi 运行服务器，因此所有守护进程和虚拟主机都配置正确。

我发现`setup.py`每次都必须运行才能进行新的更改。这是金字塔的工作原理还是我遗漏了一些东西。不应该提供更新的文件而不是旧的文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T18:56:31.260

使用 mod_wsgi 以外的东西来开发 Python WSGI 应用程序通常要容易得多（mod_wsgi 捕获 stdout 和 stderr，这使得使用 pdb 之类的东西变得很棘手）。

Pyramid 脚手架生成的代码允许您执行“pserve development.ini”之类的操作来启动服务器。如果您使用它而不是 mod_wsgi 进行开发，您可以执行“pserve development.ini --reload”，您对 Python 源代码的更改将立即反映。

这并不意味着您不能使用 mod_wsgi 在生产中为您的应用程序提供服务。完成开发后，您可以将您的应用程序放入 mod_wsgi 中，以获得其生产优势。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T07:44:17.050

关于 mod_wsgi 中代码重载的工作原理，请阅读：

[http://code.google.com/p/modwsgi/wiki/ReloadingSourceCode](http://code.google.com/p/modwsgi/wiki/ReloadingSourceCode)

# python - 从二进制数据中识别没有扩展名的文件类型

> ID：12190128
> 
> 赞同：3
> 
> 时间：2012-08-30T04:55:19.977
> 
> 标签：python, file, binaryfiles, binary-data

我有一些没有扩展名的文件。我想与他们关联扩展。为此，我编写了一个 python 程序来读取文件中的数据。我的疑问是如何在不使用第三方工具的情况下在没有扩展名的情况下识别其类型。

我只需要识别 pdf、doc 和文本文件。其他类型的文件是不可能的。

我的服务器是cent os

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-30T05:01:39.390

您可以读取文件的前几个字节并查找“幻数”。关于幻数的[维基百科页面](http://en.wikipedia.org/wiki/Magic_number_%28programming%29#Magic_numbers_in_files)建议 PDF 文件以 ASCII 开头，`%PDF`而 doc 文件以十六进制 D0 CF 11 E0 开头。

在一般情况下，识别文本文件非常困难，因为许多标准幻数实际上是二进制文件开头的 ASCII 文本。对于您的情况，如果您可以保证除了 PDF、DOC 或 TXT 之外什么都不会得到，那么您可能会逃避检查 PDF 和 DOC 幻数，然后假设它是文本，如果不是那些。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-30T04:59:34.363

你还没有说你的操作系统是什么。如果它是基于 *nix 的，那么 libmagic 周围有一个 python 包装器（使用 ctypes），它使用与命令相同的底层机制`file`，可以通过检查内容来识别没有扩展名的文件。或者，只需检查 libmagic 如何使用文件定义并找出它如何识别两种主要文件类型（doc、pdf），剩下的所有内容都必须是文本；-) 并扩展您现有的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T05:03:25.027

PDF 文档以 %PDF-version number 开头，但其中一些可以完全压缩。

# c# - 设置焦点在屏幕顶部jquery

> ID：12190132
> 
> 赞同：3
> 
> 时间：2012-08-30T04:55:55.530
> 
> 标签：c#, jquery, jquery-ui

我有一个包含多个选项卡的页面，我使用 jquery 基于 href 点击显示和隐藏它们。每当我单击“a href”时，页面就会向下滚动。我试图将焦点设置在页面顶部。这是我在 Jquery 中的第一个项目。我尝试了以下但仍然无法正常工作。

1.  滚动（0, 0）；
2.  window.scrollTo(0,0);
3.  window.scrollTo(0, document.body.scrollHeight);
4.  var ctrl = document.getElementById('lnkCreateJob'); ctrl.focus();

请在这件事上分享一些信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T04:59:03.380

试试这样：

```
$(".gototop").click(function(){
    var focusElement = $("#contents");
    $(focusElement).focus();
    ScrollToTop(focusElement);
});

function ScrollToTop(el) {
    $('html, body').animate({ scrollTop: $(el).offset().top - 50 }, 'slow');          
} 
```

## [看演示](http://jsfiddle.net/akhurshid/zhPtw/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T05:30:33.633

只需使用`<a href="#">Your link</a>`. 它将带您到页面顶部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T05:01:02.930

您必须在页面顶部创建一个 id="#" 的元素（任何 html 元素 ex div）。你必须把这个#放在'a'链接的href中。然后，您的方法应该在“a”链接的 onclick 方法中。

# apache-flex - 如何在没有动作脚本的情况下在 Flex 中绘制直线

> ID：12190133
> 
> 赞同：0
> 
> 时间：2012-08-30T04:56:06.223
> 
> 标签：apache-flex

是否可以在不使用动作脚本的情况下在 Flex 中从一个点到另一个点画一条直线（我想知道那里是否有任何类型的 Flex 标签）。如果这是一个愚蠢的问题，请原谅我，因为我是 Flex 的新手

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T05:52:30.367

完全不在我的脑海中，未经测试，但这就是你的做法。这将创建从 (10, 10) 到 (20, 10) 的路径。M 相当于 graphics.moveTo，L 相当于 graphics.lineTo。

不确定填充是否会创建任何东西，因为路径在技术上是 0px 高，因此您可能必须添加 L 20 11 L 10 11，但这足以让您有所了解。或者，使用 Spark Stroke 可以在不添加行的情况下执行相同的操作。

```
<s:Graphic>
    <s:Path data="
            M 10 10
            L 20 10"/>
        <s:fill>
            <s:SolidColor color="#000000"/>
        </s:fill>
    </s:Path>
</s:Graphic> 
```

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/primitives/Path.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/primitives/Path.html)

[http://help.adobe.com/en_US/flex/using/WS5B6A8436-0FF5-4029-8524-C7C1106C483D.html](http://help.adobe.com/en_US/flex/using/WS5B6A8436-0FF5-4029-8524-C7C1106C483D.html)

您也可以在数据标签中绑定数据，因此您可以执行 data="M 0 0 L {this.width} {this.height}" 从一个角落到另一个角落（并让它随窗口自动缩放)

# php - 从 PHP 打印 MongoDB 日期

> ID：12190136
> 
> 赞同：16
> 
> 时间：2012-08-30T04:56:34.837
> 
> 标签：php, mongodb, date

如何`PHP`获取常规时间戳格式的`MongoDB`日期？

假设我有：

```
$my_date;
print_r($my_date); 
```

`print_r`输出是：

```
MongoDate Object ( [sec] => 1346300336 [usec] => 593000 ) 
```

但是做：

```
echo $my_date; 
```

输出：

```
0.59300000 1346300336 
```

甚至尝试过：

```
echo (string)$my_date 
```

一样。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-30T04:58:25.887

`$my_date->sec`是 unix 时间戳，使用`date()`函数以所需的格式显示它。

```
echo date('Y-m-d H:i:s', $my_date->sec); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-03-09T10:54:59.830

只是一个快速更新，说 MongoDate 从 pecl 扩展的 1.6 版本开始就有一个 toDateTime 方法。你现在可以做

```
$mongoDate->toDateTime()->format(...) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-28T15:58:30.490

你错过了微秒。

显示 (mongo -> php)

```
$fecha = date(preg_replace('`(?<!\\\\)u`', $my_date->usec, 'Y-M-d H:i:s.u'), $my_date->sec);
//MongoDate ISODate("2013-05-28T15:27:24.735Z")
//Php Date 2013-May-28 10:27:24.735000 
```

发送到 mongo (php -> mongo)

```
$fecha_mongo = new MongoDate(strtotime($fecha));
//Fail function, the short way but, 70000 isn't equal to 700000.
//$fecha_mongo->usec = (int)$fecha_micro->format("u");
preg_match("/\.(.*)/", $fecha, $uSec);
$fecha_mongo->usec = (int)(count($uSec)==2?$uSec[1]:0);

//Php Date 2013-May-28 10:27:24.735000
//MongoDate ISODate("2013-05-28T15:27:24.735Z") 
```

再会！

马里奥·T。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-01T07:11:59.443

首先，使用给定的函数从毫秒创建日期：

```
public function showdatefn($mili)
{   
    $seconds = (string)$mili / 1000;
    return date("d-m-Y", $seconds); 
}   
$date =$this->showdatefn(<put mongo date here>); 
```

这将为您提供正确的日期。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-18T14:51:59.127

使用[MongoDB\BSON\UTCDateTime](https://www.php.net/manual/en/class.mongodb-bson-utcdatetime.php) [不](https://www.php.net/manual/en/class.mongodate.php)推荐使用MongoDate

```
$mongoDate = new \MongoDB\BSON\UTCDateTime(strtotime('2020-10-01 18:30:00')); 
```

# html - 绘制变换矩阵的工具

> ID：12190139
> 
> 赞同：1
> 
> 时间：2012-08-30T04:57:18.090
> 
> 标签：html, matrix, plot, html5-canvas, transform

有工具可以帮助我像这样绘制从图像到 html 5 画布的 3D 变换矩阵

```
max-width: intrinsic;
-moz-transform: matrix(1, 0, 0.6, 1.5, 15em, 0);
-webkit-transform: matrix(1, 0, 0.6, 1, 250, 0);
-o-transform: matrix(1, 0, 0.6, 1, 250, 0);
transform: matrix(1, 0, 0.6, 1, 250, 0); 
```

# c++ - 可以将 Eclipse CDT 格式化程序设置为在重新格式化时保留一个衬里吗？

> ID：12190141
> 
> 赞同：2
> 
> 时间：2012-08-30T04:57:30.367
> 
> 标签：c++, eclipse, coding-style, formatting

在我的包含文件中，我经常会有一些单行函数，例如：

```
void SetValue(int value) {m_value = value;}
int GetValue() const {return m_value;} 
```

我喜欢将这些保留在一行中，但有时代码会变得不稳定，我按下按键以自动重新格式化文件，而我的正常代码样式设置将其分成多行，我喜欢非单行函数。我在[另一篇](https://stackoverflow.com/questions/2878577/eclipse-formatter-to-keep-one-liners)关于 Java @formatter 标志的文章中读到了，所以我尝试了它，但是唉，那些 Java 人得到了所有很酷的技巧。有谁知道是否有 C++ 编辑器的等价物，或者其他实现目标的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T16:57:59.973

这似乎是不可能的。请参阅此[相关问题](https://stackoverflow.com/a/2879936/1686657)（不是专门关于 CDT）。

# php - MVC哪个是更好的做法？

> ID：12190142
> 
> 赞同：-1
> 
> 时间：2012-08-30T04:57:41.477
> 
> 标签：php, model-view-controller

我有一个**存储过程**、一个**控制器**和一个**模型**。

我应该在我的过程或模型中在哪里进行数据库错误检查[没有行返回、表的主键冲突、指定的值无效等？]？我应该从哪里向用户显示消息[更新成功，无法执行语句等]？

更好的做法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T10:35:20.830

错误检查应该发生在模型层。

具体来说，在[数据映射器](http://martinfowler.com/eaaCatalog/dataMapper.html)或其他处理数据抽象的结构中。如果您使用 PDO，SQL 错误会引发异常，这是在存储抽象级别处理的。这是通过将*错误状态*分配给您当时存储或填充的[域对象来完成的。](http://c2.com/cgi/wiki?DomainObject)

控制器存在于完全不同的层：表示层。它不应该意识到由模型层处理的领域业务逻辑的内部问题。这将导致[抽象泄漏](http://en.wikipedia.org/wiki/Leaky_abstraction)。

视图在收集要显示的信息时，首先应该请求它使用的[服务](https://stackoverflow.com/a/5864000/727208)返回状态。如果服务通知视图现有的错误状态，视图请求更详细的信息，并决定如何对错误做出反应以及使用哪些组模板来可视化错误状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T05:19:02.013

是的，所有的错误消息和显示项都应该在 View 中处理，因为数据库错误检查可以在模型中完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T05:14:51.420

在我看来，数据库错误检查应该进入模型，显示（一切）将进入“视图”层。你可以在这里找到一篇关于制作 MVC 框架的好文章：

[http://anantgarg.com/2009/03/13/write-your-own-php-mvc-framework-part-1/](http://anantgarg.com/2009/03/13/write-your-own-php-mvc-framework-part-1/)

# android - 导入 Holo 无处不在的主题时出错

> ID：12190143
> 
> 赞同：3
> 
> 时间：2012-08-30T04:57:41.723
> 
> 标签：android, android-theme

我遵循了几个网站上的指南，但我无法让它工作。我确保他们是从现有源代码创建项目，并将其作为库包含在我的项目中，检查目标等。我不确定我缺少什么。

我收到以下错误：

```
[2012-08-29 21:04:45 - IT Guru] C:\Workspace\HoloEverywhereLib\res\values\styles.xml:246: error: Error: No resource found that matches the given name: attr 'windowActionBar'.
[2012-08-29 21:04:45 - IT Guru] C:\Workspace\HoloEverywhereLib\res\values\styles.xml:247: error: Error: No resource found that matches the given name: attr 'windowNoTitle'.
[2012-08-29 21:04:45 - IT Guru] C:\Workspace\HoloEverywhereLib\res\values-v14\styles.xml:12: error: Error retrieving parent for item: No resource found that matches the given name 'Theme.Sherlock'.
[2012-08-29 21:04:45 - IT Guru] C:\Workspace\HoloEverywhereLib\res\values-v14\styles.xml:14: error: Error retrieving parent for item: No resource found that matches the given name 'Theme.Sherlock.Light'.
[2012-08-29 21:04:45 - IT Guru] C:\Workspace\HoloEverywhereLib\res\values-v14\styles.xml:16: error: Error retrieving parent for item: No resource found that matches the given name 'Theme.Sherlock.Light.DarkActionBar'.
[2012-08-29 21:04:45 - IT Guru] C:\Workspace\HoloEverywhereLib\res\values-v14\styles.xml:18: error: Error retrieving parent for item: No resource found that matches the given name 'Theme.Sherlock.ForceOverflow'.
[2012-08-29 21:04:45 - IT Guru] C:\Workspace\HoloEverywhereLib\res\values-v14\styles.xml:20: error: Error retrieving parent for item: No resource found that matches the given name 'Theme.Sherlock.Light.ForceOverflow'.
[2012-08-29 21:46:56 - IT Guru] C:\Workspace\HoloEverywhereLib\res\values\styles.xml:247: error: Error retrieving parent for item: No resource found that matches the given name '@style/Theme.HoloEverywhereDark.Sherlock'.
[2012-08-29 21:46:56 - IT Guru] C:\Workspace\HoloEverywhereLib\res\values\styles.xml:253: error: Error retrieving parent for item: No resource found that matches the given name '@style/Theme.HoloEverywhereLight.Sherlock'. 
```

遵循的指南：

[导入 HoloEverywhere 时出错](https://stackoverflow.com/questions/10608539/error-importing-holoeverywhere)

[https://github.com/ChristopheVersieux/HoloEverywhere](https://github.com/ChristopheVersieux/HoloEverywhere)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T12:56:52.417

您链接到的 HoloEverywhere 指南有点过时，这两个主题现在称为`Holo.Theme`和`Holo.Theme.Light`。

因此，在您的 Android 清单中更改这些行：

```
android:theme="@style/Theme.HoloEverywhereDark.Sherlock" 
```

或者

```
android:theme="@style/Theme.HoloEverywhereLight.Sherlock" 
```

至

```
 android:theme="@style/Holo.Theme" 
```

或者

```
android:theme="@style/Holo.Theme.Light" 
```

然后 Project->Clean 看看错误是否消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T05:55:06.053

当您使用 Sherlock 主题（未集成 Android 主题）时，您需要在 ProjectName/ 文件夹下导入该附加包

+项目名称

1.  源代码
2.  创
3.  安卓2.1
4.  Sherlock.jar（在根文件夹下导入 .jar 文件）
5.  垃圾桶
6.  . . .

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T19:15:19.977

I solved the problem by setting the android target of all the projects to the newest android version (v.17 atm)

# iphone - 在 UIPageControl 的索引 0 处使用 UIPageControl 的图像自定义点

> ID：12190147
> 
> 赞同：31
> 
> 时间：2012-08-30T04:58:02.480
> 
> 标签：iphone, ios

我是ios编程的新手。我试图在 stackoverflow 上搜索另​​一个示例和更多问题，但这不是我的目标。我想在 UIPageControl 的索引 0 处设置一个点图像，类似于 iPhone 搜索主屏幕。有什么办法吗？请用一些代码或其他有用的链接向我解释。

提前致谢

![在此处输入图像描述](../Images/44d4c587b08aa7913456005281988ac6.png)

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-10-03T07:19:33.887

我已经找到了解决这个问题的方法。我知道这不是办法，但它会在 iOS 8 上市之前一直有效。

崩溃原因：

在 iOS 7 [self.subViews objectAtIndex: i] 返回 UIView 而不是 UIImageView 并且 setImage 不是 UIView 的属性并且应用程序崩溃。我使用以下代码解决了我的问题。

检查子视图是 UIView（对于 iOS7）还是 UIImageView（对于 iOS6 或更早版本）。如果它是 UIView，我将在该视图上添加 UIImageView 作为子视图，瞧它的工作，而不是崩溃..！！

```
-(void) updateDots
{
    for (int i = 0; i < [self.subviews count]; i++)
    {
        UIImageView * dot = [self imageViewForSubview:  [self.subviews objectAtIndex: i]];
        if (i == self.currentPage) dot.image = activeImage;
        else dot.image = inactiveImage;
    }
}
- (UIImageView *) imageViewForSubview: (UIView *) view
{
    UIImageView * dot = nil;
    if ([view isKindOfClass: [UIView class]])
    {
        for (UIView* subview in view.subviews)
        {
            if ([subview isKindOfClass:[UIImageView class]])
            {
                dot = (UIImageView *)subview;
                break;
            }
        }
        if (dot == nil)
        {
            dot = [[UIImageView alloc] initWithFrame:CGRectMake(0.0f, 0.0f, view.frame.size.width, view.frame.size.height)];
            [view addSubview:dot];
        }
    }
    else
    {
        dot = (UIImageView *) view;
    }

    return dot;
} 
```

此外，要清除已经存在的图像，请将现有指示器的色调设置为透明：

```
- (void)awakeFromNib
{   
    self.pageIndicatorTintColor = [UIColor clearColor];
    self.currentPageIndicatorTintColor = [UIColor clearColor];
} 
```

希望这将解决您的 iOS 7 问题。

快乐编码

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-08-30T05:42:13.293

试试这个链接： -

用 GrayPageControl 回答：- [有没有办法改变页面指示点的颜色](https://stackoverflow.com/questions/3409319/is-there-a-way-to-change-page-indicator-dots-color)

它真的很好而且可靠。我也使用过这个代码。

您可能需要进行更多自定义，因为

```
-(void) updateDots
{
    for (int i = 0; i < [self.subviews count]; i++)
    {
        UIImageView* dot = [self.subviews objectAtIndex:i];

        if (i == self.currentPage) {
            if(i==0) {
                dot.image = [UIImage imageNamed:@"activesearch.png"];
            } else {
                dot.image = activeImage;
            }        
        } else {
            if(i==0) {
                dot.image = [UIImage imageNamed:@"inactivesearch.png"];
            } else {
                dot.image = inactiveImage;
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-08-18T09:10:20.793

只需使用图案图像更改 UIPageControl 页面指示器颜色`self.pageControl.currentPageIndicatorTintColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"circle"]];`

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2016-12-14T07:19:52.847

Swift 3用位置标记**替换第一个图标**的代码的最佳编译：`UIPageControl`

```
import UIKit

class LocationPageControl: UIPageControl {

    let locationArrow: UIImage = UIImage(named: "locationArrow")!
    let pageCircle: UIImage = UIImage(named: "pageCircle")!

    override var numberOfPages: Int {
        didSet {
            updateDots()
        }
    }

    override var currentPage: Int {
        didSet {
            updateDots()
        }
    }

    override func awakeFromNib() {
        super.awakeFromNib()
        self.pageIndicatorTintColor = UIColor.clear
        self.currentPageIndicatorTintColor = UIColor.clear
        self.clipsToBounds = false
    }

    func updateDots() {
        var i = 0
        for view in self.subviews {
            var imageView = self.imageView(forSubview: view)
            if imageView == nil {
                if i == 0 {
                    imageView = UIImageView(image: locationArrow)
                } else {
                    imageView = UIImageView(image: pageCircle)
                }
                imageView!.center = view.center
                view.addSubview(imageView!)
                view.clipsToBounds = false
            }
            if i == self.currentPage {
                imageView!.alpha = 1.0
            } else {
                imageView!.alpha = 0.5
            }
            i += 1
        }
    }

    fileprivate func imageView(forSubview view: UIView) -> UIImageView? {
        var dot: UIImageView?
        if let dotImageView = view as? UIImageView {
            dot = dotImageView
        } else {
            for foundView in view.subviews {
                if let imageView = foundView as? UIImageView {
                    dot = imageView
                    break
                }
            }
        }
        return dot
    }
} 
```

附加图片：

[![在此处输入图像描述](../Images/5837d51d4e80b3dda6279ac297600928.png)](https://i.stack.imgur.com/vTLbU.png) [![在此处输入图像描述](../Images/1b4716615fd7829587d0ad85516b47a0.png)](https://i.stack.imgur.com/9uAfE.png)

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2018-12-20T12:22:36.250

我创建了一个自定义页面控制器，它应该以几乎相同的方式运行，而无需侵入 UIPageControl 的内部或为一个小部件提供整个库。

只需在情节提要中放置一个空的 UIStackView 并将其自定义类设为下面的此类，然后像普通 UIPageControl 一样使用`numberOfPages`和。`currentPage`在 UIStackView 上设置间距以更改视图之间的间距。

**斯威夫特 4.2**

```
/**
 If adding via storyboard, you should not need to set a width and height constraint for this view,
 just set a placeholder for each so autolayout doesnt complain and this view will size itself once its populated with pages at runtime
 */
class PageControl: UIStackView {

    @IBInspectable var currentPageImage: UIImage = UIImage(named: "whiteCircleFilled")!
    @IBInspectable var pageImage: UIImage = UIImage(named: "whiteCircleOutlined")!
    /**
     Sets how many page indicators will show
     */
    var numberOfPages = 3 {
        didSet {
            layoutIndicators()
        }
    }
    /**
     Sets which page indicator will be highlighted with the **currentPageImage**
     */
    var currentPage = 0 {
        didSet {
            setCurrentPageIndicator()
        }
    }

    override func awakeFromNib() {
        super.awakeFromNib()

        axis = .horizontal
        distribution = .equalSpacing
        alignment = .center

        layoutIndicators()
    }

    private func layoutIndicators() {

        for i in 0..<numberOfPages {

            let imageView: UIImageView

            if i < arrangedSubviews.count {
                imageView = arrangedSubviews[i] as! UIImageView // reuse subview if possible
            } else {
                imageView = UIImageView()
                addArrangedSubview(imageView)
            }

            if i == currentPage {
                imageView.image = currentPageImage
            } else {
                imageView.image = pageImage
            }
        }

        // remove excess subviews if any
        let subviewCount = arrangedSubviews.count
        if numberOfPages < subviewCount {
            for _ in numberOfPages..<subviewCount {
                arrangedSubviews.last?.removeFromSuperview()
            }
        }
    }

    private func setCurrentPageIndicator() {

        for i in 0..<arrangedSubviews.count {

            let imageView = arrangedSubviews[i] as! UIImageView

            if i == currentPage {
                imageView.image = currentPageImage
            } else {
                imageView.image = pageImage
            }
        }
    }
} 
```

为我的目的工作，但我不做任何保证

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-12-02T18:07:13.927

Swift 3.0 的更新......你知道你是否可以接受声明的风险：“修改现有控件的子视图是脆弱的”。

```
 import UIKit

 class CustomImagePageControl: UIPageControl {

   let activeImage:UIImage = UIImage(named: "SelectedPage")!
   let inactiveImage:UIImage = UIImage(named: "UnselectedPage")!

   override func awakeFromNib() {
         super.awakeFromNib()

         self.pageIndicatorTintColor = UIColor.clear
         self.currentPageIndicatorTintColor = UIColor.clear
         self.clipsToBounds = false
    }

    func updateDots() {
         var i = 0
         for view in self.subviews {
             if let imageView = self.imageForSubview(view) {
                 if i == self.currentPage {
                     imageView.image = self.activeImage
                 } else {
                     imageView.image = self.inactiveImage
                 }
                 i = i + 1
             } else {
                 var dotImage = self.inactiveImage
                 if i == self.currentPage {
                     dotImage = self.activeImage
                 }
                 view.clipsToBounds = false
                 view.addSubview(UIImageView(image:dotImage))
                 i = i + 1
             }
         }
     }

     fileprivate func imageForSubview(_ view:UIView) -> UIImageView? {
         var dot:UIImageView?

         if let dotImageView = view as? UIImageView {
             dot = dotImageView
         } else {
             for foundView in view.subviews {
                 if let imageView = foundView as? UIImageView {
                     dot = imageView
                     break
                 }
             }
         }

         return dot
     }
 } 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-08-30T05:18:01.930

你只需要这样做：

```
((UIImageView *)[[yourPageControl subviews] objectAtIndex:0]).image=[UIImage imageNamed:@"search.png"]; 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-08-30T05:06:06.663

我认为为此您需要自定义整个`UIPageControl`. 请在以下链接中了解更多信息

1.  [如何更改 UIPageControl 分页点的颜色？](https://stackoverflow.com/questions/2942636/how-i-change-the-color-of-pagination-dots-of-uipagecontrol)

2.  [http://iphoneappcode.blogspot.in/2012/03/custom-uipagecontrol.html](http://iphoneappcode.blogspot.in/2012/03/custom-uipagecontrol.html)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-02-16T21:32:10.927

来自 iProgrammer 的回答
如果您想隐藏原始点

```
- (UIImageView *)imageViewForSubview:(UIView *)view {
    UIImageView * dot = nil;
    [view setBackgroundColor:[UIColor clearColor]]; << add this line 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-03-05T20:28:35.033

按照之前的答案，我想出了下面的解决方案。请记住，我必须在控制器中添加调用 updateDots() 的 valueChanged 侦听器来处理在 UIPageControl 上进行的点击

```
import UIKit

class PageControl: UIPageControl {
    private struct Constants {
        static let activeColor: UIColor = .white
        static let inactiveColor: UIColor = .black
        static let locationImage: UIImage = UIImage(named: "Location")!
    }

    // Update dots when currentPage changes
    override var currentPage: Int {
        didSet {
            updateDots()
        }
    }

    override func awakeFromNib() {
        super.awakeFromNib()
        self.pageIndicatorTintColor = .clear
        self.currentPageIndicatorTintColor = .clear
    }

    func updateDots() {
        for (index, view) in self.subviews.enumerated() {
            // Layers will be redrawn, remove old.
            view.layer.sublayers?.removeAll()
            if index == 0 {
                drawImage(view: view)
            } else {
                drawDot(index: index, view: view)
            }
        }
    }

    private func drawDot(index: Int, view: UIView) {
        let dotLayer = CAShapeLayer()
        dotLayer.path = UIBezierPath(ovalIn: view.bounds).cgPath
        dotLayer.fillColor = getColor(index: index)

        view.layer.addSublayer(dotLayer)
    }

    private func drawImage(view: UIView) {
        let height = view.bounds.height * 2
        let width = view.bounds.width * 2
        let topMargin: CGFloat = -3.5

        let maskLayer = CALayer()
        maskLayer.frame = CGRect(x: 0, y: 0, width: width, height: height)
        maskLayer.contents = Constants.locationImage.cgImage
        maskLayer.contentsGravity = .resizeAspect

        let imageLayer = CALayer()
        imageLayer.frame = CGRect(x:0, y: topMargin, width: width, height: height)
        imageLayer.mask = maskLayer
        imageLayer.backgroundColor = getColor()

        view.backgroundColor = .clear // Otherwise black background
        view.layer.addSublayer(imageLayer)
    }

    private func getColor(index: Int? = 0) -> CGColor {
        return currentPage == index ? Constants.activeColor.cgColor : Constants.inactiveColor.cgColor
    }
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-06-15T20:04:24.683

在 iOS 14 中，您可以使用以下方法获取和设置指示器图像：

```
@available(iOS 14.0, *)
open func indicatorImage(forPage page: Int) -> UIImage?

@available(iOS 14.0, *)
open func setIndicatorImage(_ image: UIImage?, forPage page: Int) 
```

# jquery - Spring MVC，Jquery自动完成不起作用

> ID：12190150
> 
> 赞同：0
> 
> 时间：2012-08-30T04:58:19.190
> 
> 标签：jquery, spring, model-view-controller, autocomplete, annotations

我正在尝试使用 Spring MVC 和 Jquery 实现自动完成功能。员工列表来自 DB，但来自 jquery；控制器的功能没有被调用。请看下面的代码。

empDetails.jsp

```
 `link rel="stylesheet" type="text/css" ` `href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" />
 `

 `<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
 `

 `<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js"></script>
  `

 `<script type="text/javascript">
 `

$(document).ready(function() {

$(document).ready(function() {

$("#empName").autocomplete({

source: '${pageContext.request.contextPath}/getEmpList'

});

});

</script>

<form:input path="empName" cssClass="input-xlarge" id="empName" /> 
```

控制器类

```
@RequestMapping(value = "/getEmpList", method = RequestMethod.GET, headers = "Accept=*/*")

public @ResponseBody List<String> getEmpNameList(@RequestParam("term") String query) {

List<String> empList = empDetailsService.getEmpNames(query);

return empList;

} 
```

请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T12:02:55.687

我想你忘记了自动完成的 url 中的控制器映射

我希望您的控制器类看起来像这样

```
 @Controller
 @RequestMapping("/myController")
 public EmpController {
    ...
    @RequestMapping(value = "/getEmpList"  method = RequestMethod.GET, headers = "Accept=*/*")
    public @ResponseBody List<String> getEmpNameList(@RequestParam("term") String query) {
        List<String> empList = empDetailsService.getEmpNames(query);
        return empList;
   }
 } 
```

然后你必须使用这个网址`myController/getEmpList`或`${pageContext.request.contextPath}/myController//getEmpList`

*如果这不能解决问题，那么使用像 firebug 这样的工具来查看客户端发送的内容和服务器返回的内容。*

# c# - ..NET 4.5 中的嵌套等待操作失败

> ID：12190154
> 
> 赞同：1
> 
> 时间：2012-08-30T04:58:48.830
> 
> 标签：c#, .net-4.5

我正在尝试开发一个 Windows 8 Metro 风格的应用程序。我有以下用例：

```
async void dofileop()
{
  await writedatatofile();          
  printdata();
}

IAsyncAction writedatatofile()
{
  readdatafromfile();
  //play with data
  return FIleIO.WriteData();
}

async void readdatafromfile()
{
    await FileIO.readdata();
    operation1
    operation 2
} 
```

在这里执行后`await FileIO.readdata();`，控件将立即转到 //play with data 而不是 operation1 和 operation2。执行后`printdata()`控制返回到 operation1 和 operation2。

我该如何解决这些问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T12:30:48.113

> 根据用例，readdatafromfile() 中的所有语句都应在控制返回到 writedatatofile() 之前执行。

这不是`async`方法的工作原理。您可能想阅读我的[`async`/`await`介绍](http://nitoprograms.blogspot.com/2012/02/async-and-await.html)。当某个方法没有完成的操作（例如，）`async`时，它会返回给它的调用者。`await``FileIO.readdata`

作为一般规则，让您的`async`方法 return `Task`，然后`await`是`Task`其他`async`方法中的 s，如下所示：

```
async Task dofileop()
{
  await writedatatofile();          
  printdata();
}

async Task writedatatofile()
{
  await readdatafromfile();
  //play with data
  await FIleIO.WriteData();
}

async Task readdatafromfile()
{
  await FileIO.readdata();
  operation1
  operation 2
} 
```

> 此外，我的限制是不要更改 IAsyncAction writedatatofile() 函数的语法。

这有点复杂：

```
async Task dofileop()
{
  await writedatatofileAsync();          
  printdata();
}

IAsyncAction writedatatofile()
{
  return writedatatofileAsync().AsAsyncAction();
}

async Task writedatatofileAsync()
{
  await readdatafromfile();
  //play with data
  await FIleIO.WriteData();
}

async Task readdatafromfile()
{
  await FileIO.readdata();
  operation1
  operation 2
} 
```

# ruby-on-rails - 未定义的方法“访问”# 我确信这在 stackoverflow 上的某个地方得到了回答，但对于我的生活，我找不到为什么我的情况与已经写的不同，所以这里是。 使用带水豚的 rspec 1) report_cards#index must have 'Report Cards Index' Failure/Error: visit '/' NoMethodError: undefi 问问题 问问题 2012-08-30T04:59:20.147 2969 次 This question shows research effort; it is useful and clear 2 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我确信这在 stackoverflow 上的某个地方得到了回答，但对于我的生活，我找不到为什么我的情况与已经写的不同，所以这里是。 使用带水豚的 rspec 1) report_cards#index must have 'Report Cards Index' Failure/Error: visit '/' NoMethodError: undefined method `visit' for # <rspec::core::examplegroup::nested_4:0x007fcc3aa33960># ./spec/views/report_cards_view_spec.rb:7:in `block (2 levels) in <top (required)="">' /spec/views/report_cards_view_spec.rb 看起来像 require 'spec_helper' describe "report_cards#index" do it "must have 'Report Cards Index'" do visit '/' page.should have_content("something") end end spec_helper.rb 的顶行看起来像 ENV["RAILS_ENV"] ||= 'test' require File.expand_path("../../config/environment", __FILE__) require 'rspec/rails' require 'rspec/autorun' require 'capybara/rails' require 'capybara/rspec' 宝石文件看起来像 `source 'https://rubygems.org'` gem 'rails', '3.2.7' gem 'jquery-rails' gem 'pg', '~> 0.14.0' gem 'devise', '~> 2.1.2' gem "quiet_assets", "~> 1.0.1" gem 'thin' gem 'bourbon' gem "haml-rails" gem "httparty", "~> 0.8.3" gem "activerecord-import", "~> 0.2.10" group :test, :development do gem "rspec-rails", "~> 2.0" gem 'capybara', '~>1.1.2' gem "fabrication", "~> 2.2.0" gem "launchy", "~> 2.1.2" end group :assets do gem 'sass-rails', '~> 3.2.3' gem 'coffee-rails', '~> 3.2.1' gem 'uglifier', '>= 1.0.3' end` 我很年轻，所以放轻松:) - THX！ capybara 不包含在视图规范中，它用于集成测试。 尝试将您的规范文件移动到规范/请求目录 ruby-on-railsruby 4 2 回答 2 This answer is useful 4 capybara 不包含在视图规范中，它用于集成测试。 尝试将您的规范文件移动到规范/请求目录 于 2012-08-30T05:20:28.027 回答 This answer is useful 1 我有一个类似的问题，我所要做的就是添加 config.include Capybara::DSL 到 spec_helper.rb 文件 于 2014-03-23T14:19:11.553 回答 Related 1 java - 在 java.util.Date 类型中插入特殊字符 1 iphone - 从 iPhone 将图像和个人资料详细信息发布到服务器 1 linux - 如何查看net-SNMP库设置的环境变量？ 0 android - ProgressDialog 崩溃 2 c++ - 变量周围的 C++ 堆栈已损坏 0 iphone - How to get the "No Charge D.U.N.S. Number" registering for developer program as a company 1 jquery - 对fancybox 的默认调用确实有效；扩展的不...？ 1 python - 特定格式的python strptime 1 admob - 如何更改 Admob 的网站 URL？ 1 version-control - 版本控制中的 robots.txt Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</top></rspec::core::examplegroup::nested_4:0x007fcc3aa33960>

> ID：12190159
> 
> 赞同：2
> 
> 时间：
> 
> 标签：ruby-on-rails, ruby

我确信这在 stackoverflow 上的某个地方得到了回答，但对于我的生活，我找不到为什么我的情况与已经写的不同，所以这里是。

使用带水豚的 rspec

```
 1) report_cards#index must have 'Report Cards Index'
 Failure/Error: visit '/'
 NoMethodError:
   undefined method `visit' for #<RSpec::Core::ExampleGroup::Nested_4:0x007fcc3aa33960>
 # ./spec/views/report_cards_view_spec.rb:7:in `block (2 levels) in <top (required)>' 
```

/spec/views/report_cards_view_spec.rb 看起来像

```
require 'spec_helper'
describe "report_cards#index" do
  it "must have 'Report Cards Index'" do
  visit '/'
  page.should have_content("something")
  end
end 
```

spec_helper.rb 的顶行看起来像

```
ENV["RAILS_ENV"] ||= 'test'
require File.expand_path("../../config/environment", __FILE__)
require 'rspec/rails'
require 'rspec/autorun'
require 'capybara/rails'
require 'capybara/rspec' 
```

宝石文件看起来像

```
`source 'https://rubygems.org'`
gem 'rails', '3.2.7'
gem 'jquery-rails'
gem 'pg', '~> 0.14.0'
gem 'devise', '~> 2.1.2'
gem "quiet_assets", "~> 1.0.1"
gem 'thin'
gem 'bourbon'
gem "haml-rails"
gem "httparty", "~> 0.8.3"
gem "activerecord-import", "~> 0.2.10"

group :test, :development do
  gem "rspec-rails", "~> 2.0"
  gem 'capybara', '~>1.1.2'
  gem "fabrication", "~> 2.2.0"
  gem "launchy", "~> 2.1.2"
end

group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
end` 
```

我很年轻，所以放轻松:) - THX！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T05:20:28.027

capybara 不包含在视图规范中，它用于集成测试。

尝试将您的规范文件移动到规范/请求目录

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-23T14:19:11.553

我有一个类似的问题，我所要做的就是添加

```
config.include Capybara::DSL 
```

到 spec_helper.rb 文件

# ant - ant 构建脚本不使用命令行在 Windows 上运行

> ID：12190161
> 
> 赞同：1
> 
> 时间：2012-08-30T04:59:32.073
> 
> 标签：ant, build

我编写了一个 ant 脚本，当我将它与 eclipse 一起使用时，它运行正常并生成 .jar 文件。但是当我在windows xp的命令提示符下使用它时，它显示成功，但没有任何反应。ant 配置正确，我也可以运行其他 ant 脚本。

这是我的 build.xml 文件

```
<?xml version="1.0"?>
<project name="TaskNodeBundle" basedir=".">
    <!-- Sets variables which can later be used. -->
    <!-- The value of a property is accessed via ${} -->
    <property name="bundlename" value="task-node-bundle" />
    <property name="src.dir" location="../src" />
    <property name="lib.dir" location="../lib" />
    <property name="build.dir" location="/buildoutput" />
    <property name="build.dest" location="build/dest" />

    <!--
    Create a classpath container which can be later used in the ant task
  -->
    <path id="classpath">
        <fileset dir="${lib.dir}/">
            <include name="*.jar" />

        </fileset>
    </path>

    <target name="clean">
            <delete dir="${build.dir}" />
            <delete dir="${build.dest}" />
    </target>

    <!-- Deletes the existing build directory-->
    <target name="mkdir" depends="clean">
            <mkdir dir="${build.dest}"/>
    </target>

<!-- Compiles the java code -->
    <target name="compile" depends="mkdir">
        <javac srcdir="${src.dir}" destdir="${build.dest}" classpathref="classpath" />
    </target>

    <target name="package-bundle" depends="compile" description="Generates the bundle">
        <jar destfile="${dist.dir}/${bundlename}.jar">
            <fileset dir="${src.dir}">
                <include name="**/**.class" />
                <include name="**/**.properties"/>
                <include name="/META-INF/**.*" />
                <include name="/META-INF/spring/**.*" />
            </fileset>

        </jar>
    </target>

</project> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T06:15:26.267

当您从命令行执行 ant 脚本时，它将执行`build.xml`文件中定义的第一个目标（在您的情况下`clean`）。

您可以在命令行上指定要执行的目标

```
$ ant target1 target2 
```

`<project>`或者在 build.xml 文件中使用标签的默认属性定义一个默认目标：

```
<project name="TaskNodeBundle" basedir="." default="package-bundle"> 
```

# javascript - AngularJS - $http.post 发送请求参数而不是 JSON 的任何方式？

> ID：12190166
> 
> 赞同：117
> 
> 时间：2012-08-30T04:59:51.783
> 
> 标签：javascript, jquery, post, angularjs

[我有一些旧代码通过jQuery 的 post 方法](http://api.jquery.com/jQuery.post/)发出 AJAX POST 请求，看起来像这样：

```
$.post("/foo/bar", requestData,
    function(responseData)
    {
        //do stuff with response
    } 
```

`requestData`只是一个带有一些基本字符串属性的 javascript 对象。

我正在将我们的东西转移到使用 Angular 的过程中，我想用 $http.post 替换这个调用。我想出了以下内容：

```
$http.post("/foo/bar", requestData).success(
    function(responseData) {
        //do stuff with response
    }
}); 
```

当我这样做时，我收到了来自服务器的 500 错误响应。使用 Firebug，我发现这发送了这样的请求正文：

```
{"param1":"value1","param2":"value2","param3":"value3"} 
```

成功的 jQuery`$.post`会像这样发送正文：

```
param1=value1&param2=value2&param3=value3 
```

我要访问的端点是请求参数而不是 JSON。所以，我的问题是无论如何要告诉`$http.post`将 javascript 对象作为请求参数而不是 JSON 发送？是的，我知道我可以自己从对象构造字符串，但我想知道 Angular 是否为此提供了开箱即用的东西。

* * *

## 回答 #1

> 赞同：140
> 
> 时间：2012-08-30T07:07:28.097

我认为`params`config 参数在这里不起作用，因为它将字符串添加到 url 而不是 body 但是添加到 Infeligo 建议的内容是默认转换的全局覆盖的示例（使用 jQuery[参数](http://api.jquery.com/jQuery.param/)作为示例进行转换参数字符串的数据）。

**设置全局 transformRequest 函数：**

```
var app = angular.module('myApp');

app.config(function ($httpProvider) {
    $httpProvider.defaults.transformRequest = function(data){
        if (data === undefined) {
            return data;
        }
        return $.param(data);
    }
}); 
```

这样，所有对 $http.post 的调用都会自动将正文转换为 jQuery`$.post`调用使用的相同参数格式。

请注意，您可能还希望在每次调用或全局设置 Content-Type 标头，如下所示：

```
$httpProvider.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded; charset=UTF-8'; 
```

**每次调用的示例非全局 transformRequest：**

```
 var transform = function(data){
        return $.param(data);
    }

    $http.post("/foo/bar", requestData, {
        headers: { 'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'},
        transformRequest: transform
    }).success(function(responseData) {
        //do stuff with response
    }); 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2016-05-18T09:50:01.500

如果使用**Angular >= 1.4**，这是我发现的最干净的解决方案，它不依赖于任何自定义或外部：

```
angular.module('yourModule')
  .config(function ($httpProvider, $httpParamSerializerJQLikeProvider){
    $httpProvider.defaults.transformRequest.unshift($httpParamSerializerJQLikeProvider.$get());
    $httpProvider.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded; charset=utf-8';
}); 
```

然后您可以在应用程序的任何位置执行此操作：

```
$http({
  method: 'POST',
  url: '/requesturl',
  data: {
    param1: 'value1',
    param2: 'value2'
  }
}); 
```

并且它将正确地将数据序列化并使用Content-Type 标头`param1=value1&param2=value2`将其发送到，正如端点上的 POST 请求通常所期望的那样。`/requesturl``application/x-www-form-urlencoded; charset=utf-8`

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-08-30T06:36:58.370

来自 AngularJS 文档：

> params – {Object.} – 字符串或对象的映射，将在 url 之后转换为 ?key1=value1&key2=value2。**如果值不是字符串**，它将被 JSON 化。

因此，提供字符串作为参数。如果您不希望那样，请使用转换。同样，从文档中：

> 要在本地覆盖这些转换，请将转换函数指定为配置对象的 transformRequest 和/或 transformResponse 属性。要全局覆盖默认转换，请覆盖 $httpProvider 的 $httpProvider.defaults.transformRequest 和 $httpProvider.defaults.transformResponse 属性。

有关更多详细信息，请参阅[文档](http://docs.angularjs.org/api/ng.%24http)。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2013-04-23T17:27:34.027

使用 jQuery 的`$.param`函数将 requestData 中的 JSON 数据序列化。

简而言之，使用与您类似的代码：

```
$http.post("/foo/bar",
$.param(requestData),
{
    headers:
    {
        'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
    }
}
).success(
    function(responseData) {
        //do stuff with response
    }
}); 
```

要使用它，您必须在页面中包含 jQuery 以及 AngularJS。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-12-23T19:31:31.677

请注意，从 Angular 1.4 开始，您可以在不使用 jQuery 的情况下序列化表单数据。

在 app.js 中：

```
module.run(function($http, $httpParamSerializerJQLike) {
  $http.defaults.transformRequest.unshift($httpParamSerializerJQLike);
}); 
```

然后在你的控制器中：

```
$http({
    method: 'POST',
    url: myUrl',
    headers: {'Content-Type': 'application/x-www-form-urlencoded'},
    data: myData
}); 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-05-02T04:25:18.393

我在设置自定义 http 身份验证时也遇到了问题，因为 $resource 缓存了请求。

要使其正常工作，您必须通过执行此操作来覆盖现有的标头

```
var transformRequest = function(data, headersGetter){
  var headers = headersGetter();
  headers['Authorization'] = 'WSSE profile="UsernameToken"';
  headers['X-WSSE'] = 'UsernameToken ' + nonce
  headers['Content-Type'] = 'application/json';
};

return $resource(
  url,
    {
    },
    {
      query: {
        method: 'POST',
        url: apiURL + '/profile',
        transformRequest: transformRequest,
        params: {userId: '@userId'}
      },
    }
); 
```

我希望我能帮助别人。我花了 3 天时间才弄清楚这一点。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2013-11-13T13:41:35.610

这可能有点麻烦，但我避免了这个问题，并将 json 转换为服务器端的 PHP POST 数组：

```
$_POST = json_decode(file_get_contents('php://input'), true); 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2014-11-30T19:58:07.610

修改默认标题：

```
$http.defaults.headers.post["Content-Type"] = "application/x-www-form-urlencoded;charset=utf-8"; 
```

然后使用JQuery的`$.param`方法：

```
var payload = $.param({key: value});
$http.post(targetURL, payload); 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-05-04T10:01:48.670

```
 .controller('pieChartController', ['$scope', '$http', '$httpParamSerializerJQLike', function($scope, $http, $httpParamSerializerJQLike) {
        var data = {
                TimeStamp : "2016-04-25 12:50:00"
        };
        $http({
            method: 'POST',
            url: 'serverutilizationreport',
            headers: {'Content-Type': 'application/x-www-form-urlencoded'},
            data: $httpParamSerializerJQLike(data),
        }).success(function () {});
    }
  ]); 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2013-01-21T00:43:19.367

快速调整 - 对于那些对 transformRequest 函数的全局配置有问题的人，这是我用来消除`Cannot read property 'jquery' of undefined`错误的代码段：

```
$httpProvider.defaults.transformRequest = function(data) {
        return data != undefined ? $.param(data) : null;
    } 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-02-12T01:17:19.420

您也可以在不更改服务器中的代码、更改`$http.post`调用中的标头并使用`$_POST`常规方式的情况下解决此问题。在这里解释：http: [//victorblog.com/2012/12/20/make-angularjs-http-service-behave-like-jquery-ajax/](http://victorblog.com/2012/12/20/make-angularjs-http-service-behave-like-jquery-ajax/)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-09-02T14:39:39.887

我发现很多次有问题的行为。我从 express（没有类型）和 bodyParser（使用 dt~body-parser 类型）中使用它。

我没有尝试上传文件，而是简单地解释在帖子字符串中给出的 JSON。

这`request.body`只是一个空的 json ( `{}`)。

经过大量调查终于这对我有用：

```
import { json } from 'body-parser';
...
app.use(json()); <-- should be defined before the first POST handler! 
```

`application/json`在客户端的请求字符串中给出内容类型也很重要。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-06-28T18:54:31.667

AngularJS v1.4.8 + (v1.5.0) 的语法

```
 $http.post(url, data, config)
            .then(
                    function (response) {
                        // success callback
                    },
                    function (response) {
                        // failure callback
                    }
            ); 
```

例如：

```
 var url = "http://example.com";

    var data = {
        "param1": "value1",
        "param2": "value2",
        "param3": "value3"
    };

    var config = {
        headers: {
            'Content-Type': "application/json"
        }
    };

    $http.post(url, data, config)
            .then(
                    function (response) {
                        // success callback
                    },
                    function (response) {
                        // failure callback
                    }
            ); 
```

# codeigniter - 如何通过转义空属性更新/插入？我使用 CodeIgniter 的活动记录

> ID：12190168
> 
> 赞同：0
> 
> 时间：2012-08-30T05:00:22.660
> 
> 标签：codeigniter

我使用 CodeIgniter 的活动记录，我遇到了一个问题：

1.  我在图书馆有一堂课：

    类 TblUser{

    ```
     var $id = null;
      var $name = null;
      var $age = null; 
    ```

    }

2.  在模型中，我有一类：

    ```
    class Task_m extends CI_Model {

        function add(){

           //Assume that i already success include class TblUser so i start instean

          $myTableUser = new TblUser ();
          $myTableUser->id = 1;
          $myTableUser->name = 'Foo';
          $myTableUser->age = 20;
          $this->db->insert('tbl_user',$myTableUser);
          // Assume that success add to database
        }
        function update($id,$name){

           //Assume that i already success include class TblUser so i start instean

          $myTableUser = new TblUser ();
          $myTableUser->name = $name;

          $this->db->where('id', $id);
          $this->db->update('tbl_user',$myTableUser); 
          // Assume that success add to database
        }

        /* problem 
         * i call function : update(1,'titi');
         * in database record will update like below:
         *  ----------------
         *  |id | name | age | 
         *   ----------------
         *  |null| titi| null|
         *  -----------------
         * I don't want null value, my wish if any property $myTableUser is null should be refuse.
         */

    } 
    ```

对于这一点，我想使用类传递给活动记录函数，但对于任何包含空值的属性都应该被拒绝。（类似的joomla实例表）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T05:38:49.783

您编写类的方式如下，很明显，如果未提供它，它将采用空值。

```
class TblUser{

  var $id = null;
  var $name = null;
  var $age = null;
} 
```

那么你有两个解决方案

1.  在`update()`函数中，您将对象初始化为`$myTableUser->id = $id`；
2.  在表中添加调用的列级约束`NOT NULL`，以便在插入`null`值时抛出异常。

# javascript - jQuery：尝试绑定事件时对对象的错误引用

> ID：12190169
> 
> 赞同：0
> 
> 时间：2012-08-30T05:00:23.387
> 
> 标签：javascript, jquery, validation, events, bind

好的，有这样的问题......我正在尝试减少验证字段所需的代码量。在这种情况下，我创建了包含要绑定事件的元素的 id 的数组。像这样：

```
var fields = new Array('#edit-field-first-name', '#edit-field-last-name', '#edit-field-mobile'); 
```

然后我在一个循环中绑定事件：

```
for(var i = 0; i < fields.length; i++){
  if($('#user-profile-form ' + fields[i]).length > 0){
    var $obj = $('#user-profile-form ' + fields[i]);
    $obj.bind({
      blur :  function(){
                  if(!reg_chars.test($obj.val())){
                      $obj.css('border','1px solid #A14')
                          .parent().children('div.description').css('color', '#A14');
                  }else{
                      $obj.css('border-style','solid').css('border-color','#C5C3C3 #EDEDED #EDEDED #C5C3C3').css('border-width','1px')
                         .parent().children('div.description').css('color', '#333');
                  };
              }
    })
  }
} 
```

现在奇怪的事情发生了。它正在正确触发“模糊”事件。但它总是引用数组中的最后一个元素。看起来它总是使用相同的对象，并且每次循环迭代都覆盖它。

所以需要帮助......有什么可以解决的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T05:17:51.153

绑定函数中的上下文 ($obj) 赋值问题。尝试更改为

```
 for(var i = 0; i < fields.length; i++){
      if($('#user-profile-form ' + fields[i]).length > 0){
        var $obj = $('#user-profile-form ' + fields[i]);
        $obj.bind({
          blur :  function(){
                      var $input = $(this);                      

                      if(!reg_chars.test($input.val())){
                          $input.css('border','1px solid #A14')
                              .parent().children('div.description').css('color', '#A14');
                      }else{
                          $input.css('border-style','solid').css('border-color','#C5C3C3 #EDEDED #EDEDED #C5C3C3').css('border-width','1px')
                             .parent().children('div.description').css('color', '#333');
                      };
                  }
        })
      }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T05:12:56.603

我建议花时间阅读 John Resig 的教程[Learning Advanced Javascript](http://ejohn.org/apps/learn/)。它将帮助您解决这个问题，也将使您对 Javascript 有更深入的了解。

# javascript - 当我们单击表头时对表中的行进行排序

> ID：12190171
> 
> 赞同：3
> 
> 时间：2012-08-30T05:00:35.090
> 
> 标签：javascript, jquery, html, css

我的任务是对表格中的表格行进行排序。表中的数据是日期、数字、字符串等所有内容的混合。

我浏览了许多链接，发现其中一些链接指向准备好的库。这对我没有用。最后经历了很多我自己用所有的山雀和比特做的事情。仅适用于数字

这是脚本：

```
 $(document).ready(function () {

        //grab all header rows
        $('th').each(function (column) {
            $(this).addClass('sortable').click(function () {
                    var findSortKey = function ($cell) {
                        return $cell.find('.sort-key').text().toUpperCase()+ ' ' + $cell.text().toUpperCase();

                    };
                    var sortDirection = $(this).is('.sorted-asc') ? -1 : 1;
                    var $rows = $(this).parent().parent().parent().find('tbody tr').get();

                    //loop through all the rows and find
                    $.each($rows, function (index, row) {
                        row.sortKey = findSortKey($(row).children('td').eq(column));
                    });

                    //compare and sort the rows alphabetically or numerically
                    $rows.sort(function (a, b) {
                        if (a.sortKey.indexOf('-') == -1) {
                            if (parseInt(a.sortKey) < parseInt(b.sortKey)) {
                                return -sortDirection;
                            }
                            if (parseInt(a.sortKey) > parseInt(b.sortKey)) {                                
                                return sortDirection;
                            }
                        } else {
                            if (a.sortKey < b.sortKey) {
                                return -sortDirection;
                            }
                            if (a.sortKey > b.sortKey) {
                                return sortDirection;
                            }
                        }
                        return 0;
                    });

                    //add the rows in the correct order to the bottom of the table
                    $.each($rows, function (index, row) {
                        $('tbody').append(row);
                        row.sortKey = null;
                    });

                    //identify the column sort order
                    $('th').removeClass('sorted-asc sorted-desc');
                    var $sortHead = $('th').filter(':nth-child(' + (column + 1) + ')');
                    sortDirection == 1 ? $sortHead.addClass('sorted-asc') : $sortHead.addClass('sorted-desc');

                    //identify the column to be sorted by
                    $('td').removeClass('sorted').filter(':nth-child(' + (column + 1) + ')').addClass('sorted');
                });
            });
        }); 
```

这是文档的样式：

```
 <style>
    root
    {
        display: block;
    }

    th.sortable
    {
        color: #666;
        cursor: pointer;
        text-decoration: underline;
    }

        th.sortable:hover
        {
            color: black;
        }

    th.sorted-asc, th.sorted-desc
    {
        color: black;
        background-color: cadetblue;
    }
</style> 
```

**所以下面是 HTML 部分。**

```
<table>
    <tbody>
        <tr>
            <th class="sortable">Name</th>
            <th class="sortable">Salary</th>
            <th>Extension</th>
            <th>Start date</th>
            <th>Start date (American)</th>
        </tr>
        <tr>
            <td>Bloggs, Fred</td>
            <td>$12000.00</td>
            <td>1353</td>
            <td>18/08/2003</td>
            <td>08/18/2003</td>
        </tr>
        <tr>
            <td>Turvey, Kevin</td>
            <td>$191200.00</td>
            <td>2342</td>
            <td>02/05/1979</td>
            <td>05/02/1979</td>
        </tr>
        <tr>
            <td>Mbogo, Arnold</td>
            <td>$32010.12</td>
            <td>2755</td>
            <td>09/08/1998</td>
            <td>08/09/1998</td>
        </tr>
        <tr>
            <td>Shakespeare, Bill</td>
            <td>$122000.00</td>
            <td>3211</td>
            <td>12/11/1961</td>
            <td>11/12/1961</td>
        </tr>
        <tr>
            <td>Shakespeare, Hamnet</td>
            <td>$9000</td>
            <td>9005</td>
            <td>01/01/2002</td>
            <td>01/01/2002</td>
        </tr>
        <tr>
            <td>Fitz, Marvin</td>
            <td>$3300</td>
            <td>5554</td>
            <td>22/05/1995</td>
            <td>05/22/1995</td>
        </tr>
    </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T05:29:05.933

听起来像家庭作业，这很好，因为您自己已经付出了一些努力。如果不允许[tablesorter](http://tablesorter.com/docs/)，请下载它，我认为有一个调试版本，并查看代码。这应该可以帮助您完成任务。

如果这是家庭作业，请记住在现实世界中，编程的黄金法则是不要重新发明轮子。如果有满足您需求的插件，请使用它。

**修复你所拥有的**

您的代码存在的问题是：

```
if (a.sortKey.indexOf('-') == -1) {
    if (parseInt(a.sortKey) < parseInt(b.sortKey)) {
        return -sortDirection;
     }

     if (parseInt(a.sortKey) > parseInt(b.sortKey)) {                                
          return sortDirection;
     }
} else {
    //Non numeric sort
} 
```

`a`在这里，如果不包含，您总是尝试将其排序为整数`-`。一个非常粗略的解决方法是：

```
if (a.sortKey.indexOf('-') == -1 && (!isNaN(a.sortKey) && !isNaN(a.sortKey))) {
//Rough Numeracy check                          

    if (parseInt(a.sortKey) < parseInt(b.sortKey)) {
        return -sortDirection;
    }

    if (parseInt(a.sortKey) > parseInt(b.sortKey)) {                                
        return sortDirection;
    }

 } else {
    //Non numeric sort
 } 
```

这是一个工作[文件](http://jsfiddle.net/jZ6zZ/2/)。

请记住，这是一个非常粗略的算术检查，您可能需要对其他数据类型进行其他检查和平衡。

# asp.net-mvc - ASP.NET MVC 4 公用文件夹，如 Ruby on Rails

> ID：12190174
> 
> 赞同：3
> 
> 时间：2012-08-30T05:00:42.090
> 
> 标签：asp.net-mvc, asp.net-mvc-4

有没有办法给 ASP.NET MVC 4 项目一个“公共”文件夹，它就像应用程序根目录一样，就像在 Ruby on Rails 中一样？

ASP.NET MVC 通常带有一个“内容”文件夹，您可以在其中放置静态提供的文件，如样式表、脚本和图像。但是这些文件的 URL 必须包含 Content 文件夹，例如`<img src="/Content/logo.png">`。是否可以将 Content 文件夹设置为应用程序的根目录，以便您可以使用它：`<img src="/logo.png">`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T06:42:28.570

我不知道为什么我以前没有想到这一点，但我能够通过 IIS URL 重写来完成这一点。以下规则假定您的静态文件所在的文件夹名为“Public”。当然，您可以随意命名文件夹。

```
<!-- Any direct references to files in the Public folder should be
     301 redirected to maintain canonical URLs. This is optional. -->
<rule name="Public folder canonical path" stopProcessing="true">
  <match url="^public/(.*)" />
  <conditions logicalGrouping="MatchAll" trackAllCaptures="false" />
  <action type="Redirect" url="{R:1}" appendQueryString="true" />
</rule>

<!-- Any URL that points to an existing file after prepending "Public" to it
     will serve that file. For example, if a file exists at /Public/style.css
     then the URL /style.css will serve that file. Likewise, if a file exists
     at /Public/images/logo.png, then the URL /images/logo.png will serve
     that file. Files in the Public folder will take precedence over files in
     the application root, so if a file /Public/script.js exists and a file
     /script.js exists, only the /Public/script.js file will be served. This
     also takes precedence over MVC routes. -->
<rule name="Public folder" stopProcessing="true">
  <match url=".+" />
  <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
    <add input="{URL}" pattern="^/Public/" negate="true" />
    <add input="{DOCUMENT_ROOT}/Public{URL}" matchType="IsFile" />
  </conditions>
  <action type="Rewrite" url="Public/{R:0}" appendQueryString="true" />
</rule> 
```

# c# - 可以使用 IQueryable 上的 linq 将两列添加在一起并按该列分组吗？

> ID：12190175
> 
> 赞同：1
> 
> 时间：2012-08-30T05:00:55.213
> 
> 标签：c#, linq, telerik

当我返回所有 DailyCollectionActivities 时，我的数据来自 IQueryable，如下表所示。

```
CatType | CdDescr | CollTypeDescr | RollCasteDescr | TIFDescr | TADescr | Amount
--------------------------------------------------------------------------------
Cat 1   | Cd 1    | CollType 233  | Roll Caste 234 | TIF 2344 | TA 2343 | 344.35
Cat 1   | Cd 1    | CollType 222  | Roll Caste 235 | TIF 2345 | TA 2344 | 355.35
Cat 2   | Cd 2    | CollType 223  | Roll Caste 236 | TIF 2346 | TA 2345 | 664.44
Cat 3   | Cd 3    | CollType 255  | Roll Caste 236 | TIF 2347 | TA 2346 | 455.34
Cat 4   | Cd 4    | CollType 266  | Roll Caste 236 | TIF 2348 | TA 2347 | 455.44 
```

我试图找出是否有可能，在`IQueryable<DailyCollectionActivity>`数据上使用 linq，将两列添加在一起，然后在新创建的列上分组？例如，我需要弄清楚如何添加`CatType`到`CdDescr (CatType + '-' + CdDescr)`新创建的列然后按其分组并对金额求和。最后，我需要获取该查询的结果并将其绑定到`RadGrid`.

为了让事情变得更有趣，用户可以选择将哪些列添加在一起。我可以用一个 group by 子句结束，比如`(CatType + '-' CdDescr), (TIFDescr + '-' + TADescr)`.

这是我可以使用 Linq 合理完成的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T05:08:47.473

从类别中说出来

```
var result = from s in (

from p in categories
             select new {
TypeDesr = p.CatType+"-"+ p.CdDesr,
CollTypeDescr  = p.CollTypeDescr ,
RollCasteDescr = p.RollCasteDescr,
TIFDescr = p.TIFDescr,
TADescr = p.TADescr,
Amount = p.Amount
})
group s by s.TypeDesr into r
select r; 
```

# ruby-on-rails - Rails + PostGIS 错误迁移数据库

> ID：12190178
> 
> 赞同：12
> 
> 时间：2012-08-30T05:01:07.133
> 
> 标签：ruby-on-rails, postgresql, geolocation, geospatial, postgis

我正在关注 Daniel Azuma 关于[使用 rails 进行地理空间分析](http://confreaks.com/videos/856-railsconf2012-getting-down-to-earth-geospatial-analysis-with-rails)的演讲，但每当我`rake db:migrate`在第二个项目中运行时，我都会遇到困难。

我的设置细节如下： 我正在使用[Postgres.app](http://postgresapp.com/documentation)运行 Postgresql ，它为我提供了 Postgres 9.1.3 版和 PostGIS 2.0.0 版。我在 database.yml 文件和运行迁移时遇到了一些问题。（我已经添加了相关的 gem 并在 application.rb 中需要他们的信息）

我的 database.yml 文件如下所示：

```
 development:
   adapter: postgis
   postgis_extension: true
   host: localhost
   encoding: unicode
   database: my_app_development
   pool: 5
   username: my_app
   password: 
```

如果我添加以下行`schema_search_path: "public,postgis"`，我会得到：

```
 rake aborted!
 PG::Error: ERROR:  schema "postgis" does not exist
 : SET search_path TO public,postgis 
```

如果我删除该行，我在尝试迁移数据库时会收到以下错误：

```
rake aborted!
PG::Error: ERROR:  relation "geometry_columns" does not exist
LINE 1: SELECT * FROM geometry_columns WHERE f_table_name='schema_mi...                       ^
: SELECT * FROM geometry_columns WHERE f_table_name='schema_migrations' 
```

有谁知道如何解决这些问题？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-28T19:45:59.703

在公共模式中删除 PostGIS 扩展并在 postgis 模式中重新创建它。

```
DROP EXTENSION PostGIS;

CREATE SCHEMA postgis;
CREATE EXTENSION PostGIS WITH SCHEMA postgis;
GRANT ALL ON postgis.geometry_columns TO PUBLIC;
GRANT ALL ON postgis.spatial_ref_sys TO PUBLIC 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-15T00:49:03.873

这是我解决问题的方法。我首先创建了一个新的迁移来将 postgis 添加到数据库中。（我已经在 Mac 上通过自制软件安装了 postgis 和 postgresql。）

```
rails g migration add_postgis_to_database 
```

在迁移文件中，我删除了 change 方法并使用 execute 方法添加 POSTGIS。

```
execute("CREATE EXTENSION postgis;") 
```

之后，您可以检查数据库以确保 postgis 可用。

```
psql your_database_name
SELECT PostGIS_full_version(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-11-15T09:04:09.757

实际上，安装命令需要调用 postgis 版本

```
sudo apt-get install -y postgis postgresql-9.3-postgis-2.1 
```

然后最简单的方法是声明

```
sudo -u postgres psql -c "CREATE EXTENSION postgis" your-pg-database-name 
```

避免迁移打嗝。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-31T01:41:41.143

您使用的是什么版本的 PostgreSQL？这个`EXTENSION`东西[出现在 9.1 中](http://www.postgresql.org/docs/9.1/static/release-9-1.html)。扩展是一种在一个包中加载多个对象的便捷方式。

如果您使用的版本低于 9.1，您可能可以按照[这些说明](http://postgis.refractions.net/documentation/manual-2.0/postgis_installation.html#create_new_db)（所有`-f`命令）加载 PostGIS。升级也可能是个好主意，但这取决于您。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-06-25T21:11:43.240

我遇到了同样的问题，除了@Raido 的解决方案解决了 db:migrate 的问题，但在创建租户时（例如，在 db:seed 期间），我仍然遇到 Apartment gem 的问题。

我发现 Rails 会自动添加`enable_extension "postgis"`到 schema.rb，Apartment 使用它来创建租户模式。我不确定为什么 Apartment 不使用现有的 postgis 扩展（可能是创建租户时 search_path 的问题），但这会导致相同的错误。

解决方案（如果你可以这么称呼它）是简单地`enable_extension "postgis"`从 schema.rb 中删除该行。这种方法的唯一问题是任何触发 schema.rb 刷新的后续迁移都会导致重新添加该行。

此外，我使用 Apartment 方法将 postgis 扩展添加到 shared_extensions 模式而不是它自己的模式中。我的 lib/tasks/db_extensions.rake 看起来像：

```
namespace :db do
  desc 'Also create shared_extensions Schema'
  task :extensions => :environment  do
    # Create Schema
    ActiveRecord::Base.connection.execute 'CREATE SCHEMA IF NOT EXISTS shared_extensions;'
    # Enable Hstore
    ActiveRecord::Base.connection.execute 'CREATE EXTENSION IF NOT EXISTS HSTORE SCHEMA shared_extensions;'
    # Enable uuid-ossp for uuid_generate_v1mc()
    ActiveRecord::Base.connection.execute 'CREATE EXTENSION IF NOT EXISTS "uuid-ossp" SCHEMA shared_extensions;'
    # Enable postgis extension for geographic data types
    ActiveRecord::Base.connection.execute 'DROP EXTENSION IF EXISTS postgis;'
    ActiveRecord::Base.connection.execute 'CREATE EXTENSION postgis WITH SCHEMA shared_extensions;'
    ActiveRecord::Base.connection.execute 'GRANT USAGE ON SCHEMA shared_extensions to PUBLIC;'
    puts 'Created extensions'
  end
end

Rake::Task["db:create"].enhance do
  Rake::Task["db:extensions"].invoke
end

Rake::Task["db:test:purge"].enhance do
  Rake::Task["db:extensions"].invoke
end 
```

我的 database.yml 看起来像：

```
postgis_options: &postgis_options
  adapter: postgis
  postgis_extension: postgis # default is postgis
  postgis_schema: shared_extensions # default is public

default: &default
  schema_search_path: 'public,shared_extensions'
  encoding: utf8
  <<: *postgis_options

...

production:
  <<: *default
  url: <%= ENV['DATABASE_URL'].try(:sub, /^postgres/, 'postgis') %> 
```

不理想，但它正在工作。也许这会为 PostGIS 和 Apartment 节省一两个小时。我很想知道是否有人有比`enable_extension`从 schema.rb 中删除调用更好的解决方案 :)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-24T12:32:05.273

确保你已经安装了这个

```
sudo apt-get install postgresql-9.3-postgis 
```

由于缺少此包裹，我面临同样的问题。

# android - Android：扫描目录并显示图片（缩略图）（图片不存储在mediastore中）

> ID：12190181
> 
> 赞同：4
> 
> 时间：2012-08-30T05:01:19.607
> 
> 标签：android, android-gallery

我最近使用我使用媒体查询和媒体存储设计的自定义画廊对显示图片进行了一些测试......效果很好，但我真的需要做一些自定义的事情。

我不希望图片被扫描或在媒体商店中可用，因此我想让我的应用程序扫描目录并创建缩略图并显示这些缩略图。

我发现很难找到任何高质量的例子来做到这一点。

谁能帮忙举个小例子。

这是我想要做的。

1.  图片存储在 sdcard 的目录中。
2.  使用我的自定义画廊，它会扫描这个目录，但使用媒体存储“不”
3.  我需要显示目录的内容，但作为缩略图我想我需要先创建这个缩略图？
4.  单击缩略图应该是我的自定义画廊中的全屏图像。

我想我只需要一点帮助来从目录中获取图片，因为没有存储 int eh mediastore 所以我不能使用查询。我担心的另一件事是我需要为这些图像中的每一个创建缩略图（即时？？）因为显示图像但缩小尺寸我会怀疑这对性能非常不利。

任何人都可以伸出援助之手吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T06:54:37.860

不久前我也做过同样的事情。您必须传递图像所在的文件夹名称`setBaseFolder`。该方法依次调用`refresh()`which - 使用 a `FilenameFilter`（代码未包含但很容易实现）获取`orig_....jpg`从该文件夹命名的所有图像并将其保存在`mFileList`. 然后我们调用`notifyDataSetChanged()`which 依次触发`getView()`每个单元格。

现在，`getView()`如果我们已经在缓存中获取缩略图位图，我们要么从缓存中获取它，否则我们制作一个灰色占位符并启动 a`ThumbnailBuilder`来创建缩略图。从中获取位图。

我认为你必须改变`ThumbnailBuilder`一点，因为我创建了相当大的“缩略图”（500x500），因为我也需要调整大小的图像用于其他目的。此外，当我处理相机拍摄的照片时，那里有一些东西，根据 exif 信息旋转图像。但基本上，`ThumbnailBuilder`只检查是否已经存在缩略图（我的缩略图放置在同一个文件夹中，但前缀`small_`不是`orig_`） - 如果缩略图已经存在，我们将其作为 a`Bitmap`并完成，否则生成图像。最后，`onPostExecute()`在位图中设置为ImageView。

```
public class PhotoAdapter extends BaseAdapter {

private Context mContext;
private int mCellSize;
private File mFolder;
private File[] mFileList;
private Map<Object, Bitmap> mThumbnails = new HashMap<Object, Bitmap>();
private Set<Object> mCreatingTriggered = new HashSet<Object>(); // flag that creating already triggered

public PhotoAdapter(Context context, int cellSize) {
    mContext = context;
    mCellSize = cellSize;
}

@Override
public int getCount() {
    if (mFolder == null) {
        return 0;   // don't do this
    } else {
        return mFileList.length;
    }
}

@Override
public Object getItem(int position) {
    return mFileList[position];
}

@Override
public long getItemId(int position) {
    return position;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    ImageView view = (ImageView)convertView;
    if (view == null) {
        view = new ImageView(mContext);
        view.setLayoutParams(new GridView.LayoutParams(mCellSize, mCellSize));
        view.setScaleType(ImageView.ScaleType.CENTER_CROP);
        view.setPadding(8, 8, 8, 8);
        view.setBackgroundColor(0xFFC6CCD3);
    }
    Object item = getItem(position);
    Bitmap bm = mThumbnails.get(item);
    if (bm == null) {
        view.setImageBitmap(null);
        if (!mCreatingTriggered.contains(item)) {
            mCreatingTriggered.add(item);
            new ThumbnailBuilder(view, (File)item).execute();
        }
    } else {
        view.setImageBitmap(bm);
    }
    return view;
}

public void setBaseFolder(File baseFolder) {
    if (baseFolder == null) return;
    if (!baseFolder.equals(mFolder)) {
        releaseThumbnails();
        mFolder = baseFolder;
    }
    refresh();
}

public void refresh() {
    if (mFolder == null) {
        return;
    }
    mFileList = mFolder.listFiles(EtbApplication.origImageFilenameFilter);
    if (mFileList == null) mFileList = new File[0];
    notifyDataSetChanged();
}

public void releaseThumbnails() {
    for (Bitmap bm : mThumbnails.values()) {
        bm.recycle();
    }
    mThumbnails.clear();
}

// ------------------------------------------------------------------------------------ Asynchronous Thumbnail builder

private class ThumbnailBuilder extends AsyncTask<Void, Integer, Bitmap> {

    private ImageView mView;
    private File mFile;

    public ThumbnailBuilder(ImageView view, File file) {
        mView = view;
        mFile = file;
    }

    @Override
    protected Bitmap doInBackground(Void... params) {
        Log.d("adapter", "make small image and thumbnail");
        try {
            return createThumbnail(mFile.getAbsolutePath());
        } catch (Exception e) {
            return null;
        }
    }

    @Override
    protected void onPostExecute(Bitmap result) {
        if (result != null) {
            mView.setImageBitmap(result);
            mThumbnails.put(mFile, result);
        } else {
            mView.setImageResource(R.drawable.ic_launcher);
        }
    }

    /**
     * Creates Thumbnail (also rotates according to exif-info)
     * @param file
     * @return
     * @throws IOException
     */
    private Bitmap createThumbnail(String file) throws IOException {

        File thumbnailFile = new File(file.replace("orig_", "small_"));

        // If a small image version already exists, just load it and be done.
        if (thumbnailFile.exists()) {
            return BitmapFactory.decodeFile(thumbnailFile.getAbsolutePath());
        }

        // Decode image size
        BitmapFactory.Options bounds = new BitmapFactory.Options();
        bounds.inJustDecodeBounds = true;
        BitmapFactory.decodeFile(file, bounds);

        if ((bounds.outWidth == -1) || (bounds.outHeight == -1))
            return null;

        int w, h;

        if (bounds.outWidth > bounds.outHeight) {   // Querformat
            w = 500;
            h = 500 * bounds.outHeight / bounds.outWidth;
        } else {    // Hochformat
            h = 500;
            w = 500 * bounds.outWidth / bounds.outHeight;
        }

        BitmapFactory.Options opts = new BitmapFactory.Options();
        opts.inSampleSize = 4;  // resample -- kleiner aber noch nicht die 500 Pixel, die kommen dann unten
        Bitmap resizedBitmap = BitmapFactory.decodeFile(file, opts);
        resizedBitmap = Bitmap.createScaledBitmap(resizedBitmap, w, h, true);

        ExifInterface exif = new ExifInterface(file);
        String orientString = exif.getAttribute(ExifInterface.TAG_ORIENTATION);
        int orientation = orientString != null ? Integer.parseInt(orientString) : ExifInterface.ORIENTATION_NORMAL;
        int rotationAngle = 0;
        if (orientation == ExifInterface.ORIENTATION_ROTATE_90) rotationAngle = 90;
        if (orientation == ExifInterface.ORIENTATION_ROTATE_180) rotationAngle = 180;
        if (orientation == ExifInterface.ORIENTATION_ROTATE_270) rotationAngle = 270;

        Matrix matrix = new Matrix();
        matrix.setRotate(rotationAngle, (float) resizedBitmap.getWidth() / 2, (float) resizedBitmap.getHeight() / 2);
        Bitmap rotatedBitmap = Bitmap.createBitmap(resizedBitmap, 0, 0, w, h, matrix, true);
        resizedBitmap.recycle();
        ByteArrayOutputStream bytes = new ByteArrayOutputStream();
        rotatedBitmap.compress(Bitmap.CompressFormat.JPEG, 90, bytes);

        thumbnailFile.createNewFile();
        FileOutputStream fo = new FileOutputStream(thumbnailFile);
        fo.write(bytes.toByteArray());
        fo.close();

        //new File(file).delete();  // Originalbild löschen

        return rotatedBitmap;
    }
}
} 
```

# arrays - 移动窗口的最小值/最大值可以在 O(N) 中实现吗？

> ID：12190184
> 
> 赞同：15
> 
> 时间：2012-08-30T05:01:30.753
> 
> 标签：arrays, algorithm, heap, max, min

我有输入数组 A

```
 A[0], A[1], ... , A[N-1] 
```

我想要返回 B 的函数 Max(T,A) 表示 A 上的最大值超过上一个大小为 T 的移动窗口，其中

```
 B[i+T] = Max(A[i], A[i+T]) 
```

通过使用最大堆来跟踪当前移动窗口 A[i] 到 A[i+T] 的最大值，该算法产生 O(N log(T)) 最坏情况。

我想知道有没有更好的算法？也许是 O(N) 算法

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-30T10:44:28.327

使用 Deque 数据结构可以实现 O(N)。它包含对（值；索引）。

```
at every step:

  if (!Deque.Empty) and (Deque.Head.Index <= CurrentIndex - T) then 
     Deque.ExtractHead;
  //Head is too old, it is leaving the window

  while (!Deque.Empty) and (Deque.Tail.Value > CurrentValue) do
     Deque.ExtractTail;
  //remove elements that have no chance to become minimum in the window

  Deque.AddTail(CurrentValue, CurrentIndex); 
  CurrentMin = Deque.Head.Value
  //Head value is minimum in the current window 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-30T09:51:40.833

它被称为 RMQ（范围最小查询）。其实我曾经写过一篇关于那个的文章（用c++代码）。见[http://attiix.com/2011/08/22/4-ways-to-solve-%C2%B11-rmq/](http://attiix.com/2011/08/22/4-ways-to-solve-%C2%B11-rmq/)

或者您可能更喜欢维基百科，[Range Minimum Query](http://en.wikipedia.org/wiki/Range_Minimum_Query)

准备好后，您可以获得任何给定范围的最大数量`O(1)`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-04-01T17:29:19.903

图像处理中有一个子领域称为数学形态学。您正在实施的操作是该领域的核心概念，称为*扩张*。显然，这个操作已经被广泛研究，我们知道如何非常有效地实现它。

这个问题最有效的算法是在 1992 年和 1993 年由 van Herk、Gil 和 Werman 独立提出的。该算法需要每个样本进行 3 次比较，与 的大小无关`T`。

几年后，Gil 和 Kimmel 进一步改进了算法，使每个样本只需进行 2.5 次比较。尽管该方法增加的复杂性可能会抵消较少的比较（我发现更复杂的代码运行得更慢）。我从未实现过这个变体。

所谓的 HGW 算法需要两个与输入大小相同的中间缓冲区。对于非常大的输入（数十亿个样本），您可以将数据分成块并逐块处理。

在排序中，您向前遍历数据，计算 size 块的累积最大值`T`。你倒着走也一样。这些中的每一个都需要对每个样本进行一次比较。最后，结果是这两个临时数组中每一个中一个值的最大值。对于数据局部性，您可以同时对输入进行两次传递。

我想你甚至可以做一个运行版本，其中临时数组是 length `2*T`，但实现起来会更复杂。

*   van Herk，“矩形和八边形内核上局部最小和最大滤波器的快速算法”，模式识别快报 13(7):517-521, 1992 ( [doi](https://doi.org/10.1016/0167-8655(92)90069-C) )

*   Gil, Werman，“计算二维最小值、中值和最大值滤波器”，IEEE Transactions on Pattern Analysis and Machine Intelligence 15(5):504-507，1993 ( [doi](https://doi.org/10.1109/34.211471) )

*   Gil, Kimmel，“高效膨胀、腐蚀、打开和关闭算法”，IEEE Transactions on Pattern Analysis and Machine Intelligence 24(12):1606-1617, 2002 ( [doi](https://doi.org/10.1109/TPAMI.2002.1114852) )

[（注意：从Code Review 上的这个相关问题](https://codereview.stackexchange.com/a/191008/151754)交叉发布。）

# jquery - 想要在用户单击时更改 iPad 中的按钮图像

> ID：12190185
> 
> 赞同：0
> 
> 时间：2012-08-30T05:01:32.187
> 
> 标签：jquery, html, css, ipad

我们知道 iPad 中不允许悬停效果，但我想在用户单击按钮时更改按钮图像。除了 iPad 和 iPhone 设备，下面的 css 工作正常。

```
.back-btn {
background: url("images/sprite.png") no-repeat scroll 0 0 transparent;
}
.back-btn:hover, .back-btn:active {
background: url("images/sprite.png") no-repeat scroll 0 -10px transparent;
} 
```

谢谢 AV

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T05:09:57.640

问题是你需要寻找`touchstart`事件让 iPad 识别它，否则你可以设置悬停事件。用一点浏览器嗅探-繁荣你应该很高兴。（jQuery 方面）

```
var ua = navigator.userAgent,
    event = (ua.match(/iPad/i)) ? "touchstart" : "hover";

$(".back-btn").bind(event, function(e) {
    $(this).css('background', 'url("images/sprite.png") no-repeat scroll 0 -10px transparent;');
}); 
```

[有关**html5 触摸事件**的更多信息，请点击此处。](http://www.html5rocks.com/en/mobile/touch/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T05:07:58.937

`:active`类仅适用于锚点，不适用于按钮。您可以使锚看起来像一个按钮，然后您可以使用此类进行操作。

看看[**这个例子**](http://jsfiddle.net/3JBaZ/)

# javascript - JavaScript 语言参考手册

> ID：12190186
> 
> 赞同：6
> 
> 时间：2012-08-30T05:01:33.540
> 
> 标签：javascript

是否有完整且最新且可下载的 JavaScript 语言参考手册！？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-30T05:02:29.267

最接近官方文档的是[ECMA 规范](http://www.ecma-international.org/publications/standards/Ecma-262.htm)。JavaScript 的实现者遵循这个规范。

然而，最广泛使用和渗透（阅读规范以快速参考可能令人生畏）的文档是[Mozilla 文档网络上的 JavaScript](https://developer.mozilla.org/en-US/docs/JavaScript)。它也有很多信息可以方便地在浏览器中使用 JavaScript。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-30T05:06:15.103

JavaScript 不是*一回事*，只有一个可能的手册。人们在 JavaScript 名称下将不同的东西放在一起：

*   ECMAScript[标准](http://www.ecma-international.org/publications/standards/Ecma-262.htm)
*   浏览器使用的 JavaScript 引擎的不同实现，它使用新的 API 扩展了 ECMA 标准
*   其他地方定义的各种 API，主要是在 W3C，例如 DOM、HTML5 API，以及人们放在 HTML5 保护伞下的其他部分
*   各种服务器端引擎，例如 Node.js，它们添加了自己的 API，以及与这些引擎一起工作的所有库
*   大量构建在浏览器提供的基本 JavaScript 支持之上的库和框架，如 React、Angular、jQuery ......

通常被认为是 JavaScript 的最佳参考确实是[Mozilla Developer Network](https://developer.mozilla.org/en-US/docs/JavaScript)。

# facebook - 用户通过手机登录的 fb 聊天应用程序中的 xmpp 身份验证失败

> ID：12190188
> 
> 赞同：0
> 
> 时间：2012-08-30T05:01:55.047
> 
> 标签：facebook, ios5, xcode4.2, xmppframework

我正在为我的 facebook 聊天应用程序使用 xmpp。在某些用户的身份验证失败中，那些通过移动设备登录/在 facebookChat（在浏览器中）显示移动图标的用户。所有其他帐户都经过身份验证并正常工作。如果您对此有任何想法，请帮助我。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T10:30:41.083

他可能不给权限

# django - 请求之间的 Form/ModelForm 实例

> ID：12190192
> 
> 赞同：2
> 
> 时间：2012-08-30T05:02:21.807
> 
> 标签：django, django-forms

我想编写一个自定义表单字段（也可能是小部件），但我不确定表单实例是如何在请求之间共享的。例如，如果我使用模型实例中的数据呈现表单，当我验证数据时该实例是否仍然可用？如果是这样，这是否意味着有另一个数据库命中以在请求之间再次查找模型？

同样，如果我编写了一个自定义字段，该字段接收要在其`__init__`方法中显示的数据列表，那么当用户发布数据时，该数据列表是否可用于验证？

如果有人能指出发生这种情况的 django 源代码的某些部分，那将*非常有帮助。*我一直在看[`models.py`](https://github.com/django/django/blob/master/django/forms/models.py),和from [`forms.py`](https://github.com/django/django/blob/master/django/forms/forms.py)，但我仍然不能 100% 确定它是如何工作的。[`fields.py`](https://github.com/django/django/blob/master/django/forms/fields.py)[`widgets.py`](https://github.com/django/django/blob/master/django/forms/widgets.py)[`django.forms`](https://github.com/django/django/tree/master/django/forms)

最终，我想要做的是有一个像这样工作的字段（关键部分是最后一行）：

```
class CustomField(ChoiceField):
    def __init__(self, data_dict, **kwargs):
        super(CustomField, self).__init__(**kwargs)
        self.data_dict = data_dict
        self.choices = data_dict.keys()
    def validate(self, value):
        if value not in self.data_dict:
            raise ValidationError("Invalid choice")
        else:
            return self.data_dict[value] 
```

该 data_dict 会在下一个请求时可用吗？如果我创建一个自定义`forms.Form`并使用 data_dict 对其进行初始化，下一个请求是否可用？（例如使用工厂方法或其他东西......）。

旁注：我这样做是因为我想（最终）使用类似 Bootstrap 的[typeahead](http://twitter.github.com/bootstrap/javascript.html#typeahead)我想将它传递给“漂亮的值”，然后我将其转换为服务器端（基本上，就像选择中的选项值可以有不同的提交值）。我过去曾使用客户端 javascript 完成此操作，但将其全部合并到表单字段中会很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T08:22:49.963

形式没有什么神奇之处。与 Django 中的其他所有内容（或几乎任何 Web 框架）一样，对象不会在请求之间持续存在，并且每次都需要重新实例化。这发生在表单处理的普通视图模式中：您为 POST 实例化一次，为 GET 实例化一次。如果您有与表单关联的数据，则每次都需要传入。

# cucumber - 如何同时使用黄瓜在不同的浏览器实例上运行多个测试

> ID：12190196
> 
> 赞同：0
> 
> 时间：2012-08-30T05:02:46.940
> 
> 标签：cucumber

我正在使用 Cucumber 进行测试。有什么方法可以在浏览器（多个实例）上同时运行测试脚本，这样我就可以节省时间。我正在使用 MAC OS X 10.7.4。提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T19:18:36.177

见 gradle

测试 { maxParallelForks = 500 包括 'Run*.class' }

# android - 横向模式下没有键盘的EditText

> ID：12190198
> 
> 赞同：0
> 
> 时间：2012-08-30T05:03:11.110
> 
> 标签：android, keyboard, landscape

我打算显示一个带有 EditText 的弹出窗口，一旦显示键盘可以自动激活：

```
public void showPopup(View view) // a button invoke
{
    LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View content = inflater.inflate(R.layout.popup, null);
    PopupWindow pw = new PopupWindow(content, LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT, true);
    pw.setBackgroundDrawable(new BitmapDrawable());
    pw.showAtLocation(view, Gravity.TOP, 0, 0);
    EditText editText = (EditText) findViewById(R.id.edit_message);
    (new Handler()).post(new Runnable() {
        public void run() {
            InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
            imm.toggleSoftInput(InputMethodManager.SHOW_IMPLICIT, 0);
        }
    });
} 
```

popup.xml 是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="horizontal"
android:layout_width="fill_parent"
android:layout_height="fill_parent"

>
<EditText android:id="@+id/edit_message"
android:layout_width="0dp"
android:layout_height="wrap_content"
android:text="Hello Android!!"
android:hint="Filling in it!!"
android:layout_weight="1"
android:selectAllOnFocus="true"
android:focusable="true"
android:focusableInTouchMode="true"
/>
<Button
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:text="Go!" 

/>
</LinearLayout> 
```

它在纵向模式下运行良好，但在添加如下代码后在横向模式下不起作用：

```
protected void onResume() {
    if(getRequestedOrientation()!=ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE){
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
    }
} 
```

请问有人可以提供一些解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T05:07:42.493

在你的 popup.xml 文件中编辑

```
 <LinearLayout............
  .....
  android:focusable="true"
 android:focusableInTouchMode="true" ... 
```

* * *

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:orientation="horizontal"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:focusable="true"
 android:focusableInTouchMode="true"
 >
 <EditText android:id="@+id/edit_message"
 android:layout_width="0dp"
 android:layout_height="wrap_content"
 android:text="Hello Android!!"
 android:hint="Filling in it!!"
 android:layout_weight="1"
 android:selectAllOnFocus="true"
 android:focusable="true"
 android:focusableInTouchMode="true"
 />
 <Button
 android:layout_width="wrap_content"
 android:layout_height="wrap_content"
 android:text="Go!" 
 />
 </LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T05:07:13.823

在 EditText requestFocus 中添加您的 xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="horizontal"
android:layout_width="fill_parent"
android:layout_height="fill_parent"

>
<EditText android:id="@+id/edit_message"
android:layout_width="0dp"
android:layout_height="wrap_content"
android:text="Hello Android!!"
android:hint="Filling in it!!"
android:layout_weight="1"
android:selectAllOnFocus="true"
android:focusable="true"
android:focusableInTouchMode="true"
><requestFocus/></EditText>
<Button
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:text="Go!" 

/>
</LinearLayout> 
```

# javascript - .apply 和 .call 有什么区别

> ID：12190199
> 
> 赞同：4
> 
> 时间：2012-08-30T05:03:13.507
> 
> 标签：javascript, jquery, javascript-objects

我发现自己经常使用带有常规 js 对象的 jQuery 对象；我试图弄清楚如何在适当的时候在我的脚本中更频繁地使用 .call 和 .apply 。我一直在测试代码，看看它是如何工作的。

但是，当我在我知道有 jQuery 的网站上的 firebug 中运行下面的代码（实际上只是隐藏了页面上的所有 div）时，我得到了不同的结果；我想知道它是 jQuery 的版本还是这个代码只是“错误”我要破译为什么 .call 总是有效但 .apply 不认为它会根据下面的代码反过来

```
var myApp = {} // instantiate an empty objct
myApp.hide = function (whatever) {
   that = whatever
   $(that).hide()
}
var Numbers = function (object) {
this.object = object;
}

Numbers.prototype.div = $('div');
var numbers = new Numbers();
numbers.div
myApp.hide.call(numbers, numbers.div)
myApp.hide.apply(numbers, numbers.div) 
```

当我使用 .call 或 .apply 触发上面的代码时，我会根据站点得到不同的结果。每个有 jquery .call 的网站都可以工作，但对于一些网站，比如 jQuery.com 和 twitter，两者都可以使用 .apply 和 .call 工作，但其他网站，比如纽约时报和 Netflix 只有 .call 工作 - 我猜它的版本导致差异的 jQuery 但有点困惑，因为 numbers.div 总是返回页面上所有 div 元素的数组，所以我认为这会一直有效。感谢任何解释，因为我仍在掌握 .call 和 .apply 的概念 - 我总是参考 Douglas Crockford 的书，但说实话，他并没有详细介绍 .apply 和 .call

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T05:08:33.353

`.apply`需要您将参数作为数组传递。

所以

```
myApp.hide.call(numbers, numbers.div) 
```

应该与

```
myApp.hide.apply(numbers, [numbers.div]) 
```

但是，在您的`myApp.hide`函数中，没有，因此or`this`的第一个参数可以是其他任何参数，这没关系。`.call``.apply`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T05:18:37.633

call / apply的**力量**实际上在于您希望**它**在被调用函数中的上下文。第一个参数决定了它将是什么。它们是 Javascript 函数如何调用的一个很好的例子，函数何时/何地被调用并不重要，但*如何*. （所以在你的例子中，*这*将是`numbers`）

两者都`.apply()`可以`.call()`工作，它们中的任何一个的第二个参数实际上是可选的。

就像每个人都在说它们两者之间唯一真正的区别是您是否要将参数/参数作为数组传递（数字数组 []，而不是关联数组 {}）。

`.apply(contextYouWant, [oneParam, twoParam, etc]);`

或者在 的实例中`.call()`，您单独传递参数。

`.call(contextYouWant, oneParam, twoParam, etc);`

# java - 在 Java 中向 Actor 发送 PoisonPill

> ID：12190202
> 
> 赞同：11
> 
> 时间：2012-08-30T05:03:38.753
> 
> 标签：java, scala, actor, akka

我开始通过将现有的 Java SE 应用程序迁移到 Akka 来学习它。我正在使用 Akka 2.0.3。

有一次我需要通过消息队列发送一个 PoisonPill 来阻止演员。我的演员是这样实例化的：

```
ActorRef myActor = actorSystem.actorOf(new Props(MyActor.class), "myActor"); 
```

我尝试向其发送 PoisonPill：

```
myActor.tell(PoisonPill.getInstance()); 
```

但我收到以下编译器错误：

```
'tell(java.lang.Object)' in 'akka.actor.ActorRef' cannot be applied to '(akka.actor.PoisonPill$)' 
```

我究竟做错了什么？我在 Idea 中运行 Java 1.6.0_26（我也在 E​​clipse 中学习了一辈子）。

* * *

编辑：

我也尝试过文档中的这种方法，但是我得到了相同的编译器错误，并且 Idea 警告我 Actors 类已被弃用。

```
import static akka.actor.Actors.*;
extractionActor.tell(poisonPill()); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-30T13:08:54.757

请阅读 Akka 文档，我们花了很多时间来创建它：

> **毒丸**
> 
> 您还可以向actor发送 akka.actor.PoisonPill 消息，该消息将在处理消息时停止actor。PoisonPill 作为普通消息排队，将在已在邮箱中排队的消息之后处理。
> 
> 像这样使用它：
> 
> ```
>  import static akka.actor.Actors.*;
>    myActor.tell(poisonPill()); 
> ```

*   [http://doc.akka.io/docs/akka/2.0.3/java/untyped-actors.html#PoisonPill](http://doc.akka.io/docs/akka/2.0.3/java/untyped-actors.html#PoisonPill)

自 2.0.2 起，上述方法已被弃用，这是新的 API：

```
ActorRef ref = system.actorOf(new Props(JavaAPITestActor.class));
ref.tell(PoisonPill.getInstance()); 
```

以上是在我的机器上编译的，所以你可能在 IDEA 中遇到了一些问题？尝试用 javac 编译它，看看是否可行。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-10-29T21:35:11.980

正如我对上述评论的回复中提到的，这在 Idea 或使用 gradle 编译时不起作用。这实际上是一个编译错误，因为发送者 ActorRef 是必需的。我知道以前的答案很旧，我不确定这是否是 api 的变化，所以对于任何有类似问题的人，你应该使用：

```
target.tell(PoisonPill.getInstance(), ActorRef.noSender()); 
```

参考见：[http ://doc.akka.io/docs/akka/snapshot/java/lambda-actors.html#PoisonPill](http://doc.akka.io/docs/akka/snapshot/java/lambda-actors.html#PoisonPill)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-25T19:52:01.700

**25.03.2019 更新**

@Viktor Klang 和 @yash.vyas 的好答案有点过时了。以下是 Scala 2.12.8 和 JDK8 (1.8.0_172) 的当前工作*语法*：

```
val accountB = context.actorOf(Props[BankAccount], "accountB")
accountB ! PoisonPill 
```

你也可以写：

```
...
accountB ! PoisonPill.getInstance 
```

tell-Method 的默认调用也有效：

```
...
accountB.tell(PoisonPill.getInstance,ActorRef.noSender) 
```

# image - 免费在线图表服务？

> ID：12190203
> 
> 赞同：1
> 
> 时间：2012-08-30T05:03:46.337
> 
> 标签：image, charts

我正在寻找一种类似于已弃用的 Google 图像图表 API 的服务。我需要创建图表并通过电子邮件发送。因此，生成的图表必须是图像（而不是某种交互式 javascript 对象），这一点很重要。该服务还需要是免费的。

你知道有这样的服务吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T05:18:20.100

我不知道这样的 API，但这是我可以如何进行的，如果我想做基于画布的绘图，我会使用[node-canvas从图形生成 pure。](https://github.com/LearnBoost/node-canvas)

这是[一篇](http://thechangelog.com/post/1489735759/node-canvas-render-and-stream-html5-canvas-using-node-js)关于它的文章。

如果我想使用像[Rickshaw](http://code.shutterstock.com/rickshaw/)这样的 SVG 库，我会使用[phamtomJS](http://phantomjs.org/)从SVG 画布[生成图片。](http://code.google.com/p/phantomjs/wiki/QuickStart#Rendering)

# php - 使用 PHP 在非常大的 XML 提要中搜索数据

> ID：12190205
> 
> 赞同：0
> 
> 时间：2012-08-30T05:03:48.157
> 
> 标签：php, xml

[http://www.topbuy.com.au/tbcart/tbadmin/datafeed/shoppingcom.xml](http://www.topbuy.com.au/tbcart/tbadmin/datafeed/shoppingcom.xml)

这是我的提要网址，它永远不会在浏览器中打开或需要数小时才能打开。

我想创建 PHP 页面，我想在我的 PHP 页面中放置一个搜索框（我将放置的位置），一旦点击提交，我的 PHP 代码应该搜索并显示相应的产品价格。

那么我应该为此或任何其他建议使用 SimpleXML 吗？

```
<Products>
<Product><MPN><![CDATA[INK-PE-009]]></MPN><Manufacturer><![CDATA[Epson]]></Manufacturer><ProductName><![CDATA[Epson T009 Colour Compatible Inkjet Cartridge]]></ProductName><ProductURL><![CDATA[http://www.topbuy.com.au/tbcart/pc/Epson-T009-Colour-Compatible-Inkjet-Cartridge-p3343.htm?utm_source=TopBuy_ShoppingCom&utm_content=&utm_medium=cpc&dismode=1&utm_campaign=TBDF-XX10421]]></ProductURL><ProductType><![CDATA[Compatible Ink Cartridges]]></ProductType><ImageURL><![CDATA[http://www2.topbuy.com.au/tbcart/pc/catalog/General/TBDF-XX10421_1.jpg]]></ImageURL><Price>4.09</Price><OriginalPrice>9</OriginalPrice><Category><![CDATA[Consumables->Compatible Ink Cartridges]]></Category><ProductDescription><![CDATA[$4.05 Cash Price see store for detailsRelated Brand  EpsonOriginal Cartridge Equivalent T009Related Printers STYLUS 1270, STYLUS 1280, STYLUS 1290, STYLUS 3300C, STYLUS PHOTO 1270, STYLUS PHOTO 1290, STYLUS PHOTO 1290 silverThis cartridge works in the following printers  Epson Stylus Photo 1270/1280Please check the name (code) of the cartridge in your printer before ordering to ensure that it matches the name of the cartridges you are ordering from us. In some instances a printer can take more than one cartridge type and ...]]></ProductDescription><Stock>Y</Stock><ShippingCost>10</ShippingCost><StockDescription>No.1 OZ SUPERSTORE AUS WARRANTY FAST SHIPPING</StockDescription><Condition>Brand New</Condition></Product>
<Product><MPN><![CDATA[INK-PE-013]]></MPN><Manufacturer><![CDATA[Epson]]></Manufacturer><ProductName><![CDATA[Epson T013 Black Compatible Inkjet Cartridge]]></ProductName><ProductURL><![CDATA[http://www.topbuy.com.au/tbcart/pc/Epson-T013-Black-Compatible-Inkjet-Cartridge-p3345.htm?utm_source=TopBuy_ShoppingCom&utm_content=&utm_medium=cpc&dismode=1&utm_campaign=TBDF-XX10423]]></ProductURL><ProductType><![CDATA[Compatible Ink Cartridges]]></ProductType><ImageURL><![CDATA[http://www2.topbuy.com.au/tbcart/pc/catalog/General/TBDF-XX10423_1.jpg]]></ImageURL><Price>2.09</Price><OriginalPrice>5</OriginalPrice><Category><![CDATA[Consumables->Compatible Ink Cartridges]]></Category><ProductDescription><![CDATA[$2.07 Cash Price see store for detailsRelated Brand  EpsonOriginal Cartridge Equivalent T013Related Printers STYLUS COLOR 480, STYLUS COLOR 580, STYLUS COLOR C20, STYLUS COLOR C40, STYLUS COLOUR 480, STYLUS COLOUR 580, STYLUS COLOUR C20UX, STYLUS COLOUR C40SX, STYLUS COLOUR C40UXThis cartridge works in the following printers  Epson Stylus Colour 480/580Please check the name (code) of the cartridge in your printer before ordering to ensure that it matches the name of the cartridges you are ordering from us. In some instances a ...]]></ProductDescription><Stock>Y</Stock><ShippingCost>10</ShippingCost><StockDescription>No.1 OZ SUPERSTORE AUS WARRANTY FAST SHIPPING</StockDescription><Condition>Brand New</Condition></Product> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T07:05:13.453

我建议使用[XMLReader](http://php.net/manual/en/book.xmlreader.php)类，因为它不需要一次将完整的 xml 加载到内存中。

缺点是您必须手动实现搜索和过滤，对于简单的名称搜索，您可以执行以下操作：

```
$reader = new XMLReader;
$reader->open('shoppingcom.xml');

while ($reader->read()) {
    if ($reader->name == 'Product') {
        $productxml = $reader->readOuterXML();
        while ($reader->read()) {
            if ($reader->name == 'ProductName' && stristr($reader->readInnerXML(), 'adidas')) {
                print $productxml;
                // now it contains the <Product>...</Product> fragment of the xml
                // you can use simplexml on this fragment, or just add an if for Prize node
            }
            if ($reader->name == 'Product' && $reader->nodeType == XMLReader::END_ELEMENT) {
                break;
            }
        }
    }
} 
```

尽管如此，示例提要是可靠的`64M`，如果您为此创建一个数据库，该数据库可以索引您要搜索的字段并返回 xml 片段，您可能会获得更好的实时搜索结果，因此您不必将所有内容标准化为表.

# jboss - 为什么我的 JBoss 5.1.0.GA 缺少 Web 控制台标签？

> ID：12190207
> 
> 赞同：2
> 
> 时间：2012-08-30T05:04:08.897
> 
> 标签：jboss, jboss5.x

我知道 JBoss 服务器 Web 控制台页面在屏幕左侧有一些标签。为什么我的 JBoss 5.1.0.GA 缺少 Web 控制台标签？见截图；

![在此处输入图像描述](../Images/de89496abeada9f97bb0d15786553ad7.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T21:06:50.657

用于显示 Web 控制台左侧的是 Java Applet。也许您的浏览器中没有 Java 插件？

如果您使用 Firefox 或 Chrome，您可以通过在地址栏中输入以下命令来检查它：`about:plugins`.

# ldap - LDAP中使用哪个参数进行身份验证

> ID：12190208
> 
> 赞同：7
> 
> 时间：2012-08-30T05:04:35.590
> 
> 标签：ldap

在 LDAP 身份验证的情况下，通常用于**身份验证的****参数**是什么。我想使用 DN 对于通过 ldap 登录的用户来说会很头疼，因为它太大而无法记住。使用*uid*或*sAMAccountName*进行身份验证的选项如何，在我的实现中，我检索相应 uid 或 sAMAccountName 的 dn 并继续进行身份验证。

 ****我走对路了吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-30T05:13:18.227

在 LDAP 中，可以对*连接*或*会话*进行身份验证。当 LDAP 客户端与 LDAP 目录服务器建立新连接时，该连接的授权状态为*匿名*。LDAP 客户端可以使用 BIND 请求来请求更改授权状态。

BIND 请求有两种形式：简单和 SASL。Simple 使用专有名称和密码，SASL 使用一种*机制*选择，例如 PLAIN、LOGIN、CRAM-MD5、DIGEST-MD5、GSSAPI 和 EXTERNAL - 除了 GSSAPI 和 EXTERNAL 之外，所有这些机制都太弱，无法用于生产场景或关键任务领域。

要使用简单的 BIND，请构造一个 BIND 请求并将其传输到 LDAP 目录服务器。LDAP 目录服务器将使用包含结果代码的 BIND 响应进行响应。结果代码是一个整数，任何其他零都表示 BIND 请求失败。如果结果代码为零，则 BIND 请求成功并且会话授权状态已更改为 BIND 请求中使用的专有名称的状态。

同一连接/会话上的每个后续 BIND 请求都会将授权状态设置为*匿名*，并且同一连接/会话上的每个后续成功 BIND 请求都会将授权状态设置为与身份验证 ID 关联的授权状态，即在简单 BIND 的情况下是专有名称，但在使用 SASL 的地方可能完全是其他东西 - 现代专业质量服务器可以将传入名称映射到不同的 DN。

无论使用哪种语言，构造一个 BIND 请求，将其传输到服务器，并解释响应。

更新：

如果不知道可分辨名称，或者太麻烦（通常情况下，Web 应用程序用户不知道他们是如何进行身份验证的，也不关心他们是否知道），LDAP 应用程序应该搜索该用户的目录。成功的搜索响应始终包含可分辨名称，然后在简单的 BIND 中使用该名称。

搜索至少包含以下内容：

*   基础对象：优于用户的专有名称，例如，`dc=example,dc=com`
*   范围：基础级别、基础以下一级或基础以下的子树。例如，如果用户位于 下属`ou=people,dc=example,dc=com`，则使用基础对象`ou=people,dc=example,dc=com`和`one-level`. 这些搜索参数可查找以下条目：`uid=user1,ou=people,dc=example,dc=com`
*   过滤器：缩小返回给客户端的可能搜索结果的范围，例如`(objectClass=inetOrgPerson)`
*   请求的属性列表：从条目返回给客户端的属性。在这种情况下， use `1.1`，这意味着*没有属性*并返回 DN（可分辨名称），这是简单 BIND 所需的全部内容。

### 也可以看看

关于[此处的链接](https://stackoverflow.com/users/810802/terry-gardner)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-30T05:39:25.113

LDAP 服务器只理解 LDAP 查询；他们没有你我习惯的“用户名”。

对于 LDAP，要对某人进行身份验证，您需要在 LDAP 中发送该人（或实体）条目的*专有名称；*连同他们的密码。

既然您提到了*sAMAccountName*，我假设您正在使用 Active Directory。Active Directory 允许匿名绑定——这意味着您无需提供任何凭据即可连接到它；但不能在不提供凭据的情况下进行任何查找。

如果您使用的是`python-ldap`Cython（而不是 IronPython，它可以访问使此过程非常容易的各种 .NET API）；然后你按照这些步骤。

通常，您使用对树具有适当权限的预设用户，并首先使用该用户连接到目录，*然后*使用该用户的访问权限进行其余的身份验证过程；通常是这样的：

1.  使用预设用户连接到 AD。
2.  使用预设用户的凭据查询活动目录，并根据用户将在表单中作为“用户名”输入的*sAMAccountName搜索可分辨名称。*
3.  尝试使用步骤 2 中的可分辨名称以及用户在其表单中输入的密码再次连接到 Active Directory。
4.  如果此连接成功，则用户通过身份验证。

所以你需要两个主要的东西：

1.  登录属性（这是 LDAP 理解的“用户名”）
2.  为您的用户获取信息的 LDAP 查询

以下是一些可以为您执行此操作的粗略代码：

```
AD_USER = 'your super user'
AD_PASSWORD = 'your super user password'

AD_BIND_ATTR = 'userPrincipalName' # this is the "login" for AD
AD_URL = "ldap://your-ad-server"
AD_DN = "DC=DOMAIN,DC=COM"
AD_LOGIN_ATTR = 'sAMAccountName' # this is what you user will enter in the form
                                 # as their "login" name,
                                 # this is what they use to login to Windows

# A listing of attributes you want to fetch for the user
AD_ATTR_SEARCH = ['cn',
                  'userPrincipalName',
                  'distinguishedName',
                  'mail',
                  'telephoneNumber','sAMAccountName']

def _getbinduser(user):
    """ This method returns the bind user string for the user"""
    user_dn = AD_DN
    login_attr = '(%s=%s)' % (AD_LOGIN_ATTR,user)
    attr_search = AD_ATTR_SEARCH

    conn = ldap.initialize(AD_URL)
    conn.set_option(ldap.OPT_REFERRALS,0)
    conn.set_option(ldap.OPT_PROTOCOL_VERSION,3)
    try:
        conn.bind(AD_USER,AD_PASSWORD)
        conn.result()
    except:
        exceptionType, exceptionValue, exceptionTraceback = sys.exc_info()
        # Exit the script and print an error telling what happened.
        sys.exit("LDAP Error (Bind Super User)\n ->%s" % exceptionValue)
    try:
        result = conn.search_s(user_dn,
                               ldap.SCOPE_SUBTREE,
                               login_attr, attr_search)
    except:
        exceptionType, exceptionValue, exceptionTraceback = sys.exc_info()
        # Exit the script and print an error telling what happened.
        sys.exit("LDAP Error (Search)\n ->%s" % exceptionValue)

    # Return the user's entry from AD, which includes
    # their 'distinguished name'
    # we use this to authenticate the credentials the
    # user has entered in the form
    return result[0][1]

def authenticate(user,password):

    bind_attr = AD_BIND_ATTR
    user_dn = AD_DN
    login_attr = '(%s=%s)' % (AD_LOGIN_ATTR,user)
    data = _getbinduser(user)

    if len(data) == 1:
        return None

    # Information we want to return from the directory
    # for each user, season to taste.

    info = {}
    info['name'] = data['cn'][0]
    info['email'] = data['mail'][0]
    try:
        info['phone'] = data['telephoneNumber'][0]
    except KeyError:
        info['phone'] = 'Not Available'

    conn = ldap.initialize(Config.AD_URL)
    conn.set_option(ldap.OPT_REFERRALS,0)
    conn.set_option(ldap.OPT_PROTOCOL_VERSION,3)

    try:
        # Now we have the "bind attribute" (LDAP username) for our user
        # we try and connect to see if LDAP will authenticate
        conn.bind(data[bind_attr][0],password)
        conn.search(user_dn,ldap.SCOPE_SUBTREE,login_attr,None)
        conn.result()
        return info
    except (ldap.INVALID_CREDENTIALS,ldap.OPERATIONS_ERROR):
        return None 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T12:40:20.257

特里出色评论的一个小扩展。如果您将所有用户存储在 DIT 的同一部分，并使用相同的属性来识别他们，您可以以编程方式构造 DN，而不是搜索它。****

# php - 动态获取 Facebook 应用程序的用户访问令牌

> ID：12190209
> 
> 赞同：2
> 
> 时间：2012-08-30T05:04:51.777
> 
> 标签：php, facebook, facebook-php-sdk, facebook-access-token

我写了一篇[使用 PHP 将照片上传到 Facebook 粉丝页面](http://www.webspeaks.in/2011/12/upload-photos-to-facebook-fan-page.html)的文章。该代码工作正常，但只有一个问题。Facebook 应用程序的**用户**访问令牌是硬编码的。请参阅代码中的以下行：

```
//It can be found at https://developers.facebook.com/tools/access_token/
$access_token = '<Your access token>'; 
```

我无论如何都找不到通过 PHP 动态获取此**用户**访问令牌的方法。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T05:52:48.953

好吧，如果你必须为每个用户动态生成accesstoken，你需要动态获取权限，请查看这个页面：[权限](http://developers.facebook.com/docs/authentication/permissions/)，仔细查看manage_pages权限，还要查看access_token术语

然后您将通过生成此登录 url 来获得管理页面的权限，用户将通过该登录 url 登录到您的 pageapp：

```
$loginUrl = $facebook->getLoginUrl(array('scope' => 'manage_pages','redirect_uri'=>'http://you app pages link')); 
```

在这里，您应该在范围内放置“manage_pages”和您需要的其他权限，然后您应该通过以下方式获取您的 access_token，

```
$access_token = $facebook->getAccessToken(); 
```

# javascript - javascript设置对象分割高度失败

> ID：12190212
> 
> 赞同：0
> 
> 时间：2012-08-30T05:05:06.117
> 
> 标签：javascript, css, html

我倾向于划分`width = window.innerWidth; height = width/5;`
1/5 实际上是背景图像的高度/重量比。所以我写了如下代码。

HTML：

```
<!DOCTYPE HTML>
<HTML>
<HEAD>
    <TITLE>FORM</TITLE>
    <META CHARSET="gb2312" />
    <LINK REL="stylesheet" HREF="css/style.css" />
    <SCRIPT TYPE="text/javascript">
        function onload(){

            //innerWidth of the window 
            var window_innerWidth;
            //height of DIV#head
            var head_height;
            //DIV#head
            var head_div;
            //btn
            var left_btn;

            window_innerWidth=window.innerWidth;
            head_height=window_innerWidth*120/600;
            head_div=document.getElementById("head");
            left_btn=document.getElementById("head_left_btn");
            right_btn=document.getElementById("head_right_btn");

            if(head_div&&left_btn){
                head_div.width=window_innerWidth;
                head_div.height=head_height;

                alert(window_innerWidth+ " " +head_height + " " + head_div.height 
                    + " " + left_btn.height);

            }

        }
    </SCRIPT>

</HEAD>
<BODY onload="onload();">
    <DIV ID="head">
        <BUTTON ID="head_left_btn" class="btn_hide" TYPE="button"></BUTTON>
        <BUTTON ID="head_right_btn" class="btn_hide" TYPE="button"></BUTTON>
    </DIV>

</BODY>
</HTML> 
```

CSS：

```
#head{

background-image: url('../img/basic_.jpg');
background-repeat: no-repeat;
-webkit-background-size: cover;
-moz-background-size: cover;
background-size: cover;
}

.btn_hide{

width: 49.5%;
height: 100%;
opacity: 0.5;
} 
```

我用作背景的img是600px*120px

我正在做的是尝试制作一个头部标签。问题是，虽然分割的宽度与 javascript 正确，但高度却没有。尽管 alert 的输出显示高度的值是正确的，但页面的显示却不是。有人可以在这里帮忙吗？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T05:11:01.950

尝试这个：

```
head_div.style.height = head_height + "px"; 
```

# facebook - 停止工作：带有方法的FB.ui：'feed'突然停止工作

> ID：12190213
> 
> 赞同：0
> 
> 时间：2012-08-30T05:05:17.443
> 
> 标签：facebook, feed, fb.ui

这个问题类似于：[Facebook Error 191 on canvas app using FB.ui() for the 'feed' dialog (之前工作过，上周停止工作)](http://facebook.stackoverflow.com/questions/9934470/facebook-error-191-on-canvas-app-using-fb-ui-for-the-feed-dialog-worked-bef)从未得到回答。

从今天开始，在用户点赞页面并参加比赛后，出现的分享对话框停止工作并给出：

```
API Error Code: 191 
API Error Description: The specified URL is not owned by the application
Error Message: redirect_uri is not owned by the application. 
```

当以管理员身份登录并且其他用户发生错误时。此选项卡已经运行良好一段时间了。我已经和我的一个同事确认了这一点。他们确实对应用程序的另一部分进行了更改（昨天和今天），但共享仍然有效，直到今天下午。他们没有更改生成对话框的部分。

标签是：[https ://www.facebook.com/MedjoolDates/app_355398587864294](https://www.facebook.com/MedjoolDates/app_355398587864294)

任何人有任何见解？随意使用“取消”而不是共享和伪造数据来注册，如果您愿意，可以与页面不同。

提前致谢。

大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T08:24:55.930

同样的问题，这里的 Facebook 开发人员发布了一个错误：

[https://developers.facebook.com/bugs/273845842724431](https://developers.facebook.com/bugs/273845842724431)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T07:05:12.437

没有看到你的代码就帮不上什么忙。

要检查的一件事，确保您的 redirection_uri 与您在 FB 注册的域完全相同，并且包含尾随 / 即[http://www.myurl.com/](http://www.myurl.com/)而不是[http://www.myurl.com](http://www.myurl.com)

我无法回答它为什么会改变，但我之前已经通过上述更改修复了该错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T07:43:15.807

我有同样的问题。我正在开发一个具有 FB.ui 提要功能的新应用程序，昨天运行良好，今天它给出了与 OP 相同的错误。

回去检查具有相同功能的 > 1 岁应用程序；同样的错误。我看不到任何其他解决方案，除了 FB 开发团队更改了某些内容并且没有发出通知。

# r - 在栅格数据文件中查找边界点

> ID：12190215
> 
> 赞同：2
> 
> 时间：2012-08-30T05:05:25.433
> 
> 标签：r, raster, google-static-maps, ggmap

所以，我有中心点和缩放级别。
我必须在地图上绘制一些点。

地图存储在栅格数据文件中，并显示在 R 的小部件上。

问题是当收到一个点时，我需要检查它是否在这个光栅文件的数据中。
如果该点在光栅文件中，那么我可以安全地绘制它。
如果没有，那么我需要加载另一个包含该点的光栅文件，然后绘制该点。

R的`raster`包有一个名为的函数`as.data.frame`，它将栅格数据加载到数据框中。

那么，是否有可能找出四个角上的点（纬度和经度）？我在正确的轨道上吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T05:40:14.973

如果您的数据属于 RasterLayer 类，`extent`则将为您提供栅格的范围和`xmin`' `min`，`ymax`并`xmax`访问各种插槽。

例如

```
# create a dummy raster
r1 <- raster(nrows=108, ncols=21, xmn=0, xmx=10)
r1[] <-1

extent(r1)
## class       : Extent 
## xmin        : 0 
## xmax        : 10 
## ymin        : -90 
## ymax        : 90 
```

您可以使用访问各种插槽

```
xmin(r1)
## [1] 0
xmax(r1)
##[1] 10
ymin(r1)
## [1] -90
ymax(r1)
## [1] 90 
```

如果您的数据是 a `SpatialGridDataFrame`then`bbox`将返回边界框

```
.grid <- as(r1,'SpatialGridDataFrame')

bbox(.grid)
##    min max
## s1   0  10
##  2 -90  90 
```

## 我的 xy 坐标是否在栅格边界内

您可以使用它`cellFromXY`来查找单元格，如果它在文本之外，`id`它将返回`NA`

例如

```
 # some data
 .points <- rbind(c(1,1),c(-4,1))
 # the first point lies within the raster, the second not

 # cell from XY will tell you this.
 cellFromXY(r1,.points)
 ## [1] 1116   NA 
```

## 编辑ggmap

如果你有一张由 获取的地图`get_map`，它是一个对象，如果*没有你的帮助*`ggmap`，它将无法与包一起使用。`raster`

 *您可以获得边界框作为`bb`属性。

```
 hdf <- get_map()
  attr(hdf,'bb')
##    ll.lat    ll.lon   ur.lat    ur.lon
## 1 29.38048 -95.80204 30.14344 -94.92313 
```

一个从 ggmap 对象创建 RasterStack 的辅助函数

```
ggmap_rasterlayer <- function(map){
  map_bbox <- attr(map, 'bb') 
  .extent <- extent(as.numeric(map_bbox[c(2,4,1,3)]))
  my_map <- raster(.extent, nrow= nrow(map), ncol = ncol(map))
  rgb_cols <- setNames(as.data.frame(t(col2rgb(map))), c('red','green','blue'))
  red <- my_map
  values(red) <- rgb_cols[['red']]
  green <- my_map
  values(green) <- rgb_cols[['green']]
  blue <- my_map
  values(blue) <- rgb_cols[['blue']]
  stack(red,green,blue)

}

my_map <- ggmap_rasterlayer(hdf) 
```*

# c - 按 home 或 end 时从 getchar 获取大写 O

> ID：12190216
> 
> 赞同：3
> 
> 时间：2012-08-30T05:05:38.287
> 
> 标签：c, linux, getchar

我在我的 C 代码中使用它：

```
system("stty -echo -icanon"); 
```

这是家庭作业的一部分，但这个特定的部分是我正在做的超出作业要求的事情。

我们正在实现一个 shell，我们已经得到了一堆代码来开始。该代码不使用 ncurses（如果可以的话，我会使用它）并且更改它需要重写大量提供的代码。

当我按我的`HOME`or`END`键时，我得到一个大写 O（在 Open 中是一个 o），然后是`HOME`and`END`键。我是`getchar()`用来获取角色的。

似乎只有这两个键可以做到这一点，但我不确定。`stdout`如果提供的系统函数调用是唯一不同的东西（我们也设置为非阻塞，但这不重要），我不是 100% 。

我真的很困惑，我想实现 END 和 HOME 键，因为我经常使用它们。

如果这不是很多信息，我很抱歉。我不太了解，`system`无法真正理解 -echo 和 -icanon 对 stty 的影响。我已经查看了手册页，但我仍然无法弄清楚。

**编辑**

从亚历克斯布朗的回答中，我确认我得到了转义字符。我有类似以下的内容（在错误的伪代码中）：

```
while (TRUE) 
    ch = getchar()
    switch (ch)
        case HOME:
        case END:
            don't print anything...
            break

        default:
            printf(ch);
            break 
```

所以它从转义序列中打印出 O ，而不是 [ （我有`0x48`for`HOME`和`0x46`for `END`）。仍然为如何获得真正的密钥代码感到困惑......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T07:13:33.997

对于控制台应用程序，诸如`Home`和之类的键`End`通常作为转义序列传输。确切的顺序取决于您使用的终端程序及其配置方式。该信息传统上存储在 termcap/terminfo 中，ncurses 根据您的终端类型从那里查找它。

Gnome 终端发送：

*   `ESC` `O` `H`( `0x1b 0x4f 0x48`) 为`Home`和
*   `ESC` `O` `F`( `0x1b 0x4f 0x46`) 为`End`.

KDE Konsole 和 xterm 发送：

*   `ESC` `[` `H`( `0x1b 0x5b 0x48`) 为`Home`和
*   `ESC` `[` `F`( `0x1b 0x5b 0x46`) 为`End`.

如果您读取一个`ESC`字符后跟`[`或`O`，您将需要读取一个附加字符以确定按下了哪个键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T05:16:31.247

终端（以及您的应用程序）接收许多元字符（例如箭头键、功能键和 home、end 等），作为转义字符 - 转义码后跟一个或多个字节值。由于每个字节都是由单独的 get char 调用接收的，这很可能是您正在经历的。我不知道您为什么将转义字符视为“O”。

# vb.net - log4net 动态 LogFileLocation

> ID：12190226
> 
> 赞同：1
> 
> 时间：2012-08-30T05:06:28.343
> 
> 标签：vb.net, log4net

我在 web.config 中有如下的日志文件位置。

```
<appSettings>
    <add key="LogPath" value="D:\Service\"/>
</appSettings> 
```

我在 web.config 中有 log4net 配置，如下所示

```
<configSections>
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net"/>
</configSections>
<log4net debug="true">
    <appender name="RollingLogFileAppender" type="log4net.Appender.RollingFileAppender">
        <file type="log4net.Util.PatternString" value="%property{LogName}"/>
        <appendToFile value="true"/>
        <rollingStyle value="Size"/>
        <maxSizeRollBackups value="10"/>
        <maximumFileSize value="10MB"/>
        <staticLogFileName value="true"/>
        <layout type="log4net.Layout.PatternLayout">
            <conversionPattern value="%m%n"/>
        </layout>
    </appender>
    <root>
        <level value="DEBUG"/>
        <appender-ref ref="RollingLogFileAppender"/>
    </root>
</log4net> 
```

在Service类的顶部初始化GetLogger如下

```
Private Shared ReadOnly log As ILog = LogManager.GetLogger(GetType(Service)) 
```

我为 LogName 创建了 GlobalContext 属性，如下所示

```
log4net.GlobalContext.Properties("LogName") = ConfigurationManager.AppSettings("LogPath") & "Service." & Format(Now, "ddMMyyyy") & ".txt" 
```

使用 log.Info 完成日志记录，如下所示

```
log.Info(strComments) 
```

在这种情况下，日志文件在 Project 文件夹下创建为“null”并记录详细信息。

根据上面的代码，我希望日志位置为“D:\Service\Service.30082012.txt”。

我错过了什么？请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T23:21:07.703

通常，当您更改 web.config 文件时 ，我将 log4net 配置与 web.config 分开以避免 Web 应用程序重新启动（[如何防止 ASP.NET 应用程序在 web.config 被修改时重新启动？ ）。](https://stackoverflow.com/questions/613824/how-to-prevent-an-asp-net-application-restarting-when-the-web-config-is-modified)

我通常只有一个 log4net.config 文件来存储所有这些设置，我将其配置为观察配置文件的更改：

```
[assembly: log4net.Config.XmlConfigurator(ConfigFile = "log4net.config", Watch = true)] 
```

此外，我不太确定为什么要将日志文件目录存储在 log4net 配置之外，除非它更容易修改。我通常将路径保留在 log4net 配置中，如下所示：

```
<appender name="File" type="log4net.Appender.RollingFileAppender">
    <file type="log4net.Util.PatternString" value="${ALLUSERSPROFILE}/CompanyName/Logs/ApplicationName/%date{MM-dd-yyyy} - Whatever.log" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T08:44:29.773

在设置 LogName 属性之前，请确保您没有**任何日志命令。**

还要检查日志名是否设置正确，即检查

```
 ConfigurationManager.AppSettings("LogPath") & "Service." & Format(Now, "ddMMyyyy") & ".txt" 
```

未评估为 null

# php - 在服务器上压缩/解压缩可能包含任何内容的未知上传文件是否危险？甚至病毒？

> ID：12190230
> 
> 赞同：5
> 
> 时间：2012-08-30T05:06:51.710
> 
> 标签：php, apache, file, upload, compression

我正在尝试实现一个用户系统（php，apache），用户可以在其中上传多个文件并下载它们的压缩版本。（或上传压缩文件并下载未压缩文件）。

**问题：**压缩/解压缩这些未知文件是否有风险？换句话说，unix/php zip/unzip 操作是否仅将文件视为文本，还是可以执行某些操作？

**这个问题与所有压缩方法有关，zip 只是一个例子。**

**编辑：** @Alex Brown 和 @Parallelis 写了 2 个风险，所以显然它不安全。任何人都可以发布关于如何实现安全压缩/解压缩未知文件的简短说明？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T05:49:42.990

因为这对我来说似乎是合理的。由于某些问题，您不能这样做，如果这些文件是引导脚本怎么办？（有关另外 2 个问题，请参阅 Alex 和 Parallelis 的评论）。

解决方案：

1.  如果您要在上传后将 zip 文件存储为 zip 文件，这样做您将面临其他问题，因为 zip 可能包含许多可能合适或不合适的文件。在这种情况下，您可能希望获取文件内容列表以自动包含在您的字段中，以便下载它们的人知道文件内容是否有效。您还可以与[ClamAV](http://drupal.org/project/clamav)之类的工具集成以扫描所有上传的文件。

    注意：谷歌也在做同样的事情，他们使用他们的反病毒扫描程序（当然这些程序不可供公众使用）。

2.  您也可以先将文件放在临时目录中，然后在该位置使用 zip_open。他们将能够使用操作系统级别的命令（有自己的风险）来验证文件的完整性，而无需实际解压缩。你也可以参考这个[工具](http://www.pkware.com/store/securezip/windows/command-line-interface)来做同样的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-11-12T12:10:33.030

有几个潜在的问题：

1.  Zip 炸弹 - 这通常不再是什么大问题，因为大多数解压工具/语言会阻止嵌套的解压级别。

2.  相对路径：在我看来，这是您最关心的问题 - zip 已解压缩，但它包含文件：`../../../../../../vendor/autoload.php`例如.. 这会覆盖您的 autoload.php 文件，并在有人查看您的网站时执行。游戏结束。

3.  无数个inode。一个 zip 文件可能包含数百万个 0 字节的文件，会用完系统上所有可用的 inode。这将阻止硬盘在该分区上创建新文件。这可能是中等坏的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-08T15:59:22.723

您还应该知道 zip 档案可能包含符号链接。如果用户在解压缩后可以读取文件，则可以读取文件系统上的任意文件。

zip 实用程序具有用于存储符号链接的 --symlinks 选项。

# objective-c - UIBarButtonItem 没有响应点击

> ID：12190231
> 
> 赞同：3
> 
> 时间：2012-08-30T05:06:58.270
> 
> 标签：objective-c, ios, cocoa-touch, ipad

我有一个 UITableView ，我希望用户能够在该部分的标题中单击两个按钮，一个用于添加新记录，另一个用于编辑它们，所以我首先尝试使用`tableView viewForHeaderInSection`并`tableView heightForHeaderInSection`像这样：

```
- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section {
    return 44;
}

- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {
     UIView* v = [[UIView alloc] initWithFrame:CGRectMake(10, 10, 360, 44)];
    UIToolbar* tb = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, 360, 44)];

    UIBarButtonItem* spacer = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:self action:nil];
    UIBarButtonItem* addBtn = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(onAddVehicleInterest:)];
    UIBarButtonItem* editBtn = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemEdit target:self action:@selector(onEditVehiclesInterest:)];

    [tb setItems:[NSArray arrayWithObjects:spacer, addBtn, editBtn, nil]];

    [v addSubview:tb];
    return v;
}

- (IBAction)onAddVehicleInterest: (id) sender {
    NSLog(@"Add");
}

- (IBAction)onEditVehiclesInterest:(id)sender {
    NSLog(@"Edit");
} 
```

当我运行该应用程序时，我可以正确地看到三个 UIBarButtonItems，并且可以单击它们，但是永远不会调用 NSLog 行。所以我`UIToolbar`直接在 nib 文件中添加了一个，将 3 个`UIBarButtonItem`控件添加到它，并将 and 绑定`onAddVehicleInterest`到`onEditVehiclesInterest`相应的按钮。但这也不起作用...

因此，作为最后一个测试，我`UIButton`在 nib 中添加了一个并将其 Touch Up Inside 事件绑定到其中一个方法，并且按预期工作。所以我很困惑。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-22T06:44:12.333

我在视图控制器的父视图上有一个 UITapGestureRecognizer。移除点击手势后，我的 UIBarButtonItems 开始正确响应所有选择器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T05:27:28.267

我也遇到了同样的问题，我通过改变来解决它： -

```
- (IBAction)onAddVehicleInterest: (id) sender {
to 
- (IBAction)onAddVehicleInterest: (UIBarButtonItem *) sender { 
```

我也不知道为什么它不能更早地工作，但我的问题已经解决了。你可以试试这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T05:18:39.377

尝试这个：

```
UIBarButtonItem* addBtn;
if([self respondsToSelector:@selector(onAddVehicleInterest:)])
{
    addBtn = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(onAddVehicleInterest:)];
}

UIBarButtonItem* editBtn
if([self respondsToSelector:@selector(onEditVehiclesInterest:)])
{
    editBtn = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemEdit target:self action:@selector(onEditVehiclesInterest:)];
}

if(addBtn && editBtn)
{
   [tb setItems:[NSArray arrayWithObjects:spacer, addBtn, editBtn, nil]];
} 
```

# python-3.x - 如何获取当前正在执行的函数的限定名？

> ID：12190238
> 
> 赞同：5
> 
> 时间：2012-08-30T05:07:49.227
> 
> 标签：python-3.x

Python 3.3 引入了`__qualname__`函数对象和类对象的属性。

获取当前执行函数的（非限定）名称和代码对象很容易。

但是如何获取当前正在执行的函数的限定名呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-02-19T10:07:03.803

您可以使用[`executing`](https://github.com/alexmojaki/executing#getting-the-__qualname__-of-the-current-function)：

```
executing.Source.for_frame(frame).code_qualname(frame.f_code) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T10:39:52.973

我认为您目前不能；看到[这个线程](http://www.all-mail-archive.com/thread/609021/Re-Python-ideas-Standard-way-to-get-caller-name-and-easy-call-stack-access/1)。

[问题 13672](http://bugs.python.org/issue13672)请求添加`co_qualname`到代码对象，[问题 12857](http://bugs.python.org/issue12857)请求通过框架对象使调用的函数可用。两者都附有补丁。

# ruby-on-rails - 是否有 inkit.org 风格的图表应用程序可以生成带有脚手架的 Rails 或 Node.js 框架应用程序？

> ID：12190241
> 
> 赞同：-2
> 
> 时间：2012-08-30T05:08:21.753
> 
> 标签：ruby-on-rails, node.js, user-interface, scaffolding, flowchart

我试图弄清楚是否有任何应用程序（SaaS 或其他）提供基本的图形用户界面，用于从流程图类型的界面构建 Rails 或 Node.js 应用程序的所有必要脚手架？

我记得 Visual Studio 有类似的东西用于构建数据库结构……为什么没有针对 Rails 或 Node.js 的东西呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T07:03:05.220

[RailsModels](http://www.railsmodels.com)声称可以做到这一点，但我发现界面相当繁琐。

如果您只想从现有模型生成图表以进行可视化，[RailRoad](http://railroad.rubyforge.org/)和[RubyMine Data Sources Tool](http://www.jetbrains.com/phpstorm/webhelp/data-sources-tool-window.html)可以做到这一点。但是，两者都没有提供从 GUI 生成模型的方法。

您正在考虑[实体模型设计器](http://blogs.msdn.com/b/efdesign/archive/2010/10/11/entity-designer-improvements-preview.aspx)（或者可能是较旧的[数据集设计](http://msdn.microsoft.com/en-us/library/ms171897.aspx)器），但我不知道任何提供类似功能的 Rails 工具。至于为什么，我不确定。我可以发表评论，但这只是猜测，可能是诱饵。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T17:11:42.717

[https://github.com/preston/railroady](https://github.com/preston/railroady)

RailRoady，我相信它唯一的 > Rails 3 虽然......

# android - Adwhril 示例给出 classnotfound 异常

> ID：12190242
> 
> 赞同：2
> 
> 时间：2012-08-30T05:08:27.237
> 
> 标签：android, adwhirl

![在此处输入图像描述](../Images/f3fb47b5d397700826f3c665ab56527b.png)我有这样的清单文件

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.basic.adwhrilsample"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
   <activity android:name=".Invoker" android:label="@string/app_name">

  <intent-filter>

    <action android:name="android.intent.action.MAIN" />

    <category android:name="android.intent.category.LAUNCHER" />

  </intent-filter>

  <meta-data android:value="my sdk key"

    android:name="ADWHIRL_KEY"/>

</activity>
</application> 
```

以下是我的 main.xml 文件

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" 
android:id="@+id/layout_main">

<com.adwhirl.AdWhirlLayout
    android:id="@+id/adwhirl_layout"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />

</LinearLayout> 
```

和我的 Invoker.java 活动

```
package com.basic.adwhrilsample;

import android.app.Activity;
import android.os.Bundle;
import android.view.Gravity;
import android.widget.LinearLayout;
import android.widget.RelativeLayout;
import android.widget.RelativeLayout.LayoutParams;
import android.widget.TextView;

import com.adwhirl.AdWhirlLayout;
import com.adwhirl.AdWhirlLayout.AdWhirlInterface;
import com.adwhirl.AdWhirlManager;
import com.adwhirl.AdWhirlTargeting;

public class Invoker extends Activity implements AdWhirlInterface {

public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);

    AdWhirlManager.setConfigExpireTimeout(1000 * 60 * 5);

    AdWhirlTargeting.setAge(23);

    AdWhirlTargeting.setGender(AdWhirlTargeting.Gender.MALE);

    AdWhirlTargeting.setKeywords("online games gaming");

    AdWhirlTargeting.setPostalCode("94123");

    AdWhirlTargeting.setTestMode(false);

    AdWhirlLayout adWhirlLayout = (AdWhirlLayout)    
findViewById(R.id.adwhirl_layout);

    TextView textView = new TextView(this);

    RelativeLayout.LayoutParams layoutParams = new

    RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT,

    LayoutParams.WRAP_CONTENT);

    int diWidth = 320;

    int diHeight = 52;

    int density = (int) getResources().getDisplayMetrics().density;

    adWhirlLayout.setAdWhirlInterface(this);

    adWhirlLayout.setMaxWidth((int) (diWidth * density));

    adWhirlLayout.setMaxHeight((int) (diHeight * density));

    layoutParams.addRule(RelativeLayout.CENTER_HORIZONTAL);

    textView.setText("Below AdWhirlLayout");

    LinearLayout layout = (LinearLayout) findViewById(R.id.layout_main);

    layout.setGravity(Gravity.CENTER_HORIZONTAL);

    layout.addView(adWhirlLayout, layoutParams);

    layout.addView(textView, layoutParams);

    layout.invalidate();

}

@Override
public void adWhirlGeneric() {

}

} 
```

但我得到

```
08-30 10:17:25.194: E/AndroidRuntime(564): java.lang.RuntimeException: Unable to     
instantiate activity   
ComponentInfo{com.basic.adwhrilsample/com.basic.adwhrilsample.Invoker}:  
java.lang.ClassNotFoundException: com.basic.adwhrilsample.Invoker in loader  
dalvik.system.PathClassLoader[/data/app/com.basic.adwhrilsample-2.apk] 
```

谁能帮我解决我的问题。或者任何人都可以为我提供一个示例工作示例，以便我可以遵循它

更新了 logcat ：

![在此处输入图像描述](../Images/53d23d78fb203203cbd3470900b29c3c.png)

![在此处输入图像描述](../Images/84161375618263e91f396004cb6b997d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T05:32:03.207

我认为一切都很好，只需替换导入的包替换这个

```
 import android.widget.RelativeLayout.LayoutParams; 
```

经过

```
 import android.view.ViewGroup.LayoutParams; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T10:49:11.913

尝试删除项目的 bin 目录，然后清理项目构建并运行。我认为您的类文件不存在于 .dex 扩展名中，有时会在文件未正确编译时发生。还要检查构建路径是否没有错误。

# ruby - 过滤嵌套资源前跳过

> ID：12190243
> 
> 赞同：0
> 
> 时间：2012-08-30T05:08:31.567
> 
> 标签：ruby, ruby-on-rails-3.2, rails-routing, nested-resources, before-filter

我目前正在开发一个 Rails 3.2 应用程序，其中有两个控制器。一个是活动，另一个是帖子。他们都有一个 before_filter。请查看以下控制器和路线：

**广告系列控制器：**

```
class CampaignsController < ApplicationController

  before_filter :authenticate_user!, except: [:show, :landing] 
```

**职位控制器：**

```
 class PostsController < ApplicationController
  before_filter :check_sign_in, :except => [:index] 
```

**路线：**

```
resources :campaigns do

    resources :posts
end 
```

在将 Posts Controller 嵌套到 Campaigns Controller 之前，Posts 控制器中的 before_filter 工作正常，因为我不希望用户登录后才能查看帖子。嵌套之后，即使在通过 Posts 控制器中的 :except 块不检查用户之后，也会呈现 before_filter。虽然我确实希望用户登录其余的 Posts 操作。

:check_sign_in 在应用程序控制器中，如下所示：

```
protected

def check_sign_in

 redirect_to "#{sign_in_url}?origin=#{CGI::escape(request.fullpath)}" unless user_signed_in?

end 
```

我尝试了多种方法来跳过帖子索引操作上的 before_filter，但它们似乎都不起作用。我也尝试过 skip_before_filter 和 skip_filter 但它们也不起作用。他们只是在所有帖子操作中跳过 before_filter ，如果我通过了 except 块，它会实现 before_filter 并且不要在索引操作中跳过它。

任何帮助解决这个问题将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T06:23:00.500

问题没有解决，所以我最终以另一种方式解决了！

# cmis - 检测远程 CMIS 存储库更改的最有效方法是什么？

> ID：12190247
> 
> 赞同：4
> 
> 时间：2012-08-30T05:08:51.030
> 
> 标签：cmis

远程[CMIS 存储库](http://en.wikipedia.org/wiki/Content_Management_Interoperability_Services#Servers)包含许多文件夹/文件。

我正在编写[一个软件](http://cmissync.com)，使这些文件夹/文件的本地副本保持同步。

1.  在第一次运行时，我只是递归下载所有内容。
2.  在以后的运行中，我检查发生了什么变化，并下载任何变化。

检查远程更改的最有效方法是什么？
（额外/删除文件/文件夹）
最有效 = 最少带宽使用。

我只能使用[CMIS 协议](http://docs.oasis-open.org/cmis/CMIS/v1.0/os/cmis-spec-v1.0.html)，不能在远程服务器上运行任何自定义软件。

到目前为止我的想法：

*   想法1：每次都重新下载everthing。
*   思路二：查看根文件夹的修改日期，希望修改日期是递归的。
*   想法 3：使用 CMIS 搜索查找比我上次同步时间更新的所有文件。问题：这不会告诉我哪些文件已被删除。

还有其他想法吗？
我不太了解CMIS协议，可能有更方便的东西。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-30T20:19:10.863

使用存储库的更改日志是正确的方法，但要意识到并非每个存储库都支持这一点。例如，对于 Alfresco，您必须配置审计子系统，并且必须在 alfresco-global.properties 中设置 audit.cmischangelog.enabled=true。

要了解您的存储库是否支持更改，您可以查看存储库的 getCapabilities 响应的结果。如果您看到“更改”设置为“无”，则您的存储库不支持更改日志。

假设确实如此，您需要向存储库询问其最新的更改日志令牌。您可以从 getRepositoryInfo 获取。在调用 getContentChanges 之前保存它。然后，在下一次调用时，传入令牌。您将获得自发行令牌以来所做的更改。

因此，您的代码需要：

1.  检查 getCapabilities 除了 Changes = None
2.  保存 getRepositoryInfo 的 latestChangeLogToken
3.  第一次询问时，不带参数调用 getContentChanges
4.  下次询问时，使用最后保存的令牌调用 getcontentChanges
5.  然后，您可以处理结果集。每个更改日志条目都会告诉您其类型（创建、更新、删除、权限等，具体值参见规范）并提供更改对象的 cmis:objectId。
6.  重复步骤 2。

我有一个“cmis-sync”脚本，它使用 Python 中实现的这种方法进行单向同步。我已经针对 Alfresco 作为源和 OpenCMIS InMemory 存储库作为目标对其进行了测试。如果有兴趣，我可以提供。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T05:25:52.090

根据您发布的 CMIS 协议的一些挖掘，可以轻松完成想法 3 的更理想版本。

> [2.1.11 变更日志](http://docs.oasis-open.org/cmis/CMIS/v1.0/os/cmis-spec-v1.0.html#_Toc243905424)
> 
> CMIS 提供了一种“更改日志”机制，允许应用程序轻松发现自上一个时间点以来存储在存储库中的对象发生的更改集。然后，此更改日志可供应用程序使用，例如维护存储库的外部索引的搜索服务，以有效地确定如何将其索引同步到存储库的当前状态（而不是必须查询当前在存储库中的所有对象） .
> 
> 更改日志中记录的条目在下文称为“更改事件”。
> 
> 请注意，更改日志中的更改事件必须从更改事件发生的时间开始按升序返回。

使用您选择的任何工具，您应该能够对整个存储库进行初始拉取并节省执行拉取的时间。对存储库的后续查询（以您选择的时间间隔）通过以下过程完成：

*   从存储库中拉下 CMIS 变更日志
*   解析上次拉取后创建的所有更改
*   根据 ChangeType 枚举执行操作：例如，如果 objectID 存在“deleted”枚举，则在本地删除该对象。

# bash - shell 输出到 rss

> ID：12190249
> 
> 赞同：2
> 
> 时间：2012-08-30T05:09:49.107
> 
> 标签：bash, shell, rss, cron, sh

我有一台运行 Ubuntu Linux 的服务器。它执行由 cron 启动的定期任务，我希望看到输出。Cron 运行太频繁，我不想给我的邮箱发送垃圾邮件，我宁愿每天在谷歌阅读器中查看一次。

因此，我需要将 shell 输出放入 RSS 或 Atom 提要中。是否有任何博客服务能够生成 RSS 并从命令行接受帖子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T11:48:31.773

您可以[通过电子邮件向博主发帖](http://support.google.com/blogger/bin/answer.py?hl=en&answer=41452)

# php - 这个 PHP 登录安全吗？[样板]

> ID：12190251
> 
> 赞同：1
> 
> 时间：2012-08-30T05:09:53.480
> 
> 标签：php, security, templates, login, boilerplate

我已经创建了这个 php-Login，它将作为一个模板。

[https://github.com/sinky/php-login-boilerplate](https://github.com/sinky/php-login-boilerplate)

我的问题，这个 php-Login 安全吗？它工作正常吗？没有密码可以登录吗？（不考虑 SSL。）

感谢您的改进。问候马可

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T06:43:13.517

不..不是真的。

这很容易受到 CSRF 的影响：

```
if($_GET['logout']) {
  session_destroy();    
} 
```

这很容易绕过，只需在每次尝试登录时清除 cookie：

```
sleep($_SESSION['loginFail']); 
```

这是很好的行为：

```
header("location: login.php");
exit; 
```

请记住 header() 不会阻止脚本执行。同样是的，登录名和会话 ID 都必须始终通过 HTTPS 传输（阅读：[OWASP A9](https://www.owasp.org/index.php/Top_10_2010-A9-Insufficient_Transport_Layer_Protection)）。

# jsp - 我可以在正文中添加 JSTL 标签吗 标签

> ID：12190253
> 
> 赞同：1
> 
> 时间：2012-08-30T05:10:00.117
> 
> 标签：jsp, jsp-tags, jspinclude

我正在尝试包含一个带有动态参数的文件。参数来自一个数组。

这是我写的代码：

```
<jsp:include page="${jspName}">
    <c:if test="${paramList != null}">
        <c:forEach var="paramPair" items="${paramList().getList()}">
            <jsp:param name="${paramPair.getName()}" value="${paramPair.getValue()"/> 
        </c:forEach>
    </c:if>
</jsp:include> 
```

但这给了我一个错误：

```
Expecting "jsp:param" standard action with "name" and "value" attributes. 
```

有人可以帮我弄清楚如何将这些参数从参数数组动态发送到文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T08:46:38.073

根据[JSP 文档](http://java.sun.com/products/jsp/syntax/2.0/syntaxref2020.html#8828 "JSP Syntax for <jsp:include>")，您**不能**在标签正文中包含任何表达式或 jstl 标签`<jsp:include>`，您只能在正文中包含标签。`<jsp:param>`

为了更好地理解您的需求，请回答这个问题：
由于参数名称也是动态的，您认为如何在由 表示的 jsp 文件中获取这些参数`${jspName}`？

* * *

**这里仍然是我的一些建议：**
我建议重新考虑设计并使用包含指令 ( `<%@ include file="myJsp.jsp" %>`) 而不是标准操作。

或者

如果要使用`<jsp:include>`，请执行以下任一操作：

*   通过两个`<jsp:param>`；一个带有逗号分隔`name`列表 ( `name1,name2,name3`)，另一个带有逗号分隔`value`列表 ( `value1`, `value2`, `value3`)。在您包含的 jsp`${jspName}`中，执行一些简单的字符串操作以获取名称和值。

    ```
    <c:set name="nameList" value="" /> 
    <c:set name="valueList" value="" /> 

    <c:if test="${paramList != null}">
        <c:forEach var="paramPair" items="${paramList().getList()}">
            <c:set name="nameList">${nameList},${paramPair.getName()},</c:set>
            <c:set name="valueList">${valueList},${paramPair.getValue()},</c:set>
        </c:forEach>
    </c:if>

    <jsp:include page="${jspName}">
        <jsp:param name="nameListToBePassed" value="${nameList}" />
        <jsp:param name="valueListToBePassed" value="${valueList}" />
    </jsp:include> 
    ```

*   `<jsp:param>`使用逗号分隔的`nameValue`列表传递一个，例如`[name1=value1,name2=value2,name3=value3]`.

    ```
    <c:set name="nameValueList" value="" />

    <c:if test="${paramList != null}">
        <c:forEach var="paramPair" items="${paramList().getList()}">
            <c:set name="nameValueList">${nameValueList},${paramPair.getName()}=${paramPair.getValue()},</c:set>
        </c:forEach>
    </c:if>

    <jsp:include page="${jspName}">
        <jsp:param name="nameValueListToBePassed" value="${nameValueList}" />
    </jsp:include> 
    ```

希望这能给一些方向。

# asp.net-mvc-2 - 如何在构建中自动化 Dotfuscator

> ID：12190255
> 
> 赞同：3
> 
> 时间：2012-08-30T05:10:01.387
> 
> 标签：asp.net-mvc-2, dll, dotfuscator

我必须在 Visual Studio 2010 的 mvc2 项目中保护一些 dll。我正在使用 Dotfuscator，我想在构建过程中自动化它。我参考了以下文章，但我不知道如何实现它。[http://msdn.microsoft.com/en-us/library/hh977082(v=vs.107).aspx](http://msdn.microsoft.com/en-us/library/hh977082%28v=vs.107%29.aspx)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T05:11:56.813

我们通过创建一个 .proj 文件 (MSBuild.exe) 并使用 exec 直接调用它来做到这一点。

```
<Exec Command='"$(OBFU_HOME)\dotfuscator.exe" dotfuscator.xml'/>
<Exec Command='"$(SN_HOME)\sn.exe" -R filename.dll filename.snk'/> 
```

OBFU_HOME & SN_HOME 在环境中设置。确保在调用 sn.exe 后调用 dll，因为需要重新签名。

这对你有用吗？如果没有，那么您需要将它放在构建后事件处理程序中。

# android - 如何获取 android 设备唯一 ID？

> ID：12190256
> 
> 赞同：16
> 
> 时间：2012-08-30T05:10:02.783
> 
> 标签：android

> **可能重复：**
> [是否有唯一的 Android 设备 ID？](https://stackoverflow.com/questions/2785485/is-there-a-unique-android-device-id)

我使用下面的代码来获取 android 设备 IMEI 以及如何更改下面的代码来获取 android 设备唯一 ID。

```
String getDeviceID1(TelephonyManager phonyManager){
    String id = phonyManager.getDeviceId();
    if (id == null){
        id = "not available";
    }
    int phoneType = phonyManager.getPhoneType();
    switch(phoneType){
        case TelephonyManager.PHONE_TYPE_NONE:
            return "" + id;

        case TelephonyManager.PHONE_TYPE_GSM:
            return "" + id;

        case TelephonyManager.PHONE_TYPE_CDMA:
            return "" + id;

        /*
        *  for API Level 11 or above
        *  case TelephonyManager.PHONE_TYPE_SIP:
        *   return "SIP";
        */

        default:
            return "" + id;
    }

    //I used to show IMEI 

    TextView textDeviceID = (TextView)findViewById(R.id.deviceid);
    //retrieve a reference to an instance of TelephonyManager
    TelephonyManager telephonyManager = (TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);
    textDeviceID.setText(getDeviceID1(telephonyManager));
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-30T06:22:04.423

在 Android 中，您可以获得三个不同的唯一 ID。

*   IMEI（您的代码中已经有）

    ```
    TelephonyManager telephonyManager = (TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);
    String id =  (getDeviceID1(telephonyManager)); 
    ```

*   [设备ID](https://stackoverflow.com/a/2785493/996493)

    ```
    String android_id = Secure.getString(getContext().getContentResolver(),
                                                    Secure.ANDROID_ID); 
    ```

*   蓝牙地址（这对于每个设备也是唯一的）

    ```
    private BluetoothAdapter mBtAdapter;

    // Get the local Bluetooth adapter
    mBtAdapter = BluetoothAdapter.getDefaultAdapter();
    String deviceMacAddress = mBtAdapter.getAddress(); 
    ```

# android - 在 ORMLITE 中使用 Max？

> ID：12190258
> 
> 赞同：1
> 
> 时间：2012-08-30T05:10:26.770
> 
> 标签：android, ormlite

我需要在 ORMLITE 中使用 max 来检索 ormlite 表中的最新记录`select max(MODIFIED)FROM TABLE;`

我想获得一条记录，该记录具有 datemodified 的最大值，其中 userid 为 id；对于特定的用户 ID，我想查找日期最大值的记录，即查找特定用户的最新条目

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T12:30:58.023

不太清楚，但我假设您想知道如何使用[ORMLite](http://ormlite.com/)`MODIFIED`查询字段等于最大值的对象。我不确定您是否可以在没有两个查询的情况下在 SQL 中执行此操作。我认为你将不得不做一个[原始查询](http://ormlite.com/docs/raw-queries)来获得最大值，然后再做一个查询。

我在 4.42 版中添加`queryRawValue(...)`到[ORMLite](http://ormlite.com/)，所以你可以这样做：

```
long max = fooDao.queryRawValue(
    "select max(modified) from foo where userid = ?", id);
// now perform a second query to get the max row
Foo foo = fooDao.queryBuilder().where().eq("modified", max).queryForFirst(); 
```

手动你会做：

```
GenericRawResults<String[]> rawResults =
    fooDao.queryRaw("select max(modified) from foo where userid = ?", id);
// there should be one result
long max = Long.parseLong(rawResults.getResults().get(0)[0]);
// now perform a second query to get the max row
Foo foo = fooDao.queryBuilder().where().eq("modified", max).queryForFirst(); 
```

# gwt - 如何在 GWT 的 Flextable 上显示文本文件的内容？

> ID：12190259
> 
> 赞同：0
> 
> 时间：2012-08-30T05:10:34.497
> 
> 标签：gwt

如何`Flextable`在 GWT 中显示文本文件（记事本）的内容？我一直在尝试使用`FileInputStream`，但我收到一个错误

> 插件无法在 127.0.0.9997 的开发模式服务器上连接。

我试过清除缓存但没有帮助？GWT 实际上是否允许从文本文件中读取？除了在`FlexTable`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T10:07:37.847

您实际上无法在 GWT（客户端）中读取文件。一种选择是允许用户上传文件，然后在服务器端读取文件并将内容发送到客户端。在客户端中，您可以使用所需的小部件来显示内容。

# javascript - module.exports 冲突/在 node.js 应用程序中被覆盖

> ID：12190262
> 
> 赞同：3
> 
> 时间：2012-08-30T05:10:55.947
> 
> 标签：javascript, node.js, express, node-modules

我认为我严重误解了如何使用 module.exports。似乎每个模块都在覆盖最后一个吐出的内容。

**应用程序.js**：

```
var express = require("express")
    , app = express()
    , routes = require('routes')
    , server = app.listen(1337, "0.0.0.0")
    , io = require('socket.io').listen(server)
    , redis = require("redis")
    , client = redis.createClient(); 
```

`var moduleA = require("./moduleA")(io, client);`（需要通过socket.io和redis客户端）

`var moduleB = require("./moduleB")(io, client);`（相同的）

**模块A.js**：

```
module.exports = function(io, client){ 
    this.test = 'foo';
    return this;
}; 
```

**模块B.js**：

```
module.exports = function(io, client){ 
    this.test = 'bar';
    return this;
}; 
```

回到**app.js**：

`console.log(moduleB.test);`（**打印“酒吧”**）

`console.log(moduleA.test);`（***也*打印“bar”**）

有人可以解释我做错了什么吗？我想不出任何其他方法来做到这一点，因为`exports`助手（？）本身似乎不接受参数。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-30T05:14:48.010

您正在导出一个构造函数。您需要构建它，而不是调用它。

改变

```
var moduleA = require("./moduleA")(io, client); 
```

到

```
var moduleA = new (require("./moduleA"))(io, client); 
```

或（为了清楚起见）

```
var ModuleA = require("./moduleA");
var a = new ModuleA(io, client); 
```

* * *

您所看到的是在草率模式下将构造函数作为函数调用时的常见行为：`this`引用全局对象。所以当然从两个位置修改全局对象会互相覆盖，返回`this`只会返回全局对象。您可以自己测试：使用您当前的代码，

```
moduleA === moduleB === this === global 
```

* * *

防止自己再次像这样在脚上射击自己的一种方法是使用严格模式而不是马虎模式。为此，请添加行

```
"use strict"; 
```

在您编写的每个模块的顶部（在任何其他代码之前）。在严格模式下，对于没有is`this`调用的构造函数，你会得到一个更早且更容易理解的错误。`new``undefined`

严格模式有很多这样的好处；有关概述，请参见[[1]](http://www.yuiblog.com/blog/2010/12/14/strict-mode-is-coming-to-town/)、[[2]](http://www.nczonline.net/blog/2012/03/13/its-time-to-start-using-javascript-strict-mode/)、[[3]](http://ejohn.org/blog/ecmascript-5-strict-mode-json-and-more/)。

* * *

另一种解决方案是完全停止使用构造函数，而是使用工厂函数。这看起来像：

```
module.exports = function (io, client) {
    var result = {};
    result.test = "foo";
    return result;
}; 
```

无论如何，您似乎都在尝试做这样的事情，因为`return this`即使在构造函数中这样做也是完全没有必要的。您可以停止使用`this`并使用您控制下的实际对象，而不是根据您的函数是被调用还是构造而改变语义的对象。

# linux - 两个网络之间的linux路由

> ID：12190263
> 
> 赞同：1
> 
> 时间：2012-08-30T05:10:58.160
> 
> 标签：linux, networking, routing

我有 2 台应用程序服务器通过以太网电缆直接连接到 SAN 服务器，SAN 服务器有带 2 个端口的双网卡。

```
 APP1                              APP2
                     172.16.16.10                   192.168.10.10
                          |                                |
                          |                                |
                   172.16.16.1 --[ SAN DUAL NIC ] -- 192.168.10.1 
```

在 SAN

当我在同一子网 172.16.16.x 上使用 IP 设置每个 nic 时，仅连接到单个应用程序服务器 APP1 有效。

但是，如果我将另一个网卡设置在不同的子网 192.168.1.x 到两台服务器的网络连接工作正常。

我的问题是如何启用 APP2 和 APP1 之间的路由？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T23:45:54.460

由于您没有提供子网掩码，因此我编写了仅路由到您在图表中放置的特定主机的路由语句。如果你给我你的子网掩码，那么我可以给你更一般的路由语句。

在 APP1 上： ip route add 192.168.10.10/32 via 172.16.16.1

在 APP2 上： ip route add 172.16.16.10/32 via 192.168.10.1

要使路由在重新启动后保持不变，您必须将这些静态路由添加到配置文件中，但由于我不知道您使用的是哪个发行版，所以我无法告诉您要编辑的确切文件。

# android-layout - android中每个选项卡的屏幕尺寸

> ID：12190265
> 
> 赞同：0
> 
> 时间：2012-08-30T05:11:19.407
> 
> 标签：android-layout

我想为android中可用的所有选项卡开发一个应用程序，为了使用图片，我必须根据选项卡屏幕尺寸调整它们的大小以提供多个屏幕场景。谁能告诉我每个布局文件夹的图片尺寸是多少，以提供最佳效果每个选项卡上的用户界面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T05:24:30.930

600dp：7 英寸平板电脑 (600x1024 mdpi)。

720dp：10 英寸平板电脑（720x1280 mdpi、800x1280 mdpi 等）。

# html - 两个表格的表格列宽必须相同

> ID：12190266
> 
> 赞同：33
> 
> 时间：2012-08-30T05:11:31.663
> 
> 标签：html, css, width

有两个表格，宽度为 600 像素，每个表格 5 列。但是，尚未为每列设置宽度。在这里，我想让两个表中的列宽必须相同。您可以使用 CSS 或 jQuery。而且，我不想手动修复列宽。

**HTML 示例：**

```
<table width="600" border="1" cellspacing="0" cellpadding="0">
    <tr>
        <td>hdng 1</td>
        <td>hdng 2</td>
        <td>hdng 3</td>
        <td>hdng 4</td>
        <td>hdng 5</td>
    </tr>
</table>
<table width="600" border="1" cellspacing="0" cellpadding="0">
    <tr>
        <td>content content content</td>
        <td>con</td>
        <td>content content content</td>
        <td>content content content</td>
        <td>content content content</td>
    </tr>
</table> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-30T05:54:07.367

如果您希望所有列的宽度相同，并且由于您确定每个表中恰好有五列，我建议：

```
<table style="table-layout:fixed">
<col style="width:20%" span="5" />
<tr><!--stuffs...--></tr>
</table> 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-01-24T09:21:46.273

我知道这个问题已经存在一年了，但是有一种方法可以满足您的要求！在`table`标签内，您可以使用`thead`和`tbody`标签对行进行分组。您还可以有多个`tbody`标签，这使您可以保持宽度相同（因为它们将是同一个表格），但根据需要使用不同的样式（或者在我的情况下，显示和隐藏）。

示例 HTML 可以在这个答案中找到，复制用于 retnension [https://stackoverflow.com/a/3076790/89211](https://stackoverflow.com/a/3076790/89211)

```
<table>
    <thead>
        <tr><th>Customer</th><th>Order</th><th>Month</th></tr>
    </thead>
    <tbody>
        <tr><td>Customer 1</td><td>#1</td><td>January</td></tr>
        <tr><td>Customer 1</td><td>#2</td><td>April</td></tr>
        <tr><td>Customer 1</td><td>#3</td><td>March</td></tr>
    </tbody>
    <tbody>
        <tr><td>Customer 2</td><td>#1</td><td>January</td></tr>
        <tr><td>Customer 2</td><td>#2</td><td>April</td></tr>
        <tr><td>Customer 2</td><td>#3</td><td>March</td></tr>
    </tbody>
    <tbody>
        <tr><td>Customer 3</td><td>#1</td><td>January</td></tr>
        <tr><td>Customer 3</td><td>#2</td><td>April</td></tr>
        <tr><td>Customer 3</td><td>#3</td><td>March</td></tr>
    </tbody>
</table> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2020-08-05T11:05:21.293

我遇到了同样的问题，我发现了一种不干净但有效的方法。

使用 JavaScript，您可以暂时组合两个表以获得所需的自动调整的列宽，并将这些宽度应用于两个表中的元素。将宽度应用于不会删除的行中的**两个表后，您可以删除添加到组合表中的行。**

如果两个表都可以单独选择（我刚刚添加了 id）并且您可以将添加到一个表的行（我使用 tbody 标签）分组，那么您可以轻松地删除您添加的内容，这是最简单的。

希望这对某人有所帮助，即使原始帖子已经晚了八年！

```
//add table 2 to table 1
$("#table1").append($("#table2 tbody").clone(true));

let table1_elems = $("#table1 tr:first td");
let table2_elems = $("#table2 tr:first td");
$(table1_elems).each(function(i) {
    //get the column width from the combined table and apply to both tables
    //(first one seems redundant, but is necessary once rows are removed)
    $(this).width($(this).width());
    $(table2_elems[i]).width($(this).width());
});

//remove the added rows
$("#table1 tbody:last").remove();
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<table id="table1" width="600" border="1" cellspacing="0" cellpadding="0">
    <tr>
        <td>hdng 1</td>
        <td>hdng 2</td>
        <td>hdng 3</td>
        <td>hdng 4</td>
        <td>hdng 5</td>
    </tr>
</table>
<table id="table2" width="600" border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td>content content content</td>
            <td>con</td>
            <td>content content content</td>
            <td>content content content</td>
            <td>content content content</td>
        </tr>
    </tbody>
</table>
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-30T05:15:18.423

你正在寻找`table-layout:fixed`

见例子：

[http://jsfiddle.net/RsAhk/](http://jsfiddle.net/RsAhk/)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-02-02T09:00:47.960

如果宽度不是通过样式给出的，则表格单元格的宽度取决于其内容。

> 默认情况下，大多数浏览器使用自动表格布局算法。调整表格及其单元格的宽度以适应内容。

如果您想对不同表格的表格单元格具有精确的宽度，请首先了解以下说明。

> 表格和列的宽度由 table 和 col 元素的宽度或第一行单元格的宽度设置。后续行中的单元格不影响列宽。在“固定”布局方法下，一旦下载并分析了第一行表格，就可以渲染整个表格。这可以加快“自动”布局方法的渲染时间，但随后的单元格内容可能不适合提供的列宽。单元格使用溢出属性来确定是否剪切任何溢出的内容，但前提是表格具有已知宽度；否则，它们不会溢出单元格。

**CSS**

```
table{
    table-layout:fixed; /* same width will be applied to both the tables*/
}
table td {
    width:20%;  /*20% width for 5 td elements*/
} 
```

更多信息[https://developer.mozilla.org/en-US/docs/Web/CSS/table-layout](https://developer.mozilla.org/en-US/docs/Web/CSS/table-layout)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-30T06:06:02.697

如果您知道每个表正好有 5 列，那么应用`width: 20%`是您最好的选择：

```
td {
    width: 20%;
} 
```

但是，如果您可以有任意数量的列，则可以改为编写一个简单的 JQuery 脚本来确定有多少列并相应地设置宽度。

这是一个[JSFiddle 演示](http://jsfiddle.net/fmdd9/1/)。我修改了 HTML 以添加`id="first"`到第一个表中，因此我可以获得对它的具体引用。然后JavaScript是这样的：

```
var num = $("table#first tr:first-child > td").length;
var width = (100 / num) + "%";

$("td").css("width", width);​ 
```

基本上它会抓取表格的第一行`#first`并计算列数。然后它找到该列数的相应百分比宽度。然后它将该宽度应用于所有`<td>`元素。

只要`colspan`在 s 上没有定义，这将起作用`td`，这会丢弃列数。由于您在两个表上都定义了明确的宽度，因此列将相等。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-08-18T02:52:58.420

我们可以将所有第二个表行移动到第一个表。然后设置表格单元格宽度样式以固定列宽。完成此操作后，我们可以将行移回秒表。如果表格有图像或字体，您应该在它们加载后进行工作。

```
/**
* Align two table column width
* @param {HTMLTableElement} table1
* @param {HTMLTableElement} table2
*/
function fixTableCellWidth (table1, table2) {
    // container means `thead` or `tbody`
    const sourceContainers = Array.from(table2.children);
    const sourceTrs = sourceContainers.map(container => Array.from(container.children));
    // move second table rows to first table
    sourceTrs.forEach(trs => {
        trs.forEach(tr => {
            table1.lastElementChild.appendChild(tr);
        });
    });
    // fix table cell width
    Array.from(table1.children).forEach(container => {
        Array.from(container.children).forEach(tr => {
            Array.from(tr.children).forEach(td => {
                if (td.style.width) return;
                const rect = td.getClientRects()[0];
                td.style.width = `${rect.width}px`;
            });
        });
    });
    // move back the second table rows
    sourceTrs.forEach((trs, index) => {
        const container = sourceContainers[index];
        trs.forEach(tr => {
            container.appendChild(tr);
        });
    });
}

// Call `fixTableCellWidth` after ready
document.addEventListener('DOMContentLoaded', () => {
    fixTableCellWidth(document.getElementById('table1'), document.getElementById('table2'));
});
```

```
* {
    box-sizing: border-box;
}

table {
    border-collapse: collapse;
}

table td {
    border: 1px solid;
}
```

```
First Table:
<table id="table1" width="600" border="1" cellspacing="0" cellpadding="0">
<tbody>
    <tr>
        <td>hdng 1</td>
        <td>hdng 2</td>
        <td>hdng 3</td>
        <td>hdng 4</td>
        <td>hdng 5</td>
    </tr>
</tbody>
</table>
Second Table:
<table id="table2" width="600" border="1" cellspacing="0" cellpadding="0">
<tbody>
    <tr>
        <td>content content content</td>
        <td>con</td>
        <td>content content content</td>
        <td>content content content</td>
        <td>content content content</td>
    </tr>
</tbody>
</table>
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-30T05:24:03.943

定义任何 css 类并对其进行格式化，然后在两个表上使用该类，例如

你的 temp.css

```
.anyClass tr td{
width: 150p;
etc...
} 
```

并在 HTML 文件中

```
 <table id="table1" class="anyClass">

        ......
        ......
        </table>

        <table id="table2" class="anyClass">        
        ......
        ......
        </table> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-07-10T12:48:58.480

我在 jQuery 中为我的 div 表创建了这个，其中我有两个表，表单元格是标签和表单字段。jQuery：

```
 $(".table").last().children().find("label").css("table", $(".table").first().children().find("label").css("width")); 
```

CSS：

```
 .table {display:table;}
    .table div {display: table-row;}
    .table .formTitle {text-align: center;display: table-caption;}
    .table select,
    .table input,
    .table label {display: table-cell;} 
```

HTML：

```
 <div class="table">
        <div class="formTitle"><span id="txtBI"></span></div>
        <div class="visTog"><label></label><input type="text" id="EntName"></div>
        <div class="visTog opac"><label></label><select id="EntYear"></select></div>
        <div class="visTog opac"><label></label><select id="EntMonth"></select></div>
        <div class="visTog opac"><label></label><select id="EntDay"></select></div>
    </div>
    <div class="table">
        <div class="visTog locrdsC formTitle"><span id="txtCalVal"></span></div>
        <div class="visTog locrdsC"><label></label><input type="text" name="gmt" id="EntposGMT" class="locrds"></div>
        <div class="visTog locrdsC"><label></label><input type="text" name="EntJday" id="EntJday" class="locrds"></div>
    </div>

</div> 
```

不过，这有一个问题。可以编写一个脚本来测量哪个更大，但在我的情况下这不是必需的。

我倾向于使表单更具交互性以提高可用性；因此可见性切换和不透明度类，但对单元格宽度函数没有影响。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2020-02-14T18:15:12.247

`tbody`您可以通过将表格与每个表格组合在一起（如@Relequestual 所建议）并`<th scope="rowgroup">`用于标题来同步列宽：

```
table {
  border-collapse: collapse;
}

table thead,
table tbody {
  border-bottom: solid;
}

table tbody th {
  text-align: left;
}
```

```
<table>
  <thead>
    <tr> <th> ID <th> Measurement <th> Average <th> Maximum
  <tbody>
    <tr> <td> <th scope=rowgroup> Cats <td> <td>
    <tr> <td> 93 <th scope=row> Legs <td> 3.5 <td> 4
    <tr> <td> 10 <th scope=row> Tails <td> 1 <td> 1
  <tbody>
    <tr> <td> <th scope=rowgroup> English speakers <td> <td>
    <tr> <td> 32 <th scope=row> Legs <td> 2.67 <td> 4
    <tr> <td> 35 <th scope=row> Tails <td> 0.33 <td> 1
</table>
```

来源：[HTML 规范本身的示例](https://html.spec.whatwg.org/multipage/tables.html#the-th-element)

# jquery-mobile - .trigger('create') 无法创建列表视图

> ID：12190268
> 
> 赞同：0
> 
> 时间：2012-08-30T05:11:55.357
> 
> 标签：jquery-mobile

这是我必须动态创建和增强页面的代码。类似的模式一直适用于许多其他类型，例如文本字段、按钮、网格视图等。但我发现它不适用于列表视图。

```
$(document).bind("pagebeforechange", function route(e, data) {
    ...
    $content = $page.children(":jqmData(role=content)");
    var markup = '<ul id="calendarList" data-role="listview"><li>HELLO</li></ul>';
    $content.html(markup);
    $page.trigger('create');
    $.mobile.changePage($page);
}); 
```

我总是会收到一条错误消息，例如，

```
Cannot read property 'jQuery16409763167318888009' of undefined 
```

通过使用 Chrome 调试，我发现它总是在 $page.trigger('create'); 行失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T00:03:36.113

我自己找到了解决方案。换线就好了

```
$page.trigger('create'); 
```

和，

```
$page.page();
$content.find( ":jqmData(role=listview)" ).listview(); 
```

但是，我仍然不明白为什么。我认为前者是替代后者的更新、更简单的语法。一次调用 $page.trigger('create'); 可以一次增强整个页面。有谁知道这两者的区别吗？

# c# - 如何将动态控件添加到 MasterPage

> ID：12190271
> 
> 赞同：1
> 
> 时间：2012-08-30T05:11:55.927
> 
> 标签：c#, asp.net, .net

我从 JSON 获取图像列表并添加到如下页面：

```
IEnumerable jsonData = default(IEnumerable);

            jsonData = GetJsonValues("http://www.viki.com/api/v2/channels.json");

            foreach (MovieDetails item in jsonData)
            {
                Image thumbNailImage = new Image();
                thumbNailImage.ImageUrl = item.Thumbnail;

                //this.Master.Controls.Add(thumbNailImage);
                this.Controls.Add(thumbNailImage);

            } 
```

但这是在页面底部添加图像，因为页面模板来自母版页。

```
<%@ Page Title="Home Page" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true"
    CodeBehind="Default.aspx.cs" Inherits="VikiWeb._Default" %>

<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
    </asp:Content> 
```

现在如何在母版页中添加图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T05:21:29.940

您将[PlaceHolder](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.placeholder.aspx)放置在您想要添加控件的位置，并添加类似于您的代码的控件，但使用此 PlaceHolder id 为：

```
<asp:PlaceHolder runat="server" id="placeOnMe" /> 
```

和

```
placeOnMe.Controls.Add(thumbNailImage); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T05:20:47.290

`asp:Panel`在您需要渲染图像的 MasterPage 中放置一个。在内容页面的代码隐藏中，执行此操作

```
var panel = Master.FindControl("your_panel_id") as Panel;
if(panel != null)
{
    IEnumerable jsonData = default(IEnumerable);
    jsonData = GetJsonValues("http://www.viki.com/api/v2/channels.json");
    foreach (MovieDetails item in jsonData)
    {
        Image thumbNailImage = new Image();
        thumbNailImage.ImageUrl = item.Thumbnail;
        panel.Controls.Add(thumbNailImage);
    }
} 
```

# c++ - 在 C++ 中使用 sscanf 和 sprintf - 风格

> ID：12190273
> 
> 赞同：0
> 
> 时间：2012-08-30T05:12:34.700
> 
> 标签：c++, c, styles

如果您认为在主要是 c++ 的程序中使用这些函数是可以接受的，我想知道在风格方面。我问，因为我有一位教授教授 c++ 课程，其示例充满了 c 字符串、字符串到 c 字符串的转换、sscanf、sprintf 和其他类似的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T05:27:56.903

好吧，这里有几点关于一般流与 stdio 的问题，可以帮助您做出决定。大多数适用于`stringstream`vs `sprintf`/ `sscanf`；仅在涉及缓冲的非内存流（例如文件、stdin/stdout）的情况下才使用少数。

*   流是类型安全的，因此如果您的程序编译它通常会运行正常，而 stdio 格式字符串与参数和类型的匹配很容易出错，并且不需要编译器来验证它（尽管有些可以）
*   如果您最终将它们混合在一起，则需要`sync_with_stdio`在流中使用该成员（http://www.cplusplus.com/reference/iostream/ios_base/sync_with_stdio/） - 这可能会减慢它们的速度
*   `scanf`等的标准 C 版本`printf`不允许自定义支持您创建的新类型，这是令人难以置信的限制和挫败您创建和使用打印不同类型的多态代码（例如模板、宏）
    *   像 GNU 的一些实现确实有一些自定义功能
*   `printf`/`scanf`样式格式字符串可以比 C++ 流式传输更简洁——尤其是在使用 iomanip 时——但更多地依赖于对可读性的熟悉程度
*   大多数第三方 C++ 代码仅具有流式传输功能
*   在实践中，尽管需要在运行时切换到特定于类型的处理，但`printf`/`scanf`通常更快，但这是有代价的：它们缺乏一些流特性，例如特定于语言环境的行为、跨调用的行为持续存在等。
*   `printf`/ `scanf`etc. 有时可用于根据配置指定格式字符串来改变运行时 I/O 解析（这对于 GNU 之类的扩展更容易，它允许您使用数字来指示参数在参数列表中的位置，而不是而不是必须让格式字符串和参数对应）；尽管如此，这仍然很脆弱（错误经常使程序崩溃）并且 - 对于经常尝试使用的国际化 - 不如专门为此目的设计的设施那么强大

# sql - 更新 oracle 语句不起作用

> ID：12190277
> 
> 赞同：0
> 
> 时间：2012-08-30T05:13:04.013
> 
> 标签：sql, vb.net, oracle

我正在尝试使用 VB.Net 更新记录。这是代码。它没有给出任何错误。但是每次我运行这段代码时，我都希望变量`newbal`会增加。它不会发生。这意味着更新语句不起作用。任何解决方法？

```
Dim cmd5 As New OracleCommand
cmd5.Connection = conn
cmd5.CommandText = "SELECT * FROM d009022 WHERE prdacctid = :custid AND lbrcode = :lbrcode"
cmd5.Prepare()
cmd5.Parameters.Add(":custid", customernumber)
cmd5.Parameters.Add(":lbrcode", lbr)
Try
     Dim drs As OracleDataReader = cmd5.ExecuteReader()
     drs.Read()
     Dim oldbal As Decimal = drs.Item("SHDCLRBALFCY")
     Dim newbal As Integer = CInt(oldbal) + CInt(amount)

     Dim cmd6 As New OracleCommand
     cmd6.Connection = conn
     cmd6.CommandText = "UPDATE d009022 SET shdclrbalfcy = :newbal WHERE prdacctid = :custnum AND lbrcode = :lbr"
     cmd6.Prepare()
     cmd6.BindByName = True
     cmd6.Parameters.Add(":newbal", newbal)
     cmd6.Parameters.Add(":custnum", customernumber)
     cmd6.Parameters.Add(":lbr", lbr)
     cmd6.ExecuteNonQuery() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T09:12:19.597

您应该使用此结构来管理与 Oracle 的事务（请参阅[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.data.oracleclient.oracletransaction.commit%28v=vs.100%29.aspx#Y612)）：

```
Public Sub RunOracleTransaction(ByVal connectionString As String)
    Using connection As New OracleConnection(connectionString)
        connection.Open()

        Dim command As OracleCommand = connection.CreateCommand()
        Dim transaction As OracleTransaction

        ' Start a local transaction
        transaction = connection.BeginTransaction(IsolationLevel.ReadCommitted)
        ' Assign transaction object for a pending local transaction
        command.Transaction = transaction

        Try
            command.CommandText = _
                "INSERT INTO Dept (DeptNo, Dname, Loc) values (50, 'TECHNOLOGY', 'DENVER')"
            command.ExecuteNonQuery()
            command.CommandText = _
                "INSERT INTO Dept (DeptNo, Dname, Loc) values (60, 'ENGINEERING', 'KANSAS CITY')"
            command.ExecuteNonQuery()
            transaction.Commit()
            Console.WriteLine("Both records are written to database.")
        Catch e As Exception
            transaction.Rollback()
            Console.WriteLine(e.ToString())
            Console.WriteLine("Neither record was written to database.")
        End Try
    End Using
End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T05:16:00.617

oracle 要求显式提交，可能缺少

# java - 当我尝试从我的 web 应用程序在 tomcat 服务器中发送 get 或 post https 请求时出现 SSLHandshakeException

> ID：12190282
> 
> 赞同：0
> 
> 时间：2012-08-30T05:13:33.130
> 
> 标签：java, security, ssl, https, ssl-certificate

从我的 webapp 在 tomcat 服务器中发送 https 请求时引发以下异常

> javax.net.ssl.SSLHandshakeException：sun.security.validator.ValidatorException：PKIX 路径构建失败：sun.security.provider.certpath.SunCertPathBuilderException：无法找到请求目标的有效证书路径

这是我的小服务

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package LBS;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.HttpURLConnection;
import java.net.Proxy;
import java.net.SocketAddress;
import java.net.URL;
import java.net.URLConnection;
import javax.net.ssl.HttpsURLConnection;
//import javax.net.ssl.SSLContext;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.URL;
import java.security.cert.X509Certificate;
import javax.net.*;
import javax.net.ssl.*;
import java.security.cert.*;

/**
 *
 * @author Ruwan
 */
public class LBS2 extends HttpServlet {

/** 
 * Processes requests for both HTTP <code>GET</code> and <code>POST</code> methods.
 * @param request servlet request
 * @param response servlet response
 * @throws ServletException if a servlet-specific error occurs
 * @throws IOException if an I/O error occurs
 */
protected void processRequest(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    response.setContentType("text/html;charset=UTF-8");
    PrintWriter out = response.getWriter();
    try {
        LBS2 s=new LBS2();
        s.myReq();

    } finally {            
        out.close();
    }
}

public void myReq(){
  System.setProperty("https.proxyHost", "10.48.242.90");
  System.setProperty("https.proxyPort", "3128");
        String uri = "https://somthing.com/abc?username=USERNAME&password=PASWORD";

    try{
        SSLContext sslctx = SSLContext.getInstance("SSL");
        sslctx.init(null, new X509TrustManager[] { new MyTrustManager()}, null);
        HttpsURLConnection.setDefaultSSLSocketFactory(sslctx.getSocketFactory());
        URL url = new URL(uri);
        HttpURLConnection con = (HttpURLConnection) url.openConnection();
        con.setRequestMethod("GET");
        con.setDoOutput(true);
        con.connect();
        if (con.getResponseCode() == HttpsURLConnection.HTTP_OK) {
            BufferedReader br = new BufferedReader(new
            InputStreamReader(con.getInputStream()));
            String line;
            while((line = br.readLine()) != null) {
            System.out.println(line);
            }
            br.close();
        }
        con.disconnect();

        }
        catch(Exception e){
        System.out.println(e.toString());
        }
}

    // <editor-fold defaultstate="collapsed" desc="HttpServlet methods. Click on the +     sign on the left to edit the code.">
    /** 
 * Handles the HTTP <code>GET</code> method.
 * @param request servlet request
 * @param response servlet response
 * @throws ServletException if a servlet-specific error occurs
 * @throws IOException if an I/O error occurs
 */
@Override
protected void doGet(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    processRequest(request, response);
}

/** 
 * Handles the HTTP <code>POST</code> method.
 * @param request servlet request
 * @param response servlet response
 * @throws ServletException if a servlet-specific error occurs
 * @throws IOException if an I/O error occurs
 */
@Override
protected void doPost(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    processRequest(request, response);
}

/** 
 * Returns a short description of the servlet.
 * @return a String containing servlet description
 */
@Override
public String getServletInfo() {
    return "Short description";
}// </editor-fold>
}

class MyTrustManager implements X509TrustManager {
        @Override
            public void checkClientTrusted(X509Certificate[] chain, String
            authType) {
            }

        @Override
            public void checkServerTrusted(X509Certificate[] chain, String
            authType) {
            }

        @Override
            public X509Certificate[] getAcceptedIssuers() {
            return new X509Certificate[0];
        }
 } 
```

请帮助我提前在此代码中查找 SSL 证书处理的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T10:15:54.407

您的信任库不信任服务器的证书。您需要将其从服务器导出并安装在客户端。其他人发布的链接显示了一种方法。真正的问题可能是服务器使用的是自签名证书而不是 CA 签名证书，这只会导致每个客户端都出现此问题。最好的解决方案是花钱并解决它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T05:30:16.623

这可能会有所帮助：（摘自[http://code.naishe.in/2011/07/looks-like-article-no-more-unable-to.html](http://code.naishe.in/2011/07/looks-like-article-no-more-unable-to.html)）

> 你们中的一些人可能熟悉（不是非常用户友好的）异常消息
> 
> ```
>  javax.net.ssl.SSLHandshakeException: 
>   sun.security.validator.ValidatorException: PKIX path building failed:
>   sun.security.provider.certpath.SunCertPathBuilderException:
>   unable to find valid certification path to requested target 
> ```
> 
> 尝试使用 JSSE 打开与主机的 SSL 连接时。这通常意味着服务器正在使用测试证书（可能使用 keytool 生成），而不是来自知名商业证书颁发机构（如 Verisign 或 GoDaddy）的证书。在这种情况下，Web 浏览器会显示警告对话框，但由于 JSSE 无法假定存在交互式用户，因此默认情况下它只会抛出异常。

PS：渴望评论所以添加为答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T18:29:42.467

**问题：**正常的Java程序工作正常但是tomcat服务器中的webapp不能正常工作，尽管我使用了相同的方法/代码

**解决方案：** 所以我为 SSL 证书配置了 tomcat。如果有人遇到同样的问题。只需为 SSL 证书配置 tomcat。

[这将有助于为 SSL 证书配置 tomcat](http://java.dzone.com/articles/setting-ssl-tomcat-5-minutes)

感谢您的所有回答和评论。:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-14T13:45:09.387

我对来自 symantec 的有效签名通配符证书有同样的问题。

首先尝试使用***-Djavax.net.debug=SSL***运行您的 java 应用程序，看看到底发生了什么。

我最终导入了导致证书链中断***的中间证书。***

我从 symantec 下载了缺少的中间证书（您可以在 ssl 握手日志中看到缺少证书的下载链接：在我的情况下为[http://svrintl-g3-aia.verisign.com/SVRIntlG3.cer](http://svrintl-g3-aia.verisign.com/SVRIntlG3.cer)）。

我在 java 密钥库中导入了证书。导入中间证书后，我的通配符 ssl 证书终于开始工作了：

```
keytool -import -keystore ../jre/lib/security/cacerts -trustcacerts -alias "VeriSign Class 3 International Server CA - G3" -file /pathto/SVRIntlG3.cer 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-08-30T05:27:25.863

您需要返回 null 以绕过证书验证

```
 @Override
        public X509Certificate[] getAcceptedIssuers() {
        return null;
    } 
```

# vb.net - 如何缩短文本框控件的代码

> ID：12190285
> 
> 赞同：0
> 
> 时间：2012-08-30T05:13:53.690
> 
> 标签：vb.net, winforms, user-interface

我有 25 个文本框控件。以下代码仅适用于 2 个文本框。所以对于 25 个文本框，代码会很长，我可以缩短代码吗？

```
 Private Sub TextBox_KeyDown(ByVal sender As Object, ByVal e As KeyEventArgs) Handles IDTextBox.KeyDown, DateDateTimePicker.KeyDown, ItemCodeTextBox.KeyDown, BrandTextBox.KeyDown, ItemTextBox.KeyDown
    If e.KeyCode = Keys.Enter And Me.IDTextBox.Focused Then
        Me.DateDateTimePicker.Focus()
    Else
        If e.KeyCode = Keys.Down And Me.IDTextBox.Focused Then
            Me.DateDateTimePicker.Focus()
        Else
            If e.KeyCode = Keys.Up And Me.DateDateTimePicker.Focused Then
                Me.IDTextBox.Focus()
            Else
                If e.KeyCode = Keys.Enter And Me.DateDateTimePicker.Focused Then
                    Me.ItemCodeTextBox.Focus()
                Else
                    If e.KeyCode = Keys.Down And Me.DateDateTimePicker.Focused Then
                        Me.ItemCodeTextBox.Focus()
                    Else
                        If e.KeyCode = Keys.Up And Me.ItemCodeTextBox.Focused Then
                            Me.DateDateTimePicker.Focus()
                        End If
                    End If
                End If
            End If

        End If
    End If

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T06:30:17.073

我假设您正在尝试使用 enter 和箭头键启用表单导航。

如果是这样的话：

1.  删除该代码
2.  选择表单的设计视图
3.  右键单击 VB 工具栏并确保“布局”工具栏可见
4.  单击最右侧名为“Tab Order”的按钮
5.  按您想要的顺序单击每个控件
6.  将表单的“KeyPreview”属性设置为 TRUE

然后添加以下代码：

```
Private Sub Form1_KeyUp(sender As Object, e As System.Windows.Forms.KeyEventArgs) Handles Me.KeyUp
  If Me.ActiveControl.GetType Is GetType(DateTimePicker) Then
    'DateTimePicker
    Select Case e.KeyCode
      Case Keys.Enter
        Me.SelectNextControl(Me.ActiveControl, True, True, True, True) 'forwards
    End Select
  ElseIf Me.ActiveControl.GetType Is GetType(TextBox) AndAlso Not DirectCast(Me.ActiveControl, TextBox).Multiline Then
    'normal Textbox
    Select Case e.KeyCode
      Case Keys.Up
        Me.SelectNextControl(Me.ActiveControl, False, True, True, True)  'backwards
      Case Keys.Down, Keys.Enter
        Me.SelectNextControl(Me.ActiveControl, True, True, True, True) 'forwards
    End Select
  ElseIf Me.ActiveControl.GetType Is GetType(TextBox) AndAlso DirectCast(Me.ActiveControl, TextBox).Multiline Then
    'multiline Textbox - ignore
  Else
    'all other controls
    Select Case e.KeyCode
      Case Keys.Up
        Me.SelectNextControl(Me.ActiveControl, False, True, True, True)  'backwards
      Case Keys.Down, Keys.Enter
        Me.SelectNextControl(Me.ActiveControl, True, True, True, True) 'forwards
    End Select
  End If
End Sub 
```

上/下箭头键实际上由 DateTimePicker 使用，因此需要将其排除为导航命令。相反，多行文本框使用 ENTER 键，因此在这种情况下必须将 ENTER 作为导航命令排除。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-30T05:16:56.730

使用可以使用“选择案例”而不是“如果”条件使您的代码干净。这会干净得多。[看到这个链接](http://forums.asp.net/t/611892.aspx/1)

@Farook ......试试这个

```
Private Sub Form1_KeyUp(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyEventArgs) Handles Me.KeyUp
    Select Case True
        Case (e.KeyCode = Keys.Down And Me.ActiveControl.GetType IsNot GetType(DateTimePicker))
                Me.SelectNextControl(Me.ActiveControl, True, True, True, True) 'forwards
        Case (e.KeyCode = Keys.Enter And Not (Me.ActiveControl.GetType Is GetType(TextBox) AndAlso DirectCast(Me.ActiveControl, TextBox).Multiline))
            Me.Text = Me.SelectNextControl(Me.ActiveControl, True, True, True, True).ToString  'forwards
        Case (e.KeyCode = Keys.Up And Me.ActiveControl.GetType IsNot GetType(DateTimePicker))
            Me.SelectNextControl(Me.ActiveControl, False, True, True, True)  'backwards
    End Select
End Sub 
```

# windows - x86 程序集 - 窗口未显示但没有编译时错误

> ID：12190287
> 
> 赞同：1
> 
> 时间：2012-08-30T05:14:08.293
> 
> 标签：windows, assembly, x86, masm32

我正在尝试使用`CreateWindowEx`API 在 x86 程序集中创建一个带有 masm32 的窗口。我已经让我的代码没有编译时错误或任何类似的错误——它编译得很好。然而，当我运行 exe 时，什么也没有发生。我没有看到任何明显的错误，实际上我已经从 Iczelion 的 Win32 教程（第 3 部分 - 一个简单的窗口）中复制了代码。它有什么问题？

这是我的代码：

```
.386 
.model flat, stdcall 
option casemap :none 
WinMain proto :DWORD,:DWORD, :DWORD,:DWORD

include \masm32\include\windows.inc 
include \masm32\include\user32.inc 
include \masm32\include\kernel32.inc 
include \masm32\include\gdi32.inc 
includelib \masm32\lib\user32.lib 
includelib \masm32\lib\kernel32.lib 
includelib \masm32\lib\gdi32.lib

.data 
ClassName db "Testwin", 0
AppName db "Testing Window", 0
.data?
hInstance HINSTANCE ?
CommandLine LPSTR ?
.code 
start: 

push NULL
call GetModuleHandle
mov  hInstance,eax
call GetCommandLine
mov CommandLine, eax
push SW_SHOWDEFAULT
push CommandLine
push NULL
push hInstance
call WinMain
push eax
call ExitProcess

WinMain proc hInst:HINSTANCE,hPrevInst:HINSTANCE, CmdLine:LPSTR,CmdShow:DWORD
; local vars:
LOCAL wc:WNDCLASSEX 
LOCAL msg:MSG 
LOCAL hwnd:HWND

; defining the window:
mov   wc.cbSize,SIZEOF WNDCLASSEX 
mov   wc.style, CS_HREDRAW or CS_VREDRAW 
mov   wc.lpfnWndProc, OFFSET WndProc 
mov   wc.cbClsExtra,NULL 
mov   wc.cbWndExtra,NULL 
push  hInst 
pop   wc.hInstance 
mov   wc.hbrBackground,COLOR_WINDOW+1 
mov   wc.lpszMenuName,NULL 
mov   wc.lpszClassName,OFFSET ClassName 
invoke LoadIcon,NULL,IDI_APPLICATION 
mov   wc.hIcon,eax 
mov   wc.hIconSm,eax 
invoke LoadCursor,NULL,IDC_ARROW 
mov   wc.hCursor,eax 
invoke RegisterClassEx, addr wc 
;create the window
invoke CreateWindowEx,NULL,ADDR ClassName,ADDR AppName,\ 
       WS_OVERLAPPEDWINDOW,CW_USEDEFAULT,\ 
       CW_USEDEFAULT,CW_USEDEFAULT,CW_USEDEFAULT,NULL,NULL,\ 
       hInst,NULL
invoke ShowWindow,hwnd,SW_SHOWNORMAL
WinMain endp

WndProc proc hWnd:HWND, uMsg:UINT, wParam:WPARAM, lParam:LPARAM
cmp uMsg, WM_DESTROY
jne _next
invoke PostQuitMessage, NULL
_next:

WndProc endp
end start 
```

我哪里出错了？我怀疑它与`CreateWindowEx`，考虑到它需要 12 个参数，其中大部分我不明白。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T05:27:15.470

我相信您还没有将返回的窗口句柄分配`CreateWindowEx`给`hwnd`变量。

`invoke CreateWindowEx`所以在之前和之后添加以下行`invoke ShowWindow`-

```
mov hwnd, eax 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T23:03:21.487

1.  使用 Assebmly 时我们不编译任何东西！我们组装和链接。

2.  这不是 C 或任何其他高级语言，您不需要 WinMain。

3.  大佬，你的消息循环在哪里

在你的 CreateWindowEx 和 ShowWindow 之后，你需要这样的东西：

```
.while TRUE
    invoke GetMessage,addr msg,NULL,0,0
  .break .if !eax
    ;invoke IsDialogMessage,hModelessDialog,addr msg
    ;.if !eax
        ;invoke TranslateAccelerator,hWnd,hAccel,addr msg
        ;.if !eax
            invoke TranslateMessage,addr msg
            invoke DispatchMessage,addr msg
        ;.endif
    ;.endif
.endw 
```

您还缺少*ret*在您的过程结束时

# codeigniter - CodeIgniter - 从多个图像将文件名写入数据库

> ID：12190290
> 
> 赞同：1
> 
> 时间：2012-08-30T05:14:21.580
> 
> 标签：codeigniter

我有一个带有两个文件上传字段的上传表单。我正在尝试上传文件，然后将文件名写入数据库中的同一行。除了文件名被写入自己的行之外，我一切正常。我猜这是因为我对模型进行了两次单独的调用，但我不确定如何在一次调用中进行操作，因为它们都有自己的“if”语句。

为了让我的问题清楚。如何将两个上传文件的名称写入数据库的同一行？

任何想法都会很棒。这是我正在使用的代码。谢谢。

**看法：**

```
<?php echo form_open_multipart('upload_controller');  ?>
<p>
    <input type="file" name="userfile">
</p>
<p>
    <input type="file" name="userfile1">
</p>
<p><?php echo form_submit('submit', 'Upload them files!') ?></p>
<?php form_close() ?> 
```

**控制器：**

```
if (isset($_POST['submit'])) {
    $this->load->library('upload');

    if (!empty($_FILES['userfile']['name'])) {
        $config['upload_path'] = './uploads/';
        $config['allowed_types'] = 'gif|jpg|png|jpeg';
        $config['max_size'] = '100';
        $config['max_width'] = '1024';
        $config['max_height'] = '768';

        $this->upload->initialize($config);

        // Upload file 1
        if ($this->upload->do_upload('userfile')) {
            $img = $this->upload->data();
            $file_name = $img['file_name'];

            $this->load->model('upload_file', 'upload_model');
            $this->upload_model->upload_file1($file_name);
        }
    }

    if (!empty($_FILES['userfile1']['name'])) {
        $config['upload_path'] = './uploads/';
        $config['allowed_types'] = 'gif|jpg|png|jpeg';
        $config['max_size'] = '100';
        $config['max_width'] = '1024';
        $config['max_height'] = '768';

        $this->upload->initialize($config);

        // Upload file 2
        if ($this->upload->do_upload('userfile1')) {
            $img = $this->upload->data();
            $file_name = $img['file_name'];

            $this->load->model('upload_file', 'upload_model');
            $this->upload_model->upload_file2($file_name);
        } else {
            echo $this->upload->display_errors();
        }
    }
} else {
    $this->load->view("upload_form");
} 
```

**模型：**

```
public function upload_file1($file_name) {

    $data = array('file1' => $file_name);
    $this->db->insert('images_table', $data);
}

public function upload_file2($file_name) {

    $data = array('file2' => $file_name);
    $this->db->insert('images_table', $data);
} 
```

**数据库行：**

```
| id | file1 | file2 | 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T05:38:01.323

像这样尝试（如果你有文件数......在你的情况下它是 "2" ）

```
$this->load->model('upload_file', 'upload_model');
for($i=1;$i<=$numimg;$i++)                       //in your case $numimg = 2;
{
    if($this->upload->do_upload('File'.$i))      //File1,File2 are filenames
    {
       $img_data = $this->upload->data();
       $images[$i] = $img_data['file_name'];         
    }
 }
 $data['Image'] = implode(',',$images);
 $this->upload_model->upload_file($data); 
```

在您的模型中：

```
public function upload_file2($data)
{
    $data = array('file_name' => $data['Image']);
    $this->db->insert('images_table', $data);
} 
```

就是这样。如果你想从数据库中检索它

```
$images = explode(',',$data->file_name); 
```

它会给你一个图像名称数组。

# php - 非法混合排序规则mysql错误？

> ID：12190293
> 
> 赞同：0
> 
> 时间：2012-08-30T05:14:38.080
> 
> 标签：php, mysql, database, mysqli

我`geoloaction`用来查找返回 xml 数据的用户的当前位置

```
<geonames>
    <geoname>
        <toponymName>Gulbahar</toponymName>
        <name>Golīmar</name>
        <lat>24.8922</lat>
        <lng>67.0287</lng>
        <geonameId>1346867</geonameId>
        <countryCode>PK</countryCode>
        <countryName>Pakistan</countryName>
        <fcl>P</fcl>
        <fcode>PPLX</fcode>
        <distance>0.14608</distance>
    </geoname>
</geonames> 
```

现在我想要`<name>Golīmar</name>` 它有一个特殊字符，并且基于该名称我必须运行查询以获取除此之外的更多结果，但它会产生某种排序规则错误

```
SELECT DISTINCT country
FROM   propertydetails
WHERE  country NOT IN ( "Golīmar" ) 
```

> 错误：排序规则 (latin1_swedish_ci,IMPLICIT) AND (utf8_general_ci,COERCIBLE) FOR 操作的非法混合

我见过很多堆栈位置，但找不到解决方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T05:34:41.580

您的表排序规则和连接排序规则匹配不够紧密，无法使查询正常工作。确保它们都相同，最好是`utf8_general_ci`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T08:30:28.173

我已经解决了我的上述问题

```
SELECT DISTINCT country
FROM   propertydetails
WHERE  country NOT IN ( _latin1 "Golīmar" ) 
```

以及连接和表的字符集和排序规则`latin1`，`latin1_swedish_ci`

# php - 防止复制使用 dompdf 创建的 pdf 中的内容

> ID：12190294
> 
> 赞同：5
> 
> 时间：2012-08-30T05:14:45.733
> 
> 标签：php, file, email, pdf, dompdf

有没有办法阻止接收者在 dompdf 中选择和复制 pdf 文件的内容？

像那些打开时看起来像图片的其他pdf文件一样，所有的字母和图像都无法选择？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T15:25:51.463

您可以使用底层 CPDF 引擎来指定用户可以对文档执行的操作。根据 CPDF 文档：

> 调用 [setEncryption()] 函数将文档设置为加密，这是标记文档的唯一方法，以便用户无法使用剪切和粘贴或打印。
> 
> 使用不带选项的调用，默认阻止用户剪切和粘贴或打印。打开文档不需要密码。
> 
> 设置任何一个密码都意味着用户必须输入密码才能打开文档。如果在打开文档时输入了所有者密码，则用户将能够打印等。如果两个密码设置为相同（或所有者密码留空），则没有所有者密码，并且文档无法在可访问模式下打开。
> 
> pc 数组可用于允许特定操作。以下示例设置所有者密码、用户密码，并允许打印和剪切和粘贴。
> 
> ```
> $pdf->setEncryption('trees','frogs',array('copy','print')); 
> ```

使用上面的示例，使用 dompdf 您将首先呈现文档，然后发出以下内容：

```
$dompdf->get_canvas()->get_cpdf()->setEncryption('trees','frogs',array('copy','print')); 
```

（[谷歌网上论坛原创](https://groups.google.com/d/msg/dompdf-dev/IHnFkl7ejXw/wMFWFsNSStcJ)）

# c# - 托管服务提供商（登台服务器）的错误 CS0103 但不在我的机器中

> ID：12190298
> 
> 赞同：0
> 
> 时间：2012-08-30T05:15:13.977
> 
> 标签：c#, global-variables

我上传文件的服务器出错（它在我的机器上工作正常）：

> 编译器错误消息：CS0103：当前上下文中不存在名称“recipe_time”第 100 行：

```
<input id="recipe_time" name="recipe_time" type="hidden" 
value="<% =recipe_time %>" /> 
```

好的，显而易见的解释是我应该声明`recipe_time`，但它已经在我的`Site.Master`文件中的代码中声明（由 Default.aspx 使用）：

```
...
public partial class SiteMaster : System.Web.UI.MasterPage
{
    public int recipe_time = 0;
    protected void Page_Load(object sender, EventArgs e)
    {
    ...
    }
    ....
}
.... 
```

任何想法为什么会在登台服务器上发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T07:53:45.773

我删除了登台服务器上的所有内容并重新上传！这解决了问题！

当我通过 FTP 上传而不清除以前的 aspx 生成的文件时，可能没有替换某些东西

# css - 是否可以用微妙的曲线裁剪元素的底部？

> ID：12190299
> 
> 赞同：2
> 
> 时间：2012-08-30T05:15:17.380
> 
> 标签：css, overlay, z-index, crop, curve

我希望能够用大约 60px 深的曲线切断一个大 div（大约 2000px）的底部。目前我已经通过在顶部放置一个透明图像来实现这一点，从而将其切断。唯一的问题是主 div 上的某些元素无法访问，因为它们位于曲线叠加层后面。

我真的怀疑这是可能的，即使在 CSS3 中，但如果有人有任何想法，请分享。

此外，如果有一种方法我可以安排当前设置以允许单击曲线后面的主 div 中的元素，那么这将同样好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T05:20:43.143

您可以将边框半径应用于最底部...

```
-webkit-border-bottom-right-radius: 50px;
-webkit-border-bottom-left-radius: 50px;
-moz-border-radius-bottomright: 50px;
-moz-border-radius-bottomleft: 50px;
border-bottom-right-radius: 50px;
border-bottom-left-radius: 50px; 
```

[js小提琴](http://jsfiddle.net/2g6sB/)。

试验半径的值以获得所需的效果。

或者，您可以防止当前正在使用的元素阻止指针...

```
pointer-events: none; 
```

# asp-classic - 如何使用 asp-classic 上传文件

> ID：12190305
> 
> 赞同：15
> 
> 时间：2012-08-30T05:16:15.150
> 
> 标签：asp-classic

我想用 asp-classic 创建一个页面，用户可以在其中上传文件或压缩文件夹。

我在 Google 中搜索过，但我找到的每个解决方案都使用第三方文件。但我无法让这些文件正常工作。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-30T16:00:15.477

很久以来我已经这样做了，但是我们使用了没有第三方组件的上传，只有两个 vbscript 类（解决方案归功于 Lewis Moten）。
看起来你仍然可以在野外找到这个“Lewis Moten 解决方案”

如果您包含 clsUpload 文件，则进一步的上传过程非常简单：

```
Dim objUpload 
Dim strFile, strPath
' Instantiate Upload Class '
Set objUpload = New clsUpload
strFile = objUpload.Fields("file").FileName
strPath = server.mappath("/data") & "/" & strFile
' Save the binary data to the file system '
objUpload("file").SaveAs strPath
Set objUpload = Nothing 
```

这就是服务器端的全部......

在客户端，您只需要文件输入

```
<form name="Upload" enctype="multipart/form-data" method="post" action="clsUpload.asp">
<div>Upload file: </div>
<div><INPUT TYPE="file" NAME="file"  > 
<input type="button" name="FileUpload" value="Upload File">    </div>
</form> 
```

希望这可以帮助..

***编辑 2014 年 6 月 23 日***
正如 Dave Wut 所指出的，我对“野外”解决方案的引用与提供的代码片段并不完全一致。特此我曾经使用过的完整课程（评论被修剪以保持在 30000 SO 限制以下）。[这是在http://planet-source-code.com/vb/scripts/ShowCode.asp?txtCodeId=8525&lngWId=4](http://planet-source-code.com/vb/scripts/ShowCode.asp?txtCodeId=8525&lngWId=4)找到的 Lewis Moten 解决方案的早期版本

1) ***clsUpload.asp的内容***

```
<!--METADATA
  TYPE="TypeLib"
  NAME="Microsoft ActiveX Data Objects 2.5 Library"
  UUID="{00000205-0000-0010-8000-00AA006D2EA4}"
  VERSION="2.5"
-->
<!--#INCLUDE FILE="clsField.asp"-->

<%
' ------------------------------------------------------------------------------
'   Author:     Lewis Moten
'   Date:       March 19, 2002
' ------------------------------------------------------------------------------

' Upload class retrieves multi-part form data posted to web page
' and parses it into objects that are easy to interface with.
' Requires MDAC (ADODB) COM components found on most servers today
' Additional compenents are not necessary.
'

Class clsUpload
' ------------------------------------------------------------------------------

    Private mbinData            ' bytes visitor sent to server
    Private mlngChunkIndex      ' byte where next chunk starts
    Private mlngBytesReceived   ' length of data
    Private mstrDelimiter       ' Delimiter between multipart/form-data (43 chars)

    Private CR                  ' ANSI Carriage Return
    Private LF                  ' ANSI Line Feed
    Private CRLF                ' ANSI Carriage Return & Line Feed

    Private mobjFieldAry()      ' Array to hold field objects
    Private mlngCount           ' Number of fields parsed

' ------------------------------------------------------------------------------
    Private Sub RequestData

        Dim llngLength      ' Number of bytes received

        ' Determine number bytes visitor sent
        mlngBytesReceived = Request.TotalBytes

        ' Store bytes recieved from visitor
        mbinData = Request.BinaryRead(mlngBytesReceived)

    End Sub
' ------------------------------------------------------------------------------
    Private Sub ParseDelimiter()

        ' Delimiter seperates multiple pieces of form data
            ' "around" 43 characters in length
            ' next character afterwards is carriage return (except last line has two --)
            ' first part of delmiter is dashes followed by hex number
            ' hex number is possibly the browsers session id?

        ' Examples:

        ' -----------------------------7d230d1f940246
        ' -----------------------------7d22ee291ae0114

        mstrDelimiter = MidB(mbinData, 1, InStrB(1, mbinData, CRLF) - 1)

    End Sub
' ------------------------------------------------------------------------------
    Private Sub ParseData()

        ' This procedure loops through each section (chunk) found within the
        ' delimiters and sends them to the parse chunk routine

        Dim llngStart   ' start position of chunk data
        Dim llngLength  ' Length of chunk
        Dim llngEnd     ' Last position of chunk data
        Dim lbinChunk   ' Binary contents of chunk

        ' Initialize at first character
        llngStart = 1

        ' Find start position
        llngStart = InStrB(llngStart, mbinData, mstrDelimiter & CRLF)

        ' While the start posotion was found
        While Not llngStart = 0

            ' Find the end position (after the start position)
            llngEnd = InStrB(llngStart + 1, mbinData, mstrDelimiter) - 2

            ' Determine Length of chunk
            llngLength = llngEnd - llngStart

            ' Pull out the chunk
            lbinChunk = MidB(mbinData, llngStart, llngLength)

            ' Parse the chunk
            Call ParseChunk(lbinChunk)

            ' Look for next chunk after the start position
            llngStart = InStrB(llngStart + 1, mbinData, mstrDelimiter & CRLF)

        Wend

    End Sub
' ------------------------------------------------------------------------------
    Private Sub ParseChunk(ByRef pbinChunk)

        ' This procedure gets a chunk passed to it and parses its contents.
        ' There is a general format that the chunk follows.

        ' First, the deliminator appears

        ' Next, headers are listed on each line that define properties of the chunk.

        '   Content-Disposition: form-data: name="File1"; filename="C:\Photo.gif"
        '   Content-Type: image/gif

        ' After this, a blank line appears and is followed by the binary data.

        Dim lstrName            ' Name of field
        Dim lstrFileName        ' File name of binary data
        Dim lstrContentType     ' Content type of binary data
        Dim lbinData            ' Binary data
        Dim lstrDisposition     ' Content Disposition
        Dim lstrValue           ' Value of field

        ' Parse out the content dispostion
        lstrDisposition = ParseDisposition(pbinChunk)

            ' And Parse the Name
            lstrName = ParseName(lstrDisposition)

            ' And the file name
            lstrFileName = ParseFileName(lstrDisposition)

        ' Parse out the Content Type
        lstrContentType = ParseContentType(pbinChunk)

        ' If the content type is not defined, then assume the
        ' field is a normal form field
        If lstrContentType = "" Then

            ' Parse Binary Data as Unicode
            lstrValue = CStrU(ParseBinaryData(pbinChunk))

        ' Else assume the field is binary data
        Else

            ' Parse Binary Data
            lbinData = ParseBinaryData(pbinChunk)

        End If

        ' Add a new field
        Call AddField(lstrName, lstrFileName, lstrContentType, lstrValue, lbinData)

    End Sub
' ------------------------------------------------------------------------------
    Private Sub AddField(ByRef pstrName, ByRef pstrFileName, ByRef pstrContentType, ByRef pstrValue, ByRef pbinData)

        Dim lobjField       ' Field object class

        ' Add a new index to the field array
        ' Make certain not to destroy current fields
        ReDim Preserve mobjFieldAry(mlngCount)

        ' Create new field object
        Set lobjField = New clsField

        ' Set field properties
        lobjField.Name = pstrName
        lobjField.FilePath = pstrFileName               
        lobjField.ContentType = pstrContentType

        ' If field is not a binary file
        If LenB(pbinData) = 0 Then

            lobjField.BinaryData = ChrB(0)
            lobjField.Value = pstrValue
            lobjField.Length = Len(pstrValue)

        ' Else field is a binary file
        Else

            lobjField.BinaryData = pbinData
            lobjField.Length = LenB(pbinData)
            lobjField.Value = ""

        End If

        ' Set field array index to new field
        Set mobjFieldAry(mlngCount) = lobjField

        ' Incriment field count
        mlngCount = mlngCount + 1

    End Sub
' ------------------------------------------------------------------------------
    Private Function ParseBinaryData(ByRef pbinChunk)

        ' Parses binary content of the chunk

        Dim llngStart   ' Start Position

        ' Find first occurence of a blank line
        llngStart = InStrB(1, pbinChunk, CRLF & CRLF)

        ' If it doesn't exist, then return nothing
        If llngStart = 0 Then Exit Function

        ' Incriment start to pass carriage returns and line feeds
        llngStart = llngStart + 4

        ' Return the last part of the chunk after the start position
        ParseBinaryData = MidB(pbinChunk, llngStart)

    End Function
' ------------------------------------------------------------------------------
    Private Function ParseContentType(ByRef pbinChunk)

        ' Parses the content type of a binary file.
        '   example: image/gif is the content type of a GIF image.

        Dim llngStart   ' Start Position
        Dim llngEnd     ' End Position
        Dim llngLength  ' Length

        ' Fid the first occurance of a line starting with Content-Type:
        llngStart = InStrB(1, pbinChunk, CRLF & CStrB("Content-Type:"), vbTextCompare)

        ' If not found, return nothing
        If llngStart = 0 Then Exit Function

        ' Find the end of the line
        llngEnd = InStrB(llngStart + 15, pbinChunk, CR)

        ' If not found, return nothing
        If llngEnd = 0 Then Exit Function

        ' Adjust start position to start after the text "Content-Type:"
        llngStart = llngStart + 15

        ' If the start position is the same or past the end, return nothing
        If llngStart >= llngEnd Then Exit Function

        ' Determine length
        llngLength = llngEnd - llngStart

        ' Pull out content type
        ' Convert to unicode
        ' Trim out whitespace
        ' Return results
        ParseContentType = Trim(CStrU(MidB(pbinChunk, llngStart, llngLength)))

    End Function
' ------------------------------------------------------------------------------
    Private Function ParseDisposition(ByRef pbinChunk)

        ' Parses the content-disposition from a chunk of data
        '
        ' Example:
        '
        '   Content-Disposition: form-data: name="File1"; filename="C:\Photo.gif"
        '
        '   Would Return:
        '       form-data: name="File1"; filename="C:\Photo.gif"

        Dim llngStart   ' Start Position
        Dim llngEnd     ' End Position
        Dim llngLength  ' Length

        ' Find first occurance of a line starting with Content-Disposition:
        llngStart = InStrB(1, pbinChunk, CRLF & CStrB("Content-Disposition:"), vbTextCompare)

        ' If not found, return nothing
        If llngStart = 0 Then Exit Function

        ' Find the end of the line
        llngEnd = InStrB(llngStart + 22, pbinChunk, CRLF)

        ' If not found, return nothing
        If llngEnd = 0 Then Exit Function

        ' Adjust start position to start after the text "Content-Disposition:"
        llngStart = llngStart + 22

        ' If the start position is the same or past the end, return nothing
        If llngStart >= llngEnd Then Exit Function

        ' Determine Length
        llngLength = llngEnd - llngStart

        ' Pull out content disposition
        ' Convert to Unicode
        ' Return Results
        ParseDisposition = CStrU(MidB(pbinChunk, llngStart, llngLength))

    End Function
' ------------------------------------------------------------------------------
    Private Function ParseName(ByRef pstrDisposition)

        ' Parses the name of the field from the content disposition
        '
        ' Example
        '
        '   form-data: name="File1"; filename="C:\Photo.gif"
        '
        '   Would Return:
        '       File1

        Dim llngStart   ' Start Position
        Dim llngEnd     ' End Position
        Dim llngLength  ' Length

        ' Find first occurance of text name="
        llngStart = InStr(1, pstrDisposition, "name=""", vbTextCompare)

        ' If not found, return nothing
        If llngStart = 0 Then Exit Function

        ' Find the closing quote
        llngEnd = InStr(llngStart + 6, pstrDisposition, """")

        ' If not found, return nothing
        If llngEnd = 0 Then Exit Function

        ' Adjust start position to start after the text name="
        llngStart = llngStart + 6

        ' If the start position is the same or past the end, return nothing
        If llngStart >= llngEnd Then Exit Function

        ' Determine Length
        llngLength = llngEnd - llngStart

        ' Pull out field name
        ' Return results
        ParseName = Mid(pstrDisposition, llngStart, llngLength)

    End Function
' ------------------------------------------------------------------------------
    Private Function ParseFileName(ByRef pstrDisposition)
        ' Parses the name of the field from the content disposition
        '
        ' Example
        '
        '   form-data: name="File1"; filename="C:\Photo.gif"
        '
        '   Would Return:
        '       C:\Photo.gif

        Dim llngStart   ' Start Position
        Dim llngEnd     ' End Position
        Dim llngLength  ' Length

        ' Find first occurance of text filename="
        llngStart = InStr(1, pstrDisposition, "filename=""", vbTextCompare)

        ' If not found, return nothing
        If llngStart = 0 Then Exit Function

        ' Find the closing quote
        llngEnd = InStr(llngStart + 10, pstrDisposition, """")

        ' If not found, return nothing
        If llngEnd = 0 Then Exit Function

        ' Adjust start position to start after the text filename="
        llngStart = llngStart + 10

        ' If the start position is the same of past the end, return nothing
        If llngStart >= llngEnd Then Exit Function

        ' Determine length
        llngLength = llngEnd - llngStart

        ' Pull out file name
        ' Return results
        ParseFileName = Mid(pstrDisposition, llngStart, llngLength)

    End Function
' ------------------------------------------------------------------------------
    Public Property Get Count()

        ' Return number of fields found
        Count = mlngCount

    End Property
' ------------------------------------------------------------------------------

    Public Default Property Get Fields(ByVal pstrName)

        Dim llngIndex   ' Index of current field

        ' If a number was passed
        If IsNumeric(pstrName) Then

            llngIndex = CLng(pstrName)

            ' If programmer requested an invalid number
            If llngIndex > mlngCount - 1 Or llngIndex < 0 Then
                ' Raise an error
                Call Err.Raise(vbObjectError + 1, "clsUpload.asp", "Object does not exist within the ordinal reference.")
                Exit Property
            End If

            ' Return the field class for the index specified
            Set Fields = mobjFieldAry(pstrName)

        ' Else a field name was passed
        Else

            ' convert name to lowercase
            pstrName = LCase(pstrname)

            ' Loop through each field
            For llngIndex = 0 To mlngCount - 1

                ' If name matches current fields name in lowercase
                If LCase(mobjFieldAry(llngIndex).Name) = pstrName Then

                    ' Return Field Class
                    Set Fields = mobjFieldAry(llngIndex)
                    Exit Property

                End If

            Next

        End If

        ' If matches were not found, return an empty field
        Set Fields = New clsField

'       ' ERROR ON NonExistant:
'       ' If matches were not found, raise an error of a non-existent field
'       Call Err.Raise(vbObjectError + 1, "clsUpload.asp", "Object does not exist within the ordinal reference.")
'       Exit Property

    End Property
' ------------------------------------------------------------------------------
    Private Sub Class_Terminate()

        ' This event is called when you destroy the class.
        '
        ' Example:
        '   Set objUpload = Nothing
        '
        ' Example:
        '   Response.End
        '
        ' Example:
        '   Page finnishes executing ...

        Dim llngIndex   ' Current Field Index

        ' Loop through fields
        For llngIndex = 0 To mlngCount - 1

            ' Release field object
            Set mobjFieldAry(llngIndex) = Nothing

        Next

        ' Redimension array and remove all data within
        ReDim mobjFieldAry(-1)

    End Sub
' ------------------------------------------------------------------------------
    Private Sub Class_Initialize()

        ' This event is called when you instantiate the class.
        '
        ' Example:
        '   Set objUpload = New clsUpload

        ' Redimension array with nothing
        ReDim mobjFieldAry(-1)

        ' Compile ANSI equivilants of carriage returns and line feeds

        CR = ChrB(Asc(vbCr))    ' vbCr      Carriage Return
        LF = ChrB(Asc(vbLf))    ' vbLf      Line Feed
        CRLF = CR & LF          ' vbCrLf    Carriage Return & Line Feed

        ' Set field count to zero
        mlngCount = 0

        ' Request data
        Call RequestData

        ' Parse out the delimiter
        Call ParseDelimiter()

        ' Parse the data
        Call ParseData

    End Sub
' ------------------------------------------------------------------------------
    Private Function CStrU(ByRef pstrANSI)

        ' Converts an ANSI string to Unicode
        ' Best used for small strings

        Dim llngLength  ' Length of ANSI string
        Dim llngIndex   ' Current position

        ' determine length
        llngLength = LenB(pstrANSI)

        ' Loop through each character
        For llngIndex = 1 To llngLength

            ' Pull out ANSI character
            ' Get Ascii value of ANSI character
            ' Get Unicode Character from Ascii
            ' Append character to results
            CStrU = CStrU & Chr(AscB(MidB(pstrANSI, llngIndex, 1)))

        Next

    End Function
' ------------------------------------------------------------------------------
    Private Function CStrB(ByRef pstrUnicode)

        ' Converts a Unicode string to ANSI
        ' Best used for small strings

        Dim llngLength  ' Length of ANSI string
        Dim llngIndex   ' Current position

        ' determine length
        llngLength = Len(pstrUnicode)

        ' Loop through each character
        For llngIndex = 1 To llngLength

            ' Pull out Unicode character
            ' Get Ascii value of Unicode character
            ' Get ANSI Character from Ascii
            ' Append character to results
            CStrB = CStrB & ChrB(Asc(Mid(pstrUnicode, llngIndex, 1)))

        Next

    End Function
' ------------------------------------------------------------------------------
End Class
' ------------------------------------------------------------------------------
%> 
```

2) ***clsField.asp的内容***

```
<%
' ------------------------------------------------------------------------------
'   Author:     Lewis Moten
'   Date:       March 19, 2002
' ------------------------------------------------------------------------------

' Field class represents interface to data passed within one field
'
' ------------------------------------------------------------------------------
Class clsField

    Public Name             ' Name of the field defined in form

    Private mstrPath        ' Full path to file on visitors computer
                            ' C:\Documents and Settings\lmoten\Desktop\Photo.gif

    Public FileDir          ' Directory that file existed in on visitors computer
                            ' C:\Documents and Settings\lmoten\Desktop

    Public FileExt          ' Extension of the file
                            ' GIF

    Public FileName         ' Name of the file
                            ' Photo.gif

    Public ContentType      ' Content / Mime type of file
                            ' image/gif

    Public Value            ' Unicode value of field (used for normail form fields - not files)

    Public BinaryData       ' Binary data passed with field (for files)

    Public Length           ' byte size of value or binary data

    Private mstrText        ' Text buffer 
                                ' If text format of binary data is requested more then
                                ' once, this value will be read to prevent extra processing

' ------------------------------------------------------------------------------
    Public Property Get BLOB()
        BLOB = BinaryData
    End Property
' ------------------------------------------------------------------------------
    Public Function BinaryAsText()

        ' Binary As Text returns the unicode equivilant of the binary data.
        ' this is useful if you expect a visitor to upload a text file that
        ' you will need to work with.

        ' NOTICE:
        ' NULL values will prematurely terminate your Unicode string.
        ' NULLs are usually found within binary files more often then plain-text files.
        ' a simple way around this may consist of replacing null values with another character
        ' such as a space " "

        Dim lbinBytes
        Dim lobjRs

        ' Don't convert binary data that does not exist
        If Length = 0 Then Exit Function
        If LenB(BinaryData) = 0 Then Exit Function

        ' If we previously converted binary to text, return the buffered content
        If Not Len(mstrText) = 0 Then
            BinaryAsText = mstrText
            Exit Function
        End If

        ' Convert Integer Subtype Array to Byte Subtype Array
        lbinBytes = ASCII2Bytes(BinaryData)

        ' Convert Byte Subtype Array to Unicode String
        mstrText = Bytes2Unicode(lbinBytes)

        ' Return Unicode Text
        BinaryAsText = mstrText

    End Function
' ------------------------------------------------------------------------------
    Public Sub SaveAs(ByRef pstrFileName)

        Dim lobjStream
        Dim lobjRs
        Dim lbinBytes

        ' Don't save files that do not posess binary data
        If Length = 0 Then Exit Sub
        If LenB(BinaryData) = 0 Then Exit Sub

        ' Create magical objects from never never land
        Set lobjStream = Server.CreateObject("ADODB.Stream")

        ' Let stream know we are working with binary data
        lobjStream.Type = adTypeBinary

        ' Open stream
        Call lobjStream.Open()

        ' Convert Integer Subtype Array to Byte Subtype Array
        lbinBytes = ASCII2Bytes(BinaryData)

        ' Write binary data to stream
        Call lobjStream.Write(lbinBytes)

        ' Save the binary data to file system
        '   Overwrites file if previously exists!
        Call lobjStream.SaveToFile(pstrFileName, adSaveCreateOverWrite)

        ' Close the stream object
        Call lobjStream.Close()

        ' Release objects
        Set lobjStream = Nothing

    End Sub
' ------------------------------------------------------------------------------
    Public Property Let FilePath(ByRef pstrPath)

        mstrPath = pstrPath

        ' Parse File Ext
        If Not InStrRev(pstrPath, ".") = 0 Then
            FileExt = Mid(pstrPath, InStrRev(pstrPath, ".") + 1)
            FileExt = UCase(FileExt)
        End If

        ' Parse File Name
        If Not InStrRev(pstrPath, "\") = 0 Then
            FileName = Mid(pstrPath, InStrRev(pstrPath, "\") + 1)
        End If

        ' Parse File Dir
        If Not InStrRev(pstrPath, "\") = 0 Then
            FileDir = Mid(pstrPath, 1, InStrRev(pstrPath, "\") - 1)
        End If

    End Property
' ------------------------------------------------------------------------------
    Public Property Get FilePath()
        FilePath = mstrPath
    End Property
' ------------------------------------------------------------------------------
    Private Function ASCII2Bytes(ByRef pbinBinaryData)

        Dim lobjRs
        Dim llngLength
        Dim lbinBuffer

        ' get number of bytes
        llngLength = LenB(pbinBinaryData)

        Set lobjRs = Server.CreateObject("ADODB.Recordset")

        ' create field in an empty recordset to hold binary data
        Call lobjRs.Fields.Append("BinaryData", adLongVarBinary, llngLength)

        ' Open recordset
        Call lobjRs.Open()

        ' Add a new record to recordset
        Call lobjRs.AddNew()

        ' Populate field with binary data
        Call lobjRs.Fields("BinaryData").AppendChunk(pbinBinaryData & ChrB(0))

        ' Update / Convert Binary Data
            ' Although the data we have is binary - it has still been
            ' formatted as 4 bytes to represent each byte.  When we
            ' update the recordset, the Integer Subtype Array that we
            ' passed into the Recordset will be converted into a
            ' Byte Subtype Array
        Call lobjRs.Update()

        ' Request binary data and save to stream
        lbinBuffer = lobjRs.Fields("BinaryData").GetChunk(llngLength)

        ' Close recordset
        Call lobjRs.Close()

        ' Release recordset from memory
        Set lobjRs = Nothing

        ' Return Bytes
        ASCII2Bytes = lbinBuffer

    End Function
' ------------------------------------------------------------------------------
    Private Function Bytes2Unicode(ByRef pbinBytes)

        Dim lobjRs
        Dim llngLength
        Dim lstrBuffer

        llngLength = LenB(pbinBytes)

        Set lobjRs = Server.CreateObject("ADODB.Recordset")

        ' Create field in an empty recordset to hold binary data
        Call lobjRs.Fields.Append("BinaryData", adLongVarChar, llngLength)

        ' Open Recordset
        Call lobjRs.Open()

        ' Add a new record to recordset
        Call lobjRs.AddNew()

        ' Populate field with binary data
        Call lobjRs.Fields("BinaryData").AppendChunk(pbinBytes)

        ' Update / Convert.
            ' Ensure bytes are proper subtype
        Call lobjRs.Update()

        ' Request unicode value of binary data
        lstrBuffer = lobjRs.Fields("BinaryData").Value

        ' Close recordset
        Call lobjRs.Close()

        ' Release recordset from memory
        Set lobjRs = Nothing

        ' Return Unicode
        Bytes2Unicode = lstrBuffer

    End Function

' ------------------------------------------------------------------------------
End Class
' ------------------------------------------------------------------------------
%> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-03T12:48:36.470

属性 FileName 从未设置，我在 Private Sub AddField(...)

```
 lobjField.Name = pstrName
    lobjField.FilePath = pstrFileName   
    lobjField.FileName = Mid(pstrFileName, InStrRev(pstrFileName, "\") + 1) ' <= line added to set the file name
    lobjField.ContentType = pstrContentType 
```

您还必须声明以下常量： Const adSaveCreateOverWrite = 2

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2014-01-10T17:31:05.780

不幸的是，如果不努力使用第三方脚本并对您的服务器进行一些调整，就不可能设置上传服务。

但是，您可以向您的托管服务提供商查询已安装的组件列表；大多数托管服务还维护库/常见问题解答/wiki，以及如何使用这些组件的几乎现成的示例。如果没有，仍然有 FreeAspUpload，它是一个无 DLL 组件，因此可以在任何 Classic ASP 服务器上使用。

在确定您将使用哪个组件/脚本后，您还必须检查目标上传文件夹的写入权限。如果您无法设置具有写入文件权限的目标文件夹，则您的上传将无法正常工作。检查您的托管服务提供商的控制面板是否允许您这样做，或者您是否需要请求这些更改。

# iphone - 释放对象时应用程序崩溃

> ID：12190313
> 
> 赞同：0
> 
> 时间：2012-08-30T05:17:00.023
> 
> 标签：iphone

我正在开发一个 iPhone 应用程序。在该应用程序中，我通过以下方式从一个视图切换到另一个视图

```
loginpage *loginview = [[loginpage alloc]init];

[self presentModelViewController:loginview animated:YES]; 
```

`[loginview release];`

这段代码。它工作正常。但是在第二个视图（登录页面）中，当我按下后退按钮时，比这段代码

```
[self dismissModalViewControllerAnimated:Yes]; 
```

被解雇并在该应用程序崩溃后。任何人都可以帮助我。请建议我该怎么做才能解决这个问题。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T06:00:42.967

一些问题可能在您的 loginView 类的 dealloc 方法中。在此方法中添加断点，并逐步运行...还启用僵尸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T05:44:12.493

您的代码没有任何错误。该代码运行良好，只是尝试找到导致崩溃的其他问题。并将崩溃报告放在上面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T05:45:50.050

只需在`.h`文件中声明对象。该登录页面 *loginview; `-(void)dealloc`并在方法中释放对象 。

# yii - 如何自定义不在我的数据库中的 zii cgrid coiumn

> ID：12190325
> 
> 赞同：0
> 
> 时间：2012-08-30T05:18:44.717
> 
> 标签：yii

我正在使用 zii.widgets.grid.CGridView .....我想在这个中添加新的 coulmn。这不在我的数据库中。如何添加此列以便它显示在列表中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T06:44:30.527

只需添加一个新列并手动稳定值：

```
'columns'=>array(
    'something',
    array(              
        'header'=> 'Custom',
        'type'  => 'raw',
        'value' => '"something"'
    ),
), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T05:24:37.340

这两篇文章可能会有所帮助：

CGridView 参考： [http ://www.yiiframework.com/doc/api/1.1/CGridView](http://www.yiiframework.com/doc/api/1.1/CGridView)

CGridView - 渲染自定义列： [http ://www.yiiframework.com/wiki/278/cgridview-render-customized-complex-datacolumns/](http://www.yiiframework.com/wiki/278/cgridview-render-customized-complex-datacolumns/)

# c# - 解析 1 TB 的文本并有效计算每个单词的出现次数

> ID：12190326
> 
> 赞同：58
> 
> 时间：2012-08-30T05:18:47.723
> 
> 标签：c#, algorithm

最近我遇到了一个面试问题，用任何语言创建一个算法，它应该执行以下操作

1.  读取 1 TB 的内容
2.  计算该内容中每个重复出现的单词
3.  列出出现频率最高的 10 个单词

您能否让我知道为此创建算法的最佳方法？

编辑：

好的，假设内容是英文的。我们如何找到该内容中出现频率最高的前 10 个单词？我的另一个疑问是，如果他们故意提供唯一数据，那么我们的缓冲区将因堆大小溢出而过期。我们也需要处理。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-09-12T21:57:53.453

## 面试答案

这个任务很有趣，不太复杂，因此是开始良好技术讨论的好方法。我完成这项任务的计划是：

1.  将输入数据拆分为单词，使用空格和标点符号作为分隔符
2.  将找到的每个单词输入到[Trie](http://en.wikipedia.org/wiki/Trie)结构中，并在表示单词的最后一个字母的节点中更新计数器
3.  遍历完全填充的树以查找具有最高计数的节点

在采访的背景下……我会通过在白板或纸上画树来展示[Trie的想法。](http://en.wikipedia.org/wiki/Trie)从空开始，然后基于包含至少一个重复单词的单个句子构建树。说*“猫捉老鼠”*。最后展示如何遍历树以找到最高计数。然后，我将证明这棵树如何提供良好的内存使用、良好的单词查找速度（尤其是在许多单词相互派生的自然语言的情况下）以及适用于并行处理。

**在黑板上画**

![绘制示例树](../Images/d66671ec40973d21312e5bb61d49ca67.png)

## 演示

下面的 C# 程序在 4 核至强 W3520 上在 75 秒内处理 2GB 的文本，最多使用 8 个线程。性能约为**每秒 430 万字**，但输入解析代码并不理想。使用[Trie 结构](http://en.wikipedia.org/wiki/Trie)存储单词，在处理自然语言输入时，内存不是问题。

笔记：

*   从[Gutenberg 项目获得的测试文本](http://www.gutenberg.org)
*   输入解析代码假定换行符并且非常次优
*   标点符号和其他非单词的去除做得不是很好
*   处理**一个大文件**而不是几个小文件将需要少量代码来开始读取文件内指定偏移量之间的线程。

* * *

```
using System;
using System.Collections.Generic;
using System.Collections.Concurrent;
using System.IO;
using System.Threading;

namespace WordCount
{
    class MainClass
    {
        public static void Main(string[] args)
        {
            Console.WriteLine("Counting words...");
            DateTime start_at = DateTime.Now;
            TrieNode root = new TrieNode(null, '?');
            Dictionary<DataReader, Thread> readers = new Dictionary<DataReader, Thread>();

            if (args.Length == 0)
            {
                args = new string[] { "war-and-peace.txt", "ulysees.txt", "les-miserables.txt", "the-republic.txt",
                                      "war-and-peace.txt", "ulysees.txt", "les-miserables.txt", "the-republic.txt" };
            }

            if (args.Length > 0)
            {
                foreach (string path in args)
                {
                    DataReader new_reader = new DataReader(path, ref root);
                    Thread new_thread = new Thread(new_reader.ThreadRun);
                    readers.Add(new_reader, new_thread);
                    new_thread.Start();
                }
            }

            foreach (Thread t in readers.Values) t.Join();

            DateTime stop_at = DateTime.Now;
            Console.WriteLine("Input data processed in {0} secs", new TimeSpan(stop_at.Ticks - start_at.Ticks).TotalSeconds);
            Console.WriteLine();
            Console.WriteLine("Most commonly found words:");

            List<TrieNode> top10_nodes = new List<TrieNode> { root, root, root, root, root, root, root, root, root, root };
            int distinct_word_count = 0;
            int total_word_count = 0;
            root.GetTopCounts(ref top10_nodes, ref distinct_word_count, ref total_word_count);
            top10_nodes.Reverse();
            foreach (TrieNode node in top10_nodes)
            {
                Console.WriteLine("{0} - {1} times", node.ToString(), node.m_word_count);
            }

            Console.WriteLine();
            Console.WriteLine("{0} words counted", total_word_count);
            Console.WriteLine("{0} distinct words found", distinct_word_count);
            Console.WriteLine();
            Console.WriteLine("done.");
        }
    }

    #region Input data reader

    public class DataReader
    {
        static int LOOP_COUNT = 1;
        private TrieNode m_root;
        private string m_path;        

        public DataReader(string path, ref TrieNode root)
        {
            m_root = root;
            m_path = path;
        }

        public void ThreadRun()
        {
            for (int i = 0; i < LOOP_COUNT; i++) // fake large data set buy parsing smaller file multiple times
            {
                using (FileStream fstream = new FileStream(m_path, FileMode.Open, FileAccess.Read))
                {
                    using (StreamReader sreader = new StreamReader(fstream))
                    {
                        string line;
                        while ((line = sreader.ReadLine()) != null)
                        {
                            string[] chunks = line.Split(null);
                            foreach (string chunk in chunks)
                            {
                                m_root.AddWord(chunk.Trim());
                            }
                        }
                    }
                }
            }
        }
    }

    #endregion

    #region TRIE implementation

    public class TrieNode : IComparable<TrieNode>
    {
        private char m_char;
        public int m_word_count;
        private TrieNode m_parent = null;
        private ConcurrentDictionary<char, TrieNode> m_children = null;

        public TrieNode(TrieNode parent, char c)
        {
            m_char = c;
            m_word_count = 0;
            m_parent = parent;
            m_children = new ConcurrentDictionary<char, TrieNode>();            
        }

        public void AddWord(string word, int index = 0)
        {
            if (index < word.Length)
            {
                char key = word[index];
                if (char.IsLetter(key)) // should do that during parsing but we're just playing here! right?
                {
                    if (!m_children.ContainsKey(key))
                    {
                        m_children.TryAdd(key, new TrieNode(this, key));
                    }
                    m_children[key].AddWord(word, index + 1);
                }
                else
                {
                    // not a letter! retry with next char
                    AddWord(word, index + 1);
                }
            }
            else
            {
                if (m_parent != null) // empty words should never be counted
                {
                    lock (this)
                    {
                        m_word_count++;                        
                    }
                }
            }
        }

        public int GetCount(string word, int index = 0)
        {
            if (index < word.Length)
            {
                char key = word[index];
                if (!m_children.ContainsKey(key))
                {
                    return -1;
                }
                return m_children[key].GetCount(word, index + 1);
            }
            else
            {
                return m_word_count;
            }
        }

        public void GetTopCounts(ref List<TrieNode> most_counted, ref int distinct_word_count, ref int total_word_count)
        {
            if (m_word_count > 0)
            {
                distinct_word_count++;
                total_word_count += m_word_count;
            }
            if (m_word_count > most_counted[0].m_word_count)
            {
                most_counted[0] = this;
                most_counted.Sort();
            }
            foreach (char key in m_children.Keys)
            {
                m_children[key].GetTopCounts(ref most_counted, ref distinct_word_count, ref total_word_count);
            }
        }

        public override string ToString()
        {
            if (m_parent == null) return "";
            else return m_parent.ToString() + m_char;
        }

        public int CompareTo(TrieNode other)
        {
            return this.m_word_count.CompareTo(other.m_word_count);
        }
    }

    #endregion
} 
```

这里是跨 8 个线程处理相同的 20MB 文本 100 次的输出。

```
Counting words...
Input data processed in 75.2879952 secs

Most commonly found words:
the - 19364400 times
of - 10629600 times
and - 10057400 times
to - 8121200 times
a - 6673600 times
in - 5539000 times
he - 4113600 times
that - 3998000 times
was - 3715400 times
his - 3623200 times

323618000 words counted
60896 distinct words found 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-08-30T15:28:28.590

这里很大程度上取决于一些尚未指定的事情。例如，我们是尝试做*一次*，还是尝试建立一个系统来定期和持续地做这件事？我们对输入有任何控制权吗？我们是在处理全部使用一种语言（例如英语）的文本还是代表多种语言（如果是，有多少种）？

这些很重要，因为：

1.  如果数据从单个硬盘驱动器开始，并行计数（例如，map-reduce）不会有任何真正的好处——瓶颈将是磁盘的传输速度。将副本复制到更多磁盘以便我们可以更快地计数将比直接从一个磁盘计数要慢。
2.  如果我们要设计一个系统来定期执行此操作，那么我们的大部分重点实际上是在硬件上——具体来说，有很多并行磁盘以增加我们的带宽，并且至少更接近于跟上中央处理器。
3.  无论您阅读多少文本，您需要处理的离散单词的数量都是有限的——无论您有 1 TB 甚至 1 PB 的英文文本，您都不会看到数十亿的不同的英语单词。快速检查一下，牛津英语词典列出了大约 600,000 个英语单词。
4.  虽然不同语言之间的实际单词明显不同，但每种语言的单词数量*大致*是恒定的，因此我们构建的地图的大小将在很大程度上取决于所代表的语言数量。

这主要留下了可以表示多少种语言的问题。目前，让我们假设最坏的情况。ISO 639-2 有 485 种人类语言的代码。假设每种语言平均有 700,000 个单词，并且每个单词的平均单词长度为 10 个字节的 UTF-8。

只是存储为简单的线性列表，这意味着我们可以将地球上每种语言的每个单词以及 8 字节的频率计数存储在略小于 6 GB 的空间中。如果我们改用 Patricia trie 之类的东西，我们*可能*至少可以计划缩小一些 - 很可能是 3 GB 或更少，尽管我对所有这些语言的了解还不够，无法完全确定。

现在，现实情况是，我们几乎可以肯定地高估了那里许多地方的数字——相当多的语言共享相当多的单词，许多（尤其是较老的）语言的单词可能比英语少，并且浏览一下列表中，似乎包含了一些可能根本没有书面形式的内容。

总结：几乎任何相当新的桌面/服务器都有足够的内存来将地图完全保存在 RAM 中——更多的数据不会改变这一点。对于一个（或几个）并行磁盘，无论如何我们都会受到 I/O 限制，因此并行计数（等等）可能是净损失。在任何其他优化意义重大之前，我们可能需要并行处理数十个磁盘。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-08-30T05:31:15.273

您可以为此任务尝试使用**[map-reduce方法。](http://en.wikipedia.org/wiki/MapReduce)**map-reduce 的优势在于可扩展性，因此即使对于 1TB、10TB 或 1PB，同样的方法也可以使用，并且您无需做很多工作来修改算法以适应新的比例。该框架还将负责在集群中的所有机器（和核心）之间分配工作。

首先 - 创建`(word,occurances)`对。
伪代码将是这样的：

```
map(document):
  for each word w:
     EmitIntermediate(w,"1")

reduce(word,list<val>):
   Emit(word,size(list)) 
```

其次，您可以通过对对的单次迭代轻松找到出现次数最高的那些，[该线程](https://stackoverflow.com/q/10751953/572670)解释了这个概念。主要思想是保持前 K 个元素的最小堆，并在迭代时 - 确保堆始终包含到目前为止看到的前 K 个元素。完成后 - 堆包含前 K 个元素。

一个更具可扩展性（如果你的机器很少的话会更慢）的替代方案是你使用 map-reduce 排序功能，并根据出现次数对数据进行排序，然后只需 grep 前 K。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-08-30T05:27:20.850

为此需要注意三件事。

具体来说：文件太大而无法保存在内存中，单词列表（可能）太大而无法保存在内存中，对于 32 位 int 而言，字数可能太大。

一旦你通过了这些警告，它应该是直截了当的。游戏正在管理可能很大的单词列表。

如果它更容易（防止你的头旋转）。

“您正在运行一台 Z-80 8 位机器，具有 65K 的 RAM 和一个 1MB 的文件......”

同样的问题。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-09-16T06:37:24.900

It depends on the requirements, but if you can afford some error, **streaming algorithms** and **probabilistic data structures** can be interesting because they are very time and space efficient and quite simple to implement, for instance:

*   Heavy hitters (e.g., Space Saving), if you are interested only in the top n most frequent words
*   Count-min sketch, to get an estimated count for any word

Those data structures require only very little constant space (exact amount depends on error you can tolerate).

See [http://alex.smola.org/teaching/berkeley2012/streams.html](http://alex.smola.org/teaching/berkeley2012/streams.html) for an excellent description of these algorithms.

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-09-13T05:17:18.203

我很想使用 DAWG（[维基百科](http://en.wikipedia.org/wiki/Deterministic_acyclic_finite_state_automaton)和[包含更多详细信息的 C# 文章](http://www.dotnetperls.com/directed-acyclic-word-graph)）。在叶子节点上添加一个计数字段非常简单，有效的内存并且在查找方面表现非常好。

编辑：虽然你试过简单地使用 a`Dictionary<string, int>`吗？>哪里`<string, int`代表单词和计数？也许您尝试过早地进行优化？

编者注：这篇文章最初链接到[这篇维基百科文章](http://en.wikipedia.org/wiki/Directed_acyclic_word_graph)，这似乎是关于术语 DAWG 的另一种含义：一种存储一个单词的所有子字符串的方法，用于有效的近似字符串匹配。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-08-30T06:22:49.447

另一种解决方案可能是使用**SQL**表，并让系统尽可能好地处理数据。`word`首先为集合中的每个单词创建具有单个字段的表。

然后使用查询（对不起语法问题，我的 SQL 生锈了 - 这实际上是一个伪代码）：

```
SELECT DISTINCT word, COUNT(*) AS c FROM myTable GROUP BY word ORDER BY c DESC 
```

总体思路是先生成一个包含所有单词的表（存储在磁盘上），然后使用查询`(word,occurances)`为您进行计数和排序。然后，您可以从检索到的列表中取出前 K 个。

* * *

致所有人：如果我在 SQL 语句中确实有任何语法或其他问题：请随时编辑

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-10-20T19:16:17.677

首先，我最近才“发现” Trie 数据结构，而 zeFrenchy 的回答非常适合让我加快速度。

我确实在评论中看到有几个人就如何提高其性能提出了建议，但这些只是微小的调整，所以我想我会与你分享我发现的真正瓶颈...... ConcurrentDictionary。

我想尝试使用线程本地存储，您的示例给了我一个很好的机会来做到这一点，经过一些小的更改，每个线程使用一个字典，然后在 Join() 看到性能提高 ~30% 之后组合字典（在我的机器上，跨 8 个线程处理 20MB 100 次从 ~48 秒到 ~33 秒）。

代码粘贴在下面，您会注意到与批准的答案没有太大变化。

PS 我没有超过 50 个声望点，所以我不能把它放在评论中。

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Text;
using System.Threading;

namespace WordCount
{
    class MainClass
    {
        public static void Main(string[] args)
        {
            Console.WriteLine("Counting words...");
            DateTime start_at = DateTime.Now;
            Dictionary<DataReader, Thread> readers = new Dictionary<DataReader, Thread>();
            if (args.Length == 0)
            {
                args = new string[] { "war-and-peace.txt", "ulysees.txt", "les-miserables.txt", "the-republic.txt",
                                      "war-and-peace.txt", "ulysees.txt", "les-miserables.txt", "the-republic.txt" };
            }

            List<ThreadLocal<TrieNode>> roots;
            if (args.Length == 0)
            {
                roots = new List<ThreadLocal<TrieNode>>(1);
            }
            else
            {
                roots = new List<ThreadLocal<TrieNode>>(args.Length);

                foreach (string path in args)
                {
                    ThreadLocal<TrieNode> root = new  ThreadLocal<TrieNode>(() =>
                    {
                        return new TrieNode(null, '?');
                    });

                    roots.Add(root);

                    DataReader new_reader = new DataReader(path, root);
                    Thread new_thread = new Thread(new_reader.ThreadRun);
                    readers.Add(new_reader, new_thread);
                    new_thread.Start();
                }
            }

            foreach (Thread t in readers.Values) t.Join();

            foreach(ThreadLocal<TrieNode> root in roots.Skip(1))
            {
                roots[0].Value.CombineNode(root.Value);
                root.Dispose();
            }

            DateTime stop_at = DateTime.Now;
            Console.WriteLine("Input data processed in {0} secs", new TimeSpan(stop_at.Ticks - start_at.Ticks).TotalSeconds);
            Console.WriteLine();
            Console.WriteLine("Most commonly found words:");

            List<TrieNode> top10_nodes = new List<TrieNode> { roots[0].Value, roots[0].Value, roots[0].Value, roots[0].Value, roots[0].Value, roots[0].Value, roots[0].Value, roots[0].Value, roots[0].Value, roots[0].Value };
            int distinct_word_count = 0;
            int total_word_count = 0;
            roots[0].Value.GetTopCounts(top10_nodes, ref distinct_word_count, ref total_word_count);

            top10_nodes.Reverse();
            foreach (TrieNode node in top10_nodes)
            {
                Console.WriteLine("{0} - {1} times", node.ToString(), node.m_word_count);
            }

            roots[0].Dispose();

            Console.WriteLine();
            Console.WriteLine("{0} words counted", total_word_count);
            Console.WriteLine("{0} distinct words found", distinct_word_count);
            Console.WriteLine();
            Console.WriteLine("done.");
            Console.ReadLine();
        }
    }

    #region Input data reader

    public class DataReader
    {
        static int LOOP_COUNT = 100;
        private TrieNode m_root;
        private string m_path;

        public DataReader(string path, ThreadLocal<TrieNode> root)
        {
            m_root = root.Value;
            m_path = path;
        }

        public void ThreadRun()
        {
            for (int i = 0; i < LOOP_COUNT; i++) // fake large data set buy parsing smaller file multiple times
            {
                using (FileStream fstream = new FileStream(m_path, FileMode.Open, FileAccess.Read))
                using (StreamReader sreader = new StreamReader(fstream))
                {
                    string line;
                    while ((line = sreader.ReadLine()) != null)
                    {
                        string[] chunks = line.Split(null);
                        foreach (string chunk in chunks)
                        {
                            m_root.AddWord(chunk.Trim());
                        }
                    }
                }
            }
        }
    }

    #endregion

    #region TRIE implementation

    public class TrieNode : IComparable<TrieNode>
    {
        private char m_char;
        public int m_word_count;
        private TrieNode m_parent = null;
        private Dictionary<char, TrieNode> m_children = null;

        public TrieNode(TrieNode parent, char c)
        {
            m_char = c;
            m_word_count = 0;
            m_parent = parent;
            m_children = new Dictionary<char, TrieNode>();            
        }

        public void CombineNode(TrieNode from)
        {
            foreach(KeyValuePair<char, TrieNode> fromChild in from.m_children)
            {
                char keyChar = fromChild.Key;
                if (!m_children.ContainsKey(keyChar))
                {
                    m_children.Add(keyChar, new TrieNode(this, keyChar));
                }
                m_children[keyChar].m_word_count += fromChild.Value.m_word_count;
                m_children[keyChar].CombineNode(fromChild.Value);
            }
        }

        public void AddWord(string word, int index = 0)
        {
            if (index < word.Length)
            {
                char key = word[index];
                if (char.IsLetter(key)) // should do that during parsing but we're just playing here! right?
                {
                    if (!m_children.ContainsKey(key))
                    {
                        m_children.Add(key, new TrieNode(this, key));
                    }
                    m_children[key].AddWord(word, index + 1);
                }
                else
                {
                    // not a letter! retry with next char
                    AddWord(word, index + 1);
                }
            }
            else
            {
                if (m_parent != null) // empty words should never be counted
                {
                    m_word_count++;                        
                }
            }
        }

        public int GetCount(string word, int index = 0)
        {
            if (index < word.Length)
            {
                char key = word[index];
                if (!m_children.ContainsKey(key))
                {
                    return -1;
                }
                return m_children[key].GetCount(word, index + 1);
            }
            else
            {
                return m_word_count;
            }
        }

        public void GetTopCounts(List<TrieNode> most_counted, ref int distinct_word_count, ref int total_word_count)
        {
            if (m_word_count > 0)
            {
                distinct_word_count++;
                total_word_count += m_word_count;
            }
            if (m_word_count > most_counted[0].m_word_count)
            {
                most_counted[0] = this;
                most_counted.Sort();
            }
            foreach (char key in m_children.Keys)
            {
                m_children[key].GetTopCounts(most_counted, ref distinct_word_count, ref total_word_count);
            }
        }

        public override string ToString()
        {
            return BuildString(new StringBuilder()).ToString();
        }

        private StringBuilder BuildString(StringBuilder builder)
        {
            if (m_parent == null)
            {
                return builder;
            }
            else
            {
                return m_parent.BuildString(builder).Append(m_char);
            }
        }

        public int CompareTo(TrieNode other)
        {
            return this.m_word_count.CompareTo(other.m_word_count);
        }
    }

    #endregion
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-08-30T05:30:24.367

作为一种快速的通用算法，我会这样做。

```
Create a map with entries being the count for a specific word and the key being the actual string.  

for each string in content:
   if string is a valid key for the map:
      increment the value associated with that key
   else
      add a new key/value pair to the map with the key being the word and the count being one
done 
```

然后你可以在地图中找到最大值

```
 create an array size 10 with data pairs of (word, count) 

for each value in the map
    if current pair has a count larger than the smallest count in the array
        replace that pair with the current one

print all pairs in array 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-09-11T09:28:50.837

下面的方法只会读取一次您的数据，并且可以针对内存大小进行调整。

*   以 1GB 为单位读取文件
*   对于每个块，列出 5000 个出现频率最高的单词及其频率
*   根据频率合并列表（1000 个列表，每个列表 5000 个单词）
*   返回合并列表的前 10 名

理论上你可能会漏词，虽然我认为这个机会非常非常小。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-09-16T19:59:18.387

Storm 是值得关注的技术。它将数据输入（spouts）的角色与处理器（bolts）分开。风暴书的第2章解决了你的确切问题，并且很好地描述了系统架构 - [http://www.amazon.com/Getting-Started-Storm-Jonathan-Leibiusky/dp/1449324010](https://rads.stackoverflow.com/amzn/click/com/1449324010)

与 Hadoop 的批处理相比，Storm 是更实时的处理。如果您的数据是现有的，那么您可以将负载分配到不同的 spout 并将它们传播到不同的 bolts 进行处理。

该算法还将支持超过 TB 的数据，因为日期将在实时到达时进行分析。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-08-30T05:41:18.050

那么第一个想法是以哈希表/数组或其他任何形式管理数据库以保存每个单词的出现，但根据数据大小，我宁愿：

*   获取出现次数 >= 2 的第 10 个找到的单词
*   获取这些单词在整个字符串中出现的次数并在计数时删除它们
*   重新开始，一旦你有两组 10 个单词，你会得到两组中出现次数最多的 10 个单词
*   对字符串的其余部分（不再包含这些单词）执行相同的操作。

您甚至可以尝试提高效率，从第一个找到的 10 个单词开始，例如出现次数 >= 5 或更多，如果没有找到，则减少此值，直到找到 10 个单词。通过这个，您有一个很好的机会避免使用内存密集保存所有出现的单词，这是大量数据，并且您可以节省扫描轮次（在一个好的情况下）

但在最坏的情况下，您可能比传统算法有更多的轮次。

顺便说一句，这是一个问题，我会尝试使用函数式编程语言而不是 OOP 来解决。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-09-16T21:45:20.487

非常有趣的问题。它更多地涉及逻辑分析而不是编码。随着英语语言和有效句子的假设，它变得更容易。

您不必计算所有单词，只需计算长度小于或等于给定语言平均单词长度的单词（英语为 5.1）。因此，您不会有记忆问题。

至于读取文件，您应该选择并行模式，通过操作空格的文件位置来读取块（您选择的大小）。例如，如果您决定读取 1MB 的块，则除第一个块之外的所有块都应该更宽一些（左起 +22 个字节，右起 +22 个字节，其中 22 代表最长的英文单词 - 如果我是对的）。对于并行处理，您将需要一个并发字典或将合并的本地集合。

请记住，通常您最终会得到前十名作为有效停用词列表的一部分（这可能是另一种反向方法，只要文件的内容是普通的，它也有效）。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2012-08-30T05:45:51.403

好吧，就个人而言，我会将文件拆分为不同大小的文件，例如 128mb，在扫描时始终在内存中保留两个，任何发现的单词都将添加到哈希列表中，并且列表计数，然后我会迭代列表的列表在最后找到前 10 名...

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2014-10-09T12:39:46.753

尝试考虑特殊的数据结构来解决此类问题。在这种情况下，特殊类型的树（例如尝试以特定方式存储字符串）非常有效。或者第二种方法来构建自己的解决方案，比如计算单词。我猜这 TB 的数据是英文的，那么我们通常有大约 600,000 个单词，所以可以只存储这些单词并计算哪些字符串会重复 + 这个解决方案需要正则表达式来消除一些特殊字符。第一个解决方案会更快，我很确定。

[http://en.wikipedia.org/wiki/Trie](http://en.wikipedia.org/wiki/Trie)

这是 java
[http://algs4.cs.princeton.edu/52trie/TrieST.java.html中轮胎的实现](http://algs4.cs.princeton.edu/52trie/TrieST.java.html)

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2017-07-23T07:47:27.817

**MapReduce**
WordCount 可以通过使用 hadoop 的 mapreduce 有效地实现。 [https://hadoop.apache.org/docs/r1.2.1/mapred_tutorial.html#Example%3A+WordCount+v1.0](https://hadoop.apache.org/docs/r1.2.1/mapred_tutorial.html#Example%3A+WordCount+v1.0) 通过它可以解析大文件。它使用集群中的多个节点来执行此操作。

```
public void map(LongWritable key, Text value, OutputCollector<Text, IntWritable> output, Reporter reporter) throws IOException {
       String line = value.toString();
       StringTokenizer tokenizer = new StringTokenizer(line);
       while (tokenizer.hasMoreTokens()) {
             word.set(tokenizer.nextToken());
             output.collect(word, one);
       }
         }

public static class Reduce extends MapReduceBase implements Reducer<Text, IntWritable, Text, IntWritable> {
         public void reduce(Text key, Iterator<IntWritable> values, OutputCollector<Text, IntWritable> output, Reporter reporter) throws IOException {
       int sum = 0;
           while (values.hasNext()) {
             sum += values.next().get();
           }
       output.collect(key, new IntWritable(sum));
     }
       } 
```

# jquery - 使用防伪令牌将 JSON 模型发布到 ASP.Net MVC3

> ID：12190332
> 
> 赞同：7
> 
> 时间：2012-08-30T05:19:38.830
> 
> 标签：jquery, ajax, json, asp.net-mvc-3, csrf

所以，我一直在用这个撞墙，我找不到任何好的来源。也许我忘记了模型绑定的东西在 MVC3 中是如何工作的，但这是我想要做的：我有一个与 Knockout 绑定的编辑器来处理模型的编辑。该模型没有太多内容：

```
public class SetupTemplate
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string Template { get; set; }
} 
```

我试图调用的动作的签名是：

```
[HttpPost]
[ValidateAntiForgeryToken]
public ActionResult UpdateTemplate(SetupTemplate template) 
```

从这里的另一个问题中，我选择了这个相当有用的片段来获取防伪令牌：

```
window.addAntiForgeryToken = function(data) {
    data.__RequestVerificationToken = $('#__AjaxAntiForgeryForm input[name=__RequestVerificationToken]').val();
    return data;
}; 
```

这一切都与我试图通过 ajax 发布更新一起出现：

```
payload = window.addAntiForgeryToken(ko.mapping.toJS(self.data));
$.ajax({
    type: "post",
    url: endpoint,
    data: payload,
    success: function(data) {
        //Handle success
    }}); 
```

这导致了 Chrome 开发者工具的表单数据部分

```
Id:1
Name:Greeting
Template: [Template Text]
__RequestVerificationToken: [The really long anti-forgery token] 
```

防伪令牌被拾起，但我的模型为空。我见过的大多数例子只使用一个传递的参数，而不是模型。

我确定我错过了一些明显的东西，关于它可能是什么的任何见解？

编辑：响应@Mark，将调用更改为：

```
$.ajax({
type: "post",
dataType: "json",
contentType: 'application/json',
url: endpoint,
data: JSON.stringify(payload),
success: function(data) {
    //Do some stuff
}}); 
```

产生这样的请求有效负载：

```
{"Id":1,"Name":"Greeting","Template":"...","__RequestVerificationToken":"..."}: 
```

并且服务器没有拿起防伪令牌。这在有和没有`contentType`参数的情况下都试过了`$.ajax()`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T21:16:50.930

映射不适用于作为模板的参数，因为它与具有相同名称（大小写）的属性之一发生冲突。如果您使用模板以外的任何东西，它将适用于该控制器参数。

有一个解释详细信息的链接，我现在无法轻松找到。

```
public class SetupTemplate
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string Template { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-19T11:32:35.983

这是我的解决方案。像这样定义一个 jQuery 函数：

```
(function ($) {
    $.getAntiForgeryToken = function () {
        return $('input[name="__RequestVerificationToken"]').val();
    };

    // (!) use ValidateJsonAntiForgeryToken attribute in your controller
    $.ajaxJsonAntiforgery = function (settings) {

        var headers = {};
        headers['__RequestVerificationToken'] = $.getAntiForgeryToken();

        settings.dataType = 'json';
        settings.contentType = 'application/json; charset=utf-8';
        settings.type = 'POST';
        settings.cache = false;
        settings.headers = headers;
        return $.ajax(settings);
    };
})(jQuery); 
```

它只是将您的验证令牌放入标头。您还需要过滤器属性来检查您的防伪令牌。这里是：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Helpers;
using System.Web.Mvc;

namespace MyProject.Web.Infrastructure.Filters
{

    [AttributeUsage(AttributeTargets.Method | AttributeTargets.Class,
                    AllowMultiple = false, Inherited = true)]
    public sealed class ValidateJsonAntiForgeryTokenAttribute
                                : FilterAttribute, IAuthorizationFilter
    {
        public void OnAuthorization(AuthorizationContext filterContext)
        {
            if (filterContext == null)
            {
                throw new ArgumentNullException("filterContext");
            }

            var httpContext = filterContext.HttpContext;
            var cookie = httpContext.Request.Cookies[AntiForgeryConfig.CookieName];
            AntiForgery.Validate(cookie != null ? cookie.Value : null,
                                 httpContext.Request.Headers["__RequestVerificationToken"]);
        }
    }
} 
```

在您的控制器中，这真的很简单，只需用新属性（ValidateJsonAntiForgeryToken）标记它：

```
[Authorize, HttpPost, ValidateJsonAntiForgeryToken]
public ActionResult Index(MyViewModel viewModel) 
```

在客户端：

```
$.ajaxJsonAntiforgery({
    data: dataToSave,
    success: function() { alert("success"); },
    error: function () { alert("error"); }
}); 
```

这个对我有用。享受！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T11:32:05.277

你可以尝试使用`JSON.stringify`吗？

```
$.ajax({     
   type: "post",     
   url: endpoint,     
   data: JSON.stringify(payload),     
   success: function(data) {         
      //Handle success     
   } 
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T14:40:10.530

@Mark 因引导我走上正确的道路而受到赞誉，并为我指出了一些链接，这些链接现在让我可以相当透明地处理防伪令牌。但是，解决问题的方法正在发生变化：

```
public ActionResult UpdateTemplate(SetupTemplate template) 
```

至：

```
public ActionResult UpdateTemplate(SetupTemplate model) 
```

现在它正确地填充了值。我真的很想知道为什么会修复它，但现在，它有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-17T12:57:19.910

实际上，以下内容对我来说是一个复杂的对象；

```
var application = {
    Criteria: {
        ReferenceNumber: $("input[name='Criteria.ReferenceNumber'").val()
    },
    AppliedVia: "Office"
};

// get the next step
$.ajax({
    url: form.attr("action"),
    dataType: "html",
    type: "POST",
    data: {
        __RequestVerificationToken: $("input[name=__RequestVerificationToken]").val(),
        application: application
    },
} 
```

然而，需要注意的一件事是确保左侧应该是您的方法/操作中的实际参数名称`application`。`data`这适用于 MVC 5（.NET Core 之前）

# html - 通过实际 z-index 比较 HTML 元素

> ID：12190338
> 
> 赞同：11
> 
> 时间：2012-08-30T05:20:03.537
> 
> 标签：html, css, z-index, webpage-rendering

给定同一文档中的两个任意 HTML 元素 A 和 B，我如何找出哪个与用户“更接近”（即，如果它们重叠，哪个会遮挡另一个）？

[W3C CSS 规范](http://www.w3.org/TR/CSS2/visuren.html#layers)描述了兼容的渲染引擎应该实现的堆叠上下文。但是，无论是否跨浏览器，我都找不到在 JavaScript 程序中访问这些信息的方法。我能读到的只是 css`z-index`属性，它本身并没有说太多，因为大部分时间都设置为，`auto`或者即使表示为数值，也不是它实际显示方式的可靠指标（如果它们属于对于不同的统计上下文，比较 z-indexes 是无关紧要的）。

请注意，我对**任意**元素感兴趣：如果两个元素都在鼠标指针下方，则只有一个元素会被视为“悬停”，因此在这种情况下我可以轻松找到最接近的元素。但是，我正在寻找一种更通用的解决方案，最好是不涉及重新实现渲染引擎已经在执行的堆叠算法的解决方案。

**更新：**让我澄清一下这个问题背后的原因：我最近解决[了一个问题](https://stackoverflow.com/q/12095196/520779)，该问题暴露了 jQuery 拖放机制的限制——它在拖放时不考虑 z-indexes，所以如果一个元素遮挡了另一个元素，它仍然可以在“后面”的元素中执行放置操作。虽然针对 OP 特定情况回答了链接问题，但一般问题仍然存在，并且我知道没有简单的解决方案。

[下面亚历克斯的回答](https://stackoverflow.com/a/12190361/520779)很有用，但对于手头的情况还不够：拖动时，被拖动的元素本身（或更准确地说是它的助手）是鼠标光标下的最顶层元素，因此`elementFromPoint`将返回**它**而不是**下一个**最顶层元素，即我们真的需要（*解决方法：* [设置光标的样式，](http://jqueryui.com/draggable/#cursor-style)使其放置在助手之外）。jQuery 采用的其他交集策略也不仅仅考虑了一个点，这使得确定与帮助器相交的最顶层元素的任务变得复杂。能够通过实际的 z-index 比较（或排序）元素将使“z-index 感知”相交模式在一般情况下可行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-04T10:41:41.270

> **注意：**在一年多没有答案之后，这个问题[也被发布在 Stack Overflow 上的葡萄牙语中](https://pt.stackoverflow.com/q/889/215)，并且 - 虽然仍然没有最终的解决方案 - 我和一些用户能够[在 JavaScript 中复制堆栈机制](https://pt.stackoverflow.com/a/931/215)（重新发明轮子，但仍然。 ..)

[引用CSS2 规范](http://www.w3.org/TR/CSS21/visuren.html#z-index)中的堆叠上下文算法（强调我的）：

> 根元素形成根堆叠上下文。其他堆叠上下文由任何**具有计算值 'z-index' 的****定位**元素（包括相对定位的元素）生成，而不是 'auto' 。堆叠上下文不一定与包含块相关。在未来的 CSS 级别中，其他属性可能会引入堆叠上下文，**例如“不透明度”**

 ****根据该描述，这是一个返回的函数： a)`z-index`元素的 ，如果它生成新的堆叠上下文；或 b)`undefined`如果不是>

```
function zIndex(ctx) {
    if ( !ctx || ctx === document.body ) return;

    var positioned = css(ctx, 'position') !== 'static';
    var hasComputedZIndex = css(ctx, 'z-index') !== 'auto';
    var notOpaque = +css(ctx, 'opacity') < 1;

    if(positioned && hasComputedZIndex) // Ignoring CSS3 for now
        return +css(ctx, 'z-index');
}

function css(el, prop) {
     return window.getComputedStyle(el).getPropertyValue(prop);
} 
```

这应该能够将形成不同堆叠上下文的元素分开。对于其余元素（以及具有 equal 的元素`z-index`），[附录 E](http://www.w3.org/TR/CSS2/zindex.html)表示它们应该尊重“树顺序”：

> 在考虑了移动框的属性之后，按双向内容的逻辑（非视觉）顺序对渲染树进行预排序深度优先遍历。

除了那些“移动盒子的属性”之外，这个函数应该正确地实现遍历：

```
/* a and b are the two elements we want to compare.
 * ctxA and ctxB are the first noncommon ancestor they have (if any)
 */
function relativePosition(ctxA, ctxB, a, b) {
    // If one is descendant from the other, the parent is behind (preorder)
    if ( $.inArray(b, $(a).parents()) >= 0 )
        return a;
    if ( $.inArray(a, $(b).parents()) >= 0 )
        return b;
    // If two contexts are siblings, the one declared first - and all its
    // descendants (depth first) - is behind
    return ($(ctxA).index() - $(ctxB).index() > 0 ? a : b);
} 
```

定义了这两个函数后，我们终于可以创建元素比较函数了：

```
function inFront(a, b) {
    // Skip all common ancestors, since no matter its stacking context,
    // it affects a and b likewise
    var pa = $(a).parents(), ia = pa.length;
    var pb = $(b).parents(), ib = pb.length;
    while ( ia >= 0 && ib >= 0 && pa[--ia] == pb[--ib] ) { }

    // Here we have the first noncommon ancestor of a and b  
    var ctxA = (ia >= 0 ? pa[ia] : a), za = zIndex(ctxA);
    var ctxB = (ib >= 0 ? pb[ib] : b), zb = zIndex(ctxB);

    // Finds the relative position between them    
    // (this value will only be used if neither has an explicit
    // and different z-index)
    var relative = relativePosition(ctxA, ctxB, a, b);

    // Finds the first ancestor with defined z-index, if any
    // The "shallowest" one is what matters, since it defined the most general
    // stacking context (affects all the descendants)
    while ( ctxA && za === undefined ) {
        ctxA = ia < 0 ? null : --ia < 0 ? a : pa[ia];
        za = zIndex(ctxA);
    }
    while ( ctxB && zb === undefined ) {
        ctxB = ib < 0 ? null : --ib < 0 ? b : pb[ib];
        zb = zIndex(ctxB);
    }

    // Compare the z-indices, if applicable; otherwise use the relative method
    if ( za !== undefined ) {
        if ( zb !== undefined )
            return za > zb ? a : za < zb ? b : relative;
        return za > 0 ? a : za < 0 ? b : relative;
    }
    else if ( zb !== undefined )
        return zb < 0 ? a : zb > 0 ? b : relative;
    else
        return relative;
} 
```

以下是三个在实践中展示此方法的示例：[示例 1](http://jsfiddle.net/Fevj7/8/)、[示例 2](http://jsfiddle.net/Fevj7/9/)、[示例 3](http://jsfiddle.net/Fevj7/10/)（抱歉，没有费心将所有内容翻译成英文……这是完全相同的代码，只是函数和变量名称不同）。

该解决方案很可能是不完整的，并且在极端情况下应该会失败（尽管我自己找不到）。如果有人对改进有任何建议，将不胜感激。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T05:23:20.647

您可以获取元素的尺寸和偏移量，然后用于[`document.elementFromPoint()`](https://developer.mozilla.org/en-US/docs/DOM/document.elementFromPoint)确定哪一个是渲染在顶部的元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-01T14:32:39.113

经过几天的研究，我认为我已经成功地根据 2016 年的规则重新实现了堆叠机制。我基本上更新了 2013 年的方法（由 OP 发布）。结果是一个比较两个 DOM 节点的函数，并返回视觉上位于顶部的那个。

```
front = $.fn.visuallyInFront(document.documentElement, document.body);
// front == <body>...</body> because the BODY node is 'on top' of the HTML node 
```

**推理**

还有其他方法可以确定哪个元素在另一个之上。例如`document.elementFromPoint()`或`document.elementsFromPoint()`突然想到。但是，有许多（未记录的）因素会影响这些方法的可靠性。例如，不透明度、可见性、指针事件、背面可见性和一些转换可能会使`document.elementFromPoint()`特定元素无法命中测试。然后是`document.elementFromPoint()`只能查询最顶层元素（而不是底层元素）的问题。这应该用 解决`document.elementsFromPoint()`，但目前只在 Chrome 中实现。除此之外，我向 Chrome 开发人员提交了一个关于`document.elementsFromPoint()`. 命中测试锚标记时，所有底层元素都不会被注意到。

所有这些问题结合在一起，使我决定尝试重新实现堆叠机制。这种方法的好处是堆叠机制被广泛记录，并且可以被测试和理解。

**这个怎么运作**

我的方法重新实现了 HTML 堆叠机制。它旨在正确遵循影响 HTML 元素堆叠顺序的所有规则。这包括定位规则、浮动、DOM 顺序以及 CSS3 属性（如不透明度、变换）和更多实验性属性（如过滤器和蒙版）。截至 2016 年 3 月，这些规则似乎已正确实施，但将来需要在规范和浏览器支持发生变化时进行更新。

我已将所有内容放在一个[GitHub 存储库](https://github.com/Jip-Hop/visuallyOnTop/)中。希望这种方法将继续可靠地工作。下面是一个实际代码的[示例 JSFiddle](https://jsfiddle.net/zt59sLcp/)。在示例中，所有元素都按实际的“z-index”排序，这是 OP 所追求的。

非常欢迎对这种方法进行测试和反馈！****

# emacs - Alt键在Emacs SSHing X11中不起作用

> ID：12190349
> 
> 赞同：3
> 
> 时间：2012-08-30T05:21:18.747
> 
> 标签：emacs, ssh, x11

您好，这不是编码问题，但是...
我使用 X11 通过我的 mac SSH，并且我使用的是 emacs。我正在尝试使用“ALT”键进行组合，但它似乎不起作用。我试过使用“option”键，“FN + option”似乎都不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T08:16:46.873

我以前也有同样的问题。[http://hints.macworld.com/article.php?story=20040425231058862](http://hints.macworld.com/article.php?story=20040425231058862)上的提示对我有帮助。

总而言之，您应该使用 xmodmap 重新映射 X11 中的 alt / 选项。

将以下内容放入您的`~/.Xmodmap`文件中：

```
clear Mod1
keycode 66 = Meta_L
add Mod1 = Meta_L 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T11:05:33.730

如果 emacs 实例在其他地方，这就是我阅读您的问题的方式，那么当您按 alt 时，emacs 可能没有收到正确的键。[http://www.emacswiki.org/emacs/EmacsForMacOS#toc20](http://www.emacswiki.org/emacs/EmacsForMacOS#toc20)上有各种修复。

但是，我想说您可能是从错误的方向解决问题。您是否考虑过在本地运行 emacs，并使用 TRAMP 模式在本地计算机上编辑远程文件？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-08T13:49:02.877

尝试将其放入 ~/.emacs

```
(set-keyboard-coding-system nil) 
```

# git - 有没有可靠的方法将 cvsnt 导入 git？

> ID：12190353
> 
> 赞同：1
> 
> 时间：2012-08-30T05:22:10.623
> 
> 标签：git, cvsnt

如何将 cvsnt 存储库导入 git 并维护历史记录？有什么限制吗？

我们目前正计划将我们的工作源代码控制从 CVSNT 更改为新的东西。一位将负责推出它的同事正在提倡 SVN。他对 GIT 的唯一反对意见是认为将历史从 CVSNT 导入 GIT 是不可靠的。

我看过这样的帖子：[cvsimport still not working with cvsnt](http://git.661346.n2.nabble.com/cvsimport-still-not-working-with-cvsnt-td5851967.html)

这仍然是一个真正的问题吗？

如果是，有可靠的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T07:55:40.220

你最好试试看。如果您执行转换，然后将生成的签出树与您的 CVS 签出树进行比较，并且它们匹配，那么它很可能是有效的。某些存储库可能无法转换 - 我知道使用 CVS 供应商分支可能会出现问题。我为我们的工作 CVSNT 存储库发现 cvs2git 程序（它基于 cvs2svn btw）产生了最好的版本。为了验证它，将我们关心的每个分支的尖端与 cvs checkout 进行比较，一旦修复了一些 unicode 错误，这是一个完美的匹配（这些是提交到 cvs 时已损坏的注册表文件 - 不是转换为 git 错误）。

据我所知，没有任何东西可以读取 CVSNT 特定的 commit-id 字段来重新创建相同的变更集。因此，可用的程序都将使用时间/提交消息启发式计算出变更集，因此可能会出错。我真的只能说——cvs2git 可以正常转换我们 10 年的 cvs 存储库。尝试并仔细检查。

# gwt - 通过包装 NullalbleListEditor 来实现 NullableSetEditor

> ID：12190355
> 
> 赞同：0
> 
> 时间：2012-08-30T05:22:24.143
> 
> 标签：gwt, gwt-editors

我有一个有效的 NullableStringListEditor 实现：

```
public class NullableStringListEditor extends Composite implements IsEditor<OptionalFieldEditor< List<String>, ListEditor<String, StringEditor> >> {...} 
```

现在，我通过包装它来构建一个 NullableStringSetEditor：

```
public class NullableStringSetEditor extends Composite implements ValueAwareEditor<Set<String>>, LeafValueEditor<Set<String>> {
private NullableStringListEditor wrappedEditor = new NullableStringListEditor();

    @Override
    public void setValue(Set<String> values) {
        List<String> list = wrappedEditor.asEditor().getValue();
        some null checking... 
        list.clear();
        list.addAll(values);
        wrappedEditor.asEditor().setValue(list); // will call setValue of OptionalFieldEditor from here
    }
} 
```

错误：

```
java.lang.NullPointerException: null at com.google.gwt.editor.client.adapters.OptionalFieldEditor.setValue(OptionalFieldEditor.java:113) 
```

第 113 行：chain.attach(value, subEditor); 似乎链总是空的。

难道我做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T12:47:05.790

如果`NullableStringSetEditor`是 a `LeafvalueEditor`，那么`wrappedEditor`编辑器框架生成器将忽略它，因此不会被初始化和填充。

您可能希望通过让您的编辑器成为 a （除了成为 a ）来遵循该`OptionaEditor`模式`CompositeEditor``LeafValueEditor`

# javascript - 王牌编辑器 ace.js 文件大小

> ID：12190356
> 
> 赞同：6
> 
> 时间：2012-08-30T05:22:28.643
> 
> 标签：javascript, editor, ace-editor

来自 github ace-builds 存储库 ( [https://github.com/ajaxorg/ace-builds](https://github.com/ajaxorg/ace-builds) ) 的缩小版 ace 编辑器 js 文件高达 275KB。这是一个巨大的文件大小。[Codemirror](http://codemirror.net/)是一个同口径的 js 编辑器，在 100KB 以内。

似乎有一种方法可以构建 ace.js。有没有办法在大幅减小文件大小的同时做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-05-25T14:01:06.733

294kb 的 ace.js 已经构建和缩小版本，所以没有办法大幅减少。

造成这种大小差异的原因有两个

1.  ace 内置了更多功能。因此，为了公平比较，我们需要删除这些功能

    ```
     not minified ace.js is . . . . 530kb
    - multiselect . . . . . . . . . 484kb
    - folding . . . . . . . . . . . 451kb
    - bracketmatch, highlight selected 
      word, search, worker  . . . . 429kb
    - built in theme, unicode 
      support for selectWord  . . . 401kb 
    ```

    其他：诸如使用鼠标选择文本时无卡顿滚动、pageUp/Down 上的动画、从装订线中选择行、更好的 toggleComment、智能 gotoLineEnd、indentGuides 等更难删除，因为它们不是独立模块。

    但是 Codemirror 支持双向和可变大小的字体，可以补偿一些剩余的字体，所以让我们停下来。cut down ace（我们称它为 ace--.js）的最终大小为 401kb

    ```
    file         |size kb| zip  |uglify|uglify+zip|uglify-m-c|+zip      
    -------------|-------|------|------|----------|----------|----      
    ace.js       |  530  | 106  | 374  | 91.8     |292       |81.1
    ace--.js     |  401  | 77.1 | 279  | 65.2     |216       |56.5
    codemirror.js|  212  | 55.6 | 144  | 40.1     |100       |33.1 
    ```

    最重要的大小是 uglify+zip 并没有太大的不同

2.  第二个原因是编码风格，Codemirrors 风格非常紧凑

    *   它使用了很多闭包*（ace 几乎从不使用闭包）*
    *   它包含很少使用`this` *( `493`vs `4373`in ace--)*
    *   不使用模块，一切都在一个文件中，*不像 ace 有 59 个模块*
    *   它有更短的变量名

因此，如果您需要一个非常小的编辑器，或者不喜欢 ace 的工作方式并希望重新实现其中的大部分，Codemirror 是更好的选择。

但是，如果您需要一个与桌面编辑器相当的编辑器而不添加您自己的 300kb 代码，那么恕我直言，ace 是更好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T18:27:46.137

为什么不简单地使用 CodeMirror？这是优秀的恕我直言。

# mysql - MySQL：#1054 - 'field list' 中的未知列 'product_type'，但查询中没有这样的列

> ID：12190358
> 
> 赞同：0
> 
> 时间：2012-08-30T05:22:57.047
> 
> 标签：mysql, mysql-error-1054

我正在尝试执行以下插入查询。

```
INSERT INTO product_records( p_id, color, brand, product_line ) 
VALUES (
'8',  'test',  'test',  'test'
) 
```

但它说，

```
MySQL: #1054 - Unknown column 'product_type' in 'field list' 
```

**编辑：****表** -product_records

 **```
Field   Type    
p_id    varchar(10)
color   varchar(32)  
brand   varchar(15)  
product_line    varchar(32) 
```

但是表中没有“product_type”列 `product_records`。这里有什么问题，我不知道！**

# mysql - 特定查询的结果集

> ID：12190369
> 
> 赞同：1
> 
> 时间：2012-08-30T05:24:41.397
> 
> 标签：mysql

我有这个查询。当我执行时，我得到了 Query 语句，但我想要这个查询的结果集。

我的查询是：

```
SELECT CONCAT('select * from ', table_name, ' union all ') AS CUSTOMQUERY
FROM   information_schema.tables
WHERE  table_name LIKE '%custom%' 
```

我得到这个结果

```
select * from custom_70006 union all  
select * from custom_704306 union all  
select * from custom_700436 union all  
select * from custom_7000643 union all  
select * from custom_7000634 union all  
select * from custom_700046 union all  
select * from custom_700063 union all  
select * from custom_700062 union all 
```

但我想要这个特定列的结果集和相应的数据，最后`union all`应该删除。

请帮助我进行相关查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T05:44:39.670

我认为这就是你要找的：

```
SET GLOBAL group_concat_max_len = 4294967295;

SELECT @query1 := GROUP_CONCAT(CONCAT('SELECT * FROM ', table_name) SEPARATOR
                         ' UNION ALL ') AS CUSTOMQUERY
FROM   INFORMATION_SCHEMA.tables
WHERE  TABLE_SCHEMA = SCHEMA()
       AND table_name LIKE '%custom%';

PREPARE stmt FROM @query1; EXECUTE stmt; DEALLOCATE PREPARE stmt; 
```

# 示例：[SQLFiddle](http://sqlfiddle.com/#!2/954b5/2)

或将您的查询修改为：

```
SELECT @query1 := CONCAT('select * from ', table_name, ' union all ') AS
       CUSTOMQUERY
FROM   information_schema.tables
WHERE  table_name LIKE '%custom%' 
```

从查询中删除最后一个`'union all'`字符串：

```
SET @query1 = TRIM(TRAILING 'union all' FROM TRIM(@query1)); 
```

[PS： group_concat_max_len](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_group_concat_max_len)的默认值只有 1024。所以你需要将它设置为更高的值，否则你的查询的输出将被剥离，你可能会得到语法错误。

# java - 使用 Mockito 在 JUnit 中使用 PowerMock 和 PowerRule 获取 javassist.NotFoundException

> ID：12190377
> 
> 赞同：7
> 
> 时间：2012-08-30T05:25:21.607
> 
> 标签：java, maven, junit4, mockito, powermock

我已经将 JUnit 中的 PowerMock 和 PowerRule 与 Mockito 集成在一起。

这是我的依赖项：

```
<dependency>
        <groupId>javassist</groupId>
        <artifactId>javassist</artifactId>
        <version>3.12.0.GA</version>
      </dependency>
<dependency>
        <groupId>asm</groupId>
        <artifactId>asm</artifactId>
        <version>3.3.1</version>
</dependency>

 <dependency>
        <groupId>cglib</groupId>
        <artifactId>cglib</artifactId>
        <version>2.2.2</version>
 </dependency>
 <dependency>
        <groupId>org.powermoc</groupId>
    <artifactId>powermock-module-junit4</artifactId>
    <version>1.4.12</version>
    <scope>test</scope>
    </dependency>
 <dependency>
    <groupId>org.powermock</groupId>
    <artifactId>powermock-api-mockito</artifactId>
    <version>1.4.12</version>
    <scope>test</scope>
 </dependency>
 <dependency>
       <groupId>org.powermock</groupId>
       <artifactId>powermock-module-junit4-rule</artifactId>
       <version>1.4.12</version>
       <scope>test</scope>
 </dependency>
 <dependency>
        <groupId>org.powermock</groupId>
        <artifactId>powermock-classloading-objenesis</artifactId>
        <version>1.4.12</version>
        <scope>test</scope>
 </dependency> 
```

我的测试课是：

```
public class TestClass extends AbstractShiroTest{
    @Rule
    public PowerMockRule rule = new PowerMockRule();
    @Autowired
    SomeService someService;
    @Before

    public void setUp(){
    Map<String, Object> newMap = new HashMap<String, Object>();
    newMap.put("userTimeZone", "Asia/Calcutta");
    Subject subjectUnderTest = mock(Subject.class);
             when(subjectUnderTest.getPrincipal()).thenReturn(LMPTestConstants.USER_NAME);
    Session session = mock(Session.class);
    when(session.getAttribute(LMPCoreConstants.USER_DETAILS_MAP)).thenReturn(newMap);
    when(subjectUnderTest.getSession(false)).thenReturn(session);
    setSubject(subjectUnderTest);
    PowerMockito.mockStatic(CasSessionUtil.class);
    when(CasSessionUtil.getCarrierId()).thenReturn(1L);
}

  @Test

public void myTestMethod()  {
someService.doSomething();
 }
} 
```

**`doSomething`正在调用我需要模拟的静态方法。当我运行我的测试用例时，我得到`javassist.NotFoundException: $Proxy88`.**

完整的堆栈跟踪：

> java.lang.RuntimeException: javassist.NotFoundException: $Proxy88 at org.powermock.core.classloader.MockClassLoader.loadUnmockedClass(MockClassLoader.java:187) at org.powermock.core.classloader.MockClassLoader.loadModifiedClass(MockClassLoader.java:147)在 org.powermock.core.classloader.DeferSupportingClassLoader.loadClass(DeferSupportingClassLoader.java:67) 在 java.lang.ClassLoader.loadClass(ClassLoader.java:252) 在 java.lang.ClassLoader.loadClassInternal(ClassLoader.java:320) 在org.powermock.api.support.ClassLoaderUtil.loadClass(ClassLoaderUtil.java:66) 的 java.lang.Class.forName(Class.java:247) 的 java.lang.Class.forName0(Native Method)。 api.support.ClassLoaderUtil.loadClass(ClassLoaderUtil.java:26) 在 org.powermock.classloading.DeepCloner.cloneFields(DeepCloner.java:243) 在 org.powermock.classloading.DeepCloner.cloneFields(DeepCloner.java:248) 在 org.powermock.classloading.DeepCloner.performClone(DeepCloner.java) 的 org.powermock.classloading.DeepCloner.performClone(DeepCloner.java:128) :128) 在 org.powermock.classloading.DeepCloner.cloneFields(DeepCloner.java:248) 在 org.powermock.classloading.DeepCloner.performClone(DeepCloner.java:128) 在 org.powermock.classloading.DeepCloner.cloneFields(DeepCloner. java:248) 在 org.powermock.classloading.DeepCloner.performClone(DeepCloner.java:128) 在 org.powermock.classloading.DeepCloner.cloneFields(DeepCloner.java:248) 在 org.powermock.classloading.DeepCloner.performClone(DeepCloner .java:128) 在 org.powermock.classloading.DeepCloner.cloneFields(DeepCloner.java:248) 在 org.powermock.classloading.DeepCloner。performClone(DeepCloner.java:128) at org.powermock.classloading.DeepCloner.cloneFields(DeepCloner.java:248) at org.powermock.classloading.DeepCloner.performClone(DeepCloner.java:128) at org.powermock.classloading.DeepCloner org.powermock.classloading.ClassloaderExecutor.execute(ClassloaderExecutor.java:89) 中 org.powermock.classloading 中的 org.powermock.classloading.DeepCloner.clone(DeepCloner.java:69) 中的 .clone(DeepCloner.java:82)。 ClassloaderExecutor.execute(ClassloaderExecutor.java:78) at org.powermock.modules.junit4.rule.PowerMockStatement.evaluate(PowerMockRule.java:49) atorg.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat. java:72) 在 org.junit 的 org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)。runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50) at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193) at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52) at org .junit.runners.ParentRunner.runChildren(ParentRunner.java:191) at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42) at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184 ) 在 org.springframework 的 org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31) 的 org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)。 test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71) at org.junit.runners.ParentRunner.run(ParentRunner.java:236）在 org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run（JUnit4TestReference.java:50）在 org.eclipse. .jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38) 在 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467) 在 org.eclipse.jdt.internal .junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683) 在 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390) 在 org.eclipse.jdt.internal.junit.runner .RemoteTestRunner.main(RemoteTestRunner.java:197) 引起：javassist.NotFoundException: $Proxy88 at javassist.ClassPool.get(ClassPool.java:436) at org.powermock.core.classloader.MockClassLoader。loadUnmockedClass(MockClassLoader.java:180) ... 46 更多

如果我将依赖项更改为

```
<dependency>
            <groupId>org.powermock</groupId>
            <artifactId>powermock-classloading-xstream</artifactId>
            <version>1.4.12</version>
            <scope>test</scope>
        </dependency> 
```

然后我得到一个不同的例外。请参阅[https://stackoverflow.com/questions/12176049/suggest-work-around-for-com-thoughtworks-xstream-converters-conversionexception](https://stackoverflow.com/questions/12176049/suggest-work-around-for-com-thoughtworks-xstream-converters-conversionexception)（已删除 SO 问题，需要 10k）。

我什至尝试过使用 javassist 15 版，但也有同样的问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T05:09:26.020

自己找到了解决方案：

仅使用以下依赖项（用于 Power Mock 和 Power Rule）

```
 <!-- Required for PowerMock -->
    <dependency>
        <groupId>org.powermock</groupId>
        <artifactId>powermock-api-mockito</artifactId>
        <version>1.4.12</version>
        <scope>test</scope>
    </dependency>
    <!-- Required for PowerMockRule -->
    <dependency>
        <groupId>org.powermock</groupId>
        <artifactId>powermock-module-junit4-rule-agent</artifactId>
        <version>1.4.12</version>
        <scope>test</scope>
    </dependency> 
```

现在我没有得到上述任何一个例外

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-31T15:20:00.517

将 powermock-module-junit4-rule 替换为 powermock-module-junit4-rule-agent。

```
<dependency>
    <groupId>org.powermock</groupId>
    <artifactId>powermock-module-junit4-rule-agent</artifactId>
    <scope>test</scope>
</dependency> 
```

基于代理的引导程序和基于类加载的引导程序之间的主要区别在于您不会遇到类加载问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T08:07:18.533

没有更多代码示例，我收集到代码在测试中使用了 Spring。所以我相信这个错误的原因是与 Spring 的使用有关，它似乎确实生成了 JDK 代理（`$Proxy88`.）。

Powermock 的工作方式是在新的类加载器中运行 JUnit 测试以修改这些类的字节码，不幸的是，只能从真实文件或至少从可能的位置修改字节码读取类二进制文件，因为 java 无法访问 JVM 中已加载的字节码。（代理人可能会以有限的方式）。

由于磁盘上不存在 JDK 代理，因此无法读取或复制到特定的 Powermock 类加载器。

您正在编写的测试不是单元测试，因为它是在 Spring 上下文中运行的。您可能想先编写一个真正的***单元测试***。然后是一些***集成测试***，**其中您不需要模拟**。

此外，您应该避免使用静态，因为它是可测试性的噩梦。您应该以不需要模拟静态调用的方式重写您的生产代码。

干杯，

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T07:34:55.537

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = "classpath:/test-servlet.xml")
public class ControlCenterManagerImplTest {

@Rule
public  PowerMockRule rule = new PowerMockRule();

//Powermock agent initialization not required and using maven dependency specified above by BHUVAN we can execute Power mock using spring.} 
```

# java-me - 如何使用 LWUIT TAB 的点击事件

> ID：12190379
> 
> 赞同：0
> 
> 时间：2012-08-30T05:26:16.110
> 
> 标签：java-me, lwuit

**更新：** 我的要求是在我的 LWUIT 表单上将两个 Rss 文件显示为选项卡最初默认情况下，如果最终用户单击第二个选项卡，则第一个 Rss 文件标题和图像应显示在第一个选项卡上，我们应该能够加载第二个 rss 文件标题和图像 我可以加载第一个 Rss 文件标题，但是如果我单击它，我无法加载第二个选项卡 如何捕获 LWUIT 选项卡的单击事件？这是我的代码不起作用： String topNewsurl="TopNews.rss"; 字符串 topStoryurl="TopStory.rss";

```
public class XMLMidlet extends MIDlet{
    public void startApp() {
               Display.init(this);

        Process p;
        try {
            p = new Process(this);
                    p.process();

        } catch (IOException ex) {
            ex.printStackTrace();
        }

    }

 public class Process extends Form {

     Process(XMLMidlet midlet) throws IOException {
               this.midlet=midlet;
               topnews = new Vector();
            topstory = new Vector();
           tabs = new Tabs();
            form1 = new Form();
            form2=new Form();
                form1.setLayout(new BorderLayout());
                form1.setScrollable(false);
                image = Image.createImage("/res/Tone.jpg");
                Label icon = new Label(image);
                form1.setTitleComponent(icon);
                form2.setTitleComponent(icon);

                form1.setTransitionInAnimator(Transition3D.createRotation(250, true));
                try {
                newsList = new List(topnews);
                newsList.setScrollVisible(false);

                newsList.setRenderer(new NewsListCellRenderer());

                myNewsList = new List(topstory);
                myNewsList.setScrollVisible(false);

                myNewsList.setRenderer(new NewsListCellRenderer());        
         tabs.addTab("Topstory", newsList);
                tabs.addTab("TopNews", myNewsList);
                 tabs.setChangeTabOnFocus(true);
               form1.addComponent(BorderLayout.CENTER, tabs);
        }  
     try{
String url = "http:topnews-20.rss";

             form1.show();

                        ParseThread myThread = new ParseThread(this);
            myThread.getXMLFeed(url);

    } catch (Exception e) {

        e.printStackTrace();
    }

}
public void addNews(News newsItem) {
        //log.debug("addnews");
      //System.out.println("addNews");

            topnews.addElement(newsItem);
            newsList.addActionListener(new ActionListener() {

                public void actionPerformed(ActionEvent ae) {

                    List source = (List) ae.getSource();
                    News selectedNewsItem = (News) source.getSelectedItem();
                    if (selectedNewsItem != null) {
                        displayCompleteNewsScreen(selectedNewsItem);

                    }

                }

            });
        form1.show();

    } 

     public void keyReleased(int keyCode) {
                   System.out.println("str");

            Component p=this.getFocused();
           String str= p.getClass().getName();
        if(str.toLowerCase().indexOf("radiobutton")!=-1){
            process();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T20:53:51.323

从非常模糊的问题来看，您似乎想在 LWUIT 表单上捕获按键。

```
 jobsForm.addGameKeyListener(Display.GAME_FIRE,
                new ActionListener() {
                    public void actionPerformed(ActionEvent evt) {
                    //do something here
                    }
                });

        jobsForm.addPointerPressedListener(new ActionListener() {
            public void actionPerformed(ActionEvent evt) {
                pointer_click = true;
            }
        });

        jobsForm.addPointerReleasedListener(new ActionListener() {
            public void actionPerformed(ActionEvent evt) {
                if (pointer_click) {
                    //
                }
                pointer_click = false;
            }
        });

        jobsForm.addPointerDraggedListener(new ActionListener() {
            public void actionPerformed(ActionEvent evt) {
                //System.out.println("POINTER DRAGGED");
                pointer_click = false;
            }
        }); 
```

# python - Python enumerate()，浮点对象不可迭代

> ID：12190380
> 
> 赞同：0
> 
> 时间：2012-08-30T05:26:23.987
> 
> 标签：python

我有一个列表`a`，然后我`max(a)`用来获取最大值。下一步我试图用来`enumerate()`获取最大值的第一个位置。但它注意到我只能`enumerate()`用于 int 列表？浮动列表怎么样？有什么方法可以在浮点（也有 int）列表中获得最大值的第一个位置？非常感谢

```
a = [1.5, 1.8, 3.1, 4.2, 5.5, 3.2, 4, 2, 1, 5.5, 3, 2.7]
b = max(a)
maxIndex = [i for i, j in enumerate(b) if j == b][0] 
```

Traceback（最近一次调用最后一次）：文件“”，第 1 行，类型错误：'float' 对象不可迭代

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T05:30:22.667

首先，我认为您的意思是使用`enumerate(a)`not `enumerate(b)`，就像`b`最大浮动一样。

其次，您还可以这样做：

```
maxIndex = a.index(b) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T05:32:17.390

单线：

```
maxpos = max(enumerate(a), key=lambda p: p[1])[0] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T05:29:41.357

`max(a)`返回单个最高值 - 它根本不返回列表（或任何可迭代的）。因此，您不能对其使用 enumerate 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T05:29:55.463

你有一个错字

```
maxIndex = [i for i, j in enumerate(a) if j == b][0] 
```

# sublimetext2 - Sublime Text 2 tab_size 设置未正确激活

> ID：12190382
> 
> 赞同：19
> 
> 时间：2012-08-30T05:26:40.967
> 
> 标签：sublimetext2

我有以下内容`user/Preferences.sublime-settings`

```
{
    "tab_size": 2,
} 
```

大多数时候它都有效。但有时我打开一个 ruby​​ 文件，它跳回 4 个空格。我想知道打开文件是否有一些错误或细微的差异可以改变这一点？

很难追踪到这一点。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-08-19T23:50:16.040

您需要添加：

```
"detect_indentation": false 
```

这是默认开启的，ST 正试图智能地检测当前文件的缩进，重载用户或特定语法的默认值。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-30T06:48:40.920

以下是各种 Sublime Text 2 选项卡设置的说明：

[http://opensourcehacker.com/2012/05/11/sublime-text-2-tips-for-python-and-web-developers/#Configure_sane_tab_and_whitespace_policy_and_other_settings](http://opensourcehacker.com/2012/05/11/sublime-text-2-tips-for-python-and-web-developers/#Configure_sane_tab_and_whitespace_policy_and_other_settings)

*   请注意，选项卡设置可能是每个文件类型

*   默认情况下还启用了从文件自动检测，并且您的源代码文件可能包含错误的制表符

# c# - 如何在一个 DLL 中拥有我的 C# Form 资源，而实现代码在另一个 DLL 中？

> ID：12190383
> 
> 赞同：1
> 
> 时间：2012-08-30T05:26:53.283
> 
> 标签：c#, winforms, dll, localization, resources

我有一个项目，其中包含许多包含表单资源的 DLL 文件，这些资源都经过翻译/本地化 (l10n)。

例如，一个 DLL 包含 SomeForm.cs，其中包含大量代码功能。DLL 还包含 SormForm 的翻译版本：SomeForm.resx、SomeForm.fr.resx 和 SomeForm.ja.resx（默认语言、法语和日语翻译）。

本地化小组要求将所有资源放入一个库中以减少开销。

**如何将表单资源移动到单个 DLL，同时将实现表单的代码保留在当前 DLL 中？**

我不想将功能/代码移动到单个 DLL，我认为这是这里的建议：[将表单资源文件移动到资源 dll](https://stackoverflow.com/questions/9975305/moving-form-resource-files-to-a-resource-dll)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T05:33:41.607

**卫星组件**

附属程序集是仅包含资源文件的 dll。

MSDN 文章非常混乱。这篇文章应该让你对这个概念有一个很好的理解。 [http://www.codeproject.com/Articles/59193/Localizing-a-Windows-Application-with-Satellite-As](http://www.codeproject.com/Articles/59193/Localizing-a-Windows-Application-with-Satellite-As)

**编辑：** Windows 窗体的动态布局。

[如何：使用 AutoSize 和 TableLayoutPanel 控件支持 Windows 窗体上的本地化](http://msdn.microsoft.com/en-us/library/1zkt8b33%28v=vs.80%29)

[演练：创建调整本地化比例的布局](http://msdn.microsoft.com/en-us/library/7k9fa71y%28v=vs.80%29)

**代码清单** [如何：设计一个能够很好地响应本地化的 Windows 窗体布局](http://msdn.microsoft.com/en-us/library/zcky5b93%28v=vs.80%29)

# rest - Mailchimp 休息 api

> ID：12190384
> 
> 赞同：1
> 
> 时间：2012-08-30T05:27:12.910
> 
> 标签：rest, mailchimp

我已经开始使用 MailChimp 的 API。我尝试使用基于我在某处找到的示例代码的 rest 调用连接到他们的服务器：

[http://api.mailchimp.com/1.3/?output=json&method=campaignTemplateContent&apikey=](http://api.mailchimp.com/1.3/?output=json&method=campaignTemplateContent&apikey=) **MyKey-** us2 &cid= **myId**

不幸的是，我不断收到此错误：

```
{"error":"Invalid Mailchimp API Key: **MyKey**-us2 . You are accessing the wrong datacenter - your client library may not properly support our datacenter mapping scheme.","code":104} 
```

我找不到在 MailChimp 的 rest api 上工作的任何其他代码示例。我在这里做错了什么？代码示例在哪里？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T20:41:00.383

您的网址不正确。您应该点击[http://us2.api.mailchimp.com](http://us2.api.mailchimp.com)而不是您正在使用的那个。

# python - 如何使用视图（numpy）将二维数组转换为结构化数组？

> ID：12190391
> 
> 赞同：3
> 
> 时间：2012-08-30T05:27:43.523
> 
> 标签：python, view, numpy, structured-data

我在使用视图方法将字段分配给数组时遇到了一些问题。显然，似乎无法控制您要如何分配该字段。

```
a=array([[1,2],[1,2],[1,2]]) # 3x2 matrix
#array([[1, 2],
#       [1, 2],
#       [1, 2]])  

aa=a.transpose() # 2x3 matrix
#array([[1, 1, 1],
#       [2, 2, 2]])

a.view(dtype='i8,i8') # This works
a.view(dtype='i8,i8,i8') # This returns error ValueError: new type not compatible with array.
aa.view(dtype='i8,i8') # This works
aa.view(dtype='i8,i8,i8') # This returns error ValueError: new type not compatible with array. 
```

事实上，如果我从头开始创建 aa 而不是使用 a 的转置，

```
b=array([[1,1,1],[2,2,2]])
b.view(dtype='i8 i8') # This returns ValueError again.
b.view(dtype='i8,i8,i8') # This works 
```

为什么会这样？有什么方法可以设置字段来表示行或列？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T07:27:16.363

在 NumPy 中创建标准数组时，一些连续的内存块被数据占用。每个块的大小取决于`dtype`阵列的形状，这些块的数量和组织。`dtype`结构化数组遵循相同的模式，不同之处在于每个块现在由几个子块组成，每个子块占用由相应字段定义的一些空间。

在您的示例中，您定义了一个`(3,2)`整数数组（`a`）。第一行是 2`int`个块，第二行是 2 个其他块，第一行是最后 2 个块。如果要将其转换为结构化数组，您可以保留原始布局（每个块成为一个唯一字段`a.view(dtype=[('f0', int)]`（ -block 有一个`int`大小。这就是你这样做时发生的事情`a.view(dtype=[('f0',int),('f1',int)])`。

您不能制作更大的块（*即*, `dtype="i8,i8,i8"`），因为相应的信息将分布在不同的行中。

现在，您可以以不同的方式显示您的数组，例如逐列显示它：这就是您执行`.transpose`数组时发生的情况。不过，它只是显示（NumPy 术语中的“视图”），不会改变原始内存布局。所以，你的`aa`例子，原来的布局仍然是“3行2个整数”，你可以表示为“3行一个2个整数块”。

在您的第二个示例中`b=array([[1,1,1],[2,2,2]])`，您有不同的布局：2 行，每行 3`int`个块。您可以将 3 个 int 块组合成一个更大的块 ( `dtype="i8,i8,i8"`)，因为您不会遍历一行。您不能将其两两分组，因为每行都会有一个额外的块。

您可以`(N,M)`仅将标准数组转换为 (1) 字段的`N`结构化数组`M`或 (2) `NxM`1 个字段的结构化数组，仅此而已。`(N,M)`是在创建时赋予数组的形状。您可以`(M,N)`通过转置将数组显示为数组，但这不会修改原始内存布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T05:56:03.200

当您`b.view(dtype='i8, i8')`在要求`numpy`将值重新解释为包含两个值的元组集时指定视图时，但这根本不可行，因为我们有 3 个值不是 2 的倍数，这就像在它所在的位置重塑矩阵会生成一个不同大小的新矩阵，numpy 不喜欢这样的东西。

# php - 在使用 PHO 回显的 Jquery 中使用 PHP 变量不起作用

> ID：12190392
> 
> 赞同：1
> 
> 时间：2012-08-30T05:27:45.607
> 
> 标签：php, ajax, jquery

我正在尝试将此脚本中的数据发布到包含我的 INSERT QUERY 的测试页面，我正在尝试发布 Subject 和 ID ，但我只能发送主题，而不是 ID，此 ID 是 PHP 中的变量并且此脚本和 PHP 变量在同一页面上。但是当我尝试手动将 ID 传递给插入查询时，它正在工作并插入主题数据。我想我无法正确地将 PHP var 传输到 Jquery 中。

我也使用了 Json_encode ，但这也没有用。我是新手，我不太了解细节。

```
$(function() {
    var subject;
    var dataString;
    var id;

    $(".notes").click(function() {

        id = <?php echo $id;?>;
        subject = $("#textarea").val();
        dataString = 'subject='+ subject  ;

        if(subject=='')
        {
            $('.ryt').fadeOut(1000).hide();

            $('.ntryt').fadeIn(1000).show();
            $('.ntryt').fadeOut(5000).show();
        }
        else
        {
            $.ajax({
                type: "POST",
                url: "/test.php",
                data:{dataString,id}
                success: function(){
                    $('.ryt').fadeIn(1000).show();
                    $('.ryt').fadeOut(2000).show();
                    $('.ntryt').fadeOut(200).hide();

                }
            });
        }
        return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T05:32:25.140

`data:{dataString,id}`无效。

它应该是：

```
data:{subject: subject, id: id}, 
```

# database - 在 CouchDB 中构建队列

> ID：12190396
> 
> 赞同：3
> 
> 时间：2012-08-30T05:28:06.293
> 
> 标签：database, performance, couchdb, queue

这听起来像是一个显而易见的问题，但我是 CouchDB 的新手，所以我认为值得一问，以防 CouchDB 的结构有什么改变了我不知道的情况。由于我无法控制的原因，我必须在 CouchDB 之外构建一个类似队列的结构。为简单起见，假设我正在为稍后执行的作业排队 ID。请注意，不会有重复项。

我试图弄清楚构建它的最佳方法是什么。正如我目前所看到的，我有几个选择：

1.  将队列项目作为条目存储`queue`在 ID 为 的数据库中`_id`，并将出队的项目存储在 ID 为 的类似`dequeued`数据库中`_id`。每个数据库中的每条记录除了（强制性）`_id`和`_rev`.
2.  有一个排队数据库，该数据库将包含一条记录`_id = 'queue'`和一条记录`_id = 'dequeued'`。在这两条记录中的每一条中，都会有任意数量的键，每个键都是要执行的（或已经执行的）作业的 ID。数据库中与键关联的值将是无关紧要的，可能只是一个布尔值。
3.  有一个排队数据库，并且在该数据库中，有一个名为`queue`. 在该记录中，有两个键：`queue`和`dequeued`。这些键中的每一个都将具有一个任意长度的作业执行 ID 列表作为其关联值。

**1**稍微不太理想，因为它需要两个数据库，而**2**让我觉得这是一个糟糕的选择，因为它需要加载排队或出队项目的整个列表才能读取列表项或进行任何更改。但是，**3**很好，因为它允许整个 ID 列表是一个有序列表而不是键/值对，这使得从列表中选择一个随机项目作为下一个要执行的作业变得更容易，因为我实际上不需要知道任何键名（因为没有）。

我正在寻找提供最佳性能的那个。对此有什么想法吗？

### 更新

对于将来阅读这个问题的人，我已经构建了我的 CouchDB 队列模块`CouchQueue`，一个正在进行中的工作。

你可以得到它`npm install couchqueue`。

[在](https://github.com/jdotjdot/CouchQueue)Github 上查看（并请评论、请求请求等） 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T13:48:05.900

队列中每个元素使用一个文档，并保留一个队列数据库。

我建议使用一个字段来对元素进行排序，例如`.created_at`使用 ISO 8601 格式的时间戳。

`.visible`您可以使用标志切换元素的可见性。

我推荐一个 map/reduce 视图，像这样

```
function(doc) {
  if(doc.visible)
    emit(doc.created_at, doc)
} 
```

现在您可以查询此视图，无论是最早的优先还是最新的优先 ( `?descending=true`)。您可以通过更新元素来标记元素完成，设置`visible = false`。

我编写了一个 CouchDB 队列[CQS](https://github.com/iriscouch/cqs)，它与 Amazon SQS API 相同。它类似于我描述的，除了有一个签出状态的消息可以，在超时期间在队列中不可见。我在生产环境中使用 CQS 大约两年了，更新了数亿次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T10:13:36.093

我建议为每个队列条目使用单独的文档，这样可以避免冲突。

如果您只需要一个带有接口,的**队列**来添加插入元素并获取一个元素，那么解决方案可能非常简单（如果您想要带有的**列表**，或者访问第 n 个元素，它会变得[更加复杂](http://guide.couchdb.org/draft/recipes.html#Ordering%20Lists)）。对于具有线性顺序的调度算法（如 FIFO、FILO），您可以将其实现为插入新文档：`push()``pop()``top()`**`next()``push()`**

 **```
{ type: "queue", inserted: CURRENT_TIME, ... } 
```

`top()`作为地图：

```
function (doc) {
  if (doc.type == "queue" && doc.inserted) {
    emit(doc.inserted, doc);
  }
} 
```

并减少作为一个聚合（例如，对于 FILO 的最大值，对于 FIFO 的最小值）。因为`pop()`您可以要求查看，`top()`然后删除该文档。Map/reduce 必须是确定性的，所以如果你想选择随机元素，你可以使 reduce 依赖于伪随机（由服务器选择）`_id`。

我预计有两个问题：

1.  注意并发：两个进程可以使用 请求同一个文档`top()`，第一个将删除该文档作为 的一部分`pop()`，第二个将尝试获取已删除的文档。

2.  CouchDB 从不真正删除文档，只会标记为已删除。为每个`push()`/添加和删除`pop()`将增加数据库。您将不得不以某种方式重用这些文档。也许您对任务进行了一些轮询，这些任务被插入和删除，或者在队列中重新排序。然后您可以添加`queued: true`到任务文档，而不是使用`type: "queue"`.**

# windows - USB ReadFile() 仅在第三次后有效？

> ID：12190399
> 
> 赞同：1
> 
> 时间：2012-08-30T05:28:19.697
> 
> 标签：windows, winapi, visual-c++, usb, hid

我正在开发一个自定义 USB HID 设备，其 IN 和 OUT 中断端点各 64 字节长度。有 2 个报告（一个报告 ID 为 1，另一个报告 ID 为 2），每个报告计数为 63 个字节。当用 VC++ 开发的 PC 应用程序使用 WriteFile() 发送一个 64 字节的缓冲区时，我在 OUT 中断端点上的设备上正确接收了整个缓冲区。但是，当我从设备向 IN 端点上的 PC 发送一个 64 字节缓冲区时，ReadFile() 返回值为 4（超时）。插入设备时，这种情况仅发生 2 次。之后一切正常，PC 正确读取设备发送的 64 字节。

我正在使用 USBlyzer 工具来嗅探 USB 总线流量。该软件显示，前两次设备在中断 IN 端点上发送一个 64 字节的缓冲区，但它也无法显示其中的数据。从第三次开始，一切都神奇地运行，PC 应用程序和 USBlyzer 都接收并在屏幕上显示 64 字节缓冲区内容。

我不确定问题到底出在哪里，是在 PC 端代码还是在设备固件中？请分享你的想法。

# xslt - XSL 1.0 - 对不同列表中的列表进行排序

> ID：12190401
> 
> 赞同：3
> 
> 时间：2012-08-30T05:28:27.230
> 
> 标签：xslt, xslt-1.0

我是 XSL 的新手，并试图查看这里的所有示例，但没有一个符合我的问题。

我有一个电影排序列表（从左到右排序）

```
<movies>movieF,movieC,movieG</movies> 
```

现在我想把这个排序列表放在我这个巨大的电影列表的顶部

```
<moviesList>
 <movie>movieA</movie>
 <movie>movieB</movie>
 <movie>movieC</movie>
 <movie>movieD</movie>
 <movie>movieE</movie>
 <movie>movieF</movie>
 <movie>movieG</movie>
 <movie>movieH</movie>
</moviesList> 
```

我想要的结果：

```
<moviesList>
 <movie>movieF</movie>
 <movie>movieC</movie>
 <movie>movieG</movie>
 <movie>movieA</movie>
 <movie>movieB</movie>
 <movie>movieD</movie>
 <movie>movieE</movie>
 <movie>movieH</movie>
</moviesList> 
```

有人请给我一些指导如何实现这样的事情。我尝试创建一个变量 $sortlist，然后在周围添加分隔字符，然后在排序上使用 substring-before 技巧。结果是我的排序列表确实在其余电影之前显示在顶部，但它的顺序不正确。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T22:26:11.647

尝试这个：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:param name="sortlist" select="';movieF;movieC;movieG;'"/>

  <xsl:template match="moviesList">
    <xsl:copy>
      <xsl:for-each select="*[contains($sortlist, concat(';',.,';'))]">
        <xsl:sort select="substring-before($sortlist,concat(';',.,';'))" />
        <xsl:copy-of select="."/>
      </xsl:for-each>
      <xsl:copy-of select="*[not(contains($sortlist, concat(';',.,';')))]"/>
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

注意，我没有使用`string-length`排序，我只是使用了字符串本身。XSLT1.0 可以按字母顺序排序，而不是按数字排序，这会将 14 放在 7 之上，从而形成 movieF、movieG、movieC 的顺序。

它实际上使用电影名称列表中每个电影名称之前的部分作为排序键；按字母顺序，`;movieF;`在 之前`;movieF;movieC;`，因此在排序时它会放在`movieC`上面。`movieG`

我个人倾向于避免使用逗号作为分隔符，因为它们可以用于某些名称，例如“卧虎藏龙”。分号的可能性要小得多，但你可以使用任何你喜欢的角色，只要它不是出现在电影名称中的角色。

# android - 在屏幕上的每次触摸上创建按钮

> ID：12190402
> 
> 赞同：3
> 
> 时间：2012-08-30T05:28:34.483
> 
> 标签：android, button, touch

我想制作一个应用程序，每当我触摸屏幕时，它在开始时应该是空白的，一个按钮将被创建并弹出到屏幕上。所以我在这里尝试的是在 main.xml 中创建一个按钮并通过 id 调用它。然后我应用了这个方法。

```
public class TouchButtonActivity extends Activity {
Button b;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    b=(Button) findViewById(R.id.b1);
    b.setOnTouchListener(nextListener);
}

public OnTouchListener nextListener = new OnTouchListener() {
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        if (event.getAction() == MotionEvent.ACTION_DOWN) {
            float x = event.getX()*event.getXPrecision();
            float y = event.getY()*event.getYPrecision();
            FrameLayout.LayoutParams p = new FrameLayout.LayoutParams(FrameLayout.LayoutParams.WRAP_CONTENT, FrameLayout.LayoutParams.WRAP_CONTENT);
            p.gravity = Gravity.TOP;
            p.leftMargin = (int) x;
            p.topMargin = (int) y;
            b.setLayoutParams(p);
            return true;
        }
        return false;
    }
};

} 
```

这是我的 xml

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
 >

<Button
    android:id="@+id/b1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="B" />

</FrameLayout> 
```

我怎么能这样做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T07:43:51.627

如果您想在单击屏幕上的任何位置时添加一个按钮，我认为您可以使用相对布局并在该布局上添加触摸侦听器。在触摸该屏幕时，在该布局上添加按钮，这样就像在新触摸时会弹出一个新按钮。谢谢

代码将像 -

> 主要布局

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/rl"
android:layout_width="fill_parent"
android:layout_height="fill_parent" > 
```

这门课就像——

```
rl = (RelativeLayout) findViewById(R.id.rl);
    rl.setOnTouchListener(new View.OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            // TODO Auto-generated method stub
            float x = event.getX()*event.getXPrecision();
            float y = event.getY()*event.getYPrecision();

            Button btn = new Button(getApplicationContext());
            RelativeLayout.LayoutParams bp = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
            bp.leftMargin = (int) x;
            bp.topMargin = (int) y;
            btn.setLayoutParams(bp);
            rl.addView(btn);

            return false;
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T06:11:54.137

我不确定您要达到的目标，但是：

1）确保您的`main.xml`布局是`FrameLayout`

2）然后更改您的代码：

```
public OnTouchListener nextListener = new OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) {
                if (event.getAction() == MotionEvent.ACTION_DOWN) {
                    float x = event.getX()*event.getXPrecision();
                    float y = event.getY()*event.getYPrecision();
                    FrameLayout.LayoutParams p = new FrameLayout.LayoutParams(FrameLayout.LayoutParams.WRAP_CONTENT, FrameLayout.LayoutParams.WRAP_CONTENT);
                    p.gravity = Gravity.TOP;
                    p.leftMargin = (int) x;
                    p.topMargin = (int) y;
                    b.setLayoutParams(p);
                    return true;
                }
                return false;
            }
        }; 
```

**编辑**

你忘了这个：

```
setOnTouchListener(nextListener); 
```

# .htaccess - 在 htaccess 中为特定的 url 使用 var

> ID：12190404
> 
> 赞同：0
> 
> 时间：2012-08-30T05:28:39.623
> 
> 标签：.htaccess, redirect, variables

我是第一次编辑 htaccess，不知道如何编写正确的 url 重定向。我用谷歌搜索了这个问题，但没有重定向的答案，只有重写。

我的网站上有 /?post=89 之类的链接，我想将它们重定向到 /stranica/89/

您能否帮助我，如何使用 vars 来捕获该数字并正确重定向？

尝试了建议的解决方案，没有奏效。我正在寻找这样的东西

重定向 index.php/?post=$ /stranica/$1/

但该代码不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T06:45:44.117

如果您的站点中有不同的查询字符串模式，您可以试试这个

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{QUERY_STRING} ^(.*)=(.*)
    RewriteRule ^(.*).php /$1/%1/%2/? [R,L]
</IfModule> 
```

这会将像 /index.php?id=5 这样的 URL 重定向到 /index/id/5/

以下代码将重定向您在问题中提到的确切网址

```
 <IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{QUERY_STRING} ^post=(.*)
    RewriteRule ^index.php /index/stranica/%1/? [R,L]
</IfModule> 
```

# javascript - 有什么用？和 ：

> ID：12190410
> 
> 赞同：0
> 
> 时间：2012-08-30T05:29:05.433
> 
> 标签：javascript, html

> **可能重复：**
> [JS 如何使用？：（三元）运算符](https://stackoverflow.com/questions/6259982/js-how-to-use-the-ternary-operator)

我在该插件中下载了一个用于 wordpress 的插件，其中有一个 javascript。进入那个js代码我不明白它是如何工作的。

```
function ddet_javascript() {

echo '
<script language="JavaScript" type="text/javascript"><!-- 
function expand(param) { 
param.style.display=(param.style.display=="none") ? "" : "none"; 
 } 
  //--></script>';
} 
```

在这段代码中，我不理解下面给出的行。

`param.style.display=(param.style.display=="none") ? "" : "none";`

有什么用？和：在这一行。如果有人知道，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T05:32:15.930

它是一个运算符：

> （健康）状况） ？真假

它像是：

```
if(param.style.display=="none")
       param.style.display="";
else
       param.style.display="none; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T05:30:41.803

这是三元运算符。它的工作原理类似于 if else 语句。

查看此链接：

[http://davidwalsh.name/learning-ternary-operators-tips-tricks](http://davidwalsh.name/learning-ternary-operators-tips-tricks)

[http://jqfundamentals.com/#example-2.16](http://jqfundamentals.com/#example-2.16)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T05:32:10.627

这是三元条件运算符：表达式

```
Cond ? a : b 
```

如果为真，则计算`Cond`并延迟返回，否则返回。`a``b`

在您的情况下，表达式的整个结果都分配给`param.style.display`. 换句话说，如果`display`已经设置为`"none"`，则设置为`""`，否则设置为`"none"`。

该运算符在许多语言中很常见，因为它为您提供了一个*表达式*，其值取决于某事。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-30T05:33:56.550

在您的代码中，它的工作方式如下：

```
if(param.style.display=="none"){
   param.style.display = "";  
} else{
    param.style.display = "none";  
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-30T05:34:01.647

它被称为条件（三元）运算符。

```
test ? expression1 : expression2 
```

如果 test 为真，则返回表达式 1，否则返回表达式 2。

这不是特定于 jquery 而是一个 javascript 运算符。

欲了解更多信息，[三元运算符 javascript](http://msdn.microsoft.com/en-us/library/be21c7hw%28v=vs.94%29.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-30T05:31:39.250

x=a?b:c, ?: 是一个三元运算符（适用于 3 个操作数）。这意味着如果 a 为真，则 x=b 否则 x=c

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-30T05:32:52.890

```
if (param.style.display=="none")
  param.style.display = "";
else
  param.style.display = "none"; 
```

# android - 检查表格布局中是否存在表格行

> ID：12190412
> 
> 赞同：1
> 
> 时间：2012-08-30T05:29:32.257
> 
> 标签：android, android-layout, android-view, android-tablelayout

## 是）我有的

我创建了一个表格布局，其中行是动态添加的。我有 2 个 editTexts 作为列。

## 我想要的是

*   如果表格行的第二个 editText 获得焦点并按下回车键，则：
    1.  如果下面存在表格行，则应将焦点设置为其编辑文本。
    2.  如果下方不存在表格行，则应添加表格行，然后设置焦点。

我想我需要类似的东西：

```
If(tablerow exists below){
  //do the focusing
}
else{
  //add new row
  //do the focusing
} 
```

我使用了一个函数*addView*来添加行：

```
public void addView(Context context) {

    int dpConv = (int) getResources().getDisplayMetrics().density;

    i = i + 1;
    try {

        txt_itemName[i] = new EditText(context);
        txt_itemName[i].setText("itName");
        txt_itemName[i].requestFocus();

        txt_qty[i] = new EditText(context);
        txt_qty[i].setInputType(InputType.TYPE_TEXT_FLAG_CAP_WORDS);
        txt_qty[i].setImeOptions(EditorInfo.IME_ACTION_NEXT);
        txt_qty[i].setOnEditorActionListener(new OnEditorActionListener() {

                public boolean onEditorAction(TextView v, int actionId, KeyEvent event)                                            

        {

                        if(actionId == EditorInfo.IME_ACTION_NEXT){

                                txt_qty[i].clearFocus();

                                //Need to check conditions here
                        }

        return false;
        }
        });

        tb_row[i] = new TableRow(context);
        tb_row[i].addView(txt_itemName[i]);
        tb_row[i].addView(txt_qty[i]);

        tb_lyt.addView(tb_row[i]); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T06:19:49.477

行。如果你试试这个怎么办：

```
if(actionId == EditorInfo.IME_ACTION_NEXT){

    txt_qty[i].clearFocus();

    //Need to check conditions here
    /* I'm assuming that:
          You have the value of i
          You add TableRows ONLY to your TableLayout
    */
    if(tb_lyt.getChildCount() > (i+1)) {
        //If a child exist below
        //Do your focus setting
    }
    else {
        //Add a new Row.
    }
 } 
```

# c++ - c++中的代码组织

> ID：12190420
> 
> 赞同：0
> 
> 时间：2012-08-30T05:30:03.970
> 
> 标签：c++

我有一个跨越两个文件的类。它在**declare.h**文件中声明并在**define.cpp**文件中定义。

**定义.h**

```
class A{
    public: int a;
            void func(){ a = some_other_func(); }
             A();
}; 
```

**定义.cpp**

```
A::A(){
    a =0;
} 
```

总体思路是在构造函数中初始化一个变量，然后在内联函数中使用它。但是构造函数定义和函数定义在不同的文件中。这有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T05:32:05.573

您需要`#include "declare.h"`输入`define.cpp`然后将构造函数编写为`A::A() : a(0){}`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T05:32:47.843

声明/定义分离绝对没有问题，只要`declare.h`包含在`define.cpp`. 但通常的做法是实现文件与声明文件同名，除了后缀。所以你的情况可能是`A.h`and `A.cpp`。

但是，成员变量`a`本身的初始化存在问题。您可能希望在构造函数初始化列表中进行初始化*：* `int a`

```
A::A() : a(0) {} 
```

在您的代码中，它根本**没有被初始化**。您正在`a`构造函数的主体中创建和初始化一个称为局部变量的局部变量。大概这不是你想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T05:33:13.310

虽然总的来说这不是技术问题。您应该采用 .h 文件是代码接口的约定，因此它们应该只包含其他代码调用您的代码所需的内容。

# linux - 在 Proxmox 2.x 上创建 VM 时传递 kickstart 参数

> ID：12190426
> 
> 赞同：0
> 
> 时间：2012-08-30T05:30:31.633
> 
> 标签：linux, virtualization, libvirt

在从 Proxmox 2.1 上的命令行创建 VM 时，我试图找到一种传递内核参数的方法。

我希望能够使用 QM 命令批量创建 VM，并传递 kickstart 参数，类似于 libvirt -x 选项。

以前有人做过吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T13:53:07.637

从 qm 手册页：

> args: ...
> 注意：此选项仅供专家使用。它允许您将任意参数传递给 kvm，例如：
> args: -no-reboot -no-hpet

AFAIC，用它来设置`-serial`KVM 参数，如下所示：

> 参数：-serial unix:/var/run/qemu-server/104.serial,server,nowait

它也应该与`-append`KVM 选项一起使用，但尚未对其进行测试。

# google-places-api - 如何确定何时将新的“地点”添加到 Google 地方信息数据库？

> ID：12190432
> 
> 赞同：0
> 
> 时间：2012-08-30T05:31:07.047
> 
> 标签：google-places-api

如何确定何时将新的“地点”添加到 Google 地方信息数据库？是否有某种方法可以用来按添加日期查询 Google Places API？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T05:52:14.913

目前没有方法可以做到这一点。如果您认为这是一项有用的功能，请提交[Places API 功能请求](http://code.google.com/p/gmaps-api-issues/issues/entry?template=Places%20API%20-%20Feature%20Request)。

# java - 我们可以使用 Java 中的“new”关键字创建一个 HttpResponse 对象吗？

> ID：12190433
> 
> 赞同：1
> 
> 时间：2012-08-30T05:31:09.753
> 
> 标签：java, web-services, rest, jax-ws

我正在研究 Martin Kalin 的[“Web Services Up and running”](http://shop.oreilly.com/product/9780596521134.do)一书的第 4 章。

在 RestfulTeams 练习中，有一个方法可以返回一个简单`HttpResponse`的 WS，例如：

```
private Source response_to_client(String msg) {
    HttpResponse response = new HttpResponse();
    response.setResponse(msg);
    ByteArrayInputStream stream = encode_to_stream(response);
    return new StreamSource(stream);
} 
```

但是我没有在 Java 中找到任何可以获取`HttpResponse`类的库（尽管我认为我们不能像上面的方法那样直接创建这个对象）。

任何澄清都将有助于解决此问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T11:44:59.047

我相信您正在考虑[HttpServletResponse](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletResponse.html)。您不能从中创建自己的响应对象；服务器创建它的实例并使它们可用于您的应用程序。

但是示例中的类被调用`HttpResponse`，它要么是错误，要么是本书省略的其他类。

写书很难，所以错误可以溜走。这就是为什么在本书印刷后，发现的错误会[记录在勘误表](http://oreilly.com/catalog/errata.csp?isbn=9780596521134)中。您通常会在那里找到解释，并且总有[本书的源代码](http://examples.oreilly.com/9780596521134/)可供学习。

下载源代码，我想你会找到你要找的，主要是这个：

```
package ch04.team;

import java.io.Serializable;

// Serialized for responses on successful POSTs and PUTs
public class HttpResponse implements Serializable {
    private String resp;
    public void setResponse(String resp) { this.resp = resp; }
    public String getResponse() { return this.resp; }
} 
```

# c# - c#中的Java加密代码

> ID：12190435
> 
> 赞同：0
> 
> 时间：2012-08-30T05:31:37.527
> 
> 标签：c#, java, encryption, aes, sha1

我在使用 AES 加密算法和 SHA1PRNG 哈希加密和解密字符串的 Android 设备上使用了以下 Java 代码。我希望 Android 设备调用用 C# 编写的 .NET WCF 服务。我一直在到处寻找，试图在 C# 中找到一个可以以与 Java 代码类似的方式加密和解密的等价物，但找不到完全相同的方式来做到这一点。这是两种语言的 Encrypt() 方法：

爪哇：

```
public static String encrypt(String seed, String cleartext) throws Exception 
{
    KeyGenerator kgen = KeyGenerator.getInstance("AES");
    SecureRandom sr = SecureRandom.getInstance("SHA1PRNG");
    sr.setSeed(seed);
    kgen.init(128, sr); // 192 and 256 bits may not be available
    SecretKey skey = kgen.generateKey();

    byte[] rawKey = skey.getEncoded();
    SecretKeySpec skeySpec = new SecretKeySpec(rawKey, "AES");
    Cipher cipher = Cipher.getInstance("AES");
    cipher.init(Cipher.ENCRYPT_MODE, skeySpec);
    byte[] encrypted = cipher.doFinal(cleartext.getBytes());
    return toHex(encrypted);
} 
```

我在 C# 中创建了类似的东西，它也使用 AES 和 SHA1：

C＃：

```
public static string Encrypt(string seed, string cleartext)
{
  var objAesCrypto = new AesManaged();
  var objHashSha1 = new SHA1Managed();

  var byteHash = objHashSha1.ComputeHash(Encoding.ASCII.GetBytes(seed));
  var truncatedHash = new byte[16];
  Array.Copy(byteHash, truncatedHash, truncatedHash.Length);
  objAesCrypto.Key = truncatedHash;
  objAesCrypto.Mode = CipherMode.ECB;

  var byteBuff = Encoding.ASCII.GetBytes(cleartext);
  return Convert.ToBase64String(objAesCrypto.CreateEncryptor().TransformFinalBlock(byteBuff, 0, byteBuff.Length));
} 
```

然而，这有几个问题。如您所见，使用 C# 版本的 SHA1 (SHA1Managed)，它返回 20 个字节的散列，而不是 16 个。让它传递给 AES 算法的唯一方法是先将散列截断为 16 个字节。

第二个问题是，尽管两者在各自的环境中都可以正常工作，但当我尝试从 Java 传递加密字符串以及种子时，C# 代码永远无法正确解密它。两种情况下的加密字符串看起来都不一样，甚至长度也不同。Java 端的典型加密字符串如下所示： `F7E8758A2E65518FB49C53BC707288FC`（32 个字符长）。而来自 C# 端的具有相同种子的完全相同的加密字符串看起来像这样： `3VysgnYgNi9OJBxL2FP+rQ==`（24 个字符长）。

我确信这与我在 C# 中截断哈希的事实有关，但这并不能解释为什么两个加密字符串看起来如此不同。（我注意到的另一件有趣的事情是，无论我在 C# 端使用什么字符串和种子，它总是 24 个字符长并以两个等号结尾 - 为什么会这样？）

所以，我的问题是，如何让两个环境能够使用相同的种子值解密彼此的加密字符串？我不在乎我是否需要在 C# 端使用与 Java 端不同的算法，我只需要 C# 代码能够读取 Java 加密的字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T05:45:05.533

> 第二个问题是，尽管两者在各自的环境中都可以正常工作，但当我尝试从 Java 传递加密字符串以及种子时，C# 代码永远无法正确解密它。

您不应该尝试*解密*哈希。哈希是单向的。

> Java 端的典型加密字符串如下所示：F7E8758A2E65518FB49C53BC707288FC（32 个字符长）。而来自 C# 端的具有完全相同种子的完全相同的加密字符串看起来像这样：3VysgnYgNi9OJBxL2FP+rQ==（24 个字符长）。

那是因为您在 Java 中转换为十六进制，但在 C# 中转换为 Base64：

```
return toHex(encrypted); 
```

对比

```
return Convert.ToBase64String(...); 
```

至于种子长度问题 - 同样，您在 Java 与 C# 中做不同的事情。我完全不清楚以`SecureRandom`这种方式使用是否意味着生成与使用来自 SHA1 的直接哈希相同的密钥。

不过，与其尝试修复这种方法，我建议你应该重新考虑它——它对我来说根本不安全。你所说的种子不仅仅是一个种子——它基本上是一个完整的密钥。知道种子的攻击者有效地知道系统的“密码”；您不妨只使用原始字节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T07:42:39.687

Android 似乎使用了 SHA1PRNG 的固定版本。.NET/Java/Android 的 SHA1PRNG 似乎也有很多实现。

您可能想查看以下链接以了解一些类似的问题，以及 Android 中存在的 SHA1PRNG 到 C# 的可能端口。 [Android 中的 SHA1PRNG - .NET](http://fubar-dev.blogspot.in/2011/07/decrypting-secret-key-of-trion-rift.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T05:44:42.723

据我所知，你`toHex(encrypted);`的不是一回事。`Convert.ToBase64String()`

# ruby-on-rails - 在 Rails 中，如何通过多个列将一个模型引用到另一个模型？

> ID：12190446
> 
> 赞同：2
> 
> 时间：2012-08-30T05:32:27.757
> 
> 标签：ruby-on-rails, activerecord

假设我们正在创建一个博客。通常，模型如下所示：

```
class User
  has_many :posts
end

class Post
  belongs_to :user
end 
```

他们的模式看起来像：

```
User
  id

Post
  id
  user_id 
```

但是现在用户可以通过Facebook/Twitter/等方式登录，我们希望帖子不属于User对象，而是属于*provider*和provider的*uid*的组合。

新架构如下所示：

```
User
  id
  provider
  uid

Post
  id
  user_provider
  user_uid 
```

而且我不确定模型会是什么样子：

```
class User
  has_many :posts, :foreign_key => ['user_provider', 'user_uid'] # Is this right??
end

class Post
  belongs_to :user, :class_name => User # Again, this is a guess...
end 
```

我在正确的轨道上吗？Rails 这样做的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T05:43:08.093

您不能在开箱即用的轨道中拥有复合主键。我认为你将不得不使用宝石。我建议您找到解决方法。

然而，有一个起点，看这里：

[http://compositekeys.rubyforge.org/](http://compositekeys.rubyforge.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T09:38:02.027

你能详细说明你为什么要这样做吗？

Rails 的标准做法是，主键是一个称为“id”的整数，因此外键遵循这一点。

但是，没有什么能阻止您创建复合索引并确保复合唯一性。

在 Post 模型上，您可以编写：

```
validate_uniqueness_of :uid, :scope => :provider 
```

或使用较新的 Rails 3 语法：

```
validates :uid, :uniqueness => {:scope => :provider} 
```

您可以在迁移中添加复合索引：

```
add_index :posts, [:uid, :provider] 
```

或使用唯一索引在数据库级别强制唯一性：

```
add_index :posts, [:uid, :provider], :unique => true 
```

# php - PHP PDO 不更新表且不产生错误

> ID：12190452
> 
> 赞同：2
> 
> 时间：2012-08-30T05:33:20.053
> 
> 标签：php, mysql, pdo, sql-update, prepared-statement

我正在尝试使用 PDO 准备语句更新我的一个表中的单个元素，并且由于某种原因它不起作用。我正在使用 try-and-catch 并且我没有收到来自系统的错误。我还回显了我的两个绑定参数，并且它们都在系统中注册，所以我不知道为什么它没有通过。我在另一个脚本中使用了与此非常相似的查询，一切都很好。

```
if($_POST['check_request'] == "Yes"){
    $check_amnt = $_POST['check_amnt'];
    try {
        $STH = $DBH->prepare('UPDATE accounts SET check = :check_amnt WHERE accnt = :user');
        $STH->bindParam(':check_amnt', $check_amnt);
        $STH->bindParam(':user', $ulog);
        $STH->execute();
    }
    catch(PDOException $e) {  
        echo "Check Input Error: " .$e->getMessage(). "</br>";
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T05:37:10.410

您是否为 with 设置了异常模式`PDO`：

```
$DBH->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 
```

***更新：*** `check`是mysql的保留字，需要转义。

```
$STH = $DBH->prepare('UPDATE accounts SET `check` = :check_amnt WHERE accnt = :user'); 
```

# google-chrome - 如何让我的 Chrome 扩展程序读取当前网页的特定文本？

> ID：12190458
> 
> 赞同：0
> 
> 时间：2012-08-30T05:34:43.770
> 
> 标签：google-chrome, google-chrome-extension

我正在创建一个用于查找电子邮件地址的 Chrome 扩展程序，我希望它在访问特定网页时抓取电子邮件。

例如，假设我正在访问`http://www.sagaciousinfosystems.com/contactus.php`并执行我的扩展程序。我希望它抓取页面上的电子邮件地址，然后我可以将其用于其他事情。

# c# - 为什么我会收到 HttpRequestValidationException 使用原始 html 提交用户输入？

> ID：12190461
> 
> 赞同：0
> 
> 时间：2012-08-30T05:35:16.957
> 
> 标签：c#, asp.net-mvc-3, razor

这是一个视图：

```
@model ModelValidation.Models.Appointment
@{
    ViewBag.Title = "Make a Booking";
}
<h2>
    Book an Appointment</h2>
@using (Html.BeginForm())
{
    <p>
        @Html.LabelFor(m => m.ClientName, "Your name: ") @Html.EditorFor(m =>     m.ClientName)    
    </p>
    <p>
        @Html.LabelFor(m => m.Date, "Appointment Date: ") @Html.EditorFor(m => m.Date)        
    </p>
    <p>
        @Html.EditorFor(m => m.TermsAccepted) @Html.LabelFor(m => m.TermsAccepted, "I     accept the terms & conditions")
    </p>
    <input type="submit" value="Make Booking" />
} 
```

这是约会类：

```
public class Appointment
{
    public string ClientName { get; set; }

    [DataType(DataType.Date)]
    public DateTime Date { get; set; }

    public bool TermsAccepted { get; set; }
} 
```

如果我进入 ClientName 编辑器，如下所示：

```
<b>asdf</b> 
```

按下“进行预订”按钮（提交）后，出现以下异常：

```
[HttpRequestValidationException (0x80004005): potentilly dangerous value of Request.Form has been received from the client (ClientName="<b>asdf</b>").]
   System.Web.HttpRequest.ValidateString(String value, String collectionKey, RequestValidationSource requestCollection) +8755668
   Microsoft.Web.Infrastructure.DynamicValidationHelper.<>c__DisplayClass12.<ReplaceCollection>b__d(String value, String key) +79
   Microsoft.Web.Infrastructure.DynamicValidationHelper.LazilyEvaluatedNameObjectEntry.ValidateObject() +89
   Microsoft.Web.Infrastructure.DynamicValidationHelper.LazilyValidatingHashtable.get_Item(Object key) +54
   System.Collections.Specialized.NameObjectCollectionBase.FindEntry(String key) +20
   System.Collections.Specialized.NameValueCollection.GetValues(String name) +8
   System.Web.Mvc.ValueProviderResultPlaceholder.GetResultFromCollection(String key, NameValueCollection collection, CultureInfo culture) +20
   System.Web.Mvc.<>c__DisplayClass4.<.ctor>b__0() +16
   System.Lazy`1.CreateValue() +361
   System.Lazy`1.LazyInitValue() +9591042
   System.Lazy`1.get_Value() +89
   System.Web.Mvc.NameValueCollectionValueProvider.GetValue(String key, Boolean skipValidation) +68
   System.Web.Mvc.ValueProviderCollection.GetValueFromProvider(IValueProvider provider, String key, Boolean skipValidation) +55
   System.Web.Mvc.<>c__DisplayClass9.<GetValue>b__4(IValueProvider provider) +33
   System.Linq.WhereSelectEnumerableIterator`2.MoveNext() +151
   System.Linq.WhereSelectEnumerableIterator`2.MoveNext() +177
   System.Linq.Enumerable.FirstOrDefault(IEnumerable`1 source) +4187840
   System.Web.Mvc.ValueProviderCollection.GetValue(String key, Boolean skipValidation)     +272
   System.Web.Mvc.DefaultModelBinder.BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext) +385
   System.Web.Mvc.DefaultModelBinder.GetPropertyValue(ControllerContext controllerContext, ModelBindingContext bindingContext, PropertyDescriptor propertyDescriptor, IModelBinder propertyBinder) +17
   System.Web.Mvc.DefaultModelBinder.BindProperty(ControllerContext controllerContext, ModelBindingContext bindingContext, PropertyDescriptor propertyDescriptor) +399
   System.Web.Mvc.DefaultModelBinder.BindProperties(ControllerContext controllerContext, ModelBindingContext bindingContext) +93
   System.Web.Mvc.DefaultModelBinder.BindComplexElementalModel(ControllerContext controllerContext, ModelBindingContext bindingContext, Object model) +53
   System.Web.Mvc.DefaultModelBinder.BindComplexModel(ControllerContext controllerContext, ModelBindingContext bindingContext) +1367
   System.Web.Mvc.DefaultModelBinder.BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext) +449
   System.Web.Mvc.ControllerActionInvoker.GetParameterValue(ControllerContext controllerContext, ParameterDescriptor parameterDescriptor) +317
   System.Web.Mvc.ControllerActionInvoker.GetParameterValues(ControllerContext controllerContext, ActionDescriptor actionDescriptor) +117
   System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) +343
   System.Web.Mvc.Controller.ExecuteCore() +116
   System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) +97
   System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext) +10
   System.Web.Mvc.<>c__DisplayClassb.<BeginProcessRequest>b__5() +37
   System.Web.Mvc.Async.<>c__DisplayClass1.<MakeVoidDelegate>b__0() +21
   System.Web.Mvc.Async.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _) +12
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62
   System.Web.Mvc.<>c__DisplayClasse.<EndProcessRequest>b__d() +50
   System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f) +7
   System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action) +22
   System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +60
       System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) +9
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +8862381
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +184 
```

据我所知，所有用户输入默认在剃刀视图引擎中进行编码。那我为什么会得到这个？

在调用目标 POST 操作方法之前引发异常。或者我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T05:39:33.727

编辑：

抱歉读错了。

默认情况下，MVC 框架会尝试保护您免受危险输入的影响，例如 html。如果您稍后重新渲染它，这可以用来攻击您的网站。请参阅[跨站点脚本](http://en.wikipedia.org/wiki/Cross-site_scripting)

如果您想像输入的名称一样接受 HTML，则必须明确告诉它不要验证该输入。

像：

```
[HttpPost]
[ValidateInput(false)]
public ActionResult Save()
{
    // ...method body
} 
```

我当然会建议不要这样做，除非它是一个特定的要求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T05:49:02.403

将 HTML 存储在数据层中从技术上讲没有任何问题，但它可能会增加您对恶意 HTML/脚本的 xss（跨站点脚本）攻击。

使用

```
[允许HTML]
```

您的 ClientName 属性上的属性。然后在保存之前使用[Microsoft WPL 或 Web 保护库](http://wpl.codeplex.com/)中的 anti-xss 库并使用

```
Sanitizer.GetSafeHtmlFragment(clientName)
```

在保存到数据库之前对其进行消毒（而不是编码！）。

如果您想了解更多关于请求验证和 xss 攻击的扩展信息，请参阅我的复数视力.com hack proofing course。

# coding-style - 是否有任何语言具有 while-else 流结构？

> ID：12190462
> 
> 赞同：7
> 
> 时间：2012-08-30T05:35:37.297
> 
> 标签：coding-style

考虑一下我碰巧经常使用的这种流程结构：

```
if ( hasPosts() ) {
    while ( hasPosts() ) {
        displayNextPost();
    }
} else {
    displayNoPostsContent();
} 
```

是否有任何编程语言具有可选`else`子句 for `while`，如果从未进入 while 循环，则将运行该子句？因此，上面的代码将变为：

```
while ( hasPosts() ) {
    displayNextPost();
} else {
    displayNoPostsContent();
} 
```

我发现有趣的是，许多语言都有这种`do-while`结构（在检查条件之前运行一次 while 代码），但我从未见过`while-else`解决方法。根据在 N-1 块中运行的内容（例如`try-catch`构造）运行 N 块代码是有先例的。

**我不确定是在这里发帖还是在programmers.SE 上发帖。如果这个问题在那里更合适，那么请移动它。谢谢。**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T09:03:29.320

这真的很深奥。标准 Common Lisp 不提供它。但我们在一个名为[ITERATE](http://common-lisp.net/project/iterate/)的库中找到它。

Common Lisp 有非常花哨的控制结构。有一个名为*ITERATE*的库，它类似于 Common Lisp 的`LOOP`宏，但具有更多的特性和更多的括号。

例子：

```
(iterate (while (has-posts-p))
  (display-next-post)
  (else (display-no-posts-content))) 
```

它完全符合您的要求。*else*子句仅在 while 子句从不为真时运行*一次*。

例子：

```
(defparameter *posts* '(1 2 3 4))

(defun has-posts-p ()
  *posts*)

(defun display-next-post ()
  (print (pop *posts*)))

(defun display-no-posts-content ()
  (write-line "no-posts"))

(defun test ()
  (iterate (while (has-posts-p))
    (display-next-post)
    (else (display-no-posts-content)))) 
```

有一些*帖子*：

```
EXTENDED-CL 41 > *posts*
(1 2 3 4)

EXTENDED-CL 42 > (test)

1 
2 
3 
4 
NIL 
```

没有*帖子*：

```
EXTENDED-CL 43 > *posts*
NIL

EXTENDED-CL 44 > (test)
no-posts
NIL 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T05:37:31.383

Python在and上有`else`子句，但它们仅在循环从未中断 with , 等情况下运行。`while``for``break``return`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T05:39:00.853

某些语言具有宏功能，可让您定义此类事物。在*C*、*C++*、*Common Lisp*中，你可以定义这样的宏。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T15:37:52.040

我不是 Common Lisp 的 LOOP 宏的特别粉丝，但它可以做到

(loop while (has-posts-p) do (display-next-post) finally (return (display-no-posts-content)))

如果您不关心价值，则无需退货。

# informatica-powercenter - 在 Informatica PowerCenter 的源分析器的搜索条件中搜索源表

> ID：12190466
> 
> 赞同：1
> 
> 时间：2012-08-30T05:36:07.380
> 
> 标签：informatica-powercenter, informatica

这可能是一个幼稚的问题，但我坚持这个简单的问题。我必须从源数据库中导入特定的源表。我只能看到几个模式而不是全部（因为有数千个），因此无法选择所需的表，所以我在搜索框中指定了表。但它没有显示任何东西。我尝试使用 schema.tablename 和不同的组合，但徒劳无功。事实上，当我尝试搜索已经可见的表格时，它们并没有出现。我在搜索特定表时哪里出错了？任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T07:32:15.390

在*Import Tables*对话框窗口中，将*Onwer 名称*更改为包含该表的模式的名称。

*选择表树视图显示来自在**Onwer 名称*字段中指定的单个模式的表，默认情况下，此值设置为用于建立连接的用户名。

# wordpress - 如何在 Wordpress 帖子中添加自定义字段？

> ID：12190469
> 
> 赞同：0
> 
> 时间：2012-08-30T05:36:28.233
> 
> 标签：wordpress, wordpress-theming

我看到很多人问如何在 Wordpress 帖子中插入自定义字段？即使插件可用，也没有什么是单击解决方案。我们需要做一些调整以使其工作。今天我最终这样做是为了改善我的主题的外观和可用性，因为它没有内置的options.Since,我努力使它工作我想在这里分享它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T05:36:28.233

以下是主要步骤：

安装[自定义字段模板](http://wordpress.org/extend/plugins/custom-field-template)。导航`Appearance > Editor`到此代码段并将其包含在您的`functions.php`文件中：

```
function getCustomField($theField) {
    global $post;
    $block = get_post_meta($post->ID, $theField);
    if($block){
        foreach(($block) as $blocks) {
            echo $blocks;
        }
    }
} 
```

通过`Settings > Custom Field Template,`展开模板内容部分来配置自定义字段，并添加如下内容：

```
[Day Number]
type = text
size = 10
output = true 
```

注意：除非您添加 output = true，否则自定义字段将不起作用。

转到`Appearance > Editor`并将此代码添加到您希望自定义字段的值出现的模板（例如 single.php）中：

要在 getCustomField 函数周围添加条件语句（使其仅在某些条件下出现，例如帖子属于特定类别），请将其包含在 getCustomField 函数之前：

… 然后插入你的 getCustomField 函数…</p>

然后结束：希望这对你有帮助。

# java - 将 Java 、 C++ 和 PHP 相互连接

> ID：12190479
> 
> 赞同：4
> 
> 时间：2012-08-30T05:37:16.020
> 
> 标签：java, php, c++, java-native-interface

我想用java编写我的web服务....但是如果我可以用c++编写我的主要代码然后通过JNI访问以在java中使用它是否有效？其次，我必须创建一个网站，然后再次使用 c++ 代码来获取数据，但网站将在 php 中..这可能...& 如何？

如果我出错了，还请建议我...？或其他一些方法来做这件事......！

![实现图](../Images/fa172e2b1c8bc51b7ab7e363ec94bfc0.png)

这是实现图...是否可能&是否也有效..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T06:14:37.903

我知道这并不能完全回答您的问题……但是您为什么不用一种语言 C++ 编写所有内容。

您可以像使用 Java 或 PHP 一样轻松地使用 C++ 创建 Web 服务和网站，使用良好的 Web 框架，例如：[CppCMS](http://cppcms.com)

组合 3 种不同的技术，编写大量的包装器会让你的生活变得更加艰难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T06:32:40.180

这可能吗？是的。

这有效率吗？有争议，但我会说不。

我建议您最好的选择是在您的 Web 应用程序中只使用一种语言。C++、Java 和 PHP 这三者都具有出色的 Web 服务功能。如果您必须添加如此多的技术层，那么管理您的应用程序将很快成为一场噩梦。

**编辑**

由于您正在为 Android 应用程序创建 Web 服务，因此我建议您使用 Java 编写它。这是因为您可以利用代码重用，并且如果您想将开发人员添加到您的团队中也很有帮助。

PHP 和 C++ 也是不错的选择。由于设置简单，我个人更喜欢在这种情况下使用 PHP。如果我以前有一些可重用的代码，我只会选择 C++ 而不是 PHP，因此我不需要移植任何业务逻辑。

从那里，您可以使用构建一个 Android 应用程序来与您的 Web 服务通信，以及为您的网站创建前端。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T06:50:00.100

如果您从头开始编写“主要实现”代码，那么为什么要使用 C++ 编写代码？您是否有任何仅在 C++ 中可用的库依赖项？还是您已经在 C++ 中为主要实现完成了很多工作？

否则你为什么要使用三种不同的语言来达到这些目的？你可以用一种语言来完成所有这 3 种语言，可以是 Java、PHP 或 C++ 中的任何一种

您始终可以将您的 C++ 库设为 DLL，甚至将其导出为 PHP 模块。但是，如果您可以使用 PHP 或 JAVA 管理所有工作，为什么还要承担额外的开销。在旁注中，仅使用 C++ 不会给您带来额外的性能优势。您需要更改结构和算法以获得性能优势。

与为所有内容使用单一语言相比，为应用程序的三个不同部分使用 3 种语言将更难管理。我见过很多人因为这种迷恋而搞砸了。以后你可能会面临更少的工作更多的解决方法。

你可以使用 CppCMS 或 Wt 或 pion 如果你想用 C++ 运行 Web 服务甚至网站，但是在做 Web 事情时你必须非常小心内存泄漏，因为一个小的内存泄漏可能会使你的服务器膨胀。并且您在使用 JAVA 或 PHP 时不需要这些开销。

# c# - ReferenceError：未定义 Sys ReferenceError：未定义 WebForm_DoPostBackWithOptions

> ID：12190486
> 
> 赞同：2
> 
> 时间：2012-08-30T05:37:48.960
> 
> 标签：c#, asp.net, windows

我们在我的专用服务器上设置了一个新域，我的旧域运行良好。

我的网站是在 asp.net 中构建的。

在新域上，我有一份在旧域上运行的代码副本。两个站点都在同一台专用服务器上。当我尝试在新站点上执行代码时，我收到以下错误消息：

> ReferenceError：未定义 Sys
> 
> ReferenceEror：未定义 WebForm_DoPostBackWithOptions

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T08:07:24.347

您可以检查一些内容：

1.  在服务器上设置正确的时间[可能准确]
2.  尝试在服务器上安装 ajax [如果尚未安装]
3.  这也可能是由于压缩模块引起的。尝试将 webresource.axd 添加到排除列表以进行压缩
4.  这主要是由客户端损坏的 webresource.axd 引起的。因此，请关闭您的浏览器并删除您的临时 Internet 文件。确保上述文件已从本地硬盘中清除。之后它应该正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-16T22:22:09.573

如果使用 MVC - 在我的情况下是 N2CMS，请确保以下代码在您的路由配置或全局 asax 中......

```
routes.IgnoreRoute("{resource}.axd/{*pathInfo}"); 
```

# c# - 将行值添加到具有 AutoIncreamented DataColumn 的 DataTable

> ID：12190487
> 
> 赞同：4
> 
> 时间：2012-08-30T05:37:51.637
> 
> 标签：c#, asp.net

我想在具有自动增量属性的数据列的 DataTable 中添加一行。

```
DataTable tblproduct = new DataTable();

DataColumn CartItemId = new DataColumn();
CartItemId.ColumnName = "CartItemId";
CartItemId.DataType = System.Type.GetType("System.Int32");
CartItemId.AutoIncrement = true;
CartItemId.AutoIncrementSeed = 1;
CartItemId.AutoIncrementStep = 1;
CartItemId.ReadOnly = true;
CartItemId.Unique = true;

tblproduct.Columns.Add(CartItemId);
tblproduct.Columns.Add("CampaignId", typeof(int));
tblproduct.Columns.Add("SubCatId", typeof(int));
tblproduct.Columns.Add("Size", typeof(string));
tblproduct.Columns.Add("Qty", typeof(int));

tblproduct.Rows.Add(3, 345,"Hello", 1);
tblproduct.Rows.Add(5, 3455,"Hecfghhgdfllo", 8); 
```

我不想在 Autoincreamented 列中插入值。它应该是自动生成的值，但上面的代码对我不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T05:43:00.040

添加行时，请尝试类似

```
 DataRow dr = tblproduct.NewRow();
        dr["CampaignId"] = 3;
        dr["SubCatId"] = 345;
        dr["Size"] = "Hello";
        dr["Qty"] = 1;
        tblproduct.Rows.Add(dr); 
```

也来自[DataColumn.AutoIncrement 属性](http://msdn.microsoft.com/en-us/library/system.data.datacolumn.autoincrement%28v=vs.100%29.aspx)

> 您可以使用 DataRow 类的 ItemArray 属性并传入一个值数组来创建一个新行。**对于 AutoIncrement 设置为 true 的列，这是一个潜在问题，因为它的值是自动生成的。要使用 ItemArray 属性，请将 null 放在该列在数组中的位置。**

将您的代码更改为类似

```
 tblproduct.Rows.Add(null,3, 345, "Hello", 1);
        tblproduct.Rows.Add(null,5, 3455, "Hecfghhgdfllo", 8); 
```

# php - 将 MySql 连接添加到配置文件

> ID：12190492
> 
> 赞同：-1
> 
> 时间：2012-08-30T05:38:03.320
> 
> 标签：php, mysql, configuration-files

我编写了一个连接到 MySql DB 的 php 类，然后执行 INSERT。我已经这样做了，并且有效。现在，我想将代码的连接部分添加到配置文件中，我可以从这里调用它。

我怎么能在 PHP 中做到这一点？

```
<?php

mysql_connect("localhost", "user", "xxxxx") ;
mysql_select_db("mydb");
...
...// Insert to DB (which works)
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T06:09:28.130

我不完全理解，但是或者将此参数放在配置文件中，您执行此配置文件

```
$config['hostname'] = 'yourserver';
$config['user'] = 'youruser';
$config['password'] = 'password'; 
```

然后在你的课堂连接中调用它

```
mysql_connect($config['hostname'],$config['user'],$config['password']); 
```

或者更容易用 conexion 的参数构建一个结构，看起来像这样

```
function __construct($host,$user,$password,$database){
    mysql_connect($host,$user,$password) ;
    mysql_select_db($database);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T06:40:31.793

使用 ph 连接到 mysql 数据库非常简单。你写的代码没问题，虽然最好使用 MySQLi 或 PDO 而不是 MySQL 函数，因为它们可能有一些 sql 注入或其他安全问题。给你的文件起一个像config.php这样的名字，并在你想使用mysql连接的时候添加它。使用 require_once 或包含 php 的函数来使用它。

希望它会有所帮助..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T06:15:19.187

从 PHP 的通知来看，他们至少在 PHP 5.5/6.0 之前不会正式弃用 mysql_* 扩展，因此您有时间在这些函数完全消失或 E_DEPRECATED 错误开始出现之前重写脚本。[http://news.php.net/php.internals/53799](http://news.php.net/php.internals/53799)

所以对新脚本使用 PDO 或 mysqli：

**与 PDO 连接**

```
<?php
try{
    $con = new PDO('mysql:host=127.0.0.1;dbname=test','root','password');
    $con->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $con->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
    $con->setAttribute(PDO::ATTR_DEFAULT_FETCH_MODE,PDO::FETCH_ASSOC);
}catch (Exception $e){
    die('Cannot connect to database. Details:'.$e->getMessage());
}
?> 
```

现在，如果上面的代码在您的配置文件中，那么您可以使用`include('config.php')`，然后 `$con`将包含您的连接对象。

由于`$con`不是全局范围，您需要通过构造将其传递给您的类。

```
<?php 
include('config.php');
class yourclass{

    function __construct(PDO $con){
        $this->db = $con;
    }

    function someMethod($valueA,$valueB){
        $sql = "INSERT
                INTO   TABLE
                       (
                              colA,
                              colB
                       )VALUES(
                              :colA,
                              :colB
                       )";
        $query = $this->db->prepare($sql);

        $query->bindParam(":colA", $valueA);
        $query->bindParam(":colB", $valueB);
        $query->execute();
    }
}
$aClass = new yourclass($con);
$aClass->someMethod('someValueforA','someValueforB');
?> 
```

希望能帮助到你。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-30T06:04:17.763

您可以在类的构造函数中编写连接编码，如下所示：

```
function __construct($host,$user,$password,$dbname){

  mysql_connect($host,$user,$password) ;
  mysql_select_db($dbname);

} 
```

或者您可以创建另一个定义连接的类，然后您可以根据需要扩展该类（继承）

# cakephp-2.0 - Cakephp 2.0 会话不存储查询的查找结果有什么想法吗？

> ID：12190498
> 
> 赞同：0
> 
> 时间：2012-08-30T05:38:45.893
> 
> 标签：cakephp-2.0

我正在使用 cakephp 2.0，出于某种原因，我想将查询结果存储到会话中。这是我的配置文件代码。

```
Configure::write('Session', array(
'defaults' => 'cake',//php)); 
```

我已经在应用程序控制器中包含了 Session 组件，现在我想要的是

```
$tender_data = $this->Tender->find('all', array('conditions' => array('Tender.id' => $tender_ids)));
$this->Session->write('tender_data', $tender_data); 
```

但是当我阅读

```
debug($this->Session->read('tender_data')); 
```

它显示为假，但如果我手动存储数据，如

```
$this->Session->write('result',array('Rajeev'=>array('profile'=>'IT','Job'=>'SE'),'Deepak','Aklesh','Pradeep')); 
```

并很好地阅读它的作品任何想法是我的结果太多而无法存储在会话中还是什么？

邀请解决方案

# antlr - ANTLR 词法分析器根本无法向前看

> ID：12190501
> 
> 赞同：4
> 
> 时间：2012-08-30T05:38:54.133
> 
> 标签：antlr, lex, antlr3, lexer

我有以下语法：

```
rule: 'aaa' | 'a' 'a'; 
```

它可以成功解析字符串'aaa'，但无法解析'aa'并出现以下错误：

```
line 1:2 mismatched character '<EOF>' expecting 'a' 
```

仅供参考，这是词法分析器的问题而不是解析器的问题，因为我什至不调用解析器。主要功能如下所示：

```
@members {
  public static void main(String[] args) throws Exception {
    RecipeLexer lexer = new RecipeLexer(new ANTLRInputStream(System.in));
    for (Token t = lexer.nextToken(); t.getType() != EOF; t = lexer.nextToken())
      System.out.println(t.getType());
  }
} 
```

结果与更明显的版本相同：

```
rule: AAA | A A;
AAA: 'aaa';
A: 'a'; 
```

显然，ANTLR 词法分析器尝试将输入“aa”与失败的规则 AAA 匹配。除了 ANTLR 是一个 LL(*) 解析器或其他什么之外，词法分析器应该与解析器分开工作，它应该能够解决歧义。该语法适用于良好的旧*lex*（或*flex*），但它似乎不适用于 ANTLR。那么这里的问题是什么？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T06:44:54.240

ANTLR 生成的解析器是（或可以是）LL(*)，而不是它的词法分析器。

当词法分析器*看到*输入`"aa"`时，它会尝试匹配 token `AAA`。当它失败时，它会尝试匹配任何其他也匹配`"aa"`的标记（词法分析器不会回溯到匹配`A`！）。由于这是不可能的，因此会产生错误。

这通常不是问题，因为在实践中，通常有某种标识符规则`"aa"`可以回退。那么，您正在尝试解决什么实际问题，或者您只是对内部工作原理感到好奇？如果是第一个，请编辑您的问题并描述您的实际问题。

# jquery - 在当前 UL 中附加数据，ID 为 LI

> ID：12190505
> 
> 赞同：0
> 
> 时间：2012-08-30T05:39:38.630
> 
> 标签：jquery

我在 html 中有以下结构（由于发布问题的格式问题，我没有在 ul 和 li 之前写初始标签）

```
<ul>
    <li id="list0">xyz
        <ul>
            <li id="list1">abc</li>
            <li id="list2">abc</li>
            <li id="list3">abc</li>
        </ul>
    </li>
</ul> 
```

现在假设我只能将 id 作为 list2 传递给函数，并且该函数会执行一些 ajax 操作并给出响应 li id="list4">abc

我想将这个新添加的孩子附加到 ul 中，其中 li 的 ID 为“list2”。我尝试关注但失败的选择器是什么

```
function selectUl(id){
   $("#list"+id+"").parent().append('li id="list4">abc</li');  //inserts new list in parent ul 
   $("#list"+id+"").append('li id="list4">abc</li'); //inserts new list after current ul
   $('li id="list4">abc</li').insertAfter("#list"+id+""); //inserts new list after current ul
} 
```

现在想在当前 ul 中插入新列表现在告诉我这样做，前提是我只能在该 ul 中传递列表的 id。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T05:58:45.853

我有点不确定你想在这里实现什么。

你得到一个 ajax 响应并且 ajax 响应有一个 ID？或者它是否具有您要附加的实际 HTML？

您是否只想在 ID 为“list3”的当前 LI 之后添加一个新的 LI？或者您想添加一个新的“外部”LI 来创建一个新的 UL 列表？

更新：

您不需要使用“insertAfter”，只需将其附加到 UL。像这样：

```
var list = document.getElementById("list0").getElementsByTagName("UL")[0]; // Chooses the first UL contained in the list0 LI
var newLI = document.createElement("LI");
newLI.id = "list4";
newLI.innerHTML = "abc";
list.appendChild(newLI); 
```

因此，只需将参数 ID 放在适合此代码的位置即可。希望有帮助:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T06:05:52.107

```
 $('#list2').after('<li>foo</li>'); 
```

或者在你的场景中：

```
function selectUl(id){
   $("#list"+id+"").after('<li id="list4">abc</li>');
} 
```

[jsFiddle 上的示例](http://jsfiddle.net/WBCUA/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T06:12:55.187

```
$('<li id="list2">def</li>').insertAfter($(document).find("ul #list2")); 
```

# php - PHP 偏移 unix 时间戳

> ID：12190510
> 
> 赞同：3
> 
> 时间：2012-08-30T05:40:18.060
> 
> 标签：php, datetime, timezone, unix-timestamp

我有一个unix时间戳`PHP`：

```
$timestamp = 1346300336; 
```

然后我有一个我想要应用的时区的偏移量。基本上，我想应用偏移量并返回一个新的 unix 时间戳。偏移量遵循这种格式，不幸的是，由于与其他代码的兼容性，无法更改：

```
$offset_example_1 = "-07:00";
$offset_example_2 = "+00:00";
$offset_example_3 = "+07:00"; 
```

我试过了：

```
$new_timestamp = strtotime($timestamp . " " . $offset_example_1); 
```

但不幸的是，这不起作用**:(**。还有其他想法吗？

**编辑**

经过测试，我非常惊讶，但即使这样也行不通：

```
strtotime("1346300336 -7 hours") 
```

返回假。

让我们稍微改变一下，将上面的偏移示例转换为秒的最佳方法是什么？然后我可以简单地做`$timestamp + $timezone_offset_seconds`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T06:08:12.070

您应该将原始时间戳作为第二个参数传递给`strtotime`.

```
$new_timestamp = strtotime("-7 hours", $timestamp); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T05:45:31.837

```
 $dt = new DateTime();
 $dt->setTimezone('GMT'); //Or whatever
 $dt->setTimestamp($timestamp);
 $dt->setTimezone('Pacific');
 //Echo out/do whatever
 $dt->setTimezone('GMT'); 
```

我非常喜欢[DateTime](http://www.php.net/manual/en/class.datetime.php "约会时间")类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T06:13:04.280

您可以使用日期间隔：

```
$t = 1346300336;
$date = DateTime::createFromFormat('Y-m-d', date('Y-m-d', $t));
$interval = DateInterval::createFromDateString('-7 hours'); 
$date->add($interval);

echo $date->getTimestamp();
echo $date->format('Y-m-d H:i:s'); 
```

# jquery - 如何使用 Jquery 并排动态添加 Div？

> ID：12190513
> 
> 赞同：3
> 
> 时间：2012-08-30T05:40:32.930
> 
> 标签：jquery

你能帮我如何使用 Jquery 动态地并排添加 Div。这是我的代码

```
$(document).ready(function() {
    $('#idButton').click(function() {
        for (int i = 0; i <= 3; i++) {
            $('body').append('<div id="divId"+'
            i ' style="height:80px;width:80px;background-image:url('
            flashcard1.png ');">Images</div>');
        }
    });
});​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T05:44:26.253

要并排添加它，我们需要`float`css 属性。

如果你给`float:left`它会并排添加。尝试浮动。

像这样尝试...并按照 xdazz 所述将 int 设置为 var 。

```
$(document).ready(function() {
    $('#idButton').click(function() {
        for (var i = 0; i <= 3; i++) {
            $('body').append('<div id="divId"+'
            i ' style="height:80px;width:80px;float:left;background-image:url(\'
            flashcard1.png \');">Images</div>');
        }
    });
});​ 
```

添加浮动后的另一件事是，您必须清除它才能正确使用下一个标记。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T05:54:57.587

[这](http://jsfiddle.net/qmcs5/)是给你的小提琴。

就像其他人说的那样，您需要使用 css-attribute `float`。

并且在 javaScript 中变量被声明为`var`，而不是`int`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T05:43:38.517

javascript中没有`int`，应该是`var`.

```
for (var i = 0; i <= 3; i++) {
   $('body').append('<div id="divId' + i + '" style="height:80px;width:80px;background-image:url(\'flashcard1.png\');">Images</div>');
} 
```

或者

```
for (var i = 0; i <= 3; i++) {
  $('<div />', {
    id: 'divId' + i,
    style: "height:80px;width:80px;background-image:url('flashcard1.png');"
   }).text('Images').appendTo("body");
}​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T05:46:11.657

添加 div css`float:left`或者`float:right`

# python - 上传字段样式显示为无的文件

> ID：12190515
> 
> 赞同：1
> 
> 时间：2012-08-30T05:40:38.547
> 
> 标签：python, file-upload, selenium

我有一个显示为 None 的文件字段，我想使用 selenium python 绑定将文件上传到其中

我试过这个，但它不工作

```
driver.find_element_by_id("IdOfInputTypeFile").send_keys(os.getcwd()+"/image.png") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T08:01:43.807

```
driver.execute_script("document.getElementById('id_cv_upload').style.display='block';") 
```

试试这个基本上`execute_script`是python运行javascript的命令，因为没有pythonic方法来处理css所以你必须执行一个javascript来做到这一点。

# wcf - WCF Unity 中的 Setter 注入

> ID：12190519
> 
> 赞同：0
> 
> 时间：2012-08-30T05:41:14.190
> 
> 标签：wcf, unity-container

为了在 WCF 服务中使用 Unity，我可以使用 Setter 注入吗？还是我们需要按照以下博客中提到的步骤进行操作。

[http://geekswithblogs.net/13DaysaWeek/archive/2010/12/01/dependency-injection-and-wcf-services.aspx](http://geekswithblogs.net/13DaysaWeek/archive/2010/12/01/dependency-injection-and-wcf-services.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T19:46:47.487

您应该使用您提供的链接中提到的步骤（IMO 这是最好的使用方式）**和**setter 注入。以此处描述的方式（ServiceBehavior、ServiceHost 和 ServiceHostFactory）设置系统后，您可以在服务中使用 setter 注入：

```
public class MyService : IMyService {

   private MyOtherObject myDependency;

   // here MyOtherObject will be injected
   [Dependency()]
   public MyOtherObject {
     set { myDependency = value; }
   }

   void MyServiceMethod(string stuff) {  
       // TODO
   }

} 
```

# grails - 无法连接到下载插件发出命令 create-controller

> ID：12190521
> 
> 赞同：0
> 
> 时间：2012-08-30T05:41:23.507
> 
> 标签：grails

我是 grails 新手，我只是下载 grails 2.1.0 并安装了一个名为 helloWorld 的示例项目，当我尝试创建控制器 hello 发出命令 `create-controller hello`时，出现以下错误，似乎是连接问题。我的电脑需要通过我公司的代理服务器访问互联网。

> grails> 创建控制器你好
> | 解决插件 JAR 依赖
> 项|错误无法安装插件 [cache-1.0.0]。插件缺少 JAR 依赖项。
> | 解决插件 JAR 依赖项。
> | Error Error running script create-controller hello:
> org.codehaus.groovy.grails.cli.ScriptExitException （使用--stacktrace查看完整跟踪）

实际上我按照以下命令配置代理，但也不起作用。我想知道是否有手动下载和安装插件的方法。

> grails add-proxy 客户端 --host=50.2.221.9 --port=80
> grails set-proxy 客户端

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T05:54:43.063

可以从文件安装。只需查看官方文档： http: [//grails.org/doc/2.1.0/ref/Command%20Line/install-plugin.html](http://grails.org/doc/2.1.0/ref/Command%20Line/install-plugin.html)

例子：`grails install-plugin ../grails-bar-1.0.zip`

插件可以从[http://grails.org/plugins/](http://grails.org/plugins/)下载 您可能还需要在 BuildConfig.groovy 中使用外部存储库注释行

不过，我无法帮助您进行代理配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T11:44:16.890

插件可以轻松下载，但真正的问题是依赖关系。Grails 2.x 配置为使用 ivy 和可选的 maven，您需要配置这些工具。您可以在

[常春藤代理设置](https://stackoverflow.com/questions/2921364/proxy-settings-with-ivy)

# c# - FtpWebRequest 试图将文件夹中的所有文件名插入到 sql 表中？

> ID：12190522
> 
> 赞同：1
> 
> 时间：2012-08-30T05:41:48.780
> 
> 标签：c#, .net, sql, visual-studio-2010, ftpwebrequest

使用以下程序，我试图将 ftp 服务器上文件夹中列出的所有文件名插入到 SQL 表中。

写入表格时出现错误

> c# 无法访问已处置的对象。对象名称“system.net.sockets.networkstream”

**reader.ReadToEnd()**将整个流写入我想要的文件名。

```
namespace Examples.System.Net
{
    public class WebRequestGetExample
    {
        public static void Main()
        {

            FtpWebRequest request = (FtpWebRequest)WebRequest.Create("ftp://myftpaddress.com/0708/");
            request.Method = WebRequestMethods.Ftp.ListDirectory;

            request.Credentials = new NetworkCredential("vish10", "MyPasswd");

            FtpWebResponse response = (FtpWebResponse)request.GetResponse();

            Stream responseStream = response.GetResponseStream();
            StreamReader reader = new StreamReader(responseStream);
            Console.WriteLine(reader.ReadToEnd());

            SqlConnection sqlConnection1 = new SqlConnection("Integrated Security=SSPI;Persist Security Info=False;Initial Catalog=DMSTG;Data Source=.");
            SqlCommand cmd = new SqlCommand();

            cmd.CommandText = @"Insert into FTPfileList0708Folder
                                           values('" + reader.ReadToEnd().ToString() + "')";
            cmd.Connection = sqlConnection1;

            sqlConnection1.Open();

            cmd.ExecuteNonQuery();
            sqlConnection1.Close();

            Console.WriteLine("Directory List Complete, status {0}", response.StatusDescription);

            reader.Close();
            response.Close();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T06:00:33.903

您已经在这里阅读了完整的回复：

```
FtpWebResponse response = (FtpWebResponse)request.GetResponse();

Stream responseStream = response.GetResponseStream();
StreamReader reader = new StreamReader(responseStream);
Console.WriteLine(reader.ReadToEnd()); 
```

一旦你读过它，你就不能再读它了。

只需更改为

```
string text = reader.ReadToEnd(); 
```

...然后添加适当`using`的语句以正确处理资源：

```
string text;
using (FtpWebResponse response = (FtpWebResponse)request.GetResponse())
{
    using (Stream responseStream = response.GetResponseStream())
    {
        // No need to dispose of the StreamReader as we're already
        // disposing of the stream. It wouldn't do any harm though.
        // Is the text definitely encoded in UTF-8 though?
        text = new StreamReader(responseStream).ReadToEnd();
    }
} 
```

`using`对于所有与 SQL 相关的资源，您应该有类似的语句。这解决了眼前的问题——但目前尚不清楚这与读取文件名的特定业务有什么关系。这将取决于文件名在文本中的格式。据我记得，当涉及到这类事情时，FTP 实际上是非常不明确的。

我建议进行两项重大更改：

*   将您的代码拆分为逻辑方法：
    *   处理 FTP 请求本身
    *   将数据解析为合适的格式
    *   将数据插入数据库
*   尝试找到一个更高级别的 FTP 库，它会知道如何为您进行解析

# algorithm - 创建我的个人学校时间表的算法

> ID：12190523
> 
> 赞同：2
> 
> 时间：2012-08-30T05:41:59.010
> 
> 标签：algorithm

每个人都熟悉计算机科学中的进度问题。
我不是要求解决这个问题的算法。

我只是想为学校的一个学期创建我的个人日程表

你可以假设：

*   我大学的某个人已经创建了课程，分配了教师，房间等。因此，课程已经存在，可以选择。
    *   我只有一小部分课程可供我使用。说25节课。
    *   我每学期必须上 5 节课（可能或多或少，但让我们保持简单）

    我想要的只是一些关于如何创建有效时间表的提示/线索，更重要的是，最佳时间表。
    想一想，什么是最佳时间表？
    就我个人而言，这些课程来自 2 个不同的学院，但我已经能够创建一个包含如下信息的 csv 文件：

    ```
    米               
    16:35:00 17:25:00 菲尔 375 存在主义。
    14:35:00 15:55:00 COMP 350 数值计算。
    14:35:00 15:55:00 COMP 208 工程计算机。
    14:35:00 15:25:00 PHIL 306 心灵哲学。
    14:35:00 15:25:00 PHIL 200 哲学导论
    ..ETC

    ```

    如您所见，所有内容均按开始时间（倒置）排序，但存在冲突。一周中的所有其他日子都一样。
    如何创建有效/最佳时间表？我应该考虑什么？

    更多信息：

    这是我最初认为我应该考虑的事情：

    *   对我来说，一个优先事项是尽可能晚上课。所以我会选择周一、周三和周五的 3 个最新可能的课程，以及周二、周四的 2 个课程。[请参阅评论，了解我认为我可以如何实现这一点]
    *   另一种解决方案是在课程之间（或相反）获得最少的“休息”
    *   另一个可能是最早的课程
    *   另一个优先事项是在同一天为 1 位教员安排所有课程，然后为 A 教员安排 1 节课，然后为 B 教员安排 1 节课，以此类推。
    遗漏了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T06:11:20.930

对于这个规模 - 我不会太努力地避免简单的编程**蛮力**解决方案。

从 25 门课程中选择 5 门课程有`25!/(20!*5!)=53130`不同的可能性。只需检查所有课程，并获得最好的 - 保证最佳解决方案。对于任何现代机器来说，这种规模的运行时间也不是问题。

[回溯](http://en.wikipedia.org/wiki/Backtracking)解决方案很简单——“猜测”要添加的课程，递归调用直到你有一个完整的列表，评估解决方案。当您从递归中返回时 - 检查选择课程的不同可能性。

伪代码：

```
best = 0
bestSol = nil
findCalendar(courses,candidate,i):
  if (take.size() == 5):
      t = evaluate(candidate)
      if (t > best):
          best = t
          bestSol = copy(candidate)
      return
  else if (i == courses.size()):
      //another stop clause, for non-feasible solutions (less then 5 were selected)
      return 
  for each j in range(i,courses.size()):
      candidate.add(courses[j]) //add this course to the candidate
      fidnCalendar(courses,candidate,j+1) //recurse to find the next courses for this candidate
      candidate.removeLast() //cklean up environment before next candidates 
```

调用 with `findCalendar(myCourses,[],0)`，当算法完成时 -`bestSol`将保存最好的日历，它的值将是`best`

# c# - 以字符串形式获取响应 c#.net

> ID：12190524
> 
> 赞同：0
> 
> 时间：2012-08-30T05:41:58.843
> 
> 标签：c#, .net, httpwebrequest, rest-client

我在页面加载事件中使用 c#.net 创建了网站

```
protected void Page_Load(object sender, EventArgs e)
    {

        string s = "completed.";
        byte[] bytes = System.Text.Encoding.UTF8.GetBytes(s);

        Response.OutputStream.Write(bytes, 0, bytes.Length);
    } 
```

当我通过浏览器运行时，我得到了正确的响应

```
Completed. 
```

现在我的问题是，当我通过 rest 客户端运行相同的 url 时，我得到的响应 nody[raw] 为

```
completed.

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><title>

</title></head>

<body>
    <form method="post" action="Default.aspx" id="form1">

<div class="aspNetHidden">
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwULLTE2MTY2ODcyMjlkZJy1PJCY5kS9nkQAfBTgrw0zeG/yMEs2VJP+7kbHC2Yp" />
</div>    <div> </div>    </form></body></html> 
```

但我只需要完成。作为回应

这怎么可能 ？

等待您的宝贵意见和建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T05:48:15.110

尝试使用：

```
Response.Clear();
Response.OutputStream.Write(bytes, 0, bytes.Length); 
Response.End(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T05:48:09.693

尝试清除响应。

```
protected void Page_Load(object sender, EventArgs e)
    {

        string s = "completed.";
        byte[] bytes = System.Text.Encoding.UTF8.GetBytes(s);

        Response.Clear();
        Response.OutputStream.Write(bytes, 0, bytes.Length);
    } 
```

如果这无济于事，请使用 OnRender 方法。在 Page_Load 之后的页面生命周期中有一些方法，我认为 OutputStream 也在那里进行了修改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T05:48:18.267

输出到 page_load 中的响应流将导致您输出的任何内容作为响应中的第一件事。

这就是为什么您在其余版本的响应中看到“已完成”。

我几乎可以保证您在浏览器版本中也得到了这个，但是浏览器正试图保护您免受它的影响，您是否尝试过在 html 上查看源代码？

我有一种感觉，清除响应可能无济于事，因为当页面点击其 on_prerender 事件时，它将呈现所有表单控件/母版页等，并将该垃圾添加到页面中。

您是否考虑过使用 mvc/webapi 它会是一个更轻量级的版本来实现您所看到的。

# android - 玻璃像android中的背景颜色

> ID：12190527
> 
> 赞同：-1
> 
> 时间：2012-08-30T05:42:24.970
> 
> 标签：android, android-layout, background, aero-glass

我正在创建一个应用程序，我正在创建一个像这个图像这样的布局，

![玻璃般的外观](../Images/895250681d609df413b48e13e2ebdc8b.png)

但我希望图像的上部应该是其他颜色，但颜色应该是透明的，这样背景就应该从那种颜色可见。我为此使用样式 xml，

```
<?xml version="1.0" encoding="UTF-8"?> 
<shape xmlns:android="http://schemas.android.com/apk/res/android" 
     android:shape="rectangle"> 
     <stroke android:width="2dp" android:color="#FFFFFFFF" />
     <gradient android:startColor="#DD000000" android:endColor="#DD2ECCFA" 
            android:angle="225"/> 

    <corners android:bottomRightRadius="7dp" android:bottomLeftRadius="7dp" 
     android:topLeftRadius="7dp" android:topRightRadius="7dp"/> 
</shape> 
```

但它正在创建一个不透明的颜色布局，并且从这种颜色看不到背景。建议一些使颜色透明的技巧，这样我就可以获得一个玻璃般的布局。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T05:47:16.010

使用此代码，

```
<?xml version="1.0" encoding="UTF-8"?> 
<shape xmlns:android="http://schemas.android.com/apk/res/android" 
 android:shape="rectangle"> 
 <stroke android:width="2dp" android:color="#FFFFFFFF" />
 <gradient android:startColor="#DD000000" android:endColor="#DD2ECCFA" 
        android:angle="225"/> 

 <solid android:color="#AA181818" />

<corners android:bottomRightRadius="7dp" android:bottomLeftRadius="7dp" 
 android:topLeftRadius="7dp" android:topRightRadius="7dp"/> 
</shape> 
```

添加一行代码，

```
<solid android:color="#AA181818" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T12:44:49.600

问题解决了，thanx rajeshwaran，我用过..

```
<?xml version="1.0" encoding="UTF-8"?> 
<shape xmlns:android="http://schemas.android.com/apk/res/android" 
     android:shape="rectangle"> 
     <stroke android:width="1dp" android:color="#FFFFFFFF" />

<solid android:color="#150000A0" />
    <corners android:bottomRightRadius="7dp" android:bottomLeftRadius="7dp" 
     android:topLeftRadius="7dp" android:topRightRadius="7dp"/> 
</shape> 
```

我刚刚在实体标签中给出了值而不是 AA..

```
<solid android:color="#150000A0" /> 
```

感谢帮助..帮助我理解颜色的概念..

```
 <solid android:color="#AARRGGBB" /> 
```

# php - 特定页面上的调用标题

> ID：12190538
> 
> 赞同：0
> 
> 时间：2012-08-30T05:43:32.337
> 
> 标签：php, pdf, pdf-generation, mpdf

我正在使用`mpdf`动态 PDF 生成。我陷入了一种情况，应该在某些特定页面上调用页眉，例如如果我有 10 页，那么应该在第 5、6、7 和 9 页上调用它。

如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T05:54:15.153

我不确定，但请参阅下面的 URL，我认为这对您很有帮助

[在 PHP 中使用 DOMPDF 在 PDF 页面中的标题](https://stackoverflow.com/questions/7484318/header-in-pdf-page-using-dompdf-in-php)

或者试试这个

// 你的 dompdf 设置

```
$dompdf = new DOMPDF();

// add the header
$canvas = $dompdf->get_canvas();
$font = Font_Metrics::get_font("helvetica", "bold");

// the same call as in my previous example
$canvas->page_text(72, 18, "Header: {PAGE_NUM} of {PAGE_COUNT}",
                   $font, 6, array(0,0,0));

$dompdf->load_html($html); 
```

# matlab - 在matlab中为多个读取的xml文件创建DOM对象数组

> ID：12190539
> 
> 赞同：1
> 
> 时间：2012-08-30T05:43:31.980
> 
> 标签：matlab

我有很多 XML 文件，并像这样获取它们的文件名：

```
[FileName,PathName] = uigetfile('*.xml','MultiSelect','on'); 
```

我想使用以下代码读取这些文件：

```
for i=1:length(fullfile(FileName)) 
    xtree(i) = xmlread(char(fullfile(FileName(i)))); 
```

但我有一个错误。它适用于单个 XML 文件：

```
xtree = xmlread(char(fullfile(FileName))); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T06:37:53.870

您没有正确使用元胞数组。你知道它们是什么吗？输入`help cell`Matlab 以了解更多信息。

基本上，这里发生的是`uigetfile`输出一个名为`FileName`. 您可以通过大括号索引 ( `{}`) 访问每个文件名。

同样，每个节点都是一个特殊的对象，普通的 Marlab 数组无法正确捕获。你最好也定义`xtree`为一个单元格数组，并`xmlread`用大括号再次分配输出。

另外：在运行时读取用户输入的文件时，最好全面**检查**错误。

总结：

```
[FileName,PathName] = uigetfile('*.m','MultiSelect','on');

if isequal(FileName,0) || isequal(PathName,0)
    error('Cancel pressed.');

else
    xtree = cell(size(FileName));
    for i=1:numel(FileName)
        try
            xtree{i} = xmlread(fullfile([PathName FileName{i}]));

        catch ME
            %# handle error
        end
    end

end 
```

# redirect - instagram api https 重定向 uri

> ID：12190543
> 
> 赞同：2
> 
> 时间：2012-08-30T05:44:03.353
> 
> 标签：redirect, oauth-2.0, instagram

我已经开始使用 Instagram 的 API。作为这种用法的一部分，我允许用户使用他们的 Instagram 帐户进行身份验证。

我的问题是重定向 uri。在 Instagram 的仪表板中，我必须为其指定一个值。但是，在我的应用程序中，我可能需要处理两种情况。其中一个是安全的（https），另一个是不安全的（http）。我不能假设用户总是在一个安全的支持环境中上网。

我的问题是，如何为重定向 URI 启用多个值，或者如何同时处理 https 和 http？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T15:29:33.277

[Instagram 要求您始终通过 https。](http://instagram.com/developer/authentication/)

> 要记住的一件事是对 API 的所有请求都必须通过 SSL（https:// 而不是 http://）

# " + message.getSubject() + "

This is a test of sending an HTML e-mail" + " through Java.

"; // HTMLDataSource is an inner class message.setDataHandler(new DataHandler(new HTMLDataSource(html))); transport.connect(); transport.sendMessage(message, message.getRecipients(Message.RecipientType.TO)); transport.close(); } catch(Exception e) { e.printStackTrace(); } } static class HTMLDataSource implements DataSource { private String html; public HTMLDataSource(String htmlString) { html = htmlString; } // Return html string in an InputStream. // A new stream must be returned each time. public InputStream getInputStream() throws IOException { if (html == null) throw new IOException("Null HTML"); return new ByteArrayInputStream(html.getBytes()); } public OutputStream getOutputStream() throws IOException { throw new IOException("This DataHandler cannot write HTML"); } public String getContentType() { return "text/html"; } public String getName() { return "JAF text/html dataSource to send e-mail only"; } } } 我已经将表数据存储在单独的类中的 ArrayList 中。下面是它的片段。 List objList = new ArrayList(); try { conn=dao.DBConnection(); sql1.append(" select MENU_ID, MENU_CODE, MENU_NAME, DESCRIPTON, ACTION_URL, CATEGORY, SORT_ORDER from m_menus order by MENU_ID "); iPreparedStatement1=conn.prepareStatement(sql1.toString()); iResultSet1=iPreparedStatement1.executeQuery(); while(iResultSet1.next()) { afUserAdminMenuMaster objafuseradminmenumaster = new afUserAdminMenuMaster(); Integer i=0; objafuseradminmenumaster.setMenuId(iResultSet1.getString(++i)); objafuseradminmenumaster.setMenuCode(iResultSet1.getString(++i)); objafuseradminmenumaster.setMenuName(iResultSet1.getString(++i)); objafuseradminmenumaster.setMenuDesc(iResultSet1.getString(++i)); objafuseradminmenumaster.setAction_URL(iResultSet1.getString(++i)); objafuseradminmenumaster.setCategory(iResultSet1.getString(++i)); objafuseradminmenumaster.setSortOrder(iResultSet1.getString(++i)); objList.add(objafuseradminmenumaster); } 我想将该 sql 表嵌入到邮件正文中，这将取决于条件是动态的。请指导我应该如何进行。 目前尚不清楚您卡在哪一部分 - 根据您的数据创建一个 html 表，创建一个包含 html 表数据的字符串，或使用 JavaMail 发送该字符串。对于后者，您的代码不必要地复杂。您可以摆脱 HtmldataSource 并使用 message.setText(html, "utf-8", "html")。 javasmtpjakarta-mailhtml-email 4 1 回答 1 This answer is useful 0 目前尚不清楚您卡在哪一部分 - 根据您的数据创建一个 html 表，创建一个包含 html 表数据的字符串，或使用 JavaMail 发送该字符串。对于后者，您的代码不必要地复杂。您可以摆脱 HtmldataSource 并使用 message.setText(html, "utf-8", "html")。 于 2012-08-30T06:50:27.247 回答 Related 1 google-apps-script - 在脚本库中发布脚本需要多长时间 2 java - ServletContext 和 ServletActionContext 有什么区别 1 vb.net - VB.Net 通过保留数据而不是每次从数据库中获取数据来优化执行 2 bash - 如何替换与正则表达式模式匹配的另一个字符串中的文本 1 java - 退出while循环时按ctrl+C执行代码 1 caching - Spring Data Repository 缓存结果 2 android - 如何在可滚动列表视图中获得复选框的正确位置？ 2 cron - 每天运行 Cron 作业以列出文件 2 ruby-on-rails - 列出您的 rails 应用程序中生成的不同脚手架 0 database - ORMLite OpenDbConnection 给出 AccessViolationException Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641 <link href="../Styles/Style.css" type="text/css" rel="stylesheet">

# java - 如何在电子邮件中将表格或视图作为嵌入式 HTML 发送 我试图通过java代码发送html表 public static void main(String args[]){ try{ Properties props = new Properties(); props.setProperty("mail.transport.protocol", "smtp"); 问问题 问问题 2012-08-30T05:44:06.537 6778 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我试图通过java代码发送html表 public static void main(String args[]){ try{ Properties props = new Properties(); props.setProperty("mail.transport.protocol", "smtp"); props.setProperty("mail.host", "smtp.gmail.com"); Session mailSession = Session.getDefaultInstance(props, null); mailSession.setDebug(true); Transport transport = mailSession.getTransport(); MimeMessage message = new MimeMessage(mailSession); message.setSubject("HTML mail with images"); message.setFrom(new InternetAddress("abc@gmail.com")); message.addRecipient(Message.RecipientType.TO, new InternetAddress("abc@gmail.com")); String html = "<title>" + message.getSubject() + "</title>

# " + message.getSubject() + "

This is a test of sending an HTML e-mail" + " through Java.

"; // HTMLDataSource is an inner class message.setDataHandler(new DataHandler(new HTMLDataSource(html))); transport.connect(); transport.sendMessage(message, message.getRecipients(Message.RecipientType.TO)); transport.close(); } catch(Exception e) { e.printStackTrace(); } } static class HTMLDataSource implements DataSource { private String html; public HTMLDataSource(String htmlString) { html = htmlString; } // Return html string in an InputStream. // A new stream must be returned each time. public InputStream getInputStream() throws IOException { if (html == null) throw new IOException("Null HTML"); return new ByteArrayInputStream(html.getBytes()); } public OutputStream getOutputStream() throws IOException { throw new IOException("This DataHandler cannot write HTML"); } public String getContentType() { return "text/html"; } public String getName() { return "JAF text/html dataSource to send e-mail only"; } } } 我已经将表数据存储在单独的类中的 ArrayList 中。下面是它的片段。 List objList = new ArrayList(); try { conn=dao.DBConnection(); sql1.append(" select MENU_ID, MENU_CODE, MENU_NAME, DESCRIPTON, ACTION_URL, CATEGORY, SORT_ORDER from m_menus order by MENU_ID "); iPreparedStatement1=conn.prepareStatement(sql1.toString()); iResultSet1=iPreparedStatement1.executeQuery(); while(iResultSet1.next()) { afUserAdminMenuMaster objafuseradminmenumaster = new afUserAdminMenuMaster(); Integer i=0; objafuseradminmenumaster.setMenuId(iResultSet1.getString(++i)); objafuseradminmenumaster.setMenuCode(iResultSet1.getString(++i)); objafuseradminmenumaster.setMenuName(iResultSet1.getString(++i)); objafuseradminmenumaster.setMenuDesc(iResultSet1.getString(++i)); objafuseradminmenumaster.setAction_URL(iResultSet1.getString(++i)); objafuseradminmenumaster.setCategory(iResultSet1.getString(++i)); objafuseradminmenumaster.setSortOrder(iResultSet1.getString(++i)); objList.add(objafuseradminmenumaster); } 我想将该 sql 表嵌入到邮件正文中，这将取决于条件是动态的。请指导我应该如何进行。 目前尚不清楚您卡在哪一部分 - 根据您的数据创建一个 html 表，创建一个包含 html 表数据的字符串，或使用 JavaMail 发送该字符串。对于后者，您的代码不必要地复杂。您可以摆脱 HtmldataSource 并使用 message.setText(html, "utf-8", "html")。 javasmtpjakarta-mailhtml-email 4 1 回答 1 This answer is useful 0 目前尚不清楚您卡在哪一部分 - 根据您的数据创建一个 html 表，创建一个包含 html 表数据的字符串，或使用 JavaMail 发送该字符串。对于后者，您的代码不必要地复杂。您可以摆脱 HtmldataSource 并使用 message.setText(html, "utf-8", "html")。 于 2012-08-30T06:50:27.247 回答 Related 1 google-apps-script - 在脚本库中发布脚本需要多长时间 2 java - ServletContext 和 ServletActionContext 有什么区别 1 vb.net - VB.Net 通过保留数据而不是每次从数据库中获取数据来优化执行 2 bash - 如何替换与正则表达式模式匹配的另一个字符串中的文本 1 java - 退出while循环时按ctrl+C执行代码 1 caching - Spring Data Repository 缓存结果 2 android - 如何在可滚动列表视图中获得复选框的正确位置？ 2 cron - 每天运行 Cron 作业以列出文件 2 ruby-on-rails - 列出您的 rails 应用程序中生成的不同脚手架 0 database - ORMLite OpenDbConnection 给出 AccessViolationException Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：12190544
> 
> 赞同：0
> 
> 时间：
> 
> 标签：java, smtp, jakarta-mail, html-email

我试图通过java代码发送html表

```
 public static void main(String args[]){
            try{
            Properties props = new Properties();
            props.setProperty("mail.transport.protocol", "smtp");
            props.setProperty("mail.host", "smtp.gmail.com");

            Session mailSession = Session.getDefaultInstance(props, null);
            mailSession.setDebug(true);
            Transport transport = mailSession.getTransport();

            MimeMessage message = new MimeMessage(mailSession);
            message.setSubject("HTML  mail with images");
            message.setFrom(new InternetAddress("abc@gmail.com"));
            message.addRecipient(Message.RecipientType.TO,
                 new InternetAddress("abc@gmail.com"));

            String html = "<html><head><title>" +
            message.getSubject() +
            "</title></head><body><h1>" +
            message.getSubject() +
            "</h1><p>This is a test of sending an HTML e-mail" +
            " through Java.</p>";

// HTMLDataSource is an inner class
            message.setDataHandler(new DataHandler(new HTMLDataSource(html)));

            transport.connect();
            transport.sendMessage(message,
                message.getRecipients(Message.RecipientType.TO));
            transport.close();
            }
            catch(Exception e)
            {
                e.printStackTrace();
            }
            }
        static class HTMLDataSource implements DataSource {
            private String html;

            public HTMLDataSource(String htmlString) {
                html = htmlString;
            }

            // Return html string in an InputStream.
            // A new stream must be returned each time.
            public InputStream getInputStream() throws IOException {
                if (html == null) throw new IOException("Null HTML");
                return new ByteArrayInputStream(html.getBytes());
            }

            public OutputStream getOutputStream() throws IOException {
                throw new IOException("This DataHandler cannot write HTML");
            }

            public String getContentType() {
                return "text/html";
            }

            public String getName() {
                return "JAF text/html dataSource to send e-mail only";
            }
        }
    } 
```

我已经将表数据存储在单独的类中的 ArrayList 中。下面是它的片段。

```
List objList = new ArrayList();
    try
    {
        conn=dao.DBConnection();

        sql1.append(" select MENU_ID, MENU_CODE, MENU_NAME, DESCRIPTON, ACTION_URL, CATEGORY, SORT_ORDER from m_menus order by MENU_ID ");

        iPreparedStatement1=conn.prepareStatement(sql1.toString());
        iResultSet1=iPreparedStatement1.executeQuery();

        while(iResultSet1.next())
        {
            afUserAdminMenuMaster objafuseradminmenumaster = new afUserAdminMenuMaster();
            Integer i=0;

            objafuseradminmenumaster.setMenuId(iResultSet1.getString(++i));
            objafuseradminmenumaster.setMenuCode(iResultSet1.getString(++i));
            objafuseradminmenumaster.setMenuName(iResultSet1.getString(++i));
            objafuseradminmenumaster.setMenuDesc(iResultSet1.getString(++i));
            objafuseradminmenumaster.setAction_URL(iResultSet1.getString(++i));
            objafuseradminmenumaster.setCategory(iResultSet1.getString(++i));
            objafuseradminmenumaster.setSortOrder(iResultSet1.getString(++i));

            objList.add(objafuseradminmenumaster);
        } 
```

我想将该 sql 表嵌入到邮件正文中，这将取决于条件是动态的。请指导我应该如何进行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T06:50:27.247

目前尚不清楚您卡在哪一部分 - 根据您的数据创建一个 html 表，创建一个包含 html 表数据的字符串，或使用 JavaMail 发送该字符串。对于后者，您的代码不必要地复杂。您可以摆脱 HtmldataSource 并使用 message.setText(html, "utf-8", "html")。

# ruby-on-rails - 使用回形针时如何知道图像的 url？

> ID：12190547
> 
> 赞同：0
> 
> 时间：2012-08-30T05:44:11.610
> 
> 标签：ruby-on-rails, ruby-on-rails-3, image, paperclip

我尝试了 PaperClipExample，它工作正常。我使用 s3 来存储图像。我想知道图像是如何显示的。确切地说，我有

```
pic_file_name
pic_content_type
pic_file_size
pic_updated_at 
```

在用户模型中。我没有图片的网址，那我怎么能使用

`<%= image_tag @user.pic.url %>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T07:10:16.673

以下链接可能会对您有所帮助。 [使用回形针 gem 上传图像。](https://gkunwar1.wordpress.com/2012/06/25/how-to-upload-file-using-paperclip-in-rails/)

在控制器的显示操作中添加：`@user = User.find(params[:id])` 如果您的模型是用户。一般语法是：`@user = Model.find(params[:id])`

# user-interface - 主窗口内的 FLTK 弹出窗口

> ID：12190550
> 
> 赞同：0
> 
> 时间：2012-08-30T05:44:29.060
> 
> 标签：user-interface, fltk

想知道怎么才能在主窗口内弹出一个窗口，即子窗口只能在主窗口内自由移动。我想要类似 Photoshop 界面的东西：您可以在主窗口中打开多个图像。最小化时，它们的标题栏在主窗口边框的底部对齐。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T15:17:41.160

您可以查看 FLTK Dock 项目 - [http://fltkdock.sourceforge.net](http://fltkdock.sourceforge.net)。这是唯一一个（据我所知）提供与您所要求的类似的东西。FLTK Dock 是一个死掉的项目，自 2006 年以来就没有什么新东西了，这很可惜——我非常喜欢它。不过移植到 FLTK 3.0 应该不难。

# tcl - 如何使用 tcl 代码检查 PC 上的活动 com 端口

> ID：12190551
> 
> 赞同：0
> 
> 时间：2012-08-30T05:44:30.777
> 
> 标签：tcl

任何人都可以给我一个正确的代码来检查我的 PC 上可用的 com 端口。我是 TCL 的新手。我想检查我的 PC 的哪些 com 端口可以访问并且可以用于串行通信。请尽快帮助我。我会很感激的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T12:10:01.257

请记住，串行通信非常古老，它假设了几件事：

*   连接的设备和主机控制器都同意链路参数（波特率（速度）、数据位数和奇偶校验位）。请注意，任何一方都无法以某种方式自动知道对方配置使用哪些参数。
*   除了尝试与之通信之外，没有真正的方法可以知道该设备是否存在。Windows 在连接到 COM 端口的设备列表中向您显示的内容实际上是*您*为这些端口配置的内容。还有其他类型的设备显示为串行设备（例如蓝牙加密狗和 USB 调制解调器），但它们并不是*真正*的串行设备，它们的 COM 端口访问由系统模拟。

正如您所看到的，如果您谈论的是真正的 COM 附加设备，那么您的问题似乎没有多大意义，因为这些设备不支持枚举（与 USB 相反）。

无论如何，我可以想象以下方式来尝试做你想做的事：

1.  想出一些你想扫描的端口。*AFAIK，除了使用 WMI 之类的东西来查询系统以获取连接到 COM 端口的已配置*设备列表之外，没有办法知道哪些 COM 端口真正可用。
2.  `set f [open {\\.\comN} r+]`尝试使用通常的习语将它们一一打开。确保`catch`此处出现任何可能的错误，因为[其他设备似乎能够独占打开 COM 端口](https://stackoverflow.com/a/758215/720999)。
3.  查询设备线路状态：

    ```
    % chan config $f -ttystatus
    CTS 0 DSR 0 RING 0 DCD 0 
    ```

    并寻找 DSR 信号，该信号指示连接到端口的任何东西（如果有）已准备好进行通信。

4.  与设备通信或关闭通道并继续下一个端口。

看到[这个](http://www.tcl.tk/man/tcl8.5/TclCmd/open.htm#M22)和[这个](http://wiki.tcl.tk/447)（维基有更多关于串行通信的信息——搜索它）。

PS您的问题听起来像是一种常见的“给我代码”综合症；请阅读[此](http://whathaveyoutried.com)内容并尝试更正此问题。

# linux - 操作系统的全系统快照

> ID：12190556
> 
> 赞同：3
> 
> 时间：2012-08-30T05:45:02.743
> 
> 标签：linux, snapshot

我需要 Linux 上的全系统快照（系统状态和磁盘）。

我知道有几种方法可以获取磁盘快照，例如 lvm2、zfs 或 Btrfs。但是，我无法在任何地方寻找任何全系统快照（cpu、内存和磁盘状态）。有没有办法做到这一点？我的意思是虚拟机上的系统快照功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T06:09:31.067

没有办法从系统内部获取整个系统的快照——这样做会提出一些相当困难的问题——但是您可以使用[cgroup freezer 系统](https://www.kernel.org/doc/Documentation/cgroup-v1/freezer-subsystem.txt)对 Linux 系统中的进程子集进行快照。或者，您可以使用[vzdump 拍摄](http://wiki.openvz.org/Backup_of_a_running_container_with_vzdump)整个 OpenVZ 来宾（在 VZ 内核下）的快照。

请注意，这些都不包含文件系统的快照。您必须使用您提到的一种方法单独执行此操作。

# jquery - $.browser.safari 和 $.browser.webkit 在 chrome 中显示未定义

> ID：12190559
> 
> 赞同：2
> 
> 时间：2012-08-30T05:45:07.767
> 
> 标签：jquery, google-chrome

它是一个`jQuery 1.8.0`错误还是一个`Chrome's`错误`$.browser.safari`并`$.browser.webkit`抛出`undefined`

[**请参阅示例小提琴**- JQUERY 1.8.0](http://jsfiddle.net/akhurshid/Pd3gf/)

[**请参阅示例小提琴**- JQUERY 1.7.2](http://jsfiddle.net/akhurshid/Pd3gf/)

**注意：我正在使用 Chrome`21.0.1180.83 m`**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T05:48:32.633

[从文档](http://api.jquery.com/jQuery.browser/)中，`$.browser.safari`不推荐使用。此外，甚至不建议使用*整个* `$.browser`对象：

> **描述：**包含用户代理的标志，从 navigator.userAgent 读取。我们建议不要使用此属性；请尝试改用特征检测（参见 jQuery.support）。jQuery.browser 可能会在 jQuery 的未来版本中移动到插件中。

无论如何，`$.browser.chrome`是为 Chrome 定义的（至少对我来说）。

**演示：http: [//jsfiddle.net/Pd3gf/1/](http://jsfiddle.net/Pd3gf/1/)**

为什么首先需要检测浏览器？只需用于[`$.support`](http://api.jquery.com/jQuery.support/)查看浏览器是否支持特定功能。

# asp.net-mvc-3 - 如何在 mvc3 中保存更多图像？

> ID：12190560
> 
> 赞同：1
> 
> 时间：2012-08-30T05:45:17.190
> 
> 标签：asp.net-mvc-3, file-upload, image-uploading

在 mvc3 应用程序中，Product 具有字符串类型的 ImagePath1、ImagePath2、ImagePath3、ImagePath4 和 ImagePath5 属性。我可以在这条规则中保存 1 张图片。对于 1 张图像，在控制器中：

```
public ActionResult Create( Product product, HttpPostedFileBase file )
{
       var filename = Path.GetFileName( file.FileName );
       var path = Path.Combine( Server.MapPath( "~/UploadFolder/Products" ), filename );
       file.SaveAs( path );
       product.ImagePath1 = filename;
       db.Products.AddObject( product );
       db.SaveChanges();
} 
```

我有文件上传示例：

```
<script type="text/javascript">
    function HandleFileButtonClick() {
        document.frmUpload.myFile.click();
        document.frmUpload.txtFakeText.value = document.frmUpload.myFile.value;
    }
</script>
<form name="frmUpload">
<input type="file" name="myFile" style="display: none;">
<input type="text" name="txtFakeText" readonly="true">
<input type="button" onclick="HandleFileButtonClick();" value="Select" class="UploadButton">
</form> 
```

但我不能在产品的创建视图中应用它。

```
@using ( Html.BeginForm( "Create", "Product", FormMethod.Post, new { enctype = "multipart/form-data" } ) )
{    
     @Html.TextBoxFor( m => m.Name, new { @class = "createInputStyle" } )
     ...                        
     ...// Images here...
     ...
     <input type="submit" value="Create" class="" />
} 
```

文件上传示例在外部工作，但是当我将上传表单放入创建表单时，出现问题。如何保存更多图像？抱歉英语不好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T05:55:40.233

将以下内容粘贴到您的 Html.BeginForm() {}

```
<input type='file' name='ImagePath1' /> 
<input type='file' name='ImagePath2' /> 
<input type='file' name='ImagePath3' /> 
<input type='file' name='ImagePath4' /> 
<input type='file' name='ImagePath5' /> 
```

然后，在您的控制器上，检查`Request.Files`应该保存这些图像的 （假设已上传图像）

# android - 无法将数据库复制到 SD 卡

> ID：12190563
> 
> 赞同：0
> 
> 时间：2012-08-30T05:45:35.053
> 
> 标签：android

我正在开发一个使用数据库的 Android。我想在使用真机运行时将数据库复制到 SD 卡。但它并不总是成功。我的程序没有说明原因，只是它无法复制数据库。我将数据库存储在`res\raw\mobilephone1.db`；它是 10 MB。我设置了允许将数据写入 SD 卡的权限。

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"></uses-permission>
  <uses-permission android:name="android.permission.MOUNT_UNMOUNT_FILESYSTEMS"></uses-permission> 
```

这是正确的吗？

```
private final String DATABASE_PATH = android.os.Environment  
                .getExternalStorageDirectory().getAbsolutePath()  
                + "/mobilephone";  
    private final String DATABASE_FILENAME = "mobilephone.db"; 

private SQLiteDatabase openDatabase()  
    {  
        try  
        {  
            // obtain absolute path of mobilephone.db  
            String databaseFilename = DATABASE_PATH + "/" + DATABASE_FILENAME;  
            File dir = new File(DATABASE_PATH);          
            // if/sdcard/mobilephone exist，crtate this list 
            if (!dir.exists()) {  
                dir.mkdir();  
                }
            // if  mobilephone.db file did not exist in/sdcard/mobilephone then copy this filt to SD card list（/sdcard/mobilephone） from res\raw
            if (!(new File(databaseFilename)).exists())  
            {  

                // obtain the InputStream object that encapsulate mobilephone.db
                InputStream is = getResources().openRawResource(R.raw.mobilephone1);  
                FileOutputStream fos = new FileOutputStream(databaseFilename);  

                int count = 0;
                while (count == 0) {
                 count = is.available();
                }
                byte[] buffer = new byte[count];

                int readCount = 0; // the number of bytes that has successfully readen
                while (readCount < count) {
                 readCount += is.read(buffer, readCount, count - readCount);
                }

                fos.write(buffer, 0, count); 
                fos.close();  
                is.close();  
            }  
            // go to mobilephone.db in /sdcard/mobilephone  
            SQLiteDatabase database = SQLiteDatabase.openOrCreateDatabase(  
                   databaseFilename, null);  
            return database;  
        }  
        catch (Exception e)  
        {  
        }  
        return null;  
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T06:00:34.060

试试这个::

```
File sd = Environment.getExternalStorageDirectory();

File src = new File("YOUR_SOURCE_PATH");

File dest = new File(sd +  "/" +DATABASE_NAME);

      try 
      {
          if (Environment.getExternalStorageDirectory().canWrite()) 
          {                 
              if (srcdb.exists()) 
              {
                  FileChannel src = new FileInputStream(srcdb).getChannel();
                  FileChannel dst = new FileOutputStream(destdb).getChannel();
                  dst.transferFrom(src, 0, src.size());
                  src.close();
                  dst.close();  
                  flag=0; 

              }
              else
              {
                  Toast.makeText(getApplicationContext(), "ERROR: File not found in Database " , Toast.LENGTH_LONG).show();                    
              }
          }
          else
          {
              Toast.makeText(getApplicationContext(), "ERROR: Cannot write to file" , Toast.LENGTH_LONG).show();
          }
      }
      catch (Exception e) 
      {
          Log.e("Movedb", "Error in Copying" + e.toString());

      } 
```

此外，您只需要一项权限：

```
 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

# mysql - 加载脚本以填充数据库

> ID：12190572
> 
> 赞同：2
> 
> 时间：2012-08-30T05:46:21.957
> 
> 标签：mysql, sql

我正在尝试加载脚本来填充数据库。我已经创建了数据库和用户，现在我只需要从脚本中创建表。

我在 cmd 中使用这个命令：

源 C:\Temp\filename.sql;

并且我收到一条消息，指示错误 2（无法读取文件）或“没有可用的先前输出文件，您必须提供文件名！”

我已经查看了与此相关的问题，但没有找到解决方案。

请协助，mehmeh

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T06:14:38.307

在 MySQL 中，反斜杠是转义字符。因此，在您的路径中，用斜杠或双反斜杠替换反斜杠。这给

```
SOURCE C:/Temp/filename.sql; 
```

或者

```
SOURCE C:\\Temp\\filename.sql; 
```

# c# - 使用正则表达式在 C# 中解析具有多种格式的 CSV 文件

> ID：12190573
> 
> 赞同：0
> 
> 时间：2012-08-30T05:46:37.360
> 
> 标签：c#, .net, regex

我一直在尝试传递一个包含三个字段的 csv 文件。前两个字段很简单，很容易提取，问题在于第三个字段本质上是一个字符串，因此可以包含特殊字符，包括“，”它用于分隔字段。我尝试在两个'"'（双引号）之间包含字符串字段。但我的要求是简单字符串（没有特殊字符）可以在没有双引号的情况下存在。我还需要处理字符串中的下一行。下面是csv 文件的样本。

> 123，真的，这是备忘录
> 
> 234,false,"这也是备忘录"
> 
> 第345章，
> 
> 456，真的，在我上面是一张空白的备忘录
> 
> 567,false,"这有一个 ,
> 
> 在里面”
> 
> 678,true,This has a , in it <--- 这条记录应该被拒绝
> 
> 789，假，“”
> 
> 890,true,在我之上也是有效的空白备忘录

我还在[http://derekslager.com/blog/posts/2007/09/a-better-dotnet-regular-expression-tester.ashx找到了一个测试正则表达式格式字符串的好工具](http://derekslager.com/blog/posts/2007/09/a-better-dotnet-regular-expression-tester.ashx)

到目前为止，我使用了以下格式字符串 ^(""(?:[^""]|"""") *""|[^,]* ),(""(?:[^""]|"" "") *""|[^,]* )$

这种格式字符串的问题在于它不处理多行，并且不拒绝带有起始双引号但缺少结束双引号的字符串。

提前致谢。

* * *

感谢您的帮助，但我需要解析 CSV 中的自定义数据，并且必须创建自己的自定义解析器。我分别解析每个字段，并在小块中使用正则表达式字符串。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T05:50:41.373

没有必要再次发明这个轮子。我建议使用现有的 CSV 解析器，但有很多不错的选择。

我在[CSVReader](http://www.codeproject.com/Articles/9258/A-Fast-CSV-Reader)上取得了巨大的成功，它非常快速且易于使用。基本用法：

```
using (CsvReader csv = new CsvReader(new StreamReader("data.csv"), true))
{
    int fieldCount = csv.FieldCount;
    string[] headers = csv.GetFieldHeaders();

    while (csv.ReadNextRecord())
    {
        for (int i = 0; i < fieldCount; i++)
            Console.Write(string.Format("{0} = {1};", headers[i], csv[i]));

        Console.WriteLine();
    }
} 
```

# c++ - 如何在事件日志的名称中注册带有 * 的应用程序？

> ID：12190574
> 
> 赞同：1
> 
> 时间：2012-08-30T05:46:43.693
> 
> 标签：c++, winapi, event-log

我正在尝试在事件日志中注册名称中带有星号 (*) 的 Windows 本地服务。我按照[此处](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363661%28v=vs.85%29.aspx)的说明进行操作，然后成功调用具有该名称的[RegisterEventSource](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363678%28v=vs.85%29.aspx)并且事件记录正常，但是当我尝试在 Windows 事件查看器中查看它们时，我的所有条目都附有以下内容：

> 找不到源 App*Name 的事件 ID 的描述。

这只发生在早于 Windows 7 的操作系统上。此外，如果我删除星号，一切正常。

知道如何解决这个问题吗？好吧，除了从应用名称中删除星号 :)

# asp.net - 如何在 ASP.Net 中更改 CheckedlistBox 选定值的颜色

> ID：12190576
> 
> 赞同：0
> 
> 时间：2012-08-30T05:46:57.423
> 
> 标签：asp.net

我需要使用文本框搜索项目。如果找到我们需要在选中列表框中突出显示该项目。我尝试如下

`clbItems.Items[foundIndex].Attributes.Add("style", "background-color:#BBBBBB; color: white;");`

它通过删除更新面板来工作。

我有以下代码

```
 for (int itemcount = 0; itemcount < (p as CheckBoxList).Items.Count; itemcount++)
                                        {
                                            if ((p as CheckBoxList).Items[itemcount].Text.ToUpper().StartsWith(txtClientSearch.Text.ToUpper()))
                                            {
                                                ListItem lst1 = new ListItem((p as CheckBoxList).Items[itemcount].Text);
                                                (p as CheckBoxList).Items.RemoveAt(itemcount);
                                                (p as CheckBoxList).Items.Insert(0, lst1);
                                                (p as CheckBoxList).Items[0].Attributes.Add("style", "background-color:yellow;color:Red");
                                            }

                                        } 
```

任何人都可以建议我在 Javascript 中实现这一点的方法。

谢谢，拉克什。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T05:53:04.710

这就是你如何从后面的代码中做到这一点

```
 CheckBoxList1.Attributes.Add("onclick", "checkBoxList1OnCheck(this);"); 
```

如果您想使用 javascripts，请参阅以下内容：

```
<form id="form1" runat="server">
 <asp:CheckBoxList id="CheckBoxList1" onclick="checkBoxList1OnCheck(this);" runat="server">
  <asp:listitem value="1">Item 1</asp:listitem>
  <asp:listitem value="2">Item 2</asp:listitem>
  <asp:listitem value="3">Item 3</asp:listitem>
 </asp:CheckBoxList>
</form>

<script type="text/javascript">
function checkBoxList1OnCheck(listControlRef)
{
 var inputItemArray = listControlRef.getElementsByTagName('input');

 for (var i=0; i<inputItemArray.length; i++)
 {
  var inputItem = inputItemArray[i];

  if ( inputItem.checked )
  {
   inputItem.parentElement.style.backgroundColor = 'Red';
  }
  else
  {
   inputItem.parentElement.style.backgroundColor = 'White';
  }
 }
}
</script> 
```

# iphone - 如何在iphone中点击图像时打开图像特写视图？

> ID：12190577
> 
> 赞同：0
> 
> 时间：2012-08-30T05:46:58.983
> 
> 标签：iphone

我有一个图像视图，我在上面设置了图像。我想通过单击该图像打开该图像的特写视图。我们怎样才能做到这一点？任何的想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T05:52:44.990

首先这样做：

```
imageView.userInteractionEnabled = YES; 
```

另一件事是在 yourViewController 的 .h 中添加 UIGestureRecognizerDelegate

```
@interface yourViewController : UIViewController<UIGestureRecognizerDelegate>
#import <QuartzCore/QuartzCore.h> 
```

现在在 imageView 中添加 UITapGestureRecognizer。

```
UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleImageTap:)];
    tap.cancelsTouchesInView = YES;
    tap.numberOfTapsRequired = 1;
    tap.delegate = self;
    [imageView addGestureRecognizer:tap];
    [tap release];

// handle method
- (void) handleImageTap:(UIGestureRecognizer *)gestureRecognizer {
   // your closeup view here on image click
   UIImageView *imgPopView = [UIImageView alloc]initWithFrame:self.view.frame];
   // Add image in imgPopView
   [self.view addSubView:imgPopView];

   // instantaneously make the image view small (scaled to 1% of its actual size)
   imgPopView.transform = CGAffineTransformMakeScale(0.01, 0.01);
  [UIView animateWithDuration:0.4 delay:0 options:UIViewAnimationOptionCurveEaseOut animations:^{
    // animate it to the identity transform (100% scale)
    iimgPopView.transform = CGAffineTransformIdentity;
  } completion:^(BOOL finished){
    // if you want to do something once the animation finishes, put it here
  }];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T05:56:09.270

嗨，你可以做很多事情来做到这一点

1.  在 imageView 上制作自定义类型按钮，然后单击按钮做任何你想做的事情。

2.  使用触摸开始委托，您可以识别您在屏幕上触摸的位置，然后检查触摸坐标是否为图像。

3.  使用`GestureRecognizer`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T06:05:29.737

请按照以下步骤操作。

1.  添加点击手势，`UIImageView`如下所示。

    UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleImageTap:)]; tap.cancelsTouchesInView = YES; tap.numberOfTapsRequired = 1; tap.delegate = 自我；[imageView addGestureRecognizer:tap]; [点击释放]；

    // 处理方法

    *   (void) handleImageTap:(UIGestureRecognizer *)gestureRecognizer { // 您在此处点击图片时的特写视图 }
2.  创建一类`UIViewController`. 将对象放入其中并使用IBOutlet`UIImageView`将其连接到 XIB 文件，并创建 UIImage 对象作为属性。

3.  在函数中创建 UIViewController 对象`- (void) handleImageTap:(UIGestureRecognizer *)gestureRecognizer`并将当前对象或原始对象从路径图像路径设置为控制器的图像属性。
4.  `viewDidLoad`在控制器类的方法中将属性 image 设置为 UIImageView 的 image 属性。

希望这有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T06:07:37.860

Prince 给出的答案是正确的。您必须通过更改方法中的 ImageView Frame 来动画到 ImageView

```
- (void) handleImageTap:(UIGestureRecognizer *)gestureRecognizer 
{
// your closeup view here on image click
[yourImageView setFrame:CGRectMake(x, y, width, height)];

} 
```

您可以添加动画`CATransition`来获得像弹出窗口一样的效果。

# winforms - 打印控制为 A4 格式

> ID：12190581
> 
> 赞同：0
> 
> 时间：2012-08-30T05:47:19.620
> 
> 标签：winforms, c#-4.0, pdfsharp

我正在使用`Control.DrawToBitmap`以实现我的 winform 部分的图像快照。

随后，我通过免费组件（pdfsharp）将该图像对象转换为pdf文件。

但是，我的最终 pdf 并没有填满整个文档，那是因为它不是 A4 纸格式（事实上，当我创建位图对象时，我传递了我想要打印的控件的构造函数大小）。

创建一个典型的 A4 格式的图像对象可能很有趣，但我不知道该怎么做。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T09:19:23.063

这个问题对我来说不是很清楚。

在 PDFsharp 中绘制图像时，您可以指定仅以默认大小绘制图像的位置。我想这就是开线器所做的。

您可以使用 DrawImage 的可选参数指定大小 - 这样您可以将图标（32x32 像素）放大到 DIN A 4 大小或更大。

另见：http:
[//forum.pdfsharp.net/viewtopic.php?p=5099#p5099](http://forum.pdfsharp.net/viewtopic.php?p=5099#p5099)

# delphi - 将数据从 ado DB 添加到树视图

> ID：12190583
> 
> 赞同：1
> 
> 时间：2012-08-30T05:47:51.480
> 
> 标签：delphi, delphi-xe2

好的，我有一个 Ado DB 表名是 [pass] 字段是

```
[id]
[Machine]
[Level]
[Username]
[Password] 
```

我想像这样在树视图中显示所有记录

```
[Machine]
--|Level|
----Username
----Password
--|Level|
----username
----Password
[Machine]
--|Level|
----username
----Password 
```

等等。。

我知道如何连接到 db，但不确定如何将数据导入树并将其作为节点或子级项清除。

谢谢格伦

当前代码。

```
procedure TForm2.Button1Click(Sender: TObject);
var
  Qry:TADOQuery;
  selected : string;
  i:integer;
begin
    Qry:=TADOquery.Create(Self);
    try
       qry.Connection := dbconnection;
       qry.SQL.Clear;
       qry.SQL.Add('Select * FROM [Pass]');
       qry.Open;
       Qry.First;
       i:=1;
       with qry do
       begin
           while qry.RecordCount >= i do
           begin

           end;
       end;
    finally
        Qry.Active:=False;
        Qry.Free;
    end;

end; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T06:37:41.840

我相信这是一个很好的起点。我在我的应用程序中使用它来加载两个表：

```
procedure TdlgTestsSections.LoadSections;
var
  AllSectionsNode, SectionNode, SubSectionNode, AllParamsNode,
  i: Integer;
begin
  tvSections.Items.Clear;
  AllSectionsNode := tvSections.Items.AddNode(nil, nil, 'All Sections',
    Pointer(0), naAddFirst);
  dmLabData.qTestSections.Requery;
  while not dmLabData.qTestSections.Eof do
  begin
    SectionNode := tvSections.Items.AddNode(nil, AllSectionsNode,
      dmLabData.qTestSectionsName.Value,
      Pointer(dmLabData.qTestSectionsID.Value), naAddChild);
    dmLabData.qTestSubSections.First;
    while not dmLabData.qTestSubSections.Eof do
    begin
      SubSectionNode := tvSections.Items.AddNode(nil, SectionNode,
        dmLabData.qTestSubSectionsName.Value,
        Pointer(dmLabData.qTestSubSectionsRowNo.Value), naAddChild);
      SubSectionNode.Expanded := False;
      dmLabData.qTestSubSections.Next;
    end;
    dmLabData.qTestSections.Next;
  end;
end; 
```

# javascript - 可以设置输入类型=文件的文本框的高度吗？

> ID：12190585
> 
> 赞同：0
> 
> 时间：2012-08-30T05:48:01.697
> 
> 标签：javascript, html, css, file-upload

基本上我有一个`<input type="file" />`在 div 里面的，我想让那个输入的文本框部分填满整个 div。理想情况下，按钮部分将位于父 div 之外并且不可点击。我已经能够使用设置宽度，`size`但我似乎无法设置高度。你可以看到我在这里谈论的一个例子：http: [//jsfiddle.net/LrpFn/1/](http://jsfiddle.net/LrpFn/1/)

我发现了一些关于样式输入类型=文件的信息，但其中大部分与按钮样式有关。是否可以设置文本框的高度？

我的最终目标是创建一个人们可以拖放文件的 div，所以我的计划是用输入的文本区域填充整个 div，然后设置`opacity`为 0。我也愿意接受其他建议......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T05:53:28.710

您是否考虑过使用文件删除？不支持旧浏览器，但根本不需要任何输入。

[http://www.html5rocks.com/en/tutorials/dnd/basics/](http://www.html5rocks.com/en/tutorials/dnd/basics/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T05:50:50.110

您无法为`input[type="file"]`.

但是，您始终可以在那里放置一个虚拟输入（您可以随意设置样式）并将正确的输入放置在顶部，`opacity: 0`这样您就看不到它，但是单击虚拟元素会激活正确的输入。

# php - Zend_PDF：从 PDF 文档中删除 html 内容

> ID：12190591
> 
> 赞同：3
> 
> 时间：2012-08-30T05:48:17.720
> 
> 标签：php, zend-framework, magento-1.7, magento-1.6, zend-pdf

我在自定义控制器中创建了函数 getPdf

```
public function getPdf()
{ 
 $pdf = new Zend_Pdf(); 
 $page = new Zend_Pdf_Page(Zend_Pdf_Page::SIZE_A4);
 $imagePath="C:\Users\Hp\Desktop\landscape3.jpg";
 $image = Zend_Pdf_Image::imageWithPath($imagePath);
 $page->drawImage($image, 40,764,240, 820);
 $pdf->pages[] = $page;
 $pdf->save('myfile.pdf');
} 
```

它生成带有图像但在 magento1.7 文件夹中的 PDF。我尝试了以下几行

```
$pdfString = $pdf->render();
header("Content-Disposition: attachment; filename=mydownloads.pdf");
header("Content-type: application/x-pdf");
echo $pdfString; 
```

它在下载文件夹中生成 PDF 文档，但是当我打开它时。显示错误消息：Adobe reader 无法打开 myfile.pdf，因为它不是受支持的文件类型或文件已损坏...... .....当我在文本编辑器（记事本）中打开 mydownloads.pdf 时，我注意到 html 内容（调用 getPdf() 函数的当前 phtml 文件的内容）与 pdf 自己的内容存在。我什至尝试禁用使用 magento1.7 查看渲染

```
$vr = Zend_Controller_Action_HelperBroker::getStaticHelper('viewRenderer'); 
$vr->setNoRender(true); 
$layout = Zend_Layout::getMvcInstance();
$layout->disableLayout(); 
```

但不幸的是，它在 magento1.7 中不起作用。然后我尝试通过删除这两行标题函数来回显 $pdfString 的内容，
例如

```
 $pdfString = $pdf->render();
 return  $pdfString; 
```

它只是包含 Pdf 自己的内容。然后我意识到html内容的存在是由于这两行

```
header("Content-Disposition: attachment; filename=mydownloads.pdf");
header("Content-type: application/x-pdf"); 
```

谁能帮我解决这个问题。以便在下载文件夹中生成 PDF 文档。如何从pdf文档中删除html内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T08:44:36.263

### 创建 PDF 文件

要在您选择的服务器文件夹中创建 PDF 文档，您可以使用以下内容：

```
$sImagePath = 'C:\Users\Hp\Desktop\landscape3.jpg';
$sPdfPath = 'C:\Users\Hp\Desktop\my.pdf';

$oPdf = new Zend_Pdf();
$oPage = new Zend_Pdf_Page(Zend_Pdf_Page::SIZE_A4);
$oImg = Zend_Pdf_Image::imageWithPath($sImagePath);
$oPage->drawImage($oImg, 40, 764, 240, 820);
$oPdf->pages[] = $oPage;
$sContent = $oPdf->render();
file_put_contents($sPdfPath, $sContent); 
```

### 提供下载链接

您似乎还想为您的用户提供一个链接，以便他们可以在创建 PDF 后下载它。请参阅[如何使 PDF 文件在 HTML 链接中可下载？](https://stackoverflow.com/questions/364946/how-to-make-pdf-file-downloadable-in-html-link)了解更多信息。

### 使用控制器创建和下载的示例

请注意，这是一个快速而肮脏的 hack，滥用`Mage_Cms_IndexController`just 来快速证明和演示所使用的原理。无论如何，将它移植到您的自定义控制器应该是小菜一碟。

在新的 Magento 1.7.0.2 实例上使用 FF15 和 IE9 测试并运行良好：

```
class Mage_Cms_IndexController extends Mage_Core_Controller_Front_Action
{

    const PDF_PATH = '/home/user/public_html/magento-1-7-0-2/';

    public function indexAction($coreRoute = null)
    {

        // Create the PDF file
        $sImagePath = '/home/user/public_html/magento-1-7-0-2/media/catalog/category/furniture.jpg';
        $sPdfPath = self::PDF_PATH . 'myfurniture.pdf';
        $oPdf = new Zend_Pdf();
        $oPage = new Zend_Pdf_Page(Zend_Pdf_Page::SIZE_A4);
        $oImg = Zend_Pdf_Image::imageWithPath($sImagePath);
        $oPage->drawImage($oImg, 40, 764, 240, 820);
        $oPdf->pages[] = $oPage;
        $sContent = $oPdf->render();
        file_put_contents($sPdfPath, $sContent);

        // Echo the download link
        echo '<a href="cms/index/download/pdf/myfurniture">Download myfurniture.pdf</a>';
        return;

    /*
        $pageId = Mage::getStoreConfig(Mage_Cms_Helper_Page::XML_PATH_HOME_PAGE);
        if (!Mage::helper('cms/page')->renderPage($this, $pageId)) {
            $this->_forward('defaultIndex');
        }
    */

    }

    public function downloadAction()
    {

        // Cancel if the `pdf` param is missing
        if (!$sPdfName = $this->getRequest()->getParam('pdf', false)) {
            return $this->_forward('noRoute');
        }

        // Sanitize passed value and form path
        $sPdfName = preg_replace('[a-z0-9]', '', $sPdfName);
        $sPdfPath = self::PDF_PATH . $sPdfName . '.pdf';

        // Cancel if file doesn't exist or is unreadable
        if (!file_exists($sPdfPath) || !is_readable($sPdfPath)) {
            return $this->_forward('noRoute');
        }

        // Set proper headers
        header('Content-Type: application/pdf');
        header("Content-Disposition: attachment; filename=" . urlencode($sPdfName . '.pdf'));
        header('Content-Transfer-Encoding: binary');
        header("Content-Length: " . filesize($sPdfPath));

        // Send
        readfile($sPdfPath);

    }

    // :

} 
```

只是暂时复制/粘贴到您的

```
app/code/core/Mage/Cms/controllers/IndexController.php 
```

文件，调整路径，然后开始测试。

加载 Magento 安装的主页应该会显示 PDF 的下载链接。

# jquery - jQuery Accordion 多个部分同时打开

> ID：12190592
> 
> 赞同：2
> 
> 时间：2012-08-30T05:48:24.527
> 
> 标签：jquery, accordion, collapse, sections

我试图实现一次打开多个部分，但是当关闭一个部分时，其他部分仍然打开，就像这里所做的一样[http://jsfiddle.net/MZ4z9/](http://jsfiddle.net/MZ4z9/)

我正在尝试在我在这里使用的 jQuery 手风琴中实现这一点：http: [//jsfiddle.net/Lue6G/](http://jsfiddle.net/Lue6G/)

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T06:05:01.197

检查这个：

[**http://jsfiddle.net/2ZJyh/**](http://jsfiddle.net/2ZJyh/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T06:10:06.920

替换`allPanels.slideUp();`为以下行：

```
$(this).parent().next('dd').slideUp(); 
```

[**演示**](http://jsfiddle.net/akhurshid/WDzh9/)

# python - 在单元测试中使用经过的时间作为断言

> ID：12190596
> 
> 赞同：17
> 
> 时间：2012-08-30T05:49:28.890
> 
> 标签：python, unit-testing, pytest

我正面临一种情况，我想确保如果修改了一个方法，它的运行时间不会超过 X 毫秒（本质上，如果该函数较慢，它会减慢我们网页上的搜索结果，并且对销售造成不良影响）。

我们有单元测试（特别是代码是在 python 下完成的，我们使用 py.test），第一个想法是断言如果函数在 X 毫秒内没有执行，则将测试标记为失败（或引发警告）。

但是，这感觉很危险（例如，并非所有计算机的速度都相同），而且我不太确定这是单元测试的工作。

有人遇到过类似的情况吗？对我来说，速度是一个特性，我想确保这样的特性在未来不会随着代码的发展而丢失。

如果单元测试不是答案，您会推荐哪些其他替代方案？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T10:44:18.180

您可以考虑使用[pytest-timeout 插件](http://pypi.python.org/pypi/pytest-timeout)作为开始。它目前只允许指定秒数（作为浮点数）。但它可以扩展为使用更具适应性的时序，例如 pystone 编号，因此可以测量您的计算机执行 pystone 基准测试的速度，该基准可以缓存，然后您可以指定您的测试有多少“pystone”被允许采取。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T06:05:37.593

如果你有一个专用的构建/测试服务器，或者开发者之间的硬件大致相当，那么以毫秒为单位的时间限制是可以的。可重复性是关键——您可以编写一些东西，让开发人员在他们的机器上进行“基线”测试，然后将其与后续结果进行比较。

有可用的 [pyunitperf](http://sourceforge.net/projects/pyunitperf/)模块，它具有时间限制和负载测试功能。它已经很长时间没有更新了（2009 年），但如果您要自己动手，这将是一个不错的起点。

请记住，以 ms 为单位的测试时间本身不会告诉您任何信息——但只要您仅使用它来比较不同版本的性能，就应该没问题。

# python - 在python中更改函数或方法中的局部变量

> ID：12190602
> 
> 赞同：0
> 
> 时间：2012-08-30T05:49:59.353
> 
> 标签：python

我正在扩展一个开源 python 产品，但我不能直接更改代码，因为这会使与上游更改的合并变得更加困难。

因此，我不想直接更改函数，而是想从另一个地方操作函数内部的局部变量。我想向在函数内部创建的字典添加一个键作为局部变量。我将如何更改此本地 dic 变量？这可能吗？

以下面的代码为例：

```
import functools
class API(object):

    def update_resources(self, host):
        bla = sflkj
        dic = {
            'cpu': 5,
            'memory': 500
        }

class APIExtension(API):
    def update_resources(self, host):
        # But first do our changes to the function here
        # The change that I want to do is add a key: 'workload'
        # this is the function I want to change the dic variable to include workload
        super(APIExtension, self).update_resources 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T05:55:28.093

你不能。如果变量是函数的本地变量，则它不存在，除非函数正在执行。即使可以，管理此 hack 也不太可能比管理您对库的自定义更改（或要求库开发人员更改它以使变量可访问）更容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T07:13:58.600

创建补丁并将其发送给库作者。他们会将其应用到他们的代码库中，并感谢您的参与。只需以可配置的方式进行 - 例如添加创建该字典的新方法，您想扩展。然后，您可以在子类中覆盖该新方法，并且补丁不会特定于您的项目。

如果库所有者合并了您的补丁，一旦发布，您就可以使用更新版本的库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T01:59:25.807

正如 Ignacio Vazquez-Abrams 所说，这就是 Git 的用途，而且似乎是最好的建议。但不是问题的答案。我仍然想让其他用户看到这一点，如果他们正在努力

我们目前正在使用 git rebase，所以当新版本发布时，我们只需执行 git

```
git checkout our_changes_to_upstream_branch
git rebase -i upstream/master 
```

在我们修改后的分支上。这将显示我们已完成的提交列表，让我们手动选择不再需要的提交。之后，它将删除我们的更改并将其临时保存到 git 中的某个位置，然后对上游进行快进，在上游的最新版本之后，它将在最新版本之上重播我们的更改。如果存在冲突，它将停止，您可以指定是否要手动合并或跳过。

通常此时如果存在冲突，我们只是跳过它并创建一个票给原始提交作者以制作一个新补丁，看看是否仍然需要补丁。

我们注意到大多数补丁都需要重写，但这是最干净的方法。如果有任何改进将很高兴听到他们！

# python - 如何从 Python 类中的方法访问变量？

> ID：12190605
> 
> 赞同：-1
> 
> 时间：2012-08-30T05:50:42.667
> 
> 标签：python, class

我有一个 Python 中的数据库模块，它连接到数据库，从表登录中提取数据。提取数据（即用户名和密码）由类内部方法中的变量 uname 和 passw 保存。我正在尝试登录 login.py 中的数据库模块，我需要变量 uname 和 passw。如何访问变量？这是database.py。

```
#usr/bin/python

import MySQLdb as mdb

class data:
    hey = "ok"
    def __init__(self):
        """Retrieves the data from the database"""

    def db(self):   
        #Database Connection
        con = mdb.connect('localhost', 'root', 'devil', 'data');

        #Submit statements to SQL server
        cursor = con.cursor()       
        cursor.execute("SELECT * FROM login")

        #Retrieves data from SQL
        rows = cursor.fetchall()  
        row = list(rows)
        self.uname = [x[1] for x in row]
        self.passw = [k[2] for k in row]    

hello = data() 
```

我想在 login.py 中调用变量 uname 和 passw。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T05:55:25.307

在您的示例中`uname`，并且`passw`是在外部不可见的局部变量`data.db()`。要使其可见，您可以通过添加使它们成为实例属性（字段）`self.`。在构造函数中，您可以在方法中添加`self.uname = None`和。然后您可以通过访问它们。`db()``self.uname = [...]``uname = hello.uname`

如果你想在其他文件中使用它：

```
import database

db_data = database.data()
print('user: %s' % (db_data.uname)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T05:52:33.697

你不能。这些变量是方法的本地变量，除非方法正在执行，否则这些变量不存在。如果您想稍后读取这些值，则需要通过 do 来使它们成为实例`self.uname = ...`属性`self.passw = ...`。然后，您可以稍后从您引用该对象的任何地方阅读它们。

# joomla - Joomla 1.6 前端的登录和注册问题

> ID：12190610
> 
> 赞同：0
> 
> 时间：2012-08-30T05:50:53.193
> 
> 标签：joomla, joomla1.6

在我的客户端服务器中..我正在尝试登录没有响应...页面仅重新加载...

我正在尝试在他的网站上注册它显示以下错误

`Invalid Token`

所以我尝试使用在注册模型页面中打印发布的值

`$post = JRequest::get('post');`&`$requestData = JRequest::getVar('jform', array(), 'post', 'array');`

两个变量（$post 和 $requestData）都返回空......

同一个项目在我的本地服务器上成功运行......

任何身体都面临同样的问题？？？？？？

请帮我......：（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T06:21:51.460

确保您的浏览器启用了 cookie。如果确实如此，请尝试删除所有 cookie 并重新尝试登录。*[您可以在此处](http://www.itoctopus.com/invalid-token-on-joomla-login)*和*[此处](http://techjoomla.com/joomla-development/invalid-token-errors-in-joomla-15x-a-16x.html)*阅读有关此问题的更多信息还有
一件事，如果上述方法没有帮助，请尝试禁用 Joomla 的缓存（登录模块 - 设置为“无缓存”）并再次尝试登录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T10:29:03.903

***问题已修复***

请按照步骤解决此问题...

在管理端（后端）

1、`Site->Maintenance->clear cache`

删除所有页面...

2，移动到`Global configuration`，在`Site`选项卡，`SEO settings`面板，设置`Use Apache mod_rewrite`为`No`（单选按钮）

# ios - iPhone FaceBook 状态与照片

> ID：12190611
> 
> 赞同：1
> 
> 时间：2012-08-30T05:51:04.790
> 
> 标签：ios, facebook-ios-sdk

我想知道有没有用照片和位置更新我的 Facebook 状态？

到目前为止，我只看到了为我的照片提供 URL 的方法。有什么方法可以让我将我`UIImage`的内容放到 FaceBook 并使用它发送给我/feed`fbrequest`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T06:42:00.253

您可以为此尝试 fbrequest graphpath me/photos。

```
[facebook requestWithGraphPath:@"me/photos"
                     andParams: params
                 andHttpMethod: @"POST"
                   andDelegate:self]; 
```

您可以将 Image 作为参数的一部分传递。对于位置，您可以为要添加的地点添加 placeID。 [这](https://developers.facebook.com/docs/reference/api/user/#photos)是 Places 的参考文档。

# mysql - MySQL Search Distinct 使用连接

> ID：12190612
> 
> 赞同：0
> 
> 时间：2012-08-30T05:51:07.693
> 
> 标签：mysql, inner-join

我有 2 个表：计算机和别名。Computers 包含对 Alias 的 FK 引用。一台计算机可以有许多别名。

我正在尝试编写一个脚本，该脚本将删除计算机中名称字段的主机名（第一个“。”之前的所有内容）部分，并验证别名表中是否存在别名条目。我最终试图生成一份报告，其中包含不匹配的computers.id 和computers.name。

```
SELECT DISTINCT t1.id,
                t1.name,
                t2.alias
FROM   computers t1
       INNER JOIN alias t2
               ON t1.id = t2.computer_id
WHERE  alias.alias <> 'hostname'
        OR alias.alias IS NULL; 
```

我的 perl 脚本已经可以从“hostname.fqdn.com”解析“主机名”，我可以将其作为参数传递，但我不确定如何创建这样的报告，或者即使我走在正确的轨道上。

欢迎任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T05:55:22.827

您需要使用[LEFT JOIN](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)而不是`INNER JOIN`提取名称，您可以使用字符串函数`SUBSTRING_INDEX`：

```
SELECT DISTINCT t1.id,
                SUBSTRING_INDEX(t1.name, '.', 1) AS name,
                t2.alias
FROM   computers t1
       LEFT JOIN alias t2
              ON t1.id = t2.computer_id
                 AND alias.alias = 'hostname'
WHERE  alias.alias IS NULL; 
```

# drupal-7 - 如何正确显示内联上传的文件（与所见即所得集成的模块媒体）？

> ID：12190615
> 
> 赞同：1
> 
> 时间：2012-08-30T05:51:34.870
> 
> 标签：drupal-7, wysiwyg, media

Drupal 7.15 模块：media 7.1.2、mediaelement.js、带有ckeditor 的所见即所得。

我的过程：

1.admin/config/content/wysiwyg/profile > 在“按钮和插件”中启用“媒体浏览器” 2.admin/config/content/formats > 启用“admin/config/content/formats” 3.添加内容 > 点击按钮“添加媒体”将 mp3 和图片添加到正文

但它显示错误。页面源码显示：

[[{"type":"media","view_mode":"default","fid":"99","attributes":{"alt":"","class":"media-image"}} ]]

[[{"type":"media","view_mode":"default","fid":"40","attributes":{"alt":"","class":"media-image"}} ]]

同时，文件在内容类型的字段中运行良好。

此致。

雨果

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T10:41:26.287

1.  导航到 admin/config/content/formats
2.  单击所见即所得编辑器上启用的文本格式的“配置”链接
3.  选中*将媒体标签转换为标记*复选框
4.  保存表格
5.  开瓶啤酒，这很辛苦

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-27T23:13:37.223

除了 Clive 的回答之外，应该注意的是，如果您渲染错误的属性，在模板文件中覆盖渲染可以完全忽略“将媒体标签转换为标记”设置。

```
<?php print render($node->body['und'][0]['safe_value']); ?> 
```

“safe_value”将保持渲染，而“value”则不会。如果您不确定对象属性包含什么，您总是可以在模板文件中执行类似的操作，以自己爬过这个巨大的节点对象......

```
<pre>
<?php print_r($node); ?>
</pre> 
```

准备好变得更加困惑。Drupal 喜欢用超长的物体攻击你。有时很难按照您的需要跟踪链条。不要害怕慢慢做，并且 print_r 以渐进的顺序进行，直到你看到一些有意义的东西。

```
<pre>
<?php print_r($node->body); ?>
</pre> 
```

嗯……太大了。

```
<pre>
<?php print_r($node->body['und']); ?>
</pre> 
```

好的，越来越干净

```
<pre>
<?php print_r($node$node->body['und'][0]); ?>
</pre> 
```

啊。知道了。好的，我可以使用这个。

# c# - 从 C# 中的证书中提取公钥

> ID：12190616
> 
> 赞同：0
> 
> 时间：2012-08-30T05:51:51.613
> 
> 标签：c#, cryptography, x509certificate, digital-certificate, rsacryptoserviceprovider

如何从 x509 v.3 证书中获取私钥并将其存储在一个`RSACryptoServiceProvider`类中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:31:36.520

```
RSACryptoServiceProvider rsaCsp = (RSACryptoServiceProvider)x509certificateobject.PrivateKey; 
```

假设如果您使用公钥，那么只需`.PrivateKey`将`.PublicKey`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T10:43:20.773

```
RSACryptoServiceProvider rsaCsp = (RSACryptoServiceProvider)x509certificateobject.PrivateKey; 
```

# asynchronous - 如果静态文件不存在，如何让 nginx 重试静态文件

> ID：12190623
> 
> 赞同：3
> 
> 时间：2012-08-30T05:52:36.933
> 
> 标签：asynchronous, nginx, thumbnails

我有一个应用程序服务器，它生成图像缩略图，其中的 URL 由 nginx 作为静态资源处理。目前这是一个同步过程，所以当请求通过时图像就在那里。

图像的 nginx 配置很简单：

```
location /image/cache/ {
    alias /var/www/image/cache/;
} 
```

但是，我希望生成 URL，而不是阻止应用程序，而是异步生成相应的文件，从而释放应用程序服务器。然后问题就变成了处理 nginx 中可能还*没有*文件的图像请求。

有没有办法将 nginx 配置为等待并重试尚不存在的静态资源？

另一种方法可能是连接应用程序调用以确保文件在可用时返回，我也愿意这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T07:22:50.867

我认为您应该使用 error_page @failback 通知您应用程序/浏览器缩略图尚未出现

```
location /image/cache/ {
    alias /var/www/image/cache/;
    error_page         404 @fallback;
}

location @fallback {

    # image is not ready, so handle this situation here

} 
```

有一种常见的做法是按需生成拇指并将它们缓存为静态文件。在你的情况下这么贵吗？你能解释一下你决定背后的原因吗？我的意思是异步地做thums

# c - 为什么在 C 中前缀递增 (++x) 比后缀递增 (x++) 快？

> ID：12190624
> 
> 赞同：0
> 
> 时间：2012-08-30T05:52:42.373
> 
> 标签：c, gcc, clang

> **可能重复：**
> [C 中的 i++ 和 ++i 之间是否存在性能差异？](https://stackoverflow.com/questions/24886/is-there-a-performance-difference-between-i-and-i-in-c)

我听说它说前缀增量比 C 中的后缀增量快。这是真的吗？为什么？

++x 与 x++

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T05:55:35.273

这是一个荒谬的神话，一遍又一遍地重复。这两个运算符有*语义*差异；一个结果是旧值，另一个结果是新值。如果您使用此结果，代码将根据您使用的运算符具有不同的行为，如果一种行为可以比另一种更有效地实现，这可能包括性能差异。但如果你不使用结果，`x=x+1`, `x+=1`, `x++`, 和`++x`都是**相同**的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T05:55:15.197

简短的回答没有。原因是它是相同的操作，只是语句的评估顺序发生了变化。

例子：

```
int a = x++;
int b = ++x; 
```

伪组装：

```
mov a, x
inc x
inc x
mov b, x 
```

这是一个微不足道的例子，但即使在更大的例子中，最糟糕的可能是内存屏障强制操作，它不允许将后增量值推入或拉过它，这只是`mov`由于依赖或强制屏障而增加了额外的操作. `mov`无论如何，大多数编译器都会在标准情况下使用指令重新排序来优化这个额外的东西。

# objective-c - Sqlite3 Fetching 在 iphone 中需要更多时间

> ID：12190628
> 
> 赞同：0
> 
> 时间：2012-08-30T05:53:10.087
> 
> 标签：objective-c, ios4, sqlite, xcode4.3

虽然我使用一些 JOINS 和按条件分组从 sqlite3 获取数据，但它需要更多时间。

该表有 30000 条记录

是否有任何优化方法可以从 SQlite 获取大量垃圾数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T22:21:52.267

您可以限制 sqlite 仅返回前 n 个结果并偏移 m 以在用户向下滚动时获取后面的条目： SELECT someColumn ORDER BY someOtherColumn LIMIT n OFFSET m

这会更有效率。我应该详细说明吗？

# mysql - 如果 NULL，MySql 显示“否”，如果不为空，则显示“是”

> ID：12190629
> 
> 赞同：0
> 
> 时间：2012-08-30T05:53:10.593
> 
> 标签：mysql

```
SELECT IFNULL(Col,'b') FROM Table 
```

检查 Col，如果不为 null，则返回 Col，否则返回 b。

如何检查 Col，如果不为 null，则返回“a”，如果为 null，则返回“b”。

我试过这个：

```
SELECT IF(Col=NULL,'a','b') FROM Table 
```

总是返回'b'。这是怎么做到的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-30T05:54:10.490

用于`IS NULL`检查列是否为空，而不是`= NULL`.

每个值都会与`NULL`结果进行比较`NULL`，所以你总会得到`b`。

```
SELECT IF(Col IS NULL,'a','b') FROM Table 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T05:54:24.577

`CASE`您可以使用适用于所有 DBMS 的ANSI SQL-92 兼容语句，而不是专有`IF`语句。

```
SELECT CASE WHEN Col IS NULL THEN 'a' ELSE 'b' END AS Col
FROM   Table 
```

您当前的语句未按预期工作，因为您无法`NULL`使用`=`符号进行比较，您必须`IS NULL`改用。

您可能想阅读[三值逻辑](http://en.wikipedia.org/wiki/Null_%28SQL%29#Three-valued_logic_.283VL.29)

> 由于 Null 不是任何数据域的成员，因此它不被视为“值”，而是指示不存在值的标记（或占位符）。因此，与 Null 的比较永远不会导致 True 或 False，但总是会产生第三个逻辑结果，Unknown

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T05:55:33.110

比较空值时使用`IS`而不是`=`

```
SELECT IF(Col IS NULL,'a','b') 
FROM Table 
```

# android - 无法在华硕nexus中运行android应用

> ID：12190630
> 
> 赞同：1
> 
> 时间：2012-08-30T05:53:12.823
> 
> 标签：android, ubuntu, device, adb

我正在尝试在 Asus Nexus 设备中从 eclipse 运行我的 android 应用程序，但是当我运行它时，设备如下所示：-

```
?????????????  no permission 
```

并允许选择确定。我还尝试按照 developer.android 教程中提到的那样为设备设置规则..但仍然没有改变..我正在使用 ubuntu..有人可以帮我解决它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T06:16:28.083

您的 Android 设备中未启用 USB 调试。

将其设置在您的设备中

设置 -> 应用程序 -> 开发 -> USB 调试

USB 调试 = 真

# django - OneToOne 字段的问题

> ID：12190632
> 
> 赞同：2
> 
> 时间：2012-08-30T05:53:21.843
> 
> 标签：django, django-models

当我同步我的数据库时，我收到**模块'对象的错误没有属性'OneToOnefield'**

models.py 的代码如下：

```
from django.db import models
from django.contrib.auth.models import User
from django.db.models.signals import post_save
class Drinker(models.Model):
       user     =models.OneToOnefield(User)
       birthday =models.Datefield()
       name     =models.Charfield(max_length=100)

#create our user object to attach to our drinker object

def create_drinker_user_callback(sender, instance, **kwargs):
       drinker.new=Drinker.objects.get_or_create(user=instance)
post_save.connect(create_drinker_user_callback, User) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T05:59:07.723

它应该是`models.OneToOneField`带有大写“F”的字段。这也是您的其他字段定义的问题。

# asp.net - 列表属性不绑定在控制器中的帖子上

> ID：12190633
> 
> 赞同：1
> 
> 时间：2012-08-30T05:53:27.077
> 
> 标签：asp.net, asp.net-mvc-4, viewmodel

我知道这个问题已经被问了无数次，但请原谅我，因为我现在浪费了很多时间，因此终于发布了。所以总结一下，我有一个视图模型，它有一些复杂的类型属性和一个复杂的类型列表属性。

```
public class ViewModel
{
    public ViewModel()
    {
        Gains = new List<Gain>();

    }
    [UIHint("Common")]
    public AllRegRecordsLog commonRegisterFields { get; set; }
    public Potential Potential { get; set; }
    [UIHint("Gains")]
    public List<Gain> Gains { get; set; }

    public void CreateGains(int count = 1)
    {

        for (int i = 0; i < count; i++)
        {

            Gains.Add(new Gain());

        }

    }

} 
```

现在我的视图 createOrEdit 我将此属性称为，

```
@Html.EditorFor(model => model.Gains) 
```

我在我的特定视图文件夹中放置了一个编辑器模板

```
@model Gains
    table id="gainsTable" class="content-tables"style="width:98%">
    <tr id="defaultGainsRow">
            <td class="editor-label">
                @Html.LabelFor(model => model.VolumeGainLow)
            </td>
            <td class="editor-field">
                @Html.TextBoxFor(model => model.VolumeGainLow)
                @Html.ValidationMessageFor(model => model.VolumeGainLow)
            </td>

            </tr>

     <tr>
    <td colspan="4">
      <input id="addGainsButton"type="button" class="t-button" Value="Add Potential Gains"/>
    </td>
    </tr>
    </table> 
```

但不知何故，我收到错误“传递到字典中的模型项是'System.Collections.Generic.List'类型，但需要增益”

我正在使用 asp.Net MVC 4

请指出我正确的方向。

谢谢

比拉尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T18:51:35.023

感谢您的帮助，我使用以下帖子解决了它

[http://ivanz.com/2011/06/16/editing-variable-length-reorderable-collections-in-asp-net-mvc-part-1/](http://ivanz.com/2011/06/16/editing-variable-length-reorderable-collections-in-asp-net-mvc-part-1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T06:01:30.033

修改 editortemplate 以获取 List 并在其中执行循环逻辑

```
@model List<Gain>
@foreach(var gain in Model)
{
    table id="gainsTable" class="content-tables"style="width:98%">
    <tr id="defaultGainsRow">
            <td class="editor-label">
                @Html.LabelFor(gain=> gain.VolumeGainLow)
            </td>
            <td class="editor-field">
                @Html.TextBoxFor(gain=> gain.VolumeGainLow)
                @Html.ValidationMessageFor(gain=> gain.VolumeGainLow)
            </td>

            </tr>

     <tr>
    <td colspan="4">
      <input id="addGainsButton"type="button" class="t-button" Value="Add Potential Gains"/>
    </td>
    </tr>
    </table> 
} 
```

编辑：我的剃须刀可能不是 100%，但你明白了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T06:02:50.360

看起来您正在尝试将您的视图声明为绑定到属性而不是类型。这是不可能的。您必须将模型声明为 Web 项目引用的有效类型，模板才能正常工作。

`Gains`属性类型`List<Gain`> `. Since your`Gains `view has a`Gains `type declared, your`UIHintAttribute` 无效。

# c# - 如何将数据从excel表插入asp.net中的数据表？

> ID：12190636
> 
> 赞同：1
> 
> 时间：2012-08-30T05:53:39.130
> 
> 标签：c#, asp.net, excel, import, datatable

我想将数据从 excel 表插入数据表，这工作正常。但我不知道为什么我现在收到以下错误

**“Microsoft Jet 数据库引擎找不到对象 'Sheet1'。请确保该对象存在并且您正确拼写了它的名称和路径名。”**

我的代码是检索数据是

```
 if (fupExcel.HasFile)
        {
            // Get the name of the Excel spreadsheet to upload.
            string strFileName = Server.HtmlEncode(fupExcel.FileName);
            strAct = "New Schedule is uploaded, File name:" + strFileName;

            // Get the extension of the Excel spreadsheet.
            string strExtension = Path.GetExtension(strFileName);

            // Validate the file extension.
            if (strExtension != ".xls" && strExtension != ".xlsx")
            {
                ScriptManager.RegisterStartupScript(this, this.GetType(), "ntexl", "alert('Please select a Excel spreadsheet to import!');", true);
                return;
            }

            // Generate the file name to save.
            //string uploadFileName = DateTime.Now.ToString("yyyyMMddHHmmss") + strExtension;
            uploadFileName = CCMMUtility.GetCurrentDateTimeByTimeZone("US Mountain Standard Time").ToString("yyyyMMddHHmmss") + strExtension;

            // Save the Excel spreadsheet on server.
            fupExcel.UploadFile(uploadPath, uploadFileName);

            ClsScheduleFileNew objCLSSchedule = new ClsScheduleFileNew();
            ClsScheduleFileNewProp objUserFile = new ClsScheduleFileNewProp();

            objUserFile.FileName = strFileName;
            objUserFile.FilePath = uploadFileName;
            objUserFile.CreatedDate = CCMMUtility.GetCurrentDateTimeByTimeZone("US Mountain Standard Time"); //DateTime.Now;
            ScheduleFileId = objCLSSchedule.InsertFileInfo(objUserFile);
            hdfScheduleFileId.Value = ScheduleFileId.ToString();
            if (ScheduleFileId != 0)
            {
                //ViewState["nw_Upload"] = ScheduleFileId;
            }
            else
            {
                ScriptManager.RegisterStartupScript(this, this.GetType(), "err", "alert('Some error occured while exporting the file.');", true);
                return;
            }
            // Generate the connection string for Excel file.
            strExcelConn = uploadPath;

            // There is no column name In a Excel spreadsheet. 
            // So we specify "HDR=YES" in the connection string to use 
            // the values in the first row as column names. 
            if (strExtension == ".xls")
            {
                // Excel 97-2003
                strExcelConn = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + strExcelConn + uploadFileName + ";Extended Properties='Excel 8.0;HDR=YES;'";
            }
            else
            {
                // Excel 2007
                strExcelConn = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + strExcelConn + uploadFileName + ";Extended Properties='Excel 12.0 Xml;HDR=YES;'";
            }
            hdfStrExcelConn.Value = strExcelConn;
            try
            {
                ImportData(uploadFileName, uploadPath, strExcelConn, ScheduleFileId);
            }
            catch (Exception)
            {
                //Delete file over here and database entry over here.
                string path = uploadPath + uploadFileName;
                CCMMUtility.DeleteFilefromLocation(path);
                objCLSSchedule.DeleteScheduleFile(ScheduleFileId);
                ScriptManager.RegisterStartupScript(this, this.GetType(), "ntmtch", "alert('Some column values are not matched.');", true);
                return;
            }
        } 
```

导入函数的代码是

```
 DataTable dt = new DataTable();
        DataRow row;
        DataTable dtExcel = CreateDataTable();

        using (OleDbConnection conn = new OleDbConnection(strConn))
        {
            OleDbDataAdapter da = new OleDbDataAdapter("select * from [Sheet1]", conn);
            da.Fill(dt);// here i am getting that error

            // Create new datatable having non empty rows
            DataTable filteredDataTable = (dt.Rows.Cast<DataRow>().Where(t => t.ItemArray.Any(field => !(field is DBNull)))).CopyToDataTable<DataRow>();

            // Fill the DataTable with data from the Excel spreadsheet.
            if (filteredDataTable.Rows.Count > 0)
            {
// my code hete to fill datatable } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T05:56:29.507

尝试使用：

```
"select * from [Sheet1$]" 
```

我认为 $ 是必需的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T06:20:54.943

编写我尝试过的解决方案。

将 excel 工作表存储为逗号分隔文件并将其另存为 .txt

然后使用以下逻辑将其导入数据表。

```
 using (StreamReader sr = new StreamReader("C://File.txt"))
        {
            String line;
            int index = -1;
            while ((line = sr.ReadLine()) != null)
            {
                index++;
                iIndexofComma = line.IndexOf(@",");
                iLength = line.Length;
                dt.Rows.Add();
                dt.Rows[index]["col1"] = line.Substring(0, iIndexofComma);
                dt.Rows[index]["col2"] = line.Substring(iIndexofComma + 1, iLength - iIndexofComma - 1);
                dtMapping.AcceptChanges();
            }
        } 
```

希望有帮助。

# php - 通过 PHP 将网站上录制的音频保存到 MySQL

> ID：12190637
> 
> 赞同：1
> 
> 时间：2012-08-30T05:53:42.487
> 
> 标签：php, mysql, audio, recording

我有一个挂断，我似乎无法克服。我不是要代码（尽管那很好），只是想朝着正确的方向前进。我正在尝试在我的网站上录制音频（按下按钮并对着麦克风说话），然后将该录音保存到服务器上（与我的网站所在的服务器不同）。我找到了一些闪存记录器，但它们似乎都想保存到客户端计算机上的硬盘驱动器中。有没有人成功地做类似的事情？有没有可能更容易做到这一点的录音机？我读过的录音机似乎缺乏将音频保存到 MySQL 数据库的文档。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T05:57:09.380

您不想将音频存储在 MySQL 数据库中，而是想将音频文件的**路径存储在数据库中。**

[这里](http://code.google.com/p/wami-recorder/)有一个过时的示例，展示了如何将音频保存在服务器上。然后只需将路径插入 MySQL 中的适当表中即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T06:17:40.780

您曾经尝试在网站上存储图像吗？音频剪辑具有相同的方式。只需将文件名保存在数据库中，并将剪辑保存在指定文件夹中。在检索时，您必须从数据库中检索文件的名称并制作完整的路径来播放音频。希望它有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T06:11:18.690

不要将多媒体或大文件保存到您的数据库中。您可以将文件名和相关数据保存到数据库表中。该文件可能有一个唯一的名称，您可以将其存储在数据库中。该文件可以使用该唯一文件名复制到服务器中，您甚至可以创建一个具有某个唯一名称的文件夹，并将该文件复制到该文件夹​​中。但是文件的路径应该能够从数据库中检索。

另外，你可以参考这个stackoverflow问题**[How to record voice files using PHP, FLASH](https://stackoverflow.com/questions/2065797/how-to-record-voice-files-using-php-flash)**

# c - 将数组转换为整数

> ID：12190638
> 
> 赞同：0
> 
> 时间：2012-08-30T05:53:45.617
> 
> 标签：c

有没有办法将数组转换为整数，我有以下方法，但它似乎不起作用：

```
int8_t x_array[18] = {0,1,1,0,1,0,1,0,1,0,1,0,0,0,0,0,1,1};
int32_t numb;

for (int8_t j=0;j<19;j++)
{
   numb = numb + pow(2, i)*x_array[i];
} 
```

是否有一个原因？？

**PS：**这是我发布的上一个问题的后续问题 [Joining outputs from switch](https://stackoverflow.com/questions/12122100/joining-outputs-from-switches) 我已经编辑了这个问题，说明为什么建议的方法不起作用。

本质上，我想做的是在 RAPIDILITTE（一个模拟器软件）中创建一个程序，以每毫秒对 PS 输入（接近传感器系统）进行采样，这是 18 位数字输入。输入由位于端口 2 上的拨动开关 0-17（18 位）表示。输入需要在 0-9999 之间进行归一化）

主要问题是（我在之前发布的问题中提到过）我一次只能访问一个引脚，而不是一次读取整个端口。我尝试了很多方法来读取引脚并将它们组合成一个变量，将其转换为自然数，然后对输入进行规范化。最后，我认为最好的方法是将读取的每个引脚放入 a 中`array[18]`，然后将其转换为变量，然后对其进行规范化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T05:57:12.837

你永远不会初始化你的变量，所以读取它是简单的**未定义行为**。你应该说：

```
int32_t numb = 0; 
```

您还应该决定是要`i`还是`j`作为循环变量。

（每次计算功率也很浪费；相反，您应该保持一个正在运行的乘数，并在每一步将其加倍。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T06:17:18.310

`numb`永远不会被初始化。您还遍历了数组中的最后一个元素（`j < 19`应该是`j< 18`）。此外，您从未声明`i`... 看来您的意思是`j`.

我相信您正在尝试将位数组转换为单个`int32_t`. 大概该数组是按重要性升序排列的，即从最低有效位到最高有效位。

```
int8_t x_array[18] = { 0, 1, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0, 1, 1 };
int32_t numb = 0;
for (int8_t j = 0; j < 18; ++j) {
  numb |= x_array[j] << j;
} 
```

你不需要在`pow`这里使用，因为`pow(2, j)`它相当于`1 << j`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T07:14:27.637

正如其他人提到的那样，您的问题是您没有初始化 numb 并导致您的程序未定义的行为。
另外，您的循环计数器需要更改为，`i`而不是`j`！

我只是想为您的程序添加另一项修改，这就是您计算最终结果的方式。这个怎么样 ？它需要更少的操作来得到答案：

```
numb = 0;
for (int8_t i=LEN;i>0;i--)
    numb = numb*2 + x_array[i-1]; 
```

# iphone - testflight 会自动将新的 UDID 添加到我的 Apple 开发者帐户吗

> ID：12190640
> 
> 赞同：2
> 
> 时间：2012-08-30T05:53:56.470
> 
> 标签：iphone, testflight

我们希望很快使用 testflight 对我们的 iPhone 应用程序进行私人 beta 测试。我们不太清楚的一件事是如何将新用户自动添加到已发布的构建中。我的理解是当用户接受 testflight 邀请并按照 testflight 指令提交他的 UDID 时，我们仍然需要将 UDID 添加到 ad hoc 分发配置文件中并使用更新的配置文件在 Xcode 中重建应用程序，然后上传新的构建试飞。最近我从某人那里听说 Testflight 可以自动将新的 UDID 添加到我们的临时配置文件中，并且新用户无需构建新版本即可安装应用程序。我发现这很难相信，但我想与社区确认是否有更简单的方法可以将新用户添加到现有构建中。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T06:03:11.590

如果可能的话，我会是第一个想知道的。AFAIK，您必须手动上传设备列表（尽管您可以从试飞中获取此文件，这简化了更新配置文件的噩梦过程，尽管不是很大）。

无法想象 Testflight 甚至能够在不询问您的 Apple 开发人员凭据的情况下进行更新，但事实并非如此。

但是，您可以将更新的移动配置文件上传到 Testflight，它会自动更新已上传的应用程序，以便允许添加的 UDID。至少可以省去重新构建应用程序的痛苦。

# ebay-api - eBay GetOrders：如何区分合并订单和原始交易

> ID：12190667
> 
> 赞同：7
> 
> 时间：2012-08-30T05:55:46.473
> 
> 标签：ebay-api

经过几个月的正常工作后，我的 eBay 集成刚刚中断，我不确定这是否是他们的错误。

我的买家对两种不同的物品进行了 2 次交易，然后将它们合并以节省运费。这一切都发生在几分钟之内。

这有以下结果：

*   创建了新的销售记录（偶然不会出现在卖家经理中）
*   为组合订单新建`OrderId`。包含两个事务（如预期的那样）。这`OrderId`被分配给最初的 2 个订单和合并的一个（不是预期的！）
*   三个订单在电话中返回`GetOrders`。都具有相同的`OrderId`价值
*   `CreatedTime`每个返回的每个`OrderType`都不同，最近的订单具有最晚的时间（如预期的那样）。

我想弄清楚的是我应该如何知道不运送所有 3 个订单。如果我的代码没有尝试将这些订单放入字典中，那么我什至不会知道`OrderId`返回了重复的值。

我希望某处有一个属性表明订单记录已合并到另一个订单中 - 但我找不到它。

我应该查看订单的时间并选择最近的一个吗？或者有没有办法从搜索结果中排除随后合并的交易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T04:28:30.650

这是我的 C# 代码，用于检查这种性质的欺骗并仅返回最新订单。这里有很多断言检查，但它还没有崩溃 - 然后我不知道代码路径`o.Count() != 1`是否曾经被击中过。

```
 // raw orders coming back from eBay
        var orderArrayRaw = getTransactions.ApiResponse.OrderArray.ToArray();

        // processed list to remove dupes
        var orderArray = orderArrayRaw.ToArray().GroupBy(x => x.OrderID).Select(o =>
        {
            // single unique order
            if (o.Count() == 1)
            {
                return o.Single();
            }
            else
            {
                // get most recent
                var mostRecent = o.OrderByDescending(x => x.CreatedTime).First();

                // get all the transaction IDs in the non-most-recent
                var allTransactions = o.Except(new[] { mostRecent }).SelectMany(x => x.TransactionArray.ToArray().Select(t => t.TransactionID)).OrderBy(x => x).ToArray();

                var combinedTransactions = mostRecent.TransactionArray.ToArray().Select(x => x.TransactionID).OrderBy(x => x).ToArray();

                if (allTransactions.SequenceEqual(combinedTransactions))
                {
                    // ok!
                    return mostRecent;
                }
                else
                {
                    var dupes = orderArrayRaw.ToArray().GroupBy(x => x.OrderID).Where(x => x.Count() > 1);
                    var dupeIds = dupes.Select(x => x.Key).ToArray();

                    throw new ApplicationException("The following orders were returned more than once in the response " + string.Join(", ", dupeIds));
                }
            }

        }).ToArray(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-31T01:40:47.593

它不保证最新的订单是具有组合订单节点的订单。根据我的经验，后来的订单只是前一个订单的假设行项目。我们无数次向 ebay 报告了这方面的支持，他们只说他们会尽快修复它。

我现在的解决方案是使用 GetTransactionDetails API 与订单的 PayPal 交易进行比较。我假设 PayPal 交易应该有合并的订单记录。我所做的是，我创建了一个 ebay 行项目图 ({ItemID:Quantity}) 并创建了一个贝宝交易行项目图 ({Number:Quantity})，然后将两者与作为参考的贝宝交易图进行比较。如果 ebay 订单节点与 paypal 交易不匹配，则忽略它并继续下一个订单节点，直到满足合并订单的节点。有时，合并订单记录的节点在 GetOrdersResponse 的订单节点中排在第一位，因此在检测到时忽略下一个。希望我有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-08-21T09:22:09.223

看起来 eBay 订单是在买家承诺购买（例如赢得拍卖）时创建的。因此，当他们即将付款时，他们可以将这些订单组合在一起，并通过交易创建另一个订单。我也有同样的问题，只是想如果我们传递订单状态只是为了检索完整的订单呢？

eBay 关于 API 的精彩介绍[https://youtu.be/n4UDGrO6H_g?t=1111](https://youtu.be/n4UDGrO6H_g?t=1111)

# sql - 如何删除存储过程中声明的表中的所有记录

> ID：12190669
> 
> 赞同：0
> 
> 时间：2012-08-30T05:55:52.813
> 
> 标签：sql, sql-server, sql-server-2008-r2, temp-tables

我正在创建一个电子邮件队列来处理电子邮件发送。从该队列中，我获取 X 条记录并根据记录的类型字段发送电子邮件。

为此，我在存储过程中声明了一个表。当获取 X 条记录时，我将 **EmailQ 表**中的记录状态设置为正在处理。但是在发送**X 条记录后，现在声明的表内必须被删除**。

为此，我可以使用 Delete 但有这个**TRUNCATE 可以删除**表中的所有记录。但是声明的表还没有标识为表。

```
WHILE EXISTS ( SELECT * FROM emailQ WHERE Status != 3)
BEGIN
  CREATE PROCEDURE [dbo].[SendMails]
  DECLARE @Temp TABLE (......)
  --Declare all the necessary variables

  INSERT INTO @Temp SELECT TOP 10
  WITH (UPDLOCK, HOLDLOCK)

  --Update the email queue table status of selected set of records in to the @Temp

  DECLARE  dataSet CURSOR FORWARD_ONLY FOR (SELECT.......  FROM @Temp)
  OPEN dataSet
  FETCH NEXT FROM dataSet INTO...

  WHILE @@FETCH_STATUS = 0
  BEGIN
    --send mails acordingly
  END

  CLOSE dataSet
  DEALLOCATE dataSet

  --Update the email queue table status of completed set of records in to the @Temp

  WAITFOR DELAY...
  TRUNCATE @Temp// This is where this Temp table is not identified as a table(It says     "Incorrect sintax... Expecting a table")

 END 
```

从这个声明的表中删除记录的最合适的方法是什么。我也很欣赏关于我处理邮件发送方式的评论。

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-30T06:02:42.047

你应该用删除来做

```
DELETE FROM @Temp 
```

检查相关问题

[SQL Server，带有截断的临时表与带有删除的表变量](https://stackoverflow.com/questions/2646695/sql-server-temporary-tables-with-truncate-vs-table-variable-with-delete)

更多关于截断和临时表

[截断表](http://msdn.microsoft.com/en-us/library/aa260621(v=sql.80).aspx)

[我应该使用#temp 表还是@table 变量？](https://web.archive.org/web/20140104182318/http://databases.aspfaq.com/database/should-i-use-a-temp-table-or-a-table-variable.html)

**更新：**

截断表不适用于声明的表变量。您应该改用 #Temp 表或删除行而不是 trancating。检查相关问题以获取更多信息。

**更新 2：**

马丁史密斯的好回答

[SQL Server 中的临时表和表变量有什么区别？](https://dba.stackexchange.com/questions/16385/whats-the-difference-between-a-temp-table-and-table-variable-in-sql-server/16386#16386)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-25T11:41:27.847

创建表如下..

```
DECLARE @tempTable table(BatchId int, BatchInputOutputType NVARCHAR(128)); 
```

使用以下查询删除临时表

```
DELETE from @tempTable; 
```

# c# - 我可以密码加密 SQLite 数据库吗？

> ID：12190672
> 
> 赞同：17
> 
> 时间：2012-08-30T05:56:06.417
> 
> 标签：c#, sql, database, sqlite

我正在使用带有 C# Windows 应用程序的 SQLite 数据库版本 3。我想使用密码或任何其他加密方式加密 SQLite 数据库文件，以防止客户端从程序文件文件夹中打开它。

我不想要任何运行时加密方式，我只想让数据库文件在客户端尝试从程序文件中打开它时显示密码字段..谢谢

***编辑***

如果我从代码中加密它，客户端可以在安装完成后打开它，并且在打开程序执行加密之前将db文件传输到程序文件不是吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-07-25T10:35:31.737

我使用 SQLite 版本 3 完美运行！你必须这样做：

```
//if the database has already password
try{
            string conn = @"Data Source=database.s3db;Password=Mypass;";
            SQLiteConnection connection= new SQLiteConnection(conn);
            connection.Open();
            //Some code
            connection.ChangePassword("Mypass");
            connection.Close();
    }
//if it is the first time sets the password in the database
catch
    {
            string conn = @"Data Source=database.s3db;";
            SQLiteConnection connection= new SQLiteConnection(conn);
            connection.Open();
            //Some code
            connection.ChangePassword("Mypass");
            connection.Close();
    } 
```

> 此后，如果用户尝试打开数据库。会说受管理员保护或数据库已加密或不是数据库或损坏的文件！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T06:05:27.040

在这个[**论坛**](http://www.autoitscript.com/forum/topic/112731-sqlite-with-password/)中发现一个帖子表明..

`Standard SQLite3 API doesn't offer any form of protection and relies only on underlying OS privileges mecanism (if any) for "security". If you have an existing SQLite-style database which uses a specific API to gain access, then you should use this particular (non-standard) API.`

如果您可以/想要为 SQLite 使用某种扩展，您也可以尝试[**SQLite Encryption Extension (SEE)**](http://www.hwaci.com/sw/sqlite/see.html)或[**SQLite Crypt**](http://sqlite-crypt.com/index.htm)

**但是您可以使用 SQLite.Data**更改/设置数据库的密码，如[本文](http://sqlite.phxsoftware.com/forums/t/130.aspx)所示。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-02-20T08:48:30.827

尝试`sqlitestudio.pl`作为编辑。
对于数据库类型，`System.Data.SQLite`在连接时选择。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T05:57:59.473

不幸的是，只能从代码中添加、删除或更改 SQlite 文件中的密码。为此，您需要`System.Data.SQLite`命名空间，它将为您提供方法以及适配器和连接的东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T06:08:05.917

`sq-lite`您可以使用.net 提供程序 (System.Data.SQLite)的内置加密。试试这个：

[http://sqlite.phxsoftware.com/forums/t/130.aspx](http://sqlite.phxsoftware.com/forums/t/130.aspx)[在此处输入链接描述](http://sqlite.phxsoftware.com/forums/t/130.aspx)

**或使用：**

[SQLiteCrypt API](http://sqlite-crypt.com/documentation.htm)

# ebean - Ebean 在查询中使用 OR

> ID：12190675
> 
> 赞同：11
> 
> 时间：2012-08-30T05:56:19.230
> 
> 标签：ebean

我正在尝试进行查询，以检查用户的电子邮件或用户名是否以给定的字符串开头。在 sql 查询中，我会使用

```
name like 'queryString%' or email like 'queryString%' 
```

在 ebean 查询中，我希望编写如下内容：

```
find.where().or(like('name', 'queryString%'), like('email', 'queryString%')); 
```

问题是 or 接受一个表达式，而不是一个表达式列表，这是我在编写时得到的

```
find.where().like(...,...) 
```

据我了解，它执行这样的查询：

```
find.where().like(.., ...).like(..., ...) 
```

正在使用 AND。

如何使用 ebean 编写这样的查询？

谢谢！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-30T06:22:53.067

您的第二次尝试几乎可以，您必须在`com.avaje.ebean.Expr.like()`内部使用`or()`

```
find.where().or(
        com.avaje.ebean.Expr.like("email", email + "%"),
        com.avaje.ebean.Expr.like("name",  name + "%")
).findUnique(); 
```

当然，您可以使用导入来获得更短的代码::

```
import com.avaje.ebean.Expr;

...
find.where().or(Expr.like("email", email + "%"),Expr.like("name", name + "%")).findUnique(); 
```

检查 Javadoc 中的 API：[http ://www.avaje.org/static/javadoc/pub/com/avaje/ebean/Expr.html](http://www.avaje.org/static/javadoc/pub/com/avaje/ebean/Expr.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-12-02T18:58:52.590

请注意，您还可以通过 disjunction()、connection() 和 endJunction() 使用流体样式。

例如：

```
Query<Conversation> query = Ebean.find(Conversation.class)
  .where().eq("group.id", groupId)
  .disjunction()
    .conjunction()
      .eq("open", false).eq("participants.user.id", userId)
    .endJunction()
    .eq("open", true)
  .endJunction()
  .orderBy("whenCreated desc"); 
```

还有一个使用类型安全查询 bean 的示例，它是类似的，但使用 or()、and()、endAnd()、endOr() ... 而不是 disjunction()/conjunction() 等。

```
List<Customer> customers
  = new QCustomer()
  .billingAddress.city.equalTo("Auckland")
  .version.between(1,100)
  .billingAddress.country.equalTo(nz)
  .registered.before(new Date())
  .or()
    .id.greaterThan(1)
    .and()
      .name.icontains("Jim")
      .inactive.isTrue()
    .endAnd()
  .endOr()
  .orderBy()
    .name.asc()
    .id.desc()
  .findList(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-09T01:24:42.887

请注意，可以使用 disjunction() 以流畅的方式编写查询：

```
find.where().disjunction()
  .like("email", email + "%")
  .like("name",  name + "%")
  .findUnique(); 
```

如果有多个 disjunction() / conjunction() 那么你用`endJunction()`结束那个 OR 和 AND 组。

在示例中，只需要一个 OR 组，因此`endJunction()`不需要。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-04-30T15:36:25.013

大约超过 2 个或 LIKE，你可以试试这个......

```
where.or(Expr.contains("name", inquire.q),
                    Expr.or(Expr.contains("address", inquire.q), Expr.contains("description", inquire.q))); 
```

# ruby-on-rails - link_to 给出错误

> ID：12190676
> 
> 赞同：0
> 
> 时间：2012-08-30T05:56:19.753
> 
> 标签：ruby-on-rails, link-to

在我的`index.html.erb`

```
<p><%= link_to "log Out", :action => 'logout' %></p> 
```

在家庭控制器.rb

```
def logout
end 
```

并给我错误

> 路由错误
> 
> 没有路由匹配 {:action=>"logout", :controller=>"home"}

这也许很简单的问题。我是新来的铁路。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T06:04:44.830

请检查routes.rb中是否存在路由我似乎在控制器中添加了动作但没有在routes.rb中添加路由另一种手动添加路由到routes.rb的方法，您可以运行这样的命令

```
rails g controller home log_out 
```

然后保持 home_controller.rb 文件原样。（不要覆盖它）。此命令将在 routes.rb 中自动添加路由

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T06:01:07.923

您必须在 routes.rb 中为“注销”方法指定路由

你可以这样做：

```
resource :home do
  collection do
   get 'logout'
  end
end 
```

或者

你只需要添加

```
 get 'home/logout' 
```

# magento - 如何将产品视图页面更改为一列布局

> ID：12190678
> 
> 赞同：8
> 
> 时间：2012-08-30T05:56:27.223
> 
> 标签：magento

我是 magento 学习的新手。有人可以指导我如何将产品视图页面更改为 1 列布局。我正在使用 magento 默认主题。

谢谢

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-30T06:36:40.587

要将产品视图页面更改为 1 列布局，您需要打开

> 应用程序/设计/前端/默认/默认/布局/catalog.xml

达到以下代码：

```
<catalog_product_view translate="label">
    <label>Catalog Product View (Any)</label>
    <!-- Mage_Catalog -->
    <reference name="root">
        <action method="setTemplate"><template>page/2columns-right.phtml</template>
        </action>
    </reference> 
```

在这里您可以将 2columns-right.phtml 更改为 1column.phtml。

我们也可以使用**local.xml**（更好的方式），需要添加以下代码 -

```
<catalog_product_view>
    <reference name="root">
        <action method="setTemplate"><template>page/1column.phtml</template></action>
    </reference>
</catalog_product_view> 
```

希望它会有所帮助。

谢谢！

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-03-24T13:57:45.577

我不会推荐任何这些答案！

您的 magento 将因任何更新而中断！

当您需要更新任何 xml 布局时，唯一好的答案是编辑位于 app/design/frontend/youtheme/default/layout 中的文件 local.xml

只需添加

```
<catalog_product_view translate="label">
    <label>Catalog Product View (Any)</label>
    <!-- Mage_Catalog -->
    <reference name="root">
        <action method="setTemplate"><template>page/2columns-left.phtml</template>
        </action>
    </reference>
</catalog_product_view> 
```

你就完成了......简单而干净。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-04-13T12:25:36.357

以上所有答案都不是 Magento 方式。

在主题的 local.xml 文件中添加：

```
<catalog_product_view>
    <reference name="root">
        <action method="setTemplate"><template>page/1column.phtml</template></action>
    </reference>
</catalog_product_view> 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-08-30T18:49:49.967

如果需要，一种更简单的方法是将产品的自定义布局设置为 1 列

脚步：

1.  转到管理->目录->管理产品

2.  选择所有产品并从网格右上角的操作下拉列表中选择更新属性，然后单击提交。

3.  现在搜索页面布局下拉菜单并设置所需的布局（1列）

如果您需要为每个产品执行此操作，那么在内部一次更新所有产品只需要编辑每个产品，并在“设计”选项卡中将“页面布局”设置为所需的任何内容。

就是这样

希望这可以帮助！！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-05-09T07:53:03.673

```
public function indexAction(){

    //Get current layout state 
    $this->loadLayout();

    $this->getLayout()->getBlock('root')->setTemplate('page/1column.phtml');

    $block = $this->getLayout()->createBlock(
        'Mage_Core_Block_Template',
        'thecardshop_customisecard_viewer',
        array('template' => 'customisecard/viewer.phtml')
    );

    $this->getLayout()->getBlock('content')->insert($block);

    $this->renderLayout();
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-10-21T06:51:16.900

最简单快速的方法是

```
UPDATE `catalog_product_entity_varchar` SET `value` = 'one_column'
WHERE `value` = 'two_columns_left' 
```

# jquery - 如何验证 jquery 中的子网格行？

> ID：12190680
> 
> 赞同：1
> 
> 时间：2012-08-30T05:56:30.943
> 
> 标签：jquery, jqgrid, jquery-validate, dialog, subgrid

我正在使用子网格。我将单击子网格中的“添加会话”链接，它将向子网格添加行。我可以添加 n 行。现在我需要验证子网格中每个添加的行。我怎么能这样做？

我在下面粘贴我的代码...

```
//This is my jqgrid code:

function loadSubGrid(subgrid_id, row_id) {

   DayID = $('#DayEvents').getCell(row_id, 'DayID');
    var pager_id;
    subgrid_table_id = subgrid_id + "_t";
    pager_id = "p_" + subgrid_table_id;
    $("#" + subgrid_id).html("<table id='" + subgrid_table_id + "' class='scroll'></table><a href=# id='AddSession' OnClick='addRow(\"" + subgrid_table_id + "\");'>add session</a><div id='" + pager_id + "' class='scroll'></div>");

    jQuery("#" + subgrid_table_id).jqGrid({
        url: 'Event.asmx/GetSubGridDay',
        datatype: 'json',
        mtype: 'POST',
        cellEdit: false,
        cellsubmit: 'clientarray',
        onCellSelect: GridCellClick,
        ajaxGridOptions: { contentType: 'application/json; charset=utf-8' },
        serializeGridData: PrepareGridPostData,
        jsonReader: { repeatitems: false, root: "d.rows", page: "d.page", total: "d.total", records: "d.records" },
        colNames: ['sessionId', 'session', 'start time', 'end time', 'Speaker'],
        colModel:
                          [{ name: 'SessionId', index: 'SessionId', width: 90, formatter: 'text', align: 'center', hidden: true },
                          { name: 'SessionName', index: 'SessionName', width: 90, formatter: 'text', align: 'center', edittype: 'text', editable: true, editoptions: { size: 10, maxlength: 15, dataEvents: [{ type: 'change', fn: GetRemainingEffort }, { type: 'focus', fn: clearCellValues }, { type: 'blur', fn: resetCellValues}]} },
                          { name: 'StartTime', index: 'StartTime', width: 90, formatter: 'text', align: 'center', edittype: 'text', editable: true, editoptions: { size: 10, maxlength: 15, dataInit: function(element) {
                              $(element).timepicker({})
                          }, dataEvents: [{ type: 'change', fn: GetRemainingEffort }, { type: 'focus', fn: clearCellValues }, { type: 'blur', fn: resetCellValues}]}
                          },
                          { name: 'EndTime', index: 'EndTime', width: 90, formatter: 'text', align: 'center', edittype: 'text', editable: true, editoptions: { size: 10, maxlength: 15, dataInit: function(element) {
                              $(element).timepicker({})
                          }, dataEvents: [{ type: 'change', fn: GetRemainingEffort }, { type: 'focus', fn: clearCellValues }, { type: 'blur', fn: resetCellValues}]}
                          },

                            { name: 'Speaker', index: 'Speaker', width: 300, editable: false, formatter: 'showlink', formatoptions: { baseLinkUrl: 'javascript:', showAction: "Speaker('", addParam: "');"} },

                          ],
        rowNum: 10,
        height: 'auto',
        autowidth: true
    });

} 
```

现在在上面代码的这一行中，它调用了一个函数来打开一个对话框..

```
 { name: 'Speaker', index: 'Speaker', width: 300, editable: false, formatter: 'showlink', formatoptions: { baseLinkUrl: 'javascript:', showAction: "Speaker('", addParam: "');"} }, 
```

打开对话框的功能如下：

```
function Speaker() {

        $("#SpeakerPopUp").dialog('open');

        $("#SpeakerPopUp").dialog(
{

    autoOpen: true,
    height: 500,
    width: 500,
    modal: true,
    title: 'Speakers List',
    open: gridData,
    buttons: {
        'cancel': function CancelCheck() { $(this).dialog('close'); },
        'Save': SpeakerSelectionSave
    }
});
    }

} 
```

现在我需要的是，如果该子网格行中的任何一列为空，它不应该打开对话框..请帮帮我..希望我清楚地解释了我的需要..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T08:56:27.710

只需在 $("#SpeakerPopUp").dialog('open'); 之前的函数扬声器中插入以下行

```
 if (_lastSelRow == null) { alert("enter all"); }
            else {

                alert("test" + _lastSelRow);
                if (($('#' + _lastSelRow + '_SessionName').val() == "") || ($('#' + _lastSelRow + '_StartTime').val() == "") || ($('#' + _lastSelRow + 'EndTime').val() == "")) 
else
{
/// 
```

# ruby - 部署时权限被拒绝

> ID：12190685
> 
> 赞同：3
> 
> 时间：2012-08-30T05:56:54.827
> 
> 标签：ruby, ruby-on-rails-3, capistrano, vlad-deployer

部署时出现以下错误。

部署命令：

```
bundle exec rake current vlad:deploy 
```

错误：

```
bash: script/delayed_delta: Permission denied
rake aborted!
execution failed with status 126: ssh deploy@something.com source ~/.rvm/scripts/rvm && rvm rvmrc trust /home/deploy/something.com.com/current && cd /home/deploy/something.com.com/current && rvm use ruby-1.9.2-p0@something && RAILS_ENV=current script/delayed_delta stop 
```

可能是什么问题？

**更新：**

当我在 script/delayed_delta 上运行以下命令时，权限已更改，但仍然出现错误。

```
chmod +x script/delayed_delta 
```

错误：

```
bash: script/delayed_job: Permission denied rake aborted! execution failed with status 126: ssh deploy@something.com source ~/.rvm/scripts/rvm && rvm rvmrc trust /home/deploy/something.com/current && cd /home/deploy/something.com/current && rvm use ruby-1.9.2-p0@something && if [[ -f script/delayed_job ]] ; then RAILS_ENV=current script/delayed_job stop ; fi 
```

脚本目录中的权限是：

```
-rwxrwxr-x 1 delayed_delta
-rw-rw-r-- 1 delayed_job
-rw-rw-r-- 1 rails 
```

# php - PHP-Mysql使用闭包表以层次结构存储和显示数据

> ID：12190686
> 
> 赞同：0
> 
> 时间：2012-08-30T05:56:54.800
> 
> 标签：php, mysql

这是我需要显示数据的方式：

```
Electronics        main heading
      Mobile        category
         Galaxy s   sub category 
```

我正在使用三个表：主标题、类别和子类别。每个都有一个外键。

我想知道哪种方法是显示此类数据的有效方法。我正在阅读这些方法：邻接表、路径枚举、嵌套集、闭包表。

你能否指出一个很好的例子来实现这一点？

加入后，这就是我的桌子的样子

```
1\. Electronics mobile Galaxy s

   $x = "";
   $z = "";
    while()
     { 
   if($x != $mainheading)
     {
            $y =    $row['mainheading'];
       $x = $y;
      }
    if($y != $category)
       {
              $s =    $row['category'];
             $z = $s;

       }
   } 
```

**数据库结构**

**主标题** sno 主键 mainheading

**类别**

sno primartkey msno 外键类别

**子项**

sno 主键 csno 外键子项

我在三个表上使用连接来形成上面

电子手机 Galaxy s

**HTML**

```
 <div> Main Heading <div> </div>
        </div>
        <div><second opens>
        <div><third close>
       <h3> Category</h3>

        <div>
        <p>Sub item</p> </div>
        </div><third close?
       </div><second close> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T06:57:35.927

试试这个

```
while($row)
{
 if($x != $mainheading)
  {
    $y =    $row['mainheading'];
    $x = $y;
   echo "<div>"; echo $x; echo "<div>";
  }
   if($y != $category)
   {
      $s = $row['category'];
      $z = $s;
     echo "<div>"; echo $z; echo "<div>"; 
   }

  and so on...... 
} 
```

# authentication - 如果 login_check 失败，则返回 503 Service Unavailable 状态 - symfony2

> ID：12190691
> 
> 赞同：1
> 
> 时间：2012-08-30T05:57:47.007
> 
> 标签：authentication, symfony, firewall

我正在开发一个使用 Symfony2 作为框架的网络应用程序，用户需要登录才能使用其余的服务。我正在使用 symfony 的防火墙对用户进行身份验证。

防火墙代码是

```
firewalls:
    dev:
        pattern:  ^/(_(profiler|wdt)|css|images|js)/
        security: false

    login:
        pattern:  ^/login$
        security: false

    secured_area:
        pattern:    ^/
        form_login: ~
        logout: ~ 
```

控制器代码是

```
public function indexAction()
{
    return $this->redirect($this->generateUrl('index_search'));
}

public function loginAction() {

    $request = $this->getRequest();
    $session = $request->getSession();

    // get the login error if there is one
    if ($request->attributes->has(SecurityContext::AUTHENTICATION_ERROR)) {
        $error = $request->attributes->get(SecurityContext::AUTHENTICATION_ERROR);
    } else {
        $error = $session->get(SecurityContext::AUTHENTICATION_ERROR);
        $session->remove(SecurityContext::AUTHENTICATION_ERROR);
    }

    return $this->render('IsBeagleBundle:Auth:login.html.php', array(
        // last username entered by the user
        'last_username' => $session->get(SecurityContext::LAST_USERNAME),
        'error'         => $error,
    ));
} 
```

路线是

```
$collection->add('index', new Route('/', array(
    '_controller' => 'IsBeagleBundle:Auth:index',
)));

$collection->add('login', new Route('/login', array(
    '_controller' => 'IsBeagleBundle:Auth:login',
)));
$collection->add('login_check', new Route('/login_check', array())); 
```

我面临的问题是

如果防火墙验证通过，重定向工作正常并进入搜索页面，但如果验证失败，它会返回`503 Service Unavailable`状态，它应该再次进入登录页面。

但是，如果我刷新空白页面，则会显示登录页面。

谁能弄清楚我做错了什么？

**编辑 1 - 输出**

![在此处输入图像描述](../Images/7b30295bf431b1d24c3fea1d311d8d80.png)

**编辑 2**

如果我在前端控制器上注释掉以下行`app.php`，

```
$kernel = new AppCache($kernel); 
```

然后返回的状态变为`200`，但等待时间较长且响应为空。我想出的另一件事是，如果我尝试在登录控制器中打印 symfony 会话变量

```
$request = $this->getRequest();
$session = $request->getSession();

echo '<pre>';
print_r($session);
echo '</pre>'; 
```

它需要太多的时间和记忆，而且永远不会结束。这会导致浏览器冻结。我找不到原因。

***PS：我使用的是 symfony 标准发行版***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T06:37:50.040

尝试`$`从`^/login$`模式中删除以匹配以 . 开头的所有内容`/login`。

# php - 按日期划分的最佳方法视图

> ID：12190696
> 
> 赞同：0
> 
> 时间：2012-08-30T05:58:15.573
> 
> 标签：php

我正在尝试为我的网站制作视图系统。

我的 MySQL 数据库中有 770 行文章，我正在尝试创建一个视图系统，以了解哪篇文章在何时获得了最多的视图。（今天、3 天前、本周、本月）。

我试图在 MySQL 数据库中做这样的事情：

表：意见

```
ID  articleID   date 
```

但是我不知道怎么总结？如果我要添加“视图”列，那将无济于事，因为我必须一直更改日期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T06:01:38.530

这是您的任何视图的代码

```
CREATE VIEW purpose AS
SELECT 
    articleID, 
    COUNT(articleID) as view_count 
FROM views 
WHERE date_condition_depending_on_purpose 
GROUP BY articleID 
```

**articleID 上的PS**索引至关重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T06:01:55.897

所有文章：

```
SELECT
    COUNT(*) AS number,
    articleID
FROM
    views
GROUP BY
    articleID
ORDER BY
    number DESC 
```

仅限 2012 年：

```
SELECT
    COUNT(*) AS number,
    articleID
FROM
    views
WHERE
    YEAR(date) = 2012
GROUP BY
    articleID
ORDER BY
    number DESC 
```

对于每个月的特定文章：

```
SELECT
    COUNT(*) AS number,
    MONTH(date) AS stats_month,
    YEAR(date) AS stats_year
FROM
    views
GROUP BY
    stats_month,
    stats_year
ORDER BY
    number DESC 
```

# php - 如何在 Rails 和 Zend Framework 之间共享登录的用户会话？

> ID：12190699
> 
> 赞同：1
> 
> 时间：2012-08-30T05:58:40.267
> 
> 标签：php, ruby-on-rails, ruby, zend-framework, devise

我正在尝试将 Rails 应用程序添加为 PHP Zend Framework 应用程序的子目录。我已将 Apache 配置为默认使用 PHP 应用程序，并且任何请求`/myrailsapp`都通过 Rails 应用程序。现在唯一的问题是共享会话。我知道我需要开始将会话数据存储在数据库中，以便两个应用程序都可以访问相同的会话信息。

那么如何使用 Devise 在 Zend Framework 和 Rails 中配置这些东西，以便登录的用户可以在应用程序之间无缝转换？

# mysql - 如何在 MySQL 中按日期分组？

> ID：12190700
> 
> 赞同：0
> 
> 时间：2012-08-30T05:58:43.030
> 
> 标签：mysql, date

以下 MySQL 查询按用户获取不同日期的所有周数据：

```
SELECT user_id,
       CONCAT(follow_up_date, ' - ', follow_up_date + INTERVAL 6 day) AS week,
       GROUP_CONCAT(follow_up_date)
FROM   feedback_2
WHERE  follow_up_date > ''
GROUP  BY WEEK(follow_up_date),
          user_id 
```

输出：

```
---------------------------------------------------------------
user_id |         week           | group_concat(follow_up_date)|
---------------------------------------------------------------
4        2012-08-28 - 2012-09-03 | 2012-08-28,2012-08-28,2012-08-29
14       2012-08-28 - 2012-09-03 | 2012-08-28 
```

但我的要求是，如何为同一用户分隔不同的日期。

```
---------------------------------------------------------------
user_id |         week           | group_concat(follow_up_date)|
---------------------------------------------------------------
4        2012-08-28 - 2012-09-03 | 2012-08-28,2012-08-28
4        2012-08-28 - 2012-09-03 | 2012-08-29
14       2012-08-28 - 2012-09-03 | 2012-08-28 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T06:37:32.723

```
SELECT  `user_id`, 
        CONCAT(`follow_up_date`, ' - ', `follow_up_date` + INTERVAL 6 DAY) AS f_week, 
        GROUP_CONCAT(`follow_up_date`) AS c_date
FROM feedback_2 
WHERE `follow_up_date` > ''
GROUP BY f_week, `user_id`
ORDER BY  `user_id`, f_week 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T06:16:04.557

未测试，但您可以尝试：

```
SELECT user_id,
       _CONCAT(DATE_SUB(follow_up_date, INTERVAL _DAYOFWEEK(follow_up_date)-3
                                        day),
       ' - ', DATE_SUB(follow_up_date, INTERVAL _DAYOFWEEK(follow_up_date)-3 day
              )
       + INTERVAL 6 day) AS week,
       GROUP_CONCAT(follow_up_date)
FROM   feedback_2
WHERE  follow_up_date > ''
GROUP  BY WEEK(follow_up_date) 
```

请删除`_`表达式中部分单词开头的字符，以便查询正确。

# android - Android TableLayout 对齐方式

> ID：12190703
> 
> 赞同：-1
> 
> 时间：2012-08-30T05:58:59.527
> 
> 标签：android, alignment, android-tablelayout

我有这样的布局 XML。这是在LinearLayout里面。

```
 <TableLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
        <TableRow
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:stretchColumns="1"
            android:background="@android:color/background_dark">

                <TextView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text=" Hello world"
                android:textSize="20dp"
                android:layout_gravity="left"
                android:padding="2dp"
                android:background="#009900"
                android:textColor="@android:color/white"/>

                <TextView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text=" v1.0"
                android:textSize="20dp"
                android:padding="2dp"
                android:layout_gravity="right"
                android:background="#009900"
                android:textColor="@android:color/white"/>
        </TableRow>     
    </TableLayout> 
```

我想显示这样的行：

```
 [ Title                     v1.0 ] 
```

但它显示如下：

```
 [ Title  v1.0                    ] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T06:02:41.907

尝试这个。

```
 <TableLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
        <TableRow
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:stretchColumns="1"
            android:background="@android:color/background_dark">

                <TextView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text=" RECSOLU Campus"
                android:textSize="20dp"
                android:layout_gravity="left"
                android:padding="2dp"
                android:layout_weight="1"
                android:background="#009900"
                android:textColor="@android:color/white"/>

                <TextView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="v1.0"
                android:gravity="right"
                android:layout_weight="1"
                android:textSize="20dp"
                android:padding="2dp"
                android:layout_gravity="right"
                android:background="#009900"
                android:textColor="@android:color/white"/>
        </TableRow>     
    </TableLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T06:01:54.417

在 TableRow 中使用[RelativeLayout ：](http://developer.android.com/reference/android/widget/RelativeLayout.html)

```
<RelativeLayout
   android:layout_width="fill_parent"
   android:layout_height="fill_parent">
        <TextView
        androidLalignParentLeft="true"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text=" RECSOLU Campus"
        android:textSize="20dp"
        android:layout_gravity="left"
        android:padding="2dp"
        android:background="#009900"
        android:textColor="@android:color/white"/>

        <TextView
        androidLalignParentRight="true"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text=" v1.0"
        android:textSize="20dp"
        android:padding="2dp"
        android:layout_gravity="right"
        android:background="#009900"
        android:textColor="@android:color/white"/>
</RelativeLAyout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T06:02:01.580

```
<TableRow
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:stretchColumns="1"
        android:background="@android:color/background_dark">
       <------- keep this in relative layout
            <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text=" RECSOLU Campus"
            android:textSize="20dp"
            android:layout_gravity="left"
            android:padding="2dp"
            android:background="#009900"
            android:textColor="@android:color/white"/>

            <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text=" v1.0"
            android:textSize="20dp"
            android:padding="2dp"
            android:layout_gravity="right"
            android:background="#009900"
            android:textColor="@android:color/white"/>
          ------ relative layout ends here>
    </TableRow> 
```

# php - Fancybox iframe 不在页面中心

> ID：12190704
> 
> 赞同：0
> 
> 时间：2012-08-30T05:59:01.697
> 
> 标签：php, iframe, fancybox

我正在使用fancybox iframe 来显示内容，但是每次滚动页面时，iframe 都不在页面的中心。我希望 Iframe 在滚动时始终位于页面中心。我正在使用这个脚本。

```
$("#various2").fancybox({
  width: 520,
  height: 550,
  autoScale: false,
  transitionIn: 'none',
  transitionOut: 'none',
  type: 'iframe',
  scrolling: 'no',
  centerOnScroll: 'true',
  autoCenter: 'true'
}); 
```

谁能帮我。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T11:20:11.310

我不确定，但是通过查看您的代码，我可以看到您已将布尔值键入为字符串-

```
$("#various2").fancybox({
  width: 520,
  height: 550,
  autoScale: false,
  transitionIn: 'none',
  transitionOut: 'none',
  type: 'iframe',
  scrolling: 'no',
  centerOnScroll: true, // and not 'true',
  autoCenter: true // and not 'true'
}); 
```

# java - NullPointerException 的 Java 异常处理

> ID：12190708
> 
> 赞同：-1
> 
> 时间：2012-08-30T05:59:10.733
> 
> 标签：java

我有以下异常：

```
Exception in thread "main" java.lang.NullPointerException
    at Studentlist.Studentlist(Studentlist.java:79)
    at Studentlist.main(Studentlist.java:38) 
```

在第 38 行：我将输入传递给getstudentsprofile。

在第 79 行：我在做：

```
int z= array1.length; 
```

如何调试此问题。我正在阅读大量记录以及它在一个地方崩溃的所有内容，但有这个例外。如何调试这个？我怎样才能看到异常发生的时间是什么值？

事实上我有：

```
catch (IOException ee)
        {
            ee.printStackTrace();
        } 
```

但没有运气。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T06:00:06.823

似乎`array1`是`null`和`NullPointerException`不是，`IOException`所以你需要抓住

```
catch (NullPointerException npe) {
            npe.printStackTrace();
} 
```

甚至最好不要让您的代码为该语句引发此条件，检查 null

```
int z = SOME_DEFAULT_VALUE;
if(arr!=null){
 z = arr.length;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T06:06:47.180

您不应该捕获 NullPointer 异常，因为它是 RunTimeException，这通常是由于您的代码中的问题在编译时没有被捕获。请查看这些讨论以获取更多详细信息。

[捕获空指针异常是代码异味吗？](https://stackoverflow.com/questions/2586290/is-catching-a-null-pointer-exception-a-code-smell)

[如果捕获空指针异常不是一个好习惯，那么捕获异常是一个好习惯吗？](https://stackoverflow.com/questions/4716353/if-catching-null-pointer-exception-is-not-a-good-practice-is-catching-exception)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T06:29:48.447

只需用`try/catch`...处理即可**。无需**使用`if`条件...

```
try{

     int z= array1.length;

 }catch(final IOException|NullPointerException ex){    

          // This Nested catch works with Java 7 and above

 } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-30T06:00:43.190

检查array1是否为空

```
if(array1 ! = null) { // you should always avoid NPEs

  int z= array1.length;
} 
```

或者

```
catch (IOException | NullPointerException e) // you can multi-catch exceptions, java7 new feature
   e.printStackTrace();
} 
```

NullPointerException 和 IOException 是不同的。按照 java 教程[学习 Exceptions](http://docs.oracle.com/javase/tutorial/essential/exceptions/)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-30T06:07:13.670

第 79 行的 array1 为空，但您不应捕获`NullPointerException`它，因为它很可能表明您的程序中存在错误。相反，您应该检查引用是否是`!= null`（如果 null 是程序中的有效值），或者如果不是，则通过例如抛出一个`InvalidArgumentException`.

```
if(array1 ! = null) { //if array1 being null is a valid value in a program
    int z= array1.length;
}
//continue with your processing 
```

或者

```
if(array1 ! = null) { //if array1 being null is not a valid value in a program
    throw new IllegalArgumentException("You should pass a not null array for processing");
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-30T06:05:43.100

array1 未初始化，这就是您得到 NullPointerException 的原因。

显然， an`IOException` **不是**`NullPointerException`它不进入 catch 块的原因。

要调试 java 程序，请使用具有内置调试功能的 IDE。您会发现 Netbeans 非常易于使用。其他像 Eclipse 和 JDeveloper 也有很好的特性。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-30T06:11:12.590

`[NullPointerException](http://www.tutorialdata.com)`发生是因为你没有初始化`array1` ，这意味着`array1`它没有指向任何内存位置。你必须像初始化 array1 `int[] arrray1 = new int[size];`

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-08-30T06:31:46.530

嘿，不要抓住 NullPointerException，这不是一个好习惯。相反，尝试解决问题。提供运行时异常以修复编程错误。在您的情况下， array1 是 NULL ，因为它没有被初始化。这样做，它应该工作。

# .net-4.0 - 从安装程序帮助程序类中访问 MSI 属性

> ID：12190714
> 
> 赞同：1
> 
> 时间：2012-08-30T06:00:13.093
> 
> 标签：.net-4.0, wix, windows-installer

我有一个扩展 System.Configuration.Install.Installer，它在我们的应用程序安装期间运行。我需要访问在 MSI 文件中设置的一些属性（例如 INSTALLDIR，以及我需要检索的一些其他路径）。有没有办法从辅助程序集中访问 MSI 属性？

值得注意的是，我们的安装程序是使用 WiX 3.5 构建的。

在此先感谢您提供任何帮助。

**编辑**这是我们目前在课堂上的代码。

```
[RunInstaller(true)]
   public class MxServeInstaller : Installer
   {
      private ServiceInstaller myServiceInstaller;
      private ServiceProcessInstaller myServiceProcessInstaller;

      public MyProductInstaller()
      {
         this.myServiceInstaller = new ServiceInstaller();
         this.myServiceInstaller.StartType = ServiceStartMode.Automatic;
         this.myServiceInstaller.ServiceName = MyProduct.SERVICE_NAME;
         this.myServiceInstaller.Description = "Provides software copy protection and token pool management services for the Mx-Suite from Company";
         this.myServiceInstaller.ServicesDependedOn = new string[] { "Crypkey License" };

         Installers.Add(this.myServiceInstaller);

         this.myServiceProcessInstaller = new ServiceProcessInstaller();
         this.myServiceProcessInstaller.Account = ServiceAccount.LocalSystem;         
         Installers.Add(this.myServiceProcessInstaller);
      }

      public override void Install(System.Collections.IDictionary stateSaver)
      {
         base.Install(stateSaver);
         ServiceController controller = new ServiceController(MyProduct.SERVICE_NAME);
         try
         {
            controller.Start();
         }
         catch( Exception ex )
         {
            string source = "My-Product Installer";
            string log = "Application";
            if (!EventLog.SourceExists(source))
               EventLog.CreateEventSource(source, log);

            EventLog eventLog = new EventLog();
            eventLog.Source = source;
            eventLog.WriteEntry(string.Format("Failed to start My-Product!{1}", ex.Message), EventLogEntryType.Error);
         }
      }
   } 
```

我计划添加的是 AfterInstall 的一个阶段，它至少需要知道安装程序中设置的 INSTALLDIR 属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:30:42.120

安装程序类自定义操作超出进程，无法直接访问 MSI 句柄和任何相关功能，例如获取/设置属性和日志记录。

解决方案是改用 Windows Installer XML Deployment Tools Foundation 自定义操作 (google WiX DTF)。对于托管代码自定义操作来说，这是一种更好的模式，并且会简单地更改托管模型并为您提供一个 Session 类以便能够与 MSI 对话。然后，您的其余代码应该适合该框。

但是，更要指出的是......我在您的自定义操作中看不到任何实际需要自定义操作的内容。您真正的问题是 Visual Studio 部署项目隐藏了 MSI 创建和启动 Windows 服务的内置功能。

See these blog articles for ideas on how to create a WiX merge module that uses the EventSource extension and ServiceInstall / ServiceControl elements to do all this work without any custom actions at all. This creates a merge module that can then be added to your Visual Studio Deployment project.

[Redemption of Visual Studio Deployment Projects](http://blog.iswix.com/2011/03/redemption-of-visual-studio-deployment.html)

[Augmenting InstallShield using Windows Installer XML - Certificates](http://blog.iswix.com/2011/01/augmenting-installshield-using-windows_19.html)

and finally why it's important that you do this:

[Zataoca: Custom actions are (generally) an admission of failure.](http://robmensching.com/blog/posts/2007/8/17/Zataoca-Custom-actions-are-generally-an-admission-of-failure)

# iphone - 旋转图像也会在 iPhone 上拉伸或缩小

> ID：12190715
> 
> 赞同：0
> 
> 时间：2012-08-30T06:00:17.740
> 
> 标签：iphone, objective-c, xcode, uiimageview, rotation

我尝试旋转我的图像：

```
UIImageView *image;
image.transform = CGAffineTransformMakeRotation(0.0175*degrees);
// 0.0175 = pi/180 = 1 degree in radians 
```

如果例如

```
degrees = 90*x // x = 1,2,3,4 
```

没关系，但是当`degrees = 45`图像突然变得很薄时，在其他情况下它也会拉伸或收缩。这可能是什么原因？

我也试过

```
CGAffineTransform transform=CGAffineTransformRotate(image.transform, degrees);
image.transform = transform; 
```

结果相似。

编辑：我也尝试过，`image.contentMode = UIViewContentModeScaleAspectFill;`但后来它变得很大

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T06:25:35.497

你设置边界和中心了吗？尝试这样，但使用您的指标：

```
 CGRect bounds = CGRectMake(0, 0, 20, 200);
    CGPoint center = CGPointMake(myrectr.origin.x + (bounds.size.width / 2.0f),
    imageViewRect.origin.y + (bounds.size.height / 2.0f) + 100.0f);

    [imageView setTransform:CGAffineTransformIdentity];

    [imageView setCenter:center];
    [imageView setBounds:bounds];

    [imageView setTransform:CGAffineTransformMakeRotation(M_PI / 4.0f)]; 
```

# python - 如何在 Pandas 中通过多级索引执行“groupby”

> ID：12190716
> 
> 赞同：9
> 
> 时间：2012-08-30T06:00:25.737
> 
> 标签：python, pandas

我有一个由（STK_ID，RPT_Date）索引的数据框“RPT”，包含每个季度的股票累计销售额：

```
 sales
STK_ID  RPT_Date
000876  20060331      798627000
        20060630     1656110000
        20060930     2719700000
        20061231     3573660000
        20070331      878415000
        20070630     2024660000
        20070930     3352630000
        20071231     4791770000
600141  20060331      270912000
        20060630      658981000
        20060930     1010270000
        20061231     1591500000
        20070331      319602000
        20070630      790670000
        20070930     1250530000
        20071231     1711240000 
```

我想通过 STK_ID 和 RPT_Yr 使用 'groupby' 计算单季度销售额，例如：`RPT.groupby('STK_ID','RPT_Yr')['sales'].transform(lambda x: x-x.shift(1))`，怎么做？

假设我可以通过`lambda x : datetime.strptime(x, '%Y%m%d').year`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-30T07:51:48.410

假设这里 RPT_Data 是一个字符串，为什么不使用 Datetime 呢？

可以使用函数进行分组，但只能在非 MultiIndex 索引上。通过重置索引来解决此问题，并将“RPT_Date”设置为索引以提取年份（注意：pandas 在 object 和 int 之间切换为“RPT_Date”的 dtype）。

```
In [135]: year = lambda x : datetime.strptime(str(x), '%Y%m%d').year

In [136]: grouped = RPT.reset_index().set_index('RPT_Date').groupby(['STK_ID', year])

In [137]: for key, df in grouped:
   .....:     print key
   .....:     print df
   .....:
(876, 2006)
          STK_ID       sales
RPT_Date
20060331     876   798627000
20060630     876  1656110000
20060930     876  2719700000
20061231     876  3573660000
(876, 2007)
          STK_ID       sales
RPT_Date
20070331     876   878415000
20070630     876  2024660000
20070930     876  3352630000
20071231     876  4791770000
(600141, 2006)
          STK_ID       sales
RPT_Date
20060331  600141   270912000
20060630  600141   658981000
20060930  600141  1010270000
20061231  600141  1591500000
(600141, 2007)
          STK_ID       sales
RPT_Date
20070331  600141   319602000
20070630  600141   790670000
20070930  600141  1250530000
20071231  600141  1711240000 
```

其他选项是使用 tmp 列

```
In [153]: RPT_tmp = RPT.reset_index()

In [154]: RPT_tmp['year'] = RPT_tmp['RPT_Date'].apply(year)

In [155]: grouped = RPT_tmp.groupby(['STK_ID', 'year']) 
```

**编辑** 重新组织你的框架使它更容易。

```
In [48]: RPT
Out[48]: 
                                  sales
STK_ID RPT_Year RPT_Quarter            
876    2006     0             798627000
                1            1656110000
                2            2719700000
                3            3573660000
       2007     0             878415000
                1            2024660000
                2            3352630000
                3            4791770000
600141 2006     0             270912000
                1             658981000
                2            1010270000
                3            1591500000
       2007     0             319602000
                1             790670000
                2            1250530000
                3            1711240000

In [49]: RPT.groupby(level=['STK_ID', 'RPT_Year'])['sales'].apply(sale_per_q)
Out[49]: 
STK_ID  RPT_Year  RPT_Quarter
876     2006      0               798627000
                  1               857483000
                  2              1063590000
                  3               853960000
        2007      0               878415000
                  1              1146245000
                  2              1327970000
                  3              1439140000
600141  2006      0               270912000
                  1               388069000
                  2               351289000
                  3               581230000
        2007      0               319602000
                  1               471068000
                  2               459860000
                  3               460710000 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-26T20:25:21.117

尝试

```
RPT['sales'].groupby([RPT['STK_ID'],RPT['RPT_Yr']]).sum() 
```

^^ 您需要引用列表中的索引。这对我有用

# windows - 使用Qt打开外部游戏应用程序

> ID：12190717
> 
> 赞同：0
> 
> 时间：2012-07-10T10:25:50.400
> 
> 标签：windows, qt

我有一个 windows qt 应用程序，我正在尝试打开一个外部游戏，但我没有成功。

应用程序位于 C:\games\Oni\Edition\ 中，名为 Oni.exe，我现在使用的代码如下：

```
void MainWindow::on_toolButton_clicked()
{
    qint64 test=1;
    if(!QProcess::startDetached("Oni.exe",QStringList(),"C:\\games\\Oni\\Edition\\",&test)){
        QMessageBox msgBox;
        msgBox.setText("Oni couln't be started!");
        msgBox.exec();
    }
} 
```

不知道是不是忘记了什么？如果我双击它，游戏运行良好。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T12:09:11.273

好吧，想通了。

刚刚替换了代码：

```
QProcess::startDetached("Oni.exe",QStringList(),"C:\\games\\Oni\\Edition\\",&test) 
```

经过

```
QProcess::startDetached("C:\\games\\Oni\\Edition\\Oni.exe",QStringList(),"C:\\games\\Oni\\Edition\\",&test) 
```

它就像一个魅力。

我之前也尝试`QProcess::startDetached("C:\\games\\Oni\\Edition\\Oni.exe");`过但没有成功，似乎我们需要始终将可执行文件的完整目录以及完整目录作为工作目录。**这**是因为似乎只直接执行文件，文件本身可能正在寻找 QT Debug 文件夹中的其他文件夹/文件，当它们位于游戏文件夹中时。这导致游戏过早退出。:)

另一种解决方案是使用 Windows 原生 api，如以下链接中指出的 user827992：[QProcess::startDetached 被 UAC 阻止（运行更新程序）](https://stackoverflow.com/questions/4526787/qprocessstartdetached-blocked-by-uac-running-an-updater)

后一种解决方案也应该适用于 UAC 问题。

# maven - GWT & Maven：应用代码格式化程序

> ID：12190725
> 
> 赞同：2
> 
> 时间：2012-08-30T06:00:55.200
> 
> 标签：maven, code-formatting

我正在做一个 Maven GWT 项目。在 maven-compile 阶段之前，我已经根据 .xml 中的用户输入或使用速度模板的其他文件生成了许多文件。我还以 XML 格式编写了自己的代码格式化程序，用于格式化 Java 代码。

我应该如何使用 maven 自动执行此操作，以便使用我的代码格式化程序对生成的 Java 文件进行格式化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T12:45:41.250

运行附加到的格式化程序`process-sources`（请参阅[此参考](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#Lifecycle_Reference)）。您可以使用 maven ant run 插件或 exec 插件，具体取决于工具的复杂性。您也可以考虑为您的工具开发自己的 Maven 插件。

# iphone - 将所有 URL 存储到一个文件中

> ID：12190727
> 
> 赞同：1
> 
> 时间：2012-08-30T06:01:04.073
> 
> 标签：iphone, ios, class, url, nsobject

我需要一些帮助来了解如何从一个类中引用以获取该类中`NSString`包含的内容。这样做的原因是我希望将我正在使用的所有 URL 存储到一个类中，以便在 URL 等发生更改的情况下，我可以将其更改为一个文件，而不是一个一个地更改它所有的课程。

知道我应该从哪里开始吗？？首先，我应该创建`NSObject`还是`NSDocument`存储 URL？然后，我真的必须创建 pushController 来将字符串内容推送到其他每个类吗？

抱歉，如果我的问题听起来很混乱，我很迷茫。先感谢您 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T06:05:20.533

只需创建 NSObject 类，然后将您的 URL 放入其中，然后访问它并在您想要的地方使用它。

在 h 文件中

```
#import <Foundation/Foundation.h>

@interface Config : NSObject {

}

//configuration section... 
extern  NSString        *SiteURL;
extern  NSString        *SiteAPIURL;

@end 
```

米

```
#import "Config.h"

@implementation Config
//live
NSString        *SiteURL                = @"http://www.yoururl.com/";
NSString        *SiteAPIURL             = @"http://www.yoururl.com/";

@end 
```

在 Prefix.pch 中只导入它`#import "Config.h"`

并在要使用的类中使用它

```
NSString *apiURLString = [NSString stringWithFormat:@"%@login.php",SiteAPIURL]; 
```

# ios - 未创建 CCTouch 边界框

> ID：12190730
> 
> 赞同：0
> 
> 时间：2012-08-30T06:01:27.273
> 
> 标签：ios, cocos2d-iphone

我正在使用 Cocos2d 在 iOS 中制作游戏。

这是我用来检查立方体是否被触摸的方法，

```
- (void)selectSpriteForTouch:(CGPoint)touchLocation {
    CubeSprite * newSprite = nil;
    for (CubeSprite *sprite in movableSprites) {
        NSLog(@"tested against sprite %i", sprite.boundingBox.origin.x);
        if (CGRectContainsPoint(sprite.boundingBox, touchLocation)) {      
            singleCube = true;
            newSprite = sprite;
            activeTag = sprite.tag;
            break;
        }
    }    
    if (newSprite != selSprite) {

        selSprite = newSprite;
    }
} 
```

但由于某种原因， sprite.boundingBox 设置不正确。

“测试精灵”日志只打印出“测试精灵 0”，这似乎不可能，因为我可以在屏幕上看到精灵。

这是我用来将立方体添加到场景中的方法，

```
-(void)addCube:(CubeSprite *)cube {
    int totalCubes = [cubes count];
    [cube setPosition:ccp(700 - (totalCubes * 50), 120)];
    [cubes addObject:cube];
    [movableSprites addObject:cube];
    [self addChild:cube];
} 
```

什么可能是错的？

提前致谢。

编辑，这是我的立方体初始化方法

```
-(id)initWithNumber:(int)number {
    if( (self=[super init])) {
        [self setTag:number];
        CCSprite* sprite = [CCSprite spriteWithFile:string];
        [self addChild:sprite];
        NSLog(@"Cube created with value of %i and with file %@", number, string);
    }
    return self;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T10:39:29.550

Xcode 没有给你一个关于不正确格式字符串的警告吗？

```
NSLog(@"tested against sprite %i", sprite.boundingBox.origin.x); 
```

`%i`表示整数值。`CGPoint`的坐标是浮点值。改为使用`%f`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T07:10:51.807

也许 CGRectContainsPoint 返回假阳性。如果禁用“break ;” 声明，它应该遍历所有的多维数据集。

有些事情可能是错误的： - 立方体的边界框太大，位置不是你想的 - 所有立方体都有相同的位置 - touchLocation 是 (0,0)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T07:05:16.543

尝试使用这个

```
 for (CubeSprite *sprite in movableSprites) {
CGRect projectileRect = [sprite boundingBox];

if (CGRectContainsPoint(projectileRect, touchLocation)) {      
            singleCube = true;
            newSprite = sprite;
            activeTag = sprite.tag;
            break;
        }
    } 
```

# objective-c - 捏缩放 - 无法在缩放时保持图像位置固定

> ID：12190733
> 
> 赞同：2
> 
> 时间：2012-08-30T06:01:32.803
> 
> 标签：objective-c, ios, xcode, zooming, pinchzoom

我是 iphone 开发的新手。我想缩放 imageview ，我正在使用以下代码，

```
- (void)viewDidLoad
{

    [super viewDidLoad];

// Do any additional setup after loading the view, typically from a nib.

    self.scrollViewOutlet.minimumZoomScale=0.5;

    self.scrollViewOutlet.maximumZoomScale=4.0;

    self.scrollViewOutlet.contentSize=self.imagetobeZoomed.image.size;

    self.scrollViewOutlet.clipsToBounds=YES;

    self.scrollViewOutlet.delegate=self;

}

-(UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView{

    return self.imagetobeZoomed;
} 
```

通过使用上面的代码，我可以缩放图像，但我的问题是我的图像在缩放时运行到左下角。那就是我无法将图像位置固定在屏幕的中心。

我希望图像位置在缩放时保持固定。对此有什么帮助吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T08:01:53.260

最后我自己找到了一个解决方案。这里是图像缩放的完整代码示例:) 这里图像位置在放大和缩小时保持固定。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    self.scrollViewOutlet.minimumZoomScale=0.5;
    self.scrollViewOutlet.maximumZoomScale=4.0;
    self.scrollViewOutlet.contentSize=CGSizeMake(self.imagetobeZoomed.frame.size.width,       self.imagetobeZoomed.frame.size.height);
    self.scrollViewOutlet.clipsToBounds=YES;
    self.scrollViewOutlet.delegate=self;
}

-(UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView
{
    return self.imagetobeZoomed;
}

-(void)scrollViewDidZoom:(UIScrollView *)scrollView
{   
    UIView *subView=[scrollView.subviews objectAtIndex:0];
    CGFloat offsetX = (scrollView.bounds.size.width > scrollView.contentSize.width)? 
    (scrollView.bounds.size.width - scrollView.contentSize.width) * 0.5 : 0.0;
    CGFloat offsetY = (scrollView.bounds.size.height > scrollView.contentSize.height)? 
(scrollView.bounds.size.height - scrollView.contentSize.height) * 0.5 : 0.0;
     subView.center = CGPointMake(scrollView.contentSize.width * 0.5 + offsetX, 
                             scrollView.contentSize.height * 0.5 + offsetY);

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T06:12:27.227

试试[NYOBetterZoom 吧](https://github.com/nyoron/NYOBetterZoom)。这肯定是你的答案。:)

# java - RMI 小程序在随机端口上发出请求并因此被阻止

> ID：12190735
> 
> 赞同：1
> 
> 时间：2012-08-30T06:01:39.653
> 
> 标签：java, random, applet, rmi

我已经在本地 ubuntu srver 上成功设置了 RMI 系统。注册表端口 1099 和 1100 上的远程对象导出（通过调用 super(1100) 修复）现在我正试图通过互联网使其在具有公共 IP 的 Ubuntu 上工作。我可以使用公共 ip 正确绑定服务。但是客户端小程序正在尝试以随机端口连接到 ubuntu 服务器。下面是客户端小程序抛出的错误：

```
// Exception  
network: Connecting public-ip:1100 with proxy=DIRECT
network: Connecting public-ip/cgi-bin/java-rmi.cgi?forward=1099 with proxy=DIRECT
network: Connecting public-ip:3733 with proxy=DIRECT
network: Connecting public-ip:3721 with proxy=DIRECT 
 //   
java.rmi.ConnectException: 
Connection refused to host: public-ip; nested exception is: java.net.ConnectException: Connection refused: connect at sun.rmi.transport.tcp.TCPEndpoint.newSocket(Unknown Source)Source) at java.net.AbstractPlainSocketImpl.connectToAddress(Unknown Source) 
... 
```

我在服务器上只打开了 2 个端口，即 1099（注册表）和 1100（导出）。如何修复小程序请求中的端口，使其始终在同一个开放端口上连接服务器？

另一个问题。由于我在公共 IP 上绑定了服务，即 //public-ip:1099/ServiceName，因此在服务器上运行以向客户发送消息的作业无法向 RMI 服务发出请求。public-ip URL 在同一台机器上不起作用，即服务器。你认为我应该使用固定套接字工厂吗？如果是这样，请给我代码片段并指导我如何设置它。

```
//Exception   
java.rmi.ConnectException: Connection refused to host: public-ip; nested exception is: 
    java.net.ConnectException: Connection refused
    at sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:619)
    at sun.rmi.transport.tcp.TCPChannel.createConnection(TCPChannel.java:216)
    at sun.rmi.transport.tcp.TCPChannel.newConnection(TCPChannel.java:202)
    at sun.rmi.server.UnicastRef.invoke(UnicastRef.java:128)
    at java.rmi.server.RemoteObjectInvocationHandler.invokeRemoteMethod(RemoteObjectInvocationHandler.java:194)
    at java.rmi.server.RemoteObjectInvocationHandler.invoke(RemoteObjectInvocationHandler.java:148)
    at $Proxy5.getUserID(Unknown Source)
    at rmi.source.xxxxxx$JobScheduler.run(xxxxServerImpl.java:293)
    at java.util.TimerThread.mainLoop(Timer.java:555)
    at java.util.TimerThread.run(Timer.java:505)
Caused by: java.net.ConnectException: Connection refused
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:337)
    at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:198)
    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:180)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391)
    at java.net.Socket.connect(Socket.java:579)
    at java.net.Socket.connect(Socket.java:528)
    at java.net.Socket.<init>(Socket.java:425)
    at java.net.Socket.<init>(Socket.java:208)
    at sun.rmi.transport.proxy.RMIDirectSocketFactory.createSocket(RMIDirectSocketFactory.java:40)
    at sun.rmi.transport.proxy.RMIMasterSocketFactory.createSocket(RMIMasterSocketFactory.java:146)
    at sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:613)
    ... 9 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T09:54:03.520

> 如何修复小程序请求中的端口，使其始终在同一个开放端口上连接服务器？

在固定端口号上导出远程对象。

> 你认为我应该使用固定插座工厂吗？

不，您需要设置`java.rmi.server.hostname`系统属性。

# iphone - Iphone：如何验证消息验证码（Mac）

> ID：12190738
> 
> 赞同：5
> 
> 时间：2012-08-30T06:01:44.067
> 
> 标签：iphone, objective-c, authentication, aes, code-signing

我有一个这样的Java代码：

```
public static byte[] generateMac(byte[] key, byte[] cipherText,int offset,int length,int mac_size_bits)
{
    byte[] result = null;
    KeyParameter keyParam = null;
    try {
        keyParam = new KeyParameter(key);
        CBCBlockCipherMac blockCipherMac = new CBCBlockCipherMac(new AESEngine(),mac_size_bits);
        result = new byte[blockCipherMac.getMacSize()];
        blockCipherMac.init(keyParam);
        blockCipherMac.update(cipherText, offset, length);
        blockCipherMac.doFinal(result, 0);
    } catch (Exception e) {
        // System.out.println(e);
        return null;
    } finally {
        keyParam = null;
    }
    return result;
} 
```

在 iPhone 上，我这样涂鸦：

`- (NSData *)generateMac:(NSData *)key cipherText:(NSData *)cipherText offset:(int)offset length:(int)length mac_size_bits:(int)mac_size_bits`

我的问题是，我应该使用哪种方法`CBCBlockCipherMac`，`keyparameters`在 iPhone 中有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T23:52:29.453

它的 MAC 加密——AFAIK 在 IOS 上没有一次性替换/等效项

请参阅原始文档[docs](http://www.cs.berkeley.edu/~jonah/bc/org/bouncycastle/crypto/macs/CBCBlockCipherMac.html) 和 wikipedia [wiki](http://en.wikipedia.org/wiki/CBC-MAC)

了解算法的工作原理，然后使用 CommonCrypto 进行复制

——抱歉没有更好的主意

# asp.net-mvc - 使用 Linq 查询创建超链接

> ID：12190742
> 
> 赞同：0
> 
> 时间：2012-08-30T06:02:03.123
> 
> 标签：asp.net-mvc, linq, hyperlink

```
return (from doc in db.setupDocuments
                where doc.ParentDocumentID == parentId
                select new TreeViewItem
                {
                    Text = doc.DocumentTitle,
                    Value = SqlFunctions.StringConvert((decimal)doc.DocumentID),
                    LoadOnDemand = doc.setupDocuments1.Count > 0,
                    Enabled = true,
                    RouteName = 
                    //Url = "/Settings/SelectedItem?text=" + doc.DocumentTitle
                }); 
```

嗨朋友们，我想在从数据库中检索到的每个对象上创建一个链接。我想将它转发到对象标题名称的 Action（例如 doc.DocumentTitle）和静态控制器“设置”。但不要使用注释行中给出的链接。当我使用 ActionName = doc.DocumentTitle,
ControllerName = "Settings" 时它不起作用......任何建议。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T07:04:28.067

您应该使用 UrlHelper 在 ASP.NET MVC 应用程序中生成链接。例如，控制器具有您可以使用的[Url](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.url.aspx)属性：

```
public ActionResult SomeAction()
{
    ...

    from doc in db.setupDocuments
    where doc.ParentDocumentID == parentId
    select new TreeViewItem
    {
        Text = doc.DocumentTitle,
        Value = SqlFunctions.StringConvert((decimal)doc.DocumentID),
        LoadOnDemand = doc.setupDocuments1.Count > 0,
        Enabled = true,
        RouteName = Url.Action("SelectedItem", "Settings", new { text = doc.DocumentTitle })
    });

    ...
} 
```

如果您需要在其他类中使用它，您可以将 UrlHelper 的实例从控制器传递给它。

# android - Android：从 AmazonS3 下载文件时出现异常

> ID：12190744
> 
> 赞同：3
> 
> 时间：2012-08-30T06:02:09.037
> 
> 标签：android, amazon-s3, download

在我的 Android 应用程序中，当我尝试从 Amazon S3 下载图像文件时，它给了我异常

这是例外：

```
08-30 11:20:34.157: W/System.err(6519): android.os.NetworkOnMainThreadException
08-30 11:20:34.157: W/System.err(6519): at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
08-30 11:20:34.157: W/System.err(6519):     at java.net.InetAddress.lookupHostByName(InetAddress.java:391)
08-30 11:20:34.157: W/System.err(6519):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
08-30 11:20:34.157: W/System.err(6519):     at java.net.InetAddress.getAllByName(InetAddress.java:220)
08-30 11:20:34.157: W/System.err(6519):     at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137)
08-30 11:20:34.168: W/System.err(6519):     at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
08-30 11:20:34.168: W/System.err(6519):     at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
08-30 11:20:34.168: W/System.err(6519):     at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
08-30 11:20:34.177: W/System.err(6519):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
08-30 11:20:34.177: W/System.err(6519):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
08-30 11:20:34.177: W/System.err(6519):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
08-30 11:20:34.177: W/System.err(6519):     at com.amazonaws.http.AmazonHttpClient.executeHelper(AmazonHttpClient.java:285)
08-30 11:20:34.177: W/System.err(6519):     at com.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:167)
08-30 11:20:34.187: W/System.err(6519):     at com.amazonaws.services.s3.AmazonS3Client.invoke(AmazonS3Client.java:2781)
08-30 11:20:34.187: W/System.err(6519):     at com.amazonaws.services.s3.AmazonS3Client.getObject(AmazonS3Client.java:872)
08-30 11:20:34.187: W/System.err(6519):     at com.example.amazons3.AmazonS3DemoActivity.Download(AmazonS3DemoActivity.java:74)
08-30 11:20:34.187: W/System.err(6519):     at java.lang.reflect.Method.invokeNative(Native Method)
08-30 11:20:34.187: W/System.err(6519):     at java.lang.reflect.Method.invoke(Method.java:511)
08-30 11:20:34.187: W/System.err(6519):     at android.view.View$1.onClick(View.java:3039)
08-30 11:20:34.197: W/System.err(6519):     at android.view.View.performClick(View.java:3511)
08-30 11:20:34.197: W/System.err(6519):     at android.view.View$PerformClick.run(View.java:14105)
08-30 11:20:34.197: W/System.err(6519):     at android.os.Handler.handleCallback(Handler.java:605)
08-30 11:20:34.197: W/System.err(6519):     at android.os.Handler.dispatchMessage(Handler.java:92)
08-30 11:20:34.207: W/System.err(6519):     at android.os.Looper.loop(Looper.java:137)
08-30 11:20:34.207: W/System.err(6519):     at android.app.ActivityThread.main(ActivityThread.java:4424)
08-30 11:20:34.207: W/System.err(6519):     at java.lang.reflect.Method.invokeNative(Native Method)
08-30 11:20:34.207: W/System.err(6519):     at java.lang.reflect.Method.invoke(Method.java:511)
08-30 11:20:34.217: W/System.err(6519):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
08-30 11:20:34.227: W/System.err(6519):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
08-30 11:20:34.227: W/System.err(6519):     at dalvik.system.NativeStart.main(Native Method) 
```

这是我的java代码：

```
public class AmazonS3Activity extends Activity 
{
private String Tag = "Downlaod";

Button btnDownload;

Context myContext;

String product_code = "pro_code";

String bucketName = "bucketnamw";

String appDirPath = Environment.getExternalStorageDirectory().getName() +"/foldername/";

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    myContext = this;

    btnDownload = (Button) findViewById(R.id.btnDownload);      
}

public void Download(View button)
{
    try 
    {
        String imgName = product_code+"1.jpg";
        String md5Name = getMD5HasCode(product_code);

        String productCode = md5Name+".app/";

        String filePath = getFullFilePath(imgName);

        String accessKey = "accessKey";
        String secretKey = "secretKey";
        AWSCredentials credential = new BasicAWSCredentials(accessKey, secretKey);

        Log.e(Tag, "FileName : " + filePath, null);

        String strObjectKey = productCode + imgName.replace(product_code,md5Name);

        Log.e(Tag, "Object Key : " + strObjectKey, null);

        GetObjectRequest objRequest = new GetObjectRequest(bucketName,strObjectKey);

        AmazonS3Client myS3Client = new AmazonS3Client(credential);

        S3Object s3Object = myS3Client.getObject(objRequest);

        long fileSize = s3Object.getObjectMetadata().getContentLength();
        final InputStream input = s3Object.getObjectContent();
        final FileOutputStream fos = new FileOutputStream(filePath);

        long total = 0;
        int len=0;

        byte[] buf = new byte[1024];

        while((len = input.read(buf)) > 0)
        {
            fos.write(buf,0,len);

            total = total + len;
        }

        if(len == -1 && total==fileSize)
        {
            Thread.currentThread().interrupt();

            input.close();
            fos.close();

        }

    } 
    catch (Exception e) 
    {
        e.printStackTrace();
        Log.e(Tag, "Error Key : " + e.getMessage(), null);
    }

}

public String getMD5HasCode(String strMessage)
{
    try
    {
        MessageDigest messageDigest = MessageDigest.getInstance("MD5");
        byte[] messageDigestBytes = messageDigest.digest(strMessage.getBytes());
        BigInteger hasNumber = new BigInteger(1,messageDigestBytes);
        String md5 = hasNumber.toString(16);

        while(md5.length()<32)
        {
            md5 = "0" + md5;
        }

        return md5;
    }
    catch (Exception ex) 
    {
        Toast.makeText(myContext, "ERROR in HasCode : "+ex.toString(), Toast.LENGTH_SHORT).show();  
        return null;
    }
}

public String getFullFilePath(String filename)
{
    File dir = new File(appDirPath);
    if(!dir.exists())
    {
        dir.mkdir();
    }
    return appDirPath+filename;
}
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T06:06:02.407

截至[此处](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)找到的文档。

> 当应用程序尝试在其主线程上执行网络操作时，会引发 NetworkOnMainThreadException。
> 
> 这仅针对面向 Honeycomb SDK 或更高版本的应用程序抛出。允许以早期 SDK 版本为目标的应用程序在其主事件循环线程上进行网络连接，但非常不鼓励这样做。

该解决方案可以使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)进行网络相关操作。

# c# - 执行 lambda 内联的最有效方法是什么？

> ID：12190748
> 
> 赞同：1
> 
> 时间：2012-08-30T06:02:24.500
> 
> 标签：c#, optimization, code-generation

我写了一个解析器生成器，它有这样的表达式：

```
a = f:"foo" "bar" { /* your code here */ } 
```

经过一段时间后，它会生成如下所示的代码：

```
r0 = this.ReturnHelper<string>(cursor, cursor, () => /* your code here */); 
```

这是完美的，因为用户可以指定一个表达式，比如`f`只返回一个值，或者他们可以添加一组额外的花括号并编写一个方法。到目前为止，一切都很好。

现在，我也允许这样的断言：

```
a = w:word !{ w == "disallowed" } 
```

目前编译成这样的东西：

```
var w = this.ParseWord(...).Value;

...

if (!( w == "disallowed" ))
{
    r2 = new ParseResult<string>(cursor, cursor, string.Empty);
} 
```

我希望断言支持 ReturnHelper 提供的相同方法体选项，但是拥有一个`bool AssertionHelper(Func<bool> assertion)`只调用谓词的方法似乎效率低下。

我在想这`new Func<bool>(() => /* your code here */)()`会起作用，但我不确定它是最有效的。

有任何想法吗？

**编辑**

~~怎么样`((Func<bool>)(() => /* code */))()`？这是否避免了分配？~~ 不，它会生成与上述版本相同的 IL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T06:08:07.117

目前尚不清楚为什么您需要`Func<bool>`明确提及。为什么不只是：

```
this.AssertionHelper<string>(cursor, cursor, () => !( w == "disallowed" )) 
```

? 假设它将是一个没有参数的单个表达式并且它是 type `bool`，那应该没问题。

如果它需要一个参数`w`，只需将其更改为：

```
this.AssertionHelper<string>(cursor, cursor, w => !( w == "disallowed" )) 
```

我相信 C# 编译器的 MS 实现将避免在每次调用 this 时创建一个新的委托实例 - 但真的，这有关系吗？您是否分析过您的应用程序以检查这是否真的对性能造成了重大影响？如果你有，那很好——我当然已经看到了一些有趣的数据，这些数据围绕着*一些*代表微优化可以产生影响的情况——但在我发现这是一个实际问题之前我不会担心它。

# javascript - Javascript异步成功函数-互斥锁

> ID：12190749
> 
> 赞同：0
> 
> 时间：2012-08-30T06:02:28.303
> 
> 标签：javascript, ajax, mutex

考虑以下情况：

为了在后端处理大量工作，我将数据发送到接口并等待结果数据返回。因此，ajax 调用非常完美。因为不知道以什么顺序接收结果，并且我需要按特定顺序显示结果*才能*显示任何内容，如果所有发送的任务都正确返回，我将只调用一个函数。这可以通过一个简单的（减少的，不精确的）信号量变量来完成，该变量计算发送了多少任务。

```
 var tasks = 0;

    do {
    // things to prepare
    tasks++;

    $.post("foo.php",data, function(data) {
    tasks--;
    foo(data); 
});

    }while(thereIsMore);

    foo(data) {

    // push data to array
    // sort the array

    if(tasks == 0)
     processResults(array);

    } 
```

Javascript 被称为单任务，而不是多任务。我真的可以说，在访问数组和任务计数器时不可能有任何互斥的情况，因为它永远不会发生？我对异步行为有点困惑，可能会想到可以给出赛车情况的场景？

一个例子（我的理解是）：

3 在非常短的时间内发送和接收的任务。因此，所有响应都以一种调度方式处理。任务 1 已检查（如果任务 == 0）并且它是错误的。任务 2 在检查任务之前暂停一条指令，任务 3 现在作为成功处理程序执行。任务 3 现在减少任务，其值为 0。任务 3 暂停，任务 2 恢复。任务 2 检查 if(tasks==0) 和地狱是的......它是零。它开始处理，但并非所有数据都在数组中并已排序。

我对您的意见或知识非常感兴趣，如果这完全是不可能发生的疯狂的事情。请分享您的知识:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T06:14:34.520

一次只能运行一个 ajax 响应函数，并且它将在运行下一个之前运行完成。您不必担心同时访问您的 javascript 变量 - 它不会发生。浏览器中的 Javascript 是真正的单线程（Web Workers 除外，但这不是我们在这里讨论的内容）。

Javascript 使用事件队列。当像 ajax 调用这样的异步操作完成时，它会在事件队列中放入一个条目。如果当前没有 javascript 正在执行，则立即触发该事件（并调用 ajax 回调）。如果某些 javascript 当前正在执行，它只会继续执行。当 javascript 完成一个线程的执行时，它会检查事件队列中是否还有其他东西在等待。如果有，它会处理该事件。这与鼠标事件、键盘事件、计时器事件、ajax 完成事件等的工作方式相同。

仅当当前执行线程完成时才处理下一个事件。

如果您想知道所有 ajax 调用何时完成，您可以像在示例代码中一样记录到目前为止已完成的 ajax 调用数量。在每个完成函数中，您更改完成计数并比较其值以查看是否全部完成。如果数字表明所有这些都已完成，那么您可以进行最后的操作。如果它们还没有全部完成，那么您存储数据并且什么都不做，因为最后一个成功处理程序将看到它们都已完成并启动您的最终操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T06:31:06.240

您也可以只使用带有延迟的 JQuery 的“ [when() ”方法。](http://api.jquery.com/jQuery.when/)

...或者，Underscore 的“ [after()](http://underscorejs.org/#after) ”函数。

这两种方法都提供了一种非常简单的方法来跟踪多个异步请求何时返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-17T08:48:24.540

这样的竞速条件永远不会出现在 javascript 中。javascript中有一个叫做[Run-to-Completion](https://developer.mozilla.org/en-US/docs/Web/JavaScript/EventLoop#.22Run-to-completion.22)的东西，它确保如果代码正在执行，它会在任何其他（异步）代码运行之前完全执行，因此不会出现并发问题。

有关更多详细信息，请参阅[为什么 javascript 中没有并发控制工具。](http://uzairfarooq.github.io/why-no-concurrency-control-tool-in-javascript/)

# ruby-on-rails - Shopify 应用登录问题

> ID：12190750
> 
> 赞同：5
> 
> 时间：2012-08-30T06:02:36.323
> 
> 标签：ruby-on-rails, shopify

我已在 Shopify 应用上从旧版身份验证切换到 oauth2 身份验证。现在，每当我从商店管理页面（我的应用程序 -> 应用程序）访问应用程序时，它总是将我重定向到登录页面，而不是直接将商店登录到应用程序（就像以前那样）。

下面是 finalize 方法中的代码。

```
if response = request.env['omniauth.auth']
  sess = ShopifyAPI::Session.new(params['shop'], response['credentials']['token'])
  ShopifyAPI::Base.activate_session(sess)
  session[:shopify] = sess
  flash[:notice] = "Logged in"
  redirect_to return_address
  session[:return_to] = nil
else
  flash[:error] = "Could not log in to Shopify store."
  redirect_to :action => 'index'
end 
```

当用户从商店管理页面访问应用程序时，请求中没有 request.env['omniauth.auth'] 并被重定向到登录页面，而当我们有旧的身份验证机制时情况并非如此。

应用网址是 www.orderlyprint-staging.herokuapp.com。您可以在测试商店中安装应用程序并尝试从测试商店的管理页面登录应用程序。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T09:14:02.957

对于最初使用 Shopify 应用程序 gem 构建的 Shopify 应用程序，并且在从旧版切换到 oAuth2 身份验证解决方案时，您需要将 Shopify 管理员链接指向身份验证操作而不是完成操作。所以你需要：

转到 Shopify 合作伙伴管理员

按编辑应用程序详细信息

更新“应用程序 URL”以指向身份验证操作。例如：www.orderlyprint-staging.herokuapp.com/login/authenticate

然后，这将提取 Shopify 发送的 shop 参数，并执行 oAuth 身份验证的初始步骤，然后重定向到 finalize 操作以完成。然后，这将自动登录用户，而无需他们手动输入他们的商店 URL。

# lync - Lync 会议 URL 到期期限

> ID：12190751
> 
> 赞同：1
> 
> 时间：2012-08-30T06:02:38.227
> 
> 标签：lync, lync-2010, lync-server-2010

我已经使用 Lync API 2010 创建了 Lync 会议 URL，现在我还想使用 Lync api 设置 Lync URL 过期时间有人可以帮我解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-25T15:21:19.400

到期期限在[ConferenceScheduleInformation](http://msdn.microsoft.com/en-us/library/microsoft.rtc.collaboration.conferencemanagement.conferencescheduleinformation_di_3_uc_ocs14mreflyncuc3cr(v=office.15).aspx)类中设置。

您可以在创建会议时指定此项，也可以使用[BeginUpdateConference](http://msdn.microsoft.com/en-us/library/hh383039(v=office.15).aspx)方法在更新后的 ConferenceSCcheduleInformation 类中更新会议。

# macos - Symfony - RuntimeException：无法写入缓存文件

> ID：12190752
> 
> 赞同：11
> 
> 时间：2012-08-30T06:02:38.807
> 
> 标签：macos, symfony, xampp

我无法正确获取权限。我正在尝试通过 XAMPP 在我的 Mac 上的本地环境中运行它。

我尝试了以下方法：

*   做脱模
*   [设置权限](http://forum.symfony-project.org/viewtopic.php?t=37645&p=124914%20Setting%20The%20Permissions)
*   通过清除缓存`php app/console cache:clear`

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-30T06:42:00.383

```
rm -rf app/cache/*
rm -rf app/logs/*

sudo chmod +a "www-data allow delete,write,append,file_inherit,directory_inherit" app/cache app/logs
sudo chmod +a "`whoami` allow delete,write,append,file_inherit,directory_inherit" app/cache app/logs 
```

确保将 www-data 用户替换为您的 Web 服务器运行的用户。通过运行以下命令找出您的 Web 服务器以哪个用户身份运行：

```
ps aux | grep http 
```

或者

```
ps aux | grep apache 
```

您可能还需要启用 ACL。有关详细信息，请参阅[安装文档](http://symfony.com/doc/current/book/installation.html)，有关 ACL 的信息，请参阅[此页面](http://aplawrence.com/MacOSX/acl.html)。

从命令行运行 Symfony 时，缓存的文件/目录由您登录的用户创建 - 在您的情况下，“jess”。在您的浏览器中运行网页时，它们是由网络服务器用户创建的 - 在您的情况下，用户“nobody”。您的用户无权修改 Web 服务器创建的文件和目录，反之亦然。

将您的 Web 服务器更改为与您的登录名相同的用户运行并不是理想的解决方案，因为它不是一个非常安全的选项，当您将您的网站放在另一台服务器上时，您仍然会遇到同样的问题。

[解决方案是确保您已遵循http://symfony.com/doc/current/book/installation.html](http://symfony.com/doc/current/book/installation.html)上安装文档的设置权限部分。

确保您 rm -rf 文件夹的内容，而不仅仅是 php app/console cache:clear，因为 symfony clear cache 命令将创建目录/文件，您的 Web 服务器仍然无法写入这些目录/文件。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-30T06:12:46.847

一般来说，您应该从与 php5-cli 相同的用户运行您的网络服务器。并且您的项目所在的文件夹应该拥有该用户的所有权限。

你应该`change user for project directory`或者简单地`chmod -R 777 app/cache`和`chmod -R 777 app/logs`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T06:35:39.853

请参阅[配置和设置](http://symfony.com/doc/current/book/installation.html#configuration-and-setup)部分中的*设置权限*旁注。将 ACL 方法与.`setfacl`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-09-08T14:42:42.540

我收到了这个错误，我尝试了所有这些技巧但没有成功......

我最终通过停用 seLinux 找到了解决方案。为此，请编辑文件“/etc/selinux/config”并将 SELINUX 值替换为

```
SELINUX=disabled 
```

# php - OS X 10.7 上 Eclipse 中的 Zend 调试器

> ID：12190758
> 
> 赞同：1
> 
> 时间：2012-08-30T06:03:08.343
> 
> 标签：php, eclipse, zend-debugger

我试图让 Zend Debugger 在 Eclipse 中工作。

OS X 10.7 MAMP 2.0.5 使用 php 5.3.6，端口 8888 - phpinfo 说我配置了 Zend_Debugger - 允许的主机是 127.0.0.1/32 Eclipse Helios - Zend 是默认调试器

当我尝试在调试配置中测试调试器时，出现超时错误。当我尝试并实际调试页面时，页面加载时不会中断调试（即，它实际上找到了服务器和文件）。

建议？

# iphone - ios5 中的块示例

> ID：12190760
> 
> 赞同：5
> 
> 时间：2012-08-30T06:03:11.980
> 
> 标签：iphone, ios, block

我对 Blocks 的概念有点熟悉，但我不知道如何在 iOS5 中创建它们。谁能给我一个简单的例子？非常感激 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T06:09:37.340

在 Blocks 中使用这个简单的例子。

```
int multiplier = 7;
int (^myBlock)(int) = ^(int num) {
return num * multiplier;
};

NSLog(@"Sum = %d",myBlock(20));
Then you will get as 140 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T06:10:53.213

这是一个简单的例子。希望能帮助到你。

```
void (^name)(void) = ^ {
//insert code here
}; 
```

# github - github里程碑关闭后如何自动发送非团队成员的邮件？

> ID：12190762
> 
> 赞同：0
> 
> 时间：2012-05-03T19:45:09.047
> 
> 标签：github

关闭 github 里程碑后，我想配置 github，以便它自动向非团队成员（我的 CEO）发送一封电子邮件，说明里程碑刚刚关闭？

我缺少一个简单的配置选项吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T20:15:57.767

您可以使用[Repo Hooks API并通过 JSON HTTP 请求或通过](http://developer.github.com/v3/repos/hooks/)[PubSubHubub](http://en.wikipedia.org/wiki/PubSubHubbub)订阅有关里程碑更改的事件来获得通知，或者您可以使用[Milestones API](http://developer.github.com/v3/issues/milestones/)并让您的存储库用户通过您拥有的内部应用程序管理里程碑状态专门为通知其他成员有关里程碑更改而构建。

# sharepoint - SharePoint 2010：如何将 FilterWebPart 与 ReportViewWebPart 连接

> ID：12190764
> 
> 赞同：1
> 
> 时间：2012-08-30T06:03:24.307
> 
> 标签：sharepoint, web-parts, performancepoint

我需要以编程方式将性能点筛选器 Web 部件和报表视图 Web 部件添加到 SharePoint 2010 中的页面。我可以将两个 Web 部件添加到页面中，但是我不知道如何设置它们之间的连接，即过滤器 Web 部件能够将其值发送到报表视图 Web 部件。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T02:38:50.140

找到了解决方案:)

我所做的是当我使用 SPConnectWebParts 创建连接时，我使用 TransformableBIDataProviderTransformer 对象，例如

```
var list = new List<TransformProviderConsumerRecord>();
   var transformer = new TransformableBIDataProviderTransformer();

   var tpcRecord = new TransformProviderConsumerRecord();
   tpcRecord = "SqlReportViewUniqueParameterIdSI1";
   tpcRecord.ProviderParameterName = "FilterValues";
   tpcRecord.DisplayColumnName = "DisplayValue";
   tpcRecord.MappingId = (new Guid()).ToString();
   tpcRecord.ProviderParameterDisplayName = "PerformancePoint Values";
   tpcRecord.TypeFullName = "System.String";
   tpcRecord.ValuesColumnName = "DisplayValue";

   list.Add(transformProvConsRecord);
   ProviderConsumerTransformations provConsTransf = new    ProviderConsumerTransformations(list);

   var tcr = new TransformerConfigurationRecord(provConsTransf, new       TransformConditionalVisibilityRecord());
   transformer.ConfigurationState = tcr;

   wpm.SPConnectWebParts(providerWp, providerConnection, consumerWp, consumerConnection, transformer); 
```

其中 providerWP 是性能点过滤器 Web 部件 amd consumerWp 是性能点报告

# php - 如何编辑codeigniter表单下拉

> ID：12190769
> 
> 赞同：2
> 
> 时间：2012-08-30T06:04:31.160
> 
> 标签：php, codeigniter

我正在使用 codeigniter 表单下拉菜单。

**add_store.php** 代码是这样的：-

```
 <tr>
            <td>country</td>
            <td><?=form_input('country', set_value('country'));?></td>
            <td class="error"><?php echo form_error('country'); ?></td>
        </tr>
    <tr>
        <td><?=form_dropdown('Equipment',$options = array(
                                '1'   => '1',
                                '2'   => '2',
                                '3'   => '3',
                                '4'   => '4',
                                '5'   => '5',
                                '6'   => '6',
                                '7'   => '7',
                                '8'   => '8',
                                '9'   => '9',
                                '10' => '10'));?></td>
    </tr> 
```

我将此表格添加到数据库中，它工作正常。

现在我想编辑这个页面。我正在做这样的事情：-

**edit_store.php 页面在这里**

```
<tr>
                <td>country</td>
                <td><?=form_input('country', set_value('country', $store['country']));?></td>
                <td class="error"><?php echo form_error('country'); ?></td>
</tr>

 <tr>
                <td>Equipment Rating</td>
                <td><?=
                                $selected_Equipment = $this->input->post('Equipment');
                                form_dropdown('Equipment'$selected_Equipment);?></td>
    // what i can do here, I am doing something wrong here??????????????????????????????????????????            
</tr> 
```

我的问题是：我可以为来自数据库的选定下拉菜单做些什么？

如何编辑下拉选择的值？

那我能做什么？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T17:28:01.903

```
 <?php
    $selected_Equipment = '1';
    $options = array(
                     '1'   => '1',
                     '2'   => '2',
                     '3'   => '3',
                     '4'   => '4',
                     '5'   => '5',
                     '6'   => '6',
                     '7'   => '7',
                     '8'   => '8',
                     '9'   => '9',
                     '10' => '10');
   form_dropdown('Equipment',$options,$selected_Equipment);
   ?> 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T18:09:56.620

Kugutsumen 是对的，您对 form_dropdown 函数的语法有点错误。您可以在此处查看它并查看它需要的参数： http: [//codeigniter.com/user_guide/helpers/form_helper.html](http://codeigniter.com/user_guide/helpers/form_helper.html)

# mysql - how to fetch result using two table in database with atleast condition

> ID：12190770
> 
> 赞同：0
> 
> 时间：2012-08-30T06:04:31.727
> 
> 标签：mysql, oracle

Have two table in mysql database with table1 and table2,

```
 table1
         id      marks      hodname
         1       10%         abc
         2       20%         tec
         3       50%         med
         4       60%         abc
         5       70%         tec

```

```
 table2
         uid            hodname
         1                abc
         2                tec
         3                med

```

I want to fetch hodname with marks but condition is if any hod have marks below 30% should not be in result. Only hod with above 30% i want in result if he is having alteast on marks below 30% then don't consider in result.Please help me out with mysql query for this.
Result should be

```
 table2
         marks            hodname
         50%                med

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T06:08:22.453

```
select table1.marks, table2.hodname
from table2 
inner join table1 on table1.id = table2.uid
where marks > 30 
```

or if your `marks` is a string with percentage symbol:

```
select table1.marks, table2.hodname
from table2 
inner join table1 on table1.id = table2.uid
where replace(marks,'%','')*1 > 30 
```

# javascript - 如何更改特殊标签的内容？

> ID：12190771
> 
> 赞同：-3
> 
> 时间：2012-08-30T06:04:40.770
> 
> 标签：javascript, html

我有以下 HTML：

```
<a class="static selected menu-item" href="/SitePages/Inbox.aspx"><span class="additional-background"><span class="menu-item-text">MyText</span><span class="ms-hidden">Currently selected</span></span></a> 
```

我想在这个标签中找到特殊文本（**MyText**），然后更改文本。

我使用此代码，但它对我不起作用：

```
var divArray = document.getElementsByTagName("span");
for (var i = 0; i<divArray.length; i++){
if (divArray[i].class="menu-item-text")
 return divArray[i].innerHTML;
} 
```

如何使用 JavaScript 找到并更改它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T06:09:06.737

那是你要找的吗？

JS：

```
var inbox = document.getElementsByClassName("menu-item-text");
if(inbox.length > 0){
    inbox[0].innerText = "New Text";
} 
```

HTML：

```
<a class="static selected menu-item" href="/SitePages/Inbox.aspx">
    <span class="additional-background">
        <span class="menu-item-text">Inbox</span>
        <span class="ms-hidden">Currently selected</span>
    </span>
</a> 
```

​</p>

[演示](http://jsfiddle.net/d39T2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T06:17:22.957

可以使用*querySelectorAll*方法，它比*getElementsByClassName*支持更广泛，可以更准确地定位：

```
var els = document.querySelectorAll('.menu-item-text');
for (var i=0, iLen=els.length; i<iLen; i++) {
  if ( (els[i].textContent || els[i].innerText) == 'Inbox') {
    alert('Found inbox');
  }
} 
```

如果你知道你正在寻找一个跨度，那么选择器可以是`span.menu-item-text`. 请注意，qSA 仅在标准模式下的 IE 8 和 9 中受支持，因此请确保您有 DOCTYPE。

这是一个更强大的解决方案，应该可以在任何浏览器回到 IE 6 或更早版本：

```
function getEl(className, text) {
  var els, t, re;
  var result = [];

  // Get elements matching the class
  // Try qSA
  if (document.querySelectorAll) {
    els = document.querySelectorAll('.' + className);

  // Try gEBCN
  } else if (document.getElementsByClassName) {
    els = document.getElementsByClassName(className);

  // Try gEBTN
  } else if (document.getElementsByTagName) {
    t = document.getElementsByTagName('*');
    re = new RegExp('(^|\\s)' + className + '(\\s|$)'); 
    els = [];

    for (var i=0, iLen=t.length; i<iLen; i++) {
      if (re.test(t[i].className)) {
        els.push(t[i]);
      }
    }

  // Stop here if everything failed.
  } else {
    return;
  }

  // Go looking for element with matching text
  for (var j=0, jLen=els.length; j<jLen; j++) {

    if ( (els[j].textContent || els[j].innerText) == 'Inbox') {
      result.push(els[j]);
    }
  }
  return result;
} 
```

# javascript - 测试 MongoDB 中未设置或缺失的字段

> ID：12190775
> 
> 赞同：4
> 
> 时间：2012-08-30T06:05:13.537
> 
> 标签：javascript, mongodb, doctrine-odm

查询 MongoDB 数据库时有没有办法测试以下字段：

*   还没有设置
*   设置为空
*   ...作为奖励，是一个包含 null 作为其值之一的数组吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T06:36:03.283

这应该涵盖您的所有三种情况：

```
db.FOO.find({BAR: null}); 
```

参考：

*   [查询和空值](http://www.mongodb.org/display/DOCS/Querying+and+nulls)
*   [高级查询：数组中的值](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-ValueinanArray)

* * *

您可以从 Mongo shell 进行验证：

```
> db.foo.drop();
true
> db.foo.insert({_id:1, bar:1,          matches:'NO'});
> db.foo.insert({_id:2,                 matches:'YES'});
> db.foo.insert({_id:3, bar:null,       matches:'YES'});
> db.foo.insert({_id:4, bar:[1,2,3],    matches:'NO'});
> db.foo.insert({_id:5, bar:[1,2,null], matches:'YES'});
>
> db.foo.find({bar: null});
{ "_id" : 2, "matches" : "YES" }
{ "_id" : 3, "bar" : null, "matches" : "YES" }
{ "_id" : 5, "bar" : [ 1, 2, null ], "matches" : "YES" }
> db.foo.count({bar: null});
3
> db.foo.count({matches: 'YES'});
3 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T06:11:43.407

1.  [$exists](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24exists)运算符来检查字段是否已设置。

2.  要检查该字段的值是否为`null`，您可以直接编写查找查询。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-30T06:33:33.850

假设集合名称为 coll，字段名称为 field（添加了一个字段“n”来区分）：

```
> db.coll.insert({n:1, field:1});          // should NOT find
> db.coll.insert({n:2});                   // should find
> db.coll.insert({n:3, field:null});       // should find
> db.coll.insert({n:4, field:[1,2,3]});    // should NOT find
> db.coll.insert({n:5, field:[1,2,null]}); // should find
> db.coll.find({field:null});
{ "_id" : ObjectId("503f089a1edeba307d051fbd"), "n" : 2 }
{ "_id" : ObjectId("503f089e1edeba307d051fbe"), "n" : 3, "field" : null }
{ "_id" : ObjectId("503f08b01edeba307d051fc0"), "n" : 5, "field" : [ 1, 2, null ] } 
```

*更新*：Leftium 确实是正确的；你只需要`db.coll.find({field:null});`. 更新我的答案以反映这一点。

# c# - 仅从强命名 C# 程序集调用 extern C++ 方法

> ID：12190778
> 
> 赞同：2
> 
> 时间：2012-08-30T06:05:20.017
> 
> 标签：c#, c++, extern, strongname

如何在 C++（不是 Visual）中指定友元程序集。我有一个包含 extern 方法的 C++ 程序集，我在 C# 强命名程序集中使用它。而且我希望只有我在强命名程序集中的 C# 方法调用 extern C++ 方法。你知道我该怎么做吗？

# javascript - 为什么 Bootstrap 按钮下拉菜单在 iOS 上不起作用？

> ID：12190783
> 
> 赞同：15
> 
> 时间：2012-08-30T06:05:34.800
> 
> 标签：javascript, html, css, twitter-bootstrap

看起来即使是[这里的引导演示](http://twitter.github.com/bootstrap/components.html#buttonDropdowns)也不能在 iOS 上运行。您似乎无法在 iPhone 或 iPad 上从中选择项目。

有解决办法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-22T00:12:59.333

正如 github 上的许多问题评论中所述，有一个快速修复： [https ://github.com/twitter/bootstrap/issues/2975#issuecomment-8670606](https://github.com/twitter/bootstrap/issues/2975#issuecomment-8670606)

在关闭 html 标记之前添加此脚本：

```
$('body').on('touchstart.dropdown', '.dropdown-menu', function (e) { 
    e.stopPropagation(); 
}); 
```

我已经在 ios5 和 6 上测试了上述方法。它就像一个魅力

* * *

如果您希望修改引导 javascript，而不是上面的修复，请从文件底部附近的 clearMenus 的 html 绑定中删除 touchstart.dropdown.data-api。

改变这个

```
$('html')
  .on('click.dropdown.data-api touchstart.dropdown.data-api', clearMenus) 
```

对此

```
$('html')
  .on('click.dropdown.data-api', clearMenus) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T06:56:40.850

您需要在文件中添加自定义 jquery。如果要使用它，请使用：

```
<div class="container">
  <div class="btn-group lt category_bg">
    <p>Adults</p>
    <button class="btn btn-large" data-toggle="dropdown"><cite>0</cite> <span class="caret"></span></button>
    <ul class="dropdown-menu ">
      <li id='adult_0' onClick="flight_user(this.id)"><a href="#" >0</a></li>
      <li id='adult_1' onClick="flight_user(this.id)"><a href="#" >1</a></li>
      <li id='adult_2' onClick="flight_user(this.id)"><a href="#" >2</a> </li>
      <li id='adult_3' onClick="flight_user(this.id)"><a href="#">3</a></li>
      <li id='adult_4' onClick="flight_user(this.id)"><a href="#">4</a></li>
    </ul>
  </div>

</div>
<script src="js/jquery.js"></script>
<script src="js/bootstrap-dropdown.js"></script>

 <script>
    function flight_user(selected){
    var value = jQuery("#" + selected).find('a').text();
    jQuery("#" + selected).parent().parent().find('cite').html(value);
    }

</script> 
```

如果你愿意，我可以给你现场演示

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-06T08:22:50.843

这个脚本解决了这个问题。只需添加此代码

```
$(document).on('click', 'a.your-drop-down-link', function(event){
            event.stopPropagation();
            event.preventDefault();
            if(event.handled !== true) {

                if ( $(this).parent().hasClass('open') ) {
                    $(this).parent().removeClass('open');
                }else{
                    $(this).parent().addClass('open');
                }

                event.handled = true;
            } else {
                return false;
            }
       }); 
```

# android - ORMLite 选择不同的字段

> ID：12190786
> 
> 赞同：6
> 
> 时间：2012-08-30T06:05:48.023
> 
> 标签：android, sqlite, ormlite

我有一个 SQLite 表（在 Android 上），它有很多字段，但某些字段是重复/非规范化的。我想选择一组不同的数据并将它们用作实际对象。

**例子**

*书桌*

```
title            summary        author
Little Johnny    A funny kid    Johnny Himself
Big Johnny       A funny adult  Johnny Himself 
```

我想从这个列表中提取一位作者（“Johnny Himself”），并希望我应该能够使用 ORMLite 而不是手动使用 Java 来做到这一点。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-30T12:41:37.807

> 我想选择一组不同的数据并将它们用作实际对象。

[ORMLite](http://ormlite.com/)支持一种应该做你想做的事情的[`distinct()`方法。](http://ormlite.com/javadoc/ormlite-core/com/j256/ormlite/stmt/QueryBuilder.html#distinct%28%29)`QueryBuilder`所以你的代码看起来像：

```
List<Book> results = booksDao.queryBuilder()
    .distinct().selectColumns("author").query(); 
```

在这种情况下，生成的`Book`对象将只有`author`字段集，而没有`id`字段或其他任何内容。如果您只想要作者姓名而不是对象，那么您可以这样做：

```
GenericRawResults<String[]> rawResults =
    booksDao.queryRaw("SELECT DISTINCT author FROM books");
for (String[] resultColumns : rawResults) {
    String author = resultColumns[0];
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-07T11:14:54.187

这是我的应用程序代码

```
public class DbHelper<T> {
    private Class<T> c;
    private DatabaseHelper db;
    public DbHelper(Class<T> c) {
        this.c = c;
        db = DatabaseHelper.getInstance();
    } 
```

这是一个好主意

```
public List<T> queryForBuilderDistinct(int offset, int limit, String ColumnsName,
       String orderName, boolean isAsc) {
    try {
        Dao<T, Integer> dao = db.getDao(c);
        QueryBuilder<T, Integer> queryBuilder = dao.queryBuilder();
        if (offset != 0) {
            queryBuilder.offset((long) offset);
        }
        if (limit != 0) {
            queryBuilder.limit((long) limit);
        }
        if (orderName != null) {
            queryBuilder.orderBy(orderName, isAsc);
        }
        queryBuilder.distinct().selectColumns(ColumnsName);
        return dao.query(queryBuilder.prepare());
    } catch (SQLException e) {
        LogUtil.e(TAG, "queryForBuilderDistinct", e);
    }
    return new ArrayList<T>();
} 
```

# cocos2d-iphone - 通过 cocos2d 的矩形“剪切”显示图层的内容？

> ID：12190791
> 
> 赞同：1
> 
> 时间：2012-08-30T06:06:03.883
> 
> 标签：cocos2d-iphone

我正在寻找一种方法来屏蔽图层并通过矩形显示图层的内容（实际上我想要多个矩形来显示底层的内容）。

我遇到了这个类似的问题： [Cocos2d iPhone - Sprite cliping/mask/frame](https://stackoverflow.com/questions/3177751/cocos2d-iphone-sprite-cliping-mask-frame)

有一个解决方案：http: [//www.learn-cocos2d.com/2011/01/cocos2d-gem-clippingnode/](http://www.learn-cocos2d.com/2011/01/cocos2d-gem-clippingnode/)

但是，当尝试使用此类时，我收到警告：“函数 'glPushMatrix' 的隐式声明在 C99 中无效”......我还收到错误消息：“在 'CCDirector * 类型的对象上找不到属性 'deviceOrientation' '"

我需要做什么才能让它与最新版本的 cocos2d 一起工作？

...无论如何，我注释掉了 deviceOrientation 的东西，只是为了测试它是否能工作，但似乎没有。

我有一个 CCBatchNode：

```
 sheet = [CCSpriteBatchNode batchNodeWithFile:@"bg.png" capacity:500]; 
```

然后我添加了许多精灵

```
 [sheet addChild:sprite1];
    [sheet addChild:sprite2];
    [sheet addChild:sprite3]; 
```

然后我制作剪辑节点层

```
ClippingNode *clipNode = [ClippingNode node];
clipNode.clippingRegion = CGRectMake(50, 50, 200, 200); 
```

然后我添加精灵表和clipNode：

```
[layer addChild:sheet];
[layer addChild:clipNode]; 
```

然后我将它添加到 CCSprite 对象中

```
[self addChild:layer]; 
```

...

结果是，我从工作表中看到了许多精灵，但没有剪贴蒙版。我的控制台显示一百万：“OpenGL 错误 0x0502 in -[CCTextureAtlas drawNumberOfQuads:fromIndex:] 556”

所以.....我不确定我做错了什么 - 或者这一切是否与openGL警告和设备方向错误有关......？

更新：我在 ClippingNode.m 中添加了#include <OpenGLES/ES1/gl.h>，它消除了 glpush/pop 警告。但是一旦我将 clipNode 子节点添加到图层中，仍然会导致相同的 OpenGL 错误...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T22:00:57.603

您可以使用 cocos2d 2.0 中的着色器来实现。看看这个教程。

[http://www.raywenderlich.com/4428/how-to-mask-a-sprite-with-cocos2d-2-0](http://www.raywenderlich.com/4428/how-to-mask-a-sprite-with-cocos2d-2-0)

# blackberry - Blackberry BrowserField 错误加载 url

> ID：12190792
> 
> 赞同：1
> 
> 时间：2012-08-30T06:06:15.590
> 
> 标签：blackberry, browserfield

我正在使用垂直字段管理器来加载数据和浏览器字段来加载 url，但两者都在同一个屏幕上。

我只是根据需要使用**replace(field1,field2)**交换两者。但是当我试图在 bwoserfield 上加载 url 时，它无法加载 url。

任何人都知道如何解决问题。

# hibernate - 如何在休眠中查询父实体时过滤子实体

> ID：12190794
> 
> 赞同：2
> 
> 时间：2012-08-30T06:06:22.860
> 
> 标签：hibernate, hql, parent-child

假设我有两个实体

```
public class EntityA
{
   @id
   @GeneratedValue
   @Column(name="id")
   private Long id;

   @OneToMany(mappedBy="EntityA")
   @JoinColumn(name = "entityA_id")
   private List<EntityB> entityBList;

} 

public class EntityB
{
  @Column(name = "MODEL_PERCENT")
  private BigDecimal modelPercent;

  @ManyToOne
  @joincolumn(name="entityA_id") 
  private EntityA entityA;

} 
```

我现在想要的是，当我获取 EntityA 时，我想添加一个 where 子句来获取 modelPercent 大于 0 的所有 EntityB。

我不想使用过滤器，因为此要求仅适用于这种特殊情况。

例如数据：

```
 EntitytA table
 id 
  1
EntityB table
 id   EntitytA_Id  modelPercent
  1      1           10
  2      1           0 
```

**我需要一种方法，可能是获取 EntityA 的 hql，这样当我说 EntityA.getEntityBList() 时，它应该只返回 1 条记录（其模型百分比为 10（大于零））。**

我尝试了以下查询，但它似乎不起作用。即它返回来自 entityB 的两个记录

```
select a from EntityA a,IN( a.EntityBList) b where a.id =:id and b.modelPercent>0 
```

对某些示例的任何建议或指示都会有很大帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T08:30:31.443

1) 您在映射
**EntityA**时出错- 同时具有属性和字段访问权限
**EntityB** - 没有 ID 并且同时具有属性和字段访问权限
2) HQL 查询是

```
SELECT eA FROM EntityA LEFT JOIN eA.entityBList eB WHERE eA.id =:id AND eB.modelPercent > 0 
```

# php - 在数组中搜索字符串模式并将其存储在变量中

> ID：12190797
> 
> 赞同：2
> 
> 时间：2012-08-30T06:06:42.070
> 
> 标签：php, arrays

```
Array
(
    [0] => LAMPION
    [1] => BANBU
    [2] => DT-T300-FNS
    [3] => T65
    [4] => DT-299-FNS
    [5] => T30
) 
```

我有一个看起来像这样的数组。问题是存储在数组中的数据不一致，因此我必须在数组中搜索此模式“xx-xxx-xxx”并将其存储在变量中。有什么办法可以做到吗？真的需要帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T06:08:17.587

是的。

```
$matches = preg_grep('/^.{2}-.{3}-.{3}\z/', $array); 
```

如果您想要第一个，只需添加`[0]`（对于 < PHP 5.4，您首先需要一个临时变量）。

# c# - ICLRRuntimeInfo 进入我的 dll - 可能吗？

> ID：12190798
> 
> 赞同：2
> 
> 时间：2012-08-30T06:06:44.810
> 
> 标签：c#

我有一个混合模式 2.0 dll 和一个 4.0 dll。我想提供这个

```
<configuration>
  <startup useLegacyV2RuntimeActivationPolicy="true">
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/>
  </startup> 
</configuration> 
```

到我的 dll。如果没有 app.config（或更改 machine.config），这甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-12T14:02:14.273

您不能只为单个程序集提供此信息 - 整个应用程序将在 2.0 或 4.0 运行时主机之上执行。

如果问题是如何在没有 app.config 的应用程序中支持 v2.0 和 v4.0 - 请参阅[Embedding supportedRuntime into exe file](https://stackoverflow.com/questions/24270489/embedding-supportedruntime-into-exe-file/45056961)

# powershell - 如何通过不同的端口建立多个 TCP 连接？

> ID：12190800
> 
> 赞同：2
> 
> 时间：2012-08-30T06:06:58.543
> 
> 标签：powershell, powershell-2.0

我尝试通过端口建立 TCP 连接以检查端口是否打开。

```
Param (
        [string] $IPAddress,
        $Ports
    )

$t = New-Object Net.Sockets.TcpClient

$PortArray= $Ports -split ","

Foreach ($Port in $PortArray) {

    $t.Connect($Ipaddress,$Port)

    if($t.Connected)
    {
        "Port $Port is operational"
    }
    else
    {
        "Port $Port is Not opened . Request port access via IT support team. "
    }

    $t.Close()  
} 
```

我调用了如下函数。

```
PS D:\PowerCLi-Scripts> .\Is-PortOpened.ps1 -IPAddress "193.44.35.234" -Port ("443,902,903") 
```

当连接到第二个和第三个端口时，它会抛出如下错误。

> 使用“2”个参数调用“连接”的异常：“无法访问已处置的对象。

虽然我给了 $t.close()。我仍然面临这个问题。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T06:19:30.740

根据[文档（MSDN）](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcpclient.close.aspx)，该`Close`方法将套接字标记为已释放。这意味着您不能重复使用相同的实例，并且需要`TcpClient`在尝试连接之前创建一个新实例。将开头的行`$t = ...`移到 foreach 循环中，你应该没问题。

# c# - ReadXml 显示 Null 异常错误

> ID：12190801
> 
> 赞同：1
> 
> 时间：2012-08-30T06:07:06.650
> 
> 标签：c#, winforms

> System.NullReferenceException：对象引用未设置为对象的实例。

每当我尝试读取 xml 文件时都会收到此错误。

```
public static DataSet orads;    
String path = Directory.GetCurrentDirectory();
path = path + "\\Mailconfig.xml";

orads.ReadXml(path); 
```

我将 xml 文件放在应用程序的 bin 文件夹中。我找不到我犯了什么错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T06:08:27.807

你还没有初始化`orads`，你刚刚声明了它，这就是你得到异常的原因。

以下行仅声明`DataSet`它尚未被分配任何值。目前正在举办`null`

```
public static DataSet orads; 
```

`ReadXml`稍后您在对象上调用实例方法，`null`这就是您收到异常的原因。

您需要在使用前对其进行实例化。

```
orads = new DataSet(); 
```

或者你可以用声明来实例化它。

```
public static DataSet orads = new DataSet(); 
```

# android - 如何在android中的任何设备的中心画一个圆圈

> ID：12190803
> 
> 赞同：3
> 
> 时间：2012-08-30T06:07:13.360
> 
> 标签：android, canvas

我想在任何设备的中心画一个圆圈或任何对象。但我无法准确地在所有设备中获得设备中心。我可以在某些设备上工作，但在最大情况下它不能准确地绘制。请帮助..谢谢提前。我也在这里发布我的一段代码

```
 package com.app.maxcircle;

import android.app.Activity;
import android.content.Context;
import android.content.res.Resources;
import android.graphics.Bitmap;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.DashPathEffect;
import android.graphics.Paint;
import android.graphics.Paint.Style;
import android.os.Bundle;
import android.util.DisplayMetrics;
import android.view.Display;
import android.view.View;
import android.view.ViewGroup.LayoutParams;
import android.widget.LinearLayout;

public class CircleWithMaxRadiusActivity extends Activity {
    /** Called when the activity is first created. */

    float pixelCenterX, pixelCenterY;
    DrawCanvasCircle pcc;
    LinearLayout ll;
    private Canvas canvas;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Display display = getWindowManager().getDefaultDisplay();
        int width = display.getWidth();
        int height = display.getHeight();
        ll = (LinearLayout) findViewById(R.id.ll);
        float centerx = width / 2;
        float centery = height / 2;
        pixelCenterX = convertDpToPixel(centerx, this);
        pixelCenterY = convertDpToPixel(centery, this);
        System.out.println("px..." + pixelCenterX);
        System.out.println("py..." + pixelCenterY);

        pcc = new DrawCanvasCircle(this);
        Bitmap result = Bitmap.createBitmap(25, 25, Bitmap.Config.ARGB_8888);
        canvas = new Canvas(result);
        pcc.draw(canvas);
        pcc.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,
                LayoutParams.FILL_PARENT));
        ll.addView(pcc);
    }

    public static float convertDpToPixel(float dp, Context context) {
        Resources resources = context.getResources();
        DisplayMetrics metrics = resources.getDisplayMetrics();
        float px = dp * (metrics.densityDpi / 160f);
        return px;
    }

    /**
     * This method converts device specific pixels to device independent pixels.
     * 
     * @param px
     *            A value in px (pixels) unit. Which we need to convert into db
     * @param context
     *            Context to get resources and device specific display metrics
     * @return A float value to represent db equivalent to px value
     */
    public static float convertPixelsToDp(float px, Context context) {
        Resources resources = context.getResources();
        DisplayMetrics metrics = resources.getDisplayMetrics();
        float dp = px / (metrics.densityDpi / 160f);
        return dp;

    }

    class DrawCanvasCircle extends View {
        public DrawCanvasCircle(Context mContext) {
            super(mContext);
        }

        protected void onDraw(Canvas canvas) {
            super.onDraw(canvas);
            Paint p = new Paint();
            p.setColor(Color.WHITE);
            DashPathEffect dashPath = new DashPathEffect(new float[] { 5, 5, 2,
                    2 }, (float) 1.0);

            p.setPathEffect(dashPath);
            p.setStyle(Style.STROKE);

            for (int i = 0; i < 25; i++) {
                canvas.drawCircle(pixelCenterX, pixelCenterY, pixelCenterY - 20
                        * i, p);
            }

            invalidate();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T06:17:30.710

试试这个

```
public class TestSO extends Activity {
    /** Called when the activity is first created. */

    float pixelCenterX, pixelCenterY;
    DrawCanvasCircle pcc;
    LinearLayout ll;
    private Canvas canvas;
    private float centerX, centerY; 

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Display display = getWindowManager().getDefaultDisplay();
        int width = display.getWidth();
        int height = display.getHeight();
        ll = (LinearLayout) findViewById(R.id.ll);
        pixelCenterX = convertPixelsToDp(width, this) / 2;
        pixelCenterY = convertPixelsToDp(height, this) / 2;

        centerX = convertDpToPixel(pixelCenterX, this);
        centerY = convertDpToPixel(pixelCenterY, this);

        System.out.println("px..." + pixelCenterX);
        System.out.println("py..." + pixelCenterY);

        pcc = new DrawCanvasCircle(this);
        Bitmap result = Bitmap.createBitmap(25, 25, Bitmap.Config.ARGB_8888);
        canvas = new Canvas(result);
        pcc.draw(canvas);
        pcc.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,
                LayoutParams.FILL_PARENT));
        ll.addView(pcc);
    }

    public static float convertDpToPixel(float dp, Context context) {
        Resources resources = context.getResources();
        DisplayMetrics metrics = resources.getDisplayMetrics();
        float px = dp * (metrics.densityDpi / 160f);
        return px;
    }

    /**
     * This method converts device specific pixels to device independent pixels.
     * 
     * @param px
     *            A value in px (pixels) unit. Which we need to convert into db
     * @param context
     *            Context to get resources and device specific display metrics
     * @return A float value to represent db equivalent to px value
     */
    public static float convertPixelsToDp(float px, Context context) {
        Resources resources = context.getResources();
        DisplayMetrics metrics = resources.getDisplayMetrics();
        float dp = px / (metrics.densityDpi / 160f);
        return dp;
    }

    class DrawCanvasCircle extends View {
        public DrawCanvasCircle(Context mContext) {
            super(mContext);
        }

        protected void onDraw(Canvas canvas) {
            super.onDraw(canvas);
            Paint p = new Paint();
            p.setColor(Color.WHITE);
            DashPathEffect dashPath = new DashPathEffect(new float[] { 5, 5, 2,
                    2 }, (float) 1.0);

            p.setPathEffect(dashPath);
            p.setStyle(Style.STROKE);

            for (int i = 0; i < 25; i++) {
                canvas.drawCircle(centerX, centerY, pixelCenterY - 20
                        * i, p);
            }

            invalidate();
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T07:23:12.863

好的，这是您获取状态栏和标题栏大小的[链接。](https://stackoverflow.com/questions/3355367/height-of-statusbar/3356263#3356263)

之后，您需要将它们减去：

```
Display display = getWindowManager().getDefaultDisplay();
int width = display.getWidth();
int height = display.getHeight() - statusHeight - titleHeight ;

ll = (LinearLayout) findViewById(R.id.ll);
float centerx = width / 2;
float centery = height / 2;

// you don't actually need to convert to Dp though, but if that is what you want then do it.
pixelCenterX = convertPixelToDp(centerx, this);
pixelCenterY = convertPixelToDp(centery, this); 
```

祝你好运。

# postgresql - postgresql中指数的存储过程

> ID：12190805
> 
> 赞同：2
> 
> 时间：2012-08-30T06:07:25.683
> 
> 标签：postgresql, stored-procedures, exponential, postgresql-9.0

在 PostgreSQL 中，我收到错误：

```
ERROR: argument for function "exp" too big
SQL state: 22003 
```

我需要为指数编写一个存储过程：

*   如果`exp(value)`函数“exp”的抛出参数太大
*   然后返回 0
*   否则返回`exp(value)`

请帮助我如何处理这个存储过程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T06:22:19.623

这就是正在发生的事情：

```
regress=# SELECT exp(NUMERIC '6000');
ERROR:  argument for function "exp" too big 
```

您将一个不切实际的大值传递给`exp()`. 它太大而无法溢出`float8`(double) 并且只能表示为`NUMERIC`. 即使在那里，也有一个限制，当你超过时你就会达到它`exp(5999)`。

对于硬数学，您可能想尝试该语言[`PL/R`](http://www.joeconway.com/plr/)的数据库内嵌入式版本。`R`

很难说要做什么，因为您还没有真正解释查询的用途，输入`exp`应该是什么等。

为太大的指数返回零有点疯狂。为什么？

* * *

要捕获异常，请在 PL/PgSQL 中使用[BEGIN ... EXCEPTION 。](http://www.postgresql.org/docs/current/static/plpgsql-control-structures.html)

我编写了下面的函数来返回`NaN`（“不是数字”）而不是零，因为我认为返回零是完全错误的。如果需要，请更改它。返回也可能有点意义`NULL`。

```
CREATE OR REPLACE FUNCTION exp_if_possible(numeric) RETURNS numeric as $$
BEGIN
    RETURN exp($1);
EXCEPTION
    WHEN numeric_value_out_of_range THEN
        RETURN 'NaN';
END;
$$ LANGUAGE 'plpgsql' IMMUTABLE; 
```

错误代码是通过在 Pg 手册中的[附录 A.PostgreSQL 错误代码](http://www.postgresql.org/docs/current/static/errcodes-appendix.html)`numeric_value_out_of_range`中查找`SQLSTATE 22003`您从超出范围`exp`中获得的信息而获得的。您将在有关.`BEGIN ... EXCEPTION`

* * *

我最初说如果要完成它应该通过测试输入来完成，但我认为我错了。不能保证限制会是`exp(6000)`，所以你使用异常处理是正确的，即使它会很慢而且很笨拙。我将在几秒钟内使用异常处理版本更新此响应。

```
CREATE OR REPLACE FUNCTION crazy_exp(numeric) RETURNS numeric AS $$
-- exp(6000) and above will throw 'argument for function "Exp" too big
-- For such cases, return zero because [insert explanation here]
SELECT CASE WHEN $1 < 6000 THEN exp($1) ELSE 0 END;
$$ LANGUAGE 'sql' IMMUTABLE;

CREATE OR REPLACE FUNCTION crazy_exp(float8) RETURNS float8 AS $$
-- float8 goes out-of-range above about exp(600)
SELECT CASE WHEN $1 <= 600 THEN exp($1) ELSE 0 END;
$$ LANGUAGE 'sql' IMMUTABLE; 
```

这比在 PL/ *PgSQL*中捕获“超出范围”异常要高效得多，并且也使您的意图更加清晰。

# python - Python 中的 COM 对象（arcobjects）

> ID：12190807
> 
> 赞同：2
> 
> 时间：2012-08-30T06:07:30.913
> 
> 标签：python, com, arcobjects

我是 OOP 的新手，并试图在 Python 中使用 COM 对象（arcobjects）。程序与 GIS 相关，但我在 GIS.SE 上没有得到任何答案，所以我在这里问。下面是我的一段代码。我被困在收到 iFrameElement 的最后。ESRI 将其描述为抽象类的成员/接口，它本身不能创建对象。我需要将其中包含的信息传递给其 CoClass（MapFrame）中的对象。

任何建议如何做到这一点？

另外，我在哪里可以找到 Python 中对象的命名约定？有 p, i 作为前缀，我不确定它们来自哪里。

```
from comtypes.client import CreateObject, GetModule
import arcpy

def CType(obj, interface):
   """Casts obj to interface and returns comtypes POINTER or None"""
   try:
       newobj = obj.QueryInterface(interface)
       return newobj
   except:
       return None

def NewObj(MyClass, MyInterface):
   """Creates a new comtypes POINTER object where\n\
   MyClass is the class to be instantiated,\n\
   MyInterface is the interface to be assigned"""
   from comtypes.client import CreateObject
   try:
       ptr = CreateObject(MyClass, interface=MyInterface)
       return ptr
   except:
       return None

esriCarto = GetModule(r"C:\Program Files (x86)\ArcGIS\Desktop10.0\com\esriCarto.olb")
esriCartoUI = GetModule(r"C:\Program Files (x86)\ArcGIS\Desktop10.0\com\esriCartoUI.olb")
esriMapUI = GetModule(r"C:\Program Files (x86)\ArcGIS\Desktop10.0\com\esriArcMapUI.olb")
esriFrame = GetModule(r"C:\Program Files (x86)\ArcGIS\Desktop10.0\com\esriFramework.olb")

arcpy.SetProduct('Arcinfo')

pApp = NewObj(esriFrame.AppROT, esriFrame.IAppROT).Item(0)
pDoc = pApp.Document
pMxDoc = CType(pDoc, esriMapUI.IMxDocument)
pLayout = pMxDoc.PageLayout
pGraphContLayout = CType(pLayout, esriCarto.IGraphicsContainer)
iFrameElement = pGraphContLayout.FindFrame(pMxDoc.ActiveView.FocusMap) 
```

据我了解，iFrameElement 是一个抽象类的接口，我需要从中继承 MapFrame 对象的属性（指针）。我怎么做？如何使用 IMapGrids 接口获取对象？有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T07:36:41.860

IFrameElement 是一个接口，因此您不能创建它本身的实例。该接口由包括 MapFrame 在内的[各种类](http://edndoc.esri.com/arcobjects/9.2/ComponentHelp/esriCarto/IFrameElement.htm)实现，这意味着（在基本术语中）任何这些对象的实例“行为”类似于 IFrameElement。因此，如果您从 IGraphicsContainer.FindFrame() 获得 IFrameElement，则可以将其传递给其他需要 IFrameElement 的东西，而无需找出对象的实际类型。

我建议阅读一下接口在 OOP 中的含义，因为 ESRI 的代码经常使用**它们**。

关于命名约定 - 关于变量的命名没有硬性规定。

从您的代码看起来， p 指的是具有不同类型的对象，而 i 指的是仅由接口定义的对象。但是请注意，以与其引用的接口相同的名称调用变量（小写“i”除外）是一种不好的做事方式，并且会导致混乱。（海事组织）

**编辑：** 回答你的最后一个问题（对不起，我最初错过了）：

如果 pGraphContLayout.FindFrame() 返回 MapFrame 类型的对象（并且不能保证确实如此），那么您应该能够简单地将其转换为 IMapGrids：

```
pGraphContLayout = CType(pLayout, esriCarto.IGraphicsContainer)
pFrame = pGraphContLayout.FindFrame(pMxDoc.ActiveView.FocusMap)
pGrids = CType(pFrame, IMapGrids) 
```

听起来您可能对 Python 的抽象基类感到困惑，它们似乎服务于接口的目的......？这个线程很有用：[Python中抽象类和接口的区别](https://stackoverflow.com/questions/372042/difference-between-abstract-class-and-interface-in-python)

# mysql - mysql查询性能慢，需要帮助优化

> ID：12190810
> 
> 赞同：3
> 
> 时间：2012-08-30T06:07:53.847
> 
> 标签：mysql, query-optimization

我有 4 个表：出货量（200K 记录）、商店（45 条记录）、product_stores（8K 记录）、地区（698 条记录）。以下查询需要很长时间才能执行（12 秒）：

```
SELECT `s`. * , `p`.`productCode` , `p`.`productName` , `st`.`name` AS `storeName` , `d`.`name` AS `districtName`
FROM `shipments` AS `s`
JOIN `product_stores` AS `p` ON s.productStoreId = p.id
JOIN `stores` AS `st` ON s.storeId = st.id
LEFT JOIN `districts` AS `d` ON s.districtId = d.id
WHERE (s.storeId IN (1, 2, 3, 4, 6, 9, 14, 16, 22, 26, 30))
GROUP BY `s`.`id`
ORDER BY `s`.`id` DESC
LIMIT 100 
```

EXPLAIN 查询返回以下结果：

```
id  select_type     table   type    possible_keys   key     key_len     ref     rows    Extra
1   SIMPLE  st  ALL     PRIMARY     NULL    NULL    NULL    45  Using where; Using temporary; Using filesort
1   SIMPLE  s   ref     fk_shipments_stores1_idx,fk_shipments_product_stor...   fk_shipments_stores1_idx    4   st.id   482     
1   SIMPLE  p   eq_ref  PRIMARY     PRIMARY     4   s.productStoreId    1   
1   SIMPLE  d   eq_ref  PRIMARY     PRIMARY     4   s.districtId    1 
```

1.  我不知道为什么mysql必须使用临时的；在这种情况下使用文件排序
2.  为什么mysql不能启动select from shipping？然后加入商店。它开始从商店选择然后加入发货？我尝试运行 EXPLAIN，有时 mysql start select from table product_stores
3.  请帮我优化表、索引...以提高性能。

（我使用的是 mysql 5.0.95）

这是表结构：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T08:58:59.427

您的查询将足够慢，因为您的查询连接策略需要太多 I/O

让我为您的查询 I/O 起草计算，以便理解如下：

```
 1\. JOIN shipments (200K records) and product_stores (8K records) 

         200K x 8 K = 1600K I/O
 2\. Then, JOIN to stores (45 records)

         1600K x 45 = 75000K I/O

 3\. Then, JOIN to districts (698 records)

         75000K x 698 = 50256000K I/O

 4\. Then, Filter the result (by storeId), so need to read the result I/O again

         50256000K + 50256000K = **100512000K I/O (TOTAL I/O)** 

 So, total I/O on memory of your query is 100512000K I/O. 
```

* * *

为了提高您的查询性能，您需要重新考虑您的查询加入计划/策略

例如：

```
 1\. Read shipments (200K records) and Filter storeId  (assume: result is 8 record)

         200K  + 8 = 208K I/O
 2\. Then, JOIN to product_stores (8K records)

         208K x 8K = 1664K I/O

 3\. Then, JOIN to stores (45 records)

         1664K x 45K = 74880K I/O

 4\. Then, finally JOIN to districts (698 records).

         74880K + 698 = **52266240 I/O (TOTAL I/O)** 

 So, total I/O on memory of your query is 52266240  I/O. (greatly reduce I/O then ever) 
```

因此，您可以通过以上考虑的方式来提高查询性能。

我希望它可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T06:53:28.557

我只是在尝试解决方案。希望这应该减少执行时间

```
SELECT `s`. * , `ps`.`productCode` , `ps`.`productName` , `st`.`name` AS `storeName` , `d`.`name` AS `shipToDistrictName`
FROM `shipments` AS `s`
JOIN `product_stores` AS `ps` ON s.productStoreId = ps.id
JOIN `stores` AS `st` ON (s.storeId = st.id AND s.storeId IN (1, 2, 3, 4, 6, 9, 14, 16, 22, 26, 30))
LEFT JOIN `districts` AS `d` ON s.shipToDistrictId = d.id
GROUP BY `s`.`id`
ORDER BY `s`.`id` DESC
LIMIT 100 
```

这会将记录数限制为仅具有 storeId 的那些记录，并进一步以减少的记录数进行连接，从而减少执行时间。

希望能帮助到你...

# java - Java GridBagLayout：行重叠

> ID：12190815
> 
> 赞同：2
> 
> 时间：2012-08-30T06:08:15.923
> 
> 标签：java, swing, overlap, gridbaglayout, overlapping

我有一个非常简单的 JFrame。共有三个主要面板：顶部的横幅图像、左侧的按钮列表以及用户输入登录信息以访问应用程序其余部分的主面板。

我正在使用 GridBagLayout，尽管大多数人都像避免瘟疫一样避免它，但它对我来说非常简单，尽管它确实添加了许多代码行。但是我遇到了这个奇怪的问题，顶行（横幅图像）与底行（按钮和登录面板）重叠。我已经检查并仔细检查并在网上寻找答案，但无法弄清楚我做错了什么。

基本上，底行在整个 JFrame 中垂直居中，而不是在第二个 GridBag 行中。尽管事先已将 BannerPanel 添加到屏幕上，但不知何故，它仍被绘制在上面。我认为这可能与 BannerPanel 的工作方式有关，但我找不到解决方法。

这是它的样子：

[https://sphotos-a.xx.fbcdn.net/hphotos-snc7/375898_3720190211823_1073177291_n.jpg](https://sphotos-a.xx.fbcdn.net/hphotos-snc7/375898_3720190211823_1073177291_n.jpg)

这应该是这样的：

[https://sphotos-a.xx.fbcdn.net/hphotos-ash4/314993_3720190291825_1429407717_n.jpg](https://sphotos-a.xx.fbcdn.net/hphotos-ash4/314993_3720190291825_1429407717_n.jpg)

这是我的代码：

```
public class LoginWindow extends JFrame implements ActionListener {
    final static String unlockCode = "unlock";
    ArrayList <User> userlist = new ArrayList <User> ();
    User user = null;

    // The visible parts of the window
    GridBagConstraints gridbag;
    JLabel inputLabel, errorLabel, lockedLabel, unlockLabel;
    JTextField usernameField, unlockField;
    JPasswordField passwordField;
    JPanel inputPanel, usernamePanel, passwordPanel, unlockPanel;

    public static void main(String[] args) {
        LoginWindow win = new LoginWindow ();
        win.userlist.add(new User ("username", "password", true));
    }

    public LoginWindow () {
        setTitle("Login");
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        getContentPane().setBackground(Color.GRAY);
        setSize(640, 480);
        setResizable(false);
        resetGridbag();

        // This is where I declare all the JLabels, JPanels, etc
        inputLabel = new JLabel ("Secure Login");
        inputLabel.setFont(new Font ("SansSerif", Font.BOLD, 24));
        inputLabel.setForeground(Color.WHITE);

        JLabel usernameLabel = new JLabel ("Username  ");
        usernameLabel.setForeground(Color.WHITE);
        usernameField = new JTextField (10);
        usernameField.setActionCommand("Login");
        usernameField.addActionListener(this);
        usernamePanel = new JPanel ();
        usernamePanel.setBackground(Color.GRAY);
        usernamePanel.add(usernameLabel);
        usernamePanel.add(usernameField);

        JLabel passwordLabel = new JLabel ("Password  ");
        passwordLabel.setForeground(Color.WHITE);
        passwordField = new JPasswordField (10);
        passwordField.setActionCommand("Login");
        passwordField.addActionListener(this);
        passwordPanel = new JPanel ();
        passwordPanel.setBackground(Color.GRAY);
        passwordPanel.add(passwordLabel);
        passwordPanel.add(passwordField);

        errorLabel = new JLabel ("");
        errorLabel.setForeground(Color.WHITE);

        lockedLabel = new JLabel ("You've been locked out!");
        lockedLabel.setForeground(Color.WHITE);

        unlockLabel = new JLabel ("Unlock Code");
        unlockLabel.setForeground(Color.WHITE);
        unlockField = new JTextField (10);
        unlockField.setActionCommand("Unlock");
        unlockField.addActionListener(this);
        unlockPanel = new JPanel ();
        unlockPanel.setBackground(Color.GRAY);
        unlockPanel.add(unlockLabel);
        unlockPanel.add(unlockField);

        JLabel newPassword = new JLabel ("Request a new password");
        newPassword.setForeground(Color.WHITE);
        JPanel optionPanel = new JPanel ();
        optionPanel.setBackground(Color.GRAY);
        optionPanel.add(newPassword);

        inputPanel = new JPanel ();
        inputPanel.setBackground(Color.GRAY);
        inputPanel.setLayout(new GridBagLayout ());

        // Now I'm going to add them all to the screen
        GridBagLayout gbl = new GridBagLayout ();
        gbl.columnWeights = new double [] {0.0f, 1.0f};
        gbl.rowWeights = new double [] {0.0f, 1.0f};
        setLayout(gbl);

        gridbag.gridwidth = 2;
        gridbag.gridy = 0;
        gridbag.fill = GridBagConstraints.HORIZONTAL;
        add(new BannerPanel (), gridbag);
        gridbag.gridy = 1;
        gridbag.gridwidth = 1;
        gridbag.anchor = GridBagConstraints.NORTHWEST;
        add(optionPanel, gridbag);
        gridbag.gridx++;
        gridbag.anchor = GridBagConstraints.CENTER;
        add(inputPanel, gridbag);

        redraw();
        setVisible(true);
    }

    public void resetGridbag () {
        gridbag = new GridBagConstraints ();
        gridbag.anchor = GridBagConstraints.CENTER;
        gridbag.gridx = gridbag.gridy = 0;
    }

    public void reset () {
        inputPanel.removeAll();
        resetGridbag();
        validate();
        repaint();
    }

    public void redraw () {
        reset();
        if (user == null || !user.locked()) {
            inputPanel.add(inputLabel, gridbag);
            gridbag.gridy++;
            inputPanel.add(new JLabel ("   "), gridbag);
            gridbag.gridy++;
            inputPanel.add(usernamePanel, gridbag);
            gridbag.gridy++;
            inputPanel.add(passwordPanel, gridbag);
            gridbag.gridy++;
            inputPanel.add(new JLabel ("   "), gridbag);
            gridbag.gridy++;
            inputPanel.add(errorLabel, gridbag);
        }
        else {
            inputPanel.add(lockedLabel, gridbag);
            gridbag.gridy++;
            inputPanel.add(unlockPanel, gridbag);
            gridbag.gridy++;
            inputPanel.add(errorLabel, gridbag);
            errorLabel.setText("");
        }
        validate();
        repaint();
    }

    public void actionPerformed (ActionEvent e) {
        String button = e.getActionCommand();
        if (button.equals("Login")) {
            boolean usernameMatch = false;
            boolean passwordMatch = false;

            for (int i = 0; i < userlist.size(); i++) {
                if (usernameField.getText().equals(userlist.get(i).username())) {
                    usernameMatch = true;
                    user = userlist.get(i);
                }
                if (new String (passwordField.getPassword()).equals(userlist.get(i).password()))
                    passwordMatch = true;
            }
            passwordField.setText("");

            if (usernameMatch) {
                if (passwordMatch) {
                    user.unlock();
                    //new MainWindow ();
                    dispose();
                }
                else {
                    user.loginFail();
                    if (!user.locked())
                        errorLabel.setText("Login unsuccessful. " +
                                user.loginAttempts() + " attempts left!");
                    else
                        redraw();
                }
            }
            else
                errorLabel.setText("Login unsuccessful.");

            validate();
        }
        else if (button.equals("Unlock")) {
            if (unlockField.getText().equals(unlockCode)) {
                errorLabel.setText("");
                user.unlock();
                redraw();
            }
            else {
                errorLabel.setText("Invalid unlock code.");
                validate();
            }
            unlockField.setText("");
        }
    }
}

class BannerPanel extends JPanel {
    Image image;
    int width = 0, height = 0;
    double ratio = 0.0;

    public BannerPanel () {
        try {
            image = ImageIO.read(BannerPanel.class
                    .getClassLoader().getResourceAsStream("banner.png"));
        }
        catch (Exception e) { e.printStackTrace(); }
    }

    @Override
    protected void paintComponent (Graphics g) {
        super.paintComponent(g);

        ratio = (double) getWidth() / image.getWidth(null);
        width = getWidth();
        height = getImageHeight();
        setSize(width, height);

        if (image != null) {
            g.drawImage(image, 0, 0, width, height, this);
        }
    }

    public int getImageHeight () {
        return (int) (image.getHeight(null) * ratio);
    }
}

public class User {
    String username = "";
    String password = "";
    boolean superuser = false;
    int loginAttempts = 3;

    public User (String username, String password, boolean superuser) {
        this.username = username;
        this.password = password;
        this.superuser = superuser;
    }

    public String username () {
        return username;
    }

    public String password () {
        return password;
    }

    public boolean superuser () {
        return superuser;
    }

    public int loginAttempts () {
        return loginAttempts;
    }

    public void loginFail () {
            if (loginAttempts > 0)
            loginAttempts--;
    }

    public boolean locked () {
        return (loginAttempts == 0);
    }

    public void lock () {
        loginAttempts = 0;
    }

    public void unlock () {
        loginAttempts = 3;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T06:59:52.117

您的`BannerPanel`高度基于图像的高度 ( `height = getImageHeight();`)。但是，这是`BannerPanel`绘制*的*高度，而不是它*要求*的高度。您需要覆盖`getPreferredSize()`以根据图像和比率提供正确的所需高度 - 否则布局将假定为 0 高度`BannerPanel`。

## 编辑

我认为问题在于您正在尝试创建一个具有固定高度和宽度比率的组件，同时将宽度推迟到父容器。这会造成您必须等待布局执行一次才能知道组件的首选大小的情况。`paintComponent`正如您所经历的，通过等待布局、调整大小、绘图、等待布局和再次绘图，执行这些计算将起作用。这并不理想 - 您确实必须执行两次布局，但没有内在需要进行两次绘图。我认为 Swing 没有给你足够的控制来可靠地避免这种情况，但是有*更多*惯用的方法来做到这一点！例如，您可以覆盖`setBounds`以根据实际宽度更改首选高度：

```
@Override
public void setBounds(int x, int y, int width, int height) {
    super.setBounds(x, y, width, height);
    int pWidth = getPreferredSize().width;
    setPreferredSize(new Dimension(pWidth, width / 2));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T23:19:31.953

Jacob Raihle 的想法是正确的，但它对我不起作用。起作用的是在 .旁边添加对`setPreferredSize()`to的调用。`paintComponent()``setSize()`

显然`setSize()`允许绘制整个图像，同时`setPreferredSize()`告诉布局的其余部分它占用了多少空间。不用重写就可以在一种方法中完成所有操作会很棒，但是嘿，您要做什么？

这是我的 BannerPanel 对象的新代码：

```
class BannerPanel extends JPanel {
    Image image;
    int width = 0, height = 0;
    double ratio = 0.0;

    public BannerPanel () {
        try {
            image = ImageIO.read(BannerPanel.class
                    .getClassLoader().getResourceAsStream("banner.png"));
        }
        catch (Exception e) { e.printStackTrace(); }
    }

    @Override
    protected void paintComponent (Graphics g) {
        super.paintComponent(g);

        ratio = (double) getWidth() / image.getWidth(null);
        width = getWidth();
        height = getImageHeight();
        setPreferredSize(new Dimension (width, height));
        setSize(width, height);

        if (image != null) {
            g.drawImage(image, 0, 0, width, height, this);
        }
    }

    public int getImageHeight () {
        return (int) (image.getHeight(null) * ratio);
    }
} 
```

# log4j - 级别的特定记录器

> ID：12190819
> 
> 赞同：5
> 
> 时间：2012-08-30T06:08:24.770
> 
> 标签：log4j

我正在使用 log4j 进行日志记录。我有一个场景，我必须针对不同的严重性使用单独的日志记录。例如，对于包 foo，我必须在控制台中打印严重性为 ERROR 的消息，而我必须在日志文件中打印严重性为 WARN 的消息。我怎样才能配置我的 log4j.xml 相同。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T19:19:39.400

您可以将 LevelMatchFilter 用于您的任务。此外，您不应忘记使用另一个过滤器 - DenyAllFilter - 作为过滤器链中的最后一个过滤器。

您的 log4j.xml 将如下所示：

```
<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/">
    <appender name="consoleAppender" class="org.apache.log4j.ConsoleAppender">
        <layout class="org.apache.log4j.SimpleLayout" />
        <filter class="org.apache.log4j.varia.LevelMatchFilter">
            <param name="LevelToMatch" value="ERROR" />
            <param name="AcceptOnMatch" value="true" />
        </filter>
        <filter class="org.apache.log4j.varia.DenyAllFilter" />     
    </appender>

    <appender name="fileAppender" class="org.apache.log4j.FileAppender">
        <param name="File" value="error.log" /> 
        <layout class="org.apache.log4j.SimpleLayout" />
        <filter class="org.apache.log4j.varia.LevelMatchFilter">
            <param name="LevelToMatch" value="WARN" />
            <param name="AcceptOnMatch" value="true" />
        </filter>
        <filter class="org.apache.log4j.varia.DenyAllFilter" />     
    </appender>

    <logger name="foo">
         <level value="WARN" />
         <appender-ref ref="consoleAppender" />
         <appender-ref ref="fileAppender" />
    </logger>
</log4j:configuration> 
```

# connection-pooling - HBase HTablePool: correct usage

> ID：12190826
> 
> 赞同：5
> 
> 时间：2012-08-30T06:09:06.320
> 
> 标签：connection-pooling, hbase

What is the correct usage pattern of HTablePool? I mean, assume that I have my DAO which is initialised with an instance of HTablePool. This DAO is a member instance of a Stateless Session Bean so it is reused between invocations.

What is the correct usage beween the following?

```
private HTableInterface aTable;

public XYZDAO(final HTablePool pool)
{
    this.aTable = pool.getTable(...);
}

public void doSomething(...)
{
    aTable.get(...)
} 
```

or HTablePool should be used like a Datasource and therefore is more appropriate a usage like this

```
private HTablePool datasource;

public XYZDAO(final HTablePool pool)
{
    this.datasource = pool;
}

public void doSomething(...)
{
    HTableInterface aTable = datasource.getTable(...);
    aTable.get(...);
    aTable.close();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T22:57:27.577

The second approach is the best, you should use `HTablePool` like it was a `Datasource` since the `HTable` class is not thread safe. A call to the `close` method of `HTableInterface` will automatically return the table to the pool.

Note that there is `HConnection` interface that replaces the deprecated `HTablePool` in newer HBase versions.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-17T23:52:43.593

Yes the second approach is better ~~but rather than closing the Table you should put it back in to the pool~~:

```
public void createUser(String username, String firstName, String lastName, String email,    String password, String roles) throws IOException {
    HTable table = rm.getTable(UserTable.NAME);
    Put put = new Put(Bytes.toBytes(username)); put.add(UserTable.DATA_FAMILY,  UserTable.FIRSTNAME,
    Bytes.toBytes(firstName));
    put.add(UserTable.DATA_FAMILY, UserTable.LASTNAME, Bytes.toBytes(lastName));
    put.add(UserTable.DATA_FAMILY, UserTable.EMAIL, Bytes.toBytes(email));
    put.add(UserTable.DATA_FAMILY, UserTable.CREDENTIALS,
    Bytes.toBytes(password));
    put.add(UserTable.DATA_FAMILY, UserTable.ROLES, Bytes.toBytes(roles)); table.put(put);
    table.flushCommits();
    rm.putTable(table);
} 
```

Example Code taken from the Book "HBase: The Definitive Guide".

EDIT: I'm wrong doc after v0.92 states:

> This method is not needed anymore, clients should call HTableInterface.close() rather than returning the tables to the pool Once you are done with it, close your instance of HTableInterface by calling HTableInterface.close() rather than returning the tables to the pool with (deprecated) putTable(HTableInterface).

# java - XML 解析错误：文档元素后出现垃圾 - REST

> ID：12190828
> 
> 赞同：1
> 
> 时间：2012-08-30T06:09:26.063
> 
> 标签：java, xml, rest

我正在开发一个 RESTful Web 服务，它将返回一个 RSS 提要列表，有人添加到我之前实现的提要列表中。

现在，如果我返回**TEXT_PLAIN**回复，这在浏览器中显示得很好，尽管当我尝试返回**APPLICATION_XML**回复时，我收到以下错误：

**XML 解析错误：文档元素后出现垃圾 位置：http://localhost:8080/Assignment1/api/feedlist 第 1 行，第 135 列：SMH 热门标题http://feeds.smh.com.au/rssheadlines/top.xmlUTS 库新闻http://www.lib.uts.edu.au/news/feed/all**

这是代码 - 我无法弄清楚为什么它没有返回格式良好的 XML 页面（我还尝试使用新行和空格（缩进）格式化 XML 回复 - 当然这不起作用）：

```
package au.com.rest;
import java.io.FileNotFoundException;
import java.io.IOException;

import javax.ws.rs.*;
import javax.ws.rs.core.*;
import au.edu.uts.it.wsd.*;

@Path("/feedlist")
public class RESTFeedService {

String feedFile = "/tmp/feeds.txt"; 
String textReply = "";
String xmlReply = "<?xml version=\"1.0\"?><feeds>";
FeedList feedList = new FeedListImpl();

@GET
@Produces(MediaType.APPLICATION_XML)
public String showXmlFeeds() throws FileNotFoundException, IOException
{

    feedList.load(feedFile);
    for (Feed f:feedList.list()){
        xmlReply += "<feed><name>" + f.getName() + "</name>";
        xmlReply += "<uri>" + f.getURI() + "</uri></feed></feeds>";
    }

    return xmlReply;
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T06:13:47.553

编辑：我现在发现了眼前的问题。您正在关闭`feeds`每个输入元素上的元素：

```
for (Feed f:feedList.list()){
    xmlReply += "<feed><name>" + f.getName() + "</name>";
    xmlReply += "<uri>" + f.getURI() + "</uri></feed></feeds>";
} 
```

最小的变化是：

```
for (Feed f:feedList.list()){
    xmlReply += "<feed><name>" + f.getName() + "</name>";
    xmlReply += "<uri>" + f.getURI() + "</uri></feed>";
}
xmlReply += "</feeds>"; 
```

...但是您仍然应该应用下面的其余建议。

* * *

第一步 - 您需要进一步诊断问题。查看浏览器中的源代码，看看它到底在抱怨什么。您自己能看到 XML 中的问题吗？它是什么样子的？

在不知道您正在使用的其余框架的情况下，这看起来可能是与单个实例服务多个请求有关的问题。出于某种原因，您有一个*实例*变量，您在方法中对其进行了变异。你为什么想这么做？如果为每个请求创建一个类的新实例，那应该不是问题——但我不知道是不是这样。

作为第一个更改，请尝试移动此行：

```
String xmlReply = "<?xml version=\"1.0\"?><feeds>"; 
```

作为局部变量进入方法中。

不过在那之后：

*   将所有字段保密
*   避免在这样的循环中使用字符串连接
*   更重要的是，不要手动构建 XML - 使用 XML API 来完成。（内置的 Java API 不是很好，但有很多替代方案。）
*   考虑哪些字段（如果有）是*对象*的真正状态，而不是应该是局部变量的东西。你的对象在逻辑上到底有什么状态？

# python - 接受用户的路径以将文件存储在 Python 中输入的位置

> ID：12190833
> 
> 赞同：1
> 
> 时间：2012-08-30T06:09:45.087
> 
> 标签：python, wxpython

我希望用户选择路径或位置，以便当用户单击按钮时文件可以存储在该位置。我想要类似于我们在 Java 中的文件资源管理器的东西。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T08:39:40.730

我目前正在使用 wxPython 开发一个 GUI，发现[这个网站](http://zetcode.com/wxpython/)非常有用。

它提供了大多数 wxPython 基本功能的信息和代码示例。

[这是完整的电子书](http://www.scribd.com/doc/62314492/The-WxPython-Tutorial)（包含文件对话框示例）

看看吧，值得；）

# seo - 将 google 用户从索引的 html 快照重定向到我的网站主页

> ID：12190835
> 
> 赞同：0
> 
> 时间：2012-08-30T06:09:56.797
> 
> 标签：seo

我有企业列表网站 (www.brate.com)，人们可以在其中搜索本地企业并对其进行评分。整个站点是使用 GWT（即 Ajax）构建的，所有内容都是动态生成的。现在我正处于我希望网站对 SEO 友好的阶段，以下是我的方法，如果它是实现它的最佳方法，请告诉我。

1-创建每个业务及其相关数据（站点、地址、电话号码、用户评论等）的静态 HTML 快照，并将所有生成的 HTML 文件放在一个目录下 2-创建一个站点地图 xml 文件，其中包含所有以上 HTML 链接 3- 配置网站管理员抓取和索引所有生成的 HTML 快照

现在我的逻辑是，当谷歌搜索查询在其搜索结果中列出上述生成的 html 文件之一时，我想将用户重定向到站点主页 (www.brate.com) 而不是 html 快照。我可以在生成的快照中使用像“”这样的重定向吗？如果不是，实现上述逻辑的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T07:48:53.310

Sameeh，GWT 的一种建议方法

1.  确保您已正确处理 GWT 中所有页面的历史令牌。让标记以感叹号 (!) 开头。
2.  使用 #! 将 GWT 历史令牌与生成的页面相关联！符号
3.  让令牌像我们对[SEO 中的任何 URL 优化所做的那样具有丰富的关键字](http://www.searchenabler.com/blog/url-optimization-tips-for-seo/)

阅读[https://developers.google.com/webmasters/ajax-crawling/](https://developers.google.com/webmasters/ajax-crawling/)以了解 #! 符号。

Bing 支持的详细信息：[http ://searchengineland.com/bing-now-supports-googles-crawlable-ajax-standard-84149](http://searchengineland.com/bing-now-supports-googles-crawlable-ajax-standard-84149)

# c# - 如何调试与低级 API（如 I/O 完成端口）交互的代码？

> ID：12190836
> 
> 赞同：3
> 
> 时间：2012-08-30T06:10:05.063
> 
> 标签：c#, visual-studio-2010, debugging, asynchronous, iocp

我编写了一个控制台应用程序，它使用 `Socket`'s 的`*Async`一组方法，它时不时地崩溃。它没有向我显示它在哪里引发了同步代码等异常，控制台只是关闭了，我不知道我做错了什么。

当涉及到这样的异步操作时，有没有办法在不知道将`try`/`catch`块放在哪里的情况下检测异常？

我只需要知道代码的哪一部分导致我的应用程序崩溃。

**编辑：**

未处理异常的常见情况是，当您使用 Visual Studio 调试代码时，它会暂停执行并向您显示导致异常的代码行（或至少是异常消息）。但是在某些情况下（例如与像 IOCP 这样的低级 API 交互），您的程序只会崩溃，并且调试结束时没有任何关于其原因的信息。

我需要的是一种查看特定异常的方法：
“发生了什么或在哪里（以哪种方法）发生了，所以我的程序崩溃了？”

所以我不会问“我做错了什么？”，我会问“我怎么才能知道我做错了什么？”

*   我可以在抛出异常的地方中断执行吗？
*   我可以在崩溃后查看调用堆栈以识别导致它的方法吗？
*   你能提供任何建议来避免这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T08:41:40.587

单击`Debug-menu -> Exceptions`。确保`Common Language Runtime Exceptions`被抛出。有时 IDE 会取消选中此选项。我不知道为什么，但这很烦人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T10:09:36.327

启用[System.Net 日志记录](http://msdn.microsoft.com/en-us/library/bb203855.aspx)以查看下面发生的情况

# linux - 向现有文件类型添加新的语法格式

> ID：12190837
> 
> 赞同：2
> 
> 时间：2012-08-30T06:10:06.157
> 
> 标签：linux, vim, vi

所以我在语法文件中有一些自定义的 vi 着色。

这完美地工作（为第 20-30 行提供蓝色背景）

```
syntax region mytest start="\%20l" end="\%30l"

hi mytest ctermbg=Blue 
```

这根本不起作用（尝试为以 x 开头并以 y 结尾的范围提供蓝色背景）：

```
syntax region mytest2 start="x" end="y" fold transparent

hi mytest2 ctermbg=Blue 
```

我试图弄清楚如何在起点/终点之间进行格式化。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T06:33:52.723

我误解了“透明”的功能。删除透明解决了这个问题。

# list - 属性文件中的字符串、列表和映射 - 如何定义映射？

> ID：12190839
> 
> 赞同：3
> 
> 时间：2012-08-30T06:10:09.877
> 
> 标签：list, properties, map, dropdownbox

如果给定一个 .properties 文件并要求为背景颜色添加一个命名值，则可以执行以下操作：

```
page.background.colour=white 
```

如果再往下走，有一个新的要求来定义一个命名的颜色列表，要么使用逗号：

```
page.background.colours=white,grey,black 
```

或者也可能是重复的属性名称：

```
page.background.colours=white
page.background.colours=grey
page.background.colours=black 
```

现在如何定义命名地图？比如说，有一个颜色的下拉列表，例如：

```
<select name="page.background.colours">
   <option value="#FFFFFF">White</option>
   <option value="#CCCCCC">Grey</option>
   <option value="#000000">Black</option>
</select> 
```

突然想到以下内容，但不知何故有一种感觉，我正在强迫一个方棒进入一个圆孔：

```
page.background.colours.#FFFFFF=White
page.background.colours.#CCCCCC=Grey
page.background.colours.#000000=Black 
```

再往下，如何保证先白后黑的顺序？想到以下内容，但又感觉不对：

```
page.background.colours.#FFFFFF.follows=
page.background.colours.#CCCCCC.follows=page.background.colours.#FFFFFF
page.background.colours.#000000.follows=page.background.colours.#CCCCCC 
```

我知道 XML、JSON 等，但如果可能的话，我想坚持使用 .properties 文件。

谢谢你的想法！

# java - 在 JAVA 中舍入

> ID：12190845
> 
> 赞同：0
> 
> 时间：2012-08-30T06:10:48.133
> 
> 标签：java

我想为 ex 取整一个值：

> 12.166666 ----> 12.00
> 
> 12.49999 ----> 12.00
> 
> 12.5111 ----> 13.00
> 
> 12.9999 ----> 13.00

我想四舍五入wrt 50 paise。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-30T06:14:01.397

你可以看看[`Math.round(double a)`](http://docs.oracle.com/javase/7/docs/api/java/lang/Math.html#round%28double%29)方法。

```
System.out.println(Math.round(12.51));//Yields 13
System.out.println(Math.round(12.49));//Yields 12
System.out.println(Math.round(12.50));//Yields 13 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T06:12:57.150

您可以使用`Math.round`. 有关文档，请查看： [http://docs.oracle.com/javase/7/docs/api/java/lang/Math.html#round(double)](http://docs.oracle.com/javase/7/docs/api/java/lang/Math.html#round(double))

# java - 退出 java (Grails) 应用程序后，“已用”内存不会释放

> ID：12190846
> 
> 赞同：0
> 
> 时间：2012-08-30T06:10:48.947
> 
> 标签：java, grails, memory, ubuntu, xen

`Linux 3.2.0-24-virtual #37-Ubuntu SMP Wed Apr 25 12:51:49 UTC 2012 i686 i686 i386 GNU/Linux`在 Xen VPS 中使用。

在我运行 Grails java 应用程序之前，运行`free -m`表明：

```
 total       used       free     shared    buffers     cached
Mem:          4031        155       3875          0         30         87
-/+ buffers/cache:         37       3994
Swap:         8191          0       8191 
```

运行 Grails 应用程序，执行一些内存密集型处理，并通过 退出`Ctrl-C`，它表明：

```
 total       used       free     shared    buffers     cached
Mem:          4031       1031       2999          0         33        957
-/+ buffers/cache:         40       3991
Swap:         8191          0       8191 
```

在重新启动之前似乎不会改变。`top`并且`ps aux`不要表示任何大量的内存使用。Grails 应用程序是我在这台机器上运行的唯一应用程序。

也许我误解了这一点，但我担心记忆似乎并没有在退出后释放。通常我会怀疑内存泄漏，但是一旦 java 应用程序被终止，这怎么可能呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T08:42:30.977

您实际上是在误解命令的输出。

该`Mem`行显示了内核当前分配了多少内存；但是，内核会延迟释放内存。如果没有其他进程正在请求内存，它可能会保留分配的页面（可能是从磁盘读取的内容）。

您看到“干净”已用/空闲内存的`-/+ buffers/cache`行是您可以看到您的内存使用情况大致相同的行。

你可以在网上找到一些更详细的解释，例如[这里](http://www.thepocketsite.com/2009/07/understanding-the-free-command-in-linux/)。

# tridion - 使用元数据字段创建多媒体组件。使用核心服务

> ID：12190850
> 
> 赞同：2
> 
> 时间：2012-08-30T06:11:01.123
> 
> 标签：tridion, tridion-2011

我正在使用核心服务创建多媒体组件，一切正常。但是，当在创建多媒体组件的多媒体模式上定义元数据模式字段时，我会收到以下错误：-

找不到[http://www.tridion.com/ContentManager/5.0/DefaultMultimediaSchema:Metadata](http://www.tridion.com/ContentManager/5.0/DefaultMultimediaSchema:Metadata)。

当我为多媒体组件提供默认多媒体架构的 TCM ID 时，会显示此消息。由于元数据字段保存在 Tridion 数据库中，所以我首先必须从代理检索这些字段，或者最好的解决方案是什么，请提出建议。下面是示例代码。如果有人有任何想法为元数据字段提供默认值以及如何检索它们（有/没有查询代理数据库），请修改它：-

```
 public static string UploadMultiMediaComponent(string folderUri, string title, string schemaID)
    {
        core_service.ServiceReference1.SessionAwareCoreService2010Client client = new SessionAwareCoreService2010Client(); 
        client.ClientCredentials.Windows.ClientCredential.UserName = "myUserName"; 
        client.ClientCredentials.Windows.ClientCredential.Password = "myPassword"; client.Open();

        ComponentData multimediaComponent = (ComponentData)client.GetDefaultData(
                                             ItemType.Component, folderUri);
        multimediaComponent.Title = title;

        multimediaComponent.ComponentType = ComponentType.Multimedia;
        multimediaComponent.Schema.IdRef =schemaID;

        //multimediaComponent.Metadata = "";

        StreamUpload2010Client streamClient = new StreamUpload2010Client();

        FileStream objfilestream = new FileStream(@"\My Documents\images.jpg",
                                                  FileMode.Open, FileAccess.Read);
        string tempLocation = streamClient.UploadBinaryContent("images.jpg",
                                                               objfilestream);

        BinaryContentData binaryContent = new BinaryContentData();
        binaryContent.UploadFromFile = tempLocation;
        binaryContent.Filename = "images.jpg";
        binaryContent.MultimediaType = new LinkToMultimediaTypeData()
        {
            // for jpg file
            IdRef = "tcm:0-2-65544"
        };
        multimediaComponent.BinaryContent = binaryContent;

        IdentifiableObjectData savedComponent = client.Save(multimediaComponent,
                                                            new ReadOptions());

        client.CheckIn(savedComponent.Id, null);
        streamClient.Close();
        client.Close();
        Console.WriteLine(savedComponent.Id);
        //}
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T09:59:59.553

我不知道为什么您的代码不起作用，但以下代码对我有用

```
public static ComponentData GenerateMultiMediaComponent(TridionGeneration tridionGeneration, XmlData newsArticle, string componentName)
        {
            try
            {
                Dictionary<string, object> dicTridion = Common.GetTridionObject(tridionGeneration.client, ItemType.Component, tridionGeneration.Settings.ComponentFolderUri, componentName);
                int objectCount = (int)dicTridion["count"];

                SchemaFieldsData schemaFields = tridionGeneration.client.ReadSchemaFields(tridionGeneration.Settings.SchemaUri, true, new ReadOptions());

                ComponentData componentData = (ComponentData)tridionGeneration.client.GetDefaultData(ItemType.Component, tridionGeneration.Settings.ComponentFolderUri);

                if (schemaFields.Fields != null)
                {
                    var fields = Fields.ForContentOf(schemaFields);
                    Helper.FillSchemaFields(tridionGeneration, fields);
                    componentData.Content = fields.ToString();
                }

                if (schemaFields.MetadataFields != null)
                {
                   var  metafields = Fields.ForMetadataOf(schemaFields, componentData);
                    Helper.FillSchemaFields(tridionGeneration, metafields);
                    componentData.Metadata = metafields.ToString();
                }

                componentData.Title = (objectCount == 0) ? componentName : componentName + " " + (objectCount + 1).ToString();
                componentData.ComponentType = ComponentType.Multimedia;

                StreamUpload2010Client streamClient = new StreamUpload2010Client();

                FileStream objfilestream = new FileStream(@"[IMAGE_PATH]", FileMode.Open, FileAccess.Read);
                string tempLocation = streamClient.UploadBinaryContent("images.jpg", objfilestream);
                BinaryContentData binaryContent = new BinaryContentData();
                binaryContent.UploadFromFile = tempLocation;
                binaryContent.Filename = "[IMAGE_NAME]";
                componentData.BinaryContent = binaryContent;
                binaryContent.MultimediaType = new LinkToMultimediaTypeData()
                {
                    IdRef = "tcm:0-2-65544"
                };

                componentData = (ComponentData)tridionGeneration.client.Create(componentData, new ReadOptions());

                return componentData;
            }
            catch (Exception ex)
            {
                return null;
            }
        } 
```

这是助手类：

```
public static class Helper
    {
        public static void FillSchemaFields(TridionGeneration tridionGeneration, Fields fields)
        {
            List<XmlData> data = XmlHelper.xmlData;

            var ofield = fields.GetEnumerator();
            while (ofield.MoveNext())
            {
                Field f = ofield.Current;
                FillFieldValue(tridionGeneration, fields, f, data[0]);
            }
        }

        private static void FillFieldValue(TridionGeneration tridionGeneration, Fields fields, Field f, XmlData data)
        {
            if (f.Type == typeof(MultimediaLinkFieldDefinitionData))
            {
                fields[f.Name].Value = tridionGeneration.Settings.DefaultImageUri;
            }
            else if (f.Type != typeof(EmbeddedSchemaFieldDefinitionData))
            {
                foreach (XmlData fieldvalue in data.Attributes)
                {
                    if (f.Type == typeof(DateFieldDefinitionData))
                    {
                        if (fieldvalue.text.ToLower() == f.Name.ToLower())
                        {
                            fields[f.Name].Value = Convert.ToDateTime(fieldvalue.value).ToString("yyyy-MM-ddTHH:mm:ss");
                        }
                        else
                        {
                            string val = FindSchemaValue(tridionGeneration, fieldvalue.Attributes, f.Name);
                            if (!string.IsNullOrEmpty(val))
                            {
                                fields[f.Name].Value = Convert.ToDateTime(val).ToString("yyyy-MM-ddTHH:mm:ss");
                            }
                        }
                    }
                    else
                    {
                        if (fieldvalue.text.ToLower() == f.Name.ToLower())
                        {
                            fields[f.Name].Value = System.Net.WebUtility.HtmlEncode(fieldvalue.value);
                        }
                        else
                        {
                            string val = FindSchemaValue(tridionGeneration, fieldvalue.Attributes, f.Name);
                            if (!string.IsNullOrEmpty(val))
                            {
                                fields[f.Name].Value = System.Net.WebUtility.HtmlEncode(val);
                            }
                        }
                    }
                }
            }
            else
            {
                Fields fs = f.GetSubFields();
                var ofield = fs.GetEnumerator();
                while (ofield.MoveNext())
                {
                    Field ff = ofield.Current;
                    FillFieldValue(tridionGeneration, fs, ff, data);
                }
            }
        }

        private static string FindSchemaValue(TridionGeneration tridionGeneration, List<XmlData> data, string fieldname)
        {
            foreach (XmlData fieldvalue in data)
            {
                if (fieldvalue.text.ToLower() == fieldname.ToLower())
                {
                    return fieldvalue.value;
                }
                else
                {
                    FindSchemaValue(tridionGeneration, fieldvalue.Attributes, fieldname);
                }
            }
            return "";
        }
    } 
```

和字段类：

```
public class Fields
    {
        private ItemFieldDefinitionData[] definitions;
        private XmlNamespaceManager namespaceManager;

        private XmlElement root; // the root element under which these fields live

        // at any point EITHER data OR parent has a value
        private SchemaFieldsData data; // the schema fields data as retrieved from the core service
        private Fields parent; // the parent fields (so we're an embedded schema), where we can find the data

        public Fields(SchemaFieldsData _data, ItemFieldDefinitionData[] _definitions, string _content = null, string _rootElementName = null)
        {
            data = _data;
            definitions = _definitions;
            var content = new XmlDocument();
            if (!string.IsNullOrEmpty(_content))
            {
                content.LoadXml(_content);
            }
            else
            {
                content.AppendChild(content.CreateElement(string.IsNullOrEmpty(_rootElementName) ? _data.RootElementName : _rootElementName, _data.NamespaceUri));
            }
            root = content.DocumentElement;
            namespaceManager = new XmlNamespaceManager(content.NameTable);
            namespaceManager.AddNamespace("custom", _data.NamespaceUri);
        }
        public Fields(Fields _parent, ItemFieldDefinitionData[] _definitions, XmlElement _root)
        {
            definitions = _definitions;
            parent = _parent;
            root = _root;
        }

        public static Fields ForContentOf(SchemaFieldsData _data)
        {
            return new Fields(_data, _data.Fields);
        }
        public static Fields ForContentOf(SchemaFieldsData _data, ComponentData _component)
        {
            return new Fields(_data, _data.Fields, _component.Content);
        }
        public static Fields ForMetadataOf(SchemaFieldsData _data, RepositoryLocalObjectData _item)
        {
            return new Fields(_data, _data.MetadataFields, _item.Metadata, "Metadata");
        }

        public string NamespaceUri
        {
            get { return data != null ? data.NamespaceUri : parent.NamespaceUri; }
        }
        public XmlNamespaceManager NamespaceManager
        {
            get { return parent != null ? parent.namespaceManager : namespaceManager; }
        }

        internal IEnumerable<XmlElement> GetFieldElements(ItemFieldDefinitionData definition)
        {
            return root.SelectNodes("custom:" + definition.Name, NamespaceManager).OfType<XmlElement>();
        }
        internal XmlElement AddFieldElement(ItemFieldDefinitionData definition)
        {
            var newElement = root.OwnerDocument.CreateElement(definition.Name, NamespaceUri);

            XmlNodeList nodes = root.SelectNodes("custom:" + definition.Name, NamespaceManager);
            XmlElement referenceElement = null;
            if (nodes.Count > 0)
            {
                referenceElement = (XmlElement)nodes[nodes.Count - 1];
            }
            else
            {
                // this is the first value for this field, find its position in the XML based on the field order in the schema
                bool foundUs = false;
                for (int i = definitions.Length - 1; i >= 0; i--)
                {
                    if (!foundUs)
                    {
                        if (definitions[i].Name == definition.Name)
                        {
                            foundUs = true;
                        }
                    }
                    else
                    {
                        var values = GetFieldElements(definitions[i]);
                        if (values.Count() > 0)
                        {
                            referenceElement = values.Last();
                            break; // from for loop
                        }
                    }
                } // for every definition in reverse order
            } // no existing values found
            root.InsertAfter(newElement, referenceElement); // if referenceElement is null, will insert as first child
            return newElement;
        }

        public IEnumerator<Field> GetEnumerator()
        {
            return (IEnumerator<Field>)new FieldEnumerator(this, definitions);
        }
        public Field this[string _name]
        {
            get
            {
                var definition = definitions.First<ItemFieldDefinitionData>(ifdd => ifdd.Name == _name);
                if (definition == null) throw new ArgumentOutOfRangeException("Unknown field '" + _name + "'");
                return new Field(this, definition);
            }
        }

        public override string ToString()
        {
            return root.OuterXml;
        }

    }

    public class FieldEnumerator : IEnumerator<Field>
    {
        private Fields fields;
        private ItemFieldDefinitionData[] definitions;

        // Enumerators are positioned before the first element until the first MoveNext() call
        int position = -1;

        public FieldEnumerator(Fields _fields, ItemFieldDefinitionData[] _definitions)
        {
            fields = _fields;
            definitions = _definitions;
        }

        public bool MoveNext()
        {
            position++;
            return (position < definitions.Length);
        }

        public void Reset()
        {
            position = -1;
        }

        object IEnumerator.Current
        {
            get
            {
                return Current;
            }
        }

        public Field Current
        {
            get
            {
                try
                {
                    return new Field(fields, definitions[position]);
                }
                catch (IndexOutOfRangeException)
                {
                    throw new InvalidOperationException();
                }
            }
        }

        public void Dispose()
        {
        }
    }

    public class Field
    {
        private Fields fields;
        private ItemFieldDefinitionData definition;

        public Field(Fields _fields, ItemFieldDefinitionData _definition)
        {
            fields = _fields;
            definition = _definition;
        }

        public string Name
        {
            get { return definition.Name; }
        }
        public Type Type
        {
            get { return definition.GetType(); }
        }
        public string Value
        {
            get
            {
                return Values.Count > 0 ? Values[0] : null;
            }
            set
            {
                if (Values.Count == 0) fields.AddFieldElement(definition);
                Values[0] = value;
            }
        }
        public ValueCollection Values
        {
            get
            {
                return new ValueCollection(fields, definition);
            }
        }

        public void AddValue(string value = null)
        {
            XmlElement newElement = fields.AddFieldElement(definition);
            if (value != null) newElement.InnerText = value;
        }

        public void RemoveValue(string value)
        {
            var elements = fields.GetFieldElements(definition);
            foreach (var element in elements)
            {
                if (element.InnerText == value)
                {
                    element.ParentNode.RemoveChild(element);
                }
            }
        }

        public void RemoveValue(int i)
        {
            var elements = fields.GetFieldElements(definition).ToArray();
            elements[i].ParentNode.RemoveChild(elements[i]);
        }

        public IEnumerable<Fields> SubFields
        {
            get
            {
                var embeddedFieldDefinition = definition as EmbeddedSchemaFieldDefinitionData;
                if (embeddedFieldDefinition != null)
                {
                    var elements = fields.GetFieldElements(definition);
                    foreach (var element in elements)
                    {
                        yield return new Fields(fields, embeddedFieldDefinition.EmbeddedFields, (XmlElement)element);
                    }
                }
            }
        }

        public Fields GetSubFields(int i = 0)
        {
            var embeddedFieldDefinition = definition as EmbeddedSchemaFieldDefinitionData;
            if (embeddedFieldDefinition != null)
            {
                var elements = fields.GetFieldElements(definition);
                if (i == 0 && !elements.Any())
                {
                    // you can always set the first value of any field without calling AddValue, so same applies to embedded fields
                    AddValue();
                    elements = fields.GetFieldElements(definition);
                }
                return new Fields(fields, embeddedFieldDefinition.EmbeddedFields, elements.ToArray()[i]);
            }
            else
            {
                throw new InvalidOperationException("You can only GetSubField on an EmbeddedSchemaField");
            }
        }
        // The subfield with the given name of this field
        public Field this[string name]
        {
            get { return GetSubFields()[name]; }
        }
        // The subfields of the given value of this field
        public Fields this[int i]
        {
            get { return GetSubFields(i); }
        }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T14:42:56.190

你能试试这个吗？

```
multimediaComponent.Metadata = "<Metadata/>"; 
```

# c++ - C++ 编译文件

> ID：12190851
> 
> 赞同：0
> 
> 时间：2012-08-30T06:11:01.500
> 
> 标签：c++, compilation, abstract-class

我有一个名为 LibItem 的抽象基类，以及两个名为 Book 和 DVD 的继承类。我为这些类中的每一个都制作了 .h 和 .cpp 文件。

我现在想在 main 中做一些代码来使用这些文件。

目前，我只是在我的主代码顶部“包含” .h 文件。这是行不通的。

我需要在使用它们之前编译这些文件吗？如果是这样，我该怎么做？

**更新**

这是我的代码：

```
//---------------------------------------------------------------------------

#ifndef BookH
#define BookH

class Book : public LibItem
{
public:
    Book(const std::string&, const std::string&, const std::string&, const std::string&, const std::string&, const std::string&, const std::string&);
    void setISBN(const std::string&);
    std::string getISBN();
    void PrintDetails();

private:
    Book();
    std::string ISBN;

};

//---------------------------------------------------------------------------
#endif 
```

我收到以下错误：

```
[BCC32 Error] Book.h(7): E2303 Type name expected
[BCC32 Error] Book.h(9): E2090 Qualifier 'std' is not a class or namespace name
[BCC32 Error] Book.h(9): E2293 ) expected
[BCC32 Error] Book.h(10): E2090 Qualifier 'std' is not a class or namespace name 
```

我可以为这些错误提供一些帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T06:15:13.327

您必须包含 all.h 文件，其中包含要在主文件中使用的声明。此外，您必须将所有 .cpp 文件添加到您的项目/makefile/etc 中才能编译它，因为 .h 文件不是编译单元...

# unit-testing - 我应该在设置中还是在测试用例中初始化模拟对象？

> ID：12190863
> 
> 赞同：2
> 
> 时间：2012-08-30T06:12:08.677
> 
> 标签：unit-testing, mocking, tdd

在借助模拟/假对象的单元测试中，我想知道如果我的测试类包含测试同一类的方法（因此，需要的假对象应该是所有测试用例都相同）。像这样的东西：

```
class FooTests
{
    Mock<IBar> mockBar;
    Foo fooUnderTest;

    [SetUp]
    public void Setup()
    {
        mockBar = new Mock<IBar>();
        fooUnderTest = new fooUnderTest(mockBar.Object);
    }

    [Test]
    public void MyTest()
    {
        //setup mock methods
        mockBar.SetUp( ... )

        //test
        fooUnderTest.TestSomething()

        //assert something here

    }
} 
```

似乎这会阻止我们在每个测试用例中将代码复制到 mockBar 和 fooUnderTest，但缺点是我必须声明类变量 mockBar 和 fooUnderTest（或者这真的是一个缺点吗？），如果我这样做会有问题想要进行一些特殊的设置（例如，如果在某些测试用例中我想覆盖 Foo 的一些虚拟方法）。有什么建议最好的做法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T07:14:06.403

*   如果**套件/夹具中的所有测试共享**一些通用设置（包括对模拟合作者设置一些期望），**则移动到 Setup 方法**。（测试中与读者无关的附带细节同上）
*   如果一个测试用例想要**扩展**通用设置，请在测试用例本身内添加特定**设置**
*   如果一个测试用例**需要不同的设置**（尽管有很大的重叠），**移动到不同的测试套件**并找出一些其他机制来共享设置（例如，通过组合、实用方法、对象母亲等）

# facebook - 是否可以通过消息发送 facebook 应用程序邀请并避免通知已经使用应用程序的用户

> ID：12190864
> 
> 赞同：0
> 
> 时间：2012-08-30T06:12:10.227
> 
> 标签：facebook

我想避免通知已经使用此应用程序的用户，并且在受邀者接受邀请后，他们俩都会获得奖励。

我使用 facebook 请求对话框，它允许用户选择他/她的所有朋友并且无法显示邀请消息，当他们加入游戏时，我将所有受邀者 id 存储到数据库中，他们会获得奖励。

这是我的代码。

```
function facebookInvite(){
    FB.ui({
        method: 'apprequests',
        message: 'Please join, and we’ll both get free items!”',
        data: encode(Player.id)
    }, function(response) { 
        if(response && response.request){
            $.ajax({
                type: "POST",
                url: "call/request.php",
                data: {
                    from : Player.id,
                    to : response.to.join(),
                }   
            });            
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T08:22:40.183

# java - 将精灵添加到要使用的池中

> ID：12190866
> 
> 赞同：0
> 
> 时间：2012-08-30T06:12:18.443
> 
> 标签：java, android, andengine

好的，所以我遇到了一个小难题。

我有一个通用池，可以让我回收和重复使用我的精灵。问题是我有 6 个纹理要加载到池中，以确保每个纹理都有机会从池中拉出。

现在发生的事情是同一个精灵被一遍又一遍地回收和使用。这是我的池代码。

```
public class ObjectPool extends GenericPool<Sprite> {
// ===========================================================
// Constants
// ===========================================================

// ===========================================================
// Fields
// ===========================================================
private TextureRegion           texture1;
private TextureRegion           texture2;
private TextureRegion           texture3;
private TextureRegion           texture4;
private TextureRegion           texture5;
private TextureRegion           texture6;

private final Scene                     Gamescene;

private final VertexBufferObjectManager spriteVertexBuffer;

private Sprite                          fruit;

private final float                     CAMERA_WIDTH;
private final float                     CAMERA_HEIGHT;
public static boolean                   sprite_touched;
private final Camera                    camera;
// Variables

private final float                     minDuration = 3.1f;
private final float                     maxDuration = 5.1f;
private final TextureRegion             blueParticleRegion;

private final Sound                     PersonTouchedSound;

private PointParticleEmitter            particleEmitter;
private SpriteParticleSystem            particleSystem;
    private Random random = new Random();
// ===========================================================
// Constructors
// ===========================================================
public ObjectPool(final TextureRegion Region1,final TextureRegion Region2,final TextureRegion Region3,final TextureRegion Region4,final TextureRegion Region5, final TextureRegion Region6,
        VertexBufferObjectManager spriteBufferObject, Camera camera,
        Sound sound, Scene scene, TextureRegion particle) {

this.texture1 = Region1;
this.texture2 = Region2;
this.texture3 = Region3;
this.texture4 = Region4;
this.texture5 = Region5;
this.texture6 = Region6;

this.CAMERA_HEIGHT = camera.getHeight();
this.CAMERA_WIDTH = camera.getWidth();
this.camera = camera;
this.PersonTouchedSound = sound;
this.blueParticleRegion = particle;
Gamescene = scene;
initTrail(-70, -70);

this.spriteVertexBuffer = spriteBufferObject;

}

// ===========================================================
// Getter & Setter
// ===========================================================

// ===========================================================
// Methods for/from SuperClass/Interfaces
// ===========================================================
@Override
protected Sprite onAllocatePoolItem() {

    int sprite = random.nextInt(1)+6;

    switch(sprite){
    case 1:
fruit = new Sprite(210, -10, 60, 100, this.texture1,
        this.spriteVertexBuffer) {
    @Override
    public boolean onAreaTouched(final TouchEvent pSceneTouchEvent,
            final float pTouchAreaLocalX, final float pTouchAreaLocalY) {
    // Detects if player is outside of bounds
    final float width = this.getWidth();
    final float height = this.getHeight();
    float x = pSceneTouchEvent.getX() - width / 2;
    float y = pSceneTouchEvent.getY() - height / 2;

    if (x < 0)
        x = 0;
    if (y < 0)
        y = 0;
    if (x > (CAMERA_WIDTH - width))
        x = CAMERA_WIDTH - width;
    if (y > (CAMERA_HEIGHT - height))
        y = (CAMERA_HEIGHT - height);

    moveTrail(x, this.getY());
    if (pSceneTouchEvent.isActionDown()) {

    this.setScale(2f);
    sprite_touched = true;
    PersonTouchedSound.play();
    }

    if (pSceneTouchEvent.isActionUp()) {
    this.setScale(1f);
    particleEmitter.setCenter(-70, -70);
    sprite_touched = false;
    }

    this.setPosition(x, this.getY());

    return true;

    }
};
break;

    case 2:

        fruit = new Sprite(210, -10, 60, 100, this.texture2,
                this.spriteVertexBuffer) {
            @Override
            public boolean onAreaTouched(final TouchEvent pSceneTouchEvent,
                    final float pTouchAreaLocalX, final float pTouchAreaLocalY) {
            // Detects if player is outside of bounds
            final float width = this.getWidth();
            final float height = this.getHeight();
            float x = pSceneTouchEvent.getX() - width / 2;
            float y = pSceneTouchEvent.getY() - height / 2;

            if (x < 0)
                x = 0;
            if (y < 0)
                y = 0;
            if (x > (CAMERA_WIDTH - width))
                x = CAMERA_WIDTH - width;
            if (y > (CAMERA_HEIGHT - height))
                y = (CAMERA_HEIGHT - height);

            moveTrail(x, this.getY());
            if (pSceneTouchEvent.isActionDown()) {

            this.setScale(2f);
            sprite_touched = true;
            PersonTouchedSound.play();
            }

            if (pSceneTouchEvent.isActionUp()) {
            this.setScale(1f);
            particleEmitter.setCenter(-70, -70);
            sprite_touched = false;
            }

            this.setPosition(x, this.getY());

            return true;

            }
        };
        break;
    case 3:
        fruit = new Sprite(210, -10, 60, 100, this.texture3,
                this.spriteVertexBuffer) {
            @Override
            public boolean onAreaTouched(final TouchEvent pSceneTouchEvent,
                    final float pTouchAreaLocalX, final float pTouchAreaLocalY) {
            // Detects if player is outside of bounds
            final float width = this.getWidth();
            final float height = this.getHeight();
            float x = pSceneTouchEvent.getX() - width / 2;
            float y = pSceneTouchEvent.getY() - height / 2;

            if (x < 0)
                x = 0;
            if (y < 0)
                y = 0;
            if (x > (CAMERA_WIDTH - width))
                x = CAMERA_WIDTH - width;
            if (y > (CAMERA_HEIGHT - height))
                y = (CAMERA_HEIGHT - height);

            moveTrail(x, this.getY());
            if (pSceneTouchEvent.isActionDown()) {

            this.setScale(2f);
            sprite_touched = true;
            PersonTouchedSound.play();
            }

            if (pSceneTouchEvent.isActionUp()) {
            this.setScale(1f);
            particleEmitter.setCenter(-70, -70);
            sprite_touched = false;
            }

            this.setPosition(x, this.getY());

            return true;

            }
        };
        break;
    case 4:
        fruit = new Sprite(210, -10, 60, 100, this.texture4,
                this.spriteVertexBuffer) {
            @Override
            public boolean onAreaTouched(final TouchEvent pSceneTouchEvent,
                    final float pTouchAreaLocalX, final float pTouchAreaLocalY) {
            // Detects if player is outside of bounds
            final float width = this.getWidth();
            final float height = this.getHeight();
            float x = pSceneTouchEvent.getX() - width / 2;
            float y = pSceneTouchEvent.getY() - height / 2;

            if (x < 0)
                x = 0;
            if (y < 0)
                y = 0;
            if (x > (CAMERA_WIDTH - width))
                x = CAMERA_WIDTH - width;
            if (y > (CAMERA_HEIGHT - height))
                y = (CAMERA_HEIGHT - height);

            moveTrail(x, this.getY());
            if (pSceneTouchEvent.isActionDown()) {

            this.setScale(2f);
            sprite_touched = true;
            PersonTouchedSound.play();
            }

            if (pSceneTouchEvent.isActionUp()) {
            this.setScale(1f);
            particleEmitter.setCenter(-70, -70);
            sprite_touched = false;
            }

            this.setPosition(x, this.getY());

            return true;

            }
        };
        break;
    case 5:
        fruit = new Sprite(210, -10, 60, 100, this.texture5,
                this.spriteVertexBuffer) {
            @Override
            public boolean onAreaTouched(final TouchEvent pSceneTouchEvent,
                    final float pTouchAreaLocalX, final float pTouchAreaLocalY) {
            // Detects if player is outside of bounds
            final float width = this.getWidth();
            final float height = this.getHeight();
            float x = pSceneTouchEvent.getX() - width / 2;
            float y = pSceneTouchEvent.getY() - height / 2;

            if (x < 0)
                x = 0;
            if (y < 0)
                y = 0;
            if (x > (CAMERA_WIDTH - width))
                x = CAMERA_WIDTH - width;
            if (y > (CAMERA_HEIGHT - height))
                y = (CAMERA_HEIGHT - height);

            moveTrail(x, this.getY());
            if (pSceneTouchEvent.isActionDown()) {

            this.setScale(2f);
            sprite_touched = true;
            PersonTouchedSound.play();
            }

            if (pSceneTouchEvent.isActionUp()) {
            this.setScale(1f);
            particleEmitter.setCenter(-70, -70);
            sprite_touched = false;
            }

            this.setPosition(x, this.getY());

            return true;

            }
        };
        break;
    case 6:
        fruit = new Sprite(210, -10, 60, 100, this.texture6,
                this.spriteVertexBuffer) {
            @Override
            public boolean onAreaTouched(final TouchEvent pSceneTouchEvent,
                    final float pTouchAreaLocalX, final float pTouchAreaLocalY) {
            // Detects if player is outside of bounds
            final float width = this.getWidth();
            final float height = this.getHeight();
            float x = pSceneTouchEvent.getX() - width / 2;
            float y = pSceneTouchEvent.getY() - height / 2;

            if (x < 0)
                x = 0;
            if (y < 0)
                y = 0;
            if (x > (CAMERA_WIDTH - width))
                x = CAMERA_WIDTH - width;
            if (y > (CAMERA_HEIGHT - height))
                y = (CAMERA_HEIGHT - height);

            moveTrail(x, this.getY());
            if (pSceneTouchEvent.isActionDown()) {

            this.setScale(2f);
            sprite_touched = true;
            PersonTouchedSound.play();
            }

            if (pSceneTouchEvent.isActionUp()) {
            this.setScale(1f);
            particleEmitter.setCenter(-70, -70);
            sprite_touched = false;
            }

            this.setPosition(x, this.getY());

            return true;

            }
        };
        break;
    }

return fruit;

}

@Override
protected void onHandleObtainItem(final Sprite pItem) {
pItem.reset();

}

@Override
protected void onHandleRecycleItem(final Sprite pItem) {
pItem.setVisible(false);
pItem.setPosition(210, -5);
pItem.setIgnoreUpdate(true);
particleEmitter.setCenter(-70, -70);
pItem.clearEntityModifiers();
}

private void initTrail(float x, float y) {

this.particleEmitter = new PointParticleEmitter(x, y);

this.particleSystem = new SpriteParticleSystem(particleEmitter, 100, 100,
        360, this.blueParticleRegion, spriteVertexBuffer);

particleSystem.addParticleInitializer(new AlphaParticleInitializer<Sprite>(
        1));
particleSystem
        .addParticleInitializer(new BlendFunctionParticleInitializer<Sprite>(
                GLES20.GL_BLEND_COLOR, GLES20.GL_ONE));
particleSystem
        .addParticleInitializer(new VelocityParticleInitializer<Sprite>(0));
particleSystem
        .addParticleInitializer(new ExpireParticleInitializer<Sprite>(.6f));
particleSystem.addParticleModifier(new ScaleParticleModifier<Sprite>(0, 1,
        1, 0));

Gamescene.attachChild(particleSystem);
}

public void moveTrail(float x, float y) {
particleEmitter.setCenter(x, y);
}

private void fillPool(){

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T20:39:45.220

您必须创建 6 个池而不是一个，或者使用 TiledTextureRegion 并在获取项目时切换到所需的图块。

# android - Dynamically SetRightMagin of Textview

> ID：12190867
> 
> 赞同：1
> 
> 时间：2012-08-30T06:12:24.637
> 
> 标签：android, android-layout

I want to code the below line programmatically in android. Please any one help me to solve it out.i have search it but could not able to get exact solution.
Thanx in Advance.

```
android:layout_marginRight="30dp" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T06:13:59.960

```
 Try this, you can do that in code like following

TextView forgot_pswrd = (TextView) findViewById(R.id.ForgotPasswordText);
LinearLayout.LayoutParams llp = new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
llp.setMargins(0, 0, 30, 0); // llp.setMargins(left, top, right, bottom);
forgot_pswrd.setLayoutParams(llp); 
```

Note: Above code is valid if you are using LinearLayout, if you are using RelativeLayout or FrameLayout then use accordingly. For this addition note, credit goes to biovamp.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T06:35:37.877

You can do like this

```
TextView tv;

tv=(TextView)findViewById(R.id.YourTextViewID);

tv..setOnTouchListener(this);

 LinearLayout.LayoutParams llp = new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT,       LayoutParams.WRAP_CONTENT);

llp.setMargins(50, 0, 0, 0); // llp.setMargins(left, top, right, bottom);

forgot_pswrd.setLayoutParams(llp); 
```

# telerik - 无法在 Telerik Datagridview 中获取 DataMemberBinding

> ID：12190868
> 
> 赞同：1
> 
> 时间：2012-08-30T06:12:25.070
> 
> 标签：telerik, wcf-ria-services, silverlight-5.0

您好，我正在为 DataGrid 视图使用 Telerik Rad 控件...

我只想在 DataGrid 中显示一些必需的列。所以我使用了这段代码

```
 <telerik:RadGridView.Columns>
     <telerik:GridViewColumn  Header="Market Code"  />
     <telerik:GridViewColumn Header="Market Name" />
  </telerik:RadGridView.Columns> 
```

但我无法设置绑定.. 我无法将 DataMemberBinding 设置为列...

它说在 GridViewColumn 中找不到该属性....

```
 <riaControls:DomainDataSource AutoLoad="True" 
                               Height="0" 
                               LoadedData="mKT_MSTRDomainDataSource_LoadedData_1" 
                               x:Name="mKT_MSTRDomainDataSource"
                               QueryName="GetMKT_MSTRQuery" Width="0" >

        <riaControls:DomainDataSource.DomainContext>
            <my:GNDataDomainContext />
        </riaControls:DomainDataSource.DomainContext>

    </riaControls:DomainDataSource>
    <telerik:RadGridView Grid.Column="1" AutoGenerateColumns="False"
                         ItemsSource="{Binding Data,
                         ElementName=mKT_MSTRDomainDataSource}"
                         x:Name="mKT_MSTRRadGridView" Width="Auto" 
                         Canvas.Left="290" Height="300" >
        <telerik:RadGridView.Columns>
            <telerik:GridViewColumn  Header="Market Code" DataMemberBinding=""  />
            <telerik:GridViewColumn Header="Market Name" />
        </telerik:RadGridView.Columns>
    </telerik:RadGridView> 
```

任何人都可以帮助我我在哪里犯错......请

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T22:43:39.843

您需要根据您的数据类型选择合适的列类型进行绑定，例如 GridViewDataColumn 等。[您可以在此处](http://www.telerik.com/help/silverlight/gridview-columns-overview.html)查看预定义列类型的列表。然后，您需要使用 DataMemberBinding 属性将列绑定到要显示的数据：

```
<telerik:RadGridView.Columns>
    <telerik:GridViewDataColumn  Header="Market Code" DataMemberBinding="{Binding MarketCode}"  />
    <telerik:GridViewDataColumn Header="Market Name" DataMemberBinding="{Binding MarketName}"/>
</telerik:RadGridView.Columns> 
```

其中 MarketCode 和 MarketName 是您的数据记录上的属性

# jquery - 添加输入当前值并使用jquery排序

> ID：12190870
> 
> 赞同：0
> 
> 时间：2012-08-30T06:12:31.930
> 
> 标签：jquery, html

我有 jQuery 函数，我想添加当前输入值并相应地对它们进行排序。但是我的功能没有添加。

```
<head>
<script type="text/javascript" src="jquery-1.7.2.js"></script>
<script type="text/javascript">

$(function(){

$('input[type=button]').click(function(){

var val=$('input[type=text]').val();
var nn = $('.rhs').text(val);

})

})
</script>

<style>
.rhs { height:360px}
</style>
</head>
<body>

<input type="text" />
<input type="button" value="click"/>
<div class="rhs"></div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T06:18:21.280

你的意思是这样***[的：（工作演示](http://jsfiddle.net/Jae5F/)***）

```
$(function(){
   var nn = [];
   $('input[type=button]').click(function(){
       nn.push($('input[type=text]').val());
       $('.rhs').html(nn.sort(function(a,b){return a-b;}).join('<br>'));
   });
});
​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T06:20:53.533

啊，我想我明白你的意思了

```
 $('input[type=button]').click(function() {
       var val = $('input[type=text]').val();
       var nn = $('.rhs').append(val+'<br/>');                
    }); 
```

# php - PHP/JavaScript - Ping 测试

> ID：12190872
> 
> 赞同：1
> 
> 时间：2012-08-30T06:12:34.620
> 
> 标签：php, jquery, ping

有什么方法可以让用户 ping 一个测试 IP

用户 --> 服务器 --> 他们的实际 Ping 不是服务器

我知道您可以使用 PHP 进行 ping 操作，但 PHP 无法从客户端执行任何操作。

也许是 jQuery？

感谢您的任何提示或建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T06:19:32.367

JavaScript 无法执行用于 ping 服务器的 ICMP Echo 请求。

最接近的替代方法是使用`XMLHttpRequest`or`Image`对象发出 HTTP 请求并测量所用时间；当然，为此花费的时间是 DNS 查找、TCP 握手、发送标头、服务器处理和接收响应的组合。

我应该注意，在第一次“ping”之后，后续请求可能更准确。

# c - 如何使用 CDT 在 Eclipse 中进行运行配置

> ID：12190873
> 
> 赞同：0
> 
> 时间：2012-08-30T06:12:38.150
> 
> 标签：c, eclipse, gcc, debian, eclipse-cdt

我正在尝试使用 CDT for Eclipse 在 Debian 中编译我在 C 中制作的代码，当我尝试编译代码时，我遇到了著名的**Binary not found错误。**我已经通过按构建代码`Ctrl+B`并出现Debug文件夹，并且代码没有任何语法错误，但错误仍然存​​在。之后，我尝试为我的项目进行运行配置，但我不确定在它所说的地方放什么`C/C++ Application`。哪个是解决此问题的最佳配置？

我使用 Debian Squeeze、Eclipse CDT 和 GCC 作为编译器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T06:33:05.783

如果您已成功构建项目并拥有可以运行的可执行文件（没有构建错误，项目已正确配置为可执行文件），只需在“调试配置”对话框中按“搜索项目”或“浏览”按钮并将其指向您的可执行文件.

# python - Pandas：对 DataFrame 进行采样

> ID：12190874
> 
> 赞同：69
> 
> 时间：2012-08-30T06:12:46.203
> 
> 标签：python, partitioning, pandas

我正在尝试使用 Pandas 读取一个相当大的 CSV 文件并将其分成两个随机块，其中一个是 10% 的数据，另一个是 90%。

这是我目前的尝试：

```
rows = data.index
row_count = len(rows)
random.shuffle(list(rows))

data.reindex(rows)

training_data = data[row_count // 10:]
testing_data = data[:row_count // 10] 
```

出于某种原因，`sklearn`当我尝试在 SVM 分类器中使用这些生成的 DataFrame 对象之一时，会引发此错误：

```
IndexError: each subindex must be either a slice, an integer, Ellipsis, or newaxis 
```

我想我做错了。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-08-30T07:36:18.530

你用的是什么版本的熊猫？对我来说，您的代码运行良好（我在 git master 上）。

另一种方法可能是：

```
In [117]: import pandas

In [118]: import random

In [119]: df = pandas.DataFrame(np.random.randn(100, 4), columns=list('ABCD'))

In [120]: rows = random.sample(df.index, 10)

In [121]: df_10 = df.ix[rows]

In [122]: df_90 = df.drop(rows) 
```

较新的版本（从 0.16.1 开始）直接支持这一点：http: [//pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.sample.html](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.sample.html)

* * *

## 回答 #2

> 赞同：79
> 
> 时间：2013-06-18T14:41:39.997

我发现`np.random.choice()`NumPy 1.7.0 中的 new 对此非常有效。

例如，您可以传递来自 DataFrame 的索引值和整数 10 以选择 10 个随机均匀采样的行。

```
rows = np.random.choice(df.index.values, 10)
sampled_df = df.ix[rows] 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2015-11-17T22:53:28.787

0.16.1 版中的新功能：

```
sample_dataframe = your_dataframe.sample(n=how_many_rows_you_want) 
```

文档在这里： http: [//pandas.pydata.org/pandas-docs/version/0.17.0/generated/pandas.DataFrame.sample.html](http://pandas.pydata.org/pandas-docs/version/0.17.0/generated/pandas.DataFrame.sample.html)

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2015-06-22T03:13:46.380

Pandas 0.16.1 有一个[示例](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.sample.html)方法。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-06-16T04:24:11.907

如果您使用的是 pandas.read_csv，则可以在加载数据时直接采样，方法是使用 skiprows 参数。这是我写的一篇短文 - [https://nikolaygrozev.wordpress.com/2015/06/16/fast-and-simple-sampling-in-pandas-when-loading-data-from-files/](https://nikolaygrozev.wordpress.com/2015/06/16/fast-and-simple-sampling-in-pandas-when-loading-data-from-files/)

# iphone - 替换 html 字符串中的图像 URL

> ID：12190879
> 
> 赞同：0
> 
> 时间：2012-08-30T06:13:02.533
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

您好，我有一个 html 字符串，每个图像都有标签。

我可以提取每个图像的 url，但我想要的是将这些图像保存在设备中，然后用我的沙箱中的相应路径替换每个图像的 url，然后通过`UIWebView`.

任何想法我该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T06:21:07.417

好吧，如果您有图像的 URL，则可以像这样保存它

```
NSData *imageData = [NSData dataWithContentsOfURL:[NSURL urlWithString:string]];
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *filePath = [documentsDirectory stringByAppendingPathComponent:@"MyFile"];
[imageData writeToFile:filePath atomically:YES]; 
```

要替换 HTML 字符串中的 URL，只需使用以下方法

`- (NSString *)stringByReplacingOccurrencesOfString:(NSString *)target withString:(NSString *)replacement`

# c# - 如何在 C# 中应用 Word 快速样式 - 不仅仅是简单的格式，而是整个样式？

> ID：12190883
> 
> 赞同：7
> 
> 时间：2012-08-30T06:13:44.423
> 
> 标签：c#, interop, ms-word, styling

我承认，我对使用 Interop 库很陌生，但人们似乎总是给出的建议是，记录一个宏并检查 vba 代码。问题是，宏没有准确记录我在做什么：*单击快速样式以将其应用于当前选择*。

我的任务很简单：**我需要将快速样式应用于段落 ( *Microsoft.Office.Interop.Word.Paragraph* )**。但是，使用*set_style*命令仅应用基本格式，并且段落保持其原始快速样式选择（*正常*）。

虽然使用 Remou 的方法它对我有用，但它似乎与我自己的代码非常相似，我无法让它工作，我认为这可能是我对 objectmodel 的理解有点偏离。

```
public void AddParagraph(string text, string styleName = null)
{
  Paragraph paragraph = _document.Content.Paragraphs.Add();
  if (styleName != null)
  {
    paragraph.Range.set_Style(_document.Styles[styleName]);
  }

  paragraph.Range.Text = text;
  paragraph.Range.InsertParagraphAfter();
} 
```

然后我用 eg 调用它`AddParagraph("A title", "Heading 1");`，但是使用上述包装器构建我的文档的结果是，没有应用完整的样式，只有字体、颜色、大小和粗体/斜体。

我正在使用自己的`.dotx`文件，具有自己定义和命名的样式，但只需从 Remou 复制代码就可以使用我自己的模板，所以我认为这不是问题，并且使用该代码我无法弄清楚如何附加多个段落，每个段落都有自己的样式。

谁能指出我的方法有什么问题，或者至少我怎样才能使 Remou 提供的答案满足我的要求？:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-30T09:30:28.783

这对我有用。

```
Word.Application _wordApp = new Word.Application();
Word.Document oDoc = _wordApp.Documents.Add();
_wordApp.Visible = true;
_wordApp.Selection.TypeText("Heading");
oDoc.Paragraphs[1].set_Style(Word.WdBuiltinStyle.wdStyleHeading2); 
```

当你说

```
paragraph.Range.Text = text + paragraph.Range.Text; 
```

你得到的段落比你想象的要多。我想你需要：

```
paragraph.Range.Text = text; 
```

尝试：

```
Paragraph paragraph = _document.Content.Paragraphs.Add();
paragraph.Range.Text = text;

if (styleName != null)
{ 
    paragraph.set_Style(_document.Styles[styleName]);
}

paragraph.Range.InsertParagraphAfter(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-04T08:34:11.980

我花了一段时间才弄清楚。那么下面的代码对我来说很好。

```
Microsoft.Office.Interop.Word.Paragraph paraTitle = document.Content.Paragraphs.Add(ref missing);
            paraTitle.Range.Text = ""; //This line does the trick here
            paraTitle.Range.set_Style(WdBuiltinStyle.wdStyleHeading1);
            paraTitle.Range.Text = text; 
```

这将应用整个样式，而不仅仅是格式。

# iphone - 如何将 int 值从 iphone 应用程序传递到服务器？

> ID：12190884
> 
> 赞同：0
> 
> 时间：2012-08-30T06:13:44.357
> 
> 标签：iphone, xcode

我正在将数据从 iphone 应用程序插入服务器

```
 participant_id="1";
 NSString *post =[[NSString alloc] initWithFormat:@"participant_id=%@&question_id=%@&answer_text=%@&answer_option=%@",participant_id,question_id,answer_text,answer_option]; 
```

将上述行与其他代码一起使用，是否有可能从这一行`NSString participant_id`传递到服务器`int participant _id`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T06:19:13.400

当然，只需使用`%d`or`%u`格式说明符：

```
participant_id = 1 ;
NSString *post =[[NSString alloc] initWithFormat:@"participant_id=%d", participant_id]; 
```

有关完整列表，请参阅[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Strings/Articles/formatSpecifiers.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Strings/Articles/formatSpecifiers.html)。

# android - 如何为android构建datamatrix扫描仪？

> ID：12190897
> 
> 赞同：0
> 
> 时间：2012-08-30T06:14:46.990
> 
> 标签：android

我想开发一个在 android 中扫描二维 Datamatrix 代码的应用程序，我搜索了很多但没有找到任何东西，所以请帮助我构建一个扫描仪来扫描 datamatrix 代码。

PS Zxing 不扫描数据矩阵代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T09:32:21.373

zxing 正在扫描二维数据矩阵代码:-)，当我测试它们是假数据矩阵代码时。无论如何谢谢

# jquery - 自定义确认消息框以从网格中删除记录

> ID：12190905
> 
> 赞同：0
> 
> 时间：2012-08-30T06:15:31.033
> 
> 标签：jquery, jquery-ui, jquery-plugins

我使用了一个 Jquery 插件来获得自定义警报和确认消息。警报工作正常。但是，当我尝试实现自定义确认以删除网格中的记录时，会显示确认框并在几秒钟内关闭，并且在没有用户干预的情况下删除了记录。有人在这方面工作过吗？如果是这样，请让我知道适用于删除记录的自定义确认消息框。

我一直在徒劳地尝试:(

ps：这是我第一次使用Jquery。请帮帮我

# android - 如何在 android 中使用当前时间和数据格式将图像保存在特定的 sd 卡文件夹中？

> ID：12190906
> 
> 赞同：-1
> 
> 时间：2012-08-30T06:15:51.337
> 
> 标签：android, android-file

我想将捕获的图像保存在 SD 卡特定文件夹中，并使用图像的当前时间研磨名称。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T06:22:04.907

获取位图对象后试试这个

```
 private void save_Image_to_sdcard() {
    // TODO Auto-generated method stub
    OutputStream file_outputstream = null;
    InputStream in = null;
    try {
        URL path = new URL(url);
        in = path.openStream();

        String path1 =    
Environment.getExternalStorageDirectory().toString();
        System.out.println(path1+ "    " +user_file_name);
        // /mnt/sdcard
        File f = new File(path1 + "/"+System.currentTimeMillis()+".png");
        f.createNewFile();
        System.out.println("file created " + f.toString());

        file_outputstream = new FileOutputStream(f);
        byte[] buffer = new byte[1024];
        int bytesRead = 0;
        while ((bytesRead = in.read(buffer, 0, buffer.length)) >= 0) {

            file_outputstream.write(buffer, 0, bytesRead);

        }

        file_outputstream.close();
        in.close();

    } catch (MalformedURLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        Log.v("hey", "error");
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        Log.v("hey", " ioexception");
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T06:22:10.150

```
private Uri saveToFileAndUri() throws Exception{
    long currentTime = System.currentTimeMillis();
    String fileName = "MY_APP_" + currentTime+".jpg";
    File extBaseDir = Environment.getExternalStorageDirectory();
    File file = new File(extBaseDir.getAbsoluteFile()+"/MY_DIRECTORY");
    if(!file.exists()){
        if(!file.mkdirs()){
            throw new Exception("Could not create directories, "+file.getAbsolutePath());
        }
    }
    String filePath = file.getAbsolutePath()+"/"+fileName;
    FileOutputStream out = new FileOutputStream(filePath);

    bitmap.compress(Bitmap.CompressFormat.JPEG, JPEG_QUALITY, out);     //control the jpeg quality
    out.flush();
    out.close();

    long size = new File(filePath).length();

    ContentValues values = new ContentValues(6);
    values.put(Images.Media.TITLE, fileName);

    // That filename is what will be handed to Gmail when a user shares a
    // photo. Gmail gets the name of the picture attachment from the
    // "DISPLAY_NAME" field.
    values.put(Images.Media.DISPLAY_NAME, fileName);
    values.put(Images.Media.DATE_ADDED, currentTime);
    values.put(Images.Media.MIME_TYPE, "image/jpeg");
    values.put(Images.Media.ORIENTATION, 0);
    values.put(Images.Media.DATA, filePath);
    values.put(Images.Media.SIZE, size);

    return ThisActivity.this.getContentResolver().insert(Images.Media.EXTERNAL_CONTENT_URI, values);

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T06:36:21.510

按以下方式保存文件，

```
fileName + DateFormat.format( ConstantCodes.dd_MMM_yyyy_kk_mm_ss ,new java.util.Date()).toString() + ".jpg"; 
```

# c# - 用户控制文本框 - 从 ASPX 代码背后启用和禁用

> ID：12190909
> 
> 赞同：1
> 
> 时间：2012-08-30T06:16:22.443
> 
> 标签：c#, asp.net, user-controls

我在 C#.Net 中工作。我有 ASPX 页面和 ASCX 页面。在我的 ASCX 页面中，有一个文本框和 HTML 图像按钮。我想根据下拉选择的索引更改事件来启用真假过程。默认情况下，文本框应该被禁用并且图像应该是可见的。

这是我的 ASPX 页面加载..

```
 ContentPlaceHolder cph = (ContentPlaceHolder)this.Page.Master.FindControl("ContentPlaceHolder1");
 PI_CompLocationTree userCntrl = (PI_CompLocationTree)cph.FindControl("PI_CompLocationTree1");
      userCntrl.TextBoxUSC = false;
      userCntrl.ImgUSC = false;

      if (analysisGroup.SelectedValue == "0")
       {
            userCntrl.TextBoxUSC = true;
            userCntrl.ImgUSC = true;
       }
      else if (analysisGroup.SelectedValue == "1")
       {
            userCntrl.TextBoxUSC = true;
            userCntrl.ImgUSC = true;
       }
      else
       {
            userCntrl.TextBoxUSC = false;
            userCntrl.ImgUSC = false;
       } 
```

和我的 ASCX 代码..

```
public bool TextBoxUSC
    {
        set { txtLoc.Enabled = value; }
    }
    public bool ImgUSC
    {
        set { imgEdit.Visible = value; }
    } 
```

该值正确传递给属性。但是文本框控件仅处于禁用模式，并且图像处于可见状态。如何启用和显示控件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T06:52:18.193

与其在事件中做，不如在`Page_Load`事件中做`Page_Init`。

要在 Page_Init 事件中获取下拉列表的选定值，您可以使用以下方法：

```
if (Request["__EVENTTARGET"] != null)
        {
            string controlID = Request["__EVENTTARGET"];
            if (controlID.Equals(analysisGroup.ID))
            {
                string selectedValue =  Request.Form[Request["__EVENTTARGET"]].ToString();
                Session["SelectedValue"] = selectedValue; //Keep it in session if other controls are also doing post backs.
            }
        } 
```

# html - 地铁应用程序中的整个页面控件的 AppBar 保持不变？

> ID：12190911
> 
> 赞同：0
> 
> 时间：2012-08-30T06:16:36.243
> 
> 标签：html, windows-8, microsoft-metro, winjs

我试图在我的 Metro 应用程序中显示整个 html 页面的 AppBar。每当我点击页面的其他项目时，AppBar 立即消失。谁能给我建议，让我的 AppBar 在 Metro App 中的整个页面保持不变。这里是使用**appbar.winControl.show();** .

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T06:19:29.540

对于 JavaScript：appBar.sticky = true;
对于 XAML：AppBar.IsSticky = true；

即使您单击页面上的其他位置，这也会使您的 AppBar 保持在屏幕上。但请记住，设计指南是针对一个短暂的 AppBar，它会轻而易举地消失（当您触摸其他地方时会消失）。[以下是应用栏指南和清单中](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh781231(v=win.10).aspx)关于何时应该粘贴的指南：

**显示上下文命令时，请务必将应用栏的关闭模式设置为粘性。** 如果您在应用栏上有上下文命令，请在该上下文存在时将模式设置为粘性，并在该上下文不再存在时（例如取消选择照片时）关闭粘性模式。在粘性模式下，当用户与应用交互时，栏不会自动隐藏。这对于多选场景或当上下文涉及交互（例如操作裁剪句柄）时很有用。当用户执行操作时，该栏保持可见。用户仍然可以通过滑动屏幕的顶部或底部边缘来隐藏该栏，并且他们可以通过边缘滑动再次显示它。

最后，这里是[粘性属性](http://msdn.microsoft.com/en-us/library/windows/apps/hh700576.aspx)的 JS 参考。

# iphone - 无法从 UIAlertView 导航到主页

> ID：12190913
> 
> 赞同：1
> 
> 时间：2012-08-30T06:17:02.490
> 
> 标签：iphone, objective-c, uitableview, uialertview

我正在使用 a`UITableView`来显示数据，并通过使用自定义按钮和删除功能，我试图删除选定的行。但是我想在该函数`UITableView`为空时放置一个警报视图，并通过使用里面的按钮，`UIAlertView`我试图根据条件导航到主页和上一页。但是它在`UITableView`变空后崩溃了，我按下删除按钮并显示“程序接收信号：”SIGABRT“。

我的代码如下所示：

```
 - (IBAction)DeleteButtonAction:(id)sender
    {   
        DMSAppDelegate *d = (DMSAppDelegate *)[[UIApplication sharedApplication] delegate];

        NSLog(@"Message From Custom Cell Received");

        if(d->newtableData.count != 0)
        {

            NSIndexPath *indexPath = [self.tablevieww2 indexPathForCell:(UITableViewCell *)[[[sender superview] superview] superview]];
            NSUInteger row = [indexPath row];
            [d->newtableDataQt removeObjectAtIndex:row];
            NSLog(@"data removed");
            [self.tablevieww2 reloadData];
        }   
        else
        {       
            UIAlertView *alertview=[[UIAlertView alloc] initWithTitle:@"hello" message:@"Warning!!: Table is empty" delegate:self cancelButtonTitle:@"Yes" otherButtonTitles:@"",@"No",nil];
            textfieldQty1 = [alertview textFieldAtIndex:0];
            textfieldQty1.keyboardType = UIKeyboardTypeNumberPad;
            textfieldQty1.keyboardAppearance = UIKeyboardAppearanceAlert;
            textfieldQty1.autocorrectionType = UITextAutocorrectionTypeNo;
            [alertview show];
            [alertview release];    
        }

    }

    - (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex 
    {
        if (buttonIndex == 0) 
        {
            DMSViewController *bt=[[DMSViewController alloc]initWithNibName:nil bundle:nil];
            bt.modalTransitionStyle=UIModalTransitionStyleCrossDissolve;
            [self presentModalViewController:bt animated:YES];
        }
        else if (buttonIndex == 1)
        {
            NSString *newqty = [[NSString alloc] initWithFormat:@"%@",textfieldQty1.text];
            DMSAppDelegate *d= (DMSAppDelegate *)[[UIApplication sharedApplication] delegate];
            [d->newtableDataQt replaceObjectAtIndex:slCell1 withObject:(id)newqty];
            NSLog(@"tb%@",d->newtableDataQt);
            [self.tablevieww2 reloadData];  
            int total1=0;

            for ( int i=0 ; i < [d->newtableDataQt count];++i )
            {           
                NSString *string = [d->newtableDataQt objectAtIndex:i];

                NSLog(@"string%@",string);

                if ([string isEqualToString:@"0"])
                {

                }
                else
                {
                    NSLog(@"newArray%@",d->newtableDataPrice);
                    NSString *strP=[d->tableDataPrice objectAtIndex:i];
                    NSInteger sp=[strP integerValue];
                    NSInteger st=[string integerValue];
                    total1=total1+st*sp;
                    NSLog(@"total1%d",total1);
                }
            }

            NSString *newtotal1=[NSString stringWithFormat:@"%d",total1];
            DMSAppDelegate *d2 = (DMSAppDelegate   *) [[UIApplication sharedApplication] delegate];
            d2->totalD = [[NSString alloc] initWithString:newtotal1];
        }   
    }

    Please give me some solution. I am trying really hard from yesterday but not getting any success.
    Thanks in advance.
    @ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T06:43:53.867

您需要检查两件事：-

首先：-`if(d->newtableData.count != 0)` 是条件，您没有从`newtableData`您的项目中删除项目，`newtableDataQt`这就是您的 else 方法没有被调用的原因。因为`newtableData`永远不会有count = 0。

第二件事; - 如果您的表为空意味着不`newtableDataQt`包含任何值，它将为空。现在，当您单击删除按钮时，会出现警报视图，之后如果您单击索引 1 处的任何按钮，然后在您的您编写的代码：-

```
[d->newtableDataQt replaceObjectAtIndex:slCell1 withObject:(id)newqty]; 
```

所以`newtableDataQt`之前已经是空的，现在你正在使用它。这可能是崩溃的原因。

尝试

```
if( [newtableDataQt count] >slCell1)
{    [d->newtableDataQt replaceObjectAtIndex:slCell1 withObject:(id)newqty];
} 
```

我希望它可以帮助你。

# wix - 如何将 wix burn exe 推送到 Active Directory？

> ID：12190914
> 
> 赞同：2
> 
> 时间：2012-08-30T06:17:10.820
> 
> 标签：wix, wix3.6, burn

Active Directory 允许将 MSI 推送到客户端计算机。

我们如何将 WiX 刻录 exe 安装程序推送到远程 AD 计算机？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T07:02:32.820

要通过 Active Directory 组策略进行部署，您必须使用[ZAP 文件](http://en.wikipedia.org/wiki/ZAP_File)。

# facebook-graph-api - 获取个人资料详细信息后，facebook graph api注销

> ID：12190915
> 
> 赞同：-1
> 
> 时间：2012-08-30T06:17:16.803
> 
> 标签：facebook-graph-api, facebook-php-sdk

我正在使用**php sdk**实现“使用 facebook 登录”功能，我能够获取用户个人资料详细信息。但是在该用户保持登录状态之后。假设用户正在访问我的网站，并且在使用“使用 facebook 登录”功能后他立即离开，那么坐在那里的下一个人可以使用（滥用）以前的人的帐户。1）如何在获取我需要的内容后自动注销用户（我不想显示用户“facebook注销”按钮）。2）有什么办法我只能从我的应用程序中注销用户而不是 Facebook 注销？（我的意思是如果用户已经在另一个选项卡中使用 facebook，那么它应该只从我的应用程序中注销用户的 facebook 会话。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T06:34:11.587

假设所有常用的安全措施都已到位（会话超时适用于 FB 登录，不会在不同的 PHP 会话中泄漏 FB 数据，注销您的站点会清除 FB 会话数据或移动到没有 FB 访问权限的登录/首页） ，具有 Facebook 集成的网站通常不会根据每个请求来保护其 FB 集成。如果他们打开浏览器窗口并登录到您的网站，这是用户自己的错，对于这种错误，您可以或确实应该做的不多。

话虽如此，您可以调用[getLogoutUrl](http://developers.facebook.com/docs/reference/php/facebook-getLogoutUrl/)然后将用户重定向到该 URL 以将用户从当前会话中注销，或者您可以使用 JavaScript SDK 的`FB.logout()`. [这里](https://stackoverflow.com/questions/4547175/facebook-php-sdk-logout)提到了这两个选项。

# php - 如何使用 php 在同一个文件中调用 javascript 函数？

> ID：12190918
> 
> 赞同：0
> 
> 时间：2012-08-30T06:17:21.577
> 
> 标签：php, javascript, jquery

我有一个名为“PhpCallJavascript”的 php 文件。

我尝试`CreateSVG()`从 php 代码调用函数。

它不工作我应该在这里需要ajax吗？

还是别的什么？

谢谢任何帮助。

php文件：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<?php echo '<script type="text/javascript">', 'CreateSVG();', '</script>'; ?>
<script>
$(document).ready(function() {

    function CreateSVG(){
            var xmlns = "http://www.w3.org/2000/svg";
                alert(xmlns);
            }
});     
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T06:20:41.117

你有两个主要问题。

第一：**脚本元素之间没有提升函数**

如果您调用内联函数（无需等待合适的事件），那么您调用的函数必须在*相同*的脚本元素或*更早*的元素中声明。

第二：**在其他函数中声明的函数的作用域是该函数**

由于您已`CreateSVG`在匿名函数内部声明（然后将其传递给`ready()`），因此您无法`CreateSVG`从该匿名函数外部访问。

代码的固定版本是：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script>
    function CreateSVG(){
            var xmlns = "http://www.w3.org/2000/svg";
            alert(xmlns);
    }
    CreateSVG();
</script> 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-30T06:18:38.783

```
<?php echo '<script type="text/javascript">CreateSVG();</script>'; ?> 
```

尝试这个？

编辑-

抱歉，阅读方式写错了。当函数本身只需要移动时，他假设他有语法错误。

# namespaces - 解析 twitter API 命名空间 georss:point 未绑定

> ID：12190920
> 
> 赞同：2
> 
> 时间：2012-08-30T06:17:30.727
> 
> 标签：namespaces, twitter, georss

我们正在我们的应用程序中解析 Twitter API。这在昨天之前一直运行良好，但现在我们得到以下异常：

```
javax.xml.bind.DataBindingException: javax.xml.bind.UnmarshalException
 - with linked exception:
[org.xml.sax.SAXParseException; lineNumber: 37; columnNumber: 577; The prefix "georss" for element "georss:point" is not bound.]
at javax.xml.bind.JAXB.unmarshal(JAXB.java:225) 
```

似乎存在一个新的 XML 标记：georss:point 提要缺少 georss 微格式的命名空间声明，因此会引发错误。有人也面临这个问题吗？是否存在解决此问题的方法？因为它目前正在关闭我的应用程序。

在这方面的任何帮助都非常受欢迎。谢谢，瓦巴夫。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T09:55:20.193

问题似乎是自昨天以来，提要中缺少 georss 的 xmlns 声明：

```
xmlns:georss="http://www.georss.org/georss" 
```

大约一年前报告了一个类似的问题（[https://dev.twitter.com/discussions/625](https://dev.twitter.com/discussions/625)），似乎已经重新浮出水面。尝试添加该声明。

* * *

编辑：当前问题也已发布[https://dev.twitter.com/discussions/10491](https://dev.twitter.com/discussions/10491)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T10:48:02.667

是的，wkoot 删除了地理标签，因为无论如何我都没有使用它，然后现在解析字符串 :( 目前唯一的 2 个合法解决方案......

# entity-framework - 使用 EF5 和表值函数 (TVF) 执行连接？

> ID：12190925
> 
> 赞同：2
> 
> 时间：2012-08-30T06:18:00.157
> 
> 标签：entity-framework, entity-framework-5

我在 EF 4.3 中尝试过，但无济于事。EF5（结合 .NET 4.5）现在支持 TVF。因此，理论上，如果以下情况可行，这个新的 EF5 功能将为我节省大量工作。

SQL查询；

```
SELECT O.*
FROM dbo.Orders O
INNER JOIN dbo.SecurityTVF(@Name)   S   ON  S.UserID=O.UserID 
```

等效的 EF5 查询 - 可能吗？

```
using (var context = new DSN())
{
    // Return all the orders - limited by those the current user has placed
    var orders = from o in context.Orders
                 join s in context.SecurityTVF(HttpContext.Current.User.Identity.Name) on o.UserID equals s.UserID
                 select o;
} 
```

我真的不想在这个阶段升级所有软件，除非在 EF5 中可以实现上述操作……有人试过吗？

注意：官方文档有点基础， http: [//msdn.microsoft.com/en-us/data/hh859577.aspx](http://msdn.microsoft.com/en-us/data/hh859577.aspx)

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T06:36:45.953

是的，可以使用 .NET 4.5、EF 5.0 和 Visual Studio 2012。

# linux - 当软重启 Linux 内核挂在“Uncompressing Linux... done, booting the kernel”

> ID：12190930
> 
> 赞同：3
> 
> 时间：2012-08-30T06:18:37.733
> 
> 标签：linux, linux-kernel, kernel, arm, reboot

我在自定义硬件上使用 Linux 内核 3.0.21。

*   当我第一次启动硬件时，它成功启动。

*   如果我正确关闭并再次启动硬件，它会成功启动。

但是一旦系统运行起来，当我输入`reboot`命令时**，内核会重新启动并挂起**

```
Starting kernel ...

Uncompressing Linux... done, booting the kernel. 
```

我不知道为什么每次软重启都会遇到这个问题。为避免这种情况，我需要硬重置（关闭电源并再次打开电源）。

为什么我面临这个问题？内核中是否缺少任何清理功能？如何调试这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T06:31:28.657

是的，听起来平台支持您的硬件的某个地方缺少一些逻辑来应对软重启。

添加清理代码并不能解决问题，因为系统可能会崩溃，然后被软重启。

所以需要编写启动系统的代码来应对系统软重启。

要进行调试，您首先需要找出内核在软重启期间卡住的位置。最简单的方法是使用硬件调试器。

另一种选择是通读启动代码并尝试找出可能依赖冷启动才能工作的任何区域，例如。期望在启动时清除 TLB 或类似的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T09:23:49.757

听起来像是在重新启动之前无法中和硬件。可能的候选对象是 MMU、TLB、缓存或中断。当这些被重新启用时，崩溃将在内核启动的早期发生（这可能是内核在重新启动之前未能将它们全部禁用，或者引导加载程序依赖于硬重置状态，当然你不会进入软-重启）。

正如其他人所指出的那样，JTAG 硬件调试探针几乎是您无法深入了解这一点的唯一方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T09:53:13.017

要开始调试，我已经启用

```
CONFIG_DEBUG_LL=y 
```

在内核构建中。这提供了一些额外的调试启用......在挂断情况和成功启动情况下，我正在比较日志和调试调整 ma 内核卡住的位置......以及为什么

# android - 以返回结果的名称去活动？

> ID：12190934
> 
> 赞同：0
> 
> 时间：2012-08-30T06:18:57.573
> 
> 标签：android, if-statement, android-activity, for-loop

我想去一个带有从 resultPhone 返回的名称的活动，例如：当前手机名称是 GalaxyS3，然后我希望它去 GalaxyS3.class。我怎样才能做到这一点？

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    String[] supportedPhone = getResources().getStringArray(R.array.supported_phone);
    String[] supportedVersion = getResources().getStringArray(R.array.supported_version);
    String currentPhone = android.os.Build.MODEL;
    String currentVersion = android.os.Build.VERSION.RELEASE;

    for(String cP : supportedPhone) {
        String resultPhone = cP;
        for(String cV : supportedVersion) {
            String resultVersion = cV;
            if ((currentPhone.equalsIgnoreCase(resultPhone)) && (currentVersion.equalsIgnoreCase(resultVersion))) {
                Intent gotoPhoneDetail = new Intent(this, "resultPhone" + ".class");
                startActivity(gotoPhoneDetail);
                // how can i make this go to the activity with the name return from resultPhone?
            } else {
                setContentView(R.layout.phone_checker); 
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T06:32:50.337

您可以使用`setClassName()`Intent[**这**](http://developer.android.com/reference/android/content/Intent.html)绝对适合您的解决方案。

```
Intent gotoPhoneDetail = new Intent(getApplicationContext());
gotoPhoneDetail.setClassName(getApplicationContext(), getApplicationContext().getPackageName()+"."+resultPhone); 
```

*注意：类必须存在并且必须在 Android Manifest 文件中有条目*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T06:24:33.457

我认为这是不行的。请记住，您必须首先在清单文件中注册活动。你打算如何实施？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T06:26:21.547

使用`startActivity()`方法启动任何`activity`.

```
 Intent intent = new Intent(YourCurrentActivity.this,YourNewActivity.class); // In your case GalaxyS3.class
 startActivity(intent); // Like this you can start Activity. 
```

并始终在标签下的`AndroidMenifest`文件中提及新活动的名称。`application`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T06:33:46.930

您应该能够使用以下方法从其名称中检索类对象：

```
Class.forName ( className ); 
```

其中 className 是一个包含类名的字符串（在您的情况下是 resultPhone）。

尝试以下操作：

```
try {
    Class <?> myActivity = Class.forName ( resultPhone );
    Intent intent = new Intent ( this , myActivity );
    startActivity ( intent );
} catch (ClassNotFoundException e) {
    e.printStackTrace();
    // Do something else, maybe warn the user that the application does not support his/her phone ...
} 
```

让我知道它是否有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T06:39:34.787

您应该使用[Class.forName()](http://developer.android.com/reference/java/lang/Class.html#forName%28java.lang.String%29)：

```
if ((currentPhone.equalsIgnoreCase(resultPhone)) && (currentVersion.equalsIgnoreCase(resultVersion))) {

    Class<?> phoneClass = null;
    try {
        phoneClass = Class.forName(resultPhone);
    } catch (ClassNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    Intent gotoPhoneDetail = new Intent(this, phoneClass);
    startActivity(gotoPhoneDetail);

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-30T07:26:51.473

使用 Class.forName(resultPhone) 将为您提供 Class 对象，您可以按照此处许多人已经建议的意图使用它。但是你使用的逻辑很容易出错，从长远来看可能不是一个好的逻辑。我建议您使用“工厂类”来获取 Class 对象。

这样，您将来可以添加更多支持手机，如果该型号不受支持，还可以添加默认类。工厂类可能看起来像这样

```
 class PhoneModelClassFactory{
      public static Class getPhoneModel(String className){

         if (className.equals("GS3")) return GS3.class
         else if(className.equals("GS4")) return GS4.class
         // add more here
         else  return DefaultPhoneModel.class
      }
  } 
```

现在你可以从你的方法中调用

```
 Class phoneClass = PhoneModelClassFactory.getPhoneModel(currentPhone);
       Intent i = new Intent(this, phoneClass);
       startActivity(i); 
```

# python - 不能调用方法，除非它来自一个类的全局

> ID：12190935
> 
> 赞同：0
> 
> 时间：2012-08-30T06:18:58.907
> 
> 标签：python, disco

嗨，我是 Disco 的新手，并将现有代码集成到其中。Disco 是否能够将 map/reduce 函数作为类中的函数而不是全局函数来调用？下面的代码可能解释得更清楚。

```
class Segmenter(object):
    def map_fun(line, params):
        ....
    def reduce_fun(iter, params):
        ....
    def disco_mp(self):
        job = Job().run(input=["raw://word_to_segment_......"],
                        map=map_fun,
                        reduce=reduce_fun)
        ... 
```

执行的结果是

```
NameError: global name 'map_fun' is not defined 
```

但是，如果我将 map_fun、reduce_fun 更改为全局函数，它会按预期工作。但是我仍然必须找到一种方法让它作为类函数工作，有什么办法吗？

谢谢，

钱德勒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T06:21:41.380

看起来您想使用`self.map_fun`and `self.reduce_fun`。在 Python 中，对象的方法不能通过它们的裸名访问；你必须使用`self`. 您还需要为`self`这些方法提供参数。您应该阅读[Python 教程](http://docs.python.org/tutorial/)以熟悉 Python 中的类和方法的基础知识。

（另外，为什么您的问题的标题与实际问题无关？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T13:34:39.523

你需要静态方法，你可以用装饰器做到这一点：

```
class Segmenter(Job):
    map = staticmethod(map_fun)
    reduce = staticmethod(reduce_fun)

    @staticmethod
    def map_fun(line, params):
        ....

    @staticmethod
    def reduce_fun(iter, params):
        ....

    def disco_mp(self):
        job = self.run(input=["raw://word_to_segment_......"]) 
```

请注意，您将无法同时访问`self`map_fun 和 reduce_fun，这就是`params`存在的原因。还要注意`Job.run`is now`self.run`和`Segmenter`extends `Job`。

# speech-recognition - 演讲制作过程

> ID：12190947
> 
> 赞同：4
> 
> 时间：2012-08-30T06:19:53.867
> 
> 标签：speech-recognition, speech

我正在研究 Rabiner 书中的语音识别。在这本书中作者问了一个问题

**解释产生浊音、清音和爆破音的不同语音产生过程**

作者说：
当声带紧张时+气流然后浊音
当声带放松时+气流然后清音
但是关于爆破音什么也没说，是的，他确实提到了瞬态声音。

**那么瞬态声音与爆破音相同吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T23:19:51.957

我认为您对事物进行分类的方式可能会让您感到困惑。浊音和清音是特定类别中的两种声音。爆破音可以是浊音或清音；它不是同一类别中的第三种声音。

至于您最初的问题，我不认为爆破音和瞬态声音是等效的。爆破音是指您暂时阻止空气排出，然后立即将其全部释放——想想发出“b”或“p”的声音。瞬态声音就像咔哒声、砰砰声或砰砰声。一种短促的、冲动的声音。爆破音可以相似，但它们的持续时间也可以更长。

关于声带的另一件事。我认为该术语给出了错误的形象。你的喉咙里没有绷紧或放松的绳索或细绳。你有两个折叠可以聚在一起或保持打开。清音是当褶皱放松和分开时。浊音是指褶皱以固定的间隔相互撞击，每秒多次。

# java - Java - 清除 OTHER JList 中的选择

> ID：12190948
> 
> 赞同：0
> 
> 时间：2012-08-30T06:19:53.260
> 
> 标签：java, swing, jlist, defaultlistmodel, listselectionlistener

我有以下问题：我的框架中有 2 个 JList：

```
 listModel = new DefaultListModel();
    ownlistModel = new DefaultListModel();
    fillList();

    ownBookList = new JList(ownlistModel);
    ownBookList.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
    ownBookList.setLayoutOrientation(JList.VERTICAL);
    ownBookList.setSelectedIndex(-1);

    userlist = new JList(listModel);
    userlist.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
    userlist.setLayoutOrientation(JList.VERTICAL);
    userlist.setSelectedIndex(0); 
```

现在，这些是互斥的，因此如果有人单击一个列表中的项目，则应清除另一个列表中的先前选择。

```
 ls2Handler = new ListSelectionListener(){
            @Override
                public void valueChanged(ListSelectionEvent e) {
              if (e.getValueIsAdjusting() == false) {

            //  System.out.println(ownBookList.getSelectedValue().toString().length());
                 Global.selectedUser =  ownBookList.getSelectedValue().toString();
                 Global.selectedIndex = ownBookList.getSelectedIndex();
             userlist.clearSelection();
                  updateFields(Global.selectedUser, 1);

              }

        }
    };

        lsHandler = new ListSelectionListener() {

            @Override
            public void valueChanged(ListSelectionEvent e) {
                  if (e.getValueIsAdjusting() == false) {

                //  System.out.println(userlist.getSelectedValue().toString().length());

                      Global.selectedUser =  userlist.getSelectedValue().toString();
                     Global.selectedIndex = userlist.getSelectedIndex();
                   ownBookList.clearSelection();
                      updateFields(Global.selectedUser, 0);
                  }

            }
            };

        userlist.addListSelectionListener(lsHandler);
        ownBookList.addListSelectionListener(ls2Handler); 
```

在调用值调整函数时，我总是得到 nullpointerException：

> 在 javax.swing.JList.fireSelectionValueChanged 的​​ Books$3.valueChanged(Books.java:199) 处的线程“AWT-EventQueue-0”java.lang.NullPointerException 中的异常（未知来源）

这是为什么？如您所见，它们已被声明并且应该可以访问。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T06:24:38.217

该`getSelectedValue()`方法可以返回`null`，并且您正在调用`toString()`该`null`对象

```
userlist.getSelectedValue().toString(); 
```

请参阅该方法的文档：

> 返回最小选定单元格索引的值；仅在列表中选择单个项目时的选定值。选择多个项目时，它只是最小选定索引的值。如果没有选择，则返回 null。

`B`而且由于您在选择 list 上的某些内容时清除了 list 上的选择`A`，因此您很快就会遇到此异常。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T07:37:48.663

感谢罗宾，我想通了。我不知道 clearselection() 方法会触发侦听器。它又快又脏，但它有效：

```
 ls2Handler = new ListSelectionListener(){
        @Override
            public void valueChanged(ListSelectionEvent e) {
          if (e.getValueIsAdjusting() == false) {

              if (ownBookList.getSelectedValue()!=null) {
                  userlist.clearSelection();
                  Global.selectedUser =  ownBookList.getSelectedValue().toString();
                  Global.selectedIndex = ownBookList.getSelectedIndex();
                  updateFields(Global.selectedUser);
              }

                else {

                    }

          }

    }
};

    lsHandler = new ListSelectionListener() {

        @Override
        public void valueChanged(ListSelectionEvent e) {
              if (e.getValueIsAdjusting() == false) {

                  if (userlist.getSelectedValue()!=null) {
                     ownBookList.clearSelection();
                      Global.selectedUser =  userlist.getSelectedValue().toString();
                      Global.selectedIndex = userlist.getSelectedIndex();
                      updateFields(Global.selectedUser);

                  }
                  else {

                  }
              }

        }
        }; 
```

再次感谢！

# asp.net - 如何将参数从一个页面传递到另一个页面的报表查看器

> ID：12190950
> 
> 赞同：1
> 
> 时间：2012-08-30T06:20:19.640
> 
> 标签：asp.net, .net, report, reportviewer

我正在尝试通过传递使用两个下拉菜单选择的参数来生成报告，`page1.aspx`并将它们发送到`page2.aspx`我的报告查看器（以及我要生成的报告）的页面。

我尝试在页面后面代码中的事件的帮助下使用`response.redirect`命令和命令，但它没有用。`server.transfer``click_button``page1.aspx`

任何人都可以帮助我如何做到这一点，我很长时间以来一直在尝试解决这个问题，而且我是 ASP.NET 的新手，我也尝试用谷歌搜索，但找不到任何相关信息。任何帮助将非常感激。谢谢

我重复这个问题：

**将参数从 page1.aspx 传输到 page2.aspx 中的报告查看器的方法是什么，以便**使用 page1.aspx 中的两个下拉菜单选择参数并用作在 page2.aspx 中生成报告的标准？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-10T09:32:20.983

您可以创建一个对象类，在其中保存参数的状态。

在该对象中，您创建 2 个变量 par1 和 par2。

在 page1.aspx 中定义参数是什么时，假设这不是直接的报表参数，但仍必须传递到您将加载的报表中，您可以创建类对象的新实例，将变量存储在, 并在将报表 URL 调用到报表查看器时引用 page2.aspx 中的该对象。

如果您在报表中加载参数，我认为您需要在 report1 中使用一个存储过程的数据集，该存储过程包括将参数保存在数据库表中。这样，在您的第二份报告中，您可以直接在数据库中调用此存储的数据。

我认为应该做的那两个解决方案。如果您需要更多帮助，请告诉我。

# android - 什么是gralloc_goldfish？

> ID：12190951
> 
> 赞同：2
> 
> 时间：2012-08-30T06:20:31.760
> 
> 标签：android

我最近将我的 Android SDK 升级到 4.1。在我的模拟器上启动应用程序时，有一个标记为“gralloc_goldfish”的日志。我做了一个谷歌搜索，但没有找到任何解决方案。有没有人对此有任何想法。

我认为这与“分配”有关。金鱼这个词让我很好奇。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T06:26:50.043

Goldfish 是用于模拟器的 linux 内核的名称。gralloc 用于为图形分配内存

[在这里](http://source.android.com/source/building-kernels.html)检查。引用自链接

```
The goldfish project contains the kernel sources for the emulated platforms. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T06:28:29.963

经过一番谷歌搜索后，我发现 gralloc.goldfish 是模拟器的一部分，如果模拟器支持 GPU 模拟（即模拟具有 GPU 的设备），则使用该模拟器。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-30T06:36:54.750

您的活动的实际问题。你应该检查你的登录，你可以找到 ActivityNotFoundException。那么你必须在你的 AndroidManifest.xml 中声明这个活动吗？

# java - 使用 indexOf 和 substring 计算一个数字

> ID：12190955
> 
> 赞同：3
> 
> 时间：2012-08-30T06:20:48.547
> 
> 标签：java

我不知道该怎么做，我的程序应该让用户输入 IP 地址。然后程序应该以十进制表示法返回一个值。例如，输入 134.115.64.1，输出 2255699969。

我想知道我是否可以将 134,115,64 和 1 存储在变量中。如果是这样，我该怎么做？任何类型的教程的链接都会很棒，因为我自己还没有找到。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T06:23:40.893

您可以执行以下操作：

```
String str = "134.115.64.1";

String arr[] = str.split("\\.");

int[] ips = new int[arr.length];
for(int i=0; i<arr.length;i++)
    ips[i] = Integer.parseInt(arr[i]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T07:24:00.170

解析IP地址的技巧

```
BigInteger ip = new BigInteger(1,InetAddress.getByName("134.115.64.1").getAddress());
// or
long ip = InetAddress.getByName("134.115.64.1").hashCode() & 0xffffffffL;

System.out.println(ip); 
```

印刷

```
2255699969 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T06:26:24.860

我还不能正确理解你的问题......但会尽力做到......

```
String s = "134.115.64.1";

    String[] arr = s.split("\\.");

    ArrayList<Long> ar = new ArrayList<Long>();

    for(String j : arr){

    ar.add(Long.parseLong(j)); // All the Number are Stored in this ArrayList

     }

    System.out.println(ar); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T06:44:25.813

```
long longIP(String ip) {
    String[] octets = ip.split("\\.");
    long ipLong = 0;
    for (int i = 0; i < 4; i++) {
        ipLong = ipLong * 256 + Long.parseLong(octets[i]);
    }
    return ipLong;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T07:03:14.187

您可以使用正则表达式重写为计算，然后将该计算传递给 JavaScript 引擎。我想使用位移运算符，但它们仅适用于 32 位有符号数字。

```
String input = "134.115.64.1";
String sum = input.replaceAll("(\\d+)\\.(\\d+)\\.(\\d+)\\.(\\d+)",
        "($1 * 16777216) + ($2 * 65536) + ($3 * 256) + $4");
System.out.println(sum);
ScriptEngineManager mgr = new ScriptEngineManager();
ScriptEngine engine = mgr.getEngineByName("JavaScript");

double result = (Double) engine.eval(sum);
System.out.println((long) result); 
```

# php - 将 Jquery 与 wordpress 主题一起使用？

> ID：12190956
> 
> 赞同：0
> 
> 时间：2012-08-30T06:20:51.777
> 
> 标签：php, javascript, jquery, wordpress

我目前正在使用 wordpress 3.4.1 我想将 jquery 嵌入到我自己的 wordpress 主题中，但我无法做到。尝试了网上可用的最大可能解决方案，但仍然无法令人信服地实施它。请帮忙举个简单的例子！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T06:28:56.950

试试下面的代码。

下面的代码在你的主题中添加了你的function.php

```
add_action('wp_head', 'add_myJquery');

function add_myJquery()
{
?>
    <script src="<?php bloginfo( 'template_url' ); ?>/js/jquery-latest.js" type="text/javascript"></script>
    <script type="text/javascript">
        jQuery(document).ready(function() {

            //write your jquery code Here.
        });

    </script>
<?    
} 
```

或者

在您的主题 header.php 文件中的 html 头标记之间添加以下代码

```
<script src="<?php bloginfo( 'template_url' ); ?>/js/jquery-latest.js" type="text/javascript"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T06:48:03.440

为了获得最佳兼容性，请使用 WordPress 附带的 jQuery 版本（加载特定版本的 jQuery 可能会在将来破坏您的插件）：

添加到function.php：

```
function insert_jquery(){
   wp_enqueue_script('jquery');
}
add_filter('wp_head','insert_jquery'); 
```

或者，如果您想从 Google CDN 加载它：

```
function my_scripts_method() {
    wp_deregister_script( 'jquery' );
    wp_register_script( 'jquery', 'http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js');
    wp_enqueue_script( 'jquery' );
}    

add_action('wp_enqueue_scripts', 'my_scripts_method'); 
```

在这里阅读更多：http: [//codex.wordpress.org/Function_Reference/wp_enqueue_script](http://codex.wordpress.org/Function_Reference/wp_enqueue_script)

也可以使用以下链接：

[http://code.jquery.com/jquery-latest.min.js](http://code.jquery.com/jquery-latest.min.js) - 最新版本

[http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js](http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js) - ver 1.x 系列中的最新版本

[http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js](http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js) - 1.7.x 系列中的最新版本

[http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js](http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js) - 1.8.x 系列中的最新版本

# ios - App Store 拒绝将应用作为预发布软件

> ID：12190961
> 
> 赞同：9
> 
> 时间：2012-08-30T06:21:07.730
> 
> 标签：ios, xcode, app-store, appstore-approval

我们的应用刚刚被应用商店拒绝，解释如下：

*您的应用程序被标记为预发布软件。预发布或试用软件不能被接受进入生产环境，并且不符合 App Store 审查指南。*

*如果您有兴趣试用您的应用程序并使其仅对某些用户可用，则可以使用 Ad Hoc 分发来扩大您的用户群。iOS 开发人员计划用户指南中提供了有关 Ad Hoc 分发的信息。*

这可能是一个愚蠢的问题，但我无法弄清楚我们的应用程序是如何“标记为预发布”的。它是在我们的项目或目标中设置的一些标志吗？或者它是在 iTunes Connect 中设置的？

**更新：**

我们收到了 Apple 的回复，我认为这是他们现在接受的对我们的商业模式的误解。

我接受了休伯特的回答，因为它是最接近问题的回答，尽管科多的评论（我投了赞成票）排在第一位。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T06:30:11.810

您是否阅读过 App Store 审核指南？（链接：[https](https://developer.apple.com/appstore/guidelines.html) ://developer.apple.com/appstore/guidelines.html ）
以下是本文档中的一些内容：

> 2.9 “beta”、“demo”、“trial”或“test”版本的应用程序将被拒绝。
> 2.13 主要是营销材料或广告的应用程序将被拒绝。
> 3.2 带有占位符文本的应用程序将被拒绝。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T06:25:12.010

我曾经遇到过这个问题，因为我是通过 XCODE 的 Beta 版进行构建的。因此，请确保您不是 iOS SDK 的 Beta 版本。希望能帮助到你。

# oracle11g - java.sql.SQLSyntaxErrorException: ORA-04098: 触发器 'MYTABLE.MY_SEQUENCE_ID' 无效并且重新验证失败

> ID：12190962
> 
> 赞同：0
> 
> 时间：2012-08-30T06:21:08.247
> 
> 标签：oracle11g

我在 java String 中创建这个 oracle 11g 语句，然后在 sql developer 中执行它。我尝试在数据库上运行它，并在创建触发器时收到警告。但是，当从代码运行时，我得到了标题中提到的错误。

请告诉我错误在哪里以及如何解决？

```
CREATE OR REPLACE TRIGGER myschema.my_sequence_id BEFORE INSERT ON myschema.mytable 
 FOR EACH ROW BEGIN SELECT my_sequence_id.nextval INTO :new.mycolumn FROM DUAL; end; / 
```

提前致谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T06:29:03.043

`my_sequence_id`如果您已经有一个序列，则不能命名触发器`my_sequence_id`。它们共享相同的命名空间。您的触发器需要命名为序列名称（或架构中的任何其他对象）以外的名称。

# c# - 获取二维数组数组中二维数组的数量

> ID：12190965
> 
> 赞同：1
> 
> 时间：2012-08-30T06:21:19.030
> 
> 标签：c#, arrays, size

我有一个非常愚蠢的问题。请原谅它已经晚了，我很累。:)

我有一个二维整数数组，定义如下：

```
int[,] myArray = new int[,] // array of 7 int[,] arrays
{
    { 1, 10 }, // 0
    { 2, 20 }, // 1
    { 3, 30 }, // 2
    { 4, 40 }, // 3
    { 5, 50 }, // 4
    { 6, 60 }, // 5
    { 7, 70 }, // 6                
}; 
```

如您所见，该数组由 7 个 int[,] 数组组成。

当我调用*myArray.Length*时，结果为 14。我需要的是 7。如何获得 int[,] 数组的数量？调用的方法是什么（我期望的结果是 7）。

再次感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T06:22:26.827

使用[GetLength](http://msdn.microsoft.com/en-us/library/system.array.getlength%28v=vs.100%29.aspx)方法获取一维的长度。

```
myArray.GetLength(0) 
```

尝试以下几行：

```
 Console.WriteLine(myArray.GetLength(0)); 
 Console.WriteLine(myArray.GetLength(1)); 
```

你会得到

```
7
2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T06:24:30.630

这***不是***2D 数组的数组 - 它是一个 2D 数组。如前所述，尺寸由 给出`myArray.GetLength(dimension)`。它不是带有“7 个 int[,] 数组”的数组 - 它只是一个 7×2 数组。

如果你想要一个数组数组（实际上是一个向量的向量），它是：

```
int[][] myArray = {
    new int[] {1,10}, // alternative: new[]{1,10} - the "int" is optional
    new int[] {2,20},
    new int[] {3,30},
    new int[] {4,40},
    new int[] {5,50},
    new int[] {6,60},
    new int[] {7,70},
}; 
```

然后 `7`是`myArray.Length`。

# java - Json Jackson Mapper 通用地图类型问题

> ID：12190966
> 
> 赞同：2
> 
> 时间：2012-08-30T06:21:21.707
> 
> 标签：java, json, jackson

这是我第一次处理类型映射，每次我尝试将节点映射到我的实际类型对象，它有一个自定义属性键作为 FooType 和一个`Set<Integer>`值。这是我的对象的样子

```
public class Foo {
    private String some;
    Map<FooTypes,Set<Integer>> foos;

    public Map<FooTypes, Set<Integer>> getFoos() {
        return foos;
    }
    public void setFoos(Map<FooTypes, Set<Integer>> map) {
        this.foos = map;
    }
    public String getSome() {
        return some;
    }
    public void setSome(String some) {
        this.some = some;
    }
}

public class FooTypes {
    private String name;
    private String id;
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public String getId() {
        return id;
    }
    public void setId(String id) {
        this.id = id;
    }
} 
```

现在每次我尝试使用映射器来读取值：-

`List <Foo> response = mapper.readValue("/home/foo/foo.json",List.class);`

我收到一条错误消息：-

`Can not find a (Map) Key deserializer for type [simple type, class cruft.FooTypes]`

有人可以告诉我如何解决这个问题吗？谢谢你。

json输出：-

```
{"foos":{"FooTypes [id=1, name=Test Foo]":[1,2,3]},"some":hello},{"foos":{"FooTypes [id=2, name=Another foo]":[5,6,7]}} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-30T17:25:23.430

由于我们没有您想要反序列化的 Json 结构，因此有点难以为您提供帮助，但这里的问题是 Jackson 不知道在将您的类**用作映射键时如何反序列化它**。Jackson 的所有信息都是一个简单的字符串，而您的类无法仅使用字符串来创建它。

有3种方法可以实现：

1.  将单个字符串参数构造函数添加到 FooType 类
2.  添加单个字符串参数工厂方法（静态）并使用 @JsonCreator 对其进行注释
3.  使用自定义`KeyDeserializer`并使用注释`foos`字段`@JsonDeserialize(keyUsing=YourDeserializer.class)`

恕我直言，静态工厂方法是更清洁的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T11:51:27.210

由于您将非原始类型作为映射键 ( `FooTypes`)，因此您需要编写自己的自定义反序列化器，如[Jackson wiki](http://wiki.fasterxml.com/JacksonHowToCustomDeserializers)中所述，因为 Jackson 不能简单地将字符串值`"FooTypes [id=1, name=Test Foo]"`（这似乎是 的结果`FooTypes.toString()`）转换为`FooTypes`实例。

在我看来，使用非字符串键序列化映射并不是一个好习惯。JSON 表示法不支持映射键的字符串（如[在此处](http://json.org/)指定）。我认为，更好的方法是在序列化之前和反序列化之后重新组织您的数据结构。

# objective-c - iOS：创建 UINavigationController 的副本

> ID：12190967
> 
> 赞同：1
> 
> 时间：2012-08-30T06:21:32.677
> 
> 标签：objective-c, ios, cocoa-touch, uinavigationcontroller

创建一个精确的对象副本是可能的`UINavigationController`？我已经看到使用 复制对象的示例`copyWithZone:`，但是对于如何使用它来复制我的`UINavigationController`.

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T06:38:20.587

`UINavigationController`不符合`NSCopying`协议，所以不能使用`copyWithZone:`or `copy`。

如果您希望有一个`UINavigationController`可以在整个应用程序中使用的自定义，那么您应该将其子类化，然后在每次需要新子类时创建该子类的新实例，例如当您创建新的模态视图控制器时。

编辑：如果您想保留以前导航控制器的视图控制器，那么您可以执行以下操作（如果需要，使用子类导航控制器）：

```
UINavigationController *newNavigationController = [[UINavigationController alloc] init];
[newNavigationController setViewControllers:oldNavigationController.viewControllers animated:NO]; 
```

这将对视图控制器进行浅拷贝，即您将引用原始导航控制器的视图控制器，而不是副本。如果您想在视图控制器上进行深度复制，那么这将更加复杂，并且需要为每个视图控制器提供特定的复制代码。（有关更多信息，请参见[此处](http://en.wikipedia.org/wiki/Object_copy)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T13:03:14.237

您可以通过创建类别（或子类）、使类别符合 NSCoding 并添加必要的编码和解码功能来做到这一点。然后，您需要确定要编码的属性 - 它当前在其数组中具有的视图控制器的类型，也许您需要使这些对象符合 NSCoding 标准。你可以看到，这不是一件小事，但也不是不可能的。您可能会发现最好使用其他一些技术来解决您的问题。

编辑：如果你想“复制”它，你真正需要知道的是数组中的 viewControllers 是什么。因此，假设您要复制“状态”，这在某种意义上与原始答案相同，但不那么严格。为每个对象添加一个类别或方法，并要求将当前状态作为字典提供给您。对于 navigationController，这可能只是当前堆栈上的对象的类。

对于堆栈中的每个对象，您可以让它们为您提供有关其状态的字典。通过状态，它意味着 UITextFields、视图等中的文本是什么，该对象需要从启动条件返回到现在的位置。

您将这一切打包 - 导航字典和状态数组。您可以将其保存为 plist。当你想构建你以后的位置时，导航控制器可以通过知道它们的类来告诉要创建哪些对象，然后在创建每个对象时，它可以发送它的字典并告诉“回到你所在的位置”。完成后，将另一个控制器推入堆栈。

# actionscript-3 - 与其他类不同，为什么 flash-component 类不添加到库就不能使用？

> ID：12190971
> 
> 赞同：0
> 
> 时间：2012-08-30T06:21:51.290
> 
> 标签：actionscript-3, flash

除非将 Flash 组件添加到库中，否则无法使用它。为什么与其他课程相比有这种差异？仅仅是因为组件具有“视图”的原因吗？或者原因是别的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T09:11:45.397

当您将组件添加到库中时，这会在幕后生成代码，或者更确切地说是编译器导入组件中使用的类的指令。

因此，对于某些组件，只需在您的 AS3 代码中导入它们就足够了，因为组件的源代码或带有已编译组件的 SWC 通过将其放在“类路径”上对编译器可见，即编译器有一个目录列表，它将在其中查找源代码 - 这是类路径，将文件放置到这些目录中的任何一个都会使它们在编译时可用。

对于其他组件，可能会有进一步的复杂性。一个组件可以从另一个 FLA 文件中导入，在原始文件中它由一个编译部分（也称为组件 shim）组成，这通常包含管理组件的代码，以及 Flash 原生格式的组件部分IDE，在其中它们仍然是可编辑的。这稍后将允许您对组件进行蒙皮（如更改其某些可见外观）。所以，通常，这些部分是电影剪辑、精灵、形状，或者，也许是声音等。

在第二种情况下，您通常没有可供编译器使用的源代码或 SWC，因此您不能通过任何其他方式导入它，只能将其放入库中。

# c - 在c中将字符组转换为字符串

> ID：12190972
> 
> 赞同：0
> 
> 时间：2012-08-30T06:21:52.533
> 
> 标签：c

我正在接收一系列字符，将其作为 rs232 的 10 个字符。变量中接收的内容是字符或一组字符的形式。我想让它们串起来

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T06:25:04.737

记住 C 没有字符串，但你可以有一个`char`s 数组。

创建一个适当大小的字符数组（一个额外的`\0`）。

```
char str[11]; 
```

循环遍历您的字符，将每个字符设置为此 char 数组中的适当值。

```
for (int i = 0; i < 10; i++) {
    str[i] = your_chars[i];
} 
```

最后扔空终止符。

```
str[10] = '\0'; 
```

[键盘](http://codepad.org/UZFyvVup)。

[Fasked](https://stackoverflow.com/users/948318/fasked)还指出，这可以通过`strncpy()`.

# javascript - jQuery $.post TypeError：e.type 不是函数

> ID：12190975
> 
> 赞同：0
> 
> 时间：2012-08-30T06:22:08.043
> 
> 标签：javascript, jquery, forum

我正在尝试为 ZetaBoards 论坛软件构建反馈脚本，我创建了一个 $.post 函数，当我尝试通过单击提交按钮提交表单时，它只返回“TypeError：e.type is not a function”在萤火虫。

这是我的代码：

```
<script type="text/javascript">
    var forumID = '1701794';

    if (location.href.indexOf('/profile/') !== -1) {
        $('table.profile:last').after('<form id="feedback_form"><table class="profile" id="feedback"><thead><tr><th colspan="4">Feedback</th></tr></thead><tbody><tr><th colspan="4">Overall Rating: # (Positive: #, Neutral: #, Negative: #)</th></tr><tr><td colspan="4">Submit feedback: <input type="text" name="comment" size="100" /> <input type="radio" name="feed_rate" value="3">0 <input type="radio" name="feed_rate" value="1">1 <input type="radio" name="feed_rate" value="2">2 <button type="button">Submit</button></td></tr><tr><th>Rating</th><th>Comment</th><th>From</th><th>Date</th></tr></tbody></table></form>');

        var profileID = window.location.href.split('profile/')[1].split('/')[0];

        $.get(main_url + 'forum/' + forumID + '/', function (data) {
            $('table.posts:not(#announcement_list) tr[class*="row"]', data).each(function () {
                var userID = $(this).find('td.c_cat-title a').text().split('~')[0];
                var rating = $(this).find('td.c_cat-title a').text().split('~')[1];
                var comment = $(this).find('div.description').text();
                var userHref = $(this).find('td.c_cat-starter a').attr('href');
                var userText = $(this).find('td.c_cat-starter a').text();
                var date = $(this).find('div.t_lastpostdate').text();

                if (profileID === userID) $('#feedback tbody').append('<tr><td>' + rating + '</td><td>' + comment + '</td><td><a href="' + userHref + '">' + userText + '</a></td><td>' + date + '</td></tr>');
            });
        });

        $('#feedback button').click(function () {
            var userID = window.location.href.split('profile/')[1].split('/')[0];
            var description = $('input[name="comment"]').val();
            var rating = $('input[name="feed_rate"]:checked').val();
            var title = userID + '~' + rating;

            $.get(main_url + 'post/?type=1&mode=1&f=' + forumID, function (data) {
                var ast = $('input[name="ast"]', data).val();
                var xc = $('input[name="xc"]', data).val();

                $.post(main_url + 'post/', $.extend({
                    mode: 1,
                    type: 1,
                    ast: ast,
                    f: forumID,
                    xc: xc,
                    sd: 1,
                    title: title,
                    description: description,
                    post: description + '~' + title
                }));
            });
        });
    }
</script> 
```

这是我使用它的地方： http: [//s1.zetaboards.com/Cory/profile/62973/](http://s1.zetaboards.com/Cory/profile/62973/)

使用测试帐户登录：

用户名：测试

密码：Test1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T06:37:35.123

`$.type`您正在覆盖值为 1的 jQuery 内置函数`$.extend({})`。 $.post 调用的目的是什么？这就是导致错误的原因。

用这个替换它：

```
$.post(main_url + 'post/', {
      mode: 1,
      type: 1,
      ast: ast,
      f: forumID,
      xc: xc,
      sd: 1,
      title: title,
      description: description,
      post: description + '~' + title
}); 
```

不带第二个参数的调用[`$.extend()`](http://api.jquery.com/jQuery.extend/)将覆盖 jQuery 对象的默认属性。

# javascript - 使用Javascript删除某行时如何更新表

> ID：12190977
> 
> 赞同：0
> 
> 时间：2012-08-30T06:22:16.547
> 
> 标签：javascript, html, rows

我想在表中删除行时更新索引。例如，我删除了第 1 行，那么第 2 行和第 3 行应该变成第 1 行和第 2 行，依此类推。

```
function deleteRow(tableID) {
            try {
            var table = document.getElementById(tableID);
            var rowCount = table.rows.length;

            for(var i=0; i<rowCount; i++) {
                var row = table.rows[i];
                var chkbox = row.cells[0].childNodes[0];
                if(null != chkbox && true == chkbox.checked) {
                    table.deleteRow(i);
                    rowCount--;
                    i--;
                }

            }
            }catch(e) {
                alert(e);
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T06:47:20.040

那么你不需要做任何事情！当从 dom 中删除一行时，行索引会自动更改。

如果您想仔细检查，您可以挂钩一个突变事件 DOMNodeRemoved 并查看发生了什么，或者在删除后保留一个断点并验证行数和索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T06:56:18.727

这是一个完整的 jQuery 解决方案：

[在这里](http://jsfiddle.net/E46Cz/)测试一下。只需单击一行即可将其删除。

```
<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title></title>

        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js""></script>

    <script>
        $(function () {

            $('tr').click(function () {

                $(this).remove()
                recountRows();
            });

            var recountRows = function () {
                var index = 1;

                $('.index').each(function () {
                    $(this).html(index);
                    index++;
                });
            }

        });
    </script>
</head>
<body>
    <table>
        <tr>
            <td class="index">1</td><td>table text</td>
        </tr>
        <tr>
            <td class="index">2</td><td>table text</td>
        </tr>
        <tr>
            <td class="index">3</td><td>table text</td>
        </tr>
        <tr>
            <td class="index">4</td><td>table text</td>
        </tr>
        <tr>
            <td class="index">5</td><td>table text</td>
        </tr>
        <tr>
            <td class="index">6</td><td>table text</td>
        </tr>
        <tr>
            <td class="index">7</td><td>table text</td>
        </tr>
        <tr>
            <td class="index">8</td><td>table text</td>
        </tr>

    </table>

</body>
</html> 
```

# asp.net-mvc-4 - MVC WebApi - System.MissingMethodException：找不到方法：'无效 System.Net.Http.ObjectContent

> ID：12190982
> 
> 赞同：3
> 
> 时间：2012-08-30T06:22:49.823
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我更新到 MVC4 的最终版本，现在我的测试因以下错误而失败：

```
System.MissingMethodException : Method not found: 'Void System.Net.Http.ObjectContent`1..ctor(!0, System.Net.Http.Formatting.MediaTypeFormatter, System.Net.Http.Headers.MediaTypeHeaderValue)'. 
at System.Net.Http.HttpRequestMessageExtensions.CreateResponse(HttpRequestMessage request, HttpStatusCode statusCode, T value, HttpConfiguration configuration) 
```

在我的单元测试中（它正在使用 RC 版本）：

```
var configuration = new HttpConfiguration(); 
var request = new HttpRequestMessage(); 
var controller = ClassUnderTest; 
controller.Request = request; 
controller.Request.Properties["MS_HttpConfiguration"] = configuration; 
```

当我运行测试时，控制器内的这行代码出现异常：

```
return Request.CreateResponse(HttpStatusCode.Created, myObj); 
```

我尝试了不同的方法，但无法修复测试。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T08:56:35.443

我解决了这个问题，这很简单。

我卸载了相对于 RC 版本的 NuGet 包并安装了新的包。这解决了问题

# jquery - 所有输入值的jQuery表单重置按钮

> ID：12190986
> 
> 赞同：9
> 
> 时间：2012-08-30T06:23:03.380
> 
> 标签：jquery, html

我正在使用一个表单和一个重置按钮，我可以在其中重置所有输入的值，但它根本不起作用。

`illegal character`当我使用 Firefox 控制台选项卡进行调试时，我在 jQuery 脚本的末尾看到了一个错误。有人可以告诉我这里有什么错误吗？

```
<!DOCTYPE HTML>
<html lang="en-IN">
<head>
  <meta charset="UTF-8">
  <title></title>
  <script type="text/javascript" src="js/jquery1.7.2.js"></script>
</head>
<body>
  <script type="text/javascript">
    jQuery('#reset').click(function(){
        $(':input','#myform')
        .not(':button, :submit, :reset, :hidden')
        .val('')
        .removeAttr('checked')
        .removeAttr('selected');
    });​
</script>
<form id='myform'>
  <input type='text' value='test' />
    <select>
      <option>One</option>
      <option selected="true">Two</option>
    </select>
    <select multiple="true" size="5">
      <option>One</option>
      <option selected="true">Two</option>
    </select>
    <input type='button' id='reset' value='reset' />
</form>​
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-30T06:39:02.553

还`<input type="reset" >`不够吗？

```
<form>

   <input type='reset'  />

</form> 
```

**[演示](http://jsfiddle.net/mrobin/MAwTg/1/)**

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-30T06:35:09.930

尝试以下操作：

```
$(function() {
    $('#reset').click(function() {
        $(':input','#myform')
            .not(':button, :submit, :reset, :hidden')
            .val('')
            .removeAttr('checked')
            .removeAttr('selected');
    });
}); 
```

在 DOM 准备好之前，您正在运行 javascript。`$(function() {})`仅在 DOM 准备好时运行。在这里阅读更多：[`.ready()`](http://api.jquery.com/ready/)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-30T06:48:49.360

### 用于重置表单字段的另一个 jQuery 解决方案是：

```
$('#form')[0].reset(); or $('#form').get(0).reset(); 
```

### 另一个更具体的，指的是必填字段：

```
$('#form').find('input, select').not(':button, :submit, :reset, :hidden').val('').removeAttr('checked').removeAttr('selected'); 
```

[jsFiddle 工作现场演示](http://jsfiddle.net/7NKzt/)- jQuery 解决方案

### 仅使用 JavaScript：

```
document.getElementById('form').reset(); 
```

### 仅使用 HTML：

正如其中一个答案中提到的那样，在大多数情况下，您不需要 JavaScript 来重置表单字段，它只需通过`type="reset"`按钮设置即可工作，例如：

```
<button type="reset" value="Reset">Reset</button> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-25T15:28:08.213

下面的 JQuery 将重置所有文本和下拉列表；

只需将**#YourID**替换为您要重置的字段/输入的 ID，对于多个输入，复制行并在适当的位置添加 ID

```
$(".btn-reset").click(function () { 
    $(this).closest('form').find("input[type=text], textarea").val(""); 
    $('#YourID').removeAttr('selected').find('option:eq(0)').prop('selected', true); 
}); 
```

# java - Java - PSOldGen 中存在哪些对象？

> ID：12190988
> 
> 赞同：0
> 
> 时间：2012-08-30T06:23:15.487
> 
> 标签：java, garbage-collection

有没有办法查看堆的 OldGen 部分中存在哪些对象？我知道如何查看堆中的所有对象（jmap），但我只想查看 PSOldGen 中的对象。

有没有办法这样做？

编辑：关于我的问题和需求的解释

我的应用程序需要非常大的堆（它在生产中使用 -XmX30G）。我们遇到的问题是，由于完全垃圾收集，应用程序每 20 分钟就会挂起约 20 秒。我想看看有哪些对象可以存活足够的时间移动到旧代，然后才能收集垃圾。我应该采取哪种方法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T06:39:07.067

你必须使用像 [JProfiler](http://www.ej-technologies.com/products/jprofiler/overview.html)或[Jprobe](http://www.quest.com/jprobe/)这样好的分析工具来更深入地了解你的堆。您可以检查没有被垃圾收集并占用堆的对象。没有被缓慢收集的对象继续移动到旧代空间。您无法检查对象年龄，并且可以识别具有更高年龄的对象将在旧代空间中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T20:11:42.060

你有什么问题？有更大的堆大小或更长的 GC 暂停？

如果它是关于更高的堆大小，您可以在使用 jmap 进行完整 GC 之后检查堆中的对象，并检查是否需要它们。如果您仍然指的是额外的对象，您可以相应地更改代码。

如果您的问题是由于较长的 GC 暂停引起的，您可以在完整 GC 之前和之后获取 jmap 输出，并查看这些输出的差异，这些输出应该提供在该循环中被垃圾收集的对象的详细信息。您可以跟踪这些对象创建的起源并避免这种情况，可能是通过对象池等。

# xcode - 在 XCode 解决方案中使用 MonoDevelop C# 类

> ID：12190989
> 
> 赞同：5
> 
> 时间：2012-08-30T06:23:22.100
> 
> 标签：xcode, monodevelop

我有一个 MonoDevelop 项目，它有一个带有静态方法的类，我想在 X-Code 中的标准 Objective-C 项目中引用和使用它。这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T11:38:47.923

我不是这方面的专家，但是您是否看过[有关 Mixing C# with Objective-C 的这个问题](https://stackoverflow.com/questions/5692813/mixing-c-sharp-with-objective-c)？

（最初作为评论发布）

# cocos2d-iphone - Sprite Body 停不下来

> ID：12190999
> 
> 赞同：0
> 
> 时间：2012-08-30T06:24:07.190
> 
> 标签：cocos2d-iphone, box2d-iphone

嘿，我有另一个关于跳跃精灵身体的问题。在我的代码中，我使用 moveLeft 和 moveRight 按钮，当我使用以下代码按下 moveRight 按钮时

```
if (moveRight.active==YES) 
    {
            b2Vec2 force=b2Vec2(4,0);
            ballBody->SetLinearVelocity(force);                
    } 
```

它移动完美，当我释放此按钮时，精灵主体停止使用以下代码

```
else
{
      b2Vec2 force=b2Vec2(0,0);
      ballBody->SetLinearVelocity(force); 
} 
```

但是当我把这个 else 部分然后跳转不能完成。我的跳转代码如下

```
if (jumpSprite.active==YES) 
                {
                    NSLog(@"Jump Sprite");
                    b2Vec2 locationWorld;
                    locationWorld=b2Vec2(0.0f,4.0f);
                    double force=ballBody->GetMass();
                    ballBody->ApplyLinearImpulse(force*locationWorld, ballBody->GetWorldCenter());
                } 
```

如果我删除其他部分，则跳转将执行完成，但释放按钮后精灵主体无法停止。

那么该怎么办？？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T06:23:20.083

我得到了答案。我我们创建身体并首先检查它是圆形还是多边形，因为圆形身体不能有滚动阻力，所以在这种情况下，我们不需要手动停止使用 linearVelocity 为 0。使用摩擦所有身体自动停止除了圆形身体。