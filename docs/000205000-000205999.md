# StackOverflow 问答 000205000-000205999

# javascript - 如何自动删除 HTML 页面框架？

> ID：205001
> 
> 赞同：1
> 
> 时间：2008-10-15T14:46:49.330
> 
> 标签：javascript, html, frame

自动删除页框的最佳方法是什么？

我以前使用过这种类型的代码：

```
<script language="JavaScript">
setTimeout ("changePage()", 3000);
function changePage() {
if (self.parent.frames.length != 0)
self.parent.location="http://www.example.com";
}
</script> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-10-15T15:02:21.297

你的意思是如果有人在你的内容周围加了一个框架？如果是这样，您需要在 HTML 页面中的任何位置跳出 iframe：

```
<script type="text/javascript">
if (window.top.location != window.location) {
  window.top.location = window.location;
}
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-15T15:00:42.797

这是一个更通用的替代方法，它不命名父 URL，也不使用单独的函数调用：

```
// is the current page at the top of the browser window hierarchy?
if (top.location != self.location)  
{
    // it isn't, so force this page to be at 
    // the top of the hierarchy, in its own window
    top.location = self.location    
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-15T15:00:24.233

如果您希望破帧步骤不出现在历史记录中，请这样做

```
if ( self.location !== top.location )
{
    top.location.replace( self.location );
} 
```

# sql - 您如何在团队环境中维护有用的 SQL 库？

> ID：205026
> 
> 赞同：6
> 
> 时间：2008-10-15T14:52:37.510
> 
> 标签：sql

在我的工作中，每个人都有他们用来回答问题的 sql 片段。有些是特定于客户的，而有些是针对给定数据库的通用的。我想将这些查询合并到一个库/存储库中，团队中的任何人都可以访问。要求是：

1.  无障碍
2.  可搜索
3.  可标记（每个 sql 允许多个标记）
4.  可导出（创建一个包含所有带有特定标签的查询的文档）

我对在其他团队环境中发现的工作感兴趣。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-10-15T14:53:37.180

你可以使用维基。

你可以从[Tiddly wiki](http://www.tiddlywiki.com/)这样简单的东西开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-15T15:25:54.150

wiki 是一个很好的方法。

对于特定于数据库或特定于项目的片段，链接到代码中出现类似结构的位置也非常有用。我们使用 trac 的 wiki，它为此提供了与 SVN 的良好集成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-15T15:21:16.123

与其粘贴 SQL 片段，我会考虑使用 ORM（对象关系映射器）或其他一些库，以便更轻松地表示和操作数据。它提供了一层封装以防止模式更改和一层抽象，因此您可以根据业务逻辑（即用户）而不是表的集合（即用户表、密码表）来考虑数据，访问表...）。

在 Perl 中，这类似于[DBIx::Class](http://search.cpan.org/dist/DBIx-Class)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-01T15:49:23.553

Another approach you may want to look at is creating views in your database. 'select * from some_view' can hide quite a bit of SQL. You'll still want to use a wiki to document them, but if its a view you don't have to worry about people keeping outdated copies.

# sql-server - 如何在 SSRS 中将数据集或组显示为逗号分隔列表？

> ID：205040
> 
> 赞同：4
> 
> 时间：2008-10-15T14:54:47.457
> 
> 标签：sql-server, reporting-services

在我的 SQL 数据库中，我有一个一对多的关系，如下所示：

```
老师 学生
约翰·亚历克斯
约翰迈克
约翰·肖恩
鲍勃杰克
加里·乔治
加里·保罗

```

我想显示一个列出每位教师的表格，他们的学生以逗号分隔的列表形式显示，如下所示：

```
老师 学生
约翰·亚历克斯、迈克、肖恩
鲍勃杰克
加里·乔治，保罗

```

[这个问题](https://stackoverflow.com/questions/180032/how-can-i-combine-multiple-rows-into-a-comma-delimited-list-in-sql-server-2005)描述了如何在 SQL Server 端做到这一点，但是有没有办法在 SSRS 端做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-05-28T23:20:55.430

我找到了一个更简单、直接的方法来做到这一点——添加一个表达式，如下所示：

```
=Join(LookUpSet(Fields!TeacherName.Value, 
    Fields!TeacherName.Value, 
    Fields!StudentName.Value, 
    "YourTeacherDataSet"), ",") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-16T04:18:22.437

在教师上添加分组，并使用 .net Join 附加详细信息行

在 BOL 中为多值参数演示了连接...所以理论上它可以用于结果数据集

[加入](http://msdn.microsoft.com/en-us/library/b65z3h4h.aspx)

[连接和多值参数](http://msdn.microsoft.com/en-us/library/aa337292(SQL.90).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-16T18:16:51.263

这个 StackOverflow 答案提供了一种实现此目的的技术：

[SSRS 2005 中的字符串聚合](https://stackoverflow.com/a/977763/16911)

这种技术的缺点是它在代码模块中使用共享变量，如果报表托管在网络上，这可能会导致并发问题。

我还遇到了另一种解决方法：

创建一个自定义函数，如GetStudentList(TeacherId As Integer, ConnectionString As String)，用于根据指定教师返回学生列表。

然后可以编写此函数来打开与数据库的连接、运行查询、处理结果，然后返回它们。但这意味着打开连接并为每一行运行查询，这对于这种类型的格式来说似乎有很多开销（更不用说需要传入连接字符串）。

这主要基于[专家交流文章](http://www.google.com/search?hl=en&client=firefox-a&rls=org.mozilla%3Aen-US%3Aofficial&hs=vTB&q=site%3Aexperts-exchange.com+%22Reporting+Services%2C+access+dataset+from+RDL+custom+code+module%22&btnG=Search)。

# c++ - 有 C++ 反编译器吗？

> ID：205059
> 
> 赞同：131
> 
> 时间：2008-10-15T15:01:10.610
> 
> 标签：c++, reverse-engineering, decompiling

我有一个程序丢失了 C++ 源代码。有没有好的 C++ 反编译器？

我已经遇到了[Boomerang](http://boomerang.sourceforge.net/)。

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2008-10-15T15:08:12.500

您可以使用Hex [-Rays的](http://www.hex-rays.com/)[IDA Pro](http://www.hex-rays.com/idapro/)。除非您在调试信息中进行编译，否则您通常不会从二进制文件中获得好的 C++。准备花费**大量**的体力劳动来反转代码。

 **如果您没有剥离二进制文件，则有一些希望，因为 IDA Pro 可以生成类似 C 的代码供您使用。通常它非常粗糙，至少在我几年前使用它的时候。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2008-10-15T15:15:32.220

信息在编译过程中被丢弃。即使反编译器可以生成具有类和所有内容的逻辑等效代码（它可能不能），自记录部分在优化的发布代码中消失了。没有变量名，没有例程名，没有类名——只有地址。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2008-10-15T15:12:35.130

是的，但是它们都无法生成足够可读的代码来值得付出努力。与从头开始重写旧应用程序相比，您将花费更多时间尝试读取带有汇编程序块的反编译源代码。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2008-10-15T17:47:59.387

我还没有看到任何生成 C++ 代码的反编译器。我见过一些实验性的，它们在生成 C 代码方面做出了合理的尝试，但它们往往依赖于匹配特定编译器的代码生成模式（这可能已经改变，自从我上次研究这个已经有一段时间了）。当然，任何符号信息都会消失。谷歌“反编译器”。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-10-15T15:16:21.907

根据原始代码的大小和编写程度，可能值得用你最喜欢的语言（可能仍然是 C++）重新开始，并从上一个版本中犯的任何错误中学习。不是有人说过要写一个扔掉吗？

nb 显然，如果这是一个巨大的产品，那么它可能不值得花时间。

# python - 是否可以本地编译 Python（除了 pyc 字节码）？

> ID：205062
> 
> 赞同：14
> 
> 时间：2008-10-15T15:02:09.267
> 
> 标签：python, module, compilation

我想知道是否可以从 Python 脚本创建可执行模块。我需要拥有 Python 脚本的最大性能和灵活性，而不需要在 Python 环境中运行。我将使用此代码按需加载用户模块以自定义我的应用程序。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-10-15T15:11:26.177

*   有[pyrex](http://www.cosc.canterbury.ac.nz/greg.ewing/python/Pyrex/)可以将类似 python 的源代码编译为 python 扩展模块
*   [rpython](https://rpython.readthedocs.io/en/latest/)，它允许您在对各种后端（如 C、LLVM、.Net 等）有一些限制的情况下编译 python。
*   还有将 python 转换为 C++ 的[shed-skin](https://shedskin.readthedocs.io)，但我不能说它是否有任何好处。
*   [PyPy](http://codespeak.net/pypy/dist/pypy/doc/home.html)实现了一个 JIT 编译器，它试图通过将运行时运行的部分转换为机器代码来优化运行时，如果您为 PyPy 解释器编写可能是一条可行的路径。
*   在 PyPy 中研究 JIT 的同一位作者之前曾写过[psyco](http://psyco.sourceforge.net/)，它在 CPython 解释器中优化了 python。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-10-15T15:05:47.343

您可以使用 py2exe 之类的东西将您的 python 脚本编译成 exe，或者使用 Freeze 来编译 linux 二进制文件。

请参阅：[如何使用 Python 创建可直接执行的跨平台 GUI 应用程序？](https://stackoverflow.com/questions/2933/an-executable-python-app#2937)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-17T07:19:59.107

我使用[Cython](http://cython.org/)取得了很多成功，它基于并扩展了 pyrex：

> Cython 是一种语言，它使为 Python 语言编写 C 扩展就像 Python 本身一样容易。Cython 基于著名的 Pyrex，但支持更尖端的功能和优化。
> 
> Cython 语言非常接近 Python 语言，但 Cython 还支持调用 C 函数以及在变量和类属性上声明 C 类型。这允许编译器从 Cython 代码生成非常高效的 C 代码。
> 
> 这使得 Cython 成为包装外部 C 库以及加快 Python 代码执行速度的快速 C 模块的理想语言。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-16T15:56:03.073

我认为您可以使用 jython 将 python 编译为 Java 字节码，然后使用 GCJ 进行编译。

# linux - 有没有办法改变 Unix 中另一个进程的环境变量？

> ID：205064
> 
> 赞同：113
> 
> 时间：2008-10-15T15:02:20.110
> 
> 标签：linux, shell, unix, gdb, environment-variables

在 Unix 上，有什么方法可以让一个进程更改另一个进程的环境变量（假设它们都由同一个用户运行）？一个通用的解决方案是最好的，但如果不是，那么一个人是另一个孩子的具体情况呢？

编辑：通过 gdb 怎么样？

* * *

## 回答 #1

> 赞同：152
> 
> 时间：2008-10-17T04:19:02.683

通过 gdb：

```
(gdb) attach process_id

(gdb) call putenv ("env_var_name=env_var_value")

(gdb) detach 
```

这是一个非常讨厌的 hack，当然只能在调试场景的上下文中完成。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2009-02-27T09:43:54.353

您可能可以在技术上做到这一点（请参阅其他答案），但它可能对您没有帮助。

大多数程序会期望环境变量在启动后不能从外部更改，因此大多数程序可能只会在启动时读取他们感兴趣的变量并基于此进行初始化。因此，之后更改它们不会有任何影响，因为程序永远不会重新读取它们。

如果您将此作为具体问题发布，您可能应该采取不同的方法。如果只是出于好奇：好问题:-)。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2008-10-16T17:50:38.927

基本上，没有。如果您有足够的权限（root 或类似权限）并在 /dev/kmem（内核内存）附近进行了操作，并且您对进程的环境进行了更改，并且该进程实际上在之后重新引用了环境变量（即进程尚未获取 env var 的副本并且不只使用该副本），那么也许，如果你幸运且聪明，并且风向正确的方向吹，并且月相是正确的，也许，你可能会有所成就。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2008-10-15T15:07:49.443

引用杰里·皮克的话：

> 你不能教老狗新把戏。

您唯一能做的就是在启动子进程**之前**更改它的环境变量：它会获取父环境的副本，抱歉。

有关详细信息，请参阅[http://www.unix.com.ua/orelly/unix/upt/ch06_02.htm](http://www.unix.com.ua/orelly/unix/upt/ch06_02.htm)。

只是对有关使用 /proc 的答案的评论。在 linux /proc 下是支持的，但它不起作用，你**不能**更改`/proc/${pid}/environ`文件，即使你是 root：它**绝对**是只读的。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2008-10-15T15:54:14.077

我可以想到一种相当人为的方法来做到这一点，它不适用于任意进程。

假设您编写了自己的实现“char *getenv”的共享库。然后，您设置“LD_PRELOAD”或“LD_LIBRARY_PATH”环境。vars 以便您的两个进程都在预加载共享库的情况下运行。

这样，您基本上可以控制“getenv”函数的代码。然后，你可以做各种讨厌的把戏。您的“getenv”可以咨询外部配置文件或 SHM 段以获取 env vars 的替代值。或者您可以对请求的值进行正则表达式搜索/替换。或者 ...

除了重写动态链接器（ld-linux.so）之外，我想不出一种简单的方法来为任意运行的进程（即使你是 root）做到这一点。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-10-15T15:10:58.517

或者让您的流程更新新流程的配置文件，然后：

*   对新进程执行 kill -HUP 以重新读取更新的配置文件，或者
*   让进程不时检查配置文件的更新。如果发现更改，则重新读取配置文件。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2020-05-14T15:35:37.413

似乎*putenv*现在不起作用，但*setenv*可以。我正在测试接受的答案，同时尝试在当前 shell 中设置变量但没有成功

```
$] sudo gdb -p $$
(gdb) call putenv("TEST=1234")
$1 = 0
(gdb) call (char*) getenv("TEST")
$2 = 0x0
(gdb) detach
(gdb) quit
$] echo "TEST=$TEST"
TEST= 
```

及其工作方式的变体：

```
$] sudo gdb -p $$
(gdb) call (int) setenv("TEST", "1234", 1)
$1 = 0
(gdb) call (char*) getenv("TEST")
$2 = 0x55f19ff5edc0 "1234"
(gdb) detach
(gdb) quit
$] echo "TEST=$TEST"
TEST=1234 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-10-15T15:10:24.977

据我所知不是。实际上，您正在尝试从一个进程与另一个进程进行通信，这需要一种 IPC 方法（共享内存、信号量、套接字等）。通过这些方法之一接收数据后，您可以设置环境变量或更直接地执行其他操作。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-10-15T15:05:36.390

如果您的 unix 支持 /proc 文件系统，那么读取 env 很简单——您可以读取环境、命令行和您拥有的任何进程的许多其他属性。改变它...嗯，我可以想办法，但这是一个坏主意。

更一般的情况......我不知道，但我怀疑是否有可移植的答案。

（已编辑：我的原始答案假设 OP 想要读取环境，而不是更改它）

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-02-27T09:50:51.200

不是直接的答案，但是... [Raymond Chen 前几天有一个 [基于 Windows] 的理由](https://devblogs.microsoft.com/oldnewthing/20090223-00/?p=19063)：-

> ...虽然肯定有不受支持的方法或在调试器的帮助下工作的方法，但没有任何东西支持以编程方式访问另一个进程的命令行，至少内核没有提供任何东西。...
> 
> 没有是不跟踪您不需要的信息的原则的结果。内核不需要获取另一个进程的命令行。它获取传递给`CreateProcess`函数的命令行并将其复制到正在启动的进程的地址空间中，在`GetCommandLine`函数可以检索它的位置。一旦进程可以访问自己的命令行，内核的职责就完成了。
> 
> 由于命令行被复制到进程的地址空间，进程甚至可能写入保存命令行的内存并修改它。如果发生这种情况，那么原始命令行将永远丢失；唯一已知的副本被覆盖。

换句话说，任何这样的内核设施都是

*   难以实施
*   潜在的安全问题

然而，最可能的原因仅仅是这种设施的用例有限。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2011-05-31T12:52:59.950

UNIX 充满了进程间通信。检查您的目标实例是否有一些。Dbus 正在成为“桌面”IPC 的标准。

*我使用awesome-client*更改了Awesome窗口管理器内部的环境变量，它是lua代码的Dbus“发送者”。

# java - WebSphere App Server 不编译 JSP/标签库

> ID：205069
> 
> 赞同：1
> 
> 时间：2008-10-15T15:04:38.843
> 
> 标签：java, jsp, websphere, jsp-tags

这是一个仅在应用程序更新时出现的问题（仅通过管理控制台测试，而不是 CLI）。此外，这只发生在我们的开发环境中，这与我们的 prod 环境相同。在卸载/安装时，一切都正确编译。但是，这是一个大型应用程序，需要很长时间才能进行更新——我们不想每次都卸载/安装（尤其是在开发构建期间）。

正在生成 JSP .java 和 .smap 文件，但不是 .class。在 prod 上，没有 .smap——只有 .java 和 .class。如果 JSP 能够编译，我们相信标签库也会被编译。

有没有人遇到过这个问题，或者知道我们可能忽略了什么？

WAS 版本：6.1.0.17

**编辑：**这只发生在一个 JSP 及其使用的标记库中。我们正在尝试解决问题。让您知道我们是否解决了任何问题。[我们认为根据此修复程序](http://www-01.ibm.com/support/docview.wss?rs=180&uid=swg1PK68395)，.SMAP 文件可能存在问题

## [解决方案](https://stackoverflow.com/questions/205069/websphere-app-server-not-compiling-jsptag-libs#205906)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-15T18:42:28.107

# 解决方案：

**问题是**：WAS 启用了调试。这会生成 .smap 文件（源映射）而不是 .class 文件。一旦我们发现这一点，我们就禁用了管理控制台下的调试服务（应用程序服务器 > server1 > 调试进程 > 取消选中“启动服务”）。我不知道为什么这只会在更新时产生错误，但是无论如何，问题都解决了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-15T15:44:08.870

一个建议：

您是否检查过您的环境是否有一个指向 JDK 而不仅仅是 JRE 的 JAVA_HOME。JRE没有javac，所以没有办法将JSP编译器在运行时创建的.java文件编译成.classes？

编辑：另外，也许这个[链接](http://publib.boulder.ibm.com/infocenter/wasinfo/v6r0/index.jsp?topic=/com.ibm.websphere.zseries.doc/info/zseries/ae/cweb_jspengine.html)可能有帮助？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-15T15:57:27.813

我没有使用过标签库，但我可以告诉你：

应用程序服务器检查时间戳。从应用程序服务器的角度来看，**非常确定JSP 文件的“修改”时间戳是合理的（例如，将来不会）**

希望这可以帮助您解决问题...

# linux - 进程可以拥有的每个不同 UID 的目的是什么？

> ID：205070
> 
> 赞同：37
> 
> 时间：2008-10-15T15:05:13.770
> 
> 标签：linux, security, unix

真实的UID、有效的UID，有些系统甚至还有“保存的UID”。所有这些的目的是什么，尤其是最后一个？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2008-10-15T15:22:50.957

每个 UNIX 进程都有 3 个与之关联的 UID。超级用户权限是 UID=0。

**真实的 UID**

这是创建此进程的用户/进程的 UID。仅当正在运行的进程的 EUID=0 时才能更改。

**有效的 UID**

此 UID 用于评估进程执行特定操作的权限。EUID 可以更改为 RUID，如果 EUID!=0，则可以更改为 SUID。如果 EUID=0，则可以更改为任何值。

**保存的 UID**

如果您运行一个设置了 set-UID 位的可执行文件，那么生成的运行进程将以运行它的真实用户的真实 UID 以及可执行文件所有者的有效且保存的 UID 开始。如果该进程随后调用 setuid() 或 seteuid() 来更改其有效 UID，由于保存的 UID，它们仍然可以再次恢复其原始权限。如果未设置 set-UID 位，则 SUID 将是 RUID。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-10-15T15:30:00.727

真正的 uid 是启动进程的用户的 id。

有效 uid 通常与真实 uid 相同。只有在以下情况下才会有所不同：

*   可执行文件设置了 set-uid 位，并且可执行文件所有者与调用它的用户不同

*   或者如果 set-uid 进程调用 setuid(2)。如果进程具有超级用户权限，则允许 setuid(2) 的任何参数（但所有 *-uid 都设置为相同的值）；否则，可以使用 real-uid 或有效 uid 或保存的 uid 调用 setuid(2)。

保存的 uid 是进程启动时的有效 uid，它被保存是为了允许作为各种 set*uid 系统调用的参数。

请注意，具有超级用户权限的进程调用 setuid(2) 来更改其有效 uid 也会将真实 uid 和保存的 uid 更改为相同的值，因此应使用非 POSIX seteuid(2) 代替。

以上所有内容也适用于（真实|有效|保存的）组 ID。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-10-19T22:38:15.227

除了真实的、有效的和保存的 UID，启用审计的 Unix 系统也有审计 UID。进程的 AUID 标识启动进程的用户；setuid(2) 或 seteuid(2) 不会更改它。目的是它在整个过程中保持不变，并且仅用于标记审计记录。因此，如果用户执行特权 shell（甚至是通过 su 或 sudo 获得的授权用户），该进程的审计记录将来自该用户。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-07-12T01:35:56.973

每个 Linux 进程都有 3 个与之关联的 UID。

*   **Real UID**：创建此进程的进程的 UID。
*   **有效 UID**：这用于评估进程执行特定操作的权限。
*   **已保存的 UID**：用于带有`setuid`位的二进制图像文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-23T21:06:04.313

公认的答案是不正确的，因为除了 root 之外的任何人都不能更改真正的 UD。从 setuid 的手册页：（我无法发表评论）

> setuid() 函数将当前进程的真实有效用户 ID 和保存的 set-user-ID 设置为指定值。如果有效用户 ID 是超级用户的 ID，或者指定的用户 ID 与有效用户 ID 相同，则允许使用 setuid() 函数。如果不是，但指定的用户ID与真实用户ID相同，setuid()会将有效用户ID设置为真实用户ID。

# sql - 在 SQL Server 2005 中，如何设置一列整数以确保值大于 0？

> ID：205073
> 
> 赞同：9
> 
> 时间：2008-10-15T15:05:36.000
> 
> 标签：sql, sql-server-2005, constraints, check-constraints

这可能是一个简单的答案，但我找不到。我有一个包含一列整数的表，我想确保在插入一行时该列中的值大于零。我可以在代码方面做到这一点，但认为最好在桌面上强制执行。

谢谢！

我的上一条评论有误，现在一切都很好。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2008-10-15T15:11:15.957

您可以对列使用检查约束。IIRC 的语法如下：

```
create table foo (
    [...]
   ,Foobar int not null check (Foobar > 0)
    [...]
) 
```

正如下面的海报所说（感谢康斯坦丁），您应该在表定义之外创建检查约束并给它一个有意义的名称，以便它适用于哪一列是显而易见的。

```
alter table foo
  add constraint Foobar_NonNegative
      check (Foobar > 0) 
```

您可以从系统数据字典中获取检查约束的文本`sys.check_constraints`：

```
select name
      ,description
  from sys.check_constraints
 where name = 'Foobar_NonNegative' 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-10-15T15:11:06.880

创建数据库约束：

```
ALTER TABLE Table1 ADD CONSTRAINT Constraint1 CHECK (YourCol > 0) 
```

您也可以有非常复杂的约束，涉及多个列。例如：

```
ALTER TABLE Table1 ADD CONSTRAINT Constraint2 CHECK (StartDate<EndDate OR EndDate IS NULL) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-15T15:12:54.067

`CHECK`创建表时添加约束

```
CREATE TABLE Test(
      [ID] [int]  NOT NULL,
      [MyCol] [int] NOT NULL CHECK (MyCol > 1)
) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-15T15:13:07.653

我相信您想在表字段中添加一个 CONSTRAINT ：

```
ALTER TABLE tableName WITH NOCHECK
ADD CONSTRAINT constraintName CHECK (columnName > 0) 
```

该可选 NOCHECK 用于防止将约束应用于现有数据行（可能包含无效数据）并允许添加约束。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-28T18:08:16.063

您可以更改表格并添加新的约束，如下所示。

```
BEGIN TRANSACTION
     GO
     ALTER TABLE dbo.table1 ADD CONSTRAINT
        CK_table1_field1 CHECK (field1>0)
     GO
     ALTER TABLE dbo.table1 SET (LOCK_ESCALATION = TABLE)
     GO
COMMIT 
```

# javascript - jQuery .ready 在动态插入的 iframe 中

> ID：205087
> 
> 赞同：188
> 
> 时间：2008-10-15T15:09:22.577
> 
> 标签：javascript, jquery, iframe, thickbox, galleria

当有人点击图片时，我们正在使用 jQuery[厚框](http://jquery.com/demo/thickbox/)动态显示 iframe。在这个 iframe 中，我们使用[Galleria](http://devkick.com/lab/galleria/demo_01.htm)一个 javascript 库来显示多张图片。

问题似乎是`$(document).ready`在 iframe 中似乎被触发得太快了，甚至还没有加载 iframe 内容，因此 Galleria 代码没有正确应用于 DOM 元素。 `$(document).ready`似乎使用 iframe 父就绪状态来决定 iframe 是否就绪。

如果我们将 document ready 调用的函数提取到一个单独的函数中，并在 100 毫秒超时后调用它。它可以工作，但我们不能在生产速度慢的计算机上冒险。

```
$(document).ready(function() { setTimeout(ApplyGalleria, 100); }); 
```

我的问题：我们应该绑定哪个 jQuery 事件才能在动态 iframe 准备好时执行我们的代码，而不仅仅是它的父级？

* * *

## 回答 #1

> 赞同：294
> 
> 时间：2008-10-15T15:41:30.593

我回答了一个类似的问题（请参阅[IFRAME 完成加载时的 Javascript 回调？](https://stackoverflow.com/questions/164085/javascript-callback-when-iframe-is-finished-loading)）。您可以使用以下代码控制 iframe 加载事件：

```
function callIframe(url, callback) {
    $(document.body).append('<IFRAME id="myId" ...>');
    $('iframe#myId').attr('src', url);

    $('iframe#myId').load(function() {
        callback(this);
    });
} 
```

在处理 iframe 时，我发现使用加载事件而不是文档就绪事件已经足够好了。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2009-04-09T17:37:46.587

使用 jQuery 1.3.2 以下为我工作：

```
$('iframe').ready(function() {
  $('body', $('iframe').contents()).html('Hello World!');
}); 
```

修订：！实际上，上面的代码有时看起来可以在 Firefox 中运行，而在 Opera 中似乎从来没有。

相反，我为我的目的实施了一个轮询解决方案。简化后看起来像这样：

```
$(function() {
  function manipIframe() {
    el = $('body', $('iframe').contents());
    if (el.length != 1) {
      setTimeout(manipIframe, 100);
      return;
    }
    el.html('Hello World!');
  }
  manipIframe();
}); 
```

这不需要调用 iframe 页面中的代码。所有代码都驻留在父框架/窗口中并从其执行。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2008-10-15T15:54:38.727

在 IFrames 中，我通常通过在块的最后放置一个小脚本来解决这个问题：

```
<body>
The content of your IFrame
<script type="text/javascript">
//<![CDATA[
   fireOnReadyEvent();
   parent.IFrameLoaded();
//]]>
</script>
</body> 
```

这对我来说大部分时间都在工作。有时最简单和最天真的解决方案是最合适的。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-04-30T01:49:51.910

按照 DrJokepu 和 David Murdoch 的想法，我实现了一个更完整的版本。它**要求**父级和 iframe 上的 jQuery 以及 iframe 都在您的控制之下。

**iframe 代码：**

```
var iframe = window.frameElement;

if (iframe){
    iframe.contentDocument = document;//normalization: some browsers don't set the contentDocument, only the contentWindow

    var parent = window.parent;
    $(parent.document).ready(function(){//wait for parent to make sure it has jQuery ready
        var parent$ = parent.jQuery;

        parent$(iframe).trigger("iframeloading");

        $(function(){
            parent$(iframe).trigger("iframeready");
        });

        $(window).load(function(){//kind of unnecessary, but here for completion
            parent$(iframe).trigger("iframeloaded");
        });

        $(window).unload(function(e){//not possible to prevent default
            parent$(iframe).trigger("iframeunloaded");
        });

        $(window).on("beforeunload",function(){
            parent$(iframe).trigger("iframebeforeunload");
        });
    });
} 
```

**父测试代码：**

```
$(function(){
    $("iframe").on("iframeloading iframeready iframeloaded iframebeforeunload iframeunloaded", function(e){
        console.log(e.type);
    });
}); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-10-15T17:00:18.937

找到了问题的解决方案。

当您单击打开 iframe 的厚框链接时，它会插入一个 id 为 TB_iframeContent 的 iframe。

无需依赖`$(document).ready`iframe 代码中的事件，我只需绑定到父文档中 iframe 的加载事件：

```
$('#TB_iframeContent', top.document).load(ApplyGalleria); 
```

此代码位于 iframe 中，但绑定到父文档中控件的事件。它适用于 FireFox 和 IE。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-08-01T14:19:59.007

基本上其他人已经发布了，但恕我直言，更干净一点：

```
$('<iframe/>', {
    src: 'https://example.com/',
    load: function() {
        alert("loaded")
    }
}).appendTo('body'); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-05-23T06:59:07.203

[此答案](https://stackoverflow.com/a/36155560/144088)中的此功能是处理此问题的最佳方法，`$.ready`因为 iframe 显式失败。这是不支持这一点[的决定。](https://bugs.jquery.com/ticket/1124)

`load`如果 iframe 已经加载，该事件也不会触发。非常令人沮丧的是，这在 2020 年仍然是一个问题！

```
function onIframeReady($i, successFn, errorFn) {
    try {
        const iCon = $i.first()[0].contentWindow,
        bl = "about:blank",
        compl = "complete";
        const callCallback = () => {
            try {
                const $con = $i.contents();
             if($con.length === 0) { // https://git.io/vV8yU
                throw new Error("iframe inaccessible");
             }

   successFn($con);
     } catch(e) { // accessing contents failed
        errorFn();
     }
  };
  const observeOnload = () => {
    $i.on("load.jqueryMark", () => {
        try {
            const src = $i.attr("src").trim(),
            href = iCon.location.href;
            if(href !== bl || src === bl || src === "") {
                $i.off("load.jqueryMark");
                callCallback();
            }
        } catch(e) {
            errorFn();
        }
    });
  };
  if(iCon.document.readyState === compl) {
    const src = $i.attr("src").trim(),
    href = iCon.location.href;
    if(href === bl && src !== bl && src !== "") {
        observeOnload();
    } else {
        callCallback();
    }
  } else {
    observeOnload();
  }
} catch(e) {
    errorFn();
} 
```

}

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-10-12T17:04:03.720

试试这个，

```
<iframe id="testframe" src="about:blank" onload="if (testframe.location.href != 'about:blank') testframe_loaded()"></iframe> 
```

然后，您需要做的就是创建 JavaScript 函数 testframe_loaded()。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-08-16T14:32:45.223

我正在将带有 jQ​​uery ajax 的 PDF 加载到浏览器缓存中。然后我使用浏览器缓存中的数据创建嵌入式元素。我想它也适用于 iframe。

```
 var url = "http://example.com/my.pdf";
// show spinner
$.mobile.showPageLoadingMsg('b', note, false);
$.ajax({
    url: url,
    cache: true,
    mimeType: 'application/pdf',
    success: function () {
        // display cached data
        $(scroller).append('<embed type="application/pdf" src="' + url + '" />');
        // hide spinner
        $.mobile.hidePageLoadingMsg();
    }
}); 
```

您还必须正确设置 http 标头。

```
 HttpContext.Response.Expires = 1;
HttpContext.Response.Cache.SetNoServerCaching();
HttpContext.Response.Cache.SetAllowResponseInBrowserHistory(false);
HttpContext.Response.CacheControl = "Private"; 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-02-10T14:17:45.190

这是我与客户遇到的确切问题。我创建了一个似乎适用于 iframe 准备工作的小 jquery 插件。它使用轮询来检查 iframe 文档 readyState 以及内部文档 url 以及 iframe 源，以确保 iframe 实际上是“准备好”的。

“onload”的问题是您需要访问被添加到 DOM 的实际 iframe，如果您不这样做，那么您需要尝试捕获 iframe 加载，如果它被缓存，那么您可能不会。我需要的是一个可以随时调用的脚本，并确定 iframe 是否“准备好”。

这是问题：

[确定本地 iframe 是否已加载的圣杯](https://stackoverflow.com/questions/35227469/holy-grail-for-determining-whether-or-not-local-iframe-has-loaded)

这是我最终想出的jsfiddle。

[https://jsfiddle.net/q0smjkh5/10/](https://jsfiddle.net/q0smjkh5/10/)

在上面的 jsfiddle 中，我正在等待 onload 将 iframe 附加到 dom，然后检查 iframe 的内部文档的就绪状态——这应该是跨域的，因为它指向维基百科——但 Chrome 似乎报告“完成”。然后，当 iframe 实际上准备就绪时，将调用插件的 iready 方法。回调尝试再次检查内部文档的就绪状态 - 这次报告跨域请求（这是正确的） - 无论如何它似乎可以满足我的需要并希望它可以帮助其他人。

```
<script>
  (function($, document, undefined) {
    $.fn["iready"] = function(callback) {
      var ifr = this.filter("iframe"),
          arg = arguments,
          src = this,
          clc = null, // collection
          lng = 50,   // length of time to wait between intervals
          ivl = -1,   // interval id
          chk = function(ifr) {
            try {
              var cnt = ifr.contents(),
                  doc = cnt[0],
                  src = ifr.attr("src"),
                  url = doc.URL;
              switch (doc.readyState) {
                case "complete":
                  if (!src || src === "about:blank") {
                    // we don't care about empty iframes
                    ifr.data("ready", "true");
                  } else if (!url || url === "about:blank") {
                    // empty document still needs loaded
                    ifr.data("ready", undefined);
                  } else {
                    // not an empty iframe and not an empty src
                    // should be loaded
                    ifr.data("ready", true);
                  }

                  break;
                case "interactive":
                  ifr.data("ready", "true");
                  break;
                case "loading":
                default:
                  // still loading
                  break;   
              }
            } catch (ignore) {
              // as far as we're concerned the iframe is ready
              // since we won't be able to access it cross domain
              ifr.data("ready", "true");
            }

            return ifr.data("ready") === "true";
          };

      if (ifr.length) {
        ifr.each(function() {
          if (!$(this).data("ready")) {
            // add to collection
            clc = (clc) ? clc.add($(this)) : $(this);
          }
        });
        if (clc) {
          ivl = setInterval(function() {
            var rd = true;
            clc.each(function() {
              if (!$(this).data("ready")) {
                if (!chk($(this))) {
                  rd = false;
                }
              }
            });

            if (rd) {
              clearInterval(ivl);
              clc = null;
              callback.apply(src, arg);
            }
          }, lng);
        } else {
          clc = null;
          callback.apply(src, arg);
        }
      } else {
        clc = null;
        callback.apply(this, arguments);
      }
      return this;
    };
  }(jQuery, document));
</script> 
```

# windows - I/O 性能健全性检查 - 检查文件是否存在

> ID：205099
> 
> 赞同：2
> 
> 时间：2008-10-15T15:12:24.100
> 
> 标签：windows, performance, file-io

您是否知道在打开和发送文件之前检查文件是否存在任何严重的性能问题？其上下文是一个通过 ASP 页面动态提供文件的 Web 应用程序。我被告知没有检查文件是否存在，因为数据库存储了这些信息并且不应该是错误的。当然，有时由于多种原因是错误的，所以我们最终不会发回任何东西，让用户不满意。

我的直觉是检查文件是否存在是如此便宜，以至于您不必担心，但有人告诉我不然。如果有帮助的话，我们的存储解决方案是一个非常强大的解决方案（不仅仅是 Web 服务器上的 IDE 驱动器）。我的问题基本上是：我的直觉正确吗？

谢谢！

注意：这些文件永远不会被删除。他们必须出问题才能失踪，但这每周会发生几次。另外，我想检查文件是否存在的原因是因为我可以返回磁盘上的备用资产，所以我希望能够在一个地方拥有该逻辑，而不是处理捕获异常并处理在那种情况下。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-10-15T15:15:37.027

即使您在尝试提供它之前检查它是否存在，它也可能在检查和您提供它之间被删除。

这里的问题是，如果您无法提供文件，您什么也不会发回。尝试提供不存在的文件应该引发异常（或您平台上的任何等价物） - 您应该通过返回适当的“抱歉，我们找不到您的文件”错误页面来处理该异常。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-15T15:15:18.460

如果文件不存在是特殊情况（正如你所说的数据库总是正确的），你不应该检查它。

如果它不在那里，你会得到一个异常并相应地处理它。这似乎是你所说的系统工作的方式，我会这样处理。

还有一点要注意，如果您说打开时文件不存在只是什么都不返回，那么这告诉我您的异常处理存在设计缺陷，并且您的较低级别没有将异常冒泡到足以正确处理的程度这样您就可以将错误消息传达回客户端。

通过适当的异常处理/冒泡，您返回备用资产应该没有问题。重新考虑您的异常处理，而不是重新设计系统应该工作的方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-15T15:14:26.200

只要您不使用某种非常奇怪的存储方案，您就不应该遇到任何严重的性能问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-15T15:14:44.280

我不知道这种方法有任何主要的性能问题，但是在打开文件之前检查文件是否存在可能会产生意想不到的结果（另一个进程可以在检查和打开文件之间删除文件）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-15T15:16:05.107

我真的不知道这是一个便宜还是昂贵的任务，但是，考虑到不检查文件的存在可能会导致对客户的不愉快响应，我会说它并不昂贵。

我确实有一些网络应用程序可以在其中检查文件是否存在并且运行良好。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-10-15T15:17:07.833

您是重定向到文件，还是通过代码读取和提供文件内容？

如果是第一个，如果文件由于某种原因不存在会发生什么？标准 404 错误，还是您有专门的错误页面？这种情况可以接受吗？

如果是后者，只需打开文件并适当地处理异常。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-10-15T15:17:33.543

与数据库或内存中的读取相比，文件 IO 的成本通常很高，但在寻找系统崩溃或未处理的异常时，我已经听过太多次“数据库存储信息，因此它不应该出错”的老话。因此，除非您的性能要求异常高，否则我会检查是否存在并优雅地恢复。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-10-15T15:18:28.033

如果*不检查*文件会导致用户感到困惑和/或没有给他们所需的东西，或者至少显示一条指示问题的错误消息 - 那么成本是多少都没有关系。

应用程序*需要*检查。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-10-15T15:18:59.360

性能方面应该基本上没有影响。这里最慢的部分是去磁盘读取文件头，但如果你要加载文件，无论如何你都必须这样做，任何体面的存储系统（几乎过去几十年的任何一个）都会缓存从检查中读取的内容，以便在您实际打开文件时读取的部分速度要快得多。话虽如此，我同意 mattlant 的观点，即如果通常预期文件存在，最好捕获文件不存在异常并正确处理它。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-10-15T15:19:29.203

如果您要在之后立即打开它，那么检查它的存在基本上是*免费*的。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-10-15T15:20:50.930

尝试打开文件，然后流式传输。有这种可能吗？这样，如果您无法打开并流式传输它，那么您将无法发送它并且可以采取适当的错误处理。

# wpf - 在 WPF 中打印集合

> ID：205112
> 
> 赞同：2
> 
> 时间：2008-10-15T15:15:09.367
> 
> 标签：wpf, printing, printdialog

有没有办法在 WPF 中打印内存集合或可变大小？

我正在使用以下代码打印 ListView 控件。但是当内容大于垂直滚动条时会接管并剪切内容。

```
 PrintDialog printDialog = new PrintDialog();
                printDialog.ShowDialog();

                printDialog.PrintVisual(lvDocumentSummary, "testing printing!"); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-19T09:41:51.603

要打印多个页面，您只需要使用一个实现 DocumentPaginator 的类 FixedDocument 是更复杂的实现之一，FlowDocument 是一个更简单的实现。

```
FlowDocument fd = new FlowDocument();

foreach(object item in items)
{
    fd.Blocks.Add(new Paragraph(new Run(item.ToString())));
}

fd.Print(); 
```

或者

```
PrintDialog pd = new PrintDialog();
pd.PrintDocument(fd); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-16T10:05:27.480

FixedDocument 像任何其他 xaml 文档一样支持 DataBinding（FlowDocument 除外）。只需在固定文档中托管列表视图并将其显示在 DocumentViewer（具有内置打印支持）中。

但是，如果您的列表对于一页来说太长，FixedDocument 不会自动生成新页面（就像 flowdocument 那样）。因此，您必须使用代码创建一个新页面，因为这不能在纯 xaml 中完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-16T09:59:55.680

如果您想从 WPF 进行良好的打印，您需要构建一个 FixedDocument 并打印它，不幸的是它可能非常复杂，具体取决于您要打印的内容。

这里有一些创建 FixedDocument 的示例代码：[http ://www.ericsink.com/wpf3d/B_Printing.html](http://www.ericsink.com/wpf3d/B_Printing.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-15T10:20:48.857

这是2019年的答案。一些旧的答案不再起作用，例如。FlowDocumentReader 没有`Print`方法。

```
 private void Button_Click(object sender, RoutedEventArgs e)
        {
            FlowDocument fd = new FlowDocument();
            foreach (var item in COLLECTION) //<- put your collection here
            {
                fd.Blocks.Add(new Paragraph(new Run(item.ToString())));
            }

            PrintDialog pd = new PrintDialog();
            if (pd.ShowDialog() != true) return;

            fd.PageHeight = pd.PrintableAreaHeight;
            fd.PageWidth = pd.PrintableAreaWidth;

            IDocumentPaginatorSource idocument = fd as IDocumentPaginatorSource;

            pd.PrintDocument(idocument.DocumentPaginator, "Printing Flow Document...");
        }
    } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2008-10-15T15:23:15.420

有趣的是，ListView 是虚拟化的吗？如果是，则未绘制对象，这是一种可能性。看看 Petzold 的印刷[示例](http://www.charlespetzold.com/blog/2006/02/PrintaBunchaButtons.cs)。

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2008-10-15T20:51:07.347

这是我对这个问题的解决方案。这有点不稳定，但适用于我的场景。

我阅读了我的收藏并将其转换为字符串。整个集合现在驻留在 StringBuilder 对象中。接下来，我在客户端机器上看到文本/字符串到一个文件中，然后使用 /p 运行记事本进程以打印文件的内容。

它工作并成功打印内容。

最后，有一个计时器在 5 秒后调用并删除文件。基本上在 5 秒内，请求已经发送到打印机队列。但更好的解决方案是确保以这种方式处理打印作业，您将 100% 确定作业已执行。

# asp.net - 为什么我的 asp:TreeView 选择的节点在 UpdatePanel 中被重置？

> ID：205114
> 
> 赞同：3
> 
> 时间：2008-10-15T15:15:23.343
> 
> 标签：asp.net, ajax, asp.net-ajax, treeview, viewstate

我有一个包含 2 的 asp.net 2.0 页面`UpdatePanels`。

第一个面板包含一个`TreeView`控件，当我在三视图控件中选择一个节点时，它只会触发第二个的更新`UpdatePanel`。这是正确的行为。

更新面板之外的页面上有两个按钮（上一个/下一个）。这些按钮触发两个面板的更新。按钮的行为是选择树中的相邻节点。第一次单击其中一个按钮时，我得到了预期的行为，并且选择了相邻节点，并且两个面板都被更新以反映此更改。

当我再次单击这些按钮中的任何一个时，就会出现问题。树视图的选定节点似乎记住了先前选定的节点，并且按钮作用于该节点。所以上一个/下一个按钮的行为是什么都不做或跳回两个。

**编辑**- 演示我的问题的示例代码

标记

```
 <asp:UpdatePanel ID="myTreeViewPanel" runat="server">
    <ContentTemplate>
       <asp:TreeView runat="server" ID="myTreeView" OnSelectedNodeChanged="myTreeView_SelectedNodeChanged">
          <SelectedNodeStyle BackColor="#FF8000" />
       </asp:TreeView>
    </ContentTemplate>
    <Triggers>
       <asp:AsyncPostBackTrigger ControlID="myButton" EventName="Click" />
    </Triggers>
 </asp:UpdatePanel>
 <asp:UpdatePanel ID="myLabelPanel" runat="server">
    <ContentTemplate>
       <asp:Label runat="server" ID="myLabel" Text="myLabel"></asp:Label>
    </ContentTemplate>
    <Triggers>
       <asp:AsyncPostBackTrigger ControlID="myTreeView" EventName="SelectedNodeChanged" />
       <asp:AsyncPostBackTrigger ControlID="myButton" EventName="Click" />
    </Triggers>
 </asp:UpdatePanel>
 <asp:Button runat="server" ID="myButton" Text="myButton" OnClick="myButton_Click" /> 
```

背后的代码

```
 protected void Page_Load ( object sender, EventArgs e )
   {
      if ( !IsPostBack )
      {
         myTreeView.Nodes.Add( new TreeNode( "Test 1", "Test One" ) );
         myTreeView.Nodes.Add( new TreeNode( "Test 2", "Test two" ) );
         myTreeView.Nodes.Add( new TreeNode( "Test 3", "Test three" ) );
         myTreeView.Nodes.Add( new TreeNode( "Test 4", "Test four" ) );
         myTreeView.Nodes.Add( new TreeNode( "Test 5", "Test five" ) );
         myTreeView.Nodes.Add( new TreeNode( "Test 6", "Test size" ) );
      }
   }
   protected void myTreeView_SelectedNodeChanged ( object sender, EventArgs e )
   {
      UpdateLabel( );
   }
   protected void myButton_Click ( object sender, EventArgs e )
   {
      // here we just select the next node in the three
      int index = myTreeView.Nodes.IndexOf( myTreeView.SelectedNode );
      myTreeView.Nodes[ index + 1 ].Select( );
      UpdateLabel( );
   }
   private void UpdateLabel ( )
   {
      myLabel.Text = myTreeView.SelectedNode.Value;
   } 
```

就像树的视图状态没有被保存？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-20T00:52:06.250

来自[UpdatePanel 控件概述 [asp.net]](http://www.asp.net/ajax/documentation/live/overview/UpdatePanelOverview.aspx)

> ### 与 UpdatePanel 控件不兼容的控件
> 
> 以下 ASP.NET 控件与部分页面更新不兼容，因此在 UpdatePanel 控件中不受支持：
> 
> *   TreeView 和菜单控件。
> *   ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-15T16:43:30.873

我认为您对 AJAX 部分页面回发是正确的，它不会更新隐藏的输入 __ViewState。

当用户导航回我的网站申请表中的页面时，我的更新面板也有同样的情况。正常输入已更新视图状态，因此它们的值被重新填充，但使用 AJAX 更新的控件的状态未记录，因此它们恢复为默认状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-15T19:28:47.543

我可以通过在页面自己的视图状态下保存和恢复所选节点来解决这个问题，只需添加这两个功能。

```
protected override object SaveViewState()
{
   ViewState["SelectedNodePath"] = myTreeView.SelectedNode.ValuePath;
   return base.SaveViewState();
}

protected void Page_PreLoad(object sender, EventArgs e)
{
   if (ViewState["SelectedNodePath"] != null)
   {
      TreeNode node = myTreeView.FindNode(ViewState["SelectedNodePath"].ToString());
      if (node != null)
         node.Select();
   }
} 
```

我无法在 LoadViewState() 中加载选定的节点，因为此时树没有任何节点。所以我在 PreLoad 中做。

我必须这样做感觉不对。我错过了什么吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-07-07T09:53:01.283

我面临着几乎类似的问题。我丢失了 CheckedNodes 集合。我怀疑同样的技术能否解决我的问题。任何的想法？

更新：我在很大程度上解决了这个问题并使用了一些解决方法。在此处查看详细信息：[TreeView inside UpdatePanel issue - postbacks on check and uncheck of the node's Checkbox](http://www.geekays.net/post/TreeView-control-postbacks-on-check-and-uncheck-of-the-nodes-Checkbox.aspx) and [Using TreeView inside AJAX UpdatePanel](http://www.geekays.net/post/Using-TreeView-inside-AJAX-UpdatePanel.aspx)

# asp.net-mvc - 来自外部库的母版页

> ID：205120
> 
> 赞同：2
> 
> 时间：2008-10-15T15:15:57.710
> 
> 标签：asp.net-mvc

我想把我的母版页放在一个中央图书馆里，这样我就可以在几个项目中使用它们，而不会有维护的噩梦。一切都以通用和集中的方式重构，它们都在“共享”命名空间中。但是如果把它们放在一个单独的项目中，我不能引用它们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-15T15:35:50.137

我不相信您可以将实际的 .master 页面放在外部库中。您可以将您自己的客户 MasterPage 派生类放在库中，并让您的客户端应用程序从中派生，但我认为这不是您的意图，因为您被标记为 asp.net-mvc（意味着非常狭窄没有太多逻辑的视图，可能没有代码隐藏）。

据我所知，没有办法从外部库中引用母版（也不是 ASPX 或 ASCX）。希望我有更好的消息告诉你。（实际上我希望我错了；我希望这里的其他人已经找到了一种技术，因为我有时想自己使用这种东西。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-04T08:42:47.017

仅供参考，我也将 Phil 的邮件放在这里：

> 回复晚了非常抱歉。您可以尝试使用 VirtualPathProvider，但这需要完全信任。除此之外，我不知道有什么方法可以做到这一点。
> 
> 菲尔

所以你去。

# c++ - CMapStringToOb::Lookup 不适用于日文字符

> ID：205127
> 
> 赞同：0
> 
> 时间：2008-10-15T15:18:24.413
> 
> 标签：c++, unicode, mfc

有谁知道为什么`CMapStringToOb::Lookup`日语不行？该代码从字符串表中加载一个字符串，并将其放入 CMapStringToOb 对象中。稍后它从字符串表中加载相同的字符串（因此保证完全相同）并调用`CMapStringToOb::Lookup`查找它。它适用于我们翻译和测试过的所有语言，除了在 CMapStringToOb 对象中找不到字符串的日语。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-10-15T20:37:27.250

您的应用是 Unicode 还是 MBCS？并不是说我会在其中一种情况下做出解释。只是试图缩小范围。

# python - 有时无法使用 Django 删除 Oracle 数据库行

> ID：205136
> 
> 赞同：1
> 
> 时间：2008-10-15T15:19:50.607
> 
> 标签：python, django, oracle

我有一个单元测试，其中包含以下代码行

```
Site.objects.get(name="UnitTest").delete() 
```

到目前为止，这一直很好。但是，该声明目前悬而未决。它将永远坐在那里尝试执行删除。如果我只是说

```
print Site.objects.get(name="UnitTest") 
```

然后它可以工作，所以我知道它可以检索该站点。没有其他程序连接到 Oracle，因此不会有两个开发人员以某种方式相互踩踏。我假设某种表锁还没有被释放。

如此短的关闭 Oracle 数据库并将其重新启动，我如何释放该锁或任何阻止我的东西？我不想诉诸数据库关闭，因为将来这可能会对其他一些开发人员造成破坏。

编辑：贾斯汀建议我看看`DBA_BLOCKERS`和`DBA_WAITERS`表。不幸的是，我根本不懂这些表，而且我不确定我在寻找什么。因此，这是与我相关的信息：

该`DBA_WAITERS`表有 182 个锁定类型为“DML”的条目。该`DBA_BLOCKERS`表有 14 个条目，其会话 ID 都对应于我们的应用程序代码使用的用户名。

由于这需要得到解决，我将重新启动 Web 服务器，但如果这个问题再次出现，我仍然很感激有关如何处理的任何建议。在 Oracle 管理方面，我是一个真正的新手，并且过去大多只使用 MySQL，所以我绝对不适合我。

编辑#2：事实证明，不管我怎么想，另一个程序员确实在和我同时访问数据库。那么将来检测到这一点的最佳方法是什么？也许我应该关闭我的程序，然后查询`DBA_WAITERS`and`DBA_BLOCKERS`表以确保它们是空的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-15T15:24:07.040

从单独的会话中，您可以查询 DBA_BLOCKERS 和 DBA_WAITERS 数据字典表并发布结果吗？这将告诉您您的会话是否被其他会话持有的锁阻塞，以及其他会话持有锁。

# c# - 全球化运行时生成的程序集

> ID：205138
> 
> 赞同：1
> 
> 时间：2008-10-15T15:20:57.203
> 
> 标签：c#, .net, deployment, resources, globalization

## **背景**

一个项目安装一些文件，其中包含定义 UserControl 的所有元素 - 一些用户源、用于设计器代码的 CodeCompileUnit 和 resx 文件。在运行时，这些文件被编译成一个程序集，并且我们的主应用程序使用这些类（程序集仅在必要时更新）。

## **问题**

该项目必须全球化，并且作为该过程的一部分，需要提供这些文件的本地化。两个选项是允许包含用于不同语言环境的附加 resx 文件（在同一文件中或作为附加的并行文件），这些文件可以编译到主程序集的附属程序集中，或者提供每种支持的语言的每个完整文件，为支持的语言编译适当的集合。

*   有没有人有其他可能值得考虑的选择？
*   我提出的任何一种解决方案都可能存在哪些问题？

* * *

***约束/免责声明*** *我知道这种情况不太理想，并且在某些领域（例如从一开始就全球化）可以做出更好的选择，但在项目的这一点上不能改变它们。感谢您提供的任何建议、解决方案或线索。谢谢。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-02T14:49:22.827

为每种区域性创建一个单独的附属程序集。这有两个好处：

*   您可以一次构建所有程序集，并为每个版本号和文件名组合拥有一个确定的文件，而不是*也*取决于文化。
*   您可以在同一个安装中拥有多个程序集，并将要使用的语言基于系统语言或用户偏好等。这将使开发和测试变得更加容易，因为您不需要继续重建和复制文件为了改变语言。
*   .NET i18n 就是这样设计的。虽然我不是 .NET i18n 方面的专家（“阅读 Guy Smith-Ferrier 的书”是我最好的建议！）我通常发现框架在遵循预期模型时效果最好。

即使“构建卫星程序集”的最后一部分是在运行时完成的（你可以在*安装*时完成吗？）你至少仍然可以获得第二个和第三个优点。这也意味着，如果您*确实*采用更正常的方式来开始提供附属组件（而不是在用户的盒子上构建它们），那么您将有更少的变化。

抱歉，如果我误解了这个问题...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-15T05:15:01.133

如果您不打算在部署后添加其他语言（至少在没有软件更新的情况下不会），那么我倾向于将所有其他 RESX 文件编译到您包含的附属程序集中。这样一来，一旦部署，用户就无法对其进行编辑。

# asp.net - 与其他服务器的 ASP.NET 受信任的 DB 连接在 Casini 中工作，而不是在 IIS 中

> ID：205140
> 
> 赞同：1
> 
> 时间：2008-10-15T15:21:44.097
> 
> 标签：asp.net, database-connection

当使用内置的 Web 服务器在本地运行网站时，我们的网站正确连接到数据库。但是，当我们将站点部署到运行 IIS 的服务器时，我们会收到数据库连接错误。数据库服务器与我们的 IIS 服务器不同。请注意，与 IIS 相同的服务器上的不同数据库的受信任连接可以正常工作。

我们需要做什么才能通过可信连接连接到不同服务器上的 SQL 数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-15T15:40:40.063

当您使用 Cassini 运行网站时，Web 服务器进程使用的帐户是您用于登录 Windows 计算机的帐户。该帐户在 IIS 上会有所不同。

考虑将数据库开放给比您可能需要的可信连接更广泛的访问权限的安全隐患。也许您可以将 Windows 身份验证与服务帐户一起使用。也就是说，在 SQL Server 中创建具有有限权限的特定于应用程序的用户。然后，您将获得连接池的好处，同时避免传递凭据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-15T15:25:12.373

我会检查 IIS 中的应用程序域用于连接到 SQL Server 的用户帐户。IIS 中的帐户也可能无法访问网络资源，这将解释无法访问其他数据库服务器的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-15T15:33:15.197

听起来您需要配置数据库服务器以提供对您尝试连接的数据库的访问权限。

假设是 SQL Server，登录到 SQL Server Enterprise Manager 并在 Security -> Logins 下，打开适用用户的属性（可能是 Web 服务器的网络服务或 ASP.NET 帐户）并转到 Database Access 选项卡并确保为您要连接的数据库勾选了允许复选框。

# security - 您将如何在 Tomcat 5.5 中实现加盐密码

> ID：205153
> 
> 赞同：2
> 
> 时间：2008-10-15T15:24:56.447
> 
> 标签：security, authentication, tomcat, passwords, salt

我的 Web 应用程序依赖于容器管理的安全性，我想知道是否可以使用加盐密码。据我所知，只需配置 JDBC 或 DataSource Realm 就可以很容易地将摘要密码存储在数据库中，但是无法为这些摘要添加盐。

有什么建议么？

**编辑：**看来我只需要在提问之前再想一想；-)

只需选择谁在进行摘要计算（客户端或服务器）并相应地配置 Tomcat。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-16T20:23:11.647

如果您正在创建和存储摘要，则可以同时创建和存储盐。

您的身份验证表将包含 .... pwdDigest varchar(64), -- 或 int256 如果您有一个 hashSalt int64, ....

然后根据您使用的身份验证协议，您可以在获得用于客户端加密的用户名时将 hashSalt 发送给客户端，或者如果您清楚地收到密码，则使用它对密码进行哈希处理。

我不熟悉您正在谈论的数据库访问技术，因此如果我错过了重点并过于简化了答案，我深表歉意。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-13T20:47:59.867

Tomcat 5.5 和 6.0 不支持 JDBCRealms 和 DataSourceRealms 中的加盐密码。这是一个已知的错误，建议的补丁似乎可以正常工作，但尚未被接受。

如果您不想应用补丁，您至少可以将其用作实现示例：

[错误 45871 - 支持 DataSourceRealm 中的盐渍和消化补丁](https://issues.apache.org/bugzilla/show_bug.cgi?id=45871)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-16T17:35:16.213

JCE 中基于 Passord 的加密根据 PKCS#5 使用盐。有关示例， 请参见[http://java.sun.com/j2se/1.4.2/docs/guide/security/jce/JCERefGuide.html#PBEEx 。](http://java.sun.com/j2se/1.4.2/docs/guide/security/jce/JCERefGuide.html#PBEEx)

# git - 设置 Git 原型

> ID：205154
> 
> 赞同：2
> 
> 时间：2008-10-15T15:24:57.787
> 
> 标签：git

我正在探索 git，看看它如何为我的公司工作。我已经安装了 git，我需要知道一些事情：

*   如何在我的计算机上设置一个 git 服务器作为我的中央仓库？
*   我试图弄清楚如何仅使用 Windows 上的 GUI 来管理我的工作流程（使用 GUI 是一项要求）。如何在一个文件夹中获取一堆文件并将它们放入我的 GIT 存储库中？

如果每个项目都有一个很好的教程，我很高兴看到那里，而不是如果你能指出我正确的方向。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-15T15:59:36.187

为了开始，您将不得不使用命令行。

首先，您需要就地初始化本地存储库。cd 到您想要在版本控制和问题下的文件的文件夹：

```
git init 
```

您现在已经在该文件夹中初始化了一个 git 存储库。现在您需要将所有文件添加到其中：

```
git add .
git commit -m "Initial Import" 
```

现在 cd 到本地存储库的父文件夹。您将要创建存储库的“裸”克隆以充当您的中央存储库。发出以下命令：

```
git clone projectFolder/ ProjectName.git 
```

ProjectName.git 将仅使用版本控制存储库创建。将此文件夹移动到您想要充当中央存储库的任何位置。从那里开始，您可以从中央存储库克隆和拉取并推送到中央存储库。

通过 SSH 从中央存储库克隆：

```
git clone [user@]host.xz:/path/to/repo.git/ 
```

或者，如果您的存储库位于网络共享上

```
git clone D:/path/to/repo.git/ 
```

这也可以从 GUI 客户端签出并将更改推送回 repo。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-15T16:06:40.603

如果需要使用 GUI，那么 git 会出现一些问题。即使在命令行上 git 也不如在其他 unix 上好。

唯一在 GUI 上支持 git 的是 Eclipse 的 git[插件](http://git.or.cz/gitwiki/EclipsePlugin)，但它与真实的东西相去甚远。我非常喜欢 git，但对于 Windows 的大量使用，我会推荐 Subversion。

# jquery - 类似于 iPhone webapps 的桌面 webapp 上的页面滑动

> ID：205155
> 
> 赞同：1
> 
> 时间：2008-10-15T15:25:04.480
> 
> 标签：jquery, mootools, scriptaculous, iui

我看过[ciui](http://clientside.cnet.com/cnet-js-standards/ciui-cnet-iphone-ui/)并且非常喜欢某些链接会滑出现有内容并将新内容加载到 DOM 中或滑回的方式。

有没有办法通过 jQuery、scriptaculous 或 MooTools 中的附加动画支持快速创建类似作品？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-26T21:18:54.253

[http://code.google.com/p/iui/](http://code.google.com/p/iui/)

这是迄今为止我见过的最好的 iPhone javascript 库，它可以进行页面滑动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-03-30T12:51:43.780

对于任何参加这个非常古老的讨论的人来说，[http://www.jqtouch.com/](http://www.jqtouch.com/)是一个更新的解决方案，非常适合这个问题。这是一个 jQuery 插件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-15T15:36:29.387

我会看一下 jQuery UI 项目，看看那里是否有你需要的东西。最好的代码是您不必编写的代码。:)

[http://ui.jquery.com/repository/latest/demos/functional/](http://ui.jquery.com/repository/latest/demos/functional/)

# linq - 有没有一种 linq-y 方法来联合对象集合的集合属性？

> ID：205158
> 
> 赞同：3
> 
> 时间：2008-10-15T15:25:43.947
> 
> 标签：linq, linq-to-objects

对不起，这个标题很伤人。我想知道是否有一个 Linq to collections 扩展方法将以下代码段折叠成一行：

```
public IEnumerable<Child> GetAllChildren(IEnumerable<Parent> parents){

  var result = new List<Child>();

  foreach(Parent parent in parents)
    foreach(Child child in parent.Children)
      result.Add(child);

  return result;
} 
```

如果您可以将其合并为一个语句，请在疯狂的难度下尝试：

```
public IEnumerable<Child> GetAllChildren(IEnumerable<Grandparent> nanas){

  var result = new List<Child>();

  foreach(Grandparent papa in nanas)
    foreach(Parent parent in papa.Children)
      foreach(Child child in parent.Children)
        result.Add(child);

  return result;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-10-15T15:27:52.680

这将起作用：

```
public IEnumerable<Child> GetAllChildren(IEnumerable<Parent> parents)
{
    return from parent in parents
           from child in parent.Children
           select child;
} 
```

然后这个：

```
public IEnumerable<Child> GetAllChildren(IEnumerable<Grandparent> nanas)
{
    return from papa in nanas
           from parent in papa.Children
           from child in parent.Children
           select child;
} 
```

请注意，在此示例中，我实际上并没有返回一个列表，而是返回一个 IEnumerable 数据源，在您开始对它进行 foreach 或类似操作之前，它实际上不会进行任何处理。

如果需要返回一个列表，修改每个return语句如下：

```
 return (from .....
            ...
            select child).ToList(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-10-15T16:04:30.593

这是强制性方法表。

```
return parents
  .SelectMany(p => p.Children); 
```

对于两个级别：

```
return oldies
  .SelectMany(grand => grand.Children)
  .SelectMany(parent => parent.Children); 
```

# perl - 如何在 Perl 中获取目录列表？

> ID：205159
> 
> 赞同：28
> 
> 时间：2008-10-15T15:25:48.363
> 
> 标签：perl, list, directory

我想`ls`在 Perl 程序中作为 CGI 脚本的一部分执行。为此，我使用`exec(ls)`了 ，但这不会从`exec`通话中返回。

有没有更好的方法来获取 Perl 中的目录列表？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2008-10-15T15:28:45.267

Exec 根本不返回。如果你想要那个，使用系统。

如果你只是想读取一个目录，open/read/close-dir 可能更合适。

```
opendir my($dh), $dirname or die "Couldn't open dir '$dirname': $!";
my @files = readdir $dh;
closedir $dh;
#print files... 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2008-10-15T21:49:31.647

其他人似乎都停留在问​​题的执行部分。

如果您想要目录列表，请使用 Perl 的内置`glob`或`opendir`. 您不需要单独的过程。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2008-10-15T15:31:15.153

**exec**不会将控制权交还给 perl 程序。 **系统**会，但它不返回 ls 的结果，它返回一个状态码。刻度线**``**会给你我们命令的输出，但被一些人认为是不安全的。

使用内置的 dir 函数。opendir、readdir 等。

[http://perldoc.perl.org/functions/opendir.html](http://perldoc.perl.org/functions/opendir.html)

[http://perldoc.perl.org/functions/readdir.html](http://perldoc.perl.org/functions/readdir.html)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2008-10-15T15:27:39.217

为了获得系统命令的输出，您需要使用反引号。

```
$listing = `ls`; 
```

然而，Perl 擅长自己处理目录。我建议使用 File::Find::Rule。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2011-07-05T18:45:20.870

使用 Perl 通配符：

```
my $dir = </dir/path/*> 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2010-07-29T10:29:25.193

还有一个例子：

```
chdir $dir or die "Cannot chroot to $dir: $!\n";
my @files = glob("*.txt"); 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2010-08-11T13:31:35.993

编辑：哎呀！我以为您只是想要目录列表...删除“目录”调用以使该脚本执行您想要的操作...

在我看来，使用文件句柄是错误的做法。以下是使用 File::Find::Rule 查找指定目录中所有目录的示例。对于你正在做的事情来说，这似乎是过度杀戮，但后来它可能是值得的。

首先，我的单线解决方案：

```
File::Find::Rule->maxdepth(1)->directory->in($base_dir); 
```

现在是一个带有评论的更详尽的版本。如果你安装了 File::Find::Rule，你应该可以运行这个没有问题。不要害怕CPAN。

```
#!/usr/bin/perl

use strict;
use warnings;

# See http://search.cpan.org/~rclamp/File-Find-Rule-0.32/README
use File::Find::Rule;

# If a base directory was not past to the script, assume current working director
my $base_dir = shift // '.';
my $find_rule = File::Find::Rule->new;

# Do not descend past the first level
$find_rule->maxdepth(1);

# Only return directories
$find_rule->directory;

# Apply the rule and retrieve the subdirectories
my @sub_dirs = $find_rule->in($base_dir);

# Print out the name of each directory on its own line
print join("\n", @sub_dirs); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-10-15T17:22:53.663

我建议你看看[IPC::Open3](http://perldoc.perl.org/IPC/Open3.html)。与系统或反引号相比，它允许对生成的进程进行更多的控制。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-10-17T01:30:10.903

在 Linux 上，我更喜欢 find：

```
my @files = map { chomp; $_ } `find`; 
```

# oracle - 什么会导致间歇性 ORA-12519（TNS：未找到合适的处理程序）错误

> ID：205160
> 
> 赞同：45
> 
> 时间：2008-10-15T15:25:49.297
> 
> 标签：oracle, junit, oracle10g, ora-12519

我们在 Oracle 10 数据库（使用 Hudson 作为持续集成服务器）前针对 Weblogic 9 运行 Junit 4 测试套件，有时我们会在脚本拆卸期间遇到 ORA-12519 崩溃。但是，错误是非常间歇性的：

*   它通常发生在同一个测试类
*   对于相同的测试用例并不总是发生（有时它们通过）
*   对于相同数量的测试用例（3-9 个）不会发生这种情况
*   有时它根本没有发生，一切都过去了

虽然我不能保证这不会在本地发生（当然，当针对同一个数据库运行时），但我已经多次运行同一个类套件，没有任何问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2008-10-15T23:34:19.983

不知道这是否会是每个人的答案，但经过一番挖掘，这就是我们想出的。

该错误显然是由于监听器不接受连接而导致的，但是为什么在其他测试可以连接正常的情况下会出现该错误（我们也可以通过sqlplus连接没有问题）？问题的关键不是无法连接，而是**断断续续**

经过一番调查，我们发现在类设置过程中创建了一些静态数据，这些数据会在测试类的生命周期内保持打开的连接，并在运行时创建新的连接。现在，即使当此类超出范围时所有资源都已正确释放（当然是通过 finally{} 块），但在运行期间存在某些情况下此类会吞噬所有可用连接（好吧，糟糕练习警报 - 这是直接连接而不是使用池的单元测试代码，因此在生产中不会发生同样的问题）。

修复方法是不使该类静态并在类设置中运行，而是在每个方法的 setUp 和 tearDown 方法中使用它。

因此，如果您在自己的应用程序中遇到此错误，请在那个坏男孩身上打一​​个分析器，看看您是否可能有连接泄漏。希望有帮助。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-03-05T04:58:38.633

我发现的另一个解决类似错误但相同错误消息的解决方案是增加找到的服务处理程序的数量。（我的这个错误实例是由 Weblogic 门户连接池中的连接过多引起的。）

*   运行`SQL*Plus`并登录为`SYSTEM`. 您应该知道在安装 Oracle DB XE 期间使用的密码。
*   `alter system set processes=150 scope=spfile;`在 SQL*Plus 中运行命令
*   非常重要：重新启动数据库。

从这里：

> [http://www.atpeaz.com/index.php/2010/fixing-the-ora-12519-tnsno-appropriate-service-handler-found-error/](http://www.atpeaz.com/index.php/2010/fixing-the-ora-12519-tnsno-appropriate-service-handler-found-error/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-03-31T07:03:09.183

我也遇到了同样的问题，找了很多地方的答案。我得到了许多类似的答案来更改进程/服务处理程序的数量。但我想，如果我忘记重置它怎么办？

然后我尝试`Thread.sleep()`在每个`connection.close();`.

我不知道如何，但它至少对我有用。

如果有人想尝试一下并弄清楚它是如何工作的，那么请继续。我也想知道它，因为我是编程世界的初学者。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-05-31T18:43:12.703

我在单元测试中遇到了这个问题，它通过连接池打开了很多与数据库的连接，然后“停止”连接池（实际上是 ManagedDataSource）以在每次测试结束时释放连接。我总是在测试套件中的某个时候用完连接。

在我的测试的 teardown() 中添加了 Thread.sleep(500) ，这解决了问题。我认为发生的事情是连接池 stop() 释放了另一个线程中的活动连接，因此如果主线程继续运行测试，清理线程远远落后于 Oracle 服务器连接不足。添加睡眠允许后台线程释放池连接。

This is much less of an issue in the real world because the DB servers are much bigger and there is a healthy mix of operations (not just endless DB connect/disconnect operations).

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-12-19T15:36:54.490

我有类似的问题。每次我使用 运行一组数据库（Spring JDBC）测试时都会发生这种情况`SpringJUnit4ClassRunner`，因此我解决了`@DirtiesContext`为每个测试添加注释以清理应用程序上下文并释放所有资源的问题，因此每个测试都可以以新的初始化运行应用上下文。

# .net - 你什么时候使用“受保护的内部”访问修饰符？

> ID：205165
> 
> 赞同：19
> 
> 时间：2008-10-15T15:26:56.253
> 
> 标签：.net, encapsulation, access-modifiers

您可能已经知道，.NET Framework 的[*protected internal*](http://msdn.microsoft.com/en-us/library/ms173121.aspx)访问修饰符以一种奇怪的方式工作：这并不意味着该类是*protected* **AND** *internal*，它表示该类是*protected* **OR** *internal*；也就是说，修改后的类或成员可以从同一程序集**以及**同一层次结构中访问。

所以，知道这一点：你什么时候使用它？能给我举个例子吗？.NET 基类库中是否有一个很好的、有*启发性的使用示例？*

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-10-15T15:33:33.900

我很少需要使用这种访​​问修饰符组合，因为我认为除了最极端的情况外，它是设计不佳的一个指标。但是，有时需要让类型转换器和编辑器等辅助类访问程序集中的方法，但只允许派生类在其他用例中访问它。

一个示例可能是将类型转换为类型转换器的字符串的调用。`ToString()`通常不用于此目的，因此您可能有一个`ToPersistableString()`希望您的类型转换器使用的调用，因此您调用它`internal`。然后，您决定从您的类派生的人很可能希望将此调用用作他们自己的派生类持久性方案的一部分，因此您也可以这样`protected`做。

**.NET Framework 上使用**
`AccessibilityNotifyClients`的`Control`是`protected internal`. 使用[Reflector](http://www.red-gate.com/products/reflector)，我可以看到这样做是为了在更改检查状态时可以访问它`CheckedItemCollection`。`CheckListBox`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-15T15:36:47.967

我已将它用于您希望能够在单独的名称空间中用于单元测试的内部方法，单元测试名称空间包含该类的子类。这允许访问受保护的方法。

也就是说，有一个论点是公开所有内容以进行单元测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-02-12T17:59:20.537

我想从 ASP.Net MVC 框架中添加一个示例：

```
public abstract class Controller : ControllerBase, <Omitted Interfaces>
{
     protected internal ViewResult View() {
            return View(null /* viewName */, null /* masterName */, null /* model */);
        }

     protected internal ContentResult Content(string content) {
            return Content(content, null /* contentType */);
        }

} 
```

# crystal-reports - 在 Crystal Reports 中显示树结构

> ID：205171
> 
> 赞同：0
> 
> 时间：2008-10-15T15:28:23.927
> 
> 标签：crystal-reports

有谁知道在 Crystal Reports 中表示树结构的方法？我的大问题是**我不知道树的深度**。它以简单的“childId -> parentId”关系在数据库表中表示。

一个完美的例子是打开 Windows 资源管理器，然后查看左侧的目录树。如果有人知道代表那棵树的方法，那么它也适用于我需要做的事情。

我最初的尝试是：

1）以编程方式（在 C# 中）将组添加到报告中。不幸的是，您不能创建 Group 类的新实例并将其添加到 Groups 集合中。

2) 递归地将同一报表嵌套到每个级别。换句话说：

```
mainReport
  subReport
    subReport
    subReport
  subReport
  subReport
    subReport 
```

ETC...

不幸的是，子报表不能包含子报表。

我真的不想在报表中添加 X 个组并隐藏我不需要的组，因为我必须添加固定数量的嵌套组，但从技术上讲，数据设计可以支持无限深度，即使在实践中我们看到最多大约 5 个深度级别。

那么，还有其他想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-05T03:08:17.207

Crystal XI 添加了分层分组。您可以在“报告”菜单下找到它。我使用它整理了一个具有 n 级深度的快速组织结构图报告。数据库表是这样的：id name managerId

在 Crystal Report 中，您选择这些列，按 id 分组。然后在 Reports 下的“Hierarchical Grouping options”菜单下，选中“Group Data Hierarchically”，父 ID managerId，并适当缩进。

输出类似于您在资源管理器中描述的树。

# keyboard - 在 Windows 上挂钩软键？

> ID：205176
> 
> 赞同：1
> 
> 时间：2008-10-15T15:30:24.623
> 
> 标签：keyboard

我的笔记本电脑上有一个神秘的“AV Now”按钮，通常会启动三星的“AVStation Now”应用程序。我没有安装这个应用程序，所以我想让这个按钮做其他事情。

所以（这个问题可以推广到任何带有软按钮的键盘），我将如何编写一个 Windows 程序（C++ 或 C#）来：

*   弄清楚按下此按钮的作用。它是自定义 USB HID 设备，还是只是一个不起眼的组合键？
*   为这个按钮安装一个全局钩子，这样我就可以让它做一些有用的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-22T07:01:34.943

> 我想让这个按钮做别的事情。

如果您不坚持自己编写程序，您可以**重新映射按键**：这些额外的按钮大多只是不起眼的组合键，在 WinXP 及更高版本中，可以通过修改注册表设置在`HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Keyboard Layout`

有一个前端实用程序可以为您执行此操作：查看[SharpKeys](http://www.randyrants.com/2006/07/sharpkeys_211.html)。您选择要重新映射的键、要重新映射到的键、写入注册表并重新启动。（将键盘映射写入注册表需要管理权限，因为键盘映射对所有用户都是全局的。）

# sql-server - Sql Server 作业步骤

> ID：205177
> 
> 赞同：0
> 
> 时间：2008-10-15T15:30:38.773
> 
> 标签：sql-server, sql-server-2005

我正在向 Sql Server 代理作业动态添加步骤，但我需要获取最后一步 id 以确定序列中的下一个 id。我似乎找不到任何可以为我提供此信息的内置 sps。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-15T16:16:36.263

只需点击 sysjobsteps 表并获取 max id ....这将起作用

# ms-word - 什么是 Word 中的 DOCVARIABLE

> ID：205179
> 
> 赞同：15
> 
> 时间：2008-10-15T15:30:56.807
> 
> 标签：ms-word, docvariable

`DOCVARIABLE`Microsoft Word 2003中的 a 是什么？我该如何设置？如何让它显示在我的 Word 文档中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-10-15T15:38:48.023

> 您可以使用 Microsoft Visual Basic for Applications 变量集合来设置和检索 Word 文档或模板中字符串变量的内容。
> 
> 此外，您可以使用 DocVariable 字段来检索已设置为在 Word 文档中显示的文档变量的值。

资料来源：[如何在 Word 文档中存储和检索变量](http://support.microsoft.com/kb/306281)

```
Sub GetSetDocVars()

Dim fName As String
fName = "Jeff Smith"
' Set contents of variable "fName" in a document using a document
' variable called "FullName".
ActiveDocument.Variables.Add Name:="FullName", Value:=fName
' Retrieve the contents of the document variable.
MsgBox ActiveDocument.Variables("FullName").Value

End Sub 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-10-15T16:07:34.673

如何让它显示在我的word文档中：

Insert->Field->Category:DocumentAutomation->Field Names:DocVariable->Field COdes Button->然后输入变量名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-23T08:59:06.873

我也在寻找这个问题的答案。创建了一个小脚本来显示所有 ActiveDocument.Variables

就这个：

```
Sub GetVariables()
    ' Declaration of output variavle, which is a string
    Dim output As String
    output = ""

    For Each Variable In ActiveDocument.Variables
        ' & is used for string concatenation.
        output = output & Variable.Name & " = " & Variable & vbNewLine
    Next

    MsgBox output
End Sub 
```

# javascript - 如何从浏览器打印 PDF

> ID：205180
> 
> 赞同：28
> 
> 时间：2008-10-15T15:31:06.853
> 
> 标签：javascript, html, pdf

在 Web 应用程序中，是否可以强制在客户端打印 PDF 文件？如果浏览器配置为在窗口内打开 PDF，我猜调用 window.print() 将起作用，但某些浏览器（如我的）配置为在外部打开 PDF。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2008-10-15T15:32:40.330

google docs 的做法是将 JavaScript 嵌入到 PDF 中，告诉 Acrobat Reader 或任何其他兼容的阅读器打印它。

您需要一个 PDF 工具包来使用随机 PDF 执行此操作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2011-01-11T08:04:49.043

```
<html>
<script language="javascript">
timerID = setTimeout("exPDF.print();", 1000);
</script>
<body>
<object id="exPDF" type="application/pdf" data="111.pdf" width="100%" height="500"/>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2011-07-27T22:28:21.920

与 taeyoung 的建议类似，您可以使用 iframe 呈现 pdf，然后使用 contentWindow.print();

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-12T21:30:07.967

您可以将 http 标头设置为 application/pdf，然后使用 javascript 强制打开一个新窗口并以这种方式打印。但谁真的会那样做呢？我的意思是现在来吧。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-12-17T13:01:49.060

您可以使用简单而神奇的库**printjs** “ [http://printjs.crabbly.com](http://printjs.crabbly.com) ”，它需要 PDF 文件并在不显示打印对话框的情况下打印它，如果需要，这是一种简单的方法：

```
 <button type="button" onclick="printJS('docs/printjs.pdf')">
    Print PDF
 </button>
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-10-15T16:35:56.567

您的意思是要强制将文件发送到打印机吗？您是否在考虑意外后果定律——用户的设备未连接到打印机？可能是黑莓手机，也可能是连接 Wi-Fi 的笔记本电脑。如果用户不希望它使用默认打印机怎么办？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-01-17T09:17:54.837

您不能使用 Javascript 直接从浏览器打印 PDF 文档。Javascript 函数 window.print() 使用浏览器打印功能，这不是您需要的。您可以通过Java Web Start 来达到您开始打印的目的。将您的 PDF 文档直接放入 jnlp 中，这样您就可以运行一个 Java 程序来接收原始 PDF 文档作为参数。现在您在系统中运行，不再在浏览器中运行，因此您可以通过 JAVA API 直接与打印驱动程序交互。这看起来很简单，但实际上并不是因为 JAVA 打印 API 不接受文件作为输入，而是因为实现了 ava.awt.print.Pageable 接口的特定数据结构。

[在www.pdfprint.it](http://www.pdfprint.it)上存在一个网络服务，可以为您完成所有工作。这里摘自官方文档的片段。

```
<?php

// 1\. GET the jnlp file with curl

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "http://www.pdfprint.it/printPdf?auth=XXXX");        
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); //return the transfer as a string       
$jnlp = curl_exec($ch);
curl_close($ch); 

$pdfDoc ="example.pdf";

//2\. put in the jnlp your PDF document base64 encoded

$jnlp = str_replace("####", base64_encode(file_get_contents($pdfDoc)),$jnlp);

//3\. echo the jnlp file 

header('Content-type: application/x-java-jnlp-file');

echo $jnlp; 
```

您只需要获取 jnlp 文件，放入您的 PDF 文档并将 jnlp 发送到浏览器。运行打印的 JAVA 程序将直接从 Web 服务下载。您还可以将一些打印选项设置为副本、面数等

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-06-07T19:49:28.337

如果要通过浏览器的打印对话框打印 PDF，可以在调用该`print()`方法的 iframe 中呈现 PDF。

```
// create iframe element
const iframe = document.createElement('iframe');

// create object URL for your blob or file and set it as the iframe's src
iframe.src = window.URL.createObjectURL(fileOrBlob);
iframe.name = 'pdf';

// call the print method in the iframe onload handler
iframe.onload = () => {
    const pdfFrame = window.frames["pdf"];
    pdfFrame.focus();
    pdfFrame.print();
}
document.body.appendChild(iframe); 
```

您还可以设置`iframe.hidden = true;`在隐藏的 iframe 中执行所有这些操作，用户不会注意到这一点。

此解决方案应适用于除旧版 Microsoft Edge 之外的所有主要浏览器。如果您需要与旧版 Microsoft Edge 兼容，您可以回退到 npm 包 print-js：[https](https://www.npmjs.com/package/print-js) ://www.npmjs.com/package/print-js 。

# java - 为不同的列名重用 resultMap

> ID：205182
> 
> 赞同：0
> 
> 时间：2008-10-15T15:31:29.083
> 
> 标签：java, jdbc, ibatis, datamapper, ibatis.net

有没有办法在单个查询中多次重用相同的 resultMap。

例如，假设我有一个“foo”resultMap：

```
<resultMap id="foo" class="Foo">
  <result property="Bar" column="bar" />
</resultMap> 
```

有没有办法定义另一个将上述内容用于不同列的结果映射？就像是...

```
<resultMap id="fizz"class="Fizz">
  <result property="Foo1" column="bar=bar1" resultMapping="foo" />
  <result property="Foo2" column="bar=bar2" resultMapping="foo" />
  <result property="Foo3" column="bar=bar3" resultMapping="foo" />
</resultMap> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-15T15:47:36.010

几乎。如果在查询中选择 Foo 的 ID，则可以让 Fizz 结果映射为该 ID 执行 SELECT，这将使用 Foo 结果映射。

`<result property="Foo1" column="bar1Id" select="selectFoo"/>`

（假设您`selectFoo`定义了一个查询。）但是对于大型结果集，这非常慢，因为它为每一行执行了一个额外的 SELECT。

iBATIS 有一个针对典型情况的解决方案，在这种情况下，您有一个包含各种其他对象的复合对象。首先，您定义一个连接您的表的查询，然后您可以使用它`fooMap`来填充`Foo`：

`<result property="Foo1" resultMap="fooMap"/>`

但是您不能将该结果映射两次用于两个不同`Foos`的，因为结果映射指定了某些列名。不过，您可以使用另一种技术：

`<result property="foo1.bar" column="foo1bar"/>`
`<result property="foo2.bar" column="foo2bar"/>`

更多细节在 iBatis Datamapper 手册的第 35 页。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T20:39:11.090

您可以使用结果图，它扩展了另一个结果图，例如

```
<resultMap id="document" class="Document"> 
  <result property="Id" column="Document_ID"/>
  <result property="Title" column="Document_Title"/>
  <discriminator column="Document_Type" type="string"/>
  <subMap value="Book" resultMapping="book"/>
  <subMap value="Newspaper" resultMapping="newspaper"/>
</resultMap>

<resultMap id="book" class="Book" extends="document"> 
  <property="PageNumber" column="Document_PageNumber"/>
</resultMap> 
```

更多信息：http: [//ibatis.apache.org/docs/dotnet/datamapper/ch03s05.html](http://ibatis.apache.org/docs/dotnet/datamapper/ch03s05.html)

# java - Axis 2 中 SOAP 消息的加密

> ID：205183
> 
> 赞同：1
> 
> 时间：2008-10-15T15:31:32.533
> 
> 标签：java, web-services, axis, ws-security

我需要对网络服务（服务器端）使用加密（和签名）。我使用axis2并成功添加了壁垒模块（用于WS-Security实现）。但是壁垒页面（[http://ws.apache.org/axis2/modules/rampart/1_2/security-module.html](http://ws.apache.org/axis2/modules/rampart/1_2/security-module.html)）缺少示例，并且示例文件没有真正记录。所以我的问题是：添加加密（和签名）的最简单方法是什么？我必须在 services.xml 中添加什么，我必须编写一个 policy.xml 吗？我必须给客户的开发人员什么（除了 WSDL）？如果您能给我指一个好的教程，那将很有帮助，谢谢等...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-18T06:15:07.707

是否可以简单地使用 SSL (https)？那肯定会简化事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-20T03:52:49.553

Vinze - 我也遇到了壁垒的这个问题，虽然我并没有试图公开一个网络服务，只是调用一个。（见[这个问题](https://stackoverflow.com/questions/16451/calling-net-web-service-wse-23-ws-security-from-java)）。

我发现所有 Web 服务安全性的东西都令人困惑，而且壁垒的文档记录很差也无济于事（没有你提到的好的教程）。

您可能会成功写入 WSS4J API 而不是使用壁垒。（顺便说一句，我认为壁垒是建立在 WSS4J 之上的）。

至于为客户的开发人员提供什么，如果您将策略信息放入 wsdl 而不是单独的 policy.xml，对他/她来说可能是最简单的。但是您可能应该计划向他/她提供有关如何保护您的服务的文档，以便他/她知道如何调用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-25T13:53:57.593

我在这本书中找到了很多答案：http: [//agileskills2.org/DWSAA/index.html](http://agileskills2.org/DWSAA/index.html)（第 9 章）所以即使我没有完成，我也会尝试回答我自己的问题：

*   即使策略在 WSDL 中，当前的 Axis 2 版本 (1.4) 也不会查看它，因此您必须在 services.xml 中添加策略和壁垒配置
*   您必须为客户端编写一个rampart-config.xml 并在用作存根构造函数参数的ConfigurationContext 中“使用”模块
*   对于这两者，您都需要一个密钥库（例如 JKS）和一个证书

也许更多，当我成功时，我会编辑这个答案......

# c# - 设计器文件的生成失败：指令缺少“tagprefix”属性

> ID：205185
> 
> 赞同：1
> 
> 时间：2008-10-15T15:31:57.740
> 
> 标签：c#, asp.net, visual-studio-2008, ide

在我的 Web 项目中添加对用户控件的引用时，我键入

```
<%@ Register 
```

然后 IDE 窃取了我的焦点并将其放在错误列表窗格中的错误上

> “设计器文件的生成失败：指令缺少‘tagprefix’属性。”

显然还没有 tagprefix 属性，我还在输入标签！

如何阻止 Visual Studio 将焦点移动到错误列表窗格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-19T03:19:35.873

没有我知道的。[您可能希望使用Microsoft Connect 将](http://connect.microsoft.com/)其记录为错误。

# .net - 向 GAC 注册/安装程序集的“正确”方式是什么？

> ID：205188
> 
> 赞同：14
> 
> 时间：2008-10-15T15:32:49.830
> 
> 标签：.net, windows, installation, gac

似乎有许多不同的方法可以向 GAC 注册程序集，例如，它们“工作”。但是，“正确”的做法是什么？

回应 Lou Franco（和 gacutil）：

我正在使用 Gacutil 进行开发，但在我看来这不是安装它的正确方法，因为 gacutil 不包含在 .NET 1.1 之后的基本 .NET 实用程序中 - 它只是一个开发工具。

附加：Gacutil（如下面的回复所示）不可再分发，因此不应在您打算提供给非开发人员的任何应用程序中使用。又名，客户。请参阅[Aaron Stebner 的这篇博文（和评论）](http://blogs.msdn.com/astebner/archive/2006/11/04/why-to-not-use-gacutil-exe-in-an-application-setup.aspx)。

作为对使用 WIX 的回应：

WIX 可能很棒，但它是如何在幕后工作的？哪些细节使 WIX 安装程序集的方式成为正确的安装方式？它是如何查找的？它是系统/.NET 调用吗？是否需要在 System32 中某处埋藏的 dll 中进行调用？

（编辑：看起来 WIX 在后台使用 MSI。请参阅我在接受的答案中的评论。）

最终编辑：看起来将程序集安装到 GAC 的正确方法是使用 Windows 安装程序，仅此而已。我要试试Wix。谢谢大家！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2008-10-15T15:44:22.553

使用 Wix，我会做这样的事情：

```
<DirectoryRef Id="我的目录" >
    <组件 ID="MyComponent" Guid="PUT-GUID-HERE" DiskId="1">
        <File Id="MyAssembly" Name="MyAssembly.dll" Assembly=".net" KeyPath="yes" Source="MyAssembly.dll" />
    </组件>
</DirectoryRef>

```

当您在 WiX 中为文件使用属性 Assembly=".net" 时，它将在 MsiAssembly 和 MsiAssemblyName 表中为此组件创建条目并将其标记为 GAC 组件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-15T15:39:35.433

使用`System.EnterpriseServices.Internal.Publish`'s`GacInstall`方法。

优点：似乎是一个内部工具。可能做所有正确的事情。

缺点：作为安装程序的一部分，您仍然需要制作并运行一个调用它的应用程序（除非您制作的安装程序是一个自定义应用程序）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-15T22:16:20.890

[http://blogs.msdn.com/astebner/archive/2006/11/04/why-to-not-use-gacutil-exe-in-an-application-setup.aspx](http://blogs.msdn.com/astebner/archive/2006/11/04/why-to-not-use-gacutil-exe-in-an-application-setup.aspx)

看起来应该避免使用 gacutil；它不是一个可再分发的应用程序。相反，安装它们的“正确”方式似乎是使用 MSI，一种方式是 WIX，正如 CheGueVerra 或其他脚本所发布的那样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-15T15:34:17.127

使用 gacutil。

优点：似乎总是有效。缺点：

*   必须使用您的安装程序打包一个额外的可执行文件。
*   作为一个开发实用程序，似乎有额外的副作用（比如无论如何都强制安装）。
*   不应包含在提供给客户的任何可再分发产品中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-15T15:35:28.483

您的安装程序制造商没有办法将程序集安装到 GAC 中吗？就你自己而言，我会说 GACUTIL：

[http://msdn.microsoft.com/en-us/library/ex0ss12c(VS.80).aspx](http://msdn.microsoft.com/en-us/library/ex0ss12c(VS.80).aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-10-15T15:37:58.557

如果您不想自己处理 gacutil 的东西，您可以随时在 Visual Studio 中创建一个安装项目。

但我自己会坚持使用 gacutil。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2008-10-15T15:41:48.017

最好的方法是使用`gacutil -i Library.dll`.

gacutil 的唯一问题是它不在系统的默认 PATH 中。但是，对于给定的 .Net Framework 版本，它位于相对于 windows 目录的固定位置。因此，您可以使用以下命令行从任何地方执行它：

```
%SystemRoot%\Microsoft.Net\Framework\v1.1.4322\gacutil -i 
```

PS：只是将您的程序集复制到 c:\windows\assembly 是行不通的。Explorer 仅显示文件夹的简化视图，其中实际上包含用于不同类型程序集的许多不同文件夹。从安装程序中复制它不会触发资源管理器在拖放时完成的所有操作。（写在这里是因为我还没有足够的声誉来评论其他帖子）。

* * *

## 回答 #8

> 赞同：-5
> 
> 时间：2008-10-15T15:35:31.870

直接复制到 %WINDIR%\Assembly。

优点：直截了当。

缺点：AFAIK, %WINDIR%\Assembly*恰好*在它现在所在的位置，并且它的位置可能会发生变化。这将使其在未来版本的 Windows 中中断，或者如果该文件夹的行为发生变化。这可能不是正确的方法。

极端劣势：正如madmath所说：

> 只是将您的程序集复制到 c:\windows\assembly 是行不通的。Explorer 仅显示文件夹的简化视图，其中实际上包含用于不同类型程序集的许多不同文件夹。从安装程序中复制它不会触发资源管理器在拖放时完成的所有操作。（写在这里是因为我还没有足够的声誉来评论其他帖子）。

# mysql - 从与插入或更新相同的表中选择

> ID：205190
> 
> 赞同：12
> 
> 时间：2008-10-15T15:33:19.783
> 
> 标签：mysql, sql, mysql-error-1093

显然以下是不正确的。

```
INSERT INTO `aTable` (`A`,`B`) VALUES((SELECT MAX(`A`) FROM `aTable`)*2),'name'); 
```

我得到了价值：

SQL查询：

```
INSERT INTO `aTable` (`A`, `B` )
VALUES 
(
  (
   SELECT MAX(`A`)
   FROM `aTable`
  ) *2
 , 'name'
) 
```

MySQL 说：

1093 - 您不能在 FROM 子句中指定目标表 'aTable' 进行更新

所以，我正在尝试制作一个位图表，每一行对应一个位，并且有一个“地图”值。

要插入表中，我不想做两个查询，我想做一个。我该怎么做？

没有人评论这个，但是由于我正在尝试制作位图，应该是* 2而不是^ 2，我的错误，请注意这就是为什么评论经常说^ 2，这是评论者的版本错误读。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2008-10-15T18:22:20.627

尝试：

```
insert into aTable select max(a)^2, 'name' from aTable; 
```

或者

```
insert into aTable select max(a)^2, 'name' from aTable group by B; 
```

如果你需要加入，你可以这样做：

```
insert into aTable select max(a)^2, 'name' from aTable, bTable; 
```

我的“服务器版本”是“5.0.51b-community-nt MySQL 社区版（GPL）”

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2011-10-31T22:42:52.430

实际上，您可以在插入时为表设置别名。我到处都看到过这个问题，但似乎没有人尝试过。使用子查询从表中获取最大值，但在子查询中为表设置别名。

```
INSERT INTO tableA SET fieldA = (SELECT max(x.fieldA) FROM tableA x)+1; 
```

一个更复杂的示例，您有一个相应的辅助键，并且可能为相应的辅助键插入 FIRST 记录：

```
INSERT INTO tableA SET secondaryKey = 123, fieldA = COALESCE((SELECT max(x.fieldA) FROM tableA x WHERE x.secondaryKey = 123)+1,1); 
```

通过给表起别名，它不会抛出错误并且似乎可以工作。我只是在编写代码时这样做，虽然我看不到上面是否有任何愚蠢的语法错误，但我会尝试这种类型的语法。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-10-15T15:47:27.070

我认为[INSERT ... SELECT](http://dev.mysql.com/doc/refman/5.0/en/insert-select.html)不起作用？我在它的文档中看到了这一点：

> INSERT 语句的目标表可能出现在查询的 SELECT 部分的 FROM 子句中。（这在一些旧版本的 MySQL 中是不可能的。）在这种情况下，MySQL 创建一个临时表来保存来自 SELECT 的行，然后将这些行插入到目标表中。

出于好奇，您使用的是哪个版本的 MySQL？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-10-15T15:35:43.193

我认为您需要删除“VALUES”，并有一个有效的选择语句。

[看到这个链接](http://dev.mysql.com/doc/refman/5.0/en/ansi-diff-select-into-table.html)

我不是特别喜欢 mySQL 的人，我主要使用 MSSQL。但是，如果您正确格式化 select 语句，它应该可以工作。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2008-10-15T15:42:48.577

只要选择正确，您就可以执行此操作。

# javascript - 启动一个新的数据库驱动的 Python Web 应用程序，您会使用 javascript 小部件框架吗？如果是，是哪个框架？

> ID：205204
> 
> 赞同：1
> 
> 时间：2008-10-15T15:37:16.373
> 
> 标签：javascript, python, frameworks

我正在开始一个新的 Web 应用程序项目。我想使用 python，因为我在我的面包和黄油工作中使用它。

但是我不想重新发明轮子。我想过的一些事情：

*   如果不是太麻烦的话，AJAX 会很好。

*   最好是许可允许商业化，但在这一点上并不重要。

*   如果工具允许的话，尝试 Google App Engine 也可能很有趣。

我应该使用 javascript UI 框架还是应该使用标准 HTML 表单？

你会推荐哪个框架？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-15T17:36:58.440

[jQuery](http://www.jquery.com/)吗？尽管它的[UI](http://ui.jquery.com/)组件可能不是最好的（但在这方面似乎做了很多工作），但 jQuery 本身似乎正在成为事实上的 JS 标准库。它是 MIT 或 GPL 许可的，因此商业用途是可以的（而且是免费的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-15T16:30:49.277

我会看看[web2py](http://web2py.com/)。它是一个全栈框架，无需配置且易于试用 - 如果您愿意，一切都可以通过 Web 界面驱动。我涉足过其他框架，它是迄今为止最容易设置的，并且包含许多免费的有用的东西。文档很好，并且有一个如何让它在 Google App Engine 下工作。它带有库和 Ajax 的操作指南。据我记得，许可证并不限制在商业应用程序中使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-15T17:15:49.997

看看[ExtJS](http://extjs.com/)。它有最好的小部件库。他们提供商业许可证和开源许可证。社区中有几个 Python 开发人员，并且与 Google API 有一些集成。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-15T15:42:49.217

我衷心建议[Django](http://www.djangoproject.com/) + [Prototype](http://www.prototypejs.org/)。我认为它们涵盖了您正在查看的大多数基础，并且它们非常容易上手。如果这是您决定采用的路线，您也可以在 GAE 上使用它们，但您应该记住，GAE 不支持 Cron 作业，这可能会限制您的功能。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-17T18:36:12.627

web2py 使用 jQuery

# vba - 正在使用的 VBA 监视文件

> ID：205222
> 
> 赞同：2
> 
> 时间：2008-10-15T15:41:37.660
> 
> 标签：vba, filesystemwatcher

当文件可供编辑（即不再使用）时，我正在寻找一些东西（Win API 调用或其他）来通知我。我应该设置一个计时器来每隔一段时间检查文件还是有一个好方法对文件设置监视？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-17T16:36:52.243

FileSystemWatcher 没有帮助，Win32 FindFirstChangeNotification 也没有帮助：当有人释放文件句柄时，它们不会告诉你。

您最好的方法是定期尝试以您想要的访问权限打开文件，处理任何错误。

即使您被通知文件可用，也不能保证当您随后尝试打开它时它仍然可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-15T20:46:17.513

我不知道 .NET 的 System.IO.FileSystemWatcher 做了什么，但如果你可以使用它，你可以在文件发生变化时收到事件。

# .net - 如何根据填充的数据集初始化空白数据库？

> ID：205228
> 
> 赞同：0
> 
> 时间：2008-10-15T15:42:13.710
> 
> 标签：.net, database

初始化将包括创建所有必需的表、约束和填充表。

编辑：已经有一个项目这样做了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-15T15:43:17.873

创建一个脚本，该脚本要么是数据库创建脚本末尾的一部分，要么在它之后运行。

它通常可能包含许多用于填充引用表或类似的插入语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-15T15:48:02.047

您可以更进一步，编写脚本以加载到文本文件中。

在这个文本文件中，您可以设置一些默认样式，然后使用您的脚本来处理它，例如：

tb_newTable
id pk
名称 vc 255
电子邮件 vc 255
-end

或者其他的东西。因此，您的处理程序读取此内容，将 tb_ 识别为表名，然后逐行创建字段，因此 id pk 可以字段名称 id 和主键，名称 vc 255 是在 varchar 255 等处称为名称的字段。 -结束停止它。

这是理论上的想法，上面不会蹲下，但它可能会给你一个想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-15T15:49:32.387

我不知道其他数据库的*特定*工具，但 mysqldump 正是为 MySQL 做的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-15T15:49:41.793

如果您使用 MySQL，则有一个名为 MySQLDump 的命令。这会将数据库的副本输出为一系列文本 SQL 语句，以创建表并用数据填充它们。

因此，您使用 MySQLDump 创建工作数据库的备份，然后只需在空数据库上执行生成的文件即可创建并填充它。

该文档可以在这里找到... [http://dev.mysql.com/doc/refman/5.0/en/mysqldump.html](http://dev.mysql.com/doc/refman/5.0/en/mysqldump.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-15T15:56:16.787

由于您提到 .net 作为标签，您可能正在使用 MSSQL。

如果您有 VS.NET db 版本，您可以使用数据库工具为此生成脚本。您可以对空白数据库进行模式比较器并为模式生成脚本。然后，您可以对数据执行相同的操作。

如果没有，您可以使用工具为您执行此操作。比如[http://sqlmanager.net/en/products/dbextract](http://sqlmanager.net/en/products/dbextract)。

对此还有其他工具，不幸的是，当我使用提到的前者时，我无法想到。

# java - 为什么 Java 中的 final 常量可以被覆盖？

> ID：205239
> 
> 赞同：33
> 
> 时间：2008-10-15T15:43:32.570
> 
> 标签：java, interface, overriding, final

考虑 Java 中的以下接口：

```
public interface I {
    public final String KEY = "a";
} 
```

以及以下课程：

```
public class A implements I {
    public String KEY = "b";

    public String getKey() {
        return KEY;
    }
} 
```

为什么类 A 有可能出现并覆盖接口 I 的最终常量？

自己试试：

```
A a = new A();
String s = a.getKey(); // returns "b"!!! 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2008-10-15T15:46:07.480

您在隐藏它，这是“范围”的一个功能。任何时候你在一个较小的范围内，你都可以重新定义你喜欢的所有变量，外部范围变量将是“阴影”

顺便说一句，如果你愿意，你可以再次确定它的范围：

```
public class A implements I {
    public String KEY = "b";

    public String getKey() {
        String KEY = "c";
        return KEY;
    }
} 
```

现在 KEY 将返回“c”；

因为原版重读时很烂，所以编辑了。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2008-10-15T16:31:34.673

尽管您正在隐藏变量，但知道您可以更改 java 中的 final 字段是非常有趣的，您可以在[此处](http://www.javaspecialists.co.za/archive/Issue096.html)阅读：

> **Java 5 - “最终”不再是最终的**
> 
> 来自挪威 Machina Networks 的 Narve Saetre 昨天给我发了条消息，提到很遗憾我们可以将手柄更改为最终阵列。我误解了他的意思，开始耐心地解释说我们不能让数组成为常量，而且没有办法保护数组的内容。“不，”他说，“我们可以使用反射来更改最终句柄。”
> 
> 我尝试了 Narve 的示例代码，令人难以置信的是，Java 5 允许我修改最终句柄，甚至是原始字段的句柄！我知道它曾经在某个时候被允许，但后来又被禁止了，所以我用旧版本的 Java 运行了一些测试。首先，我们需要一个带有 final 字段的类：
> 
> ```
> public class Person {
>   private final String name;
>   private final int age;
>   private final int iq = 110;
>   private final Object country = "South Africa";
> 
>   public Person(String name, int age) {
>     this.name = name;
>     this.age = age;
>   }
> 
>   public String toString() {
>     return name + ", " + age + " of IQ=" + iq + " from " + country;
>   }
> } 
> ```
> 
> **JDK 1.1.x**
> 
> 在 JDK 1.1.x 中，我们无法使用反射访问私有字段。但是，我们可以创建另一个具有公共字段的 Person，然后针对它编译我们的类，并交换 Person 类。如果我们针对与我们编译的类不同的类运行，则在运行时没有访问检查。但是，我们无法在运行时使用类交换或反射重新绑定最终字段。
> 
> java.lang.reflect.Field 的 JDK 1.1.8 JavaDocs 有以下说法：
> 
> *   如果此 Field 对象强制执行 Java 语言访问控制，并且基础字段不可访问，则该方法将引发 IllegalAccessException。
> *   如果基础字段是 final，则该方法将引发 IllegalAccessException。
> 
> **JDK 1.2.x**
> 
> 在 JDK 1.2.x 中，这发生了一些变化。我们现在可以使用 setAccessible(true) 方法使私有字段可访问。现在在运行时检查字段的访问，因此我们不能使用类交换技巧来访问私有字段。但是，我们现在可以突然重新绑定 final 字段！看看这段代码：
> 
> ```
> import java.lang.reflect.Field;
> 
> public class FinalFieldChange {
>   private static void change(Person p, String name, Object value)
>       throws NoSuchFieldException, IllegalAccessException {
>     Field firstNameField = Person.class.getDeclaredField(name);
>     firstNameField.setAccessible(true);
>     firstNameField.set(p, value);
>   }
>   public static void main(String[] args) throws Exception {
>     Person heinz = new Person("Heinz Kabutz", 32);
>     change(heinz, "name", "Ng Keng Yap");
>     change(heinz, "age", new Integer(27));
>     change(heinz, "iq", new Integer(150));
>     change(heinz, "country", "Malaysia");
>     System.out.println(heinz);
>   }
> } 
> ```
> 
> 当我在 JDK 1.2.2_014 中运行它时，我得到了以下结果：
> 
> ```
> Ng Keng Yap, 27 of IQ=110 from Malaysia    Note, no exceptions, no complaints, and an incorrect IQ result. It seems that if we set a 
> ```
> 
> 声明时基元的最终字段，如果类型是基元或字符串，则值是内联的。
> 
> **JDK 1.3.x 和 1.4.x**
> 
> 在 JDK 1.3.x 中，Sun 稍微加强了访问权限，并阻止我们使用反射修改 final 字段。JDK 1.4.x 也是如此。如果我们尝试运行 FinalFieldChange 类以在运行时使用反射重新绑定最终字段，我们将得到：
> 
> > java 版本“1.3.1_12”：异常线程“main”IllegalAccessException：字段在 java.lang.reflect.Field.set(Native Method) at FinalFieldChange.change(FinalFieldChange.java:8) 在 FinalFieldChange.main(FinalFieldChange.爪哇：12）
> > 
> > java 版本 "1.4.2_05" 异常线程 "main" IllegalAccessException: 字段在 java.lang.reflect.Field.set(Field.java:519) 在 FinalFieldChange.change(FinalFieldChange.java:8) 在 FinalFieldChange.main( FinalFieldChange.java:12)
> 
> **JDK 5.x**
> 
> 现在我们进入 JDK 5.x。FinalFieldChange 类的输出与 JDK 1.2.x 中的相同：
> 
> ```
> Ng Keng Yap, 27 of IQ=110 from Malaysia    When Narve Saetre mailed me that he managed to change a final field in JDK 5 using 
> ```
> 
> 反思，我希望一个错误已经潜入JDK。然而，我们都觉得这不太可能，尤其是这样一个根本性的错误。经过一番搜索，我找到了 JSR-133：Java 内存模型和线程规范。大部分规范都很难阅读，让我想起了我的大学时代（我曾经这样写；-）但是，JSR-133 非常重要，以至于所有 Java 程序员都应该阅读它。（祝你好运）
> 
> 从第 25 页的第 9 章最终字段语义开始。具体而言，请阅读第 9.1.1 节最终字段的构造后修改。允许更新最终字段是有意义的。例如，我们可以放宽 JDO 中非 final 字段的要求。
> 
> 如果我们仔细阅读第 9.1.1 节，我们会发现我们应该只修改 final 字段作为我们构建过程的一部分。用例是我们反序列化一个对象，然后一旦我们构建了对象，我们在传递它之前初始化最终字段。一旦我们使对象对另一个线程可用，我们不应该使用反射来更改最终字段。结果将无法预测。
> 
> 它甚至这样说：如果在字段声明中将 final 字段初始化为编译时常量，则可能不会观察到对 final 字段的更改，因为该 final 字段的使用在编译时被编译时常量替换。这就解释了为什么我们的 iq 字段保持不变，但国家/地区发生了变化。
> 
> 奇怪的是，JDK 5 与 JDK 1.2.x 略有不同，因为您不能修改静态 final 字段。
> 
> ```
> import java.lang.reflect.Field;
> 
> public class FinalStaticFieldChange {
>   /** Static fields of type String or primitive would get inlined */
>   private static final String stringValue = "original value";
>   private static final Object objValue = stringValue;
> 
>   private static void changeStaticField(String name)
>       throws NoSuchFieldException, IllegalAccessException {
>     Field statFinField = FinalStaticFieldChange.class.getDeclaredField(name);
>     statFinField.setAccessible(true);
>     statFinField.set(null, "new Value");
>   }
> 
>   public static void main(String[] args) throws Exception {
>     changeStaticField("stringValue");
>     changeStaticField("objValue");
>     System.out.println("stringValue = " + stringValue);
>     System.out.println("objValue = " + objValue);
>     System.out.println();
>   }
> } 
> ```
> 
> 当我们使用 JDK 1.2.x 和 JDK 5.x 运行它时，我们得到以下输出：
> 
> > java 版本“1.2.2_014”：stringValue = 原始值 objValue = 新值
> > 
> > java 版本 "1.5.0" 异常线程 "main" IllegalAccessException: Field is final at java.lang.reflect.Field.set(Field.java:656) at FinalStaticFieldChange.changeStaticField(12) at FinalStaticFieldChange.main(16)
> 
> 那么，JDK 5 就像 JDK 1.2.x，只是不同吗？
> 
> **结论**
> 
> 你知道 JDK 1.3.0 是什么时候发布的吗？我很难找到，所以我下载并安装了它。readme.txt 文件的日期为 2000/06/02 13:10。所以，它已经 4 岁多了（天哪，感觉就像昨天一样）。JDK 1.3.0 在我开始编写 Java(tm) 专家时事通讯的几个月前发布！我认为可以肯定地说，很少有 Java 开发人员能记住 JDK1.3.0 之前的细节。啊，怀旧不是以前的样子了！您还记得第一次运行 Java 并收到此错误：“无法初始化线程：找不到类 java/lang/Thread”吗？

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-10-15T15:52:02.897

看起来您的类只是隐藏变量，而不是覆盖它：

```
public class A implements I {
    public String   KEY = "B";

    public static void main(String args[])
    {
        A t = new A();
        System.out.println(t.KEY);
        System.out.println(((I) t).KEY);
    }
} 
```

如您所见，这将打印“B”和“A”。您甚至可以分配给它，因为 A.KEY 变量未定义为 final。

```
 A.KEY="C" <-- this compiles. 
```

但 -

```
public class C implements I{

    public static void main (String args[])
    {
        C t = new C();
        c.KEY="V"; <--- compiler error ! can't assign to final

    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-04T16:18:37.630

作为设计考虑，

```
public interface I {
    public final String KEY = "a";
} 
```

静态方法总是返回父键。

```
public class A implements I {
    public String KEY = "b";

    public String getKey() {
        return KEY; // returns "b"
    }

    public static String getParentKey(){
        return KEY; // returns "a"
    }
} 
```

就像乔姆注意到的那样。使用重新定义的接口成员设计静态方法可能是一个严重的问题。一般来说，尽量避免对常量使用相同的名称。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-10-15T16:14:19.107

您不应该以这种方式访问​​常量，而是使用静态引用：

```
I.KEY //returns "a"
B.KEY //returns "b" 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-10-15T15:58:21.323

静态字段和方法附加到声明它们的类/接口（尽管接口不能声明静态方法，因为它们是需要实现的完全抽象类）。

因此，如果您有一个带有公共静态 (vartype) (varname) 的接口，则该字段将附加到该接口。

如果您有一个实现该接口的类，编译器技巧会将 (this.)varname 转换为 InterfaceName.varname。但是，如果您的类重新定义了 varname，则将一个名为 varname 的新常量附加到您的类，并且编译器现在知道将 (this.)varname 转换为 NewClass.varname。这同样适用于方法：如果新类没有重新定义方法，(this.)methodName 被翻译成 SuperClass.methodName，否则，(this.)methodName 被翻译成 CurrentClass.methodName。

这就是为什么您会遇到警告“应以静态方式访问 x 字段/方法”的原因。编译器告诉你，虽然它可能使用这个技巧，但它更喜欢你使用 ClassName.method/fieldName，因为它更明确地提高了可读性。

# java - Axis2 Web 服务客户端生成 - 无需修改客户端的类型

> ID：205240
> 
> 赞同：3
> 
> 时间：2008-10-15T15:43:39.840
> 
> 标签：java, code-generation, axis2, wsdl2java

Axis2 和 Eclipse 是否可以生成 Web 服务客户端并让它使用包中已有的 java 类型，而不是创建它自己的类型。原因当然是如果我已经创建了类型 A 并且它创建了它自己的类型 AI 不能只将 A 类型的变量分配给 B 类型的变量。

wsdl 是从部署到应用程序服务器的 Web 服务生成的。如果无法从中生成它，则可以从已经存在的 java 文件中生成客户端。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-15T20:05:12.293

如果您真的想重用现有的类，您可以直接调用 Axis2 API，而无需使用 wsdl2java 生成客户端。下面是调用 Web 服务的一些相对简单的代码。您只需填写 Web 服务端点、方法 QName、预期返回类和服务参数。您可以重用现有的类作为返回值或参数。

如果您的 Web 服务非常复杂，那么您可能会发现您必须更深入地了解 API 才能使这种方法发挥作用。

```
serviceClient = new RPCServiceClient();
Options options = serviceClient.getOptions();

EndpointReference targetEPR = new EndpointReference("http://myservice");

options.setTo(targetEPR);

QName methodName = new QName("ns","methodName");

Class<?>[] returnTypes = new Class[] { String.class };

Object[] args = new Object[] { "parameter" };

Object[] response = serviceClient.invokeBlocking(methodName, args,
                returnTypes); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-15T16:13:53.787

您正在从 wsdl 生成 Web 服务客户端，对吗？

wsdl2java 工具唯一知道的是 wsdl 中的信息，因此它不会知道您已经创建的任何类型。

如果您可以将类型信息输入到 wsdl 中，您可能会使其工作，尽管我从未尝试过。

如果您想要一种简单的方法从 Type A 复制到 Type B，那么您可以尝试[BeanUtils.copyProperties](http://commons.apache.org/beanutils/api/org/apache/commons/beanutils/BeanUtils.html#copyProperties(java.lang.Object,%20java.lang.Object))，只要 Type A 和 Type B 的 setter 和 getter 匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-15T19:51:38.670

几乎大多数 java webservices 项目都会经历这个。我不知道 .NET/C# 世界是否有更优雅的解决方案。

正如 Mike 所提到的，使用 BeanUtils.copyProperties 是有道理的。

BR，
~A

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-18T22:31:00.530

如果你使用 eclipse 作为你的 ide，那就是你需要的：http: [//www.eclipse.org/webtools/](http://www.eclipse.org/webtools/)。它超越了你想要的其他事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-05-20T09:56:22.747

您可以直接使用 ServiceClient 类调用 Web 服务，它只提供使用 XML 的调用并返回 XML 响应。对于不同的 Web 服务方法，您必须将 XML 响应转换为一些 java POJO 才能使用它。只有响应处理需要在您的最后完成。您可以从 XML 到 Map 等...

因此，您不需要任何其他存根类来调用任何 Web 服务，只需要处理响应 XML。您可以使用 Castor 或 JAXB 库将 XML 转换为 POJO。

这是您不需要每次都修改客户端以进行差异的方式。网页服务。您可以像在外部向客户端提供响应处理程序一样进行开发。因此，对于每个不同的 Web 服务，您都会有差异。响应处理程序类，它是您的接口的实现。

```
//common interface for response handlers...
//implement this for diff. web service/methods
public interface WSRespHandler{
    public Object getMeResp(Object respData);
}

//pass particular handler to client when you call some WS
public class WebServiceClient {
    public Object getResp(WSRespHandler respHandler) {
        ..

        return repHandler.getMeResp(xmlData);
    }
} 
```

参考：

[http://www.developer.com/java/web/article.php/3863416/Using-Axis2-and-Java-for-Asynchronous-Web-Service-Invocation-on-the-Client-Side.htm](http://www.developer.com/java/web/article.php/3863416/Using-Axis2-and-Java-for-Asynchronous-Web-Service-Invocation-on-the-Client-Side.htm)

[http://www.devdaily.com/blog/post/java/java-web-service-client-read-array-list/](http://www.devdaily.com/blog/post/java/java-web-service-client-read-array-list/)

谢谢。

www.techlads.com

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-22T14:20:20.490

如果这篇文章对我阅读axis2生成客户端指南的人仍然有用：http: [//axis.apache.org/axis2/java/core/docs/userguide-creatingclients.html](http://axis.apache.org/axis2/java/core/docs/userguide-creatingclients.html)。

似乎 Axis2 Eclipse 插件配置为在集成模式下调用 ADB 代码生成（请参阅[http://axis.apache.org/axis2/java/core/docs/adb/adb-howto.html](http://axis.apache.org/axis2/java/core/docs/adb/adb-howto.html)），从而创建内部类在 Web 服务存根中。我不知道是否可以将生成模式更改为扩展模式（从存根类中生成数据类），但您可以使用 Wsdl2Java 进行命令行操作：

```
 %AXIS2_HOME%\bin\WSDL2Java -uri <wsdl file path> -p <package name> -u 
```

-u 选项告诉 ADB 代码生成器将数据类创建为单独的类，而不是存根中的内部类。

# internet-explorer - IE：从空白的空列表中选择数字证书

> ID：205244
> 
> 赞同：5
> 
> 时间：2008-10-15T15:44:36.703
> 
> 标签：internet-explorer, iis, ssl, safari, certificate

我创建了一个在 Windows Server 2008 机器上使用 IIS 7 托管的 Web 应用程序。我已经为secure.xxxxx.com 加载了安全证书。

[IIS 7 服务器证书 http://img401.imageshack.us/img401/324/certxx6.gif](http://img401.imageshack.us/img401/324/certxx6.gif)

**当我使用Microsoft Internet Explorer**浏览网站时，我收到以下提示：

> 选择数字证书
> 标识
> 您要查看的网站请求标识。
> 请选择证书。

没有证书。这是一个空的、空白的列表。

![Internet Explorer 选择数字证书](https://i.stack.imgur.com/LVig2.gif)

如果我单击“确定”或“取消”，则页面加载正常。Internet Explorer 没有警告或其他迹象表明存在安全问题。

[Microsoft Internet Explorer SSL 安全证书网站标识 http://img207.imageshack.us/img207/8265/ie2yr5.gif](http://img207.imageshack.us/img207/8265/ie2yr5.gif)

**Apple Safari**浏览器根本不会显示该页面。

> Safari 无法打开该页面。
> Safari 无法打开页面 xxxxx，因为它无法与服务器 xxxxx 建立安全连接。

[Apple Safari 无法打开页面 http://img80.imageshack.us/img80/2899/safka3.gif](http://img80.imageshack.us/img80/2899/safka3.gif)

**Mozilla Firefox**和**Google Chrome**都可以毫不费力地完美加载网站。

[Mozilla Firefox SSL 安全证书 http://img158.imageshack.us/img158/6833/foxsk4.gif](http://img158.imageshack.us/img158/6833/foxsk4.gif)

[谷歌浏览器 SSL 安全证书 http://img367.imageshack.us/img367/7928/chrsx2.gif](http://img367.imageshack.us/img367/7928/chrsx2.gif)

为什么 Microsoft Internet Explorer 和 Apple Safari 无法正确加载我的网站？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-10-15T16:08:04.313

我在[forums.iis.net](http://forums.iis.net/t/1151141.aspx)找到了解决方案。

在 IIS 中，我修改了我的网站的 SSL 设置。

[IIS SSL 设置图标 http://img183.imageshack.us/img183/8808/ssl1uc7.gif](http://img183.imageshack.us/img183/8808/ssl1uc7.gif)

我将“客户端证书”从“接受”更改为“忽略”。

**前：**

[IIS SSL 设置接受客户端证书 http://img185.imageshack.us/img185/548/ssl2om9.gif](http://img185.imageshack.us/img185/548/ssl2om9.gif)

**后：**

[IIS SSL 设置忽略客户端证书 http://img185.imageshack.us/img185/4945/ssl3kx6.gif](http://img185.imageshack.us/img185/4945/ssl3kx6.gif)

该网站现在可以在 Microsoft Internet Explorer 和 Apple Safari 以及 Mozilla Firefox 和 Google Chrome 中完美加载。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2011-08-18T13:22:00.740

服务器提供证书并且用户需要提供证书的 SSL 连接被视为 2-way SSL。政府和企业通常是使用它最多的人。

# sql-server - 在 Windows 中使用改进的 FIFO 语义构建工作项处理系统

> ID：205251
> 
> 赞同：1
> 
> 时间：2008-10-15T15:46:32.703
> 
> 标签：sql-server, wcf, architecture, msmq, service-broker

我正在构建一个系统来生成排队等待后端处理的“工作项”。我最近完成了一个具有相同要求的系统，并提出了一个我认为不是最佳的架构，并希望为这个新系统提供一些建议。

工作项目集中排队，需要以基本上先进先出的顺序进行处理。如果这是唯一的要求，那么我可能更喜欢 MSMQ 或 SQL Server Service Broker 解决方案。但是，实际上，我需要以修改后的 FIFO 顺序选择工作项。一个工作项有几个属性，在存在某些属性值组合的情况下，它们需要按 FIFO 顺序分配。

例如，工作项可能具有以下属性：办公室、优先级、组号和序列号（组内）。当多个项目为同一个组号排队时，它们保证按序号顺序排队，并且具有相同的优先级。

在给定服务的某些配置参数的情况下，有几个后端进程（当前实现为 Windows 服务）以修改后的 FIFO 顺序拉取工作时间。运行 Washington, DC 的服务被配置为仅处理 DC 的工作项，而 NY 的服务可能被配置为同时处理 NY 和 DC 的项目（主要是为了提高整体吞吐量）。除了这种选择性之外，优先级较高的项目应该先处理，包含相同“组号”的项目必须按照序列号顺序处理。因此，如果 NY 服务正在处理具有序列 1 的组 100 中的 DC 项目，我不希望 DC 服务取消组 100 序列 2 中的 DC 项目，因为序列 1 尚未完成。其他组中的项目应该仍然有资格进行处理。

在上一个系统中，我使用 SQL 表实现了队列。我创建了存储过程来提交项目，更重要的是，将项目“分配”给负责处理它们的 Windows 服务。赋值存储过程包含我上面描述的选择逻辑。每个 Windows 服务都将调用分配存储过程，向其传递对该服务实例（例如，符合条件的办公室）唯一的参数。此分配存储过程将工作项标记为已分配（处理中），当工作完成时，调用最终存储过程以从“队列”（表）中删除该项目。

这个解决方案确实有一些优势，因为我可以通过一个简单的 SQL 选择语句快速检查这些“队列”的状态。我还能够轻松地操纵队列（例如，我可以使用简单的 SQL 更新语句来提高优先级）。然而，不利的一面是，我有时不得不处理这些队列表上的死锁，并且有编写这些存储过程的负担（一段时间后会变得乏味）。

不知何故，我认为 MSMQ（带或不带 WCS）或 Service Broker 应该能够提供更优雅的解决方案。滚动我自己的排队/工作项处理系统感觉不对。但据我所知，这些技术无法提供我在分配过程中所需的灵活性。我希望我错了。任何的建议都受欢迎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-21T00:03:17.863

在我看来，您对原子工作单元的概念是一个组。因此，我建议您仅将标识组 ID 的消息排队，然后您的工作人员将不得不前往将组 ID 映射到 1 个或多个工作项的表。

您可以使用多个队列来处理其他问题 - NY-High、NY-Low、DC-High、DC-Low 等。

不过，老实说，我认为您最好解决当前架构中的死锁问题。您应该使用更新锁定和阅读过去提示从您的队列表中读取 TOP 1 消息，按您的优先级逻辑和您想要的任何过滤条件（办公室/位置）排序。然后您处理您的 1 条消息，更改其状态或将其移动到另一个表。您应该能够并行调用该存储过程而不会出现死锁问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-15T19:49:40.467

队列用于 FIFO 顺序，而不是随机访问顺序。即使您说您需要 FIFO 顺序，您也需要相对于一组随机变量的 FIFO 顺序，这本质上是随机顺序。如果你想使用队列，你需要能够在消息进入队列之前确定顺序，而不是在它进入之后。

# c# - 使用 Sync Framework 自定义架构

> ID：205252
> 
> 赞同：4
> 
> 时间：2008-10-15T15:47:09.130
> 
> 标签：c#, wcf, sql-server-ce, microsoft-sync-framework

我通过 wcf 服务将数据库同步到客户端上的 sql ce 数据库。但是，我不希望客户端生成的架构与服务器上的架构相同。有没有办法自定义返回给客户端同步提供者的模式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-18T00:32:12.353

你看过[列过滤](http://msdn.microsoft.com/en-gb/library/bb726003.aspx)吗？

它允许您在 2 个数据库之间仅同步一部分行或列。

# sharepoint - 从其他内容管理系统迁移到 SharePoint

> ID：205260
> 
> 赞同：2
> 
> 时间：2008-10-15T15:48:07.443
> 
> 标签：sharepoint, moss, cms-migration

我目前正在开展一个项目，该项目需要将内容从不同的内容管理系统迁移到 SharePoint。有什么好的，最好是开源的工具可以帮助我做到这一点？此外，在涉及此类项目时，我必须牢记哪些最佳实践。我想在这里考虑的另一件事是可重用性，因为我们将来可能必须从其他内容管理系统处理类似的迁移项目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-15T16:55:06.263

您可以查看[http://www.codeplex.com/SPMigration](http://www.codeplex.com/SPMigration)（开源，由 Microsoft 顾问启动的项目）。

该框架为您提供了一个导入器工具，以及一些导出器示例（例如 FileSystem）。您可能必须编写自己的导出器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-15T17:39:34.723

这个 MSDN 博客还详细介绍了 Migration API，并且可能很有用，因为它通常必须在不弄脏你的手的情况下做这种事情

[http://blogs.msdn.com/sharepointdeveloperdocs/archive/2007/11/30/content-migration-in-sharepoint.aspx](http://blogs.msdn.com/sharepointdeveloperdocs/archive/2007/11/30/content-migration-in-sharepoint.aspx)

此外，恕我直言，您不应忽视专有产品，因为它们可能很昂贵，但如果您有一个大型转换项目，它们可能会为您节省大量时间并因此降低成本。

[http://www.tzunami.com/Pages/default.aspx](http://www.tzunami.com/Pages/default.aspx)

[http://www.avepoint.com/products/sharepoint-migration](http://www.avepoint.com/products/sharepoint-migration)

技巧和提示 - [http://www.parallelspace.net/portals/ALS305-mwherman-Content%20Migration-1-1-18-RC6_FINAL.ppt](http://www.parallelspace.net/portals/ALS305-mwherman-Content%20Migration-1-1-18-RC6_FINAL.ppt)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2008-10-15T20:38:58.043

从去最近的大学并抓住一些 IT 学生进行手动迁移，我们已经取得了很好的成绩。

学生喜欢额外的现金，当站点的信息架构在系统之间发生变化时，有时会更容易。

# c++ - ActiveX 插件导致 ASSERT 在 VS2008 中的应用程序退出时失败

> ID：205270
> 
> 赞同：1
> 
> 时间：2008-10-15T15:52:57.277
> 
> 标签：c++, activex, visual-c++-6, visual-c++-2008

我使用“ESRI MapObjects LT2”ActiveX 插件的 MFC 应用程序在关闭它时会向我抛出一个 ASSERT。错误发生在`cmdtarg.cpp`：

```
CCmdTarget::~CCmdTarget()
{
#ifndef _AFX_NO_OLE_SUPPORT
    if (m_xDispatch.m_vtbl != 0)
        ((COleDispatchImpl*)&m_xDispatch)->Disconnect();
    ASSERT(m_dwRef <= 1); //<--- Fails because m_dwRef is 3
#endif
    m_pModuleState = NULL;
} 
```

我用 VC9 构建了（本机 C++）应用程序。当我用 VC6 编译应用程序时，它表现得很好。

这可能是什么原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-15T16:38:30.040

这看起来像一个引用计数。这个“目标”是否可以被其他东西引用，而不是释放它？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-15T17:25:12.677

您可以跟踪定义的 Addref 和 Release 调用`_ATL_DEBUG_INTERFACES`

来自[http://msdn.microsoft.com/en-us/library/sycfy8ec(VS.80).aspx](http://msdn.microsoft.com/en-us/library/sycfy8ec(VS.80).aspx)

```
_ATL_DEBUG_INTERFACES 
```

在包含任何 ATL 头文件之前定义此宏，以将组件接口上的所有 AddRef 和 Release 调用跟踪到输出窗口。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-15T18:37:35.230

使用`_ATL_DEBUG_INTERFACES`没有产生任何额外的输出......我在`stdafx.`h 的第一行定义它，直接在之后`#pragma once`所以我想这已经足够早了。

也许原因是我使用 ActiveX 控件的方式：
我不是在打电话`AddRef()`或`Release()`自己打电话。
MapObjects 安装程序附带了包含大量包装类的示例代码，这些类必须由 VC6 或更早版本生成。
我尝试使用 VC9 自己生成包装类，但出现了我无法修复的错误。我通过让我的一个窗口有一个类型的成员`CMap1`（派生自`CWnd`）来使用控件，这是生成的包装类之一。在`CMyWnd::OnCreate()`我也调用`CMap1::Create()`了，就这样，我完成了：我可以添加一个图层，控件显示一个世界地图。
我几乎不知道引用计数的内容是什么，因为我没有添加或发布任何引用。至少不知道...

该控件相当陈旧：.OCX 文件的版本信息中有 2000 年。
它也不再得到官方支持，但我没有任何替代品。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-24T10:22:59.923

以下为我解决了它：在包含控件的窗口中，添加一个 OnDestroy() 处理程序：

```
void CMyWnd::OnDestroy()
{
    // Apparently we have to disconnect the (ActiveX) Map control manually
    // with this undocumented method.
    COleControlSite* pSite = GetOleControlSite(MY_DIALOG_CONTROL_ID);
    if(NULL != pSite)
    {
        pSite->ExternalDisconnect();
    }

    CWnd::OnDestroy();
} 
```

# project-management - 技术人员和非技术人员的项目管理+ SCM？

> ID：205271
> 
> 赞同：3
> 
> 时间：2008-10-15T15:53:08.540
> 
> 标签：project-management, version-control

我最近开始为我工作的公司评估一些项目管理项目。这是一个经典案例——成长中的公司正在寻找正确的解决方案（意思是免费或非常便宜）。这是一个组合商店 - 桌面上的 Windows、Mac 和 Linux。当然，精通技术的范围从新手到 unix 大师。

我还没有找到任何真正接近完整解决方案的东西。我不希望找到一个，但我正在寻找基于人们经验的建议/指导/任何形式的反馈。

我在找什么：

*   基于网络
*   独立于方法（不寻找敏捷解决方案等）
*   免费或非常便宜
*   文件管理
*   时间表和里程碑
*   任务跟踪和分配
*   报告
*   源头控制
*   开发维基

我看过 Trac、Projectivity、Basecamp、JIRA、RT、XPlanner 和 SharedPlan。由于之前对它的不愉快经历，我一直远离 Bugzilla。这些东西都没有真正做到一切——有些是可扩展的，但在走这条路之前我会在这里检查一下。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-16T00:38:23.457

通读 Edward Tufte 长期运行的 Ask ET 主题项目管理图形（或甘特图）。没有一致的答案，但已经评估了很多东西。

[链接文本](http://www.edwardtufte.com/bboard/q-and-a-fetch-msg?msg_id=000076&topic_id=1&topic=Ask%20E%2eT%2e "问外星人")

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-16T23:19:50.993

**Trac** - 票据/wiki/commit-comments 的集成很棒。

警告：安装可以是 PITA ......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-16T23:33:06.490

查看 Jira 工作室。为您托管的所有 Atlassian 应用程序。

[http://www.jira.com/](http://www.jira.com/)

你会得到 wiki/tracker/svn 浏览器等等。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-15T16:16:54.517

我仔细看了看 Alfresco 和 Joomla。

没有一个能满足我的需求，因为我想要极致的简单。但是，您似乎更喜欢包括厨房水槽（同时保持它易于使用，我猜），所以其中任何一个都可能适合您。

目前，我正在使用 Django 将我自己的东西放在一起，只保留项目截止日期、论坛和文件版本控制概念。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-15T20:06:16.580

看看[Redmine](http://www.redmine.org/)，它是一个 Rails 应用程序。我自己还没有使用它，但正在考虑从 activecollab 转移到它。去年，这个应用程序似乎发展得相当快。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-10-16T23:00:59.893

我对 Jira（使用 Confluence 的 wiki）的体验相当不错，尽管它非常昂贵，因为支持人员反应迅速且乐于助人。我用的那个地方有svn做版本控制，两个一起玩OK。另一方面，我发现 Xplanner 是一个非常奇怪的应用程序 - 如果您不想使用 XP，那么它真的很不灵活，而且对于 XP 商店来说，令人惊讶的是以文档为中心。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-06-26T20:21:55.147

如果您不介意自己进行一些配置并且在您的商店中的某个地方有一个 Windows 服务器，那么您可以在 SharePoint 中设置您自己的自定义项目管理系统。

```
* web based
* methodology independent 
* free or really cheap
* document management
* timelines and milestones
* task tracking and assigning
* reporting
* source control
* development wiki 
```

源代码控制系统不是 SharePoint 的一部分，因此该要求是否最重要确实是一个问题。但除此之外，如果您安装 WSS（随 2003/2008 服务器免费提供），您将免费获得以上所有内容。O'Reilly 甚至有一[本](http://oreilly.com/catalog/9780596520144/)关于如何在 SharePoint 中设置 PMIS

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-12-20T06:11:00.227

对于我们更直观的一种解决方案是使用**Drupal 6x**。使用**Project**和**Subversion**（现在的**Version Control**）模块。我更喜欢带有 ProjectFork 的 Joomla，但在使用 repo 浏览器对其进行修改之前，这将不得不这样做。

希望这可以帮助。

[http://drupal.org/project/project](http://drupal.org/project/project)

# sql-server - Visual Studio 2008 数据库项目的 TSD3004 错误

> ID：205277
> 
> 赞同：0
> 
> 时间：2008-10-15T15:54:14.967
> 
> 标签：sql-server, database, visual-studio-2008

我正在使用 Visual Studio Team System 2008，版本 9.0.30729.1 SP。我有一个昨天使用的数据库项目，没有任何问题 - 我能够成功构建和部署数据库。然而，今天，当我打开解决方案时，我会收到列为“警告”的内容，它会停止任何构建/部署/等进程，但无法通过“项目属性”页面抑制。

警告内容为：“TSD3004：应用程序遇到意外错误。要诊断此问题，请启用跟踪。您应该联系产品支持。”

我确实联系了产品支持，但他们坚持要我花钱请人帮我解决这个问题。在 MSDN 或 support.microsoft.com 上搜索“TSD3004”返回的记录为零，而从 Google 搜索返回的记录只有三个（均不相关）。

谁能帮我弄清楚发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-10-16T03:00:52.047

您是否尝试过在 Microsoft 的专用论坛上提问？

[http://social.msdn.microsoft.com/Forums/en-US/vstsdb/threads/](http://social.msdn.microsoft.com/Forums/en-US/vstsdb/threads/)

其实我猜你做到了.. :)

[http://social.msdn.microsoft.com/Forums/en-US/vstsdb/thread/eea24181-e115-4f56-a482-58059160d705](http://social.msdn.microsoft.com/Forums/en-US/vstsdb/thread/eea24181-e115-4f56-a482-58059160d705)

# c# - 如何使用不可见数据从 GridView 中删除一行？

> ID：205278
> 
> 赞同：1
> 
> 时间：2008-10-15T15:54:30.147
> 
> 标签：c#, asp.net, asp.net-2.0

我正在使用通过函数填充的 GridView 编写一个简单的原型前端，而不是直接链接到 SqlServer 数据源。

所以我可以从我目前的网格/基础数据库中删除一行/记录

1.  设置 AutoGenerateDeleteButton = true
2.  在第一列中显示唯一记录 ID
3.  处理 RowDeleting 事件
4.  通过获取grid.Rows[e.RowIndex].Cells[idIndex].Text获取id
5.  将该数字传递给执行删除的函数

这似乎工作得很好，但我宁愿不向用户显示 ID，因为他们对他们没有任何意义。

我尝试将 id 列的 Visible 属性设置为 false，但这导致上面的步骤 4 返回一个空字符串 - 因此没有删除记录。

那么如何在每一行中存储隐藏的 ID 号呢？

或者我会以完全错误的方式解决这个问题？

**跟进答案：**

感谢您的回答，最终采用了 Eric 的 DataKeyNames 方式。对于像我一样不熟悉 ASP.NET 的其他人，我使用的步骤在哪里

*   在我设置网格 DataSource 并调用 DataBind() 的行之间，我添加了

    `grid.DataKeyNames = new string[] {"id"};`

*   然后在处理 RowDeleting 的函数中，我使用了我的 id

    `grid.DataKeys[e.RowIndex].Value`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-15T16:00:18.713

GridView 有一个 DataKeyNames 属性。当您将数据源绑定到网格时，您设置了 DataKeyNames（通常只有一个名称，即您的 PK 字段）。您不显示 PK，但您可以从代码隐藏中获取它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-15T16:02:23.250

Visible=false 表示不在页面上呈现。您想要的是使其成为模板字段并使用 HiddenField 来保存值或将控件上的样式设置为“显示：无；”。如果客户端代码需要访问 Ajax 调用或其他东西的值，就会出现这种情况。

否则，按照@Eric Z Beard 的建议使用 DataKeyNames 属性。

# c# - 使用 XmlTextWriter.WriteString 保留字符串中的空格

> ID：205287
> 
> 赞同：0
> 
> 时间：2008-10-15T15:55:55.650
> 
> 标签：c#, .net, xml, whitespace

我正在用 C# 编写一个 XML 文档。

我有这样的东西...

```
string output = "REAPP DUE  NO OF  M CASE NBR   APPL NBR      DATE  GRPS   M CASE NBR   APPL NBR      DATE  GRPS   _                                       _                                       _"; 
```

我这样做...

```
 objXmlTextWriter.WriteStartElement("Case");
        objXmlTextWriter.WriteString(record);
        objXmlTextWriter.WriteEndElement(); 
```

和 xml 元素原来是这样的......

```
<Case>REAPP DUE NO OF REAPP DUE NO OF M CASE NBR APPL NBR DATE GRPS M CASE NBR APPL NBR DATE GRPS _ _ _ </Case> 
```

它基本上已经将长度大于 1 的空格转换为 1 个字符的空格。

我该如何防止这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-10-15T16:11:36.693

对不起，之前很困惑（删除了错误的答案）。但我无法重现您似乎看到的内容。检查这个程序......它确实保留了空间。

```
class Program
{
    static void Main(string[] args)
    {

        XmlWriter w = XmlTextWriter.Create("./foo.xml");
        w.WriteStartElement("foo");
        w.WriteString(" THIS   HAS VARYING     SPACeS ");
        w.WriteEndElement();
        w.Close();

        StreamReader sr = new StreamReader("./foo.xml");
        Console.WriteLine(sr.ReadToEnd());
        Console.ReadKey();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-15T16:13:13.710

好的...

这只是一个IE显示问题。我猜与字体有关。

当我在记事本 ++ 中打开 XML 时，我看到空白实际上被正确保留了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-16T08:31:41.303

如果在 IE 中显示很重要，您可以使用 WriteCData() 代替 WriteString() 将文本包含在 CDATA 块中。

# svn - 从 SVN 历史记录中删除文件内容

> ID：205296
> 
> 赞同：15
> 
> 时间：2008-10-15T15:59:46.063
> 
> 标签：svn

我的 PC 中有一个本地 svn 存储库，我一直将它用于一个爱好项目，它并不意味着任何人都可以访问它，所以我提交了带有密码的文件。

现在，我正在考虑将存储库提供给其他人使用，我不希望那里有这些数据。

有没有办法爬取存储库并将所有密码和帐户数据替换为“xxxxxxxxxx”之类的文本？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-10-15T16:11:01.767

查看 Subversion 常见问题解答：[如何从存储库的历史记录中完全删除文件？](http://subversion.apache.org/faq.html#removal)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-10-15T16:07:46.717

如果你做一个

```
svnadmin dump > mysvn 
```

您将获得存储库中所有修订的所有数据的平面文件。从那里，您应该能够手动编辑文件（如果您的 repo 大小很大，您可能需要一个行编辑器，如 pico、nano、vi 等）。

最后，您可以将此转储重新加载到新的存储库中。这将保留您的项目历史记录。

```
svnadmin load /path/to/new/repo < mysvn 
```

在您进行审计等的任何公司环境中，这种做法都将被视为禁忌，但对于一个爱好项目，它可能只是为您解决问题。

编辑：在尝试将两个不同的存储库合并在一起之前，我必须这样做，所以它需要在平面文件中添加一个新的“目录节点”。我不确定 SVN 是否会散列文件或更改以确定它是否被篡改。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-10-15T23:54:08.057

好像有什么误会。我不想删除文件。我想删除存储在存储库中的密码。我不想丢失文件，也不想丢失修订、修改和历史记录。

我所做的是马特建议的，转储存储库并对其进行编辑。

为此，我使用了一个十六进制编辑器（khexedit）并将密码字符串替换为相同长度的字符串。这样，我不必更新大小字段。

接下来，我需要使用文件内容的哈希更新 md5 字段。为此，我编写了一个脚本，该脚本使用“svnadmin load”输出来生成错误并从该错误中获取新旧 md5。接下来，用 sed 替换旧的哈希，然后重复直到没有错误。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2011-06-04T10:35:11.950

我遇到了同样的问题，但在 code.google.com 上：我签入了一些不应通过 googlecode 历史记录访​​问的文件，但我不想放弃所有历史记录，经过一番谷歌搜索、尝试、重试和重试，我成功了。在适用于我的小项目的配方下方（6.5 MB，90 次修订）。大部分知识来自[googlecode](http://code.google.com/p/support/wiki/SubversionFAQ#How_do_I_import_an_existing_Subversion_repository?)，其余大部分来自[svn redbook](http://svnbook.red-bean.com/en/1.5/)

首先创建一个本地存储库，您将在其中将 googlecode 的存储库下载到：

```
svnadmin create /tmp/your_local_repo 
```

使用内容创建文件 /tmp/isd_gc/hooks/pre-revprop-change

```
#!/bin/bash
exit 0 
```

使其可执行：

```
chmod +x /tmp/isd_gc/hooks/pre-revprop-change 
```

如果你在本节失败，你很可能会看到一个错误：Revprop 更改被 pre-revprop-change 钩子阻止（退出代码 255）没有输出。

现在您可以从 code.google.com 初始化 svn 同步

```
svnsync init --username yourname@youremail file:///tmp/your_local_repo https://yourproject.googlecode.com/svn 
```

并开始下载所有历史记录：

```
svnsync sync --username  yourname@youremail file:///tmp/your_local_repo 
```

提交的修订版 1。

修订版 1 的复制属性。

传输文件数据 ....................

87 版的复制属性。

现在我们创建一个转储文件，它将被馈送到 svndumpfilter 以删除不需要的文件。

```
svnadmin dump . > /tmp/tst_dump_gc.dmp 
```

使用 svndumpfilter 从中删除第一个不需要的文件。

```
svndumpfilter exclude /trunk/unwanted file_1.jsvg < /tmp/tst_dump_gc.dmp > /tmp/tst_dump_clean1.dmp 
```

删除 1 个节点：

'/trunk/不需要的文件_new.jsvg'

删除第二个不需要的文件：

```
svndumpfilter exclude /trunk/unwanted file_2.jsvg < /tmp/tst_dump_clean1.dmp > /tmp/tst_dump_clean2.dmp 
```

重新创建“旧临时仓库”

```
rm -rf /tmp/your_local_repo

svnadmin create /tmp/your_local_repo 
```

将过滤后的转储加载到 repo

```
[/tmp]$svnadmin load --ignore-uuid your_local_repo < /tmp/tst_dump_clean2.dmp 
```

检查 svn 客户端中的一切是否正常（在主干上进行历史检查仅在我的 svn 客户端中显示 25 个第一个结果）。

```
svnsync sync --username yourname@youremail https://yourproject.googlecode.com/svn 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-15T16:04:35.913

最简单的方法是检查存储库的内容，删除所有敏感信息，将工作目录导入新的存储库，并将其提供给公众。使用您的项目的人很可能会对其当前状态感兴趣，而不是更改历史记录。

# foreach - 为什么我尝试修剪列表中的字符串 似乎不起作用？

> ID：205299
> 
> 赞同：5
> 
> 时间：2008-10-15T16:00:39.463
> 
> 标签：foreach, anonymous-methods, generic-list

我在 LINQPad 中尝试了以下代码并得到以下结果：

```
List<string> listFromSplit = new List<string>("a, b".Split(",".ToCharArray())).Dump();
listFromSplit.ForEach(delegate(string s) 
{ 
  s.Trim(); 
});
listFromSplit.Dump(); 
```

> “a”和“b”

所以字母 b 没有像我预期的那样删除空格......？

有人有想法么

[注意：.Dump() 方法是 LINQPad 中的一个扩展方法，它以一种很好的智能格式化方式打印出任何对象的内容]

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2008-10-15T16:03:06.697

你只是在创建一个修剪过的字符串，而不是给它分配任何东西。

```
var s = "  asd   ";
s.Trim(); 
```

不会更新s，而..

```
var s = "   asd   ";
s = s.Trim(); 
```

将要..

```
var listFromSplit = "a, b".Split(',').Select(s=>s.Trim()); 
```

我想，我会怎么做。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-10-15T16:09:18.523

The String.Trim() method returns a string representing the updated string. It does not update the string object itself, but rather creates a new one.

You could do this:

```
s = s.Trim(); 
```

However you cannot update a collection while enumerating through it so you'd want to either fill a new List while enumerating over the existing one or populate the List manually using the string array returned by String.Split.

Filling a new list:

```
List<string> temp = new List<string>("a, b".Split(",".ToCharArray()));
List<string> listFromSplit = new List<string>();

temp.ForEach(delegate(string s) 
{ 
    listFromSplit.Add(s.Trim()); 
});

listFromSplit.Dump(); 
```

Populating Manually:

```
string[] temp = "a, b".Split(",".ToCharArray());
List<string> listFromSplit = new List<string>();

foreach (string s in temp)
{
    listFromSplit.Add(s.Trim()); 
};

listFromSplit.Dump(); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-02-25T01:12:24.833

Further to the answer posted by [Adrian Kuhn](https://stackoverflow.com/questions/205299/why-does-my-attempt-to-trim-strings-in-a-liststring-not-appear-to-work/205509#205509) you could do the following:

```
var result = listFromSplit.Select(s => s.Trim()); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-10-15T16:06:16.347

The string instances are immutable. Anything that seems to modify one, creates a new instance instead.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-15T16:04:33.980

您没有将修剪后的结果分配给任何东西。这是一个典型的错误，我刚刚摆脱了用 string.Replace 犯这个错误的习惯 :)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-10-15T16:53:51.930

I have no IDE up and running, but this should get the job done (unless I am wrong):

```
var result = from each in listFromSplit select each.Trim(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-10-15T16:09:55.370

Split on both spaces and commas and remove any empty entries. All nice and trimmed. Assumes that your strings don't contain spaces, though.

```
List<string> listFromSplit =
     new List<string>( "a , b ".Split( new char[] { ',', ' ' }, StringSplitOptions.RemoveEmptyEntries )); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-10T14:57:55.577

The linq options others have provided should work well. As another option, here is an extension method using a for loop:

```
 public static void TrimCollection(this IList<string> stringCollection) {

        for (int i = 0; i <= stringCollection.Count() - 1; i++)
            stringCollection[i] = stringCollection[i].Trim();

    } 
```

# linux - 迁移基于字符的 Oracle 表单

> ID：205304
> 
> 赞同：1
> 
> 时间：2008-10-15T16:01:34.750
> 
> 标签：linux, oracle, migration

我有一个运行 DG/UX 的旧服务器，在不久的将来将不受支持。我有一些基于字符的 oracle 表单需要从这台机器上迁移出来。有谁知道 Oralce 有什么样的迁移策略来升级这些基于字符的报告。它不必是最新版本，甚至不必是 GUI 版本，但我确实需要迁移到受支持的操作系统，例如 linux。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-15T19:06:10.460

简单的答案是告诉您检查[Migration from 6i to 10g](http://www.oracle.com/technology/products/reports/migration/index.html)。

之前做过，我认为更有用的答案是告诉您从头开始重写这些表单和报告。可能在另一个工具中 - 特别是如果您想要一个 Web 界面等，而不是被古老的 Java 运行时所束缚。

有一些产品可以让您将旧表单代码转换为 PL/SQL。[Kumaran](http://www.kumaran.com/ProductsOracle.html)就是其中的一个例子，但我发现它有问题，不得不对代码进行大量手工编辑，以使其与原始代码一样工作。

就我而言，CUI 已经死了，所以您不妨一直使用 GUI。上次我查看它时，几乎没有关于 CUI 表单的文档，而且经常在 GUI 中工作的东西在 CUI 中根本不起作用。

在将基于 CUI 的表单应用程序转换为 GUI 时，您可能会遇到一些问题。

*   当用户移动到下一个或上一个字段/块/等时，有时会进行验证和特殊处理。当您切换到适当的 GUI 时，您的用户只需单击另一个字段即可跳过这些事件。因此，您有两个选择 - #1 审核所有表单或 #2 使用鼠标禁用表单中的导航

    选项#1 比重新开发工作量少，但看看我们已经投入了多少工作。

    选项#2 你的用户会恨你，并用音叉和火把追随你。他们会觉得你投入的所有工作都没有任何价值。那么无论如何你最终都会选择选项#1。

*   Sometimes a UI that works fine in (or is required by the limitations of) a CUI is just plain wrong and breaks the UI metaphor that users are used to working with in the rest of the GUI (e.g., a pop-up window with list that you have to select an entry in rather than pull down where you can just pick the right value directly)

*   When converted to a GUI the CUI may end up with different fonts, text sizes and other formatting defaults than a freshly written form (it did for me). So now either the whole set of forms has to be updated to follow Oracle's new default theme for forms/reports or every new form/report has to reverted back to the old clunky style you had before - or it will stick out like a sore thumb (and your users will want them all to be like the pretty one now).

Not the answer you wanted; huh. But you can use this as an excuse to get out of the Forms/Reports upgrade tread mill and maybe even clean up some of the hacks that have had to happen over the years.

# database - 如果 postgres 的性能低，我应该选择哪个 db

> ID：205324
> 
> 赞同：6
> 
> 时间：2008-10-15T16:07:18.980
> 
> 标签：database, performance, postgresql

在支持超过 5000 个用户的网络应用程序中，postgres 正在成为瓶颈。

添加新用户需要超过 1 分钟。（即使在优化和 Win 2k3 上）

那么，作为一个设计问题，哪些其他数据库可能更好？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2008-10-15T16:15:47.950

很可能，它不是 PostgreSQL，而是您的设计。换鞋很可能不会让你成为更好的舞者。

你知道是什么导致缓慢吗？是争用、更新索引的时间、查找时间吗？在您尝试插入第 5001 个用户的同时，所有 5000 个用户是否都在尝试写入用户表？我相信这会导致问题。您可能必须使用一些经过调整以处理极端并发性的东西，例如 Oracle。

MySQL（有人告诉我）可以进行优化以比 PostgreSQL 进行更快的读取，但就它们支持的 #transactions/sec 而言，两者都非常快，而且听起来这不是你的问题。

* * *

PS 我们在评论中对不同的答案进行了一些讨论——请注意，世界上一些最大的、存储方面的数据库是使用 Postgres 实现的（尽管它们倾向于调整引擎的内部结构）。Postgres 可以很好地扩展数据大小，并发性比大多数都好，并且在您可以用它做什么方面非常灵活。

希望能给你一个更好的答案，技术发明30年后，我们应该能够让用户对系统的了解少一些，才能让系统顺利运行。但是，唉，我所知道的所有产品都需要进行广泛的思考和调整。我想知道 StackOverflow 的创建者是否可以分享他们如何处理数据库并发性和可扩展性？他们正在使用 SQLServer，我知道很多。

* * *

PPS 因此，如果有机会，我昨天一头扎进了 Oracle 的一个并发问题。我不完全确定我做对了，不是 DBA，但是这些人解释的是这样的：我们有大量进程连接到 DB 并检查系统字典，这显然会强制对其进行短暂锁定，尽管它只是一个阅读。解析查询做同样的事情..所以我们（在具有 1000 个对象的多 tera 系统上）有很多强制等待时间，因为进程将彼此锁定在系统之外。我们的系统字典也太大了，因为它包含每个分区的所有信息的单独副本，每个表可能有数千个。这与 PostgreSQL 并没有真正的关系，但要点是——除了检查你的设计，

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-10-15T19:29:36.250

请更改运行 Postgres 的操作系统 - Windows 端口虽然对扩展用户群非常有用，但仍无法与（更老和更成熟的）Un*x 端口（尤其是 Linux 端口）[相提并论。](http://wiki.postgresql.org/wiki/Running_%26_Installing_PostgreSQL_On_Native_Windows#I_cannot_run_with_more_than_about_125_connections_at_once.2C_despite_having_capable_hardware)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-10-15T17:15:27.500

让我向您介绍一种最简单、最实用的方法来扩展几乎任何数据库服务器，如果数据库设计确实是最优的：只需**将您的内存加倍**即可立即提高性能。这就像魔术一样。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-10-15T16:15:35.797

我认为你最好的选择仍然是 PostgresSQL。花时间确保您已正确调整您的应用程序。在你确信你已经达到了调整所能做的极限之后，开始缓存你能做的一切。之后，开始考虑转移到异步主从设置...此外，您是否在执行 OLTP 的同一数据库上运行 OLAP 类型的功能？

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-10-15T16:14:55.703

PostgreSQL 的扩展性比大多数都好，如果您要使用关系数据库，那么 Oracle 就是它。[ODBMS](http://www.objectivity.com/)可以更好地扩展，但它们也有自己的问题，因为它更接近于编程来设置一个。
雅虎使用[PostgreSQL](http://postgresqldbnews.blogspot.com/2008/05/world-largest-database-runs-on-postgres.html)，这应该告诉你一些关于可伸缩性的事情。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2010-03-26T10:34:37.610

如上所述，问题不在于您使用的特定数据库，即 PostgreSQL，而是以下之一：

*   架构设计，也许你需要添加、删除、优化你的索引
*   硬件也许你对你的服务器有很多要求——你说有 5k 个用户，但是他们中可能很少有人同时查询数据库
*   查询：可能定义不明确导致效率低下

找出正在发生的事情的一种实用方法是分析 PostgeSQL 日志文件并找出以下方面的查询：

*   最常执行
*   运行时间最长
*   等等等等

快速回顾将告诉您将工作重点放在哪里，您很可能会很快解决您的问题。没有灵丹妙药，您必须做一些功课，但这与更改数据库供应商相比会很小。

好消息...有很多实用程序可以分析您的日志文件，它们易于使用并产生易于解释的结果，这里有两个：

[pgFouine - PostgreSQL 日志分析器 (PHP)](http://pgfouine.projects.postgresql.org/ "pgFouine - 一个 PostgreSQL 日志分析器")

*   [pgFouine：示例报告](http://pgfouine.projects.postgresql.org/reports/sample_default.html)

[PQA（红宝石）](http://pqa.projects.postgresql.org/ "实用查询分析")

*   [PQA：样本报告](http://pqa.projects.postgresql.org/example.html)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-10-15T16:11:35.273

首先，我会确保优化确实有用。例如，如果您有许多索引，有时添加或修改记录可能需要很长时间。我知道有几个大项目在 PostgreSQL 上运行，所以看看这个问题。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-10-15T16:15:13.880

我建议在这里查找有关 PostgreSQL 性能的信息： http: [//enfranchismind.com/blog/2006/11/04/postgres-for-the-win](http://enfranchisedmind.com/blog/2006/11/04/postgres-for-the-win)

你运行的是什么版本的PG？随着发布的进展，性能有了很大的提高。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2010-09-27T14:42:41.150

嗨，以前我现在的公司也有同样的问题。当我第一次加入他们时，他们的查询量很大而且速度很慢。运行它们需要 10 分钟。我能够将它们优化到几毫秒或 1 到 2 秒。在那段时间里我学到了很多东西，我将分享其中的一些亮点。

1.  首先检查您的查询。对您需要的所有表进行内部连接总是需要一些时间。我建议的一件事是始终从表格开始，您可以使用该表格实际将数据切割成您需要的数据。

    例如 SELECT * FROM (SELECT * FROM person WHERE person ilike '%abc') AS person;

如果您查看上面的示例，这会将您的结果缩减为您知道需要的内容，并且您可以通过进行内部连接来进一步完善它们。这是加快查询速度的最佳方法之一，但剥猫皮的方法不止一种。我无法在这里解释所有这些，因为它们太多了，但是从上面的示例中，您只需要修改它以适应您的需要。

1.  这取决于您的 postgres 版本。较旧的 postgres 会在内部优化查询。例如，在 postgres 8.2 及更低版本上，IN 语句比 8.4 慢。

2.  解释分析是你的朋友。如果您的查询运行缓慢，请进行解释分析以确定是哪一个导致运行缓慢。

3.  清理您的数据库。这将确保您的数据库上的统计信息几乎与实际结果相匹配。统计数据和实际数据的巨大差异将导致您的查询运行缓慢。

4.  如果所有这些都对您没有帮助，请尝试修改您的 postgresql.conf。增加共享内存并尝试配置以更好地满足您的需求。

希望这会有所帮助，但当然，这些仅用于 postgres 优化。

顺便提一句。5000个用户并不多。我的数据库包含大约 20 万到 100 万用户的用户。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-10-15T16:45:28.763

如果您确实想从 PostgreSQL 切换，Sybase SQL Anywhere 在[TPC-C 基准测试列表](http://www.tpc.org/tpcc/results/tpcc_price_perf_results.asp)中的价格/性能方面排名第 5 。它也是前 10 名中价格最低的选项（到目前为止），并且是唯一的非 Microsoft 和非 Oracle 条目。

它可以轻松扩展到数以千计的用户和数 TB 的数据。

*全面披露：我在 SQL Anywhere 开发团队工作。*

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-10-18T13:19:49.037

我们需要更多详细信息：您使用的是什么版本？服务器的内存使用量是多少？你在清理数据库吗？您的性能问题可能与 PostgreSQL 无关。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-11-26T23:23:05.773

如果您有很多读写操作，您可能想尝试 MySQL，假设问题出在 Postgres，但您的问题是写入问题。

不过，您可能想要查看您的数据库设计，并可能考虑分片。对于一个非常大的数据库，您可能仍然需要查看上述 2 个问题。

根据手头的任务，您可能还想查看非 RDBMS 数据库服务器或面向文档的 Mensia 和 CouchDB。没有一种工具可以管理所有任务，因此请明智地选择。

只是出于好奇，您是否有任何可能导致此延迟的存储过程？

# sms - 哪些 SMS 聚合器还提供语音邮件服务？

> ID：205336
> 
> 赞同：4
> 
> 时间：2008-10-15T16:08:44.733
> 
> 标签：sms, voicemail

我正在研究通过 API 调用同时提供 SMS 和语音邮件服务的公司。我希望能够通过短信和语音邮件联系用户（其中​​大多数是美国用户）。这个想法是我们的​​网络服务器将连接到 SMS/语音邮件提供商的服务器（例如使用 HTTP post），然后将消息发送到收件人的电话。对于 SMS 消息，我们会向用户发送一条文本消息，而对于语音邮件，则会将文本消息翻译成机器人语音，然后它会呼叫用户的电话并背诵消息。

有没有人与提供短信和语音邮件的公司合作过？如果是这样，你能推荐一个供应商吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-16T04:04:33.323

我过去使用过[BT 的电话/短信服务](http://web21c.bt.com/)。这是发送短信和自动呼叫的绝佳服务。我特别喜欢所有东西都是开源的，它们有很多主流语言的包装器，而且 API 非常简单。

我是在与 BT 人员一起参加的课程中被介绍给它的，我花了几天时间才完成了一些不平凡的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-22T18:37:35.757

更新：以下美国提供商同时拥有语音邮件（包括文本到语音）和 SMS 服务，可通过 API（网络服务类型的模型）访问。

[West Corporation](http://www.west.com/)（总部位于内布拉斯加州奥马哈）

[Premier Global Services](http://www.premiereglobal.com/)（总部位于佐治亚州亚特兰大）

[二十一世纪通信](http://www.tfcci.com/)（位于俄亥俄州哥伦布市）

[Varolii Corporation](http://www.varolii.com/)（总部位于华盛顿州西雅图）

# mysql - MS SQL - 旧版 web 应用程序中的 MySQL 迁移

> ID：205337
> 
> 赞同：1
> 
> 时间：2008-10-15T16:08:48.323
> 
> 标签：mysql, sql-server, data-migration, code-migration

我希望将旧版 Web 应用程序的数据库从 SQL Server 迁移到 MySQL。我必须注意的 MySQL 的局限性是什么？在开始实际修改代码之前，哪些项目将成为综合清单的一部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-15T16:20:35.397

我要检查的第一件事是数据类型——数据类型的确切定义因数据库而异。我将创建一个映射列表，告诉我将每个数据类型映射到什么。这将有助于构建新表。我还会检查现在未使用的数据表或列。迁移它们没有意义。对函数、作业、sps 等做同样的事情。现在是清理垃圾的时候了。

您如何通过数据库中的 sps 或动态查询访问数据？通过在新的开发数据库中运行每个查询来检查每个查询，并确保它们仍然有效。同样，两种风格的 SQl 工作方式之间存在差异。我没有使用过我的 sql，所以我不确定一些常见的故障点是什么。当您使用它时，您可能想要对新查询进行计时并查看它们是否可以优化。优化也因数据库而异，当您使用它时，现在可能存在一些性能不佳的查询，您可以将其作为迁移的一部分进行修复。

还需要查看用户定义的函数。如果您正在这样做，请不要忘记这些。

不要忘记预定的作业，这些作业也需要在 myslq 中检查和重新创建。

您是否定期导入任何数据？所有导入都必须重写。

一切的关键是使用测试数据库并测试、测试、测试。测试一切，尤其是季度或年度报告或您可能忘记的工作。

你想做的另一件事是通过版本控制的脚本来做所有事情。在您可以在 dev 上按顺序运行所有脚本且没有失败之前，请不要进入生产环境。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-15T17:14:16.787

我忘记了一件事，确保您正在运行迁移的开发数据库（sql server 数据库）在每次测试运行之前立即从生产中更新。讨厌因为您正在针对过时的记录进行测试而导致产品失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-15T20:41:29.177

您的客户端代码几乎肯定是最复杂的修改部分。除非您的应用程序具有非常高质量的测试套件，否则您最终将不得不进行大量测试。你不能依赖任何工作相同的东西，即使是你可能期望的东西。

是的，数据库本身的东西需要改变，但客户端代码是主要操作所在，需要大量工作和严格的测试。

忘记迁移数据，这是您最不应该考虑的事情；数据库模式可能可以毫不费力地转换；其他数据库对象（SP、视图等）可能会导致问题，但客户端代码是问题的焦点所在。

几乎每个执行数据库查询的例程都需要更改，但绝对所有这些例程都需要进行测试。这将是不平凡的。

我目前正在考虑将我们应用程序的主数据库从 MySQL 4.1 迁移到 5，这差别不大，但这仍然是一项非常非常大的任务。

# sql - MySQL LEFT JOIN SELECT not selecting all the left side records?

> ID：205340
> 
> 赞同：1
> 
> 时间：2008-10-15T16:09:42.237
> 
> 标签：sql, mysql, join

I'm getting odd results from a `MySQL SELECT` query involving a `LEFT JOIN`, and I can't understand whether my understanding of `LEFT JOIN` is wrong or whether I'm seeing a genuinely odd behavior.

I have a two tables with a many-to-one relationship: For every record in `table 1` there are 0 or more records in `table 2`. I want to select all the records in table 1 with a column that counts the number of related records in table 2\. As I understand it, `LEFT JOIN` should always return all records on the `LEFT` side of the statement.

Here's a test database that exhibits the problem:

```
CREATE DATABASE Test;
USE Test;

CREATE TABLE Dates (
   dateID INT UNSIGNED NOT NULL AUTO_INCREMENT,
   date DATE NOT NULL,
   UNIQUE KEY (dateID)
) TYPE=MyISAM;

CREATE TABLE Slots (
   slotID INT UNSIGNED NOT NULL AUTO_INCREMENT,
   dateID INT UNSIGNED NOT NULL,
   UNIQUE KEY (slotID)
) TYPE=MyISAM;

INSERT INTO Dates (date) VALUES ('2008-10-12'),('2008-10-13'),('2008-10-14');
INSERT INTO Slots (dateID) VALUES (3); 
```

The Dates table has three records, and the Slots 1 - and that record points to the third record in Dates.

If I do the following query..

```
SELECT d.date, count(s.slotID) FROM Dates AS d LEFT JOIN Slots AS s ON s.dateID=d.dateID GROUP BY s.dateID; 
```

..I expect to see a table with 3 rows in - two with a count of 0, and one with a count of 1\. But what I actually see is this:

```
+------------+-----------------+
| date       | count(s.slotID) |
+------------+-----------------+
| 2008-10-12 |               0 |
| 2008-10-14 |               1 |
+------------+-----------------+ 
```

The first record with a zero count appears, but the later record with a zero count is ignored.

Am I doing something wrong, or do I just not understand what LEFT JOIN is supposed to do?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-10-15T16:17:16.527

You need to `GROUP BY d.dateID`. In two of your cases, `s.DateID` is `NULL` (`LEFT JOIN`) and these are combined together.

I think you will also find that this is invalid (ANSI) SQL, because d.date is not part of a `GROUP BY` or the result of an aggregate operation, and should not be able to be `SELECT`ed.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-15T16:15:58.137

I think you mean to group by d.dateId.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-15T16:16:59.337

Try removing the GROUP BY s.dateID

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-15T16:20:46.940

The dateid for 10-12 and 10-13 are groupd together by you. Since they are 2 null values the count is evaluated to 0

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-15T17:10:15.470

I don't know if this is valid in MySQL but you could probably void this mistake in the future by using the following syntax instead

```
SELECT date, count(slotID) as slotCount
FROM Dates LEFT OUTER JOIN Slots USING (dateID)
GROUP BY (date) 
```

By using the USING clause you don't get two dateID's to keep track of.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-10-15T16:22:34.410

replace GROUP BY s.dateID with d.dateID.

# sql - Oracle数据库在什么情况下允许datetime列值的无效时间部分？

> ID：205351
> 
> 赞同：1
> 
> 时间：2008-10-15T16:12:53.383
> 
> 标签：sql, oracle, datetime

这种情况出现在现实生活中，其中无效数据位于（并继续进入）Oracle 数据库中，该数据库被提取到 Focus 中的数据处理系统中。在某些具有无效时间部分的行上，焦点会窒息而死。然后，Oracle DBA 会将日期时间从一个好的列复制到受影响的列中，以允许该过程继续进行（是的，我知道）。

我协助解决了这个问题，发现在 Oracle 中受影响的行：

```
DUMP(START_TIME) 
```

给出：

```
'Typ=12 Len=7: 100,99,255,255,0,0,0' 
```

尽管：

```
TO_CHAR(START_TIME, 'YYYY/MM/DD HH24:MI:SS') 
```

给出：

```
ORA-01801: date format is too long for internal buffer 
```

查看`DUMP()`结果`'Typ=12 Len=7: 100,99,255,255,0,0,0'`和[存储约定](http://www.psoug.org/reference/datatypes.html)，它们似乎能够绕过列的语义限制并插入 0、-1、-1、-1、-1、-1、-1 或`0x00 0xFF 0xFF 0xFF 0xFF 0xFF 0xFF`

这很“有意义”，因为`0xFF = 255 = -1`可能会导致`0000/255/255 255:255:255`取决于您如何解释字节、符号和溢出。

Oracle 在什么条件下（连接机制等）允许无效数据进入日期时间列？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-11-18T04:29:34.240

Oracle 通常不允许这样做。OCI 层可以绕过数据类型验证——Oracle 基本上相信您在这七个字节中输入的内容构成了有效日期。同样，在 OCI 层，Oracle 可以传回 7 个字节的“日期”，由客户端软件对这些字节执行任何操作（保持原样，转换为字符串或纪元... ) 也许更好的方法是找出在那里加载数据的内容，然后看看这些日期在做什么。

如果您感觉异常反常，您可以在日期上使用未记录的 REVERSE 函数并使其无效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-15T16:26:41.547

我似乎无法在快速 Metalink 搜索中找到该错误（如果您尚未使用 Oracle 打开 SR，我建议您这样做），但我知道 OCI 层（Oracle 调用接口）中存在允许插入无效日期的错误代码。不过，在大多数情况下，这些错误已经被纠正了一段时间，所以我倾向于打赌，如果你将最新的补丁集应用到正在执行插入的客户端机器上，问题就会消失。

# apache-flex - Flex: Call function from included component

> ID：205359
> 
> 赞同：3
> 
> 时间：2008-10-15T16:14:33.037
> 
> 标签：apache-flex, actionscript

This is similar to my previous posting. But this time I want to call a function that exists on the main mxml page.

This is my main mxml page:

main.mxml

```
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute" xmlns:ns1="*">
    <mx:Script>
        <![CDATA[   
        public function changeText(currentText:String):void{

            switch (currentText){
                case "changeText":
                    lblOne.text = "More Text";                  
            }
        }
            ]]>
    </mx:Script>

    <mx:HBox x="137.5" y="10" width="100%" height="100%">
        <ns1:menu id="buttons"> </ns1:menu>
    </mx:HBox>
    <mx:Canvas x="137" y="88" width="408.5" height="200">
        <mx:HBox x="0" y="10" width="388.5" height="190">
            <mx:Panel width="388" height="179" layout="absolute">
                <mx:Label x="10" y="10" text="Some Text" visible="{buttons.showLabel}" id="lblOne"/>
            </mx:Panel>
        </mx:HBox>
    </mx:Canvas>
</mx:Application> 
```

Here is my included page:

menu.mxml

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Canvas xmlns:mx="http://www.adobe.com/2006/mxml" width="400" height="300">
    <mx:Script>
        <![CDATA[
            [Bindable] public var showLabel:Boolean = true;
        ]]>
    </mx:Script>
    <mx:MenuBar width="380" height="58"></mx:MenuBar>
    <mx:Button x="10" y="10" width="80" label="Show" id="btnOne" click="this.showLabel=true;" />
    <mx:Button x="94" y="10" width="80" label="Hide" id="btnTwo" click="this.showLabel=false;"/>
    <mx:Button x="181" y="10" width="80" label="Run Function" id="btnThree" click="{changeText('changeText')}"/>
</mx:Canvas> 
```

How do I call the changeText function from the button on menu.mxml?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-15T16:43:00.983

Add this to menu:

```
 <mx:Metadata>
         [Event(name="buttonClicked", type="flash.events.Event")]
    </mx:Metadata>

 <mx:Button x="10" y="10" width="80" label="Show" id="btnOne" click="this.showLabel=true;dispatchEvent(new Event("buttonClicked"));"/> 
```

Change main to:

```
 <ns1:menu id="buttons" buttonClicked="changeText("Your Text");"> 
```

I couldn't tell where current text is coming from but if it is from menu you may have to build your own custom flex event or create a common variable for the two parts to access. The first is usually preferred.

P.S. The event metadata thing could also be achieved by adding the event listener when the creation of the application completes. You would add to main:

```
buttons.addEventListener("buttonClicked",changeText("Your Text")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-08-29T06:58:25.043

there is a simpler way, just use parentDocument.

Change this:

```
<mx:Button x="181" y="10" width="80" label="Run Function" id="btnThree" click="{changeText('changeText')}"/> 
```

to:

```
<mx:Button x="181" y="10" width="80" label="Run Function" id="btnThree" click="{parentDocument*.changeText('changeText')}"/>** 
```

# c# - 支持文档中包含哪些核心元素？

> ID：205374
> 
> 赞同：7
> 
> 时间：2008-10-15T16:17:35.870
> 
> 标签：c#, .net, documentation

我创建了一个应用程序，需要在下个月**“移交”给支持小组。**

该应用程序**相当小**（开发 2 个月），由两个客户端应用程序和一个数据库组成，它是用 c# 为 windows 平台编写的。

**我对支持文档中包含的内容有一个广泛的想法**，但到目前为止，在我的职业生涯中，我不需要制作很多支持文档，我希望包含一个可靠的项目列表。

我想我的**目标**是让支持小组**中的每个人的生活****更轻松**，并尽可能无压力。

**所以我想我的问题是：**

1.  支持文件绝对应该包含什么

2.  您在支持文档中添加了哪些其他内容以使它们更加有用。

3.  在移交之前可以进行哪些其他活动以使我们的生活更轻松？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-10-15T16:22:50.073

专业地参与过这个过程的双方，我可以说以下应该是***强制性***的：

*   代码文档（javadoc、doxygen 等）
*   构建过程的详细信息
    *   从哪里获得电流源
    *   如何提交错误（它们会发生）
    *   向源或客户提供补丁的途径
*   它是如何工作的（简单，但经常被忽视）
*   用户可定制的部分（例如，有一个脚本组件）
*   每个组件的主要联系人，也就是升级路径
*   鼓励支持人员反馈他们还想看到什么

我确信可以添加很多其他的东西，但这些是我心中的重中之重。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-10-15T16:36:39.687

1.  功能规范（如果有的话）
2.  用户手册。如果没有就创建一个
3.  技术手册，包含
    *   部署图
    *   使用的软件
    *   配置和构建细节
    *   服务器 ip 和 admin / oracle / websphere 密码的详细信息
4.  测试文件
5.  概述文件发出
    *   保存所有文件的地方
    *   版本控制存储库及其项目/用户详细信息
    *   应用程序用户名/密码
6.  Any support SQL's/tools etc created by the development team, for analysis, loading data etc.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-15T16:20:01.857

1.  包括操作和输出的屏幕截图。
2.  更喜欢“在线轻松更新”的文档（类似维基）而不是纸质或 pdf。
3.  如果在线，使其可搜索和交叉链接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-15T16:23:56.903

*   用户手册是一个整洁的东西（图片，描述等。）
*   应用程序中不同功能的概要

如果这“仅”适用于支持人员而不是进一步发展，这就是我的想法。

# java - 在 Java 中将字符串转换为 URL 标准字符串

> ID：205375
> 
> 赞同：2
> 
> 时间：2008-10-15T16:18:01.003
> 
> 标签：java

我有一个字符串，例如：

```
Cerepedia, una apliación web 
```

我想将其转换为有效的 URL，例如：

```
Cerepedia,unaaplicacionweb 
```

**注意：**特殊字符转换和空格去除。

顺便问一下，URL 中是否允许使用逗号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-15T16:30:43.147

在下面的类中尝试 convertNonAscii()

```
public class AsciiUtils {

    /**
     * Contains a list of all the characters that map one to one for UNICODE.
     */
    private static final String PLAIN_ASCII = 
              "AaEeIiOoUu"    // grave
            + "AaEeIiOoUuYy"  // acute
            + "AaEeIiOoUuYy"  // circumflex
            + "AaEeIiOoUuYy"  // tilde
            + "AaEeIiOoUuYy"  // umlaut
            + "Aa"            // ring
            + "Cc"            // cedilla
            + "Nn"            // n tilde (spanish)
            ;

    /**
     * Actual accented values, corresponds one to one with ASCII
     */
    private static final String UNICODE =
         "\u00C0\u00E0\u00C8\u00E8\u00CC\u00EC\u00D2\u00F2\u00D9\u00F9"             
        +"\u00C1\u00E1\u00C9\u00E9\u00CD\u00ED\u00D3\u00F3\u00DA\u00FA\u00DD\u00FD" 
        +"\u00C2\u00E2\u00CA\u00EA\u00CE\u00EE\u00D4\u00F4\u00DB\u00FB\u0176\u0177" 
        +"\u00C2\u00E2\u00CA\u00EA\u00CE\u00EE\u00D4\u00F4\u00DB\u00FB\u0176\u0177" 
        +"\u00C4\u00E4\u00CB\u00EB\u00CF\u00EF\u00D6\u00F6\u00DC\u00FC\u0178\u00FF" 
        +"\u00C5\u00E5"                                                             
        +"\u00C7\u00E7"  
        +"\u00D1\u00F1"
     ;

    // private constructor, can't be instanciated!
    private AsciiUtils() {      
    }

    /**
     * Removes accentued from a string and replace with ascii equivalent
     * @param s The string to englishify
     * @return The string without the french and spanish stuff.
     */
    public static String convertNonAscii(String s) {

        StringBuilder b = new StringBuilder();

        int n = s.length();
        for (int i = 0; i < n; i++) {
            char c = s.charAt(i);
            int pos = UNICODE.indexOf(c);
            if (pos > -1) {
              b.append(PLAIN_ASCII.charAt(pos));
            } else {
              b.append(c);
            }
        }

       return b.toString();

    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-15T16:25:12.190

你看过[URLEncoder](http://java.sun.com/j2se/1.5.0/docs/api/java/net/URLEncoder.html)吗？这似乎做了你需要它做的事情。虽然特殊字符将被转换为转义实体，而不是从它们的“特殊”属性中剥离。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-21T15:49:58.670

**注意**Don 解决方案适用于代码中的字符串，但不适用于来自 UTF-8 编码文件的字符串

这是我最好的解决方案，使用 URLEncode 并在之后转义十六进制字符：

```
String s = "Cerepedia, una apliación web";
String ENCODING= "uft-8";
String encoded_s = URLEncoder.encode(s,ENCODING); // Cerepedia+una+aplicaci%C3%83%C2%B3n+web
String s_hexa_free = EncodingTableUtils.replaceHexa(,ENCODING)); //  Cerepedia+una+aplicacion+web 
```

EncodingTableUtils

```
import java.util.HashMap;
import java.util.Iterator;
import java.util.Set;

public class EncodingTableUtils {
    public final static HashMap iso88591 = new HashMap();
    static {
        iso88591.put("%C3%A1", "a"); // á
        iso88591.put("%C3%81", "A"); // Á
        iso88591.put("%C3%A9", "e"); // é
        iso88591.put("%C3%89", "E"); // É
        iso88591.put("%C3%AD", "i"); // í
        iso88591.put("%C3%8D", "I"); // Í
        iso88591.put("%C3%93", "O"); // Ó
        iso88591.put("%C3%B3", "o"); // ó
        iso88591.put("%C3%BA", "u"); // ú
        iso88591.put("%C3%9A", "U"); // Ú
        iso88591.put("%C3%91", "N"); // Ñ
        iso88591.put("%C3%B1", "n"); // ñ
    }
    public final static HashMap utf8 = new HashMap();
    static {
        utf8.put("%C3%83%C2%A1", "a"); // á
        utf8.put("%C3%83%EF%BF", "A"); // Á
        utf8.put("%BD%C3%83%C2", "e"); // é
        utf8.put("%A9%C3%83%E2", "E"); // É
        utf8.put("%80%B0%C3%83", "i"); // í
        utf8.put("%C2%AD%C3%83", "I"); // Í
        utf8.put("%EF%BF%BD%C3", "O"); // Ó
        utf8.put("%C3%83%C2%B3", "o"); // ó
        utf8.put("%83%E2%80%9C", "u"); // ú     
        utf8.put("%C3%83%C2%BA", "U"); // Ú
        utf8.put("%C3%83%C5%A1", "N"); // Ñ
        utf8.put("%C3%83%E2%80", "n"); // ñ
    }

    public final static HashMap enc_table = new HashMap();
    static {
        enc_table.put("iso-8859-1", iso88591);
        enc_table.put("utf-8", utf8);
    }

    /**
     * Replace Hexadecimal characters with equivalent english not special ones
     * <p>Example: á Hexa: %C3%A1 gets replaced with a</p>
     * @param s Usually a string coming from URLEncode.encode
     * @param enc Encoding UTF-8 or ISO-8850-1
     */
    public static String convertHexaDecimal(String s, String enc) {
        HashMap characters = (HashMap) enc_table.get(enc.toLowerCase());
        if(characters==null) return "";
        Set keys = characters.keySet();
        Iterator it = keys.iterator();
        while(it.hasNext()) {
            String key = (String) it.next();
            String regex = EscapeChars.forRegex(key);
            String replacement = (String) characters.get(key); 
            s = s.replaceAll(regex, replacement);           
        }
        return s;
    }
} 
```

EscapeChars 类

```
public final class EscapeChars {
/**
  * Replace characters having special meaning in regular expressions
  * with their escaped equivalents, preceded by a '\' character.
  *
  * <P>The escaped characters include :
  *<ul>
  *<li>.
  *<li>\
  *<li>?, * , and +
  *<li>&
  *<li>:
  *<li>{ and }
  *<li>[ and ]
  *<li>( and )
  *<li>^ and $
  *</ul>
  */
  public static String forRegex(String aRegexFragment){
    final StringBuilder result = new StringBuilder();

    final StringCharacterIterator iterator = new StringCharacterIterator(aRegexFragment);
    char character =  iterator.current();
    while (character != CharacterIterator.DONE ){
      /*
      * All literals need to have backslashes doubled.
      */
      if (character == '.') {
        result.append("\\.");
      }
      else if (character == '\\') {
        result.append("\\\\");
      }
      else if (character == '?') {
        result.append("\\?");
      }
      else if (character == '*') {
        result.append("\\*");
      }
      else if (character == '+') {
        result.append("\\+");
      }
      else if (character == '&') {
        result.append("\\&");
      }
      else if (character == ':') {
        result.append("\\:");
      }
      else if (character == '{') {
        result.append("\\{");
      }
      else if (character == '}') {
        result.append("\\}");
      }
      else if (character == '[') {
        result.append("\\[");
      }
      else if (character == ']') {
        result.append("\\]");
      }
      else if (character == '(') {
        result.append("\\(");
      }
      else if (character == ')') {
        result.append("\\)");
      }
      else if (character == '^') {
        result.append("\\^");
      }
      else if (character == '$') {
        result.append("\\$");
      }
      else {
        //the char is not a special one
        //add it to the result as is
        result.append(character);
      }
      character = iterator.next();
    }
    return result.toString();
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-21T12:14:20.990

URLEncoder 用 + 代替空格。Don 发布的 Asccii 类不会删除空格，但下一个函数可用于该提案：

```
public static String removeSpaces(String s) {
    StringTokenizer st = new StringTokenizer(s," ",false);
    String t="";
    while (st.hasMoreElements()) t += st.nextElement();
        return t;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-07-27T10:12:13.273

试试这个代码

```
 public class Test {

    public static void main(final String[] args) {
        String str = "Cerepedia, una apliación web";
        String[] parts = str.split(" ");
        int sum=0;
        for (int i=0;i<=parts.length-1;i++) {
            sum = sum+parts[i].length();
        }

        int k=0;
        char[] url = new char[25];
        for (int i=0;i<=parts.length-1;i++) {
             char[] temp = parts[i].toCharArray();

             for(int j=0;j<temp.length;j++){

                 url[k]=temp[j];
                 k++;
             }

        }
        System.out.println(url);

    }
} 
```

# c# - C# 中的正则表达式大写替换

> ID：205382
> 
> 赞同：5
> 
> 时间：2008-10-15T16:20:17.393
> 
> 标签：c#, .net, regex

我有以下 C#，它只是将输入字符串中看起来像 EQUIP:19d005 的部分替换为 URL，如下所示：

```
input = Regex.Replace(input, @"(EQUIP:)(\S+)", @"<a title=""View equipment item $2"" href=""/EquipmentDisplay.asp?eqnum=$2"">$1$2</a>", RegexOptions.IgnoreCase); 
```

HTML 最终看起来像这样。

```
<a title="View equipment item 19d005" href="/EquipmentDisplay.asp?eqnum=19d005">EQUIP:19d005</a> 
```

唯一的问题是目标页面期望 eqnum 查询字符串全部为大写，因此它在 eqnum=19D005 时返回正确的设备，但如果它收到 eqnum=19d005 则失败。

我想我可以修改和纠正 EquipmentDisplay.asp 对大写值的错误要求，但是，如果可能的话，我想通过将上面 Regex.Replace 语句中的 $2 大写来使 C# 代码符合现有的经典 ASP 页面。

理想情况下，我希望返回的 HTML 看起来像这样：

```
<a title="View equipment item 19d005" href="/EquipmentDisplay.asp?eqnum=19D005">EQUIP:19d005</a> 
```

*请注意，虽然原始字符串是 EQUIP:19d005（小写），但只有 eqnum= 值是大写的。*

可以做到吗？如果可以，最整洁的方法是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-10-15T16:38:26.173

好的，2 个解决方案，一个内联：

```
input = Regex.Replace(input, @"(EQUIP:)(\S+)", m => string.Format(@"<a title=""View equipment item {1}"" href=""/EquipmentDisplay.asp?eqnum={2}"">{0}{1}</a>", m.Groups[1].Value, m.Groups[2].Value, m.Groups[2].Value.ToUpper()), RegexOptions.IgnoreCase); 
```

另一个使用单独的函数：

```
var input = Regex.Replace(input, @"(EQUIP:)(\S+)", Evaluator, RegexOptions.IgnoreCase);

private static string Evaluator(Match match)
{
    return string.Format(@"<a title=""View equipment item {1}"" href=""/EquipmentDisplay.asp?eqnum={2}"">{0}{1}</a>", match.Groups[1].Value, match.Groups[2].Value, match.Groups[2].Value.ToUpper());
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-15T16:30:22.443

直接使用 Regex.Replace 我认为没有办法。但是你可以把它变成一个两步的过程，并得到你正在寻找的结果。

```
var match = Regex.Match(input, @"(EQUIP:)(\S+)", RegexOptions.IgnoreCase);
var input = String.Format( @"&lt;a title=""View equipment item {1}"" href=""/EquipmentDisplay.asp?eqnum={2}""&gt;{0}{1}&lt;/a&gt;", 
match.Groups[1].Value,
match.Groups[2].Value,
match.Groups[2].Value.ToUpper()); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-15T16:37:29.607

您可以在替换中使用 MatchEvaluator 委托而不是字符串。然后，如果在最近的 .NET 上，您可以将委托嵌入为匿名函数。“旧”解决方案可能如下所示：

```
 static void Main(string[] args)
 {
     string input = "EQUIP:12312dd23";
     string output = Regex.Replace(input, @"(EQUIP:)(\S+)", 
         new MatchEvaluator(genURL), RegexOptions.IgnoreCase);
     Console.WriteLine(output);
     Console.ReadKey();
 }
 static string genURL(Match m)
 {
     return string.Format(@"<a title=""View item {0}"" 
            href=""/EqDisp.asp?eq={2}"">{1}{0}</a>",
            m.Groups[2].Value,m.Groups[1].Value,m.Groups[2].Value.ToUpper());
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-15T16:26:42.263

假设输入是一个字符串：

`input = Regex.Replace(input.ToUpper, @"(EQUIP:)(\S+)", @"<a title=""View equipment item $2"" href=""/EquipmentDisplay.asp?eqnum=$2"">$1$2</a>", RegexOptions.IgnoreCase);`

更改字符串的大小写不是正则表达式所做的事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-15T16:44:21.200

```
string input = "EQUIP:19d005";
Regex regex = new Regex (@"(EQUIP:)(\S+)", RegexOptions.IgnoreCase);
string eqlabel = regex.Replace(input, "$1");
string eqnum = regex.Replace(input, "$2");
string eqnumu = eqnum.ToUpperInvariant();
input = string.Format(@"<a title=""View equipment item {1}"" href=""/EquipmentDisplay.asp?eqnum={2}"">{0}{1}</a>", eqlabel, eqnum, eqnumu); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-10-15T17:11:15.200

```
public static string FormatToCustomAnchorTag(this string value)
{

    return Regex.Replace(value.ToLower() + value.ToUpper(),
                @"(?<equiplo>equip:)(?<equipnolo>\S+)(?<equipup>EQUIP:)(?<equipnoup>\S+)",
                @"<a title=""View equipment item ${equipnolo}"" href=""/EquipmentDisplay.asp?eqnum=${equipnoup}"">${equipup}${equipnolo}</a>");
} 
```

# objective-c - 可可坏习惯

> ID：205386
> 
> 赞同：28
> 
> 时间：2008-10-15T16:21:00.637
> 
> 标签：objective-c, cocoa, macos

自从您开始使用 Cocoa 编码以来，您养成了哪些坏习惯？

我认为列出不良习惯并积极添加，更重要的是，打破这些习惯是提高代码质量的好方法。所以从现在开始，把你的坏习惯改掉。也许其他人分享你的坏习惯。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2008-10-15T19:06:14.393

传递`nil`给需要的参数`NSError**`，纯粹是懒惰的。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2008-10-17T15:31:31.080

没有足够的单元测试。如果没有单元测试，清理和重构代码真的很困难。如果没有不断的重构和清理，代码腐烂就会开始蔓延。

使用单例模式共享对象，例如 +[MyObject defaultObject]。这本质上是一个全局变量，它产生了一些很好的隐藏依赖和耦合。这反过来又使代码更难测试。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2008-10-20T00:30:31.427

## 使用控制流异常

（以及其他非特殊情况。）

由于此处的另一个答案中提到了异常的使用，并且评论中提到的[文档](http://developer.apple.com/documentation/Cocoa/Conceptual/ErrorHandlingCocoa/CreateCustomizeNSError/chapter_4_section_4.html)并未特别强调这一点，因此值得强调的是，异常不应用于正常的控制流（这在其他一些环境中很常见）。Cocoa 中的异常相对来说*非常*昂贵。如果要传达错误，请使用`NSError`对象和Cocoa 提供的[错误处理架构。](http://developer.apple.com/documentation/Cocoa/Conceptual/ErrorHandlingCocoa/ErrorRespondRecover/chapter_3_section_2.html#//apple_ref/doc/uid/TP40001806-CH203-CJBHABAA)不要抛出异常。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2008-10-15T17:20:08.663

我懒得在类中使用访问器。通常，最大的问题是我不能轻易地一眼就知道变量的范围。然后我上周花了几个小时调试由于使用而导致的内存损坏问题

```
self.displayName = name 
```

在一些地方和

```
displayName = name 
```

在别人。当我找到它并且我的应用程序停止崩溃时，我很高兴。我很不高兴我浪费了几个小时来寻找这样一个可以避免的错误。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2008-10-15T16:24:02.520

这是我的一些：

抛出异常而不试图捕捉它们。我已经开始越来越多地依赖 NSError 来防止 NSExceptions 像 John Woo 电影中的子弹一样飞来飞去，但我仍然有很多*异常*代码。

编写一个快速类来执行 X、Y 和 Z，然后忘记在 dealloc 中进行清理。泄漏啊！

在不同的地方直接使用字符串 (KVO)，而不是定义一个常量并使用它（请参阅 Dave Dribin 关于 KVO 的优秀[博客文章](http://www.dribin.org/dave/blog/archives/2008/09/24/proper_kvo_usage/)了解更多信息）

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2008-10-15T17:39:36.657

我在应该使用 const 声明的地方更频繁地使用 #defines。

另外，我可能在我扔的 NSNotifications 中有点过于多产了；脱钩横行！

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2009-01-24T19:46:46.960

坏习惯：保持我的 Java 心态。

我的 Java 背景让我在考虑对变量做任何事情之前就痴迷地检查 null，那时我可以利用 Objective-C 向 nil 发送消息的能力。（参见：[“向 nil 发送消息？”](https://stackoverflow.com/questions/156395/sending-a-message-to-nil)）

我必须提醒自己，Objective-C 允许我简单地编写可以优雅地处理返回值 0 或 nil 的代码，而不是试图抢先捕获 nil。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2008-10-15T20:47:56.357

滥用绑定将模型对象属性相互绑定。绑定的这种使用导致代码难以理解、难以调试和难以测试。仅使用绑定将 UI 绑定到控制器。如果您需要解耦模型，请使用 NSNotification 而不是绑定。至少它比 KVO 更明确一点。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2008-10-15T17:56:42.707

你的意思是，当我能在十行内完成时，除了得意地咧嘴笑之外，还有什么需要 MFC coder 300？我想我对自己的代码最大的抱怨是访问器的爆炸式增长。在我做的下一个设计工作中，我为自己设定了使用最少属性的挑战。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2009-11-08T16:12:22.327

硬编码字符串，如按钮/视图标题。纯粹的懒惰。现在需要拿出一切来支持本地化:(

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2008-11-28T16:53:47.183

我学会了讨厌 Interface@#$%-er，因为它比现在用处少得多，而且 bug 更多，所以我倾向于用代码创建我的所有 UI，但仍然坚定地避免使用 IB。这很愚蠢，因为我知道它会大大降低我的工作效率，但我似乎懒得花一个下午学习如何将东西插入 IB。（是的，我知道如何做简单的事情，但是当有一些中等不简单的事情要做时，我总是很生气，而 IB 似乎对我不利。）

好吧，你说服了我——这个周末我要改掉**那个坏习惯。**

谢谢！:)

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2008-10-21T07:01:27.457

这有点通用，不一定是可可特有的，但是：

重构不够，因为不得不更新 .m 和 .h 文件的懒惰。

XCode 3 使某些类型的重构（如重命名）更容易，但我发现自己的重构频率低于 Java 或 C#，这是我试图改掉的一个坏习惯。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2013-09-03T16:10:17.350

1) 使用私有全局变量时，以下划线开头，并将它们放在 .m 文件的接口部分，如下所示：

```
@interface MyViewController (){
    NSArray *_tableData;
    NSNumberFormatter *_numberFormat;
} 
```

2) 仅将@properties 用于全局公共变量和/或接口元素。

3) 综合全球公众并点名。

4) 用 self.labelTitle NOT _labelTitle 调用你的界面元素。

我使用这些变量命名约定的主要原因是因为我可以轻松查看变量并知道它的用途及其范围，但主要是解决 XCode 中的错误，您尝试重构 -> 重命名变量该项目在本公约之外的某些情况下不起作用。

我重构了我的变量名很多，这个系统为我减轻了很多问题。

其他快速提示：

*   尽可能使用故事板，这可以缓解新版本中代码弃用的问题，并显着缩小您的总代码库。
*   将您的控制器命名为 VCMyName（视图控制器）、NCMyName（导航控制器）、TVMyName（表格视图控制器）等。这比 Apple 的标准（MyNameViewController）要好，因为在末尾添加全名通常会因为太长而被截断在很多界面中。界面生成器正确解释了推荐的命名约定，将视图称为“我的名字”。
*   学习和使用 Core Data，而不是你自己的临时 SQLite 查询系统，并创建一个辅助单元来访问一两行代码中的数据。
*   不要将所有共享的应用程序代码放在 AppDelegate 中，这并不是真正的用途，而是创建一个 AppController 单元并根据需要使用单例模式在视图中访问它。
*   请遵循[Apple 将数据转发](https://developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/ManagingDataFlowBetweenViewControllers/ManagingDataFlowBetweenViewControllers.html)到下一个视图控制器并使用委托处理返回数据的约定。这比将全局可访问的数据存储在某个地方要干净得多。
*   为您的项目创建一个 Constants.h（仅限 h 文件），您可以在其中存储项目中使用的内容，例如标准化的行高等。此文件中应该只有 #define 。
*   将登录数据存储在钥匙链中，这样更安全，如果他们删除应用程序并完全重新安装它，它仍然存在，您不必通过登录请求来干扰它们。
*   将您的应用程序的自定义用户设置存储在 NSUserDefaults 中，这会将它们从您的数据库中取出，这样如果您有迁移/其他问题，这些数据（这可能是您无法在应用程序中从头开始重新加载的唯一数据）不会受到影响.
*   如果您将请求从核心数据中拉入字典，如果您将它们传递给视图，这会使您的核心数据实体远离您的视图，并且还有性能优势。
*   遵循[Apple 的 Cocoa 对变量和函数名称的约定](https://developer.apple.com/library/ios/documentation/cocoa/Conceptual/CodingGuidelines/Articles/NamingMethods.html#//apple_ref/doc/uid/20001282-BCIGIJJF)。如有疑问，请始终查看 Apple 是否为此制定了约定。

这些只是我的想法。当然，有些人可能不同意我写的东西，但这些习惯在我刚开始的时候就对我有用。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2008-10-22T14:18:49.943

我经常发现自己忘记输入`return self;`构造函数的一部分。幸运的是，我已经开始改掉这个特殊的习惯。

# ruby-on-rails - link_to_remote 与渲染

> ID：205393
> 
> 赞同：4
> 
> 时间：2008-10-15T16:22:43.363
> 
> 标签：ruby-on-rails

是否可以重新加载通过 link_to_remote 加载的页面？我在我的控制器中这样做：

```
def create
 if captchas_verified
  do_something
 else
  render :action=>'new'
end 
```

但是当验证码错误时，它不会呈现新模板内的表单。顺便说一句，在网络服务器日志中，它显示模板已被渲染。

谢谢！

更新：今天我将渲染更改为：

```
render(:update) { |page| page.call 'location.reload' } 
```

但这让我更新了调用 link_to_remote 的页面，而不是通过 link_to_remote 打开的页面

更新 2：我修复了使用 page.replace_html "mydiv", :partial => "new" 而不是 page.call 'location.reload'

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-15T19:46:53.187

你需要`render :update`，而不是`render :action`。

我一直在做这种事情。与 jdl 的响应类似，您可以使用内联 rjs（不知道这是否正确）来呈现页面。

```
render(:update) do |page|
  page.replace_html("div_to_update", :partial => "name_of_template", :object => @object)
  page << "alert('javascript can be inserted here as well')"
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-15T19:37:44.983

像这样的东西应该做你想做的事。

```
render :update do |page| page << 'window.location.reload()' end 
```

# regex - 匹配正则表达式的随机字符串

> ID：205411
> 
> 赞同：29
> 
> 时间：2008-10-15T16:26:40.907
> 
> 标签：regex, language-agnostic, random

您将如何创建与某个正则表达式匹配的随机字母数字字符串？

这专门用于创建满足常规密码要求的初始密码。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-03-16T00:00:05.050

[Perl 中的String::Random](http://search.cpan.org/dist/String-Random/lib/String/Random.pm)将从正则表达式的子集生成随机字符串：

```
#!/usr/bin/perl

use strict;
use warnings;

use String::Random qw/random_regex/;

print random_regex('[A-Za-z]{3}[0-9][A-Z]{2}[!@#$%^&*]'), "\n"; 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2008-10-16T11:01:00.440

Welp，只是在沉思，但是生成与正则表达式匹配的随机输入的一般问题对我来说听起来是可行的，因为对随机的足够宽松的定义和对正则表达式的足够严格的定义。我正在考虑经典的正式定义，它只允许 ()|* 和字母字符。

正则表达式可以映射到称为[有限自动机](http://en.wikipedia.org/wiki/Deterministic_finite_automata)的正式机器。这样的机器是一个有向图，具有一个称为最终状态的特定节点，一个称为初始状态的节点，以及每条边上的字母表中的一个字母。如果一个单词可以从初始状态开始，并通过图中的每个字符标记一条边并在最终状态结束，则该单词被正则表达式接受。

可以构建图，然后从最终状态开始并向后遍历随机边，跟踪路径。在标准构造中，图中的每个节点都可以从初始状态到达，因此您无需担心会犯不可恢复的错误并需要回溯。如果您达到初始状态，请停止并读取前进的路径。那是您与正则表达式的匹配项。

但是，对于何时或是否会达到初始状态并没有特别的保证。人们必须弄清楚生成的字符串在什么意义上是“随机的”，以及在什么意义上你首先希望语言中的随机元素。

不过，也许这是思考问题的起点！

现在我已经把它写出来了，在我看来，重复解决选择以简化正则表达式模式可能会更简单，直到你得到一个简单的字符串。查找模式中的第一个非字母字符。如果它是 *，则将前面的项目复制几次并删除 *。如果它是 |，请选择要保留的 OR'd 项目中的哪个并删除其余项目。对于左括号，执行相同的操作，但要查看匹配的右括号后面的字符。如果您首先将正则表达式解析为树表示，这可能会更容易，这使得 paren 分组结构更易于使用。

对于那些担心决定一个正则表达式是否真的匹配任何东西的人来说，这相当于停止问题：不，正则语言的表现非常好。您可以判断是否有任何两个正则表达式描述了同一组接受的字符串。您基本上制作了上面的机器，然后按照算法生成规范的最小等效机器。对两个正则表达式执行此操作，然后检查生成的最小机器是否等效，这很简单。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-10-15T16:32:48.227

如果你有一个特定的问题，你可能有一个特定的正则表达式。我会采用那个正则表达式，用简单的人类术语来计算它的含义，然后从那里开始工作。

我怀疑创建一个通用的正则表达式随机匹配生成器是可能的，但它可能*比仅仅处理一个特定的案例**要多得多的*工作——即使这个案例每年改变几次。

（实际上，可能无法生成最一般意义上的随机匹配 - 我有一个模糊的记忆，“任何字符串是否与此正则表达式匹配”的问题是变相的停止问题。使用非常精简的正则表达式语言不过你可能会有更多的运气。）

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-04-22T21:23:06.307

我写了[Parsley](https://github.com/gajus/parsley)，它由 Lexer 和 Generator 组成。

*   Lexer 用于将类似正则表达式的字符串转换为标记序列。
*   生成器使用这些令牌来生成定义数量的代码。

```
$generator = new \Gajus\Parsley\Generator();

/**
 * Generate a set of random codes based on Parsley pattern.
 * Codes are guaranteed to be unique within the set.
 *
 * @param string $pattern Parsley pattern.
 * @param int $amount Number of codes to generate.
 * @param int $safeguard Number of additional codes generated in case there are duplicates that need to be replaced.
 * @return array
 */
$codes = $generator->generateFromPattern('FOO[A-Z]{10}[0-9]{2}', 100); 
```

上面的示例将生成一个包含 100 个代码的数组，每个代码都以“FOO”为前缀，后跟来自“ABCDEFGHKMNOPRSTUVWXYZ23456789”干草堆的 10 个字符和来自“0123456789”干草堆的 2 个数字。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-12T10:36:03.037

这个 PHP 库看起来很有前途：[ReverseRegex](https://github.com/icomefromthenet/ReverseRegex)

像所有这些一样，它只处理正则表达式的一个子集，但它可以处理相当复杂的事情，比如英国邮政编码：

```
([A-PR-UWYZ]([0-9]([0-9]|[A-HJKSTUW])?|[A-HK-Y][0-9]([0-9]|[ABEHMNPRVWXY])?) ?[0-9][ABD-HJLNP-UW-Z]{2}|GIR0AA) 
```

输出

```
D43WF
B6 6SB
MP445FR
P9 7EX
N9 2DH
GQ28 4UL
NH1 2SL
KY2 9LS
TE4Y 0AP 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-10-15T16:35:39.110

您需要编写一个字符串生成器，它可以解析正则表达式并生成随机长度的字符范围的随机成员等。

更容易编写具有某些规则的随机密码生成器（以小写字母开头，至少有一个标点符号，大写字母和数字，至少 6 个字符等），然后编写您的正则表达式，以便使用创建的任何密码上述规则有效。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-10-15T16:36:38.127

假设您同时具有最小长度和 3-of-4*（或类似）要求，我只是倾向于使用像样的密码生成器。

我过去构建了一对（基于 Web 的和命令行的），并且从来不需要跳过多个生成的字符串来通过 3-of-4 规则。

*   3-of-4：必须至少具有以下三个特征：小写、大写、数字、符号

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-10-15T16:46:36.373

这是可能的（例如，Haskell regexp 模块有一个测试套件，可以自动生成应该匹配某些正则表达式的字符串）。

但是，对于手头的简单任务，您最好使用简单的密码生成器并使用您的正则表达式过滤其输出。

# unit-testing - 你如何重构？

> ID：205426
> 
> 赞同：19
> 
> 时间：2008-10-15T16:31:17.030
> 
> 标签：unit-testing, refactoring

我想知道其他开发人员如何开始重构。你的第一步是什么？如果您重构不属于您的代码，这个过程（重构）有何不同？你在重构时写测试吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2008-10-15T16:34:21.813

1.  不要重构任何没有单元测试的重要内容
2.  编写单元测试，然后重构
3.  重构小块并经常重新运行测试
4.  ^(当代码是 DRY *) clean时停止重构

^* DRY = 不要重复自己

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-10-17T11:48:07.723

> 你的第一步是什么？

第一步是运行单元测试以确保它们都通过。实际上，如果在修改代码*之前*测试已经被破坏，那么您可能会浪费大量时间来寻找哪些更改破坏了测试。

> 如果您重构不属于您的代码，此过程有何不同？

在重构我没有编写的代码（或我很久以前编写的代码）时，我肯定会采取更小的步骤。我还可以在继续之前验证测试覆盖率，以避免依赖始终通过的单元测试......但不会测试我正在处理的区域。

> 你在重构时写测试吗？

我通常不会，但我可能会在以下情况下添加新测试（列表不详尽）：

*   一个新测试的想法在我脑海中闪现（*“如果......会发生什么？”* - 写一个测试知道）
*   发现测试覆盖的漏洞

它还取决于正在执行的重构。提取函数时，如果可以以与以前不同的方式调用它，我可能会创建一个新测试。

* * *

以下是一些一般性建议：

首先是维护在处理代码时注意到的[代码异味列表。](https://stackoverflow.com/questions/114342/what-are-code-smells-what-is-the-best-way-to-correct-them)这可以让人们从记住代码中看到的内容的负担中解放出来。还，

当单元测试没有完全通过时，黄金法则永远不会重构。

在代码稳定时进行重构，在添加一些你知道会受到未来重构影响的东西之前，在集成之前，最重要**的是在说你完成之前**。

在没有单元测试的情况下，您必须将要重构的代码部分置于测试之下。如果单元测试太难改造，通常是这样，那么您可以创建[特征测试](http://en.wikipedia.org/wiki/Characterization_Test)，正如[Michael Feathers 在*有效地使用旧代码*](http://www.informit.com/store/product.aspx?isbn=0131177052)中所推荐的那样。简而言之，它们是端到端的测试，允许您确定代码的当前行为（并不假定它一直都在完美地工作）。

不要害怕做*婴儿步骤*。不要同时做两件事。如果你注意到需要重构的东西，记下它，不要现在修复它，即使它看起来很容易。

当测试通过时，经常检查。这样您就可以在不丢失之前完成的内容的情况下恢复糟糕的重构。

请记住，重构不会为您的客户增加价值（这可以讨论），但客户不会付钱给您进行重构。一条经验法则是在对代码进行更改或添加新功能之前进行重构。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-10-15T16:39:08.010

我接受废话，让它不那么糟糕。:-)

严重地。我不重构以创建新功能。重构发生在新事物之前。如果没有测试，我会编写测试以确保我的重构不会破坏任何东西。如果有测试，我会使用这些。如果测试不足，我可能会编写更多测试，但我会考虑将其与重构分开并先进行。

对我来说，第一步是注意到我可以抽象一些东西并使其更通用（并且在现在需要该功能的其他地方有用），或者我注意到某些东西很糟糕并且可能会更好（主观的）。我不会无缘无故地重构一般性。 [YAGNI 原则](http://en.wikipedia.org/wiki/You_ain't_gonna_need_it)适用。

我们有共享所有权的概念，因此代码始终是我的——我可能没有编写它，但我在重构时不考虑这一点。如果目的不明确，我可能会在决定需要重构之前寻求理解事物——尽管这几乎总是重构本身的理由。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-10-15T16:42:29.470

阅读[Martin Fowler](http://martinfowler.com/books.html)的《[重构](https://rads.stackoverflow.com/amzn/click/com/0201485672)》一书

顺便说一句 - 这是 Martin Fowler 自己的亚马逊 exec 链接，如果你想知道的话:)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-10-15T16:48:17.197

很大程度上取决于我的目标。如前所述，您需要单元测试以确保您的重构没有破坏任何东西，如果有，您必须花时间修复它。对于许多情况，我会测试现有的解决方案，如果它有效，请将其包装而不是重构它，因为这样可以最大限度地减少中断的可能性。

如果我必须重构，例如我最近必须将一堆基于 ASCII 的 C++ 移植到 UNICODE，我倾向于确保我有良好的回归测试，可以在最终用户和单元级别工作。同样，我尝试使用工具而不是手动重构，因为这不太容易出错，而且你得到的错误是系统性的，而不是随机的。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-10-15T16:35:02.093

对我来说，第一件事是确保代码符合我们办公室的所有最佳实践。例如，对我们的 Perl 脚本使用严格、警告和污点。

如果存在效率或速度问题，请关注它们。比如找到一个更好的算法，或者找到一个更好的方法来完成四重嵌套的 for 循环正在做的事情。

最后看看是否有办法让代码更具可读性。这通常通过将 5 个执行类似操作的小脚本转换为 1 个模块（类）来完成。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-10-15T16:35:42.170

我在编写新代码时使用单元测试进行重构。如果方法太长，或者变量命名错误，或者我发现重复等，我还将重构旧代码，无论是我的还是其他人的。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-10-15T16:37:45.720

从获取单元测试开始，然后使用自动重构工具。如果重构不能自动化，那么它就不是真正的代码机械转换，因此也不是重构。单元测试是为了确保您确实只是在执行从一个代码库到等效代码库的机械转换。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2008-10-15T16:39:45.467

**没有单元测试**的重构是危险的。始终进行单元测试。如果您在没有经过良好测试的情况下更改某些内容，则代码的某些部分可能是安全的，但其他地方的某些内容可能不会有相同的行为。使用单元测试，您可以保护任何更改。

重构**其他代码**也很好，但极端情况并非如此。其他人不像你那样编程是正常的。改变东西不是“善意的”，因为你会以另一种方式做到这一点。如果确实有必要，只需重构即可。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2008-10-15T16:40:07.027

我删除了重复，它统一了代码中固有的思维模式。重构需要实现这两件事。如果您有两次执行相同操作的代码，请将其重构到一个公共位置，统一抽象。如果你在三个地方有相同的文字，把它放在一个常数中，统一目的。如果您有相同的参数组，请确保它们始终以相同的顺序使用，或者更好的是，将它们放在一个共同的结构中，统一信息组。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2008-10-16T20:05:17.020

我更不愿意重构别人写的代码，而不是重构我自己的代码。

如果它是由我的一位前辈编写的，我通常只在一个函数内进行重构。例如，我可以用 switch 替换 if 语句。任何比这大得多的东西通常都超出了范围，也不在预算之内。

对于我自己的代码，我通常会在编写时进行重构，只要某些东西看起来很难看或开始有异味。现在修复它要容易得多，而不是等待它在路上引起问题。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-10-15T16:43:57.067

当您重构您编写的代码时，我同意其他海报。

如果代码不是你写的，特别是如果有很多，我会先使用 fxCop、Visual Studio 的代码分析、DevPartner 等工具——我相信还有其他好的工具。他们会给你关于从哪里开始以及最常见的编码问题是什么的想法。我还会进行压力测试以查看瓶颈在哪里，因此您在改进代码方面所做的努力可以获得最大的回报。

我喜欢重构我的代码，但也有可能做得过火。如果您并没有真正提高应用程序的性能，或者没有认真提高代码的可读性，那么您可能应该停止。重构时总是有可能引入新的错误，尤其是在没有单元测试的情况下。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-01-23T17:18:13.937

第一步：识别[代码异味。](http://en.wikipedia.org/wiki/Code_smell)

第二步：考虑替代实现以及权衡是什么以及我接受哪个“更好”。

第三步：实施更好的解决方案。

无论代码是不是我的，这都没有什么不同，因为有时我可能会回顾几个月或几年前编写的代码，它看起来就像是其他人的代码。如果我正在制作新方法或者对代码没有足够的测试，我可能会编写测试，IMO。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2011-06-15T12:18:52.527

**一般的做法**

我可以从鸟瞰的软件（组件）开始。依赖性分析和绘图工具在这里提供了很大的帮助（请参阅后面的部分）。我在包级别或类级别的依赖项中寻找一个圆圈，或者在具有太多依赖项的类中寻找一个圆圈。这些都是重构的好候选。

**贸易工具**

依赖分析工具：

*   [Python](https://stackoverflow.com/questions/508277/is-there-a-good-dependency-analysis-tool-for-python)
*   [爪哇](https://stackoverflow.com/questions/5347488/java-class-dependency)

# ios - UIImage上的圆角

> ID：205431
> 
> 赞同：60
> 
> 时间：2008-10-15T16:32:50.083
> 
> 标签：ios, objective-c, iphone, cocoa-touch, image-manipulation

我正在尝试使用圆角在 iPhone 上绘制图像，例如联系人应用程序中的联系人图像。我有通常可以工作的代码，但它偶尔会在 UIImage 绘图例程中崩溃，并带有`EXEC_BAD_ACCESS`- `KERN_INVALID_ADDRESS`。我认为这可能与我几周前提出的[裁剪问题有关，但我相信我正确设置了裁剪路径。](https://stackoverflow.com/questions/158914/cropping-a-uiimage)

这是我正在使用的代码——当它没有崩溃时，结果看起来很好，任何想要获得类似外观的人都可以免费借用代码。

```
- (UIImage *)borderedImageWithRect: (CGRect)dstRect radius:(CGFloat)radius {
    UIImage *maskedImage = nil;

    radius = MIN(radius, .5 * MIN(CGRectGetWidth(dstRect), CGRectGetHeight(dstRect)));
    CGRect interiorRect = CGRectInset(dstRect, radius, radius);

    UIGraphicsBeginImageContext(dstRect.size);
    CGContextRef maskedContextRef = UIGraphicsGetCurrentContext();
    CGContextSaveGState(maskedContextRef);

    CGMutablePathRef borderPath = CGPathCreateMutable();
    CGPathAddArc(borderPath, NULL, CGRectGetMinX(interiorRect), CGRectGetMinY(interiorRect), radius, PNDegreeToRadian(180), PNDegreeToRadian(270), NO);
    CGPathAddArc(borderPath, NULL, CGRectGetMaxX(interiorRect), CGRectGetMinY(interiorRect), radius, PNDegreeToRadian(270.0), PNDegreeToRadian(360.0), NO);
    CGPathAddArc(borderPath, NULL, CGRectGetMaxX(interiorRect), CGRectGetMaxY(interiorRect), radius, PNDegreeToRadian(0.0), PNDegreeToRadian(90.0), NO);
    CGPathAddArc(borderPath, NULL, CGRectGetMinX(interiorRect), CGRectGetMaxY(interiorRect), radius, PNDegreeToRadian(90.0), PNDegreeToRadian(180.0), NO);

    CGContextBeginPath(maskedContextRef);
    CGContextAddPath(maskedContextRef, borderPath);
    CGContextClosePath(maskedContextRef);
    CGContextClip(maskedContextRef);

    [self drawInRect: dstRect];

    maskedImage = UIGraphicsGetImageFromCurrentImageContext();
    CGContextRestoreGState(maskedContextRef);
    UIGraphicsEndImageContext();

    return maskedImage;
} 
```

这是崩溃日志。每当我遇到这些崩溃之一时，它看起来都一样

```
异常类型：EXC_BAD_ACCESS (SIGSEGV)
异常代码：0x6e2e6181 处的 KERN_INVALID_ADDRESS
崩溃的线程：0

线程 0 崩溃：
0 com.apple.CoreGraphics 0x30fe56d8 CGGStateGetRenderingIntent + 4
1 libRIP.A.dylib 0x33c4a7d8 ripc_RenderImage + 104
2 libRIP.A.dylib 0x33c51868 ripc_DrawImage + 3860
3 com.apple.CoreGraphics 0x30fecad4 CGContextDelegateDrawImage + 80
4 com.apple.CoreGraphics 0x30feca40 CGContextDrawImage + 368
5 UIKit 0x30a6a708-[UIImage drawInRect:blendMode:alpha:] + 1460
6 UIKit 0x30a66904-[UIImage drawInRect:] + 72
7 MyApp 0x0003f8a8-[UIImage(PNAdditions)borderedImageWithRect:radius:] (UIImage+PNAdditions.m:187)

```

* * *

## 回答 #1

> 赞同：165
> 
> 时间：2009-08-20T17:33:08.700

这是在 iPhone 3.0 及更高版本中可用的更简单的方法。每个基于视图的对象都有一个关联的层。每个图层都可以设置一个角半径，这将为您提供您想要的：

```
UIImageView * roundedView = [[UIImageView alloc] initWithImage: [UIImage imageNamed:@"wood.jpg"]];
// Get the Layer of any view
CALayer * l = [roundedView layer];
[l setMasksToBounds:YES];
[l setCornerRadius:10.0];

// You can even add a border
[l setBorderWidth:4.0];
[l setBorderColor:[[UIColor blueColor] CGColor]]; 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-09-03T06:56:36.827

我将继续在这里并实际回答标题中的问题。

试试这个类别。

**UIImage+additions.h**

```
#import <UIKit/UIKit.h>

@interface UIImage (additions)
-(UIImage*)makeRoundCornersWithRadius:(const CGFloat)RADIUS;
@end 
```

**UIImage+additions.m**

```
#import "UIImage+additions.h"

@implementation UIImage (additions)
-(UIImage*)makeRoundCornersWithRadius:(const CGFloat)RADIUS {
    UIImage *image = self;

    // Begin a new image that will be the new image with the rounded corners
    // (here with the size of an UIImageView)
    UIGraphicsBeginImageContextWithOptions(image.size, NO, image.scale);

    const CGRect RECT = CGRectMake(0, 0, image.size.width, image.size.height);
    // Add a clip before drawing anything, in the shape of an rounded rect
    [[UIBezierPath bezierPathWithRoundedRect:RECT cornerRadius:RADIUS] addClip];
    // Draw your image
    [image drawInRect:RECT];

    // Get the image, here setting the UIImageView image
    //imageView.image
    UIImage* imageNew = UIGraphicsGetImageFromCurrentImageContext();

    // Lets forget about that we were drawing
    UIGraphicsEndImageContext();

    return imageNew;
}
@end 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2009-09-22T20:14:52.707

如果 appIconImage 是一个 UIImageView，那么：

```
appIconImage.image = [UIImage imageWithContentsOfFile:@"image.png"]; 
appIconImage.layer.masksToBounds = YES;
appIconImage.layer.cornerRadius = 10.0;
appIconImage.layer.borderWidth = 1.0;
appIconImage.layer.borderColor = [[UIColor grayColor] CGColor]; 
```

还要记住：

```
#import <QuartzCore/QuartzCore.h> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-10-15T17:28:41.907

我无法对您的崩溃提供任何见解，但我想我会提供另一种选择来解决问题。我正在处理的应用程序中出现了类似的问题。我没有编写任何代码，而是覆盖了另一个掩盖角落的图像。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-01-17T01:38:00.553

如果您在后台线程中调用您的方法 (borderedImageWithRect)，则可能会发生崩溃，因为 UIGraphics 函数不是线程安全的。在这种情况下，您必须使用 CGBitmapContextCreate() 创建上下文 - 请参阅 SDK 中的“反射”示例代码。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-12-17T00:47:16.613

最简单的方法是在您的视图中嵌入一个 disabled[!] 圆形 [not custom!] 按钮（甚至可以在 Interface Builder 中完成所有操作）并将您的图像与之关联。UIButton 的图像设置消息不同（与 UIImageView 相比），但整体 kludge 就像一个魅力。使用 setImage:forState: 如果你想要一个居中的图标或 setBackgroundImage:forState: 如果你想要切角的整个图像（如联系人）。当然，如果您想在 drawRect 中显示大量这些图像，这不是正确的方法，但更可能的是嵌入式视图正是您所需要的......

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-02-04T05:57:15.100

我要重申[fjoachim 的回答](https://stackoverflow.com/questions/205431/rounded-corners-on-uiimage/452643#452643)：在单独的线程上运行时尝试绘制时要小心，否则可能会`EXC_BAD_ACCESS`出错。

我的解决方法是这样的：

```
UIImage *originalImage = [UIImage imageNamed:@"OriginalImage.png"] 
[self performSelectorOnMainThread:@selector(displayImageWithRoundedCorners:) withObject:originalImage waitUntilDone:YES]; 
```

（在我的情况下，我正在调整 UIImages 的大小/缩放。）

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-02-04T10:10:58.350

实际上，我有机会在纽约举行的 iPhone 技术讲座上与 Apple 的某个人谈论这个问题。当我们谈论它时，他很确定这不是线程发布的。相反，他认为我需要保留调用`UIGraphicsBeginImageContext`. 这似乎违反了处理保留规则和命名方案的一般规则，但是这家伙很确定他以前见过这个问题。

如果内存被乱写，也许是另一个线程，那肯定可以解释为什么我只是偶尔看到这个问题。

我没有时间重新查看代码并测试修复，但 PCheese 的评论让我意识到我没有在这里发布信息。

...除非我写错了并且`UIGraphicsBeginImageContext`应该是`CGBitmapContextCreate`...

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-10-15T19:07:13.157

如果它只是在某些时候崩溃，请找出崩溃案例的共同点。dstRect 每次都一样吗？图像的大小是否不同？

此外，您需要`CGPathRelease(borderPath)`，尽管我怀疑泄漏会导致您的问题。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-02-04T09:20:14.677

```
UIImage *originalImage = [UIImage imageNamed:@"OriginalImage.png"] 
[self performSelectorOnMainThread:@selector(displayImageWithRoundedCorners:) withObject:originalImage waitUntilDone:YES]; 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-02-01T09:47:18.627

在 Swift 4.2 和 Xcode 10.1 中

```
let imgView = UIImageView()
imgView.frame = CGRect(x: 200, y: 200, width: 200, height: 200)
imgView.image = UIImage(named: "yourimagename")
imgView.imgViewCorners()
//If you want complete round shape
//imgView.imgViewCorners(width: imgView.frame.width)//Pass ImageView width
view.addSubview(imgView)

extension UIImageView {
//If you want only round corners
func imgViewCorners() {
    layer.cornerRadius = 10
    layer.borderWidth = 1.0
    layer.borderColor = UIColor.red.cgColor
    layer.masksToBounds = true
}
//If you want complete round shape
func imgViewCorners(width:CGFloat) {
    layer.cornerRadius = width/2
    layer.borderWidth = 1.0
    layer.borderColor = UIColor.red.cgColor
    layer.masksToBounds = true
} 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2014-06-25T09:27:44.440

在 xib 或情节提要中设置图像（图像宽度和高度 41x41）。

第一视图控制器.h

```
@interface....

IBOutlet UIImageView *testImg;

@end 
```

第一视图控制器.m

```
-(void)viewDidLoad{
        testImg.layer.backgroundColor=[[UIColor clearColor] CGColor];
        testImg.layer.cornerRadius=20;
        testImg.layer.masksToBounds = YES;
    } 
```

# c# - NHibernate：传递给 save() 和级联的未初始化代理

> ID：205435
> 
> 赞同：6
> 
> 时间：2008-10-15T16:34:35.540
> 
> 标签：c#, nhibernate

我在调用 session.Save() 时不断收到 NHibernate.PersistentObjectException，这是由于传递给 save() 的未初始化代理。如果我摆弄我的级联设置，我可以让它消失，但子对象不会被保存。

我发现的唯一其他解决方法是将以下内容添加到我的 DefaultSaveEventListener。

```
 protected override bool ReassociateIfUninitializedProxy(object obj, global::NHibernate.Engine.ISessionImplementor source)
    {
        if (!NHibernateUtil.IsInitialized(obj))
            NHibernateUtil.Initialize(obj);

        return base.ReassociateIfUninitializedProxy(obj, source);
    } 
```

这显然不是一个理想的解决方案。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2010-07-22T13:36:47.900

使用以下配置 XML，仅存在`DefaultSaveEventListener`不包含覆盖或扩展行为的自定义子类就足以触发此异常：

```
<event type="save-update">
    <listener class="MyNamespace.MyCustomSaveEventListener, MyAssembly" />
</event> 
```

我[在这个问题上](https://stackoverflow.com/questions/3309390/bizarre-nhibernate-exception-uninitialized-proxy-passed-to-save-caused-by-f)继续这个讨论。

**更新：**

我错误地派生自`DefaultSaveEventListener`而不是`DefaultSaveOrUpdateEventListener`，更改超类使这个问题对我来说消失了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-07-14T15:31:02.823

您是否尝试使用根聚合实体列表中的子对象？如果是，则需要使用根，遍历子级，进行更改，然后保存*根*，而不是子级。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-05-29T20:11:00.097

我有一个类似的问题。

修复很简单：`use ISession.Get()`而不是`ISession.Load()`

# batch-file - DOS批处理文件：如何写入提示并保持在同一行输入文本

> ID：205440
> 
> 赞同：4
> 
> 时间：2008-10-15T16:35:43.463
> 
> 标签：batch-file, prompt

我想知道是否有一种方法可以读取批处理文件中的用户输入，因为我有一个名为“fif.bat”的文件，它接收两个参数（只需调用它们***paramA***和***paramB***）所以我像这样执行文件：

```
fif paramA paramB 
```

我每个月都必须更改参数，但我多次调用这个文件，所以我喜欢打开一个控制台并打印这个：

```
fif paramA 
```

所以我只需要在需要时编写 paramB 并更改 paramA。

PD：paramA 非常大，所以如果我能把它放在那里而不是每次都写，那将非常有帮助。而且我不想制作另一个批处理文件来调用 fif whit paramA。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-10-15T16:44:47.923

我认为这可能是您正在寻找的：

```
@ECHO OFF
SET /p paramA=Parameter A:
ECHO you typed %paramA%
PAUSE 
```

第一行停止将批处理文件中的命令回显到控制台第二行用“参数 A：”提示用户并等待用户输入值并按 Enter。该值进入一个名为 paramA 的变量。第三行将变量 paramA 的值回显到控制台第四行等待用户按下任何键。

请注意，SET /p 命令不适用于每个版本的 Windows，我相信它是在 2000 年引入的，但我可能在版本上错了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-15T16:42:45.430

您可以在批处理文件中提示用户输入，`SET /P`例如：

```
SET /P paramB="Prompt String: " 
```

# testing - 测试基于 IP 的地理位置

> ID：205444
> 
> 赞同：4
> 
> 时间：2008-10-15T16:36:56.020
> 
> 标签：testing, geolocation

我们正在实施基于 IP 的地理定位服务，我们需要从各个市场（洛杉矶、纽约等）找到一些 IP 来全面测试该服务。

有谁知道一个目录，我们可以在其中找到在哪里使用了哪些 IP 范围？

编辑：我们已经实现了系统，它使用了第 3 方数据库和网络服务。我们只是想要一些来自已知市场的 IP 来验证其正常工作。

我要看看我是否能从免费的 maxmind 数据库中得到我需要的东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-10-15T16:43:48.987

不确定成本是否是一个因素，但有一些开源数据库正在讨论。[这个](http://www.maxmind.com/app/geoip_country)声称其免费版本的准确率为 99.3%，付费版本的准确率为 99.8%。他们还有一个[免费和开源的城市数据库](http://www.maxmind.com/app/geolitecity)（城市级别的准确率为 76%）。

它们都可用作基于 CSV 的数据库，因此您可以轻松获取已知位置并获取该地区 ISP 的 IP 范围。

更困难的部分是访问该 IP 范围内的计算机。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-15T16:46:37.560

尝试寻找提供匿名者列表的网站。他们通常会列出匿名网站的国家/地区。然后使用提供的 IP 或查找匿名器名称。

还可以尝试搜索匿名代理列表。

我们为我们庞大的网站搜索日志并建立了一个测试集合。

对不起，我不能传下去。)-:

干杯，

抢

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-10-15T17:17:03.380

也许这个数据库对你有用：http: [//www.hostip.info/dl/index.html](http://www.hostip.info/dl/index.html) 这是一个国家和城市的IP地址的集合。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-15T17:16:54.283

许多开源项目都有全球镜像；[你可以找到一个Debian 镜像](http://www.debian.org/mirror/list)和[kernel.org](http://kernel.org/mirrors/)镜像的国家索引列表。[（请注意，kernel.org 每个国家/地区都有很多镜像；美国](http://kernel.org/mirrors/countries/html/US.html)有 11个镜像，它们位于该国的不同地区，会提供不同的信息。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-15T17:02:42.520

您可以尝试使用自动化工具（如 AutoIT）在 whois 数据库服务（如[arin](http://ws.arin.net/whois)或 RIPE）上触发一系列 IP 地址，并收集寻址响应，可能只是改变 IP 的前两部分。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-11T00:37:19.277

使用带有[严格退出节点的](http://www.ghacks.net/2008/01/29/configure-tor-to-use-a-specific-country-as-an-exit-node/)[Tor](https://www.torproject.org/)。

您需要在配置中使用这些选项：

```
ExitNodes server1, server2, server3
StrictExitNodes 1 
```

您还需要确定在您想要的区域中适合您的出口节点。如果 Tor 国家/地区图标不够好，我建议使用[ARIN](https://www.arin.net/)的 Search Whois 功能来查看其位置。在您希望测试的每个区域中识别工作的 Tor 节点可能会有点痛苦，但它是可能的并且是免费的。

# php - 验证没有表的模型中的字段（CakePHP）

> ID：205447
> 
> 赞同：3
> 
> 时间：2008-10-15T16:37:47.157
> 
> 标签：php, cakephp

我在 CakePHP 中有一个没有表格的模型，称为 Upload。我在这个模型中验证了一个名为 source_id 的字段。

我有一个表格，可以构建一个漂亮的 $this-data，给我一个格式良好的集合，包括：

```
$this->data['Upload']['source_id'] 
```

但是，我设置的验证规则似乎根本没有运行。我从另一个可以工作的模型复制了这个验证规则，所以我相信它可以工作：

```
var $validate = array(
        'source_id' => array(
        rule' => 'numeric',
        'required' => true,
        'allowEmpty' => false,
        'message' => 'Error!.'
    )
); 
```

您不能验证缺少数据库表的模型的字段吗？

该表单使用 Upload 模型，并提交给另一个控制器操作方法。

CakePHP 1.2、PHP/MySQL 5、XAMPP。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-10-15T16:42:25.493

我很笨。您必须使用 save() 或

```
$this->Upload->set($this->data);
$this->Upload->validates(); 
```

现在工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-11-18T09:16:08.873

您还可以通过设置 $_schema 数组来*伪造*数据库结构，如下所示：

```
var $useTable = false;

var $_schema = array(
    'name'   =>array('type'=>'string', 'length'=>100), 
    'email' =>array('type'=>'string', 'length'=>255), 
    'phone' =>array('type'=>'string', 'length'=>20),
    'subject'  =>array('type'=>'string', 'length'=>255),
    'message'  =>array('type'=>'text')
); 
```

# java - 命名块来限制变量范围：好主意吗？

> ID：205458
> 
> 赞同：46
> 
> 时间：2008-10-15T16:42:12.530
> 
> 标签：java, coding-style

多年来，我一直在使用命名块来限制临时变量的范围。我从未在其他任何地方看到过这样做，这让我怀疑这是否是一个坏主意。特别是因为 Eclipse IDE 默认将这些标记为警告。

我认为，在我自己的代码中，我已经使用它取得了很好的效果。但是由于它是不习惯的，以至于优秀的程序员在看到它时会不信任它，所以我真的有两种方法可以从这里开始：

1.  避免这样做，或
2.  推广它，希望它会成为一个成语。

示例（在更大的方法中）：

```
final Date nextTuesday;
initNextTuesday: {
    GregorianCalendar cal = new GregorianCalendar();
    ... // About 5-10 lines of setting the calendar fields
    nextTuesday = cal.getTime();
} 
```

在这里，我使用 GregorianCalendar 只是为了初始化一个日期，并且我想确保我不会意外重用它。

有些人评论说您实际上不需要命名该块。虽然这是真的，但原始块看起来更像是一个错误，因为意图尚不清楚。此外，命名某些东西会鼓励您考虑块的意图。这里的目标是识别不同的代码部分，而不是给每个临时变量自己的范围。

许多人评论说，最好直接使用小方法。我同意这应该是你的第一直觉。但是，可能有几个缓解因素：

*   甚至考虑一个命名块，代码应该是简短的一次性代码，永远不会在其他地方调用。
*   命名块是一种组织超大方法的快速方法，无需创建具有十几个参数的一次性方法。当一个类在不断变化时尤其如此，并且输入可能会随着版本的变化而变化。
*   创建一个新方法会鼓励它的重用，如果用例没有很好地建立，这可能是不明智的。命名块更容易（至少在心理上）被丢弃。
*   尤其是对于单元测试，您可能需要为一次性断言定义十几个不同的对象，它们的不同之处足以让您（还）无法找到将它们合并为少数方法的方法，您也不能想办法用不是一英里长的名字来区分它们。

使用命名范围的优点：

1.  不能意外重用临时变量
2.  有限范围为垃圾收集器和 JIT 编译器提供了有关程序员意图的更多信息
3.  块名称提供了对代码块的注释，我发现它比开放式注释更具可读性
4.  更容易将代码从大方法重构为小方法，反之亦然，因为命名块比非结构化代码更容易分离。

缺点：

不是惯用的：没有见过命名块的这种用法的程序员（即除了我之外的所有人）认为这是错误的，因为他们找不到对块名称的引用。（就像 Eclipse 所做的那样。）让某些东西变得惯用是一场艰苦的战斗。

它可以作为不良编程习惯的借口，例如：

*   制作巨大的、单一的方法，其中几个小方法会更清晰。
*   缩进层太深，难以阅读。

注意：我根据一些深思熟虑的回答对这个问题进行了广泛的编辑。谢谢！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2008-10-15T16:44:28.843

我会直接重构为更小的方法。如果一个方法足够大以至于需要像这样分解，那么如果可能的话，它真的需要分解成多个*方法*。

虽然限制范围很好，但这并不是命名块的真正用途。这是单调的，这很少是一件好事。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2008-10-15T16:48:11.037

如果这很糟糕，那么为什么这是语言中的一个功能！它有一个目的，你已经找到了。

我经常完全按照您的示例编写代码。当你想初始化一个变量时，需要做一些计算来确定它应该是什么，并且这涉及到几个变量......那么你不希望这些变量在你的整个范围内徘徊函数，然后包含初始化的小范围效果很好。

迷你作用域是一种将代码分解为“段落”的简单方法。如果您拆分为方法，则当这些方法没有从其他任何地方调用并且具有需要执行的串行顺序时，您可以使代码更难导航。

它始终是一种平衡，但是如果您认为它最容易维护，并且如果它全部内联，它实际上会为您的代码的未来读者增加价值，那么就去做吧。

没有硬性规定。有时我有点厌倦了同事过度地将所有内容放入自己的方法或类或文件中，这成为导航的噩梦。某处有一个很好的平衡！

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2008-10-15T17:01:42.630

有时我使用未命名的块来隔离准备一些不可变事物所需的可变事物。我没有使用标签，而是将 Block 放在不可变变量声明下。

```
final String example;
{
   final StringBuilder sb = new StringBuilder();
   for(int i = 0; i < 100; i++)
     sb.append(i);
   example = sb.toString();

} 
```

当我发现块有其他用途时，或者只是认为它碍事时，我把它变成了一种方法。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2008-10-15T16:58:49.157

在我的书中，使用块来限制范围是一个很好的技术。

但是既然您使用标签来完成评论的工作，为什么不直接使用实际的评论呢？这将消除关于未引用标签的混淆。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2008-10-15T19:48:58.800

这是我第一次看到其他人使用积木。哇！我以为我是唯一的一个。我知道它不是我发明的——记得在某处读过它——可能来自我以前的 C++ 世界。

不过，我不使用标签，只是评论我在做什么。

我不同意所有要求您将其提取到方法中的人。我们在这些块中所做的大多数事情都不是真正可重用的块。在大型初始化中是有意义的，是的，我使用块来防止复制/粘贴错误。

BR，
~A

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-10-15T16:46:58.777

如果您有 5-10 行代码可以安全地放入这样的块中，那么同样的代码也可以提取到方法中。

这似乎只是语义上的差异，但至少通过提取到方法中，您将获得重用能力的好处。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-10-15T20:34:02.983

仅仅因为它们存在并不意味着它们应该被使用。使用命名块获得的大部分优势都可以通过使用新的私有方法更好地获得。

1.  您将无法使用新方法中声明的临时变量
2.  GC 和 JIT 编译器将使用新方法收集相同的信息
3.  为新方法使用描述性名称（在您的情况下使用“private Date initNextTuesday()”）将允许自我注释代码优势
4.  当您已经“预先分解”它时，无需重构代码

除了这些好处之外，您还可以获得代码重用好处，它将缩短您的长方法。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-10-17T21:54:54.817

我会使用带有注释的块，而不是在那里添加标签。

当我看到一个标签时，我不能假设没有其他东西在引用该块。

如果我更改块的行为，那么标签名称可能不再合适。但我不能只是伸手去改变它：我必须查看方法的其余部分以确定哪个标签正在调用块。到那时我会发现它是一个未引用的标签。

在这种情况下，使用注释更加清晰，因为它描述了块的行为，而不会对维护者施加任何额外的工作。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-10-16T13:10:52.097

在我的书中，这是一个很好的技术。管理大量一次性方法是邪恶的，而您为块命名提供的原因是好的。

生成的字节码是什么样的？那将是我唯一的犹豫。我怀疑它去掉了块名，甚至可能从更大的优化中受益。但你必须检查。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-10-29T16:43:18.690

很抱歉复活了这一点，但我没有看到有人提到我认为非常重要的一点。让我们看看你的例子：

```
final Date nextTuesday;
initNextTuesday: {
    GregorianCalendar cal = new GregorianCalendar();
    ... // About 5-10 lines of setting the calendar fields
    nextTuesday = cal.getTime();
} 
```

如果您是从上到下阅读文件并关心每一行，在此处包含此初始化逻辑会更容易理解。但是想想你是如何阅读代码的。您是否从文件顶部开始阅读并继续到底部？当然不是！唯一一次你会这样做是在代码审查期间。相反，您可能有一个基于先前知识、堆栈跟踪等的起点。然后您进一步向下/向上钻取执行路径，直到找到您要查找的内容。 **根据执行路径优化阅读，而不是代码审查。**
阅读使用的代码的人`nextTuesday`真的想了解它是如何初始化的吗？我认为他们需要的唯一信息是有一个`Date`对应下周二。所有这些信息都包含在其声明中。这是一个应该被分解成私有方法的代码的完美示例，因为**不需要理解读者关心的逻辑**。

```
final Date nextTuesday;
initNextTuesday: {
    GregorianCalendar cal = new GregorianCalendar();
    //1
    //2
    //3
    //4
    //5
    nextTuesday = cal.getTime();
} 
```

**与：**

```
final Date nextTuesday = getNextTuesday(); 
```

在通过模块的过程中，您更愿意阅读哪一个？

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-04-21T10:55:52.547

名称块有帮助：使用 break 作为 Goto 的一种形式

**使用 break 作为 goto 的一种文明形式。**

```
class Break {
    public static void main(String args[]) {
        boolean t = true;
        first: {
            second: {
                third: {
                    System.out.println("Before the break.");
                    if (t)
                        break second; // break out of second block
                    System.out.println("This won't execute");
                }
                System.out.println("This won't execute");
            }
            System.out.println("This is after second block.");
        }
    }
} 
```

**使用 break 退出嵌套循环**

```
class BreakLoop4 {
    public static void main(String args[]) {
        outer: for (int i = 0; i < 3; i++) {
            System.out.print("Pass " + i + ": ");
            for (int j = 0; j < 100; j++) {
                if (j == 10)
                    break outer; // exit both loops
                System.out.print(j + " ");
            }
            System.out.println("This will not print");
        }
        System.out.println("Loops complete.");
    }
} 
```

来源[链接](http://www.java-samples.com/showtutorial.php?tutorialid=278)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-10-15T16:51:04.040

我已经在我的一些 c# 中做到了这一点。我不知道你可以命名这些块，我得试试看它是否也可以在 c# 中工作。

我认为范围块可能是一个好主意，因为您可以将特定于代码的代码封装在代码块中，您可能不想将其拆分为自己的函数。

至于嵌套它们的缺点，我认为这更多是程序员的错误，而不是范围块本身。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-10-15T20:39:29.913

命名范围在这里在技术上是可以的，只是它们不经常以这种方式使用。因此，将来当其他人来维护您的代码时，可能不会立即明白他们为什么在那里。恕我直言，私人辅助方法将是更好的选择...

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-04-20T23:28:06.803

我喜欢使用块来限制 var 范围的想法。很多时候，我对给定大范围的短期变量感到困惑，使用后应该立即消失。长方法 + 许多非最终变量使得很难推断编码器的意图，尤其是在注释很少的情况下。考虑到我在方法中看到的大部分逻辑如下所示

```
Type foo(args..){
    declare ret
    ...
    make temp vars to add information on ret
    ...

    make some more temp vars to add info on ret. not much related to above code. but previously declared vars are still alive
    ...

    return ret
} 
```

如果 vars 的范围可以小于整个方法体，我可以很快忘记它们中的大部分（好事）。

我也同意太多或太少的私人事物会导致意大利面条代码。

实际上我一直在寻找类似函数式语言中的嵌套方法的东西，似乎它在 Java 中的表亲是 { **BLOCK** } （内部类和 labmda 表达式不适合这个..）。

但是，我更喜欢使用未命名的块，因为这可能会误导人们试图找到对标签的引用，而且我可以用注释块更好地解释。

对于使用私有方法，我会将其视为使用块的下一步。

# javascript - 如何加密客户端上的值并通过 Web 服务器传递而不解密它

> ID：205468
> 
> 赞同：2
> 
> 时间：2008-10-15T16:44:01.357
> 
> 标签：javascript, encryption

大家好，我正在研究一个项目，我们需要保持从客户端到黑盒系统的加密值，而不需要在中间的任何时间点对其进行解密。我们在浏览器和 Web 服务器之间使用 SSL，但是这些值会在 Web 服务器上自动解密，这是我们需要避免发生的事情。我们需要能够通过网络服务器（仍然加密）和其他后端系统传递它，直到它到达最终目的地，在那里它会被解密。

所以我的问题是我们可以使用哪些选项来维护来自浏览器的值的加密状态，而无需在任何地方解密它？

谢谢马克

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-15T16:48:48.570

您是否考虑过对值进行简单的 RSA 加密并通过系统发送？您需要确保客户端具有用于加密数据的公钥，但这将足够简单和安全，可以传递。

据我所知，大多数图书馆都支持 RSA。[可以在这里](http://www.ohdave.com/rsa/)找到一个关于如何纯粹用 Javascript 来做的很好的演示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-15T16:47:52.003

你会想看看[公钥加密](http://en.wikipedia.org/wiki/Public-key_cryptography)。SSL 保护您的会话（浏览器 <-> 服务器），但不是完整的传输。我建议在从客户端收到数据后对您的数据进行加密，然后将加密的数据一路发送。

这是一个糟糕的图表，概述了数据流

```
 client browser    web server       random server       blackbox
route   ---- SSL -------------><------------- not encrypted ------->
data                          *-------- PGP/GPG encrypted ---------> 
```

基本上，您的数据通过 SSL 加密到 Web 服务器，在该服务器上进行 PGP/GPG 加密，然后向下游发送。SSL 在这一点上并不重要（或者至少，它不是主要的加密形式）。

除非您可以在您的环境中保证 javascript，否则如果用户出于某种原因关闭了 javascript，最好在 Web 服务器上进行加密以确保您的数据是安全的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-15T16:49:54.713

如果您在数据库中使用二进制类型，则 Web 服务器应按原样发送。然后，您的客户端可以在插入数据之前对其进行加密，然后在获取数据后必须对其进行解密。Web 服务器和数据库服务器本身都无法查看数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-15T17:34:16.323

根据定义，黑匣子系统无法解密数据，除非它是为此而构建的。我建议与黑盒系统的开发人员讨论这个问题。

# amazon-s3 - robocopy、jungledisk 文件复制问题

> ID：205504
> 
> 赞同：1
> 
> 时间：2008-10-15T16:53:28.293
> 
> 标签：amazon-s3, robocopy, jungledisk

我是 robocopy 的忠实粉丝，并广泛使用它在我需要更新的各种服务器之间进行复制。

最近我一直在归档到一个 Amazon S3 帐户，我使用 JungleDisk 通过映射驱动器访问该帐户。然后我将我的文件从本地 PC robocopy 到 S3。

有时我在 robocopy 中收到一条非常奇怪的“函数不正确”错误消息，并且文件无法复制。我已经尝试过 xcopy 和文件资源管理器窗口之间的直接复制和粘贴。在每种情况下，我都会得到一些“不正确的功能”或“非法的 MS-DOS 功能”的变体，并且文件永远不会复制。

我删除了目标，但无济于事。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-15T21:15:49.060

不知道您是否可以回答自己的问题，但我想我已经解决了...

我在[jungledisk 支持论坛中找到了这个](http://forum.jungledisk.com/viewtopic.php?t=14039&highlight=invalid+msdos+function)

> 快速的解决方案是压缩文件，删除原始文件，然后解压缩文件，因为 zip 无法处理扩展属性。另一种解决方案是将它们移动到 FAT 文件系统，然后再次移动到 NTFS 文件系统，因为 FAT 不管理扩展属性。
> 
> 在这两种情况下，结果都是删除扩展属性，并且可以将文件移动到丛林磁盘。
> 
> 由于不同的原因，这些文件可以具有扩展属性，特别是从其他文件系统迁移：在我的例子中，是 CVS 存储库从 ext2 文件系统迁移到 NTFS。

似乎对我有用...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-20T08:06:27.873

我在 OSX 和 linux 上都遇到过类似的问题。起初我并不担心，但后来我意识到这些问题可能会导致潜在的数据污染或备份失败。因此，除了我的轻量级工作之外，我已经放弃了 JungleDisk。

由于我的数据集的大小，压缩/去皮文件对我来说不是一个选项。使用这种方法，您必须每次都上传整个数据集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-20T08:25:52.233

我不确定您指的是哪些属性，但您可以使用 /COPY:DT 开关进行 robocopy 以剥离属性吗？

# ruby - 使用正则表达式替换Ruby中所有不在引号中的空格

> ID：205521
> 
> 赞同：4
> 
> 时间：2008-10-15T16:56:14.937
> 
> 标签：ruby, regex

我正在尝试编写一个正则表达式来替换引号中未包含的所有空格，如下所示：

```
a = 4, b = 2, c = "space here" 
```

会返回这个：

```
a=4,b=2,c="space here" 
```

我花了一些时间搜索这个站点，我发现了一个类似的 q/a（[Split a string by spaces --preservingquoted substrings -- in Python](https://stackoverflow.com/questions/79968/split-a-string-by-spaces-in-python#80449)），它将用可以在之后重新替换的标记替换引号内的所有空格擦拭所有其他空间......但我希望有一种更清洁的方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-10-17T04:18:19.317

值得注意的是，*任何*正则表达式解决方案都会在以下情况下失败：

```
a = 4, b = 2, c = "space" here" 
```

虽然您确实可以构造一个正则表达式来专门处理三引号的情况，但您无法解决一般意义上的问题。这是简单[DFA](http://en.wikipedia.org/wiki/Deterministic_finite-state_machine)的数学可证明的限制，其中正则表达式是直接表示。要执行任何严格的大括号/引号匹配，您将需要更强大的[下推自动机](http://en.wikipedia.org/wiki/Pushdown_automaton)，通常采用文本解析器库（ANTLR、Bison、Parsec）的形式。

话虽如此，听起来正则表达式应该足以满足您的需求。请注意这些限制。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-10-15T18:29:12.690

这似乎有效：

```
result = string.gsub(/( |(".*?"))/, "\\2") 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-15T17:10:40.147

我认为这很干净：

```
mystring.scan(/((".*?")|([^ ]))/).map { |x| x[0] }.join 
```

我怀疑*gsub*可以做得更好（假设您想要一个纯正则表达式方法）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-17T03:46:02.657

试试这个，单/双引号中的字符串也匹配（所以你需要过滤它们，如果你只需要空间）：

```
/( |("([^"\\]|\\.)*")|('([^'\\]|\\.)*'))/ 
```

# c++ - openGL 子纹理

> ID：205522
> 
> 赞同：10
> 
> 时间：2008-10-15T16:56:32.720
> 
> 标签：c++, opengl

我有图像数据，我想获取它的子图像以用作 opengl 纹理。

```
glGenTextures(1, &m_name);
glGetIntegerv(GL_TEXTURE_BINDING_2D, &oldName);
glBindTexture(GL_TEXTURE_2D, m_name);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, m_width, m_height, 0, GL_RGBA, GL_UNSIGNED_BYTE, m_data); 
```

如何获取加载为纹理的该图像的子图像。我认为它与使用 glTexSubImage2D 有关，但我不知道如何使用它来创建可以加载的新纹理。来电：

```
glTexSubImage2D(GL_TEXTURE_2D, 0, xOffset, yOffset, xWidth, yHeight, GL_RGBA, GL_UNSIGNED_BYTE, m_data); 
```

我什么都看不到，调用 glCopyTexSubImage2D 只占用了我的帧缓冲区的一部分。谢谢

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2008-10-15T17:05:57.613

**编辑：**使用 glPixelStorei。您可以使用它来设置`GL_UNPACK_ROW_LENGTH`整个图像的宽度（以像素为单位）。然后调用 glTexImage2D（或其他），将指针传递给子图像的第一个像素以及子图像的宽度和高度。

完成后不要忘记恢复`GL_UNPACK_ROW_LENGTH`为0。

IE：

```
glPixelStorei( GL_UNPACK_ROW_LENGTH, img_width );
char *subimg = (char*)m_data + (sub_x + sub_y*img_width)*4;
glTexImage2D( GL_TEXTURE_2D, 0, GL_RGBA, sub_width, sub_height, 0, GL_RGBA, GL_UNSIGNED_BYTE, subimg );
glPixelStorei( GL_UNPACK_ROW_LENGTH, 0 ); 
```

或者，如果您对指针数学过敏：

```
glPixelStorei( GL_UNPACK_ROW_LENGTH, img_width );
glPixelStorei( GL_UNPACK_SKIP_PIXELS, sub_x );
glPixelStorei( GL_UNPACK_SKIP_ROWS, sub_y );

glTexImage2D( GL_TEXTURE_2D, 0, GL_RGBA, sub_width, sub_height, 0, GL_RGBA, GL_UNSIGNED_BYTE, m_data );

glPixelStorei( GL_UNPACK_ROW_LENGTH, 0 );
glPixelStorei( GL_UNPACK_SKIP_PIXELS, 0 );
glPixelStorei( GL_UNPACK_SKIP_ROWS, 0 ); 
```

**Edit2：**为了完整起见，我应该指出，如果您使用的是 OpenGL-ES，那么您不会得到`GL_UNPACK_ROW_LENGTH`. 在这种情况下，您可以 (a) 自己将子图像提取到新缓冲区中，或者 (b)...

```
glTexImage2D( GL_TEXTURE_2D, 0, GL_RGBA, sub_width, sub_height, 0, GL_RGBA, GL_UNSIGNED_BYTES, NULL );

for( int y = 0; y < sub_height; y++ )
{
    char *row = m_data + ((y + sub_y)*img_width + sub_x) * 4;
    glTexSubImage2D( GL_TEXTURE_2D, 0, 0, y, sub_width, 1, GL_RGBA, GL_UNSIGNED_BYTE, row );
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-01-19T01:41:36.863

对于那些在 2018 年及以后坚持使用**OpenGL ES 1.1/2.0**的人，我用不同的方法做了一些测试，如何从图像数据中更新部分纹理（图像与纹理大小相同）。

**方法 1：使用***glTexImage2D*复制整个图像：

```
glTexImage2D( GL_TEXTURE_2D, 0, GL_RGBA, mWidth, mHeight, 0, GL_RGBA, GL_UNSIGNED_BYTE, m_Pixels ); 
```

**方法 2：使用***glTexSubImage2D*复制整个图像：

```
glTexSubImage2D( GL_TEXTURE_2D, 0, 0, 0, mWidth, mHeight, GL_RGBA, GL_UNSIGNED_BYTE, m_Pixels ); 
```

**方法3：**循环复制图像部分，逐行：

```
auto *ptr = m_Pixels + (x + y * mWidth) * 4;
for( int i = 0; i < h; i++, ptr += mWidth * 4 ) {
    glTexSubImage2D( GL_TEXTURE_2D, 0, x, y+i, w, 1, GL_RGBA, GL_UNSIGNED_BYTE, ptr );
} 
```

**方法4：**复制整个图像宽度，但仅垂直复制已更改的部分：

```
auto *ptr = m_Pixels + (y * mWidth) * 4;
glTexSubImage2D( GL_TEXTURE_2D, 0, 0, y, mWidth, h, GL_RGBA, GL_UNSIGNED_BYTE, ptr ); 
```

这是在 PC 上进行的测试结果，通过 100000 次更新纹理的不同部分，大约是整个纹理大小的 1/5。

*   方法 1 - 38.17 秒
*   方法 2 - 26.09 秒
*   方法 3 - 54.83 秒 - 最慢
*   方法 4 - 5.93 秒 -**获胜者**

毫不奇怪，方法 4 最快，因为它只复制图像的一部分，并且只需调用 glTex...() 函数即可。

# sql - 如何创建可以选择搜索列的存储过程？

> ID：205526
> 
> 赞同：9
> 
> 时间：2008-10-15T16:57:17.320
> 
> 标签：sql, sql-server, search, stored-procedures, parameters

我正在开发一个将查询我们的员工数据库的工作应用程序。最终用户希望能够根据标准姓名/部门标准进行搜索，但他们还希望能够灵活地查询在卫生部门工作的所有名字为“James”的人。我要避免的一件事是简单地让存储过程获取参数列表并生成要执行的 SQL 语句，因为这将为内部级别的 SQL 注入打开大门。

这可以做到吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2008-10-15T17:16:24.160

虽然`COALESCE`技巧很巧妙，但我更喜欢的方法是：

```
CREATE PROCEDURE ps_Customers_SELECT_NameCityCountry
    @Cus_Name varchar(30) = NULL
    ,@Cus_City varchar(30) = NULL
    ,@Cus_Country varchar(30) = NULL
    ,@Dept_ID int = NULL
    ,@Dept_ID_partial varchar(10) = NULL
AS
SELECT Cus_Name
       ,Cus_City
       ,Cus_Country
       ,Dept_ID
FROM Customers
WHERE (@Cus_Name IS NULL OR Cus_Name LIKE '%' + @Cus_Name + '%')
      AND (@Cus_City IS NULL OR Cus_City LIKE '%' + @Cus_City + '%')
      AND (@Cus_Country IS NULL OR Cus_Country LIKE '%' + @Cus_Country + '%')
      AND (@Dept_ID IS NULL OR Dept_ID = @DeptID)
      AND (@Dept_ID_partial IS NULL OR CONVERT(varchar, Dept_ID) LIKE '%' + @Dept_ID_partial + '%') 
```

这些类型的 SP 可以很容易地生成代码（并为表更改重新生成）。

您有几个处理数字的选项 - 取决于您想要精确语义还是搜索语义。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-10-15T17:00:29.047

实现此类搜索的最有效方法是使用存储过程。此处显示的语句创建一个接受所需参数的过程。如果未提供参数值，则将其设置为 NULL。

```
CREATE PROCEDURE ps_Customers_SELECT_NameCityCountry
@Cus_Name varchar(30) = NULL,
@Cus_City varchar(30) = NULL,
@Cus_Country varchar(30) =NULL
AS
SELECT Cus_Name,
       Cus_City,
       Cus_Country
FROM Customers
WHERE Cus_Name = COALESCE(@Cus_Name,Cus_Name) AND
      Cus_City = COALESCE(@Cus_City,Cus_City) AND
      Cus_Country = COALESCE(@Cus_Country,Cus_Country) 
```

取自此页面：[http ://www.sqlteam.com/article/implementing-a-dynamic-where-clause](http://www.sqlteam.com/article/implementing-a-dynamic-where-clause)

我以前做过。它运作良好。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-10-15T17:10:28.043

Erland Sommarskog 的文章[Dynamic Search Conditions in T-SQL](http://www.sommarskog.se/dyn-search-2008.html)是关于如何执行此操作的一个很好的参考。Erland 提出了一些关于如何在不使用动态 SQL 的情况下做到这一点的策略（只是普通的 IF 块、OR、COALESCE 等），甚至列出了每种技术的性能特征。

如果您必须硬着头皮走动态 SQL 路径，您还应该阅读 Erland 的[动态 SQL 的诅咒和祝福，](http://www.sommarskog.se/dynamic_sql.html)其中他给出了一些关于如何正确编写动态 SQL 的提示

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-10-15T17:03:02.190

可以这样做，但通常这些厨房水槽程序会导致一些糟糕的查询计划。

说了这么多，这里是最常用于“可选”参数的策略。正常的方法是将 NULL 视为“省略”。

```
SELECT
  E.EmployeeID,
  E.LastName,
  E.FirstName
WHERE
  E.FirstName = COALESCE(@FirstName, E.FirstName) AND
  E.LastName = COALESCE(@LastName, E.LastName) AND
  E.DepartmentID = COALESCE(@DepartmentID, E.DepartmentID) 
```

编辑：更好的方法是参数化查询。这是该领域世界上最重要的权威之一，来自 LLBLGen Pro 的 Frans Bouma 的博客文章：

[存储过程与动态查询](http://weblogs.asp.net/fbouma/archive/2003/05/14/7008.aspx)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-10-15T18:14:18.180

使用 COALESCE 方法有一个问题，如果您的列具有 NULL 值，则传入 NULL 搜索条件（意味着忽略搜索条件）将不会返回许多数据库中的行。

例如，在 SQL Server 2000 上尝试以下代码：

```
CREATE TABLE dbo.Test_Coalesce (
    my_id   INT NOT NULL IDENTITY,
    my_string   VARCHAR(20) NULL )
GO
INSERT INTO dbo.Test_Coalesce (my_string) VALUES (NULL)
INSERT INTO dbo.Test_Coalesce (my_string) VALUES ('t')
INSERT INTO dbo.Test_Coalesce (my_string) VALUES ('x')
INSERT INTO dbo.Test_Coalesce (my_string) VALUES (NULL)
GO
DECLARE @my_string  VARCHAR(20)
SET @my_string = NULL
SELECT * FROM dbo.Test_Coalesce WHERE my_string = COALESCE(@my_string, my_string)
GO 
```

您只会返回两行，因为在 my_string 列为 NULL 的行中，您可以有效地获得：

```
my_string = COALESCE(@my_string, my_string) =>
my_string = COALESCE(NULL, my_string) =>
my_string = my_string =>
NULL = NULL 
```

但当然，NULL 不等于 NULL。

我尝试坚持：

```
SELECT
     my_id,
     my_string
FROM
     dbo.Test_Coalesce
WHERE
     (@my_string IS NULL OR my_string = @my_string) 
```

当然，您可以对其进行调整以使用通配符或您想做的任何其他事情。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-12T05:56:34.640

从我的博客文章中复制此内容：

```
USE [AdventureWorks]
GO

CREATE PROCEDURE USP_GET_Contacts_DynSearch
(
    -- Optional Filters for Dynamic Search
    @ContactID          INT = NULL, 
    @FirstName          NVARCHAR(50) = NULL, 
    @LastName           NVARCHAR(50) = NULL, 
    @EmailAddress       NVARCHAR(50) = NULL, 
    @EmailPromotion     INT = NULL, 
    @Phone              NVARCHAR(25) = NULL
)
AS
BEGIN
    SET NOCOUNT ON

    DECLARE
        @lContactID         INT, 
        @lFirstName         NVARCHAR(50), 
        @lLastName          NVARCHAR(50), 
        @lEmailAddress      NVARCHAR(50), 
        @lEmailPromotion    INT, 
        @lPhone             NVARCHAR(25)

    SET @lContactID         = @ContactID
    SET @lFirstName         = LTRIM(RTRIM(@FirstName))
    SET @lLastName          = LTRIM(RTRIM(@LastName))
    SET @lEmailAddress      = LTRIM(RTRIM(@EmailAddress))
    SET @lEmailPromotion    = @EmailPromotion
    SET @lPhone             = LTRIM(RTRIM(@Phone))

    SELECT
        ContactID, 
        Title, 
        FirstName, 
        MiddleName, 
        LastName, 
        Suffix, 
        EmailAddress, 
        EmailPromotion, 
        Phone
    FROM [Person].[Contact]
    WHERE
        (@lContactID IS NULL OR ContactID = @lContactID)
    AND (@lFirstName IS NULL OR FirstName LIKE '%' + @lFirstName + '%')
    AND (@lLastName IS NULL OR LastName LIKE '%' + @lLastName + '%')
    AND (@lEmailAddress IS NULL OR EmailAddress LIKE '%' + @lEmailAddress + '%')
    AND (@lEmailPromotion IS NULL OR EmailPromotion = @lEmailPromotion)
    AND (@lPhone IS NULL OR Phone = @lPhone)
    ORDER BY ContactID

END
GO 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-01-17T12:52:26.353

我们可以使用通用 @Search 参数并将任何值传递给它进行搜索。

```
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author: --
-- Create date:
-- Description: --
-- =============================================
CREATE PROCEDURE [dbo].[usp_StudentList]
    @PageNumber INT    = 1, -- Paging parameter
    @PageSize   INT    = 10,-- Paging parameter
    @Search  VARCHAR(MAX) = NULL, --Generic Search Parameter
    @OrderBy VARCHAR(MAX) = 'FirstName', --Default Column Name 'FirstName' for records ordering
    @SortDir VARCHAR(MAX) = 'asc' --Default ordering 'asc' for records ordering
AS
BEGIN
    SET NOCOUNT ON;

    --Query required for paging, this query used to show total records
    SELECT COUNT(StudentId) AS RecordsTotal FROM Student

    SELECT Student.*, 
        --Query required for paging, this query used to show total records filtered
        COUNT(StudentId) OVER (PARTITION BY 1) AS RecordsFiltered 
    FROM Student
    WHERE 
    --Generic Search 
    -- Below is the column list to add in Generic Serach
    (@Search IS NULL OR Student.FirstName LIKE '%'+ @Search +'%')
    OR (@Search IS NULL OR Student.LastName LIKE '%'+ @Search +'%')
    --Order BY
    -- Below is the column list to allow sorting
    ORDER BY 
    CASE WHEN @SortDir = 'asc' AND @OrderBy = 'FirstName' THEN Student.FirstName END,
    CASE WHEN @SortDir = 'desc' AND @OrderBy = 'FirstName' THEN Student.FirstName  END DESC,
    CASE WHEN @SortDir = 'asc' AND @OrderBy = 'LastName' THEN Student.LastName END,
    CASE WHEN @SortDir = 'desc' AND @OrderBy = 'LastName' THEN Student.LastName  END DESC,
    OFFSET @PageSize * (@PageNumber - 1) ROWS FETCH NEXT @PageSize ROWS ONLY;
END 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2008-10-15T16:59:26.067

我的第一个想法是写一个这样的查询......

```
SELECT EmpId, NameLast, NameMiddle, NameFirst, DepartmentName
  FROM dbo.Employee
       INNER JOIN dbo.Department ON dbo.Employee.DeptId = dbo.Department.Id
 WHERE IdCrq IS NOT NULL
       AND
       (
          @bitSearchFirstName = 0
          OR
          Employee.NameFirst = @vchFirstName
       )
       AND
       (
          @bitSearchMiddleName = 0
          OR
          Employee.NameMiddle = @vchMiddleName
       )
       AND
       (
          @bitSearchFirstName = 0
          OR
          Employee.NameLast = @vchLastName
       )
       AND
       (
          @bitSearchDepartment = 0
          OR
          Department.Id = @intDeptID
       ) 
```

...如果他们想要搜索特定字段，然后调用者会提供一个位标志，然后如果他们要搜索它则提供值，但我不知道这是否会创建一个草率的 WHERE 子句或者是否我可以在 WHERE 子句中使用 CASE 语句。

正如你所看到的，这个特定的代码是在 T-SQL 中的，但我也很乐意查看一些 PL-SQL / MySQL 代码并相应地进行调整。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2008-10-15T17:18:36.107

我会坚持使用 NULL/COALESCE 方法而不是 AdHoc 查询，然后进行测试以确保您没有性能问题。

如果事实证明您的查询运行速度很慢，因为在您搜索索引列时它正在执行表扫描，那么您始终可以使用允许在这些索引字段上搜索的其他特定存储过程来补充通用搜索存储过程。例如，您可以有一个特殊的 SP，它按 CustomerID 或姓/名进行搜索。

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2016-02-17T06:55:19.203

编写一个程序，将所有名称以A开头的员工数据插入表中？？

# php - 如何使用 google feed api 检测 feed 更新

> ID：205527
> 
> 赞同：3
> 
> 时间：2008-10-15T16:58:00.157
> 
> 标签：php, rss, aggregate, feed, google-feed-api

因为我运行一个博客聚合器网站，它每小时检查大量 RSS 提要列表以获取新帖子，所以如果可以使用谷歌提要 api 或[谷歌 AJAX 提要 API](http://code.google.com/apis/ajaxfeeds/)而不是让 cron 作业读取整个提要，我会很高兴知道它是否更新。喜欢这个[链接文字](http://getsatisfaction.com/rososo/topics/updates_dont_seem_to_be_dated_right)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-15T17:54:02.993

您可以使用 Google Feed API，但是您仍然需要每小时轮询一次 Google Feed API，而不是每小时轮询一次 Feed 源。它不会通知您提要更新。如果您想在更新提要时收到通知，那么您应该考虑使用 ping 服务器[http://en.wikipedia.org/wiki/Ping_blog](http://en.wikipedia.org/wiki/Ping_blog)来确定提要何时更新，以便您知道是时候获取再喂一次。并非所有提要都使用 ping 服务器，但它可能会帮助您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-07T09:27:25.070

正如 Nanek 所说，当 Feed 发生更改时，Google Feed API 不会通知您……为此，您必须使用**PubSubHubbub**协议或[Superfeedr](https://superfeedr.com/subscriber)等服务，这是 Google Feed API 的替代品。

# c - 传递可变数量的参数

> ID：205529
> 
> 赞同：347
> 
> 时间：2008-10-15T16:58:12.840
> 
> 标签：c, variadic-functions

假设我有一个 C 函数，它接受可变数量的参数：我如何调用另一个函数，它期望从它内部获得可变数量的参数，并将所有参数传递给第一个函数？

例子：

```
void format_string(char *fmt, ...);

void debug_print(int dbg_lvl, char *fmt, ...) {
    format_string(fmt, /* how do I pass all the arguments from '...'? */);
    fprintf(stdout, fmt);
 } 
```

* * *

## 回答 #1

> 赞同：222
> 
> 时间：2008-10-15T17:11:06.840

要传递省略号，您`va_list`像往常一样初始化 a 并将其传递给您的第二个函数。你不使用`va_arg()`. 具体来说;

```
void format_string(char *fmt,va_list argptr, char *formatted_string);

void debug_print(int dbg_lvl, char *fmt, ...) 
{    
 char formatted_string[MAX_FMT_SIZE];

 va_list argptr;
 va_start(argptr,fmt);
 format_string(fmt, argptr, formatted_string);
 va_end(argptr);
 fprintf(stdout, "%s",formatted_string);
} 
```

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2008-10-15T17:11:50.473

在不知道传递给它的参数数量的情况下，没有办法调用（例如）printf，除非您想使用顽皮和不可移植的技巧。

通常使用的解决方案是始终提供 vararg 函数的替代形式，因此`printf`它`vprintf`取代`va_list`了`...`. 这些`...`版本只是版本的包装`va_list`。

* * *

## 回答 #3

> 赞同：53
> 
> 时间：2011-11-27T04:51:44.250

[可变参数函数](http://en.wikipedia.org/wiki/Variadic_function#Variadic_functions_in_C.2C_Objective-C.2C_C.2B.2B.2C_and_D)可能很**[危险](https://stackoverflow.com/questions/3555583/passing-variable-number-of-arguments-with-different-type-c)**。这是一个更安全的技巧：

```
 void func(type* values) {
        while(*values) {
            x = *values++;
            /* do whatever with x */
        }
    }

func((type[]){val1,val2,val3,val4,0}); 
```

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2011-03-24T22:14:54.213

在宏伟的 C++0x 中，您可以使用可变参数模板：

```
template <typename ... Ts>
void format_string(char *fmt, Ts ... ts) {}

template <typename ... Ts>
void debug_print(int dbg_lvl, char *fmt, Ts ... ts)
{
  format_string(fmt, ts...);
} 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2011-07-26T19:40:49.893

您可以将内联汇编用于函数调用。（在这段代码中，我假设参数是字符）。

```
void format_string(char *fmt, ...);
void debug_print(int dbg_level, int numOfArgs, char *fmt, ...)
    {
        va_list argumentsToPass;
        va_start(argumentsToPass, fmt);
        char *list = new char[numOfArgs];
        for(int n = 0; n < numOfArgs; n++)
            list[n] = va_arg(argumentsToPass, char);
        va_end(argumentsToPass);
        for(int n = numOfArgs - 1; n >= 0; n--)
        {
            char next;
            next = list[n];
            __asm push next;
        }
        __asm push fmt;
        __asm call format_string;
        fprintf(stdout, fmt);
    } 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2015-04-19T14:23:23.770

你也可以试试宏。

```
#define NONE    0x00
#define DBG     0x1F
#define INFO    0x0F
#define ERR     0x07
#define EMR     0x03
#define CRIT    0x01

#define DEBUG_LEVEL ERR

#define WHERESTR "[FILE : %s, FUNC : %s, LINE : %d]: "
#define WHEREARG __FILE__,__func__,__LINE__
#define DEBUG(...)  fprintf(stderr, __VA_ARGS__)
#define DEBUG_PRINT(X, _fmt, ...)  if((DEBUG_LEVEL & X) == X) \
                                      DEBUG(WHERESTR _fmt, WHEREARG,__VA_ARGS__)

int main()
{
    int x=10;
    DEBUG_PRINT(DBG, "i am x %d\n", x);
    return 0;
} 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2018-07-04T07:05:08.420

尽管您可以通过首先将格式化程序存储在本地缓冲区中来解决传递格式化程序的问题，但这需要堆栈并且有时可能是要处理的问题。我尝试了以下，它似乎工作正常。

```
#include <stdarg.h>
#include <stdio.h>

void print(char const* fmt, ...)
{
    va_list arg;
    va_start(arg, fmt);
    vprintf(fmt, arg);
    va_end(arg);
}

void printFormatted(char const* fmt, va_list arg)
{
    vprintf(fmt, arg);
}

void showLog(int mdl, char const* type, ...)
{
    print("\nMDL: %d, TYPE: %s", mdl, type);

    va_list arg;
    va_start(arg, type);
    char const* fmt = va_arg(arg, char const*);
    printFormatted(fmt, arg);
    va_end(arg);
}

int main() 
{
    int x = 3, y = 6;
    showLog(1, "INF, ", "Value = %d, %d Looks Good! %s", x, y, "Infact Awesome!!");
    showLog(1, "ERR");
} 
```

希望这可以帮助。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-10-05T23:49:35.663

罗斯的解决方案清理了一点。仅当所有参数都是指针时才有效。`__VA_ARGS__`如果为空（Visual Studio C++ 和 GCC 都支持），语言实现也​​必须支持省略先前的逗号。

```
// pass number of arguments version
 #define callVardicMethodSafely(...) {value_t *args[] = {NULL, __VA_ARGS__}; _actualFunction(args+1,sizeof(args) / sizeof(*args) - 1);}

// NULL terminated array version
 #define callVardicMethodSafely(...) {value_t *args[] = {NULL, __VA_ARGS__, NULL}; _actualFunction(args+1);} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-11-21T15:32:19.800

# 简短的回答

```
/// logs all messages below this level, level 0 turns off LOG 
#ifndef LOG_LEVEL
#define LOG_LEVEL 5  // 0:off, 1:error, 2:warning, 3: info, 4: debug, 5:verbose
#endif
#define _LOG_FORMAT_SHORT(letter, format) "[" #letter "]: " format "\n"

/// short log
#define log_s(level, format, ...)     \                                                                                  
    if (level <= LOG_LEVEL)            \                                                                                     
    printf(_LOG_FORMAT_SHORT(level, format), ##__VA_ARGS__) 
```

用法

```
log_s(1, "fatal error occurred");
log_s(3, "x=%d and name=%s",2, "ali"); 
```

输出

```
[1]: fatal error occurred
[3]: x=2 and name=ali 
```

# 记录文件和行号

```
const char* _getFileName(const char* path)
{
    size_t i = 0;
    size_t pos = 0;
    char* p = (char*)path;
    while (*p) {
        i++;
        if (*p == '/' || *p == '\\') {
            pos = i;
        }
        p++;
    }
    return path + pos;
}

#define _LOG_FORMAT(letter, format)      \                                                                        
    "[" #letter "][%s:%u] %s(): " format "\n", _getFileName(__FILE__), __LINE__, __FUNCTION__

#ifndef LOG_LEVEL
#define LOG_LEVEL 5 // 0:off, 1:error, 2:warning, 3: info, 4: debug, 5:verbose
#endif

/// long log
#define log_l(level, format, ...)     \                                                                               
    if (level <= LOG_LEVEL)            \                                                                                         
    printf(_LOG_FORMAT(level, format), ##__VA_ARGS__) 
```

用法

```
log_s(1, "fatal error occurred");
log_s(3, "x=%d and name=%s",2, "ali"); 
```

输出

```
[1][test.cpp:97] main(): fatal error occurred
[3][test.cpp:98] main(): x=2 and name=ali 
```

# 自定义打印功能

您可以编写自定义打印函数并将`...`args 传递给它，也可以将其与上述方法结合使用。来自[这里的来源](https://github.com/espressif/arduino-esp32/blob/dcff2e9774c1a712e601fd62d08a68a5e74dbc62/cores/esp32/esp32-hal-uart.c#L521)

```
int print_custom(const char* format, ...)
{
    static char loc_buf[64];
    char* temp = loc_buf;
    int len;
    va_list arg;
    va_list copy;
    va_start(arg, format);
    va_copy(copy, arg);
    len = vsnprintf(NULL, 0, format, arg);
    va_end(copy);
    if (len >= sizeof(loc_buf)) {
        temp = (char*)malloc(len + 1);
        if (temp == NULL) {
            return 0;
        }
    }
    vsnprintf(temp, len + 1, format, arg);
    printf(temp); // replace with any print function you want
    va_end(arg);
    if (len >= sizeof(loc_buf)) {
        free(temp);
    }
    return len;
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-07-28T11:42:46.043

假设您编写了一个典型的可变参数函数。因为在可变参数之前至少需要一个参数`...`，所以您必须始终在使用中编写一个额外的参数。

**还是你？**

如果将可变参数函数包装在宏中，则不需要前面的 arg。考虑这个例子：

```
#define LOGI(...)
    ((void)__android_log_print(ANDROID_LOG_INFO, LOG_TAG, __VA_ARGS__)) 
```

这显然要方便得多，因为您不必每次都指定初始参数。

* * *

## 回答 #11

> 赞同：-5
> 
> 时间：2013-05-08T21:30:33.700

我不确定这是否适用于所有编译器，但到目前为止它对我有用。

```
void inner_func(int &i)
{
  va_list vars;
  va_start(vars, i);
  int j = va_arg(vars);
  va_end(vars); // Generally useless, but should be included.
}

void func(int i, ...)
{
  inner_func(i);
} 
```

如果需要，您可以将 ... 添加到 inner_func() ，但您不需要它。它之所以有效，是因为 va_start 使用给定变量的地址作为起点。在这种情况下，我们在 func() 中给它一个变量的引用。因此它使用该地址并在堆栈上读取该地址之后的变量。inner_func() 函数正在读取 func() 的堆栈地址。所以它只有在两个函数使用相同的堆栈段时才有效。

如果您将任何 var 作为起点， va_start 和 va_arg 宏通常会起作用。因此，如果您愿意，您可以将指针传递给其他函数并使用它们。您可以轻松地制作自己的宏。所有宏所做的只是类型转换内存地址。然而，让它们适用于所有编译器和调用约定是很烦人的。因此，使用编译器附带的通常更容易。

# scripting - 为什么删除的文件会重新出现在 Vista 中？

> ID：205538
> 
> 赞同：0
> 
> 时间：2008-10-15T17:00:18.623
> 
> 标签：scripting, file, windows-vista, automated-tests

我在我的程序上运行了一个自动测试，该测试会生成一些大型 MPG 文件以及其他文件。运行测试后，我让脚本自行清理。其他文件（二进制文件和文本文件的混合）被删除，没有问题。然而，MPG 文件不会被删除。如果我在测试运行后尝试从资源管理器中手动删除 MPG 文件，它们会从资源管理器窗口中删除，仅在几秒钟后重新出现。进程资源管理器显示它们正在被 explorer.exe 使用。最终，我能够删除这些文件。知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-15T17:40:43.550

Explorer 是否有可能保留文件以生成 thumbs.db 并执行其其他工作？我之所以这么问是因为我注意到资源管理器评估媒体目录中的*每个*电影文件时存在相当大的延迟，即使在详细信息视图中也是如此。（你可以看出来，因为那个资源管理器窗口的地址栏会变成一个进度条，慢慢地——在我家的盒子上慢慢地——变成绿色。）

如果没有资源管理器窗口打开到相应的目录，这种行为是否仍然存在？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-15T17:36:11.343

听起来有些东西仍然挂在对文件的引用上。是否可能您设置了卷影副本并且它正在尝试存档文件？

# xml - 来自 Web 服务调用的 XML

> ID：205546
> 
> 赞同：9
> 
> 时间：2008-10-15T17:01:39.247
> 
> 标签：xml, visual-studio, web-services, fiddler, tcptrace-pocketsoap

Visual Studio 使调用 Web 服务变得容易，试图弄清楚幕后发生的事情是困难的。

在调用 Web 服务时，如何查看从我的 .Net 应用程序生成的实际 XML？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-10-15T17:02:53.457

[tcptrace](http://www.pocketsoap.com/tcptrace/)或[Fiddler](http://www.fiddler2.com/fiddler2/)等工具可以提供帮助。

一些故障排除链接：

[使用 TcpTrace 跟踪 WCF](http://www.pluralsight.com/community/blogs/aaron/archive/2006/04/17/21870.aspx)

[使用 Fiddler 和 Excel 07 调试 Web 服务](http://www.devcow.com/blogs/adnrg/archive/2007/02/01/2763.aspx)

[Fiddler 可以让调试变得简单](http://www.developer.com/lang/jscript/article.php/3631066)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-15T17:50:09.943

为 SOAP 实现 TraceExtension 的[MSDN 示例代码；](http://msdn.microsoft.com/en-us/library/system.web.services.protocols.soapextension(VS.85).aspx)您可以按原样使用或修改以登录任何您想要的内容（我使用了一个数据库并保留它，不仅用于调试，还用于存档所有通信以供以后使用）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-15T20:15:15.907

对于 SOAP Web 服务调用，我发现[SoapUI](http://www.soapui.org/)非常有用。它可以连接到 WSDL 以获取方法定义，创建骨架信封来调用这些方法，并且您可以在调用后看到完整的结果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-15T17:06:54.977

在 Visual Studio 之外，您可以使用 Fiddler 工具准确查看请求和响应中包含的内容。

在 Visual Studio 中，您可以做的一件事是将 DataSet 写入文件。

```
myDataSet.WriteXml(filename); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-15T18:15:53.743

这是如何在 Visual Studio 中执行此操作的另一个示例。所有这一切都是从 Web 服务获取响应并将其保存到您指定的文件中：

```
Dim url As String = "http://web.service.com/"
Dim request As WebRequest = WebRequest.Create(url)
Dim response As WebResponse = request.GetResponse()
Dim stream As Stream = response.GetResponseStream()

Dim xmlDoc As XmlDocument = New XmlDocument
xmlDoc.Load(stream)
xmlDoc.Save("C:\Temp\foo.xml") 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-10-15T19:16:13.013

使用[Fiddler](http://www.fiddler2.com/fiddler2)的建议足以让我的 IT 团队参与进来。他们已经在网络服务器上安装了 一个类似程序[WireShark的副本。](http://www.wireshark.org)

不是很精通网络，我最初认为我可以监视从我的 PC 向网络服务发出的请求。那没有用。监控进入网络服务器的请求确实给了我 http 标头和肥皂信封的结构。

感谢所有的回复。

# java - 从集合/数组/列表创建逗号分隔字符串的最复杂方法？

> ID：205555
> 
> 赞同：98
> 
> 时间：2008-10-15T17:03:20.957
> 
> 标签：java, sql, string

在我使用数据库的过程中，我注意到我编写了查询字符串，并且在这个字符串中，我必须在列表/数组/集合的 where 子句中设置一些限制。应该是这样的：

```
select * from customer 
where customer.id in (34, 26, ..., 2); 
```

您可以通过将其简化为您拥有字符串集合并希望仅在一个字符串中创建此字符串的逗号分隔列表的问题来简化此操作。

到目前为止，我使用的方法是这样的：

```
String result = "";
boolean first = true;
for(String string : collectionOfStrings) {
    if(first) {
        result+=string;
        first=false;
    } else {
        result+=","+string;
    }
} 
```

但正如你所见，这是非常丑陋的。乍一看，您看不到那里发生了什么，尤其是当构造的字符串（如每个 SQL 查询）变得复杂时。

你（更）优雅的方式是什么？

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2008-10-15T19:05:12.647

使用[Google Guava API](http://code.google.com/p/guava-libraries/)的[`join`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Joiner.html#join%28java.lang.Iterable%29)方法：

```
Joiner.on(",").join(collectionOfStrings); 
```

* * *

## 回答 #2

> 赞同：88
> 
> 时间：2008-10-15T17:47:39.560

注意：这个答案在 11 年前写的时候很好，但现在有更好的选择可以在一行中更干净地完成此操作，无论是仅使用 Java 内置类还是使用实用程序库。请参阅下面的其他答案。

* * *

由于字符串是不可变的，因此如果要更改代码中的字符串，可能需要使用 StringBuilder 类。

StringBuilder 类可以看作是一个可变的 String 对象，当它的内容发生改变时它会分配更多的内存。

*通过处理多余的尾随逗号*，问题中的原始建议可以写得更清楚、更有效：

```
 StringBuilder result = new StringBuilder();
    for(String string : collectionOfStrings) {
        result.append(string);
        result.append(",");
    }
    return result.length() > 0 ? result.substring(0, result.length() - 1): ""; 
```

* * *

## 回答 #3

> 赞同：77
> 
> 时间：2008-10-15T18:13:37.230

我刚刚查看了今天执行此操作的代码。这是 AviewAnew 答案的变体。

```
collectionOfStrings = /* source string collection */;
String csList = StringUtils.join(collectionOfStrings.toArray(), ","); 
```

我们使用的[StringUtils](http://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/StringUtils.html)（<-- commons.lang 2.x 或[commons.lang 3.x 链接](http://commons.apache.org/proper/commons-lang/javadocs/api-release/org/apache/commons/lang3/StringUtils.html#join(char[],%20char))）来自[Apache Commons](https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/package-summary.html)。

* * *

## 回答 #4

> 赞同：48
> 
> 时间：2008-10-15T18:59:32.080

我编写该循环的方式是：

```
StringBuilder buff = new StringBuilder();
String sep = "";
for (String str : strs) {
    buff.append(sep);
    buff.append(str);
    sep = ",";
}
return buff.toString(); 
```

不要担心 sep 的性能。一个任务*非常*快。无论如何，Hotspot 往往会剥离循环的第一次迭代（因为它通常必须处理诸如空值和单态/双态内联检查之类的奇怪问题）。

如果你经常使用它（不止一次），把它放在一个共享的方法中。

关于如何将 id 列表插入 SQL 语句的 stackoverflow 上还有另一个问题。

* * *

## 回答 #5

> 赞同：45
> 
> 时间：2015-06-20T14:06:59.183

从 Java 8 开始，您可以使用：

*   [`String String.join(CharSequence delimiter, CharSequence... elements)`](https://docs.oracle.com/javase/8/docs/api/java/lang/String.html#join-java.lang.CharSequence-java.lang.CharSequence...-)
*   [`String String.join(CharSequence delimiter, Iterable<? extends CharSequence> elements)`](https://docs.oracle.com/javase/8/docs/api/java/lang/String.html#join-java.lang.CharSequence-java.lang.Iterable-)
*   如果您想将非`String`s 加入 a `String`，您可以使用[`Collectors.joining(CharSequence delimiter)`](https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#joining-java.lang.CharSequence-)，例如：

    `String joined = anyCollection.stream().map(Object::toString).collect(Collectors.joining(","));`

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2008-10-16T13:10:21.567

我发现迭代器习语很优雅，因为它可以测试更多元素（为简洁起见，省略了 null/empty 测试）：

```
public static String convert(List<String> list) {
    String res = "";
    for (Iterator<String> iterator = list.iterator(); iterator.hasNext();) {
        res += iterator.next() + (iterator.hasNext() ? "," : "");
    }
    return res;
} 
```

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2009-07-23T19:36:29.423

对此有很多手动解决方案，但我想重申并更新上面朱莉的答案。使用[google 集合 Joiner 类](http://google-collections.googlecode.com/svn/trunk/javadoc/com/google/common/base/Joiner.html)。

```
Joiner.on(", ").join(34, 26, ..., 2) 
```

它处理 var args、iterables 和数组，并正确处理多个字符的分隔符（与 gimmel 的答案不同）。如果您需要，它还将处理列表中的空值。

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2014-12-16T17:35:40.923

```
String.join(", ", collectionOfStrings) 
```

在 Java8 api 中可用。

替代（无需添加 google guava 依赖项）：

```
Joiner.on(",").join(collectionOfStrings); 
```

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2011-10-07T14:11:38.250

这是我结合前面的建议构建的一个非常通用的版本：

```
public static <T> String buildCommaSeparatedString(Collection<T> values) {
    if (values==null || values.isEmpty()) return "";
    StringBuilder result = new StringBuilder();
    for (T val : values) {
        result.append(val);
        result.append(",");
    }
    return result.substring(0, result.length() - 1);
} 
```

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2009-06-01T21:13:42.303

你可以试试

```
List collections = Arrays.asList(34, 26, "...", 2);
String asString = collection.toString();
// justValues = "34, 26, ..., 2"
String justValues = asString.substring(1, asString.length()-1); 
```

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2008-10-15T18:12:35.827

我认为像你正在做的那样构造连接 where 子句值的 sql 不是一个好主意：

```
SELECT.... FROM.... WHERE ID IN( value1, value2,....valueN) 
```

来自`valueX`字符串列表的位置。

首先，如果您要比较字符串，它们必须被引用，如果字符串内部可以有引号，这并非易事。

其次，如果这些值来自用户或其他系统，那么 SQL 注入攻击是可能的。

它更冗长，但你应该做的是创建一个这样的字符串：

```
SELECT.... FROM.... WHERE ID IN( ?, ?,....?) 
```

然后用 . 绑定变量`Statement.setString(nParameter,parameterValue)`。

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2013-03-06T17:45:32.190

这将是迄今为止最短的解决方案，除了使用 Guava 或 Apache Commons

```
String res = "";
for (String i : values) {
    res += res.isEmpty() ? i : ","+i;
} 
```

适合 0,1 和 n 元素列表。但是您需要检查空列表。我在 GWT 中使用它，所以没有 StringBuilder 在那里我很好。对于只有几个元素的短名单，其他地方也可以；）

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2015-03-24T13:36:51.547

万一最近有人偶然发现了这个问题，我使用 Java 8 添加了一个简单的变体`reduce()`。它还包括其他人已经提到的一些解决方案：

```
import java.util.Arrays;
import java.util.List;

import org.apache.commons.lang.StringUtils;    

import com.google.common.base.Joiner;

public class Dummy {
  public static void main(String[] args) {

    List<String> strings = Arrays.asList("abc", "de", "fg");
    String commaSeparated = strings
        .stream()
        .reduce((s1, s2) -> {return s1 + "," + s2; })
        .get();

    System.out.println(commaSeparated);

    System.out.println(Joiner.on(',').join(strings));

    System.out.println(StringUtils.join(strings, ","));

  }
} 
```

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2015-04-20T21:16:45.163

在 Android 中你应该使用这个：

```
TextUtils.join(",",collectionOfStrings.toArray()); 
```

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2008-10-15T19:27:04.070

只是处理这个问题的另一种方法。不是最短的，但它很有效并且可以完成工作。

```
/**
 * Creates a comma-separated list of values from given collection.
 * 
 * @param <T> Value type.
 * @param values Value collection.
 * @return Comma-separated String of values.
 */
public <T> String toParameterList(Collection<T> values) {
   if (values == null || values.isEmpty()) {
      return ""; // Depending on how you want to deal with this case...
   }
   StringBuilder result = new StringBuilder();
   Iterator<T> i = values.iterator();
   result.append(i.next().toString());
   while (i.hasNext()) {
      result.append(",").append(i.next().toString());
   }
   return result.toString();
} 
```

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2008-10-15T17:32:22.537

有一些第三方 Java 库提供了字符串连接方法，但您可能不想仅仅为了这样简单的事情而开始使用库。我会创建一个像这样的辅助方法，我认为它比你的版本好一点，它使用 StringBuffer，如果你需要加入许多字符串，它会更有效，它适用于任何类型的集合。

```
public static <T> String join(Collection<T> values)
{
    StringBuffer ret = new StringBuffer();
    for (T value : values)
    {
        if (ret.length() > 0) ret.append(",");
        ret.append(value);
    }
    return ret.toString();
} 
```

使用 Collection.toString() 的另一个建议更短，但这依赖于 Collection.toString() 返回一个非常特定格式的字符串，我个人不想依赖它。

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2012-01-26T09:06:58.570

如果你使用 Spring，你可以这样做：

```
StringUtils.arrayToCommaDelimitedString(
    collectionOfStrings.toArray()
) 
```

（包 org.springframework.util）

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2008-10-15T17:14:22.887

我不确定这有多“复杂”，但肯定会短一些。它将适用于各种不同类型的集合，例如 Set<Integer>、List<String> 等。

```
public static final String toSqlList(Collection<?> values) {

    String collectionString = values.toString();

    // Convert the square brackets produced by Collection.toString() to round brackets used by SQL
    return "(" + collectionString.substring(1, collectionString.length() - 1) + ")";
} 
```

**读者练习**：修改此方法，使其正确处理空/空集合:)

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2009-06-01T21:28:16.550

使代码难看的是对第一种情况的特殊处理。这个小片段中的大部分行都专门用于处理代码的常规工作，而是处理这种特殊情况。这就是像 gimel 之类的替代方案通过将特殊处理移到循环之外来解决的问题。有一种特殊情况（好吧，您可以将 start 和 end 都视为特殊情况 - 但只有其中一个需要特殊处理），因此在循环内处理它是不必要的复杂。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2010-01-25T14:34:37.137

加入“方法”在数组和扩展`AbstractCollections`但不覆盖`toString()`方法的类中可用（就像 中的几乎所有集合`java.util`）。

例如：

```
String s= java.util.Arrays.toString(collectionOfStrings.toArray());
s = s.substing(1, s.length()-1);// [] are guaranteed to be there 
```

* * *

这是一种非常奇怪的方式，因为它仅适用于 SQL 明智的数字数据。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2010-01-25T15:09:55.400

我刚刚签入了我的图书馆[美元](http://bitbucket.org/dfa/dollar/)的测试：

```
@Test
public void join() {
    List<Integer> list = Arrays.asList(1, 2, 3, 4, 5);
    String string = $(list).join(",");
} 
```

**它只使用一个静态导入**创建了一个围绕列表/数组/字符串/等的流畅包装器：`$`。

**注意**：

使用范围之前的列表可以重写为`$(1, 5).join(",")`

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2011-08-10T03:51:27.517

IN 表达式的好处是，如果你有重复的值，它不会改变结果。因此，只需复制第一项并处理整个列表。这假定列表中至少有一项。如果没有项目，我建议先检查，然后根本不执行 SQL。

这可以解决问题，它在做什么很明显，并且不依赖任何外部库：

```
StringBuffer inString = new StringBuffer(listOfIDs.get(0).toString());
for (Long currentID : listOfIDs) {
  inString.append(",").append(currentID);
} 
```

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2012-10-19T20:08:30.823

虽然我认为你最好的选择是使用 Guava 的 Joiner，但如果我要手动编码，我发现这种方法比“第一个”标志或砍掉最后一个逗号更优雅。

```
private String commas(Iterable<String> strings) {
    StringBuilder buffer = new StringBuilder();
    Iterator<String> it = strings.iterator();
    if (it.hasNext()) {
        buffer.append(it.next());
        while (it.hasNext()) {
            buffer.append(',');
            buffer.append(it.next());
        }
    }

    return buffer.toString();
} 
```

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2013-08-23T09:33:29.117

如果你有一个数组，你可以这样做：

```
Arrays.asList(parameters).toString() 
```

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2015-01-05T15:03:36.850

另一种选择，基于我在这里看到的（稍作修改）。

```
public static String toString(int[] numbers) {
    StringBuilder res = new StringBuilder();
    for (int number : numbers) {
        if (res.length() != 0) {
            res.append(',');
        }
        res.append(number);
    }
    return res.toString();
} 
```

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2019-09-12T06:24:55.367

```
List<String> collectionOfStrings = // List of string to concat
String csvStrings = StringUtils.collectionToDelimitedString(collectionOfStrings, ","); 
```

StringUtils from springframeowrk:spring-core

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2008-10-17T14:02:16.360

您可以使用 LINQ (to SQL)，并且可以使用 MS 的 Dynamic Query LINQ 示例。[http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2011-10-28T22:13:08.993

```
java.util.List<String> lista = new java.util.ArrayList<String>();
lista.add("Hola");
lista.add("Julio");
System.out.println(lista.toString().replace('[','(').replace(']',')'));

$~(Hola, Julio) 
```

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2013-11-13T20:36:10.603

```
String commaSeparatedNames = namesList.toString().replaceAll( "[\\[|\\]| ]", "" );  // replace [ or ] or blank 
```

> 字符串表示由集合元素的列表组成，按其迭代器返回的顺序排列，用方括号 ("[]") 括起来。相邻元素由字符“、”（逗号和空格）分隔。
> 
> 抽象集合 javadoc

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2014-12-02T06:58:42.260

列表令牌=新 ArrayList（结果）；final StringBuilder builder = new StringBuilder();

```
 for (int i =0; i < tokens.size(); i++){
        builder.append(tokens.get(i));
        if(i != tokens.size()-1){
            builder.append(TOKEN_DELIMITER);
        }
    } 
```

builder.toString();

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2015-10-16T07:04:43.013

有一个简单的方法。您可以在一行中获得结果。

```
String memberIdsModifiedForQuery = memberIds.toString().replace("[", "(").replace("]", ")"); 
```

要获得完整的想法，请检查下面的代码

```
 public static void main(String[] args) {       
        List<Integer>memberIds=new ArrayList<Integer>();  //This contain member ids we want to process
        //adding some sample values for example
        memberIds.add(3); 
        memberIds.add(4);
        memberIds.add(2);
        String memberIdsModifiedForQuery = memberIds.toString().replace("[", "(").replace("]", ")"); //here you will get (3,4,5) That you can directly use in query
        System.out.println(memberIdsModifiedForQuery);
        String exampleQuery="select * from customer where customer.id in "+memberIdsModifiedForQuery+" ";
    } 
```

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2016-07-11T07:07:29.090

android中将列表转换为逗号分隔字符串的最简单方法是使用`android.text.TextUtils`

```
 ArrayList<String>Myli = new ArrayList<String>();
 String ArayCommase=android.text.TextUtils.join(",", Myli); 
```

# atg - 您如何组织您的 ATG 项目？

> ID：205557
> 
> 赞同：9
> 
> 时间：2008-10-15T17:03:55.280
> 
> 标签：atg, atg-dynamo

如果您为 ATG Dynamo 开发，您如何构建您的模块和依赖项？

你如何组织项目？源目录、JAR 配置等。

您如何构建和部署？你用什么工具？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-11-07T02:37:10.450

我们有一个带有单个 ATG 模块的单片架构。我们最初使用 JHTML 开发了这个站点，然后在这个 ATG 模块中创建了一个（整体）J2EE Web 应用程序，并将我们所有的 JHTML 转换为 JSP。

我们在磁盘上的项目如下所示：

```
root
  deploy
    class (compile java to here)
    config (primary configpath)
    docroot (JHTML docroot)
    dev (configpath for dev environment)
    test (configpath for QA environment)
    prod (configpath for prod environment)
  j2ee (j2ee web-app)
    WEB-INF
    dir-a (application JSPs)
    dir-b (application JSPs)
  src
    java (java src)
    sql (sql src) 
```

我们有一个 Ant 构建文件，它将 Java 源代码编译为 deploy/class。在开发/测试和生产 JAR 上。我们有一个单独的构建服务器，它检查 CVS 存储库并使用 shell 脚本和 build.xml 来编译并使用 Interwoven OpenDeploy（本质上是 rsync）部署到请求的服务器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-02T20:28:36.517

大多数结构看起来与上面提到的结构相似，只是有细微的变化。我们使用 MAVEN 来构建和部署。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-06-17T19:43:37.347

与上述非常相似（没有 Maven）。加上 groovy 目录 - 我们使用大量 groovy 脚本来执行部署/构建相关任务（Ant 与 Antbuilder 结合使用）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-04T13:33:34.010

这是我们使用的布局：

root
 src (java src)
 test/src (unit test)
 build (由 ant 创建的目录)
   classes
   config
   javadoc
   lib
   liveconfig
 buildlib (用于构建的库)
 config
 install (保存用于不同 IDE 的项目)
 j2ee-apps
 lib (由应用程序）
 sql
   oracle
   数据
   安装（表、索引等）
   设置（创建表空间、用户等）
   卸载
   增量（开发期间的更改）

# c# - 微不足道的属性曾经拯救过你的培根吗？

> ID：205568
> 
> 赞同：21
> 
> 时间：2008-10-15T17:05:42.187
> 
> 标签：c#, .net

那里有很多建议，你不应该公开你的字段，而是使用琐碎的属性。我一遍又一遍地看到它。

我理解这些论点，但[我认为在大多数情况下这不是一个好建议](https://stackoverflow.com/questions/174198/c35-automatic-properties-why-not-access-the-field-directly#205567)。

有没有人有一个真正重要的时间的例子？当编写一个微不足道的属性使未来的重要事情成为可能时（或者当没有使用一个让他们陷入真正的麻烦时）？

编辑： DataBinding 参数是正确的，但不是很有趣。这是 DataBinding 代码中的一个错误，它不接受公共字段。所以，我们必须编写属性来解决这个错误，而不是因为属性是一个明智的类设计选择。

编辑：要清楚，我正在寻找现实世界的例子，而不是理论。真正重要的时候。

编辑：在设置器上设置断点的能力似乎很有价值。为调试器设计我的代码是不幸的：我宁愿调试器变得更聪明，但鉴于我们拥有的调试器，我会采用这种能力。好东西。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2008-10-16T01:38:33.260

在不确定的未来可能很难让代码工作，但这不是懒惰的借口。在字段上编码属性是约定俗成的，也是务实的。称之为防御性编程。

其他人也会抱怨存在速度问题，但 JIT'er 足够聪明，可以让它与暴露公共领域一样快。足够快，我永远不会注意到。

想到的一些不平凡的事情

1.  公共字段是完全公共的，您不能强加只读或只写语义
2.  一个属性可以有不同`get`的可`set`访问性（例如公共获取、内部集）
3.  您不能覆盖字段，但可以拥有虚拟属性。
4.  您的班级无法控制公共领域
5.  您的班级可以控制该属性。它可以将设置限制在允许的值范围内，标记状态已更改，甚至延迟加载值。
6.  反射语义不同。公共字段不是属性。
7.  正如其他人指出的那样，没有数据绑定。（这对您来说只是一个错误。-我可以理解为什么 .net 框架设计者不支持他们不赞成的模式。）
8.  不能在接口上放置字段，但可以在接口上放置属性。
9.  您的财产甚至不需要存储数据。您可以创建外观并分派到包含的对象。

为了正确起见，您只需输入额外的 13 个字符。这似乎不像是推测性的普遍性。存在语义差异，如果没有别的，属性具有不同的语义含义，并且比公共字段灵活得多。

```
 public string Name { get; set; }
 public string name; 
```

我确实记得有一次第一次使用 .net 时，我将一些类编码为字段，然后出于某种原因我需要将它们作为属性，这完全是浪费时间，因为我本可以一开始就做对时间。

那么你有什么理由*不*遵守约定呢？为什么你觉得有必要逆流而上？不这样做，它拯救了你什么？

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2008-10-15T17:17:32.053

我以前也这么想，杰。如果属性只是为了提供对私有成员的*直接*访问，为什么还要使用它？如果您可以将其描述为自动属性，那么拥有属性而不是字段似乎有点愚蠢。即使您需要更改实现，您也可以稍后重构为真实属性，并且任何依赖代码仍然可以工作，对吧？好吧，也许不是。

你看，我最近看到了微不足道的属性，所以也许现在我可以帮助你做同样的事情。

最终说服我的是相当明显的一点（回想起来），.Net 中的属性只是 getter 和 setter 方法的语法糖，而这些方法的*名称*与属性本身不同。同一程序集中的代码仍然可以工作，因为无论如何您都必须同时重新编译它。但是，如果您将字段重构为属性，则链接到您的其他程序集中的任何代码都将*失败*，除非同时针对您的新版本重新编译它。如果它从一开始就是一个属性，那么一切都很好。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2008-10-15T17:21:29.563

在调试时，我有一个微不足道的属性救了我几次。.Net 不支持数据断点（读取或写入）的概念。有时在调试非常复杂的场景时，跟踪对特定属性的读/写很重要。这对于属性很容易，但对于字段则不可能。

如果您不在生产环境中工作，则可以很简单地重构字段 -> 属性以进行调试。尽管有时您会遇到仅在难以用新二进制文件修补的生产环境中重现的错误。物业可以在这里拯救你。

不过，这是一个相当受限的场景。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2008-10-15T18:33:19.200

我将用另一个问题来回答您的问题：您是否真的从不公开所有类型和成员中受益？我怀疑我这样做并没有直接防止任何错误。但是，我已经正确封装了我的类型，只公开了应该公开的内容。属性是相似的——好的设计比什么都重要。我认为属性在概念上与字段不同。它们是合同的一部分，而不是从根本上成为实施的一部分。将它们视为属性而不是字段有助于我更清楚地思考我的设计，从而产生更好的代码。

哦，我偶尔会从不破坏源代码兼容性、能够设置断点、日志访问等中受益。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2008-10-15T17:10:04.970

部分想法是，这些属性在未来可能不会微不足道 - 如果您将外部代码绑定到一个字段，然后想将其包装在一个属性中，那么所有依赖代码都必须更改，您可能无法要做到这一点，尤其是在您是控件设计者或拥有无法控制的库等情况下。

更不用说某些 .NET 实践不允许您使用字段 - 特别是数据绑定。

我相信还有其他充分的理由。为什么这对你很重要？使用自动属性并完成它。对我来说似乎不值得关心的事情......

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-10-15T17:22:15.787

如果字段由属性访问器包装，则调试涉及字段的问题要容易得多。在访问器中放置断点可以很快帮助找到重入和其他可能无法捕获的问题。通过访问器对字段的所有访问进行编组，您可以准确地确定谁在何时更改什么。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-10-15T17:24:38.123

在 .NET 中，据我了解，您不能将数据绑定到公共字段；但仅限于属性。因此，如果你想做数据绑定，你别无选择。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-10-15T17:19:22.033

我曾经有过我想从项目的窗口中公开的字段，它允许程序的统计信息（TotalItems 和 Successitems）。

后来我决定在表单上显示统计信息，并能够在设置器中添加一个调用，以在属性更改时更新显示。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-10-15T17:35:18.337

显然，如果您没有创建共享类库，也没有使用 DataBinding，那么使用字段不会给您带来任何问题。

但是，如果您正在创建一个共享类库，恕我直言，除了遵循指南之外，您会很愚蠢，因为通常有以下三个原因：

*   共享类库的使用者可能想要使用 DataBinding。

*   共享类的使用者可能需要二进制兼容性，如果从字段切换到属性，这是不可能的。

*   最不意外的原则意味着您应该与包括 .NET Framework 本身在内的其他共享类库保持一致。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-10-15T17:55:51.913

恕我直言，没有像人们所说的那样微不足道的财产。通过诸如数据绑定之类的工作方式，微软暗示作为对象公共接口一部分的任何数据位都应该是属性。我不认为他们意味着它仅仅是一种约定，就像其他一些语言中的属性语法更多地是关于约定和便利的。

一个更有趣的问题可能是：“我什么时候应该使用公共字段而不是属性”，或者“什么时候有一个公共字段而不是公共属性保存了你的培根？”

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-11-14T19:01:26.223

结构类型的字段允许直接访问其成员，而此类类型的属性则不允许。因此，如果`Thing.Boz`是 type 的字段`Point`，想要修改其`X`值的代码可以简单地说`Thing.Boz.X += 5;`; 如果`Thing.Boz`是可变属性，则有必要使用`var tmp = Thing.Boz; tmp.X += 5; Thing.Boz = tmp;`. 用暴露的字段更干净地写东西的能力通常是一种祝福，*但并非总是如此。*

如果它总是可以`Boz`成为一个字段，那么直接修改它的成员将比将它复制到一个临时变量、修改它并复制回来更干净、更快、更好。如果类型的类型`Boz`直接暴露其可变字段（作为结构应该）而不是将它们包装在琐碎的包装器中，那么也可以`Interlocked`在它们上使用方法之类的东西——这对于属性来说是根本不可能的。以这种方式使用字段实际上只有一个缺点：如果需要用属性替换字段，则依赖于字段的代码将中断，并且可能难以修复。

简而言之，我会假设，如果一个人不关心能够在不重新编译任何消费者的情况下交换不同版本的代码，使用属性而不是字段的最大效果是防止代码消费者编写将利用（并依赖）结构类型的暴露字段的语义的代码。

顺便说一句，公开结构类型字段的替代方法是公开`ActOnXXX`方法。例如：

```
delegate void ActionByRef<T1>(ref T1 p1);
delegate void ActionByRef<T1,T2>(ref T1 p1, ref T2 p2);
delegate void ActionByRef<T1,T2,T3>(ref T1 p1, ref T2 p2, ref T3 p3);
// Method within the type that defines property `Boz`
void ActOnBoz<T1>(ActionByRef<Point, T1> proc, ref T1 p1)
{
  proc(ref _Boz, ref p1); // _Boz is the private backing field
} 
```

想要添加一些局部变量`q`的代码`Thing.Boz.X`可以调用`Thing.ActOnBoz((ref Point pt, ref int x) => {pt.X += x;}, ref q);`并直接在 上执行操作`Thing._Boz`，即使该字段未公开。

# java - 在运行时，查找 Java 应用程序中扩展基类的所有类

> ID：205573
> 
> 赞同：160
> 
> 时间：2008-10-15T17:07:27.050
> 
> 标签：java, reflection, inheritance

我想做这样的事情：

```
List<Animal> animals = new ArrayList<Animal>();

for( Class c: list_of_all_classes_available_to_my_app() )
   if (c is Animal)
      animals.add( new c() ); 
```

所以，我想查看我的应用程序宇宙中的所有类，当我找到一个源自 Animal 的类时，我想创建一个该类型的新对象并将其添加到列表中。这使我无需更新事物列表即可添加功能。我可以避免以下情况：

```
List<Animal> animals = new ArrayList<Animal>();
animals.add( new Dog() );
animals.add( new Cat() );
animals.add( new Donkey() );
... 
```

使用上述方法，我可以简单地创建一个扩展 Animal 的新类，它会自动被拾取。

更新：2008 年 10 月 16 日上午 9:00 太平洋标准时间：

这个问题已经产生了很多很好的回应——谢谢。 ~~从回复和我的研究中，我发现我真正想做的事情在 Java 下是不可能的。有一些方法，例如 ddimitrov 的 ServiceLoader 机制可以工作——但它们对于我想要的来说非常繁重，我相信我只是将问题从 Java 代码转移到外部配置文件。~~ **2019 年 5 月 10 日更新**（11 年后！）根据@IvanNik 的[回答](https://stackoverflow.com/a/9240969/9648) [org.reflections](https://github.com/ronmamo/reflections)看起来不错，现在有几个库可以帮助解决这个问题。@Luke Hutchison 的[答案中的](https://stackoverflow.com/a/51625104/9648)[ClassGraph](https://github.com/classgraph/classgraph)看起来也很有趣。答案中还有更多的可能性。

陈述我想要的另一种方式：我的 Animal 类中的静态函数查找并实例化从 Animal 继承的所有类——无需任何进一步的配置/编码。如果我必须配置，我还不如在 Animal 类中实例化它们。我理解，因为 Java 程序只是 .class 文件的松散联合，所以它就是这样。

有趣的是，这在 C# 中似乎[相当微不足道。](http://my.safaribooksonline.com/0596003390/csharpckbk-CHP-12-SECT-8)

* * *

## 回答 #1

> 赞同：171
> 
> 时间：2012-02-11T14:29:32.627

我使用[org.reflections](https://github.com/ronmamo/reflections)：

```
Reflections reflections = new Reflections("com.mycompany");    
Set<Class<? extends MyInterface>> classes = reflections.getSubTypesOf(MyInterface.class); 
```

另一个例子：

```
public static void main(String[] args) throws IllegalAccessException, InstantiationException {
    Reflections reflections = new Reflections("java.util");
    Set<Class<? extends List>> classes = reflections.getSubTypesOf(java.util.List.class);
    for (Class<? extends List> aClass : classes) {
        System.out.println(aClass.getName());
        if(aClass == ArrayList.class) {
            List list = aClass.newInstance();
            list.add("test");
            System.out.println(list.getClass().getName() + ": " + list.size());
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2008-10-15T23:38:31.910

做你想做的事的 Java 方法是使用[ServiceLoader](http://java.sun.com/javase/6/docs/api/java/util/ServiceLoader.html)机制。

还有许多人通过在众所周知的类路径位置（即 /META-INF/services/myplugin.properties）中创建一个文件，然后使用[ClassLoader.getResources()](http://docs.oracle.com/javase/8/docs/api/java/lang/ClassLoader.html#getResources-java.lang.String-)从所有 jar 中枚举具有此名称的所有文件来创建自己的文件。这允许每个 jar 导出自己的提供程序，您可以使用 Class.forName() 通过反射实例化它们

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2008-10-15T21:07:09.577

从面向方面的角度考虑这一点；实际上，您想要做的是知道在运行时扩展了 Animal 类的所有类。（我认为这比您的标题更准确地描述了您的问题；否则，我认为您没有运行时问题。）

所以我认为你想要的是创建一个基类（Animal）的构造函数，它将被实例化的当前类的类型添加到你的静态数组（我更喜欢 ArrayLists，我自己，但每个人自己）。

所以，大致;

```
public abstract class Animal
    {
    private static ArrayList<Class> instantiatedDerivedTypes;
    public Animal() {
        Class derivedClass = this.getClass();
        if (!instantiatedDerivedClass.contains(derivedClass)) {
            instantiatedDerivedClass.Add(derivedClass);
        }
    } 
```

当然，您需要 Animal 上的静态构造函数来初始化instanceatedDerivedClass ...我认为这会做您可能想要的。请注意，这取决于执行路径；如果你有一个从 Animal 派生的 Dog 类，它永远不会被调用，那么你的 Animal Class 列表中就不会有它。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2008-10-15T18:41:04.693

不幸的是，这并不完全可能，因为 ClassLoader 不会告诉您哪些类可用。但是，您可以非常接近地执行以下操作：

```
for (String classpathEntry : System.getProperty("java.class.path").split(System.getProperty("path.separator"))) {
    if (classpathEntry.endsWith(".jar")) {
        File jar = new File(classpathEntry);

        JarInputStream is = new JarInputStream(new FileInputStream(jar));

        JarEntry entry;
        while( (entry = is.getNextJarEntry()) != null) {
            if(entry.getName().endsWith(".class")) {
                // Class.forName(entry.getName()) and check
                //   for implementation of the interface
            }
        }
    }
} 
```

**编辑：** johnstok 是正确的（在评论中），这仅适用于独立的 Java 应用程序，并且不适用于应用程序服务器。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2018-08-01T03:51:24.367

列出给定类的所有子类的最强大的机制目前是[ClassGraph](https://github.com/classgraph/classgraph/wiki/Code-examples)，因为它处理[最广泛的类路径规范机制](https://github.com/classgraph/classgraph/wiki/Classpath-Specification-Mechanisms)，包括新的 JPMS 模块系统。（我是作者。）

```
List<Class<Animal>> animals;
try (ScanResult scanResult = new ClassGraph().whitelistPackages("com.zoo.animals")
        .enableClassInfo().scan()) {
    animals = scanResult
        .getSubclasses(Animal.class.getName())
        .loadClasses(Animal.class);
} 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-11-21T12:07:50.730

如果您需要简单快速的东西而不重构任何现有代码，您可以使用[Stripes 框架中的](http://www.stripesframework.org/)[ResolverUtil](http://grepcode.com/file/repo1.maven.org/maven2/net.sourceforge.stripes/stripes/1.5.7/net/sourceforge/stripes/util/ResolverUtil.java)（[原始源](http://grepcode.com/file_/repo1.maven.org/maven2/net.sourceforge.stripes/stripes/1.5.7/net/sourceforge/stripes/util/ResolverUtil.java/?v=source)代码） 。

这是一个没有加载任何类的简单示例：

```
package test;

import java.util.Set;
import net.sourceforge.stripes.util.ResolverUtil;

public class BaseClassTest {
    public static void main(String[] args) throws Exception {
        ResolverUtil<Animal> resolver = new ResolverUtil<Animal>();
        resolver.findImplementations(Animal.class, "test");
        Set<Class<? extends Animal>> classes = resolver.getClasses();

        for (Class<? extends Animal> clazz : classes) {
            System.out.println(clazz);
        }
    }
}

class Animal {}
class Dog extends Animal {}
class Cat extends Animal {}
class Donkey extends Animal {} 
```

这也适用于应用程序服务器，因为这是它设计工作的地方；）

该代码基本上执行以下操作：

*   遍历您指定的包中的所有资源
*   只保留以 .class 结尾的资源
*   使用加载这些类`ClassLoader#loadClass(String fullyQualifiedName)`
*   检查是否`Animal.class.isAssignableFrom(loadedClass);`

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-10-15T17:55:20.387

Java 动态加载类，因此您的类将只有那些已经加载（但尚未卸载）的类。也许您可以使用自定义类加载器来检查每个加载的类的超类型。我认为没有 API 可以查询加载的类集。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-04-07T19:44:44.687

用这个

```
public static Set<Class> getExtendedClasses(Class superClass)
{
    try
    {
        ResolverUtil resolver = new ResolverUtil();
        resolver.findImplementations(superClass, superClass.getPackage().getName());
        return resolver.getClasses();  
    }
    catch(Exception e)
    {Log.d("Log:", " Err: getExtendedClasses() ");}

    return null;
}

getExtendedClasses(Animals.class); 
```

编辑：

*   (ResolverUtil) 库：[条纹](http://www.java2s.com/Code/Jar/s/Downloadstripes155jar.htm)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-10-15T19:04:01.917

感谢所有回答这个问题的人。

看来这确实是一个难以破解的难题。我最终放弃并在我的基类中创建了一个静态数组和吸气剂。

```
public abstract class Animal{
    private static Animal[] animals= null;
    public static Animal[] getAnimals(){
        if (animals==null){
            animals = new Animal[]{
                new Dog(),
                new Cat(),
                new Lion()
            };
        }
        return animals;
    }
} 
```

似乎 Java 并没有像 C# 那样为自我发现而设置。我想问题在于，由于 Java 应用程序只是某个目录/jar 文件中的 .class 文件的集合，因此运行时在引用它之前不知道一个类。那时加载器加载它——我想要做的是在我引用它之前发现它，如果不去文件系统并查看它是不可能的。

我总是喜欢可以发现自己的代码，而不是我不得不告诉它自己，但唉，这也行得通。

再次感谢！

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-02-10T05:23:24.463

使用[OpenPojo](http://openpojo.com)，您可以执行以下操作：

```
String package = "com.mycompany";
List<Animal> animals = new ArrayList<Animal>();

for(PojoClass pojoClass : PojoClassFactory.enumerateClassesByExtendingType(package, Animal.class, null) {
  animals.add((Animal) InstanceFactory.getInstance(pojoClass));
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-10-15T18:52:00.753

这是一个棘手的问题，您需要使用静态分析来找出这些信息，它在运行时不容易获得。基本上获取您的应用程序的类路径并扫描可用的类并读取它继承的类的字节码信息。请注意，类 Dog 可能不直接继承自 Animal，但可能继承自 Pet，而 Pet 又继承自 Animal，因此您需要跟踪该层次结构。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-10-15T19:29:37.870

一种方法是让类使用静态初始化器......我不认为这些是继承的（如果它们是它将不起作用）：

```
public class Dog extends Animal{

static
{
   Animal a = new Dog();
   //add a to the List
} 
```

它要求您将此代码添加到所有涉及的类中。但它避免了在某个地方出现一个大而丑陋的循环，测试每个寻找 Animal 的子类的类。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2011-04-29T12:15:12.787

我使用包级别注释非常优雅地解决了这个问题，然后将该注释作为参数作为类列表。

[查找实现接口的 Java 类](https://stackoverflow.com/questions/435890/find-java-classes-implementing-an-interface/5831808#5831808)

实现只需要创建一个 package-info.java 并将魔术注释与他们想要支持的类列表一起放入。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-05-03T18:43:45.667

由于`newInstance()`不推荐直接使用，因此您可以使用[Reflections](https://github.com/ronmamo/reflections)以这种方式进行。

```
Reflections r = new Reflections("com.example.location.of.sub.classes")
Set<Class<? extends Animal>> classes = r.getSubTypesOf(Animal.class);

classes.forEach(c -> {
    Animal a = c.getDeclaredConstructor().newInstance();
    //a is your instance of Animal.
}); 
```

# asp.net-mvc - 如何在 ASP.NET 路由中使用查询字符串？

> ID：205582
> 
> 赞同：1
> 
> 时间：2008-10-15T17:10:42.910
> 
> 标签：asp.net-mvc, routing, query-string

新的 ASP.NET 路由非常适合简单的路径样式 URL，但如果您想使用如下 URL：

[http://example.com/items/search.xhtml?term=Text+to+find&page=2](http://example.com/items/search.xhtml?term=Text+to+find&page=2)

您是否必须在验证中使用 catch all 参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-15T17:20:48.647

您也可以将查询字符串参数与路由匹配，如果您只想捕获添加参数所需的所有内容，如下所示：

{*contentUrl}

这会将 url 的其余部分填充到该变量中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-16T08:11:27.333

路由中未列出的任何视图数据项都会自动映射到查询字符串，因此如果将“items/search.xhtml”映射到操作：

```
Search(string term, int page) 
```

然后你应该得到你正在寻找的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-10-11T11:49:16.953

我也无法将编码的 URL 作为路由参数传递给路由。

您不能在 URL 中使用 url 编码字符，但可以在查询字符串中使用。

因此，我需要我的路线也有一个查询字符串元素。

假设我有一条路线：

```
MapPageRoute("myroute", "myroute/{x}", "~/routehander.aspx") 
```

但我希望它采用以下形式：

```
http://mywebsite.com/myroute/{x}?url=myurl 
```

我们可以完成这个：

```
Dim x as integer = 12
Dim rvd As New Routing.RouteValueDictionary
rvd.Add("x", x)
rvd.Add("url", Server.UrlEncode("/default.aspx"))
HttpContext.Current.ApplicationInstance.Response.RedirectToRoutePermanent("myroute", rvd) 
```

这会将我们重定向到以下网址：

```
http://mywebsite.com/myroute/12?url=%252fdefault.aspx 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-03-12T19:40:11.783

你仍然可以使用`Request.QueryString["some_value"];`

# sql-server - sql server 2005 附加数据库损坏

> ID：205583
> 
> 赞同：1
> 
> 时间：2008-10-15T17:10:48.493
> 
> 标签：sql-server

我需要重现一个错误，另一个团队的一个人从他的 sql server 2005 实例中向我发送了一个 .mdf 和 .ldf 文件。当我附加数据库时，我得到的只是空表，即使文件是 2 mb 大。db 包含 2 个表，其中包括一个 varbinary(max) 字段。同时，另一个在表中没有 varbinaries 的数据库已正确连接，并且数据已就位。数据无法访问的可能原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-10-15T17:23:35.457

在 2MB 时，该文件可能是合法的空文件。我所知道的 SQL 备份中没有 blob 字段排除项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-15T17:23:45.753

也许他给你发了一个空表的数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-15T17:24:31.447

确保附加文件具有正确的安全性，以便 SQL Server 访问它们，并且您有权在 SQL Server 本身中读取附加的数据库。

# c# - 如何在编辑 .aspx 文件时使用 Visual Studio 的“代码片段”功能？

> ID：205594
> 
> 赞同：7
> 
> 时间：2008-10-15T17:13:56.413
> 
> 标签：c#, asp.net, visual-studio

在编辑 c# 代码时，我大量使用 Visual Studio 的“代码片段”功能。我一直希望我可以在输入我的 aspx 标记时使用它们。

有没有办法在 aspx 文件编辑器窗口中启用代码片段？

是否有任何第三方工具可以执行此操作？

如果您熟悉代码片段定义，这正是我想做的事情的类型：

```
<asp:TextBox ID="$var$TextBox" Text="$text$" OnClick="$var$_Click" runat="server" /> 
```

*我可以激活片段，两次制表符，然后继续！*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-15T17:21:28.380

那将是辉煌的！我会推荐[世界上最简单的代码生成器](http://secretgeek.net/wscg.htm)，或者 CodeSmith，或者[T4](http://www.hanselman.com/blog/T4TextTemplateTransformationToolkitCodeGenerationBestKeptVisualStudioSecret.aspx)（虽然我还没有尝试过）。不完全按照您的意愿行事，但它确实让它更容易一些

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-15T17:25:27.310

也许您可能会考虑尝试[Coderush](http://devexpress.com/coderush)，它提供的功能比 VS 中的基本代码片段要多得多。它的模板工具可以在 vb、cs、aspx、html、xml 和 sql 文件中运行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-03T20:28:29.510

**CodeRush Express**现已**免费**，您可以从此[链接下载](http://devexpress.com/Products/Visual_Studio_Add-in/CodeRushX/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-11-05T01:08:43.407

在 PDC 2008 上，来自 Microsoft 的 Jeff King 展示了下一个 Visual Studio 2010 中出现的 HTML Snippets 功能的演示。但是，我再次投票支持更强大的 CodeRush，您现在可以使用它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-03T20:23:44.793

由于我买不起 CodeRush 的 249 美元，我开始尝试构建一个 VisualStudio 插件。

这个人已经为我做了这个：http: [//ardentdev.com/blog/index.php/aspxedithelper](http://ardentdev.com/blog/index.php/aspxedithelper)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-10-15T17:40:46.937

@Rory-Becker Coderush 正是我一直在寻找的！

我之前发布过 Coderush 的售价为 99 美元，但它的售价为 249 美元。

@哈里约特

Codesmith 有一个叫做 Active Snippets 的东西。它只附带专业版，售价 399 美元

[http://www.codesmithtools.com/features/comparison.aspx](http://www.codesmithtools.com/features/comparison.aspx)

# asp.net - ASP.Net 应用程序中的所有页面是否都在同一个 appdomain 中运行？

> ID：205601
> 
> 赞同：1
> 
> 时间：2008-10-15T17:15:54.130
> 
> 标签：asp.net, appdomain

我知道请求由不同的线程提供服务，但它们是否也都来自同一个应用程序域？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-15T17:16:51.850

是的，他们是。这就是一个 web.config 服务于整个 Web 应用程序范围的方式。每个 appdomain 一个配置文件是一个很好的线索。

# mysql - 如何将 MySQL root 密码更改为默认密码？

> ID：205614
> 
> 赞同：6
> 
> 时间：2008-10-15T17:19:09.100
> 
> 标签：mysql, sysadmin

**我的MySQL**初始安装没有 root 密码。我为root分配了密码，一切正常。由于某种原因（不要问为什么），我不得不恢复到 root 没有任何密码的原始设置。

我将 root 密码更改为`'' (empty string)`. 现在的问题是 MySQL 不使用 运行`'mysql -uroot'`，它需要密码。在密码提示符下运行`'mysql -uroot -p'`并按回车键让我进入数据库，但与默认设置不同。

是否有任何其他我缺少设置/取消设置的标志/设置来告诉 mysql 不要期望密码？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-10-15T17:33:06.390

**如何重置 MySQL root 密码：**

要重置它，请参阅MySQL 手册中的[如何重置 Root 密码](http://dev.mysql.com/doc/refman/5.0/en/resetting-permissions.html)。

**如何在没有密码控制访问的情况下运行 MySQL**

要在禁用密码控制的情况下运行 MySQL，请查看[--skip-grant-tables](http://dev.mysql.com/doc/refman/5.0/en/server-options.html#option_mysqld_skip-grant-tables)选项。

**如何避免在命令行上输入凭据**

如果您只是想避免在 mysql 命令行上输入密码，请在您的主目录中创建一个名为 .my.cnf 的文件（注意该文件名的前导句点！）。在您的情况下，对于 root 用户，可能是 /root

将以下条目添加到文件中

```
[client]
host=localhost
user     = root
password = mypassword
database = mydatabase 
```

您通常会 chmod 600 这个文件，以便只有您可以看到它，并且 MySQL 将忽略一个 .my.cnf 无论如何都是世界可写的。

有关更多信息，请参见[使用选项文件](http://dev.mysql.com/doc/refman/5.0/en/option-files.html)手册页

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-23T11:55:13.827

MySql 提高了安全性，一方面是好的。

您可以查看此链接以获取有关如何在多个 MySql 版本上重置密码的信息。

[https://www.digitalocean.com/community/tutorials/how-to-reset-your-mysql-or-mariadb-root-password](https://www.digitalocean.com/community/tutorials/how-to-reset-your-mysql-or-mariadb-root-password)

# c# - 使用 Outlook 遍历联系人属性

> ID：205624
> 
> 赞同：0
> 
> 时间：2008-10-15T17:21:36.663
> 
> 标签：c#, .net, outlook, vsto

我想遍历联系人属性并将包含“数字”一词的属性添加到具有该值的列表中，我尝试使用反射但它不起作用。

```
using System;
using System.Collections;
using System.Collections.Generic;
using System.Reflection;
using Microsoft.Office.Interop.Outlook;

namespace DuplicateNumbers
{
    public class ContactService
    {
        public ContactItem Contact { get; private set; }

        private IDictionary<string,string> phoneNumbers = new Dictionary<string, string>();

        public ContactService(ContactItem contact)
        {
            Contact = contact;
        }

        public IDictionary<string,string> PhoneNumbers
        {
            get
            {
                if(phoneNumbers.Count == 0)
                {
                    PopulatePhoneNumbers();
                }
                return phoneNumbers;
            }
        }

        private void PopulatePhoneNumbers()
        {
            _ContactItem ci = Contact as _ContactItem;
            MemberInfo[] members = ci.GetType().FindMembers(MemberTypes.All, BindingFlags.Instance, (m,criteria) => true, null);
            foreach (var info in members)
            {
                if(info.Name.Contains("Number"))
                {
                    phoneNumbers.Add(info.Name,info.Value);
                }
                Console.WriteLine(info);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-23T21:41:45.977

尝试使用 MAPI CDO。

这是一个可以帮助您入门的微软网站：[如何使用 CDO 读取 MAPI 地址](http://support.microsoft.com/default.aspx?scid=kb;EN-US;179083)

这里有一些 MAPI 博客也可以提供帮助：

*   [史蒂文格里芬](http://blogs.msdn.com/stephen_griffin/)
*   [马特·斯特勒](http://blogs.msdn.com/mstehle/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-16T04:13:37.797

因为它不起作用——它是一个 COM 对象。您应该使用 CDO 空间中的属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-07T07:17:57.993

这似乎能够访问 Outlook.ContactItem 属性。 [枚举 Outlook ContactItem 属性](https://stackoverflow.com/questions/1323069/enumerating-outlook-contactitem-properties)

# javascript - Javascript - 事件点击时页面上的加载/忙碌指示器或透明 div

> ID：205631
> 
> 赞同：9
> 
> 时间：2008-10-15T17:23:14.523
> 
> 标签：javascript, css

我有一个客户端javascript函数，它在按钮单击时触发（基本上，它是一个计算器！！）。有时，由于页面上的大量数据，javascript 计算器功能需要很长时间并且使页面对用户显示为非活动状态。我打算在整个页面上显示一个透明的 div，可能有一个繁忙的指示器（在中心），直到计算器功能结束，以便用户等待进程结束。

```
函数CalculateAmountOnClick() {
  //显示透明div

  // 我的耗时循环！
    {

    }

  // 移除透明 div

}

```

关于如何解决这个问题的任何想法？当我的计算器功能启动时，我是否应该使用 javascript 将 css 类分配给 div（围绕我的整个页面的内容）？我试过了，但没有得到想要的结果。在 IE 6 中面临透明度问题。此外，我将如何在如此透明的 div 中显示加载消息 + 图像？

TIA

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-10-15T17:59:10.347

Javacript 来展示一个帷幕：

```
function CalculateAmountOnClick () {
  var curtain = document.body.appendChild( document.createElement('div') );
  curtain.id = "curtain";
  curtain.onkeypress = curtain.onclick = function(){ return false; }
  try {
    // your operations
  }
  finally {
    curtain.parentNode.removeChild( curtain );
  }
} 
```

你的 CSS：

```
#curtain {
  position: fixed;
  _position: absolute;
  z-index: 99;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  _height: expression(document.body.offsetHeight + "px");
  background: url(curtain.png);
  _background: url(curtain.gif);
} 
```

（根据需要将 MSIE 6 下划线 hack 移动到有条件包含的文件。）

您可以将其设置为窗帘的添加/删除功能，或作为包装器：

```
function modalProcess( callback ) {
  var ret;
  var curtain = document.body.appendChild( document.createElement('div') );
  curtain.id = "curtain";
  curtain.onkeypress = curtain.onclick = function(){ return false; }
  try {
    ret = callback();
  }
  finally {
    curtain.parentNode.removeChild( curtain );
  }
  return ret;
} 
```

然后你可以这样调用：

```
var result = modalProcess(function(){
  // your operations here
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-10-17T02:32:44.023

我将在这里做一些沉重的假设，但在我看来正在发生的事情是因为您在设置窗帘元素后立即通过密集处理直接锁定浏览器，浏览器永远没有机会绘制窗帘。

每次更新 DOM 时浏览器都不会重绘。它可能会看看你是否正在做更多的事情，然后画出需要的东西（浏览器为此改变了他们的方法）。因此，在这种情况下，它可能仅在移除窗帘后才会刷新显示，或者您通过滚动强制重绘。

一个公平的警告：这种密集的处理对你来说不是很好，因为它不仅锁定了你的页面。因为浏览器通常只为所有选项卡实现一个 Javascript 线程，所以您的处理将锁定所有打开的选项卡（= 浏览器）。此外，您还冒着执行超时和浏览器简单地停止脚本的风险（这可能低至 5 秒）。

这是一种解决方法。

如果您可以将处理分成更小的块，则可以超时运行它（以允许浏览器呼吸空间）。像这样的东西应该工作：

```
function processLoop( actionFunc, numTimes, doneFunc ) {
  var i = 0;
  var f = function () {
    if (i < numTimes) {
      actionFunc( i++ );  // closure on i
      setTimeout( f, 10 )
    } 
    else if (doneFunc) { 
      doneFunc();
    }
  };
  f();
}

// add a curtain here
processLoop(function (i){
  // loop code goes in here
  console.log('number: ', i);
}, 
10,  // how many times to run loop
function (){
  // things that happen after the processing is done go here
  console.log('done!');
  // remove curtain here
}); 
```

这本质上是一个 while 循环，但循环的每次迭代都是在一个定时间隔内完成的，因此浏览器有一点时间在两者之间进行呼吸。但是它会减慢处理速度，并且之后完成的任何工作都需要进入回调，因为循环运行独立于对 processLoop 的调用之后可能发生的任何事情。

另一个变化是设置窗帘，使用 setTimeout 调用您的处理函数以允许浏览器有时间拉窗帘，然后在完成后将其移除。

```
// add a curtain
var curtain = document.body.appendChild( document.createElement('div') );
curtain.id = "curtain";
curtain.onkeypress = curtain.onclick = function(){ return false; }
// delay running processing
setTimeout(function(){
  try {
    // here we go...
    myHeavyProcessingFunction();
  }
  finally {
    // remove the curtain
    curtain.parentNode.removeChild( curtain );
  }
}, 40); 
```

如果您使用的是 js-library，您可能想查看一个现成的用于创建窗帘的解决方案。大多数库都应该存在这些，[这是 jQuery 的一个](http://www.malsup.com/jquery/block/)，它们可以帮助处理 CSS。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-15T17:30:37.470

我会做类似的事情：

1.  取消隐藏 div ( `display:inline`)
2.  使`position:absolute`
3.  给它一个`z-index:99`
4.  制作高度和宽度`100%`
5.  处理完成时设置`display:none`

要使其透明，您必须设置在 Firefox、IE 等中不同的不透明度。

要显示加载图标，您始终可以创建第二个 div 并将其放置在页面上您想要的位置。加载完成后，将其与透明的一起删除。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-15T17:40:38.433

除了以上所有内容之外，不要忘记在 shim 后面放置一个不可见的 iframe，以便它显示在 IE 中的选择框上方。

编辑：这个站点，虽然它为更复杂的问题提供了解决方案，但确实涵盖了创建模态背景。 [http://www.codeproject.com/KB/aspnet/ModalDialogV2.aspx](http://www.codeproject.com/KB/aspnet/ModalDialogV2.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-15T17:46:20.527

对于加载消息，我会使用`<div>`with ，使用and`position:absolute`定位它，并将显示设置为。`left``top``none`

当您想显示加载指示器时，您将不得不使用超时，否则在`div`处理完成之前不会显示。因此，您应该将代码修改为：

```
function showLoadingIndicator()
{
    // Display div by setting display to 'inline'
   setTimeout(CalculateAmountOnClick,0);
}

function CalculateAmountOnClick()
{
  // MY time consuming loop!
    {
    }
  // Remove transparent div 
} 
```

因为您设置了超时，所以页面将在耗时的循环发生之前重绘。

# sharepoint - 允许使用自定义代码的 SharePoint (MOSS) 托管

> ID：205635
> 
> 赞同：2
> 
> 时间：2008-10-15T17:24:02.773
> 
> 标签：sharepoint, hosting, moss

我正在寻找一个支持自定义解决方案 (.WSP) 部署的 SharePoint (MOSS) 共享主机提供商 - 如果它是中等信任度就可以了。我正在 SP 上构建一个公共 Internet 站点，而客户不想托管它或预先支付许可证费用。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-27T21:59:12.720

我不知道有任何支持部署自定义解决方案的共享托管计划。据我所知，您至少需要一个半专用托管计划。我是 Fpweb.net 的开发人员，我知道您可以使用他们的任何[半专用计划](http://www.fpweb.net/moss-hosting/moss-corporate.asp)来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-09-17T06:56:11.653

如果您正在寻找开发自定义 Sharepoint 页面，您可以考虑[ASPHostPortal.com](http://www.asphostportal.com)上的 sharepoint 计划。它们不仅允许中等信任，还允许完全信任模式，这当然允许您通过您可能拥有的任何 Sharepoint Designer 工具创建自定义页面。

# c# - 在 C# 中使用扩展方法时出错

> ID：205644
> 
> 赞同：59
> 
> 时间：2008-10-15T17:29:07.770
> 
> 标签：c#, .net-3.5, extension-methods

我遇到了一个问题，让我认为 3.0 框架中存在错误。当我尝试使用扩展方法时，出现以下错误：

```
Missing compiler required member
'System.Runtime.CompilerServices.ExtensionAttribute..ctor' 
```

使用此简单代码时：

```
public static class StringUtils {
    static void TestExtension(this String targetString) {

    }
} 
```

消除此编译错误的唯一方法是添加以下代码：

```
namespace System.Runtime.CompilerServices {
    public class ExtensionAttribute : Attribute { }
} 
```

自从我使用扩展方法以来已经有几个月了，但我很确定我不必这样做。有没有其他人遇到过这个问题？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2010-02-01T19:41:43.677

我有完全一样的问题。该错误`System.Runtime.CompilerServices.ExtensionAttribute..ctor`相当神秘，可能意味着许多不同的事情。

但是，对我来说，归结为我正在使用`Newtonsoft.Json.Net`. 我删除了对文件的引用`Newtonsoft.Json.Net20.dll`，然后重新添加了它。在此之后，我的解决方案再次构建。

最奇怪的是，当我试图通过使用 Subversion Diff 找出这个过程之后有什么不同时，似乎没有任何改变。

所以我真的不知道删除和重新添加这个引用到底做了什么，但它确实解决了我的构建问题，并解决了提问者提到的这个特定错误消息。

## *更新 1*：

对于那些再次遇到此问题的人，正如评论者指出的那样，解决此问题的正确方法是*[下载 Json.Net 的 ZIP](http://json.codeplex.com/releases/view/50552)，并且应该有一个 3.5 版本，在您使用 Json.Net 的每个地方重新引用 3.5 并删除旧引用，因为它可能引用了为旧版本的 .net 构建的程序集。*

## *更新 2*：

[Charlie Flowers](https://stackoverflow.com/users/80112/charlie-flowers)指出，用于 ​​3.5 的 DLL NewtonSoft 标签实际上不适用于 3.5。您必须使用他们标记为 .net 2.0 的 DLL

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2008-12-03T19:38:33.713

我自己也遇到了这个问题。就我而言，这是因为我将 VS 2005/.Net 2.0 项目转换为 VS 2008/.Net 3.5 项目。转换工具保留了对 System.Core 2.0 的引用，我找不到一种简单的方法来更改对 System.Core 3.5 的引用。

我最终在 VS 2008 中从头开始重新创建该项目，并且它是通过对 System.Core 3.5 的正确引用创建的

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2008-12-20T17:34:28.087

在 VS 中，单击项目（在文件、编辑、视图旁边），选择属性

然后在 Application 选项卡中（您会注意到您已经在 3.5 中），选择 Target Framework 为 2.0，然后编译（它会出错）。然后再放回3.5，再编译，错误就会消失

我认为这只是 Visual Studio 中的一个小故障，只是愚弄 IDE :-)

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2010-01-16T21:02:05.773

我在从 VS 2008 升级到 VS 2010 Beta 2 的类库项目中遇到了同样的问题。直到升级后我才向项目添加任何扩展方法，然后我开始看到同样的错误。

将具有以下代码的类添加到项目中解决了该问题：

```
namespace System.Runtime.CompilerServices
{
    public class ExtensionAttribute : Attribute { }
} 
```

在此博客上找到提示：[http ://blog.flexforcefive.com/?p=105](http://blog.flexforcefive.com/?p=105)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2008-10-15T17:34:04.080

您的框架对于扩展方法来说不够高。
这是使扩展方法在不使用 3.5 的情况下工作的[技巧](http://blogs.msdn.com/jaredpar/archive/2007/11/16/extension-methods-without-3-5-framework.aspx)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-10-15T17:34:12.707

您的目标是什么版本的 .NET？ExtensionAttribute 类在 System.Core.dll (.NET 3.5) 中提供，但如果您想在 .NET 2.0/3.0（显然是 C# 3.0）中使用扩展方法，您可以自己重新声明它。事实上，[LINQBridge 就是](http://www.albahari.com/nutshell/linqbridge.aspx)这样做的。

[更新] 但是，我有点困惑，因为您*应该*看到的错误是：

> 错误 1 ​​无法定义新的扩展方法，因为找不到编译器所需的类型“System.Runtime.CompilerServices.ExtensionAttribute”。您是否缺少对 System.Core.dll 的引用？[剪掉一些路径的东西]

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-10-15T21:54:38.297

缺少 System.Core 参考将给出这些症状。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-09-12T19:36:51.580

供持续参考：

在过去的两个小时里，我在 .Net 4.0 框架中与这个完全相同的错误消息作斗争，最后将其追踪到对 Microsoft.CSharp dll 的损坏引用。这是一个简单得令人沮丧的问题。我删除了有问题的引用并添加了对该 dll 的“新”引用，该 dll 位于：

```
C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\Microsoft.CSharp.dll 
```

希望这将节省其他人跟踪此错误消息的解决方案的时间和麻烦。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-02-23T12:51:18.960

这个问题确实是由对 System.Core 版本 2 的错误引用引起的。这通常是从早期版本的 .NET 升级到 .NET 3.5 时引起的。如果是您遇到此问题的网站，则可以按照以下步骤进行补救：

1) 在 web.config 中添加对 System.Core v3.5 的引用：

```
<assemblies>
   <add assembly="System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
</assemblies> 
```

2) 在 web.config 中添加以下内容作为配置的子项：

```
<configuration>
   <!--Some other config-->
   <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
         <assemblyIdentity name="System.Core" publicKeyToken="B77A5C561934E089"/>
         <bindingRedirect oldVersion="2.0.0.0-2.1.0.0" newVersion="3.5.0.0"/>
      </dependentAssembly>
   </assemblyBinding>
</configuration> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-10-15T17:36:15.167

扩展是在 C# 3.0 中引入的，而另一方面是在 .NET 3.5 中引入的，因此您不能真正在 .NET 3.0 中直接使用它们。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-10-15T17:48:20.307

这是一个网站项目，偶然吗？尝试将目标框架从 .NET 3.5 更改为早期版本，然后再改回 .NET 3.5。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-12-25T17:52:55.003

尝试：Project，Add Reference，在列表中找到System Core 3.5.0.0，确定添加。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2011-04-05T04:48:45.443

只需将您的 VS 项目定位到 .NET 框架 3.5 及更高版本。很可能您从以前的版本转换了您的项目。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2012-10-31T11:40:15.680

我有一个 Elmah.Sandbox 版本，它在现有的 .Net 4.0 项目中以 .net 2.0 为目标。我在我的项目中添加了一个扩展方法，构建失败并出现“缺少编译器所需的成员”错误消息。

Elmah.Sandbox dll 包含在 ElmahR 的早期版本中。一旦这个被删除，它就会重新构建。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-11-25T21:19:48.767

在我的例子中，原因是微软的 AntiXSSLibrary.dll 的 NET20 版本错误。替换为 NET35 - 错误消失了。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-04-05T09:25:52.040

编辑您的 csproj 并确保包含这些引用（它不会通过简单的“添加引用”...）：

```
<Reference Include="System" />
<Reference Include="System.Core" />
<Reference Include="System.Xml.Linq" />
<Reference Include="System.Data.DataSetExtensions" />
<Reference Include="Microsoft.CSharp" />
<Reference Include="System.Data" />
<Reference Include="System.Net.Http" />
<Reference Include="System.Xml" /> 
```

# groovy - 在 Groovy 闭包中模拟“继续”的最佳模式

> ID：205660
> 
> 赞同：69
> 
> 时间：2008-10-15T17:32:55.657
> 
> 标签：groovy, closures

似乎 Groovy 不支持`break`和`continue`from 闭包。模拟这种情况的最佳方法是什么？

```
revs.eachLine { line -> 
    if (line ==~ /-{28}/) {
         // continue to next line...
    }
} 
```

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2008-10-15T18:00:29.003

你只能支持干净地继续，不能打破。尤其是像 eachLine 和 each 这样的东西。无法支持中断与如何评估这些方法有关，没有考虑没有完成可以传达给方法的循环。以下是如何支持继续 -

最佳方法（假设您不需要结果值）。

```
revs.eachLine { line -> 
    if (line ==~ /-{28}/) {
        return // returns from the closure
    }
} 
```

如果您的示例真的那么简单，那么这对可读性很有好处。

```
revs.eachLine { line -> 
    if (!(line ==~ /-{28}/)) {
        // do what you would normally do
    }
} 
```

另一种选择，模拟 continue 通常在字节码级别执行的操作。

```
revs.eachLine { line -> 
    while (true) {
        if (line ==~ /-{28}/) {
            break
        }
        // rest of normal code
        break
    }

} 
```

支持中断的一种可能方法是通过异常：

```
try {
    revs.eachLine { line -> 
        if (line ==~ /-{28}/) {
            throw new Exception("Break")
        }
    }
} catch (Exception e) { } // just drop the exception 
```

您可能希望使用自定义异常类型来避免屏蔽其他真正的异常，尤其是当您在该类中进行其他可能引发真正异常的处理时，例如 NumberFormatExceptions 或 IOExceptions。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2008-10-18T02:43:04.360

闭包不能中断或继续，因为它们不是循环/迭代构造。相反，它们是用于处理/解释/处理迭代逻辑的工具。您可以通过简单地从闭包返回而不进行处理来忽略给定的迭代，如下所示：

```
revs.eachLine { line -> 
    if (line ==~ /-{28}/) {
            return
    }

} 
```

中断支持不会发生在闭包级别，而是由接受闭包的方法调用的语义所暗示。简而言之，这意味着不要在诸如旨在处理整个集合的集合之类的东西上调用“每个”，而应该调用 find 它将一直处理直到满足特定条件。大多数（全部？）时间你觉得需要打破闭包，你真正想做的是在你的迭代中找到一个特定的条件，这使得 find 方法不仅符合你的逻辑需求，而且符合你的意图。遗憾的是，一些 API 缺乏对 find 方法的支持……例如 File。可能所有花费在争论语言是否应该包括中断/继续的时间都可以很好地用于将 find 方法添加到这些被忽视的区域。像 firstDirMatching(Closure c) 或 findLineMatching(Closure c) 这样的东西会走很长的路，回答 99+% 的“为什么我不能摆脱......？” 邮件列表中弹出的问题。也就是说，通过 MetaClass 或 Categories 自己添加这些方法很简单。

```
class FileSupport {
   public static String findLineMatching(File f, Closure c) {
      f.withInputStream {
         def r = new BufferedReader(new InputStreamReader(it))
         for(def l = r.readLine(); null!=l; l = r.readLine())
             if(c.call(l)) return l
         return null
      }
   }
}

using(FileSupport) { new File("/home/me/some.txt").findLineMatching { line ==~ /-{28}/ } 
```

其他涉及异常和其他魔法的 hack 可能会起作用，但在某些情况下会引入额外的开销，并在其他情况下会混淆可读性。真正的答案是查看您的代码并询问您是否真正在迭代或搜索。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2010-05-24T15:01:53.423

如果您在 Java 中预先创建一个静态 Exception 对象，然后从闭包内抛出（静态）异常，则运行时成本是最小的。真正的成本是在创建异常时产生的，而不是在抛出它时。根据 Martin Odersky（Scala 的发明者）的说法，许多 JVM 实际上可以将 throw 指令优化为单次跳转。

这可以用来模拟休息：

```
final static BREAK = new Exception();
//...
try {
  ... { throw BREAK; }
} catch (Exception ex) { /* ignored */ } 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-10-16T21:05:07.077

使用**return**继续，*使用***任何**关闭*break*。

**例子**

文件内容：

```
1
2
----------------------------
3
4
5 
```

Groovy 代码：

```
new FileReader('myfile.txt').any { line ->
    if (line =~ /-+/)
        return // continue

    println line

    if (line == "3")
        true // break
} 
```

输出：

```
1
2
3 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-03-27T01:59:06.077

在这种情况下，您可能应该考虑该`find()`方法。它在第一次传递给它的闭包返回 true 后停止。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-06-02T09:39:41.297

使用[rx-java](https://github.com/ReactiveX/RxJava)，您可以将一个可迭代对象转换为可观察对象。

然后你可以*用过滤器*替换*continue*并用*takeWhile**中断*

 ***这是一个例子：

```
import rx.Observable

Observable.from(1..100000000000000000)
          .filter { it % 2 != 1} 
          .takeWhile { it<10 } 
          .forEach {println it} 
```

# bash - 在 Bash 中执行时间戳比较的最佳方法是什么

> ID：205666
> 
> 赞同：42
> 
> 时间：2008-10-15T17:34:39.757
> 
> 标签：bash, time

我有一个警报脚本，我试图阻止向我发送垃圾邮件，所以我想设置一个条件，如果警报已在过去一小时内发送，则不发送另一个警报。现在我有一个每分钟检查一次条件的 cron 作业，因为我需要在满足条件时快速收到警报，但在问题得到控制之前，我不需要每分钟都收到电子邮件。在 bash 中比较时间以完成此任务的最佳方法是什么？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2008-10-15T17:47:03.303

到目前为止，最简单的方法是将时间戳存储为虚拟文件的修改时间。GNU`touch`和`date`命令可以设置/获取这些时间并执行日期计算。Bash 有测试来检查一个文件是比 ( `-nt`) 新还是比 ( `-ot`) 另一个。

例如，仅在最后一个通知是一个多小时前才发送通知：

```
touch -d '-1 hour' limit
if [ limit -nt last_notification ]; then
    #send notification...
    touch last_notification
fi 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2008-10-15T17:38:46.190

使用“测试”：

```
if test file1 -nt file2; then
   # file1 is newer than file2
fi 
```

编辑：如果您想知道事件何时发生，您可以使用“触摸”创建一个文件，以后可以使用“测试”进行比较。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2008-10-15T17:43:41.360

使用 date 命令将两次转换为标准格式，然后减去它们。您可能希望将以前的执行时间存储在 dotfile 中，然后执行以下操作：

```
last = cat /tmp/.lastrun
curr = date '+%s'

diff = $(($curr - $last))
if [ $diff -gt 3600 ]; then
    # ...
fi

echo "$curr" >/tmp/.lastrun 
```

（谢谢，史蒂夫。）

# windows - 复制文件安全权限

> ID：205668
> 
> 赞同：2
> 
> 时间：2008-10-15T17:35:23.360
> 
> 标签：windows, security, winapi, file, acl

我正在将文件从文件夹 A 复制到文件夹 B，然后尝试复制文件权限。以下是我正在使用的基本步骤：

1.  复制文件（源，目标）
2.  GetNamedSecurityInfo（来源，GROUP_SECURITY_INFORMATION | DACL_SECURITY_INFORMATION）
3.  使用 ConvertSecurityDescriptorToStringSecurityDescriptor 打印源 SD
4.  SetNamedSecurityInfo（目标，GROUP_SECURITY_INFORMATION | DACL_SECURITY_INFORMATION）
5.  GetNamedSecurityInfo（目标，GROUP_SECURITY_INFORMATION | DACL_SECURITY_INFORMATION）
6.  使用 ConvertSecurityDescriptorToStringSecurityDescriptor 打印目标 SD

在＃3我得到这个SD：

```
G:S-1-5-21-1454471165-1482476501-839522115-513D:AI(A;ID;0x1200a9;;;BU)(A;ID;0x1301bf;;;PU)(A;ID;FA;;;BA)(A;ID;FA;;;SY)(A;ID;FA;;;S-1-5-21-1454471165-1482476501-839522115-1004) 
```

在＃6我得到

```
G:S-1-5-21-1454471165-1482476501-839522115-513D:AI(A;ID;0x1301bf;;;PU)(A;ID;FA;;;BA)(A;ID;FA;;;SY) 
```

对 SetNamedSecurityInfo 的调用返回 ERROR_SUCCESS，但结果是源文件和目标文件没有相同的 SD。这是为什么？我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-15T21:57:50.707

`SHFileOperation`可以将文件及其安全属性一起复制，但是从[您的另一个问题](https://stackoverflow.com/questions/202031/using-shfileoperation-within-a-windows-service)中，我看到您担心这在服务中不起作用。也许以下新闻组讨论将为您提供一些有用的信息：

*   [安全地复制 NTFS 文件](http://groups.google.com/group/microsoft.public.platformsdk.security/browse_frm/thread/c0e839addce84150/6a65cec096b4c8ba)
*   [如何复制具有所有属性的磁盘文件或目录？](http://groups.google.com/group/comp.os.ms-windows.programmer.win32/browse_frm/thread/1687df9d37d7a11c/4debcf8b3cbdf74c)
*   [复制具有安全属性的文件](http://groups.google.com/group/comp.os.ms-windows.programmer.win32/browse_frm/thread/451f58b056686c64/9bfdd6f16bca0af3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-15T22:59:22.283

服务器工具包中的 Robocopy [http://www.microsoft.com/downloads/details.aspx?familyid=9d467a69-57ff-4ae7-96ee-b18c4790cffd&displaylang=en](http://www.microsoft.com/downloads/details.aspx?familyid=9d467a69-57ff-4ae7-96ee-b18c4790cffd&displaylang=en)
将复制所有 NTFS 设置和 ACL，它也比它更健壮和可靠复制/复制

# msbuild - 无法让 MSBuild 和 MSBuildCommunityTasks (VSS) 协同工作

> ID：205676
> 
> 赞同：2
> 
> 时间：2008-10-15T17:37:06.430
> 
> 标签：msbuild, visual-sourcesafe

我正在尝试学习如何使用 VSS 和 MSBuildCommunityTasks 执行某些源代码控制任务，例如如何使用 GetVSS 和 VssLabel 之类的任务？文档没有说明这一点。当我戳它看错误消息是否能告诉我任何事情时，也不是很清楚该怎么做。让我展示一下我在做什么以及我得到了什么——我希望有人能指出我正确的方向。

项目是使用 VS2005 用 C# 编写的。这是 MSBuild 项目文件源：

```
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
    <Import Project="$(MSBuildExtensionsPath)\MSBuildCommunityTasks\MSBuild.Community.Tasks.Targets"/>
    <Target Name="GetLatestVersionVSS">
        <VssGet DatabasePath="C:\VSS\Astronom_VSS" 
            Path="$/Astronom_VSS" 
            LocalPath="C:\VisualStudioSource\AstronomySolution\Astronom" UserName="build" Password="build" />
    </Target>
    <Target Name="Compile" DependsOnTargets="GetLatestVersionVSS">
        <MSBuild Projects="Astronomer.x.csproj" />
    </Target>
</Project> 
```

我收到如下错误消息：

```
目标 GetLatestVersionVSS：
C:\Documents and Settings\michaelc\My Documents\Visual Studio 2005\Projects\Astronom\Astronomer\msbuild_UseVSS.xml(7,5)：
   错误 MSB4018：“VssGet”任务意外失败。
C:\Documents and Settings\michaelc\My Documents\Visual Studio 2005\Projects\Astronom\Astronomer\msbuild_UseVSS.xml(7,5)：
   错误 MSB4018：System.IO.FileNotFoundException：无法加载文件或程序集
   'Microsoft.VisualStudio.SourceSafe.Interop，版本 = 5.2.0.0，文化 = 中性，PublicKeyToken = b03f5f7f11d50a3a'
   或其依赖项之一。该系统找不到指定的文件。
C:\Documents and Settings\michaelc\My Documents\Visual Studio 2005\Projects\Astronom\Astronomer\msbuild_UseVSS.xml(7,5)：
   错误 MSB4018：文件名：'Microsoft.VisualStudio.SourceSafe.Interop，版本 = 5.2.0.0，文化 = 中性，
   PublicKeyToken=b03f5f7f11d50a3a'
...等等。

```

我突然想到，我可能需要在其中放置某种 Import 项以指向 VSS，特别是指向 Microsoft.VisualStudio.SourceSafe.Interop，但我找不到该名称的 .dll 文件，而且不是在 Visual Studio 中“添加引用”对话框的 .NET 选项卡中的组件列表中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-15T23:29:59.913

好的，我正在回答我自己的问题。

MSBuildCommunityTasks 需要 VS2005 附带的 Visual Source Safe 2005。但是，我们仍在使用 VSS 6.0d，并且 MSBuildCommunityTasks 无法使用它。开发人员的任务指南指出：

```
http://msbuildtasks.tigris.org/ 的开发人员指南
==================================================== ===

构建环境先决条件
------------------------------
- .NET2.0
- 微软构建；通常已作为 .NET2.0 的一部分安装，
  例如在 C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\MSBuild.exe
- NUnit 2.2.X (http://www.nunit.org/)；
  运行测试所必需的
- Microsoft Visual SourceSafe(R) 2005；
  库 Microsoft.VisualStudio.SourceSafe.Interop 被引用
- NDoc 1.3 (http://ndoc.sourceforge.net/)
  额外配置 NDoc 以使用 .NET2；看
  http://ndoc.sourceforge.net/wiki/dotNet_2.0_Support
- Microsoft Visual Studio 2005 作为 IDE

```

# javascript - JavaScript 异常处理

> ID：205688
> 
> 赞同：82
> 
> 时间：2008-10-15T17:41:20.367
> 
> 标签：javascript, exception

捕获 JavaScript 中抛出的所有异常的最佳技术是什么？

显然，最好的技术是使用 try...catch。但是对于异步回调等等，这可能会变得很棘手。

我知道 IE 和 Gecko 浏览器支持 window.onerror，但是 Opera 和 Safari 呢？

这里有一堆测试用例，我希望有一个集中的异常处理解决方案：

```
// ErrorHandler-Test1
var test = null;
test.arg = 5;
// ErrorHandler-Test2
throw (new Error("Hello"));
// ErrorHandler-Test3
throw "Hello again";
// ErrorHandler-Test4
throw {
    myMessage: "stuff",
    customProperty: 5,
    anArray: [1, 2, 3]
};
// ErrorHandler-Test5
try {
    var test2 = null;
    test2.arg = 5;
} catch(e) {
    ErrorHandler.handleError(e);
}
// ErrorHandler-Test6
try {
    throw (new Error("Goodbye"));
} catch(e) {
    ErrorHandler.handleError(e);
}
// ErrorHandler-Test7
try {
    throw "Goodbye again";
} catch(e) {
    ErrorHandler.handleError(e);
}
// ErrorHandler-Test8
try {
    throw {
        myMessage: "stuff",
        customProperty: 5,
        anArray: [1, 2, 3]
    };
} catch(e) {
    ErrorHandler.handleError(e);
} 
```

如果您想到任何其他测试用例，请提及它们。其中一些案例提到了 ErrorHandler.handleError 方法。这只是使用 try...catch 时的建议准则。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2008-10-15T19:02:13.497

如果您使用[jQuery](http://jquery.com/)之类的库来分配所有事件处理程序，则可以`window.onerror`将 jQuery 事件处理程序代码和 on ready 函数与错误处理函数结合使用并包装起来（请参阅：[JavaScript 错误跟踪：为什么 window.onerror 不够](http://blogs.cozi.com/tech/2008/04/javascript-error-tracking-why-windowonerror-is-not-enough.html)）。

*   `window.onerror`: 捕获 IE 中的所有错误（以及 Firefox 中的大多数错误），但在 Safari 和 Opera 中不执行任何操作。
*   jQuery 事件处理程序：捕获所有浏览器中的 jQuery 事件错误。
*   jQuery 就绪函数：捕获所有浏览器中的初始化错误。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2008-10-15T18:35:12.100

WebKit（Safari、Chrome 等）现在似乎支持`onerror`.

原帖：据我所知，WebKit/Safari 不支持该`onerror`事件。这是一个该死的耻辱。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-01-23T04:04:23.540

实际上，jquery 方法并没有那么糟糕。看：

[http://docs.jquery.com/Events/error#fn](http://docs.jquery.com/Events/error#fn)

和：

```
$(window).error(function(msg, url, line){
  $.post("js_error_log.php", { msg: msg, url: url, line: line });
}); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-11-08T08:17:13.873

使用您自己的异常处理程序捕获所有异常并使用 instanceof。

```
$("inuput").live({
    click : function (event) {
        try {
            if (somethingGoesWrong) {
                throw new MyException();
            }
        } catch (Exception) {
            new MyExceptionHandler(Exception);
        }

    }
});

function MyExceptionHandler(Exception) {
    if (Exception instanceof TypeError || 
        Exception instanceof ReferenceError || 
        Exception instanceof RangeError ||  
        Exception instanceof SyntaxError ||     
        Exception instanceof URIError ) {
        throw Exception; // native error
     } else {
         // handle exception
     }
} 
```

MyExcetpionHandler 将抛出本机错误，因为没有 try-catch 块。

访问[http://www.nczonline.net/blog/2009/03/10/the-art-of-throwing-javascript-errors-part-2/](http://www.nczonline.net/blog/2009/03/10/the-art-of-throwing-javascript-errors-part-2/)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2010-12-07T12:23:30.587

`try-catch`并不总是最好的解决方案。例如，在 Chrome 7.0 中，您会在控制台窗口中丢失漂亮的堆栈跟踪。重新抛出异常没有帮助。我不知道有任何解决方案可以保留堆栈跟踪**并**让您对异常做出反应。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-07-31T09:29:17.243

通过一些工作，可以获得在所有浏览器中相当完整的堆栈跟踪。

现代 Chrome 和 Opera（即基于 Blink 渲染引擎的任何东西）完全支持 HTML 5 草案规范的 ErrorEvent 和`window.onerror`. 在这两种浏览器中，您都可以使用`window.onerror`，或（令人惊讶！）正确绑定到 'error' 事件：

```
// Only Chrome & Opera pass the error object.
window.onerror = function (message, file, line, col, error) {
    console.log(message, "from", error.stack);
    // You can send data to your server
    // sendData(data);
};
// Only Chrome & Opera have an error attribute on the event.
window.addEventListener("error", function (e) {
    console.log(e.error.message, "from", e.error.stack);
    // You can send data to your server
    // sendData(data);
}) 
```

不幸的是，Firefox、Safari 和 IE 仍然存在，我们也必须支持它们。由于堆栈跟踪不可用，`window.onerror`我们必须做更多的工作。

事实证明，要从错误中获取堆栈跟踪，我们唯一能做的就是将所有代码包装在一个`try{ }catch(e){ }`块中，然后查看 e.stack。我们可以使用一个名为 wrap 的函数来简化这个过程，该函数接受一个函数并返回一个具有良好错误处理能力的新函数。

```
function wrap(func) {
    // Ensure we only wrap the function once.
    if (!func._wrapped) {
        func._wrapped = function () {
            try{
                func.apply(this, arguments);
            } catch(e) {
                console.log(e.message, "from", e.stack);
                // You can send data to your server
                // sendData(data);
                throw e;
            }
        }
    }
    return func._wrapped;
}; 
```

这行得通。您手动包装的任何函数都将具有良好的错误处理能力。

您可以使用图像标签发送数据，如下所示

```
function sendData(data) {
    var img = newImage(),
        src = http://yourserver.com/jserror + '&data=' + encodeURIComponent(JSON.stringify(data));

    img.crossOrigin = 'anonymous';
    img.onload = function success() {
        console.log('success', data);
    };
    img.onerror = img.onabort = function failure() {
        console.error('failure', data);
    };
    img.src = src;
} 
```

但是，您必须做后端来收集数据和前端来可视化数据。

Atatus[正在](https://www.atatus.com/)努力解决这个问题。Atatus 不仅提供错误跟踪，还提供真实的用户监控。

> 试一试[https://www.atatus.com/](https://www.atatus.com/)

免责声明：我是 Atatus 的一名网络开发人员。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-09-18T01:12:14.803

确实，在现代浏览器中，将 window.onerror 挂接到一直冒泡到顶部的错误，并为 Ajax 错误添加 jQuery 事件处理程序，几乎可以捕获客户端代码中抛出的所有 Error 对象。如果您手动设置 window.onerror 的处理程序，在现代浏览器中这是`window.addEventListener('error', callback)`通过 `window.attachEvent('onerror', callback)`.

请注意，您应该考虑处理这些错误的环境以及这样做的原因。使用堆栈跟踪捕获尽可能多的错误是一回事，但是现代 F12 开发工具的出现解决了在本地实施和调试时的这个用例。断点等将为您提供比处理程序可用的更多数据，特别是对于从 CORS 请求加载的第三方库引发的错误。您需要采取额外的步骤来指示浏览器提供这些数据。

关键问题是在生产中提供这些数据，因为保证您的用户运行的浏览器和版本比您可能测试的范围更广，并且您的站点/应用程序将以意想不到的方式中断，无论您投入多少 QA它。

为了解决这个问题，您需要一个生产错误跟踪器，当用户使用您的代码时，它会拾取用户浏览器中抛出的每个错误，并将它们发送到一个端点，您可以在该端点查看数据并在错误发生时修复它们. 在 Raygun（免责声明：我在 Raygun 工作），我们付出了很多努力来为此提供出色的体验，因为有许多陷阱和问题需要考虑，因为幼稚的实现会错过。

例如，您可能会捆绑和缩小您的 JS 资产，这意味着从缩小的代码中抛出的错误将具有带有错误变量名的垃圾堆栈跟踪。为此，您需要您的构建工具来生成源映射（我们推荐使用 UglifyJS2 作为管道的这一部分），以及您的错误跟踪器来接受和处理这些，将损坏的堆栈跟踪转换回人类可读的堆栈跟踪。Raygun 开箱即用，包括一个 API 端点来接受源映射，因为它们是由您的构建过程生成的。这是关键，因为它们需要保持非公开，否则任何人都可以取消您的代码，从而否定其目的。

raygun4js客户端库还随附用于现代和旧版浏览器，以及开箱即用的 jQuery 挂钩，因此要设置它，您只需添加[：](https://github.com/MindscapeHQ/raygun4js)`window.onerror`

`<script type="text/javascript" src="//cdn.raygun.io/raygun4js/raygun.min.js" </script> <script> Raygun.init('yourApiKey').attach(); </script>`

还有一系列内置功能，包括在发送错误有效负载之前对其进行变异的能力，添加标签和自定义数据，以及看到错误的用户的元数据。它还消除了从上述第三方 CORS 脚本中获取良好堆栈跟踪的痛苦，这解决了可怕的“脚本错误”（不包含错误消息，也没有堆栈跟踪）。

一个更关键的问题是，由于网络上的大量受众，您的网站会为每个错误生成数千个重复实例。[像Raygun](https://raygun.io)这样的错误跟踪服务很聪明，可以将它们汇总到错误组中，这样您就不会淹没在大量通知中，并让您看到每个实际错误都准备好修复。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-06-03T10:44:45.477

我也在寻找错误处理和堆栈跟踪以及用户操作日志记录，这就是我发现的希望这也能帮助你 [https://github.com/jefferyto/glitchjs](https://github.com/jefferyto/glitchjs)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-07-30T02:30:22.623

最好的错误处理程序：

```
try {
    // something
} catch(e) {
    window.location.href = "https://stackoverflow.com/search?q=[js] + " + e.message
} 
```

# c# - 使用单一方法的类——最好的方法？

> ID：205689
> 
> 赞同：182
> 
> 时间：2008-10-15T17:41:54.983
> 
> 标签：c#, java, oop, static-methods

假设我有一个旨在执行单个功能的类。执行该功能后，可以将其销毁。有什么理由更喜欢其中一种方法吗？

```
// Initialize arguments in constructor
MyClass myObject = new MyClass(arg1, arg2, arg3);
myObject.myMethod();

// Pass arguments to method
MyClass myObject = new MyClass();
myObject.myMethod(arg1, arg2, arg3);

// Pass arguments to static method
MyClass.myMethod(arg1, arg2, arg3); 
```

我故意对细节含糊其辞，以尝试获得针对不同情况的指导。但我并没有真正想到像 Math.random() 这样的简单库函数。我正在考虑更多执行某些特定、复杂任务的类，但只需要一个（公共）方法来完成它。

* * *

## 回答 #1

> 赞同：266
> 
> 时间：2008-10-15T21:03:38.523

我曾经喜欢充满静态方法的实用程序类。他们对辅助方法进行了极大的整合，否则这些方法会导致冗余和维护地狱。它们非常易于使用，无需实例化，无需处置，只需一劳永逸。我想这是我第一次在不知情的情况下尝试创建面向服务的架构——许多无状态服务只是完成了它们的工作，没有别的。然而，随着系统的发展，巨龙即将到来。

**多态**
假设我们有方法 UtilityClass.SomeMethod，它很高兴地嗡嗡作响。突然我们需要稍微改变一下功能。大多数功能是相同的，但我们仍然必须更改几个部分。如果它不是静态方法，我们可以创建一个派生类并根据需要更改方法内容。因为它是一个静态方法，我们不能。当然，如果我们只需要在旧方法之前或之后添加功能，我们可以创建一个新类并在其中调用旧类——但这很糟糕。

**接口问题**
由于逻辑原因，不能通过接口定义静态方法。而且由于我们不能覆盖静态方法，所以当我们需要通过接口传递静态类时，它们是无用的。这使我们无法使用静态类作为策略模式的一部分。[我们可能会通过传递委托而不是接口来](https://docs.microsoft.com/archive/blogs/kirillosenkov/how-to-override-static-methods)修补一些问题。

**测试**
这基本上与上面提到的界面问题密切相关。由于我们交换实现的能力非常有限，我们也很难用测试代码替换生产代码。同样，我们可以将它们包装起来，但这需要我们更改大部分代码才能接受包装器而不是实际的对象。

**促进 blob**
由于静态方法通常用作实用方法，而实用方法通常有不同的用途，我们很快就会得到一个充满不连贯功能的大型类——理想情况下，每个类在系统中应该有一个单一的用途. 只要他们的目的明确，我宁愿有五倍的课程。

**参数蠕变**
首先，那个可爱又纯真的静态方法可能只需要一个参数。随着功能的增长，添加了几个新参数。很快就会添加更多可选参数，因此我们创建方法的重载（或仅添加默认值，使用支持它们的语言）。不久之后，我们就有了一个需要 10 个参数的方法。只有前三个是真正需要的，参数 4-7 是可选的。但是如果指定了参数 6，那么 7-9 也需要填写...如果我们创建一个类的目的只是为了做这个静态方法所做的事情，我们可以通过在构造函数，并允许用户通过属性设置可选值，或者同时设置多个相互依赖的值的方法。此外，如果一种方法已经发展到如此复杂的程度，

**无缘无故要求消费者创建类的实例**
最常见的论点之一是，为什么要求我们类的消费者创建一个实例来调用这个单一方法，而之后却没有使用该实例？在大多数语言中，创建类的实例是一项非常便宜的操作，因此速度不是问题。向消费者添加额外的代码行成本很低，可以为未来更易于维护的解决方案奠定基础。最后，如果您想避免创建实例，只需创建一个允许轻松重用的类的单例包装器 - 尽管这确实要求您的类是无状态的。如果它不是无状态的，您仍然可以创建处理所有内容的静态包装器方法，同时从长远来看仍然为您提供所有好处。最后，

**只有西斯处理绝对值**
当然，我不喜欢静态方法也有例外。不会造成任何膨胀风险的真正实用程序类是静态方法的极好案例 - 以 System.Convert 为例。如果您的项目是一次性的，对未来的维护没有要求，那么整体架构真的不是很重要 - 静态或非静态，并不重要 - 但是开发速度确实如此。

**标准，标准，标准！**
使用实例方法不会阻止您也使用静态方法，反之亦然。只要差异化背后有推理并且它是标准化的。没有什么比查看具有不同实现方法的业务层更糟糕的了。

* * *

## 回答 #2

> 赞同：93
> 
> 时间：2008-10-15T17:44:54.430

我更喜欢静态方式。由于 Class 不代表对象，因此创建它的实例是没有意义的。

仅针对其方法存在的类应保持静态。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2008-10-15T17:46:11.027

如果没有理由创建类的实例来执行函数，则使用静态实现。为什么在不需要的时候让这个类的消费者创建一个实例。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2008-10-15T18:24:30.403

如果您不需要保存对象的*状态*，则无需首先实例化它。我会使用您将参数传递给的单个静态方法。

我还要警告一个巨大的 Utils 类，它有几十个不相关的静态方法。这可能会很快变得混乱和笨拙。最好有很多类，每个类都有很少的相关方法。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2008-10-15T17:46:37.640

我会说静态方法格式会是更好的选择。而且我也会将类设为静态，这样您就不必担心意外创建该类的实例。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2008-10-15T17:46:27.453

我真的不知道这里的情况如何，但我会考虑将其作为方法放在 arg1、arg2 或 arg3 所属的类之一中——如果你可以从语义上说这些类中的一个将拥有方法。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2008-10-15T21:12:19.363

我建议根据提供的信息很难回答。

我的直觉是，如果您只需要一种方法，并且您将立即丢弃该类，那么将其设为一个接受所有参数的静态类。

当然，很难准确地说出为什么只需要为这个方法创建一个类。这是大多数人假设的典型“实用程序类”情况吗？或者您是否正在实施某种规则类，未来可能会有更多。

例如，让那个类是可插入的。然后你想为你的一个方法创建一个接口，然后你想让所有的参数都传递给接口，而不是传递给构造函数，但你不希望它是静态的。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2008-10-15T17:45:20.420

你的班级可以静态化吗？

如果是这样，那么我会将其设为“实用程序”类，我会将所有单功能类放入其中。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2008-10-15T18:58:44.533

如果此方法是无状态的并且您不需要传递它，那么将其定义为静态是最有意义的。如果您确实需要传递该方法，您可以考虑使用[委托](http://msdn.microsoft.com/en-us/library/aa288459(VS.71).aspx)而不是您提出的其他方法之一。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2010-01-15T18:05:30.353

对于简单的应用程序和`internal`助手，我会使用静态方法。对于带有组件的应用程序，我喜欢[Managed Extensibility Framework](http://mef.codeplex.com)。这是我正在编写的文档的摘录，用于描述您在我的 API 中发现的模式。

*   服务
    *   由`I[ServiceName]Service`接口定义。
    *   按接口类型导出和导入。
    *   单一实现由宿主应用程序提供，并在内部和/或扩展中使用。
    *   服务接口上的方法是线程安全的。

作为一个人为的例子：

```
public interface ISettingsService
{
    string ReadSetting(string name);

    void WriteSetting(string name, string value);
}

[Export]
public class ObjectRequiringSettings
{
    [Import]
    private ISettingsService SettingsService
    {
        get;
        set;
    }

    private void Foo()
    {
        if (SettingsService.ReadSetting("PerformFooAction") == bool.TrueString)
        {
            // whatever
        }
    }
} 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2008-10-15T18:28:59.693

我只会在构造函数中做所有事情。像这样：

```
new MyClass(arg1, arg2, arg3);// the constructor does everything. 
```

或者

```
MyClass my_object(arg1, arg2, arg3); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-07-27T07:49:40.490

要考虑的另一个重要问题是系统是否会在多线程环境中运行，以及拥有静态方法或变量是否是线程安全的......

您应该注意系统状态。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-01-31T11:09:15.303

你也许可以一起避免这种情况。尝试重构，以便获得`arg1.myMethod1(arg2, arg3)`. 如果更有意义，请将 arg1 与 arg2 或 arg3 交换。

如果您无法控制 arg1 的类，请装饰它：

```
class Arg1Decorator
    private final T1 arg1;
    public Arg1Decorator(T1 arg1) {
        this.arg1 = arg1;
    }
    public T myMethod(T2 arg2, T3 arg3) {
        ...
    }
 }

 arg1d = new Arg1Decorator(arg1)
 arg1d.myMethod(arg2, arg3) 
```

推理是，在 OOP 中，数据和处理数据的方法属于一起。此外，您还可以获得 Mark 提到的所有优势。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-02-10T09:39:41.470

我认为，如果您的类的属性或类的实例不会在构造函数或您的方法中使用，则不建议将方法设计为“静态”模式。静态方法应始终以“帮助”的方式思考。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-05-14T20:29:43.633

根据您是只想做某事还是做某事并返回某事，您可以这样做：

```
public abstract class DoSomethingClass<T>
{
    protected abstract void doSomething(T arg1, T arg2, T arg3);
}

public abstract class ReturnSomethingClass<T, V>
{
    public T value;
    protected abstract void returnSomething(V arg1, V arg2, V arg3);
}

public class DoSomethingInt extends DoSomethingClass<Integer>
{
    public DoSomethingInt(int arg1, int arg2, int arg3)
    {
        doSomething(arg1, arg2, arg3);
    }

    @Override
    protected void doSomething(Integer arg1, Integer arg2, Integer arg3)
    {
        // ...
    }
}

public class ReturnSomethingString extends ReturnSomethingClass<String, Integer>
{
    public ReturnSomethingString(int arg1, int arg2, int arg3)
    {
        returnSomething(arg1, arg2, arg3);
    }

    @Override
    protected void returnSomething(Integer arg1, Integer arg2, Integer arg3)
    {
        String retValue;
        // ...
        value = retValue;
    }
}

public class MainClass
{
    static void main(String[] args)
    {
        int a = 3, b = 4, c = 5;

        Object dummy = new DoSomethingInt(a,b,c);  // doSomething was called, dummy is still around though
        String myReturn = (new ReturnSomethingString(a,b,c)).value; // returnSomething was called and immediately destroyed
    }
} 
```

# c# - c# 3.0 新增自动属性，有什么好处？

> ID：205691
> 
> 赞同：0
> 
> 时间：2008-10-15T17:42:33.313
> 
> 标签：c#, properties, .net

有什么好处：

```
public string User {get; set;} 
```

超过

```
public string User; 
```

既然在第一种情况下您无法访问私有成员，那么仅将您的财产公开有什么不同？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-10-15T17:47:52.477

第二个示例是将*字段*公开，而不是属性（您的问题）。这提供了一种制作简单属性的简单方法。属性应该是您的默认值，而不是公共字段；原因不胜枚举，但首先是：

*   封装
*   添加通知的能力
*   封装
*   进行验证的能力
*   封装
*   数据绑定
*   封装
*   安全检查

哦 - 我提到封装了吗？

事后从字段更改为属性是一项重大更改 - 特别是如果您使用大量“引用”代码或可变结构（yeuch）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-15T19:20:24.880

当用户值发生变化时，您必须做很多事情。您事先不知道或在设计课程时不存在的事情。例如，有一天您意识到用户值应该至少有 5 个字符长。如果你有财产，它很容易实现。如果您有一个公共字段，则必须将其更改为属性并重新编译所有相关代码。

从本质上讲，我认为明确区分我们类型的公共/API 部分和私有实现细节是值得的。

有人提到封装吗？;)

# sql - 两个表查询中的匹配值（SQL 和 ColdFusion）

> ID：205697
> 
> 赞同：0
> 
> 时间：2008-10-15T17:44:51.513
> 
> 标签：sql, excel, coldfusion

我有一个包含基本值列表和语言值列表的查询。每个值都有一个与之匹配的键。基本值存储在一个表中，语言值存储在另一个表中。我的问题是我需要从 QUERY 中删除所有匹配的基值，除了一个。然后，我将该查询导出到 Excel 电子表格（我可以很好地完成这部分）并允许用户编辑语言值。

当用户编辑和/或插入新的语言值时，我需要更新数据库，除非现在覆盖数据库中的任何匹配值（比如那些第一次被删除的值）。

简而言之，客户支付翻译费用，如果我可以生成需要较少翻译的工作表（例如经常重复出现的短语），那么他们可以节省资金，因此可以开始项目。我意识到它的缺点是它不是一个真正的链表，其中所有匹配的值都属于语言表中的一行（这很容易）。相反，有多个相同的值需要如上所述更新。

* * *

是的，我对此感到困惑，这就是为什么它看起来有点模糊。这是一个示例：

```
Table 1
Item Description1
Item Description2
Item Description3
Item Description2
Item Description2
Item Description4
Item Description5
Item Description6
Item Description3

Table 2
Item Desc in other Language1
Item Desc in other Language2
Item Desc in other Language3  (blank)
Item Desc in other Language3
Item Desc in other Language4
Item Desc in other Language5
*blank* 
```

期望的结果（查询时）

表1 项目描述1 项目描述2 项目描述3 项目描述4 项目描述5 项目描述6

```
Table 2
Item Desc in other Language1
Item Desc in other Language2
Item Desc in other Language3 (filled by matching row in Table 2)
Item Desc in other Language4
Item Desc in other Language5
Item Desc in other Language6 (blank, returned as empty string) 
```

用户进行修改，包括将数据插入空白行（如语言的第 6 行），然后重新上传：

```
Table 1
Item Description1
Item Description2
Item Description3
Item Description2
Item Description2
Item Description4
Item Description5
Item Description6
Item Description3

Table 2
Item Desc in other Language1
Item Desc in other Language2
Item Desc in other Language3  (now matches row below)
Item Desc in other Language3
Item Desc in other Language4
Item Desc in other Language5
Item Desc in other Language6  (new value entered by user) 
```

还有一个资源键将每个“项目描述”与单个“其他语言的项目描述”匹配。他们唯一一次见面是在这个翻译过程中，所有其他时间的值可能不同，所以资源键不能简单地永久更改为一个翻译的所有点。

我还应该补充一点，不应该改变表格的结构或删除表格的行。

* * *

好的，这是对我希望查询执行的操作的更新修订，但显然不这样做，因为我实际上需要连接表的值：

```
SELECT pe.prodtree_element_name_l, rs.resource_value, pe.prodtree_element_name_l_rk   
FROM prodtree_element pe
        LEFT JOIN resource_shortstrings rs
            ON pe.prodtree_element_name_l_rk = rs.resource_key
        WHERE rs.language_id = '5'
            AND pe.prodtree_element_name_l <> ''
        GROUP BY pe.prodtree_element_name_l 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-15T20:26:35.930

Hrm，仍然不清楚真正的问题是什么，但让我试一试。

表：

```
BASE_VALUES
------------------
BASE_VALUE_RK
BASE_VALUE_NAME

RESOURCE_VALUES（这些是翻译，我猜）
----------------------
RESOURCE_KEY
RESOURCE_LANGUAGE_ID
RESOURCE_VALUE

```

您想检索一个基值，以及与该基值匹配的所有相应翻译值，将它们导出到 excel，然后通过更新重新加载它们（我认为）。

SQL 来选择数据：

```
选择 bv.BASE_VALUE_RK、rv.RESOURVE_VALUE
  FROM BASE_VALUE bv，RESOURCE_VALUE rv
 WHERE bv.BASE_VALUE_RK = rv.RESOURCE_KEY
   AND rv.resource_language_id = '5'
 按 1 排序；

```

这会给你：

```
第1234章
1235酒吧
第1236章

```

将其导出到 excel，并通过更新取回：

```
第1234章 咕
1235车
第1236章

```

然后你可以说：

```
更新 RESOURCE_VALUES
   SET RESOURCE_VALUE = value_from_spreadsheet
 WHERE RESOURCE_KEY = key_from_spreadsheet

```

我可能对这个人有点偏离，所以请告诉我，如果你能提供更多细节，我可能会更接近分数。

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-15T18:09:30.590

如果您需要删除除一个之外的所有匹配项，为什么不删除所有匹配项……匹配项……我们需要更好的术语……然后插入正确的项。EG，如果您需要更新碱基对表中第 12 项和第 13 项之间的匹配，请执行以下操作

```
delete from matchtable where (id1 = 12 and id2 = 13) or (id1 = 13 and id2 = 13);
insert into matchtable (id1, id2) values (12, 13); 
```

我可能过于简单化了，但是您的描述在某些地方似乎含糊不清。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-15T20:59:03.773

嘿，感谢您的更新！

看着它并将其添加到以前的帖子中，我终于想出了这个：

```
<cfquery name="getRows" datasource="XXXX">
    SELECT pe.prodtree_element_name_l, MAX(rs.resource_value) AS resource_value
    FROM prodtree_element pe
    LEFT JOIN resource_shortstrings rs
        ON pe.prodtree_element_name_l_rk = rs.resource_key
    WHERE rs.language_id = '5'
        AND pe.prodtree_element_name_l <> ''
    GROUP BY prodtree_element_name_l
</cfquery> 
```

我意识到我不需要特定的 resource_value，只需要其中的任何东西。我还意识到在查询之外我根本不需要资源键。无论如何，更新都会更新所有匹配的基值，所以我根本不需要资源键，这让我可以使用 GROUP BY。

花了一段时间，抱歉解释不佳，但就是这样！:) 感谢所有的帮助。

# python - 如何在不实际执行的情况下检查 Emacs 中 Python 代码的语法？

> ID：205704
> 
> 赞同：15
> 
> 时间：2008-10-15T17:46:12.167
> 
> 标签：python, validation, emacs, syntax

Python 的 IDLE 具有“检查模块”（Alt-X）来检查无需运行代码即可调用的语法。在 Emacs 中是否有等效的方法来执行此操作，而不是运行和执行代码？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2011-12-21T02:10:48.510

```
python -m py_compile script.py 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-10-15T21:40:49.603

您可以[将 Pyflakes 与 Flymake 一起使用](https://web.archive.org/web/20090503090851/http://www.plope.org/Members/chrism/flymake-mode)，以便在您的 python 代码有效时获得即时通知（并避免一些常见的陷阱）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-16T00:56:03.157

或者从 emacs（或 vim）你可以运行`python -c 'import x'`x 是你的文件名减去`.py`扩展名。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-15T17:51:09.457

您可以将[pylint](http://www.logilab.org/857)用于此类事情，似乎有一种方法可以将其集成到[emacs](http://www.emacswiki.org/cgi-bin/wiki/PythonMode#toc8)中，但我从未做过后者 b/c 我是 vim 用户。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-16T06:32:48.360

`compile`您可以从 Emacs 的命令 ( `M-x compile`)中使用 pylint、pychecker、pyflakes 等。

提示：将一个键（比如 F5）绑定到`recompile`.

# linq - LINQ 外部映射到类库

> ID：205711
> 
> 赞同：1
> 
> 时间：2008-10-15T17:47:12.243
> 
> 标签：linq, c#-3.0

在过去的几天里，我一直在努力解决一个问题，但还没有找到解决方案。

我有一个带有 2 个项目的 Visual Studio 解决方案，第一个是包含我的业务对象和逻辑的 DLL，另一个项目是我的 WinForm 应用程序，以及对第一个项目的引用依赖项。

我最初使用属性 LINQ 映射编写业务对象，一切正常。然后我想我会尝试外部映射。我遵循了一些关于它应该如何工作的不同指南；但是，每次在我的解决方案中运行代码时，当 WinForm 尝试创建 DataContext 对象时，我都会收到*InvalidOperationException: Mapping Problem: Cannot find type 'Org.Example.System.Material' from mapping 。*

在 XML 文件中尝试了不同的配置后，我将该类的副本放入我的 GUI 解决方案中的不同命名空间下，并且它起作用了。我的问题是，是否不可能在类库中映射对象，或者它是如何完成的。

样品

**数据库映射.xml**

```
<Database xmlns="http://schemas.microsoft.com/linqtosql/mapping/2007" Name="Gravel_Dev"><Table Name="dbo.Materials" Member="Material">
<Type Name="Org.Example.System.Material">
  <Column Name="MaterialID" Member="MaterialID" Storage="mMaterialID" DbType="UniqueIdentifier NOT NULL" IsDbGenerated="true" IsPrimaryKey="true"/>
  <Column Name="Code" Member="Code" Storage="mMaterialCode" DbType="Char(4)"/>
  <Column Name="Description" Member="Description" Storage="mDescription" DbType="VarChar(50)"/>
  <Column Name="UnitPrice" Member="UnitPrice" Storage="mUnitPrice" DbType="Decimal(5,2)"/>
</Type> 
```

**WinForm 加载**

```
XmlMappingSource mapping = XmlMappingSource.FromUrl("dbmap.xml");
mContext = new DataContext(Properties.Settings.Default.dbConn, mapping);
reloadTable(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-15T17:49:22.393

我认为您可能遇到的问题是包含您的类的程序集/类库在此阶段尚未加载到内存中？

在实例化数据上下文之前尝试访问库中的一个类，看看它是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-09-24T19:34:57.060

我也有同样的问题。我们有一个映射不同程序集的映射文件，但由于所有程序集都没有加载到内存中，所以我们得到了映射错误。这个问题有哪些不同的解决方案？

我读过可以使用类型的 AssemblyQualifiedName 引用不同程序集中的类型。但我们没有让它发挥作用。如果这是可能的，你能举例说明这会是什么样子吗？

我想，另一种解决方案是为每个程序集设置一个映射文件，并在运行时为数据上下文提供正确的映射文件。

# c# - 在 ASP.NET 中使用 Ext JS

> ID：205720
> 
> 赞同：11
> 
> 时间：2008-10-15T17:49:34.907
> 
> 标签：c#, asp.net, vb.net, extjs

我没有 JavaScript 高级知识，我正在尝试学习如何在 ASP.NET（C# 或 VB.NET）环境中使用 Ext JS 框架。我有几个样本，但无法让项目正常工作。是否有诸如网站或书籍之类的，以便我可以更详细地阅读有关 Ext JS 的信息，以及如何将其包含到我的网站中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-10-15T22:12:20.087

麦克风，

最好的示例站点是[http://examples.extjs.eu/](http://examples.extjs.eu/)。每个示例都有一个单独查看 HTML、javascript 和 CSS 的链接。

我们正在成功地将 ExtJS 与 ASP.NET MVC 框架集成。一个单独的帖子详细说明如何将所有内容放在一起可能是有序的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-08-02T04:46:00.000

而这个：[http ://extaspnet.codeplex.com/](http://extaspnet.codeplex.com/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-12-18T16:15:42.713

另请参阅[http://www.coolite.com/](http://www.coolite.com/)（仅提供链接，绝不认可它，因为我还没有真正看到它的实际效果。）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-10-15T18:17:20.373

我想你已经通过 *[Sencha的样品](http://www.sencha.com/products/extjs/examples/)*

你真的需要阅读整篇文章*[Secrets of the JavaScript Ninjas](https://blog.codinghorror.com/secrets-of-the-javascript-ninjas/)* (2008-08-13) 来决定 Ext JS 是否是更好的选择。

如果您决定坚持使用 Ext JS，您可能会发现*[Ext JS Extender Controls](http://www.codeplex.com/ExtJsExtenderControl)*很有用。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2011-06-23T19:49:50.257

我想以下网站更具相关性。

[http://www.ext.net/](http://www.ext.net/)

它提供社区版和专业版，而且效果很好。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-11-06T18:45:15.940

当我在之前的职位上学习将 Ext JS 与 ASP.NET 结合时，我发现学习它的最佳方法（除了文档和示例）就是浏览论坛并从用户那里到处获取示例代码帖子。

一旦您了解了客户端 API 的细微差别（并且他们的在线文档和论坛在这方面非常出色），那么让您的 ASP.NET 代码返回正确的 JSON 以供 Ext JS 使用就很简单了。

我有一个相当过时的 ASP.NET MVC / Ext JS 示例项目，它可能不再编译（它是使用 MVC 的早期预览版构建的），但您可能仍然可以通过代码查看 Ext JS 如何与服务器端代码。

[Ext JS 和 ASP.NET MVC 示例项目](http://www.redgreenrefactor.com/post/Ext-Js-and-ASPNET-MVC.aspx)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-12-18T16:07:09.827

看看[Script#](http://projects.nikhilk.net/ScriptSharp/)项目。它在构建时从您的 C# 生成 JavaScript，特别适合编写类似桌面的应用程序。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-05-13T08:45:14.767

我参与了一个大量使用 ExtJS 的项目。我真的不知道你实际上有什么问题，但我们使用 ExtJS、Asp.net、WCF 的完美组合来进行 ExtJS Ajax 对服务器的调用。像魅力一样工作。但是我们几乎完全放弃了常规的 asp.net 控件使用，因为大部分 UI 都是用 ExtJS 构建的。我们还使用了我们自己的布局和控件，其外观和感觉与 ExtJS 不同。所以它看起来并不像一个 ExtJS 应用程序。

您也可以使用常规的 WebMethods（如在 Web 服务中）。

**通过使用像Firebug**和**Fiddler**这样的工具来调试你的 javascript 代码并检查所有在客户端和服务器之间来回传递的消息，你肯定会受益匪浅。

获取示例每天都在变得越来越好，因为越来越多的人将 ExtJS 与各种技术结合使用。Asp.net 也是如此。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-10-15T18:17:05.567

有什么特别的原因让您在所有不同的框架中选择了 Ext JS？如果没有，由于您使用的是 ASP.NET，因此我推荐使用 jQuery，因为它很快就会得到 Microsoft 的正式支持。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-02-05T10:05:56.687

我写了一篇关于在 asp.net mvc 中使用 extjs 网格的[帖子。](http://thekindofme.wordpress.com/2009/02/05/a-grid-with-ajax-pagination-sorting-filtering-on-aspnet-mvc-with-extjs-and-ef/)尽管您不打算在 mvc fm 上使用 ext。我认为其他细节，如如何使用 javascript 呈现它，解析网格发送的请求中的参数，json 序列化......等将是相关的并且对你有帮助。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2011-01-27T20:42:22.780

请看[这里](http://extsharp.codeplex.com.)该项目包含一个用于 Script# 编译器的 ExtJS 3.3.1 导入库，您可以使用它在 C# 中编写 ExtJS 脚本。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-06-28T04:10:36.463

流行的 ExtJS 框架的最佳 ASP.Net MVC 标签库。网址：[http ://www.mvcnext.com](http://www.mvcnext.com)

MVCnExt 为 ASP.Net MVC 简化了 ExtJs。

使为 ASP.Net MVC 集成 ExtJs 组件变得更加容易。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2010-11-20T21:47:11.223

我在[http://www.sencha.com/forum/showthread.php?t=72245](http://www.sencha.com/forum/showthread.php?t=72245)找到了基于 MVC 的 ExtJS 的最佳实现。它不是太多余的实施，但它已经足够成熟了。

# development-environment - 在软件开发中使用虚拟化的关键用例是什么？

> ID：205722
> 
> 赞同：7
> 
> 时间：2008-10-15T17:50:18.243
> 
> 标签：development-environment, vmware, virtualization, virtual-pc

[使用虚拟化（即使用VMWare](http://www.vmware.com/)和[Microsoft Virtual PC](http://www.microsoft.com/windows/products/winfamily/virtualpc/default.mspx)等软件运行一台或多台“虚拟 PC” ）进行软件开发的关键用例是什么？

还有——是否还有我上面的定义没有涵盖的其他虚拟化实例/使用（使用像 MS Virtual PC 或 VMWare 这样的工具），并且对开发人员有用？

我提出这个问题的动力是Metro [Smurf的](https://stackoverflow.com/users/9664/metro-smurf)[StackOverflow 评论](https://stackoverflow.com/questions/171946/computer-upgrade-cycle#171978)断言“你会想知道没有它你是如何开发的！”，关于虚拟化的使用。

（请在每个回复中仅包含一个用例。谢谢！）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-10-15T17:50:25.840

据我所知，在多个环境中进行应用程序测试是虚拟化的一种明显用途。在其他操作系统上测试您的应用程序（不需要额外的物理计算机），以及涉及通常只允许您在给定机器上安装单个版本的软件的测试（例如 Internet Explorer 浏览器；同时运行 IE6和 IE7 在同一台机器上不是官方支持的配置），是虚拟机使用的良好候选者。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-10-15T20:46:24.987

如果您的构建服务器在虚拟机中运行，您可以为每个软件版本制作快照，以便 100% 确保您可以重新创建构建环境（例如，如果您想为旧版本打补丁）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-10-15T17:54:26.580

如果您设置了开发环境的快照（并对其进行备份），那么在您的计算机出现故障时可以很容易地恢复生产力。当您的机器在您发布之前发生故障时 - 您可以在安装和配置所有工具后立即恢复，它可以成为救生员。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-10-15T17:52:38.113

适用于我当前情况的最简单的情况是，我们有一个复杂的客户端-服务器环境，并且通过虚拟化，每个开发人员都可以非常快速地获得一组基线操作系统，以将其本地构建部署到并验证端到端功能。

在本地，您有您的开发盒和 N 个客户端盒，每次您想尝试构建时，它们都会重新初始化为新的操作系统。从本质上讲，它相当于“make clean”的测试环境，甚至客户端工作站也被新的操作系统取代。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-10-15T17:55:01.713

在团队成员之间快速分配环境对于虚拟化来说是一个非常好的用例，特别是如果您有很多不同的组件、工具等。这可以为您节省大量与新员工、承包商或其他需要环境很快。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-10-15T17:55:37.250

许多演示者使用虚拟机进行演示 - 它允许他们立即恢复以重置第二天的演示，在计算机之间快速传输所有演示材料，而不必向与会者展示您凌乱的“我的文档”文件夹。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-10-15T17:58:30.660

将虚拟化用于销售活动也是一个很好的用例。您可以在特定时间拍摄快照，并将其保存为演示基线。然后，一旦您完成演示并更改数据等，您就可以恢复到以前的基线以供将来的演示使用。您还可以捕获多个基线并挑选最适合即将到来的演示的基线。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-10-15T20:54:56.840

我们开发用于 SaaS 应用程序的软件，我们的生产环境有大量服务器，并且它们的软件环境需要绝对可预测；我们不能在我们的开发机器上额外安装或缺少任何东西。

此外，我们的应用程序需要许多不同类型的服务器才能正常运行（我上次数至少有 7 个）；大多数情况下，它们不能安装在同一台（虚拟）机器上——至少，不会违反“与生产相同的软件”的要求。

为了拥有一致的环境，有必要使用虚拟机。我不知道没有他们的人如何管理。

快照和回滚也很好，但我只是偶尔使用它们（在安装/升级测试期间非常有用）。

假设您正在开发软件的新版本，并检查从以前版本的升级是否正常工作......在无法回滚盒子的情况下进行测试周期需要多长时间？你必须重新安装操作系统然后旧版本？你能保证卸载真的卸载一切吗？

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-01-06T15:13:36.273

能够测试/重新测试您的部署过程是一个巨大的节省。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-01-07T00:59:08.417

我很惊讶没有人提到非常适合调试的 VMware 记录/重放功能（[很棒的视频演示）。](http://e.blip.tv/scripts/flash/showplayer.swf?file=http://blip.tv/rss/flash/1057363)

我有一个运行 ESXi 的无头服务器，它运行各种机器来构建安装程序（所以我不必放弃我桌面上的处理能力）、自动化测试（服务器比任何桌面都快）和各种测试环境（大约 20 种不同的配置) 以便支持团队可以轻松跳转到与客户系统紧密匹配的配置。

当您拥有一台运行虚拟机的非常强大的服务器时，可以在支持、测试和开发团队之间共享，您就可以节省大量成本。总之，我们在 5-10 人共享的 ESXi（双四核 Xeon 2.5G + 8Gb RAM）上运行了大约 25 个虚拟机，一些开发人员使用 Virtual PC，然后我在我的桌面上使用 VMware Workstation。这里的所有 Mac 用户也都使用 VMware Fusion

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-10-15T18:00:06.147

测试环境。如果您有多个系统需要针对的设置（例如 Windows 和 Linux、XP 和 Vista），那么具有大量 RAM 和 VMWare（或其他）的机器是管理环境的好方法。

另一个是在一个系统上开发并针对另一个系统。例如，有一次我在运行 Linux 的工作站上做了一些 J2EE 工作，其中客户端是 IE 5.5。带有 Windows 2000 和 IE 5.5 的 VM 可以让我测试应用程序。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-10-15T18:02:31.650

我使用虚拟机进行开发的原因。

*   隔离不同的开发环境。
*   测试环境。
*   由于计算机硬件故障/升级，易于恢复。
*   如果某些东西损坏了它，则能够“回滚”对您的开发环境所做的更改。

目前，我正在使用 VirtualBox 进行 VM 设置。我曾经使用 VirtualPC，但我真的很讨厌没有任何类型的“快照”功能（就像 VMware 和 VirtualBox 一样）。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2009-05-01T23:38:51.403

*   为不同版本的 Microsoft Office 开发加载项（使用 Visual Studio Tools for Office）。

我的主要工作机器有 Office 2007。当我使用 Office 2003 的加载项时，我使用带有 Visual Studio 和 Office 2003 的虚拟机。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2017-04-22T00:21:52.080

令我惊讶的是，没有人提到通过隔离不同 VM 中的数据库服务器和 Web 服务器来提高安全性的好处。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2008-10-15T17:52:18.707

一些服务器应用程序也可以使用虚拟机。当一个虚拟机使用不多时，服务器可以将资源定位到其他虚拟机。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2009-12-08T22:16:09.130

某种测试环境：如果您正在调试恶意软件（编写或开发针对它的药丸），那么使用真正的操作系统并不聪明。唯一可能的缺点是病毒可以检测到它们正在虚拟化中运行。:( 这样做的一种可能性是因为 VM 引擎可以模拟一组有限的硬件。

# php - 如何使用 Mysql 数据填充下拉列表的选定值？

> ID：205731
> 
> 赞同：2
> 
> 时间：2008-10-15T17:53:52.680
> 
> 标签：php, mysql

我需要由 sql 数据库填充表单输入的值。我的代码适用于所有文本和文本区域输入，但我无法弄清楚如何将数据库值分配给下拉列表，例如。下文中的“财产类型”。它围绕获取“选择的选项”来表示数据库中保存的值。

这是我的代码：

```
$result = $db->sql_query("SELECT * FROM ".$prefix."_users WHERE userid='$userid'");    
$row = $db->sql_fetchrow($result);

echo "<center><font class=\"title\">"._CHANGE_MY_INFORMATION."</font></center><br>\n";
echo "<center>".All." ".fields." ".must." ".be." ".filled."  
<form name=\"EditMyInfoForm\" method=\"POST\" action=\"users.php\" enctype=\"multipart/form-data\">           
  <table align=\"center\" border=\"0\" width=\"720\" id=\"table1\" cellpadding=\"2\" bordercolor=\"#C0C0C0\">        
    <tr>                
      <td align=\"right\">".Telephone." :</td>                
      <td>
        <input type=\"text\" name=\"telephone\" size=\"27\" value=\"$row[telephone]\"> Inc. dialing codes
      </td>        
    </tr>        
    <tr>                
      <td align=\"right\">".Type." ".of." ".property." ".required." :</td>                                          
      <td>Select from list:
        <select name=\"req_type\" value=\"$row[req_type]\">                   
          <option>House</option>                  
          <option>Bungalow</option>                  
          <option>Flat/Apartment</option>                  
          <option>Studio</option>                  
          <option>Villa</option>                  
          <option>Any</option>                  
         </select>  
       </td>          
      </tr>
.... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-10-15T18:03:31.897

使用您当前的代码：

```
<?php
  $options = array('House', 'Bungalow', 'Flat/Apartment', 'Studio', 'Villa', 'Any');

  foreach($options as $option) {
    if ($option == $row['req_type']) {
      print '<option selected="selected">'.$option.'</option>'."\n";
    } else {
      print '<option>'.$option.'</option>'."\n";
    }
  }
?> 
```

假设`$row['req_type']`是 中的值之一`$options`。我强烈建议引用您的数组元素（即`$row['req_type']`，而不是`$row[req_type]`. 后一种方法会在`error_reporting(E_ALL)`

您可能还想查看[phpbuilder.com](http://phpbuilder.com)等资源。有些文章已经过时了，但会为您提供一些有关如何更好地构建代码的基础知识。（例如，将您的 HTML 与 PHP 代码分开将有助于在这种情况下的可读性）。

**编辑**：根据评论，显示的任何信息都应正确转义（参见[`htmlentities()`](http://php.net/htmlentities)示例）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-05-28T18:25:50.393

奈杰尔，

查看带有复选标记的答案。它让我开始解决我的问题。首先我从表中选择我的数据，然后我选择我想要在下拉菜单中显示的数据。如果主表中的数据与所选下拉表中的数据匹配，则会回显。

```
$query9 = "SELECT *
       FROM vehicles
       WHERE VID = '".$VID."'
       ";

$result9=mysql_query($query9);
while($row9 = mysql_fetch_array($result9)){
    $vdate=$row9['DateBid'];
    $vmodelid=$row9['ModelID'];
    $vMileage=$row9['Mileage'];
    $vHighBid=$row9['HighBid'];
    $vPurchased=$row9['Purchased'];
    $vDamage=$row9['Damage'];
    $vNotes=$row9['Notes'];
    $vKBBH=$row9['KBBH'];
    $vKBBM=$row9['KBBM'];
    $vKBBL=$row9['KBBL'];
    $vKBBR=$row9['KBBR'];
    $vYID=$row9['YID'];
    $vMID=$row9['MID'];
    $vModelID=$row9['ModelID'];
    $vELID=$row9['ELID'];
    $vECID=$row9['ECID'];
    $vEFID=$row9['EFID'];
    $vColorID=$row9['ColorID'];
    $vRID=$row9['RID'];
    $vFID=$row9['FID'];
    $vDID=$row9['DID'];
    $vTID=$row9['TID'];
}

$query1 = "SELECT * FROM year ORDER BY Year ASC";
$result1=mysql_query($query1);
echo "<select  name='Year'>";
while($row1 = mysql_fetch_array($result1)){
    echo "<option value = '{$row1['YID']}'";
    if ($vYID == $row1['YID'])
        echo "selected = 'selected'";
    echo ">{$row1['Year']}</option>";
}
echo "</select>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-16T15:54:27.993

感谢大家的帮助。虽然我无法得到任何工作的答案，但它给了我一些想法，我已经完成了这项工作！我最终以一种冗长的方式解决了它，但是嘿，如果它没有坏，请不要修复它。

```
if ($row[$req_type]=='House'){
    $sel_req_type1='selected';
}
else if ($row[$req_type]=='Bugalow'){
    $sel_req_type2='selected';
} 
```

等等等等等等

在表中：

```
<option $sel_req_type1>House</option>
<option $sel_req_type2>Bulgalow</option> 
```

等等等等等等

我还有其他问题需要克服，即文本字段的 htmlentities 和引用数组元素（即`$row['req_type']`代替`$row[req_type]`. 但我会在另一个问题上问这个问题。再次感谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-16T03:05:48.217

```
 <?php
            $result = $db->sql_query("SELECT * FROM ".$prefix."_users WHERE userid='$userid'");    
            $row = $db->sql_fetchrow($result);

            // options defined here
            $options = array('House', 'Bungalow', 'Flat/Apartment', 'Studio', 'Villa', 'Any');

       ?>     
            <center><font class="title"><?php echo _CHANGE_MY_INFORMATION; ?></font></center><br />

            <center> All fields must be filled </center> 
            <form name="EditMyInfoForm" method="POST" action="users.php" enctype="multipart/form-data">           
              <table align="center" border="0" width="720" id="table1" cellpadding="2" bordercolor="#C0C0C0">        
                <tr>                
                  <td align="right">Telephone :</td>                
                  <td>
                    <input type="text" name="telephone" size="27" value="<?php echo htmlentities($row['telephone']); ?>" /> Inc. dialing codes
                  </td>        
                </tr>        
                <tr>                
                  <td align="right">Type of property required :</td>                                          
                  <td>Select from list:
                    <select name="req_type">
                  <?php foreach($options as $option): ?>     
                      <option value="<?php echo $option; ?>" <?php if($row['req_type'] == $option) echo 'selected="selected"'; ?>><?php echo $option; ?></option>                  
                  <?php endforeach; ?>
                     </select>  
                   </td>          
                  </tr>

... 
```

哎呀..有点太得意忘形了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-15T22:45:47.647

可能效率不高，但它很简单并且可以完成工作。

```
$dropdown = str_replace("<option value=\"".$row[column]."\">","<option value=\"".$row[column]."\" selected>",$dropdown); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-10-16T01:25:59.557

谢谢欧文。您的代码看起来很完美，但给出了很多 php 错误。我将其简化为此，但只是将空格作为选项：

```
<td>Select from list: <select name=\"req_type\">        

$option = array('House', 'Bungalow', 'Flat/Apartment', 'Studio', 'Villa', 'Any');

foreach($option as $option) {  
if ($option == $row[req_type]) {    
    <option selected>$option</option>} 
else {    
<option>$option</option>}};
</select></td> 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2008-10-15T19:07:14.907

这是另一种解决方法。

```
<?php
$query = "SELECT * FROM ".$prefix."_users WHERE userid='$userid'";
$result = mysql_query($query); ?>
$options = array('House', 'Bungalow', 'Flat/Apartment', 'Studio', 'Villa', 'Any');
<select name="venue">
<?php
    while($row = mysql_fetch_array($result)) {
        print '<option value="'.$option.'"';
        if($row['req_type'] == $option) {
            print 'selected';
        }
        print '>'.$option.'</option>';
    } 
?>
</select> 
```

# asp.net - asp.net 超链接控件

> ID：205733
> 
> 赞同：1
> 
> 时间：2008-10-15T17:54:10.263
> 
> 标签：asp.net, hyperlink

是否可以调用类的静态属性来设置 navigateurl 属性？

> ```
> <asp:HyperLink ID="hlRegister" NavigateUrl="<%= SomeClass.Property %>"  runat="server" /> 
> ```

**当然不使用代码隐藏！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-15T18:01:06.613

你不需要后面的代码。你可以试试，就像我刚刚做的那样。我用你所拥有的代码创建了一个简单的页面，然后创建了一个名为 SomeClass 的类，其属性名为 Property。它对我来说很好，就像你在上面设置的那样。

编辑：好的，它没有编译错误..但它给我的不是我正在寻找的结果。

[http://localhost:3061/Sample/%3C%=%20SomeClass.Property.ToString()%20%%3E](http://localhost:3061/Sample/%3C%=%20SomeClass.Property.ToString()%20%%3E)

使用：

```
public static class SomeClass
{
    public static string Property
    {
        get { return "http://www.google.com"; }
    }
} 
```

和

```
<asp:HyperLink ID="hlRegister" NavigateUrl='<%= SomeClass.Property.ToString() %>' Text="Goooooogle" runat="server" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-15T18:30:15.387

您可以这样做，但为避免语法错误，您必须将示例修改为如下所示。

```
 <asp:HyperLink ID="hlRegister" 
        NavigateUrl='<%= SomeClass.Property %>'  runat="server" /> 
```

请注意在脚本周围使用单引号而不是双引号的细微差别。

但是，有人可能真的会问，为什么不直接在代码隐藏中进行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-15T17:55:51.727

当然，在后面的代码中：

```
hl.NavigateUrl = Class.Static().ToString(); 
```

# matlab - 在 Matlab 中读取和写入二进制文件

> ID：205735
> 
> 赞同：15
> 
> 时间：2008-10-15T17:54:33.553
> 
> 标签：matlab, file-io, binary

我对matlab的了解只是在需要知道的基础上，所以这可能是一个基本的问题。然而它来了：

我有一个包含以二进制格式存储的数据（16 位整数）的文件。如何将它读入matlab中的向量/数组？如何将这些数据写入 matlab 中的文件？在读取/写入大量数据（千兆字节）时，是否有任何智能调整来提高性能速度？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-10-15T20:07:27.203

正如[Bill the Lizard](https://stackoverflow.com/questions/205735/read-and-write-fromto-a-binary-file-in-matlab#205819)所写，您可以使用 fread 将数据加载到向量中。我只想扩展他的答案。

### 读取数据

```
>> fid=fopen('data.bin','rb') % opens the file for reading
>> A = fread(fid, count, 'int16') % reads _count_ elements and stores them in A. 
```

命令*fopen*和*fread*默认为整数的 Little-endian[1] 编码。如果您的文件是大端编码的，您需要将*fread*更改为

```
>> A = fread(fid, count, 'int16', 'ieee-be'); 
```

另外，如果您想阅读整个文件集

```
>> count=inf; 
```

如果您想将数据读入具有*n*列的矩阵，请使用

```
>> count=[n inf]; 
```

### 写入数据

至于将数据写入文件。[比尔](https://stackoverflow.com/questions/205735/read-and-write-fromto-a-binary-file-in-matlab#205819)回答中的命令*fwrite*将写入二进制文件。如果要将数据写入文本文件，可以使用*dlmwrite*

 *```
>> dlmwrite('data.csv',A,','); 
```

### 参考

[1] [http://en.wikipedia.org/wiki/Endianness](http://en.wikipedia.org/wiki/Endianness)

### 更新

1.  二进制数据的机器格式（IE、*ieee-be*、 *ieee-le*、*vaxd*等）可以在 Matlab 中的 *fopen*或*fread*命令中指定。可以在 Matlab 的*fopen*文档中找到支持的机器格式的详细信息。

2.  [Scott French对](https://stackoverflow.com/users/4928/scott-french)[比尔回答](https://stackoverflow.com/questions/205735/read-and-write-fromto-a-binary-file-in-matlab#205819)的评论 建议将数据读入 int16 变量。为此，请使用

    ```
    >> A = int16(fread(fid,count,precision,machineFormat)); 
    ```

    其中*count*是要读取的数据的大小/形状，*precision*是数据格式，*machineformat* 是每个字节的编码。

3.  请参阅命令*fseek*在文件中移动。例如，

    ```
    >> fseek(fid,0,'bof'); 
    ```

    将文件倒回到*bof*代表*文件开头的开头*。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-10-15T18:14:17.477

假设您知道文件中存储了多少值，您可以执行类似的操作将数据读入数组。

```
fid = fopen('data.bin','rb')
A = fread(fid, count, 'int16') 
```

要将数据写入文件，请执行以下操作：

```
fid = fopen('data.bin','w')
count = fwrite(fid, A, 'int16') 
```

fwrite 函数返回写入文件的*元素数（不是字节数）。*

就性能调整而言，您可以分块读取数据，只使用您需要处理的数据。这在任何语言中都是一样的，并且没有办法加快它特定于 Matlab 的速度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-15T18:03:27.513

我通常讨厌在回复中看到链接，但这看起来非常接近：

[http://www.mathworks.com/support/tech-notes/1400/1403.html](http://www.mathworks.com/support/tech-notes/1400/1403.html)

至于第二部分的性能调优，我用Matlab已经6年了，所以不知道。

高温高压

# sql - 获取Oracle中所有表的列表？

> ID：205736
> 
> 赞同：1165
> 
> 时间：2008-10-15T17:54:49.387
> 
> 标签：sql, oracle

如何查询 Oracle 数据库以显示其中所有表的名称？

* * *

## 回答 #1

> 赞同：1423
> 
> 时间：2008-10-15T17:56:47.607

```
SELECT owner, table_name
  FROM dba_tables 
```

这是假设您有权访问`DBA_TABLES`数据字典视图。如果您没有这些权限但需要它们，您可以请求 DBA 显式授予您对该表的权限，或者 DBA 授予您`SELECT ANY DICTIONARY`权限或`SELECT_CATALOG_ROLE`角色（其中任何一个都允许您查询任何数据字典表）。当然，您可能希望排除某些模式，例如`SYS`您`SYSTEM`可能不关心的具有大量 Oracle 表的模式。

或者，如果您无权访问`DBA_TABLES`，您可以通过`ALL_TABLES`视图查看您的帐户有权访问的所有表：

```
SELECT owner, table_name
  FROM all_tables 
```

虽然，这可能是数据库中可用表的子集（`ALL_TABLES`向您显示您的用户已被授予访问权限的所有表的信息）。

如果您只关心您拥有的表，而不是您有权访问的表，您可以使用`USER_TABLES`：

```
SELECT table_name
  FROM user_tables 
```

由于`USER_TABLES`仅包含有关您拥有的表的信息，因此它没有`OWNER`列 - 根据定义，所有者就是您。

Oracle 也有许多可以使用的遗留数据字典视图—— `TAB`、`DICT`、`TABS`和`CAT`例如——。一般来说，除非您绝对需要将脚本反向移植到 Oracle 6，否则我不建议使用这些旧视图。Oracle 已经很长时间没有更改这些视图，因此它们经常在使用较新类型的对象时遇到问题。例如，视图`TAB`和`CAT`视图都显示有关用户回收站中的表的信息，而`[DBA|ALL|USER]_TABLES`视图都将这些信息过滤掉。 `CAT`还显示有关物化视图日志的信息，其中`TABLE_TYPE`包含“TABLE”，这不太可能是您真正想要的。 `DICT`结合表和同义词，并没有告诉你谁拥有该对象。

* * *

## 回答 #2

> 赞同：187
> 
> 时间：2008-10-15T18:12:19.773

查询`user_tables`并`dba_tables`没有工作。
这个做了：

```
select table_name from all_tables 
```

* * *

## 回答 #3

> 赞同：67
> 
> 时间：2009-09-04T07:34:16.140

更进一步，还有另一个名为 cols (all_tab_columns) 的视图可用于确定哪些表包含给定的列名。

例如：

```
SELECT table_name, column_name
FROM cols
WHERE table_name LIKE 'EST%'
AND column_name LIKE '%CALLREF%'; 
```

查找名称以 EST 开头的所有表以及名称中任何位置包含 CALLREF 的列。

这可以帮助您确定要加入哪些列，例如，取决于您的表和列命名约定。

* * *

## 回答 #4

> 赞同：56
> 
> 时间：2014-07-17T16:20:11.767

## 为了更好地观看`sqlplus`

如果您正在使用，您可能需要首先设置一些参数，以便在您的列被破坏时更好地查看（这些变量在您退出会话`sqlplus`后不应持续存在）：`sqlplus`

```
set colsep '|'
set linesize 167
set pagesize 30
set pagesize 1000 
```

## 显示所有表格

然后你可以使用这样的东西来查看所有的表名：

```
SELECT table_name, owner, tablespace_name FROM all_tables; 
```

## 显示您拥有的表

正如@Justin Cave 所提到的，您可以使用它来仅显示您拥有的表格：

```
SELECT table_name FROM user_tables; 
```

## 不要忘记视图

请记住，某些“表格”实际上可能是“视图”，因此您也可以尝试运行类似的东西：

```
SELECT view_name FROM all_views; 
```

## 结果

这应该会产生一些看起来相当可接受的东西，例如：

![结果](https://i.stack.imgur.com/s0Hb5.png)

* * *

## 回答 #5

> 赞同：23
> 
> 时间：2012-12-21T16:32:06.070

为当前用户选择表的简单查询：

```
 SELECT table_name FROM user_tables; 
```

* * *

## 回答 #6

> 赞同：21
> 
> 时间：2014-10-08T09:28:32.360

```
 select object_name from user_objects where object_type='TABLE'; 
```

- - - - - - - - 或者 - - - - - - - - -

```
 select * from tab; 
```

- - - - - - - - 或者 - - - - - - - - -

```
 select table_name from user_tables; 
```

* * *

## 回答 #7

> 赞同：15
> 
> 时间：2012-04-25T17:30:17.797

试试下面的数据字典视图。

```
tabs
dba_tables
all_tables
user_tables 
```

* * *

## 回答 #8

> 赞同：11
> 
> 时间：2016-08-17T10:28:39.520

Oracle 数据库使用以下查询显示所有表的名称

```
从 dba_tables 中选择所有者、表名；

从所有表中选择所有者，表名；

从用户表中选择表名；
```

查看更多：[http ://www.plsqlinformation.com/2016/08/get-list-of-all-tables-in-oracle.html](http://www.plsqlinformation.com/2016/08/get-list-of-all-tables-in-oracle.html)

* * *

## 回答 #9

> 赞同：9
> 
> 时间：2008-10-15T18:08:50.170

尝试从列出当前用户拥有的表的[user_tables中进行选择。](http://download.oracle.com/docs/cd/B28359_01/server.111/b28320/statviews_5443.htm#REFRN26286)

* * *

## 回答 #10

> 赞同：8
> 
> 时间：2014-03-07T18:11:21.427

使用其中任何一个，您可以选择：

```
SELECT DISTINCT OWNER, OBJECT_NAME 
    FROM DBA_OBJECTS 
    WHERE OBJECT_TYPE = 'TABLE' AND OWNER='SOME_SCHEMA_NAME';

SELECT DISTINCT OWNER, OBJECT_NAME 
    FROM ALL_OBJECTS 
    WHERE OBJECT_TYPE = 'TABLE' AND OWNER='SOME_SCHEMA_NAME'; 
```

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2012-08-14T06:28:48.827

```
select * from dba_tables 
```

仅当您登录的用户具有`sysdba`权限时，才提供所有用户的所有表。

* * *

## 回答 #12

> 赞同：6
> 
> 时间：2020-09-16T12:14:51.093

**执行以下命令：**

**显示 Oracle 数据库中的所有表**

`sql> SELECT table_name FROM dba_tables;`

**显示当前用户拥有的表**

`sql> SELECT table_name FROM user_tables;`

**显示当前用户可以访问的表**

`sql> SELECT table_name FROM all_tables ORDER BY table_name;` [![下图说明了可以从 user_tables、all_tables 和 dba_tables 视图返回的表：](https://i.stack.imgur.com/10au5.png)](https://i.stack.imgur.com/10au5.png)

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2016-11-11T15:31:02.910

我没有找到指向使用的答案

```
DBA_ALL_TABLES (ALL_ALL_TABLES/USER_ALL_TABLES) 
```

所以决定也添加我的版本。这个视图实际上返回了更多的 DBA_TABLES，因为它也返回了对象表 ( [http://docs.oracle.com/cd/E11882_01/server.112/e40402/statviews_1003.htm](http://docs.oracle.com/cd/E11882_01/server.112/e40402/statviews_1003.htm) )。

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2016-06-21T06:18:34.677

下面是一段带注释的 SQL 查询片段，描述了您可以如何使用这些选项：

```
-- need to have select catalog role
SELECT * FROM dba_tables;

-- to see tables of your schema
SELECT * FROM user_tables;

-- tables inside your schema and tables of other schema which you possess select grants on
SELECT * FROM all_tables; 
```

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2016-10-09T16:09:54.233

您可以使用[Oracle 数据字典](https://docs.oracle.com/cd/B10501_01/server.920/a96524/c05dicti.htm)来获取有关 oracle 对象的信息。

您可以通过不同方式获取表格列表：

```
select * 
from dba_tables 
```

或者例如：

```
select * 
from dba_objects 
where object_type = 'TABLE' 
```

然后您可以使用表名获取表列：

```
select * 
from dba_tab_columns 
```

然后您可以获得依赖项列表（触发器、视图等）：

```
select * 
from dba_dependencies
where referenced_type='TABLE' and referenced_name=:t_name 
```

然后你可以得到这个对象的文本源：

```
select * from dba_source 
```

如果需要，您可以使用`USER`or`ALL`视图代替`DBA`。

* * *

## 回答 #16

> 赞同：4
> 
> 时间：2017-10-25T11:44:29.663

包括视图：

```
SELECT owner, table_name as table_view
  FROM dba_tables
UNION ALL
SELECT owner, view_name as table_view
  FROM DBA_VIEWS 
```

* * *

## 回答 #17

> 赞同：4
> 
> 时间：2017-11-20T15:37:39.277

我们可以从以下查询中获取所有表，包括列详细信息：

```
SELECT * FROM user_tab_columns; 
```

* * *

## 回答 #18

> 赞同：4
> 
> 时间：2019-03-31T15:49:04.170

[**SQLcl**](https://www.oracle.com/in/database/technologies/appdev/sqlcl.html)（它是 Oracle 数据库的免费命令行界面）中提供的一个新特性是

**`Tables`**别名。

以下是几个示例，展示了该功能的用法和其他方面。首先，连接到`sql`命令行（`sql.exe`在 Windows 中）会话。建议在运行任何其他显示数据的命令或查询之前输入此 sqlcl 特定命令。

```
SQL> set sqlformat ansiconsole     -- resizes the columns to the width of the 
                                   -- data to save space 
```

**`SQL> tables`**

```
TABLES
-----------
REGIONS
LOCATIONS
DEPARTMENTS
JOBS
EMPLOYEES
JOB_HISTORY
.. 
```

要知道`tables`别名指的是什么，您可以简单地使用`alias list <alias>`

```
SQL> alias list tables
tables - tables <schema> - show tables from schema
--------------------------------------------------

 select table_name "TABLES" from user_tables 
```

您不必定义此别名，因为它在 SQLcl 下默认提供。如果您想列出来自特定模式的表，使用新的用户定义别名并将模式名称作为绑定参数传递，并且只显示一组列，您可以使用

**`SQL> alias tables_schema = select owner, table_name, last_analyzed from all_tables where owner = :ownr;`**

此后，您可以简单地将模式名称作为参数传递

**`SQL> tables_schema HR`**

```
OWNER   TABLE_NAME               LAST_ANALYZED
HR      DUMMY1                   18-10-18
HR      YOURTAB2                 16-11-18
HR      YOURTABLE                01-12-18
HR      ID_TABLE                 05-12-18
HR      REGIONS                  26-05-18
HR      LOCATIONS                26-05-18
HR      DEPARTMENTS              26-05-18
HR      JOBS                     26-05-18
HR      EMPLOYEES                12-10-18
..
.. 
```

一个更复杂的预定义别名称为**`Tables2`**，它显示其他几个列。

```
SQL> tables2

Tables
======
TABLE_NAME                 NUM_ROWS   BLOCKS   UNFORMATTED_SIZE COMPRESSION     INDEX_COUNT   CONSTRAINT_COUNT   PART_COUNT LAST_ANALYZED
AN_IP_TABLE                       0        0                  0 Disabled                  0                  0            0 > Month
PARTTABLE                         0        0                  0                           1                  0            1 > Month
TST2                              0        0                  0 Disabled                  0                  0            0 > Month
TST3                              0        0                  0 Disabled                  0                  0            0 > Month
MANAGE_EMPLYEE                    0        0                  0 Disabled                  0                  0            0 > Month
PRODUCT                           0        0                  0 Disabled                  0                  0            0 > Month
ALL_TAB_X78EHRYFK                 0        0                  0 Disabled                  0                  0            0 > Month
TBW                               0        0                  0 Disabled                  0                  0            0 > Month
DEPT                              0        0                  0 Disabled                  0                  0            0 > Month 
```

要知道它在后台运行什么查询，请输入

```
alias list tables2 
```

这将向您展示一个稍微复杂的查询以及`column`SQL*Plus 中常用的预定义定义。

*Jeff Smith*[**在这里**](https://www.thatjeffsmith.com/archive/2015/11/object-search-in-sqlcl/)解释了更多关于别名的信息[](https://www.thatjeffsmith.com/archive/2015/11/object-search-in-sqlcl/)

 *** * *

## 回答 #19

> 赞同：2
> 
> 时间：2014-11-09T12:36:16.327

以下查询仅列出了所需的数据，而其他答案给了我额外的数据，这让我感到困惑。

```
select table_name from user_tables; 
```

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2018-04-18T05:33:55.167

我正在寻找属于按列 ID 顺序排序的模式表的所有列名称的列表。

这是我正在使用的查询：-

```
SELECT COLUMN_NAME
FROM ALL_TAB_COLUMNS
WHERE OWNER = 'schema_owner_username' AND TABLE_NAME='table_name'
ORDER BY COLUMN_ID ASC; 
```

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2019-07-09T13:35:41.600

实际上，可以通过 SQL 查询获得表列表。也可以通过允许生成数据字典的工具来实现，例如[ERWIN](https://erwin.com/products/erwin-data-modeler/)、[Toad Data Modeler](https://www.quest.com/fr-fr/products/toad-data-modeler/#)或[ERBuilder](https://soft-builder.com/en/erbuilder-data-modeler/)。使用这些工具，除了表名之外，您还将拥有字段、它们的类型、对象，例如（触发器、序列、域、视图......）

下面的步骤来生成你的表定义：

1.  您必须对数据库进行逆向工程
    *   在 Toad 数据建模器中：菜单 -> 文件 -> 逆向工程 -> 逆向工程向导
    *   在 ERBuilder 数据建模器中：菜单 -> 文件 -> 逆向工程

您的数据库将在软件中显示为实体关系图。

2.  生成将包含您的表定义的数据字典
    *   在 Toad 数据建模器中：菜单 -> 模型 -> 生成报告 -> 运行
    *   在 ERBuilder 数据建模器中：菜单 -> 工具 -> 生成模型文档

* * *

## 回答 #22

> 赞同：-1
> 
> 时间：2019-12-03T14:07:10.587

```
select * from all_all_tables 
```

开头的这个额外的“全部”给出了额外的 3 列，它们是：

```
OBJECT_ID_TYPE
TABLE_TYPE_OWNER
TABLE_TYPE 
```

* * *

## 回答 #23

> 赞同：-1
> 
> 时间：2020-06-30T21:04:01.900

要获取所有表名，我们可以使用：

```
Select  owner, table_name  from all_tables; 
```

如果你有 dba 权限，你可以使用：

```
Select owner, table_name from dba_tables; 
```

* * *

## 回答 #24

> 赞同：-1
> 
> 时间：2020-11-06T16:03:15.820

当前用户登录模式中的表

```
select * from tabs; 
```

# java - Java XML 绑定

> ID：205749
> 
> 赞同：20
> 
> 时间：2008-10-15T17:57:13.360
> 
> 标签：java, xml, jaxb, castor, xmlbeans

您使用什么将 XML 绑定到 Java？JAXB、Castor 和 XMLBeans 是一些可用的选择。我看到的比较都是三四年前的。我愿意接受其他建议。编组/解编组性能和易用性特别令人感兴趣。

澄清：我不仅想看看你使用什么框架，还想看看你使用其中一个框架而不是其他框架的理由。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-10-15T20:08:59.570

如果您想做出明智的决定，您需要清楚为什么要在 XML 和 java 对象之间进行转换。原因是这个领域的不同技术试图解决不同的问题。不同的工具分为两类：

1.  XML 数据绑定 - 指将 XML 文档中的信息表示为计算机内存中的对象的过程。通常，这意味着定义 XSD 并生成等效的 java 源代码。不同语言之间的互操作是重中之重（因此使用了 XSD）——最常见的是用于实现基于 SOAP 的 Web 服务。
2.  XML 序列化 - 是指将内存中对象的图形写入流，以便它可以在某处或其他时间重构。你手动编写java类；xml 表示是次要的。此外，对性能的需求通常更大，而与其他语言（如 .net）的互操作需求通常较低。

对于 xml 序列化，Xstream 很难被击败。JAXB 是 XML 绑定的标准。

在任何一种情况下，如果您使用的是 J2EE，则需要特别注意从 JPA 检索到的类，因为类代理和持久性特定的集合类型可能会混淆绑定/序列化工具。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-10-15T19:47:20.690

[吉](http://www.jibx.org)宝 以前我使用[Castor XML](http://www.castor.org/xml-framework.html)，但 JiBX 被证明要好得多，尤其是在性能方面（将一些应用程序代码从 Castor XML 直接移植到 JiBX 使其速度提高了 9 倍）。我还发现 JiBX 的映射格式比 Castor 的更优雅。

JiBX 通过使用编译后字节码操作而不是 Castor 采用的反射方法来实现其性能。这样做的好处是它对编写映射类的方式要求较少。不需要 getter、setter 和无参数构造函数来满足这些工具。大多数时候，您可以在不考虑映射问题的情况下编写类，然后在不修改的情况下对其进行映射。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-10-15T20:15:10.650

如果您有 XML 的 XSD，并且不需要将数据绑定到现有的一组类，那么我真的很喜欢[XMLBeans](http://xmlbeans.apache.org/)。基本上，它是这样工作的：

*   编译 XSD
*   使用生成的 java 类来读取/写入符合此模式的文档

将 XML 文档绑定到生成的类非常简单：

```
EmployeesDocument empDoc = EmployeesDocument.Factory.parse(xmlFile); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-10-15T18:10:36.953

我们使用[xstream](http://xstream.codehaus.org/)。编组/解组是微不足道的。有关示例，请参阅他们的[教程](http://xstream.codehaus.org/tutorial.html)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-10-15T18:28:31.927

[Jibx](http://jibx.sourceforge.net/)是这里使用的。它非常快，但绑定可能有点棘手。但是，如果您有描述域对象的 XML 模式，它会特别有用，因为它确实可以很好地映射到 XSD（甚至还有一个 beta 工具 XSD2Jibx，它可以获取 XSD 并创建存根域类和映射，然后您可以获取并哄骗适合您现有的域模型）。

它操作字节码，因此它必须在 Java .class 文件的初始编译之后运行。您可以使用 Maven 插件，或者直接使用它（Eclipse 插件似乎对我不起作用）。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-10-15T18:45:03.797

我使用 Jaxb 取得了不同程度的成功。当时（几年前）整体文档乏善可陈，基本使用文档（包括从哪里下载实现）很难找到或变化。

编写 Java 类的解析器非常好，与原始 XSD 几乎没有差异（尽管我认为它在支持抽象 XML 元素方面存在问题）。

从那以后我就没有使用过它，但是我有一个即将进行的项目，它只需要这样一个框架，我很想知道其他人如何看待上述内容。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-10-15T19:40:22.373

我在 7 年前用过蓖麻——效果很好。使用 DTD。那个时候选择不多。

在当前的项目中，我使用了
1) JAXB——基于标准、可用的参考实现、可用的命令行和 ant 工具。最新版本 - 2.1.8 需要 java 5+。
2) XStream——用于 Soap 解组——需要 Java 5+。不像最新的 JAXB 那样快速且符合标准。

BR，
~A

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-10-15T23:39:45.120

相关：[Java 中的 XML 序列化？](https://stackoverflow.com/questions/35785/xml-serialization-in-java)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-10-28T21:27:20.833

XmlBeans 是一个不错的选择，尤其是当您有“损坏的”XSD/WSDL 文件时。

唐提到

> EmployeesDocument empDoc = EmployeesDocument.Factory.parse(xmlFile);

..但它也可以采用节点、文件或几乎任何来源。

无需与命名空间打架，遍历您要解组的对象，然后 Factory.parse 它。

希望我在 2 周前找到它。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-10-15T17:59:22.733

我们使用蓖麻。它非常适合我们的需求。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-02-25T00:37:01.503

我想知道完全相同的问题，最后我找到了 IBM 进行的性能测试。[http://www.ibm.com/developerworks/library/x-databdopt2/](http://www.ibm.com/developerworks/library/x-databdopt2/)。我猜JiBX是我的选择，呵呵。

# wpf - 如何将 XAML 故事板动画添加到 XBAP 中完整的 WPF 自定义控件？

> ID：205751
> 
> 赞同：2
> 
> 时间：2008-10-15T17:57:41.847
> 
> 标签：wpf, xaml, controls, xbap

我们正在为 XBAP 应用程序创建自定义 WPF 控件（不是用户控件），并且我们希望添加一个情节提要动画以在鼠标悬停在控件上时将控件缩放为其原始大小的 110%。我们使用 Blend 来创建故事板，它编译得很好……但是，当我们运行时，它的动画不会达到 110%。我已经在这里和那里阅读了您无法在 XAML 中为自定义控件制作故事板动画的点点滴滴。有谁知道如何完全在 XAML 中为自定义控件执行此操作？

这是我们的自定义控件的 XAML：

```
 <Style TargetType="{x:Type controls:ExitButton}">
    <Style.Resources>
        <Storyboard x:Key="OnMouseEnter">
            <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Storyboard.TargetName="{x:Null}" Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleX)">
                <SplineDoubleKeyFrame KeyTime="00:00:00" Value="1"/>
                <SplineDoubleKeyFrame KeyTime="00:00:00.2000000" Value="1.1"/>
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Storyboard.TargetName="{x:Null}" Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleY)">
                <SplineDoubleKeyFrame KeyTime="00:00:00" Value="1"/>
                <SplineDoubleKeyFrame KeyTime="00:00:00.2000000" Value="1.1"/>
            </DoubleAnimationUsingKeyFrames>
        </Storyboard>
    </Style.Resources>
    <Style.Triggers>
        <Trigger Property="IsMouseOver" Value="True">
            <Trigger.EnterActions>
                <BeginStoryboard Storyboard="{StaticResource OnMouseEnter}" x:Name="OnMouseEnter_BeginStoryboard"/>
            </Trigger.EnterActions>
            <Setter Property="BitmapEffect">
                <Setter.Value>
                    <OuterGlowBitmapEffect GlowColor="Blue" GlowSize="4"/>
                </Setter.Value>
            </Setter>
        </Trigger>
        <Trigger Property="IsPressed" Value="True">
            <Setter Property="BitmapEffect">
                <Setter.Value>
                    <OuterGlowBitmapEffect GlowColor="Blue" GlowSize="8"/>
                </Setter.Value>
            </Setter>
        </Trigger>
    </Style.Triggers>
    <Setter Property="ToolTip" Value="Exit this Application" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type controls:ExitButton}">
                <Border Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}">

                    <Viewbox x:Name="ControlViewBox">
                        <Grid x:Name="ExitApplication" Width="35" Height="50">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="5" />
                                <RowDefinition Height="25" />
                                <RowDefinition Height="15" />
                            </Grid.RowDefinitions>

                            <Viewbox Grid.Row="1" Width="25" x:Name="ImageViewBox">
                                <Canvas Width="23" Height="23" HorizontalAlignment="Center">
                                    <Path Width="22.9708" Height="22.9703" Canvas.Left="4.06802e-005" Canvas.Top="0" Stretch="Fill" Data="F1 M 16.1087,1.25732C 16.1087,1.25732 12.4594,4.90935 11.4834,5.88135L 11.4834,5.88135C 10.5141,4.91203 6.86068,1.25871 6.86068,1.25871L 6.86068,1.25871C 5.18604,-0.416016 2.93538,-0.42131 1.25407,1.26131L 1.25407,1.26131C -0.417969,2.93335 -0.417969,5.18799 1.25407,6.86272L 1.25407,6.86272C 1.25407,6.86272 4.90739,10.5146 5.87939,11.4866L 5.87939,11.4866C 4.91138,12.4561 1.25806,16.1067 1.25806,16.1067L 1.25806,16.1067C -0.415283,17.7827 -0.415283,20.0374 1.26204,21.7134L 1.26204,21.7134C 2.9327,23.388 5.18604,23.3853 6.86068,21.7107L 6.86068,21.7107C 6.86068,21.7107 10.5114,18.0614 11.4834,17.0894L 11.4834,17.0894C 12.4527,18.0614 16.1087,21.7174 16.1087,21.7174L 16.1087,21.7174C 17.7861,23.3893 20.0367,23.388 21.7113,21.7134L 21.7113,21.7134C 23.3901,20.0347 23.3887,17.7853 21.7167,16.112L 21.7167,16.112C 21.7167,16.112 18.0607,12.4561 17.0887,11.4841L 17.0887,11.4841C 18.0607,10.5107 21.714,6.86003 21.714,6.86003L 21.714,6.86003C 23.3887,5.18269 23.3901,2.93335 21.7167,1.25732L 21.7167,1.25732C 20.878,0.418701 19.8953,0 18.9141,0L 18.9141,0C 17.9314,0 16.9487,0.418701 16.1087,1.25732 Z ">
                                        <Path.Fill>
                                            <LinearGradientBrush StartPoint="0.945183,0.945154" EndPoint="0.0547729,0.0547262">
                                                <LinearGradientBrush.GradientStops>
                                                    <GradientStop Color="#FFB12702" Offset="0"/>
                                                    <GradientStop Color="#FFD02F00" Offset="0.093399"/>
                                                    <GradientStop Color="#FFE87A5F" Offset="1"/>
                                                </LinearGradientBrush.GradientStops>
                                            </LinearGradientBrush>
                                        </Path.Fill>
                                    </Path>
                                    <Path Width="9.9987" Height="6.8707" Canvas.Left="11.246" Canvas.Top="0.665356" Stretch="Fill" Data="F1 M 18.9114,0.665359C 18.0847,0.663986 17.2727,1.03606 16.5807,1.72803L 11.9567,6.35466L 11.246,7.06404L 11.7194,7.53606L 12.4287,6.82666L 17.0567,2.20134C 18.262,1.03606 19.5647,1.03467 20.7727,2.20271L 21.2447,1.72932C 20.5553,1.03865 19.7434,0.665359 18.9194,0.665359L 18.9114,0.665359 Z ">
                                        <Path.Fill>
                                            <LinearGradientBrush StartPoint="0.616568,0.713077" EndPoint="1.02849,0.713077">
                                                <LinearGradientBrush.RelativeTransform>
                                                    <TransformGroup>
                                                        <SkewTransform CenterX="0.616568" CenterY="0.713077" AngleX="21.0093" AngleY="0"/>
                                                        <RotateTransform CenterX="0.616568" CenterY="0.713077" Angle="235.505"/>
                                                    </TransformGroup>
                                                </LinearGradientBrush.RelativeTransform>
                                                <LinearGradientBrush.GradientStops>
                                                    <GradientStop Color="#FFC12900" Offset="0"/>
                                                    <GradientStop Color="#FFFFE4DE" Offset="1"/>
                                                </LinearGradientBrush.GradientStops>
                                            </LinearGradientBrush>
                                        </Path.Fill>
                                    </Path>
                                    <Path Width="5.72795" Height="5.72534" Canvas.Left="0.660726" Canvas.Top="0.665359" Stretch="Fill" Data="F1 M 1.72607,1.73332C 1.03402,2.42268 0.662028,3.23601 0.660726,4.05998L 0.660726,4.05998C 0.662028,4.88802 1.0367,5.69865 1.73136,6.3907L 2.20207,5.91731C 1.0367,4.7093 1.0367,3.40935 2.19938,2.20671L 2.19938,2.20671C 3.40739,1.03735 4.70874,1.03606 5.91675,2.20532L 6.38867,1.73071C 5.69401,1.03735 4.88338,0.665359 4.05672,0.665359L 4.05672,0.665359C 3.22868,0.665359 2.41805,1.03735 1.72607,1.73332 Z ">
                                        <Path.Fill>
                                            <LinearGradientBrush StartPoint="0.593564,0.59328" EndPoint="1.16939,0.59328">
                                                <LinearGradientBrush.RelativeTransform>
                                                    <TransformGroup>
                                                        <SkewTransform CenterX="0.593564" CenterY="0.59328" AngleX="0.0259795" AngleY="0"/>
                                                        <RotateTransform CenterX="0.593564" CenterY="0.59328" Angle="225.013"/>
                                                    </TransformGroup>
                                                </LinearGradientBrush.RelativeTransform>
                                                <LinearGradientBrush.GradientStops>
                                                    <GradientStop Color="#FFC12900" Offset="0"/>
                                                    <GradientStop Color="#FFFFE4DE" Offset="1"/>
                                                </LinearGradientBrush.GradientStops>
                                            </LinearGradientBrush>
                                        </Path.Fill>
                                    </Path>
                                    <Path Width="6.86931" Height="9.99202" Canvas.Left="0.66471" Canvas.Top="11.2507" Stretch="Fill" Data="F1 M 6.3527,11.9561L 1.73136,16.5827C 1.0367,17.2734 0.663411,18.0867 0.664714,18.9106L 0.664714,18.9106C 0.663411,19.7374 1.03939,20.5507 1.73275,21.2427L 2.20605,20.7707L 2.20467,20.7707C 1.0367,19.5614 1.0367,18.2613 2.20207,17.0547L 6.82739,12.4321L 7.53402,11.7227L 7.06201,11.2507L 6.3527,11.9561 Z ">
                                        <Path.Fill>
                                            <LinearGradientBrush StartPoint="0.713103,0.616728" EndPoint="1.12533,0.616728">
                                                <LinearGradientBrush.RelativeTransform>
                                                    <TransformGroup>
                                                        <SkewTransform CenterX="0.713103" CenterY="0.616728" AngleX="-20.9846" AngleY="0"/>
                                                        <RotateTransform CenterX="0.713103" CenterY="0.616728" Angle="214.508"/>
                                                    </TransformGroup>
                                                </LinearGradientBrush.RelativeTransform>
                                                <LinearGradientBrush.GradientStops>
                                                    <GradientStop Color="#FFC12900" Offset="0"/>
                                                    <GradientStop Color="#FFFFE4DE" Offset="1"/>
                                                </LinearGradientBrush.GradientStops>
                                            </LinearGradientBrush>
                                        </Path.Fill>
                                    </Path>
                                </Canvas>
                            </Viewbox>
                            <TextBlock Grid.Row="2" Text="exit" HorizontalAlignment="Center" FontFamily="Calibri" Foreground="#FFFFFFFF" RenderTransformOrigin="0.5,0.5" VerticalAlignment="Center" FontSize="18">
                            <TextBlock.RenderTransform>
                                    <TransformGroup>
                                        <ScaleTransform ScaleX="1" ScaleY="1"/>
                                        <SkewTransform AngleX="0" AngleY="0"/>
                                        <RotateTransform Angle="0"/>
                                        <TranslateTransform X="0" Y="0"/>
                                    </TransformGroup>
                                </TextBlock.RenderTransform></TextBlock>
                        </Grid>
                    </Viewbox>

                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
    <Setter Property="RenderTransformOrigin" Value="0.5,0.5"/>
    <Setter Property="RenderTransform">
        <Setter.Value>
            <TransformGroup>
                <ScaleTransform ScaleX="1" ScaleY="1"/>
                <SkewTransform AngleX="0" AngleY="0"/>
                <RotateTransform Angle="0"/>
                <TranslateTransform X="0" Y="0"/>
            </TransformGroup>
        </Setter.Value>
    </Setter>
</Style> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-10-16T19:30:31.097

有可能......我只是认为你需要移动一些东西。**特别是，您需要将 Storyboard 移动到 ControlTemplate.Resources 部分......并将触发器移动到 ControlTemplate.Triggers 部分。**

我实际上构建了一个快速示例来尝试这个......并且它有效。这里是：

```
<Style TargetType="{x:Type controls:ExitButton}">
    <Setter Property="RenderTransformOrigin" Value="0.5,0.5"/>
    <Setter Property="RenderTransform">
        <Setter.Value>
                <TransformGroup>
                        <ScaleTransform ScaleX="1" ScaleY="1"/>
                        <SkewTransform AngleX="0" AngleY="0"/>
                        <RotateTransform Angle="0"/>
                        <TranslateTransform X="0" Y="0"/>
                </TransformGroup>
        </Setter.Value>
    </Setter>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type controls:ExitButton}">
                <ControlTemplate.Resources>
                    <Storyboard x:Key="OnMouseEnter">
                            <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Storyboard.TargetName="{x:Null}" Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleX)">
                                    <SplineDoubleKeyFrame KeyTime="00:00:00" Value="1"/>
                                    <SplineDoubleKeyFrame KeyTime="00:00:00.2000000" Value="1.1"/>
                            </DoubleAnimationUsingKeyFrames>
                            <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Storyboard.TargetName="{x:Null}" Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleY)">
                                    <SplineDoubleKeyFrame KeyTime="00:00:00" Value="1"/>
                                    <SplineDoubleKeyFrame KeyTime="00:00:00.2000000" Value="1.1"/>
                            </DoubleAnimationUsingKeyFrames>
                    </Storyboard>
                </ControlTemplate.Resources>
                <Border Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}">

                    <Viewbox x:Name="ControlViewBox">
                        <Grid x:Name="ExitApplication" Width="35" Height="50">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="5" />
                                <RowDefinition Height="25" />
                                <RowDefinition Height="15" />
                            </Grid.RowDefinitions>

                            <Viewbox Grid.Row="1" Width="25" x:Name="ImageViewBox">
                                <Canvas Width="23" Height="23" HorizontalAlignment="Center">
                                    <Path Width="22.9708" Height="22.9703" Canvas.Left="4.06802e-005" Canvas.Top="0" Stretch="Fill" Data="F1 M 16.1087,1.25732C 16.1087,1.25732 12.4594,4.90935 11.4834,5.88135L 11.4834,5.88135C 10.5141,4.91203 6.86068,1.25871 6.86068,1.25871L 6.86068,1.25871C 5.18604,-0.416016 2.93538,-0.42131 1.25407,1.26131L 1.25407,1.26131C -0.417969,2.93335 -0.417969,5.18799 1.25407,6.86272L 1.25407,6.86272C 1.25407,6.86272 4.90739,10.5146 5.87939,11.4866L 5.87939,11.4866C 4.91138,12.4561 1.25806,16.1067 1.25806,16.1067L 1.25806,16.1067C -0.415283,17.7827 -0.415283,20.0374 1.26204,21.7134L 1.26204,21.7134C 2.9327,23.388 5.18604,23.3853 6.86068,21.7107L 6.86068,21.7107C 6.86068,21.7107 10.5114,18.0614 11.4834,17.0894L 11.4834,17.0894C 12.4527,18.0614 16.1087,21.7174 16.1087,21.7174L 16.1087,21.7174C 17.7861,23.3893 20.0367,23.388 21.7113,21.7134L 21.7113,21.7134C 23.3901,20.0347 23.3887,17.7853 21.7167,16.112L 21.7167,16.112C 21.7167,16.112 18.0607,12.4561 17.0887,11.4841L 17.0887,11.4841C 18.0607,10.5107 21.714,6.86003 21.714,6.86003L 21.714,6.86003C 23.3887,5.18269 23.3901,2.93335 21.7167,1.25732L 21.7167,1.25732C 20.878,0.418701 19.8953,0 18.9141,0L 18.9141,0C 17.9314,0 16.9487,0.418701 16.1087,1.25732 Z ">
                                        <Path.Fill>
                                            <LinearGradientBrush StartPoint="0.945183,0.945154" EndPoint="0.0547729,0.0547262">
                                                <LinearGradientBrush.GradientStops>
                                                    <GradientStop Color="#FFB12702" Offset="0"/>
                                                    <GradientStop Color="#FFD02F00" Offset="0.093399"/>
                                                    <GradientStop Color="#FFE87A5F" Offset="1"/>
                                                </LinearGradientBrush.GradientStops>
                                            </LinearGradientBrush>
                                        </Path.Fill>
                                    </Path>
                                    <Path Width="9.9987" Height="6.8707" Canvas.Left="11.246" Canvas.Top="0.665356" Stretch="Fill" Data="F1 M 18.9114,0.665359C 18.0847,0.663986 17.2727,1.03606 16.5807,1.72803L 11.9567,6.35466L 11.246,7.06404L 11.7194,7.53606L 12.4287,6.82666L 17.0567,2.20134C 18.262,1.03606 19.5647,1.03467 20.7727,2.20271L 21.2447,1.72932C 20.5553,1.03865 19.7434,0.665359 18.9194,0.665359L 18.9114,0.665359 Z ">
                                        <Path.Fill>
                                            <LinearGradientBrush StartPoint="0.616568,0.713077" EndPoint="1.02849,0.713077">
                                                <LinearGradientBrush.RelativeTransform>
                                                    <TransformGroup>
                                                        <SkewTransform CenterX="0.616568" CenterY="0.713077" AngleX="21.0093" AngleY="0"/>
                                                        <RotateTransform CenterX="0.616568" CenterY="0.713077" Angle="235.505"/>
                                                    </TransformGroup>
                                                </LinearGradientBrush.RelativeTransform>
                                                <LinearGradientBrush.GradientStops>
                                                    <GradientStop Color="#FFC12900" Offset="0"/>
                                                    <GradientStop Color="#FFFFE4DE" Offset="1"/>
                                                </LinearGradientBrush.GradientStops>
                                            </LinearGradientBrush>
                                        </Path.Fill>
                                    </Path>
                                    <Path Width="5.72795" Height="5.72534" Canvas.Left="0.660726" Canvas.Top="0.665359" Stretch="Fill" Data="F1 M 1.72607,1.73332C 1.03402,2.42268 0.662028,3.23601 0.660726,4.05998L 0.660726,4.05998C 0.662028,4.88802 1.0367,5.69865 1.73136,6.3907L 2.20207,5.91731C 1.0367,4.7093 1.0367,3.40935 2.19938,2.20671L 2.19938,2.20671C 3.40739,1.03735 4.70874,1.03606 5.91675,2.20532L 6.38867,1.73071C 5.69401,1.03735 4.88338,0.665359 4.05672,0.665359L 4.05672,0.665359C 3.22868,0.665359 2.41805,1.03735 1.72607,1.73332 Z ">
                                        <Path.Fill>
                                            <LinearGradientBrush StartPoint="0.593564,0.59328" EndPoint="1.16939,0.59328">
                                                <LinearGradientBrush.RelativeTransform>
                                                    <TransformGroup>
                                                        <SkewTransform CenterX="0.593564" CenterY="0.59328" AngleX="0.0259795" AngleY="0"/>
                                                        <RotateTransform CenterX="0.593564" CenterY="0.59328" Angle="225.013"/>
                                                    </TransformGroup>
                                                </LinearGradientBrush.RelativeTransform>
                                                <LinearGradientBrush.GradientStops>
                                                    <GradientStop Color="#FFC12900" Offset="0"/>
                                                    <GradientStop Color="#FFFFE4DE" Offset="1"/>
                                                </LinearGradientBrush.GradientStops>
                                            </LinearGradientBrush>
                                        </Path.Fill>
                                    </Path>
                                    <Path Width="6.86931" Height="9.99202" Canvas.Left="0.66471" Canvas.Top="11.2507" Stretch="Fill" Data="F1 M 6.3527,11.9561L 1.73136,16.5827C 1.0367,17.2734 0.663411,18.0867 0.664714,18.9106L 0.664714,18.9106C 0.663411,19.7374 1.03939,20.5507 1.73275,21.2427L 2.20605,20.7707L 2.20467,20.7707C 1.0367,19.5614 1.0367,18.2613 2.20207,17.0547L 6.82739,12.4321L 7.53402,11.7227L 7.06201,11.2507L 6.3527,11.9561 Z ">
                                        <Path.Fill>
                                            <LinearGradientBrush StartPoint="0.713103,0.616728" EndPoint="1.12533,0.616728">
                                                <LinearGradientBrush.RelativeTransform>
                                                    <TransformGroup>
                                                        <SkewTransform CenterX="0.713103" CenterY="0.616728" AngleX="-20.9846" AngleY="0"/>
                                                        <RotateTransform CenterX="0.713103" CenterY="0.616728" Angle="214.508"/>
                                                    </TransformGroup>
                                                </LinearGradientBrush.RelativeTransform>
                                                <LinearGradientBrush.GradientStops>
                                                    <GradientStop Color="#FFC12900" Offset="0"/>
                                                    <GradientStop Color="#FFFFE4DE" Offset="1"/>
                                                </LinearGradientBrush.GradientStops>
                                            </LinearGradientBrush>
                                        </Path.Fill>
                                    </Path>
                                </Canvas>
                            </Viewbox>
                            <TextBlock Grid.Row="2" Text="exit" HorizontalAlignment="Center" FontFamily="Calibri" Foreground="#FFFFFFFF" RenderTransformOrigin="0.5,0.5" VerticalAlignment="Center" FontSize="18">
                            <TextBlock.RenderTransform>
                                        <TransformGroup>
                                                <ScaleTransform ScaleX="1" ScaleY="1"/>
                                                <SkewTransform AngleX="0" AngleY="0"/>
                                                <RotateTransform Angle="0"/>
                                                <TranslateTransform X="0" Y="0"/>
                                        </TransformGroup>
                                </TextBlock.RenderTransform></TextBlock>
                        </Grid>
                    </Viewbox>
                </Border>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Trigger.EnterActions>
                            <BeginStoryboard Storyboard="{StaticResource OnMouseEnter}" x:Name="OnMouseEnter_BeginStoryboard"/>
                        </Trigger.EnterActions>
                        <Setter Property="BitmapEffect">
                            <Setter.Value>
                                <OuterGlowBitmapEffect GlowColor="Blue" GlowSize="4"/>
                            </Setter.Value>
                        </Setter>
                    </Trigger>
                    <Trigger Property="IsPressed" Value="True">
                        <Setter Property="BitmapEffect">
                            <Setter.Value>
                                <OuterGlowBitmapEffect GlowColor="Blue" GlowSize="8"/>
                            </Setter.Value>
                        </Setter>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

# wpf - 如何实现类似于 Windows Vista 文件资源管理器中的地址位置栏（面包屑控件）？

> ID：205775
> 
> 赞同：5
> 
> 时间：2008-10-15T18:02:58.733
> 
> 标签：wpf, windows-vista, controls

Windows Vista 中的资源管理器控件非常方便，我希望能够将它合并到用 WPF 编写的应用程序中。我一直找不到作为框架一部分的*库存控制*。此应用程序是专门为 Windows Vista 开发的，因此具有与操作系统相同的外观和感觉是可取的。

可以使用[Microsoft.Win32.OpenFileDialog](http://msdn.microsoft.com/en-us/library/microsoft.win32.openfiledialog.aspx)，但问题是它看起来不像 Vista 的，所以它像拇指一样突出。

**任何关于良好实施的想法都会非常有帮助**。如果可能的话，我想远离第三方组件，但绝对愿意接受所有建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-10-15T18:07:06.960

[Actipro](http://blog.actiprosoftware.com/post/First-Look-Breadcrumb-for-WPF.aspx)是一个非常好的 WPF 面包屑控件。还有一个[开源 WPF 面包屑控件](http://www.codeproject.com/KB/tree/WPFBreadcrumbBar.aspx)，我实际上可能会尝试一下。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-16T06:23:41.343

我还没有尝试过，但是看看[VistaBridge](http://msdn.microsoft.com/en-us/library/ms756482.aspx) ……它为您提供了所有 Vista 外观对话框！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-16T09:50:23.967

我的博客上有一个 Microsoft.Win32 文件对话框的替代品，它为您提供了 Vista 外观，没有 VistaBridge 的复杂性，并且还向后兼容 XP。

[http://www.nbdtech.com/blog/archive/2008/07/15/Vista-style-open-and-save-dialogs-with-WPF-without-using.aspx](http://www.nbdtech.com/blog/archive/2008/07/15/Vista-style-open-and-save-dialogs-with-WPF-without-using.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-02-27T23:48:15.830

冒着听起来自私自利的风险，您可以在这里找到最好的 WPF 面包屑控件：

[http://www.teraque.com/Products/Explorer-Chrome-Suite](http://www.teraque.com/Products/Explorer-Chrome-Suite)

我花了一年时间尝试对 Window 的 Vista 控件进行逆向工程，因为没有一个现成的产品提供正确的外观和感觉。您迟早会遇到上述所有建议的限制。而且，我自己也经历过，我可以告诉你，尝试自己开发控件需要几个月的时间。仅围绕溢出逻辑的怪事就足以让它们吃掉两个月的时间。

祝你好运。如果有什么我可以为您解答的，请随时与我联系。

唐纳德·罗伊·艾雷

Donald.Roy.Airey@teraque.com

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2008-10-19T01:42:37.503

如果您正在为 .net Framework 3.5 编写代码，则调用公共对话框应该会显示正确的 Vista 时代对话框。

* * *

对不起，看来我弄错了。在以前的项目中，我使用[这个库](http://www.ookii.org/download.ashx?id=VistaDialogs)来调用 Vista 对话框。

# visual-studio-2008 - 如何修复 Visual Studio 2008 中的代码完整问题

> ID：205782
> 
> 赞同：2
> 
> 时间：2008-10-15T18:04:19.587
> 
> 标签：visual-studio-2008, xaml, intellisense, cider

Visual Studio 中的代码完整功能非常有用，它仍然适用于 C# 和 C++ 代码 - 但不再适用于 XAML (XML) 编辑。

是否有可以重新启用此功能的设置？我的同事仍然可以正常工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-15T18:39:50.217

我认为[MSDN 论坛上的这篇文章](http://forums.microsoft.com/MSDN/ShowPost.aspx?PageIndex=1&SiteID=1&PageID=1&PostID=4004417)可能会有所帮助。基本上，Win SDK 破坏了 XAML Intellisense。我认为还有一个更主流的（非注册表黑客）解决方案可用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-15T18:36:24.063

（我假设您通过“代码完成”表示智能感知）

xml 文档的 Intellisense 由 XSD 文件控制。编辑 xaml 文件时，请查看菜单栏。您应该会看到一个名为 XML 的菜单项。在此底部，您将看到一个菜单项“Schemas...”，单击它。

您将看到系统中所有可用模式的列表。弄乱这个列表，或者 VS 附带的模式（通常在 c:\program files\visual studio 9.0\xml\schemas 中）可能会导致 xml（又名 xaml）智能感知。

我首先建议确保在使用列中没有任何模式的检查或 X。所有单元格都应为空白（又名自动）。这样，VS 从您的 xml 文件中选取命名空间并应用此列表中的相应架构。

其次，检查 xml 文件中的命名空间。检查是否列出了相应的 XSD 架构。如果没有，请追捕并添加。

如果这两个不能解决问题，请获取您同事架构目录的完整副本并将其复制到您的目录上。打开该模式窗口并确保每个 XSD 都在其中，并设置为自动。

最后一步是修复安装 Visual Studio，然后是自动更新的好帮手。

* * *

如果您正在谈论插件“代码完整”，请从他们的网站获取最新版本并重新安装。SP1 可能破坏了您当前的安装。

# .net - YUI 数据表 .NET 网络服务

> ID：205783
> 
> 赞同：0
> 
> 时间：2008-10-15T18:04:40.053
> 
> 标签：.net, web-services, yui-datatable

有没有人有使用.NET web 服务填充 YUI 数据表的示例？

提前致谢。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-15T18:10:46.627

我不久前试过这个： http: [//mattberseth.com/blog/2008/09/dynamic_data_experimenting_wit.html](http://mattberseth.com/blog/2008/09/dynamic_data_experimenting_wit.html)

但是，您需要控制 Web 服务，以便可以将其转换为 XML、JSON 或您希望使用的任何格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-15T18:08:31.013

DataTable 控件：XHR 上的 XML 数据（Ajax 请求）与 POST

[http://developer.yahoo.com/yui/examples/datatable/dt_xhrpostxml.html](http://developer.yahoo.com/yui/examples/datatable/dt_xhrpostxml.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-16T10:49:17.703

使用 YUI 数据表，第 1 部分：入门

[http://yuiblog.com/blog/2008/10/15/datatable-260-part-one](http://yuiblog.com/blog/2008/10/15/datatable-260-part-one)

# ruby-on-rails - Rails：更改生产数据库的最佳方式

> ID：205793
> 
> 赞同：11
> 
> 时间：2008-10-15T18:07:55.337
> 
> 标签：ruby-on-rails, migration, production

我需要对正在使用的生产数据库进行更改。只需添加几列。我已经通过迁移对开发数据库进行了更改。更新生产数据库同时保留现有数据且不会过多中断操作的最佳方法是什么？

它是 MYSQL，我还需要将数据添加到列以及已经存在的记录。一列可以有一个默认值（它是布尔值），但另一列是时间戳，应该有一个任意的回溯值。行数不是很大。

因此，如果我使用迁移，我如何添加数据以及如何让它只做两个（或三个 - 我在生产数据库上添加数据 - 最新迁移，而它最初不是通过迁移构建的（我相信他们使用了模式代替）？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-10-16T05:19:59.223

我总是遵循这个程序：

*   使用 mysqldump 命令转储 prod 数据库
*   使用 mysql 命令使用转储填充开发/测试数据库
*   在开发/测试中运行迁移
*   检查迁移工作
*   使用 mysqldump 命令转储 prod 数据库（因为它可能已更改）在服务器上保留备份
*   在 prod 上运行迁移（使用 capristano）
*   测试迁移已在 prod 上工作
*   喝啤酒（一边看错误日志）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-11-07T16:47:19.223

听起来您处于生产数据库架构与您在 dev 中使用的架构不完全匹配的状态（尽管尚不完全清楚）。我会在沙子上画一条线，让 prod db 处于更好的状态。本质上，您要做的是确保 prod db 有一个“schema_info”表，其中列出了您>不想<曾经想在生产中运行的任何迁移。然后，您可以将迁移添加到您的心脏内容中，它们将针对生产数据库起作用。

完成后，您可以编写添加架构更改或添加数据的迁移，但是您需要非常小心的一件事是，如果您使用迁移添加数据，则必须在迁移本身中定义模型，如下所示：

```
class AddSomeColumnsToUserTable < ActiveRecord::Migration
  class User < ActiveRecord::Base; end
  def self.up
    add_column :users, :super_cool, :boolean, :default => :false
    u = User.find_by_login('cameron')
    u.super_cool = true
    u.save
  end

  def self.down
    remove_column :users, :super_cool
  end
end 
```

这样做的原因是，将来，您可能会在某些重构或其他过程中完全删除该模型。如果您没有在“User.find_by_login...”行定义用户类，则迁移将引发异常，这是一个很大的痛苦。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-10-15T18:14:34.153

您是否有理由不使用您在开发环境中使用的相同迁移？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-10-15T20:32:35.653

在迁移中添加一个列`add_column`应该是非破坏性的：它将生成一个“ALTER TABLE”语句。如果您知道创建后要放入列中的内容，则可以填写迁移中的值（如果行数很大，您可以选择耗时较少的替代方案）。

我认为删除或更改列的定义取决于平台：有些将允许就地删除列，有些将执行重命名-创建-选择-删除命令序列。

为了更具体，我们需要更多信息：您正在查看哪种迁移，您在哪个平台上运行，您是否需要在迁移过程中设置值？这样的东西会有很大帮助 - 只需编辑问题，这会将其推回到列表中。

# c# - 如何将滚动条向上移动一行？（在 C# 富文本框中）

> ID：205794
> 
> 赞同：4
> 
> 时间：2008-10-15T18:08:17.707
> 
> 标签：c#, richtextbox, scrollbar

对于我的 C# RichTextBox，我想以编程方式执行与单击垂直滚动条顶部的向上箭头相同的操作，这会将 RichTextBox 显示向上移动一行。这个代码是什么？谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-10-15T18:41:11.807

这就是我所做的：

```
using System.Runtime.InteropServices;

[DllImport("user32.dll")]
static extern int SendMessage(IntPtr hWnd, uint wMsg, 
                               UIntPtr wParam, IntPtr lParam); 
```

然后调用：

```
SendMessage(myRichTextBox.Handle, (uint)0x00B6, (UIntPtr)0, (IntPtr)(-1)); 
```

似乎工作正常 - 不过，您可能需要稍微调整一下。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-15T20:09:42.127

为了将来参考，EM_LINESCROLL 消息是您发送到任何多行编辑控件以设置滚动位置的消息。您可以垂直或水平滚动。有关详细信息，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/bb761615(VS.85).aspx)。

您还可以使用 Rich Edit Selection 方法，在其中设置字符索引（可以使用 EM_LINEINDEX 获得）然后调用 RichEdit.ScrollToCaret 即：

```
RichEdit.SelectionStart = SendMessage(RichEdit.Handle, EM_LINEINDEX, ScrollTo, 0);
RichEdit.ScrollToCaret(); 
```

这会将该行滚动到编辑控件的顶部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-15T18:17:01.433

window.scrollBy(0,20);

这将滚动窗口。20 是我过去使用的一个近似值，通常等于一行……但当然字体大小可能会影响一行的实际距离。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-15T18:29:12.237

如果您可以获得富文本框的滚动控件，您应该能够获得它的 SmallChange 属性并使用它来滚动文本。

# sql - 如何使用 SQL 将 SqlServer DateTime 转换为通用时间

> ID：205797
> 
> 赞同：2
> 
> 时间：2008-10-15T18:09:06.910
> 
> 标签：sql, sql-server, database

我有一个数据库，其中包含当前存储在本地时间的 DateTime 字段。即将进行的项目将要求将所有这些日期转换为世界时间。与其编写 ac# app 将这些时间转换为通用时间，我更愿意使用可用的 sqlserver/sql 功能将这些日期准​​确地转换为通用时间，因此我只需要一个更新脚本。为了准确起见，转换需要考虑夏令时波动等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-10-15T18:16:46.333

SQL 没有为此内置任何东西。

两种方法是`C# application`（您提到您不想要）或编写一个非常复杂的更新语句，例如：

```
UtcDate = DATEADD(hour, CASE WHEN OriginalDate BETWEEN x AND y THEN 4 
WHEN OriginalDate BETWEEN x2 AND y2 THEN 5 ... END, OriginalDate) 
```

注意 - 我建议使用[TZ4Net](http://www.babiej.demon.nl/Tz4Net/main.htm)`C# app`之类的 plus来处理转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-15T18:33:39.060

用户定义函数将允许您编写如下所示的 SQL 查询：

```
SELECT toUTC([MyDateColumn], [MyTimeZoneColumn]) FROM [MyTable] 
```

然后，您可以从服务器返回通用时间，而查询本身没有很多难看的语法。现在您可以使用类似于 Chris 发布的常规 SQL 来为此构建 UDF，但 SQL Server 2005 及更高版本将允许您使用 CLR（.Net：C# 可选）来构建 UDF。它对日期有更好的支持，并且可以更好地考虑时区和夏令时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-17T07:29:16.780

查看 convert 函数和 getutcdate 函数？

[http://msdn.microsoft.com/en-us/library/ms187928.aspx](http://msdn.microsoft.com/en-us/library/ms187928.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-09-02T16:35:39.967

[从 CodeProject.com](http://www.codeproject.com/KB/database/SQL2005_time_zones.aspx)查看此链接- 它完全符合您的要求：获取日期和时区，将它们传递给 UDF，并以 UTC 或任何其他时区获取日期。

重要提示：检查那篇文章的评论——作者不允许在某一点之后修改文章，并且评论中有用于 UDF 的代码的更新版本，解决了原始文章中未发现的一些问题代码。

ALSO IMPORTANT: 不要使用它来查询大型数据集。一次性加载到数据库中，或返回单行的 UTC 日期（如用户登录表或你有什么）非常好。

如果你想要性能，唯一真正可接受的时区转换方法是有一个查找表来处理一年中每个小时的每个可能的时区转换，并带有一个案例语句来处理年份之间的翻转（即 12 月 31 日 - 1 月1，反之亦然。）是的，表很大，但查询性能为零。

# windows - 对于 Windows 上的远程协作工具有什么建议吗？

> ID：205800
> 
> 赞同：2
> 
> 时间：2008-10-15T18:09:34.193
> 
> 标签：windows, remote-desktop, collaboration

我工作的公司目前使用“Go To Meeting”来共享我们的桌面，但对于我们使用它的目的来说它非常昂贵，我们正在寻找更便宜（甚至免费）的替代品。

我们已经评估了 yuuguu 和 yugma，但它们还达不到标准。它们都很慢，并且只允许共享者共享整个桌面，而不是单个应用程序。

我们需要的功能是指定共享哪个应用程序，并授予查看者控制鼠标和键盘的权限。其他一切都将是一个额外的好处。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-15T18:19:38.697

我使用[CrossLoop](http://www.crossloop.com)，它运行良好，它是免费的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-15T18:14:24.387

我将[LogmeIn](http://logmein.com/)和[Hamachi](https://secure.logmein.com/products/hamachi/vpn.asp)用于远程桌面和 VPN 解决方案。他们有免费和付费计划。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-15T18:24:58.517

[![](https://i.stack.imgur.com/ekglY.png)Remobo](https://download.cnet.com/Remobo/3000-7240_4-10778933.html)也很好用

> Remobo 中的所有网络流量均采用 256 位 AES 算法进行端到端加密，只有图表参与者拥有解密消息的密钥。此外，Remobo 的文件传输快速且安全，因为 Remobo 用户的即时专用网络 (IPN) 中的所有计算机都具有直接的网络连接；仅当无法建立直接连接时，才会通过 Remobo.com 的服务器中继消息。
> 
> 它不需要对您现有的任何网络设备进行任何配置，并且您无需将任何新硬件设备添加到您的网络中即可运行 Remobo

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-16T13:01:54.300

谢谢您的帮助。提供的选项都不是我们想要的。我们打算试试微软SharedView，好像有我们需要的功能：

[http://www.microsoft.com/downloadS/details.aspx?familyid=95AF94BA-755E-4039-9038-63005EE9D33A&displaylang=en](http://www.microsoft.com/downloadS/details.aspx?familyid=95AF94BA-755E-4039-9038-63005EE9D33A&displaylang=en)

# php - 与 cakephp 的 Phalanger

> ID：205807
> 
> 赞同：-3
> 
> 时间：2008-10-15T18:11:00.463
> 
> 标签：php, visual-studio-2008, cakephp, phalanger

有没有人能够使用 Phalanger 在 Visual Studio 中使用 CakePHP

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2011-03-25T13:44:49.380

我刚试过。使用 Phalanger 2.1（2011 年 3 月）和 CakePHP 2.0，只是缺少 SplFileInfo 和 RuntimeException 类，希望很快就会实现。

我使用以下命令来编译网络：

> D:\inetpub\wwwroot\CakePHP>phpc /target:web /root:. /递归：。

它也可以从 VS2010 调试，只需创建新网站并将 CakePHP 文件夹内容拖放到项目中即可。

# sharepoint - sharepoint 如何识别文件类型？

> ID：205808
> 
> 赞同：4
> 
> 时间：2008-10-15T18:11:05.347
> 
> 标签：sharepoint, moss

sharepoint 如何识别文件类型？例如，SharePoint 不允许您上传可执行文件。假设如果我将文件扩展名从 .exe 重命名为 .doc，共享点是否允许上传该文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-10-15T18:27:30.587

Sharepoint 使用其扩展名识别文件类型。

如果您担心用户在您的 Sharepoint 站点中传播恶意应用程序/代码。我建议你看看[Microsoft Forefront For Sharepoint](http://www.microsoft.com/forefront/sharepoint/en/us/default.aspx)。

**您可以在管理中心 > 操作 > 阻止的文件类型**下修改排除的扩展名列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-15T18:15:09.283

我相信有两种方法可以识别文件类型。一种天真的方法是检查扩展。一种更安全的方法是检查文件的位并查看文件的类型，因为许多文件类型在标头中都有一些位（[幻数](http://en.wikipedia.org/wiki/File_format#Magic_number)）来标识格式。

根据 SharePoint 检查文件的方式，这将决定您如何欺骗系统。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-21T23:02:14.023

SharePoint 本身不是很智能，并且依赖于文件扩展名，因此重命名文件将绕过它。

Forefront for SharePoint 确实会进行文件检查，因此对于任何面向外部的东西（如果您允许员工安装/运行未知软件，则应该在内部）。

您可以在 Central Admin 的操作/阻止的文件类型部分管理阻止的文件扩展名列表。注意：这是每个 webapp！

# php - PHP move_uploaded_file() 修改的文件的奇怪权限

> ID：205822
> 
> 赞同：8
> 
> 时间：2008-10-15T18:14:28.443
> 
> 标签：php, windows, file-upload

我在 Windows Server 2003 Enterprise 机器上运行 PHP 5.2.6。IIS 设置为拒绝匿名访问并使用集成 Windows 身份验证。

我正在使用 PHP 脚本来保存从 Web 表单上传的文件。文件被上传到临时文件夹，脚本根据来自 web 表单的其他变量创建文件名和路径，然后脚本使用 PHP 的 move_uploaded_file() 将临时文件移动到最终位置。一切正常。简而言之，人们正在上传文件，因此组中的每个人都可以看到它们，并且文件是由脚本组织的。

我的问题是最终位置的文件具有奇怪的权限。它不会以临时位置或最终位置的权限结束。临时位置和最终位置都具有相同的权限：所有者和管理人员的完全权限；读取和读取/执行 2 个特定的 AD 安全组。最终文件仅包含：所有者和管理人员的全部权利。因此，虽然管理员和原始上传者在查看文件时没有问题，但组中的所有其他人在尝试访问它时都会得到“权限被拒绝”。

任何想法或建议将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-09-11T00:31:30.660

从 move_uploaded_file 上的 php 页面（注：这对我有用）：

对于在 Windows 和 IIS 上使用 PHP 的用户，您应该将 php.ini 中的“upload_tmp_dir”值设置为网站目录所在的某个目录，创建该目录，然后对其设置与您为网站设置的权限相同的权限目录。否则，当您上传文件并将其放入 C:\WINDOWS\Temp 时，然后将其移动到您的网站目录，其权限将无法正确设置。如果您想使用 ImageMagick 的转换实用程序之类的工具来操作该文件，这将给您带来问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-10-15T18:52:06.433

这似乎是`move_uploaded_file()`函数的问题：
[http`move_uploaded_file`](http://us3.php.net/move_uploaded_file)
://us3.php.net/ 看看下面的评论，注意 Florian 关于 copy() 的评论。

copy() 会解决问题吗？： http:
[//us3.php.net/manual/en/function.copy.php](http://us3.php.net/manual/en/function.copy.php)

# .net - windows 自动软件更新

> ID：205830
> 
> 赞同：13
> 
> 时间：2008-10-15T18:16:32.650
> 
> 标签：.net, deployment, updates

为 Windows 窗体项目处理基于 Web 的自动软件更新有哪些好的解决方案？我知道微软一键，但目前对它不感兴趣。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-10-15T18:20:43.423

ClickOnce 适用于千篇一律的东西，但在安全方面有一些限制（即无法创建桌面图标、无法访问 COM 等）

假设您使用 MSI 来安装您的应用程序。使用 WIX ( [http://wix.sourceforge.net/](http://wix.sourceforge.net/) ) 创建补丁 (.msp)。您将需要查看 Vista 的最低特权用户帐户 (LUA) 修补程序，因为如果您不这样做，UAC 会搞砸您。

然后您的应用程序执行以下操作：

1.  通过 HTTP 检查新版本
2.  下载 MSP（由于 UAC，请注意在 Vista 中将其 DL 到的位置）
3.  启动一个 Shim exe
4.  等待您的应用关闭
5.  启动 msp（在非交互模式下）
6.  重启你的应用

这一切都可以在 XP 和 Vista 上以零用户交互在幕后自动发生。

一个很好的起点，一般来说，WIX 是：

[http://www.tramontana.co.hu/wix/index.php](http://www.tramontana.co.hu/wix/index.php) （第 4 课正在更新中）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2010-02-23T17:36:19.837

Not to get too spammy, but our company offers an automatic updating solution. It comes in 3 parts:

*   The [open source wyUpdate](http://wyday.com/wyupdate/), which is an updater written in C#
*   The [free AutomaticUpdater control](http://wyday.com/wybuild/help/automatic-updates/)
*   [wyBuild is used to build patches](http://wyday.com/wybuild/) and manage your versions

wyUpdate handles all of the Vista/Windows 7 UAC problems and all the file permission problems that inevitably pop up when you're trying to update complex software.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2010-06-22T14:38:41.810

我们一次写了自己的……这不是一个好主意。在许多情况下，您可以使用 ClickOnce。我们实际上使用了一个我们可以推荐的名为[AutoUpdate+的产品。](http://AutoUpdatePlus.com)它的特别之处在于它可以避免 UAC 弹出问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-15T18:18:04.053

这实际上取决于更新过程的复杂程度。

我有一些客户的简单需求，我们创建了自己的流程设置来处理它，在大约 3 小时的开发中，我们有一个完全有效的解决方案，可以满足他们的所有需求。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-15T18:19:33.347

微软一键？你是说 ClickOnce 吗？单击一次以赢得表格非常好。部署速度很快，所有更新过程都由自己处理。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-10-15T18:19:56.030

但是[ClickOnce](http://msdn.microsoft.com/en-us/library/t71a733d(VS.80).aspx)是您可以拥有的最好的，您可以选择用户是否需要下载新版本、使用旧版本、返回版本等...

您可以随时构建自己的解决方案，检查某个网址中的 XML 设置文件的版本号，如果它比当前版本更新，请更改用户以下载新版本，例如...

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-10-15T18:26:02.600

我也听说过它叫做 clicktwice :+> WIX 解决方案是我更感兴趣的。是否有使用这种技术的示例应用程序（带有源代码）？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2010-08-17T10:54:52.933

这是我为解决我们对 WinForms 和 WPF 应用程序的特定需求而编写的一个开源解决方案。总体思路是以尽可能低的开销获得最大的灵活性。

因此，**集成**非常简单，该库几乎可以为您完成所有工作，包括同步操作。它也**非常灵活**，可以让您确定要执行哪些任务以及在什么条件下执行 - 您制定规则（或使用一些已经存在的规则）。最后一点是对**任何更新源**（网络、BitTorrent 等）和任何**提要格式**的支持——任何未实现的内容您都可以自己编写。

还支持冷更新（需要重新启动应用程序），并且会自动完成，除非为任务指定“热交换”。

这归结为一个 DLL，大小不到 70kb。

更多详情请访问[http://www.code972.com/blog/2010/08/nappupdate-application-auto-update-framework-for-dotnet/](http://www.code972.com/blog/2010/08/nappupdate-application-auto-update-framework-for-dotnet/)

代码位于[http://github.com/synhershko/NAppUpdate](http://github.com/synhershko/NAppUpdate)（在 Apache 2.0 许可下获得许可）

# sql-server - 多个域的集成安全性？

> ID：205840
> 
> 赞同：0
> 
> 时间：2008-10-15T18:20:14.453
> 
> 标签：sql-server, sql-server-2005

有没有办法从多个域连接到具有集成安全性的数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-10-15T18:25:38.327

是的，您必须设置活动目录域来处理受限信任。然后 sql server 可以使用来自两个域的凭据。

# macos - AIR 应用程序中的 OS X 键绑定

> ID：205841
> 
> 赞同：2
> 
> 时间：2008-10-15T18:20:40.350
> 
> 标签：macos, keyboard-shortcuts, air, key-bindings

在 AIR 应用程序中使用时，OS X 中的一些标准击键要么被忽略，要么产生“神秘”字符，而不是按预期运行。例子：

*   `option`+`left arrow`应该将插入符号向后移动一个单词，它会打印一个神秘字符
*   `ctrl`+`h`应该向后删除一个字符，它会打印 h

我如何支持 OS X 默认按键（在此处列出：[http](http://www.hcs.harvard.edu/~jrus/Site/System%20Bindings.html) ://www.hcs.harvard.edu/~jrus/Site/System%20Bindings.html ）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-15T18:24:18.407

我在 Webkit 源代码中找到了一些线索来启用`<mx:HTML>`视图支持，这里：[http ://www.opensource.apple.com/darwinsource/10.5/WebCore-5523.10.3/editing/Editor.cpp](http://www.opensource.apple.com/darwinsource/10.5/WebCore-5523.10.3/editing/Editor.cpp)

以及有关 Webkit 预期语法的线索：http: [//lists.macosforge.org/pipermail/webkit-unassigned/2007-May/038737.html](http://lists.macosforge.org/pipermail/webkit-unassigned/2007-May/038737.html)

请注意，此解决方案不完整，不适用于 Flex/Flash 组件，并且取决于 Prototype：

```
$(document).observe('dom:loaded', function() {
    // Defined in AIR as !!NativeApplication.supportsDockIcon
    if(window.Air.OperatingSystem == 'mac') {
        var keyBindings = {
            altKey: {
                // Up (should be 38)
                14: {
                    dir: -1,
                    gran: 'paragraph'
                },
                // Down (should be 40)
                15: {
                    dir: 1,
                    gran: 'paragraph'
                },
                // Left (should be 37)
                1: {
                    dir: -1,
                    gran: 'word'
                },
                // Right (should be 39)
                2: {
                    dir: 1,
                    gran: 'word'
                },
                // Backspace
                8: {
                    dir: -1,
                    gran: 'word',
                    del: true
                },
                // Delete
                46: {
                    dir: 1,
                    gran: 'word',
                    del: true
                }
            },
            ctrlKey: {
                // Left
                37: {
                    dir: -1,
                    gran: 'lineBoundary'
                },
                // Right
                39: {
                    dir: 1,
                    gran: 'lineBoundary'
                },
                // a
                65: {
                    dir: -1,
                    gran: 'paragraphBoundary'
                },
                // b
                66: {
                    dir: -1,
                    gran: 'character'
                },
                // d
                68: {
                    dir: 1,
                    gran: 'character',
                    del: true
                },
                // e
                69: {
                    dir: 1,
                    gran: 'paragraphBoundary'
                },
                // f
                70: {
                    dir: 1,
                    gran: 'character'
                },
                // h
                72: {
                    dir: -1,
                    gran: 'character',
                    del: true
                },
                // k
                75: {
                    dir: 1,
                    gran: 'paragraphBoundary',
                    del: true
                },
                // n
                78: {
                    dir: 1,
                    gran: 'line'
                },
                // p
                80: {
                    dir: -1,
                    gran: 'line'
                }
            }
        };
        $(document).observe('keydown', function(e) {
            var target = e.element();
            if(
                target.match('input') ||
                target.match('textarea') ||
                target.readAttribute('contenteditable') == 'true'
            ) {
                if(
                    (e.keyCode in keyBindings.altKey && e.altKey) ||
                    (e.keyCode in keyBindings.ctrlKey && e.ctrlKey)
                ) {
                    e.stop();
                    var selection = window.getSelection();
                    var keystroke = keyBindings[(e.altKey ? 'altKey' : 'ctrlKey')][e.keyCode];
                    if(
                        (e.keyCode != 8 && e.keyCode != 46) ||
                        selection.isCollapsed
                    ) {
                        selection.modify(
                            keystroke.del || e.shiftKey ?
                                'extend' :
                                'move',
                            keystroke.dir == -1 ? 'backward' : keystroke.dir == 1 ? 'forward' : null,
                            keystroke.gran
                        );
                    }
                    if(keystroke.del && !selection.isCollapsed) {
                        document.execCommand('delete', false, null);
                    }
                }
            }
        });
    }
}); 
```

# javascript - 为什么 JavaScript 变量会以美元符号开头？

> ID：205853
> 
> 赞同：1095
> 
> 时间：2008-10-15T18:26:34.923
> 
> 标签：javascript, naming-conventions

我经常看到带有以美元符号开头的变量的 JavaScript。您何时/为什么选择以这种方式为变量添加前缀？

（我不是在问`$('p.foo')`你在 jQuery 和其他人中看到的语法，而是像`$name`和这样的普通变量`$order`）

* * *

## 回答 #1

> 赞同：1480
> 
> 时间：2009-02-16T15:42:39.213

**jQuery**中非常常见的用途是将存储在变量中的**jQuery**对象与其他变量 区分开来。

例如，我会定义：

```
var $email = $("#email"); // refers to the jQuery object representation of the dom object
var email_field = $("#email").get(0); // refers to the dom object itself 
```

我发现这对编写**jQuery**代码非常有帮助，并且可以很容易地查看具有不同属性集的**jQuery对象。**

* * *

## 回答 #2

> 赞同：262
> 
> 时间：2008-10-15T18:59:03.300

在 ECMAScript 的第 1、第 2 和[第 3 版中](http://www.ecma-international.org/publications/files/ECMA-ST-ARCH/ECMA-262,%203rd%20edition,%20December%201999.pdf)，规范明确不鼓励使用以 $ 为前缀的变量名，除非在自动生成代码的上下文中：

> 标识符中的任何位置都允许使用美元符号 ( `$`) 和下划线 ( )。`_`美元符号仅用于机械生成的代码。

然而，在下一个版本（第[5 版](http://www.ecma-international.org/publications/files/ECMA-ST-ARCH/ECMA-262%205th%20edition%20December%202009.pdf)，即当前版本）中，这个限制被取消了，上面的段落被替换为

> 美元符号 ( `$`) 和下划线 ( `_`) 允许在*IdentifierName*中的任何位置使用。

因此，$ 符号现在可以在变量名中自由使用。某些框架和库对符号的含义有自己的约定，在此处的其他答案中有所说明。

* * *

## 回答 #3

> 赞同：61
> 
> 时间：2008-10-15T22:57:07.220

正如其他人所提到的，美元符号旨在供机械生成的代码使用。然而，一些广受欢迎的 JavaScript 库打破了这一约定。JQuery、Prototype 和 MS AJAX (AKA Atlas) 都在它们的标识符中使用这个字符（或作为一个完整的标识符）。

简而言之，您可以随时使用`$`。（口译员不会抱怨。）问题是你*想*什么时候使用它？

我个人不使用它，但我认为它的使用是有效的。我认为 MS AJAX 使用它来表示函数是一些更详细调用的别名。

例如：

```
var $get = function(id) { return document.getElementById(id); } 
```

这似乎是一个合理的约定。

* * *

## 回答 #4

> 赞同：56
> 
> 时间：2012-08-30T22:51:25.993

在 AngularJS 的上下文中，`$`前缀仅用于框架代码中的标识符。指示框架的用户不要在他们自己的标识符中使用它：

> ## Angular 命名空间`$`和`$$`
> 
> 为了防止与您的代码发生意外的名称冲突，Angular 会在公共对象的`$`名称和私有对象的名称前加上`$$`. 请不要在代码中使用`$`or`$$`前缀。

来源：[https ://docs.angularjs.org/api](https://docs.angularjs.org/api)

* * *

## 回答 #5

> 赞同：48
> 
> 时间：2018-02-01T09:05:21.380

早在 2006 年，我就是这个约定的发起人，并在早期的 jQuery 邮件列表中对其进行了推广，所以让我分享一些关于它的历史和动机。

接受的答案给出了这个例子：

```
var $email = $("#email"); // refers to the jQuery object representation of the dom object
var email_field = $("#email").get(0); // refers to the dom object itself 
```

但这并不能很好地说明这一点。即使没有`$`，我们仍然会有两个不同的变量名，`email`和`email_field`。那里很好。`$`当我们已经有两个不同的名字时，为什么还要在其中一个名字中加上 a？

实际上，我不会在`email_field`这里使用有两个原因：`names_with_underscores`不是惯用的 JavaScript，并且`field`对于 DOM 元素没有真正意义。但我确实遵循了同样的想法。

我尝试了一些不同的东西，其中一些与示例非常相似：

```
var email = $("#email"), emailElement = $("#email")[0];
// Now email is a jQuery object and emailElement is the first/only DOM element in it 
```

（当然，一个 jQuery 对象可以有多个 DOM 元素，但我正在编写的代码有很多`id`选择器，所以在那些情况下，它们是 1:1 对应的。）

我有另一种情况，一个函数接收一个 DOM 元素作为参数，并且还需要一个 jQuery 对象：

```
// email is a DOM element passed into this function
function doSomethingWithEmail( email ) {
    var emailJQ = $(email);
    // Now email is the DOM element and emailJQ is a jQuery object for it
} 
```

好吧，这有点令人困惑！在我的一段代码中，`email`是 jQuery 对象并且`emailElement`是 DOM 元素，但在另一段代码中`email`是 DOM 元素并且`emailJQ`是 jQuery 对象。

没有一致性，我一直把它们混在一起。另外，为同一事物编造两个不同的名称有点麻烦：一个用于 jQuery 对象，另一个用于匹配的 DOM 元素。此外`email`,`emailElement`和`emailJQ`, 我也一直在尝试其他变体。

然后我注意到一个常见的模式：

```
var email = $("#email");
var emailJQ = $(email); 
```

由于 JavaScript 将`$`名称视为简单的另一个字母，并且由于我总是从`$(whatever)`调用中返回一个 jQuery 对象，因此我终于明白了这种模式。我可以接个`$(...)`电话，只删除一些字符，它会想出一个很好的名字：

```
$~~("#~~email~~")~~
$~~(~~email~~)~~

```

Strikeout 并不完美，但您可能会明白：删除一些字符后，这两行最终看起来像：

```
$email 
```

那时我意识到我不需要像`emailElement`or那样编写约定`emailJQ`。已经有一个很好的约定在盯着我看：从`$(whatever)`通话中取出一些字符，它变成`$whatever`.

```
var $email = $("#email"), email = $email[0];
// $email is the jQuery object and email is the DOM object 
```

和：

```
// email is a DOM element passed into this function
function doSomethingWithEmail( email ) {
    var $email = $(email);
    // $email is the jQuery object and email is the DOM object
    // Same names as in the code above. Yay!
} 
```

因此，我不必一直编造两个不同的名称，而可以使用带有或不带有`$`前缀的相同名称。这个`$`前缀很好地提醒了我正在处理一个 jQuery 对象：

```
$('#email').click( ... ); 
```

或者：

```
var $email = $('#email');
// Maybe do some other stuff with $email here
$email.click( ... ); 
```

* * *

## 回答 #6

> 赞同：21
> 
> 时间：2009-08-08T00:34:04.320

Stevo 是对的，美元脚本符号的含义和用法（在 Javascript 和 jQuery 平台中，但不是在 PHP 中）是完全语义化的。$ 是一个可用作标识符名称一部分的字符。此外，美元符号可能不是您在 Javascript 中可以遇到的最“奇怪”的东西。以下是一些有效标识符名称的示例：

```
var _       = function() { alert("hello from _"); }
var \u0024  = function() { alert("hello from $ defined as u0024"); }
var Ø       = function() { alert("hello from Ø"); }
var $$$$$   = function() { alert("hello from $$$$$"); } 
```

上面的所有示例都将起作用。

试试看。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2009-07-28T15:26:12.910

$ 字符对 JavaScript 引擎没有特殊意义。它只是变量名称中的另一个有效字符，如 az、AZ、_、0-9 等...

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-05-04T14:52:43.617

由于`_`在变量名的开头通常用于表示私有变量（或至少一个旨在保持私有的变量），我发现`$`在我自己的简短别名前面添加通用代码库很方便。

例如，在使用 jQuery 时，我更喜欢使用变量`$J`（而不仅仅是`$`）和使用`$P`php.js 时使用等。

前缀使它在视觉上与其他变量（例如我自己的静态变量）区分开来，使我知道代码是某个库或其他库的一部分，并且一旦他们知道约定，就不太可能与其他变量发生冲突或混淆。

它也不会像为每个库调用重复的完全指定的名称那样使代码混乱（或需要额外的输入）。

我喜欢认为它类似于修饰键用于扩展单个键的可能性。

但这只是我自己的约定。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-01-21T09:38:31.743

`${varname}`只是 jQuery 开发人员用来区分包含 jQuery 元素的变量的命名约定。

Plain`{varname}`用于存储一般的东西，如文本和字符串。 `${varname}`保存从 jQuery 返回的元素。

您也可以使用 plain`{varname}`来存储 jQuery 元素，但正如我在开始时所说，这将它与普通变量区分开来并使其更容易理解（想象一下将它与普通变量混淆并搜索所有内容以了解它所包含的内容） .

例如 ：

```
var $blah = $(this).parents('.blahblah'); 
```

在这里，blah 存储了一个返回的 jQuery 元素。

因此，当其他人`$blah`在代码中看到 时，他们会明白它不仅仅是一个字符串或数字，它是一个 jQuery 元素。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-09-05T19:27:20.347

正如我在过去 4 年中所经历的那样，它将允许一些人轻松识别变量是指向值/对象还是 jQuery 包装的 DOM 元素

```
Ex:
var name = 'jQuery';
var lib = {name:'jQuery',version:1.6};

var $dataDiv = $('#myDataDiv');
```

在上面的示例中，当我看到变量“$dataDiv”时，我可以轻松地说这个变量指向一个 jQuery 包装的 DOM 元素（在本例中是 div）。而且我可以调用所有 jQuery 方法，而无需再次包装对象，如 $dataDiv.append()、$dataDiv.html()、$dataDiv.find() 而不是 $($dataDiv).append()。

希望它可能会有所帮助。所以最后想说的是，遵循这一点将是一个好习惯，但不是强制性的。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-10-15T18:33:48.263

虽然您可以简单地使用它来为您的标识符添加前缀，但它应该用于生成的代码，例如模板中的替换标记。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2012-04-18T14:07:05.877

[Angular](http://angularjs.org "AngularJS")用于框架生成的属性。猜猜，他们是按照 ECMA-262 3.0 提供的（现已失效的）提示进行的。

* * *

## 回答 #13

> 赞同：-3
> 
> 时间：2013-05-04T09:59:06.950

$ 用于在普通变量的情况下区分公共变量和 jquery 变量。让您在 FLIPKART 中下订单，然后如果订单是显示字符串输出的变量，则将其命名为简单的“订单”，但如果我们单击下订单，则返回一个对象，该对象将由 $ 表示为“$ order”，以便程序员可以在整个代码中剪掉 javascript 变量和 jquery 变量。

* * *

## 回答 #14

> 赞同：-4
> 
> 时间：2011-07-20T22:03:53.963

如果您看到美元符号 ($) 或双美元符号 ($$)，并且对这在 Prototype 框架中的含义感到好奇，以下是您的答案：

```
$$('div');
// -> all DIVs in the document.  Same as document.getElementsByTagName('div')!

$$('#contents');
// -> same as $('contents'), only it returns an array anyway (even though IDs must be unique within a document).

$$('li.faux');
// -> all LI elements with class 'faux' 
```

来源： http:
[//www.prototypejs.org/api/utility/dollar-dollar](http://www.prototypejs.org/api/utility/dollar-dollar)

* * *

## 回答 #15

> 赞同：-5
> 
> 时间：2011-02-21T12:49:05.743

我有时将 php 名​​称约定与 javascript 变量一起使用的原因： 在进行输入验证时，我想在客户端和服务器端运行完全相同的算法。我真的希望代码的两侧看起来尽可能相似，以简化维护。在变量名中使用美元符号使这更容易。

（此外，一些明智的辅助函数有助于使代码看起来相似，例如包装输入值查找、非 OO 版本的 strlen、substr 等。但它仍然需要一些手动调整。）

* * *

## 回答 #16

> 赞同：-7
> 
> 时间：2015-10-21T10:14:21.623

一个有效的 JavaScript 标识符应该以字母、下划线 (_) 或美元符号 ($) 开头；后续字符也可以是数字 (0-9)。因为 JavaScript 区分大小写，所以字母包括字符“A”到“Z”（大写）和字符“a”到“z”（小写）。

详细信息：
[https ://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Grammar_and_types#Variables](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Grammar_and_types#Variables)

# clipboard - 保存更大剪贴板的工具

> ID：205863
> 
> 赞同：2
> 
> 时间：2008-10-15T18:29:39.817
> 
> 标签：clipboard

是否有任何工具可以在 Windows 中拥有更强大的剪贴板类型功能？

我正在使用 vs.net 2008（如果它有内置但我不知道？）

我曾经有这个工具，我在剪贴板中创建了很多可以使用快捷方式访问的项目，但我忘记了那个应用程序的名称！

提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-15T18:33:39.280

我使用[ClipX](http://www.bluemars.org/clipx/)

非常稳定且占用空间小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-15T19:09:28.020

我使用[同上](http://ditto-cp.sourceforge.net/)。它是开源的，具有分组和永久保留功能。它还使用 sqllite 数据库，因此您确实为屏幕截图和大文本项目留出了一些空间。

如果您只寻找简单的输出文本 blob，我会使用[Quick Macros](http://quickmacros.com)以及其他所有类型的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-15T18:32:23.320

有一个叫做[ClipCache](http://www.xrayz.co.uk/purchase/get-it-free)的功能与您在此处描述的类似。无论如何，我推荐它。

# ruby - 使用 ruby 找出使用的键盘布局

> ID：205871
> 
> 赞同：1
> 
> 时间：2008-10-15T18:32:08.750
> 
> 标签：ruby, keyboard-layout

我怎样才能知道我的 ruby​​ 应用程序的用户正在使用哪种键盘布局？我的目标是做一个游戏，你可以在地图上移动玩家。要向下一步，向左一步，请在德语键盘上按“Y”。在美式键盘上，您会按“Z”。我们针对 windows 和 mac 优化了游戏，所以我想要两个平台的解决方案（我们不使用任何命令/shift/控制键）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-15T18:38:41.420

对于 Windows，您可能必须使用[Windows API GetKeyboardLayout()](http://msdn.microsoft.com/en-us/library/ms646296(VS.85).aspx)，除非 Ruby 提供了一个包装器。

[MSDN 网站上](http://www.microsoft.com/globaldev/DrIntl/columns/default.mspx)有很多有用的 Windows 的 I18n 资源。

如果您没有良好的可移植方式来检测它，那么简单地允许他们自己将其配置为首选项可能会更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-16T04:26:34.743

我认为允许用户自己定义键会更容易和自然。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-16T05:02:17.810

正如 Alexander 建议的那样，让用户自己定义键。

但是，如果您真的想识别布局，您总是可以要求用户在某些位置按键，特别是某些布局。

“按回车键左侧的第二个键。如果您的回车键是两排高，请按下面的那个”
[按`ä`]
“看起来你有一个斯堪的纳维亚键盘”

然而，这是一个可怕的组合，并且在游戏环境中，会推荐自定义键映射方法

# resources - 将资源组合成一个二进制文件

> ID：205877
> 
> 赞同：3
> 
> 时间：2008-10-15T18:33:19.933
> 
> 标签：resources, data-protection

如何将应用程序的多个资源（图像、声音、脚本、xml 等）组合到一个/多个二进制文件中，以保护它们免受用户手的伤害？典型的步骤是什么（组织、加载、加密等）？

这在游戏开发中尤其常见，但是很多游戏框架和引擎都没有提供简单的方法来做到这一点，也没有描述通用的方法。我一直想学习如何去做，但我不知道从哪里开始。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-16T14:17:52.430

有很多方法可以做到这一点。m_pGladiator 有一些好主意，尤其是在序列化方面。我想发表一些其他意见。

首先，如果您要将一堆资源打包到一个文件中（我称之为打包文件），那么我认为您应该避免加载整个文件，然后将该文件反序列化到内存中。原因很简单，就是内存更大。我想这在 PC 上确实不是问题，但这是一种很好的做法，在控制台上工作时它是必不可少的。虽然我们（目前）没有像 m_pGladiator 建议的那样序列化对象，但我们正在朝着这个方向努力。

您可能拥有两种类型的包文件。一种是您希望任意访问文件内容的文件。第二种类型可能是在加载关卡时需要*所有这些文件的文件集合。*一个基本的例子可能是：

1.  音频包文件可能包含游戏的所有音频。您可能只需要为菜单或界面屏幕加载某些类型的音频，并为关卡加载不同的音频集。这可能属于上述第一类。
2.  属于第二类的类型可能是一个级别的所有模型/纹理/等。您基本上希望在加载时将此文件的全部内容加载到游戏中，因为您（可能）会在玩家玩该级别或部分时需要它的所有内容。

我们构建的许多包文件属于第二类。我们基本上将关卡内容打包，然后用 zlib 之类的东西压缩它们。当我们在游戏时加载其中一个时，我们会读取少量文件，将读取的内容解压缩到内存缓冲区中，然后重复直到整个文件被读入内存。我们读入的缓冲区相对较小，而最终目标缓冲区大到足以容纳我们需要的最大的未压缩数据集。这种方法很棘手，但同样，它节省了 RAM，这是一个有趣的开始工作的练习，而且你感觉非常好和温暖，因为你是系统资源的好管家。一旦packfile完全解压到它的destinatino缓冲区中，我们在缓冲区上运行最后一次以修复指针位置等。此方法仅在您将包文件写为游戏知道的结构时才有效。换句话说，我们的打包文件编写工具与游戏代码共享结构（或类）。我们基本上是在写出和压缩数据结构的精确表示。

如果你只是想减少在用户机器上传送和安装的文件数量，你可以使用我描述的第一种包文件。也许你有 1000 多个纹理，只是想减少你必须压缩和打包的文件的绝对数量。您可以编写一个小实用程序，它基本上会读取要打包在一起的文件，然后在 packfile 中写入包含文件及其偏移量的标头，然后您可以写入文件的内容，一次一个，一个其次，在您的大型二进制文件中。在游戏时，您可以简单地加载此包文件的标头并将文件名和偏移量存储在哈希中。当你需要读取一个文件时，你可以对文件名进行哈希处理，看看它是否存在于你的包文件中，如果存在，您可以通过寻找偏移量然后从包文件中的该位置读取来直接从包文件中读取内容。同样，这种方法基本上是一种将数据打包在一起而不考虑加密等的方法。它只是一种组织方法。

但是，我想再次强调，如果您要走我或 m_pGladiator 建议的路线，我会努力避免将整个文件拉入 RAM，然后反序列化到 RAM 中的另一个位置。这是对资源的浪费（你可能有很多）。我会说你可以这样做来让它工作，然后一旦它工作，你可以使用一种方法，一次只读取文件的一部分，然后解压缩到你的目标缓冲区。您必须使用可以像这样工作的压缩方案。zlib 和 lzw 都可以（我相信）。我不确定 MD5 算法。

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-15T18:44:49.427

像 Java 一样：将它全部打包在一个 zip 中，并使用类似文件系统的 API 直接从那里读取。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-15T18:43:08.947

简短的回答：是的。

在 Mac OS 6、7、8 中，有大量 API 专门用于执行此任务。如果您有兴趣，请查找“资源管理器”。编辑：[ROOT](http://root.cern.ch/)物理分析包也是如此。

并不是说我现在知道一个好的工具。您希望它在什么平台上运行？

* * *

编辑添加：我离开的所有两三个工具都具有相似的结构：

*   文件以标题和索引开头
*   有一系列块，其中一些可能有自己的标题和索引，其中一些是叶子
*   每个叶子都是要存储的数据的简单序列化。
*   整个文件（或有时单个块）可能会被压缩。

实现你自己的并不难，但我会寻找一个好的现有的，首先满足你的需求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-15T18:48:36.847

就个人而言，我从来没有使用已经可用的工具来做到这一点。如果你想防止你的游戏被轻易入侵，那么你必须开发自己的资源操纵引擎。

1.  首先阅读有关[序列化对象](http://msdn.microsoft.com/en-us/library/7ay27kt9(VS.71).aspx)的信息。当您从文件（图形、声音或其他）加载资源时，它会存储在内存中的某个对象实例中。一个游戏通常使用几十个图形和声音对象。您必须制作一个工具，将它们全部加载并存储在内存中的集合中。然后将这些集合序列化成一个二进制文件，你就拥有了那里的所有资源。

2.  然后您可以使用例如[MD5](http://en.wikipedia.org/wiki/MD5)或任何其他加密算法来加密此文件。

3.  此外，您可以使用[zlib](http://www.zlib.net/)或其他压缩库来使这个大的二进制文件更小一些。

4.  在游戏中，您应该加载加密的二进制文件并解压缩。然后解密。然后反序列化对象集合，所有资源都回到内存中。

当然，您可以通过将不同级别的资源存储在不同的二进制文件中来使其更全面，等等 - 有很多变体，具体取决于您想要什么。您也可以先压缩，然后加密，或对这些步骤进行其他组合。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-03-16T00:27:24.213

对于像我这样想知道同一主题的未来人，请查看以下两个链接：

[http://www.sfml-dev.org/wiki/en/tutorials/formatdat](http://www.sfml-dev.org/wiki/en/tutorials/formatdat)

[http://archive.gamedev.net/reference/programming/features/pak/](http://archive.gamedev.net/reference/programming/features/pak/)

# windows-vista - 我是否需要在 Vista 上进行开发才能写入 wmdc（Windows 移动设备中心）API？

> ID：205882
> 
> 赞同：0
> 
> 时间：2008-10-15T18:34:52.427
> 
> 标签：windows-vista, activesync, wmdc

我可以在 XP 上为此编写和编译代码吗？我们为使用 activesync 的应用程序提供了实用程序，现在将添加 Vista/WMDC - 我希望我不必有另一个开发操作系统 (Vista) 来开发和编译。

我没有看到太多关于 WMDC API 的文档——有人可以指出一些有用的参考资料吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-15T18:42:34.220

嗯... ActiveSync，那么 Windows Mobile 对吗？

您所需要的只是 SDK 和 Visual Studio（好吧，这最后一个您不需要，因为您可以使用命令行编译所有内容，但是，对于此类应用程序来说非常好）

有很多 SDK 可以满足您的需求，例如[PocketPC](http://www.microsoft.com/downloads/details.aspx?familyid=83A52AF2-F524-4EC5-9155-717CBE5D25ED&displaylang=en)、[Windows Mobile](http://www.microsoft.com/downloads/details.aspx?familyid=06111A3A-A651-4745-88EF-3D48091A390B&displaylang=en)等...

sdk 包含构建、编译和部署应用程序所需的一切，在 Windows XP（我目前使用的）上运行良好，并且使用 ActiveSync，您甚至可以在设备中调试应用程序；）

添加：

> 不幸的是，WMDC 没有 SDK。您唯一拥有的是 %WinDir%\Windows Mobile 中的 4 个库。它包含 4 个名为“Microsoft.WindowsMo​​bile.*.dll”的库。此外，您没有获得有关库本身的任何文档，这使得它难以使用。
> 
> 当您使用 RAPI（我认为是使用 OpenNETCF 库）时，大多数应用程序仍应在 WMDC 下运行，因为包含的 RAPI 似乎是向后兼容的。包含的 RAPI 本身是一个新版本。

```
取自 MSDN 论坛
```

我希望这对目前有所帮助。

# asp.net - 回发安全

> ID：205887
> 
> 赞同：1
> 
> 时间：2008-10-15T18:37:12.157
> 
> 标签：asp.net, ajax, security, postback

我最近一直在使用 jQuery 和 *.asmx Web 服务，并且我试图在这样做时具有安全意识。

我认为可以将 AJAX 请求（即使在注销时）提交到仅应在登录时才能访问的资源。

因此，我在每个 AJAX 请求中都包含了特殊的键和散列，以便在执行某些服务器端操作之前验证用户的状态。

然而

我一直认为回传在这方面是安全的。如果 .NET 收到已被篡改的请求，它将引发错误。

这是一个安全的假设吗？或者我应该验证所有请求，无论它们是通过 AJAX 还是非 AJAX HTTP POST 接收的？

我想两者在技术上都是 HTTP POST，但 AJAX 仅提交您明确传递的内容，而普通的 ASP.NET 包含所有视图状态值。那是对的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-15T18:41:03.833

您不应该相信通过 HTTP 传入的任何内容 - 制造 GET 或 POST 请求是微不足道的。

# user-controls - 嵌入另一个用户控件的UserControl，如何访问嵌入的表单字段？

> ID：205892
> 
> 赞同：0
> 
> 时间：2008-10-15T18:37:52.640
> 
> 标签：user-controls

我有一个很长的表格，用户必须填写。

因此，我将表单分解为逻辑单元，并为某些元素创建了另一个用户控件（它们将在其他地方重用）。

所以说表单有这些字段：

用户控件3.ascx

用户名密码邮箱--usercontrol2.ascx 地址--usercontrol2.ascx 城市--usercontrol2.ascx 州--usercontrol2.ascx

所以现在在 usercontrol3.ascx 的代码隐藏中，我将如何访问 usercontrol2.ascx 的字段以便我可以写入数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-15T18:40:16.677

如果用户控件 3 包含用户控件 2，我将修改用户控件 2 的代码以公开您需要检索的信息的公共属性。

*编辑* 还有其他方法可以做到，但是属性路由是最安全的路由，并且避免了两个控件之间的强依赖。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-15T18:44:48.710

像这样的东西有效，但它并不优雅：

```
Dim txtBox as TextBox = Ctype(parentControl.Controls(Index), System.Web.UI.Controls.TextBox)
stringVariable = txtBox.Text 
```

正确的方法是为您的 parentControl 实现访问子控件属性的属性。

```
Public Property AddressField() as string
  Set(byval value as string)
    txtAddressField.Text = value
  End Set
  Get
    Return txtAddressField.Text
  End Get
End Property 
```

# sharepoint - SharePoint 面试问题

> ID：205893
> 
> 赞同：54
> 
> 时间：2008-10-15T18:38:17.180
> 
> 标签：sharepoint, moss, wss

让我们为 SharePoint 开发人员列出一些很好的面试问题。请为每个条目提供一个问题，如果可能，请提供答案。

此外，如果提供的答案有误，请随时提出更正建议。

我先去：

问：SharePoint 如何存储页面？

A：[如何在服务器上找到共享点文档库源页面？](https://stackoverflow.com/questions/125805/how-to-locate-sharepoint-document-library-source-page-on-the-server#127138)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2008-10-15T19:27:51.477

问：使用 SPSecurity.RunWithElevatedPrivileges（Web 上下文）运行时，使用了哪些凭据？

A. 运行 SharePoint 的 Web 应用程序的应用程序池标识。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2008-10-15T20:23:37.980

问：修改列表项时，使用 SPListItem.Update() 和 SPListItem.SystemUpdate() 的“主要”区别是什么？

A. 使用 SystemUpdate() 不会创建新版本，还会保留时间戳。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2008-10-16T14:25:49.777

问：您应该何时处置 SPWeb 和 SPSite 对象？更重要的是，什么时候没有？

答：如果您自己创建它们，则应始终处置它们，否则不应。您永远不应处置 SPContext.Current.Web/Site，如果 IsRootWeb 为真，您通常不应处置 SPWeb。更棘手的构造是沿着 SPList.ParentWeb 线的东西。

[如果候选人知道Roger Lambs 博客帖子](http://blogs.msdn.com/rogerla/archive/2008/02/12/sharepoint-2007-and-wss-3-0-dispose-patterns-by-example.aspx)，则可获得奖励积分。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2008-10-15T18:57:34.160

问：`System.Web.UI.WebControls.WebParts.WebPart`和 和有什么不一样`Microsoft.SharePoint.WebPartPages.WebPart`？

答：`Microsoft.SharePoint.WebPartPages.WebPart`在 MOSS 2007 中提供，以提供与 MOSS 2003 Webpart 的向后兼容性。在 MOSS 2007 中，建议改为使用`System.Web.UI.WebControls.WebParts.WebPart`。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2008-10-16T20:51:19.483

有时我喜欢问更多开放式的问题来让潜在客户说话。

如果我想了解技术深度

问：您在 SharePoint 中发现了哪些错误？然后问：你做了什么来解决它们？

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2008-10-15T20:36:01.823

问：如果您有一个 ItemUpdated 或 ItemUpdating 事件接收器并且它导致对项目的更新，您如何防止在更新期间触发另一个 ItemUpdated 和 ItemUpdating 事件？

A. 在执行更新之前，调用 DisableEventFiring()。更新后，调用 EnableEventFiring()。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2008-12-05T14:33:16.637

Q. What is a site collection, why would you create a new site collection as opposed to a site?

A. Bit of a long answer, but they should know about site collection administration, quotas, seperation of assets, security model etc.

Dave Wollerman has a [good article](http://www.sharepointblogs.com/llowevad/archive/2007/06/25/site-collection-logical-architecture.aspx) on some of the whys and wherefores.

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2009-09-01T15:24:45.633

问：对性能有什么影响`RunWithElevatedPrivileges`？

A：`RunWithElevatedPrivileges`使用 App Pool 的凭据创建一个新线程，阻塞当前线程直到它完成。

[通过[雷克斯](http://rexmorgan.net)]

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2008-12-21T16:30:39.620

Q. MOSS 和 WSS 有什么区别

A. MOSS 使用 Shared Service Provider 进行搜索、配置文件导入等...（有关更完整的列表，请参阅[Lars Fastrup 发布的答案）](https://stackoverflow.com/questions/205893/sharepoint-interview-questions/263148#263148)

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2008-10-16T14:18:05.143

问：(i) 描述内容类型的目的，以及；(ii) 举例说明它们可能在哪里使用。

答：(i) 内容类型将一组列表列组合在一起，以便它们可以以相同的方式跨站点重复使用。(ii) 它们可以用作一组元数据列，需要应用于网站集中的每个文档。

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2008-10-15T19:59:24.613

问：描述列表和库之间的区别。

答：列表是元数据或列的集合，可以附加文档。库是文档（Excel、InfoPath、Word 等）以及可选元数据的集合。

根据 ktrauberman 的反馈进行编辑。

* * *

## 回答 #12

> 赞同：6
> 
> 时间：2008-10-17T22:49:31.087

问：解释 SharePoint 如何呈现其内容。答：超出范围，但您可以在这里找到一些很好的信息：http: [//gmac.blogspot.com/2008/04/how-sharepoint-2007-renders-its-content.html](http://g-m-a-c.blogspot.com/2008/04/how-sharepoint-2007-renders-its-content.html)

申请人至少应该了解 SharePoint 的模板呈现机制，以及 12/TEMPLATE/CONTROLTEMPLATES/ 中的内容以及它的用途，重点是 DefaultTemplates.ascx。如果您希望进行任何类型的 SharePoint 自定义，这绝对是必不可少的知识。

* * *

## 回答 #13

> 赞同：6
> 
> 时间：2010-01-28T04:25:44.353

好的。这里有一些非常有用的。 [http://megasolutions.net/qs/Sharepoint_Portal_Interview_Questions.aspx](http://megasolutions.net/qs/Sharepoint_Portal_Interview_Questions.aspx)

* * *

## 回答 #14

> 赞同：6
> 
> 时间：2008-11-04T19:39:35.567

问：请说出 MOSS 2007 中至少两个可用的共享服务

答：MOSS 2007 中的共享服务提供商可以提供以下共享服务：

*   用户资料
*   观众
*   个人网站
*   搜索
*   Excel 服务
*   表格服务
*   业务数据目录（需要企业版）

* * *

## 回答 #15

> 赞同：6
> 
> 时间：2009-09-30T13:15:35.987

问：您将如何以编程方式检索列表项？

答：SPQuery 和 SPSiteDataQuery。CrossListQueryCache、PortalSiteMapProvider 知识加分。使用 foreach 的负面影响。

* * *

## 回答 #16

> 赞同：5
> 
> 时间：2008-11-10T10:13:41.107

问：事件接收器从哪些基类继承？

A：

1.  SPListEventReceiver、SPItemEventReciever 和 SPWebEventReceiver 继承自抽象基类 SPEventReceiverBase。
2.  SPWorkflowLibraryEventReceiver 继承自 SPItemEventReceiver。
3.  SPEmailEventReceiver 直接继承自 System.Object。

另请参阅以下 SharePoint 问题集：http: [//qmoss.blogspot.com/](http://qmoss.blogspot.com/)

* * *

## 回答 #17

> 赞同：5
> 
> 时间：2008-10-15T19:48:47.303

问：为什么要使用自定义列？

A：它允许您在多个库中重复使用该列。如果您使用 Choice 类型将用户输入限制为一组预定义的答案，并且该答案列表可能会发生变化，则特别有用。

* * *

## 回答 #18

> 赞同：4
> 
> 时间：2009-01-27T22:46:02.017

问：备份 SharePoint 安装的内置方法有哪些？

答：通过中央管理部门和 stsadm 命令

问：（更高级）您已经创建并部署了一个 Web 部件，当您部署到服务器时，您会看到一个页面说您的 Web 部件无法加载，请单击此处转到 Web 部件维护页面等禁用 Web 部件。您应该采取哪些步骤从 Web 部件而不是错误页面获取堆栈转储？

答：转到您网站的 web.config 文件并在 SafeControls 元素中找到 CallStack 属性并将值设置为 true。

* * *

## 回答 #19

> 赞同：4
> 
> 时间：2009-08-17T19:34:35.660

描述您将自定义品牌应用于 SharePoint 2007 的经验。有哪些需要避免的陷阱？您如何将自定义品牌部署到农场？

* * *

## 回答 #20

> 赞同：4
> 
> 时间：2009-08-17T19:35:38.030

何时/为什么应该/不应该直接更改或添加 12 配置单元中的文件？

* * *

## 回答 #21

> 赞同：3
> 
> 时间：2009-03-31T19:54:07.287

问：您将如何创建主/详细页面？

A. 为 master 创建一个从 Folder Content Type 继承的 Content 类型，以及另一个从 Item 继承的 Content 类型并在 List 上使用它们

* * *

## 回答 #22

> 赞同：3
> 
> 时间：2009-08-17T19:35:07.843

描述业务数据目录 (BDC)，并为其提供至少一个有形应用程序。

* * *

## 回答 #23

> 赞同：2
> 
> 时间：2011-08-12T21:21:21.313

我宁愿问一些开放式的问题，比如告诉我一些你认为微软在 SharePoint 中犯的错误？可能的答案是... 对于查找列，您需要提前知道查找字段 GUID，并且您不能轻松地将查找字段设置为功能。MOSS 没有站点级别的事件，例如用于创建列表的事件。SharePoint 设计器是个废话，添加不需要的东西会增加页面大小。
缺乏基于用户组的修剪控制，因为默认情况下只有基于权限的修剪可用（因为您可以创建执行此操作的自定义安全修剪器）

* * *

## 回答 #24

> 赞同：2
> 
> 时间：2011-03-09T15:46:06.667

Q: What is a way of elevating SharePoint privileges without using RunWithElevatedPrivileges?

A: Pass the System Account User Token from the SPContext to the SPSite constructor.

A majority of times a developer can accomplish what they need using this method without needlessly elevating network credentials.

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2008-10-27T10:27:38.123

问：SharePoint 中的 Lookup 列支持哪些数据类型。

A. 仅支持单行文本和计算列作为查找列。

我还整理了一些更多的问题：http: [//qmoss.blogspot.com/](http://qmoss.blogspot.com/)

# cakephp - 如何向组合框选择器添加“选择一个”选项，然后在 CakePHP 中对其进行验证？

> ID：205907
> 
> 赞同：1
> 
> 时间：2008-10-15T18:42:29.650
> 
> 标签：cakephp

我是 Cake PHP 新手。

我想编辑表格“问题”。该表包含一个字段“priority_id”，该字段通过外键与另一个名为“Priority”的表相关。该表包含三个值“严重”、“灾难”、“待办事项”。用户可以使用组合框（输入选择）选择优先级。

优先级是这样加载的：

```
$priorities = $this->Issue->Priority->find('list'); 
```

这对我有用。

我需要在名为“Choose”的组合框中添加第四个选项。该值将是默认值。选择此值时，用户无法提交表单。动机是强制用户选择一个有意义的值，而不是随机提交第一个值。

1）如何填充数组 $priorities ？2) 我如何验证表格？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-16T08:51:12.700

在 issues/add.ctp 和 issues/edit.ctp 视图中，将一个空键添加到作为 $form->input() 方法的第二个参数发送的选项数组中，例如

```
echo $form->input('priority_id', array('empty' => 'Choose')); 
```

这将在组合框顶部添加一个带有文本“选择”的选项，并且该选项的值将是一个空字符串。

在您的问题模型中，您可以为 priority_id 字段添加验证，例如

```
var $validate = array(
  'priority_id' => array('numeric')
); 
```

# c - 有什么工具可以捕捉 C 代码中的愚蠢错误？

> ID：205911
> 
> 赞同：11
> 
> 时间：2008-10-15T18:43:56.620
> 
> 标签：c, findbugs, lint

我有一个讨厌的错字，浪费了我和我同事的时间，它是这样的：

```
for (i = 0; i < blah; i++); // <- I had a semi-colon here, that's the bug!
{
  // Some awesome logic here
} 
```

首先，这很尴尬，第二件事，我不应该重复这件事。我对 C 比较陌生。在 Java 中，我想我可以使用[FindBugs](http://findbugs.sourceforge.net/)来捕获此类错误，我应该使用什么工具来处理 C 代码？皮棉？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-10-15T18:45:24.717

是的，[PC-Lint](http://www.gimpel.com/)可能是最好的工具。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-10-15T18:49:23.023

除了[Lykathea 的 PC-Lint 建议](https://stackoverflow.com/questions/205911/any-tools-to-catch-silly-mistakes-in-c-code#205919)之外，如果您提高编译器的警告级别，您还可以获得更好（或至少更多）的诊断。像`/W4`或`-Wall`

虽然我不确定您的特定问题是否会被此捕获（即使启用了所有警告，MS VC 似乎也没有标记它）。我认为这是因为`for`当工作作为循环控制表达式的副作用完成时，循环为空并不是一个不常见的习惯用法。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-10-15T18:52:45.887

在我的脑海中，过去拯救了我的几件事：

*   使用 if **(3 == bla) 而不是 (bla == 3)**，因为如果您拼写错误并键入 (3 = bla) 编译器会抱怨。

*   使用**所有警告**开关。你的编译器应该警告你这样的空语句。

*   尽可能使用**断言**并进行防御性编程。努力让你的程序尽早失败，你会看到这样的弱点。

*   不要试图规避编译器或操作系统设置的任何保护措施。它们也可以让您轻松编程。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2010-10-22T14:13:00.787

还看[clang静态分析](http://clang-analyzer.llvm.org/)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-10-15T18:49:10.183

我将从学习[夹板](http://en.wikipedia.org/wiki/Splint_(programming_tool))和[gdb](http://en.wikipedia.org/wiki/Gdb)开始。如果您需要更高级的，请在这两个工具的基础上进行构建。但他们是一个好的开始。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-10-16T02:38:11.033

GCC 具有 Lint 通过[警告标志](http://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html)内置的大部分功能。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-10-15T18:50:44.063

像 Eclipse 这样的任何良好的 GUI 编程环境（“IDE” - 集成开发环境）都会在这种情况下生成警告。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-10-15T19:28:15.533

一个好的语法高亮器会让一些这样的情况更加明显。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2010-07-19T15:31:16.877

我建议看看您是否有能力[执行 MISRA 标准](http://en.wikipedia.org/wiki/MISRA_C)。它们是经过深思熟虑编写的，许多规则对于编译器来说很容易检查。例如，我使用的规则要求所有 NOP 命令都有自己的行。这意味着当你放一个 ; 在循环语句的末尾，它将通过一个错误说它不在它自己的行上。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2011-07-29T20:37:19.843

[Programming Research的QA·C](http://www.programmingresearch.com/qac_main.html)是另一个很好的C静态分析工具。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2008-10-15T18:56:36.550

在这个（旧）版本的《[如何在脚上射击自己》](http://www-users.cs.york.ac.uk/susan/joke/foot.htm)以及网络上的许多其他版本中，*C*始终是允许最简单程序的语言。在*C*中编程时，您必须记住这一点并小心。如果您想要保护，请选择另一种语言。

这句话[归功于](http://www.research.att.com/~bs/bs_faq.html#really-say-that)Bjarne Stroustrup (C++) 本人。（错误）引用：

> “C 让你很容易射中自己的脚”

# sharepoint - 在带有 Office 2007 文档的 Sharepoint 中的 ItemUpdate 后数据消失

> ID：205913
> 
> 赞同：3
> 
> 时间：2008-10-15T18:44:05.140
> 
> 标签：sharepoint, moss, events, handlers

我有一个带有 ItemAdding 事件的简单事件处理程序，该事件更改了我在 ItemUpdated 方法中需要的列值。上传 word 2007 文档（*.docx、*.pptx 或 xlsx）后，列的值发生了变化，但是当我保护文档时，列的值在 ItemUpdated 方法中消失了。这仅适用于 office 2007 文档，其他文​​件不会清除该值。

事件处理程序在 MOSS 2007 的文档库中运行。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-15T20:30:55.610

我们有同样的问题。列表中的属性似乎已添加到 office 2007 文档中，但仅使用上传/创建字段的默认值。一旦项目被编辑，我们就会发现办公室文档的值会覆盖我们在事件处理程序中设置的值。

我们在使用异步事件处理程序时不会遇到这种情况，但是异步事件处理程序与具有某些类型更新的其他线程上的更新发生冲突。

我们正在与 Microsoft 就这个问题进行支持通话。他们承认这还不是没有结果。

尝试使用异步事件处理程序（它比从办公室文档更新的代码运行稍晚一点），但要小心。

**更新：**

一种解决方法是将[SPWeb.ParserEnabled](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spweb.parserenabled.aspx)设置为 FALSE 将删除与将停止上述行为的文档属性的连接。它可以防止将列表属性添加到 office 文档中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-15T19:24:20.393

当您将 Office 文档上传到 SharePoint 时，它会尝试从文档中提取列并将它们提升到列表中。

请检查您的文档是否设置了任何属性。如果是这种情况，它可以解释你所看到的。

注意：打开高级文档属性并删除所有自定义属性以确保

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-16T16:42:13.870

我解决了将 SPWeb.ParserEnabled = false 放入 ItemUpdating 方法的问题。

代码：

```
properties.ListItem.Web.ParserEnabled = false; 
```

谢谢大家的帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-30T22:03:49.240

设置 SPWeb.ParserEnabled = false 确实有效，但有效果！一个非常明显的问题是它会破坏站点和列表模板。如果 SPWeb.ParserEnabled = false，并且您保存了列表或站点模板，则它的元数据未设置（功能 ID、产品版本等），并且它不会在可供选择的模板列表中使用。您可以通过在 itemUpdated 事件期间重置 SPWeb.ParserEnabled=true 来解决此问题，但我尚未完全测试这是否会解决所有问题......

# security - 使用用户输入的 URL 处理安全和避免 XSS 的最佳方法

> ID：205923
> 
> 赞同：73
> 
> 时间：2008-10-15T18:46:52.310
> 
> 标签：security, url, xss, html-sanitizing

我们有一个高度安全的应用程序，我们希望允许用户输入其他用户可以看到的 URL。

这引入了 XSS 黑客攻击的高风险 - 用户可能会输入另一个用户最终执行的 javascript。由于我们持有敏感数据，因此永远不会发生这种情况至关重要。

处理此问题的最佳做法是什么？任何安全白名单或逃逸模式是否足够好？

关于处理重定向的任何建议（例如，在跟随链接之前的警告页面上的“此链接超出我们的站点”消息）

是否存在根本不支持用户输入链接的论点？

* * *

澄清：

基本上我们的用户想要输入：

> stackoverflow.com

并将其输出给另一个用户：

```
<a href="http://stackoverflow.com">stackoverflow.com</a> 
```

我真正担心的是他们在 XSS 黑客中使用它。即他们输入：

> alert('被黑了！');

所以其他用户得到这个链接：

```
<a href="javascript:alert('hacked!');">stackoverflow.com</a> 
```

我的例子只是为了解释风险——我很清楚 javascript 和 URL 是不同的东西，但是通过让他们输入后者，他们可能能够执行前者。

你会惊讶于这个技巧可以破坏多少个网站——HTML 更糟糕。如果他们知道处理链接，他们是否也知道清理`<iframe>`和`<img>`巧妙的 CSS 引用？

我在一个高度安全的环境中工作——一次 XSS 黑客攻击可能会给我们带来非常高的损失。我很高兴我可以生成一个正则表达式（或使用迄今为止最好的建议之一），它可以排除我能想到的所有内容，但这是否足够？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2008-10-15T18:56:39.607

如果您认为 URL 不能包含代码，请再想一想！

[https://owasp.org/www-community/xss-filter-evasion-cheatsheet](https://owasp.org/www-community/xss-filter-evasion-cheatsheet)

读到，然后哭泣。

下面是我们在 Stack Overflow 上的做法：

```
/// <summary>
/// returns "safe" URL, stripping anything outside normal charsets for URL
/// </summary>
public static string SanitizeUrl(string url)
{
    return Regex.Replace(url, @"[^-A-Za-z0-9+&@#/%?=~_|!:,.;\(\)]", "");
} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2008-10-16T20:08:37.043

渲染链接“安全”的过程应该经过三四个步骤：

*   取消转义/重新编码给定的字符串（RSnake 在[http://ha.ckers.org/xss.html](http://ha.ckers.org/xss.html)使用转义和 UTF 编码）。
*   清理链接：正则表达式是一个好的开始 - 如果字符串包含 " （或用于关闭输出中的属性的任何内容），请确保截断字符串或​​将其丢弃；如果您仅将链接作为参考对于其他信息，您还可以在此过程结束时强制协议 - 如果第一个冒号之前的部分不是“http”或“https”，则将“http://”附加到开头。这允许您创建可用的当用户在浏览器中键入时，来自不完整输入的链接会为您提供最后的机会，以阻止某人试图潜入的任何恶作剧。
*   检查结果是否是格式正确的 URL (protocol://host.domain[:port][/path][/[file]][?queryField=queryValue][#anchor])。
*   可能根据站点黑名单检查结果，或尝试通过某种恶意软件检查器获取结果。

如果安全是重中之重，我希望用户能原谅这个过程中的一些偏执，即使它最终会丢弃一些安全链接。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-04-05T04:15:18.697

使用库，例如​​ OWASP-ESAPI API：

*   PHP - [http://code.google.com/p/owasp-esapi-php/](http://code.google.com/p/owasp-esapi-php/)
*   Java - [http://code.google.com/p/owasp-esapi-java/](http://code.google.com/p/owasp-esapi-java/)
*   .NET - [http://code.google.com/p/owasp-esapi-dotnet/](http://code.google.com/p/owasp-esapi-dotnet/)
*   Python - [http://code.google.com/p/owasp-esapi-python/](http://code.google.com/p/owasp-esapi-python/)

阅读以下：

*   [https://www.golemtechnologies.com/articles/prevent-xss#how-to-prevent-cross-site-scripting](https://www.golemtechnologies.com/articles/prevent-xss#how-to-prevent-cross-site-scripting)
*   [https://www.owasp.org/](https://www.owasp.org/)
*   [http://www.secbytes.com/blog/?p=253](http://www.secbytes.com/blog/?p=253)

例如：

```
$url = "http://stackoverflow.com"; // e.g., $_GET["user-homepage"];
$esapi = new ESAPI( "/etc/php5/esapi/ESAPI.xml" ); // Modified copy of ESAPI.xml
$sanitizer = ESAPI::getSanitizer();
$sanitized_url = $sanitizer->getSanitizedURL( "user-homepage", $url ); 
```

另一个例子是使用内置函数。PHP 的[filter_var](http://svn.php.net/viewvc/php/php-src/trunk/ext/filter/logical_filters.c?view=markup)函数就是一个例子：

```
$url = "http://stackoverflow.com"; // e.g., $_GET["user-homepage"];
$sanitized_url = filter_var($url, FILTER_SANITIZE_URL); 
```

Using`filter_var` [允许](http://www.hashbangcode.com/examples/filter_var_url_validate/)javascript 调用，并过滤掉既不是`http`也不是`https`. 使用[OWASP ESAPI Sanitizer](https://code.google.com/p/owasp-esapi-php/source/browse/trunk/src/Sanitizer.php)可能是最好的选择。

另一个例子是来自[WordPress](http://codex.wordpress.org/Function_Reference/esc_url)的代码：

*   [http://core.trac.wordpress.org/browser/tags/3.5.1/wp-includes/formatting.php#L2561](http://core.trac.wordpress.org/browser/tags/3.5.1/wp-includes/formatting.php#L2561)

此外，由于无法知道 URL 链接的位置（即，它可能是有效的 URL，但 URL 的内容可能是恶作剧），Google 有一个[安全浏览](https://developers.google.com/safe-browsing/)API，您可以调用：

*   [https://developers.google.com/safe-browsing/lookup_guide](https://developers.google.com/safe-browsing/lookup_guide)

出于以下几个原因，滚动您自己的正则表达式进行卫生是有问题的：

*   除非你是 Jon Skeet，否则代码会有错误。
*   现有 API 背后有许多小时的审查和测试。
*   现有的 URL 验证 API 考虑国际化。
*   现有 API 将与新兴标准保持同步。

其他需要考虑的问题：

*   您允许（`file:///`并且`telnet://`可以接受）哪些计划？
*   您希望对 URL 的内容施加什么限制（恶意软件 URL 是否可以接受）？

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-10-15T18:57:01.417

输出链接时只需对链接进行 HTMLEncode。确保您不允许`javascript:`链接。（最好有一个可接受的协议白名单，例如 http、https 和 mailto。）

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-10-15T18:51:47.883

您不指定应用程序的语言，我会假设 ASP.NET，为此您可以使用[Microsoft Anti-Cross Site Scripting Library](http://msdn.microsoft.com/en-us/security/aa973814.aspx)

它非常易于使用，您所需要的只是一个包含，就是这样:)

当您谈到这个主题时，为什么不阅读[安全 Web 应用程序的设计指南](http://msdn.microsoft.com/en-us/library/aa302420.aspx)

如果有任何其他语言......如果有 ASP.NET 的库，则必须也可用于其他类型的语言（PHP、Python、ROR 等）

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-03-17T10:36:20.313

对于 Pythonistas，试试 Scrapy 的[w3lib](https://github.com/scrapy/w3lib)。

[OWASP ESAPI 早于 Python 2.7](https://www.owasp.org/index.php/ESAPI_Python_Readme)，并存档在[现已失效的 Google Code](https://en.wikipedia.org/wiki/Google_Developers#Google_Code)上。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-10-15T18:49:15.393

不将它们显示为链接怎么样？只需使用文本。

结合警告继续进行，风险自负可能就足够了。

**另外**- 另请参阅[我应该清理托管 CMS 的 HTML 标记吗？](https://stackoverflow.com/questions/176195/for-hosted-applications-should-i-be-sanitizing)有关清理用户输入的讨论

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-10-14T15:14:05.473

在我用 JavaScript 编写的项目中，我将此正则表达式用作白名单：

```
 url.match(/^((https?|ftp):\/\/|\.{0,2}\/)/) 
```

唯一的限制是您需要将 ./ 放在同一目录中的文件前面，但我想我可以忍受。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-09-23T21:47:47.780

使用正则表达式来防止 XSS 漏洞变得越来越复杂，因此随着时间的推移难以维护，同时它可能会留下一些漏洞。使用正则表达式进行 URL 验证在某些情况下很有帮助，但最好不要与漏洞检查混合使用。

解决方案可能是使用编码器的组合，例如`AntiXssEncoder.UrlEncode`编码 URL 的查询部分和`QueryBuilder`其余部分：

```
 public sealed class AntiXssUrlEncoder
    {
        public string EncodeUri(Uri uri, bool isEncoded = false)
        {
            // Encode the Query portion of URL to prevent XSS attack if is not already encoded. Otherwise let UriBuilder take care code it.
            var encodedQuery = isEncoded ? uri.Query.TrimStart('?') : AntiXssEncoder.UrlEncode(uri.Query.TrimStart('?'));
            var encodedUri = new UriBuilder
            {
                Scheme = uri.Scheme,
                Host = uri.Host,
                Path = uri.AbsolutePath,
                Query = encodedQuery.Trim(),
                Fragment = uri.Fragment
            };
            if (uri.Port != 80 && uri.Port != 443)
            {
                encodedUri.Port = uri.Port;
            }

            return encodedUri.ToString();
        }

        public static string Encode(string uri)
        {
            var baseUri = new Uri(uri);
            var antiXssUrlEncoder = new AntiXssUrlEncoder();
            return antiXssUrlEncoder.EncodeUri(baseUri);
        }
    } 
```

您可能需要包含白名单以从编码中排除某些字符。这可能对特定网站有所帮助。HTML 对呈现 URL 的页面进行编码是您可能还需要考虑的另一件事。

**顺便说一句**。请注意，编码 URL 可能会破坏[Web 参数篡改](https://owasp.org/www-community/attacks/Web_Parameter_Tampering)，因此编码的链接可能无法按预期工作。此外，您需要注意双重编码

*PS`AntiXssEncoder.UrlEncode`最好命名`AntiXssEncoder.EncodeForUrl`为更具描述性。基本上，它对 URL 的字符串进行编码，而不是对给定的 URL 进行编码并返回可用的 URL。*

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-10-08T07:26:14.107

有一个 javascript 库可以解决这个问题 [https://github.com/braintree/sanitize-url](https://github.com/braintree/sanitize-url) 试试看 =)

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2013-07-26T08:14:19.317

您可以使用十六进制代码来转换整个 URL 并将其发送到您的服务器。这样客户第一眼就不会理解内容。阅读内容后，您可以解码内容 URL = ? 并将其发送到浏览器。

* * *

## 回答 #12

> 赞同：-8
> 
> 时间：2008-10-15T18:48:21.900

允许 URL 和允许 JavaScript 是两件不同的事情。

# winforms - 如何使 Windows 窗体 UI 响应？

> ID：205937
> 
> 赞同：3
> 
> 时间：2008-10-15T18:51:45.560
> 
> 标签：winforms, user-interface, .net-2.0

这是所有开发人员的常见问题，我正在寻找使 Windows 窗体 UI 响应的最佳解决方案。

我有一个动画 GIF 文件来显示我在 windows 窗体上的计算进度。我拿了一个图片框控件并将动画 gif 放入其中。现在当我开始计算时 - 动画 gif 冻结。我想要相反的，当我运行计算时动画应该是可见的。

有什么中肯的想法吗？一个简单的解决方案是在后台进行复杂计算的同时向用户显示进度条

> 我的应用程序是一个单线程应用程序，我想要一个简单的解决方案，而不是寻找多线程或后台工作者类型的技术。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-10-15T18:56:38.997

多线程将是我的建议。第一次尝试时有点混乱；）

最简单的模型：一个线程用于 GUI，一个线程用于您需要做的任何工作。

检查[此链接](http://msdn.microsoft.com/en-us/magazine/cc300429.aspx)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-10-15T18:53:42.017

应用程序.doevents

你把它放在循环中。它让 UI 有时间去做它的事情。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-10-15T18:54:09.940

好吧，一次做两件事的唯一真正方法（比如做计算，并且仍然保持响应）是使用线程。如果您不想显式使用线程，请检查是否有任何异步调用可用于在后台执行此操作。除此之外，在您做大量工作的地方进行大量 Application.DoEvents 调用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-10-15T19:02:20.423

我将不得不将 Jeff 放在这个网站上：

[编码恐怖：DoEvents 是邪恶的吗？](http://www.codinghorror.com/blog/archives/000159.html)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-10-17T00:53:57.030

“在幕后进行复杂计算的同时向用户显示进度的简单解决方案？”

“不是在寻找多线程或后台工作者类型的技术。”

这些愿望中哪一个对你来说更重要？您必须选择其中之一。

# sharepoint - SharePoint 计时器作业在什么用户上下文下运行？

> ID：205943
> 
> 赞同：3
> 
> 时间：2008-10-15T18:52:41.317
> 
> 标签：sharepoint

SharePoint 计时器作业在什么用户上下文下运行？农场账户？

我将通过计时器作业访问一些外部资源（网络共享），因此我需要知道要授予权限的 SharePoint 服务帐户。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-10-15T19:25:17.957

是的，在 Technet 的所有文档中，它都是“SharePoint 场帐户”。

实际上，运行 OWSTimer 作业的是用户。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-09-03T08:41:37.910

windows 身份将如上所述，即 OWSTimer 服务的身份。但是，在访问 SharePoint 资源时，SPTimerJob 将使用 SharePoint\System 的 SPUser 标识。您可以通过创建计时器作业来修改列表项来检查这一点 - “修改者”用户友好名称将是“系统帐户”，而不是 OWSTimer 服务的域\用户窗口标识。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-15T19:25:25.710

我相信是这样。根据这篇博客文章，[http](http://meenrajan.blogspot.com/2008/08/sharepoint-timer-job.html) ://meenrajan.blogspot.com/2008/08/sharepoint-timer-job.html，您可以通过执行以下操作来检查运行它的身份：

“你可以去任务管理器，找到正在运行的 w3wp.exe 进程，查看它使用的帐户，以确定运行 job.update() 的帐户是什么。否则，你也可以，在您的 Sharepoint 配置数据库上执行 SQL 跟踪并找到使用的帐户”

# c++ - 为什么 C++ STL 不提供任何“树”容器？

> ID：205945
> 
> 赞同：410
> 
> 时间：2008-10-15T18:52:42.110
> 
> 标签：c++, data-structures, tree, stl

为什么 C++ STL 不提供任何“树”容器，而最好使用什么？

我想将对象的层次结构存储为树，而不是使用树作为性能增强...

* * *

## 回答 #1

> 赞同：190
> 
> 时间：2008-10-15T19:02:35.117

您可能想要使用树有两个原因：

您想使用树状结构来反映问题：
为此，我们有[boost 图形库](https://www.boost.org/doc/libs/1_70_0/libs/graph/doc/index.html)

或者您想要一个具有树状访问特性的容器为此我们有

*   [`std::map`](https://en.cppreference.com/w/cpp/container/map)（和[`std::multimap`](https://en.cppreference.com/w/cpp/container/multimap)）
*   [`std::set`](https://en.cppreference.com/w/cpp/container/set)（和[`std::multiset`](https://en.cppreference.com/w/cpp/container/multiset)）

基本上这两个容器的特性使得它们实际上必须使用树来实现（尽管这实际上不是必需的）。

另请参阅此问题： [C 树实现](https://stackoverflow.com/questions/181630/whats-a-good-and-stable-c-tree-implementation)

* * *

## 回答 #2

> 赞同：105
> 
> 时间：2008-10-15T19:09:15.680

可能出于同样的原因，在 boost 中没有树容器。实现这样一个容器的方法有很多种，没有什么好的方法可以让所有会使用它的人都满意。

需要考虑的一些问题：

*   节点的子节点数量是固定的还是可变的？
*   每个节点有多少开销？- 即，您是否需要父指针、兄弟指针等？
*   提供什么算法？- 不同的迭代器、搜索算法等。

最后，问题最终是一个对每个人都足够有用的树容器太重，无法满足大多数使用它的人。如果您正在寻找功能强大的东西，[Boost Graph Library](http://www.boost.org/doc/libs/1_36_0/libs/graph/doc/table_of_contents.html)本质上是树形库的超集。

以下是一些其他的通用树实现：

*   [Kasper Peeters 的树.hh](http://tree.phi-sci.com/)
*   [Adobe的森林](http://stlab.adobe.com/group__forest__related.html)
*   [核心::树](http://archive.gamedev.net/archive/reference/programming/features/coretree1/)

* * *

## 回答 #3

> 赞同：53
> 
> 时间：2008-10-15T20:04:46.100

STL 的理念是基于保证而不是基于容器的实现方式来选择容器。例如，您对容器的选择可能基于快速查找的需要。对于您所关心的，容器可以实现为单向列表——只要搜索速度非常快，您会很高兴。那是因为无论如何您都没有触及内部，而是使用迭代器或成员函数进行访问。你的代码不受容器是如何实现的约束，而是它的速度，或者它是否具有固定和定义的顺序，或者它是否在空间上是有效的，等等。

* * *

## 回答 #4

> 赞同：53
> 
> 时间：2013-03-18T09:33:12.777

> “我想将对象的层次结构存储为树”

C++11 来来去去，他们仍然认为不需要提供 a `std::tree`，尽管这个想法确实出现了（见[这里](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2005/n1901.html)）。也许他们没有添加它的原因是在现有容器之上构建自己的容器非常容易。例如...

```
template< typename T >
struct tree_node
   {
   T t;
   std::vector<tree_node> children;
   }; 
```

一个简单的遍历将使用递归......

```
template< typename T >
void tree_node<T>::walk_depth_first() const
   {
   cout<<t;
   for ( auto & n: children ) n.walk_depth_first();
   } 
```

如果您想维护一个层次结构*并*希望它与[STL 算法](http://en.cppreference.com/w/cpp/algorithm)一起工作，那么事情可能会变得复杂。您可以构建自己的迭代器并实现一些兼容性，但是许多算法对于层次结构根本没有任何意义（例如，任何改变范围顺序的东西）。即使在层次结构中*定义*范围也可能是一件麻烦事。

* * *

## 回答 #5

> 赞同：48
> 
> 时间：2011-04-25T11:24:58.100

如果您正在寻找 RB-tree 实现，那么[stl_tree.h](http://gcc.gnu.org/onlinedocs/libstdc++/libstdc++-html-USERS-4.1/stl__tree_8h.html)可能也适合您。

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2008-10-15T19:00:23.250

std::map 基于[红黑树](http://en.wikipedia.org/wiki/Red-black_tree)。您还可以使用其他[容器](http://www.cplusplus.com/reference/stl/)来帮助您实现自己的树类型。

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2008-10-15T18:55:36.833

在某种程度上，std::map 是一棵树（它需要具有与平衡二叉树相同的性能特征），但它不公开其他树功能。不包括真正的树数据结构背后的可能原因可能只是不包括 stl 中的所有内容。stl 可以看作是一个框架，用于实现您自己的算法和数据结构。

一般来说，如果有你想要的基本库功能，那不在 stl 中，解决方法是查看[BOOST](http://www.boost.org/doc/libs/1_36_0/libs/graph/doc/index.html)。

否则，那里有[一堆库](http://www.codeproject.com/KB/architecture/treedata_class.aspx)[，](http://www.scalingweb.com/bplus_tree.php)[这](http://www.aei.mpg.de/~peekas/tree/)取决于[你](http://stlplus.sourceforge.net/stlplus/docs/ntree.html)的树的需要。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2011-09-29T14:50:31.117

所有 STL 容器在外部都表示为具有一种迭代机制的“序列”。树不遵循这个习语。

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2017-04-15T22:16:00.817

我认为没有 STL 树有几个原因。树主要是递归数据结构的一种形式，它像容器（列表、向量、集合）一样，具有非常不同的精细结构，这使得正确的选择变得棘手。它们也很容易使用 STL 以基本形式构建。

可以将有限有根树视为具有值或有效负载的容器，例如 A 类的实例和可能为空的有根（子）树集合；具有空子树集合的树被认为是叶子。

```
template<class A>
struct unordered_tree : std::set<unordered_tree>, A
{};

template<class A>
struct b_tree : std::vector<b_tree>, A
{};

template<class A>
struct planar_tree : std::list<planar_tree>, A
{}; 
```

人们必须考虑一下迭代器设计等，以及允许在树之间定义和高效的乘积和联乘操作 - 并且必须很好地编写原始 STL - 以便空集、向量或列表容器是在默认情况下真的没有任何有效载荷。

树在许多数学结构中起着至关重要的作用（参见 Butcher、Grossman 和 Larsen 的经典论文；以及 Connes 和 Kriemer 的论文中关于它们可以连接的示例以及它们如何用于枚举）。认为他们的角色只是为了促进某些其他操作是不正确的。相反，它们促进了这些任务，因为它们作为数据结构的基本作用。

但是，除了树之外，还有“合作树”；最重要的树都有一个属性，如果你删除根，你会删除所有东西。

考虑树上的迭代器，可能它们将被实现为一个简单的迭代器堆栈，到一个节点，到它的父节点，......直到根。

```
template<class TREE>
struct node_iterator : std::stack<TREE::iterator>{
operator*() {return *back();}
...}; 
```

但是，您可以拥有任意数量；它们共同形成一棵“树”，但所有箭头都流向根的方向，这棵共同树可以通过迭代器迭代到平凡的迭代器和根；然而，它不能被导航或向下导航（它不知道其他迭代器），也不能删除迭代器的集合，除非跟踪所有实例。

树非常有用，它们有很多结构，这使得获得绝对正确的方法成为一个严峻的挑战。在我看来，这就是为什么它们没有在 STL 中实现的原因。此外，在过去，我看到人们变得虔诚并发现包含其自身类型实例的容器类型的想法具有挑战性 - 但他们必须面对它 - 这就是树类型所代表的 - 它是一个包含可能是（较小的）树的空集合。当前语言允许它毫无挑战地提供默认构造函数，`container<B>`不会在堆（或其他任何地方）上为 a`B`等分配空间。

如果这确实以一种良好的形式进入标准，我会很高兴。

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2008-10-15T19:05:42.117

因为 STL 不是“一切”库。本质上，它包含构建事物所需的最小结构。

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2011-09-29T14:13:34.150

这个看起来很有希望，似乎就是你要找的东西：http: [//tree.phi-sci.com/](http://tree.phi-sci.com/)

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2021-11-08T09:46:21.113

问题是没有一种万能的解决方案。此外，树甚至没有万能的**接口**。也就是说，甚至不清楚这种树数据结构应该提供哪些方法，甚至不清楚树是什么。

这就解释了为什么没有 STL 支持：STL 用于大多数人需要的数据结构，基本上每个人都同意什么是合理的接口和有效的实现。对于树来说，这样的事情根本不存在。

## 血淋淋的细节

如果想进一步了解问题所在，请继续阅读。否则，上面的段落应该足以回答您的问题。

我说连通用接口都没有。您可能不同意，因为您只考虑了一个应用程序，但是如果您进一步考虑它，您会发现树上有无数可能的操作。您可以拥有一个数据结构来有效地启用它们中的大多数，但因此总体上更复杂并且具有该复杂性的开销，或者您拥有更简单的数据结构，只允许基本操作，但这些操作尽可能快。

如果您想要完整的故事，请查看[我关于该主题的论文](http://www.vldb.org/pvldb/vol8/p986-finis.pdf)。在那里，您将找到可能的接口、不同实现的渐近复杂性、问题的一般描述以及更多可能实现的相关工作。

## 什么是树？

它已经从您认为是一棵树的东西开始：

*   有根或无根：大多数程序员想要有根，大多数数学家想要无根。（如果您想知道什么是无根的：A - B - C 是一棵树，其中 A、B 或 C 都可以是根。有根树定义了哪个是根。无根树没有）
*   单根/连接或多根/断开连接（树或林）
*   兄弟顺序是否相关？如果不是，那么树结构是否可以在内部重新排序更新时的子级？如果是这样，则不再定义兄弟之间的迭代顺序。但是对于大多数树来说，兄弟顺序*实际上*没有意义，并且允许数据结构在更新时对子节点重新排序对于某些更新非常有利。
*   真的只是一棵树，或者也允许 DAG 边缘（听起来很奇怪，但许多最初想要一棵树的人最终想要一个 DAG）
*   贴标签还是不贴标签？你需要存储每个节点的任何数据，还是只是你感兴趣的树结构（后者可以*非常*简洁地存储）

## 查询操作

在我们弄清楚我们定义的树之后，我们应该定义查询操作：基本操作可能是“导航到子节点，导航到父节点”，但还有更多可能的操作，例如：

*   导航到下一个/上一个兄弟：即使大多数人都认为这是一个非常基本的操作，如果你只有一个父指针或一个子数组，这实际上几乎是不可能的。因此，这已经向您表明，根据您需要的操作，您可能需要完全不同的实现。
*   按前/后顺序导航
*   子树大小：当前节点的（传递）后代的数量（可能在 O(1) 或 O(log n) 中，即不要只枚举它们全部计数）
*   当前节点中树的高度。即从这个节点到任何离开节点的最长路径。同样，在小于 O(n) 的时间内。
*   给定两个节点，找到该节点的最小共同祖先（使用 O(1) 内存消耗）
*   在前序/后序遍历中，节点 A 和节点 B 之间有多少个节点？（少于 O(n) 运行时间）

我强调这里有趣的是这些方法是否可以比 O(n) 执行得更好，因为仅枚举整个树始终是一种选择。根据您的应用程序，某些操作比 O(n) 更快可能是绝对关键的，或者您可能根本不关心。同样，根据您的需要，您将需要非常不同的数据结构。

## 更新操作

到目前为止，我只讨论了查询操作。但现在要更新了。同样，可以通过多种方式更新树。根据您的需要，您需要或多或少复杂的数据结构：

*   叶更新（简单）：删除或添加叶节点
*   内部节点更新（更难）：移动或删除移动内部节点，使其子节点成为其父节点的子节点
*   子树更新（更难）：移动或删除以节点为根的子树

只是给你一些直觉：如果你存储一个子数组并且你的兄弟顺序很重要，即使删除一个叶子也可能是 O(n) 因为它后面的所有兄弟都必须在其父数组的子数组中移动。相反，如果您只有一个父指针，则叶删除是微不足道的 O(1)。如果您不关心兄弟顺序，则子数组也是 O(1)，因为您可以简单地将间隙替换为数组中的最后一个兄弟。这只是一个示例，不同的数据结构将为您提供完全不同的更新功能。

在父指针的情况下，移动整个子树再次简单地 O(1)，但如果您有一个存储所有节点的数据结构，例如按预购顺序，则可能是 O(n)。

然后，有一些正交的考虑，比如如果你执行更新，哪些迭代器保持有效。一些数据结构需要使整个树中的所有迭代器都无效，即使你插入了一个新的叶子。其他人仅使树中被更改的部分中的迭代器无效。其他人保持所有迭代器（已删除节点的迭代器除外）有效。

## 空间考虑

树结构可以非常简洁。如果您需要节省空间（例如，DFUDS 或 LOUDS，请参阅[此说明](http://www.eecs.tufts.edu/%7Ealoupis/comp150/projects/SuccinctTreesinPractice.pdf)以了解要点），每个节点大约两个位就足够了。但是当然，天真地，即使是父指针也已经是 64 位了。一旦你选择了一个很好导航的结构，你可能宁愿每个节点需要 20 个字节。

有了很多复杂性，人们还可以构建[一个每个条目只需要一些位的数据结构，可以有效地更新，并且仍然可以渐近快速地实现所有查询操作](https://users.dcc.uchile.cl/%7Egnavarro/ps/talg12.pdf)，但这是一个非常复杂的结构的野兽。我曾经开设了一门实践课程，让研究生实施这篇论文。他们中的一些人能够在 6 周内实施它（！），其他人则失败了。虽然该结构具有很好的渐近性，但它的复杂性使其对于非常简单的操作具有相当大的开销。

同样，没有一种万能的。

## 结论

我花了 5 年时间寻找表示树*的最佳*数据结构，尽管我想出了一些并且有相当多的相关工作，但我的结论是没有。根据用例，高度复杂的数据结构将优于简单的父指针。甚至为树定义接口也很困难。我尝试在我的论文中定义一个，但我必须承认在各种用例中我定义的接口太窄或太大。所以我怀疑这是否会出现在 STL 中，因为调音旋钮太多了。

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2013-03-05T17:45:01.897

IMO，一个遗漏。但我认为有充分的理由不在 STL 中包含树结构。维护一棵树有很多逻辑，最好将其作为*成员函数写入基础`TreeNode`对象*。当`TreeNode`包含在 STL 标头中时，它会变得更加混乱。

例如：

```
template <typename T>
struct TreeNode
{
  T* DATA ; // data of type T to be stored at this TreeNode

  vector< TreeNode<T>* > children ;

  // insertion logic for if an insert is asked of me.
  // may append to children, or may pass off to one of the child nodes
  void insert( T* newData ) ;

} ;

template <typename T>
struct Tree
{
  TreeNode<T>* root;

  // TREE LEVEL functions
  void clear() { delete root ; root=0; }

  void insert( T* data ) { if(root)root->insert(data); } 
} ; 
```

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2020-02-02T12:02:27.573

通读这里的答案，常见的命名原因是不能遍历树，或者树不假设与其他 STL 容器的类似接口，并且不能使用具有这种树结构的 STL 算法。

考虑到这一点，我尝试设计自己的树数据结构，该结构将提供类似 STL 的接口，并尽可能与现有的 STL 算法一起使用。

我的想法是，树必须基于现有的 STL 容器，并且它不能隐藏容器，以便它可以与 STL 算法一起使用。

树必须提供的另一个重要特性是遍历迭代器。

这是我能想到的：[https ://github.com/cppfw/utki/blob/master/src/utki/tree.hpp](https://github.com/cppfw/utki/blob/master/src/utki/tree.hpp)

这里是测试：[https ://github.com/cppfw/utki/blob/master/tests/unit/src/tree.cpp](https://github.com/cppfw/utki/blob/master/tests/unit/src/tree.cpp)

* * *

## 回答 #15

> 赞同：-10
> 
> 时间：2013-08-06T10:26:34.353

所有 STL 容器都可以与迭代器一起使用。你不能有一个迭代器和一棵树，因为你没有“一个正确的”方式穿过树。

# sql - 在 sql 查询中动态查找表的列名

> ID：205950
> 
> 赞同：1
> 
> 时间：2008-10-15T18:53:06.120
> 
> 标签：sql, oracle, select, insert

我正在编写 SQL（用于 Oracle），例如：

```
INSERT INTO Schema1.tableA SELECT * FROM Schema2.tableA;

```

其中 Schema1.tableA 和 Schema2.tableA 具有相同的列。但是，这似乎是不安全的，因为在 SELECT 中返回的列的顺序是未定义的。我应该做的是：

```
插入到 Schema1.tableA (col1, col2, ... colN)
从 Schema2.tableA 中选择 (col1, col2, ... colN);

```

我正在使用一些脚本为很多表执行此操作，所以我想做的是编写如下内容：

```
插入到 Schema1.tableA (foo(Schema1.tableA))
从 Schema2.tableA 中选择（foo（Schema1.tableA））；

```

其中 foo 是一些漂亮的魔法，它从表一中提取列名并将它们打包成适当的语法。想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-10-15T19:35:21.493

这个 PL/SQL 应该这样做：

```
declare
    l_cols long;
    l_sql  long;
begin
    for r in (select column_name from all_tab_columns
              where  table_name = 'TABLEA'
              and    owner = 'SCHEMA1'
             )
    loop
       l_cols := l_cols || ',' || r.column_name;
    end loop;

    -- Remove leading comma
    l_cols := substr(l_cols, 2);

    l_sql := 'insert into schema1.tableA (' || l_cols || ') select ' 
             || l_cols || ' from schema2.tableA';

    execute immediate l_sql;

end;
/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-15T18:58:02.723

您可能需要使用[USER_TAB_COLUMNS动态构造插入语句并使用](http://download.oracle.com/docs/cd/B28359_01/server.111/b28320/statviews_5429.htm#REFRN26277)[EXECUTE IMMEDIATE](http://download.oracle.com/docs/cd/B28359_01/appdev.111/b28370/executeimmediate_statement.htm#LNPLS01317)执行它们。

# .net - 如何使用 ASP.NET 将文件从一台机器移动到另一台机器？

> ID：205958
> 
> 赞同：0
> 
> 时间：2008-10-15T18:55:16.833
> 
> 标签：.net, asp.net, ftp, impersonation

假设我有一个网站，一旦用户选择了几个选项，以下（应该）会发生：

*   从本地机器上抓取文件（在目录中） - 到目前为止工作正常
*   将它们移动到远程服务器 - 这是我需要帮助的地方

细节：

*   将通过 UNC 路径 (\servername\xyz) 找到远程服务器
*   我可以访问用户名/密码来访问该 UNC 路径，但由于我们位于不同的域中并且我无法控制 IT 的决策，因此我不能拥有一个在两个域中都具有权限的用户。

我该如何设置我的网站来做到这一点？如果我冒充，那么我可能会失去在本地机器上抓取文件的权限......

注意：我也可以通过 FTP 访问远程服务器。如果有一个我可以使用的好的 FTP API，那也可以，但我不想遍历每个文件。

哦，这也是 .NET 1.1。

* * *

这是对相关问题的建议： [Need to Impersonate user forAccessing Network resource, Asp.Net Account](https://stackoverflow.com/questions/233490/need-to-impersonate-user-foraccessing-network-resource-aspnet-account)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-15T19:00:11.567

我以前做过这个跨域。您所需要的只是用户名和密码相同，即使它们位于不同的域中，这也将起作用。要确定的是您的 .NET 应用程序是以该用户身份运行的。

例如：

*   在域 XYZ 中有一个用户“filesynch”，密码为“pass”
*   在域 PDQ 中有一个用户“filesynch”，密码为“pass”
*   确保用户 PDQ\filesynch 有权访问 PDQ 域中机器上的共享
*   以 XYZ\filesynch 用户身份在 XYZ 域中的计算机上运行应用程序
*   通过网络复制文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-15T19:04:06.987

这可以使用 unc 或 ftp 来完成。对于较早的（unc），您可以使用 File.Copy(source, target) - 对于后者，您可以使用几种技术。如果您将用户想要的内容存储在远程站点上，您可以使用 Web 客户端 (System.Net.WebClient) 通过任何可访问的 url 下载文件（即：在 IIS 中打开文件浏览）。

如果您可以使用 .NET 2.0，您有更好的选择和更可靠的对象（即：FtpRequest） - 为什么不能使用 .NET 2.0 有什么原因吗？

# sql - 选择查询中的 SQL 日期格式问题

> ID：205975
> 
> 赞同：2
> 
> 时间：2008-10-15T18:59:10.630
> 
> 标签：sql, sql-server, asp-classic, date-format

我有一个 ASP 页面，它将从 SQL 服务器数据库表中获取记录。表“order_master”有一个名为 order_date 的字段。我想构建一个选择查询以获取订单日期>用户输入的日期（例如：07/01/2008）

我尝试了转换和强制转换，但两者都不起作用。order_date 列中的示例数据是 4/10/2008 8:27:41 PM。实际上，我不知道它是什么类型（varchar/datetime）。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-15T19:11:20.280

我会先检查以确保 SQL 数据类型是 DateTime 或 SmallDateTime，然后再检查以确保您从页面中传递了 Date/DateTime 值。

如果这两个都是正确的，那么您最好遵循 Joel 的建议，并在尝试比较之前将这两个值显式转换为日期。另外，检查您正在查看的时间值的精度；这似乎很明显，但 1/1/2008 12:00:00.001 AM 将不等于 1/1/2008 12:00:00.000 AM。是的，我说的是经验。:P

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-15T19:12:27.233

07/01/2008 日期是英国/法国注释，所以您需要做的就是：

`SELECT myColumn FROM myTable WHERE myDateField >= convert(datetime, '07/01/2008 00:00:00', 103)`

此代码将获取 myDateField 的日期为 2008 年 1 月 7 日的所有行，从 00:00:00 (hh:mm:ss) 开始，因此，那天的第一秒......简单地说，就是一整天。

有关更多信息，[请查看 MSDN 上的在线图书](http://msdn.microsoft.com/en-us/library/ms187928.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-15T19:02:32.370

你可以像这样创建一个存储过程

```
CREATE PROCEDURE GetOrders
    @OrderDate DATETIME
AS
SELECT
    *
FROM order_master
WHERE Order_Date > @OrderDate

GO 
```

然后，您可以在通过 ASP 代码调用存储过程之前将用户输入转换为日期。

**编辑**

我刚刚注意到关于列类型的注释，你可以运行这个命令

```
sp_help order_master 
```

获取列信息以查找 order_date 的数据类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-15T19:04:29.857

您是否尝试过将*两个*值转换为日期时间类型？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-15T19:24:40.627

请记住，在比较日期时，4/10/2008 8:27:41 PM*不*等于 4/10/2008。SQL Server 会将 4/10/2008 解释为 4/10/2008 12:00:00 AM，并*精确*比较到第二个。因此 4/10/2008 小于 4/10/2008 8:27:41 PM

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-10-16T09:10:43.440

你说你不知道字段类型。这将是第一个要解决的问题，找出来。你可以这样做： -

```
SELECT DATA_TYPE
FROM INFORMATION_SCHEMA.COLUMNS
WHERE TABLE_NAME = 'Order_Master' AND
    COLUMN_NAME = 'Order_Date' 
```

如果它不是应转换的日期时间类型之一，如果这不是您的责任，那么请与确实有责任的人联系。

您关心日期的“格式”这一事实表明您可能正在使用串联构建 SQL。如果是这样，请停止这样做。使用带参数的命令并将日期作为日期类型传入。

现在您的问题是如何在客户端输入日期并将其转换为可在 ASP 代码中解析为日期的明确格式之一。

如果这不是您已解决的问题，请对此答案添加评论，我将扩展此答案。

# asp.net - ASP.NET 页面验证

> ID：205977
> 
> 赞同：5
> 
> 时间：2008-10-15T18:59:49.663
> 
> 标签：asp.net, ajax, validation

[相关文章](https://stackoverflow.com/questions/205887/postback-security)

关于与上述文章类似的主题，但有更具体的说明。您究竟如何处理视图状态中的项目（因此它们包含在提交中），但也可以通过 AJAX 进行更改。例如，假设我们有一个通过 AJAX Web 服务调用（不是更新面板）填充的下拉列表。更改下拉列表的项目后，如何让页面进行验证？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-15T21:10:12.397

您没有验证下拉列表是吗？您正在验证用户选择的值。这与其他帖子的建议几乎相同，因为 javascript 或其他工具可以更改 html 或创建自己的 POST，因此您*必须始终*在服务器端进行验证。假设所有客户端请求都可以被篡改，并假设没有发生客户端验证。

* * *

如果您使用的是 Web 表单模型 ....

如果您只想检查在下拉列表中选择了一个值`myAjaxDropDown`，请使用

```
<asp:RequiredFieldValidator id="dropdownRequiredFieldValidator"
          ControlToValidate="myAjaxDropDown"
          Display="Static"
          InitialValue="" runat=server>
          *
        </asp:RequiredFieldValidator> 
```

您可能还想查看 asp:CustomValidator - 用于服务器端验证：

```
<asp:CustomValidator ID="myCustomValidator" runat="server" 
    onservervalidate="myCustomValidator_ServerValidate" 
    ErrorMessage="Bad Value" /> 
```

两者都插入到 asp.net 的验证框架中。例如，当您单击一个名为`SumbitButton`

```
protected void myCustomValidator_ServerValidate(object source, ServerValidateEventArgs e)
{
    // determine validity for this custom validator
    e.IsValid = DropdownValueInRange(myAjaxDropDown.SelectedItem.Value); 
}

protected void SubmitButton_Click( object source, EventArgs e )
{
    Validate(); 
    if( !IsValid )
        return;

    // validators pass. Continue processing.
} 
```

一些进一步阅读的链接：

*   [ASP.Net 2.0 快速入门 - 验证表单输入控件](http://quickstart.developerfusion.co.uk/QuickStart/aspnet/doc/validation/default.aspx)
*   [ASP.NET 验证控件——要点、提示和技巧](http://www.dotnetcurry.com/ShowArticle.aspx?ID=121&AspxAutoDetectCookieSupport=1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-15T21:00:05.007

您可以从您的 javascript 代码中调用 Page_Validate() 函数，它将触发页面上的 asp.net 验证器，它与服务器代码中的 Page.Validate() 基本相似

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-15T19:34:56.753

为什么即使在下拉列表中也不验证 onChange？

只需添加脚本管理器并将该属性添加到 Page_Load 事件中的 onchange

```
' 创建用于验证的 javascript 函数
将 js 调暗为字符串
js = "函数 validateDDL1(ddl) { alert(ddl.value); }"

' 添加 onChange javascript 方法
DropDownList1.Attributes.Add("onchange", "validateDDL1(this);")

' 注册 javascript
ScriptManager.RegisterClientScriptBlock（我，GetType（字符串），“validateDDL1（ddl）”，js，真）

```

# vb.net - 如何在 For Each...Next 循环中获取对象的索引？

> ID：205986
> 
> 赞同：7
> 
> 时间：2008-10-15T19:02:53.587
> 
> 标签：vb.net

我使用以下语法循环列表集合：

```
For Each PropertyActor As JCPropertyActor In MyProperty.PropertyActors

    i = IndexOf(PropertyActor)
Next 
```

如何获取循环内当前对象的索引？我正在使用 IndexOf(PropertyActor) 但这似乎效率低下，因为当我已经有了可用的对象时它会搜索集合！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-10-15T19:05:19.887

AFAIK 因为这会将对象从集合中拉出，所以您必须返回集合才能找到它。

如果您需要索引，而不是使用 for each 循环，我只会使用一个遍历索引的 for 循环，这样您就知道自己拥有什么。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2008-10-15T19:07:33.970

索引对 IEnumerable 没有任何意义，这是 foreach 构造使用的。这很重要，因为`foreach`如果您的特定集合类型以奇怪的方式实现 IEnumerable，则可能不会按索引顺序枚举。如果您有一个可以通过索引访问的对象*并且*您在迭代期间关心索引，那么您最好只使用传统的 for 循环：

```
for (int i=0;i<MyProperty.PropertyActors.Length;i++)
{
    //...
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-10-15T19:05:59.137

保留一个单独的计数器可能是最简单的：

```
i = 0
For Each PropertyActor As JCPropertyActor In MyProperty.PropertyActors
    ...
    i = i + 1
Next 
```

顺便说一句，Python 有一种方便的方法来做到这一点：

```
for i, x in enumerate(a):
    print "object at index ", i, " is ", x 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-10-15T19:04:44.007

只需在进入循环之前初始化一个整数变量并对其进行迭代...

```
Dim i as Integer 
For Each PropertyActor As JCPropertyActor In MyProperty.PropertyActors
    i++
Next 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-15T19:05:06.203

添加一个您自己为每次迭代增加的索引变量？

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-10-15T19:27:38.513

您可以使用“FindIndex”方法。

```
MyProperty.PropertyActors.FindIndex(Function(propActor As JCPropertyActor) propActor  = JCPropertyActor) 
```

但是在 for each 循环内部似乎有很多额外的开销，并且似乎与“IndexOf”方法产生的问题相同。我建议使用老式的索引迭代。这样你就有了你的索引和你的项目。

```
Dim PropertyActor As JCPropertyActor
For i As Integer = 0 To MyProperty.PropertyActors.Count - 1
    PropertyActor = MyProperty.PropertyActors.Item(i)
Next 
```********