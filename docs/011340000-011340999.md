# StackOverflow 问答 11340000-11340999

# css - Internet Explorer 9 在伪元素之前忽略

> ID：11340001
> 
> 赞同：1
> 
> 时间：2012-07-05T07:51:03.260
> 
> 标签：css, internet-explorer-9, pseudo-element

这是一个来自 HTML 语言切换的简单代码示例。CSS 应该分隔 span 元素并在其间显示一个点：

```
 <html>
      <head>
        <style type="text/css">
            .languageSwitch span:before {
                content: "•";
                padding: 0 4px;
                font-weight: normal;
            }
            .languageSwitch span:first-child:before {
                content: "";
                padding: 0;
            }
            .languageSwitch .current {
                font-weight: bold;
            }
        </style>
      </head>
   <body>
    <div class="languageSwitch">
      <span><a href="?lang=de">Deutsch</a></span>
      <span class="current">English</span>
      <span><a href="?lang=fr">français</a></span>
    </div>
   </body>
  </html> 
```

这在 Firefox 中运行良好，但 Internet Explorer 9¹ 只是忽略了 :before 指令。在“开发人员工具”CSS 对话框中，“内容”属性也不会显示。我在网上搜索过：IE 8 有伪元素问题，但 IE 9 应该知道，这是“旧”的 CSS 2。

有人知道为什么会失败（IE 9 中的错误？）或者语法必须是什么样的吗？

* * *

1) 要明确：版本 9.0.8112.16421 / “Updateversion” 9.0.6 (KB2675157)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T07:55:21.410

检查文档类型。在 jsfiddle 上，这在 IE9 中运行良好：http: [//jsfiddle.net/4nGW9/](http://jsfiddle.net/4nGW9/)。IE8 也应该处理这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T07:56:09.320

我可以在 IE 9 中看到这些点。与您的版本完全相同。我的代码中唯一的区别是顶部的有效 HTML5 文档类型。

如果没有有效的文档类型，IE 可能会将其对您的页面的呈现切换到怪癖模式，或者 IE8/IE7 的呈现模式，它不会处理像第一个孩子或生成的内容这样的伪选择器。

[在 browserling 中](http://browserling.com/encoder.html#uri=http://jsbin.com/ebasez/&browser=explorer/9.0)查看您的页面。

# .net - 可编辑的 ComboBoxEdit 绑定到不在列表中的值

> ID：11340002
> 
> 赞同：0
> 
> 时间：2012-07-05T07:51:03.433
> 
> 标签：.net, wpf, combobox, devexpress

我正在使用`ComboBoxEdit`from `DevExpress`。

我遇到过[这篇](https://stackoverflow.com/questions/3743269/editable-combobox-with-binding-to-value-not-in-list)文章，我需要为我的`ComboBoxEdit`. 我需要用户能够在 中键入一个值`ComboBoxEdit`，即使该值不在绑定对象列表中。

这是我到目前为止所拥有的：

```
<dxe:ComboBoxEdit Name="someName"
              Height="Auto" 
              Width="Auto"
              ImmediatePopup="True"
              AutoComplete="True"
              IncrementalFiltering="True"
              IsEnabled="True"
              Visibility="Visible"
              VerticalAlignment="Stretch" 
              HorizontalAlignment="Stretch"
              IsTextEditable="True"
              VerticalContentAlignment="Stretch" 
              HorizontalContentAlignment="Right"
              Mask="###,###,###,##0.00;###,###,###,##0.00-"
              MaskType="Numeric"
              DisplayFormatString="###,###,###,##0.00;###,###,###,##0.00-"
              MaskUseAsDisplayFormat="True"
              ItemsSource="{Binding Path=SomeItemsSource}"
              DisplayMember="{Binding Path=SomeDisplayMember}"
              ValueMember="{Binding Path=SomeValueMember}"
              EditValue="{Binding Path=SomeEditValue}">
<dxe:ComboBoxEdit.StyleSettings>
    <dxe:ComboBoxStyleSettings />
</dxe:ComboBoxEdit.StyleSettings> 
```

一切正常，但我无法输入不在列表中的值。

**我怎样才能获得与我提到的帖子中相同的行为`ComboBoxEdit`？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T12:33:27.163

需要设置：`ValidateOnTextInput="False"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T09:05:39.880

尝试使用`"Devexpress.XtraEditors.MRUEdit"`

# proxy - 在公司墙后面使用 Mule ESB 时如何进行代理设置？

> ID：11340003
> 
> 赞同：3
> 
> 时间：2012-07-05T07:51:08.073
> 
> 标签：proxy, esb, mule, corporate

我对 Mule ESB 很陌生，我尝试从网站上实现一个教程：

[http://www.mulesoft.org/documentation/display/MULE3START/Intermediate+Studio+Tutorial](http://www.mulesoft.org/documentation/display/MULE3START/Intermediate+Studio+Tutorial)

它返回如下连接错误：

***响应：无法通过端点路由事件：DefaultOutboundEndpoint{endpointUri=http://www.google.com/tbproxy/spell?lang=en:80, connector=HttpConnector { name=HTTP_HTTPS 生命周期=start this=53edd9ee numberOfConcurrentTransactedReceivers=4 createMultipleTransactedReceivers=true connected=true supportedProtocols=[http] serviceOverrides= } , name='endpoint.http.www.google.com.tbproxy.spell.lang.en.80', mep=REQUEST_RESPONSE, properties={lang=en: 80，Content-Type=text/xml}，transactionConfig=Transaction{factory=null，action=INDIFFERENT，timeout=0}，deleteUnacceptedMessages=false，initialState=started，responseTimeout=10000，endpointEncoding=UTF-8，disableTransportTransformer=false} . 消息有效负载的类型为：PostMethod***

问题可能与我的代理设置有关，因为当我在家中执行此操作时没有问题，但是当我尝试在公司墙后出现问题时。

教程中有关于这个问题的警告

所以我使用了一个连接器作为警告指示。

我输入了我的代理信息：

*   proxyHostname="iproxy"
*   代理端口="8080"
*   代理用户名="ekucuk"
*   proxyPassword="P34cttyb"

这是与之对应的 xml 行：

```
<http:connector name="HTTP_HTTPS" cookieSpec="netscape" validateConnections="true" sendBufferSize="0" receiveBufferSize="0" receiveBacklog="0" clientSoTimeout="10000" serverSoTimeout="10000" socketSoLinger="0" proxyHostname="iproxy" proxyPort="8080" proxyUsername="ekucuk" proxyPassword="P34cttyb" doc:name="HTTP_HTTPS"/> 
```

我想问题出在格式上。我需要一些帮助。

谢谢

恩拉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T21:05:05.137

抱歉，这来晚了，但我刚刚遇到了同样的问题并找到了解决方案。

主机代理名称可能需要一些调整。要找到它，请查看企业防火墙后面的 Firefox。转到工具 -> 选项/网络选项卡，然后按设置按钮。

代理应如下所示：`http://autoproxy.mycompany.com/`. 回到 Mule IDE，您应该`autoproxy.mycompany.com`在 Proxy Host Name 字段中输入。（去掉 http:// 和最后的 /。）

您需要停止 Mule Spell Checker 应用程序，然后重新启动。（否则，没有机会阅读新信息。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-11T04:59:18.177

您需要添加一个 HTTP 连接器作为全局元素。确保它是一个全局元素，并且作为 mule 配置根节点的直接子节点位于顶部，而不是位于连接器下方。

```
<http:connector name="proxyConnector" proxyHostname="172.16.2.4" proxyPort="8080" proxyUsername="user" proxyPassword="password"/> 
```

# python - Traceback 让我发疯，似乎无法找到调试的源代码

> ID：11340005
> 
> 赞同：0
> 
> 时间：2012-07-05T07:51:17.647
> 
> 标签：python, django, exception, exception-handling

我已经浏览了我的模板，确保没有任何可以找到此代码的痕迹，现在最终向 stackoverflow 社区寻求帮助

```
Traceback (most recent call last):

 File "/app/.heroku/venv/lib/python2.7/site-packages/django/core/handlers/base.py", line 150, in get_response
   response = callback(request, **param_dict)

 File "/app/.heroku/venv/lib/python2.7/site-packages/django/utils/decorators.py", line 93, in _wrapped_view
   response = view_func(request, *args, **kwargs)

 File "/app/.heroku/venv/lib/python2.7/site-packages/django/views/defaults.py", line 19, in page_not_found
   return http.HttpResponseNotFound(t.render(RequestContext(request, {'request_path': request.path})))

 File "/app/.heroku/venv/lib/python2.7/site-packages/django/template/base.py", line 123, in render
   return self._render(context)

 File "/app/.heroku/venv/lib/python2.7/site-packages/django/template/base.py", line 117, in _render
   return self.nodelist.render(context)

 File "/app/.heroku/venv/lib/python2.7/site-packages/django/template/base.py", line 744, in render
   bits.append(self.render_node(node, context))

 File "/app/.heroku/venv/lib/python2.7/site-packages/django/template/base.py", line 757, in render_node
   return node.render(context)

 File "/app/.heroku/venv/lib/python2.7/site-packages/django/template/loader_tags.py", line 127, in render
   return compiled_parent._render(context)

 File "/app/.heroku/venv/lib/python2.7/site-packages/django/template/base.py", line 117, in _render
   return self.nodelist.render(context)

 File "/app/.heroku/venv/lib/python2.7/site-packages/django/template/base.py", line 744, in render
   bits.append(self.render_node(node, context))

 File "/app/.heroku/venv/lib/python2.7/site-packages/django/template/base.py", line 757, in render_node
   return node.render(context)

 File "/app/.heroku/venv/lib/python2.7/site-packages/django/template/defaulttags.py", line 311, in render
   return self.nodelist_true.render(context)

 File "/app/.heroku/venv/lib/python2.7/site-packages/django/template/base.py", line 744, in render
   bits.append(self.render_node(node, context))

 File "/app/.heroku/venv/lib/python2.7/site-packages/django/template/base.py", line 757, in render_node
   return node.render(context)

 File "/app/.heroku/venv/lib/python2.7/site-packages/django/template/defaulttags.py", line 313, in render
   return self.nodelist_false.render(context)

 File "/app/.heroku/venv/lib/python2.7/site-packages/django/template/base.py", line 744, in render
   bits.append(self.render_node(node, context))

 File "/app/.heroku/venv/lib/python2.7/site-packages/django/template/base.py", line 757, in render_node
   return node.render(context)

 File "/app/.heroku/venv/lib/python2.7/site-packages/django/template/defaulttags.py", line 313, in render
   return self.nodelist_false.render(context)

 File "/app/.heroku/venv/lib/python2.7/site-packages/django/template/base.py", line 744, in render
   bits.append(self.render_node(node, context))

 File "/app/.heroku/venv/lib/python2.7/site-packages/django/template/base.py", line 757, in render_node
   return node.render(context)

 File "/app/.heroku/venv/lib/python2.7/site-packages/django/template/defaulttags.py", line 450, in render
   raise e

NoReverseMatch: Reverse for 'dashboard_follow_user' with arguments '('',)' and keyword arguments '{}' not found.

<WSGIRequest
GET:<QueryDict: {}>,
POST:<QueryDict: {}>,
COOKIES:{'__cfduid': 'd8e6bd680abeae8bf20e0b04bab2bf6c01340266740',
'__utma': '252251985.852406610.1340266743.1341240383.1341474269.15',
'__utmb': '252251985.1.10.1341474269',
'__utmc': '252251985',
'__utmz': '252251985.1340266743.1.1.utmcsr=facebook.com|utmccn=(referral)|utmcmd=referral|utmcct=/l.php',
'csrftoken': 'acdd7043eb39d9c14a3954786986512b',
'sessionid': '53868fdef6c96037ee26cf62fca1de9b'},
META:{'CONTENT_LENGTH': '',
'CONTENT_TYPE': '',
'CSRF_COOKIE': 'acdd7043eb39d9c14a3954786986512b',
'HTTP_ACCEPT': '*/*',
'HTTP_ACCEPT_ENCODING': 'gzip',
'HTTP_CF_CONNECTING_IP': '62.95.0.45',
'HTTP_CF_IPCOUNTRY': 'SE',
'HTTP_CF_VISITOR': '{"scheme":"http"}',
'HTTP_CONNECTION': 'close',
'HTTP_COOKIE': 'csrftoken=acdd7043eb39d9c14a3954786986512b; __cfduid=d8e6bd680abeae8bf20e0b04bab2bf6c01340266740; __utma=252251985.852406610.1340266743.1341240383.1341474269.15; __utmz=252251985.1340266743.1.1.utmcsr=facebook.com|utmccn=(referral)|utmcmd=referral|utmcct=/l.php; sessionid=53868fdef6c96037ee26cf62fca1de9b; __utmb=252251985.1.10.1341474269; __utmc=252251985',
'HTTP_HOST': 'myapp.com',
'HTTP_USER_AGENT': 'Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Trident/5.0)',
'HTTP_X_FORWARDED_FOR': '62.95.0.45, 173.245.49.189',
'HTTP_X_FORWARDED_PROTO': 'http',
'HTTP_X_HEROKU_DYNOS_IN_USE': '1',
'HTTP_X_HEROKU_QUEUE_DEPTH': '0',
'HTTP_X_HEROKU_QUEUE_WAIT_TIME': '1',
'HTTP_X_REAL_IP': '173.245.49.189',
'HTTP_X_REQUEST_START': '1341474274655',
'HTTP_X_VARNISH': '958793214',
'PATH_INFO': u'/favicon.ico/',
'QUERY_STRING': '',
'RAW_URI': '/favicon.ico/',
'REMOTE_ADDR': '173.245.49.189',
'REMOTE_PORT': '80',
'REQUEST_METHOD': 'GET',
'SCRIPT_NAME': u'',
'SERVER_NAME': 'myapp.com',
'SERVER_PORT': '80',
'SERVER_PROTOCOL': 'HTTP/1.1',
'SERVER_SOFTWARE': 'gunicorn/0.12.2',
'gunicorn.socket': <socket._socketobject object at 0x3e24520>,
'wsgi.errors': <open file '<stderr>', mode 'w' at 0x7fb5a0518270>,
'wsgi.file_wrapper': <class gunicorn.http.wsgi.FileWrapper at 0x3422188>,
'wsgi.input': <gunicorn.http.body.Body object at 0x3c02610>,
'wsgi.multiprocess': True,
'wsgi.multithread': False,
'wsgi.run_once': False,
'wsgi.url_scheme': 'http',
'wsgi.version': (1, 0)}> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T08:18:02.323

You probably have in your template:

```
{% url dashboard_follow_user something %} 
```

where something is an empty string "", while your urls.py probably says something like:

```
(r"/something/(?P<id>\d+)$"), "myview", {}, "dashboard_follow_user") 
```

And it simply expects an `int` or something else, but not empty string("").

The reason for this stack trace is that this is the usual stack when rendering template elements, which are rendered one by one.

# android - 如何使用 ACTION_TAG_DISCOVERED 将活动放在首位

> ID：11340006
> 
> 赞同：0
> 
> 时间：2012-07-05T07:51:17.950
> 
> 标签：android, nfc

我正在制作一个项目，我希望我的应用程序在检测到 ACTION_TAG_DISCOVERED 标记时出现在前台。我可以通过服务引入前台进程，但我想要这样，我的应用程序即使在后台也可以监听 NFC，如果它在后台，它会自行进入前台。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T11:22:25.430

看看这里：http: [//developer.android.com/guide/topics/connectivity/nfc/nfc.html](http://developer.android.com/guide/topics/connectivity/nfc/nfc.html)

您对过滤 NFC 意图感兴趣。它是一种允许您在检测到标签时启动应用程序的机制。此外，请查看禁用/启用前台调度。

# java - android禁用webview反弹

> ID：11340007
> 
> 赞同：0
> 
> 时间：2012-07-05T07:51:23.907
> 
> 标签：java, android, android-webview

我设置了一个`LinearLayout`with`admob`和`WebView`。当`admob`出现在顶部时，`WebView Y pos`正确地重新定位到`0 + adMobHeight`。

然后，如果您触摸并拖动`WebView`，您可以移动垂直相同的 admob 高度！iOS 上的这个属性称为`bounces`.

**如何停用它？**

如果不可能，在不`WebView`重新加载内容的情况下强制重新计算其大小？谢谢

请注意，卷轴已经被禁用，

```
 webviewB.setVerticalScrollBarEnabled(false);
    webviewB.setHorizontalScrollBarEnabled(false); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T08:37:26.597

如果您总是想在屏幕顶部显示，那么您可能需要考虑使用RelativeLayout。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent">

  <com.admob.android.ads.AdView
  android:id="@+id/ad" 
  android:layout_width="fill_parent" 
  android:layout_height="wrap_content"
  app:backgroundColor="#000000"
  app:primaryTextColor="#FFFFFF"
  app:secondaryTextColor="#CCCCCC"
  android:layout_alignParentTop="true"
/>

<!-- WebView below that -->

<!--WebView-->

</RelativeLayout> 
```

# c# - 无法通过 Resources 类访问的全局资源

> ID：11340010
> 
> 赞同：1
> 
> 时间：2012-07-05T07:51:30.663
> 
> 标签：c#, .net, silverlight, resources, app-globalresources

我创建了一个 Silverlight 业务应用程序并希望使用 App_GlobalResources。

这些资源位于同一个项目 (TestApp.Web) 中。试图通过 System.Resources 使用一些资源。在一个类中不起作用，因为没有列出类。

我只看到 RegistrationDataResources 和 ValidationErrorResources。

也许你有一个想法？

编辑：使用 Resources.te23。出现错误。“Type or Namspace te23 is not available in TestApp.Web.Resources”（翻译成英文）

“te23”资源的内容（我删除了评论）。

```
namespace Resources {
using System;
[global::System.CodeDom.Compiler.GeneratedCodeAttribute("Microsoft.VisualStudio.Web.Application.StronglyTypedResourceProxyBuilder", "10.0.0.0")]
[global::System.Diagnostics.DebuggerNonUserCodeAttribute()]
[global::System.Runtime.CompilerServices.CompilerGeneratedAttribute()]
internal class te23 {
    private static global::System.Resources.ResourceManager resourceMan; 
    private static global::System.Globalization.CultureInfo resourceCulture;

    [global::System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1811:AvoidUncalledPrivateCode")]
    internal te23() {
    }
   [global::System.ComponentModel.EditorBrowsableAttribute(global::System.ComponentModel.EditorBrowsableState.Advanced)]
    internal static global::System.Resources.ResourceManager ResourceManager {
        get {
            if (object.ReferenceEquals(resourceMan, null)) {
                global::System.Resources.ResourceManager temp = new global::System.Resources.ResourceManager("Resources.te23", global::System.Reflection.Assembly.Load("App_GlobalResources"));
                resourceMan = temp;
            }
            return resourceMan;
        }
    }
    [global::System.ComponentModel.EditorBrowsableAttribute(global::System.ComponentModel.EditorBrowsableState.Advanced)]
    internal static global::System.Globalization.CultureInfo Culture {
        get {
            return resourceCulture;
        }
        set {
            resourceCulture = value;
        }
    }
    internal static string test {
        get {
            return ResourceManager.GetString("test", resourceCulture);
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T08:01:39.040

只是一个想法，你有图书馆对特定图书馆的引用吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T08:20:22.830

这通常是构建问题。验证 .resx 文件的*自定义工具*属性是否设置为“GlobalResourceProxyGenerator”。

（请注意，您将使用*Resources.MyResxFile.ResourceName*访问资源。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T07:18:14.947

我已将命名空间从 Resources 编辑到 TestApp.Web.Resources。现在它们是资源下的列表。

# ios - OCMock 和Return 基于同一个mock 实例的不同值，出乎意料的返回值。

> ID：11340016
> 
> 赞同：1
> 
> 时间：2012-07-05T07:51:39.107
> 
> 标签：ios, ocmock

参见#if 0...#endif，如果启用则模拟按预期工作，在调用方法preferencesGeneralUnits 时返回1，如果禁用则模拟仍然返回之前的值0，尽管我们要求他返回1。

我的问题，是 OCMock 错误吗？还是 OCMock 的预期用途？谢谢你。

对 2.0.1 和从最新源代码构建都不好。

任何想法或讨论将不胜感激，在此先感谢。

```
- (void) testFormattedDistanceValueWithMeters{
    id mockSettings = [OCMockObject mockForClass:[TnSettings class]];
    id mockClientModel = [TnClientModel createMockClientModel];
    [[[mockClientModel stub] andReturn:mockSettings] settings];

    [[[mockSettings stub] andReturn:[NSNumber numberWithInt:0]] preferencesGeneralUnits];

    NSNumber *meters = [NSNumber numberWithDouble:0.9];
    distance = [NSString formattedDistanceValueWithMeters:meters];
    STAssertEqualObjects(distance, @"0.9", @"testformattedEndTimeForTimeInSeconds failed");

    //--------------See here---------------------
    #if 0
    mockSettings = [OCMockObject mockForClass:[TnSettings class]];
    mockClientModel = [TnClientModel createMockClientModel];
    [[[mockClientModel stub] andReturn:mockSettings] settings];
    #endif
    [[[mockSettings stub] andReturn:[NSNumber numberWithInt:1]] preferencesGeneralUnits];

    meters = [NSNumber numberWithDouble:1];
    distance = [NSString formattedDistanceValueWithMeters:meters];
    STAssertEqualObjects(distance, @"3.3", @"testformattedEndTimeForTimeInSeconds failed");

    [TnClientModel releaseInstance];
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T01:43:50.520

Erik Doernenburg 的解释是合理的。

# jquery - 从 RSS Feed 的 AJAX 请求返回 XML

> ID：11340020
> 
> 赞同：0
> 
> 时间：2012-07-05T07:51:49.260
> 
> 标签：jquery, xml, rss

我有一个网站，我想向 BBC RSS 提要请求返回最新消息。问题是我收到以下错误：

```
Uncaught SyntaxError: Unexpected token < 
```

这是我的代码：

```
var url = 'http://feeds.bbci.co.uk/news/rss.xml';

$.ajax({
    url : url,
    dataType : 'jsonp',
    contentType : 'text/xml',
    success : function(data) {
        console.log(data);
    }
}); 
```

## 编辑

这是我服务器上的代码，如下面的答案所示：

```
 public XmlDocument callBBCFeed()
    {
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create("http://feeds.bbci.co.uk/news/rss.xml");
        HttpWebResponse response = (HttpWebResponse)request.GetResponse();
        StreamReader sr = new StreamReader(response.GetResponseStream());

        string result = sr.ReadToEnd();

        XmlDocument doc = new XmlDocument();

        doc.LoadXml(result);

        return doc;
    } 
```

然后我在我的 JS 代码中这样调用它：

```
 var url = 'http://myServer/Global/callBBCFeed';

    $.ajax({
        url : url,
        dataType : 'xml',
        success : function(data) {
            console.log(data);
        }
    }); 
```

但我得到了同源策略错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T07:56:37.347

检查您的 $.ajax 调用：`dataType: 'jsonp'`。

RSS 是 XML。由于您的电话需要检索 JSON，`<`因此是非法字符，不是吗？

阅读 jQuery $.ajax 文档并寻找“dataType”选项：

*   [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

*更新*

根据您添加到其他答案的一些评论，您最初的问题似乎是*跨域请求*。

最好的解决方案是从服务器端进行跨域调用（使用 ASP.NET C#/VB 中的服务器代码或任何 PHP、Perl、Ruby ......），然后 jQuery 将调用您的服务器处理程序来检索该 RSS feed，因此它不再是跨域请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T07:54:23.063

您正在向 XML 资源发送跨域 AJAX 请求。[由于相同的来源政策](http://en.wikipedia.org/wiki/Same_origin_policy)限制，这无法正常工作。

你在这里完全矛盾：

```
dataType : 'jsonp' 
```

并且向 XML 资源发送请求。

允许跨域 AJAX 调用的[JSONP完全不同。](http://en.wikipedia.org/wiki/JSONP)它表示包装在 javascript 函数中的 JSON 响应，可能如下所示：

```
someFunctionName({"foo":"bar", "baz":"bazzy"}) 
```

如果远程服务器不支持 JSONP，您将必须在您的域上编写一个服务器端脚本，作为您和远程域之间的桥梁，以获取 XML 文件。然后使用 jQuery AJAX 向您的脚本发送请求。

我建议您阅读以下[jQuery 跨域 AJAX 指南](http://usejquery.com/posts/the-jquery-cross-domain-ajax-guide)，了解可以使用的不同技术。

# php - Dynamic Prepared Statements - 这会打开安全漏洞吗？

> ID：11340021
> 
> 赞同：1
> 
> 时间：2012-07-05T07:51:51.277
> 
> 标签：php, mysql, security, prepared-statement

这类似于这个问题[-Are Dynamic Prepared Statements Bad? (with php + mysqli)](https://stackoverflow.com/questions/201468/are-dynamic-prepared-statements-bad-with-php-mysqli)，但是因为它已经 4 岁了，我想得到一个更新的答案。

我编写了一个类，虽然我还没有在更多的 coplex sql 查询上对其进行测试，但它在简单的 sql 查询上没有失败，但是我不确定这样做是否绕过了准备好的语句的主要原因之一- 安全。

我已经使用了语句，`call_user_func_array`这很容易，但是有点棘手。我最初使用的主机没有可用的主机，但我设法使用元数据。这是我写的完整的课程。`bind_param``bind_result``get_result``mysqlnd`

你认为这安全吗？

传入的值是：

*   `$sql`是传入的sql语句：

    ```
    SELECT * FROM users WHERE id = ? AND created_timestamp > ? 
    ```

*   `$mysqli`是mysqli连接

*   `$para`是准备好的语句中的占位符：

    ```
    array ($types = 'ii', 23, 1235376000) 
    ```

班上：

```
class crudModel {
    function ps($sql, $mysqli, $para) {
        //this function should work for just about any simple mysql statement
        //for more complicated stuff like joins, unions etc,. we will see
        if ($prep = $mysqli->prepare($sql)) {
            call_user_func_array(array($prep, 'bind_param'), $this->makeValuesRef($para, $mysqli));
            $prep->execute();
            $meta = $prep->result_metadata();
            while ($field = $meta->fetch_field()) {
                $parameters[] = &$row[$field->name];
            }
            call_user_func_array(array($prep, 'bind_result'), $parameters);
            while ($prep->fetch()) {
                foreach ($row as $key=>$val) {
                    $x[$key] = $val;
                }
                $data[] = $x;
            }
            return $data;
        }
    }

    function makeValuesRef($array, $mysqli) {
        $refs = array();
        foreach($array as $key => $value) {
            $array[$key] = $mysqli->real_escape_string($value); //i don't think escaping is necessary, but it can't hurt (??)
            $refs[$key] = &$array[$key];
        }
        return $refs;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-21T00:27:24.333

您在这里所做的不是动态准备好的语句。您只是在 MySQLi API 之上添加了一些语法糖（这很糟糕）。

简而言之，您在此处显示的代码实际上并没有任何安全问题。事实上，这种做法非常好，因为它使以后更容易验证您是否正确执行（因为 MySQLi API 很烂）。

所以你没事。我会担心您正在生成查询的区域，并确保您不会在没有白名单的情况下不小心将用户数据放入其中......

# android - 使用 android 直接连接到 GMAIL

> ID：11340023
> 
> 赞同：0
> 
> 时间：2012-07-05T07:51:56.060
> 
> 标签：android, gmail

> **可能重复：**
> [使用 JavaMail API 在 Android 中发送电子邮件而不使用默认/内置应用程序](https://stackoverflow.com/questions/2020088/sending-email-in-android-using-javamail-api-without-using-the-default-built-in-a)

我想通过 gmail 发送一封带有附加音频文件的电子邮件，我用我的应用程序记录了该文件。我可以在没有选择发送方法的选项的情况下从 android 发送带有附件的直接邮件吗？（蓝牙等）？我只想通过单击按钮发送带有附件的邮件。

我可以用安卓做到这一点吗？另外，我有义务获得通过 gmail 与 android 发送邮件的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T08:52:27.117

这是一个完整的示例，它向其他人发送背景电子邮件（使用 gmail 帐户），当然还有附件。[使用 GMAIL 帐户发送带附件的电子邮件](http://pastie.org/4185959)。

在这个项目中找到一个[示例项目](https://www.dropbox.com/s/s819c12ith51izk/AutoMailSender.zip) 您需要在`MailSenderActivity`课堂上设置以下gmail帐户详细信息

```
private static final String GMAIL_EMAIL_ID = "";
private static final String GMAIL_ACCOUNT_PASSWORD = "";
private static final String TO_ADDRESSES = ""; // to email addresses separated by comma 
```

如果您不需要 ZipUtility 类，请将其删除并根据需要使用它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T07:54:53.013

不幸的是，没有办法强制用户选择 Gmail 应用程序而不是内置邮件客户端。

大多数用户如果拥有一个 android 客户端，就已经拥有一个 gmail 帐户，所以无论如何他们都可能会使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T08:10:12.263

正如其他人已经发布的那样，您可以使用 java 邮件 api，但是您必须硬编码您的电子邮件和密码，这是不可取的。

您可以做的是连接到可以发送电子邮件并使用它的网络服务。这样可以降低安全风险。

# cocos2d-iphone - cocos2d 子精灵与父精灵的碰撞检测

> ID：11340024
> 
> 赞同：1
> 
> 时间：2012-07-05T07:51:57.497
> 
> 标签：cocos2d-iphone, parent, collision-detection, sprite

嗨 stackoverflow 社区！

你如何检测 cocos2d 中子精灵与父精灵的碰撞？

目前我有这样的代码：

```
 CGSize screenSize = [[CCDirector sharedDirector]winSize];

    parentJumper = [CCSprite spriteWithFile:@"inviBtn.png"];
    jumper = [CCSprite spriteWithFile:@"jumperRight.png"];

    plat = [[Platform alloc]init];

    plat = [Platform spriteWithFile:@"platformBlack.png"];

    plat.position = ccp(160,100);

    [[UIAccelerometer sharedAccelerometer] setUpdateInterval:(1.0/60)];

    jumper.anchorPoint = ccp(0.5, 0);
    jumper.position = ccp(0, 20);
    parentJumper.position = ccp(screenSize.width/2, 0);

    [self addChild:plat];
    [self addChild:parentJumper];
    [parentJumper addChild:jumper]; 
```

现在如何检测“**跳线**”和“**平台**”之间的碰撞？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-21T15:57:44.063

通常你可以像这样检查碰撞：

```
if(CGRectIntersectsRect([jumper boundingBox], [plat boundingBox])) {
  //Handle collision<br>
} 
```

# c++ - 结构/对象内的存储顺序

> ID：11340028
> 
> 赞同：6
> 
> 时间：2012-07-05T07:52:09.203
> 
> 标签：c++, c, class, pointers, structure

考虑这两种情况：

```
struct customType
{
   dataType1 var1; 
   dataType2 var2;
   dataType3 var3;
} ;

customType instance1;
// Assume var1, var2 and var3 were initialized to some valid values.

customType * instance2 = &instance1;    
dataType1 firstMemberInsideStruct = (dataType1)(*instance2); 
```

* * *

```
class CustomType
{
   public:
       dataType1 member1;
       dataType2 member2;

       retrunType1 memberFunction1();

   private:
       dataType3 member3;
       dataType4 member4;

       retrunType2 memberFunction2();
};

customType object;
// Assume member1, member2, member3 and member4 were initialized to some valid values.

customType *pointerToAnObject = &object ;
dataType1 firstMemberInTheObject = (dataType1) (*pointerToAnObject); 
```

这样做*总是*安全的吗？

我想知道标准是否指定了任何存储顺序 -

1.  C 结构中的元素。
2.  C++ 类的对象内的数据成员。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T08:28:01.053

C99 和 C++ 在这一点上有所不同。

C99 标准保证结构的字段将按照声明的顺序在内存中布局，并且两个相同结构的字段将具有相同的偏移量。有关C99 标准的相关部分，请参阅[此问题。](https://stackoverflow.com/questions/2748995/c-struct-memory-layout)总结一下：第一个字段的偏移量被指定为零，但标准没有指定之后的偏移量。这是为了允许 C 编译器调整每个字段的偏移量，以便该字段满足体系结构的任何内存对齐要求。[`offsetof`](http://en.wikipedia.org/wiki/Offsetof)因为这是依赖于实现的，所以 C 提供了一种标准方法来使用宏来确定每个字段的偏移量。

C++ 仅为[普通旧数据 (POD)](http://en.wikipedia.org/wiki/Plain_old_data_structure)提供此保证。不是普通旧数据的 C++ 类不能这样处理。当类使用多重继承、具有非公共字段或成员或包含虚拟成员时，该标准为 C++ 编译器提供了相当多的自由来组织类。

这对您的示例意味着什么：

```
dataType1 firstMemberInsideStruct = (dataType1)(*instance2); 
```

*仅当*dataType1、dataType2 和 dataType3 是普通旧数据时，此行才可以。如果其中任何一个都不是，那么 customType 结构可能没有普通的构造函数（或析构函数），并且这个假设可能不成立。

```
dataType1 firstMemberInTheObject = (dataType1) (*pointerToAnObject); 
```

无论 、 和 是否为 POD，此行都不安全`dataType1`，`dataType2`因为`dataType3`该类`CustomType`具有私有实例变量。这使它*不是*POD 类，因此您不能假设它的第一个实例变量将以特定方式排序。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-05T08:01:55.427

9.0.7

> 标准布局类是这样的类： — 没有非标准布局类（或此类类型的数组）或引用类型的非静态数据成员， — 没有虚拟函数 (10.3) 并且没有虚拟基类 ( 10.1), — 对所有非静态数据成员具有相同的访问控制（第 11 条）， — 没有非标准布局基类， — 在最派生的类中没有非静态数据成员，并且最多一个具有非静态数据成员的基类，或没有具有非静态数据成员的基类，并且 — 没有与第一个非静态数据成员相同类型的基类。 108

9.2.14

> 分配具有相同访问控制（第 11 条）的（非联合）类的非静态数据成员，以便后面的成员在类对象中具有更高的地址。未指定具有不同访问控制的非静态数据成员的分配顺序 (11)。实现对齐要求可能会导致两个相邻的成员不会被立即分配；管理虚拟功能 (10.3) 和虚拟基类 (10.1) 的空间要求也是如此。

9.2.20

> 指向标准布局结构对象的指针，使用 reinterpret_cast 适当转换，指向其初始成员（或者如果该成员是位字段，则指向它所在的单元），反之亦然。[注意：因此，标准布局结构对象中可能存在未命名的填充，但不是在其开头，这是实现适当对齐所必需的。——尾注]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T07:55:27.753

这样做并不总是安全的。如果类有`virtual`方法，那肯定不是。对于相同的访问级别块，数据成员保证以相同的顺序出现，但这些组可以重新排序。

**为了安全使用这些类型的转换，您应该提供转换构造函数或转换运算符，而不是依赖于实现细节。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T07:53:49.030

通常在 C 结构中，成员按照声明的顺序存储。但是元素必须正确对齐。维基百科有一个很好的例子来[说明这是如何工作](http://en.wikipedia.org/wiki/Data_structure_alignment#Typical_alignment_of_C_structs_on_x86)的。

我将在这里重申：

如果你有以下结构

```
struct MixedData
{
    char Data1;
    short Data2;
    int Data3;
    char Data4;
}; 
```

将在不同的数据类型之间插入填充以确保正确的字节对齐。`char`s 是 1 字节对齐的，`short`s 是 2 字节对齐的，`int`s 是 4 字节对齐的，等等。

因此，为了使`Data2`2 字节对齐，将在`Data1`和之间插入一个 1 字节填充`Data2`。

还值得一提的是，有一些机制可以改变包装对齐方式。请参阅[#pragma pack](http://msdn.microsoft.com/en-us/library/2e70t5y1%28v=vs.80%29.aspx)。

# google-chrome-extension - 从内容脚本打开并将数据传递到弹出窗口（新选项卡）

> ID：11340032
> 
> 赞同：5
> 
> 时间：2012-07-05T07:52:32.733
> 
> 标签：google-chrome-extension

我正在写一个 chrome 扩展并有一个问题。

我的扩展中有一些 .html 页面，让它成为“popup.html”。我将内容脚本注入到某个页面中，该脚本在新选项卡中打开一个“popup.html”，其中包含“var p = window.open(chrome.extension.getURL('/popup.html'), "popup" )'，效果很好。接下来，我需要将一些数据传递给这个窗口，但我不知道如何以简单的方式完成它。

出于某种原因，我无法从内容脚本中调用子窗口的函数

```
var p = window.open(chrome.extension.getURL('/popup.html'), "popup");
p.foo(data); 
```

在控制台中，我看到*Uncaught TypeError: Cannot call method 'foo' of undefined* message。

我无法在查询字符串中传递数据，因为数据太大了。

是否有一种优雅而简单的方法可以将数据传递到这种窗口？我考虑过消息传递，但是如何使用背景页面有效地获取新打开的窗口的标签 ID？

提前非常感谢。

UPD：我试图反转逻辑并使用“window.opener.foo（）”从父窗口获取数据，但在新打开的选项卡中`window.opener`返回`null`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T09:21:52.830

好的，我找到了两个解决我的问题的方法。

1) 添加一个背景页面，它会打开一个带有`chrome.tabs.create()`. 然后从内容脚本向后台页面发送消息，后台页面通过 .将消息重新发送到相应的选项卡`chrome.tabs.sendMessage()`。它看起来有点难看，但有效。

2）一个更好的，没有背景页面。扩展（弹出）页面为长期连接创建一个监听器。然后内容脚本向该连接发送一条消息。这里的一个问题是，在打开页面后不会立即创建侦听器，因此应该有一种机制让内容脚本等待弹出窗口加载。它可以是一个简单`setTimeout`的通知，也可以是通过相同的长期连接弹出的通知。

如果有人有更好的解决方案，我也很乐意检查一下。

# python - 使用 urllib2 HTTPBasicAuthHandler 时，用户名包含空格的问题

> ID：11340036
> 
> 赞同：1
> 
> 时间：2012-07-05T07:53:08.423
> 
> 标签：python, urllib2

我正在尝试访问远程 URL。不幸的是，工作场所的互联网需要一个带有身份验证的 http 代理。http 代理认证所需的用户名包含空格（不要问我为什么）。

我的代码是：

```
passman = urllib2.HTTPPasswordMgrWithDefaultRealm()
passman.add_password(None, url, 'dmn\user x01', 'password')
authhandler = urllib2.HTTPBasicAuthHandler(passman)
opener = urllib2.build_opener(authhandler)
urllib2.install_opener(opener) 
```

当我尝试打开一个页面时，会发生以下错误（我怀疑与用户名包含空格有关）：

```
 File "<string>", line 4
    if not x01:password"@proxy.xxx.net:80 ==  : 
                                                     ^
SyntaxError: EOL while scanning string literal 
```

有什么建议么 ？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T08:31:19.290

它看起来像是将其作为 url 发送，我想知道转义空间是否可行。所以它最终成为：**dmn\user%20x01:password"@proxy.xxx.net:80**。只是一个建议。

# javascript - phantomjs 不等待“完整”页面加载

> ID：11340038
> 
> 赞同：142
> 
> 时间：2012-07-05T07:53:19.837
> 
> 标签：javascript, events, phantomjs

我正在使用[PhantomJS](http://phantomjs.org/) v1.4.1 加载一些网页。我无法访问他们的服务器端，我只是获得指向他们的链接。我正在使用 Phantom 的过时版本，因为我需要在该网页上支持 Adob​​e Flash。

问题是许多网站都在异步加载他们的次要内容，这就是为什么 Phantom 的 onLoadFinished 回调（类似于 HTML 中的 onLoad）在并非所有内容都已加载时过早触发的原因。任何人都可以建议我如何等待网页完全加载以制作例如包含所有动态内容（如广告）的屏幕截图？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-02-07T10:36:54.080

另一种方法是要求 PhantomJS 在页面加载后等待一段时间再进行渲染，如常规的[rasterize.js](https://github.com/ariya/phantomjs/blob/master/examples/rasterize.js)示例，但超时时间更长，以允许 JavaScript 完成加载其他资源：

```
page.open(address, function (status) {
    if (status !== 'success') {
        console.log('Unable to load the address!');
        phantom.exit();
    } else {
        window.setTimeout(function () {
            page.render(output);
            phantom.exit();
        }, 1000); // Change timeout as required to allow sufficient time 
    }
}); 
```

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2014-12-14T18:50:22.830

我宁愿定期检查`document.readyState`状态（[https://developer.mozilla.org/en-US/docs/Web/API/document.readyState](https://developer.mozilla.org/en-US/docs/Web/API/document.readyState)）。虽然这种方法有点笨拙，但您可以确定`onPageReady`您使用的是完全加载的文档的内部函数。

```
var page = require("webpage").create(),
    url = "http://example.com/index.html";

function onPageReady() {
    var htmlContent = page.evaluate(function () {
        return document.documentElement.outerHTML;
    });

    console.log(htmlContent);

    phantom.exit();
}

page.open(url, function (status) {
    function checkReadyState() {
        setTimeout(function () {
            var readyState = page.evaluate(function () {
                return document.readyState;
            });

            if ("complete" === readyState) {
                onPageReady();
            } else {
                checkReadyState();
            }
        });
    }

    checkReadyState();
}); 
```

**补充说明：**

当由于某些随机原因延长执行时间时，使用嵌套`setTimeout`而不是`setInterval`防止“重叠”和竞争条件。默认延迟为 4 毫秒（[https://stackoverflow.com/a/3580085/1011156](https://stackoverflow.com/a/3580085/1011156)），因此主动轮询不会显着影响程序性能。`checkReadyState``setTimeout`

`document.readyState === "complete"`意味着该文档已完全加载了所有资源（[https://html.spec.whatwg.org/multipage/dom.html#current-document-readiness](https://html.spec.whatwg.org/multipage/dom.html#current-document-readiness)）。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2013-02-07T10:32:31.477

您可以尝试结合使用 waitfor 和 rasterize 示例：

```
/**
 * See https://github.com/ariya/phantomjs/blob/master/examples/waitfor.js
 * 
 * Wait until the test condition is true or a timeout occurs. Useful for waiting
 * on a server response or for a ui change (fadeIn, etc.) to occur.
 *
 * @param testFx javascript condition that evaluates to a boolean,
 * it can be passed in as a string (e.g.: "1 == 1" or "$('#bar').is(':visible')" or
 * as a callback function.
 * @param onReady what to do when testFx condition is fulfilled,
 * it can be passed in as a string (e.g.: "1 == 1" or "$('#bar').is(':visible')" or
 * as a callback function.
 * @param timeOutMillis the max amount of time to wait. If not specified, 3 sec is used.
 */
function waitFor(testFx, onReady, timeOutMillis) {
    var maxtimeOutMillis = timeOutMillis ? timeOutMillis : 3000, //< Default Max Timout is 3s
        start = new Date().getTime(),
        condition = (typeof(testFx) === "string" ? eval(testFx) : testFx()), //< defensive code
        interval = setInterval(function() {
            if ( (new Date().getTime() - start < maxtimeOutMillis) && !condition ) {
                // If not time-out yet and condition not yet fulfilled
                condition = (typeof(testFx) === "string" ? eval(testFx) : testFx()); //< defensive code
            } else {
                if(!condition) {
                    // If condition still not fulfilled (timeout but condition is 'false')
                    console.log("'waitFor()' timeout");
                    phantom.exit(1);
                } else {
                    // Condition fulfilled (timeout and/or condition is 'true')
                    console.log("'waitFor()' finished in " + (new Date().getTime() - start) + "ms.");
                    typeof(onReady) === "string" ? eval(onReady) : onReady(); //< Do what it's supposed to do once the condition is fulfilled
                    clearInterval(interval); //< Stop this interval
                }
            }
        }, 250); //< repeat check every 250ms
};

var page = require('webpage').create(), system = require('system'), address, output, size;

if (system.args.length < 3 || system.args.length > 5) {
    console.log('Usage: rasterize.js URL filename [paperwidth*paperheight|paperformat] [zoom]');
    console.log('  paper (pdf output) examples: "5in*7.5in", "10cm*20cm", "A4", "Letter"');
    phantom.exit(1);
} else {
    address = system.args[1];
    output = system.args[2];
    if (system.args.length > 3 && system.args[2].substr(-4) === ".pdf") {
        size = system.args[3].split('*');
        page.paperSize = size.length === 2 ? {
            width : size[0],
            height : size[1],
            margin : '0px'
        } : {
            format : system.args[3],
            orientation : 'portrait',
            margin : {
                left : "5mm",
                top : "8mm",
                right : "5mm",
                bottom : "9mm"
            }
        };
    }
    if (system.args.length > 4) {
        page.zoomFactor = system.args[4];
    }
    var resources = [];
    page.onResourceRequested = function(request) {
        resources[request.id] = request.stage;
    };
    page.onResourceReceived = function(response) {
        resources[response.id] = response.stage;
    };
    page.open(address, function(status) {
        if (status !== 'success') {
            console.log('Unable to load the address!');
            phantom.exit();
        } else {
            waitFor(function() {
                // Check in the page if a specific element is now visible
                for ( var i = 1; i < resources.length; ++i) {
                    if (resources[i] != 'end') {
                        return false;
                    }
                }
                return true;
            }, function() {
               page.render(output);
               phantom.exit();
            }, 10000);
        }
    });
} 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2016-07-19T20:40:01.913

这是一个等待所有资源请求完成的解决方案。完成后，它将页面内容记录到控制台并生成渲染页面的屏幕截图。

虽然这个解决方案可以作为一个很好的起点，但我观察到它失败了，所以它绝对不是一个完整的解决方案！

我没有太多运气使用`document.readyState`.

我受到[phantomjs](https://github.com/ariya/phantomjs/blob/master/examples/waitfor.js)[示例页面](http://phantomjs.org/examples/index.html "phantomjs 示例页面")上的waitfor.js 示例的影响。

```
var system = require('system');
var webPage = require('webpage');

var page = webPage.create();
var url = system.args[1];

page.viewportSize = {
  width: 1280,
  height: 720
};

var requestsArray = [];

page.onResourceRequested = function(requestData, networkRequest) {
  requestsArray.push(requestData.id);
};

page.onResourceReceived = function(response) {
  var index = requestsArray.indexOf(response.id);
  if (index > -1 && response.stage === 'end') {
    requestsArray.splice(index, 1);
  }
};

page.open(url, function(status) {

  var interval = setInterval(function () {

    if (requestsArray.length === 0) {

      clearInterval(interval);
      var content = page.content;
      console.log(content);
      page.render('yourLoadedPage.png');
      phantom.exit();
    }
  }, 500);
}); 
```

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2012-07-05T08:04:05.333

也许您可以使用[`onResourceRequested`and`onResourceReceived`回调](http://code.google.com/p/phantomjs/wiki/Interface#Callbacks)来检测异步加载。[这是使用文档](http://code.google.com/p/phantomjs/wiki/QuickStart#Network_traffic)中的这些回调的示例：

```
var page = require('webpage').create();
page.onResourceRequested = function (request) {
    console.log('Request ' + JSON.stringify(request, undefined, 4));
};
page.onResourceReceived = function (response) {
    console.log('Receive ' + JSON.stringify(response, undefined, 4));
};
page.open(url); 
```

此外，您可以查看`examples/netsniff.js`一个工作示例。

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2014-01-28T09:28:34.983

在我的程序中，我使用一些逻辑来判断它是否是onload：看它的网络请求，如果过去200ms没有新的请求，我把它当作onload。

在 onLoadFinish() 之后使用它。

```
function onLoadComplete(page, callback){
    var waiting = [];  // request id
    var interval = 200;  //ms time waiting new request
    var timer = setTimeout( timeout, interval);
    var max_retry = 3;  //
    var counter_retry = 0;

    function timeout(){
        if(waiting.length && counter_retry < max_retry){
            timer = setTimeout( timeout, interval);
            counter_retry++;
            return;
        }else{
            try{
                callback(null, page);
            }catch(e){}
        }
    }

    //for debug, log time cost
    var tlogger = {};

    bindEvent(page, 'request', function(req){
        waiting.push(req.id);
    });

    bindEvent(page, 'receive', function (res) {
        var cT = res.contentType;
        if(!cT){
            console.log('[contentType] ', cT, ' [url] ', res.url);
        }
        if(!cT) return remove(res.id);
        if(cT.indexOf('application') * cT.indexOf('text') != 0) return remove(res.id);

        if (res.stage === 'start') {
            console.log('!!received start: ', res.id);
            //console.log( JSON.stringify(res) );
            tlogger[res.id] = new Date();
        }else if (res.stage === 'end') {
            console.log('!!received end: ', res.id, (new Date() - tlogger[res.id]) );
            //console.log( JSON.stringify(res) );
            remove(res.id);

            clearTimeout(timer);
            timer = setTimeout(timeout, interval);
        }

    });

    bindEvent(page, 'error', function(err){
        remove(err.id);
        if(waiting.length === 0){
            counter_retry = 0;
        }
    });

    function remove(id){
        var i = waiting.indexOf( id );
        if(i < 0){
            return;
        }else{
            waiting.splice(i,1);
        }
    }

    function bindEvent(page, evt, cb){
        switch(evt){
            case 'request':
                page.onResourceRequested = cb;
                break;
            case 'receive':
                page.onResourceReceived = cb;
                break;
            case 'error':
                page.onResourceError = cb;
                break;
            case 'timeout':
                page.onResourceTimeout = cb;
                break;
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2015-06-12T14:23:03.220

我发现这种方法在某些情况下很有用：

```
page.onConsoleMessage(function(msg) {
  // do something e.g. page.render
}); 
```

如果您拥有该页面，则在其中放置一些脚本：

```
<script>
  window.onload = function(){
    console.log('page loaded');
  }
</script> 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2015-06-18T14:44:10.680

我发现这个解决方案在 NodeJS 应用程序中很有用。我只是在绝望的情况下使用它，因为它会启动超时以等待整个页面加载。

第二个参数是回调函数，一旦响应准备好就会被调用。

```
phantom = require('phantom');

var fullLoad = function(anUrl, callbackDone) {
    phantom.create(function (ph) {
        ph.createPage(function (page) {
            page.open(anUrl, function (status) {
                if (status !== 'success') {
                    console.error("pahtom: error opening " + anUrl, status);
                    ph.exit();
                } else {
                    // timeOut
                    global.setTimeout(function () {
                        page.evaluate(function () {
                            return document.documentElement.innerHTML;
                        }, function (result) {
                            ph.exit(); // EXTREMLY IMPORTANT
                            callbackDone(result); // callback
                        });
                    }, 5000);
                }
            });
        });
    });
}

var callback = function(htmlBody) {
    // do smth with the htmlBody
}

fullLoad('your/url/', callback); 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-10-12T14:40:59.013

我使用了 phantomjs[`waitfor.js`示例](https://github.com/ariya/phantomjs/blob/master/examples/waitfor.js)的个人混合。

这是我的`main.js`文件：

```
'use strict';

var wasSuccessful = phantom.injectJs('./lib/waitFor.js');
var page = require('webpage').create();

page.open('http://foo.com', function(status) {
  if (status === 'success') {
    page.includeJs('https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js', function() {
      waitFor(function() {
        return page.evaluate(function() {
          if ('complete' === document.readyState) {
            return true;
          }

          return false;
        });
      }, function() {
        var fooText = page.evaluate(function() {
          return $('#foo').text();
        });

        phantom.exit();
      });
    });
  } else {
    console.log('error');
    phantom.exit(1);
  }
}); 
```

和`lib/waitFor.js`文件（这只是`waifFor()`phantomjs[`waitfor.js`示例](https://github.com/ariya/phantomjs/blob/master/examples/waitfor.js)中函数的复制和粘贴）：

```
function waitFor(testFx, onReady, timeOutMillis) {
    var maxtimeOutMillis = timeOutMillis ? timeOutMillis : 3000, //< Default Max Timout is 3s
        start = new Date().getTime(),
        condition = false,
        interval = setInterval(function() {
            if ( (new Date().getTime() - start < maxtimeOutMillis) && !condition ) {
                // If not time-out yet and condition not yet fulfilled
                condition = (typeof(testFx) === "string" ? eval(testFx) : testFx()); //< defensive code
            } else {
                if(!condition) {
                    // If condition still not fulfilled (timeout but condition is 'false')
                    console.log("'waitFor()' timeout");
                    phantom.exit(1);
                } else {
                    // Condition fulfilled (timeout and/or condition is 'true')
                    // console.log("'waitFor()' finished in " + (new Date().getTime() - start) + "ms.");
                    typeof(onReady) === "string" ? eval(onReady) : onReady(); //< Do what it's supposed to do once the condi>
                    clearInterval(interval); //< Stop this interval
                }
            }
        }, 250); //< repeat check every 250ms
} 
```

这种方法不是异步的，但至少我确信在我尝试使用它们之前已经加载了所有资源。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2016-06-30T20:11:38.657

这是 Supr 答案的实现。正如 Mateusz Charytoniuk 建议的那样，它还使用 setTimeout 而不是 setInterval。

当没有任何请求或响应时，Phantomjs 将在 1000 毫秒内退出。

```
// load the module
var webpage = require('webpage');
// get timestamp
function getTimestamp(){
    // or use Date.now()
    return new Date().getTime();
}

var lastTimestamp = getTimestamp();

var page = webpage.create();
page.onResourceRequested = function(request) {
    // update the timestamp when there is a request
    lastTimestamp = getTimestamp();
};
page.onResourceReceived = function(response) {
    // update the timestamp when there is a response
    lastTimestamp = getTimestamp();
};

page.open(html, function(status) {
    if (status !== 'success') {
        // exit if it fails to load the page
        phantom.exit(1);
    }
    else{
        // do something here
    }
});

function checkReadyState() {
    setTimeout(function () {
        var curentTimestamp = getTimestamp();
        if(curentTimestamp-lastTimestamp>1000){
            // exit if there isn't request or response in 1000ms
            phantom.exit();
        }
        else{
            checkReadyState();
        }
    }, 100);
}

checkReadyState(); 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2016-07-01T15:44:44.983

这是我使用的代码：

```
var system = require('system');
var page = require('webpage').create();

page.open('http://....', function(){
      console.log(page.content);
      var k = 0;

      var loop = setInterval(function(){
          var qrcode = page.evaluate(function(s) {
             return document.querySelector(s).src;
          }, '.qrcode img');

          k++;
          if (qrcode){
             console.log('dataURI:', qrcode);
             clearInterval(loop);
             phantom.exit();
          }

          if (k === 50) phantom.exit(); // 10 sec timeout
      }, 200);
  }); 
```

基本上考虑到您应该知道当给定元素出现在 DOM 上时页面已完全下载。所以脚本会等到这种情况发生。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2016-01-28T15:40:27.027

这是一个老问题，但由于我一直在寻找整页加载，但对于 Spookyjs（使用 casperjs 和 phantomjs）并且没有找到我的解决方案，我为此制作了自己的脚本，使用与用户相同的方法 deemstone 。这种方法的作用是，在给定的时间内，如果页面没有收到或启动任何请求，它将结束执行。

在 casper.js 文件上（如果您全局安装它，路径将类似于 /usr/local/lib/node_modules/casperjs/modules/casper.js）添加以下行：

在包含所有全局变量的文件顶部：

```
var waitResponseInterval = 500
var reqResInterval = null
var reqResFinished = false
var resetTimeout = function() {} 
```

然后在“var page = require('webpage').create();”之后的函数“createPage(casper)”中 添加以下代码：

```
 resetTimeout = function() {
     if(reqResInterval)
         clearTimeout(reqResInterval)

     reqResInterval = setTimeout(function(){
         reqResFinished = true
         page.onLoadFinished("success")
     },waitResponseInterval)
 }
 resetTimeout() 
```

然后在第一行的“page.onResourceReceived = function onResourceReceived(resource) {”中添加：

```
 resetTimeout() 
```

对“page.onResourceRequested = function onResourceRequested(requestData, request) {”执行相同操作

最后，在第一行的“page.onLoadFinished = function onLoadFinished(status) {”上添加：

```
 if(!reqResFinished)
 {
      return
 }
 reqResFinished = false 
```

就是这样，希望这个可以帮助像我一样遇到麻烦的人。此解决方案适用于 casperjs，但直接适用于 Spooky。

祝你好运 ！

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-08-10T14:39:35.227

在页面加载时移动鼠标应该可以工作。

```
 page.sendEvent('click',200, 660);

do { phantom.page.sendEvent('mousemove'); } while (page.loading); 
```

更新

提交表单时，没有返回任何内容，因此程序停止了。该程序没有等待页面加载，因为重定向开始需要几秒钟。

告诉它移动鼠标直到主页的 URL 更改为浏览器所需的更改时间。然后告诉它等待页面完成加载允许页面在内容被抓取之前完全加载。

```
page.evaluate(function () {
document.getElementsByClassName('btn btn-primary btn-block')[0].click();
});
do { phantom.page.sendEvent('mousemove'); } while (page.evaluate(function()
{
return document.location != "https://www.bestwaywholesale.co.uk/";
}));
do { phantom.page.sendEvent('mousemove'); } while (page.loading); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-07-21T12:04:50.297

这是我的解决方案，它对我有用。

```
page.onConsoleMessage = function(msg, lineNum, sourceId) {

    if(msg=='hey lets take screenshot')
    {
        window.setInterval(function(){      
            try
            {               
                 var sta= page.evaluateJavaScript("function(){ return jQuery.active;}");                     
                 if(sta == 0)
                 {      
                    window.setTimeout(function(){
                        page.render('test.png');
                        clearInterval();
                        phantom.exit();
                    },1000);
                 }
            }
            catch(error)
            {
                console.log(error);
                phantom.exit(1);
            }
       },1000);
    }       
};

page.open(address, function (status) {      
    if (status !== "success") {
        console.log('Unable to load url');
        phantom.exit();
    } else { 
       page.setContent(page.content.replace('</body>','<script>window.onload = function(){console.log(\'hey lets take screenshot\');}</script></body>'), address);
    }
}); 
```

# java - 如何在 Java 中读取俄语文件？

> ID：11340042
> 
> 赞同：3
> 
> 时间：2012-07-05T07:53:38.107
> 
> 标签：java, file, unicode

我尝试为此添加 UTF-8，但没有成功。在 Java 中读取俄语文件应该怎么做？

```
 FileInputStream fstream1 = new FileInputStream("russian.txt");
      DataInputStream in = new DataInputStream(fstream1);
      BufferedReader br = new BufferedReader(new InputStreamReader(in,"UTF-8")); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T15:08:59.263

如果文件来自 Windows PC，请尝试使用“windows-1251”或“Cp1251”作为字符集名称。

如果文件以某种方式采用 MS-DOS 编码，请尝试使用“Cp866”。

这两种都是单字节编码，将文件类型更改为 UTF-8（即多字节）没有任何作用。

如果一切都失败了，请使用十六进制编辑器并将这些文件的一些十六进制行转储给您的问题。然后我们将检测编码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T08:04:50.270

正如其他人提到的，您需要知道文件是如何编码的。一个简单的检查是（ab）使用 Firefox 作为编码检测器：[回答类似问题](https://stackoverflow.com/a/3520401/1472628)

如果这是显示问题，则取决于您所说的“读取”是什么意思：在控制台中，在某个窗口中？另请参阅[如何使带有西里尔字符的字符串正确显示？](https://stackoverflow.com/questions/929573/how-can-i-make-a-string-with-cyrillic-characters-display-correctly)

# javascript - 无法加载响应

> ID：11340045
> 
> 赞同：0
> 
> 时间：2012-07-05T07:53:45.903
> 
> 标签：javascript, iphone, ios, web-services, titanium

```
 var soapre1 = "<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:glob=\"http://sap.com/xi/SAPGlobal20/Global\">";
    var soapre2 = "<soapenv:Header/><soapenv:Body><glob:EmployeeLeaveRequestByParticipantQuery><EmployeeLeaveRequestSelectionByParticipant><EmployeeLeaveRequestParticipantRoleCode listVersionID=\"?\">2</EmployeeLeaveRequestParticipantRoleCode>";
 var soapre3 = "<!--Zero or more repetitions:--> <EmployeeLeaveRequestParticipantWorkAgreementIDInterval><IntervalBoundaryTypeCode>1</IntervalBoundaryTypeCode>  <!--Optional:-->  <LowerBoundaryWorkAgreementID schemeID=\"?\" schemeAgencyID=\"?\">1009</LowerBoundaryWorkAgreementID></EmployeeLeaveRequestParticipantWorkAgreementIDInterval>";
 var soapre4 = " <!--Zero or more repetitions:--> </EmployeeLeaveRequestSelectionByParticipant></glob:EmployeeLeaveRequestByParticipantQuery> </soapenv:Body></soapenv:Envelope>";

    var soapRequest = soapre1+soapre2+soapre3+soapre4;

    var authstr = 'Basic ' +Titanium.Utils.base64encode('S0009231839'+':'+ 'm8390967743!'); 

     var soapxhr = Ti.Network.createHTTPClient();
        soapxhr.setRequestHeader('SOAPAction',soapRequest);
    soapxhr.open("POST","http://erp.esworkplace.sap.com/sap/bc/srt/pm/sap/ecc_empleavereqparctqr/800/default_profile/2/binding_t_http_a_http_ecc_empleavereqparctqr_default_profile");
        soapxhr.setRequestHeader('Authorization', authstr);   
        soapxhr.setRequestHeader('Content-Type','text/xml','charset=utf-8');    
        soapxhr.send();

        soapxhr.onload = function(e)

    {
         Ti.API.info('abcd');       
        //get the xml data and let it roll!
        var doc = this.responseXML;
         Ti.API.info(doc);      
    }

    soapxhr.onerror = function (e){
        alert('Error');
        Ti.API.info(e);
    } 
```

无法加载响应它直接得到错误

```
[INFO] {
    source = "[object TiNetworkClient]";
    type = error;
} 
```

任何人建议如何解决这个问题！

@ 提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T15:33:29.110

在所有浏览器中都说错误！但我发现了一些 wsdl 和 soap 请求，所以为了打开响应我需要将方法名称传递给 http 请求！然后它工作

# javascript - ExtJS :: Store loadData 方法优化

> ID：11340049
> 
> 赞同：1
> 
> 时间：2012-07-05T07:53:54.897
> 
> 标签：javascript, extjs

我在数组中有一些数据（23000 条记录）。我需要将其加载到商店中。我在虚拟机中测试性能。

Chrome 加载 4 秒，IE8 加载 200 秒！秒。我已经暂停了这家商店的活动。我能做些什么来优化这部分应用程序。（IE 删除了关于长时间运行脚本的恼人错误）..

```
Wtb.getPlanShiftStore().suspendEvents(false);   
Wtb.getPlanShiftStore().loadData(data);    
Wtb.getPlanShiftStore().resumeEvents(); 
```

也许还有另一种方法可以更快地完成，或者我需要覆盖一些东西？我只需要创建模型并将其放入商店的数据中......或者这是不可能的......？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T12:07:23.413

[loadRecords](http://docs.sencha.com/ext-js/4-1/source/Store.html#Ext-data-Store-method-loadRecords)自己做`suspendEvents`。尝试[sortOnLoad](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.AbstractStore-property-sortOnLoad) : `false`，也许它会有所帮助。并使用服务器端数据分页。

# java - 是否可以从本机应用程序调用 Java 代码？

> ID：11340051
> 
> 赞同：1
> 
> 时间：2012-07-05T07:53:57.713
> 
> 标签：java, c++, java-native-interface, native

> **可能重复：**
> [如何从 C++ 调用 java 函数？](https://stackoverflow.com/questions/819536/how-to-call-java-function-from-c)
> [C++可以调用Java代码吗？](https://stackoverflow.com/questions/8987089/can-c-call-java-code)

我在 Linux 上有一个本机应用程序（即 main() 在 C++ 中），我想重用我的一些 Java 代码。我可以加载 JVM 库并以某种方式调用 Java 类吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T07:58:50.513

您可以在本机应用程序中加载 JVM 并使用[Invocation API调用内容](http://docs.oracle.com/javase/1.5.0/docs/guide/jni/spec/invocation.html#wp9502)

# php - 验证电子邮件，最后一个字符

> ID：11340053
> 
> 赞同：0
> 
> 时间：2012-07-05T07:53:59.687
> 
> 标签：php, regex, email

我在使用正则表达式验证电子邮件地址时遇到问题。代码似乎可以正常工作，直到用户在末尾放置一些用（.dot）分隔的长字符。代码是

```
if(preg_match('~^\b[a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-z]{2,4}+\b$~',$_POST["email"]))

{
    $valid ="valid";
}
else
{
    $valid ="invalid";
} 
```

当用户输入类似 ksdlk@gll.lik.ij.lio.lk.gr 的内容时，问题就出现了，它返回“有效”。如何处理最后一个字符，这将只允许来自@ 的 4,5 个字符，如“.com”或“.co.uk”。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T08:55:26.857

尝试使用这个

```
if(filter_var('email@example.com', FILTER_VALIDATE_EMAIL))return TRUE;
else return FALSE; 
```

# android - x64 Fedora 上的 Eclipse

> ID：11340056
> 
> 赞同：0
> 
> 时间：2012-07-05T07:54:04.140
> 
> 标签：android, eclipse, fedora

我已经在 Fedora 17 上安装了 eclipse 和 android SDK。在 eclipse 中我得到了这个错误

> /home/jakub/Android/android-sdk-linux/platform-tools/aapt：加载共享库时出错：libz.so.1：无法打开共享对象文件：没有这样的文件或目录

我尝试安装这个包：ncurses-libs.i686 libstdc++.i686 libgcc.i686，但总是得到那个错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T03:51:42.653

我使用我目前找不到的 stackexchange 答案让它在 64 位 CentOS 上运行。它基本上涉及将 .i686 附加到几个包名称，即：

```
yum install libstdc++.i686 
```

ia32-libs 没有正式作为 rpm 存在。但是，在我的 Ubuntu 10.04 机器上

```
dpkg --listfiles ia32-libs | wc 
```

表示 ia32-libs 中有 1456 个文件可以使 32 位的东西在基于 64 位 Debian 的平台上工作。我当然没有安装 1456 .i686 包。所以刚才，我进入了

```
    $ rpm -qa | grep i686
        libX11-1.3-2.el6.i686   
        libstdc++-4.4.6-4.el6.i686   
        openssl-1.0.0-25.el6_3.1.i686   
        libXau-1.0.5-1.el6.i686   
        SDL-1.2.14-3.el6.i686   
        glibc-2.12-1.80.el6_3.7.i686   
        libgcc-4.4.6-4.el6.i686   
        libxcb-1.5-1.el6.i686   
        libXrandr-1.3.0-4.el6.i686   
        zlib-1.2.3-27.el6.i686   
        libselinux-2.0.94-5.3.el6.i686   
        openssl-devel-1.0.0-25.el6_3.1.i686   
        nss-softokn-freebl-3.12.9-11.el6.i686   
        ncurses-libs-5.7-3.20090208.el6.i686    
        krb5-libs-1.9-33.el6_3.3.i686    
        libXext-1.1-3.el6.i686   
        libcom_err-1.41.12-12.el6.i686   
        libXrender-0.9.5-1.el6.i686   
        keyutils-libs-1.4-4.el6.i686   

```

当我找到我使用的原始答案时，我会将其发布回此处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T08:05:30.487

你以前在fedora中使用过android吗？

系统要求

**操作系统**

*   Windows XP（32 位）、Vista（32 或 64 位）或 Windows 7（32 或 64 位）
*   Mac OS X 10.5.8 或更高版本（仅限 x86）
*   Linux（在 Ubuntu Linux、Lucid Lynx 上测试）需要 GNU C 库 (glibc) 2.7 或更高版本。在 Ubuntu Linux 上，需要 8.04 或更高版本。64 位发行版必须能够运行 32 位应用程序。

[关联：](http://developer.android.com/sdk/index.html#Requirements)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T08:34:33.763

因为 SDK 是 32 位的

尝试使用：yum install ia32-libs

# c# - RESTful 部分请求和部分序列化

> ID：11340057
> 
> 赞同：3
> 
> 时间：2012-07-05T07:54:04.900
> 
> 标签：c#, .net, rest, serialization

我想执行动态查询+部分序列化。

假设我有这样的资源：

```
public class Unicorn
{
    public string Id { get; set; }
    public string Color { get; set; }
    public int Size { get; set; }
    public DateTime BirthDate { get; set; }
} 
```

并且用户发出这样的部分 RESTful 请求：

```
GET /unicorn/{id}/?fields=id,color 
```

如果请求 XML，结果应该是：

```
<Unicorn>
  <Id>10</Id>
  <Color>Purple</Color>
</Unicorn> 
```

而对于 Json

```
{"Unicorn":
  {"Id":10,
  "Color":"Purple"}
} 
```

我目前正在处理**查询**部分（表达式树你太强大了^^）

**但是序列化**部分我有很多选择，没有一个是非常令人满意的。如您所见，序列化的属性是动态指定的，因此属性修饰可能不是要走的路。

你会用什么，为什么？之后我会编辑这篇文章以分享您的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T13:24:51.850

更改您的 Unicorn 类，确保使用可为空值并使用 EmitDefaultValue = false 标记成员：

```
 [DataContract]
   public class Unicorn {   

    [DataMember (EmitDefaultValue=false)] 
    public string Id { get; set; }     

    [DataMember (EmitDefaultValue=false)] 
    public string Color { get; set; }     

    [DataMember (EmitDefaultValue=false)] 
    public int? Size { get; set; }     

    [DataMember (EmitDefaultValue=false)] 
    public DateTime? BirthDate { get; set; } 
} 
```

使用动态 LINQ 进行选择，请参阅 >>[动态 LINQ 示例](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)。我假设您正在做一个 WCF REST 应用程序，在这种情况下，这将根据您的示例进行序列化。

# asp.net - Ajax autocompleteextender 调用 web 服务从数据库的 2 个字段中搜索，它现在正在工作

> ID：11340064
> 
> 赞同：0
> 
> 时间：2012-07-05T07:54:20.933
> 
> 标签：asp.net, sql, ajax, web-services, autocomplete

我正在使用 ajax 自动完成功能，它调用 Web 服务来搜索名称和代码（名称和代码是我的数据表的字段）

它工作正常

这是我的网络服务网络方法

```
 [WebMethod]
        public string[] GetSupplier(string prefixText)
        {
            con.Open();
            //int count = 10;
            string sql = "Select * from SupplierMaster where name like @prefixText  ";
            SqlDataAdapter da = new SqlDataAdapter(sql, con);
            da.SelectCommand.Parameters.Add("@prefixText", SqlDbType.VarChar, 500).Value = prefixText + "%";
            DataTable dt = new DataTable();
            da.Fill(dt);
            string[] List = new string[100];
            int i = 0;

            foreach (DataRow dr in dt.Rows)
            {
                List.SetValue(dr["name"].ToString(), i);
                i++;
            }

         string sql1 = "Select * from SupplierMaster where codelike @prefixText  ";
            SqlDataAdapter da1 = new SqlDataAdapter(sql1, con);
            da1.SelectCommand.Parameters.Add("@prefixText", SqlDbType.VarChar, 500).Value = prefixText + "%";
            DataTable dt = new DataTable();
            da1.Fill(dt);
            string[] List = new string[100];
            int i = 0;
            foreach (DataRow dr in dt.Rows)
            {
                List.SetValue(dr["name"].ToString(), i);
                i++;
            }
            con.Close();
            return List;

        } 
```

这是 .aspx 文件中的自动完成扩展器

```
 <asp:AutoCompleteExtender runat="server" ID="AutoCompleteExtender3" TargetControlID="txtsear" ServicePath="~/Search.asmx" ServiceMethod="GetSupplier"

 MinimumPrefixLength="1" CompletionSetCount="10" 
CompletionListCssClass="autocomplete_completionListElement"
 CompletionListItemCssClass="autocomplete_listItem" 
                                                                    CompletionListHighlightedItemCssClass="autocomplete_highlightedListItem"
 </asp:AutoCompleteExtender> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T08:25:09.120

这是我的做法，适用于您的表格/字段：

```
using System.Collections.Generic;
// your class/namespace etc.

[WebMethod]
public List<string> GetSupplier(string prefixText)
{
    string SQL = "Select * from SupplierMaster where name like '%" + prefixText.Replace("'", "''") + "%' ";

    SqlConnection cnn = new SqlConnection(ConnectionStringGoesHere);
    SqlCommand cmd = new SqlCommand(SQL, cnn);
    cmd.CommandType = CommandType.Text;

    List<string> returnvalues = new List<string>();

    try
    {
        cnn.Open();
        SqlDataReader dr = cmd.ExecuteReader();
        while (dr.Read())
        {
            returnvalues.Add(dr["name"].ToString());
        }
    }
    finally
    {
        cnn.Close();
    }

    return returnvalues;
} 
```

我冒昧地在您的搜索文本前面加上通配符后缀`%`；你可能不想要那个。

现在，如果您想搜索两个字段，您可以使用：

```
 string SQL = "Select * from SupplierMaster where name like '%" + prefixText.Replace("'", "''") + "%' OR code like '%" + prefixText.Replace("'", "''") + "%' "; 
```

**编辑**

从您自己的回答中，我看到您正在组合代码和名称字段。我更愿意使用上面较短的代码，但使用 UNION 查询，如下所示：

```
string SQL = "Select name from SupplierMaster where name like '%" + prefixText.Replace("'", "''") + "%' UNION Select code from SupplierMaster where code like '%" + prefixText.Replace("'", "''") + "%' "; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T08:27:47.503

我得到了答案，

```
 [WebMethod]
        public string[] GetSupplier(string prefixText)
        {
            con.Open();
            //int count = 10;
            string sql = "Select * from SupplierMaster where name like @prefixText";
            SqlDataAdapter da = new SqlDataAdapter(sql, con);
            da.SelectCommand.Parameters.Add("@prefixText", SqlDbType.VarChar, 500).Value = prefixText + "%";
            DataTable dt = new DataTable();
            da.Fill(dt);
            string[] List = new string[100];
            int i = 0;
            foreach (DataRow dr in dt.Rows)
            {
                List.SetValue(dr["name"].ToString(), i);
                i++;
            }

            string sql1 = "Select * from SupplierMaster where code like @prefixText";
            SqlDataAdapter da1 = new SqlDataAdapter(sql1, con);
            da1.SelectCommand.Parameters.Add("@prefixText", SqlDbType.VarChar, 500).Value = prefixText + "%";
            DataTable dt1 = new DataTable();
            da1.Fill(dt1);
            //string[] List = new string[dt.Rows.Count];
            //int i = 0;
            foreach (DataRow dr in dt1.Rows)
            {
                List.SetValue(dr["code"].ToString(), i);
                i++;
            }
            con.Close();
            return List;

        } 
```

# iphone - UIBezierPath：视图截图检索不正确

> ID：11340079
> 
> 赞同：1
> 
> 时间：2012-07-05T07:55:36.293
> 
> 标签：iphone, ios, ipad, screenshot, uibezierpath

我正在按照以下方式截屏。

```
- (UIImage*)screenshot 
{
    UIWindow *keyWindow = [[UIApplication sharedApplication] keyWindow];
    CGRect rect = [keyWindow bounds];
    UIGraphicsBeginImageContext(rect.size);
    CGContextRef context = UIGraphicsGetCurrentContext();
    [keyWindow.layer renderInContext:context];
    UIImage *img = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return img;
} 
```

在 UIView 我正在使用`UIBezierPath`.

我得到的截图是这样的

![在此处输入图像描述](../Images/daf00e7759fe03aa6043388d4cfb9802.png)

任何想法为什么上部被切割成空白？在 UIView 上，所有绘图都正确显示。

* * *

更新：当我绘制一条长路径时会发生这种情况，`UIBezierPath`当我释放我的画笔并获取屏幕截图时，它会正确获取屏幕截图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:27:50.770

我看到了你发布的另一个线程。根据[苹果技术问答](https://developer.apple.com/library/ios/#qa/qa1703/_index.html#//apple_ref/doc/uid/DTS40010193)，需要先调整几何坐标。所以，在渲染窗口层之前，先做以下事情。

```
// -renderInContext: renders in the coordinate space of the layer,
// so we must first apply the layer's geometry to the graphics context
CGContextSaveGState(context);
// Center the context around the window's anchor point
CGContextTranslateCTM(context, [window center].x, [window center].y);
// Apply the window's transform about the anchor point
CGContextConcatCTM(context, [window transform]);
// Offset by the portion of the bounds left of and above the anchor point
CGContextTranslateCTM(context,
                      -[window bounds].size.width * [[window layer] anchorPoint].x,
                      -[window bounds].size.height * [[window layer] anchorPoint].y); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T08:17:14.380

```
- (UIImage*)screenshot :(UIView*)vw
{

    CGRect rect = [vw bounds];
    UIGraphicsBeginImageContext(rect.size);
    CGContextRef context = UIGraphicsGetCurrentContext();
    [vw.layer renderInContext:context];
    UIImage *img = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return img;
} 
```

Use This one

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T08:21:24.287

```
-(IBAction)takeScreenShot:(id)sender
{

    UIGraphicsBeginImageContext(self.view.bounds.size); 

    [self.view.layer renderInContext:UIGraphicsGetCurrentContext()]; 

    UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();

    UIImageWriteToSavedPhotosAlbum(viewImage, nil, nil, nil);
} 
```

# android - Cordova 1.9.0 Ajax 未检索

> ID：11340082
> 
> 赞同：0
> 
> 时间：2012-07-05T07:55:55.307
> 
> 标签：android, ajax, cordova

我一直在关注[http://wiki.phonegap.com/w/page/42450600/PhoneGap%20Ajax%20Sample](http://wiki.phonegap.com/w/page/42450600/PhoneGap%20Ajax%20Sample)上的教程 来构建一个简单的 AJAX 请求。但是我希望看到的结果只是一张空白的白页。

```
<!DOCTYPE html>
<html>
    <head>
        <title>PhoneGap Ajax Sample</title>
        <script type="text/javascript" src="phonegap.js"></script>
        <script type="text/javascript">
            function appReady(){
                var ajax = new XMLHttpRequest();
                ajax.open("GET","http://search.twitter.com/search.json?q=bacon",true);
                ajax.send();

                ajax.onreadystatechange=function(){
                    if(ajax.readyState==4 && (ajax.status==200||ajax.status==0)){
                        eval('var data = ' + ajax.responseText + ';');
                        var theResults = data.results;
                        alert(theResults);
                        var theHTML = '';
                        for(var i=0;i<theResults.length;i++){
                            theHTML += ['<div class="tweet"',
                                            '<div class="avatar"> <img src='+theResults[i].profile_image_url+' /></div>',
                                            '<div class="tweet_content">',
                                                '<h2>'+theResults[i].from_user+'</h2>',
                                                '<p>'+theResults[i].text+'</p>',
                                            '</div>',
                                        '</div>'].join('');
                        }
                        document.getElementById('main').innerHTML = theHTML;
                    }
                }
            }
            document.addEventListener("deviceready", appReady, false);

        </script>

        <style type="text/css">
            .tweet {padding-bottom:5px;}
            .avatar {float: left; height: 48px; width: 48px;}
            .tweet_content {margin-left: 60px; min-height: 48px;}
        </style>
    </head>
    <body>
        <div id="main">

        </div>
    </body>
</html> 
```

有任何想法吗？我环顾四周，听到 Cordova.plist 这个和 External Hosts that，但找不到添加白名单服务器的位置......

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T08:46:27.090

您有权访问您的应用程序中的另一个网站。只需像这样更改cordava.xml。要访问推特，

```
<?xml version="1.0" encoding="utf-8"?>
<cordova>
    <access origin="http://search.twitter.com/"/>
    <log level="DEBUG"/>
</cordova> 
```

访问所有网站。

```
<?xml version="1.0" encoding="utf-8"?>
<cordova>
    <access origin="*"/>
    <log level="DEBUG"/>
</cordova> 
```

# ssl - apache骆驼cxf https不工作

> ID：11340092
> 
> 赞同：3
> 
> 时间：2012-07-05T07:56:42.557
> 
> 标签：ssl, https, wsdl, cxf, apache-camel

我正在尝试使用 apache camel cxf 发布网络服务。我可以使用 http 访问已发布的 web 服务。但是我正在尝试使用 https 进行相同的配置。但我无法让它工作。

下面是spring上下文和wsdl文件的一部分

```
<camel-cxf:cxfEndpoint id="myEndoint"
    address="http://localhost:9000/PostXml/" serviceClass="com.XXXXXXXXXX.techquest.ServicesPortType"
    xmlns:ssp="http://techquest.interswitchng.com/" endpointName="ssp:PostXml"
    serviceName="ssp:PostXml" />

<http:conduit name="*.http-conduit">
    <http:tlsClientParameters
        secureSocketProtocol="SSL">
        <sec:keyManagers keyPassword="password">
            <sec:keyStore type="JKS" password="password"
                file="A:/apache-sermfino_conf/cherry.jks" />
        </sec:keyManagers>
        <sec:trustManagers>
            <sec:keyStore type="JKS" password="password"
                file="A:/apache-ser/truststore.jks" />
        </sec:trustManagers>
        <sec:cipherSuitesFilter>
            <!-- these filters ensure that a ciphersuite with export-suitable or 
                null encryption is used, but exclude anonymous Diffie-Hellman key change 
                as this is vulnerable to man-in-the-middle attacks -->
            <sec:include>.*_EXPORT_.*</sec:include>
            <sec:include>.*_EXPORT1024_.*</sec:include>
            <sec:include>.*_WITH_DES_.*</sec:include>
            <sec:include>.*_WITH_AES_.*</sec:include>
            <sec:include>.*_WITH_NULL_.*</sec:include>
            <sec:exclude>.*_DH_anon_.*</sec:exclude>
        </sec:cipherSuitesFilter>
    </http:tlsClientParameters>
    <http:client AutoRedirect="true" Connection="Keep-Alive" />
</http:conduit> 
```

==================================================== ==============================

```
<wsdl:portType name="ServicesPortType">
    <wsdl:operation name="PostXml">
        <wsdl:input message="tns:PostXml" />
        <wsdl:output message="tns:PostXml" />
    </wsdl:operation>
</wsdl:portType>            
<wsdl:binding name="ServicesSoap12Binding" type="tns:ServicesPortType">
    <soap12:binding style="document"
        transport="http://schemas.xmlsoap.org/soap/http" />
    <wsdl:operation name="PostXml">
        <soap12:operation soapAction="PostXml" style="document" />
        <wsdl:input>
            <soap12:body use="literal" />
        </wsdl:input>
        <wsdl:output>
            <soap12:body use="literal" />
        </wsdl:output>
    </wsdl:operation>
</wsdl:binding>         
<wsdl:service name="ServicesPortTypeService">
    <wsdl:port binding="tns:ServicesSoap12Binding" name="ServicesSoap12Endpoint">
        <soap12:address location="http://localhost:9000/PostXml" />
    </wsdl:port>
</wsdl:service> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T07:28:07.800

第一个配置是针对 http 客户端的，而不是针对服务器端的。您可以在此处找到配置示例[1]

[1]http://cxf.apache.org/docs/jetty-configuration.html

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-27T20:49:17.943

我能够配置 apache-camel-2.19.4 `camel-config.xml`：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:camel="http://camel.apache.org/schema/spring"
    xmlns:cxf="http://camel.apache.org/schema/cxf" xmlns:context="http://www.springframework.org/schema/context"
    xmlns:httpj="http://cxf.apache.org/transports/http-jetty/configuration"
    xmlns:sec="http://cxf.apache.org/configuration/security" xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:cxfcore="http://cxf.apache.org/core"
    xsi:schemaLocation="
       http://www.springframework.org/schema/beans                http://www.springframework.org/schema/beans/spring-beans.xsd
       http://www.springframework.org/schema/context              http://www.springframework.org/schema/context/spring-context.xsd
       http://camel.apache.org/schema/spring                      http://camel.apache.org/schema/spring/camel-spring.xsd
       http://camel.apache.org/schema/cxf                         http://camel.apache.org/schema/cxf/camel-cxf.xsd
       http://cxf.apache.org/configuration/security               http://cxf.apache.org/schemas/configuration/security.xsd
       http://cxf.apache.org/transports/http/configuration        http://cxf.apache.org/schemas/configuration/http-conf.xsd
       http://cxf.apache.org/transports/http-jetty/configuration  http://cxf.apache.org/schemas/configuration/http-jetty.xsd
       http://cxf.apache.org/core                                 http://cxf.apache.org/schemas/core.xsd
       ">
  <cxf:cxfEndpoint id="my-endpoint-http"
    address="http://localhost:8080/test"
    endpointName="tns:endpointName1" serviceName="tns:endpointServiceName1"
    wsdlURL="myService.wsdl" xmlns:tns="myServiceWsdlNamespace">
    <cxf:properties>
      <entry key="allowStreaming" value="true" />
      <entry key="autoRewriteSoapAddressForAllServices" value="true" />
    </cxf:properties>
  </cxf:cxfEndpoint>

  <cxf:cxfEndpoint id="my-endpoint-https"
    address="https://localhost:8443/test"
    endpointName="tns:endpointName1" serviceName="tns:endpointServiceName1"
    wsdlURL="myService.wsdl" xmlns:tns="myServiceWsdlNamespace">
    <cxf:properties>
      <entry key="allowStreaming" value="true" />
      <entry key="autoRewriteSoapAddressForAllServices" value="true" />
    </cxf:properties>
  </cxf:cxfEndpoint>

    <camelContext xmlns="http://camel.apache.org/schema/spring">

    <route id="my-endpoint-http-route" streamCache="true">
      <from uri="cxf:bean:my-endpoint-http?dataFormat=MESSAGE" />
      <to uri="direct:myServiceDirect" />
    </route>
    <route id="my-endpoint-https-route" streamCache="true">
      <from uri="cxf:bean:my-endpoint-https?dataFormat=MESSAGE" />
      <to uri="direct:myServiceDirect" />
    </route>
        <route id="all" streamCache="true">
          <from uri="direct:myServiceDirect" />             
            <log message="headers1=${headers}" />
        </route>
    </camelContext>
   <cxfcore:bus/>
   <httpj:engine-factory bus="cxf">
      <httpj:engine port="8443">
        <httpj:tlsServerParameters secureSocketProtocol="TLSv1">
          <sec:keyManagers keyPassword="skpass">
            <sec:keyStore password="changeit" file="src/test/resources/certificate-stores/localhost-keystore.jks" />
          </sec:keyManagers>
          <!-- 
          <sec:trustManagers>
            - <sec:keyStore resource="certs/serviceKeystore.jks" password="sspass" type="JKS"/> -
            <sec:keyStore password="changeit" file="src/main/resources/certificate-stores/cacerts" />
          </sec:trustManagers>
           -->
          <sec:cipherSuitesFilter>
            <sec:include>.*_WITH_3DES_.*</sec:include>
            <sec:include>.*_WITH_DES_.*</sec:include>
            <sec:exclude>.*_WITH_NULL_.*</sec:exclude>
            <sec:exclude>.*_DH_anon_.*</sec:exclude>
          </sec:cipherSuitesFilter>
          <!-- <sec:clientAuthentication want="true" required="false"/> -->
        </httpj:tlsServerParameters>
      </httpj:engine>
    </httpj:engine-factory>
</beans> 
```

有了这个，您应该能够访问：

*   [http://localhost:8080/test?wsdl](http://localhost:8080/test?wsdl)
*   [https://localhost:8443/test?wsdl](https://localhost:8443/test?wsdl)

该文件`src/test/resources/certificate-stores/localhost-keystore.jks`应包含一个生成的密钥对（使用 KeyStoreExplorer）以及使用`keyPassword(skpass)`密钥密码和`password(changeit)`密钥库文件密码保存的密钥对。

# authentication - Symfony2：通过用户或 IP 登录

> ID：11340093
> 
> 赞同：2
> 
> 时间：2012-07-05T07:56:43.967
> 
> 标签：authentication, login, symfony

是否可以通过 Symfony2 中的用户名或 IP 进行身份验证？我知道可以使用用户名和密码或通过 IP 地址登录，但是当我来自特定 IP 地址时是否也可以自动进行身份验证，如果不是，则通过用户名和密码进行身份验证？

***例子：***

如果我来自 10.1.1.1，我想获得 ADMIN_ROLE

如果我来自不同的 IP，我必须通过用户名和密码登录

我的security.yml来了

```
 secured_area:
        pattern:    ^/
        anonymous: ~
        form_login:
            check_path: /login_check
            login_path: /login
        logout:
            path:   /logout
            target: /login
        #anonymous: ~
        #http_basic:
        #    realm: "Secured Demo Area"

access_control:
    - { path: ^/login, roles: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/, roles: ROLE_ADMIN  }
    - { path: ^/, roles: IS_AUTHENTICATED_ANONYMOUSLY, ip: 10.1.1.1 } 
```

感谢帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T09:18:47.903

我认为这在 Symfony 中是不可能的。这是一个相当大的安全漏洞，因为 IP 地址可以被伪造。这就是为什么我建议您搜索另一种登录方法。

如果您想了解更多信息：

[http://en.wikipedia.org/wiki/IP_address_spoofing](http://en.wikipedia.org/wiki/IP_address_spoofing)

与其通过 IP 授权，不如提供一个可以用来认证用户的证书？这样传入的请求需要一些不公开的知识（证书）吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T06:30:02.973

这是可能的，但不安全。您可以执行链式身份验证提供程序（security.yml 中的防火墙部分）

在您的情况下，您将需要为 IP 身份验证方法实施自定义方法。您可以在 Symfony 食谱中找到编写自定义身份验证提供程序的文档（需要：[http](http://symfony.com/doc/current/cookbook/security/custom_authentication_provider.html) ://symfony.com/doc/current/cookbook/security/custom_authentication_provider.html ）

您将不得不链接您的自定义提供程序和 Symfony2 表单身份验证提供程序。

# javascript - 如何使用包含 mongoose 函数的方法和控制流框架（例如 Async 或 Step）

> ID：11340094
> 
> 赞同：0
> 
> 时间：2012-07-05T07:56:49.333
> 
> 标签：javascript, node.js, mongoose, control-flow

我在如何以串行方式调用异步函数方面有点挣扎。特别是，将 mongoose 调用合并到数据库的函数。我有一个包含两种方法的类定义： (MovieFile.exists) 检查数据库中是否存在某个记录；(MovieFile.save) 在数据库中保存一条记录。理想情况下，我希望能够在确认它是否存在于数据库中 (MovieFile.exists()) 之后保存记录 (MovieFile.save())。

理想情况下，我想做这样的事情：

```
// Create instance of MovieFile object.  
var movieFile = new MovieFile(mongoose);
if (movieFile.exists() === false) {
  movieFile.save();
} 
```

不幸的是，猫鼬的异步特性使得这不可能。我一直在玩[Step](https://github.com/creationix/step)和[Async](https://github.com/caolan/async)控制流框架。不幸的是，在这种情况下，我无法理解如何使用这些框架。如果有人能告诉我如何将上述代码放入 Step 或 Async 中，我将不胜感激。我认为问题在于异步猫鼬调用本身嵌入在一个方法中（参见：MovieFile.exists 和 MovieFile.save）。我意识到在这个例子中使用这样的框架可能是矫枉过正，但我​​试图将其用作学习练习。

```
function MovieFile(mongoose) {
  var Movie = mongoose.model('Movie');

  this.exists = function() {
    // Confirm necessary object variables have been set.
    if (typeof this.originalFileName === 'undefined') {
      throw error = new Error('Variable originalFilename has not been set for MovieFile.');
    }
    if (typeof this.fileSize !== 'number') {
      throw error = new Error('Variable originalFilename has not been set for MovieFile.');
    }
    // Check database for existing record.
    Movie
      .find({ originalFileName: this.originalFileName, size: this.fileSize })
      .exec(function(error, results) {
        if (error) {
          throw error;
        }
        else if (results.length === 0) {
          return false;
        }
        else if (results.length === 1) {
          return true;
        }
        else {
          throw error = new Error('More than one record for this movie record exists.');
        }
      });
  };

  this.save = function() {
    // save movie to database.
    var values = {
      name: this.getName(),
      machineFileName: this.getMachineFileName(),
      originalFileName: this.getName(),
      size: this.getFileSize(),
    };
    var movie = new Movie(values);
    movie.save(function(error, data) {
      if (error) {
        console.log(error);
      }
      else {
        console.log('Movie saved.');
      }
    });
  };
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T08:04:19.497

您必须将回调传递给您的`exists`函数，它将返回布尔值`true`或`false`.

例子：

```
this.exists = function(callback) {

   // your code

   callback(true);

}); 
```

然后 ：

```
movieFile.exists(function(exists) {

     if (!exists) boomovieFile.save();

}); 
```

正如你所说，这是由于异步猫鼬调用。因此，您将不得不`return`用回调替换您的语句。

我从未使用过 Step 或 Async 控制流框架。但我认为，对于这种简单的情况，您不需要依赖这些模块。在我看来，只有在必须处理大量回调时才应该考虑使用这些模块。

**编辑**

由于我是控制流框架的新手，我发现[这篇文章](http://book.mixu.net/ch7.html)很好地描述了这个概念并展示了如何构建你自己的。这对学习目的非常有用。

[本文](http://www.hacksparrow.com/managing-nested-asynchronous-callbacks-in-node-js.html)将为您提供一个有关如何使用 async 模块管理队列的示例。

[这篇文章](https://stackoverflow.com/questions/4234619/how-to-avoid-long-nesting-of-asynchronous-functions-in-node-js)列出了一些其他的控制流模块，并附有几个例子。第一个答案还展示了如何通过解耦小函数来避免嵌套回调。这就是我个人管理我的应用程序的方式，在我的情况下效果很好。

但我很想知道更多关于控制流技术的信息，所以如果你找到了很好的资源，请告诉我。

# php - 从 php 运行 C 程序

> ID：11340095
> 
> 赞同：3
> 
> 时间：2012-07-05T07:56:49.810
> 
> 标签：php, c

我有一个 C 程序，我已经编译成一个名为 crunch 的 exe。

它接受一个字符串并返回一个哈希字符串。它已经工作了很长时间，但我只需要对其进行一些小改动。它在终端中完美运行，如下所示：

```
./crunch url-string/with-file.jpg 
```

吐出一个漂亮的哈希字符串。在我的 php 中，我一直在执行它：

```
$crunch = '~/domains/somewhere.net/html/api/crunch';
        $code = `$crunch $code`;
        $code = mysql_real_escape_string(trim($code)); 
```

$code 最初是一个字符串，它是一个 URL。它一直在返回一个哈希值，但不再返回。

我已经重新编译了 C 几次。只是不明白，我试过 php exec() ， passthru()。

固定的：

问题是我的 Mac Unix 发行版和 linux 服务器之间的区别。解决方法是登录我的服务器并在那里编译 .c 文件。

鲍勃你的叔叔，又开始工作了。

谢谢大家，我确实检查了大家的建议。有时排除可能的休息有助于专注于这个问题。到处都是虚拟啤酒（或苏打水）！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T08:04:52.293

一个可能不完整的列表是：`exec()`, `system()`, `shell_exec()`, `backticks`, `popen()`, `proc_open()`, `passthru()`.

编辑：

检查此警告：

```
With safe mode enabled, the command string is escaped with escapeshellcmd(). Thus, echo y | echo x becomes echo y \| echo x. 
```

来自[function.popen.php](http://php.net/manual/en/function.popen.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T08:00:25.387

唉……又一个非自助用户……

[http://php.net/manual/en/function.exec.php](http://php.net/manual/en/function.exec.php)

注意权限。

# jquery - 如何使用 jquery-ui-map 在谷歌地图上正确添加形状（）

> ID：11340097
> 
> 赞同：5
> 
> 时间：2012-07-05T07:56:59.433
> 
> 标签：jquery, jquery-ui, google-maps-api-3, jquery-ui-map

我正在使用以下代码通过 jquery、jqueryui-map 和 google maps API 向地图添加形状

```
$('#map_canvas').gmap('getCurrentPosition', function(position, status) {
            if ( status === 'OK' ) {
                var clientPosition = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
                $('#map_canvas').gmap('addMarker', {'position': clientPosition, 'bounds': false});
                $("#map_canvas").gmap("option", "center", clientPosition);
                $('#map_canvas').gmap('option', 'zoom', 14);
                $('#map_canvas').gmap('addShape', 'Circle', {
                    'strokeColor': "#008595",
                    'strokeOpacity': 0.8,
                    'strokeWeight': 2,
                    'fillColor': "#008595",
                    'fillOpacity': 0.35,
                    'center': clientPosition,
                    'radius': 50,
                    'clickable': false });
            }
}); 
```

我还尝试在 $('#map_canvas') 上调用 .addShape 方法。但我只收到以下错误：

```
Uncaught TypeError: Cannot call method 'apply' of undefined jquery.ui.map.js:46
$.a.$.fn.(anonymous function) jquery.ui.map.js:46
e.extend.each jquery.min.js:2
e.fn.e.each jquery.min.js:2
$.a.$.fn.(anonymous function) jquery.ui.map.js:40
(anonymous function) :8080:397
$.extend.getCurrentPosition 
```

有谁知道如何解决这个问题？[http://jquery-ui-map.googlecode.com/svn/trunk/demos/jquery-google-maps-geolocation.html](http://jquery-ui-map.googlecode.com/svn/trunk/demos/jquery-google-maps-geolocation.html)上的示例出于某种原因.. 我只是无法弄清楚实际的区别。 . 也许我现在要瞎了;)

谢谢，

拍

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-12T07:40:10.327

有同样的问题，从没有提到包括的相同文档中产生`jquery.ui.map.overlays.js`

代码说

```
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
<script type="text/javascript" src="PATH_TO_PLUGIN/jquery.ui.map.js"></script>
<script type="text/javascript" src="PATH_TO_PLUGIN/jquery.ui.map.extensions.js"></script> 
```

事实上你需要

```
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
<script type="text/javascript" src="PATH_TO_PLUGIN/jquery.ui.map.js"></script>
<script type="text/javascript" src="PATH_TO_PLUGIN/jquery.ui.map.overlays.js"></script> 
```

事实上，经过测试，它可以在没有`jquery.ui.map.extensions.js`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-19T15:51:34.327

我评论了 jquery.ui.map.extensions.js 并添加了 jquery.ui.map.overlays.js 但它没有帮助

```
<script type="text/javascript" charset="utf-8" src="js/jquery-1.9.1.min.js"> </script> 
<script type="text/javascript" src="js/jquery.ui.map.js"></script> 
<!--script type="text/javascript" src="js/jquery.ui.map.extensions.js"></script--> 
<script type="text/javascript" src="js/jquery.ui.map.overlays.js"></script> 
```

这导致 Object # has no method 'getCurrentPosition' 错误。

然后我取消注释 jquery.ui.map.extensions.js 然后它对我有用。

```
<script type="text/javascript" charset="utf-8" src="js/jquery-1.9.1.min.js"> </script> 
<script type="text/javascript" src="js/jquery.ui.map.js"></script> 
<script type="text/javascript" src="js/jquery.ui.map.extensions.js"></script> 
<script type="text/javascript" src="js/jquery.ui.map.overlays.js"></script> 
```

无论如何感谢Moak！它真的有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-01T06:34:07.603

它必须是这样的：

```
<script type="text/javascript" src="jquery/2.1.0/jquery-2.1.0.min.js"></script>
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=true"></script>
<script type="text/javascript" src="jquery-ui-map/3.0-rc/ui/min/jquery.ui.map.min.js"></script>
<script type="text/javascript" src="jquery-ui-map/3.0-rc/ui/jquery.ui.map.extensions.js"></script>
<script type="text/javascript" src="jquery-ui-map/3.0-rc/ui/jquery.ui.map.overlays.js"></script> 
```

# android - 如何通过编码在 Android 中设置默认操作？

> ID：11340098
> 
> 赞同：1
> 
> 时间：2012-07-05T07:56:59.937
> 
> 标签：android

在设备上安装我的主屏幕应用程序“ABC”后，当用户按下主屏幕按钮时，系统会提示他使用默认操作 Android 对话框在默认主屏幕应用程序和我的 ABC 应用程序之间进行选择。

我的用例是继续提示用户 - 虽然很少，但使用此默认操作对话框，直到他选择我的应用程序作为默认值。

我们如何在 android 中默认操作？

![在此处输入图像描述](../Images/99869811a19170c8f158288d05b9be6c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T08:20:54.217

在 ICS（可能还有 Honeycomb）之前，您可以使用[PackageManager#addPreferredActivity](http://developer.android.com/reference/android/content/pm/PackageManager.html#addPreferredActivity%28android.content.IntentFilter,%20int,%20android.content.ComponentName%5b%5d,%20android.content.ComponentName%29)方法设置首选活动。

但如文档中所述：

> 这是一个受保护的 API，不应提供给第三方应用程序。分配首选活动是平台的责任，不能直接修改。

这确实可以被恶意软件用来更改启动器图标启动的应用程序。我真的建议您不要使用它，而是让您的用户选择将自己的启动器设为默认启动器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T08:21:25.177

当您需要查看“启动器”选择对话框时调用以下意图，除非其中一个启动器应用程序设置为默认值

```
Intent homeIntent = new Intent("android.intent.action.MAIN");
homeIntent.addCategory("android.intent.category.HOME");
startActivity(homeIntent); 
```

# algorithm - 求解 f(n) = 2*( f(n-1) + f(n-2) ) mod 1000000007 的算法

> ID：11340103
> 
> 赞同：-1
> 
> 时间：2012-07-05T07:57:16.603
> 
> 标签：algorithm, recurrence

> **可能重复：**
> [我想生成序列 1,3,8,22,60 ,164 的第 n 项，以 Order(1) 或 (nlogn)](https://stackoverflow.com/questions/11301992/i-want-to-generate-the-nth-term-of-the-sequence-1-3-8-22-60-164-in-order1-or)
> [的顺序计算序列 1,3,8,22 的第 n 项， 60,164,448,1224……？](https://stackoverflow.com/questions/11308621/calculate-the-nth-term-of-the-sequence-1-3-8-22-60-164-448-1224)

我有一个递归关系 f(n) = 2 * (f(n-1) + f(n-2))。我必须求解 f(k) mod 1000000007，其中 k 是输入。k 的范围是 1 <= k <= 1000000000?。我尝试通过简单的递归函数来实现它，但显然它会导致大 k 溢出，因此我遇到了运行时错误。我是算法和东西的新手，所以需要知道是否存在解决此类问题的具体有效方法？

```
#include<stdio.h>
#define M 1000000007
long long unsigned res(long long unsigned n){
  if(n==1)
    return 1;
  else {
    if(n==2)
      return 3;
    else return (2*(res(n-1)%M+res(n-2)%M));
  }
}
int main(){
  int test;
  scanf("%d",&test);
  while(test--){
    long long unsigned n;
    scanf("%llu",&n);
    printf("%llu\n",res(n));
  }
  getch();
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T08:09:38.410

您可以使用以下两个身份：

```
mod(a * b, p) = mod(mod(a, p) * mod(b, p), p)
mod(a + b, p) = mod(mod(a, p) + mod(b, p), p) 
```

这给了你，假设 mod(2, p) = 2：

```
mod(f(n), p) = mod(2 * mod(mod(f(n - 1), p) + mod(f(n - 2), p), p), p) 
```

或更简单：

```
mod(f(n), p) = mod(mod(2 * f(n - 1), p) + mod(2 * f(n - 2), p), p) 
```

从那里应该很容易计算 f(k)。而且不需要递归，可以做一个线性解析（这只是斐波那契数列的一种变体）。

提示：尝试同时保留`f(n - 1)`和`f(n - 2)`在本地，`f(n)`从中计算，然后更新您的本地并迭代。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T08:12:57.923

首先，您必须定义 f(0) 和 f(1) 会发生什么，因为在某些时候您会到达它们。然后你可以向前而不是向后解决它。从 2 开始并继续前进，直到您以这种方式到达 k：

```
f(k) {
    a = F0; // F0 is the predefined value f(0)
    b = F1; // F1 is the predefined value f(1)
    if ( k == 0 ) {
       return a;
    }
    else if ( k == 1 ) {
       returb b;
    }
    else {
       n = 2;
       while ( n < k ) {
          c=2*(a+b);
          a=b;
          b=c;
          n = n+1;
       }
       return c;
    }
} 
```

如果你多次调用它，你应该考虑将所有的 c 保存在某个地方，这样你就不必每次都重新计算它。我希望我足够清楚。不然再问我

# .net - 从 .net 中的资源加载图像需要未使用的引用

> ID：11340105
> 
> 赞同：0
> 
> 时间：2012-07-05T07:57:23.150
> 
> 标签：.net, winforms, resources

短篇小说：资源在运行时使用项目的所有引用，即使它们不需要运行。

长话短说：我正在编写一个在 Autocad 中使用的 .net dll。它是 .net 表单的集合。该项目当然引用了一些 AutoCAD dll。为了帮助测试，我将表单代码与 AutoCAD 代码分离。因此，如果我将 proj 编译为 dll，我可以将它与 autocad 一起使用；如果我将它编译为 exe 表单加载（使用模拟对象作为数据）。一切都很好，除非我使用以下资源将图像添加到表单中：

```
Image img = global::myproj.Properties.Resources.myimage; 
```

这会在运行时导致此错误：

```
System.IO.FileNotFoundException was unhandled
Message="Could not load file or assembly 'acmgd, Version=17.1.0.0, Culture=neutral,     PublicKeyToken=null' or one of its dependencies. The system cannot find the file specified." 
```

无法加载该dll，因为我们不在AutoCAD中；但在项目的“exe”形式中不需要。事实上，如果我删除图像（这显然与 AutoCAD 无关）一切正常。这就像项目的“资源”部分，在运行时引用项目中包含的所有 dll ......即使它们没有被使用。

如何在不删除 autocad dll 的情况下将图像添加到我的项目中？我希望图像成为项目的一部分（即在 dll 中，而不是在磁盘上的某个位置）。

顺便说一句：autocad dll 只是一个例子。我想对于需要在某些应用程序中“托管”项目的任何其他 dll，我都会遇到同样的问题。

违规线路：

```
pictureBox9.Image = global::MyProj.Properties.Resources.tdb2; 
```

完整的堆栈跟踪：

```
System.IO.FileNotFoundException was unhandled
Message="Could not load file or assembly 'acmgd, Version=17.1.0.0, Culture=neutral,    PublicKeyToken=null' or one of its dependencies. The system cannot find the file   specified."
Source="mscorlib"
FileName="acmgd, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null"
FusionLog="=== Pre-bind state information ===\r\nLOG: User = user\r\nLOG: DisplayName = acmgd, Version=17.1.0.0, Culture=neutral, PublicKeyToken=null\n (Fully-specified)\r\nLOG: Appbase = file:<full path>/\r\nLOG: Initial PrivatePath = NULL\r\nCalling assembly : MyProj, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null.\r\n===\r\nLOG: This bind starts in default load context.\r\nLOG: No application configuration file found.\r\nLOG:      Using machine configuration file from  C:\\Windows\\Microsoft.NET\\Framework\\v2.0.50727\\config\\machine.config.\r\nLOG: Policy not being applied to reference at this time (private, custom, partial, or location-based assembly bind).\r\nLOG: Attempting download of new URL file:<full path>/acmgd.DLL.\r\nLOG: Attempting download of new URL file:<full path>/acmgd/acmgd.DLL.\r\nLOG: Attempting download of new URL file:<full path>/acmgd.EXE.\r\nLOG: Attempting download of new URL file:<full path>/acmgd/acmgd.EXE.\r\n"
   StackTrace:
   at System.ModuleHandle.ResolveMethod(Int32 methodToken, RuntimeTypeHandle* typeInstArgs, Int32 typeInstCount, RuntimeTypeHandle* methodInstArgs, Int32 methodInstCount)
   at System.ModuleHandle.ResolveMethodHandle(Int32 methodToken, RuntimeTypeHandle[] typeInstantiationContext, RuntimeTypeHandle[] methodInstantiationContext)
   at System.Reflection.CustomAttributeData..ctor(Module scope, CustomAttributeRecord caRecord)
   at System.Reflection.CustomAttributeData.GetCustomAttributes(Module module, Int32 tkTarget)
   at System.Reflection.CustomAttributeData.GetCustomAttributes(Assembly target)
   at System.Resources.ResourceManager.GetNeutralResourcesLanguage(Assembly a, UltimateResourceFallbackLocation& fallbackLocation)
   at System.Resources.ResourceManager.InternalGetResourceSet(CultureInfo culture, Boolean createIfNotExists, Boolean tryParents)
   at System.Resources.ResourceManager.GetObject(String name, CultureInfo culture, Boolean wrapUnmanagedMemStream)
   at System.Resources.ResourceManager.GetObject(String name, CultureInfo culture)
   at MyProj.Properties.Resources.get_tdb2() in <full path>Resources.Designer.cs:line 93
   at MyProj.MyForm.InitializeComponent() in <full path>\MyForm.Designer.cs:line 524
   at MyProj.MyForm..ctor() in <full path>\MyForm.cs:line 28
   at MyProj.MyForm.tabPage_Enter(Object sender, EventArgs e) in <full path>\MyForm.cs:line 121
   at System.Windows.Forms.Control.OnEnter(EventArgs e)
   at System.Windows.Forms.TabPage.OnEnter(EventArgs e)
   at System.Windows.Forms.TabPage.FireEnter(EventArgs e)
   at System.Windows.Forms.TabControl.OnSelected(TabControlEventArgs e)
   at System.Windows.Forms.TabControl.WmSelChange()
   at System.Windows.Forms.TabControl.WndProc(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
   at System.Windows.Forms.NativeWindow.DebuggableCallback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)
   at System.Windows.Forms.UnsafeNativeMethods.SendMessage(HandleRef hWnd, Int32 msg, IntPtr wParam, IntPtr lParam)
   at System.Windows.Forms.Control.SendMessage(Int32 msg, IntPtr wparam, IntPtr lparam)
   at System.Windows.Forms.Control.ReflectMessageInternal(IntPtr hWnd, Message& m)
   at System.Windows.Forms.Control.WmNotify(Message& m)
   at System.Windows.Forms.Control.WndProc(Message& m)
   at System.Windows.Forms.ScrollableControl.WndProc(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
   at System.Windows.Forms.NativeWindow.DebuggableCallback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)
   at System.Windows.Forms.UnsafeNativeMethods.CallWindowProc(IntPtr wndProc, IntPtr hWnd, Int32 msg, IntPtr wParam, IntPtr lParam)
   at System.Windows.Forms.NativeWindow.DefWndProc(Message& m)
   at System.Windows.Forms.Control.DefWndProc(Message& m)
   at System.Windows.Forms.Control.WmMouseDown(Message& m, MouseButtons button, Int32 clicks)
   at System.Windows.Forms.Control.WndProc(Message& m)
   at System.Windows.Forms.TabControl.WndProc(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
   at System.Windows.Forms.NativeWindow.DebuggableCallback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)
   at System.Windows.Forms.UnsafeNativeMethods.DispatchMessageW(MSG& msg)
   at System.Windows.Forms.Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(Int32 dwComponentID, Int32 reason, Int32 pvLoopData)
   at System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner(Int32 reason, ApplicationContext context)
   at System.Windows.Forms.Application.ThreadContext.RunMessageLoop(Int32 reason, ApplicationContext context)
   at System.Windows.Forms.Application.Run(Form mainForm)
   at PidXp.MyForm.Main() in <full path>\MyForm.cs:line 23
   at System.AppDomain._nExecuteAssembly(Assembly assembly, String[] args)
   at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
   at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
   at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ThreadHelper.ThreadStart() 
```

（替换了一些路径/名称）

# java - 每行表的编辑链接会将行的主键发送到控制器

> ID：11340108
> 
> 赞同：0
> 
> 时间：2012-07-05T07:57:32.957
> 
> 标签：java, spring, jsp, spring-mvc

嗨，我是 jsp 和 Spring 的新手。我有一张员工信息表。我想在每一行中添加一个编辑链接，然后单击一个编辑链接，它将将该行的主键发送到控制器。当我单击编辑链接时，它显示错误“客户端发送的请求在语法上不正确（）。”

此页面显示表格

员工列表.jsp

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Employee List</title>
    </head>
    <body>
        <div align="center">
            <h1 align="center">Employee List</h1>
            <table align="center" border="1">
            <tr><th>Pk</th><th>Employee Name</th><th>Employee email</th><th>Address</th><th>Manager Id</th><th>Edit</th><th>Delete</th></tr>
            <c:forEach var="employeeList" items="${list}">
                <tr>
                    <td><c:out value="${employeeList.id}"/></td>
                    <td><c:out value="${employeeList.name}"/> </td>
                    <td><c:out value="${employeeList.email}"/> </td>
                    <td><c:out value="${employeeList.address}"/></td>
                    <td><c:out value="${employeeList.managerId}"/></td>

                    <td><a href="editEmployee.htm?id=${id}" >Edit</a></td>
                    <td><a href="deleteEmployee.htm?id=${id}" >Delete</a></td>
                </tr>
            </c:forEach>
            </table>
        </div>
    </body>
</html> 
```

我的控制器代码是

```
@RequestMapping(value="/editEmployee.htm")
public String editEmployee(@RequestParam("id") int id,ModelMap model){
    try {
        Employee employee = employeeService.getEmployeeById(id);
        model.addAttribute("employee", employee);
        return "editEmployee";
    } catch (Exception ex) {
        return "index";
    }

} 
```

编辑雇员.jsp

```
 <%@ page language="java" contentType="text/html; charset=ISO-8859-1"
        pageEncoding="ISO-8859-1"%>
<%@ taglib uri="http://www.springframework.org/tags/form" prefix="form"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
        <title>Registration Page</title>
        <style>
            .error {
            color: #ff0000;
            font-style: italic;
            }
        </style>
    </head>
    <body>
        Edit Employee<br>
    </body>
</html> 
```

我该如何解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T08:32:18.540

把你的jsp改成这样

```
<c:url var="editUrl" value="/editEmployee.htm" />
<a href="${editUrl}?id=${employeeList.id}">
    Edit
</a>
<c:url var="deleteUrl" value="/deleteEmployee.htm" />
<a href="${deleteUrl}?id=${employeeList.id}">
    Delete
</a 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T08:05:33.980

@RequestMapping(value="/editEmployee.htm") - 错误

```
@RequestMapping(value="/editEmployee/{id}")
public String editEmployee(@PathVariable int id,ModelMap model){
    try {
        Employee employee = employeeService.getEmployeeById(id);
        model.addAttribute("employee", employee);
        return "editEmployee";
    } catch (Exception ex) {
        return "index";
    }

} 
```

还有一个 href="editEmployee.htm?id=${id} 这应该类似于 a href="editEmployee/${id}

# android - 尝试打开已经打开的socket连接会挂起android系统。如何解决？

> ID：11340115
> 
> 赞同：0
> 
> 时间：2012-07-05T07:58:06.150
> 
> 标签：android, sockets, mobile-application, android-2.2-froyo

我对安卓很陌生。我正在 android 2.2 中开发一个应用程序，它通过套接字连接将一些字节发送到服务器。

在服务器端，他们使用简单的 Java 编码来实现服务器套接字。socket连接中发送数据成功。

但我的问题是当在套接字连接中发送数据时，我在客户端（即在移动端）关闭连接。但在服务器端它没有关闭。

然后客户端再次尝试通过套接字向服务器发送数据。所以客户端（在 android mobile 中）应用程序被挂起。

```
socket=new Socket(this.ipAddress,this.port_number); 
```

上面的代码片段挂起客户端系统。如何在不挂起客户端应用程序的情况下在客户端显示错误屏幕。

欢迎大家提出你的想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T04:31:30.550

我得到了解决方案，以下是步骤，编码等。

```
while(//condition)   
{
  socket=new Socket(this.ipAddress,this.port_number);
     //Opening input and output streams
     //Transfer the data
     //After data transfer connectin is closed.
     //While loop runs untill some condition     
} 
```

# php - 如何在php中的一周中的几天内轮换不同的数据

> ID：11340116
> 
> 赞同：0
> 
> 时间：2012-07-05T06:22:02.700
> 
> 标签：php

我正在做一个项目，我必须每天分发不同的广告，数组形式的广告是：

```
$ad = array( 'attribute1_value' => "12",
 'attribute2_value' => "xyz",
 'attribute3_value' => 'http://example.com',
 'attribute4_value' => 'data'); 
```

我与开关盒一起使用的逻辑：

```
$day = date('w',time());

    switch ($day) {
        case '0':
        if($day == '0') {
            $count = 0;
            echo $ad;
            $count++;
        }
        else {
            $count = 7;
            echo $ad;
        }
        break;

            case '1':
        if($day == '1') {
            $count = 1;
            echo $ad;
            $count++;
        }
        else {
            $count = 8;
            echo $ad;
        }
        break; 
```

问题是，如果我有 ~15 个广告，那么我想分发广告/天，日期（'w'）输出是当天，但在第 7 天之后，即星期六，在星期日广告编号 8 开始。我必须使用日期函数来实现这个场景。此外，我必须将广告发送给以前没有体验过此广告的用户。我不是 php 专家，作为 php/mysql 的初学者。请帮助我改进这个概念

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T08:19:20.773

您当前的代码存在一些问题。首先，用逻辑：

```
 case '0': //<!-- ensures the following code executes only where $day == 0
    if($day == '0') { //<!-- therefore this will run
        $count = 0;
        echo $ad;
        $count++;
    } else { //<!-- but this can never run
        $count = 7;
        echo $ad;
    } 
```

此外，您正在回显`$ads`，这是一个数组。*您需要从*数组中回显一个元素。

如果您希望一个星期一使用广告 1，而下一个星期一使用广告 8，`date('w')`则不会有太大帮助，因为它只是在 0 到 6 之间循环，因此不适合此操作。它不记得月份或年份的总天数 - 它的范围仅为当前周。

您可以使用月份中的某一天来代替 [编辑 - 或者，当然，一年中的某一天 ( `date('z')`)。请参阅下面的评论）。

```
$day = date('d');
$ads = array('ad 1', 'ad 2', 'ad 3', 'ad 4', 'ad 5', 'ad 6', 'ad 7', 'ad 8', 'ad 9', 'ad 10', 'ad 11', 'ad 12');
echo $ads[($day - 1) % count($ads)]; 
```

所以在每月的第 5 天，广告 5 显示。第 7 天，广告 7 出现。在第 14 天，广告 2 开始展示，因为它再次围绕广告周期开始。

至于如何确保用户以前没有看过广告，那是另一个问题，我建议您照此发布。这可能涉及某种 cookie 系统，除非用户已登录，在这种情况下，您可以在服务器端跟踪此类事情。

# java - XStream：使用 XStreamImplicit 省略集合

> ID：11340131
> 
> 赞同：2
> 
> 时间：2012-07-05T07:59:24.740
> 
> 标签：java, json, list, xstream

我正在尝试使用 XStream 将一个小对象图输出到 JSON。仅输出，无需反序列化。

对象非常简单：

```
@XStreamAlias("players")
public class Players {

    @XStreamImplicit
    private List<Player> players = new ArrayList<Player>();

    public Players() {
        for (int i = 0; i < 5; ++i) {
            players.add(new Player("Player " + i));
        }
    }
}

@XStreamAlias("player")
public class Player {
    private String name;
    public Player(String name) {
        this.name = name;
    }
} 
```

幸运的是，JSON 中省略了不必要的列表包装元素：

```
{ players: { player: { name: "Player 4"}}} 
```

但不幸的是，**只打印了最后一个元素**。

我正在使用 XStream 1.4.2，初始化如下：

```
XStream xstream = new XStream(new JsonHierarchicalStreamDriver());
xstream.setMode(XStream.NO_REFERENCES);
xstream.aliasSystemAttribute(null, "class");
xstream.autodetectAnnotations(true);
String out = xstream.toXML(xstramAliasObject); 
```

据我所见，设置类似于这个问题：[XStream Alias of List root elements](https://stackoverflow.com/questions/3824362/xstream-alias-of-list-root-elements)。

我的例子有什么问题？

提前致谢！问候，迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-29T13:32:43.893

我正在使用相同的库，但收到整个消息..

```
{"players": {
  "player": {
    "name": "Player 0"
  },
  "player": {
    "name": "Player 1"
  },
  "player": {
    "name": "Player 2"
  },
  "player": {
    "name": "Player 3"
  },
  "player": {
    "name": "Player 4"
  }
}} 
```

这是代码..

```
public static void main(String[] args) {
        Players xstramAliasObject = new Players();
        XStream xstream = new XStream(new JsonHierarchicalStreamDriver());
        xstream.setMode(XStream.NO_REFERENCES);
        xstream.aliasSystemAttribute(null, "class");
        xstream.autodetectAnnotations(true);
        System.out.println("--- "+xstream.toXML(xstramAliasObject));
    } 
```

# ios - iOS 2D 游戏的图形

> ID：11340132
> 
> 赞同：1
> 
> 时间：2012-07-05T07:59:26.317
> 
> 标签：ios, graphics, opengl-es, rendering, 2d

我已经在 App Store 上发布了一个 2D 游戏，但是我注意到当我添加太多对象时，fps 会下降，而且这是一个非常简单的游戏，所以我认为它不应该发生。

所以我认为我没有正确渲染图形。

我应该使用什么，OpenGL ES，Quartz 2D，...？

我一直在阅读苹果关于 OpenGL ES for iOS 的文档，但他们几乎没有提到 2D，所以我不确定它是否可以用于此。

我现在使用 Quartz 2D，（我猜是 UIView、UIImages、UIImageViews），但事实上，我从来没有使用过视图的 drawRect 方法。我在视图的 init 函数中创建图像或图形，如果以后需要修改它们的属性，则将它们保存到变量中。

任何建议、推荐、pdf 将不胜感激！:)

PS：这里是游戏的链接，如果你想对它有更好的了解：http: [//itunes.apple.com/es/app/kipos/id494638587 ?mt=8](http://itunes.apple.com/es/app/kipos/id494638587?mt=8)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T12:53:28.843

我推荐你使用 Cocos2D。它的功能将使您的游戏开发变得更加容易。如果您认为自己已准备好迎接挑战，请尝试使用 OpenGL ES。不过我会警告你：它的学习曲线*非常陡峭。*

# sql-server - SQL Server 比较字符和更新列

> ID：11340133
> 
> 赞同：1
> 
> 时间：2012-07-05T07:59:36.277
> 
> 标签：sql-server, sql-server-2008, tsql

我在一个表中有两列。

```
 x    |    y
  ========|=========
    AMDN  | AMDNOXYZ
    AMDNO | AMNOXYZ 
```

我想比较两列并`y`根据列上的某些条件更新列`x`。如果列`y`中存在 x 列中不存在的字符，则只需删除这些字符而不是整个字符串。这个想法是在两列中逐个字符进行比较。在任何时间点， column`y`中都不能有任何不在column 中的字符，`x`换句话说， column`y`只能是 column 的子集`x`。

所以结果将是

```
 x    |    y
  ========|=========
    AMDN  | AMDN
    AMDNO | AMNO 
```

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T09:06:52.813

这是在 sql server 中创建的一个函数，它将 x 和 y 列作为输入并返回所需的输出

```
create function remove_char(@x_string varchar(500),@y_string varchar(500))
returns varchar(500)
as
begin
    declare @Y  table(autoid int identity,c char(1))
    declare @i int=1;declare @c char(1);
    while(LEN(@y_string)>=@i)
    begin
        select @c=substring(@y_string,@i,1);
        Insert into @Y values(@c)
        select @i=@i+1
    end

    declare @X table(autoid int identity,c char(1))
    set @i=1;
    while(LEN(@x_string)>=@i)
    begin
        select @c=substring(@x_string,@i,1);
        Insert into @X values(@c)
        select @i=@i+1
    end
return( select STUFF(( select ''+c from @Y
 where c in (select c from @X) order by autoid
  FOR XML PATH('')),1,0,'') )
end 
```

例子

`select dbo.remove_char('AMDNO','AMNOXYZ')`

您可以使用此功能来更新您的表格

```
 update <table> set y=dbo.remove_char(x,y) 
```

# web-services - 注入生成的 bean

> ID：11340146
> 
> 赞同：0
> 
> 时间：2012-07-05T08:00:21.367
> 
> 标签：web-services, jakarta-ee, dependency-injection, ejb

让我有一个简单的`@Stateless`会话 bean。(EJB 3.0)

```
 @Stateless
    public class SomeBeanWS implements ISomeBeanWS {  
    // ...  
    } 
```

而且我有许多已经部署在应用服务器上的 Web 服务（也是 bean）。
我有这个服务的 WSDL。
如果这个 WebServices 在我的项目中使用 Maven，我可以生成接口。
我可以将这个 Webserviceces（bean）注入我的`SomeBeanWS`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T08:49:15.233

也许您正在使用 NetBeans，它提供了“从 WSDL 生成 WebService”工具。它帮助我从我的 ManagedBean 中访问外部 WS（通过在`@WebServiceRef`那里使用注释）。仅通过会话 Bean 注入 WS 是行不通的（请参见[此处](https://stackoverflow.com/questions/11305660)）。

编辑说：我找到了解决方案，请点击链接；）

# nginx - NGINX URL 掩码

> ID：11340156
> 
> 赞同：1
> 
> 时间：2012-07-05T08:01:10.257
> 
> 标签：nginx

我们有一个安装了 nginx 的服务器，我们还在服务器上配置了 PHP As FastCGI。除重写规则外，一切正常。我们的要求是屏蔽 URL

例如：- 如果有人在我们的网站上搜索，则出现的 URL 将类似于[http://example.com/search.php?searchword=](http://example.com/search.php?searchword=) $1 ($1=searched word) 。我们需要将客户的 URL 显示为[http://example.com/](http://example.com/) $1.html。

我们将重写规则设置为 rewrite ^/(([a-zA-Z_0-9]|-)+/?)$ /search.php?searchword=$1 break;

该 URL 正在被重定向，但是我们每次都会收到一个未找到文件的错误。我们如何像在 Apache 中那样屏蔽 URL。任何帮助将不胜感激

我们使用的等效 Apache htaccess 规则如下

```
RewriteCond %{REQUEST_URI} !index\.html$ [NC]
RewriteRule ^([a-zA-Z0-9-/]+).html$ search.php?searchword=$1 [L]
RewriteRule ^([a-zA-Z0-9-/]+).html/$ search.php?searchword=$1 [L] 
```

它在 Apache 上运行良好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:02:31.630

您应该将此重写代码放在位置 / 。我已经在我的服务器上对其进行了测试。

```
location / {
    rewrite ^/([a-zA-Z0-9/-]+).html/?$ /search.php?searchword=$1 last;
} 
```

# eclipse - MTJ 1.1.2 插件无法安装在 Eclipse Juno (4.2) 上

> ID：11340158
> 
> 赞同：3
> 
> 时间：2012-07-05T08:01:20.780
> 
> 标签：eclipse, eclipse-plugin, mtj

MTJ（Java 移动工具，Eclipse 的著名 J2ME 插件）1.1.2 无法安装在 Eclipse Juno (4.2) 上。我使用以下更新 url 来安装插件：

```
Mobile Tools For Java - http://download.eclipse.org/mtj/updates/1.1.2/stable/ 
```

但安装失败，出现依赖错误：

> 无法完成安装，因为找不到一项或多项所需项目。正在安装的软件：Mobile Tools for Java 1.1.2.201101310801 (org.eclipse.mtj.feature.group 1.1.2.201101310801) 缺少要求：MTJ Core Plug-in 1.2.1.201101310801 (org.eclipse.mtj.core 1.2.1.201101310801) 需要' bundle org.mortbay.jetty.server [6.1.0,7.0.0)' 但找不到无法满足依赖关系：来自：Mobile Tools for Java 1.1.2.201101310801 (org.eclipse.mtj.feature.group 1.1.2.201101310801 ) 至：org.eclipse.mtj.core [1.2.1.201101310801]

有谁知道这是什么问题？

我试图找到一个包含捆绑包“org.mortbay.jetty.server [6.1.0,7.0.0)”的插件，但没有找到。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T21:04:35.533

如果您阅读这些发行说明，您会发现关键：

[http://docs.oracle.com/javame/dev-tools/jme-sdk-3.2/release-notes/pdf/release-notes.pdf](http://docs.oracle.com/javame/dev-tools/jme-sdk-3.2/release-notes/pdf/release-notes.pdf)

安装 MTJ 工具包。

1.  转到帮助 > 安装新软件。

2.  在“使用”字段中，输入以下 URL：http: [//download.eclipse.org/releases/indigo](http://download.eclipse.org/releases/indigo)

3.  单击添加。发现插件后，打开移动和设备开发工具层次结构并选中 Mobile Tools for Java Examples 和 Mobile Tools for Java SDK。单击下一步。在安装屏幕上选择所有插件，然后单击完成，然后单击确定。

4.  当插件版本高于 6 时，名为 org.eclipse.jetty.server_.jar 的 Juno 插件与 MTJ 库发生冲突。如果是，则必须通过更改其名称来防止加载它，这样 Jar 文件就不会被解析。在 Juno 安装的 \plugins 目录中找到该文件，并将扩展名从 .jar 更改为其他内容。例如，将其更改为：org.eclipse.jetty.server_.old

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-07T18:41:43.387

这是 indigo 更新站点[http://download.eclipse.org/releases/indigo/](http://download.eclipse.org/releases/indigo/)。FFF 是正确的，只需从 indigo 安装插件，它就可以正常工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-28T20:16:47.390

[Oracle 网站上 JAVA ME 页面上的](http://www.oracle.com/technetwork/java/javame/javamobile/download/sdk/index.html)“Eclipse Juno”一章指出：

> 当插件版本高于 6 时，名为 org.eclipse.jetty.server_(version).jar 的 Juno 插件与 MTJ 库发生冲突。如果是，您必须通过更改其名称来阻止它加载，这样 Jar 文件就不会被解析. 例如，将其更改为：org.eclipse.jetty.server.old

为我工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-07T15:59:12.313

添加 indigo repo，它会安装，但如果你需要，仍然不建议使用旧版本

# c# - 列表 objects reference I have List <queueitem>QueueItemList list of objects. I am filtering the objects list by object property Status and assign filtered list to processingList. If I wi 问问题 问问题 2012-07-05T08:01:21.933 2113 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I have List <queueitem>QueueItemList list of objects. I am filtering the objects list by object property Status and assign filtered list to processingList. If I will change object Status property in the QueueItemList list does it will be changed in processingList too? public List <queueitem>GetItems() { lock (Locker) { return QueueItemList.ToList(); } } var processingList = GetItems.Where(p => p.Status== QueueItemStatus.Processing).ToList(); If I will change object Status property in the QueueItemList list does it will be changed in processingList too? Yes, it will, unless QueueItem is a value type (struct). If it is a class then it is a reference type, meaning that both processingList and QueueItemList are pointing to the exact same memory location for their elements. Those variables are just pointers. c#objectgeneric-list 4 4 回答 4 This answer is useful 2 Yes because you are sharing a reference to the same underlying object, assuming of course the item in the list is a class (or other reference type) and not a struct (value type). Do note that you have two independent lists of references, but the references in these lists point to the same set of objects. If you re-assign the entire instance in one list (as in list[0] = new MyClass()), the re-assignment will not occur in the other list, but I cannot envisage a use case for this anyway so it shouldn't be a concern. 于 2012-07-05T08:02:30.503 回答 This answer is useful 2 如果我将更改 QueueItemList 列表中的对象状态属性，它是否也会在 processingList 中更改？ 是的，它会，除非QueueItem是值类型 ( struct)。如果它是 aclass那么它是一个引用类型，这意味着它们processingList和QueueItemList都指向它们元素的完全相同的内存位置。这些变量只是指针。 于 2012-07-05T08:02:28.600 回答 This answer is useful 0 Yes it will changed in processingList too. 于 2012-07-05T08:02:59.303 回答 This answer is useful 0 Yes, you will have N references to the same object. In other words: you will be changing the same object. 于 2012-07-05T08:03:32.510 回答 Related 2 facebook - 如何更改 Facebook 评论 iframe 位置？ 1 windows - 安排运行程序并按顺序单击一些单选按钮和按钮 1 php - 使用 PDO Wrapper 时出现错误 PHP 结束 2 primes - 求解一个包含三个未知素数的方程 2 javascript - 在本地存储中保存一个函数 1 java - Android：连续获取日志 1 javascript - 重新定义对最顶层窗口的引用 (window.top) 2 osx-lion - 在 Mountain Lion 下分发应用程序 2 php - IIS URL 重写 - 无需递归重写即可重定向到特定页面的任何 url 请求 1 php - 如何在另一个 var 中使用 smarty var？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</queueitem></queueitem></queueitem>

> ID：11340159
> 
> 赞同：1
> 
> 时间：
> 
> 标签：c#, object, generic-list

I have `List<QueueItem> QueueItemList` list of objects. I am filtering the objects list by object property `Status` and assign filtered list to `processingList`. If I will change object `Status` property in the QueueItemList list does it will be changed in `processingList` too?

```
 public List<QueueItem> GetItems()
        {
            lock (Locker)
            {
                return QueueItemList.ToList();
            }
        }

var processingList = GetItems.Where(p => p.Status== QueueItemStatus.Processing).ToList(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T08:02:30.503

Yes because you are sharing a **reference** to the **same underlying object**, *assuming* of course the item in the list is a `class` (or other reference type) and not a `struct` (value type).

Do note that you have two independent lists of references, but the references in these lists point to the same set of objects.

If you re-assign the entire instance in one list (as in `list[0] = new MyClass()`), the re-assignment will not occur in the other list, but I cannot envisage a use case for this anyway so it shouldn't be a concern.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T08:02:28.600

> 如果我将更改 QueueItemList 列表中的对象状态属性，它是否也会在 processingList 中更改？

是的，它会，除非`QueueItem`是值类型 ( `struct`)。如果它是 a`class`那么它是一个引用类型，这意味着它们`processingList`和`QueueItemList`都指向它们元素的完全相同的内存位置。这些变量只是指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T08:02:59.303

Yes it will changed in processingList too.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T08:03:32.510

Yes, you will have *N* references to the same object. In other words: you will be changing the same object.

# c# - 获取我的应用程序的硬件要求

> ID：11340160
> 
> 赞同：0
> 
> 时间：2012-07-05T08:01:25.433
> 
> 标签：c#, memory-management, benchmarking

有没有办法让我获得我的应用程序所需的内存量和处理器能力。我最近有一个非常不愉快的经历，当我的一个应用程序一直冻结它正在运行的计算机时。这显然与缺乏硬件能力有关，因为它在我用于测试目的的更强大的计算机上完美运行，应用程序运行良好。所以我的问题是 - 有没有办法计算顺利运行应用程序所需的硬件功率？几乎我所有的应用程序都是用 C# 完成的，所以我需要一种可以与这种类型的应用程序一起使用的方法。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T08:07:27.973

> 这显然与硬件实力不足有关

这完全取决于您的应用程序在做什么。如果您以“不那么省时的方式”解决问题，那么您可以优化代码。

我建议您使用[profiler](https://stackoverflow.com/questions/3927/what-are-some-good-net-profilers)分析您的代码。

这会告诉你：

*   您的代码的哪些部分占用了大部分 RAM/CPU
*   您的应用程序在窥视时总共需要多少 RAM
*   CPU消耗信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T08:11:02.817

> 这显然与缺乏硬件能力有关，因为它在我用于测试目的的更强大的计算机上完美运行，

任何设置测试的人都应该被解雇。

您必须拥有一组与应用程序将在其中运行以进行测试的计算机相似的计算机。这是 20 年前公认的做法 - 似乎现代并不关心这一点。

说真的，您需要有一个代表您接受的最低硬件级别的测试集。

否则 - 不，对不起，没有魔术按钮。探查器不一定有帮助（调试，探查器可能会使用更多内存）。试试探查器。优化代码。但最后......你需要有一个像样的测试平台。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T08:10:53.443

我认为这应该在软件安装期间进行检查。稍后，如果提示用户更新他/她的硬件并忽略警告，您不应该关心这一点。

如果您使用的是 Windows Installer (MSI)，则可以使用自定义操作并使用`System.Management`类来检测您想要的任何内容。

# actionscript-3 - 在 Flash AS3 中嵌入 youtube

> ID：11340163
> 
> 赞同：0
> 
> 时间：2012-07-05T08:01:41.317
> 
> 标签：actionscript-3, flash-cs5, youtube-api

我已经设法使用 YouTube ActionScript 3.0 Player API [https://developers.google.com/youtube/flash_api_reference](https://developers.google.com/youtube/flash_api_reference)在 Flash 中嵌入了一个 youtube 视频。

它工作正常，但我需要一些额外的功能。我在一帧上有多个视频，所以我想做的第一件事是

1.  如果 VIDEO 1 正在播放并且我单击 VIDEO 2，我希望 VIDEO 1 停止。
2.  我希望任何正在播放的视频在我离开框架时都停止。

关于后者，我知道我可以创建一个导航按钮并添加 player.stopVideo(); 它的功能但它变得更加复杂，因为 SWF 位于（可怕的）翻书应用程序之一中，因此导航由翻书应用程序控制，而不是包含视频的实际 SWF。

我上面的2个问题有什么解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T08:09:54.330

您可以为您的视频添加一个[事件监听器。](https://developers.google.com/youtube/flash_api_reference#Adding_event_listener)*onStateChange*事件应该可以帮助您：

> 可能的值是未开始 (-1)、结束 (0)、播放 (1)、暂停 (2)、缓冲 (3)、视频提示 (5)。

您可以使用以下方法开始另一个视频：

```
player.playVideo() 
```

# java - 将 *.so 文件加载到 Websphere

> ID：11340164
> 
> 赞同：6
> 
> 时间：2012-07-05T08:01:43.120
> 
> 标签：java, jsp, web-applications, websphere, hsm

我的 JSP 程序设置为在 HP-UX 下的 Websphere 上运行。

我有一些 .jar 文件和一个 .so 文件，其中包含我的程序需要运行的类。

通过将我的 .jar 文件放入`\MyProgram\WEB-INF\lib\`文件夹中，我能够得到一些工作。

但是，我看到`UnsatisfiedLinkError`这是由于我的 lib.so 文件未被识别造成的。

我发现的方法之一是：

1.  在管理控制台中，转到环境 -> 共享库 -> 新建

2.  在 Classpath 中输入 .jar 文件位置，在 Native Library Path 中输入 .so 文件位置

3.  在管理控制台中，转到应用程序 -> 应用程序类型 -> 企业应用程序

4.  在 MyProgram -> Shared library references -> Shared Library Mapping 下，通过将库从 Available 移动到 Selected 将库分配给程序。

我有两个问题：

1.  我可以从我的程序`\lib\`文件夹中获取 .jar 文件和 .so 文件吗？

2.  如果我不能，是否可以从我的应用程序文件夹中列出类路径和本机库路径？像使用 websphere 变量目录上传我的 application.war`%MYPROGRAM%\WEB-INF\lib\lib.so`而不是使用绝对路径将文件放在物理服务器中`C:\IBM\WebSphere\AppServer\bin\lib.so`？

[EDIT-01] 更多详情如下：

> 收到错误：“错误 500：java.lang.UnsatisfiedLinkError：com.chrysalisits.crypto.LunaAPI.Initialize()V”

I am trying to get Websphere to interface with LunaSA HSM to retrieve public/private keys. They have provided me with: *libLunaAPI.sl, libLunaAPI.so, LunaJCASP.jar, LunaJCESP.jar*. From IBM's Websphere V8 -> References -> Class Loading Exceptions, it indicates that I need the *.so file for HP-UX so I did that [accordingly](http://i49.tinypic.com/292u445.jpg). The path set are absolute paths which I have specified in the Websphere. This relates to my second question.

第一个问题是我实际上想知道是否可以将这些文件放入 myProgram.war 并从那里运行，而不是使用 WinSCP 访问服务器并将文件放在那里以获取绝对路径引用。也许指定上述文件位于我的程序中，而不是在 \WEB-INF\lib\ 下。这是因为只有我的这个程序才能访问 LunaSA HSM。

** PS。我尝试了这两种方法，但仍然失败。叹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:10:00.233

对于共享库实现，我相信您只指定Native Library Path 中的*目录，而不是**文件名*。也就是说，使用您当前的文件位置，`/opt/apps/WebSphere/AppServer/bin`.

另一方面，我希望该目录已经在 WebSphere 的`WAS_LIBPATH`and`SHLIB_PATH`中，因此根本没有必要列出它。（检查`$WAS_HOME/bin/setupCmdLine.sh`。）

但是，我认为最好在某处为您的 luna 文件创建一个子目录，然后将您的共享库本机库路径指向该目录。

# vb.net - 哪些 Unicode 字符是“组合”字符（其唯一目的是添加重音，tilda）？

> ID：11340166
> 
> 赞同：0
> 
> 时间：2012-07-05T08:02:02.763
> 
> 标签：vb.net, unicode

这与

[在 UTF8 Unicode 的排序规则下，哪些字符算作同一字符？什么 VB.net 函数可以用来合并它们？](https://stackoverflow.com/questions/9834300/what-are-the-characters-that-count-as-the-same-character-under-collation-of-utf8)

这就是我计划这样做的方式：

使用[http://msdn.microsoft.com/en-us/library/dd374126%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/dd374126%28v=vs.85%29.aspx)将字符串变成

KD 形式。

基本上它会将大多数变化（例如上标）转换为正常数字。它还将 tilda 和重音分解为 2 个字符。

下一步将删除所有唯一目的是 tildaing 或重音字符的字符。

我怎么知道哪些角色是这样的？哪些字符只是“组合字符”

我如何找到这样的字符？找到这些后，我该如何摆脱它？我应该逐个字符扫描并删除所有这些“组合字符”吗？

例如： 300 到 362 的字符可以去掉。

然后呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T15:06:33.537

组合字符在[UnicodeData.txt](ftp://ftp.unicode.org/Public/UNIDATA/UnicodeData.txt)中列为具有非零 Canonical_Combining_Class 和`Mn`(Mark, nonspacing) 的 General_Category。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T14:06:42.670

对于字符串中的每个字符，调用[GetUnicodeCategory](http://msdn.microsoft.com/en-us/library/a91e3zb6.aspx)并检查[UnicodeCategory](http://msdn.microsoft.com/en-us/library/system.globalization.unicodecategory.aspx)中的 NonSpacingMark、SpacingCombiningMark 或 EnclosureMark。

您可以使用正则表达式更有效地做到这一点，例如`Regex.Replace(str, "\p{M}", "")`.

# database - 包含模块化页面内容的数据库或文件类型？

> ID：11340167
> 
> 赞同：0
> 
> 时间：2012-07-05T08:02:05.620
> 
> 标签：database, database-design, web

我正在建立一个个人网站，但在规划我的数据库结构时遇到了问题。

我有一个投资组合页面，每件艺术品都有自己的描述页面。

所以我需要将内容保存在文件或数据库中。

描述页面有一些指导方针，

但是元素的**长度**、**数量**和**顺序**是*自由*的。

例如，一个页面可能只有一个或多个段落，

并且在每个段落中，可以混合许多素材代码和文本块。

**问题是：**

![在此处输入图像描述](../Images/d74ef615877c4d7c1036dc5c936ee814.png)

（我做了一个简单的图表来描述我的需求）。

我可以为我的数据类型选择什么来保存保持顺序的内容结构？

我习惯了 XML，我知道 XML 可以是一种选择，但是如果内容很大，它会很难阅读并且速度很慢。

这些天我听说JSON替代了XML，但是当我搜索时，JSON不能保持元素的顺序，可以吗？

等待聪明的建议：）谢谢。

# visual-studio - Windows 7 中的拖放操作无法在管理员模式下工作

> ID：11340174
> 
> 赞同：0
> 
> 时间：2012-07-05T08:02:34.897
> 
> 标签：visual-studio, visual-c++, mfc

**问题**

我有一个奇怪的问题。我在 MFC（使用 VS2003）中编写了一个应用程序来处理文件/文件夹的“拖放”。当我在管理员模式下运行应用程序时，DnD 会被拒绝，但会以其他方式工作（当我不选择在管理员模式下运行时）。

**解决方法**

我尝试了几种方法：

[http://helgeklein.com/blog/2010/03/how-to-enable-drag-and-drop-for-an-elevated-mfc-application-on-vistawindows-7/](http://helgeklein.com/blog/2010/03/how-to-enable-drag-and-drop-for-an-elevated-mfc-application-on-vistawindows-7/)

[http://www.cdartdisplay.com/forum/showpost.php?p=12302&postcount=13](http://www.cdartdisplay.com/forum/showpost.php?p=12302&postcount=13)

[http://forums.codeguru.com/showthread.php?499909-MFC-Drag-and-Drop-works-on-XP-broken-on-Vista-Windows-7-(](http://forums.codeguru.com/showthread.php?499909-MFC-Drag-and-Drop-works-on-XP-broken-on-Vista-Windows-7-%28)

他们都没有为我工作。

**开发工具详情**

IDE：Visual Studio 2003 版本 7.1.3088 操作系统：Windows 7 Professional（64 位）

请建议我解决它的解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T17:11:55.643

Windows 资源管理器和 Windows 做了很多技巧。启用所有消息：

```
ChangeWindowMessageFilter (WM_DROPFILES, MSGFLT_ADD);
ChangeWindowMessageFilter (WM_COPYDATA, MSGFLT_ADD);
ChangeWindowMessageFilter (0x0049, MSGFLT_ADD); 
```

来自： [http ://social.msdn.microsoft.com/Forums/en-US/windowsuidevelopment/thread/2fa935cf-be57-4bcc-9b96-7ee5a6b2b7a5/](http://social.msdn.microsoft.com/Forums/en-US/windowsuidevelopment/thread/2fa935cf-be57-4bcc-9b96-7ee5a6b2b7a5/)

# php - 从mysql表中选择3行，然后获取每一行的特定列

> ID：11340177
> 
> 赞同：1
> 
> 时间：2012-07-05T08:02:52.557
> 
> 标签：php, mysql

1.  从 table1 中选择 3 行

2.  从每一行中获取特定的列数据。

3.  然后使用获得的每一列数据，再次查询从table2中获取数据。

4.  将步骤 4 中获得的数据存储到每行的变量中。

5.  然后将它们放入 json 数组（表 1，3 行 + 表 2 的数据（每个）。

我正在构建一个排名表，它显示排名前 3 的用户及其排名名称。例如：用户1有2000点，用户2有4000点，用户3有10k点，所以前3名用户是： **用户3>用户2>用户1**

所以，我希望 php 转到“用户”表并使用以下方法获取前 3 名成员：

```
$query = mysql_query("SELECT * FROM users ORDER BY pts DESC LIMIT 3");
$rows = array();
while($r = mysql_fetch_assoc($query)) {
   $rows[] = $r;
} 
```

**' user** ' 的表结构：
1.username(varchar)
2.pts(int)

将行放入数组后，如何为该数组中的每一行获取“点”。然后去'**等级**'表得到他们的**等级名称**。

**' rank** ' 的表结构：
1.rank(varchar)
2.pts(int)

在**排名表中有'pts'**让php根据数组每一行的点来选择比较用户所处的排名。

通常，如果它仅用于 1 个用户，我会使用它，但对于多个用户，我不确定：

```
$result = mysql_query("SELECT * FROM rank WHERE pts <= '$upts' ORDER BY pts DESC LIMIT 1")
              or die(mysql_error()); 
```

然后在获得前 3 名用户的排名后，php 现在会将排名添加到该数组中的每个用户（行）（当然，将其添加到排名所有者，而不仅仅是简单地放入）。

然后 JSON 编码出来。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T08:51:34.443

我不确定这是否是你想要的。也就是将两个查询合并为一个查询。请看一下[http://sqlfiddle.com/#!2/ad419/8](http://sqlfiddle.com/#!2/ad419/8)

```
SELECT user.username,user.pts,rank.rank 
FROM user LEFT JOIN rank 
ON user.pts <=rank.pts group by user.id 
```

更新：

对于提取前 3 名，可以执行以下操作；

```
SELECT user.username,user.pts,rank.rank 
FROM user LEFT JOIN rank 
ON user.pts <=rank.pts 
GROUP BY user.id 
ORDER BY pts DESC LIMIT 3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T08:09:06.967

如果我理解正确，您需要从 Rank 和 Users 表中获取值。为了在一个查询中执行此操作，您需要将 FK（外键）添加到指向用户表中特定用户的排名表。

因此，您需要将 userId 添加到 Rank 表中，然后您可以运行：

```
SELECT r.rank, u.points from users u,rank r where u.userId = r.userId 
```

这大致就是你需要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T08:11:16.840

不完全是您确切问题的答案，但这可能对您有用：[How to get rank using mysql query](http://thinkdiff.net/mysql/how-to-get-rank-using-mysql-query/)。甚至可能意味着您不需要排名表。如果这没有帮助，我会稍后再检查。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T08:59:39.727

使用此查询

```
$query = "SELECT
u.pts,
r.rank
FROM users as u
left join ranks as r
on r.pts = u .pts
ORDER BY pts DESC
LIMIT 3"; 
```

这将带来您需要的东西，而无需放入数组

```
 $rec = mysql_query($query);
   $results = arrau(); 
   while($row = mysql_fetch_row($rec)){
        $results[] = $row;
   }

   echo json_encode($results); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-05T09:44:12.747

看起来您正在尝试做的是检索用户实际满足的最高点要求的排名，这并不是其他人在这里给出的。幸运的是，使用一个不错的小技巧很容易在单个查询中做到这一点：

```
SELECT 
user.username,
SUBSTRING_INDEX(GROUP_CONCAT(rank.rank ORDER BY pts DESC),",",1) AS `rank`
FROM user 
LEFT JOIN rank ON user.pts >= rank.pts 
GROUP BY user.id 
ORDER BY pts DESC 
LIMIT 3 
```

基本上，第二位正在做的是生成用户已达到的所有等级的列表，按点的降序对它们进行排序，然后选择第一个。

如果您的任何等级名称中有逗号，那么我们需要添加另一个小调整，但我不会想到他们会，所以我把它省略了以保持简单。

# jquery - 如何在 JQuery 数据表中显示自定义处理消息

> ID：11340182
> 
> 赞同：2
> 
> 时间：2012-07-05T08:03:13.170
> 
> 标签：jquery, asp.net, jquery-plugins, datatables, message

我正在使用 datatables api 在我的 asp.net4.0 应用程序中显示数据；

[**数据表**](http://datatables.net)

我有一列 [删除] 来删除行数据。当我单击此链接时，我发送一个 jquery ajax 请求以从数据库中删除该行。我想向最终用户显示诸如[删除记录...]之类的消息，直到数据被服务器端处理删除。

我在我的页面上放了一个 div 并在 div 中写了一条消息 [删除记录...]，当我单击删除链接时我会显示该消息，但是当删除操作完成时它也会显示一条消息 [处理中...]（这是数据表的内置消息）在显示两条消息时看起来很奇怪。

我能做些什么更好地向最终用户显示消息。

**JS代码**

```
$('#tblVideoList .delete').live('click', function (e) {
    e.preventDefault();
    var oTable = $('#tblVideoList').dataTable();
    var aPos = oTable.fnGetPosition(this.parentNode);
    var aData = oTable.fnGetData(aPos[0]);

    if (confirm('Are you sure want to delete the record.')) {
        $("#divDelete").show();
        var today = new Date();
        $.ajax({
            type: "GET",
            cache: false,
            url: "samplepage.aspx",
            success: function (msg) {
                $("#divDelete").hide();
                oTable.fnDraw();
            }
        });
    }
    return false;
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T20:21:56.580

您可以通过以下方式更改处理文本：

```
 $('#example').dataTable( {
        "oLanguage": {
           "sProcessing": "Deleting record..."
         }
    }); 
```

但是您总是可以找到处理 div，替换文本并手动显示。

# sip - 如何让 kamailio 支持 Edge Proxy？

> ID：11340190
> 
> 赞同：1
> 
> 时间：2012-07-05T08:03:56.990
> 
> 标签：sip, voip, sip-server, kamailio

正如 RFC [http://www.rfc-editor.org/rfc/rfc5626.txt](http://www.rfc-editor.org/rfc/rfc5626.txt)所描述的，我如何通过 Kamailio 扩展边缘代理？我应该写一个模块，还是只写配置文件？

有没有人做过，可以给点建议。

谢谢 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T10:27:27.150

您可以使用已配置的实例 - [SipWise](http://www.sipwise.com/products/spce/)。

它是免费的，它是基于 Kamailo 的，它在 /etc/ngcp-config/templates/etc/kamailio/lb/kamailio.cfg.tt2 有一个充当负载平衡器的边缘代理，它可以作为设备使用并且需要最少的配置步骤使用基本功能运行它。

您可以直接使用它，也可以在某个地方运行它并查看配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T09:11:49.050

为什么要写模块？Edge 代理几乎是`REGISTER`s 的 SIP 代理。

您可以仅通过配置路由来完成此操作。

# javascript - Dojo/on 和捕获阶段

> ID：11340194
> 
> 赞同：4
> 
> 时间：2012-07-05T08:04:16.533
> 
> 标签：javascript, dojo, dom-events

有没有办法使用 dojo/on 在捕获阶段（而不是冒泡阶段）触发事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T18:40:35.170

我最终在这里寻找有关 on() 的前身 - dojo.connect() 的信息。对于它的价值， dojo.connect() 似乎不支持捕获阶段的事件侦听器。它通过将事件处理程序作为字段添加到 DOM 节点来工作，例如，`node["mouseclick"] = ...`由于您必须使用 addEventListener 在捕获阶段接收事件，所以我的推论是 dojo.connect() 无法做到。

您可以做的是将一些事件侦听器添加到 dom 节点上的自定义对象，然后在这些处理程序上使用 dojo.connect()。

```
<html>
<head>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/dojo/1.6.1/dojo/dojo.xd.js.uncompressed.js"></script>
    <script type="text/javascript">
        function forwardCaptureEvent(e) {
            var listener = this.captureEventHandlers[e.type];
            if (listener != null) listener.apply(this, arguments);
        }

        function enableCaptureEvent(domNode, eventType) {
            if (domNode.captureEventHandlers == null) domNode.captureEventHandlers = {};
            var evtHandlers = domNode.captureEventHandlers;
            if (evtHandlers[eventType] == null) evtHandlers[eventType] = function(e) {};
            domNode.addEventListener(eventType, forwardCaptureEvent, true);
        }

        function logEvent(label, e) {
            dojo.byId("log").innerHTML += label + " " + e.currentTarget.id + " " + e.type + " " + [ '', 'capturing', 'target', 'bubbling' ][ e.eventPhase ] + "<br/>";
        }

        function logCaptureEvent(e) { 
            logEvent("capture phase:", e);
        }

        function logBubbleEvent(e) { 
            logEvent("bubble phase:", e);
        }

        window.onload = function () {
            enableCaptureEvent(dojo.byId("test"), "click");
            dojo.connect(dojo.byId("test").captureEventHandlers, "click", logCaptureEvent);
            dojo.connect(dojo.byId("test"), "click", logBubbleEvent);
        }
    </script>
</head>
<body>
    <div id="test" style="background: darkorange; padding: 20px;">
        <div style="background: gold; padding: 20px;">
            <div style="background: cornsilk; ">Click me.</div>
        </div>
    </div>

    <div id="log"></div>
</body>
</html> 
```

所以这里是我`enableCaptureEvent`的`forwardCaptureEvent`辅助函数。`enableCaptureEvent`在我所说的 DOM 节点上创建捕获事件侦听器的自定义对象，然后`forwardCaptureEvent`用于实际接收捕获事件并将它们转发给这些侦听器。

然后要使用这些帮助程序，您需要`enableCaptureEvent`使用 DOM 节点和要连接的事件的名称进行调用。然后连接到它，你连接到 DOM 节点上的自定义对象，我称之为“captureEventHandlers”。这就是我在`onload`处理程序中所做的。我也在做一个正常`dojo.connect`的显示这不会干扰捕捉正常的气泡事件。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-05T09:38:14.167

是的，有可能，您可以使用方面。 [http://livedocs.dojotoolkit.org/dojo/aspect](http://livedocs.dojotoolkit.org/dojo/aspect)

尤其是之前或前后;）

前

> 该模块还包括一个 before 函数，它为方法提供之前的建议。提供的通知函数将在调用 main 方法之前被调用。before 函数的签名是：

```
before(target, methodName, advisingFunction); 
```

# php - php exit 在函数中做了什么？

> ID：11340196
> 
> 赞同：3
> 
> 时间：2012-07-05T08:04:21.790
> 
> 标签：php

你好我有这个功能

```
function fail($pub, $pvt = '')
{
    global $debug;
    $msg = $pub;
    if ($debug && $pvt !== '')
        $msg .= ": $pvt";

    $_SESSION['msg'] = $msg;
    header ("Location: /voting/"); 
    exit;
} 
```

该页面应该在到达退出命令之前重定向吗？但是，如果没有 exit 命令，该功能将无法正常工作（即使它应该已经重定向，它也会继续运行）。如果有人知道，您能否解释为什么如果函数没有退出，即使在这两种情况下它都会重定向，代码为什么会继续？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T08:07:02.560

浏览器在脚本结束后收到整个响应后才会重定向，而 PHP 脚本*当然*不会在浏览器重定向时停止，因此在浏览器应该重定向时结束脚本是最好的做法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-05T08:12:47.723

'header' 函数在最终输出中添加了一个标头，该标头将发送到浏览器，因此重定向实际上发生在客户端。这就是为什么您可以在“重定向”之前继续执行代码的原因。'exit' 构造（不是函数）是为了避免这种情况。

从[php 文档](http://php.net/manual/en/function.header.php)：

```
<?php
header("Location: http://www.example.com/"); /* Redirect browser */

/* Make sure that code below does not get executed when we redirect. */
exit;
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T08:07:21.997

是的，但是退出至关重要。

由于可以强制显示页面的其余部分，如果有人只是选择忽略该文件的标头响应，则退出只是确保它之后没有其他内容，否则 .php 仍会处理页面的其余部分，并输出之后的任何内容。

出口; 是 die() 的别名，它终止脚本的执行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T08:17:39.137

终止脚本的执行。即使调用了 exit ，也将始终执行[关闭函数](http://www.php.net/manual/en/function.register-shutdown-function.php)和[对象析构函数。](http://www.php.net/manual/en/language.oop5.decon.php#language.oop5.decon.destructor)exit 是一种语言结构，如果没有传递任何状态，则可以不带括号调用它。

```
$filename = '/path/to/data-file';
$file = fopen($filename, 'r')
    or exit("unable to open file ($filename)"); 
```

[http://php.net/manual/en/function.exit.php](http://php.net/manual/en/function.exit.php)

# ios - UIActivityIndi catorView 不显示在 UItableViewcell

> ID：11340197
> 
> 赞同：0
> 
> 时间：2012-07-05T08:04:23.357
> 
> 标签：ios, uiactivityindicatorview

在里面

```
(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

if(indexPath.row==[self.peopleDataController countOfList]){

    static NSString *CellIdentifier = @"LastMoreCell"; 
    UITableViewCell *cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] ;
    moreButton = [[UIButton alloc] initWithFrame:CGRectMake(140, 2, 42, 42)];

    [moreButton setImage:[UIImage imageNamed:@"more.png"] forState:UIControlStateNormal];

    [moreButton addTarget:self action:@selector(showMoreRows:) forControlEvents:UIControlEventTouchUpInside];

    [cell addSubview:moreButton];
    return cell;
}
 }

-(void) showMoreRows:(id)sender {

    MyAuraAppDelegate *delegate = (MyAuraAppDelegate *) [[UIApplication sharedApplication] delegate];
refreshlast = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];

refreshSpinner.hidesWhenStopped = YES;

refreshlast.center = CGPointMake([[sender superview] superview].bounds.size.width / 2.0f, [[sender superview] superview].bounds.size.height / 2.0f);
[sender setHidden:YES];

[[sender superview].superview addSubview: refreshSpinner];
[refreshlast startAnimating];

    dispatch_queue_t dloadQueue = dispatch_queue_create("People refresh", NULL);
    dispatch_async(dloadQueue, ^{

        if ([[[GlobalVariable sharedInstance] peopleList] count] >0) {

            _peopleDataController = [_peopleDataController initPeopleListWithCoordinate:delegate.locationCoordinate2D auraId:delegate.myToken offset:0];

            NSLog(@"eerrrr %d",_peopleDataController.peopleList.count);

            //     _peopleDataController.peopleList=[[GlobalVariable sharedInstance] peopleList];
            for (int i=0; i< [_peopleDataController.peopleList count]; i++) {
                [[[GlobalVariable sharedInstance] peopleList ] addObject:[_peopleDataController.peopleList objectAtIndex:i]];                
            }

            _peopleDataController.peopleList =[[GlobalVariable sharedInstance] peopleList] ;
            NSLog(@"eerrr33r %d",_peopleDataController.peopleList.count); 
        }

        dispatch_async(dispatch_get_main_queue(), ^{  
            [self performSelector:@selector(addItem) withObject:nil afterDelay:2.0];
        });  
    });
    dispatch_release(dloadQueue); 
```

}

但我的 `UIActivityIndicatorView`刷新最后没有显示，你能给我一些线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T08:31:30.567

我发现我的错误是：[sender superview].superview 是 tabview 而不是 tableviewcell 所以最后我修改了我的代码：

```
-(void) showMoreRows:(id)sender {

UIButton *button=(UIButton*)sender;
    MyAuraAppDelegate *delegate = (MyAuraAppDelegate *) [[UIApplication sharedApplication] delegate];
refreshlast = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];

refreshSpinner.hidesWhenStopped = YES;

UITableViewCell *lastcell=(UITableViewCell*)[button superview];

refreshlast.center = CGPointMake(lastcell.frame.size.width / 2.0f, lastcell.frame.size.height / 2.0f);
NSLog(@"ddd %f",lastcell.frame.size.height);
[button setHidden:YES];

[lastcell addSubview:refreshlast];
[refreshlast startAnimating];

    dispatch_queue_t dloadQueue = dispatch_queue_create("People refresh", NULL);
    dispatch_async(dloadQueue, ^{

        if ([[[GlobalVariable sharedInstance] peopleList] count] >0) {

            _peopleDataController = [_peopleDataController initPeopleListWithCoordinate:delegate.locationCoordinate2D auraId:delegate.myToken offset:0];

            NSLog(@"eerrrr %d",_peopleDataController.peopleList.count);

            //     _peopleDataController.peopleList=[[GlobalVariable sharedInstance] peopleList];
            for (int i=0; i< [_peopleDataController.peopleList count]; i++) {
                [[[GlobalVariable sharedInstance] peopleList ] addObject:[_peopleDataController.peopleList objectAtIndex:i]];                
            }

            _peopleDataController.peopleList =[[GlobalVariable sharedInstance] peopleList] ;
            NSLog(@"eerrr33r %d",_peopleDataController.peopleList.count);

        }

        dispatch_async(dispatch_get_main_queue(), ^{  

            [self performSelector:@selector(addItem) withObject:nil afterDelay:2.0];
        }); 

    });
    dispatch_release(dloadQueue); 
```

}

# sockets - recv - 它什么时候开始丢弃未处理的数据包？

> ID：11340200
> 
> 赞同：1
> 
> 时间：2012-07-05T08:04:29.717
> 
> 标签：sockets, recv

我们使用[recv(2)](http://linux.die.net/man/2/recv)来侦听网络管理应用程序中的传入 ICMP 数据包，其中有一个状态轮询功能来 ping 所有托管主机。

在生产环境中，托管主机的数量可能会变得非常大（超过 1,000 台），此时，当执行所述状态轮询时，我们会按顺序发送所有 ping 请求，中间不会有任何延迟。

显然，这将导致几乎同时发回许多 ping 回复，并且我们的调度例程似乎无法跟上。这似乎导致数据包被丢弃，并且我们的应用程序实际上从未收到过 ping 回复。我们相信是因为许多主机被错误地检测为“不可用”。

调度程序除了将收到的回复添加到各种“收件箱”之外，什么也不做，稍后由另一个线程处理，即它不会花费太多时间并且可能无法进一步优化。

recv 使用的内部数据包缓冲区（在内核中？在网络硬件中？）是否有可能填满并开始丢弃数据包？如果是这样，是否有一种好方法来确定可以安全执行的合理最大同时 ping 数量（即通过从操作系统获取缓冲区大小）？

# java - JLabel 根本没有出现？

> ID：11340201
> 
> 赞同：-1
> 
> 时间：2012-07-05T08:04:29.967
> 
> 标签：java, swing, user-interface, jlabel

所以这是我为这个项目发表的第三篇文章，希望是最后一篇。因此，当我的程序在其他课程中进行数学运算时，它需要出现在 JLabel 中。问题是，它没有出现。可能你们中的一个可以帮助我吗？抱歉，当我发布它时，代码会被 f'ed up，我无法修复它。

```
import java.awt.Color;

import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;

public class AFA {

    public void answer() {
        System.out.println("1");
        int area = (int) (AF.length * AF.width);

        String an = String.valueOf(area);

        JFrame answer = new JFrame();

        answer.setBackground(Color.yellow);
        JPanel pan2 = new JPanel();
        JLabel a = new JLabel("The answer is " + an + "We got this by multiplying the Lenght by the width");
        pan2.add(a);
        System.out.println("1");
        answer.setVisible(true);            
    }    
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T08:07:13.450

您从未将面板添加到框架中。添加以下行应该可以解决此问题。

```
answer.setContentPane(pan2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T08:09:25.723

您可以尝试使用 JPanel 的`revalidate()`和`repaint()`方法。 [这个](https://stackoverflow.com/questions/1097366/java-swing-revalidate-vs-repaint)问题可能会提供更多信息。

# python-3.x - python3形式化替代

> ID：11340203
> 
> 赞同：3
> 
> 时间：2012-07-05T08:04:37.690
> 
> 标签：python-3.x, sqlalchemy, formalchemy

Python3.2 是否有 FormAlchemy 替代品？我对将它与 Pyramid 结合使用特别感兴趣。

我在设置 FormAlchemy1.3.3 时遇到语法错误，因此它们的最新版本不兼容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T20:09:08.313

在撰写本文时，没有

# jquery - Zend Framework Jquery 可排序

> ID：11340214
> 
> 赞同：0
> 
> 时间：2012-07-05T08:05:37.157
> 
> 标签：jquery, zend-framework, jquery-ui-sortable, zendx

我一直在尝试让 JQuery Sortable 在我的 Zend Framework 应用程序上工作，但只取得了有限的成功。我一直在使用 ZendX 库来实现我需要的大部分 Jquery 功能，例如 datepicker，并且这些功能非常好。ZendX 库不支持我似乎无法排序。

至于代码。在我的引导程序中，我根据使用定义了 Jquery 等的辅助路径：

```
protected function _initViewHelpers()
    {
        $view = new Zend_View();        
        $view->addHelperPath('ZendX/JQuery/View/Helper/', 'ZendX_JQuery_View_Helper');
        $view->jQuery()->setLocalPath('http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')
                       ->setUiLocalPath('http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/jquery-ui.min.js')
                       ->addStylesheet('http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/themes/smoothness/jquery-ui.css');
        $viewRenderer = Zend_Controller_Action_HelperBroker::getStaticHelper('ViewRenderer');
        $viewRenderer->setView($view);
        Zend_Controller_Action_HelperBroker::addHelper($viewRenderer);
    } 
```

然后我使用在布局中激活 JQuery`echo $this->jQuery()->enable();`

现在一切正常，日期选择器正常工作，它显示了预期的平滑度设计等。

现在，我在 index.phtml 中实现了一个带有简单可排序脚本的小列表，如下所示：

```
<!DOCTYPE html>
<html>
<head>

  <script>
  $(document).ready(function() {
    $("#sortable").sortable();
  });
  </script>
</head>
<body style="font-size:62.5%;">

<ul id="sortable">
<li>Item 1</li>
<li>Item 2</li>
<li>Item 3</li>
<li>Item 4</li>
<li>Item 5</li>
</ul>

</body>
</html> 
```

我可以让它工作的唯一方法是添加该行

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/jquery-ui.min.js"></script> 
```

到 index.phtml。这对我来说看起来就像它得到的一样荒谬。在引导程序中我已经添加了这个脚本，那么为什么我必须再次这样做才能让排序工作？

有人碰巧有解决我的问题的方法吗？

任何建议将被认真考虑 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T08:19:00.230

您能否尝试以下代码方法：-

```
protected function _initView()
{
    $view = new Zend_View();
    $view->doctype('XHTML1_STRICT');
    $view->headMeta()->appendHttpEquiv('Content-Type', 'text/html;charset=utf-8');
    $view->headTitle()->setSeparator(' - ');
    $view->headTitle('IMR - BI System');
    $view->env = APPLICATION_ENV;
    $view->baseUrl = Zend_Registry::get('config')->root_path;

    $view->addHelperPath("ZendX/JQuery/View/Helper", "ZendX_JQuery_View_Helper");
    $view->jQuery()->addStylesheet('http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/themes/smoothness/jquery-ui.css');
    $view->jQuery()->setLocalPath('http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js');
    $view->jQuery()->setUiLocalPath('http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/jquery-ui.min.js');
    $view->jQuery()->enable();
    $view->jQuery()->uiEnable();
    $viewRenderer = new Zend_Controller_Action_Helper_ViewRenderer();
    $viewRenderer->setView($view);
    Zend_Controller_Action_HelperBroker::addHelper($viewRenderer);

    return $view;
} 
```

希望这会有所帮助:)

# shell - 将换行符翻译成逗号

> ID：11340215
> 
> 赞同：5
> 
> 时间：2012-07-05T08:05:40.067
> 
> 标签：shell, sed, awk, grep

我有一个包含大约 150 到 200 个文件名的文本文件

```
abc.txt
pqr.txt
xyz.txt
...
... 
```

我需要一串逗号分隔的文件。每个字符串不应超过 20 个文件。所以回声看起来像这样......

```
$string1="abc.txt,pqr.txt,xyz.txt..."
$string2="abc1.txt,pqr1.txt,xyz1.txt..."
... 
```

字符串的数量将根据文件中的行数而有所不同。我写过这样的东西...

```
#!/bin/sh
delim=','
for gsfile in `cat filelist.txt`
do
filelist=$filelist$delim$gsfile
echo $filelist
done 
```

翻译命令按预期工作，但如何将每个字符串限制为 20 个文件名？

```
cat filelist.txt | tr '\n' ',' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T08:15:31.587

只需使用`xargs`：

```
$ seq 1 50 | xargs -n20 | tr ' ' ,
1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20
21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40
41,42,43,44,45,46,47,48,49,50 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T08:26:00.227

这可能对您有用：

```
seq 41 | paste -sd ',,,,,,,,,,,,,,,,,,,\n' 
1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20
21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40
41 
```

或 GNU sed：

```
seq 41 | sed ':a;$bb;N;s/\n/&/19;Ta;:b;y/\n/,/'
1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20
21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40
41 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T08:28:22.257

一种使用方式`sed`：

像*Igor Chubin* 50 这样的数字添加到`infile`：

```
seq 1 50 >infile 
```

内容`script.sed`：

```
:b
## While not last line...
$! {
    ## Check if line has 19 newlines. Try substituting the line with itself and
    ## check if it succeed, then append next line and do it again in a loop.
    s/\(\n[^n]*\)\{19\}/&/
    ta  
    N   
    bb  
}

## There are 20 lines in the buffer or found end of file, so substitute all '\n' 
## with commas and print.
:a
s/\n/,/g
p 
```

像这样运行它：

```
sed -nf script.sed infile 
```

具有以下输出：

```
1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20
21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40
41,42,43,44,45,46,47,48,49,50 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T14:01:27.407

在 sed 的命令中使用标志`s`将每 20 个逗号替换为换行符：

```
 < filelist.txt tr '\n' , | sed ':a; s/,/\n/20; P; D; ta'; echo 
```

# clojure - 变量号和关键字参数？

> ID：11340216
> 
> 赞同：1
> 
> 时间：2012-07-05T08:05:42.547
> 
> 标签：clojure

除了类似的东西

```
(fn [& {:keys [more the-rest]}] ,,,) 
```

有没有办法同时使用可变数量的参数和关键字参数，例如

```
(my-function arg1 arg2 some-other-args :opt1 opt1 :opt2 opt2) 
```

?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T09:10:34.777

你可以定义你的函数以任何你喜欢的方式接受参数，但你会遇到的问题是如何区分模棱两可的情况，例如：

```
(my-function arg1 arg2 arg3 arg4)
(my-function arg1 arg2 key1 val1) 
```

为了区分差异，您需要编写代码以在运行时检查参数（例如检查第三个参数是否为关键字）。这会很快变得丑陋。

因此，我不建议沿着这条路线走。要考虑的替代方案：

*   简化您的功能。如果您有这么多参数，则可能意味着您在单个函数中“完成”了太多。
*   将所有键/值参数作为单个映射传递

# c++ - Mac OS X 声音输出

> ID：11340218
> 
> 赞同：2
> 
> 时间：2012-07-05T08:05:53.770
> 
> 标签：c++, c, macos, audio, buffer

有没有关于如何在 Mac OS X 上输出原始声音缓冲区的示例？
类似于`pa_simple_write()`pulseaudio 或`waveOutWrite()`来自 WINAPI 的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T08:56:12.960

您需要创建一个[AudioQueue](https://developer.apple.com/library/mac/#documentation/MusicAudio/Reference/AudioQueueReference/Reference/reference.html#//apple_ref/doc/uid/TP40005117)。

接下来你需要[分配一个缓冲区](https://developer.apple.com/library/mac/#documentation/MusicAudio/Reference/AudioQueueReference/Reference/reference.html#//apple_ref/doc/uid/TP40005117)。分配后，然后用数据填充它并将其入[队](https://developer.apple.com/library/mac/#documentation/MusicAudio/Reference/AudioQueueReference/Reference/reference.html#//apple_ref/doc/uid/TP40005117)。最后你调用[AudioQueueStart](https://developer.apple.com/library/mac/#documentation/MusicAudio/Reference/AudioQueueReference/Reference/reference.html#//apple_ref/doc/uid/TP40005117)。然后，您可以立即调用[AudioQueueStop](https://developer.apple.com/library/mac/#documentation/MusicAudio/Reference/AudioQueueReference/Reference/reference.html#//apple_ref/doc/uid/TP40005117)，并将 false 作为最后一个参数传递。

但是，如果您需要同时播放多个声音，则上述方法效果不佳。如果您希望这样做，AFAIK，您将需要更复杂的设置，将音频混合到缓冲区中。不过，这会很快变得复杂......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T08:34:10.420

我遇到的最简单的方法是使用[libao](http://www.xiph.org/ao/)。方便的是，它也是跨平台的。

# android - Android中的多线程

> ID：11340219
> 
> 赞同：2
> 
> 时间：2012-07-05T08:05:54.497
> 
> 标签：android, multithreading

我是 Android 甚至 Java 的新手。我必须使用另一个类“实用程序”在活动中保存和阅读消息。它会导致 ANR，我听说我必须在单独的线程中做那种事情。
这是我的代码：

```
Utility.save(this, message, lsn);
Message tmp = Utility.read(this, lsn); 
```

我试过这个：

```
final ProgressDialog progressDialog = ProgressDialog.show(
        this, "Please wait....", "Here your message");
new Thread(new Runnable() {
    public void run() {
    Utility.save(this, message, lsn);
    Message tmp = Utility.read(this, lsn);
        progressDialog.dismiss();
    }
}).start(); 
```

正如您可以想象的那样，没有办法像这样进行。我需要使用aidl吗？

谢谢你们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T08:10:03.973

您可能应该做的是使用`AsyncTask`Android 应用程序中的多线程方式。

尝试在 android 开发人员中阅读：[http ://android-developers.blogspot.co.il/2010/07/multithreading-for-performance.html](http://android-developers.blogspot.co.il/2010/07/multithreading-for-performance.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T08:08:41.367

不，`Service`（或`IntentService`）或`AsyncTask`将正确完成工作，请考虑在[http://developer.android.com阅读更多相关信息](http://developer.android.com)

# javascript - 在 Google App Engine 中使用 JavaScript 和服务器端 Python 代码动态生成客户端 HTML 表单控件

> ID：11340220
> 
> 赞同：1
> 
> 时间：2012-07-05T08:05:56.900
> 
> 标签：javascript, python, google-app-engine

我有以下使用 Jinja2 模板引擎的客户端前端 HTML：

```
{% for record in result %}
    <textarea name="remark">{{ record.remark }}</textarea>
    <input type="submit" name="approve" value="Approve" />
{% endfor %} 
```

因此 HTML 可能会显示超过 1 组的 textarea 和提交按钮。

后端 Python 代码使用模型从 gql 查询中检索可变数量的记录，并将其传递给结果中的 Jinja2 模板。当点击提交按钮时，它会触发 post 方法来更新记录：

```
def post(self):
    if self.request.get('approve'):
        updated_remark = self.request.get('remark')
        record.remark = db.Text(updated_remark)
        record.put() 
```

但是，在某些情况下，更新的记录不是与单击的提交按钮对应的记录（例如，如果用户单击记录 1 提交，记录 2 的备注会更新，但记录 1 不会更新）。

我认为这是由于重复的属性名称注释。我可以使用 JavaScript/jQuery 生成不同的属性名称。问题是，如何对后端 Python 进行编码以获取 JavaScript 生成的（可变数量）名称？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T08:47:19.513

**已编辑**

在循环模板**中**使用[loop.index](http://jinja.pocoo.org/docs/templates/#list-of-control-structures)：循环的当前迭代。

然后：

```
{% for record in result %}
<textarea name="remark{{ loop.index }}">{{ record.remark }}</textarea>
<input type="submit" name="approve" value="{{ loop.index }}" />
{% endfor %} 
```

返回：

```
<textarea name="remark1">first record remark</textarea>
<input type="submit" name="approve" value="1" />
<textarea name="remark2">second record remark</textarea>
<input type="submit" name="approve" value="2" />
<textarea name="remark2">third record remark</textarea>
<input type="submit" name="approve" value="3" /> 
```

并在您的后端代码中：

```
def post(self):
    if self.request.get('approve'):
        updated_remark = self.request.get('remark' + self.request.get('approve'))
        record.remark = db.Text(updated_remark)
        record.put() 
```

我没有测试就写了这个。可能不起作用，但可以给你一个提示。

* * *

**新的[更好]解决方案**

将每对 textarea 和 input 放入一个表单中：

```
{% for record in result %}
    <form>
        <textarea name="remark">{{ record.remark }}</textarea>
        <input type="submit" name="approve" value="Approve" />
   </form>
{% endfor %} 
```

# monitoring - 如何使用 Nagios 作为 SNMP 管理器？

> ID：11340221
> 
> 赞同：1
> 
> 时间：2012-07-05T08:05:58.317
> 
> 标签：monitoring, snmp, nagios, network-monitoring

我有一个 Nagios Core 3.x 设置和一个基于 linux 的设备，它能够向服务器发送 SNMP 警报。我怎样才能使用我的 Nagios 来利用它的 snmp 监控功能？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T18:19:04.433

[你应该在这里](http://www.nagios.com/solutions/snmp-traps/)阅读他们的文档

> Nagios 提供对 SNMP 陷阱的管理 - 包括读取、处理并从其接收的 SNMP 陷阱生成警报的能力。Nagios 还可以将 SNMP 陷阱发送到其他管理主机，从而允许与其他网络管理系统无缝集成。

我已经将 SNMPtt 与 Nagios 一起使用并取得了巨大成功。您可以使用以下说明将其与 Nagios 一起安装：[http ://www.snmptt.org/docs/snmptt.shtml#Nagios-Netsaint](http://www.snmptt.org/docs/snmptt.shtml#Nagios-Netsaint)

# c++ - 冒泡排序中的预期互换次数

> ID：11340223
> 
> 赞同：3
> 
> 时间：2012-07-05T08:06:04.800
> 
> 标签：c++, algorithm, math

> **可能重复：**
> [冒泡排序中的交换次数](https://stackoverflow.com/questions/11331314/number-of-swaps-in-bubble-sort)

问题简述如下：给定一个包含*N*
个整数 的数组 A，数组中的每个元素都可以增加一个固定数*b*，概率为*p* [ *i* ], 0 <= *i* < *n*。我必须找到使用[冒泡排序](http://en.wikipedia.org/wiki/Bubble_sort)对数组进行排序的预期交换次数。

 *****我尝试了以下方法：

*1) 对于i* < *j*的元素 A[ *i* ] > A[ *j* ]的概率可以很容易地从给定的概率中计算出来。2) 使用上述方法，我计算出预期的掉期次数为：

 **```
double ans = 0.0;
for ( int i = 0; i < N-1; i++ ){
    for ( int j = i+1; j < N; j++ ) {
        ans += get_prob(A[i], A[j]); // Computes the probability of A[i]>A[j] for i < j. 
```

基本上我想到了这个想法，因为预期的交换次数可以通过数组的反转次数来计算。因此，通过利用给定的概率，我正在计算一个数字 A[ *i* ] 是否会与一个数字 A[ *j* ] 交换。

我之前发布[了一个类似的问题](https://stackoverflow.com/questions/11331314/number-of-swaps-in-bubble-sort)，但它没有所有的限制。

无论我是否走在正确的轨道上，我都没有得到任何好的提示，所以我在这里列出了所有的限制。如果我以不正确的方式思考问题，请给我一些提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T08:40:55.357

给定元素的预期交换次数只是其左侧大于它的预期元素数量。

您可以通过指标变量的方法和期望值具有[线性特性](http://en.wikipedia.org/wiki/Expected_value#Linearity)的事实快速计算这一点。

因此，假设您正在考虑 element `a_3`。那么预期的交换次数就是

> E[#a_3 的交换] = E[a_0 > a_3] + E[a_1 > a3] + E[a_2 > a_3]

右侧的每个个体期望都可以使用基本概率轻松计算。

然后，预期的交换总数只是每个元素的预期交换数的总和除以 2（因为您重复计算）。*******

# d3.js - d3 中的多个固定节点

> ID：11340226
> 
> 赞同：0
> 
> 时间：2012-07-05T08:06:22.523
> 
> 标签：d3.js

我试图在这个[图](http://bl.ocks.org/2879486)中有许多固定节点。

我尝试了此[页面](http://bl.ocks.org/1080941)中的混搭代码。

但它不起作用。

```
 // Append text to Link edges
      var linkText = svgCanvas.selectAll(".gLink")
          .data(force.links())
        .append("text")
      .attr("font-family", "Arial, Helvetica, sans-serif")
      .attr("x", function(d) {
          if (d.target.x > d.source.x) { return (d.source.x + (d.target.x - d.source.x)/2); }
          else { return (d.target.x + (d.source.x - d.target.x)/2); }
      })
          .attr("y", function(d) {
          if (d.target.y > d.source.y) { return (d.source.y + (d.target.y - d.source.y)/2); }
          else { return (d.target.y + (d.source.y - d.target.y)/2); }
      })
      .attr("fill", "Maroon")
          .style("font", "normal 12px Arial")
          .attr("dy", ".35em")
          .text(function(d) { return d.linkName; });

  force.on("tick", function() {
    node[0].x = w / 2;
    node[0].y = h / 2;

    link.attr("x1", function(d) { return d.source.x; })
        .attr("y1", function(d) { return d.source.y; })
        .attr("x2", function(d) { return d.target.x; })
        .attr("y2", function(d) { return d.target.y; });

    node.attr("cx", function(d) { return d.x; })
        .attr("cy", function(d) { return d.y; });
  }); 
```

什么都没有显示，只是一个空白页。这可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T16:07:44.643

您忘记附加到[enter selection](https://github.com/mbostock/d3/wiki/Selections#wiki-enter)。`enter()`之前添加`append("text")`。

# css - 我的网格数学辅助：nth- child(an+b)

> ID：11340227
> 
> 赞同：12
> 
> 时间：2012-07-05T08:06:36.227
> 
> 标签：css, css-selectors

我正在尝试制作一个不依赖于预设列数的网格。我创建了一个小样本来展示这种情况：

```
<!DOCTYPE HTML>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Grid in HTML5 and CSS3</title>
<style>

* {margin:0;padding:0;}
.row {display:block;position:relative;clear:both;}
.row>* {display:block;position:relative;clear:both;float:left;clear:none;width:100%;}
.row>*:empty {width:0px;}

/* one column in the row */
.row>:nth-last-child(1):nth-child(1) {width:100%;} 

/* two columns in the row */
.row>:nth-last-child(2):nth-child(1) {width:50%;} 
.row>:nth-last-child(1):nth-child(2) {width:50%;} 

/* three columns in the row */
.row>:nth-last-child(3):nth-child(1) {width:33.33%;} 
.row>:nth-last-child(2):nth-child(2) {width:33.33%;}
.row>:nth-last-child(1):nth-child(3) {width:33.34%;} 
.row>:empty:nth-last-child(3):nth-child(1)+:not(:empty) {width:66.66%;} 
.row>:empty:nth-last-child(2):nth-child(2)+:not(:empty) {width:66.67%;}

article {margin:.5em;border:1px solid green;border-radius:.3em;padding:.5em; }
</style>

</head>
<body>

<section class="row">
<div>
<article>
<p>This row has only one child.</p>
</article>
</div>
</section>

<section class="row">
<div>
<article>
<p>This row has two children</p>
</article>
</div>
<div>
<article>
<p>This is the second child</p>
</article>
</div>
</section>

<section class="row">
<div>
<article>
<p>
This row has three children
</p>
</article>
</div>
<div>
<article>
<p>So this is col 2 of 3</p>
</article>
</div>
<div>
<article>
<p>And this is col 3 of 3.</p>
</article>
</div>
</section>

<section class="row">
<div></div>
<div>
<article>
<p>The first child of this row is empty so spanned with the second</p>
</article>
</div>
<div>
<article>
<p>This is the second column</p>
</article>
</div>
</section>

<section class="row">
<div>
<article>
<p>This is the first column</p>
</article>
</div>
<div></div>
<div>
<article>
<p>The second and third column are spanned</p>
</article>
</div>
</section>

</body>
</html> 
```

我在 jsfiddle 上放了一个更大的样本 - 更详细地描述了这些问题

[http://jsfiddle.net/jordenvanforeest/MDv32/](http://jsfiddle.net/jordenvanforeest/MDv32/)

我现在的问题是，如果您希望此网格容纳 3 列以上，CSS 大小会呈指数级增长。所以我正在寻找其他解决方案。我试图做类似的事情

```
.row>:nth-last-child(an+b):nth-child(cn+d) {} 
```

但是我的微积分技能有点生疏，我无法让它正常工作。帮助将不胜感激。

**更新**

[三十点](https://stackoverflow.com/users/405015/thirtydot)提供了一个使 CSS 变得更小的答案。这个[小提琴](http://jsfiddle.net/jordenvanforeest/rRXq2/)是他建议的改进版本。

仍然欢迎任何其他建议。我的 12 列网格仍然需要 30K 来进行跨越。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T11:37:02.570

`display: table`你可以用combine [with`table-layout: fixed`](http://www.w3.org/TR/CSS21/tables.html#propdef-table-layout)做类似的事情。

浏览器支持：[http](http://caniuse.com/css-table) ://caniuse.com/css-table （但这里的限制因素是[`:not()`and`:empty`](http://caniuse.com/css-sel3)）

**见：http:** [//jsfiddle.net/thirtydot/MDv32/3/](http://jsfiddle.net/thirtydot/MDv32/3/)

如您所见，它看起来几乎相同。有了一些独创性，您应该能够使用我使用的技术复制演示中的大部分功能。我在我停止的演示中注释掉了 HTML。

**CSS：**

```
.row {
    display: table;
    table-layout: fixed;
    width: 100%;
}
.row > * {
    display: table-cell;
}
.row > :empty {
    display: none;
}
/* for example: */
.row > :empty + :not(:empty) + :last-child:not(:empty) {
    width: 33.33%;
} 
```

# c# - C# TableLayoutPanel 填充

> ID：11340231
> 
> 赞同：0
> 
> 时间：2012-07-05T08:06:58.497
> 
> 标签：c#, size, fill, tablelayoutpanel

在 TableLayoutPanel 中，默认情况下，行或列中的最后一个元素会占用剩余空间。如何实现倒数第二个或任何其他元素占用尽可能多的空间的布局，除此之外，最后一个元素仅占用必要的空间？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T08:13:57.257

这取决于如何设置其他行。假设所有其他行都是自动调整大小或固定大小的，将倒数第二行的大小设置为 100% 即可满足您的需求。设计人员生成的代码如下所示：

```
this.tableLayoutPanel1.RowStyles.Add(new System.Windows.Forms.RowStyle());
this.tableLayoutPanel1.RowStyles.Add(new System.Windows.Forms.RowStyle(System.Windows.Forms.SizeType.Percent, 100F));
this.tableLayoutPanel1.RowStyles.Add(new System.Windows.Forms.RowStyle()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T08:14:56.517

我已经使用 Windows Forms 和 .Net Framework 4 对此进行了测试；

最简单的解决方案似乎是创建一个表格布局面板，并将您的控件嵌入到每一列中。完成后，将所有列的大小设置为“AutoSize”。

然后取倒数第二列并将大小设置为“100%”

这是我的设计师的代码：

```
 tableLayoutPanel1 = new TableLayoutPanel();
    tableLayoutPanel1.ColumnCount = 4;
    tableLayoutPanel1.ColumnStyles.Add(new System.Windows.Forms.ColumnStyle());
    tableLayoutPanel1.ColumnStyles.Add(new System.Windows.Forms.ColumnStyle());
    tableLayoutPanel1.ColumnStyles.Add(new System.Windows.Forms.ColumnStyle(System.Windows.Forms.SizeType.Percent, 100F));
    tableLayoutPanel1.ColumnStyles.Add(new System.Windows.Forms.ColumnStyle()); 
```

请务必先嵌入控件，因为如果其他单元格中没有内容，则将倒数第二列设置为 100% 的大小，然后使用设计器将控件作为 100% 列有效地放入空单元格中会变得很棘手”窃取”他们的空间。

# html - 不明白为什么相同的下拉菜单有不同的宽度

> ID：11340232
> 
> 赞同：0
> 
> 时间：2012-07-05T08:06:58.703
> 
> 标签：html, css, twitter-bootstrap

这是我在截图中遇到的麻烦：

第一个下拉菜单：

![在此处输入图像描述](../Images/a8cf28a602e8c964714eb2a743c0b0f4.png)

第二个下拉菜单：

![在此处输入图像描述](../Images/7582bade8272026a63289c78797a1f54.png)

第二个下拉列表右侧的宽度稍大一些。谷歌浏览器说，宽度是一样的。

HTML 代码：

```
<div class="row menu">
 <ul class="nav nav-pills pull-right">
  <li class="dropdown">
    <a href="#" class="dropdown-toggle"
       data-toggle="dropdown">
      My reports
      <span class="caret my-reports-caret"></span>
    </a>
    <ul class="dropdown-menu">
      <li><%= link_to "Performance", performance_reports_path %></li>
      <li class="divider"></li>
      <li><%= link_to "Account settings", '#' %></li>
    </ul>
  </li>
</ul> 
<ul class="nav nav-pills pull-right">
  <li class="dropdown">
    <a href="#" class="dropdown-toggle"
       data-toggle="dropdown">
      My account
      <span class="caret my-account-caret"></span>
    </a>
    <ul class="dropdown-menu">
      <li><%= link_to "My website", websites_path  %></li>
      <li class="divider"></li>
      <li><%= link_to "Account settings", edit_user_registration_path(current_user) %></li>
    </ul>
  </li>
</ul>
</div> 
```

我的 CSS：

```
.menu{
width:940px;
height: 30px;
border-width:1px;
border-top-style:solid;
border-bottom-style:solid;
border-color: grey;
padding:10px;
background-color: rgb(212,229,190);
}
.row .nav-pills
.dropdown-menu {
position: absolute;
top: 100%;
left: 0;
z-index: 1000;
display: none;
float: left;
min-width: 245px;
padding: 0;
margin: 0;
list-style: none;
rgb(180, 210, 135)
background-color: #ffffff;
border-width:0 1px 1px 1px;
border-color:rgb(180, 210, 135);
-webkit-box-shadow: 0 5px 10px rgba(180, 210, 135, 0.2);
-moz-box-shadow: 0 5px 10px rgba(180, 210, 135, 0.2);
box-shadow: 0 5px 10px rgba(180, 210, 135, 0.2);
-webkit-background-clip: padding-box;
-moz-background-clip: padding;
background-clip: padding-box;
border-top-right-radius: 0px;
border-top-left-radius: 0px;
} 
```

**添加了链接的css**

```
.menu .nav-pills
.dropdown-menu a {
display: block;
padding-top: 5px;
padding-left: 10px;
clear: both;
font-weight: normal;
line-height: 18px;
color: black;
white-space: nowrap;
}

.menu .nav-pills .dropdown-toggle {
border: 1px solid #B4D287;
background-color: white; 
margin-bottom: 0px; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T08:28:17.450

我想你应该设置一个固定的宽度

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T08:30:46.443

向您的类添加一个`max-width: 245px;`属性，`.dropdown-menu`它应该修复渲染。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T09:06:25.463

将此添加到您的 CSS 中：

```
.row .nav-pills .dropdown-menu a {
    width:245px;
    height: 25px;
} 
```

并将 class="dropdown-toggle" 的宽度添加到`.row .nav-pills .dropdown-menu`您的 CSS

**编辑的CSS：**

```
.row .nav-pills .dropdown-menu {
    border-width:0 1px 1px 1px;   
    width: 243px;
}
.menu .nav-pills .dropdown-menu a { 
    padding-top: 5px; 
    height: 20px;
    padding-left: 10px;
    width: 235px;
} 

.menu .nav-pills .dropdown-toggle { 
    border: 1px solid #B4D287; 
    width:243px;
} 
```

也许这应该这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T09:11:04.167

我检查并发现以下任何样式更改都会有所帮助，而不是使用 :min-width"。

.row .nav-药丸 .dropdown-menu

{

```
 width: 245px; 
```

}

或者

.row .nav-药丸 .dropdown-menu

{

```
 width: 27.22% 
```

}

为了安全添加最大宽度样式。

# ruby-on-rails - 瑞克失败了！在本地预编译资产时

> ID：11340237
> 
> 赞同：0
> 
> 时间：2012-07-05T08:07:16.740
> 
> 标签：ruby-on-rails, rake, asset-pipeline, precompile

`bundle exec rake assets:precompile`在我的开发机器上运行时，出现 rake aborted 错误：

```
cannot load such file -- rack/google_analytics 
```

这是我在生产组中的 gemfile，所以没有安装在我的开发机器上：

```
group :production do
    gem 'rack-google_analytics', :require => "rack/google_analytics"
end 
```

任何想法如何解决这一问题？我正在运行 rake 0.9.2.2 和 Rails 3.2.1。如果需要，我可以提供更多信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T20:52:36.213

当我将以下值从 false 更改为 true 时（在 config/environments/production.rb 中），我可以摆脱上述错误

config.assets.compile = true

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T06:51:16.593

我可以解决这个问题的唯一方法是在我的 gemfile 中注释掉 Production 组，然后运行：

```
bundle install
bundle exec rake assets:precompile 
```

然后取消注释，再次运行 bundle install 并使用 capistrano 推送到 git/deploying。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-04T17:23:59.633

我猜你遇到这种情况的原因是你以前做过：

```
bundle install --without production 
```

某些版本的 bundler 缓存此命令并默认运行。尝试运行这样的东西来清除缓存：

```
bundle install --without santa 
```

你的下一个命令

```
bundle exec rake assets:precompile 
```

应该再次正常工作。

# ruby-on-rails-3.1 - rails 的“rake assets:precompile”源代码在哪里？

> ID：11340243
> 
> 赞同：9
> 
> 时间：2012-07-05T08:07:50.403
> 
> 标签：ruby-on-rails-3.1, sprockets

在铁路上[找不到](https://github.com/rails/rails/tree/master/railties/lib/rails/tasks)

[在sprocketstask](https://github.com/sstephenson/sprockets/blob/master/lib/rake/sprocketstask.rb)中只能找到一部分

去哪里看？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-05T08:23:51.500

Rake 任务本身[在](https://github.com/rails/sprockets-rails/blob/master/lib/sprockets/rails/task.rb)`sprokets-rails`gem中定义。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-05T09:20:40.817

在 rails 3.2.6 你可以找到它`gem contents actionpack | grep rake`

# google-app-engine - 使用 google appEngine Provider (Oauth) 的 google app 脚本使用者

> ID：11340244
> 
> 赞同：0
> 
> 时间：2012-07-05T08:07:51.513
> 
> 标签：google-app-engine, oauth-2.0, google-apps-script

我可以得到 GAS 和 GAE 之间的 Oauth 连接。

我构建了一个谷歌小工具，它需要来自我的数据存储应用程序的一些数据，它有 3 个端点来最终获得访问令牌。

> http//[myapp].appspot.com/_ah/OAuthGetRequestToken
> 
> http//[myapp].appspot.com/_ah/OAuthAuthorizeToken
> 
> http//[myapp].appspot.com/_ah/OAuthGetAccessToken

在 GAS 方面，我具有获取访问令牌的典型功能。

```
function oauthTokenFetch(){  

var oAuthConfig = UrlFetchApp.addOAuthService("myAppName");  
oAuthConfig.setAccessTokenUrl("https://<myApp>appspot.com/_ah/OAuthGetAccessToken");  
oAuthConfig.setRequestTokenUrl("https://<myApp>.appspot.com/_ah/OAuthGetRequestToken");  
oAuthConfig.setAuthorizationUrl("https://<myApp>.appspot.com/_ah/OAuthAuthorizeToken"); 
oAuthConfig.setConsumerKey("<myApp>.appspot.com");  
oAuthConfig.setConsumerSecret("myConsumerSecret");  

var requestData = {  
    "method": "GET",  
    "oAuthServiceName": "myAppName",  
    "oAuthUseToken": "always"  
};  
try {        
  var response2=UrlFetchApp.fetch("http://<myApp>.appspot.com/test/oauth",requestData);  
  Logger.log(response2.getResponseCode());  
}catch(exception){  
  Logger.log(exception);      
} 
```

如果我撤销了谷歌帐户上的访问令牌，它无法获得另一个，授予授权的弹出窗口不会出现......我必须复制谷歌小工具并再次进行授权。

有人有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T00:33:25.143

当前没有允许您在脚本中撤销或删除 OAuth 令牌的方法。看起来您已经提交了关于该主题的[错误/功能请求](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1531)，我们将在那里跟进。

# json - arduino aJSON 库 valuefloat 总是返回 0.00

> ID：11340245
> 
> 赞同：1
> 
> 时间：2012-07-05T08:07:55.767
> 
> 标签：json, arduino

```
 aJsonObject* sBoard = aJson.createObject();
  aJsonObject* sensorType = aJson.createObject();

  aJsonObject* sBoard = aJson.createObject();
  aJsonObject* sensorType = aJson.createObject();

  aJson.addItemToObject(sBoard, "name", aJson.createItem("SensorBoardOne"));
  aJson.addItemToObject(sBoard, "Sensor", sensorType);

  aJson.addNumberToObject(sensorType, "ph", 5.33);
  aJson.addNumberToObject(sensorType, "ec", 880);
  aJson.addNumberToObject(sensorType, "temp", 74.68);

  aJsonObject* ph = aJson.getObjectItem(sensorType, "ph");

  Serial.println(ph->valuefloat); 
```

`Serial.println(ph->valuefloat);`返回 0.00。我以前从未处理过 C 结构，并且不确定我是否正确设置了语法。我的 json 结构看起来相当简单；但是，我不确定我是否正在为 ph 浮点值访问正确的 creatObject()。我应该怎么做才能获得正确的ph值？

有关 aJSON 库的更多信息，请访问：http: [//interactive-matter.eu/blog/2010/08/14/ajson-handle-json-with-arduino/](http://interactive-matter.eu/blog/2010/08/14/ajson-handle-json-with-arduino/)

**编辑新代码：**

```
 aJsonObject* sBoard = aJson.createObject();

  aJson.addItemToObject(sBoard, "name", aJson.createItem("SensorBoardOne"));

  aJson.addNumberToObject(sBoard, "ph", 5.33);
  aJson.addNumberToObject(sBoard, "ec", 880);
  aJson.addNumberToObject(sBoard, "temp", 74.68);

  aJsonObject* phValue = aJson.getObjectItem(sBoard, "ph");
  char* string = aJson.print(sBoard);
    if (string != NULL) {
      Serial.println(string); //prints out: {"name":"SensorBoardOne","ph":5.33000,"ec":880,"temp":74.68000}

    }

  Serial.println(phValue->valuefloat); 
```

我最终将 json 结构更改为更简单的结构。由于 arduino 的内存不足，我觉得不需要另一个子结构。缩短 json 结构后，我能够成功获得 ph 的 valuefloat。我仍然有兴趣找出以前的问题以供将来参考。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T15:33:26.897

我刚刚尝试了您的代码，发现您在代码段的开头两次声明了 sBoard 和 sensorType 。

我删除了它，我得到了正确的响应“5.33”。这是我在编辑后使用的代码。

```
 aJsonObject* sBoard = aJson.createObject();
  aJsonObject* sensorType = aJson.createObject();

  aJson.addItemToObject(sBoard, "name", aJson.createItem("SensorBoardOne"));
  aJson.addItemToObject(sBoard, "Sensor", sensorType);

  aJson.addNumberToObject(sensorType, "ph", 5.33);
  aJson.addNumberToObject(sensorType, "ec", 880);
  aJson.addNumberToObject(sensorType, "temp", 74.68);

  aJsonObject* ph = aJson.getObjectItem(sensorType, "ph");

  Serial.println(ph->valuefloat); 
```

# c# - 使用 webbrower 控制错误自动填充 gmail 注册

> ID：11340248
> 
> 赞同：2
> 
> 时间：2012-07-05T08:08:07.937
> 
> 标签：c#, automation, gmail, browser

我使用 webbrower 为 gmail 注册表单设置自动值，当我填写验证码并提交时，服务器给出消息“对不起，我们目前无法满足您对新帐户的请求。”。我注册手册就成功了。你能解释一下为什么吗？

这是我的代码。

```
HtmlElement element = webBrowser1.Document.GetElementById("LastName");
        if (element != null) {
            string lastName = "LastName";
            element.InnerText = lastName; 
          }
        element = webBrowser1.Document.GetElementById("lastname-placeholder");
        if (element != null) { element.InnerText = ""; }

        // First Name
        element = webBrowser1.Document.GetElementById("firstname-placeholder");
        if (element != null)
        {
            element.InnerText = "";
        }
        element = webBrowser1.Document.GetElementById("FirstName");
        if (element != null) {
            string firstName = "firstName";
            element.InnerText = firstName;

            element.InvokeMember("onblur");
        }

        element = webBrowser1.Document.GetElementById("GmailAddress");
        if (element != null)
        {
            string account="abcxxx";// 

            element.InnerText = account;

            element.InvokeMember("onblur");
            element.InvokeMember("onChange");

            element.InvokeMember("onFocus");
        }
        // Password
        string password = "abc123xxx";
        element = webBrowser1.Document.GetElementById("Passwd");
        if (element != null) {
            element.InnerText = password;
            emailCreated.Password = password;

            element.InvokeMember("onFocus");
            element.InvokeMember("onblur"); element.InvokeMember("onChange");
        }

        element = webBrowser1.Document.GetElementById("PasswdAgain");
        if (element != null) { element.InnerText = password; element.InvokeMember("onFocus"); element.InvokeMember("onblur"); element.InvokeMember("onChange"); }

        // Day
        element = webBrowser1.Document.GetElementById("birthday-placeholder");
        if (element != null)
        {
            element.InnerText = "";
        }
        element = webBrowser1.Document.GetElementById("BirthDay");
        if (element != null) { element.InnerText = "14"; element.InvokeMember("onblur"); }

        // Month
        element = webBrowser1.Document.GetElementById("BirthMonth");
        if (element != null)
        {
            element.SetAttribute("SelectedIndex", "2"); element.InvokeMember("onblur");

        }
        element = webBrowser1.Document.GetElementById("HiddenBirthMonth");
        if (element != null)
        {
            element.InnerText = "02";
        }
        //Year
        element = webBrowser1.Document.GetElementById("birthYear-placeholder");
        if (element != null)
        {
            element.InnerText = "";
        }
        element = webBrowser1.Document.GetElementById("BirthYear");
        if (element != null) { element.InnerText = "1986"; element.InvokeMember("onblur"); }

        // Gender
        element = webBrowser1.Document.GetElementById("Gender");
        if (element != null) { element.SetAttribute("SelectedIndex", "1"); element.InvokeMember("onblur"); }
        element = webBrowser1.Document.GetElementById("HiddenGender");
        if (element != null) { element.InnerText = "FEMALE"; element.SetAttribute("value", "FEMALE"); element.InvokeMember("onblur"); }

        //RecoveryPhoneNumber
        element = webBrowser1.Document.GetElementById("RecoveryPhoneNumber");
        element.InnerText = txtMobileRecover.Text;

        element = webBrowser1.Document.GetElementById("RecoveryEmailAddress");
        element.InnerText="mailabcxxx@gmail.com"

        //TermsOfService
        element = webBrowser1.Document.GetElementById("TermsOfService");
        if (element != null) { element.SetAttribute("checked", "true"); element.InvokeMember("onblur"); }
        //HomepageSet
        element = webBrowser1.Document.GetElementById("HomepageSet");
        if (element != null) { element.SetAttribute("checked", ""); element.InvokeMember("onblur"); }
        // images 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T20:49:13.083

Recaptcha 是 js，因此如果您从该 IP 创建了几个帐户，则必须等待一些时间...

即使您清除了包括 flash cookie 在内的 cookie，您的 ip 也会被保存。

据我所知，如果您设法看到您的代码是正确的，并且您通过了所有客户端表单验证。该消息来自服务器，请尝试在其他计算机上进行测试。

# javascript - 循环遍历jquery中的2个数组并组合

> ID：11340249
> 
> 赞同：0
> 
> 时间：2012-07-05T08:08:41.017
> 
> 标签：javascript, jquery

我有 2 个数组，一个带有城市，另一个带有 ID 的数组...我想循环两个数组，然后输出一些 HTML

现在我只循环城市，然后将一些 HTML 附加到如下：

```
if ($jq(".area").length > 0) {

    var region = $jq(".hiddenFieldRegion").val();
    var cityIDs = $jq(".hiddenFieldChosenAreas").val();
    var strcities = $jq(".hiddenFieldChosenCities").val();
    //var cities = strcities.split('|');

    //Set region to be marked
    if (region) {
        $jq(".mapdk").attr("class", region);
    }

    //Appending to searchform
    if (strcities) {
        $jq.each(strcities.toString().split("|"), function (k, v) {
            var v = v.split("|");
            $jq("<option selected />").text(v[0]).appendTo("select.chosen-cities");
        });
    }

} 
```

我想要我附加到搜索表单的地方，添加一个属性值，并带有来自 cityIDs 数组的 ID...

所以我得到一些HTML，如：

```
<option value="XXX">CityName</option> 
```

那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T08:23:43.653

假设两个数组中的顺序相同，您可以使用`k`每个函数的索引参数 ( )：

```
if (strcities) {
    var aCityIDs = cityIDs.split("|");
    $jq.each(strcities.toString().split("|"), function (k, v) {
        var v = v.split("|");
        var id = aCityIDs[k];
        $jq("<option selected value='"+id+"' />").text(v[0]).appendTo("select.chosen-cities");
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T08:25:04.043

假设您的城市 ID 和城市名称以相同的方式排序，您可以通过数组中的此索引访问每个名称/ID：

```
var cityIDs = $jq(".hiddenFieldChosenAreas").val();
var strcities = $jq(".hiddenFieldChosenCities").val();

var cityIDs_array = cityIds.split("|");
var strcities_array = strcities.split("|");

....

if (strcities) {
    $jq.each(strcities_array, function (k, v) {
        //var v = v.split("|"); Unnecessary if strcities is like "city1|city2|city3"
        $jq("<option value='"+cityIDs_array[k]+"' />").text(v).appendTo("select.chosen-cities");
    });
} 
```

通过这种方式，您可以访问循环中的每个城市 ID。
但我认为您应该将城市名称和城市 ID 存储在同一个字符串中。例如`"city1:1|city2:2|city3:3"`. 然后，通过一些`split`函数的使用，您将获得 id 和 name。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T08:25:43.397

另一个例子：

```
var strict = ('aaa|eeee|dddd').split('|');
var id = ('1|2|3').split('|');

$.each(strict, function (k) {
            $("<option selected />").text(strict[k]).appendTo("select.chosen-cities").attr('value',id[k]);
        }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T08:28:42.403

如果您的两个数组在索引方面彼此相同，这很容易 - 循环一个，然后在同一索引处查找另一个数组中的值。

```
//simulate environment
var strcities = 'one|two|three',
    cityIDs = '1|2|3';

//main code
var ids = cityIDs.split('|');
$.each(strcities.toString().split("|"), function (index, val) {
    var opt = $("<option />", {value: ids[index], text: val}).appendTo("select.chosen-cities");
    /* if (index == 2) opt.prop('selected', 'selected'); /*
}); 
```

几点注意事项：

*   你在里面`|`一次又一次地分裂。`$.each`由于这不合逻辑（`|`第一次拆分后任何内容都会消失），因此我将其删除。
*   您正在添加`selected`到每个选项。如果您只想选择第一个选项，则无需添加任何内容。如果您希望选择特定选项，请参阅我注释掉的行，它选择了第三个元素。

[http://jsfiddle.net/DhH3U/](http://jsfiddle.net/DhH3U/)

# android - SQLite Android 数据库光标窗口分配 2048 kb 失败

> ID：11340257
> 
> 赞同：78
> 
> 时间：2012-07-05T08:09:05.503
> 
> 标签：android, sqlite, memory, memory-leaks, database-cursor

我有一个例程每秒对 SQLite 数据库多次运行不同的查询。过了一会儿我会得到错误

`"android.database.CursorWindowAllocationException: - Cursor window allocation of 2048 kb failed. # Open Cursors = "`出现在 LogCat 中。

我有应用程序日志内存使用情况，实际上当使用达到一定限制时，我收到此错误，暗示它用完了。我的直觉告诉我，每次运行查询时，数据库引擎都会创建一个新缓冲区（CursorWindow），即使 .close() 游标，垃圾收集器也没有`SQLiteDatabase.releaseMemory()`足够快的速度释放内存。我认为解决方案可能在于“强制”数据库始终写入同一个缓冲区，而不是创建新缓冲区，但我一直无法找到这样做的方法。我曾尝试实例化我自己的 CursorWindow，并尝试将 SQLiteCursor 设置为它，但无济于事。

有任何想法吗？

编辑：来自@GrahamBorland 的示例代码请求：

```
public static CursorWindow cursorWindow = new CursorWindow("cursorWindow"); 
public static SQLiteCursor sqlCursor;
public static void getItemsVisibleArea(GeoPoint mapCenter, int latSpan, int lonSpan) {
query = "SELECT * FROM Items"; //would be more complex in real code
sqlCursor = (SQLiteCursor)db.rawQuery(query, null);
sqlCursor.setWindow(cursorWindow);
} 
```

理想情况下，我希望能够在进行新查询之前，并且每次获得新数据`.setWindow()`时都将数据放入相同的数据中。`CursorWindow`

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2013-03-20T22:43:04.773

大多数情况下，此错误的原因是未关闭的游标。确保在使用它们后关闭所有游标（即使在出现错误的情况下）。

```
Cursor cursor = null;
try {
    cursor = db.query(...
    // do some work with the cursor here.
} finally {
    // this gets called even if there is an exception somewhere above
    if(cursor != null)
        cursor.close();
} 
```

要在您不关闭光标时使您的应用程序崩溃，您可以在您的应用程序中启用[严格模式`detectLeakedSqlLiteObjects`](https://developer.android.com/reference/android/os/StrictMode.VmPolicy.Builder#detectLeakedSqlLiteObjects())`onCreate`：

```
StrictMode.VmPolicy policy = new StrictMode.VmPolicy.Builder()
   .detectLeakedClosableObjects()
   .detectLeakedSqlLiteObjects()
   .penaltyDeath()
   .penaltyLog()
   .build();
StrictMode.setVmPolicy(policy); 
```

显然，您只会为调试版本启用此功能。

* * *

## 回答 #2

> 赞同：84
> 
> 时间：2015-01-26T17:42:17.533

如果您必须深入挖掘大量 SQL 代码，您可以通过将以下代码片段放入 MainActivity 以启用 StrictMode 来加快调试速度。如果检测到泄漏的数据库对象，那么您的应用程序现在将崩溃，日志信息会突出显示您的泄漏位置。这帮助我在几分钟内找到了一个流氓光标。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
   if (BuildConfig.DEBUG) {     
         StrictMode.setVmPolicy(new StrictMode.VmPolicy.Builder()
         .detectLeakedSqlLiteObjects()
         .detectLeakedClosableObjects()
         .penaltyLog()
         .penaltyDeath()
         .build());
    }
    super.onCreate(savedInstanceState);
    ...
    ... 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-08-14T10:12:51.117

我刚刚遇到了这个问题——建议的答案是在有效时不关闭光标，这不是我修复它的方式。当 SQLite 试图重新填充它的游标时，我的问题是关闭数据库。我会打开数据库，查询数据库以获取数据集的游标，关闭数据库并遍历游标。我注意到每当我在该光标中点击某个记录时，我的应用程序都会在 OP 中出现同样的错误而崩溃。

我假设游标要访问某些记录，它需要重新查询数据库，如果它被关闭，它会抛出这个错误。我通过在完成所需的所有工作之前不关闭数据库来修复它。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-06-06T17:11:33.520

Android SQLite 光标窗口确实有一个最大大小，即 2MB，超过这个大小会导致上述错误。大多数情况下，此错误是由 sql 数据库中存储为 blob 的大型图像字节数组或太长的字符串引起的。这是我修复它的方法。

创建一个java类，例如。FixCursorWindow 并将下面的代码放入其中。

```
 public static void fix() {
        try {
            Field field = CursorWindow.class.getDeclaredField("sCursorWindowSize");
            field.setAccessible(true);
            field.set(null, 102400 * 1024); //the 102400 is the new size added
        } catch (Exception e) {
            e.printStackTrace();
        }
    } 
```

现在转到您的应用程序类（如果您还没有，请创建一个）并像这样调用 FixCursorWindow

公共类应用程序扩展应用程序{

```
public void onCreate()
{
    super.onCreate();
    CursorWindowFixer.fix();

} 
```

}

最后，确保您在应用程序标记的清单中包含您的应用程序类，如下所示

```
 android:name=".App"> 
```

就是这样，它现在应该可以正常工作了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-09-25T16:09:34.820

这是[@whlk](https://stackoverflow.com/a/15536202/4399414)对 try-finally 块的Java **7** [自动资源管理的回答：](https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)

```
try (Cursor cursor = db.query(...)) {
    // do some work with the cursor here.
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-07-04T11:32:51.637

如果您运行的是 Android P，您可以像这样创建自己的光标窗口：

```
if(cursor instanceof SQLiteCursor && Build.VERSION.SDK_INT >= Build.VERSION_CODES.P) {
    ((SQLiteCursor) cursor).setWindow(new CursorWindow(null, 1024*1024*10));
} 
```

这允许您修改特定光标的光标窗口大小，而无需借助反射。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2018-09-18T07:06:57.533

当我们特别使用外部 SQLite 时，这是一个正常的异常。您可以通过关闭光标对象来解决它，如下所示：

```
if(myCursor != null)
        myCursor.close(); 
```

这意味着，如果游标有内存并且它被打开然后关闭它，那么应用程序会更快，所有方法将占用更少的空间，并且与数据库相关的功能也将得到改进。

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2018-03-09T02:00:57.197

```
public class CursorWindowFixer {

  public static void fix() {
    try {
      Field field = CursorWindow.class.getDeclaredField("sCursorWindowSize");
      field.setAccessible(true);
      field.set(null, 102400 * 1024);
    } catch (Exception e) {
      e.printStackTrace();
    }
  }
} 
```

# pdf - 如何在 symfony 1.4 中使用 sfTCPDFPlugin 生成 PDF？

> ID：11340259
> 
> 赞同：1
> 
> 时间：2012-07-05T08:09:21.030
> 
> 标签：pdf, symfony1, cakephp-2.0, symfony-1.4, tcpdf

我想获得一个 pdf 的帖子详细信息，所以我安装了 sfTCPDFPlugin。我是新手，所以有人可以帮助我吗？

如何在 symfony 1.4 中使用 sfTCPDFPilugin 生成 PDF？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T08:43:31.997

您似乎遇到的主要问题是从模板中获取 HTML 输出以将其放入生成的 PDF 中。为此，您可以使用`getPartial`或`getPresentationFor`。

*   [getPartial](http://trac.symfony-project.org/browser/branches/1.4/lib/action/sfAction.class.php#L271)将呈现一个部分
*   [getPresentationFor](http://trac.symfony-project.org/browser/branches/1.4/lib/controller/sfController.class.php#L372)将呈现一个模块/动作

我建议您使用`getPartial`. 使用您要提取的内容创建一个部分（顺便说一下，如果您需要与 html 相同的信息，您将能够在其他地方使用相同的部分）。

假设您创建了一个名为 的部分`_my_partial.php`，您可以这样做：

```
public function executePdf()
{
  $config = sfTCPDFPluginConfigHandler::loadConfig();

  /* put all your PDF configuration */

  $html = $this->getPartial(
    'my_partial', 
    // put in this array all variables you want to give to the partial
    array('posts' => $posts)
  );

  $pdf->writeHTMLCell(
    $w=0, 
    $h=0, 
    $x='', 
    $y='', 
    $html, 
    $border=0, 
    $ln=1, 
    $fill=0, 
    $reseth=true, 
    $align='', 
    $autopadding=true
  );

  $pdf->Output('example_001.pdf', 'I');

  throw new sfStopException();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T08:16:42.717

请参阅链接以逐步使用 sfTCPDFPlugin 生成 PDF。

[http://www.symfony-project.org/plugins/sfTCPPDFPlugin/1_6_3?tab=plugin_readme](http://www.symfony-project.org/plugins/sfTCPDFPlugin/1_6_3?tab=plugin_readme)

# c# - 获取具有名称的 DataTable 列的索引

> ID：11340264
> 
> 赞同：49
> 
> 时间：2012-07-05T08:09:45.253
> 
> 标签：c#, asp.net, datatable, datarow

我有一些代码通过列名设置 DataRow 中单元格的值，即

```
row["ColumnName"] = someValue; 
```

我还想在上面找到的右侧的列中设置这一行的值。显然，如果我按索引而不是按列名获取单元格，这将很容易。那么有没有办法从列名中获取列索引，从而允许我这样做：

```
row[index + 1] = someOtherValue; 
```

即我是否需要在最初创建表时创建某种列索引和列名的字典，或者我可以稍后从列名中获取索引而不这样做？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-07-05T08:14:02.213

您可以使用[`DataColumn.Ordinal`](http://msdn.microsoft.com/en-us/library/system.data.datacolumn.ordinal.aspx)来获取`DataTable`. 因此，如果您需要提到的下一列，请使用`Column.Ordinal + 1`：

```
row[row.Table.Columns["ColumnName"].Ordinal + 1] = someOtherValue; 
```

## 警告：

此代码返回**下一**列，即问题中所要求的**后面的列。** `ColumnName`

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-07-05T08:17:25.440

试试这个：

```
int index = row.Table.Columns["ColumnName"].Ordinal; 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-12-23T09:11:32.260

您可以简单地使用[DataColumnCollection.IndexOf](https://msdn.microsoft.com/en-us/library/1dd8zxxb(v=vs.110).aspx)

这样您就可以按名称获取所需列的索引，然后将其与您的行一起使用：

```
row[dt.Columns.IndexOf("ColumnName")] = columnValue; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-04-28T10:43:50.620

我编写了 DataRow 的扩展方法，它通过列名获取对象。

```
public static object Column(this DataRow source, string columnName)
{
    var c = source.Table.Columns[columnName];
    if (c != null)
    {
        return source.ItemArray[c.Ordinal];
    }

    throw new ObjectNotFoundException(string.Format("The column '{0}' was not found in this table", columnName));
} 
```

它的名字是这样的：

```
DataTable data = LoadDataTable();
foreach (DataRow row in data.Rows)
{        
    var obj = row.Column("YourColumnName");
    Console.WriteLine(obj);
} 
```

# php - 使 mp3 可搜索 PHP

> ID：11340276
> 
> 赞同：10
> 
> 时间：2012-07-05T08:10:45.320
> 
> 标签：php, html

我做了这个 PHP 脚本

```
    $file_name = 'sample.mp3';

    header('内容类型：音频/mpeg');

    $opts = 数组（'http' =>
                      大批（
                          '方法' => 'GET',
                          'protocol_version' => 1.1,
                      )
    );
    $context = stream_context_create($opts);
    $stream = fopen($file_name, 'rb', FALSE, $context);
    $metadata = stream_get_meta_data($stream);
    $data = stream_get_contents($stream);
    打印（$数据）；
    fclose($流);

```

它可以成功流式传输 mp3 媒体，但我无法找到也在 html5`video`标签中播放的 mp3 文件无法从中提取元数据，请告诉我我做错了什么以及如何使这个过程正常工作，谢谢

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-05T09:46:16.540

在这里试试这个，支持部分下载和寻找任何文件大小，现在也可以在 chrome 中正常工作：

```
<?php 
$file_name = './sample.mp3';
stream($file_name, 'audio/mpeg');

/**
 * Stream-able file handler
 *
 * @param String $file_location
 * @param Header|String $content_type
 * @return content
 */
function stream($file, $content_type = 'application/octet-stream') {
    @error_reporting(0);

    // Make sure the files exists, otherwise we are wasting our time
    if (!file_exists($file)) {
        header("HTTP/1.1 404 Not Found");
        exit;
    }

    // Get file size
    $filesize = sprintf("%u", filesize($file));

    // Handle 'Range' header
    if(isset($_SERVER['HTTP_RANGE'])){
        $range = $_SERVER['HTTP_RANGE'];
    }elseif($apache = apache_request_headers()){
        $headers = array();
        foreach ($apache as $header => $val){
            $headers[strtolower($header)] = $val;
        }
        if(isset($headers['range'])){
            $range = $headers['range'];
        }
        else $range = FALSE;
    } else $range = FALSE;

    //Is range
    if($range){
        $partial = true;
        list($param, $range) = explode('=',$range);
        // Bad request - range unit is not 'bytes'
        if(strtolower(trim($param)) != 'bytes'){ 
            header("HTTP/1.1 400 Invalid Request");
            exit;
        }
        // Get range values
        $range = explode(',',$range);
        $range = explode('-',$range[0]); 
        // Deal with range values
        if ($range[0] === ''){
            $end = $filesize - 1;
            $start = $end - intval($range[0]);
        } else if ($range[1] === '') {
            $start = intval($range[0]);
            $end = $filesize - 1;
        }else{ 
            // Both numbers present, return specific range
            $start = intval($range[0]);
            $end = intval($range[1]);
            if ($end >= $filesize || (!$start && (!$end || $end == ($filesize - 1)))) $partial = false; // Invalid range/whole file specified, return whole file
        }
        $length = $end - $start + 1;
    }
    // No range requested
    else $partial = false; 

    // Send standard headers
    header("Content-Type: $content_type");
    header("Content-Length: " . ($partial ? $length : $filesize));
    header('Accept-Ranges: bytes');

    // send extra headers for range handling...
    if ($partial) {
        header('HTTP/1.1 206 Partial Content');
        header("Content-Range: bytes $start-$end/$filesize");
        if (!$fp = fopen($file, 'rb')) {
            header("HTTP/1.1 500 Internal Server Error");
            exit;
        }
        if ($start) fseek($fp,$start);
        while($length){
            set_time_limit(0);
            $read = ($length > 8192) ? 8192 : $length;
            $length -= $read;
            print(fread($fp,$read));
        }
        fclose($fp);
    }
    //just send the whole file
    else readfile($file);
    exit;
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T08:18:13.820

This should hopefully fix your problem, follow this method.

What you need to do is use `readfile()` and set `file_exists()` so that you can tell you're opening the correct file.

```
$extension = "mp3";
$mime_type = "audio/mpeg, audio/x-mpeg, audio/x-mpeg-3, audio/mpeg3";

if(file_exists($file_name)){
    header('Content-type: ' . $mime_type);
    header('Content-length: ' . filesize($file_name));
    header('Content-Disposition: filename="' . $file_name);
    header('X-Pad: avoid browser bug');
    header('Cache-Control: no-cache');
    readfile($file_name);
} 
```

[Reference](https://stackoverflow.com/questions/2358253/php-streaming-mp3)

# c++ - 我对 C++ 纯虚函数和接口的误解

> ID：11340279
> 
> 赞同：0
> 
> 时间：2012-07-05T08:10:57.937
> 
> 标签：c++, inheritance, pure-virtual

我喜欢在几个类中定义良好的接口，为此我在一个抽象类中创建了每个类都需要实现的纯虚函数。
但是我面临的问题是我可以实例化这些类，所以我必须创建另一个继承接口类的类，并且所有其他类都需要从这个基类继承。以下是代码示例：

## 界面

```
class Interface
{
     virtual std::string getName() = 0;
}

class Base : public Interface
{
   virtual std::string getName(return std::string("Base") ;)
}

class A : public Base
{
  std::string getName(return std::string("A") ;)

}

class B : public Base
{
  std::string getName(return std::string("B") ;)

} 
```

所有这一切，所以我可以在代码中为 A 和 B 提供相同的类型。
我可以只使用`Interface`没有类的`Base`类吗？
像这样的东西：

```
class A : public Interface
{
  std::string getName(return std::string("A") ;)

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T08:14:05.910

不，他们没有。所有从接口继承（直接或间接）的类都必须`virtual`在继承树的某处实现纯函数才能被实例化。

因此，您可以在基类或顶级类中实现该方法。

此外，您的语法很差：

```
class A : public Interface
{
  std::string getName()
  {
      return std::string("A");
  }
}; 
```

即使它不是从 派生的，上面也应该可以工作`Base`，因为您实现了纯虚方法 from `Interface`。

建议——制定你的`getName`方法`const`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-05T08:21:50.097

你不能实例化接口，但你可以做的是有一个指向接口的指针，指向一个实现的实例：

```
class Interface { /* pure virtual methods */ };
class A : virtual public Interface { /* implement all pure virtual methods */ };
class B : virtual public Interface { /* implement all pure virtual methods */ };

Interface * i0 = new A();
Interface * i1 = new B(); 
```

这是使用多态类的标准方式（尽管您可能希望使用[智能指针](http://en.wikipedia.org/wiki/Smart_pointer)而不是原始指针）。

**编辑**：关于虚拟继承的使用，请参阅[此处](http://en.wikipedia.org/wiki/Virtual_inheritance)和 [此处](https://stackoverflow.com/questions/21558/in-c-what-is-a-virtual-base-class)了解更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T08:13:49.077

如果基类具有纯虚函数，则不能创建基类的实例，因为它是抽象基类。如果您需要能够实例化此类，则其中没有任何纯虚函数。否则简单地从中派生。

# performance - 检查列大小+Alter table 或直接Alter table

> ID：11340280
> 
> 赞同：0
> 
> 时间：2012-07-05T08:11:02.743
> 
> 标签：performance, tsql, resize

我们有一个进程，它获取表列的列表和每个应该具有的大小（varchar 类型）并修改它们以确保它具有定义的大小。

在实际实现中我们直接对列表中的每一列执行一个alter table...

如果我们首先检查列大小是否与正确的大小不同，然后才执行更改表，它会运行得更快吗？

据统计，有 4000 左右的表列需要检查，最多 20 列需要更正......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T08:18:05.383

编辑：反映评论：

哪个更快取决于修改列的操作成本以及表中需要更改的列的数量。例如，更改一列空值并不是很昂贵。但是，如果您有很多数据，并且表中有很多列，则最好将表复制到新表中。根据您的数据库的指标来决定这一点，并不总是有正确和错误的答案。

您可能会创建一些动态 sql 来创建更改不正确大小的列的长度的 sql。这一定是最快的方法。

就像是：

```
SELECT  
     'some decision logic...' -- substitute values as needed 
FROM 
       INFORMATION_SCHEMA.COLUMNS
WHERE 
        ISNULL(CHARACTER_MAXIMUM_LENGTH, 5) <> 5 
    AND DATA_TYPE = 'NVARCHAR' 
```

您可以添加要考虑的指标、表大小、数据大小列数（分组依据）等。

Sql Server 已经存储了所有这些元数据，您可以查询它。在自定义表中复制此信息并在其上运行光标似乎是错误的。我认为您提到的问题是复制此信息可能会导致数据过时，而 sql server 元数据将始终是最新的。为了更容易，您可以创建元数据视图以使其易于使用。但这是一个不同的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T10:16:04.713

最后，我们在 alter table 之前实施了检查，在需要执行 alter 命令的情况下，进程运行速度明显更快

# asp.net-mvc-3 - 404.13 自定义错误的 IIS 配置

> ID：11340285
> 
> 赞同：8
> 
> 时间：2012-07-05T08:11:23.847
> 
> 标签：asp.net-mvc-3, iis-7

我在**IIS 7.0中托管了一个简单的****ASP.NET MVC 3**网站，并且在显示**404.13** http 状态代码的自定义 http 错误页面时遇到了困难。

 ****我的**Web.Config中有以下配置**

```
<system.web>
    <httpRuntime maxRequestLength="2048"/>
    <customErrors mode="Off"/> 
</system.web>

<system.webServer>
    <httpErrors errorMode="Custom" existingResponse="Replace">
        <clear/>
        <error statusCode="404" subStatusCode="-1" path="/home/showerror" responseMode="ExecuteURL"  />
        <error statusCode="404" subStatusCode="13" path="/home/showerror" responseMode="ExecuteURL"  />
    </httpErrors>
    <security>
        <requestFiltering>
            <requestLimits maxAllowedContentLength="1048576"/>
        </requestFiltering>
    </security>
</system.webServer> 
```

当我导航到一个不存在的页面时，我的错误页面会正确呈现。但是，如果我上传一个大于 1MB 的文件，我会看到一个空的 404 响应。该 url 永远不会被执行。如果我将**responseMode**更改为**Redirect**，则用户将被正确重定向。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T22:47:02.773

由于配置系统的锁定功能，很可能不会显示自定义错误。尝试以下命令解锁：

```
%windir%\System32\inetsrv\appcmd unlock config -section:system.webserver/httperrors 
```

在玩了几天 RequestFilters 和 CustomError 页面之后，它终于对我有用了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T16:08:39.520

我在集成模式下使用 IIS 7.5 时遇到了同样的问题。

最终我放弃了尝试处理 web.config 方法中的错误，而是将错误检测和处理移至 Application_EndRequest：

**将以下内容添加到您的 global.asax 文件中：**

如果您没有 global.asax (MVC)，那么您可以将其添加到页面错误中。

```
Protected Sub Application_EndRequest(ByVal sender As Object, ByVal e As System.EventArgs)

    Dim context As HttpContext = HttpContext.Current.ApplicationInstance.Context
    If Not IsNothing(context) Then

        If context.Response.StatusCode = 404 And
           context.Response.SubStatusCode = 13 Then

               context.Response.ClearHeaders()
               context.Server.Transfer("~/errors/404.13.aspx", False)
        End If

    End If
End Sub 
```****

# c# - 奇怪的 System.Runtime.InteropServices.COMException 错误

> ID：11340289
> 
> 赞同：0
> 
> 时间：2012-07-05T08:11:39.230
> 
> 标签：c#, winforms, dll, error-handling, publish

我在服务器上发布并安装了一个[Windows 窗体](http://en.wikipedia.org/wiki/Windows_Forms)应用程序，但是当我尝试使用它时，很遗憾地给了我这个错误：

```
************** Exception Text **************
System.Runtime.InteropServices.COMException (0x80040154): Retrieving the COM class factory for component with CLSID {40942A6C-1520-4132-BDF8-BDC1F71F547B} failed due to the following error:
80040154 Class not registered (Exception from HRESULT: 0x80040154 (REGDB_E_CLASSNOTREG)).
    at System.RuntimeTypeHandle.CreateInstance(RuntimeType type, Boolean publicOnly, Boolean noCheck, Boolean& canBeCached, RuntimeMethodHandleInternal& ctor, Boolean& bNeedSecurityCheck)
    at System.RuntimeType.CreateInstanceSlow(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache)
    at System.RuntimeType.CreateInstanceDefaultCtor(Boolean publicOnly, Boolean skipVisibilityChecks, Boolean skipCheckThis, Boolean fillCache)
    at System.Activator.CreateInstance(Type type, Boolean nonPublic)
    at System.Activator.CreateInstance(Type type)
    at PDFtoDoc.Form1.DoOCR(String FullPath)
    at PDFtoDoc.Form1.CheckFileAndDoOCR(String directoryPath)
    at PDFtoDoc.Form1.timer1_Tick(Object sender, EventArgs e)
    at System.Windows.Forms.Timer.OnTick(EventArgs e)
    at System.Windows.Forms.Timer.TimerNativeWindow.WndProc(Message& m)
    at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam) 
```

这对我来说似乎是一个“.dll”文件，但我不知道是哪一个，或者这是否是真正的问题。什么可能导致这种情况？我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T08:25:40.300

这是 COM 互操作的问题。您需要手动将 dll 文件复制到应用程序或将 dll 文件打包到安装程序中。

# c# - 设置winform DataGridView的显示格式

> ID：11340292
> 
> 赞同：2
> 
> 时间：2012-07-05T08:12:01.343
> 
> 标签：c#, winforms, datagrid

我是 WinForms 开发的新手，目前我正在维护一个在 .Net 2.0 中开发的应用程序

在应用程序中，我有一个名为 Length 的列的网格，它以单位显示值。我已经使用`CellFormatting`事件来格式化单元格值，否则它只是数字。

但是当用户开始编辑我不希望显示单位时，应该只允许用户输入数字。

有没有直接的方法可以做到这一点？要在网格上设置的事件或属性？

![在此处输入图像描述](../Images/35c979cd3fbae34dfd4e0bfdc5a5a661.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T08:42:22.993

您应该处理该`EditingControlShowing`事件以更改当前单元格格式。

```
 private void dataGridView1_EditingControlShowing(object sender, 
                               DataGridViewEditingControlShowingEventArgs e)
    {
        if (dataGridView1.CurrentCell.ColumnIndex == 1)
        {
            e.CellStyle.Format = "#";
            e.Control.Text = dataGridView1.CurrentCell.Value.ToString();
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T08:19:58.263

You should set the unit in the event DataGridView_CellFormatting

```
void DataGridView_CellFormatting(object sender, DataGridViewCellFormattingEventArgs e)
{
    if (e.ColumnIndex == 1)
    {
        int value;
        if(e.Value != null && int.TryParse(e.Value.ToString(), out value))
        {
            e.Value = value.ToString("#mm");
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T08:32:20.550

您可以使用 CellStyle Builder 设置格式字符串，并将自定义格式设置为 # mm

怎么做 ：

1.  右键单击网格，然后单击属性
2.  在属性窗口中，单击将弹出“编辑列”对话框的按钮
3.  选择要格式化的单元格
4.  在编辑列对话框的右侧，选择 DefaultCellStyle 属性
5.  单击 DefaultCellStyle 属性，然后将打开 CellStyleBuilder 对话框
6.  在这里你有格式属性，这会给你格式字符串对话框
7.  将自定义属性设置为#mm，您将在底部看到预览
8.  单击确定...直到您回到网格...

# java - 如何编译子文件夹中的java文件？

> ID：11340294
> 
> 赞同：1
> 
> 时间：2012-07-05T08:12:02.510
> 
> 标签：java, compilation

情况是我有一个 java 项目，其中 .java 文件分散在许多子文件夹中。我想使用 javac 编译所有 .java 但我尝试了下面的命令但失败了：javac -sourcepath src 错误是：javac：没有源文件用法：javac 使用 -help 获取可能选项的列表

那么我应该怎么做才能编译这个项目呢？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T08:19:07.790

`-sourcepath`指定 javac 将在哪里找到源文件，而不是您要编译的文件。您可以指定要编译的文件的名称，例如`javac -sourcepath src/ File.java AnotherFile.java`等，然后它将在其中查找输入文件`src/`。你也可以使用@参数，javac然后会从文本文件中读取选项和文件。或者，您可以使用 Ant 或 Maven，这些工具用于自动化软件构建。

但我建议使用 IDE。我喜欢 Eclipse，但其他 IDE，比如 NetBeans 也可以。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T08:24:48.850

好吧，您可以使用 Maven 或 Ant。这是一个很好的解释。[https://stackoverflow.com/a/5194967/1438132](https://stackoverflow.com/a/5194967/1438132)

但是对于您的问题，有一个名为*find*的命令。

```
find ./src -name "*.java" > sources_list.txt
javac -classpath "${CLASSPATH}" @sources_list.txt 
```

或者

```
javac -classpath "${CLASSPATH} -sourcepath src //along with src specify file names. 
```

# mysql - Magento：使用模块安装脚本添加产品属性

> ID：11340296
> 
> 赞同：1
> 
> 时间：2012-07-05T08:12:11.277
> 
> 标签：mysql, magento

我在 Magento 中制作了我的模块，但它需要为所有产品分配额外的属性。我制作了安装脚本，但它不起作用：

```
<?php

$installer = $this;
$installer->startSetup();

$installer->run("
    INSERT IGNORE INTO `{$installer->getTable('eav/attribute')}` (`attribute_id`, `entity_type_id`, `attribute_code`, `attribute_model`, `backend_model`, `backend_type`, `backend_table`, `frontend_model`, `frontend_input`, `frontend_label`, `frontend_class`, `source_model`, `is_required`, `is_user_defined`, `default_value`, `is_unique`, `note`) VALUES
    SELECT 1 + coalesce((SELECT max(attribute_id) FROM `{$installer->getTable('eav/attribute')}`),0),4,`is_accepted`,NULL,NULL,`int`,NULL,NULL,`boolean`,`Accepted`,NULL,`eav/entity_attribute_source_boolean`,1,1,'0',0,NULL);
");

$installer->endSetup(); 
```

配置.xml 文件：

```
<adminhtml>
<acl>
    <module_setup>
                    <setup>
                        <module>My_module</module>
                    </setup>
                    <connection>
                        <use>core_setup</use>
                    </connection>
                </module_setup>

                <module_write>
                    <connection>
                        <use>core_write</use>
                    </connection>
                </module_write>

                <module_read>
                    <connection>
                        <use>core_read</use>
                    </connection>
                </module_read>
            </resources>
        </acl>
</adminhtml> 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T08:46:28.393

首先，这不是一个有效的 config.xml。setup类配置如下：

```
<config>
    ...
    <global>
        ...
        <resources>
            ...
            <your_module_setup>
                <setup>
                    <module>Your_Module</module>
                    <class>Mage_Eav_Model_Entity_Setup</class>
                </setup>
            </your_module_setup>
            ...
        </resources>
        ...
    </global>
    ...
</config> 
```

除了 Mage_Eav_Model_Entity_Setup，您还可以使用自己的设置类，但它应该继承 Mage_Eav_Model_Entity_Setup，因此您可以使用 addAttribute 而不是手动伪造 SQL 查询。

然后您的安装脚本应该类似于以下内容：

```
$installer = $this;
$installer->startSetup();
/*
 * adds product unit attribute to product
 */
$installer->addAttribute(Mage_Catalog_Model_Product::ENTITY, 'productunit_id', array(
    'label' => Mage::helper('productunits')->__('Quantity Unit'),
    'type' => 'int',
    'input' => 'select',
    'source' => SGH_ProductUnits_Model_Entity_Attribute_Source_Units::MODEL,
    'backend' => SGH_ProductUnits_Model_Entity_Attribute_Backend_Units::MODEL,
    'required' => 1,
    'global' => 1,
    'note' => Mage::helper('productunits')->__('This will be displayed next to any Qty value.')
));
$installer->endSetup(); 
```

是我的代码添加了数量单位属性，不要被类常量的使用弄糊涂了，那些只是对应的类别名。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T08:36:05.417

您的`<module_setup>`节点必须在`config/global/resources`而不是在`config/adminhtml/acl`.

# android - 证书受 PC 信任，但不受 Android 信任

> ID：11340298
> 
> 赞同：82
> 
> 时间：2012-07-05T08:12:36.707
> 
> 标签：android, ssl-certificate

从今天早上开始，我的证书在 Android 上不再受信任，然后我的应用程序无法再连接：

```
 Catch exception while startHandshake: javax.net.ssl.SSLHandshakeException: java.security.cert.CertPathValidatorException: Trust anchor for certification path not found.
 return an invalid session with invalid cipher suite of SSL_NULL_WITH_NULL_NULL
 javax.net.ssl.SSLPeerUnverifiedException: No peer certificate
    at org.apache.harmony.xnet.provider.jsse.SSLSessionImpl.getPeerCertificates(SSLSessionImpl.java:137)
    at org.apache.http.conn.ssl.AbstractVerifier.verify(AbstractVerifier.java:93)
    at org.apache.http.conn.ssl.SSLSocketFactory.createSocket(SSLSocketFactory.java:381)
    at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:165)
    at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
    at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:591)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:807)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:781)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:770) 
```

如果我在谷歌浏览器（在 PC 上）中尝试没有问题并且证书是受信任的，但如果我在 Android 上的 Chrome 浏览器中尝试，它会告诉我证书不受信任。我能做些什么？

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2012-07-05T08:26:34.667

您的证书文件中可能缺少中间证书。如果您已经访问过具有相同证书卖家的另一个网站，则中间证书会被记住在您的浏览器中。对于您网站的每个访问者来说，这可能不会 - 甚至更好 - 不会是这种情况。要解决 SSL 连接中缺少中间证书的问题，您需要将中间证书添加到您自己的证书文件中。

GoDaddy 有一些关于中间证书的信息（但最好的来源始终是您的证书提供者）：http: [//support.godaddy.com/help/article/868/what-is-an-intermediate-certificate](http://support.godaddy.com/help/article/868/what-is-an-intermediate-certificate)

我曾经遇到过中间证书的问题（也有 Commodo），并且不得不将我自己的证书文件与中间 CA 结合起来才能工作。一旦完成，不再发生错误。

Godaddy 每个网络服务器的安装说明：http: [//support.godaddy.com/help/article/5346/installing-an-ssl-server-instructions ?locale=en](http://support.godaddy.com/help/article/5346/installing-an-ssl-server-instructions?locale=en)

以下是 Commodo 自己最常用的安装指南列表： https: [//support.comodo.com/index.php?/ Default/Knowledgebase/Article/View/1145/0/how-do-i-make-我自己的捆绑文件来自 crt 文件](https://support.comodo.com/index.php?/Default/Knowledgebase/Article/View/1145/0/how-do-i-make-my-own-bundle-file-from-crt-files)

根据您使用的网络服务器，您需要指定所有证书（域证书、中间证书和根证书）或按顺序将它们组合成一个（例如，用于 Nginx）：

1.  域证书
2.  中级证书
3.  根证书

在 SSH 终端中执行此操作的一种简单方法是键入：

```
cat domainfile intermediatefile rootfile > targetfile 
```

* * *

### 证书测试工具

如果您遇到更多问题或不确定证书是否正确，请尝试使用在线工具来验证您的 SSL 证书。例如：networking4all.com/en/ssl+certificates/quickscan

### SNI 支持 android 2.2 及更低版本

请注意，android 2.2（可能更早版本）不支持 SNI，它允许不同主机名的多个 SSL 证书在一个 IP 地址上工作而不会出现问题。感谢@technyquist 提供该信息。请查看[有关 SNI](https://stackoverflow.com/questions/5879894/android-ssl-sni-support)的 SO question，以获取有关此问题的更多信息。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-12-02T20:49:45.590

您必须创建一个 crt 包，然后就可以了。您将收到三个 crt 文件。全部使用！如果您只使用了 domain.crt，那么在 android 上会出现警告，但在 PC 上不会。

我在nginx上。我打开了domain_name.crt，然后打开了positivesslca2.crt，全选复制到domain_name.crt的末尾。然后打开AddTrustExternalCARoot.crt，再次复制到domain_name.crt的末尾。然后安装 domain_name.crt

效果很好。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-06-18T15:44:35.200

在此处添加此内容，因为它可能对某人有所帮助。我在使用 Android 时遇到问题，显示弹出窗口和无效证书错误。

我们有一个 Comodo 扩展验证证书，我们收到了包含 4 个文件的 zip 文件：

*   AddTrustExternalCARoot.crt
*   COMODORSAAddTrustCA.crt
*   COMODORSAExtendedValidationSecureServerCA.crt
*   www_mydomain_com.crt

我将它们全部连接在一行上，如下所示：

`cat www_mydomain_com.crt COMODORSAExtendedValidationSecureServerCA.crt COMODORSAAddTrustCA.crt AddTrustExternalCARoot.crt >www.mydomain.com.ev-ssl-bundle.crt`

然后我使用那个包文件作为我`ssl_certificate_key`在 nginx 中的文件。就是这样，现在可以工作了。

受此要点启发：[https ://gist.github.com/ipedrazas/6d6c31144636d586dcc3](https://gist.github.com/ipedrazas/6d6c31144636d586dcc3)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-01-27T20:42:27.100

我有同样的问题，我的问题是设备没有正确的日期和时间。一旦我确定证书是受信任的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-09-29T10:11:59.753

使用 Comodo PositiveSSL，我们收到了 4 个文件。

*   AddTrustExternalCARoot.crt
*   COMODORSAAddTrustCA.crt
*   COMODORSADomainValidationSecureServerCA.crt
*   我们的域名.crt

当我们按照 comodo 网站上的说明进行操作时 - 我们会收到一个错误，即我们的证书缺少中间证书文件。

基本上语法是

```
cat our_domain.crt COMODORSADomainValidationSecureServerCA.crt COMODORSAAddTrustCA.crt  AddTrustExternalCARoot.crt > domain-ssl_bundle.crt 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-12-12T10:51:42.053

我最近使用在 ssls.com 上购买的 Commodo 证书解决了这个问题，我有 3 个文件：

**domain-name.ca-bundle domain-name.crt**和**domain-name.p7b**

我不得不在 Nginx 上设置它，这是我运行的命令：

```
cat domain-name.ca-bundle domain-name.crt > commodo-ssl-bundle.crt 
```

然后我在 Nginx 配置文件中使用了 commodo-ssl-bundle.crt 并且像一个魅力一样工作。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-03-14T20:00:34.717

我遇到了同样的错误，因为我没有为**www** .my-domain.com 颁发 Let's Encrypt 证书，仅针对 my-domain.com

也为**www 发行。**[并在重定向到https://my-domain.com](https://my-domain.com)之前将虚拟主机配置为加载**www** .my-domain.com 的证书就可以了。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-09-22T17:15:23.407

当我尝试`SSLCertificateChainFile`为每个中间证书使用多个指令时，我在 Apache 2.2 下遇到了同样的问题；相反，我需要将所有三个连接到一个文件中。来自 GoDaddy，他们作为“捆绑”为我完成了这个额外的步骤，这对我来说是新的，但是重新阅读[Apache 文档](http://httpd.apache.org/docs/2.2/mod/mod_ssl.html#sslcertificatechainfile)使这一点变得明显。

值得注意的是，[从 Apache 2.4.8 开始不推荐使用](http://httpd.apache.org/docs/2.4/mod/mod_ssl.html#sslcertificatechainfile)此指令，因为您现在可以将所有中间体与实际证书连接起来。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-05-20T16:00:13.543

我希望我还不算太晚，这里的解决方案对我有用，我正在使用 COMODO SSL，随着时间的推移，上述解决方案似乎无效，我的网站[lifetanstic.co.ke](https://lifetanstic.co.ke)

您可以执行以下操作，而不是联系 Comodo 支持并获取 CA 捆绑文件：

当您从 Comodo（通过邮件）获得新的 SSL 证书时，他们会附上一个 zip 文件。您需要解压缩 zip 文件并在记事本等文本编辑器中打开以下文件：

```
AddTrustExternalCARoot.crt
COMODORSAAddTrustCA.crt
COMODORSADomainValidationSecureServerCA.crt 
```

然后复制每个“.crt”文件的文本并将文本粘贴在“证书授权包（可选）”字段中。

之后，只需像往常一样在“证书”字段中添加 SSL 证书，然后单击“按证书自动归档”按钮并点击“安装”。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-03-30T13:31:00.980

使用 Godaddy 证书，您很可能会拥有一个`domain.key`,`gd_bundle_something.crt`和（随机字母数字字符串）`4923hg4k23jh4.crt`

您需要：`cat gd_bundle_something.crt >> 4923hg4k23jh4.crt`

然后，在 nginx 上，您将使用

```
ssl                  on;
ssl_certificate      /etc/ssl/certs/4923hg4k23jh4.crt;
ssl_certificate_key  /etc/ssl/certs/domain.key; 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-04-12T06:31:24.220

我有同样的问题。另一种生成正确 .crt 文件的方法如下：

有时您会得到一个包含整个证书链的 .PEM 文件。该文件可能看起来像这样......

```
-----BEGIN RSA PRIVATE KEY-----
blablablabase64private...
-----END RSA PRIVATE KEY-----
-----BEGIN CERTIFICATE-----
blablablabase64CRT1...
-----END CERTIFICATE-----
-----BEGIN CERTIFICATE-----
blablablabase64CRT2...
-----END CERTIFICATE-----
... 
```

如果删除整个`private key`部分，您将拥有一个有效的链式 .crt

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-06-02T22:11:19.993

确保您还使用了中间 crt（带有捆绑包的 .crt 文件。一些提供商也将其称为捆绑包或 ca 证书）。然后在你的 ssl.conf 中，

```
SSLCertificateFile </path/for/actual/certificate>

SSLCACertificateFile </path/for/actual/intermediate_certificate> 
```

然后重新启动您的网络服务器：ex for apache use：

```
sudo service httpd restart 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2012-07-05T08:23:35.200

可能是您缺少设备上的证书。

试试看这个答案：[如何在 Android 设备上安装受信任的 CA 证书？](https://stackoverflow.com/questions/4461360/how-to-install-trusted-ca-certificate-on-android-device)了解如何在您自己的设备上安装 CA。

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2015-06-03T20:31:51.630

我有一个类似的问题，并写了一篇关于它的详细文章。如果有人有同样的问题，请随时阅读我的​​文章。

[https://developer-blog.net/administration/ssl-zertifikat-installieren/](https://developer-blog.net/administration/ssl-zertifikat-installieren/)

它是德语的详细问题描述。

# numpy - 追加/合并二维数组

> ID：11340299
> 
> 赞同：1
> 
> 时间：2012-07-05T08:12:39.713
> 
> 标签：numpy, 2d, append

是否可以使用 numpy 或其他方法在 Python 中合并 2D 数组？我有大约 200 个二维数组，它们都具有相同的维度 (1024,256)，并且希望将它们添加到彼此的下端。添加例如 3 个之后的最终形状应该是 (1024,768)。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T08:18:17.627

(1024,256) 的三个数组必须附加到*右端*，而不是*下端*。您将它们水平堆叠在一起（1024 行，256 列）。

使用[`numpy.hstack`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.hstack.html)（*h*作为水平）：

`lst`是（numpy 或 python）数组的列表`(1024,256)`：

```
numpy.hstack(lst) 
```

返回单个 numpy 数组`(1024,256*len(lst))`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T08:36:20.550

确实很简单，只要所有数组的大小相同。

```
>>> a = [[0,1,2],[3,4,5]]
>>> b = [[6,7,8],[9,10,11]]
>>> c = [a[i]+b[i] for i in xrange(len(a))]
>>> c
[[0, 1, 2, 6, 7, 8], [3, 4, 5, 9, 10, 11]] 
```

或更好

```
sum2darray = lambda a, b:  [a[i]+b[i] for i in xrange(len(a))]
c = sum2darray(a,b) 
```

# ruby-on-rails - 使用 Sorcery 登录 twitter

> ID：11340301
> 
> 赞同：1
> 
> 时间：2012-07-05T08:12:41.163
> 
> 标签：ruby-on-rails, sorcery

我不断收到此错误

`OAuth::Unauthorized in OauthsController#callback`

401未经授权

在此行中的 oauth_controller 错误 --- `@user = login_from(provider)`

我正在使用巫术 0.7.7

我的框架跟踪

```
oauth (0.4.6) lib/oauth/consumer.rb:216:in `token_request'
oauth (0.4.6) lib/oauth/tokens/request_token.rb:18:in `get_access_token'
sorcery (0.7.7) lib/sorcery/controller/submodules/external/protocols/oauth1.rb:22:in `get_access_token'
sorcery (0.7.7) lib/sorcery/controller/submodules/external/providers/twitter.rb:81:in `process_callback'
sorcery (0.7.7) lib/sorcery/controller/submodules/external.rb:46:in `login_from'
actionpack (3.1.0) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
actionpack (3.1.0) lib/abstract_controller/base.rb:167:in `process_action'
actionpack (3.1.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
actionpack (3.1.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
activesupport (3.1.0) lib/active_support/callbacks.rb:443:in `_run__203834006__process_action__491933260__callbacks'
activesupport (3.1.0) lib/active_support/callbacks.rb:386:in `_run_process_action_callbacks'
activesupport (3.1.0) lib/active_support/callbacks.rb:81:in `run_callbacks' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T21:16:45.117

我遇到过同样的问题。检查您的推特应用设置：

1.  回调 URL 应该相同，就像在你的巫术配置文件中一样。
2.  访问级别应为：读取、写入和直接消息
3.  检查你的巫术配置文件中是否有消费者密钥和秘密，而不是访问令牌和访问令牌秘密。

# math - 多边形坐标

> ID：11340305
> 
> 赞同：-4
> 
> 时间：2012-07-05T08:12:52.107
> 
> 标签：math, polygon

我们如何绘制多边形。当只给出边和半径时。我必须制作一个弹出框，它将半径和边数作为输入，并绘制一个多边形。只需要公式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T08:57:30.743

想象一个半径为 r 的圆。它就像一个正多边形，有无数条边。

三角函数告诉我们：

```
x = r * cos(a);
y = r * sin(a); 
```

我们知道一个圆圈中有 360 度或 2pi 弧度。因此，要绘制它，我们将从角度 = 0 开始，计算该坐标，进入下一个角度并计算该点，然后在两者之间画一条线。

我们只能围绕圆的边缘计算这么多点，最终不会有任何区别。如果圆足够小，即使是 8 条边也会看起来是圆的。

要绘制一个 8 边圆，我们需要在圆周围均匀分布 8 个点。将圆分成 8 个角，每个角为 2 * pi / 8 弧度。

所以：

```
angle = 0.0;
step = 2 * pi / 8;

for ( n = 0; n < 8; n++ ) {
    x = radius * cos(angle);
    y = radius * sin(angle);
    angle += step;
} 
```

现在你可以画一个八边形，改变它来画一般情况。

# c# - 使用 C# 实现信号量的最佳简单方法是什么？

> ID：11340308
> 
> 赞同：0
> 
> 时间：2012-07-05T08:13:07.260
> 
> 标签：c#, semaphore

作为求职面试的问题，使用 C# 实现信号量的最佳和简单方法是什么？
请添加您的代码
谢谢！
* 不使用带有 Win32 API 的信号量，我的意思是自己实现它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T08:14:16.050

.NET 框架带有一个[Semaphore](http://msdn.microsoft.com/en-us/library/kt3k0k2h)，所以这是最简单的方法：

```
var s = new Semaphore(2, 0); 
```

[但我猜面试官对它背后的结构更感兴趣......]

您只需要一个全局托管的访问控制实体，外部实体可以调用该实体来获取和释放锁。在 C# 中，您可以通过托管 Web 服务或远程处理类来执行类似的操作，这些类公开此类方法并可以保持活动锁的计数。

当达到锁定限制时，您只需返回否定响应，例如 false 表示无法获得锁定。

***改编自评论中的 Parv Sharma。***你可能正在看类似这样的东西。信号量需要锁定访问权限`resources`（因为获取信号量槽也是一个受保护的操作），但`resources`它们本身控制着*可用锁的数量*。然后，应用程序逻辑将指示究竟锁定了什么。

```
class CustomSemaphore 
{
    private static readonly object semaphoreLock = new object(); 
    private static readonly object[] resources = new[] { new object(), new object(), new object(), new object(), new object(), };

    public int AcquireLockObject() 
    { 
        lock (semaphoreLock)
        {
            for (int i = 0; i < 5; i++)
            { 
                if (Monitor.TryEnter(resources[i]))
                    return i; 
            } 
        }

        return -1; // Lock unsuccessful.
    } 

    public void ReleaseLockObject(int lockIndex)
    {
        // Sanity check lockIndex range etc.

        lock (semaphoreLock)
        {
            Monitor.Exit(resources[lockIndex]);
        }
    } 
} 
```

# git - 通过部分名称在 git 中切换分支

> ID：11340309
> 
> 赞同：15
> 
> 时间：2012-07-05T08:13:18.577
> 
> 标签：git, shell, console, bash-it

如果我在 git 中有以下分支

```
1194-qa-server
master
remotes/origin/1178-authentication
remotes/origin/1194-qa-server
remotes/origin/HEAD -> origin/master
remotes/origin/master 
```

我想使用 --just-- 数字切换到分支，即使这需要调用脚本 例如：

```
switch_branch 1178 
```

并且脚本/解决方案应该执行以下操作

1.  git branch -a （在我的存储库中查找所有本地和远程分支）
2.  按给定参数过滤（上面的“1178”）
3.  提取git可以使用的分支名称
4.  切换到那个分支

无需手动执行所有这些步骤的推荐方法是什么？

我正在使用 Mac OSX，如果这很重要的话。

更新——bash-it (github.com/revans/bash-it) 符合我的目的

```
Welcome to Bash It!

Here is a list of commands you can use to get help screens for specific pieces of Bash it:

  rails-help                  list out all aliases you can use with rails.
  git-help                    list out all aliases you can use with git.
  todo-help                   list out all aliases you can use with todo.txt-cli
  brew-help                   list out all aliases you can use with Homebrew
  aliases-help                generic list of aliases.
  plugins-help                list out all functions you have installed with bash-it
  bash-it-plugins             summarize bash-it plugins, and their installation status
  reference <function name>   detailed help for a specific function 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-09T03:54:39.867

您想要结帐的情况很少`remotes/origin/*`。它们存在，但出于此快捷方式的目的，我们不必担心它们。这会让你在 OSX 上得到你想要的：

```
git config --global alias.sco '!sh -c "git branch -a | grep -v remotes | grep $1 | xargs git checkout"' 
```

然后，您可以发出`git sco <number>`以签出包含`<number>`但不包括“远程”的分支。你可以改变`sco`成你想要的任何东西。我只是为“超级结帐”选择了它。

当然，如果您有多个匹配的分支，这将不会很好地工作`<number>`。然而，它应该是一个不错的起点。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-04-19T18:40:05.110

Here is my solution with fuzzy checkout: Add the alias to your `~/.gitconfig` by run

```
git config --global alias.fc '!f() { git branch -a | grep -m1 -e ${1}.*${2} | sed "s/remotes\/origin\///" | xargs git checkout; }; f' 
```

The command above will add the alias to your `~/.gitconfig`:

```
[alias]
    # fuzzy checkout branch, e.g: git cb feature 739, will checkout branch feature/PGIA-739-deploy-maximum
    fc = "!f() { git branch -a | grep -m1 -e ${1}.*${2} | sed \"s/remotes\\/origin\\///\" | xargs git checkout; }; f" 
```

The alias can have 2 parameters for the fuzzy matching, you can use it like:

```
git fc <keyword1> <keyword2> 
```

It will find the checkout the branch **first match**

For example, if you want to checkout your branch 1178, you can run:

```
git fc 1178 
```

the alias fc supports two parameters, if you want more accurate matching, you also can run:

```
git fc 1178 auth 
```

You also can find my other favorite snippets [here](https://snippets.cacher.io/snippet/81d0123963bf6a88c038)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-03-24T15:25:43.757

这是我为自己想出的解决方案。

```
[ ${#} -ne 1 ] && { echo -e "Please provide one search string" ; exit 1 ; }
MATCHES=( $(git branch -a --color=never | sed -r 's|^[* ] (remotes/origin/)?||' | sort -u | grep -E "^((feature|bugfix|release|hotfix)/)?([A-Z]+-[1-9][0-9]*-)?${1}") )
case ${#MATCHES[@]} in
  ( 0 ) echo "No branches matched '${1}'" ; exit 1  ;;
  ( 1 ) git checkout "${MATCHES[0]}"      ; exit $? ;;
esac
echo "Ambiguous search '${1}'; returned ${#MATCHES[@]} matches:"

for ITEM in "${MATCHES[@]}" ; do
  echo -e "  ${ITEM}"
done
exit 1 
```

我称它为`git-rcheckout`（“r”代表正则表达式，因为想要一个更好的名字）并将它放在我的路径中（它有点太长了，无法插入我的`.gitconfig`.）

它将尝试匹配本地和远程分支（尽管只检查本地分支），并且会容忍（IE 出于搜索目的而忽略）一些 JIRA 样式，例如以通用前缀开头的分支和类似 JIRA 票证 ID 的样式。

> 例如输入这个：
> 
> ```
> git rcheckout this 
> ```
> 
> 应该匹配类似的东西
> 
> ```
> this-branch
> feature/this-branch
> bugfix/JIRA-123-this-branch
> JIRA-123-this-branch
> remotes/origin/this-branch
> remotes/origin/feature/this-branch
> remotes/origin/bugfix/JIRA-123-this-branch
> remotes/origin/JIRA-123-this-branch 
> ```
> 
> 但是我使用的正则表达式足够宽容，你也可以这样做：
> 
> ```
> git rcheckout JIRA-123 
> ```
> 
> 访问：
> 
> ```
> bugfix/JIRA-123-this-branch
> JIRA-123-this-branch
> remotes/origin/bugfix/JIRA-123-this-branch
> remotes/origin/JIRA-123-this-branch 
> ```

它默认搜索分支前缀，但实际上，如果需要，您可以使用正则表达式来做更有趣的事情，如下所示：

```
git rcheckout '.*bran'
git rcheckout '.*is-br.*h' 
```

# c# - 检测意外的套接字断开连接

> ID：11340312
> 
> 赞同：5
> 
> 时间：2012-07-05T08:13:43.790
> 
> 标签：c#, sockets

这不是关于如何做到这一点的问题，而是关于我正在做的事情是否错误的问题。我读过，在等待数据（BeginReceive）时，如果不使用计时器或定期发送消息等，无法检测到套接字是否意外关闭（例如终止服务器/客户端进程，拉网线）。但是很长一段时间以来，我一直在使用以下设置来执行此操作，到目前为止，它一直运行良好。

```
public void OnReceive(IAsyncResult result)
{
    try
    {
        var bytesReceived = this.Socket.EndReceive(result);

        if (bytesReceived <= 0)
        {
            // normal disconnect
            return;
        }

        // ...

        this.Socket.BeginReceive...;
    }
    catch // SocketException
    {
        // abnormal disconnect
    }
} 
```

现在，由于我已经阅读了这并不容易，我想知道我的方法是否有问题。有没有？还是杀死过程和拉电缆等有区别？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-05T08:21:40.933

这样做是完全有可能的并且可以的。总体思路是：

**如果`EndReceive`返回零以外的任何值**，则您需要处理传入的数据。

**如果`EndReceive`返回零**，则远程主机已关闭其连接端。这意味着它仍然可以接收您发送的数据，如果它被编程为这样做，但在任何情况下都不能再发送它自己的任何数据。通常，当这种情况发生时，您还将关闭连接，从而完成有序的关闭，但这不是强制性的。

**如果`EndReceive`throws**，则连接异常终止（进程终止、网线断开、断电等）。

您需要注意的几点：

1.  `EndReceive`永远不能返回小于零（代码中的测试具有误导性）。
2.  如果它抛出它可以抛出除了`SocketException`.
3.  如果它返回零，你必须小心停止调用`BeginReceive`；`BeginReceive`否则，您将在和之间开始一场无限且毫无意义的乒乓球比赛`EndReceive`（它将显示在您的 CPU 使用率中）。您的代码已经这样做了，因此无需更改任何内容。

# java - JAXB 继承 + 元素重命名

> ID：11340316
> 
> 赞同：2
> 
> 时间：2012-07-05T08:13:54.870
> 
> 标签：java, xml, inheritance, jaxb

我有以下结构：

```
@XMLTransient
public abstract class Foo {
   protected String name;
}

@XmlRootElement
@XmlType(propOrder={"name"})
public class BarX extends Foo {

   public String getXThing() {
      return name;
   }

   public void setXThing(String thing) {
      name = thing;
   }
}

@XmlRootElement
@XmlType(propOrder={"name"})
public class BarY extends Foo {

   public String getYBlah() {
      return name;
   }

   public void setYBlah(String blah) {
      name = blah;
   }
} 
```

在 XML 中，我需要 BarX 而不是`name`标签`thing`，而对于 BarY，我想拥有`blah`而不是`name`. 有可能吗，我怎么能得到这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:13:13.680

您可以执行以下操作（您已经非常接近了）：

**富**

```
package forum11340316;

import javax.xml.bind.annotation.XmlTransient;

@XmlTransient
public abstract class Foo {
   protected String name;
} 
```

**酒吧X**

```
package forum11340316;

import javax.xml.bind.annotation.*;

@XmlRootElement
@XmlType(propOrder={"XThing"})
public class BarX extends Foo {

   @XmlElement(name="thing")
   public String getXThing() {
      return name;
   }

   public void setXThing(String thing) {
      name = thing;
   }

} 
```

**钡**

```
package forum11340316;

import javax.xml.bind.annotation.*;

@XmlRootElement
@XmlType(propOrder={"YBlah"})
public class BarY extends Foo {

   @XmlElement(name="blah")
   public String getYBlah() {
      return name;
   }

   public void setYBlah(String blah) {
      name = blah;
   }

} 
```

**演示**

```
package forum11340316;

import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(BarX.class, BarY.class);
        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);

        BarX barX = new BarX();
        barX.setXThing("XThing");
        marshaller.marshal(barX, System.out);

        BarY barY = new BarY();
        barY.setYBlah("YBlah");
        marshaller.marshal(barY, System.out);
    }

} 
```

**输出**

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<barX>
    <thing>XThing</thing>
</barX>
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<barY>
    <blah>YBlah</blah>
</barY> 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2011/06/ignoring-inheritance-with-xmltransient.html](http://blog.bdoughan.com/2011/06/ignoring-inheritance-with-xmltransient.html)
*   [http://blog.bdoughan.com/2011/06/using-jaxbs-xmlaccessortype-to.html](http://blog.bdoughan.com/2011/06/using-jaxbs-xmlaccessortype-to.html)

# scala - 从 Scala 2.9 到 2.10 的动态特征差异

> ID：11340318
> 
> 赞同：9
> 
> 时间：2012-07-05T08:13:59.967
> 
> 标签：scala

我编写了一小段代码来测试动态特征功能：

```
class Foo extends Dynamic {
  def selectDynamic(name: String) {
    println("selectDynamic: " + name)
  }
  def applyDynamic(name: String)(args: Any*) {
    println("applyDynamic: " + name)
  }
  def applyDynamicNamed(name: String)(args: (String, Any)*) {
    println("applyDynamicNamed: " + name)
  }
  def updateDynamic(name: String)(value: Any) {
    println("updateDynamic: " + name)
  }
}

object Test {
  def main(args: Array[String]) {
    val foo = new Foo
    foo.bar(5)     //1
    foo.bar(x = 5) //2
    foo.bar        //3
    foo.baz = 5    //4
  }
} 
```

问题是它不会在 Scala 2.9 和 2.10 中编译，因为第四行`main`：

```
error: reassignment to val
foo.baz = 5 
```

如果我评论这个字符串，2.9 会抱怨第二行：

```
error: not found: value x
foo.bar(x = 5) 
```

同时 2.10 将编译并且程序将产生：

```
applyDynamic: bar
applyDynamicNamed: bar
selectDynamic: bar 
```

所以现在我想知道我是否做错了什么（可能错过了一些依赖项）？Scala 2.9 和 2.10 中的 Dynamic 有区别吗？有什么问题`foo.baz = 5`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T19:36:42.347

这是一个错误：[https ://issues.scala-lang.org/browse/SI-5733](https://issues.scala-lang.org/browse/SI-5733)

# php - 需要语法帮助

> ID：11340326
> 
> 赞同：0
> 
> 时间：2012-07-05T08:14:30.597
> 
> 标签：php, object, syntax

我正在寻找直接从对象的方法访问数组值的类型。

例如 ：

使用这种语法，没问题：

```
$myArray = $myObject->getArray();

print_r($myArray[0]) 
```

但是为了减少源代码的行数，如何直接用方法获取元素呢？

我这样做了，但这是不正确的：

```
$myArray = $myObject->getArray()[0]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T08:16:16.673

以下内容仅适用于[PHP 5.4](http://php.net/releases/5_4_0.php)及更高版本。

```
$myArray = $myObject->getArray()[0]; 
```

不幸的是，没有比 PHP 5.4 更快的方法了。

请参阅[@deceze 的答案](https://stackoverflow.com/a/11340383/1157493)以获得一个不错的选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T08:18:18.297

For PHP 5.3-:

```
$myArray = current($myObject->getArray()); 
```

or

```
list($myArray) = $myObject->getArray(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T08:16:30.873

如果您使用的是 php 5.4（支持数组取消引用），您可以执行第二个选项：

```
$myArray = $myObject->getArray()[0]; 
```

如果您使用的是 PHP < 5.4，您可以在类中“修复”它（对象是一个实例）：

```
class Foo
{
    public function getArray()
    {
        return $this->theArray;
    }

    public function getFirstItem()
    {  
         return $this->theArray[0];
    }
}

$myObject = new Foo();
print_r($myObject->getFirstItem()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-05T08:21:10.713

> But to reduce the number of line in source code, how to get the element directly with the method ?

Although it *is* possible to achieve this in PHP 5.4 with the syntax you've demonstrated, I have to ask, why would you want that? There are ways of doing it in 5.3 in a one-liner, but I don't see the need to do this. The number of lines is surely less interesting than the readability of the code?

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-05T08:17:16.360

这是不可能的。

Serious answer: sadly it is not possible. You can write a very ugly wrapper like this:

```
function getValue($arr, $index)
{
    return $arr[$index];
}

$myArray = getValue($myObject->getArray(), 0); 
```

But that makes less readable code.

*read other answers about php 5.4 Finally!*

# java - Java字节码交换双值和长值？

> ID：11340330
> 
> 赞同：3
> 
> 时间：2012-07-05T08:14:50.913
> 
> 标签：java, jvm, java-bytecode-asm

我正在使用 ASM 开发 Java 检测引擎，并且存在评估堆栈顶部具有特定*值*的情况，我想在现有*value之前插入一个**ref*（这是*getstatic*的结果） 。即考虑只有一个*值*的堆栈: ，然后在*getstatic*我希望堆栈变成这样: 。**`value ->`*`ref, value ->`***

 ***要执行此行为，我必须插入以下字节码：*getsatic*和*swap*。使用 ASM，我会做类似的事情（考虑`mv`类型`MethodVisitor`）：

```
mv.visitFieldInsn(Opcodes.GETSTATIC, ...);
mv.visitInsn(Opcodes.SWAP); 
```

问题是*交换*字节码不支持`long`和`double`值。所以上面的代码对于单字类型是可以的，但是对于`long`和`double`类型就不行了。

是否有任何简单的解决方案来解决`long`和`double`类型的这个问题并且不需要辅助本地值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T13:54:41.960

我们有一个双字值 VV 和参考值 R。要从 VV... 到 VVR...，您可以将 R 值添加到堆栈顶部 (RVV...)，然后使用 dup_x2 (RVVR.. .) 然后弹出 (VVR...)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T09:31:18.260

在这里，您有一个 ASM 实用函数，它注入字节码以交换堆栈顶部的任何类型的操作数：

```
public static void swap(MethodVisitor mv, Type stackTop, Type belowTop) {
    if (stackTop.getNumberSlots() == 1) {
        if (belowTop.getNumberSlots() == 1) {
            // Top = 1, below = 1
            mv.visitInsn(Opcodes.SWAP);
        } else {
            // Top = 1, below = 2
            mv.visitInsn(Opcodes.DUP_X2);
            mv.visitInsn(Opcodes.POP);
        }
    } else {
        if (belowTop.getNumberSlots() == 1) {
            // Top = 2, below = 1
            mv.visitInsn(Opcodes.DUP2_X1);
        } else {
            // Top = 2, below = 2
            mv.visitInsn(Opcodes.DUP2_X2);
        }
        mv.visitInsn(Opcodes.POP2);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T08:25:40.033

最简单的解决方案是使用局部变量来交换堆栈上的项目。就像是：

```
DSTORE tmp
GETSTATIC ...
DLOAD tmp 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-05T10:00:49.380

使用序列 dup2x2，pop2。

从堆栈上的 XXYY 开始，dup2x2 为您提供 YYXXYY，而 pop2 则为您提供 YYXX。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-17T17:02:46.787

调用[org.objectweb.asm.commons.GeneratorAdapter.swap(Type,Type)](http://asm.ow2.org/asm30/javadoc/user/org/objectweb/asm/commons/GeneratorAdapter.html#swap%28org.objectweb.asm.Type,%20org.objectweb.asm.Type%29)。它是这样实现的：

```
public void swap(final Type prev, final Type type) {
    if (type.getSize() == 1) {
        if (prev.getSize() == 1) {
            swap(); // same as dupX1(), pop();
        } else {
            dupX2();
            pop();
        }
    } else {
        if (prev.getSize() == 1) {
            dup2X1();
            pop2();
        } else {
            dup2X2();
            pop2();
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-05T08:17:44.927

我会确保堆栈按它需要的顺序加载，而不需要交换。在优化代码方面，我建议您尝试生成尽可能接近生成的代码，`javac`因为这是 JVM 已调整优化的内容。

如果这是不可能的，您可以将值存储在局部变量中，推送`ref`并重新加载值。***

# php - 将逗号分隔值转换为双引号逗号分隔字符串

> ID：11340334
> 
> 赞同：7
> 
> 时间：2012-07-05T08:14:57.907
> 
> 标签：php, string, double, comma

我有一个逗号分隔的值，比如

```
alpha,beta,charlie 
```

我怎样才能将其转换为

```
"alpha","beta","charlie" 
```

在不使用 str_replace 的情况下使用 php 的单个功能？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-05T09:11:27.833

替代 Richard Parnaby-King 的函数（更短）：

```
function addQuotes($string) {
    return '"'. implode('","', explode(',', $string)) .'"';
}

echo addQuotes('alpha,beta,charlie'); // = "alpha","beta","charlie" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T08:59:59.430

```
/**
 * Take a comma separated string and place double quotes around each value.
 * @param String $string comma separated string, eg 'alpha,beta,charlie'
 * @return String comma separated, quoted values, eg '"alpha","beta","charlie"'
 */
function addQuote($string)
{
  $array = explode(',', $string);
  $newArray = array();
  foreach($array as $value)
  {
    $newArray[] = '"' . $value . '"';
  }
  $newString = implode(',', $newArray);
  return $newString;
} 
```

`echo addQuote('alpha,beta,charlie'); // results in: "alpha","beta","charlie"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T09:32:50.087

关于什么

```
 <?php
    $arr = spliti(",","alpha,beta,charlie");
    for($i=0; $i < sizeof($arr); $i++)
    $var = $var . '"' . $arr[$i] . '",';

    //to avoid comma at the end
    $var = substr($var, 0,-1);
    echo $var;
?> 
```

带功能：

```
<?php
function AddQuotes($str){
    $arr = spliti(",",$str);
    for($i=0; $i < sizeof($arr); $i++)
    $var = $var . '"' . $arr[$i] . '",';

    //to avoid comma at the end
    $var = substr($var, 0,-1);
    echo $var;
}
AddQuotes("alpha,beta,charlie");
?> 
```

# web - 显示具有相同 URL 的不同网站

> ID：11340335
> 
> 赞同：-1
> 
> 时间：2012-07-05T08:14:59.247
> 
> 标签：web, dns

我想为我在美国以外的客户显示不同的网站，如何在不使用子文件夹的情况下实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T08:22:18.823

首先你没有解释你的场景。我建议你解释一下以获得更好的答案。

无论如何，如果您想要国际化，那么您可以依赖任何 CMS，如 Wordpress、Joomla 等，您的所有内容都将保存在数据库中。这样，您将没有任何子文件夹，并且仍然是不同国家/地区的站点。还有更多细节，但基本上就是这样。

显然，如果您使用的是 CMS，则上述情况适用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T12:20:24.553

如果您的网站在 Joomla 中。我认为有一个 plugin.module 可以按区域分隔页面。无论如何，网站的网址是什么。

# php - 没有框架 >> .htaccess >> RewriteRule 给出 404 错误

> ID：11340336
> 
> 赞同：1
> 
> 时间：2012-07-05T08:15:07.000
> 
> 标签：php, .htaccess, xampp

我被困在一些看似愚蠢的事情上——被.htaccess RewriteRule 困住了。

问题：

我正在尝试将来自“项目”网站的“不存在”页面的所有流量重定向到 index.php 作为参数“q”。例如，假设用户访问了以下 URL：

```
http://localhost/project/products/ 
```

现在显然没有名为 products 的目录或文件，因此，

对于上面的 HTTP 请求，我想将其翻译为：

```
http://localhost/project/public/index.php?q=products 
```

设置：

服务器 - 带有 XAMPP 目录结构的 Apache 5.3.x：htdocs/project/public/index.php

为了解决这个问题，我已经做了什么：

在项目目录 >> `http://localhost/project/`>> 中放置了一个 .htaccess 文件，试图将所有流量转移到公共目录。规则看起来像这样......

```
<IfModule mod_rewrite.c>
RewriteRule ^$ public/ [L]
</IfModule> 
```

以上工作正常，所有用户都被重定向到 index.php 页面。

使用以下代码将另一个 .htaccess 文件放在公共目录中：

```
<IfModule mode_rewrite.c>
RewriteCond....
RewriteCond....
RewriteRule ^(.*)$ index.php?q=$1 [L,QSA]
</IfModule> 
```

现在，如果用户在栏中键入 URL：`http://localhost/project/hi`

我希望它被翻译为`http://localhost/project/public/index.php?q=hi`

相反，它给出了 404 错误。另请注意，被翻译到 Apache 的实际请求不应在 URL 栏中反映为永久重定向 [301]。

有人有解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T09:21:04.600

您的 htaccess 不在服务器根目录上。

然后您必须定义基本 url，并为您的重写规则使用完整路径：

```
RewriteEngine on
RewriteBase /project/

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f

RewriteRule ^(.*)$ /project/public/index.php?q=$1 [L,QSA] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T08:56:36.577

如果该文件**index.php**位于 /public/ ，那么您应该这样做

```
<IfModule mode_rewrite.c>
RewriteCond....
RewriteCond....
RewriteRule ^(.*)$ /project/public/index.php?q=$1 [L,QSA]
</IfModule> 
```

# php - 跨浏览器网络应用程序

> ID：11340337
> 
> 赞同：0
> 
> 时间：2012-07-05T08:15:15.317
> 
> 标签：php, cross-browser

我必须开发一个与移动设备以及桌面等兼容的网站。现在我已经完成了两个搜索选项。要么我为移动设备制作一个单独的应用程序，要么我为所有人开发一个（显然闪光更少）并让浏览器管理它们如何呈现它。

现在我的问题很简单。如果我为所有人创建一个站点，我会遇到什么问题？或者我为什么要为移动设备制作一个单独的网站。我的目标平台是所有最新版本的 Mac OS、Linux、Android、iOS 等。

编辑：我的网站有很多视觉效果，比如涉及大量 js 和 HTMl 的滑块和侧边栏小工具。除此之外，它应该是一个基于 CMS 的站点，例如 Wordpress 或 Drupal。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T08:21:46.467

它取决于站点。如果它只是简单的信息站点，只有文本和一些图像，那么最好以响应方式为这两种设备开发单个站点，但如果站点具有高多媒体内容，如视频、flash、mp3 或高分辨率图像，那就更好了为桌面和移动设备创建单独的站点，因为它很难在移动设备中加载多媒体内容。

并且移动网站也应该只针对网站的主要部分。它应该只包含网站的重要部分。移动网站应该简短而甜美。易于使用且易于加载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T08:20:41.860

看看 CSS 媒体查询 [http://www.w3.org/TR/css3-mediaqueries/](http://www.w3.org/TR/css3-mediaqueries/)、[http://mediaqueri.es/或类似](http://mediaqueri.es/)[http://jquerymobile.com/](http://jquerymobile.com/)的 框架。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T09:32:28.963

我相信这是一个可以接受的答案：

今天和大多数昨天的桌面和移动浏览器完全能够以尽可能多的闪光呈现网站。我会做一个响应式设计的单一网站。

如果在移动设备/较小的屏幕上不需要，请使用响应式设计将其隐藏。

# node.js - 在socket.io中，client.id什么时候改变？

> ID：11340339
> 
> 赞同：5
> 
> 时间：2012-07-05T08:15:35.190
> 
> 标签：node.js, tcp, websocket, socket.io

如果服务器使用 连接到 websocket 客户端`socket.io`，会导致`client.id`更改的事件是什么？

1.  服务器重置

2.  客户端打开新连接

还有其他的，比如超时吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T09:42:09.767

当客户端连接到 socket.io 服务器时，会`id`为连接生成新的。并且没有其他地方`id`生成。

服务器重置，客户端打开新连接，超时（和重新连接） - 所有这些都会触发 new 的创建`id`，因为实际上客户端必须创建到 socket.io 服务器的新连接。

# android - 更改 Android 4.0.3 的 DatePickerDialog 按钮的顺序

> ID：11340340
> 
> 赞同：1
> 
> 时间：2012-07-05T08:15:45.177
> 
> 标签：android, android-layout, android-intent, android-emulator, android-widget

我创建了一个`DatePickerDialog`：

```
DatePickerDialog datePickerDialog = new DatePickerDialog(getActivity(), this, year, month, day); 
```

并在**Android 4.0.3 (API 15)**设备上显示它，它看起来像这样：

![在此处输入图像描述](../Images/ca6c65c1c63097147b34bf4ed6deca7e.png)

如上所示，“**取消**”按钮显示在左侧，而“**设置**”按钮显示在右侧。但在 Android 2.3.3 上，按钮顺序是相反的。

那么，如何更改按钮的顺序以便在**Android 4.0.3**设备上显示左侧的`DatePickerDialog`“**设置”按钮和右侧的“****取消**”按钮？

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T11:41:21.907

> 那么，如何更改 DatePickerDialog 的按钮顺序，以便在 Android 4.0.3 设备上显示左侧的“设置”按钮和右侧的“取消”按钮？

你没有。要么不理会它们，要么用自己的对话框创建自己的对话框，其中`DatePicker`的按钮顺序错误。

请记住，大多数 Android 应用程序用户使用的不仅仅是您的 Android 应用程序。他们实际上使用其他应用程序。其中一些其他应用程序将使用`DatePickerDialog`，并且这些对话框将具有按钮顺序，如屏幕截图所示。对你的用户来说，坚持设备标准（所以他们的所有`DatePickerDialogs`工作都一样）比在某些设备上强制错误的按钮顺序更重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-22T14:29:03.057

实际上你可以而且你不需要创建自己的自定义对话框：

```
... 
datePickerDialog.show();

    Button negativeButton = datePickerDialog.getButton(DatePickerDialog.BUTTON_NEGATIVE);
    ViewParent buttonParent = negativeButton.getParent();

    if (buttonParent instanceof LinearLayout)
    {
        LinearLayout datePickerDialogLayout = ((LinearLayout) buttonParent);
        datePickerDialogLayout.removeView(negativeButton);
        datePickerDialogLayout.addView(negativeButton);
    } 
```

所以我们在这里做的是：

1）显示对话框（！）后，我们从其父布局中删除一个否定按钮（在您的情况下为“取消”）。当它被移除时，“设置”按钮（或对话框中的任何其他按钮）将成为布局中的最后一个元素。

2）再次添加它（否定按钮）。因此，最后添加的视图成为父布局中的最后一个元素，即对话框。**

# android - 使用自己的 UI 为 Vodafone Smart Tab 构建自己的 Android

> ID：11340343
> 
> 赞同：2
> 
> 时间：2012-07-05T08:15:53.413
> 
> 标签：android, build, porting, tablet, android-source

我们正在进行实验项目，我们需要构建自己的 Android 并用我们自己的 Android 3.2 随附的 Vodafone Smart Tab 的 UI 替换它。作为资源，我使用[http://source.android.com/](http://source.android.com/)和[http://www.youtube.com/watch?v=1_H4AlQaNa0](http://www.youtube.com/watch?v=1_H4AlQaNa0)。

我的问题是：

我需要一些特殊的供应商代码来将构建移植到 Vodafone Smart Tab 吗？

替换常见的Android UI会不会有一些问题？我需要替换系统 UI 而不仅仅是创建一些应用程序。

我能否使用最新的 Android 版本，还是必须使用最初随设备分发的 Android 3.2？

# javascript - 如何使用电话间隙jQuery移动在iphone中使用邮件编辑器插件发送电子邮件

> ID：11340346
> 
> 赞同：0
> 
> 时间：2012-07-05T08:16:03.993
> 
> 标签：javascript, iphone, jquery-mobile, cordova, mfmailcomposer

我已经**在 PhoneGap (corDova) 中使用 jQuery Mobile 实现了一个应用程序。**

我已经下载了用于发送电子邮件的**EmailComposer 插件。**

我在我的 www 文件夹中添加了 EmailCompser.js，在应用程序的资源文件夹中添加了 EmailCompser.h、EmailCompser.m。

我在 jQuery mobile 中创建了一个按钮。

现在我想**在单击“邮件”按钮时填充邮件编辑器视图**

```
<a href="???" data-icon="arrow-r" data-iconpos="left" class="ui-btn-left" >E-MAIL</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T09:27:45.403

除非您编写cordova代码来启动插件，否则单击链接时不会打开它，试试这个：

```
<script type="text/javascript">
function openMail(){
  var args;
  Cordova.exec(null, null, "EmailComposer", "showEmailComposer", [args]);
}
</script>

<a href="#" onclick="openMail()" data-icon="arrow-r" data-iconpos="left" class="ui-btn-left" >E-MAIL</a> 
```

# c++ - swig 用变量扩展模板类

> ID：11340349
> 
> 赞同：3
> 
> 时间：2012-07-05T08:16:15.100
> 
> 标签：c++, swig

我正在为模板类构建一个 Swig 接口。在我的 pyinterface.i 文件中，我声明

```
%template (myclass) MyClass<int>; 
```

现在我想做的是向我的新类添加一个字段变量，我认为应该这样做

```
%extend MyClass<int>{
    double x;
} 
```

但是，这抱怨没有

> myclass_get_x

方法定义。因此，如果我尝试通过将上述内容修改为：

```
%extend MyClass<int>{
    double x;
    double MyClass<int>_get_x(MyClass<int> *f){
            return (*f)->x;
    }
} 
```

然后我得到语法错误。

我试着这样做：

```
%extend myclass{
    double x;
    double myclass_get_x(myclass *f){
            return (*f)->x;
    }
} 
```

但这也会引发错误，因为 myclass 似乎还没有被理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T08:23:46.403

当你扩展一个类时，`%extend`你不能真正添加​​任何新的成员变量，只能添加成员函数。如果您在`%extend`.

这样做的原因是新成员变量的存储（即内存）必须存在于某个地方，但是没有明显的安全位置可以放置它。您不能修改原始 C++ `class`，因为如果您这样做，当其他一些预编译代码使用该类的旧定义时，您最终会出现未定义的行为；没有办法追溯应用新定义。您不能将它放在以目标语言生成的代理中，因为 C++ 类的实例和目标语言中的代理之间没有 1:1 的映射。（考虑两个函数，它们都通过指针返回相同的全局实例，以了解如何发生这种情况的简单示例）。

如果你想实现 get/set 函数来做一些有用的事情（例如，这里我使用全局映射来存储额外的数据）你不想在内部实现它们`%extend`例如，给定 test.hh，只需要：

```
template <typename T>
struct Foo {}; 
```

您可以通过在包装器中编写自己的获取和设置作为自由函数来使用 a`std::map`来完成您想要做的事情 -`%{ %}`只需直接传递代码：

```
%module test

%include "test.hh"

%{
#include "test.hh"
%}

%{
#include <map>
static std::map<Foo<int>*, double> extra_stuff;

const double& Foo_Sl_int_Sg__x_get(Foo<int>* f) {
  return extra_stuff[f];
}

void Foo_Sl_int_Sg__x_set(Foo<int>* f, const double& d) {
  extra_stuff[f] = d;
}
%}

%template(FooInt) Foo<int>;

%extend Foo<int> {
  double x;
} 
```

get/set 函数被 SWIG 自己的修改系统修改，因为它是一个模板。我只是查看了生成的包装类以查看它们的名称。（我认为可能有更聪明的方法可以做到这一点，但我还无法从文档中弄清楚）。如果它不是模板，则函数的名称会简单得多。

请注意，这里没有规定永远从此地图中删除条目 - 它只会无限增长。（例如，您可以通过提供一个在对象生命周期结束时调用额外函数的类型映射来解决这个问题）。您还需要注意线程。

由于您没有指定您使用的语言，我用 Java 测试了上面的代码：

```
public class run {
  public static void main(String[] argv) {
    System.loadLibrary("test");
    FooInt f = new FooInt();
    f.setX(0.1);
    System.out.println(f.getX());
  }
} 
```

或者，如果您真的想要，您可以编写代码以确保目标语言中存在唯一的单个代理实例，方法是编写一个类型映射来检查是否已创建代理而不是始终创建一个，但这会引发参考问题计数和线程安全很难有效和通用地解决，这就是为什么它不是默认行为。

在许多情况下（例如目标语言中的迭代器），最简单的解决方法是使用`%inline`一次性声明、定义和包装一个全新的额外类，该类提供您想要的功能。

# asp.net - Visual Studio 2010 下 ASP.NET 中的 Response.Redirect 中重复的虚拟路径

> ID：11340352
> 
> 赞同：4
> 
> 时间：2012-07-05T08:16:19.483
> 
> 标签：asp.net, http-error, virtual-path

我的 VS 2010 问题之一有问题。假设我在网站 MyWebSite 中有一个页面 MyPage.aspx，其虚拟路径为 MyWebSitePath。当我将调用重定向到另一个页面 MyPage1.aspx 时，我的虚拟路径加倍并且我得到 HTTP 错误 400 - 错误请求，这是有道理的，因为我得到的 Url 是`MyWebSite/MyWebSite/MyPage1.aspx`.

我用`Response.Redirect("~/MyPage1.aspx",true);`

我已经尝试过使用重定向页面的字符串。不是这样，我猜它可能在某处的 SLN 文件中，但我真的不知道。

变酸的代码示例：

```
/// <summary>
/// Play audio file using response.redirect, can throw
/// </summary>
/// <param name="response">used to redirect to the created file path</param>
/// <param name="filePath"></param>
/// <param name="fileName"></param>
public static void PlayAudioFile(Page page, string filePath, string fileName) 
{        
    const string TempFolder ="tmp";
    string newPath = page.Server.MapPath(TempFolder);
    string newFileName = Guid.NewGuid().ToString() + fileName;
    System.IO.File.Copy(filePath +"\\" + fileName, newPath+"\\" + newFileName,true);
    page.Response.Redirect(TempFolder + "\\" + newFileName);
} 
```

在此先感谢，尤瓦尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T12:38:58.947

它花了很长时间，但我终于弄清楚了问题所在。问题是这个小虫子（明白吗？虫子？）：

```
 asp:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server"          
 EnableScriptGlobalization="true"
        EnableScriptLocalization="true"
 /asp:ToolkitScriptManager> 
```

当我将它切换到标准时，一切都开始工作了。不幸的是，我忽略了说这个项目是建立在一个旧项目之上的，该项目是从 VS2008 迁移到 VS2010 的，以及它的所有二进制文件。我没有彻底研究过，但似乎这是由于使用了不合适的 Ajax Control Toolkit 版本造成的。我的项目是.Net 4.0，工具包是3.5。

谢谢你所有的时间，尤瓦尔。

# sql - sql insert select from – 具有唯一列 id 的多行

> ID：11340354
> 
> 赞同：3
> 
> 时间：2012-07-05T08:16:34.957
> 
> 标签：sql, tsql

我正在尝试使用插入选择从一个查询复制多条记录。

```
Insert into tab_A(colId, col1, col2, col3)
Select colId, col1, col2, col3  form tab_A
Where colId in ( 2,4,6) 
```

是否可以为新条目分配不同的 colId？例如，colid 2 应该替换为 23、4 替换为 24 和 6 替换为 25。如何在单个查询中实现它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T08:24:19.980

这会工作

```
Insert into tab_A(colId, col1, col2, col3)
Select 23 , col1, col2, col3  form tab_A Where colId = 2 UNION ALL
Select 24 , col1, col2, col3  form tab_A Where colId = 4 UNION ALL
Select 25 , col1, col2, col3  form tab_A Where colId = 6 
```

如果您提供更多信息，我可以提供更可重用的东西。应该/是`colId`（是）一个身份列吗？

* * *

**编辑**

这将适用于这种非常特殊的情况

```
Insert into tab_A(colId, col1, col2, col3)
Select ((colId - 4) * (-1)) + colId + 20 , col1, col2, col3  
    form tab_A Where colId IN (2, 4, 6) 
```

该功能`newId = ((oldId - 4) * (-1)) + oldId + 20`显然特定于所述问题。

* * *

**编辑2**

我怀疑像这样更通用的方法是合适的。

```
DECLARE @MaxColID INT

BEGIN TRANSACTION

SELECT @MaxColID = MAX(ColID) FROM tab_A

INSERT tab_A(colId, col1, col2, col3)
SELECT row + @MaxColID, col1, col2, col3
    FROM
    (
        SELECT ROW_NUMBER() OVER (ORDER BY ColID) row, col1, col2, col3
        FROM tab_A WHERE colID IN (2, 4, 6)
    )

COMMIT 
```

* * *

**编辑 3**

如果您认为**EDIT 2**实际上是您想要的，那么您真的想要创建`ColID`一个[`IDENTITY`](http://msdn.microsoft.com/en-us/library/ms186775.aspx)专栏，那么您可以这样做。

```
INSERT tab_A (col1, col2, col3)
SELECT col1, col2, col3  FROM tab_A WHERE colId IN (2, 4, 6) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T08:24:26.607

我在您的查询中没有看到 col4 或 col6，但这是您想要的：

```
Insert into tab_A(colId, col1, col2, col3)
Select colId, col1, 23, col3  form tab_A
Where colId in ( 2,4,6) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T08:43:00.780

您是否刚刚尝试将不想要的差异添加到`colId`- 在您的情况下，由于您需要将 2 替换为 23，因此差异为 21。

```
Insert into tab_A(colId, col1, col2, col3) 
Select colId+21, col1, col2, col3 
form tab_A Where colId in ( 2,4,6) 
```

**注意**：我错过了这部分，在你的情况下差异并不一致。仅当差异相同时，建议的解决方案才有效

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T08:45:21.793

有几个选项：

将新的 ID 列添加到原始表并在执行此插入之前用新值填充它，选择新的 ID 列而不是旧的。这将是我认为最整洁的解决方案。

备选方案 - 根据规则修改插入的 ID 值，例如

```
INSERT INTO tab_A(colID, col1, col2, col3)
SELECT colId + 20, col1, col2, col3
FROM tab_A
WHERE colID IN(2,4,6) 
```

最后的手段 - 使用游标顺序处理插入，每次修改 ID 值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-16T07:19:50.143

您也可以在选择中写大小写。当 2 然后 23 或任何值。

# ruby - 如何卸载红宝石

> ID：11340358
> 
> 赞同：0
> 
> 时间：2012-07-05T08:17:09.110
> 
> 标签：ruby

如何卸载系统安装的 ruby​​？

我在 ubuntu 11.1 上。我已经安装了 rvm，但似乎 1.8 是冲突的。如何删除现有的 ruby​​ 安装并干净地安装 ruby​​？

谢谢，穆尔塔萨

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T08:23:24.247

尝试使用 always rvm 安装 ruby​​。这是一个好习惯，易于管理，请点击此链接

```
 http://ryanbigg.com/2010/12/ubuntu-ruby-rvm-rails-and-you/ 
```

然后只需通过此命令安装任何 ruby​​ 版本

```
 rvm install 1.9.2 
```

如果删除此 ruby​​ 版本，则使用

```
 rvm remove 1.9.2 
```

如果你没有 rvm install 然后使用这个命令

```
 aptitude purge ruby 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T09:26:19.373

```
sudo apt-get purge ruby rubygems 
```

它可以删除通过 apt-get 安装的 ruby

# c++ - Spirit Qi sequence parsing issues

> ID：11340359
> 
> 赞同：2
> 
> 时间：2012-07-05T08:17:10.200
> 
> 标签：c++, parsing, boost, boost-spirit, lookahead

I have some issues with parser writing with Spirit::Qi 2.4. I have a series of key-value pairs to parse in following format `<key name>=<value>`.

*Key name* can be `[a-zA-Z0-9]` and is always followed by `=` sign with no white-space between *key name* and `=` sign. *Key name* is also always preceded by at least one space.

*Value* can be almost any C expression (spaces are possible as well), with the exception of the expressions containing `=` char and code blocks `{ }`.

At the end of the sequence of the key value pairs there's a `{` sign.

I struggle a lot with writing parser for this expression. Since the key name always is preceded by at least one space and followed by `=` and contains no spaces I defined it as

```
 KeyName %= [+char_("a-zA-Z0-9_") >> lit("=")] ; 
```

Value can be almost anything, but it can not contain `=` nor `{` chars, so I defined it as:

```
 Value %=  +(char_ - char_("{=")) ; 
```

I thought about using look-ahead's like this to catch the value:

```
ValueExpression 
    %= ( 
      Value  
      >> *space 
      >> &(KeyName | lit("{"))
    )
    ; 
```

But it won't work, for some reason (seems like the `ValueExpression` greedily goes up to the `=` sign and "doesn't know" what to do from there). I have limited knowledge of LL parsers, so I'm not really sure what's cooking here. Is there any other way I could tackle this kind of sequence?

Here's example series:

```
EXP1=FunctionCall(A, B, C) TEST="Example String" \
AnotherArg=__FILENAME__ - 'BlahBlah' EXP2= a+ b+* { 
```

**Additional info:** since this is a part of a much larger grammar I can't really solve this problem any other way than by a Spirit.Qi parser (like splitting by '=' and doing some custom parsing or something similar).

**Edit:**

I've created minimum working example here: [http://ideone.com/kgYD8](http://ideone.com/kgYD8)
(compiled under VS 2012 with boost 1.50, but should be fine on older setups as well).

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T22:06:31.180

我建议你看看文章[Parsing a List of Key-Value Pairs Using Spirit.Qi](http://boost-spirit.com/home/articles/qi-example/parsing-a-list-of-key-value-pairs-using-spirit-qi/)。

我*大大*简化了您的代码，而

*   添加属性处理
*   去除凤凰语义动作
*   规则调试

在这里，事不宜迟：

```
#define BOOST_SPIRIT_DEBUG

#include <boost/fusion/adapted.hpp>
#include <boost/spirit/include/qi.hpp>
#include <map>

namespace qi = boost::spirit::qi;
namespace fusion = boost::fusion;

typedef std::map<std::string, std::string> data_t;

template <typename It, typename Skipper>
struct grammar : qi::grammar<It, data_t(), Skipper>
{
    grammar() : grammar::base_type(Sequence)
    {
        using namespace qi;

        KeyName  = +char_("a-zA-Z0-9_") >> '=';
        Value    = qi::no_skip [+(~char_("={") - KeyName)];
        Sequence = +(KeyName > Value);

        BOOST_SPIRIT_DEBUG_NODE(KeyName);
        BOOST_SPIRIT_DEBUG_NODE(Value);
        BOOST_SPIRIT_DEBUG_NODE(Sequence);
    }
  private:
    qi::rule<It, data_t(), Skipper>      Sequence;
    qi::rule<It, std::string()>          KeyName; // no skipper, removes need for qi::lexeme
    qi::rule<It, std::string(), Skipper> Value;
};

template <typename Iterator>
data_t parse (Iterator begin, Iterator end)
{
    grammar<Iterator, qi::space_type> p;

    data_t data;

    if (qi::phrase_parse(begin, end, p, qi::space, data)) {
        std::cout << "parse ok\n";
        if (begin!=end) {
            std::cout << "remaining: " << std::string(begin,end) << '\n';
        }
    } else {
        std::cout << "failed: " << std::string(begin,end) << '\n';
    }

    return data;
}

int main ()
{
    std::string test(" ARG=Test still in first ARG ARG2=Zombie cat EXP2=FunctionCall(A, B C) {" );
    auto data = parse(test.begin(), test.end());

    for (auto& e : data)
        std::cout << e.first << "=" << e.second << '\n';
} 
```

输出将是：

```
parse ok
remaining: {
ARG=Test still in first ARG 
ARG2=Zombie cat 
EXP2=FunctionCall(A, B C) 
```

如果您真的希望 '{' 成为最后一个值的一部分，请更改此行：

```
Value    = qi::no_skip [+(char_ - KeyName)]; 
```

# nintex-workflow - Where to find documentation for Nintex Workflow web service?

> ID：11340366
> 
> 赞同：3
> 
> 时间：2012-07-05T08:17:29.040
> 
> 标签：nintex-workflow

Where do I find documentation for Nintex Workflow web service?

The webservice can be found under `http://myservername/MyNintexSite/_vti_bin/nintexworkflow/workflow.asmx`, but the methods require parameters and I cannot find description, what those parameters are.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T08:33:50.450

Nintex [Workflow 2007 SDK](http://connect.nintex.com/files/folders/sdk/entry122.aspx)里面有一个文件`Nintex Workflow 2007 SDK 1.2.pdf`。此文件的末尾（第 131-186 页）是 Web 服务的文档

# blackberry - How can i select a drop down which i added over a list field?

> ID：11340367
> 
> 赞同：3
> 
> 时间：2012-07-05T08:17:33.223
> 
> 标签：blackberry, blackberry-simulator, blackberry-eclipse-plugin

Hi Friend's in my BlackBerry Application i use a list Field, and over this list Field i add a drop down. Now my problem is how do i select the drop down which i added over the list Field.Now i only select list field and not the drop down but my requirement is first i should select the drop down and then list field. I have included my code here please check it.

```
public class TaskListField extends ListField implements ListFieldCallback, KeypadListener {
   private Vector rows;
   private Bitmap p1;
   private Bitmap p2;
   public LoginPage objLoginPage;

   public String[] data={"Call","Visit"};

   public String strIndex = null;
   public int tempIndex = 0;
   public int intvalue;
   public int id;
   public int value;
   public boolean hasFocus = false;
   public static String[] arrOutletName = { "Dosa Store", "Benfish Bhawan",
      "Nalban Park", "Korunamoyee", "206 Bus Stop", "aaaaaaaa",
      "bbbbbbbb", "ccccccccc", "dddddddd", "eeeeeee" };

   public ObjectChoiceField ocf;

   public TaskListField() {
      super(0, ListField.MULTI_SELECT);
      setRowHeight(80);
      setEmptyString("Hooray, no tasks here!", DrawStyle.HCENTER);
      setCallback(this);

      p1 = Bitmap.getBitmapResource("name.png");
      p2 = Bitmap.getBitmapResource("name.png");

      rows = new Vector();

      for (int x = 0; x < XmlHander.vectSrno.size(); x++) {
         TableRowManager row = new TableRowManager();

         strIndex = String.valueOf(x);
         String strVectno = XmlHander.vectSrno.elementAt(x).toString();
         String strSLADate = XmlHander.vectSldate.elementAt(x).toString();

         if (x % 2 == 0) {
            row.add(new BitmapField(null));
         }
         else {
            row.add(new BitmapField(null));
         }

         LabelField task = new LabelField(" ");

         if (x % 15 == 0) {
            task.setFont(Font.getDefault().derive(Font.BOLD | Font.UNDERLINED));
         } else {
            task.setFont(Font.getDefault().derive(Font.BOLD));
         }
         row.add(task);

         row.add(new LabelField(strVectno, DrawStyle.ELLIPSIS) {
            protected void paint(Graphics graphics) {
               graphics.setColor(0x00878787);
               // graphics.setColor(Color.PINK);
               super.paint(graphics);
            }
         });

         row.add(ocf=new ObjectChoiceField("",data){

            protected void paint(Graphics graphics){

               graphics.setColor(0x00878787);
               super.paint(graphics);
            }
         });

         ocf.setChangeListener(new FieldChangeListener(){

            public void fieldChanged(Field field, int context) {
               if(context != PROGRAMMATIC)
                  Dialog.alert(data[ocf.getSelectedIndex()]);
            }
         });

         rows.addElement(row);

      }
      setSize(rows.size());
   }

   public void drawListRow(ListField listField, Graphics g, int index, int y, int width) {
      TaskListField list = (TaskListField) listField;
      TableRowManager rowManager = (TableRowManager) list.rows.elementAt(index);

      rowManager.drawRow(g, 0, y, width, list.getRowHeight());
   }

   private class TableRowManager extends Manager {
      public TableRowManager() {
         super(0);
      }

      public void drawRow(Graphics g, int x, int y, int width, int height) {

         layout(width, height);

         setPosition(x, y);

         g.pushRegion(getExtent());

         subpaint(g);

         g.setColor(0x00CACACA);
         g.drawLine(0, 0, getPreferredWidth(), 0);

         g.popContext();
      }

      protected void sublayout(int width, int height) {

         int fontHeight = Font.getDefault().getHeight();
         int preferredWidth = getPreferredWidth();

         Field field = getField(0);
         layoutChild(field, 32, 32);
         setPositionChild(field, 0, 0);

         field = getField(1);
         layoutChild(field, preferredWidth - 16, fontHeight + 1);
         setPositionChild(field, 34, 3);

         field = getField(2);
         layoutChild(field, 150, fontHeight + 1);
         setPositionChild(field, 34, fontHeight + 6);

         field = getField(3);
         layoutChild(field, 150, fontHeight + 1);
         setPositionChild(field, preferredWidth - 152, fontHeight + 6);

         setExtent(preferredWidth, getPreferredHeight());
      }

      public int getPreferredWidth() {
         return Graphics.getScreenWidth();
      }

      public int getPreferredHeight() {
         return getRowHeight();
      }
   }

   public Object get(ListField listField, int index) {

      return null;
   }

   public int getPreferredWidth(ListField listField) {

      return 0;
   }

   public int indexOfList(ListField listField, String prefix, int start) {

      return 0;
   }

   protected boolean navigationClick(int status, int time) {
      final int index;
      index = this.getFieldWithFocusIndex() - 1;

      UiApplication.getUiApplication().invokeLater(new Runnable() {
         public void run() {

            UiApplication.getUiApplication().pushScreen(new Details(id));
         }
      });

      return false;
   }

   public int moveFocus(int amount, int status, int time) {

      invalidate(getSelectedIndex());
      id = this.getSelectedIndex();
      invalidate();

      return super.moveFocus(amount, status, time);
   }

   public void onFocus(int direction) {

      hasFocus = true;
      super.onFocus(direction);
      System.out.println("direction==" + direction);
      invalidate();
   }

   public void onUnfocus() {

      updateLayout();
      super.onUnfocus();
      invalidate();
   }

   private int getFieldWithFocusIndex() {
      return 0;
   }

} 
```

![enter image description here](../Images/802912a7b3b2235b9e6e32a2e4ff5b88.png)

# ruby-on-rails-3 - json format in ruby on rails?

> ID：11340370
> 
> 赞同：0
> 
> 时间：2012-07-05T08:17:44.580
> 
> 标签：ruby-on-rails-3

How to send data in database and show in needed part by using json format in ruby on rails3?

my form is like this

```
<%= form_for(@user) do |f| %>
  <% if @user.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@user.errors.count, "error") %> prohibited this user from being saved:</h2>

      <ul>
      <% @user.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :name %><br />
    <%= f.text_field :name %>
  </div>
  <div class="field">
    <%= f.label :email %><br />
    <%= f.text_field :email %>
  </div>
  <div class="field">
    <%= f.label :login %><br />
    <%= f.text_field :login %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T14:07:36.077

在控制器中：

```
def show
  @user = User.find(params[:user_id]
  respond_to do |format|
    format.json { :render => @user }
  end
end 
```

您可以通过覆盖`as_json`User 模型中的 来自定义 JSON 输出：

```
 def as_json(options=false)
    self.include_root_in_json = false
    options = (options || {}).reverse_merge(
      :except => [:updated_at, :created_at, :id],
      :include => :some_association
    )
    super(options)
  end 
```

# database - Can I get all venue database from foursquare?

> ID：11340373
> 
> 赞同：0
> 
> 时间：2012-07-05T08:17:52.917
> 
> 标签：database, foursquare

Can I get all venue database from foursquare?

I want develop program what can see all venue in world map.

Then I need all venue database.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:14:24.997

您不能也不应该获得所有场地 - Foursquare 的使用政策不允许这样做。

可以在此处找到类似的问题：[Foursquare API：获取给定区域内场地的详尽列表](https://stackoverflow.com/questions/10900896/foursquare-api-getting-an-exhaustive-list-of-venues-in-a-given-area)

除非您想通过窃取他们的数据 (:|) 来抢先复制foursquare 服务器，否则您并不真正需要他们的*所有*场所（请参阅另一个问题）。

# ruby-on-rails - ActiveRecord has_many association doesn't call after_destroy when setting a collection

> ID：11340378
> 
> 赞同：4
> 
> 时间：2012-07-05T08:18:02.543
> 
> 标签：ruby-on-rails, has-many

3 models: User, Movie, Like

```
User has_many :likes
User has_many :movies, through: :likes 
```

This code:

```
user.movies = [ m1, m2, m3 ] 
```

calls `Like#after_create` for the new `Like` records that relate user and m1/m2/m3\. Then, this code:

```
user.movies = [ m3, m4 ] 
```

doesn't call `Like#after_destroy` for the `Like` records that relate user to m1/m2, but does call `Like#after_create` for the new relationship with m4.

The `movies` collection could be set manually or with a form that has `user[movie_ids]` checkboxes, and then

```
user.update_attributes(params[:user]) 
```

1.  What is the right Rails approach for setting a collection?
2.  How do I force it to call after_destroy?

# Update:

As @jdoe cited from the docs, it's not achievable when assigning new collection or when deleting from a collection (`user.movies.delete(m1)`). The only way is to use `before_remove`/`after_remove` callbacks on the user model (and in case of a polymorphic relationship -- any other model), with the `has_many` definition:

```
has_many :movies, through: :likes, before_remove: :before_like_destroy, after_remove: after_like_destroy

def before_like_destroy(movie)
  like = self.likes.where(movie_id: movie)
  # trigger the after_destroy on like
  like.trigger_before_destroy # to be implemented on like, should call what the original callbacks contained
end

def after_like_destroy(movie)
  # no way to get Like object here because it was already removed, need to remember it on the before_destroy somehow
end 
```

Can't understand the logic behind it. It makes callbacks on relationship models totally useless. If something happened on `after_create` it can't be undone in `after_destroy`, and since it's better practice to have after and before logic together and not separately, it makes all callbacks useless.

Think I'm gonna write a gem that does that automagically.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T09:05:39.660

根据文档：

> 集合=对象
> 
> 通过酌情删除和添加对象来替换集合内容。如果 :through 选项为 true ，则连接模型中的回调会被触发，**但销毁回调除外**，因为删除是直接的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-13T18:41:13.210

如果你将dependent: :destroy 添加到like 和movie 关联中，它会调用after_destroy 回调

# c# - Multiple applications on the same kinect device

> ID：11340384
> 
> 赞同：4
> 
> 时间：2012-07-05T08:18:28.317
> 
> 标签：c#, .net, kinect

Is is possible to have multiple applications which are using the same kinect device?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T09:18:21.407

多个应用程序不能使用同一个 Kinect 设备，因为一个应用程序只能请求一个 Kinect 传感器。但是，您可以选择下面列出的方式之一

*   使用多个 Kinect，以便每个应用程序使用单独的 Kinect

*   将单个 Kinect 用于其中一个应用程序，并使用进程间通信在应用程序之间共享数据

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T06:07:46.957

多个应用程序不能共享设备本身，但是使用[Kinect 服务](http://channel9.msdn.com/coding4fun/projects/Kinect-Service)，您可以构建一个应用程序，作为共享颜色、骨骼和深度数据的两个应用程序之间的桥梁。开箱即用你唯一不能做的就是倾斜 Kinect。

另一种解决方法是使用单独的 Kinect 类将多个应用程序或窗口绑定到一个项目，以提供对 SDK 功能的访问。

# jsf - 是否可以从 豆

> ID：11340394
> 
> 赞同：1
> 
> 时间：2012-07-05T08:19:23.507
> 
> 标签：jsf, ajax4jsf

```
<rich:tree switchType="client" value="#{Bean.tree}" var="one">
                                <rich:treeNode>

                                    <h:commandLink value="#{one.item1}"
                                        action="#{Bean.getItem()}"
                                        style="color:blue;text-decoration:none;"
                                        title="Click here to view details">
                                        <f:param name="ids" value="#{one.id}">          
                                        </f:param>
                                    </h:commandLink>

                                    <a4j:support event="onclick" reRender="productInformation"

                                                                        action="#{Bean.getItem()}"/>
                               </rich:treeNode>
</rich:tree>

<rich:panel id="productInformation">

</rich:panel> 
```

嗨，如果我单击链接，我将在该树结构中有一个页面，应该执行相应的操作，但是通过使用 h:commandlink，整个页面将被刷新。所以我要在 h:commandlink 中遇到问题我能够通过使用 f:param 将参数传输到 bean，但是通过使用如何访问 bean 的值，请帮助我了解 jsf 的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T08:48:20.990

通过使用 a4j:commandlink 标记并从函数传递参数来解决解决方案。
< a4j:commandLink ajaxSingle="true" value="#{item.Description}(#{item.name})"
action="#{Bean.getProductLink(item.paramID)}" style="color:blue;text -装饰：无；” title="#{item.productDescription}" reRender="addproductGuidForms"/>

工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T10:18:10.390

由于您使用的是 JSF2，因此无需传递，`f:param`只需将其传递给方法 args

```
action="#{Bean.getItem(one.id)}" 
```

顺便说一句，您最好将方法名称重命名为`action="#{Bean.retrieveItem(one.id)}"`

# java - OrientDB 行数

> ID：11340397
> 
> 赞同：6
> 
> 时间：2012-07-05T08:19:38.003
> 
> 标签：java, orientdb

如何从 Object DB 获取 Java 中的特定行数？

我需要得到查询的结果，例如： `SELECT COUNT(id) FROM Users WHERE banned=true`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-05T11:58:18.000

尝试使用 * 作为字段：

`SELECT COUNT(*) as count FROM Users WHERE banned = false`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T08:26:32.553

OrientDB 确实支持**类似 SQL 的查询**`count(<field>|*)`，并且还根据文档支持该功能： [http ://code.google.com/p/orient/wiki/SQLWhere#Functions](http://code.google.com/p/orient/wiki/SQLWhere#Functions)

# hibernate - Play Framework 1.2.4: Close or Disconnect the session after bulk insert job?

> ID：11340401
> 
> 赞同：0
> 
> 时间：2012-07-05T08:19:50.223
> 
> 标签：hibernate, jdbc, playframework, bulkinsert

i am working on a play 1.2.4 project and i have 4 jobs running in intervals, fetching bulk data (from webservice) and saves them to the database.

My current bulk insert method is like this:

```
 org.hibernate.Session session = 
            (org.hibernate.Session)MyEntityModel.em().getDelegate(); 
  Transaction tx = session.beginTransaction();
  int i = 0;
  for(Sales obj:sales)
      {
            convertToModelAndSave(obj);
          i++;
          if(i%100==0)
          {
              tx.commit();
              session.flush();
              session.clear();
              tx=session.beginTransaction();
          }
      }
  session.disconnect(); 
```

i am simply disconnecting the session after job is done.

I am wondering if this is enough for me, do i really need to disconnect the session (which gives me exceptions in the program). Will my database connection pool be release after disconnect?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T14:42:57.873

另一种方法是将您的工作分成两份工作。

*   第一项工作是主要工作，它将您的数据分成 100 个项目的块
*   第二个拿一些物品并保存它们

然后你的第一个工作调用第二个工作，你不必在你的代码中放入休眠相关的代码。

另一个优点：如果您在保存 100 个项目时回滚，那么您的主要作业可以在这种情况下通过一项一项保存项目来重试，以避免因一个错误而丢失 100 个项目

在这种情况下，您还可以并行启动多个子作业以加快速度

# java - How can I overcome RecordStoreFullException error in LWUIT?

> ID：11340406
> 
> 赞同：0
> 
> 时间：2012-07-05T08:20:09.180
> 
> 标签：java, java-me, emulation, lwuit, rms

I am working on mobile application. I have used RMS. When I am saving data in RMS, I am getting `RecordStoreFullException` error in my mobile application.

How can I overcome this error? I am using NetBeans for developing my J2ME application.

```
 javax.microedition.rms.RecordStoreFullException
            at net.sourceforge.floggy.persistence.impl.i.a(+79)
            at ...
    javax.microedition.rms.RecordStoreFullException
    total storage space set to minimum: 4000
        at javax.microedition.rms.RecordStore.allocateNewRecordStorage(RecordStore.java:1225)
        at javax.microedition.rms.RecordStore.addRecord(RecordStore.java:768)
        at net.sourceforge.floggy.persistence.impl.i.a(+38)
        at ... 
```

Has anyone faced this problem?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T08:55:20.790

可以在 IDE 使用的模拟器首选项中调整存储的大小。查看 Netbeans 帮助以获取有关如何为您的 Netbeans 版本中使用的特定模拟器执行此操作的具体详细信息。

在无线工具包中，RMS 大小设置可从 ktoolbar -> 编辑 -> 首选项中获得。例如，请查看[在线提供的 WTK 2.5.2 用户指南](http://docs.oracle.com/cd/E17802_01/products/products/sjwtoolkit/wtk2.5.2/docs/UserGuide-html/emulator.html)，“4.3.2 存储大小”部分解释了如何执行此操作。

![http://docs.oracle.com/cd/E17802_01/products/products/sjwtoolkit/wtk2.5.2/docs/UserGuide-html/figures/emulator-5.jpg](../Images/1c73bdc1a692bb3b0f9d6b43910a4076.png "WTK 2.5.2 用户指南的屏幕截图")

# 再想一想……

...在增加存储大小之前三思而后行。在真实设备上，您将无法选择这样做。您可以将模拟器弯曲到您希望拥有尽可能多的 GB 存储空间，但在真正的手机上，您不会有这样的选择。

在真实设备上，如果您的应用程序期望 RMS 不受限制，它只会失败。您最好设计您的 MIDlet，使其能够在真实环境中工作。

# android - FM radio application in android development

> ID：11340407
> 
> 赞同：8
> 
> 时间：2012-07-05T08:20:16.020
> 
> 标签：android

I want to develop FM radio applicaiton . But FM radio application api is depend on devices. Is there any idea for develop general FM application for all general devices? Is it possible ?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T16:52:29.687

据我所知，Android 上没有用于 FM 收音机的通用 API，因为每个供应商都使用他们的欧文收音机芯片组。最糟糕的是，最后一款 Google 手机出厂时根本没有收音机，这使得 Android 本身没有原生 FM 收音机 API 的可能性很小。

唯一能够接近支持所有设备的项目是[Spirit FM](http://forum.xda-developers.com/showpost.php?p=34526627&postcount=4882)，不幸的是，它作为一个应用程序提供并且不提供开放的 API，但如果你联系他们，你可以尝试进行一些合作。

另一个未来的选择可能是[欧洲广播联盟正在推动](http://www.google.de/url?sa=t&rct=j&q=&esrc=s&source=web&cd=3&cad=rja&ved=0CDkQFjAC&url=http://radiomagonline.com/digital_radio/ebu_stresses_importance_of_euro-chip_1115/&ei=Q9q8UJWnCI7KtAaV0YC4Ag&usg=AFQjCNFNCTI2HxHxyiU30Z4hugn4gvHIgw)的“欧洲芯片” ，它肯定会有一个标准的 API。但是，如果它成功的话，它需要相当长的时间才能广泛进入市场。

# c# - Multithread Write byte[] into file

> ID：11340410
> 
> 赞同：0
> 
> 时间：2012-07-05T08:20:29.670
> 
> 标签：c#, multithreading, asynchronous, filestream

I hoping someone can help me, if have a question about writing into a file using multiple threads/Tasks. See my code sample below...

AddFile return a array of longs holding the values, blobNumber, the offset inside the blob and the size of the data writing into the blob

```
public long[] AddFile(byte[] data){
    long[] values = new long[3];

    values[0] = WorkingIndex = getBlobIndex(data); //blobNumber
    values[1] = blobFS[WorkingIndex].Position; //Offset
    values[2] = length = data.length; //size

    //BlobFS is a filestream
    blobFS[WorkingIndex].Write(data, 0, data.Length);

    return values;
} 
```

So lets say I use the AddFile function inside a foreach loop like the one below.

```
List<Task> tasks = new List<Task>(System.Environment.ProcessorCount);
foreach(var file in Directory.GetFiles(@"C:\Documents"){
    var task = Task.Factory.StartNew(() => {
        byte[] data = File.ReadAllBytes(file);
        long[] info = blob.AddFile(data);
        return info
    });
    task.ContinueWith(// do some stuff);
    tasks.Add(task);
}
Task.WaitAll(tasks.ToArray);
return result; 
```

I can imagine that this will totally fail, in the way that files will override each other inside the blob due to the fact that the Write function hasn't finished writing file1 and an other task is writing file2 at the same time.

So what is the best way to solve this problem? Maybe using asynchronous write functions...

Your help would be appreciated! Kind regards, Martijn

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T08:27:14.160

我的建议是*不要*并行运行这些任务。磁盘 IO 很可能会成为任何基于文件的操作的瓶颈，因此并行运行它们只会导致每个线程被阻止访问磁盘。最终，您很可能会发现您编写的代码比串行运行的代码运行速度要慢得多。

您是否有特殊原因需要这些并行？您可以串行处理磁盘写入并只调用`ContinueWith()`单独的线程吗？这也有利于消除您发布的问题。

**编辑：**`for`一个简单的循环重新实现示例：

```
foreach(var file in Directory.GetFiles(@"C:\Documents"){
    byte[] data = File.ReadAllBytes(file); // this happens on the main thread

    // processing of each file is handled in multiple threads in parallel to disk IO
    var task = Task.Factory.StartNew(() => {
        long[] info = blob.AddFile(data);
        return info
    });
    task.ContinueWith(// do some stuff);
    tasks.Add(task);
} 
```

# tcpdf - 如何使用 tcpdf 从 xml 中检索 td 值

> ID：11340414
> 
> 赞同：1
> 
> 时间：2012-07-05T08:20:33.190
> 
> 标签：tcpdf

我有其中包含表的 xml 文件，我想检索 TD 值并使用 TCPDF 将其保存在变量中。

任何帮助都会很棒。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T09:06:15.627

你有两个问题，一：检索td信息，二：放在pdf里面。

要获取 td 的信息，请使用 simpleXML [http://php.net/manual/es/book.simplexml.php](http://php.net/manual/es/book.simplexml.php)，使用此工具您可以获取 xml 中每个标签的信息。

现在，当您获得此信息时，您可以将其放入带有 tcpdf 和 Cell() 函数的 pdf 中。如果您有问题，请阅读 tdpdf 的文档。

其他解决方案：如果 xml 有 html，您可以使用 WriteHtml() 函数将 html 放入 pdf 中。

# php - Php foreach echo issue

> ID：11340415
> 
> 赞同：0
> 
> 时间：2012-07-05T08:20:36.620
> 
> 标签：php, mysql

I have this code which produces me a number which is equal to the number of id's i've got in my database of star rating system.

This code generates me a five star voting for each id i've got, but the problem is, it generates them all in a div, while i need them specifically in different div's. let's suppose i print out in a div information for each hostess i've got, i print out their photo and name with the following code:

```
$sql =" select * from hostess";
$query = mysql_query($sql);

while ($row = mysql_fetch_array($query)) { 

echo "<div id='photo'>";

echo "<div id='picture'>"; 
echo "<div id='scotch'><img src='images/Scotch.png'></div>"; 
 echo "<td> <img src=foto/photo1/".$row['photo'] . "></td>";
 echo "</div>"; 
 echo "<div id='text'>"; 
 echo '<td><a href="hostess.php?id='.$row['id'].'">'. $row['first_name_en']."&nbsp;". $row['family_name_en']."</a></td>";
echo "</div>"; 
echo "</div>";
echo "<div id='photo2'>"; 
echo "<div id='picture'>";

echo "<div id='notes'>";
echo '<form action="index.php" method="post" >'; 
 echo "<label>Notes</label></br><textarea>".$row['courrent_occupation'] . "</textarea></br>";
  echo '<input type="submit" value="edit" name="edit"></div>';

 echo "</div>"; 
 echo "<div id='notes'>"; 
 echo "<label>profile</label></br><textarea>".$row['profile_en'] . "</textarea>";
echo "</div>"; 
echo "</div>"; 
}
?>
</div> 
```

Now, i've got this other php which generates me all the star ratings for all hostess id's

```
<?php 
// include update.php
include_once 'update.php';
// get all data from tabel
$arr_star = fetchStar();
?>
<?php 
// start looping datas
foreach($arr_star as $star){ ?>
<h2>Star Rater - <?php echo $star['id'];?></h2>
<ul class='star-rating' id="star-rating-<?php echo $star['id'];?>">
<?php /* getRating($id) is to generate current rating */?>
  <li class="current-rating" id="current-rating-<?php echo $star['id'];?>" style="width:<?php echo getRating($star['id'])?>%"><!-- will show current rating --></li>
  <?php 
  /* we need to generate 'id' for star rating.. this 'id' will identify which data to execute  */
  /* we will pass it in ajax later */
  ?>
  <span class="ratelinks" id="<?php echo $star['id'];?>">
  <li><a href="javascript:void(0)" title="1 star out of 5" class="one-star">1</a></li>
    <li><a href="javascript:void(0)" title="1 star and a half out of 5" class="one-star-half">1.5</a></li>
  <li><a href="javascript:void(0)" title="2 stars out of 5" class="two-stars">2</a></li>
    <li><a href="javascript:void(0)" title="2 star and a half out of 5" class="two-star-half">2.5</a></li>
  <li><a href="javascript:void(0)" title="3 stars out of 5" class="three-stars">3</a></li>
    <li><a href="javascript:void(0)" title="3 star and a half out of 5" class="three-star-half">3.5</a></li>
  <li><a href="javascript:void(0)" title="4 stars out of 5" class="four-stars">4</a></li>
    <li><a href="javascript:void(0)" title="4 star and a half out of 5" class="four-star-half">4.5</a></li>
  <li><a href="javascript:void(0)" title="5 stars out of 5" class="five-stars">5</a></li>
  </span>
</ul>
<?php } ?> 
```

What i need is to assign each hostess profile i print their system rating. I try to insert the foreach inside the first script but it then shows me just one profile, not all profiles.

The fetchstar() code is:

```
function fetchStar(){
    $sql = "select * from `hostess`";
    $result=@mysql_query($sql);
    while($rs = @mysql_fetch_array($result,MYSQL_ASSOC)){
        $arr_data[] = $rs;
    }
    return $arr_data;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T08:56:46.107

首先，您可能不应该使用 SELECT *。除此之外，我将结合两个查询，您必须使用 MySQL 返回一个多维数组，然后使用嵌套的每个循环来回显您想要的数据。

有人在这里为我回答了类似的问题。

[循环通过 MySQL left join in php vs. 2个单独的查询](https://stackoverflow.com/questions/11165597/looping-through-mysql-left-join-in-php-vs-2-separate-queries/11165934#comment14650941_11165934)

```
$sql =" select * from hostess";
$query = mysql_query($sql);
while ($row = mysql_fetch_array($query)) { 
        if ($lastID <> $row['id']) {
            $lastID  = $row['id'];
             $hostess[$lastID] = array('id' => $row['id'],
                                  'first_name_en' => $row['first_name_en'],
                                  etc
                                  'arr_star' => array() );
}
$hostess[$lastID]['arr_star'][] = array('star_id' => $row['star_id'] etc);
} 
```

然后你会为每个语句使用嵌套

```
for each($row as $rows){
      //echo your hostess information

  for each ($arr_star as $star){
      //echo your star rating information
   }
} 
```

# php - Codeigniter中的单词限制器，限制后如何回显单词？

> ID：11340416
> 
> 赞同：1
> 
> 时间：2012-07-05T08:20:37.400
> 
> 标签：php, codeigniter

我在文本助手中使用 codeigniter word_limiter() 函数。

```
$string = "Here is a nice text string consisting of eleven words.";

$string = word_limiter($string, 4);

// Returns: Here is a nice… 
```

上述函数将输出限制为四个字。我怎样才能也将限制后的单词存储在变量中以供使用？？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T08:25:45.627

尝试这个：

```
$original_string = "Here is a nice text string consisting of eleven words.";
$limited_string = word_limiter($original_string , 4, '');
$rest_of_string = trim(str_replace($limited_string, "", $original_string)); 
```

# ios - 用于在 iOS 中扫描条形码（code 39 格式）的免费 SDK

> ID：11340418
> 
> 赞同：6
> 
> 时间：2012-07-05T08:20:45.143
> 
> 标签：ios, barcode, scanning

我想使用 iphone/ipad 的摄像头扫描 VIN 条形码，它采用 Code 39 格式。我尝试了 zxing 和 zbar，但它们效果不佳。大多数时候他们无法识别条形码。谁能告诉我一个更好的方法来做到这一点？或者我可以做些什么来增加结果，因为我只需要扫描代码 39（对于 VIN 车）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-01-06T16:48:54.207

使用 Zbar 来完成此操作。为了获得足够的分辨率进行扫描，您需要以横向模式扫描条形码。这是我的设置（经过测试和工作）

```
// ADD: present a barcode reader that scans from the camera feed
ZBarReaderViewController *reader = [ZBarReaderViewController new];
reader.readerDelegate = self;
reader.supportedOrientationsMask = ZBarOrientationMaskAll;

ZBarImageScanner *scanner = reader.scanner;

//disable other codes to improve performance
[scanner setSymbology: 0
               config: ZBAR_CFG_ENABLE
                   to: 0];
[scanner setSymbology:ZBAR_CODE39 config:ZBAR_CFG_ENABLE to:1];
//only scan vertically, in the middle of the screen (also improves performance)
[reader setScanCrop:CGRectMake(0, 0.4, 1, 0.2)];
[reader setShowsZBarControls:NO];
[reader setShowsHelpOnFail:NO];
//VERY IMPORTANT: reset zoom. by default, the screen is partially zoomed in and will cause a loss of precision
reader.readerView.zoom = 1.0;
reader.readerView.allowsPinchZoom=NO;
reader.readerView.showsFPS=YES;
reader.readerView.tracksSymbols=YES;
//scan landscape only (this also improves performance)
[scanner setSymbology:ZBAR_CODE39 config:ZBAR_CFG_X_DENSITY to:0];
[scanner setSymbology:ZBAR_CODE39 config:ZBAR_CFG_Y_DENSITY to:1]; 
```

那应该差不多了！祝你好运！

***编辑/注意：iOS 框架现在包括一个从 iOS 7 开始的条形码扫描器。我使用[这个实现](http://www.infragistics.com/community/blogs/torrey-betts/archive/2013/10/10/scanning-barcodes-with-ios-7-objective-c.aspx)来获得比使用 Zbar 更好、更容易的结果。***

# ruby-on-rails-3 - 检查日期，除非模型中为空白

> ID：11340421
> 
> 赞同：0
> 
> 时间：2012-07-05T08:20:54.720
> 
> 标签：ruby-on-rails-3, activerecord

在模型中，我有这样的查询来获取活动项目：

```
self.projects.where('start_date <= ?', Time.now).where('end_date >= ?', Time.now) 
```

现在可以有一个空的 end_date。如何使第二个 where 可选，使其仅适用于填写的 end_dates？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T08:25:14.217

```
projects.where(...).where('end_date IS NULL OR end_date >= ?', Time.now) 
```

# android - 在目录中写入文件

> ID：11340432
> 
> 赞同：3
> 
> 时间：2012-07-05T08:21:44.193
> 
> 标签：android, file

```
File dir = android.os.Environment.getDownloadCacheDirectory();
             file =  new File(dir + File.separator + "Music1.mp3");
             if (!file.exists()) {
                 file.getParentFile().mkdirs();
                 file.createNewFile(); 
                }

             fos = new FileOutputStream(file);
             inputStream = urlConnection.getInputStream(); 
```

on`file.createNewFile ()`抛出异常：

```
System.err(275): java.io.IOException: Permission denied 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-06T12:48:36.733

您不能在 Environment.getDownloadCacheDirectory() 中使用

```
Environment.getExternalStorageDirectory() + "/download/" 
```

和许可

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T08:22:50.167

在您的清单中添加此权限 `<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T08:22:50.817

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

将其放入应用程序的清单文件中。

# c++ - C++ 为什么 sprintf_s 与 void 指针一起使用时格式会发生变化？

> ID：11340439
> 
> 赞同：4
> 
> 时间：2012-07-05T08:22:27.387
> 
> 标签：c++, printf

这是工作的原始代码：

```
// ...
unsigned __int64 num = 57;
sprintf_s(buffer, sizeof(buffer), "%llu", num); 
```

但是，当我尝试将此部分提取到此函数中时：

```
void addBuffered(void** attributeValue, char* format)
{
    sprintf_s(buffer, sizeof(buffer), format, *attributeValue);
} 
```

通过调用：

```
addBuffered((void**)&num, "%d"); 
```

我必须将格式参数更改为`sprintf_s`from`%llu`以`%d`获得正确的值。有人可以解释为什么会发生这种情况以及参数的更改是否`%d`会成为问题？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T08:29:27.153

发生这种情况是因为`sizeof(void *) == 4`在您的情况下。并且您通过函数调用隐式`__int64`转换为。`void *`所以如果你使用`%llu`格式，你会从内存中打印一些垃圾。

如果可能的话，我建议你重写函数：

```
template <typename T>
void addBuffered(T *attributeValue, char* format)
{
    sprintf_s(buffer, sizeof(buffer), format, *attributeValue);
} 
```

调用示例：

```
addBuffered(&num, "%luu"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T10:07:28.943

我建议让它变得简单：

```
std::ostringstream buffer;

buffer << num; 
```

即使它们对于内部化/定制可能很笨拙；对于简单的格式化流非常简单......而且**安全**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T10:13:17.317

您可以安全地将其用作type 值`%p`的相应格式说明符。`printf``void *`

当然，话虽如此，我还建议您在这里查看更安全的实现。你的`addBuffered`函数不是可变参数的吗？您可能会`vsprintf_s`改用。

# html - 将现有的 SVG 或 HTML5 元素添加到 Box2D 世界

> ID：11340441
> 
> 赞同：6
> 
> 时间：2012-07-05T08:22:31.033
> 
> 标签：html, animation, svg, box2d, gravity

我有一个主要由元素组成的 SVG 标志。我想对此进行动画处理，或者更具体地说，将其放入“重力世界”。我希望使用 Box2D（网络端口）。

我真的是 Box2D 和 Canvas 的菜鸟，但我已经使用[canvg](http://code.google.com/p/canvg/)将我的 SVG 转换为 HTML5 画布，我现在正在阅读 Box2dWeb 的入门教程，我可以看到如何用重力，但我找不到任何行走现有 SVG 或 Canvas 并简单地将形状添加到该世界的示例。

看起来您需要使用 Box2D 绘图方法。谁能指出一个简单的例子，它采用*现有*的一组形状（SVG 或 Canvas 上）并将它们简单地放到 Box2DWeb 重力世界上，这样它们就可以简单地折叠到底部，就像几乎所有现有的 Box2D 演示和教程一样？

请注意，使用 CanVG 时，我不是自己将形状添加到 Canvas 中，而是从 SVG 为我创建 Canvas。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T12:02:48.417

您可以在 box2d 上添加任何您想要的内容。如果你想画跳舞的大象而不是盒子形状，那取决于你。否则游戏会看起来很无聊。

没有什么能阻止您使用 SVG、canvas、WebGL 甚至 HTML 和 box2d，如果您不想使用，则不需要使用 box2d 绘图方法。

有关将 box2d与[raphaël](http://raphaeljs.com) (SVG)一起使用的信息，请参阅[此博](http://granular.cs.umu.se/browserphysics/?p=1089)文（和[代码）。](http://granular.cs.umu.se/browserphysics/wp-content/uploads/2012/05/multiplayer.tar.gz)[Dmitry Baranovskiy](https://twitter.com/#!/DmitryBaranovsk)（Raphaël 的作者）还[展示了一些](http://whatdoyouknow.webdirections.org/videos/newton-js-box2d-raphael)名为 newton.js 的自定义 box2d 端口/包装器的演示。它尚未发布 AFAIK，但它承诺提供更简单且更像 javascript 的 API。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T10:35:55.993

请查看这些链接，

1) [JavaScript 开发者的 Box2D 方向](http://blog.sethladd.com/2011/08/box2d-orientation-for-javascript.html)
2) [Box2dweb 学习笔记系列](http://box2dweb.com/blog/2012/03/03/box2dweb-study-note-series-box2dweb-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E7%B3%BB%E5%88%97/)
3) [BOX2D JS – HTML5 和 JAVASCRIPT 指南中的物理](http://savagelook.com/blog/code/box2d-js-physics-in-html5-javascript-guide)

关于应用 box2d 效果的 html 元素，我也找不到任何其他链接，除了您在答案中提到的那个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T14:07:13.017

我一直希望有赏金的人能够为我说明“重力演示”的“你好世界”，它可以动画一些任意形状。到目前为止，我已经看到（和发现）的文章和链接比我正在寻找的要复杂得多。

虽然我不想回答我自己的问题，但我只想设置标准。这正是我正在寻找的；

[http://mrdoob.com/projects/chromeexperiments/google-gravity/](http://mrdoob.com/projects/chromeexperiments/google-gravity/)

这个代码的这个脚本是在 GPL3 下获得许可的，我理解并且我已经在我的网站上成功地尝试过了。事实上，它只是导致我页面上的所有 DIV 都被丢弃，所以它只是一张票，我可以使用它。

然而，这不是一个简单的脚本。如果可能的话，我会更喜欢一个简单的独立样本。如果做不到这一点，希望这个答案能帮助其他人寻找类似的东西。

[更新]

从那以后我也找到了这个插件，虽然它对我来说有点 CPU 密集型和崩溃的 Chrome。

[http://tinybigideas.com/plugins/jquery-gravity/](http://tinybigideas.com/plugins/jquery-gravity/)

对于任何更好的答案，我仍然很高兴奖励赏金。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T15:42:30.133

我很确定这就是你想要的，它使用[Gravity 脚本](https://code.google.com/p/gravityscript/)（文件很大，因为它包含 jQuery 和 Box2d.js）：

演示：http: [//jsfiddle.net/SO_AMK/Cf7jn/](http://jsfiddle.net/SO_AMK/Cf7jn/)

JavaScript：没有！它在它的默认配置中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T13:41:38.113

我真的不知道'Box2d'，我不确定这是否是你的意思，但只是为了澄清你是否需要它，在 HTML5 中，它的工作原理就像将背景或样式设置`<table>`为如果您不知道，这与 MS Word 中的表格几乎相同。

样本画布：

```
<canvas id="myCanvas" width="200" height="100"></canvas> 
```

更多颜色和款式：

```
<canvas id="myCanvas" width="200" height="100" style="border:1px solid #000000;"></canvas> 
```

如果“Box2d”中允许添加一些javascript：

```
<script>
    var c=document.getElementById("myCanvas");
    var ctx=c.getContext("2d");

    ctx.fillStyle="#FF0000";
    ctx.fillRect(0,0,150,75);
</script> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-10T16:19:46.283

好吧，Dmitry 的 newton.js 尚未公开。但就像@cirrus 一样，我需要类似的东西。所以我继续创建了我自己的 newton.js。它没有经过很好的测试，但具有类似于我在 Dmitry 的视频中看到的 API + 我自己的要求（我想在 Raphael 之上创建一个游戏引擎作为渲染器）

请分叉 - [https://github.com/dbose/newton.js](https://github.com/dbose/newton.js)

@cirrus，它还有一个简单的 test.html，它采用一个简单的 Raphael 元素并将其添加到 Box2D“世界”

Contextually, I needed this because the core of my app (Mixow) was a Raphael editor and later I wanted to create a game maker out of it. ([http://www.mixow.com](http://www.mixow.com))

# .net - 如何通过 Ajax 获取请求从控制器获取复杂对象以查看？

> ID：11340442
> 
> 赞同：4
> 
> 时间：2012-07-05T08:22:35.767
> 
> 标签：.net, asp.net-mvc, entity-framework, jquery

我正在尝试通过 JQuery 将复杂的 ViewModel 对象获取到我的视图中`$.getJSON`。但是，尽管它适用于简单对象，但当我的视图模型包含其他对象列表作为其中的一部分时，我的 Ajax 请求将停止工作。

这就是我获取数据的方式，

```
$.getJSON('/Company/GetCompanies', function(data) { 
    viewModel.model = ko.mapping.fromJS(data)
    ko.applyBindings(viewModel)
}); 
```

这是工作视图模型，

```
public class CompanyIndex
{
    public IList<CompanyWithDetail> Companies { get; set; }

    public void FillCompanies()
    {
        UnitOfWork unitOfWork = new UnitOfWork();
        unitOfWork.CompanyRepository.SetProxy(false);
        var CompanyFromDB = unitOfWork.CompanyRepository.GetCompanyWithDetails();

        Companies = new List<CompanyWithDetail>();
        foreach (Company company in CompanyFromDB)
        {
            CompanyWithDetail newCompany = new CompanyWithDetail();
            newCompany.CompanyName = company.CompanyName;
            Companies.Add(newCompany);

        }
        unitOfWork.Dispose();
    }
} 
```

这是 CompanWithDetail 类，

```
// For sake of demonstration it only contains name
public class CompanyWithDetail
{
    public string CompanyName { get; set; }
} 
```

这工作正常。但是，当我添加

```
public IList<CompanyFaxNumber> FaxNumber { get; set; } 
```

将此属性添加到 CompanyWithDetail 类，并将其填充到 viewmodel 的`FillCompanies()`方法中`CompanyIndex`，我的 ajax get 请求停止工作。

这是我的控制器顺便说一句，在这两种情况下它都会返回正确的数据，但是当我添加复杂对象时，jquery`$.getJSON`没有收到。

```
public ActionResult GetCompanies()
{
    var model = new CompanyIndex();
    model.FillCompanies();
    return Json(model ,JsonRequestBehavior.AllowGet);   
} 
```

* * *

**编辑1：**

说 getJSON 没有收到数据，我的意思是函数体没有被执行。

```
$.getJSON('/Company/GetCompanies', function(data) { 
    alert('test')
}); 
```

例如，警报在没有复杂对象时工作，但当我将对象添加到视图模型时它停止工作。

* * *

**编辑 2**

这是我从浏览器而不是 ajax 调用“Company/GetCompanies”时的错误。

> 序列化“CompanyManagement.Models.CompanyEmail”类型的对象时检测到循环引用。

* * *

我需要做一些特殊的事情来将复杂的对象从控制器传递到视图吗？有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T08:55:55.313

> 我需要做一些特殊的事情来将复杂的对象从控制器传递到视图吗？

是的，您应该使用视图模型。您不能 JSON 序列化在它们之间包含循环引用的对象层次结构。如果您希望能够对模型进行 JSON 序列化并通过网络发送，您将不得不打破这些循环引用。JSON 序列化格式根本不支持这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T09:00:10.473

默认 JSON 序列化程序无法处理循环引用。您可能拥有 Company 和 Emails 属性，并且每个 Email 都再次引用了 Company。

[正如达林建议](https://stackoverflow.com/a/11340940/119230)的那样，您要么需要发送视图模型（无论如何这是最佳实践）：

[http://blog.davebouwman.com/2011/12/08/handling-circular-references-asp-net-mvc-json-serialization/](http://blog.davebouwman.com/2011/12/08/handling-circular-references-asp-net-mvc-json-serialization/)

...或者您可以[将默认](https://stackoverflow.com/questions/6883204/change-default-json-serializer-used-in-asp-mvc3)的 JSON 序列化程序替换为可以处理循环引用的[Json.NET ：](http://json.codeplex.com/)

[序列化 LINQ to SQL 类时出现循环引用异常](https://stackoverflow.com/questions/1468584/circular-reference-exception-when-serializing-linq-to-sql-classes)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-16T05:11:04.433

您可以使用 dataType= json 简单地进行 ajax post 调用

```
 $.ajax({
                type: 'POST',
                url: '@Url.Action("actionName", "controllerName")',
            data: JSON.stringify({ *Perameter If Any* }),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (result) {                  
                  if (result != null) {

                } else {

                }
            }
           }); 
```

你的动作方法应该是一个 Json 结果

```
public JsonResult ActionName(perameter)
    {

            var modle= getobject();
            return Json(modle);
  } 
```

在上述情况下，您将在ajax调用的成功方法中收到结果将与您发送的完全相同的对象...无需序列化或任何技巧..看起来很简单

# iphone - iOS - 如何在 UISearchBar 中对范围栏的外观进行动画处理？

> ID：11340443
> 
> 赞同：0
> 
> 时间：2012-07-05T08:22:47.720
> 
> 标签：iphone, objective-c, ios, animation, searchbar

好吧，我读[了这篇](http://www.alexandre-gomes.com/?p=418)文章，但是范围栏只是立即显示，没有动画。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T08:31:08.033

这应该有效：

```
- (BOOL)searchBarShouldBeginEditing:(UISearchBar *)searchBar {
    [searchBar setShowsCancelButton:YES animated:YES];
     searchBar.showsScopeBar = YES;  
    return YES;
    }

    - (BOOL)searchBarShouldEndEditing:(UISearchBar *)searchBar {
    [searchBar setShowsCancelButton:NO animated:YES];
    [searchBar sizeToFit];  
     searchBar.showsScopeBar = NO;  
    return YES;
    } 
```

请记住关联 UISearchBar 委托。

# r - 将数字转换为 SI 前缀

> ID：11340444
> 
> 赞同：13
> 
> 时间：2012-07-05T08:22:49.163
> 
> 标签：r, number-formatting

是否有允许使用标准单位前缀（Kilo、Mega 等）格式化数字（整数）的 R 函数（或任何包），所以

```
10 -> 10
1000 -> 1K
0.01 - > 10m 
```

等等......我可以自己做，但我不想重新发明轮子。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-05T09:01:23.530

```
require(sitools)
f2si(80000)
 [1] "80 k"
f2si(8E12)
 [1] "8 T" 
```

如果不使用 SI 前缀，它会附加两个空格，这似乎非常简单：

```
f2si(80)
[1] "80  " 
```

该函数易于修改以包括舍入。我还解决了附加空格的问题。

```
f2si2<-function (number,rounding=F) 
{
    lut <- c(1e-24, 1e-21, 1e-18, 1e-15, 1e-12, 1e-09, 1e-06, 
        0.001, 1, 1000, 1e+06, 1e+09, 1e+12, 1e+15, 1e+18, 1e+21, 
        1e+24)
    pre <- c("y", "z", "a", "f", "p", "n", "u", "m", "", "k", 
        "M", "G", "T", "P", "E", "Z", "Y")
    ix <- findInterval(number, lut)
    if (lut[ix]!=1) {
        if (rounding==T) {
         sistring <- paste(round(number/lut[ix]), pre[ix])
        }
        else {
         sistring <- paste(number/lut[ix], pre[ix])
        } 
    }
    else {
        sistring <- as.character(number)
    }
    return(sistring)
}

f2si2(12345)
 [1] "12.345 k"
f2si2(12345,T)
 [1] "12 k" 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-26T20:28:32.797

我带着同样的问题来到这里。感谢罗兰的回答；我在他的代码的基础上做了一些改动：

*   当 rounding=FALSE 时允许指定有效数字（默认为 6，就像 'signif' 内置函数）
*   值低于 1e-24 时不会抛出错误
*   为 1e27 以上的值输出科学计数法（无单位）

希望这会有所帮助。

```
f2si<-function (number, rounding=F, digits=ifelse(rounding, NA, 6)) 
{
    lut <- c(1e-24, 1e-21, 1e-18, 1e-15, 1e-12, 1e-09, 1e-06, 
        0.001, 1, 1000, 1e+06, 1e+09, 1e+12, 1e+15, 1e+18, 1e+21, 
        1e+24, 1e+27)
    pre <- c("y", "z", "a", "f", "p", "n", "u", "m", "", "k", 
        "M", "G", "T", "P", "E", "Z", "Y", NA)
    ix <- findInterval(number, lut)
    if (ix>0 && ix<length(lut) && lut[ix]!=1) {
        if (rounding==T && !is.numeric(digits)) {
            sistring <- paste(round(number/lut[ix]), pre[ix])
        }
        else if (rounding == T || is.numeric(digits)) {
            sistring <- paste(signif(number/lut[ix], digits), pre[ix])
        }
        else {
            sistring <- paste(number/lut[ix], pre[ix])
        } 
    }
    else {
        sistring <- as.character(number)
    }
    return(sistring)
}

f2si(12345)
 [1] "12.345 k"
f2si(12345, T)
 [1] "12 k"
f2si(10^31)
 [1] "1e+31" # (previous version would output "1e+07 Y"
f2si(10^-25)
 [1] "1e-25" # (previous version would throw error)
f2si(123456789)
 [1] "123.457 M" # (previous version would output ""123.456789 M"
f2si(123456789, digits=4)
 [1] "123.5 M" # (note .456 is rounded up to .5) 
```

从这段代码中，也很容易为常用的金融单位（K、MM、Bn、Tr）编写类似的函数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-11-28T10:32:26.873

使用`case_when`dplyr 进行矢量化很简单，而且看起来更容易：

```
library(dplyr)

si_number = function(x, digits) {

    compress = function(x, n) {
        signif(x * 10^(-n), digits)
    }

    case_when(
        x >= 1e6   ~ paste0(compress(x, 6), "M"),
        x >= 1000  ~ paste0(compress(x, 3), "k"),
        x >= 1     ~ as.character(compress(x, 0)),
        x >= 0.001 ~ paste0(compress(x, -3), "m"),
        x >= 1e-6  ~ paste0(compress(x, -6), "u")
    )
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-04-29T00:21:34.780

我正在寻找千（K）、百万（M）和十亿（B）数字转换器。我修改了这个例程以获取一个数字向量/单个数字来吐出所需的输出。

```
CurrencyFormat <-function (number,rounding=F) 
{
    first <- TRUE
    lut <- c( 1, 1000, 1000000, 1000000000,1000000000000 )
    pre <- c("", "K", "M", "B", "T")
    if (length(number) > 1) {
        for (cnt in 1:length(number)){        
            ix <- findInterval(number[cnt], lut)
            if (ix != 0 | ix != 1){
                if (rounding==T) {
                    sistring <- paste(round(number[cnt]/lut[ix]), pre[ix])
                }
                else {
                    sistring <- paste(signif(number[cnt]/lut[ix],digits=5), pre[ix])
                }
                if (first){
                    tnumber <- sistring
                    fnumber <- tnumber
                    first <- FALSE
                }
                else
                    fnumber <- append(fnumber, sistring)
            }
            else {
                sistring <- number[cnt]
                if (first){
                    tnumber <- sistring
                    fnumber <- tnumber
                    first <- FALSE
                }
                else
                    fnumber <- append(fnumber, sistring)
            }
        }
        return(fnumber)
    }
    else{
        ix <- findInterval(number, lut)
        if (ix != 0 | ix != 1){
            if (rounding==T) {
                sistring <- paste(round(number/lut[ix]), pre[ix])
            }
            else {
                sistring <- paste(signif(number/lut[ix],digits=5), pre[ix])
            }
            return(sistring)
        }    
        else
            return(number)
    }
} 
```

**例子：**

```
CurrencyFormat(1.25,F)
[1] "1.25 "

CurrencyFormat(1000.25,F)
[1] "1.0002 K"

CurrencyFormat(c( 1,45,1234, 4.36e+06, 2.84e+04, 2.01e+06),F)
[1] "1 "      "45 "     "1.234 K" "4.36 M"  "28.4 K"  "2.01 M" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-05-02T03:02:20.830

略微修改版本以考虑负数：

```
f2si<-function (number, rounding=F, digits=ifelse(rounding, NA, 6)) 
{
mysign <- ""
if (number<0) {
    mysign <- "-"
}
number <- abs(number)
lut <- c(1e-24, 1e-21, 1e-18, 1e-15, 1e-12, 1e-09, 1e-06, 
    0.001, 1, 1000, 1e+06, 1e+09, 1e+12, 1e+15, 1e+18, 1e+21, 
    1e+24, 1e+27)
pre <- c("y", "z", "a", "f", "p", "n", "u", "m", "", "k", 
    "M", "G", "T", "P", "E", "Z", "Y", NA)
ix <- findInterval(number, lut)
if (ix>0 && ix<length(lut) && lut[ix]!=1) {
    if (rounding==T && !is.numeric(digits)) {
        sistring <- paste(mysign,mysign,round(number/lut[ix]), pre[ix])
    }
    else if (rounding == T || is.numeric(digits)) {
        sistring <- paste(mysign,signif(number/lut[ix], digits), pre[ix],sep="")
    }
    else {
        sistring <- paste(mysign,number/lut[ix], pre[ix],sep="")
    } 
} else {
    sistring <- paste(mysign,as.character(number),sep="")
}
return(sistring) 
```

}

# sql - 选择查询，将集合字段与其他表号字段连接起来

> ID：11340448
> 
> 赞同：0
> 
> 时间：2012-07-05T08:23:01.557
> 
> 标签：sql, oracle

我有两张桌子：

表：商店

```
----------------------------------------------
store_cd    store_nm    active    material_cat_ids
---------------------------------------------
L           Store(L)    Y         20,5
B           Store(B)    Y         7 
```

和表： Material_category

```
----------------------------------------------------------
material_cat_id    name                        active
----------------------------------------------------------
20                 Material Category type A    Y
5                  Material Category type B    Y
7                  Material Category type C    Y 
```

现在我需要在两个表（`stores`和`material_category`）之间加入。作为一个集合和作为数字字段`stores`的表，我不能使用“in”关键字。`material_cat_ids``material_category``material_cat_id`

请建议加入这些表格的最佳方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T09:03:05.060

将您的材料类别 ID 存储为字符串是一个糟糕的主意。如果还不算太晚，请回到绘图板上！您正在破坏关系数据库的目的。一个更好的表结构将是一个新表，如：

**StoreMaterialCategory**

```
Store_CD (FK Stores), 
Material_Cat_ID (FK Material_Category), 
Primary Key --> (Store_CD, Material_Cat_ID) 
```

然后从商店中删除 Material_Cat_IDs。我在[此处](http://sqlfiddle.com/#!4/a4293/3)放置了一个示例模式，其中包含几个演示查询，以展示如何获得您可能需要的 2 个输出。

但是，如果您坚持使用此表结构，那么您可以像这样进行连接：

```
SELECT  Store_nm, Name
FROM    Stores
        INNER JOIN material_Category
            ON ',' || material_Cat_ids || ',' LIKE '%,' || CAST(material_Cat_ID AS VARCHAR(5)) || ',%'; 
```

**[SQL Fiddle 示例](http://sqlfiddle.com/#!4/9a53e/1)**

**编辑**

如果您需要列表中的类别，您可以使用：

```
SELECT  Store_nm, 
        LISTAGG(Name, ',') WITHIN GROUP (ORDER BY Name) AS Categories
FROM    Stores
        INNER JOIN material_Category
            ON ',' || material_Cat_ids || ',' LIKE '%,' || CAST(material_Cat_ID AS VARCHAR(5)) || ',%'
GROUP BY Store_nm; 
```

**[例子](http://sqlfiddle.com/#!4/9a53e/10)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T09:32:10.367

```
create table store (store_cd  varchar2(20),store_nm varchar2(20),active  varchar2(1),material_cat_ids varchar2(200));

Insert into STORE
   (STORE_CD, STORE_NM, ACTIVE, MATERIAL_CAT_IDS)
 Values
   ('L', 'Store(L)', 'Y','20,5');
Insert into STORE
  (STORE_CD, STORE_NM, ACTIVE, MATERIAL_CAT_IDS)
 Values
  ('B', 'Store(B)', 'Y', '7');

create table Material_category(material_cat_id number ,name varchar2(20),active varchar2(1));

insert into material_category values(20,' A','Y');
insert into material_category values( 5,' B','Y' );
insert into material_category values(7,'C','Y');

WITH tab as (
SELECT  DISTINCT store_cd
       ,store_NM
       ,active
       ,REGEXP_SUBSTR (material_cat_ids, '[^,]+', 1,LEVEL) material_cat_id
FROM store s
CONNECT BY REGEXP_SUBSTR (material_cat_ids, '[^,]+', 1, LEVEL) IS NOT NULL
  ) 
SELECT * from tab t 
             ,material_category mc 
where t.material_cat_id=to_char(mc.material_cat_id); 
```

![输出](../Images/e8e7a72122ef6b7beed7cfaf0a67e054.png)

制定出示例[SQLFIDDLE](http://sqlfiddle.com/#!4/c59b4/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T08:57:02.277

也许是这样的？

```
select *
from stores
inner join material_category
on ',' + stores.material_cat_ids + ',' LIKE '%,' + CONVERT(varchar(100), material_category.material_cat_id) + ',%' 
```

# xpath - xquery 过滤属性和元素

> ID：11340449
> 
> 赞同：11
> 
> 时间：2012-07-05T08:23:05.783
> 
> 标签：xpath, xquery

我有以下简单的 XML 文档：

```
<?xml version="1.0" encoding="UTF-8"?>
<cars>
    <car>
        <data attrib="Make">
            <text>Volvo</text>
        </data>
        <data attrib="Model">
            <text>855</text>
        </data>
    </car>
    <car>
        <data attrib="Make">
            <text>Volvo</text>
        </data>
        <data attrib="Model">
            <text>745</text>
        </data>
    </car>
    <car>
        <data attrib="Make">
            <text>Volvo</text>
        </data>
        <data attrib="Model">
            <text>V70R</text>
        </data>
    </car>
</cars> 
```

以及以下 XPath：

```
/cars/car/data[(@attrib='Model') and (text='855')] 
```

这将返回以下结果：

```
<data attrib="Model"><text>855</text></data> 
```

我希望 XPath 返回`<car>`匹配的整个块。

所以返回数据会是这样的：

```
<cars>
    <car>
        <data attrib="Make">
            <text>Volvo</text>
        </data>
        <data attrib="Model">
            <text>855</text>
        </data>
    </car>
</cars> 
```

我将如何修改上面的 XPath 表达式来实现这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-05T08:36:25.470

XPath 返回您要到达的任何节点-在您的情况下，您将要到达`data`，这就是您要返回的内容。如果您愿意`car`，请将您的谓词放在`car`.

```
/cars/car[data/@attrib='Model' and data/text='855'] 
```

或者，稍微短一点

```
/cars/car[data[@attrib='Model' and text='855']] 
```

您可以在[这个 XMLPlayground](http://www.xmlplayground.com/27bWXL)上运行它。

XQuery 以产生所需的输出：

```
<cars>
  {/cars/car[data[@attrib='Model' and text='855']]}
</cars> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T12:21:18.320

**这是一个完整的并且可能是最短的 XSLT 解决方案之一：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" />

 <xsl:template match="/*">
     <cars>
       <xsl:copy-of select="car[data[@attrib='Model' and text='855']]"/>
   </cars>
 </xsl:template>
</xsl:stylesheet> 
```

但是，使用众所周知的**[恒等规则](http://web.archive.org/web/20081229160200/http://www.dpawson.co.uk/xsl/sect2/identity.html)**的以下转换既更容易编写，又提供了最大的灵活性、可扩展性和可维护性：

```
 <xsl:stylesheet version="1.0"
     xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
     <xsl:output omit-xml-declaration="yes" indent="yes"/>
     <xsl:strip-space elements="*"/>

     <xsl:template match="node()|@*">
         <xsl:copy>
           <xsl:apply-templates select="node()|@*"/>
         </xsl:copy>
     </xsl:template>

     <xsl:template match="car[not(data[@attrib='Model' and text='855'])]"/>
    </xsl:stylesheet> 
```

**在提供的 XML 文档上应用这两种转换中的任何一种时：**

```
<cars>
    <car>
        <data attrib="Make">
            <text>Volvo</text>
        </data>
        <data attrib="Model">
            <text>855</text>
        </data>
    </car>
    <car>
        <data attrib="Make">
            <text>Volvo</text>
        </data>
        <data attrib="Model">
            <text>745</text>
        </data>
    </car>
    <car>
        <data attrib="Make">
            <text>Volvo</text>
        </data>
        <data attrib="Model">
            <text>V70R</text>
        </data>
    </car>
</cars> 
```

**产生了想要的正确结果：**

```
<cars>
   <car>
      <data attrib="Make">
         <text>Volvo</text>
      </data>
      <data attrib="Model">
         <text>855</text>
      </data>
   </car>
</cars> 
```

**说明**：

1.  第一个转换生成顶部元素`cars`，然后简单地选择想要的`car`元素并将其复制为 的主体`cars`。

2.  第二个转换基于最基本和最强大的 XSLT 设计模式之一——使用和覆盖标识规则。

3.  身份模板“按原样”复制每个匹配的节点（选择对其进行处理）。

4.  有一个模板覆盖了身份规则。此模板匹配任何`car`不正确的`data[@attrib='Model' and text='855']`. 模板的主体是空的，这不会导致匹配`car`元素被复制到输出中——换句话说，我们可以说 amy 匹配`car`元素被“删除”了。

# php - 从此数组中仅选择唯一的数组值

> ID：11340450
> 
> 赞同：13
> 
> 时间：2012-07-05T08:23:07.227
> 
> 标签：php, arrays, array-unique

我有以下变量 $rows：

> 大批 （
> 
> ```
> [0] => stdClass Object
>     (
>         [product_sku] => PCH20
>     )
> 
> [1] => stdClass Object
>     (
>         [product_sku] => PCH20
>     )
> 
> [2] => stdClass Object
>     (
>         [product_sku] => PCH19
>     )
> 
> [3] => stdClass Object
>     (
>         [product_sku] => PCH19
>     ) 
> ```
> 
> )

我需要创建第二个数组 $second 仅包含唯一值：

> 大批 （
> 
> ```
> [0] => stdClass Object
>     (
>         [product_sku] => PCH20
>     )
> 
> [1] => stdClass Object
>     (
>         [product_sku] => PCH19
>     ) 
> ```
> 
> )

但是当我在 $rows 上运行 array_unique 时，我收到：

> **可捕获的致命错误**：类 stdClass 的对象无法在第**191行转换为字符串**

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-05T08:26:42.223

[`array_unique()`](http://php.net/array-unique)

> 可选的第二个参数 sort_flags 可用于使用这些值修改排序行为：
> 
> 排序类型标志：
> 
> *   SORT_REGULAR - 正常比较项目（不要更改类型）
> *   SORT_NUMERIC - 以数字方式比较项目
> *   SORT_STRING - 将项目作为字符串进行比较
> *   SORT_LOCALE_STRING - 根据当前语言环境将项目作为字符串进行比较。

还要注意下面的变更说明

> **5.2.10** 将 sort_flags 的默认值改回 SORT_STRING。
> 
> **5.2.9** 添加了默认为 SORT_REGULAR 的可选 sort_flags。在 5.2.9 之前，此函数用于在内部使用 SORT_STRING 对数组进行排序。

```
$values = array_unique($values, SORT_REGULAR); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-05T08:25:32.540

```
$uniques = array();
foreach ($array as $obj) {
    $uniques[$obj->product_sku] = $obj;
}

var_dump($uniques); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-05T08:27:06.477

函数的默认行为`array_unique()`是首先将内部的值视为字符串。所以发生的事情是 PHP 试图将您的对象转换为字符串（这会引发错误）。

您可以像这样修改函数调用：

```
$uniqueArray = array_unique($rows, SORT_REGULAR); 
```

这将在不更改其数据类型的情况下比较值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-10T06:50:35.847

请检查以下代码，希望这对您有所帮助。

```
$resultArray = uniqueAssocArray($actualArray, 'product_sku');

function uniqueAssocArray($array, $uniqueKey) 
{
   if (!is_array($array)) 
   {
     return array();
   }
   $uniqueKeys = array();
   foreach ($array as $key => $item) 
   {
     $groupBy=$item[$uniqueKey];
     if (isset( $uniqueKeys[$groupBy]))
     {
        //compare $item with $uniqueKeys[$groupBy] and decide if you 
        //want to use the new item
        $replace= false; 
     }
    else
    {
        $replace=true;
    }
    if ($replace) 
      $uniqueKeys[$groupBy] = $item;   
 }
 return $uniqueKeys;
} 
```

# upgrade - 升级到 Eclipse Juno 的主要原因是什么？

> ID：11340451
> 
> 赞同：11
> 
> 时间：2012-07-05T08:23:08.477
> 
> 标签：upgrade, eclipse-juno

对不起，如果这是一个奇怪的问题。但是我使用 Indigo 已经很长时间了，升级到 Juno 后，我发现 UI 响应速度较慢，有奇怪的新颜色（幸好它们包含了 Classic 主题），而且我看不到一个新功能，无论如何. 他们将默认重做快捷方式从 ctrl-y 更改为 ctrl-shift-z，尽管 ctrl-y 是该类型快捷方式的事实标准。似乎为了改变而进行了很多改变。

坦率地说，我对这个版本有点不知所措。我不是故意在这里消极，我想我只是还没有看到光明:-)

有没有人有一个成功的故事，其中 Juno 正是他们解决 Indigo 的某些特定问题或缺点所需的东西？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-06T09:38:00.963

这里并不是一个真正的成功故事......

我再次降级到3.7，因为4.2的性能真的很差。在这两个版本中，我都没有在 eclipse.ini 中进行任何调整，但是 3.7 在相同（相当大的）工作区的情况下运行得更加流畅。

我很期待“代码推荐器”插件，但几个小时后就卸载了它。这有点烦人，也许你必须使用更长的时间才能习惯它。

Xtext 2.3 对我来说很重要，但我也可以在 Indigo 中使用它。

新的布局很丑，但这只是我的看法。其他人似乎喜欢它......但除了外观之外，在调整大小或移动视图时对我来说真的很慢和滞后。

还有一些其他的小错误，也许是我的错，不知道，但最后我对 3.7 再次感到满意 :-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T16:30:04.070

Eclipse Juno 比 Indigo 差。界面反应迟钝，更烦人。例如，文件总是在右侧窗口中打开，而不是在光标之一中打开。必须将它们拖放到该位置，但是！！！...将它们放置在单独的/所需的窗口中需要更多的努力，因为 Juno 似乎将其放置在最不需要的窗口中；此外，标签可以放置得更难。调试带来了更多烦人的事情。对不起开发人员，但很垃圾 - 很多时候找不到断点所在的文件。我不建议升级。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T07:17:00.790

（我不能对现有帖子发表评论）

关于UI样式：

有关如何更改样式的简短讨论，请参见 [1]。很快就会有一套新的样式可用。

关于代码推荐器：

moeTi，我很高兴了解您对代码推荐器感到厌烦的地方。总体思路或实现方式？欢迎反馈[2]。

谢谢，马塞尔

[1] [http://www.vogella.com/blog/2012/07/11/eclipse-4-is-beautiful-create-your-own-eclipse-4-theme/](http://www.vogella.com/blog/2012/07/11/eclipse-4-is-beautiful-create-your-own-eclipse-4-theme/)

[2] http//www.eclipse.org/forums/eclipse.recommenders

# javascript - JavaScript 代码块中的 Razor 语法

> ID：11340452
> 
> 赞同：4
> 
> 时间：2012-07-05T08:23:09.660
> 
> 标签：javascript, html, asp.net-mvc-3, razor

我想知道在 JavaScript 代码中使用 razor 是否是一种好习惯。例如：

```
<script type="text/javascript">
   var variable = @some.Id
</script> 
```

还是像这样更好地创建隐藏值然后使用 JavaScript 获取它？

```
<input type="hidden" id="someId" value"@some.Id" />

<script type="text/javascript">
   var variable = $('#someId').val();
</script> 
```

编辑：

```
@{
var formVariables = serializer.Serialize(new
                                             {
                                                 id = Model.Id, 
                                                 name = Model.Name, 
                                                 age = Model.Age
                                             });

<input type="hidden" id="header_variables" value="@formVariables"/>
<script type="text/javascript" src = "/Scipts/..."></script>
} 
```

这是一个好的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T08:45:43.067

我个人会选择第二个选项的扩展并创建一个单独的 .js 文件。原因是，如果您将工作委托给第 3 方来处理 UI 的 jquery/javascript 部分，那么他们不需要看到任何后端功能。

有多种方法可以在输入上使用 html5 属性（即 data-attribute='foo'），这将允许您使用可以在外部 .js 文件中解析的大量属性来“装饰”您的输入。

一个非常简短的例子：

在你看来：

```
<input type='text' id='myId' data-action='@Url.Action("MyAction")' class='myClass' /> 
```

在您的 .js 文件中：

```
var targetAction = $('#myId').attr('data-action'); 
```

这使得 .js 和视图之间完全分离。当然，它确实需要一定程度的计划。

希望这可以帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T08:27:30.923

Razor 将在服务器端解析并替换为相关输出。因此，在我看来，如果你把它放在 Javascript 或 HTML 中，这完全无关紧要——在客户端，只有输出值是可见的。因此，在上面的示例中，我会选择第一个选项（直接放在 JS 中），因为您将没有其他不必要的隐藏输入字段。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T08:31:17.363

我认为这个问题没有正确答案；只有优点和缺点。

*在 Javascript 中使用 Razor 的优点*

*   脚本绑定到您的视图模型；因此模型更改将被自动获取，并且错误将在编译时被捕获。

*缺点*

*   脚本与标记混合，与网页设计最佳实践相反（将脚本放在底部，这样它就不会破坏您的页面）。
*   无法编译/缩小脚本，因为它再次与您的标记混合在一起。

# java - 具有 GridLayout 的 ScrolledComposite 父级

> ID：11340453
> 
> 赞同：8
> 
> 时间：2012-07-05T08:23:16.843
> 
> 标签：java, swt, scrolledcomposite

我想要一个`ScrolledComposite`它有一个父级，`GridLayout`但滚动条不显示，除非我使用`FillLayout`. 我的问题`FillLayout`是它的孩子占据了可用空间的相等部分。

在我的情况下，有两个小部件，顶部的一个不应超过窗口的 1/4，而`ScrolledComposite`应占用剩余空间。但是，他们两个都占了一半。

有没有办法使用`GridLayout`with`ScrolledComposite`或者是否可以修改 的行为`FillLayout`？

这是我的代码：

```
private void initContent() {

    //GridLayout shellLayout = new GridLayout();
    //shellLayout.numColumns = 1;
    //shellLayout.verticalSpacing = 10;
    //shell.setLayout(shellLayout);
    shell.setLayout(new FillLayout(SWT.VERTICAL));

    searchComposite = new SearchComposite(shell, SWT.NONE);
    searchComposite.getSearchButton().addListener(SWT.Selection, this);

    ScrolledComposite scroll = new ScrolledComposite(shell, SWT.V_SCROLL | SWT.H_SCROLL | SWT.BORDER);
    scroll.setLayout(new GridLayout(1, true));

    Composite scrollContent = new Composite(scroll, SWT.NONE);
    scrollContent.setLayout(new GridLayout(1, true));

    for (ChangeDescription description : getChanges(false)) {
        ChangesComposite cc = new ChangesComposite(scrollContent, description);
    }

    scroll.setMinSize(scrollContent.computeSize(SWT.DEFAULT, SWT.DEFAULT));
    scroll.setContent(scrollContent);
    scroll.setExpandVertical(true);
    scroll.setExpandHorizontal(true);
    scroll.setAlwaysShowScrollBars(true);

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-22T07:41:59.143

除了 setLayout() 之外，还需要调用 setLayoutData()。在下面的代码示例中，看看`GridData`对象是如何构造并传递给两个 setLayoutData() 调用的。

```
private void initContent(Shell shell)
{
    // Configure shell
    shell.setLayout(new GridLayout());

    // Configure standard composite
    Composite standardComposite = new Composite(shell, SWT.NONE);
    standardComposite.setLayoutData(new GridData(SWT.FILL, SWT.TOP, true, false));

    // Configure scrolled composite
    ScrolledComposite scrolledComposite = new ScrolledComposite(shell, SWT.V_SCROLL | SWT.H_SCROLL | SWT.BORDER);
    scrolledComposite.setLayout(new GridLayout());
    scrolledComposite.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true));
    scrolledComposite.setExpandVertical(true);
    scrolledComposite.setExpandHorizontal(true);
    scrolledComposite.setAlwaysShowScrollBars(true);

    // Add content to scrolled composite
    Composite scrolledContent = new Composite(scrolledComposite, SWT.NONE);
    scrolledContent.setLayout(new GridLayout());
    scrolledComposite.setContent(scrolledContent);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-06T16:07:10.500

**注意！**这个答案基于 Eclipse RAP，它的行为可能与常规 SWT 不同。

几天前，我正在为完全相同的问题苦苦挣扎。我在同一页上有两个`ScrolledComposite`s，我需要左边的一个不会占用比需要更多的空间（即使空间可用）。

在尝试不同的解决方案时，我注意到 a 的行为`ScrolledComposite`取决于其`LayoutData`如下：

*   如果`layoutData`设置为`new GridData(SWT.LEFT, SWT.TOP, false, true)`，则`ScrolledComposite`无论父`Composite`大小更改如何，都将保持其预期大小。
*   如果`layoutData`设置为`new GridData(SWT.LEFT, SWT.TOP, true, true)`，则将`ScrolledComposite`根据父级的大小变化缩小/扩展`Composite`。这还包括扩展到所需的更大宽度（意味着列保持相等）。

基于这种行为，我能够通过向父级添加一个调整大小的侦听器来解决问题，该侦听器根据父级`Composite`更改`layoutData`左侧`ScrolledComposite`的`Composite size`。

下面的例子说明了这种方法：

```
public class LayoutingScrolledComposites extends AbstractEntryPoint {
    public void createContents( Composite parent ) {    
        parent.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true));
        parent.setLayout(new GridLayout(2, false));

        ScrolledComposite sc1 = new ScrolledComposite(parent, SWT.H_SCROLL | SWT.V_SCROLL);
        Composite c1 = new Composite(sc1, SWT.BORDER);
        sc1.setLayoutData(new GridData(SWT.LEFT, SWT.TOP, true, true));
        c1.setLayout(new GridLayout(3, false));
        sc1.setContent(c1);
        Label l1 = new Label (c1, SWT.BORDER);
        l1.setText("Some text");
        l1 = new Label (c1, SWT.BORDER);
        l1.setText("Some text");
        l1 = new Label (c1, SWT.BORDER);
        l1.setText("Some text");
        c1.setSize(c1.computeSize(SWT.DEFAULT, SWT.DEFAULT));

        ScrolledComposite sc2 = new ScrolledComposite(parent, SWT.H_SCROLL | SWT.V_SCROLL);
        sc2.setLayoutData(new GridData(SWT.LEFT, SWT.TOP, true, true));
        Composite c2 = new Composite(sc1, SWT.BORDER);
        c2.setLayout(new GridLayout(3, false));
        sc2.setContent(c2);
        Label l2 = new Label (c2, SWT.BORDER);
        l2.setText("Some text");
        l2 = new Label (c2, SWT.BORDER);
        l2.setText("Some text");
        l2 = new Label (c2, SWT.BORDER);
        l2.setText("Some text");
        c2.setSize(c2.computeSize(SWT.DEFAULT, SWT.DEFAULT));

        parent.addListener(SWT.Resize, new Listener() {
            public void handleEvent(Event e) {
                int sc1_x = sc1.getContent().getSize().x;
                int sc2_x = sc2.getContent().getSize().x;

                //Enable/Disable grabExcessHorizontalSpace based on whether both sc's would fit in the shell
                if (LayoutingScrolledComposites.this.getShell().getSize().x > sc1_x+sc2_x) {
                    if (((GridData)sc1.getLayoutData()).grabExcessHorizontalSpace) {
                        //sc1 does not change width in this mode
                        ((GridData)sc1.getLayoutData()).grabExcessHorizontalSpace=false;                        
                    }
                } else {
                    if (!((GridData)sc1.getLayoutData()).grabExcessHorizontalSpace) {
                        //sc1 changes width in this mode
                        ((GridData)sc1.getLayoutData()).grabExcessHorizontalSpace=true;                     
                    }
                }
                parent.layout(); //Needed so that the layout change would take effect during the same event
            }
        });
    }
} 
```

然而，这种方法在我看来确实有点过于“hackish”的解决方案。因此，我希望看到更好的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T10:32:47.810

我认为你在这里缺少的是`GridData`为孩子们定义。

布局控制子项的位置和大小。每个布局类都有一个相应的布局数据类，允许配置布局中的每个特定子级，如果它们填满整个空间，它们占用多少个单元格等。

我猜你的网格布局可能有 4 行，顶部的小部件只占用一个单元格，另一个孩子占用其余的单元格 (3)。这是通过`GridData.verticalSpan`属性实现的。

查看[了解 SWT 中的布局](http://www.eclipse.org/articles/article.php?file=Article-Understanding-Layouts/index.html)并尝试不同的布局数据属性以了解它们的作用。

# android - 在 bin 目录中重复 AndroidManifest.xml？

> ID：11340454
> 
> 赞同：9
> 
> 时间：2012-07-05T08:23:23.217
> 
> 标签：android, android-manifest, duplication

我刚刚升级到最新的 ADT，似乎发生了很大变化（变得更好）。

刚刚创建了一个新项目并查看了`bin`我的项目目录，我看到一个`AndroidManifest.xml`文件似乎与项目根目录中的文件完全相同。

对根清单文件的更改似乎也自动反映在`bin`

是什么赋予了？为什么有重复的清单？似乎找不到任何文档。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T08:35:02.547

这是新**manifestmerger.enabled**属性的结果。

您可以使用它将库项目清单文件合并到包含项目的清单中。

生成的清单将在您的 /bin 目录中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T08:30:58.203

当您的项目构建时，它会在 bin 文件夹中创建自己的副本以供执行，您可以忽略 build 文件夹中的所有内容，因为它不需要您直接编辑。您还将找到 .class 文件的副本，这些文件是从您的 java 等效项、一个 .dex 文件和所有可绘制资源编译而来的。

您唯一需要担心的 AndroidManifest.xml 是根项目目录中的那个

# php - codeigniter INSERT 只插入变量名

> ID：11340467
> 
> 赞同：0
> 
> 时间：2012-07-05T08:24:13.287
> 
> 标签：php, mysql, forms, codeigniter

我已经为此浪费了几个小时，我相信这很简单！

我对codeigniter很陌生。

基本上我想使用从我的表单中收到的值执行一个简单的 INSERT 到我的数据库中，这是我的观点：

```
<!DOCTYPE html>
    <head>
<meta http-equiv="Content-type" content="text/html; charset=utf-8">
<title>Page Title</title>

   </head>
   <body>

<div id="formage">

    <?php echo validation_errors(); ?>
    <?php echo form_open('../add_client'); ?>
    <p>
    <?php echo form_label('First Name', 'first_name');?>
    <?php echo form_input('first_name', '', 'id="first_name"' );?>
    </p>
    <p>
    <?php echo form_label('Last Name', 'second_name');?>
    <?php echo form_input('second_name', '', 'id="second_name"' );?>
    </p>
    <p>
    <?php echo form_label('Email Address', 'email_address');?>
    <?php echo form_input('email_address', '', 'id="email_address"' );?>
    </p>
    <p>
    <?php echo form_label('Password', 'password');?>
    <?php echo form_password('password', '', 'id="password"' );?>
    </p>
    <p>
    <?php echo form_label('Confirm Password', 'passwordconf');?>
    <?php echo form_password('passwordconf', '', 'id="passwordconf"' );?>
    </p>
    <p>
    <?php echo form_submit('submit', 'Add New Client');?>
    </p>

    <?php echo form_close(); ?>

</div> 
```

这调用了我的控制器：

```
<?php if (! defined('BASEPATH')) exit('No direct script access allowed');

class Add_client extends CI_Controller{

function __construct(){
    parent::__construct();
}

function index(){

    $this->load->library('form_validation');
    $this->form_validation->set_rules('first_name', 'First Name', 'required');
    $this->form_validation->set_rules('second_name', 'Second Name', 'required');
    $this->form_validation->set_rules('email_address', 'Email Address', 'required|valid_email');
    $this->form_validation->set_rules('password', 'Password', 'required|min_length(4)');
    $this->form_validation->set_rules('passwordconf', 'Password', 'required|matches[password]');

    if($this->form_validation->run() !== false){
        $this->load->model('add_client_model');
        $this->add_client_model->addUser(
        $this->input->post('first_name'),
        $this->input->post('second_name'),
        $this->input->post('email_address'),
        $this->input->post('password'));

    }

    $this->load->view('add_client_view');

}

 } 
```

它又从我的模型中调用 addUser 函数：

```
<?php

  class Add_client_model extends CI_Model{

function __construct(){
}

public function addUser($fname, $sname, $email, $password){

        $this->db->set('first_name', $fname);
        $this->db->set('second_name', $sname); 
        $this->db->set('email_address', $email); 
        $this->db->set('pasword', sha1($name)); 
        $this->db->insert('users');
}
 } 
```

我遇到的问题是，每当我提交表单并调用该函数时，它似乎都会像这样插入变量名（见第二行）：

[https://dl.dropbox.com/u/76853467/Picture%204.png](https://dl.dropbox.com/u/76853467/Picture%204.png)

我似乎无法让它接受我插入到我的函数参数中的发布数据！

有什么建议么？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T08:34:45.197

试试这个：

```
$data = array(
  'first_name' => $fname,
  'second_name' => $sname,
  'email_address' => $email,
  'password' => sha1($password)
);

$this->db->insert('users', $data); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T08:27:24.377

嗯....我有时也会遇到零星的问题，但似乎在 CI 2 中...

但是，如何使用旧的 $_POST 对象来访问它呢？毕竟这是 CI 获取数据的地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T09:18:58.393

您是否使用 echo 或使用 firephp（如果您正在使用它）检查变量值？

确保参数将适当的值发送到模型，因为它从帖子中接受。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T13:24:40.317

我在您的控制器中看不到表单助手。也许您已经自动加载了它？如果没有，请尝试在其中添加它。

```
$this->load->helper('form'); 
```

# google-maps-api-3 - 街景在 Firefox 中不起作用

> ID：11340468
> 
> 赞同：3
> 
> 时间：2012-07-05T08:24:17.233
> 
> 标签：google-maps-api-3

实时页面在这里： [http ://teamclarke.com/teamclarke/?listing=2-251-east-8th-street](http://teamclarke.com/teamclarke/?listing=2-251-east-8th-street)

街景适用于 IE9 和 Chrome。随便拿个FF11的灰盒

```
jQuery(function() {
            // Handler for .ready() called.
            var center = new google.maps.LatLng(44.230065,-76.50000);

            var svOptions = {
                position: center,
                visible:true
            };

            var sv = new google.maps.StreetViewPanorama(document.getElementById('pano'),svOptions);
            //initialize();
        }); 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-05T08:49:27.280

It's caused by style-rules for **`.entry-content img`**, they also affect the images of the StreetView.

Add this to your styles:

```
#pano img {
    border: none !important;
    max-width: none !important;
} 
```

# c# - 是否可以在单个 WCF 服务网站上托管多个服务？

> ID：11340472
> 
> 赞同：0
> 
> 时间：2012-07-05T08:24:24.597
> 
> 标签：c#, wcf

我们决定将 WCF 服务的功能一分为二。原因是某些操作可能需要在未来进行微小的更改（不会破坏现有客户端），如果客户端有可能在更改发生时调用服务，我们希望客户端表明它可以联系服务器，但部分功能暂时不可用。

无论如何，问题是，是否可以在单个 WCF 服务网站模板项目上托管多个 WCF 服务，如果可以，如何在网站的 .svc 文件中声明它们？

# java - 清除 Java 应用程序的缓存

> ID：11340474
> 
> 赞同：0
> 
> 时间：2012-07-05T08:24:30.620
> 
> 标签：java, caching, audio, javasound

我正在尝试编写一个程序来检测耳机何时插入系统，然后在您移除耳机时运行另一段代码。代码工作正常，但我面临的问题是设备的状态正在被缓存，所以在我拔出耳机后仅 1 分钟我的程序检测到它已被移除。当我运行代码时会发生这种情况，这是一个无休止的 while 循环。

但是如果我不在循环中运行单个实例，它会在运行时立即显示正确的状态

这是代码：

```
 public class Headphonecheck {

             public static int hpfound = 0;
             public static int hpnfound =0;

             public static void isHeadphoneAvailable() {
                while (true)
                    {
                  if     (!AudioSystem.isLineSupported(Port.Info.HEADPHONE) && hpnfound ==0) {
                        System.out.println("NO HEADPHONE FOUND");
                       System.out.println("Do something else");
                       hpfound = 0;
                       hpnfound = 1;

                    } else {
                    if(AudioSystem.isLineSupported(Port.Info.HEADPHONE) && hpfound ==0){
                       System.out.println("HEADPHONE FOUND");
                       System.out.println("Do something");
                       hpnfound = 0;
                       hpfound =1;
                    }
                }

                } //close while

            }

        public static void main (String[] args){
            isHeadphoneAvailable();
        }
} 
```

如果您删除while循环并运行代码，它可以完美地用于单次运行..即您插入耳机并运行代码它显示HEADPHONE FOUND，然后当您移除耳机并运行代码时它显示NO HEADPHONE FOUND。

在while循环中，如果你有耳机并运行代码，它会显示HEADPHONE FOUND，然后如果你立即取下耳机，大约需要50秒才能显示NO HEADPHONE FOUND。这是因为它正在缓存 50 秒，然后清除缓存

如何阻止它缓存或清除缓存

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T20:57:05.690

似乎您需要添加一个事件侦听器。您真的不想循环查找此信息，您希望在它更改时收到通知。我以前没有亲自使用过这个系统，但看起来 Line 接口允许您为事件添加 LineListener。

代码看起来像这样：

```
...

if(AudioSystem.isLineSupported(Port.Info.HEADPHONE) && hpfound ==0){ 
  Line line = AudioSystem.getLine(Port.Info.HEADPHONE);
  line.addLineListener(new LineListener() {
       public void update(LineEvent event) {
         switch (event.getType()) {
           CLOSE: doSomethingOnClose();
           STOP: doSomethingOnStop();
           // etc...
         }
       }
     });
}

... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T19:48:57.223

你的目标延迟是多少？

你能设置重复的“单次运行”吗？（例如，通过定时器？）

我希望while循环连续运行一个“切片”，并且它的响应与“切片”的大小和间距有关。但是线程通常不会提前 50 秒运行！即使是 50 毫秒也有点过分。因此，这不能完全解释您获得的缓存量。

无论如何，对于不经常发生并且可能只需要 50 毫秒精度的事件而言，像您一样运行 while 循环在 CPU 方面似乎代价高昂？（目前，while 循环正在测试连续的微秒甚至纳秒，而不是一个完全高回报的测试。）每 50 毫秒重复一次轮询的 Timer 循环应该可以更好地利用周围的资源。

另外一点，如果您采用 Timer 路线：Goetz/Bloch/Lea/others 在“Java Concurrency in Practice”中吹捧 ScheduledThreadPoolExecutor 优于 util.Timer，并且是 Java 1.5 及更高版本的首选。他们说它在处理未经检查的异常方面做得更好。

另一种可能性：在您的 while 循环中放置一个 Thread.sleep(50) 或类似的值，这可能有助于以等同于使用 TimerTasks 的方式。

我不能肯定这会解决问题，但至少“缓存”不会因此而变得如此之大，并且整体性能应该会略有提高。

# linux - 为什么使用 __get_free_pages() 以 10 或 11 的顺序分配页面通常会失败？

> ID：11340475
> 
> 赞同：8
> 
> 时间：2012-07-05T08:24:32.523
> 
> 标签：linux, memory, kernel

我的系统内存充足（24GB 的服务器）。在我的系统中，内核空间被分配了 320MB 和 120MB 用于崩溃内核。剩余的内存用于其他目的。但是，当我`__get_free_pages()`用来分配顺序为 11 的连续页面时，内核无法分配 2^10 个页面。为什么？

根据[makelinux](http://www.makelinux.net/ldd3/chp-8-sect-3)

> order 的最大允许值为 10 或 11（对应于 1024 或 2048 页），具体取决于架构。但是，除了新启动的具有大量内存的系统之外，order-10 分配成功的可能性很小。

为什么呢？我系统中的每一页为 4KB（4096 字节），2^10 页 = 1024 页，总大小为 1024*4096 = 4 194 304（字节）~4MB。它只有 4MB 的连续空间，内核非常小：vmlinuz 只有 2.1MB，initrd 是 15MB。整个内核的总内存消耗约为 300MB。内核分配 4MB 的连续页面必须绰绰有余。即使在具有 1GB/3GB 内核/用户的普通机器上，也确保内核不会用完整个 1GB。但是只有 4MB 连续页面的分配怎么会失败呢？而且我认为，在内核空间中，内存不是分散在物理内存中（由于虚拟内存映射），而是线性且连续的。

我尝试首先使用 2^10 页分配加载我的内核模块，但它失败并转储堆栈跟踪：

```
[    6.037056]  [<ffffffff810041ec>] dump_trace+0x86/0x2de
[    6.037063]  [<ffffffff8122fe83>] dump_stack+0x69/0x6f
[    6.037070]  [<ffffffff8108704e>] warn_alloc_failed+0x13f/0x151
[    6.037076]  [<ffffffff8108786a>] __alloc_pages_nodemask+0x80a/0x871
[    6.037081]  [<ffffffff81087959>] __get_free_pages+0x12/0x50 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-05T08:45:25.600

如果我没记错的话，`__get_free_pages`使用[buddy allocation ，](http://en.wikipedia.org/wiki/Buddy_allocation)*它*不仅将其分配分散在整个物理内存中，而且在随后尝试分配大的连续块时以*最糟糕的模式这样做。*如果我的计算是正确的，那么在您的系统上具有 24GB 的物理 RAM，*即使*除了伙伴分配之外没有任何空间被占用，它也需要少于 8192 个 order-0 (4KB) 分配来呈现 4MB 块的分配`__get_free_pages`不可能.

有一种叫做[连续内存分配器](http://lwn.net/Articles/447405/)的东西，它应该解决设备驱动程序对大型物理连续分配的真正需求；截至 2011 年 6 月，它不在官方内核中，但那是一年多以前的事了。你应该调查一下。

# jquery - Get SVG representation of div using jQuery SVG

> ID：11340476
> 
> 赞同：0
> 
> 时间：2012-07-05T08:24:36.827
> 
> 标签：jquery, svg, jquery-svg

I am trying to get svg representation of a div.I am using jQuery SVG for this [http://keith-wood.name/svg.html](http://keith-wood.name/svg.html)

I am doing this on page load:

```
var pad = null;
    $('.MyDiv').svg({onLoad: function(svg) { 
        pad = svg; 
    } 
    }); 
```

and on every change inside div , i am doing this:

```
var svg = $('.MyDiv').svg('get'); 
alert(svg.text); 
```

but i am getting some JS code in alert. i tried alerting `svg.toSVG()` but i am getting this :

`<svg version='1.1'></svg>` in alert

`svg.toSVG()` seems to work but i am getting empty svg doc even if my div has data in it.

what i am doing wrong here?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T11:35:04.687

The [innerSVG shim](http://code.google.com/p/innersvg/) might be helpful to you.

# win32-process - 在运行时更改进程描述

> ID：11340477
> 
> 赞同：1
> 
> 时间：2012-07-05T08:24:43.803
> 
> 标签：win32-process

我有一个 C win32 应用程序，它使用 CreateProcess() 启动其他应用程序。每个新进程都有一个唯一的端口号和其他内容。我的问题是无论如何要在运行时将端口号添加到新进程描述中？我希望它能够通过查看任务管理器 > 进程 > 描述列来分离进程。

请理解我说的是运行时间而不是编译时间。

带着敬意，

厄桑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T19:05:43.433

描述值是从进程的版本资源中获取的，在进程运行时无法更改。

# iphone - Xcode 4中的“部署目标”和“iOS部署目标”有什么区别

> ID：11340478
> 
> 赞同：7
> 
> 时间：2012-07-05T08:24:44.277
> 
> 标签：iphone, ios, deployment, xcode4, target

自 Xcode 4 发布以来，我一直在怀疑`deployment target`选项。有两个选项可以设置。

1.  首先在“TARGETS”窗格上，称为`Deployment Target`. 这用于设置应用程序可以运行的最低 iOS 版本。
2.  第二个在“项目”窗格上，称为`iOS Deployment Target`. 嗯，这是我不熟悉的。

如果我支持说 iOS 4+，有人可以向我解释如何正确设置第二个选项吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T08:28:17.680

1.  第一个与同一项目的不同目标有关，您可以在其中为它们定义特定设置。它通常用于在单个项目中维护同一核心项目的不同版本。例如：一个付费版和一个试用版，您将有一个付费版目标和一个试用版目标
2.  您可以在此处定义调试和发布方案的配置。例如： ![在此处输入图像描述](../Images/6ef659cf733d651e44c23884aa262af3.png)

你可以看到我添加了一个新的配置。您现在将对实际目标进行不同的设置：

![在此处输入图像描述](../Images/f7a6ed73f21cf89044b806f7bed76b80.png)

您还可以做一些有趣的事情，例如在目标上选择您的定义，将它们复制并粘贴到文件（*.xconfig 文件）中。您可以通过定义它的名称来将此文件用作配置：

![在此处输入图像描述](../Images/49ba11dcca99b066793c844f8da7679c.png)

这对于维护存储库上的设置版本特别有用。

**编辑 1.0：**

我编辑了第二点

# java - 以编程方式修改 Spring bean

> ID：11340486
> 
> 赞同：4
> 
> 时间：2012-07-05T08:25:13.670
> 
> 标签：java, spring, spring-mvc

我目前正在开发一个网络应用程序。我知道 Spring 的一些基础知识，但是我并没有太多地使用它，因此我决定提高我的 Spring 技能，但我遇到了一个我无法真正找到好的解决方案的问题。

我想在我的应用程序中实现一个功能，允许用户在不接触任何配置文件（例如 spring bean）的情况下配置所有内容，基本上想要部署、启动和使用应用程序的人应该只复制 .WAR 文件进入例如 tomcat 并且所有配置都应该在应用程序中完成（例如在 OpenFire 中）。

所以我想用户将应用程序部署到某个 URL 并且一切都通过 UI 完成，一旦所有详细信息都存储在 cfg 文件中，应用程序重新启动和配置，他就会被询问一些参数（例如数据库连接详细信息）过程结束。

我想在 spring bean 中拥有所有配置细节，但我发现我不能真正以编程方式更改它们（一种解决方案是修改文件'out of spring'并在病房后重新加载应用程序上下文 - 是好方法？）。另一种方法是将 xml 文件存储在 WEB-INF 中，并在从用户那里收集数据后将数据保存在那里，但是如何将非 bean 文件中的数据加载到应用程序上下文中？

任何建议appriciated！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T08:33:29.537

您可以将这些值保存在属性文件中。[您可以在spring bean](http://www.summa-tech.com/blog/2009/04/20/6-tips-for-managing-property-files-with-spring/)中使用属性文件值。
您还可以使用通过 UI 接受的用户输入来更新属性文件中的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T08:41:26.957

`ApplicationContext`您可以通过类及其子类访问任何 bean 。从这里，您可以调用所有 bean 的属性的 getter 和 setter；但是值得注意的是，应用程序上下文已经创建，`BeanFactory`, 所以会有一些你错过的生命周期步骤。

在您自己的 bean 上设置与生命周期无关的属性当然是可行的，但我不建议在设置并启动上下文后尝试更改“基础设施”bean 的属性（例如事务管理、包扫描） .

如果您的目标用户是一个天真的用户，也许您可​​以提供修改属性文件的功能，然后以编程方式重新加载 Web 应用程序，并让您的 Spring 上下文使用`PropertyPlaceholderConfigurer`or加载其属性`PropertyOverrideConfigurer`。

如果您的目标用户是“内部”精通 IT 的用户，那么您还可以使用 JMX，这将允许您更改上下文中每个 bean 的属性使用`jconsole`或类似的。

# java - 从excel文件中提取的阿拉伯数据变成问号

> ID：11340488
> 
> 赞同：1
> 
> 时间：2012-07-05T08:25:20.887
> 
> 标签：java, encoding

我有一个用 Java 编写的程序，它读取一个 excel 文件并在 Java 输出控制台中输出单元格的内容，这个 excel 文件包含阿拉伯数据。

该程序运行良好，但一些阿拉伯字母和阿拉伯数字显示为“问号”/“？” 在 Java 数据输出中。

我认为这是编码问题。那么，我可以添加一个函数来指定 Java 程序中的编码......有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T08:30:16.737

由于您没有共享您的代码，我将发布如何在 java 中读取阿拉伯字符串，我们将使用：

```
String arabicText = testObject.getArabicText(); 
arabicText = new String(arabicText.getBytes("8859_1"), "UTF-8"); 
System.out.println("Arabic Text :  "+arabicText); 
```

希望您可以更改您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-08T10:12:16.793

两种从excel文件中获取正确数据的方法

1.  转到 Windows - 首选项 - 常规 - 展开菜单 - 工作区 - 更改底部的文本文件编码并应用
2.  右键单击包名称-属性-更改文本文件编码格式

# c# - 如何在wpf中动态上标和下标字符串值

> ID：11340489
> 
> 赞同：0
> 
> 时间：2012-07-05T08:25:26.263
> 
> 标签：c#, wpf

```
public partial class SupperSub : Window
{
    Control _txtbox;
    Control _bt;
    public SupperSub()
    {
        this.InitializeComponent();         
    }

    private void TextBox_GotFocus(object sender, System.Windows.RoutedEventArgs e)
    {
         _txtbox = (Control)sender;
    }

    private void Button_Click(object sender, RoutedEventArgs e)
    {
         _bt = (Control)sender;
         TextBox CastingTxt = _txtbox as TextBox;
         Button CastingBtn = _bt as Button;

         var Index = CastingTxt.CaretIndex;
         CastingTxt.Text = CastingTxt.Text.Insert(Index,CastingBtn.Content.ToString());
         CastingTxt.Focus();
         CastingTxt.CaretIndex = Index +1;
    }
} 
```

结果会是这样 ![在此处输入图像描述](../Images/717b52c6914bfe4cdf17c08359252ea8.png)

我需要的是，如果我单击按钮 2。它的内容（2）应该是**5 的上标**（文本框值）。如果我单击按钮 3，它的内容（3）应该是**5 个文本框值的下标**。我必须做什么才能得到我需要的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T19:31:42.940

您需要实现一个[RichTextBox](http://msdn.microsoft.com/en-us/library/system.windows.controls.richtextbox.aspx)控件。

然后看看这个[例子](http://www.grumpydev.com/2009/11/05/wpf-richtextbox-subscript-and-superscript-without-font-restrictions/)。

# java - im4java, mac 运行问题

> ID：11340491
> 
> 赞同：2
> 
> 时间：2012-07-05T08:25:36.843
> 
> 标签：java, osx-lion, imagemagick, im4java

每次我尝试在我的 java 应用程序中运行 im4java 时都会出现此错误：

```
org.im4java.core.CommandException: org.im4java.core.CommandException: dyld: Library not loaded: /ImageMagick-6.7.7/lib/libMagickCore.5.dylib
at org.im4java.core.ImageCommand.run(ImageCommand.java:219)
at Main.main(Main.java:55)
Caused by: org.im4java.core.CommandException: dyld: Library not loaded: /ImageMagick-6.7.7/lib/libMagickCore.5.dylib
at org.im4java.core.ImageCommand.finished(ImageCommand.java:253)
at org.im4java.process.ProcessStarter.run(ProcessStarter.java:314)
at org.im4java.core.ImageCommand.run(ImageCommand.java:215)
... 1 more 
```

我的系统是 Mac OS X Lion 10.7.4 (11E53) 并且 ImageMagic 已从命令行安装并正常工作，但在 Java 中却没有。

我唯一改变的是：

```
String myPath= "**************/ImageMagick/ImageMagick-6.7.7/bin";
ProcessStarter.setGlobalSearchPath(myPath); 
```

这就是为什么它的发现转换，而不是库。不知道该怎么办...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-02T09:50:34.917

我可以使用手动安装的 ImageMagick 重现该问题。

但它适用于自制软件安装的 ImageMagick：http: [//sethvargo.com/20110726/install-imagemagick-on-mountain-lion/](http://sethvargo.com/20110726/install-imagemagick-on-mountain-lion/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-08-21T15:12:31.990

看看脚本“convert”的位置我在文件夹/opt/local/bin/中有它因为我安装了ImageMagick命令端口

# php - 如何使用 javascript 将复选框数据传递给 Textarea

> ID：11340493
> 
> 赞同：1
> 
> 时间：2012-07-05T08:25:40.167
> 
> 标签：php, javascript

这是我的 javascript 代码

```
function AddContactPhoneNo()

{ 

    $("input[name='contact_id[]']:checked").each(function(){

        var opt_value = $(this).parent().parent().children('.contacts_firstname_01_contacts').text();
        var opt = "<option value='" + opt_value + "'>" + opt_value + "</option>";
        if  (opt_value != "")
        {
             alert(opt_value);
        }
    });} 
```

这是我的 HTML 代码

```
<div class="contacts_headings_01">
                                        <div class="contacts_checkbox_01"><input name="contact_id[]" id="contact_id" type="checkbox"  value="'.$contacts_row['contact_id'].'" style="margin-top:0px ; margin-left:-3px;" /></div>
                                        <div class="contacts_firstname_01_contacts">'.$firstname.'</div>
                                        <div class="contacts_firstname_01">'.$lastname.'</div>
                                        <div class="contacts_firstname_01">'.$company.'</div>
                                        <div class="contacts_group_01_contacts_page">'.$groups1.'</div>
                                        <div class="contacts_firstname_01_contactdateofbirth">'.$birth_date.'</div>
                                        <div class="contacts_gender_01">'.$gender2.'</div>
                                        <div class="ncontacts_mobile_nmbr_01">'.$phone1.'</div>
                                    </div> 
```

我有这样的错误

```
$ is not defined

$("input[name='contact_id[]']:checked").each(function(){ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T08:29:01.237

这可能会发生不包含 jQuery 的情况，或者您从不存在 jQuery 的 CDN 中包含它。

另一种可能发生的情况是在 Wordpress 中，你应该使用安全的 jQuery。

而不是使用**$('selector')**你应该使用**jQuery('selector')**。

PS：如果您在单独的 JS 文件中使用这部分代码，那么您应该在文档的所有脚本之上包含 jQuery。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T08:30:23.550

请添加 jquery 库，然后此错误将得到解决。

缺少 Jquery 库。

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

只需在标题部分添加上面的代码。

# azure - Windows Server 2008 上的 sysprep 失败

> ID：11340498
> 
> 赞同：0
> 
> 时间：2012-07-05T08:25:48.240
> 
> 标签：azure, windows-server-2008, azure-vm-role, unattended-processing

在部署 Azure VM 角色之前，我们需要执行

```
%windir%\system32\sysprep\sysprep.exe /generalize /oobe /shutdown 
```

但在我的情况下，sysprep 失败，日志文件 %windir%\system32\sysprep\Panther\setuperr.txt 说：

```
2012-07-05 08:03:57, Error      [0x0f0073] SYSPRP RunExternalDlls:Not running DLLs; either the machine is in an invalid state or we couldn't update the recorded state, dwRet = 31
2012-07-05 08:03:57, Error      [0x0f00ae] SYSPRP WinMain:Hit failure while processing sysprep cleanup external providers; hr = 0x8007001f 
```

我并不总是想创建一个新图像。有什么解决办法吗？我按照[此处](http://support.microsoft.com/kb/929828)MS 支持中的说明进行操作并尝试：

```
%windir%\system32\sysprep\sysprep.exe /generalize /oobe /shutdown /unattend:.\unattend.xml 
```

那没起效。

在某些情况下，我需要从 azure 中删除 VM 映像并重新部署并进行更多更改。因此 sysprep 几乎每周必须运行两次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T21:58:52.030

发现我们可以在 Windows 机器上运行 sysprep 的次数是有限的。在将其作为 Azure VM 角色上传之前，我犯了一个错误，即每次都保留一个图像并在其上运行 sysprep。这可能会导致 Windows 机器上的许可等失败。

所以我现在正在做的是保留一份未经过系统准备的 VHD 备份并对其进行更改。然后在运行 sysprep 之前再次进行备份。所以基本上Windows在上传之前只有效地进行了一次系统准备。它现在对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T09:27:17.603

您是否尝试过使用用户界面？只需直接执行 sysprep.exe，就会打开一个 UI。

如果您必须使用控制台，可以尝试以评估的方式运行控制台。（以管理员身份运行）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-25T01:52:27.287

您需要在 unattend.xml 文件中使用 SkipRearm。有关其位置的基本信息，请参阅[http://technet.microsoft.com/en-us/library/cc722350(v=WS.10).aspx](http://technet.microsoft.com/en-us/library/cc722350(v=WS.10).aspx)。SkipRearm 将允许您无限次地进行系统准备。

如果您不知道如何创建 unattend.xml 文件，那么您需要学习一些曲线。您还可以包含您的批量许可证密钥和自动激活以及许多其他无人值守功能。

但我不明白您为什么不概括和捕获 .wim 文件并重新部署该图像。再说一次，您处于 VM 模式，我对此知之甚少。也许您的 VM 软件捕获了您的 sysprep 分区，例如 imagex.exe 捕获了一个 .wim 文件。

如果您需要有关 unattend.xml 的更多帮助，请发布一个关于该问题的一般性问题，我们将尝试跳过该问题（当我拥有所有文档时）。

# iphone - removeUnusedTexture 时游戏场景闪烁

> ID：11340501
> 
> 赞同：0
> 
> 时间：2012-07-05T08:26:02.600
> 
> 标签：iphone, ios, cocos2d-iphone

我是 cocos2D 编程的新手。在我的代码中我写 [[CCTextureCache sharedTextureCache] removeUnusedTextures]; 删除未使用的纹理。但是当纹理被移除时，游戏场景会闪烁几分之一秒。如何解决这个问题。我知道我做错了什么？？？

我正在使用此代码创建精灵。

```
spriteEnemyGlider = [CCSprite spriteWithFile:@"enemyGlider.png" rect:CGRectMake(0,0,79,21)]; 
```

当它被删除时，在控制台中它会打印

```
cocos2d: CCTextureCache: removing unused texture: enemyGlider.png 
```

并且出现闪烁。

我做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T19:56:07.713

您不想在游戏过程中移除未使用的纹理。把它留给你改变场景的情况。尤其是如果它是一个普通的纹理，继续从内存中删除它会适得其反，因为 cocos2d 将不得不再次加载它，这需要时间。

我敢打赌，您的闪烁问题来自于 removeUnusedTexture 方法花费了异常长的时间，或者它删除了纹理只是为了在一瞬间重新加载它。

# c# - 实现依赖对象子属性的自定义集合的正确方法？

> ID：11340503
> 
> 赞同：3
> 
> 时间：2012-07-05T08:26:09.897
> 
> 标签：c#, collections

假设我有这样的课程：

```
public class MyClass {

    public int Id { get; set;}
    public string Name { get; set; }

} 
```

请注意，在我的例子中，这个类是失控的（来自第三方库）并且没有实现相等比较器。

现在我想要一个这些项目的集合，允许我根据它们的索引删除项目。

我希望能够做到：

```
void Foo()
{
    var collection = new MyClassCollection();

    var a = new MyClass { Id = 1, Name = "A" };
    var b = new MyClass { Id = 2, Name = "B" };

    collection.Add(a);
    collection.Add(b);

    // Other instance, that can come from external code
    var otherA = new MyClass { Id = 1, Name = "A" };
    var otherB = new MyClass { Id = 2, Name = "B" };

    collection.Remove(otherA);

    Console.WriteLine(collection.Count); // should output 1

    Console.WriteLine(collection.Contains(otherB)); // should be true

    collection.Add(otherB); // 

    Console.WriteLine(collection.Count); // should still output 1
} 
```

实际上，在集合中搜索时只应考虑 ID。此代码是依赖序列化 DTO 的项目的一部分，因此不能依赖实例。

我应该如何实现 MyClassCollection？

我考虑了两种可能性，但对我来说都不优雅：

1.  继承`List<MyClass>`并添加新方法。这将使 .Add 和 .Remove 保持原样，并可能导致消费者代码出现问题
2.  创建一个实现`ICollection<MyClass>`. 创建一个内部`Dictionary<int, MyClass>`来存储值，并使用字典内置功能在添加或删除之前检查键。通过包装内部字典值来实现接口的所有方法

我很感激你对我的案子的看法。

PS：我希望列表中的元素很少（<100 项）。性能不会是问题

编辑：我正在使用.Net 3.5 SP1。

Edit2：根据乔恩的建议，这是我的实现：

```
public class MyClassCollection : HashSet<MyClass>
{
    private class MyClassIDComparer : IEqualityComparer<MyClass>{

        public bool Equals(MyClass x, MyClass y)
        {
            if (x == null && y == null) return true;
            else if (x == null || y == null) return false;
            else return x.ID == y.ID;
        }

        public int GetHashCode(MyClass obj)
        {
            return obj.ID.GetHashCode();
        }
    }
    public MyClassCollection() : base(new MyClassIDComparer())
    {

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T08:30:39.357

[`HashSet<MyClass>`](http://msdn.microsoft.com/en-us/library/bb359438.aspx)非常适合您的用例，因为它可以模拟您的意图并且可以使用自定义进行配置`IEqualityComparer<MyClass>`（因此不`MyClass`实现并不重要`IEquatable<MyClass>`）。

不幸`HashSet`的是没有实现`IList`，所以它不能直接进行基于索引的访问——但你真的需要吗？也许可以通过重新考虑您的业务逻辑的某些部分来放宽这个要求？

# java - 将字符串数组转换为哈希图

> ID：11340505
> 
> 赞同：7
> 
> 时间：2012-07-05T08:26:11.133
> 
> 标签：java, hashmap, logic

我有以下回应

```
T2269|175@@2a1d2d89aa96ddd6|45464047 
```

通过使用**split("\\|")**我已转换为字符串数组对象。每个字段的含义如下：

```
T2269                  id
175@@2a1d2d89aa96ddd6  cid
45464047               refno 
```

不，我必须将其转换为 HashMap 对象。他们对上述问题有任何解决方案吗？

**以上述响应为例。实际上，字符串数组对象的长度是 36。**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-05T08:33:59.380

您必须循环并一一添加结果。用键声明一个数组，例如：

```
static String[] keys = new String[]{"id", "cid", "refno", ...}; 
```

接着

```
String[] s = text.split("\\|");
for (int i = 0; i < s.length; i++)
  map.put(keys[i], s[i]); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-05T08:33:58.467

```
final String[] fields = input.split("\\|");
final Map<String, String> m = new HashMap<String, String>();
int i = 0;
for (String key : new String[] {"id", "cid", "refno"})
  m.put(key, fields[i++]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T08:35:26.180

键应该是唯一的，因此显然使用 ID 作为键是非常有意义的，并且您可以将值存储为包含 id、cid、refno 的数组/列表，或者您可以创建一个包含这些字段的对象并将其存储.

# ruby-on-rails - ruby on rails 数据库设计

> ID：11340506
> 
> 赞同：0
> 
> 时间：2012-07-05T08:26:11.337
> 
> 标签：ruby-on-rails, database, database-design, database-table

我正在使用设计进行身份验证，并且我添加了一些用户个人字段，我不确定这些字段是否是继续开发我的应用程序的正确方法，并且是正确的数据库设计......

```
users   CREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(255) NOT NULL DEFAULT '',
 `encrypted_password` varchar(255) NOT NULL DEFAULT '',
 `reset_password_token` varchar(255) DEFAULT NULL,
 `reset_password_sent_at` datetime DEFAULT NULL,
 `remember_created_at` datetime DEFAULT NULL,
 `sign_in_count` int(11) DEFAULT '0',
 `current_sign_in_at` datetime DEFAULT NULL,
 `last_sign_in_at` datetime DEFAULT NULL,
 `current_sign_in_ip` varchar(255) DEFAULT NULL,
 `last_sign_in_ip` varchar(255) DEFAULT NULL,
 `created_at` datetime NOT NULL,
 `updated_at` datetime NOT NULL,
 `username` varchar(255) NOT NULL DEFAULT '',
 `twitter` varchar(255) CHARACTER SET utf8 COLLATE utf8_unicode_ci DEFAULT NULL,
 `facebook` varchar(255) CHARACTER SET utf8 COLLATE utf8_unicode_ci DEFAULT NULL,
 `location` varchar(255) CHARACTER SET utf8 COLLATE utf8_unicode_ci DEFAULT NULL,
 `website` varchar(255) CHARACTER SET utf8 COLLATE utf8_unicode_ci DEFAULT NULL,
 `name` varchar(255) CHARACTER SET utf8 COLLATE utf8_unicode_ci DEFAULT NULL,
 `bio` varchar(255) CHARACTER SET utf8 COLLATE utf8_unicode_ci DEFAULT NULL,
 PRIMARY KEY (`id`),
 UNIQUE KEY `index_users_on_email` (`email`),
 UNIQUE KEY `username` (`username`),
 UNIQUE KEY `index_users_on_reset_password_token` (`reset_password_token`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=latin1 
```

我应该创建另一个表并存储用户的个人字段，例如

*   推特
*   Facebook
*   地点
*   网站
*   姓名
*   生物

还是保持它们现在的样子就可以了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T17:57:21.697

我会将这些属性抽象到另一个表中。也许创建一个“个人资料”表，您可以在其中保留这样的内容。然后一个用户将属于_to Profile，而一个Profile has_one User。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T08:32:12.983

您应该检查[数据库规范化](http://en.wikipedia.org/wiki/Database_normalization)。location、website、name 和 bio 是可能出现冗余数据的列，但我会冒险非规范化的后果，因此您不需要 JOIN-Statement 来链接两个表，这比链接它们要快。

# c# - 是否可以在 c# 中添加二维列表？

> ID：11340507
> 
> 赞同：0
> 
> 时间：2012-07-05T08:26:13.890
> 
> 标签：c#, list, collections

我有一个属性列表。我想为同一页面中的多个元素添加这些 PropertiesCollections。这就像

```
[0] => List
       ([0] => ID
        [1] => Name
        [2] => Add
        [3] => PhoneNo
        [4] => City)
[1] => List
    (And so on....

internal class PropertiesCollection : List<Properties>
{
}

internal class Properties
{
}

PropertiesCollection collection = new PropertiesCollection (); 
```

我怎样才能实现

```
Something[0,collection[0]]  
Something[0,collection[1]]
Something[1,collection[0]]
Something[1,collection[1]] ? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T08:31:07.087

我相信你可以做一个列表列表

```
List<List<string>> list=new List<List<string>>(); 
```

然后要访问单个元素，您可以执行以下操作：

```
List<string> list=listlist[0];
        int i=list[0]; 
```

或使用 foreach 循环等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T08:35:28.143

您可以使用“列表”来做您想做的事

```
private enum Property { ID = 0, Name, Add, PhoneNo, City };
string[] details = new string[5] { "1", "Frank Butcher". "Y", 
                                   "02087891256", "London (Albert Square)" };
List<string[]> propertyList = new List<string[]>();
propertyList.Add(details); 
```

获得弗兰克屠夫的名字将像

```
string franksName = propertyList[0][(int)Property.Name]; 
```

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T08:51:19.507

您可以使用：

```
List<PropertiesCollection> propColl = new List<PropertiesCollection>();
PropertiesCollection coll = new PropertiesCollection();
coll.Add(new Properties(some parameters));
coll.Add(new Properties(some parameters));
propColl.Add(coll);
propColl[0][0]; 
```

# c# - SerialPort.Read(....) 不尊重 ReadTimeOut

> ID：11340513
> 
> 赞同：3
> 
> 时间：2012-07-05T08:26:49.017
> 
> 标签：c#, serial-port

在一些与支付终端通信的遗留代码中存在错误。

就在开始新的支付之前，代码尝试清除 SerialPort 的内部读取缓冲区。

我将代码缩减到最低限度。它使用 .NET SerialPort 类型。设置了 50 毫秒的读取超时。然后它读取 512 个字节并继续这样做，直到不再读取字节或抛出 TimeoutException。

我们添加了一堆日志记录，它表明调用第一个 Read(...) 方法有时需要 10 到 15 分钟，即使超时时间为 50 毫秒。然后抛出 TimeoutException 并且应用程序继续。但是在 Read(...) 期间，应用程序挂起。

这并不总是发生，Windows 2000 机器由于某种原因似乎更容易出现此错误。

```
public class Terminal
{
    private SerialPort _serialPort = new SerialPort();

    public void ClearReadBuffer()
    {
        try
        {   
            _serialPort.ReadTimeout = 50;
            int length;
            do
            {
                var buffer = new byte[512];
                length = _serialPort.Read(buffer, 0, 512);
            } while (length > 0);
        }
        catch (TimeoutException) {}
    }
} 
```

任何帮助表示赞赏。

PS：大多数错误报告来自设备连接到 EdgePort 的 W2K 机器，EdgePort 模拟了一堆虚拟 COM 端口。它的驱动程序创建了一堆（8 个左右）本地 COM 端口。

但我们也有来自 Windows 7 的报告。如果我们直接将设备连接到 PC（无 EdgePort），我们也可以重现该问题。但是没有那么频繁，当它发生时延迟不是 10 分钟，而是更像 1 - 2 分钟。

**更新**：尝试了很多方法来解决这个问题。很难复制，但在现场经常发生，因为它分布在数千台 PC 上。实际上用另一个开源版本替换了 .NET 2.0 SerialPort 类型。在一台 PC 上工作没有问题，我们实际上可以在 60-70% 的时间内复制它。但可惜的是，在生产中的试点测试期间，问题仍然继续出现。

支付终端的代码是几年前编写的，我将其移植到另一个应用程序中。在移植期间，我重构了一些代码，但保留了原始功能。与终端通信时，代码将：

1.  从线程池中触发另一个线程
2.  将消息发送到设备
3.  从串行端口读取，直到收到响应或发生超时。

同时，主线程有一个 while 循环，其中包含一个 Thread.Sleep(50) 和一个 Application.DoEvents() 调用（糟糕！）。我重构了整个“等待循环”，并使用了 WaitHandle (AutoResetEvent / ManualResetEvent)。我只是等到这个句柄被设置。工作没有问题，但在某些 PC 上，所有串行端口通信都会冻结几分钟，直到有东西触发它。重新启用 Application.DoEvents() 的工作方式，问题就消失了。

不幸的是，它仍然在那里，对我来说为什么需要它以及为什么它会导致如此严重的副作用是一个谜。该应用程序支持 5 种其他类型的串行端口设备。与这些设备进行通信从来不需要这样的东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T08:38:41.073

也许在端口的“要读取的字节”上添加一个测试可能有助于避开编码错误的驱动程序：

```
length = (_serialPort.BytesToRead > 0) ? _serialPort.Read(buffer, 0, 512) : 0; 
```

更好的是，使用

```
_serialPort.DiscardInBuffer(); 
```

反而！

# sql-server-2008 - 删除和更新照片

> ID：11340514
> 
> 赞同：0
> 
> 时间：2012-07-05T08:26:58.403
> 
> 标签：sql-server-2008, sql-server-2008-r2

我有两个表 1.blogalbum 其中的数据是

```
Id  AlbumName   CoverPhoto          CreatedDate                    Description     
1   Onam        noImage.jpg     2012-07-05 10:54:46.977            Onam is an ancient festival which still survives in modern times. Kerala's rice harvest festival and the Festival of Rain Flowers, which fall on the Malayalam month of Chingam, celebrates the Asura King Mahabali's annual visit from Patala (the underworld). Onam is unique since Mahabali has been revered by the people of Kerala since prehistory.    According to the legend, Kerala witnessed its golden era during the reign of King Mahabali. The Brahma-Vaivarta Puranam explains that Lord Vishnu wante     
2   Birds       noImage.jpg     2012-07-05 11:02:48.667         
3   Nature    gold-fish.jpg     2012-07-05 11:03:36.503 
```

2.blogphoto 其中的数据在哪

```
 Id  AlbumId PhotoName                  AddedDate            
    29  1   Photo0364.jpg      2012-07-05 11:01:18.270          
    30  1   Photo0380.jpg      2012-07-05 11:01:35.723         
    31  1   Photo0404.jpg      2012-07-05 11:01:47.717          
    32  1   Photo0404.jpg      2012-07-05 11:02:34.457          
    33  2   f.jpg              2012-07-05 11:03:03.300          
    34  2   g.jpg              2012-07-05 11:03:12.917         
    35  3   image005.jpg       2012-07-05 11:03:45.367          
    36  3   1.jpg              2012-07-05 11:03:57.837          
    37  3   2.jpg              2012-07-05 11:04:05.580          
    38  3   na.jpg             2012-07-05 11:04:17.337          
    39  3   gold-fish.jpg      2012-07-05 11:06:29.453 
```

从上面的表格中，当我从第二个表格中删除任何照片时，第一个表格中与第二个表格中的照片名称相同的字段封面照片必须替换为图像 noImage.jpg。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T08:51:55.877

我建议更新您的数据库架构。

代替表一中的封面照片字段，添加与表 2 具有外键关系的 BlogPhotId。然后您可以对其进行配置，以便当从表 2 中删除照片时，将表 1 中的值设置为 null。

然后在应用程序逻辑中，显示表 1 中 BlogPhotoId 为空的 noImage.jpg。

在不更正架构的情况下进行更新的查询如下所示：

```
SELECT @AlbumId = Album, @PhotoName = PhotoName FROM BlogPhoto WHERE Id = @Id
DELETE FROM BlogPhoto WHERE Id = @Id
UPDATE BlogAlbum SET CoverPhoto = 'noImage.jpg' WHERE AlbumId = @AlbumId AND PhotoName = @PhotoName 
```

除了这样的一组查询，您还可以考虑使用触发器，并查看已删除的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T09:17:52.230

我同意 James 更新您的架构或设置触发器。无论如何，一个简单易行的方法就是在删除后更新您的第一个表，替换已删除的图片。

```
UPDATE blogalbum
SET CoverPhoto = 'noImage.jpg'
WHERE CoverPhoto = 'yourDeletedPicture.jpg' 
```

# javascript - 使用 KendoUI Grid 小部件使用本地数据实现 CRUD 函数

> ID：11340516
> 
> 赞同：0
> 
> 时间：2012-07-05T08:27:04.610
> 
> 标签：javascript, kendo-ui

我需要使用本地数据实现具有 CRUD 功能的 KendoUI Grid 小部件。我会将一些来自服务器的数据序列化为 json。我想从网格中加载这些数据。当从网格中添加/更新/删除新条目时，我希望相应地更新数据数组。到目前为止，我已经用数据加载了网格，但我不确定如何实现创建、更新和销毁命令，以便在数据数组中更新更改。这是 jsfiddle 示例。

[http://jsfiddle.net/MwHNd/300/](http://jsfiddle.net/MwHNd/300/)

我对 javascript 非常陌生，对于 jsfiddle 示例的工作示例的任何帮助将不胜感激。谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T11:04:42.027

我已经编辑了 jsfiddle 链接示例。现在它做了我想要的。我注意到有时在我添加一个新项目后，保存它，然后删除它并再次单击保存，保存后再次调用删除命令...

[http://jsfiddle.net/MwHNd/408/](http://jsfiddle.net/MwHNd/408/)

# php - mysql：如何创建用户以及如何使用 php 访问 mysql localhost 服务器

> ID：11340521
> 
> 赞同：1
> 
> 时间：2012-07-05T08:27:14.853
> 
> 标签：php, mysql

我也是 mysql 和 php 的新手，所以请忽略我在这方面的知识。

我想做以下事情：-- 1\. 我想要一个 mysql localhost 服务器，并在其中有一个表，我将在其中保存用户名和密码。2\. 我将创建一个带有登录选项的网页，一旦用户点击提交，我将使用我在上面创建的数据库对用户进行身份验证。

以下是我现在所做的：--我也是 mysql 和 php 的新手。我做了很多搜索，但无法理解我在我的机器上安装了什么。我下载了mysql并安装了它。我看到一个 mysql cmd 提示符。我创建了一个数据库，并在其中创建了一个表。现在我如何创建用户？我尝试使用 CREATE user xyz 创建它；但它说尝试连接并且连接失败（它到底是在尝试连接什么？）

我搜索了访问本地主机服务器，我得到了代码

```
<?PHP

$user_name = "root";
$password = "";
$database = "addressbook";
$server = "127.0.0.1";
$db_handle = mysql_connect($server, $user_name, $password);

$db_found = mysql_select_db($database, $db_handle);

if ($db_found) {
print "Database Found ";
mysql_close($db_handle);
}
else {
print "Database NOT Found ";
}

?> 
```

这对我来说看起来相当不错。

我的问题是如何在 mysql 中创建用户？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T08:31:25.663

如果你看看[http://dev.mysql.com/doc/refman/5.1/en/create-user.html](http://dev.mysql.com/doc/refman/5.1/en/create-user.html)

您可以查看如何创建用户，以及从那里获得有关授予权限或至少限制他们可以/不能做什么的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T08:42:34.133

您还可以安装[WAMP](http://www.wampserver.com/en/)，它是一组 Apache、PHP、MySQL Server 和 PhpMyadmin。它将帮助您开始使用 MySQL 和 PHP。

启动服务后，您将能够在 MySQL 控制台或 PhpMyadmin 中创建新用户。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T08:38:07.707

小提示：将其用于开发

```
 $db_handle = mysql_connect($server, $user_name, $password) or die(mysql_error());
 $db_found = mysql_select_db($database, $db_handle) or die(mysql_error()); 
```

万一连接失败或选择您从您的 dbms 中抛出 die(mysql_error()) 详细信息错误是什么

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T10:23:11.243

我终于让它工作了。

为什么我会收到那个错误？我安装了 XAMPP 并从那里启动了 mysql 服务器，我正在使用我已安装的其他一些 mysql 的命令提示符。

如何创建一个表并使用 php 访问它？以下是你必须做的！安装 XAMPP 安装后，运行“xampp-control.exe” 在该控制器中启动 mysql 服务。使用 C:\XYZ\xampp\mysql\bin> mysql.exe -uroot 以超级用户模式打开 mysql 命令提示符

mysql shell 将打开。创建用户使用：mysql> CREATE USER 'newuser'@'localhost' IDENTIFIED BY 'mypass';

创建数据库使用：mysql> Create DATABASE my_db;

将数据库设置为当前数据库：mysql> use my_db;

使用以下命令创建表： mysql> CREATE TABLE users ( user varchar(255) NOT NULL, password varchar(255) NOT NULL );

在该表中插入一个值： mysql> INSERT INTO users values ( 'usernew' , 'password' );

现在编写 php 代码来访问它：

```
<?php

   $user_name = "newuser";
   $password = "mypass";
   $database = "my_db";
   $server = "localhost";
   $db_handle = mysql_connect($server, $user_name, $password) or die(mysql_error());
   $db_found = mysql_select_db($database, $db_handle) or die(mysql_error());

   if ($db_found) {
   print "Database Found ";
   }

   else {
   print "Database NOT Found ";
   }

   $query = "SELECT * FROM users";
   $result = mysql_query($query);

   while ($line = mysql_fetch_array($result))
   {
         foreach ($line as $value)
          {
            print "$value\n";
        }
         }

      $queryInsert = "INSERT INTO users values('mohan', 'mohan123')";
      $result = mysql_query($queryInsert);

      mysql_close($db_handle);

?> 
```

希望能帮助到你！:)

# opencv - 在完全本机应用程序中使用 OpenGL 显示 cv::Mat

> ID：11340522
> 
> 赞同：2
> 
> 时间：2012-07-05T08:27:19.010
> 
> 标签：opencv, opengl-es, android-ndk

我正在尝试制作一个使用 OpenGL-ES 的简单的完全原生应用程序。感谢 ndk 示例 native-activity，我能够在屏幕上显示一种颜色。现在我想显示一个`cv::Mat`（捕获相机）的内容，把它放在一个 openGL 纹理中。

大多数涉及 OpenCV 的示例都使用半原生应用程序和 java 处理显示部分。有人知道如何在 android 本机代码中创建一个`glTexImage2D`from吗？`cv::Mat`

谢谢

# java - 在排序数组 X 中搜索第一个索引 i 使得 X[i] >= a

> ID：11340527
> 
> 赞同：0
> 
> 时间：2012-07-05T08:27:25.517
> 
> 标签：java, c++, algorithm, language-agnostic

我正在努力调整 codaddict[在这里提出](https://stackoverflow.com/questions/4172580/interview-question-search-in-sorted-array-x-for-index-i-such-that-xi-i)的代码来解决这个问题的简单变体。有人有想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T08:33:59.230

您采用他的算法，然后返回`high`而不是`-1`. 如果`X[high]`小于你的目标，取而代之的是下一个项目。如果`high`等于您的数组大小，则没有这样的索引。

迈克尔安德森关于你所指的算法是如何编写的是正确的，但它很容易适应。

```
int find_hi (const std::vector<int> &X, int t) {
   int low  = 0;
   int high = X.size() - 1;
   while(low <= high) {
       int mid = (low + high) / 2;
       if(X[mid] == t) return mid;
       else if(X[mid] < t)
           low = mid + 1;
       else
           high = mid - 1;
   }
   if (high < sz && X[high] < t) ++high;
   return high;
} 
```

但是，这等效于 C++ 中的以下内容：

```
int find_hi (const std::vector<int> &X, int t) {
    return std::lower_bound(X.begin(), X.end(), t) - X.begin();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T08:39:09.653

这是一种[二分查找](http://en.wikipedia.org/wiki/Binary_search_algorithm)的采用。

```
#include <list>
#include <iostream>

int arr[9]={0,1,2,3,4,5,7,7,8};

/*int * array - where to search
  int numberOfElements - the number of elements in array
  int targetValue - the value that we are looking for 
*/

int find( int * array, int numberOfElements, int targetValue)
{
    //we start with searching in the whole array (this is our "scope").
    int left = 0;
    int right = numberOfElements;

    while(left < right)
    {
        //We take the middle item of our "scope" and compare it with the target value.
        int mid = (left + right) / 2;
        if( array[ mid ] >= targetValue)//If we did hit
        {
            //we check is it the first item to match our criteria.              
            if(array[ mid - 1 ] < targetValue)
            {
                //If it is, we return the index.
                return mid;
            }
            else
            { 
                //Else, we continue searching to the left. 
                right = mid;
            }
        }
        //If we didnt hit from the first guess, we continue with our "scope"
        //being either the left of the right half of the previous "scope".
        else if( array[mid] > targetValue )
            right = mid;
        else
            left = mid;
     }
}

int main()
{
    std::cout << find(arr, 9, 7);
} 
```

`output: 3`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T08:44:30.750

要找到需要修改结束条件的第一个索引，以检查它是否真的是满足条件的第一个索引`i`：`X[i] >= a`

```
public int findIndex(int[] array, int target) {
    int left = 0;
    int right = array.length;
    while (left < right) {
        int mid = (left + right) / 2;
        if (array[mid] >= target && (mid == 0 || array[mid - 1] < target)) {
            return mid;
        } else if (array[mid] > target) {
            right = mid;
        } else
            left = mid;
    }
    return -1;
} 
```

# xslt-1.0 - 选择包含混合内容或仅使用 XPath 的文本的节点

> ID：11340532
> 
> 赞同：3
> 
> 时间：2012-07-05T08:27:44.510
> 
> 标签：xslt-1.0, xpath-1.0

使用 XPath 1.0 和 XSLT 1.0 我需要选择混合内容的直接父级或仅文本。考虑以下示例：

```
<table class="dont-match">
    <tr class="dont-match">
        <td class="match">Mixed <strong class="maybe-match">content</strong> in here.</td>
        <td class="match">Plain text in here.</td>
        <td class="dont-match"><img src="..." /></td>
    </tr>
</table>
<div class="dont-match">
    <div class="dont-match"><img src="..." /></div>
    <div class="match">Mixed <em class="maybe-match">content</em> in here.</div>
    <p class="match">Plain text in here.</p>
</div> 
```

显然 classes `match`，`maybe-match`and`dont-match`仅用于演示目的，不可用于匹配。`maybe-match`意味着最好不匹配，但我可以自己解决问题，以防难以排除这些。

提前谢谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T09:06:55.883

要获得匹配项和可能匹配项，您可以使用

```
 //*[count(text())>=1] 
```

如果您的 xml 解析器只忽略空白文本节点，或者其他

```
//*[normalize-space(string(./text())) != ""] 
```

并且可以通过检查某些锚点是否匹配来过滤掉可能的匹配项，但随后它变得丑陋（空白仅作为文本节点的情况）：

```
//*[(normalize-space(string(./text())) != "") and count(./ancestor::*[normalize-space(string(./text())) != ""]) = 0] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T14:43:37.347

**对于“匹配”使用**：

```
//*[text()[normalize-space()] and not(../text()[normalize-space()])] 
```

**对于“可能匹配”，请使用**：

```
//*[../text()[normalize-space()]] 
```

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/">
     <xsl:copy-of select=
      "//*[text()[normalize-space()] and not(../text()[normalize-space()])]"/>
==========
   <xsl:copy-of select="//*[../text()[normalize-space()]]"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当对提供的 XML 应用此转换时**（包装到单个顶部元素中以成为格式良好的 XML 文档）：

```
<t>
<table class="dont-match">
    <tr class="dont-match">
        <td class="match">Mixed <strong class="maybe-match">content</strong> in here.</td>
        <td class="match">Plain text in here.</td>
        <td class="dont-match"><img src="..." /></td>
    </tr>
</table>
<div class="dont-match">
    <div class="dont-match"><img src="..." /></div>
    <div class="match">Mixed <em class="maybe-match">content</em> in here.</div>
    <p class="match">Plain text in here.</p>
</div>
</t> 
```

**计算两个 XPath 表达式中的每一个，并将选定的节点复制到输出：**

```
<td class="match">Mixed <strong class="maybe-match">content</strong> in here.</td>
<td class="match">Plain text in here.</td>
<div class="match">Mixed <em class="maybe-match">content</em> in here.</div>
<p class="match">Plain text in here.</p>
==========
   <strong class="maybe-match">content</strong>
<em class="maybe-match">content</em> 
```

**正如我们所看到的，这两个表达式都*准确地*选择了想要的元素。**

# sql - 条件计数：使用 SUM() 与 COUNT() 的性能差异？

> ID：11340540
> 
> 赞同：6
> 
> 时间：2012-07-05T08:28:08.810
> 
> 标签：sql, count, query-optimization

就像一个非常简单的例子，假设我有一个`test`带有示例数据的表，如下所示：

```
a     |     b      
-------------
1     |    18
1     |    24
1     |    64
1     |    82
1     |    10
1     |     7
2     |     5
2     |    18
2     |    66
2     |    72
3     |    81
3     |    97 
```

对于每个`a`，我要计算有多少`b`个 < 50。结果如下所示：

```
a     |   bcnt
--------------
1     |      4
2     |      2
3     |      0 
```

现在我可以通过以下两种方式之一实现此结果：

```
SELECT a, COUNT(CASE WHEN b < 50 THEN 1 ELSE NULL END) AS bcnt
FROM test
GROUP BY a 
```

或者：

```
SELECT a, SUM(CASE WHEN b < 50 THEN 1 ELSE 0 END) AS bcnt
FROM test
GROUP BY a 
```

我知道这似乎是一件微不足道的小事，但我的问题是，在以下方面使用一种方法比另一种方法有什么优势（尽管如此微不足道）：性能？......他们会在多少其他 DBMS 中工作?... 陈述的清晰性？... 等等。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-05T10:09:19.797

> 表现？

哦，我敢肯定，差异（如果有的话）将是微不足道的。这对我来说没什么好担心的。

> 他们将在多少个其他 DBMS 中工作？

我毫不怀疑两者至少可以在任何*主要*的SQL 产品中工作，所以，再一次，这不会是一个问题，反正对我来说也不是问题。

> 表述清晰？

当然`COUNT`更清楚地表达了您想要*计算*事物，而不是*添加*一些任意值。使用，只有在略过条件后`SUM`到达该部分时，您才会意识到实际意图。`THEN 1`

另外，如果我使用，`COUNT`我可以省略该`ELSE NULL`部分，因为这是不存在时所暗示的内容`ELSE`。`ELSE 0`如果我在`SUM`表达式中省略，我可能会得到一个`NULL`结果而不是可能预期的`0`.

另一方面，*可能*存在完全相反的情况，返回`NULL`而不是`0`计数结果会更方便。因此，如果我使用`COUNT`，我将不得不做类似的事情`NULLIF(COUNT(CASE ...), 0)`，而使用`SUM(CASE ...)`它就足以省略该`ELSE`子句。但即使在那种情况下，我可能仍然更喜欢稍微更长的清晰度而不是稍微模糊的简洁（其他条件相同）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T08:41:44.643

就个人而言，我会使用

```
select a, count(b)
  from test
 where b < 50
 group by a 
```

清晰，简洁，根据这个[SQL fiddle](http://sqlfiddle.com/#!4/3004f/5)比其他的要快一点（根据执行计划需要更少的数据，尽管使用这么小的表你不会注意到差异）：

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T08:36:08.480

where 子句有什么问题：

```
select a, count(b)
from test
where b < 50
group by a 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-05T08:31:45.317

使用 COUNT，您可以计算元素，使用 SUM 可以添加数字（正数、负数或零）以获得可能为负数的结果。

# sql - OpenJPA 持久性异常：获取大小不允许负值

> ID：11340544
> 
> 赞同：2
> 
> 时间：2012-07-05T08:28:30.617
> 
> 标签：sql, websphere, jpa-2.0, datasource, openjpa

我在 WebSphere Application Server 8 上使用 OpenJPA 2.1.2。首先我使用：

```
<property name="openjpa.ConnectionUserName" value="xxx" />
<property name="openjpa.ConnectionPassword" value="yyyy" /> 
<property name="openjpa.ConnectionURL" value="zzz"> 
```

在持久性 XML 中定义我的数据库连接。

现在我更改了它并使用了我在 WebSphere Applicaiton Server 管理控制台中定义的数据源。

我删除了那些属性标签并添加了

```
<jta-data-source>java:comp/env/jdbc/name/mysql</jta-data-source> 
```

但是现在，当我进行查询时，我得到以下 JPA 异常：

```
 <openjpa-2.1.2-SNAPSHOT-r422266:1227818 fatal general error> org.apache.openjpa.persistence.PersistenceException: DSRA9500E: Negative values are not allowed for fetch size.
FailedObject: SELECT u FROM user_table u WHERE lower(u.username) = lower(:name) [java.lang.String]
        at org.apache.openjpa.jdbc.sql.DBDictionary.narrow(DBDictionary.java:4878)
        at org.apache.openjpa.jdbc.sql.DBDictionary.newStoreException(DBDictionary.java:4838)
        at org.apache.openjpa.jdbc.sql.SQLExceptions.getStore(SQLExceptions.java:136)
        at org.apache.openjpa.jdbc.sql.SQLExceptions.getStore(SQLExceptions.java:118)
        at org.apache.openjpa.jdbc.sql.SQLExceptions.getStore(SQLExceptions.java:70)
        at org.apache.openjpa.jdbc.kernel.SelectResultObjectProvider.handleCheckedException(SelectResultObjectProvider.java:155)
        at org.apache.openjpa.datacache.QueryCacheStoreQuery$CachingResultObjectProvider.handleCheckedException(QueryCacheStoreQuery.java:701)
        at org.apache.openjpa.lib.rop.WindowResultList.<init>(WindowResultList.java:64)
        at org.apache.openjpa.jdbc.kernel.JDBCFetchConfigurationImpl.newResultList(JDBCFetchConfigurationImpl.java:292)
        at org.apache.openjpa.kernel.QueryImpl.toResult(QueryImpl.java:1251)
        at org.apache.openjpa.kernel.QueryImpl.execute(QueryImpl.java:1007)
        at org.apache.openjpa.kernel.QueryImpl.execute(QueryImpl.java:863)
        at org.apache.openjpa.kernel.QueryImpl.execute(QueryImpl.java:794)
        at org.apache.openjpa.kernel.DelegatingQuery.execute(DelegatingQuery.java:542)
        at org.apache.openjpa.persistence.QueryImpl.execute(QueryImpl.java:315)
        at org.apache.openjpa.persistence.QueryImpl.getResultList(QueryImpl.java:331)
        at gui.jpa.service.JPAQueries.getUser(JPAQueries.java:196)
        at security.ContentAuthorisation.authorisedForAcess(ContentAuthorisation.java:10)
        at web.app.auth.RequestFilter.doFilter(RequestFilter.java:31)
        at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:192)
        at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:89)
        at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:926)
        at com.ibm.ws.webcontainer.filter.WebAppFilterManager.invokeFilters(WebAppFilterManager.java:1023)
        at com.ibm.ws.webcontainer.webapp.WebApp.handleRequest(WebApp.java:3703)
        at com.ibm.ws.webcontainer.webapp.WebGroup.handleRequest(WebGroup.java:304)
        at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:962)
        at com.ibm.ws.webcontainer.WSWebContainer.handleRequest(WSWebContainer.java:1662)
        at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:195)
        at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:452)
        at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewRequest(HttpInboundLink.java:511)
        at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.processRequest(HttpInboundLink.java:305)
        at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.ready(HttpInboundLink.java:276)
        at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.sendToDiscriminators(NewConnectionInitialReadCallback.java:214)
        at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.complete(NewConnecti        at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.complete(NewConnecti
onInitialReadCallback.java:113)
        at com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165)
        at com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217)
        at com.ibm.io.async.AsyncChannelFuture$1.run(AsyncChannelFuture.java:205)
        at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1659)
Caused by: java.sql.SQLDataException: DSRA9500E: Negative values are not allowed for fetch size.
        at com.ibm.ws.rsadapter.jdbc.WSJdbcStatement.setFetchSize(WSJdbcStatement.java:1935)
        at org.apache.openjpa.lib.jdbc.DelegatingPreparedStatement.setFetchSize(DelegatingPreparedStatement.java:242)
        at org.apache.openjpa.lib.jdbc.DelegatingPreparedStatement.setFetchSize(DelegatingPreparedStatement.java:242)
        at org.apache.openjpa.jdbc.sql.SQLBuffer.prepareStatement(SQLBuffer.java:568)
        at org.apache.openjpa.jdbc.sql.SelectImpl.prepareStatement(SelectImpl.java:481)
        at org.apache.openjpa.jdbc.sql.SelectImpl.execute(SelectImpl.java:418)
        at com.ibm.ws.persistence.jdbc.sql.SelectImpl.execute(SelectImpl.java:89)
        at org.apache.openjpa.jdbc.sql.SelectImpl.execute(SelectImpl.java:391)
        at org.apache.openjpa.jdbc.sql.LogicalUnion$UnionSelect.execute(LogicalUnion.java:427)
        at org.apache.openjpa.jdbc.sql.LogicalUnion.execute(LogicalUnion.java:230)
        at org.apache.openjpa.jdbc.sql.LogicalUnion.execute(LogicalUnion.java:220)
        at org.apache.openjpa.jdbc.kernel.SelectResultObjectProvider.open(SelectResultObjectProvider.java:94)
        at org.apache.openjpa.datacache.QueryCacheStoreQuery$CachingResultObjectProvider.open(QueryCacheStoreQuery.java:644)
        at org.apache.openjpa.lib.rop.WindowResultList.<init>(WindowResultList.java:57)
        ... 32 more 
```

为什么我会得到这个异常？

最好的问候， 投票

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T18:08:25.993

尝试将正确的[openjpa.DBDictionary 属性](http://openjpa.apache.org/builds/latest/docs/docbook/manual.html#ref_guide_dbsetup_dbsupport)添加到您的 persistence.xml 文件中。

我怀疑以前当您指定 openjpa.ConnectionURL 时，JPA 会使用该 URL 来确定您使用的数据库类型。在 SystemOut.log 中搜索前缀为 CWWJP... 的消息，其中提到不知道正在使用什么类型的数据库。

# python - 无法从 python os.path.abspath 获取有效的路径名

> ID：11340546
> 
> 赞同：2
> 
> 时间：2012-07-05T08:28:39.840
> 
> 标签：python, windows, path

我有以下包含文件绝对目录的字符串。

```
'D:\Sample\Project\testXcl\data.xlsx' 
```

将其传递给 os.path.abspath 后，我得到以下结果：

```
'D:\\Sample\\Project\testXcl\\data.xlsx' 
```

发生这种情况是因为 TestXcl 文件夹名称被读取为 \t。如果任何文件/文件夹名称以 n、a、b、f、r、v、x 开头，也会出现错误的路径/错误。

有没有其他方法可以纠正这个问题，或者我应该用正确的文件分隔符替换字符串？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T08:30:38.257

当您指定路径名时，请转义反斜杠或使用[原始字符串文字](http://docs.python.org/reference/lexical_analysis.html#string-literals)：

```
p = 'D:\\Sample\\Project\\testXcl\\data.xlsx'
p = r'D:\Sample\Project\testXcl\data.xlsx' 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-05T08:30:29.523

请改用原始字符串文字。

```
filename = r'D:\Sample\Project\testXcl\data.xlsx' 
```

# c# - 为什么单击 ZedGraph 时我的图表上会出现垂直线？

> ID：11340548
> 
> 赞同：2
> 
> 时间：2012-07-05T08:28:50.607
> 
> 标签：c#, zedgraph

我的`ZedGraph`WinForm 中有一个带有`zedGraphControl1_MouseClick`事件的控件。当我单击一个点时`FindNearestPoint`，我的窗格会找到该点并在我的`DataGridView`.
现在，当我单击一些点时，会发生这种情况：

![在此处输入图像描述](../Images/8f1869819148570dc075d29ac4af69a7.png)

为什么这些线不会消失？我所做的只是单击它一次，就像我想缩放...
其他人有这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T07:02:57.337

我通过禁用垂直和水平缩放来解决它。像那样没有线条也没有更多......

# wpf - WPF 简单数据绑定

> ID：11340556
> 
> 赞同：0
> 
> 时间：2012-07-05T08:29:23.323
> 
> 标签：wpf, xaml, data-binding

我想绑定文本框但它不显示字符串。第二件事是我想定期更新名称字符串。有什么解决办法吗？

这是我的 C# 代码：

```
public partial class Window1 : Window
{
  public String Name = "text";
} 
```

xml代码：

```
<Grid Name="myGrid" Height="300">
  <TextBox Text="{Binding Path=Name}"/>
</Grid> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T08:45:57.380

```
public partial class MainWindow : Window,INotifyPropertyChanged
{
    public MainWindow()
    {
        InitializeComponent();
        DataContext = this;
    }
    private string _name;
    public string Name
    {
        get
        {
            return _name;
        }
        set
        {
            _name = value;
            NotifyCahnge("Name");

        }

    }

    private void NotifyChange(string prop)
    { 
        if(PropertyChanged!=null)
            PropertyChanged(this,new PropertyChangedEventArgs(prop));
    }

    public event PropertyChangedEventHandler PropertyChanged;
} 
```

希望这会有所帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T08:35:45.443

您需要删除属性而不是字段，您在这里删除的是一个字段。

```
public String Name {get; set;} 
```

另外，它不应该在控制文件（UI 文件）中。将其移动到单独的类并将其设置为 DataContext。

PLus 正如 Vlad 指出的那样，您需要通知 UI 事情发生了变化，简单的属性没有。

[关于dataBinding](http://www.codeproject.com/Articles/26210/Moving-Toward-WPF-Data-Binding-One-Step-at-a-Time)的好文章：

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T08:33:47.693

您需要将您的定义`Name`为`DependencyProperty`：

```
public string Name
{
    get { return (string)GetValue(NameProperty); }
    set { SetValue(NameProperty, value); }
}

public static readonly DependencyProperty NameProperty = 
    DependencyProperty.Register("Name", typeof(string), typeof(Window1)); 
```

（请注意，Visual Studio 为此定义了一个方便的代码段`propdp`，请尝试键入`propdp`++ 。`TAB`）`TAB`

然后，您需要正确绑定。像这样的东西：

```
<TextBox Text="{Binding Name, RelativeSource={RelativeSource FindAncestor, AncestorType=Window}}"/> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-05T08:37:14.103

WPF 绑定使用**属性**，而不是字段。您需要定义`Name`为属性，并设置 Window 的数据上下文：

```
public partial class Window1 : Window
{
  public String Name { get; set; }

  public Window1()
  {
      Name = "text";
      DataContext = this;

      InitializeComponent();
  }
} 
```

如果您想支持更改通知和其他与 DP 相关的功能或使用`INotifyPropertyChanged`. [我建议您在此处](http://msdn.microsoft.com/en-us/library/ms750612.aspx)阅读有关 WPF 数据绑定的更多信息。

# preg-replace - preg 仅替换括号之间的数字

> ID：11340560
> 
> 赞同：0
> 
> 时间：2012-07-05T08:29:43.127
> 
> 标签：preg-replace

我需要替换括号之间的数字。例如

```
(1) should be (<a href="1">1</a>) --> I could do this
(1,2,5,8) should be (<a href="1">1</a>,<a href="2">2</a>,<a href="5">5</a>,<a href="8">8</a>)
(2-5, 13) should be (<a href="2">2</a>-<a href="5">5</a>,<a href="13">13</a>) 
```

我无法进行最后两次转换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T08:51:59.753

```
<?php
//Config
$pattern='/\((\d|\s|,|\d+-\d+)+\)/';
$replacement='<a href="$0">$0</a>';
$subject='foo 1 bar (baz) (1) whatever (2,3,4) something (7-9,11) more';

//Callback
$callbackbody="return preg_replace('/\d+/','$replacement',\$matches[0]);";
$callback=create_function('$matches',$callbackbody);

//main
echo preg_replace_callback($pattern, $callback, $subject);
?> 
```

# cakephp - CakePHP 2.1 使用 DBMS 函数时查找命令的奇怪答案格式

> ID：11340562
> 
> 赞同：1
> 
> 时间：2012-07-05T08:29:45.377
> 
> 标签：cakephp, find, cakephp-2.1

我有以下搜索查询（需要有年/月和帖子的标签，以便在添加评论后进行正确的重定向）。

```
$settingsForPostQuery = array(
            'fields' => array(
                'Post.slug',
                'YEAR(Post.date_published) as year',
                'MONTH(Post.date_published) as month'
            ),
            'conditions' => array('Post.id' => $this -> request -> params['post_id'])
        );
// unbind post model to fetch only necessary stuff
$this -> Comment -> Post -> unbindModel(array(
            'hasMany' => array('Comment'),
            'hasAndBelongsToMany' => array('Tag'),
            'belongsTo' => array('Category')
));

$post = $this -> Comment -> Post -> find('published', $settingsForPostQuery); 
```

这就是我得到的`Debugger::dump($post);`：

```
array(
(int) 0 => array(
    'Post' => array(
        'slug' => 'this-is-a-second-test-post-in-the-category-internet'
    ),
    (int) 0 => array(
        'year' => '2012',
        'month' => '6'
    )
)
) 
```

不是更合乎逻辑吗：

```
array(
(int) 0 => array(
    'Post' => array(
        'slug' => 'this-is-a-second-test-post-in-the-category-internet',
        'year' => '2012',
        'month' => '6'
     )      
  )
) 
```

如果您需要信息，“已发布”是自定义查找类型，定义如下：

```
protected function _findPublished($state, $query, $results = array()) {
    if ($state === 'before') {
        $query['conditions']['Post.is_archived'] = false;
        $query['conditions'][] = 'Post.date_published <= now()';
        return $query;
    }
    return $results;
} 
```

**编辑**

我发现当只使用 Post.date_published 而不是 YEAR(Post.date_published) 时，Post.date_published 也会出现在 Post 数组中，就像 slug 一样。为什么使用 MYSQL 函数会改变这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T08:42:45.990

当您在查询中添加字段时，CakePHP 中会发生这种情况，我相信您可以使用正确的别名命名约定使它们成为主数据数组的一部分`MyModel__MyField`：

```
$settingsForPostQuery = array(
        'fields' => array(
            'Post.slug',
            'YEAR(Post.date_published) as Post__year',
            'MONTH(Post.date_published) as Post__month'
        ),
        'conditions' => array('Post.id' => $this -> request -> params['post_id'])
    ); 
```

[在这里阅读更多](http://book.cakephp.org/2.0/en/models/virtual-fields.html)。顺便说一句，您应该查看可[包含](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)以限制查询的模型而不是取消绑定它们:)

# c# - 是否可以将 T4 模板的扩展名从 .tt 更改为其他内容？

> ID：11340566
> 
> 赞同：1
> 
> 时间：2012-07-05T08:29:59.750
> 
> 标签：c#, .net, .net-4.0, t4

我想将 T4 模板的扩展名从 .tt 更改为其他内容。

它会起作用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T08:35:00.060

是的。你可以为它添加任何你喜欢的后缀。只要将 CustomTool 属性设置为`TextTemplatingFileGenerator`它仍然可以工作

# forms - Codeigniter 中的多个表单和表单验证

> ID：11340567
> 
> 赞同：0
> 
> 时间：2012-07-05T08:29:59.843
> 
> 标签：forms, validation, codeigniter

我在一个页面中有 2 个表单，它们是注册和登录表单，我为每个表单定义了一个名称，以便我可以单独发布它，但我怎么能只写 1 个 form_validation-run() ？

```
public function index()
{
    //load form_validation and session library
    $this->load->library(array('form_validation','session'));

    if ( $this->input->post('register') ) {

        $this->form_validation->set_rules('first_name', 'First name', 'required');
        $this->form_validation->set_rules('last_name', 'Last name', 'required');
        $this->form_validation->set_rules('email', 'Email', 'required|valid_email');
        $this->form_validation->set_rules('password', 'Password', 'required|min_length[6]');

        if ( $this->form_validation->run() !== FALSE ){
            // to create an account
        } else {
            $this->session->set_flashdata('msg', validation_errors('<div>','</div>'));
            redirect('/','location');
        }
    } elseif ( $this->input->post('login')) {

        $this->form_validation->set_rules('email', 'Email', 'required');
        $this->form_validation->set_rules('password', 'Password', 'required');

        if ( $this->form_validation->run() !== FALSE ) {
            // to get login

        } else {
            $this->session->set_flashdata('msg', validation_errors('<div>','</div>'));
            redirect('/','location');
        }
     }

    $this->load->view('templates/header');
    $this->load->view('pages/index');
    $this->load->view('templates/footer');
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T08:37:36.317

从逻辑上讲，当您在按钮值上进行分支时，您需要使用代码调用它两次。

也就是说，为了整洁，您可以将它们发送到单独的操作（目前您几乎正在这样做）。登录表单到 /users/login，然后注册表单到 /users/create 或 /users/save

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T18:09:40.587

现在，您对两个表单使用相同的验证对象。您需要做的就是制作 2 个具有不同名称的独立对象，它们的行为将彼此独立。

```
// The empty array is there because 2nd param is for passing data
$this->load->library('form_validation', array(), 'login_form');
$this->login_form->set_rules('email', 'Email', 'required');
$this->login_form->set_rules('password', 'Password', 'required');
if ($this->login_form->run()){
  // Process the form
} 
```

对注册表做同样的事情，只是给它一个不同的名字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-13T13:53:16.480

我在使用具有多个表单的 CI Validation 类时遇到了很多困难（即同一页面中的登录表单和订阅表单），但我找到了解决方案......希望它会有所帮助。:coolsmile:

此处如何进行：在定义验证规则之前，测试已发布的提交按钮或其他隐藏输入，这些输入可以定义已发布到控制器的表单。然后，您可以根据可以发布的每个表单定义验证规则。

按照这个 - [https://github.com/EllisLab/CodeIgniter/wiki/Validation-and-multiple-forms](https://github.com/EllisLab/CodeIgniter/wiki/Validation-and-multiple-forms)

# actionscript-3 - 由于 TweenEvent 无法编译

> ID：11340568
> 
> 赞同：0
> 
> 时间：2012-07-05T08:30:00.483
> 
> 标签：actionscript-3, flashdevelop

一点背景故事：我在大学时接手了一个 AS3 项目，原来的团队中没有人离开/联系到。最初有人告诉我我只需要 FlashDevelop。我还不必更改代码，只需编译它。我很擅长用 eclipse 进行 java 编程，但是 AS3 和 Flashdevelop 对我来说是新的。（当然，我在开始之前就读过了！）

我正在使用 FlashDevelop 4.0.1 和 Flex SDK 4.6.0。

当我第一次尝试编译它时，我得到了以下错误：

```
svn\trunk\src\com\hybrid\ui\ToolTip.as(381): col: 38 Error: Type was not found or was not a compile-time constant: TweenEvent. 
```

所以我在 Internet 上进行了研究，得出的结论是 TweenEvent 甚至不是 Flex SDK 4.6.0 的一部分，但我需要 Adob​​e CS Flash。Config.xml 的外观支持这一点。这两行添加到项目路径中。

```
<path-element>C:\Program Files (x86)\Adobe\Adobe Flash CS3\de\Configuration\Component Source\ActionScript 3.0\User Interface</path-element> 
<path-element>C:\Program Files (x86)\Adobe\Adobe Flash CS4\Common\Configuration\ActionScript 3.0\projects\Flash\src</path-element> 
```

所以我订购了 Flash 并获得了 Adob​​e Flash CS6。现在事情开始变得没有意义了。我添加了下面的行，我认为这与上面的行之一是适当的。（审查名称）

```
path-element>C:\Dokumente und Einstellungen\***\Adobe\Adobe Flash CS6\Common\Configuration\ActionScript 3.0</path-element> 
```

错误更改为：

```
C:\Dokumente und Einstellungen\***\Desktop\HiWi\iml-as3-svn-110718-11-04\svn\trunk\src\IML.mxml(106): Error: Could not resolve <ns1:ULog> to a component implementation. 
```

然后我尝试添加我找不到完全匹配的第二行，所以我尝试添加

```
<path-element>C:\Dokumente und Einstellungen\***\Adobe\Adobe Flash CS6\de_DE\Configuration\ActionScript 3.0</path-element> 
```

这样做我得到了确切的第一个错误。

```
svn\trunk\src\com\hybrid\ui\ToolTip.as(381): col: 38 Error: Type was not found or was not a compile-time constant: TweenEvent. 
```

所以现在我完全不知所措，我不知道我哪里出错了，所以真的会得到一些帮助。请告诉我您是否需要查看代码，或者我是否在某个地方完全出错了。我知道这是一个非常具体的问题，但我希望有更多专业知识的人能看到我没有看到的东西。我今天和明天几乎整天都在这里，所以如果我得到一些答案，我会立即尝试。先感谢您！

编辑：似乎只有一个班级使用这个（除非我忽略了一些东西）。导入语句是：

```
import fl.transitions.Tween;    
import fl.transitions.easing.*;
import fl.transitions.TweenEvent; 
```

那么，这是否意味着我需要这些文件？但是不应该在上面添加路径来解决这个问题吗？

我不想发布整个课程，因为它相当长，所以这里所有使用 Tweens 的内容。现在看来，这似乎并没有那么多。

```
private var _tween:Tween;

/* Fade In / Out */

    private function animate( show:Boolean ):void {
        var end:int = show == true ? 1 : 0;
        // added : DR : 04.29.2010
        if( _tween != null && _tween.isPlaying ) {
            _tween.stop();
        }
        // end add
        _tween = new Tween( this, "alpha", Strong.easeOut, this.alpha, end, .5, true );
        if( ! show ){
            _tween.addEventListener( TweenEvent.MOTION_FINISH, onComplete );
            _timer.reset();
        }
    }

    private function onComplete( event:TweenEvent ):void {
        event.currentTarget.removeEventListener(event.type, arguments.callee);
        this.cleanUp();
    }

    /* End Fade */ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T08:30:54.830

如果您使用的是 Flash Develop，我会[从 Greensock 下载 TweenMax](http://www.greensock.com/tweenmax/)的 AS3 包。在生成的 zip 中，您将找到源代码、示例和预编译的 swc。

您可以直接引用项目中的 swc 或`com`文件夹中的类，这取决于您。

TweenMax 可以做任何`fl.transitions.Tween`类可以做的事情，甚至更多。在[Greensock 网站](http://www.greensock.com/tweenmax/)上，有很多说明告诉您每个属性的作用，并且页面中还有一个非常酷的动画浏览器，因此您可以看到它会做什么，它还会向您显示生成的代码。

![在此处输入图像描述](../Images/b36ff9c3be189797b77f0f5da8dbc744.png)

就像这样做一样简单：

```
import com.greensock.*;

// this will tween `mc` from whatever alpha it is now to 1.
TweenLite.to(mc, 1, {alpha:1}); 
```

显然有许多属性和回调可以补间，所以我建议你去那里读一读。您上面的代码可以转换为使用 Tween max，我相信您将来会将它用于所有 Flash 动画。

# silverlight - 如何恢复原始 Deep Zoom 图像？

> ID：11340569
> 
> 赞同：1
> 
> 时间：2012-07-05T08:30:14.213
> 
> 标签：silverlight, jpeg, reverse, restore, deepzoom

实际上，我收藏了很多 Deep Zoom 格式的照片。我想将每个集合的每个图像恢复为原始大小的 JPEG，有没有办法执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T10:44:28.333

理论上是的，但实际上这可能很困难，因为没有具体的支持来做到这一点。

问题是所有图像都在不同分辨率的层中变成了正方形，原始图像的位置丢失了。转换为 DeepZoom 后，将一张巨大的图像有效。

为了做你想做的事，你实际上想要以最高分辨率迭代整个 Deep Zoom 图像，一次一行一行 - 在每个位置捕获渲染图像。

然而，没有明显的方法可以分离出制作它的原始图像（除非您的图片布局有固定的模式，例如布置固定大小的行和列）。

# jquery - 在颜色框中显示多个 div

> ID：11340570
> 
> 赞同：0
> 
> 时间：2012-07-05T08:30:16.723
> 
> 标签：jquery, colorbox

我正在尝试在颜色框中显示图片 div 和类似按钮 div。图片 div 和点赞按钮 div 都在其他页面中。我想将这些 div 放置在不同于 page 的颜色框中。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T08:37:27.027

```
$(document).ready(function(){
   $('#somebutton').click(function(){
            $.colorbox.init();
            $('#divwrapper').show();
            $(this).colorbox({

                        inline:true,
                        href:'#divwrapper',
                        onLoad:function(){ 
                          //do something if you want here
                        },
                        onClosed:function(){

                            $('#divwrapper').hide();
                            $.colorbox.remove();
                        }
                    });

   });
//html side

<div id="divwrapper" style="display:none;">
  <div>Your image here</div>
  <div>Your like button here</div>
</div>

}); 
```

# c++ - 如何计算 dmg 文件上的 MasterChecksum 和 DataForkChecksum

> ID：11340583
> 
> 赞同：0
> 
> 时间：2012-07-05T08:30:46.387
> 
> 标签：c++, macos, checksum, dmg

我尝试更改有关 dmg 文件的一些信息，效果很好，但是当我尝试打开 dmg 时出现错误消息

```
checksum invalid 
```

所以我得到了我的 dmg 文件的标题，我得到了我需要的所有信息。我有一个 DataForkChecksum 和一个 MasterChecksum 但我不知道如何计算它们。

有谁知道该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T13:42:22.353

主校验和是校验和的校验和。它被计算为在 DMG 中存在的 BLKX 块的所有校验和的级联二进制值上计算的 CRC-32 校验和（多项式=0xedb88320）。计算起来很痛苦。

libdmg 包含执行此操作的 GPL 代码。特别是看看[http://shanemcc.co.uk/libdmg/libdmg-hfsplus/dmg/dmglib.c中的 calculateMasterChecksum() 函数](http://shanemcc.co.uk/libdmg/libdmg-hfsplus/dmg/dmglib.c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T14:20:36.370

如果您对校验和不太了解，我建议您快速查看[Wikipedia](http://en.wikipedia.org/wiki/Checksum)条目。本质上，它们用于检查文件的完整性，以确保它没有被更改或受到任何干扰。我相信这在开源社区中尤其重要，因为上传到共享网站的代码可能会受到原始提供者以外的其他人的干扰。

[（还可以快速查看维基百科上的 MD5，读一读，您将很快体会到问题的难度和建议的解决方案。）](http://en.wikipedia.org/wiki/MD5)

通过包含校验和，提供者并不能保证代码的质量（他们可能会单独做），但他们让您能够确保您下载的内容正是他们提供的内容。更改单个字节将更改校验和。

在您的情况下，通过修改 DMG，您正在更改校验和。在不知道具体细节的情况下，很难建议您如何绕过它。如果您的设置以某种方式与原始 DMG 提供商通信以比较校验和，那么修复将非常困难。您也无法知道它们的校验和是什么。

如果将其与本地存储的文件进行比较，那么您有机会。最简单的方法是获取用于创建校验和的免费工具之一并将它们都替换掉。

然而，这一切都带来了一个问题。为什么要修改外部提供的 DMG？如果您希望您的计算机在单击它时执行其他操作，我相信有更简单的方法

# iphone - 在Objective C中将十六进制转换为base64？

> ID：11340587
> 
> 赞同：2
> 
> 时间：2012-07-05T08:30:58.733
> 
> 标签：iphone, objective-c, ios, xcode, sha256

我使用以下函数创建了字符串的 SHA256 编码，

```
const char *s=[@"123456" cStringUsingEncoding:NSASCIIStringEncoding];
    NSData *keyData=[NSData dataWithBytes:s length:strlen(s)];

    uint8_t digest[CC_SHA256_DIGEST_LENGTH]={0};
    CC_SHA256(keyData.bytes, keyData.length, digest);
    NSData *out=[NSData dataWithBytes:digest length:CC_SHA256_DIGEST_LENGTH];
    NSString *hash=[out description];
    hash = [hash stringByReplacingOccurrencesOfString:@" " withString:@""];
    hash = [hash stringByReplacingOccurrencesOfString:@"<" withString:@""];
    hash = [hash stringByReplacingOccurrencesOfString:@">" withString:@""];

    NSLog(@"Hash : %@", hash); 
```

它给了我输出：8d969eef6ecad3c29a3a629280e686cf0c3f5d5a86aff3ca12020c923adc6c92。但我需要以下输出：jZae727K08KaOmKSgOaGzww/XVqGr/PKEgIMkjrcbJI=。它是base64。

如何将生成的“hex”哈希转换为“base64”？

我曾使用此网站生成 base64 哈希：[http ://www.online-convert.com/result/7bd4c809756b3c16cf9d1939b1e57584](http://www.online-convert.com/result/7bd4c809756b3c16cf9d1939b1e57584)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T09:35:42.210

您不应该`NSString *hash`将从描述生成的转换为 base-64。它是一个十六进制字符串，而不是实际的数据字节。

您应该`NSData *out`使用任何可用的 base-64 编码器直接从 base-64 字符串。例如，您可以从[这篇文章](http://cocoawithlove.com/2009/06/base64-encoding-options-on-mac-and.html)中下载一个实现，并按如下方式使用它：

```
const char *s=[@"123456" cStringUsingEncoding:NSASCIIStringEncoding];
NSData *keyData=[NSData dataWithBytes:s length:strlen(s)];

uint8_t digest[CC_SHA256_DIGEST_LENGTH]={0};
CC_SHA256(keyData.bytes, keyData.length, digest);
NSData *out=[NSData dataWithBytes:digest length:CC_SHA256_DIGEST_LENGTH];
// The method below is added in the NSData+Base64 category from the download
NSString *base64 =[out base64EncodedString]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T10:42:41.163

我使用这个，（在[我如何在 iphone-sdk 上进行 base64 编码中提到？](https://stackoverflow.com/questions/392464/any-base64-library-on-iphone-sdk)）

[http://www.imthi.com/blog/programming/iphone-sdk-base64-encode-decode.php](http://www.imthi.com/blog/programming/iphone-sdk-base64-encode-decode.php)

效果很好，并且很容易与 ARC 一起使用。

# openerp - 根据几个标准限制对产品的访问

> ID：11340592
> 
> 赞同：2
> 
> 时间：2012-07-05T08:31:13.213
> 
> 标签：openerp

目标：向所有有权访问购买模块的用户展示所有产品。但是**，除了**上述规则之外，仅向创建相同产品的用户显示在参考字段中具有值 'secfab' 的产品。

问题：我尝试使用访问记录，但构建它的逻辑很弱，我需要帮助。

案例一：[('default_code','!=','secfab'),('created_id','=',user.id)]

如果我对此进行编码，那么我只会得到一条记录，而不会显示其他记录。

案例2：['|',('default_code','!=','secfab'),('created_id','=',user.id)]

如果我对此进行编码，那么我只会记录所有记录，而我无法获得我想要的隐私。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T09:27:42.750

您的第二种情况似乎是正确的，除了过滤创建者的子句看起来拼写错误。此错字可能会导致规则匹配所有记录，因为`created_id`无法验证不存在字段的条件。不应该是：

```
['|', ('default_code', '!=', 'secfab'), ('create_uid', '=', user.id)] 
```

转换为“*显示所有没有`secfab`代码的产品，以及用户创建的所有产品，无论他们的代码如何*”，并且似乎做了你想要的？

`create_uid`是系统自动添加到所有已`_log_access`设置为的模型的 4 个字段之一`True`，这是默认值。这在[OpenERP 技术备忘录](http://doc.openerp.com/memento/)和[特殊领域文档](http://doc.openerp.com/v6.1/developer/03_modules_2.html#predefined-fields)中有解释。

# google-maps - Chromium 如何在开启 VPN 的情况下检测我的位置？

> ID：11340593
> 
> 赞同：2
> 
> 时间：2012-07-05T08:31:16.400
> 
> 标签：google-maps, google-chrome, location, chromium, geoip

我有一个 VPN，没有程序应该有直接的非 VPN 网络访问。在谷歌地图上，我说“显示我的位置”，它会从 html5 地理定位 API 获取我的确切位置。Chromium 如何知道我的位置？

# ios - 关闭深度链接后，用户被重定向到 ios 应用程序

> ID：11340598
> 
> 赞同：0
> 
> 时间：2012-07-05T08:31:30.613
> 
> 标签：ios, facebook, facebook-page, facebook-ios-sdk

我们的应用程序关闭了深层链接

![深层链接已关闭](../Images/fd301693967588d06a35b70d741df778.png)

但是，当 ios 用户单击我们在 Facebook 页面上发布的链接到我们的页面应用程序 ( [https://apps.facebook.com/nakedwines/](https://apps.facebook.com/nakedwines/) ) 时，他们将被重定向到 ios 应用程序而不是我们的竞赛页面。

如果 ios 用户手动将链接输入到他们的浏览器中，这是可行的。

这是一个错误还是有什么设置不正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T09:00:51.740

您的问题是，当移动用户尝试访问您的应用时，他们会被带到应用商店（未安装应用时）？这是预期的，如果安装了应用程序，它将直接打开。

如果您没有 IOS 应用程序，请从应用程序设置中删除 IOS 详细信息，它们将被带到您的移动 Web URL。

深度链接设置允许从您的应用程序中点击帖子的用户被带入具有足够上下文的应用程序，以允许您的应用程序显示特定的内容。即，指向您应用内容的链接通过完整的 URL 传递到本机应用，您的应用可以直接打开该内容。

例如，在 iOS 上单击指向一首 Spotify 歌曲的链接会打开 Spotify 应用程序并播放该歌曲，如果没有深度链接，它只会在没有上下文的情况下打开 Spotify。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T10:37:42.430

我最终为比赛页面创建了一个全新的 Facebook 应用程序。这解决了所有问题。如果您在同一个应用程序下同时拥有页面应用程序和 ios/android 应用程序，Facebook 似乎无法正常运行。

# android - 一次启动多个 Android 模拟器

> ID：11340601
> 
> 赞同：5
> 
> 时间：2012-07-05T08:32:06.713
> 
> 标签：android, android-emulator

在我将 ADT/Tools 更新到 20 后，我无法一次启动两个模拟器。

它工作过一次。但我不记得我当时做了什么。

我多次尝试重新启动系统。

我不知道如何在模拟器中找到问题所在。

模拟器显示在 TaskManager 进程中，但不在屏幕上。

**编辑**：

报告为错误[http://code.google.com/p/android/issues/detail?id=34221&sort=-id&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars](http://code.google.com/p/android/issues/detail?id=34221&sort=-id&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T16:01:53.240

看起来此错误已在最新版本的 SDK 工具修订版 20.0.1 中修复。

从[修订历史](http://developer.android.com/tools/sdk/tools-notes.html)：

> 修复了运行多个模拟器和运行多个具有 GPU 加速的模拟器的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T04:49:37.190

您应该使用不同的 AVD 管理器来运行多个模拟器。

# c# - 比较 SortedDictionary 的键类型

> ID：11340613
> 
> 赞同：1
> 
> 时间：2012-07-05T08:33:32.780
> 
> 标签：c#, types, dictionary, comparator

我想为 a 编写一个自定义比较器`SortedDictionary`，其中键根据它们的类型进行排序。这可能吗？

```
public class StateBase
{
    // This is a base class I have to inherit from
}

SortedDictionary<StateBase, int> _stateDictionary =
    new SortedDictionary<StateBase, int>(new StateComparer());

class StateComparer : IComparer<StateBase>
{
    public int Compare(StateBase a, StateBase b)
    {
        // I'd like to sort these based on their type
        // I don't particularly care what order they are in, I just want them
        // to be sorted.
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T08:44:47.310

当然，为什么不呢？请注意，我们必须谈论要应用的引用类型，例如：

```
public class TypeComparer<T> : IComparer<T>, IEqualityComparer<T> where T : class
{
    public static readonly TypeComparer<T> Singleton= new TypeComparer<T>();
    private TypeComparer(){}
    bool IEqualityComparer<T>.Equals(T x, T y)
    {
        if (ReferenceEquals(x, y)) return true;
        if (x == null || y == null) return false;
        Type xType = x.GetType(), yType = y.GetType();
        return xType == yType && EqualityComparer<T>.Default.Equals(x, y);
    }
    int IEqualityComparer<T>.GetHashCode(T x)
    {
        if (x == null) return 0;
        return -17*x.GetType().GetHashCode() + x.GetHashCode();
    }
    int IComparer<T>.Compare(T x, T y)
    {
        if(x==null) return y == null ? 0 : -1;
        if (y == null) return 1;

        Type xType = x.GetType(), yType = y.GetType();
        int delta = xType == yType ? 0 : string.Compare(
               xType.FullName, yType.FullName);
        if (delta == 0) delta = Comparer<T>.Default.Compare(x, y);
        return delta;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T08:39:22.463

你可以。如果您的比较器实现[`IComparer<T>`](http://msdn.microsoft.com/en-us/library/8ehhxeaf.aspx)，它可以通过`SortedDictionary`相应的[构造函数重载](http://msdn.microsoft.com/en-us/library/a045f865.aspx)传递给一个新实例。

然后该`Compare`方法以某种方式决定哪个项目更大或更低。这是您可以实现按类型比较逻辑的地方。

`Type`这是一个根据名称比较实例的示例：

```
public class TypeComparer : IComparer<Type>
{
    public int Compare(Type x, Type y)
    {
        if(x != null && y != null)
            return x.FullName.CompareTo(y.FullName);
        else if(x != null)
            return x.FullName.CompareTo(null);
        else if(y != null)
            return y.FullName.CompareTo(null);
        else
            return 0;
    }
} 
```

# mysql - mysql突然开始定期打开不成功的sockets

> ID：11340618
> 
> 赞同：1
> 
> 时间：2012-07-05T08:33:50.907
> 
> 标签：mysql, sockets, resource-leak

我拼命想弄清楚这里发生了什么，但在任何地方都没有看到这个特殊问题。我已经“继承”了数据库服务器（远程，在数据仓库中，由 ssh 访问）的管理（如在其中，不是我自己构建的），其中一些 php 守护程序在充当数据爬虫的 Linux 服务器上运行，插入并将相对稳定的信息处理到mysql中。

几天前，服务器崩溃并重新启动。我登录并重新启动了 mysql 服务器和爬虫，不再考虑它。一天半后，mysql服务器停止工作，我无法诊断它，因为我无法登录它，也没有响应“/etc/init.d/mysql stop”或其变体。根据日志文件，它经常抛出错误（每 4 分 16 秒一次），并说它打开的文件处理程序太多。然而，当我关闭爬虫时，我可以再次登录，但 mysql 不断抛出错误。我检查了 lsof，它显示了很多带有“无法识别协议”错误的打开套接字。

> mysqld 28843 mysql 1990u sock 0,4 2856488 无法识别协议
> 
> mysqld 28843 mysql 1989u sock 0,4 2857220 无法识别协议

^成千上万的这些行

还以为是爬虫干的事情，重启了mysql，失败的socket就消失了。但是我很惊讶地看到 mysql 不断打开新的，即使爬虫没有运行。它非常有规律地这样做，每分钟大约有两个新的失败套接字，无论爬虫是否处于活动状态。我增加了允许 mysql 购买时间的最大文件处理程序数量，但我显然在寻找诊断和永久解决方案。

我在论坛上发现的此类错误（套接字泄漏）的所有描述似乎都是关于您自己的软件泄漏，而不是关闭其套接字。但这似乎是 mysql 本身在做这件事，并且从它工作正常时开始，任何代码都没有变化，只是服务器崩溃并重新启动。

有任何想法吗？

# iphone - 是否可以使用医疗材料编写我自己的应用程序？

> ID：11340619
> 
> 赞同：1
> 
> 时间：2012-07-05T08:33:56.150
> 
> 标签：iphone, ipad, medical

我目前正在医学实验室实习

他们想购买 Ipad 和与之相连的医疗设备

例如：糖尿病检测仪[http://www.ibgstar.us/](http://www.ibgstar.us/) 血压监测系统[http://www.ihealth99.com/](http://www.ihealth99.com/)

我想知道我是否可以编写自己的应用程序来从医疗设备获取数据然后处理它？

谢谢你的回答

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T08:37:32.960

简短的回答是`YES`。

有很多方法可以通过网络将数据输入应用程序。如果您想直接从设备中读取数据，则必须另外找到硬件解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T08:41:20.137

我认为他们是迈向成功的一步。

首先，您需要像“Mundi”这样的硬件解决方案。

您需要从设备中获取数据并将它们存储在可访问的地方（例如在具有在线访问权限的 BDD 中）。

然后 iPad 应用程序只需连接到数据源并使用它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T20:27:34.230

我不确定这是否适用，但我见过一些使用哈佛 SMART 项目编写的非常酷的医疗应​​用程序。它们提供了一个简单但有效的框架，独立于医院信息系统（如 Cerner、Epic、VistA）。

# jquery - Codeigniter 添加到收藏夹 ajax 逻辑建议

> ID：11340631
> 
> 赞同：0
> 
> 时间：2012-07-05T08:34:58.203
> 
> 标签：jquery, ajax, codeigniter

我有一个我真的无法解决的问题。

我正在制作一个用于保存到收藏夹功能的ajax insiter，它工作正常。

但是由于它没有使用一种形式，所以我在逻辑上有点迷失了。

我想做的是当用户单击按钮时，它会变为黄色并保持黄色，如果用户再次单击它会从收藏夹中删除并变回蓝色。

我不希望任何人为我写这个我只需要一些关于逻辑的提示或建议。

这是我的代码

jQuery

```
//save to favorites
$('.favorite').on('click', function(e){
    e.preventDefault();
    var data = [],
    newclass = 'btn-warning',
    oldcalss = 'btn-primary',
    fav = $(this);
    favId = fav.attr('id'),

    $.ajax({
        type: "POST",
        url: base_url + 'ajax/add_favorite/' + favId,
        success: function(result)
        {
            fav.removeClass(oldcalss)
            .addClass(newclass);    
        }
    });

}); 
```

模型

```
function insert_favorite($id)
{
    $favData = array(
        'job_id' => $id,
        'uid' => $this->session->userdata('user_id')
    );

    $this->db->insert('job_favorites', $favData);
} 
```

html

```
<?php if($this->ion_auth->logged_in()): ?>
 <a href="#" id="<?php echo $res->info_id; ?>" class="favorite btn btn-primary btn-mini" title="Add to favorite"><i class="icon-star icon-white"></i></a>
<?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T08:52:01.890

您需要检查作业 id 是否在数据库中并向 AJAX 函数返回一个值：

```
function insert_favorite($id)
{

    if (!is_numeric($id)) {
        exit;
    }

    $this->db->where('job_id', $id);
    $this->db->where('uid', $this->session->userdata('user_id'));
    $row = $this->db->get('job_favorites')->row();

    //There is a previous value
    if ($row) {
        $this->db->where('job_id', $row->id);
        $this->db->where('uid', $this->session->userdata('user_id'));           
        $this->db->delete('job_favorites');
        echo json_encode(array('result' => 'exists'));
    }
    else {
        $favData = array(
            'job_id' => $id,
            'uid' => $this->session->userdata('user_id')
         );

        $this->db->insert('job_favorites', $favData);
        echo json_encode(array('result' => 'new'));
    }
} 
```

在回调函数中根据结果变量改变按钮的颜色。

我建议将数据库调用和逻辑移动到模型中，并在控制器中留下尽可能少的逻辑。

# javascript - 验证复选框限制javascript

> ID：11340635
> 
> 赞同：0
> 
> 时间：2012-07-05T08:35:16.420
> 
> 标签：javascript, html, validation, checkbox

```
var cbx = document.getElementById('ModelFilter').getElementsByTagName('input');
var ArrCB_l=cbx.length;

while(ArrCB_l--){
    var CB=ArrCB[ArrCB_l];
    CB.checked()==True;
    return 1
}
return 0 
```

谁能告诉我这有什么问题？我知道第一行是正确的输入，因为我在其他地方将它用于相同的复选框，但这不起作用？我试图确保至少有一个复选框被选中。使用 onsubmit 事件调用此函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T08:37:08.963

.checked() 应该只是 .checked

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T08:52:53.880

```
while(ArrCB_1) {
    if(cbx[--ArrCB_1].checked) {
        return true;
    }
}
return false; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T08:38:41.993

```
while(ArrCB_l--){
    if (cbx[ArrCB_l].checked) {
       return true;
    }
}
return false; 
```

您的集合 is`cbx`和 not `ArrCB`，并且 checked 不是方法，而是元素的属性/属性

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T08:42:50.290

```
document.getElementById('ModelFilter').getElementsByTagName('input'); 
```

此代码返回所有输入（文本、按钮、收音机等）

采用

```
document.getElementById('ModelFilter').getElementsByTagName("input")[ArrCB_l].type == "checkbox" 
```

# html - 带有多个按钮的 Spring 表单验证器

> ID：11340640
> 
> 赞同：0
> 
> 时间：2012-07-05T08:35:35.943
> 
> 标签：html, forms, spring

我正在使用 Spring 3.0 开发一个项目。

我有一个带有几个提交按钮的表单。

我想做的是根据按下的按钮有不同的验证要求。

我该怎么做呢？一个例子会很棒。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T08:47:59.820

您可以有多个 Spring [Validator](http://static.springsource.org/spring/docs/2.5.6/api/org/springframework/validation/Validator.html)实现。并且根据单击的按钮，您可以从控制器调用所需验证器实现的验证方法。
这是使用 spring 验证器进行验证的[示例。](http://www.dzone.com/tutorials/java/spring/spring-form-validation-1.html)

# vb.net - 使用 Interop Excel.Application 从 excel 文件中读取“日期”

> ID：11340642
> 
> 赞同：3
> 
> 时间：2012-07-05T08:35:42.047
> 
> 标签：vb.net, interop, excel-interop

我正在使用互操作从 excel 文件中读取和获取信息，但是当我从我的 excel 文件中读取日期时，我遇到了一个问题。2012 年 2 月 5 日；它给出了 41060。

如何读取正确的日期值或为什么它返回 41060？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T15:29:41.027

您找到了答案，但一些背景可能会有所帮助。

Excel 将日期和时间保存为数字。如果用户在单元格中键入 31-May-2012，Excel 会将其识别为日期，因此将值存储为 41060 并将数字格式设置为“dd-mmm-yyyy”。如果用户在单元格中输入 41060 并将数字格式设置为“dd-mmm-yyyy”，则该值将显示为 31-May-2012。数据输入完成后，Excel 不会记录第一个 41060 作为日期输入，第二个作为数字输入。

在 PC 上，日期的整数部分是自 1900 年以来的天数（在 Mac 上使用 1904 年），小数部分是：

```
time in seconds
---------------
seconds in day 
```

所以 41060.25 代表：2012 年 5 月 31 日 6:00:00

当通过 Excel InterOp 读取数据时，我建议您`.NumberFormat`在`.Value`不知道数据类型的情况下进行操作。 `.Text`也可能有用；它给出了用户看到的价值。

警告：如果你得到`.NumberFormat`了，Excel 使用的格式与 VBA 的 Format() 和 VB.Net 的 Format() 使用的格式略有不同。

有关 Excel 日期的更多详细信息，请访问[如何在 Excel 中使用日期和时间。](http://support.microsoft.com/kb/214094)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T09:07:25.910

我发现它以双精度返回日期，因此 DateTime.FromOADate(41060) 将返回正确格式化的日期。

# c# - 如何在 C# 中使用 WebClient 下载文件并触发事件处理程序并支持超时属性？

> ID：11340645
> 
> 赞同：4
> 
> 时间：2012-07-05T08:35:47.547
> 
> 标签：c#, timeout, webclient, downloadfileasync

我正在开发一个 C# 项目来从 Internet 下载文件。

我会在下载过程中展示他们的进度。我应该支持超时属性。

我尝试使用**WebClient**类。有**DownloadFile** () 和**DownloadFileAsync** () 函数。

*   当我使用**DownloadFile** () 函数时，我可以设置 Timeout 属性，覆盖**GetWebRequest** () 函数。但是，我无法触发事件处理程序，因此无法显示进度。
*   当我使用**DownloadFileAsync** () 函数时，我可以触发事件处理程序，因此我可以显示进度。但是，在这种情况下，我无法设置超时。

从互联网上，我可以找到一些关于使用线程手动设置超时的方法的文章。

但是，我认为所有这些都是不正确的。他们在整个下载过程中设置超时。但是根据文件的大小，下载会很短或很长。

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T08:41:42.053

试着展示这个

[http://www.codeproject.com/Articles/35954/C-NET-Background-File-Downloader](http://www.codeproject.com/Articles/35954/C-NET-Background-File-Downloader)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T08:44:23.957

根据[HttpWebRequest 上的 MSDN 文档](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.begingetresponse.aspx)，您需要自己使用线程来实现。

> 在异步请求的情况下，客户端应用程序负责实现自己的超时机制。以下代码示例显示了如何执行此操作。

上面的链接实际上给出了如何做到这一点的完整示例，使用线程池和*ManualResetEvent*（示例大约 50-100 行代码）。

这是上述解决方案的症结所在，代码引用自 MSDN 示例。

1.  使用异步*BeginGetResponse*。

    IAsyncResult 结果= (IAsyncResult) myHttpWebRequest.BeginGetResponse(new AsyncCallback(RespCallback),myRequestState);

2.  使用*ThreadPool.RegisterWaitForSingleObject*来实现超时。

    ThreadPool.RegisterWaitForSingleObject (result.AsyncWaitHandle, new WaitOrTimerCallback(TimeoutCallback), myHttpWebRequest, DefaultTimeout, true);

3.  使用*ManualResetEvent*来保持主线程，直到请求完成或超时。

    公共静态 ManualResetEvent allDone = new ManualResetEvent(false); allDone.WaitOne();

# android - 设置 LayoutParams 的应用速度不够快

> ID：11340649
> 
> 赞同：0
> 
> 时间：2012-07-05T08:35:57.113
> 
> 标签：android, android-layout, xamarin.android

我目前有这个 UI 结构：

```
Activity (ACT)
  LinearLayout (LL)
    HorizontalScrollView (HSV)
      RelativeLayout (RL) 
```

当我设置 RL 的布局参数时，它们直到后来才被应用，那时为时已晚。

```
var TotalWidth = GetNewWidth() // eg returns 1000...

var lp = this.LayoutRoot.LayoutParameters;
lp.Width = TotalWidth;
this.LayoutRoot.LayoutParameters = lp;

// this.LayoutRoot.LayoutParameters.Width == 1000
// this.LayoutRoot.Width == 0

this.LayoutRoot.RequestLayout();
this.LayoutRoot.ForceLayout();
this.RequestLayout();    
this.ForceLayout();

// this.LayoutRoot.LayoutParameters.Width == 1000
// this.LayoutRoot.Width == 0 
```

如果我不使用宽度，这不是问题，但我是:) 我想这样做：

```
this.ScrollTo(500, 0); 
```

这不起作用，因为 HSV 子项的总宽度当前为 0。

但是，如果我这样做：

```
this.PostDelayed(() => this.ScrollTo((int) percent, 0), 500); 
```

延迟 500 毫秒后，它起作用了。

HSV 是一个派生类，它自己管理其内容 - 只是一个空的 RL，我用它来设置宽度，以便我可以有一个巨大的区域来绘制图像。一种巨大的滚动画布。此外，我想要做的是在 HSV 的 OnSizeChanged 覆盖成员中。我想这样做，如果重新调整控件的大小，控件会滚动到相同的位置。宽度取决于高度（保持纵横比）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T08:56:18.797

您必须等到重新计算布局。当您调用`forceLayout`布局时不会立即发生，它只是被添加到 UI 线程中的队列中。`onLayout`或者`onSizeChanged`一旦他们获得新的位置和大小，就会被所有涉及的视图调用。你真的无能为力。

# spring - 格里芬的 GORM

> ID：11340651
> 
> 赞同：1
> 
> 时间：2012-07-05T08:36:04.453
> 
> 标签：spring, plugins, grails-orm, griffon

我只是在尝试 griffon，只是想问一下是否可以在 griffon 应用程序中执行*GORM*？我是否需要安装一个额外的插件才能使它成为可能？感谢那些想要帮助的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T21:07:50.510

是的，可以将 GORM 与 Griffon 一起使用，但是让它工作的路径并不像你想象的那么顺利，来自 Grails。在网络上搜索“standalone GORM”，你会得到一些类似这样的结果[http://www.grails.org/GORM+-+StandAlone+Gorm](http://www.grails.org/GORM+-+StandAlone+Gorm)

现在，Griffon 提供了相当多的持久化插件，只需查看[http://artifacts.griffon-framework.org/tags/plugin/persistence](http://artifacts.griffon-framework.org/tags/plugin/persistence)即可。它们中的大多数都提供了低级别的数据访问 API，但也有一些是轻量级的 ORM 解决方案，例如 Carbonado、ActiveJDBC、MyBatis 甚至 EBean。

# c++ - 如何检测单个文件的文件系统大小限制

> ID：11340654
> 
> 赞同：5
> 
> 时间：2012-07-05T08:36:16.363
> 
> 标签：c++, filesystems

有没有办法检测单个文件的文件系统大小限制（例如 fat 32 上的 4gb）？

它必须在 Windows 操作系统上运行，但最好是便携式解决方案。检测文件系统类型可能是一种解决方法，但我也不知道如何做到这一点。

有人可以帮我吗？

提前谢谢你托拜厄斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T08:49:30.083

[您可以使用GetVolumeInformation](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364993%28v=vs.85%29.aspx)在 Windows 上检测文件系统类型

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T08:41:30.323

您可以通过获取**总**容量限制[`boost::space()`](http://www.boost.org/doc/libs/1_50_0/libs/filesystem/doc/reference.html#space)，也可以直接使用POSIX [`fstatvs()`](http://pubs.opengroup.org/onlinepubs/000095399/functions/statvfs.html)。

至于对单个文件大小的限制......唯一想到的便携式答案是丑陋的蛮力尝试创建更大和更大的文件直到失败，尽管它很昂贵（如果容量已经有限）。

# image - IE 无法正确显示 Spry Table

> ID：11340657
> 
> 赞同：0
> 
> 时间：2012-07-05T08:36:28.123
> 
> 标签：image, sorting, internet-explorer, spry

我在我的网站上添加了一个可排序的 spry 表。它在除 Internet Explorer 之外的任何地方都运行良好。我真的很挣扎，因为没有人能告诉我如何解决这个问题。在页面中，您可以在底部看到表格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T09:01:27.787

您首先`width` [像这样](http://img819.imageshack.us/img819/2712/18949898.png)定义 CSS ，然后用实际值动态替换它。然而，这是无效的 CSS，显然，IE 不仅忽略而且完全丢弃 - 整个`style`属性都从 DOM 中删除。

![这](../Images/a6e41199e1e7df59034466e7265b36a3.png)

# javascript - 为什么 parseInt(1/0, 19) 返回 18？

> ID：11340673
> 
> 赞同：863
> 
> 时间：2012-07-05T08:37:52.827
> 
> 标签：javascript, parseint

我在**JavaScript**中有一个烦人的问题。

```
> parseInt(1 / 0, 19)
> 18 
```

为什么`parseInt`函数返回`18`？

* * *

## 回答 #1

> 赞同：1305
> 
> 时间：2012-07-05T08:41:49.153

结果`1/0`是[`Infinity`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Infinity)。

[`parseInt`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/parseInt)将它的第一个参数视为一个字符串，这意味着首先`Infinity.toString()`被调用，产生字符串`"Infinity"`。所以它的工作原理与您要求它以`"Infinity"`19 为基数转换为十进制一样。

以下是以 19 为底的数字及其十进制值：

```
Base 19   Base 10 (decimal)
---------------------------
   0            0
   1            1
   2            2
   3            3
   4            4
   5            5
   6            6
   7            7
   8            8
   9            9
   a            10
   b            11
   c            12
   d            13
   e            14
   f            15
   g            16
   h            17
   i            18 
```

接下来发生的是`parseInt`扫描输入`"Infinity"`以查找可以解析的部分，并在接受第一个部分后停止`I`（因为`n`不是以 19 为基数的有效数字）。

因此，它的行为就像您调用`parseInt("I", 19)`了 ，它通过上表转换为十进制 18。

* * *

## 回答 #2

> 赞同：229
> 
> 时间：2012-07-05T08:43:38.050

以下是事件的顺序：

*   `1/0`评估为`Infinity`
*   `parseInt`阅读`Infinity`并愉快地注意到`I`以 19 为基数的 18
*   `parseInt`忽略字符串的其余部分，因为它无法转换。

请注意，您会得到任何 base 的结果`>= 19`，但不会得到低于该值的基数。对于 bases `>= 24`，您将获得更大的结果，因为`n`此时成为有效数字。

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2012-07-10T15:54:51.230

要添加到上述答案：

parseInt 旨在将字符串解析为数字（线索在名称中）。在您的情况下，您根本不想进行任何解析，因为 1/0*已经*是一个数字，所以这是一个奇怪的函数选择。如果您有一个数字（您有）并且想要将其转换为特定的基数，您应该使用[带有基数的 toString](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Number/toString)来代替。

```
var num = 1 / 0;
var numInBase19 = num.toString(19); // returns the string "Infinity" 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2012-07-17T08:01:49.687

添加到上述答案

`parseInt(1/0,19)`相当于`parseInt("Infinity",19)`

以19 为基数`0-9`，并且 `A-I` `(or a-i)`是有效数字。因此，从“Infinity”开始，它以`I`19 为基数并转换为以 10 为基数的 18 然后它尝试获取下一个字符，即`n`基数 19 中不存在的字符，因此丢弃下一个字符（根据 javascript 将字符串转换为数字的行为)

所以，如果你写`parseInt("Infinity",19)`OR `parseInt("I",19)`OR`parseInt("i",19)`结果将是相同的，即`18`。

现在，如果你写`parseInt("I0",19)`结果将`342` 是`I X 19 (the base)^1 + 0 X 19^0` = `18 X 19^1 + 0 X 19^0`= `18 X 19 + 0 X 1` =`342`

同样，`parseInt("I11",19)`会导致`6518`

IE

```
 18 X 19^2  +   1 X 19^1   +  1 X 19^0
= 18 X 19^2  +   1 X 19^1   +  1 X 19^0
= 18 X 361   +   1 X 19     +  1 X 1
= 6498  +  19  +  1
= 6518 
```

# c++ - 在函数中使用时自己的运算符+的奇怪行为（Point3D（0,0,0）+点）

> ID：11340677
> 
> 赞同：1
> 
> 时间：2012-07-05T08:38:20.157
> 
> 标签：c++, operators, operator-overloading, overloading

我有一堂课：

```
class Point3D : public Point{
    protected:
        float x;
        float y;
        float z;

    public:
        Point3D(){x=0; y=0; z=0;}
        Point3D(const Point3D & point){x = point.x; y = point.y; z = point.z;} 
        Point3D(float _x,float _y,float _z){x = _x; y = _y; z = _z;}

        inline const Point3D operator+(const Vector3D &);

        const Point3D & operator+(const Point3D &point){
            float xT = x + point.getX();
            float yT = y + point.getY();
            float zT = z + point.getZ();
            return Point3D(xT, yT, zT);
        }
... 
```

当我这样使用它时：

```
Point3D point = Point3D(10,0,10); 
```

一切正常。

当我写：

```
Point3D point = Point3D(10,0,10);
Point3D point2 = Point3D(0,0,0) + point(); 
```

也可以（point2 = point）。当我添加超过 (0,0,0) 的内容时，它也可以工作。

但是当我只想：

```
Point3D point = Point3D(10,0,10);
someFunction( Point3D(0,0,0) + point ); //will get strange (x,y,z) 
```

**该函数获取一些（在我看来）随机（x，y，z）的值。**为什么？

更奇怪的是，在那个类似的例子中，一切都**将**再次起作用：

```
Point3D point = Point3D(10,0,10);
Point3D point2 = Point3D(0,0,0) + point;
someFunction( point2 );  // will get (10,0,10) 
```

**这种奇怪行为的原因是什么？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T08:42:35.977

是返回一个悬空引用，返回的`operator+()`引用是指一个在返回`Point3D`时被销毁的实例`operator+()`。改成：

```
Point3D operator+(const Point3D &point) const { 
```

所以返回一个副本，并使它`const`因为它没有理由改变任何东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T08:53:37.670

支持算术运算符的类的典型模式是

```
class Foo
{
public:
  Foo & operator+=(Foo const & rhs) { /* ... */ return *this; }
  Foo & operator-=(Foo const & rhs) { /* ... */ return *this; }
  Foo & operator*=(Foo const & rhs) { /* ... */ return *this; }
  Foo & operator/=(Foo const & rhs) { /* ... */ return *this; }
};

Foo operator+(Foo const & lhs, Foo const & rhs) { return Foo(lhs) += rhs; }
Foo operator-(Foo const & lhs, Foo const & rhs) { return Foo(lhs) -= rhs; }
Foo operator*(Foo const & lhs, Foo const & rhs) { return Foo(lhs) *= rhs; }
Foo operator/(Foo const & lhs, Foo const & rhs) { return Foo(lhs) /= rhs; } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T08:42:05.953

您正在返回对局部变量的引用，`operator+`一旦函数返回，该变量将失效，您需要返回`Point3D`创建的副本。

# javascript - 如何更改javascript中的下拉列表值？

> ID：11340678
> 
> 赞同：0
> 
> 时间：2012-07-05T08:38:22.790
> 
> 标签：javascript, jquery, asp.net

我有这个下拉列表，a、b、c 和 2 个单选按钮 rdbButton1 和 rdbButton2。当我点击 rdbButton1 时会出现下拉列表，当我点击 rdbButton2 时，我必须将下拉列表值设置为 a。如何更改下拉列表值（我想在 javascript 或 jquery 中更改它）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T08:41:08.570

```
$('#id_of_the_option_element').val('new_value');
$('#id_of_the_option_element').html('new_caption');
$('#id_of_the_option_element').attr('selected','selected'); 
```

通过在谷歌上搜索“autoID asp.net”来搜索 autoid 的工作原理。这也可能有帮助。 [http://msdn.microsoft.com/en-us/library/system.web.ui.clientidmode.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.clientidmode.aspx)

您应该转到源视图以检查 html 元素的 ID 是如何变化的。

# java - 开发 Java API 并将其包含在 Spring App 中

> ID：11340680
> 
> 赞同：1
> 
> 时间：2012-07-05T08:38:31.163
> 
> 标签：java, spring, api, initialization, applicationcontext

我们有一个基于 Spring 的大型应用程序，其中包括不同的模块以及自定义 API。虽然有些模块需要 Spring 上下文，因为它们只是包装了领域模型的一部分，但我们认为我们的一些 API 不需要。

例如，我们围绕 Jackson / Jersey 编写了一个包装器来提供和使用 REST 服务。有一个中央接口可以访问此 API。然而，实现需要另一个类和另一个类，依此类推。所以一个简单的初始化将是

```
A a = new A(new B(new C(), new D(new E()))) 
```

我们目前免于使用`@Inject`. 此 API 的上下文会扫描包，然后将其导入目标应用程序。

```
<import resource="classpath:api-context.xml" /> 
```

我们对此感到不舒服，并希望将 spring 上下文踢出 REST 包装器，这意味着我们希望 API 不需要，但不知道如何去做。它应该表示以下两种之一：

**构造函数参数**

在目标上下文中，这将需要创建几个 bean，每个 bean 都使用其依赖项进行初始化

```
<bean id="a" class="...A">
    <constructor-arg>
        <ref = b " />
    </constructor-arg>
</bean>

<bean id="b" class="...B">
    <constructor-arg>
        <ref = c " />
    </constructor-arg>
</bean>
<!-- And so on --> 
```

**Getter 和 Setter**

或者，假设这`A`是`AInterface`AInterface 的特定实现，我们可以说，A 默认使用 BInterface 的某个实现，依此类推，实际上在内部使用 new 设置它们：

```
public class A implements AInterface {
    private BInterface b = new B();
    public getB() {return b;}
    public setB(B b) {this.b = b) }
}
// and so on 
```

然后在我的目标上下文中，如果我想使用默认配置，我可以用一行初始化中央访问

```
<bean id="a" class="...A" /> 
```

或使用属性来设置它的 B。但是，如果我想在更远的地方更改一些东西，我必须初始化所有 bean 并设置属性。

如果我将 new 用于测试之外的服务，它对我来说似乎也不干净。

* * *

所以我们想知道其他 API 开发人员如何在不依赖上下文导入的情况下使他们的接口和 bean 可访问（顺便说一句，这也会用许多可能不需要的 bean 混淆目标上下文，例如，如果一个 API 提供了多个服务，而我只想要使用一个）？

* * *

**编辑**

不确定这是否更好：

```
public class A implements AInterface {
    private BInterface b
    public A() {
        b = new B();
    }
    public getB() {return b;}
    public setB(B b) {this.b = b) }
} 
```

或者

```
public class A implements AInterface {
    private BInterface b
    public A(B b) {
        this.b = b;
    }
} 
```

从测试的角度来看，后者感觉最好，但它让我们回到了我上面描述的链，在我可以初始化 A 之前，我必须在我的上下文中初始化所有依赖的 bean。这感觉像太多的配置开销。

有人可能会争辩说，在使用类之前需要初始化所有依赖项是很正常的，我们应该重构我们的代码。然而，我们最终会得到很多实用程序/帮助程序类，它们也不是最好的设计，因为它们很难替换或测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T08:53:05.337

基本上，如果您的 API 不需要 Spring 上下文，则确实没有理由将其放在那里。

请注意您建议的第二种方法：

```
public class A implements AInterface {
    private BInterface b = new B();
    public getB() {return b;}
    public setB(B b) {this.b = b) }
} 
```

它有点问题，因为您在类中初始化接口，这将导致您的测试出现问题，因为您无法模拟这些对象。更好的解决方案是在使用它的类的构造函数中对其进行初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T16:43:39.030

只需将所有 bean 定义为默认延迟加载，然后您就不会实例化您不使用的服务。

```
<beans default-lazy-init="true">
    <!-- no beans will be pre-instantiated... -->
</beans> 
```

有关更多详细信息，请参阅[http://static.springsource.org/spring/docs/2.0.x/reference/beans.html#beans-factory-lazy-init](http://static.springsource.org/spring/docs/2.0.x/reference/beans.html#beans-factory-lazy-init)。

# java - 在eclipse建模juno中创建图表期间，单个类图和每个包一个类图有什么区别

> ID：11340681
> 
> 赞同：0
> 
> 时间：2012-07-05T08:38:33.747
> 
> 标签：java, eclipse, uml, modeling

在 Eclipse 建模 [juno 开发人员工具] 中创建图表期间，单个类图和每个包一个类图有什么区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T09:55:04.823

您下载了哪个 Juno 版本？如果我得到链接，我会尝试并报告。我不知道 Juno 有可用的 UML 编辑器。

# python - 使用多处理管理器时共享 dict 类属性

> ID：11340684
> 
> 赞同：1
> 
> 时间：2012-07-05T08:38:53.677
> 
> 标签：python, dictionary, multiprocessing

我编写了一些代码，旨在通过多处理和子处理一堆 Fortran 可执行文件运行。我试图创建一个简化的示例，我们使用 'df' 调用，如下所示。我在 Ubuntu 12.04 上使用多处理，一切都是 2.7 python。

我在一个类上创建了一个字典，用作“队列”并保存记录。也许我应该使用 multiprocessing.Queue，但目前我不是。

第一个版本在这里： http: [//paste.ubuntu.com/1076049/](http://paste.ubuntu.com/1076049/)

如果您运行此代码，您会看到在调用 multiprocessing 后，dicts 没有同步......一些谷歌搜索和搜索......然后我了解了 multiprocessing.Manager 用于共享/同步来自本网站搜索的 dicts .

我试图在这里实现它：http: [//paste.ubuntu.com/1076054/](http://paste.ubuntu.com/1076054/)

但现在我收到关于 KeyError 的错误。这发生在第 43 行，我尝试在字典中引用我刚刚创建的密钥（第 40 行）。这在我上面的第一种方法中不会导致任何错误，但显然在使用 Manager.dict 时我遗漏了一些东西。

我是否误解了如何使用 Manager 类？

# c# - 消除 XAML 代码重复

> ID：11340687
> 
> 赞同：0
> 
> 时间：2012-07-05T08:39:13.623
> 
> 标签：c#, silverlight, windows-phone-7, xaml, optimization

我想在我的 Windows 移动应用程序中添加过渡效果，我可以使用 silverlight 工具包的过渡效果来实现它。但问题是我最终在所有 XAML 页面中复制了确切的代码。

我提供了 MainPage.xaml 的摘录和位于页面底部的重复工具包代码。有没有办法优化它（在一个地方并使用它）？

在 Ruby on Rails 中，我会简单地为该代码创建一个部分。这里有类似的东西吗？

```
<phone:PhoneApplicationPage
    xmlns:toolkit="xyz"
    xmlns="xmlnamespace_value">

    <!-- PAGE DESIGN START -->
    ...
    ...
    ...
    ...
    <!-- PAGE DESIGN END -->

    <!-- REPEATING CODE START -->
    <toolkit:TransitionService.NavigationInTransition>
        <toolkit:NavigationInTransition>
            <toolkit:NavigationInTransition.Backward>
                <toolkit:TurnstileTransition Mode="BackwardIn"/>
            </toolkit:NavigationInTransition.Backward>
            <toolkit:NavigationInTransition.Forward>
                <toolkit:TurnstileTransition Mode="ForwardIn"/>
            </toolkit:NavigationInTransition.Forward>
        </toolkit:NavigationInTransition>
    </toolkit:TransitionService.NavigationInTransition>
    <!-- REPEATING CODE END -->
</phone:PhoneApplicationPage> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T08:48:51.290

也许您可以将重复代码分成`UserControl`?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T08:52:08.420

[使用Style](http://msdn.microsoft.com/en-us/library/system.windows.style.aspx)设置页面效果。

**更新：**

1.  *样式.xaml：*

    ```
    <ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
        <Style x:Key="MyPageStyle" TargetType="Page">
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect />
                </Setter.Value>
            </Setter>
            <Setter Property="Background" Value="AliceBlue" />
        </Style>
    </ResourceDictionary> 
    ```

2.  *应用程序.xaml*：

    ```
    <Application x:Class="WpfBrowserApplication1.App"
                 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                 StartupUri="Page1.xaml">
        <Application.Resources>
            <ResourceDictionary Source="Styles.xaml" />
        </Application.Resources>
    </Application> 
    ```

3.  *Page1.xaml*：

    ```
    <Page x:Class="WpfBrowserApplication1.Page1"
          xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
          xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
          xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
          xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
          Title="Page1"
          d:DesignHeight="300"
          d:DesignWidth="300"
          Style="{StaticResource MyPageStyle}" // Take a look at this line
          mc:Ignorable="d">
        <Grid />
    </Page> 
    ```

# javascript - Twitter小部件_更大的个人资料图片

> ID：11340690
> 
> 赞同：0
> 
> 时间：2012-07-05T08:39:28.517
> 
> 标签：javascript, twitter

我在我的网站上使用官方 Twitter 搜索和列表小部件，但想要比小部件默认提供的更大的个人资料图像。

它输出的图像具有如下网址： http: [//a0.twimg.com/profile_images/2345779363/4x1fuaqbec4ef62163yd_normal.png](http://a0.twimg.com/profile_images/2345779363/4x1fuaqbec4ef62163yd_normal.png)

注意最后的“_normal”。Twitter将此添加到所有个人资料图片中以使其更小。我想要的是将“正常”替换为“更大”，正如您所料，它会输出更大的图像。

这是 Twitter 调用的脚本。[http://twitter.com/javascripts/widgets/widget.js](http://twitter.com/javascripts/widgets/widget.js)

有没有办法我可以 a) 修改脚本以输出 _bigger 图像 b) 一旦输出代码以将 '_normal' 更改为 '_bigger'，执行一种“查找和替换”

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T10:37:43.597

在功能集中：

```
fullscreen: true, 
```

这启动了将 _normal 替换为 _bigger 的脚本的一部分。

# html - 如何将提交按钮设置为选项？

> ID：11340691
> 
> 赞同：1
> 
> 时间：2012-07-05T08:39:34.160
> 
> 标签：html, submit, option

我正在做一个问答页面。我的问题是我可以使用提交按钮作为选项。我已经尝试过了，但它似乎不起作用。这是代码：

```
 <textarea name="questn" readonly="readonly" cols="45" rows="5">Question</textarea>
    <input type="submit" class="myButton" name="option" value="optiona" />
    <input type="submit" class="myButton" name="option"  value="optionb"/>
    <input type="submit" class="myButton" name="option"  value="optionc"/>
    <input type="submit" class="myButton" name="option"  value="optiond"/> 
```

我在这里要做的是，当用户单击一个选项时，它将检查该值是否与答案正确。我不想为此使用单选按钮。我使用图像作为选项。这可能吗？请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T08:47:10.560

你可以用 jQuery 来做。

访问此页面

[http://www.w3schools.com/jquery/event_submit.asp](http://www.w3schools.com/jquery/event_submit.asp)

您还必须编写一个javascript代码以在选择/单击项目时触发它

注意：使用表单作为选择器

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>radio selector example</title>
<script language="javascript" src="javascript/jquery-1-7-2-mini.js"></script>

</head>

<body>
Chose your car:
<form action="index.html" id="form_id">
<input type="radio" class="radio" name="car" value="Car1" /> Car1<br />
<input type="radio" class="radio" name="car" value="Car2" /> Car2<br />
<input type="radio" class="radio" name="car" value="Car3" /> Car3<br />
<input type="radio" class="radio" name="car" value="Car4" /> Car4<br />
<input type="radio" class="radio" name="car" value="Car5" /> Car5<br />
<input type="radio" class="radio" name="car" value="Car6" /> Car6<br />
<input type="radio" class="radio" name="car" value="Car7" /> Car7<br />
<input type="radio" class="radio" name="car" value="Car8" /> Car8
</form>

<script language="javascript">
$(document).ready(function(){
    $("input.radio").click(function(){
        $("form#form_id").submit(); $()
    });                    

 });

</script>

</body>
</html> 
```

# html - 编写好的“替代”内容？

> ID：11340692
> 
> 赞同：2
> 
> 时间：2012-07-05T08:39:42.697
> 
> 标签：html, accessibility

关于图像的 alt 属性，最佳实践是什么？

例如，假设我有一张带有标题的图像，上面写着“我们照顾我们的员工”，而随附的图像是一张男人从面包车窗户向外看向相机的照片，对于 alt 内容，我应该有类似的内容：

“我们照顾我们的员工”（图片说明的副本）

或者

“一个男人从面包车窗户望向相机的照片”（图像描述）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T08:53:32.453

[取自 w3 规范，改写；](http://www.w3.org/TR/html-alt-techniques/)

编写 alt 标签没有“错误”或“正确”的方式，因为它与上下文相关。例如，采取以下场景；在您的网站上，最终用户被要求选择他最喜欢的颜色：

![在此处输入图像描述](../Images/008da1858665f68b150da499e7e65655.png)

alt 标签如下：

```
<ul>
<li><a href="red.html"><img src="red.jpeg" alt="Red"></a></li>
<li><a href="green.html"><img src="green.jpeg" alt="Green"></a></li>
<li><a href="blue.html"><img src="blue.jpeg" alt="Blue"></a></li>
</ul> 
```

第二种情况是，如果您有一个徽标，该徽标又链接到该网站，则 alt 标签应该是该链接的描述：

![在此处输入图像描述](../Images/02fa848d030add0d71160ff88d74f573.png)

一个写得很好的 alt 标签应该是：

```
<a href="http://w3.org">
<img src="images/w3c_home.png" width="72" height="48" alt="W3C web site">
</a> 
```

以下示例更适用于您的场景。

> 这是与页面内容主题密切相关但未直接讨论的图像示例。受一首诗启发的一幅画的图像，在背诵那首诗的页面上。以下代码段显示了一个示例。这幅画是一幅名为《葱娘》的画作，灵感来自于这首诗，其题材也来源于这首诗。因此，强烈建议提供替代文本。在 alt 属性中有图片内容的简短描述，图片下方有一个链接，指向位于文档底部的较长描述。在较长描述的末尾，还有一个链接，指向有关这幅画的更多信息。

![在此处输入图像描述](../Images/43c13cdec1eb2b9893d3fec4a564f0f3.png)

替代文本应该有以下代码

```
<header><h1>The Lady of Shalott</h1>
<h2>A poem by Alfred Lord Tennyson</h2></header>

<img src="shalott.jpeg" alt="Painting of a  young woman with long hair, sitting in a wooden boat. ">
<p><a href="#des">Description of the painting</a>.</p>

<!-- Full Recitation of Alfred, Lord Tennyson's Poem.  -->

...
...
...
<p id="des">The woman in the painting is wearing a flowing white dress. A large piece of intricately 
patterned fabric is draped over the side. In her right hand she holds the chain mooring the boat. Her expression 
is mournful. She stares at a crucifix lying in front of her. Beside it are three candles. Two have blown out. 
<a href="http://bit.ly/5HJvVZ">Further information about the painting</a>.</p> 
```

然而....有时一个alt标签可以一起省略。例如，如果您有上面的图像，其上下文描述相对于页面正下方的图像：

![在此处输入图像描述](../Images/43c13cdec1eb2b9893d3fec4a564f0f3.png)

> 每周五在泰晤士河畔金斯敦河畔的 Boaters 酒吧参加我们的中世纪主题之夜。

对于上面的示例，以下任一解决方案都符合要求：

```
<p><img src="shalott.jpeg" alt=""></p>
<p>Join us for our medieval theme nights every Friday at 
Boaters Bar,on the riverside, Kingston upon Thames.</p> 
```

或者

```
<p><img src="shalott.jpeg" alt="Painting of a woman in a white flowing dress, sitting in a small boat."></p>
<p>Join us for our medieval theme nights every Friday at Boaters Bar,
 on the riverside, Kingston upon  Thames.</p> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T08:53:00.247

**来自 w3.org 的摘录**

> 当图像包含对理解内容很重要的词时，替代文本应包含这些词。这将允许替代文本在页面上发挥与图像相同的功能。请注意，它不一定描述图像本身的视觉特征，但必须传达与图像相同的含义。

**示例 1**

> 网站上的图片提供了免费通讯的链接。图像包含文本“免费时事通讯。获取免费食谱、新闻等。了解更多。” 替代文本与图像中的文本匹配。

**示例 2**

> 网站上的图像描绘了建筑物的平面图。该图像是一个图像地图，每个房间都有一个交互式地图区域。替代文字是“建筑物的平面图。选择房间以获取有关房间用途或内容的更多信息。” “选择房间”的指令表明图像是交互式的。

[http://www.w3.org/TR/WCAG20-TECHS/H37](http://www.w3.org/TR/WCAG20-TECHS/H37)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T15:31:30.820

请记住，这`alt`是为想象的文本替换。

很多情况下，我离开了，`alt = ""`因为没有文字可以取代那个想象。

其他时候，最好只使用一个字符：

```
<img src="fancy_bullet_point.gif" alt="*"> 
```

只要记住基本的经验法则：如果你没有图像，你会放什么？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T08:45:08.610

警告：这个答案相当主观。

我特别在具有特殊功能的图像上使用此属性。例如，用户可以单击以保存某些内容的磁盘图像。然后 alt 的值将是“保存”。

但我认为您不应该对每张图片进行描述。只需说“画廊图片”或类似的东西。

# oracle - oracle中如何从另一个日期中减去日期

> ID：11340695
> 
> 赞同：1
> 
> 时间：2012-07-05T08:40:02.320
> 
> 标签：oracle

假设我有一个表**订单**并有列

```
LastUpdatedDate, status. 
```

我想做的是-

> 选择所有“P”状态的订单，lastupdate 是从当前日期起两天后

.

任何人都可以帮助我编写查询以获得我的结果。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T08:42:40.453

尝试

```
select * from yourtable
where status = 'P' 
and LastUpdatedDate < sysdate - 2 
```

# php - 如何使用正则表达式删除 HTML 标记 ID 属性中的多个“[”？

> ID：11340696
> 
> 赞同：0
> 
> 时间：2012-07-05T08:40:08.107
> 
> 标签：php, regex, preg-replace

如何使用正则表达式删除 HTML 标记 ID 属性中的多个“[”？

例如

```
<div id="test[12][45][67]">test inline [for example]</div> 
```

改成

```
<div id="test12]45]67]">test inline [for example]</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T08:48:01.527

What you could (most likely should) do is to use a PHP HTML parser, such as [PHP Simple DOM Parser](http://simplehtmldom.sourceforge.net/) to go over the HTML, extract the ID value and then replace it using something like so:

```
<?php
$string = <yourID>
$pattern = '/\[/g';
$replacement = '';
echo preg_replace($pattern, $replacement, $string);
?> 
```

This would allow you to *safely* modify only your `id` section in a relatively simple manner.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T09:08:28.150

使用 javascript：

```
function rem_open_square_brackets(_id) {
    if(_id) {
        return _id.replace(/[\[]*/g, '');
    }
    return _id;
}
var _id = rem_open_square_brackets('test[12][45][67]');
document.write(_id); 
```

您可以找到所有 id 并将它们传递给函数并用返回值替换它们。

# android - 类不工作，发生错误？

> ID：11340706
> 
> 赞同：0
> 
> 时间：2012-07-05T08:41:08.423
> 
> 标签：android, dropbox

我正在使用 Android 2.1 平台。打算做一个基于 DropBox 的项目。我使用 DBUtility 类在 DropBox 中列出联系人。DBUtility 不是主类。它是一个子类。主类从这个类中调用一些函数。

它单独运行良好，以下代码上的 Createfolder() 仅包含一个语句

**mDBApi.createFolder("联系人");**

没有上面提到的错误。当我添加一些基于**联系人**的代码时。我得到了类似的错误

**“对于 DropBoxUtility 类型，方法 getContentResolver() 未定义”**。

**代码**

```
public class DropBoxUtility {
    private DropboxAPI<AndroidAuthSession> mDBApi;  
    public DropBoxUtility(DropboxAPI<AndroidAuthSession> Api) {
        mDBApi = Api;  
    } 

    public void ContactFolder() throws DropboxException { 
        mDBApi.createFolder("Contacts");
        ArrayAdapter<String>itemAdapter;
        ArrayList<String> contactlist = new ArrayList<String>(); 
        String displayName="All Contacts Here";
        ByteArrayInputStream inputStream = new ByteArrayInputStream(displayName.getBytes());
        Entry newEntry = mDBApi.putFile("Contacts/abhi.doc", inputStream, displayName.length(), null, null);    

        /* I got Error on this line */
        ContentResolver cr = getContentResolver() ;
        Cursor cursor = cr.query(ContactsContract.Contacts.CONTENT_URI, null, null, null, null);

        while (cursor.moveToNext()) {
            displayName = ""; 
            displayName = cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
            String id = cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts._ID));
            String holder = "";
            holder = holder + displayName;

            /* Phone Number and Type */
            ArrayList<String> phoneList = new ArrayList<String>();
            if (Integer.parseInt(cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) {
                Cursor pCur = cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, ContactsContract.CommonDataKinds.Phone.CONTACT_ID + " = ?", new String[] { id }, null);

            while (pCur.moveToNext()) {

                int phoneType = pCur
                        .getInt(pCur
                                .getColumnIndex(ContactsContract.CommonDataKinds.Phone.TYPE));
                String pnum = pCur.getString(pCur
                        .getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));

                switch (phoneType) {
                case ContactsContract.CommonDataKinds.Phone.TYPE_HOME:
                    phoneList.add(", Home, "+pnum);
                    break;
                case ContactsContract.CommonDataKinds.Phone.TYPE_WORK:
                    phoneList.add(", Work, "+pnum);
                    break;
                case ContactsContract.CommonDataKinds.Phone.TYPE_MOBILE:
                    phoneList.add(", Mobile, "+pnum);
                    break;
                case ContactsContract.CommonDataKinds.Phone.TYPE_OTHER:
                    phoneList.add(", Other, "+pnum);
                    break;
                }
            }   // end of while

            pCur.close(); 
        }       // end of if

        /* Email */
        Cursor emails = cr.query(Email.CONTENT_URI, null, Email.CONTACT_ID
                + " = " + id, null, null);

        ArrayList<String> emailList = new ArrayList<String>();

        while (emails.moveToNext()) {
            int emailType = emails
                    .getInt(emails
                            .getColumnIndex(ContactsContract.CommonDataKinds.Email.TYPE));
            String email = emails.getString(emails
                    .getColumnIndex(ContactsContract.CommonDataKinds.Email.DATA));

            switch (emailType) {
            case ContactsContract.CommonDataKinds.Email.TYPE_HOME:
                emailList.add(", Home, "+email);
                break;
            case ContactsContract.CommonDataKinds.Email.TYPE_WORK:
                emailList.add(", Work, "+email);
                break;
            case ContactsContract.CommonDataKinds.Email.TYPE_MOBILE:
                emailList.add(", Mobile, "+email);
                break;
            case ContactsContract.CommonDataKinds.Email.TYPE_OTHER:
                emailList.add(", Other, "+email);
                break;
            }
        }
        emails.close();

        if(phoneList.size()>=emailList.size()) {
            for(int i=0;i<phoneList.size();i++) {
                holder = displayName + phoneList.get(i);
                try{
                    holder = holder + emailList.get(i);
                }catch(Exception ex){
                    holder = holder + ", , ";
                }
                contactlist.add(holder);
            }
        }else {
            for(int i=0;i<emailList.size();i++) {
                try{
                    holder = displayName+ phoneList.get(i);
                }catch(Exception ex){
                    holder = holder + ", , ";
                }
                holder = holder + emailList.get(i);
                contactlist.add(holder);
            }
        }
    }
    Collections.sort(contactlist);
    cursor.close(); 

} 
```

**日志猫**

```
 07-05 14:57:54.734: W/dalvikvm(392): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
 07-05 14:57:54.734: E/AndroidRuntime(392): Uncaught handler: thread main exiting due to uncaught exception
 07-05 14:57:54.744: E/AndroidRuntime(392): java.lang.SecurityException: Permission Denial: reading com.android.providers.contacts.ContactsProvider2 uri content://com.android.contacts/contacts from pid=392, uid=10028 requires android.permission.READ_CONTACTS
 07-05 14:57:54.744: E/AndroidRuntime(392):     at android.os.Parcel.readException(Parcel.java:1218)
 07-05 14:57:54.744: E/AndroidRuntime(392):     at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:160)
 07-05 14:57:54.744: E/AndroidRuntime(392):     at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:114)
 07-05 14:57:54.744: E/AndroidRuntime(392):     at android.content.ContentProviderProxy.bulkQuery(ContentProviderNative.java:326)
 07-05 14:57:54.744: E/AndroidRuntime(392):     at android.content.ContentProviderProxy.query(ContentProviderNative.java:345)
 07-05 14:57:54.744: E/AndroidRuntime(392):     at android.content.ContentResolver.query(ContentResolver.java:202)
 07-05 14:57:54.744: E/AndroidRuntime(392):     at com.abhi.DropBoxUtility.ContactFolder(DropBoxUtility.java:47) 
```

如何解决这个问题呢 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T08:47:31.887

`getContentResolver`方法存在于`Context`课堂上。您可以直接从活动中调用它，因为活动是一个上下文。您`DropBoxUtility`不是`Activity`，因此您需要在其中包含上下文才能使用`getContentResolver`方法。最简单的方法是将其传递给构造函数：

```
public class DropBoxUtility
{
    private DropboxAPI<AndroidAuthSession> mDBApi;
    private Context context;

    public DropBoxUtility(DropboxAPI<AndroidAuthSession> Api, Context ctx)
    {
        mDBApi = Api;
        context = ctx;
    }

    ...
} 
```

然后，当您需要拨打电话时，请使用`context.getContentResolver()`.

您将从您的活动中将此类实例化为`new DropBoxUtility(api, this);`

**编辑：**要读取联系信息，您需要在清单中添加相应的权限：

```
<uses-permission android:name="android.permission.READ_CONTACTS"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T08:46:37.910

```
// I got Error on this line     ContentResolver cr = getContentResolver() ; 
```

我不知道**DropBox api**，但我肯定可以指出这个错误，它`getContentResolver()`是 android **Activity**类的方法，而不是**DropBoxUtility ，您可以使用该****活动的上下文（参考）**在不同的类中使用此方法。

将 Android Activity 的上下文传递给 DropBoxUtility 构造函数并使用该上下文，例如，

```
ContentResolver cr =  mContext.getContentResolver(); // Here mContext is a reference of your Activity class from which your are calling this DropBox class. 
```

试试这个，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T08:46:59.013

该类`DropBoxUtility`不继承自任何提供该`getContentResolver`方法的类（即`Activity`）。您必须从另一个类派生该类，或者您必须声明并实现该`getContentResolver`方法。

正如 user370305 所说，您可以将 的实例传递`Activity`给类的构造函数`DropBoxUtility`并调用该实例的方法。

# java - Spring MVC + Hibernate：没有 Hibernate Session 绑定到线程，并且配置不允许在这里创建非事务性会话

> ID：11340723
> 
> 赞同：0
> 
> 时间：2012-07-05T08:42:31.123
> 
> 标签：java, hibernate, spring-mvc

我知道这个话题之前已经讨论过，但不幸的是，我看到的解决方案都不适用于我的案例，而且我已经为此烦恼了好几天。

我有一个典型的 spring-mvc web 应用程序，它有两个上下文，servlet-context 和 application-conext：

这是**web.xml**：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

<!-- The definition of the Root Spring Container shared by all Servlets and Filters -->

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>classpath:/META-INF/spring/application-context.xml</param-value>
</context-param>

<!-- Creates the Spring Container shared by all Servlets and Filters -->
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<!-- Processes application requests -->
<servlet>
    <servlet-name>appServlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/appServlet/servlet-context.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>appServlet</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>

</web-app> 
```

**servlet-** context.xml ：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:beans="http://www.springframework.org/schema/beans"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:tx="http://www.springframework.org/schema/tx"
xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

<!-- DispatcherServlet Context: defines this servlet's request-processing infrastructure -->

<!-- Enables the Spring MVC @Controller programming model -->
<annotation-driven />

<!-- Handles HTTP GET requests for /resources/** by efficiently serving up static resources in the ${webappRoot}/resources directory -->
<resources mapping="/resources/**" location="/resources/" />

<!-- Resolves views selected for rendering by @Controllers to .jsp resources in the /WEB-INF/views directory -->
<beans:bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <beans:property name="prefix" value="/WEB-INF/views/" />
    <beans:property name="suffix" value=".jsp" />
</beans:bean>

<context:component-scan base-package="com.cookit.cookit.controller, com.cookit.cookit.dao, com.cookit.cookit.service." />

</beans:beans> 
```

而且，**application-context.xml**：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
xmlns:tx="http://www.springframework.org/schema/tx"
xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd">

<!-- Root Context: defines shared resources visible to all other web components -->

<context:property-placeholder location="classpath:jdbc.properties, classpath:hibernate.properties" />

<context:component-scan base-package="com.cookit.cookit.dao, com.cookit.cookit.service" />

<tx:annotation-driven transaction-manager="transactionManager"/>

<bean id="messageSource"
    class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
    <property name="basename" value="classpath:messages" />
    <property name="defaultEncoding" value="UTF-8" />
</bean>

<bean id="dataSource"
    class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="${database.driver}" />
    <property name="url" value="${database.url}" />
    <property name="username" value="${database.user}" />
    <property name="password" value="${database.password}" />
</bean>

<bean id="sessionFactory"
    class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="annotatedClasses">
        <list>
            <value>com.cookit.cookit.domain.Ingredient</value>
            <value>com.cookit.cookit.domain.Recipe</value>
            <value>com.cookit.cookit.domain.Step</value>
            <value>com.cookit.cookit.domain.User</value>
        </list>
    </property>
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">${hibernate.dialect}</prop>
            <prop key="hibernate.show_sql">${hibernate.show_sql}</prop>
            <prop key="hibernate.format_sql">${hibernate.format_sql}</prop>
        </props>
    </property>
</bean>

<bean id="transactionManager"
    class="org.springframework.orm.hibernate3.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory" />
</bean>

</beans> 
```

通过 url: 查询用户 #1 时出现以下错误`http://localhost:8080/CookIt/user?id=1`：

> org.hibernate.HibernateException: No Hibernate Session bound to thread，并且配置不允许在这里创建非事务性会话

这里有什么问题？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T09:34:21.253

您尚未配置交易：

```
<bean id="transactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory" />
</bean>

<tx:advice id="txAdvice">
    <tx:attributes>
        <tx:method name="*" propagation="REQUIRED" />
    </tx:attributes>
</tx:advice>

<aop:config>
    <aop:advisor pointcut="execution(* YOUR.PACKAGE..*.*(..))" advice-ref="txAdvice" />
</aop:config> 
```

此外，您需要在 web.xml 中指定一个过滤器

```
<filter>
    <filter-name>hibernateFilter</filter-name>
    <filter-class>org.springframework.orm.hibernate3.support.OpenSessionInViewFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>hibernateFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

此过滤器将 Hibernate 会话扩展到视图。

有关更多信息，请参见[此处](http://static.springsource.org/spring/docs/1.2.9/api/org/springframework/orm/hibernate3/support/OpenSessionInViewFilter.html)

# java - 在上传过程中更新进度对话框

> ID：11340735
> 
> 赞同：1
> 
> 时间：2012-07-05T08:43:08.183
> 
> 标签：java, android, progressdialog

我的程序正在从 SD 卡上传视频没有问题，但我正在尝试添加一个进度对话框以显示到目前为止上传的字节数百分比。我正在使用异步任务。但是，尽管我能够在屏幕上显示对话框。对话框未更新。上传完成后，它变成 100/100 并消失。你能帮我如何更新进度对话框吗？

```
package com.isoft.uploader2;

import java.io.DataOutputStream;
import java.io.File;
import java.io.FileInputStream;
import java.net.HttpURLConnection;
import java.net.URL;
import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.database.Cursor;
import android.net.Uri;
import android.os.AsyncTask;
import android.os.Bundle;
import android.os.Handler;
import android.provider.MediaStore;
import android.util.Log;
import android.view.View;
import android.widget.Button;

 public class Proje2Activity extends Activity
 {
 @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Button select =(Button)findViewById(R.id.select);
        Button back =(Button)findViewById(R.id.back1);
        Button camera =(Button)findViewById(R.id.camera);

        //Select a video from SD-Card
        select.setOnClickListener(new View.OnClickListener()
        {
            @Override
            public void onClick(View arg0) 
            {
                // TODO Auto-generated method stub
                openGaleryVideo();
            }
        }); 

        //Turn back
        back.setOnClickListener(new View.OnClickListener() 
        {
            @Override
            public void onClick(View arg0)
            {
                // TODO Auto-generated method stub
                finish();
            }
        }); 

        //Record a video
        camera.setOnClickListener(new View.OnClickListener()
        {
            @Override
            public void onClick(View arg0) 
            {
                // TODO Auto-generated method stub
                Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
                startActivity(intent);
            }
        }); 
    }
/** Called when the activity is first created. */
public static final int SELECT_VIDEO=1;
public static final String TAG="UploadActivity";
String path="";

//Open Gallery
public void openGaleryVideo()
{
    Intent intent=new Intent();
    intent.setType("video/*");
    intent.setAction(Intent.ACTION_GET_CONTENT);
    startActivityForResult(Intent.createChooser(intent, "Select Video"),SELECT_VIDEO);
}

//Select the video and start to execute the upload class
public void onActivityResult(int requestCode, int resultCode, Intent data) 
{
    super.onActivityResult(requestCode, resultCode, data);
    if (resultCode == RESULT_OK)
    {
        if (requestCode == SELECT_VIDEO) 
        {
            Uri videoUri = data.getData();
            path= getPath(videoUri);
            upload upload = new upload();
            upload.execute();
        }
    }
}

//Getting the URİ from the SD Card
public String getPath(Uri uri)
{   
    String[] projection = { MediaStore.Video.Media.DATA};
    Cursor cursor = managedQuery(uri, projection, null, null, null);
    int column_index = cursor.getColumnIndexOrThrow(MediaStore.Video.Media.DATA);
    cursor.moveToFirst();
    return cursor.getString(column_index);
}

//ASYNC TASK Upload Class which uploads the file and shows the progress via a dialog
public class upload extends AsyncTask<Object, Integer, Void> 
{
     //Initializations
     public ProgressDialog dialog;
     File file=new File(path);  
     String urlServer = "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx";
     String filename=file.getName();
     int bytesRead, bytesAvailable, bufferSize,progress;
     byte[] buffer;
     int maxBufferSize = 20*1024*1024;

    //Before start to upload the file creating a dialog
    @Override
    public void onPreExecute() 
    {
         dialog = new ProgressDialog(Proje2Activity.this);
         dialog.setMessage("Uploading...");
         dialog.setIndeterminate(false);
         dialog.setTitle("UPLOADING");
         dialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
         dialog.setProgress(0);
         dialog.setMax(100);
         dialog.show();
            //Burada işlemi yapmadan önce ilk olarak ne yaptırmak istiyorsak burada yaparız.
            //Örneğin burada dialog gösterip "onPostExecute()" metodunda dismiss edebiliriz.
    }

    //Uploading the file in background with showing the progress
    @Override
    public Void doInBackground(Object... arg0) 
    {
        // TODO Auto-generated method stub
        try
        {
        final FileInputStream fileInputStream = new FileInputStream(file);
        URL url = new URL(urlServer);
        HttpURLConnection connection = (HttpURLConnection) url.openConnection();
        connection.setFixedLengthStreamingMode((int) file.length());

        // Allow Inputs & Outputs
        connection.setDoInput(true);
        connection.setDoOutput(true);
        connection.setUseCaches(false);

        // Enable POST method
        connection.setRequestMethod("POST");
        connection.setRequestProperty("Connection", "Keep-Alive");
        connection.setRequestProperty("Content-Type",  "multipart/form-data");
        connection.setRequestProperty("SD-FileName", filename);//This will be the file name
        final DataOutputStream outputStream = new DataOutputStream(connection.getOutputStream());
        bytesAvailable = fileInputStream.available();
        bufferSize = Math.min(bytesAvailable, maxBufferSize);
        buffer = new byte[bufferSize];
        // Read file
        bytesRead = fileInputStream.read(buffer, 0, bufferSize);

        while (bytesRead > 0)
        {   
            progress=0;
            progress+=bytesRead;
            outputStream.write(buffer, 0, bufferSize);
            bytesAvailable = fileInputStream.available(); 
            publishProgress((int)((progress*100)/(file.length())));
            bufferSize = Math.min(bytesAvailable, maxBufferSize);
            bytesRead = fileInputStream.read(buffer, 0, bufferSize);
            progress+=bytesRead;
        }//end of while statement
        fileInputStream.close();
        publishProgress(100); 
        outputStream.flush();
        outputStream.close();
        }//end of try body

        catch (Exception ex)
        {
            //ex.printStackTrace();
            Log.e("Error: ", ex.getMessage());
        }

        return null;
     }//end of doInBackground method

     //making an update on progress
     @Override
     public void onProgressUpdate(Integer... values)
        {
            super.onProgressUpdate(values);
            dialog.setProgress(values[0]);
        }//end of onProgressUpdate

     //After finishing the progress the dialog will disappear!
     @Override
     public void onPostExecute(Void result) 
        {
            try 
            {
                dialog.dismiss();
            } //End of the second try body
            catch(Exception e) 
            {

            }
        }//end of onPostExecute method
}// end of asyncTask class 
}//end of main 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T09:16:11.230

我注意到的问题是：

*   你`bufferSize`可以是总文件长度。因此，在一次读取中，缓冲区可能已满。我将其更改为 512 以获得进度条的明显变化
*   你的 resets`progress`循环内的变量
*   此外，您正在将整个缓冲区（即 from `0`to `bufferSize`）写入输出流。不是实际的`bytesRead。在最后部分，您可能会得到错误值。
*   在再次阅读之前，你没有休息`buffer`

更新代码

```
bufferSize = 512;
buffer = new byte[bufferSize];
// Read file
bytesRead = fileInputStream.read(buffer, 0, bufferSize);
progress=0;

while (bytesRead > 0)
{   

    progress+=bytesRead;
    outputStream.write(buffer, 0, bytesRead);
    bytesAvailable = fileInputStream.available(); 
    publishProgress((int)((progress*100)/(file.length())));
    bufferSize = Math.min(bytesAvailable, maxBufferSize);
    buffer = new byte[bufferSize];
    bytesRead = fileInputStream.read(buffer, 0, bufferSize);
}//end of while statement
fileInputStream.close();
publishProgress(100); 
outputStream.flush();
outputStream.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T08:53:53.130

您的循环应该看起来像这样，您的代码中有几个逻辑错误。

```
// Read file
bytesRead = fileInputStream.read(buffer, 0, bufferSize);
progress=0;
progress+=bytesRead;

while (bytesRead > 0)
{   
    outputStream.write(buffer, 0, bufferSize);
    bytesAvailable = fileInputStream.available(); 
    publishProgress((int)((progress/file.length())*100));
    bufferSize = Math.min(bytesAvailable, maxBufferSize);
    bytesRead = fileInputStream.read(buffer, 0, bufferSize);
    progress+=bytesRead;
}//end of while statement 
```

**更新：**我刚刚注意到，您使用 20MB 的缓冲区，更改`maxBufferSize`为`int maxBufferSize = 1024`，它应该可以工作。

# sql-server - 如何在 SQL 视图/访问查询中从 SQL Server 检索多个聚合列（首选 SQL 视图）

> ID：11340736
> 
> 赞同：0
> 
> 时间：2012-07-05T08:43:10.510
> 
> 标签：sql-server, ms-access

我有一张表`tblRecords`，每天在这张表中插入 3500 条记录。 `tblRecords`有一个外键链接到`tblUpload`. 除了通用`ID`列之外，每一行都由一个`REF`（即：XYDG74G）和将其链接到的外键列（即：345）标识`tblUpload`。

每天上传的大约 3500 行与前一天上传的行相同（有更新）以及过去 24 小时内的其他新条目。

每`tblRecord`行可以标记（BIT 列）为`MissCustName`和`MissCustNameFixed`。我通过 来查看`tblRecord`行`tblUpload`，也就是说我“显示今天上传的所有 (3500+) 条记录”。我想连同实际的列`tblRecord`一起看到两列，`CountOfPrevMissCustName`并且`CountOfPrevMissCustNameFixed`

```
ID - Ref - CustName - CountofPrevMissCustName- CountofPrevMissCustNameOK

1 - AASD001 - <NULL> - 14 - 12

2 - ZRFG789 - Joe Bloggs - 10 - 8

3 - YERF777 - Mary Blyge - 0 - 0 
```

Missing Customer Name 计算 Missing Customer Name 标记为 TRUE 的事务的总记录（历史）。`MissNameFixed 也是如此。

1.  记录 1 之前有 14 个缺少客户名称标志和 12 个 MissNameCustNameOK 标志，但仍然缺少客户名称。

2.  记录 2 之前有 10 个缺少客户名称标志和 8 个 MissNameCustNameOK 标志，并且当前有一个客户名称。

3.  记录 3 从未有任何缺失的客户名称标志，因此没有 MissNameCustNameOK 标志，并且当前有一个名称。

实现这些“dcount”样式的列最有效（对 SQL Server 的压力最快且压力最小）是什么。在 Access 中尝试 dcount 列非常慢 9（见下文），就像在 Access 中使用 DAO 记录集一样。

`SELECT *, dcount("RecordID","tblRecordsHistorical","Ref=" & Ref & " AND CustName is null) as CountofPrevMissCustName, dcount("RecordID","tblRecordsHistorical","Ref=" & Ref & " AND CustName is not null) as CountofPrevMissCustNameOK from tblRecords`

理想情况下，我希望能够创建某种视图，我可以加载该视图，然后用于对表格进行批量更新。

我只会处理最新一批的 tblRecords，所以一旦 CountOf... 物理列更新了一次，它们就不需要再更新了。

谢谢

# html - Bootstrap CSS表格行高，下拉按钮太大

> ID：11340737
> 
> 赞同：1
> 
> 时间：2012-07-05T08:43:14.707
> 
> 标签：html, css, twitter-bootstrap

我有一个 Bootstrap 表，当我使用按钮下拉菜单时，行数太高。是否有一些 CSS 可以用来阻止这种情况的发生？

我注意到带有普通按钮的 Bootstrap 表格并不是 100% 完美的：http: [//twitter.github.com/bootstrap/base-css.html#tables](http://twitter.github.com/bootstrap/base-css.html#tables)但它们比我的下拉按钮更好。

这是一个小提琴：http: [//jsfiddle.net/uEMtf/](http://jsfiddle.net/uEMtf/)

这是HTML：

```
<!DOCTYPE html>
<html lang="en">
<head>
    <title>Test Page</title>
</head>
<body>
 <table class="table table-bordered table-striped">
    <tbody>
        <tr><td>some stuff</td><td>some more stuff</td></tr>
        <tr>
            <td>here's something</td>
            <td><div class="btn-toolbar"><div class="btn-group"> <button class="btn dropdown-toggle" data-toggle="dropdown">Options<span class="caret"></span></button>
                        <ul class="dropdown-menu"> <li><a href="del"> Action 1</a></li>
                            <li><a href="details"> Action 2</a></li>
                            <li><a href="edit"> Action 2</a></li></ul></div></div>
                        </ul>
                    </div>
                </div>
            </td>
        </tr>
    <tr>
            <td>here's something</td>
            <td><button class="btn" href="#">Default</button></td>
                    </tr>
        <tr>
            <td>another row</td>
            <td>with more stuff</td>
        </tr>
    </tbody>
</table>
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
<script type="text/javascript" src="bootstrap.js"></script>
</body>
</html>​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T09:31:41.203

删除类类或在类下方`.btn-toolbar`的 css 代码中的某处定义边距顶部和底部零`.btn-toolbar`

工作小提琴：http: [//jsfiddle.net/surendraVsingh/uEMtf/1/](http://jsfiddle.net/surendraVsingh/uEMtf/1/)

# c# - 来自另一个对话框的 Sharepoint 模态对话框

> ID：11340738
> 
> 赞同：2
> 
> 时间：2012-07-05T08:43:22.023
> 
> 标签：c#, asp.net, html, sharepoint, sharepoint-2010

当用户单击我的按钮时，会出现一个 SharePoint 模式对话框。弹出窗口向用户显示确认消息。这已经在起作用了。

现在我想要以下内容：当用户单击“是”按钮时，第一个弹出窗口关闭并打开一个新的模式对话框。

这可能吗？如何？或者我可以在他已经打开时动态调整对话框的大小吗？

这是我打开对话框的方法：

```
function OpenPopup() {
    var options = SP.UI.$create_DialogOptions();
    options.url = "popup.aspx";
    options.width = 230;
    options.height = 235;
    options.title = "";
    options.dialogReturnValueCallback = Function.createDelegate(null, CloseCallbackNew);
    SP.UI.ModalDialog.showModalDialog(options);
}

function OpenSecondPopup() {
    var options = SP.UI.$create_DialogOptions();
    options.url = "popup2.aspx";
    options.width = 630;
    options.height = 235;
    options.title = "";
    options.dialogReturnValueCallback = Function.createDelegate(null, CloseCallbackNew);
    SP.UI.ModalDialog.showModalDialog(options);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T10:44:39.910

是不是很简单

*   `CloseCallbackNew`创建一个名为的函数的副本`CloseCallbackNewSecond`
*   更改`OpenSecondPopup`以引用此新副本而不是原始副本
*   `OpenSecondPopup`在末尾添加一个调用`CloseCallbackNew`，引用对话结果，以便仅在用户单击 YES 时调用它

似乎这应该在第一个关闭时调用第二个弹出窗口。

# php - -jQuery 表单插件 - 处理多个目标/数据

> ID：11340740
> 
> 赞同：0
> 
> 时间：2012-07-05T08:43:22.833
> 
> 标签：php, javascript, jquery, forms

我正在使用[jQuery Form 插件](http://www.malsup.com/jquery/form)，但无法在其 API 中找到以下问题的解决方案：

`.ajaxForm`我想从数据库中检索 3 个或更多字段。每个字段的内容应该写在 3 个匹配的元素上`index.php`。我可以通过使用获取和编写单个字段

```
target: '#element1' 
```

在我的 javascript 文件中并使用

```
echo $content ; 
```

在匹配的 php 脚本中。

那么如何在单个脚本中返回更多数据？我的想法是返回一个数组，但我不知道如何定位不同的元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T12:27:50.917

嗯，再一次，我想通了。

因此，如果任何时候有人试图：

**用数据库内容填充 HTML 表单而不刷新页面**

这是如何完成的：

您将需要以下内容：

1.  带有您要填写的表单的[html](http://pastebin.com/CyLfBJBv)
2.  从数据库中获取数据的[PHP](http://pastebin.com/4B0wktqk)脚本
3.  处理两者的[jQuery脚本](http://pastebin.com/TXqAEJdn)

我希望我没有错过任何东西，在这之后我很头疼。随意问。

# c++ - 将stderr从一个进程写入另一个进程c ++ / unix

> ID：11340741
> 
> 赞同：0
> 
> 时间：2012-07-05T08:43:23.490
> 
> 标签：c++, unix, communication, distributed-computing

我有一个应用程序，其中父进程通过分布式场系统（如 lsf/vnc ）启动作业。现在我想要的是，只要任何作业启动在其各自的日志中报告任何错误，错误应该被重定向到父进程的主标准输出屏幕。这样就不需要单独监控每个作业的日志。我从未在我的代码中使用过管道/信号量，但如果需要我可以学习。

请提出一些有效的解决方案。我在 Linux/Solaris 平台上工作。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T09:23:53.510

根据您启动子流程的方式，有不同的机制如何设置它们的标准句柄。

通常，您必须将其 stderr 句柄设置为与您的 stdout 句柄相同。

请记住，这与您提到的“日志”无关；这是关于你的主题所说的（重定向stderr）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T20:17:37.893

您可能应该使用 dup2() 库调用，以便将子进程中的 STDERR 复制到所需的文件描述符，例如复制到任何其他描述符的 STDOUT，它可以在父进程之前打开并在 fork( ）。尝试阅读“dup2”调用的 manula 页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T16:16:40.743

如果您希望子项的标准错误与父项的标准输出相同，那么您可以简单地启动父项，并将其标准错误绑定到其标准输出。如果`cmd`是启动父级的命令，请尝试：

```
$ cmd 2>&1 
```

# smarty - 在 Prestashop 的翻译字符串中传递一个变量

> ID：11340742
> 
> 赞同：2
> 
> 时间：2012-07-05T08:43:24.643
> 
> 标签：smarty, translation, prestashop

我需要在 Prestashop 中传递一个带有翻译字符串的变量。在后端可以这样做

```
sprintf($this->l('The number is %1$d'), $number); 
```

但是我需要在使用 SMARTY 时在前端执行此操作？有人帮我吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T10:12:03.720

像这样的东西：

```
{l s='The number is %1$d' sprintf=$number} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-12-28T11:07:18.273

1 - 在 PrestShop v1.7.4 上使用@skiplecariboo 回答`{l s='The number is %1$d' sprintf=$number}`我得到：

> 可捕获的致命错误：传递给 PrestaShopBundle\Translation\TranslatorComponent::trans() 的参数 2 必须是数组类型，给定字符串，在第 210 行的 /vagrant/httpdocs/config/smartyfront.config.inc.php 中调用并定义

2 - 使用[官方 3rd 方模块翻译方法](https://devdocs.prestashop.com/1.7/modules/creation/module-translation/) `{l s='The number is %1$d' sprintf=$number mod='my_module'}`，我得到同样的错误：

> 可捕获的致命错误：传递给 PrestaShopBundle\Translation\TranslatorComponent::trans() 的参数 2 必须是数组类型，给定字符串，在第 210 行的 /vagrant/httpdocs/config/smartyfront.config.inc.php 中调用并定义

3 - 使用[官方原生模块翻译方法](https://devdocs.prestashop.com/1.7/development/native-module-translation/) `{l s='The number is %1$d' sprintf=$number d='Modules.my_module'}`，我得到：

> 无法翻译 module:my_module/my_module.tpl 中的“The number is %1$d”。sprintf() 参数应该是一个数组。

所以，对我来说，解决方案是将`$number`变量设置为数组：

`{l s='The number is %1$d' sprintf=[$number] mod='my_module'}`

注意：`%1$d`标志是十进制的，对于一个字符串，使用`%1$s`：（[来源](https://en.wikipedia.org/wiki/Printf_format_string#Type_field)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-13T12:32:35.600

这就是您可以在翻译后的字符串中传递变量的方式

```
{l s='Comment: # %id%' mod='ayalinecomments' sprintf=['%id%' => $comment.id_ayalinecomments_comment]} 
```

prestashop 将用我的变量 $comment.id_ayalinecomments_comment 替换 %id%

泰

# java - Java 与 Jython，优雅的解决路径问题的方法？

> ID：11340743
> 
> 赞同：3
> 
> 时间：2012-07-05T08:43:26.047
> 
> 标签：java, import, jython, sys.path

我有一段 Java 代码，使用 Jython 调用一些 Python 库，这个库依赖于外部 Jython 经典库，如`re`正则表达式等，所以我有这种代码：

```
 PythonInterpreter interpreter = new PythonInterpreter(null, new PySystemState()); 
    PySystemState sys = Py.getSystemState(); 

    // below: so that my own library find necessary 'batteries included' Python libs
    sys.path.append(new PyString("C:/jython2.5.2/Lib")); // (path1)
    // below: i put my own Python library inside the Java package for clarity
    // and be able to package everything in jar, well, maybe is it no a good idea?
    // also i am wondering, because myfile.py remain inside /src subdirectories 
    // while after compiling Eclipse will put most in /bin subidrectories but not the *.py files
    // thus doing some:
    //    MyJythonFactory..class.getProtectionDomain().getCodeSource().getLocation().toString() 
    // will not help to rebuild the ..myJavaProject/src/my/domain/mypackage
    sys.path.append(new PyString("D:/eclipseWorkspace/myJavaProject/src/my/domain/mypackage")); (path2)

    interpreter.exec("from mylib import myfunc"); //(A)
    PyObject myPyFunction = interpreter.get("myfunc"); 
```

顺便说一句，我不喜欢我需要更改和硬编码路径`(path1)`和`(path2)`

您是否看到避免这种情况并添加一些“whereami”自动检测路径功能（至少对于`(path2)`）的优雅方法？

看起来我需要 (path1) 和 (path2) => 以便 (A) 工作！

我还可以将我的问题重新表述为没有任何**ImportError: No module named myModule**或如何避免硬编码之类的优雅方式：

```
 PySystemState sys = Py.getSystemState(); 
 sys.path.append("where/my/python/libs/live/while/they/are/at/the/same/place/as/my/current/java/class") 
```

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-25T11:02:25.290

确保您的项目类路径中`jython-standalone.jar`没有，因为jar 中有 Python Lib，因此您不需要将其附加到 sys.path。`jython.jar``jython-standalone.jar`

如果您使用的是 Maven，则可以将其添加到`pom.xml`：

```
<dependency>
    <groupId>org.python</groupId>
    <artifactId>jython-standalone</artifactId>
    <version>2.7.0</version>
</dependency> 
```

[或者你可以在这里](http://mvnrepository.com/artifact/org.python/jython-standalone)下载 jar 。

对于你自己的 python 模块把它放在 java 项目类路径中，Jython 使用 java classplath 作为`__pyclasspath__`，所以你避免硬编码。

# objective-c - 在 QLPreviewController 中读取触摸事件

> ID：11340748
> 
> 赞同：2
> 
> 时间：2012-07-05T08:43:48.640
> 
> 标签：objective-c, ios, events, uigesturerecognizer, quicklook

我有一个 QuickLook 视图，可以在其中查看我的一些应用程序的文档。它工作正常，但我在再次关闭视图时遇到了麻烦。如何创建可以检测用户何时想要关闭视图的触摸事件/手势识别器？

我尝试了以下操作，但在测试时似乎没有触发任何事件。

```
/------------------------ [ TouchPreviewController.h ]---------------------------
#import <Quicklook/Quicklook.h>

@interface TouchPreviewController : QLPreviewController

@end

//------------------------ [ TouchPreviewController.m ]---------------------------
#import "TouchPreviewController.h"

@implementation TouchPreviewController

- (id)init:(CGRect)aRect {
    if (self = [super init]) {
        // We set it here directly for convenience
        // As by default for a UIImageView it is set to NO
        UITapGestureRecognizer *singleFingerDTap = [[UITapGestureRecognizer alloc]
                                                initWithTarget:self action:@selector(handleSingleDoubleTap:)];
        singleFingerDTap.numberOfTapsRequired = 2;
        [self.view addGestureRecognizer:singleFingerDTap];
        [self.view setUserInteractionEnabled:YES];
        [self.view setMultipleTouchEnabled:YES];
        //[singleFingerDTap release];
    }
    return self;
}

- (IBAction)handleSingleDoubleTap:(UIGestureRecognizer *) sender {
    CGPoint tapPoint = [sender locationInView:sender.view.superview];
    [UIView beginAnimations:nil context:NULL];
    sender.view.center = tapPoint;
    [UIView commitAnimations];

    NSLog(@"TouchPreviewController tap!" ) ;
}

// I also tried adding this
- (BOOL)gestureRecognizer:(UIGestureRecognizer *) gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer*) otherGestureRecognizer {
    return YES;
}

@end 
```

编辑：为澄清起见，这就是我实例化控制器的方式：

```
documents = [[NSArray alloc] initWithObjects: filename , nil ] ;

preview = [[TouchPreviewController alloc] init];
preview.dataSource = self;
preview.delegate = self;

//set the frame from the parent view
CGFloat w= backgroundViewHolder.frame.size.width; 
CGFloat h= backgroundViewHolder.frame.size.height;
preview.view.frame = CGRectMake(0, 0,w, h);

//refresh the preview controller
[preview reloadData];
[[preview view] setNeedsLayout];
[[preview view] setNeedsDisplay];
[preview refreshCurrentPreviewItem];

//add it  
[quickLookView addSubview:preview.view]; 
```

另外，我已经将回调方法定义为：

```
- (NSInteger) numberOfPreviewItemsInPreviewController: (QLPreviewController *) controller
{
    return [documents count];
}

- (id <QLPreviewItem>) previewController: (QLPreviewController *) controller previewItemAtIndex: (NSInteger) index
{
    return [NSURL fileURLWithPath:[documents objectAtIndex:index]];
} 
```

Edit2：我注意到一件事。如果我尝试做出滑动手势，我会收到以下消息。这可以阐明什么是错误/缺失的？

> 由于手势识别器未激活，因此忽略对 [UIPanGestureRecognizer setTranslation:inView:] 的调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T03:39:37.610

我认为您的示例代码不完整。目前尚不清楚您如何实例化 TouchPreviewController（故事板、nib 文件或 loadView。）

我从来没有使用过这门课，所以我可以在左外野出路。

如果您已经在父 viewController 中实例化了一个 UITapGestureRecognizer，它会吸收点击事件并且它们不会传递给您的 TouchPreviewController。

我将通过将 UITapGestureRecognizer 附加到父 viewController 并在那里处理 QLPreviewController 的呈现和卸载来以不同的方式实现视图层次结构。

我认为您可能不必通过从 ni​​b 文件实例化 viewController 来继承 QLPreviewController。

当您的父 viewController 的 UITapGestureRecognizer 收到事件时，您可以将 QLPreviewController 推送到导航堆栈上，或者在完成后将其从导航堆栈中弹出。

希望这个对你有帮助。

# c# - 删除 HtmlAgilityPack 中无用的 TextNode

> ID：11340750
> 
> 赞同：5
> 
> 时间：2012-07-05T08:43:59.183
> 
> 标签：c#, web-scraping, html-agility-pack

我正在使用 HtmlAgilityPack 抓取许多网站。问题是它似乎坚持在大多数地方插入TextNodes，这些地方要么是空的，要么只包含大量的\n、空格和\r。

当我计算 childnodes 时，它们往往会给我带来问题，因为 firebug 不会显示它们，但 HtmlAgilityPack 会。

有没有办法告诉 HtmlAgilityPack 停止这样做，或者至少清除这些文本节点？（不过我想保留有用的）。当我们在这里时，评论和脚本标签也是如此。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-09-03T16:50:08.810

You can use the following extension method:

```
static class HtmlNodeExtensions
{
    public static List<HtmlNode> GetChildNodesDiscardingTextOnes(this HtmlNode node)
    {
        return node.ChildNodes.Where(n => n.NodeType != HtmlNodeType.Text).ToList();
    }
} 
```

And call it like this:

```
List<HtmlNode> nodes = someNode.GetChildNodesDiscardingTextOnes(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T09:12:04.427

在使用某些 LINQ 过滤掉不需要的节点的节点上创建对“子”集合（或类似集合）进行操作的扩展方法。然后，当您遍历树时，请执行以下操作：

```
myNode.Children.FilterNodes().ForEach(x => {}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T08:55:40.650

两个节点之间的“无空白”和“一些空白”之间存在差异。所以仍然需要全空白文本节点并且很重要。

在开始“真正的抓取”之前，您不能预处理 html 并删除所有不需要的节点吗？

另请参阅[此答案](https://stackoverflow.com/a/1445129/121309)以了解“如何删除”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-24T01:41:27.933

我正在寻找更好的答案。这是我目前关于子节点（如表格行和表格单元格）的方法。节点由它们的名称标识，`TR, TH, TD`所以我`#text`每次都去掉。

```
List<HtmlNode> rows = table.ChildNodes.Where(w => w.Name != "#text").ToList(); 
```

当然，这很乏味且有效，并且可以通过扩展来改进。

# ruby - 使用 Ruby 的 GnuPlot (rgplot) 绘图时如何设置线条颜色？

> ID：11340752
> 
> 赞同：0
> 
> 时间：2012-07-05T08:44:02.553
> 
> 标签：ruby, gnuplot

默认线条颜色是一些病态的黄色，我想将其更改为黑色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-23T02:08:02.043

尝试这样的事情，假设您的数据集变量（x，y，z）已经定义

```
::Gnuplot.open do |gp|
  ::Gnuplot::Plot.new(gp) do |plot|
    plot.data << ::Gnuplot::DataSet.new([x, y, z]) do |ds|
      ds.with = 'errorb lt rgb "black"'
    end
  end
end 
```

指定颜色的线还指定您要使用误差线进行绘图（对于 z 变量）。它也可以被格式化为：

```
ds.with = "errorb lt rgb \"black\"" 
```

当然，您可以删除“errorb”并绘制一个二变量 (x,y) 数据集。

顺便说一句，要查看可用的颜色，请键入

```
show colournames 
```

在 gnuplot 环境中的终端中。尝试[http://gnuplot.sourceforge.net/docs_4.6/gnuplot.pdf](http://gnuplot.sourceforge.net/docs_4.6/gnuplot.pdf)获取更多文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T09:09:26.413

我假设你有 GnuPlot 4.x 对吗？因为据我所知，颜色选项在以前的版本中不起作用（如果我错了，请纠正我）。

那么现在为你的答案。检查[一下](https://stackoverflow.com/questions/2075283/choosing-line-type-and-color-in-gnuplot-4-0)以查看语法以设置线条的颜色（您需要`linecolor rgb "red"`我相信的部分）。现在您可以`set`像这样将 Ruby 包装器中的命令传递给 GnuPlot：

```
Gnuplot.open do |gp|
   Gnuplot::Plot.new(gp) do |plot|
      plot.set("style", "line 1 lt 1 lw 3 pt 3 linecolor rgb \"red\"")
   end
end 
```

自己看看（我相信它应该通过浏览代码来帮助你）代码在[github 上](https://github.com/rdp/ruby_gnuplot/blob/master/lib/gnuplot.rb#L148)。我希望我对你有所帮助。

# android - AlertDialog 不适用于 ListView

> ID：11340757
> 
> 赞同：0
> 
> 时间：2012-07-05T08:44:19.127
> 
> 标签：android, android-listview, android-alertdialog

`enter code here`我在 ListView 的 onItemClick 事件上创建了一个 AlertDialog 但它给出了错误

```
Failed to handle callback; interface not implemented, 
callback:android.widget.AbsListView$1@41b28670 
```

我的代码在这里：

```
public void onItemClick(AdapterView<?> parent, View view, int position,long id) {
    alertDialog = new AlertDialog.Builder(RemoteDeviceActivity.this).create(); //alertDialog is global AlertDialog variable
    alertDialog.setTitle("Version Mismatch");
    alertDialog.setMessage("My Message");
    alertDialog.setButton("OK", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {                 
            alertDialog.dismiss();
        } 
    });
    alertDialog.show();
} 
```

这是我的日志：

```
 07-05 14:48:44.402: E/Handler(6217): Failed to handle callback; interface not          implemented, callback:android.widget.AbsListView$1@41b79c38
    07-05 14:48:44.402: E/Handler(6217):
 android.view.WindowManager$BadTokenException: Unable to add window -- token android.app.LocalActivityManager$LocalActivityRecord@41a668d0 is not valid; 
is your activity running?
    07-05 14:48:44.402: E/Handler(6217):    at android.view.ViewRootImpl.setView(ViewRootImpl.java:570)
    07-05 14:48:44.402: E/Handler(6217):    at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:406)
    07-05 14:48:44.402: E/Handler(6217):    at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:320)
    07-05 14:48:44.402: E/Handler(6217):    at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:152)
    07-05 14:48:44.402: E/Handler(6217):    at android.view.Window$LocalWindowManager.addView(Window.java:557)
    07-05 14:48:44.402: E/Handler(6217):    at android.app.Dialog.show(Dialog.java:301)
    07-05 14:48:44.402: E/Handler(6217):    at android.app.AlertDialog$Builder.show(AlertDialog.java:932)
    07-05 14:48:44.402: E/Handler(6217):    at com.np.obelix.RemoteDeviceActivity.onItemClick(RemoteDeviceActivity.java:208)
    07-05 14:48:44.402: E/Handler(6217):    at android.widget.AdapterView.performItemClick(AdapterView.java:292)
    07-05 14:48:44.402: E/Handler(6217):    at android.widget.AbsListView.performItemClick(AbsListView.java:1099)
    07-05 14:48:44.402: E/Handler(6217):    at android.widget.ListView.performItemClick(ListView.java:4758)
    07-05 14:48:44.402: E/Handler(6217):    at android.widget.AbsListView$PerformClick.run(AbsListView.java:2556)
    07-05 14:48:44.402: E/Handler(6217):    at android.widget.AbsListView$1.run(AbsListView.java:3223)
    07-05 14:48:44.402: E/Handler(6217):    at android.os.Handler.handleCallback(Handler.java:607)
    07-05 14:48:44.402: E/Handler(6217):    at android.os.Handler.dispatchMessage(Handler.java:92)
    07-05 14:48:44.402: E/Handler(6217):    at android.os.Looper.loop(Looper.java:154)
    07-05 14:48:44.402: E/Handler(6217):    at android.app.ActivityThread.main(ActivityThread.java:4974)
    07-05 14:48:44.402: E/Handler(6217):    at java.lang.reflect.Method.invokeNative(Native Method)
    07-05 14:48:44.402: E/Handler(6217):    at java.lang.reflect.Method.invoke(Method.java:511)
    07-05 14:48:44.402: E/Handler(6217):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
    07-05 14:48:44.402: E/Handler(6217):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
    07-05 14:48:44.402: E/Handler(6217):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T08:58:19.713

Azmat 我认为你不需要使用 create

```
alertDialog = new AlertDialog.Builder(RemoteDeviceActivity.this).create();
i used this code and is working for me try this 

    AlertDialog.Builder builder = new AlertDialog.Builder(Normal_Score.this);

            builder.setMessage(" Are you sure you want to quit? " + 
                    "  You will loose data if you quit without saving "
                        +" Do You want to save data before you quit ?");
             builder.setCancelable(false)
                .setPositiveButton("Yes", new DialogInterface.OnClickListener() {
                             public void onClick(DialogInterface dialog, int id) {

                                 submit();
                                 Intent i = new Intent(Normal_Score.this, 
                                         Playaroud.class);
                                i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                                // i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                                finish();
                                startActivity(i);
                                       }
                                   })
            .setNegativeButton("No", new DialogInterface.OnClickListener() {
                             public void onClick(DialogInterface dialog, int id) {
                                            dialog.cancel();

                                            Intent i = new Intent(Normal_Score.this, 
                                                     Playaroud.class);
                                            i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

                                            finish(); 
                                            startActivity(i); 
                             }
                                   }).show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T08:59:10.013

试试这个代码，

```
 listView.setOnItemClickListener(new OnItemClickListener() {

                public void onItemClick(AdapterView<?> listView, View view,
                        int pos, long id) {
                    // TextView textView = (TextView) view.findViewById(
                    // android.R.id.text1 );
                    // toast( (String) textView.getText() );
                    callAlertDialog();
                }
            });

protected void callAlertDialog() {
        // TODO Auto-generated method stub
        AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(
                ListViewActivity.this);

        // set title
        alertDialogBuilder.setTitle("Your Title");

        // set dialog message
        alertDialogBuilder
                .setMessage("Click yes to exit!")
                .setCancelable(false)
                .setPositiveButton("Yes",
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog, int id) {
                                // if this button is clicked, close
                                // current activity
                                ListViewActivity.this.finish();
                            }
                        })
                .setNegativeButton("No", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int id) {
                        // if this button is clicked, just close
                        // the dialog box and do nothing
                        dialog.cancel();
                    }
                });

        // create alert dialog
        AlertDialog alertDialog = alertDialogBuilder.create();

        // show it
        alertDialog.show();
    } 
```

# python - Python GTK3 exec bash 命令并逐行显示输出

> ID：11340759
> 
> 赞同：1
> 
> 时间：2012-07-05T08:44:25.337
> 
> 标签：python, terminal, gtk3

我是 Python 和 Gtk 的新手，我正在尝试制作一个小应用程序，它将执行 Bash 命令并逐行显示输出“实时”，就像通过突触安装某些应用程序时它显示在类似终端的小部件安装细节中一样过程。

我是否为此使用 Vte.Terminal 或 subprocess.Popen？以及如何显示输出？我在看 Gtk.TextView() 但我不确定如何使用它。

```
p = subprocess.Popen('locate zend', shell=True, stdout=subprocess.PIPE,stderr=subprocess.STDOUT)
for line in p.stdout.readlines():
    print line,  
retval = p.wait() 
```

简而言之，我想执行 shell 命令并显示它在常规终端中显示的确切输出（行、颜色、粗体文本......）。不知何故 Vte.Terminal 对我来说很有意义，因为 TextView 将显示常规文本。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:36:38.673

使用文本视图。以下是一些解释如何的链接：

[PyGTK 常见问题解答：如何在不冻结 GUI 的情况下将外部进程的输出发送到 gtk.TextView？](http://faq.pygtk.org/index.py?req=show&file=faq14.023.htp) [博客文章：在 gtk.TextView 上重定向标准输出](https://pygabriel.wordpress.com/2009/07/27/redirecting-the-stdout-on-a-gtk-textview/)

# python - 默认窗口颜色 Tkinter 和十六进制颜色代码

> ID：11340765
> 
> 赞同：18
> 
> 时间：2012-07-05T08:44:47.763
> 
> 标签：python, colors, tkinter, ttk

当您简单地创建一个窗口时，我想知道 Tkinter 中的默认窗口颜色：

```
root = Tk() 
```

如果有，是否可以将小部件设置为相同颜色或使用十六进制颜色代码？（使用 RGB）

我为“正常”窗口找到的颜色代码是：

R = 240，G = 240，B = 237

谢谢。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-07-05T10:30:10.130

不确定您正在寻找什么，但这会起作用吗？

```
import Tkinter

mycolor = '#%02x%02x%02x' % (64, 204, 208)  # set your favourite rgb color
mycolor2 = '#40E0D0'  # or use hex if you prefer 
root = Tkinter.Tk()
root.configure(bg=mycolor)
Tkinter.Button(root, text="Press me!", bg=mycolor, fg='black',
               activebackground='black', activeforeground=mycolor2).pack()
root.mainloop() 
```

如果您只想找到窗口的当前值，并设置小部件以使用它，`cget`可能就是您想要的：

```
import Tkinter

root = Tkinter.Tk()
defaultbg = root.cget('bg')
Tkinter.Button(root,text="Press me!", bg=defaultbg).pack()
root.mainloop() 
```

如果要为新的小部件设置默认背景颜色，可以使用以下`tk_setPalette(self, *args, **kw)`方法：

```
root.tk_setPalette(background='#40E0D0', foreground='black',
               activeBackground='black', activeForeground=mycolor2)
Tkinter.Button(root, text="Press me!").pack() 
```

然后，您的小部件将默认具有此背景颜色，而无需在小部件参数中进行设置。内联帮助功能提供了很多有用的信息`import Tkinter; help(Tkinter.Tk)`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-08-17T17:14:08.837

我发现的 Tkinter 窗口的默认颜色是 #F0F0F0

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-06-13T09:36:35.277

我试图将按钮的颜色设置为系统默认值。这是我遇到的最好的解决方案：

```
root.configure(background='SystemButtonFace') 
```

来源： [如何设置默认背景颜色 tkinter](https://stackoverflow.com/a/53460702/10346152%5D%5B1%5D)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-03-19T20:06:59.937

rudivonstaden 的回答让我找到了解决问题的方法，尽管由于某种原因`root.cget("bg")`失败了，因为`"bg"`它是一个未知的颜色名称。

但是，知道一个小部件有一个包含其属性的字典意味着`root["bg"]`返回小部件的背景颜色。

因此，如果您创建一个名为 myWindow 的窗口而不覆盖系统的默认背景颜色，那么`myWindow["bg"]`它就是窗口的默认背景颜色，可在该窗口中创建无框文本字段时使用。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-05-27T04:17:08.350

不幸的是，这个列表不是按色调排列的，而是按字母顺序排列的。但是，它确实包含 Tkinter 使用的所有颜色及其相应的十六进制代码（我在[这个站点上](http://www.tcl.tk/man/tcl8.5/TkCmd/colors.htm)找到了颜色列表，这似乎是某种 Tkinter 手册，然后我使用 Python 将它们列出的 RGB 值转换为十六进制）。希望这对某人有帮助！

```
 {hex: '#F0F8FF', name: 'AliceBlue'},
        {hex: '#FAEBD7', name: 'AntiqueWhite'},
        {hex: '#FFEFDB', name: 'AntiqueWhite1'},
        {hex: '#EEDFCC', name: 'AntiqueWhite2'},
        {hex: '#CDC0B0', name: 'AntiqueWhite3'},
        {hex: '#8B8378', name: 'AntiqueWhite4'},
        {hex: '#00FFFF', name: 'agua'},
        {hex: '#7FFFD4', name: 'aquamarine'},
        {hex: '#7FFFD4', name: 'aquamarine1'},
        {hex: '#76EEC6', name: 'aquamarine2'},
        {hex: '#66CDAA', name: 'aquamarine3'},
        {hex: '#458B74', name: 'aquamarine4'},
        {hex: '#F0FFFF', name: 'azure'},
        {hex: '#F0FFFF', name: 'azure1'},
        {hex: '#E0EEEE', name: 'azure2'},
        {hex: '#C1CDCD', name: 'azure3'},
        {hex: '#838B8B', name: 'azure4'},
        {hex: '#F5F5DC', name: 'beige'},
        {hex: '#FFE4C4', name: 'bisque'},
        {hex: '#FFE4C4', name: 'bisque1'},
        {hex: '#EED5B7', name: 'bisque2'},
        {hex: '#CDB79E', name: 'bisque3'},
        {hex: '#8B7D6B', name: 'bisque4'},
        {hex: '#000000', name: 'black'},
        {hex: '#FFEBCD', name: 'BlanchedAlmond'},
        {hex: '#0000FF', name: 'blue'},
        {hex: '#0000FF', name: 'blue1'},
        {hex: '#0000EE', name: 'blue2'},
        {hex: '#0000CD', name: 'blue3'},
        {hex: '#00008B', name: 'blue4'},
        {hex: '#8A2BE2', name: 'BlueViolet'},
        {hex: '#A52A2A', name: 'brown'},
        {hex: '#FF4040', name: 'brown1'},
        {hex: '#EE3B3B', name: 'brown2'},
        {hex: '#CD3333', name: 'brown3'},
        {hex: '#8B2323', name: 'brown4'},
        {hex: '#DEB887', name: 'burlywood'},
        {hex: '#FFD39B', name: 'burlywood1'},
        {hex: '#EEC591', name: 'burlywood2'},
        {hex: '#CDAA7D', name: 'burlywood3'},
        {hex: '#8B7355', name: 'burlywood4'},
        {hex: '#5F9EA0', name: 'CadetBlue'},
        {hex: '#98F5FF', name: 'CadetBlue1'},
        {hex: '#8EE5EE', name: 'CadetBlue2'},
        {hex: '#7AC5CD', name: 'CadetBlue3'},
        {hex: '#53868B', name: 'CadetBlue4'},
        {hex: '#7FFF00', name: 'chartreuse'},
        {hex: '#7FFF00', name: 'chartreuse1'},
        {hex: '#76EE00', name: 'chartreuse2'},
        {hex: '#66CD00', name: 'chartreuse3'},
        {hex: '#458B00', name: 'chartreuse4'},
        {hex: '#D2691E', name: 'chocolate'},
        {hex: '#FF7F24', name: 'chocolate1'},
        {hex: '#EE7621', name: 'chocolate2'},
        {hex: '#CD661D', name: 'chocolate3'},
        {hex: '#8B4513', name: 'chocolate4'},
        {hex: '#FF7F50', name: 'coral'},
        {hex: '#FF7256', name: 'coral1'},
        {hex: '#EE6A50', name: 'coral2'},
        {hex: '#CD5B45', name: 'coral3'},
        {hex: '#8B3E2F', name: 'coral4'},
        {hex: '#6495ED', name: 'CornflowerBlue'},
        {hex: '#FFF8DC', name: 'cornsilk'},
        {hex: '#FFF8DC', name: 'cornsilk1'},
        {hex: '#EEE8CD', name: 'cornsilk2'},
        {hex: '#CDC8B1', name: 'cornsilk3'},
        {hex: '#8B8878', name: 'cornsilk4'},
        {hex: '#DC143C', name: 'crymson'},
        {hex: '#00FFFF', name: 'cyan'},
        {hex: '#00FFFF', name: 'cyan1'},
        {hex: '#00EEEE', name: 'cyan2'},
        {hex: '#00CDCD', name: 'cyan3'},
        {hex: '#008B8B', name: 'cyan4'},
        {hex: '#00008B', name: 'DarkBlue'},
        {hex: '#008B8B', name: 'DarkCyan'},
        {hex: '#B8860B', name: 'DarkGoldenrod'},
        {hex: '#FFB90F', name: 'DarkGoldenrod1'},
        {hex: '#EEAD0E', name: 'DarkGoldenrod2'},
        {hex: '#CD950C', name: 'DarkGoldenrod3'},
        {hex: '#8B6508', name: 'DarkGoldenrod4'},
        {hex: '#A9A9A9', name: 'DarkGray'},
        {hex: '#006400', name: 'DarkGreen'},
        {hex: '#A9A9A9', name: 'DarkGrey'},
        {hex: '#BDB76B', name: 'DarkKhaki'},
        {hex: '#8B008B', name: 'DarkMagenta'},
        {hex: '#556B2F', name: 'DarkOliveGreen'},
        {hex: '#CAFF70', name: 'DarkOliveGreen1'},
        {hex: '#BCEE68', name: 'DarkOliveGreen2'},
        {hex: '#A2CD5A', name: 'DarkOliveGreen3'},
        {hex: '#6E8B3D', name: 'DarkOliveGreen4'},
        {hex: '#FF8C00', name: 'DarkOrange'},
        {hex: '#FF7F00', name: 'DarkOrange1'},
        {hex: '#EE7600', name: 'DarkOrange2'},
        {hex: '#CD6600', name: 'DarkOrange3'},
        {hex: '#8B4500', name: 'DarkOrange4'},
        {hex: '#9932CC', name: 'DarkOrchid'},
        {hex: '#BF3EFF', name: 'DarkOrchid1'},
        {hex: '#B23AEE', name: 'DarkOrchid2'},
        {hex: '#9A32CD', name: 'DarkOrchid3'},
        {hex: '#68228B', name: 'DarkOrchid4'},
        {hex: '#8B0000', name: 'DarkRed'},
        {hex: '#E9967A', name: 'DarkSalmon'},
        {hex: '#8FBC8F', name: 'DarkSeaGreen'},
        {hex: '#C1FFC1', name: 'DarkSeaGreen1'},
        {hex: '#B4EEB4', name: 'DarkSeaGreen2'},
        {hex: '#9BCD9B', name: 'DarkSeaGreen3'},
        {hex: '#698B69', name: 'DarkSeaGreen4'},
        {hex: '#483D8B', name: 'DarkSlateBlue'},
        {hex: '#2F4F4F', name: 'DarkSlateGray'},
        {hex: '#97FFFF', name: 'DarkSlateGray1'},
        {hex: '#8DEEEE', name: 'DarkSlateGray2'},
        {hex: '#79CDCD', name: 'DarkSlateGray3'},
        {hex: '#528B8B', name: 'DarkSlateGray4'},
        {hex: '#2F4F4F', name: 'DarkSlateGrey'},
        {hex: '#00CED1', name: 'DarkTurquoise'},
        {hex: '#9400D3', name: 'DarkViolet'},
        {hex: '#FF1493', name: 'DeepPink'},
        {hex: '#FF1493', name: 'DeepPink1'},
        {hex: '#EE1289', name: 'DeepPink2'},
        {hex: '#CD1076', name: 'DeepPink3'},
        {hex: '#8B0A50', name: 'DeepPink4'},
        {hex: '#00BFFF', name: 'DeepSkyBlue'},
        {hex: '#00BFFF', name: 'DeepSkyBlue1'},
        {hex: '#00B2EE', name: 'DeepSkyBlue2'},
        {hex: '#009ACD', name: 'DeepSkyBlue3'},
        {hex: '#00688B', name: 'DeepSkyBlue4'},
        {hex: '#696969', name: 'DimGray'},
        {hex: '#696969', name: 'DimGrey'},
        {hex: '#1E90FF', name: 'dodger blue'},
        {hex: '#1E90FF', name: 'DodgerBlue'},
        {hex: '#1E90FF', name: 'DodgerBlue1'},
        {hex: '#1C86EE', name: 'DodgerBlue2'},
        {hex: '#1874CD', name: 'DodgerBlue3'},
        {hex: '#104E8B', name: 'DodgerBlue4'},
        {hex: '#B22222', name: 'firebrick'},
        {hex: '#FF3030', name: 'firebrick1'},
        {hex: '#EE2C2C', name: 'firebrick2'},
        {hex: '#CD2626', name: 'firebrick3'},
        {hex: '#8B1A1A', name: 'firebrick4'},
        {hex: '#FFFAF0', name: 'FloralWhite'},
        {hex: '#228B22', name: 'forest green'},
        {hex: '#228B22', name: 'ForestGreen'},
        {hex: '#FF00FF', name: 'fuchsia'},
        {hex: '#DCDCDC', name: 'gainsboro'},
        {hex: '#F8F8FF', name: 'GhostWhite'},
        {hex: '#FFD700', name: 'gold'},
        {hex: '#FFD700', name: 'gold1'},
        {hex: '#EEC900', name: 'gold2'},
        {hex: '#CDAD00', name: 'gold3'},
        {hex: '#8B7500', name: 'gold4'},
        {hex: '#DAA520', name: 'goldenrod'},
        {hex: '#FFC125', name: 'goldenrod1'},
        {hex: '#EEB422', name: 'goldenrod2'},
        {hex: '#CD9B1D', name: 'goldenrod3'},
        {hex: '#8B6914', name: 'goldenrod4'},
        {hex: '#00FF00', name: 'green'},
        {hex: '#00FF00', name: 'green1'},
        {hex: '#00EE00', name: 'green2'},
        {hex: '#00CD00', name: 'green3'},
        {hex: '#008B00', name: 'green4'},
        {hex: '#ADFF2F', name: 'GreenYellow'},
        {hex: '#BEBEBE', name: 'grey'},
        {hex: '#000000', name: 'grey0'},
        {hex: '#030303', name: 'grey1'},
        {hex: '#050505', name: 'grey2'},
        {hex: '#080808', name: 'grey3'},
        {hex: '#0A0A0A', name: 'grey4'},
        {hex: '#0D0D0D', name: 'grey5'},
        {hex: '#0F0F0F', name: 'grey6'},
        {hex: '#121212', name: 'grey7'},
        {hex: '#141414', name: 'grey8'},
        {hex: '#171717', name: 'grey9'},
        {hex: '#1A1A1A', name: 'grey10'},
        {hex: '#1C1C1C', name: 'grey11'},
        {hex: '#1F1F1F', name: 'grey12'},
        {hex: '#212121', name: 'grey13'},
        {hex: '#242424', name: 'grey14'},
        {hex: '#262626', name: 'grey15'},
        {hex: '#292929', name: 'grey16'},
        {hex: '#2B2B2B', name: 'grey17'},
        {hex: '#2E2E2E', name: 'grey18'},
        {hex: '#303030', name: 'grey19'},
        {hex: '#333333', name: 'grey20'},
        {hex: '#363636', name: 'grey21'},
        {hex: '#383838', name: 'grey22'},
        {hex: '#3B3B3B', name: 'grey23'},
        {hex: '#3D3D3D', name: 'grey24'},
        {hex: '#404040', name: 'grey25'},
        {hex: '#424242', name: 'grey26'},
        {hex: '#454545', name: 'grey27'},
        {hex: '#474747', name: 'grey28'},
        {hex: '#4A4A4A', name: 'grey29'},
        {hex: '#4D4D4D', name: 'grey30'},
        {hex: '#4F4F4F', name: 'grey31'},
        {hex: '#525252', name: 'grey32'},
        {hex: '#545454', name: 'grey33'},
        {hex: '#575757', name: 'grey34'},
        {hex: '#595959', name: 'grey35'},
        {hex: '#5C5C5C', name: 'grey36'},
        {hex: '#5E5E5E', name: 'grey37'},
        {hex: '#616161', name: 'grey38'},
        {hex: '#636363', name: 'grey39'},
        {hex: '#666666', name: 'grey40'},
        {hex: '#696969', name: 'grey41'},
        {hex: '#6B6B6B', name: 'grey42'},
        {hex: '#6E6E6E', name: 'grey43'},
        {hex: '#707070', name: 'grey44'},
        {hex: '#737373', name: 'grey45'},
        {hex: '#757575', name: 'grey46'},
        {hex: '#787878', name: 'grey47'},
        {hex: '#7A7A7A', name: 'grey48'},
        {hex: '#7D7D7D', name: 'grey49'},
        {hex: '#7F7F7F', name: 'grey50'},
        {hex: '#828282', name: 'grey51'},
        {hex: '#858585', name: 'grey52'},
        {hex: '#878787', name: 'grey53'},
        {hex: '#8A8A8A', name: 'grey54'},
        {hex: '#8C8C8C', name: 'grey55'},
        {hex: '#8F8F8F', name: 'grey56'},
        {hex: '#919191', name: 'grey57'},
        {hex: '#949494', name: 'grey58'},
        {hex: '#969696', name: 'grey59'},
        {hex: '#999999', name: 'grey60'},
        {hex: '#9C9C9C', name: 'grey61'},
        {hex: '#9E9E9E', name: 'grey62'},
        {hex: '#A1A1A1', name: 'grey63'},
        {hex: '#A3A3A3', name: 'grey64'},
        {hex: '#A6A6A6', name: 'grey65'},
        {hex: '#A8A8A8', name: 'grey66'},
        {hex: '#ABABAB', name: 'grey67'},
        {hex: '#ADADAD', name: 'grey68'},
        {hex: '#B0B0B0', name: 'grey69'},
        {hex: '#B3B3B3', name: 'grey70'},
        {hex: '#B5B5B5', name: 'grey71'},
        {hex: '#B8B8B8', name: 'grey72'},
        {hex: '#BABABA', name: 'grey73'},
        {hex: '#BDBDBD', name: 'grey74'},
        {hex: '#BFBFBF', name: 'grey75'},
        {hex: '#C2C2C2', name: 'grey76'},
        {hex: '#C4C4C4', name: 'grey77'},
        {hex: '#C7C7C7', name: 'grey78'},
        {hex: '#C9C9C9', name: 'grey79'},
        {hex: '#CCCCCC', name: 'grey80'},
        {hex: '#CFCFCF', name: 'grey81'},
        {hex: '#D1D1D1', name: 'grey82'},
        {hex: '#D4D4D4', name: 'grey83'},
        {hex: '#D6D6D6', name: 'grey84'},
        {hex: '#D9D9D9', name: 'grey85'},
        {hex: '#DBDBDB', name: 'grey86'},
        {hex: '#DEDEDE', name: 'grey87'},
        {hex: '#E0E0E0', name: 'grey88'},
        {hex: '#E3E3E3', name: 'grey89'},
        {hex: '#E5E5E5', name: 'grey90'},
        {hex: '#E8E8E8', name: 'grey91'},
        {hex: '#EBEBEB', name: 'grey92'},
        {hex: '#EDEDED', name: 'grey93'},
        {hex: '#F0F0F0', name: 'grey94'},
        {hex: '#F2F2F2', name: 'grey95'},
        {hex: '#F5F5F5', name: 'grey96'},
        {hex: '#F7F7F7', name: 'grey97'},
        {hex: '#FAFAFA', name: 'grey98'},
        {hex: '#FCFCFC', name: 'grey99'},
        {hex: '#FFFFFF', name: 'grey100'},
        {hex: '#F0FFF0', name: 'honeydew'},
        {hex: '#F0FFF0', name: 'honeydew1'},
        {hex: '#E0EEE0', name: 'honeydew2'},
        {hex: '#C1CDC1', name: 'honeydew3'},
        {hex: '#838B83', name: 'honeydew4'},
        {hex: '#FF69B4', name: 'HotPink'},
        {hex: '#FF6EB4', name: 'HotPink1'},
        {hex: '#EE6AA7', name: 'HotPink2'},
        {hex: '#CD6090', name: 'HotPink3'},
        {hex: '#8B3A62', name: 'HotPink4'},
        {hex: '#CD5C5C', name: 'IndianRed'},
        {hex: '#FF6A6A', name: 'IndianRed1'},
        {hex: '#EE6363', name: 'IndianRed2'},
        {hex: '#CD5555', name: 'IndianRed3'},
        {hex: '#8B3A3A', name: 'IndianRed4'},
        {hex: '#4B0082', name: 'indigo'},
        {hex: '#FFFFF0', name: 'ivory'},
        {hex: '#FFFFF0', name: 'ivory1'},
        {hex: '#EEEEE0', name: 'ivory2'},
        {hex: '#CDCDC1', name: 'ivory3'},
        {hex: '#8B8B83', name: 'ivory4'},
        {hex: '#F0E68C', name: 'khaki'},
        {hex: '#FFF68F', name: 'khaki1'},
        {hex: '#EEE685', name: 'khaki2'},
        {hex: '#CDC673', name: 'khaki3'},
        {hex: '#8B864E', name: 'khaki4'},
        {hex: '#E6E6FA', name: 'lavender'},
        {hex: '#FFF0F5', name: 'LavenderBlush'},
        {hex: '#FFF0F5', name: 'LavenderBlush1'},
        {hex: '#EEE0E5', name: 'LavenderBlush2'},
        {hex: '#CDC1C5', name: 'LavenderBlush3'},
        {hex: '#8B8386', name: 'LavenderBlush4'},
        {hex: '#7CFC00', name: 'LawnGreen'},
        {hex: '#FFFACD', name: 'LemonChiffon'},
        {hex: '#FFFACD', name: 'LemonChiffon1'},
        {hex: '#EEE9BF', name: 'LemonChiffon2'},
        {hex: '#CDC9A5', name: 'LemonChiffon3'},
        {hex: '#8B8970', name: 'LemonChiffon4'},
        {hex: '#ADD8E6', name: 'LightBlue'},
        {hex: '#BFEFFF', name: 'LightBlue1'},
        {hex: '#B2DFEE', name: 'LightBlue2'},
        {hex: '#9AC0CD', name: 'LightBlue3'},
        {hex: '#68838B', name: 'LightBlue4'},
        {hex: '#F08080', name: 'LightCoral'},
        {hex: '#E0FFFF', name: 'LightCyan'},
        {hex: '#E0FFFF', name: 'LightCyan1'},
        {hex: '#D1EEEE', name: 'LightCyan2'},
        {hex: '#B4CDCD', name: 'LightCyan3'},
        {hex: '#7A8B8B', name: 'LightCyan4'},
        {hex: '#EEDD82', name: 'LightGoldenrod'},
        {hex: '#FFEC8B', name: 'LightGoldenrod1'},
        {hex: '#EEDC82', name: 'LightGoldenrod2'},
        {hex: '#CDBE70', name: 'LightGoldenrod3'},
        {hex: '#8B814C', name: 'LightGoldenrod4'},
        {hex: '#FAFAD2', name: 'LightGoldenrodYellow'},
        {hex: '#D3D3D3', name: 'LightGray'},
        {hex: '#90EE90', name: 'LightGreen'},
        {hex: '#D3D3D3', name: 'LightGrey'},
        {hex: '#FFB6C1', name: 'LightPink'},
        {hex: '#FFAEB9', name: 'LightPink1'},
        {hex: '#EEA2AD', name: 'LightPink2'},
        {hex: '#CD8C95', name: 'LightPink3'},
        {hex: '#8B5F65', name: 'LightPink4'},
        {hex: '#FFA07A', name: 'LightSalmon'},
        {hex: '#FFA07A', name: 'LightSalmon1'},
        {hex: '#EE9572', name: 'LightSalmon2'},
        {hex: '#CD8162', name: 'LightSalmon3'},
        {hex: '#8B5742', name: 'LightSalmon4'},
        {hex: '#20B2AA', name: 'LightSeaGreen'},
        {hex: '#87CEFA', name: 'LightSkyBlue'},
        {hex: '#B0E2FF', name: 'LightSkyBlue1'},
        {hex: '#A4D3EE', name: 'LightSkyBlue2'},
        {hex: '#8DB6CD', name: 'LightSkyBlue3'},
        {hex: '#607B8B', name: 'LightSkyBlue4'},
        {hex: '#8470FF', name: 'LightSlateBlue'},
        {hex: '#778899', name: 'LightSlateGray'},
        {hex: '#778899', name: 'LightSlateGrey'},
        {hex: '#B0C4DE', name: 'LightSteelBlue'},
        {hex: '#CAE1FF', name: 'LightSteelBlue1'},
        {hex: '#BCD2EE', name: 'LightSteelBlue2'},
        {hex: '#A2B5CD', name: 'LightSteelBlue3'},
        {hex: '#6E7B8B', name: 'LightSteelBlue4'},
        {hex: '#FFFFE0', name: 'LightYellow'},
        {hex: '#FFFFE0', name: 'LightYellow1'},
        {hex: '#EEEED1', name: 'LightYellow2'},
        {hex: '#CDCDB4', name: 'LightYellow3'},
        {hex: '#8B8B7A', name: 'LightYellow4'},
        {hex: '#00FF00', name: 'lime'},
        {hex: '#32CD32', name: 'LimeGreen'},
        {hex: '#FAF0E6', name: 'linen'},
        {hex: '#FF00FF', name: 'magenta'},
        {hex: '#FF00FF', name: 'magenta1'},
        {hex: '#EE00EE', name: 'magenta2'},
        {hex: '#CD00CD', name: 'magenta3'},
        {hex: '#8B008B', name: 'magenta4'},
        {hex: '#B03060', name: 'maroon'},
        {hex: '#FF34B3', name: 'maroon1'},
        {hex: '#EE30A7', name: 'maroon2'},
        {hex: '#CD2990', name: 'maroon3'},
        {hex: '#8B1C62', name: 'maroon4'},
        {hex: '#66CDAA', name: 'MediumAquamarine'},
        {hex: '#0000CD', name: 'MediumBlue'},
        {hex: '#BA55D3', name: 'MediumOrchid'},
        {hex: '#E066FF', name: 'MediumOrchid1'},
        {hex: '#D15FEE', name: 'MediumOrchid2'},
        {hex: '#B452CD', name: 'MediumOrchid3'},
        {hex: '#7A378B', name: 'MediumOrchid4'},
        {hex: '#9370DB', name: 'MediumPurple'},
        {hex: '#AB82FF', name: 'MediumPurple1'},
        {hex: '#9F79EE', name: 'MediumPurple2'},
        {hex: '#8968CD', name: 'MediumPurple3'},
        {hex: '#5D478B', name: 'MediumPurple4'},
        {hex: '#3CB371', name: 'MediumSeaGreen'},
        {hex: '#7B68EE', name: 'MediumSlateBlue'},
        {hex: '#00FA9A', name: 'MediumSpringGreen'},
        {hex: '#48D1CC', name: 'MediumTurquoise'},
        {hex: '#C71585', name: 'MediumVioletRed'},
        {hex: '#191970', name: 'midnight blue'},
        {hex: '#191970', name: 'MidnightBlue'},
        {hex: '#F5FFFA', name: 'MintCream'},
        {hex: '#FFE4E1', name: 'misty rose'},
        {hex: '#FFE4E1', name: 'MistyRose'},
        {hex: '#FFE4E1', name: 'MistyRose1'},
        {hex: '#EED5D2', name: 'MistyRose2'},
        {hex: '#CDB7B5', name: 'MistyRose3'},
        {hex: '#8B7D7B', name: 'MistyRose4'},
        {hex: '#FFE4B5', name: 'moccasin'},
        {hex: '#FFDEAD', name: 'NavajoWhite'},
        {hex: '#FFDEAD', name: 'NavajoWhite1'},
        {hex: '#EECFA1', name: 'NavajoWhite2'},
        {hex: '#CDB38B', name: 'NavajoWhite3'},
        {hex: '#8B795E', name: 'NavajoWhite4'},
        {hex: '#000080', name: 'navy'},
        {hex: '#000080', name: 'NavyBlue'},
        {hex: '#FDF5E6', name: 'OldLace'},
        {hex: '#808000', name: 'olive'},
        {hex: '#6B8E23', name: 'OliveDrab'},
        {hex: '#C0FF3E', name: 'OliveDrab1'},
        {hex: '#B3EE3A', name: 'OliveDrab2'},
        {hex: '#9ACD32', name: 'OliveDrab3'},
        {hex: '#698B22', name: 'OliveDrab4'},
        {hex: '#FFA500', name: 'orange'},
        {hex: '#FFA500', name: 'orange1'},
        {hex: '#EE9A00', name: 'orange2'},
        {hex: '#CD8500', name: 'orange3'},
        {hex: '#8B5A00', name: 'orange4'},
        {hex: '#FF4500', name: 'OrangeRed'},
        {hex: '#FF4500', name: 'OrangeRed1'},
        {hex: '#EE4000', name: 'OrangeRed2'},
        {hex: '#CD3700', name: 'OrangeRed3'},
        {hex: '#8B2500', name: 'OrangeRed4'},
        {hex: '#DA70D6', name: 'orchid'},
        {hex: '#FF83FA', name: 'orchid1'},
        {hex: '#EE7AE9', name: 'orchid2'},
        {hex: '#CD69C9', name: 'orchid3'},
        {hex: '#8B4789', name: 'orchid4'},
        {hex: '#EEE8AA', name: 'PaleGoldenrod'},
        {hex: '#98FB98', name: 'PaleGreen'},
        {hex: '#9AFF9A', name: 'PaleGreen1'},
        {hex: '#90EE90', name: 'PaleGreen2'},
        {hex: '#7CCD7C', name: 'PaleGreen3'},
        {hex: '#548B54', name: 'PaleGreen4'},
        {hex: '#AFEEEE', name: 'PaleTurquoise'},
        {hex: '#BBFFFF', name: 'PaleTurquoise1'},
        {hex: '#AEEEEE', name: 'PaleTurquoise2'},
        {hex: '#96CDCD', name: 'PaleTurquoise3'},
        {hex: '#668B8B', name: 'PaleTurquoise4'},
        {hex: '#DB7093', name: 'PaleVioletRed'},
        {hex: '#FF82AB', name: 'PaleVioletRed1'},
        {hex: '#EE799F', name: 'PaleVioletRed2'},
        {hex: '#CD687F', name: 'PaleVioletRed3'},
        {hex: '#8B475D', name: 'PaleVioletRed4'},
        {hex: '#FFEFD5', name: 'papaya whip'},
        {hex: '#FFEFD5', name: 'PapayaWhip'},
        {hex: '#FFDAB9', name: 'peach puff'},
        {hex: '#FFDAB9', name: 'PeachPuff'},
        {hex: '#FFDAB9', name: 'PeachPuff1'},
        {hex: '#EECBAD', name: 'PeachPuff2'},
        {hex: '#CDAF95', name: 'PeachPuff3'},
        {hex: '#8B7765', name: 'PeachPuff4'},
        {hex: '#CD853F', name: 'peru'},
        {hex: '#FFC0CB', name: 'pink'},
        {hex: '#FFB5C5', name: 'pink1'},
        {hex: '#EEA9B8', name: 'pink2'},
        {hex: '#CD919E', name: 'pink3'},
        {hex: '#8B636C', name: 'pink4'},
        {hex: '#DDA0DD', name: 'plum'},
        {hex: '#FFBBFF', name: 'plum1'},
        {hex: '#EEAEEE', name: 'plum2'},
        {hex: '#CD96CD', name: 'plum3'},
        {hex: '#8B668B', name: 'plum4'},
        {hex: '#B0E0E6', name: 'PowderBlue'},
        {hex: '#A020F0', name: 'purple'},
        {hex: '#9B30FF', name: 'purple1'},
        {hex: '#912CEE', name: 'purple2'},
        {hex: '#7D26CD', name: 'purple3'},
        {hex: '#551A8B', name: 'purple4'},
        {hex: '#FF0000', name: 'red'},
        {hex: '#FF0000', name: 'red1'},
        {hex: '#EE0000', name: 'red2'},
        {hex: '#CD0000', name: 'red3'},
        {hex: '#8B0000', name: 'red4'},
        {hex: '#BC8F8F', name: 'RosyBrown'},
        {hex: '#FFC1C1', name: 'RosyBrown1'},
        {hex: '#EEB4B4', name: 'RosyBrown2'},
        {hex: '#CD9B9B', name: 'RosyBrown3'},
        {hex: '#8B6969', name: 'RosyBrown4'},
        {hex: '#4169E1', name: 'RoyalBlue'},
        {hex: '#4876FF', name: 'RoyalBlue1'},
        {hex: '#436EEE', name: 'RoyalBlue2'},
        {hex: '#3A5FCD', name: 'RoyalBlue3'},
        {hex: '#27408B', name: 'RoyalBlue4'},
        {hex: '#8B4513', name: 'SaddleBrown'},
        {hex: '#FA8072', name: 'salmon'},
        {hex: '#FF8C69', name: 'salmon1'},
        {hex: '#EE8262', name: 'salmon2'},
        {hex: '#CD7054', name: 'salmon3'},
        {hex: '#8B4C39', name: 'salmon4'},
        {hex: '#F4A460', name: 'SandyBrown'},
        {hex: '#2E8B57', name: 'SeaGreen'},
        {hex: '#54FF9F', name: 'SeaGreen1'},
        {hex: '#4EEE94', name: 'SeaGreen2'},
        {hex: '#43CD80', name: 'SeaGreen3'},
        {hex: '#2E8B57', name: 'SeaGreen4'},
        {hex: '#FFF5EE', name: 'seashell'},
        {hex: '#FFF5EE', name: 'seashell1'},
        {hex: '#EEE5DE', name: 'seashell2'},
        {hex: '#CDC5BF', name: 'seashell3'},
        {hex: '#8B8682', name: 'seashell4'},
        {hex: '#A0522D', name: 'sienna'},
        {hex: '#FF8247', name: 'sienna1'},
        {hex: '#EE7942', name: 'sienna2'},
        {hex: '#CD6839', name: 'sienna3'},
        {hex: '#8B4726', name: 'sienna4'},
        {hex: '#C0C0C0', name: 'silver'},
        {hex: '#87CEEB', name: 'SkyBlue'},
        {hex: '#87CEFF', name: 'SkyBlue1'},
        {hex: '#7EC0EE', name: 'SkyBlue2'},
        {hex: '#6CA6CD', name: 'SkyBlue3'},
        {hex: '#4A708B', name: 'SkyBlue4'},
        {hex: '#6A5ACD', name: 'SlateBlue'},
        {hex: '#836FFF', name: 'SlateBlue1'},
        {hex: '#7A67EE', name: 'SlateBlue2'},
        {hex: '#6959CD', name: 'SlateBlue3'},
        {hex: '#473C8B', name: 'SlateBlue4'},
        {hex: '#708090', name: 'SlateGray'},
        {hex: '#C6E2FF', name: 'SlateGray1'},
        {hex: '#B9D3EE', name: 'SlateGray2'},
        {hex: '#9FB6CD', name: 'SlateGray3'},
        {hex: '#6C7B8B', name: 'SlateGray4'},
        {hex: '#708090', name: 'SlateGrey'},
        {hex: '#FFFAFA', name: 'snow'},
        {hex: '#FFFAFA', name: 'snow1'},
        {hex: '#EEE9E9', name: 'snow2'},
        {hex: '#CDC9C9', name: 'snow3'},
        {hex: '#8B8989', name: 'snow4'},
        {hex: '#00FF7F', name: 'SpringGreen'},
        {hex: '#00FF7F', name: 'SpringGreen1'},
        {hex: '#00EE76', name: 'SpringGreen2'},
        {hex: '#00CD66', name: 'SpringGreen3'},
        {hex: '#008B45', name: 'SpringGreen4'},
        {hex: '#4682B4', name: 'SteelBlue'},
        {hex: '#63B8FF', name: 'SteelBlue1'},
        {hex: '#5CACEE', name: 'SteelBlue2'},
        {hex: '#4F94CD', name: 'SteelBlue3'},
        {hex: '#36648B', name: 'SteelBlue4'},
        {hex: '#D2B48C', name: 'tan'},
        {hex: '#FFA54F', name: 'tan1'},
        {hex: '#EE9A49', name: 'tan2'},
        {hex: '#CD853F', name: 'tan3'},
        {hex: '#8B5A2B', name: 'tan4'},
        {hex: '#008080', name: 'teal'},
        {hex: '#D8BFD8', name: 'thistle'},
        {hex: '#FFE1FF', name: 'thistle1'},
        {hex: '#EED2EE', name: 'thistle2'},
        {hex: '#CDB5CD', name: 'thistle3'},
        {hex: '#8B7B8B', name: 'thistle4'},
        {hex: '#FF6347', name: 'tomato'},
        {hex: '#FF6347', name: 'tomato1'},
        {hex: '#EE5C42', name: 'tomato2'},
        {hex: '#CD4F39', name: 'tomato3'},
        {hex: '#8B3626', name: 'tomato4'},
        {hex: '#40E0D0', name: 'turquoise'},
        {hex: '#00F5FF', name: 'turquoise1'},
        {hex: '#00E5EE', name: 'turquoise2'},
        {hex: '#00C5CD', name: 'turquoise3'},
        {hex: '#00868B', name: 'turquoise4'},
        {hex: '#EE82EE', name: 'violet'},
        {hex: '#D02090', name: 'VioletRed'},
        {hex: '#FF3E96', name: 'VioletRed1'},
        {hex: '#EE3A8C', name: 'VioletRed2'},
        {hex: '#CD3278', name: 'VioletRed3'},
        {hex: '#8B2252', name: 'VioletRed4'},
        {hex: '#F5DEB3', name: 'wheat'},
        {hex: '#FFE7BA', name: 'wheat1'},
        {hex: '#EED8AE', name: 'wheat2'},
        {hex: '#CDBA96', name: 'wheat3'},
        {hex: '#8B7E66', name: 'wheat4'},
        {hex: '#FFFFFF', name: 'white'},
        {hex: '#F5F5F5', name: 'WhiteSmoke'},
        {hex: '#FFFF00', name: 'yellow'},
        {hex: '#9ACD32', name: 'yellow green'},
        {hex: '#FFFF00', name: 'yellow1'},
        {hex: '#EEEE00', name: 'yellow2'},
        {hex: '#CDCD00', name: 'yellow3'},
        {hex: '#8B8B00', name: 'yellow4'},
        {hex: '#9ACD32', name: 'YellowGreen'} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-26T16:20:28.420

我很确定这是#DDDDDD。我无法区分我专门着色的按钮`bg='#dddddd'`和使用默认颜色着色的按钮。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-10-10T20:04:49.623

some_widget(bg=some_widget._root().cget('bg'))

# xml - diff 工具 - 检查两个文件中是否存在同一行

> ID：11340769
> 
> 赞同：0
> 
> 时间：2012-07-05T08:45:11.810
> 
> 标签：xml, diff, compare

我正在寻找一个差异工具，它可以让我比较两个文件，而不管行的顺序如何。因此，如果一个文件的第 54 行说 XXXXXXX，我会看到它存在于另一个文件中，即使它的第 66 行也是如此。似乎 KDiff3 没有注意到它......我正在尝试比较 xml 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T08:42:01.383

我找到了解决方案。XML Notepad 2007 有一个内置的 diff 工具，即使行的顺序不同，它也会正确地比较文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T08:50:31.817

尝试[超越比较](http://www.scootersoftware.com/)。我发现这对于重构的内容很有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T08:48:29.157

我不确定这是否完全符合您的要求，但[http://prettydiff.com/](http://prettydiff.com/)上的 Pretty Diff是一个支持 XML 的算法差异工具。它缩小代码示例以删除注释，然后美化代码示例以规范空白和缩进。您可以通过将代码示例粘贴到或使用示例页面上提供的测试来在线试用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-15T05:43:54.363

不确定这是否有帮助，但我所做的是在电子表格中创建两列，然后添加带有 VLOOKUP 的第三列，用于检测该行是 1) 新行还是 2) 已删除

# android - 将列表从一个活动传递到另一个活动

> ID：11340776
> 
> 赞同：19
> 
> 时间：2012-07-05T08:45:50.900
> 
> 标签：android, listview, android-intent, arraylist

在 Intent 的 putExtra 方法的帮助下，如何像过去一样将 Collections like`ArrayList`等从一个`Activity`传递到另一个？`Strings``int`

任何人都可以帮助我，因为我想将一个`List<String>`从一个传递`Activity`到另一个？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-07-05T08:49:57.797

You can pass an `ArrayList<E>` the same way, if the `E` type is `Serializable`.

You would call the `putExtra (String name, Serializable value)` of `Intent` to store, and `getSerializableExtra (String name)` for retrieval.

Example:

```
ArrayList<String> myList = new ArrayList<String>();
intent.putExtra("mylist", myList); 
```

In the other Activity:

```
ArrayList<String> myList = (ArrayList<String>) getIntent().getSerializableExtra("mylist"); 
```

* * *

*Please note that serialization can cause performance issues: it takes time, and a lot of objects will be allocated (and thus, have to be garbage collected).*

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2015-01-27T15:30:00.000

首先你需要创建一个 Parcelable 对象类，看例子

```
public class Student implements Parcelable {

        int id;
        String name;

        public Student(int id, String name) {
            this.id = id;
            this.name = name;

        }

        public int getId() {
            return id;
        }

        public String getName() {
            return name;
        }

        @Override
        public int describeContents() {
            // TODO Auto-generated method stub
            return 0;
        }

        @Override
        public void writeToParcel(Parcel dest, int arg1) {
            // TODO Auto-generated method stub
            dest.writeInt(id);
            dest.writeString(name);
        }

        public Student(Parcel in) {
            id = in.readInt();
            name = in.readString();
        }

        public static final Parcelable.Creator<Student> CREATOR = new Parcelable.Creator<Student>() {
            public Student createFromParcel(Parcel in) {
                return new Student(in);
            }

            public Student[] newArray(int size) {
                return new Student[size];
            }
        };
    } 
```

### 和名单

```
ArrayList<Student> arraylist = new ArrayList<Student>(); 
```

### 调用活动的代码

```
Intent intent = new Intent(this, SecondActivity.class);
Bundle bundle = new Bundle();
bundle.putParcelableArrayList("mylist", arraylist);
intent.putExtras(bundle);       
this.startActivity(intent); 
```

### 调用活动的代码

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_second);   

    Bundle bundle = getIntent().getExtras();
    ArrayList<Student> arraylist = bundle.getParcelableArrayList("mylist");
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-05T08:51:34.793

用于`putExtra`将值传递给意图。使用`getSerializableExtra`方法来检索这样的数据

活动一：

```
ArrayList<String> list = new ArrayList<String>();

intent.putExtra("arraylist", list);
startActivity(intent); 
```

活动 B：

```
ArrayList<String> list = getIntent().getSerializableExtra("arraylist"); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-06-01T13:10:39.970

我尝试了所有提出的技术，但都没有奏效并阻止我的应用程序工作，然后我终于成功了。我是这样做的……在主要活动中，我这样做了：

```
 List<String> myList...;
            Intent intent = new Intent...;
            Bundle b=new Bundle();
            b.putStringArrayList("KEY",(ArrayList<String>)myList);            
            intent_deviceList.putExtras(b);
            ....startActivity(intent); 
```

要获取新 Activity 中的数据：

```
 List<String> myList...
    Bundle b = getIntent().getExtras();
    if (b != null) {
        myList = bundle.getStringArrayList("KEY");
    } 
```

我希望这会对某人有所帮助...

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-05T09:10:04.393

要将 ArrayList 从一个活动传递到另一个活动，应该包括

```
intent.putStringArrayListExtra(KEY, list); //where list is ArrayList which you want to pass 
```

在开始活动之前。并在另一个活动中获取 ArrayList 包括

```
Bundle bundle = getIntent().getExtras();
        if (bundle != null) {
            temp = bundle.getStringArrayList(KEY); // declare temp as ArrayList
                } 
```

您将能够通过此传递 ArrayList。希望这对您有所帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-01T16:10:13.570

使用 ViewModel 比 Serializable 或 Parcelable 更好

# wordpress - Wordpress 网站前端 Google 自动翻译

> ID：11340778
> 
> 赞同：0
> 
> 时间：2012-07-05T08:45:59.217
> 
> 标签：wordpress, multilingual

我有英文的 wordpress 网站，我想在网站加载时使用谷歌翻译自动将整个网站翻译成瑞典语，

但我不想在字体结尾显示任何语言选择器。也不想显示谷歌翻译栏。

我搜索了大约 2 天，但找不到答案。

是否有任何 wordpress 插件可以做这种魔术。谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T09:04:07.307

您可以从此处获取特定语言的代码[https://translate.google.com/manager/add](https://translate.google.com/manager/add) 并仅选择“瑞典语”将代码添加到您的网站。加载页面后使用javascript或jquery从选择框中选择语言并使选择框显示：无；

```
 $(document).ready(function(){
       $("#google_languaes").val(1);
       $("#google_languaes").css({display: "none"});
   }) 
```

# java - HTML DOM 树到字符串 - 转换器 NullPointerException

> ID：11340779
> 
> 赞同：0
> 
> 时间：2012-07-05T08:46:05.333
> 
> 标签：java, xml, dom, transform, transformer

我正在尝试将 org.w3c.dom.Document 对象的内容转换为字符串。我得到了 JBrowser 组件中显示的当前页面的 Document 对象。将文档 dom 树转换为字符串的最常见方法似乎是使用 javax.xml.transform.Transformer。所以我实现了这个：

```
ByteArrayOutputStream baos = new ByteArrayOutputStream();

TransformerFactory.newInstance().newTransformer().transform(
            new DOMSource(aDocument), new StreamResult(baos));

return baos.toString(); 
```

这适用于简单的网站，但它们越复杂，我获得此异常的可能性就越高：

```
 ERROR:  ''
05.07.2012 10:17:09 com.de.test.Demonstrator$1 run
FATAL: null
javax.xml.transform.TransformerException: java.lang.NullPointerException
at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:717)
at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:313)
at com.de.test.DocumentUtils.toHTML(DocumentUtils.java:47)
at com.de.test.Demonstrator$1.run(Demonstrator.java:172)
Caused by: java.lang.NullPointerException
at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:178)
at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:226)
at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:226)
at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:226)
at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:226)
at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:226)
at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:226)
at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:226)
at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:226)
at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:226)
at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:226)
at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:226)
at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:226)
at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:226)
at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:226)
at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:226)
at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:226)
at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:226)
at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:132)
at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:94)
at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transformIdentity(TransformerImpl.java:662)
at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:708)
... 3 more
---------
java.lang.NullPointerException
at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:178)
at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:226)
at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:226)
at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:226)
at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:226)
at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:226)
at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:226)
at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:226)
at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:226)
at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:226)
at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:226)
at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:226)
at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:226)
at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:226)
at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:226)
at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:226)
at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:226)
at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:226)
at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:132)
at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:94)
at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transformIdentity(TransformerImpl.java:662)
at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:708)
at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:313)
at com.de.test.DocumentUtils.toHTML(DocumentUtils.java:47)
at com.de.test.Demonstrator$1.run(Demonstrator.java:172) 
```

在一些研究发现提示后，某些文本元素可能为空，这会导致 Transformer 崩溃。所以我这样做了：

```
 public static final void traverseLevel(TreeWalker walker, Document aDocument, String indent)
{
    // describe current node:
    Node parent = walker.getCurrentNode();

    if (parent != null && parent.getNodeValue() == null)
        parent.setNodeValue(" ");

    System.out.println(indent + "- <" + ((Element) parent).getTagName() + ">" + parent.getNodeValue());

    // traverse children:
    for (Node n = walker.firstChild(); n != null; n = walker.nextSibling())
    {
        if(n != null)
            traverseLevel(walker, aDocument, indent + '\t');
    }

    System.out.println("</"+ ((Element) parent).getTagName() + ">");

    // return position to the current (level up):
    walker.setCurrentNode(parent);
} 
```

这是我发现“parent.getNodeValue()”总是返回 null 的地方。有趣的是，这个问题也出现在简单的网站上，但转换器仍然输出树的值。知道我替换空文本节点有什么问题吗？是否还有其他可能导致此问题的潜在问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T12:51:05.973

好的，我找到了解决问题的方法。我已将 JBrowser 更改为具有 convertToHtml() 功能的 DJ Project 浏览器。我无法解决变压器问题，这就是我选择这条路线的原因。

# jquery - 使元素仅在向下滚动到 ***px 时可见

> ID：11340789
> 
> 赞同：5
> 
> 时间：2012-07-05T08:47:00.850
> 
> 标签：jquery

我在我的网站上使用滚动到顶部按钮。我正在使用这个 Jquery

```
 $(window).scroll(function() {
    if ($(this).scrollTop()) {
        $('#cttm:hidden').stop(true, true).fadeIn();
    } else {
        $('#cttm').stop(true, true).fadeOut();
    }
});

  $(document).ready(function(){
      var bottom = ($(window).outerHeight() - $(window).height()) - 150; // 150 pixel to the bottom of the page; 
      $(window).scroll(function(){
          if ($(window).scrollTop() >= bottom ) {
                  $("#cttm").fadeTo("slow",.95);
             } else {
                  $("#cttm").fadeOut("slow");
             }
      });

      $("#cttm").click(function(){
          $('html, body').animate({scrollTop:0}, 'slow');
          $("#cttm").fadeOut("slow");
      });
  }); 
```

这个 Jquery 很好用，但我希望元素只在我们从顶部滚动到 200px 或类似的东西时出现。有没有办法用 JQuery 做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T08:53:13.253

你不需要窗口高度来做到这一点。

```
var isVisible = false;
$(window).scroll(function(){
     var shouldBeVisible = $(window).scrollTop()>200;
     if (shouldBeVisible && !isVisible) {
          isVisible = true;
          $('#mybutton').show();
     } else if (isVisible && !shouldBeVisible) {
          isVisible = false;
          $('#mybutton').hide();
    }
}); 
```

演示：http: [//jsfiddle.net/dystroy/gXSLE/](http://jsfiddle.net/dystroy/gXSLE/)

# php - 如何使用PHP在句子中的特定单词中插入随机字母

> ID：11340792
> 
> 赞同：-3
> 
> 时间：2012-07-05T08:47:05.833
> 
> 标签：php

这是我的问题，我想制作一个 php 函数来向特定单词插入一些随机字母。

例子 ：

随机字母：a,i,u,e,o

具体词：猴、鹿、虎、鼠

一句话：虎吃鹿，猴鼠远观

我希望句子是这样的：

老虎吃杜尔，猴子和老鼠从远处看

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T09:15:29.413

```
$sentence = 'a tiger eating a deer, monkeys and rats see from a distance'; // You'll need to load the string into a variable, obviously.

$randomLetterArray = array('a', 'e', 'i', 'o', 'u'); // It's good to set the random letters inside an array so that they can be randomly picked by randomizing the index number.

$specificWordArray = array('monkey', 'deer', 'tiger', 'mouse'); // Words to be altered in an array to easily iterate through.

foreach ($specificWordArray as $specificWord) // Iterating through each of the words to be altered.
{
    $indexOfWord = rand(0, strlen($specificWord)-1); // Getting a random number between 0 and the length (in chars) of the word.
    $partOfWord = substr($specificWord, 0 , $indexOfWord); // Getting a part of the word based on the random number created above.
    // This is more complex.
    // The part of the word created above is concatenated by a random selection of one of the random letters.
    // This in turn is concatenated by the remaining letters in the word.
    $wordReplacement = $partOfWord.$randomLetterArray[rand(0, count($randomLetterArray)-1)].substr($specificWord, $indexOfWord);
    $sentence = str_ireplace($specificWord, $wordReplacement, $sentence); // This replaces the word in the sentence with the new word.
}
echo $sentence; 
```

我希望这能给你一些关于如何解决这个问题的想法，我希望这些评论有助于让你了解 PHP 中可用的函数。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T09:23:20.043

像这样的东西应该可以工作，但我很确定有一种更快更简单的方法来做到这一点。

```
# the magic function
function magicHappensHere ( $letters, $words, $sentence ) {

    $return = '';

    # divide by words
    $sentence_words = explode( ' ', $sentence );

    foreach ( $sentence_words as $value ) {

        # check words
        if ( array_search( $value, $words ) ) {
            # check 'letter' count
            $l_number = sizeof( $letters );

            # create a random letter value
            $rand_letter = rand( 0, ( $l_number-1 ) );

            # create random position to use
            $rand_pos = rand ( 0, strlen( $value ) );

            # change the actual word
            $value = substr_replace( $value, $letters[ $rand_letter ] ,$rand_pos, 0 );
        }

        $return .= $value . ' ';

    }

    # print out new string ( w/out last space )
    return substr( $return, 0, -1 );
}

# define your 'letters'
$letters = array( 'a', 'i', 'u', 'e', 'o' );

# define your 'words'
$words = array( 'monkey', 'deer', 'tiger', 'mouse' );

# define your 'sentence'
$sentence = 'a tiger eating a deer, monkeys and rats see from a distance';

# change text
$new_sentence = magicHappensHere ( $letters, $words, $sentence );

print $new_sentence;

?> 
```

# wordpress - WordPress NextGen 自定义模板

> ID：11340794
> 
> 赞同：0
> 
> 时间：2012-07-05T08:47:06.720
> 
> 标签：wordpress, nextgen-gallery

我在 NextGen 中有一个图片库，我想在页面上显示它，但问题是每当我使用自定义模板加载图片库时，它不会在这里加载我是怎么做的，首先我有一个页面`homepage.php`，在某个地方我添加此代码以显示图库：

```
<?php
      $NextG = new NextGEN_Shortcodes;
      echo $NextG->show_gallery( array("id"=>1,"images"=>5,"template"=>"myshow") );
?> 
```

我的模板文件`myshow.php`包含这个：

```
<ul id="slideshow">
  <!-- Thumbnails -->
  <?php foreach ( $images as $image ) : ?>

    <li>
      <?php if ( !$image->hidden ) { ?>
      <img src="<?php echo $image->imageURL ?>" alt="<?php echo $image->alttext ?>" />
      <?php } ?>
    </li>

<?php endforeach; ?>
</ul> 
```

现在命名`myshow.php` 的模板文件位于`wordpress\wp-content\themes\nggallery`

当我运行页面时它返回图像但它使用默认模板有什么问题我输入了错误的名称？？？我是否将模板放在错误的目录中？还是有别的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:36:19.157

好的，我得到了答案，我只需要为我的文件输入正确的名称前缀，`"gallery-<mytemplatename>"`所以在上述情况下，它将是`gallery-myshow.php`

# php - PHP 使用 twitter Oauth 工具（消费者密钥、访问令牌、消费者秘密、访问秘密）获取用户最新的 Twitter 提要

> ID：11340796
> 
> 赞同：0
> 
> 时间：2012-07-05T08:47:10.930
> 
> 标签：php, oauth, twitter, tweets

我需要获取用户的 twitter 最新提要。我用了

```
https://api.twitter.com/1/statuses/user_timeline.json?oauth_token=ecwmW3pMB8euREHVljdySRexys6c6XYangqEANY&screen_name=twitter_name&count=1 
```

但我得到“超出速率限制”客户端无法每小时发出 150 个请求。

我使用了 twitter Oauth 请求，使用了 consumer key、c​​onsumer secret、access token 和 access secret，代码如下

```
$oauth_consumer_key="Vqlj7vd9yHo5MZPnWGf3w";
$oauth_nonce="af00a3a26b15ec0178ce0342acc9b392";
$oauth_signature_method="HMAC-SHA1";
$oauth_timestamp="1341408794";
$oauth_token="620811780-30jD4XHWFvp15RcjmxHkLLicFlvMDuNaWp6fKjia";
$oauth_version="1.0";
$oauth_signature=rawurldecode("N6L4VJLJjY%2BPKxoelttqe2GOPAw%3D");

$url = "https://api.twitter.com/1/statuses/user_timeline.json?";
$url .= "screen_name=twitter_name";
$url .= "&oauth_consumer_key=".$oauth_consumer_key."";
$url .= "&oauth_token=".$oauth_token."";
$url .= "&oauth_nonce=".$oauth_nonce."";
$url .= "&oauth_signature_method=".$oauth_signature_method."";
$url .= "&oauth_timestamp=".$oauth_timestamp."";
$url .= "&oauth_version=1.0";
$url .= "&oauth_signature=".$oauth_signature."";
$url .= "&count=1";
$url .= "&include_rts=true";
$url .= "include_entities=true";

$ch = curl_init($url);
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, 'GET');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_BINARYTRANSFER, true);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Host: api.twitter.com'));
$json = curl_exec($ch);
curl_close ($ch);
$data = json_decode($json, true);
print_r($json); 
```

我仍然收到超出速率限制的错误。

任何人都可以帮助我使用 Oauth 获取 Twitter 最新提要。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T08:32:20.627

根据经验，如果您尝试自己处理谈判，那么 Twitter OAuth 会受到打击。我尝试了几个星期来实现这一目标，但一直出现“超出速率限制”和“无效 OAuth 密钥”等错误。我检查了一个图书馆，在同一小时内我可以获取状态、设置状态、发送带有和不带有图片的推文等。

这是我现在使用的，测试一下。它重量轻且易于使用。

[https://github.com/themattharris/tmhOAuth/](https://github.com/themattharris/tmhOAuth/)

# ip - 从 IP 地址知道服务器名称

> ID：11340798
> 
> 赞同：3
> 
> 时间：2012-07-05T08:47:20.413
> 
> 标签：ip

我有一个 IP 地址，我想知道与该地址对应的服务器名称是什么。我怎样才能做到这一点？

例如：10.xxx 到 www。某物

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T08:57:30.997

采用`nslookup [IP] [some DNS server]`

对于内部网络（如 10.xxx），如下所示：

```
> nslookup 10.1.1.10    10.1.1.1
Server:     10.1.1.1
Address:    10.1.1.1#53

10.1.1.10.in-addr.arpa  name = my-ip-10.1.1.10.domain.com 
```

# dynamics-crm - 为 CRM 2011 编写原生 SQL

> ID：11340799
> 
> 赞同：2
> 
> 时间：2012-07-05T08:47:24.477
> 
> 标签：dynamics-crm, dynamics-crm-2011, crm, fetchxml, query-expressions

我想知道我是否可以编写本机 SQL 来添加或删除操作，而不是使用查询表达式或 FetchXML 等。我知道查询表达式非常有用，但我真正关心的是性能，我认为编写 SQL 可以比其他方法更快。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-05T12:00:18.820

简而言之，不支持使用直接 SQL（**尤其**是创建/更新操作）。*不要这样做*！

CRM 的数据库模型很复杂，对数据的更新可能会产生超出对单个或两个表的简单更新的影响。

> 我真正关心的是性能

您是否验证了这种担忧？查看[此链接](http://www.microsoft.com/en-us/download/details.aspx?id=16673)，该链接记录了 CRM 的性能测试。这是一个企业级、可扩展的平台。如果您已经证明存在性能问题，那么也许您的代码需要优化或者您的工具包需要加强......？:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-05T20:57:42.680

我完全同意 Greg 的回答，这只是关于性能的附带说明。如果您确实看到“性能问题”，也许您应该花时间专注于查看添加索引是否会有所帮助。尽管数据库索引不包含在 CRM 解决方案中，并且需要在 dev、qa、staging 和 prod 环境之间手动传播，并且仅支持现场安装，但它们可以使一些查询快 10 或 100 倍。 . （当然，如果他们被滥用，他们也可以减慢一切。在使用它们之前知道你在做什么）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T02:46:38.930

除了@Greg 和@Daryl 所说的之外，当您说性能时，您的意思是您编写sql 更快吗？

无论如何，CRM 有一些独特的做事方式。

例如[激活/停用](http://msdn.microsoft.com/en-us/library/cc155990.aspx)记录、[发票相关](http://msdn.microsoft.com/en-us/library/bb959396)操作或 CRM 转换[机会](http://msdn.microsoft.com/en-us/library/bb890245)的方式。

这并不难做到。你应该花一些时间在[sdk](http://msdn.microsoft.com/en-us/library/bb219490) ...

# google-app-engine - 无法从云存储读取文件

> ID：11340800
> 
> 赞同：0
> 
> 时间：2012-07-05T08:47:28.760
> 
> 标签：google-app-engine, google-cloud-storage

读取文件的代码

```
boolean lockForRead = false;
String filename = "/gs/smsspamfilteraptosin/Data";
AppEngineFile readableFile = new AppEngineFile(filename);
FileReadChannel readChannel = fileService.openReadChannel(readableFile, lockForRead);

BufferedReader reader = new BufferedReader(Channels.newReader(readChannel, "UTF")); => I think something went wrong here.I put a string test and after this line the string test was  null.
String line = reader.readLine(); 
```

云存储中的路径

```
smsspamfilteraptosin/Data 
```

应用程序的 ACL 权限

```
FULL_CONTROL 
```

当我尝试打印行时，结果为空。
这就是我在管理日志中看到的内容：此应用程序不允许 API 服务
有人能告诉我我做错了什么吗？
谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:28:53.043

当我尝试按照以下教程进行操作时，我收到了相同的“此应用程序不允许 API 服务”错误：[http ://www.youtube.com/watch?v=v9TG7OzsZqQ](http://www.youtube.com/watch?v=v9TG7OzsZqQ)

我的 Cloud Endpoint REST API 在我的本地开发机器上运行良好，但在我部署到 App Engine 时不可见。

这种“此应用程序不允许 API 服务”是否可能是依赖于我们未启用的付费功能的结果？

更新：检查GAE：对于（部分？）解决方案[，此应用程序不允许 API 服务。](https://stackoverflow.com/questions/11565699/gae-api-serving-not-allowed-for-this-application)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T21:19:26.820

您没有执行[先决条件](https://developers.google.com/appengine/docs/java/googlestorage/overview#Prerequisites)中列出的操作，这会阻止您从应用引擎使用 GCS。

# c++ - 在向量中查找结构

> ID：11340802
> 
> 赞同：4
> 
> 时间：2012-07-05T08:47:31.637
> 
> 标签：c++, vector, struct

我想在向量中找到一个结构，但我遇到了一些麻烦。我阅读了几篇关于此的文章，但这些文章都在搜索结构的一个元素：我希望能够在搜索时比较结构的多个元素。我的结构和向量定义为：

```
struct subscription {
    int tournamentid;
    int sessionid;
    int matchid;

    bool operator==(const subscription& m) const {
        return ((m.matchid == matchid)&&(m.sessionid==sessionid)&&(m.tournamentid==tournamentid));
    }
};

vector<subscription> subscriptions; 
```

然后我想在向量订阅中搜索一个struct，但是由于sessionid和matchid的组合是唯一的，所以我需要两者都搜索。仅搜索一个将导致多个结果。

```
 subscription match;
    match.tournamentid = 54253876;
    match.sessionid = 56066789;
    match.matchid = 1108;
    subscriptions.push_back(match);

    it = find(subscriptions.begin(), subscriptions.end(), match); 
```

find 函数在编译过程中给出以下错误：

> main.cpp:245:68: 错误: 'it = std::find [with _IIter = __gnu_cxx::__normal_iterator >, _Tp = echo_client_handler::subscription](((echo_client_handler*)this) 中的 'operator=' 不匹配->echo_client_handler::subscriptions.std::vector<_Tp, _Alloc>:: 以 _Tp = echo_client_handler::subscription 开头，_Alloc = std::allocator, std::vector<_Tp, _Alloc>::iterator = __gnu_cxx:: __normal_iterator >, typename std::_Vector_base<_Tp, _Alloc>::_Tp_alloc_type::pointer = echo_client_handler::subscription*, ((echo_client_handler*)this)->echo_client_handler::subscriptions.std::vector<_Tp, _Alloc>: :以 _Tp = echo_client_handler::subscription 结尾，_Alloc = std::allocator，std::vector<_Tp, _Alloc>::iterator = __gnu_cxx::__normal_iterator >，类型名 std::_Vector_base<_Tp, _Alloc>::_Tp_alloc_type: ：指针 = echo_client_handler::subscription*, (*(const echo_client_handler::subscription*)(& match)))'</p>

还有更多 :) 所以操作符的定义不正确，但是应该怎么做呢？谁能帮我？如何搜索多个元素而不是仅搜索结构的一个元素？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T08:56:39.650

可能是您没有指定类型`it`吗？

```
std::vector<subscription>::iterator it = 
    find(subscriptions.begin(), subscriptions.end(), match); 
```

# asp.net-mvc-3 - 如何在 MVC3 中插入 一个空的文本框消息

> ID：11340804
> 
> 赞同：0
> 
> 时间：2012-07-05T08:47:37.517
> 
> 标签：asp.net-mvc-3, telerik-mvc

我想在 MVC3 的文本框中插入一条消息，例如在此处输入类型。

我该怎么做？

可以在字段声明的Model类中完成吗？

请问有什么办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T09:39:29.710

您可以使用 HTML5**占位符**。适用于 chrome 和 firefox。您可以使用[modernizr](http://modernizr.com/)使其在IE 和其他较旧的浏览器中运行。

[如何为占位符设置modernizr](http://webdesignerwall.com/tutorials/cross-browser-html5-placeholder-text)

```
@Html.TextBoxFor(model => model.Name,new { placeholder = "Fill in your name" }) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T09:00:41.150

```
@Html.TextBox("Place textbox name here", "Place default value here")
@Html.TextBoxFor(Model field declaration here, new { Value = "Place default value here" } 
```

如果你想使用输入掩码，那么你可以看看这里[jquery input mask](http://digitalbush.com/projects/masked-input-plugin/)

# objective-c - Xcode 4.3.3 - 错误未定义符号

> ID：11340806
> 
> 赞同：0
> 
> 时间：2012-07-05T08:47:49.260
> 
> 标签：objective-c, xcode4

大家好，我正在构建一个应用程序来创建一个简单的表格视图，顶部有一个搜索栏来搜索表格的元素。我遵循了一个教程，没有发现编码错误，但是在构建时，它总是无法显示以下消息：

```
Ld /Users/gouyoun/Library/Developer/Xcode/DerivedData/ERCDictionnary-atjolczeormaykcscwvnhlxdcnvk/Build/Products/Debug-iphonesimulator/ERCDictionnary.app/ERCDictionnary normal i386
cd /Users/gouyoun/Desktop/ERCDictionnary/ERCDictionnary
setenv MACOSX_DEPLOYMENT_TARGET 10.6
setenv PATH "/Volumes/Xcode/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Volumes/Xcode/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
/Volumes/Xcode/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch i386 -isysroot /Volumes/Xcode/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk -L/Users/gouyoun/Library/Developer/Xcode/DerivedData/ERCDictionnary-atjolczeormaykcscwvnhlxdcnvk/Build/Products/Debug-iphonesimulator -F/Users/gouyoun/Library/Developer/Xcode/DerivedData/ERCDictionnary-atjolczeormaykcscwvnhlxdcnvk/Build/Products/Debug-iphonesimulator -filelist /Users/gouyoun/Library/Developer/Xcode/DerivedData/ERCDictionnary-atjolczeormaykcscwvnhlxdcnvk/Build/Intermediates/ERCDictionnary.build/Debug-iphonesimulator/ERCDictionnary.build/Objects-normal/i386/ERCDictionnary.LinkFileList -mmacosx-version-min=10.6 -Xlinker -objc_abi_version -Xlinker 2 -fobjc-arc -Xlinker -no_implicit_dylibs -D__IPHONE_OS_VERSION_MIN_REQUIRED=50100 -framework UIKit -framework Foundation -framework CoreGraphics -o /Users/gouyoun/Library/Developer/Xcode/DerivedData/ERCDictionnary-atjolczeormaykcscwvnhlxdcnvk/Build/Products/Debug-iphonesimulator/ERCDictionnary.app/ERCDictionnary 
```

架构 i386 的未定义符号：“_OBJC_CLASS_$_OverlayViewController”，引用自：tableView.o 中的 objc-class-ref ld：找不到架构 i386 的符号 clang：错误：链接器命令失败，退出代码为 1（使用 -v查看调用）

```
 "_OBJC_CLASS_$_OverlayViewController", referenced from:
      objc-class-ref in tableView.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我是OBjective C的新手，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T12:19:42.310

它完成了，它只需要删除文件并稍后重新添加它们，它就像一个魅力

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T16:25:32.357

我有完全相同的错误。发生这种情况是因为我打开了 2 个 xCode 项目，将一个类从一个项目拖放到另一个项目。我检查了“复制到项目”和新项目文件夹中的文件。但是每次都崩溃。

我删除了这些类并将它们导入到项目中，然后它工作了......所以在使用 Drag'n'Drop 时要小心**！**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T08:51:35.470

您的 tableView 类是指一个`OverlayViewController`不在您的项目中的类。

# javascript - Jquery 代码插入 WP HeadWay 页面

> ID：11340807
> 
> 赞同：0
> 
> 时间：2012-07-05T08:47:54.490
> 
> 标签：javascript, jquery, wordpress, wordpress-theming

嗨，问题是将 jquery 代码插入 WP Headway Page。

简短介绍 我正在使用 Wordpress Headway 主题管理器，它包含 5 个帖子。我想制作带有内容链接的 jQuery Carousel（carousel 用作 WP 插件）。Headway 有自定义代码部分，试图在那里插入。

有人可以详细说明如何将 jQuery 脚本插入单个 Headway Page。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-16T22:07:34.783

我也认为这是 HeadWay 问题，但它是[WordPress 问题](https://codex.wordpress.org/Using_Javascript)。

我的解决方案是在我的“儿童”主题文件夹中添加一个 JS 并链接到它

```
<script type="text/javascript" src="/wp-content/themes/childTheme/js/indexTabs.js"></script> 
```

如果你需要使用另一个库，比如 jQuery，只需将它添加到 JS 调用之上

```
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script> 
```

我将这两行都添加到帖子的底部（在 JS 之前调用 jQuery）

# wpf - WPF如何在底线排列具有不同字体大小的TextBlock

> ID：11340809
> 
> 赞同：7
> 
> 时间：2012-07-05T08:48:00.133
> 
> 标签：wpf, xaml, textblock

今天我遇到了一个非常烦人的 wpf 问题。

我只想在底线对齐 Textblock 控件（具有不同的字体大小）。

```
 <StackPanel Grid.Row="0" Orientation="Horizontal">
            <TextBlock Text="ABC" FontSize="12" VerticalAlignment="Bottom"/>
            <TextBlock Text="QWERT" FontSize="24" VerticalAlignment="Bottom"/>
            <TextBlock Text="XYZ" FontSize="18" VerticalAlignment="Bottom"/>
        </StackPanel> 
```

![在此处输入图像描述](../Images/d5ed0c495fb43b2fdd4aef72e006f003.png)

我想念什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-05T08:56:17.977

找到了解决方法。我必须在我的 TextBlock 中使用 Run

```
 <StackPanel Grid.Row="0" Orientation="Horizontal">
            <TextBlock VerticalAlignment="Bottom">
                <Run FontSize="12">ABC</Run>
                <Run FontSize="24">QWERT</Run>
                <Run FontSize="18">XYZ</Run>
            </TextBlock>
        </StackPanel> 
```

# c++ - What's the difference between WaitForMultipleObjects and WaitForMultipleObjectsEx

> ID：11340811
> 
> 赞同：-4
> 
> 时间：2012-07-05T08:48:01.637
> 
> 标签：c++, windows, multithreading, winapi

I am working on some legacy code which includes calls to `WaitForMultipleObjects()`. From school I remember the function `WaitForMultipleObjectsEx()` (which we only vaguely mentioned). I am wondering what, if at all, is the difference and is there a general rule as to when to use which. Googling the title of the question didn't lead to any conclusions.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T18:57:25.597

如前所述，添加了“Ex”的例程通常具有原始功能的一些扩展功能。在这种情况下，有一个额外的布尔参数“bAlertable”。这里的区别在于，如果设置为 true，这个额外的参数允许您等待，不仅是处于信号状态和超时的对象，还包括 I/O 完成和用户模式异步过程调用。这个添加的功能让您可以为读取和写入创建自己的完成例程。如果您不需要额外的功能，只需在 bAlertable 参数设置为 FALSE 的情况下调用此函数，或者您可以使用不带参数的旧版本。

# infovis - Highlight custom node on mouse enter

> ID：11340813
> 
> 赞同：0
> 
> 时间：2012-07-05T08:48:04.567
> 
> 标签：infovis, thejit

I'm creating custom node and I would like to highlight on mouse enter. Unfortunately the `mouseEnter` event doesn't fire. I also don't know how to render the node after `mouseEnter` and `mouseLeave`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T10:41:35.757

您是否在自定义节点类型定义中编写了“包含”函数和“渲染”函数？如果没有，则不会触发 mouseEnter/onRightClick 之类的事件。

这是包含自定义节点类型方法的代码。

```
$jit.ForceDirected.Plot.NodeTypes.implement({
 'icon1': { 
     'render': function(node, canvas){ 
                var ctx = canvas.getCtx(); 
                var img = new Image(); 
                img.src='magnify.png'; 
                var pos = node.pos.getc(true); 
                img.onload = function() { 
                        ctx.drawImage(img, pos.x, pos.y); 
                }; 

      }, 
        'contains': function(node,pos){ 
                var npos = node.pos.getc(true); 
                dim = node.getData('dim'); 
                return this.nodeHelper.circle.contains(npos, pos, dim);
                //return this.nodeHelper.square.contains(npos, pos, dim); 
      } 
  }
}); 
```

# multithreading - Spring and thread: No Session found for current thread

> ID：11340814
> 
> 赞同：0
> 
> 时间：2012-07-05T08:48:17.277
> 
> 标签：multithreading, spring, hibernate

in a webapp i want to run an async thread for a long process and let the client knows the progress status. For this i thought to use this abstract class:

```
public abstract class ThreadProvider implements Runnable{

    protected Thread thread;

    public boolean create() throws SystemException{
        if(thread!=null && thread.isAlive()) throw new SystemException("Il processo è già in esecuzione");
        thread = new Thread(this);
        thread.start();
        return true;
    }
} 
```

And this is my impl:

```
@Service @Transactional
public class ChiusuraProvider extends ThreadProvider {

    private static Logger gdf = Logger.getLogger("gdf");
    private static Logger log = Logger.getLogger(ChiusuraProvider.class);

    protected Dao dao;
    protected CinetelProvider cinetelProvider;

    @Override
    public void run() {...}
} 
```

Everything works: the thread starts and seems that the autowire works... however Hibernat did not find any session (maybe because i change thread)... how to solve this?

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T09:14:42.530

`@Transactional`在这种情况下不起作用，请参阅[10.5.1 了解 Spring 框架的声明式事务实现](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/transaction.html#tx-decl-explained)。

您可以在方法中使用程序化事务管理 ( `TransactionTemplate`) `run`，或者将事务逻辑提取到单独的 bean 中并制作`@Transactional`。

# django - Indexes not created when running rebuild_index

> ID：11340817
> 
> 赞同：0
> 
> 时间：2012-07-05T08:48:21.727
> 
> 标签：django, django-haystack

I'm following the Getting Started guide, but when I run `manage.py rebuild_index`, it seems none of my models are indexed.

When I try to search in /search, I get no results and this in the logs:

```
Problem accessing /solr/select/. Reason: no field name specified in query and no defaultSearchField defined in schema.xml 
```

Here is my app's **`search_indexes.py`**. It's bit more complex than the guide's model, so maybe it's the reason why it's not working.

```
import datetime

from myproject.apps.lead import Lead, Opportunity

from haystack import site
from haystack.indexes import *

class LeadIndex(SearchIndex):
    text = CharField(document=True, use_template=True)

    company = CharField(model_attr='company__name')

    contact_name = MultiValueField()
    contact_city = MultiValueField()
    contact_state = MultiValueField()
    contact_postcode = MultiValueField()
    contact_email = MultiValueField()
    contact_phone = MultiValueField()

    product = CharField(model_attr='product__name')
    campaign = CharField(model_attr='campaign__name')

    def index_queryset(self):
        """Used when the entire index for model is updated."""
        return Lead.objects.filter(pub_date__lte=datetime.datetime.now())

    def prepare_contact_name(self, obj):
        return [contact.name for contact in obj.contact_set.order_by('name')]

    def prepare_contact_city(self, obj):
        return [contact.city for contact in obj.contact_set.order_by('city')]

    def prepare_contact_state(self, obj):
        return [contact.state for contact in obj.contact_set.order_by('state')]

    def prepare_contact_postcode(self, obj):
        return [contact.postcode for contact in obj.contact_set.order_by('postcode')]

    def prepare_contact_email(self, obj):
        return [contact.email for contact in obj.contact_set.order_by('email')]

    def prepare_contact_phone(self, obj):
        return [contact.phone for contact in obj.contact_set.order_by('phone')]

site.register(Lead, LeadIndex) 
```

And my **`/templates/search/indexes/lead/lead_text.txt`** is just

```
{{ object.company__name }} 
```

What am I missing?

Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T15:18:40.370

您的索引类需要继承自*和* 。`indexes.SearchIndex``indexes.Indexable`

```
class LeadIndex(indexes.SearchIndex, indexes.Indexable):
    ... 
```

*请不要使用通配符导入 ( `*`)。这是非常糟糕的形式，会导致命名空间污染。*

# perl - perl code to merger multiple text files

> ID：11340818
> 
> 赞同：5
> 
> 时间：2012-07-05T08:48:22.580
> 
> 标签：perl

i have multiple text files.I have written code to input 2 files through shell and merge them.But how do i merge multiple files.Is system command useful in this purpose.

```
my @a = read_file($file1)
    or die "couldn't read $file1 - $!";
my @b = read_file($file2)
    or die "couldn't read $file2 - $!";

my $combined = {}; # hashref

my $i=0;
foreach (@a) {
    chomp;
    $combined->{$i}{b} = '' unless defined $combined->{$i}{b};
    $combined->{$i++}{a} = $_;
}

$i=0;
foreach (@b) {
    chomp;
    $combined->{$i}{a} = '' unless defined $combined->{$i}{a};
    $combined->{$i++}{b} = $_;
}

foreach my $i (sort {$a<=>$b} keys %$combined) {
    print $combined->{$i}{a}, ("\t" x 2), $combined->{$i}{b}, "\n";
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T09:02:17.433

据我了解，您可以同时为两个文件读取一行并打印用制表符分隔的每一行，例如：

```
use warnings;
use strict;

die unless @ARGV == 2;

open my $fha, q|<|, $ARGV[0] or die;
open my $fhb, q|<|, $ARGV[1] or die;

while ( my $a = <$fha>, my $b = <$fhb> ) { 
    chomp( $a, $b );
    printf qq|%s\t\t%s\n|, $a, $b; 
} 
```

如果文件的行数不同，此脚本将不起作用。对于这种情况，您将需要另一种方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T09:03:23.127

你可以简单地在 shell 中做到这一点：`cat file1.txt file2.txt file3.txt > selected.txt`

或者在 Perl 中：

```
use strict;

@ARGV = ('file1.txt', 'file2.txt', 'file3.txt');

open MULTI, '>', 'selected.txt' 
    or die $!;

while (<>) {
    print MULTI;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T09:40:33.890

怎么样：

```
#!/usr/bin/perl
use strict;
use warnings;

my @files = qw(file1 file2 file3 file4);
my %content;
my $max_rec = 0;

foreach (@files) {
    open my $fh, '<', $_ or die $!;
    @{$content{$_}} = <$fh>;
    chomp @{$content{$_}};
    close $fh;
    $max_rec = @{$content{$_}} if scalar(@{$content{$_}}) > $max_rec;
}

open my $fh, '>', 'outfile' or die $!;
for my $i (0 .. $max_rec) {
    my $out = '';
    foreach (@files) {
        $out .= defined($content{$_}[$i]) ? $content{$_}[$i] : '';
        $out .= "\t\t" unless $_ eq $files[-1];
    }
    print $fh $out,"\n";
} 
```

**输入文件：**

```
$ cat file1
1.1
$ cat file2
2.1
2.2
$ cat file3
3.1
3.2
3.3
$ cat file4
4.1
4.2
4.3
4.4 
```

**输出文件：**

```
$ cat outfile 
1.1     2.1     3.1     4.1
        2.2     3.2     4.2
                3.3     4.3
                        4.4 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T04:18:24.330

此脚本专注于 IO::File 的高性能，并且仅适用于在同一行上至少有一些非空白文本的文件。

```
#!/usr/bin/perl
use IO::File;
@f= map { IO::File->new($_) } @ARGV;
print $q,qq(\n) until ($q=join (qq(\t), map { m{(.*)} && $1 } map { $_->getline } @f))=~m{^\t+$} 
```

# binary - binary relation among prime numbers

> ID：11340820
> 
> 赞同：3
> 
> 时间：2012-07-05T08:48:32.337
> 
> 标签：binary, primes, series

Do we have any theory stating a relation between primes in binary system. I mean, in decimal system we have a pattern stating that "a number which is divided by 1 and itself is a prime".

This was learned in my school when i was kid. But modern computation is performed on bits, in sense they are 1's and 0's. But we calculate the prime nature based on our school knowledge. It works fine when the numbers are small. But questions calculating largest prime in integers, this logic doesn't make sense.

So if there exists any theory(may be already existing) stating a relation among primes in binary represention, then we can save lot of computing power. For ex, starting with a binary representation of prime, changing or adding bits yields next prime number saves lot of computational power.

This might not make sense. But these were my thoughts from last night. Please correct me if I am wrong or it doesn't make a sense at all.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T08:51:24.770

二进制只是将数字写为 2 的幂之和。在数学意义上，它与十进制没有显着不同。所以不，不会有任何二进制定理在十进制中没有一些平行。

在十进制中，以偶数或 5 结尾的数字不能是质数，除了 2 和 5。在二进制中，任何以偶数结尾的数字都`0`不能是质数，除了`10`（即 2）。

**编辑：**请参阅我几年前写的[这个答案，了解如何使用二进制算术优化而不是高级数学快速生成素数的示例。](https://stackoverflow.com/a/3941956/153285)这只是[Erastosthenes 的一个筛子](http://en.wikipedia.org/wiki/Sieve_of_Erastosthenes)，但几千年前的数学，甚至早于十进制系统，仍然可以用于 SSE 向量化。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-03-21T23:23:05.620

[梅森素数](https://en.wikipedia.org/wiki/Mersenne_prime)是有趣的素数，其二进制表示不包括任何`0`（所以只​​有`1`s）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T20:01:29.470

如果你想减少 CPU 周期来确定一个数字的素数，你应该 [使用椭圆曲线方法研究分解](http://www.alpertron.com.ar/ECM.HTM "使用椭圆曲线法进行因式分解")。我不知道它是如何工作的，但它非常快。

但是，我同意所有的评论。操作二进制表示中的位来确定数字是否为素数没有任何优势。

您还可以在[Emacs](http://www.gnu.org/software/emacs/)中运行素数分解

*   Mx 计算
*   投入大量
*   kf

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-20T06:16:07.333

素数二进制表示的一个有趣方面是有一些模式，以底部的这段代码为例。每个 True（奇数）后跟一个以相同数字结尾的数字。例如，这个素数 13，是一个奇数二进制数，后跟 3 个以 0 结尾的数字，然后是下一个素数（真）。所有二进制路径都遵循这种模式。只有素数在二进制表示中是奇数，并且跟随它们到下一个真实的数字之间的所有*END*直到下一个素数，它总是偶数，直到下一个奇数素数！另一个有趣的模式。所有 5 后面总是跟以 0 结尾的数字！所有 3 后面都是以 8 结尾的数字！等等！7 后跟以 2 结尾的数字。等等。我敢肯定还有更多的模式，但这很有趣，并且表明二进制数存在某种表示所有素数的基本模式。

它变得更加有趣。当偶数路径结束时，它的下一个数字总是以相同的数字结尾，以奇数结尾。例如，当以 0 结尾的数字路径结束时，下一个素数以 1 结尾。对于所有数字都是如此，它们都有一对与之相连！当以 8 结尾的数字运行结束时，下一个数字总是以 9 结尾！等等

```
13 1103823372545 True
14 17661173960720 False
15 282578783371520 False
16 4521260533944320 False
17 72340168543109121 True 
```

```
 ss = ""
for x in range(3,100):
   if isprime(x):
      ss += "1"
   else:
      ss += "0"
   print(x, int(ss,16), isprime(x))

3 1 True
4 16 False
5 257 True
6 4112 False
7 65793 True
8 1052688 False
9 16843008 False
10 269488128 False
11 4311810049 True
12 68988960784 False
13 1103823372545 True
14 17661173960720 False
15 282578783371520 False
16 4521260533944320 False
17 72340168543109121 True
18 1157442696689745936 False
19 18519083147035934977 True
20 296305330352574959632 False
21 4740885285641199354112 False
22 75854164570259189665792 False
23 1213666633124147034652673 True
24 19418666129986352554442768 False
25 310698658079781640871084288 False
26 4971178529276506253937348608 False
27 79538856468424100062997577728 False
28 1272621703494785601007961243648 False
29 20361947255916569616127379898369 True
30 325791156094665113858038078373904 False
31 5212658497514641821728609253982465 True
32 83402535960234269147657748063719440 False
33 1334440575363748306362523969019511040 False
34 21351049205819972901800383504312176640 False
35 341616787293119566428806136068994826240 False
36 5465868596689913062860898177103917219840 False
37 87453897547038609005774370833662675517441 True
38 1399262360752617744092389933338602808279056 False
39 22388197772041883905478238933417644932464896 False
40 358211164352670142487651822934682318919438336 False
41 5731378629642722279802429166954917102711013377 True
42 91702058074283556476838866671278673643376214032 False
43 1467232929188536903629421866740458778294019424513 True
44 23475726867016590458070749867847340452704310792208 False
45 375611629872265447329131997885557447243268972675328 False
46 6009786077956247157266111966168919155892303562805248 False
47 96156577247299954516257791458702706494276857004883969 True
48 1538505235956799272260124663339243303908429712078143504 False
49 24616083775308788356161994613427892862534875393250296064 False
50 393857340404940613698591913814846285800558006292004737024 False
51 6301717446479049819177470621037540572808928100672075792384 False
52 100827479143664797106839529936600649164942849610753212678144 False
53 1613239666298636753709432478985610386639085593772051402850305 True
54 25811834660778188059350919663769766186225369500352822445604880 False
55 412989354572451008949614714620316258979605912005645159129678080 False
56 6607829673159216143193835433925060143673694592090322546074849280 False
57 105725274770547458291101366942800962298779113473445160737197588480 False
58 1691604396328759332657621871084815396780465815575122571795161415680 False
59 27065670341260149322521949937357046348487453049201961148722582650881 True
60 433050725460162389160351198997712741575799248787231378379561322414096 False
61 6928811607362598226565619183963403865212787980595702054072981158625537 True
62 110860985717801571625049906943414461843404607689531232865167698538008592 False
63 1773775771484825146000798511094631389494473723032499725842683176608137472 False
64 28380412343757202336012776177514102231911579568519995613482930825730199552 False
65 454086597500115237376204418840225635710585273096319929815726893211683192832 False
66 7265385560001843798019270701443610171369364369541118877051630291386931085312 False
67 116246168960029500768308331223097762741909829912657902032826084662190897364993 True
68 1859938703360472012292933299569564203870557278602526432525217354595054357839888 False
69 29759019253767552196686932793113027261928916457640422920403477673520869725438208 False
70 476144308060280835146990924689808436190862663322246766726455642776333915607011328 False
71 7618308928964493362351854795036934979053802613155948267623290284421342649712181249 True
72 121892942863431893797629676720590959664860841810495172281972644550741482395394899984 False
73 1950287085814910300762074827529455354637773468967922756511562312811863718326318399745 True
74 31204593373038564812193197240471285674204375503486764104184997004989819493221094395920 False
75 499273493968617036995091155847540570787270008055788225666959952079837111891537510334720 False
76 7988375903497872591921458493560649132596320128892611610671359233277393790264600165355520 False
77 127814014455965961470743335896970386121541122062281785770741747732438300644233602645688320 False
78 2045024231295455383531893374351526177944657952996508572331867963719012810307737642331013120 False
79 32720387700727286136510293989624418847114527247944137157309887419504204964923802277296209921 True
80 523526203211636578184164703833990701553832435967106194516958198712067279438780836436739358736 False
81 8376419251386185250946635261343851224861318975473699112271331179393076471020493382987829739776 False
82 134022708022178964015146164181501619597781103607579185796341298870289223536327894127805275836416 False
83 2144363328354863424242338626904025913564497657721266972741460781924627576581246306044884413382657 True
84 34309813253677814787877418030464414617031962523540271563863372510794041225299940896718150614122512 False
85 548957012058845036606038688487430633872511400376644345021813960172704659604799054347490409825960192 False
86 8783312192941520585696619015798890141960182406026309520349023362763274553676784869559846557215363072 False
87 140532995087064329371145904252782242271362918496420952325584373804212392858828557912957544915445809152 False
88 2248527921393029269938334468044515876341806695942735237209349980867398285741256926607320718647132946432 False
89 35976446742288468319013351488712254021468907135083763795349599693878372571860110825717131498354127142913 True
90 575623147876615493104213623819396064343502514161340220725593595102053961149761773211474103973666034286608 False
91 9209970366025847889667417981110337029496040226581443531609497521632863378396188371383585663578656548585728 False
92 147359525856413566234678687697765392471936643625303096505751960346125814054339013942137370617258504777371648 False
93 2357752413702617059754859003164246279550986298004849544092031365538013024869424223074197929876136076437946368 False
94 37724038619241872956077744050627940472815780768077592705472501848608208397910787569187166878018177223007141888 False
95 603584617907869967297243904810047047565052492289241483287560029577731334366572601106994670048290835568114270208 False
96 9657353886525919476755902476960752761040839876627863732600960473243701349865161617711914720772653369089828323328 False
97 154517662184414711628094439631372044176653438026045819721615367571899221597842585883390635532362453905437253173249 True
98 2472282594950635386049511034101952706826455008416733115545845881150387545565481374134250168517799262486996050771984 False
99 39556521519210166176792176545631243309223280134667729848733534098406200729047701986148002696284788199791936812351744 False 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-18T12:01:29.673

我不知道重新开始这个话题是否有意义，但我找不到类似的方法。所以我坚持让我们开箱即用地思考。所以我开始在素数的二进制表示中寻找模式。我发现的第一件事是关于非素数的前导 0（2 除外），接下来我发现低于 100 的素数以 1 和其他一些有趣的模式开始和结束。但似乎没有一个一致的模式或所有素数的一组模式。我想如果有的话，其他计算机科学家会发现的。如果存在这些模式以找到更大的素数，这将使解密更快，并且某些身份验证更不安全，那么应用这些模式会更容易。

是否有人也对二进制素数进行研究，还是只是我想太多了？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-19T00:12:52.287

我发现以下有关此主题的有趣信息。George Spelvin 在电子邮件线程中写道。

> 我注意到的一件事是，评论中选择质数的建议是错误地引用了 Knuth！Knuth 说（第 3 卷第 6.4 节）该数字应该*与*字长互质，对于二进制计算机来说，这意味着奇数。

[https://lwn.net/Articles/687494/](https://lwn.net/Articles/687494/)

# jquery - AJAX 查询无法成功

> ID：11340827
> 
> 赞同：-1
> 
> 时间：2012-07-05T08:49:10.880
> 
> 标签：jquery, html, ajax

我在使用 JS 和 AJAX 提交表单后无法显示数据，这是我的代码：

```
<script type="text/javascript">
    $(function() {
      $(".button").click(function() {
      var name = $("#name").val();
      var message = $("#message").val();
      var dataString = 'name='+ name + '&message=' + message;

      if (name == '' || message == ''){
      $('#rez').html("Empty fields");

      }else{
          $.ajax({
              type: 'post',
              url: "post.php",
              data: datastring,
              success: function() {
                 $('#rez').html(name + " " + message);
              }
          });
      }

   return false;

    });
    });
</script> 
```

当我留下一些空白字段时，我只收到错误消息，但是当我填写所有字段时，我看不到打印结果。我做错了什么？如果我删除 ajax 查询并只留下如下代码中的结果字符串，则一切正常。感谢您的建议。

```
}else{      
            $('#rez').html(name + " " + message);
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T09:00:15.523

您需要在此处使用大写字母：

> 数据：数据**字符串**

```
 <script type="text/javascript">
        $(function() {
          $(".button").click(function() {
              var name = $("#name").val();
              var message = $("#message").val();
              var dataString = 'name='+ name + '&message=' + message;

              if (name == '' || message == ''){
                $('#rez').html("Empty fields");
              }
              else {
                 $.ajax({
                    type: 'post',
                    url: "post.php",
                    data: dataString,
                    success: function() {
                        $('#rez').html(name + " " + message);
                    }
                 });
                }
           return false;

        });
        });
    </script> 
```

# java - UserEntryListener is not invoked when user created in liferay 6.0.6

> ID：11340833
> 
> 赞同：0
> 
> 时间：2012-07-05T08:49:28.477
> 
> 标签：java, jboss5.x, liferay-6

I define a UserEntryListener in liferay hook:

```
package com.ggd543.liferay.listener;

public class UserEntryListener extends BaseModelListener<User> {

    @Override
    public void onAfterCreate(User model) throws ModelListenerException {
        System.out.println("==== onAfterCreate - uuid: " + model.getUuid());
    }

    @Override
    public void onAfterRemove(User model) throws ModelListenerException {
        System.out.println("==== onAfterRemove - uuid: " + model.getUserId());
    }

    @Override
    public void onAfterUpdate(User model) throws ModelListenerException {
        System.out.println("==== onAfterUpdate user - uuid: " + model.getUuid());
    }

    @Override
    public void onBeforeCreate(User model) throws ModelListenerException {
        System.out.println("==== onBeforeCreate - uuid: " + model.getUuid());
    }

    @Override
    public void onBeforeRemove(User model) throws ModelListenerException {
        System.out.println("==== onBeforeRemove - uuid: " + model.getUuid());
    }

    @Override
    public void onBeforeUpdate(User model) throws ModelListenerException {
        System.out.println("==== onBeforeUpdate user");
    }
} 
```

and in `docroot/WEB-INF/src/portal-ext/properties`:

```
value.object.listener.com.liferay.portal.model.User=com.ggd543.liferay.listener.UserEntryListener 
```

After deploy the hook onto liferay 6.0.6 bundled with Jboss 5.1.0 GA, I found that no matter create, update and remove action is performed through control pannel , the corresponding callback method of `UserEntryListener` is unable to invoke.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T10:21:45.907

确保你在 liferay-hook.xml 中包含了属性钩子：

```
<hook>
...
  <portal-properties>portal-ext.properties</portal-properties>
...
</hook> 
```

我在这里假设您的问题中有错字-`docroot/WEB-INF/src/portal-ext/properties`应该阅读`docroot/WEB-INF/src/portal-ext.properties`-对吗？

# iphone - can't show the scrollview indicator in a scrollview

> ID：11340836
> 
> 赞同：0
> 
> 时间：2012-07-05T08:49:38.060
> 
> 标签：iphone, ios, objective-c, uiscrollview

This is my ViewController:

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.imageView.image = self.image;
    self.scrollView.contentSize = self.imageView.image.size;
    self.imageView.frame = CGRectMake(0, 0, self.imageView.image.size.width, self.imageView.image.size.height);   
    self.title = [self.photo objectForKey:FLICKR_PHOTO_TITLE];
    self.scrollView.delegate = self;
}

- (void)viewDidAppear:(BOOL)animated
{
    [self.scrollView flashScrollIndicators];
    self.scrollView.showsHorizontalScrollIndicator = YES;
} 
```

But it didn't show anything. I already checked out several same questions in here and tried all the possible solutions, but none worked.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:23:12.093

我知道这是一个旧线程，但我遇到了它，所以......

水平或垂直滚动​​视图指示器仅在内容大于滚动视图时显示。因此，如果您的完整图像已经显示，则没有指示符。

# android - Android: targeted res folders for debugging in eclipse

> ID：11340837
> 
> 赞同：7
> 
> 时间：2012-07-05T08:49:41.027
> 
> 标签：android, eclipse, resources, directory

I have a project which I have a number of different branded versions, with two different res folders. ie. res-customer1, res-customer2 Using Maven build profiles I can easily build the project using the specified res folder.

However when it comes to eclipse its another story. What I want to do is to have a setting so that I can specify the res folder that I want, whilst debugging in eclipse.

Anyone know how I can do this?

My current work around is to copy the res-customer1 folder into the res folder work on it and debug in eclipse then move it back to res-customer1 before I can build it using Maven. I don't really want to be doing this as it will be easy to make a mistake and cause myself loads of problems, if I could just direct eclipse to the folder, rather than moving the folder for eclipse would be much less hassle.

Any ideas? Thanks in Advance

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-06T21:46:35.677

您可以在 Eclipse 中使用**Link Source**，右键单击您的项目，选择`Build Path`-> `Link Source...`：

**更新：**对于某些 Eclipse 版本，请使用[此链接](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.platform.doc.user/tasks/tasks-45.htm)

![在此处输入图像描述](../Images/8c72390a00550e4be201b3fcfd7eb771.png)

项目资源管理器中的最终外观：

![在此处输入图像描述](../Images/3af6318639448678196263146c7de0f5.png)

请注意 res 文件夹图标中的小符号![在此处输入图像描述](../Images/cbf65b16b6f12bf253f99d18ac2b2dc2.png)，它只是指向 res-customer1 文件夹的符号链接。这种方法的优点是文件系统中现有的项目文件夹保持不变，从一开始就不需要一个可靠的 res 文件夹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T09:19:21.973

只是一个，没有经过测试，但我想知道你是否可以将 res 文件夹作为一个符号链接到你的 res-custmer#folder 中的一个或另一个，然后有一个 shell 脚本来更改符号链接。我知道您可以在项目中拖放文件夹/文件并使其链接到它，而不是复制项目文件夹中的数据。

另一个想法可能是将您的 res-customer# 嵌入到库项目中，并包含一个或另一个项目（这可以通过在 project.properties 文件中注释行很容易地完成）

# java - jsp application in linux

> ID：11340839
> 
> 赞同：1
> 
> 时间：2012-07-05T08:49:54.257
> 
> 标签：java, linux, jsp

i have created a jsp application on netbeans which runs on Tomcat server.The home page of this application includes a login. The purpose of this application is that a logged in user can have a view of a file system usage of any linux system in the network by entering its ip address.The application uses "ssh username@ip" command to fetch the file system info. everything is working well but the problem is that when my application is accessed from a user in the network via the tomcat server,and he tries to retrieve a file system of some ipadd, password to that system is asked on the server computer, it should be asked on the same system the application is accessed from?? can anyone help?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T09:26:16.293

ssh 进程在服务器上启动（您的应用程序正在运行）...您可以使用[java ProcessBuilder](http://docs.oracle.com/javase/1.5.0/docs/api/index.html?java/lang/ProcessBuilder.html)获取 ssh 进程的输入和输出流，检测远程主机正在请求凭据并让您的应用程序询问他们的用户。您的应用程序也应该被访问`https`以确保一路安全。

# ruby-on-rails - Default disable_with for simple_form submit

> ID：11340843
> 
> 赞同：6
> 
> 时间：2012-07-05T08:50:01.497
> 
> 标签：ruby-on-rails, simple-form

I want to change the default behavior of my submit button in simple_form so that I needn't explicitly specify :disable_with => true for all my forms. How can I make this particular change in the simple_form.rb?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-24T08:58:45.883

这在较新版本的 Rails 中略有不同，因为不推荐设置属性 disable_with。我为此写了一篇文章：[http ://www.railsonmaui.com/blog/2014/02/23/simple-form-and-disable-processing-by-default/](http://www.railsonmaui.com/blog/2014/02/23/simple-form-and-disable-processing-by-default/)

这是新代码：

```
SimpleForm::FormBuilder.class_eval do
  def submit_with_override(field, options = {})
    data_disable_with = { disable_with: 'Processing...' }
    options[:data] = data_disable_with.merge(options[:data] || {})
    submit_without_override(field, options)
  end
  alias_method_chain :submit, :override
end 
```

感谢@Appster 的想法！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T10:31:45.100

将此覆盖添加到我的 simple_form.rb 就像一个魅力！

```
SimpleForm::FormBuilder.class_eval do
  def submit_with_override(field, options = {})
    submit_without_override(field, {:disable_with => 'saving...'}.merge(options))
  end
  alias_method_chain :submit, :override
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-03T10:43:36.990

根据[ActionView::Helpers::FormBuilder.submit](https://github.com/rails/rails/blob/7a085dac2a2820856cbe6c2ca8c69779ac766a97/actionview/lib/action_view/helpers/form_helper.rb#L1749)，`f.button`接受 1~2 个参数，因此以下两个代码都应该工作。

*   `f.submit "MyText", class: "my-btn"`
*   `f.submit class: "my-btn"`

就我而言，添加此代码来初始化文件工作正常。

```
SimpleForm::FormBuilder.class_eval do
  def submit_with_override(value=nil, options={})
    value, options = nil, value if value.is_a?(Hash)
    data_disable_with = { disable_with: 'Processing...' }
    options[:data] = data_disable_with.merge(options[:data] || {})
    submit_without_override(value, options)
  end
  alias_method_chain :submit, :override
end 
```

希望能帮助到你。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-25T06:27:17.770

它没有覆盖与 Rails 5 兼容的提交按钮上的任何现有数据属性。

```
module DisableDoubleClickOnSimpleForms
  def submit(field, options = {})
    if field.is_a?(Hash)
      field[:data] ||= {}
      field[:data][:disable_with] ||= field[:value] || 'Processing...'
    else
      options[:data] ||= {}
      options[:data][:disable_with] ||= options[:value] || 'Processing...'
    end
    super(field, options)
  end
end

SimpleForm::FormBuilder.prepend(DisableDoubleClickOnSimpleForms) 
```

# ios - iOS NSFetchedResultsController 使用背景上下文错误更新

> ID：11340845
> 
> 赞同：4
> 
> 时间：2012-07-05T08:50:12.040
> 
> 标签：ios, background, nsfetchedresultscontroller, nsmanagedobjectcontext

我有一个连接到 NSFetchedResultsController 的表格视图：

```
self.fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:request
                                                                        managedObjectContext:self.database.managedObjectContext
                                                                      sectionNameKeyPath:nil
                                                                               cacheName:nil]; 
```

我在这样的背景上下文中创建实体：

```
 NSManagedObjectContext *backgroundContext;
    backgroundContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];
    backgroundContext.parentContext = document.managedObjectContext; 

    [backgroundContext performBlock:^{
        [MyAPI createEntitiesInContext:backgroundContext];

        NSError *error = nil;
        [backgroundContext save:&error];
        if (error) NSLog(@"error: %@",error.localizedDescription);

        [document.managedObjectContext performBlock:^{
            [document updateChangeCount:UIDocumentChangeDone];
            [document.managedObjectContext save:nil];
        }]; 
```

现在，每当我获得新数据（以及如上所示的插入/更新实体）时，我的 NSFetchedResultsController 就无法正常工作。特别是，我总是更新一个实体（而不是创建一个新实体），但我的表格视图显示了两个实体。一旦我重新启动应用程序，它就会正确显示。

如果我在 self.database.managedObjectContext 中创建实体（[MyAPI createEntities]），一切正常。

我究竟做错了什么？我已经坚持了几个小时了。

# android - 如何确保文本适合区域

> ID：11340850
> 
> 赞同：0
> 
> 时间：2012-07-05T08:50:28.267
> 
> 标签：android, surfaceview, paint, font-size

我有一个`SurfaceView`我正在绘制矩阵（游戏板）的地方，矩阵的每个单元格的高度和宽度都是 40 像素。

在这些单元格中，我必须按照以下方式存储一个类似 Scrabble 的图块：

```
+---------+
|    #    |
|   # #   |
|  #   #  |
|  #####  |
|  #   #  |
|       17|
+---------+ 
```

字母始终是单个字母，数字始终是数字，最多两位数。

为了做到这一点，我实际上已经计算了单元格左上角像素在我的表面上的位置，我想要做的是将字母和数字绘制成特定的规格。

我需要确保数字适合给定区域（例如右下角的 10x10 单元格），并且字母在图块中居中而不会侵犯数字区域。

我目前计划使用`Paint.getTextBounds()`来计算最大字母和数字的大小，如果发现大小太大，我会简单地用较小的字体来做。

当然，我愿意接受有关更好方法的建议。即使*没有*更好的方法，我仍然有问题。

我设置绘画对象的方式是：

```
numPaint = new Paint();
numPaint.setStrokeWidth(1);
numPaint.setColor(Color.BLACK); 
```

文字的实际绘制很简单：

```
canvas.drawText(Integer.toString(num), pixcol + 30, pixrow + 30, numPaint); 
```

这*确实*将数字按预期放置在单元格的右下角，但我从未指定字体大小或任何其他可能阻止文本超出单元格的内容，例如，它最终为 15x15在尺寸方面。

它似乎完全靠运气。无论如何，我以`alphaPaint`完全相同的方式设置对象，但我希望它更大一点。

对不起，我只是想确保所有的细节都在那里。底线问题是：我们如何设置绘画对象的字体大小？该对象有一个`getFontMetrics()`但似乎没有`set...`等价物。最初看起来很有希望，`setTypeface()`但字体和粗体/斜体/等，没有提到强制特定大小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T09:03:20.817

要设置字体大小，请使用`numPaint.setTextSize()`. 这是文档的链接[`public void setTextSize (float textSize)`](http://developer.android.com/reference/android/graphics/Paint.html#setTextSize%28float%29)

# javascript - 如何使用纯 JavaScript 和 HTML5 创建客户端全文搜索引擎？

> ID：11340852
> 
> 赞同：24
> 
> 时间：2012-07-05T08:50:46.970
> 
> 标签：javascript, html, full-text-search, local-storage, client-side

我需要为离线存储（如 CDROM）中的离线 html 应用程序创建客户端搜索引擎。我已经用 Win32 创建了它，并且目录文件接近 2GB（MDB 文件）。

我的离线 Web 应用程序使用 CEF（Chromium Embedded Framework）和 PhoneGAP，因此我可以禁用浏览器 Web 安全性。我认为 IndexedDB 可能对我有帮助，但是无论如何我都找不到将存储文件复制到其他媒体的方法。

1.  我的目录文件将接近 2GB，因此我无法将所有记录读入内存。
2.  我需要使用 PhoneGAP 使输出媒体跨平台，所以我不能使用 activeX 对象进行最终搜索。我也可以通过该工具禁用网络安全限制。
3.  我可以使用任何 Windows 应用程序创建目录文件和媒体。关键说明查询目录的输出文件应该是纯 JavaScript。

是否有任何可用的 HTML5 大存储系统（我可以通过 PhoneGAP 禁用网络安全）来创建可以复制到其他可移动媒体的离线 HTML 应用程序搜索目录？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T13:24:26.463

Reyes 正在为此目的做一个全文搜索引擎：[https ://github.com/reyesr/fullproof](https://github.com/reyesr/fullproof)

在去年 9 月的 Paris JS 期间，他做了一个背后概念的介绍：http: [//kornr.net/prez/paris.js22/#/](http://kornr.net/prez/paris.js22/#/)

希望它能满足您的需求。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-01-14T10:17:12.887

我认为同时必须考虑[lunr.js。](http://lunrjs.com)它在 Github 上的星星是它的 3 倍。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T07:17:57.017

将整个数据库保存在 .json 文件中肯定效率不高，但是将数据库拆分为块并将它们保存为按需加载的 .json 文件可能工作得很好——尽管它需要测试。

和 - MongoDB 将数据库存储在[BSON](http://bsonspec.org/)中。您还可以考虑以这种文件格式存储您的数据库并从您的应用程序中加载它（我建议将整个数据库拆分为更小的部分）。

// 编辑 - 如果您要将数据库作为文件提供，那么我认为不可能设置任何类型的权限。您可以尝试加密/混淆文件，但我不知道这将如何影响性能或数据库的内容。

是的，可以有一个独立的 html+js 应用程序来读取 BSON 数据库，而无需任何类型的服务器。如果您想了解更多信息，请查看[此链接。](http://granular.cs.umu.se/browserphysics/?p=1025)我以前听说过这个，但是我完全没有在纯 JS 中处理 BSON 文件的经验，所以我无法帮助你。我所能做的就是让你知道这样的事情存在:)

# android - Android：使用 DownloadManager 从 Internet 下载文件并将其保存到内存中

> ID：11340853
> 
> 赞同：4
> 
> 时间：2012-07-05T08:50:51.633
> 
> 标签：android, memory, storage, internal, download-manager

我正在使用`DownloadManager`. 我正在使用以下方法将此文件保存在 sdcard 上：

```
DownloadManager.Request req = new DownloadManager.Request(Uri.parse("file path"));
req.setTitle("file title").setDescription("Downloading ....") // download the package at the /sdcard/download path.
.setDestinationInExternalPublicDir(Environment.DIRECTORY_DOWNLOADS, "file name"+ "file extension"); 
```

我想将其保存到内部存储中。怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T08:54:46.090

使用这条路径`.setDestinationInExternalPublicDir(Environment.getExternalStorageDirectory() +"/Android/data/xxx.xxx.xxx/files/")`

# c# - 将位图转换为字节

> ID：11340854
> 
> 赞同：0
> 
> 时间：2012-07-05T08:50:57.423
> 
> 标签：c#, winforms

我正在使用 winform (C#)。我将图像作为位图，我想将位图转换为字节以插入数据库。那么，你能告诉我该怎么做吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T08:53:15.593

您可以使用 ImageConverter 获取字节数组形式的图像

```
public static byte[] GetBytesOfImage(Image img)
{
    ImageConverter converter = new ImageConverter();
    return (byte[])converter.ConvertTo(img, typeof(byte[]));
} 
```

或者您可以使用 BitmapImage 进行转换。

*使用这两种方法将位图转换为字节数组，将字节数组转换为位图。*

```
public Byte[] BufferFromImage(BitmapImage imageSource)
{
    Stream stream = imageSource.StreamSource;
    Byte[] buffer = null;
    if (stream != null && stream.Length > 0)
    {
        using (BinaryReader br = new BinaryReader(stream))
        {
            buffer = br.ReadBytes((Int32)stream.Length);
        }
    }

    return buffer;
}
public BitmapImage ImageFromBuffer(Byte[] bytes)
{
    MemoryStream stream = new MemoryStream(bytes);
    BitmapImage image = new BitmapImage();
    image.BeginInit();
    image.StreamSource = stream;
    image.EndInit();
    return image;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T08:56:29.503

您可以为此使用以下代码：

```
Bitmap myBitmap = ...;
var imageStream = new MemoryStream();
using (imageStream)
{
    // Save bitmap in some format.
    myBitmap.Save(imageStream, ImageFormat.Jpeg);
    imageStream.Position = 0;

    // Do something with the memory stream. For example:
    byte[] imageBytes = imageStream.ToArray();
    // Save bytes to the database.
} 
```

作为旁注，我不知道您的图像有多大以及您使用什么数据库，但是在数据库中存储大 blob 通常不是一个好主意，性能方面。大型 blob 的文件系统性能比数据库性能好得多。SQL Server[直接支持](http://technet.microsoft.com/en-us/library/bb933993%28SQL.105%29.aspx)在文件系统上以事务方式存储 blob（他们建议将其用于 1MB 或更大的文件）。

在数据库中存储文件时，我发现 SQL Server Compact 的读取性能严重下降。我不知道其他数据库在存储大 blob 时的表现如何。

另一种可能的解决方案是将图像存储在文件系统上，并在数据库中有指向文件的指针。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T08:58:03.967

您可以使用[`Bitmap.Save`](http://msdn.microsoft.com/en-us/library/system.drawing.bitmap.save.aspx)将位图的内容保存到流中。您可以将其与这样的一起使用`MemoryStream`：

```
 MemoryStream memoryStream = new MemoryStream();
    Bitmap newBitmap = new Bitmap();
    newBitmap.Save(memoryStream, ImageFormat.Bmp);
    byte[] bitmapRecord = memoryStream.ToArray(); 
```

# vb.net - 如何使用 VB.NET 项目强制客户端在启动时更新应用程序？

> ID：11340855
> 
> 赞同：2
> 
> 时间：2012-07-05T08:50:59.510
> 
> 标签：vb.net, visual-studio-2008, clickonce

我们有一个使用 Visual Studio 2008 用 VB.NET 编写的项目，该项目将安装在 17 台客户端机器上。

我们正在启动该项目并遇到了一个问题。

我们在 Visual Studio 中创建了一个安装程序，并在客户端计算机上运行了 setup.exe。一切正常，但如果同时我们发布另一个更新，在启动时用户会收到一条通知，说明该项目的新版本可用。

这是图片的链接，因为我没有足够的声誉来上传图片： http: [//postimage.org/image/7l7w6u841/](http://postimage.org/image/7l7w6u841/)

问题是弹出的消息框有一个“确定”和“取消”按钮，如果用户不小心点击了“取消”，他们的程序将不会更新，这意味着他们将运行旧版本，这可能会导致问题。

我的问题是：有没有办法强制用户在启动时更新项目，就像“你要么更新要么不能登录”类型的东西？

感谢您的时间，任何帮助将不胜感激

菲尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T10:21:36.617

如果您使用 ClickOnce，可以通过指定最低要求版本来完成

> *有时您可能希望要求用户运行应用程序的更新版本。例如，您可能会对外部资源（如 Web 服务）进行更改，这会阻止早期版本的应用程序正常工作。在这种情况下，您可能希望将您的更新标记为需要并阻止用户运行早期版本。要将更新标记为需要，请在“应用程序更新”对话框中单击“指定此应用程序所需的最低版本”，然后指定发布版本（Major、Minor、Build、Revision），它指定了可以使用的应用程序的最低版本号被安装。有关详细信息，请参阅应用程序更新对话框。*

[http://msdn.microsoft.com/en-us/library/s22azw1e (v](http://msdn.microsoft.com/en-us/library/s22azw1e(v=vs.100).aspx) **=vs.100** ).aspx （向下滚动到需要更新）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T08:56:05.990

最简单的方法可能是：

*   在服务器上提供有关成为最新版本号的信息
*   让应用程序在登录前检查此项
*   失败的请求应该使用正在运行的版本号
*   让应用程序将此值与正在运行的版本进行比较，如果更大则不允许登录

**编辑**

这是一些伪代码，假设最新版本号在[http://somewhe.re/version.txt](http://somewhe.re/version.txt)

```
//Application start

System.Reflection.AssemblyName an=new System.Reflection.AssemblyName(System.Reflection.Assembly.GetExecutingAssembly().FullName);
Version current_version=an.Version;

String httptext;
Version server_version=current_version;
try {
  httptext=//Result from http://somewhe.re/version.txt
  server_version=new Version(httptext);
} catch {}

if (server_version>current_version) {
  //You must update!
} 
```

# python - python pytz，DST 不包含在转换中

> ID：11340858
> 
> 赞同：2
> 
> 时间：2012-07-05T08:51:15.020
> 
> 标签：python, pytz

我正在将一个天真的日期时间对象转换为另一个时区。但它不包括 DST（夏令时）。这就是我所做的：

```
#my datetime object
datetime_from #contains: 05, 07, 2012, 10 00 --- (05-07-2012 10:00)

#Add timezone
ams = datetime_from.replace(tzinfo=pytz.timezone('Europe/Amsterdam'))

print(ams.hour) #prints 10

#convert to GMT
gmt = datetime.astimezone(ams, pytz.timezone("GMT"))

print(gmt.hour) #prints 9 
```

问题是，由于 DST，gmt.hour 应该打印 8 而不是 9。

有没有一种简单的方法可以在此转换中包含 DST？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T08:53:58.000

```
>>> pytz.timezone('Europe/Amsterdam').localize(datetime(2012, 7, 5, 10, 0)).astimezone(pytz.timezone('GMT'))
datetime.datetime(2012, 7, 5, 8, 0, tzinfo=<StaticTzInfo 'GMT'>) 
```

# ruby - gem安装错误

> ID：11340859
> 
> 赞同：2
> 
> 时间：2012-07-05T08:51:17.453
> 
> 标签：ruby, rubygems

每当我尝试使用 gem 安装任何东西时，我都会收到此错误 -

```
murtaza@murtaza-dev:~$ sudo gem install rhc
[sudo] password for murtaza: 
Invalid gemspec in [/var/lib/gems/1.8/specifications/commander-4.1.2.gemspec]: invalid date format in specification: "2012-02-17 00:00:00.000000000Z"
Invalid gemspec in [/var/lib/gems/1.8/specifications/commander-4.1.2.gemspec]: invalid date format in specification: "2012-02-17 00:00:00.000000000Z" 
```

我正在使用 rvm，但似乎它正在从 rvm 以外的目录中提取宝石。我该如何补救？

它还使用 rvm 的 ruby​​ 安装，如下所示 -

```
murtaza@murtaza-dev:~$ which ruby
/home/murtaza/.rvm/rubies/ruby-1.9.2-p320/bin/ruby 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T09:01:47.583

好像您正在使用系统 ruby​​，这是您的 RVM 的默认设置，这意味着它使用系统路径而不是 RVM 路径。RVM 路径与通过 RVM 安装的 rubies 一起使用。这可能就是您看到这些路径的原因。

# android - Android查询和存储联系人重复号码

> ID：11340863
> 
> 赞同：0
> 
> 时间：2012-07-05T08:51:28.557
> 
> 标签：android, android-contacts

我目前正在尝试查询所有联系人并存储到数据库中。但是，我意识到这个问题，如果我的联系人有多个号码，它会返回相同的联系人姓名和其他多个号码。但如果我的联系人有电子邮件，则查询将重复相同的姓名和相同的号码。我可以知道我该如何解决这个问题吗？我只想存储名称和号码一次。我不想与电子邮件有任何关系。

通过定义我只想要 TYPE_MOBILE，我设法只获得了手机号码。但是，我意识到如果我的联系人有 Google +，则查询会重复相同的姓名和相同的号码。谁能指导我沿着这条线？谢谢！

这是我正在使用的代码：

```
Cursor phones = getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null,null,null, null);
while (phones.moveToNext()) {
    int phoneType = phones.getInt(phones.getColumnIndex(Phone.TYPE));
    if (phoneType == Phone.TYPE_MOBILE)
    {
          mobile = phones.getString(phones.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DATA));
          mobile = mobile.replaceAll("\\s", "");
          id = phones.getString(phones.getColumnIndex(ContactsContract.Contacts._ID));
          name=phones.getString(phones.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
          long idL = DbHelper.createContact(name, "", mobile, "", id);
          if (idL > 0) {
                mRowId = idL;
          }
    }   
    phones.close();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T09:09:15.877

不要将数字保存到您的数据库中。在 Android 上执行此操作不是正确的方法。当您需要查找号码查询联系人和搜索的名称时。因为用户可以更改有关联系人的信息，因此您的数据库中将拥有旧数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T05:10:22.133

```
ArrayList<String> list =new ArrayList<String>(); 
```

在你的 while 循环中

```
if(!list.contains(mobile)){
    list.add(mobile);
} 
```

填写列表后，您可以保存它们。

但是，我认为将数字保存到您的数据库也是如此。而不是保存他们，而是保存他们的 ID。

# oracle - 什么是 Oracle 数据集成器？

> ID：11340872
> 
> 赞同：10
> 
> 时间：2012-07-05T08:52:00.957
> 
> 标签：oracle

什么是 ODI？ODI的实际用途是什么？oracle数据集成器工具如何帮助编程？sql 开发人员工具和 ODI 工具之间实际上有什么区别？真的厌倦了在某些网站上找到的定义，如果有人能提供 gud 解释，那就太好了。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-12T16:31:10.420

我完全同意甲骨文网站令人困惑，这些产品描述不是为技术人员编写的，而是由营销部门编写的。

让我试着用简单的话来解释。ODI 是一个 ETL 工具 - 准确地说是 EL-T 工具。您可以在 wiki 上阅读有关 ETL 与 EL-T 的更多信息。

甲骨文以前卖 OWB（Oracle Warehouse Builder），然后他们从 Sunopsis 购买了 ODI。OWB 将不再受支持，ODI 将成为许多 Oracle 应用程序使用的工具。

您可以使用 ODI 做很多事情，但主要用于从源（文件、数据库）中提取数据、在暂存区域中转换数据并加载到目标数据库。ETL 项目通常需要花费大量时间和精力，虽然您可以通过编写自定义代码来做类似的事情，但 ETL 工具可以帮助开发人员轻松完成这些艰巨的任务。ETL 工具用于数据集成项目、数据仓库等。

如果您听说过 MS SQL Server 附带的 Microsoft SSIS 工具 - 那应该会让您了解 ODI 的用途。

这是一份很好[的白皮书](http://www.oracle.com/technetwork/middleware/data-integrator/learnmore/odi-best-practice-data-warehouse-168255.pdf)，它解释了如何使用 ODI 以及与自定义编码相比有哪些好处。

Oracle 还提出了一个名为 ODI 数据服务的 ODI 版本——一种将 ODI 扩展到 SOA 市场的营销技巧。

他们还销售用于实时 ETL 和数据联合项目的 Golden Gate 产品，这些项目可以与其他应用程序和 Web 服务很好地配合使用。数据联合是一个实时合并/集成数据的过程，无需执行任何 ETL。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-03T15:04:23.613

ODI 是一种 ETL 工具。与竞争产品相比，它有两个主要优势：

1) 它使用ELT 类型的方法，即所有的转换都发生在SQL 中的目标数据仓库服务器上。这意味着 ODI 不是黑匣子，开发人员确切地知道发生了什么。这非常适合调试。这也意味着 ODI 可以利用目标仓库服务器的强大功能，并且不需要像传统的 ETL 工具、Informatica 等任何额外的应用程序服务器。它降低了 TCO。

2) ODI 相对于竞争产品的主要优势是代码模板方法。这保证了您和您的开发人员的 ETL 代码的极端可重用性。数据转换逻辑和策略封装在所谓的知识模块中，可以在您的数据仓库中重复使用。这可以将开发时间缩短 30-50%。

可以在 BI Quotient 博客上找到[ODI 教程](http://www.business-intelligence-quotient.com/?p=379)的链接

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T09:25:19.027

[以下是Oracle ODI FAQ](http://www.oracle.com/technetwork/middleware/data-integrator/odi-11g-faq-168660.html#gen1)上的简要说明：

> **什么是 Oracle 数据集成器 (ODI)？**
> 
> Oracle Data Integrator 是一个全面的数据集成平台，涵盖了所有数据集成需求：从大容量、高性能的批处理加载到事件驱动的涓流馈送集成流程，再到支持 SOA 的数据服务。
> 
> **哪些项目适合 Oracle Data Integrator？**
> 
> Oracle Data Integrator 可用于多个项目，包括：
> 
> *   常规数据集成
> *   商业智能和数据仓库
> *   现代化举措
> *   迁移和合并
> *   面向服务的架构 (SOA) 计划
> *   主数据管理

# erlang - Erlang 应该如何处理常见数据？

> ID：11340878
> 
> 赞同：4
> 
> 时间：2012-07-05T08:52:14.627
> 
> 标签：erlang

假设我正在使用 Erlang 构建游戏服务器。

每个用户检查某事（例如寻找最近的玩家）是非常普遍的循环，因此通常有一个经理类。

在上述情况下，我们使用互斥锁。

据我所知，Erlang 通常为每个 TCP 连接（用户会话）创建新的 Erlang 进程。那么，用户会话列表是如何进行流通的呢？

如果我有这些用户会话的父进程并询问父进程，它可能是一个瓶颈？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-05T12:56:42.057

现在，在你继续之前，你可以看看这些问题和答案：[Erlang: Distributed work on an array](https://stackoverflow.com/q/9104447/431620)， [](https://stackoverflow.com/q/9104447/431620) [具有长时间运行任务的 Erlang gen_server](https://stackoverflow.com/q/8879177/431620)，以及[什么是 Erlang 最好、最有效的客户端池技术](https://stackoverflow.com/q/9097694/431620)现在，了解[ETS Tables](http://www.erlang.org/doc/man/ets.html)和[Mnesia](http://www.erlang.org/doc/man/mnesia.html)。然后你也许可以看看[GProc](http://rustyklophaus.com/articles/20090916-GProcErlangGlobalProcessRegistry.html)。制作一个特别是为游戏保存状态数据的进程是危险的，因为当进程退出时状态可能会丢失。重新启动崩溃的进程很容易，但它所持有的数据会丢失。通常，我们需要不会丢失的内存数据存储，除非整个 erlang VM 宕机（在这种情况下，如果您需要 RAM 之外的持久性，您仍然需要[DETS Tables](http://www.erlang.org/doc/man/dets.html)或 Mnesia）。[](https://stackoverflow.com/q/9097694/431620)

过程字典通常不被鼓励，但它们仍然被证明是非常有用的。然而，就个人而言，ETS Tables 为我节省了很多。它们可以从一个崩溃的进程转移到下一个活着的进程。它们可以转储到磁盘或从磁盘加载，它们可以处理大量数据。

只需研究更多关于 Erlang 中使用的 IN-Memory 存储。它的 BTW 也可以使用 erlang VM 之外的存储，如 Memcached、Raik、CouchBase 等。但是，在某些情况下，游戏可以分解为一个数据结构，如[Queues](http://learnyousomeerlang.com/a-short-visit-to-common-data-structures#queues)或[Lists](http://learnyousomeerlang.com/starting-out-for-real#lists)或[Records](http://learnyousomeerlang.com/a-short-visit-to-common-data-structures#records)，一个可以保存在进程字典中。此外，这将取决于向客户端提供游戏服务的方式。如果游戏使用 HTTP (RESTFUL)，那么您还将了解要应用哪些 Erlang 库（[Mochiweb、Yaws](https://stackoverflow.com/a/6466089/431620)等）。只需按照整个[教程](http://learnyousomeerlang.com/content)进行操作，您就会发现一切。

# validation - 我想使用约束“InList”来验证域，如何忽略敏感（不区分大小写）

> ID：11340879
> 
> 赞同：2
> 
> 时间：2012-07-05T08:52:17.650
> 
> 标签：validation, grails

code:`static constraints = { titleStr size:1..120 categoryStr nullable: false,inList:['For Sale', 'For Rent'] }` 当 categoryStr 为 For rent 时，会返回错误

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T09:21:41.317

我会使用[自定义验证器](http://grails.org/doc/latest/ref/Constraints/validator.html)来进行不区分大小写的检查：

```
static constraints = {
    titleStr size:1..120
    categoryStr validator: { ['for sale', 'for rent'].contains(it.toLowerCase()) }
} 
```

# crystal-reports - 报告 - p2sodbc.dll

> ID：11340881
> 
> 赞同：0
> 
> 时间：2012-07-05T08:52:22.830
> 
> 标签：crystal-reports, report

嗨，

我们的 IS 还能够从我们的数据库中的数据构建、预览和打印报告（*.rpt - 水晶报告）。

但在一台计算机上，所有报告都是空白的——白页。当用户连接到其他计算机上的 IS 时，一切正常 - 因此权限正常。

有关信息：我们必须将“p2sodbc.dll”复制到每台计算机上的“c:\windows\system”目录中，并且它可以工作（没有安装水晶报告查看器），但在该特定计算机上没有成功。

任何帮助将不胜感激。

感谢和问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T06:04:59.210

我找到了一个解决方案，它不是“p2sodbc.dll”错误...我将“crpe32.dll”复制到“c:\windows\system32”，现在它可以工作了。以前的版本是 1997 年的，较新的是 2001 年。

# c# - 在不创建额外内存的情况下反转字符串

> ID：11340886
> 
> 赞同：5
> 
> 时间：2012-07-05T08:52:45.453
> 
> 标签：c#

我有一个大约 1mb 大小的字符串。要求是在不分配另一个大小为 1 MB 的临时字符串的情况下反转字符串。我尝试了以下代码

```
string name = "abcde";

string target = "";
for(int i = name.Length - 1; i >=0; i--)
{
    target += name[i];
    name = name.Remove(i);                
    int n = name.Length;
} 
```

但是我的朋友说如果我们使用该函数`name.Remove(i)`，它将返回一个新字符串，但不能保证旧字符串会从内存中删除，因此不能保证大小会减小。是真的吗？如果是这样，是否有任何其他选项可用于在不分配额外内存的情况下反转字符串？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-05T08:56:55.453

您的字符串“abcde”是内存中的常量。你不能改变它，因为它是不可变的。您想要的是创建一个新字符串，为此您需要新的内存。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-05T09:00:45.830

使用`StringBuilder`您可以使用 char 数组进行操作，但不能使用`string`，因为它是不可变的

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-05T08:57:25.470

字符串是不可变的，如果不分配新内存就无法反转它

[来自 MSDN 的字符串](http://msdn.microsoft.com/en-us/library/362314fe.aspx)

> 字符串是不可变的——字符串对象的内容在创建对象后不能更改，尽管语法使它看起来好像您可以这样做。

从同一个链接看到这个例子：

```
string b = "h";
b += "ello"; 
```

和解释。

> 当您编写此代码时，编译器实际上会创建一个新的字符串对象来保存新的字符序列，并将该新对象分配给 b。然后字符串“h”就可以进行垃圾回收了。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-05T08:57:39.910

字符串是不可变的。当您声明它时，您无法更改它。所以无论你尝试什么，都会创造和使用新的记忆。

```
string name = "aaaaa":
name = name.Remove(0); // this is allocating new memory. 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-07-13T07:47:33.163

```
class Program
{
    static void Main(string[] args)
    {
        //Note how I don't bother to use a variable?
        //This is a nasty hack that knows the compiler will intern the value.
        //One of the many downsides of hacking the BCL.
        while (string.IsNullOrWhiteSpace(Console.ReadLine()))
        {
            Console.WriteLine("he\0llo");  
            "he\0llo".ReverseInPlace();
        }
    }
}

public static class Helper
{
    //Does not support multi-char values.
    public static unsafe void ReverseInPlace(this string str)
    {
        fixed (char* pfixed = str)
            for (int i = 0, ii = str.Length - 1; i < str.Length / 2; i++, ii--)
            {
                var p1 = (char*)pfixed + i;
                var p2 = (char*)pfixed + ii;
                var temp = *p1;
                *p1 = *p2;
                *p2 = temp;
            }
    }
} 
```

如果你使用这个，你可能会死……或者什么。哎呀，我什至不知道如何编写不安全的代码。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-05T08:59:12.410

如果您对原始数据有一定的控制权，您应该能够做到这一点。例如，如果您可以要求 a`char[]`而无需创建 a `string`，则可以将其原地反转。

例如，在*您的*示例中，您可以`var name = new char[] { 'a', 'b', 'c', 'd', 'e'}`代替字符串，然后将其反转。

（显然你不能对一个 1MB 的字符串执行此操作，但是无论你从哪里获取字符串，如果你最初可以将它加载为`char[]`...）

如果你只能有一个`string`，那你就不走运了。它们是不可变的——您只能通过以某种方式复制字符串来修改它。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-05-12T05:56:25.703

StringBuilder 是可变的，在这种情况下应该给你最好的效率

```
string inpuStr = "The quick brown fox jumped over the lazy dog...blah blah blah up to 1MB";
StringBuilder builder = new StringBuilder();
            for (int i = inpuStr.Length - 1; i >= 0; i--)
            {
                builder.Append(inpuStr[i]); 
            }
           return builder.ToString(); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-05T08:54:51.360

编辑：完全失去了情节，最近使用 C++ 太多了，我忘记了 C# 字符串是不可变的。

简而言之，您必须分配新内存来更改 C# 中的字符串。您可以通过执行以下操作以最直接的方式执行此操作：

```
string ReverseString(string value)
{
    if (!string.IsNullOrEmpty(value))
    {
        char[] newBuffer = new char[value.Length];
        for(int i = 0; i < value.Length; i++)
            newBuffer[newBuffer.Length - i - 1] = value[i];
        value = new string(newBuffer);
    }
    return value;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-07-05T08:56:25.163

```
you can try with linq to reverse

    string original = "abcde";
    string reverseValue = new string(original.Reverse().ToArray());

you can try also with 

string result= new string(original.Select((c, index) => new { c, index })
                                         .OrderByDescending(x => x.index)
                                         .ToArray()); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-07-05T09:31:30.597

实际上，如果不至少分配与要反转的字符串所占用的内存量相同的内存量，就没有正确的方法来反转字符串。（理论上它可以在内存中反转一个字符串，但这是非常不推荐的，我什至不会进入那个区域）。现在至于反转字符串本身。我正在做一个名为 StringExtensions 的小项目，在这个项目中，我尝试解决使用字符串时可能出现的所有问题。最大的问题之一是使用在整个框架中广泛使用的 UTF-16 编码。我反转字符串的实现如下所示：

```
 static IEnumerable<Tuple<int, int>> GetTextElementSegments(string value)
    {
        int[] elementOffsets = StringInfo.ParseCombiningCharacters(value);

        int lastOffset = -1;
        foreach (int offset in elementOffsets)
        {
            if (lastOffset != -1)
            {
                int elementLength = offset - lastOffset;
                Tuple<int, int> segment = new Tuple<int,int>(lastOffset, elementLength);
                yield return segment;
            }

            lastOffset = offset;
        }

        if (lastOffset != -1)
        {
            int lastSegmentLength = value.Length - lastOffset;

            Tuple<int, int> segment = new Tuple<int, int>(lastOffset, lastSegmentLength);
            yield return segment;
        }
    }

    static void Main(string[] args)
    {
        string input = "t\u0301e\u0302s\u0303t\u0304";
        StringBuilder resultBuilder = new StringBuilder(input.Length);

        var segments = GetTextElementSegments(input);

        foreach (var segment in segments.Reverse())
        {
            resultBuilder.Append(input, segment.Item1, segment.Item2);
        }

        Debug.Assert(resultBuilder.ToString() == "t\u0304s\u0303e\u0302t\u0301s");
    } 
```

请注意，这会处理代理对、unicode 标记代码点，并且只分配与输入字符串本身占用的内存量相似的内存。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-07-11T07:03:50.780

如果您真的很重视没有额外的分配，`fix`则需要字符串并使用`unsafe`指针代码。或者，也许，`char[]`使用反射获得对内部的引用。

你真的不想这样做。真的。我的意思是，**真的**。请不要这样做，除非作为学习练习。如果人们在生产中发现这样的代码，他们很可能会带着武器来找你。

我不会尝试编写这样的代码（因为我知道我会弄错的）。但这里有一些链接可以帮助您入门：

*   [Strings Undocumented](http://www.codeproject.com/Articles/3377/Strings-UNDOCUMENTED) - 一篇很老的文章，但有最好的例子。
*   [John Skeet on Strings](http://csharpindepth.com/Articles/General/Strings.aspx) - 对于你想要的东西来说有点高水平，但是一个很好的起点。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-04-02T11:13:21.207

我刚刚通过使用字符串的 toCharArray() 函数和 XOR 操作来交换字符为此做了一个 Java 解决方案：

```
public static String reverseString(String str) {
    return reverseStringXor(str.toCharArray(), 0, str.length() - 1);
}

private static String reverseStringXor(char[] str, int start, int end) {
    while (start < end) {
        str[start] ^= str[end];
        str[end] ^= str[start];
        str[start] ^= str[end];
        start++;
        end--;
    }
    return String.valueOf(str);
} 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2012-07-05T08:56:39.290

这应该有帮助

```
string reverse = new string("ABCDEFGHI".ToCharArray().Reverse().ToArray()); 
```

* * *

## 回答 #14

> 赞同：-2
> 
> 时间：2015-06-25T06:20:57.700

这是你的答案之一。

```
 for (int i = textBox1.TextLength - 1; i >= 0; i--)
 {
    textBox1.Text += textBox1.Text[i];
 }
 textBox1.Text = textBox1.Text.Remove(0, textBox1.Text.Length / 2); 
```

# java - Java List 里面有两个对象：List Is it possible to do the following? List listWithTwoObjects; I want to retrieve data from a database and save it into this li 问问题 问问题 2012-07-05T08:52:58.640 25772 次 This question shows research effort; it is useful and clear 4 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. Is it possible to do the following? List listWithTwoObjects; I want to retrieve data from a database and save it into this list, concretely in this way Query query = "retrieve all posts and username, which this user posted"; List userAndPost = query.getResultList(); o is the username, and p is the post. I can then render this to my template and show each post with its user. My question is about the List with two Objects inside. Is it possible and if yes, how and where is the documentation for this? You can define a Pair class as follows: public class Pair { String username; int post; public Pair(String username, int post) { this.username = username; this.post = post; } } and then simply use List<pair>, for example: List <pair>pairs = new ArrayList<pair>(); pairs.add(new Pair("doniyor", 12345)); // ... Pair p = pairs.get(0); System.out.pritnln(p.username); // doniyor System.out.pritnln(p.post); // 12345 javalistplayframework-2.0 4 3 回答 3 This answer is useful 18 Pair您可以按如下方式定义一个类： public class Pair { String username; int post; public Pair(String username, int post) { this.username = username; this.post = post; } } 然后简单地使用List<pair>，例如： List <pair>pairs = new ArrayList<pair>(); pairs.add(new Pair("doniyor", 12345)); // ... Pair p = pairs.get(0); System.out.pritnln(p.username); // doniyor System.out.pritnln(p.post); // 12345 于 2012-07-05T08:54:54.557 回答 This answer is useful 2 If i understand correctly you want to have all posts of a user, so instead of using List you should use Map: Map<string,list<post>> map = new HashMap<string,list<post>>(); Then, the key(String) would be the userName and the value would be a list of Post objects. 于 2012-07-05T08:59:53.757 回答 This answer is useful 1 You can't define a list like that, but you can use a Map, with username as key and post as value. Or is there a particular reason to use a list? 于 2012-07-05T09:01:00.317 回答 Related 2 mysql - 创建表时出错：第 1 行的“order(order_id INT UNSIGNED NOT NULL AUTO_INCREMENT, user_id”附近的 SQL 语法有错误 2 sql-server - 存储过程在通过 RPC 调用时有时会超时，但在 SQL 中调用时总是可以的 3 bash - 如何使程序由脚本顶部的#!/bin/foo 调用？ 1 javascript - 仅针对条形图，flotr2 不会使用时间戳呈现 1 oracle - 使用集群表模拟列式存储 8 jquery - 替换单词 在 使用 jQuery 1 objective-c - 在 iOS 中管理从 SQLite 数据库返回的多行和多列 4 lua - Lua ""==true 等于 ""==false 2 android - 相同的图片，但同一部智能手机上的分辨率不同 1 regex - perl 正则表达式匹配第一次出现 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：11340889
> 
> 赞同：4
> 
> 时间：
> 
> 标签：java, list, playframework-2.0

Is it possible to do the following?

```
List<Object o, Object p> listWithTwoObjects; 
```

I want to retrieve data from a database and save it into this list, concretely in this way

```
Query query = "retrieve all posts and username, which this user posted";
List<Object o, Object p> userAndPost = query.getResultList(); 
```

`o` is the username, and `p` is the post. I can then render this to my template and show each post with its user.

My question is about the List with two Objects inside. Is it possible and if yes, how and where is the documentation for this?

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-05T08:54:54.557

`Pair`您可以按如下方式定义一个类：

```
public class Pair
{
    String username;
    int post;

    public Pair(String username, int post)
    {
        this.username = username;
        this.post = post;
    }
} 
```

然后简单地使用`List<Pair>`，例如：

```
List<Pair> pairs = new ArrayList<Pair>();
pairs.add(new Pair("doniyor", 12345));

// ...

Pair p = pairs.get(0);
System.out.pritnln(p.username); // doniyor
System.out.pritnln(p.post); // 12345 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T08:59:53.757

If i understand correctly you want to have all posts of a user, so instead of using List you should use Map:

```
Map<String,List<Post>> map = new HashMap<String,List<Post>>(); 
```

Then, the key(String) would be the userName and the value would be a list of Post objects.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T09:01:00.317

You can't define a list like that, but you can use a Map, with username as key and post as value. Or is there a particular reason to use a list?</string,list<post></string,list<post></pair></pair></pair></pair></pair></pair>

# html - 不同的字体大小 如何在 HTML4 的选择选项中使用不同的字体大小 <option value="a">A B</option> 你不能。选项元素只能包含文本。由于您不能包含元素，因此无法区分元素的各个部分

> ID：11340891
> 
> 赞同：1
> 
> 时间：2012-07-05T08:53:00.500
> 
> 标签：html

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T08:54:02.127

你不能。[选项元素只能包含文本](https://stackoverflow.com/questions/5678760/it-is-bad-to-put-span-tags-inside-option-tags-only-for-string-manipulat)。由于您不能包含元素，因此无法区分元素的各个部分以进行单独的样式设置。

# maven - 有没有办法在 maven 中捕获用户输入并将其分配给 maven 属性？

> ID：11340894
> 
> 赞同：13
> 
> 时间：2012-07-05T08:53:12.037
> 
> 标签：maven, plugins, input, maven-plugin, command-prompt

1.  有没有办法暂停 Maven 执行流程以提供命令提示符，以便用户可以输入文本。
2.  然后我希望将提供的文本存储在 Maven 属性中。
3.  如果可以屏蔽用户输入，那将是一个奖励。

这对于避免在 pom.xml 中存储密码非常有用。

非常感谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-19T12:20:15.583

**您可以使用maven-antrun-plugin**捕获用户输入。以下示例显示如何询问当前用户新的项目版本。

```
 <profile>
        <id>change-version</id>
        <build>
            <defaultGoal>validate</defaultGoal>
            <plugins>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-antrun-plugin</artifactId>
                    <version>1.7</version>
                    <executions>
                        <execution>
                            <id>catch-new-version</id>
                            <goals>
                                <goal>run</goal>
                            </goals>
                            <phase>validate</phase>
                            <configuration>
                                <target>
                                    <!-- == catch new version in a prompt == -->
                                    <input
                                        message="Please enter the new SNAPSHOT version (current is '${project.version}'): "
                                        addproperty="new-user-version" />
                                </target>
                                <exportAntProperties>true</exportAntProperties>
                            </configuration>
                        </execution>
                    </executions>
                    <dependencies>
                        <dependency>
                            <groupId>org.apache.ant</groupId>
                            <artifactId>ant</artifactId>
                            <version>1.8.4</version>
                        </dependency>
                    </dependencies>
                </plugin>
                <plugin>
                    <groupId>org.codehaus.mojo</groupId>
                    <artifactId>versions-maven-plugin</artifactId>
                    <version>1.3.1</version>
                    <executions>
                        <execution>
                            <id>set-new-version</id>
                            <goals>
                                <goal>set</goal>
                            </goals>
                            <phase>validate</phase>
                            <configuration>
                                <generateBackupPoms>false</generateBackupPoms>
                                <newVersion>${new-user-version}</newVersion>
                            </configuration>
                        </execution>
                    </executions>
                </plugin>
            </plugins>
        </build>
    </profile>
</profiles> 
```

您可以通过调用来运行此功能：

```
mvn -N -P change-version 
```

一些解释：

*   **-N-**选项允许不递归到子项目中。
*   使用 **org.apache.ant:ant:1.8.4**来避免 [https://issues.apache.org/bugzilla/show_bug.cgi?id=51161](https://issues.apache.org/bugzilla/show_bug.cgi?id=51161)
*   使用 Maven 3.0.4
*   文档：[maven-antrun-plugin](http://maven.apache.org/plugins/maven-antrun-plugin/)，[输入标签](http://ant.apache.org/manual/Tasks/input.html)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-05T09:18:38.450

如果你像这样在你的 pom 中添加一个属性：

```
<properties>
    <db.password></db.password>
</properties> 
```

并在你的 pom 中使用它，如下所示：

```
<someTag>${db.password}</someTag> 
```

然后你可以从命令行设置属性：

```
$ mvn -Ddb.password="DonaldDuck" install 
```

但它不像命令提示符那样具有交互性。

# r - 判别分析：提取线性方程

> ID：11340895
> 
> 赞同：-2
> 
> 时间：2012-07-05T08:53:12.303
> 
> 标签：r, linear-regression

判别分析涉及提取回归式线性方程。判别分析产生的方程如下：

D = v1*X1 + V2*X3 + V3*X3 + a

如何从 R 中的判别分析输出中提取此方程？我正在使用 MASS 包中的 LDA 函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T09:32:32.930

来自`?lda`

```
library(MASS)
Iris <- data.frame(rbind(iris3[,,1], iris3[,,2], iris3[,,3]),
                   Sp = rep(c("s","c","v"), rep(50,3)))
train <- sample(1:150, 75)
table(Iris$Sp[train])
## your answer may differ
##  c  s  v
## 22 23 30
z <- lda(Sp ~ ., Iris, prior = c(1,1,1)/3, subset = train)
predict(z, Iris[-train, ])$class 
```

然后你可以检查

```
formula(z) 
```

看看`?formula`

# java - JPanel 和 JFrame 坐标搞砸了

> ID：11340897
> 
> 赞同：0
> 
> 时间：2012-07-05T08:53:13.647
> 
> 标签：java, swing, jframe, jpanel

我正在尝试使用JPanle 和JFrame 编写游戏。我在框架内设置了一个面板。当我在面板上绘制面板的矩形大小为 0,0 时。矩形向上和向左移动一些像素。我该如何解决这个问题？我用谷歌搜索并看到了 insets 方法，但我不想在每次绘制时都使用它来计算我的坐标。

这是代码

```
public class Game extends JFrame{

public Game(){
    this.getContentPane().setPreferredSize(new Dimension(800,600));  
    pane p = new pane();
    this.getContentPane().add(p,BorderLayout.CENTER);
    p.setPreferredSize(new Dimension(800,600));
    pack();
    setResizable(false);
    setVisible(true);

}

public static void main(String[] args){
    new Game();
}

} 
```

* * *

```
public class pane extends JPanel{

public pane(){

setDoubleBuffered(false);
setBackground(Color.black);
setPreferredSize( new Dimension(800, 600));

setFocusable(true);
requestFocus(); 
}

@Override
public void paint(Graphics g) {
    g.setColor(Color.white);
    g.fillRect(0, 0, 800, 600);
    g.setColor(Color.black);
    g.fillRect(0, 0, 800, 600);

}
} 
```

[截图链接](http://i.stack.imgur.com/R2p03.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T09:19:07.017

实际上您的面板没有移位，它位于 0,0。问题是面板的大小实际上是 810,610 而不是 800,600。出于某种原因（到目前为止我找不到，如果有人有我想学习的想法），当你调用`setResizable(false)`a时`JFrame`，它的插图被修改，最终导致你的内容窗格比预期的要大（在至少在 JDK6/Win7 上）。`setResizable(false)`在添加组件和打包框架之前调用它，它可以工作。

还可以考虑绘制一个与面板大小相同的矩形（`g.fillRect(0, 0, getWidth(), getHeight());`这样无论发生什么情况，您都可以确保填满整个区域。

有什么理由用白色填充背景然后用黑色替换它？

# message - 如何在“来自网页的按摩”窗口中单击“确定”

> ID：11340910
> 
> 赞同：0
> 
> 时间：2012-07-05T08:53:41.007
> 
> 标签：message, watir

我在 RadRails IDE 中使用 watir 进行测试。单击“删除”按钮后会出现“来自网页的消息”窗口，确认我是否真的要删除记录。如何模拟单击确定？以下是我尝试的方法：1） `ie=Watir::IE.new ie.execute_script("window.alert = function() {}") - have no effect`

2)`ie1.button(:name, "delete_action").click ie4.execute_script("window.confirm = function() {return true}")`

得到错误 -`Task.rb:140:in '<main>: undefined local variable or method 'ie4' for main:Object (NameError)`

3)`ie1.button(:name, "delete_action").click ie1.execute_script("window.confirm = function() {return true}")`

没有效果

4）`def startClicker（按钮，waitTime = 3）

```
 w = WinClicker.new

   longName = ie.dir.gsub("/" , "\\" )

   shortName = w.getShortFileName(longName)

   c = "start rubyw #{shortName }\\watir\\clickJSDialog.rb #{button }

#{ waitTime} "

   puts "Starting #{c}"

   w.winsystem(c)

   w=nil

 end` 
```

并放

```
 `ie1.button(:name, "delete_action").click

   startClicker("OK" , 3)

   ie.button("Submit").click` 
```

出现来自网页的消息后。得到错误：

`E:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.0.0/lib/watir-classic/modal_dialog.rb:3:in 'initialize': Watir no longer supports WinClicker. Please use click_no_wait and the javascript_dialog method. (NotImplementedError) from Task.rb:12:in 'new' from Task.rb:12:in 'startClicker' from Task.rb:162:in '<main>'`

5) 测试开始时的代码

`def check_for_popups

```
autoit = WIN32OLE.new('AutoItX3.Control')

loop do

    ret = autoit.WinWait('Message from webpage', '', 1)

    if (ret==1) then autoit.Send('{enter}') end

    sleep(3)

 end  end`

Code after message from webpage appears

`ie1.button(:name, "delete_action").click 

$popup = Thread.new { check_for_popups } 

at_exit { Thread.kill($popup) } ` 
```

没有反应。

6) `需要'watir-classic\contrib\enabled_popup'

def startClicker（按钮，waitTime=9，user_input=nil）

hwnd = $ie.enabled_popup(waitTime)

如果 (hwnd)

```
w = WinClicker.new

if ( user_input )

  w.setTextValueForFileNameField( hwnd, "#{user_input}" )

end

sleep 3

w.clickWindowsButton_hwnd( hwnd, "#{button}" )

w=nil

end 
```

结束`

出现网页消息后的代码

`ie1.button(:name, "delete_action").click_no_wait

startClicker（“确定”，7）`

获取消息 - `Task.rb:14:in`startClicker'：未定义的方法`enabled_popup' for nil:NilClass (NoMethodError) from Task.rb:157:in`'`

7)`require 'watir/contrib/enabled_popup'`

出现网页消息后的代码 -

`hwnd = browser.enabled_popup(5)

如果 (hwnd)

弹出 = WinClicker.new

popup.makeWindowActive(hwnd)

popup.clickWindowsButton("来自网页的消息", "OK", "30")

结束`

Get error - `E:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.0.0/lib/watir-classic/win32.rb:19:in`block in ': 1.9 的 DL API 与 1.8 不兼容，请参阅来自 E:/Ruby193/lib/ruby/gems/1.9 的[http://www.ruby-forum.com/topic/138277](http://www.ruby-forum.com/topic/138277) (NotImplementedError)。 1/gems/watir-classic-3.0.0/lib/watir-classic/contrib/enabled_popup.rb:11:in `call' from E:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.0.0/lib/watir-classic/contrib/enabled_popup.rb:11:in`block in enabled_popup' 来自 E:/Ruby193/lib/ruby/gems/1.9.1/gems/watir -classic-3.0.0/lib/watir-classic/wait.rb:18:in `until' from E:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.0.0/lib/watir-classic/contrib/enabled_popup.rb:10:in`enabled_popup' 来自 Task.rb:145:in`<main>'`

8)`需要'watir-classic\contrib\enabled_popup'

def popupChecker（文本）

```
Timeout::timeout(2)do

    begin

        if $ie.enabled_popup

            hwnd = ie.enabled_popup(5)

            w = WinClicker.new

            w.makeWindowActive(hwnd)

            w.clickWindowsButton_hWnd(hwnd,text)

        end

    rescue Timeout::Error

        puts 'No popup existed'

    end

end 
```

结束`

出现网页消息后的代码 -

`ie1.button(:name, "delete_action").click_no_wait

popupChecker('OK')

即1.等待`

获取消息：`Task.rb:13:in`popupChecker 中的块'：未定义的方法`enabled_popup' for nil:NilClass (NoMethodError) from E:/Ruby193/lib/ruby/1.9.1/timeout.rb:68:in`超时'来自 Task.rb:11:in `popupChecker' from Task.rb:158:in`'`

9)`def check_for_popups(title="来自网页的消息", button="OK")

```
popup=Thread.new {

    autoit=WIN32OLE.new('AutoItX3.Control')

    ret=autoit.WinWait(title,"",60)

    if (ret==1)

        puts "There is popup."

        autoit.WinActivate(title)

        button.downcase!

        if button.eql?("ok") || button.eql?("yes") || button.eql?("continue")

            autoit.Send("{Enter}")

        else

            autoit.Send("{tab}")

            autoit.Send("{Enter}")

        end

    elsif (ret==0)

        puts "No popup, please check your code."

    end

}

at_exit { Thread.kill(popup) } 
```

结束`

出现网页消息后的代码 -

`check_for_popups("Message from webpage", "OK")`

没有反应

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T09:18:19.423

试试这个：

```
browser.alert.ok 
```

更多信息：[http ://watir.github.io/docs/javascript-dialogs/](http://watir.github.io/docs/javascript-dialogs/)

# youtube - 更大的 YouTube 缩略图

> ID：11340918
> 
> 赞同：2
> 
> 时间：2012-07-05T08:54:28.323
> 
> 标签：youtube, youtube-api, video-thumbnails

我一直在使用 Youtube API 来抓取所选视频的缩略图，但我需要它们更大一些。

我需要 4 个（ish）大小合适的缩略图，目前我可以生成这 3 个图像。

[http://i.ytimg.com/vi/Cj6ho1-G6tw/1.jpg](http://i.ytimg.com/vi/Cj6ho1-G6tw/1.jpg)

[http://i.ytimg.com/vi/Cj6ho1-G6tw/2.jpg](http://i.ytimg.com/vi/Cj6ho1-G6tw/2.jpg)

[http://i.ytimg.com/vi/Cj6ho1-G6tw/3.jpg](http://i.ytimg.com/vi/Cj6ho1-G6tw/3.jpg)

但它们很小。

我只是想知道是否有人找到了一种方法来生成稍微大一点的缩略图，比如封面。

[http://i.ytimg.com/vi/Cj6ho1-G6tw/maxresdefault.jpg](http://i.ytimg.com/vi/Cj6ho1-G6tw/maxresdefault.jpg)

这可能只是您无法使用 API 完成的事情，但它当然值得一试。我也对非 API 的建议持开放态度，无论多么老套。

*请注意：我需要所有 4 个缩略图以设定的时间间隔来自同一视频，就像上面提到的 3 个*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T09:00:04.173

您可以在编号前使用 hq：http: [//i.ytimg.com/vi/Cj6ho1-G6tw/hq3.jpg](http://i.ytimg.com/vi/Cj6ho1-G6tw/hq3.jpg)

正如我所见 - 您不能使用带有数字的 maxres 缩略图（仅 maxresdefault.jpg）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-17T08:34:50.210

在某些情况下，该链接不存在缩略图。如果是这样，您可以尝试：[https](https://i.ytimg.com/vi_webp/[video) : //i.ytimg.com/vi_webp/[video id]/mqdefault.webp 或[https://i.ytimg.com/vi_webp/[video](https://i.ytimg.com/vi_webp/[video) id]/hqdefault.webp

mqdefault 代表中等质量 hqdefault 是不言自明的

# emacs - 图形和控制台 Emacs 之间的不同选择行为（23）

> ID：11340924
> 
> 赞同：0
> 
> 时间：2012-07-05T08:54:55.167
> 
> 标签：emacs, console, selection, shift

Emacs n00b 在这里，我在图形模式下对它进行了一些修改，到目前为止我发现它很棒。我想尝试一下终端版本，发现存在一些令人讨厌的行为差异，尤其是在换档选择方面。

在图形模式下，我可以将移位选择（即按住 shift 设置标记）与箭头键、控制键（选择整个单词）或原点或结束键（选择整行/大部分行）结合起来.

但我不能将它们组合起来（不能通过按住 shift 和 C 箭头来选择整个单词，或者用 shift-end 或 shift-origin 选择一行的剩余部分）。

我还发现 C-backspace 在控制台中不起作用（即没有擦除整个单词），而它在窗口模式下起作用，尽管我在寻找解决方案后阅读了有关 M-backspace 的信息。

我尽可能彻底地搜索，但找不到如何让终端版本表现得像图形版本......很多人似乎都在问关于 Emacs 的班次选择的问题，但他们都没有完全相同的问题......可以有人解释这些行为差异来自哪里？

提前致谢。

*虽然，按住 shift 键，如果我向下（使用箭头键）选择整行，我不能再次向上取消选择它们（“未定义”）。

[edit /] 好的，很明显这是因为我的终端没有与图形 Emacs 相同的快捷方式。很公平。我在这里看到了几个解决方案：

*   习惯默认的 Emacs 快捷方式
*   用全局设置键填充我的 .emacs。虽然我试过 了，但它并没有像我想要的那样工作-_- ````
    (fset 'select-to-end
    [(kbd "C-<spc> <end>")])
    (global-set-key (kbd "S-<end>") 'select-to-end)

    ```` 

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T17:40:58.143

简短的回答是“如果您喜欢使用不同的击键，那可能会更容易”。就个人而言，我对我的键绑定和配置有点神经质，所以我很少使用这个；特别是，当 emacs 模式覆盖您的绑定时，这是令人沮丧的。（我不知道你是否发现这`global-set-key`真的意味着“让宇宙中的任何人在我的键绑定上盖章”。）

您问题的较长答案是“链条上的某个人正在忽略您的控制字符，因此您需要弄清楚它是谁，修复它，然后重复”。对于你在这里谈论的键绑定`C-S-<arrows>`——你绝对可以让它工作；如果你想要类似的东西`\C-~`，你将会有一个*更难*的时间。（问题是一些绑定在遗留终端中没有意义，所以你基本上必须使用一组非标准的控制代码来传输组合键，然后教每个程序识别它。这通常是 termcap 的来源，因为它是用于教授关键事件的程序的通用语言。）

以下是我通常采取的步骤：

*   从您的终端开始。您可以使用`\C-v`然后按一个键来插入文字击键（至少在 bash 中）——首先使用 C-left、S-left 和 CS-left 执行此操作。确认您收到三个不同的控制代码。
*   如果不是，则需要调查 (1) 您的 readline 设置，(2) 您的终端程序设置或 (3) 您的 termcap 设置。因为`TERM`is `xterm`，termcap*应该*没问题。我不知道您使用的是什么终端程序，但它可能有自己的密钥配置。（例如，我使用 mac 并使用 iTerm2，这通常是我的第一站。）如果您无论如何都要在终端上花费时间，那么您绝对应该花时间阅读[readline 手册](http://cnswww.cns.cwru.edu/php/chet/readline/readline.html)并使用您`.inputrc`的 a少量。
*   这条链很短：接下来是 emacs。您可以在 emacs 中使用在 bash 中`\C-q`执行相同的操作，或者使用来找出默认绑定是什么。同样，首先确保 emacs 看到您感兴趣的组合的不同关键事件。如果没有，您可能希望首先查看您的目录并根据自己的喜好对其进行修改。`\C-v``\C-h k``term/xterm.el``site-lisp`

如果您使用`tmux`or `screen`，它们也会参与其中，并且通常可以被驯服。查找这些问题的过程与 bash 相同——使用`\C-v`并`man tmux`找出如何获得额外的键绑定。

# c# - 上下增加字体大小html标签

> ID：11340925
> 
> 赞同：0
> 
> 时间：2012-07-05T08:54:55.913
> 
> 标签：c#, html, font-size

我正在尝试增加或减少显示的文本字体。

但只能让它增加一次或减少一次然后停止工作。

我在网络浏览器中显示文本，所以我必须使用 html 标签增加字体大小。

有人可以指导我做错什么吗？

```
private void btnUp_Click(object sender, EventArgs e)
        {               
            HtmlFontPrev = "<font size='+1'>" + webPrevSQL.DocumentText + "</font>";
            webPrevSQL.DocumentText = HtmlFontPrev;
            HtmlFontPrev = "<font size='+1'>" + webCompareSQL.DocumentText + "</font>";
            webCompareSQL.DocumentText = HtmlFontPrev;
        }

        private void btnDown_Click(object sender, EventArgs e)
        {
            HtmlFontPrev = "<font size='-1'>" + webPrevSQL.DocumentText + "</font>";
            webPrevSQL.DocumentText = HtmlFontPrev;
            HtmlFontPrev = "<font size='-1'>" + webCompareSQL.DocumentText + "</font>";
            webCompareSQL.DocumentText = HtmlFontPrev;
        } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T09:01:14.540

看起来正在发生的事情是每次请求都会重置字体大小（这是正常的无状态 HTTP 行为）。尝试通过将增量值添加到会话中来保存每个请求的增量值：

```
string currentFont = Session["currentFont"] ?? "0";
int intFont = int.Parse(currentFont) + 1;
Session["currentFont"] = intFont.ToString(); 

HtmlFontPrev = "<font size='+" + intFont + "'>" + webPrevSQL.DocumentText + "</font>";
webPrevSQL.DocumentText = HtmlFontPrev; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-05T09:00:02.753

字体大小“+1”或“-1”不是有效的字体大小。

字体大小应为 1-7 之间的数字。

# zend-framework2 - Zend Framework 2 MVC - 模块路由映射不起作用

> ID：11340932
> 
> 赞同：2
> 
> 时间：2012-07-05T08:55:25.813
> 
> 标签：zend-framework2

我尝试按照应用程序/索引正在工作的[Akrabats 教程，但专辑部分没有。](http://akrabat.com/zend-framework-2-tutorial/)

我也用[ZendSkeletonModule](https://github.com/zendframework/ZendSkeletonModule)尝试过，但没有成功。

这两种情况的错误是：

`album/album (resolves to invalid controller class or alias: album/album)`

我用 ZF2 master 和 beta4 标签尝试了它（但 beta4 标签给出了关于缺少方法 getEventManager 的 php 错误）

我从 Akrabats Tutorial 中获取了代码，之后使用了[GitHub Repo](https://github.com/akrabat/zf2-tutorial)中的代码失败。不幸的是，没有一些论坛或评论部分可以寻求帮助。

我在教程和 module.config.php 中的骨架（zfcUser 具有相同的差异）中发现了一些差异（我相信这是问题的核心）。

本教程`classes`在控制器索引、zfcUser 和 Skeleton 中使用`invokables`，但这似乎并不重要，因为错误不会改变。

我的 module.config 目前看起来像这样：

```
<?php

return array(

    // Controllers in this module
    'controller' => array(
        'invokables' => array(
            'album/album' => 'Album\Controller\AlbumController',
        ),        
    ),

    // Routes for this module
    'router' => array(
        'routes' => array(
            'album' => array(
                'type' => 'Literal',
                'priority' => 1000,
                'options' => array(
                    'route' => '/album',
                    'defaults' => array(
                        'controller' => 'album/album',
                        'action' => 'index',
                    ),
                ),
                'may_terminate' => true,
                'child_routes' => array( 
                    'misc' => array (
                        'type'    => 'segment',
                        'options' => array(
                            'route'    => '/album/[:action][/:id]',
                            'constraints' => array(
                                'action' => '[a-zA-Z][a-zA-Z0-9_-]*',
                                'id'     => '[0-9]+',
                            ),
                            'defaults' => array(
                                'controller' => 'album/album',
                                'action'     => 'index',
                            ),
                        ),
                    ),
                ),
            ),
        ),
    ),    

    // View setup for this module
    'view_manager' => array(
        'template_path_stack' => array(
            'album' => __DIR__ . '/../view',
        ),
    ),
); 
```

专辑\控制器\专辑控制器：

```
<?php

namespace Album\Controller;

use Zend\Mvc\Controller\ActionController,
    Zend\View\Model\ViewModel,
    Album\Model\AlbumTable,
    Album\Model\Album,
    Album\Form\AlbumForm;

class AlbumController extends ActionController
{
// [....]
} 
```

我不知道在哪里可以解决这个错误，你们中有人有想法吗？

如果没有另外提及，代码就像 github 上的原始代码（参见上面的链接）。

TIA

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-07T15:36:36.427

这里的区别不仅在于可调用对象，还在于数组键现在是复数形式的“controller **s ”，这对我来说起到了作用。**在您的代码中“invokables”已经更改，但您似乎使用“控制器”作为键。

```
 'controllers' => array(
            'invokables' => array(
                    'album/album' => 'Album\Controller\AlbumController',
            ),
    ), 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T10:34:55.980

显然控制器的数组发生了变化。现在 classes 键更改为 invokables：在 module.config.php

```
 'controller' => array(
            'classes' => array(
                    'album/album' => 'Album\Controller\AlbumController',
            ),
    ), 
```

必须改为

```
 'controllers' => array(
            'invokables' => array(
                    'album/album' => 'Album\Controller\AlbumController',
            ),
    ), 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-05T19:44:49.973

找到它，它 ActionController 类似乎在 ZF2-beta4 上消失了，所以你的 AlbumController 需要这样：

```
use Zend\Mvc\Controller\AbstractActionController,
    Zend\View\Model\ViewModel;

class AlbumController extends AbstractActionController {
   .....
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T19:57:07.757

你必须正确 config/application.config.php

```
<?php
return array(
    'modules' => array(
        'Application',
        'Album',
    ),
    'module_listener_options' => array(
        'config_glob_paths'    => array(
            'config/autoload/{,*.}{global,local}.php',
        ),
        'module_paths' => array(
            './module',
            './vendor',
        ),
    ),
); 
```

# java - 使用 RAD 提交后，如何将每个修订版的日志消息累积添加到 java 中？--SVN

> ID：11340935
> 
> 赞同：0
> 
> 时间：2012-07-05T08:55:28.557
> 
> 标签：java, svn

我试图在 Java 源文件的末尾添加提交注释消息，以便在我们将文件提交到 SVN 时跟踪文件修订。

请让我知道语法。我试过 $Log$: 它不工作。我记得我以前使用过的一个项目。我不知道它是否特定于服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T09:39:01.923

你不应该那样做。真的。SVN 在那里并且拥有该文件的所有历史记录。它能够处理分支，而这个策略将无法处理。

SVN 不支持它，有充分的理由，在这里解释：http: [//subversion.apache.org/faq.html#log-in-source](http://subversion.apache.org/faq.html#log-in-source)

# android - AdMob 点击策略

> ID：11340938
> 
> 赞同：1
> 
> 时间：2012-07-05T08:55:37.930
> 
> 标签：android, admob

所以，我正在制作一个 Android 应用程序，并且我想到了一个获得更多点击的策略：

该应用程序的免费版本适用于几乎所有屏幕上的广告。要访问应用程序的特定功能，用户必须在过去 24 小时内点击过广告。此外，通过点击广告，我“奖励”免费用户 24 小时无广告。

这是使用 AdMob 的合法方式吗？它是否违反 AdMob ToS？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T09:12:26.513

我认为这无论如何都不应该违反 Tos。使用 Admob 展示广告的时间和地点由您决定。许多软件使用与您计划使用的策略类似的策略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-06T10:07:37.920

邀请用户点击广告违反了 AdMob ToS，但另一方面，邀请他们查看广告是可以的 [https://support.google.com/admob/answer/3342054?hl=en&ref_topic=2745287](https://support.google.com/admob/answer/3342054?hl=en&ref_topic=2745287)

# android - 如何保持警报程序有效

> ID：11340942
> 
> 赞同：0
> 
> 时间：2012-07-05T08:56:07.747
> 
> 标签：android

我正在为 android 编写一个警报程序，到目前为止我对它非常满意。但我非常担心如何确保它持续运行。即我不希望操作系统杀死它以释放内存（我希望操作系统首先杀死其他应用程序）并且我想确保如果用户关闭并再次启动程序，程序会再次启动。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T09:03:57.073

很简单：确保它**不会**持续运行。你不应该。甚至没有服务。Android 试图杀死你的进程是有原因的，你不应该试图解决它。如果你正在开发一个报警程序，最好看看[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)。

# php - Should I store an array to mysql or store each value individually in a table?

> ID：11340947
> 
> 赞同：2
> 
> 时间：2012-07-05T08:56:19.820
> 
> 标签：php, mysql, database, arrays, favorites

I am in the process of implementing a favorites system into my web application. Users will be able to favorite which pages they like and these pages will then become visible in the favourites section of their profile.

I need to store a list of their favorites in the mysql database. As they will likely have more than one favorite I will either need to store them in an array or individually in a table called 'favorites'.

Which is the best way to go?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T08:59:45.827

I would certainly store them as individual rows of data. Makes it much easier to manipulate at a later date. Makes things such as "Most Favorited" easier, will be easier to index, will make adding/removing individual entries from a user easier and won't be adding much overhead to the size of the table in the database.

# safari - 如何在 safari 浏览器中检查本地存储大小

> ID：11340957
> 
> 赞同：1
> 
> 时间：2012-07-05T08:56:40.850
> 
> 标签：safari, local-storage

我在 sencha touch2 中做 HTML5 移动应用程序。我使用过本地存储，我知道如何删除缓存和重置 safari 等。我想知道如何在 safari 浏览器中查看本地存储大小。

# foursquare - Foursquare Merchant API 调用以检索活动活动的数量限制

> ID：11340958
> 
> 赞同：0
> 
> 时间：2012-07-05T08:56:42.550
> 
> 标签：foursquare

是否有可能增加为商家运行的活动数量（目前限制为 2 个）？如果是这样，是否有 API 调用来检索实际限制？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T16:18:09.997

每个*场所*只能进行两个*有效*的活动。如果您愿意，您可以创建更多非活跃的广告系列，但在给定场地上的活跃特价不能超过两个。

# eclipse - 是否可以保存一组断点？

> ID：11340959
> 
> 赞同：14
> 
> 时间：2012-07-05T08:56:43.300
> 
> 标签：eclipse

我有一组用于调试一个问题的断点。当我想调试其他东西时，这些断点很烦人，所以我需要禁用/删除它们。但是，我觉得我可能希望以后能够重新创建第一组断点。

**是否可以保存所有当前活动的断点，以便您只需一次操作即可在不同的断点集之间切换？**

如果我有 30 个断点，手动重新创建/重新启用它们将非常乏味。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-05T08:58:19.520

在Eclipse中（调试透视图->断点）选中所有断点，右键，导出断点！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-05T09:00:36.140

您可以使用断点工作集 - 请参阅[eclipse 帮助](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.jdt.doc.user/reference/views/breakpoints/ref-workingsets_viewaction.htm)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-27T17:28:50.490

如果找不到“断点”选项卡，请在以下位置打开它：`Window > Show View > Breakpoints`。

然后，如前所述：`Ctrl+A to select all breakpoints > right click > Export Breakpoints...`。

# python - 自然语言时间解析器

> ID：11340963
> 
> 赞同：4
> 
> 时间：2012-07-05T08:56:56.250
> 
> 标签：python, parsing, time, nlp

我正在尝试将包含（自然语言）时间的字符串解析为*hh:mm*时间对象？例如：

```
"ten past five"
"quarter to three"
"half past noon"
"15 past 3"
"13:35"
"ten fourteen am" 
```

我已经研究了 Ruby的[Chronic和 Java 的](http://chronic.rubyforge.org/)[Natty](http://natty.joestelmach.com/)（以及其他一些库），但两者似乎都专注于解析日期。像“五点十点”这样的字符串也没有被正确解析。

有谁知道适合我需要的图书馆？或者我应该开始使用自己的解析器吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-05T08:58:47.170

[`parsedatetime`](http://code.google.com/p/parsedatetime/)看起来很有希望。[信用](https://stackoverflow.com/a/719197/1291812)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T07:14:34.457

我不想扩展 parsedatetime，所以我决定使用Python 的解析器解释器框架 pyPEG 来编写一个专用的时间解析器[。](http://fdik.org/pyPEG/index.html)对于感兴趣的人，第[一个基本版本](https://gist.github.com/3054114)现已完成，并且很好地解析了荷兰时间字符串。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-24T10:02:45.513

只是对于任何有兴趣的人，我发现了这个：

[https://gist.github.com/akatzbreaker/5849024](https://gist.github.com/akatzbreaker/5849024)

这与 Github 上的 Bert 的 Anwser**相同**，但它是英文的……**仅适用于对此感兴趣且不懂荷兰语的人 :-P ...**

# java - 随后按字段对对象进行排序

> ID：11340966
> 
> 赞同：1
> 
> 时间：2012-07-05T08:57:06.173
> 
> 标签：java, sorting, comparator

问题是对大量 POJO 对象进行排序

```
class Entity{
    String key1;
    String key2;
    String key3;
    String key4;
} 
```

随后按所有字段的字母顺序排列。这意味着我们首先按 key1 排序，然后按 key2 等等。任何一个键都可以为空。问题是最简单的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T09:00:38.947

```
private static int nullSafeCompare(String a, String b){
    if (a==b) return 0;
    if (a == null) return -1;
    if (b == null) return 1;
    return a.compareTo(b);
}

int compare(Entity a, Entity b){
   // if a and b can also be null:
   if (a==b) return 0;
   if (a==null) return -1;
   if (b==null) return 1;

   int c = nullSafeCompare(a.key1, b.key1);
   if (c != 0) return c;

   c = nullSafeCompare(a.key2, b.key2);
   if (c != 0) return c;

   c = nullSafeCompare(a.key3, b.key3);
   if (c != 0) return c;

   return nullSafeCompare(a.key4, b.key4);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T09:12:03.807

一个好方法`append all keys together`，然后使用`Comparator<Entity>`-

```
// all the keys of an entity are appended and than compared with other entity
int compare(Entity e1, Entity e2){
  return appendAndHandleNull(e1.key1, e1.key2, e1.key3).compareTo(appendAndHandleNull(e2.key1, e2.key2, e2.key3));
}

/** 
 * method to get all keys of an entity in appended form
 */
private static final String appendAndHandleNull(String list...){
   StringBuilder result = new StringBuilder ();
   for(String s : list){
      result.append(s!=null?s:"").append(" ");//note: a space is appended after each key
   }
   return result.toString();
} 
```

我在这里做的是.....一个实体的所有键都按照需要进行比较的顺序附加在一起，然后与另一个实体进行比较。

您可能还需要在附加之前修剪每个值。

**已编辑：** 还需要将每个键分开以`space`使代码正常工作。

上面固定的代码。感谢@Thilo 指出。

# python - Urllib 错误 500 在本地工作

> ID：11340967
> 
> 赞同：1
> 
> 时间：2012-07-05T08:57:19.147
> 
> 标签：python, google-app-engine, python-2.7

我想从 python 读取一个 INI 文件，我想出了以下脚本：

```
import webapp2
import urllib
import ConfigParser

class MainPage(webapp2.RequestHandler):
  def get(self):
    getstreet = self.request.get('street')
    getlocation = self.request.get('location')
    self.response.headers['Content-Type'] = 'text/plain'
    map = ConfigParser.RawConfigParser()
    map.read('Map.ini')
    coords = map.get(getlocation, getstreet)
    self.response.out.write(coords)

app = webapp2.WSGIApplication([('/map', MainPage)],
                              debug=True) 
```

从外面我只需要阅读：
xxx.appspot.com/map?location=mylocation&street=mystreet
我仔细检查了 INI 文件是否已上传并可用：
xxx.appspot.com/Map.ini
它在本地工作得很好，但我部署时出错。
我见过提到 url fetch，但我能找到的所有例子都是相反的
任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T09:14:54.890

如果您的文件可通过 URL 获得，则几乎可以肯定它被标记为静态。AppEngine 的限制之一是无法从代码中读取静态文件。您应该能够通过删除静态声明来修复它。

在[使用 Python 读取 App Engine 上的文件？](https://stackoverflow.com/questions/2630205/read-a-file-on-app-engine-with-python)

# android - 尽管互联网正在运行，但代理下的应用程序无法在模拟器中运行

> ID：11340968
> 
> 赞同：7
> 
> 时间：2012-07-05T08:57:22.883
> 
> 标签：android, android-emulator

我在模拟器中启用了 2.2 和 2.3 版本的 android 的代理设置，并且互联网开始工作，但我安装了一个应用程序（仅适用于代理）仍然无法正常工作。当我为 4.0 版本的模拟器做同样的事情时，它在那里工作。谁能告诉，为什么它不能在 2.2 和 2.3 版本上运行，尽管互联网正在运行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T23:32:55.297

我还在 Eclipse 环境中为模拟器设置了代理。它正确地将代理地址添加到模拟器启动命令中。

*然而，在我进入模拟器中*的 WiFi 设置并输入代理地址 之前，我仍然在努力解决它只能在某些应用程序（如浏览器）中而不在其他应用程序（如地图）中工作的问题。

请注意，您**不能**`http://`像在模拟器启动行中那样​​在此设置中使用DNS 名称之前。（花了一个小时才弄清楚。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-08T19:35:08.787

你应该试试这个（Android 2.3）：

```
1\. > adb shell
2\. # sqlite3 /data/data/com.android.providers.settings/databases/settings.db
3\. sqlite> INSERT INTO system VALUES(99,’http_proxy', 'proxy:port');
4\. sqlite>.exit 
```

**此外，您可以在通过参数http-proxy**启动模拟器时尝试显式定义代理

 **```
emulator -avd yourAVD -http-proxy http://yourproxy:port 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T08:22:43.120

在模拟器中配置代理允许浏览器应用程序使用它，但任何其他应用程序都需要能够访问 Internet 的 HTTP 代理。

假设您使用 DefaultHttpClient 类连接到 Internet，您必须在建立连接之前将以下代码添加到您的 android 应用程序：

```
DefaultHttpClient client = new DefaultHttpClient();

HttpHost proxy = new HttpHost("yourproxy.domain.com", 3128); 
// Enter your proxy domain and port
client.getParams().setParameter(ConnRoutePNames.DEFAULT_PROXY, proxy); 
```

如果您使用的是经过身份验证的代理，则还需要这些行：

```
client.getCredentialsProvider().setCredentials(
                new AuthScope("yourproxy.domain.com", 3128),
                new UsernamePasswordCredentials("proxyusername", "password")); 
```

由于您希望相同的代码同时在模拟器和真手机上运行，​​您应该在应用程序中添加一个设置，允许用户打开或关闭代理的使用，并输入代理服务器/端口/凭据而不是在应用程序中硬编码它们。**

# php - php/curl 如何添加根证书

> ID：11340969
> 
> 赞同：1
> 
> 时间：2012-07-05T08:57:24.050
> 
> 标签：php, ssl, curl, certificate, ssl-certificate

对于能够挂载用户目录的 Web 应用程序，我想为用户提供一个选项来上传他的根证书以在 ssl 上使用 curl。

我尝试将 capath 设置为上传目录（CURLOPT_CAPATH => $capath），但仍然收到以下错误消息：

```
[CURL] Error while making request: SSL certificate problem, verify that the CA cert is OK 
```

如果我尝试将证书另外设置到路径（但我更愿意设置 curl 以接受由用户提供的一堆根证书签名的所有证书）。

无论如何，如果我出于测试目的设置：

```
CURLOPT_CAPATH => $capath
CURLOPT_CAINFO => $capath."/myrootcert.der" 
```

我收到此错误消息：

```
[CURL] Error while making request: error setting certificate verifylocations:\n  CAfile: /foo/bar/cacertroot.der\n  CApath: /foo/bar/\n (error code: 77) 
```

任何提示我做错了什么？谢谢！

# php - 在 div 元素中查找没有任何标签的文本

> ID：11340974
> 
> 赞同：1
> 
> 时间：2012-07-05T08:57:32.037
> 
> 标签：php, parsing, html, simple-html-dom

我需要访问 div 内没有任何标签的 48.20 Lac(s) 文本，这就是我无法访问它的原因。我需要在 PHP 文件中找到它。我试过 $html->find('div.priceDetail') 然后是 trim(strip_tags($result)) 这给了我 48.20 Lac(s) + 不必要的文本。由于我必须构建一个通用文件，因此我不能依赖于对特定固定情况进行爆炸和内爆。

```
<div class="priceDetail">
    <b>Total Price :</b>
    <img alt="" src="someimage">48.20 Lac(s)
    <!-- Per Sq Ft Price -->
    <span class="pricePerSqFt">(Price per sq.ft. : Rs. 3,679)</span>
    <!-- Code for price Trends -->
    <span class="priceGrowth">4 %
        <img alt="" src="someimage"
        align="absmiddle">
        <span class="iconWhatisThis">
            <img src="someimage"
            class="whatIcon" align="absmiddle">
            <span style="" id="StoolTip" class="price_main-c"></span>
        </span>
    </span>
    <div class="tt_top-c">
        <span class="priceGrowth"></span>
    </div>
    <div class="tt_mid-c">
        <div class="tt_pointer-c"></div>
        <div>
            <span class="tt_txt-c">Per sq.ft. price for this property is
                <b>higher than the average</b>property price in this locality as per MagicBricks.com
                Price Trends.</span>
        </div>
        <span class="tt_txt-c">
            <span class="tp_txt">To know more about this
                <a href="#priceTrends" onclick="swithTab('priceTrends', tabbedDivArray);">Click
Here</a>
            </span>
        </span>
    </div>
    <div class="tt_bot-c"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T09:05:41.160

使用 DOM 解析器做尽可能多的工作，然后当你随机加载文本时，用这个 RegEx 提取你想要的部分：

```
([0-9]{1,5}?\.[0-9]{2} Lac\(s\)) 
```

结果

```
48.20 Lac(s) 
```

*（将 RegEx 中的 5 更改为您希望在小数点前允许的位数）*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-05T09:23:42.340

这是 DomDocument 的解决方案，可能比 Regex 更强大：

```
$DOM = new DOMDocument;
$DOM->loadHTML($str);

//Get all the image tags
$elem = $DOM->getElementsByTagName('img');
//Get the first Image
$first = $elem->item(0);
//Get the node after the image
$txt=  $first->nextSibling;
//Get the text
echo $txt->nodeValue; 
```

当然，它要求文本始终位于 div 中的第一张图片之后。

# c# - 从 MVC .net 应用程序中的 Linq 查询中排除日期

> ID：11340977
> 
> 赞同：1
> 
> 时间：2012-07-05T08:57:40.430
> 
> 标签：c#, linq, entity-framework

在 asp.net MVC 应用程序中，我试图找到有客人/客户的房间，客人在某个日期之前离开的房间。

Client 模型类具有外键 RoomId：

```
public class Room
{
    public int RoomId { get; set; }
    [Display(Name = "Room Name")]
    public string Name { get; set; }
    public bool Disabled { get; set; }
    public List<Client> Clients { get; set; }
}

public class Client
{
    public int ClientId { get; set; }
    public int RoomId { get; set; }
    public string RoomName { get; set; }
    public DateTime Arrival { get; set; }
    public DateTime Departure { get; set; }
    public Room Room { get; set; }
} 
```

我当前的 Linq 查询是：

```
from r in Rooms
where r.Disabled == false
//where r.Clients.Departure<=DateTime.Parse("2012-07-01")
select new
  {
    r.Name,
    r.Disabled
  } 
```

注释行： //where r.Clients.Departure..... 在 LinqPad 中出现以下错误：

> “System.Data.Linq.EntitySet”不包含“Departure”的定义，并且找不到接受“System.Data.Linq.EntitySet”类型的第一个参数的扩展方法“Departure”（按 F4 添加使用指令或程序集参考）

有什么方法可以在 Linq 中运行此查询，以排除 Departure date where 子句？

谢谢你的帮助，

标记

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T09:00:50.943

在你发表评论后，这个应该做你需要的

```
&& r.Clients.All(client => client.Departure<=DateTime.Parse("2012-07-01")) 
```

编辑 ：

也许声明 DateTime 来比较查询

```
var dt = DateTime.Parse("2012-07-01"); 
```

和

```
&& r.Clients.All(client => client.Departure<=dt) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T09:00:39.603

如果将`Room`引用更改`Client`为 virtual 并将`Client`引用更改为`Room`virtual 会发生`ICollection`什么？这应该有助于 EF 建立联系。

请参阅此处： http: [//msdn.microsoft.com/en-us/library/gg715120](http://msdn.microsoft.com/en-us/library/gg715120(v=vs.103).aspx) (v=vs.103).aspx或此处了解 Julia Lerman 关于该主题的内容：http: [//msdn.microsoft.com/ zh-CN/数据/hh134698.aspx](http://msdn.microsoft.com/en-us/data/hh134698.aspx)

这应该使您能够重新添加注释掉的子句并且它应该可以工作。

**编辑：实际上注释掉的位应该根据 Raphaël Althaus 的更正而改变。**

我认为结合我和 Raphaël 的建议是最好的方法。

像这样

```
public class Room
{
    public int RoomId { get; set; }
    [Display(Name = "Room Name")]
    public string Name { get; set; }
    public bool Disabled { get; set; }
    public virtual ICollection<Client> Clients { get; set; }
}

public class Client
{
    public int ClientId { get; set; }
    public int RoomId { get; set; }
    public string RoomName { get; set; }
    public DateTime Arrival { get; set; }
    public DateTime Departure { get; set; }
    public virtual Room Room { get; set; }
} 
```

# php - 通过 Javascript 上传图片

> ID：11340981
> 
> 赞同：0
> 
> 时间：2012-07-05T08:58:04.890
> 
> 标签：php, javascript, jquery, file-upload

我从剪贴板获取图像并放入 img 标签。

因此，当用户单击按钮时，剪贴板中的图像将被复制到一个 div 标签中的 img 标签中。所以我有一个 div 中的 img 标签列表。

我想将这些图像保存在服务器上，所以我必须将这些图像发送到服务器端。

如何在服务器端发送该图像？

请指导。谢谢。

=== 代码示例 ===

```
<div id="imageContainer">
       <img src="..."/>
       <img src="..."/>
       <img src="..."/>
</div> 
```

这是结构，想在服务器上上传这些图像。

# c# - OnTextChange 事件的行为很奇怪

> ID：11340982
> 
> 赞同：0
> 
> 时间：2012-07-05T08:58:11.163
> 
> 标签：c#, asp.net

我正在处理一个在 asp.net 中有许多文本框和一些下拉列表的表单，目前我试图在特定文本表单的 textchange 事件上从数据库中动态填充这些文本框

即名为jobId的特定文本框（job id是数据库表的主键），所以如果有人输入10，它将用主键为10的值填充字段的其余部分，

这是第一次工作，但最终它会给出一个错误

```
The state information is invalid for this page and might be corrupted. 
```

并且没有改变任何值。

为什么会发生这种情况，我尝试了很多但无法克服这个错误，是因为我正在使用 AJAX 在另一个中加载 HTML 文档吗？

为了进一步澄清，这里是我的代码，

触发：

```
<asp:TextBox ID="Job_No" runat="server" Text="New" 
            ontextchanged="Job_No_TextChanged" AutoPostBack="true"></asp:TextBox> 
```

功能：

```
 protected void Job_No_TextChanged(object sender, EventArgs e)
    {
        //SqlCommand cmd2 = new SqlCommand("");
        SqlDataAdapter sda = new SqlDataAdapter("select job_no from job_mstr", con);
        DataTable dt = new DataTable();
        sda.Fill(dt);
       // check = 1;
        try
        {
            foreach (DataRow row in dt.Rows)
            {
                if (row["job_no"].ToString() == Job_No.Text)
                {

                   // check = 0;
                    int id = Convert.ToInt32(Job_No.Text);

                    Job_No.Text = id.ToString();
                    con.Open();
                    SqlCommand cmd1 = new SqlCommand("select JOB_MILESTONE_DT,start_dt,end_dt,CUST_REF,convert(varchar,CUST_REF_DT,103) ,convert(varchar,due_date,103) ,JOB_DESC,LINKED_JOB,CLIENT_CONTACT,CONTACT_EMAIL,APPROVAL_USER,convert(varchar,approval_DT,103) ,TOT_QTY,cost,job_type,JOB_CATEGORY from job_mstr where job_no=" + id, con);
                    SqlDataReader dr = cmd1.ExecuteReader();
                    if (dr.Read())
                    {
                        JobM_Dt.Text = dr[0].ToString();
                        StartTim.Text = dr[1].ToString();
                        EndTime.Text = dr[2].ToString();
                        Cust_refTxt.Text = dr[3].ToString();
                        Cust_Ref_DtTxt.Text = dr[4].ToString();
                        Due_DtTxt.Text = dr[5].ToString();
                        Job_DescTxt.Text = dr[6].ToString();
                        Linked_JobTxt.Text = dr[7].ToString();
                        Client_ContactTxt.Text = dr[8].ToString();
                        Client_EmailTxt.Text = dr[9].ToString();
                        Approval_UsrTxt.Text = dr[10].ToString();
                        Approval_DtTxt.Text = dr[11].ToString();
                        Tot_QtyTxt.Text = dr[12].ToString();
                        CostTxt.Text = dr[13].ToString();
                        Job_TypeTxt.Text = dr[14].ToString();
                        Job_CatogeryTxt.Text = dr[15].ToString();

                    }

                    dr.Close();
                    return;
                }
                else if (check == 1)
                {
                    // Job_No.Text = "New";
                    JobM_Dt.Text = "";
                    StartTim.Text = "";
                    EndTime.Text = "";
                    Cust_refTxt.Text = "";
                    Cust_Ref_DtTxt.Text = "";
                    Due_DtTxt.Text = "";
                    Job_DescTxt.Text = "";
                    Linked_JobTxt.Text = "";
                    Client_ContactTxt.Text = "";
                    Client_EmailTxt.Text = "";
                    Approval_UsrTxt.Text = "";
                    Approval_DtTxt.Text = "";
                    Tot_QtyTxt.Text = "";
                    CostTxt.Text = "";
                    Job_TypeTxt.Text = "";
                    Job_CatogeryTxt.Text = "";
                }
            }
        }
        catch (Exception ex)
        {
            Response.Write(ex.Message);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T09:03:53.080

我建议您最好的方法是使用 jquery ajax 通过将所需的值传递给服务来调用 Web 服务，并使服务返回一个 JSON 格式的对象，您可以使用该对象来使用 jquery 填充文本框.

# eclipse - 为什么 eclipse/maven 并不总是在上次更新时部署我的项目？

> ID：11340990
> 
> 赞同：1
> 
> 时间：2012-07-05T08:58:42.420
> 
> 标签：eclipse, maven, deployment, maven-tomcat-plugin

这是我的工作环境：`Eclipse Juno`就像上面`IDE`的`maven2`插件一样——它使用`maven 3.0.4`从我的系统安装——我的`maven`web 项目被部署到`Apace Tomcat`java 服务器上的远程服务器上。（服务器`LAN`和我的机器是一样的。）一切都很完美，除了一些罕见的情况：它是随机发生的。

**问题**：有时，当我尝试将更新后的项目重新部署到`Tomcat`的项目目录中`tomcat-maven-plugin`的`JavaScript`文件时`Tomcat`，请不要更改。它们保持不变（即使我对它们进行了更改），并且我的应用程序缺乏行为。重新部署期间不报告错误`maven`。

**问题**：您对正在发生的事情有任何想法吗？

*注意*

1.  在我遇到这个问题的极少数情况下，我终于让它工作了，在重新启动`Tomcat`服务器、删除`Tomcat`项目目录、清理`maven`安装的工件和我所做的其他操作之后——我只是尝试了所有我能做的，因为我没有对发生的事情没有任何合乎逻辑的线索。
2.  我更新`Eclipse Galileo`到`Eclipse Juno`两天前，我都遇到了这个问题。所以，我认为这是一个与`maven`not to相关的问题`Eclipse`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T09:48:56.873

我找到了：当我说文件未在服务器上更新时，我是不对的。我的问题是浏览器。`Javascript`它从缓存中加载文件。所以`Ctrl`+`F5`解决了这个问题。

# forms - 设计：将 SignIn 和 ForgotPass 表单合并为一个

> ID：11340993
> 
> 赞同：2
> 
> 时间：2012-07-05T08:58:47.920
> 
> 标签：forms, ruby-on-rails-3.1, devise

如附图所示，我想将登录表单和忘记密码表单合并为一个表单。我正在使用 DEVISE 和 RoR 3.2.5。

![在此处输入图像描述](../Images/e94d0f805f4035930fb6b50f2c6a1ac3.png)

登录表单如下所示：

```
= simple_form_for(resource, :as => resource_name, :url => session_path(resource_name), :html => {:class => 'form-horizontal'}) do |f|
  .inputs
    = f.input :login, :required => false, :autofocus => true, :hint => "Enter either email ID or username"
    = f.input :password, :required => false
    = f.input :remember_me, :as => :boolean if devise_mapping.rememberable?
  .form-actions{ :style => "padding-left: 160px;"}
    = f.button :submit, "Sign in", :class => "btn btn-primary" 
```

忘记密码表单如下所示：

```
= simple_form_for(resource, :as => resource_name, :url => password_path(resource_name), :html => { :method => :post }) do |f|
  = f.error_notification
  .inputs
    = f.input :login, :required => true, :hint => "Enter either email ID or username"
  .form-actions{ :style => "padding-left: 160px;"}
    = f.button :submit, "Send me reset password instructions", :class => "btn btn-primary" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T08:40:27.983

一种方法是创建一个新的控制器方法来读取提交按钮的值。

基于该值，您应该能够在 2 个不同的操作之间进行路由。

另一种可能更现代、更简洁的方法是将 javascipt onclick 事件附加到其中一个按钮上，该按钮将忽略表单操作并提交到不同的路由。

粗略的例子：

```
<script>
  $('#forgot-submit-button').click(function(){
    $('#my-form').attr('action','<%= forgot_password_path %>').submit()
  });
</script> 
```

来不及测试这个，所以请以它为例。

# c# - 在 WinRT XAML/C# 中使用 Adorner、AdorrnerLayer、AdornerDecorator、Thumb 移动和调整组件大小

> ID：11340994
> 
> 赞同：2
> 
> 时间：2012-07-05T08:58:53.093
> 
> 标签：c#, wpf, xaml, microsoft-metro, windows-runtime

我正在为 Win 8 开发一个类似绘画的应用程序。我使用[这个](http://www.codeproject.com/Articles/22776/WPF-DrawTools)WPF 应用程序作为参考。

它使用`AdornerDecorator`&`Thumb`类来移动和调整组件大小；这些在 WinRT 中可用吗？它们似乎不可用；假设是这种情况，是否有任何解决方法可用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:40:16.793

我相信 WPF 中的装饰层只是所有其他控件之上的一层。您可以将所有这些装饰器与它们装饰的控件放在一起，或者尝试使用弹出窗口创建您自己的装饰器层，并确保在您使用装饰器隐藏对其他控件的访问时使用 IsHitTestVisible="False"。

# r - 重新连接到 tmux/屏幕后键盘 IO 损坏

> ID：11340995
> 
> 赞同：7
> 
> 时间：2012-07-05T08:58:55.370
> 
> 标签：r, vim, x11, tmux, gnu-screen

通过 ssh 重新连接屏幕或 tmux 会话后，我通常会遇到两个问题：

*   vim 选项卡完成被破坏。 `:e <Tab>`生成`:e ^I`而不是建议文件。标签 ( `:tj`) 相同。关闭并重新打开 vim 可以解决此问题，但代价是丢失 vim 状态。
*   R 不能生成图形。我`ssh -X -Y`启用了 X11 转发 ( )。关闭和重新打开无济于事。

我不能通过关闭我的 ssh 窗口并重新连接来故意重现该问题。问题通常在重新连接之间长时间没有网络连接后观察到，并且通常分离是突然的（网络连接丢失）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-14T00:56:21.903

**Vim 制表符补全：**

这是 screen/tmux 的终端仿真器的问题。如果选项卡在你的 shell 中工作（例如 bash），这很可能是 shell 的功劳；它知道为您映射控制序列，而 vim 不知道。据推测，您可以在 vim 中以类似的方式解决此问题，但随后您会在其他一些交互式程序中遇到问题。

我不能和 tmux 说话，但是对于屏幕，你应该更新你的 ~/.screenrc。我的，从 Redhat 附带的默认设置（我不再使用......）复制而来，包括：

```
#xterm understands both im/ic and doesn't have a status line.
#Note: Do not specify im and ic in the real termcap/info file as
#some programs (e.g. vi) will not work anymore.
termcap  xterm hs@:cs=\E[%i%d;%dr:im=\E[4h:ei=\E[4l
terminfo xterm hs@:cs=\E[%i%p1%d;%p2%dr:im=\E[4h:ei=\E[4l 
```

注意该评论，它可能表明您的问题。

另一个对 vi 的引用可能来自 Redhat 的 screenrc，也可能不来自 Redhat 的 screenrc，它是：

```
# Yet another hack:
# Prepend/append register [/] to the paste if ^a^] is pressed.
# This lets me have autoindent mode in vi.
register [ "\033:se noai\015a"
register ] "\033:se ai\015a"
bind ^] paste [.] 
```

希望其中一项或两项会有所帮助，否则我已经为您指明了正确的方向，以研究您需要什么来纠正您的屏幕/tmux 终端仿真。也许LinuxQuestions.org上有关[screen、vimrc 和 bashrc的答案可以提供更多帮助。](https://www.linuxquestions.org/questions/linux-general-1/screen-vimrc-and-bashrc-435283/)

* * *

**X11 转发：**

当你*第一次*启动屏幕时，$DISPLAY 会被继承。例如，我在我的电视服务器上利用了这一点；我在本地启动屏幕 ( `DISPLAY=localhost:0`)，然后当我通过 SSH 连接到它时，我对 X 所做的任何事情都会在电视上弹出。显然，这根本不是您的用例。我只是想向您介绍它的工作原理，以便您了解解决方案。

如果您要重新连接到由旧 SSH 连接启动的 screen/tmux 会话，您可能会走运并将其连接到相同的 X 显示器（SSH 默认为 localhost:10.0，然后在每次发现冲突时递增），但是听起来不像是发生在你身上。（“localhost”部分是可选的，“.0”部分也是如此。这些对于您的目的来说应该无关紧要。 `DISPLAY=:10`与 相同`DISPLAY=localhost:10.0`）

*在*你连接到你的 screen/tmux 会话之前，看看你的 $DISPLAY。

```
$ echo $DISPLAY
localhost:10.0 
```

然后，登录 screen/tmux 并将 $DISPLAY 设置为您之前看到的内容。

```
$ screen -r
$ export DISPLAY=localhost:10.0 
```

我认为 screen 或 tmux 都不够聪明，无法走得更远（想想我的电视服务器示例；这并不总是需要的，并要求 screen/tmux 测试 $DISPLAY ，然后根据其可用性采取行动有点多），因此您必须手动执行此操作。

（如果你像我一样添加`screen -r >/dev/null 2>&1`~/.bashrc，这可能会很烦人。我没有遇到这个问题，因为我尽量避免 X11 转发，因为它像糖蜜一样慢，当然不能在 SSH 中存活断开连接。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T14:19:37.787

第二个问题看起来像一个 DISPLAY 变量。首次登录时尝试 `echo $DISPLAY`，并在重新连接会话时再次尝试。如果它们不同（这是我怀疑的），`setenv`或者`export`它是正确的值。

至于第一个问题，请尝试查看您的 tmux.conf （或安装中的默认设置），因为它们正在重新映射 `<TAB>`到开发版本中的有趣操作（如清除历史记录），因此可能在重新附加后，tmux 拥有该事件并不是 vim。

# zxing - Zxing 是否提供 UPC 条码在屏幕上的坐标？

> ID：11340996
> 
> 赞同：1
> 
> 时间：2012-07-05T08:59:04.973
> 
> 标签：zxing

我需要知道条形码在屏幕上的位置。我需要它来处理 UPC 条码，或者更一般地说，用于 1D 条码。

到目前为止，ZXResult resultPoints 数组似乎只在同一条扫描线上提供了几个（线索）点，而不是条形码矩形的坐标。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T09:38:03.033

这是正确的。它不是通过检测整个矩形来操作的，因为它是不必要且缓慢的。它按行扫描。当检测到它时，它可以告诉您在线上的两个点——开始和结束的保护图案的中间。

如果你想找到整个矩形，你需要自己做，尽管这些点是关于在哪里搜索的线索。查看`MonochromeRectangleDetector`或`WhiteRectangleDetector`在项目中，可以找到一个类似条形码的矩形。