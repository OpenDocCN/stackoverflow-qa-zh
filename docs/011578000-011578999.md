# StackOverflow 问答 11578000-11578999

# android - Android，如何从 FragmentActivty 重新启动/刷新片段？

> ID：11578000
> 
> 赞同：2
> 
> 时间：2012-07-20T11:01:38.407
> 
> 标签：android, fragment

在我的 FragmentActivity 我有一个片段。该片段从服务器加载数据。我希望我们用户单击刷新按钮，然后我在片段中调用一个方法并执行刷新过程。

我在 FragmentActivity 中创建了一个界面，并在用户单击刷新按钮时设置其变量。代码是这样的：

```
public class MainScreen extends FragmentActivity {
    public interface OnRefreshSelected {
        public void refreshFragment(boolean flag);
    }

    private OnRefreshSelected onRefreshSelected;

    @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            Log.i(TAG, "Try to create MainScreen...");

            setContentView(R.layout.activity_main);

        onRefreshSelected = (OnRefreshSelected) MainScreen.this;
    }

     @Override
        public boolean onCreateOptionsMenu(Menu menu) {
            getMenuInflater().inflate(R.menu.activity_main, menu);
            return true;
        }

        @Override
        public boolean onOptionsItemSelected(MenuItem item) {
            switch (item.getItemId()) {
                    case R.id.menu_refresh:
                        onRefreshSelected.refreshFragment(true);
                        return true;
                    default:
                        return super.onOptionsItemSelected(item);
        }
    }
} 
```

在 Fragment 类中我实现了这个接口：

```
public class CategoryFragment extends Fragment implements OnRefreshSelected {
    @Override
    public void refreshFragment(boolean flag) {
        Log.i(TAG, "refresh requested. Try to reload data for this fragment...");

        getData();
    }
} 
```

当我运行时，应用程序崩溃并且 logcat 显示以下消息：

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.astro.recipe.activities/com.astro.recipe.activities.MainScreen}: java.lang.ClassCastException: com.astro.recipe.activities.MainScreen 
```

并指向这一行：

```
onRefreshSelected = (OnRefreshSelected) MainScreen.this; 
```

从宿主访问片段方法的最佳方法是什么？任何建议将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T12:05:04.277

执行这个

```
onRefreshSelected = (OnRefreshSelected) MainScreen.this; 
```

您正在`onRefreshSelected`现场分配您的活动，试图将其转换为您的界面，但您的活动没有实现该界面，这就是`ClassCastException`引发的原因。

而是使用这样的东西

```
 @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
                case R.id.menu_refresh:
                    CategoryFragment fragment = (CategoryFragment) getFragmentManager()
                        .findFragmentById(R.id.category_fragment);
                    if (fragment != null) {
                        fragment.getData();
                    }
                    return true;
                default:
                    return super.onOptionsItemSelected(item);
    } 
```

[您的活动可以通过使用findFragmentById()](http://developer.android.com/reference/android/app/FragmentManager.html#findFragmentById%28int%29)或[findFragmentByTag()](http://developer.android.com/reference/android/app/FragmentManager.html#findFragmentByTag%28java.lang.String%29)从 FragmentManager 获取对 Fragment 的引用来调用片段中的方法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-07-10T09:05:56.183

我同意biegleux ......但我的建议是

```
public class CategoryFragment extends Fragment{

   private static CategoryFragment categoryFrag;

    private CategoryFragment(){}

    public static CategoryFragment getInstance(){
        if(null == categoryFrag){
            categoryFrag = new CategoryFragment();
        }

        return categoryFrag;
    }

    public void  getData(){
       /*** Screen Refresh code****/
    }
} 
```

当他选择选项时，我是活跃的

```
@Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
                case R.id.menu_refresh:
                    CategoryFragment fragment = CategoryFragment.getInstance();
                     fragment.getData();

                    return true;
                default:
                    return super.onOptionsItemSelected(item);
    } 
```

# objective-c - 使用 ePOS SDK 打印 UIImage

> ID：11578013
> 
> 赞同：0
> 
> 时间：2012-07-20T11:02:31.343
> 
> 标签：objective-c, printing, epson

我正在使用 Epson 的 ePOS SDK，它允许通过 wifi 连接到打印机 (TM-T88V)。sdk 的链接 ( [http://pos.epson.com/mobilesdks/index.htm](http://pos.epson.com/mobilesdks/index.htm) )

我正在使用此代码从 url 加载 UIImage。

```
NSData* data = [[NSData alloc] initWithContentsOfUrl:_url];
UIImage* image = [UIImage imageWithData:data]; 
```

然后打印图像（使用 ePOS）**注意：我将跳过连接部分，因为它不包含在我的问题中。**

```
EposBuilder* builder = [EposBuilder alloc]  initWithPrinterModel:@"TM-T88V" lang:EPOS_OC_MODEL_ANK];

EposPrint* printer = [[EposPrint alloc] init];

int retVal = EPOS_OC_SUCCESS;
unsigned long status = 0;

retVal = [builder addImage:image X:0 Y:0 Width:image.size.width Height:image.size.Height Color: EPOS_OC_COLOR_1];

retVal = [printer sendData:builder Timeout:10000 Status:&status]; 
```

**现在我的问题是打印结果要小很多，看图像的大小是 271x368px。样品见下图**

关于如何使其正确打印的任何想法？此外，我发现此[使用 AirPrint 打印 UIImage 会导致截断内容](https://stackoverflow.com/questions/7652082/printing-uiimage-using-airprint-causes-cut-off-content)，该内容提供了缩放图像的链接，但它不起作用。有任何想法吗？谢谢你。

![在此处输入图像描述](../Images/a3f6a28cdbb103a17063bdc9b9d1e2e2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T14:23:25.030

我得到了解决方案，你不是我的已经解决了，我所做的是，将图像保存在 Documents 文件夹中，`NSFileManager`并从文档文件夹中获取相同的内容，并在添加之前为图像添加一个空格，对不起我英语..您需要实现自己的代码以通过文件管理器保存和检索图像。

```
NSData *dataFromUrl=[[NSData alloc] initWithContentsOfURL:url];
    UIImage *image1 = [UIImage imageWithData:dataFromUrl];
    if(image1)
    {
        [Filemanager saveReceiptLogoImage:image1];
    } 
```

//IN打印机类，

```
 UIImage *image1 = [Filemanager receiptLogo];
                if(image1)
                {
  result = [builder addText:@"    "];
   UIImage *resizedImage = [image1 resizedImageWithContentMode:UIViewContentModeScaleAspectFit bounds:CGSizeMake(512, 350) interpolationQuality:kCGInterpolationHigh];
                    result = [builder addImage:resizedImage X:0 Y:0 Width:MIN(512, resizedImage.size.width) Height:resizedImage.size.height Color:EPOS_OC_COLOR_1];
} 
```

# asp.net-mvc - MVC（不使用 Razor） - 如何将母版页中的脚本文件删除到 ascx 控件并使用它们

> ID：11578019
> 
> 赞同：0
> 
> 时间：2012-07-20T11:02:58.173
> 
> 标签：asp.net-mvc

我有使用传统 aspx 视图而不是 Razor 的 MVC 应用程序。我在主文件中有一堆 js 文件引用。理想情况下，我想将它们移动到其他地方，这样我就可以在主文件中仅引用它们一行。如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T14:32:48.247

创建一个局部视图（我将调用我的 MyPartialViewWithScripts）并将其放置在您的共享目录中。在此部分视图中，列出您需要/想要在主布局中显示的所有 javascript 文件。然后在您的主布局调用中

**局部视图**

```
<script type="text/javascript" src="PathToJSfile.js"></script>
<script type="text/javascript" src="PathToJSfile2.js"></script> 
```

**主布局**

```
<html><head>
<% Html.RenderPartial("MyPartialViewWithScripts")%>
</head> 
```

# google-drive-api - 如何以编程方式操作原生谷歌文档文件

> ID：11578020
> 
> 赞同：17
> 
> 时间：2012-07-20T11:03:05.107
> 
> 标签：google-drive-api

是否可以以编程方式编辑原生 Google 文档，例如将某些单词设为粗体或超链接？我知道我可以将其导出为某种格式，如 DOC 或 ODT，进行更改并放回原处。但是手动尝试了这种方式，发现我失去了确切的外观。找不到本地 Google 文档的任何 API 或对象模型，尽管电子表格似乎有一些东西。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-21T01:37:16.770

不幸的是，无法使用 REST API 以编程方式编辑 Google 文档（Google 的文字处理器文档）。目前只有 Google 电子表格提供[这样的 API](https://developers.google.com/google-apps/spreadsheets/)。

您可以尝试 Google Apps 脚本：[https](https://developers.google.com/apps-script/) ://developers.google.com/apps-script/它是一个托管脚本环境，它提供了一个[Google 文档服务](https://developers.google.com/apps-script/service_document)，允许您编辑和管理现有的 Google 文档。

最后，您始终可以使用 RTF 等开放格式上传文档，并使用 Google Drive API 将其转换为原生 Google 文档。

# android - 在 Android 中的方向更改之间保留数据的最佳方法

> ID：11578025
> 
> 赞同：3
> 
> 时间：2012-07-20T11:03:27.400
> 
> 标签：android, android-orientation

我的教育应用程序有一个包含 6 到 7 个选项卡的选项卡主机，支持横向和纵向模式。在与选项卡关联的每个活动中，我在列表视图中显示一些学生记录，一些复选框用于选择和一些评分栏、按钮等。我通过 Web 服务调用从远程服务器获取这些学生记录。由于某些原因，我的应用程序将在执行一些操作/搜索后显示一个带有一些按钮的初始相对布局它将在列表视图中显示结果，在单击列表视图中的列表项或按钮时，我将显示一些其他布局。这适用于选项卡主机中的所有活动。

如果用户改变方向，我必须恢复相同的状态或相同的屏幕，这意味着如果用户以前看到记录列表，我必须显示记录列表，如果初始我必须只显示初始。我不想强制停止 android 在方向更改或覆盖时破坏活动`public Object onRetainNonConfigurationInstance ()`。正如一些博客和 android 文档中所建议的那样，这些可能会导致以后的操作出现问题。我所做的只是保存所有必需的信息，例如哪个屏幕 1 或 2 或 3、文本视图标签和`onSaveInstanceState`Bundle 中的所有原始数据类型，并将它们恢复到`onRestoreInstanceState`. 此外，我正在将我的自定义搜索结果对象数组写入文件，并在 onSaveInstanceState 和 onRestoreInstanceStates 之间检索和删除它。由于我的搜索结果有 100 多个对象，并且我存储了大量的原始数据类型列表，当用户快速旋转设备时，堆大小会迅速增加。

处理它的最佳方法是什么

1）坚持onSaveInstanceState和onRestoreInstanceStates，这会使我的屏幕空白一段时间并增加堆大小，当用户多次旋转时不一定执行保存和恢复

2）将所有需要的数据保持为静态，因为它不是活动本地的，它不会破坏

3）通过扩展应用程序类来保留所有需要的数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T11:13:09.677

您还可以使用可以通过方向更改保留的片段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T11:45:40.663

如果方向配置发生更改（您可以添加侦听器），我会建议您从清单和程序中修复方向，您可以调整视图，因为看起来方向已更改。通过这种方式，您可以保存数据以及不必要的内存存储。动态对齐和重新定位视图不会含糊，不用担心。

```
 // Add inside manifest.
  android:configChanges="orientation|keyboardHidden"

  // Reposition your views
  @Override
  public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig); 
    if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) {
        align_landscape();
    } else if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT) {
        align_portrait();
    }
} 
```

# sql-server - 使用 Amazon RDS (SQL Server) 进行复制

> ID：11578030
> 
> 赞同：1
> 
> 时间：2012-07-20T11:03:50.873
> 
> 标签：sql-server, reporting-services, database-replication, amazon-rds

假设我们正在使用*Amazon RDS (SQL Server) OLTP数据库，并通过**Amazon AMI*上的*(SSRS)*促进报告。有人知道将数据从*Amazon RDS*实例上的某些表复制到*AMI*实例以提供报告服务吗？

 ***理想情况下，我们希望使用复制，但由于*SQL 代理*在*Amazon RDS (SQL Server)*上不可用，这将是不可能的。

如果所有其他方法都失败了，那么实现这一点的唯一方法似乎是将*OLTP*数据库也放在*Amazon AMI*上。

有没有人对此有任何想法或建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-27T18:02:16.857

其中一件事`RDS SQL Server`是[集成更改跟踪](https://technet.microsoft.com/en-us/library/cc280462(v=sql.105).aspx)。这是从您的`RDS SQL Server`（甚至与`SQL Express`.

我通常做的是有一个预定的进程，它运行一个工作作业来获取更改并将它们推送到类似的东西，`AMI`或者在某些情况下推送到另一个`SQL Server`.***

# module - 为什么 lsmod 命令没有列出 Xorg 加载的模块？

> ID：11578032
> 
> 赞同：1
> 
> 时间：2012-07-20T11:03:54.607
> 
> 标签：module, linux-kernel, kernel, x11, xorg

如标题所示，为什么 lsmod 没有列出 Xorg 默认加载的 extmod、dri、dbe 等模块？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T15:02:14.673

您列出的 Xorg 模块不是内核模块。它们特定于 Xorg。Xorg 可能会通过某些内核模块受益。

您可以使用以下命令从 Xorg 日志中查看加载的模块

```
grep LoadModule /var/log/Xorg.0.log 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T09:32:32.510

它仅加载一个模块（如果尚未加载）。那就是你的显示驱动程序。（NV/NVIDIA/NOUVEAU 或任何 Intel/AMD 驱动程序）

# java - 学习 ERD 和 ORM 的好学习资源

> ID：11578034
> 
> 赞同：1
> 
> 时间：2012-07-20T11:03:57.350
> 
> 标签：java, sql, jpa, orm, erd

我已经创建了实体关系图，现在要学习 JPA。我想根据数据库要求更多地平滑我的 ER 图技能，并了解有关对象关系映射的更多信息，直至达到专家级别。参与实际项目开发可能会增加我的 ORM 知识和经验。（目前我所做的是，只是思考和绘画，没有人指导我。
）但我希望有更好的学习资源，以获得更好的知识，数据库设计，ERD，ORM s 的经验。我向各位专家请求任何可能对我有帮助的链接、样本、书籍。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T11:17:52.397

我猜专家是专家，因为他们有经验，而经验来自于创建糟糕的 ERD。所以我宁愿继续做你正在做的事情。选择一个人难以解决的非常大的系统，尝试做出糟糕的设计，然后进行迭代。

快速搜索在 Google 上显示了许多不同的来源，尝试查找作者的文章，`Wrox`或者`O'Relly`他们都非常擅长解释编程技术。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T11:44:36.223

[small tutorial](https://docs.google.com/viewer?a=v&q=cache:8n-O8zlDoBEJ%3ahttps://www.site.uottawa.ca/~tcl/seg4210/coursenotes/PdfsForTopicsPostMT/TopicO17-ObjectRelationalMapping.pdf+&hl=en&gl=lk&pid=bl&srcid=ADGEESgdOz6bmuqJYxAVeFdSacHWl3OWh-um9G-2rioN8hJK_L4NumxPhx7gJjc6E-VqEsOL0S47s705pLS9GmxjsdX4aWhbqGHPE-Oo9aBEUop4XOfhhYShrhrniLSlwBE6sJEFjOoW&sig=AHIEtbRBRu_ym5nMHYH42kYed7_2Ot3xfQ&pli=1)

Also sample images can be found on google image search.

Also [Here](http://www.agiledata.org/essays/mappingObjects.html)

# c# - 使用后台工作人员是否正确

> ID：11578038
> 
> 赞同：0
> 
> 时间：2012-07-20T11:04:13.170
> 
> 标签：c#, serial-port, modem, at-command

我想在 ac# 应用程序中读取来自 GSM 调制解调器的消息。我编写了以下代码并使用后台工作人员在单独的线程上实现 Thread.sleep() 。但是在我使用 port.ReadExisting() 时，没有从端口读取任何内容。我是否使用了错误的方式来处理后台工作人员？

```
 private void btn_Read_Click(object sender, EventArgs e)
    {
        lvwMessages.Items.Clear();
        status_other.Visible = true;
        status_other.Text = "Loading messages...";
        if (read_all.Checked)
        {
            port.WriteLine("AT+CMGL=\"ALL\"");

        }
        else if (read_unread.Checked)
        {
            port.WriteLine("AT+CMGL=\"REC UNREAD\"");
        }
        port.DiscardOutBuffer();
        port.DiscardInBuffer();

        backgroundWorker1.RunWorkerAsync();
    }
    private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
    {
        Thread.Sleep(5000);
    }

    private void backgroundWorker1_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
     string res = port.ReadExisting();// here no data is fetched into res
        //rest of the code 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T11:10:13.197

实际上，如果`port`是 a`SerialPort`那么你做错了。有`SerialPort`一个`DataReceived`异步事件，当数据进入时会自动调用。这允许您逐步构建您的回复，并在您收到完整回复时在您的代码中检测。

您*不能* 仅仅等待 5 秒就得到完整的答复。

例子：

```
private String m_receivedData = String.Empty;

private void port_DataReceived(object sender, SerialDataReceivedEventArgs e)
{
    m_receivedData += (sender as SerialPort).ReadExisting();

    if (<check whether m_receivedData contains everything I need> == true)
    {
        ProcessData(m_receivedData);
        m_receivedData = String.Empty;
    }
} 
```

请注意，它`port_DataReceived`是在单独的线程中调用的，因此`Invoke`如果要更新 GUI，则需要使用。

**编辑**
只是为了说清楚： A`BackgroundWorker`应该用于在后台执行操作，报告状态和/或完成时报告。仅仅使用它来暂停并不是一件有用的事情，尤其是当实际过程确实包含一些“等待数据存在”机制时，这就是我上面描述的事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T11:09:45.633

是的，您以错误的方式使用后台工作人员
会更好地使用 SerialPort 的直接数据接收事件，或者如果您想使用基于时间的解决方案，单次计时器会更好。

# serialization - IsSerializable 不在 WinRT 中

> ID：11578040
> 
> 赞同：0
> 
> 时间：2012-07-20T11:04:17.007
> 
> 标签：serialization, windows-runtime

在**.Net**中，当我们想要检查一个类型是否可序列化时，我们可以这样做：

```
typeof(T).IsSerializable 
```

MSDN 文档对应：http: [//msdn.microsoft.com/fr-fr/library/system.type.isserializable%28v=vs.110%29.aspx](http://msdn.microsoft.com/fr-fr/library/system.type.isserializable%28v=vs.110%29.aspx)

但是**IsSerializable在****WinRT**中不存在，那么我们如何检查一个类型是否可序列化呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T11:57:19.417

您需要使用 TypeInfo 类。请参阅[http://msdn.microsoft.com/en-us/library/windows/apps/system.reflection.typeinfo(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/windows/apps/system.reflection.typeinfo(v=vs.110).aspx)和[http://msdn.microsoft.com/en-us/库/windows/apps/hh535795(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh535795(v=vs.110).aspx)。

# php - 使用 passthru 输出时将 html 放入 pdf 文件

> ID：11578041
> 
> 赞同：0
> 
> 时间：2012-07-20T11:04:19.017
> 
> 标签：php, firefox, pdf, passthru

尝试在弹出窗口中显示我的 pdf 时出现错误。这可能是我进行直通时引起的。我的浏览器是 Firefox(14.0.1)。

我在服务器端生成了一个 pdf，我想在浏览器弹出窗口中显示它。我创建了 pdf 并设置了一个标题（ header('Content-type: application/pdf'); ）并做一个 passthru('cat my_pdf_file')。

我最终得到的是我的 index.php 文件在 pdf 开头和 pdf 结尾处的 html。就像我的 PDF 嵌入在索引文件中一样，我下载了整个内容（带有 pdf 的索引）。我只想显示pdf的内容。

这发生在传递过程中，当 FTP 将文件下载到我的桌​​面并从那里打开时，我可以正确观看它。

我用记事本++打开pdf并看到编码内容时检测到它。

有什么建议可以解决这个问题只得到 pdf 吗？

此致，

加布里埃尔·保尔森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T11:41:04.597

在将任何输出发送到浏览器之前，应调用标头函数。此外，您用来下载 pdf 的页面不应该有任何 html 标签：您应该只输出 pdf 数据。

# solr - 如何以编程方式更改索引并查询 synonm.txt 中的新同义词

> ID：11578042
> 
> 赞同：0
> 
> 时间：2012-07-20T11:04:19.080
> 
> 标签：solr, solrj, synonym

请任何人建议我如何以编程方式在索引和查询部分中为新的同义词输入进行更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T15:50:43.113

我做了一些非常相似的事情。我在表中有一个同义词列表，我必须让 solr 在索引和查询时处理这些同义词。我写了一个 python 脚本，它将同义词写入一个文件——这是你的 solr conf 目录中的 synonyms.txt。只需确保文件名在 schema.xml 中链接，如此处所述 - [http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.SynonymFilterFactory](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.SynonymFilterFactory)

另外，请确保文本文件后面没有“，”或空格，并且末尾没有空行。

这是我的python脚本的片段。希望它有所帮助

```
for key in synonym_dict:
    values = synonym_dict[key]
    for val in values:
        f.write(val + ',')
    f.seek(-2, 1)
    f.write('\n')
f.truncate()
f.close() 
```

您需要查找和截断以避免前面出现“;” 和空行。

希望它有所帮助

# c++ - “<_ZThn24_N15[Some namespace]22[Some class name]D1Ev>”在 gdb 中是什么意思？

> ID：11578043
> 
> 赞同：1
> 
> 时间：2012-07-20T11:04:21.310
> 
> 标签：c++, c, gdb, coredump

我正在尝试调试一个核心转储，并且我找到了结构，`0x00000055558..` 当我键入时，它的第一个变量指向`x 0x00000055558..`它，它输出：

```
0x55558.. <_ZTVN15NameSpace22ClassNameE+16>:    0x0000005.. 
```

这是否意味着此处定义了此类的变量？尝试返回 16 个字节并将其转换为 ClassName 不会给出有效值。

对于这样的新手问题，我很抱歉，但我在谷歌中找不到这个问题很长时间了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T11:35:20.873

你看到的是一个[错位的名字](http://en.wikipedia.org/wiki/Name_mangling)。你可以告诉 GDB 为你解开它（或者更好的是，从现在开始解开名字）：

```
set print demangle on 
```

根据[这个网站](http://www.delorie.com/gnu/docs/gdb/gdb_58.html)，这个命令告诉 GDB：

> 以源代码形式打印 C++ 名称，而不是以传递给汇编器和链接器的编码（“损坏”）形式以进行类型安全链接。默认为开启。

此外，要查看某个地址的代码，您可以编写：

```
l *0x<address> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T11:44:29.217

See the other answers for ways to demangle that symbol name. It will probably turn out to be something like "vtable for NameSpace::ClassName". (g++ symbols beginning with _ZTV are vtables.)

Finding a pointer to an offset inside a vtable is usually a very good indication that you have found memory containing an object whose most-derived type is that class. It doesn't guarantee it's not left over deallocated memory or some such thing, of course.

# c# - 在 asmx 服务中公开 List<>

> ID：11578048
> 
> 赞同：0
> 
> 时间：2012-07-20T11:04:51.980
> 
> 标签：c#, asmx, generic-list

我可以`System.Collections.Generic.List<>`从 asmx 服务公开一个吗？我试过了，但是在客户端生成的引用类已将其转换为 Arrary[]。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T11:10:45.367

您是否在更新服务参考中设置了选项？

![更新服务参考](../Images/2d721e22336b829bbe1faf808fe3e0a2.png)

您可以通过右键单击位于 Service References 文件夹中的服务进行设置，然后选择 Configure Service Reference。

并且您可能已经设置了该选项并且您仍然要返回一个数组，那么我建议您看这里 [http://johnnblade.wordpress.com/2012/06/07/service-reference-returns-array-t-instead-列表/](http://johnnblade.wordpress.com/2012/06/07/service-reference-returns-array-t-instead-of-listt/)

* * *

![服务参考](../Images/b7ca14aeb17c73d918f6e0a16afaa5e1.png)

# silverlight - 如何在 Silverlight 应用程序中退出应用程序？

> ID：11578049
> 
> 赞同：1
> 
> 时间：2012-07-20T11:04:51.810
> 
> 标签：silverlight, web-services, exit

我有一个带有自定义表单身份验证的 Silverlight 应用程序。关闭浏览器窗口时如何注销应用程序？

我试过这样的事情：

```
 public App()
    {
        Startup += ApplicationStartup;
        Exit += Application_Exit;

        UnhandledException += ApplicationUnhandledException;
        var webContext = new WebContext {Authentication = new FormsAuthentication()};
        ApplicationLifetimeObjects.Add(webContext);
        InitializeComponent();
    }

    private void ApplicationStartup(object sender, StartupEventArgs e)
    {
        Resources.Add("WebContext", WebContext.Current);
        RootVisual = new MainPage();
    }

    private void Application_Exit(object sender, EventArgs e)
    {
        WebContext.Current.Authentication.Logout(false);
    } 
```

但这没有用。每次关闭浏览器时，我都会收到异常**An AsyncCallback 抛出异常**而没有任何详细信息。

我该如何处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T11:26:33.430

您可以使用 onbeforeunload 在页面上调用 ajax 调用，忘记在关闭时使用 silverlight 调用注销的想法。

# android - 获取平台签名密钥

> ID：11578052
> 
> 赞同：1
> 
> 时间：2012-07-20T11:04:55.183
> 
> 标签：android, key, platform, android-source, sign

我需要知道如何获得平台签名密钥。我用谷歌搜索了很多，但无法找到一步一步的过程。

请指导我如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T02:04:29.707

下面的链接应该会有所帮助：

[http://www.xinotes.org/notes/note/1267/](http://www.xinotes.org/notes/note/1267/)

此外，要生成调试密钥以使用“ant debug”对您在平台构建之外构建的 apk 进行签名，您需要将步骤 3 中的命令之一更改为：

$ keytool -changealias -alias 1 -destalias androidebugkey -keystore ~/.android/debug.keystore

# javascript - 遍历 JSON 对象

> ID：11578053
> 
> 赞同：0
> 
> 时间：2012-07-20T11:04:55.213
> 
> 标签：javascript, json, optimization

我从 PHP 页面获取的数据如下：

```
[{
    "id": "1",
    "name": null,
    "startdate": "2012-07-20",
    "starttime": "09:53:02",
    "enddate": "2012-07-20",
    "endtime": "09:54:10",
    "duration": "01:00:00",
    "feedbacks": [{
        "id": "1",
        "type": "1",
        "content": "cont"
    }],
    "conditions": [{
        "id": "1",
        "dev_id": "1",
        "mod_id": "2",
        "sub_id": "3",
        "to_be_compared_value": "1",
        "comparison_type": "1"
    }],
    "actions": [{
        "id": "1",
        "dev_id": "1",
        "mod_id": "1",
        "sub_id": "1",
        "target_action": "1"
    }]
}] 
```

哪种方式可以轻松、高效、优雅地遍历这个对象？直到这次我都使用了这两个。你能告诉我哪一个必须是我的选择，或者你能给我一个替代方案吗？为什么？我有一个正在运行的应用程序版本，我现在正在审查我自己的代码，我想向大家提出一些建议。

提前致谢，

我之前使用的方法：

```
$.map
for(var i in obj) 
```

**还有一个，我将根据这些数据创建一个表。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T11:08:12.183

对于这样的事情，我更喜欢使用[http://underscorejs.org/](http://underscorejs.org/)。它对对象、集合等有很多有用的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T11:13:26.453

如果我想更改数据，我会使用[jQuery 的 each()](http://api.jquery.com/jQuery.each/)（或[map() ）](http://api.jquery.com/jQuery.map/)

我应该补充一点，您还应该创建一个返回对象的函数（甚至可能使用一些实用方法），因为您的数据现在对 JS 不是很友好。那些日期和时间，那些 ID 作为字符串。

例子：

```
 function cleanMyObject(object){
        var cleanFeedbacks = function(feedbacks){
            /* ... */
            return feedback;
        };

        object.start = /* transform date and time strings to datetime object ...*/
        object.end = /*...*/

        /*...*/

        $.map(object.feedbacks,cleanFeedbacks);
        /* cleanup the remaining objects... */

        return object;
    }

    $.map(receivedData, cleanMyObject);

    // cleanMyObject() returns the modified object so $.map will clean everything in your array. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T11:13:51.650

如果您收到的数据没有改变，只需解析对象并使用您需要的键。我知道的所有浏览器都有一个名为[JSON.parse](https://developer.mozilla.org/En/Using_native_JSON/)的函数，用于将 JSON 字符串转换为 JS 对象。我想说的是：不要偷懒，如果您的对象将始终提供相同的数据，那么您不会从编写“通用”函数中获得任何好处，而且您几乎没有机会使用它使用不同的对象再次起作用。

```
var myobj= JSON.parse(phpJSONstring);
var feedbacks= myobj["feedbacks"];
//do something with feedbacks
var conditions= myobj["conditions"];
//do something with conditions 
```

ETC

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-20T11:10:59.793

您可以在 javascript 对象中转换 json 字符串，然后像这样访问该对象：

```
var obj = jQuery.parseJSON(jsonString);
alert('Id='+obj.id);

var feedbackList = obj.feedbacks;
for (var i=0; i<feedbackList.length; i++) {
   ...
} 
```

jQuery.parseJSON 参考：[http ://api.jquery.com/jQuery.parseJSON/](http://api.jquery.com/jQuery.parseJSON/)

# tomcat - Tomcat 和 SSL 客户端证书

> ID：11578054
> 
> 赞同：4
> 
> 时间：2012-07-20T11:04:57.553
> 
> 标签：tomcat, ssl

我想有以下情况：

1.  创建我自己的 CA
2.  创建服务器证书并使用我的 CA 对其进行签名
3.  创建多个客户端证书并使用我的 CA 对其进行签名

接下来，我想对每个提供由我的 CA 签名的证书的客户端进行身份验证。

是否可以在不将每个客户端证书添加到我的 tomcat 密钥库的情况下实现这种情况？我只想验证客户端提供的证书是否由我的 CA 颁发和签名。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-20T11:47:27.580

是的，这当然是可能的，而我正是这样做的。如果您使用包含 CA 证书的信任库配置 Tomcat，那么它应该接受由该 CA 签名的任何客户端证书。

我假设您已经生成了 CA 密钥和根证书，并且您知道如何使用它将 CSR 转换为证书。

首先生成您的服务器密钥，以及相应的 CSR

```
$ openssl genrsa -out XXX.key 2048
$ openssl req -new -nodes -key XXX.key -out XXX.csr 
```

使用您的 CA 证书签署 CSR，生成服务器证书`XXX.crt`。现在将服务器密钥、服务器证书和 CA 证书打包到一个 PKCS#12 文件中

```
$ cat XXX.crt ca-certificate.pem | openssl pkcs12 -export -inkey XXX.key -out XXX.p12 -name tomcat -caname myauthority 
```

此过程将提示您输入多个密码，将它们全部设置为相同的值（这个值是什么并不重要，它不必是安全密码，它必须是非空的 - 我使用`changeit`）。

该`.p12`文件现在可以充当 Tomcat 的*密钥库*。接下来，您需要创建一个单独的 JKS 密钥库，其中仅包含用作*信任*库的 CA 证书。

```
$ keytool -import -alias myauthority -keystore truststore.jks -file ca-certificate.pem 
```

再次，使用相同的非空密码回复所有密码提示，例如`changeit`.

最后你可以配置Tomcat：

```
<Connector port="8443" protocol="HTTP/1.1" SSLEnabled="true"
           maxThreads="150" scheme="https" secure="true"
           connectionTimeout="20000"
           keystoreFile="${catalina.home}/conf/XXX.p12"
           keystoreType="PKCS12"
           keystorePass="changeit"
           truststoreFile="${catalina.home}/conf/truststore.jks"
           truststoreType="JKS"
           truststorePass="changeit"
           clientAuth="true" sslProtocol="TLS" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-15T16:19:09.530

**免责声明：仅在开发环境中使用自签名根证书。**

如需更完整的概述（逐步）：

```
Create a root certificate
openssl req -x509 -newkey rsa:4096 -keyout key.pem -out cert.pem -sha256 -days 365

Create a key and CSR
openssl genrsa -out mycert.key 2048
openssl req -new -nodes -key mycert.key -out mycert.csr

Sign the CSR with your root certificate
openssl x509 -req -in mycert.csr -CA cert.pem -CAkey key.pem -CAcreateserial -out mycert.pem

Create a PKCS#12 certificate with the cert and key
openssl pkcs12 -export -out mycert.p12 -inkey mycert.key -in mycert.pem

Create a separate JKS keystore containing just the CA certificate (to use as the truststore)
keytool -import -alias my-ca -keystore truststore.jks -file cert.pem 
```

这适用于 Ian Roberts 的 Tomcat 配置。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-20T11:15:43.620

你应该看看 openSSL： http: [//openssl.org/](http://openssl.org/) 或者如果你想要一个免费的现有 CA（但你必须每个月都这样做）有： http: [//www.startssl.com/](http://www.startssl.com/)

# javascript - iOS Safari下的神秘错误

> ID：11578060
> 
> 赞同：1
> 
> 时间：2012-07-20T11:05:33.030
> 
> 标签：javascript, jquery, ios, jquery-ui, mobile-safari

当我在 iPad 下加载我的应用程序的登录页面时，我的 javascript 中出现以下错误（我加载了几个不同的 javascript 文件）：

```
JavaScript: Error
undefined
TypeError: 'undefined' is not a function 
```

它既不告诉我它来自哪个文件，也不告诉我究竟是什么错误。关于如何以更简单、更易于理解的方式进行调试的任何想法？该应用程序在包括 IE7 在内的所有主要桌面浏览器上都能正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T12:27:30.900

我发现了问题！我的应用程序托管在 IIS express 上，我所有的 javascript 引用都是通过 localhost 上的虚拟目录完成的。

所以我有以下参考资料：

```
<script type="text/javascript" src="http://localhost/folder/script.js"></script> 
```

当我将其更改为：

```
<script type="text/javascript" src="http://1.1.1.1/folder/script.js"></script> 
```

这一切都很完美。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T12:15:40.830

这是一个替代答案，可能会对遇到相同错误消息的人有所帮助：

**1\. iWebInspector**

[iWebInspector](http://www.iwebinspector.com/)是 iOS 模拟器的调试工具。有了它，您可以在模拟器的浏览器中加载站点并访问 webkit 的 web 检查器，以帮助调试

**2.远程调试**

实现这一点的一个非常简单的方法是使用 iOS6 的远程调试界面和 Safari。但是，目前它还没有公开发布（虽然不会更长），并且需要一台装有 iOS6 和 Safari 6 的 iPad。您可以[在此处](http://taitems.tumblr.com/post/24936855546/what-ios-6-mobile-safari-offers-front-end-devs)阅读有关此内容的更多信息，但大部分细节仍在 NDA 中。

远程调试这是我最近使用的东西，看起来很不错，但是 iWebInspector 和模拟器也很好，我仍然将它们用于 Web 内容

# javascript - 在 jquery onlclick 中获取元素的 id？

> ID：11578061
> 
> 赞同：0
> 
> 时间：2012-07-20T11:05:33.353
> 
> 标签：javascript, jquery, toggle

这是一个非常简单的html页面示例

```
<span class ="title" id="title_1">this is</span> 
<span class="toggle" id="toggle_1>paragraph 1</span>

<span class ="title" id="title_2">this is</span> 
<span class="toggle" id="toggle_2">paragraph 2</span> 
```

我试图用切换功能做一个onlcick事件，所以基本上当用户点击title_1时，toggle_1会隐藏和显示，如果用户点击title_2它将显示和隐藏toggle_2，我希望这是有道理的。

```
 (document).ready(function() {
      $('.toggle').hide();
        $('#title_').click(function() {
        $('#toggle_').toggle('slow');
    });
      }); 
```

我像这样开始我的jquery，只是不知道从这里做什么。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T11:10:51.920

你可以：

```
$('.toggle').hide();
$('.title').click(function() {
   $(this).next(".toggle").toggle('slow');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T11:11:29.420

尝试这个

```
(document).ready(function() {
      $('.toggle').hide();
      $('.title').click(function() {
                $(this).closest('.toggle').toggle('slow');
      });
}); 
```

# php - 使用 Piwiki 将网站分组

> ID：11578067
> 
> 赞同：0
> 
> 时间：2012-07-20T11:05:46.723
> 
> 标签：php, web-analytics, matomo

我正在使用单个 Piwik 实例来监控我的网站。我的一些网站共享相同的主题，所以我想将它们分组。

您知道在使用 Pwiki 分析时是否可以将网站放入组/类别中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T23:39:42.063

这不是当前可用的功能，但可能会在未来考虑。您可以在 Piwik 提交功能请求：http: [//forum.piwik.org/list.php? 3](http://forum.piwik.org/list.php?3)

# python - sqlalchemy：“InstrumentedList”对象没有属性“过滤器”

> ID：11578070
> 
> 赞同：41
> 
> 时间：2012-07-20T11:06:01.373
> 
> 标签：python, sqlalchemy

我有以下 3 个课程：

```
class Resource:
    id = Column(Integer, primary_key=True)
    path = Column(Text)
    data = Column(Binary)
    type = Column(Text)

    def set_resource(self, path, data, type):
        self.path = path
        self.data = data
        self.type = type

class EnvironmentResource(Base, Resource):
    __tablename__ = 'environment_resources'
    parent_id = Column(Integer, ForeignKey('environments.id', ondelete='CASCADE'))
    def __init__(self, path, data, type):
        self.set_resource(path, data, type)

class Environment(Base):
    __tablename__ = 'environments'
    id = Column(Integer, primary_key=True)
    identifier = Column(Text, unique=True)
    name = Column(Text)
    description = Column(Text)

    _resources = relationship("EnvironmentResource",
        cascade="all, delete-orphan",
        passive_deletes=True)
    _tools = relationship("Tool",
        cascade="all, delete-orphan",
        passive_deletes=True)

    def __init__(self, name, identifier, description):
        self.name = name
        self.identifier = identifier
        self.description = description

    def get_resource(self, path):
        return self._resources.filter(EnvironmentResource.path==path).first() 
```

在调用 get_resource 时，我被告知 'InstrumentedList' 对象没有属性 'filter' - 我已经阅读了文档并且无法完全弄清楚这一点。我错过了什么，以便我可以过滤与我的“get_resource”方法中的环境相对应的资源？

PS：我知道 get_resource 会抛出异常，这就是我希望它做的事情。

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-07-20T12:24:43.533

为了像 with 一样使用[关系](http://docs.sqlalchemy.org/en/latest/orm/relationships.html)`Query`，您需要将其配置为`lazy='dynamic'`。在[动态关系加载器](http://docs.sqlalchemy.org/en/latest/orm/collections.html#dynamic-relationship-loaders)中查看更多信息：

```
_resources = relationship("EnvironmentResource",
    cascade="all, delete-orphan",
    lazy='dynamic',
    passive_deletes=True) 
```

# java - java.exe -jar 的附加 jar 文件

> ID：11578071
> 
> 赞同：1
> 
> 时间：2012-07-20T11:06:06.740
> 
> 标签：java, jar

我运行以下命令：

```
C:\Projects\java -cp ./dependency.jar -jar ./dist/main.jar
Exception in thread "main" java.lang.NoClassDefFoundError: MyException
Caused by: java.lang.ClassNotFoundException: MyException
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
Could not find the main class: Main. Program will exit. 
```

MyException 在dependency.jar 中。我还尝试将 -cp 替换为 -classpath。我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T11:07:42.977

如果`-cp`您使用`-jar`. 如果您在类路径上需要额外的 jar 文件，您应该在 Manifest 中指定，`main.jar`如下所示：

```
Class-Path: dependency.jar 
```

（然后您可以使用 . 运行您的程序`java -jar main.jar`。）

**相关问题：**

*   [创建 jar 文件时，如何将现有的类路径保留到其他 jar 文件？](https://stackoverflow.com/questions/5742355/when-creating-a-jar-file-how-do-i-retain-the-existing-classpaths-to-other-jar-fi)
*   [即使jar文件在工作目录中也找不到类](https://stackoverflow.com/questions/7469711/cannot-find-class-even-when-jar-file-is-in-working-directory)
*   [码头类路径问题](https://stackoverflow.com/questions/7537390/jetty-classpath-issues)
*   [与 jar 中的 MANIFEST.MF 相关的问题](https://stackoverflow.com/questions/4678524/problem-related-to-manifest-mf-in-jar)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T11:10:33.460

您是否尝试过在 Windows 环境变量 CLASSPATH 中指定类路径？

指定您的环境变量 CLASSPATH 并输入您的 JAVA_HOME\lib 和（所有类的路径）的值，并通过包含（点或句点符号）来包含当前目录。

# jquery - CSS jQuery 活动选项卡选择

> ID：11578081
> 
> 赞同：0
> 
> 时间：2012-07-20T11:06:31.733
> 
> 标签：jquery, css

我的页面上有一个导航栏，如果它们是最后一次点击的链接，我希望以不同的方式设置链接。我已经像这样设置了我的CSS：

```
#nav li a.active {
  background-color: #F2F2F2;
  color: #000000;
  font-weight: bold;
} 
```

我的布局文件中有一个 jQuery 脚本，如下所示：

```
$('#nav li a').click(function() {
  $('#nav li a.active').removeClass('active');
  $(this).addClass('active');
}); 
```

每当我点击一个链接时，我都会得到想要的效果，但只有在下一页加载之前。当下一页加载时，我刚刚单击的链接没有 .active css 类。如何使此类在不同页面之间持续存在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T11:20:20.680

为了保留值，您可以使用 javascript cookie

从这里下载并包含插件[https://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)

并添加这个 JS

```
document.ready(function(){

if($.cookie( "prev") != '')
{
$('#'+ $.cookie( "prev")).addClass('active');
}

$('#nav li a').click(function() {
  $('#nav li a.active').removeClass('active');
  $(this).addClass('active');
$.cookie( "prev", $(this).attr('id') );
});

}); 
```

# android - 如何处理android中动态创建的网格视图的onclick事件？

> ID：11578084
> 
> 赞同：0
> 
> 时间：2012-07-20T11:06:40.173
> 
> 标签：android, android-gridview

在我的 android 应用程序中，我动态创建了 3 个网格视图。听到的是代码。它显示了 3 个网格视图。

```
 for (int i=0; i<2; i++) {
                LinearLayout inflatedView =  (LinearLayout)mInflater.inflate(R.layout.library_gallery, null);
                LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT, 300);
                inflatedView.setLayoutParams(layoutParams);
                mGridView = (GridView) inflatedView.findViewById(R.id.library_gallary);
                if(Thambs!=null){
                    mGridView.setAdapter(new LibraryGalleryAdapter(mContext,Thambs1));
                    setResourse(i,Names,values1);
                }
      } 
```

现在我想唯一标识这 3 个动态创建的网格视图的点击事件。请问有什么想法吗？

**编辑：**

```
 mGridView.setOnItemClickListener(new OnItemClickListener() {

                    @Override
                    public void onItemClick(AdapterView<?> av, View v,final int posision, long id) {

                        Log.e(TAG, "id : "+v.getId());
} 
```

但它会为每个网格视图 onclick 返回相同的 id

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T11:29:49.857

使用[gridView.setOnItemClickListener](http://developer.android.com/reference/android/widget/AdapterView.html#setOnItemClickListener%28android.widget.AdapterView.OnItemClickListener%29)。在点击监听器中，`use parent.getId`找到父级的id。如果您有多个网格视图，则应调用`gridView.setId()`将其设置为独特的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T11:19:06.683

尝试在 onItemclick() 中使用 view.getId()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T11:19:49.210

对于每一个，`mGridView`您都需要一个单独的`View.onClickListener`接口实现，或者一个`View.onClickListener`实现并区分每个网格`View.getId()`（正如*vishwa*指出的那样）。这取决于您想对每个网格做什么，以及您希望它们如何表现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T11:28:53.163

首先，您需要在您的类中实现 onItemclickListener 接口，然后您需要通过 onItemClickListener 中的第二个参数获取点击视图的 view.getId() 来检查点击的项目来自哪个网格视图。

然后您可以通过使用 OnItemclicked() 即父级的第一个参数来确定单击了哪个视图检查单击的视图是否是 GridView 的子视图，检查该父级是否是哪个网格视图，然后对该视图执行相应的操作。

希望这个解释对你有用..

# javascript - 骨干路由匹配不起作用

> ID：11578102
> 
> 赞同：1
> 
> 时间：2012-07-20T11:08:04.497
> 
> 标签：javascript, url, backbone.js, backbone-routing

我有三个这样的路线：

```
var appRouter = Backbone.Router.extend({
    routes: {
        "": "index",
        "questionnaire/info/id/:id": "questionnaireInfo",
        "questions/edit/*params": "questionEdit"
    },
    questionnaireInfo: function(id) {
        $('#app-body').load('/dashboard/questionnaire/info/id/' + id);
    },
    questionEdit: function(questionnaireId) {
        console.log(questionnaireId, params);
    },
    index: function() {
        console.log('index');
    }
}); 
```

我像这样初始化它们：

```
var appRouting = new appRouter;
Backbone.history.start({
    pushState: true,
    silent: false,
    root: '/dashboard/'
}); 
```

在第一页加载路由匹配，它甚至 console.log 正确的消息。但我有一个这样的链接元素：

```
<a href="/dashboard">Home Page</a> 
```

`""`它与路线不匹配。`"questionnaire/info/id/:id"`而且这个 href 元素与路由不匹配：

```
<a href="/dashboard/questionnaire/info/id/1">Load</a> 
```

我怎样才能使它工作？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T13:38:22.460

指数触发了吗？一般来说，骨干文档建议从最具体到最不具体列出您的路线。其他根可能没有被调用，因为它`"":"index"`捕获了所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T11:11:15.003

也许你错过了 '/dashboard' 和每条路线之间的 '/'

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-03T17:55:48.060

我有同样的问题。似乎调用路由的链接必须以“#”字符开头。所以如果路由器的根是

```
/dashboard/ 
```

你的路线是

```
"questionnaire/info/id/:id": "questionnaireInfo" 
```

比触发路由的链接应该是例如

```
<a href="/dashboard/#/questionnaire/info/id/1">Load</a> 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T15:05:00.990

`Backbone.history.start`您需要在参数调用中使用斜杠`root`。

```
var appRouting = new appRouter;
Backbone.history.start({
    pushState: true,
    silent: false,
    root: '/dashboard/'
}); 
```

您可以在文档中的[示例`Backbone.history`](http://documentcloud.github.com/backbone/#History-start)中看到这一点。

# android - 如何检查Android中是否存在表？

> ID：11578104
> 
> 赞同：4
> 
> 时间：2012-07-20T11:08:14.090
> 
> 标签：android, sqlite, null

我正在尝试在表上查询`dormpolicy`

```
String operatorName = "46001";
String selection = "(plmn = '"+operatorName+"')";
URI CONTENT_URI_DORMPOLICY = Uri.parse("content://nwkinfo/nwkinfo/dormpolicy");
cursor = phone.getContext.getContentResolver().query(CONTENT_URI_DORMPOLICY, null,      selection, null, null); 
```

我得到错误日志：

```
 SQLiteQuery: exception: no such table: dormpolicy; 

 query: SELECT * FROM dormpolicy  WHERE ((plmn = '46001')) 
```

这个问题并不总是发生在我的手机中。

似乎有时，当我在创建表之前访问表时。

有什么方法可以在查询表之前检查表是否存在？

如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T12:00:01.180

我的回答是双重的：

1.  为了严格回答这个问题，我会将您重定向到[如何检查一个表是否存在于 Android SQLite 数据库中？](https://stackoverflow.com/questions/3058909/how-does-one-check-if-a-table-exists-in-an-android-sqlite-database)

2.  [`SQLiteOpenHelper`](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html)但我建议您使用该类，而不是手动检查表的存在。这将帮助您以结构化的方式管理您的表格。这包括处理数据库升级。看看这个快速入门：http: [//developer.android.com/guide/topics/data/data-storage.html#db](http://developer.android.com/guide/topics/data/data-storage.html#db)

# python - 如何让 StarCluster AMI 与 IPython 0.13 一起使用？

> ID：11578105
> 
> 赞同：1
> 
> 时间：2012-07-20T11:08:18.100
> 
> 标签：python, amazon-ec2, ipython, starcluster, qiime

我尝试在两个不同的 StarCluster AMI（它们默认的 64 位 Ubuntu 11.10 和 QIIME 1.5 映像）上升级 IPython。无论哪种情况，当我启动集群时，初始化脚本都会挂在“等待 JSON 连接器文件...”处。我登录到实例，事实上，即使 ipcluster 守护程序正在运行，它也没有将任何 JSON 文件写入 profile_default/security。

也许这是 IPython 0.12 和 0.13 放置连接器文件的位置之间的区别？或者更新的 ipcluster 可能由于某种原因挂起？它似乎没有任何有意义的日志，所以我不确定如何弄清楚发生了什么。有没有人幸运地升级了 StarCluster AMI 以使用最新的 IPython？如果是这样，你是怎么做到的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T16:37:05.113

您现在可能已经意识到这一点，但对于其他人来说：

IPython 的问题跟踪器中发布了一个解决方法，并且发布了一个问题以将解决方法合并到 StarCluster 中的 ipcluster 插件中：

[https://github.com/ipython/ipython/issues/2171#issuecomment-7153192](https://github.com/ipython/ipython/issues/2171#issuecomment-7153192)

[https://github.com/jtriley/StarCluster/issues/127](https://github.com/jtriley/StarCluster/issues/127)

# java - 从 JSP 中的 doPost() 返回

> ID：11578107
> 
> 赞同：0
> 
> 时间：2012-07-20T11:08:27.333
> 
> 标签：java, http, jsp, rest, servlets

我正在尝试在不使用任何框架的情况下实现 REST 类型的架构。所以我基本上是从我的客户端调用一个 JSP，它正在`doPost()`对提供服务的远程服务器进行操作。现在我能够以 JSON 格式将数据从客户端传递到服务器，但我不知道如何读取响应。有人可以帮我解决这个问题。

客户端：

```
 protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    ....
    ....
    HttpPost httpPost = new HttpPost("http://localhost:8080/test/Login");
    ArrayList<NameValuePair> postParameters = new ArrayList<NameValuePair>();

    //Send post it as a "json_message" paramter.
    postParameters.add(new BasicNameValuePair("json_message", jsonStringUserLogin)); 
    httpPost.setEntity(new UrlEncodedFormEntity(postParameters));
    HttpResponse fidresponse = client.execute(httpPost);

   ....
   ....
 } 
```

服务器端：

```
 protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
  String jsonStringUserLogin = (String)request.getParameter("json_message");
  ....
  ....
  request.setAttribute("LoginResponse", "hello");
  // Here I need to send some string back to the servlet which called. I am assuming 
  // that  multiple clients will be calling this service and do not want to use 
  // RequestDispatcher as I need to specify the path of the servlet. 

  // I am looking for more like return method which I can access through 
  // "HttpResponse" object in the client.

  } 
```

我刚开始使用 servlet，想自己实现一个 REST 服务。如果您有任何其他建议，请分享...谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T11:27:25.297

在 doPost 你只需要做：

```
response.setContentType("application/json; charset=UTF-8;");
out.println("{\"key\": \"value\"}"); // json type format {"key":"value"} 
```

这会将 json 数据返回给客户端或 servlet..

使用 jquery ajax 读取返回的数据...
在客户端使用 jquery 执行以下操作：

```
$.getJSON("your servlet address", function(data) {
                    var items = [];
                    var keys= [];
                    $.each(data, function(key, val) {
                        keys.push(key);
                        items.push(val);

                    });
                    alert(keys[0]+" : "+items[0]);           
                }); 
```

在 servlet 上你知道如何读取 json 数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T11:34:09.043

执行帖子后，您可以像这样准备响应。

```
HttpEntity entity  = fidresponse.getEntity();
BufferedReader br = new BufferedReader(new InputStreamReader(entity.getContent()));

String l = null;
String rest = "";
while ((l=br.readLine())!=null) {
  rest=rest+l;
} 
```

这里 rest 将包含您的 json 响应字符串。您也可以使用字符串缓冲区。

# php - PHP 删除未定义的偏移量：

> ID：11578108
> 
> 赞同：-2
> 
> 时间：2012-07-20T11:08:28.140
> 
> 标签：php, loops, while-loop

我想问这种错误未定义偏移量是什么：4

我的代码是

```
$url = 'http://gogo.com, http://yoyo.com, http://gogo.com, http://yoyo.com, http://gogo.com, http://yoyo.com';
$key = 'key1, key2, key3';

$xurl = explode( "\n", $url );
$xkey = explode( "\n", $key );

$count = count( $xkey );
echo $count;
$i = 0;

while ( $i <= $count ) {
    if(empty($xkey[$i])){
        unset($xkey[$i]);
    }

    echo $xkey[$i];

$i++;   
} 
```

回声是`key1 key2 key3`

但问题是我需要循环 xkey 等于我的 url 所以回显应该是但我只有 3keyword 我的意思是关键字小于 url。

我怎样才能使它像下面这样......

```
http://gogo.com - key1
http://yoyo.com - key2
http://gogo.com - key3
http://yoyo.com - key1
http://gogo.com - key2
http://yoyo.com - key3 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T11:11:43.227

这意味着脚本正在寻找 的值`$xkey[4]`，但该元素不存在。发生这种情况是因为像这样的数组键是从 0 开始的，所以第四个元素是`$xkey[3]`. 将您的 while 语句更改`while ( $i < $count )`为计数为 4，但最大键为 3。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T11:12:26.473

你正在做的

```
while ( $i <= $count ) { 
```

其中 $count 是 $xkey 中元素的数量（假设是 4 个元素）由于数组索引为 0，元素 $xkey[3] 是第 4 个也是最后一个元素。

$xkey[4] 会给你带来这个错误。

现在，删除其中的“=”，`while ( $i <= $count ) {`它应该会消失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T11:15:38.950

我不知道从哪里开始解释你的问题是什么，你有一个完全错误的方法。要获得您想要的结果，您需要执行以下操作：

```
$urlString = 'http://gogo.com, http://yoyo.com, http://gogo.com, http://yoyo.com, http://gogo.com, http://yoyo.com';
$keyString = 'key1, key2, key3';

$urls = explode(',', $urlString);
$keys = explode(',', $keyString);

$i = 0;
$count = count($keys);

foreach ($urls as $url) {
    echo $url, ' - ', $keys[$i % $count], PHP_EOL;
    $i++;
} 
```

# php - VO 类是否应该包含域逻辑？

> ID：11578112
> 
> 赞同：1
> 
> 时间：2012-07-20T11:08:47.003
> 
> 标签：php, model-view-controller, pdo, dao

我一直在阅读这个网站，了解与 PHP 和 MVC 一起使用的 DAO 和 VO 类。 [http://www.sitecrafting.com/blog/php-patterns-part-ii/](http://www.sitecrafting.com/blog/php-patterns-part-ii/)

我想知道应该在哪里放置域逻辑。（仅处理对象数据、算法等的方法）

它应该在VO课程上吗？或者我应该为域逻辑类创建另一个包？

它与数据库无关，所以我认为它不会放在 DAO 类中。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T11:30:03.023

在您的 DAO 提取数据并由您的 VO “处理”或“格式化”之后，按照您在问题中引用的模式，处理数据的逻辑应该进入模型。

这是一个可以在您的场景中工作的可能结构：

```
----- DAO -----------> VO -------> Model ----> Controller --------> View
UsersDatabase ----> UsersVO ----> User ----> UserProfile ---> UserProfilePage 
```

希望类名是不言自明的。在这个例子中，任何与用户相关但不处理界面的逻辑都适合用户模型。

恕我直言，但这只是我的看法，除非您的模型非常大，或者您有许多不相关的模型依赖于相同的数据“处理/格式化”逻辑，否则您将希望完全跳过 VO 并让 DAO 与你的模型直接。

# dynamics-crm - MS CRM 更新实体，无更改修改于和修改于

> ID：11578115
> 
> 赞同：0
> 
> 时间：2012-07-20T11:08:53.667
> 
> 标签：dynamics-crm, dynamics-crm-4

我在用于计算的 MS CRM 4 条目中创建了一个自定义字段。通常它将由插件处理程序填充。

如何在不更改`"modified at"`and字段的情况下为所有记录初始化此`"modified by"`字段？是否可以从 Web 服务 API 获得？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T15:05:50.233

我听说有人在 CRM 表上运行 SQL UPDATE 语句而不会产生不利影响。我什至得到了 MSFT 的首要支持给我一个 UPDATE 语句来解决用户记录的问题。

# iphone - 从 self.navigationItem（在 UINavigationController 内部）打开时，UIPopoverController 未解除

> ID：11578117
> 
> 赞同：1
> 
> 时间：2012-07-20T11:08:59.110
> 
> 标签：iphone, ios, uinavigationcontroller, uipopovercontroller, dismiss

我在关闭从 UINavigationController 的 navigationItem 启动的弹出框时遇到问题。似乎由 UINavigationController 插入的导航项不会触发 UIPopoverController 的解除。通常，当您在弹出框外点击时，它会被关闭。但是当您点击导航项时，弹出框不会被关闭。更糟糕的是，如果您点击触发弹出框的按钮，您将获得弹出框的第二个实例。

所有这些都是使用故事板完成的： - 创建一个视图，将其嵌入到 UINavigationView 中，以便在顶部获得一个 navigationItem。- 将 UIBarButtonItem 放入 navigationItem（左或右，对于导航堆栈上的初始视图无关紧要）。- 定义另一个视图，并将一个 segue 从 UIBarButtonItem 拖到此视图。- 将segue设置为popover。

弹出窗口打开后，我无法通过点击 navigationItem 将其关闭。我不敢相信这“按设计工作”，所以我怀疑我错过了一些东西。

虽然我的目标是尽可能少地编程（这就是故事板的意义所在，不是吗？），但我想到了解决方法：我想到的第一个解决方法是在 navigationItem 中添加一个 UITapGestureRecognizer，这会忽略当它检测到在 navigationItem 上的点击时弹出。不幸的是，navigationItem 似乎不是 UIVIew，所以它缺少 addGestureRecognizer: 方法...

编辑：向 self.navigationController.navigationBar 添加 UITapGesturerecognizer 是可能的，但会阻止任何点击到达导航栏上的 UIBarButtonItems。是的，我本可以预料到的。

非常感谢您的帮助，诺比

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T10:20:39.527

这是故事板中弹出框的完整描述。假设您的控制器出现在弹出框名为`MyPopupController`，请执行以下操作：

1.  `MyPopupController`使用 style定义从主场景到场景的转场`Popover`。
2.  将属性添加到`MyPopupController.h`

    ```
    @property (weak, nonatomic) UIPopoverController *popover; 
    ```

3.  综合属性`MyPopupController.m`

    ```
    @synthesize popover = _popover 
    ```

4.  在`prepareForSegue:sender:`主场景控制器的方法中，设置`popover`属性：

    ```
    UIStoryboardPopoverSegue *ps = (UIStoryboardPopoverSegue *)segue;
    MyPopupController *dc = ps.destinationViewController;
    dc.popover = ps.popoverController; 
    ```

5.  在 的`viewWillAppear:`方法中`MyPopupController`，添加以下代码（也不要忘记`[super viewWillAppear]`）：

    ```
    self.popover.passThroughViews = nil; 
    ```

你现在应该完成了。

感谢罗伯特的基本想法 - 我只需要找到正确的位置，因为`presentPopoverFromBarButtonItem`在使用情节提要时不使用。请注意，将 (5) 放入`viewDidLoad`不起作用。

玩得开心编码！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T04:30:48.087

[https://stackoverflow.com/a/12874772/1455770](https://stackoverflow.com/a/12874772/1455770)

从栏按钮项目呈现弹出框后，弹出框已将其“passthroughViews”设置为包含导航栏，因此您的点击不会注册。呈现弹出框后立即将 passthroughviews 设置为 nil。IE。

```
self.myPopoverController presentPopoverFromBarButtonItem:myBarButtonItem permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
self.myPopoverController.passthroughViews = nil;// at this point the myPopoverController has had its pass through views set to include the whole nav bar. remove it. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T11:42:43.027

可能有比这更好的解决方案，但为什么不只在弹出框打开时将 UITapGestureRecognizer 添加到导航栏？点击按钮打开弹出框后，将 TapGestureRecogniser 添加到导航栏。关闭弹出框后，从导航栏中删除 TapGestureRecogniser。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-01T02:27:29.453

我最近遇到了这个问题，我见过的解决方案都没有为我工作。然后经过一些研究，我发现了一种像魅力一样起作用的方法。

首先，您需要将 添加`UIStoryboardPopoverSegue`到您的课程中。

```
@property (nonatomic, strong) UIStoryboardPopoverSegue *popoverSegue; 
```

在类实现中合成它：

```
@synthesize popoverSegue; 
```

然后，在按下按钮时调用的函数内部添加以下代码：

```
([[popoverSegue popoverController] isPopoverVisible]) ? 
            [self.popoverSegue.popoverController dismissPopoverAnimated: YES] :
            [self performSegueWithIdentifier: @"popSegue" sender:nil]; 
```

现在你几乎准备好了。在方法内部 `- (void) prepareForSegue:(UIStoryboard)segue sender:(id)sender`添加以下代码：

```
if([[segue identifier] isEqualToString:@"popSegue"]){
    self.popoverSegue = (UIStoryboardPopoverSegue*) segue;
    if(viewPopoverController == nil){
        viewController = [[UIViewController alloc] init];
        viewPopoverController = [[UIPopoverController alloc] initWithContentViewController:viewController];
    }
} 
```

现在，每次您按下按钮时，它都会显示或关闭您的窗口，如果您在弹出框外按下，该窗口也将被关闭。我希望它可以帮助某人。

# java - 如何永久增加java堆内存？

> ID：11578123
> 
> 赞同：25
> 
> 时间：2012-07-20T11:09:08.080
> 
> 标签：java, jvm, heap-memory, heap-dump

java堆内存有一个问题。我在 java 中开发了一个客户端服务器应用程序，它作为 Windows 服务运行，它需要超过 512MB 的内存。我有 2GB 的 RAM，但是当我运行我的应用程序时，它会引发异常

> 内存不足错误：java堆空间

但我已经在 java 控制面板中设置了堆大小（最大 512MB），我仍然得到同样的错误。我无法通过命令行设置堆大小，因为我的应用程序作为 Windows 服务运行，那么如何增加默认堆大小？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-07-20T11:17:34.980

Java 虚拟机采用两个命令行参数来设置初始和最大堆大小：-Xms 和 -Xmx。您可以添加一个名为 _JAVA_OPTIONS 的系统环境变量，并在那里设置堆大小值。
例如，如果你想要一个 512Mb 的初始和 1024Mb 的最大堆大小，你可以使用：

在 Windows 下：

```
SET _JAVA_OPTIONS = -Xms512m -Xmx1024m 
```

在 Linux 下：

```
export _JAVA_OPTIONS="-Xms512m -Xmx1024m" 
```

可以使用 Runtime 类的 totalMemory() 方法以编程方式读取默认 JVM 堆大小。使用以下代码读取 JVM 堆大小。

```
public class GetHeapSize {
    public static void main(String[]args){

        //Get the jvm heap size.
        long heapSize = Runtime.getRuntime().totalMemory();

        //Print the jvm heap size.
        System.out.println("Heap Size = " + heapSize);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-06-01T14:00:32.073

这对我有用：

导出_JAVA_OPTIONS="-Xmx1g"

重要的是你没有空间，因为对我来说它不起作用。我建议只是复制和粘贴。然后我跑了：

java -XshowSettings:vm

它会告诉你：

拿起_JAVA_OPTIONS：-Xmx1g

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-20T11:15:50.450

如果需要增加预留内存，有VM参数-Xms和-Xmx，用法如-Xms512m -Xmx512m。还有一个参数 -XX:MaxPermSize=256m 更改为永久生成保留的内存

如果您的应用程序作为 Windows 服务运行，在控制面板 -> 管理工具 -> 服务中，您可以向服务添加一些运行参数

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-02-20T09:14:43.370

您还可以在下面使用它来扩展内存

`export _JAVA_OPTIONS="-Xms512m -Xmx1024m -Xss512m -XX:MaxPermSize=1024m"`

`Xmx`指定 Java 虚拟机 (JVM) 的最大内存分配池

`Xms`指定初始内存分配池。

`Xss`设置线程堆栈的内存大小

`XX:MaxPermSize`：最大永久代大小

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2013-10-08T18:22:03.187

[请注意，在java.lang.OutOfMemoryError: Java heap space](http://javaeesupportpatterns.blogspot.com/2011/11/outofmemoryerror-java-heap-space.html)之后增加 Java 堆大小通常只是一个短期解决方案。

这意味着即使您将默认 Java 堆大小从 512 MB 增加到 2048 MB，如果您正在处理内存泄漏，您仍然可能会在某些时候收到此错误。要问的主要问题是，为什么您首先会收到此 OOM 错误？真的是 Xmx 值太低还是只是另一个问题的征兆？

在开发 Java 应用程序时，尽早了解其静态和动态内存占用要求始终至关重要，这将有助于防止以后出现复杂的 OOM 问题。可以通过适当的应用程序分析和负载测试来实现适当的 JVM Xms 和 Xmx 设置大小。

# email - 可靠的送货服务 - 电子邮件、短信

> ID：11578129
> 
> 赞同：0
> 
> 时间：2012-07-20T11:09:40.267
> 
> 标签：email, service, reliability

我正在考虑建立一个订购服务，这很好，但我的问题是如何可靠地将订单送到商店。这是一家快餐店。

是否有任何可靠的交付选项，无论是通过短信/电话还是几乎 100% 可靠的电子邮件服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T16:43:30.700

看看一些 SMS 提供商，例如[Twilio](http://www.twilio.com/)，它们为您提供基于 Web 的 API 来发送 SMS 消息。还有一个名为[OneAPI](https://oneapi-gw.gsma.com/)的 API ，目前在加拿大可用，但很快将在其他地区推出。您可以使用它通过 html API 发送 SMS 消息。对于电子邮件，看看[可编程网络](http://www.programmableweb.com/apitag/?q=email)列出的一些提供商，有很多，例如[Yahoo 允许您通过他们的 API 发送消息](http://developer.yahoo.com/mail/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-03T02:38:03.330

是的，一定要回电给发件人确认，...检查我的 DMStar CBuilder6 系统。它获取过滤后的电子邮件和短信 QFree 订购系统。收到订单后，每隔一分钟左右就会自动打印到 Docket 点阵打印机上。

[https://sites.google.com/site/dmsqfree/tastykebabs](https://sites.google.com/site/dmsqfree/tastykebabs) 或在谷歌上搜索美味的烤肉串 qfree

[https://sites.google.com/site/dmsqfree/](https://sites.google.com/site/dmsqfree/)

EC 和简单的小型零售商，不需要敏感的个人信息登记。使用连接到 PC USB 端口的旧诺基亚手机，每年预付 20.00 美元（免费短信），...

欢呼。

# c# - 如果命令被禁用，如何更改上下文菜单项的样式

> ID：11578130
> 
> 赞同：1
> 
> 时间：2012-07-20T11:09:42.743
> 
> 标签：c#, wpf, contextmenu

我有一个上下文菜单，在某些时候我禁用了一些绑定到上下文菜单项的命令。

**什么有效：**

当命令被禁用时，单击菜单项不会像我想要的那样调用命令的执行方法。

**什么不起作用：**

可以执行的命令和看起来不一样的命令！我的用户无法区分。

**问题：**

如何更改样式以显示此更改。背景颜色，边框颜色，前景色，工具提示的变化......任何东西都是可以接受的......

我用 xaml 进行了实验，但无法解决这个问题。（我是 xaml 的菜鸟，所以我的尝试甚至不值得在这里粘贴 :)）

**xml：**

```
<Border BorderThickness="1" MinWidth="100"  Background="Transparent"  ContextMenu="{Binding Path=ContextMenu}" BorderBrush="{Binding Path=BorderColor}"> 
```

**捆绑：**

```
public override ContextMenu ContextMenu
        {
            get
            {
                return new ContextMenu
                           {
                               ItemsSource = new ObservableCollection<MenuItem>
                                                 {
                                                     new MenuItem
                                                         {
                                                             Header = IsSharedFieldView? "Delete Shared Field" :"Delete Field" ,
                                                             Command = DeleteFieldCommand 
                                                         }
                                                 }
                           };

            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T12:01:37.427

这里的诀窍是 ContextMenu 实际上继承自 ItemsControl，这适用于我的机器：

```
/// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            this.DataContext = this;
            InitializeComponent();

            MenuItems = new ObservableCollection<KeyValuePair<string, ICommand>>();
            MenuItems.Add(new KeyValuePair<string, ICommand>("One", OneCommand));
            MenuItems.Add(new KeyValuePair<string, ICommand>("Two", null));
        }

        public ObservableCollection<KeyValuePair<String, ICommand>> MenuItems { get; set; }

        #region OneCommand
        DelegateCommand _OneCommand;
        public DelegateCommand OneCommand
        {
            get { return _OneCommand ?? (_OneCommand = new DelegateCommand(One, CanOne)); }
        }

        public bool CanOne()
        {
            return false;
        }

        public void One()
        {

        }
        #endregion
    } 
```

和 XAML：

```
<Window x:Class="DynamicContextMenuTest.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Path Data="M 10,2 L 17.5,2 L 17.5,0 L 23,4.5 L 17.5,9 L 17.5,7.3 L 10,7.3 L 10,2" Fill="Green">
            <Path.ContextMenu>
                <ContextMenu ItemsSource="{Binding MenuItems}" DisplayMemberPath="Key">
                    <ContextMenu.Resources>
                        <Style TargetType="MenuItem">
                            <Setter Property="Command" Value="{Binding Value}" />
                            <Style.Triggers>
                                <Trigger Property="IsEnabled" Value="False">
                                    <Setter Property="Background" Value="Red" />
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </ContextMenu.Resources>
                </ContextMenu>
            </Path.ContextMenu>
        </Path>
    </Grid>
</Window> 
```

注意几点：

*   您不再绑定到 ContextMenu（视图模型不应该知道控件），而是绑定到`string`(Header)/ `ICommand`(Command)的集合
*   当项的命令`CanExecute`返回 false 时，绑定控件的`IsEnabled`属性变为 false。您可以在该属性上使用触发器来修改绑定控件的外观。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T12:00:22.123

```
 <Window.Resources>
        <Style TargetType="{x:Type MenuItem}">
            <Style.Triggers>
                <Trigger Property="IsEnabled" Value="False">
                    <Setter Property="Background" Value="Black"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>
    <Grid>
        <TextBox >
            <TextBox.ContextMenu>
                <ContextMenu>
                    <Menu>
                        <MenuItem Header="Add" IsEnabled="False"/>
                        <MenuItem Header="Delete"/>
                    </Menu>
                </ContextMenu>
            </TextBox.ContextMenu>
        </TextBox>
    </Grid> 
```

它只是演示，您可以从中获得想法。您可以将 IsEnabled 绑定到您的 VM Command.CanExecute 。我希望这将有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T10:00:59.477

有效的解决方案：

最初我从我的视图模型中绑定一个 ContextMenu 并且 isEnabled 不起作用。

相反，我在 xaml 中创建了上下文菜单，并从 viewModel 绑定了 itemsSource。

现在菜单项被禁用并且触发器正在工作。

不知道我做错了什么，但这解决了它:)

# java - 访问一个 HTML 元素 含硒

> ID：11578140
> 
> 赞同：2
> 
> 时间：2012-07-20T11:10:19.037
> 
> 标签：java, html, selenium

我正在尝试使用 Selenium (Java) 访问 HTML 元素，但目前遇到了问题。该元素位于此结构中：

```
 <nav>
       <ul class="...menu"> id="...menu">
          <li id="Ignore..."> </li>
          <li id="Test tab">
             <a href="/.../..." title="Tab">Tab</a>
          </li>
       </ul>
    </nav> 
```

我需要访问并单击`"Tab"`显示为按钮的按钮。访问此按钮的最佳方法是什么？我已经尝试过`.findElement(By.name("..."));`类似但没有成功。一旦`"Tab"`被选中，我就打算打电话`.click()`。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T11:54:04.990

使用这个解决方案

```
 driver.findElement(By.xpath("//a[text()='Tab']")).click(); 
```

# java - 使用 xtext 自定义 Java 注释的突出显示/标记（扩展 Java 语法突出显示）

> ID：11578141
> 
> 赞同：0
> 
> 时间：2012-07-20T11:10:19.873
> 
> 标签：java, eclipse-plugin, syntax-highlighting, xtext

我需要使用从数据库中读取的元信息在某些注释上突出显示或创建标记。我已经使用标记实现了一个解决方案，但我需要自己照顾整个标记生命周期，它不能即时工作。有没有办法使用 XText 扩展 JDT 的突出显示？

我不确定 xtext 是否适合我的目的。因此，如果有其他框架，我会很高兴听到它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T18:38:46.980

如果您想扩展 Java 编辑器，我认为 Xtext 不是正确的解决方案。基本上，您必须自己管理标记生命周期。

我建议为 Java 项目注册一个[构建器](http://eclipse.org/articles/Article-Builders/builders.html)- 每次更改 Java 文件时都会调用它，这似乎适合根据需要添加/删除标记。

# jquery - 从字符串周围删除标签

> ID：11578146
> 
> 赞同：0
> 
> 时间：2012-07-20T11:10:36.150
> 
> 标签：jquery

```
<div>
<span>
          <span style="font-weight: bold;">MyName</span>
</span>
</div> 
```

我如何能够删除 MyName 周围的跨度但保留初始跨度？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T11:15:18.683

将[**.unwrap()**](http://api.jquery.com/unwrap/)与[.contents()](http://api.jquery.com/contents/)结合使用：

```
$('#innerspan').contents().unwrap();​ 
```

*标记*：

```
<span>
  <span id="innerspan" style="font-weight: bold;">MyName</span>
</span>​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

[现场演示](http://jsfiddle.net/M3yNX/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T11:22:30.060

将字符串转为元素，获取 span 的 HTML 内容：

```
s = $(s).html(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T12:16:13.867

You can do next this time:

```
$('span').each(function() {  
   if ($(this).html() == "MyName") {
   $(this).parent().html("MyName");
  }
}); 
```

But it's very localized code.

# java - ftp 服务器上的 Java Applet 需要几分钟才能连接到 MySQL 数据库

> ID：11578147
> 
> 赞同：2
> 
> 时间：2012-07-20T11:10:39.777
> 
> 标签：java, mysql, database, ftp, applet

首先，这是一个**自签名小程序**，所以权限没问题。
其次，将小程序上传到 ftp 服务器并以 .html 文档打开。

我用来连接的代码本身是这样的：

```
try
{
    Class.forName("com.mysql.jdbc.Driver");
    long start = System.currentTimeMillis();
    Connection conn = DriverManager.getConnection("jdbc:mysql://the.hostname:3306/qnqdb", "username", "password");
    long end = System.currentTimeMillis();
    JOptionPane.showMessageDialog(rootPane, (end - start) + "ms.\n" + conn);
}
catch (SQLException ex)
{
    JOptionPane.showMessageDialog(rootPane, ex.getClass() + "\n" + ex.getMessage());
} 
```

JOptionPane 显示它花了 127 秒（刚刚超过 4.5 分钟），无论我连接到什么数据库，第一次仍然需要永远。

**如果我再次连接它，它只需要 200-2000 毫秒**（看起来很正常）

为了测试它，我还打开了操作 Wireshark 并监听了 3306 端口。前 4 分钟什么也没发生。[捕获图像](https://dl.dropbox.com/u/99717/Wireshark.png)
然后在接下来的 50 秒内，它记录了 28 个数据包。

奇怪的是，如果我在本地运行小程序时连接到数据库，第一次只需要约 500 毫秒，之后只需约 200 毫秒。

我在想的是：

*   这不是数据库故障，因为它可以快速连接第二次到第 n 次。
*   小程序在某种程度上有问题。也许由于某种原因类加载需要很长时间。

如果它有任何重要性，那么来自小程序的正常套接字连接在本地和 ftp 上都只需要 20-30 毫秒。

**编辑**
显然，在其他计算机上，它不需要很长时间。我试过的一个是大约 20 秒，而另一个应该只有 2-3 秒。
**更新：**确实似乎只有这台计算机需要很长时间。Java Console level 5的日志：http: [//pastebin.com/2u2v7gZV](http://pastebin.com/2u2v7gZV)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T15:09:22.220

再次查看 Java 控制台日志后，我注意到一件事。

我不断重复

```
network: Connecting http://shop.nordicbeads.com/Renes/mysql-connector-java-5.1.6-bin.jar with 
proxy=DIRECT network: Cache entry not found [url: http://shop.nordicbeads.com/Renes/mysql-connector-java-5.1.6-bin.jar, version: null] 
```

一遍又一遍，但后来我注意到它使用的路径由于某种原因不是 ftp 服务器上库的路径。路径是 Renes/lib/library.jar，它没有在 lib 文件夹中使用查找。
我更改了库的位置，现在只需 3 秒即可连接。

奇怪的是，为什么我测试过的所有其他计算机都立即在 lib 文件夹中查找。为什么我的要花 4 多分钟才能看到那里？在 html 文档中，我什至在归档行中添加了库，前面有 lib/，但是有没有没有没有什么区别。

# ruby-on-rails - Rails engine: render parent application layout

> ID：11578150
> 
> 赞同：8
> 
> 时间：2012-07-20T11:10:44.697
> 
> 标签：ruby-on-rails, ruby, rails-engines

Here I want to render the layout of engine's parent application, i.e. in hierarchy engine's parent application.html.erb should be higher. But since engine has also got application.html.erb it is only rendering it and not rendering engine's parent application.html.erb.

How can i render my parent application.html.erb along with my engine application.html.erb

Thanks

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-20T20:58:12.657

In your engine controller you can use:

```
layout 'application' 
```

in order to render the application layout or you can switch to:

```
layout 'engine_name/application' 
```

to load the engine's layout.

I don't know if you can load them both (engine layout should only inherit from application layout and extend it) but I hope it gets you further at least.

# c++ - 可变大小类的分配

> ID：11578160
> 
> 赞同：2
> 
> 时间：2012-07-20T11:11:06.050
> 
> 标签：c++, alloca

我有一个可变长度的数据结构，一个多维迭代器：

```
class Iterator
{
public:
    static Iterator& init(int dim, int* sizes, void* mem)
    {
        return *(new (mem) Iterator(dim, sizes));
    }

    static size_t alloc_size(int dim)
    {
        return sizeof(Iterator) + sizeof(int) * 2 * dim;
    }

    void operator++()
    {
        // increment counters, update pos_ and done_
    }

    bool done() const { return done_; }
    bool pos()  const { return pos_; }

private:
    Iterator(int dim, int* sizes) : dim_(dim), pos_(0), done_(false)
    {
        for (int i=0; i<dim_; ++i) size(i) = sizes[i];
        for (int i=0; i<dim_; ++i) counter(i) = 0;
    }

    int  dim_;
    int  pos_;
    bool done_;
    int  size   (int i) { return reinterpret_cast<int*>(this+1)[i]; }
    int& counter(int i) { return reinterpret_cast<int*>(this+1)[dim_+i]; }
}; 
```

迭代器的维度在编译时是未知的，但可能很小，所以我为迭代器分配内存`alloca`：

```
void* mem = alloca(Iterator::alloc_size(dim));

for (Iterator& i = Iterator::create(dim, sizes, mem); !i.done(); ++i)
{
    // do something with i.pos()
} 
```

有没有更优雅的方式为迭代器分配内存？我知道从函数返回时，它的堆栈被展开，因此`alloca`必须在调用者的堆栈框架中使用（参见例如[here](https://stackoverflow.com/questions/7048980/returning-alloca-pointer)）。这个[答案](https://stackoverflow.com/a/8646960/728847)建议在默认参数中执行分配：

```
static Iterator& init(int dim, int* sizes, void* mem = alloca(alloc_size(dim))); 
```

不管多么优雅，这个解决方案对我没有帮助：`Default argument references parameter 'dim'`. 有什么好的解决方案建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T12:01:17.323

不幸的是，鉴于这`dim`是一个运行时值，除了使用宏之外没有其他方法可以做到这一点：

```
#define CREATE_ITERATOR(dim, sizes) \
    Iterator::init(dim, sizes, alloca(Iterator::alloc_size(dim))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T11:15:50.477

您可以将维度参数作为模板参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T11:50:03.817

我的建议可能不是您正在寻找的，但为什么没有一个 create|make_iterator 函数来执行 alloca 调用？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T15:05:42.630

我根本不建议使用 alloca。如果 dim 值很小，那么类中的一些固定大小的缓冲区就足够了。如果 dim 很大，那么与在迭代器上执行的其他操作的复杂性相比，堆分配成本可以忽略不计（请注意，对于非常大的 dim 值，alloca 可能会导致堆栈溢出）。您可以在运行时在固定缓冲区和堆分配之间进行选择，具体取决于昏暗大小。

所以我会推荐类似于 std::string 中的小字符串优化的方法。

也许，某种 COW（写时复制[http://en.wikipedia.org/wiki/Copy-on-write](http://en.wikipedia.org/wiki/Copy-on-write)）技术可能对您的迭代器也有用。

请注意，此技术不能与 alloca 一起使用，只能与堆分配一起使用。此外，如果迭代器使用 alloca（至少没有越来越丑陋的宏），则几乎不可能复制或复制初始化迭代器。

Alloca是邪恶的:)

# winforms - 如何从静态方法（在winforms中）添加用户控件？

> ID：11578164
> 
> 赞同：0
> 
> 时间：2012-07-20T11:11:13.637
> 
> 标签：winforms, user-controls, this, static-methods

我正在尝试创建一个将用户控件添加到我的主窗体的函数。我希望用户控件本身也可以使用此功能，因此我将其设为静态。

我的问题是，当它是静态的我不能使用`this.Controls.Add(ucontrol);`时，我尝试将其更改为`ActiveForm.Controls.Add(ucontrol);`但 ActiveForm 为 NULL 并且没有 Controls 属性（引发异常）。

**更新#1：**我最终在用户控件中做了这样的事情：

```
MainForm ref_to_mainform_to_gain_access_to_functions = (MainForm)Parent;      
ref_to_mainform_to_gain_access_to_functions.DisplayControl(ucontrol); 
```

也许它更好，但我仍然认为可以从静态方法访问主窗体？

**更新#2：**

```
Application.OpenForms["FormName"] 
```

从静态方法工作。

我仍然试图找出用户控件的全部目的是否用作带有按钮的菜单，在点击时显示其他用户控件，从用户控件调用 mainform 上的函数（显示用户控件的函数）是否仍然是“设计犯罪” ? （就像我在“更新＃1”中所做的那样）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T16:44:09.993

通过将用户控件中的控件添加到其父控件，您打破了关注点分离原则，并且紧密耦合了两个控件/表单。正如 Hans Passant 所建议的，您应该使用事件。请参考： [c#中调用父窗体中的方法和访问父窗体中的gui元素的最佳实践](https://stackoverflow.com/questions/6013343/best-practices-to-call-methods-in-the-parent-form-and-access-gui-elements-in-par)

# android - apk 必须使用与之前版本相同的证书进行签名

> ID：11578165
> 
> 赞同：2
> 
> 时间：2012-07-20T11:11:23.747
> 
> 标签：android, apk, google-play

我已经在 google play 帐户上上传了 apk 文件，我是通过右键单击项目从 eclipse 创建的 apk 并导出并将以下详细信息放入其中，仅密码、别名和开发人员单位。

我已成功上传到 google play 帐户。但现在的问题是我已经从本地删除了这个 apk，如果尝试使用版本代码 = 2 和版本名称 = 1.0 更新第二个 apk，我也无法上传任何其他 apk，那么它也会给我错误，即 **apk 必须签名具有与以前版本相同的证书。**

所以现在请帮我解决这个问题，我该怎么做才能在这个应用程序中上传一个新的更新的 apk。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T11:12:13.340

您没有使用相同的密钥库文件来签署您的 apk。

> .apk 必须使用相同的私钥签名。如果软件包名称和签名证书与现有版本不匹配，Market 将认为它是一个新应用程序，不会将其作为更新提供给用户。

取自这里，

[apk 必须使用与之前版本相同的证书进行签名](https://stackoverflow.com/q/4843212/603744)

唯一的方法是使用与之前版本相同的密钥对更新包 apk 进行签名。没有别的去。谷歌对此很严格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T11:19:51.580

> 对于同一个应用程序，您正在更新它的版本。那么就不需要以前的 apk 文件了，但应该有相同的密钥库，用于签署谷歌播放的第一个 apk 文件。还按照您对第一个 apk 文件所做的相同步骤进行操作。

如果您没有相同的密钥库，那么:(您现在根本无法更新相同的应用程序。

# iphone - 排队等待忽略的本地通知？

> ID：11578168
> 
> 赞同：1
> 
> 时间：2012-07-20T11:11:31.807
> 
> 标签：iphone, ios, push-notification, uilocalnotification, badge

我的问题与用户忽略多个本地通知时发生的情况有关。在我的测试中，iOS 5.1（可能更早）似乎只将最后一个被忽略的通知传递给应用程序，并丢弃所有以前被忽略的通知。

使用我的应用程序（我相信还有很多其他应用程序），用户可能不会在每次通知时都启动应用程序，因此在用户启动应用程序之前可能存在多个未确认的通知。这对我很重要的原因是我试图在我的一个应用程序选项卡上放置一个准确的徽章，以反映已触发但尚未确认的通知的数量。

有没有人解决过这个问题？Apple 的电话应用程序为未接电话保留了准确的标记，但当然它们比我们拥有更多的功能。除非我必须这样做，否则我不想诉诸将数字徽章更改为感叹号之类的其他东西。

问候，

- 约翰

# php - 定义 $message="" 变量

> ID：11578169
> 
> 赞同：0
> 
> 时间：2012-07-20T11:11:31.837
> 
> 标签：php

这段代码一切正常，除了我得到一个未定义的变量警告“消息”，我想不出一种方法来定义它，因为它不是一个帖子或会话变量或任何东西。谢谢

```
<?php

if (isset($_POST['submit']))
{
  $newemail = $_POST['newemail'];
  $repeatnewemail = $_POST['repeatnewemail'];
  $email= ($_SESSION['email']);
  $message="";

 //open database

  if (condition)
  {
    $message="first message";
  }
}

?>

<p td class='td2'><?php echo $message;?></td> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T11:13:46.877

把 `$message="";`外面的条件。

```
$message="";
if (isset($_POST['submit'])){
    $newemail = $_POST['newemail'];
    $repeatnewemail = $_POST['repeatnewemail'];
    $email= ($_SESSION['email']);

 //open database

    if (condition){
        $message="first message";
    }
}

?>
<p td class='td2'><?php echo $message;?></td> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T11:16:01.573

在顶部声明 $message ：-

```
$message = ""
if (isset($_POST['submit']))
{
 $newemail = $_POST['newemail'];
 $repeatnewemail = $_POST['repeatnewemail'];
 $email= ($_SESSION['email']);

 //open database

 if (condition)
 {
  $message="first message";
 }
}

?>
 <p td class='td2'><?php if(isset($message)) echo $message;?></td> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T13:43:09.920

你得到的错误是因为你没有定义 $message.

```
$message = ""
if (isset($_POST['submit']))
{
 $newemail = $_POST['newemail'];
 $repeatnewemail = $_POST['repeatnewemail'];
 $email= ($_SESSION['email']);

 //open database

 if (condition)
 {
  $message="first message";
 }
}

?>
 <p td class='td2'><?php if(isset($message)) echo $message;?></td> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T11:14:34.123

```
$message=null;
if (isset($_POST['submit']))
{
 $newemail = $_POST['newemail'];
 $repeatnewemail = $_POST['repeatnewemail'];
 $email= ($_SESSION['email']);
 $message="";

 //open database

 if (condition)
 {
  $message="first message";
 }
}

?>
 <p td class='td2'><?php if(isset($message)) echo $message;?></td> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T11:14:52.677

放在块`$message=""`之前`if (isset($_POST['submit'])) { }`

# javascript - 如何从本地存储数据中检查复选框

> ID：11578170
> 
> 赞同：-1
> 
> 时间：2012-07-20T11:11:39.903
> 
> 标签：javascript, extjs, sencha-touch-2

我是 Sencha 的新手，正在寻求帮助，以便在从本地存储检索数据时将复选框设置为选中状态。我有一个基本表单，可以毫无问题地保存数据，甚至可以在我想编辑时将检索到的数据加载回表单中。但是，复选框没有显示为选中状态，我希望有人可以帮助我或解释我将如何完成此操作。以下代码片段在按下编辑按钮时激活，在表单页面中滑动并将数据从本地存储填充到表单中；

```
 activateNewEvent: function(record) {
        var newEvent = this.getNewEvent();
        newEvent.setRecord(record);
//      console.log(record);
        Ext.Object.each(record.data, function(key,value) {
            if(value != 'false') {
//              record.set('checked', true);
//              key.checked(true);
            }
        });
        Ext.Viewport.animateActiveItem(newEvent, this.left);
    }, 
```

我的控制台显示了所有表单数据和复选框数据，因此信息被正确保存，但我正在努力解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T14:53:48.953

自从我使用这样的东西已经一年多了，但我认为你想在复选框对象上使用 setValue(true) 。我不知道在渲染后更改基础记录是否会选中该框。

# android - 从已启动的服务递归调用 handlerMessage？

> ID：11578176
> 
> 赞同：0
> 
> 时间：2012-07-20T11:11:48.333
> 
> 标签：android

我需要做一些递归任务，比如每五秒做一次。如何做到这一点？我需要在后台执行递归任务，所以我想我可以使用`Started Service`.

PS。我真正想做的是：每五秒钟后使用相机拍照，从后台服务。

我在开发人员指南中找到了以下代码。下面的方法驻留在扩展`Handler`类的自定义类中：

```
@Override
      public void handleMessage(Message msg) {
      // Do Something
      // HOW CAN i MAKE A RECURSIVE CALL (TO SOMEHOW CALL THIS FUNCTION) AFTER 5 SECONDS?
      // Stop the service using the startId
      stopSelf(msg.arg1);
      }
  } 
```

我可以像`Thread.sleep(5000)`以前一样打电话`stopSelf()`吗？（对我来说没有意义......）

或者我可以打电话给类似的东西`this.sendMessageDelayed(msgOb, 5000);`吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T12:29:00.553

好的，这是处理处理程序的一种方法：

```
int counter=0;
private Handler mHandler = new Handler() {
        public void handleMessage(Message msg) {
            switch (msg.what) {
            case MSG_TAKE_PIC:
                if(counter==5) {
                    mHandler.removeMessages(MSG_UPDATE_CALLTIME);
                    break;
                }
                else {
                    //take pic here and then
                    counter++;
                    sendEmptyMessageDelayed(MSG_TAKE_PIC, 5000);
                }

            }
        }
    }; 
```

以及您想从哪里开始拍照：

```
mHandler.sendEmptyMessageDelayed(MSG_TAKE_PIC, 5000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T14:38:17.940

我假设您可以修改拍照服务，因为您没有另外说。

你为什么不发送一个开始拍照的消息和一个停止拍照的消息？当您发送 START 消息时，该服务将每 5 秒开始拍照，直到您发送 STOP 消息。

像这样的东西：

```
class IncomingMessageHandler extends Hanlder implements Runnable {

    private Boolean takePhotos = false;

    public void handleMessage(Message msg) {
        switch(msg.what) {
        case START:
            takePhotos = true;
            new Thread(this).start();
            break;
        case STOP:
            synchronized (takePhotos) {
                takePhotos = false;
            }
            break;
        }
    }

    public void run() {
        while(takePhotos) {
            takePhoto();
            synchronized (takePhotos) {
                takePhotos.wait(5000);
            }
        }
    }
} 
```

（这是服务的处理程序实现）

# python - Python：将图形导入 Excel 并将整个工作表导出为 EPS

> ID：11578186
> 
> 赞同：0
> 
> 时间：2012-07-20T11:12:36.347
> 
> 标签：python, excel, openoffice.org, xlwt

对于当前项目，我需要通过 Python 高级访问 Excel。[我在http://www.python-excel.org/](http://www.python-excel.org/)上找到了 xlwt 项目，它允许我创建 Excel 文件并将数据存储到单元格中。没关系。

不幸的是，我还需要以下功能：

*   导入外部图形文件 (EPS)
*   将整个电子表格导出为 EPS

有谁知道如何解决这个问题？使用 OpenOffice 的解决方法也可以（更好的是，我们都喜欢免费软件）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T11:23:56.680

我将一次满足您的要求：

**以 EPS 格式导入外部图形文件**

[xlwt](http://pypi.python.org/pypi/xlwt)将允许您将图像导入电子表格，但只能以 BMP 格式。首先，您必须将 EPS 文件光栅化为 BMP 格式，然后执行以下操作：

```
from xlwt import *

w = Workbook() 
ws = w.add_sheet('Image')
ws.insert_bitmap('python.bmp', 2, 2)

w.save('image.xls') 
```

[取自源代码中的[这个](https://secure.simplistix.co.uk/svn/xlwt/trunk/xlwt/examples/image.py)例子]

**将整个电子表格导出为 EPS**

您所描述的内容需要 Excel 本身（或 OpenOffice / 等效项） - 因为它是一种渲染操作。您使用的 python-excel 库是用于处理 Excel 文件格式，而不是用于渲染它。

# android - Webview比例在android中改变了

> ID：11578191
> 
> 赞同：0
> 
> 时间：2012-07-20T11:12:59.277
> 
> 标签：android, android-webview

我的应用程序顶部有 4 个选项卡。一个选项卡会打开一个 Url，但单击该页面中的链接会隐藏不需要的 tabBar。

```
protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        设置内容视图（R.layout.news）；
        WebView bpBrowser=(WebView) findViewById(R.id.wvBrowser);
        bpBrowser.loadUrl("https://www.google.co.in/");         
}
```

任何帮助谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T11:58:50.227

您需要覆盖 url`bpBrowser.setWebViewClient(new WebViewClient());`检查此[链接](https://stackoverflow.com/a/5863780/1166537) 以获取有关覆盖后退按钮的更多信息`WebView`

# c# - 指向我的证书文件时，Paypal API 崩溃

> ID：11578192
> 
> 赞同：2
> 
> 时间：2012-07-20T11:13:01.663
> 
> 标签：c#, paypal

我正在尝试使用 Paypal API 捕获一些付款，并且在将 CertificateFile 属性设置为证书文件位置的代码行上出现致命异常。

相关代码如下：

```
using com.paypal.sdk.profiles;
using com.paypal.sdk.services;
using com.paypal.sdk.util;

IAPIProfile profile = ProfileFactory.createSignatureAPIProfile();
profile.CertificateFile = @"~\MyTestCertificate.txt"; 
```

深入了解异常详细信息并没有给我更多信息，它或多或少只是确认确实抛出了致命异常。

像这样省略波浪号和反斜杠会引发相同的错误：

```
profile.CertificateFile = @"MyTestCertificate.txt"; 
```

我想也许我需要文件的内容，而不是位置，所以我尝试了以下但得到了同样的错误：

```
profile.CertificateFile = new StreamReader(@"MyTestCertificate.txt").ReadToEnd().ToString(); 
```

似乎无论您将 CertificateFile 属性设置为什么，都会出现致命异常。

几个问题：

1.  我在哪里可以找到有关 Paypal API 中 IAPIProfile 类的文档，特别是该`CertificateFile`属性的文档
2.  如果我不应该将证书文件的路径放在这个位置，我应该怎么做？

只是为了确认，`MyTestCertificate.txt`已添加到我的解决方案中并`Copy to Output Directory`设置为`Copy Always`.

异常文本如下：

> {“'com.paypal.sdk.exceptions.FatalException' 类型的异常被抛出。”}

StackTrace 看起来像这样：

```
at com.paypal.sdk.profiles.SignatureAPIProfile.set_CertificateFile(String value)
at MyProject_Payment_Processing.Paypal.DoCaptureCode(String authorization_id, String amount) in C:\Users\JMK\documents\visual studio 2010\Projects\MyProject Payment Processing\MyProject Payment Processing\Paypal.cs:line 16
at MyProject_Payment_Processing.Program.Main(String[] args) in C:\Users\JMK\documents\visual studio 2010\Projects\MyProject Payment Processing\MyProject Payment Processing\Program.cs:line 15
at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
at System.Threading.ThreadHelper.ThreadStart() 
```

Paypal API 使用 Log4Net 记录错误，如下所示：

> 2012 年 7 月 20 日 12:39:11 FATAL [FatalException] com.paypal.sdk.exceptions.FatalException：抛出了“com.paypal.sdk.exceptions.FatalException”类型的异常。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T11:14:11.293

您必须在 Microsoft 系统商店中安装您的证书。SDK 中的自述文件解释了如何使用 WinHttpCertCfg 工具执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T11:23:11.160

事实证明aydiv是对的，我不得不用`WinHttpCertCfg`注册证书。Martin 也是正确的，因为我使用的是签名配置文件，而不是证书配置文件。

我要做的第一件事是使用 OpenSSL 加密我的证书，使用以下命令。我必须在这里输入一个密码，我稍后会使用它。这创建了一个名为的加密证书文件`paypal_cert.p12`：

> openssl pkcs12 -export -in MyTestCertificate.txt -inkey MyTestCertificate.txt -out paypal_cert.p12

然后我安装`WinHttpCertCfg`并使用以下命令注册我的证书，替换`PFXPassword`我之前输入的密码：

> winhttpcertcfg -i PFXFile -c LOCAL_MACHINE\My -a JMK -p PFXPassword

另外，我之前使用的是 NVP DLL 文件，而我需要使用 SOAP dll 从[这里](https://cms.paypal.com/uk/cgi-bin/?cmd=_render-content&content_ID=developer/library_code)。这意味着我必须`NVPCallerServices`在我的代码中替换为`Callerservices`，以及其他一些东西。

我在 C# .Net 中执行 Paypal DoCapture 的最终代码如下，希望这将有助于将来遇到此问题的人！

```
class Paypal
{
    public string DoCaptureCode(string authorization_id, string amount)
    {
        CallerServices caller = new CallerServices();

        IAPIProfile profile = ProfileFactory.createSSLAPIProfile();

        profile.APIUsername = "JMK";
        profile.APIPassword = "FooBar";
        profile.CertificateFile = @"~\MyTestCertificate.txt";
        profile.Environment = "sandbox";
        caller.APIProfile = profile;

        DoCaptureRequestType pp_request = new DoCaptureRequestType();
        pp_request.Version = "51.0";

        pp_request.AuthorizationID = authorization_id;
        pp_request.Amount = new BasicAmountType();
        pp_request.Amount.Value = amount;
        pp_request.Amount.currencyID = CurrencyCodeType.GBP;
        pp_request.CompleteType = CompleteCodeType.Complete;

        DoCaptureResponseType pp_response = new DoCaptureResponseType();
        pp_response = (DoCaptureResponseType)caller.Call("DoCapture", pp_request);
        return pp_response.Ack.ToString();
    }
} 
```

# vb6 - ActiveX 控件版本控制 VB 6.0

> ID：11578195
> 
> 赞同：2
> 
> 时间：2012-07-20T11:13:18.390
> 
> 标签：vb6, activex, versioning

我使用 VB 6.0 创建了 OCX。这个 OCX 里面有自定义的 activex 控件。我的应用程序中使用了自定义控件。我已将我的应用程序安装在我已注册 mu 第一个应用程序的系统中。

我的第二个应用程序需要我的 OCX 中可用的自定义控件，以前的控件和新的自定义控件中的一些增强。

为此，我创建了新的 OCX，其中包含以前的控件并添加了新控件。在这种情况下，如果我需要不同的控件，我需要创建更多的 OCX 文件。这很难维护不同的OCX。

如果我在现有 OCX 中添加新功能并在系统中注册，则现有应用程序无法找到以前版本的 activex 控件。

如何在现有的 ocx 中添加新功能而不影响已经使用这些控件的应用程序？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T11:36:41.877

编译项目时，Visual Basic 仅在必要时创建新的类和接口 ID。它保留了以前版本的类和接口 ID，以便使用早期版本编译的程序将继续工作。如果您所做的更改会导致版本不兼容，Visual Basic 会警告您。如果您想保持与旧版本的 ActiveX 组件的兼容性。

参考： http: [//support.microsoft.com/kb/161137](http://support.microsoft.com/kb/161137)

为了使您的控制二进制兼容，

*   打开项目的属性对话框
*   选择组件选项卡
*   选择二进制兼容性单选按钮
*   浏览已编译的现有控件
*   单击确定按钮并重新编译您的项目

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T11:18:28.017

通过检查现有版本的 activex 控件，然后在编译时在新版本中重新使用类型库中的 ID，发布具有“*二进制兼容性*”的组件允许这样做（有几个警告涉及您可以安全更改的内容）。

有关说明，请参见此处：[http](http://wynport.wynsys.net/Visual_Basic_Binary_Compatibility.htm) ://wynport.wynsys.net/Visual_Basic_Binary_Compatibility.htm ，其中包含您可以进行哪些增量更改的列表。

# php - 如何将带有 curl 的文件发送到控制器

> ID：11578202
> 
> 赞同：0
> 
> 时间：2012-07-20T11:13:41.290
> 
> 标签：php, cakephp, curl

我有一个带有图像的 url：[http](http://www.example.com/image.jpg)
://www.example.com/image.jpg 并且我在控制器中有一个操作，它通过用户输入将文件上传到服务器。我想使用相同的操作通过 url 上传文件。我开始从图像中获取数据：

```
$url = "http://www.example.com/image.jpg";
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_BINARYTRANSFER,1);
$rawdata=curl_exec($ch);
curl_close ($ch); 
```

现在如何将 $rawdata 发送到控制器以像普通用户上传一样进行处理？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T13:31:45.420

我自己想通了。

```
$url = "http://www.example.com/image.jpg";
$filename = basename($url, rand_string(7));
$path = realpath("../webroot/uploads/")."/".$filename;

$ch = curl_init($url);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_BINARYTRANSFER,1);
$rawdata=curl_exec($ch);
curl_close ($ch);

if(file_exists($path)){
    unlink($path);
}

$file = fopen($path, 'x');

fwrite($file, $rawdata);
fclose($file);

$post_data['Filedata'] = '@'.$path;
$url = "http://localhost/controller/action";
$ch = curl_init();
// Set URL on which you want to post the Form and/or data
curl_setopt($ch, CURLOPT_URL, $url);
// Data+Files to be posted
curl_setopt($ch, CURLOPT_POSTFIELDS, $post_data);
// Pass TRUE or 1 if you want to wait for and catch the response against the request made
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
// For Debug mode; shows up any error encountered during the operation
curl_setopt($ch, CURLOPT_VERBOSE, 1);
// Execute the request
$response = curl_exec($ch);

echo $response; 
```

在控制器中：

```
function action(){

    //get properties of the file
    //$_FILES['Filedata']['name'];
    //$_FILES['Filedata']['size'];
    //$_FILES['Filedata']['tmp_name'];
    //savefile();

} 
```

如果有人知道如何在不保存的情况下发布文件，那就太好了。

# linux - 为 IPSec 使用 Linux 内核加密 API

> ID：11578214
> 
> 赞同：1
> 
> 时间：2012-07-20T11:14:29.797
> 
> 标签：linux, encryption, linux-kernel, fedora, ipsec

我想使用来自 Linux Crypto API 的 salsa20 作为 IPSec ESP 的加密算法。我已经使用 racoon 中的默认设置成功建立了 IPSec 连接（在两个 VM 之间）

```
remote 192.168.75.3
{
 exchange_mode aggressive, main;
 my_identifier address;
 proposal {
  encryption_algorithm 3des;
  hash_algorithm sha1;
  authentication_method pre_shared_key;
  dh_group 2;
 }
} 
```

但是当我将加密算法更改为 salsa20

```
remote 192.168.75.3
{
 exchange_mode aggressive, main;
 my_identifier address;
 proposal {
  encryption_algorithm salsa20;
  hash_algorithm sha1;
  authentication_method pre_shared_key;
  dh_group 2;
 }
} 
```

并重新启动连接我在“sa”上收到一个语法错误，这是一个致命错误。在我看来，浣熊可能不使用 Linux 内核 Crypto API，或者至少它不支持那里的所有算法！我对吗？还是我做错了什么？有什么办法可以在 linux 的 IPSec 上使用 salsa20 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T05:10:05.317

只是为了记录。

我深入研究了内核代码，发现那里只能使用一些特定的加密算法（根据 IPSec RFC），并且添加新的块加密算法也将涉及操纵 IKE（例如 Racoon）。

顺便说一句，对于 IPSec ESP 使用流密码（如 salsa20）只有一个 RFC 草案，因此使用它们将涉及在其他修改之上实施一个草案 RFC。

# c++ - 右值引用和构造函数参数

> ID：11578221
> 
> 赞同：4
> 
> 时间：2012-07-20T11:15:04.627
> 
> 标签：c++, constructor, c++11, rvalue-reference

让我们考虑一个简单的类

```
template< typename T >
class Wrapper {
public:
  // Constructors?
private:
  T wrapped;
}; 
```

它应该使用什么构造函数才能有效？

* * *

在 C++0x 之前，将有一个构造函数，它采用以下任一方式：

1.  const reference ( `T const&`) - 如果类型`T`是“重”，
2.  或 value ( `T`) - 如果 type`T`是“light”。

确定类型`T`是“重”还是“轻”并不容易。

可以假设只有内置类型（ints/floats/...）是“轻量级”的。但这并不完全正确，因为我们`Wrapper<int>`最有可能也应该将其视为“轻”类型。

类似的库通过允许类型创建者将类型标记为“轻”（通过提供适当的专业化）[`boost::call_traits`](http://www.boost.org/doc/libs/1_50_0/libs/utility/call_traits.htm)来提供一些克服这一困难的方法。`call_traits`否则将被视为“重”。似乎可以接受。

* * *

但是 C++0x 使情况变得更糟。因为现在您还有右值引用 ( `T&&`)，它允许有效地获取（一些）“重”对象。

正因为如此，现在您必须选择：

1.  只是 const reference ( `T const&`) - 如果类型`T`是“重”并且不支持移动语义（因为要么没有 - 就像大型 POD - 或者没有写入并且你对此没有影响），
2.  const 引用 ( `T const&`) 和 rvalue 引用 ( `T&&`) - 如果类型`T`是“重”并且确实支持移动语义，
3.  just value ( `T`) - 如果类型`T`是“轻”或“重”但支持移动语义（即使复制了它也不会打扰使用，否则我们无论如何都必须从`T const&`自己复制......）。

仍然不容易分辨哪些类型是“重的”，哪些是“轻的”（如前所述）。但是现在您也无法判断类型是否`T`支持移动语义（或者您是否支持？）。

* * *

一旦你包装了多个值，这会变得更加烦人，因为可能的构造函数重载的数量呈指数增长。

这个问题有什么解决办法吗？

我想到了一些用于转发（完美转发）参数的模板构造函数，但我不确定这是否会按预期工作。而且它还允许提供不同类型的值，这些值将被转发给`T`构造函数。这可能被认为是一项功能，但并非必须如此。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T11:26:52.367

相反，由于通用引用，C++11 使它*变得更容易：*

```
template <typename T> struct Wrapper
{
    T value;

    template <typename U> Wrapper(U && u)
    : value(std::forward<U>(u))
    {  }
}; 
```

`T`作为一个额外的好处，您应该添加一个默认的第二个参数，该参数仅在可构造 from时才存在`U`，以免使您的类本身看起来可从不匹配的类型构造。并使其可变：

```
template <typename ...Args>
Wrapper(Args &&... args,
        typename std::enable_if<std::is_constructible<T, Args...>::value, int>::type = 0)
: value(std::forward<Args>(args)...)
{  } 
```

确保`#include <utility>`为`forward`和`#include <type_traits>`为特征。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T12:46:17.357

如果您`T`无论如何都要复制，最好按值传递参数并让编译器找出复制。不管你做什么，至少会有一份副本。

```
template< typename T >
class Wrapper {
public:
  Wrapper(T value) : wrapped(std::move(value))
  { }
private:
  T wrapped;
}; 
```

见[想要速度？](http://cpp-next.com/archive/2009/08/want-speed-pass-by-value/)戴夫亚伯拉罕[的价值传递。](http://cpp-next.com/archive/2009/08/want-speed-pass-by-value/)

# c# - c# webservice客户端-日期格式

> ID：11578223
> 
> 赞同：1
> 
> 时间：2012-07-20T11:15:06.250
> 
> 标签：c#, web-services, datetime, webservice-client

`yyyy-MM-ddTHH:mm:ss`我正在编写 ac# 应用程序，它使用格式为 datetime 类型参数的 Web 服务。请注意，Web 服务中的参数是“DateTime”类型，因此我无法控制在内部转换为 XML 时如何格式化此类型。

谁能提供有关我们如何确保我们的 Web 服务调用以所需格式发送日期时间的线索？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T11:22:42.873

如果您将参数作为`DateTime`您不必担心的类型的对象发送，则`DateTime`Object 在内部存储数据而不是作为字符串。您只需确保在创建客户端 DateTime 对象时正确解析它。

编辑：当然，在测试界面（输入字符串）中解析日期与将日期时间对象直接传递给客户端代理时不同......

您在评论中提出的问题：要抑制添加的时区，您可以将属性设置`dateTimeSerialization`为`local`. 但我不认为这是一个好主意。只是更好地在任何地方使用本地化日期。 [更多信息](http://msdn.microsoft.com/en-us/library/ms229751%28v=vs.80%29.aspx)

# apache - 多网站magento安装上的错误路径

> ID：11578231
> 
> 赞同：1
> 
> 时间：2012-07-20T11:15:33.203
> 
> 标签：apache, .htaccess, magento, wamp, httpd.conf

我在 Windows 7 上运行带有 WAMP 2.1 的 magento 1.7.0.2 实例。我的目标是设置一个 magento 商店，我按照[此处](http://www.crucialwebhost.com/blog/how-to-setup-multiple-magento-stores/)描述的教程进行操作，并在子目录中设置网站*profi*，但是当我访问前端时`http://localhost/profi/`我注意到的第一件事是图像路径被破坏了。

破碎的：`http://localhost/bms/profi/skin/frontend/default/default/images/logo.gif`

正确的： `http://localhost/bms/skin/frontend/default/default/images/logo.gif`

JS & CSS 文件也是如此。我对*profi*文件夹中的 index.php 文件进行了以下修改：

```
$mageFilename = MAGENTO_ROOT 。'../../app/Mage.php';
```

```
/* 商店或网站代码 */
$mageRunCode = isset($_SERVER['MAGE_RUN_CODE']) ？$_SERVER['MAGE_RUN_CODE'] : 'profi';

/* 运行商店或运行网站 */
$mageRunType = isset($_SERVER['MAGE_RUN_TYPE']) ？$_SERVER['MAGE_RUN_TYPE'] : '网站';
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T15:49:25.777

这是配置第二个网站的 URL 的问题。

我去了系统 > 配置 > 常规 > Web > 不安全。基本 URL 是`http://localhost/profi/`，我将 ../ 添加到以下内容：

*   基础皮肤网址：`{{unsecure_base_url}}../skin/`
*   基础媒体网址：`{{unsecure_base_url}}../media/`
*   基本 JavaScript 网址：`{{unsecure_base_url}}../media/`

那成功了。我在前端看到一切看起来井井有条。希望我不会再遇到这个设置的问题。

# java - java中多表数据导出到同一张excel表的多个工作表

> ID：11578232
> 
> 赞同：0
> 
> 时间：2012-07-20T11:15:34.230
> 
> 标签：java, excel, apache-poi

下面的程序将单个表的数据导出到 excel 文件中。我的问题是，如果我有两个表，那么如何将其数据导出到同一个 excel 文件的两个不同工作表中？

假设工作表 1 中的 tab1 数据和同一个 Excel 工作表的工作表 2 中的 tab2 数据

```
public class CreateExcelFile{
        public static void main(String[]args){
    try{
    String filename="c:/data.xls" ;
    HSSFWorkbook hwb=new HSSFWorkbook();
    HSSFSheet sheet =  hwb.createSheet("new sheet");

    HSSFRow rowhead=   sheet.createRow((short)0);
    rowhead.createCell((short) 0).setCellValue("SNo");
    rowhead.createCell((short) 1).setCellValue("Name");
    rowhead.createCell((short) 2).setCellValue("Address");
    rowhead.createCell((short) 3).setCellValue("Contact No");
    rowhead.createCell((short) 4).setCellValue("E-mail");

    Class.forName("com.mysql.jdbc.Driver");
    Connection con = DriverManager.getConnection("jdbc:mysql://localhost:456/test", "root", "root");
    Statement st=con.createStatement();
    ResultSet rs=st.executeQuery("Select * from employee");
    int i=1;
    while(rs.next()){
    HSSFRow row=   sheet.createRow((short)i);
    row.createCell((short) 0).setCellValue(Integer.toString(rs.getInt("id")));
    row.createCell((short) 1).setCellValue(rs.getString("name"));
    row.createCell((short) 2).setCellValue(rs.getString("address"));
    row.createCell((short) 3).setCellValue(Integer.toString(rs.getInt("contactNo")));
    row.createCell((short) 4).setCellValue(rs.getString("email"));
    i++;
    }
    FileOutputStream fileOut =  new FileOutputStream(filename);
    hwb.write(fileOut);
    fileOut.close();
    System.out.println("Your excel file has been generated!");

    } catch ( Exception ex ) {
        System.out.println(ex);

    }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:38:11.087

不确定我的问题是否正确，而且我也不是 Java 程序员，但这是我的理论，似乎合乎逻辑：

```
HSSFWorkbook hwb=new HSSFWorkbook(); 
HSSFSheet sheet =  hwb.createSheet("new sheet"); 
```

通过提供的 Java API 定义一个新的工作簿/工作表对象（“新工作表”是工作表的名称）。如果您想定义第二张工作表，那么您应该能够：

```
HSSFSheet sheet_2 =  hwb.createSheet("new_sheet_2"); 
```

它创建并定义了一个新的工作表对象。
然后当你：

```
HSSFRow rowhead=   sheet.createRow((short)0); 
```

显然，您需要使用您创建的第二个工作表对象**Sheet_2**。这同样适用于其余代码和构建表时。在写入文件时，我非常肯定你应该得到你期望的结果。

# oracle - Oracle DB 中 COMMIT_POINT_STRENGTH 参数的影响是什么？

> ID：11578237
> 
> 赞同：0
> 
> 时间：2012-07-20T11:15:44.300
> 
> 标签：oracle, commit

根据 Oracle 文档，COMMIT_POINT_STRENGTH 是决定分布式事务提交的影响的参数？我的应用程序中有 2 个数据库节点，并且两个节点中的 COMMIT_POINT_STRENGTH 都设置为 1。如果我从一个节点为两个节点中都存在的表启动事务（通过同义词）。如果另一个节点未能提交数据，事务会发生什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T16:23:30.257

First off: COMMIT_POINT_STRENGTH is *not* the parameter which determines the impact of the commit of a distributed transaction. The [docs](http://docs.oracle.com/cd/B19306_01/server.102/b14237/initparams026.htm) say:

*It specifies a value that determines the commit point site in a distributed transaction. The node in the transaction with the highest value for `COMMIT_POINT_STRENGTH` will be the commit point site.* [...] *The commit point site stores information about the status of transactions. Other computers in a distributed transaction require this information during Oracle's two-phase commit, so it is desirable to have machines that are always available as commit point sites.*

So given that the communication between the nodes is intact, the answer to your question "*What happens to the transaction, if other node fails to commit data?*" is independent of `COMMIT_POINT_STRENGTH` and follows Oracle's two-phase commit: **the transaction is rolled back at both nodes**.

# php - 有什么方法可以检查 mysql Indexing 的性能

> ID：11578241
> 
> 赞同：4
> 
> 时间：2012-07-20T11:15:50.673
> 
> 标签：php, mysql, database

我已经为我的表分配了索引。有什么方法可以确定我的查询的性能吗？谢谢

**编辑** ![解释结果](../Images/bf1e0a2bb728d98ce280cecc92766477.png)

在这里，我附上了我的测试服务器解释结果。在测试服务器中只有几行，但在实时服务器中，有数百万条记录，执行查询需要 10 到 15 分钟。如果它在这里不可见，我将提供此图像的 url

***[http://i45.tinypic.com/n6t8cx.jpg](http://i45.tinypic.com/n6t8cx.jpg)***

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T11:17:59.807

以下查询将告诉您查询是否使用索引：

```
EXPLAIN EXTENDED SELECT col1, col2, col3, COUNT(1) 
FROM table_name 
WHERE col1 = val 
GROUP BY col1 
ORDER BY col2;

SHOW WARNINGS; 
```

您可以添加覆盖索引以获得最佳性能。

对于覆盖索引，您首先添加在 where 子句中使用的列，然后是在 group 中使用的列，然后是在 order by 中使用的列，然后是在 select 中使用的列。

例如对于上述查询，您可以添加覆盖索引`KEY(col1, col2, col3)`

*注意添加更多索引会减慢您的插入查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T23:55:35.780

也许您可以打开慢查询日志，这可能会提供更多信息。阅读此内容以获取更多信息： [http ://dev.mysql.com/doc/refman/5.0/en/slow-query-log.html](http://dev.mysql.com/doc/refman/5.0/en/slow-query-log.html)

# tridion - Tridion 2009 SP1：图像缩略图 - 如何同时发布原始图像？

> ID：11578243
> 
> 赞同：3
> 
> 时间：2012-07-20T11:15:58.110
> 
> 标签：tridion, tridion2009, broker

我有一个动态组件模板，它将 XML 发布到代理数据库，然后使用组件表示工厂动态加载。

此 Xml 包含图像的 URL。我需要一个缩略图和一个完整的图像可用。我已经设法使用 Image Resizer TBB 来生成缩略图，但是，我希望这会添加可以引用的单独的包项目和二进制文件，但它似乎会覆盖完整大小的图像。

有没有一种方法可以在不编写自己的自定义 TBB 的情况下同时进入我的 Xml 和包？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-20T12:12:28.583

Tridion Content Delivery 可以存储同一多媒体组件的多个***变体。***每个这样的变体都有一个标识它的 ID，没有 ID 的变体（在较新的版本中 #def# 作为其 ID）被称为默认变体。

当您从 DWT 引用图像时，它会在渲染引擎执行您的 DWT 时自动添加为要打包的项目。此项目随后由默认完成操作中的默认“在包中发布二进制文件”TBB 处理。Publish Binaries in Package TBB 通过调用二进制文件来发布二进制文件- 您可以通过查看[此处](https://forum.tridion.com/topic.asp?TOPIC_ID=4653)`AddBinary`在 Tridion 论坛上发布的大多数默认 TBB 的原始代码来验证这一点（需要登录）。

```
appliedTemplateUri = new TcmUri(item.Properties[Item.ItemPropertyTemplateUri]);
...
engine.AddBinary(itemUri, appliedTemplateUri, targetStructureGroup, 
                 data, fileName); 
```

调用的`AddBinary`方法在 TOM.NET CHM 中定义为：

```
public abstract string AddBinary(
    TcmUri componentUri,
    TcmUri templateUri,
    TcmUri targetLocation,
    byte[] data,
    string fileName
) 
```

*   ***componentUri*** 本项所指的多媒体组件
*   ***templateUri*** 在其上下文中执行此 AddBinary 调用的模板（用作变体 ID）
*   ***targetLocation*** 将二进制文件发布到的位置（如果为 null，则发布到标准路径）
*   ***data*** 要发布的二进制数据
*   ***fileName*** 发布文件的文件名

因此，正如您在最后一次调用中看到的那样，`AddBinary`在包 TBB 中发布二进制文件使用一个属性（如果您从未听说过，请看[这里](http://code.google.com/p/tridion-practice/wiki/LogPropertiesOfItemsInPackage)`Item.Properties`）来确定要发布的变体（如果属性是，则将二进制文件作为默认变体发布）不存在）。

掌握了所有这些知识后，任务就变得非常简单：您必须确保 MMC 的包中有两个二进制项，每个项具有不同的`Item.ItemPropertyTemplateUri`属性值。

默认的 Image Resizer TBB 替换它调整大小的 Item 的二进制内容，并且不设置此属性。因此，您必须编写的最少代码是复制项目的预处理器 TBB 或重新添加项目的后处理器 TBB。在这两种情况下，TBB 也必须设置“魔法”属性。

有用的链接：

*   [默认模板构建块的原始 C# 源代码](https://forum.tridion.com/topic.asp?TOPIC_ID=4653)
*   [描述 Item.Properties 以及如何查看它们在复合模板中的作用的页面](http://code.google.com/p/tridion-practice/wiki/LogPropertiesOfItemsInPackage)
*   [SDL Tridion 论坛上有关同一主题的最新帖子](https://forum.tridion.com/topic.asp?TOPIC_ID=6969)（需要登录）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T12:18:46.843

基本上所有 Image Resizer TBB 所做的只是调整已经在包中的图像大小，因此 Default Finish Actions TBB 可以发布它（使用 AddBinary() 调用）。

因此，您需要对 Resizer TBB 的逻辑稍作更改（您需要在这里自己做一些事情），以便它不会调整包中原始项目的大小，而是发布它的变体。然后，您在交付端有两个可用的图像（例如，您可以通过将调整大小的图像发送到不同的结构组来区分它们）。

# java - Windows 与 linux http 身份验证。javax.net.ssl.SSLPeerUnverifiedException：对等体未通过身份验证

> ID：11578253
> 
> 赞同：0
> 
> 时间：2012-07-20T11:16:44.517
> 
> 标签：java, ssl, ssl-certificate, http-get, httpconnection

当尝试在我的 Windows 机器上建立 http 连接时，我在 httpclient.execute(httpGet, responseHandler); 上得到以下异常；

```
javax.net.ssl.SSLPeerUnverifiedException: peer not authenticate
at com.sun.net.ssl.internal.ssl.SSLSessionImpl.getPeerCertificates(Unknown Source)
at org.apache.http.conn.ssl.AbstractVerifier.verify(AbstractVerifier.java:128) 
```

我想我需要在 Windows 机器上的 java 或浏览器中添加一些证书，但是我从哪里得到它们呢？为什么它在 linux 上运行良好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T15:17:24.433

该博客可能会有所帮助：http: [//javaskeleton.blogspot.com/2010/07/avoiding-peer-not-authenticated-with.html](http://javaskeleton.blogspot.com/2010/07/avoiding-peer-not-authenticated-with.html)

# git - 我有一个文件在我暂存任何其他文件时会自动暂存 - 为什么

> ID：11578256
> 
> 赞同：0
> 
> 时间：2012-07-20T11:17:13.757
> 
> 标签：git

这绝对令人愤怒。我整个上午都没有做任何工作。每当我暂存文件“foo/bar.coffee”时，另一个完全未更改的文件“foo/map.coffee”也会自行暂存。我尝试将存储库重置为 HEAD，没有暂存文件。我*暂存 bar.coffee*，现在暂存两个文件。而且文件*map.coffee* **甚至没有被修改**。在 diff 中（在暂存之后），它显示文件的每一行前面都有一个“-”，就好像我已经暂存它以进行删除一样。

这是*map.coffee*顶部的差异注释在上演后的样子：

```
diff --git a/src/controllers/map.coffee b/src/controllers/map.coffee
删除文件模式 100755
索引 e4d5d3b..0000000
--- a/src/controllers/map.coffee
+++ /dev/null

```

我尝试检查一个新的*map.coffee*，但没有成功，每当我暂存文件时，它都会自行暂存以进行删除。为什么是这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T07:43:13.210

没有重置或签出帮助，所以我最终将远程开发分支签出到一个新文件夹中，然后将新文件夹与旧文件夹合并（.git 文件夹除外。）自上次推送结束以来工作目录中的所有更改作为未分级的更改，我只是逐个提交。

我很确定是 Git GUI 的“存档压缩”导致了这个问题，因为这一切都是从我错误地点击“是”而不是“否”的那一天开始的。

# plsql - 定义包内的过程

> ID：11578258
> 
> 赞同：1
> 
> 时间：2012-07-20T11:17:31.550
> 
> 标签：plsql, oracle-sqldeveloper

我在 SQL Developer 中创建了一些程序，它们工作正常。但是，我现在正在创建一个包以包含所有这些程序，并且似乎无法找出正确的方法来对包进行编码，因为它返回以下错误（参考 PACKAGE BODY 的 CREATE）：

```
 PLS-00103: Encountered the symbol "CREATE" 
```

这是我的代码：

```
CREATE OR REPLACE PACKAGE package_test AS

PROCEDURE copy_object;

END package_test;

CREATE OR REPLACE PACKAGE BODY package_test AS

PROCEDURE copy_object IS
CURSOR object_cursor IS
SELECT COD_OBJECT, OBJECT_NAME FROM OBJECT;

object_rec object_cursor%rowtype;

BEGIN
EXECUTE IMMEDIATE 'TRUNCATE TABLE DATABASE2.D_OBJECT';
FOR object_rec IN object_cursor
LOOP
    INSERT INTO DATABASE2.D_OBJECT (COD_OBJECT,OBJECT_NAME) VALUES (object_rec.OOD_OBJECT,object_rec.OBJECT_NAME);
END LOOP;
COMMIT;
END copy_object;
END package_test; 
```

我做了一些搜索，我唯一能想到的可能是与 CURSOR 上的定义相关的一些问题……但不确定。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T11:55:45.267

我在 sqlplus 和 sqldeveloper 中成功运行了这个（sqldeveloper 中的 F5：“运行脚本”）。我更改了两个 dml 语句，因为我的架构不同。

```
SQL> CREATE OR REPLACE PACKAGE package_test AS
  2
  3  PROCEDURE copy_object;
  4
  5  END package_test;
  6  /

Package created.

SQL>
SQL> CREATE OR REPLACE PACKAGE BODY package_test AS
  2
  3  PROCEDURE copy_object IS
  4  CURSOR object_cursor IS
  5  SELECT * from dual;
  6
  7  object_rec object_cursor%rowtype;
  8
  9  BEGIN
 10  EXECUTE IMMEDIATE 'TRUNCATE TABLE DATABASE2.D_OBJECT';
 11  FOR object_rec IN object_cursor
 12  LOOP
 13      NULL; --INSER INTO DATABASE2.D_OBJECT (COD_OBJECT,OBJECT_NAME) VALUES (object_rec.OOD_OBJECT,object_rec.OBJECT_
NAME);
 14  END LOOP;
 15  COMMIT;
 16  END copy_object;
 17  END package_test;
 18  /

Package body created.

SQL> 
```

# api - 如何使用 last.fm API 获取艺术家上周的热门曲目？

> ID：11578262
> 
> 赞同：0
> 
> 时间：2012-07-20T11:17:43.520
> 
> 标签：api, last.fm

我想`last week top tracks`使用 last.fm API 获取艺术家的，但我没有看到任何相关的方法调用。

我查看了`artist.getTopTracks`方法，但它返回了艺术家的整体热门曲目。

那么，有什么方法可以让我使用 API 仅获取上周的热门曲目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T11:47:53.383

不幸的是，无法通过他们的 API 获取这些信息。确实有点奇怪，因为上周热门曲目图表默认列在 last.fm 网站的艺术家页面上。所以你必须使用一些好的旧网页抓取技术。

# mysql - 复制记录时出错

> ID：11578266
> 
> 赞同：0
> 
> 时间：2012-07-20T11:18:07.307
> 
> 标签：mysql

我有一个父表和一个子表。孩子是新创建的表。我使用外键将孩子与父母联系起来。

父级已经包含数据。孩子是新空的。我需要从以前的子表中复制数据（以前连接到父表，但我删除了连接，因为列中的值重复应该是唯一的（注意：我发现它应该是唯一的这个列是当然不是外键）。但是，我键入以下语句以便从连接到父级的前一个子级复制记录：

```
insert into databasename.newchild select distinct * from databasename.previouschild group by uniquename; 
```

新孩子和旧孩子之间的区别在于，我将一列指定为唯一的，而它在前一个孩子中不是唯一的，这会导致不应该出现重复。

Mysql给我错误：

错误代码：1452。无法添加或更新子行：外键约束失败（`databsename`. `newchildtable`, CONSTRAINT `newchildforeignkeyname`FOREIGN KEY ( `newchildforeignkeyname`) REFERENCES `parenttable`( `parentuniquecolumn`) ON DELETE CASCADE ON UPDATE CASCADE）

可能是什么问题呢 ？

# javascript - Javascript setTimeout 和重定向 - IE 冻结

> ID：11578267
> 
> 赞同：8
> 
> 时间：2012-07-20T11:18:12.383
> 
> 标签：javascript, internet-explorer

我的页面上有一个脚本处理会话超时，当会话到期时在客户端重定向用户。完整的代码稍微复杂一些，但我已将代码精简为导致我出现问题的原因：

```
<head runat="server">
    <script src="javascript/jquery-1.7.2.min.js" type="text/javascript">
    </script>
    <script type="text/javascript">

        /*

            Please see document ready method at the bottom that sets
            up this code, calling CheckActivity() at intervals.

        */

        var warningInterval, redirectTimeout;
        var now = 1;

        function TimeoutRedirect() {
            window.location.href = "Test2.aspx";
        }

        //In this example this is a bit of a null op, but in real
        //code this will display a warning a minute or so prior to redirect.
        //This is required to recreate...
        function CheckActivity() {
            if (now > 4) {
                clearInterval(warningInterval);

                redirectTimeout = setTimeout(function () { 
                         TimeoutRedirect(); }, 5000);
            }

            //Some visual activity for testing purposes.
            $("#CheckActivityCount").text(now);
            now++;
        }

        $(document).ready(function () {
            warningInterval = setInterval(function () { 
                CheckActivity(); }, 1000);
        });
    </script>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <div id="CheckActivityCount">

        </div>
    </div>
    </form>
</body> 
```

此代码按预期工作，在（大约）十秒后重定向。但是，如果对 CheckActivity 的间隔调用完成后（5 秒后），我锁定我的屏幕，然后在重定向发生后解锁它（再过 5 秒），我的 IE 窗口中的 URL 已转到“test2” .aspx'，但窗口似乎已冻结（仍显示第一页）。

这最终会解冻，但需要 10 秒才能到达下一页。

这似乎只发生在 IE（我的机器上的 IE9）中，并且在 chrome 和 firefox（以及奇怪的 IE6）中很好。

（Test2.aspx 是一个非常简单的页面，只包含文本'success'。）

* * *

请注意，如果我将重定向从 test.aspx 更改为[http://www.google.com/](http://www.google.com/)，这似乎不是问题。但是，如果我将 test2.aspx 更改为绝对 URL（唯一的主要区别是这将是 localhost 地址），仍然不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-02T17:24:38.367

I was running into the same type of issue, and I created a different question so I could focus in on what I perceived to be the heart of the issue. (IE not repainting while computer is in lock screen.)

Anyway, I **finally** figured out a way to resolve this. You can see **[my answer here](https://stackoverflow.com/a/23398842/940783)**. Essentially you can fix your issue by putting some JavaScript inside your auto-logout destination page to periodically update the page content.... and this will force IE to repaint the page.

This way I can execute any Auto Saving logic I want right before their session expires on their current page, and then kick them to the Auto-Logout page.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T13:03:05.020

听起来好像 IE 在您锁定屏幕时进入某种形式的“暂停”模式，以避免在渲染等时使用循环。也许您可以尝试将重定向链接到窗口的*onFocus事件，如下所示：*

```
window.onfocus = function(){
    window.location.href = "Test2.aspx";
}
window.location.href = "Test2.aspx"; 
```

理论上，一旦重新获得焦点（即解锁屏幕时），这应该重定向页面。如果窗口已经有了焦点，那么无论如何这应该没有任何区别。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T19:38:08.903

我这里没有 IE，所以我无法验证，但也许您可以推迟对 TimeoutRedirect 的调用，直到窗口再次处于活动状态。

我已经建立了一个[示例页面](http://www.magicrising.de/windowfocus/)来说明这一点。

原理比较简单。您在运行间隔和超时时，如果窗口变为非活动状态，您将设置一个变量，因为用户切换选项卡或锁定屏幕。一旦超时，您检查窗口是否有焦点。如果没有，请设置另一个变量来告诉`focus`处理程序运行您的会话结束函数。这应该有助于重定向。

```
sessionEnd: function() {
    this.sessionEnded = true;
    var windowEvents;
    if (!this.isInactive) {
        console.log("window active, sessionEnd called");
        alert("THE END");
        this.removeEvents();
        // window.location.href = "test.aspx";
    } else {
        console.log("window inactive, sessionEnd will be called again on focus");
    }

},

handleEvent: function(e) {
    // only do something if the window loses or gains focus
    if (this.eventBlurRegex.test(e.type)) {
        this.isInactive = true;
    } else if (this.eventFocusRegex.test(e.type)) {
        this.isInactive = false;
        if (this.sessionEnded === true) {
            this.sessionEnd.call(this);
        }
    }

}, 
```

For older IE versions which don't support the `handleEvent` function I've used the polyfill found at [CSS NInja](http://www.thecssninja.com/javascript/handleevent) and modified it a little bit.

I hope this helps.

# c - 程序在 for 循环后执行 - C

> ID：11578268
> 
> 赞同：-2
> 
> 时间：2012-07-20T11:18:22.650
> 
> 标签：c, loops

这是我的问题。在我输入一些输入并点击回车后，程序立即执行。我发现问题是由于我使用的 for 循环造成的。这是代码。

```
#include<stdio.h>
#include<stdlib.h>
#include<string.h>

main(){

 char myString[100]; 
 char myChar = myString[6];
 int i;

 for(i=0; i<=100; i++){
    scanf("%s", myString[i]);
 }

 printf("%c\n", myChar); 
 system("pause");

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T11:20:29.973

您正在尝试读取 101 个字符串`%s`，但您为 100 个字符分配了空间。您将字符而不是字符指针传递给`scanf`，从而导致崩溃。

如果您尝试读取 100 个字符，则应传入`%c`格式行，**并**在调用的参数部分中传递一个地址`scanf`：

```
scanf("%c", &myString[i]); 
```

您还应该替换`<=`为`<`或分配`myString[101]`。

如果您要获取一个字符串，请调用`scanf`一次，而不是循环调用：

```
scanf("%99s", myString); // myString is the same as &myString[0] 
```

在将任何数据放入字符数组之前，您还要读取第 6 个字符。`for`该值在循环后不会改变。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T11:21:20.260

您正在使用字符串格式 ( `%s`)，但传递了一个字符`myString[i]`。这是不好的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T11:24:07.437

一个问题可能是你的 for 循环：

```
for(i=0; i<=100; i++){
    scanf("%s", myString[i]);
 } 
```

您只有 100 个元素，但可以访问 101 个。

问候罗杰

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T14:17:09.433

你应该写：

```
 for(i = 0; i < 100; i++)
 {
    scanf("%c", &myString[i]);
 } 
```

或者：

```
scanf("%s", &myString); 
```

顺便说一句，下面的行：

```
char myChar = myString[6]; 
```

它应该放在调用 'scanf' 之后，否则 mychar 将始终是 'c'

# css - CSS规则不起作用

> ID：11578272
> 
> 赞同：1
> 
> 时间：2012-07-20T11:18:42.377
> 
> 标签：css, joomla

我正在尝试应用以下 CSS 规则

```
div#ja-navhelper.wrap {
    display: none !important; 
} 
```

到以下 joomla 网站

[http://nuevas-tecnologias.org/index.php](http://nuevas-tecnologias.org/index.php)

但它不工作

知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T11:21:54.060

这样做是不好的做法`div#idofelement`。最好这样做：`#idofelement`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T11:31:44.330

你确定你真的在设置它吗？因为当我使用开发人员工具进行检查时，我没有在您的网站 CSS 中的任何地方看到它。但是，您确实有一个空的`#ja-navhelper{}`，如果我只是`display:none;`通过开发人员工具在其中设置...它可以工作！

# r - 删除具有顺序相似数据的行 - R Zoo

> ID：11578273
> 
> 赞同：2
> 
> 时间：2012-07-20T11:18:51.333
> 
> 标签：r, xts, zoo

我有一个按时编入索引的动物园数据集。有些行有相同的数据，所以我基本上只想删除这些重复的行。

```
 redpardiff        relpar
2012-07-05 10:19:38 -9.531491e-05  4.727280e-07
2012-07-05 10:19:41 -9.531491e-05  4.727280e-07
2012-07-05 10:19:47 -9.531491e-05  4.727280e-07
2012-07-05 10:19:47 -9.531491e-05 -9.999995e-01
2012-07-05 10:19:47 -9.531491e-05  1.000000e+00
2012-07-05 10:19:49 -9.531491e-05 -9.999995e-01 
```

删除后它应该看起来像

```
 redpardiff        relpar
2012-07-05 10:19:38 -9.531491e-05  4.727280e-07
2012-07-05 10:19:47 -9.531491e-05 -9.999995e-01
2012-07-05 10:19:47 -9.531491e-05  1.000000e+00
2012-07-05 10:19:49 -9.531491e-05 -9.999995e-01 
```

进行顺序比较非常慢。有没有更好的方法来做这样的练习？

```
structure(c(-9.53149088309146e-05, -9.53149088309146e-05, -9.53149088309146e-05, 
-9.53149088309146e-05, -9.53149088309146e-05, -9.53149088309146e-05, 
4.72727990086241e-07, 4.72727990086241e-07, 4.72727990086241e-07, 
-0.99999952727201, 1.00000047272799, -0.99999952727201), .Dim = c(6L, 
2L), .Dimnames = list(NULL, c("redpardiff", "relpar")), index = structure(c(1341463778.55163, 
1341463781.40801, 1341463787.2642, 1341463787.52668, 1341463787.78777, 
1341463789.36693), class = c("POSIXct", "POSIXt")), class = "zoo") 
```

编辑：“显然准时”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T11:29:17.730

```
 x[c(1,which(rowSums(abs(diff(x)))!=0)+1),]
                       redpardiff        relpar
2012-07-05 05:49:38 -9.531491e-05  4.727280e-07
2012-07-05 05:49:47 -9.531491e-05 -9.999995e-01
2012-07-05 05:49:47 -9.531491e-05  1.000000e+00
2012-07-05 05:49:49 -9.531491e-05 -9.999995e-01 
```

# c# - 如何在 ASP.NET 中为按钮创建 EventHandler

> ID：11578276
> 
> 赞同：0
> 
> 时间：2012-07-20T11:19:01.863
> 
> 标签：c#, asp.net, events, listview, event-handling

我的问题：

我有一个 ASP.NET 应用程序并使用 ListView。我从 Active Directory 中获取数据线（电子邮件、用户名、名字等）并将其填写在我的 ListView 中。每行都有一个“显示”按钮，我想用这个按钮到另一个 WebForm。通过一个会话，我将数据交给另一个 WebForm。我的代码：

> ```
>  <LayoutTemplate>
>         <table id="UserTable" runat="server" border="0" cellspacing="10" cellpadding="5">
>             <tr id="Tr1" runat="server">
>                 <th id="Th1" runat="server">Benutzer</th>
>                 <th id="Th2" runat="server">eMail</th>
>                 <th id="Th3" runat="server">Vorname</th>
>                 <th id="Th4" runat="server">Nachname</th>
>                 <th id="Th5" runat="server">Telefon</th>
>             </tr>
>             <tr runat="server" id="ItemPlaceholder">
>             </tr>
>         </table>
>     </LayoutTemplate>
> 
>     <ItemTemplate>
> 
>         <tr runat="server"> 
> 
>             <td align="left" ><asp:Label ID="Label1" Text='<%# Eval("Benutzer") %>' runat="server" /></td>
>             <td align="left"><asp:Label ID="Label2" Text='<%# Eval("eMail") %>' runat="server" /></td>
>             <td align="left"><asp:Label ID="Label3" Text='<%# Eval("Vorname") %>' runat="server" /></td>
>             <td align="left"><asp:Label ID="Label4" Text='<%# Eval("Nachname") %>' runat="server" /></td>
>             <td align="left"><asp:Label ID="Label5" Text='<%# Eval("Telefon") %>' runat="server" /></td>
> 
>               //Every Line get a Button
>             <td align="left"><asp:Button ID="Button1" Text ="Anzeigen" runat="server" /></td>
> 
>         </tr>
> 
>     </ItemTemplate>
> 
>     </asp:ListView> 
> ```

Button 有一个 onClick= "..." 参数，但是我如何为此创建一个事件以及如何使用正确的会话信息传输到另一个 WebForm。我想我必须使用 Line 中的索引：/

我需要帮助 ：（

塔拉索夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T11:26:58.853

在你的 aspx 中试试这个

```
<asp:Button ID="Button1" OnCommand="Button1_Command" CommandArgument='<%# eval("ID") %>' CommandName="Anzeigen" runat="server" Text="Button" /> 
```

在你身后的代码中

```
 protected void Button1_Command(object sender, CommandEventArgs e)
    {
        if (e.CommandName == "Anzeigen")
        {
            string sID = e.CommandArgument.ToString();
            int id = 0;
            int.TryParse(sID, out id);

            if (id > 0)
            { 
             // do stuff
            }
        }
    } 
```

# php - 在数组循环中使用描述性键

> ID：11578277
> 
> 赞同：0
> 
> 时间：2012-07-20T11:19:06.113
> 
> 标签：php, arrays

想象一下，您必须查询数据库才能检索一些数据（在此示例中为姓名和年龄）：

```
while ($submission = db_fetch_array($submissions)) {
  $data[] = $submission['data'];
} 
```

因此 $data 数组的结果转储将类似于：

```
Array
(
  [0] = "John"
  [1] = "33"
) 
```

如果我想形成描述性键，生成的代码将是：

```
while ($submission = db_fetch_array($submissions)) {
  $data[] = $submission['data'];
}

$data['name'] = $data[0];
$data['age'] = $data[1]; 
```

现在，如果我的数组中不是只有两个字段，而是有 10 个或更多字段，这在我看来有点多余。

有没有更合乎逻辑的方法来做到这一点？

注意： db_fetch_array 它是一个 Drupal 抽象，以便将查询作为数组获取

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T11:23:44.780

现在不要，`db_*()`应该是什么，但我建议直接从数据库中获取数组作为关联数组

```
while ($row = $stmt->fetch(PDO::FETCH_ASSOC)) {
  $data[] = $row;
} 
```

这会产生一个关联数组的数组，其中内部关联数组的键是列的名称。

[http://php.net/pdostatement.fetch](http://php.net/pdostatement.fetch)

# html - CSS 中的规范化到底是做什么的？

> ID：11578280
> 
> 赞同：12
> 
> 时间：2012-07-20T11:19:13.453
> 
> 标签：html, css, normalization, jsfiddle, normalize-css

我在 JSFiddle 上尝试了一些带有 HTML 中无序列表的代码，我很生气地发现其中的项目符号`<ul>`不会无缘无故地显示。在我的代码上尝试不同的东西时，我终于意识到我需要取消选中 jsfiddle 页面上的“规范化 css”选项。

在那之后，我用谷歌搜索了它实际上是什么，并从 W3C.org阅读[了这个页面。](http://www.w3.org/International/questions/qa-html-css-normalization)这个页面只讨论变音符号和口音，我明白了。但是为什么没有在检查规范化 css 选项的情况下显示项目符号？如果您选择该选项，还会影响哪些其他事项？

谢谢你进来看看。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-20T11:23:18.857

规范化 css 试图在呈现 html 元素时消除浏览器之间的差异。许多浏览器都有“预先设置”：元素`p`有`h`垂直边距，列表也有一些边距和填充。`em`并且`strong`标签有粗体字重。

所有这些预先设置都被重置，以便您在所有浏览器中拥有一致的工作基础。

JSFiddles normalize.css 看起来像这样：

```
body,div,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,form,fieldset,input,textarea,p,blockquote,th,td { 
    margin:0;
    padding:0;
}
table {
    border-collapse:collapse;
    border-spacing:0;
}
fieldset,img { 
    border:0;
}
address,caption,cite,code,dfn,em,strong,th,var {
    font-style:normal;
    font-weight:normal;
}
ol,ul {
    list-style:none;
}
caption,th {
    text-align:left;
}
h1,h2,h3,h4,h5,h6 {
    font-size:100%;
    font-weight:normal;
}
q:before,q:after {
    content:'';
}
abbr,acronym { border:0;} 
```

规范化 css 的意义值得商榷，因为您必须在样式表中手动重新声明每种样式（即使是那些有意义的预设，例如浏览器平等对待`font-weight`的`em`和标签上的简单设置）。`strong`

我使用了[Eric Meyer 的 reset](http://meyerweb.com/eric/tools/css/reset/)有一段时间，但停止使用它，因为它重置了太多需要再次重新声明的样式。IMO 不值得。

对于真正好的**样式规范器**，请查看[http://html5boilerplate.com/](http://html5boilerplate.com/)中的 style.css 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T11:24:43.943

*Normalize.css*是一个众所周知的*重置样式表*，用于在浏览器之间对齐一些基本样式，以设置为开发的共同点。

一些开发人员发现它是多余的，或者可能更喜欢使用他们自己的重置样式表。许多现成的重置脚本可用，其中有著名[的 Eric Mayer 的 reset.css](http://meyerweb.com/eric/tools/css/reset/)（被[BluePrint](http://www.blueprintcss.org/)使用）和[YUI2 的 stylesheet](http://developer.yahoo.com/yui/reset/)。

另请参阅[SO 上关于最佳 CSS 重置](https://stackoverflow.com/questions/116754/best-css-reset)和重置样式表的[最佳集合的帖子。](http://www.cssreset.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T13:09:53.657

在 jsfiddle 中使用的意义上的“规范化”意味着应用一组旨在清理事物的 CSS 规则。它通常被称为“CSS 重置”，这是一种有争议的技术。重要的是要意识到，当覆盖浏览器默认值时，它也可能会覆盖从 Web 诞生之初就存在的默认呈现，例如默认的顶部和底部边距以及`ul`元素的一些缩进 - 以及默认的列表标记（项目符号） . 这取决于特定的“规范化”样式表使用，以及它的侵略性。

提到的 W3C 页面上描述的规范化与此无关。它处理字符的 Unicode 规范化，在字符级别发生的事情（当它发生时），一个相对理论的问题。

# ruby-on-rails-3 - 设计返回 401 Unauthorized for delete 操作

> ID：11578281
> 
> 赞同：0
> 
> 时间：2012-07-20T11:19:14.203
> 
> 标签：ruby-on-rails-3, devise

在我看来，我有一个删除操作的链接，如下所示：

```
<%= link_to 'Destroy', powersaving, :method => :delete, :data => { :confirm => 'Are you sure?' } %> 
```

在我的控制器中，我有 before_filter

```
before_filter :authenticate_user!, :only => [:index, :show, :show_details, :destroy] 
```

我也试过这样：

```
before_filter :authenticate_user!, :except => [:new, :create] 
```

在删除操作中

```
def destroy
    if current_user.admin?
      @powersaving = Powersaving.find(params[:id]) 
      @powersaving.destroy  
    end

    respond_to do |format|
      format.html { redirect_to powersavings_url }
      format.json { head :no_content }
    end
  end 
```

当我单击“删除”链接时，它显示“您确定吗？” 弹出窗口，点击 OK 进入 Devise 的登录页面。如果当前用户以“管理员”身份登录，我需要提供启用删除操作。我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-03-15T09:24:57.277

添加

`<%= csrf_meta_tag %>`

给你的`application.html.erb`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-20T12:27:20.213

事情是。除您的应用程序之外的所有 HTTP 方法都`GET`必须向服务器发送 CSRF 真实性令牌。
避免此问题的一种方法是进入`application_controller.rb`并注释该行`protect_from_forgery`。这只是使其立即工作的一种方法，因为不建议在没有 CSRF 检查的情况下离开您的应用程序。
稍后，您可以找到一种方法，在没有表单的情况下不检查链接和自定义操作上的 CSRF 令牌。

# javascript - currentTime 是否介于 18:00 和 2:00 之间

> ID：11578284
> 
> 赞同：5
> 
> 时间：2012-07-20T11:19:39.053
> 
> 标签：javascript, jquery, time

我有一个动态开盘和关盘时间的酒吧时间表，我必须计算 currentTime 是否在今天的开盘时间内。

问题是开放和关闭时间不在同一天。如何计算 currentTime 是否在多天的特定时间范围内？

我在这个项目上使用 jquery。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T11:24:05.233

如果你使用 new Date().getTime(); 这将返回自特定时间以来的毫秒数（这恰好是 1970 年 1 月 1 日）。

如果您对开始和结束时间以及当前时间都这样做，如果您的当前时间介于开始和结束之间，那么它将大于开始毫秒并且小于结束毫秒。

只是一个注释，而不是`Date().getTime();`你可以真正做到这一点，因为`+new Date;`我从浏览网络中学到了一些东西。谷歌再次获胜:)。这是因为 + 本质上将日期转换为 int。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T11:34:43.160

您可以使用 javascripts 日期对象来计算它，例如：

```
var start = new Date(2012,6,20,13).getTime();
var now = new Date().getTime();
var end = new Date(2012,6,21,2).getTime();

if( (start < now ) && (now < end )) {
  console.log("opened");
}
else {
 console.log("closed");
} 
```

输出将打开到明天凌晨 2 点，然后输出关闭。

您可以查看此[JSBin 示例](http://jsbin.com/inuboh/edit#javascript)并更改开始时间以查看其变化情况

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T11:29:24.797

老实说，我对jquery一无所知，因此只能提供一般性建议。

订单是否“固定”？如：第一场总是开放时间，第二场总是关闭时间？

如果是这样，答案相当简单……当字段二小于字段一时，添加一个“特殊情况”。而不是检查 'timestamp > openTime && timestamp < closeTime' 检查：

```
if(timestamp > openTime && timestamp <= Midnight || timestamp >= 0 && timestamp < closing time) {
     //Open/Close time
} 
```

这有帮助吗？

更完整的代码示例可能是：

```
if((closeTime > openTime && timestamp > openTime && timestamp < closeTime) || //Normal time
(timestamp > openTime && timestamp < 86399) || //Before Midnight
(timestamp > 0 && timestamp < closeTime)) {    //After Midnight
    //Do Stuff
} 
```

'closeTime' 你必须确保你总是检查正确的工作日，就像乔恩泰勒已经说过的那样......但老实说，你可能最好使用他的解决方案。

或者，您必须检查，假设您的一天时间是在午夜之后......并且在这个工作日的开放时间之前，如果此规则适用于前一天的关闭时间。

只是为了在代码中澄清这一点：

```
if(timestamp < openTime && openTimePrevDay > closeTimePrevDay && timestamp > closeTimePrevDay) {
    //Bar is open
} 
```

明白我的意思吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T11:32:51.577

如果收盘时间在开盘时间之前，它跨越了一天，你必须以不同的方式确定它：

```
if (closingTime >= openingTime) {
    // Open during the day
    return currentTime >= openingTime && currentTime < closingTime;
} else {
    // Open across midnight
    return currentTime >= openingTime || currentTime < closingTime;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T11:33:19.553

你可以看看[MomentJS](http://momentjs.com)库。它为日期和时间处理提供了一个很好的 API。

# c# - log4net AdoNetAppender 在 Application_Start() 中不起作用

> ID：11578291
> 
> 赞同：3
> 
> 时间：2012-07-20T11:20:27.243
> 
> 标签：c#, asp.net, oracle11g, log4net

有一个 asp.net，dot net 4 web 应用程序，使用 log4net 进行日志记录。我们记录到 Windows 事件日志和 Oracle 11g 表。除了 Application_Start 之外，我们可以在任何地方登录到 oracle 表。真正令人讨厌的事情？它默默地失败了。打开控制台日志记录，并重定向到一个文件，我们开始记录之前的最后一个条目是“Added appender named [AdoNetAppender] to logger [root]”。Repository.Configured（对于 log4net-default-repository）此时对于所有记录器都是 true。颠倒配置文件中附加程序出现的顺序无效。

**配置文件的 log4net 部分：**

```
<log4net debug="true"> <!-- log4net.Internal.Debug set to true in appSettings, System.Diagnostics.Trace is output to file.>
    <appender name="EventLogAppender" type="log4net.Appender.EventLogAppender">
        <param name="LogName" value="AppLog" />
        <param name="ApplicationName" value="AppName" />
        <!-- Only log warnings and errors. Levels are ALL, DEBUG, INFO, WARN, ERROR, FATAL, OFF -->
        <threshold value="INFO" />
        <layout type="log4net.Layout.PatternLayout">
            <conversionPattern value="%utcdate{MM/dd/yyyy HH:mm:ss} [%property{log4net:HostName}] %-5level WEBUI[%logger] [%u]  %message%newline" />
        </layout>
    </appender>

    <appender name="AdoNetAppender" type="Logging.CustomAdoNetAppender, Logging">  <!-- So it can find the custom appender-->          
        <ConnectionStringName value="Database"/>
        <connectionType value="System.Data.OracleClient.OracleConnection, System.Data.OracleClient, Version=4.0.0.0, Culture=neutral,  PublicKeyToken=b77a5c561934e089" />            
        <bufferSize value="1"/><!--This is the number of log entries, not the size in bytes... "1" sets to no buffering -->
        <commandText value="audit_tracking.Add_log" />
        <commandType value="StoredProcedure" />            
        <parameter>
            <parameterName value="I_Thread" />                
            <dbType value="AnsiString" /> <!--AnsiString is VarChar.  "String" will assume NVarChar -->
            <size value="255" />
            <layout type="log4net.Layout.PatternLayout">
                <conversionPattern value="%thread"></conversionPattern> 
            </layout>
        </parameter>

        <parameter>
            <parameterName value="I_Log_Level" />
            <dbType value="AnsiString" />
            <size value="225" />
            <layout type="log4net.Layout.PatternLayout">
                <conversionPattern value="%level"/>
            </layout>
        </parameter>

        <parameter>
            <parameterName value="I_Logger" />
            <dbType value="AnsiString" />
            <size value="225" />
            <layout type="log4net.Layout.PatternLayout">
                <conversionPattern value="%logger"/>
            </layout>
        </parameter>

        <parameter>
            <parameterName value="I_Message" />
            <dbType value="AnsiString" />
            <size value="4000" />
            <layout type="log4net.Layout.PatternLayout">
                <conversionPattern value="%message"/>
            </layout>
        </parameter>

        <parameter>
            <parameterName value="I_Exception_Str" />
            <dbType value="AnsiString" />
            <size value="4000" />
            <layout type="log4net.Layout.PatternLayout">
                <conversionPattern value="%exception"/>
            </layout>
        </parameter>

        <parameter>
            <parameterName value="I_Server_Name" />
            <dbType value="AnsiString" />
            <size value="255" />
            <layout type="log4net.Layout.PatternLayout">
                <conversionPattern value="%property{log4net:HostName}"/>
            </layout>
        </parameter>

        <parameter>
            <parameterName value="I_User_Name" />
            <dbType value="AnsiString" />
            <size value="255" />
            <layout type="log4net.Layout.PatternLayout">
                <conversionPattern value="%property{UserName}"/>
            </layout>
        </parameter>

        <parameter>
            <parameterName value="I_User_Id" />
            <dbType value="Int64" />                
            <layout type="log4net.Layout.PatternLayout">
                <conversionPattern value="%property{UserId}"/>
            </layout>
        </parameter>
    </appender>

    <root>
        <level value="DEBUG" />
        <appender-ref ref="EventLogAppender" />            
        <appender-ref ref="AdoNetAppender" />  
    </root>
</log4net> 
```

**C#部分：**

```
protected void Application_Start(object sender, EventArgs e)
    {

    read_init_data();//reads some init data from the db and caches it <-- this works, btw.

        //log4net.Config.XmlConfigurator.Configure();//not needed since we config in AssemblyInfo.cs
        log4net.GlobalContext.Properties["UserName"] = "";//HttpContext.Current.User.Identity.Name does not exist yet
        log4net.GlobalContext.Properties["UserId"] = "0";//so we can't get a user id, either...
        log4net.ILog logger = log4net.LogManager.GetLogger("Global");

        logger.Info("Application Start");//logs to event log but not to db...        

    }

    protected void Session_Start(object sender, EventArgs e)
    {

    ulong UserId=GetUserId(HttpContext.Current.User.Identity.Name);//db call to get user id. 

        //log4net.Config.XmlConfigurator.Configure();//not needed since we config in AssemblyInfo.cs
        log4net.GlobalContext.Properties["UserName"] = HttpContext.Current.User.Identity.Name;
        log4net.GlobalContext.Properties["UserId"] = UserId;
        log4net.ILog logger = log4net.LogManager.GetLogger("Global");

        logger.Info("Session_Start");//logs to event log and db    

}

public class CustomAdoNetAppender : AdoNetAppender
    {
        public string ConnectionStringName
        {
            set { ConnectionString = ConfigurationManager.ConnectionStrings[value].ToString(); }
        }
    } 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T12:52:25.010

当您询问 dba 是否有任何约束或触发器在您输入空字符串时可能触发，并且他们向您保证没有，并且似乎没有其他合理的解释，请站在他们的立方体中再次询问他们。让他们给你看。

刚收到一封电子邮件，通知我他们向我保证不存在的约束确实存在......

为什么不抛出异常我仍然不知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T11:29:03.470

尝试在 Visual Studio 中打开所有异常的中断，以查看 log4net 中是否抛出异常，它会捕获并吞下它，但可能会告诉你原因。

过去，当由于数据库用户的登录错误而没有登录到数据库时，这对我有所帮助。

# object - 三.js 对象旋转

> ID：11578295
> 
> 赞同：0
> 
> 时间：2012-07-20T11:20:51.860
> 
> 标签：object, rotation, center, three.js

我是法国开发者，很抱歉我的英语。

我需要在地面上放置一些物体，用户可以旋转和移动它们。我制作了一个允许在场上镜像对象的功能。为此，我必须旋转镜像对象以适应该功能，我看到我用 Solidworks 设计的一些对象然后导出为 STL，然后导出为 OBJ，最后用 convert_obj_three.py 导出，不要从那里旋转中心（重心）。

那么，我怎样才能使这项工作？[您可以在http://spyshare.fr/three](http://spyshare.fr/three)上看到此代码运行。尝试通过右键单击场景添加“MiniM”并使用“R”键旋转它。

感谢您做的伟大工作 ;）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:16:14.090

我发现了我的错误。当我在 Solidworks 上设计我的对象时，我没有围绕轴构建它们，所以在我的 .js 文件中，顶点坐标不在 0,0,0 左右。

# objective-c - 更改 iOS 中的应用程序语言设置而不是整个设备

> ID：11578298
> 
> 赞同：6
> 
> 时间：2012-07-20T11:21:11.760
> 
> 标签：objective-c, xcode, ios5

我想在我的应用程序中有一个选项来更改我的应用程序语言**（只是应用程序语言而不是整个系统）**，你能给我一些提示吗？

提前致谢，

我知道本地化！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T11:41:32.770

您可以通过使用从 Xcode 设置的自定义构建标志来执行此操作。这样，您可以在本地化下运行应用程序，而不是更改设备的所有设置。

[我在http://abizern.org/2012/03/18/simple-localisation-testing/](http://abizern.org/2012/03/18/simple-localisation-testing/)上写了一篇关于它的博客文章

Github 上有一个示例项目，您可以使用它来查看它的实际效果：[https ://github.com/Abizern/SimpleLocalisationTesting](https://github.com/Abizern/SimpleLocalisationTesting)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T11:38:37.897

我已经制作了由 .plist 制作的自定义本地化，其中充满了字典数组。像这样：

```
kYes
  en = @"Yes"
  ru = @"Да"
kNo
  en = @"No"
  ru = @"Нет" 
```

在我的项目中，我制作了一个单例类来读取这些字符串。在选项中，用户选择所需的语言（首先启动应用程序从当前系统状态中选择语言或设置默认语言）。选择的语言必须保存在文件或设置中，以便下次启动时使用。在单例中，我有`+getStringWithKey:`. 所以我通过@"kYes" 并获取仅适用于应用程序的当前本地化字符串。此外，无论如何，您都需要将标准本地化文件添加到项目中，即使是空的，因为如果您不这样做，您支持的所有语言都不会在 iTunes 中显示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T09:26:43.283

我实际上在考虑如何更改应用程序 ui 中的语言的另一个想法，尽管它迫使您 1\. 手动设置所有字符串 a 2\. 提供一种方法（通知），当语言设置发生更改时更新所有 ui 元素。这个想法基于 iOS 用来查找字符串的本地化版本的相同方法。因此，作为先决条件，您必须提供具有文件夹结构 language_id.lproj 的包（例如 AppNameStrings.bundle），其中 language_id 是您要提供的语言的指示符。您可以通过创建设置包来创建这样的包，在 Finder 中打开它并删除 root.plist 文件。接下来，您需要一个可用于从包中读取的函数。这是我用来读取本地化字符串的 2 种方法。将以下方法放入 GlobalDefinitions.h 文件中

```
#ifdef __OBJC__  
NSBundle *yourNameBundle(void);
NSString *YourNameLocalized(NSString *stringToken, NSString *language);
#endif 
```

以及 GlobalDefinitions.m 文件中的代码

```
NSBundle *yourNameBundle(void) {
static NSBundle* bundle = nil;
  if (!bundle) {
    NSString* path = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"YouNameBundle.bundle"];
    bundle = [NSBundle bundleWithPath:path];
  }
   return bundle;
}
NSString *YourNameLocalized(NSString *stringToken, NSString *language) {
  if (yourNameBundle()) {
    return [yourBundle localizedStringForKey:stringToken value:@"" table:@"Root" language:language];
  } else {
    return stringToken;
  }
} 
```

您必须在 NSBundle 上创建一个类别

```
[yourBundle localizedStringForKey:stringToken value:@"" table:@"Root" language:language] 
```

因为标准方法缺少语言参数。在您的方法中，您打开相应的 language.lproj/Root.strings 文件并扫描它以查找 stringToken。如果找不到它，则返回令牌本身，否则返回文本字符串。每当您需要某些文本的本地化版本时，您都会编写例如 label.text = YourNameLocalized(@"Token", [self provideLanguageIdentifier); 你就完成了。到目前为止我还没有这样做，但它应该可以工作。

# javascript - 为什么backbone.js model.save() 会改变属性哈希？

> ID：11578299
> 
> 赞同：4
> 
> 时间：2012-07-20T11:21:12.130
> 
> 标签：javascript, backbone.js

我在我的代码中做这样的事情：

```
data_hash = {};
data_hash['some_model_key'] = 'A';
console.log(data_hash['some_model_key']); /* prints A */
model.save(data_hash,{
    wait:true,
    success:function(){
        console.log(data_hash['some_model_key']); /* prints B */
    }
}); 
```

我知道如果服务器更改了模型的状态并且我正在设置，`wait:true`那么我的主干模型应该收到新值。但是为什么我的属性哈希被改变了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T17:07:09.737

## 为什么 Backbone 会改变你的对象

如果您查看带[注释的源代码](http://documentcloud.github.com/backbone/docs/backbone.html#section-57)，您会注意到在`wait:true`选项的情况下，成功回调使用服务器属性扩展 attr 对象。

```
 if (options.wait) {
      delete options.wait;
      serverAttrs = _.extend(attrs || {}, serverAttrs);
    } 
```

并且根据Underscore [doc](http://underscorejs.org/#extend)， _.extend 将源对象中的所有属性复制到目标对象，覆盖任何先前定义的属性。为什么它是选择的行为是一个猜测，但我怀疑它是让所有引用与模型的“真实”状态保持同步。或者这是一个无法预料的副作用。

请注意，您传递给的第一个对象应该`model.save`是您希望在模型上设置的属性，作为保存过程的一部分。从[骨干文档](http://backbonejs.org/#Model-save)

> **save** *model.save([attributes], [options])*
> 属性散列（如集合）应该包含你想要改变的属性——没有提到的键不会被改变——但是，一个完整的表示资源将被发送到服务器。

## 你可以做些什么来保持你的对象不受影响

将对象的克隆传递给`model.save`：

```
model.save(_.clone(data_hash), ...) 
```

注意：您不需要`wait:true`为模型选择从服务器接收值的选项，`model.set`将始终使用新值调用。

# javascript - 如何在jquery mobile的中心制作可折叠项目的标题

> ID：11578300
> 
> 赞同：0
> 
> 时间：2012-07-20T11:21:17.087
> 
> 标签：javascript, jquery, jquery-mobile

我有以下 jsfiddle [http://jsfiddle.net/coderslay/Z78Gz/](http://jsfiddle.net/coderslay/Z78Gz/)

在这个标题（“摘要”）在左边......即使我尝试将它对齐在中心它在左边......。如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T11:25:31.203

如果要对齐“摘要”文本，则必须使用此 css 样式：

```
h2 .ui-btn-inner {
    text-align: center;
} 
```

# c# - 记录实例数据

> ID：11578301
> 
> 赞同：0
> 
> 时间：2012-07-20T11:21:18.070
> 
> 标签：c#, c#-4.0

我在想我应该在`ActionExecutingContext`实例的异常中包含哪些字段，我认为有一个助手会不会很好，它会产生实例数据的可读文本表示？

我知道，我不会在所有情况下都是完美的 - 我的意思是它可能太深了，它可能不会输出默认情况下需要的所有内容，但在许多情况下它会比没有任何数据的异常消息更好。

有没有人写过这样的东西，在任何开源项目中看到过？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T11:27:45.427

您可以使用反射轻松获取对象的所有属性的值：

```
public static void LogPublicProperties(object obj)
{
    foreach (var propertyInfo in d.GetType().GetProperties())
        Console.WriteLine("{0} = {1}",
            propertyInfo.Name,
            propertyInfo.GetValue(d, null));
} 
```

如果要记录字段，请使用`Type.GetFields()`而不是`GetProperties()`.

# iphone - Cocos3d 和增强现实

> ID：11578304
> 
> 赞同：3
> 
> 时间：2012-07-20T11:21:30.860
> 
> 标签：iphone, camera, augmented-reality, cocos3d

我想在我的 iPhone 应用程序中添加来自 cocos3d 的 3D 对象作为增强现实的相机叠加层。我有一些模型的 CC3Scene。我创建了motionManager捕获以获取有关设备摄像头方向的信息，然后在 -(void)update:(ccTime)dt 我尝试更新 cocos3d 场景内摄像头的位置（场景的向上方向是 Z 轴） ：

```
-(void) update:(ccTime)dt
{
    CMDeviceMotion *currentDeviceMotion = motionManager.deviceMotion;
    CMAttitude *currentAttitude = currentDeviceMotion.attitude;

    CC3Camera *cam = (CC3Camera*)[cc3Scene getNodeNamed:@"Camera"];

    static double lastY = 0;
    static double lastP = 0;
    static double lastR = 0;

    double yaw = CC_RADIANS_TO_DEGREES(currentAttitude.yaw-lastY);
    double pitch = CC_RADIANS_TO_DEGREES(currentAttitude.pitch-lastP);
    double roll = CC_RADIANS_TO_DEGREES(currentAttitude.roll-lastR);

    CC3Vector fd = cc3v(0,1,0);
    [cam rotateByAngle:roll aroundAxis:fd];

    CC3Vector rp = cc3v(1,0,0);
    [cam rotateByAngle:pitch aroundAxis:rp];

    CC3Vector up = cc3v(0,0,1);
    [cam rotateByAngle:yaw aroundAxis:up];

lastY = currentAttitude.yaw;
lastP = currentAttitude.pitch;
lastR = currentAttitude.roll;

[super update:dt];
} 
```

我无法直接使用 cam.rotation = cc3v(pitch, roll, yaw) 因为 cocos 中的旋转顺序（使用我当前的轴）与设备中的旋转顺序不匹配。但是我的代码也不能正常工作。手动旋转相机时出错，我不知道应该如何旋转它以使其正确（我已经尝试了几乎所有顺序和轴的组合）。

所以问题是如何匹配 cocos 的相机旋转和设备的旋转？我错过了什么吗？或者您能否提供包含此类主题的代码或教程项目？我知道这是一个相当简单的问题，因为只有三角函数，但我试图做到这一点让我大吃一惊。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T11:42:24.880

完成该代码，工作正常

```
-(CC3Vector4)multiplyQuaternion:(CC3Vector4)q2 onAxis:(CC3Vector4)axis byDegress:(float)degrees{

  CC3Vector4 q1;

  q1.x = axis.x;
  q1.y = axis.y;
  q1.z = axis.z;

  // Converts the angle in degrees to radians.
  float radians = CC_DEGREES_TO_RADIANS(degrees);

  // Finds the sin and cosine for the half angle.
  float sin = sinf(radians * 0.5);
  float cos = cosf(radians * 0.5);

  // Formula to construct a new Quaternion based on direction and angle.
  q1.w = cos;
  q1.x = q1.x * sin;
  q1.y = q1.y * sin;
  q1.z = q1.z * sin;

  // Multiply quaternion, q1 x q2 is not equal to q2 x q1

  CC3Vector4 newQ;
  newQ.w = q1.w * q2.w - q1.x * q2.x - q1.y * q2.y - q1.z * q2.z;
  newQ.x = q1.w * q2.x + q1.x * q2.w + q1.y * q2.z - q1.z * q2.y;
  newQ.y = q1.w * q2.y - q1.x * q2.z + q1.y * q2.w + q1.z * q2.x;
  newQ.z = q1.w * q2.z + q1.x * q2.y - q1.y * q2.x + q1.z * q2.w;

  return  newQ;
}

-(void)updateCameraFromMotion:(CMDeviceMotion *)deviceMotion {

  CMAttitude  * attitude    = deviceMotion.attitude;
  CMQuaternion  quaternion  = attitude.quaternion;
  CC3Vector4    camQuaternion;
  camQuaternion.w =  quaternion.w;
  camQuaternion.x = -quaternion.x;
  camQuaternion.y = -quaternion.z;
  camQuaternion.z =  quaternion.y;
  camQuaternion   = [self multiplyQuaternion:camQuaternion onAxis:CC3Vector4Make(1, 0, 0, 0) byDegress:90];
  self.activeCamera.quaternion = camQuaternion;  

} 
```

请注意，开始时相机的 forwardDirection 很重要，我将其设置为 (1,0,0)

# ios - 如何在 iOS 上的 OpenGL 中使用 fbx 文件？

> ID：11578305
> 
> 赞同：2
> 
> 时间：2012-07-20T11:21:37.163
> 
> 标签：ios, opengl-es, fbx

有没有常用的库？如果一切都失败了，我会自己写一些东西来导入文件，它们看起来并不太复杂，但我想知道是否有更简单的方法，比如开源项目之类的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-24T16:37:39.120

只需使用 Autodesk 提供的 FBX SDK。它支持 iOS，因为现在有几个版本。

# iphone - 我可以在显示 MFMessageComposeViewController UI 视图的同时向多个收件人发送多条短信吗

> ID：11578306
> 
> 赞同：0
> 
> 时间：2012-07-20T11:21:40.043
> 
> 标签：iphone, sms, message, mfmailcomposeviewcontroller, ios5

在我的 iPhone 应用程序中，我想发送测试消息 - 用户需要能够选择多个联系人并同时向每个联系人发送文本？表示具有多个短信正文的多个收件人并同时发送。可以在 MFMessageComposeViewController 的帮助下实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T12:15:29.803

# php - 如何阻止特定屏幕尺寸的网站？

> ID：11578309
> 
> 赞同：0
> 
> 时间：2012-07-20T11:22:02.410
> 
> 标签：php, javascript

我的网站不适用于小于 10" 的显示器。如何确定屏幕尺寸以阻止访问分辨率低于 10" 的网站？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T11:26:44.810

计算机可以并且必须知道它正在显示的*分辨率（以像素为单位）。*然后，此分辨率的图像通过电缆发送到另一个物理显示它的设备。这可能是一个微小的 LCD 屏幕或一个巨大的投影仪。无论哪种方式，物理屏幕/显示尺寸完全独立于屏幕分辨率。计算机不知道输出的最终物理大小，尤其是 Javascript/CSS。

换句话说：您无法检测到“10 英寸”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T22:55:39.963

创建一个`.style.width`以英寸为单位定义的元素，然后测量它`.width`（以像素为单位）以计算出屏幕的 DPI。然后，您只需要使用[该`screen`对象](https://developer.mozilla.org/en/DOM/window.screen)来计算屏幕的对角线大小并根据需要阻止用户。

```
var el = document.createElement("div");
el.style.width = "100in";
document.body.appendChild(el);

var dpi = el.clientWidth / 100;
var screenSizeIn = Math.sqrt(screen.width * screen.width +
                             screen.height * screen.height) / dpi;

console.log("Screen size is " + screenSizeIn + " inches.");

document.body.removeChild(el);

if (screenSizeIn < 10) {
  window.location = "/blocked.html";
} 
```

如果设备不知道一英寸*实际上*有多大（很多人不知道），那么您就不走运了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T11:27:46.837

您无法检测到用户的屏幕尺寸。您唯一可用的（并且很容易被欺骗）是以像素为单位的显示分辨率。

要仅在您的内容超过 XYZ px 空间时应用样式表，我建议使用[`width`媒体查询](http://www.w3.org/TR/css3-mediaqueries/#width)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T11:28:03.493

您可以使用 CSS 媒体查询来做到这一点，隐藏您网站的所有内容并向被阻止的人显示消息。

```
@media only screen 
and (max-width : YOURWIDTHpx) {
/* Styles */
 YOUR MESSAGE CONTAINER
} 
```

尽管向这些人展示一些有用的东西而不是把他们都屏蔽起来是有意义的。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-20T11:25:13.183

用于检查分辨率。

在 JavaScript 中：

```
if(screen.height < 600 || screen.width < 800)
{
    // Do something to block. i.e. redirect to specific page
} 
```

# python - 如何更改 django 日期时间格式输出？

> ID：11578311
> 
> 赞同：15
> 
> 时间：2012-07-20T11:22:06.603
> 
> 标签：python, django, django-templates

我有一个日期时间对象。这是我的模板文件：

```
<ul>
<li>{{ sale.validity }}</li>
</ul> 
```

我得到的输出格式为：

> 2012 年 7 月 18 日，午夜

我真的很想将输出更改为格式的数字：日-月-年，因此例如上面将更改为：

> 18-07-2012

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-07-20T11:23:28.577

根据[Django 文档](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#date)，您可以使用`date`过滤器来格式化日期：

```
{{ sale.validity|date:"d-m-Y"}} 
```

此外，如果为 False ，您还可以设置[DATE_FORMAT](https://docs.djangoproject.com/en/1.9/ref/settings/#date-format)（或 DATETIME_FORMAT）设置以设置项目范围的默认值以显示此类值。`USE_L10N`如果这是真的，你会想看看这个[关于格式本地化的文档](https://docs.djangoproject.com/en/1.9/topics/i18n/formatting/)。

# c++ - 如何使用 c 在 Linux 中获取系统代理设置

> ID：11578312
> 
> 赞同：0
> 
> 时间：2012-07-20T11:22:20.463
> 
> 标签：c++, c, linux

如何使用 c 或 c++ 在 linux 中读取系统代理设置值

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T11:28:06.140

你正在寻找这个功能`getenv ("http_proxy")`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T11:28:41.383

系统代理设置通常存储在环境变量中，如 HTTP_PROXY、HTTPS_PROXY 等。

`envp`'C' 允许我们通过向main() 函数添加额外参数来读取注册变量，如图所示。

```
 int main (int argc, char *argv[], char *envp[])
    {
      char *http_proxy, *https_proxy;
      http_proxy = getenv("HTTP_PROXY");
      https_proxy = getenv("HTTPS_PROXY");
      printf ("Proxy settings :: %s on %s.\n", http_proxy, https_proxy);
      return 0;
    } 
```

这应该根据您要处理的变量来解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T14:09:29.250

我见过的大多数 Linux 发行版都没有“系统代理”的概念。在 Linux 之上运行的桌面环境（KDE、Gnome 等......）通常具有设置代理的配置选项，大多数为该桌面编写的应用程序都可以访问该代理，但如何在其中查找代码将根据您运行的环境而有所不同。此外，在 Gnome 下运行例如 KDE 应用程序（反之亦然）可能不会获得相同的结果，除非两者都已正确配置。由于这一点以及其他一些原因，许多单独的应用程序都有自己的方式来设置代理。适用于某些应用程序的其中一种可能方法是其他答案中提到的环境变量（其他可能性是各种配置文件，或连接到 gconf 等配置服务之一）。如果您正在编写一个新应用程序并且只想能够在该应用程序中设置和使用代理，那么这种方法可能是最简单的方法之一。

# c# - 在代码c#中字典一键多值

> ID：11578318
> 
> 赞同：-2
> 
> 时间：2012-07-20T11:22:52.493
> 
> 标签：c#, dictionary

有

```
Dictionary<string,List<string>> dictionary=new Dictionary<string,List<string>>(); 
```

和

```
var c;

var c returns me values : 
100, "somestring"
100,"someotherstring"
200,"two"

foreach(var d in c)
{
 dict.Add(d.key,d.value);
// Need to add key value pairs here for dictionary. if key is same then values should get concatenated.
}

foreach(keyvaluepair<string,List<string>> pair in dictionary)
{
    // This loop should output something like below...
       100,"somestring,someotherstring"
       200,"two"

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T11:26:18.620

您不能在字典中有重复的键，因此代码`dict.Add(d.key,d.value);`行将引发异常

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T11:28:23.727

不可能，`key` `value`为此目的创建带有字段的自己的类

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T11:36:30.670

用 as 值制作一个字典`List<string>`，然后添加值：

```
foreach(var d in c)
{
  if (!dict.ContainsKey(d.Key))
    dict.Add(d.Key, new List<string>());
  dict[d.Key].Add(d.Value);
} 
```

然后你可以从列表中获取逗号分隔的字符串`string.Join`

```
string commaDelimitedList = string.Join(",", valueList.ToArray()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T11:43:11.507

添加值时，您必须检查键是否存在：

```
if (!dict.ContainsKey(d.key)) {
  dict.Add(d.key, new List<string>());
}
dict[d.Key].Add(d.Value); 
```

输出值时，连接字符串：

```
Console.Write(pair.Key + ", " + String.Join(", ", pair.Value)); 
```

# c# - 属性更新

> ID：11578320
> 
> 赞同：-1
> 
> 时间：2012-07-20T11:23:05.010
> 
> 标签：c#

我创建了一个组件。它有一个用于更改某些属性的设计器表单。我正在更改设计器表单中的一些属性，但更改不适用于 propertygrid 和 Designer.cs 文件，除非移动组件。当我在 Designerform 更改应用 propertygrid 和设计器代码中更改属性时，我必须做什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-20T11:25:27.297

我不确定，但我认为你的类必须实现 INotifyPropertyChanged 接口。在集合中你必须触发这个事件。

正如我所说：我不确定这是否适合你。就试一试吧

# maven - 带有子模块的 Maven POM 依赖管理

> ID：11578322
> 
> 赞同：1
> 
> 时间：2012-07-20T11:23:07.973
> 
> 标签：maven, inheritance, dependencies, pom.xml

我有这两个 pom 文件：

1) 父 pom.xml

...

```
<modules>
    <module>web-module</module>
    <module>interface-module</module>
</modules>
<dependencyManagement>
    <dependencies>
        <dependency>
            <groupId>${project.groupId}.${project.artifactId}</groupId>
            <artifactId>interface-module</artifactId>
            <version>${project.version}</version>
            <type>ejb</type>
            <scope>provided</scope>
        </dependency>
    </dependencies>
 </dependencyManagement> 
```

2) 子 pom.xml

```
<dependencies>
    <dependency>
        <groupId>${project.parent.groupId}.${project.parent.artifactId}</groupId>
        <artifactId>interface-module</artifactId>
        <version>${project.version}</version>
        <type>ejb</type>
    </dependency>
</dependencies> 
```

问题是：

为什么它无法解决由父依赖管理管理的依赖项，而子项中省略了版本？为什么在对从聚合这些模块的父级继承的子模块使用dependencyManagment 时必须指定版本？也许一些建议？

UPD：事实证明，当子项的 groupId 发生更改并且不是从父项继承的那个时，这种行为存在......基本上我有父项的 2 个子模块，它们都是父项的子项。当我更改子模块中的 groupId 时，它要求我在依赖管理期间指定版本，这有点奇怪。任何想法为什么 Maven 会那样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T11:24:17.860

Parent 不会传递给子模块，这意味着您还必须在子模块中声明 Parent。

另外，请注意您在一个模块中做两件事：

*   子模块的聚合和
*   充当指定此模块为父模块的父模块

这通常没问题，但在某些时候，如果您的设置变得更复杂一些，您可能会遇到循环依赖或类似问题。只要您知道问题所在，就应该没问题。

这里有[更多细节](http://maven.apache.org/guides/introduction/introduction-to-the-pom.html#Project_Inheritance_vs_Project_Aggregation)

# javascript - emberjs ember-data 和 jasmine 测试

> ID：11578325
> 
> 赞同：1
> 
> 时间：2012-07-20T11:23:17.443
> 
> 标签：javascript, ember.js, jasmine, ember-data

我正在尝试使用茉莉花测试 DS.Model。我正在尝试测试当我创建记录时它是否正确设置。

当我做

```
bb = App.BuildingBlock.createRecord(name: "Test") 
```

我得到了错误

> 无法读取未定义的属性“createRecord”

但如果我这样做

```
bb = App.BuildingBlock.create(name: "Test") 
```

我明白了

> 错误：您不应该调用`create`模型。相反，请`createRecord`使用您要设置的属性进行调用。

所以它似乎知道它的模型？？？另外，如果我这样做

```
expect(App.BuildingBlock).toBeDefined() 
```

它通过了。

有人帮我解决这个问题吗？

谢谢瑞克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T11:49:25.197

将以下内容添加到规范的顶部

```
store = DS.Store.create({ revision: 4 }) 
```

然后使用

```
store.createRecord(App.BuildingBlock, {name: "Test"}); 
```

您看到的错误的原因是 DS.Model 将 createRecord 别名为商店，这就是未定义的内容。

在[model.js](https://github.com/emberjs/data/blob/master/packages/ember-data/lib/system/model/model.js "模型.js")的底部，您将看到以下几行：

```
DS.Model.reopenClass({
  isLoaded: storeAlias('recordIsLoaded'),
  find: storeAlias('find'),
  filter: storeAlias('filter'),

  _create: DS.Model.create,

  create: function() {
    throw new Ember.Error("You should not call `create` on a model. Instead, call `createRecord` with the attributes you would like to set.");
  },

  createRecord: storeAlias('createRecord')
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T18:13:20.947

您可以尝试为您的问题创建一个 JsFiddle 吗？我认为您第一次调用创建 DS 模型没有任何问题。您不能在 DS 模型上调用 .create() ，这样才有意义，并且您的 DS 模型似乎存在。这些测试是否使用不存在调用 createRecord App 或 BuildingBlock 的两种不同设置运行？您确定您的商店是在您的应用程序（App.store）上定义的并且那里有问题吗？

# java - 优化多个文件的并行处理

> ID：11578326
> 
> 赞同：3
> 
> 时间：2012-07-20T11:23:17.930
> 
> 标签：java, multithreading, parallel-processing, executorservice

我有一个程序处理大量文件，对于每个文件，需要做两件事：首先，读取和处理文件的一部分，然后`MyFileData`存储结果。第一部分可以并行化，第二部分不能。

按顺序做所有事情都非常慢，因为 CPU 必须等待磁盘，然后它会工作一点，然后它发出另一个请求，然后再次等待......

我做了以下

```
class MyCallable implements Callable<MyFileData> {
    MyCallable(File file) {
        this.file = file;
    }
    public MyFileData call() {
        return someSlowOperation(file);
    }
    private final File file;
}

for (File f : files) futures.add(executorService.submit(new MyCallable(f)));
for (Future<MyFileData> f : futures) sequentialOperation(f.get()); 
```

它帮助很大。但是，我想改进两点：

*   以`sequentialOperation`固定顺序执行，而不是首先处理任何可用的结果。我怎样才能改变它？

*   有数千个文件需要处理，启动数千个磁盘请求可能会导致磁盘垃圾。通过使用`Executors.newFixedThreadPool(10)`我限制了这个数字，但是我正在寻找更好的东西。理想情况下，它应该是自调整的，以便在不同的计算机上工作得最佳（例如，当[RAID](http://en.wikipedia.org/wiki/RAID)和/或[NCQ](http://en.wikipedia.org/wiki/Native_Command_Queuing)可用时发出更多请求等）。我不认为它可以基于找出硬件配置，但测量处理速度并基于它进行优化应该*是*可能的。任何的想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T11:34:02.337

> 顺序操作以固定顺序执行，而不是先处理任何可用的结果。我怎样才能改变它？

这正是[CompletionService](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CompletionService.html)所做的：它并行处理任务并在它们完成时返回它们，而不管提交顺序如何。

简化（未测试）示例：

```
int NUM_THREADS = Runtime.getRuntime().availableProcessors();
ExecutorService executor = Executors.newFixedThreadPool(NUM_THREADS);
CompletionService<MyFileData> completionService = new ExecutorCompletionService<MyFileData>(executor);

for (File f : files) futures.add(completionService.submit(new MyCallable(f)));

for(int i = 0; i < futures.size(); i++) {
    Future<MyFileData> next = completionService.take();
    sequentialOperation(next.get());
} 
```

> 有数千个文件需要处理，启动数千个磁盘请求可能会导致磁盘垃圾。通过使用 Executors.newFixedThreadPool(10) 我限制了这个数字，但是我正在寻找更好的东西。

我不是 100% 确定那个。我想这取决于你有多少磁盘，但我认为磁盘访问部分不应该分成太多线程（每个磁盘一个线程可能是明智的）：如果多个线程同时访问一个磁盘，它会花更多的时间寻找而不是阅读。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T12:00:09.347

> 顺序操作以固定顺序执行，而不是先处理任何可用的结果。我怎样才能改变它？

假设：每个`someSlowOperation(file);`呼叫都将花费可变的时间，因此，您希望在`MyFileData`收到它后立即处理，但不要与另一个同时处理`sequentialOperation`。

您可以通过设置生产者/消费者队列来实现这一点。

生产者是`callables`您在示例中执行的，添加了一些位，您可以将结果添加到等待处理的工作队列中。

消费者是`sequentialOperation()`调用 - 它在自己的线程中运行，并且只有一个。这个线程所做的只是获取队列的头部，并处理它，重复直到程序结束。

这样，您可以最大限度地利用机器上的所有资源。

带有一些示例代码的相关帖子：[Producer/Consumer threads using a Queue](https://stackoverflow.com/questions/2332537/producer-consumer-threads-using-a-queue)

编辑：我想你可能想要一个快速的样本，因为它对以前从未做过的人来说非常不透明

```
public class Main {

    private final ExecutorService producerExecutor = Executors.newFixedThreadPool(10);
    private final ExecutorService consumerExecutor = Executors.newFixedThreadPool(1);
    private final LinkedBlockingQueue<MyData> queue = new LinkedBlockingQueue();//or some other impl

    abstract class Producer implements Runnable{
        private final File file;
        Producer(File file) {
            this.file = file;
        }

        public void run() {
            MyData result = someLongAssOperation(file);
            queue.offer(result);
        }

        public abstract void someLongAssOperation(File file);
    }

    abstract class Consumer implements Runnable {
        public void run() {
            while (true) {
                sequentialOperation(queue.take());  
            }
        }

        public abstract void sequentialOperation(MyData data);
    } 

    private void start() {
        consumerExecutor.submit(new Consumer(){
            //implement sequentialOperation here
        });

        for (File f : files) {
            producerExecutor.submit(new Producer(file) {
                //implement the someLongAssOperation()
            });
        }

    }

    public static void main(String[] args) {
        new Main().start();     
    } 

} 
```

# php - 如何使用 Ajax、Javascript 添加页码？

> ID：11578328
> 
> 赞同：0
> 
> 时间：2012-07-20T11:23:18.413
> 
> 标签：php, javascript, jquery

我有一个问题：有一个使用 Jquery (Ajax) 进行异步页面更改和加载的脚本：

```
 $('.page_button').live('click',function() {

            $('#ajaxBusy').show();
            $('.selected_page_button').attr('class','page_button');
            $(this).attr('class','selected_page_button');
            $.post("http://"+document.location.host+"/index.php/welcome/update_records_set/"+this.id,
            function(data)
            {
                if (data != "") 
                {
                    $(".records_content:last").empty();
                    $(".records_content").html(data);           
                }
                $('#ajaxBusy').hide();
            });
        }); 
```

此代码有效，但我还需要为 URL 添加“#page”而不刷新。另外，我使用 CodeIgniter 进行开发，并且某些控制器的此功能会加载页面：

```
public function language_testing($language_code) {
//some actions
} 
```

但是如何从“ `http://some_site/controller/en#5`”中提取页码以加载第五页？有标准的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T11:36:16.657

如果你的意思是你想从 url 获取哈希值，那么你可以这样做：

```
var hassh = window.location.hash;
var hashVal = hassh.substr(1, hassh.length);
console.log( hashVal ); 
```

如果你想从 url 得到它，那么：

```
var url = "http://some_site/controller/en#5".split("#");
console.log( url[1] ); 
```

您可以像这样设置哈希：

```
window.location.hash = "#yourValue"; 
```

你的意思是这样的吗

# android - TextView 多行

> ID：11578329
> 
> 赞同：4
> 
> 时间：2012-07-20T11:23:25.820
> 
> 标签：android, textview

我有一个 TextView，其中填充了从数据库中获取的文本，因此它的长度未定义。

我已经使用 maxline 属性配置了 TextView，并将其值设置为 3，因为我不想要超过 3 行的文本，而且我还使用了 ellipsize 属性。

但它不能正常工作。虽然文本大于 3 行，但它只打印两行。

```
<TextView
    android:id="@+id/etLugar"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/tvLugar"        
    android:layout_marginLeft="15dp"
    android:layout_toRightOf="@+id/tvLugar"
    android:text="A very large text than must be shown in the textview, but no more of three lines are going to be shown"
    android:textColor="@color/foreground1"        
    android:maxLines="3"
    android:ellipsize="end"        
    android:textSize="12dp" 
    /> 
```

我不明白为什么 maxlines 属性不能正常工作。我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-01T18:02:18.370

我想这是由于`android:singleLine="false"`哪个是默认值尝试更改它以`TRUE` 判断它是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-02T06:10:24.787

由于您只有两行的内容较少，因此您编写代码（xml）在字符串中输入更多内容然后尝试它是完美的。

图片![在此处输入图像描述](../Images/07447e3742d0dcb87d4add478ac0587a.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-24T12:38:39.810

我在 2 个 TextView 上遇到了类似的问题，一个应该有 maxLines="2"，另一个应该有 maxLines="4"。

无论我添加什么椭圆大小设置，第一个总是在一行上。第二个无关紧要，文本使用了它需要的行数！

这似乎取决于两个因素：

1.  布局的其他元素
2.  如果设置了 textAppearance 可能会破坏/覆盖此设置或 singleLine 选项

为了解决这个问题，我直接在文本视图上添加了代码：

```
tv1.setMaxLines(2);
tv2.setMaxLines(4); 
```

这就是诀窍。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T11:30:40.600

有同样的问题[Android ellipsize multiline textview](https://stackoverflow.com/questions/2160619/android-ellipsize-multiline-textview)。这是已知的错误，很老，还没有修复。

有人发布了解决方法[Android Textview Multiline Ellipse/](http://code.google.com/p/android-textview-multiline-ellipse/)也许它会帮助你（或其他人）。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-20T11:30:08.930

不要使用该`ellipsize`属性，`android:maxlines="3"`应该可以工作。

# java - 模拟获取 ClassCastException 异常时

> ID：11578334
> 
> 赞同：-1
> 
> 时间：2012-07-20T11:23:30.923
> 
> 标签：java, unit-testing, mockito

我正在为 CardManager.java 类编写单元测试代码，

在执行单元测试代码时，我得到：java.lang.ClassCastException: java.util.LinkedList cannot be cast to java.util.ArrayList

**CardManager.java**

对于下面的行，我编写了单元测试代码的 when 条件。

```
ArrayList arr1= (ArrayList) getPanCardUtil().validatePanCard("" , "" , "" , ""); 
```

**cardManagerTest.java**

```
List<String> abc = new ArrayList<String>();

when(cardManager.validate("" , "" , "" , "").thenReturn(abc); 
```

**验证.java**

```
public List<String> validate("" , "" , "" , ""); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T11:35:49.793

我怀疑这条线

```
ArrayList arr1= (ArrayList) getPanCardUtil().validatePanCard("" , "" , "" , ""); 
```

应该改为

```
List arr1= getPanCardUtil().validatePanCard("" , "" , "" , ""); 
```

在您发布的代码中，没有对 a 的引用，`LinkedList`也没有对 method 的任何其他引用`validatePanCard`，但是如果您同时使用两者，则要避免向下转换，并尽可能将所有内容保持在接口级别。

如果您发布更完整的代码，则有可能找出真正的问题。

此外，告诉我们您使用什么模拟框架可能会有所帮助。我怀疑（仅从语法上）它是 Mockito。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T11:44:35.973

From the code you provide its not clear what the method is cardManager.validate("","","","") is (in cardmanagerTest.java)?

I suspect that you have a method in CardManager.java which implements the method validate of Validate.java

```
public LinkedList<String> validate(String v, String v2, String v3, String v4) {} 
```

And your test case is failing because it doesnt match the return type of this method, but does match the interface definition in validate.java. You should just return a List type.

```
public List<String> validate(String v, String v2, String v3, String v4) {} 
```

# ios - iOS：使用 for-in 循环管理 Dictionray 数据

> ID：11578339
> 
> 赞同：0
> 
> 时间：2012-07-20T11:23:48.153
> 
> 标签：ios, dictionary

我正在使用以下代码浏览 NSMutableDictionary

```
 NSMutableDictionary *item;
        for (item in menuArray) {
            BSThirdLayerViewController *nextLayer = [[BSThirdLayerViewController alloc] initWithStyle:UITableViewStylePlain];
            nextLayer.title = [item valueForKey:@"title"];
            nextLayer.rowImage = [item valueForKey:@"image"];
            [array addObject:nextLayer];
        } 
```

字典是从以下 plist 文件中加载的。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
<key>Item 0</key>
<dict>
    <key>title</key>
    <string>East Coast</string>
</dict>
<key>Item 1</key>
<dict>
    <key>title</key>
    <string>West Coast</string>
</dict>
<key>Item 2</key>
<dict>
    <key>title</key>
    <string>South Rhodes</string>
</dict>
</dict>
</plist> 
```

在 for-in 循环中 item 变量会有什么样的数据？尝试访问时程序崩溃

```
[item valueForKey:@"title"]; 
```

这似乎是合乎逻辑的，但发生了什么？

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T11:32:13.193

plist 似乎定义了一个字典，而不是一个数组。因此，“item”将是一个键（即字符串）、Item 0、Item 1 等。使用该键，您可以使用 NSDictionary *dict = [dictionary objectForKey:item] 向字典询问该键的值;

当您遇到此类问题时，让系统帮助您 - 查看您从 plist 创建的对象中的内容，方法是使用 NSLog() 将其转储到控制台。这将为您节省大量时间，并确认您实际上得到了您想要的。

# asp.net-mvc-3 - asp.net mvc 3 razor 中的报告查看器

> ID：11578340
> 
> 赞同：2
> 
> 时间：2012-07-20T11:23:50.377
> 
> 标签：asp.net-mvc-3, razor, rdlc, report-viewer2010

在我的 MVC3 razor 应用程序中，我使用以下代码进行报告

**控制器**

```
ReportViewer rv = new Microsoft.Reporting.WebForms.ReportViewer();
    rv.ProcessingMode = ProcessingMode.Local;
    rv.LocalReport.ReportPath = Server.MapPath("~/Reports/TestReport.rdlc");
    rv.LocalReport.Refresh();

    byte[] streamBytes = null;
    string mimeType = "";
    string encoding = "";
    string filenameExtension = "";
    string[] streamids = null;
    Warning[] warnings = null;

    streamBytes = rv.LocalReport.Render("RDLC", null, out mimeType, out encoding, out filenameExtension, out streamids, out warnings);

    return File(streamBytes, mimeType, "TestReport.rdlc"); 
```

**ASPX 视图**

```
<div>
        <script runat="server">
            private void Page_Load(object sender, System.EventArgs e)
            {
                ReportViewer1.LocalReport.ReportPath = Server.MapPath("~/Reports/TestReport.rdlc");
                ReportViewer1.LocalReport.Refresh();
            }
        </script>
        <form id="Form1" runat="server" method="get" action="/Pag1/File">
        <asp:ScriptManager ID="ScriptManager1" runat="server">          
        </asp:ScriptManager>
        <rsweb:reportviewer id="ReportViewer1" runat="server" height="500" width="500" AsyncRendering="false"></rsweb:reportviewer>
        </form>        
    </div> 
```

在这里我得到了结果，因为 PDF 需要用 pdfviewer 打开它。我只是想`display the report in viewr`。我是 MVC3 的新手。如果有人知道请分享

上述代码的参考在[这里](https://stackoverflow.com/questions/6144513/how-can-i-use-a-reportviewer-control-in-an-asp-net-mvc-3-razor-view)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T01:44:59.757

下面是我在我的一个站点中使用的 ActionMethod 示例来生成报告：

```
 public ActionResult WeeklyAisleReport(DateTime start, DateTime end)
    {
        var range = new DateRange(start, end);
        var records = _repository.Select(range, "");
        var formattedRecords = AisleProductivityRecord.Generate(records).ToList();

        var localReport = new LocalReport
        {
            ReportPath =
                Server.MapPath("~/Content/Reports/PTLWeeklyProductivity.rdlc")
        };

        var pickRecords = new ReportDataSource("PickRecords",formattedRecords);

        localReport.DataSources.Add(pickRecords);

        const string ReportType = "PDF";
        string mimeType;
        string encoding;
        string fileNameExtension;

        Warning[] warnings;
        string[] streams;

        //Render the report
        byte[] renderedBytes = localReport.Render(
            ReportType,
            null, //deviceInfo,
            out mimeType,
            out encoding,
            out fileNameExtension,
            out streams,
            out warnings);
        Response.AddHeader("content-disposition",
                           "attachment; filename=WeeklyAisleReport-" + start.ToString("yyyy_MM_dd") + "." +
                           fileNameExtension);
        return File(renderedBytes, mimeType);
    } 
```

关于视图，您不能在 MVC 应用程序中使用 WebForms 标记（、等）。您需要创建一个发布到生成 PDF 的 ActionMethod 的表单。

您的 razor 视图文件应如下所示（以我的方法为例）：

```
 @using (Html.BeginForm("WeeklyAisleReport", "PTL"))
   {
       @Html.TextBox("start")
       @Html.TextBox("end")
       <input type="submit" value="View Report"/>
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-17T07:06:13.920

**从工具箱将报表查看器和脚本管理器添加到您的 ASPX 页面。**

```
SizeToReportContent = "true" 
```

> 不要忘记将上述属性添加到您的报告查看器

**然后您的页面如下所示**

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="ReportView.aspx.cs" Inherits="ERP.Reports.ReportView" %>

<%@ Register assembly="Microsoft.ReportViewer.WebForms, Version=11.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91" namespace="Microsoft.Reporting.WebForms" tagprefix="rsweb" %>

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>

        <asp:ScriptManager ID="ScriptManager1" runat="server">
        </asp:ScriptManager>
       <rsweb:ReportViewer ID="ReportViewer1" runat="server" AsyncRendering="true" ShowPrintButton="true" Height="649px" Width="1105px"  SizeToReportContent = "true">

    </rsweb:ReportViewer>

    </div>
        <script>

        </script>
    </form>

</body>
</html> 
```

**在您的 ASPX 代码页中添加此代码**

```
protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            RenderReportModels();
        }
    }
    private void RenderReportModels()
    {

        List<Company> comp = new List<Company>();
        CompanyBAL bal = new CompanyBAL();
        comp = bal.SampleData();//Load Data

        // Clear out any previous data sources.
        this.ReportViewer1.LocalReport.DataSources.Clear();

        // Set report mode for local processing.
        ReportViewer1.ProcessingMode = ProcessingMode.Local;

        // Validate report source.
        var rptPath = Server.MapPath(@"./rdlc/MyReport.rdlc");

        //@"E:\ERP\Reports\rdlc\MyReport.rdlc";

        if (!File.Exists(rptPath))
            return;

        // Set report path.
        this.ReportViewer1.LocalReport.ReportPath = rptPath;

        // Load the dataSource.
        var ds1 = ReportViewer1.LocalReport.GetDataSourceNames();
        ReportViewer1.LocalReport.DataSources.Add(new ReportDataSource(ds1[0], comp));

        // Refresh the ReportViewer.
        ReportViewer1.LocalReport.Refresh();
    } 
```

**添加控制器和相应的视图（cshtml）将以下代码添加到视图页面**

```
<div>
<input type="submit" onclick="return ReportValidationCheck();" name="ShowReport"
       value="Show Report" />
</div>
<iframe id="ifrmReportViewer" frameborder="0" width="1000" height="800" style="overflow:hidden;" scrolling="no"></iframe>

<script>
   function ReportValidationCheck() {
        var url = "../Reports/ReportView.aspx";  //your ASPX page path
        var myframe = document.getElementById("ifrmReportViewer");
        if (myframe !== null) {
            if (myframe.src) {
                myframe.src = url;
            }
            else if (myframe.contentWindow !== null && myframe.contentWindow.location !== null) {
                myframe.contentWindow.location = url;
            }
            else { myframe.setAttribute('src', url); }
        }
    return false;
  }
 </script> 
```

# mvvm-light - 如何为我的所有 ViewModel 强制 Cleanup()

> ID：11578341
> 
> 赞同：6
> 
> 时间：2012-07-20T11:23:54.123
> 
> 标签：mvvm-light

我的 ViewModel 实例化程序退出时必须释放的资源。

### 这在我所有的 ViewModel 中：

```
public class MainViewModel : ViewModelBase
{
    LocalServer Server { get; set; }
    Resource MyResorce { get; set; }

    public MainViewModel(LocalServer server)
    {
        this.Server = server;
        MyResource = new Resource();
    }

    public override void Cleanup()
    {
        if (MyResource != null)
            MyResource.Close();

        MyResource = null;
        base.Cleanup();
    }
} 
```

### 这在 ViewModelLocator

```
public class ViewModelLocator
{
    public ViewModelLocator()
    {
        ServiceLocator.SetLocatorProvider(() => SimpleIoc.Default);
        SimpleIoc.Default.Register<MainViewModel>();
    }

    public MainViewModel MainVM
    {
        get
        {
            return ServiceLocator.Current.GetInstance<MainViewModel>();
        }
    }

    public static void Cleanup()
    {
        // Wrong!! The collection is empty!
        foreach (ViewModelBase vm in ServiceLocator.Current.GetAllInstances<ViewModelBase>() )
            vm.Cleanup();

        SimpleIoc.Default.Unregister<MainViewModel>();

        Messenger.Reset();
    }
} 
```

但我注意到`ServiceLocator.Current.GetAllInstances<MainViewModel>()`，返回给定 ViewModel 的所有实例，但如果我`ServiceLocator.Current.GetAllInstances<ViewModelBase>()`在这个例子中这样问，它返回一个空集合！

那么，是否可以只使用一个 foreach 为我的所有 ViewModel 调用 CleanUp()？

非常感谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-04T14:58:49.240

您将无法一口气做到这一点。原因如下：

在内部，SimpleIoc 对象包含一个实例字典：

```
Dictionary<Type, Dictionary<string, object>> _instancesReDictionary<Type, Dictionary<string, object>> _instancesRegistrygistry 
```

当您调用 GetAllInstances 时，幕后实际发生的是：

```
public IEnumerable<TService> GetAllInstances<TService>()
        {
            var serviceType = typeof(TService);
            return GetAllInstances(serviceType)
                .Select(instance => (TService)instance);
        } 
```

依次调用：

```
public IEnumerable<object> GetAllInstances(Type serviceType)
        {
            lock (_factories)
            {
                if (_factories.ContainsKey(serviceType))
                {
                    foreach (var factory in _factories[serviceType])
                    {
                        GetInstance(serviceType, factory.Key);
                    }
                }
            }

            if (_instancesRegistry.ContainsKey(serviceType))
            {
                return _instancesRegistry[serviceType].Values;
            }

            return new List<object>();
        } 
```

基本上，它所做的只是检查您的类型是否存在于一个或多个字典中。这是一个直接比较，因此不考虑对象 A 是否从对象 B 继承。

你可以做的，这需要更多的努力，但会做你想做的，是使用 Messenger 向所有订阅视图模型发送“清理”消息：

视图模型定位器：

```
 public static void Cleanup()
    {

        Messenger.Default.Send<CleanUp>(new CleanUp());
    } 
```

视图模型：

```
public class MainViewModel : ViewModelBase
{
    public MainViewModel(LocalServer server)
    {
        this.Server = server;
        Messenger.Default.Register<CleanUp>(this,CallCleanUp);
    }
private void CallCleanUp()
{
    CleanUp();
} 
```

这将起作用。如果你想让它自动化，那么创建一个继承自 ViewModelBase 的类，其中包含此逻辑，并让所有其他视图模型继承自此类而不是 ViewModelBase。

# actionscript-3 - Datagrid verticalLockedSeparatorSkin

> ID：11578343
> 
> 赞同：0
> 
> 时间：2012-07-20T11:23:57.880
> 
> 标签：actionscript-3, apache-flex

我想更改垂直锁定分隔符的颜色和大小。我尝试使用编程皮肤，但我没有找到如何更改颜色。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T21:36:42.607

我找到了解决方案。创建一个 png，我将其定义为一个类。 ![在此处输入图像描述](../Images/cee3f5bcff2ddac58aec57150452d4d1.png)

# cakephp - 为什么 CakePHP 不使用 SQL 连接

> ID：11578344
> 
> 赞同：1
> 
> 时间：2012-07-20T11:24:00.047
> 
> 标签：cakephp, join, containable

我对 CakePHP 还很陌生，遇到了一个我似乎找不到好的解决方案的问题。我的应用程序具有以下关联：

*   会员有很多票
*   Roll hasMany Vote
*   投票属于会员，滚动

我想检索成员所投的所有选票以及与每张选票相关的点名。以下代码产生了完美的结果：

```
$this->Member->id = $id;
$this->Member->contain(array('Vote' => 'Roll'));
$this->set('member_data', $this->Member->read()); 
```

不幸的是，这段代码效率也很低。`SELECT * FROM votes JOIN rolls ON votes.roll_id = rolls.id WHERE votes.member_id = 100`Cake 不只是做类似的事情，而是做以下事情：

1.  `SELECT * FROM votes WHERE member_id = 100`
2.  `SELECT * FROM rolls WHERE roll_id = 1`
3.  `SELECT * FROM rolls WHERE roll_id = 2`
4.  `SELECT * FROM rolls WHERE roll_id = 3`
5.  `SELECT * FROM rolls WHERE roll_id = 4`
6.  等等——当超过 500 卷匹配时，这是一个大问题！

在仍然使用 read() 方法的同时如何提高效率？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T12:00:52.610

我认为您可以从投票模型中尝试，尝试以下代码：

```
$this->Vote->recursive = 0;
$this->Vote->find('all',array('conditions'=>array('Vote.member_id'=>100))); 
```

# c# - 从 JArray 中检索键

> ID：11578350
> 
> 赞同：0
> 
> 时间：2012-07-20T11:24:11.863
> 
> 标签：c#, json.net

我将 Json.net 用于一个项目，我需要从 JArray 中获取特定项目（在这种情况下为“episode_key”）。我使用这种方式这样做，但我想知道是否还有另一种方式（更轻）：

foo 是一个 JArray，它来自：`var foo = data["foo"];`

```
for (int i=0; i < foo.Count(); i++) 
{
   TvProgram prog = new TvProgram { Key = foo[i]["episode_key"].ToString() }; // set the episode key
} 
```

我的 json 对象看起来像：

```
foo: [
{
episode_key: "32",
ddr_timeframes: [],
keywords: "",
synopsis: ""
},
{
episode_key: "542",
keywords: "",
synopsis: ""
}] 
```

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T12:07:31.780

我找到了一种使用 linq 的方法：

```
var keys = from m in foo
           select m["episode_key"]; 
```

问候

# javascript - jQuery zClip 没有将值复制到剪贴板

> ID：11578351
> 
> 赞同：1
> 
> 时间：2012-07-20T11:24:15.257
> 
> 标签：javascript, jquery, plugins, zclip

```
<script type="text/javascript">
jQuery(function() {
    jQuery(".process").click(function() {

    var enter = $(".enter").val();
    out = parseFloat(enter) + Math.floor((Math.random()*10)+1);

    $('.enter').attr("value", out);

    $('.process').fadeOut(0);
    $('.copy').fadeIn(0);

    });
});

jQuery(function() {
    jQuery(".copy").click(function() {

    $(".copy").zclip({
        path:'js/ZeroClipboard.swf',
        copy:function() { return $(".enter").val(); },
        afterCopy: afterCopy()
    });

    function afterCopy() {
        $(".enter").val('');
        $('.copy').fadeOut(0);
        $('.process').fadeIn(0);
    }

    });
});
</script>

<form class="form-wrapper cf" action="">
    <span>Enter A Number</span> <br />
    <input type="text" class="enter" size="15" />
    <button type="button" class="process">process</button>
    <button type="button" class="copy" style="display:none;">copy</button>
</form> 
```

jQuery zClip 插件在我的代码中不起作用。

我想将第一个函数 [ jQuery(".process").click(function() ] 产生的值作为循环复制几次。

jsfiddle：http: [//jsfiddle.net/npYBm/](http://jsfiddle.net/npYBm/)

插件页面： http: [//www.steamdev.com/zclip/](http://www.steamdev.com/zclip/)

有什么解决办法吗？谢谢。

**问题解决了**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T11:56:38.743

尝试这个，

**HTML**

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>

<script type="text/javascript" src="http://www.steamdev.com/zclip/js/jquery.zclip.min.js"></script>

<form class="form-wrapper cf" action="">
    <span>Enter A Number</span> <br />
    <input type="text" class="enter" size="15" />
    <a class="" id="copy-button" href="#">Copy</a>
</form> 
```

**脚本**

```
jQuery(function() {

    $("#copy-button").zclip({
        path:'http://zeroclipboard.googlecode.com/svn-history/r10/trunk/ZeroClipboard.swf',
        copy:function() {return $(".enter").val(); }
    });
}); 
```

问题是您将 zClip 函数放置在点击事件中。这不是必需的。

如果您右键单击“复制”锚标记，您可以看到 Flash 已附加到它。我认为在输入类型提交按钮的情况下它不会发生。那是另一个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T11:48:46.173

1.  您正在复制不存在的“.link”元素的值
2.  `fadeOut(0)`是相同的`hide()`
3.  对象必须在加载时可见
4.  正如我所看到的，zCopy 添加了一个点击事件，因此在点击事件中分配它是多余的

[这个版本](http://jsfiddle.net/npYBm/3)有效，但我不太确定为什么。

# c#-4.0 - 使用 ESC/POS 命令直接打印到热敏打印机，在 C# 中使用 TCP/IP 接口执行命令

> ID：11578355
> 
> 赞同：7
> 
> 时间：2012-07-20T11:24:29.123
> 
> 标签：c#-4.0, tcp-ip, epson, thermal-printer

我正在努力在厨房打印机（Aclas KP71M）上实施 ESC/POS（Epson 销售点标准代码）。
我有一个用户界面，POS 用户将其字符串输入用户界面，用户输入的字符串将发送到打印机，打印机打印数据。
打印机与主机使用以太网（100M）接口，使用 TCP/IP 连接。
我已经设法将每个必要的命令嵌入到 C# 方法中，并且我还在服务器/客户端 C# 连接上获取了一些示例代码，并尝试将其包含到我的连接中。
我现在面临的问题是我的代码似乎启动了连接，但它立即冻结而没有做任何事情并停止连接。如果有人能纠正我，或者告诉我问题出在哪里，我将非常感激，或者给我一些关于如何进行的想法？
这是代码。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Net;
using System.Net.Sockets;

namespace ESC_POS
{
   public partial class Form1 : Form
   {
        public string tableNumber;
        public string itemOrdered;
        public string orderedQuantity;
        public string waiterName;
        public string orderDestination;
        public string orderNumber;

        const int MAX_CLIENTS = 10;

        public AsyncCallback pfnWorkerCallBack;
        private Socket m_mainSocket;
        private Socket[] m_workerSocket = new Socket[10];
        private int m_clientCount = 0;//Server declarations

        byte[] m_dataBuffer = new byte[10];
        IAsyncResult m_result;
        public AsyncCallback m_pfnCallBack;
        public Socket m_clientSocket;//Client declarations

        public Form1()
        {
            InitializeComponent();
            PC_IP.Text = GetIP();
            PRINTER_IP.Text = GetIP();
        }

        public void label1_Click(object sender, EventArgs e)
        {
        }

        public void Form1_Load(object sender, EventArgs e)
        {
        }   

        public void TableNumber_TextChanged(object sender, EventArgs e)
        {
            if (TableNumber.Text == "")
            {
                MessageBox.Show("Please enter the table number");
                return;
            }
            tableNumber = TableNumber.Text;
        }

        public void OrderedQuantitiy_TextChanged(object sender, EventArgs e)
        {
            if (OrderedQuantitiy.Text == "")
            {
                MessageBox.Show("Please enter the ordered quantity");
                return;
            }
            orderedQuantity = OrderedQuantitiy.Text;
        }

        public void WaiterName_TextChanged(object sender, EventArgs e)
        {
            if (WaiterName.Text == "")
            {
                MessageBox.Show("Please enter the waiter name");
                return;
            }
            waiterName = WaiterName.Text;
        }

        public void comboOrderDestination_SelectedIndexChanged(object sender, EventArgs e)
        {

            if (ItemOrdered.Text == "")
            {
                MessageBox.Show("Please select the order destiination");
                return;
            }
            orderDestination = comboOrderDestination.SelectedText;
        }

        public void OrderNumber_TextChanged(object sender, EventArgs e)
        {
            if (OrderNumber.Text == "")
            {
                MessageBox.Show("Please enter the order number");
                return;
            }
            orderNumber = OrderNumber.Text;
        }

        public void PrintButton_Click(object sender, EventArgs e)
        {
            try
            {   
                string[] printData = new string[6];
                printData[0]=tableNumber ;
                printData[1]= itemOrdered;
                printData[2]= orderedQuantity;
                printData[3]= waiterName;
                printData[4]= orderDestination;
                printData[5]= orderNumber;
                string richTextMessage = "";
                PrinterCommands printCmd = new PrinterCommands();
                printCmd.initializePrinter();
                PrinterCommands print = new PrinterCommands();

                for (int i = 0; i < printData.Length; i++)
                {
                    richTextMessage = printData[i]+" ";
                    richTextMessage = print.LineFeed().ToString();
                }
                Object objData = richTextMessage;

                byte[] byData = System.Text.Encoding.ASCII.GetBytes(objData.ToString());
                if (m_clientSocket != null)
                {
                    m_clientSocket.Send(byData);
                }
            }
            catch (SocketException se)
            {
                MessageBox.Show(se.Message);
            }
        }

        public void textBox1_TextChanged(object sender, EventArgs e)
        {
        }

        public void PC_PORT_TextChanged(object sender, EventArgs e)
        {
        }

        public void PRINTER_IP_TextChanged(object sender, EventArgs e)
        {
        }

        public void PRINTER_PORT_TextChanged(object sender, EventArgs e)
        {
        }

        public void Connect_toPC_Click(object sender, EventArgs e)
        {
            // See if we have text on the IP and Port text fields
            // See if we have text on the IP and Port text fields
            if (PRINTER_IP.Text == "" || PRINTER_PORT.Text == "")
            {
                MessageBox.Show("IP Address and Port Number are required to connect to the Server\n");
                return;
            }
            try
            {
                UpdateControlsPrinter(false);
                // Create the socket instance
                m_clientSocket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);

                // Cet the remote IP address
                IPAddress ip = IPAddress.Parse(PRINTER_IP.Text);
                int iPortNo = System.Convert.ToInt16(PRINTER_PORT.Text);
                // Create the end point 
                IPEndPoint ipEnd = new IPEndPoint(ip, iPortNo);
                // Connect to the remote host
                m_clientSocket.Connect(ipEnd);
                if (m_clientSocket.Connected)
                {

                    UpdateControlsPrinter(true);
                    //Wait for data asynchronously 
                    WaitForData();
                }
            }
            catch (SocketException se)
            {
                string str;
                str = "\nConnection failed, is the server running?\n" + se.Message;
                MessageBox.Show(str);
                UpdateControlsPrinter(false);
            }       
        }

        public void ItemOrdered_TextChanged_1(object sender, EventArgs e)
        {
            if (ItemOrdered.Text == "")
            {
                MessageBox.Show("Please enter the Item Ordered");
                return;
            }
        }

        public void Disconnect_toPC_Click(object sender, EventArgs e)
        {

            if (m_clientSocket != null)
            {
                m_clientSocket.Close();
                m_clientSocket = null;
             UpdateControlsPrinter(false);
            }
            Close();
        }

        public void Start_Listening_Click(object sender, EventArgs e)
        {
            try
            {
                // Check the port value
                if (PC_PORT.Text == "")
                {
                    MessageBox.Show("Please enter a Port Number");
                    return;
                }
                string portStr = PC_PORT.Text;
                int port = System.Convert.ToInt32(portStr);
                // Create the listening socket...
                m_mainSocket = new Socket(AddressFamily.InterNetwork,
                                          SocketType.Stream,
                                          ProtocolType.Tcp);
                IPEndPoint ipLocal = new IPEndPoint(IPAddress.Any, port);
                // Bind to local IP Address...
                m_mainSocket.Bind(ipLocal);
                // Start listening...
                m_mainSocket.Listen(4);
                // Create the call back for any client connections...
                m_mainSocket.BeginAccept(new AsyncCallback(OnClientConnect), null);

                UpdateControls(true);

            }
            catch (SocketException se)
            {
                MessageBox.Show(se.Message);
            }
        }

        public void Stop_Listening_Click(object sender, EventArgs e)
        {
            CloseSockets();
            UpdateControls(false);
            Close();
        }

        String GetIP()
        {
            String strHostName = Dns.GetHostName();

            // Find host by name
            IPHostEntry iphostentry = Dns.GetHostByName(strHostName);

            // Grab the first IP addresses
            String IPStr = "";
            foreach (IPAddress ipaddress in iphostentry.AddressList)
            {
                IPStr = ipaddress.ToString();
                return IPStr;
            }
            return IPStr;
        }

        public void CloseSockets()
        {
            if (m_mainSocket != null)
            {
                m_mainSocket.Close();
            }
            for (int i = 0; i < m_clientCount; i++)
            {
                if (m_workerSocket[i] != null)
                {
                    m_workerSocket[i].Close();
                    m_workerSocket[i] = null;
                }
            }
        }

        public void WaitForData()
        {
            try
            {
                if (m_pfnCallBack == null)
                {
                    m_pfnCallBack = new AsyncCallback(OnDataReceived);
                }
                SocketPacket theSocPkt = new SocketPacket();
              //          theSocPkt.thisSocket = m_clientSocket;
                // Start listening to the data asynchronously
                m_result = m_clientSocket.BeginReceive(theSocPkt.dataBuffer,
                                                        0, theSocPkt.dataBuffer.Length,
                                                        SocketFlags.None,
                                                        m_pfnCallBack,
                                                        theSocPkt);
            }
            catch (SocketException se)
            {
                MessageBox.Show(se.Message);
            }

        }

        public void WaitForData(System.Net.Sockets.Socket soc)
        {
            try
            {
                if (pfnWorkerCallBack == null)
                {
                    // Specify the call back function which is to be 
                    // invoked when there is any write activity by the 
                    // connected client
                    pfnWorkerCallBack = new AsyncCallback(OnDataReceived);
                }
                SocketPacket theSocPkt = new SocketPacket();
                theSocPkt.m_currentSocket = soc;
                // Start receiving any data written by the connected client
                // asynchronously
                soc.BeginReceive(theSocPkt.dataBuffer, 0,
                                   theSocPkt.dataBuffer.Length,
                                   SocketFlags.None,
                                   pfnWorkerCallBack,
                                   theSocPkt);
            }
            catch (SocketException se)
            {
                MessageBox.Show(se.Message);
            }
        }

        public class SocketPacket
        {
            public System.Net.Sockets.Socket m_currentSocket;
            public byte[] dataBuffer = new byte[1];
        }

        public void UpdateControlsPrinter(bool connected)
        {
            Connect_toPC.Enabled = !connected;
            Disconnect_toPC.Enabled = connected;
            string connectStatus = connected ? "Connected" : "Not Connected";
           // textBoxConnectStatus.Text = connectStatus;
        }

        public void UpdateControls(bool listening)
        {
            Start_Listening.Enabled = !listening;
            Stop_Listening.Enabled = listening;
        }

        public void OnDataReceived(IAsyncResult asyn)
        {
            try
            {
                SocketPacket socketData = (SocketPacket)asyn.AsyncState;

                int iRx = 0;
                // Complete the BeginReceive() asynchronous call by EndReceive() method
                // which will return the number of characters written to the stream 
                // by the client
                iRx = socketData.m_currentSocket.EndReceive(asyn);
                char[] chars = new char[iRx + 1];
                System.Text.Decoder d = System.Text.Encoding.UTF8.GetDecoder();
                int charLen = d.GetChars(socketData.dataBuffer,
                                         0, iRx, chars, 0);
                System.String szData = new System.String(chars);
              //  richTextBoxReceivedMsg.AppendText(szData);

                // Continue the waiting for data on the Socket
                WaitForData(socketData.m_currentSocket);
            }
            catch (ObjectDisposedException)
            {
                System.Diagnostics.Debugger.Log(0, "1", "\nOnDataReceived: Socket has been closed\n");
            }
            catch (SocketException se)
            {
                MessageBox.Show(se.Message);
            }
        }

        public void OnClientConnect(IAsyncResult asyn)
        {
            try
            {
                // Here we complete/end the BeginAccept() asynchronous call
                // by calling EndAccept() - which returns the reference to
                // a new Socket object
                m_workerSocket[m_clientCount] = m_mainSocket.EndAccept(asyn);
                // Let the worker Socket do the further processing for the 
                // just connected client
                WaitForData(m_workerSocket[m_clientCount]);
                // Now increment the client count
                ++m_clientCount;
                // Display this client connection as a status message on the GUI    
                String str = String.Format("Client # {0} connected", m_clientCount);
               // textBoxMsg.Text = str;

                // Since the main Socket is now free, it can go back and wait for
                // other clients who are attempting to connect
                m_mainSocket.BeginAccept(new AsyncCallback(OnClientConnect), null);
            }
            catch (ObjectDisposedException)
            {
                System.Diagnostics.Debugger.Log(0, "1", "\n OnClientConnection: Socket has been closed\n");
            }
            catch (SocketException se)
            {
                MessageBox.Show(se.Message);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-11T04:19:51.317

回答这个问题以防其他人出现相同的 q。这对我有用：

```
Socket clientSock = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
clientSock.NoDelay = true;
IPAddress ip = IPAddress.Parse("192.168.0.18");
IPEndPoint remoteEP = new IPEndPoint(ip, 9100);
clientSock.Connect(remoteEP);
Encoding enc = Encoding.ASCII;

// Line feed hexadecimal values
byte[] bEsc = new byte[4];
bEsc[0] = 0x0A;
bEsc[1] = 0x0A;
bEsc[2] = 0x0A;
bEsc[3] = 0x0A;

// Send the bytes over 
clientSock.Send(bEsc);

// Sends an ESC/POS command to the printer to cut the paper
string output = Convert.ToChar(29) + "V" + Convert.ToChar(65) + Convert.ToChar(0);
char[] array = output.ToCharArray();
byte[] byData = enc.GetBytes(array);
clientSock.Send(byData);
clientSock.Close(); 
```

# apple-push-notifications - 发送通知后 APNS 连接关闭

> ID：11578357
> 
> 赞同：2
> 
> 时间：2012-07-20T11:24:37.837
> 
> 标签：apple-push-notifications, ioexception

我正在开发基于 .Net 的 APNS 提供程序，并且我正在使用 SSLStream 与 A​​PNS 通信。我正面临一个真正让我烦恼的小问题。

有时，当我发送通知，然后流写入器刷新通知字节时，流读取器会无缘无故地引发以下异常。

```
IOException System.IO.IOException: Unable to read data from the transport 
connection: An existing connection was forcibly closed by the remote host. 
---> System.Net.Sockets.SocketException: An existing connection was forcibly 
closed by the remote host 
```

根据 Apple 的文档，如果出现错误，在关闭连接之前应该收到一条错误消息，但我没有收到任何消息。

有人对这个案子有线索吗？为什么在“推送”之后立即关闭连接？这是一个已知问题吗？

# python - 无法使用 CGI 处理程序启用线程安全

> ID：11578358
> 
> 赞同：4
> 
> 时间：2012-07-20T11:24:39.757
> 
> 标签：python, google-app-engine

我一直在尝试遵循[这个教程](https://developers.google.com/appengine/articles/openid?hl=pl#ex)，以便在应用程序上实现 openID 身份验证，但我完全迷失了。无论我尝试什么，我一直收到此错误：

```
Fatal error when loading application configuration:
Invalid object:
threadsafe cannot be enabled with CGI handler: main.py 
```

有谁知道如何实现 openID 登录？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-20T11:43:58.940

这与 OpenID 无关。

如果您在 Google App Engine 中将新的并发请求 ( **threadsafe=true** ) 模式与 python 2.7 一起使用，您必须确保在 app 中指定 WSGI 应用程序（例如 myapp.app）而不是 CGI 处理程序（例如 myapp.py） .yaml（有关更多详细信息，请参见[此处](https://developers.google.com/appengine/docs/python/python27/migrate27#wsgi)）：

看起来像这样：

应用程序.yaml：

```
application: myapp
version: 1
runtime: python27
api_version: 1
threadsafe: true
handlers:
   - url: /.*
    script: myapp.app 
```

主要.py：

```
import webapp2

class MainPage(webapp2.RequestHandler):
  def get(self):
    self.response.headers['Content-Type'] = 'text/plain'
    self.response.out.write('Hello, WebApp World!')

app = webapp2.WSGIApplication([('/', MainPage)])

""" Old code:
def main():
  run_wsgi_app(app)

if __name__ == '__main__':
  main()
""" 
```

或者，您也可以禁用并发请求（**threadsafe=false**）并使用旧的 CGI 处理程序。

# asp.net - 显示失败弹出对话框

> ID：11578363
> 
> 赞同：0
> 
> 时间：2012-07-20T11:24:53.557
> 
> 标签：asp.net, ajax, c#-4.0, jquery

在 apsx 页面中有一个 div（弹出对话框），其中包含“错误，请检查您的登录凭据...”的文本，通过调用下面的代码，将显示该 div：

```
$('#error-dialog').fadeIn('normal'); 
```

所以有一个 C# 方法可以检查数据库表并将登录结果返回为 bool。我想在登录失败时显示弹出对话框......我的意思是我想在 else 语句中显示它。我该怎么做？

使用的标记：（还有一个脚本附加到页面......）

```
<div id="login-wrapper">
    <asp:UpdatePanel ID="UpdatePanel1" runat="server">
        <ContentTemplate>
            <div id="error-dialog">
                <div id="icon">
                </div>
                <div id="messageText">
                </div>
                <a href="#" id="ok_button">

                 ..... 
```

C#代码：

```
protected void btnLogin_Click(object sender, EventArgs e)
{
    UserController ucontoller = new UserController();
    System.Threading.Thread.Sleep(1000);
    if (ucontoller.Check(txtUsername.Text, txtPassword.Text))
    {
        if (txtUsername.Text.Contains("admin"))
        {
            Response.Redirect("~/Administrator.aspx?uname=" + txtUsername.Text);
        }
        else
        {
            Response.Redirect("~/user.aspx?uname=" + txtUsername.Text);
        }

    }
    else
    {

        //display error popup....

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T12:13:14.357

这就是我所做的——我并不是说这是最好的方法，但它对我有用。使用您的按钮单击事件（假设它正在回发），您可以添加以下内容。请注意，这是 VB，因此您必须转换为 C#。

```
ScriptManager.RegisterStartupScript(Me.Page, GetType(String), "ShowError", "$('#error-dialog').fadeIn('normal');", True) 
```

# c# - IEnumerable.Take() 上的延迟加载

> ID：11578367
> 
> 赞同：3
> 
> 时间：2012-07-20T11:25:27.683
> 
> 标签：c#, .net, linq, lazy-loading

有人可以向我解释为什么我的 IEnumerable 没有延迟加载到 GetMessages().Take(5) 上吗？如果我调试foreach循环，它似乎一次延迟加载前5条消息，将它们添加到listBox1，但在这5条之后它将继续填充列表的其余部分（大约需要一分钟）在循环之后继续执行之前。

```
 public void PopulateMessages()
    {
        foreach (string message in GetMessages().Take(5))
        {
            listBox1.Items.Add(message);
        }
    }

    private static IEnumerable<string> GetMessages()
    {
        using (var conn = new SqlConnection(connectionString))
        {
            conn.Open();

            // The Message table has thousands of rows
            SqlDataReader reader = new SqlCommand("SELECT * FROM Message", conn).ExecuteReader();

            while (reader.Read())
            {
                yield return reader.GetString(0);
            }
        }
    } 
```

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T11:32:58.763

但是，它*是*延迟加载它们：sql 命令仍在运行。您可能会尝试的一件事是更多`using`：

```
using(var cmd = new SqlCommand("SELECT * FROM Message", conn))
using(var reader = cmd.ExecuteReader())
{
    while (reader.Read())
    {
        yield return reader.GetString(0);
    }
} 
```

但是，*最佳*解决方案是生成带有 a 的 TSQL `TOP 5`，或者`TOP (@count)`如果您想参数化，则可能是 a。

这将尽快处理阅读器和命令。说：连接*已经*正确处理。

# java - 无法在 WCF 客户端上捕获 Java 自定义错误

> ID：11578369
> 
> 赞同：2
> 
> 时间：2012-07-20T11:25:37.390
> 
> 标签：java, wcf, interop, faults

问题类似于这个问题：[Does WCF FaultException<T> support interop with a Java web service Fault](https://stackoverflow.com/questions/864800/does-wcf-faultexceptiont-support-interop-with-a-java-web-service-fault)。但是，就我而言，自定义错误确实是从服务返回的。

很难解释这一点，但在这里：

从一个新的 WCF 客户端，我正在调用一个现有的 Java Web 服务（多年来一直与其他类型的客户端一起运行良好）。服务 XSD 定义了一个自定义故障 ServiceFault：

```
<xs:complexType name="ServiceFault">
        <xs:annotation>
            <xs:documentation>On service error</xs:documentation>
        </xs:annotation>
        <xs:all>
            <xs:element name="ErrorCode" type="xs:string"/>
            <xs:element name="ErrorDescription" type="xs:string"/>
        </xs:all>
    </xs:complexType> 
```

此 ServiceFault 用于所有更具体的自定义故障（例如 MyMethodFault），因此它们都获得 ErrorCode 和 ErrorDescription 属性，如下所示：

```
<xs:element name="MyMethodFault" type="ServiceFault">
    <xs:annotation>
        <xs:documentation>On error in MyMethod</xs:documentation>
    </xs:annotation>
</xs:element> 
```

接下来，定义故障的 WSDL 消息，如下所示：

```
<wsdl:message name="MyMethodFault">
<wsdl:part element="tns:MyMethodFault " name="MyMethodFault">
</wsdl:part> 
```

最后，使用这些错误定义操作，如下所示：

```
<wsdl:fault message="tns:MyMethodFault" name="MyMethodFault"> 
```

对我来说看起来不错，到目前为止。并且在运行时，服务巧妙地返回详细 SOAP 标记中的故障，如下所示：

```
<ns2:MyMethodFault xmlns:ns2="urn:salessystem:entity:MyService:v1.0">
<ns2:ErrorCode>1000</ns2:ErrorCode>
<ns2:ErrorDescription>TheErrorDescr</ns2:ErrorDescription>
</ns2:MyMethodFault> 
```

但是， SvcUtil 没有生成更**具体**的自定义故障，只有**ServiceFault**。这是服务参考中唯一提到 MyMethodFault 的：

```
[OperationContractAttribute(Action = "", ReplyAction = "*")]
[FaultContractAttribute(typeof(sale...ServiceFault), Action="", Name="MyMethodFault")]        
[ServiceKnownTypeAttribute(typeof(ServiceFault))]
MyMethodResponse MyMethod(MyMethodRequest1 request); 
```

所以，问题来了：

由于 MyMethodFault 不存在，我无法捕获`FaultException<MyMethodFault>.`此外，WCF 不会在运行时将 MyMethodFault 之类的特定错误映射到 ServiceFault，因此`FaultException<ServiceFault>`永远不会捕获类型的异常。因此，我从来没有得到错误描述。

我做错了什么还是需要调整 WSDL 或 SvcUtil 使用？

希望任何人都能完全理解这个问题：P

谢谢， 比约恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T13:56:27.847

有时，您只需要一个小假期。问题解决了：

SvcUtil 为通用自定义故障 ServiceFault 生成的不是一种，而是两种 C# 类型。另一个位于命名空间层次结构的更深处。并试图捕捉到其他故障就可以了。所有更具体的自定义故障（源自 XSD 中的 ServiceFault）都在此处捕获，我可以看到错误代码和故障描述。这就是我现在所需要的。

但是，我仍然没有为更具体的自定义错误生成 C# 类型，例如 XSD 中描述的 MyMethodFault。但也许我不应该！

我在上面的代码示例中未能描述的是 SOAP 响应中的特定故障 MyMethodFault 的 XML 位于返回故障的 Detail-tag 内：

```
<SOAP-ENV:Fault>
  <faultcode>SOAP-ENV:Server</faultcode>
  <faultstring xml:lang="en">ServiceException</faultstring>
  <detail>
    <ns2:MyMethodFault xmlns:ns2="urn:salessystem:entity:MyService:v1.0">
      <ns2:ErrorCode>1000</ns2:ErrorCode>
      <ns2:ErrorDescription>My+Error+Description</ns2:ErrorDescription>
    </ns2:UcsAgreemenFault>
  </detail>
</SOAP-ENV:Fault> 
```

此故障被映射到我的 try/catch 中的“基本”ServiceFault。在上面的 SOAP 中，您可以清楚地看到具体故障的类型或名称。不过，当异常被捕获时，我不知道如何获取该类型/名称。我看到的只是错误代码和错误描述。但是，只要我能捕捉到 ServiceFault 并查看代码和描述，一切都很好。

感谢您对此提出的任何想法或任何进一步的评论。

/比约恩

# symfony - 带有 Doctrine 2 Paginator 的 Twig 循环变量，这是一个错误吗？

> ID：11578371
> 
> 赞同：1
> 
> 时间：2012-07-20T11:25:57.557
> 
> 标签：symfony, doctrine-orm, twig

我正在使用[Doctrine 2 Paginator](http://docs.doctrine-project.org/en/latest/tutorials/pagination.html)并且我遇到了 Twig 的错误（可能）。考虑一个简单的[`Paginator`](https://github.com/doctrine/doctrine2/blob/master/lib/Doctrine/ORM/Tools/Pagination/Paginator.php)初始化：

```
 $current = 1;
    $limit   = 5;
    $offset  = ($current - 1) * $limit;

    $qb->setFirstResult($offset)->setMaxResults($this->limit);

    // No fetch joins
    $items = new \Doctrine\ORM\Tools\Pagination\Paginator($qb->getQuery, false);

    // Total count
    var_dump($items->count()); // Prints 8

    // Number of items displayed
    var_dump(count($items)); // Prints 5

    // Items
    foreach($items as $item) :
        var_dump($items->getId()); // Prints 1, 2, 3, 4, 5
    endif; 
```

计数对我来说很好。但是在将其分配给 Twig 之后`array('items' => $items)`：

```
{% for item in items %}
    {{ loop.index }}/{{ loop.length }}
{% endfo %} 
```

输出是错误的，特别`loop.length`是指整个集合（不是当前的项目集）。因此，例如，您不能使用`loop.last`：

```
1/8
2/8
3/8
4/8
5/8 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T15:50:32.127

自答。Doctrine 文档中的这段代码让我误入歧途：

```
$paginator = new Paginator($query, $fetchJoinCollection = true);

$c = count($paginator);
foreach ($paginator as $post) {
    echo $post->getHeadline() . "\n";
} 
```

错误的。您必须将迭代器分配给 Twig，而不是分页器实例本身：

```
return array('items' => $paginator->getIterator()); 
```

**编辑**：对不起，我发现了`count($paginator) == $paginator->count()`，所以当前项目计数是`$paginator->getIterator()->count()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-28T17:10:06.257

只是为了扩展@gremo 所说的内容，对于一个简单的寻呼机（如果您不自豪！），您可以在控制器中执行以下操作：

```
$em = $this->getDoctrine()->getManager();
// Select your items.
$dql = "SELECT i FROM ShopBundle:Issue i ORDER BY i.liveDate DESC";
// Limit per page.
$limit = 10;
// See what page we're on from the query string.
$page = $this->getRequest()->query->get("page", 1);
// Determine our offset.
$offset = ($page - 1) * $limit;
// Create the query
$query = $em->createQuery($dql);
$query->setFirstResult($offset)->setMaxResults($limit);
// Create a pager object.
$paginator = new Paginator($query, $fetchJoinCollection = FALSE);
...
return $this->render('ShopBundle:Issue:list.html.twig', array(
    'totalPages' => (int) ($paginator->count() / $limit), // Calc total number of pages.
    'currentPage' => $page,
    'issues' => $paginator->getIterator(),
    )
); 
```

然后在模板中（作为树枝包括）：

```
<div class="pagination">
    <ul>
        <li>
            <a href="{{ path(route) }}">&laquo;</a>
        </li>
        {% if currentPage != 1 %}
        <li>
            <a href="{{ path(route, {'page': (currentPage - 1)}) }}">&lsaquo;</a>
        </li>
        {% endif %}
        {% for i in 1..totalPages %}
        <li>
            <a{% if  i == currentPage %} class="disabled"{% endif %} href="{{ path(route, {'page': i}) }}">{{ i }}</a>
        </li>
        {% endfor %}
        {% if currentPage != totalPages %}
        <li>
            <a href="{{ path(route, {'page': (currentPage + 1)}) }}">&rsaquo;</a>
        </li>
        {% endif %}

        <li>
            <a href="{{ path(route, {'page': totalPages}) }}">&raquo;</a>
        </li>
    </ul>
</div> 
```

`route`在哪里`'route_to_your_controller'`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T01:14:08.150

Doctrine2 Paginator 的页面确实提供了很多。我也找不到

教义\ORM\工具\分页\分页器；

您是否下载了其他文件？我真的很想使用您的答案，而不是一些可用的捆绑包。

# c# - 实体框架如何查看 SaveChanges 方法的 SQL 语句

> ID：11578374
> 
> 赞同：33
> 
> 时间：2012-07-20T11:26:10.193
> 
> 标签：c#, .net, entity-framework

我曾经使用 context.Log 来跟踪 LINQ to SQL 生成的 SQL 语句，如[Sql Server Query Visualizer – 看不到生成的 SQL 查询中所示](https://stackoverflow.com/questions/11156124/sql-server-query-visualizer-cannot-see-generated-sql-query/11201832#11201832)

```
context.Log = new OutputWindowWriter(); 
```

对于 EF，有没有类似上述方法的类似和简单的方法？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2014-06-02T04:08:36.387

一般来说，您可以通过简单的方式连接内置跟踪器或任何记录器

```
context.Database.Log = msg => Trace.WriteLine(msg); 
```

在 DbContext 构造函数中。[在MSDN](http://msdn.microsoft.com/en-us/library/dn469464.aspx#Log)中查看更多信息。MS 的其他一些方法在[这里](http://msdn.microsoft.com/en-US/data/dn469464)（都基于[DataContext.Log](http://msdn.microsoft.com/en-us/library/system.data.linq.datacontext.log.aspx)属性）。

谈到 Nate 提到的[Clutch](http://github.com/Kukkimonsuta/Clutch)解决方案，它不适用于 EF v6（请参阅[此错误报告](https://github.com/Kukkimonsuta/Clutch/issues/4)）。

参考

1.  [记录和拦截数据库操作（EF6 及以上）](http://msdn.microsoft.com/en-US/data/dn469464)
2.  [记录和拦截数据库操作](http://msdn.microsoft.com/en-us/library/dn469464.aspx#Log)

* * *

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-06-22T20:06:16.900

Clutch.Diagnostics.EntityFramework（在 NuGet 中可用）非常适合我，而且它比 EFTracingProvider 更简单。

EF 6 的更新：

> 从 Entity Framework 6 开始，只要 Entity Framework 向数据库发送命令，该命令就可以被应用程序代码拦截。这最常用于记录 SQL，但也可用于修改或中止命令。
> 
> 具体来说，EF 包括：
> * 类似于 LINQ to SQL 中的 DataContext.Log 的上下文的 Log 属性。
> * 一种自定义发送到日志的输出内容和格式的机制。
> *用于拦截的低级构建块提供更大的控制/灵活性。

请参阅[http://msdn.microsoft.com/en-US/data/dn469464](http://msdn.microsoft.com/en-US/data/dn469464)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-20T12:36:15.243

[EF 跟踪提供程序](http://efwrappers.codeplex.com/)可以将所有执行的 SQL 语句作为跟踪输出。如果需要，您还可以使用它来添加自己的日志记录。以下是您可以放入上下文类的构造函数中的一些代码（这是针对 DBContext，但使用 ObjectContext 的调整应该非常明显）：

```
// enable logging all queries executed by EF
var cx = ((IObjectContextAdapter)this).ObjectContext; // change to var cx = this; if using ObjectContext.
cx.EnableTracing();
cx.Connection.GetTracingConnections().ToList().ForEach(
    c =>
    {
        c.CommandExecuting += (s, e) => Log(e);
        c.CommandFailed += (s, e) => Log(e);
        c.CommandFinished += (s, e) => Log(e);
    }); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-20T12:42:01.457

对此有很多解决方案，但最简单的代码是在 LINQ 语句的 IQueryable 上调用 ToString()。

```
var query = db.Employees.Where(x => x.ID = 1); //query will be an IQueryable object
var  sql = query.ToString(); 
```

这仅在 EF4.1 上（以前在 ObjectQuery 上调用 ToTraceString 是实现此目的的方法）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-07-25T11:11:26.347

扩展 Nate 对 EF6 的回答，`NLogCommandInterceptor`在[Logging and Intercepting Database Operations](http://msdn.microsoft.com/en-US/data/dn469464)中看到的仅显示 CommandText。

如果有一些特定的参数值导致该 commandText 失败，则参数值不会发送到日志中。就我而言，我想记录导致外键违规的值。

这可以通过`LogIfError`像这样改变 NLogCommandInterceptor 的方法来改进

```
private void LogIfError<TResult>(DbCommand command, DbCommandInterceptionContext<TResult> interceptionContext)
{
    if (interceptionContext.Exception != null)
    {
        var commandDumper = new DbCommandDumper(command);
        Log.Warn(Command failed:\r\n{0}", commandDumper.GetLogDump());
        // Exception will get logged further up the stack
    }
} 
```

其中[DbCommandDumper](https://github.com/neutmute/Cyclops/blob/master/Source/Cyclops/Instrumentation/DbCommandDumper.cs)类将 DbCommand 重构为可以重放到测试数据库中的 TSQL。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-20T11:32:33.753

我相信您可以使用您拥有的 ObjectQuery 实例的 ToTraceString 方法。另一种方法是查看 Visual Studion 的 IntelliTrace，因为它会记录 SQL 退出您的项目。

# entity-framework - 在 Visual Studio 2010 中使用实体框架解决方案

> ID：11578376
> 
> 赞同：2
> 
> 时间：2012-07-20T11:26:14.653
> 
> 标签：entity-framework

我刚刚下载并构建了现在开源的实体框架。

我的问题是`EntityFramework.sln`在 Visual Studio 2010 中打开。这些项目似乎只与 VS 2012 兼容。

有没有办法在 VS 2010 中打开它们？也许通过调整项目文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T08:03:50.283

微软在[ADO.NET 博客](http://blogs.msdn.com/b/adonet/archive/2012/07/19/entity-framework-and-open-source.aspx)上的官方回答——

> 目前 EF6 项目和源代码仅与 Visual Studio 2012 和 .NET 4.5 兼容。我们计划让 .NET 4.0 成为可能，并考虑使其可从 Visual Studio 2010 构建，但我们还没有完成这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T11:34:24.353

在

[http://entityframework.codeplex.com/documentation](http://entityframework.codeplex.com/documentation)

Scott Guthrie 明确指出

> 使用代码库最简单的方法是安装 Visual Studio 2012 RC。**只要您的机器上有.NET Framework 4.5**和**MSBuild** ，您还可以使用任何其他 IDE 。

# javascript - 检测 Javascript 对象的变化

> ID：11578377
> 
> 赞同：21
> 
> 时间：2012-07-20T11:26:16.520
> 
> 标签：javascript, events, object, detect, watch

[我发现这个要点可以检测对象指定字段的变化： https](https://gist.github.com/3138469) ://gist.github.com/3138469

但它只在一个字段上绑定一个事件。

有人知道检测整个 Javascript 对象变化的函数或技巧吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-20T11:44:50.127

**2019 Update:** These days this can be achieved using [Proxy API](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy) in a much more efficient manner. The [on-change library](https://github.com/sindresorhus/on-change) uses the Proxy API behind the scene to make this even easier.

**2012 Update:** I've just noticed that the author of Watch.js is referencing a library with much broader browsers' support. [MultiGetSet.JS](https://gist.github.com/2956493)

When I want to achieve this I usually use [Watch.js](https://gist.github.com/1627705), you can watch a whole object or one attribute.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T11:35:40.810

目前这是不可能的，您只能为单个属性定义 getter/setter。

然而，有一个[`Proxy`](http://wiki.ecmascript.org/doku.php?id=harmony%3aproxies)可以做到这一点的对象草案。今天，它仅[在 Firefox 的 Javascript 1.8.5 中受支持](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Proxy)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-14T19:37:25.487

使用 watch.js 是不可能的。它只是检测对象的变化或对象的属性。它不会检测我们是否向对象添加属性或更改新添加的属性...

# c# - 可以将字母数字字段作为 PrimaryKey 吗？

> ID：11578380
> 
> 赞同：0
> 
> 时间：2012-07-20T11:26:20.570
> 
> 标签：c#, asp.net, sql, vb.net, database-design

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T20:58:44.163

如果您确实添加了这个 PK，并且还保留了以前的 PK，那么您将需要处理一些数据管理问题。或者也许是您的客户。如果现有用户将升级到新数据库，则摆脱旧 PK 可能不可行。

如果数据用户使用 EmployeeCode（前一个 PK）来识别员工，那么您将必须添加一个约束以确保该字段是唯一的。携带这两个代码将消除您希望的任何性能提升。

如果是我，我会一个人离开。性能提升（如果有的话）将是微不足道的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T12:30:12.657

如果您在字母数字字段上创建的索引是表的聚集索引，则性能差异可以忽略不计。根据您的问题，情况将如此，但为了完整性，我想指出这一点。我这么说有两个原因：

1.  聚集索引是表的物理顺序，因此在查找该索引时，在查询中查找可能*从数据页之外的*更多数据时，可以对其执行二进制搜索，因为它也是按该顺序物理存储的。
2.  二进制搜索几乎与您所能获得的一样有效，以免我们忘记统计索引。我之所以这么说是因为整数主键构建的统计索引与搜索一样快，因为从数学上讲，我们**知道**例如 2 在 1 之后。

因此，在构建字母数字甚至复合键和索引并尝试比较它们与整数键之间的差异时，请记住这一点。就个人而言，我更喜欢使用整数主键，因为我发现它们在极端增长期间随着时间的推移表现更好。

我希望这有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T12:30:56.717

我经常使用字母数字主键，绝对没有问题。没有性能问题，您有更广泛的可寻址空间，并且您可以更具表现力/人类可读性。整数键只是一个约定。

通过在移植问题之上添加一个主要的架构更改，再加上您正在为您的项目添加的风险，我会说尽可能地坚持现有的模式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T13:09:29.097

不会有性能提升——事实上，除非你知道并且可以证明/衡量你有性能问题，否则改变“让它们更快”通常会导致痛苦。

但是，有人担心您的主键似乎带有含义 - 它是一个国家代码，与一个数字连接。如果员工从美国搬到英国怎么办？如果英国雇佣了第 1000 名员工怎么办？

出于这个原因，我会重构应用程序以使用无意义的主键；无论是 INT 还是 VARCHAR 都不是很重要。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T11:37:03.613

你偶尔会遇到字母数字主键..我个人觉得它只会让生活变得更加困难..如果你能够改变它并且你想改变它，我会说继续..它会让你以后更容易. 至于它是 FK，您需要小心编写脚本以正确更新所有数据。您可以这样做的一种方法是：

```
Step 1: Create a new int column for the PK and set Identity Insert to true
Step 2: Add a new int column in your child table and then:
Step 3: write an update script like this:

    UPDATE childTable C
    INNER JOIN parentTable P ON C.oldEmpID = P.oldEmpID
    SET C.myNewEmpIDColumn = P.myNewEmpIDColumn

Step 4: Repeat steps 2 & 3 for all child tables
Step 5: Delete all old FK columns 
```

类似的东西，不要忘记先备份您当前的数据库；）

# cuda - 简单示例中的 CUDA 内核调用

> ID：11578381
> 
> 赞同：3
> 
> 时间：2012-07-20T11:26:21.240
> 
> 标签：cuda

*这是cuda*的第一个并行代码示例。

谁能描述一下内核调用：<<< N, 1 >>>

这是重要的代码：

```
#define N   10

__global__ void add( int *a, int *b, int *c ) {
    int tid = blockIdx.x;    // this thread handles the data at its thread id
    if (tid < N)
        c[tid] = a[tid] + b[tid];
}

int main( void ) {
    int a[N], b[N], c[N];
    int *dev_a, *dev_b, *dev_c;

    // allocate the memory on the GPU
    // fill the arrays 'a' and 'b' on the CPU
    // copy the arrays 'a' and 'b' to the GPU

    add<<<N,1>>>( dev_a, dev_b, dev_c );

    // copy the array 'c' back from the GPU to the CPU
    // display the results
    // free the memory allocated on the GPU

    return 0;
} 
```

为什么它使用`<<< N , 1 >>>`它意味着我们在每个块中使用了 N 个块和 1 个线程？因为我们可以写这个`<<< 1 , N >>>`并在这个块中使用 1 个块和 N 个线程来进行更多优化。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T12:57:25.010

对于这个小例子，没有特别的原因（正如巴特在评论中已经告诉你的那样）。但是对于更大、更实际的示例，您应该始终牢记每个块的线程数是有限的。也就是说，如果您使用 N = 10000，您将无法再使用`<<<1,N>>>`，但`<<<N,1>>>`仍然可以使用。

# python-2.7 - 带有列表类型值的映射字典

> ID：11578382
> 
> 赞同：0
> 
> 时间：2012-07-20T11:26:23.953
> 
> 标签：python-2.7

我有以下两本词典，

```
d1={"aa":[1,2,3],"bb":[4,5,6],"cc":[7,8,9]}
d2={"aa":[1,2,3],"bb":[1,1,1,1,1,1],"cc":[7,8]} 
```

我如何比较这两个字典并获得 UNMATCHED 键值对的位置（索引）？由于我正在处理大小约为 2 GB 的文件，因此字典包含非常大的数据。如何以优化的方式实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T12:08:09.253

```
def getUniqueEntry(dictionary1, dictionary2, listOfKeys):
    assert sorted(dictionary1.keys()) == sorted(dictionary2.keys()), "Keys don't match"  #check that they have the same keys
    for key in dictionary1:
        if dictionary1[key] != dictionary2[key]:
            listOfKeys.append(key) 
```

调用该函数时，第三个参数`listOfKeys`是一个空列表，您希望在其中存储密钥。请注意，将 2 GB 的数据读入 dict 需要大量内存，并且很可能会失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-17T09:19:15.290

这是一种更 Pythonic 的方式：列表扩展将只考虑两个字典中不相等的值：

```
diffrent_keys = [key for key in d1 if d1[key] != d2[key] ] 
```

# c++ - C++：友元函数，派生类

> ID：11578383
> 
> 赞同：0
> 
> 时间：2012-07-20T11:26:27.300
> 
> 标签：c++, inheritance, derived-class

我有 2 个类，基类是“Port”，派生类是“VintagePort”。据我所知，如果我使用基类的引用或指针指向派生类的对象，它会自动找到正确的方法，而不是引用或指针，而是精确到对象（如果方法是虚拟的）。

在我的情况下，您可以看到两个类都有友元函数“operator<<”。但看起来当我使用基类指针时，它只从基类调用函数。如果我使用“cout << VintagePort”它可以正常工作。我的问题：它工作正常还是我应该在代码中修复一些东西？

```
std::ostream& operator<<(std::ostream& os, const Port& p)
{
os << p.brand << ", " << p.style << ", " << p.bottles << endl;
return os;
}

std::ostream& operator<<(std::ostream& os, const VintagePort& vp)
{
os << (const Port &) vp;
cout << ", " << vp.nickname << ", " << vp.year << endl;
return os;
}

VintagePort vp1;
VintagePort vp2("Gallo", "lekko brazowy", 50, "Blaze", 1990);
VintagePort vp3(vp2);

Port* arr[3];
arr[0] = &vp1;
arr[1] = &vp2;
arr[2] = &vp3;

for (int i = 0; i < 3; i++)
{
    cout << ">>>>> " << i+1 << " <<<<<" << endl;
    cout << *arr[i];   // call for base class instead derived class
    arr[i]->Show();    
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T11:29:14.473

编译器现在没有指针实际指向一个继承的类。解决这个问题的一种方法是在基类中有一个虚函数用于输出，并在继承基类的类中覆盖它。然后在输出操作符中调用这个虚方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T13:51:33.043

在 C++ 中，多态性只能通过虚函数来实现，而`operator<<`不是一个（也不能用于您的目的，因为第一个参数是`std::ostream`. 如果您需要这种行为，简单的方法是在您的层次结构，并`operator<<`转发执行动态调度的呼叫：

```
struct base {  // Don't forget virtual destructors
   virtual void print( std::ostream& ) const;
};
struct derived : base {
   virtual void print( std::ostream& ) const;
};
std::ostream& operator<<( std::ostream& o, const base& b ) {
   b.print( o );
   return o;
} 
```

# javascript - 如何管理原始对象之间的数据依赖关系？

> ID：11578386
> 
> 赞同：0
> 
> 时间：2012-07-20T11:26:41.040
> 
> 标签：javascript, dependencies, coffeescript

考虑以下情况：

```
items = [
  {
    id: 1
    attributes: [
      { key: a, value: 2 }
      { key: b, value: 3 }
    ],
    requirements: null
  }
  {
    id: 2
    attributes: [
      { key: b, value: 2 }
    ],
    requirements: a > 2
  }
  {
    id: 3
    attributes: [
      { key: a, value: 1 }
      { key: c, value: 1 }
    ],
    requirements: a > 1 and b > 2
  }
  {
    id: 4
    attributes: [
      { key: a, value: 2 }
      { key: d, value: 7 }
    ],
    requirements: b > 5 and h < 10
  }
] 
```

将各种加在一起（总和）的预期结果`attributes`是：

```
result = [
  { key: a, value: 3 }
  { key: b, value: 5 }
  { key: c, value: 1 }
] 
```

如您所见，`requirements`列表中的对象之间存在依赖关系 ( )。特别是，具有`id: 4`（系列中的最后一个）的对象从计算中被丢弃，因为`b > 5 and h < 10`从未检查过条件。相反，带有 的对象`id: 2`最初被丢弃，然后作为带有 的对象的结果落入计算中`id: 3`（通过将 1 加到属性`a`中，使条件为真`a > 2`）。

**获得具有 N 个对象的所需结果所需的算法是什么？**

*免责声明：建议的结构只是一个例子。您可以提出任何您认为可以实现结果的更改。我正在使用 JavaScript (CoffeeScript) 编程语言，但其他任何语言都可以。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T04:42:18.790

Let's start by getting the data in a format we can use. We need to be able to test requirements at will, instead of only when the data object is instantiated:

```
 {
    id: 4
    attributes: [
      { key: a, value: 2 }
      { key: d, value: 7 }
    ],
    requirements: (sum) -> sum.b > 5 and sum.h < 10
  } 
```

While we're at it, let's get the attributes in a more useful state (note that this isn't strictly necessary, but makes everything simpler):

```
 {
    id: 4
    attributes: {
      a: 2
      d: 7
    },
    requirements: (sum) -> sum.b > 5 and sum.h < 10
  } 
```

Now I'll go through the naive algorithm, which is simplest and should fit your needs. Essentially, we'll keep looping over the data set, testing each one that hasn't been used yet and adding it to the sum if it passes.

```
changed = true
sum = {}
init(sum, items)
while changed
    changed = false
    for item in items
        if !item.used && item.requirements(sum)
            add(sum, item.attributes)
            changed = true
            item.used = true 
```

I'll let you fill in the `add` and `init` functions. The `add` one should be simple; it adds each element in the second parameter to each element in the first. The `init` needs to set each element in `sum` that may be used (tested or added to) to `0`.

# iphone - IBOutlet UITextView 在调用另一个类 initWithNibName 并使用方法返回类后为零

> ID：11578394
> 
> 赞同：-2
> 
> 时间：2012-07-20T11:27:02.593
> 
> 标签：iphone, ios, uipopovercontroller

我的问题是，在**ProductNote**类`UIButton`Action 中，我做了`initWithNibName` **Notes Class**以在**Notes** Class中显示**popOver**。我正在从中获取数据，然后将其加载到. 我得到了**selectedNote**并创建了**ProductNote 类**的对象来调用**selectedNote**实例方法，该方法只设置了**IBOutlet** ，但它的值为 nil。那是我的问题，下面是代码，请帮助我了解为什么我会遇到此类问题。我正在使用**Xcode 4.3.3**而不是**ARC**。我在每个 ViewController 上手动定义了 dealloc 方法`UITableView`**`sqlite``UITableView``tableViewDidSelectRowAtindexPath:` ********`textview.text`**********

 ******```
//**ProductNote.h Class****************************
#import <UIKit/UIKit.h>
@class Notes;
@interface ProductNote : UIViewController<UIPopoverControllerDelegate>
{
UIPopoverController *popOverController;
UITextView *txtmesssagenotes;
Notes *objNotes;
}
@property (retain, nonatomic) IBOutlet UITextView *txtmesssagenotes; //It is Connected to ProductNote.xib
@property (retain,nonatomic)  UIPopoverController *popOverController; 
@property (retain,nonatomic)  Notes *objNotes;
-(IBAction)presentPopOver:(UIButton*)sender;
 -(void)selectedNote:(NSString*)note;
@end

//ProductNote.m Class
@implementation ProductNote
@synthesize txtmesssagenotes,popOverController,objNotes;

-(IBAction)presentPopOver:(UIButton*)sender
{
self.objNotes=[[Notes alloc]initWithNibName:@"Notes"bundle:nil];
UIPopoverController *popOver=[[[UIPopoverController alloc]initWithContentViewController:objNotes]autorelease];
self.popOverController=popOver;
self.popOverController.delegate=self;
self.popOverController.popoverContentSize=objNotes.view.frame.size;
CGRect rect=[self.view convertRect:objNotes.view.frame fromView:self.view];
rect.origin.y+=110;
rect.origin.x+=23;
[self.popOverController presentPopoverFromRect:rect inView:self.view permittedArrowDirections:0 animated:YES];
 //Then I get popOver with tableview 
}
-(void)selectedNote:(NSString*)note
{
 self.txtmesssagenotes.text=note;     
 //Here I am getting txtmesssagenotes=0X0 or nil. Using self or without self Please tell me the reason.
}
- (void)dealloc {
[txtmesssagenotes release];
[popOverController release];
[objNotes release];
[super dealloc];
}
@end 
```

* * *

```
@interface Notes : UITableViewController
{
NSMutableArray *arrNotes;
NSString *selectedNote;
UITableView *tblNotes;
}
@property(nonatomic,retain)NSMutableArray *arrNotes;
@property(nonatomic,retain)NSString *selectedNote;
@property(nonatomic,retain)IBOutlet UITableView *tblNotes;
@end

//Actually I skip the other methods that makes larger program to read . other methods only    used to fetch data from sqlite and fill up the arrNotes that is used to fill all rows in the  tableview. 

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
 self.selectedNote=[self.arrNotes objectAtIndex:indexPath.row]; 
```

//这里self.arrNotes有效对象并包含数据，并将NSString对象赋值给self.selectedNote

```
ProductNote *productNote=[[ProductNote alloc]init];
[productNote selectedNote:self.selectedNote]; //after calling selectedNote i goto to selectedNote implementation or definition above.
[productNote release];

}
-(void)dealloc
{
[arrNotes release];
[selectedNote release];
[tblNotes release];
[super dealloc];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T11:56:38.150

这是因为正如您所说，txtmesssagenotes 是使用 IB 创建的。而且您从未展示过您的 ProductNote UIViewController 即时 productNote。因此 txtmesssagenotes 从未正确分配和初始化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T11:55:12.550

您是`selectedNote:`在视图加载之前打电话吗？

仅仅因为您使用 xib 创建了一个视图控制器并不意味着它会立即加载您的所有子视图。

解析 xib 并在第一次`view`请求视图控制器的属性时创建所有视图 - 这通常是在它第一次出现之前。

在那之前，所有的`IBOutlet`连接都将是`nil`.

您需要将笔记的文本存储为`NSString`视图控制器的属性。然后，在`viewDidLoad`您需要调用的任何一个内部`self.txtmesssagenotes.text=self.note;`-`viewDidLoad`在您的视图加载后自动调用，因此您可以保证到`IBOutlet`那时您已经设置了所有 s 。

你不应该依赖你的视图对象来存储你的应用程序的状态（在这种情况下，笔记的文本）。如果在您的视图控制器不可见时收到内存不足警告，那么您的所有视图对象都将被删除 - 只有当您的视图控制器再次可见时才会重新创建它们 - 如果您将注释字符串存储在 UITextView 中，那么它可能下次你要求它时不要在那里:) 你应该总是将数据存储在你的视图控制器的一个属性中（或者你控制的其他地方）并使用它来创建你的视图。******

# java - 在 ndk 上工作的 c++ midi 库

> ID：11578395
> 
> 赞同：0
> 
> 时间：2012-07-20T11:27:09.517
> 
> 标签：java, android, java-native-interface, midi

我需要一个库来将我在 c++ 中的一些音乐信息导出到一个 midi 文件（需要在 Android ndk 中工作）。

恐怕 tse3 对于 Android 平台来说太大了，我更喜欢一个较小的库，但我不知道。有没有办法让我通过 ndk Android 从 c++ 导出一个 midi 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T06:19:51.627

如果需要，这是一个与 Android 兼容的轻量级 Java MIDI 库。它不是你想要的 NDK，但你可以很容易地从你拥有的任何数据构建一个 MIDI 文件。

[http://code.google.com/p/android-midi-lib/](http://code.google.com/p/android-midi-lib/)

# sql - 将参数添加到命令 ADO.NET

> ID：11578397
> 
> 赞同：0
> 
> 时间：2012-07-20T11:27:15.183
> 
> 标签：sql, ado.net

我正在尝试使用以下代码从 db 中选择数据：

```
 getForecastsCommand.CommandText = @"SELECT TOP @Count * FROM Forecasts Order by [ForecastId] DESC";

   var countParam = getForecastsCommand.CreateParameter();
   countParam.ParameterName = "@Count";
   countParam.Value = count;
   countParam.DbType = DbType.Int32;
   getForecastsCommand.Parameters.Add(countParam); 
```

但它不起作用：

```
Incorrect syntax near '@Count'. 
```

为什么它不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T11:56:17.493

请试试这个`SELECT TOP (@Count) * FROM Forecasts Order by [ForecastId] DESC`

请注意，@count 用括号括起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T11:29:06.640

该语法看起来像 Microsoft Access 数据库。如果是，则不支持 TOP 参数。您将不得不构建字符串。

```
@"SELECT TOP " + Count + " * FROM Forecasts Order by [ForecastId] DESC"; 
```

# typo3 - 升级后没有 tt_news 存档

> ID：11578400
> 
> 赞同：0
> 
> 时间：2012-07-20T11:27:19.653
> 
> 标签：typo3, tt-news

我在 TYPO3 中使用 tt_news 扩展。我已将扩展从 2.5 更新到 3.2.1。更新后，我的页面正在使用`AMENU`但`###TEMPLATE_ARCHIVE###`无法正常工作。

这是我在 FE 中遇到的错误：
![在此处输入图像描述](../Images/862e2d448f41cb83c7d2c9ae9193a50a.png)

我的存档项目的内容文件夹配置良好（[http://clip2net.com/s/28oYA](http://clip2net.com/s/28oYA)），以及 TS 常量：

```
plugin.tt_news.archiveTypoLink.parameter = 104 
```

这里可能有什么问题？

# objective-c - 运行时出现clang错误

> ID：11578401
> 
> 赞同：0
> 
> 时间：2012-07-20T11:27:20.317
> 
> 标签：objective-c, xcode4.3, clang

我正在处理应用程序，突然自动删除了 prefix.pch 文件，出现此错误：Command /Volumes/Xcode/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang failed with exit code 1

我在谷歌搜索中没有找到任何有效的答案。请帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T11:32:32.290

看起来问题与我的子项目的架构设置有关。Xcode 4.2 将默认架构更改为仅 armv7 而​​不是 armv6 和 armv7。我已经将我的主项目更新为 armv6 和 armv7，但子项目仍然只使用 armv7。一旦我更新了所有子项目，它就开始正确链接。

# java - 线程化 apache cxf 客户端和高频请求的性能

> ID：11578404
> 
> 赞同：2
> 
> 时间：2012-07-20T11:27:30.730
> 
> 标签：java, performance, cxf

我有一个相对简单的 java 服务，它从各种 SOAP Web 服务中获取信息，并在后台使用 apache cxf 2.5.2 来实现。该服务启动 20 个工作线程，每小时处理 1000-8000 个请求，每个请求可以根据请求的性质进行 2-5 次 Web 服务调用。

**设置**

1.  我在 Web 服务连接上使用连接池
2.  连接超时设置为 2 秒，以便切实有效地处理请求量。
3.  所有连接都通过 http 代理发出。
4.  20 个工作线程
5.  Grunty 16 cpu 盒子

问题是我开始在日志中看到“连接超时”错误，而且其中有很多错误，而且应用程序服务似乎也影响了机器的网络性能，因为命令行中的 curl 只需 > 5 秒建立与相同 Web 服务的连接。但是，当我停止服务应用程序时，curl 性能大幅提高到 < 5ms

其他人是如何使用 CXF 解决这种情况的？它有效还是他们切换到不同的图书馆？如果您要从头开始，您将如何设计“小负载高频”事务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T11:54:18.977

一旦我们遇到与您类似的问题，请求需要很长时间才能完成。这不是`CXF`问题，每个 Web 服务的堆栈对于非常频繁的请求都会运行很长时间。

为了解决这个问题，我们实现了`JMS EJB`消息驱动 bean。流程如下：当用户将请求发送到 Web 服务时，所有请求都被放入`JMS`队列中，以便用户快速响应，请求在后台处理。之后，用户能够看到他们的操作：他们是否仍在发送到进程，如果他们正在处理，他们是否成功完成，或者他们是否由于某种原因未能完成。

如果我必须设计频繁交易的应用程序，我肯定会使用`JMS`它。

希望这可以帮助。

# php - 无法使用 Codeigniter 上传 base64 编码图像

> ID：11578407
> 
> 赞同：4
> 
> 时间：2012-07-20T11:27:44.817
> 
> 标签：php, codeigniter

我必须上传从 android 应用程序接收的 base64 编码图像。我正在使用 php codeigniter 框架。在通过论坛搜索时，此链接上的问题[How to upload base64encoded image in codeigniter](https://stackoverflow.com/questions/7976806/how-to-upload-base64encoded-image-in-codeigniter)与我的相同，但那里的解决方案对我不起作用。

这是我编写的代码：

```
private function _save_image() {
    $image = base64_decode($_POST['imageString']);
    #setting the configuration values for saving the image
    $config['upload_path'] = FCPATH . 'path_to_image_folder';
    $config['file_name'] = 'my_image'.$_POST['imageType'];
    $config['allowed_types'] = 'gif|jpg|jpeg|png';
    $config['max_size'] = '2048';
    $config['remove_spaces'] = TRUE;
    $config['encrypt_name'] = TRUE;

    $this->load->library('upload', $config);
    if($this->upload->do_upload($image)) {
        $arr_image_info = $this->upload->data();
        return ($arr_image_info['full_path']);
    }
    else {
        echo $this->upload->display_errors();
        die();
    }
} 
```

我收到“您没有选择要上传的文件”

谢谢你的时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T12:07:11.673

发生错误是因为 codeigniter 的上传库将查看`$_FILES`超全局并搜索您在`do_upload()`调用时提供的索引。

此外（至少在版本 2.1.2 中）即使您设置 $_FILES 超全局变量来模仿文件上传的行为，它也不会通过，因为上传库使用[is_uploaded_file](http://php.net/manual/en/function.is-uploaded-file.php)来准确检测这种对超全局变量的篡改。您可以在 system/libraries/Upload.php:134 中跟踪代码

恐怕您将不得不重新实现大小检查以及文件重命名和移动（我会这样做），或者您可以修改 codeigniter 以省略该检查，但这可能会使以后升级框架变得困难。

1.  将 $image 变量的内容保存到临时文件中，并将其设置`$_FILES`为如下所示：

    ```
     $temp_file_path = tempnam(sys_get_temp_dir(), 'androidtempimage'); // might not work on some systems, specify your temp path if system temp dir is not writeable
     file_put_contents($temp_file_path, base64_decode($_POST['imageString']));
     $image_info = getimagesize($temp_file_path); 
     $_FILES['userfile'] = array(
         'name' => uniqid().'.'.preg_replace('!\w+/!', '', $image_info['mime']),
         'tmp_name' => $temp_file_path,
         'size'  => filesize($temp_file_path),
         'error' => UPLOAD_ERR_OK,
         'type'  => $image_info['mime'],
     ); 
    ```

2.  修改上传库。您可以使用 codeigniter 内置[的 Extending Native Libraries 方式](http://codeigniter.com/user_guide/general/creating_libraries.html)，并定义一个 My_Upload （或您的前缀）类，复制粘贴 do_upload 函数并更改以下行：

    ```
    public function do_upload($field = 'userfile') 
    ```

    到：

    ```
    public function do_upload($field = 'userfile', $fake_upload = false) 
    ```

    和：

    ```
    if ( ! is_uploaded_file($_FILES[$field]['tmp_name']) ) 
    ```

    到：

    ```
    if ( ! is_uploaded_file($_FILES[$field]['tmp_name']) && !$fake_upload ) 
    ```

    并在您的控制器中，使用流动参数调用 do_upload() ：

    ```
    $this->upload->do_upload('userfile', true); 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T14:11:15.363

您知道，如果您以字符串形式接收 Base64 编码图像，则不需要使用 Upload 类。

相反，您只需要使用 base64_decode 对其进行解码，然后使用 fwrite/file_put_contents 来保存解码后的数据...

```
$img = imagecreatefromstring(base64_decode($string)); 
if($img != false) 
{ 
   imagejpeg($img, '/path/to/new/image.jpg'); 
} 
```

信用：[http](http://board.phpbuilder.com/showthread.php?10359450-RESOLVED-Saving-Base64-image) ://board.phpbuilder.com/showthread.php?10359450-RESOLVED-Saving-Base64-image 。

# webserver - 网络服务器上的 HtmlUnit：方法 ()V 未找到

> ID：11578409
> 
> 赞同：0
> 
> 时间：2012-07-20T11:27:49.113
> 
> 标签：webserver, htmlunit, nosuchmethoderror

我已经成功地在测试 java 项目中正确地运行了这个问题中的代码[，](https://stackoverflow.com/questions/9081743/how-to-call-getpage-from-htmlunit-webclient-and-have-settimeout-not-wait-forever)但是当我按照完全相同的过程在我的网络服务器中导入 HtmlUnit 时，我不断收到`org.apache.http.protocol.BasicHttpContext: method <init>()V not found`错误消息。

我试图运行的代码：

```
 package com.testing;

import java.io.IOException;
import java.net.MalformedURLException;

import com.gargoylesoftware.htmlunit.FailingHttpStatusCodeException;
import com.gargoylesoftware.htmlunit.WebClient;

public class testingUnit {

    public static void main(final String[] args) {
        final WebClient webClient = new WebClient();
        webClient.setTimeout(1000);
        try {
            System.out.println("Querying");
            webClient.getPage("https://bulksms.vsms.net/register/");
            System.out.println("Success");
        } catch (final FailingHttpStatusCodeException e) {
            System.out.println("One");
            e.printStackTrace();
        } catch (final MalformedURLException e) {
            System.out.println("Two");
            e.printStackTrace();
        } catch (final IOException e) {
            System.out.println("Three");
            e.printStackTrace();
        } catch (final Exception e) {
            System.out.println("Four");
            e.printStackTrace();
        }
        System.out.println("Finished");
    }

} 
```

安慰：

```
Querying
Exception in thread "main" java.lang.NoSuchMethodError: org.apache.http.protocol.BasicHttpContext: method <init>()V not found
    at org.apache.http.impl.client.AbstractHttpClient.createHttpContext(AbstractHttpClient.java:273)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:797)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:776)
    at com.gargoylesoftware.htmlunit.HttpWebConnection.getResponse(HttpWebConnection.java:152)
    at com.gargoylesoftware.htmlunit.WebClient.loadWebResponseFromWebConnection(WebClient.java:1439)
    at com.gargoylesoftware.htmlunit.WebClient.loadWebResponse(WebClient.java:1358)
    at com.gargoylesoftware.htmlunit.WebClient.getPage(WebClient.java:307)
    at com.gargoylesoftware.htmlunit.WebClient.getPage(WebClient.java:373)
    at com.gargoylesoftware.htmlunit.WebClient.getPage(WebClient.java:358)
    at com.testing.testingUnit.main(testingUnit.java:16) 
```

![在此处输入图像描述](../Images/f4f4ca88147df402c3783bb7ba446404.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T15:20:29.753

在这里发布屏幕截图后想通了。我完全忘记了更新网络应用程序库。我这样做并删除了我拥有的所有过时版本的 jars（在 webcontent/lib 文件夹中），上面的代码就像一个魅力。干杯!

# .net - IComparable 未正确排序对象

> ID：11578412
> 
> 赞同：1
> 
> 时间：2012-07-20T11:28:01.287
> 
> 标签：.net, vb.net, list, object

我有一个对象列表，用于存储我所做的提要搜索的搜索结果。在添加到列表时，我给对象一个结果相关性的分数，以便我可以将这些结果推到顶部。

我的对象实现了`IComparable`接口并具有 compareto 函数并且所有编译都正确但是当我对列表进行排序时（list.sort()）这似乎对结果没有任何影响（得分较高的项目不在顶部底端）

谁能告诉我我做错了什么？

```
Public Class SearchFeedItem
    Implements IComparable

    Private _score As Integer = 0

    Public Property Score() As Integer
        Get
            Return _score
        End Get
        Set(ByVal value As Integer)
            _score = value
        End Set
    End Property

    Public Function CompareTo(ByVal obj As Object) As Integer Implements System.IComparable.CompareTo
        Dim OtherItem As SearchFeedItem = CType(obj, SearchFeedItem)

        If Me.Score < OtherItem.Score Then
            Return 1
        End If

        If Me.Score > OtherItem.Score Then
            Return -1
        Else
            Return 0
        End If
    End Function

End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T11:54:39.120

如果你想在底部得分较高的项目，它应该是

```
 Public Function CompareTo(obj As Object) As Integer Implements IComparable.CompareTo

    If obj Is Nothing Then Return 1
    If Me.Score > DirectCast(obj, SortableObject).Score Then Return 1
    If Me.Score < DirectCast(obj, SortableObject).Score Then Return -1

    Return 0

    End Function 
```

`IComparable`这是一个实现从低到高排序的对象的快速示例。

```
Module Module1

    Sub Main()
        Dim sortableObjects = New List(Of SortableObject) From
                               {New SortableObject With {.Score = 12},
                               New SortableObject With {.Score = 5},
                               New SortableObject With {.Score = 120},
                               New SortableObject With {.Score = 99}}

        sortableObjects.Sort() // 5, 9, 99, 120
    End Sub
End Module

Public Class SortableObject : Implements IComparable
    Public Property Score As Integer

    Public Function CompareTo(obj As Object) As Integer Implements IComparable.CompareTo

    If obj Is Nothing Then Return 1
    If Me.Score > DirectCast(obj, SortableObject).Score Then Return 1
    If Me.Score < DirectCast(obj, SortableObject).Score Then Return -1

    Return 0
    // Edit: Or as Konrad mentioned,  Return (Me.Score.CompareTo(DirectCast(obj, SortableObject).Score)). This sorts the items in ascending order.

    End Function
End Class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T11:56:09.747

除了汉斯在评论中所说的（你需要实现通用接口！），代码有两点让我畏缩：

1.  使用`DirectCast`而不是`CType`. 后者是一个通用的演员表，不能很好地展示这里实际做了什么。`DirectCast`只允许某些强制转换发生，特别是没有转换。在这里很合适，因为您不转换。

2.  整个`CompareTo`方法可以缩短为一行：

    ```
    Return Score.CompareTo(OtherItem.Score) 
    ```

# sql-server - 如何在 SQL 中使用 CASE 优化查询

> ID：11578417
> 
> 赞同：0
> 
> 时间：2012-07-20T11:28:21.917
> 
> 标签：sql-server

我有一个带有 Union 语句的查询，只是为了检查大小写，但我想在 Where 中实现 CASE，但我是 SQL 的初学者，不知道我该怎么做。

我的查询就像

```
SELECT TOP 1 EndDate
           FROM   (
                      SELECT 1 AS seq,

                             EndDate,

                      FROM   pipeline_rest_envr_info e
                      WHERE  e.tckt_id = imt.tckt_id
                             AND stat = 'INPR'
                      UNION
                      SELECT TOP 1 2 AS seq,

                             EndDate,

                      FROM   pipeline_rest_envr_info e
                      WHERE  e.tckt_id = imt.tckt_id
                             AND stat = 'CMPL'
                      ORDER BY
                             enddate DESC
                      UNION
                      SELECT TOP 1 3 AS seq,

                             EndDate,

                      FROM   pipeline_rest_envr_info e
                      WHERE  e.tckt_id = imt.tckt_id
                             AND stat = 'PLND'
                      ORDER BY
                             strt_dt
                      UNION 
                      SELECT 4 AS seq,

                             NULL,

                      FROM   pipeline_rest_envr_info e
                      WHERE  e.tckt_id = imt.tckt_id
                  ) aa
           ORDER BY
                  aa.seq 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T12:31:59.247

SELECT TOP 1 EndDate
FROM（
选择（当 stat = 'INPR' 然后 1
当 stat = 'CMPL' 然后 2
当 stat = 'PLND' 然后 3
else 4 end
）作为 seq,EndDate
from pipeline_rest_envr_info e
left external join table2name imt on e.tckt_id = imt.tckt_id
) aa
ORDER BY
aa.seq

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T12:24:48.557

SELECT TOP 1 aa.*
FROM (
select (case when condition1 then result1
when condition2 then result2
...
else
default_result
end ) as result,... from tablename
) aa
ORDER BY
aa.seq

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T12:40:36.503

避免在 WHERE 中执行 CASE。而是在 SELECT 中应用它。此外，您还没有提到代表别名 IMT 的表

SELECT TOP 1 EndDate
FROM (
select
(
case when stat = 'INPR' then 1
when stat = 'CMPL' then 2
when stat = 'PLND' then 3
else 4 end
) as seq, EndDate
from pipeline_rest_envr_info e
内连接 不管表名是什么.tckt_id = imt.tckt_id
) aa
ORDER BY aa.seq

# javascript - IE8/IE9 检测是否启用第三方 cookie，如果没有则启用？

> ID：11578421
> 
> 赞同：-1
> 
> 时间：2012-07-20T11:28:35.613
> 
> 标签：javascript, internet-explorer-8, internet-explorer-9

有没有办法编写任何嗅探器来检测 IE8/9 上的第三方 cookie，如果不启用则启用。

代码 ：

navigator.cookieEnabled 启用了 cookie，但我的要求是该浏览器能够接受来自任何域的 cookie。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T11:44:57.693

You cannot change browser settings with JavaScript running from within a page.

# c# - 拆分功能设置

> ID：11578424
> 
> 赞同：1
> 
> 时间：2012-07-20T11:28:41.583
> 
> 标签：c#, split

我有一个列表字符串，其中包含一系列不同类型的数据。我一次读入列表字符串行，每一行我使用

`string[] tableNa = line.Split(',');`

这会在一行中获取所有不同的数据，用逗号分隔。但是我有一些这样的行：

`47,493,'1 = EMPTY, 2 = SEND, 3 = SENDING, 4 = SENT, 5 = NOTSENT. ',0,`

我希望拆分在引号内不起作用，因为我需要将其保留为一个数据。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T11:31:05.113

> 这可能吗？

显然可以做到这一点 - 但不是没有`string.Split`，没有别的。

如果你想要 CSV 解析，你应该找到一个好的（可能是开源的）CSV 解析库。我相信周围有很多，而且它们可能比您在尝试提供更具体的商业价值时*偶然创建的任何东西都更可靠。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T12:07:38.670

[用带引号和不带引号的字符串拆分逗号分隔的字符串](https://stackoverflow.com/questions/3776458/split-a-comma-separated-string-with-both-quoted-and-unquoted-strings)

具体来说，这个（正则表达式看起来很可怕，我知道，但它相对简单）：

```
public void SplitCSV(string input)
{
    Regex csvSplit = new Regex("(?:^|,)(\"(?:[^\"]+|\"\")*\"|[^,]*)", RegexOptions.Compiled);

    foreach (Match match in csvSplit.Matches(input))
    {
        Console.WriteLine(match.Value.TrimStart(','));
    }
}

private void button1_Click(object sender, RoutedEventArgs e)
{
    SplitCSV("111,222,\"33,44,55\",666,\"77,88\",\"99\"");
} 
```

# php - 许多类型的数据 - 一张表与多张表

> ID：11578425
> 
> 赞同：2
> 
> 时间：2012-07-20T11:28:41.917
> 
> 标签：php, mysql, sql, database

我正在开发一个 web 应用程序，其主要功能是向用户展示一些数据。但是，这些数据有几种类型，并且每种类型都必须以不同的方式呈现。

例如，我必须列出 9 个结果 - 3 本书、3 个作者和 3 个文件。

书用 (char)TITLE, (text)DESCRIPTION 描述。

作者用 (char)TITLE, (char)DESCRIPTION 描述。

文件用 (char)URL 描述。

此外，每种类型都有 ID、DATE、VIEWS 等字段。书籍和作者以简单的 HTML 代码呈现，文件使用网站上嵌入的外部阅读器。

我应该构建三个不同的表并在获取这些数据时使用 JOIN 还是构建一个表并将所有类型存储在其中？哪种态度更有效率？

附加信息 - 将会有大量的记录。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T11:33:47.280

这样做的逻辑方法是将事物分开，这遵循数据库设计的 3NF 规则。这在检索不同类型的结果时提供了更大的灵活性，特别是在有大量数据时。将所有内容放在一个表中绝对是糟糕的数据库实践。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T11:39:10.687

这取决于您的数据结构。

如果你有 1:1 的关系，比如一本书有一个作者，你可以把记录放在一行。如果一本书有多个作者或一个作者有几本书，您应该设置单独的表格`books`并将`authors`这些表格与`author_has_books`您拥有两个外键的表格链接。这样您就不会存储重复数据并避免不一致。

有关数据库规范化的更多信息：

[http://en.wikipedia.org/wiki/Database_normalization](http://en.wikipedia.org/wiki/Database_normalization)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T11:41:03.210

将它们分开并建立关系。这样，当您开始获取大量数据时，您会注意到性能提升，因为您一次只调用 3 个字段（即当您只是在看一本书时）而不是 7 个。

# java - 在 jframe 调整大小时调整 jpanel 的位置

> ID：11578427
> 
> 赞同：1
> 
> 时间：2012-07-20T11:28:50.727
> 
> 标签：java, swing, location, layout-manager

单击按钮时，我将面板添加到已显示的 JFrame 中。现在，当用户调整框架大小时，面板在其位置保持不变。我想要的是面板位置也应该随着框架调整大小而调整。有什么办法吗？

重新生成我的问题的代码：

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.BorderFactory;
import javax.swing.GroupLayout;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLayeredPane;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class ProblemPanelLocation {
    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                final JFrame frame = new JFrame("ProblemPanelLocation");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setSize(250, 250);
                final JPanel panel = new JPanel();
                panel.setSize(100, 100);
                panel.setBorder(BorderFactory.createBevelBorder(1));
                final JButton button = new JButton("Add panel");
                button.addActionListener(new ActionListener() {
                    @Override
                    public void actionPerformed(ActionEvent e) {
                        panel.setLocation(button.getX() - button.getWidth() - 10, button.getY());
                        frame.getLayeredPane().add(panel, JLayeredPane.MODAL_LAYER);
                    }
                });
                GroupLayout layout = new GroupLayout(frame.getContentPane());
                frame.getContentPane().setLayout(layout);
                layout.setHorizontalGroup(
                    layout.createParallelGroup(GroupLayout.Alignment.LEADING)
                    .addGroup(GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                        .addContainerGap(317, Short.MAX_VALUE)
                        .addComponent(button)
                        .addContainerGap())
                );
                layout.setVerticalGroup(
                    layout.createParallelGroup(GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addContainerGap()
                        .addComponent(button)
                        .addContainerGap(266, Short.MAX_VALUE))
                );
                frame.setVisible(true);
            }
        });
    }
} 
```

场景：

1.  首先，您会看到一个带有按钮的框架。
2.  当您单击它时，将在框架的分层窗格中将面板添加到框架中。
3.  面板的位置是根据按钮位置计算的。
4.  现在，当您调整框架大小时，按钮也会移动到框架的右侧，但面板不会。

我想以一种类似于位置按钮的方式添加面板。可能吗？如果是，那我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T12:07:11.253

1.  使用组件监听器：

    ```
    frame.addComponentListener( new ComponentAdapter() {
        @Override
        public void componentResized( ComponentEvent e ) {
            panel.setLocation(button.getX() - button.getWidth() - 10, button.getY());
        }
    } ); 
    ```

2.  覆盖框架的 setBounds() 方法并更新那里的位置。不建议这样做，因为此代码将在与实际调整大小相同的 EventDispatcher-Event 中执行，但它可能有助于避免使用组件侦听器时缓慢的重绘。

# php - values not passed when css class is added i have a form which im using php and html. There is a strange problem. I have a several drop down menus <select id="probab" name="probab" class="selector regular">ID：11578437 赞同：1 时间：2012-07-20T11:29:26.997 标签：php, html, css 回答 #1 赞同：1 时间：2012-07-20T11:36:17.597 您的代码运行良好..问题出在其他地方.. 可能你有另一个同名的选择列表..</select>

# php - 如何在php中将两个数组与相应的递增键合并？

> ID：11578439
> 
> 赞同：1
> 
> 时间：2012-07-20T11:29:30.600
> 
> 标签：php, arrays

我在 php 中有两个数组

```
$arr1 = array(1=>332, 2=>333, 3=>74, 4=>78);
$arr2 = array(1=>'heading1', 3=>'heading2'); 
```

**注意：不应更改第二个数组键。**

我需要一个像下面这样的输出。

```
array(
    1 => 'heading1',
    2 => 332,
    3 => 'heading2',
    4 => 333,
    5 => 74,
    6 => 78
) 
```

请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T11:51:18.547

这提供了所需的输出..

```
$arr1 = array(1=>332, 2=>333, 3=>74, 4=>78);
$arr2 = array(1=>'heading1', 3=>'heading2');
$arr3 = array();
$total = count($arr1) + count($arr2);
for($i=1; $i<= $total; $i++)
{
    if(isset($arr2[$i])) {
        $arr3[$i] = $arr2[$i];
        continue;
    }

    $arr3[$i] = array_shift($arr1);
}

print_r($arr3); 
```

[键盘链接](http://codepad.viper-7.com/vZDDIS)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T11:31:39.527

[PHP 合并数组](http://php.net/manual/en/function.array-merge.php)

看看那个，看看页面上的例子:)

# android - JUNIT安卓。活动链接

> ID：11578440
> 
> 赞同：0
> 
> 时间：2012-07-20T11:29:32.930
> 
> 标签：android, junit

对不起我的英语，我来自俄罗斯。测试按钮，当按下时出现活动。如何获得此活动的链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T11:36:13.100

检查这个

```
 Button bt = (Button)findViewById(R.id.button1);
   bt.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {

        Intent intent = new Intent(this,yourcalss.class);
        startActivity(intent);
    }
}); 
```

# trigger.io - Trigger.io [Errno 18] 跨设备链接

> ID：11578443
> 
> 赞同：12
> 
> 时间：2012-07-20T11:29:46.400
> 
> 标签：trigger.io

当我尝试在 mac 上运行**包 ios**时，我得到以下信息：

```
[INFO] Forge tools running at version 3.3.5
[INFO] Update result: you already have the latest tools
[INFO] Configuration is unchanged: using existing templates
[INFO] Checking JavaScript files...
[INFO] JavaScript check complete
[INFO] Verifying your configuration settings...
[INFO] Configuration settings check complete
[INFO] Development build created. Use forge run to run your app.
[INFO] Forge tools running at version 3.3.5
[INFO] Checking JavaScript files...
[INFO] JavaScript check complete
[INFO] Verifying your configuration settings...
[INFO] Configuration settings check complete
[INFO] Starting package process for iOS
[INFO] Going to package: /Users/******************/device-ios.app
[INFO] Plist OK
[INFO] 1 Provisioned Device(s):
[INFO] ['c**************************b']
[ERROR] [Errno 18] Cross-device link 
```

应用配置、本地配置等上的设置都正确填写。

这是调试输出

```
........
in run
    self._run_task(func_name, args, kw)
  File "/Users/username/forge-workspace/compapp1/.template/generate_dynamic/build.py", line 293, in _run_task
    self.tasks[func_name](self, *args, **kw)
  File "/Users/username/forge-workspace/compapp1/.template/generate_dynamic/ios_tasks.py", line 568, in package_ios
    certificate_password=certificate_password,
  File "/Users/username/forge-workspace/compapp1/.template/generate_dynamic/ios_tasks.py", line 362, in create_ipa_from_app
    self._create_entitlements_file(build, plist_dict, temp_file_path)
  File "/Users/username/forge-workspace/compapp1/.template/generate_dynamic/ios_tasks.py", line 299, in _create_entitlements_file
    _replace_in_file(temp_file_path, 'APP_ID', bundle_id)
  File "/Users/username/forge-workspace/compapp1/.template/generate_dynamic/ios_tasks.py", line 294, in _replace_in_file
    os.rename(tmp_file, filename)
OSError: [Errno 18] Cross-device link 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-08T18:07:27.823

Go to `/Users/username/forge-workspace/compapp1/.template/generate_dynamic/ios_tasks.py` line 294,

change this line: `os.rename(tmp_file, filename)`

to this one: `shutil.move(tmp_file, filename)`

Package again.

[source](https://github.com/NZKoz/ocdtv/commit/ec2d3af744a5480974f0bc7a8d53c4d73c959ac9)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-21T16:03:17.377

你用的是外接硬盘吗？如果是这样，看起来我们已经被 Python 的限制所困扰（[http://docs.python.org/library/os.html#os.rename](http://docs.python.org/library/os.html#os.rename)）：

```
The operation may fail on some Unix flavors if src and dst are on different filesystems 
```

在短期内，你可以不在你的外置硬盘上运行你的伪造命令吗？我们将解决潜在问题并在此处报告。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T11:53:56.843

这在 v1.4.34 Trigger.io 平台版本中已修复 - 请参阅[http://docs.trigger.io/en/v1.4/release-notes.html#v1-4-34](http://docs.trigger.io/en/v1.4/release-notes.html#v1-4-34)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T19:01:55.487

我在 Ubuntu 上编译 iOS 包时遇到了同样的问题。我有一个加密的主目录，这可能是跨文件系统问题的原因。

幸运的是，感谢@Amir 的出色回应，我能够轻松解决问题。

来自[http://docs.python.org/dev/library/tempfile.html#tempfile.mkstemp](http://docs.python.org/dev/library/tempfile.html#tempfile.mkstemp)

> 如果指定了 dir，则文件将在该目录中创建；否则，使用默认目录。默认目录是从与平台相关的列表中选择的，但应用程序的用户可以通过设置 TMPDIR、TEMP 或 TMP 环境变量来控制目录位置。

我只是通过使用以下命令启动 Trigger 来移动临时目录：

```
export TMPDIR="/home/me/tmp"
python /home/me/source/TriggerToolkit/run_trigger_toolkit.py 
```

# ruby - rspec '没有要加载的文件'

> ID：11578447
> 
> 赞同：0
> 
> 时间：2012-07-20T11:30:07.340
> 
> 标签：ruby, rspec, ironruby

我有一个烦人的问题，即 rspec gem 安装在我的机器上，但是当我需要它时，我得到一个“没有要加载的文件”错误。跟踪如下所示。这个问题似乎在极少数情况下也会消失，然后很快就会出现。任何帮助将不胜感激。我正在使用 IronRuby，但在 Ruby 中似乎也发生了同样的情况。

```
 C:\Users\MicalM02>igem list

   *** LOCAL GEMS ***

   builder (3.0.0)
   ci_reporter (1.7.0)
   cucumber (0.6.3)
   diff-lcs (1.1.3)
   iron-term-ansicolor (0.0.3)
   json_pure (1.7.3)
   polyglot (0.3.3)
   rake (0.9.2.2)
   rspec (2.11.0)
   rspec-core (2.11.0)
   rspec-expectations (2.11.1)
   rspec-mocks (2.11.1)
   term-ansicolor (1.0.7)
   treetop (1.4.10)

   C:\Users\MicalM02>ir
   IronRuby 1.1.3.0 on .NET 4.0.30319.269
   Copyright (c) Microsoft Corporation. All rights reserved.

   >>> require "rubygems"
   => true
   >>> require "spec/expectations"
    d:/Program Files (x86)/IronRuby 1.1/Lib/ruby/1.9.1/rubygems/custom_require.rb:29
    :in `require': no such file to load -- spec/expectations (LoadError)
            from d:/Program Files (x86)/IronRuby 1.1/Lib/ruby/1.9.1/rubygems/custom_
    require.rb:29:in `require'
           from (ir):1

    >>> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T12:59:20.187

它是：需要“rspec/expectations”

你缺少一个“r”

# python - 在 Python 和 QT 中与 userIsCheckable 枚举相反

> ID：11578450
> 
> 赞同：0
> 
> 时间：2012-07-20T11:30:14.177
> 
> 标签：python, qt, pyqt

我们有 Qt.ItemIsUserCheckable 标志，我需要它的反面，可能类似于 Qt.ItemIsUser* *Un* *Checkable 但这显然不存在如果我们将它作为 setItemIsUserCheckable 之类的函数，我需要的是 setItemIsUserCheckable （错误的）

我想在 QTreeWidgetItem 上设置标志（），我们正在考虑允许特权用户能够检查或取消选中 QTreeWidgetItem，我们可以继续禁用该项目，但我们真的不希望项目像它那样褪色禁用时，因此 setDisabled() 不是一个选项

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T13:07:55.510

这些标志实际上是位标志。我认为您可以像这样禁用特定标志（在 c++ 语法中）：

```
Qt::ItemFlags flags = myTreeWidgetItem->flags();
flags &= ~Qt::ItemIsUserCheckable;
myTreeWidgetItem->setFlags(flags); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T19:45:24.233

下面工作的最终代码可能会帮助其他人

```
flags = myTreeWidgetItem.flags()
flags &= ~QtCore.Qt.ItemIsUserCheckable
item.setFlags(flags) 
```

# android - Android：使用 ImageLoader 降低图像质量

> ID：11578452
> 
> 赞同：1
> 
> 时间：2012-07-20T11:30:22.087
> 
> 标签：android, image, bitmap, bitmapfactory

我正在使用[https://github.com/thest1/LazyList](https://github.com/thest1/LazyList)进行图像缓存。我必须全屏显示图像。但图像质量有很大损失。我必须更改哪些代码才能获取原始图像。提前谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T11:35:24.450

在 ImageLoader 类中寻找这个方法，

```
 private Bitmap decodeFile(File f){
    try {
        //decode image size
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        BitmapFactory.decodeStream(new FileInputStream(f),null,o);

        //Find the correct scale value. It should be the power of 2.
        final int REQUIRED_SIZE=70;
        int width_tmp=o.outWidth, height_tmp=o.outHeight;
        int scale=1;

           while(true){
                if(width_tmp/2<REQUIRED_SIZE || height_tmp/2<REQUIRED_SIZE)
                    break;
                width_tmp/=2;
                height_tmp/=2;
                scale*=2;
            }
        //decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize=scale;
        return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
    } catch (FileNotFoundException e) {}
    return null;
} 
```

并从此方法中删除以下行，

```
while(true){
                if(width_tmp/2<REQUIRED_SIZE || height_tmp/2<REQUIRED_SIZE)
                    break;
                width_tmp/=2;
                height_tmp/=2;
                scale*=2;
            } 
```

这将确保您的图像根本不会被缩放。

> 但是你必须记住，如果你这样做，你的应用程序很容易受到 OOM 的影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T11:36:25.890

在你`ImageLoader.java`的功能

```
//decodes image and scales it to reduce memory consumption
    private Bitmap decodeFile(File f) 
```

用于缩放/调整您的图像大小。

```
final int REQUIRED_SIZE=70; 
```

增加它以提高图像质量。让它200或什么，然后尝试。

# sql - 通过sql中的单个列引用多个表

> ID：11578453
> 
> 赞同：2
> 
> 时间：2012-07-20T11:30:29.383
> 
> 标签：sql, foreign-keys

在 SQL 中，表中的单个列可以引用多个表吗？

例如，如果我们有表`employee`(PK `emp_id, name`) 和`customer`(PK `cust_id, name`)

我们可以有一个表`contact`（id 引用`[employee, customer], number`）；

或者我们是否一定需要制作 2 个表：

`contact_cust`(`cust_id`参考`customer, number`) 和`contact_emp`(`emp_id`参考`employee, number`)

我知道第二个选择会更好，即使第一个是可能的。我只想知道第一种方法可行吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T11:59:13.760

不，你不能。一种选择是首先将员工/客户概括为“当事人”或“利益相关者”。
IE

```
TABLE: Party(PK Party_Id,
             Name)  
TABLE: Employeee(PK Emp_Id REFERENCES Party.Party_Id, 
                 Salary)  
TABLE: Customer(PK Cust_Id REFERENCES Party.Party_Id,
                CreditRating) 
```

然后 Contact 将引用 Party。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T11:38:49.840

不，您不能有一个具有引用两个不同表的外键的列。

# css - 视频不显示？

> ID：11578455
> 
> 赞同：2
> 
> 时间：2012-07-20T11:30:33.537
> 
> 标签：css, html, video

```
<video width="320" height="240" controls="controls">
  <source src="movie.mp4" type="video/mp4" />
  <source src="movie.ogg" type="video/ogg" />
  <source src="movie.webm" type="video/webm" />
  <object data="movie.mp4" width="320" height="240">
    <embed src="movie.swf" width="320" height="240" />
  </object> 
</video> 
```

我对视频概念很陌生，我从谷歌得到了这段代码。

但视频没有显示。

我正在使用html5。请帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T11:36:47.697

尝试这个：

```
<video width="320" height="240" controls="controls">
  <source src="movie.mp4" type="video/mp4" />
  <source src="movie.ogg" type="video/ogg" />
  Your browser does not support the HTML5 video tag.
</video> 
```

注意：您需要使用工具转换movie.ogg中的movie.mp4，而不仅仅是更改扩展名。

# css - 如何使用 CSS/JS/HTML 构建带有摘要行和多组的表格

> ID：11578457
> 
> 赞同：-3
> 
> 时间：2012-07-20T11:30:42.547
> 
> 标签：css, html, asp.net-mvc-4

我想使用以下方法构建表格： - CSS - JS - HTML5

以上不是问题。但我想要具有功能的表： - 汇总行 - 多组 - 自定义聚合

我正在从 MS Excel 中搜索类似的数据透视表。

有没有可以帮助我的框架（开源）？

我搜索的示例（Silverlight 示例）：

[http://leeontech.files.wordpress.com/2010/03/sr2.png](http://leeontech.files.wordpress.com/2010/03/sr2.png) [http://leeontech.files.wordpress.com/2010/03/sr1.png](http://leeontech.files.wordpress.com/2010/03/sr1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T11:41:03.037

[jQuery](http://jquery.com/)及其插件[DataTables](http://datatables.net/ "数据表")将为您解决问题。在各个网站上查找示例，它具有您似乎需要的一些功能（排序、“摘要行”等）。

# iphone - 如何在后台反复向服务器发送请求？

> ID：11578463
> 
> 赞同：1
> 
> 时间：2012-07-20T11:30:55.610
> 
> 标签：iphone, objective-c, ios

在我的应用程序中，我需要在特定时间间隔后向服务器发送请求以获取 xml，例如 1 小时以获取最新数据。我想在后台执行此活动。有人可以建议我如何实现这一点吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T11:40:39.090

使用 NSTimer 进行重复请求，如果您想在后台线程中执行请求，您应该执行以下操作：

```
backgroundTask = [[UIApplication sharedApplication] beginBackgroundTaskWithExpirationHandler: ^{
                    [[UIApplication sharedApplication] endBackgroundTask:backgroundTask];
                    backgroundTask = UIBackgroundTaskInvalid;
                 }];

dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    //start url request
});

//after url request complete
[[UIApplication sharedApplication] endBackgroundTask:backgroundTask];
    backgroundTask = UIBackgroundTaskInvalid; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T11:56:26.220

为了解决上述问题，我创建了 NSOperation 来向服务器发送请求并解析响应。它非常有用并且比使用线程更好。

1.我创建了 NSTimer 实例，它将在特定时间间隔后调用 -(void)sendRequestToGetData:(NSTimer *)timer，如下所示：

```
//Initialize NSTimer to repeat the process after particular time interval...
    NSTimer *timer = [NSTimer timerWithTimeInterval:60.0 target:self selector:@selector(sendRequestToGetData:) userInfo:nil repeats:YES];
    [[NSRunLoop currentRunLoop] addTimer:timer forMode:NSDefaultRunLoopMode]; 
```

2.然后在 sendRequestToGetData 中，我通过子类化 NSOperation 创建了 NSOperation，如下所示：

```
-(void)sendRequestToGetData:(NSTimer *)timer
{
    //Check whether user is online or not...
    if(!([[Reachability sharedReachability] internetConnectionStatus] == NotReachable))
    {
        NSURL *theURL = [NSURL URLWithString:myurl];
        NSOperationQueue *operationQueue = [NSOperationQueue new];
        DataDownloadOperation *operation = [[DataDownloadOperation alloc] initWithURL:theURL];
         [operationQueue addOperation:operation];
         [operation release];
    }
} 
```

注意：DataDownloadOperation 是 NSOperation 的子类。

```
//DataDownloadOperation.h

#import <Foundation/Foundation.h>

@interface DataDownloadOperation : NSOperation
{
    NSURL *targetURL;
}
@property(retain) NSURL *targetURL;
- (id)initWithURL:(NSURL*)url;

@end

//DataDownloadOperation.m
#import "DataDownloadOperation.h"
#import "XMLParser.h"

@implementation DataDownloadOperation
@synthesize targetURL;

- (id)initWithURL:(NSURL*)url
{
    if (![super init]) return nil;
    self.targetURL = url;
    return self;
}

- (void)dealloc {
    [targetURL release], targetURL = nil;
    [super dealloc];
}

- (void)main {

    NSData *data = [NSData dataWithContentsOfURL:self.targetURL];
    XMLParser *theXMLParser = [[XMLParser alloc]init];
    NSError *theError = NULL;
    [theXMLParser parseXMLFileWithData:data parseError:&theError];
    NSLog(@"Parse data1111:%@",theXMLParser.mParsedDict);
    [theXMLParser release];
}

@end 
```

# android - 想要为移动操作系统中的应用程序永久存储两个变量

> ID：11578464
> 
> 赞同：3
> 
> 时间：2012-07-20T11:30:58.187
> 
> 标签：android, mobile, titanium, appcelerator, appcelerator-mobile

我正在尝试在 Titanium Appcelerator 中开发一个应用程序，我在该应用程序中所需要的只是它应该始终在后台运行并收集当前`GPS`坐标并将其发送到服务器。我希望应用程序永久记住的是服务器`IP`的`PORT`编号。如果手机关闭然后再次打开，IP 和端口应该在那里。我认为对于这两个变量，我不应该使用数据库。除了使用数据库之外，他们还有其他永久存储`IP`和编号的方式吗？ 谢谢`Port`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-20T11:40:14.550

你可以试试 ：-

// 设置一次。这就像数据库一样工作

```
Titanium.App.Properties.setString("ip",<value>); 
```

// 获取任何位置

```
Titanium.App.Properties.getString("ip","value"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T11:34:14.940

您可以使用 SharedPreferences 来存储它们。

# jsf - 在 jsf 2.0 中对用户进行身份验证

> ID：11578468
> 
> 赞同：0
> 
> 时间：2012-07-20T11:31:37.547
> 
> 标签：jsf, javabeans

我正在使用 jsf 2.0 和 netbeans 7.1 开发 Web 应用程序，所以我想在用户访问应用程序之前对用户进行身份验证

我的问题是我如何确定该用户在他的“会话”中？

我搜索并发现我必须使用会话 bean 但我没有得到问题的“补救措施”

感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T20:42:15.507

答案真的取决于你的要求。最简单的解决方案是使用容器管理的身份验证（通过 JAAS）。所有 j2ee/servlet 容器都支持这一点，但有些容器“以自己的方式”实现它，所以你必须检查文档。我知道对于 tomcat 和 jboss，打开它非常简单，并且（假设您正确配置了 web.xml）只要相信它们正在加载您的页面，会话就会被授权。你可能想用你的一些要求来扩大这个问题。这真的会促使人们给你一个比我提供的更具体的答案。

TIA

# java - GWT 开发模式 - 无法在 Chrome 中加载模块

> ID：11578471
> 
> 赞同：7
> 
> 时间：2012-07-20T11:31:42.487
> 
> 标签：java, gwt, development-mode

我正在尝试在我的本地 ip 127.0.0.1 上使用 Chrome v. 20.0 以开发模式加载我的应用程序。应用加载失败，显示如下：

1.  消息：“GWT 代码服务器已断开连接很可能，您关闭了 GWT 开发模式。或者，您可能丢失了网络连接。要解决此问题，请尝试重新启动 GWT 开发模式并刷新此页面。”

2.  在上一条消息之上（覆盖）：“插件无法连接到位于 127.0.0.1:9997 的开发模式服务器，请遵循基础故障排除说明”

这开始发生在大约 6-9 个月前，经过 1 或 2 个页面刷新后，模块正确加载。现在，我根本无法使用 Chrome 以开发模式加载我的应用程序。（在 Firefox 中一切正常）。我正在使用 GWT 2.4

更新：

这些错误不伴随任何代码堆栈跟踪输出。通常，如果我将地址形式 127.0.0.1 更改为 localhost，则模块已加载，但这不再起作用...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-07T15:30:02.953

有同样的问题。删除/重新安装插件对我有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T10:09:04.417

选中从运行配置中自动选择未使用的 GWT 端口。我的类似问题由此解决

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-16T10:13:07.047

我通过以下方式在chrome中解决了这个问题：

*   转到 chrome://extensions/
*   找到 GWT 开发者插件
*   取消选中启用框
*   选中启用框

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T15:37:54.223

看看[http://code.google.com/p/google-web-toolkit/wiki/TroubleshootingOOPHM](http://code.google.com/p/google-web-toolkit/wiki/TroubleshootingOOPHM)

此页面应该显示在消息下方的 iframe 中（因此显示消息“基本说明”，但 Google 已经更改了一些服务器代码`code.google.com`，他们现在禁止在 iframe 中显示，这就是它实际上不显示的原因。

仅供参考，该问题已在 GWT 的问题跟踪器[http://code.google.com/p/google-web-toolkit/issues/detail?id=7301上报告](http://code.google.com/p/google-web-toolkit/issues/detail?id=7301)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-18T14:52:02.683

您的问题可能是由不正确的 gwt 插件设置引起的。在 chrome 中转到您的 gwt 开发人员插件选项（红色工具箱右上角）并添加您的 Web 和代码服务器地址。这对我有用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-29T06:20:55.483

允许“localhost”作为网络服务器和代码服务器使它对我有用（尽管在浏览器中为两者指定了 127.0.0.1）

# php - 在php中解析xml数组

> ID：11578474
> 
> 赞同：0
> 
> 时间：2012-07-20T11:31:44.780
> 
> 标签：php, arrays

> **可能重复：**
> [能够在 print_r() 的输出中看到一个变量，但不确定如何在代码中访问它](https://stackoverflow.com/questions/6322084/able-to-see-a-variable-in-print-rs-output-but-not-sure-how-to-access-it-in-c)

```
SimpleXMLElement Object

(
[Header] => SimpleXMLElement Object
    (
    )

[Body] => SimpleXMLElement Object
    (
        [CreateUserResponse] => SimpleXMLElement Object
            (
                [username] => anup_165
                [password] => xnrrtgohgv
                [result] => SimpleXMLElement Object
                    (
                        [succeeded] => true
                        [errorCode] => 0
                        [errorText] => SimpleXMLElement Object
                            (
                            )

                    )

            )

    )

) 
```

我想从上面的数组中获取用户名、密码并成功

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T11:39:25.673

你的意思是：

```
$username = (string) $xml->Body["CreateUserResponse"]->username;
$password = (string) $xml->Body["CreateUserResponse"]->password; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T11:39:54.403

好吧，我在这里四处走动，但可能是这样的：

```
$object['body']['CreateUserResponse']['username'] 
```

和
$object['body']['CreateUserResponse']['password']

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T12:08:18.290

```
 //For Parsing the xml 
    $xmltoaparse=simplexml_load_string($xmlresponse);

    foreach($xmltoaparse->children() as $iasorecord)
    {

             foreach($iasorecord as $iasouserrecord)  //for each for machhnia attributes
                   {
                        foreach($iasouserrecord as $iasousersrecord)  //for each for machhnia attributes
                            {

                echo $iasousersrecord->getName();
                echo    $iasousersrecord;

                            }
                   }
    } 
```

# javascript - 将字符串传递给给出 NULL 的事件侦听器

> ID：11578476
> 
> 赞同：1
> 
> 时间：2012-07-20T11:31:56.877
> 
> 标签：javascript

我有以下一段代码。字符串正在`uploadFile`正确发送，但线路`alert(str)`给了我`undefined`？

```
function uploadFile(str){
    alert(str); //prints correctly
    var fileTag = document.getElementById('fileinput');
    var file = fileTag.files[0];
    var xmlhttp=new XMLHttpRequest();
    var formData = new FormData();
    formData.append("thefile", file); 
    xmlhttp.addEventListener("load", function(evt,str){
         alert(str); //undefined
    }, false);
    ....
} 
```

我对javascript很陌生，所以谁能告诉我为什么会这样？谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T11:36:59.167

事件处理函数接收一个参数：一个`event`对象。

您的事件处理程序

```
function(evt,str) { } 
```

需要两个参数。自然，因为它没有收到第二个，所以`str`你得到的`str`是未定义的。

但是，如果您希望事件处理程序使用`str`定义为 的参数的变量，则`function uploadFile(str){ }`可以这样做，因为 evet 处理程序函数是在`uploadFile(str){ }`函数内部定义的。这称为闭包。只是改变

```
function(evt, str){ } 
```

至

```
function(evt) { } 
```

这样，您删除了 的内部定义`str`，它隐藏了外部定义，在`uploadFile(str)`. 所以在

```
xmlhttp.addEventListener("load", function(evt,str){
     alert(str);
}, false); 
```

您将真正得到字符串的警报`str`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T11:32:57.437

只需`str`从函数声明中删除

```
xmlhttp.addEventListener("load", function(evt){
     alert(str); //alerts str
}, false); 
```

# php - for循环中的两个条件

> ID：11578477
> 
> 赞同：6
> 
> 时间：2012-07-20T11:31:59.977
> 
> 标签：php

为什么这个 for 循环可以单独处理每个条件，但第一个条件一起并不重要？

```
for ($j = 0; $j < 5 or $j < $synCount; $j++) 
```

我只希望循环运行五次

或者

如果 synCount 小于这个值。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-20T11:34:49.190

您可能的意思是“ `$j`5***岁*** `$j`以下`$sysCount`”，或者：

```
$j < min(5, $sysCount) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T11:42:24.160

很简单

```
$j < min(5, $sysCount) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T11:37:07.030

```
for ($j = 0; $j < ($syncCount <= 5 ? $syncCount : 5); $j++) 
```

或稍微优化（但我猜5次或更少的迭代这*绝对*没关系）

```
for ($j = 0, $limit = min($syncCount, 5); $j < $limit; $j++) 
```

另一个不错的解决方案

```
foreach (range(0, min($syncCount, 5)) as $j) 
```

* * *

边注

```
$syncCount <= 5 ? $syncCount : 5  ==  min($syncCount, 5) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T11:34:43.160

您可以使用该`break`语句离开 for 循环：

```
for ($j = 0; $j < 5 ; $j++)
{
   if( $j >= $synCount )
      break;
   //treatment
} 
```

或者在循环之前计算你的限制：

```
$ max = $synCount < 5 ? $synCount : 5;
for ($j = 0; $j < $synCount  ; $j++)
{
   //treatment
} 
```

另一种解决方案，最快：使用`min()`：

```
for ($j = 0; $j < min(5, $synCount)  ; $j++)
{
   //treatment
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T11:34:54.323

试试这样：

```
$loopcount = ($syncount < 5) ? $syncount : 5;
for ($j = 0; $j < $loopcount; ++$j) {
} 
```

第一行确定是否`$syncount`小于 5，然后根据该值分配一个值`$loopcount`。然后循环运行所需的次数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-24T12:45:39.863

```
$productsprice=ProductPrice::model()->findAllByAttributes(array ('product_id'=>$products_data->product_id));
foreach($productsprice AS $productsprice):
   for($quantity = 0; $quantity <= 10; $quantity++)
   {
      echo '<li >'.array(value=>'ProductPrice::model()->getquantity($data->quantity)').'</li>' ;
   }
 endforeach; 
```

# entity-framework - 如何在已经包含这些更改的新数据库上跳过以前的 ef 迁移？

> ID：11578478
> 
> 赞同：1
> 
> 时间：2012-07-20T11:32:03.427
> 
> 标签：entity-framework, entity-framework-4, entity-framework-migrations

我遇到问题的场景如下：

1.  使用 EF 4.1 创建的 Code First 模型和生成的相应数据库
2.  EF 升级到 4.3.1 并添加了迁移（使用 IgnoreChanges，因为没有模型更改）以开始使用迁移（创建了 __MigrtionHistory 表并删除了 EdmMetadata） - 我们称之为“InitialMigration”
3.  模型发生了变化，比如添加了一个新属性并生成了一个添加相应列的迁移（我们称之为“NewPropertyMigration”），然后应用于开发数据库（使用我们的迁移到最新初始化策略版本）
4.  当代码升级到生产时，数据库会按预期更新为新列
5.  然后，当在 Dev 中创建一个全新的数据库并且因为它基于最新模型时，它将在创建后立即包含新列，但是当初始化策略运行时，它仍然发现“InitialMigration”和“NewPropertyMigration”为待处理但它们两者都失败了，因为 EdmMetadata 不存在所以没有什么可以删除并且新列已经存在所以无法添加

当我检查这个新数据库上的 __MigrationHistory 表时，它只包含“InitialCreate”条目，这样就可以解释为什么其他两个迁移被认为是挂起的。但是我看不出他们如何在没有被应用的情况下进入这个表，同时它们也不需要应用，因为数据库已经包含了它们所涵盖的任何更改。我错过了什么？

我只想补充一点，“InitialCreate”中的“模型”列与“NewPropertyMigration”中的不同似乎有点可疑，即使它们代表相同的模型。这可能是原因吗？

更新：这是我用来创建新数据库并同时自动应用任何迁移的代码

```
public class MigratePaymentsToLatestVersion<TContext> : IDatabaseInitializer<TContext> where TContext : DbContext
{
public void InitializeDatabase(TContext context)
{
    // Create a brand new database if it doesn't exist but still apply any pending migrations
    context.Database.CreateIfNotExists();
    var migrator = new DbMigrator(configuration);
    migrator.Update();
}
} 
```

更新 2：显示相同问题的更简单场景

在进一步调查这一点时，我已经能够在下面描述的更简单的场景中重现该行为：

1.  创建简单的模型和上下文
2.  在测试应用程序中添加一个实体 - 自动创建所有默认设置数据库并添加对象
3.  启用迁移 - 生成“InitialCreate”迁移
4.  Update-Database - 命令不返回挂起的迁移，因为 'InitialCreation' 已经在 __MigrationHistory 中
5.  删除数据库并重新运行测试应用程序 - 再次自动重新创建数据库
6.  此时我无法添加任何其他迁移或运行更新数据库，因为“InitialCreation”迁移被视为待处理但无法应用，因为所有实体都已存在

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T10:49:34.217

我现在已经整理好了。我遗漏的关键部分似乎与您从 4.1 迁移到 4.3 的方式有关。我一直在遵循[ef-4-3-migrations-and-existing-database 的](http://www.ladislavmrnka.com/2012/03/ef-4-3-migrations-and-existing-database/)步骤。似乎更好的是SO问题[how-to-use-migrations-on-an-existing-db中描述的过程](https://stackoverflow.com/questions/10602680/how-to-use-migrations-on-an-existing-db-in-production-created-using-entity-frame). 如果您比较它们，您会发现一个在您进行第一次迁移（称为“InitialMigration”）时依赖于 -IgnoreChanges，而另一个则创建一个完整的“InitialCreate”迁移，其中包含您当时的整个模型。后一种方法的两个重要后果是： - 当创建一个全新的数据库时 InitialCreate 迁移，其中包含模型的完整定义，用于创建数据库而不是“其他代码”（不确定但猜测这是部分未启用迁移时需要）基于模型生成数据库 - 使用最新模型创建新数据库，并在 __MigrationHistory 中列出所有迁移

因此，使用 InitialCreate 方法，我可以将迁移应用到现有数据库（对于他们来说，InitialCreate 只是被跳过，因为历史记录中的条目是作为过程的一部分手动添加的），同时我能够创建全新的数据库和向它们添加新的迁移，而不会出现模型和数据库不同步的错误。

我希望这对像我一样遵循第一个程序的人有所帮助。

# javascript - 在画布上拖动和绘制图像数据传输

> ID：11578480
> 
> 赞同：4
> 
> 时间：2012-07-20T11:32:10.010
> 
> 标签：javascript, html, drag-and-drop, html5-canvas, dom-events

我正在从 PC 上传图像。然后我用文件阅读器读取文件并通过创建一个 img 标签来显示图像。然后我将图像从 img 标签拖到画布中并将其绘制到画布上。我正在使用 dragstart 和 onDrop 事件。我使用`datatransfer.setdata()`and `datatransfer.getdata()`作为功能。但是在放置时，画布上绘制的图像并不像原来的那样。这是一个放大的版本。我不知道为什么会这样！

这是我的代码：

```
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Drag Demo</title>
<link href="copy.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div class="container">
<div style = "border:2px  solid black;">
<canvas id = "canvas" style = "position:relative;width:1000px;height:1000px;top:0px;left:200px; border:2px  solid black;" ondrop="dropIt(event);" ondragover="event.preventDefault();"> </canvas>    
</div>
<div>
    <input type="file" id="fileElem" accept="image/*" style="display:none" >
    <div id="fileSelect" class="drop-area">Select some files</div>
</div>
    <div id="thumbnail"></div>
</div>

<script type="text/javascript">

function dragIt(event) {
event.dataTransfer.setData("URL", event.target.id)
};

function dropIt(event) {
  var theData = event.dataTransfer.getData("URL");
  dt = document.getElementById(theData);
  alert(dt.width);
  alert(dt.height);
  event.preventDefault();
  var c = document.getElementById("canvas");
  var ctx = c.getContext('2d');
  ctx.drawImage(dt, 0, 0);      
};

var count = 0;
var fileSelect = document.getElementById("fileSelect"),
fileElem = document.getElementById("fileElem");

fileElem.addEventListener("change",function(e){
  var files = this.files
  handleFiles(files)
},false)  

fileSelect.addEventListener("click", function (e) {
    fileElem.click();
  e.preventDefault(); 
}, false);

function handleFiles(files) {  
  for (var i = 0; i < files.length; i++) {  
    var file = files[i];    
    var imageType = /image.*/; 

    if(!file.type.match(imageType)){
      console.log("Not an Image");
      continue;
    }

    var image = document.createElement("img");
    var thumbnail = document.getElementById("thumbnail");
    image.file = file;

    function handlefilereader(evt){
    var target = evt.target || evt.srcElement;
    image.src = evt.target.result;     
    }

    if(document.all) {
            image.src = document.getElementById('fileElem').value;
            }
            else {

    var reader = new FileReader()
    reader.onload = handlefilereader;
    reader.readAsDataURL(file);
    }
    image.id = count;
    count++;
    thumbnail.appendChild(image);
    alert(image.width);
    image.draggable = true;
    image.ondragstart = dragIt;
  }
}

</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T00:20:59.100

使用画布有 2 个“大小”设置：通过 CSS 您将设置显示大小，因此要设置画布的物理大小，您必须使用它的属性。所以没有 CSS/样式。

这样想：你创建一个物理大小的图像：（比方说）400px * 400px。
然后就像具有物理尺寸的普通图像（jpg，png，gif）一样，您仍然可以选择更改 DISPLAYED 尺寸，从而更改纵横比：例如 800px*600px。通常甚至支持 %。

希望这能清楚地解释为什么会发生这种情况以及为什么您在评论中的解决方案也是正确的解决方案！

# iphone - 我如何在 obj c 中实现这种智能搜索

> ID：11578484
> 
> 赞同：0
> 
> 时间：2012-07-20T11:32:22.607
> 
> 标签：iphone, objective-c, ios, uisearchbar, uisearchdisplaycontroller

在我的**iphone 应用程序**中，我有一个搜索屏幕，`UISearchDisplaycontroller`针对每个**scopeBar**关键字使用这个，我们可以过滤搜索结果，但是仅使用这个**scopeBar**按钮我无法达到我的要求。

看，我有一个成员列表，我需要根据州、国家、城市、姓名搜索成员。我应该在一个栏中显示这些搜索类型（比如**scopBar**）。

选择一个**范围栏**按钮（比如国家）后，如果我们在搜索栏中输入**“印度”**，它应该会显示该国家的所有成员。我怎样才能实现这种搜索？我尝试了很多搜索教程，但那些对我没有帮助。请帮帮我。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T12:19:40.843

根据 Apple 的示例代码，我们可以在搜索期间使用 2 个数组，其中 1 个是实际的，第 2 个是过滤后的数组，如示例参考：

[http://developer.apple.com/library/ios/#samplecode/TableSearch/Listings/MainViewController_m.html#//apple_ref/doc/uid/DTS40007848-MainViewController_m-DontLinkElementID_6](http://developer.apple.com/library/ios/#samplecode/TableSearch/Listings/MainViewController_m.html#//apple_ref/doc/uid/DTS40007848-MainViewController_m-DontLinkElementID_6)

但在您的情况下，我们需要 3 个数组，第三个数组将是过滤期间的本地数组（我们称之为 scopedFilteredArray）。

1.  按范围栏搜索所有对象：使用谓词（包含在 scopedFilteredArray 中，来自实际数组）。

2.  从 scopedFilteredArray 中搜索过滤后的对象，并将它们保存在 filtersArray 中以供显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T12:19:06.273

出现一个模式窗口以选择您的额外过滤器参数（将您想要的任何控件放在那里），并创建一个全局搜索 nsmutabledictionary 来存储您的参数。

我把它出现在书本（书签）按钮上（它通过了苹果检查），以便于访问。

# html - 从服务器获取图片的完整路径

> ID：11578492
> 
> 赞同：0
> 
> 时间：2012-07-20T11:32:49.183
> 
> 标签：html, c#-4.0, html-parsing

我想从服务器中提取图像并将其存储在我的本地系统中。`<img>`图像在标签中显示为背景。如何提取和存储图像。实际的图像标签如下所示

```
<img style="background:Url('..//contactdetails?data=4512354367432554')" src="some transparent image"/> 
```

在上面的标签图像中显示为背景， src 包含一些透明图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T11:50:13.830

您需要对图像执行请求，然后将其保存在您的机器上。首先获取图片的URI：

```
var html = @"<img style=""background:Url('..//contactdetails?data=4512354367432554')"" src=""some transparent image""/>";
var regex = new Regex(@"//(?<Path>[^']+)'", RegexOptions.Singleline)
var uri = regex.Match(html).Groups["Path"].Value; 
```

**编辑**

如果您正在使用`HtmlAgilityPack`（假设您已经提取了`a`标签），您可以使用该`Attributes`集合来获取`style`属性并对正则表达式执行匹配，或者您可以直接使用该`OuterHtml`属性来匹配模式，如下所示：

```
var anchorTag = YourCodeToGetTheAnchorTag();
var attribute = anchorTag.Attributes["style"];
var match = regex.Match(attribute.Value);
var uri = match.Groups["Path"].Value; 
```

或者，使用`OuterHtml`属性：

```
var anchorTag = YourCodeToGetTheAnchorTag();
var match = regex.Match(anchorTag.OuterHtml);
var uri = match.Groups["Path"].Value 
```

接下来，将图像的 uri 连接到服务器的目录，并创建一个请求：

```
var fullUri = "http://www.example.com/" + uri;
var request = (HttpWebRequest)WebRequest.Create(fullUri); 
```

获取响应并保存图像：

```
var response = request.GetResponse();
var image = Image.FromStream(response.GetResponseStream());
image.Save("path-on-your-machine"); 
```

# php - Axis网络摄像头http上传到php

> ID：11578496
> 
> 赞同：2
> 
> 时间：2012-07-20T11:32:57.637
> 
> 标签：php, http, webcam

大家好，我正在研究轴 p1343。我测试了ftp上传成功。

现在我需要使用 http 上传来处理我不需要保留 ol 图像的图像。所以我正在编写一个 php 脚本来处理来自该网络摄像头的图像缓冲区。

经过一番工作，我意识到凸轮没有发送任何东西。所以我创建了一个非常基本的脚本来测试 jpg 流。

我收到一个里面没有数据的请求。

有谁知道该相机如何以 HU（Httpp 上传）模式发送流？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T15:52:31.700

**解决了！**

**下载从 cam 发送的数据的解决方案** 只需使用 file_get_contents("php://input") 这样您就可以访问数据流并检索 cam 作为请求附件发送的数据。

发生这种情况是因为轴网络摄像头用于将文件作为请求的附件发送，以模拟浏览器中的“下载链接”请求。

因此，要赶上那些该死的位，您必须阅读 php://input 流 .... 花了一些时间来弄清楚这个解决方法...希望这会对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-04-06T14:27:15.573

```
<?php
file_put_contents('image.jpg', file_get_contents('php://input'));
?> 
```

# android - 如果选择“是”，我有一个启动视频的对话框。视频启动并播放，但完成后，对话框仍然存在

> ID：11578500
> 
> 赞同：0
> 
> 时间：2012-07-20T11:33:12.523
> 
> 标签：android, video, dialog

我正在编写一个 android 程序来显示一个对话框，并根据在对话框中单击的按钮显示或不显示视频。当用户单击是按钮时，它会播放。但是对话结束时仍然存在。为什么？

对话框的代码

```
 AlertDialog.Builder builder = new AlertDialog.Builder(this);
    //builder.setTitle(" MY_TEXT");
    builder.setMessage("Would you like to see a video?")
    .setView(checkBoxView)
    .setCancelable(false)
    .setPositiveButton("Yes", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int id) {
            //Start the movie
            startVideo();
            dialog.cancel();
        }
    })
    .setNegativeButton("No", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int id) {
            dialog.cancel();
        }
    }).show().getWindow().clearFlags(WindowManager.LayoutParams.FLAG_DIM_BEHIND); 
```

视频代码

```
 getWindow().setFormat(PixelFormat.TRANSLUCENT);
    final VideoView videoHolder = new VideoView(this);
    //if you want the controls to appear
    videoHolder.setMediaController(new MediaController(this));
    Uri video = Uri.parse("android.resource://" + getPackageName() + "/" 
            + R.raw.documentariesandyou); //do not add any extension
    //if your file is named sherif.mp4 and placed in /raw
    //use R.raw.sherif
    videoHolder.setVideoURI(video);
    setContentView(videoHolder);
    videoHolder.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {

        @Override
        public void onCompletion(MediaPlayer mp) {
            //exits video!
            videoHolder.stopPlayback();
            mp.release();
            finish();
        }
    });
    videoHolder.start(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T11:38:04.840

代替 dialog.cancel()

采用

解除对话（）；

dismissDialog() 将包含自我名称作为参数。核实。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T11:39:58.437

尝试`dialog.dismiss()`代替`dialog.cancel();`.

# html - 创建css全屏布局

> ID：11578502
> 
> 赞同：1
> 
> 时间：2012-07-20T11:33:19.370
> 
> 标签：html, css, fullscreen

Endles 试图创建一个 CSS 布局

```
<div id="act"><img src="img/home01.jpg"></div>    
<div id="buttons></div> 
```

img "home01" 应该适合屏幕。没有滚动，没有空格，没有溢出，无论监视器大小是什么，img 原始大小是什么。

div 按钮应该可以点击，即在img“home01”（更高的z-index）前面并且在屏幕上居中hor&ver。
请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T11:43:38.373

首先，您必须为您的 div id="act" 设置样式以覆盖整个屏幕，例如

```
#act{
    position:absolute;
    left:0; top:0; right:0; bottom:0;
    height:100%; width:100%;
} 
```

现在，您的 div 中有图像，因此将样式设置为该图像，例如

```
img { min-width:100%;min-height:100%; } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T11:44:46.737

```
<div id="act">
    <div id="buttons">
        <button>test1</button>
        <button>test2</button> 
        <button>test3</button> 
    </div>
    <div id="content"></div>
</div>

#act {
    position: absolute;
    width: 100%;
    height: 100%;
    background-image: url( "http://hdwallpaperpics.com/wallpaper/picture/image/Opera-Background-Blue-Swirls.jpg" );
}
#buttons {
    position: absolute;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T11:38:47.447

你试过宽度：100% 吗？如果 img 是背景图片（可平铺），请使用 background: url('img/home01.jpg') repeat-x 按钮应该在图片上方？那么你应该稍微改变你的html。将它们放在第一个 div 中。关闭 img 标签，如果你真的需要它。

[小提琴](http://jsfiddle.net/bCtf2/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-20T11:52:59.680

这是工作小提琴：http: [//jsfiddle.net/surendraVsingh/ZpvsC/](http://jsfiddle.net/surendraVsingh/ZpvsC/)

**HTML**

```
<div id="act"><img src="http://images.travelpod.com/tripwow/photos/ta-00ad-668e-a3e6/night-gondeliers-venice-italy%2B1152_12878015263-tpfil02aw-3646.jpg"></div>    
<div id="buttons">
     <ul>
        <li>Lorem</li>
        <li>Ipsum</li>
        <li>Dolor</li>
        <li>Lorem</li>
        <li>Ipsum</li>
        <li>Dolor</li>
    </ul>
</div>​ 
```

**CSS**

```
#act img{width:100%; overflow:hidden; position:relative;}
#buttons{position:absolute; z-index:999; top:20px; right:5%; color:#fff; display:block;}
#buttons li{display:inline-block; margin:0 5px 0 0;} 
```

​</p>

# c# - 从 C# 执行大型批处理文件时遇到问题

> ID：11578503
> 
> 赞同：4
> 
> 时间：2012-07-20T11:33:25.327
> 
> 标签：c#, batch-file, system.diagnostics

我正在使用 System.Diagnostics 类从我的 C# 应用程序执行一个批处理文件，并在此过程中使用输出更新我的 GUI，但是一旦我的批处理文件超过一定数量的行，该过程就会挂起。行的确切数量似乎有所不同，但我已经能够使用打印“Hello Kitty”316 次的简单批处理文件来重现它：

```
@echo off
echo Hello Kitty
echo Hello Kitty 
```

等等

如果我删除第 316 行，批处理文件将正常执行，并且表单应用程序的行为与预期一样，但任何更多行都会导致进程无限期挂起，甚至不会产生前 300 个 hello kitties 中的一个。

这是我执行批处理文件的代码：

```
process = new System.Diagnostics.Process();
process.StartInfo.FileName = batchName;
process.StartInfo.Arguments = " < nul";
process.StartInfo.CreateNoWindow = true;
process.StartInfo.RedirectStandardOutput = true;
process.StartInfo.RedirectStandardError = true;
process.StartInfo.UseShellExecute = false;
process.Start(); 
```

这些在其他地方声明：

```
protected Process process;
protected StreamReader output; 
```

我的主要形式是这样的（简化一点）：

```
string output;

while (!proc.Process.HasExited)
{
    proc.Process.WaitForExit(200);

    if (proc.Process.HasExited)
    {
        output = proc.Output.ReadToEnd();
        rtbStatus.AppendText(output);
    }

    Application.DoEvents();
} 
```

我不明白它为什么这样做，而且我在网上找到的任何例子都没有提到批处理文件的大小限制。请指教。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T11:35:05.730

您需要连续阅读输出 - 您不能等到最后。

输出将被缓冲，因此可以在进程挂起之前写入少量（通常约为 4KB）。

另一种方法是将输出定向到文件，然后读取文件。

# linux-device-driver - sys_open 是如何工作的？

> ID：11578504
> 
> 赞同：1
> 
> 时间：2012-07-20T11:33:27.647
> 
> 标签：linux-device-driver, system-calls

我编写了一个简单的字符设备驱动程序（mydev），其中包含“打开”文件操作。

在用户空间应用程序中，我打开此驱动程序节点。使用 open("/dev/mydev", O_RDONLY); open() 系统调用在内部调用 sys_open()。

我只想知道sys_open()函数如何调用我的驱动程序的打开文件操作。VFS 如何处理这个，它在内部调用哪个函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T13:16:53.057

我在《Understanding Linux Kernel》一书中找到了答案，第 12.5.1 节

步骤是，

1.  调用 getname() 从进程地址空间读取文件路径名。

2.  调用 get_unused_fd( ) 在 current->files->fd 中查找一个空槽。相应的索引（新的文件描述符）存储在 fd 局部变量中。

3.  调用 filp_open( ) 函数，将路径名、访问模式标志和权限位掩码作为参数传递。该函数依次执行以下步骤：

    一个。调用 get_empty_filp( ) 来获取一个新的文件对象。

    湾。根据标志和模式参数的值设置文件对象的 f_flags 和 f_mode 字段。

    C。调用 open_namei( )，它执行以下操作：

    ```
     i. Invokes lookup_dentry( ) to interpret the file pathname and gets the
          dentry object associated with the requested file.

       ii. Performs a series of checks to verify whether the process is permitted
          to open the file as specified by the values of the flags parameter. If so,
          returns the address of the dentry object; otherwise, returns an error code. 
    ```

    d。如果访问是用于写入，则检查 inode 对象的 i_writecount 字段的值。负值表示文件已被内存映射，指定必须拒绝写访问（参见第 15 章中的第 15.2 节）。在这种情况下，返回错误代码。任何其他值指定实际写入文件的进程数。在后一种情况下，递增计数器。

    e. 初始化文件对象的字段；特别是，将 f_op 字段设置为 inode 对象的 i_op->default_file_ops 字段的内容。这为将来的文件操作设置了所有正确的功能。

    F。如果定义了（默认）文件操作的 open 方法，则调用它。

    G。清除 f_flags 中的 O_CREAT、O_EXCL、O_NOCTTY 和 O_TRUNC 标志。

    H。返回文件对象的地址。

4.  将 current->files->fd[fd] 设置为文件对象的地址。
5.  返回 fd 。

# javascript - 使用 JavaScript 的 Google Drive：处理文件内容

> ID：11578506
> 
> 赞同：2
> 
> 时间：2012-07-20T11:33:36.687
> 
> 标签：javascript, google-drive-api

两个月前，在[Authorization of Google Drive using JavaScript](https://stackoverflow.com/a/10331393/1530236)中，
[@Nivco](https://stackoverflow.com/users/1313169/nivco)写了一篇关于“**处理文件内容**”的文章，非常诱人：

> 我们还可以改进文件内容服务器，使其支持 XHR 请求。

那么，“我们”在哪里可以找到有关此功能的 新闻或路线图、信息*等？*

* * *

^(实际上，这个问题是一个答复......（对[另一个问题](https://plus.google.com/110487324451850883514/posts/8W7HuS76whE)）)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T15:55:15.960

[这是一个使用CORS](http://code.google.com/p/google-api-javascript-client/wiki/CORS)的简短示例。
文件的 ID 存储在变量 < `theID`> 中；此 ID 是唯一的，只要文件未被删除（已删除的文件未被删除）就不会[更改](https://developers.google.com/drive/v2/reference/files#labels.trashed)。

*   首先`gapi.client.request`检索 downloadUrl 属性；返回值是一个短暂的值；
*   然后，`callback: function`发送一个经过身份验证的请求以检索文件的内容，这要归功于它的 <downloadUrl> ；
*   获胜者是……通过返回`onreadystatechange = function( theProgressEvent )`。

.

```
gapi.client.request({
    'path': '/drive/v2/files/'+theID,
    'method': 'GET',
    callback: function ( theResponseJS, theResponseTXT ) {
        var myToken = gapi.auth.getToken();
        var myXHR   = new XMLHttpRequest();
        myXHR.open('GET', theResponseJS.downloadUrl, true );
        myXHR.setRequestHeader('Authorization', 'Bearer ' + myToken.access_token );
        myXHR.onreadystatechange = function( theProgressEvent ) {
            if (myXHR.readyState == 4) {
//          1=connection ok, 2=Request received, 3=running, 4=terminated
                if ( myXHR.status == 200 ) {
//              200=OK
                    console.log( myXHR.response );
                }
            }
        }
        myXHR.send();
    }
}); 
```

^(使用“Chrome 20.0.1132.57 m”和“Firefox 14.0.1”测试)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T01:43:12.900

文件下载端点现在支持 CORS 请求。[实际上，我昨天已经更新了使用 JavaScript 对 Google Drive 授权](https://stackoverflow.com/questions/10330992/authorization-of-google-drive-using-javascript/10331393#10331393)的答案正文，以确保它反映了 API 的最新状态。我刚刚删除了您所指的尾随评论:)

# iphone - 如何以编程方式从 iphone 应用程序向 webmethod（web 服务）发送参数？

> ID：11578511
> 
> 赞同：0
> 
> 时间：2012-07-20T11:33:59.533
> 
> 标签：iphone, web-services

我开发了一个 Web 服务，它在 iphone 应用程序中提供特定州的医院名称。在我的应用程序中，表格视图中有不同的状态。当用户选择特定状态时，我需要将该特定状态名称发送到 Web 服务，以便它可以显示属于该特定状态的医院。我怎样才能做到这一点???请帮助我。我在这里呆了很长时间......提前谢谢......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T11:38:20.863

这一切都取决于您的网络服务。如果您使用的是 RESTful 网络服务，您可以执行类似[http://mysite.com?state=NewYork](http://mysite.com?state=NewYork)的操作，并且网络服务可以提取状态参数并发现用户正在寻找纽约。

如果您使用的是 SOAP Web 服务，则必须遵循 Web 服务的 WSDL 中定义的模式。

编辑1：

在任何一种情况下：在 iOS 应用程序中，您可以通过使您的类实现 UITableViewDelegate 并实现 tableView:didSelectRowAtIndexPath 来确定选择了哪个表行：（[文档在此处](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDelegate_Protocol/Reference/Reference.html)）此时您可以确定您正在寻找的状态并将该值添加到服务电话。

编辑2：

```
NSMutableURLRequest *request = [[NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"http://www.yoursite/webService"]] retain];
NSString *bodyLength =  [NSString stringWithFormat:@"%d", [bodyString length]];
[request addValue:@"text/xml; charset=utf-8" forHTTPHeaderField:@"Content-Type"];
[request addValue:bodyLength forHTTPHeaderField:@"Content-Length"];
[request setHTTPMethod:@"POST"];
[request setHTTPBody:[bodyString dataUsingEncoding:NSUTF8StringEncoding]];
NSURLConnection *myConnection = [NSURLConnection connectionWithRequest:request delegate:self];
[myConnection start]; 
```

# c# - 反序列化具有可变结构的 XML 文件

> ID：11578514
> 
> 赞同：3
> 
> 时间：2012-07-20T11:34:03.310
> 
> 标签：c#, xml, serialization

我需要对具有可变结构的 XML 文件进行反序列化。两个例子：

```
<xml>
    <OrgUnit GUID="1111">
        <OrgUnit GUID="2222">
            <OrgUnit GUID="3333" />
            <OrgUnit GUID="4444" />
            ...
        </OrgUnit>
    </OrgUnit>
</xml>

<xml>
    <OrgUnit GUID="1111" />
    <OrgUnit GUID="2222" />
    <OrgUnit GUID="3333">
        <OrgUnit GUID="4444" />
        <OrgUnit GUID="5555" />
    </OrgUnit>
</xml>

... 
```

如您所见，元素名称始终相同。问题是，元素的嵌套一直在变化。有没有办法用 XmlSerializer 实现这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T11:40:09.933

```
public class xml
{
    [XmlElement("OrgUnit")]
    public OrgUnit[] OrgUnits { get; set; }
}

public class OrgUnit
{
    [XmlAttribute]
    public int GUID { get; set; }

    [XmlElement("OrgUnit")]
    public OrgUnit[] OrgUnits { get; set; }
} 
```

进而：

```
class Program
{
    static void Main()
    {
        var serializer = new XmlSerializer(typeof(xml));
        using (var reader = XmlReader.Create("test.xml"))
        {
            var result = (xml)serializer.Deserialize(reader);
        }
    }
} 
```

它适用于任何嵌套深度`OrgUnit`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T11:40:58.687

当使用`xml`文档作为起点时，我总是更喜欢`xsd`作为文件和解析代码之间的契约。请注意，我使用“OrgUnits”作为根节点。

您可以使用`xsd.exe`为您创建可序列化的类。

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified">
  <xs:element name="OrgUnits">
    <xs:complexType>
      <xs:sequence>
        <xs:element maxOccurs="unbounded" ref="OrgUnit"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="OrgUnit">
    <xs:complexType mixed="true">
      <xs:sequence>
        <xs:element minOccurs="0" maxOccurs="unbounded" ref="OrgUnit"/>
      </xs:sequence>
      <xs:attribute name="GUID" use="required" type="xs:integer"/>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

# mysql - 合并来自不同模式的两个表以及更新的外键

> ID：11578518
> 
> 赞同：3
> 
> 时间：2012-07-20T11:34:08.910
> 
> 标签：mysql, foreign-key-relationship

我想从两个不同的模式合并两个具有相同结构的表。现在我正在通过以下查询执行此操作：

```
 INSERT INTO schema1.table1(col1,col2)
    SELECT col1,col2
    FROM schema2.table1; 
```

此查询将两个表很好地合并为一个，但未更新外键。它们与原始表格中的相同。那么有什么办法可以做到。

```
 CREATE TABLE  `research_delta`.`source` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `url` varchar(500) COLLATE utf8_bin NOT NULL,
  `createdOn` datetime NOT NULL,
  `modifiedOn` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `isDeleted` tinyint(4) NOT NULL DEFAULT '0',
  `structure` mediumblob,
  `firstRunStatus` varchar(50) COLLATE utf8_bin NOT NULL DEFAULT '0',
  `isMaster` tinyint(4) DEFAULT '0',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=7 DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='All the sources supported by the system';

CREATE TABLE  `research_delta`.`sourcetagitem` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `source` bigint(20) DEFAULT NULL,
  `tagItem` bigint(20) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `fk_source_sourcetagitem` (`source`),
  KEY `fk_tagItem_sourcetagitem` (`tagItem`),
  CONSTRAINT `fk_source_sourcetagitem` FOREIGN KEY (`source`) REFERENCES `source` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT `fk_tagItem_sourcetagitem` FOREIGN KEY (`tagItem`) REFERENCES `tagitem` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=287 DEFAULT CHARSET=utf8 COLLATE=utf8_bin;

CREATE TABLE  `research_delta`.`tagitem` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `name` varchar(100) COLLATE utf8_bin NOT NULL,
  `description` varchar(1000) COLLATE utf8_bin DEFAULT NULL COMMENT 'this field will contain any description details about the type of category or tag..',
  `parentId` bigint(20) DEFAULT NULL COMMENT 'if the category or tag in subject to be under any other catefory or tag then this field will contain the id of the category that it is under.',
  `createdOn` datetime DEFAULT NULL,
  `modifiedOn` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `isDeleted` tinyint(4) NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=286 DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='this table represents the tags and categories supported by a'; 
```

当我合并来自不同模式的两个 tagitem 表然后合并 sourcetagitem 表时，外键即 tagitem 应该在合并后使用更新的 tagitem id 进行更新。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T15:46:43.647

确实需要合并它们，还是在查询数据时可以使用联合？

```
(SELECT * FROM schema1.table1) UNION (SELECT * FROM schema2.table1) 
```

或者以同样的方式创建一个视图......

```
CREATE VIEW view1 AS  (SELECT * FROM schema1.table1) UNION (SELECT * FROM schema2.table1); 
```

然后从中选择您感兴趣的任何内容

```
SELECT col1 FROM vv; 
```

# android - android中的会话管理

> ID：11578525
> 
> 赞同：0
> 
> 时间：2012-07-20T11:34:30.977
> 
> 标签：android, session-management

我通过soap webservices成功开发了一个带有mysql数据库的登录表单。在这里我希望进行会话管理，但我无法开发。请帮我。

如果您需要编码部分，请参阅此[链接](http://codeoncloud.blogspot.in/2012/07/android-login-activity-with-mysql.html)（我在登录表单中使用了相同的代码）：

在这里，我做了以下修改。

*   在登录页面上添加了注销按钮。
*   如果我点击登录按钮意味着它成功意味着转到下一个活动，否则留在登录页面。下一个活动必须传递登录的人的用户名。现在我喜欢点击注销按钮意味着它已经移动到登录页面。好的现在仍然成功开发。但是现在在我的模拟器中，我单击返回符号意味着它转到显示的用户名。所以在这里我将制作会话概念..我如何在这里制作会话概念...因为我无法开发 dis part...请帮我。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T12:19:09.757

```
您可以像这样使用 SharedPreferences：
1.登录成功后将用户名存储在SharedPreferences中。
2\. 注销成功后从 SharedPreferences 中删除用户名。
3\. 覆盖下一个活动的 onResume() 方法并从 SharedPreferences 检查用户名。
if (pref.getString("username") == null) {
会话过期；重定向到登录活动。
}

**或者**

执行注销操作时清除活动堆栈。

    Intent intent = new Intent(this, LoginActivity.class);
    意图.setFlags（意图.FLAG_ACTIVITY_CLEAR_TOP）；
    开始活动（意图）；

```

[链接到共享偏好](http://developer.android.com/reference/android/content/SharedPreferences.html)

# sql - extractvalue 在使用带引号的 xpath 时失败

> ID：11578528
> 
> 赞同：0
> 
> 时间：2012-07-20T11:34:45.593
> 
> 标签：sql, oracle

我在运行查询时收到“ORA-21560：参数 3 为空、无效或超出范围”错误：

```
SELECT extractvalue(xmltype(blob2clob(shblobdata.blobdata)),
    '/booked-order/ads/online-content[name="quantity"]/value')
FROM shblobdata
WHERE id=...; 
```

完整的错误是：

```
ORA-21560: argument 3 is null, invalid, or out of range
ORA-06512: at "SYS.DBMS_LOB", line 978
ORA-06512: at "MORAS.BLOB2CLOB", line 14 
```

> 21560 . 00000 - “参数 %s 为空、无效或超出范围”
> 
> *原因：参数需要一个非空的有效值，但传入的参数值为空、无效或超出范围。示例包括当 LOB/FILE 位置或大小参数的值超出范围 1 到 (4GB - 1) 时，或者当使用无效的打开模式打开文件时等。
> 
> *操作：检查您的程序并更正例程的调用者以不传递空值、无效或超出范围的参数值。

我试图将“数量”更改为“数量”（将单引号更改为两个撇号），但得到了同样的错误。

blob的内容是：

```
<?xml version="1.0" encoding="utf-8"?>
<booked-order>
    <ads>
        <online-content>
            <name>quantity</name>
            <value>19872</value>
        </online-content>
    </ads>
</booked-order> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T12:15:41.843

问题出在您的自定义函数 MORAS.BLOB2CLOB 中。

错误信息也说得很清楚`ORA-06512: at "MORAS.BLOB2CLOB", line 14`

当您将 BLOB2CLOB 排除在外并进行测试时，提取物本身就可以了

```
SELECT EXTRACTVALUE (xmltype ( (shblobdata.blobdata)), '/booked-order/ads/online-content[name="quantity"]/value')
  FROM (SELECT '<?xml version="1.0" encoding="utf-8"?>
<booked-order>
    <ads>
        <online-content>
            <name>quantity</name>
            <value>19872</value>
        </online-content>
    </ads>
</booked-order>
' blobdata
          FROM DUAL) shblobdata
; 
```

它返回`19872`

我会先调试你的函数 blob2clob

```
SELECT blob2clob(shblobdata.blobdata)
  FROM shblobdata
 WHERE id=...; 
```

如果一切正常，请继续使用 XML 部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T12:08:21.193

异常显然是由 抛出的`BLOB2CLOB()`，它不是 Oracle 内置的。这是你自己写的或从互联网上的某个地方提取的东西。因此，我们对此无能为力。

更普遍的观点是，为什么要将 XML 存储在 BLOB 中？最好的方法是将其存储在定义为 Oracle 的 XMLTYPE 数据类型的列中。否则将其存储为 CLOB。

# r - 无法在 MASS 包中绘制内核密度 - 在 min(x) 中：min 没有非缺失参数；返回 Inf

> ID：11578531
> 
> 赞同：1
> 
> 时间：2012-07-20T11:34:55.823
> 
> 标签：r, plot, kernel-density

尝试绘制我的数据时，我收到以下错误消息：

```
1: In min(x) : no non-missing arguments to min; returning Inf
2: In max(x) : no non-missing arguments to max; returning -Inf 
```

这个可重现的代码有效：

```
# some dummy data
library(mvtnorm)
dat <- rmvnorm(10000, mean=c(x=4,y=4), sigma=matrix(c(1,0.5,0.5,1), ncol=2))
dat <- as.data.frame(dat)

# 2d density plot
library(MASS)
kdexy <- kde2d(dat$x,dat$y, n=50)
image(kdexy, col=grey(seq(1,0.2,length=10))) 
```

但是使用我的真实数据不会：

```
kdexy <- kde2d(temp$V1, temp$V2, n=50)
image(kdexy, col=grey(seq(1,0.2,length=10))) 
```

然而，这两个数据集的结构是相同的（虚拟数据 [dat] 和真实数据 [temp]）：

```
> str(dat$x)
 num [1:80000] 0.669 0.609 -0.633 0.565 0.559 ...
> str(temp$V1)
 num [1:823180] 0 0 0 0 0.0146 ...
> summary(dat$x)
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
-4.2270 -0.1902  0.4841  0.4900  1.1600  5.3570 
> summary(temp$V1)
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
-1.0000  0.0000  0.0000 -0.0289  0.0000  0.9844 
> range(dat$x)
[1] -4.227400  5.357184
> range(temp$V1)
[1] -1.000000  0.984375
> str(temp$V2)
 num [1:823180] 1 1 15.5 15.5 18.5 ...
> summary(temp$V2)
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
   1.00    1.00   18.45   23.55   35.96  116.10 
> range(temp$V2)
[1]   1.0000 116.0829 
```

它们都存储在数据帧中，我知道的唯一区别是长度，它以and`temp$V1`为界。`-1``1`

两个数据集的输出`kdexy <- kde2d()`不同。在示例数据中，这些`Z`部分填充了非常小的数字；在真实数据集中，每个点都填充了“NaN”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T11:35:09.030

我的数据高度集中在 0 ( `total n=850,000`, `n==0 ~ 650,000`) 附近。使用数据子集，其中`x<0`( `n=150,000`)，绘图有效。

# machine-learning - metaphone 与 soundex 与 NYSIIS

> ID：11578533
> 
> 赞同：12
> 
> 时间：2012-07-20T11:35:00.397
> 
> 标签：machine-learning, nlp, soundex, phonetics, metaphone

我正在尝试提出一个隐式拼写检查器，它将使用输入单词到某种更通用的语音表示的映射来解释可能发生的拼写错误，基本上是一个搜索栏，它会自动在一定程度上更正你的拼写. 我一直在研究的两件事是 metaphone、nysiis 和 soundex，但我真的不知道哪个更适合这个应用程序。

我希望有更多的匹配而不是更少的匹配，并且我希望匹配更加通用，因此我正在考虑使用 soundex，这似乎是比原始变音位更近似的映射，但我真的不知道模糊性的差异有多大。我知道 nysiis 与 soundex 非常相似，但我不知道它们有多相似，或者 nysiis 与 metaphone 相比如何。

我也在寻找最快执行的解决方案。我知道这些语音映射器通常很快，但我不确定哪个会最快，考虑到我希望能够在不增加搜索时间的情况下检查拼写，速度是一个考虑因素。想法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-06-04T19:18:58.750

我设法在这里找到了一篇很棒的文章：

[http://www.informit.com/articles/article.aspx?p=1848528](http://www.informit.com/articles/article.aspx?p=1848528)

不是我要找的所有东西，但数量相当多。

# android - 如何在 Android Emulator 中显示 sdcard 的文件夹结构？

> ID：11578534
> 
> 赞同：2
> 
> 时间：2012-07-20T11:35:01.100
> 
> 标签：android, android-emulator, expandablelistview

我创建了一个简单的应用程序来显示 sdcard 的文件夹结构，就像我显示屏幕截图一样。

![显示 sdcard 的文件夹结构](../Images/2ceaf084d05e6a0624ec2a90e431ec03.png)

我想做这种类型。我应该使用哪个控件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T11:42:34.847

从您发布的图片来看，我认为最好的解决方案是使用`ListView`带有标题的自定义，因为它看起来像那样。[这里](http://www.vogella.com/articles/AndroidListView/article.html)有一个教程`ListView`。这是 CommonsWare[在](https://github.com/commonsguy/cwac-merge)`CWAC MergeAdapter`listViews 中轻松添加标题的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T07:34:15.687

您可能会发现这很有帮助：[从 android sdCard 设备获取文件夹结构](http://blog.ndroidians.com/sdfolderstructure-getting-folder-structure-from-android-sdcard-device/)

# java - 我的库 jar 文件在 Eclipse 中不工作但在 Net-Beans 中工作正常，任何建议

> ID：11578537
> 
> 赞同：1
> 
> 时间：2012-07-20T11:35:15.963
> 
> 标签：java, android, sdk

我的库 jar 文件在 Eclipse 中无法运行，但在 Net-Beans 中运行良好，我很累，但它显示

```
07-05 17:34:09.064: E/AndroidRuntime(560): java.lang.NoClassDefFoundError: fi.joensuu.joyds1.calendar.IslamicCalendar 
```

任何建议都可以接受

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T11:41:14.010

From Android Latest Version of `sdk` we must place external `jar files` in a folder called `libs`.

1.  create a new folder in the project named libs
2.  place your external jar file in that folder
3.  no need to give the path to the project in eclipse. It will automatically exists

Good luck

**EDIT**

You will need to add the library to your build path. You can do this by right clicking it in Package Explorer and selecting add to build path, or by editing the build settings manually.

# android - 为什么图像没有从远程服务器加载到我的 android 应用程序中？

> ID：11578541
> 
> 赞同：0
> 
> 时间：2012-07-20T11:35:22.350
> 
> 标签：android, web-services, url, uri, image-loading

我使用了两种方法从远程服务器加载图像。它在 2.1（三星）和 2.3.4（索尼爱立信 Xperia Neo V）版本中运行良好。但是该方法在三星移动 V-2.2 中返回 null。代码如下。

```
private Drawable ImageOperations(String url, String saveFilename) {
    try {
        String realImageUrl = url + "?email=" + Constants.email
                + "&proc_date=" + Constants.proc_date + "&access_key="
                + Constants.ACCESS_KEY + "&version=1.00";

        String a = realImageUrl.replace("https", "http");

        InputStream is = (InputStream) this.fetch(a);
        Log.e("https,SubString http: ", realImageUrl + "," + a);
        Drawable d = Drawable.createFromStream(is, "saveFilename");

        return d;
    } catch (MalformedURLException e) {
        return null;
    } catch (IOException e) {
        return null;
    }
}

public Object fetch(String address) throws MalformedURLException,
        IOException {
    try {
        URL url = new URL(address);
        URI uri = new URI(url.getProtocol(), url.getUserInfo(),
                url.getHost(), url.getPort(), url.getPath(),
                url.getQuery(), url.getRef());
        url = uri.toURL();
        Log.i("Url:", url + "");
        Object content = url.getContent();

        return content;
    } catch (Exception e) {
        e.printStackTrace();
    }
    return null;
} 
```

# objective-c - 我有关于在石英框架中绘制和擦除线条的简单问题

> ID：11578544
> 
> 赞同：1
> 
> 时间：2012-07-20T11:35:28.663
> 
> 标签：objective-c, quartz-graphics, quartz-2d

我正在尝试通过石英框架绘制和擦除线条。

但我面临一些问题。

请指教。

**Q1）如果按下 UIButton，我已经做了跟随方法并执行该方法。**

```
- (void)drawCustom {

    cgc_Context = UIGraphicsGetCurrentContext();

    CGContextSetLineWidth(cgc_Context, 5.0);
    CGContextSetStrokeColorWithColor(cgc_Context, [UIColor yellowColor].CGColor);
    CGContextMoveToPoint(cgc_Context, 0, 0);
    CGContextAddLineToPoint(cgc_Context, 200, 50);
    CGContextStrokePath(cgc_Context);
} 
```

但我得到的结果是：

> suckjuui-iMac.local QuartzTest[5008]：CGContextSetLineWidth：无效上下文 0x0 Jul 20 20:22:50
> 
> suckjuui-iMac.local QuartzTest[5008]：CGContextSetStrokeColorWithColor：无效上下文 0x0 Jul 20 20:22:50
> 
> suckjuui-iMac.local QuartzTest[5008]：CGContextMoveToPoint：无效上下文 0x0 Jul 20 20:22:50
> 
> suckjuui-iMac.local QuartzTest[5008]：CGContextAddLineToPoint：无效上下文 0x0 Jul 20 20:22:50
> 
> suckjuui-iMac.local QuartzTest[5008]：CGContextDrawPath：无效上下文 0x0

为什么会出现上述消息？

**Q2) 如何擦除画线？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T12:32:19.537

对于第二个问题。

您不能擦除线条，因为根据 wattson12，您的绘图需要在 drawRect 中进行。您只能重新绘制图形（减去您想要擦除的内容）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T11:40:04.067

对于第一个问题：

如果您没有从 drawRect 内部调用 UIGraphicsGetCurrentContext，则返回 nil：

将此代码移动到自定义 UIView 子类的 drawRect 方法中

# c - karger Minimum Cut 算法因大输入而崩溃

> ID：11578549
> 
> 赞同：0
> 
> 时间：2012-07-20T11:35:48.617
> 
> 标签：c, multidimensional-array

我尝试实现 karger Minimum Cut 算法（[Karger wiki page](http://en.wikipedia.org/wiki/Karger%27s_algorithm)）

到目前为止，我已经在小例子（大小为 10 的输入）上尝试了我的算法，它似乎有效。但是当我尝试有更大的输入时，假设是 200。它只会崩溃。

为了存储最小切割数据，我创建了一个二维数组：GraphCut[SIZE_ARRAY][SIZE_ARRAY_2] SIZE_ARRAY = 200 在这种情况下，但我找不到 SIZE_ARRAY_2 的合适长度。

问题是，SIZE_ARRAY_2 必须很大，因为我修改了初始数组以合并不同的顶点。

如果我声明 SIZE_ARRAY_2 = 200，大小将不够，但如果我设置 SIZE_ARRAY_2 = 1000，程序就会崩溃。

问题是，我必须执行算法 100000 次。

以下是部分代码：

```
#define ARRAY_SIZE 200
#define ARRAY_SIZE_2 200

int main()
{
    int minCut,minMinCut;

    for (int k = 0; k < ARRAY_SIZE * ARRAY_SIZE * 4;k++) {
        minCut = kargerMinCut(k);
        if (k == 0)
            minMinCut = minCut;
        else if (minMinCut > minCut)
            minMinCut = minCut;
    }
    printf("\n minMinCut = %d\n", minMinCut);

    return 0;
}

int kargerMinCut(int k) {
// 1st dimension: each different node
// 2nd dimension: vertices
    long graphCut[ARRAY_SIZE + 1][ARRAY_SIZE_2] = {0};
    populateIntegerArray(graphCut); // import data from a file

    int nodeToMain[ARRAY_SIZE + 1];
    int sizeOfMainNode, indexToMerge,initialRand,i,j,m,nodeToMerge,nodeRemaining = ARRAY_SIZE;
    for (m = 0;m<ARRAY_SIZE + 1;m++) // initialization of nodeToMain
        nodeToMain[m] = m;

    while (nodeRemaining > 2) {
i = 0;
        j = 0;
        srand(time(NULL) + nodeRemaining);// initialise rand
        initialRand = nodeToMain[rand()%(ARRAY_SIZE) + 1]; // pick a random initial node, but not a merged one
        sizeOfMainNode = sizeOfArray(graphCut[initialRand]); // size of the initial node

        srand(time(NULL) + k); // initialise rand
        indexToMerge = rand()%sizeOfMainNode;// pick another random node in the linked nodes (its index to be precise)
        nodeToMerge = nodeToMain[graphCut[initialRand][indexToMerge]];

        for (m = 0;m<ARRAY_SIZE + 1;m++)  // update the nodeToMain array, initialRand is now the main node for nodeToMerge
            if (nodeToMain[m] == nodeToMerge)
                nodeToMain[m] = initialRand;

        // remove the nodeToMerge numbers from the graphCut[initialRand] (as they are going to be merged)
        while(graphCut[initialRand][j] > 0 && j < sizeOfMainNode) {
            if (initialRand == nodeToMain[graphCut[initialRand][j]]) {
                // if this is the last element, do nothing
                while(nodeToMain[graphCut[initialRand][sizeOfMainNode - 1]] == initialRand && j < sizeOfMainNode - 1) {
                    graphCut[initialRand][sizeOfMainNode - 1] = 0;
                    sizeOfMainNode--;
                }
                graphCut[initialRand][j] = nodeToMain[graphCut[initialRand][sizeOfMainNode - 1]];
                graphCut[initialRand][sizeOfMainNode - 1] = 0;
                sizeOfMainNode--;
            }
            j++;
        }

        i = 0;
        while (graphCut[nodeToMerge][i] > 0 && sizeOfMainNode < ARRAY_SIZE_2 && i < ARRAY_SIZE_2) { // add each vextex of the nodeTomerge to the merged nodes
            if (nodeToMain[graphCut[nodeToMerge][i]] != initialRand) {
                graphCut[initialRand][sizeOfMainNode] = nodeToMain[graphCut[nodeToMerge][i]];
                sizeOfMainNode++;
            }
            i++;
        }

        nodeRemaining--;
    }

    return sizeOfArray(graphCut[nodeToMain[1]]);
} 
```

我确信代码不是很干净，甚至可能很糟糕（C 初学者）。所以我欢迎任何其他建议。

我用调试器得到的错误似乎真的很随机​​。错误是：

> 不可能除以 0

它在第 62 行的 time64.c 中停止

```
tim = (__time64_t)((nt_time.ft_scalar - EPOCH_BIAS) / 10000000i64); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T11:48:54.443

数组大小的变化可能导致堆栈溢出。堆栈的常见默认大小是 1MB（1048576 字节）。如果你有：

```
long graphCut[200][1000]; 
```

并且数组正在占用字节，这留下`4 == sizeof(long)`的字节可能不足以用于函数中的堆栈变量（我没有看到那个函数）。如果那么该数组将需要大于 1MB 的字节。`graphCut``200 * 1000 * 4 = 800000``248576``populateIntegerArray()``8 == sizeof(long)``1600000`

如果需要该大小的数组，则在堆而不是堆栈上分配（全部或部分）。例如：

```
long* graphCut[ARRAY_SIZE_1];
int i;
for (i = 0; i < sizeof(graphCut)/sizeof(graphCut[0]); i++)
{
    graphCut[i] = malloc(ARRAY_SIZE_2 * sizeof(graphCut[0][0]));
    memset(graphCut[i], 0, ARRAY_SIZE_2 * sizeof(graphCut[0][0]));
}

for (i = 0; i < sizeof(graphCut)/sizeof(graphCut[0]); i++)
{
    free(graphCut[i]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T12:09:33.500

一些可能的问题是整数或堆栈溢出（因此您在正确的站点上）和内存初始化。

此实现应在堆上分配 graphCut，并在每次调用 kargerMin 时将其归零，从而解决这些问题。

```
int minCut, minMinCut;
    // There is a small possibility that ARRAY_SIZE*ARRAY_SIZE*4 exceeds int boundary if 16-bit
    long k;
    long **buffer;
// Allocate graphCut on the heap
buffer = malloc((ARRAY_SIZE + 1)*sizeof(long *));
for (k = 0; k < ARRAY_SIZE + 1; k++)
    buffer[k] = malloc(ARRAY_SIZE_2*sizeof(long));

for (k = 0; k < ARRAY_SIZE * ARRAY_SIZE * 4;k++) {
    minCut = kargerMinCut(k, buffer);
    if (k == 0)
        minMinCut = minCut;
    else if (minMinCut > minCut)
        minMinCut = minCut;
}
printf("\n minMinCut = %d\n", minMinCut);

// Here we free the buffer. We could do it in any order, but
// as it costs nothing here to do so, we free it in reverse-
// allocation-order to avoid any possible memory fragmentation
// - which is moot anyway, if this is a main() and we're exiting
// the program. In other instances it could be relevant.
for (k = 0; k < ARRAY_SIZE + 1; k++)
{
    free(buffer[ARRAY_SIZE-k]); buffer[ARRAY_SIZE-k] = NULL;
}
free(buffer); buffer = NULL;
// The NULLing of the just-freed variables has no purpose except
// to GUARANTEE that any illegal use of them, dangling pointers,
// leftover copies etc. will immediately trigger a core dump and
// be discovered, instead of lurking undetected.

return 0;
}

int kargerMinCut(long k, long **graphCut) {
    // 1st dimension: each different node
    // 2nd dimension: vertices

    // Zero graphCut. If populateIntegerArray rewrites
    // the whole of graphCut, these four lines are redundant.
    int     i, j;
    for (i = 0; i < ARRAY_SIZE + 1; i++)
            for (j = 0; j < ARRAY_SIZE_2; j++)
                    graphCut[i][j] = 0;
    // otherwise, they make sure that no old value of graphCut
    // or uninitialised value is going to linger and potentially
    // corrupt calculations later on.
    populateIntegerArray(graphCut); // import data from a file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-24T07:57:12.003

我已经用 C++ 实现了 Karger 算法。我下面的代码适用于大文件，但我没有进行足够的优化......虽然它仍然运行得很快..但可能会更快..试试这个解决方案。

```
#include "stdafx.h"
#include <iostream>
#include <stdio.h>
#include <string>
#include <map>
#include <list>
#include <fstream>
#include <sstream>
#include <set>
#include <stdlib.h>
#include <time.h>

int pick_edge(std::map <int, std::list<int>> g2, set<int> myset, int &u, int &v)
{
    std::map <int, std::list<int>>::iterator it;
    std::list<int> eachRow;

    int rand_vertex;
    int rand_edge;

    srand (time(NULL));

    rand_vertex = (rand() + 1) % myset.size() ;
    if (rand_vertex == 0)
        rand_vertex = 1;
    u = get_value_at_i(myset, rand_vertex);

    for (it = g2.begin(); it != g2.end(); ++it) {
        if (it->first == u) {
            eachRow = it->second;
            rand_edge = (rand() + 1) % eachRow.size();
            if (rand_edge == 0)
                rand_edge = 1;
            v = get_edge_at_j(eachRow, rand_edge);
            break;
        }
    }
    return 0;
}

map <int, std::list<int>> merge_uv(map <int, std::list<int>>  g2, int u, int v)
{
    std::map <int, std::list<int>>::iterator it_g;
    std::map <int, std::list<int>>::iterator it_u;
    std::map <int, std::list<int>>::iterator it_v;
    std::list<int>::iterator iter_l;

    std::list<int> eachRow, uRow, vRow;
    std::list<int> newRow;
    int vertex;
    int j = 0;

    map <int, std::list<int>> new_Graph_G;
    vRow.clear();
    uRow.clear();
    eachRow.clear();
    newRow.clear();

    for (it_g = g2.begin(); it_g != g2.end(); ++it_g) {
        vertex = it_g->first;
        eachRow = it_g->second;

        if (vertex == u) {
            uRow = it_g->second;

            it_u = it_g;
            j++;
            continue;
        }
        if (vertex == v) {
            vRow = it_g->second;
            it_v = it_g;
            j++;
            continue;
        }
    }
    if (j == 2) {
        uRow.sort();
        vRow.sort();
        //      uRow.merge(vRow);
        for (std::list<int>::iterator ite = vRow.begin(); ite != vRow.end();  ++ite) {
            if (*ite != u) {
                uRow.push_back(*ite);
            }
        }
        g2.erase(v);
        g2[u] = uRow;
    }

    for (it_g = g2.begin(); it_g != g2.end(); ++it_g) {
        eachRow = it_g->second;
        for (std::list<int>::iterator ite = eachRow.begin(); ite != eachRow.end();  ++ite) {
            if (*ite == v && *ite != it_g->first) {
                newRow.push_back(u);
            } else if (*ite == it_g->first) {
                continue;
            }   else {
                newRow.push_back(*ite);
            }
        }
        new_Graph_G[it_g->first] = newRow;
        newRow.clear();
    }

    for (it_g = g2.begin(); it_g != g2.end(); ++it_g) {
        eachRow = it_g->second;
        if (it_g->first == u) {
            for (std::list<int>::iterator ite = eachRow.begin(); ite != eachRow.end();  ++ite) {
                if (*ite != u && *ite != v) {
                    newRow.push_back(*ite);
                }
            }
            new_Graph_G[it_g->first] = newRow;
            break;
        }
    }

    return new_Graph_G;
}

int get_min_cut(std::map <int, std::list<int>> g1)
{
    int v;
    std::list<int> eachRow;
    std::map <int, std::list<int>>::iterator it_g;
    int min_cut = 0;

    for (it_g = g1.begin(); it_g != g1.end(); ++it_g) {
        eachRow = it_g->second;
        v = it_g->first;
        for (std::list<int>::iterator ite = eachRow.begin(); ite != eachRow.end();  ++ite) {
            if (*ite != v) {
                min_cut++;
            }
        }
        break;
    }

    return min_cut;
}

int EdgeContractionAlgorithm()
{
    std::map <int, std::list<int>>::iterator it;
    int min_cut = 0;
    int vertex = 1;
    std::list<int> eachRow;
    std::set<int> myset;
    std::set<int>::iterator itSet;
    std::map <int, std::list<int>> g2;

    int edge;
    int n_vertices;
    int cnt = 0;
    int u, v;

    n_vertices = Cal_nVertices(myset, Graph_G);
    g2 = Graph_G;

    // Contraction algorithm.
    while (n_vertices > 2) {
        edge = pick_edge(g2, myset, u, v);
        g2 = merge_uv(Graph_G, u, v);

        n_vertices = g2.size();
        myset.erase (myset.find(v));
        Graph_G = g2;
    }

    print_graph(g2);

    min_cut = get_min_cut(g2);
    return (min_cut);
} 
```

# android - 当手机在 Android 手机上响铃时在后台启动应用程序

> ID：11578562
> 
> 赞同：2
> 
> 时间：2012-07-20T11:36:44.483
> 
> 标签：android, arduino

我正在制作一个需要在 Android 手机上有来电时运行的应用程序。我希望我的应用程序只听来电并`Activity`在后台运行它自己的。实际上，我正在制作一个应用程序，它的工作原理就像有来电时，然后Arduino 板上的[LED闪烁。](http://en.wikipedia.org/wiki/Light-emitting_diode)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T11:44:34.660

I think *[Chapter 12\. Telephone Applications](http://androidcookbook.com/Recipe.seam?recipeId=1109)* in [Android Cookbook](http://androidcookbook.com/home.seam) should prove helpful:

> The short version, however, is that you need to listen to a broadcast message indicating that the phone state has change. To do that, you subclass `BroadcastReceiver` and add some code in your manifest to capture the event.

### File AndroidManifest.xml:

```
<application android:icon="@drawable/icon" android:label="Incoming Call Interceptor">

    <receiver android:name="IncomingCallInterceptor">
        <intent-filter>
             <action android:name="android.intent.action.PHONE_STATE"/>
        </intent-filter>
    </receiver>

</application>

<uses-permission android:name="android.permission.READ_PHONE_STATE"/> 
```

### File IncomingCallInterceptor.java:

```
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.telephony.TelephonyManager;
import android.widget.Toast;

public class IncomingCallInterceptor extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        String state = intent.getStringExtra(TelephonyManager.EXTRA_STATE);
        String msg = "Phone state changed to " + state;

        if (TelephonyManager.EXTRA_STATE_RINGING.equals(state)) {
            String incomingNumber = intent.getStringExtra(TelephonyManager.EXTRA_INCOMING_NUMBER);
            msg += ". Incoming number is " + incomingNumber;

            // TODO This would be a good place to "Do something when the phone rings" ;-)
        }
        Toast.makeText(context, msg, Toast.LENGTH_LONG).show();
    }
} 
```

The page I linked to has more information about how this actually works and additional things you could detect (like when the user answers or rejects the call). So make sure to read it.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T11:41:55.197

*[当电话响起时做一些事情](http://androidlabs.org/short-experiments/broadcast-receivers/do-something-when-the-phone-rings/)*解释了如何开始听电话响起，然后你需要[启动一个服务](http://android.kgmoney.net/2010/05/08/creating-a-simple-android-service-for-background-processing/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T11:46:23.447

您可以为此设置一个意图过滤器。意图将绑定到一个活动。

这是您必须在清单中添加的内容（在活动中）：

```
<intent-filter> 
            <action android:name="android.intent.action.CALL" /> 
```

据我所知，这适用于拨出电话，您必须检查它是否也适用于来电..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T14:00:16.153

如果你想使用蓝牙来做到这一点，那么看看一个名为[Amarino](http://www.amarino-toolkit.net/index.php/home.html)的项目，你可以在网上安装一个便宜的 6 美元蓝牙模块。

我这样做了，效果很好。

# iphone - 通过情节提要的标签栏项目

> ID：11578565
> 
> 赞同：0
> 
> 时间：2012-07-20T11:36:47.827
> 
> 标签：iphone, objective-c, ios, xcode, storyboard

我有连接到导航控制器的表格视图控制器，我添加了标签栏和 3 个标签栏项目，您可以在情节提要中看到！

![在此处输入图像描述](../Images/bd15421f27044d46e5d9b0c71668a31b.png)

**我以编程方式添加了导航栏按钮，这是图片：**

![在此处输入图像描述](../Images/f486e8f35b5629e4a077031ddccdc7b9.png)

现在我的标签物品有问题。我不知道如何将它们与他们自己的观点联系起来！因为我没有标签栏控制器，因为我通过界面生成器创建它们

有人能帮帮我吗！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T07:38:46.577

您应该将 UItabbarcontroller 拖到 stroyboard 而不是 nagvigationcontroller。

然后你可以将你的子视图控件嵌入到导航控制器中

# sql - windows身份验证sql登录失败

> ID：11578566
> 
> 赞同：0
> 
> 时间：2012-07-20T11:36:48.090
> 
> 标签：sql, windows-services

我有一个 Windows 服务，它将尝试检查 sql 服务器是否可用或不使用 Windows 身份验证。但是该服务无法连接到 sql server。它抛出错误“用户''登录失败。用户未与受信任的 SQL Server 连接关联”。当我尝试从控制台执行相同的应用程序时，我的应用程序能够使用 Windows 身份验证连接到 sql server。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T11:40:28.757

您的服务在哪个帐户下运行？如果该服务以 LocalService 帐户运行，则无权登录 SQL。更改运行 Windows 服务的帐户。

# excel - 如何将工作簿中的工作表复制到另一个工作簿

> ID：11578569
> 
> 赞同：0
> 
> 时间：2012-07-20T11:36:57.837
> 
> 标签：excel, vba, ms-access, ms-access-2010

我有这段代码可以从 VBA/Access 中的工作簿复制工作表到另一个工作簿/文件。

```
Dim File1 as String
Dim File2 as String
File1 = "D:\File1.xls"
File2 = "D:\File2.xls"

Windows(File1).Activate
Sheets("Name of Sheet").Select
Sheets("Name of Sheet").Copy Before:=Workbooks(File2).Sheets("Name of Target Sheet") 
```

这是行不通的。我需要在后台复制。还要禁用任何宏。

1.  我怎样才能让它工作？
2.  我可以给出索引而不是“工作表名称”吗？
3.  我可以给一个索引数组复制到第二个工作簿吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T11:53:24.843

如果您在 MS Access 中运行，则需要以下几行：

```
Dim CopyFrom As Object
Dim CopyTo As Object ''Early binding: Workbook
Dim CopyThis As Object
Dim xl As Object ''Early binding: New Excel.Application

''Late binding
Set xl = CreateObject("Excel.Application")
xl.Visible = True

''To use a password: Workbooks.Open Filename:="Filename", Password:="Password"
Set CopyFrom = xl.Workbooks.Open("z:\docs\From.xls")
Set CopyThis = CopyFrom.Sheets(1) ''Sheet number 1
Set CopyTo = xl.Workbooks.Open("z:\docs\To.xls")
CopyThis.Copy After:=CopyTo.Sheets(CopyTo.Sheets.Count)

CopyFrom.Close False 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T11:58:49.440

您需要先打开工作簿。

```
Dim File1 As String
Dim File2 As String
File1 = "C:\Path\to\file\Book13.xlsx"
File2 = "C:\Path\to\file\Book2.xlsx"

Workbooks.Open Filename:=File2
Workbooks.Open Filename:=File1
ActiveWorkbook.Worksheets("Sheet2").Select
Sheets("Sheet1").Copy Before:=Workbooks("Book2").Sheets(1) 
```

您可以将工作表名称或索引与 Sheets 对象一起使用。要将多个工作表复制到另一个工作簿中，您可以将数组传递到循环中。

# javascript - 动画元素jquery

> ID：11578575
> 
> 赞同：0
> 
> 时间：2012-07-20T11:37:20.520
> 
> 标签：javascript, jquery, html, animated

我有一个循环播放图像的幻灯片，然后在这些图像上方我有一些文本，然后是两个图像。我想要的是计算出我要为哪些图像制作动画并这样做，但是我希望在每个动画之间有一个延迟。

我的困难是我有 3 张幻灯片，每张幻灯片可以有 2 张图片需要单独动画到背景，幻灯片的排列是根据用户的喜好排列的，所以从前端的角度来看，我永远不可能100% 确定哪两个图像将被组合在一起，因此，我写了以下内容，

```
if($(".current .iphone").length) {
        $(".current .iphone").animate({
            opacity :   1,
            left    :   "840px"
        }, 800);
    }
    if($(".current .blackberry").length) {
        $(".current .blackberry").animate({
            opacity :   1,
            left    :   "1119px"
        }, 800);
    }
    if($(".current .samsung").length) {
        $(".current .samsung").animate({
            opacity :   1,
            left    :   "783px"
        }, 800);
    }
    if($(".current .htc").length) {
        $(".current .htc").animate({
            opacity :   1,
            left    :   "900px"
        }, 800);
    }
    if($(".current .nokia").length) {
        $(".current .nokia").animate({
            opacity :   1,
            left    :   "823px"
        }, 800);
    }
    if($(".current .nokia").length) {
        $(".current .nokia").animate({
            opacity :   1,
            left    :   "823px"
        }, 800);
    } 
```

这是我的 HTML，

```
<div id="slideshow" role="main" style="position: relative; overflow: hidden; ">
        <section data-background="_/images/elements/parralex-1.jpg">
            <img src="_/images/iphone-blue.png" alt="iPhone mybunjee" class="iphone foreground phone" />
            <img src="_/images/blackberry-pink.png" alt="Blackberry mybunjee" class="blackberry background phone" />
        </section>
        <section data-background="http://www.samtordoffracing.com/wp-content/uploads/2012/07/Tordoff-14.jpg">
            <img src="_/images/iphone-blue.png" alt="iPhone mybunjee" class="iphone foreground phone" />
            <img src="_/images/blackberry-pink.png" alt="Blackberry mybunjee" class="blackberry background phone" />
        </section>
        <section data-background="http://www.samtordoffracing.com/wp-content/uploads/2012/07/Tordoff-14.jpg">
            <div class="samsung foreground"></div>
            <div class="nokia foreground"></div>
        </section>
    </div> 
```

基本上我正在做的是试图找出当前幻灯片中存在哪些图像，然后制作动画，但是目前两个图像同时动画，我希望在一个图像被动画和然后下一个。

有没有更好的方法来做我正在做的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T11:53:38.573

我不完全理解你想要做什么，但我改变了你的 jQuery 结构。

您需要为此操作定义触发/事件，例如[hover()](http://api.jquery.com/hover/)或[click()](http://api.jquery.com/click/)

使用它来减少代码：

```
$('.current').hover(function() {//mouse over event

    var currentClass = $(this).children().attr('class');//takes mouse overed element's chlid's class

    if($('.current .'+currentClass).length) {
            $(".current ."currentClass).animate({
                'opacity' :   '1',
                'left' : '840px'
            }, 800);
    }
}); 
```

如果您不想定义触发事件，可以使用[each()](http://api.jquery.com/each/)方法和[setInterval()](http://www.w3schools.com/jsref/met_win_setinterval.asp)进行定时动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T14:22:18.583

您可以尝试以下方法：

```
 $.each($('#slideshow').find('img'), function(i, img){
            if($(img).hasClass('iphone')){
                setTimeout(
                    function(){
                        $(img).animate({
                            opacity : .5,
                            'margin-left' : "+=40px"
                        }, 800)
                    }, Math.random() * i *800);
            }
            if($(img).hasClass('blackberry')){
                setTimeout(
                    function(){
                        $(img).animate({
                            opacity : .5
                            'margin-left' : "-=40px"
                        }, 800)
                    }, Math.random() * i *800);
            }
    }); 
```

无论如何这里有一些例子，例如看[这个](https://stackoverflow.com/questions/6360024/jquery-each-with-a-delay)。

# java - 使用 oAuth 2.0 保护基于 Jersey 的 REST 服务

> ID：11578577
> 
> 赞同：26
> 
> 时间：2012-07-20T11:37:34.987
> 
> 标签：java, web-services, rest, jersey, oauth-2.0

我使用 Jersey 库在 java/netbeans 中创建了 RESTful 服务。现在我想使用 oAuth 2.0 来保护这项服务。

是否有任何库或任何教程来实现这一目标？我在谷歌中找不到任何有用的东西。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-20T15:47:50.320

您可以使用 Apache Oltu（以前的 Apache Amber）：[https ://cwiki.apache.org/confluence/display/OLTU/Documentation](https://cwiki.apache.org/confluence/display/OLTU/Documentation)

授权服务器和资源服务器部分解释了如何保护您的 REST 服务。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-05-06T08:50:13.027

检查此示例 Jersey + Oltu + Oauth： [https ://bitbucket.org/dobromyslov/oauth2-example/src/](https://bitbucket.org/dobromyslov/oauth2-example/src/)

解释它是如何工作的位于这里：

[http://www.jasondl.ee/posts/2013/a-simple-oauth2-client-and-server-example-part-i.html](http://www.jasondl.ee/posts/2013/a-simple-oauth2-client-and-server-example-part-i.html)

和这里：

[http://www.jasondl.ee/posts/2013/a-simple-oauth2-client-and-server-example-part-ii.html](http://www.jasondl.ee/posts/2013/a-simple-oauth2-client-and-server-example-part-ii.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T15:56:33.840

我们使用了spring security，认为是最简单最简单的方法，查看[这里](http://www.springsource.org/spring-security-oauth)了解更多信息：

# java - 在 jTable 中实现搜索 textField

> ID：11578578
> 
> 赞同：5
> 
> 时间：2012-07-20T11:37:36.230
> 
> 标签：java, swing, jtable, jtextfield, rowfilter

现在我有一个使用 KeyReleased 事件实现的搜索 textField，当我开始输入例如“Andrew”中的“An”时，它没有找到/更新 jTable，并且在我完成准确输入（caseSensitive）我想要的名称之后寻找。

所以，我想要的是从这个[站点](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#sorting)实现过滤方法，但我有很大的问题。在执行以下实现并删除“旧”KeyReleased 事件后，当我在文本字段“txt_search”中键入内容时，jTable 没有任何反应。

我的IDE（NetBeans）生成的表代码是（从自定义代码面板复制）：

```
Table_Employee = new javax.swing.JTable();

Table_Employee.setModel(new javax.swing.table.DefaultTableModel(
    new Object [][] {
        {null, null, null, null},
        {null, null, null, null},
        {null, null, null, null},
        {null, null, null, null}
    },
    new String [] {
        "Title 1", "Title 2", "Title 3", "Title 4"
    }
)
);

Table_Employee.setToolTipText("Employee info table");

Table_Employee.setCursor(new java.awt.Cursor(java.awt.Cursor.DEFAULT_CURSOR));

Table_Employee.getTableHeader().setReorderingAllowed(false);

Table_Employee.addMouseListener(new java.awt.event.MouseAdapter() {
    public void mouseClicked(java.awt.event.MouseEvent evt) {
        Table_EmployeeMouseClicked(evt);
    }
});
Table_Employee.addKeyListener(new java.awt.event.KeyAdapter() {
    public void keyPressed(java.awt.event.KeyEvent evt) {
        Table_EmployeeKeyPressed(evt);
    }
});

jScrollPane1.setViewportView(Table_Employee); 
```

我在我的面板类中添加了这个，其中 table 是：

```
import java.awt.Toolkit;
import java.awt.event.WindowEvent;
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import javax.swing.JOptionPane;
import net.proteanit.sql.DbUtils;
import java.awt.event.*;
import java.util.Calendar;
import java.util.GregorianCalendar;
import java.text.*;
import javax.swing.*;
import javax.swing.event.DocumentEvent;
import javax.swing.event.DocumentListener;
import javax.swing.table.DefaultTableModel;
import javax.swing.table.TableRowSorter;

public class Employee_info extends javax.swing.JFrame {
Connection conn=null;
ResultSet rs=null;
PreparedStatement pst=null;
private TableRowSorter<DefaultTableModel> sorter;
    /**
     * Creates new form Employee_info
     */
    public Employee_info() {
        initComponents();
        conn=javaconnect.ConnecrDb();
        Update_table();
        Fillcombo();
        currentDate();
        Table_Employee.setAutoCreateRowSorter(true);
        Table_Employee.setFillsViewportHeight(true);
        Table_Employee.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);

        DefaultTableModel model = new DefaultTableModel();
        sorter = new TableRowSorter<DefaultTableModel>(model);
        Table_Employee = new JTable(model);

        txt_search = new JTextField();
        //Whenever filterText changes, invoke newFilter.
        txt_search.getDocument().addDocumentListener(
                new DocumentListener() {
                    public void changedUpdate(DocumentEvent e) {
                        newFilter();
                    }
                    public void insertUpdate(DocumentEvent e) {
                        newFilter();
                    }
                    public void removeUpdate(DocumentEvent e) {
                        newFilter();
                    }
                });
    }

    private void newFilter() {
    RowFilter<DefaultTableModel, Object> rf = null;
    //If current expression doesn't parse, don't update.
    try {
        rf = RowFilter.regexFilter(txt_search.getText(), 0);
    } catch (java.util.regex.PatternSyntaxException e) {
        return;
    }
    sorter.setRowFilter(rf);
} 
```

I really need some help, please! This is my last chance, because I really made the google search solutions, and nothing changed.

With respect, Andrew

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T11:44:00.870

*   little modiefied code from JTable tutorial about filtering and sorting

*   for filtering for JCheckBox you can to put "true" / "false"

code

```
import java.awt.*;
import java.util.regex.PatternSyntaxException;
import javax.swing.*;
import javax.swing.event.*;
import javax.swing.table.*;

public class TableFilterSorter extends JPanel {

    private boolean DEBUG = false;
    private static final long serialVersionUID = 1L;

    public TableFilterSorter() {
        super(new BorderLayout(5, 5));
        final JTextField filterCpText = new JTextField();
        filterCpText.setFont(new Font("Serif", Font.BOLD, 28));
        filterCpText.setForeground(Color.BLUE);
        filterCpText.setBackground(Color.LIGHT_GRAY);
        JPanel filterCpPanel = new JPanel();
        filterCpPanel.setLayout(new BorderLayout(5, 5));
        filterCpPanel.setBorder(BorderFactory.createEmptyBorder(1, 1, 1, 1));
        filterCpPanel.setBackground(Color.LIGHT_GRAY);
        filterCpPanel.setPreferredSize(new Dimension(300, 30));
        filterCpPanel.add(filterCpText, BorderLayout.CENTER);
        add(filterCpPanel, BorderLayout.NORTH);
        final JTable table = new JTable(new MyTableModel());
        table.setPreferredScrollableViewportSize(new Dimension(500, 160));
        table.setFillsViewportHeight(true);
        JScrollPane scrollPane = new JScrollPane(table);
        add(scrollPane, BorderLayout.CENTER);
        TableModel myTableModel = table.getModel();
        final TableRowSorter<TableModel> sorter = new TableRowSorter<TableModel>(myTableModel);
        table.setRowSorter(sorter);
        filterCpText.getDocument().addDocumentListener(new DocumentListener() {

            private void searchFieldChangedUpdate(DocumentEvent evt) {
                String text = filterCpText.getText();
                if (text.length() == 0) {
                    sorter.setRowFilter(null);
                    table.clearSelection();
                } else {
                    try {
                        sorter.setRowFilter(RowFilter.regexFilter("(?i)" + text, 4));
                        table.clearSelection();
                    } catch (PatternSyntaxException pse) {
                        JOptionPane.showMessageDialog(null, "Bad regex pattern",
                                "Bad regex pattern", JOptionPane.ERROR_MESSAGE);
                    }
                }
            }

            @Override
            public void insertUpdate(DocumentEvent evt) {
                searchFieldChangedUpdate(evt);
            }

            @Override
            public void removeUpdate(DocumentEvent evt) {
                searchFieldChangedUpdate(evt);
            }

            @Override
            public void changedUpdate(DocumentEvent evt) {
                searchFieldChangedUpdate(evt);
            }
        });
    }

    private class MyTableModel extends AbstractTableModel {

        private static final long serialVersionUID = 1L;
        private String[] columnNames = {"First Name", "Last Name", "Sport", "# of Years", "Vegetarian"};
        private Object[][] data = {
            {"Mary", "Campione", "Snowboarding", new Integer(5), false},
            {"Alison", "Huml", "Rowing", new Integer(3), true},
            {"Kathy", "Walrath", "Knitting", new Integer(2), false},
            {"Sharon", "Zakhour", "Speed reading", new Integer(20), true},
            {"Philip", "Milne", "Pool", new Integer(10), false},
            {"Mary", "Campione", "Snowboarding", new Integer(5), false},
            {"Alison", "Huml", "Rowing", new Integer(3), true},
            {"Kathy", "Walrath", "Knitting", new Integer(2), false},
            {"Sharon", "Zakhour", "Speed reading", new Integer(20), true},
            {"Philip", "Milne", "Pool", new Integer(10), false},};

        @Override
        public int getColumnCount() {
            return columnNames.length;
        }

        @Override
        public int getRowCount() {
            return data.length;
        }

        @Override
        public String getColumnName(int col) {
            return columnNames[col];
        }

        @Override
        public Object getValueAt(int row, int col) {
            return data[row][col];
        }

        @Override
        public Class<?> getColumnClass(int c) {
            return getValueAt(0, c).getClass();
        }

        @Override
        public boolean isCellEditable(int row, int col) {
            if (col < 2) {
                return false;
            } else {
                return true;
            }
        }

        @Override
        public void setValueAt(Object value, int row, int col) {
            if (DEBUG) {
                System.out.println("Setting value at " + row + "," + col
                        + " to " + value + " (an instance of " + value.getClass() + ")");
            }
            data[row][col] = value;
            fireTableCellUpdated(row, col);
            if (DEBUG) {
                System.out.println("New value of data:");
                printDebugData();
            }
        }

        private void printDebugData() {
            int numRows = getRowCount();
            int numCols = getColumnCount();
            for (int i = 0; i < numRows; i++) {
                System.out.print("    row " + i + ":");
                for (int j = 0; j < numCols; j++) {
                    System.out.print("  " + data[i][j]);
                }
                System.out.println();
            }
            System.out.println("--------------------------");
        }
    }

    private static void createAndShowGUI() {
        JFrame frame = new JFrame("TableDemo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        TableFilterSorter newContentPane = new TableFilterSorter();
        newContentPane.setOpaque(true);
        frame.setContentPane(newContentPane);
        frame.setLocation(150, 150);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                createAndShowGUI();
            }
        });
    }
} 
```

# c# - c# 如何使用 FAXCOMEXLIB 接收传真

> ID：11578579
> 
> 赞同：1
> 
> 时间：2012-07-20T11:37:40.973
> 
> 标签：c#, fax

我正在尝试使用 Faxcomexlib 接收传真并将它们保存为 tiff 文件（.tiff），但很少找到有关如何使用 c# 实现此目的的文档。

我的机器上连接了一个传真调制解调器，可以使用我的应用程序发送传真，但似乎不知道如何接收任何传入的传真。

谢谢你的帮助。

# c# - 如何让鼠标滚轮改变背景图片

> ID：11578580
> 
> 赞同：0
> 
> 时间：2012-07-20T11:37:45.013
> 
> 标签：c#, wpf, mousewheel

我正在创建一种`UserControl`我希望它具有的行为，即当用户在其上旋转鼠标滚轮时，背景图像会在两个选项之间交替。

到目前为止，我所拥有的是：

```
<UserControl x:Class="OI.MR.UserControls.DataControls.ScrollWheel"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="400" d:DesignWidth="118">
    <UserControl.Background>
        <ImageBrush ImageSource="dial1.png" TileMode="None" />
    </UserControl.Background>
    <UserControl.InputBindings>
        <MouseBinding MouseAction="WheelClick" Command="{Binding ScrollTheWheel}"/>
    </UserControl.InputBindings>
</UserControl> 
```

和

```
public partial class ScrollWheel : UserControl
{
    private bool _isDial1 = true;

    public ScrollWheel()
    {
        InitializeComponent();
    }

    private ICommand _scrollTheWheel;
    public ICommand ScrollTheWheel
    {
        get
        {
            if(_scrollTheWheel == null)
            {
                _scrollTheWheel = new DelegateCommand(_ => SwitchImage(), _ => true);
            }
            return _scrollTheWheel;
        }
    }

    private void SwitchImage()
    {
        if(_isDial1)
        {
            (Background as ImageBrush).ImageSource = new BitmapImage(new Uri("dial2.png"));
            _isDial1 = false;
        }
        else
        {
            (Background as ImageBrush).ImageSource = new BitmapImage(new Uri("dial1.png"));
            _isDial1 = true;   
        }
    }
} 
```

然而，转动轮子并没有改变背景图像。我怎样才能改变图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T12:02:48.377

您的数据上下文确实不正确：一种可能性：

```
<UserControl.InputBindings>
    <MouseBinding MouseAction="WheelClick" 
        Command="{Binding Path=ScrollTheWheel, RelativeSource={RelativeSource AncestorType={x:Type view:YourUserControl}}}"/>
</UserControl.InputBindings> 
```

（将类型替换为您的用户控件的类型）

# android - 从列表视图中的选定项目创建新列表

> ID：11578583
> 
> 赞同：0
> 
> 时间：2012-07-20T11:37:53.660
> 
> 标签：android, listview

此问题已被修改以显示工作代码。

当他们单击 Steak 之类的项目时，我希望将该项目放入另一个列表中。如果他们随后选择了 Potatoes，那么它也应该添加到这个新列表中，这样最后我就会有一个列表，显示用户选择的所有项目。这是我到目前为止所拥有的。

午餐列表菜单.java

```
package com.mycompany.lunch;

import java.util.ArrayList;
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ListView;
import android.widget.Toast;

public class LunchListMenu extends Activity {  

    /** Called when the activity is first created. */
    @Override
    public void onCreate(final Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.maincoarse);
        final ListView lv=(ListView)findViewById(R.id.listView1);              
        ArrayAdapter<CharSequence> adapter=ArrayAdapter.createFromResource(this, R.array.lunch_menu,android.R.layout.simple_list_item_1);
        lv.setAdapter(adapter);
        final ArrayList<String> myNewList = new ArrayList<String>();
        lv.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {  
                String item=lv.getItemAtPosition(arg2).toString();
                String itemordered;
                itemordered = item + " added to list";
                Toast.makeText(getApplicationContext(), itemordered, Toast.LENGTH_SHORT).show();
                myNewList.add(item);                
            }
        });

                // List View Button
                Button btnLunchList = (Button) findViewById(R.id.lrList);
                btnLunchList.setOnClickListener(new View.OnClickListener() {

                    @Override
                    public void onClick(View v) {                       
                        setContentView(R.layout.selecteditems);
                        ListView selecteditems = (ListView) findViewById(android.R.id.list);
                        ArrayAdapter<String> newadapter = new ArrayAdapter<String>(LunchListMenu.this, android.R.layout.simple_list_item_1, myNewList);              
                        selecteditems.setAdapter(newadapter);
                    }
                });
    }
                    public void shareMyList(View v){
                        // Share Selected Items Button
                        Button btnShareItems = (Button) findViewById(R.id.shareMyList);
                        btnShareItems.setOnClickListener(new View.OnClickListener() {

                            @Override
                            public void onClick(View v) {
                                // TODO Auto-generated method stub

                                Intent share = new Intent(Intent.ACTION_SEND);
                                share.setType("text/plain");
                                share.putExtra(Intent.EXTRA_TEXT, "I'm being sent!!");
                                startActivity(Intent.createChooser(share, "Share Text"));
                            }

                        });
                    }
} 
```

我还创建了一个名为 selecteditems.xml 的新布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:background="@drawable/main_background" 
  android:paddingLeft="10.0dip" 
  android:paddingTop="0.0dip" 
  android:paddingRight="10.0dip" 
  android:paddingBottom="10.0dip" 
  android:layout_width="fill_parent" 
  android:layout_height="fill_parent">

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="100.0dip"
            android:background="@drawable/title" />

        <LinearLayout 
            android:orientation="horizontal" 
            android:background="@drawable/head" 
            android:layout_width="fill_parent" 
            android:layout_height="10.0dip" />    

          <ListView 
              android:id="@android:id/list"
              android:layout_width="fill_parent"
              android:layout_height="wrap_content"
              android:textSize="25dip"
              android:textStyle="bold"
              android:padding="10dip"
              android:textColor="#ffffff"/>

</LinearLayout> 
```

它现在将项目添加到新的选定项目中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T11:45:32.770

Just create an arrayList and put your items into it, then find your "other list" and feed that list with this arrayList.

```
 ArrayList<String> myNewList = new ArrayList<String>(); 
```

on your ItemClick:

```
 myNewList.add(item); 
```

and then whenever you want to set your list:

```
ListView newList = (ListView) findViewById(R.id.your_new_list);
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, myNewList, android.R.layout.simple_list_item_1);
newList.setAdapter(adapter); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T11:50:55.517

列个清单：

```
public class arbysListMenu extends ListActivity {
    List<String> itemordered = null;    //  As  global
/** Called when the activity is first created. */
.
.
.
. 
```

然后将项目添加到项目排序列表中单击：

```
 @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {

            //String item=lv.getItemAtPosition(arg2).toString();

            itemordered.add(lv.getItemAtPosition(arg2).toString());

          ////  Now  FILL  another  ListView, adapter using this itemordered list

        }
        }); 
```

# r - 数据框中分组数据中每个观测值的标准误差

> ID：11578585
> 
> 赞同：3
> 
> 时间：2012-07-20T11:38:13.697
> 
> 标签：r, grouping, dataframe, tapply

我有一个数据框，我想在其中计算按三列中的因子分组的观察值的标准误差。使用 tapply 计算组平均值的标准偏差和标准误差：

```
aveResponse <- tapply(df$Response, col1:col2:col3, mean, na.rm=T)

aveSD <- tapply(df$Response, col1:col2:col3, sd, na.rm=T)

stderr <- function(x) sqrt(var(x,na.rm=TRUE)/(length(na.omit(x)))
aveSEM <- tapply(df$Response, col1:col2:col3, stderr, na.rm=T) 
```

我之前已经计算了单个观察值的标准偏差（保存在 colSD 列中），并想计算相应的标准误差。使用下面的函数，我可以获得标准错误：

```
stderr <- function(x) x/sqrt(length(na.omit(x)))
SEM<- tapply(df$colSD, col1:col2:col3, stderr) 
```

但是，结果以数组的形式给出，每组的 n 个观察值作为每个位置的字符串（我认为）。任何想法如何通过更改函数，使用另一个函数或将数组转换为每个观察值的标准误差都有自己位置的向量来进一步移动？

一个小样本（如果我通过 dput(df)，你会更容易使用吗？）：

```
>df
    col1    col2  col3 Response colSD
1  food1 tissue1 gene1    1.644 0.080
2  food1 tissue1 gene1    1.726 0.093
3  food1 tissue2 gene1    0.088 0.014
4  food1 tissue2 gene1    0.002 0.000
5  food2 tissue1 gene1    0.311 0.012
6  food2 tissue1 gene1    0.657 0.265
7  food2 tissue2 gene1    0.000 0.000
8  food2 tissue2 gene1    0.001 0.000
9  food1 tissue1 gene2    3.223 0.246
10 food1 tissue1 gene2    2.156 0.440
11 food1 tissue2 gene2    0.279 0.200
12 food1 tissue2 gene2    0.033 0.007
13 food2 tissue1 gene2    0.044 0.002
14 food2 tissue1 gene2    0.265 0.117
15 food2 tissue2 gene2    0.000 0.000
16 food2 tissue2 gene2    0.000 0.000 
```

我想计算每个观察值的标准误差，例如 等`0.080/sqrt(2)`，`0.093/sqrt(2)`并将结果作为附加列添加到数据框中：

```
>df
    col1    col2  col3 Response colSD colSEM
1  food1 tissue1 gene1    1.644 0.080  0.057
2  food1 tissue1 gene1    1.726 0.093  0.066 etc... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T15:57:17.883

您可以使用以下方法获得非常紧凑的解决方案`ddply`：

```
library(plyr)
df <- ddply(df, .(col1, col2, col3), transform, colSEM = colSD/sqrt(length(na.omit(colSD)))) 
```

对于那些对此解决方案如何演变感兴趣的人，请查看编辑历史记录。

# sql - 在表创建脚本中显式指定排序规则的优点和缺点是什么？

> ID：11578591
> 
> 赞同：3
> 
> 时间：2012-07-20T11:38:41.023
> 
> 标签：sql, collation

创建表时，COLLATE 子句是可选的。所以，在：

```
CREATE TABLE T1 (
  F1 varchar(50) COLLATE SQL_Latin1_General_CP1_CS_AS NOT NULL,
  F2 varchar(50) NOT NULL
) 
```

F2 的排序规则将由数据库默认值决定。

过去我们的团队总是使用默认排序规则。但是，我们现在有一些列需要明确指定排序规则。我们正在考虑是否更改我们的标准以*始终*指定排序规则，并寻找可能有助于此决定的任何其他信息。

所以：

*   始终指定排序规则的优点/缺点是什么？
*   如果我们总是指定排序规则，是否有任何需要注意的问题？

可能相关的附加信息：

*   我们部署到多个客户端，并非所有客户端都会同时升级。
*   一些客户端在他们的服务器上确实有不同的排序规则配置。
*   我们的应用程序使用 Ansi 字符串，而对 Unicode 的任何考虑都还有**很**长的路要走。
*   我们使用 MS SQL Server 2005 及更高版本（尽管如果可能的话，我更愿意将问题保持在任何支持排序规则的平台上）。

**请注意**：这个问题**不是**询问如何解决排序规则冲突，或更改现有的服务器/数据库/列排序规则。（已经有很多了。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T14:09:45.533

您正在构建一个部署在客户端机器上的应用程序。您应该明确说明您的排序规则。

例如，默认排序规则不区分大小写。如果客户——无论出于何种原因——更愿意在他们的数据库中将区分大小写作为默认设置，那么不同机器上的比较会有所不同。

您还有调试问题。如果客户端以一个顺序获得结果，您的测试/开发系统可能会以不同的顺序获得它们。这可能会妨碍调试和客户支持。

最后，最好有一致的软件用于调试、维护和支持。如果特定客户需要不同格式的数据，则为该客户定制系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T11:53:52.603

如果它与数据库的排序规则（默认值）相同，则没有必要指定排序规则。只有当您想将 F1 上的数据存储在不同的排序规则上时，您才应该执行您在示例中所做的操作

# ios - 按标签引用 UIButton

> ID：11578592
> 
> 赞同：0
> 
> 时间：2012-07-20T11:38:42.080
> 
> 标签：ios, tags, uibutton

如何通过代码引用我之前分配的按钮标签值？

我想要做的是在表格视图中创建一个列表，每行都有复选框图像。我只想在每个部分中一次选择一个，因此一旦选择了一个，我将循环遍历其他按钮以取消选择其他按钮。

下面是我如何分配每个按钮的代码`cellForRowAtIndexPath`：

```
UIButton *addCheckButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
addCheckButton.frame = CGRectMake(self.view.frame.size.width - 40.0f, 5.0f, 32.0f, 32.0f);  
[addCheckButton setBackgroundImage:[UIImage imageNamed:@"checkbox_empty.png"]
                        forState:UIControlStateNormal];
[addCheckButton setBackgroundImage:[UIImage imageNamed:@"checkbox_full.png"]
                        forState:UIControlStateSelected];
[cell addSubview:addCheckButton];
[addCheckButton addTarget:self action:@selector(changeCheckState:) forControlEvents:UIControlEventTouchUpInside];
addCheckButton.tag = ([indexPath section] + 1) * 100 + [indexPath row]; 
```

然后，我可以在`changeCheckState`IBAction 的表格视图中删除所选按钮的部分和行。

但我也**想**在`changeCheckState`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T11:44:27.347

```
id my101Button = [view viewWithTag:101]; 
```

这个问题是在几秒钟内搜索到的问题之一。

# asp.net - 转移到服务器场中的不同服务器时，IsPostBack 是否为假？

> ID：11578596
> 
> 赞同：3
> 
> 时间：2012-07-20T11:38:54.067
> 
> 标签：asp.net, ispostback

我有一个部署在两台服务器上的 asp.net 网站。在服务器前面有一个负载均衡器，将请求分发到两台服务器。为了存储会话，我们使用 SQL Server。我的问题是，如果用户转到该页面，按下一个按钮，然后负载均衡器恰好被路由到另一台服务器，该请求不会被识别为回发？为什么会这样，只要服务器共享相同的机器密钥，即使使用回发，它也不应该正常工作吗？

细节：

1.  两台服务器都配置了相同的机器密钥，我通过我制作的一个小型调试页面验证了两台服务器上的实际会话相同，该页面设置并打印出会话对象。

2.  为了进一步验证密钥和 ID，我打印了`HttpRuntime.AppDomainAppId`哈希机器密钥`(MachineKeySection)ConfigurationManager.GetSection("system.web/machineKey")`和 sessionId的值，并`Session.SessionID`在两台服务器上获得了相同的输出。我使用[Session Debug 页面](http://pardini.net/blog/2011/02/17/the-ultimate-asp-net-session-state-debugging-tool/)作为基础。它的输出看起来像这样（我用虚拟值替换了我的实际机器键哈希和会话 ID）：

    ```
    Current DataTime: 2012-07-20 10:52:58
    Current Session Mode: SQLServer
    HttpRuntime.AppDomainAppId: /LM/W3SVC/5/ROOT
    Hashed with the MachineKey: HjtOPW5dfoihdlkd+SdsfkEWfs0=
    Local Machine Name: 127.0.0.1
    Current Session ID: 2alsudhsdkjlhcmnsdfkhsdf 
    ```

3.  在站点的高级设置下的 IISMgr 中找到的站点 ID 在所有服务器上都是相同的。

4.  只要我留在同一台服务器上，一切都会按预期工作。

5.  当我在本地运行页面时（第一个请求到网络场，然后由提琴手将第二个按钮单击路由到本地主机），我得到相同的行为

6.  单步执行代码并阅读`IsPostBack`属性，我的问题似乎是`this._fPageLayoutChanged`Page 是真的。但是，如果我理解正确的话，回发发生时它应该是错误的吗？[SO 关于其实施的问题](https://stackoverflow.com/questions/5650580/how-does-ispostback-technically-work)

7.  两台服务器都运行 IIS 7。

8.  两台服务器都运行带有 SP2 的 Windows Server Web 并安装了相同的 Windows 更新更新。另一方面，我的本地开发机器运行 Windows 7。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T12:48:55.167

事实证明，在 web.config 中添加 Machinekey 的手动条目可以解决问题。非常奇怪，因为我检查了它的全局值以及问题中详述的哈希值，但现在它可以工作了。

我收回之前说过的话。在我们上次发布后，问题又回来了，所以添加机器密钥根本没有帮助。

# selenium - Phpunit 和詹金斯

> ID：11578609
> 
> 赞同：2
> 
> 时间：2012-07-20T11:39:55.683
> 
> 标签：selenium, jenkins, phpunit

我有一个使用 Selenium 用 PHPUnit 编写的 PHP 项目。

项目结构如下： PHPProjectName

*   源文件
    *   （不包含任何东西）
*   硒测试文件
    *   包含我所有的硒测试 php 文件 - 扩展类 PHPUnit_Extensions_SeleniumTestCase
*   包含路径
    *   c:\程序文件\PHP
    *   c:\程序文件\PHP\PEAR\PHPUnit

然后我通过运行 java -jar selenium-server-standalone-2.24.1.jar 手动启动 Selenium 服务器

执行我所有 selenium 测试 php 文件的 php 脚本工作正常。

但现在我想使用 Jenkins 作为测试管理工具，在这个文件夹中构建和执行我的 PHPunit 测试。我想步骤是：

*   安装詹金斯
*   为 PHPunit 测试编写构建脚本
*   通过Jenkins执行构建脚本

步骤是否正确？有人做过或知道如何设置吗？

非常感谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T15:22:27.827

我已经在各种平台上做过很多次了。您的步骤通常是正确的并且应该可以工作，但是管理服务器并不总是那么简单。Selenium RC 服务器如果打开时间过长会变得不稳定，因此您必须以某种方式对其进行管理。

您可以设置第二个 Jenkins 作业，该作业每天运行一到两次来重置您的服务器。然而，更好的选择是编写一个简单的测试框架，关闭所有打开的服务器，然后在运行测试之前启动一个新的服务器实例。当然，您也可以使用 cron 作业来重置服务器，但如果您安装了 Jenkins，则通过 jenkins 作业执行此操作会更容易。

最好的选择当然是切换到 Webdriver，但这可能需要一些工作，具体取决于测试的复杂程度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-19T20:32:59.073

我们有与您描述的类似的设置。我们让 Jenkins 运行一个作业来定期重启 Selenium 服务器：

```
#!/bin/bash
# startselenium.sh: Start Selenium up and also start headless screen.
Xvfb :99 -ac &
export DISPLAY=:99 
java -jar /opt/selenium/selenium-server-standalone-2.19.0.jar & 
```

Sebastian Bergmann 在这里维护了一堆使用 Jenkins 和 PHP 的模板：http: [//jenkins-php.org/](http://jenkins-php.org/)

包括运行 PHPUnit 所必需的 Ant 脚本（这非常简单，只需调用 PHPUnit）：

```
<target name="phpunit" description="Run unit tests with PHPUnit">
    <exec executable="phpunit" failonerror="true"/>
</target> 
```

以及必要的“phpunit.xml”文件：

```
<?xml version="1.0" encoding="UTF-8"?>

<phpunit bootstrap="tests/bootstrap.php"
    backupGlobals="false"
    backupStaticAttributes="false"
    strict="true"
    verbose="true">

    <testsuites>
        <testsuite name="ProjectName">
            <directory suffix="Test.php">tests/unit/</directory>
            <directory suffix="Test.php">tests/integration/</directory>
        </testsuite>
    </testsuites>

    <logging>
        <log type="coverage-html" target="build/coverage" title="BankAccount"
            charset="UTF-8" yui="true" highlight="true"
        lowUpperBound="35" highLowerBound="70"/>
        <log type="coverage-clover" target="build/logs/clover.xml"/>
        <log type="junit" target="build/logs/junit.xml" logIncompleteSkipped="false"/>
    </logging>

    <filter>
        <whitelist addUncoveredFilesFromWhitelist="true">
            <directory suffix=".php">src</directory>
            <exclude>
                <file>src/bootstrap.php</file>
            </exclude>
        </whitelist>
    </filter>

</phpunit> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-09T08:47:14.270

您必须在 jenkins 中安装 selenium 插件，然后 jenkins 上将自动启动 selenium 服务器，这将创建一个集线器。现在在客户端上，您必须启动一个连接到该集线器的节点。

> *注意*：jenkins selenium 服务器始终与 jenkins 的 selenium 插件版本相同。因此，如果 selenium 插件名称是 selenium 插件 3.1.0，那么它在 selenium 服务器 3.1.0 上运行。

安装 jenkins selenium 插件后，您可以找到一个新的 selenium grid 选项，点击它，您将获得更多信息：

[![在此处输入图像描述](../Images/b76de22a99af32a9ad035fa086299b35.png)](https://i.stack.imgur.com/Bmsvc.png)

[![在此处输入图像描述](../Images/c530cf1e0cc1f67d15faba5f1eea26e4.png)](https://i.stack.imgur.com/Bmsvc.png)

现在你必须像这样启动一个 jenkins selenium 独立服务器：

Windows（创建一个包含以下内容的 .bat 文件并执行它，相应地更改相关部分）：

```
start java -jar -Dwebdriver.gecko.driver="C:\Webdrivers\GeckoDriver\geckodriver.exe" -Dwebdriver.chrome.driver="C:\Webdrivers\ChromeDriver\chromedriver.exe" selenium-server-standalone-<VERSION>.jar -role node -hub http://<YOUR_JENKINS_MACHINE_IP>:<PORT>/grid/register 
```

就我而言，我使用了：

```
start java -jar -Dwebdriver.gecko.driver="C:\Webdrivers\GeckoDriver\geckodriver.exe" -Dwebdriver.chrome.driver="C:\Webdrivers\ChromeDriver\chromedriver.exe" selenium-server-standalone-3.1.0.jar -role node -hub http://172.25.201.100:4444/grid/register 
```

确保将 geckodriver 和 chromedriver 的路径更正到它们的实际位置。

现在节点应该连接到集线器，您可以开始测试。

更多信息： [https ://github.com/SeleniumHQ/selenium/wiki/Grid2](https://github.com/SeleniumHQ/selenium/wiki/Grid2)

# linq - 查询以首先获取 EF 代码中的根/基本实体

> ID：11578616
> 
> 赞同：0
> 
> 时间：2012-07-20T11:40:15.900
> 
> 标签：linq, linq-to-entities, ef-code-first, entity-framework-5

认为：

```
BaseEntity
ChildEntity : BaseEntity 
```

问题在于以一种有效的方式获取基础实体。我知道有效的是这种类型的查询：

```
var results = context.BaseEntities.Where(entity => !(entity is ChildEntity) ); 
```

然而，这**很**容易被破坏，因为简单地添加另一个扩展`BaseEntity`，就像`ChildEntityTwo : BaseEntity`会破坏查询（查询将包括`BaseEntity`和`ChildEntityTwo`类型。

此外，我还没有机会对其进行分析，但我怀疑查询会下载**所有**实体并将它们过滤到内存中，但我可能错了。

请注意，该解决方案`context.BaseEntities.OfType<BaseEntities>()`实际上也将包含并下载所有实体！它仅在您需要端点类时才有效，例如`ChildEntityTwo`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T12:16:26.667

ESQL[`OFTYPE ONLY`](http://msdn.microsoft.com/en-us/library/bb399295.aspx)为此提供了运算符，但该运算符在 Linq 中没有任何等效项。您可以使用[此解决方法](http://blogs.msdn.com/b/alexj/archive/2009/09/17/tip-35-how-to-write-oftypeonly-tentity.aspx)为 Linq构建`OFTYPE ONLY`。

# ruby-on-rails - 在 Rails 中使用 CRUD 和表单进行单表继承

> ID：11578620
> 
> 赞同：4
> 
> 时间：2012-07-20T11:40:34.683
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms, crud, sti

我对 Rails 中的 STI 有点困惑。

我的情况：我有一个`Contact`具有字符串字段的模型`description`，`data`用于存储一些联系人，如电话、传真、电子邮件等。

现在，当我有一些特定的联系人类型（例如电子邮件地址的电话号码）时，我想以不同的方式验证数据格式，并且我想对输出进行一些不同的格式化。

我决定使用 STI，因为所有模型都有相同的数据，只是行为不同。我对表单和 CRUD 操作有一些疑问，因为我不想违反 Rails 约定。

1.  如何使用模型类型制作下拉列表？我应该对其进行硬编码还是有一些更自动化的方式？

2.  如何创建记录？我应该使用`switch`语句并根据收到的类型创建相应实例的新模型吗？

3.  如果我要更改模型类型，我应该如何更新它？将对象转换为新类？还是创建一个新对象并销毁前一个对象？

我将非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T11:58:00.207

1.  是的，应该做一个硬核，因为您的 STI 模型没有默认存储。
2.  一般来说，是的。但是使用 Rails，您可以只使用`camelize.constantize`从字符串中获取类。另一种方法是使用父模型，并`type`手动设置字段。与`STI`所有记录都在同一个表中一样，然后所有记录都属于父类。
3.  如果您想更新，只需更新`type`字段。然后您可以重新查询以强制 Rails 获取不同类型的新对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T11:51:42.597

您可以创建这样的模型：

```
Type < ActiveRecord::Base
  has_many :contacts
end 
```

您可以使用此命令`rails g model Type name:string`，在您的联系人中添加一`type_id`列并迁移数据库。

end 像这样更改联系人的模型：

```
Contact < ActiveRecord::Base
  belongs_to :type
end 
```

现在，在您的表单中，您可以使用它：

```
select("type", "type_id", Type.all.collect {|t| [ t.name, t.id ] }, { :include_blank => true }) 
```

它应该可以解决您的问题。

现在你可以做这样的事情：

```
@emails = Type.find_by_name('email').contacts 
```

或者使用范围。

# java - 为什么线程只运行一次？

> ID：11578624
> 
> 赞同：1
> 
> 时间：2012-07-20T11:40:46.597
> 
> 标签：java, multithreading

我正在尝试跟踪鼠标光标的位置，因此需要使用线程来继续跟踪它。我的线程只运行一次。我猜我一路上错过了一些东西。

编码 ：

鼠标位置类

```
import java.awt.MouseInfo;
import java.awt.Point;
import java.util.Timer;

public class mousePosition implements Runnable
{
    static Point mouseLocation = MouseInfo.getPointerInfo().getLocation();
    static Timer t = new Timer();
    int x,y = 0;

    public void run()
    {
        try
        {
                x = mouseLocation.x;
                y = mouseLocation.y;

                System.out.println("X:"+x+" Y:"+y+" at time "+System.currentTimeMillis());
        }

        catch(Exception e)
        {
            System.out.println("Exception caught : "+e);
        }

    }

} 
```

主班

```
public class threadRunner
{
    public static void main(String[] args)
    {
        Thread t1 = new Thread(new mousePosition());

        t1.start();

    }

} 
```

感谢您的任何帮助。我知道之前有人问过这个问题，但我仍在努力让它发挥作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T11:54:08.713

Thread 的`run()`方法只会运行一次。如果您执行以下操作，它将运行得更多：

```
public void run() {
  while(true) { // Or with a stop condition
    try {
            x = mouseLocation.x;
            y = mouseLocation.y;

            System.out.println("X:"+x+" Y:"+y+" at time "+System.currentTimeMillis());

    } catch(Exception e) {
        System.out.println("Exception caught : "+e);
    }
  }
} 
```

虽然我确信线程上的这个 while 循环很昂贵，但就计算成本而言，并且使用[Observer 设计模式](http://en.wikipedia.org/wiki/Observer_pattern)有更好的实践。这种良好实践的实现和示例正是[MouseListener](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/event/MouseListener.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T11:53:28.743

这是每 50 毫秒读取一次鼠标位置的简单方法

```
class mousePosition {
    public static void main(String[] args) {
        Timer t = new Timer();
        t.schedule(new TimerTask() {
            public void run() {
                int x, y;
                try {
                    PointerInfo mouseLocation = MouseInfo.getPointerInfo();
                    x = mouseLocation.getLocation().x;
                    y = mouseLocation.getLocation().y;
                    System.out.println("X:" + x + " Y:" + y + " at time "
                            + System.currentTimeMillis());
                } catch (Exception e) {
                    System.out.println("Exception caught : " + e);
                }
            }
        }, 0, 50);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T11:43:32.180

当您`start()`使用 new`Thread`时，唯一发生的事情就是执行了`Thread`s`run()`方法。一旦`run()`方法完成，`Thread`死亡。

要不断检查鼠标位置，您可能应该开始某种方式，[这里](http://docs.oracle.com/javase/tutorial/uiswing/events/mouselistener.html)`MouseListener`有一个很好的教程。

要了解有关线程的更多信息，我建议查看[有关该主题的 Java 教程](http://docs.oracle.com/javase/tutorial/essential/concurrency/threads.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T11:47:50.997

做这个 ：

```
public void run()
    {
        try
        {       
                boolean mouseTracked = false;
                while(!mouseTracked){
                   x = mouseLocation.x;
                   y = mouseLocation.y;

                System.out.println("X:"+x+" Y:"+y+" at time "+System.currentTimeMillis());
                mouseTracked = true; //do this when mouse tracked..
        }
}
        catch(Exception e)
        {
            System.out.println("Exception caught : "+e);
        }

    } 
```

这将继续跟踪鼠标，直到您将 mouseTracked 设置为 true，将 mouseTracked 设置为 true，您将在匹配条件下执行此操作

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T11:49:31.197

像这样改变你的班级

```
import java.awt.MouseInfo;
import java.awt.Point;
import java.util.Timer;

public class MousePosition implements Runnable
{
static Point mouseLocation = null;
static Timer t = new Timer();
int x,y = 0;

public void run()
{   
  while(true){
    try
    {
          mouseLocation= MouseInfo.getPointerInfo().getLocation();

            x = mouseLocation.x;
            y = mouseLocation.y;

            System.out.println("X:"+x+" Y:"+y+" at time "+System.currentTimeMillis());
    }

    catch(Exception e)
    {
        System.out.println("Exception caught : "+e);
    }
  }
}
} 
```

# c++ - OpenGL中的简单三角形

> ID：11578626
> 
> 赞同：1
> 
> 时间：2012-07-20T11:40:48.687
> 
> 标签：c++, opengl

我有以下代码

```
int i = 0;

void display(void)
{
    glLoadIdentity();
    glColor3f(1.0f, 0.0f, 0.0f);
    glPushMatrix();
    glTranslatef(20.0f, 20.0f, -40.f);
    glRotatef(180.f, 0.0, 0.0, 1.0);

    glBegin(GL_TRIANGLES);
    glVertex3f(pts[tri[i]], (pts[ptsLength/2 + tri[i]] - maximum) * -1, 0);
    glVertex3f(pts[tri[i+1]], (pts[ptsLength/2 + tri[i+1]] - maximum) * -1, 0);
    glVertex3f(pts[tri[i+2]], (pts[ptsLength/2 + tri[i+2]] - maximum) * -1, 0);
    glEnd();

    i+=3;
    glPopMatrix();
    glutSwapBuffers();
} 
```

在渲染下一个三角形之前，如何让这个方法暂停并等待击键？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T11:49:32.817

是这个`glutIdleFunc`，还是那个时候叫你的`glutPostRedisplay`？

无论哪种情况，您都需要先设置 a [`glutKeyboardFunc`](http://www.opengl.org/resources/libraries/glut/spec3/node49.html)，在其中检测是否按下了某个键。

如果您仅在某些事件上更新屏幕：

```
... inside the keyboard function
if (key_pressed == THE_KEY_YOU_WANT)
    glutPostRedisplay(); 
```

在您使用`display`空闲功能的情况下，您可以执行以下操作：

```
global:
bool go_next = false;

... inside the keyboard function
if (key_pressed == THE_KEY_YOU_WANT)
    go_next = true;

... inside display:
void display(void)
{
    if (go_next)
    {
        go_next = false;
        glLoadIdentity();
        glColor3f(1.0f, 0.0f, 0.0f);
        glPushMatrix();
        ... etc
        glPopMatrix();
    }
    glutSwapBuffers();
} 
```

* * *

旁注：最好将逻辑和渲染分开。所以也许这样的代码是最好的：

```
int triangles_to_draw = 0;

... inside the keyboard function
if (key_pressed == THE_KEY_YOU_WANT)
    process_event_next_triangle();

void process_event_next_triangle()
{
    if (triangles_to_draw < maximum)
        ++triangles_to_draw;
}

void display(void)
{
    go_next = false;
    glLoadIdentity();
    glColor3f(1.0f, 0.0f, 0.0f);
    glPushMatrix();
    glTranslatef(20.0f, 20.0f, -40.f);
    glRotatef(180.f, 0.0, 0.0, 1.0);

    glBegin(GL_TRIANGLES);
    for (int i = 0; i < 3*triangles_to_draw; i += 3)
    {
        glVertex3f(pts[tri[i]], (pts[ptsLength/2 + tri[i]] - maximum) * -1, 0);
        glVertex3f(pts[tri[i+1]], (pts[ptsLength/2 + tri[i+1]] - maximum) * -1, 0);
        glVertex3f(pts[tri[i+2]], (pts[ptsLength/2 + tri[i+2]] - maximum) * -1, 0);
    }
    glEnd();

    glPopMatrix();
    glutSwapBuffers();
} 
```

请注意，通过这种方式，您可以在`process_event_next_triangle`不影响`display`功能的情况下将其复杂化。当您有许多键做不同的事情时，这会使生活变得更加轻松。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T11:49:19.637

处理过剩键盘事件时添加代码：

```
if (key == DESIRED_KEY_CODE)
    i+=3 
```

`i+=3`并在`display()`函数中删除它

但请注意，这样一次我们将只有一个三角形......如果你想显示几个三角形，你必须有一些可见三角形的计数器并将它们显示在一个循环中。

# jquery-mobile - different colors on radio buttons when they are active in Jquery mobile

> ID：11578628
> 
> 赞同：0
> 
> 时间：2012-07-20T11:40:57.967
> 
> 标签：jquery-mobile

I have three radio buttons which have the same theme in jquery. If I select one of them, the color of the button will change to the color specified in my .ui-btn-active class in the css. My radio buttons are named Can meet, not sure and Decline. I want my Decline radio button to have a different color than the two others when it is selected (the color red).

I'm using Jquery mobile and have customized the css for which colors I want to have on the different themes and I have changed the .ui-btn-active to .ui-btn-active-a and .ui-btn-active-b and made them with different values. I have tried to switch between the two ui-btn-active classes without no luck, and I have tried the addClass(..) and removeClass(..) without luck. I made a method in my jquery-mobile.js which look like this:

```
 $.mobile.changeAction = function( activeBtn){
    $.mobile.activeBtnClass = activeBtn;
} 
```

where my activeBtn parameter will be a string to choose which activeBtnClass I want to have. I think the problem is that I have problems refreshing the activeBtnClass after overriding it, I have tried some refreshing methodes without no luck.

As long as the radio buttons have different colors when active I will be very thankful.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T13:48:24.260

Following styles should do the trick: ![Screenshot1 Vertically stacked](../Images/b3d95d7db3576b6a0a5674b25fdc3e75.png)

```
.ui-radio:nth-child(1) .ui-icon-radio-on.ui-icon{
    background-color:green;
}
.ui-radio:nth-child(2) .ui-icon-radio-on.ui-icon{
    background-color:grey;
}
.ui-radio:nth-child(3) .ui-icon-radio-on.ui-icon{
    background-color:red;
}​ 
```

Sample [jsfiddle](http://jsfiddle.net/nirmaljpatel/EAGgm/).

To style Horizontally stacked select options:

![Screenshot2 Horizontally stacked](../Images/5718d23ed8b2e7a4b17ea95cf7fc24a5.png)

```
.ui-radio:nth-child(1) .ui-radio-on span.ui-btn-inner{
    background-color:green;
}
.ui-radio:nth-child(2) .ui-radio-on span.ui-btn-inner{
    background-color:grey;
}
.ui-radio:nth-child(3) .ui-radio-on span.ui-btn-inner{
    background-color:red;
}​ 
```

Sample [jsfiddle](http://jsfiddle.net/EAGgm/19/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T19:15:23.230

Why not just create custom themes for all of the states that you might want? You can have multiple custom themes, and only use them when you'd like. I have 7 themes in my CSS, and this way you can always incorporate them later if you'd like without having to do so much custom coding.

You can just apply the theme with the `data-theme="f"` (or other letter swatch) element attribute.

Here's jQuery ThemeRoller 1.1.1 [http://jquerymobile.com/themeroller/index.php](http://jquerymobile.com/themeroller/index.php). If you're just making small changes to the theme, such as an active state, just copy the theme, and make the changes and save as a new swatch. You can go from A-Z :)

# android - 从设备坐标系到绝对坐标系的加速度

> ID：11578636
> 
> 赞同：28
> 
> 时间：2012-07-20T11:41:20.033
> 
> 标签：android, vector, accelerometer, coordinate-systems, coordinate-transformation

从我的 Android 设备中，我可以读取一组线性加速度值（在设备的坐标系中）和一组绝对方向值（在地球坐标系中）。我需要的是在后一个坐标中获得线性加速度值。系统。

我怎样才能转换它们？

**在阿里回复评论后**编辑：****

 **好吧，所以如果我理解正确，当我测量线性加速度时，手机的位置完全无关紧要，因为读数是在地球坐标系中给出的。对？

但我只是做了一个测试，我将手机放在不同的位置并在不同的轴上获得加速度。有 3 对图片 - 第一张显示我是如何放置设备的（对不起我的 Paint “大师技能”），第二张显示来自线性 acc 提供的数据的读数。传感器：

1.  设备放在左侧

![第一位置](../Images/04c9a382f000e14c84046d749af6ab61.png) ![初读](../Images/7312ba506e0111f56e3123a6c8d313ca.png)

2.  仰卧装置

![第二名](../Images/866305c34e06826169b2a8615d15f7cb.png) ![二读](../Images/689d135f4b3e25d4e5686ed5c1efa8c8.png)

3.  设备站立

![在此处输入图像描述](../Images/f09cc78f92a294d81f686c183616c5ec.png) ![在此处输入图像描述](../Images/f97ad40417ba558723541b258e2a412c.png)

现在 - 为什么在第三种情况下加速度发生在 Z 轴（而不是 Y），因为设备位置无关紧要？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-07-23T14:19:59.593

我终于设法解决了！因此，要在**地球坐标系**中获得**加速度矢量**，您需要：

 **1.  从（使用和传感器值作为参数）获取旋转矩阵（`float[16]`因此它可以在以后被`android.opengl.Matrix`类使用），`SensorManager.getRotationMatrix()``SENSOR.TYPE_GRAVITY``SENSOR.TYPE_MAGNETIC_FIELD`
2.  在旋转矩阵上使用`android.opengl.Matrix.invertM()`来反转它（不是转置！），
3.  使用`Sensor.TYPE_LINEAR_ACCELERATION`传感器获取线性加速度矢量（在设备的坐标系中），
4.  用于`android.opengl.Matrix.multiplyMV()`将旋转矩阵乘以线性加速度向量。

你有它！我希望我能为别人节省一些宝贵的时间。

感谢 Edward Falk 和 Ali 的提示！！

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2016-04-07T13:26:59.023

根据@alex 的回答，这里是代码片段：

```
private float[] gravityValues = null;
private float[] magneticValues = null;

 @Override
    public void onSensorChanged(SensorEvent event) {
        if ((gravityValues != null) && (magneticValues != null) 
            && (event.sensor.getType() == Sensor.TYPE_ACCELEROMETER)) {

            float[] deviceRelativeAcceleration = new float[4];
            deviceRelativeAcceleration[0] = event.values[0];
            deviceRelativeAcceleration[1] = event.values[1];
            deviceRelativeAcceleration[2] = event.values[2];
            deviceRelativeAcceleration[3] = 0;

            // Change the device relative acceleration values to earth relative values
            // X axis -> East
            // Y axis -> North Pole
            // Z axis -> Sky

            float[] R = new float[16], I = new float[16], earthAcc = new float[16];

            SensorManager.getRotationMatrix(R, I, gravityValues, magneticValues);

            float[] inv = new float[16];

            android.opengl.Matrix.invertM(inv, 0, R, 0);
            android.opengl.Matrix.multiplyMV(earthAcc, 0, inv, 0, deviceRelativeAcceleration, 0);
           Log.d("Acceleration", "Values: (" + earthAcc[0] + ", " + earthAcc[1] + ", " + earthAcc[2] + ")");                

        } else if (event.sensor.getType() == Sensor.TYPE_GRAVITY) {
            gravityValues = event.values;
        } else if (event.sensor.getType() == Sensor.TYPE_MAGNETIC_FIELD) {
            magneticValues = event.values;
        } 
   } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-20T11:53:34.723

[根据文档](http://developer.android.com/guide/topics/sensors/sensors_overview.html#sensors-coords)，您可以获得手机坐标系中的线性加速度。

**您可以通过将任何矢量与旋转矩阵相乘将其从手机坐标系转换为地球坐标系**。[您可以从getRotationMatrix()](http://developer.android.com/reference/android/hardware/SensorManager.html#getRotationMatrix%28float%5B%5D,%20float%5B%5D,%20float%5B%5D,%20float%5B%5D%29)获取旋转矩阵。

（也许已经有一个函数为你做这个乘法，但我不做 Android 编程，我不熟悉它的 API。）

关于旋转矩阵的一个很好的教程是[方向余弦矩阵 IMU：理论](https://drive.google.com/open?id=0B9rLLz1XQKmaZTlQdV81QjNoZTA)手稿。祝你好运！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-21T17:09:42.353

好的，首先，如果您想在 Android 上进行实际的惯性导航，那么您的工作已经完成。智能手机中使用的廉价小传感器不够精确。虽然，在小距离的内部导航方面已经完成了一些有趣的工作，例如在建筑物内。可能有关于你可以挖掘的主题的论文。谷歌“Motion Interface Developers Conference”，你可能会发现一些有用的东西——这是 Invensense 几个月前举办的一次会议。

其次，不，线性加速度在设备坐标中，而不是世界坐标中。您必须自己转换，这意味着知道设备的 3-d 方向。

您要做的是使用支持虚拟传感器 TYPE_GRAVITY 和 TYPE_LINEAR_ACCELERATION 的 Android 版本。您需要一个带有陀螺仪的设备才能获得相当准确和精确的读数。

在内部，系统结合了陀螺仪、加速度计和磁力计，以便为设备方向提供真实值。这有效地将加速度计设备拆分为其重力和加速度分量。

因此，您要做的是为 TYPE_GRAVITY、TYPE_LINEAR_ACCELERATION 和 TYPE_MAGNETOMETER 设置传感器侦听器。使用重力和磁力计数据作为 SensorManager 的输入。getRotationMatrix() 以获取将世界坐标转换为设备坐标的旋转矩阵，反之亦然。在这种情况下，您需要“反之”部分。也就是说，通过将线性加速度输入乘以方向矩阵的转置，将它们转换为世界坐标。****

# c# - 从词典网站导入数据

> ID：11578641
> 
> 赞同：-1
> 
> 时间：2012-07-20T11:41:39.160
> 
> 标签：c#

我需要从免费的在线词典中翻译一组单词，所以我用 C# 编写了一个简单的程序来发送 http 请求，然后解析返回的 HTML 以提取含义。

然而，免费网站在 130 次请求后停止，要求手动输入图片中的文字（验证码）以继续。我怎样才能解决这个问题？

谢谢，萨默

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T11:47:08.450

这不是您的代码的问题，而是他们的网站阻止自己被单个用户的点击发送垃圾邮件。最简单的事情就是拥有一本自己的字典，然后就没有验证码可以绕过了。

# iphone - XCode - 动态创建的标签，当我更改文本时，它只更改最后一个

> ID：11578647
> 
> 赞同：-3
> 
> 时间：2012-07-20T11:41:57.537
> 
> 标签：iphone, objective-c, xcode, cocoa-touch

所以我有一堆动态加载的标签..

他们每个人都有相同的名字，因为不知道会有多少..

我有另一种方法（不是创建标签的方法）更改其中一个标签的文本，但是当我运行它时，只有创建的最后一个标签会改变..

我需要它来更改具有特定标签或其他东西的那个..

非常感谢帮助，这个网站还没有让我失望。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T11:53:45.550

self.myLabel 不能连接多个标签，所以它会包含上次创建标签的引用，你必须每次创建新标签，你不能通过类属性跟踪它们，你必须通过它们的标签访问标签.

您可以为每个标签设置标签，下面是示例代码，

```
 for(int i=0; i< numberOfLabels; i++)
{
    UILabel *label = [[UILabel alloc] init];
    label.tag = i; // do not use tag 0 here.. u can use i+1, or i+100.. something like this.
    [self.view addSubview:label];
} 
```

访问标签，

```
UILabel *label = (UILabel*)[self.view viewWithTag: labelTag]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T11:56:41.973

好的，因为您没有任何代码可以显示，我想我必须推测一下。

我的理解是你正在用你的`UILabels`代码创建动态并且你想访问它们。`UILabels`由于您的所有名称都相同，因此`UILabel`每次创建新的`UILabel`. 因此，为了跟踪`UILabel`您创建的数量，您必须将它们添加到数组中。`NSMutableArray`在你的文件中声明一个`viewController.h`并确保在`viewDidLoad`你分配它就像

```
arrForLabels = [[NSMutableArray alloc]init]; 
```

因为它是一个`NSMutableArray`你可以添加对象到它。

所以当你创建一个`UILabel`确保你`UILabel`在**数组**中添加相同的实例时

```
[arrForLabels addObject:yourLabel]; 
```

您可以尝试查看`NSLog`您的**数组**以查看其内容。

现在你要做的就是创建一个这样的薄弱环节

```
UILabel *tempLabel = [arrForLabels objectAtIndex:1]; 
```

现在`tempLabel`将是`UILabel`更改**文本**

```
tempLabel.text = @"My New Text"; 
```

它会正常工作。随意询问其中的任何问题。

# android - ViewStub 在有条件地膨胀多个布局时引发错误

> ID：11578653
> 
> 赞同：8
> 
> 时间：2012-07-20T11:42:37.983
> 
> 标签：android, inflate, layout-inflater, viewstub

在我的应用程序中，我有一个微调器和一个**ViewStub**，这取决于从微调器中选择的用户项目，我必须为不同的布局充气并在微调器下方显示充气的布局。当我的应用程序启动时，**ViewStub**在第一次从微调器中选择任何项目时成功地扩展了布局。当我尝试从微调器中选择一个新项目时，它会在下面引发异常

```
java.lang.IllegalStateException: ViewStub must have a non-null ViewGroup viewParent 
```

到目前为止我的代码是

```
@Override
public void onItemSelected(AdapterView<?> pParent, View pView, int pPosition, long pId) {

if(pPosition == 1){
    m_cStub.setLayoutResource(R.layout.text_form);
}else if(pPosition == 2){
    m_cStub.setLayoutResource(R.layout.integer_form);
}
View inflated = m_cStub.inflate();
} 
```

m_cStub 是在 Activity 的**onCreate()内部创建的****ViewStub**对象。

 **这是我的主要布局 xml 代码

```
<RelativeLayout..................>
     <spinner......................./>

     <ViewStub android:id="@+id/dynamic_form_layout"
    android:inflatedId="@+id/dynamic_form_inflated_id"
    android:layout_alignParentBottom="true"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"/>
</RelativeLayout> 
```

谁能告诉我哪里出错了。如果您有任何其他解决方案可以解决此问题，请分享。

谢谢。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-20T12:21:17.450

`ViewStub`并非设计用于像这样的场景。在存根膨胀后，存根从视图层次结构中*移除。*这就是为什么它没有父母并提到`IllegalStateException`提高。`ViewStub`不能多次使用。另外保持对 a 的长寿命引用`ViewStub`是不必要的，如果需要，最好`null`在充气后对其进行操作，这样 GC 就可以吃掉它。

考虑使用`addView()`/`removeView()`替换您的视图。或者更好地使用[ViewFlipper](http://developer.android.com/reference/android/widget/ViewFlipper.html)。**

# perl - 如何改进这个 perl/bash 单行器以反序列化 json 数据

> ID：11578654
> 
> 赞同：4
> 
> 时间：2012-07-20T11:42:39.720
> 
> 标签：perl, bash, code-snippets

我有一个小 bash 程序，它调用返回 JSON 数据的 web 服务。

我自己编写了 web 服务程序，我可以完全控制它的数据源，因此我可以信任返回的数据。

现在我想对数据做点什么。

数据是一个没有嵌套的简单、简短的键值结构，如下所示：

```
{
  "asciifile" : "../tmp/data_20120720_105746-01580.txt",
   "excelfile" : "../tmp/data_01580-20120720_105746.xlsx",
   "from" : "Jun 19, 2012",
   "msg" : "some info message, for the admin",
   "outfile" : "data--recent.txt",
   "outfile_excel" : "data--recent.txt.xlsx",
   "resolution" : "std"
   "to" : "Jul 20, 2012",
   "url_comment" : "another info message, for the screen/user",
   "url_outfile" : "http://www.example.com/path/tmp_cached_files/data--recent.txt",
   "url_outfile_excel" : "http://www.example.com/path/tmp_cached_files/data--recent.txt.xlsx",

} 
```

现在我使用这个单行来反序列化返回到 perl 代码的 json 结构。请参阅此代码段的最后一行：

```
#!/bin/bash
cmd=$(curl_or_wget_call_to_webservice)
output=$(eval $cmd)
outfile_excel=$(echo "$output"| json_xs -f json -t dumper | tee | perl -n0777 -E 'eval  "%h=%{$_}"; warn $@ if $@; say $h{outfile_excel}') 
```

例如，我不确定为什么要提出 %{$_} 构造。*有一个更好的方法吗？*写最后一行有更短或更安全的方法吗？

SE 编辑：如果你愿意，你可以把这篇文章移到 codereview stackexchange 网站上，但我在那里没有账户。

**编辑：在 8 个月后重新访问该帖子后**，我想补充一点，这些天我使用这个衬垫来获取我的 github 存储库的名称：

```
 wget --quiet --auth-no-challenge --user knbknb --password secret  -O -
 https://api.github.com/user/repos |  
 perl  -MJSON -n0777 -E '$r = decode_json($_); map {say $_->{name}} @$r' - 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T14:07:11.227

Perl 可以自己解码 JSON，所以接下来应该给出一些思路，使用 LWP::Simple 来获取一些 json 数据。

```
perl -MLWP::Simple -MJSON \
-e '$ref = decode_json(get("http://your.url/to/webservice")); print $ref->{outfile_excel}' 
```

$ref 包含所有 JSON 数据的 perl 结构，根据需要打印出来。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T11:58:03.780

有[jshon](http://kmkeen.com/jshon/)。你可以简单地调用类似的东西

```
curl http://somehere.tld/data.json | jshon -e url_outfile_excel 
```

这将打印给定键的值。

顺便一提。控制 web 服务并不能使输入可信。打电话时要小心`eval`。

# c# - C# 使用证书通过 https 调用 WCF 服务

> ID：11578655
> 
> 赞同：1
> 
> 时间：2012-07-20T11:42:40.790
> 
> 标签：c#, wcf, pfx

我有 WCF 服务通过 https 工作。此 WCF 服务需要私有证书并使用密码唱歌 我有正确的证书和密码。证书已安装到存储库中。

我无法从此 Web 服务中检索 wsdl xml 文档。我试图做的事情：

*   使用 IE、FireFox、Chrome 等调用 WebService。每次我得到： *“XML 文档必须有一个顶级元素。错误处理资源' [https://ServiceHostHere:453/ServiceMethodhere](https://ServiceHostHere:453/ServiceMethodhere) ....”*
*   发现 WebService uning VS2010 Add Service Reference，我得到： * URL [https://ServiceNameHere:453/ServiceMethod/Service.svc?wsdl](https://ServiceNameHere:453/ServiceMethod/Service.svc?wsdl)处的文档未被识别为已知文档类型。来自每种已知类型的错误消息可能会帮助您解决问题：
    *   来自“XML 架构”的报告是“缺少根元素。”。
    *   来自“DISCO 文档”的报告是“缺少根元素。”。
    *   来自“WSDL 文档”的报告是“XML 文档 (0, 0) 中存在错误。”。*

**目前只有“SOAP UI”工具可以正常工作。**

# c++ - 将 ostream 复制到 std::string

> ID：11578659
> 
> 赞同：1
> 
> 时间：2012-07-20T11:43:00.237
> 
> 标签：c++

我有一个曾经作为命令行运行的程序，因此其中有很多`couts`。我想知道是否有一种方法可以`ostream`在调用该程序的类中创建一个对象并使用类似的东西初始化该程序的构造函数

```
Import(ostream & text_out= std::cout):out(text_out) 
```

并用 out 替换我所有的调用`cout`，从而切换输出的位置。

在每个函数调用结束时，我可以将`ostream`对象提取为字符串，并将其发送到我的 MFC 对象。

这意味着我的基本代码如果作为命令行或 MFC 程序调用，如果我能让它工作的话，它会很好。这可能是我想错了方向，但我很好奇这是否可能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T11:50:23.473

您可以使用`ostringstream`：

```
std::ostringstream oss;
std::ostream &os = oss;
os << "Hello" << endl;

std::string str = oss.str(); // str == "Hello\n" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T11:46:16.580

看来您正在寻找[`std::ostringstream`](http://en.cppreference.com/w/cpp/io/basic_ostringstream).

# biztalk - 使用 functoids 检查 SQL Server 表中是否存在记录

> ID：11578660
> 
> 赞同：3
> 
> 时间：2012-07-20T11:43:08.287
> 
> 标签：biztalk, biztalk-2010

我有两个模式。我想检查第一个模式中的值（例如 ID）是否存在于第二个模式中。如果存在，则更新记录，否则将记录插入第二个模式。

如何在带有 SQL Server 2008 R2 的 BizTalk Server 2010 中完成此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T15:30:11.790

如果要从 BizTalk 映射中查找 SQL Server 中的值，则可以使用[Database Lookup Functoid](http://msdn.microsoft.com/en-us/library/aa547392.aspx)。

如果您想在不使用映射的情况下在数据库中查找某些内容，则可以从业务流程中使用 SQL Server 的 BizTalk 适配器，如此处所述[，](http://msdn.microsoft.com/en-us/library/dd787894.aspx)以从 SQL 中选择数据。

每个“模式”中的值（实际上，我的意思是在每条消息中）应该是[提升属性或区分字段，这将允许您](http://blogs.msdn.com/b/scottwoo/archive/2003/11/07/56996.aspx)[直接从编排](http://msdn.microsoft.com/en-us/library/aa559259.aspx)中访问和设置它们。

# asp.net - ASPX：在客户端打印机上打印服务器端 PDF

> ID：11578663
> 
> 赞同：0
> 
> 时间：2012-07-20T11:43:12.523
> 
> 标签：asp.net, pdf, printing, interop

我创建 pdf 文件并将它们存储在网络服务器上。我使用 Word.Interop 创建文件。使用 Document.PrintOut 打印文件将在服务器打印机上启动打印作业

用户可以下载他的 pdf 文件，他也应该能够在自己的打印机上打印它们。

这怎么可能？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T12:09:19.990

您不能直接从服务器与客户端的打印机交互。这是由于浏览器安全限制。

但是，您可以使用 javascript 调用打印对话框。

```
var pdf = window.open(PATH_TO_PDF);
pdf.print(); 
```

尝试将其保留在 javascript 按钮上。

许多浏览器会阻止尝试直接打开 javascript 窗口的脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T12:03:35.963

我不认为你可以从服务器代码影响客户端的打印机，也许你可以在服务器端生成一些 JavaScript，至少可以在浏览器中打开打印对话框。

# php - 从表中的sql数据记录插入到另一个表

> ID：11578665
> 
> 赞同：0
> 
> 时间：2012-07-20T11:43:26.680
> 
> 标签：php, mysql

我有两张桌子

1.  **学生**桌
2.  **csci01成员**表

我将学生记录放在 csci01members 中，我的代码没有语法错误。但它总是卡在“用户已经是会员”中。即使他不是，我也已经有了添加记录的代码。

但我需要一个错误捕获，以便如果用户已经在 csci01members 表中。它无法添加记录或他无法查看 csci01 的成员，因此该成员将不会出现在添加到表的列表中。

```
<?php
    $errors="";
        if(isset($_GET['add']))
        {
            $con = mysql_connect("localhost","root","");
            if(!$con)
            { die("could not connect to server".mysql_error()); }

            mysql_select_db("login", $con);

        if (empty($errors)){
        $check = mysql_query("SELECT * from csci01members");

        $check_count = mysql_num_rows($check);  
        if ($check_count == 1) {
             die ("&nbsp;&nbsp;The user is already a member.");
            }
        }

        $result = mysql_query("SELECT * from students where username='$_GET[add]'");

        $result_count = mysql_num_rows($result);    
        if ($result_count == 0) {
                echo "<font color=red><br />&nbsp;&nbsp;The user doesn't exists.</font>";
                }
        else
            {
            while($row = mysql_fetch_array($result))
            {
        echo "Student Number: $row[username]<br>Name: $row[namelast]
                , $row[namefirst]<br><br> was added to the group<br><br>";
        $sn = $row['username'];
        $nl = $row['namelast'];
        $nf = $row['namefirst'];
        $nm = $row['namemi'];   

        mysql_query("INSERT INTO csci01members (username, namelast, namefirst, namemi)
                        VALUES ('$sn', '$nl', '$nf', '$nm')");

        mysql_close($con);
            }
            }
        }
            $con = mysql_connect("localhost","root","");
            if(!$con)
            { die("could not connect to server".mysql_error());}

            mysql_select_db("login", $con);

            $sql="Select * from students";
            $sql_result=mysql_query($sql) 
            or exit("Sql Error".mysql_error());
            $sql_num=mysql_num_rows($sql_result);

                if($row = mysql_num_rows($sql_result) == 0)
                {
                echo "There are no registered student yet<br><br>";
                $name=$row["username"];
                $class=$row["namelast"] .$row["namefirst"];
                $accept = "<a href='?add=$row[username]'> </a>";
                }
                else
                {
                    echo "<table border = 0  width=\"200%\">";
                    echo "<tr>";
                    echo "<td width = '20%' > <b><center>USN</center></b></td>
                                           <td  width = '60%'><b><center>Name</center></b></td> 
                    <td width = '10%'><b><center>Action</center></b></td>";
                    echo "</tr>";

                    while($sql_row=mysql_fetch_array($sql_result))
                    {
                    $name=$sql_row["username"];
                    $class=$sql_row["namelast"] . ', '.$sql_row["namefirst"];
                    $accept = "<a href='?add=$sql_row[username]'>[Add]</a>";

                    echo "<td >".$name."</td>";
                    echo "<td>".$class."</td>"; 
                    echo "<td>".$accept."</td></tr>";
                    } 
                }
                    echo "</table>";
                    mysql_close();
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T11:53:10.243

您的“count_check”计算表中的所有行，您需要计算添加用户名的行

```
if (empty($errors)){
    $check = mysql_query("SELECT * from csci01members WHERE username = '".mysql_real_escape_string($_GET['add'])."'");

    $check_count = mysql_num_rows($check);  
    if ($check_count == 1) {
         die ("&nbsp;&nbsp;The user is already a member.");
        }
    } 
```

对于添加标识符，最好使用数字 id。用户名可能包含特殊符号，如空格或其他符号，当您通过 url 传递它们时，它们会被编码

# java - Eclipse 无法找到文件--File 对象使用中的 FileNotFoundException

> ID：11578668
> 
> 赞同：1
> 
> 时间：2012-07-20T11:43:42.820
> 
> 标签：java, file, filenotfoundexception

当我尝试使用 Eclipse 访问 Java 中的 File 对象时，只要访问该文件，系统就会发送 FileNotFoundException。我手动创建了该文件并将其放置在 Eclipse 的文件浏览器中。该文件确实有内容，所以问题不在于它是空的。我正在初始化文件

```
File file = new File(this.getClass().getResource("save.txt").toString()); 
```

并使用

```
PrintWriter p = new PrintWriter(file); 
```

发送错误。除了创建此类的初始化路径之外，堆栈跟踪不会通过任何方式返回。例外是

```
java.io.FileNotFoundException: file:\C:\Users\Nathaniel\Downloads\ERPGE-Global%20Equestria%20Workspace\Swarm\bin\main\save.txt (The filename, directory name, or volume label syntax is incorrect) 
```

什么可能导致此错误，如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T11:56:28.967

您需要确保资源包含在项目的构建路径中。

您可以通过以下两种方式之一执行此操作：

1.  将它放在一个文件夹中（例如“res”），然后将该文件夹添加到构建路径中。这样，文件夹中的所有文件都将添加到构建路径中。
2.  将它放在您的源文件夹中（其中一个）。请注意，如果将其放在包文件夹中，则需要包含该文件夹的相对路径（见下文）。

我个人更喜欢选项#1。

**编辑：**您可能还会发现拥有 res 文件夹的子目录很有用。如果您有*res/images/button.png*之类的文件，并且您已将 res 文件夹添加到构建路径，则需要使用字符串*"images/button.png"*访问该文件。

**编辑 2：**修复了一些误导性信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-18T00:10:44.927

该文件需要放在父项目文件夹本身而不是源文件夹中。如果创建的文件没有指定的文件路径，那么这就是它的存储位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T11:49:23.723

提供文件的实际路径并获取文件对象。然后你就可以使用它了。

```
File file = new File("C:\Users\Nathaniel\Downloads\save.txt");
PrintWriter p = new PrintWriter(file); 
```

编辑：

外部化文件名：

在外部文件夹/包中创建一个属性文件 filedetails.properties。

```
fileName=C:\Users\Nathaniel\Downloads\save.txt 
```

访问资源包。

```
ResourceBundle b=ResourceBundle.getBundle("external.filedetails") ;
String fileName=b.getString("fileName");
File file=new File(fileName); 
```

# javascript - btnAdd 点击事件在添加记录后打开两个窗口

> ID：11578671
> 
> 赞同：0
> 
> 时间：2012-07-20T11:43:57.397
> 
> 标签：javascript, asp.net, web

我使用下面的代码打开窗口（search.aspx）。当我从 btnAdd 单击事件插入记录时，我在 search.aspx 中添加了按钮，然后它会打开另一个窗口。插入记录后，我必须关闭该窗口。我怎样才能做到这一点。

```
 //calling Search.aspx on button click of abc.aspx
      if (window.showModalDialog) {
        window.showModalDialog("Search.aspx","name",
        "dialogWidth:255px;dialogHeight:250px");
        }
        //Search.aspx code behind
        protected void btnAdd_Click(object sender, EventArgs e)
        {

          //Insert query for adding record
        }

//Search.aspx code
$(document).ready(function ()
        {
            $("input[id$='btnAdd']").live('click', function (e)
            {
                if ($(".csstablelisttdselected").length == 0)
                {
                    alert("Select patient to fixed appointment.");
                    return false;
                }
                else
                {
                    hidPID.value = $('table td.csstablelisttdselected:first').text();                   
                }
            });
        });

    <asp:Button ID="btnAdd" Width="110px" CssClass="cssbutton" runat="server" Text="Add"
                    OnClick="btnAdd_Click" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T12:34:00.803

只需在模态窗口中将其放入`<HEAD>`

```
<BASE target="_self"> 
```

# c# - 我得到“接口中的非抽象，非 .cctor 方法”的原因是什么？

> ID：11578677
> 
> 赞同：6
> 
> 时间：2012-07-20T11:44:14.570
> 
> 标签：c#, .net, wpf, postsharp

我有一个非常奇怪的问题。我在 dll 中定义了一个接口，如下所示：

```
public interface IKreator2
{
    string Name { get; set; }
    string Description { get; set; }

    INotifyPropertyChanged Settings { get; set; }

    InfiniRenderJob Job { get; set; }
    UserControl UI { get; set; }

    void Init();
    //void OnClose();
} 
```

如果我在我的 WPF 应用程序中链接到此 dll，调试器会在加载时崩溃（内部错误：调试器中的未处理异常::HandleIPCEvent，ID=0x246）。如果我使用“调试非托管代码”调试应用程序，则会收到以下错误：

*   InfiniRender.Host.exe 中 0x76977945 (KernelBase.dll) 处的第一次机会异常：Microsoft C++ 异常：内存位置 0x0029c5b8 处的 EETypeLoadException。
*   InfiniRender.Host.exe 中 0x76977945 (KernelBase.dll) 的第一次机会异常：Microsoft C++ 异常：内存位置 0x00000000 处的 [rethrow]。
*   InfiniRender.Host.exe 中第一次出现 ype 'System.TypeLoadException' 异常
*   InfiniRender.Host.exe 中发生了“System.TypeLoadException”类型的未处理异常附加信息：Nicht abstrakte Nicht-.cctor-Methode in einer Schnittstelle。

目前我完全不知道发生了什么。甚至没有实现接口，也没有类使用它。如果我将方法“Init”注释掉，一切都会按预期工作。有任何想法吗？？

[编辑] 这是 Interface init 方法的 MSIL：

```
.method public hidebysig newslot virtual 
      instance void  Init() cil managed
{
// Code size       96 (0x60)
.maxstack  3
.locals init ([0] class [mscorlib]System.Exception CS$0$0__ex)
IL_0000:  ldsfld     class [NLog]NLog.Logger '<>z__LoggingImplementationDetails'::l14
IL_0005:  callvirt   instance bool [NLog]NLog.Logger::get_IsTraceEnabled()
IL_000a:  brfalse.s  IL_001b

IL_000c:  ldsfld     class [NLog]NLog.Logger '<>z__LoggingImplementationDetails'::l14
IL_0011:  ldstr      "Entering: InfiniRender.IKreator2.Init()"
IL_0016:  call       instance void [NLog]NLog.Logger::Trace(string)
.try
{
  IL_001b:  newobj     instance void [mscorlib]System.NotSupportedException::.ctor()
  IL_0020:  throw

  IL_0021:  ldsfld     class [NLog]NLog.Logger '<>z__LoggingImplementationDetails'::l14
  IL_0026:  callvirt   instance bool [NLog]NLog.Logger::get_IsTraceEnabled()
  IL_002b:  brfalse.s  IL_003c

  IL_002d:  ldsfld     class [NLog]NLog.Logger '<>z__LoggingImplementationDetails'::l14
  IL_0032:  ldstr      "Leaving: InfiniRender.IKreator2.Init()"
  IL_0037:  call       instance void [NLog]NLog.Logger::Trace(string)
  IL_003c:  leave.s    IL_005f

}  // end .try
catch [mscorlib]System.Exception 
{
  IL_003e:  ldsfld     class [NLog]NLog.Logger '<>z__LoggingImplementationDetails'::l14
  IL_0043:  callvirt   instance bool [NLog]NLog.Logger::get_IsWarnEnabled()
  IL_0048:  brfalse.s  IL_005d

  IL_004a:  stloc.0
  IL_004b:  ldsfld     class [NLog]NLog.Logger '<>z__LoggingImplementationDetails'::l14
  IL_0050:  ldstr      "An exception occurred:\n{0}"
  IL_0055:  ldloc.0
  IL_0056:  call       instance void [NLog]NLog.Logger::Warn(string,
                                                             object)
  IL_005b:  rethrow
  IL_005d:  leave.s    IL_005f

}  // end handler
IL_005f:  ret
} // end of method IKreator2::Init 
```

在我看来，NLog 是罪魁祸首？直到今天，NLog 才出现任何问题......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T14:24:44.697

所以，这里的罪魁祸首是“Postsharp.Diagnostics.Toolkit”，它在接口方法声明中添加了代码，导致调试器混乱。

感谢所有帮助过的人！

# css - body element moving when there is absolute positioning

> ID：11578682
> 
> 赞同：0
> 
> 时间：2012-07-20T11:44:30.453
> 
> 标签：css, css-position

I have a really strange quirk happening on a site that I am building. Its a theme for concrete5 but the html is pretty site is here [http://wtms.onbutton.co.uk/mm](http://wtms.onbutton.co.uk/mm).

If you look the `body` has dropped by about 100px as if there is a margin. If I remove the section element, nothing is affected and the header renders fine.

Can anyone explain what's going on and how to fix it?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T12:17:08.800

This can be solved by specifying `display: inline-block` for your section element.

i.e.

```
section {
    display: inline-block; /* new */
    position: relative;
} 
```

# c - Small C applications that are vulnerable to fuzzing(and have the source code available)

> ID：11578684
> 
> 赞同：2
> 
> 时间：2012-07-20T11:44:34.880
> 
> 标签：c, fuzzing

Could anyone please point me in the direction of a small c application that is known to be vulnerable to fuzzing(I will be fuzzing it using zzuf) that has the source code available and is easily installed on Ubuntu. Many Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-02T21:53:17.477

您可以使用根据[CVE-2012-1173](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2012-1173)易受多个整数溢出影响的[libtiff 3.9.4](http://download.osgeo.org/libtiff/tiff-3.9.4.tar.gz)（特别是），从而允许远程攻击者通过 TIFF 文件中精心设计的切片大小执行任意代码。`tiff_getimage.c`

# xml - Modular XML Schema - How should I do it?

> ID：11578695
> 
> 赞同：0
> 
> 时间：2012-07-20T11:44:59.810
> 
> 标签：xml, xsd, modularity

I am very new to xml and xml schema. I want do code something quite modular and I have difficulties achieving this modularity.

My problem is the following: I want xml-schemas which validate the following xml file:

```
<process  xmlns="http://soa.lotterm.org/spec/test/default"
      xmlns:bpmn="http://soa.lotterm.org/spec/test/bpmn" xmlns:bpel="http://soa.lotterm.org/spec/test/bpel" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://soa.lotterm.org/spec/test/default http://soa.lotterm.org/spec/test/default.xsd http://soa.lotterm.org/spec/test/bpmn http://soa.lotterm.org/spec/test/bpmn.xsd http://soa.lotterm.org/spec/test/bpel http://soa.lotterm.org/spec/test/bpel.xsd">
  <bpmn:processProperties>
    <bpmn:uri>http://soa.lotterm.org/repository/stocktrade/stockmarket.bpmn</bpmn:uri>
  </bpmn:processProperties>
  <bpel:processProperties>
    <bpel:uri>http://soa.lotterm.org/repository/stocktrade/stockmarket.bpmn</bpmn:uri>
  </bpel:processProperties>
</process> 
```

Why did I create such a XML-File?

Well I need a default structure, where there are artifacts (e.g. process elements). These artifacts should be able to store module-specific properties (e.g. from my bpel or bpmn module). The default schema of course doesn't know of these modules and the modules don't know of one another (just the default schema). How will my schema look which supports this xml-file?

All of my attempts (e.g. with extension of an abstract property type) don't work out.

Edit: When I try to generate the schema it isn't what I am looking for.

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="http://soa.lotterm.org/spec/test/default" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="process" type="def:processType" xmlns:def="http://soa.lotterm.org/spec/test/default"/>
  <xs:complexType name="processType">
    <xs:sequence>
      <xs:element ref="bpmn:processProperties" xmlns:bpmn="http://soa.lotterm.org/spec/test/bpmn"/>
    </xs:sequence>
  </xs:complexType>
</xs:schema> 
```

And the bpmn-namespace schema:

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="http://soa.lotterm.org/spec/test/bpmn" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="processProperties" type="bpmn:processPropertiesType" xmlns:bpmn="http://soa.lotterm.org/spec/test/bpmn"/>
  <xs:complexType name="processPropertiesType">
    <xs:sequence>
      <xs:element type="xs:anyURI" name="uri"/>
    </xs:sequence>
  </xs:complexType>
</xs:schema> 
```

Well now what is the problem with that? Well the default schema needs to know that the bpmn namespace has processProperties. That's now what I want. Now you will probably suggest to add a process to the bpmn schema which extends the process from the default schema. That's also not what I want because I want to be able to extend the process from different namespaces. So it could look like the one I mentioned earlier.

How can I achieve this?

Cheers, Thomas

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T14:44:23.550

您是否尝试过使用众多可用的模式生成工具之一从此实例自动生成模式？鉴于此输入的简单性，我认为他们会做得很合理。

在 XSD 中，每个目标命名空间必须至少有一个模式文档。由于您的命名空间中没有超过两个元素，因此对于您的目的来说，这似乎是非常模块化的。如果它不够模块化，您需要解释您要实现的目标。

# xml - Using Oracle XMLType column in hibernate

> ID：11578697
> 
> 赞同：30
> 
> 时间：2012-07-20T11:45:07.077
> 
> 标签：xml, oracle, hibernate

I need to map Oracle XMLType column to hibernate entity class. There is a working (and I think well-known) solution that involves implementing `UserType`; however, I cannot use it because requires importing Oracle xml parsers, which in turn causes many problems .
I'm ok with accessing value of xml column as a string and leave transformation to the code that manipulates entity, but I cannot find the way to read value from and write it to database. What I have tried so far:

1.  Declaring property in entity class as `String` . Result - value is read as `null`. If property is just `Serializable`, I get "cannot deserialize" exception.
2.  Using `@Formula` annotation (`CAST xmlCol as varchar2(1000)`). Result - value is not stored
3.  Using `@Loader` and putting `CAST` in `SELECT`. That was the most promising attempt - value was read and stored successfully, but when it comes to loading collection of entities that contain xml column, I get `null` (Hibernate doesn't use sql in `@Loader` if underlying table is `LEFT JOIN`ed).

Another approach that I believe should work is to have xml column as `String` (for writing) plus dummy field for reading with `@Formula`; however, it looks like a dirty hack to me, and I'd prefer not to do so unless I have no choice.

Finally, the very last thing I can do is to change DB Schema (also more that 1 option, like view + triggers, column data type change), but this is not a good option for me either.

I wonder if I missed something or maybe there is a way to make (3) work?

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-08-16T21:02:31.240

**我的方向和要求**

*   实体应将 XML 存储为字符串 (java.lang.String)
*   数据库应在 XDB.XMLType 列中保留 XML
    *   允许索引和更高效的 xpath/ExtractValue/xquery 类型查询
*   整合我上周找到的十几个部分解决方案
*   工作环境
    *   甲骨文 11g r2 x64
    *   休眠 4.1.x
    *   Java 1.7.x x64
    *   视窗 7 专业版 x64

**分步解决方案**

**第 1 步：找到 xmlparserv2.jar (~1350kb)**

此 jar 是编译步骤 2 所必需的，并且包含在此处的 oracle 安装中：%ORACLE_11G_HOME%/LIB/xmlparserv2.jar

**步骤 1.5：找到 xdb6.jar (~257kb)**

如果您使用 Oracle 11gR2 11.2.0.2 或更高版本，或者存储为 BINARY XML，这一点至关重要。

*为什么？*

*   在 11.2.0.2+ 中，XMLType 列默认使用*SECUREFILE BINARY XML*存储，而早期版本将存储为*BASICFILE CLOB*
*   旧版本的 xdb*.jar 无法正确解码二进制 xml 并静默失败
    *   Google *Oracle Database 11g 第 2 版 JDBC 驱动程序*并下载 xdb6.jar
*   [此处概述的二进制 XML 解码问题的诊断和解决方案](https://stackoverflow.com/questions/18518569/retrieving-oracle-xmltype-stored-as-binary-xml-from-a-resultset-in-java)

**第 2 步：为 XMLType 列创建一个休眠用户类型**

使用 Oracle 11g 和 Hibernate 4.x，这比听起来容易。

```
public class HibernateXMLType implements UserType, Serializable {
static Logger logger = Logger.getLogger(HibernateXMLType.class);

private static final long serialVersionUID = 2308230823023l;
private static final Class returnedClass = String.class;
private static final int[] SQL_TYPES = new int[] { oracle.xdb.XMLType._SQL_TYPECODE };

@Override
public int[] sqlTypes() {
    return SQL_TYPES;
}

@Override
public Class returnedClass() {
    return returnedClass;
}

@Override
public boolean equals(Object x, Object y) throws HibernateException {
    if (x == null && y == null) return true;
    else if (x == null && y != null ) return false;
    else return x.equals(y);
}

@Override
public int hashCode(Object x) throws HibernateException {
    return x.hashCode();
}

@Override
public Object nullSafeGet(ResultSet rs, String[] names, SessionImplementor session, Object owner) throws HibernateException, SQLException {

    XMLType xmlType = null;
    Document doc = null;
    String returnValue = null;
    try {
        //logger.debug("rs type: " + rs.getClass().getName() + ", value: " + rs.getObject(names[0]));
        xmlType = (XMLType) rs.getObject(names[0]);

        if (xmlType != null) {
            returnValue = xmlType.getStringVal();
        }
    } finally {
        if (null != xmlType) {
            xmlType.close();
        }
    }
    return returnValue;
}

@Override
public void nullSafeSet(PreparedStatement st, Object value, int index, SessionImplementor session) throws HibernateException, SQLException {

    if (logger.isTraceEnabled()) {
        logger.trace("  nullSafeSet: " + value + ", ps: " + st + ", index: " + index);
    }
    try {
        XMLType xmlType = null;
        if (value != null) {
            xmlType = XMLType.createXML(getOracleConnection(st.getConnection()), (String)value);
        }
        st.setObject(index, xmlType);
    } catch (Exception e) {
        throw new SQLException("Could not convert String to XML for storage: " + (String)value);
    }
}

@Override
public Object deepCopy(Object value) throws HibernateException {
    if (value == null) {
        return null;
    } else {
        return value;
    }
}

@Override
public boolean isMutable() {
    return false;
}

@Override
public Serializable disassemble(Object value) throws HibernateException {
    try {
        return (Serializable)value;
    } catch (Exception e) {
        throw new HibernateException("Could not disassemble Document to Serializable", e);
    }
}

@Override
public Object assemble(Serializable cached, Object owner) throws HibernateException {

    try {
        return (String)cached;
    } catch (Exception e) {
        throw new HibernateException("Could not assemble String to Document", e);
    }
}

@Override
public Object replace(Object original, Object target, Object owner) throws HibernateException {
    return original;
}

private OracleConnection getOracleConnection(Connection conn) throws SQLException {
    CLOB tempClob = null;
    CallableStatement stmt = null;
    try {
        stmt = conn.prepareCall("{ call DBMS_LOB.CREATETEMPORARY(?, TRUE)}");
        stmt.registerOutParameter(1, java.sql.Types.CLOB);
        stmt.execute();
        tempClob = (CLOB)stmt.getObject(1);
        return tempClob.getConnection();
    } finally {
        if ( stmt != null ) {
            try {
                stmt.close();
            } catch (Throwable e) {}
        }
    }
} 
```

**第 3 步：注释实体中的字段。**

我正在使用带有 spring/hibernate 的注释，而不是映射文件，但我想语法会相似。

```
@Type(type="your.custom.usertype.HibernateXMLType")
@Column(name="attribute_xml", columnDefinition="XDB.XMLTYPE")
private String attributeXml; 
```

**第 4 步：处理 Oracle JAR 导致的 appserver/junit 错误**

在您的类路径中包含 %ORACLE_11G_HOME%/LIB/xmlparserv2.jar (1350kb) 以解决编译错误后，您现在会从应用程序服务器收到运行时错误...

```
http://www.springframework.org/schema/beans/spring-beans-3.1.xsd<Line 43, Column 57>: XML-24509: (Error) Duplicated definition for: 'identifiedType'
http://www.springframework.org/schema/beans/spring-beans-3.1.xsd<Line 61, Column 28>: XML-24509: (Error) Duplicated definition for: 'beans'
http://www.springframework.org/schema/beans/spring-beans-3.1.xsd<Line 168, Column 34>: XML-24509: (Error) Duplicated definition for: 'description'
http://www.springframework.org/schema/beans/spring-beans-3.1.xsd<Line 180, Column 29>: XML-24509: (Error) Duplicated definition for: 'import'
... more ... 
```

*为什么会出现错误？*

xmlparserv2.jar 使用 JAR 服务 API（服务提供者机制）来更改用于 SAXParserFactory、DocumentBuilderFactory 和 TransformerFactory 的默认 javax.xml 类。

*它是怎么发生的？*

javax.xml.parsers.FactoryFinder 在使用JDK (com.sun.org.*) 中包含的默认实现。

在 xmlparserv2.jar 中存在一个 META-INF/services 目录，javax.xml.parsers.FactoryFinder 类会获取该目录。文件如下：

```
META-INF/services/javax.xml.parsers.DocumentBuilderFactory (which defines oracle.xml.jaxp.JXDocumentBuilderFactory as the default)
META-INF/services/javax.xml.parsers.SAXParserFactory (which defines oracle.xml.jaxp.JXSAXParserFactory as the default)
META-INF/services/javax.xml.transform.TransformerFactory (which defines oracle.xml.jaxp.JXSAXTransformerFactory as the default) 
```

*解决方案？*

将所有 3 个切换回来，否则您会看到奇怪的错误。

*   javax.xml.parsers.* 修复可见错误
*   javax.xml.transform.* 修复了更细微的 XML 解析错误
    *   就我而言，使用*apache commons 配置*读取/写入

**解决应用程序服务器启动错误的快速解决方案：JVM Arguments**

要覆盖 xmlparserv2.jar 所做的更改，请将以下 JVM 属性添加到您的应用程序服务器启动参数中。java.xml.parsers.FactoryFinder 逻辑将首先检查环境变量。

```
-Djavax.xml.parsers.SAXParserFactory=com.sun.org.apache.xerces.internal.jaxp.SAXParserFactoryImpl -Djavax.xml.parsers.DocumentBuilderFactory=com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderFactoryImpl -Djavax.xml.transform.TransformerFactory=com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl 
```

但是，如果您使用 @RunWith(SpringJUnit4ClassRunner.class) 或类似方法运行测试用例，您仍然会遇到错误。

**应用程序服务器启动错误和测试用例错误的更好解决方案？2 个选项**

*选项 1：对应用服务器使用 JVM 参数，对测试用例使用 @BeforeClass 语句*

```
System.setProperty("javax.xml.parsers.DocumentBuilderFactory","com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderFactoryImpl");
System.setProperty("javax.xml.parsers.SAXParserFactory","com.sun.org.apache.xerces.internal.jaxp.SAXParserFactoryImpl");
System.setProperty("javax.xml.transform.TransformerFactory","com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl"); 
```

如果你有很多测试用例，这会变得很痛苦。即使你把它放在一个超级。

*选项 2：在项目的编译/运行时类路径中创建自己的服务提供者定义文件，这将覆盖 xmlparserv2.jar 中包含的文件*

在 maven spring 项目中，通过在 %PROJECT_HOME%/src/main/resources 目录中创建以下文件来覆盖 xmlparserv2.jar 设置：

```
%PROJECT_HOME%/src/main/resources/META-INF/services/javax.xml.parsers.DocumentBuilderFactory (which defines com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderFactoryImpl as the default)
%PROJECT_HOME%/src/main/resources/META-INF/services/javax.xml.parsers.SAXParserFactory (which defines com.sun.org.apache.xerces.internal.jaxp.SAXParserFactoryImpl as the default)
%PROJECT_HOME%/src/main/resources/META-INF/services/javax.xml.transform.TransformerFactory (which defines com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl as the default) 
```

这些文件被应用程序服务器引用（不需要 JVM 参数），并且无需任何代码更改即可解决任何单元测试问题。

完毕。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-11-12T13:39:00.090

有一个更简单的解决方案。只需使用 ColumnTransformer 注释。

```
@ColumnTransformer(read = "to_clob(data)", write = "?")
@Column( name = "data", nullable = false, columnDefinition = "XMLType" )
private String data;` 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-07-01T20:09:42.643

为了进一步简化 Celso 的答案，可以避免使用 Oracle 的内置函数创建自定义函数

> XMLType.createxml(?)

可以处理 NULL。

所以下面的注解结合Celso的自定义方言类效果很好。

```
 @Lob
    @ColumnTransformer(read = "NVL2(EVENT_DETAILS, (EVENT_DETAILS).getClobVal(), NULL)", write = "XMLType.createxml(?)")
    @Column(name = "EVENT_DETAILS")
    private String details; 
```

您可能还必须在自定义方言中将 clob 注册为 xmltype。因此，您将有效地拥有以下内容：

```
public class OracleDialectExtension extends org.hibernate.dialect.Oracle10gDialect {
    public OracleDialectExtension() {
        super();
        registerColumnType(Types.CLOB, "xmltype");
    }

    @Override
    public boolean useInputStreamToInsertBlob() {
        return false;
    }
} 
```

确保在您的休眠配置的会话工厂属性列表中设置您的自定义方言：

```
<property name="hibernate.dialect"><!-- class path to custom dialect class --></property> 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-12-17T11:07:44.550

在没有运气尝试了许多不同的方法之后，我想出了这个：

在我的实体类上：

```
@ColumnTransformer(read = "NVL2(EVENT_DETAILS, (EVENT_DETAILS).getClobVal(), NULL)", write = "NULLSAFE_XMLTYPE(?)")
@Lob
@Column(name="EVENT_DETAILS")
private String details; 
```

请注意“EVENT_DETAILS”周围的括号。如果你不放它们，Hibernate 不会通过将表名附加到左侧来重写列名。

您将必须创建 NULLSAFE_XMLTYPE 函数，该函数将允许您插入空值（因为 @ColumnTransformer 上的写入转换限制只有一个问号，并且 XMLType(NULL) 会产生异常）。我创建了这样的函数：

```
create or replace function NULLSAFE_XMLTYPE (TEXT CLOB) return XMLTYPE IS
    XML XMLTYPE := NULL;
begin
    IF TEXT IS NOT NULL THEN
      SELECT XMLType(TEXT) INTO XML FROM DUAL;
    END IF;

    RETURN XML;
end; 
```

在我的 persistence.xml 文件中：

```
<property name="hibernate.dialect" value="mypackage.CustomOracle10gDialect" /> 
```

自定义方言（如果我们不重写“useInputStreamToInsertBlob”方法，我们会得到“ORA-01461：只能绑定 LONG 值以插入 LONG 列”错误）：

```
package mypackage;

import org.hibernate.dialect.Oracle10gDialect;

public class CustomOracle10gDialect extends Oracle10gDialect {

    @Override
    public boolean useInputStreamToInsertBlob() { 
        //This forces the use of CLOB binding when inserting
        return false;
    }
} 
```

这适用于我使用 Hibernate 4.3.6 和 Oracle 11.2.0.1.0（使用 ojdbc6-11.1.0.7.0.jar）。

我不得不承认我没有尝试过 Matt M 的解决方案，因为它涉及大量的黑客攻击和使用不在标准 Maven 存储库中的库。

Kamuffel 的解决方案是我的起点，但是当我尝试插入大 XML 时出现 ORA-01461 错误，这就是我必须创建自己的方言的原因。此外，我发现 TO_CLOB(XML_COLUMN) 方法存在问题（我会收到“ORA-19011：字符串缓冲区太小”错误）。我猜这种方式 XMLTYPE 值首先转换为 VARCHAR2，然后转换为 CLOB，因此在尝试读取大 XML 时会导致问题。这就是为什么经过一些研究后我决定改用 XML_COLUMN.getClobVal() 的原因。

我还没有在互联网上找到这个确切的解决方案。这就是为什么我决定创建一个 StackOverflow 帐户来发布它，以防它对其他人有所帮助。

我正在使用 JAXB 构建 XML 字符串，但我认为在这种情况下它不相关。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-25T14:20:20.347

我从 Hibernate 3.6.* 迁移到 Hibernate 5.4 时遇到了问题，我通过在 Oracle xmlparserv2 之前添加 dbUnit maven 依赖项解决了这个问题。dbUnit 具有 xerces:xercesImpl 作为瞬态依赖项。这样我就不必弄乱 App Server Config 并且单元测试运行得很好。

# jquery - ASP.NET Jquery 检查检查不工作

> ID：11578699
> 
> 赞同：0
> 
> 时间：2012-07-20T11:45:18.327
> 
> 标签：jquery, asp.net

我有一个复选框的 onChange 事件，该事件触发了一个切换某些 TR 可见性的函数。我的问题是此代码仅适用于 Firefox。我希望它适用于 ie8。

```
function toggleVisibility() {

    if ($("#ctl00_PageContent_chkVisibility").is(':checked')) {
        $('#ctl00_PageContent_freight_rate_column_chaair tr').each(function(i, val) { // Loop through rows in grid
            if (i > 9 & i < 28) {
                $('#ctl00_PageContent_freight_rate_column_chaair_r' + i).hide();
            };
        });
    }
    else {
        $('#ctl00_PageContent_freight_rate_column_chaair tr').each(function(i, val) { // Loop through rows in grid
            if (i > 9 & i < 28) {
                $('#ctl00_PageContent_freight_rate_column_chaair_r' + i).show();
            };
        });
    };
}; 
```

有谁知道这样做的更好方法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T12:24:13.020

我会尝试使用“开始于”选择器，而不是尝试将 id 连接到索引号。尝试这样的事情：

```
$('#ctl00_PageContent_chkVisibility').change(function () { 
    toggleVisibility()
});

function toggleVisibility() {
    if ($("#ctl00_PageContent_chkVisibility").is(':checked')) {
        $('#ctl00_PageContent_freight_rate_column_chaair tr').each(function (i, val) { // Loop through rows in grid
            if (i > 9 & i < 28) {
                $('input[id^="ctl00_PageContent_freight_rate_column_chaair_r"]').hide();
            };
        });
    }
    else {
        $('#ctl00_PageContent_freight_rate_column_chaair tr').each(function (i, val) { // Loop through rows in grid
            if (i > 9 & i < 28) {
                $('input[id^="ctl00_PageContent_freight_rate_column_chaair_r"]').show();
            };
        });
    };
}; 
```

您不需要将 id 连接到索引号，因为在循环期间，您只需要检查索引。在该索引处，隐藏函数将隐藏所述索引处的行，因此无需指定要隐藏的行的确切 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T12:33:25.810

我猜你已经在你的 aspx 页面上声明了这样的东西：

```
<asp:CheckBox ID="chkId" runat="server" onchange="toggleVisibility()"/> 
```

这适用于FF，但不适用于IE。

删除复选框元素上的 onchange 属性，并删除函数 toggleVisibility 并尝试使用 jquery 注册您的函数：

```
<script language="javascript">
$(function () {

$('#ctl00_PageContent_chkVisibility').change(function () {             
       // 
       // paste here your existing code , the body of the function toggleVisibility
});
});
</script> 
```

# c# - C# - only text row will be store in database?

> ID：11578700
> 
> 赞同：2
> 
> 时间：2012-07-20T11:45:19.343
> 
> 标签：c#, sql-server, datagridview

When I type in datagridview textbox next row automatically generated.

How to stop that ?

When I clicked on Insert button empty row also store in database that is why I'm asking how to stop automatically row generate ?

I want only text ROW will be store in database, null or empty row does not store in database ??

```
 string StrQuery;
using (SqlConnection conn = new SqlConnection(connection string))
{
using (SqlCommand comm = new SqlCommand())
{
comm.Connection = conn;
conn.Open();
for(int i=0; i< dataGridView1.Rows.Count;i++)
{
StrQuery= @"INSERT INTO std VALUES ('"
+ dataGridView1.Rows[i].Cells["sname"].Value +"', '"
+ dataGridView1.Rows[i].Cells["class"].Value +"')";
comm.CommandText = StrQuery;
comm.ExecuteNonQuery();
}
}
} 
```

![enter image description here](../Images/539e54df4f3495b24feb4e026559d5c8.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T11:52:29.297

将**AllowUserToAddRows**属性设置为 false

但是根据您的代码，您必须检查您的 for 外观并使用类似这样的方法检查单元格的值是否为空

```
 for(int i=0; i< dataGridView1.Rows.Count;i++) 
    { 
if (dataGridView1.Rows[i].Cells["sname"]!=null)
{
    StrQuery= @"INSERT INTO std VALUES ('" 
    + string.IsNullOrWhiteSpace(dataGridView1.Rows[i].Cells["sname"].Value) +"', '" 
    + string.IsNullOrWhiteSpace(dataGridView1.Rows[i].Cells["class"].Value) +"')"; 
    comm.CommandText = StrQuery; 
    comm.ExecuteNonQuery(); 
}
    } 
```

因为如果您停止网格自动添加行，那么您必须手动插入新行。所以最好的事情是你必须让网格添加新闻行。但是在您的代码中检查空值。

# android - 在 AIR 中显示中文、西里尔文和韩文字体

> ID：11578701
> 
> 赞同：0
> 
> 时间：2012-07-20T11:45:28.217
> 
> 标签：android, ios, flash, air, string-table

我在我的游戏中遇到了不同语言的问题。我将我的游戏从 Flash Professional CS5.5 发布到 AIR for Android 和 AIR for iOS。

所有语言都很好，除了中文，韩文，俄文。我需要做什么才能显示它们？

我正在使用嵌入字体（arial），并在 word 中进行了测试，以在 arial 中显示我的文本，完全没有问题。

我在我的 swf 中对此进行了测试：

当我在文本字段中写入中文文本时，文本将正确显示，但是当文本与 string-xml 数据一起动态添加时，文本将无法正确显示（只有括号和数字）。

我希望你能帮助我。

谢谢和问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T16:54:31.877

最后，当我删除所有嵌入字体时，问题就解决了。

此解决方案的主要问题是，所有字体都以“sans”显示，并且您的游戏中没有唯一性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-12T17:06:14.290

为什么不使用操作系统中现有的字体？我以前写过一些可能对你有帮助的东西。我添加了有关 [如何检测系统中文、韩文和英文字体而不分别嵌入一个的详细信息？（Android 和 IOS 上的 AIR 手机）](https://stackoverflow.com/questions/23390203/how-can-i-detect-system-chinese-korean-and-english-fonts-without-embedding-one/23560056#23560056)

# ssms - 如何在表中设置（组合）两个主键

> ID：11578703
> 
> 赞同：10
> 
> 时间：2012-07-20T11:45:35.207
> 
> 标签：ssms, sql-server-express, database, composite-primary-key

对于与销售相关的小型应用程序，我们使用逻辑数据模型设计了数据库。上台转换成实体模型。在 SQL Server Management Studio Express 中创建表时，根据我们的逻辑数据模型，我们需要将两个属性组合起来形成唯一的 id。是否可以组合两个主键并设置它？

但是在观察 Northwind Sample 时，我们发现在`ORDER DETAILS`表格中，我们可以看到两个主键`Order Id`& `Product Id`。并且根据规则表不能有两个主键。那么它是如何在北风发生的呢？

在我的情况下，我应该如何在我的表中设置两列以使其成为两个主键？

有人提出了类似的建议

> *要创建两个主键，请在设计视图中打开表格并单击两个必填字段并按住 CTL，应用主键*

这行得通吗？？

编辑 ;

现在我的桌子在 SSMS 中有 2 个 PK。它是有效的还是只是 2 pks 的组合![在此处输入图像描述](../Images/f37e483612c772d7dcd0d1992ad9abb4.png)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-20T11:52:58.797

最简单的方法是在 SSMS Express 中使用 T-SQL 命令，而不是尝试使用可视化设计器.....

设计并创建表格后，请尝试以下操作：

```
ALTER TABLE dbo.YourTableNameHere
ADD CONSTRAINT PK_YourTableNameHere
PRIMARY KEY(Item_Id, Purchase_Id) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T11:52:23.283

您不能在表中创建两个主键。您可以将表中的两列合并为一个主键

```
create table table1
(
col1 int,
col2 varchar(20),
....
Primary key (col1, col2)
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T11:50:50.090

您不能有 2 个主键，但可以有一个复合主键，它是由两列组成的键，这正是您在 [SalesOrderDetail] 表中使用 [SalesOrderID] 和 [SalesOrderDetailID] 得到的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T11:56:27.863

```
CREATE TABLE [dbo].[tab2](  
    [col1] [int] NOT NULL, 
    [col2] [int] NOT NULL, 
    [col3] [nchar](10) NOT NULL,  
    [col4] [nchar](10) NOT NULL,   
 CONSTRAINT [PK_tab2] PRIMARY KEY CLUSTERED    
(  
    [col1] ASC, 
    [col2] ASC 
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]  
) ON [PRIMARY] 
```

# objective-c - How does (NSURLCredential *) proposedCredential in iOS work?

> ID：11578707
> 
> 赞同：6
> 
> 时间：2012-07-20T11:45:48.983
> 
> 标签：objective-c, ios, https, nsurlconnection, nsurlcredential

Morning

I've been working on creating a iOS application that uses stored credentials in `NSURLCredentialStorage` for a specific protectionspace. I've now gotten to the point where I'm using `proposedCredential` to fetch the stored credentials.

My problem is that it is returning `null`, and I can't seem to find any good explanation on what `proposedCredential` actually does and why it isn't returning what I think it should.

This is what I'm doing:

First I define a `NSURLProtectionSpace`, give credentials and store them in the `NSURLCredentialStorage`. I've already checked that this is being done before I'm referencing `proposedCredential` and that the credentials that I'm passing on are correct.

```
NSURLProtectionSpace *protectionSpaceOne = [[NSURLProtectionSpace alloc] 
                                           initWithHost:xyz 
                                              port: 80 
                                              protocol:NSURLProtectionSpaceHTTP 
                                              realm:nil 
                                              authenticationMethod:NSURLAuthenticationMethodDefault];

  //credential is initiated elsewhere.
[[NSURLCredentialStorage sharedCredentialStorage] setDefaultCredential:credential forProtectionSpace:protectionSpaceOne]; 

-(void)connection:(NSURLConnection *)connection didRecieveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge{
   //Has the authentication failed before?
   if([challenge previousFailureCount]>0){
      //Why?
      NSError *error = [challenge error];
       //Here I respond to the failure count
       [[challenge sender]cancelAuthenticationCallenge:challenge];
   }

   NSURLCredential *proposedCredential = [challenge proposedCredential];

} 
```

Could someone tell me what `proposedCredential` actually does, what it compares together to figure out if there is a credential that it should pass on, and what it is that I'm possibly missing from the code?

For reference, I've been reading the Apple doc, specifically [this](https://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSURLConnectionDelegate_Protocol/Reference/Reference.html), [this](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLAuthenticationChallenge_Class/Reference/Reference.html#//apple_ref/occ/instm/NSURLAuthenticationChallenge/proposedCredential), and [this](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/URLLoadingSystem.html#//apple_ref/doc/uid/10000165i)

All help would be appreciated.

# javascript - 禁用 onclick 功能，以便在 ajax 正在进行时停止调用相同的功能？

> ID：11578709
> 
> 赞同：0
> 
> 时间：2012-07-20T11:46:09.650
> 
> 标签：javascript, jquery

我想禁用 onclick 功能，以便在 ajax 正在进行时停止调用相同的功能。

点击功能：

```
function fnDisplaySubjects(url,cat,divid)
{
    /* DISABLE ONCLICK HERE */
        $.ajax({
            url: url+"/cat/"+cat,
            type: "POST",
            complete: function(){
             /* ENABLE ONCLICK HERE */
        },
            success: function(response){
                $('#'+divid).html(response);        
            }
        });    
    }
} 
```

感谢你的帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T11:49:40.013

尝试：

```
function fnDisplaySubjects(url,cat,divid, obj /* this object */)
{
var $this = $(this);
if ($this.data('called')) {
    return;
}
$this.data('called', true);
        $.ajax({
            url: url+"/cat/"+cat,
            type: "POST",
            complete: function(){
             /* ENABLE ONCLICK HERE */
        },
            success: function(response){
                $('#'+divid).html(response);  
                $this.removeData('called');      
            }
        });    
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T11:52:52.223

您可以传递一个发件人（即按钮或链接）并这样做：

```
$(sender).attr('disabled', true); // to disable
....
$(sender).attr('disabled', false); // to enable 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T12:23:49.433

如果您有一个按钮并且在单击它时调用该函数，您可以执行以下操作：

// 移除点击处理程序（你称之为 /* DISABLE ONCLICK HERE */）

```
$('#button_id').off('click'); 
```

// 设置点击处理程序（你称之为 /* ENABLE ONCLICK HERE */

```
$('#button_id').on('click', fnDisplaySubjects); 
```

# javascript - 使用数据库中的数据加载编辑用户表单

> ID：11578711
> 
> 赞同：1
> 
> 时间：2012-07-20T11:46:13.117
> 
> 标签：javascript, extjs, castle-monorail

我有一个显示成员列表的网格。网格有一个名为 Edit 的操作列，带有一个图标。如果用户单击“编辑”图标，则窗口将重定向到包含“编辑用户”表单的另一个页面。

现在我的商店和网格的代码如下：

```
 var userstore = Ext.create('Ext.data.Store', {
      storeId: 'viewUsersStore',
      model: 'Configs',
      autoLoad: true,
      proxy: {
        type: 'ajax',
        url: '/user/getuserviewdata.castle',
        reader: { type: 'json', root: 'users' },
        listeners: {
        exception: function (proxy, response, operation, eOpts) {
            Ext.MessageBox.alert("Error", "Session has timed-out. Please re-login and 
             try again.");
      }
    }
  }
});

var grid = Ext.create('Ext.grid.Panel', {
    id: 'viewUsersGrid',
    title: 'List of all users',
    store: Ext.data.StoreManager.lookup('viewUsersStore'),
    columns: [
        //{header: 'ID', dataIndex: 'id', hidden: true},
        {header: 'Username', dataIndex: 'username'},
        {header: 'Full Name', dataIndex: 'fullName'},
        {header: 'Company', dataIndex: 'companyName'},
        {header: 'Latest Time Login', dataIndex: 'lastLogin'},
        {header: 'Current Status', dataIndex: 'status'},
        {header: 'Edit', 
         menuDisabled: true, 
         sortable: false, 
         xtype: 'actioncolumn', 
         width: 50, 
         items: [{ 
            icon: '../../../Content/ext/img/icons/fam/user_edit.png', 
            handler: function (grid, rowIndex, colIndex){
                var rec = userstore.getAt(rowIndex); 
                alert("Edit " + rec.get('username')+ "?");  
                EditUser(rec.get('id')); 
                } 
             }] 
        }
    ]

});

function EditUser(id) {

    window.location = "/user/index.castle";

} 
```

当用户点击编辑图标时，函数 EditUser(id) 被调用。在该函数中，window.location 将用户重定向到 Edit User 表单（这就是 url 的含义）。

现在我的问题是：如何将成员数据从数据库加载到编辑用户表单中？

换句话说，如果用户点击编辑图标，他/她应该被重定向到编辑用户表单/窗口，然后应该（自动）从数据库加载成员数据（即用户名、全名等）（每个成员都有一个唯一的 ID）。

我没有使用 php，而是使用 Ext JS 和 Castle Monorail (MVC)。我尝试使用 loadRecord(rec) 并且有效，但问题是网格记录不包含编辑用户表单中出现的所有数据字段，因此需要从数据库而不是记录加载数据。

例如，Edit User 表单有一个名为 Permissions 的复选框组，它在网格中被忽略了。

此外，需要将编辑后的成员数据保存回数据库。

有人对如何解决这个问题有任何提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T19:18:54.603

1.  为什么要用 extjs 制作多页应用程序？而不是单页应用程序？有什么优点？

2.  您需要用户的 ID。那是从网格传递过来的。然后使用 Model.load() 将该用户从数据库加载到模型中。您可以使用 form.loadRecord() 将模型加载到表单中，它会根据表单字段的名称自动填充。

要加载模型并将其加载到表单中，您可以执行以下操作：

```
Model.load(1, {
  callback: function(record){
    form.loadRecord(record); //any matching form names will get loaded into form
  }
}); 
```

三。你应该为表单使用你奇怪的命名“配置”模型。您应该将代理从商店移动到模型。商店将继承其模型代理。

要将代理从商店移动到模型，只需在代码中将其删除，然后将“代理”属性添加到模型。无论是在商店还是模型上，它们都是相同的。

# asp.net - 是否可以在代码中设置 asp.net 控件属性值而不将其添加到视图状态？

> ID：11578713
> 
> 赞同：1
> 
> 时间：2012-07-20T11:46:22.540
> 
> 标签：asp.net

我想在后面的代码中为服务器控件属性分配值以“初始化”表单。我不需要/不希望将这些值添加到视图状态。（我知道我可以禁用特定控件的视图状态，但我需要视图状态，因为某些值可能会更改并且需要在回发期间保留。）

目前对我来说，如果不将它们添加到视图状态中，似乎不可能在代码中加载这些值。

据我了解，会发生以下情况：

页面：预初始化

> 我可以在这里向某些控件添加值（例如，它使用文字控件来设置文本值）但是由于控件的 init 方法稍后执行，因此我无法在此阶段找到 RegisterUser 控件及其子控件，它们是仍然为空。> 所以在这种特定情况下没有解决方案，还有更多情况

控制：初始化

> 我无法从我的页面中达到这一点，这只能在用户控件代码中使用，例如，当您编写自己的用户控件并想要初始化其值时，我当然不想为我需要的每个控件创建自己的控件首先执行一些逻辑进行初始化。

控制：TrackViewState

> 视图状态跟踪已启用，因此从这里开始，我设置的任何内容都将被标记为“脏”并因此添加到视图状态中。页面：初始化页面：TrackViewState

所以我说得对吗：

在后面的代码中，不禁用控件视图状态属性..

*   您可以在 PreIinit 方法中从页面控件初始化“第一级”子控件属性，而无需将值添加到视图状态。
*   如果没有将值添加到视图状态，则无法从作为页面“第一级”子控件的控件初始化子控件属性。?

然后，

*   可以使用资源以声明方式初始化控件属性，但这并不能规避需要执行逻辑的场景
*   您可以使用数据绑定语法执行逻辑，但您必须手动调用具有与上述相同问题的控件上的数据绑定

如果没有将这些值添加到视图状态，是否没有办法迭代一组控件/子控件并在代码中启动值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T09:34:07.727

由于此处没有任何反应和一些进一步的研究，我现在可以得出结论，由于在问题。

然而，这里有一些部分解决方案：[http ://weblogs.asp.net/infinitiesloop/archive/2006/08/03/Truly-Understanding-Viewstate.aspx](http://weblogs.asp.net/infinitiesloop/archive/2006/08/03/Truly-Understanding-Viewstate.aspx)

一种可能性是以声明方式连接到控件本身的 init 事件，您必须为每个控件执行此操作。在后面的代码中，在事件处理程序中，您可以设置属性，并且由于视图状态未跟踪但它不会保存在视图状态中。

对于不同的场景有更多选项，例如通过重写 CreateChildControls 方法来初始化自定义控件内动态添加的子控件。绝对值得一读上面提到的“真正理解 Viewstate”链接。

# unity3d - 如何找出 Unity 插件是否挂起（来自 unityscript）

> ID：11578715
> 
> 赞同：2
> 
> 时间：2012-07-20T11:46:36.487
> 
> 标签：unity3d, unityscript

我页面上的 Unity 播放器有时会挂起。是否可以从 unityscript 中检测到它（轮询方法是可以接受的）并对此做出反应 - 例如重新加载页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T13:04:34.003

一位同事遇到了这个问题，我相信在没有好的结果的扩展研究之后，他想出了这个解决方案：

*   例如，在网页中声明一个全局变量`stillAlive`。
*   用于`setInterval`每秒检查该变量`n`，如下所示：

    `if (stillAlive){ stillAlive = false; }else{ //do things }`

*   每秒在您的应用程序中进行一次[`Application.ExternalEval`](http://docs.unity3d.com/Documentation/ScriptReference/Application.ExternalEval.html)调用`n/2`，类似这样

    `Application.ExternalEval ("stillAlive=true;");`

我不知道确切的细节，但他做了一些事情来同步这些。我相信你可以根据这个想法想出一些东西。

注意：由于某种原因，我无法格式化此答案中的代码，所以如果有人可以修复它，请做。

**更新：**我刚刚问过他，他说他通过启动`setInterval()`with来“同步”它们`Application.ExternalEval()`。

# android - 如何为 ImageButton 组合 OnClickListener 和 OnTouchListener

> ID：11578718
> 
> 赞同：26
> 
> 时间：2012-07-20T11:46:48.267
> 
> 标签：android, onclicklistener, ontouchlistener

`ImageButton`当用户单击我尝试创建一个实现**两者** `OnClickListener`的静态类时，我需要做一些事情`OnTouchListener`

```
static class ClickListenerForScrolling implements OnClickListener, OnTouchListener 
```

具有以下方法：

```
@Override
public void onClick(View v) 
```

和

```
@Override
public boolean onTouch(View arg0, MotionEvent arg1) 
```

这背后的整个想法是`ImageButton`在用户触摸它时更改图像源，并在用户单击此按钮时执行任务。任何人都可以给我一个关于如何做到这一点的提示吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-07-20T12:12:18.220

由于这两个动作都包含“将手指放在屏幕上 - 将手指从屏幕上抬起”的手势，因此您无法确定它是触摸动作还是点击动作。因此，如果您在此图像按钮上实现两个侦听器，则触摸/单击将更改图片并按下按钮。不确定这些事件是否有确定的顺序......

但是，如果您想分离这些事件，您将需要为其中一个动作定义不同的手势（如擦除以更改图片），或者创建处理事件的不同区域，例如图像不适合整个按钮和空闲区域用作按钮单击区域。

高温高压

**更新：**

我发现， a`TouchEvent`比 a 更通用，`ClickEvent`因此首先调用它。

```
public abstract boolean onTouch (View v, MotionEvent event) 
```

如果侦听器已经消费了事件，则返回 true，否则返回 false。所以你可以在你的实现中决定事件是否也应该由 OnClickListener 处理，然后只需 return `false`。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-05T22:14:30.260

`onTouchListener`能够处理这两种运动。

`Switch`之间的`event.action()`值来获得`MotionEvent`。

`case MotionEvent.ACTION_DOWN`: 是第一个手指的影响。
`case MotionEvent.ACTION_UP`: 是手指离开的时候。

您必须将影响点设置在`ACTION_DOWN`.

`TheImpactPoint=event.getX();`

然后用`ACTION_UP`

`float distance =TheImpactPoint-event.getX();`

`If distance = 0`然后有一个点击，否则它会多于或少于零，具体取决于手势。

所以这是在没有真正的点击事件的情况下使用点击事件并且只使用`onTouchListener`.

希望会有用。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-05-26T10:29:27.127

使用此代码：

```
public class GestureHelper implements OnTouchListener {

private final GestureDetector mGestureDetector;

public GestureHelper(Context context) {
    mGestureDetector = new GestureDetector(context, new GestureListener(this));
}

public void onSwipeRight() {
};

public void onSwipeLeft() {
};

public void onSwipeTop() {
};

public void onSwipeBottom() {
};

public void onDoubleTap() {
};

public void onClick() {
};

@Override
public boolean onTouch(View v, MotionEvent event) {
    return mGestureDetector.onTouchEvent(event);
}

private static final class GestureListener extends SimpleOnGestureListener {

    private static final int SWIPE_THRESHOLD = 100;
    private static final int SWIPE_VELOCITY_THRESHOLD = 100;
    private GestureHelper mHelper;

    public GestureListener(GestureHelper helper) {
        mHelper = helper;
    }

    @Override
    public boolean onDown(MotionEvent e) {
        return true;
    }

    @Override
    public boolean onSingleTapUp(MotionEvent e) {
        mHelper.onClick();
        return true;
    }

    @Override
    public boolean onDoubleTap(MotionEvent e) {
        mHelper.onDoubleTap();
        return true;
    }

    @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
        boolean result = false;
        try {
            float diffY = e2.getY() - e1.getY();
            float diffX = e2.getX() - e1.getX();
            if (Math.abs(diffX) > Math.abs(diffY)) {
                if (Math.abs(diffX) > SWIPE_THRESHOLD && Math.abs(velocityX) > SWIPE_VELOCITY_THRESHOLD) {
                    if (diffX > 0) {
                        mHelper.onSwipeRight();
                    } else {
                        mHelper.onSwipeLeft();
                    }
                }
            } else {
                if (Math.abs(diffY) > SWIPE_THRESHOLD && Math.abs(velocityY) > SWIPE_VELOCITY_THRESHOLD) {
                    if (diffY > 0) {
                        mHelper.onSwipeBottom();
                    } else {
                        mHelper.onSwipeTop();
                    }
                }
            }
        } catch (Exception ex) {
            ex.printStackTrace();
        }
        return result;
    }
}

} 
```

扩展这个类并像这样使用......

```
view.setOnTouchListener(new SomeYourGestureHelper(context, someParameters)); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-07-13T09:03:51.740

使用`return false`代替`return true`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-21T01:37:25.803

这个问题有很多解决方案，对我来说最好的一个是完全消除 setOnClickListener 并在 onTouchListener 内部检查动作是否为 ACTION_UP，然后在该内部检查之前的最后一个是否为 ACTION_DOWN：

```
case MotionEvent.ACTION_UP:
    if (lastAction == MotionEvent.ACTION_DOWN) {
        //code for click   
        .
        .
        lastAction = event.getAction();
    } 
```

lastAction 是 int，我在每个 ACTION 结束时更新它

# emacs - elisp中捕获错误情况的最佳方法是什么

> ID：11578723
> 
> 赞同：6
> 
> 时间：2012-07-20T11:47:09.373
> 
> 标签：emacs, elisp

我正在尝试增强 etags-select 功能，以便如果 find-tag 点失败，它将回退到正常的 find-tag 。我试过的代码是：

```
(defun my-etags-find-tag ()
  "Find at point or fall back"
  (interactive)
  (unless (etags-select-find-tag-at-point)
    (etags-select-find-tag)))

(global-set-key (kbd "C-f") 'my-etags-find-tag) 
```

但是，当*点*不在有效标签上时，这会失败。相反，我收到了 etags-select-find-tag-at-point 引发的错误：

```
etags-select-find-tag-at-point: Wrong type argument: char-or-string-p, nil 
```

在这种情况下，我只需要重复*etags-select-find-tag-at-point*完成的测试：

```
(defun my-etags-find-tag ()
  "Find at point or fall back"
  (interactive)
  (if (find-tag-default)
      (etags-select-find-tag-at-point)
    (etags-select-find-tag))) 
```

但这似乎有点多余。是否可以在 elisp 中捕获异常并进行替代处理？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-20T13:49:01.760

试试`ignore-errors`；例如，

```
(unless (ignore-errors (etags-select-find-tag-at-point))
  (etags-select-find-tag)) 
```

通常，`(ignore-errors body)`返回任何`body`返回；当有错误时，它返回`nil`。

另请查看`condition-case`更一般的条件处理。

如果您安装了 Elisp 信息手册，您可以从 `C-h``S``ignore-errors`.

### 编辑：

我没有考虑到函数成功返回 nil 的可能性；所以我们可能需要

```
(unless (ignore-errors (or (etags-select-find-tag-at-point) t))
  (etags-select-find-tag)) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-20T12:12:03.160

在不修改原始源代码的情况下`etags-select.el`，我认为它是更合理的选择，即使它两次调用`find-tag-default`. 您可以通过以下方式对调用中的动态环境进行欺骗，以避免重复调用：

```
(defun my-etags-find-tag ()
  "Find at point or fall back"
  (interactive)
  (let ((ftd (find-tag-default)))
    (flet ((find-tag-default () ftd))
      (if (find-tag-default)
          (etags-select-find-tag-at-point)
        (etags-select-find-tag))))) 
```

**编辑**：好的，根据您的要求，对代码进行解释。首先，请注意这段代码解决了这两个问题：

1.  它不会失败
2.  它比您显示的代码（您说它是多余的代码）更有效。

为什么效率更高？您的冗余代码的问题在于您调用`find-tag-default`它是否是`nil`，如果是，您调用`etags-select-find-tag-at-point`. 此函数再次调用`find-tag-default`以获取默认值。我的代码所做的是`find-tag-default`通过将函数重新定义为您计算的值来缓存 的值。这样`flet`做，所以当`etags-select-find-tag-at-point`调用时`find-tag-default`，计算的值会被返回而不做任何进一步的处理。

# ruby - 如何解析 JSON 好友列表以在 Ruby 中散列？

> ID：11578731
> 
> 赞同：0
> 
> 时间：2012-07-20T11:47:57.030
> 
> 标签：ruby, json, koala

我在一些文件中包含这个 json 部分（来自 FACEBOOK API）：

```
--- !seq:Koala::Facebook::API::GraphCollection - name: pop ool id: "1032225" - name: Rose kak id: "2312010" 
```

在红宝石中我尝试做：

```
jsonFriends = File.open("friends.json" ,"r")

puts JSON.parse(jsonFriends.readline) 
```

但我收到此错误：

```
from /usr/local/Cellar/ruby/1.9.3-p194/lib/ruby/1.9.1/json/common.rb:148:in `parse' from try.rb:22:in `<main>' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T12:48:29.500

那是[YAML](http://YAML.Org/)，而不是[JSON](http://JSON.Org/)。

```
require 'yaml'

friends = YAML.load(File.read('friends.json')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T11:54:22.693

尝试一下

```
require 'json'
result = File.read("friends.json")
puts JSON.parse(result) 
```

# xmpp - 使用 XMPP 实现目标服务

> ID：11578736
> 
> 赞同：1
> 
> 时间：2012-07-20T11:48:09.480
> 
> 标签：xmpp, publish-subscribe

我正在使用 XMPP 来驱动通知系统。基本上，我将拥有一组服务，其中一些将广播给所有用户，而另一些则定向到特定客户端（完整的 JID）。

对于向所有用户广播的服务，PubSub 节点似乎是显而易见的选择，但对于将其消息定位到特定客户端的服务，我不确定要使用的最佳机制。

我是否将这些服务表示为其他客户端用户并为他们创建定制的实现？我看到的问题是如何发现它们？我是否将他们分组到一个聊天室并发现这一点。感觉有点像黑客。我也可以定义我自己的定制服务类型，但是我必须定义我自己的 XML 标记并维护它。

我知道 XMPP 有很多标准扩展，但在这种情况下我看不到任何有用的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:54:29.787

即使在 pubsub 的情况下，发布者（即您的服务）仍然是“用户”，因此这种配置将非常标准。我们只是创建服务帐户来代表那些“用户”。

我不确定您所说的“他们将如何被发现”是什么意思。为什么需要发现服务？您的场景仅给出了向用户发送消息的服务用例。假设服务已经知道要将消息发送给谁，那么您不需要任何其他信息来发送消息。

# android - android OAuthCommunicationException addThis

> ID：11578737
> 
> 赞同：2
> 
> 时间：2012-07-20T11:48:11.210
> 
> 标签：android, sdk, android-4.0-ice-cream-sandwich, addthis

我目前正在使用 addThis 的 android 库，它使我可以轻松地在 twitter、facebook 等上分享东西......但是，当我将 Android Manifest 中的 minSDKVersion 或 targetSDKVersion 更改为 10 或更高时，Twitter 分享不会'不工作。我确实使用 addThis0.0.6 （我不能让 0.0.7 工作......）和 signpost-commonshttp4-1.2.1.1 和 signpost-core-1.2.1.1 （因为我可以读到对 addThis 的支持）。我确实得到了错误：

```
oauth.signpost.exception.OAuthCommunicationException: Communication with the service provider failed: null 
```

但是我将 AddThis.shareItem() 函数调用到与 UI 不同的线程中（在 AsyncTask 中）。

那为什么？

# javascript - 将 FullCalendar 修改为移动版

> ID：11578738
> 
> 赞同：6
> 
> 时间：2012-07-20T11:48:15.163
> 
> 标签：javascript, jquery, fullcalendar

我想根据我的需要对其进行调整，以用事件填充日历并将其月视图修改为类似于 iPhone 上的日历（有事件时着色的大单元格）。

如果我修改`.fc-day-number`css 类，我可能会使日期数字更大。对我来说真正的事情是理解脚本，这样我就可以删除事件栏并将它们添加为日单元格的背景颜色。（控制事件的颜色选项）

如果单击一天，它将在日历下创建一个事件列表，以单击并编辑它们或添加新事件和一堆与数据库交互的其他事物。

如果有人有兴趣，如果他/她能帮我一把，我会很高兴；-)

编辑：

我写道，我想将事件作为背景颜色添加到日子。所以我试图理解来自 arshaw 的代码，以及他如何将事件添加到日历的月份视图中。

在函数的第 4590 行中，`daySegHTML(segs)`他写入了事件 div/html 数据，但没有高度，只有宽度和水平位置。

他在函数的第 4842 行中执行此操作，`daySegSetTops(segs, rowTops)`其中`seg.top`日单元`rowTops[seg.row]`中的顶部是日历 div 中的顶部并且`seg.row`是星期行（0 到 5）。

通过`seg.start.getDay()`by，`daySegHTML()`您可以获得一周中的日单元格。我用它来获取`tr`元素中的类名以添加事件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T17:37:43.737

看看这个。这是一个针对移动设备优化的版本！ [https://github.com/JordanReiter/fullcalendar-mobile](https://github.com/JordanReiter/fullcalendar-mobile)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-10-21T15:25:45.337

我认为您可以在完整日历的最后一个版本（4.3.1）中使用 Views 和 windowsResize 来实现这一点：

```
document.addEventListener('DOMContentLoaded', function() {
    var calendarTest = document.getElementById('calendar')
    /* Create function to initialize the correct view */
    function mobileCheck() {
        if (window.innerWidth >= 768 ) {
            return false;
        } else {
            return true;
        }
    };
    /* Start Full Calendar */
    var calendar = new FullCalendar.Calendar(calendarTest, {
            plugins: [ 'dayGrid' ],
            /* Create new view */
            views: {
                newView: {
                    /* Your responsive view */
                    type: 'dayGridWeek',
                    duration: { days: 5 },
                }
            },
            /* Choose view when initialize */
            defaultView: mobileCheck() ? "newView" : "dayGridWeek",
            /* Check if window resize and add the new view */
            windowResize: function(view) {
                if (window.innerWidth >= 768 ) {
                    calendar.changeView('dayGridWeek');
                    /* More code */
                } else {
                    calendar.changeView('responsiveView');
                    /* More code */
                }
            },
            editable: true,
        });
        calendar.render();
    });
}); 
```

# php - 在其他表中查找不匹配的mysql条目

> ID：11578740
> 
> 赞同：0
> 
> 时间：2012-07-20T11:48:35.937
> 
> 标签：php, mysql, join

我在mysql中有两个表，结构如下：

```
Events: id
Events_artists: event_id, more columns 
```

我想在 events_artists 表中找到与 events 中的 id 不匹配的 event_ids。

到目前为止，我唯一想到的是：

```
SELECT * FROM events,events_artists WHERE events_artists.event_id!=events.id 
```

但是，这是废话，基本上会返回整个表。

有谁知道如何解决这个问题？

谢谢！

查尔斯

找到解决方案，感谢 Andrzej Bobak

select * from events_artists where event_id not in（从事件中选择id）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T11:53:03.440

这种方法怎么样？

```
select * from events_artists where event_id is null or event_id not in (select id from events) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T11:50:57.970

```
select * from events_artists a
left join events b on a.id = b.id
where b.id is null 
```

您的方法使用笛卡尔积将每一行彼此连接起来。因此，您的`where`条件只是过滤包含不匹配行的结果，但由于笛卡尔积，这将是很多

# c# - 检测列表中的更改并将其更新为 sql

> ID：11578741
> 
> 赞同：1
> 
> 时间：2012-07-20T11:48:38.030
> 
> 标签：c#, web-services, list

我有一个缓存 SQL 表结果的函数。

```
private List<RMSResponse> FetchData()
{
    conn.Open();
    using (SqlCommand selectCommand = new SqlCommand("select * from RMSResponse", conn))
    {
            selectCommand.CommandType = CommandType.Text;
            SqlDataReader rdr = selectCommand.ExecuteReader();

            while (rdr.Read())
            {
                GlobalData.Add(new RMSResponse { RecruitID = Int32.Parse(rdr["CandidateID"].ToString()), TimeStamp = rdr.GetDateTime(4), Type = ConvertBool(rdr.GetBoolean(2)) });
            }
            rdr.Close();
            return GlobalData;
    }
} 
```

我有另一个从 Web 服务获得的列表。它只包含`RecruitID`和`Timestamp`。

```
NegativeResponseList = rms.NegativeResponse.Where(d => d.RLMSTimeStamp != null && d.RLMSTimeStamp > new DateTime(2012, 02, 22)).ToList(); 
```

RecruitID 可以从 中删除 `NegativeResponseList`并放入 `PositiveNegativeResponseList`. 当然，我不知道这一点，我是从网络服务中获取数据的。

由于 globaldata 包含类型（可能是负数或正数）。如何更新 SQL 中的表？

我正在这样做，但它没有成功并且效率很低。

```
 foreach (var Response in GlobalData)
        {
            foreach (var NegativeResponse in NegativeResponseList)
            {
                if (Response.RecruitID == NegativeResponse.RLMSRecruitId)
                { 
```

# java - Java中REST服务如何实现个人在线状态功能？

> ID：11578743
> 
> 赞同：1
> 
> 时间：2012-07-20T11:48:53.177
> 
> 标签：java, rest, jakarta-ee, cordova

我正在努力解决如何通过 phonegap 项目呈现一个人的在线状态的问题。我在后台有一个 REST 服务来指示和决定用户状态是在线还是离线，但我不知道我这样做是否正确，所以有没有人有更好的想法/第三方/框架来实现这个功能？

我的总体思路如下：

1.  服务器端有一个在线池，负责存储注册在线状态的人。在线池将存储用户信息和用户上次请求时间。
2.  在客户端，在线用户客户端每 3 分钟发送一次在线请求，以更改最后一次请求时间以将其保留在在线池中。而在服务器端，服务器每5分钟运行一次，检查是否有用户请求时间过期，如果请求时间过期，用户将被从在线池中删除，并将在线状态设置为离线。

# mysql - Mysql根据一行相关的日期范围选择多行

> ID：11578745
> 
> 赞同：1
> 
> 时间：2012-07-20T11:48:59.543
> 
> 标签：mysql

SQL结构

```
id, startdate, enddate  
1, 2012-01-01, 2012-10-01 
```

我需要 sql 语句来接收从 startdate 到 enddate 范围的重复行。

示例结果将是：

```
1, 2012-01-01
1, 2012-02-01
1, 2012-03-01
...
1, 2012-10-01 
```

有谁知道如何解决这个问题？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T11:59:49.847

它应该是这样的：

```
SELECT
  id, startdate, enddate
FROM
  myTable
WHERE
  (startdate, enddate) IN 
  (
    SELECT
      startdate, enddate
    FROM
       myTable
    GROUP BY
      startdate, enddate
    HAVING
      COUNT(*) > 1     
  ) 
```

# android - 如何在android中捕获移除SIM卡的事件？

> ID：11578746
> 
> 赞同：3
> 
> 时间：2012-07-20T11:49:02.527
> 
> 标签：android, sim-card

在android中，如何捕获SIM卡移除事件？通常在像HTC 1x这样的手机上，我们可以在不取出电池的情况下取出SIM卡，并且没有通知关机或重启手机。我想捕捉 SIM 卡被移除的事件，这样我就可以弹出一些消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T11:57:38.867

`TelephonyManager`检查答案一，您可以通过使用类检查设备中的sim卡是否可用。

[如何检查 SIM 卡在安卓设备中是否可用？](https://stackoverflow.com/questions/3981007/to-check-sim-card-is-available-in-android-device)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T12:01:38.853

根据[this answer](https://stackoverflow.com/a/10553473)，当SIM卡发生变化时，系统会在SIM卡发生变化时发出`android.intent.action.SIM_STATE_CHANGED`意图，例如在进入或离开飞行模式时，并且可能也在移除或插入SIM卡时。
*应该注意的是，由于这是一个未记录的 API，可能会在没有通知的情况下更改，并且它也可能在某些设备上不可用。*

至于关机或重启，根据[这个答案](https://stackoverflow.com/a/2190184)，系统会发出一个[`android.intent.action.ACTION_SHUTDOWN`](http://developer.android.com/intl/de/reference/android/content/Intent.html#ACTION_SHUTDOWN)intent（Android 1.6或更高版本）。

# c - 计算硬盘大小

> ID：11578747
> 
> 赞同：1
> 
> 时间：2012-07-20T11:49:06.427
> 
> 标签：c, linux

我编写了一个代码来计算硬盘大小，但由于某种原因，它总是给出小于实际大小的大小。

例如，80GB 将显示为 74GB，160GB 将显示为 149GB。问题在哪里？

```
#include <stdio.h>
#include <stdlib.h>
#include <fcntl.h>
#include <sys/stat.h>
#include <linux/fs.h>

int main()
{

        long bytes = 0;
        int fd = open("/dev/sdb1", O_RDONLY);
        const unsigned long long a = (1024ULL* 1024ULL * 1024ULL);

        int retval = ioctl(fd, BLKGETSIZE64, &bytes);
        int hdSize = bytes / a;

        printf(" Harddisk = %lld \n",hdSize);

        return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-20T11:50:50.507

只是[不同的技嘉定义](http://en.wikipedia.org/wiki/Gigabyte#Examples_of_gigabyte-sized_storage)。您使用 1 GB = 2 ^(30)字节，许多硬盘供应商使用 10 ⁹字节。

例如，使用后一种定义的制造商提供的“80 GB”磁盘将容纳 80,000,000,000 字节，即 78,125,000 KB、76,294 MB 或（如您所验证的）74.51 GB，其中我所有的单元都使用二次幂定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T14:06:10.507

除了千兆字节和千兆字节之间的区别外，还需要注意分区的格式。

所有元数据和目录结构（以及日志文件...）都会占用一些可用空间。

另一个原因可能是隐藏的救援/恢复分区，它从硬盘驱动器的末端挤压 5-10 GB。

# java - Apache POI excel 单元格样式更新

> ID：11578748
> 
> 赞同：3
> 
> 时间：2012-07-20T11:49:07.487
> 
> 标签：java, apache-poi

使用 Apache Poi 我将我的表格导出到 Excel 表。我扩展了 ExcelExport 类，覆盖了 getCellStyle 方法并自定义了我的单元格样式。

现在我想要的是当用户编辑 excel 文档中的任何单元格时，我希望该单元格更改其颜色，以便以后查看文档的任何人都可以轻松查看已更改的内容。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T11:54:32.550

一种解决方案是使用 Apache POI 的[HSSFSheetConditionalFormatting](http://poi.apache.org/apidocs/org/apache/poi/hssf/usermodel/HSSFSheetConditionalFormatting.html)向单元格添加[条件格式](http://office.microsoft.com/en-us/excel-help/creating-conditional-formatting-formulas-HA001111661.aspx)。

例如，如果您的程序写入的单元格值为 5，那么如果值不等于 5，则您的条件格式可以将单元格背景设置为黄色

# java - 服务器重新启动后 Hazelcast/CONCURRENT_MAP_LOCK 出现问题

> ID：11578755
> 
> 赞同：1
> 
> 时间：2012-07-20T11:49:28.017
> 
> 标签：java, tomcat, distributed-caching, hazelcast

我们正在使用 Hazelcat 1.9.4.4 和 6 个 Tomcat 服务器的集群。我们重启了我们的集群，ant这里是日志的一个片段：

```
14-Jul-2012 03:25:41 com.hazelcast.nio.InSelector
INFO: /10.152.41.105:5701 [cem-prod] 5701 accepted socket connection from /10.153.26.16:54604
14-Jul-2012 03:25:47 com.hazelcast.cluster.ClusterManager
INFO: /10.152.41.105:5701 [cem-prod]

Members [6] {
        Member [10.152.41.101:5701]
        Member [10.164.101.143:5701]
        Member [10.152.41.103:5701]
        Member [10.152.41.105:5701] this
        Member [10.153.26.15:5701]
        Member [10.153.26.16:5701]
} 
```

我们可以看到 10.153.26.16 连接到集群，但是在它后面的日志中有：

```
14-Jul-2012 03:28:50 com.hazelcast.impl.ConcurrentMapManager
INFO: /10.152.41.105:5701 [cem-prod] ======= 47: CONCURRENT_MAP_LOCK ========
        thisAddress= Address[10.152.41.105:5701], target= Address[10.153.26.16:5701]
        targetMember= Member [10.153.26.16:5701], targetConn=Connection [/10.153.26.16:54604 -> Address[10.153.26.16:5701]] live=true, client=false, type=MEMBER, targetBlock=Block [2] owner=Address[10.153.26.16:5701] migrationAddress=null
        cemClientNotificationsLock Re-doing [20] times! c:__hz_Locks : null
14-Jul-2012 03:28:55 com.hazelcast.impl.ConcurrentMapManager
INFO: /10.152.41.105:5701 [cem-prod] ======= 57: CONCURRENT_MAP_LOCK ========
        thisAddress= Address[10.152.41.105:5701], target= Address[10.153.26.16:5701]
        targetMember= Member [10.153.26.16:5701], targetConn=Connection [/10.153.26.16:54604 -> Address[10.153.26.16:5701]] live=true, client=false, type=MEMBER, targetBlock=Block [2] owner=Address[10.153.26.16:5701] migrationAddress=null
        cemClientNotificationsLock Re-doing [30] times! c:__hz_Locks : null 
```

在几次重新启动服务器（一起，停止所有并一个接一个启动等）之后，我们能够运行系统。您能否解释一下，如果 Hazelcast 在集群中，为什么节点无法锁定地图，或者如果该节点不在集群中，为什么它显示为成员？还有任何建议如何使用分布式 Hazelcast 结构重新启动 Tomcat 集群（停止所有节点并一起启动，一个接一个停止和启动，在服务器重新启动之前以某种方式停止 Hazelcast 等？）？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T12:59:20.470

> 您能否解释一下，如果 Hazelcast 在集群中，为什么无法在节点上锁定地图

地图目前可以被其他节点锁定。

自 1.9.4.4 以来也有很多修复和更改，它是相当旧的版本。您应该尝试 2.1+。

# python - matplotlib - 控制线条集合/大量线条的capstyle

> ID：11578760
> 
> 赞同：9
> 
> 时间：2012-07-20T11:49:33.910
> 
> 标签：python, matplotlib, lines

[与我之前的问题](https://stackoverflow.com/questions/11312579/networkx-draw-networkx-edges-capstyle)类似，我想控制使用 matplotlib 绘制的线条的 capstyle。但是，我的线条数量非常多，使用线条集合以外的任何东西进行绘制都需要很长时间。是否有任何解决方法可以以通用方式控制线条集合中线条的 capstyle（或者，绘制大量`Line2D`线条的超快速方法）。例如，我尝试通过以下方式使用 matplotlib rc 设置：

```
import matplotlib as mpl
mpl.rcParams['lines.solid_capstyle'] = 'round'
mpl.rcParams['lines.solid_joinstyle'] = 'round' 
```

但这似乎没有任何影响。从文档字符串中`collections.py`：

> 这些类并不像它们的单元素对应物那样灵活（例如，您可能无法选择所有线条样式），但它们对于常见用例（例如大量实线段）来说是快速的

这就解释了*为什么*我似乎无法控制各种参数，但我仍然想这样做！我已经查看了 AGG 后端的代码（`_backend_agg.cpp`: 并不是我真正理解它），并且似乎 line_cap 和 line_join 由`gc.cap`and控制`gc.join`，其中 gc 来自`GCAgg`类。有谁知道如何从 Python 控制它？我在这里问正确的问题吗？也许这是控制这些参数的更简单方法？

非常感谢任何帮助......我迫切希望得到这个工作，所以即使是疯狂的黑客也是受欢迎的！

谢谢，

卡森

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-05-14T09:58:06.693

由于您在问题中提到您不介意“肮脏”的解决方案，因此一种选择如下。

特定的“绘图过程”由类中定义`LineCollection`的方法（的基础）处理。此方法通过语句创建(defined in ) 的实例。似乎正是这个对象控制了控制(property ) 的属性。因此，可以子类化、覆盖属性并将新方法注入到类中，以便后续调用返回自定义实例：`draw``Collection``LineCollection``GraphicsContextBase``backend_bases.py``gc = renderer.new_gc()``capstyle``_capstyle``GraphicsContextBase``_capstyle``new_gc``RendererBase``new_gc`

从@florisvb的答案中借用示例（假设Python3）：

```
#!/usr/bin/env python
import types

import numpy as np
from matplotlib.backend_bases import GraphicsContextBase, RendererBase
import matplotlib.pyplot as plt
from matplotlib.collections import LineCollection

class GC(GraphicsContextBase):
    def __init__(self):
        super().__init__()
        self._capstyle = 'round'

def custom_new_gc(self):
    return GC()

RendererBase.new_gc = types.MethodType(custom_new_gc, RendererBase)
#----------------------------------------------------------------------
np.random.seed(42)

x = np.random.random(10)
y = np.random.random(10)

points = np.array([x, y]).T.reshape((-1, 1, 2))
segments = np.concatenate([points[:-1], points[1:]], axis=1)

fig = plt.figure()
ax = fig.add_subplot(111)

linewidth = 10
lc = LineCollection(segments, linewidths=linewidth)
ax.add_collection(lc)

fig.savefig('fig.png') 
```

这会产生： [![在此处输入图像描述](../Images/146f3b31c16ad9005993381f0775304c.png)](https://i.stack.imgur.com/aXTn5.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-06-17T16:47:35.773

更新来自@ewcz 的答案，因为该线程仍然出现在搜索结果中。
现在可以使用`path_effects`而不是定义自己的 GraphicsContextBase。

例如

```
import numpy as np
import matplotlib.patheffects as path_effects
from matplotlib.collections import LineCollection

np.random.seed(42)

x = np.random.random(10)
y = np.random.random(10)

points = np.array([x, y]).T.reshape((-1, 1, 2))
segments = np.concatenate([points[:-1], points[1:]], axis=1)

fig = plt.figure()
ax = fig.add_subplot(111)

linewidth = 10

### Stroke redraws the segment passing kwargs down to the GC renderer
lc = LineCollection(segments, linewidths=linewidth, 
    path_effects=[path_effects.Stroke(capstyle="round")])

ax.add_collection(lc)

fig.show() 
```

[带有平滑线条的示例 png 输出，](https://i.stack.imgur.com/TKLs2.png) 它似乎也适用于 pdf 输出

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-29T20:03:24.073

我在同样的问题上苦苦挣扎。我最终在我的线条集合上绘制了一个散点图。它并不完美，但它可能适用于您的应用程序。有一些细微之处 - 下面是一个工作示例。

```
import numpy as np
import matplotlib.pyplot as plt
from matplotlib.collections import LineCollection

x = np.random.random(10)
y = np.random.random(10)
z = np.arange(0,10)

points = np.array([x, y]).T.reshape(-1, 1, 2)
segments = np.concatenate([points[:-1], points[1:]], axis=1)

fig = plt.figure()
ax = fig.add_subplot(111)

linewidth = 10
cmap = plt.get_cmap('jet')
norm = plt.Normalize(np.min(z), np.max(z))
color = cmap(norm(z))

lc = LineCollection(segments, linewidths=linewidth, cmap=cmap, norm=norm)
lc.set_array(z)
lc.set_zorder(z.tolist())
ax.add_collection(lc)

ax.scatter(x,y,color=color,s=linewidth**2,edgecolor='none', zorder=(z+2).tolist()) 
```

# java - 如何通过 Selenium WebDriver 使用 Java 按 Ctrl+A 选择页面中的所有内容

> ID：11578768
> 
> 赞同：22
> 
> 时间：2012-07-20T11:50:04.147
> 
> 标签：java, selenium-webdriver, virtual-keyboard, selectall

我想通过使用带有 Java 的 WebDriver 从键盘上按`Ctrl`+来选择所有内容。`a`我写了以下代码：

```
Actions actionObj = new Actions(driver);
actionObj.keyDown(Keys.CONTROL)
         .sendKeys(Keys.chord("A"))
         .keyUp(Keys.CONTROL)
         .perform(); 
```

不幸的是，它没有用。我的 WebDriver Java 代码有什么问题？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-07-02T14:55:00.770

要选择整个页面：

```
driver.findElement(By.xpath("//body")).sendKeys(Keys.chord(Keys.CONTROL, "a")); 
```

cssSelector 比`xpath`. 所以它也可以通过使用 CSSPath 来完成。下面是方法：

```
driver.findElement(By.cssSelector("body")).sendKeys(Keys.chord(Keys.CONTROL, "a")); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-07-20T13:24:43.340

尝试和弦`Ctrl`+`A`键。下面的代码适用于我的情况：

```
element.sendKeys(Keys.chord(Keys.CONTROL, "a")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-06-14T22:24:35.513

Mac 用户应该使用 Cmnd 而不是 Control：

```
element.sendKeys(Keys.chord(Keys.COMMAND, "a")); 
```

# bash - 文件操作循环

> ID：11578772
> 
> 赞同：2
> 
> 时间：2012-07-20T11:50:11.820
> 
> 标签：bash, unix, loops, awk

好的，这个问题有两个方面：1）实际的文件操作位 2）在 unix 中循环这个操作

**第1部分）**

我有两个文件：

文件_1

```
a b
c d
e f
g h 
```

和 File_2

```
A B
C D
E F
G H
I J 
```

我想（首先）得到以下结果：

```
a b
A B
>
c d
A B
>
e f
A B
>
g h
A B 
```

...并将此输出保存到 outfile1。

我收集我将不得不使用诸如*awk*、*cut*和/或*paste*之类的东西，但我无法将它们放在一起。

**第2部分）**

然后我想对 File_2 中的所有行循环这个操作（注意 File_1 中的行数与 File_2 中的不同），这样我最终得到 5 个输出文件，其中 outfile2 将是：

```
a b
C D
>
c d
C D
>
e f
C D
>
g h
C D 
```

和 outfile3 将是：

```
a b
E F
>
c d
E F
>
e f
E F
>
g h
E F 
```

等等

目前我正在使用 bash。预先感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T14:07:26.700

这可以通过`bash`重定向来完成：

```
i=1

while read f2; do
  while read f1; do
    echo "$f1"
    echo "$f2"
    echo ">"
  done < File_1 | head -n -1 > output$i
  (( i++ ))
done < File_2 
```

`head -n -1``output$i`避免在每个文件的末尾有一个单独的分隔符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T11:55:59.267

```
sort -m -f file1 file2 | uniq -i --all-repeated=separate 
```

看着挺近的。但是，在第二次阅读时，我认为您想要更像这个 perl 脚本的东西：

```
use strict;
use warnings;

open(my $FILE1, '<file1') or die;

my $output = 0;

while (my $a = <$FILE1>)
{
    $output++;
    open(my $OUT, ">output$output");
    open(my $FILE2, '<file2') or die;

    print $OUT "$a$_---\n" foreach (<$FILE2>);

    close $FILE2;
    close $OUT;
}

close $FILE1; 
```

这将创建输出文件`output1`, `output12`, `output3`, `output...`, 与 file1 中的行数一样多

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T12:20:45.813

制作 outfile_3(with EF) 例如：

```
x=$(sed -n '3p' File_2)
awk "{ printf \"%s\\n%s\\n>\\n\", \$0, \"$x\" }" File_1 > outfile_3 
```

在第一行`'3p'`削减第三行
现在让我们循环执行：

```
(( i = 1 ))
while read line
do
  awk "{ printf \"%s\\n%s\\n>\\n\", \$0, \"$line\" }" File_1 > "outfile_$i"
  (( i++ ))
done < File_2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T12:58:26.497

一个 awk 一班轮：

```
 awk 'NR==FNR{a[NR]=$0;l=NR;next;} {b[FNR]=$0;}
    END{f=1; for(x=1;x<=FNR;x++){for(i=1;i<=length(a);i++){
printf "%s\n%s\n%s\n", a[i],b[x],">" > "output"f }f++;}}' f1 f2 
```

测试：

```
kent$  head f1 f2
==> f1 <==
a b
c d
e f
g h

==> f2 <==
A B
C D
E F
G H
I J

kent$  awk 'NR==FNR{a[NR]=$0;l=NR;next;} {b[FNR]=$0;}
END{f=1; for(x=1;x<=FNR;x++){for(i=1;i<=length(a);i++){printf "%s\n%s\n%s\n", a[i],b[x],">" > "output"f }f++;}}' f1 f2

kent$  head -30 out*
==> output1 <==
a b
A B
>
c d
A B
>
e f
A B
>
g h
A B
>

==> output2 <==
a b
C D
>
c d
C D
>
e f
C D
>
g h
C D
>

==> output3 <==
a b
E F
>
c d
E F
>
e f
E F
>
g h
E F
>

==> output4 <==
a b
G H
>
c d
G H
>
e f
G H
>
g h
G H
>

==> output5 <==
a b
I J
>
c d
I J
>
e f
I J
>
g h
I J
> 
```

# jquery - 带有 jquery 的跨域 ajax

> ID：11578775
> 
> 赞同：0
> 
> 时间：2012-07-20T11:50:23.830
> 
> 标签：jquery, ajax, cross-domain

我想在`subdomain`使用 jquery`ajax()`方法时调用 AJAX：我从[http://domain.com/调用它](http://domain.com/)

```
$.ajax({
    crossDomain: true,
    url:'https://sub.domain.com/',
    success: function(response) {
        alert('ok');
    },
    error: function(resp) {
        console.log(resp);
    }
}); 
```

但它不起作用，调用错误函数`resp == { status:0, readyState: 0, responseText : '', statusText: 'error' }`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T12:01:40.483

子域 ajax 调用也是跨域的。如果它们指向同一个地方（例如 example.com 和 www.example.com），情况也是如此。它们（通常）指向同一个地方。我们将它们视为同一事物。但是对于 Ajax 调用，它被认为是跨域的。

请在跨域 ajax 上进行搜索，您会发现很多事情要做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T10:18:27.163

为此，您可以使用 CORS。

示例代码：

```
jQuery.support.cors = true; 

function CrosDom_ajax(url) {
        if (window.XDomainRequest
        && $.browser.msie
        && $.browser.version < 10) {
        xdr = new XDomainRequest();
        if (xdr) {
            xdr.onload = function () {
               alert(xdr.responseText);

            };
            xdr.open("get", url);
            xdr.send();
        }
        }
        else {
            $.ajax({
                url: url,
                success: function (response) {

                },
                error: function (data) {
                }
            });
         }
    } 
```

您还需要在服务器端编写以下代码，以允许跨域访问

```
Response.AppendHeader("Access-Control-Allow-Origin", "*"); 
```

# ios - uiview touch move 获取uiview上的锚点

> ID：11578776
> 
> 赞同：2
> 
> 时间：2012-07-20T11:50:37.190
> 
> 标签：ios

我有一个视图，当我单击它时，它会左右移动。我只得到视图的点中心。我怎样才能在锚点上获得 uiview，因为无论我点击哪个视图，它都会移动。

这是我的代码：

```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event 

{
    NSLog(@"touchesMoved called"); 

    UITouch *touch = [[event allTouches] anyObject];

    CGPoint touchpoint=[touch locationInView:self.view];  

    if ([touch view]==secondView)
    {
      secondView.center=touchpoint;
      [self animateFirstPoint:[touch view]];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T10:47:28.243

如果我猜对了，您正在寻找 UIView 的锚点。

首先导入 QuartzCore：

```
#import <QuartzCore/QuartzCore.h> 
```

现在您可以使用视图的锚点：

```
secondView.layer.anchorPoint = touchpoint; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T16:43:17.877

请记住，您必须指定锚点，如 CGPointMake(x,y)，其中 x 和 y 大于或等于 0 或小于或等于 1；例如：

```
CGPoint selectionAnchorPoint = CGPointMake(0.15, 0.2); 
```

# clearcase - 如何隐藏配置规范中未提及的文件夹？

> ID：11578777
> 
> 赞同：3
> 
> 时间：2012-07-20T11:50:39.197
> 
> 标签：clearcase, config-spec

我们试图在我们的动态视图中只有几个文件夹。

为此，我们编写了 clearcase 配置规范，如下所示。

```
element * CHECKEDOUT
element /Process/Projects/OurProject\... /main/LATEST
element "/Process/Projects/OurProject 100/..." /main/LATEST
element * /main/LATEST 
```

但它也显示所有其他文件夹，唯一的问题是我们无法打开这些文件夹。是否可以隐藏配置规范中未提及的所有其他文件夹（我知道在快照视图中我们可以通过添加加载规则来做到这一点，但我们希望它在动态视图中完成）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T12:12:53.187

添加

```
element /Process/Projects/* -none 
```

您必须在选择所需目录的规则*之后添加该规则：*

```
element * CHECKEDOUT
element /Process/Projects/OurProject\... /main/LATEST
element "/Process/Projects/OurProject 100/..." /main/LATEST
element /Process/Projects/* -none
element * /main/LATEST 
```

注意' `*`'：项目中的所有元素都将被忽略，但项目本身必须由选择规则选择。

如果您使用：

```
element /Process/Projects/... -none 
```

您不会在 中看到*任何内容*`Project`，因为`Project`它本身会被忽略，使其内容不可见（并且不符合配置规范的其他选择规则）。

# java - HTTP POST 请求 XML 创建

> ID：11578793
> 
> 赞同：0
> 
> 时间：2012-07-20T11:51:54.690
> 
> 标签：java, android, xml, http-post

我想在 Android 活动中发出 HTTP POST 请求。我（认为我）知道该怎么做，但我的问题是我不知道如何创建 XML 文件。我尝试了以前帖子中描述的不同方法，但我没有设法这样做。

我的xml格式如下：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>    
<IAM version="1.0">
    <ServiceRequest>
        <RequestTimestamp>2012-07-20T11:10:12Z</RequestTimestamp
        <RequestorRef>username</RequestorRef>
        <StopMonitoringRequest version="1.0">
            <RequestTimestamp>2012-07-20T11:10:12Z</RequestTimestamp>
            <MessageIdentifier>12345</MessageIdentifier>
            <MonitoringRef>112345</MonitoringRef>
        </StopMonitoringRequest>
    </ServiceRequest>
</IAM> 
```

我编写了以下 Java 代码行：

```
DefaultHttpClient httpClient = new DefaultHttpClient();
HttpPost httpPost = new HttpPost(url);

//What to write here to add the above XML lines?

HttpResponse httpResponse = httpClient.execute(httpPost);
HttpEntity httpEntity = httpResponse.getEntity();
xml = EntityUtils.toString(httpEntity); 
```

**编辑**

尽管我设法使用以下几行以某种方式创建了 xml，但我得到的结果是不正确的。

```
StringBuilder sb = new StringBuilder();
sb.append("<?xml version='1.0' encoding='UTF-8' standalone='yes'?>");
sb.append("<IAM version'1.0'>");
sb.append("<ServiceRequest>");
sb.append("<RequestTimestamp>2012-07-20T12:33:00Z</RequestTimestamp");
sb.append("<RequestorRef>username</RequestorRef>");
sb.append("<StopMonitoringRequest version='1.0'>");
sb.append("<RequestTimestamp>2012-07-20T12:33:00Z</RequestTimestamp>");
sb.append("<MessageIdentifier>12345</MessageIdentifier>");
sb.append("<MonitoringRef>32900109</MonitoringRef>");
sb.append("</StopMonitoringRequest>");
sb.append("</ServiceRequest>");
sb.append("</IAM>");
String xmlContentTosend = sb.toString();

StringEntity entity = new StringEntity(xmlContentTosend, "UTF-8");
httpPost.setEntity(entity);
httpPost.addHeader(BasicScheme.authenticate(new UsernamePasswordCredentials("username", "password"), "UTF-8", false));

HttpResponse httpResponse = httpClient.execute(httpPost);
HttpEntity httpEntity = httpResponse.getEntity();
xml = EntityUtils.toString(httpEntity); 
```

我得到一个字符串文件（xml），它不是我应该得到的全部答案。如果我使用 Firefox 的 HTTP 资源测试，我会得到正确的答案，而使用我的解决方案，我会得到部分答案。当我删除

```
<IAM version="1.0"> 
```

行或其他一些行（通常在“破坏” xml 的结构时）。不过不知道有没有关系。

**编辑（找到解决方案）** 你能发现它吗？xml 结构中的第一个 RequestTimestamp 缺少一个“>”。我一直在复制粘贴一整天，所以我没有提到它。噗……

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T12:57:25.780

你可以使用 Dom 解析器来做到这一点

这是一些代码

```
public class WriteXMLFile {

    public static void main(String argv[]) {

      try {

        DocumentBuilderFactory docFactory = DocumentBuilderFactory.newInstance();
        DocumentBuilder docBuilder = docFactory.newDocumentBuilder();

        // root elements
        Document doc = docBuilder.newDocument();
        Element rootElement = doc.createElement("company");
        doc.appendChild(rootElement);

        // staff elements
        Element staff = doc.createElement("Staff");
        rootElement.appendChild(staff);

        // set attribute to staff element
        Attr attr = doc.createAttribute("id");
        attr.setValue("1");
        staff.setAttributeNode(attr);

        // shorten way
        // staff.setAttribute("id", "1");

        // firstname elements
        Element firstname = doc.createElement("firstname");
        firstname.appendChild(doc.createTextNode("yong"));
        staff.appendChild(firstname);

        // lastname elements
        Element lastname = doc.createElement("lastname");
        lastname.appendChild(doc.createTextNode("mook kim"));
        staff.appendChild(lastname);

        // nickname elements
        Element nickname = doc.createElement("nickname");
        nickname.appendChild(doc.createTextNode("mkyong"));
        staff.appendChild(nickname);

        // salary elements
        Element salary = doc.createElement("salary");
        salary.appendChild(doc.createTextNode("100000"));
        staff.appendChild(salary);

        // write the content into xml file
        TransformerFactory transformerFactory = TransformerFactory.newInstance();
        Transformer transformer = transformerFactory.newTransformer();
        DOMSource source = new DOMSource(doc);
        StreamResult result = new StreamResult(new File("C:\\file.xml"));

        // Output to console for testing
        // StreamResult result = new StreamResult(System.out);

        transformer.transform(source, result);

        System.out.println("File saved!");

      } catch (ParserConfigurationException pce) {
        pce.printStackTrace();
      } catch (TransformerException tfe) {
        tfe.printStackTrace();
      }
    }
} 
```

这会创建一个像

```
<?xml version="1.0" encoding="UTF-8" standalone="no" ?> 
<company>
    <staff id="1">
        <firstname>yong</firstname>
        <lastname>mook kim</lastname>
        <nickname>mkyong</nickname>
        <salary>100000</salary>
    </staff>
</company> 
```

[资源。](http://www.mkyong.com/java/how-to-create-xml-file-in-java-dom/)

通过 http 帖子发送：

```
HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("http://192.168.192.131/");

    try {
        StringEntity se = new StringEntity( "<aaaLogin inName=\"admin\" inPassword=\"admin123\"/>", HTTP.UTF_8);
        se.setContentType("text/xml");
        httppost.setEntity(se);

        HttpResponse httpresponse = httpclient.execute(httppost);
        HttpEntity resEntity = httpresponse.getEntity();
        tvData.setText(EntityUtils.toString(resEntity));

    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

顺便说一句，考虑使用[JSON](http://www.json.org/)而不是 XML。它更高效，更易于使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-29T07:28:20.333

使用 java 想在 xml 中创建一个 http POST 请求，如下所示：

```
 <?xml version="1.0" encoding="UTF-8"?>
        <xmlActivityRequest version="2.0" xmlns="http://www.request.com/schema">
            <authentication>
                <user>pranab</user>
                <password>pranab</password>
            </authentication>
            <actionDate>2019-03-28</actionDate>
            <transactionOnly>false</transactionOnly>
        </xmlActivityRequest> 
```

所以，这里是代码。

```
 public String prepareRequest(String actionDate, String username, String password) {

                Document xmldoc = null;
                Element e = null;
                Element sube = null;
                Node n = null;
                DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
                try {
                    DocumentBuilder builder = factory.newDocumentBuilder();
                    DOMImplementation impl = builder.getDOMImplementation();
                    xmldoc = impl.createDocument(null, "xmlActivityRequest", null);
                    Element root = xmldoc.getDocumentElement();
                    root.setAttribute("version", "2.0");
                    root.setAttribute("xmlns", "http://www.request.com/schema");
                    e = xmldoc.createElement("authentication");
                    sube = xmldoc.createElement("user");
                    n = xmldoc.createTextNode("pranab");
                    sube.appendChild(n);
                    e.appendChild(sube);
                    sube = xmldoc.createElement("password");
                    n = xmldoc.createTextNode("pranab");
                    sube.appendChild(n);
                    e.appendChild(sube);
                    root.appendChild(e);
                    e = xmldoc.createElement("actionDate");
                    n = xmldoc.createTextNode("2019-03-28");
                    e.appendChild(n);
                    root.appendChild(e);
                    e = xmldoc.createElement("transactionOnly");
                    n = xmldoc.createTextNode("false");
                    e.appendChild(n);
                    root.appendChild(e);
                    ByteArrayOutputStream stream = new ByteArrayOutputStream();
                    OutputFormat outputformat = new OutputFormat();
                    outputformat.setIndent(4);
                    outputformat.setIndenting(true);
                    outputformat.setPreserveSpace(false);
                    XMLSerializer serializer = new XMLSerializer();
                    serializer.setOutputFormat(outputformat);
                    serializer.setOutputByteStream(stream);
                    serializer.asDOMSerializer();
                    serializer.serialize(xmldoc.getDocumentElement());
                    return stream.toString();
                } catch (ParserConfigurationException e) {
                    LOGGER.error("Unable to create a Parser that produces DOM object trees from 
                    transactionOnly XML documents " + e.getMessage());
                } catch (IOException e) {
                    LOGGER.error("Unable to find the Document Element " + e.getMessage());
                }
                return null;
            } 
```

更多访问： [https ://programmingproblemsandsolutions.blogspot.com/2019/03/using-java-want-to-create-http-post.html](https://programmingproblemsandsolutions.blogspot.com/2019/03/using-java-want-to-create-http-post.html)

# android - 以编程方式通过 Android App 向特定号码发送短信

> ID：11578798
> 
> 赞同：0
> 
> 时间：2012-07-20T11:52:07.327
> 
> 标签：android

实际上我的概念是使用 android 应用程序代码消息必须发送一个特定的数字。我的代码是

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    buttonSend = (Button) findViewById(R.id.buttonSend);
    textPhoneNo = (EditText) findViewById(R.id.editTextPhoneNo);
    textSMS = (EditText) findViewById(R.id.editTextSMS);

    buttonSend.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {

            String phoneNo = textPhoneNo.getText().toString();
            String sms = textSMS.getText().toString();

            try {
                SmsManager smsManager = SmsManager.getDefault();
                smsManager.sendTextMessage(phoneNo, null, sms, null, null);
                String smsNumber = textPhoneNo.getText().toString();
                  String smsText = textSMS.getText().toString();
                  smsManager.sendTextMessage(smsNumber, null, smsText, null, null);
                Toast.makeText(getApplicationContext(), "SMS Sent!",
                        Toast.LENGTH_LONG).show();
            } catch (Exception e) {
                Toast.makeText(getApplicationContext(),
                        "SMS faild, please try again later!",
                        Toast.LENGTH_LONG).show();
                e.printStackTrace();
            }
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T11:56:22.023

AndroidManifest.xml 文件中所需的权限：

```
<uses-permission android:name="android.permission.SEND_SMS"></uses-permission> 
```

# animation - 如何使用 CSS 3 过渡创建循环淡入/淡出图像效果？

> ID：11578800
> 
> 赞同：5
> 
> 时间：2012-07-20T11:52:08.627
> 
> 标签：animation, css, css-transitions

我正在尝试为图像创建循环淡入/淡出效果。它在 Chrome 中工作，但在 Firefox 中不起作用。

这是代码：http: [//jsfiddle.net/FTLJA/254/](http://jsfiddle.net/FTLJA/254/)

（我确实让它与 jQuery 一起工作，但这使得浏览器在 Android 手机上变得缓慢和闪烁，所以我正在尝试使用 CSS。）

谢谢你的帮助。

更新：已修复..请再次检查链接

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-20T13:13:52.877

好吧，如果 ypu 只设置 WebKit 属性（only`@-webkit-keyframes`和 only `-webkit-animation-...`），那么它当然只能在 WebKit 而不是 Firefox 中工作 -`-moz`也可以使用前缀添加它们。还要删除引号`'blink'`以使其仅保留...`blink`并且它可以工作[http://jsfiddle.net/FTLJA/261/](http://jsfiddle.net/FTLJA/261/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T12:50:34.643

是的——这显示了 CSS 过渡和 CSS 动画之间的区别。

CSS 动画在应用`-webkit-animation-name`到元素后运行，即它们可以完全从 CSS 运行。

另一方面，转换仅在您更改它们适用的 CSS 属性时运行。您可以通过 CSS 伪类（如`:hover`）或通过 JavaScript 来执行此操作。

所以，为了让你的过渡在不支持的浏览器中工作`-webkit-animation`，你需要运行一些 JavaScript 来改变图像的不透明度，这`setInterval`是你的朋友。

（请注意，您的 JavaScript 不会执行动画，它只会`opacity`从 1 直接切换到 0，然后每秒再切换回来。CSS 过渡将为您制作动画。）

# mysql - 当我尝试使用 MySQL ODBC 驱动程序时，什么可能导致 MS Query (msqry32.exe) 崩溃？

> ID：11578801
> 
> 赞同：1
> 
> 时间：2012-07-20T11:52:11.380
> 
> 标签：mysql, excel, connection, ms-query

*我需要通过 MS Query （使用 MySQL ODBC 驱动程序）*将一些数据从 MySQL DB 导入 Excel 。第一步，我设置了数据源名称、TCP/IP 服务器、端口、用户名、密码和模式名称。
当我按下测试按钮时，连接工作正常。接下来，我选择了表名、所需的列、过滤器、排序顺序并进入`Query Wizard - Finish`屏幕。无论选择`Return data to Excel`或`View data in MS Query`，按下`Finish`按钮后，我都会遇到 MS Query 崩溃。

我在下面给出问题详细信息：

> 问题事件名称：BEX64
> 应用程序名称：msqry32.exe
> 应用程序版本：15.0.4128.1014
> 应用程序时间戳：4fe552e8
> 故障模块名称：myodbc5.dll
> 故障模块版本：5.1.11.0
> 故障模块时间戳：4f9b1ada
> 异常代码：c0000409
> 异常偏移量：00000000000053de
> SO 版本：6.1.7601.2.1.0.256.1
> 区域设置 ID：1033
> 附加信息 1：7877
> 附加信息 2：78776f05532d6948ecde3d2d80dd0f86
> 附加信息 3：0bcb
> 附加信息 4：0bcb9f9d2da69b06627ca9d789f2a3fe

此外，数据库是远程的，我通过 VPN 连接。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T18:27:48.137

您可能正在使用 64 位 mysql 驱动程序。当与 32 位办公套件一起使用时，这将导致无法解释的行为（即崩溃）。

# opencv - opencv 匹配边缘图像

> ID：11578802
> 
> 赞同：3
> 
> 时间：2012-07-20T11:52:13.487
> 
> 标签：opencv, image-recognition, edge-detection

我正在做这个项目，其中一部分是识别相机上记录的物体。所以更具体地说：

*   我正在使用 OpenCV

*   我已正确设置相机并能够从中检索图片

*   我已经编译并试验了来自 OpenCV 的大量演示

*   我需要一个比例和旋转不变的检测算法

*   原始对象的图片只能作为边缘图像使用

到目前为止，我看到的所有特征检测/提取/匹配算法都可以很好地处理灰度图像（如照片），但是由于我的项目规格，我需要处理边缘图像（有点像精明边缘检测器的输出）通常是 BW，并且仅包含在图像中找到的边缘。在这种情况下，我尝试使用的算法（SURF、SIFT、MSER 等）的性能会急剧下降。

所以实际的问题是：有没有人遇到过专门用于匹配边缘图像的算法，或者是否有某种设置可以提高 SIFR/SURF/ 的性能？为了很好地处理这种输入。

我会感谢任何建议或任何相关资源的链接

PS：这是我关于stackoverflow的第一个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T12:07:45.440

边缘图像有一个问题：它们包含的有关感兴趣对象的信息非常非常稀缺。

因此，可能找不到对边缘图像进行分类的通用算法。但是，如果您的图像简单、清晰且具体，您可以采用多种技术对其进行分类。其中：寻找轮廓，按形状、面积、定位、跟踪进行选择。

一个很好的形状信息列表（来自 Matlab 帮助站点）包括：

*   '区域'
*   '欧拉数'
*   '方向'
*   '边界框'
*   '程度'
*   '周长'
*   “质心”
*   '极端'
*   'PixelIdxList'
*   '凸区域'
*   '填充区域'
*   '像素列表'
*   '凸壳'
*   '填充图像'
*   “团结”
*   '凸图像'
*   '图片'
*   '子数组 IDx'
*   “怪癖”
*   '主轴长度'
*   '等效直径'
*   '小轴长度'

在算法中使用形状的一个重要条件是能够单独选择它们。形状分析对噪声、重叠等非常敏感

**更新**

我发现了一篇在这种情况下可能很有趣的论文——它是一个只使用形状信息的对象分类器，它可以应用于 Canny 图像——听起来这是你的解决方案

[http://www.vision.ee.ethz.ch/publications/papers/articles/eth_biwi_00664.pdf](http://www.vision.ee.ethz.ch/publications/papers/articles/eth_biwi_00664.pdf)

# objective-c - Objective-C / Cocoa Touch：在 UILabel 对象的 setter 中设置标签文本是不是很好的设计？

> ID：11578805
> 
> 赞同：0
> 
> 时间：2012-07-20T11:52:29.027
> 
> 标签：objective-c, ios, cocoa-touch

假设我有两个`UIViewController`被调用的子类`MasterViewController`和`DetailViewController`。

`DetailViewController`有一个类型`NSNumber`为 called`level`和一个`UILabel`called的属性`levelLabel`。

`MasterViewController`有一个`DetailViewController`叫`ToDetail`. `MasterViewController`的 prepareForSegue 是这样的

```
 - (void)prepareForSegue:(UIStoryboardSegue)segue sender:(id)sender
    {
       if ([segue.identifier isEqualToString:@"ToDetail"]) {
         DetailViewController *detailVC = (DetailViewController *)segue.destinationViewController;
         detailVC.level = [NSNumber numberWithInt:10]; // never mind the literal...pretend there was some algorithm for it
       }
     } 
```

那么，在`DetailViewController`我们实现 levelLabel 的 setter 时，如下所示：

```
 - (void)setLevelLabel:(UILabel *)levelLabel
     {
       if (levelLabel) {
         _levelLabel = levelLabel;
         _levelLabel.text = level.stringValue;
       }
     } 
```

这是好的代码设计吗？另外，你能批评一下我的代码编写风格吗？我几乎是在运行中编写了所有这些代码，所以这几乎就是我编写代码的大部分方式。

我在洗澡的时候想到了这个问题，因为这是我实现几乎所有依赖于 segue 的标签文本的设置的方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T12:47:27.850

以下是我自己对这种关系的思考方式。斜体适用于您的问题。

你有被控制的东西（标签）控制器（目标视图控制器）和它被控制的上下文（源视图控制器）。这也可以表示为模型-视图-控制器，但我认为考虑上下文可以适用于更具体和本地化的情况。

您通常应该尝试使信息流向一个方向，从上下文向下。对象不应该知道它们存在的上下文，即它们不应该要求任何信息，它们应该被告知它们需要操作的一切。所以源视图控制器应该将级别推送到目标视图控制器，目标视图控制器应该将此信息推送到标签。这是你已经拥有的，有点。

以上述为基础，不仅信息应该在一个方向流动，而且我还尝试确保关系是因果关系，即将信息从一个对象推送到另一个对象应该**导致**它随后被推送到下一个对象。您的代码没有这样做，这可能就是您对此感觉不好的原因。

*更合适的做法是在关卡设置器中设置标签的文本属性，这样当您设置或更改关卡时，标签会随之更新。标签可能已加载，也可能未加载，因此您必须检查它是否正在使用`-isViewLoaded`；`-viewDidLoad`是在首次加载时设置 text 属性的合适位置。*

（当我说“推送”时，这只是我考虑设置属性或传递参数的方式，因为它暗示了方向性。它实际上是依赖注入。拉取信息的一个例子是委托和数据源。但请注意这里的对象仍然是“在不知道任何上下文的情况下，委托和数据源被明确定义为协议，而不是类，并且通常在同一个头文件中，并且它们自己从周围的上下文中推送到对象上。所以是的，对象正在请求信息，但是它自己的术语和它不知道的系统。）

重新编码风格：

这正是我编写代码的方式，但请注意 Apple[保留使用下划线前缀](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CodingGuidelines/Articles/NamingMethods.html)

# pivot - 在猪中旋转

> ID：11578815
> 
> 赞同：3
> 
> 时间：2012-07-20T11:53:05.630
> 
> 标签：pivot, apache-pig

这与[Pivot table with Apache Pig](https://stackoverflow.com/questions/11213567/pivot-table-with-apache-pig)中的问题有关。我的输入数据为

```
Id    Name     Value 
1     Column1  Row11 
1     Column2  Row12 
1     Column3  Row13 
2     Column1  Row21 
2     Column2  Row22 
2     Column3  Row23 
```

并希望旋转并获得输出为

```
Id    Column1 Column2 Column3 
1      Row11    Row12   Row13 
2      Row21    Row22   Row23 
```

请让我知道如何在 Pig 中做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T17:25:24.270

不使用 UDF 的最简单方法是在 Id 上进行分组，而不是在嵌套的 foreach 中为每个列名选择行，然后在生成中加入它们。见脚本：

```
inpt = load '~/rows_to_cols.txt' as (Id : chararray, Name : chararray, Value: chararray);
grp = group inpt by Id;
maps = foreach grp {
    col1 = filter inpt by Name == 'Column1';
    col2 = filter inpt by Name == 'Column2';
    col3 = filter inpt by Name == 'Column3';
    generate flatten(group) as Id, flatten(col1.Value) as Column1, flatten(col2.Value)  as Column2, flatten(col3.Value)  as Column3;
}; 
```

输出：

```
(1,Row11,Row12,Row13)
(2,Row21,Row22,Row23) 
```

另一种选择是编写一个 UDF，它将 bag{name, value} 转换为 map[]，而不是通过使用列名作为键来获取值（例如 vals#'Column1'）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-15T15:19:51.773

不确定猪，但在火花中，您可以使用单行命令执行此操作

```
df.groupBy("Id").pivot("Name").agg(first("Value")) 
```

# iphone - 不重复的随机数

> ID：11578816
> 
> 赞同：0
> 
> 时间：2012-07-20T11:53:05.187
> 
> 标签：iphone, nsmutablearray, xcode4.2

我有 50 个数组元素的 NSMutableArray。我需要随机生成而没有任何重复。你能推荐一些示例代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T12:05:38.747

创建主数组的本地 mutablearray 副本，获取随机值后，从本地数组中删除随机索引处可用的对象，处理它直到数组计数为 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T12:04:12.310

我假设你想生成数字。这是我用来从 N 生成 M 个随机数的答案。虽然它不会将它们添加到 中`NSMutableArray`，但我相信您可以根据需要调整此代码。

```
#define M 10
#define N 100    

unsigned char is_used[N] = { 0 }; /* flags */
int in, im;

im = 0;

for (in = N - M; in < N && im < M; ++in) {
  int r = rand() % (in + 1); /* generate a random number 'r' */

  if (is_used[r])
    /* we already have 'r' */
    r = in; /* use 'in' instead of the generated number */

  assert(!is_used[r]);
  vektor[im++] = r + 1; /* +1 since your range begins from 1 */
  is_used[r] = 1;
}

assert(im == M); 
```

为什么上述工作并不明显。但它有效。[1..N] 范围内的 M 个数字将被均匀分布地挑选出来。

请注意，对于大 N，您可以使用基于搜索的结构来存储“已使用”的数字，从而获得具有 O(M) 内存要求的良好 O(M log M) 算法。

[[来源]](https://stackoverflow.com/a/1608585/916299)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T12:05:39.420

这是获得小于 1000 的随机 int 的示例。

```
int y =  arc4random() % 1000; 
```

保持没有重复，只需在插入前检查

# java - 在整数和减法处找到一对字符串，java

> ID：11578818
> 
> 赞同：1
> 
> 时间：2012-07-20T11:53:10.320
> 
> 标签：java

我有一个包含值的字符串：

```
12345    5
54321    4
98765    10 
```

第一个值是一个数字，第二个值是一个计数。字符串值是通过这段代码获得的：

```
for(ClusterListBean bean : clusterList) {
    line += bean.getMSISDN()+"\t"+bean.getRewardCount()+"\n";               
} 
```

现在我正在读取一个内容相同但计数值不同的文件。

这是通过以下方式完成的：

```
BufferedReader ln = FileCreatorUtil.readFile(configFileUtil.prevFile().getFileDir()+prevFile.clusterPrevFile().getFileName()); 
```

现在我想做的是搜索一个数值，得到与之配对的计数，然后减去计数。例子：

BufferedReader ln 内容：

```
12345    5
54321    4
98765    10 
```

字符串行内容：

```
12345    7
54321    9
98765    15 
```

输出应该是：

```
12345    2
54321    5
98765    5 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T12:04:56.220

将您的数据放入以`HashMap`MSISDN 为关键、计数为价值的地方。读取第二个文件查阅该地图并减去该值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T12:11:05.037

你为什么不把你的“字符串”放在哈希图中？

```
Map<String,Integer> map = new HashMap<String,Integer>();
for(ClusterListBean bean : clusterList) {
    map.put(bean.getMSISDN(),bean.getRewardCount());               
} 
```

然后阅读您的文件：

```
BufferedRead ln = null;
try{
    ln = new BufferedReader(new FileReader(configFileUtil.prevFile().getFileDir()+prevFile.clusterPrevFile().getFileName()));
    String line;
    while((line=br.readLine())!=null){
        String[] linesplit = line.split("\\t");
        if (map.containsKey(linesplit[0])){
             //do whatever you need with something like:
             System.out.println(map.get(linesplit[0])-Integer.parseInt(linesplit[1]));
        }
    }
    ln.close();
}catch(IOException e){
     e.printStackTrace();
} 
```

# css - CSS 重置 - 它到底是做什么的？

> ID：11578819
> 
> 赞同：73
> 
> 时间：2012-07-20T11:53:19.713
> 
> 标签：css

我在 jquery 图像滑块演示中找到了这个 reset.css 文件，但它从未包含在主 index.html 文件中。应该做什么，更重要的是，你把它放在哪里？你把它放在**任何**引用的样式表（）之前吗？

这是reset.css里面的代码

```
/* CSS reset */
body,div,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,form,fieldset,input,textarea,p,blockquote,th,td { 
    margin:0;
    padding:0;
}
html,body {
    margin:0;
    padding:0;
}
table {
    border-collapse:collapse;
    border-spacing:0;
}
fieldset,img { 
    border:0;
}
input{
    border:1px solid #b0b0b0;
    padding:3px 5px 4px;
    color:#979797;
    width:190px;
}
address,caption,cite,code,dfn,th,var {
    font-style:normal;
    font-weight:normal;
}
ol,ul {
    list-style:none;
}
caption,th {
    text-align:left;
}
h1,h2,h3,h4,h5,h6 {
    font-size:100%;
    font-weight:normal;
}
q:before,q:after {
    content:'';
}
abbr,acronym { border:0;
} 
```

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2012-07-20T12:11:20.740

一开始，样式的工作方式没有标准化，每个浏览器都实现了它认为正确的东西。您在 IE 中看到如此多关于样式错误的问题的原因之一是，IE 是在样式方面与其他浏览器最不同的浏览器。尽管 IE 已经改进，其他浏览器也有所改进，但它们仍然将自己的边框、填充和边距、缩放、字体应用于元素，以赋予页面自己独特的感觉。一个例子是，chrome 为文本框提供了自己的黄色边框。“重置”实际上将所有这些样式“重置”为零/无，因此您看不到任何尚未应用于页面的样式。

如果这些样式未“重置”，您将看到不需要的样式/效果和破坏。通常建议“重置”浏览器的样式。

看看这篇文章[你应该重置你的 CSS 吗？](http://sixrevisions.com/css/should-you-reset-your-css/)

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2012-07-20T12:02:56.723

reset.css 用于规范化浏览器的默认样式。

例子：

![在此处输入图像描述](../Images/bf9430d2c9aabab08b5c6b2de9b41df7.png)

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-07-21T07:39:31.040

看看这里的答案，“重置”和“正常化”之间似乎有些混淆。他们的目标略有不同。

CSS 重置是您在其他样式之前加载的一组样式，用于删除浏览器内置样式。第一个也是最受欢迎的之一是 Eric Mayer 的[Reset CSS](http://meyerweb.com/eric/tools/css/reset/)。

另一种选择是协调浏览器内置样式。目前最流行的工具是[Normalize.css](https://necolas.github.io/normalize.css/)。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-20T11:58:10.737

浏览器有不同的“内置”样式，它们适用于不同的 html 元素。这些样式定义可能因不同的浏览器而异。规范化 css 文件旨在通过重置这些特定于浏览器的样式来“规范化”跨浏览器的页面呈现。

您必须在您自己的样式定义**之前包含它。**否则，这些样式也可能会覆盖（由于 css 的级联性质）您的声明，这没有多大意义；）

最流行的样式重置可能是[Eric Meyer 的](http://meyerweb.com/eric/tools/css/reset/)，它带有一些背景信息。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-07-20T11:58:46.303

浏览器可以根据其原生渲染引擎来渲染接收到的 HTML 和 CSS。不同的浏览器可能使用**不同的渲染方法 [IE ;) 如果你知道我的意思]**所以 reset.css 的意图是将所有属性设置为通用的预定义值，这样开发人员/设计人员就可以忘记一些渲染引擎并开始开发划痕。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-07-20T12:10:23.837

每个浏览器都有自己的默认`user agent`样式表，用于使无样式的网站看起来更清晰。例如，大多数浏览器默认将链接设为蓝色，将访问链接设为紫色，为表格提供一定数量的边框和填充，将变量`font-size`s 应用于`H1`、`H2`、`H3`等，并为几乎所有内容设置一定数量的填充。

有没有想过为什么提交按钮在每个浏览器中看起来都不一样？

显然，这给 CSS 作者带来了一定程度的头痛，他们无法弄清楚如何使他们的网站在每个浏览器中看起来都一样。

使用 CSS 重置，CSS 作者可以强制每个浏览器将其所有样式重置为 null，从而尽可能避免跨浏览器的差异。

从您通过重置设置的一致基础开始，您可以继续重新设置文档样式，确保浏览器在其默认 HTML 呈现方面的差异无法触及您！

希望它有所帮助，您可能想看看这篇文章，[我应该使用哪个 CSS 重置？](http://www.cssreset.com/which-css-reset-should-i-use/).

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-07-20T12:28:08.827

> CSS 重置（或“重置 CSS”）是一组简短的、通常压缩（缩小）的 CSS 规则集，可将所有 HTML 元素的样式重置为一致的基线。
> 
> 如果您不知道，每个浏览器都有自己的默认“用户代理”样式表，它用于使无样式的网站看起来更清晰。例如，大多数浏览器默认将链接设为蓝色，将访问链接设为紫色，为表格提供一定数量的边框和填充，对 H1、H2、H3 等应用可变字体大小，并为几乎所有内容设置一定数量的填充。有没有想过为什么提交按钮在每个浏览器中看起来都不一样？
> 
> 显然，这给 CSS 作者带来了一定程度的头痛，他们无法弄清楚如何使他们的网站在每个浏览器中看起来都一样。
> 
> 使用 CSS 重置，CSS 作者可以强制每个浏览器将其所有样式重置为 null，从而尽可能避免跨浏览器的差异

参考[http://www.cssreset.com/what-is-a-css-reset/](http://www.cssreset.com/what-is-a-css-reset/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-11-26T11:00:03.860

简而言之，由于浏览器的不一致，需要重置 CSS。详细来说，所有浏览器的渲染都不一样。因此，Web 渲染可能因浏览器而异。

如果您想使用/重置，Meyer Web 提供了最大的 CSS 重置代码。你可以在[这里](https://meyerweb.com/eric/tools/css/reset/)找到它。如果您需要更多详细信息，您还可以[在此处](https://nerodev.com/how-to-reset-css/)找到更详细的 CSS 重置以及我们需要使用它的原因。

# iphone - 从双精度数中删除最后 6 位数字（Objective-C）

> ID：11578826
> 
> 赞同：0
> 
> 时间：2012-07-20T11:53:39.807
> 
> 标签：iphone, objective-c, ios, xcode

我得到格式如下的日期

20110626125911

它们存储在一个工作正常的双倍中。

我想删除双精度的最后 6 位数字，因此在上面的示例中为 125911。

是否有一些方便的方法可以始终切断最后 6 位数字，以便将上面示例的双精度读为 20110626？

我知道我可以通过将 double 设为字符串并使用 substringtoindex 等来做到这一点，但它似乎很重。只是为此寻找一些不错的“技巧”。

非常感谢，-代码

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T12:10:28.167

只需将您的数字除以 10^6（即 10 的 6 次方），然后按如下方式计算结果：

```
double originalDateAsDouble = 20110626125911;
double finalDateAsDouble = floor(originalDateAsDouble / pow(10, 6)); 
```

让我知道这是否适合你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T11:55:37.623

20110626125911/100000是你想要的吗？

# java - 使用 Java 进行 XML 解析：

> ID：11578831
> 
> 赞同：0
> 
> 时间：2012-07-20T11:54:05.453
> 
> 标签：java, xml, parsing, elementname

> **可能重复：**
> [如何使用 Java 检索 XML 的元素值？](https://stackoverflow.com/questions/4076910/how-to-retrieve-element-value-of-xml-using-java)

我正在尝试使用 dom 解析带有 java 的 xml 文件。xml 看起来像这样：

```
<documents>
  <document>
    <element name="doctype">
      <value>Circular</value>
    </element>
  </document>
</documents> 
```

获取根节点“文档”以及子节点“文档”很容易。但是我无法获取名为“doctype”的元素的值（我想将值“Circular”存储在数据库中）。有人能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:03:46.713

您可以使用以下 XPath 来获取您要查找的数据：

```
/documents/document/element[@name='doctype']/value 
```

**演示**

以下演示代码演示了如何针对您的 DOM 执行该 XPath。此应用程序将在任何标准 Java SE 5（或更新版本）安装中运行。

```
package forum11578831;

import javax.xml.parsers.*;
import javax.xml.xpath.*;
import org.w3c.dom.Document;

public class Demo {

    public static void main(String[] args) throws Exception {
        DocumentBuilderFactory domFactory = DocumentBuilderFactory.newInstance();
        DocumentBuilder builder = domFactory.newDocumentBuilder();
        Document dDoc = builder.parse("src/forum11578831/input.xml");

        XPath xPath = XPathFactory.newInstance().newXPath();
        String string = (String) xPath.evaluate("/documents/document/element[@name='doctype']/value", dDoc, XPathConstants.STRING);
        System.out.println(string);
    }

} 
```

**输入.xml**

我已扩展 XML 文档以包含具有其他值`element`的属性的元素，以证明 XPath 有效。`name``doctype`

```
<documents>
  <document>
    <element name="foo">
      <value>FOO</value>
    </element>
    <element name="doctype">
      <value>Circular</value>
    </element>
    <element name="bar">
      <value>BAR</value>
    </element>
  </document>
</documents> 
```

**输出**

执行 XPath 的结果就是`String`您正在寻找的结果：

```
Circular 
```

# eclipse - Xterm 右键单击 不当行为

> ID：11578840
> 
> 赞同：2
> 
> 时间：2012-07-20T11:54:25.940
> 
> 标签：eclipse, xterm

当我使用 xterm(Reflection, MobaXterm) 从 windows 打开 linux eclipse IDE 时，我发现了一些问题：

1.  当我右键单击一个项目时，菜单会出现一毫秒，然后在单击 about 时消失。
2.  有时菜单会在右键单击时出现，但如果该菜单有更多项目，通常它应该向下/向上滚动，但滚动按钮停留在 Windows tast bar 后面。

谁可以帮我这个事？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T13:17:13.930

我也有同样的问题。似乎右键菜单消失在 Eclipse 主窗口后面和 Windows 任务栏后面......

这是我目前使用的解决方法：在[MobaXterm 5.0](http://mobaxterm.mobatek.net)中，只需转到“设置”->“X11”并选择“使用 Fvwm 的窗口模式”：这将打开一个 X11 窗口。

当您使用此技巧运行 Eclipse 时，它​​会正确显示右键单击菜单。

我希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-27T10:03:01.003

我用谷歌搜索但没有找到解决方案。对于第一个，您可以右键单击并按住它，将鼠标移动到目标菜单项，然后释放它。这样可以避免错误的点击。

# objective-c - 精灵效果ipad

> ID：11578841
> 
> 赞同：4
> 
> 时间：2012-07-20T11:54:29.560
> 
> 标签：objective-c, ios, animation, effect

有谁知道 MAC OSx 上的 Genie 动画线有 iPad 实现吗？我想在左侧创建一些列表，并在一个动作上创建“类似 OSx”的精灵动画，以将移动细节部分动画化到列表项中（比如将 MAC 上的窗口最小化到停靠图标）

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-13T15:28:24.163

我发现的最简单的实现是 BCGenieEffect ( [https://github.com/Ciechan/BCGenieEffect](https://github.com/Ciechan/BCGenieEffect) )。README 不仅非常容易理解，实际的实现也只有几行代码。这是一个示例（在他们的 README 中找到），它显示了如何简单地执行此操作：

```
CGRect startRect = CGRectMake(30, 40, 50, 60);
[view genieOutTransitionWithDuration:0.7 
                           startRect:startRect
                           startEdge:BCRectEdgeLeft 
                          completion:nil]; 
```

我只是在一个项目中使用它，它似乎非常可靠。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-20T12:28:33.627

有[这个](https://github.com/rmd6502/Genie)选项。关于这个主题的stackoverflow帖子有很多，标准效果使用私有API，但可以在[这里](https://stackoverflow.com/questions/428110/how-can-i-replicate-the-trashing-animation-of-mail-app)找到。

# android - android应用程序中的离线openstreet矢量图

> ID：11578851
> 
> 赞同：1
> 
> 时间：2012-07-20T11:54:53.050
> 
> 标签：android, openstreetmap, vector-graphics

我需要一个建议，我正在构建 android 应用程序，它是一种旅游指南，我需要一个离线地图，比如 openstreet 地图，重要的是它是某种矢量地图，因为缩放原因，我也可以以某种方式自定义地图。关于我应该如何制作这个的任何提示？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:14:38.557

您可以先查看处理 OpenStreetMap 数据的地图渲染库的（不完整）[列表。](http://wiki.openstreetmap.org/wiki/Rendering)此列表包括免费和付费软件。披露：我是其中一个图书馆的作者。

警告：即使您选择的库一切顺利，这些东西也需要大量的工作和时间才能做好。然而，[Android NDK](http://developer.android.com/tools/sdk/ndk/index.html)（本机开发工具包）现在已经相当成熟，因此将 Android 应用程序与用 C++ 或 C 编写的库集成起来并不难。

# django - 查询集过滤器中使用的 EmptyQuerySet 上的 values_list 返回完整集

> ID：11578852
> 
> 赞同：7
> 
> 时间：2012-07-20T11:54:57.640
> 
> 标签：django, django-models

最近在过滤器中发现了一些奇怪的东西，我无法相信它的预期行为。

```
from django.contrib.auth.models import User
print User.objects.filter(id__in=User.objects.none().values_list("id",flat=True))
print User.objects.filter(id__in=User.objects.all().values_list("id",flat=True)) 
```

奇怪的是，这两个列表都返回了完整的用户集。如果我将内部查询包装在列表函数中，实际上似乎很容易“修复”，例如

```
User.objects.filter(id__in=list(User.objects.none().values_list("id"))) 
```

然后这将返回我所期望的（一个空列表）。

对我来说似乎是一个错误，还是我错过了什么？

史蒂夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T16:29:09.943

以下是为两者生成的查询：

**User.objects.filter(id__in=User.objects.none().values_list("id",flat=True))**

```
SELECT "auth_user"."id",
       "auth_user"."username",
       "auth_user"."first_name",
       "auth_user"."last_name",
       "auth_user"."email",
       "auth_user"."password",
       "auth_user"."is_staff",
       "auth_user"."is_active",
       "auth_user"."is_superuser",
       "auth_user"."last_login",
       "auth_user"."date_joined"
FROM "auth_user"
WHERE "auth_user"."id" IN
    (SELECT U0."id"
     FROM "auth_user" U0) LIMIT 21 
```

**User.objects.filter(id__in=User.objects.all().values_list("id",flat=True))**

```
SELECT "auth_user"."id",
       "auth_user"."username",
       "auth_user"."first_name",
       "auth_user"."last_name",
       "auth_user"."email",
       "auth_user"."password",
       "auth_user"."is_staff",
       "auth_user"."is_active",
       "auth_user"."is_superuser",
       "auth_user"."last_login",
       "auth_user"."date_joined"
FROM "auth_user"
WHERE "auth_user"."id" IN
    (SELECT U0."id"
     FROM "auth_user" U0) LIMIT 21 
```

注意到什么了吗？它们是*完全相同*的查询。同样有趣的是，如果您尝试诸如和之类`User.objects.none()`的东西会发生什么。在所有这三种情况下，Django 都会使查询短路。换句话说，它甚至不会向数据库发出查询，因为它事先确定不会有任何结果。我在这里最好的猜测是，添加到最后会破坏短路逻辑，允许发送实际查询，并且它实际上决定了应该发送的查询。当您考虑时，这两种情况实际上是相同的。无论哪种方式，您都只想在*未过滤*的查询集上进行选择。`User.objects.filter(id__in=[])``User.objects.filter(id__in=User.objects.none()``values_list``values_list``id`

 *我强调了那部分，因为我确定您现在正在上下跳跃，但`none`应该返回一个空的查询集。没错，但它是通过自动返回一个`EmptyQuerySet`并且根本不实际查询数据库来做到这一点的。它不会向查询添加任何过滤器。

这是否是一个错误是有争议的。我更倾向于称这是一个很可能无法真正“修复”的极端情况。这是所有交织部分在这个场景中如何组合在一起的函数。*

# linux - 远程接口拒绝连接（FB 2.1 SS linux x86）

> ID：11578855
> 
> 赞同：1
> 
> 时间：2012-07-20T11:55:11.623
> 
> 标签：linux, ubuntu, firebird, firebird2.1

我目前在我的 Ubuntu Server 11.0 上安装了 Firebird Super Server 2.1 x86。

服务器不时停止接受连接...导致上面的错误消息（对于客户端）

**“连接未建立。连接被远程接口拒绝。”**

解决问题，需要重启firebird服务，一切就OK了！

firebird.log 没有告诉我任何事情......

关于正在发生的事情有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T12:42:56.723

我有一个类似的安装堆栈和类似的问题。

在阅读了从 2.5 向后移植的这个[错误修复](http://tracker.firebirdsql.org/browse/CORE-3285)后，我将我的 firebird 升级到了 2.1.4 版本。

当时，我还必须升级我的硬件。从那以后问题没有重复，但我不能 100% 确定升级解决了问题

希望这可以帮助。

亚历杭德罗

# android - 在 ContentProvider 中使用 rawQuery 是一种好习惯吗？

> ID：11578857
> 
> 赞同：22
> 
> 时间：2012-07-20T11:55:15.263
> 
> 标签：android, android-contentprovider

我正在使用我的自定义 ContentProvider 与 sqlite 数据库进行通信。我想在一个列表（使用 ListFragment）上显示来自两个表（具有多对多关系）的数据。对于这种情况，我能想到的唯一解决方案是使用 rawQuery。问题是，如果这是一个好习惯，还是应该以其他方式解决这个问题？

表格示例：

表 A：ID，COLUMN_FROM_A

表 B：ID，COLUMN_FROM_B

连接表 AB：ID、FK_ID_A、FK_ID_B

ContentProvider 中重写查询方法的示例：

```
@Override
public Cursor query(Uri uri, String[] projection, String selection, String[] selectionArgs, String sortOrder) {
    SQLiteQueryBuilder queryBuilder = new SQLiteQueryBuilder();
    Cursor cursor = null;
    int uriType = URIMatcher.match(uri);
    switch (uriType) {
        case TABLE_A_URI:
            queryBuilder.setTables("TABLE_A");
            cursor = queryBuilder.query(databaseHelper.getReadableDatabase(), projection, selection, selectionArgs, null, null, sortOrder);
            break;
        case TABLE_B_URI:
            queryBuilder.setTables("TABLE_B");
            cursor = queryBuilder.query(databaseHelper.getReadableDatabase(), projection, selection, selectionArgs, null, null, sortOrder);
            break;
        case TABLE_JOIN_A_B_URI:
             cursor = databaseHelper.getReadableDatabase().rawQuery("select a.COLUMN_FORM_A, b.COLUMN_FROM_B from TABLE_A a, TABLE_B b, TABLE_AB ab where ab.FK_ID_A=a.ID and ab.FK_ID_B=b.ID", null);
            break;
        default:
            throw new IllegalArgumentException("Unknown URI");
    }

    cursor.setNotificationUri(getContext().getContentResolver(), uri);
    return cursor;
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-20T12:02:44.743

这是一种很好的常见做法，在这种情况下非常合适。

我没有预见到任何问题，我们已经在许多应用程序中使用了它。

# macos - MAC 不再使用 NTLM 对 IIS7 进行身份验证，而是对 IIS6 进行身份验证

> ID：11578858
> 
> 赞同：1
> 
> 时间：2012-07-20T11:55:24.477
> 
> 标签：macos, authentication, safari, iis-7.5, ntlm

我最近将我的 Intranet Web 服务器升级到运行 IIS 7.5 的 Server 2008 x64。我维护的员工网站使用 NTLM 来判断哪个用户正在查看该页面并据此显示适当的内容。由于升级或 MAC 客户端无法再通过 Safari 连接，并且 Firefox 不再接受 network.automatic-ntlm-auth.trusted-uris 的 about:config 设置。我必须从该条目中删除 FQDN，以免他们只获得 401 页面。

我的开发服务器仍然是带有 IIS6 的 Server 2003 机器，MAC 可以通过 Safari 和 firefox 毫无问题地对其进行身份验证。

我在新的 IIS7 服务器上检查了位于 HKLM\SYSTEM\CurrentControlSet\Control\Lsa 中的注册表项 LmCompatibilityLevel，但该项不存在。所以我的理解是，默认情况下它会导致级别 0，允许 LM、NTLM 和 NTLM v2 身份验证请求。

有关如何恢复身份验证的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T21:59:30.953

Safari 有一个类似的问题，迫使用户无数次登录，这为我解决了这个问题：

在 IIS 管理器 (IIS 7) 中，导航到网站并右键单击身份验证以“打开功能”。右键单击“Windows Authentication”并选择“Providers”，它应该会显示 Negotiate & NTLM 删除“Negotiate”并重新启动网站，它应该可以使用单个登录提示。

# javascript - elementFromPoint() 完整文档替代

> ID：11578859
> 
> 赞同：0
> 
> 时间：2012-07-20T11:55:27.247
> 
> 标签：javascript, jquery, html

我正在尝试从 cookie 中恢复一个值，该值位于用户单击的 Y 轴上的某个位置。然后我想`<h2>`从该点击中找到父级（如果有帮助，所有`<h2>`s 都是 a 的第一个子级`<div class="_bdnable_">`）。这是我到目前为止所拥有的：

```
var bookmarkLocation;
function getBookmarkPos() {
    if ($.cookie("bookmark-position") !== null) { 
        $(".bdnable").each(function(i) {
            var scrollTopTop = $(this).offset.top;
            var scrollTopBottom = $(this).offset.top + $(this).height();
            // var screenWidth = parseInt(screen.width/2);
            // alert(screenWidth);
            // var bookmarkPosition = parseInt($.cookie("bookmark-position"));
            // alert(bookmarkPosition);
            // var query = document.elementFromPoint(screenWidth, 50).nodeName;
            // alert(query);
            if ($.cookie("bookmark-position")>=scrollTopTop && $.cookie("bookmark-position")<=scrollTopBottom) {
                bookmarkLocation = $(this).closest("div").children(":nth-child(1)").text();
            }
        });

        if (bookmarkLocation == null) {
            bookmarkLocation = "Unknown";
        }
    } else {
        bookmarkLocation = "No bookmark set";
    }

    $("#bookmarklocationspan").html(bookmarkLocation);
} 
```

在注释掉的部分是我尝试使用*getElementFromPoint*然后意识到它只检查可见区域的地方。不好，因为页面上可滚动的 Y 轴是 1000 像素高。

任何想法都非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T12:31:10.270

如果您已经从 cookie 中获得了点击的 y 坐标，为什么不简单地比较所有 H2 的 y 位置并选择下一个“更高”的位置呢？您的方法看起来像是比较用户是否直接点击了 H2 而不是它下面的文章/按钮？

只是一个想法 - 不要评价它的风格，认为它相当混乱：

```
var $myH2 = $('h2');
var clickY = <COOKIE_VALUE>;
var currentY = 0;
var foundH2ID = '';
for (var i = 0; i < $myH2.length; i++) {
 var h2Y = $($myH2[i]).position().top;
 if (h2Y <= clickY && h2Y > currentY) {
  currentY = h2Y;
  foundH2ID = $myH2[i].id;
 }
} 
```

或者也许我误会了你？

# wpf - 如何在单线程服务中正确处理多线程消息流？

> ID：11578860
> 
> 赞同：1
> 
> 时间：2012-07-20T11:55:28.077
> 
> 标签：wpf, multithreading

在 WPF 应用程序中，我有一个正在发布消息的第三方库。

消息如下：

```
public class DialectMessage
{
    public string PathAndQuery { get; private set; }

    public byte[] Body { get; private set; }

    public DialectMessage(string pathAndQuery, byte[] body)
    {
        this.PathAndQuery = pathAndQuery;
        this.Body = body;
    }
} 
```

我从我的 app.cs 文件中设置了外部消息源：

```
public partial class App : Application
{
    static App()
    {
        MyComponent.MessageReceived += MessageReceived;
        MyComponent.Start();
    }

    private static void MessageReceived(Message message)
    {
        //handle message
    }

} 
```

这些消息可以一次从多个线程发布，从而可以一次多次调用事件处理程序。

我有一个必须解析传入消息的服务对象。该服务实现以下接口：

```
internal interface IDialectService
{
    void Parse(Message message);
} 
```

我的 app.cs 文件中有一个默认的静态实例：

```
 private readonly static IDialectService g_DialectService = new DialectService(); 
```

为了简化解析器的代码，我想确保一次只解析一条消息。

我还想避免锁定我的事件处理程序，因为我不想阻止第 3 方对象。

由于这个要求，我不能直接`g_DialectService.Parse`从我的消息事件处理程序调用

**确保这种单线程执行的正确方法是什么？**

我的第一个想法是将我的解析操作包装在生产/消费者模式中。为了达到这个目标，我尝试了以下方法：

1.  在我的 app.cs 中声明一个 BlockingCollection：

    ```
    private readonly static BlockingCollection<Message> g_ParseOperations = new BlockingCollection<Message>(); 
    ```

2.  更改我的事件处理程序的主体以添加操作：

    ```
    private static void MessageReceived(Message message)
    {
        g_ParseOperations.Add(message);
    } 
    ```

3.  创建一个新线程，从我的应用构造函数中抽取集合：

    ```
    static App()
    {
        MyComponent.MessageReceived += MessageReceived;
        MyComponent.Start();

        Task.Factory.StartNew(() =>
        {
            Message message;
            while (g_ParseOperations.TryTake(out message))
            {
                g_DialectService.Parse(message);
            }
        });
    } 
    ```

但是，此代码似乎不起作用。服务 Parse 方法永远不会被调用。

此外，我不确定这种模式是否允许我正确关闭应用程序。

**我需要对代码进行哪些更改以确保一切正常？**

PS：我的目标是.Net 4.5

**[编辑] 经过一番搜索，以及[ken2k 的答案](https://stackoverflow.com/a/11579111/588868)，我可以看到我错误地调用 trytake 代替 take**。

我的更新代码现在是：

```
 private readonly static CancellationTokenSource g_ShutdownToken = new CancellationTokenSource();

    private static void MessageReceived(Message message)
    {
        g_ParseOperations.Add(message, g_ShutdownToken.Token);
    }

    static App()
    {
        MyComponent.MessageReceived += MessageReceived;
        MyComponent.Start();

        Task.Factory.StartNew(() =>
        {
            while (!g_ShutdownToken.IsCancellationRequested)
            {
                var message = g_ParseOperations.Take(g_ShutdownToken.Token);
                g_DialectService.Parse(message);
            }
        });
    }

    protected override void OnExit(ExitEventArgs e)
    {
        g_ShutdownToken.Cancel();
        base.OnExit(e);
    } 
```

此代码按预期运行。消息以正确的顺序处理。但是，一旦我退出应用程序，我就会在 Take 方法上得到一个“CancelledException”，即使我之前只是测试了 IsCancellationRequested。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T12:10:35.420

该[文档](http://msdn.microsoft.com/en-us/library/dd287184.aspx)说`BlockingCollection.TryTake(out T item)`：

> 如果集合为空，则此方法立即返回 false。

所以基本上你的循环会立即退出。您可能想要的是使用超时参数调用[TryTake 方法](http://msdn.microsoft.com/en-us/library/dd287154.aspx)`mustStop`，并在变量变为时退出循环`true`：

```
bool mustStop = false;  // Must be set to true on somewhere else when you exit your program
...
while (!mustStop)
{
    Message yourMessage;

    // Waits 500ms if there's nothing in the collection. Avoid to consume 100% CPU
    // for nothing in the while loop when the collection is empty.
    if (yourCollection.TryTake(out yourMessage, 500))
    {
        // Parses yourMessage here
    }
} 
```

* * *

对于您编辑的问题：如果您的意思是您收到了`OperationCanceledException`，那没关系，这正是将`CancellationToken`对象作为参数的方法必须表现的方式:) 只需捕获异常并优雅地退出。

# objective-c - 为什么石英框架中会出现不同的原点？

> ID：11578865
> 
> 赞同：0
> 
> 时间：2012-07-20T11:55:47.250
> 
> 标签：objective-c, quartz-graphics

我已经制作了跟随和执行代码之类的方法。

在查看后续结果图像后，我对石英框架的起源感到困惑。

请查看以下代码和图像。

[在 ViewController.m 中]

按下 UIButton 时执行跟随方法。

```
- (void)test {
    [customView drawCustom];
    [customView setNeedsDisplay];
} 
```

[在 CustomView.m 中]

```
- (void)drawRect:(CGRect)rect {
    cgc_Context = UIGraphicsGetCurrentContext();

    CGContextSetLineWidth(cgc_Context, 5.0);
    CGContextSetStrokeColorWithColor(cgc_Context, [UIColor redColor].CGColor);
    CGContextMoveToPoint(cgc_Context, 0, 0);
    CGContextAddLineToPoint(cgc_Context, 200, 50);
    CGContextStrokePath(cgc_Context);
}

- (void)drawCustom {
    CGContextSetLineWidth(cgc_Context, 5.0);
    CGContextSetStrokeColorWithColor(cgc_Context, [UIColor yellowColor].CGColor);
    CGContextMoveToPoint(cgc_Context, 0, 0);
    CGContextAddLineToPoint(cgc_Context, 200, 50);
    CGContextStrokePath(cgc_Context);
} 
```

[结果画面]

红线：drawRect的结果

黄线：drawCustom 的结果

为什么会出现不同的原点？

![在此处输入图像描述](../Images/392a87977579b2eb9470e5e24458e7b7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T12:12:21.050

您必须阅读苹果关于[Quartz 2D Coordinate Systems的文档](http://developer.apple.com/library/mac/documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/dq_overview/dq_overview.html#//apple_ref/doc/uid/TP30001066-CH202-CJBBAEEC)

# objective-c - 自定义 iOS 通讯录。需要有关数据结构和性能的建议

> ID：11578866
> 
> 赞同：0
> 
> 时间：2012-07-20T11:55:50.480
> 
> 标签：objective-c, ios, database, performance, abaddressbook

我目前正在开发一个 voIP 应用程序，我真的被地址簿困住了。

由于自定义设计，本机通讯录不适合我的应用程序。此外，我想添加一些本机通讯录中不存在的额外数据。但这会导致一些问题，我将其分为两个部分：

**1.数据结构：**

在我的应用程序的一部分中，我需要向用户显示他的所有通讯录联系人以及其他信息（例如，如果用户拥有相同的应用程序并且它在线）。

现在，我正在从 Address Book api 获取所有信息并将其直接加载到一个数组中（由 访问`tableView:cellForRowAtIndexPath:`），但不显示我正在谈论的自定义信息。我不知道是否值得将所有通讯簿信息存储在 sqlite 数据库中（我可以轻松地添加额外信息），或者我是否应该只将这些额外信息存储在文件或其他东西中。

将其存储在数据库中的最大问题是联系人的图片很重，以至于导致浪费内存的数据库。我想只存储一个参考（`ABRecordID`），然后从地址簿而不是数据库中收集相关信息，但是地址簿 api 的 Apple 文档说`ABRecordID`不能保证保持不变，所以它可能导致我的数据出现在错误的联系人数据旁边。

任何的想法？

**2、性能：**

这个自定义地址簿的第二个大问题是……例如，与 Android 相比，iOS 表格视图过于“手动”。您需要将数据存储在某处，以便在`tableView:cellForRowAtIndexPath:`调用该方法时返回该数据。您也可以在此方法中加载该数据，但这会使其非常慢。

这里的问题是，将所有数据预加载到内存中是危险的，因为一个人可能有 40 个联系人或 2000 个（可能他/她已经为每个人拍照，这将更加消耗内存）。如果 iOS 设备内存不足，系统将终止该应用程序。数据库方法没有内存问题，但是对每个出现的单元格进行查询非常慢，以至于无法接受。

同样，我需要为此提供一些想法。找不到性能和内存消耗之间的权衡。

请不要要求代码，因为我不允许发布它。我非常感谢您的建议。先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:46:44.467

1.  数据结构：除了记录引用，您还应该存储姓名电话号码和电子邮件地址。您的数据存储中没有其他内容。如果三个值之一发生变化，而另外两个保持不变，则更新更改的值。在为许多用户恢复设备期间，recordref 可以同时更改，但名称 email 和 phone 不会。如果用户更改了姓名、电子邮件或电话，他们将立即在许多用户中进行更改。偶尔你会得到一个与电子邮件和电话不匹配的记录引用，比如说，联系人可能已经更换了雇主，所以然后显示一个匹配的列表并要求用户选择一个。

至于有 1000 次联系的人，我会使用分页。一次将 100 或 200 个加载到数组中，当前行显示在表视图中作为数组索引的中间。一旦用户滚动 20-30 条记录，就从地址簿更新数组中的记录。您将花费大量时间重新保存数据，只是为了通过集合比较并尝试使其保持最新。只要您不将用户图像保存在内存中，您应该能够存储相当多的记录，因为您应该让表格视图处理它。当您收到有关单元格即将变为可见的通知时，获取图像并分配给单元格。即使那样，我也会在加载图像之前稍等片刻，因为如果用户快速滚动，单元格就会飞过而你' 将收到单元格滚动出去的通知，您可以释放图像数据。如果用户滚动缓慢，那么短暂的等待/睡眠将会过去，并且应该为每个单元格显示图像。

我不知道您计划在包装联系人的应用程序中存储多少元数据，但是如果您应该为联系人对象创建两个表，一个具有 3-4 个索引列，这将允许更快的查询，第二个用于保存其余的仅当用户在详细视图中查看联系人时才加载。除非你在 iPad 上，否则不能对 tableviescell 投入太多。

希望有帮助。

# windows-8 - 是否有 Metro 风格 Windows 8 应用程序的“标准”平铺颜色列表？

> ID：11578867
> 
> 赞同：62
> 
> 时间：2012-07-20T11:55:52.987
> 
> 标签：windows-8, microsoft-metro

当我查看 Windows 8 安装的开始屏幕时，我看到捆绑的应用程序具有来自某些标准（？）调色板的颜色：IE 和天气具有相同的颜色、商店和 Xbox Live 游戏、人物和音乐、消息传递和地图等. 看起来大多数这些应用程序之间没有任何逻辑联系。然而，他们的瓷砖共享的颜色很可能来自一些标准化的调色板。

但是，当我们在 Visual Studio 中创建 Metro 应用程序时，背景颜色在自由格式文本字段中预设为 #464646。所以我想知道是否有一些预定义颜色的“官方”列表可以用来让我们自己的图块“原生”到 Windows 8？

显然，我可以截屏并从捆绑的瓷砖中选择一种颜色，但必须有更好的方法，到目前为止我还没有找到它。

编辑：显然你甚至不能从截图中选择颜色，因为操作系统会自动应用渐变：

> 如果您在图像中使徽标本身周围的空间透明，则应用的品牌颜色（在清单中声明）将通过预先应用的渐变显示出来，作为 Windows 8 Release Preview 外观的一部分。 [http://msdn.microsoft.com/en-us/library/windows/apps/hh465403.aspx#using_default_tiles](http://msdn.microsoft.com/en-us/library/windows/apps/hh465403.aspx#using_default_tiles)

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2012-07-20T12:26:47.280

[在https://skydrive.live.com/view.aspx?resid=40CFFDE85F1AB56A!1284](https://skydrive.live.com/view.aspx?resid=40CFFDE85F1AB56A!1284)幻灯片 55上查看我的 Metro 设计指南演示文稿

颜色是：

```
PURPLE
RGB 162 0 255
A200FF

MAGENTA
RGB 255 0 151
FF0097

TEAL
RGB 0 171 169
00ABA9

LIME
RGB 140 191 38
8CBF26

BROWN
RGB 160 80 0
A05000

PINK
RGB 230 113 184
E671B8

ORANGE
RGB 240 150 9
F09609

BLUE
RGB 27 161 226
1BA1E2

RED
RGB 229 20 0
E51400

GREEN
RGB 51 153 51
339933 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-09-01T07:02:52.573

引用的演示文稿中的颜色实际上是 Windows Phone 主题颜色。Windows 8 核心颜色与手机颜色不同。我刚刚发布了一篇关于 Windows 8 中磁贴和开始屏幕颜色的博文。您可能会发现它很有用。[http://www.creepyed.com/2012/09/windows-8-colors-hex-code/](http://www.creepyed.com/2012/09/windows-8-colors-hex-code/)。我希望它有帮助！

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-28T11:05:16.930

真是好项目。具有所有 Windows 8 颜色。 [http://metrocolours.softwareportalplus.com/](http://metrocolours.softwareportalplus.com/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-08-12T07:50:41.720

很抱歉发布到旧帖子，但我想许多来自搜索引擎的人会发现这很有用。这是我在为我的客户创建“地铁灵感”设计时发现的地铁颜色的一个很好的资源。

[http://colorlib.com/etc/metro-colors](http://colorlib.com/etc/metro-colors)

所有颜色和颜色代码都在那里，包括 HEX、RGB、CMYK 等。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-05-29T21:27:31.207

如果您愿意，可以使用 Windows Phone 8 的官方列表：http:
[//msdn.microsoft.com/en-us/library/windowsphone/develop/ff402557 (v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff402557%28v=vs.105%29.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-01T19:06:09.237

```
<style>
.Color-Purple {background: #8C0095 }
.Color-Purple:hover {background: #A700AE }

.Color-DarkPurple {background: #5133AB }
.Color-DarkPurple:hover {background: #643EBF }

.Color-Teal {background: #008299 }
.Color-Teal:hover {background: #00A0B1 }

.Color-Orange {background: #D24726 }
.Color-Orange:hover {background: #DC572E }

.Color-Blue {background: #2672EC }
.Color-Blue:hover {background: #2E8DEF }

.Color-SkyBlue {background: #094AB2 }
.Color-SkyBlue:hover {background: #0A5BC4 }

.Color-Red {background: #AC193D }
.Color-Red:hover {background: #BF1E4B }

.Color-Green {background: #008A00 }
.Color-Green:hover {background: #00A600 }

.Color-Yellow {background: #e8be1b }
.Color-Yellow:hover {background: #f7d240 }
</style> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-09-16T05:11:27.590

我知道这是一个老问题......但仍然想贡献.. [***这***](http://janne.rautiola.fi/portfolio/metro-theme-colors/)是瓷砖和瓷砖颜色的链接和视觉表示......

# iphone - 如何在不使用 UIPickerView 的情况下为 iPhone 创建组合框

> ID：11578879
> 
> 赞同：0
> 
> 时间：2012-07-20T11:56:27.243
> 
> 标签：iphone, combobox

我想为我们网站上的 iPhone 应用程序创建一个组合框。我搜索了很多，但每个人都说要使用选择器。我想使用与 Web 组合框相同的 UI，那么有没有办法在 iPhone 应用程序中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T12:01:36.287

只需在该表视图下方创建一个带有按钮的自定义视图。设置tableview的宽度类似于按钮的宽度。

在按钮的事件选择或取消选择表视图。并在tableview中加载所需的数据。

使用 CALyer 和其他 Core-graphics API，您可以根据您的要求自定义表格视图的 UI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T12:04:48.927

这是您正在寻找[的开源实现。](http://www.cocoacontrols.com/platforms/ios/controls/combobox-for-uitableview)该站点有很多有用的开源控件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T12:05:22.603

您可以使用 TableView 并展开/折叠单元格。

这里有些例子...

[展开折叠 UITableViewCell](https://stackoverflow.com/questions/5190527/expand-collapse-uitableviewcell/5190589#5190589)

和这里...

[http://www.cocoanetics.com/2011/03/expandingcollapsing-tableview-sections/](http://www.cocoanetics.com/2011/03/expandingcollapsing-tableview-sections/)

# sql - 视图嵌套查询中的计算列

> ID：11578882
> 
> 赞同：1
> 
> 时间：2012-07-20T11:56:37.180
> 
> 标签：sql, sql-server, xml, sql-server-2008

我有一个表，其中的`nvarchar(max)`列可能包含已知结构的 xml。我想解析它以执行一些聚合，因此需要过滤掉“坏”条目。这是测试用例：

```
create table TestTable ([Message] nvarchar(max))
insert into TestTable ([Message]) values 
    ('<root m="1"/>'),
    ('<root m="7"/>'),
    ('<rooo')
go

set quoted_identifier on
go   

create view TestView as
select data.value('(/root/@m)[1]', 'int') as MyValue
from (
    select cast([Message] as xml) as data
    from (
        select [Message] from dbo.TestTable where [Message] like '<root%>'
    ) as T1
) as T2
where data.exist('/root') = 1
go

select * from TestView 
```

这会产生：

> 消息 9400，级别 16，状态 1，第 1 行 XML 解析：第 1 行，字符 5，输入意外结束

我不明白为什么，因为如果我运行嵌套查询：

```
 select cast([Message] as xml) as data
    from (
        select [Message] from dbo.TestTable where [Message] like '<root%>'
    ) as T1 
```

它完美地返回 2 个有效行。为什么？？

ps Microsoft SQL Server 2008 (SP3) - 10.0.5500.0 (X64) Sep 21 2011 22:45:45 版权所有 (c) 1988-2008 Microsoft Corporation Express Edition (64-bit) o​​n Windows NT 6.1 (Build 7601: Service Pack 1 )

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T14:00:36.627

您的问题不在 select 子句中，而是在 where 子句中：

```
where data.exist('/root') = 1 
```

我怀疑你在想：“啊哈！如果 xml 格式不正确，那么这将返回 0 或 NULL”。不，这个函数——与其他 xml 函数一样——需要有效的 xml。或者它得到一个错误。

您可能对[SQL Server 感兴趣：使用 XML 进行内联条件转换？](https://stackoverflow.com/questions/1424164/sql-server-inline-conditional-convert-with-xml)在 SQL Server 中，[确定给定字符串是否为有效 XML 的最佳方法是什么？](https://stackoverflow.com/questions/5381864/ms-sql-server-what-is-the-best-way-to-determine-if-a-given-string-is-a-valid-xm).

似乎没有一种简单的方法可以做你想做的事。但是，您也许可以对原始字符串进行简单检查，看看它是否是合理的 xml。例如，以下检查是否存在相同数量的“<”和“>”：

```
select (case when len(replace(val, '<', '')) = len(replace(val, '>', ''))
             then 'MAYBE OKAY'
             else 'NOPE'
        end)
from (select '<badness' as val) t 
```

# mysql - 需要选择前 10 人 SQL

> ID：11578887
> 
> 赞同：4
> 
> 时间：2012-07-20T11:56:46.517
> 
> 标签：mysql, sql

我需要 MySQL 的 SQL 查询来选择关注者最多的前 10 人

**我的桌子**

```
编号 | 用户 ID | follow_id
1 3 6
2 3 7
3 4 6
4 5 6
5 7 3
6 9 7

```

从 id 为 6 的示例用户有 3 次跟随，7->2 和 3->1，所以 TOP 10 将是

用户 ID 为 6,7,3 ...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-20T12:02:16.243

```
SELECT `follow_id`, COUNT(1) AS `followers`
FROM  `tbl`
GROUP BY `follow_id`
ORDER BY COUNT(1) DESC
LIMIT 10; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T12:01:16.760

您想使用 MySQL [GROUP BY](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)聚合功能

```
SELECT user_id, COUNT(follow_id) AS total_followers
FROM users 
GROUP BY follow_id 
ORDER BY total_followers LIMIT 10; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T12:02:32.160

```
SELECT follow_id,count(id) AS cnt FROM table 
GROUP BY follow_id ORDER BY cnt DESC  LIMIT 10 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-20T12:04:11.153

您可以使用

```
SELECT user_id , COUNT(id) AS count FROM tbl GROUP BY follow_id ORDER BY count DESC LIMIT 10; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-20T12:17:50.320

您需要按 follow_id 对结果进行分组，然后计算该组中有多少结果，并按每组的结果数以降序对其进行排序，然后定义您希望将其限制为仅 10 个结果，这可以通过使用 LIMIT 0,10

以下查询在 MySQL 5 中完美运行

```
SELECT follow_id, COUNT(follow_id) AS nr
FROM test.testtable
GROUP BY follow_id
ORDER BY nr DESC
LIMIT 0,10 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-20T12:02:49.287

尝试这样的事情：

```
select follow_id
from myTable
group by follow_id
order by count(user_id)
Limit 10 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-20T11:59:40.803

```
SELECT    follow_id,
          COUNT(user_id) AS number_of_followers
    FROM  table
    GROUP BY follow_id
    ORDER BY number_of_followers DESC
    LIMIT 10; 
```

# c# - C#逻辑内存配置视图

> ID：11578888
> 
> 赞同：1
> 
> 时间：2012-07-20T11:56:50.277
> 
> 标签：c#, memory

如何查看逻辑内存配置？

```
private void button1_Click(object sender, EventArgs e)
    {
        ObjectQuery winQuery = new ObjectQuery("SELECT * FROM Win32_LogicalMemoryConfiguration");
        ManagementObjectSearcher searcher = new ManagementObjectSearcher(winQuery);
        foreach (ManagementObject item in searcher.Get())
        {
            textBox1.Text =("Total Space = " + item["TotalPageFileSpace"]);
            textBox2.Text = ("Total Physical Memory = " + item["TotalPhysicalMemory"]);
            textBox3.Text = ("Total Virtual Memory = " + item["TotalVirtualMemory"]);
            textBox4.Text = ("Available Virtual Memory = " + item["AvailableVirtualMemory"]);
        }
    } 
```

在这段代码中似乎不起作用。并且编译没有错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T12:06:49.840

根据[微软](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394181%28v=vs.85%29.aspx)

> Win32_LogicalMemoryConfiguration WMI 类不再可用于 Windows Vista。

文章建议您使用 ，`Win32_OperatingSystem`但最好使用 `Process.GetCurrentProcess()`.

# android - 在 ICS 中使用相机拍摄

> ID：11578889
> 
> 赞同：1
> 
> 时间：2012-07-20T11:57:03.953
> 
> 标签：android, android-intent, camera

在我的应用程序中，使用 Gingerbread，这段代码有效：

```
Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
startActivityForResult(intent, CAMERA); 
```

但是在 ICS（我尝试过不同的 ROM）中，使用

```
Uri selectedImageUri = data.getData(); 
```

返回空值。

我怎样才能使第一个代码工作？

提前致谢

.

PS：我找到了这个解决方案：

```
File dir = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM);
intent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(new File(dir, "avatar.jpeg"))); 
```

但是如果设备没有存储扩展呢？另外我不需要保存图像。

# tcp - 如何在 VB6 中打开打印机的 TCP/IP 端口

> ID：11578890
> 
> 赞同：1
> 
> 时间：2012-07-20T11:57:15.843
> 
> 标签：tcp, vb6, tcp-ip, epson

我想知道是否有人知道如何使用 Visual Basic 6 连接到带有 TCP/IP 接口的热敏打印机。它是将 ESC/POS 命令发送到打印机，这样我就可以直接控制它而无需使用驱动程序。

问题出在第一行；如何与打印机建立连接并提供打印机的 ip 和其他东西，以便主机 pc/sender pc 与打印机顺利通信？

```
open
PRINT #1, CHR$(&H1B);"@"; 'Initializes the printer (ESC @)
PRINT #1, CHR$(&H1B);"a";CHR$(1);'Specifies a centered printing position (ESC a)
PRINT #1, CHR$(&H1B);"!";CHR$(0); 'Specifies font A (ESC !)
PRINT #1, "January 14, 2002  15:00"; 
PRINT #1, CHR$(&H1B);"d";CHR$(3); 'Prints and 3 line feeding (ESC d)
PRINT #1, CHR$(&H1B);"a";CHR$(0); 'Selects the left print position (ESC a)
PRINT #1, CHR$(&H1B);"!";CHR$(1); 'Selects font B
PRINT #1, "TM-U210B               $20.00";CHR$(&HA);
PRINT #1, "TM-U210D               $21.00";CHR$(&HA);
PRINT #1, "PS-170                     $17.00";CHR$(&HA);
PRINT #1, CHR$(&HA);'Line feeding (LF)
PRINT #1, CHR$(&H1B);"!";CHR$(17); 'Selects double-height mode
PRINT #1, "TOTAL                  $58.00"; CHR$(&HA);
PRINT #1, CHR$(&H1B);"!";CHR$(0); 'Cancels double-height mode
PRINT #1, "------------------------------";CHR$(&HA);
PRINT #1, "PAID                   $60.00";CHR$(&HA);
PRINT #1, "CHANGE             $ 2.00";CHR$(&HA);
PRINT #1, CHR$(&H1D);"V";CHR$(66);CHR$(0); 'Feeds paper & cut

’Drawer Kick (ESC p)

PRINT #1, CHR$(&H1B); CHR$(&H70); CHR$(&H0); CHR$(60); CHR$(120); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T09:24:23.650

您需要使用套接字，很可能是通过VB附带的[VB Winsock 控件。](http://msdn.microsoft.com/en-us/library/aa228119%28v=vs.60%29.aspx)不过，这远非您现在所拥有的直接转换。

有关详细信息，请参阅MSDN 中的[使用 Winsock 控件页面或在线各种](http://msdn.microsoft.com/en-us/library/aa733709%28VS.60%29.aspx)[教程](http://tcp.oflameron.com/)。

# uitableview - TableView 作为带有导航控制器的子视图

> ID：11578894
> 
> 赞同：0
> 
> 时间：2012-07-20T11:57:31.383
> 
> 标签：uitableview, ios5, uinavigationcontroller, subview

我想要一个包含一些子视图（标签、图像等）的视图（五个标签栏之一），包括一个表格视图，这样表格视图将只占据屏幕的一半（类似于这个线程[Add tableview as subview查看？](https://stackoverflow.com/questions/6575106/add-tableview-as-subview-to-view)）。我已将视图控制器设置为 tableview 委托和数据源，但如何使用此表视图 (uinavigationcontroller) 导航？

澄清：我开始使用一个基于标签栏的应用程序，并希望有一个标签栏视图在顶部有一些标签，在该视图的下半部分有一个表格视图。我自己解决了，见下文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T14:04:09.637

这当然比我想象的要简单。我设置了一个带有一些标签的标签栏控制器（带有单独的视图控制器）。我在导航控制器中嵌入了一个视图控制器（使用菜单编辑器——嵌入——导航控制器）。将标签和 uitableview（通过 Storyboard）添加到视图并连接标签和表格视图的出口，以及将视图控制器设置为委托和数据源（UITableViewDelegate、UITableViewDataSource）。

# c# - 仅从共享点列表中获取自定义字段

> ID：11578901
> 
> 赞同：3
> 
> 时间：2012-07-20T11:58:04.487
> 
> 标签：c#, powershell, sharepoint-2010

谁能告诉我如何从共享点列表中获取自定义字段？我不想让所有字段都像隐藏一样，只是自定义字段或默认视图中的字段。最终结果是将每个字段的 schemaxml 保存在 xml 文件中。

我正在尝试这样做：

```
SPfieldCollection fields = list.DefaultView.ViewFields
foreach(SPField field in fields)
{
....
} 
```

Powershell 或 C# 将非常有帮助。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T22:00:37.040

您要检查的属性是**Hidden**、**ReadOnlyField**。如果其中任何一个为**TRUE**，则​​表示该字段是“系统字段”。

然后您可以通过其内部名称检查（和过滤）剩余字段 - 附件、标题、...。

这是将过滤字段的脚本：

```
$w = get-spweb http://localhost
$l = $w.Lists["Custom list"]
$l.Fields | ? { $_.Hidden -eq $false -and $_.ReadOnlyField -eq $false -and $_.Title -ne "Attachments" } | select title 
```

# maven - 使用 Maven 将 Dll 打包到 Jar 中 - 单一目标

> ID：11578903
> 
> 赞同：12
> 
> 时间：2012-07-20T11:58:11.613
> 
> 标签：maven, maven-2, m2e, eclipse-juno

我在我的 maven 项目中添加了一个 DLL 作为依赖项，如下所示：

```
<dependency>
  <groupId>com.test.dll</groupId>
  <artifactId>myDll</artifactId>
  <version>0.1</version>
  <type>dll</type>
</dependency> 
```

当我尝试执行`maven:install`

它给了我这个错误：

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-assembly-plugin:2.2-   
beta-5:single (jar-with-dependencies) on project testApp: Failed to create 
assembly:    Error adding file-set for 'com.test.dll:myDll:dll:0.1' to archive: Error 
 adding archived file-set. PlexusIoResourceCollection not found for: C:\Users\USER\.m2
 \repository\com\test\dll\myDll\0.1\myDll-0.1.dll: No such archiver: 'dll' 
```

我在这里做错了什么？

**更新**

```
 <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-jar-plugin</artifactId>   
        <executions>
        <execution>
        <goals>
            <goal>sign</goal>
        </goals>
        </execution>
       </executions>
       <configuration>
        <keystore>src/main/keystore/mykey.keystore</keystore>
        <alias>aliasname</alias>
        <storepass>passw0rd</storepass>                  
        <verify>true</verify>

    </configuration>        
    </plugin>               
    <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-assembly-plugin</artifactId>      
        <executions>
            <execution>
                <id>jar-with-dependencies</id>
                <phase>prepare-package</phase>
                <goals>
                    <goal>single</goal>
                </goals>       
            <configuration>
            <archive>
                <manifest>

                </manifest>
            </archive>              
            <descriptorRefs>
                <descriptorRef>jar-with-dependencies</descriptorRef>
            </descriptorRefs>           
            <appendAssemblyId>false</appendAssemblyId>
        </configuration>
    </execution>     
  </executions>      
  </plugin>   
 </plugins> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-30T19:42:10.353

这里的问题是`jar-with-dependencies`描述符。描述符将所有依赖[项解包](http://maven.apache.org/plugins/maven-assembly-plugin/descriptor-refs.html#jar-with-dependencies)到一个目录中，并将该目录打包到一个新的 JAR 文件中。但是，它无法解压缩 DLL 文件（即“没有这样的归档程序”错误消息）。要使其正常工作，您需要定义自己的程序集描述符：

```
<assembly xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2 http://maven.apache.org/xsd/assembly-1.1.2.xsd">

  <id>assembly-with-dll</id>
  <formats>
    <format>jar</format>
  </formats>
  <includeBaseDirectory>false</includeBaseDirectory>
  <dependencySets>
    <!-- package the regular dependencies -->
    <dependencySet>
      <outputDirectory>/</outputDirectory>
      <useProjectArtifact>true</useProjectArtifact>
      <unpack>true</unpack>
      <scope>runtime</scope>
      <!-- exclude the DLL -->
      <excludes>
        <exclude>com.example:my-dll</exclude>
      </excludes>
    </dependencySet>
    <!-- package the DLLs -->
    <dependencySet>
      <outputDirectory>/</outputDirectory>
      <includes>
        <include>com.example:my-dll</include>
      </includes>
    </dependencySet>
  </dependencySets>
</assembly> 
```

如果上面的描述符驻留在 中`src/main/assembly`，maven-assembly-plugin 的配置如下所示：

```
<build>
  <plugins>
    <plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-assembly-plugin</artifactId>
      <executions>
        <execution>
          <id>jar-with-dependencies</id>
          <phase>prepare-package</phase>
          <goals>
            <goal>single</goal>
          </goals>
          <configuration>
            <descriptor>src/main/assembly/assembly.xml</descriptor>
            <appendAssemblyId>false</appendAssemblyId>
          </configuration>
        </execution>
      </executions>
    </plugin>
  </plugins>
</build> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T08:47:38.983

这里有一条信息：[Maven Dll Dependency Problem](https://stackoverflow.com/questions/6898652/maven-dll-dependency-problem)。要解决此问题，请从您的程序集中排除 dll：

```
<excludes>
    <exclude>*:dll*</exclude>
</excludes> 
```

上次我必须创建一个带有依赖项的可执行 jar，我将它们从 jar 中取出，放在 lib 目录中。DLL 必须是：

*   在应用程序类路径中（如服务器的 server/lib）
*   或在操作系统类路径中（例如 C:\Windows\system32）

在阅读了你的 pom 和依赖文件集之后，我可能会更准确:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T04:23:47.540

为了补充 Stefan 的回答，我认为您不想为`jar-with-dependencies`您的这个项目进行打包。您应该考虑使用其中一种[bin](http://maven.apache.org/plugins/maven-assembly-plugin/descriptor-refs.html#bin)包装（如 .zip 或 tar.gz）

# sql-server - SQL Server - 如何将一个多元素 XML 分解为插入表中的单元素 XML 值？

> ID：11578904
> 
> 赞同：2
> 
> 时间：2012-07-20T11:58:13.017
> 
> 标签：sql-server, sql-server-2008-r2

`@x.nodes('...')`因为我是 XQuery 的新手，所以我正在与之抗争。我确实`@x`通过以下方式构造了 XML 变量：

```
CREATE TABLE tab (a int, b int, c int);
GO

INSERT INTO tab (a, b, c) VALUES (1, 11, 111);
INSERT INTO tab (a, b, c) VALUES (2, 22, 222);
INSERT INTO tab (a, b, c) VALUES (3, 33, 333);
INSERT INTO tab (a, b, c) VALUES (4, 44, 444);
GO

DECLARE @x XML = (SELECT * FROM tab FOR XML RAW, TYPE); 
```

当它的内容显示出来时，它看起来像：

```
<row a="1" b="11" c="111" />
<row a="2" b="22" c="222" />
<row a="3" b="33" c="333" />
<row a="4" b="44" c="444" /> 
```

即单个多行字符串。如何将单个多元素 XML 值*分解*为目标表中的多个单元素值？（我知道官方的[节点（）方法（xml数据类型）](http://msdn.microsoft.com/en-us/library/ms188282%28v=sql.105%29)文档页面，但我做错了。）

```
CREATE TABLE tab2 (e XML);

??? ... @x.nodes('//row') ... ??? 
```

谢谢，彼得

PS 这个问题与 Service Broker 松散相关[——如何从 XML 消息中提取行？](https://stackoverflow.com/questions/11563452/service-broker-how-to-extract-the-rows-from-the-xml-message)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T12:13:19.630

好的 - 所以你有一个包含你发布的 XML 的 XML 变量 - 你需要把它分解成它自己的单独的位吗？

尝试这样的事情：

```
SELECT
    value_a = c.value('(@a)[1]', 'int'),
    value_b = c.value('(@b)[1]', 'int'),
    value_c = c.value('(@c)[1]', 'int') 
FROM @x.nodes('/row') AS T(c) 
```

这给了我一个输出：

![在此处输入图像描述](../Images/00f10305f2863c679946d440713e8557.png)

那是你要找的吗？

**更新：**好的，如果我理解正确，**这**就是你想要的：

```
SELECT
    c.query('.')
FROM @x.nodes('/row') AS T(c) 
```

输出：

![在此处输入图像描述](../Images/6cb085e95150a49d4a0ec4e0e4996e0b.png)

# android - 在两个 nfc 设备之间开始仿真，我正在使用该代码但没有任何反应，该怎么办？

> ID：11578907
> 
> 赞同：1
> 
> 时间：2012-07-20T11:58:16.717
> 
> 标签：android, nfc

我正在使用该代码，但没有任何反应，此代码有什么问题。它正在运行并且没有显示任何错误。我必须将标签从一台设备共享到另一台设备。

请分享一些代码，用于将标签从一台设备共享到另一台设备。

```
package com.app.app.nfctag;

    import java.nio.charset.Charset;

    import android.app.Activity;
    import android.app.PendingIntent;
    import android.content.Intent;
    import android.content.IntentFilter;
    import android.nfc.NdefMessage;
    import android.nfc.NdefRecord;
    import android.nfc.NfcAdapter;
    import android.os.Bundle;
    import android.os.Parcelable;
    import android.widget.Button;
    import android.widget.TextView;
    import android.widget.Toast;

    public class DemoNFCtagActivity extends Activity {

          NdefMessage msg;

        @Override
        protected void onResume() {
            // TODO Auto-generated method stub
            super.onResume();
             if (NfcAdapter.ACTION_NDEF_DISCOVERED.equals(getIntent().getAction())) {
                    processIntent(getIntent());
                }
               mNfcAdapter.enableForegroundNdefPush(this,msg );

        }
         @Override
            public void onNewIntent(Intent intent) {
                // onResume gets called after this to handle the intent
                setIntent(intent);
            }

        NfcAdapter mNfcAdapter;
        TextView textView;

        Button btnEmulation;
        PendingIntent mNfcPendingIntent;
        IntentFilter[] mNdefExchangeFilters;
        NdefMessage message;
        /** Called when the activity is first created. */
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);

           // TextView textView = (TextView) findViewById(R.id.textView);
            // Check for available NFC Adapter
            mNfcAdapter = NfcAdapter.getDefaultAdapter(this);
            if (mNfcAdapter == null) {
                Toast.makeText(this, "NFC is not available", Toast.LENGTH_LONG).show();
                finish();
                return;
            }
            // Register callback
        //    mNfcAdapter.setNdefPushMessageCallback(this, this);

            String text = ("Beam me up, Android!\n\n" +
                    "Beam Time: " + System.currentTimeMillis());
             msg = new NdefMessage(
                    new NdefRecord[] { createMimeRecord(
                            "application/com.example.android.beam", text.getBytes())
             /**
              * The Android Application Record (AAR) is commented out. When a device
              * receives a push with an AAR in it, the application specified in the AAR
              * is guaranteed to run. The AAR overrides the tag dispatch system.
              * You can add it back in to guarantee that this
              * activity starts when receiving a beamed message. For now, this code
              * uses the tag dispatch system.
              */
              //,NdefRecord.createApplicationRecord("com.example.android.beam")
            });

        }

        public NdefRecord createMimeRecord(String mimeType, byte[] payload) {
            byte[] mimeBytes = mimeType.getBytes(Charset.forName("US-ASCII"));
            NdefRecord mimeRecord = new NdefRecord(
                    NdefRecord.TNF_MIME_MEDIA, mimeBytes, new byte[0], payload);
            return mimeRecord;
        }

        void processIntent(Intent intent) {
            textView = (TextView) findViewById(R.id.textView);
            Parcelable[] rawMsgs = intent.getParcelableArrayExtra(
                    NfcAdapter.EXTRA_NDEF_MESSAGES);
            // only one message sent during the beam
            NdefMessage msg = (NdefMessage) rawMsgs[0];
            // record 0 contains the MIME type, record 1 is the AAR, if present
            textView.setText(new String(msg.getRecords()[0].getPayload()));
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T16:32:39.760

试试这个[Android 样板项目](http://code.google.com/p/ndef-tools-for-android/downloads/list)- 它执行以下操作

1.  [检测](http://code.google.com/p/ndef-tools-for-android/source/browse/ndeftools-boilerplate/src/org/ndeftools/boilerplate/NfcDetectorActivity.java)，然后
2.  [读取](http://code.google.com/p/ndef-tools-for-android/source/browse/ndeftools-boilerplate/src/org/ndeftools/boilerplate/NfcReaderActivity.java)或[写入](http://code.google.com/p/ndef-tools-for-android/source/browse/ndeftools-boilerplate/src/org/ndeftools/boilerplate/NfcWriterActivity.java)内容

另请参阅图形 NDEF 编辑器的[NFC Eclipse 插件](http://code.google.com/p/nfc-eclipse-plugin/)项目 - 附带一个可读取和写入标签的实用程序应用程序，还具有 NFC 阅读器集成[:-)](http://play.google.com/store/apps/details?id=com.antares.nfc)

# c# - 如何使元素拉伸其父元素的整个宽度

> ID：11578911
> 
> 赞同：0
> 
> 时间：2012-07-20T11:58:40.103
> 
> 标签：c#, silverlight, windows-phone-7, silverlight-4.0

在我的 Windows Phone 应用程序中，我有这样的结构：

```
 <Grid Width="460" Height="77" Margin="-10,0,0,0" Background="#FFD20000" HorizontalAlignment="Center">
                        <StackPanel Width="Auto"   Orientation="Horizontal" HorizontalAlignment="Center" >
                            <ToggleButton x:Name="ToggleButton_A" Content="Info" Width="150" Style="{StaticResource ToggleA}" Click="ToggleButton_A_Click"  />
                        </StackPanel>
                    </Grid> 
```

就我而言，我在容器的中心有一个按钮。但我需要让它填满它的父容器的所有位置，我该如何实现呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T12:01:49.837

只需移除堆栈面板，ToggleButton 就会填满所有网格。一切都是为了使用正确的容器来完成正确的任务。

# php - CodeIgniter - 使用不同于当前语言的另一种语言加载视图部件

> ID：11578912
> 
> 赞同：1
> 
> 时间：2012-07-20T11:58:44.060
> 
> 标签：php, codeigniter

我目前正在尝试将视图部分准备为变量，但我必须以应用程序的不同语言加载视图部分。

我有我的语言文件夹集（法语和英语），在这里我尝试了但没有成功：

```
// Current language is french
$this->lang->load('[lang_file]', 'english');
$variable = $this->load->view('[path_to_view]', true);
$this->lang->load('[lang_file]'); 
```

首先，是否可以加载另一种语言的视图而不是当前的视图？

其次，如果是，我需要做什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T12:24:26.893

也许在加载视图文件之前临时将语言设置为英语就可以了。试试这个：

```
$this->config->set_item('language', 'english');
$variable = $this->load->view('[path_to_view]', true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T12:24:52.703

如果我没记错的话，你应该使用`$this->lang->load()`，但也许你的也可以。

基本上，是的，它有效。lang 键将被覆盖，并应用新的键。

你有`french`默认语言`config/config.php`吗？

更重要的是，您的视图是否在运行之前获取视图使用的数据`$this->load->language('[lang_file]', 'english');`？可能有一些传递的错误`form_validation`和类似的错误会得到“错误”的语言。

# asp.net - 发布没有按钮的表单

> ID：11578918
> 
> 赞同：1
> 
> 时间：2012-07-20T11:59:07.227
> 
> 标签：asp.net, forms

我正在探索 Apple 网站上的搜索框，发现它没有输入 type="submit" 来发布表单，即使禁用了 Javascript。

```
<form action="/search/" method="post" class="search" id="g-search">
    <div class="sp-label">
        <label for="sp-searchtext">Search</label>
        <input type="text" name="q" id="sp-searchtext" accesskey="s">
     </div>
 </form> 
```

从来没有真正探索过它，我认为它意味着您可以发布表单而无需提交按钮，它只依赖于用户按下返回键。

两个问题：1）这是否兼容所有浏览器？那么在 IE 7 中按下 return 仍然有效吗？2) 有没有办法在不使用 asp:button 的情况下在 ASP.NET 中执行此操作？我可能会将它放在一个占位符中（我通常会使用 defaultButton 来允许页面上的多个表单），但如果我可以完全摆脱该按钮，那将是一个加号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T12:03:25.900

是的，当然可以按照您的意愿进行操作。

更简单的事情是有一个 onclick 事件调用一个执行提交的函数，如下所示：

查询：

```
$('#id_of_form').submit() 
```

javascript:

```
document.name_of_my_form.submit(); 
```

或者

```
document.getElementById('id_of_my_form').submit(); 
```

很简单 ：）

# iphone - 必应图像搜索 API 自动更正功能...？

> ID：11578919
> 
> 赞同：0
> 
> 时间：2012-07-20T11:59:08.693
> 
> 标签：iphone, objective-c, json, bing-api

我正在尝试使用 BING 的图像搜索 api，但问题是当我拼错某些内容时，它会自动更正，并且不会告诉我“嘿，我们已经自动更正了您的查询！” ，我想知道我的查询是否已被自动更正以及他们使用的替换词是什么......以前有没有人这样做过......？

这是我正在使用的查询..注意“Aemrica”被故意拼错了，但它仍然给了我“America”的结果

[https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Image?Query=%27Aemrica%27&](https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Image?Query=%27Aemrica%27&) $top=50&$format=JSON

但没有说明这个词已被替换。有没有办法解决它..？

我正在使用 iPhone 的响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T12:24:33.850

~~不，没有办法解决这个问题。甚至 SearchResponse.Query.SearchTerms 响应参数似乎仍然是拼写错误的版本。~~

~~如果这对您来说是个大问题，我建议您联系 Microsoft。~~

编辑：如果您升级到[基于 Azure 市场的新 Bing 搜索 API](https://datamarket.azure.com/dataset/bing/search#schema)，您现在可以通过首先调用 SpellingSuggestions 端点来获取此数据。

# php - 将外部域网页中的某个 HTML 区域加载到 div 中

> ID：11578922
> 
> 赞同：0
> 
> 时间：2012-07-20T11:59:20.283
> 
> 标签：php, jquery, ajax, web, screen-scraping

我目前正在为一家公司设计一个网站，该公司使用外部网站来显示有关其客户的信息。目前，他们的旧网站只是放置了一个指向每个客户的外部资料的链接。但是，通过这次重建，我想知道是否有任何方法可以将外部站点的特定部分加载到他们的新页面上。

我已经完成了我的研究，我发现使用 jQuery 和 AJAX（带有一点 mod）是可能的，但是所有教程都涉及从外部站点提取的 div 标签，然后加载到新的 div 标签上页。

这是我的问题：在查看了外部源的源代码后，我想要的 HTML 行不包含在命名的 DIV 中（除了主包装，我无法加载它！）

我需要的标签字面意思是：`<p class="currentAppearance"> data </p>`

每个配置文件都在不同的行上，所以我不能只加载第 200 行并希望最好。

有没有人有任何解决方案（最好使用 php）在外部页面上搜索该标签，然后将特定标签加载到 div 中？

我希望我已经清楚我对所有这些后端的东西都很陌生！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T12:07:44.767

首先，我将使用从网页中获取内容： [http ://www.php.net/manual/en/curl.examples-basic.php](http://www.php.net/manual/en/curl.examples-basic.php)

```
$url = 'http://www.some-domain.com/some-page';
$curl = curl_init($url);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, TRUE);
$htmlContent = curl_exec($curl);
curl_close($curl); 
```

然后使用`DomDocument`(http://ca3.php.net/manual/en/book.dom.php) 您将能够根据其 ID 访问正确的 div。

```
$doc = new DOMDocument();
$doc->loadHTML($htmlContent);
foreach ($pElements as $pEl) {
  if ($pEl->getAttribute('class') == 'currentAppearance') {
    $pContent =  $pEl->nodeValue;
  }
} 
```

`$pContent`现在设置了带有类的段落的内容`currentAppearance`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T12:06:44.260

您可以使用[xpath](http://www.w3schools.com/xpath/xpath_syntax.asp)语法将其从文档中抓取出来。

# c# - 变量 在 Linq 中选择项目以及如何通过 linq 中的变量访问属性

> ID：11578925
> 
> 赞同：0
> 
> 时间：2012-07-20T11:59:22.223
> 
> 标签：c#, linq

我有一个非常简单的场景：

我有一个结构表：

```
TableTest:
   - col1
   - col2
   - col3
   - col4 
```

现在我有一个 UI，用户可以在其中从这些列中进行选择（ListBox 中的 columnNames 或 Column Names 的 checkboxList）和一个按钮。

现在，如果用户选择前两列，那么结果集应该包含只有这两列的行。如果用户选择前三列，则结果集应包含只有这三列的行。

即我想要类似于以下场景的东西

```
 MetaTable userMeta = db.Mapping.GetTable(typeof(ThreatMaster));
        var columnNames = userMeta.RowType.PersistentDataMembers;

        IList<string> selectedColumns = columnNames.Where(c=>!c.IsAssociation)
                                       .Select(c=>c.Name).ToList(); 

        objDataContext.TableTests.Select(selectedColumns); 
```

还。我已经完成了`objDataContext.TableTests`，如果我想提供来自不同表的列怎么办？

:D:D..在 Linq 中效率不高。

请看看我的问题是否有意义或有效，或者我只是错过了一些东西，一些基础知识并朝着错误的方向前进

我该怎么做？我在这里经历了[这个](https://stackoverflow.com/questions/5483571/use-variable-value-as-field-with-linq%20/%22this%22)和[这个](https://stackoverflow.com/questions/8770897/linq-access-property-by-variable)问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T12:01:30.283

```
IList<string> selectedColumns = columnNames.Where(c=>!c.IsAssociation)
                                           .Select(c=>c.Name).ToList(); 
```

但是，我看到您想将此结果与另一个选择一起使用。我推荐你使用动态 LINQ，[这里](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)有 Scott 的介绍

# jsf-2 - 在数据表中的 selectOneMenu(Dropdown) 更改行级别更改输入文本的颜色

> ID：11578926
> 
> 赞同：0
> 
> 时间：2012-07-20T11:59:26.057
> 
> 标签：jsf-2, primefaces

我在我的应用程序中使用 primefaces(v.3.0) 数据表。在 Datatable 中有两列，一列是 inputtext，另一列是 SelectOneMenu(dropdown)。

现在我想在某些情况下更改输入文本颜色，例如..

1.如果 SelectOneMenu 值被选为“Single”，输入文本框的颜色将仅为该特定 pID 的“绿色”。

2.如果 SelectOneMenu 值被选为“已婚”，则输入文本框的颜色将仅为该特定 pID 的“红色”。

3.如果 SelectOneMenu 值被选为“离婚”，则输入文本框的颜色将仅为该特定 pID 的“黄色”。

所以我正在尝试这种方式......

```
 <h:form id="form">
<h:panelGrid columns="2" cellpadding="10" id="h">
        <p:dataTable id="table" var="s"
                                value="#{backingBean.arrayList}"
                                widgetVar="empTable" rowKey="#{pt.pID}"
                                paginator="true" rows="15"
style="width: 100%;margin-bottom: 10px;" rowStyleClass="#{s.status}">

                                <f:facet name="header">  
           List of Patients Appointments  
        </f:facet>

                                <p:column headerText="Status" id="t">

                        <p:inputText value="#{s.status}" />

                    </p:column>

                        <p:column headerText="EmployeeAction">
                        <p:selectOneMenu id="scAction" value="#{backingBean.obj.empStatus}"
                                style="width:125px">
                                        <f:selectItem itemLabel="Select" itemValue="" />
                                        <f:selectItems value="#{schedulerBB.scheduleActionSelect}"
                                            itemLabel="#{backingBean.obj.empStatus}"
                                            itemValue="#{backingBean.obj.empStatusID}" />
                                    <p:ajax event="change" listener="#{backingBean.changeColor(s)}"  update=":form" />

                                    </p:selectOneMenu>

                                </p:column>

                        </p:dataTable>
                        </h:panelGrid>
                        </h:form>

In CSS

.Single td:nth-child(1) input {
    background-color: green;
}

.Married td:nth-child(1) input {
    background-color: red;
}

.Divorced td:nth-child(1) input {
    background-color: yellow;
}

In BackingBean:

private Employee obj;

    //Getter setter methods

    public Employee getObj() {
    if(obj==null){
    obj=new Employee();
    }
    return obj;
}

public void setObj(Employee obj) {
    this.obj = obj;
}

public void changeColor(Employee e){

  if(obj.getEmpStatus().equals("1")){  

        EmployeeDAO.updateEmpTable(e.getPID,e.getStatus);

    }

    css
    .Single td:nth-child(1) input {
    background-color: green;
}

.Married td:nth-child(1) input {
    background-color: red;
}

.Divorced td:nth-child(1) input {
    background-color: yellow;
} 
```

我可以在更改特定 pID 的 selectonemenu 时更改输入文本值，但正如您所见，我已经在列级别应用了 inputtextbox 颜色更改逻辑，因此所有列 inputtext 颜色都会更改。

那么如何在行级别应用更改输入文本框颜色的逻辑（即仅适用于特定 ID）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:10:39.843

您可以对匹配条件的行使用不同的样式类。

在您的页面中使用此样式类将根据状态启用：

```
<p:dataTable id="table" var="s" value="#{backingBean.arryList}" widgetVar="EmployeeTable" rowKey="#{s.pID}" paginator="true" rows="15" style="width: 100%;margin-bottom: 10px;" rowStyleClass=#{s.status}>
    <p:column id="st">
        <f:facet name="header">  
            <h:outputText value="Status" />  
        </f:facet>  
        <p:inputText value="#{s.status}" style="width:90px;"/>
    </p:column>

    <p:column headerText="Employee Status">
        <p:selectOneMenu value="#{backingBean.obj.empStatus}" style="width:125px">
            <f:selectItem itemLabel="Select" itemValue="" />
            <f:selectItems value="#{BackingBean.empStatusActionSelect}"
                itemLabel="#{backingBean.obj.empStatus}"
                itemValue="#{backingBean.obj.empStatusID}" />
                <p:ajax event="change" listener="#{backingBean.changeColor}" update="table"/>
        </p:selectOneMenu>
</p:dataTable> 
```

在您的 CSS 中，您需要以下内容：

```
.Single td:nth-child(1) input {
    background-color: green;
}

.Married td:nth-child(1) input {
    background-color: red;
}

.Divorced td:nth-child(1) input {
    background-color: yellow;
} 
```

这样，表格行第一列中的输入元素将获得背景颜色，绿色、红色或黄色。

注意：结果`#{s.status}`必须是“单身”、“已婚”或“离婚”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T06:10:59.033

这里的代码完美地为我工作。

```
 <p:dataTable id="table" var="s" value="#{backingBean.myArraylist}" widgetVar="EmployeeTable" rowKey="#{s.pID}" paginator="true" rows="15" style="width: 100%;margin-bottom: 10px;" >
        <p:column id="st">
            <f:facet name="header">  
                <h:outputText value="Status" />  
            </f:facet>  
            <p:inputText value="#{s.status}" style="width:90px;" style="#{s.color}"/>
        </p:column>

        <p:column headerText="Employee Status">
            <p:selectOneMenu value="#{backingBean.obj.empStatus}" style="width:125px">
                <f:selectItem itemLabel="Select" itemValue="" />
                <f:selectItems value="#{BackingBean.empStatusActionSelect}"
                    itemLabel="#{backingBean.obj.empStatus}"
                    itemValue="#{backingBean.obj.empStatusID}" />
                    <p:ajax event="change" listener="#{backingBean.changeColor}" update="table"/>
            </p:selectOneMenu>
    </p:dataTable> 
```

在Backing bean中以这种方式迭代datatabale arraylist并为inputtext设置颜色。

Delclare Employee 类中的颜色变量及其 getter 和 setter。

```
 myArraylist = myDAO.getEmployeeList();
    for (Employee s : myArraylist) {
                        if(s.getStatus().equals("Single")){
                            s.setColor("background-color : green");
                        }   
                    else if(s.getStatus().equals("Married")){
                            s.setColor("background-color : red");
                        }   
                    else if(s.getStatus().equals("Divorced")){
                            s.setColor("background-color : yellow");
                        }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T06:51:07.303

您可以在数据表上使用 primefaces 的 rowStyleClass 属性。在 rowStyleClass 属性中，您可以使用三元运算符（如您的情况，类似

```
#{backingBean.obj.empStatus eq single? green: blue} 
```

三元运算符的结果应该对应于您已经在该页面上加载的 css 样式类

# java - 为每个不同对象返回不同值的 hashCode() 方法是最有效的方法吗？

> ID：11578928
> 
> 赞同：3
> 
> 时间：2012-07-20T11:59:27.520
> 
> 标签：java, hashcode

我知道为每个对象返回相同的值是低效的，但它是为不同实例返回不同值的最有效方法吗？

如果每个对象都获得不同的 hashCode 值，那么这不就像将它们存储在 ArrayList 中一样吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T12:02:02.403

`hashCode`必须与*一致`equals`*，这是第一要务。如果没有两个对象是相等的，那么这将是可取的。请记住，如果您的对象具有超过 32 位的状态，则理论上不可能提供完美传播的哈希码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T12:05:38.693

不，实际上不是。

假设您的对象将被存储到 HashMap 中（或 Set... 无关紧要，为简单起见，我们将在此处使用 HashMap），您希望 hashCode 方法以均匀分布对象的方式返回结果尽可能。

哈希码对于不相等的对象*应该*是唯一的，尽管您不能保证这总是正确的。另一方面，如果`a.equals(b)`为真，则`a.hashCode() == b.hashCode()`。这被称为[对象契约](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#hashCode%28%29)。

除此之外，还有性能问题。每次两个不同的对象具有相同的 hashCode 时，它​​们都会映射到 HashMap 中的相同位置（也就是它们碰撞）。这意味着 HashMap 实现必须处理这种冲突，这比简单地存储和检索条目要复杂得多。

还有很多算法依赖于值在 Map 中均匀分布的事实，当冲突数量增加时性能会迅速下降（一些算法假设一个完美的哈希函数，这意味着永远不会发生冲突，没有两个不同的值被映射到地图上的相同位置）。

这方面的好例子是概率算法和数据结构，例如[布隆过滤器](http://en.wikipedia.org/wiki/Bloom_filter)（使用一个现在看起来很流行的例子）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T12:14:50.610

您希望 hashCode() 尽可能多样化以避免冲突。如果没有冲突，每个键或元素将单独存储在底层数组中。（有点像 ArrayList）

问题是，即使 hashCode() 不同，您仍然可能会发生冲突。发生这种情况是因为您没有针对每个可能的 hashCode 的存储桶，并且该值必须减小到较小的范围。例如，你有 16 个桶，范围是 0 到 15。它是如何做到的很复杂，但我相信你可以看到，即使所有的 hashCode 都不同，它们仍然会导致冲突（尽管不太可能）

这是拒绝服务攻击的一个问题。通常字符串的冲突率很低，但是您可以故意构造具有相同哈希码的字符串。这个问题给出了一个 hashCode 为 0 的字符串列表 [为什么 String 的 hashCode() 不缓存 0？](https://stackoverflow.com/questions/2310498/why-doesnt-strings-hashcode-cache-0)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T13:13:56.073

HashMap 类的主要数据结构是这样的：

```
Entry[] table; 
```

需要注意的是，Entry 类（它是一个实现 Map.Entry 的静态包保护类）实际上是一个链表样式结构。

当您尝试放置元素时，首先会计算键的哈希码，然后将其转换为存储桶编号。“bucket”是上述数组的索引。

找到存储桶后，将在该存储桶内进行线性搜索以查找确切的键（如果您不相信我，请查看 HashMap 代码）。如果找到，则替换该值。如果不是，则将键/值对附加到该存储桶的末尾。

出于这个原因，hashcode() 值不必是唯一的，但是，它们越独特且分布越均匀，您在桶中均匀分布该值的几率就越大。如果您的 hashcode() 方法为所有实例返回相同的值，它们最终都会在同一个存储桶中，因此将您的 get() 方法呈现为一个长线性搜索，产生 O(N)

值分布得越多，桶就越小，因此线性搜索组件就越小。唯一值将产生恒定时间查找 O(1)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T12:04:27.147

hashCode() 方法不适合在 ArrayList 中放置对象。尽管它每次都会为同一个对象返回相同的值，但两个对象很可能具有相同的哈希码。

因此，在将项目存储在例如 HashMap 中时，在键 Object 上使用 hashCode 方法。

# tridion - 从 Tridion 5.3 发布时出错

> ID：11578930
> 
> 赞同：0
> 
> 时间：2012-07-20T11:59:34.923
> 
> 标签：tridion

我们最近设置了新的 tridion 内容管理服务器以及内容交付服务器（Tridion 5.3）。我们在内容交付中使用 .net。

当我们尝试从内容管理器发布时，我们收到下面提到的错误。

用户 NT AUTHORITY\SYSTEM 的访问被拒绝：目录服务未启用。

谁能建议可能是什么问题。

我们已根据新网址更改了发布目标。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T19:53:27.440

我来猜一猜。您是否已将 SYSTEM 配置为目录服务模拟用户？

# objective-c - 内存警告和崩溃 (ARC) - 如何确定它发生的原因？

> ID：11578934
> 
> 赞同：15
> 
> 时间：2012-07-20T11:59:51.990
> 
> 标签：objective-c, ios, core-graphics, automatic-ref-counting

我最近开始使用 ARC，从那以后我把每一个内存问题都归咎于它。:) 也许，你可以帮助我更好地理解我做错了什么。

我目前的项目与 CoreGraphics 有关 - 图表绘制、带有缩略图的视图等等。我相信使用手动内存管理不会有问题，除了一些僵尸......但到目前为止，每次我尝试创建大量缩略图或重绘更复杂的图表时，应用程序都会崩溃。

在使用 Instruments 进行分析时，我可以在常驻内存和脏内存中看到非常高的价值。堆分析显示相当惊人的不规则增长......

仅绘制几个缩略图时，常驻内存会增长约 200 MB。绘制完所有内容后，内存会回落到与绘制前几乎相同的值。但是，对于大量缩略图，常驻内存中的值高于[400 MB](https://dl.dropbox.com/u/5552845/memory/memory-draw9-crash.png)，这显然会使应用程序崩溃。我试图限制同时绘制的缩略图数量（NSOperationQueue 及其 maxConcurrentOperationCount），但由于释放这么多内存似乎需要更多时间，它并没有真正解决问题。

现在我的应用程序基本上不起作用，因为真实数据适用于很多复杂的图表 = 很多缩略图。

每个缩略图都是用我从这里得到的代码创建的：（UIImage 上的类别）

```
+ (void)beginImageContextWithSize:(CGSize)size
{
    if ([[UIScreen mainScreen] respondsToSelector:@selector(scale)]) {
        if ([[UIScreen mainScreen] scale] == 2.0) {
            UIGraphicsBeginImageContextWithOptions(size, YES, 2.0);
        } else {
            UIGraphicsBeginImageContext(size);
        }
    } else {
        UIGraphicsBeginImageContext(size);
    }
}

+ (void)endImageContext
{
    UIGraphicsEndImageContext();
}

+ (UIImage*)imageFromView:(UIView*)view
{
    [self beginImageContextWithSize:[view bounds].size];
    BOOL hidden = [view isHidden];
    [view setHidden:NO];
    [[view layer] renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
    [self endImageContext];
    [view setHidden:hidden];
    return image;
}

+ (UIImage*)imageFromView:(UIView*)view scaledToSize:(CGSize)newSize
{
    UIImage *image = [self imageFromView:view];
    if ([view bounds].size.width != newSize.width ||
        [view bounds].size.height != newSize.height) {
        image = [self imageWithImage:image scaledToSize:newSize];
    }
    return image;
}

+ (UIImage*)imageWithImage:(UIImage*)image scaledToSize:(CGSize)newSize
{
    [self beginImageContextWithSize:newSize];
    [image drawInRect:CGRectMake(0,0,newSize.width,newSize.height)];
    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
    [self endImageContext];
    return newImage;
} 
```

在使用 ARC 时，是否有其他方式不会占用太多内存或者代码真的有问题？

发生内存警告+崩溃的另一个地方是任何视图的重绘过多。它不需要很快，只要多次。内存堆积起来，直到它崩溃，我无法找到任何真正对它负责的东西。（我可以在 VM Tracker 中看到不断增长的常驻/脏内存和在 Allocations 工具中的堆增长）

我的问题基本上是：如何找到它为什么会发生？我的理解是当给定对象没有所有者时，它会尽快发布。我对代码的检查表明，许多对象根本没有释放，即使我看不出有任何原因发生。我不知道任何保留周期...

我已经阅读了 Transitioning to ARC Release Notes、bbum 的关于堆分析的文章以及可能还有其他十几篇文章。使用和不使用 ARC 的堆分析有何不同？我似乎无法对它的[输出](https://dl.dropbox.com/u/5552845/memory/heap-analysis2.png)做任何有用的事情。

谢谢你的任何想法。

**更新：（**不强迫每个人阅读所有评论并遵守我的承诺）

通过仔细检查我的代码并添加@autoreleasepool，它有任何意义，内存消耗降低了。`UIGraphicsBeginImageContext`最大的问题是从后台线程调用。修复后（有关详细信息，请参阅@Tammo Freese 的答案）释放很快就会发生，不会导致应用程序崩溃。

我的第二次崩溃（由多次重绘同一图表引起）完全通过 `CGContextFlush(context)`在我的绘图方法末尾添加来解决。真丢人。

* * *

对任何尝试做类似事情的人的一个小警告：**使用 OpenGL。**CoreGraphics 对大型绘图的动画制作速度不够快，尤其是在 iPad 3 上。（第一个带有视网膜的）

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-27T16:49:53.043

回答您的问题：使用 ARC 识别内存警告和崩溃问题基本上像以前使用手动保留释放 (MRR) 一样工作。ARC 使用`retain`，就像 MRR 一样，它只为你插入调用，并且有一些优化，在某些情况下甚至可以降低内存消耗`release`。`autorelease`

关于你的问题：

在[您发布的 Instruments 屏幕截图中](https://dl.dropbox.com/u/5552845/memory/heap-analysis2.png)，可以看到分配峰值。到目前为止，在我遇到的大多数情况下，这些峰值是由自动释放的对象悬停太久引起的。

1.  你提到你使用`NSOperationQueue`. 如果重写`-[NSOperationQueue main]`，请确保将方法的全部内容包装在`@autoreleasepool { ... }`. 自动释放池可能已经存在，但不能保证（即使有，它的存在时间也可能比您想象的要长）。

2.  如果 1\. 没有帮助，并且您有一个处理图像的循环，请将循环的内部包裹起来，`@autoreleasepool { ... }`以便立即清理临时对象。

3.  你提到你使用`NSOperationQueue`. 从 iOS 4 开始，在 UIKit 中绘制到图形上下文是线程安全的，但如果文档是正确的，`UIGraphicsBeginImageContext`仍然应该只在主线程上调用！**更新：文档现在声明，从 iOS 4 开始，可以从任何线程调用该函数，以下实际上是不必要的！**为了安全起见，使用 . 创建上下文`CGBitmapContextCreate`并使用 检索图像`CGBitmapContextCreateImage`。这些方面的东西：

    ```
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    CGContextRef context = CGBitmapContextCreate(NULL, width, height, 8, 0, colorSpace, kCGImageAlphaPremultipliedLast);
    CGColorSpaceRelease(colorSpace);

    // draw to the context here

    CGImageRef newCGImage = CGBitmapContextCreateImage(context);
    CGContextRelease(context);
    UIImage *result = [UIImage imageWithCGImage:newCGImage scale:scale orientation: UIImageOrientationUp];
    CGImageRelease(newCGImage);

    return result; 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T13:42:32.617

因此，您在内存管理方面所做的任何事情（没有！）看起来都不合适。但是，您提到使用 NSOperationQueue。那些 UIGraphics... 调用被标记为不是线程安全的，但其他人说它们是 iOS 4 的（我找不到明确的答案，但记得这是真的。

在任何情况下，您都不应该从多个线程调用这些类方法。您可以创建一个串行调度队列并通过它提供所有工作以确保单线程使用。

当然，这里缺少的是您在使用图像后如何处理它们。您可能以某种不明显的方式保留它们。这里有一些技巧：

*   在任何使用大量图像的类中，添加一个仅记录其名称和一些标识符的 dealloc() 方法。

*   你可以尝试向 UIImage 添加一个 dealloc 来做同样的事情。

*   尝试使用最简单的设置来驱动您的应用程序 - 最少的图像等 - 这样您就可以验证图像及其所有者是否正在被释放。

*   当您想确保发布某些内容时，请将 ivar 或属性设置为 nil

去年夏天，我将一个 100 个文件的项目转换为 ARC，它开箱即用。当我不正确地使用桥接时，我也将几个开源项目转换为 ARC，但只有一个问题。该技术坚如磐石。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T11:59:00.513

这不是您问题的答案，但早在引入 ARC 之前，我就试图解决类似的问题。最近我正在开发一个应用程序，它在内存中缓存图像并在收到内存警告后将它们全部释放。只要我以正常速度使用该应用程序（没有疯狂敲击），它就可以正常工作。但是当我开始生成大量事件并开始加载许多图像时，应用程序无法获得内存警告并且崩溃了。

我曾经写过一个测试应用程序，它在点击一个按钮后创建了许多自动释放的对象。我能够比操作系统释放内存的速度更快（并创建对象）。内存在慢慢增加，所以在很长一段时间后或只是使用更大的对象后，我肯定会使应用程序崩溃并导致设备重新启动（看起来真的很有效；））。我检查了使用 Instruments 不幸地影响了测试并使一切变慢但我想这在不使用 Instruments 时也是如此。

另一次，我正在做一个更大的项目，该项目非常复杂，并且有很多由代码创建的 UI。它也有很多字符串处理，没有人关心使用 release - 我上次检查时有几千个 autorelease 调用。因此，在稍微广泛使用此应用程序 5 分钟后，它正在崩溃并重新启动设备。

如果我是正确的，那么负责实际释放内存的操作系统/逻辑不够快或没有足够高的优先级来避免应用程序在执行大量内存操作时崩溃。我从未证实这些怀疑，除了简单地减少分配的内存之外，我不知道如何解决这个问题。

# c++ - 得到一堆十字架初始化错误

> ID：11578936
> 
> 赞同：65
> 
> 时间：2012-07-20T11:59:57.133
> 
> 标签：c++, g++, initialization, switch-statement

我从下载的示例中获取了以下代码片段：

```
bool ChatServer::event(QEvent * event)
{
    if(event->type() == QEvent::User)
    {
        UserEvent * ue = static_cast<UserEvent *>(event);
        switch(ue->userType)
        {
            case CR::ErrorEvent:
            case CR::LogEvent:
            {   
                TraceEvent * te = static_cast<TraceEvent *>(ue);
                if(te->userType == CR::ErrorEvent)
                {
                    error(te->msg);
                }
                else
                {
                    log(te->msg);
                }
            }
                break;
            default:
                return false;
        }
    }
    else
    {
        return QTcpServer::event(event);
    }
    return true;
} 
```

现在如果编译程序我得到这个错误：

```
g++ -c -pipe -O2 -Wall -W -DQT_NO_DEBUG -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_SHARED -I/usr/local/share/qt4/mkspecs/freebsd-g++ -I. -I/usr/local/include/qt4/QtCore -I/usr/local/include/qt4/QtNetwork -I/usr/local/include/qt4 -I. -I/usr/local/include/qt4 -I/usr/local/include -o chatserver.o chatserver.cpp
g++ -c -pipe -O2 -Wall -W -DQT_NO_DEBUG -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_SHARED -I/usr/local/share/qt4/mkspecs/freebsd-g++ -I. -I/usr/local/include/qt4/QtCore -I/usr/local/include/qt4/QtNetwork -I/usr/local/include/qt4 -I. -I/usr/local/include/qt4 -I/usr/local/include -o clientservice.o clientservice.cpp
clientservice.cpp: In member function 'virtual bool ClientService::event(QEvent*)':
clientservice.cpp:37: error: jump to case label
clientservice.cpp:34: error:   crosses initialization of 'MessageEvent* me'
clientservice.cpp:41: error: jump to case label
clientservice.cpp:38: error:   crosses initialization of 'UserInfoEvent* uie'
clientservice.cpp:34: error:   crosses initialization of 'MessageEvent* me'
clientservice.cpp:44: error: jump to case label
clientservice.cpp:38: error:   crosses initialization of 'UserInfoEvent* uie'
clientservice.cpp:34: error:   crosses initialization of 'MessageEvent* me'
clientservice.cpp:31: warning: enumeration value 'EventTypeBegin' not handled in switch
clientservice.cpp:31: warning: enumeration value 'LogEvent' not handled in switch
clientservice.cpp:31: warning: enumeration value 'ErrorEvent' not handled in switch
clientservice.cpp:31: warning: enumeration value 'ClientConnected' not handled in switch
clientservice.cpp:31: warning: enumeration value 'ClientReg' not handled in switch
clientservice.cpp:31: warning: enumeration value 'ClientDisconnect' not handled in switch
clientservice.cpp:31: warning: enumeration value 'ServerConnected' not handled in switch
clientservice.cpp:31: warning: enumeration value 'ServerDisconnect' not handled in switch
clientservice.cpp:31: warning: enumeration value 'DoConnect' not handled in switch
clientservice.cpp:31: warning: enumeration value 'DoDisconnect' not handled in switch
clientservice.cpp:31: warning: enumeration value 'GotMessage' not handled in switch
clientservice.cpp:31: warning: enumeration value 'GotUserInfo' not handled in switch
clientservice.cpp:31: warning: enumeration value 'SendUserInfo' not handled in switch
clientservice.cpp:31: warning: enumeration value 'GotClientInfo' not handled in switch
clientservice.cpp:31: warning: enumeration value 'SendClientInfo' not handled in switch
clientservice.cpp:31: warning: enumeration value 'EventTypeEnd' not handled in switch
clientservice.cpp: In member function 'void ClientService::readClient()':
clientservice.cpp:63: warning: comparison between signed and unsigned integer expressions
clientservice.cpp:87: error: jump to case label
clientservice.cpp:83: error:   crosses initialization of 'Message* msg'
clientservice.cpp:92: error: jump to case label
clientservice.cpp:88: error:   crosses initialization of 'UserInfo* ui'
clientservice.cpp:83: error:   crosses initialization of 'Message* msg'
clientservice.cpp:97: error: jump to case label
clientservice.cpp:93: error:   crosses initialization of 'ClientInfo* ci'
clientservice.cpp:88: error:   crosses initialization of 'UserInfo* ui'
clientservice.cpp:83: error:   crosses initialization of 'Message* msg'
clientservice.cpp: In member function 'bool ClientService::sendToClient(CR::MsgType::MsgType, SendAble*)':
clientservice.cpp:124: warning: comparison of unsigned expression < 0 is always false
clientservice.cpp: In member function 'void ClientService::gotUserInfo(UserInfo*)':
clientservice.cpp:176: error: cast from 'ClientService*' to 'quint32' loses precision
*** Error code 1

Stop in ~/SimpleChatRoomServer 
```

现在，如果删除`case`语句的括号，我会收到此错误：

```
g++ -c -pipe -O2 -Wall -W -DQT_NO_DEBUG -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_SHARED -I/usr/local/share/qt4/mkspecs/freebsd-g++ -I. -I/usr/local/include/qt4/QtCore -I/usr/local/include/qt4/QtNetwork -I/usr/local/include/qt4 -I. -I/usr/local/include/qt4 -I/usr/local/include -o chatserver.o chatserver.cpp
chatserver.cpp: In member function 'virtual bool ChatServer::event(QEvent*)':
chatserver.cpp:108: error: jump to case label
chatserver.cpp:98: error:   crosses initialization of 'TraceEvent* te'
chatserver.cpp:94: warning: enumeration value 'EventTypeBegin' not handled in switch
chatserver.cpp:94: warning: enumeration value 'ClientConnected' not handled in switch
chatserver.cpp:94: warning: enumeration value 'ClientReg' not handled in switch
chatserver.cpp:94: warning: enumeration value 'ClientDisconnect' not handled in switch
chatserver.cpp:94: warning: enumeration value 'ServerConnected' not handled in switch
chatserver.cpp:94: warning: enumeration value 'ServerDisconnect' not handled in switch
chatserver.cpp:94: warning: enumeration value 'DoConnect' not handled in switch
chatserver.cpp:94: warning: enumeration value 'DoDisconnect' not handled in switch
chatserver.cpp:94: warning: enumeration value 'GotMessage' not handled in switch
chatserver.cpp:94: warning: enumeration value 'SendMessage' not handled in switch
chatserver.cpp:94: warning: enumeration value 'GotUserInfo' not handled in switch
chatserver.cpp:94: warning: enumeration value 'SendUserInfo' not handled in switch
chatserver.cpp:94: warning: enumeration value 'GotClientInfo' not handled in switch
chatserver.cpp:94: warning: enumeration value 'SendClientInfo' not handled in switch
chatserver.cpp:94: warning: enumeration value 'EventTypeEnd' not handled in switch
*** Error code 1

Stop in ~/SimpleChatRoomServer. 
```

的完整源代码`SimpleChatRoomServer.cpp`：

```
#include <QTextStream>
#include <QDateTime>
#include "traceevent.h"
#include "chatserver.h"
#include "chatcenterthread.h"
#include "clientservicethread.h"
#include "message.h"
#include "server.h"

ChatServer::ChatServer(QObject * parent)
        :QTcpServer(parent)
{
    QFile * inFile = new QFile(this);
    QFile * outFile = new QFile(this);
    QFile * errFile = new QFile(this);
    inFile->open(stdin,QIODevice::ReadOnly);
    outFile->open(stdout,QIODevice::WriteOnly);
    errFile->open(stderr,QIODevice::WriteOnly);
    setIO(inFile,outFile,errFile);

    qobject_cast<Server *>(qApp)->csrId = this;
    csrId = (QObject *)(0+CR::ServerId);
}

ChatServer::~ChatServer()
{
    for(int i = 0; i < ccs.size(); i++)
    {
        ccs.at(i)->deleteLater();
    }
}

void ChatServer::setIO(QFile * inFile,QFile * outFile,QFile * errFile)
{
    in.setDevice(inFile);
    out.setDevice(outFile);
    err.setDevice(errFile);
}

void ChatServer::incomingConnection(int socketId)
{
    ClientServiceThread *cst = new ClientServiceThread(socketId,this);
    cst->start();
    connect(cst,SIGNAL(finished()),cst,SLOT(deleteLater()));
}

bool ChatServer::init(quint16 & port)
{
    if(!port)
    {
        bool ok = false;
        while(!ok)
        {
            out<<tr("Port[5555]: ");
            out.flush();
            QString p;
            p = in.read(1);
            if(p!=QString("\n"))
            {
                QString strport;
                strport = in.readLine(10);
                strport = p + strport;
                port = strport.toUInt(&ok);
            }
            else
            {
                port = 5555;
                ok = true;
            }
        }
    }

    //ADD ONE ChatCenter
    ChatCenterThread * cct = new ChatCenterThread(this);
    cct->start();
    connect(cct,SIGNAL(finished()),cct,SLOT(deleteLater()));

    if(!listen(QHostAddress::Any,port))
    {
        error(tr("Listen at [%1] fail!").arg(port));
        deleteLater();
        exit(1);
        return false;
    }
    log(tr("Listen at [%1]").arg(port));
    return true;
}

bool ChatServer::event(QEvent * event)
{
    if(event->type() == QEvent::User)
    {
        UserEvent * ue = static_cast<UserEvent *>(event);
        switch(ue->userType)
        {
            case CR::ErrorEvent:
            case CR::LogEvent:
                TraceEvent * te = static_cast<TraceEvent *>(ue);
                if(te->userType == CR::ErrorEvent)
                {
                    error(te->msg);
                }
                else
                {
                    log(te->msg);
                }
                break;
            default:
                return false;
        }
    }
    else
    {
        return QTcpServer::event(event);
    }
    return true;
}

void ChatServer::error(QString msg)
{
    err<<QDateTime::currentDateTime().toString(Qt::ISODate)
            <<" !ERROR! "<<msg<<endl;
}

void ChatServer::log(QString msg)
{
    out<<QDateTime::currentDateTime().toString(Qt::ISODate)
            <<" "<<msg<<endl;
} 
```

1）我是否错误地使用了括号？

2）为什么在`case`语句中使用括号显示`crosses initialization`给其他代码行。

* * *

## 回答 #1

> 赞同：141
> 
> 时间：2012-07-20T12:01:47.567

C++ 标准说：

> 可以转移到一个块中，但不能通过初始化绕过声明的方式。从具有自动存储持续时间的局部变量不在范围内的点跳转到它在范围内的点的程序是格式错误的，除非该变量具有 POD 类型 (3.9) 并且在没有初始化程序的情况下声明。

中的案例`switch`被视为“跳跃”。

只需在切换之前将所有对象和变量初始化，一切都会好起来的。

考虑这段代码：

```
switch(k)
{
    case 1:
        int t = 4;
    break;
    default:
    break;
} 
```

这将导致“交叉初始化”错误，因为可以跳过 t 的初始化，但之后它仍然*会在 scope 中*，即使它一开始就没有被创建。

现在考虑一下：

```
switch(k)
{
    case 1:
    {
        int t = 4;
    }
    break;
    default:
    break;
} 
```

在这里，你*不会*有错误，因为变量在一个块内，并且会在块的末尾（在结束时`{`）死掉，所以在任何情况下它都*不会*在范围内。

要解决第一种情况，您只需执行以下操作：

```
int t = 0;
switch(k)
{
    case 1:
        t = 4;
    break;
    default:
    break;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-06-03T12:20:15.453

我正在将一些旧代码从 C 移植到 C++，其中包含很多 goto（到错误退出）。这个问题也出现在 switch 语句之外。

我对 gcc/g++ 的简单解决方法（使用 arm-linux-androideabi-gcc v4.6 测试）：

如果你有

```
goto err_exit;
int a = 1; 
```

它抱怨。

添加 -fpermissive 到您的命令行，并替换：

```
goto err_exit;
int a;
a = 1; 
```

没什么好抱怨的。

# ios - phonegap iOS 旋转

> ID：11578937
> 
> 赞同：1
> 
> 时间：2012-07-20T11:59:57.817
> 
> 标签：ios, jquery-mobile, cordova

我正在使用 iOS 模拟器，它可以很好地旋转，但与 android 不同，webview 似乎不会自动重新调整大小。orientationchanged 事件触发，但我不知道如何处理刷新页面。我无法刷新整个页面，尽管它确实解决了问题，因为我使用的是多页面 JQmobile 模板。对其他重新调整大小的方法有什么想法吗？我试过 $.mobile.trigger('pagecreate'); 和页面显示。

```
<meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, minimum-scale=1.0 target-densityDpi=device-dpi" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T12:17:12.467

你有没有保留这个

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no;" /> 
```

在IOS 中`<head>`，`index.html`它会在设备旋转时自动调整大小。

# jsf-1.2 - JSF 1.2：无法在 xhtml 页面中检索 bean 值

> ID：11578940
> 
> 赞同：1
> 
> 时间：2012-07-20T12:00:07.353
> 
> 标签：jsf-1.2

我正在使用 JSF 1.2 。我有一个小服务程序。当这个 servlet 被命中时，我从请求参数中获取数据，在 doPost 中，我需要在 bean 中设置它，以便我可以在 xhtml 页面上显示它。

我的代码如下所示。

```
userId= request.getParameter("userID");
MyBean myBean = new MyBean();
myBean.initialize(userId); 
```

在 myBean 的初始化方法中，将 userId 值设置为 globalVariable。

在我的 bean 日志中，正在打印 globalVariable 值。但它没有显示在 xhtml 页面上。

在 doPost 方法中重定向到 xhtml 页面，如下所示，

```
RequestDispatcher dispatcher = request.getRequestDispatcher("/jsp/html/index.jsf");
dispatcher.forward(request, response); 
```

在 index.xhtml 页面中，我有

```
<h:outputText value="#{myBean.globalVariable}"></h:outputText> 
```

在我的相位监听器中，我没有做任何事情。我只有beforPhase 方法。

为什么我无法在 jsf 页面中打印值但能够在登录 bean 中打印值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T12:05:22.290

在转发之前，您需要将 bean 放入作用域中，就在 JSF 期望它的位置。

如果它是请求范围的 bean，请使用`HttpServletRequest#setAttribute()`.

```
request.setAttribute("myBean", myBean); 
```

# django - 使用 pywhois 时出错

> ID：11578943
> 
> 赞同：3
> 
> 时间：2012-07-20T12:00:12.623
> 
> 标签：django, pywhois

我尝试使用[pywhois](http://code.google.com/p/pywhois/)检查域可用性：

```
import pywhois
try:
        w = pywhois.whois('domain_name')
        message='Domain is available' 
except:
        message='Domain is not available' 
```

但我收到此错误：

```
'module' object has no attribute 'whois' 
```

我`pywhois`用这个命令安装：

```
easy_install pywhois 
```

它安装成功，我错过了什么？
**编辑：** 检查域可用性的最好和更稳定的方法是这样的：

```
try:
        import socket
    socket.gethostbyname_ex('domain_name') 
            message='Domain is not available'
except:
        message='Domain is available' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T12:36:05.463

```
easy_install pywhois 
```

安装一个不同的工具 - 它是一个 CLI 工具 - [http://pypi.python.org/pypi/pywhois](http://pypi.python.org/pypi/pywhois)。要安装所需的 pywhois python lib，请从 googlecode(hg clone [https://code.google.com/p/pywhois/](https://code.google.com/p/pywhois/) ) 或 github (git clone [https://github.com/unpluggd/pywhois.git](https://github.com/unpluggd/pywhois.git) )中查看

并从源目录运行

```
python setup.py install 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-23T20:19:33.723

该项目`pywhois`已移至 Bitbucket，[此处](https://bitbucket.org/richardpenman/pywhois)为。

要安装`pywhois`，

```
pip install python-whois 
```

要使用`pywhois`( `import whois`)，这里是一个示例。

```
import whois            
#check if a domain name is registered or not
try :
    w = whois.whois(url)
except (whois.parser.PywhoisError):  #NOT FOUND
    print(url)   #unregistered domain names, it is not very accurate. 
```

善意提醒，使用`pywhois`不是很准确。有关更多信息，您可以参考[这个问题](https://stackoverflow.com/questions/31597125/pywhois-is-not-very-accurate-what-are-alternative-solutions)。

# c++ - 将纪元后的秒数转换为unix时间

> ID：11578946
> 
> 赞同：0
> 
> 时间：2012-07-20T12:00:27.327
> 
> 标签：c++

我在纪元之后有几秒钟（比如 x，x 是 long long 数据类型）。我希望使用`<ctime>`库将其转换为 unix 时间。问题是，我想要一个 time_t 变量`gmtime()`来工作，我无法将我的`x`( `long long`) 转换为`time_t`.

这就是正在做的事情：

```
//x is number of seconds after epoch, I want that in unix time 
time_t t=x; 
printf("%s\n",asctime(gmtime(&t))); 
```

我可以以某种方式`x`输入`time_t`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T12:09:10.133

就投吧？

```
time_t t = (time_t) x; 
```

它将削减前 32 位，但在您真正需要 64 位时间戳之前，您还有超过 25 年的时间。:)

当然，如果您的 epoch 与 POSIX epoch (1970-01-01 00:00:00) 不同，则可能会出现问题。

# mysql - mysql_query 错误，如果使用单引号

> ID：11578947
> 
> 赞同：0
> 
> 时间：2012-07-20T12:00:33.900
> 
> 标签：mysql, mysql-error-1064

我想知道为什么

```
$amzius_sql = "SELECT DISTINCT `Age` , SUBSTRING( Age, LOCATE( ' ', Age ) ) AS `AgePrefix` , SUBSTRING_INDEX( Age, ' ', 1 ) AS `AgeValue` FROM `suoPage` ORDER BY `AgePrefix` , `AgeValue` LIMIT 0 , 30";
$amzius_res = mysql_query($amzius_sql); 
```

完美地工作，这：

```
$amzius_sql = 'SELECT DISTINCT `Age` , SUBSTRING( Age, LOCATE( " ", Age ) ) AS `AgePrefix` , SUBSTRING_INDEX( Age, " ", 1 ) AS `AgeValue` FROM `suoPage` ORDER BY `AgePrefix` , `AgeValue` LIMIT 0 , 30';
$amzius_res = mysql_query($amzius_sql); 
```

产生错误： **“字段列表”中的未知列“”**

唯一的区别是引号。如果在 phpMyAdmin 中查询了两个查询 - 两者都有效，但如果通过 PHP 中的 mysql_query() 查询，则只有第一个有效

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T12:25:40.520

这是解释：

> ANSI_QUOTES 模式使服务器将双引号字符串解释为标识符。因此，启用此模式后，字符串文字必须用单引号括起来。它们不能用双引号括起来。

[关联](https://dev.mysql.com/doc/refman/5.0/en/identifiers.html)

# linux - 如何调用 module_init 宏？

> ID：11578948
> 
> 赞同：1
> 
> 时间：2012-07-20T12:00:42.233
> 
> 标签：linux, linux-kernel, linux-device-driver

我正在编写一个简单的字符设备驱动程序。我们传递给 module_init() 的函数在模块安装时被调用。

当我们使用 insmod 命令插入模块时，传递给 module_init() 的函数被调用。

有没有其他方法可以调用这个 module_init() 函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T16:52:38.413

如果您正在谈论使用除 之外的其他东西`insmod`，那么 no:`insmod`是我知道初始化模块的唯一方法。

否则，这个`module_init`东西是一个宏，并不是真正的函数调用（你不能在 C 中从全局范围调用函数）。它扩展为一些预定义的“模块构造函数”，它调用您的初始化函数，具体取决于您是作为动态模块编译还是作为内核中内置的对象进行编译。它的作用是避免`#ifdef`在开发模块时做很多事情，并使开发过程更容易（参见[this](http://people.netfilter.org/rusty/unreliable-guides/kernel-hacking/routines-init-again.html)）。

因此，如果出于某种原因（但我不鼓励您这样做），您想从模块代码中调用初始化函数，则直接调用它。例如：

```
static void some_other_function(void) {
    // ...
    initialize();
    // ...
}

static int initialize(void) {
    // your initialization code
}

module_init(initialize); 
```

**编辑**`__init`：在尤金的评论之后删除。

但是，我建议仅`module_init`扩展调用您的初始化函数，并且其他*常见*代码位于单独的函数中：

```
static void some_other_function(void) {
    // ...
    something_that_might_get_called_afterwards_also();
    // ...
}

static int __init initialize(void) {
    // your initialization code (done only once)
    something_that_might_get_called_afterwards_also();
    // some other one-time code
}

module_init(initialize); 
```

# math - 矩阵求逆 Cholesky 分解 -> 结果不准确

> ID：11578949
> 
> 赞同：0
> 
> 时间：2012-07-20T12:00:46.357
> 
> 标签：math, matrix, linear-algebra, matrix-inverse, matrix-factorization

我正在通过 Cholesky 分解使用不同的库计算方阵的逆。然而，我的结果并不像我预期的那样。我不是数学专家，但我期待得到更接近的结果。

我正在使用 MLK、magma 和 CULA 库来计算 CPU 和 GPU 中矩阵的逆矩阵。在对这些库进行计算后，我注意到结果总是在一个元素上有所不同。假设我想计算 的倒数`A= [0.237306,0.000458;0.000458,0.238497]`：

```
A[0] = 0.237306 
A[1] = 0.000458 
A[2] = 0.000458 
A[3] = 0.238497 
```

我得到的结果是：

```
inv(A)[0] = 4.213983 
inv(A)[1] = -0.008092 
inv(A)[2] = 0.000458 
inv(A)[3] = 4.192946 
```

但是，正确的结果应该是

```
 4.2139841  -0.0080924
  -0.0080924   4.1929404 
```

如您所见，`inv(A)[3]`虽然其他都很好，但它们是不同的。Cholesky Inversion 应该是这样工作的吗？这是一个正确/近似的结果还是我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T14:34:23.317

我明白发生了什么。正如 Alexandre C 所指出的，这个库计算矩阵的逆矩阵，上或下。因此，根据您传递给库的参数（上或下），它计算矩阵的上边或下边的倒数。我以为你可以计算出完整的逆矩阵，但显然这是不可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T13:27:19.953

这可能是由于 IEEE 对浮点数的规范以及使用它们时内置的不精确性。

您没有说您指定了 32 位还是 64 位浮点数。尝试提高精度。

另一点需要说明的是，人们通常不会计算矩阵的逆矩阵，因为它容易出现舍入误差。更好的选择是 LU 分解和前向反向替换。

你从哪里得到“正确”的答案？你如何判断你的结果的正确性？

我知道这不是数值方法的最佳工具，但如果我采用您的矩阵：

0.237306 0.000458 0.000458 0.238497

并通过 MINVERSE 运行它，我得到了这个答案：

4.213984 -0.00809 -0.00899 4.19294

我可以通过将原始矩阵和逆矩阵相乘来检查它的有效性，看看我是否得到了一个识别矩阵。这是我从 MMULT 中得到的：

1 2.1684e-19 -2.168e-19 1

这就是数值方法的人所说的单位矩阵。

所以我说我得到的答案是正确的。你应该以同样的方式检查你的，并阅读[每个计算机科学家应该知道的关于浮点运算](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)的知识。

# websocket - Atmosphere Jersey 资源调用永远不会触发 WebSocketTextListener 的 OnMessage 方法

> ID：11578952
> 
> 赞同：1
> 
> 时间：2012-07-20T12:00:55.510
> 
> 标签：websocket, jersey, atmosphere

我编写了两个 junit 方法来使用 Atmosphere 和 webSockets 测试我的 Jersey 资源。

问题是当我调用 Suspend 和 Broacast 时，只调用了我的 WebSocketTextListener 的 onOpen 方法。OnError、OnMessage、OnClose 都没有被调用:(

知道为什么不调用 OnMessage 方法吗？

大气球衣资源：

```
@Path("/websocket")
    @Suspend
    @GET
    @Produces({MediaType.APPLICATION_JSON})
    public String suspend() {
        return "";
    }   

    @Path("/websocket")
    @Broadcast(writeEntity = false)
    @POST
    @Produces({MediaType.APPLICATION_JSON})
    public String broadcast(String message) {
        return "BROADCASTTT";
    } 
```

测试暂停 WEBSOCKET 呼叫：

```
 @Test
    public void testAddMealSubscriber() throws Exception {

        final CountDownLatch latch = new CountDownLatch(1);
        String restaurantId = "SalernoNapoliBarcelona";
        String mealId = "14b74bddc68d6f1b4c22e7f7b200067f";

        String url = "ws://localhost:8080/rest/" + "restaurants/" + restaurantId + "/meals/" + mealId + "/websocket/";

        AsyncHttpClient client = new AsyncHttpClient();

        try {
            final AtomicReference response = new AtomicReference(null);
            WebSocket websocket = client.prepareGet(url)
                    .execute(new WebSocketUpgradeHandler.Builder().addWebSocketListener(
                            new WebSocketTextListener() {

                                @Override
                                public void onMessage(String message) {
                                    System.out.println("WebSocketTextListener onMessage:" + message);
                                    response.set(message);
                                    latch.countDown();
                                }

                                @Override
                                public void onFragment(String fragment, boolean last) {

                                    System.out.println("WebSocketTextListener onFragment:" + fragment);
                                }

                                @Override
                                public void onOpen(WebSocket websocket) {
                                    System.out.println("WebSocketTextListener onOpen");
                                }

                                @Override
                                public void onClose(WebSocket websocket) {
                                    System.out.println("WebSocketTextListener onClose");
                                    latch.countDown();
                                }

                                @Override
                                public void onError(Throwable t) {
                                    System.out.println("WebSocketTextListener onError");
                                    t.printStackTrace();
                                }
                            }).build()).get();

            try {
                latch.await(60, TimeUnit.SECONDS);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
            assertNotNull(response.get());
            assertEquals(response.get(), "echo");
        } catch (Exception e) {
            e.printStackTrace();
        }

        client.close();

    }
```

测试广播网络电话：

```
 @Test
    public void testAddMealPublisher() throws Exception {

        final CountDownLatch latch = new CountDownLatch(1);
        String restaurantId = "SalernoNapoliBarcelona";
        String mealId = "14b74bddc68d6f1b4c22e7f7b200067f";

        String url = "ws://localhost:8080/rest/" + "restaurants/" + restaurantId + "/meals/" + mealId + "/websocket/";

        AsyncHttpClient c = new AsyncHttpClient();
        try {
            final AtomicReference response = new AtomicReference(null);

            WebSocket websocket = c.prepareGet(url)
                    .execute(new WebSocketUpgradeHandler.Builder().addWebSocketListener(
                            new WebSocketTextListener() {

                                @Override
                                public void onMessage(String message) {
                                    response.set(message);
                                    latch.countDown();
                                }

                                @Override
                                public void onFragment(String fragment, boolean last) {

                                    System.out.println("WebSocketTextListener onFragment:" + fragment);
                                }

                                @Override
                                public void onOpen(WebSocket websocket) {
                                    System.out.println("WebSocketTextListener onOpen");
                                }

                                @Override
                                public void onClose(WebSocket websocket) {
                                    System.out.println("WebSocketTextListener onClose");
                                    latch.countDown();
                                }

                                @Override
                                public void onError(Throwable t) {
                                    System.out.println("WebSocketTextListener onError");
                                    t.printStackTrace();
                                }
                            }).build()).get().sendTextMessage("MESSSAGGGEEEE");

            try {
                latch.await(5, TimeUnit.SECONDS);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }

            assertNotNull(response.get());
            assertEquals(response.get(), "echo");

        } catch (Exception e) {
            e.printStackTrace();
        }

        c.close();

    }
```

执行第一个 SUSPEND CALL 然后 BRODCAST 调用时的 Jersey 日志：

```
2012 年 7 月 20 日下午 1:54:10 com.sun.jersey.api.container.filter.LoggingFilter 过滤器
INFO: 1 * 服务器入站请求
1 > 获取 http://localhost:8080/rest/restaurants/SalernoNapoliBarcelona/meals/14b74bddc68d6f1b4c22e7f7b200067f/websocket/
1 > Sec-WebSocket-版本：13
1 > 升级：WebSocket
1 > Sec-WebSocket-Key: Wf7vyIGCD3Sa8StcdsGIkg==
1 > 主机：本地主机：8080
1 > 接受：*/*
1 > 用户代理：NING/1.0
1 > 连接：升级
1> 来源：http://localhost:8080
1 > X-Atmosphere-Transport：websocket
1 >

2012 年 7 月 20 日下午 1:54:31 com.sun.jersey.api.container.filter.LoggingFilter 过滤器
INFO: 2 * 服务器入站请求
2 > 获取 http://localhost:8080/rest/restaurants/SalernoNapoliBarcelona/meals/14b74bddc68d6f1b4c22e7f7b200067f/websocket/
2 > Sec-WebSocket-版本：13
2 > 升级：WebSocket
2 > Sec-WebSocket-Key: RH/DbdkwQK1xBwhyhXLkAQ==
2 > 主机：本地主机：8080
2 > 接受：*/*
2 > 用户代理：NING/1.0
2 > 连接：升级
2> 来源：http://localhost:8080
2 > X-Atmosphere-Transport: websocket
2 >

2012 年 7 月 20 日下午 1:54:34 com.sun.jersey.api.container.filter.LoggingFilter 过滤器
INFO: 3 * 服务器入站请求
3 > 发布 http://localhost:8080/rest/restaurants/SalernoNapoliBarcelona/meals/14b74bddc68d6f1b4c22e7f7b200067f/websocket/
3 > X-Atmosphere-Transport: websocket
3 > X-Atmosphere-Transport: websocket
3 > 内容类型：application/json
3 >

2012 年 7 月 20 日下午 1:54:34 com.sun.jersey.api.container.filter.LoggingFilter$Adapter 完成
INFO: 3 * 服务器出站响应
3
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T11:38:05.740

问题是由于两个不同的 AsyncHttpClient 用于 SUBSCRIBE 和 BROADCAST 调用。

要解决此问题，请在 SetUp 方法中创建一个 AsyncHttpClient 并在两种测试方法中使用它：

```
 private AsyncHttpClient client;

    @Before
    public void setUp() throws Exception {

         client = new AsyncHttpClient();

    }
```

# 3g - 可达性 - 3G 网络 - 没有信用

> ID：11578953
> 
> 赞同：1
> 
> 时间：2012-07-20T12:00:56.183
> 
> 标签：3g, reachability

我有一个小问题，想知道是否有人可以提供帮助。我在我的项目中使用可达性，它可以正常工作，但是我们有一部具有 3g 连接但没有信用的手机，这不属于可达性标准，因此根本不会出错。

有没有办法检测并处理它？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T12:09:57.467

如果没有信用，网络连接的行为取决于您的运营商。您可以检查套接字是否损坏，但您不会知道它是由没有信用或服务器关闭或其他实际网络连接问题引起的。如果您的运营商提供了一些在线信用查询系统，也许您可​​以实现一个在线查询信用的功能，但会有一些延迟（取决于运营商的系统）

# doctrine - 在 Doctrine 1.2 中使用子查询

> ID：11578954
> 
> 赞同：1
> 
> 时间：2012-07-20T12:00:56.320
> 
> 标签：doctrine, subquery, doctrine-1.2

我在学说 1.2 的更新语句中使用子查询时遇到了很多麻烦我想为子查询的结果设置一个字段，但这似乎是不可能的。这是我到目前为止所尝试的。

```
$query = Doctrine_Query::create()->from('Users_Model_Book b');    
$subSelect = $query->createSubquery()->select('ROUND(SUM(br.rating) / COUNT(br.id))')->from('b.BookRating')->where('b.BookRating.book_id = b.id');
$query->update()->set('bookrating', '('.$subSelect->getDql().')')->where('b.id = ?', $this->id)->getRawSql(); 
```

**将给出“未知组件别名 br”**

```
 $q = new Doctrine_RawSql();
    $q  ->addComponent('b', 'Users_Model_Book')
        ->addComponent('br', 'Users_Model_BookRating')
        ->update('b')
        ->set('b.bookrating', 'ROUND(SUM(br.rating) / COUNT(br.id)')
        ->where('b.id = ' . (bool) $this->id);
    echo $q->getSqlQuery(); 
```

将返回**SELECT b.id AS b_ *id, br.id AS br* _id FROM b WHERE b.id = 1**

有人可以帮助我吗？

# c++ - 使用ptr_vector时派生类的访问方法

> ID：11578957
> 
> 赞同：0
> 
> 时间：2012-07-20T12:01:02.590
> 
> 标签：c++, boost, casting, polymorphism, ptr-vector

## 设置

```
class Base
{
public:
    Base();
    virtual ~Base();
    int getType();
protected:
    int type;
};

class DerivedA : public Base
{
public:
    DerivedA() { this->type = 1; };
    ~DerivedA();

    int getA() { return 1;};
};

class DerivedB : public Base
{
public:
    DerivedB() { this->type = 2; };
    ~DerivedB();

    int getB() { return 2;};

}; 
```

## 目标

拥有一个包含两个派生类的对象的向量，然后能够访问特定于子类的方法。

## 当前的“解决方案”

```
int main()
{
    typedef boost::ptr_vector<Base> BasePtr;
    BasePtr vec;

    // Fill vec with some stuff 
    vec.push_back(new DerivedA());
    vec.push_back(new DerivedB());
    vec.push_back(new DerivedA());
    vec.push_back(new DerivedB());

    typedef BasePtr::iterator BaseIter;

    for ( BaseIter it = vec.begin(); it != vec.end(); it++ ) {

       if (it->getType() == 1) {
          std::cout << it->getA() << '\n';
       } else {
          std::cout << it->getB() << '\n';
       }    

    }

    return 0;
 } 
```

## 问题

显然“它”既不被识别为 DerivedA 也不被识别为 DerivedB，因此无法访问子特定方法。需要某种形式的演员表，所以我想问题是：

## 如何正确地将迭代器转换为正确的派生类？

也许有更好的方法来构建整个场景？

**编辑：** 似乎我有点不清楚。派生类中方法的目的是根本不同的。考虑具有派生类 Armor 和 Weapon 的基类 Item。

在这个例子中，你可以看到为什么，例如，Weapon 有一个函数 getDamage()，它可能会返回一个浮点数。

Armor不需要此功能，甚至没有类似的功能。

在此示例中，您可以将向量视为可以包含任意数量和类型的项目的库存。甚至可能有堆叠和一些用途的物品（可能是药水）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T12:06:23.800

如果您必须转换为派生，则意味着您的设计已损坏。

但是如果你真的必须这样做（把它放在 for 循环中）：

```
DerivedB * typeB = dynamic_cast< DerivedB * >( &*it );
if ( typeB != nullptr )
{
  std::cout << typeB->getB() << '\n';
} 
```

更好的方法是添加`getB()`到接口中，并在 DerivedA 中实现它（它可以返回一些虚拟值，或者如果确实需要则抛出）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T12:08:43.020

您可以使用 dynamic_cast 如下。

```
for ( BaseIter it = vec.begin(); it != vec.end(); it++ ) 
{
    DerivedA* dA = dynamic_cast<DerivedA*>(it);
    if(dA != NULL)
    {
      // Do whatever for DerivedA
    }

    // Similarly check for DerivedB

} 
```

除了设计你的接口来利用多态性之外，这里没有简单的方法。即，在基类中定义函数签名并在派生类中实现它们。上面的 for 循环，理想情况下不应该尝试知道容器项的类型。如果不知道 getA() 和 getB() 所代表的真正函数是什么，就不可能对此发表评论。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T12:03:18.937

铸造是一个非常丑陋的解决方案，而且不是很 C++'y。相反，您应该使用虚函数。

就像是：

```
class Base
{
public:
    virtual int get() = 0;

    // ...
};

class DerivedA : public Base
{
public:
    int get() { return 1;};
};

class DerivedB : public Base
{
public:
    int get() { return 2;};
}; 
```

那么就不需要额外的类型了，你可以调用`it->get();`.

# mysql - 将主标志放在一对多关系中的位置

> ID：11578966
> 
> 赞同：2
> 
> 时间：2012-07-20T12:01:36.883
> 
> 标签：mysql, sql, ruby-on-rails-3, postgresql

我遇到了这个问题：

*   用户有很多糖果（**1:M**），
*   **其中一个糖果可以拥有主要**旗帜
***   每个用户只能使用一个糖果作为主要糖果**

 **哪种方式是做主要标志的更好解决方案？

### 解决方案1：

用户

```
| id  | name |
| 1   | Joe  | 
```

糖果

```
| id | user_id | primary |
| 1  |  1      | true    |  
| 2  |  2      | false   | 
```

### 解决方案2：

用户

```
| id  | name | primary_candy_id |
| 1   | Joe  | 2                | 
```

糖果

```
| id | user_id |
| 1  |  1      |
| 2  |  2      | 
```

* * *

**解决方案 1 的注释**

*   我在 Candies table 中得到了与 Candy 相关的所有内容
*   如果我检查是否有任何 Candy 是主要的，则查询速度更快（不必加入）
*   如果用户有 100 个糖果，这样他就有 99 个是*假*的，只有 1 个有意义的*真*=> 99 个不必要的列记录

**解决方案 2 的注释**

*   这样我将只有一个列记录（保存 99 个其他）
*   如果我想检查 Candy 是否是主要的，我需要加入客户表
*   假设我介绍了更多带有与用户相关的主要标志的 1:M 表：冰淇淋、巧克力、垃圾食品……这样我将在用户中再添加 4 个列

这是更多的 SQL 问题，但我在项目中使用 Rails 3.*，因此欢迎来自该领域的最佳实践意见

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:27:33.193

我会创建一个名为`UserCandy`或类似的第三个模型，然后让数据库表如下所示：

```
# users
| id | name |
| 1  | Joe  |

# candies
| id | name    |
| 1  | foo bar |

# user_candies
| id | user_id | candy_id |
| 1  | 1       | 1        |

# primary_candies
| id | user_candy_id |
| 1  | 1             | 
```

然后我会在用户和糖果之间建立一个多对多的关系，因为喜欢的人可能不止一个`<insert some special type of candy here>`。

```
class User < ActiveRecord::Base
  has_many :user_candies
  has_many :candies, :through => :user_candies

  def primary_candy
    Candy.primary_for(self).first
  end
end

class Candy < ActiveRecord::Base
  has_many :user_candies
  has_many :users, :through => :user_candies

  scope :primary, joins(:user_candies => [:primary_user_candy, :user])
  scope :primary_for, lambda {|user| primary.where('users.id' => user.id) }
end

class UserCandy < ActiveRecord::Base
  belongs_to :user
  belongs_to :candy
  has_one :primary_candy
end

class PrimaryCandy < ActiveRecord::Base
  belongs_to :user_candy

  validate do
    if user_candy.user.primary_candy
      errors.add(:base, "User already has a primary  candy")
    end
  end
end 
```

这样，当您添加不同类型的零食时，您不必在 users 表中添加列，而且，由于用户可能有也可能没有最喜欢的糖果，您可以通过这种方式避免 users 表中的空字段.

您也可以通过这种方式重复使用不同的糖果类型。

因此，从关系数据库的角度来看，我的简短回答是：我不会有标志，我会将主要糖果放在单独的模型中。

也就是说，您也可以使用三表版本，只需将主要标志放在 user_candies 表中。

我使用上述模型代码制作了一个示例 rails 项目，可[在此处](https://github.com/Frost/candy_test)获得。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T16:59:53.113

在我看来，人们经常通过为不存在的一对多关系创建不必要的链接表来使这变得不必要地复杂化。MyFavoriteColor 是“me”（“favorite”）的一元属性，所以我会这样做：

```
 Tables:
         PEOPLE
         COLORS 
```

并且 People.FavoriteColor 列必须包含 COLORS 表中的键：

```
 ALTER TABLE PEOPLE ADD CONSTRAINT FK_PEOPLE_COLOR
       foreign key(FavoriteColor) REFERENCES COLOR(id) 
```

现在，假设您有一家服装店，并且您想跟踪一件商品的颜色（红色衬衫、蓝色衬衫、绿色衬衫），为什么您需要一个一对多的关系链接表：

```
 Tables:
           APPAREL
           COLORS
           APPARELCOLORS

       T-Shirt is an item in the APPAREL table
       Red, green, blue, white, etc are items in the COLORS table

        And then you'd have this in the APPARELCOLORS linkage table:

             Apparel | Color
             t-shirt | red
             t-shirt | blue
             hat   | white
             hat | black
             hat | yellow 
```

“最喜欢”规则——即，与实体关联的几个值中只有一个可以将“最喜欢”列设置为 True——不能以声明方式强制执行。您应该始终寻求以声明方式执行规则的方法。当你可以的时候，你知道你有一个好的设计。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T13:28:35.277

has_one 关联怎么样。这样您就可以消除两者中不必要的列，并且只有在需要时才能轻松访问 User.primary_candy。

```
User :has_many candy
User :has_one candy :through => primary_candy 

Candy :belongs_to user
Candy :has_many primary_candy

Primary_candy :belongs_to User
Primary_candy :belongs_to Candy
Primary_candy :validates_uniqueness_of :user_id, :scope => :candy_id 
```

user.primary_candy.candy 将返回相关的糖果。user.candy 将返回所有糖果的集合。

您可以在 candy 模型中创建一个方法来检查 primary_candy 和 .find 也仅该记录。

```
def p_candy(user)
  p_candy_id = Primary_candy.find_by_user_id(user.id).candy_id
  p_candy = Candy.find(p_candy_id)
  return p_candy
end 
```

它还使您可以轻松查看不同初级糖果的相对受欢迎程度。不过，GL。**

# php - preg_replace 删除 html 标签问题

> ID：11578969
> 
> 赞同：-1
> 
> 时间：2012-07-20T12:01:39.517
> 
> 标签：php, preg-replace

我在做什么是一个非常愚蠢的错误，实际上在我的 html 中，我有很多

```
<li class="MsoNormal" style="margin:0in 0in 0pt">
            <span style="font-family:'Calibri','sans-serif';font-size:11pt">May be required to work extra hours at month end to meet monthly deadlines. .</span>
 </li> 
```

我想用 LI, span 替换这些所有标签 - 所以输出将是

“- 可能需要在月底加班，以满足每月的最后期限。.”

我正在使用此代码

```
$a = preg_replace('/(<li[^>]*><span[^>]*>)(.*?)(<\/span><\/li>)/imsU',"-$2",$a); 
```

但它不起作用。请建议。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T12:39:48.967

你试过了`strip_tags()`吗？我认为这是一种简单的方法来做你想做的事......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T12:21:06.270

您的正则表达式中不存在换行符。尤其是标签之间。正确的正则表达式是：

```
$a = preg_replace('/(<li[^>]*>(?:[\s]*)<span[^>]*>)(.*?)(<\/span>(?:[\s]*)<\/li>)/imsU', "-$2", $a); 
```

`?:`是在这里留下第二场比赛仍然是第二。（这称为非捕获分组）

# android - 在运行时更改主题，需要 View 重绘但它不需要

> ID：11578975
> 
> 赞同：1
> 
> 时间：2012-07-20T12:01:51.583
> 
> 标签：android, refresh, ondraw, invalidation, android-theme

我已经搜索但找不到解决我的问题的方法。我需要做的是设置一个随机主题，然后让所有其他视图都采用这个主题。主题的随机化不是问题，我知道它正在醒来。问题是刷新堆栈中已经存在的视图。

我打电话

```
int theme = Constants.THEMES[randomInt];
setTheme(theme); 
```

在堆栈中的某个活动中，然后调用`invalidate()`该活动。该活动没有发生任何事情，但是当我参加其他活动时，新主题将适用。

此外，当我“回到”我的身边时，我`mainActivity`不知道如何`View`重新绘制。

我打电话

```
@Override
protected void onResume() {
    super.onResume();
    if(refreshNeeded){
        getWindow().getDecorView().findViewById(
        android.R.id.content).getRootView().invalidate();
    }
} 
```

但什么也没有。我不知道如何让它用新主题重绘。

我错过了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-07T23:33:47.960

在和`setTheme(R.style.Theme)`之前调用。`super.onCreate``setContentView`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T12:07:06.330

打电话给`Button click`

```
 getApplication().setTheme(R.style.Theme_Black);
    setTheme(R.style.Theme_Black);
    Intent n = new Intent(activityA.this , activityB.class);
    startactivity(n); 
```

它会起作用的。但是您的`themes.xml`in`values`文件夹中必须包含所有小部件样式

# php - 如何从 html 源中查找 URL 中的关键字，但将链接和锚文本存储在数组中

> ID：11578980
> 
> 赞同：0
> 
> 时间：2012-07-20T12:02:05.483
> 
> 标签：php, htmldoc

有点卡在这个问题上，我想做的是循环一个包含返回我网站的链接的 URL 列表，我正在寻找用于生成链接的 HTML 代码，或者存储用作的锚文本链接，

**[marty 删除的代码见下文]**

所以用于martylinks的代码使用了一个我仍在尝试构建的函数，这是我遇到了一些麻烦，但对你们来说，我确信它真的很简单..

这是我的 find_marty_links 函数

```
function find_marty_links($file, $keyword){
    //1: Find link to my site <a href="http://www.***martin***-gardner.co.uk" target="_blank" title="Web Developer">Web Developer</a>
    //2: copy the FULL HTML LINK to array
    //3: copy the REL value? NOFOLLOW : FOLLOW to array
    //4  copy TITLE (if any) to array
    //5  copy Anchor Text to array

    $htmlDoc = new DomDocument();
    $htmlDoc->loadhtml($file);

    $output_array = array();
    foreach($htmlDoc->getElementsByTagName('a') as $link) {

            // STEP 1
        // SEARCH ENTIRE PAGE FOR KEYWORD?
            // FIND A LINK WITH MY KEYWORD?
            preg_match_all('???', $link, $output); //???//

            if(strpos($output) == $keyword){

               // STEP 2
               // COPY THE FULL HTML FOR THAT LINK?
               $full_html_link = preg_match(??);
               $output_array['link_html'] = $full_html_link;

               // STEP 3
               // COPY THE REL VALUE TO ARRAY
               $link_rel = $link->getAttribute('rel');
               $output_array['link_rel'] = $link_rel;

               // STEP 4
               // COPY TITLE TO ARRAY
               $link_title = $link->getAttribute('title');
               $output_array['link_title'] = $link_title;

               // STEP 5
               // COPY ANCHOR TEXT TO ARRAY
               $anchor_exp = expode('>'); //???
               $anchor_txt = $anchor_exp[2];//??
               $output_array['link_anchor'] = $anchor_txt;

            }

    }
} 
```

**！！更新！！** 需要产生一个像下面这样的数组

```
$results = array('link_html' => '<a title="test" href="http://site.com" rel="nofollow">anchor text</a>',
                 'link_rel' => 'nofollow',
                 'link_title' => 'test',
                 'link_anchor' => 'anchor text'
                 ) 
```

感谢任何帮助小伙子..

米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:22:29.347

好的，这是更新的代码：

```
function find_marty_links($file, $keyword){
    $htmlDoc = new DomDocument();
    $htmlDoc->loadhtml($file);
    $links = array();

    foreach($htmlDoc->getElementsByTagName('a') as $link) {
        $url = $link->getAttribute('href');
        $title = $link->getAttribute('title');
        $text = $link->nodeValue;
        $rel = $link->getAttribute('rel');

        if(strpos($url,$keyword) !== false || strpos($title,$keyword) !== false || strpos($text,$keyword) !== false)
        {
            $links[] = array('url' => $url, 'text' => $text, 'title' => $title, 'rel' => $rel);
        }
    }

    return $links;
} 
```

# android - 如何识别触摸的地图标记

> ID：11578982
> 
> 赞同：0
> 
> 时间：2012-07-20T12:02:12.223
> 
> 标签：android, map, marker

我填充了一个由地理点组成的列表。现在所有标记都是可见的，但是当我触摸一个标记时，我应该能够将该标记的详细信息显示为气球或弹出窗口，我该怎么做。除此之外，弹出/气球应该显示我的位置和标记之间的距离。多谢你们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T14:44:44.737

覆盖`onTap()`您从`ItemizedOverlay<OverlayItem>`.

```
@Override
protected boolean onTap(int index) {
Toast.makeText(context,
 "Touch on marker: \n" + overlayItemList.get(index).getTitle(),
 Toast.LENGTH_LONG).show();

return true;
} 
```

`overlayItemList`是一个`ArrayList<OverlayItem>`。

# android - android : 相对布局宽度 wrap_content

> ID：11578990
> 
> 赞同：1
> 
> 时间：2012-07-20T12:02:59.160
> 
> 标签：android, imageview, width, android-relativelayout

我有以下布局：

```
<RelativeLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal" >

    <ImageView
        android:id="@+id/personal_image"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:adjustViewBounds="true"
        android:src="@drawable/dom_logo_new" />

    <ImageView
        android:id="@+id/round_corner_top_left"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:src="@drawable/corner_white_left_top" />

    <ImageView
        android:id="@+id/round_corner_top_right"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:src="@drawable/corner_white_right_top" />

    <ImageView
        android:id="@+id/round_corner_bottom_left"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:src="@drawable/corner_white_left_bottom" />

    <ImageView
        android:id="@+id/round_corner_bottom_right"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:src="@drawable/corner_white_right_bottom" />

</RelativeLayout> 
```

有 1 个主图像 (personal_image) 和 4 个小图像。

我需要在屏幕的中心水平显示主图像（personal_image），每个角有 4 个图像（左上角、右上角、左下角、右下角）。但`RelativeLayout`具有所有屏幕的宽度和高度。

如何设置相同`width`和personal_image`height`的和？`RelativeLayout``width``height`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T12:18:54.417

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

<RelativeLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal" >

    <ImageView
        android:id="@+id/personal_image"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:adjustViewBounds="true"
        android:src="@drawable/ic_launcher" />

    <ImageView
        android:id="@+id/round_corner_top_left"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:src="@drawable/ic_launcher" />

    <ImageView
        android:id="@+id/round_corner_top_right"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:src="@drawable/ic_launcher" />

    <ImageView
        android:id="@+id/round_corner_bottom_left"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:src="@drawable/ic_launcher" />

    <ImageView
        android:id="@+id/round_corner_bottom_right"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:src="@drawable/ic_launcher" />

    <ImageView
        android:id="@+id/round_corner"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:src="@drawable/ic_launcher" />

</RelativeLayout>
</LinearLayout> 
```

当您使用包装内容时，您不必担心不同的屏幕尺寸。它会自行管理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T12:14:22.330

我建议您使用[9-patch](http://developer.android.com/tools/help/draw9patch.html)而不是角图像，这是 Android 解决此类问题的方法。

# c# - C# OpenFileDialog 过滤器适用于“文件名”字段

> ID：11578991
> 
> 赞同：0
> 
> 时间：2012-07-20T12:03:00.080
> 
> 标签：c#, openfiledialog

我正在创建一个带有过滤器的 OpenFileDialog，如下所示：

```
 OpenFileDialog lfDialog = new OpenFileDialog();
    lfDialog.Filter = "Lizenzdatei|*.cil";
    lfDialog.DefaultExt = "*.cil"; 
```

我希望该用户只能选择扩展名为 .cil 的文件。但是通过在“文件名”字段中输入其他扩展名为 .cil 的文件名，我可以选择当前目录中具有任何扩展名的任何文件。有没有办法用 OpenFileDialog 属性或方法来超越它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T12:04:40.300

抱歉不行。此验证可以在用户选择其文件后完成。（双击文件或单击确定按）

# java - Javafx 2 TreeView - 隐藏根项目

> ID：11578992
> 
> 赞同：21
> 
> 时间：2012-07-20T12:03:02.390
> 
> 标签：java, treeview, hide, javafx-2

[我使用本教程](http://docs.oracle.com/javafx/2/ui_controls/tree-view.htm)在 JavaFX 2 中创建了自己的 TreeView 。但是我想隐藏我的根节点。

现在的样子：

*   根元素
    *   家长 1
        *   孩子 1
        *   孩子 2
    *   家长 2
        *   孩子 1

它应该看起来如何：

*   家长 1
    *   孩子 1
    *   孩子 2
*   家长 2
    *   孩子 1

谢谢，穆基

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-20T12:23:42.930

隐藏根项目可以通过

```
treeView.setShowRoot(false); 
```

# ios - 检测点击并按住 iOS 键盘键

> ID：11578997
> 
> 赞同：0
> 
> 时间：2012-07-20T12:03:16.577
> 
> 标签：ios, ipad, iphone-sdk-3.0

当我点击并按住 iPhone 键盘上的给定键时，我想要一种自定义方法。它还需要覆盖弹出的备用字符。

我应该从哪里开始？我还没有在 iOS 中尝试过任何太骇人听闻的东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T19:40:12.113

在未越狱的 iOS 中是不可能的。此外，这可能不是一个好主意，因为这仅在 QWERTY 键盘上才有意义。例如，如果没有点击按住，日文 iPhone 键盘将无法使用，而中文键盘有绘图区域而不是按键。——porneL 7 月 20 日 12:53