# StackOverflow 问答 10663000-10663999

# jquery - 关闭后清空对话框

> ID：10663000
> 
> 赞同：0
> 
> 时间：2012-05-19T06:44:50.303
> 
> 标签：jquery, jquery-ui, jquery-dialog

这是一个 jquery 对话框的取消按钮功能。

当我将 Cache: 设置为 false 时，在对话框关闭后清空对话框是否有意义？我有时在 www 看到过这个。

什么情况下需要这个？

```
"Cancel": function() { 
  $(this).dialog("close");
  $(this).empty();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T06:58:58.497

在这种情况下，我看到的唯一用途`empty`是让内存被回收，以提高效率或清除敏感数据。我不知道这背后的其他原因，如果它们存在的话。特别是，我知道在关闭对话框后**不**清空对话框没有任何副作用。

还应该注意的是[`empty`](http://api.jquery.com/empty/)，不仅删除了元素的内容（它的`innerHTML`），而且还删除了所有[`data`](http://api.jquery.com/data/)与它们相关的内容（与子元素一起，即 - 它不会删除元素本身的数据）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T13:42:46.760

我会在关闭时销毁对话框：

```
$(this).dialog('destroy').remove(); 
```

然后当再次调用对话框时，如果不存在具有该 ID 的元素，则对话框将动态创建 div 并打开它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T07:18:50.473

你可以做这样的事情。`$('#divid').html('');`在你的代码中。但请确定。它将清空 div 的所有内容。

# c - 为什么 gcc 会创建冗余的汇编代码？

> ID：10663004
> 
> 赞同：5
> 
> 时间：2012-05-19T06:45:41.167
> 
> 标签：c, optimization, gcc, assembly, compiler-construction

我想研究某些 C/C++ 特性是如何转换为程序集的，我创建了以下文件：

```
struct foo {
    int x;
    char y[0];
};

char *bar(struct foo *f)
{
    return f->y;
} 
```

然后我用`gcc -S`（也试过用`g++ -S`）编译了这个，但是当我查看汇编代码时，我很失望地发现 bar 函数中有一个微不足道的冗余，我认为`gcc`应该能够优化掉：

```
_bar:
Leh_func_begin1:
        pushq   %rbp
Ltmp0:
        movq    %rsp, %rbp
Ltmp1:
        movq    %rdi, -8(%rbp)
        movq    -8(%rbp), %rax
        movabsq $4, %rcx
        addq    %rcx, %rax
        movq    %rax, -24(%rbp)
        movq    -24(%rbp), %rax
        movq    %rax, -16(%rbp)
        movq    -16(%rbp), %rax
        popq    %rbp
        ret
Leh_func_end1: 
```

除其他外，线条

```
 movq    %rax, -24(%rbp)
        movq    -24(%rbp), %rax
        movq    %rax, -16(%rbp)
        movq    -16(%rbp), %rax 
```

看起来毫无意义的多余。gcc（可能还有其他编译器）有什么理由不能/不优化这个吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-19T06:49:44.760

> 我认为 gcc 应该能够优化掉。

从[gcc 手册](http://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html)：

> 在没有任何优化选项的情况下，编译器的目标是降低编译成本并使调试产生预期的结果。

换句话说，除非您要求，否则它不会优化。当我使用该标志打开优化时`-O3`，gcc 4.4.6 会生成更高效的代码：

```
bar:
.LFB0:
        .cfi_startproc
        leaq    4(%rdi), %rax
        ret
        .cfi_endproc 
```

有关更多详细信息，请参阅手册中的[控制优化的选项。](http://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-19T06:49:42.180

编译器在没有优化的情况下生成的代码通常是直接的逐条指令翻译，这些指令不是程序的指令，而是可能引入冗余的中间表示的指令。

如果您希望汇编没有此类冗余说明，请使用`gcc -O -S`

您所期望的优化称为[窥孔优化](http://en.wikipedia.org/wiki/Peephole_optimization)。编译器通常有很多这些，因为与更多的全局优化不同，它们应用起来很便宜并且（通常）不会冒险使代码变得更糟——至少如果在编译结束时应用的话。

在[这篇博文](http://blog.frama-c.com/index.php?post/2012/02/14/Overflows-1)中，我提供了一个示例，当源代码中的整数类型是 64 位但只有最低的 32 位结果很重要时，GCC 和 Clang 都可以生成更短的 32 位指令。

# iphone - 美国电话号码的正则表达式不起作用

> ID：10663006
> 
> 赞同：0
> 
> 时间：2012-05-19T06:45:55.963
> 
> 标签：iphone, objective-c, regex, nsregularexpression

这种类型的问题在 SO 上被问了很多次，但我在表达方面遇到了问题，它对我不起作用。

我只需要在电话号码中允许数字，（，），-，为此我有如下代码。但是只有未注释的表达式有效，并且仅允许数字 no (,),- 并且我搜索并获得了其他应该允许 (,) 的表达式，但这些表达式也不起作用。

有什么问题？例子：`9876545678, (123) 123-7657`

```
 - (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
    {
        if ([string isEqualToString:@""]) {
            return TRUE;
        }
        if(textField == aTfdPhone)
        {
            if ([string isEqualToString:@"."]) {
                    return NO;
                 }
             NSString *newString = [textField.text stringByReplacingCharactersInRange:range withString:string];

             NSString *expression = @"^([0-9]+)?(\\.([0-9])?)?$";
    //       NSString *expression = @"^[(]?[2-9][0-9]{2}[)]?[ -]?[0-9]{3}[ -]?[0-9]{4}$";
       //      NSString * const expression = @"^([+-]{1})([0-9]{3})$";
             NSError *error = nil;

             NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:expression 
                                                         options:NSRegularExpressionCaseInsensitive 
                                                         error:&error];
            if (error) {
                NSLog(@"error %@", error);
            }
            NSUInteger numberOfMatches = [regex numberOfMatchesInString:newString
                                                       options:0
                                                    range:NSMakeRange(0, [newString length])];
            if (numberOfMatches == 0){
                    return NO;
             }
        }
        return TRUE; 
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T07:09:31.673

`(123) 123-7657`由于第一个数字，您的第二次尝试无法识别：

它应该是

```
 NSString *expression = @"^[(]?[1-9][0-9]{2}[)]?[ -]?[0-9]{3}[ -]?[0-9]{4}$"; 
```

不是

```
 NSString *expression = @"^[(]?[2-9][0-9]{2}[)]?[ -]?[0-9]{3}[ -]?[0-9]{4}$"; 
```

唯一的区别是匹配第一个数字的运算符`[2-9]`不会匹配 1。

# iphone - 如何在 iOS 中使用 NSRange 或 NSScanner

> ID：10663014
> 
> 赞同：0
> 
> 时间：2012-05-19T06:47:28.837
> 
> 标签：iphone, regex, nsstring, nsattributedstring, nsregularexpression

我有一个像这样的字符串：

`1 this is my first text 2 his is my second 3 this is my third 4 this is my forth etc etc..`

每个句子都在数字之间`characters like 1 2 3 4 etc`

当我点击第一句话时，它需要对其进行剖析并将其复制到剪贴板或其他东西中。我们如何使用 NSScanner 或 NSRange 来计算字符串大小或识别数字字符之间的字符串。

self.multiPageView.text =组合；组合包含上面的文本，所以当我点击第一个句子时，它需要选择并显示一个符合被点击句子的 UIAlertView 是第一个句子，如何通过点击那个句子来检测数字字符之间的句子，比如 ibook。我正在使用核心文本来显示这些类型的文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T06:57:17.560

使用`NSScanner`喜欢 -

```
NSString *yourString = @"1 this is my first text 2 his is my second 3 this is my third 4 this is my forth";

NSScanner *scanner = [NSScanner scannerWithString:yourString];

[scanner scanUpToString:@"1" intoString:nil];
if (![scanner isAtEnd]) {
    [scanner scanUpToString:@"1" intoString:nil];
    NSCharacterSet *charset = [NSCharacterSet characterSetWithCharactersInString:@"2"];
    [scanner scanUpToCharactersFromSet:charset intoString:&yourString];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T07:12:17.253

试试这个，你会得到一个数组，其中会有所有分隔的字符串。你必须用你正在使用的数字填充集合。

```
 NSString *str1 = @"1 this is my first text 2 his is my second 3 this is my third 4 this is my forth";
    NSMutableCharacterSet *set = [NSMutableCharacterSet controlCharacterSet];
    [set addCharactersInString:@"1"];
    [set addCharactersInString:@"2"];
    [set addCharactersInString:@"3"];
    [set addCharactersInString:@"4"];
    NSArray *arr = [str1 componentsSeparatedByCharactersInSet:set]; 
```

# php - 与 MySQL 的交易？

> ID：10663016
> 
> 赞同：0
> 
> 时间：2012-05-19T06:47:38.303
> 
> 标签：php, mysql, transactions

我有 InnoDB 存储引擎的表。我想在一切正确时开始插入过程。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T06:50:01.703

**您可以使用支持事务的MySQLi**类 轻松做到这一点。

***这是一个例子：***

```
<?php
    $mysqli = new mysqli("example.com", "user", "password", "database");
    $mysqli->autocommit(false);

    $mysqli->query("INSERT INTO test(id) VALUES (1)");
    $mysqli->rollback();

    $mysqli->query("INSERT INTO test(id) VALUES (2)");
    $mysqli->commit();
?> 
```

[在这里您可以找到一些文档和示例。](http://php.net/manual/en/mysqli.quickstart.transactions.php#example-1593)

此外，如果您使用的是框架，请查看它的文档。通常有一个非常酷的交易实现和方法。

下面是 CodeIgniter 中非常智能的事务算法的示例：

```
$this->db->trans_start();
$this->db->query('AN SQL QUERY...');
$this->db->query('ANOTHER QUERY...');
$this->db->query('AND YET ANOTHER QUERY...');
$this->db->trans_complete(); 
```

如果其中一个查询出现错误，CodeIgniter 会自动处理事务，并且角色会返回更改。 [CodeIgniter 的事务处理方法](http://codeigniter.com/user_guide/database/transactions.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T07:14:02.810

无论您使用哪个 PHP 库，您始终可以使用以下任一语句启动事务：

*   `SET autocommit = off`
*   `BEGIN`
*   `START TRANSACTION`

一旦开始，你可以做很多工作，当你准备好永久保存它时，做一个提交：

*   `COMMIT`

或者，当您想要撤消正在进行的工作（直到上一个提交时刻）时，发出回滚：

*   `ROLLBACK`

您可以使用任何用于 mysql 的 php 库将这些作为普通 SQL 语句简单地运行。

# asp.net - 在asp.net的gridview中绑定下拉列表

> ID：10663018
> 
> 赞同：0
> 
> 时间：2012-05-19T06:47:59.320
> 
> 标签：asp.net, html.dropdownlistfor

**html代码：**

```
 <ItemTemplate>
            <asp:Literal ID="faculty" runat="server" Text='<%#Eval("facultyname")%>'>
            </asp:Literal>
        </ItemTemplate>
        <EditItemTemplate>
            <asp:DropDownList ID="fact" runat="server">
            </asp:DropDownList> 
```

**代码后置：**

```
protected void GridView1_RowEditing(object sender, GridViewEditEventArgs e)

        {
            DropDownList dropdown = GridView1.Rows[e.NewEditIndex].FindControl("fact") as DropDownList;
            facultyDal c = new facultyDal();
            dropdown.DataSource = c.show();
            dropdown.DataBind();
            dropdown.DataTextField = "facultyname";
            dropdown.DataValueField = "facultyid";

        } 
```

**例外：**

你调用的对象是空的。

当我使用数据源绑定到下拉列表时，会发生上述异常，请帮助....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T06:41:53.073

使用 RowDataBound 尝试这样的操作。

在编辑模式下绑定

```
protected void RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow && gvCustomers.EditIndex == e.Row.RowIndex)
    {
        DropDownList ddlfaculties = (DropDownList)e.Row.FindControl("fact");
        string query = "select distinct facultyname from your-Table-Name";
        SqlCommand cmd = new SqlCommand(query);
        ddlfaculties .DataSource = GetData(cmd);
        ddlfaculties .DataTextField = "facultyname";
        ddlfaculties .DataValueField = "facultyid";
        ddlfaculties .DataBind();
        ddlfaculties .Items.FindByValue((e.Row.FindControl("faculty") as Literal).Text).Selected = true;
    }
} 
```

用于更新下拉列表中的选定值。

```
protected void RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow && gvCustomers.EditIndex == e.Row.RowIndex)
    {
        DropDownList ddlfaculties = (DropDownList)e.Row.FindControl("fact");
        string query = "select distinct facultyname from Your-Table-Name";
        SqlCommand cmd = new SqlCommand(query);
        ddlfaculties .DataSource = GetData(cmd);
        ddlfaculties .DataTextField = "facultyname";
        ddlfaculties .DataValueField = "facultyid";
        ddlfaculties .DataBind();
        ddlfaculties .Items.FindByValue((e.Row.FindControl("faculty") as Literal).Text).Selected = true;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T07:35:26.153

由于您在启用编辑模式之前尝试将数据绑定到下拉列表而出现错误。

```
protected void GridView1_RowEditing(object sender, GridViewEditEventArgs e)
{
    GridView1.EditIndex = e.NewEditIndex;
    gridbind();//fetch data from database and bind to grid
    DropDownList dropdown = GridView1.Rows[e.NewEditIndex].FindControl("fact") as DropDownList;
    facultyDal c = new facultyDal();
    dropdown.DataSource = c.show();
    dropdown.DataBind();
    dropdown.DataTextField = "facultyname";
    dropdown.DataValueField = "facultyid";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T11:47:08.783

将您的代码更改为以下

**GridView1.EditIndex**

```
DropDownList dropdown = GridView1.Rows[GridView1.EditIndex].FindControl("fact") as DropDownList; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T11:54:05.387

使用网格视图 rowdatabound evet 我们可以将数据绑定到网格视图中的 Web 控件

[获取行并使用编辑索引找到控件然后绑定数据](http://forums.asp.net/p/1857575/5206062.aspx/1?Bind%20data%20to%20dropdown%20in%20gridview%20)

# php - 用于打开相机并将图像上传到服务器的 Android 活动

> ID：10663019
> 
> 赞同：0
> 
> 时间：2012-05-19T06:48:11.363
> 
> 标签：php, android, android-camera, image-uploading

> **可能重复：**
> [从活动中调用相机，捕获图像并上传到服务器](https://stackoverflow.com/questions/10679571/calling-camera-from-an-activity-capturing-an-image-and-uploading-to-a-server)

这是我在互联网上获得的代码：

```
package com.android.imageuploader;

import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.InputStream;

import com.android.imageuploader.R;

import android.app.Activity;
import android.content.Intent;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.ImageView;

public class ImageUploaderActivity extends Activity {
    private static final int REQUEST_CODE = 1;
    private Button button_1;
    public int TAKE_PICTURE = 1;
    private ImageView image_view;
    private Bitmap bitmap;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        image_view = (ImageView) findViewById(R.id.result);
        button_1 = (Button) findViewById(R.id.button1);

        button_1.setOnClickListener(new View.OnClickListener() {

            public void onClick(View arg0) {

                Intent intent = new Intent("android.media.action.IMAGE_CAPTURE");
                startActivityForResult(intent, TAKE_PICTURE);
            }
        });
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        // TODO Auto-generated method stub
        if (requestCode == REQUEST_CODE && resultCode == Activity.RESULT_OK)
            try {
                // We need to recyle unused bitmaps
                if (bitmap != null) {
                    bitmap.recycle();
                }
                InputStream stream = getContentResolver().openInputStream(
                        data.getData());
                bitmap = BitmapFactory.decodeStream(stream);
                stream.close();
                image_view.setImageBitmap(bitmap);
            } catch (FileNotFoundException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
        super.onActivityResult(requestCode, resultCode, data);
    }
} 
```

这显示了一个按钮和一个 imageView（最初包含默认图像），当我单击该按钮时，它会将我带到画廊，并且当我单击任何图像时，该图像将提供给 imageView。我在这里有两个问题：1.如何使按钮将我带到相机以及当我捕获图像时 2.将其直接上传到网络服务器

XML:

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:onClick="pickImage"
        android:text="Button" >
    </Button>

    <ImageView
        android:id="@+id/result"
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:src="@drawable/wic_logo_small" >
    </ImageView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T06:55:42.683

当用户单击按钮时，您需要通过意图打开相机，例如

```
 public int TAKE_PICTURE =1
    Intent intent = new Intent("android.media.action.IMAGE_CAPTURE");
    startActivityForResult(intent, TAKE_PICTURE); 
```

在 onactivityresult 中，您将获得从相机捕获的图像。

现在您必须将该图像上传到服务器

请通过以下网址

[Android 将 Base64 字符串发布到 PHP](https://stackoverflow.com/questions/9920967/android-post-base64-string-to-php/9921230#9921230)

# windows-phone-7 - wp7中如何禁用Scroll Viewer的弹跳效果？

> ID：10663020
> 
> 赞同：1
> 
> 时间：2012-05-19T06:48:27.120
> 
> 标签：windows-phone-7, scroll, viewer

我想禁用滚动查看器的反弹效果，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T09:48:27.870

在内部， ScrollViewer 使用[ScrollContentPresenter](http://msdn.microsoft.com/en-us/library/system.windows.controls.scrollcontentpresenter.aspx)，这个没有显示任何类型的属性来改变反弹行为，也没有我们可以编辑来改变控制行为的 Template 属性......

# css - 如何使图像与页面的左下角对齐？

> ID：10663021
> 
> 赞同：1
> 
> 时间：2012-05-19T06:48:38.430
> 
> 标签：css

我试图将图像附加到页面的左下角，但与[How to keep background image on bottom left even](https://stackoverflow.com/questions/3243236/how-to-keep-background-image-on-bottom-left-even-scrolling) scroll 不同，我不希望图像在用户滚动时跟随用户。

我觉得这与让#wrap 填满整个窗口有关，但我似乎无法弄清楚如何。

我正在使用规范化，并将此代码附加到样式表中：

```
body {
    background-image:url('/img/graph-paper3.png');
    background-repeat:repeat;
}

#container {
    width:960px;
    margin:0 auto;
}
#sidebar {
    float:left;
    width:310px;
    padding:10px;

}

#main {
    float:right;
    width:610px;
    padding:0 10px 10px 10px;
    margin-top: 40px;
    background-image:url('/img/top.png');
    background-repeat:no-repeat;
    background-position:top center;
}

#paper {
    margin:40px 0 147px 0;
    padding:20px;
    background-color:#ffffff;
    min-height:400px;
}

#footer {
    clear:both;
    padding:5px 10px;

}
#footer p {
    margin:0;
}

#wrap {
    background-image:url('/img/jeremy-david.png');
    background-repeat:no-repeat;
    background-position:left bottom;
} 
```

您可以在此处查看实际代码：http: [//www.jeremydavid.com](http://www.jeremydavid.com)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T06:54:35.853

怎么样：

```
.bottom-image{
    position: absolute;
    bottom: 0px;
    left: 0px;
} 
```

这会将图像绝对定位到页面。（确保它不是另一个绝对或相对或固定定位元素的子元素）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T07:09:11.633

采用

```
.bottom-image {
  max-width: //some % 
  z-index: -100;
  position: fixed;
  bottom: 0px;
  left: 0px;
} 
```

你也可以使用

```
#wrap{ //your main #wrap container
  background: url('/img/jeremy-david.png') no-repeat bottom left;
} 
```

# xslt - 在 XSL 转换期间基于字符计数序列化 XML 文件

> ID：10663026
> 
> 赞同：-1
> 
> 时间：2012-05-19T06:49:44.597
> 
> 标签：xslt

我有一个XML文档`A.xml`（这部分已经完成。`B.xml``A.xml``@id``B.xml`

现在我想实现一种机制，该机制将跟踪（在临时树内）内`character count`的每个文本节点，`B.xml`并且基于`maximum character count`，该机制将能够`B.xml`在一个或多个部分中拆分和序列化。

**源 XML 文档 ( `A.xml`)：**

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
    <!--
    Rules for splitting:
    1\. «head/text()» is common for all splits.
    2\. split files can have 600 characters max each.
    3\. «title» elements could not be the last element of the any result document.
    -->
    <head><!-- 8 characters -->Kinesics</head>
    <section>
        <para><!-- 37 characters -->From Wikipedia, the free encyclopedia</para>
        <para><!-- 204 characters [space normalized]-->Kinesics is the interpretation of body
            language such as facial expressions and gestures — or, more formally, non-verbal
            behavior related to movement, either of any part of the body or the body as a
            whole. </para>
        <section>
            <title><!-- 19 characters -->Birdwhistell's work</title>
            <para><!-- 432 characters [space normalized]-->The term was first used (in 1952) by Ray
                Birdwhistell, an anthropologist who wished to study how people communicate through
                posture, gesture, stance, and movement. Part of Birdwhistell's work involved making
                film of people in social situations and analyzing them to show different levels of
                communication not clearly seen otherwise. The study was joined by several other
                anthropologists, including Margaret Mead and Gregory Bateson.</para>
            <para><!-- 453 characters [space normalized]--> Drawing heavily on descriptive
                linguistics, Birdwhistell argued that all movements of the body have meaning (i.e.
                are not accidental), and that these non-verbal forms of language (or paralanguage)
                have a grammar that can be analyzed in similar terms to spoken language. Thus, a
                "kineme" is "similar to a phoneme because it consists of a group of movements which
                are not identical, but which may be used interchangeably without affecting social
                meaning".</para>
        </section>
        <section>
            <title><!-- 19 characters -->Modern applications</title>
            <para><!-- 390 characters [space normalized]-->Kinesics are an important part of
                non-verbal communication behavior. The movement of the body, or separate parts,
                conveys many specific meanings and the interpretations may be culture bound. As many
                movements are carried out at a subconscious or at least a low-awareness level,
                kinesic movements carry a significant risk of being misinterpreted in an
                intercultural communications situation.</para>
        </section>
    </section>
</root> 
```

***XSL 文件***

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:transform xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:xs="http://www.w3.org/2001/XMLSchema" exclude-result-prefixes="xs" version="2.0">
    <xsl:output method="xml" encoding="UTF-8" indent="no"/>

    <!--update 1-->
    <xsl:strip-space elements="*"/>

    <xsl:template match="/">
        <xsl:variable name="root-replica">
            <xsl:call-template name="create-root-replica">
                <xsl:with-param name="context" select="*"/>
            </xsl:call-template>
        </xsl:variable>
        <xsl:copy-of select="$root-replica"/>
        <!--
            <xsl:call-template name="split-n-serialize">
            <xsl:with-param name="context" select="$root-replica"/>
            </xsl:call-template>
        -->
    </xsl:template>

    <xsl:template name="split-n-serialize">
        <xsl:param name="context"/>
        <xsl:for-each select="$context">
            <xsl:result-document encoding="utf-8" href="{concat('split_',position(),'.xml')}" method="xml" indent="no">
                <xsl:sequence select="."/>
            </xsl:result-document>
        </xsl:for-each>
    </xsl:template>

    <xsl:template name="create-root-replica">
        <xsl:param name="context"/>
        <root>
            <head>
                <xsl:value-of select="$context/head"/>
            </head>
            <xsl:apply-templates select="$context/*[not(self::head)]"/>
        </root>
    </xsl:template>

    <xsl:template match="element()">
        <xsl:element name="{local-name()}">
            <xsl:attribute name="id">
                <xsl:value-of select="generate-id()"/>
            </xsl:attribute>
            <xsl:apply-templates/>
        </xsl:element>
    </xsl:template>

    <!--update 2-->
    <xsl:template match="text()">
        <xsl:value-of select="normalize-space(.)"/>
    </xsl:template>

</xsl:transform> 
```

* * *

我的输入 XML 包含`1562`字符（假设`\s+`等于`），我喜欢`A.xml`使用源 xml 文档中提到的规则分成 4 个部分。`

 `有谁知道如何做到这一点？非常感谢任何想法或意见。

**更新 3**

*拆分文件的详细信息*

```
1st File
       8
      37
     204  =  249
2nd File
       8
      19
     432  =  459
3rd File
       8
     453  =  461
4th File
       8
      19
     390  =  417 
```

*拆分程序的详细信息：*

1.  元素 «head» 的内容应该是每个 XML 文件的一部分。

2.  文件可以从部分中间拆分，但不能在段落中间拆分。

3.  不是 «title» 元素应该出现在拆分的末尾。

4.  拆分文件中的最大字符数（不包括开始和结束标签）最多为 600 个。

*示例输出文件（缩进用于更好的可读性）*

***第一个文件***

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
    <head>Kinesics</head>
    <section id="d1e6">
        <para id="d1e7">From Wikipedia, the free encyclopedia</para>
        <para id="d1e10">Kinesics is the interpretation of body language such as facial expressions and gestures — or, more formally, non-verbal behavior related to movement, either of any part of the body or the body as a whole.</para>
    </section>
</root> 
```

***第二个文件***

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
    <head>Kinesics</head>
    <section id="d1e6">
        <section id="d1e13">
            <title id="d1e14">Birdwhistell's work</title>
            <para id="d1e17">The term was first used (in 1952) by Ray Birdwhistell, an anthropologist who wished to study how people communicate through posture, gesture, stance, and movement. Part of Birdwhistell's work involved making film of people in social situations and analyzing them to show different levels of communication not clearly seen otherwise. The study was joined by several other anthropologists, including Margaret Mead and Gregory Bateson.</para>
        </section>
    </section>
</root> 
```

***第三个文件***

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
    <head>Kinesics</head>
    <section id="d1e6">
        <section id="d1e13">
            <para id="d1e20">Drawing heavily on descriptive linguistics, Birdwhistell argued that all movements of the body have meaning (i.e. are not accidental), and that these non-verbal forms of language (or paralanguage) have a grammar that can be analyzed in similar terms to spoken language. Thus, a "kineme" is "similar to a phoneme because it consists of a group of movements which are not identical, but which may be used interchangeably without affecting social meaning".</para>
        </section>
    </section>
</root> 
```

***第 4 个文件***

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
    <head>Kinesics</head>
    <section id="d1e6">
        <section id="d1e23">
            <title id="d1e24">Modern applications</title>
            <para id="d1e27">Kinesics are an important part of non-verbal communication behavior. The movement of the body, or separate parts, conveys many specific meanings and the interpretations may be culture bound. As many movements are carried out at a subconscious or at least a low-awareness level, kinesic movements carry a significant risk of being misinterpreted in an intercultural communications situation.</para>
        </section>
    </section>
</root> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T13:50:36.230

您将使用[`string-length()`](http://www.w3.org/TR/xpath-functions/#func-string-length)获取“字符数”，然后[`xsl:result-document`](http://www.w3.org/TR/xslt20/#element-result-document)将结果树分成几部分。

您是否需要进一步的帮助对其进行编码？`

# c - 错误：从类型“void *”分配给类型“值”时类型不兼容？

> ID：10663031
> 
> 赞同：3
> 
> 时间：2012-05-19T06:50:05.623
> 
> 标签：c

当我尝试为我的整数结构分配一些内存时，我收到了这个错误。

```
typedef struct _values {
random ints;
} values; 
```

我已经尝试了以下几行，但我的编译器不喜欢它。如何修复错误？

```
values v;
v = malloc(sizeof(values)); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T06:53:26.993

您忘记在 之后`values`和之前添加星号 (*)`v`以将其标记为指针：`values *v;`

您现在设置它的方式，v（不带星号）被定义为堆栈变量，并将在堆栈上分配并在函数结束后丢弃。它的类型将是简单的`values`。 `malloc`用于在堆上分配内存并返回指向内存的指针。正弦函数无法知道它作为类型返回的`void *`类型-这会给您带来错误-您试图将`void *`类型分配给`struct`编译器无法执行的类型，编译器也无法找到合法的可以解决问题的演员表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T06:53:24.120

在这种情况下你不需要`malloc`记忆；该行`values v;`已经分配了内存（“在堆栈上”）。当您离开当前范围时，它将自动释放。

如果您真的想在“堆上”分配内存，以便它在当前范围之外持续存在，您需要`v`成为一个指针；那是：

```
values *v;
v = malloc(sizeof(values)); 
```

完成后记住`free`它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-19T06:56:44.587

`values v;`

这是在堆栈上分配的结构的一个实例。

`v = malloc(sizeof(values));`

malloc 返回一个`void*`指针，编译器不允许您将指针分配给实例。

您需要声明一个指针，然后将 malloc 返回指针分配给它。

类似的东西

值 *v = NULL；

```
v = malloc(sizeof(values)); 
```

# python - Pydev/OpenCV：安装错误

> ID：10663032
> 
> 赞同：0
> 
> 时间：2012-05-19T06:50:22.690
> 
> 标签：python, eclipse, opencv, pydev

我有一**台 Mac（OS X 10.7.3 64 位）**并且正在使用`OpenCV and Python`.

我能够使用支持 Python 的**MacPorts 安装 OpenCV 。**

我安装了**2.7 Python 解释器**，将站点包导出到`PYTHONPATH`（这是我的位置`cv2.so and cv.py`）。

我可以`OpenCV Python programs`通过命令行运行我的。

我安装了**Eclipse + PyDev**，选择了相同的解释器。

现在，在我创建的任何项目的项目属性中，我将**站点包目录**添加到系统库中。如果我保存并运行，我会收到以下错误：

> 文件“/Users/harishvenkatesan/Documents/Eclipseworkspace/helloworldpython/src/org/eclipse/python/standard.py”，第 10 行，在`<module>`

```
import cv 
```

> 文件“/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/cv.py”，第 1 行，在`<module>`

```
from cv2.cv import * 
```

> ImportError：动态模块没有定义初始化函数（PyInit_cv2）

PyDev 似乎找到了正确的位置，因为 from`cv2.cv import *`是 cv.py 中的语句。但我无法修复此错误。我在网上做了一些搜索，但找不到任何解决方案。

有人对此有任何想法吗？非常感激！我的 Eclipse 和其他所有东西都是 64 位的，所以我不确定这是否是 32-64 位不匹配。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T02:01:31.887

代替

```
import cv 
```

我用

```
import cv2.cv as cv 
```

它有效。希望它也对你有用:)

# android - Android 滚动时在列表视图中显示 Blob 图像。

> ID：10663036
> 
> 赞同：0
> 
> 时间：2012-05-19T06:51:23.247
> 
> 标签：android, image, listview

您好我想在用户滚动列表时在列表视图中显示图像。我从数据库（blob）而不是从 Web 服务中检索图像。 **例如，** 我在列表视图中有 40 个项目，而在我的移动屏幕中可以看到 10 个项目。当我滚动列表时，它会加载下一个图像。我不想同时加载 40 张图片。列表将显示第一个可见位置和最后一个可见位置之间的图像。

*   就像在 twitter 应用程序中一样，当用户滚动时，图像首先是空白的，然后它会加载到列表视图中

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T07:04:03.070

您找到的解决方案称为延迟加载适配器，[本教程](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)将根据您的需要工作，请检查此链接，这会以延迟方式加载图像。

# mongodb - 使用 rails 表单访问 mongoid 中的子集合以编辑和创建新条目

> ID：10663038
> 
> 赞同：1
> 
> 时间：2012-05-19T06:51:40.503
> 
> 标签：mongodb, ruby-on-rails-3, mongoid, nosql

我在rails3中使用mongodb和mongoid。我是这一切的新手。我的模型如下图所示。

```
class Californium
 include Mongoid::Document 
 field :first_name 
 field :License_type
 Field :Licese_expiry_date
embeds_one :address 
end

class Address 
 include Mongoid::Document 
 field :street 
 field :city 
 field :state 
 field :zip 
embedded_in :Californium, :inverse_of => :address 
end 
```

我的控制器

```
 class CaliforniaController < ApplicationController

   def index
    @california = Californium.all
    respond_to do |format|
    format.html # index.html.erb
    format.xml  { render :xml => @california }
    end
   end

   def show
    @californium = Californium.find(params[:id])  
     respond_to do |format|
     format.html # show.html.erb
     format.xml  { render :xml => @californium }
     end
   end

  # Here is where I have problem. I am not able to show a 
  # form with californium address details. My form view is show after the controller

   def new        
     @californium = Californium.new
     respond_to do |format|
     format.html # new.html.erb
     format.xml  { render :xml => @californium }
     end
   end

    def edit
     @californium = Californium.find(params[:id])
    end

 end 
```

我的表格

```
<%= form_for(@californium) do |f| %>

<div class="field">
<%= f.label :license_number %><br />
<%= f.text_field :license_number %>
</div>

<div class="field">
<%= f.label :name %><br />
<%= f.text_field :name %>
</div>
<div class="field">
<%= f.label :license_type %><br />
<%= f.text_field :license_type %>
</div>
<div class="field">
<%= f.label :license_status %><br />
<%= f.text_field :license_status %>
</div>
<div class="field">
<%= f.label :license_expire_date %><br />
<%= f.text_field :license_expire_date %>
</div>
<div class="field">
<%= f.label :license_issue_date %><br />
<%= f.text_field :license_issue_date %>
</div>

<div class="field">

 # Here I am not able to access :address.street and :address.city as it is an other 
 # model embedded in californium

<%= f.label :address.street %><br />
<%= f.text_field :address.street %>
</div>

<div class="field">
<%= f.label :address.city %><br />
<%= f.text_field :address.city %>
</div>

<div class="actions">
<%= f.submit %>
</div>
<% end %> 
```

我正在尝试构建一个表格，可以在其中编辑 californium 的所有细节。我无法访问 californium 的地址详细信息，因为它是 californium 集合的子集合。我能够显示 californium 的所有详细信息，包括地址，但不知道如何创建可编辑的表单。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T20:10:08.937

尝试为您的嵌入式模型使用表单助手“fields_for”，如下面的工作示例所示。希望这会有所帮助。

花了一些时间来解决拼写错误和不一致的问题，所以如果您以后想要更快的答案，请让您的问题尽可能准确和最小化。

```
class Californium
  include Mongoid::Document
  field :name
  field :license_type
  embeds_one :address
end

class Address
  include Mongoid::Document
  field :street
  field :city
  field :state
  field :zip
  embedded_in :california, :inverse_of => :address
end 
```

应用程序/视图/edit.html.erb

```
<%= form_for :californium do |f| %>

    <div class="field">
      <%= f.label :name %>
      <br/>
      <%= f.text_field :name %>
    </div>
    <div class="field">
      <%= f.label :license_type %>
      <br/>
      <%= f.text_field :license_type %>
    </div>

    <%= fields_for @californium.address do |af| %>
        <div class="field">
          <%= af.label :street %>
          <br/>
          <%= af.text_field :street %>
        </div>

        <div class="field">
          <%= af.label :city %>
          <br/>
          <%= af.text_field :city %>
        </div>
    <% end %>

    <div class="actions">
      <%= f.submit %>
    </div>

<% end %> 
```

配置/路由.rb

```
 match 'california/:id' => 'california#edit', via: :get
  match 'california/:id' => 'california#update', via: :post 
```

测试/功能/california_controller_test.rb

```
require 'test_helper'

class CaliforniaControllerTest < ActionController::TestCase
  def setup
    Californium.delete_all
  end

  test "form" do
    cal = Californium.create(name: 'Benjamin Spock', license_type: 'MD', address: Address.new(street: '311 Temple St', city: 'New Haven', state: 'CT', zip: '06511'))
    assert_equal(1, Californium.count)
    p Californium.find(cal.id)
    get :edit, id: cal.id
    assert(assigns(:californium))
    assert_response(:success)
    puts @response.body
  end
end 
```

# ios - 自定义表格视图单元格选择字体颜色

> ID：10663039
> 
> 赞同：9
> 
> 时间：2012-05-19T06:52:04.683
> 
> 标签：ios, ios5, uitableview

我有一个习惯`UITableViewCell`。它内部有 3 个自定义标签和自定义文本。

当我点击单元格时，我希望所有这些标签的 textColor 变为白色。就像电子邮件应用程序`UITableViewCell`行为一样。

为此，我在自定义单元类中编写了这个。

```
- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    [super setSelected:selected animated:animated];

    // Configure the view for the selected state

    if (self.selected) {
        _subjectLabel.textColor = [UIColor whiteColor];
        _messageLabel.textColor = [UIColor whiteColor];
        _usernameLabel.textColor = [UIColor whiteColor];
    }else {
        _subjectLabel.textColor = [UIColor blackColor];
        _messageLabel.textColor = [UIColor grayColor];
        _usernameLabel.textColor = [UIColor blackColor];
    }

} 
```

我能够得到它。但它不像在电子邮件应用程序中那样流畅。颜色仅在一小段延迟后发生变化。我应该重写哪种方法`UITableViewCell`来放入此代码。我知道以下选项，但它们不会将行为赋予自定义单元格中的自定义标签。

```
typedef enum {
    UITableViewCellSelectionStyleNone,
    UITableViewCellSelectionStyleBlue,
    UITableViewCellSelectionStyleGray
} UITableViewCellSelectionStyle; 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-21T03:50:52.143

设置标签的高亮文本颜色，这一切都会自动为您完成。您根本不需要在**setSelected**中做任何特别的事情。

例如

```
_subjectLabel.highlightedTextColor = [UIColor whiteColor]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T07:00:57.733

当我们选择任何单元格时`UITableView`，`-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath`立即调用方法，您可以使用它。

# php - 如何在 PHP 中一起执行多个 mysql 查询？

> ID：10663046
> 
> 赞同：3
> 
> 时间：2012-05-19T06:53:28.433
> 
> 标签：php, mysql, sql

我想要一个选择查询和一个插入查询，我想使用函数（mysql_query）将它们一起执行，但它不起作用。我想做这样的事情：

```
$sql="select * from texts; insert into date ('time') values ('2012');";
mysql_query($sql); 
```

有什么办法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T07:02:30.493

`mysql_query()`发送唯一查询**（不支持多个查询）**。这是默认行为。但是有一个绕过这个。

`mysql_query()`但是，如果您这样做，则仅第一个查询的结果代码将作为输出给出。

您只需将标志 65536 作为 mysql_connect 的第 5 个参数传递。该标志在[MySQL Client flags](http://www.php.net/manual/en/mysql.constants.php#mysql.client-flags)中定义。

```
#define CLIENT_MULTI_STATEMENTS 65536 /* Enable/disable multi-stmt support */
#define CLIENT_MULTI_RESULTS 131072 /* Enable/disable multi-results */ 
```

所以编辑你的`mysql_connect()`代码以匹配这个：

```
mysql_connect($host, $username, $password, false, 65536); 
```

**警告：**

1.  您将**仅**在给定`mysql_query($query)`的. 您可以尝试连接 以获得多个结果。**`$query``131072``65536`**
***   这不适用于 PHP < 4.3.0*   *如果在php.ini*`sql.safe_mode`中设置为 1，这将不起作用**

 **** * *

另一种选择是使用`mysqli` 而不是`mysql`库。它支持 `$mysqli->multi_query()` 并在数组中为每个查询提供输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T07:02:23.320

MySQL 不允许在单个语句中传递多个选择查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T07:04:11.587

`mysql_query()`不支持以正常方式执行多个查询。使用类似下面的东西。

```
<?php
$str="query1;query2;"; // say $str="select * from texts; insert into date ('time') values ('2012');";

$query = explode(';',$str);

// Run the queries
foreach($query as $index => $sql)
{
   $result = mysql_query($sql);    
   // Perform an additional operations here
}
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T07:10:01.080

没有一个 mysql api 可以同时处理多个查询，即使是 mysql consol 实用程序也会解析您的输入并执行一个又一个查询，而 php 的 mysql_query 不能。您可以编写自己的函数来执行此操作，也可以将所有查询放在一个数组中，然后为循环中的每个元素执行 mysql_query。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-19T07:10:04.817

您可以使用 mysqli_multi_query 函数，但可以使用 PHP mysqli 扩展。（我建议您使用 mysqli 而不是 PHP 的 mysql 扩展，因为它包含更多功能和设施）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-19T07:13:23.020

`mysql_query()`发送唯一查询

见[mysql_query](http://php.net/manual/en/function.mysql-query.php)

对于多个查询，您可以看到**[mysqli](http://bd.php.net/manual/en/book.mysqli.php)*****

# c# - Crystal Reports：数据库登录失败

> ID：10663050
> 
> 赞同：1
> 
> 时间：2012-05-19T06:54:18.020
> 
> 标签：c#, asp.net, crystal-reports

我在 ASP.NET (C#) 中有应用程序，我在其中使用 Sap Crystal Reports for Visual Studio。在 VS 中，一切都很完美。但是当我将它部署到 IIS 时出现“数据库登录失败”错误。当我设置 CrystalReportViever“启用数据库登录提示”时，它让我询问用户名和密码，但不会产生错误，也不会显示报告。我设置“启用数据库登录提示”仅用于测试目的，否则我通过 ReportDocument.SetDatabaseLogon（用户，密码，“我的 dsn 名称”，“”）发送登录参数。同样，一切都在 VS 中完美运行。我正在使用： - Windows 7 Enterprise 64 位 - Visual Studio 2010 (C#) - Sap Crystal Reports，

我期待着您的回答。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T16:35:56.383

呃，甲骨文。:) 通常我不会将 System DSN 与 Crystal 一起使用，但对于 Oracle，这是我能够连接它的唯一方法。我记得，您需要确保在“32 位 ODBC 数据源管理器”中的服务器上设置了 Oracle 的 DSN。这是我能够成功让 Oracle 通过 Crystal 连接的唯一方法。

通过 .Net（C# 或 VB），这是另一回事。在这种情况下，我认为您的 App Pool 身份并不重要，因为您可能会使用 Oracle 用户名/密码进行连接。

我回答的 90% 的问题都与 Crystal Reports 和更改连接信息有关。在这篇博文中，我在包装器中使用了一些代码：

[http://www.blakepell.com/2012-05-22-crystal-reports-extension-methods](http://www.blakepell.com/2012-05-22-crystal-reports-extension-methods)

用户名是 oracle 用户名，密码是 oracle 密码，但是服务器名称是 DSN 的名称。不要问我为什么，但这总是对我有用。:p

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T14:31:42.600

我们有类似的问题/错误消息：CR 在包括生产服务器在内的大多数 PC 上运行良好，但在一个特定的开发人员上运行良好。电脑它没有。我们检查了数据库源驱动程序，并且“SQL Server 客户端”和“SQL Server Native Client”存在时缺少“SQL Native Client”。我们从这里[http://www.microsoft.com/en-us/download/details.aspx?id=11988](http://www.microsoft.com/en-us/download/details.aspx?id=11988)（对于 64 位操作系统）安装了 2005 版，它开始工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T06:13:10.283

谢谢大家的时间。

我以前使用过用户 DSN，并且在部署应用程序时出现“无法打开连接。无法打开连接'报告名称'.rpt”。后来我把它改成了SystemDSN。以前的错误消失了，但这次出现“数据库登录失败”错误。

最后，我通过将连接形式 System DSN 更改为 Oracle Server 解决了我的问题。现在一切都很好。如果您有同样的问题，请考虑这一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-19T18:10:41.520

我在这个 Crystal 问题上度过了一段糟糕的时光，该报告在本地和另一台服务器上工作，但无法在我们的生产环境中工作。

问题是 SQL Native 客户端未安装在 Prod 服务器上。我们修改了报告以使用 OLEDB。

```
Report Designer -> 
Right Click on Background -> 
Database -> 
Set Datasource location -> 
In the 'Replace With:' section, Create a New Connection using OLE DB (ADO) -> 
Microsoft OLE DB Provider for SQL Server 
```

我们一直在选择 SQL Server Native Client 11.0，这导致了部署错误。

在此之前，我什么都试过了，x86/x64，应用程序池更改，安装疯狂版本的 Crystal 13，就是这样。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-09T07:56:59.343

连接字符串错误。使用以下步骤更新您的代码：

1.清除数据集连接。
2.设置表或表。
3.不要设置数据源和数据集。因为您将表格中的数据发送到水晶报表，并且不需要连接到服务器或数据库。
4.刷新报告文件。
例如：

```
MyCrystalReportSource.ReportDocument.DataSourceConnections.Clear();
MyCrystalReportSource.ReportDocument.Database.Tables[0].SetDataSource(MyDataSet.Tables[0]);
MyCrystalReportSource.ReportDocument.Refresh();
MyCrystalReportSource.ReportDocument.ExportToHttpResponse(ExportFormatType.PortableDocFormat, HttpContext.Current.Response, true, reportTitle); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-27T23:41:38.343

如果您在主报告中使用子报告。然后从主报告中删除数据集。并且仅使用子报告的数据集。现在您的报告将显示在服务器上

# c# - wpf - 我可以在 wpf 中使用 System.Drawing 吗？

> ID：10663056
> 
> 赞同：7
> 
> 时间：2012-05-19T06:55:06.647
> 
> 标签：c#, wpf, system.drawing

我将图像保存在数据库中。..但是如何从数据库中检索该图像..当我尝试使用system.drawing ..它显示一个错误..一些人说我不能在wpf中使用system.drwaing ..甚至没有dll文件..

我的代码是

```
private void btnShow_Click(object sender, RoutedEventArgs e)
{
       DataTable dt2 =  reqBll.SelectImage().Tables[0];
       byte[] data = (byte[])dt2.Rows[0][1];
       MemoryStream strm = new MemoryStream();
       strm.Write(data, 0, data.Length);
       strm.Position = 0;
       System.Drawing.Image img = System.Drawing.Image.FromStream(strm);
       BitmapImage bi = new BitmapImage();
       bi.BeginInit();
       MemoryStream ms = new MemoryStream();
       img.Save(ms, System.Drawing.Imaging.ImageFormat.Bmp);
       ms.Seek(0, SeekOrigin.Begin);
       bi.StreamSource = ms;
       bi.EndInit();
       ImgBox.Source = bi;
    } 
```

现在做什么？

我使用了 system.drawing.dll .. 现在我可以使用 system.drawing.bitmap .. 但使用后在 System.Drawing.Image.FromStream(strm); 处显示错误

错误：- 用户代码未处理参数异常

参数无效。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-19T06:58:44.320

您*可以*使用`System.Drawing`命名空间中的类，但您必须添加对包含您感兴趣的类的程序集的引用，方法是右键单击项目并选择“添加引用...”选项

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T07:29:19.177

就绘图部分而言，您的代码很好，问题可能出在您尝试从数据库加载的图像数据上（可能是由于数据格式不匹配或选择了错误的列等）。您可能希望共享将图像保存到数据库的代码，因为没有它就无法知道。

此代码示例执行您想要的操作（我注释掉了与数据库相关的部分并用文件加载替换了它）：

```
private void btnShow_Click(object sender, RoutedEventArgs e)
{
  // DataTable dt2 = reqBll.SelectImage().Tables[0];
  // byte[] data = (byte[]) dt2.Rows[0][1];
  // MemoryStream strm = new MemoryStream();
  // strm.Write(data, 0, data.Length);

  System.Drawing.Image bmp = System.Drawing.Bitmap.FromFile(@"C:\Temp\test.png");
  MemoryStream strm = new MemoryStream();
  bmp.Save(strm, System.Drawing.Imaging.ImageFormat.Bmp);

  strm.Position = 0;
  System.Drawing.Image img = System.Drawing.Image.FromStream(strm);
  BitmapImage bi = new BitmapImage();
  bi.BeginInit();
  MemoryStream ms = new MemoryStream();
  img.Save(ms, System.Drawing.Imaging.ImageFormat.Bmp);

  ms.Seek(0, SeekOrigin.Begin);
  bi.StreamSource = ms;
  bi.EndInit();
  imgBox.Source = bi;
} 
```

话虽如此，如果这是一个新应用程序，则单独使用 WPF 优于混合 Windows 窗体和 WPF 类和元素（正如 Jeff Mercado 指出的那样）。

# java - 使用包列表填充树的快速而肮脏的方法

> ID：10663059
> 
> 赞同：0
> 
> 时间：2012-05-19T06:56:03.933
> 
> 标签：java, swing, jtree, class-structure

是否有一种快速而肮脏的方法来填充指定包的 jtree（根节点和子节点）？

例如：

```
com.mycompany.components.ComponentA
com.mycompany.components.ComponentB
com.mycompany.components.ComponentC 
```

伪代码有没有办法：

```
Jtree tree = new JTree( Package.getPackage("com.mycompany") ); 
```

所以最终的结果是：

```
com.mycompany.components
|---- com.mycompany.components.ComponentA
|---- com.mycompany.components.ComponentB
|---- com.mycompany.components.ComponentC 
```

？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T07:07:06.033

> 是否有一种快速而肮脏的方法来填充指定包的 jtree（根节点和子节点）？

是的。Netbeans项目结构的Java包：

![在此处输入图像描述](../Images/9301f5b9bfff596f2b279e08fc70f0e8.png)

```
import java.awt.*;
import java.io.File;
import java.util.Collections;
import java.util.Vector;
import javax.swing.*;
import javax.swing.event.TreeSelectionEvent;
import javax.swing.event.TreeSelectionListener;
import javax.swing.tree.DefaultMutableTreeNode;

public class FileTree extends JPanel {

    private static final long serialVersionUID = 1L;

    public FileTree(File dir) {
        setLayout(new BorderLayout());
        JTree tree = new JTree(addNodes(null, dir));
        tree.addTreeSelectionListener(new TreeSelectionListener() {

            public void valueChanged(TreeSelectionEvent e) {
                DefaultMutableTreeNode node = (DefaultMutableTreeNode) e.getPath().getLastPathComponent();
                System.out.println("You selected " + node);
            }
        });
        JScrollPane scrollpane = new JScrollPane();
        scrollpane.getViewport().add(tree);
        add(BorderLayout.CENTER, scrollpane);
    }

    private DefaultMutableTreeNode addNodes(DefaultMutableTreeNode curTop, File dir) {
        String curPath = dir.getPath();
        DefaultMutableTreeNode curDir = new DefaultMutableTreeNode(curPath);
        if (curTop != null) {
            curTop.add(curDir);
        }
        Vector<String> ol = new Vector<String>();
        String[] tmp = dir.list();
        for (int i = 0; i < tmp.length; i++) {
            ol.addElement(tmp[i]);
        }
        Collections.sort(ol, String.CASE_INSENSITIVE_ORDER);
        File f;
        Vector<Object> files = new Vector<Object>();
        for (int i = 0; i < ol.size(); i++) {
            String thisObject = ol.elementAt(i);
            String newPath;
            if (curPath.equals(".")) {
                newPath = thisObject;
            } else {
                newPath = curPath + File.separator + thisObject;
            }
            if ((f = new File(newPath)).isDirectory()) {
                addNodes(curDir, f);
            } else {
                files.addElement(thisObject);
            }
        }
        for (int fnum = 0; fnum < files.size(); fnum++) {
            curDir.add(new DefaultMutableTreeNode(files.elementAt(fnum)));
        }
        return curDir;
    }

    @Override
    public Dimension getMinimumSize() {
        return new Dimension(200, 400);
    }

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(200, 400);
    }

    public static void main(final String[] av) {
        SwingUtilities.invokeLater(new Runnable() {

            public void run() {
                JFrame frame = new JFrame("FileTree");
                frame.setForeground(Color.black);
                frame.setBackground(Color.lightGray);
                Container cp = frame.getContentPane();
                if (av.length == 0) {
                    cp.add(new FileTree(new File(".")));
                } else {
                    cp.setLayout(new BoxLayout(cp, BoxLayout.X_AXIS));
                    for (int i = 0; i < av.length; i++) {
                        cp.add(new FileTree(new File(av[i])));
                    }
                }
                frame.pack();
                frame.setVisible(true);
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            }
        });
    }
} 
```

编辑

你可以删除所有`JTree Icons`，例如`JTree with NoIcon`

```
DefaultTreeCellRenderer renderer = (DefaultTreeCellRenderer) tree.getCellRenderer();
renderer.setLeafIcon(null);
renderer.setClosedIcon(null);
renderer.setOpenIcon(null); 
```

# javascript - 有没有办法让Javascript告诉我为什么没有设置cookie？

> ID：10663067
> 
> 赞同：1
> 
> 时间：2012-05-19T06:57:10.423
> 
> 标签：javascript, cookies

这是我设置cookie的代码：

```
function setCookie(c_name, value, expiredays)
{
    alert("setting cookie!");
    var exdate = new Date();
    exdate.setDate(exdate.getDate() + expiredays);
    document.cookie = c_name + "=" + escape(value) +
    ((expiredays === null) ? "" : ";expires=" + exdate.toUTCString());
} 
```

我正在使用 Phonegap 在 Android 手机上制作应用程序，它应该像普通浏览器一样使用和设置 cookie。不过，它似乎没有设置 cookie，并且由于环境（在我的 pnone 上），我无法调试。

那么，有没有办法让我发出警报来告诉我 document.cookie 是否失败，最好是任何可能告诉我原因的错误消息？

我试着做`alert(document.cookie)`，但它没有输出任何东西，所以我希望有另一种方法来捕获输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T07:01:45.443

您可以使用 try/catch 语句：

```
function setCookie(c_name, value, expiredays)
{
    try {
       alert("setting cookie!");
       var exdate = new Date();
       exdate.setDate(exdate.getDate() + expiredays);
       document.cookie = c_name + "=" + escape(value) +
       ((expiredays === null) ? "" : ";expires=" + exdate.toUTCString());
    } catch(error) {
      // deal with errors
      alert(error);
    }
} 
```

# javascript - Jquery UI 对话框作为确认

> ID：10663079
> 
> 赞同：0
> 
> 时间：2012-05-19T06:59:22.293
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-dialog

```
 function Globally() {
    $("#dialogid").dialog({ width: 300, modal: true, show: 'drop', hide: 'drop',
        buttons: {
            "Ok": function () { return true; $(this).dialog('close'); },
            "Cancel": function () { return false; $(this).dialog('close'); }
        }
    });
  }

  function test()
  {
    if(Globally())
      alert("Ok");
    else
      alert("Cancel");
  } 
```

我正在尝试创建一个确认对话框，并且我希望将其放置在一个函数中（在本例中为 Globally()），因为我在许多不同的函数中使用了确认对话框，但这不起作用，控件从`Globally()`函数返回而没有获得`true or false`价值。我希望它停在那里，直到用户按下`Ok or Cancel`。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T07:11:23.147

如果要运行这样的代码，则必须使用内置的确认功能：

```
var question = confirm("Proceed?")
if (question){
   // continue
 } else {
   // stop
 } 
```

那是因为只有在使用时确认才能阻止整个 javascript 执行，并允许您选择一个答案或另一个（好的，取消）。

像 jQuery 对话框这样的对话框不能停止脚本执行所以即使你使用

```
if(Globally())
  alert("Ok");
else
  alert("Cancel"); 
```

它只会执行 Globally() 函数并在它之后继续 - 不等待用户回答。

如果您真的想使用 jq 对话框，请向您的按钮添加回调函数。

```
"Ok": function () { callbackFunctionTrue(); },
"Cancel": function () { callbackFunctionFalse(); } 
```

并在测试函数中抛弃 if/else statement()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T07:10:36.113

那不是它的工作原理

做就是了

```
 "Ok": function () { alert('OK'); $(this).dialog('close'); },
    "Cancel": function () { alert('Not ok'); $(this).dialog('close'); } 
```

或者

```
 "Ok": function () { $(this).dialog('close'); test(1) },
    "Cancel": function () {$(this).dialog('close'); test(0) } 
```

和

```
function test(ok){
  alert(ok?"Ok":"Cancel");
} 
```

# java - 避免来自仪表设备的 modbus 消息

> ID：10663081
> 
> 赞同：1
> 
> 时间：2012-05-19T06:59:30.170
> 
> 标签：java, modbus

我们正在使用 Jamod RTU 捕获串联连接的各种电表的 raedings。我们设置了 modbus timeoutexception = 1200ms。现在发生了什么，当我们 ping 一米并且我们没有得到结果（或读数）时，我们移动到同一系列中连接的下一个。但有时，前一个仪表将读数发送回应用程序，该仪表的读数会保存到新仪表或下一个仪表。

为了解决这个问题，我们将 nport 管理员（用于管理 com 端口）中的网络超时从 5000 减少到 500 毫秒。但我不认为这是永久的解决方案。有没有办法避免迟来的消息或用相应的仪表标记每条消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T07:53:27.093

每个 MODBUS 回复都在消息中嵌入了设备源地址。阅读它可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T19:03:20.037

来自[Modicon Modbus 协议参考指南 PI–MBUS–300 Rev. J第 10 页](http://modbus.org/docs/PI_MBUS_300.pdf)

> **如何处理地址字段**
> 
> 消息帧的地址字段包含两个字符 (ASCII) 或八位 (RTU)。有效的从设备地址在十进制 0 到 247 的范围内。为各个从设备分配的地址范围为 1 – 247。主设备通过将从设备地址放在消息的地址字段中来寻址从设备。当从机发送它的响应时，它将自己的地址放在响应的这个地址字段中，以让主机知道哪个从机在响应。
> 
> 地址 0 用于广播地址，所有从设备都可以识别。在更高级别的网络上使用 Modbus 协议时，可能不允许广播或可能被其他方法代替。例如，Modbus Plus 使用一个共享的全局数据库，该数据库可以随着每次令牌轮换而更新。

因此，您可以跟踪从地址并在指定的从地址接收时分配值。这应该可以从`getUnitID()`所有响应对象上访问。

# android - 静态图像映射

> ID：10663086
> 
> 赞同：0
> 
> 时间：2012-05-19T06:59:52.240
> 
> 标签：android

我正在开发一个应用程序，其中我有一个图像作为静态地图，我想在其上显示标记针。但问题是针在某些设备上正确显示。某些 ldpi 设备无法正确显示标记。

# iphone - 将 GPX 文件保存到 iCloud

> ID：10663088
> 
> 赞同：-1
> 
> 时间：2012-05-19T07:00:39.033
> 
> 标签：iphone, ios, xcode, ipad, icloud

1.  我正在开发一个 iphone 应用程序，其中我有一个 .gpx 文件。我想将此文件保存到 iCloud，但我对 iOS 5 中的 iCloud api 一无所知。我的问题是我们可以将 .gpx 文件从 iphone 应用程序保存到 iClould 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T08:50:56.903

是的，您可以保存任何您想要的文件。这仅受用户 iCloud 帐户中可用空间量的限制。关于实现的细节，Apple iOS Developer Library 是一个很好的起点：

[http://developer.apple.com/library/ios/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/iCloud/iCloud.html#//apple_ref/doc/uid/TP40007072-CH5-SW1](http://developer.apple.com/library/ios/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/iCloud/iCloud.html#//apple_ref/doc/uid/TP40007072-CH5-SW1)

# python - 如何在 sqlachemy 中查询连接表属性

> ID：10663092
> 
> 赞同：0
> 
> 时间：2012-05-19T07:01:06.753
> 
> 标签：python, sqlalchemy

我在我的项目中使用 sql alchemy。

当两个或多个表连接或具有外键关系时，我遇到一个问题，然后我无法在 where 条件下查询连接的表属性。

例如。我有通知表和用户表 user.id 是 notice.sender 的外键现在我想通过 user.name 搜索通知

1.  通知表：[id, sender(FK user.id), receiver(FK user.id), subject, message, status]

2.  用户表：[id, name, email, address, status]

加入通知模型：

```
 sender_user = relationship('User', primaryjoin='Notice.sender==user.id', backref=backref("sender_user"))
 receiver_user = relationship('User', primaryjoin='Notice.receiver==user.id', backref=backref("receiver_user")) 
```

SQL alchemy 过滤器查询：

```
 user_name='john'

  notice=db_session.query(Notice) 
  notice = notice.filter(Notice.sender_user.name == user_name) 
```

以下查询不起作用：

```
 notice=db_session.query(Notice) 
  notice = notice.filter(Notice.user.name == user_name) 
```

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T10:09:32.717

您需要获取一个会话对象，然后执行：

```
query = session.query(Notice).filter(Notice.sender_user.name == user_name)
results = query.all() 
```

如果这不起作用（您没有得到预期的结果），请尝试这样做：

```
session.query(Notice, User.name).filter((Notice.sender_user.id == User.id) & (User.name == user_name))
results = query.all() 
```

我想您还有一个名为的字段`sender`，它是用户的 id。然后，这也应该有效：

```
session.query(Notice, User.name).filter((Notice.sender == User.id) & (User.name == user_name)) 
```

重试所有这些，我做了一些小的修改。（您可以在修订历史中看到它们）。如果他们不工作会很奇怪......（如果他们不工作，请尝试在[SQLAlchemy 邮件列表](https://groups.google.com/forum/?fromgroups#!forum/sqlalchemy)上发布问题）

# python - 反向使用 Python 格式字符串进行解析

> ID：10663093
> 
> 赞同：58
> 
> 时间：2012-05-19T07:01:15.257
> 
> 标签：python

我一直在使用以下 python 代码将整数部分 ID 格式化为格式化的部分编号字符串：

```
pn = 'PN-{:0>9}'.format(id) 
```

我想知道是否有一种方法可以`'PN-{:0>9}'`反向使用相同的格式字符串 () 从格式化的零件编号中提取整数 ID。如果无法做到这一点，有没有办法使用单个格式字符串（或正则表达式？）来创建和解析？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2013-09-04T18:12:36.240

[解析模块](https://github.com/r1chardj0n3s/parse)“与格式（）相反”。

示例用法：

```
>>> import parse
>>> format_string = 'PN-{:0>9}'
>>> id = 123
>>> pn = format_string.format(id)
>>> pn
'PN-000000123'
>>> parsed = parse.parse(format_string, pn)
>>> parsed
<Result ('123',) {}>
>>> parsed[0]
'123' 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-05-19T12:22:44.430

您可能会发现[模拟 scanf](http://docs.python.org/library/re.html#simulating-scanf)很有趣。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-08-16T13:53:29.367

如果您不想使用 parse 模块，这里有一个解决方案。它将格式字符串转换为具有命名组的正则表达式。它做了一些假设（在文档字符串中描述）在我的情况下是可以的，但在你的情况下可能不行。

```
def match_format_string(format_str, s):
    """Match s against the given format string, return dict of matches.

    We assume all of the arguments in format string are named keyword arguments (i.e. no {} or
    {:0.2f}). We also assume that all chars are allowed in each keyword argument, so separators
    need to be present which aren't present in the keyword arguments (i.e. '{one}{two}' won't work
    reliably as a format string but '{one}-{two}' will if the hyphen isn't used in {one} or {two}).

    We raise if the format string does not match s.

    Example:
    fs = '{test}-{flight}-{go}'
    s = fs.format('first', 'second', 'third')
    match_format_string(fs, s) -> {'test': 'first', 'flight': 'second', 'go': 'third'}
    """

    # First split on any keyword arguments, note that the names of keyword arguments will be in the
    # 1st, 3rd, ... positions in this list
    tokens = re.split(r'\{(.*?)\}', format_str)
    keywords = tokens[1::2]

    # Now replace keyword arguments with named groups matching them. We also escape between keyword
    # arguments so we support meta-characters there. Re-join tokens to form our regexp pattern
    tokens[1::2] = map(u'(?P<{}>.*)'.format, keywords)
    tokens[0::2] = map(re.escape, tokens[0::2])
    pattern = ''.join(tokens)

    # Use our pattern to match the given string, raise if it doesn't match
    matches = re.match(pattern, s)
    if not matches:
        raise Exception("Format string did not match")

    # Return a dict with all of our keywords and their values
    return {x: matches.group(x) for x in keywords} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T07:04:58.280

怎么样：

```
id = int(pn.split('-')[1]) 
```

这会在破折号处拆分零件编号，获取第二个组件并将其转换为整数。

PS我保留`id`了变量名，以便与您的问题的联系很清楚。重命名不会影响[内置函数的](http://docs.python.org/library/functions.html#id)变量是个好主意。

# python - filecmp.dircmp 中的 common_funny 和 funny_files 有什么区别？

> ID：10663094
> 
> 赞同：1
> 
> 时间：2012-05-19T07:01:16.580
> 
> 标签：python

标准库中的 filecmp 模块包含一个[dircmp 类](http://docs.python.org/py3k/library/filecmp.html#the-dircmp-class)，它有两个相似的属性：

**common_funny：**

> a 和 b 中的名称，以便目录之间的类型不同，或者 os.stat() 报告错误的名称。

**有趣的文件：**

> 位于 a 和 b 中但无法比较的文件。

什么会导致文件或目录出现在 common_funny 中？什么会导致文件或目录出现在funny_files 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T08:30:35.027

[使用源卢克](http://hg.python.org/cpython/file/3.2/Lib/filecmp.py)。

`common_funny`如果两个文件的类型不匹配（例如，一个是文件，另一个是目录），或者它不是可识别的类型，或者 os.stat 崩溃，则附加到该文件。仅在查看文件名和类型时，它们会在第一遍中返回。

`funny_files`由`dircmp`认为可以比较但由于某种原因无法读取的文件制成 - 读取时可能出现某种 os.error（例如权限被拒绝）。当实际尝试查看文件中的差异时（实际运行时`filecmp.cmp`），这些将在第二遍中返回。

我不知道[filecmp 模块](http://docs.python.org/library/filecmp.html)- 感谢您引起我的注意！

# python - 使用 \x27 转换为撇号在 python 中不起作用

> ID：10663095
> 
> 赞同：1
> 
> 时间：2012-05-19T07:01:19.403
> 
> 标签：python, html, apostrophe

我尝试从网上获取一些数据：

示例：名称`'Schindler's list'`是`'Schindler&#x27s List'`直接从网络上打印出来的...尝试让 python 打印`'Schindler\x27s list'`，以便它会给我`'Schindler's list'`。但它没有用。

我该怎么办？

PS 这个字符串是列表中的许多元素之一，我也对列表中的许多其他字符串进行了相同的操作。

# c++ - Visual Studio 2008 速成版中的 C++ 第一个程序

> ID：10663104
> 
> 赞同：0
> 
> 时间：2012-05-19T07:03:18.930
> 
> 标签：c++, visual-studio-2008, visual-c++

我已经用 C++ 编写了一个基本代码

```
#include <iostream>
using namespace std;
void main()
{
    cout <<"its my programm";
} 
```

当我编译它时，cmd 行出现一秒钟并终止了显示。它在调试窗口中向我显示了这个输出。

```
'while.exe': Loaded 'C:\Windows\SysWOW64\kernel32.dll'
'while.exe': Loaded 'C:\Windows\SysWOW64\KernelBase.dll'
'while.exe': Loaded 'C:\Windows\winsxs\x86_microsoft.vc90.debugcrt_1fc8b3b9a1e18e3b_9.0.30729.1_none_bb1f6aa1308c35eb\msvcp90d.dll'
'while.exe': Loaded 'C:\Windows\winsxs\x86_microsoft.vc90.debugcrt_1fc8b3b9a1e18e3b_9.0.30729.1_none_bb1f6aa1308c35eb\msvcr90d.dll'
The program '[1480] while.exe: Native' has exited with code 0 (0x0). 
```

帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T07:06:07.127

```
#include <iostream>
using namespace std
int main() {
    cout << "Hello World";
    cin.get();
    return 0;
} 
```

这应该有效。控制台在您查看程序之前退出。使用 cin.get() 将保持程序运行，直到您按下回车键。

在相关说明中，您的 main() 函数确实应该是 int 而不是 void。我很确定某些编译器不允许使用 void main()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T07:04:27.527

那是因为您的控制台在您看到输出之前关闭。

尝试使用`F10`. 或者在返回之前放置一个锁定语句。

另外，不`main`应该返回`int`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T07:11:21.730

试试这个：

```
#include <iostream>
using namespace std;
void main()
{
    cout <<"its my programm";
    cin.get();
} 
```

然后您必须按 Enter 关闭控制台窗口。

# c++ - 多于一种类型的对象的集合

> ID：10663106
> 
> 赞同：2
> 
> 时间：2012-05-19T07:04:03.773
> 
> 标签：c++, object-slicing

是否有任何非糟糕的方式来收集不止一种类型的对象？我很高兴从一个共同的基础中派生出每种类型。我需要合理的语义，以便可以复制、分配集合等。

显然，我不能只使用基类的向量或列表。对象将被切片，复制根本不起作用。使用向量或指针列表或智能指针是可行的，但您不会获得健全的复制语义。

要获得健全的复制语义，您需要使用类似 Boost 的`ptr_vector`. 但这需要一个痛苦且容易出错的基础架构。本质上，您不能只从基类派生一个新类，因为如果它进入集合，它将不会被正确复制。

这似乎是一件很常见的事情，我所知道的所有解决方案都非常糟糕。似乎 C++ 从根本上缺少一种方法来创建与给定实例相同的对象的新实例——即使该类型具有复制构造函数。并且制作一个`clone`or`duplicate`函数需要在每个派生类中仔细重载。如果在创建从基类（或从该基类派生的任何其他类）派生的新类时未能做到这一点 - 繁荣，您的集合会中断。

真的没有更好的办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T07:25:13.707

我认为你可以用它`std::vector<boost::any>`来完成大部分工作。

```
#include "boost/any.hpp"
#include <vector>
#include <iostream>

//Simple class so we can see what's going on
class MM {
  public:
    MM()               { std::cout<<"Create @ "<<this<<std::endl; }
    MM( const MM & o ) { std::cout<<"Copy "<<&o << " -> "<<this<<std::endl; }
    ~MM()              { std::cout<<"Destroy @ "<<this<<std::endl; }
};

int main()
{
  //Fill a vector with some stuff
  std::vector<boost::any> v;
  v.push_back(0);
  v.push_back(0);
  v.push_back(0);
  v.push_back(0);

  //Overwrite one entry with one of our objects.
  v[0] = MM();

  std::cout<<"Copying the vector"<<std::endl;
  std::vector<boost::any> w;
  w = v;

  std::cout<<"Done"<<std::endl;
} 
```

我得到输出：

```
Create @ 0xbffff6ae
Copy 0xbffff6ae -> 0x100154
Destroy @ 0xbffff6ae
Copying the vector
Copy 0x100154 -> 0x100194
Done
Destroy @ 0x100194
Destroy @ 0x100154 
```

这是我期望看到的。

编辑：

根据您能够将成员视为一些常见的基本类型的要求，您将需要与 非常相似的东西`boost::any`，幸好这是一个相对简单的类。

```
template<typename BASE>
class any_with_base
{
    // ... Members as for boost::any

    class placeholder
    {
        virtual BASE * as_base() = 0;

        //Other members as in boost::any::placeholder
    };

    template<typename ValueType>
    class holder : public placeholder
    {
        virtual BASE * as_base() { return (BASE*)&held; }
        //Other members as in boost::any::holder<T>
    };

    BASE* as_base() { return content?content->as_base():0; }
} 
```

现在你应该能够做到这一点：

```
vector< any_with_base<Base> > v;
v.push_back( DerivedA() );
v.push_back( DerivedB() );

v[0].as_base()->base_fn();
v[1].as_base()->base_fn();

any_cast<DerivedA>(v[0])->only_in_a(); 
```

我实际上不喜欢 any_cast 的语法，并会利用这个机会添加一个“as”成员函数.. 这样我就可以将最后一行写成：

```
v[0].as<DerivedA>()->only_in_a(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T16:34:15.930

好吧，为了跟进我的评论，有一种方法可以在不使用 boost::any 的情况下做到这一点，它在大多数情况下应该提供卓越的性能，但无可否认，它的参与度更高。我的解决方案结合了两个想法：使用省略其内容类型的持有者类，以及轻量级自定义 RTTI。我们为持有者类提供有意义的复制和分配语义，并且我们使用持有者的容器来管理对象的集合。我们在必要时使用我们的轻量级 RTTI 来发现对象的真实类型。这是一些代码来演示我的提议：

```
#include <vector>
#include <cassert>
#include <iostream>

#include <boost/cast.hpp>
#include <boost/scoped_ptr.hpp>
#include <boost/static_assert.hpp>

/// This template makes it possible to enforce the invariant that every type in a
/// hierarchy defines the id( ) function, which is necessary for our RTTI.  Using
/// a static assertion, we can force a compile error if a type doesn't provide id( ).

template< typename T >
struct provides_id {
  typedef char one;
  typedef long two;

  template< typename U, std::string const &(U::*)( ) const = &U::id >
  struct id_detector { };

  template< typename U > static one test( id_detector< U > * );
  template< typename U > static two test( ... );

  enum { value = sizeof(test<T>(0)) == sizeof(one) };
};

/// Base class for the holder.  It elides the true type of the object that it holds,
/// providing access only through the base class interface.  Since there is only one
/// derived type, there is no risk of forgetting to define the clone() function.

template< typename T >
struct holder_impl_base {
  virtual ~holder_impl_base( ) { }

  virtual T       *as_base( )       = 0;
  virtual T const *as_base( ) const = 0;

  virtual holder_impl_base *clone( ) const = 0;
};

/// The one and only implementation of the holder_impl_base interface.  It stores
/// a derived type instance and provides access to it through the base class interface.
/// Note the use of static assert to force the derived type to define the id( )
/// function that we use to recover the instance's true type.

template< typename T, typename U >
struct holder_impl : public holder_impl_base< T > {
  BOOST_STATIC_ASSERT(( provides_id< U >::value ));

  holder_impl( U const &p_data )
    : m_data( p_data )
  { }

  virtual holder_impl *clone( ) const {
    return new holder_impl( *this );
  }

  virtual T *as_base( ) {
    return &m_data;
  }

  virtual T const *as_base( ) const {
    return &m_data;
  }

private:

  U m_data;
};

/// The holder that we actually use in our code.  It can be constructed from an instance
/// of any type that derives from T and it uses a holder_impl to elide the type of the
/// instance.  It provides meaningful copy and assignment semantics that we are looking
/// for.

template< typename T >
struct holder {

  template< typename U >
  holder( U const &p_data )
    : m_impl( new holder_impl< T, U >( p_data ))
  { }

  holder( holder const &p_other )
    : m_impl( p_other.m_impl -> clone( ))
  { }

  template< typename U >
  holder &operator = ( U const &p_data ) {
    m_impl.reset( new holder_impl< T, U >( p_data ));
    return *this;
  }

  holder &operator = ( holder const &p_other ) {
    if( this != &p_other ) {
      m_impl.reset( p_other.m_impl -> clone( ));
    }

    return *this;
  }

  T *as_base( ) {
    return m_impl -> as_base( );
  }

  T const *as_base( ) const {
    return m_impl -> as_base( );
  }

  /// The next two functions are what we use to cast elements to their "true" types.
  /// They use our custom RTTI (which is guaranteed to be defined due to our static
  /// assertion) to check if the "true" type of the object in a holder is the same as
  /// as the template argument.  If so, they return a pointer to the object; otherwise
  /// they return NULL.

  template< typename U >
  U *as( ) {
    T *base = as_base( );

    if( base -> id( ) == U::static_id( )) {
      return boost::polymorphic_downcast< U * >( base );
    }

    return 0;
  }

  template< typename U >
  U const *as( ) const {
    T *base = as_base( );

    if( base -> id( ) == U::static_id( )) {
      return boost::polymorphic_downcast< U const * >( base );
    }

    return 0;
  }

private:

  boost::scoped_ptr< holder_impl_base< T > > m_impl;
};

/// A base type and a couple derived types to demonstrate the technique.

struct base {
  virtual ~base( )
  { }

  virtual std::string const &id( ) const = 0;
};

struct derived1 : public base { 
  std::string const &id( ) const {
    return c_id;
  }

  static std::string const &static_id( ) {
    return c_id;
  }

private:

  static std::string const c_id;
};

std::string const derived1::c_id( "derived1" );

struct derived2 : public base {
  std::string const &id( ) const {
    return c_id;
  }

  static std::string const &static_id( ) {
    return c_id;
  }

private:

  static std::string const c_id;
};

std::string const derived2::c_id( "derived2" );

/// A program to demonstrate that the technique works as advertised.

int main( ) {
  std::vector< holder< base > > vector1;

  vector1.push_back( derived1( ));
  vector1.push_back( derived2( ));

  std::vector< holder< base > > vector2 = vector1;

  /// We see that we have true copies!

  assert( vector1[0].as_base( ) != vector2[0].as_base( ));
  assert( vector1[1].as_base( ) != vector2[0].as_base( ));

  /// Easy assignment of container elements to new instances!

  vector2[0] = derived2( );
  vector2[1] = derived1( );

  // Recovery of the "true" types!

  std::vector< holder< base > >::iterator l_itr = vector1.begin( );
  std::vector< holder< base > >::iterator l_end = vector1.end  ( );

  for( ; l_itr != l_end; ++l_itr ) {
    if( derived1 *ptr = l_itr -> as< derived1 >( )) {
      std::cout << ptr -> static_id( ) << std::endl;
    }
    else if( derived2 *ptr = l_itr -> as< derived2 >( )) {
      std::cout << ptr -> static_id( ) << std::endl;
    }
  }
} 
```

这是输出：

```
derived1
derived2 
```

# oop - 任何语言都可以用来在任何范式中编程吗？

> ID：10663108
> 
> 赞同：-2
> 
> 时间：2012-05-19T07:04:14.223
> 
> 标签：oop, functional-programming, paradigms

任何语言都可以用来在任何范式中编程吗？例如，C 没有类，但可以在 OOP 中编程。有些语言（例如汇编）我看不到使用 OOP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T15:32:16.160

是的，仅仅是因为您可以为您的 $favorite $paradigm 以宿主语言实现一个解释器。

但实际上，这是不可行的、有效的或正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T03:16:08.303

C++ 最终是汇编，你只需要一个编译器来根据更好的描述为你编写汇编。因此，请确保您可以在汇编中执行 OOP，就像您可以在 C 中执行 OOP 一样；只是许多 OO 概念最终是通过约定和程序员纪律来实现的，而不是受语言结构的强制，结果可能出现大量错误，您的语言工具可能不会很好在帮你找到。

对于大多数范式/语言不匹配，类似的论点也随之而来。很多面向对象的程序*都是*用 C 语言编写的，所以它甚至可以是一件有点实际的事情，而不仅仅是学术问题。

当您想要*删除*限制而不是添加限制时，这可能会有点困难。

在诸如 Haskell 和 Mercury 之类的纯强制语言中，您不能在任意纯代码中间突然打破面向对象样式的封装可变状态包（至少在不使用“所有赌注都关闭”功能的情况下）就像`unsafePerformIO`在 Haskell 或`promise_pure`Mercury 中对编译器撒谎一样，此时您的程序很可能完全无法工作，除非您可以在执行此操作的区域周围包装一个纯接口）。但是，您可以使用这些语言以过程或面向对象的风格编写*整个*程序，而永远不要离开它们用于执行 IO 的机制。

同样，如果您认为在动态语言中使用鸭子类型是一种范式，那么在具有静态类型的语言中获得类似的东西是非常痛苦的，但是您总能找到一种方法将您的动态类型表示为*data*。但是你再次发现自己在做一些约定和重新实现的事情，如果你真的使用鸭子打字语言，你会免费获得这些东西。

我很确定很难找到一种*无法*适应以您喜欢的任何范例编写代码的语言（可用于编写通用程序）。改编可能不会产生非常有效的代码（有时它可以；将 C 或汇编改编为任何范式通常可以像你为该范式调整过的语言一样高效），而且几乎可以肯定在程序员时间方面。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-19T07:10:13.303

不，并非所有语言都可以用于任何范式编程。然而，更流行的——python、c++等都允许你选择你想要的编程方式。甚至 php 也在添加 OO 支持。

# bash - 不能在 shell 脚本中使用通配符

> ID：10663116
> 
> 赞同：0
> 
> 时间：2012-05-19T07:05:07.513
> 
> 标签：bash, shell, wildcard, ls

我正在苦苦挣扎大约 3 天

```
D1="`ls $g???_???_?????$DATE1`"" ` |`""` wc -l`"
       if [ $D1 -eq "0" ] 
```

仍然以语法错误结束。bash 告诉的最后一个语法错误是**第 1 行的语法错误：`|' 出乎意料**。

你能帮我么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T07:46:26.840

我不确定你想要达到什么目标。但是，管道符号是替换命令的一部分，而不是它自己的替换命令。

```
D1="`ls $g???_???_?????$DATE1 | wc -l`"
if [ $D1 -eq 0 ]; then
    ...
fi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T06:59:56.343

这就是最终奏效的方法：

```
D1=`ls 'a_costant_string'"$DATE1"????????"$g"* | sort -u | wc -l` 
```

我的意思是在这里，因为我花了很多时间才找到正确工作的组合，这实际上是正确的答案。

# objective-c - NSPredicate 过滤当前时间

> ID：10663117
> 
> 赞同：2
> 
> 时间：2012-05-19T07:05:13.063
> 
> 标签：objective-c, sqlite, core-data, nspredicate, nsfetchrequest

我正在尝试创建一个`NSPredicate`（用于与 a`NSFetchRequest`中的核心数据一起使用`NSFetchedresultsController`），它根据当前时间过滤记录。

**不是**创建谓词的时间：

`[NSPredicate predicateWithFormat:@"(criticalDate < %@)", [NSDate date]]`

但是评估谓词的时间，因为我想避免一直用新的 fetchRequests 更新 fetchedResultsController。我正在寻找的（但我自己找不到）是这样的：

`[NSPredicate predicateWithFormat:@"(criticalDate < ????)"]`

它适用于 iPhone，这意味着它`now()`不受支持，所以我想无论解决方案是什么，它都会是一种 hack。

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-19T17:48:35.880

你想使用：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"criticalDate < now()"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T19:04:29.147

如果您在 fetch 之前创建谓词，则创建谓词的时间与执行 fetch 的时间之间的差异最多可能是一毫秒。

我无法想象一个重要的使用场景。请解释。

但是，如果那个时间差对你来说真的太大了，我建议下面的解决方案。运行几个测试以确定最可能的时间差是多少。然后，当您创建谓词时，将时间差添加到未来。因此：

```
[NSPredicate predicateWithFormat:@"criticalDate < %@", 
   [[NSDate date] dateByAddingTimeInterval:0.001]]; 
```

我想这个问题有点学术...... :-)

# ios - iOS 代码组织模式

> ID：10663118
> 
> 赞同：0
> 
> 时间：2012-05-19T07:05:42.860
> 
> 标签：ios, xcode, uiview, uiviewcontroller

我对iOS开发相当陌生。我通常在代码中创建我所有的 UIViews、UILabels、UIButtons 等，而不是使用 Interface Builder。这使得我的 UIViewControllers 变得非常大且难以遵循，将插座声明与实际操作和逻辑混合在一起非常容易。

```
- (UIButton *) continueButton {
    // if button is nil
    if(_continueButton == nil) {
        UIButton *button        = [[UIButton buttonWithType:UIButtonTypeCustom] retain]; 

        /* more configuration */

        _continueButton = button;
    }
    return _continueButton;
}

// occures when continue button is tapped
- (void) buttonTouch:(id) sender
{
    UIButton *button = ((UIButton *)sender);

    if(button == continueButton) {
        /* do stuff */
    }
} 
```

我想要完成的是将实际动作、动画、逻辑等分开，并将按钮、标签和其他视图的声明存储在不同的文件中。

作为一种解决方案，我正在考虑使用“addChildViewController”创建另一个带有插座的 UIViewController，并将其作为子节点嵌入到包含逻辑的主节点中。

这是正确的方法吗？你如何处理它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T12:33:29.437

我认为你正在以错误的方式解决这个问题。在大多数情况下，使用 IB 是一件明智的事情。Xcode 将比您更有效地为 UI 元素创建代码。

此外，使用 IB 和 Assistant Editor 将使连接变得更快、更高效。它还确保在需要的地方添加清理代码。

对于我的实现文件中的代码分离，我个人使用`#pragma mark -`将我的 Outlet 声明与我的 Action 声明分开，然后总是将 Actions 的方法与其他方法分开（通常在顶部）。

我还私下声明了 Outlets 的属性，除非出于某种原因它们需要公开。我的结构：

*   我的方法在顶部
*   下一步行动
*   我的委托方法
*   苹果的方法

# javascript - 使用“事件的”输出作为变量

> ID：10663119
> 
> 赞同：2
> 
> 时间：2012-05-19T07:05:58.523
> 
> 标签：javascript, variables, object, extjs, extjs4

我在操作复选框值时遇到问题。复选框上的“更改”事件返回一个对象，在我的例子中：

```
{"val1":"member","val2":"book","val3":"journal","val4":"new_member","val5":"cds"} 
```

上述对象需要进行转换，以便搜索引擎使用它，如下所示：

```
{ member,book,journal,new_member,cds} 
```

我已经用下面的代码块做到了：

```
var formcheckbox = this.getFormcheckbox();
formcheckbox.on('change', function(checkbox, value){

                var arr=[];

                for (var i in value) {
                    arr.push(value[i])
                };

                var wrd = new Array(arr);
                    var joinwrd = wrd.join(",");
                        var filter = '{' + joinwrd + '}';

                        //console.log(filter);

                //Ext.Msg.alert('Output', '{' + joinwrd + '}');

                }); 
```

问题是我想要“更改”事件的输出（“var 过滤器”产生：{member,book,journal,new_member,cds}）以在其他地方使用它。我试图使整个事件成为一个变量（var output = “the change event”），但它不起作用。

也许这是一个愚蠢的问题，但我是新手，我需要一点帮助。

先感谢您，

汤姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T07:52:12.147

只需传递`filter`给将使用它的函数。`change`如果您想要发生某些事情，无论如何您都必须从处理程序内部调用它：

```
formcheckbox.on('change', function(cb, value){
    //...
    var filter = "{" + arr.join(",") + "}";
    useFilter(filter);
});

function useFilter(filter){
    // use the `filter` var here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T07:32:22.807

您可以创建`filter`一个全局变量并在需要的地方使用它。

```
// global variable for the search filter
var filter = null;

var formcheckbox = this.getFormcheckbox();
formcheckbox.on('change', function(checkbox, value){
    var arr = [],
    i,
    max;

    // the order of the keys isn't guaranteed to be the same in a for(... in ...) loop
    // if the order matters (as it looks like) better get them one by one by there names
    for (i = 0, max = 5; i <= max; i++) {
        arr.push(value["val" + i]);
    }

    // save the value in a global variable
    filter = "{" + arr.join(",") + "}";

    console.log(filter);
}); 
```

# iphone - UIWebView 停止自动滚动

> ID：10663120
> 
> 赞同：0
> 
> 时间：2012-05-19T07:05:58.687
> 
> 标签：iphone, objective-c, uiwebview

如何阻止我的 UIWebView 在按下按钮时自动滚动？

```
[web_try loadHTMLString:[NSString stringWithFormat:@"<marquee scrollamount='2' direction='up' loop='true' width='278' height='48'> <font size='3' face='HelveticaNeue-Bold' color='#242424'>%@</font></marquee>", option_value] baseURL:final_url]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T07:18:15.507

使用 - 编辑 -

```
webView.scrollView.scrollEnabled = NO; 
webView.scrollView.bounces = NO; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T11:10:46.387

我认为您可以使用此代码滚动视图并停止它对我来说很好

```
-(void)scrollView
{
    NSInteger scroll = 1;
    NSString* javascript = [NSString stringWithFormat:@"window.scrollBy(0, %d);",scroll];   
    [self.currentView stringByEvaluatingJavaScriptFromString:javascript];        
    if(validateTimer)
    {
        [timer invalidate];
        validateTimer = false;
    }

    timer = [NSTimer scheduledTimerWithTimeInterval:0.1 target:self selector:@selector(scrollView) userInfo:nil repeats:YES];
    validateTimer = true;
}

-(IBAction)stopScroll
{
    [timer invalidate];
    validateTimer = false;
    hidden.enabled = FALSE;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T10:06:58.873

在这里，我想你想停止滚动网页视图的内容。检查代码。您使用了目标 c 代码无法控制的“选框”标签。

# jdbc - 使用 Glassfish 连接到 h2 数据库

> ID：10663126
> 
> 赞同：3
> 
> 时间：2012-05-19T07:07:31.537
> 
> 标签：jdbc, glassfish-3, h2

我正在使用 Glassfish 应用程序服务器开发一个网络应用程序。我已经安装了 H2 DB，现在尝试在 glassfish 中定义一个连接池，但是在尝试 ping 数据库时它失败了。

这是我所做的：

1.  安装了 H2 DB 并创建了一个新的 DB（服务器模式）。
2.  我在 pom.xml 中添加了一个 H2 maven 依赖项：

    ```
    <dependency>
        <groupId>com.h2database</groupId>
        <artifactId>h2</artifactId>
        <version>1.3.166</version>
    </dependency> 
    ```

3.  将 H2 jar 文件 (h2-1.3.166.jar) 复制到我的 glassfish 库：C:\glassfish3\glassfish\lib
4.  登录到 glassfish admin gui 并创建以下 jdbc 连接：
    *   资源类型：javax.sql.DataSource
    *   数据库驱动程序供应商：H2
    *   数据源类名：org.h2.jdbcx.JdbcDataSource

我的“附加属性”是：

*   用户：my_db_user
*   密码：my_db_password
*   网址：jdbc:h2:tcp://localhost/~/my_db_name;AUTO_SERVER=TRUE

当我尝试 ping 此连接时，它会失败并显示以下消息：

myCpool 的 Ping 连接池失败。类名错误或未设置类路径：org.h2.jdbcx.JdbcDataSource 请查看 server.log 了解更多详细信息。

完整的日志说：

`Wrong class name or classpath for Datasource Object java.lang.ClassNotFoundException: org.h2.jdbcx.JdbcDataSource at java.net.URLClassLoader$1.run(URLClassLoader.java:366) at java.net.URLClassLoader$1.run(URLClassLoader.java:355) at java.security.AccessController.doPrivileged(Native Method) at java.net.URLClassLoader.findClass(URLClassLoader.java:354) at java.lang.ClassLoader.loadClass(ClassLoader.java:423) at java.lang.ClassLoader.loadClass(ClassLoader.java:356) at java.lang.Class.forName0(Native Method) at java.lang.Class.forName(Class.java:264) at com.sun.gjc.common.DataSourceObjectBuilder.getDataSourceObject(DataSourceObjectBuilder.java:285) at com.sun.gjc.common.DataSourceObjectBuilder.constructDataSourceObject(DataSourceObjectBuilder.java:114) at com.sun.gjc.spi.ManagedConnectionFactory.getDataSource(ManagedConnectionFactory.java:1307) at com.sun.gjc.spi.DSManagedConnectionFactory.getDataSource(DSManagedConnectionFactory.java:163) at com.sun.gjc.spi.DSManagedConnectionFactory.createManagedConnection(DSManagedConnectionFactory.java:102) at com.sun.enterprise.connectors.service.ConnectorConnectionPoolAdminServiceImpl.getUnpooledConnection(ConnectorConnectionPoolAdminServiceImpl.java:697) at com.sun.enterprise.connectors.service.ConnectorConnectionPoolAdminServiceImpl.testConnectionPool(ConnectorConnectionPoolAdminServiceImpl.java:426) at com.sun.enterprise.connectors.ConnectorRuntime.pingConnectionPool(ConnectorRuntime.java:1086) at org.glassfish.connectors.admin.cli.PingConnectionPool.execute(PingConnectionPool.java:130) at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348) at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363) at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085) at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95) at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291) at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259) at org.glassfish.admin.rest.ResourceUtil.runCommand(ResourceUtil.java:214) at org.glassfish.admin.rest.resources.TemplateExecCommand.executeCommand(TemplateExecCommand.java:127) at org.glassfish.admin.rest.resources.TemplateCommandGetResource.processGet(TemplateCommandGetResource.java:78) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:601) at com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60) at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$ResponseOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:205) at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75) at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:288) at com.sun.jersey.server.impl.uri.rules.SubLocatorRule.accept(SubLocatorRule.java:134) at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147) at com.sun.jersey.server.impl.uri.rules.SubLocatorRule.accept(SubLocatorRule.java:134) at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147) at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108) at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147) at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84) at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1469) at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1400) at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1349) at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1339) at com.sun.jersey.server.impl.container.grizzly.GrizzlyContainer._service(GrizzlyContainer.java:182) at com.sun.jersey.server.impl.container.grizzly.GrizzlyContainer.service(GrizzlyContainer.java:147) at org.glassfish.admin.rest.adapter.RestAdapter.service(RestAdapter.java:148) at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179) at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117) at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354) at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195) at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849) at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746) at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045) at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228) at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137) at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104) at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90) at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79) at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54) at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59) at com.sun.grizzly.ContextTask.run(ContextTask.java:71) at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532) at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513) at java.lang.Thread.run(Thread.java:722)`

我错过了什么吗？任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T12:28:02.760

这`ClassNotFoundException: org.h2.jdbcx.JdbcDataSource`意味着 H2 JDBC 驱动程序不在类路径中。我不太了解 Glassfish，但它似乎不在类路径中。其他数据库驱动程序似乎也出现了类似的问题，[例如 MySQL](https://stackoverflow.com/questions/8349970/connecting-a-mysql-database-to-glassfish-classpath-is-not-set-or-classname-is-wr)（需要将 .jar 文件添加到`/glassfish/domains/[domainname]/lib/ext`）

您需要使用不同的数据库 URL：

```
jdbc:h2:~/my_db_name;AUTO_SERVER=TRUE 
```

[如文档中所述，自动混合模式](http://h2database.com/html/features.html#auto_mixed_mode)不需要或使用服务器 URL（以 开头的 URL `jdbc:h2:tcp://`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-24T10:23:43.367

在服务器安装文件夹的以下路径中添加 h2 的驱动程序 jar 文件：

```
glassfish/domains/domain1/lib/ext 
```

# ruby-on-rails - Rails：一对多如何从一中访问数据

> ID：10663128
> 
> 赞同：1
> 
> 时间：2012-05-19T07:08:05.060
> 
> 标签：ruby-on-rails, one-to-many

嗨，我对 Rails 很陌生，如果这很愚蠢，我很抱歉。我一直在寻找几个小时。甚至不知道该问什么。非常感谢您的帮助。

我正在尝试使用带有代码和描述的表格。然后是另一个包含代码的主表。加入这两个表，以便我可以按代码排序并提取描述。我似乎无法弄清楚提取描述的代码。

这是代码和描述迁移

```
create_table :sniffs do |t|
  t.string "sniff_desc", :limit => 5
  t.timestamps
end 
```

这是主表迁移

```
create_table :lenders do |t|
  t.integer "sniff_id"
  t.timestamps
end    

add_index("lenders", "sniff_id") 
```

这些是模型

```
class Lender < ActiveRecord::Base
  belongs_to :sniffs
  scope :ranked, order("lenders.sniff_id ASC")
end

class Sniff < ActiveRecord::Base
  has_many :lenders
end 
```

嗅探表是

```
id  sniff_desc
 1  Great
 2  OK
 3  Bad 
```

贷方表是

```
id  sniff_id
 1  2
 2  2
 3  3 
```

这是我想不通的？对于特定的贷方实例，我如何获得 sniff_desc。例如，我在lender.id(2) 上，我想得到它的sniff_desc“OK”。

所以如果我是 Rails 控制台

```
 lender = Lender.find(2)
    lender.sniffs 
```

我明白了

```
=> nil 
```

我以为我会在嗅探中获得第二个记录。如果我输入这个

```
Sniff.find(lender.sniff_id).sniff_desc 
```

我得到正确答案

```
=> "OK" 
```

但是该代码似乎违背了建立一对多关系的整个目的。

我不理解一对多正确吗？或者我该怎么做才能解决这个问题？

非常感谢您的帮助。我觉得这个问题太简单了，所以我找不到其他人问它？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T07:13:51.867

你几乎做对了。唯一的问题是`belongs_to`使用单数，而不是复数。

你必须改变：

```
belongs_to :sniffs 
```

至：

```
belongs_to :sniff 
```

有了这个，你应该能够做到：

```
lender = Lender.find(2)
lender.sniff.sniff_desc #=> "OK" 
```

# php - 修改 SQL 以包含额外的表

> ID：10663131
> 
> 赞同：0
> 
> 时间：2012-05-19T07:08:30.973
> 
> 标签：php, mysql, opencart

我将如何获得横幅名称？如果您查看下面的 DB，您会发现这会带回除实际`banner`. `name`?

另外我认为它应该检查横幅状态以检查它是否已启用。

**之前**：

```
SELECT * 
FROM banner_image bi 
LEFT JOIN banner_image_description bid ON (bi.banner_image_id  = bid.banner_image_id) 
WHERE
   bi.banner_id = '".$banner_id."' 
   AND bid.language_id = '".$this->config->get('config_language_id')."' 
```

* * *

```
Array ( 
    [0] => Array ( 
        [banner_image_id] => 1 
        [banner_id] => 1 
        [link] =>
        [image] => data/banners/test.jpg 
        [language_id] => 1 
        [title] => Test banner 
    ) 
) 
```

**之后**：

```
SELECT
   bi.*,
   b.name 
FROM
   banner b,
   banner_image bi 
LEFT JOIN banner_image_description bid ON (bi.banner_image_id  = bid.banner_image_id) 
WHERE
   b.banner_id = '".$banner_id."' 
   AND bi.banner_id = '".$banner_id."' 
   AND bid.language_id = '".$this->config->get('config_language_id')."' 
```

* * *

```
Array ( 
    [0] => Array ( 
        [banner_image_id] => 1 
        [banner_id] => 1 
        [link] => 
        [image] => data/banners/test.jpg 
        [name] => Banner heading 
    ) 
) 
```

**数据库结构**：

```
CREATE TABLE IF NOT EXISTS `banner` (
  `banner_id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(64) COLLATE utf8_bin NOT NULL,
  `status` tinyint(1) NOT NULL,
  PRIMARY KEY (`banner_id`)
);

CREATE TABLE IF NOT EXISTS `banner_image` (
  `banner_image_id` int(11) NOT NULL AUTO_INCREMENT,
  `banner_id` int(11) NOT NULL,
  `link` varchar(255) COLLATE utf8_bin NOT NULL,
  `image` varchar(255) COLLATE utf8_bin NOT NULL,
  PRIMARY KEY (`banner_image_id`)
);

CREATE TABLE IF NOT EXISTS `banner_image_description` (
  `banner_image_id` int(11) NOT NULL,
  `language_id` int(11) NOT NULL,
  `banner_id` int(11) NOT NULL,
  `title` varchar(64) COLLATE utf8_bin NOT NULL,
  PRIMARY KEY (`banner_image_id`,`language_id`)
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T13:29:49.420

我认为这会做你想要的：

```
SELECT *
FROM
    banner b
    INNER JOIN banner_image bi ON b.banner_id = bi.banner_id
    INNER JOIN banner_image_description bid ON bi.banner_image_id = bid.banner_image_id
WHERE
    b.banner_id = '". $banner_id ."'
    AND b.status = TRUE
    AND bid.language_id = '". $this->config->get('config_language_id') ."' 
```

我会避免使用`SELECT *`，而是明确列出您实际想要获取的每一列。

我认为您遇到问题的一个原因是您使用逗号（隐式连接）来加入`banner`表，但您没有指定连接条件。您需要在`WHERE`子句中添加一个条件，例如`b.banner_id = bi.banner_id`. 但最好使用显式`INNER JOIN`语法。

* * *

我看不出在此查询中使用 a`LEFT JOIN`而不是 an的原因。`INNER JOIN`在`WHERE`子句中，您指定表中必须满足的条件`banner_image_description`才能返回行。如果该表中没有对应的行（这是 a 的目的`LEFT JOIN`），则不会返回任何行。所以我将它们切换到`INNER JOIN`.

# actionscript-3 - Facebook.init、Facebook.login 触发弹出窗口拦截器

> ID：10663133
> 
> 赞同：0
> 
> 时间：2012-05-19T07:08:57.780
> 
> 标签：actionscript-3, flash, facebook-graph-api, popup

在 Flash 中，我在构建后首先调用身份验证，如何避免弹出窗口阻止程序。

```
public function FacebookProxy(appID:String, permissions:Object) {
        this.appID = appID;
        this.permissions = permissions;
    }

    public function authenticate():void { 
        var response:FacebookAuthResponse = Facebook.getAuthResponse();
        if(response && response.uid) {
            this.success(response);
        } else {
            this.init();
        }
    }

    protected function init():void { 
        Security.loadPolicyFile("https://fbcdn-profile-a.akamaihd.net/crossdomain.xml");
        Facebook.init(this.appID, this.initHandler);
    }

    protected function initHandler(response:FacebookAuthResponse, fail:Object):void {
        if(response && response.uid){ 
            this.success(response);
        } else { 
            setTimeout(this.login, 200);
        }
    }

    protected function login():void {
        Facebook.login(loginHandler, this.permissions);
    }

    protected function loginHandler(response:FacebookAuthResponse, fail:Object):void {
        if(response && response.uid) {
            this.success(response);
        } else {
            //ExternalInterface.call("trace", "code:" + fail.error.code + ", message:" + fail.error.message + ", type:" + fail.error.type);
        }
    }

    protected function success(response:FacebookAuthResponse):void {
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T07:43:36.667

我不知道 flash，但你不能`Facebook.init, Facebook.login`自动调用，它会被弹出窗口拦截器捕获。

仅在用户活动上触发这两种方法，即点击用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T18:15:07.853

据我记得，登录Facebook最顺畅的方式（通过游戏应用程序，没有流行，只有一个权限屏幕）是使用js api登录并将详细信息传递到flash

# jquery - 显示和隐藏图像

> ID：10663138
> 
> 赞同：0
> 
> 时间：2012-05-19T07:09:49.533
> 
> 标签：jquery, jquery-ui

我正在尝试使用 jquery 创建一个小的动画效果，其中图像显示然后一个接一个地隐藏。在我的代码中，所有图像一次显示然后一个一个隐藏。请帮忙。谢谢

```
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Untitled Document</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
$(document).ready(function() {
    $(".hide1").delay(2050).hide(1);
    $('.show1').delay(2000).show(1);
    $(".hide2").delay(2550).hide(1);
    $('.show2').delay(2500).show(1);
    $(".hide3").delay(2550).hide(1);
    $('.show3').delay(3000).show(1);
    $(".hide4").delay(3550).hide(1);
    $('.show4').delay(3500).show(1);
    $(".hide5").delay(4050).hide(1);
    $('.show5').delay(4000).show(1);

});
</script>
</head>

<body>
<img class="hide1" class="show1" style="position:absolute; top:300px; left:300px;" src="9.png" />
<img class="hide2" class="show2" style="position:absolute; top:260px; left:340px;" src="9.png" />
<img class="hide3" class="show3" style="position:absolute; top:220px; left:380px;" src="9.png" />
<img class="hide4" class="show4" style="position:absolute; top:180px; left:420px;" src="9.png" />
<img class="hide5" class="show5" style="position:absolute; top:140px; left:460px;" src="9.png" />
<img class="hide6" class="show6" style="position:absolute; top:100px; left:500px;" src="9.png" />

</body>
</html> 
```

## 编辑

在得到建议后，我进行了修改。我使用了隐藏，但它仍然没有隐藏。

```
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Untitled Document</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
$(document).ready(function() {
    $(".hide1").delay(2050).hide(1);
    $('.show1').delay(2000).show(1);
    $(".hide2").delay(2550).hide(1);
    $('.show2').delay(2500).show(1);
    $(".hide3").delay(2550).hide(1);
    $('.show3').delay(3000).show(1);
    $(".hide4").delay(3550).hide(1);
    $('.show4').delay(3500).show(1);
    $(".hide5").delay(4050).hide(1);
    $('.show5').delay(4000).show(1);
    $('.noshow').hide(0);

});
</script>
</head>

<body>
<img class="noshow hide1 show1" style="position:absolute; top:300px; left:300px;" src="9.png" />
<img class="noshow hide2 show2 " style="position:absolute; top:260px; left:340px;" src="9.png" />
<img class="noshow hide3 show3 " style="position:absolute; top:220px; left:380px;" src="9.png" />
<img class="noshow hide4 show4 " style="position:absolute; top:180px; left:420px;" src="9.png" />
<img class="noshow hide5 show5 " style="position:absolute; top:140px; left:460px;" src="9.png" />
<img class="noshow hide6 show6 " style="position:absolute; top:100px; left:500px;" src="9.png" />

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T07:19:21.177

起初它们是一起显示的，因为没有任何文字可以使它们隐藏起来。Yuo 可以为它们添加“display:none”样式，如果你想让它们显示/隐藏一个，或者你可以改变你的脚本来隐藏（）所有它们，没有任何延迟，然后添加你原始代码。
您也不需要 2 个不同的 css 类，因为它们无论如何都不会影响图像

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T07:22:55.877

您对所有这些`img`标签使用相同的图像，我假设您正在尝试创建图像 flickr 效果。为此，您可以按照本[教程](http://www.webegg.co.uk/flicker-effect-with-jquery/)进行操作。

如果您希望代码同步运行，那么您必须`show/hide`像这样将每个代码插入另一个的完整回调中

```
$(".hide1").delay(2050).hide(1,function(){
         $('.show1').delay(2000).show(1,function(){
              $(".hide2").delay(2550).hide(1);
        });
 }); 
```

这将创建一个非常大的链条并且不可取。[在http://www.mattbudd.co.uk/](http://www.mattbudd.co.uk/)检查上面的教程输出 如果你想要类似的东西你可以按照教程。

如果我没记错的话，这是解决您问题的可能方法

[工作演示](http://jsfiddle.net/joycse06/brQMX/)

# rebase - 变基和调试

> ID：10663139
> 
> 赞同：6
> 
> 时间：2012-05-19T07:09:57.437
> 
> 标签：rebase, ida

所以通常当我使用 IDA 进行调试时，我不会遇到任何问题。然而，对于这个特殊的进程（模块之前的大小为 9.9 MB），IDA 坚持每次启动进程时都会重新设置基准，这会冻结 IDA 并迫使我等待 20-30 分钟才能真正开始。

为什么它会这样做，我可以以某种方式禁用它吗？我对诸如此类的高级调试很陌生，因此重新设置基数对我来说只有一点意义。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-05T18:07:34.020

万一其他人像我一样找到这个页面，如果 DLL 的首选入口点已经在使用中，也可能导致它必须重新设置它才能继续。

要更正此问题，您可以使用 Windows SDK（或 Visual Studio）附带的 ReBase.exe 工具

`ReBase.Exe -b 7600000 myBadBasedDll.dll` 这样会将 dll 的基数重置为 0x7600000。然后，您必须最后一次在 IDA 中进行 rebase 以使您的 idb 同步（或在 rebase 后创建一个新的 idb）

`Edit->Segments->Rebase Program...`

在新菜单中选中和框，`Fix up Program`应该`Rebase the whole image`很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-31T17:04:00.187

这个问题由 Will Donohoe 于 31-05-2013 回答。访问时的网站是[https://will.io/blog/2013/05/31/disable-aslr/](https://will.io/blog/2013/05/31/disable-aslr/)

正如网站上所解释的，问题出现（至少在我的情况下）是由于**地址空间布局随机化 (ASLR)**造成的。**当PE Optional Header的****DllCharacteristics**字段包含值为的掩码时，启用 ASLR 。**`IMAGE_DLL_CHARACTERISTICS_DYNAMIC_BASE``0x0040`**

 **在我的情况下，**DllCharacteristics**字段`0x8160`非常明显地`0x0040`存在掩码。

因此，通过移除`0x0040`掩码来纠正反复出现的变基问题。将**DllCharacteristics**字段设置为`0x8120`或`0x8100`对我有用。

**注意：**当使用**Hex Editor时，** **DllCharacteristics**字段可以位于距**PE Signature Offset**开头**0x5E 的偏移处**。**

# jquery - Ajax分页后Jquery事件不起作用

> ID：10663150
> 
> 赞同：0
> 
> 时间：2012-05-19T07:10:50.507
> 
> 标签：jquery, ajax, dom, mouseenter, mouseleave

下面是我正在使用的代码，我一直在使用 .mouseenter(function () { 没有问题...我一直在阅读，当您使用 .live() 时，它会将事件应用于现有和新的 dom 元素，但对于某些原因现在该功能根本不起作用，我的语法有问题吗？

```
 $(document).ready(function(){
    $("div#rows div.row div:nth-child(1)",this).nextUntil('nth-child(2)').on("mouseenter", function() {
        $('img',this).stop().animate({"bottom":"0px"}, "fast"); 
    });
    $('div',this).off("mouseleave").on("mouseleave", function() {
        $('img',this).stop().animate({"bottom":"94px"}, "fast");    
    });

});

$(document).ready(function(){
    $("div#rows div.row div:nth-child(3)",this).nextUntil('nth-child(4)').on("mouseenter", function() {
        $('img',this).stop().animate({"bottom":"0px"}, "fast"); 
    });
    $('div',this).off("mouseleave").on("mouseleave", function() {
        $('img',this).stop().animate({"bottom":"99px"}, "fast");    
});

}); 
```

更新代码以使用 .on 而不是 .live ...动画正在使用第一组帖子，但 ajax 加载的所有分页仍然没有触发事件...

```
<div id="content">

    <div id="rows">

<div class="row row-1">    
    <div class="loop-0 post-66">
        <div class="post_data">
            <div class="icons_right">
                <a type="readmore" href="http://samplewebsite.com/?p=66" rel="bookmark" title="Permanent Link to Salina Cruz | Mexico"><img src="http://samplewebsite.com/wp-content/themes/sample_website/images/pop_out_icon.png" alt="pop out icon" type="readmore" /></a>
            </div>
            <h1 class="post_title">
                <a href="http://samplewebsite.com/?p=66" rel="bookmark" title="Permanent Link to Salina Cruz | Mexico">
                Salina Cruz | Mexico</a>
            </h1>
            <h2 class="post_snippet">Lorem ipsum dolor</h2>
            <p class="post_date">May 13th, 2012 by <a href="http://samplewebsite.com/?author=1" title="Posts by admin" rel="author">admin</a></p>
        </div> <!-- post_data //-->
        <a href="http://samplewebsite.com/?p=66" rel="bookmark" title="Permanent Link to Salina Cruz | Mexico"><img width="1600" height="1200" src="http://samplewebsite.com/wp-content/uploads/2012/05/surfer3.jpg" class="attachment-post-image wp-post-image" alt="surfer3" title="surfer3" /></a>
    </div>  <!-- 1 //-->

    <div class="loop-1 post-62">
        <div class="post_data">
            <div class="icons_right">
                <a type="readmore" href="http://samplewebsite.com/?p=62" rel="bookmark" title="Permanent Link to Wakeboard Rails | Quick Silver"><img src="http://samplewebsite.com/wp-content/themes/sample_website/images/pop_out_icon.png" alt="pop out icon" type="readmore" /></a>
            </div>
            <h1 class="post_title">
                <a href="http://samplewebsite.com/?p=62" rel="bookmark" title="Permanent Link to Wakeboard Rails | Quick Silver">
                Wakeboard Rails | Quick Silver</a>
            </h1>
            <h2 class="post_snippet">Lorem ipsum dolor</h2>
            <p class="post_date">May 13th, 2012 by <a href="http://samplewebsite.com/?author=1" title="Posts by admin" rel="author">admin</a></p>
        </div> <!-- post_data //-->
        <a href="http://samplewebsite.com/?p=62" rel="bookmark" title="Permanent Link to Wakeboard Rails | Quick Silver"><img width="1280" height="1024" src="http://samplewebsite.com/wp-content/uploads/2012/05/wakeboard1.jpg" class="attachment-post-image wp-post-image" alt="wakeboard1" title="wakeboard1" /></a>
    </div>  <!-- 1 //-->

    <div class="loop-2 post-59">
        <div class="post_data">
            <div class="icons_right">
                <a type="readmore" href="http://samplewebsite.com/?p=59" rel="bookmark" title="Permanent Link to Jeremy Johnston | Florida"><img src="http://samplewebsite.com/wp-content/themes/sample_website/images/pop_out_icon.png" alt="pop out icon" type="readmore" /></a>
            </div>
            <h1 class="post_title">
                <a href="http://samplewebsite.com/?p=59" rel="bookmark" title="Permanent Link to Jeremy Johnston | Florida">
                Jeremy Johnston | Florida</a>
            </h1>
            <h2 class="post_snippet">Lorem ipsum dolor</h2>
            <p class="post_date">May 13th, 2012 by <a href="http://samplewebsite.com/?author=1" title="Posts by admin" rel="author">admin</a></p>
        </div> <!-- post_data //-->
        <a href="http://samplewebsite.com/?p=59" rel="bookmark" title="Permanent Link to Jeremy Johnston | Florida"><img width="1280" height="1024" src="http://samplewebsite.com/wp-content/uploads/2012/05/surfer6.jpg" class="attachment-post-image wp-post-image" alt="surfer6" title="surfer6" /></a>
    </div>  <!-- 1 //-->

    <div class="loop-3 post-56">
        <div class="post_data">
            <div class="icons_right">
                <a type="readmore" href="http://samplewebsite.com/?p=56" rel="bookmark" title="Permanent Link to Caribbean Waters | Duck Dive"><img src="http://samplewebsite.com/wp-content/themes/sample_website/images/pop_out_icon.png" alt="pop out icon" type="readmore" /></a>
            </div>
            <h1 class="post_title">
                <a href="http://samplewebsite.com/?p=56" rel="bookmark" title="Permanent Link to Caribbean Waters | Duck Dive">
                Caribbean Waters | Duck Dive</a>
            </h1>
            <h2 class="post_snippet">Lorem ipsum dolor</h2>
            <p class="post_date">May 13th, 2012 by <a href="http://samplewebsite.com/?author=1" title="Posts by admin" rel="author">admin</a></p>
        </div> <!-- post_data //-->
        <a href="http://samplewebsite.com/?p=56" rel="bookmark" title="Permanent Link to Caribbean Waters | Duck Dive"><img width="1280" height="960" src="http://samplewebsite.com/wp-content/uploads/2012/05/girl2.jpg" class="attachment-post-image wp-post-image" alt="girl2" title="girl2" /></a>
    </div>  <!-- 1 //--> 
```

html添加：\

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T07:50:46.440

要作为委托侦听器执行此操作，第一个选择器应该是 Ajax 内容的祖先。进行 ajax 调用时永远不会破坏的东西。

```
$('#neverDestroyed').on('mouseenter', '.actualTarget', function() {
  // stuff happens when .actualTarget has mouse enter it
}); 
```

老实说，代码有点“太长了；没读过”，但是当应用于您自己的选择器时，上面的代码应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T07:55:53.100

仍然不确定你想要做什么，但你真的只需要一个文档。准备好，我不明白选择第一个孩子直到第二个孩子等的情况。为什么不把它应用于所有这些，如果动画值发生变化，则使用一组值并根据元素索引、ID 或其他内容获取正确的值。

```
$(document).ready(function(){
    var elms = $("#rows > .row").children();
    var ani = ['94', '94', '99', '99'];

    $(document).on({
        mouseenter: function(e) {
            $('img', e.target).stop().animate({"bottom":"0px"}, "fast"); 
        },
        mouseleave: function(e) {
            var i = $(this).index();
            $('img', e.target).stop().animate({"bottom": ani[i]}, "fast");
        }
    }, elms);
}); 
```

# magento - magento 产品集合

> ID：10663154
> 
> 赞同：1
> 
> 时间：2012-05-19T07:11:32.523
> 
> 标签：magento

在扩展中，我在 catalog_product_view 页面上获得了产品集合，如下所示：

```
if (!$product = Mage::registry('product')) {
    return new Varien_Data_Collection();
}
$category = new Mage_Catalog_Model_Category();
$category->load($product->getCategoryId());
$collection = $category->getProductCollection(); 
```

以及如何向此集合添加其他属性？

例如我不能得到这样的东西

```
$collection->addAttributeToSelect('manufacturer'); 
```

我希望通过代码添加一些属性（不是id，因为这可能是布局中添加的不同属性），然后按此属性对数据进行分组

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T10:39:44.310

您可以实例化产品集合并对其进行过滤，而不是直接获取特定类别的产品：

```
if (!$product = Mage::registry('product')) {
    return new Varien_Data_Collection();
}
// get a product collection and filter it by category
$collection = Mage::getModel('catalog/product')->getCollection();
$collection->addCategoryFilter($product->getCategoryId());
// add the attributes you need
$collection->addAttributeToSelect('manufacturer');
$collection->setOrder('manufacturer', 'asc');
// load the collection and return it
$collection->load();
return $collection; 
```

注意：加载后不能将属性添加到集合中！此外，您不必显式调用`load()`- 集合将按需加载。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T05:20:58.420

尝试这个

```
<?php echo $_product->getResource()->getAttribute('manufacturer')->getFrontend()->getValue($_product); ?> 
```

# android - 如何为pdf文件分页卷曲

> ID：10663158
> 
> 赞同：6
> 
> 时间：2012-05-19T07:12:20.353
> 
> 标签：android

嗨，我是 android page curl 应用程序的新手，我使用 mupdf 开源通过显示 pdf 文件。这里使用意图动作视图，所以只有滚动工作，但我需要页面卷曲。如果有人知道答案，请帮助这个概念。谢谢你。

```
@Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);

        mAlertBuilder = new AlertDialog.Builder(this);

        if (core == null) {
            core = (MuPDFCore)getLastNonConfigurationInstance();

            if (savedInstanceState != null && savedInstanceState.containsKey("FileName")) {
                mFileName = savedInstanceState.getString("FileName");
            }
        }
        if (core == null) {
            Intent intent = getIntent();
            if (Intent.ACTION_VIEW.equals(intent.getAction())) {
                Uri uri = intent.getData();
                if (uri.toString().startsWith("content://media/external/file")) {
                    // Handle view requests from the Transformer Prime's file manager
                    // Hopefully other file managers will use this same scheme, if not
                    // using explicit paths.
                    Cursor cursor = getContentResolver().query(uri, new String[]{"_data"}, null, null, null);
                    if (cursor.moveToFirst()) {
                        uri = Uri.parse(cursor.getString(0));
                    }
                }
                core = openFile(Uri.decode(uri.getEncodedPath()));
            }
            if (core != null && core.needsPassword()) {
                requestPassword(savedInstanceState);
                return;
            }
        }
        if (core == null)
        {
            AlertDialog alert = mAlertBuilder.create();
            alert.setTitle(R.string.open_failed);
            alert.setButton(AlertDialog.BUTTON_POSITIVE, "Dismiss",
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int which) {
                            finish();
                        }
                    });
            alert.show();
            return;
        }

        createUI(savedInstanceState);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T07:23:18.523

从这里获取代码[android_page_curl](https://github.com/harism/android_page_curl)和[链接](http://techie-manoj.com/?p=146)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T07:20:34.513

从这里您可以下载[页面卷曲效果](http://code.google.com/p/android-page-curl/source/checkout)的源代码。

检查[此链接](https://stackoverflow.com/a/10598343/614807)以从 Google 代码中结帐源代码。

# sql-server - 如何创建此存储过程？

> ID：10663166
> 
> 赞同：2
> 
> 时间：2012-05-19T07:13:21.880
> 
> 标签：sql-server, stored-procedures, transactions

我有两张桌子：

```
CREATE TABLE [NEWS]
(
    [ID]      INT IDENTITY(1,1) NOT NULL,
    [TITLE]   VARCHAR(500) NULL,
    [CONTENT] VARCHAR(800) NULL,
    [CREATED] DATETIME DEFAULT(GETDATE())

    PRIMARY KEY ([ID])
)

CREATE TABLE [LOG]
(
    [ID]      INT IDENTITY(1,1) NOT NULL,
    [ACTION]  VARCHAR(500) NULL,
    [CREATED] DATETIME DEFAULT(GETDATE())

    PRIMARY KEY ([ID])
) 
```

我想做以下程序：

我有一个输入参数`@NewsId`。

第1步

*   如果`NewsId`是`NULL`：我想将该行保存到表中 ( `NEWS`)。
*   如果`newsid`已定义，那么我想更新该行。

第2步

*   我想做第 1 步，然后将记录保存到名为`LOG`.
*   `INSERT INTO LOG ("Action") VALUES ("insert or update")`

如何使用存储过程完成这两个步骤？

成功完成后如何进行一步并转到第二步？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T07:33:28.533

这是一个简单的示例，可以帮助您入门。

```
create procedure MyProc (@NewsId int) as
Begin

   -- you should really pass these in?
   declare @title   varchar(500) = 'A title'
   declare @content varchar(800) = 'A piece of content'

   if @NewsId is null
   begin

     Begin Try 
       insert into News (Title, Content)  values (@title, @content)

       -- get the new id just inserted
       set @NewsId = SCOPE_IDENTITY()

       insert into Log (Action) values ('insert')
     End Try

     Begin Catch
      .... handle error 
     end catch

   end
   else
   begin 
        update News set Title = @title, Content = @content
        where id = @NewsId
       insert into Log (Action) values ('update')

   end

end 
```

来自[代码项目](http://www.codeproject.com/Articles/12080/Using-TRY-CATCH-in-Transact-SQL)：

```
Begin Try 
 The_Query_for_which_we_need_to_do_the_ Error_Handling 
End Try 
Begin Catch 

  If there is some error in the query within the Try block, this flow 
  will be passed to this Catch block. 

End catch 
```

# python - 用正则表达式python的结果连接字符串

> ID：10663175
> 
> 赞同：-6
> 
> 时间：2012-05-19T07:14:23.730
> 
> 标签：python, regex

maya ascii 文件包含如下指令行。

```
...
createNode transform -n "pCylinder1";
createNode mesh -n "pCylinderShape1" -p "pCylinder1";
    setAttr ".vif" yes;
    setAttr ".uvst[0].uvsn" -type "string" "map1";
createNode transform -n "pPlane1";
    setAttr ".t" -type "double3" 7.3666236108700112 0 -4.2288466031573595 ;
createNode mesh -n "pPlaneShape1" -p "pPlane1";
    setAttr ".uvst[0].uvsn" -type "string" "map1";
    setAttr ".cuvs" -type "string" "map1";
createNode transform -n "pTorus1";
    setAttr ".t" -type "double3" -0.47688973199150198 0 -10.843417358550912 ;
...
connectAttr "polySphere1.out" "pSphereShape1.i";
connectAttr "polyCube1.out" "pCubeShape1.i";
connectAttr "polyCylinder1.out" "pCylinderShape1.i";
connectAttr "polyPlane1.out" "pPlaneShape1.i";
connectAttr "polyTorus1.out" "pTorusShape1.i";

... 
```

在这些行中，我需要搜索一条看起来像以下任何行的行。

```
createNode transform -n nodeName -p "FG";
createNode transform -n nodeName -p "BG";
createNode transform -n nodeName -p "MG"; 
```

我应该使用什么正则表达式来查找上述任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T08:50:13.583

这是我可以对您的描述做的最好的事情：

*我需要将搜索结果（可能是 FG|BG|MG ）与已知字符串连接起来*

```
import re

line = "createNode transform -n \"water\" -p \"FG\";" 

m = search(r'(FG|BG|MG)',line)
if m:
    result = m.groups()[0]

    # What do you want to concat it to? 
    known_string = "known_string" + result 
```

*“现在我需要搜索这个字符串。*为什么？你已经搜索过了。
*“zam 未知*- 不，它不是，它是`re.compile()`

抱歉，我无法进一步了解您的描述

# windows-services - 在多个实例中运行的 Windows 服务 - 最佳实践？

> ID：10663176
> 
> 赞同：1
> 
> 时间：2012-05-19T07:14:54.397
> 
> 标签：windows-services

我有一个项目同时运行多个“环境”：本地开发环境 (VS)、开发、测试和生产。

我们现在希望使用“服务器应用程序”来扩展程序套件，以将后台任务处理为计算和邮件发送。

我正在尝试为这种情况找到最佳实践。

我在想它应该是一个Windows服务。

因此，我需要运行服务的三个副本（Dev、Test 和 Prod），并且最好在分配为我们的应用程序服务器的单个服务器上运行。我想我可以将相关的 exe 复制到单独的目录中，并“以某种方式”指示每个服务它应该连接到哪个环境。

重要的是要注意这三个服务不一定会运行相同版本的代码。

这样做的最佳做法是什么？

任何输入表示赞赏！

丹麦安德斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T02:47:09.123

听起来 Windows 服务绝对是正确的选择。这些服务将是守护进程，彼此独立运行。

我建议不要创建 3 个可执行文件。坚持一个，因为它更容易部署。让你的 exe 接受一个命令行参数，告诉它应该运行哪个环境，并触发代码的适当部分。

然后很容易启动、停止和查询您的服务。

让我知道你的想法！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T14:06:18.787

为每个已安装的服务可执行文件实例使用应用程序配置文件，以便您可以设置运行环境。

# php - 无法从 PHP 类中检索数据

> ID：10663178
> 
> 赞同：0
> 
> 时间：2012-05-19T07:15:07.420
> 
> 标签：php

在以下代码中，我收到错误：`Undefined variable: base_url on line 27`和`Cannot access empty property on line 27`.

我需要回`http://google.com`显从 render() 传入的 get_url() 参数。

```
<?php

$smart_url = new smart();

$smart_url -> get_url('http://google.com');

echo  $smart_url -> render();

 /**
 * Smart URL
 */

class smart {

private $base_url;

/**
 * 
 * @param string $url
 */
public function get_url($url) {
        $this -> $base_url = $url;

}

/**
 * @return string $base_url
 */
public function render() {
    return $this -> $base_url;

}

}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T07:19:36.013

这只是一个语法错误。您可以通过以下方式访问参数：

```
 $this->base_url; 
```

没有`$`参数名称之前

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T07:19:53.953

语法不正确...
$this -> $base_url = $url;

应该

```
$this->base_url = $url; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T07:20:36.970

`$this -> $base_url`是错的; 没有 $ ,`$this->base_url`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-19T07:22:27.087

**简短的回答：**

利用：`$this->base_url`

**长答案：**

当您访问属性时，您不需要美元符号。简单地访问它们：

```
$this->base_url 
```

第二个将访问一个名为 $base_url 的类属性（变量的内容）。

这是一个常见的错误。美元符号仅用于在此上下文中声明变量：

```
protected $base_url; 
```

# apache - 阿帕奇安装；libpcre 错误

> ID：10663180
> 
> 赞同：46
> 
> 时间：2012-05-19T07:17:10.320
> 
> 标签：apache, pcre

在 Ubuntu 11.10 上安装 Apache 时，出现以下错误：

> 配置：错误：未找到 APR。请阅读文档。

我按照[此处](https://stackoverflow.com/questions/9436860/apache-httpd-setup-and-installation)的说明进行操作，然后出现以下错误：

> 配置：错误：找不到 libpcre 的 pcre-config。PCRE 是必需的，可从[http://pcre.org/获得](http://pcre.org/)

我做错了什么，我该如何解决？

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-05-23T09:35:02.333

[1\. 从PCRE.org](http://pcre.org/)下载 PCRE

2.用前缀编译并安装：

```
./configure --prefix=/usr/local/pcre
make
make install 
```

3\. 回到您的 Apache 安装位置并使用 PCRE 编译 Apache：

```
--with-pcre=/usr/local/pcre 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-10-25T23:37:20.250

对我（Fedora Linux）来说，只需安装 pcre-devel: 就足够了`yum install -y pcre-devel`。以后也不必用`--with-pcre`了。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-07-23T04:54:41.920

## Debian

在 Debian 9.5 的全新安装中，在安装 Apache 期间，必须有一些软件包和库以避免错误。接下来我展示错误的类型及其相应的解决方案

> 配置

*   配置：错误：在 $PATH 中找不到可接受的 C 编译器

    `$ sudo apt-get install build-essential`

*   配置：错误：找不到 libpcre 的 pcre-config。PCRE 是必需的，可从[http://pcre.org/获得](http://pcre.org/)

    `$ sudo apt-get install libpcre3-dev`

然后我进行配置，表明它是安装在路径中`/usr/local`而不是安装在 中`/usr/local/apache2`，否则会出现库错误。这个想法是为 httpd 创建的库以`/usr/local/lib`这样的方式结束，以便[动态链接器](https://unix.stackexchange.com/a/457917/301835)知道它们。

```
$ configure --prefix /usr/local 
```

* * *

> 汇编

并且对于以下编译，安装一些软件包也可以避免我们在干净安装 Debian 时出错。

*   xml/apr_xml.c:35:19：致命错误：expat.h：没有这样的文件或目录。

    `$ sudo apt-get install libexpat1-dev`.

建议使用 -j3 参数，使编译速度更快。虽然也可以忽略。

```
$ make -j3 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-12-02T07:30:23.337

我是在 CentOS 中使用 pcre 编译 apache2 的另一个问题。我在其他位置“/custom/location/pcre”安装 pcre 并配置命令抛出以下错误

```
configure: error: Did not find pcre-config script at "/custom/location/pcre" 
```

解决它，将标志更改`--with-pcre=/custom/location/pcre`为`--with-pcre=/custom/location/pcre/bin/pcre2-config`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-05-12T11:52:55.310

在**RHEL 3**中没有必要设置`--with-pcre`指向 pcre-config 的参数。只需要`pcre`路径

我的配置命令：

```
./configure --prefix=/usr/local/apache2 --with-pcre=/usr/local/pcre 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-12-05T13:11:55.923

这对我有用

./configure --prefix /u01/apache --with-included-apr --with-pcre=/usr/local/pcre/bin/pcre2-config

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-04-16T10:34:38.923

顺便说一句，在 CentOS 7.6 上构建 httpd 之前，请安装 pcre-devel

```
`$ sudo yum install pcre-devel` 
```

# blackberry - 在黑莓中移动标签字段的文本

> ID：10663183
> 
> 赞同：0
> 
> 时间：2012-05-19T07:17:28.313
> 
> 标签：blackberry, focus, labelfield

我在标签字段中有大量数据，并在其上使用 FOCUSABLE 使整个数据立即被选中。向下滚动焦点转到下一个 LabelField。有没有一种方法可以逐行移动 LabelField 的文本例如：我的标签字段是

```
 String tenlines="line
                      line 2... 
                      line10"
     LabelField f= new LabelField(tenlines); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T09:45:01.603

您可以使用 RichTextField

```
String tenlines="line
                      line 2... 
                      line10";

 RichTextField detailField = new RichTextField(tenlines) 
```

# iphone - 在 Objective-c 中实现倒数计时器？

> ID：10663184
> 
> 赞同：21
> 
> 时间：2012-05-19T07:17:31.567
> 
> 标签：iphone, objective-c, ios, nstimer

我是 iOS 编程的新手。我正在开发单词匹配游戏。在这个游戏中，我需要实现显示分钟和秒的时间计数器。我希望我的游戏开始时我的计时器从 3 分钟开始。现在我想用秒数反向减少这个计时器。我的代码只工作了几秒钟..这是我的代码：

```
 secondsLeft--;

  int seconds = (secondsLeft %3600) % 60;

  Timerlbl.text = [NSString stringWithFormat:@"%02d",seconds];

  if (seconds==0)

{

 UIAlertView *pAlert = [[UIAlertView alloc]initWithTitle:@"Sorry!!"   
 message:@"TimeOver"        delegate:self    cancelButtonTitle:@"OK"   
 otherButtonTitles:@"Cancel",nil];

 [pAlert show];

[pAlert release];

 }

 } 
```

在 Viewdidload 我通过计时器调用它..

```
 countDown=[NSTimer scheduledTimerWithTimeInterval:5.0 target:self 
                 selector:@selector(TimeOver) userInfo:nil repeats:YES]; 
```

请任何人指导我如何在几分钟和几秒钟内做到这一点。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-05-19T08:26:47.977

你可以这样做（启用ARC）：-

```
@interface ViewController()
{
UILabel *progress;
    NSTimer *timer;
    int currMinute;
    int currSeconds;
}
@end

@implementation ViewController
- (void)viewDidLoad
{
    [super viewDidLoad];
    progress=[[UILabel alloc] initWithFrame:CGRectMake(80, 15, 100, 50)];
    progress.textColor=[UIColor redColor];
    [progress setText:@"Time : 3:00"];
    progress.backgroundColor=[UIColor clearColor];
    [self.view addSubview:progress];
    currMinute=3;
    currSeconds=00;

    // Do any additional setup after loading the view, typically from a nib.
}
-(void)start
{
    timer=[NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(timerFired) userInfo:nil repeats:YES];

}
-(void)timerFired
{
if((currMinute>0 || currSeconds>=0) && currMinute>=0)
{
    if(currSeconds==0)
    {
        currMinute-=1;
        currSeconds=59;
    }
    else if(currSeconds>0)
    {
        currSeconds-=1;
    }
    if(currMinute>-1)
    [progress setText:[NSString stringWithFormat:@"%@%d%@%02d",@"Time : ",currMinute,@":",currSeconds]];
}
    else
    {
        [timer invalidate];
    }
} 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-10-28T05:58:34.813

我知道这是个老问题，但我想分享我实现这一目标的方法。我们有方法 (timeIntervalSinceDate:) 来计算间隔并有固定的秒数来倒计时。在我的情况下 300 秒。

**2015 年 7 月更新 SWIFT**

```
@IBAction func startTimer(sender: UIButton) {
    sender.selected = !sender.selected;
    //if selected fire timer, otherwise stop
    if (sender.selected) {
        self.timer = NSTimer.scheduledTimerWithTimeInterval(0.1, target: self, selector: Selector("updateTimer"), userInfo: nil, repeats: true);
        self.startDate = NSDate();
    } else {
        self.stopTimer();
    }

}

func stopTimer() {
    self.timer.invalidate();
}

func updateTimer() {
    // Create date from the elapsed time
    var currentDate:NSDate = NSDate();
    var timeInterval:NSTimeInterval = currentDate.timeIntervalSinceDate(self.startDate!);

    //300 seconds count down
    var timeIntervalCountDown = 300 - timeInterval;
    var timerDate:NSDate = NSDate(timeIntervalSince1970: timeIntervalCountDown);

    // Create a date formatter
    var dateFormatter = NSDateFormatter();
    dateFormatter.dateFormat = "mm:ss";
    dateFormatter.timeZone = NSTimeZone(forSecondsFromGMT: 0);

    // Format the elapsed time and set it to the label
    var timeString = dateFormatter.stringFromDate(timerDate);
    self.timerLabel?.text = timeString;
} 
```

[工作 github swift 示例项目](https://github.com/gneil90/countdown-label)

**Objective-C**

```
- (void)updateTimer
{
    // Create date from the elapsed time
    NSDate *currentDate = [NSDate date];
    NSTimeInterval timeInterval = [currentDate 
                                   timeIntervalSinceDate:self.startDate];
    NSLog(@"time interval %f",timeInterval);

    //300 seconds count down
    NSTimeInterval timeIntervalCountDown = 300 - timeInterval;

    NSDate *timerDate = [NSDate 
                         dateWithTimeIntervalSince1970:timeIntervalCountDown];

    // Create a date formatter
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@"mm:ss"];
    [dateFormatter setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0.0]];

    // Format the elapsed time and set it to the label
    NSString *timeString = [dateFormatter stringFromDate:timerDate];
    self.stopWatch.text = timeString;
}

- (void)stopTimer
{
    [self.stopWatchTimer invalidate];
    self.stopWatchTimer = nil;
    [self updateTimer];

}

- (void)startTimer
{

    if (self.stopWatchTimer) {
        [self.stopWatchTimer invalidate];
        self.stopWatchTimer = nil;
    }

    self.startDate = [NSDate date];    

    // Create the stop watch timer that fires every 100 ms
    self.stopWatchTimer = [NSTimer scheduledTimerWithTimeInterval:1.0/10.0
                                           target:self
                                         selector:@selector(updateTimer)
                                         userInfo:nil
                                          repeats:YES];
} 
```

**更新：**

每次通过 updateTimer 时创建一个 NSDateFormatter 是非常昂贵的。在循环外创建 NSDateFormatter 并重用它要好得多。学分：@siburb

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-19T07:58:46.577

**在 .h 文件中**

```
 IBOutlet UILabel* lblTimer;
 NSTimer* gameTimer; 
```

**在 .m 文件中**

```
-(void)viewDidLoad 
{
    [super viewDidLoad];
    [self createTimer];
}

- (void)createTimer 
{       
     NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
     NSRunLoop* runLoop = [NSRunLoop currentRunLoop];

   gameTimer = [[NSTimer timerWithTimeInterval:1.00 target:self selector:@selector(timerFired:) userInfo:nil repeats:YES] retain];
   [[NSRunLoop currentRunLoop] addTimer:gameTimer forMode:NSDefaultRunLoopMode];
   timeCount = 20; 
   [runLoop run];
   [pool release];
}

- (void)timerFired:(NSTimer *)timer 
{
    if(timeCount == 0)
    {
         [self timerExpired];
    } 
    else 
    {
         timeCount--;
        if(timeCount == 0) {
        [timer invalidate];
        [self timerExpired];
    }
 }
   lblTimer.text = [NSString stringWithFormat:@"%02d:%02d",timeCount/60, timeCount % 60];
   self.title = lblTimer.text;
} 
```

将上面的 Label Outlet 与 View 中的 Label 绑定。

它与我一起正常工作

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-08-25T07:44:12.687

Objective-C 中简单且更少的代码，

```
in .h file create objects for Timer and totalSeconds

 NSTimer *timer;
 int totalSeconds;

.m file
//you can call this method where you want 
[self startTimer];

-(void)startOtpTimer {
     totalSeconds = 120;//your time 
     timer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self 
     selector:@selector(updateCountDownTime) userInfo:nil repeats:YES];
 }

-(void)updateCountDownTime {
    [self populateLabelwithTime:totalSeconds];
        if( totalSeconds != 0) {
            totalSeconds -= 1;
        } else {
              [timer invalidate];//stop timer
              self.timeLabel.text = @"";//after reach 0 you can set empty string
         }
}

- (void)populateLabelwithTime:(int)seconds {
    self.timeLabel.text = [NSString stringWithFormat:@"%02d", totalSeconds];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-19T07:21:13.370

您可以使用`NSTimer`来实现这一点。

# vb.net - 处理 Windows 窗体 TextBox 控件中的 KeyCode/KeyChar 事件

> ID：10663193
> 
> 赞同：-1
> 
> 时间：2012-05-19T07:18:29.610
> 
> 标签：vb.net, winforms

我的表单上有各种输入文本框。并根据每个输入文本框中的条目，我更新显示文本框。但是，使用文本框的 AppendText 消息。我将输入文本框设置为仅接受数值。因此，对于正确输入的每个字符，我都会更新显示文本框。我遇到的问题是当用户选择 Key.Back 或 Key.Delete 时，我想做的是删除显示文本框中的最后一个字符，但我还没有做到这一点。如何使用 AppendText() 或该控件中可用的任何实用程序函数删除 TextBox 中包含的字符串中的最后一个字符？

```
If (e.KeyChar = ChrW(Keys.Back)) Then
                txtDisplay.Text -= 1
                txtDisplay.Update()
                ElseIf (Not (Char.IsDigit(e.KeyChar) Or Char.IsControl(e.KeyChar) Or (e.KeyChar = "."))) Then
                    e.Handled = True
                Else
                    txtDisplay.AppendText(e.KeyChar)
                End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T07:46:40.413

在`KeypPress`事件处理程序中使用它`txtDisplay`

```
 If e.KeyChar = ChrW(Keys.Back) Then
        If txtDisplay.Text.Length > 0 Then 
            txtDisplay.Text = txtDisplay.Text.Substring(0, txtDisplay.TextLength - 1)
            txtDisplay.SelectionStart = txtDisplay.Text.Length
        End If
    ElseIf (Not (Char.IsDigit(e.KeyChar) Or Char.IsControl(e.KeyChar) Or (e.KeyChar = "."))) Then
        e.Handled = True
    End If 
```

# javascript - 如何为 jqGird 中的列赋值？

> ID：10663195
> 
> 赞同：2
> 
> 时间：2012-05-19T07:19:17.180
> 
> 标签：javascript, codeigniter, jquery, jqgrid

我正在将 jqGrid 与 CodeIgniter 2.1.0 一起使用。让我烦恼的是如何为特定事件的特定列分配价值

假设我在列值中输入数量和费率......当我从“费率”字段中失去焦点......净额应该计算并显示在金额字段中......

我需要在这里做的是为金额字段分配计算值......但我不知道我该怎么做？

我所做的如下：

```
var selIRow = 1;
var rowid='';
var iCol='';
$("#purchasedetailsgrid").jqGrid({
    url: sitepath + 'purchase/purchase_grid',
    datatype: 'json',
    mtype: 'POST',
    height:220,
    width:500,
    colNames:["","","Store Name","Item Name","Inner Pkg.","Outer Pkg.","Qty","Rate","Amount"],
    colModel:[
        {name: 'storeID_hidden_field', index:'storeID_hidden_field',hidden: true, editable: true,edittype: 'text',editrules: {edithidden:true}},
        {name: 'itemID_hidden_field', index:'itemID_hidden_field',hidden: true, editable: true,edittype: 'text',editrules: {edithidden:true}},
        {name:'store_id', index:'store_id',width:150,search:false,editable:true,editrules:{number:false,maxlength:10}},
        {name:'item_id', index:'item_id',width:150,search:false,editable:true,editrules:{number:false,maxlength:10}},
        {name:'inner_pkg', index:'inner_pkg',width:150,search:false,editable:true,editrules:{number:true,maxlength:5}},
        {name:'outer_pkg', index:'outer_pkg',width:150,search:false,editable:true,editrules:{number:true,maxlength:5}},
        {name:'qty', index:'qty',editable:true,width:85,search:false,editrules:{number:true,maxlength:5}},
        {name:'rate', index:'rate',width:100,editable:true,search:false,editrules:{number:true,maxlength:10},
            editoptions: {
                dataInit: function (elem) { $(elem).focus(function () { this.select(); }) },
                dataEvents: [
                    {
                        type: 'keydown',
                        fn: function (e) {
                            var key = e.charCode || e.keyCode;
                            if (key == 9)//tab
                            {
                                $('#amount').val();//here in val() i need to write the value of qty and rate field
                            }
                        }
                    }
                ]
            }
        },
        {name:'amount', index:'amount',width:100,editable:true,search:false,editrules:{number:true,maxlength:10},
            editoptions: {
                dataInit: function (elem) { $(elem).focus(function () { this.select(); }) },
                dataEvents: [
                    {
                        type: 'keydown',
                        fn: function (e) {
                            var key = e.charCode || e.keyCode;
                            if (key == 13)//enter
                            {
                                var grid = $('#purchasedetailsgrid');
                                //Save editing for current row

                                grid.jqGrid('saveRow', selIRow, false, sitepath + 'purchase/purchase_grid');
                                selIRow++;
                                //If at bottom of grid, create new row
                                //if (selIRow++ == grid.getDataIDs().length) {
                                    grid.addRowData(selIRow, {});
                                //}
                                //Enter edit row for next row in grid
                                grid.jqGrid('editRow', selIRow, false, sitepath + 'purchase/purchase_grid');
                            }
                        }
                    }
                ]
            }
        }
    ],
    pager: '#purchasedetailstoolbar',
    rowNum:10,
    rowList:[10,20,30],
    sortname: 'inventory_id',
    sortorder: 'desc',
    viewrecords: true,
    rownumbers: true,
    gridview: true,
    multiselect: false,
    autoresize:true,
    autowidth: true,
    editurl: sitepath + 'purchase/purchase_grid',
    toolbar: [true,"top"],
    gridComplete: function () 
    {
        var grid = jQuery("#purchasedetailsgrid");
        var ids = grid.jqGrid('getDataIDs');
        if(ids == '')
        {
            grid.addRowData(selIRow, {});
            grid.jqGrid('editRow', selIRow, false, sitepath + 'purchase/purchase_grid');
        }
        for (var i = 0; i < ids.length; i++) 
        {

        }
    },
    caption: 'Purchase List',
}); 
jQuery("#purchasedetailsgrid").jqGrid('navGrid','#purchasedetailstoolbar',{view:false,edit:false,add:false,del:false,search: false});
jQuery("#purchasedetailsgrid").jqGrid('inlineNav','#purchasedetailstoolbar');
jQuery("#purchasedetailsgrid").jqGrid('filterToolbar',{stringResult:false,searchOnEnter : false},{autosearch: true});
var temp_purchase = $("#purchasedetailsgrid_header").html();
$("#t_purchasedetailsgrid").html(temp_purchase);
$("#refresh_purchasedetailsgrid").attr('title',"Reload Grid"); 
```

现在谁能建议我如何从一列中获取价值并将其分配给另一列？

任何建议将不胜感激。

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T16:38:45.467

您当前的代码有很多问题。例如，您写道，您需要根据 qty 和 rate 计算金额，但您`dataEvents`在“rate”和“amount”列中定义了一些，而不是“qty”和“rate”列。下一个问题是`editRow`直接在`gridComplete`. 因此，工具栏中的按钮`inlineNav`将保持错误状态。另一个问题是，您需要根据 'qty' 和 'rate' 重新计算 'amount' ，不仅因为 'qty' 和 'rate' 失去焦点，还需要将值保存在`Enter`.

为了更容易解决上述问题，我编写[了可以修改的演示](http://www.ok-soft-gmbh.com/jqGrid/RaviDalal.htm)，符合您的确切要求。您可以在下面找到演示中最重要的部分：

```
var editingRowId = undefined,
    recomputeAmount = function () {
        var rate = $("#" + editingRowId + "_rate").val(),
            qty = $("#" + editingRowId + "_qty").val(),
            newAmount = parseFloat(rate) * parseFloat(qty);
        $("#" + editingRowId + "_amount").val(isFinite(newAmount) ? newAmount : 0);
    },
    myEditParam = {
        keys: true,
        oneditfunc: function (id) {
            editingRowId = id;
        },
        afterrestorefunc: function (id) {
            editingRowId = undefined;
        },
        aftersavefunc: function (id) {
            var $this = $(this),
                rate = $this.jqGrid("getCell", id, "rate"),
                qty = $this.jqGrid("getCell", id, "qty"),
                newAmount = parseFloat(rate) * parseFloat(qty);
            $this.jqGrid("setCell", id, "amount", newAmount);
            editingRowId = undefined;
        }
    },
    numInput = {
        type: 'keydown',
        fn: function (e) {
            var key = e.which;
            // allow only '0' <= key <= '9' or key = '.', Enter, Tab, Esc
            if ((key < 48 || key > 57) && key !== $.ui.keyCode.PERIOD &&
                key !== $.ui.keyCode.TAB && key !== $.ui.keyCode.ENTER && key !== $.ui.keyCode.ESCAPE) {
                return false;
            }
        }
    },
    recompute = {
        type: 'focusout',
        fn: function (e) {
            recomputeAmount();
        }
    };
$("#purchasedetailsgrid").jqGrid({
    colModel: [ 
        ...
        {name:'qty', index:'qty',editable:true,width:85,search:false,editrules:{number:true,maxlength:5},
            editoptions: {
                dataInit: function (elem) { $(elem).focus(function () { this.select(); }) },
                dataEvents: [ numInput, recompute ]
            }
        },
        {name:'rate', index:'rate',width:100,editable:true,search:false,editrules:{number:true,maxlength:10},
            editoptions: {
                dataInit: function (elem) { $(elem).focus(function () { this.select(); }) },
                dataEvents: [ numInput, recompute ]
            }
        },
        {name:'amount', index:'amount',width:100,editable:true,search:false,editrules:{number:true,maxlength:10}}
    ],
    loadComplete: function () {
        var gridIdSelector = '#' + $.jgrid.jqID(this.id);
        if (this.rows.length > 1) {
            //$(this).jqGrid('editRow', this.rows[1].id, myEditParam);
            $(this).jqGrid('setSelection', this.rows[1].id, true);
            setTimeout(function() {
                // we should simulate click of the button not after the grid is loaded, but
                // after the toolbar with the cliked button will be created by inlineNav
                $(gridIdSelector + "_iledit").click();
            }, 100);
        } else {
            setTimeout(function() {
                // we should simulate click of the button not after the grid is loaded, but
                // after the toolbar with the cliked button will be created by inlineNav
                $(gridIdSelector + "_iladd").click();
            }, 100);
        }
    }
 }); 
 jQuery("#purchasedetailsgrid").jqGrid('navGrid','#purchasedetailstoolbar',
     {view:false,edit:false,add:false,del:false,search: false, refreshtitle: "Reload Grid"});
 jQuery("#purchasedetailsgrid").jqGrid('inlineNav','#purchasedetailstoolbar',
     {edit: true, add: true, editParams: myEditParam, addParams: {addRowParams: myEditParam}}); 
```

如果需要，我可以评论代码中不清楚的部分。

# c - 如何将一个或多个变量传递给新创建的线程？

> ID：10663205
> 
> 赞同：2
> 
> 时间：2012-05-19T07:20:47.467
> 
> 标签：c, linux, pthreads

我现在正在学习线程。我想知道是否可以将变量传递给我的线程。我的任务是创建一个线程并为每个线程分配一个数字（如果你愿意的话，一个名称）并每 100 毫秒打印一次数字。我目前的程序如下：

```
#define PCHECK(sts,msg) if((sts)!=0){printf("error : %s\n",msg); exit(EXIT_FAILURE)}
#define NB_THREAD 5

void* do_nothing(void* data)
{
    int i;

    //printf("creation thread %d",(int)data);
    while(1)
    {
        usleep(100000);
    printf("thread number : %d \n",data);
    }
    i = 0;
    pthread_exit(NULL);   
    //exit(EXIT_SUCCESS);
}

int main(int argc, char *argv[])
{
    int pid, j, status;
    pthread_t thread;
    int * res;
    int stat;

    for (j = 0; j < NB_THREAD; j++)
    {
        stat = pthread_create(&thread, NULL, do_nothing, (void *) j );
        if (stat !=0)
        {
            perror ("pthread_create()");
        }
    }
    for (j = 0; j < NB_THREAD; j++)
    {
        pthread_join(thread, (void **) &res );
    }

    return EXIT_SUCCESS;
} 
```

目前唯一打印的数字是 0（数据的值）。有人可以指出我哪里出错了谢谢:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T07:25:15.390

下面是一些关于如何将参数传递给 pthread 的好例子

[1] [https://computing.llnl.gov/tutorials/pthreads/#PassingArguments](https://computing.llnl.gov/tutorials/pthreads/#PassingArguments)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T17:19:33.133

我怀疑您的问题可能是您在使用 32 位`int`类型的 64 位系统上运行它。`data`64 位类型也是如此`void*`，但在您的线程函数中，您将其打印为 32 位`int`：

```
// example assumes that this thread instance was started by
//   pthread_create(&thread, NULL, do_nothing, (void *) j ) when
//   j == 1

printf("thread number : %d \n",data);
                         ^       ^
                         |       +--------  passing a 64-bit pointer 0x00000000.00000001
                         |
                         +----------------  treats the pointer argument as a 32-bit int and
                                            happens to only see the all-zero 32-bits 
```

我怀疑如果您将其更改`printf()`为：

```
printf("thread number : %d \n", (int) data); 
```

作为一般规则，在编写线程函数时，我认为让线程函数的第一个动作是将传递给线程函数的数据项转换为实际传递给的类型是个好主意`pthread_create()`：

```
void* do_nothing(void* data)
{
    int id = (int) data; // `pthread_create()` was passed an `int`
                         //    `data` is not used again after this point

    // ...
} 
```

其他几点

*   如果您将指向数据的实际指针传递给线程函数，请确保每个线程都有自己的单独副本（除非数据应该是每个线程的相同实例，这是可能的但不常见）。

*   如果您正在启动多个线程，您要么需要保留（可能在一个数组中）`pthread_t`返回的每个对象`pthread_create()`，以便稍后加入它们，或者您需要在重用对象之前调用`pthread_join()`/以便系统可以清理任何当线程完成运行时它为该线程分配的资源。在发布的示例中，这可能无关紧要，因为线程将永远运行（或直到某些东西杀死进程）。您的通话将永远不会成功完成。`pthread_detach()``pthread_t``pthread_join()`

    但是，当您更改内容时，以下代码注定会中断，因此线程函数会在一段时间后停止：

    ```
    for (j = 0; j < NB_THREAD; j++)
    {
        pthread_join(thread, (void **) &res );
    } 
    ```

    因为`thread`只`pthread_t`创建了最后一个线程，一旦成功加入就不能再使用了。下一个循环迭代将尝试加入一个已经加入并且不再有效的线程。

# iphone - 使用 SINGLE Query 删除两个 TABLES 条目

> ID：10663207
> 
> 赞同：1
> 
> 时间：2012-05-19T07:21:14.123
> 
> 标签：iphone, objective-c, ipad, ios5, sqlite

我试图在我的 iPhone 应用程序的 sqlite 数据库中删除两个 TABLES 条目，但我遇到了一个奇怪的错误。

```
DELETE Sec1Opr_Equipment.*, Sec2Opr_Equipment.* FROM 
Sec1Opr_Equipment INNER JOIN Sec2Opr_Equipment ON Sec1Opr_Equipment.ID = Sec2Opr_Equipment.ID 
WHERE Sec1Opr_Equipment.ID='1' 
```

也试试

```
DELETE Sec1Opr_Equipment,Sec2Opr_Equipment
FROM Sec1Opr_Equipment
LEFT JOIN Sec2Opr_Equipment
ON Sec1Opr_Equipment.ID = Sec2Opr_Equipment.ID
WHERE Sec2Opr_Equipment.ID='1' 
```

请任何人帮助我..提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T07:41:48.780

这是不可能的，在 SQLite 中，delete 语句只能从单个表中删除记录而没有任何连接。您可以在 WHERE 子句中使用子查询：

```
DELETE FROM tbl1 WHERE id IN (SELECT id FROM tbl2 WHERE ...) 
```

# ios - 视网膜上的核心动画

> ID：10663208
> 
> 赞同：1
> 
> 时间：2012-05-19T07:21:13.990
> 
> 标签：ios, animation, core-animation, calayer, retina-display

我为 Mac (Cocoa) 应用程序编写了一些代码，其中的动画流畅而可爱。但是，我将它原样复制到 iOS 项目中，并在分辨率高的“新 iPad”上运行它，并且由于某种原因，图层动画是锯齿状的。图层突然向上移动了几个像素，然后停了一秒钟，然后突然又弹出了几个像素，就像一个非常低帧率的动画）。

**有趣**的是，在旧 iPad 1 上运行相同的代码得到了流畅的结果！！x( .. 让我意识到这是视网膜显示问题。

我正在做一个微弱（缓慢）的动画，并没有过多地移动图层。（例如，在 9.1 秒的时间内将 layer.position.x 移动 10 个像素。这给了我们一个提示，即该层没有对 0.x 像素进行插值？）

我尝试将速度（减少持续时间）提高四倍，它的动画效果没有问题。:/ 但是，微弱的动画（慢）有问题..

有任何想法吗？

*如果我的问题含糊不清，这可能会有所帮助：*

在 10 秒的时间内将图层移动 10 个像素。在 iPad 上，它看起来很棒（大概 60 FPS）。

在新的 iPad（视网膜）上，就好像它是 10 FPS（或类似的东西）！！。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T07:30:35.017

为了在 Retina 屏幕上正确设置动画，缺少了一行额外的代码 .. >.<

```
 if ([subLayer respondsToSelector:@selector(setContentsScale:)]) {
        subLayer.contentsScale = [[UIScreen mainScreen] scale];
    } 
```

来自这个了不起的家伙：[Retina 显示核心图形字体质量](https://stackoverflow.com/questions/5414631/retina-display-core-graphics-font-quality)

（我认为我不应该结束这个问题，因为这个标题更合适，因为它解决了核心动画的所有视网膜问题）。

# facebook - 如何通过图形 api 获取 first_name？

> ID：10663209
> 
> 赞同：5
> 
> 时间：2012-05-19T07:21:23.203
> 
> 标签：facebook, facebook-graph-api

我可以使用以下代码获取图片：

```
https://graph.facebook.com/userid/picture 
```

但这不起作用：

```
https://graph.facebook.com/userid/first_name 
```

如何获取用户名？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-19T07:26:50.470

你不能得到`first_name`像你得到图片。

[https://graph.facebook.com/userid/?fields=first_name](https://graph.facebook.com/userid/?fields=first_name)

会得到

```
{
   "first_name": "Jashwant",
   "id": "1137725463"
} 
```

然后你可以`first_name`通过任何 json 解析器获取。

这是**GIVE_ME_THE_CODE**版本，

```
<html>
<head>
<style>

</style>
<script src='http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js'></script>
<script type='text/javascript'>
 $(document).ready(function(){
    $.getJSON('http://graph.facebook.com/jashwantsingh?fields=first_name',function(data){
        $('<p>' + data.first_name + '<p>').appendTo('body');
    })
 })

</script>
</head> 
<body> 

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T09:44:44.757

我在这里回答了你这个问题：http:
[//facebook.stackoverflow.com/questions/10663413/how-to-print-all-friendss-name/10663570#10663570](http://facebook.stackoverflow.com/questions/10663413/how-to-print-all-friendss-name/10663570#10663570)

要获取当前用户名，您可以进行 FQL 调用：

```
FB.api({ method: 'fql.query', query: 'SELECT uid, first_name FROM user WHERE uid = me()' }, function(response) {
    var user = response[0];
    alert(user.first_name);
}); 
```

您还可以进行 Graph API 调用：

```
FB.api('/me?fields=first_name', function(response) {
    alert(response.first_name);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T07:50:15.980

我不知道 facebook-api-graph 的实现。我使用 java 语言来获取名字，我们从 facebook 获取响应为 response.getBody()

此响应将包含 json 数据格式的数据。

你可以看看下面的问题。

[如何将此json数据解析为java](https://stackoverflow.com/questions/7607119/how-to-parse-this-json-data-to-java)

# android - App Inventor：从 web 视图在新窗口中打开链接？

> ID：10663210
> 
> 赞同：1
> 
> 时间：2012-05-19T07:21:25.617
> 
> 标签：android, app-inventor

如何确保 app-inventor 程序中 webview 组件中的所有链接始终作为新窗口打开？即，使用“完整浏览器”。

我检查了*FollowLinks*选项，但这只是打开 web 视图中的链接。取消选中该选项会禁用 webview 中的所有链接。

此外，webview 中显示的超链接具有`target="_blank"`属性集。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T22:44:33.247

不幸的是，这对于 App Inventor 中的 webview 是不可能的，但是您可以使用活动启动器来启动浏览器而不是 Taifun

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T22:57:31.220

您可以通过扩展[`WebViewClient`](http://developer.android.com/reference/android/webkit/WebViewClient.html)和重载[`shouldOverrideUrlLoading`](http://developer.android.com/reference/android/webkit/WebViewClient.html#shouldOverrideUrlLoading%28android.webkit.WebView,%20java.lang.String%29)方法来做到这一点。每当您单击 web 视图中的链接时，都会调用此方法。

在您的重载方法中，您将生成一个意图来打开浏览器并使用此意图启动一个活动。最后，您[`setWebViewClient`](http://developer.android.com/reference/android/webkit/WebView.html#setWebViewClient%28android.webkit.WebViewClient%29)在 webview 上使用该方法并将您的扩展`WebViewClient`作为参数传递。

我在[github](https://github.com/DokuWikiMobile/dokuwikimobile/blob/alpha/src/org/dokuwikimobile/ui/view/DokuwikiWebView.java#L115)上的一个项目中有一些示例代码。在第[115](https://github.com/DokuWikiMobile/dokuwikimobile/blob/alpha/src/org/dokuwikimobile/ui/view/DokuwikiWebView.java#L115)行`WebViewClient`设置。在这个例子中，只有特殊的链接会被加载到外部浏览器中。[其意图在第130](https://github.com/DokuWikiMobile/dokuwikimobile/blob/alpha/src/org/dokuwikimobile/ui/view/DokuwikiWebView.java#L130)行生成。

# forms - 如何在 GWT 中实现服务器端防止双重提交？

> ID：10663215
> 
> 赞同：3
> 
> 时间：2012-05-19T07:22:50.697
> 
> 标签：forms, gwt, double-submit-prevention

我正在构建一个带有很多表单的 GWT 应用程序。我正在使用 gwt-platform 及其调度模块。

我的下一步是防止在服务器端重复提交。问题是我不知道该怎么做...

我想到了这样的事情：

1.  当应用程序加载时，服务器会向客户端提供一些生成的令牌
2.  服务器将令牌存储在 HTTPSession 中
3.  当客户端提交表单时，它将从 (1.) 发送令牌以及表单
4.  服务器检查 HTTPSession 中发送的令牌是否 == 令牌
5.  在对客户端的回答中，它将发送一个新令牌

将令牌存储在 HTTPSession 中是否安全？或者我应该简单地在服务器上创建一个从 SESSION_ID 映射到生成的令牌的 HashMap？

或者也许已经在 GWT 或 gwt-platform 或其他地方实现了它？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T07:48:18.220

你首先要问自己的问题是：你想避免什么样的问题场景？

1.  用户不小心（或出于沮丧，...）单击按钮两次。
2.  只能使用一次的资源（例如飞机上某个座位的预订）被消耗两次。

不要只说“我想避免两者”。即使这样做，您也必须分别处理这两个问题。

### 问题 1

这可以在客户端更好地解决（例如，一旦单击按钮就禁用它）。

它也可以在服务器端解决（通过检查序列号或令牌或者可能是内容的哈希码，......），但我真的不明白这一点。如果用户真的想提交两次（例如通过操作 JavaScript 使按钮不会被禁用），那么就让他们：问题 1 与安全性无关。

### 问题 2

这必须在服务器端解决（除非在非常特殊的情况下）。这主要是关于安全性。但是仔细一想，**这个问题并不能通过双重提交预防来解决**！为什么不？

让我们看一下我们的示例：飞机上的座位只能预订一次。这可以通过多种方式违反：

*   通过双重提交。
*   由同一用户同时提交，例如从不同的浏览器窗口。
*   由多个用户尝试同时预订。

解决问题的干净方法是通过保留座位以原子方式检查座位的可用性。如果违规是由重复提交引起的，这并不重要（问题 1 涵盖了意外的重复提交）。

### ...和问题 3

如果你已经实现了一些自动重提交机制，那么你可能还会遇到第三种问题：

假设用户想要将商品添加到他的购物车。客户端提交，超时前未收到来自服务器的响应。所以它会自动再次发送。然而，服务器接收到这两条消息，并尝试同时处理它们——因此它将商品两次添加到购物车中。

在我看来，避免这种情况的最佳解决方案通常不是使用“将一件商品添加到购物车”之类的操作，而是“将商品的目标数量设置为 1”。同样，您也可以使用序列号等。

# mongodb - mongodb的动态集合设计

> ID：10663217
> 
> 赞同：0
> 
> 时间：2012-05-19T07:22:54.673
> 
> 标签：mongodb, nosql

我正在为社交网络设计通知中心，我只是想将一个用户的通知存储在一个名为 notification_$userid 的集合中（$userid 是动态的）。

而对于这样的设计，我认为这可以比将所有用户的通知放在一个集合中更快地读取和写入。但它有什么缺点吗？或者一分贝的收集量有什么限制吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T07:33:24.590

我认为您可能需要重新考虑这一点。原因是，无论 noSQL 数据库多么灵活，它仍然可以是巨大的。还有分片，如果你以后成长，你可能要考虑迁移到集群等。我建议你在应用层解决这个任务。

这是我的做法：

1）用户来了，做了一些通知其他用户的事情 2）这个“手势”不是作为通知存储在您的数据库中，而是在相关的用户“通知”单元格中。3) 用户的“通知”单元格类似于数组 - 在 MongoDB 中它是一个数组，您只需将对象存储在那里

这样，您也可以在数据库中“个性化”您的通知，并且避免使用“通知”集合。您唯一需要做的就是将该通知推送到相关用户的“通知”数组中。

# java - 识别文本中的正面和负面词

> ID：10663220
> 
> 赞同：2
> 
> 时间：2012-05-19T07:22:57.797
> 
> 标签：java, java.util.scanner

我正在尝试研究如何扫描对话的文本文件，找出有多少积极词和消极词。肯定词和否定词包含在两个单独的文本文件中，用于“扫描”对话文本文件。

在它找到正面和负面词的数量后，我试图让它统计每一个，然后告诉我是否发现了更多正面或负面的词。

到目前为止，我有下面的代码，它只让我对积极的词进行计数。在这个阶段，我并不是在看 NLP 之类的东西，而只是在更基础的层面上看东西。

我想我有第二部分在错误的位置寻找否定词。而且我认为我需要使用布尔值来告诉我是否发现了更多积极或消极的词，但我不知道该怎么做。

我很困惑，因为我是 Java 新手，而且一般是编程。

任何帮助将不胜感激。

```
package omgilisearch;

import java.io.FileNotFoundException;
import java.io.FileReader;
import java.util.HashSet;
import java.util.Map;
import java.util.Scanner;
import java.util.Set;
import java.util.TreeMap;

public class SentimentTest {

    public static void main(String[] args) throws Exception {
          printAllCounts(
            readWordFile("ConversationTest.txt", loadKeywords("PositiveWords.txt")));
        }
    public static void main1(String[] args) throws Exception {
          printAllCounts(
            readWordFile("ConversationTest.txt", loadKeywords("NegativeWords.txt")));
        }

        private static Map<String, Integer> readWordFile(
          String fname, Set<String> keywords) throws FileNotFoundException
        {
          final Map<String, Integer> frequencyData = new TreeMap<String, Integer>();
          for (Scanner wordFile = new Scanner(new FileReader(fname)); 
            wordFile.hasNext();) 
          {
            final String word = wordFile.next();
            if (keywords.contains(word)) 
              frequencyData.put(word, getCount(word, frequencyData) + 1);
          }
          return frequencyData;
        }

        private static void printAllCounts(Map<String, Integer> frequencyData) {
          System.out.println("-----------------------------------------------");
          System.out.println(" Occurrences Word");
          for(Map.Entry<String, Integer> e : frequencyData.entrySet())
            System.out.printf("%15d %s\n", e.getValue(), e.getKey());
          System.out.println("-----------------------------------------------");
        }

        private static int getCount(String word, Map<String, Integer> frequencyData) {
            return frequencyData.containsKey(word)? frequencyData.get(word) : 0;
        }

        private static Set<String> loadKeywords(String fname) 
        throws FileNotFoundException 
        {
          final Set<String> result = new HashSet<String>();
          for (Scanner s = new Scanner(new FileReader(fname)); s.hasNext();) 
            result.add(s.next());
          return result;
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T08:12:47.813

您必须拥有一些所谓的“坏”单词数组（硬编码），然后遍历整个文本文件并将数组中的每个单词与您当前检查的单词进行比较。如果该词与数组中的一个词匹配，则增加一些保存坏词数量的变量，例如。坏词++；。我相信这种方法应该有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T23:31:40.553

```
package omgilisearch;

import java.io.FileNotFoundException;
import java.io.FileReader;
import java.util.HashSet;
import java.util.Map;
import java.util.Scanner;
import java.util.Set;
import java.util.TreeMap;

public class SentimentTest {

    public static void main(String[] args) throws Exception {
          printAllCounts(
            readWordFile("ConversationTest.txt"));
        }

private static Map<String, Integer> readWordFile(String string) {

        return null;
    }

String[] goodWordsHolder = new String[3];{

goodWordsHolder[0] = "good"; goodWordsHolder[1] = "great";goodWordsHolder[2] = "excellent";

for(int iteration = 0; iteration < goodWordsHolder.length; iteration++) { String currentWordInText;
if(goodWordsHolder[iteration] == currentWordInText) { }// The word is a bad word } }

private static void printAllCounts(Map<String, Integer> frequencyData) {
          System.out.println("-----------------------------------------------");
          System.out.println(" Occurrences Word");
          for(Map.Entry<String, Integer> e : frequencyData.entrySet())
            System.out.printf("%15d %s\n", e.getValue(), e.getKey());
          System.out.println("-----------------------------------------------");
        }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T00:30:35.627

```
package omgilisearch;

import java.io.*;

   public class SentimentTest {     

public static void main(String[] args) {

        String[] lines = new String[0];         
    String path = "ConversationTest.txt";         
    BufferedReader br = null;      
    try {

             File file = new File(path);

        br = new BufferedReader(                  
             new InputStreamReader(                  
             new FileInputStream(file)));             

    String line;             
    while( (line = br.readLine()) != null ) {                 

    lines = add(line, lines);

             }             

    br.close(); 

      } catch(IOException e) {             

    System.out.println("read error: " + e.getMessage());

         }         
    print(lines);     

    }       

    private static String[] add(String s, String[] array) { 

        String[] goodWordsHolder = new String[3];{

        }goodWordsHolder[0] = "good"; goodWordsHolder[1] = "great";goodWordsHolder[2] = "excellent";
        for(int iteration = 0; iteration < goodWordsHolder.length; iteration++) { String currentWordInText = null; if(goodWordsHolder[iteration] == currentWordInText) { }}
        return goodWordsHolder; } 

    private static void print(String[] data) {

       for(int i = 0; i < data.length; i++)             
    System.out.println(data[i]);     
} 

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-20T09:09:58.670

数组存储多个相同信息类型的项目，例如。字符串 [] 坏词；。我相信你应该使用它，因为我相信你会在对话文本中找到超过 1 个你想找到的坏词，如果没有，那么简单地使用 1 个字符串，例如。字符串坏词；。

我不会写出所有让它工作的代码，我只会给你一个算法。

```
public class test {

// The process of picking out all the good and bad words
public static void main(String[] args) {
    // Setting up all the needed variables
        // Set up all the good words
        String[] goodWordsHolder = new String[2];
        goodWordsHolder[0] = "firstGoodWord";
        goodWordsHolder[1] = "secondGoodWord";
        // Set up all the bad words
        String[] badWordsHolder = new String[2];
        badWordsHolder[0] = "firstBadWord";
        badWordsHolder[1] = "secondBadWord";
        // Set up the counters
        int amountOfGoodWords = 0;
        int amountOfBadWords = 0;
        int currentWordInText = 0;
        // boolean that will exit the loop
        boolean ConversationEnded = false;

    while(!ConversationEnded) {
        // Compare the currentWord from the conversation with the hard coded words
        for(int iteration = 0; iteration < goodWordsHolder.length; iteration++) { 
            if(goodWordsHolder[iteration] == getWordInText(currentWordInText)) {
                amountOfGoodWords++;
            }   
        }
        for(int iteration = 0; iteration < badWordsHolder.length; iteration++) { 
            if(badWordsHolder[iteration] == getWordInText(currentWordInText)) {
                amountOfBadWords++;
            }   
        }
        // Increase the current word value so the next time we compare the next word in the conversation will be compared
        currentWordInText++;

        // Check that we haven't reached the end of the conversation
        if(endOfTheConversationHasBeenReached()) {
            // This will exit the while loop
            ConversationEnded = true;
        }
    }

    // Now print all the information to the console
    System.out.println("Amount of good Words: " + amountOfGoodWords);
    System.out.println("Amount of bad Words: " + amountOfBadWords);
    if(amountOfGoodWords > amountOfBadWords) {
        System.out.println("There are more good words than bad words.");
    }
    else {
        System.out.println("There are more bad words than good words.");
    }

}

// The method(s) you'll have to code out yourself. I suggest you read up on the web and so on to assist you with this.

private static String getWordInText(int currentWordInText) {
    // TODO Auto-generated method stub
    return null;
}

private static boolean endOfTheConversationHasBeenReached() {
    // TODO Auto-generated method stub
    return false;
}

} 
```

如有逻辑错误，请见谅。代码尚未调试。;) 希望这将引导您走向正确的方向。

# objective-c - 调用 cart_customer.addresses magento API 以从 iOS 下订单时出现 HTTP 错误 500

> ID：10663223
> 
> 赞同：0
> 
> 时间：2012-05-19T07:23:28.900
> 
> 标签：objective-c, magento, magento-1.5

当调用“cart_customer.addresses”magento API 以从 iOS 下订单时，我收到 HTTP 错误 500。但是，按照[此处](http://www.magentocommerce.com/wiki/doc/webservices-api/api/cart#cart_customer.addresses)的示例，它在我由 PHP 编写的测试 api 页面上正常工作。

我不知道为什么从 iOS 调用它时会发生 HTTP 500 错误。下面是我的 Objective-C 源代码：

```
// Create billing address dictionary
NSMutableDictionary *billingAddressDict = [[[NSMutableDictionary alloc] init] autorelease];

[billingAddressDict setObject:@"billing" forKey:@"mode"];
[billingAddressDict setObject:@"testFirstname" forKey:@"firstname"];
[billingAddressDict setObject:@"testLastname" forKey:@"lastname"];
[billingAddressDict setObject:@"testCompany" forKey:@"company"];
[billingAddressDict setObject:@"testStreet" forKey:@"street"];
[billingAddressDict setObject:@"testCity" forKey:@"city"];
[billingAddressDict setObject:@"testRegion" forKey:@"region"];
[billingAddressDict setObject:@"testPostcode" forKey:@"postcode"];
[billingAddressDict setObject:@"SG" forKey:@"country_id"];
[billingAddressDict setObject:@"0123456789" forKey:@"telephone"];
[billingAddressDict setObject:[NSNumber numberWithInt:0] forKey:@"is_default_shipping"];
[billingAddressDict setObject:[NSNumber numberWithInt:0] forKey:@"is_default_billing"];

// Create shipping address dictionary
NSMutableDictionary *shippingAddressDict = [[[NSMutableDictionary alloc] init] autorelease];

[shippingAddressDict setObject:@"shipping" forKey:@"mode"];
[shippingAddressDict setObject:@"testFirstname" forKey:@"firstname"];
[shippingAddressDict setObject:@"testLastname" forKey:@"lastname"];
[shippingAddressDict setObject:@"testCompany" forKey:@"company"];
[shippingAddressDict setObject:@"testStreet" forKey:@"street"];
[shippingAddressDict setObject:@"testCity" forKey:@"city"];
[shippingAddressDict setObject:@"testRegion" forKey:@"region"];
[shippingAddressDict setObject:@"testPostcode" forKey:@"postcode"];
[shippingAddressDict setObject:@"SG" forKey:@"country_id"];
[shippingAddressDict setObject:@"0123456789" forKey:@"telephone"];
[shippingAddressDict setObject:[NSNumber numberWithInt:0] forKey:@"is_default_shipping"];
[shippingAddressDict setObject:[NSNumber numberWithInt:0] forKey:@"is_default_billing"];
request = [[XMLRPCRequest alloc] initWithURL: url];

NSArray *addressArray = [NSArray arrayWithObjects:shippingAddressDict, billingAddressDict, nil];

params = [NSArray arrayWithObjects:[NSNumber numberWithInt:cartId], addressArray, nil];
[request setMethod:@"call" withParameters:[NSArray arrayWithObjects:sessionId, @"cart_customer.addresses", params, nil]];

response = [self getResponse:request]; 
```

这是 getResponse 函数的定义：

```
- (XMLRPCResponse *)getResponse: (XMLRPCRequest *)request {
    NSError *error = nil;
    XMLRPCResponse *response = [XMLRPCConnection sendSynchronousXMLRPCRequest:request error:&error];

    if (nil != error) {
        NSLog(@"error = %@", [error description]);
        return nil;
    }

    if (nil == response) {
        return nil;
    }

    if ([response isFault]) {
        NSLog(@"Fault with code: %d means: %@", [response.faultCode intValue], response.faultString);
        return nil;
    }

    return [[response retain] autorelease];
} 
```

我使用 Magento 1.5.0.1

**重要更新：**

当我尝试从字典中删除“电话”时，服务器返回一条验证消息：请输入电话号码。但是，如果我再次将“电话”放在那里，就会出现我向您展示的错误。电话号码有什么问题，我尝试使用新加坡号码（8 位）和美国号码（只有数字，没有空格，没有'-'），但错误仍然存​​在。无论如何，magento提供的官方示例使用了一个虚拟示例：“0123456789”并且它可以工作，所以它也应该对我有用，对吧？

# asp.net-mvc-3 - MVC3 处理程序.ashx

> ID：10663224
> 
> 赞同：0
> 
> 时间：2012-05-19T07:23:30.930
> 
> 标签：asp.net-mvc-3, handler

嗨，我正在从 ActionResult 调用 Handler.ashx

```
 ViewBag.IMG = "Handler.ashx?img=" + imagetest + 
```

，如果 ActionResult 是 Index 它工作正常，

```
http://localhost:11111/ImageHandler.ashx?img=image 
```

但是，如果它是任何其他名称，它不会调用处理程序！

```
http://localhost:11111/ActionReult(name)/ImageHandler.ashx?img=image 
```

它在 url 中添加 ActionResult 名称。

任何想法，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T09:01:00.447

然后我不明白错误，.ashx 可以使用控制器将 FileContentResult 或 FileResult 返回到 File 或 FileStreamResult 到 File。

样本

```
public FileContentResult Index()
{
    var Resim = new WebClient().DownloadData("https://dosyalar.blob.core.windows.net/dosya/kartalisveris.gif");
    return new FileContentResult(Resim, "image/png"); //* With {.FileDownloadName = "Höbölö"}
} 
```

或者

```
public FileResult Index()
{
    FileInfo fi = new FileInfo(Server.MapPath("~/Content/imgs/fillo_kargo.png"));
    return File(fi.OpenRead, "image/png"); //or .FileDownloadName("Eheheh :)") Return File(fi.OpenRead, "audio/mpeg","Media File")
} 
```

这样通过变量 public

> FileResult 索引（字符串 picPath）
> 
> FileInfo fi = new FileInfo(Server.MapPath("~/Content/imgs/" + picPath + "));

网址：文件/索引/fillo_kargo.png

# android - 媒体播放器错误：- 当我减少搜索栏时，音量正在减少，但在进度增加时，它不会增加真实状态下的音量

> ID：10663228
> 
> 赞同：0
> 
> 时间：2012-05-19T07:24:07.557
> 
> 标签：android, media-player, android-audiomanager

我的媒体播放器 AudioManager 有问题。当我通过搜索栏减小音量时，我会减小，但是当我确实增加进度时，它不会在相同状态下增加音量..请帮我解决我的问题..提前谢谢...

```
audioManager = (AudioManager)getSystemService(Context.AUDIO_SERVICE);

int maxVolume = audioManager.getStreamMaxVolume(AudioManager.STREAM_MUSIC);
int curVolume = audioManager.getStreamVolume(AudioManager.STREAM_MUSIC);

volume2 = (SeekBar)findViewById(R.id.volbar2);
volume1 = (SeekBar)findViewById(R.id.volbar);

volume1.setMax(maxVolume);
volume2.setMax(maxVolume);
volume1.setProgress(curVolume);
volume2.setProgress(curVolume);

volume1.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {

  @Override
  public void onStopTrackingTouch(SeekBar seekBar) {

  }
  @Override
  public void onStartTrackingTouch(SeekBar arg0) {

  }
  @Override
  public void onProgressChanged(SeekBar seekBar, int progress, boolean arg2) {       
    if(seekBar.equals(volume1)){
      mediaPlayer.setVolume((progress/100.0f),(progress/100.0f));
    }
  }
});

volume2.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {

  public void onStopTrackingTouch(SeekBar seekBar) {
    // TODO Auto-generated method stub
  }

  public void onStartTrackingTouch(SeekBar seekBar) {
    // TODO Auto-generated method stub
  }

  public void onProgressChanged(SeekBar seekBar, int progress,boolean fromUser) {
    // TODO Auto-generated method stub
    if(seekBar.equals(volume2)){ 
      mediaPlayer2.setVolume((progress/100.0f),(progress/100.0f));
    }
  }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T11:14:47.403

此代码有效

```
 audioManager = (AudioManager) this.getSystemService(this.AUDIO_SERVICE);
    seekBar = (SeekBar) findViewById(R.id.seekBar1);
    seekBar.setMax(audioManager.getStreamMaxVolume(AudioManager.STREAM_MUSIC));

    seekBar.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {

        @Override
        public void onStopTrackingTouch(SeekBar seekBar) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onStartTrackingTouch(SeekBar seekBar) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onProgressChanged(SeekBar seekBar, int progress,
                boolean fromUser) {
            // TODO Auto-generated method stub

            audioManager.setStreamVolume(audioManager.STREAM_MUSIC, progress, 0);

        }
    }); 
```

# javascript - 当通过 AJAX 呈现表单时，jQuery 代码不适用于表单

> ID：10663230
> 
> 赞同：3
> 
> 时间：2012-05-19T07:24:31.867
> 
> 标签：javascript, jquery, ruby-on-rails, ajax, ruby-on-rails-3

我的应用程序中有一个相当标准的明星投票功能，它使用 jQuery 的悬停事件。最初加载 DOM（HTML 请求）后，星形投票逻辑所在的部分将与页面的其余部分一起呈现。但是，我想移动部分，以便它不与页面一起加载，但可以在用户需要时加载。我做了一个典型的 AJAX 请求来加载部分，但是当它被渲染时，星星不会对鼠标悬停之类的事件做出正确的反应。是因为我通过 AJAX 呈现表单而引发了这个问题，还是我的代码中只有一个错误？谢谢您的帮助

更新：使用 on 处理程序让它工作，感谢大家的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T07:41:07.257

您可能正在尝试将事件绑定到 DOM 中尚不存在的节点。解决此问题的最佳方法是绑定到在 Ajax 请求之前存在的侦听器，它是正在获取的内容的祖先（有时被错误地称为“父级”，它只是一个级别的祖先）。例如，给定页面本身的这个标记：

```
<div id="ajaxContainer">
  <!-- content will be periodically replaced with Ajax -->
</div> 
```

“ajaxContainer”是你要获取的任何东西的祖先。然后，您需要使用适当的方法绑定侦听器。在过去，您可以使用`live()`它，但它已被弃用，而且效率也不高。然后建议是 for `delegate()`，它解决了效率问题。现在它适用于 的委托侦听器语法`on()`，其性能大致相同，`delegate()`但语法不同。

综上所述，`.on()`如果您使用的是 jQuery 1.7+，请使用。

想象一下，您的 Ajax 函数检索包含星形系统鼠标悬停的页面的一部分，该部分位于一系列分类为“星形”的 div 中。语法可能如下所示：

```
$(document).ready(function() {
  $('#ajaxContainer').on('mouseenter', '.stars', function() {
    $this = $(this); // cache this specific instance of a stars div as a jQuery object
    // do stuff with $this
  });
}); 
```

这表示“开始在 ajaxContainer 中侦听匹配‘鼠标进入星星 div’的事件，当这种情况发生时，做一些事情。”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T07:35:50.113

使用 Ajax 创建的元素不会响应您的事件处理程序，因为事件处理程序仅对初始化时存在于 DOM 中的元素起作用。

您需要委托并监听 DOM 中存在的元素上的事件，并捕捉动态元素的冒泡。

您应该`on()`为此使用：

```
$('#nonDynamicElement').on('mouseenter', '#dynamicElement', function() {
    //do stuff
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T07:28:51.710

jQuery 有一个名为[live](http://api.jquery.com/live/)的函数，它允许您将事件处理程序应用于尚未创建的对象。

如评论中所述，请改用[on](http://api.jquery.com/on/) () 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T07:40:12.633

从 jQuery 1.7+ 开始，你应该使用 on() 来处理旧版本的 jquery，你可以使用 live()

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-19T07:31:11.733

如果您在 AJAX 脚本中使用 jQuery，请务必`jQuery`使用`$`.

```
jQuery( selector [, context] ) 
```

代替

```
$( selector [, context] ) 
```

# algorithm - 借助 Tree ADT 表示包含三元运算符的表达式

> ID：10663235
> 
> 赞同：1
> 
> 时间：2012-05-19T07:25:25.543
> 
> 标签：algorithm, binary-tree, expression

我正在构建一棵树来在二叉树的帮助下评估包含一元和二元运算符、常量和变量的数学表达式。

但是我现在在可视化如何表示三元运算时遇到了问题？可以通过二叉树完成吗？如果没有，我是否有更好的数据结构来表示和评估相同的内容？

请给出意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T08:03:13.043

如果您正在使用（或计划使用）二叉树，则可以通过组合两个节点来创建一个具有三个子节点的节点，如下所示：

```
 \
    a
   / \
  /   b
 /   / \
1   2   3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T09:02:09.813

如果您要允许常量/变量（具有 0 个子节点的节点）、一元操作（具有 1 个子节点的节点）和二元操作（具有 2 个子节点的节点），我看不出拥有三元操作有什么困难（有 3 个孩子的节点）。如果您解释为什么不能可视化/实现具有 3 个子节点的节点，也许我们可以给您一个更好的答案。

# jquery - 在 jquery 构建的网络摄像头屏幕上的图像

> ID：10663236
> 
> 赞同：0
> 
> 时间：2012-05-19T07:25:31.563
> 
> 标签：jquery, css, web, webcam

我正在尝试在我的网页上的网络摄像头屏幕上放置图像。我使用 jQuery 网络摄像头插件将网络摄像头屏幕放置在我的网页上。

链接到 jQuery 插件：[http ://www.xarg.org/project/jquery-webcam-plugin/](http://www.xarg.org/project/jquery-webcam-plugin/)

现在我想在屏幕上方放置一个图像，这样我就可以使网络摄像头屏幕不可见，或者在它上面放置一个背景，这样看起来你就在树后面。

有谁知道如何做到这一点？我尝试将图像放在它上面，但网络摄像头总是排在最前面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T07:33:51.143

一个简单的解决方案可能只是使用 jQuery 来隐藏对象......

假设它在`<div id="webcam">`你可以使用的内部：

```
 $('#webcam').hide(); 
```

然后稍后使用：

```
 $('#webcam').fadeIn(); // or .show(); 
```

但是对于图像解决方案，您可以尝试这样的事情：

```
 <div id="webcam">
    <div id="over_image"></div>
    <object id="webcam-object" type="application/x-shockwave-flash" data="/download/jscam_canvas_only.swf" width="320" height="240"><param name="movie" value="/download/jscam_canvas_only.swf"><param name="WMODE" value="transparent"> <param name="FlashVars" value="mode=callback&amp;quality=85"></object>
 </div> 
```

有这样的CSS：

```
 #webcam { width: 320px; height: 240px; position: relative; }
 #over_image { width: 320px; height: 240px; 
               position: absolute; z-index: 100; top: 0;
               background-image: url('someimage.jpg');
 } 
```

请注意，您需要包括：

`<param name="WMODE" value="transparent">`在 flash 对象中，我不确定该 jquery 插件如何设置 flash，因此您可能需要修改一些代码。

如果您不包含此属性，则该`z-index`属性将无法正常运行。（这可能是您尝试的背景图像无法正常工作的原因。）

# php - 如何为 Amazon S3 存储桶的对象创建下载链接？

> ID：10663238
> 
> 赞同：14
> 
> 时间：2012-05-19T07:26:12.670
> 
> 标签：php, api, amazon-s3, amazon-web-services

我正在使用 S3 PHP 类学习 Amazon S3。我已将所有文件上传到我的 S3 存储桶，现在我想为存储桶中的每个可用文件创建链接。

以下功能对我有用吗？

```
public static function getAuthenticatedURL($bucket, $uri, $lifetime, $hostBucket = false, $https = false)
{

}

    $s3 = new S3('access-key', 'secret-key');
    $s3->getAuthenticatedURL($bucket, $uri, $lifetime, $hostBucket = false, $https = false); 
```

或其他功能，如`get_object_url`，但`get_object_url()`不在我的 S3 课程中。

**我正在使用 Undesign 的[Amazon S3 PHP 类](http://undesigned.org.za/2007/10/22/amazon-s3-php-class)。**

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-19T11:23:55.753

以下模式适用于构建 S3 URL：

```
http(s)://<bucket>.s3.amazonaws.com/<object>
http(s)://s3.amazonaws.com/<bucket>/<object> 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-19T08:48:07.873

如果您希望公众访问存储桶，它就像

http://[YourBucketName].s3.amazonaws.com/[YourFileName]

只要您正确设置权限。

如果您担心下载滥用，您将需要一个经过身份验证的 URL（我猜您希望从您的代码示例中获得该 URL）。在这种情况下，我建议您使用 Amazon SDK：[http](http://aws.amazon.com/sdkforphp/) ://aws.amazon.com/sdkforphp/ ，因为它包含您需要的示例。

```
$s3->getObjectUrl($bucket, $filename, '5 minutes'); 
```

文档：[http ://docs.aws.amazon.com/aws-sdk-php/latest/class-Aws.S3.S3Client.html#_getObjectUrl](http://docs.aws.amazon.com/aws-sdk-php/latest/class-Aws.S3.S3Client.html#_getObjectUrl)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-04-15T17:20:24.710

除了[Hossein 的回答](https://stackoverflow.com/questions/10663238/how-to-create-download-link-for-an-amazon-s3-buckets-object/#53757853)之外，如果您想在访问链接后立即开始下载（模拟“**另存为...** ”行为），您需要在 Bucket 和 Key 旁边添加 ResponseContentDisposition 参数，如下所示：

```
$cmd = $s3Client->getCommand('GetObject', [
    'Bucket' => 'my-bucket',
    'Key' => 'testKey',
    'ResponseContentDisposition' => 'attachment; filename="custom_file_name.mp3"'
]);

$request = $s3Client->createPresignedRequest($cmd, '+20 minutes');

$presignedUrl = (string) $request->getUri(); 
```

*注意：自定义文件名是可选的，如果不指定，下载的文件将有它的 S3 名称。*

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-02-06T13:49:58.833

我看到人们已经对此做出了回应，但我想为那些可能拥有安全存储桶（需要访问权限）的人添加更多上下文。请注意，如果您直接与 S3 存储桶对话，则不必生成 URL，然后您可以使用 'file_get_contents' 等，但速度要慢得多，因为您不能使用多 curl 请求（为了速度）。但是，如果您有较新的 php 版本，则可以使用 pthreads。

安装：为 Amazon 安装 S3 类文件，使用 composer 或手动下载 S3.php 文件可以很容易地添加它。

不安全：（请参阅有关此问题的其他帖子，基本上使用 URL）

```
http(s)://<bucket>.s3.amazonaws.com/<object>
http(s)://s3.amazonaws.com/<bucket>/<object> 
```

安全的 HTTPS（当您的存储桶受到保护时）：

```
https://amazon.com/file/you/wanted.xxx?ID:XXXXX?SIG:YYYYY 
```

(1) 创建一个 https:// url 并使用 multi curl 工具同时获取它们（推荐）。

一个简单的例子：

```
$url = /path/to_the/file_name/file.ext  

//note check amazon to confirm the path which will contain only "_" and no spaces.

$s3 = new S3($awsAccessKeyID, $awsSecretKey);
$curls[] = $s3->get_object_url($bucketName, $uri, '1 hour');
var_dump($results = multiCurlRequest($curls)); 
```

更多信息：

[http://docs.aws.amazon.com/aws-sdk-php/v2/api/class-Aws.S3.S3Client.html#_getObjectUrl](http://docs.aws.amazon.com/aws-sdk-php/v2/api/class-Aws.S3.S3Client.html#_getObjectUrl) [http://undesign.org.za/2007/10/22/amazon -s3-php-class/文档](http://undesigned.org.za/2007/10/22/amazon-s3-php-class/documentation)

供参考：

```
function multiCurlRequest($curlList = array(),$user = '', $pass = '',$timeout = self::MULTI_REQ_TIMEOUT_SECS, $retTxfr = 1) {

    if (empty($curlList) || count($curlList) == 0) return false;

    $master = curl_multi_init();
    $node_count = count($curlList);

    for ($i = 0; $i < $node_count; $i++) {
        $ch[$i] = curl_init($curlList[$i]);
        curl_setopt($ch[$i], CURLOPT_TIMEOUT, $timeout); // -- timeout after X seconds
        curl_setopt($ch[$i], CURLOPT_RETURNTRANSFER, $retTxfr);
        curl_setopt($ch[$i], CURLOPT_HTTPAUTH, CURLAUTH_ANY);
        curl_setopt($ch[$i], CURLOPT_USERPWD, "{$user}:{$pass}");
        curl_setopt($ch[$i], CURLOPT_RETURNTRANSFER, true);
        curl_multi_add_handle($master, $ch[$i]);
    }

    // -- get all requests at once, finish when done or timeout met --
    do {  curl_multi_exec($master, $running);  }
    while ($running > 0);

    $results = array();

    // -- get results from requests --
    for ($i = 0; $i < $node_count; $i++) {
        $results[$i] = curl_multi_getcontent($ch[$i]);
        if ((int) curl_getinfo($ch[$i], CURLINFO_HTTP_CODE) > 399 || empty($results[$i])) {
            $this->set_request(  [ ['label' => '404', 'href' => $results[$i], '404' => '1' ] ] );
            unset($results[$i]);
        }
        curl_multi_remove_handle($master, $ch[$i]);
        curl_close($ch[$i]);
    }

    curl_multi_close($master);
    if (empty($results)) return false;
    //$results = array_values($results); // -- removed as we want the original positions
    return $results;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-12-13T08:34:57.393

如果您使用`aws-sdk-php v3`并且您的文件是私有的。

```
$cmd = $s3Client->getCommand('GetObject', [
    'Bucket' => 'my-bucket',
    'Key' => 'testKey'
]);

$request = $s3Client->createPresignedRequest($cmd, '+20 minutes');

$presignedUrl = (string) $request->getUri(); 
```

# spring - Netty 处理程序中的 Spring 事务支持

> ID：10663240
> 
> 赞同：3
> 
> 时间：2012-05-19T07:26:25.870
> 
> 标签：spring, hibernate, transactions, netty

我正在使用以下版本：

*   Spring 3.1.1.RELEASE
*   Netty 3.4.0.Final
*   Hibernate 3.5.6-Final

现在，我有一个运行良好的 Netty 服务器——服务器的根、管道工厂和拥有一切的服务器的基本“存根”都使用 Spring 设置。在这个存根中，spring`@Transactional`注释工作得很好。

但是，在处理程序中，有状态并根据用户所处的状态动态创建 -`@Transactional`不起作用。我很确定我明白为什么。我什至有一个“解决方案”——但这不是很好。

在解码器和编码器之后，我添加了一个 ExecutionHandler：

```
pipeline.addLast("execution", new ExecutionHandler(new OrderedMemoryAwareThreadPoolExecutor(16,1000000, 1000000))); 
```

这似乎是 Spring 事务支持中断的地方。由于 Spring 不知道这些线程，它不能将任何事务绑定到它们。这些类被正确代理，但在调试中它们没有关联的事务。

我的解决方案很糟糕，需要用真正的解决方案代替：

```
Session sess = SessionFactoryUtils.getSession(getSessionFactory(), true); 
```

这很糟糕，因为它依赖于我来释放会话，而且它甚至可能不是事务性的，我没有检查过。它在很多方面都很糟糕。

无论如何-问题的根源。鉴于上述技术，让我的`@Transactional`符号在 Netty 处理程序上工作的路径是什么？

写一个`ExecutionHandler`知道 Spring 的？

注意：我无法升级到 Hibernate 4，因为与组中另一个项目中使用的 Spring-Flex 缺乏兼容性。可能是Spring版本的同一个故事，不记得了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T08:41:34.503

我建议你在 spring 容器中创建这些 netty 的处理程序，并将服务或持久层注入处理程序，这样你就可以让这些层独立于 netty，当然这些都是老式的 spring bean。

# php - 在没有命令提示符的情况下运行 PHP-GTK 程序

> ID：10663245
> 
> 赞同：0
> 
> 时间：2012-05-19T07:27:06.477
> 
> 标签：php, user-interface, desktop-application, php-gtk

假设我在 PHP-GTK 上做了一个项目。现在如何在不打开命令提示符的情况下运行 PHP-GTK？

和其他软件一样，我们在桌面有一个图标，点击可以运行程序，我想对我用PHP-GTK制作的程序做同样的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-06T15:19:56.087

> 此解决方案适用于***Windows XP SP3***

让 phpGtk 二进制文件成为`C:\monitor\bin\php\php`phpGtk 主脚本文件`C:\monitor\system\monitor ui\monitor.php`

使用 bach 脚本 ( `monitor.bat`) 文件，如下所示：

```
 @echo off
    rem Hideself
    "C:\monitor\bin\php\php" "C:\monitor\system\monitor ui\monitor.php" %*
    rem Hideself
    pause 
```

`rem`用于命令行中的注释，`%*`部分是将提供的任何参数传递给 phpGtk 脚本

使用此[bat 到 exe 转换器](https://web.archive.org/web/20190827213421/https://www.battoexeconverter.com/)将 Bash`.bat`文件转换为可执行文件`.exe`

`rem Hideself`并且`rem Showself`是高级命令，它们正是我们所需要的 ![截图](../Images/788863dcdb8723bf4c34f82ae4211684.png)

> 使用此程序，您可以：
> 
> ```
>  - set an icon,
>  - include files
>  - set a password for the executable 
> ```
> 
> > **提示：**你可以使用 phpGtk 二进制文件，但你应该使用`%MyFiles%`它们来引用它们
> > 
> > **建议：**当您的项目全部完成后，您可以修剪`pause`命令（这只是为了查看记录给您的 php cli 错误）
> > 
> > **注意：**使用多个图标需要 .NET 框架
> > 
> > **提示：**您可以使用[`Ressource Hacker`](http://www.angusj.com/resourcehacker/)多个图标替换单个图标[![替换图标](../Images/29111eaf3e89bd77e05fcb12e7e112ec.png)](https://i.stack.imgur.com/24qCb.gif)
> > 
> > **提示：**您可以使用[`WinRAR`](https://www.win-rar.com/start.html?&L=0)'[`SFX`功能](https://www.jackmccarthy.com/malware/WinRAR_Archive_Creation.htm)为您处理安装

希望这对某人的生活有所帮助！:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T21:22:25.380

您可以制作一个双击执行的 .bat 文件。如果你在windows下，我想unix肯定有类似的东西。这是您为 Windows 执行此操作的方式：

```
"%CD%\..\..\PhpGtkRuntime\php.exe"  "%CD%\test.php" 
```

当然你会根据你的文件夹深度调整它，但想法是一样的。

您还可以查看此答案，该答案密切相关并谈论直接感兴趣的事情：[检查这里](https://stackoverflow.com/a/9786279/642173)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-20T18:14:51.330

如果你使用 Linux，你可以创建一个 shell 脚本并将命令放在`&`后台运行吗？

```
[command] & 
```

如果您使用 Windows，请尝试

```
start [command] 
```

# linux - 用于“显示”的命令行 GUI 应用程序接口的 ImageMagick API

> ID：10663246
> 
> 赞同：0
> 
> 时间：2012-05-19T07:27:07.997
> 
> 标签：linux, api, user-interface, command-line, imagemagick

基本上，我想有一种快速的方法来选择图像中的一个框（感兴趣的区域），并以 ImageMagick 的格式获取几何输出。我看不到使用默认 ImageMagick`display`查看器的简单方法，因此我正在寻找一些 API（希望是示例）来允许我编写自己的查看器。

一些背景知识：在[ImageMagick • 查看主题 - 从命令行中选择感兴趣的区域](http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=12267&start=0)(2008) 据说你不能这样做，但是，有[显示：ImageMagick - 感兴趣的区域](http://imagemagick.sourceforge.net/http/www/display.html#regi)(2003?) 它解释了如何做它（但显然它指的是旧版本）。

无论如何，这就是你所说的事情的样子`display -size 300x500 pattern:checkerboard`（*`pattern:checkerboard`是 imagemagick 中的内置模式图像*）：

![imagemagick 显示 ROI](../Images/6ae85eb117a7ff6814952ac4871c5fb9.png)

一旦“ImageMagick”显示窗口出现，点击它；然后命令菜单显示-从中选择/“图像编辑”/“感兴趣区域...”；然后可以在查看器显示窗口上单击并拖动。而且您还可以在左上角获得几何图形 - 但您不能将其复制/粘贴为文本（所以我不得不重新输入）。

此外，`display`在命令行模式下占用终端（[linux - 使 imagemagick`display`在终端退出，保留窗口（单实例模式） - 超级用户](https://superuser.com/questions/426176/make-imagemagicks-display-exit-at-terminal-preserving-the-window-single-ins#comment489030_426176)） - 我看不到强制它以“单实例模式”运行的方法，这样我就可以在命令行上发出文件名，并将`display`它们加载到当前运行的同一个实例中。

现在，我发现[Casting spells with ImageMagick - 程序员的图像处理](http://www.ibm.com/developerworks/opensource/library/os-imagemagick/index.html#prog_manipulation)（2012），其中提到了 MagickWand API；经过一番搜索，我在`imagemagick`网站上找到了：

*   [ImageMagick：MagickWand，ImageMagick 的 C API](http://www.imagemagick.org/script/magick-wand.php)
*   [ImageMagick：MagickCore，ImageMagick 的低级 C API](http://www.imagemagick.org/script/magick-core.php?ImageMagick=ilvg2dv5rhem7jttol79c6h8j2)
*   [ImageMagick：PerlMagick，ImageMagick 的 Perl API](http://www.imagemagick.org/script/perl-magick.php)
*   [ImageMagick：Magick++，ImageMagick 的 C++ API](http://www.imagemagick.org/script/magick++.php)

所以，我的第一个想法是 Python 中的脚本——但显然只有一个 Perl API，这很好。

但是，我需要编写的基本上是一个命令行界面，它将启动一个类似`display`的窗口进程作为“单个实例”，并在`-density`向窗口传递文件名等参数的同时退出终端；然后，窗口将对鼠标单击做出反应，允许选择裁剪几何框（感兴趣区域） - 最后，在文本框中呈现几何字符串，以便您可以复制它。但据我所知，所有 API 都面向执行命令行的功能`convert`。

所以我的问题是 - 这些 API 中的任何一个都可以用来编写类似`display`GUI的程序吗？并且是否存在任何可以指出的类似性质的示例（*最好是脚本语言，但我会使用 C/C++ ）？*

非常感谢您的任何答案，
干杯！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T01:12:07.793

好吧，结果证明这有点痛苦，但我设法用 ImageMagick API 组合了一个 Perl-Tk 脚本，它的行为就像我想要的那样：[imgckdis.pl](http://sdaaubckp.svn.sourceforge.net/viewvc/sdaaubckp/single-scripts/imgckdis.pl)（*代码也在下面*）。这是一个[屏幕截图](http://sdaaubckp.sourceforge.net/post/img/imgckdispl.png)：

![imgckdispl.png](../Images/295810e9eb5d232695e09567c69312ad.png)

请注意，它几乎可以仅显示硬编码 400x400 像素的图像（尽管它可能会扩展到更大的图像） - 没有菜单，没有鼠标交互（滚轮缩放） - 几乎没有 :) 脚本只接受一个命令行参数 - 要打开的文件；但它也可以理解 ImageMagick 的特殊功能，例如“xc:white”（*ImageMagick 部分甚至会自动渲染 SVG 文件，如屏幕截图所示*）。

但它能够做的一件事是在单实例模式下工作：启动的第一个实例成为“主”，并绘制 Tk 窗口，并锁定相应的终端。脚本的后续实例，意识到主实例已经启动，将简单地向主实例发出命令以加载新图像。

正如下面的链接集合所示（以及在线版本中的修订说明），这种“向 'master' 发出命令”并不是那么[容易](http://sdaaubckp.svn.sourceforge.net/viewvc/sdaaubckp/single-scripts/imgckdis.pl)。起初我想，使用进程间通信共享变量可以让我存储一个“引用指针”到主服务器；然后允许后续实例在其上调用函数。好吧，这似乎是做不到的——一方面，[Perl 可能不鼓励这样](https://stackoverflow.com/questions/10668453/ipcshareable-variables-cant-use-string-as-a-scalar-ref-and-memory-ad)做——但即使你跳过所有这些检查，最后你会得到一个在共享空间中看不到的内存地址，因此无法检索任何东西从中。此外，`IPC::Shareable`Perl 包可能只对整数和字符串“保证”？！

尽管如此，最终奏效的方法是，正如所暗示的那样，让“主”轮询改变变量的变化。和非主实例在它们被调用时简单地更改这个变量 - 这种方法似乎有效......但是，对于“真实”应用程序，然后必须考虑组织相当多的这些共享变量......

好吧，也许人们仍然无法缩放和重新定位图像，并绘制几何矩形 - 但是，至少这是一个可以证明可以正常工作的示例（至少在 Ubuntu 上）`:)`......

希望这对某人有帮助，
干杯！

编码：

```
#!/usr/bin/perl

# imgckdis.pl
# http://sdaaubckp.svn.sf.net/viewvc/sdaaubckp/single-scripts/imgckdis.pl

use warnings;
use strict;
use Image::Magick; # sudo apt-get install perlmagick # debian/ubuntu
use Tk;
use MIME::Base64;

use Carp;
use Fcntl ':flock';

use Data::Printer;
use Class::Inspector;

use IPC::Shareable;

my $amMaster = 1;
my $file_read;

open my $self, '<', $0 or die "Couldn't open self: $!";
flock $self, LOCK_EX | LOCK_NB or $amMaster = 0;

if ($amMaster == 1) {
  print "We are master single instance as per flock\n";
  IPC::Shareable->clean_up_all;
}

if (!$ARGV[0]) {
  $file_read = "xc:white";
} else {
  $file_read = $ARGV[0];
}
chomp $file_read;

my %options = (
  create    => 1,
  exclusive => 0,
  mode      => 0644,
  destroy   => 0,
);

my $glue1 = 'dat1';
my $glue2 = 'dat2';

my $refcount;
my $reffname;
my $lastreffname;

my $refcount_handle = tie $refcount, 'IPC::Shareable', $glue1 , \%options ;
if ($amMaster == 1) {
  $refcount = undef;
}

my $reffname_handle = tie $reffname, 'IPC::Shareable', $glue2 , \%options ;
if ($amMaster == 1) {
  $reffname = undef;
}

my ($image, $blob, $content, $tkimage, $mw);

if ($amMaster == 1) { # if (not(defined($refcount))) {
  # initialize the assigns
  $lastreffname = "";

  $reffname_handle->shlock(LOCK_SH|LOCK_NB);
  $reffname = $file_read; #
  $reffname_handle->shunlock();

  $refcount_handle->shlock(LOCK_SH|LOCK_NB);
  $refcount = 1; #
  $refcount_handle->shunlock();
}

# mainly from http://objectmix.com/perl/771215-how-display-image-magick-image-tk-canvas.html
sub generateImageContent() {
  #fake a PGM then convert it to gif
  $image = Image::Magick->new(
    size => "400x400",
  );
  $image->Read($file_read); #("xc:white");
  $image->Draw(
    primitive => 'line',
    points => "300,100 300,500",
    stroke => '#600',
  );
  # set it as PGM
  $image->Set(magick=>'pgm');

  #your pgm is loaded here, now change it to gif or whatever
  $image->Set(magick=>'gif');
  $blob = $image->ImageToBlob();

  # Tk wants base64encoded images
  $content = encode_base64( $blob ) or die $!;
}

sub loadImageContent() {
  #fake a PGM then convert it to gif
  $image = Image::Magick->new(
    size => "400x400",
  );
  $image->Read($lastreffname); #("xc:red") for test

  # set it as PGM
  $image->Set(magick=>'pgm');

  #your pgm is loaded here, now change it to gif or whatever
  $image->Set(magick=>'gif');
  $blob = $image->ImageToBlob();

  # Tk wants base64encoded images
  $content = encode_base64( $blob ) or die $!;

  #~ $tkimage->read($content); # expects filename
  $tkimage->put($content); # works!
}

sub CleanupExit() {
  # only one remove() passes - the second fails: "Couldn't remove shared memory segment/semaphore set"
  (tied $refcount)->remove();
  IPC::Shareable->clean_up;
  $mw->destroy();
  print "Exiting appliction!\n";
  exit;
}

sub updateVars() {
  if ( not($reffname eq $lastreffname) ) {
    print "Change: ", $lastreffname, " -> ", $reffname, "\n";
    $lastreffname = $reffname;
    loadImageContent();
  }
}

if ( not($amMaster == 1) ) {
  # simply set the shared variable to cmdarg variable
  # (master's updateVars should take care of update)
  $reffname_handle->shlock(LOCK_SH|LOCK_NB);
  $reffname = $file_read;
  $reffname_handle->shunlock();

  # and exit now - we don't want a second instance
  print "Main instance of this script is already running\n";
  croak "Loading new file: $file_read";
}

$mw = MainWindow->new();
$mw->protocol(WM_DELETE_WINDOW => sub { CleanupExit(); } );

generateImageContent();
$tkimage = $mw->Photo(-data => $content);

$mw->Label(-image => $tkimage)->pack(-expand => 1, -fill => 'both');
$mw->Button(-text => 'Quit', -command => sub { CleanupExit(); } )->pack;

# polling function for sharable - 100 ms
$mw->repeat(100, \&updateVars);

MainLoop;

__END__ 
```

相关链接：

*   [如何在 Tk::Canvas 中显示 Image::Magick 图像？](http://objectmix.com/perl/771215-how-display-image-magick-image-tk-canvas.html)
*   [在 CentOS 5.2 上安装 Perl Image::Magick 模块（Fourmilog：无敢称其为原因）](http://www.fourmilab.ch/fourmilog/archives/2008-12/001099.html)
*   [perl - 如何在 Debian etch 上安装 Image::Magick？- 堆栈溢出](https://stackoverflow.com/questions/1260663/how-do-i-install-imagemagick-on-debian-etch)
*   [[magick-users] PerlMagick 6.0.0 Composite -opacity 不起作用](http://studio.imagemagick.org/pipermail/magick-users/2004-May/012679.html)
*   [确保一次只运行一个 perl 脚本副本](http://www.perlmonks.org/?node_id=590619)
*   [回复：将程序限制为单个运行实例 - nntp.perl.org](http://www.nntp.perl.org/group/perl.beginners/2007/10/msg95773.html)
*   [Sys::RunAlone - search.cpan.org](http://search.cpan.org/~elizabeth/Sys-RunAlone-0.12/lib/Sys/RunAlone.pm)
*   [确保只有一个 Perl 程序实例在运行的最佳方法是什么？- 堆栈溢出](https://stackoverflow.com/questions/455911/whats-the-best-way-to-make-sure-only-one-instance-of-a-perl-program-is-running)
*   [重新安装 PERL - PERL 初学者（你需要预先声明 croak 吗？）](http://www.justskins.com/forums/reinstall-perl-16399.html)
*   [Perl TK 中的图像？](http://www.perlmonks.org/?node_id=731610)
*   [Perl Tk::图片帮助](http://x10hosting.com/forums/programming-help/92296-perl-tk-photo-help.html)
*   [introspection - 如何在 Perl 中列出给定对象或包的可用方法？- 堆栈溢出](https://stackoverflow.com/questions/910430/how-do-i-list-available-methods-on-a-given-object-or-package-in-perl)
*   [无法安装 IPC：可共享](http://www.perlmonks.org/?node_id=879713)
*   [在没有 IPC::Shareable 的 perl 中，子进程之间共享变量_perl_酷徒编程知识库](https://stackoverflow.com/questions/4879797/share-variables-between-child-processes-in-perl-without-ipcshareable)
*   [IPC::Shareable - search.cpan.org](http://search.cpan.org/~bsugars/IPC-Shareable-0.60/lib/IPC/Shareable.pm)
*   [perl - 检查IPC共享锁 - VoidCC](https://stackoverflow.com/questions/8166063/checking-ipc-shareable-lock)
*   [使用 Storable 存储复杂的数据结构](http://www.perlmonks.org/?node_id=819999)
*   [在 IPC::Shareable 上的两个数组上使用 tie 使 array1 和 array2 都相同，即使 array2 没有更新。](http://www.perlmonks.org/?node_id=799539)
*   [perl 中的解引用](http://perlmeme.org/howtos/using_perl/dereferencing.html)
*   [使用 IPC::Shareable 的共享内存 - 不能使用未定义的值作为数组引用](http://www.perlmonks.org/?node_id=823756)
*   [Re: 在 Perl/Tk 中处理子进程和关闭窗口退出](http://www.perlmonks.org/?node_id=578304)
*   [如何在 Perl 中将数组引用的字符串化版本转换为实际的数组引用？- 堆栈溢出](https://stackoverflow.com/a/1671495/277826)
*   [Re: IPC::Shareable 多维哈希的问题](http://coding.derkeiler.com/Archive/Perl/comp.lang.perl.misc/2005-09/msg00667.html)
*   [perl - IPC::Shareable 变量，“不能使用字符串......作为 SCALAR ref..”和内存地址 - VoidCC](https://stackoverflow.com/questions/10668453/ipcshareable-variables-cant-use-string-as-a-scalar-ref-and-memory-ad)
*   [Perl/Tk 应用程序和进程间通信](http://www.perlmonks.org/?node_id=470827)
*   [回复：Antw：回复：Perl/Tk + 线程 - nntp.perl.org](http://www.nntp.perl.org/group/perl.beginners/2003/05/msg47199.html)

# data-structures - 允许可变键的基于键的数据结构？

> ID：10663247
> 
> 赞同：1
> 
> 时间：2012-05-19T07:28:03.503
> 
> 标签：data-structures, language-agnostic

有谁知道允许可变键的基于键的数据结构的任何实现或论文？

由于密钥正在发生变异，我不确定“密钥”是否是正确的术语，但我希望你能理解我的意思。

我想要这个的具体原因是能够尽可能高效地查找更改对象的邻居，而无需不断地对并行列表进行排序，不断地重构树或类似结构，或者当然在哈希图的完全崩溃时处理它键发生了变异。

一个快速、非常简单的用法示例是（Java HashMap 语法）：

```
MutableKeyMap<Point, String> m = new MutableKeyMap<Point, String>();
Point p = new Point(5, 6)
m.put(p, "foo");
Point o = new Point(6, 6);
m.put(o, "bar");
// The points are currently neighbors, so
m.get(new Point(o.x - 1, o.y)); // returns "foo". 
m.get(new Point(p.x + 1, p.y)); // returns "bar"
// Now here is where most data structures fall apart without some reworking
o.y += 1;
m.get(new Point(o.x - 1, o.y - 1)); // Still returns "foo" because the point "foo" is mapped to has not changed
m.get(new Point(p.x + 1, p.y)); // returns null, as to be expected because o would no longer map to there
m.get(new Point(p.x + 1, p.y + 1)); // A hash map would return null here as well when it should return "bar", 
// because the data structure cannot account for the identity-changing mutation of the key. 
m.get(o); // even returns null because of this in a hash map.
// Therefore we have effectively deleted the entry. In this data structure the idea would be to maintain this link despite the mutation. 
```

因此，理想情况下，这种数据结构将允许映射提供的优雅（如果可能的话，速度）用于访问集合中相对于另一个元素的其他元素，同时允许访问元素的那些值发生变化。

我意识到这可能是在要求一个“完美”的数据结构，但我真的只是对这种类型的数据结构上存在什么或人们有什么想法感兴趣。

# nginx - 如何配置 nginx 以启用有点“文件浏览器”模式？

> ID：10663248
> 
> 赞同：100
> 
> 时间：2012-05-19T07:28:06.733
> 
> 标签：nginx

一旦我以前在输入 URL 时看到过这个`http://test.com/test/`，而不是给我一个 html 页面，它给了我一个类似“文件浏览器”的界面来浏览给定位置的所有文件。

我认为它可能是一个可以在位置上下文中启用的 nginx 模块。

`nginx.conf`文件：

```
worker_processes  1;
events {
    worker_connections  1024;
}
http {
    include       mime.types;
    default_type  application/octet-stream;
    sendfile        on;
    keepalive_timeout  65;
    server {
        listen       80;
        server_name  122.97.248.252;
                location /test {
                        root /home/yozloy/html/;
                        autoindex on;
                }
        error_page   500 502 503 504  /50x.html;
        location = /50x.html {
            root   html;
        }
    }
} 
```

更新`error.log`

> 2012/05/19 20:48:33 [错误] 20357#0: *72 open() "/home/yozloy/html/test" 失败（2：没有这样的文件或目录），客户端：125.43.236.33，服务器：122.97.248.252，请求：“GET /test HTTP/1.1”，主机：“unicom2.markson.hk

我必须误解位置的`/test`意思，我认为这意味着当我输入[http://example.com/test](http://example.com/test)时，它会访问根字典，即`/home/yozloy/html/`

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2012-05-19T07:32:39.830

您应该尝试[ngx_http_autoindex_module](https://nginx.org/en/docs/http/ngx_http_autoindex_module.html)。

将`autoindex`选项设置为`on`。`off`默认情况下。

您的示例配置应该没问题

```
location /{ 
   root /home/yozloy/html/; 
   index index.html; 
   autoindex on;
} 
```

如果没有选项，对于以没有文件的目录`autoindex`结尾的请求，您应该会收到错误 403 。使用此选项，您应该得到一个简单的列表：`/``index.html`

```
<html>
<head><title>Index of /</title></head>
<body bgcolor="white">
<h1>Index of /test/</h1><hr><pre><a href="../">../</a>
<a href="test.txt">test.txt</a>                 19-May-2012 10:43            0
</pre><hr></body>
</html> 
```

**编辑：**更新列表以删除任何要测试的引用

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2018-11-02T02:33:09.630

所有答案都包含部分答案。让我尝试将所有内容合二为一。

**在新安装的 nginx 服务器上快速设置“文件浏览器”模式：**

1.  编辑 nginx 的默认配置：

    ```
    sudo vim /etc/nginx/sites-available/default 
    ```

2.  在配置部分添加以下内容：

    ```
    location /myfolder {  # new url path
       alias /home/username/myfolder/; # directory to list
       autoindex on;
    } 
    ```

3.  在那里创建文件夹和示例文件：

    ```
    mkdir -p /home/username/myfolder/
    ls -la >/home/username/myfolder/mytestfile.txt 
    ```

4.  重启nginx

    ```
    sudo systemctl restart nginx 
    ```

5.  检查结果：`http://<your-server-ip>/myfolder`例如[http://192.168.0.10/myfolder/](http://192.168.0.10/myfolder/)

[![在此处输入图像描述](../Images/85c5cae1c6bbfcc5fe0e22a2fd1474fa.png)](https://i.stack.imgur.com/BzIDT.png)

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-06-23T06:04:35.527

## 1.列出所有目录的内容

将自动索引选项设置为`on`. 默认情况下它是关闭的。

你的配置文件（`vi /etc/nginx/sites-available/default`）应该是这样的

```
location /{ 
   ... ( some other lines )
   autoindex on;
   ... ( some other lines )
} 
```

## 2.仅列出某些特定目录的内容

将自动索引选项设置为`on`. 默认情况下它是关闭的。

您的配置文件 ( `vi /etc/nginx/sites-available/default`)
应该是这样的。
更改`path_of_your_directory`为您的目录路径

```
location /path_of_your_directory{ 
   ... ( some other lines )
   autoindex on;
   ... ( some other lines )
} 
```

希望能帮助到你..

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-10-27T08:03:15.933

您需要创建`/home/yozloy/html/test`文件夹。或者您可以使用`alias`如下所示：

```
location /test {
    alias /home/yozloy/html/;
    autoindex on;
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-05-05T08:33:48.877

我已经试过很多次了。

最后我只是把它`autoindex on;`放在`http`外面`server`，就可以了。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-09-02T07:03:15.580

只需将此部分添加到服务器，就在`location / {`

```
location /your/folder/to/browse/ {
        autoindex on;
} 
```

# php - 获取大量 Facebook 页面的粉丝数

> ID：10663249
> 
> 赞同：2
> 
> 时间：2012-05-19T07:28:07.263
> 
> 标签：php, facebook, api

我有很多 facebook 页面（我们是一个俱乐部），并希望按粉丝数的顺序显示它们。我是 php 新手，对 API 一无所知。我能找到的所有返回粉丝数的代码都是指应用程序，并且需要它们的 ID 和秘密，而我在商业页面中没有这些代码。

我有这个：

[http://api.facebook.com/method/fql.query?format=json&query=select+fan_count+from+page+where+page_id%3D355692061120689](http://api.facebook.com/method/fql.query?format=json&query=select+fan_count+from+page+where+page_id%3D355692061120689)

当我把它放到浏览器中时，它给了我我需要的东西。我如何在 php 中编写它，以便它给我一个可以使用的变量？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T07:46:32.800

此数据称为 JSON 字符串。php 中有一个函数叫做`json_decode()`. 将它与 结合使用`file_get_contents()`，我们可以检索该值，并在 php 中回显它：

```
<?php
$json = file_get_contents('http://api.facebook.com/method/fql.query?format=json&query=select+fan_count+from+page+where+page_id%3D355692061120689');

$decode = json_decode($json);

echo $decode[0]->fan_count;
?> 
```

需要明确的是，`$decode`是一个数组，其第一个值是一个 php 对象，其变量 fan_count 保存数据。

关于图表网址，只需更改..

```
echo $decode[0]->fan_count; 
```

至..

```
echo $decode->likes; 
```

当然，假设您已将`file_get_contents()`url 更改为您的图形 url。

# grails - Grails 无法使用 Wsclient 使用 Web 服务

> ID：10663255
> 
> 赞同：0
> 
> 时间：2012-05-19T07:28:53.650
> 
> 标签：grails, groovy, ws-client

我通过在我的项目的 lib 文件夹中添加 groovyws-standalone-0.3.1.jar 在我的 Grails 应用程序上使用了 WSClient。在我的控制器中添加了以下代码：

```
import groovyx.net.ws.WSClient
....
....

def wsdlUrl = "url_Of_webservice?wsdl"
def payLoad = "list_Of_Parameters"
def result = ''
def proxy = new WSClient(wsdlUrl , this.class.classLoader)
try{
     proxy.initialize()
     result = proxy.getallvendorsbyurl(payLoad)                      
}
catch (java.lang.NullPointerException e){
      println "proxy not initialize"
 } 
```

它在 localhost 中运行良好，但是当我将它部署在 tomcat6 服务器上时，它开始抛出异常：

在服务器日志上：

```
 ERROR errors.GrailsExceptionResolver  - groovy.lang.GroovyObjectSupport
 java.lang.ClassNotFoundException: groovy.lang.GroovyObjectSupport 
```

在普惠制页面上：

```
Error 500: Executing action [groupDetails] of controller [com.ongraph.yhd.GroupController]  caused exception: java.lang.NoClassDefFoundError: groovy/lang/GroovyObjectSupport
Servlet: grails
URI: /grails/group/groupDetails.dispatch
Exception Message: groovy.lang.GroovyObjectSupport
Caused by:groovy.lang.GroovyObjectSupport
Class:GroupController
At Line: [758] (groupController->line-758->def wsdlUrl = "url_Of_webservice?wsdl") 
```

我也浏览了下面提到的链接，但没有运气:(

[链接到类似问题](https://stackoverflow.com/questions/5105461/grails-no-class-def-found-error-when-calling-web-service)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T16:23:45.507

我使用了 grails ws-client 插件，它就像一个魅力。

# ruby-on-rails-3.1 - 如何优化此代码的心理块 Rails

> ID：10663260
> 
> 赞同：0
> 
> 时间：2012-05-19T07:30:20.703
> 
> 标签：ruby-on-rails-3.1

我有这两种方法，我想将它们合二为一。但对于我的生活，我看不到如何。NOOB大时代。任何帮助表示赞赏。

```
 def is_active_no_category
      'active' if params[:category].blank?
  end

  def is_active(category)
      'active' if  params[:category] == category.name.parameterize
  end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T07:40:17.890

使用下面的函数将 a`category`作为参数传递是可选的。如果您*不*传递参数，它将像您的`is_active_no_category`方法一样工作。如果你*确实*传递了一个论点。它会像你的`is_active`方法一样工作。

```
def is_active(category = nil)
  'active' if (category.present? && params[:category] == category.name.parameterize) || (category.nil? && params[:category].blank?)
end 
```

你也许可以让`if`语句更简洁，但是你并没有说明你的功能的确切要求，所以我给了你最完整的解决方案。

# sql - 一行多列到每行两列

> ID：10663261
> 
> 赞同：0
> 
> 时间：2012-05-19T07:30:29.407
> 
> 标签：sql, oracle

我在 Oracle 中创建*SQL 选择*时遇到问题，它执行以下操作。

我有一个

```
table (col1, col2 ... col15) 
```

每行 15 列。

如何进行如下查询：

```
row1: col1, col2
row2: col3, col4
row3: col5, col6

...
rowN: col14, col15 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T07:51:44.593

假设所有列都是相同的数据类型，你可以做一个联合。这会很乏味。

```
SELECT COL1, COL2 FROM TABLE_1
UNION ALL
SELECT COL3, COL4 FROM TABLE_1
UNION ALL
......
SELECT COL13, COL14 FROM TABLE_1 
```

如果你告诉我更多关于这个问题的信息，也许它可以通过普通查询以外的方式解决？

例如 - 如果您使用另一种编程语言`perl`或`php`，您可以逐行选择并每行输出 8 行。

或者，如果是纯数据库，可以考虑PL/SQL。

# javascript - CKEditor 字符计数 JavaScript 函数不起作用

> ID：10663265
> 
> 赞同：0
> 
> 时间：2012-05-19T07:31:07.897
> 
> 标签：javascript, jquery

我将以下链接中的 Jquery 和 CSS 放入我的网站。

[http://jsfiddle.net/VagrantRadio/2Jzpr/](http://jsfiddle.net/VagrantRadio/2Jzpr/)

但是我看不到字符倒计时。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T08:22:53.923

试穿这个尺寸：

```
jQuery(function() {
    //set up the editor instance for ckeditor
    var editor = CKEDITOR.replace('textcounter', {
    toolbar: [['Source'], ['Cut', 'Copy', 'PasteText'], ['Undo', 'Redo', '-', 'SelectAll', 'RemoveFormat'], ['Bold', 'Italic', '-', 'NumberedList', 'BulletedList', '-', 'Link', 'Unlink'], ['SpecialChar']]
    });
    //global for editor instance
    var global = editor;
    //set timed interval to run function
    setInterval(function updateCount() {
        var almost = $("<div />").html(global.getData()).text();
        var count = 140 - almost.length;
        if(almost.length <= 140) {
            jQuery('#counter').text(count).removeClass("red");
            jQuery('.bar').stop().animate({"width": value+'%'}, 1).removeClass("redbar").addClass("bluebar");
        } else {
            jQuery('#counter').text(count).addClass("red");
            jQuery('.bar').stop().animate({"width": '100%'}, 1).removeClass("bluebar").addClass("redbar");
        }
    }, 500);
}); 
```

# html - CSS - 使用绝对位置时链接不可点击

> ID：10663267
> 
> 赞同：31
> 
> 时间：2012-05-19T07:31:35.413
> 
> 标签：html, css, hyperlink, position, clickable

这是我的标题的 HTML 脚本：

```
<div class="header">
<div class="logo"><a href="Default.aspx"><img src="style/images/logo.png" alt="" /></a></div>
<div class="toplink"><a href="Signin.aspx">Sign in</a></div>
<div class="search">
    <form class="searchform" runat="server" method="get">
        <input type="text" id="s" name="s" value="Search for photos" onFocus="this.value=''" onBlur="this.value='Search for photos'"/>
    </form>
</div>
</div> 
```

这是 CSS 脚本：

```
.logo {
    padding: 30px 0;
}

.logo img {
    display: inline;
} 

.toplink {
    position: absolute;
    bottom: 40px;
    right: 280px;
    font-size: 14px;
}

.search {
    position: absolute;
    bottom: 10px;
    right: 0;
    font-size: 14px;
    width: 330px;
} 
```

不知何故，**登录**链接不可点击，但是当我删除绝对位置时，它可以正常工作。无论如何，在保持位置的同时使链接工作吗？任何建议表示赞赏，并在此先感谢。

-Edit- 原来问题出在其他地方。实际上，我正在使用母版页，并使用它创建了一个默认的 ASP 页面。该问题仅在我测试该 ASP 页面时出现，而不是在我用于创建母版页的 HTML 文件时出现。对不起，如果我听起来很复杂，但是是的，这个问题对我来说有点复杂。希望有人能指出我的原因。

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-05-19T07:56:53.047

尝试添加`z-index:10;`到`.toplink{...}`课堂。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-10-31T21:19:00.030

我在绝对定位的 div 中有一个按钮，并且遇到了这个问题。`z-index`还不够，我用`pointer-events: all`了。

# php - 如何在 Magento 的低库存报告中添加自定义字段？

> ID：10663268
> 
> 赞同：1
> 
> 时间：2012-05-19T07:31:39.097
> 
> 标签：php, e-commerce, magento

我想在 magento 的低库存报告中添加成本价和售价字段。我附上了低库存报告页面的屏幕截图，这里我想在“库存数量字段”旁边添加成本价和售价字段。如何在低库存报告中添加这些自定义字段？谁能告诉我在低库存报告中创建客户字段的步骤？

![在此处输入图像描述](../Images/bac4eed5282402c7b90d3dcbac606268.png)

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T05:30:32.277

您可以覆盖`_prepareColumns`方法`Mage_Adminhtml_Block_Report_Product_Lowstock_Grid`classn 添加另一列，例如：

```
$this->addColumn('price', array(
        'header'    =>Mage::helper('reports')->__('Price'),
        'width'     =>'215px',
        'align'     =>'right',
        'sortable'  =>false,
        'filter'    =>'adminhtml/widget_grid_column_filter_range',
        'index'     =>'price',
        'type'      =>'number'
    )); 
```

# codeigniter - 如何从codeigniter中的视图发送包含内容的电子邮件

> ID：10663277
> 
> 赞同：7
> 
> 时间：2012-05-19T07:33:58.133
> 
> 标签：codeigniter, php

我想从我的应用程序向用户发送一封电子邮件，其中包含从 *视图*加载的电子邮件内容 。这是我到目前为止尝试过的代码：

```
$toemail = "user@email.id";

$subject = "Mail Subject is here";
$mesg = $this->load->view('template/email');

$this->load->library('email');

$config['charset'] = 'utf-8';
$config['wordwrap'] = TRUE;
$config['mailtype'] = 'html';

$this->email->initialize($config);

$this->email->to($toemail);
$this->email->from($fromemail, "Title");
$this->email->subject($subject);
$this->email->message($mesg);
$mail = $this->email->send(); 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-19T07:44:00.227

1.  您**还需要**在控制器内 调用`$this->load->library('email');`CI 中的电子邮件才能正常工作。
2.  另外，在您的代码中： `$fromemail`未初始化。
3.  您需要在您的服务器上**支持 SMTP 。**
4.  $config 应该在分配值和键*之前声明为一个数组。*

工作代码：

```
$this->load->library('email');
$fromemail="ad@c.com";
$toemail = "user@email.id";
$subject = "Mail Subject is here";
$data=array();
// $mesg = $this->load->view('template/email',$data,true);
// or
$mesg = $this->load->view('template/email','',true);

$config=array(
'charset'=>'utf-8',
'wordwrap'=> TRUE,
'mailtype' => 'html'
);

$this->email->initialize($config);

$this->email->to($toemail);
$this->email->from($fromemail, "Title");
$this->email->subject($subject);
$this->email->message($mesg);
$mail = $this->email->send(); 
```

**编辑：** `$mesg = $this->load->view('template/email',true);`应该具有lycanian指出的*真实情况。*通过将其设置为 true ，它不会将数据发送到输出流，而是会以字符串的形式返回。

**编辑：** `$this->load->view();`需要带有数据或空的第二个参数`$mesg = $this->load->view(view,data,true);`，如果没有，它将不起作用

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-07-18T22:41:22.470

这一行**$mesg = $this->load->view('template/email',true);** 应该是这样
**$mesg = $this->load->view('template/email','',true);**
在值 true 之前使用单引号，它将完美地工作

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-03-02T15:05:45.603

电子邮件模板发送 在 codeigniter 中，我们需要在发送电子邮件之前放置和元标记

```
$this->data['data'] = $data;
$message = $this->load->view('emailer/create-account', $this->data,  TRUE);
$this->email->set_header('MIME-Version', '1.0; charset=utf-8');
$this->email->set_header('Content-type', 'text/html');
$this->email->from($email, $name);
$this->email->to('emailaddres@mail.com');
$this->email->subject($subject);
$this->email->message($message);
$this->email->send(); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2018-05-03T17:59:36.893

你会试试的！！在面临许多错误之后，它对我有用

```
 $subject = 'New message.';
            $config = Array(        
                'protocol' => 'sendmail',
                'smtp_host' => 'Your smtp host',
                'smtp_port' => 465,
                'smtp_user' => 'webmail',
                'smtp_pass' => 'webmail pass',
                'smtp_timeout' => '4',
                'mailtype'  => 'html', 
                'charset'   => 'utf-8',
                'wordwrap' => TRUE
            );
            $this->load->library('email', $config);
            $this->email->set_newline("\r\n");
            $this->email->set_header('MIME-Version', '1.0; charset=utf-8');
            $this->email->set_header('Content-type', 'text/html');

            $this->email->from('from mail address', 'Company name ');
            $data = array(
                 'message'=> $this->input->post('message')
                     );
            $this->email->to($toEmail);  
            $this->email->subject($subject); 

            $body = $this->load->view('email/sendmail.php',$data,TRUE);
            $this->email->message($body);   
            $this->email->send(); 
```

# jquery-ui - Internet Explorer 中的 JQuery 对话框问题

> ID：10663278
> 
> 赞同：0
> 
> 时间：2012-05-19T07:33:59.297
> 
> 标签：jquery-ui

我正在使用 UI 对话框来显示消息。

它在 Firefox 和 Google Chrome 中运行良好。但是，当我在 IE 版本中进行测试时，对话框不会打开。

谁能说出真正的问题是什么？

我在下面粘贴了我的代码：

```
function check_selected(c) {
    var count = c - 1;
    var radios = document.getElementsByName('plan');
    for ( var i = 0; i < radios.length; i++) {
        if (radios[i].disabled) {

            if (radios[i].checked) { // checked

                $('#planalert').dialog({
                    modal : true,
                    autoOpen : true,
                    title : "Plan",
                    width : 650,
                    height : 150,
                    show : "blind",
                    hide : "scale",
                });

                var c = 0;

            } else {
                var c = 1;
            }
        }

    }
    ;

    if (c == 0) {
        return false;
    } else {
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T13:11:55.870

尝试从您传递的选项对象中删除尾随逗号`dialog`：

```
$('#planalert').dialog({
    modal:true,
    autoOpen: true,
    title:"Plan",
    width:650,
    height:150,
    show: "blind",
    hide: "scale" // <-----
}); 
```

Internet Explorer 会因多余的逗号而窒息，而其他浏览器可能不会。

此外，删除循环结束大括号`;`末尾的分号 ( ) ：`for`

```
for (var i = 0; i < radios.length; i++) {
    /* snip */
} // <--- semicolon not necessary 
```

此外，您正尝试`c`在函数内部多次定义。您将它传递给函数，因此您的`var c = ...`语句实际上没有达到您想要的效果。您应该使用另一个变量（我建议不要改变您传递的参数），或者`var`从块内删除语句`if`。

此外，您的循环实际上只是`c`为最后一个禁用的单选按钮设置。这是你想要的吗？

无论如何，这就是我将如何重写它（不尝试修复上面的逻辑错误）。一定要使用[JsHint 之](http://www.jshint.com)类的工具来检查你的 JavaScript 是否有探针：

```
function check_selected(c){
    var count=c-1;
    var radios = document.getElementsByName('plan');
    var isChecked = 0;
    for (var i = 0; i < radios.length; i++) {
        if (radios[i].disabled) {
            if (radios[i].checked){ // checked
                $('#planalert').dialog({
                    modal:true,
                    autoOpen: true,
                    title:"Plan",
                    width:650,
                    height:150,
                    show: "blind",
                    hide: "scale"
                });
                isChecked = 0;

            } else{
                isChecked = 1;
            }
        }
    }

    return isChecked;
 } 
```

# jquery - jQuery jTemplates 显示“空”消息

> ID：10663279
> 
> 赞同：2
> 
> 时间：2012-05-19T07:34:09.787
> 
> 标签：jquery, jtemplates

我将 jTemplates 与 jQuery 一起使用。我想在没有结果时显示一条消息，而不是什么都没有。我尝试在模板中包含消息并使用 {#foreach} 循环中的函数来隐藏它，但这不起作用。请告诉我这是可能的！

```
{#template JobCodeAssignment}
    <tr class="standard normal" id="jobCode-{$T.JobCode.JobCode_ID}-blank">
        <td colspan="5" style="text-align:center;"><em>No users</em></td>
    </tr>
{#foreach $T as JobCodeAssignment}
    <!-- {hideNoUsersMessage($T.JobCodeAssignment.JobCode_ID)} -->
    <tr class="standard {#cycle values=['normal','alternate']}">
        <td class="firstColumn"><strong>{$T.JobCodeAssignment.User.FirstName} {$T.JobCodeAssignment.User.LastName}</strong></td>
        <td>{formatCurrency($T.JobCodeAssignment.HourlyRate)}</td>
        <td>{$T.JobCodeAssignment.ShiftReportRequired}</td>
        <td>{$T.JobCodeAssignment.MileageReportRequired}</td>
        <td class="lastColumn" style="text-align:right;"><img id="jobCodeAssignmentEditButton-{$T.JobCodeAssignment.JobCodeAssignment_ID}" src="Images/pencil-small.png" class="clickable" onclick="editJobCodeAssignmentOpen({#var $T.JobCodeAssignment});" /></td>
    </tr>
{#/for}
{#/template JobCodeAssignment}

function hideNoUsersMessage(jobCode_ID) {
    $('#jobCode-' + jobCode_ID + '-blank').hide();
    return jobCode_ID;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T00:43:54.217

我想出了如何以完全不同的方式完成我正在寻找的事情，使用循环中的参数来计算记录数。如果循环后为零，则显示消息。

```
{#template JobCodeAssignment}
    {#param name=count value=0}
{#foreach $T as JobCodeAssignment}
    {#param name=count value=$P.count+1}
    <tr class="standard {#cycle values=['normal','alternate']}">
        <td class="firstColumn"><strong>{$T.JobCodeAssignment.User.FirstName} {$T.JobCodeAssignment.User.LastName}</strong></td>
        <td>{formatCurrency($T.JobCodeAssignment.HourlyRate)}</td>
        <td>{$T.JobCodeAssignment.ShiftReportRequired}</td>
        <td>{$T.JobCodeAssignment.MileageReportRequired}</td>
        <td class="lastColumn" style="text-align:right;"><img id="jobCodeAssignmentEditButton-{$T.JobCodeAssignment.JobCodeAssignment_ID}" src="Images/pencil-small.png" class="clickable" onclick="editJobCodeAssignmentOpen({#var $T.JobCodeAssignment});" /></td>
    </tr>
{#/for}
    {#if $P.count == 0}
    <tr class="standard alternate">
        <td colspan="5" style="text-align:center;"><em>No users</em></td>
    </tr>
    {#/if}
{#/template JobCodeAssignment} 
```

# iphone - 确定是否选择了特定的 UITextField

> ID：10663280
> 
> 赞同：1
> 
> 时间：2012-05-19T07:34:12.590
> 
> 标签：iphone, ios, uitextfield

我在一个 UIViewController 中有两个 UITextField。我在两个文本字段中都打开了一个 UIDatePicker。我想更新文本字段中日期的值，但我不知道如何检查从哪个文本字段的日期选择器打开。有人可以解释一下我如何确定选择了哪个文本字段吗？

```
- (IBAction)selectATime:(UIControl *)sender {

   [self showActionSheetForTimePicker:sender];
}
- (IBAction)showActionSheetForTimePicker:(id)sender
{
    //add the action sheet
    actionSheetForiPhone = [[UIActionSheet alloc] initWithTitle:@"" 
                                                     delegate:self
                                            cancelButtonTitle:nil
                                       destructiveButtonTitle:nil
                                            otherButtonTitles:nil];

    // Add the picker
    pickerForiPhone = [[UIDatePicker alloc] init];
    pickerForiPhone.datePickerMode = UIDatePickerModeTime;
    [actionSheetForiPhone addSubview:pickerForiPhone];
    [actionSheetForiPhone showInView:self.view];        
    [actionSheetForiPhone setBounds:CGRectMake(0, 0, 320, 520)];
    [pickerForiPhone setBounds:CGRectMake(0, 0, 320, 340)];
    //adding toolbar to the action sheet
    UIToolbar * toolbar = [[UIToolbar alloc] initWithFrame: CGRectMake(0, 0, 320, 45)];
    toolbar.barStyle = UIBarStyleBlackOpaque;
    NSMutableArray *barItems = [[NSMutableArray alloc] init];
    //adding buttons to the toolbar
    UIBarButtonItem *cancelButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemCancel target:self action:@selector(dismissPicker:)];
    UIBarButtonItem *flexSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:self action:nil];
    UIBarButtonItem *doneButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(updateTextField:)];
    [barItems addObject:cancelButton];
    [barItems addObject:flexSpace];//for adding flexible space between cancel and done button
    [barItems addObject:doneButton];  
    [toolbar setItems:barItems];
    [actionSheetForiPhone addSubview:toolbar];
    CGRect pickerRect = pickerForiPhone.bounds;
    pickerRect.origin.y = -100;
    pickerForiPhone.bounds = pickerRect;
    [pickerForiPhone release];
    [actionSheetForiPhone release];

}

- (void)updateTextField:(id) sender
{
    //for updating the value of the textfield
    NSDateFormatter *df = [[NSDateFormatter alloc] init];
    [df setDateFormat: @"hh:mm a"]; 
    NSString *time = [df stringFromDate:self.pickerForiPhone.date];
    NSLog(@"Time = %@", time);
    //if([element respondsToSelector:@selector(setText:)])
    {
       if(activeTextField == self.fromTime)
           self.fromTime.text = time;
       else
           self.toTime.text = time;
    }
    [df release];

    //for dismissing the date picker
    [self.actionSheetForiPhone dismissWithClickedButtonIndex:1 animated:YES];    

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T07:44:49.273

使用标签来识别不同的文本字段。然后你可以检查 (textfield.tag==something) 是否做某事

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T07:51:26.567

```
-(BOOL)textFieldShouldBeginEditing:(UITextField*)textField {
    [txtField addTarget:self action:@selector(setPicker:)forControlEvents:UIControlEventEditingDidBegin];
}

-(void)setPicker:(id)sender
{
    if ([sender tag] == 1) { //first textField tag
        //textField 1
    }
    else {
       //textField 2
    }
} 
```

# objective-c - 是否可以同时显示两个视图而无需在基于视图的应用程序中切换选项？

> ID：10663282
> 
> 赞同：-1
> 
> 时间：2012-05-19T07:34:24.353
> 
> 标签：objective-c, ios, xcode

我是 iOS 编程和 Xcode 的新手。我正在通过 Xcode 中基于视图的应用程序做一个画家应用程序。在这里，我将在主视图中绘制并通过单击主视图中的按钮来自定义新视图中的设置。

当我单击主视图中的按钮时，它希望在主视图中显示自定义视图。不应隐藏主视图。自定义视图，它只是一个显示在主视图本身的小视图。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T08:10:57.643

像这样使用 -

// 点击按钮的动作 -

```
UIView *newView = [[UIView alloc] initWithFrame:CGRectMake(xpos, yPos, width, height]; //pass these values whatever you want
[mainView addSubView:newView]; 
```

// 现在当你想删除它时 -

```
[mainView removeFromSuperView:newView]; 
```

# c# - 使用 C# 控制台应用程序的 Telnet

> ID：10663283
> 
> 赞同：0
> 
> 时间：2012-05-19T07:34:26.510
> 
> 标签：c#, asp.net, telnet

我有一个服务器，我可以使用 Windows 7 远程登录到它。我只需键入 telnet 然后在 Cmd 中打开主机端口，然后是我的用户名和密码。之后一切都会好起来的，我可以执行所有命令，我想知道，在 C# 中有没有这样的方法？只需连接到主机端口传递用户名和密码，然后执行命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T11:56:45.643

您可以使用[Minimalistic Telnet](http://www.codeproject.com/Articles/19071/Quick-tool-A-minimalistic-Telnet-library)，这是一个很好的免费 C# telnet 客户端库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T12:02:37.273

为了你所崇拜的任何神...

[http://en.wikipedia.org/wiki/Telnet](http://en.wikipedia.org/wiki/Telnet)

Telnet 没有有线协议......它在位中，除非您正在做一些高级的事情（您不是），否则您不必担心这一点

1) 使用 TcpClient，连接端口（可能是 23） 2) 使用 Encoding.GetBytes('commmand') 创建命令。3) 在 Socket 上发送字节并处理响应...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T07:37:57.383

您可以使用 Process.Start 启动 telnet 进程，然后将数据发送到该进程的标准输入，并从标准输出中读取。

# jquery - 以会计格式设置值

> ID：10663284
> 
> 赞同：-2
> 
> 时间：2012-05-19T07:34:56.300
> 
> 标签：jquery

我正在使用accounting.js，我需要动态格式化值。

```
 $('#<%=txtamount1.ClientID %>').bind('keydown keyup keypress focus blur paste change', function () {

                        result = accounting.formatMoney(
                                $('#<%=txtamount1.ClientID %>').val(),
                                '',
                                2,
                                ","
                            );
                        $('#<%=txtamount.ClientID %>').val(result);

                    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T10:14:26.443

```
 $(document).ready(function () {
            $('#txtamount1').live('keyup change', function (e) {
                $(this).val(function () {
                    return accounting.formatMoney(($(this).val()+ String.fromCharCode(e.keyCode)), '', 2, ",");
                });
            });

            $('#txtamount1').trigger('keyup');
 });​ 
```

对于现场演示，请参阅此链接：http: [//jsfiddle.net/nanoquantumtech/2s9wQ/](http://jsfiddle.net/nanoquantumtech/2s9wQ/)

# html - 透明 div 下方的可点击 div

> ID：10663286
> 
> 赞同：1
> 
> 时间：2012-05-19T07:35:00.597
> 
> 标签：html, css, transparency, z-index, css-position

是否可以有一个绝对定位的透明 div 覆盖一系列可点击的 div？我希望能够将鼠标悬停在下面的红色 div 上以获得响应。

```
<style type="text/css">

#holder{
    width:200px;
    height:200px;
}
.clickMe {
    width:100px;
    height:100px;
    cursor:pointer;
    background-color:red;
    border:1px solid black;
    float:left;
    margin:-1px;
    padding:0;
}
.hidey {
    position:absolute;
    top:0;
    left:0;
    z-index:50;
    height:50%;
    width:50%;
    opacity:.25;
    background-color:black;
}
</style>
<div class="hidey"></div>
<div id="holder">
    <div class="clickMe"></div>
    <div class="clickMe"></div>
    <div class="clickMe"></div>
    <div class="clickMe"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T08:22:49.100

[指针事件](http://robertnyman.com/2010/03/22/css-pointer-events-to-allow-clicks-on-underlying-elements/)可以解决您的问题。到目前为止，Firefox 3.6+、Safari 4 和 Google Chrome 都支持指针事件（参见[兼容性表](http://caniuse.com/#feat=pointer-events)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T07:39:46.890

因为顶部 div 将消耗鼠标操作，所以做你想做的事情的唯一方法（我知道）是让顶部 div 执行 onClick 操作，然后创建一个 javascript 函数将该点击传递给下面的 div。

有关详细信息，请参阅此答案：

[在文本框中的 Enter 键上使用 JavaScript 触发按钮单击](https://stackoverflow.com/questions/155188/trigger-a-button-click-with-javascript-on-the-enter-key-in-a-text-box)

您的功能将涉及更多，因为您还需要获取鼠标位置并使用它来决定您正在单击哪个框。

请参阅此处的第二个答案以了解如何执行此操作。

[如何从主体上的 onClick 事件中获取鼠标单击的绝对位置？](https://stackoverflow.com/questions/6629688/how-do-i-get-the-absolute-position-of-a-mouse-click-from-an-onclick-event-on-the)

编辑：对不起，你说的是悬停，而不是点击。进行 onHover 动作，并传递悬停动作，而不是单击。相同的一般想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T07:42:13.237

让我建议简单的老派方法，而不是竭尽全力完成这项工作。

而不是当前在内部元素周围有一个包装器的结构，只需给各个元素一个包装器并将事件放在这些包装器上以查找子元素。

IE而不是这个：

```
<div class="wrapper">
    <div class="clickMe">
        ...
    </div>
    <div class="clickMe">
        ...
    </div>
</div> 
```

用这个：

```
<div class="wrapper">
    <div class="clickMe">
        ...
    </div>
</div>
<div class="wrapper">
    <div class="clickMe">
        ...
    </div>
</div> 
```

您的 HTML 中会有一些额外的标记，但在我看来，这可能比使当前标记工作所需的长度更可取。仅仅因为新技术的存在，并不意味着它是完成这项工作的最佳工具。

# vb.net - 在 ComboBox 窗体中自动完成

> ID：10663287
> 
> 赞同：1
> 
> 时间：2012-05-19T07:35:37.087
> 
> 标签：vb.net, winforms, autocomplete, combobox

我在组合框中有自动完成功能，它可以正常工作但几乎没有问题，我让建议列表出现在文本长度超过 3 个字符的情况下，但列表出现在 4 个字符的长度之后（当用户输入第五个字符时的文本）这意味着当列表第一次执行的代码没有出现在此处时是`Text_Changed`事件中的代码

```
 Private Sub TxtItem_TextChanged(sender As System.Object, e As System.EventArgs) Handles TxtItem.TextChanged

    If Trim(TxtItem.Text) <> "" And Trim(TxtItem.Text).Length > 3 Then
        'Autocomplete
        Dim Bl As New ItemBL
        Dim suggestions = Bl.DisplayLikeNameList(Trim(TxtItem.Text))
        Dim MySource As New AutoCompleteStringCollection()
        MySource.AddRange(suggestions.ToArray)

        With TxtItem
            .AutoCompleteMode = AutoCompleteMode.Suggest
            .AutoCompleteSource = AutoCompleteSource.CustomSource
            .AutoCompleteCustomSource = MySource
        End With
        TxtItem.Select(TxtItem.Text.Length, 0)
        Exit Sub
    Else
        TxtItem.AutoCompleteMode = AutoCompleteMode.None
    End If

End Sub 
```

注意：此问题会导致应用程序在 Windows XP 上退出（有时），但不会影响 Windows 7

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T13:48:42.867

在这篇文章中找到了答案： [动态更改文本框的自动完成列表会导致 AccessViolationException，有什么建议吗？](https://stackoverflow.com/questions/8779557/dynamically-changing-textboxs-autocomplete-list-causes-accessviolationexception)

`AutoComplete`所以我必须在表单事件中创建全局建议列表并初始化 属性`load`，它运行良好。

# objective-c - 在 sprite.runAction 之后调用 Block 时崩溃

> ID：10663290
> 
> 赞同：1
> 
> 时间：2012-05-19T07:36:16.300
> 
> 标签：objective-c, ios, cocos2d-iphone, objective-c-blocks

我在使用 Objective C 时遇到问题。我在移动精灵后尝试调用块

我想要实现的简短版本是我想移动阵列中的所有敌人，当每个敌人完成移动时，我想检查它是否发生碰撞。

下面的简化代码显示了我正在尝试做的事情。

我的 Actor 类是这样定义的

```
// -----------------------------
// Actor.h

#import <Foundation/Foundation.h>
#import "cocos2d.h"
#import "ScreenObject.h"

typedef void (^actorMoveComplete)(void);

@interface Actor : ScreenObject
{
   // actorMoveComplete onMoveComplete;
}

@property (nonatomic) BOOL isMoving;
@property (readwrite, copy) actorMoveComplete onMoveComplete;
@property (nonatomic, retain) CCSprite* sprite;

-(void) moveTo:(CGPoint)targetPosition Speed:(float) speed withCallback:(actorMoveComplete)moveComplete;

@end

// -----------------------------
//  Actor.m
#import "Actor.h"

@implementation Actor

@synthesize onMoveComplete;
@synthesize sprite;

-(void) moveTo:(CGPoint)targetPosition Speed:(float) speed withCallback:(actorMoveComplete)moveComplete;
{
    onMoveComplete = moveComplete;

    id actionMove = [CCMoveTo actionWithDuration:speed position:targetPosition];
    id actionMoveDone = [CCCallFuncN actionWithTarget:self selector:@selector(spriteMoveFinished:)];
    [super.sprite runAction:[CCSequence actions:actionMove, actionMoveDone, nil]];
}

-(void) spriteMoveFinished:(id) sender
{
    isMoving = NO;
    if (onMoveComplete != nil)
        onMoveComplete();
}
@end 
```

如您所见，我正在尝试将块存储在**onMoveComplete**参数中（我也在私有变量中尝试过），然后在精灵移动完成后调用它。

在我的调用类中，我正在遍历一堆演员（敌人），一旦移动完成，我想为每个演员调用这个匿名代码块：

```
{
   [self checkForCollision:enemy];
} 
```

我的调用类看起来像这样。

```
//------------------------------
//
//  GameLayer.h

#import "cocos2d.h"
#import "Actor.h"

@interface GameLayer : CCLayerColor
{
}

@property (nonatomic, copy) NSMutableArray *enemies;

- (void) updateEnemies;
- (void) checkForCollision:(Actor*)actor;
- (BOOL) isMapGridClear:(CGPoint)mapGrid excludeActor:(Actor*)actor;

@end

//------------------------------
//  GameLayer.m

#import "GameLayer.h"

@implementation GameLayer

@synthesize enemies;

- (void) updateEnemies
{

    for (Actor *enemy in enemies)
    {
        //  
        CGPoint newPosition = [self getNewPosition:enemy]; /* method to figure out new position */

        [enemy moveDelta:ccp(dX, dY) Speed:enemySpeed withCallback:^{
            [self checkForCollision:enemy];
        }];
    }
}

- (void) checkForCollision:(Actor*)actor
{
    if (![self isMapGridClear:actor.gridPosition excludeActor:actor])
    {
        actor.isCrashed=YES;
        [actor loadSprite:self spriteImage:@"crashed.png"];
    }
}

- (BOOL) isMapGridClear:(CGPoint)mapGrid excludeActor:(Actor*)actor
{
    /* Actual method figures out if there was a collision    */
    return YES;
}

@end 
```

不幸的是，当我调用 onMoveComplete 块时，我不断收到 EXC_BAD_ACCESS 错误有趣的是，如果我尝试在 moveTo 方法中调用该块，它可以工作（但我当然希望它在移动完成后触发）。

谁能帮我解决我做错的事情。我什至使用正确的机制吗？

（对于格式不佳、不完整的代码段表示歉意）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T08:04:03.543

您正确地将您的属性声明为副本，但是您将实例变量直接设置为块的地址，而不使用生成的访问器。这意味着该块在被调用之前不会被复制并被销毁。

使用分配你的块`self.onMoveCompleted = moveCompleted`，你会没事的。

# java - 想知道我是否需要一起安装 JDK 1.6 和 1.7？

> ID：10663291
> 
> 赞同：2
> 
> 时间：2012-05-19T07:36:31.650
> 
> 标签：java, compilation, backwards-compatibility, jdk1.6, java-7

我可以使用JDK 1.7 来编译用JDK 1.6 编写的代码吗？Java 是否严格向下兼容？

我需要将 JDK 1.6 和 JDK 1.7 放在同一台机器上吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T08:06:02.043

> 我可以使用JDK 1.7 来编译用JDK 1.6 编写的代码吗？

是的。

> Java 是否严格向下兼容？

如果编译时指定了[交叉编译选项](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/javac.html#crosscomp-options)。这些是最值得注意的：

*   `-source`
*   `-target`
*   `-bootclasspath`- 这需要一个`rt.jar`JRE **（**不是 JDK）作为目标

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T07:39:42.583

> 我可以使用 JDK 1.7 来编译 JDK 1.6 中编写的代码吗？

是的你可以。

> 我需要将 JDK 1.6 和 JDK 1.7 放在同一台机器上吗？

您*可以*将它们都安装在同一台机器上。你是否*需要*两者都取决于你到底想要做什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T07:39:28.217

是的，java 具有向后兼容性。

使用最新的jdk，您已经足够了，但是您可以毫无问题地保留两个jdk

# c - servicemain 函数仅在服务事件停止时启动

> ID：10663295
> 
> 赞同：-1
> 
> 时间：2012-05-19T07:38:05.067
> 
> 标签：c, windows, winapi, service, windows-services

我使用以下链接[http://www.muukka.net/programming/service/Beeper%20Service.cpp](http://www.muukka.net/programming/service/Beeper%20Service.cpp)编写服务。但这里的问题是，只有在请求停止服务时才会调用 servicemain 函数。

我想事先启动 servicemain 功能，以检测连接的 USB 设备.. 我该怎么办..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T10:21:42.430

在代码中：

> SC_HANDLE service = CreateService( serviceControlManager, serviceName, serviceName, SERVICE_ALL_ACCESS, SERVICE_WIN32_OWN_PROCESS, **SERVICE_AUTO_START** , SERVICE_ERROR_IGNORE, path, 0, 0, 0, 0, 0);

改成：

> SC_HANDLE service = CreateService(serviceControlManager, serviceName, serviceName, SERVICE_ALL_ACCESS, SERVICE_WIN32_OWN_PROCESS, **SERVICE_DEMAND_START** , SERVICE_ERROR_IGNORE, path, 0, 0, 0, 0, 0);

也试试这个：http: [//msdn.microsoft.com/en-us/library/windows/desktop/bb540476%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb540476%28v=vs.85%29.aspx)

# html - 增加 Foundation CSS 中包含的选项卡的高度

> ID：10663296
> 
> 赞同：2
> 
> 时间：2012-05-19T07:38:06.453
> 
> 标签：html, css

我正在使用 Foundation CSS 创建一些包含的选项卡。[http://foundation.zurb.com/docs/ui.php#simpleContained1](http://foundation.zurb.com/docs/ui.php#simpleContained1)

由于标签内容中需要许多 div，因此我将 div 放置在 li 元素中。[允许列表内的​​ div 吗？](https://stackoverflow.com/questions/1915077/is-div-inside-list-allowed)

但是 div 不会包含在选项卡内容的边框内。它在它外面。我们如何使边框包含 div。

我包括一些代码

```
<dl class="tabs contained">
  <dd><a href="#simpleContained1" class="active">Operators and Set Operartors</a></dd>
  <dd><a href="#simpleContained2">Greek Letters and Other Symbols</a></dd>
  <dd><a href="#simpleContained3">Operations and Arrows</a></dd>
</dl>

   <ul class="tabs-content contained">
        <li class="active" id="simpleContained1Tab">

                        <div id="add" class="lib-item">
                          Add
                        </div>

                        <div id="subtract" class="lib-item">
                          Sub
                        </div>

                        <div id="multiply" class="lib-item">
                          Mul
                        </div>

                        <div id="divide" class="lib-item">
                          Div
                        </div>

                        <div id="plusorminus" class="lib-item">
                          Plus or minus
                        </div>

                        <div id="lessthan" class="lib-item">
                          Less than
                        </div>

                        <div id="greaterthan" class="lib-item">
                          Greater Than
                        </div>

                        <div id="lessthanorequalto" class="lib-item">
                          Less than / Erual to
                        </div>

                        <div id="equalto" class="lib-item">
                          Equal to
                        </div>

                        <div id="approximately" class="lib-item">
                          Approx
                        </div>

                        <div id="notequalto" class="lib-item">
                          Not equal to
                        </div>

                        <div id="setunion" class="lib-item">
                          Union
                        </div>

                        <div id="subset" class="lib-item">
                         Subset
                        </div>

                        <div id="superset" class="lib-item">
                          Superset
                        </div>

                        <div id="propersubset" class="lib-item">
                          Proper Subset
                        </div>

                        <div id="propersuperset" class="lib-item">
                          Proper Superset
                        </div>

                        <div id="inset" class="lib-item">
                          Inset
                        </div>

                        <div id="notinset" class="lib-item">
                          Not Inset
                        </div>

                        <div id="forall" class="lib-item">
                          For All
                        </div>

                        <div id="exists" class="lib-item">
                          Exists
                        </div>

                        <div id="emptyset" class="lib-item">
                          EmptySet
                        </div>                    

                        <div id="setcontains" class="lib-item">
                          Set Contains
                        </div>

                       </li>

                      <li id="simpleContained2Tab">This is simple tab 2's content. Now you see it!

                      </li>
                      <li id="simpleContained3Tab">This is simple tab 3's content. It's, you know...okay.

                      </li>              
   </ul> 
```

lib-item 是我编写的类，仅用于在选项卡内容区域内排列内容。

是这样的

```
.lib-item{
 float:left;
 background-color:#CCC;
 width:100px;
 text-align:center;
 margin:5px;
} 
```

这就是现在的结果

[http://tinypic.com/view.php?pic=118n4e8&s=6](http://tinypic.com/view.php?pic=118n4e8&s=6)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T04:34:57.587

这是[示例](http://jsfiddle.net/sureshpattu/cDNn5/)

将所有 div 放在一个主 div **(buttons_backdiv)**下。在关闭主 div 之前，我们必须清除浮动。所以添加一个具有类**clearfloat**的 div 。

运算符和集合运算符

希腊字母和其他符号

操作和箭头

```
 <div class="buttons_backdiv"> //main div opening
                    <div id="add" class="lib-item">
                      Add
                    </div>

                    <div id="subtract" class="lib-item">
                      Sub
                    </div>

                    <div id="multiply" class="lib-item">
                      Mul
                    </div>

                    <div id="divide" class="lib-item">
                      Div
                    </div>

                    <div id="plusorminus" class="lib-item">
                      Plus or minus
                    </div>

                    <div id="lessthan" class="lib-item">
                      Less than
                    </div>

                    <div id="greaterthan" class="lib-item">
                      Greater Than
                    </div>

                    <div id="lessthanorequalto" class="lib-item">
                      Less than / Erual to
                    </div>

                    <div id="equalto" class="lib-item">
                      Equal to
                    </div>

                    <div id="approximately" class="lib-item">
                      Approx
                    </div>

                    <div id="notequalto" class="lib-item">
                      Not equal to
                    </div>

                    <div id="setunion" class="lib-item">
                      Union
                    </div>

                    <div id="subset" class="lib-item">
                     Subset
                    </div>

                    <div id="superset" class="lib-item">
                      Superset
                    </div>

                    <div id="propersubset" class="lib-item">
                      Proper Subset
                    </div>

                    <div id="propersuperset" class="lib-item">
                      Proper Superset
                    </div>

                    <div id="inset" class="lib-item">
                      Inset
                    </div>

                    <div id="notinset" class="lib-item">
                      Not Inset
                    </div>

                    <div id="forall" class="lib-item">
                      For All
                    </div>

                    <div id="exists" class="lib-item">
                      Exists
                    </div>

                    <div id="emptyset" class="lib-item">
                      EmptySet
                    </div>                    

                    <div id="setcontains" class="lib-item">
                      Set Contains
                    </div>
     <div class="clearfloat"></div> //div float clear
     </div> //main div closing
                   </li>

                  <li id="simpleContained2Tab">This is simple tab 2's content. Now you see it!

                  </li>
                  <li id="simpleContained3Tab">This is simple tab 3's content. It's, you know...okay.

                  </li> 
```

​</p>

CSS是：

```
.buttons_backdiv { width:100%;}
.clearfloat { clear:both;} 
```

# sql - 按字段值连接表中的多行

> ID：10663297
> 
> 赞同：0
> 
> 时间：2012-05-19T07:38:17.197
> 
> 标签：sql

我有一个`company`像这样的表格行：

```
id(int)  |name(string)  |maincategory(int)  |subcategory(string)    
1        |Google        |1                  |1,2,3
2        |yahoo         |4                  |4,1 
```

和其他表`category`，如：

```
 id(int) |name(string)  
 1       |Search
 2       |Email
 3       |Image
 4       |Video 
```

我想通过`company.subcategory`=加入拖车表`category.id`

可以在 sql 中使用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T08:04:00.700

首先[拆分您的`subcategory`列](http://www.codeproject.com/Articles/7938/SQL-User-Defined-Function-to-Parse-a-Delimited-Str)。`company_category`最后，您应该有一个以 company_id 和 category_id 作为列的附加表。

```
 company_id(int) |category_id(int)  
 1               |1
 1               |2
 1               |3
 2               |4
 2               |1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T08:04:27.993

您的设计无效。你应该有另一个名为 companySubcategories 或类似的表。该表应该有两列 companyId 和 categoryId。然后您的选择将如下所示：

```
select <desired fields> from
company c
join companySubcategories cs on cs.companyId = cs.id
join category ct on ct.id = cs.categoryId 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T08:07:41.577

你可以像下面这样......

```
select * from 
company c, category cc
where c. subcategory like '%'||cc.id||'%'; 
```

它在 oracle 数据库中按预期工作..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T08:08:13.387

您可以引入一个新表`company_subcategory`来跟踪子类别

```
 id (int) | subcategory(int)
    1      |    1
    1      |    2
    1      |    3
    2      |    1
    2      |    4 
```

那么你就可以运行 select as

```
 select company.name AS company, category.name AS category 
   FROM company 
           JOIN company_subcategory 
                ON company.id = company_subcategory.company  
           JOIN category 
                ON company_subcategory.subcategory = category.id; 
```

要得到

```
+---------+----------+
| company | category |
+---------+----------+
| google  | search   |
| google  | email    |
| google  | image    |
| yahoo   | search   |
| yahoo   | video    |
+---------+----------+ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-19T08:17:00.297

```
 SELECT *
  FROM COMPANY CMP, CATEGORY CT
 WHERE (SELECT CASE
                 WHEN INSTR(CMP.SUB_CATEGORY, CT.ID) > 0 THEN
                  'TRUE'
                 ELSE
                  'FALSE'
               END
          FROM DUAL) = 'TRUE'此查询使用 INSTR 函数在 SUB_CATEGORY 中查找 ID。如果它确实存在，则返回该行。

输出如下

```
 ID  NAME   MAIN_CATEGORY  SUB_CATEGORY   ID    NAME
1   Google  1             1,2,3        1    Search
1   Google  1             1,2,3        2    Email
1   Google  1             1,2,3        3    Image
2   yahoo   2             4,1          1    Search
2   yahoo   2             4,1          4    Video 
```

希望能帮助到你。

但是，我建议您避免使用这种类型的条目，因为 ID 应该有单独的条目而不是组合条目。这可能会在将来产生问题，因此最好现在避免。

```

# virtualbox - 如何在安装在虚拟机中的 Oracle Solaris 10 中配置 Internet 访问

> ID：10663298
> 
> 赞同：0
> 
> 时间：2012-05-19T07:38:26.097
> 
> 标签：virtualbox, solaris, opensolaris

我已经在虚拟盒子 4.1.2 中安装了 solaris 10。安装成功，但无法访问互联网。我试图创建一个桥接网络，这与我对 Debian 安装所做的类似，但它仍然无法在 solaris 中工作。请问有人可以帮忙解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-02-16T03:56:00.340

我知道这是一个非常古老的问题，但只是在这里发布以供其他人参考。我写了这篇关于在 VirtualBox 中为 Solaris 11 配置网络的[博文。](https://notebookbft.wordpress.com/2016/09/22/configuring-network-for-solaris-11-in-virtual-box/#more-439)

我们将通过配置 NAT、HostOnly 和桥接适配器。首先，我们必须转到 VirtualBox 中的 Solaris VM 设置，然后从那里转到网络选项卡。尽管最终我们将添加三个网络适配器，但我建议我们从仅启用一个适配器开始，因为可能很难确定在 Solaris 中哪个是我们一次启用多个网络适配器并尝试在 Solaris 中配置它们。

**配置网桥适配器**

所以首先让我们打开 BridgedAdaptor。确保按 OK 并保存更改。现在启动虚拟机并登录。

[![在此处输入图像描述](../Images/9371842bf6731cc2d571e91436b215e9.png)](https://i.stack.imgur.com/99jRu.png)

Solaris 11 具有“网络配置文件 (ncp)”的概念。有

1.  **自动**- 使用 DHCP 从任何连接的以太网接口获取网络配置（IP 地址、路由器和 DNS）。不支持接口和IPMP的热插拔。

2.  **Manual (DefaultFixed NCP)** – 需要使用 dladm 和 ipadm 命令手动配置接口。也称为 DefaultFixed NCP。支持接口和IPMP的热插拔。

我们想使用手动配置文件。您可以通过“netadm list”（网络管理）命令获取这些列表。

[![在此处输入图像描述](../Images/deeb2cbbeddfec709ff241e661bba58d.png)](https://i.stack.imgur.com/gI7Sk.png)

在 about 输出中，我们可以看到“Automatic”被禁用，“DefaultFixed”在线。这是因为我在安装 Solaris 时已经启用了它。因此，如果您没有 DefaultFixed 在线运行以下命令。

```
netadm disable -p ncp Automatic
netadm enable -p ncp DefaultFixed 
```

现在让我们运行“dladm”（数据链路管理）命令。您将看到类似于以下内容的内容。

[![在此处输入图像描述](../Images/0592fbad458016f2e21babf1d5916301.png)](https://i.stack.imgur.com/FNSVd.png)

现在我们必须创建 IP 配置，为此我们使用“ipadm”（IP 管理）命令。

```
ipadm create-ip net0 
```

这里 net0 是我为 IP 配置指定的名称。您可以使用获得的 LINK 名称作为“dladm”命令的输出。

配置我们创建的配置。可以使用以下命令。

```
ipadm create-addr -T static -a local=192.168.1.190/24 net0/v4 
```

-T 指定静态、dhcp 或 addrconf（对于 IPv6）类型的地址。-a 指定地址 v4 用于表示 IP v4，但它可以是用于标识接口的任何随机字符串。

请注意，当我们配置 BridgedAdaptor 时，我们需要此接口的公共 IP，并且我们将其设为静态。

要查看配置，可以使用以下命令。

```
ipadm show-addr 
```

BridgeAdaptor 配置就是这样。

**配置路由**

现在我们必须配置路由。要查看路线，请运行“route -p -n show”。要添加默认路由，

```
route -p add default 192.168.1.1 
```

如果要删除错误添加的路线，可以使用类似的命令

```
route -p delete default 192.168.1.100 
```

现在，您必须能够在网络中 ping 到此 VM。

**配置 HostOnly 适配器**

配置 HostOnly 适配器类似于配置 BridgeAdaptor。您必须首先从 VirtualBox 设置中启用它，然后在 VM 中，您将能够通过“dladm”命令识别新添加的数据链接。所以你可以配置它。唯一的区别是您必须使用 192.168.56.xxx 范围内的 IP，因为它是仅 VirtualBox 主机 IP 的默认范围。

**配置 NAT**

配置 NAT 略有不同。对于 NAT，我们将使用 dhcp 而不是静态的。所以配置IP地址的命令是不同的。

```
ip-adm create-addr -T dhcp net2/v4 
```

配置 DNS

添加 DNS 名称服务器

```
rajind@solaris:~# svccfg -s dns/client
svc:/network/dns/client> setprop config/nameserver = (8.8.8.8 8.8.4.4)
svc:/network/dns/client> listprop config
config                      application
config/value_authorization astring     solaris.smf.value.name-service.dns.client
config/nameserver          net_address 8.8.8.8 8.8.4.4
svc:/network/dns/client> exit
rajind@solaris:~#

rajind@solaris:~# svcadm refresh dns/client
rajind@solaris:~# svcadm restart dns/client 
```

设置名称服务开关

```
rajind@solaris:~# svccfg -s name-service/switch
svc:/system/name-service/switch> setprop config/host = "files dns"
svc:/system/name-service/switch> listprop config
config                      application
config/default             astring     files
config/value_authorization astring     solaris.smf.value.name-service.switch
config/printer             astring     "user files"
config/host                astring     "files dns"
svc:/system/name-service/switch> exit
rajind@solaris:~#

rajind@solaris:~# svcadm refresh name-service/switch
rajind@solaris:~# svcadm restart name-service/switch 
```

非常感谢这些博客文章的作者。

[http://thegeekdiary.com/how-to-configure-an-ip-address-in-solaris-11/](http://thegeekdiary.com/how-to-configure-an-ip-address-in-solaris-11/)

[http://thegeekdiary.com/installing-oracle-solaris-11-in-virtualbox/](http://thegeekdiary.com/installing-oracle-solaris-11-in-virtualbox/)

[https://w3hol.wordpress.com/2011/12/29/setting-static-ip-address-on-solaris-11/](https://w3hol.wordpress.com/2011/12/29/setting-static-ip-address-on-solaris-11/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T12:04:58.573

如果您保留默认的 VirtualBox 网络配置 (NAT)，并且如果您将 Solaris 配置为使用 DHCP，那么只要主机操作系统已连接到 Internet，您就应该能够访问 Internet。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-31T14:03:07.390

在 Vb 中将您的网卡设置为桥接。

在 Solaris 中：

1.  设置固定ip。
2.  设置默认网关。
3.  将 /etc/resolv.conf 设置为您的名称服务器
4.  将 /etc/nsswitch.conf 设置为文件 dns
5.  通过 ping 一个“网站”来检查
6.  还要检查 nslookup

这应该一切正常。

# c# - “_openGLControl.InitializeContexts();”中的异常 线

> ID：10663301
> 
> 赞同：0
> 
> 时间：2012-05-19T07:38:49.770
> 
> 标签：c#, opengl, tao-framework

在调试“_openGLControl.InitializeContexts();”期间，我有一个异常{“尝试读取或写入受保护的内存。这通常表明其他内存已损坏。”} 线。(Tao.Framework)

但是同一个项目在另一台计算机上运行良好。而且我不明白该怎么做。我已经尝试重新安装 Tao.Framework，但它没有帮助。可能是其他人有这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T06:43:00.607

Just Graphic Card drivers need to be reinstalled.

# css - 使用margin-auto垂直对齐任何div中的任何内联元素

> ID：10663306
> 
> 赞同：0
> 
> 时间：2012-05-19T07:39:15.050
> 
> 标签：css, html, margin, vertical-alignment

我正在设计一个文本字段，我希望它垂直显示在 div 的中间。我希望黑色 div 垂直显示在蓝色 ( `id=srch`) div 的中心。

**HTML 和 CSS：**

```
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Untitled Document</title>
<style type="text/css">

* {
    vertical-align:baseline;
    font-weight: inherit;
    font-family: inherit;
    font-style: inherit;
    font-size: 100%;
    border:0 none;
    outline:0;
    padding:0;
    margin:0;   
}
html {
    height:100%;
}

#outerwrapper {
    width: 90%;
    height: 100%;
    min-height: 100%;
    height: auto !important;
    border: solid thin #333;
}
body {
    height: 100%;
    width: 100%;
}
#header {
    height: 80px;
    width: 100%;
    background-color:#999;
}
input {
    border:solid thin #ab1; 
}
#srch{
    height:50px;
    background-color:#00f;
}
#srch div{
    margin: auto 0 auto 0;
    width: 200px;
    background-color: #000;
}
#contentWrapper {
    width: 100%;
    overflow: auto;
    background-color:#0F0
}

</style>
</head>

<body>
<div id="outerwrapper">
  <div id="header">Header

      <div id="srch">
        <div>
            <input type="tel" name="aa"/>
        </div>
      </div>
  </div>

  <div id="contentWrapper">
    Content Wrapper
  </div>  

</div>
</body>
</html> 
```

**我的方法：**我给黑色 div 顶部和底部边距自动设置，但它不起作用（对于水平中心 [left 和 right `margin:auto`] 它也起作用）。`margin:auto`只对左右有效吗？

我想知道为什么会这样，我不想要任何其他解决方案，例如：

1.  使用垂直对齐 div 显示内联文本。
2.  以适当的填充或边距显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T07:49:05.023

`margin: auto`不适用于顶部和底部。如果指定了`margin-top: auto`or ，则[它们的使用值为 0](http://www.w3.org/TR/CSS2/visudet.html#inline-replaced-height)。这是[一篇关于如何实现垂直居中](http://www.search-this.com/2008/05/15/easy-vertical-centering-with-css/)的文章。`margin-bottom: auto`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T09:10:28.017

您需要在这里使用一些 jQuery 来计算父容器的高度。

演示 - [http://jsfiddle.net/tQBVy/](http://jsfiddle.net/tQBVy/)

# maven - maven 原型中依赖项的最新版本

> ID：10663307
> 
> 赞同：1
> 
> 时间：2012-05-19T07:39:25.377
> 
> 标签：maven, maven-2, maven-archetype

> **可能重复：**
> [Maven 更新 POM 中的依赖项](https://stackoverflow.com/questions/973081/maven-update-dependencies-in-pom)

我正在尝试为我未来的项目开发一个 Maven 原型。我想知道是否有办法在项目创建期间获取最新版本的依赖项。

# c# - 在新表单实例中显示此表单

> ID：10663312
> 
> 赞同：2
> 
> 时间：2012-05-19T07:39:52.213
> 
> 标签：c#, winforms

我使用“添加新项目”在 C# 中创建了两个表单。Form1 是我的默认打开表单。我正在使用以下代码切换到 form2：

```
Form1 class:
    Form form2= new form2();
                this.Hide();
                form2.Show();  

Form2 class: 
```

我应该怎么做才能再次打开相同的form1而不创建form1的新瞬间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T07:41:47.377

您应该将 this 的一个实例传递给 form2 并`.Show()`在时机成熟时拥有它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T07:49:07.070

一个简单的解决方案可以是模态显示第二个表单，然后在第二个表单关闭时使第一个表单可见，如下所示：

```
 public partial class Form1: Form
  {
    public Form1()
    {
      InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
      Form2 form2 = new Form2();
      this.Hide();
      form2.ShowDialog();
      this.Show();
    }
  }

  public partial class Form2: Form
  {
    public Form2()
    {
      InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
      Close();
    }
  } 
```

以非模态方式进行这项工作留作练习:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T07:47:57.417

当您执行**form2.hide()**时，您实际上是在**隐藏**而不是**破坏**它，因此您创建的实例仍然存在，因此您可以使用它再次显示它

如果您使用**form2.dispose()**那么您必须创建一个新实例

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-19T07:51:44.873

在后面的form2代码中，在构造函数中添加参数

```
Form2(Form form1)
{
   //use form1 object here
   //you can declare a variable of Form1 in Form2 and use it everywhere in the scope of form2
} 
```

然后在初始化form2的对象时：

```
Form form2 = new Form(this);
this.Hide();
form2.show(); 
```

# c++ - 用于在 C++ 中开发图形界面的多平台 IDE

> ID：10663316
> 
> 赞同：-2
> 
> 时间：2012-05-19T07:40:43.337
> 
> 标签：c++, user-interface, ide, cross-platform

我想开始在一些 IDE 中用 C++ 制作图形用户界面，易于学习并且有足够的文档和示例。除了是多平台的，即最终的应用程序可以在 Linux 和 Windows 上运行

有什么建议或经验吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T07:46:20.930

我会推荐 Qt Creator。

Qt 库是多平台的，涵盖了广泛的功能并且有很好的文档记录；IDE 几乎可以在任何地方运行，非常容易设置并且与库很好地集成。

其他开源替代品可能是带有例如 CodeBlocks 的 wxWidgets，但在我看来，它们并没有那么好（在完整性和文档方面），并且您没有与 IDE 进行如此好的集成（同样，根据我的经验在 Windows 上设置 wxWidgets 开发需要一些工作）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T07:44:43.220

您可以使用开源的 Eclipse，它在 Linux/Windows 上运行良好。也有可用的血统文件..

# php - PHP SimpleXml - 检索命名空间子项的属性

> ID：10663318
> 
> 赞同：0
> 
> 时间：2012-05-19T07:40:52.400
> 
> 标签：php, xml, xml-parsing, simplexml, xml-namespaces

我正在解析一个外部 Atom 提要，一些条目有一组命名空间的子项 - 我无法从这些子项中检索属性。缩写示例：

```
$feed = <<<EOD
<feed xmlns="http://www.w3.org/2005/Atom" xmlns:ai="http://activeinterface.com/thincms/2012">
  <entry>
    <title>Some Title</title>
    <ai:image>path/to/some/image</ai:image>
    <ai:ocurrence dateid="20120622" date="Fri, June 22, 2012" time="6:00 pm" />
    <ai:ocurrence dateid="20120720" date="Fri, July 20, 2012" time="6:00 pm" />
  </entry>
</feed>
EOD;

$xml = new SimpleXmlElement($feed);
foreach ($xml->entry as $entry){
  echo $entry->title;
  $namespaces = $entry->getNameSpaces(true);
  $ai = $entry->children($namespaces['ai']);
  echo $ai->image;
  foreach($ai->ocurrence as $o){
    echo $o['date'];
  }
} 
```

除了命名空间子项的属性检索之外的所有内容都可以正常工作 - 如果子项的标记名没有命名空间，则可以正常工作。如果抓取节点值（而不是属性），即使命名空间，它也可以正常工作。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T08:03:19.903

尝试这个

```
 $xml = new SimpleXmlElement($feed);
    foreach ($xml->entry as $entry)
    {

        $namespaces = $entry->getNameSpaces(true);
        $ai = $entry->children($namespaces['ai']);

        foreach ($ai->ocurrence as $o)
        {
            $date=$o->attributes();
            echo $date['date'];
            echo "<br/>";
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T07:49:39.103

不知道为什么，但显然数组访问在这里不起作用......需要属性方法：

```
echo $o->attributes()->date; 
```

# objective-c - NSObject 实现协议上的类别导致未实现的方法警告

> ID：10663319
> 
> 赞同：2
> 
> 时间：2012-05-19T07:41:06.873
> 
> 标签：objective-c, nsobject, objective-c-category

如果我`NSObject`用额外的方法定义协议的子协议，然后定义并实现一个`NSObject`声明符合该协议的类别，我会在编译时收到警告。编译器抱怨我的`NSObject`类别没有实现`NSObject`协议中声明的所有方法。

我不明白为什么会这样。类`NSObject`（in`<Foundation/NSObject.h>`声明它符合`NSObject`协议（并且，冗余地，它实现了这些方法）——这还不够吗？

这里问题的原因是什么？

示例代码 - 如果你编译它，你会看到关于`NSObject (CategoryToImplementMyProtocol)`实现的警告：

```
@protocol MyProtocol <NSObject>
- (void)myMethod;
@end

@interface NSObject (CategoryToImplementMyProtocol) <MyProtocol>
@end

@implementation NSObject (CategoryToImplementMyProtocol)

- (void)myMethod 
{
    NSLog("A la peanut butter sandwiches!");
}

@end 
```

我发现了几个问题来解决这个问题，但所有的答案都是“做这个解决方法！” 多样性，而不是“这是问题的原因”多样性（或者只是完全错误，尽管被接受了......）。我知道我可以解决这个问题。我真的很想了解它*为什么*会失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T07:47:51.583

问题是您`<NSObject>`再次声明采用该协议。协议在 Objective-C 中的工作方式（无论好坏）是类别实现必须实现其接口中指定的所有协议。

此外，在 Objective-C 中，协议一致性是名义上的而不是结构性的。也就是说，对于一个类来说，响应正确的方法还不足以让它采用该协议。

***编辑***：似乎示例代码已更改，我想我的答案不再相关。

# xcode - 为什么 Google Chrome 和 XCode 在他们的搜索框上共享关键字？

> ID：10663321
> 
> 赞同：1
> 
> 时间：2012-05-19T07:41:18.070
> 
> 标签：xcode, macos, google-chrome, search-box

当我通过 Command+F 在 Chrome 中搜索时，相同的关键字出现在 XCode 的搜索框中。
而且当我在 XCode 中使用 Command+F 进行搜索时，Chrome 的搜索框中也会出现相同的关键字。

为什么会这样？
安全吗？
XCode 会在 Chrome 上记录我的搜索历史吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T08:14:03.333

这是正在运行的“查找粘贴板”。Mac OS X 有几个粘贴板（在其他操作系统上称为剪贴板）。一般粘贴板用于剪切/复制/粘贴操作，但也有其他粘贴板用于字体和标尺等。一种是查找粘贴板。支持查找操作的应用程序可以将搜索到的文本放在查找粘贴板上，使其可供其他应用程序使用。实际上，所有应用程序都有一个全局“要搜索的文本”（假设它们支持查找粘贴板）。

我假设 Chrome 的 Command-F 用于在网页内搜索，而不是执行网络搜索（如 Google 搜索），对吧？

就安全而言，这是预期的行为。我想这是一种隐私泄露，尽管您必须信任在您的系统上运行的应用程序，因为它们之间几乎没有保护措施。

Xcode 可能不会记录任何此类内容。

# php - mysql数据库结构网店

> ID：10663327
> 
> 赞同：0
> 
> 时间：2012-05-19T07:42:33.247
> 
> 标签：php, mysql

我正在为我的投资组合网站建立一个简单的网上商店。在这个网上商店有两种（主要）类别：电影和游戏。

当然，这些类别还需要子类别，例如：game_type、game_platform、movie_type、movie_quality。我现在的问题是：最好的方法是什么？

对于我的产品和类别，我现在有 3 个表格：

```
webshop_products (wpID, wpName, wpDescription, wpPrice, wpPicture)
webshop_categories (wcID, wcName)
product_category (wpcID, wpID, wcID) -> this is my join table. 
```

我自己的想法是在表 webshop_categories 中添加两个额外的列：wcType (ENUM 'sub', 'main') 和 wcParent（例如，子类别操作可以将游戏或电影类别 ID 作为父项）

这个解决方案是一个好主意，还是有人有更好的主意？

谢谢和问候埃里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T07:47:03.533

您可以只添加 wcParent 列，该列同时将指向父类别 ID，如果已设置，则自动表示它是子类别 - 不需要额外的 wcType 列。

此外，删除 product_category 中的 wpcID 并将 wpID 和 wcID 设置为主索引。你真的不需要额外的专栏。

# c++ - 关于赋值运算符重载错误

> ID：10663329
> 
> 赞同：0
> 
> 时间：2012-05-19T07:43:21.850
> 
> 标签：c++, copy-constructor

请解释此程序的错误消息..

```
#include <iostream>
using namespace std;
class copyConst
{

    private:
    int someVal;
    public:
    copyConst(const copyConst &objParam)
    {
        someVal = objParam.someVal;
    }
    copyConst()
    {
        someVal = 9;
    }
    copyConst& operator=(const copyConst &objParam)
    {
        if (this == &objParam)
            return *this;

        someVal = objParam.someVal;
        return *this;
        }
    };

int main(int argc, char **argv)
{
    copyConst obj1;
    copyConst obj2(obj1);
    copyConst obj3 = obj1;
    copyConst obj4;
    obj4 = obj1;

    return 0;
} 
```

错误信息：

> gcc -Wall -o "untitled" "untitled.cpp" (在目录：/home/rwik/Documents) untitled.cpp: 在函数'int main(int, char**)': untitled.cpp:53:12:警告：变量 'obj3' 已设置但未使用 [-Wunused-but-set-variable] /tmp/ccUIyRPg.o: In function `__static_initialization_and_destruction_0(int, int)': untitled.cpp:(.text+0x8a): undefined reference to` std::ios_base::Init::Init()' untitled.cpp:(.text+ 0x8f): 未定义引用 `std::ios_base::Init::~Init()' 编译失败。collect2: ld 返回 1 个退出状态

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T07:48:11.047

使用 编译`g++`，而不是`gcc`. 你有 C++ 代码，而不是 C 代码。

它与类代码无关。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-19T08:21:06.600

有两种类型的警告消息。第二个是因为 gcc 中缺少链接标志：（ `gcc -lstdc++ -Wall -o "untitled" "untitled.cpp"`或等效的`g++ -Wall -o "untitled" "untitled.cpp`.

关于未使用变量的第一个警告是因为`obj3`已声明但未在其他任何地方使用的变量。对于这种情况，我使用`(void)obj3;`语句来解决此类警告消息。

# ruby - 每个对象的实例变量在 Ruby 中是唯一的吗？

> ID：10663330
> 
> 赞同：1
> 
> 时间：2012-05-19T07:43:27.997
> 
> 标签：ruby

我在某处读到每个对象的实例变量都是唯一的。

我不知道如何理解那句话。有人可以解释吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T07:59:45.523

我的猜测是，这意味着同一个类的两个实例有它们自己的、非共享的实例变量，即使它们被称为同一个东西。

```
class Dog
  def initialize(name)
    @name = name
  end
end

dog1 = Dog.new('Spot')
dog2 = Dot.new('Rover')

dog1.instance_variable_get "@name" # "Spot"
dog2.instance_variable_get "@name" # "Rover" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T19:21:49.980

ruby 中的变量与 JavaScript 等语言中的变量不同，它不是全局范围的。例如，如果您在 irb 中执行此操作：

```
1.9.3-p125 :036 > def myMethod
1.9.3-p125 :037?>   my_variable = 12
1.9.3-p125 :038?>   end
 => nil 
1.9.3-p125 :039 > myMethod
 => 12 
1.9.3-p125 :040 > my_variable
NameError: undefined local variable or method `my_variable' for main:Object
    from (irb):40
    from /Users/Thoughtworks/.rvm/rubies/ruby-1.9.3-p125/bin/irb:16:in `<main>' 
```

变量 my_variable 不存在于方法之外，因为它不再在范围内。我也可以这样做：

```
1.9.3-p125 :057 > my_variable = 13
 => 13 
1.9.3-p125 :058 > myMethod
 => 12 
1.9.3-p125 :059 > my_variable
 => 13 
```

在这种情况下，即使我在主作用域中命名了 my_variable，但在方法 myMethod 的作用域中存在一个不同的变量，也称为 my_variable。所以在myMethod作用域内给my_variable赋值12不会改变主作用域内的变量，方法作用域内也不存在主变量。

对于一堂课，如果我这样写：

```
class Dog
  attr_accessor :name
  def initialize(name)
    @name = name
  end
end

spot = Dog.new(:spot)
fido = Dog.new(:spot) 
```

然后两者都`spot.name`指向`fido.name`同一个东西——符号`:spot`。但如果我这样做：

```
spot.name = "spot" 
```

那么`fido.name`仍然是`:spot`，并且`spot.name`将会是`"spot"`。这两个`@name`实例变量彼此没有任何关系，如果它们指向相同的值，那么这仅仅是巧合。

因此，每个对象实例变量都是唯一的想法并不意味着它们不能引用相同的东西，而是意味着它们彼此**不同**，无论它们引用什么。

# android - GridView 中的后台共享

> ID：10663333
> 
> 赞同：0
> 
> 时间：2012-05-19T07:43:45.483
> 
> 标签：android, gridview, scroll, imageview, sharing

美好的一天，我的 GridView 有问题。

```
 public View getView(int position, View convertView, ViewGroup parent) {
    ImageView imageView;

    if (convertView == null) {  // if it's not recycled, initialize some attributes
        imageView = new ImageView(mContext);
        imageView.setLayoutParams(new GridView.LayoutParams(85, 85));
        imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
        imageView.setPadding(8, 8, 8, 8);
    } else {
        imageView = (ImageView) convertView;
    }

    imageView.setImageResource(mThumbIds[position]);
    if(LevelActivity.comp[position] == 1)
    { 
        imageView.setBackgroundResource(R.drawable.back_got);
        Bitmap btm;
        BitmapDrawable drawable = (BitmapDrawable) imageView.getDrawable();
        btm = drawable.getBitmap();
        btm = convertColorIntoBlackAndWhiteImage(btm);
    imageView.setImageBitmap(btm); 
    }

    return imageView;
} 
```

这是我的 ImageAdapter 的代码，它在 GridView 中设置图像。如果元素的位置与值为 1 的数组中的位置相同，它将设置具有特殊背景的黑白图像而不是普通图像。一切正常，但是：当我滚动我的 GridView 时，那个特殊的黑白图像开始将它们的背景“共享”到它们右侧的图像。因此，滚动后，我会在每个特殊的黑白元素旁边获得具有特殊背景的普通图像。

希望你有想法，谢谢。

有问题的图片：http: [//i.stack.imgur.com/Hbtwg.png](http://i.stack.imgur.com/Hbtwg.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T09:23:58.590

好的，我有答案了。它非常类似于 random-items-in-GridView 问题。所以我需要做的就是直接在画布上设置背景位图（在 b&w 函数内）。

# php - 在 MYSQL 中更新表后，我需要返回受影响行的主键。

> ID：10663338
> 
> 赞同：0
> 
> 时间：2012-05-19T07:44:13.137
> 
> 标签：php, mysql, database, sql-update

在使用我的 PHP 代码更新 MYSQL 表后，我需要返回受影响行的主键。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T08:00:38.740

在执行以下操作之前，您需要获取主键`UPDATE`：

```
SELECT primary_key_columns FROM my_table WHERE status = 'O';
UPDATE my_table SET status = 'E' WHERE status = 'O'; 
```

但是，如果您有可能`my_table`在两个语句之间更改的并发连接，则第一个语句返回的键的结果可能`SELECT`与第二个语句更新的记录不完全匹配`UPDATE`。

为了防止这种情况，您需要在事务中执行操作（但请注意，事务需要存储引擎的支持 - InnoDB 通常用于此目的）：

```
START TRANSACTION;
SELECT primary_key_columns FROM my_table WHERE status = 'O' FOR UPDATE;
UPDATE my_table SET status = 'E' WHERE status = 'O';
COMMIT; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T07:56:08.560

做你想做的事情的一种方法是在你做更新之前选择带有更新条件的主键。

如果您的查询是

从“表”更新*，其中 Y

您必须执行以下操作：

从“表”中选择“主键”，其中 Y

从 Y 的“表”更新 X

希望这可以帮助！

# javascript - YouTube API - 从 URL 列表中获取视频评级

> ID：10663342
> 
> 赞同：0
> 
> 时间：2012-05-19T07:45:30.447
> 
> 标签：javascript, ajax, jquery, youtube-api

我有 YouTube 视频的 URL 列表。我想使用 YouTube API 来查找他们每个人的用户评分和评分计数。API 提供了一种使用 URL 查找此信息的方法，但仅限于单个视频：[https](https://developers.google.com/youtube/2.0/developers_guide_protocol_video_entries) ://developers.google.com/youtube/2.0/developers_guide_protocol_video_entries 。

我可以发送一堆同步的 AJAX 请求，但这太慢了。我尝试异步发送它们并等待它们全部完成，如下所示：

```
MyObj.prototype.getYTData = function (urls) {

    var self = this,
        requests = 0,
        vids = [];

    $.each(urls, function (i, vidUrl) {

        var id = self.getURLParameter(vidUrl, 'v');
        requests += 1;
        $.ajax({
            type: 'GET',
            url: 'https://gdata.youtube.com/feeds/api/videos/' + id + '?v=2',
            data: { alt: 'jsonc' },
            success: function (data) {

                self.isGood(data.data) && vids.push(data.data);
            },
            complete: function () {
                requests -= 1;
            }
        });
    });

    while (requests) {};
}; 
```

似乎该功能永远挂起。我的猜测是因为我用太多的请求淹没了服务器。我可以在请求之间设置一个小的延迟，但我认为应该有更好的方法来做到这一点。

获取所有 URL 的评级信息的好方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T21:34:42.900

我的解决方案最终使用了 setTimeout 和 jQuery Deferred 对象，因此我可以在请求全部完成后执行代码。幸运的是，Stack Overflow 已经有了一个使用单个请求的[更简单的解决方案。](https://stackoverflow.com/questions/2078006/youtube-data-api-retrieving-multiple-video-entries-by-ids-in-a-single-request)

我最终这样做了：

```
MyObj.prototype.getYTData = function (vidIDs) {

    var IDGroup = $.map(vidIDs, function (id) {
            if (id.indexOf('-') == -1) {
                return id;
            }
            return '"' + id + '"';
        }).join('|');

    $.ajax({
        type: 'GET',
        url: 'https://gdata.youtube.com/feeds/api/videos?v=2&q=' + IDGroup,
        data: { alt: 'jsonc' },
        success: function (data) {

            // Process data
        }
    });
}; 
```

# configuration - ssis中不同包配置的优缺点是什么

> ID：10663343
> 
> 赞同：2
> 
> 时间：2012-05-19T07:46:12.787
> 
> 标签：configuration, ssis

您能否解释一下 SSIS 包中各种配置（xml、环境变量等）的优缺点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T13:29:51.920

[你可以在这里](http://msdn.microsoft.com/en-us/library/ms141682.aspx)得到你自己的结论

但根据我的观点：

在“SQL Server”上，您有一个中央数据库表，可以在其中存储配置条目并在服务器和包之间共享。但是，您需要一种方法来告诉您的包连接哪个服务器来获取配置。

“XML 文件和环境变量”依赖于机器，因此如果您有多个使用同一文件的包，您将拥有多个配置副本，每台机器一个，并且此配置不会集中。

当一个包通过使用执行包任务执行另一个包时，您还可以使用“父包变量配置”。

老实说，我更喜欢“SQL Server”，因为在生产环境中，对开发人员的访问权限非常有限，您通常可以读取数据库，但如果您需要找到 XML 文件，则您无权访问服务器检查一个配置值，您可以简单地在数据库上运行选择，而不是如果您使用更复杂的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T10:26:12.997

SQL Server Integration Services (SSIS) 是用于创建 ETL 包的非常强大的工具。它如此强大的部分原因是它能够使用包配置。包配置允许您在外部存储包所需的信息，以便可以轻松更改信息而无需重新编写包本身。您可以存储连接字符串、变量值、包密码、隔离级别等等。基本上，如果您可以在 SSIS 中设置值，它可能可以存储在包配置中。这使得修改包变得更加容易，例如当它从 QA 转移到生产时，或者当生产服务器的名称更改时。包配置有多种风格，您使用哪一种取决于您的个人需求。此外，每种类型存储数据的方式不同，因此在某些情况下可以保存多个值，而在其他情况下您只能存储一个值。以下是包配置类型的快速细分。

*   XML 配置文件 – 多个值可以存储在磁盘上的 XML 文件中

*   环境变量 - 单个值可以存储在 Windows 环境变量中

*   注册表项 – 单个值可以存储在注册表项中

*   父包变量–父包可以将变量传递给包含配置值的包

*   SQL Server – 多个值可以存储在 SQL Server 上的表中

# php - 如果存在，如何检查多个网址？

> ID：10663348
> 
> 赞同：1
> 
> 时间：2012-05-19T07:47:01.193
> 
> 标签：php, url, hyperlink, fopen

在 StackOverflow 上，我发现了如何检查是否只存在一个 url：

```
if (@fopen($url,'r')){
    echo 'Exist';
}
else {
    echo 'Does not exist';
} 
```

如何将它与数组一起使用，也许与 while 循环一起使用？

这样我就可以检查超过 1 个 URL。

例如，让它可以检查 50 个 URL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T07:49:21.863

只需使用 foreach 循环：

```
foreach ($urlsArray as $url) {
  if(@fopen($url,'r')){
    echo 'Exist';
  }
  else {
      echo 'Doesnt exist';
  }
} 
```

# java - Java中带有斜杠的字符串问题

> ID：10663350
> 
> 赞同：-2
> 
> 时间：2012-05-19T07:47:11.210
> 
> 标签：java, string

我有一个如下的简单代码，当我在“N/A”字符串后面有一个空格时它返回 false。

```
String a = "N/A ";
if((a.trim())=="N/A")
{
 System.out.println("true");
}
else{
 System.out.println("false");
} 
```

如果我将空格删除为“N/A”，则返回 true。我在这里想念什么。我知道我犯了一个愚蠢的错误，无法弄清楚。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T07:50:00.553

首先，不要使用`==`运算符比较字符串。使用`if(a.trim().equals("N/A"))`，它应该有帮助。[在此处](http://www.leepoint.net/notes-java/data/expressions/22compareobjects.html)阅读有关比较 Java 中的对象的示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T07:50:16.607

试试下面...

```
String a = "N/A ";
if(a.trim().equals("N/A"))
{
 System.out.println("true");
}
else{
 System.out.println("false");
} 
```

`==`比较对象并`.equals()`比较值。

看到[这个](http://www.javabeat.net/qna/13-what-is-difference-between-equals-and-/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T07:48:18.377

您是否尝试过使用`equals`比较而不是对象身份？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-19T07:51:14.693

使用 equals() 代替 == 还可以修复 if 条件中的括号问题

# sql - Oracle 11g：在单个 SQLXML 类型中连接的 XQuery 结果

> ID：10663351
> 
> 赞同：2
> 
> 时间：2012-05-19T07:47:18.807
> 
> 标签：sql, oracle, xquery, xmltype, xmltable

当我使用 PL-SQL 运行 XQuery 查询时

```
 SELECT XQUERY('...' RETURNING CONTENT) FROM DUAL 
```

结果总是在包含 SQLXML 字段的单行单列中串联返回。

这对于返回元素序列的查询是不利的，对于返回文本节点序列的查询来说非常讨厌。

有没有办法避免这种连接并为每个返回的项目获取一行？

谢谢，

埃里克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T04:00:25.583

您想使用[XMLTable](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions253.htm#CIHGGHFB)而不是 XQuery。

> XMLTable 将 XQuery 评估的结果映射到相关的行和列。您可以使用 SQL 将函数返回的结果作为虚拟关系表进行查询。

例如：

```
create table customer as
select 1 id, 'Smith'   last_name from dual union all
select 2 id, 'Jackson' last_name from dual union all
select 3 id, 'Peters'  last_name from dual;

SELECT * from XMLTable('
    for $customer in ora:view("customer")/ROW
       return $customer/LAST_NAME'
     columns "last_name" varchar2(4000) path '/LAST_NAME');

last_name
---------
Smith
Jackson
Peters 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T17:06:17.130

为了详细说明 jonearles 的回答，XMLTable 与 XQUERY 一样通用，不同之处在于 XQUERY 返回单个值，而 XMLTable 被视为完整表。

使用 XMLTable，您可以执行以下操作：

```
SQL> select * from XMLTABLE ('declare variable $v as xs:string external; $v, $v' PASSING 'Hello World' as "v") ;

COLUMN_VALUE
--------------------------------------------------------------------------------
Hello World
Hello World 
```

并且：

```
SQL> select * from XMLTABLE ('declare variable $v as xs:string external; <e>{$v}</e>,<e>{$v}</e>' PASSING 'Hello World' as "v") ;

COLUMN_VALUE
--------------------------------------------------------------------------------   
<e>Hello World</e>
<e>Hello World</e> 
```

这正是我想要的。

# javascript - 使用javascript从html中提取元素

> ID：10663352
> 
> 赞同：2
> 
> 时间：2012-05-19T07:47:19.097
> 
> 标签：javascript, android, cordova

假设我在网络上有一个网页，这个页面有很多带有 id 的元素。如何使用 javascript 获取这些元素？我在 jQuery 中使用了这个块：

```
 $.get(websiteUrl, {}, function(results){
    //alert(results); // will show the HTML from anotherPage.html
    console.log($(results).find("bookId").html()); // show "bookId" div in results
    }); 
```

但我得到错误：

```
 XMLHttpRequest cannot load; Origin http://127.0.0.1:8000 is not allowed by Access-Control-Allow-Origin. 
```

实际上，我正在尝试从 Android 上的 Phonegap 应用程序的网页中获取一些数据。任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T07:59:59.643

您可以使用 jsonp 进行跨域 ajax 调用，但不会收到错误或超时回调。jQuery 原生支持 jsonp。 [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/) 理论上是你向页面添加一个脚本标签，其中包含一个包含回调函数名称的精心构造的 url。然后，服务器处理 ajax“请求”，并将答案作为单个参数返回给您的回调函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T07:54:17.267

大多数浏览器都遵守严格的同源策略。这意味着您不能向其他服务器发出 Ajax 请求。虽然您可以绕过它，但对每个客户都做这件事并不实际。

最好的办法是调用服务器端脚本为您获取它，并将结果返回给 JavaScript。

# c# - 如何通过 JavaScript 代码调用 C# Web 服务

> ID：10663357
> 
> 赞同：-2
> 
> 时间：2012-05-19T07:48:15.147
> 
> 标签：c#, javascript, web-services, titanium

我有一个使用 C# 编写的 Web 服务。我想从另一种编程语言（如 JavaScript）调用这些方法。因为我`titanium`在我的移动应用程序中使用，但我找不到调用这些方法的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T11:09:54.917

在[appcelerator 中](http://appcelerator.com)，您可以使用该`HTTPClient`方法

> [钛网。**HTTP客户端**](http://docs.appcelerator.com/titanium/2.0/#!/api/Titanium.Network.HTTPClient)

在该示例中，您将变量更改`url`为您的服务和调用方法所在的端点。调用成功后，您将收到`this.responseText`变量中的传入数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T08:38:16.460

在 Titanium 中，它称为 SOAP，[https://github.com/appcelerator/titanium_mobile/blob/master/demos/KitchenSink/Resources/examples/soap.js](https://github.com/appcelerator/titanium_mobile/blob/master/demos/KitchenSink/Resources/examples/soap.js)

在这里您可以定义 WDSN url 并选择您要调用的方法，然后添加参数。

结果将作为 XML 文件接收

# wpf - WPF：DataGridTemplateColumn 不影响最后一行

> ID：10663359
> 
> 赞同：0
> 
> 时间：2012-05-19T07:48:19.913
> 
> 标签：wpf, wpfdatagrid, bold, datagridtemplatecolumn

我正在使用.net4.0。我有一个 5 列的 DataGrid。我添加了 DataGridTemplateColumn 来为更新和删除添加“U”和“D”按钮。

```
<DataGridTemplateColumn>
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <Button Content="U" ToolTip="Update" x:Name="btnUpdate" Click="btnUpdate_Click"></Button>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                    <DataGridTemplateColumn>
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <Button Content="D" ToolTip="Delete" x:Name="btnDelete" Click="btnDelete_Click"></Button>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn> 
```

我在网格中的最后一行仅用于显示每个列的总值。我不想要网格最后一行中的 2 个 btns。是否可以隐藏最后一行的那些 btns。

我还希望最后一行的所有文本都加粗。

以上这两种情况怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T09:28:37.907

我添加了一个属性并在 DataGridTemplate 中添加了一个触发器，这解决了我的问题。

感谢您的时间和努力。

# git - 如何重新生成未解析的 git 合并文件

> ID：10663361
> 
> 赞同：1
> 
> 时间：2012-05-19T07:48:38.680
> 
> 标签：git, merge

在编辑未合并的文件以解决合并冲突的过程中，我决定从头开始处理一个文件。如何使用标准标记重新生成原始未解析文件。可能有其他文件已经修复和暂存，还有其他文件等待修复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T08:42:52.103

```
git checkout -m <file-name> 
```

# c# - 通过 web 服务返回大字符串时 iis 出错

> ID：10663368
> 
> 赞同：0
> 
> 时间：2012-05-19T07:49:14.300
> 
> 标签：c#, asp.net, web-services, iis, iis-5

我想通过webservice返回一个图像，所以我尝试将数据库中的图像转换为字节，然后从字节转换为base64字符串并将其返回给webservice，我完成了一半但我无法返回整个字符串希望由于字符串大小的一些限制或其他什么？

```
<%@ WebService Language="C#" Class="Service" %>

using System;

using System.Web;
using System.Web.Services;
using System.Web.Services.Protocols;

using System.Collections;
using System.Configuration;
using System.Data;
using System.Data.SqlClient;

using System.Web.Security;
using System.Web.UI;
using System.Web.UI.HtmlControls;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.IO;

[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
// To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 
// [System.Web.Script.Services.ScriptService]
public class Service : System.Web.Services.WebService
{
    public Service () {

        //Uncomment the following line if using designed components 
        //InitializeComponent(); 
    }

    [WebMethod]
    public string IMAGE(string ID)
    {

        SqlConnection conn = new SqlConnection("Data Source=NEWCRISP19;Initial Catalog=masselango;Persist Security Info=True;User");
        conn.Open();
        SqlDataAdapter sdImageSource = new SqlDataAdapter();
        sdImageSource.SelectCommand = new SqlCommand("select ImageData from ImagesStore where ImageId=('" + ID + "')", conn);
        DataSet dsImage = new DataSet();
        sdImageSource.Fill(dsImage);

        byte[] blob = (byte[])dsImage.Tables[0].Rows[0][0];
        String c = Convert.ToBase64String(blob);
        //c = c.Replace(" ", "");
        return c;

    }

} 
```

web.config 未修改。

帮我检索整个 base64 字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T08:04:36.613

我的理解是您已将图像作为二进制存储在数据库中，您现在想检索它。

如果那是您想要的，请检查此链接[插入和检索二进制图像](http://www.aspdotnet-suresh.com/2011/01/how-to-insert-images-into-database-and.html)

# php - DIV的高度自动调节

> ID：10663375
> 
> 赞同：2
> 
> 时间：2012-05-19T07:49:41.487
> 
> 标签：php, css, html

我正在使用 div 的 en css 代码从 mysql 数据库中获取一些值。

它工作正常。但是如果数据库中的值长于 1 行，带有 div 的表就不好看了。

这是我正在使用的代码：

```
 $result = mysql_query("SELECT * FROM boxen ");
    while ($row = mysql_fetch_assoc($result))
    {
    echo '<div class="a naam">';
    echo '<a href="boxen.php?boxid=' .  $row['ID'] . '">' . $row['naam'] . '</a>';
    echo '</div>';

    echo '<div class="a datum">';
    echo $row['datum'];
    echo '</div>';

    echo '<div class="a land">';
    echo $row['land'];
    echo '</div>';

    echo '<div class="a naam">';
    echo $row['starter'];
    echo '</div>';
    } 
```

css 代码调整颜色和宽度。短：如何固定高度？

PS我在stackoverflow上搜索过，但没有找到任何可以帮助我的东西，也许我使用了错误的关键字？

编辑：

```
<div class="inhoud">
<h2>Inhoud van de box: </h2><br />
<div class="header naam">
    Naam product
</div>
<div class="header omschrijving">
    Omschrijving
</div>
<div class="header aantal">
    Aantal
</div>
<div class="header datum">
    Datum toegevoegd
</div>
<div class="header naam">
    Naam toeveoger
</div>
<div class="header datum">
    Datum verwijderd
    </div>
<div class="header naamVerwijderaar">
    Naam verwijdereraar
</div>
<div class="header icon">
    &nbsp;
</div>
<div class="header icon">
    &nbsp;
</div>
<div class="header icon">
    SAMPLE SAMPLE SAMPLE SAMPLE SAMPLE
</div> 
```

这是标题，但它有同样的问题。最后一列将有 2 行，如果我添加另一行，它会变得非常混乱。

和CSS代码：

```
/* Algemeen voor header*/
.header {
    background-color:#4DA0FF;   
    float:left;
    margin-left:4px;
    margin-bottom:4px;
    color:white;

}
/* END HEADER*/
/* ALGEMEEN OVERIZCHT*/
/* naam */
.naam{
width:200px;
height:auto;
}
/* naam die het product er uit heeft gehaald*/
.naamVerwijderaar{
width:210px;
height:auto;

}
/* datum  */
.datum{
width:150px;
height:auto;

}

/* omschrijinvg */
.omschrijving{
    width:200px;
    height:auto;

}
.aantal {
    width:80px;
    height:auto;

}
/* land */
.land{
width:150px;
height:auto;

}
inhoud{
    width:1305px;
} 
```

我不需要这个例子的所有 css 代码！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T13:38:56.713

你想要一张桌子来处理这类事情。

表格并不全是坏事，当用于正确类型的数据（表格数据，即最适合表格的数据类型）时，表格是完全可以接受的。

示例代码：

```
<style type="text/css">
    th {
        background-color: rgb(77, 160, 255);
        margin-left:      4px;
        margin-bottom:    4px;
        color:            rgb(255, 255, 255);
    }
    table caption {
        font-size:   2em;
        font-weight: bold;
    }
</style>
<table>
    <caption>Inoud van de box:</caption>
    <thead>
        <tr>
            <th>Naam product</th>
            <th>Omschrijving</th>
            <th>Antal</th>
            <th>Datum toegevoegd</th>
            <th>Naam toevegoer</th>
            <th>Datum verwijderd</th>
            <th>Naam verwijderd</th>
            <th>&nbsp;</th>
            <th>&nbsp;</th>
            <th>SAMPLE SAMPLE SAMPLE SAMPLE</th>
        </tr>
    </thead>
</table> 
```

# g++ - 使用 g++ 进行分析

> ID：10663378
> 
> 赞同：3
> 
> 时间：2012-05-19T07:50:07.067
> 
> 标签：g++, profile

如何像 Matlab 中的 profile 工具那样对 c++ 代码进行剖析以获取每行代码的调用时间和花费时间？

我尝试使用-fprofile-arcs之类的东西，但它只生成一个代码覆盖率报告，其中可以找到调用时间，但不能找到成本时间。

有人可以帮忙吗？问候。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T07:51:43.163

`g++ -pg`您可以使用（或者`-p`可能甚至`--coverage`; 并且`-Wall`总是有帮助）进行编译，然后使用`gprof`（甚至`gcov`）。你可以学习使用`oprofile`; 阅读有关 GCC[调试选项的更多信息](http://gcc.gnu.org/onlinedocs/gcc/Debugging-Options.html)

# forms - Symfony2.1：CSRF 令牌无效。仅在浏览器中，PHPUnit WebTestCase 可以正常工作

> ID：10663384
> 
> 赞同：0
> 
> 时间：2012-05-19T07:50:53.250
> 
> 标签：forms, symfony, phpunit, csrf, csrf-protection

如何调试为什么在我的所有浏览器中出现**CSRF 令牌无效**错误，但是当我使用功能测试测试相同的表单时它可以工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T11:50:39.057

如果您自定义了表单呈现输入的方式，请检查您是否添加了**{{form_rest(form) }}**，如下例所示。

例子

```
<form action="{{ path('BloggerBlogBundle_contact') }}" method="post" {{ form_enctype(form) }}>
    {{ form_errors(form) }}

    {{ form_row(form.name) }}
    {{ form_row(form.email) }}
    {{ form_row(form.subject) }}
    {{ form_row(form.body) }}

    {{ form_rest(form) }}

    <input type="submit" value="Submit" />
</form> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T06:32:53.360

当我如下评论我的 config.yml 时，一切都开始工作了吗？所以新的问题是：这个配置的注释部分有什么问题？

```
session:
    auto_start:     true
    # cookie_lifetime:   86400
    # cookie_path:       \
    # cookie_domain:     example.com
    # cookie_secure:     true
    # cookie_httponly:   true 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T11:07:35.533

对我来说，从 symfony 2.0.16 升级到 2.1.6 后禁用安全 cookie 解决了这个问题：

```
session:
    cookie_lifetime:   3600
    cookie_path:       \
    cookie_domain:     .%base_domain%
    cookie_secure:     false
    cookie_httponly:   true 
```

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2013-01-18T08:03:45.940

您可以使用 @csrf_exempt 装饰器来免除您必须导入的 csrf 令牌

从 django.views.decorators.csrf 导入 csrf_exempt

然后在你的视图之前写@csrf_exempt

这将正常工作:)

# php - 遍历表以检查已单击哪些复选框

> ID：10663386
> 
> 赞同：0
> 
> 时间：2012-05-19T07:51:14.250
> 
> 标签：php, javascript

我有一个从 mysql 数据库填充的表（在这个阶段只有 8 个条目用于测试）。对于每条记录，我都包含一个名为“访问”的复选框。当用户单击“打印”按钮时，我想遍历表内容并检查每个复选框以查看已选中的复选框，然后从复选框中创建一个数组，其值为 $row[0]，这是每个数据库的 id记录。

```
<table width="auto" border="1px" bordercolor="#999999" id="tbl">
<?php
$query="SELECT * FROM Sales "; //WHERE startdate >= CurDate() ORDER BY startdate ";
$result = @mysql_query($query); 
```

这里还有一些东西......

```
echo "<h2><font color=#000000>Visit&nbsp;<input type=\"checkbox\" id=\"fred[]\"
class=\"chcktbl\" value=\"$row[0]\" onclick=\"myfunct()\" /></font>$row[0]&nbsp;&nbsp;&nbsp;
$row[6]</h2><em><strong><font color = #FF0000>Sale is on $slongdate until $elongdate.
~ Times are $mystime to $myetime</strong></em></td>... 
```

这是我一直在尝试的javascripts...

```
<script type="text/javascript"> 
var visitcount =0;
var mylink =0;

/*    $('.chcktbl').click(function () { 
    visitcount = $('.chcktbl:checked').length;  
    mylink = $('.chcktbl').val();
    alert(mylink+' '+visitcount);
});
*/
function myfunct() {
mylink = document.getElementById('fred[]').value; 
alert('Hi There'+mylink);
} 
```

抱歉，如果我没有正确显示代码。希望有人可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T07:58:55.620

```
<script type="text/javascript">
function checkall_members() {
    var checkbox = document.getElementById("check_all");
    if (checkbox.checked) {
        ///your code
    }
    else {
       ///your code
    }
}
</script> 
```

# java - 如何在速度模板中包含 jsp 页面？

> ID：10663388
> 
> 赞同：1
> 
> 时间：2012-05-19T07:51:15.827
> 
> 标签：java, jsp, velocity

在我的项目中，我在 jsp 中有页眉和页脚，我想将这些页眉和页脚添加到现有项目中，其中页眉和页脚位于速度模板（.vm）中

请帮助我...提前谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T14:33:05.963

我看到的两条路径都需要 VelocityTools。

要么使用 ImportTool 导入两个 jsp 页面。

或者创建一个包含页眉和页脚的小 jsp 文件，并使用 VelocityViewTag 来 #parse('your_template.vm')

# c#-4.0 - 如何配置 Unity 来为 ASP.NET Web API 应用程序解析正确的 HttpControllerContext 实例？

> ID：10663390
> 
> 赞同：1
> 
> 时间：2012-05-19T07:51:28.603
> 
> 标签：c#-4.0, unity-container, asp.net-web-api

假设我有一个使用服务的[ASP.NET Web API](http://www.asp.net/web-api)控制器，该控制器又依赖 HttpControllerContext 来执行一些处理。

```
public class MyApiController : ApiController {

  IMyService _service;

  MyApiController(IMyService service) {
    _service = service;
  }

  public void Post(Resource resource) {
     _service.Process(resource);
  }
}

public interface IMyService {
  void Process(Resource resource);
}

public class MyService : IMyService {
  HttpControllerContext _controllerContext;

  MyService(HttpControllerContext controllerContext) {
    _controllerContext = controllerContext;
  }

  public void Process(Resource resource) {
     // use _controllerContext and process resource
  }
} 
```

创建 MyService 时如何配置[Unity](http://unity.codeplex.com/)以注入 HttpControllerContext 实例？我无法找到一种方法将控制器使用的 HttpControllerContext “注入”到 MyService 的实例中，以便它可以使用它。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-20T07:34:04.050

查看[Mark Seemann 关于如何将 HttpControllerContext 与 Castle Windsor 连接的帖子](http://blog.ploeh.dk/2012/04/19/WiringHttpControllerContextWithCastleWindsor.aspx)。Unity 应该类似地工作。

# ruby-on-rails - Michael Hartl 的 RoR 教程第 3 章 rails generate integration_test 什么都不做

> ID：10663395
> 
> 赞同：2
> 
> 时间：2012-05-19T07:51:52.240
> 
> 标签：ruby-on-rails, railstutorial.org

我是 Ruby on Rails 的新手，我正在关注 Michael Hartl 的 Ruby on Rails 教程。我在测试驱动开发的第 3 章。当我运行命令时

rails 生成 integration_test static_pages

它什么也不做。没有错误，也没有创建规范文件。我已经使用 railsinstaller 安装了 rails。

接下来做什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-29T21:32:19.823

这是一个简单的问题。将 rspec-rails 放入 gemfile 的开发和测试组中：

```
group :development, :test do
  gem 'rspec-rails'
end 
```

然后捆绑，您将被设置。当您运行 rails g integration_test 时，它现在将生成测试文件。原因是 rspec-generators 仅在 gem 也在开发组中时才暴露（而不是仅在测试组中。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T08:31:06.897

我不确定为什么它不为您生成文件。当我尝试它时它起作用了。

只生成一个文件：

```
require 'test_helper'

class StaticPagesTest < ActionDispatch::IntegrationTest
  # test "the truth" do
  #   assert true
  # end
end 
```

进去`test/integration/static_pages_test.rb`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T15:11:25.220

不知道为什么你不会得到任何错误。我必须使用

```
bundle exec rails generate integration_test static_pages 
```

让它工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T13:06:44.023

我有同样的问题（即没有错误，也没有创建规范文件）并且 EricM 的解决方案对我不起作用。我在 spec/requests/static_pages_spec.rb 中手动创建了以下文件，它似乎有效（我必须在 spec 中创建 requests 目录）：

```
require 'spec_helper'

describe "Static pages" do

  describe "Home page" do

    it "should have the content 'Sample App'" do
      visit '/static_pages/home'
      page.should have_content('Sample App')
    end
  end
end 
```

这与本书清单 3.9 中使用的代码相同：[http ://ruby.railstutorial.org/chapters/static-pages#sec:TDD](http://ruby.railstutorial.org/chapters/static-pages#sec:TDD)

# javascript - 将特定的 SaveAs 编写为 Google 扩展程序

> ID：10663400
> 
> 赞同：0
> 
> 时间：2012-05-19T07:52:41.413
> 
> 标签：javascript, json, image, google-chrome-extension, save

我是**Google Extension Conding**的新手，我有特定的任务要处理：

网页包含`<img>`.`<a></a>`

*   IMG 的 SRC 在文件名的末尾有随机的名称和大小，例如：`<img src="omnomnom_1024x768.jpg">.`
*   `<a>`肯定包含href。

我需要这样的扩展工作：

1.  当我将光标移到图像上方时，我需要右键单击它，按“另存为 Omnomnom”。
2.  浏览器在光标下打开图像，但大小不同（我看到它就像 Chorme opens new tab with just rewrighting filename to，比方说，`"omnomnom_800x600.jpg"`）
3.  出现图像 DLed SaveAs 对话框后，输入文件名我希望保存此文件（例如 1.jpg），扩展名还会在同一目录中生成一个与 jpg 同名的 TXT 文件（例如 1.txt）和它必须包含一个“href”来自`<a>`（在标签`<img src="omnomnom_1024x768.jpg">`之间）。`<a>`

请帮忙。我从 manifest.json 开始，迈出了第一步，但停留在第二步

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T20:42:19.263

出于安全考虑，您不能从页面或扩展名下载或写入文件。只有用户可以。扩展程序不会知道用户选择了哪个文件夹。显示另存为对话框后，Chrome 不会触发脚本。

如果您必须访问文件系统，您应该寻找一个插件来完成它。Flash 在这件事上很受欢迎。

# actionscript-3 - 在 eventListener 之后更新变量

> ID：10663401
> 
> 赞同：0
> 
> 时间：2012-05-19T07:53:14.757
> 
> 标签：actionscript-3, event-listener

我使用 FileReference 从用户那里读取文件。我有一个变量，我想用所选文件的内容对其进行初始化。我用 setter 和 getter 创建了一个 Model 类。虽然这并没有真正起作用，因为它会抛出一个错误，告诉我已到达文件末尾。如何使用文件更新变量？谢谢你。

```
public class Main extends Sprite 
{
    public var fr:FileReference;
    private var _model:Model;
    private var button:Sprite;

    public function Main():void 
    {   
        _model = new Model();
        _model.addEventListener(Model.VALUE_CHANGED, fileLoaded);
        trace(_model.getVariable());
    }
    protected function loadClicked(e:Event):void
    {
        fr = new FileReference();
        fr.addEventListener(Event.SELECT, fileSelected);
        fr.browse([new FileFilter("JSON Files (*.json)", "*.json")]);
    }
    public function fileSelected(event:Event):void 
    {
        fr.addEventListener(Event.COMPLETE, fileLoaded);
        fr.load();
    }
    public function fileLoaded(event:Event):void
    {
        try
        {
            var content:ByteArray = fr.data;
            _model.setVariable(content.readUTFBytes(content.length));
        }
        catch (e:Error)
        {
            trace("Error");
        }
    }
}

public class Model extends EventDispatcher
{
    public static const VALUE_CHANGED:String = "value_changed";
    private var variable:String;
    public function Model() :void
    {

    }
    public function setVariable(newVar:String):void
    {
        variable = newVar;
        this.dispatchEvent(new Event(Model.VALUE_CHANGED));
    }
    public function getVariable():String {
        return variable;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T10:35:37.140

读取 utf 字节时使用“content.bytesAvailable”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T10:39:46.683

你有一个错误：

```
_model.addEventListener(Model.VALUE_CHANGED, fileLoaded); 
// ...
fr.addEventListener(Event.COMPLETE, fileLoaded); 
```

请注意，这两个事件触发相同的处理程序。
这显然不是你想要的。

顺便说一句，虽然调用`readUTFBytes()`新加载`ByteArray`是好的（因为位置最初为零），但通常`position`在读取之前设置好。只是为了保持清楚。

```
var content:ByteArray = fr.data;
content.position = 0;
_model.setVariable(content.readUTFBytes(content.length)); 
```

您的代码的更正版本：

```
package 
{
    import flash.display.Sprite;
    import flash.events.Event;
    import flash.events.MouseEvent;
    import flash.net.FileFilter;
    import flash.net.FileReference;
    import flash.utils.ByteArray;

    [SWF(width="800", height="600")]
    public class Main extends Sprite 
    {
        public var fr:FileReference;
        private var _model:Model;
        private var button:Sprite;

        public function Main():void 
        {   
            _model = new Model();
            _model.addEventListener(Model.VALUE_CHANGED, valueChanged);
            stage.addEventListener(MouseEvent.MOUSE_DOWN, loadClicked);
            trace(_model.getVariable());
        }

        protected function valueChanged(event:Event):void
        {
            trace(_model.getVariable());
        }
        protected function loadClicked(e:Event):void
        {
            fr = new FileReference();
            fr.addEventListener(Event.SELECT, fileSelected);
            fr.browse([new FileFilter("JSON Files (*.json)", "*.json")]);
        }
        public function fileSelected(event:Event):void 
        {
            trace(event.type);
            fr.addEventListener(Event.COMPLETE, fileLoaded);
            fr.load();
        }
        public function fileLoaded(event:Event):void
        {
            trace(event.type);
            try
            {
                var content:ByteArray = fr.data;
                content.position = 0;
                _model.setVariable(content.readUTFBytes(content.length));
            } catch (e:Error) {
                trace("Error");
            }
        }
    }
} 
```

# excel - 对象方法失败，缺少公式

> ID：10663404
> 
> 赞同：0
> 
> 时间：2012-05-19T07:54:35.277
> 
> 标签：excel, vb6

我在 vb6 中编写了一个代码，可以打开现有的 excel 文件并计算工作表内的值。

我遇到的问题：“打开”的 excel 上缺少“MDURATION”公式；但是，我检查了独立的 ms excel 实际上有那个公式，所以我不知道当通过 vb 代码（已经是 .exe 形式）打开一个 excel 文件时，它无法识别该函数。我在 2 台电脑上遇到了这个错误，虽然在我测试过的 3 台电脑上没有问题。

我熟悉的解决方案：我在输入公式的代码之前添加了这个：

```
AddIns("Analysis ToolPak").Installed = False
AddIns("Analysis ToolPak").Installed = True 
```

它似乎在我的其他程序上工作得很好，但是在这个特定的程序上，这似乎没有效果。

另外，我在这部分遇到了一个运行时错误 1004: Method of Object Failed：

```
Range("I" & iCtrRow & "").NumberFormat = "#,##0.00000" 
```

我不确定是什么导致了错误。

非常感谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T10:05:38.003

> 另外，我在这部分遇到了一个运行时错误 1004: Method of Object Failed：

如果是 vb6，那么您需要指定完整的参考。例如。

```
Private Sub Sample()
    Dim oXLApp As Object, oXLWB As Object, oXLSht As Object
    Dim iCtrRow As Long

    '~~> Establish an EXCEL application object
    On Error Resume Next
    Set oXLApp = GetObject(, "Excel.Application")

    If Err.Number <> 0 Then
        Set oXLApp = CreateObject("Excel.Application")
    End If
    Err.Clear
    On Error GoTo 0

    oXLApp.Visible = True

    '~~> Open the relevant file
    Set oXLWB = oXLApp.Workbooks.Open("C:\Book1.xls")

    '~~> Change (1) to the relevant sheet
    Set oXLSht = oXLWB.Worksheets(1)

    iCtrRow = 1

    '~~> iCtrRow
    oXLSht.Range("I" & iCtrRow).NumberFormat = "#,##0.00000"
End Sub 
```

如果你是在 VBA 中做的，它会是这样的

```
Private Sub Sample()
    Dim oXLWB As Workbook, oXLSht As Worksheet
    Dim iCtrRow As Long

    '~~> Open the relevant file
    Set oXLWB = Workbooks.Open("C:\Book1.xls")

    '~~> Change (1) to the relevant sheet
    Set oXLSht = oXLWB.Worksheets(1)

    iCtrRow = 1

    '~~> iCtrRow
    oXLSht.Range("I" & iCtrRow).NumberFormat = "#,##0.00000"
End Sub 
```

关于分析工具库，您能否显示有关如何激活它并使用“MDURATION”公式的确切 vb6 代码。

# linux - 在现有环境中使用的 linux 发行版

> ID：10663405
> 
> 赞同：0
> 
> 时间：2012-05-19T07:54:56.080
> 
> 标签：linux, unix

在工作中，我被迫使用旧版本的 RedHat 企业版。这对于大多数用途来说是可以的，但有些应用程序我*真的*想使用更新的版本（vim、ctag、git、tmux 等）。

由于我不是系统上的 root，我通过创建一个“myroot”文件夹来解决这个问题，我在其中安装了我需要的所有应用程序和库。为了激活这些，我设置了 PATH、LD_LIBRARY_PATH、PKG_PATH（和其他）环境变量。

这工作正常，我的系统管理员对解决方案很满意（这对他来说当然没有额外的工作）。问题是我想要越来越多的具有更多依赖项的要求苛刻的应用程序，这使得该解决方案难以维护。

该系统是围绕一组 shell 脚本构建的，但我正在考虑将其转换为 bitbake 文件。

我现在的问题是是否存在已经满足我需求的现有工具/发行版。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T09:34:32.747

您可以尝试使用[pkgsrc](http://www.netbsd.org/docs/software/packages.html)。它所做的几乎与您一直在做的一样，但会为您管理依赖项。

（另请参阅[http://www.netbsd.org/docs/pkgsrc/faq.html#non-root-pkgsrc](http://www.netbsd.org/docs/pkgsrc/faq.html#non-root-pkgsrc)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T11:47:39.987

Kristof 推荐的替代方案`pkgsrc`是[Nix](http://nixos.org/nix/)包管理器。它以纯粹的功能方式构建和安装包 - 每个用户都获得一个仅包含他们选择的包的隔离环境，并且不同版本的包及其依赖项彼此隔离，因此您可以保证更新不会破坏现有的软件。

目前没有 RHEL 的预构建版本，但我正在更新上游规范文件，并将在接下来的几周内将其提交给 Fedora 和 RHEL 的 EPEL 存储库。您使用的是哪个 RHEL 版本，所以我可以确保它在那里可用？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T11:55:18.517

您可以在 RedHat 或其他地方运行虚拟机吗？例如，来自[这些](http://www.oracle.com/technetwork/server-storage/virtualbox/downloads/index.html)包的[VirtualBox](http://VirtualBox.org)。你可以安装任何东西，从 Ubuntu 到像[Arch Linux](http://archlinux.org)这样更轻量级的东西。

在工作中，我在 VirtualBox Ubuntu 来宾中进行所有开发。稳定、快捷、方便。

# android - Android XmlPullParser 解析 asx 文件

> ID：10663408
> 
> 赞同：0
> 
> 时间：2012-05-19T07:55:20.927
> 
> 标签：android, xmlpullparser

这是我第一次尝试解析 xml 文件，所以我需要一些帮助来了解如何从我的 android 应用程序中的 xml 字符串中获取我需要的所有信息。这是我的 xml 字符串：

```
<ASX VERSION="3.0"><TITLE>Hits80and90.Com</TITLE><ENTRY>        <TITLE>Hits 80s and 90s</TITLE>       <REF HREF= "http://server-uk3.radioseninternetuy.com:11168"/>      <AUTHOR>Hits80and90.Com</AUTHOR>      <Abstract>The Best Music On The Web</ABSTRACT>       </ENTRY></ASX> 
```

如何获取`<ENTRY>`标题、链接等标签中的所有信息？

感谢您提供任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T11:24:02.060

这是您可以用来解析 XML String 的内容：

```
import java.io.IOException;
import java.io.StringReader;

import org.xmlpull.v1.XmlPullParser;
import org.xmlpull.v1.XmlPullParserException;
import org.xmlpull.v1.XmlPullParserFactory;

import android.util.Log;

public class AsxParser {

    XmlPullParser xmlpullparser;

    public void AscParser(){

    }

    public void parsing(String url){
        try {
            XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
            factory.setNamespaceAware(true);
            xmlpullparser = factory.newPullParser();
            xmlpullparser.setInput(new StringReader(url));

            int eventType = 0;  
            try {  
                eventType = xmlpullparser.getEventType();  
            } catch (XmlPullParserException e) {  
                e.printStackTrace();  
            }  
            while (eventType != XmlPullParser.END_DOCUMENT) {  

                parseTag(eventType);  
                try {  
                    eventType = xmlpullparser.next();  
                } catch (XmlPullParserException e) {  
                    e.printStackTrace();  
                } catch (IOException e) {  
                    e.printStackTrace();  
                }  
            }

        }catch(Exception e){
            e.printStackTrace();
        }
    }

    void parseTag(int event){  

        switch (event) {  

        case XmlPullParser.START_DOCUMENT:  
            Log.i("","START_DOCUMENT");  
            break;  

        case XmlPullParser.END_DOCUMENT:  
            Log.i("","END_DOCUMENT");  
            break;  
        case XmlPullParser.START_TAG:  
            Log.i("","START_TAG : "+xmlpullparser.getName());  
            Log.i("","Attribute Name : "+xmlpullparser.getAttributeValue(null,"HREF"));  

            break;  

        case XmlPullParser.END_TAG:
            Log.i("","END_TAG : "+xmlpullparser.getName());
            break;

        case XmlPullParser.TEXT:
            Log.i("","TEXT");
            String output = xmlpullparser.getText();  
            Log.i("valuee : ",""+output);  
            break;  
        }  

    }  

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T08:23:04.313

您可以使用 sax 解析器，我编写了一小段代码来向您展示如何获取条目中的标题。我没有测试它，但我认为它会帮助你用 sax 解析 XML 文件。

这里的代码：

```
import javax.xml.parsers.SAXParserFactory;
import org.xml.sax.Attributes;
import org.xml.sax.SAXException;
import org.xml.sax.helpers.DefaultHandler;

public class SaxParserContent {

public static void parse(String data) {

    SAXParserFactory factory = SAXParserFactory.newInstance();
    SaxParserContent.HandlerContent handler = new HandlerContent();
    try {
        SAXParser saxParser = factory.newSAXParser();
        saxParser.parse(new InputSource(new StringReader(data)), handler);

    } catch (Throwable err) {
    }
}

public static class HandlerContent extends DefaultHandler {

    protected boolean inEntry = true;
    protected boolean inTitle = true;
    protected String title;

    @Override
    public void startElement(String uri, String localName, String qName, Attributes attributes) throws SAXException {
        if (localName.equals("ENTRY")) {
            inEntry = true;
        }
        if (inEntry == true && localName.equals("TITLE")) {
            inTitle = true;
        }
    }

    @Override
    public void endElement(String uri, String localName, String qName) throws SAXException {
        if (localName.equals("ENTRY")) {
            inEntry = false;
        }
        if (inEntry == true && localName.equals("TITLE")) {
            inTitle = false;
        }
    }

    @Override
    public void characters(char[] ch, int start, int length) throws SAXException {
        if (inEntry == true && inTitle == true) {
            title = new String(ch);
        }
    }

    public String getTitle() {
        return title;
    }
} 
```

}

祝你好运 ！

# mysql - 如何提醒/查看登录 mysql

> ID：10663411
> 
> 赞同：0
> 
> 时间：2012-05-19T07:56:01.867
> 
> 标签：mysql, logging, alert

这是非常基本的 MySQL 问题。

我正在编写 MySQL 程序，使用 MySQL 工作台，我想对其进行测试，但我不知道如何在屏幕上打印警报或登录。

我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T09:25:43.627

您可以简单`SELECT 'message'`地`message`出现在 MySQL Workbench 中。

# c# - 结合 JQuery Click() 和 C# Button OnClick() 事件

> ID：10663412
> 
> 赞同：2
> 
> 时间：2012-05-19T07:56:03.210
> 
> 标签：c#, jquery, asp.net, http-post, jquery-post

伙计们，我这里有一个情况，

我有一个 HTTP 处理程序（**InsertMap.ashx**）来将数据保存到数据库（表 1），我正在使用 JQuery 调用该方法，如下所示

```
 $('a#AnchSaveData').click(function (e) {
        e.preventDefault();
        $('#mapcodeimage').attr('src', $("#wPaint").wPaint("image"));
        $('#mapcode').val($('#chartdata').html());
        $.post("../InsertMap.ashx", $("form").serialize(), insertCallback);
    }); 
```

我还有另一种 C# 方法 (BtnUpdateDiagnosis_Click) 将其他一些值提交到数据库 (表 2)，如下所示

```
protected void BtnUpdateDiagnosis_Click(object sender, EventArgs e)
    {
        if (HfContainer.Value != null)
        {
            ObjPatient.UpdateDiagnosis(TxtChiefComplaints.Text.Trim(), TxtFindings.Text.Trim(), TxtPrecaution.Text.Trim(), TxtDiagnosis.Text.Trim(), TxtManagementPlan.Text.Trim(), Request.Cookies["UserID"].Value, HfContainer.Value, DdlTherapist.SelectedValue);
            Diagnosis();
        }
        else
        {
            Response.Redirect(ObjFunction.GetSeoSpecificURL("RegisterPatient"));
        }
    } 
```

我需要的是，我需要在单个 CLICK 事件中包含这两种方法，**C# Button OnClick**或**JQuery Click()**

如何将这两者结合起来？请帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T09:49:18.857

```
 $('a#AnchSaveData').click(function (e) {
            e.preventDefault();
            $('#mapcodeimage').attr('src', $("#wPaint").wPaint("image"));
            $('#mapcode').val($('#chartdata').html());
            $.post("../InsertMap.ashx", $("form").serialize(), function (data) {
                insertCallback();

                $('#BtnUpdateDiagnosis').trigger('click');
            });
        });

//Or 

            $('a#AnchSaveData').click(function (e) {
                if (!$(this).hasClass('InsertMapProcess')) {
                    $(this).addClass('InsertMapProcess');
                    e.preventDefault();
                    $('#mapcodeimage').attr('src', $("#wPaint").wPaint("image"));
                    $('#mapcode').val($('#chartdata').html());
                    $.post("../InsertMap.ashx", $("form").serialize(), function (data) {
                        insertCallback();

                        $('#BtnUpdateDiagnosis').trigger('click');
                    });
                }
            }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T08:05:47.800

jQuery 在浏览器中运行，C# 在服务器上运行。要将这些组合在一起，您需要选择是从浏览器还是从服务器发生，然后将其余参数移到那里。由于您有名为“Diagnosis”和“Patient”的变量，它们可能附加了其他可怕的词，如 HIPAA 和 PCI，我想说您可能希望让 jQuery 填充表单变量，并让按钮单击获取这些详细信息并转发将其放到 ashx 上，以避免将数据泄漏到浏览器中。

# php - 如何打印所有朋友的名字？

> ID：10663413
> 
> 赞同：-1
> 
> 时间：2012-05-19T07:56:08.037
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

我目前正在使用 JS SDK 和 PHP SDK。我需要一种简单的方法来显示所有朋友的名字和朋友的照片。

我可以使用这个来显示图片：

```
https://graph.facebook.com/zuck/picture 
```

但我不知道如何显示名称。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T08:17:09.777

调用图形 api 并打印响应，

```
FB.api('/me/friends/?access_token='+accessToken, function(response) {
    for (var i=0, l=response.data.length; i<l; i++) {
        var friend = response.data[i];
        var friends = friend.name;
        console.log(friends);
    }
}); 
```

也可以只取回必填字段而不是所有用户对象，

```
 FB.api('/me/friends/?fields=name&access_token='+accessToken, function(response) {
        for (var i=0, l=response.data.length; i<l; i++) {
            var friend = response.data[i];
            var friends = friend.name;
            console.log(friends);
        }
    }); 
```

**编辑**

使用 jQuery，您还可以使用 append() 打印名称和图像：

```
FB.api('/me/friends/?fields=name,id&access_token='+accessToken, function(response) {
    for (var i=0, l=response.data.length; i<l; i++) {
        var friend = response.data[i];
        var content = friend.name+'<br>'
                    + '<img src="//graph.facebook.com/'+friend.id+'/picture"/><br>';
        $('#container').append(content);
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T08:00:24.193

`https://graph.facebook.com/me/friends?access_token=the_token`将以 JSON 格式提供您的朋友列表。

[参考](https://developers.facebook.com/docs/reference/api/)这个。您可以单击“朋友”链接查看输出，但请注意 API 文档页面使用的 access_token**即将过期**。

# wordpress - 哪个是wordpress移动版网站的最佳插件？

> ID：10663415
> 
> 赞同：0
> 
> 时间：2012-05-19T07:56:11.253
> 
> 标签：wordpress, mobile-website

我正在使用 pc 版和移动版的 wordpress 开发一个商业网站。我想使用一个插件来创建移动网站。我为此目的找到了很多插件，但我正在修复我应该使用什么插件。这真的很令人困惑。

我找到了 mobify、WPTouch、Mobilepress、Mofuse、WPTap、Mobile smart pro

请给我你自己的合理意见。在此先感谢

编辑：

我再次需要一个吸引人的良好界面。那么什么插件应该适合它呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T21:06:59.383

[WPtouch](http://wordpress.org/extend/plugins/wptouch/)是迄今为止使用最多和更新最多的。它有免费版本，但也有一些功能的专业版。它将您的 WordPress 网站转换为类似应用程序的主题，而无需修改一行代码，并在管理面板上提供了许多关于使用、外观和性能的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T19:51:18.737

哪个插件不使用自己的广告或链接？请告诉我。我认为 wptouch 使用广告，Wapple 在移动设备中使用其横幅，Mobilepress 将主页显示为移动设备，甚至是计算机上的任何人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T12:23:15.720

我还希望将我的 Wordpress 网站转换为一个移动友好的网站，在那里我遇到了 DudaMobile 的 Wordpress 移动网站构建器。它适用于所有 wordpress 主题。它包含三个简单的步骤——安装 dudamobile wordpress 插件、自定义您的移动网站或使用网站编辑器并发布！绝对令人惊叹.. 感谢 DudaMobile DudaMobile 的 wordpress 移动网站构建器是使您的网站对移动设备友好的好方法。您需要做的就是下载并安装插件，自定义您的网站并发布！我只是喜欢它。[它很简单，容易 - 不需要编码..这是像我这样的非编码人员喜欢这个插件的一件好事 :) 检查一下： http](http://wordpress.org/extend/plugins/mobile-website-builder-for-wordpress-by-dudamobile) ://wordpress.org/extend/plugins/mobile-website-builder-for- [wordpress-by-dudamobile](http://wordpress.org/extend/plugins/mobile-website-builder-for-wordpress-by-dudamobile)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-27T03:57:41.820

[http://wpeasymobile.com](http://wpeasymobile.com) 是一个很好的解决方案，可以将您当前的 Wp 安装转换为适合移动设备的版本。有一个免费版本 [http://wpeasymobile.com/free-version/](http://wpeasymobile.com/free-version/) 完整版本非常灵活，值得一看

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T01:33:20.470

最后，我使用“WP Mobile检测器”来实现它。它是基于jquery移动框架的主题，完全可以定制。尽管有一些问题。它对我有用。:) 谢谢大家..

# ruby-on-rails - 为什么我在 Mac OS Lion 上收到此错误？

> ID：10663420
> 
> 赞同：0
> 
> 时间：2012-05-19T07:56:53.053
> 
> 标签：ruby-on-rails, ruby

我不知道发生了什么，但我为 OS lion 下载了 Xcode，但我被卡住了

```
Building native extensions.  This could take a while...
ERROR:  Error installing rails:
    ERROR: Failed to build gem native extension.

/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby extconf.rb
mkmf.rb can't find header files for ruby at /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/ruby.h

Gem files will remain installed in /Library/Ruby/Gems/1.8/gems/json-1.7.3 for inspection.
Results logged to /Library/Ruby/Gems/1.8/gems/json-1.7.3/ext/json/ext/parser/gem_make.out
Jung-Hyun-Jeons-MacBook-Pro:~ peterjeon$ rails -v
Rails is not currently installed on this system. To get the latest version, simply type:

$ sudo gem install rails

You can then rerun your "rails" command. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T08:21:49.197

我建议使用 RVM，它是一个 Ruby 版本管理器。并使用 Ruby 的最新版本。

使用这个单一的命令行安装 RVM：

```
curl https://raw.github.com/wayneeseguin/rvm/master/binscripts/rvm-installer | bash -s stable 
```

不要以 root 身份安装它（以避免出现问题），除非您知道自己在做什么。

安装完成后，安装 Ruby: `rvm install 1.9.3`.

然后使用您安装它的版本作为默认版本：`rvm use 1.9.3 --default`.
（如果您不使用`--default`前缀，则每次要使用 Ruby 时都必须运行该命令）。

希望对你有帮助，祝你好运！

# objective-c - 活动监视器中剩余的 QTKitServer

> ID：10663421
> 
> 赞同：1
> 
> 时间：2012-05-19T07:57:23.637
> 
> 标签：objective-c, cocoa, memory-management, qtkit

我有一个简单的代码块，我在其中读取电影的大小以获取宽度。

```
BOOL isHD;
if ([[NSFileManager defaultManager] fileExistsAtPath: filePath]) {
    QTMovie *movie = [QTMovie movieWithFile: filePath error: nil];
    NSValue *movieSize = [movie attributeForKey:QTMovieNaturalSizeAttribute];
    int width = [movieSize sizeValue].width;
    if (width > 1200)
        isHD = YES;
} 
```

我的问题是，在读取此代码后，我在活动监视器中留下了一个“QTKitServer-（PID）”进程，直到我退出我的应用程序才会消失。我以为“电影”会自动上映……我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T08:09:10.297

别担心。此过程是 QuickTime X 的一个实现细节，因此您无需负责清理它。你的代码是正确的。

QuickTime 假定您将再次需要此过程的服务并保留它。保持这个过程不做任何事情而不是为每个请求启动一个新过程可能要便宜得多。

# android - Android：单击webView项目时如何避免闪烁效果

> ID：10663423
> 
> 赞同：1
> 
> 时间：2012-05-19T07:58:06.633
> 
> 标签：android, webview

我在 Android 应用程序的 webView 中有一个 jqplot 图表；当用户单击图表时，会出现“闪光”效果，并且所有图表都会被选中。有没有办法避免这种影响？

# android - 怎么处理 Android TextView 中的标签

> ID：10663425
> 
> 赞同：1
> 
> 时间：2012-05-19T07:58:16.640
> 
> 标签：android, html, youtube, textview

我在`TextViews`里面`ListView`，每个都`TextView`从函数中接收它的文本，我该`Html.fromHtml`如何处理`<embed>`标签来观看 YouTube 视频`TextView`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T08:02:34.120

您不能 -`TextViews`仅支持简单格式的一小部分`HTML`，例如`<b>`和`<i>`.

您需要使用[WebView](http://developer.android.com/reference/android/webkit/WebView.html)来处理复杂的内容。

# jquery - jQuery在列表中追加内容

> ID：10663426
> 
> 赞同：0
> 
> 时间：2012-05-19T07:58:22.310
> 
> 标签：jquery, append

嗨，我正在从事一个项目，单击图像将生成有关单击图像的摘要。大约有 50 张图片可以点击。我想将摘要附加到列表中，并且我想对其进行过滤，这样如果我点击两次图像就不会出现多个附加。

这是html的代码

```
 <div id="imageset">
       <img id="001" class="swatch" src="1.jpg" title="swatch 1" bigimage="1b.jpg"/>
       <img id="002" class="swatch" src="2.jpg" title="swatch 2" bigimage="2b.jpg"/>
       <img id="003" class="swatch" src="3.jpg" title="swatch 3" bigimage="3b.jpg"/>
       <img id="004" class="swatch" src="4.jpg" title="swatch 4" bigimage="4b.jpg"/>
       ....
    </div>
    <ul id="summary">
    </ul> 
```

这是jQuery代码

```
$("#001").click(function(){
   this.t = this.title;
   this.title = "";
   this.b = this.bigimage;
   this.bigimage = "";
   $("ul#summary").append("<li><div id='t001'>"+this.t+"</div></br><img id='b001' src="+this.b+"/></li>");
 });
$("#002").click(function(){
   this.t = this.title;
   this.title = "";
   this.b = this.bigimage;
   this.bigimage = "";
   $("ul#summary").append("<li><div id='t002'>"+this.t+"</div></br><img id='b002' src="+this.b+"/></li>");
 });
$("#003").click(function(){
   this.t = this.title;
   this.title = "";
   this.b = this.bigimage;
   this.bigimage = "";
   $("ul#summary").append("<li><div id='t003'>"+this.t+"</div></br><img id='b003' src="+this.b+"/></li>");
 });
 ........ 
```

它一直在继续......有没有办法简化这些代码？如果是这样，我如何添加 if 和 else 语句以过滤掉内容是否已附加？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T08:10:18.703

您可以在单击图像时向图像添加一个类，这样您就可以设置一个条件以避免附加两次相同的信息。而且您可以轻松地使您的代码更短：

```
$('#imageset img').click(function(){
    if(!$(this).hasClass('clicked')){
        var id = $(this).attr('id');
        $('ul#summary').append('<li><div id="t' + id +  '">'+this.title+'</div></br><img id="b' + id  + 'src="+this.bigimage+"/></li>');
        $(this).addClass('clicked');
    }
}); 
```

另外，我认为不允许以数字开头的 ID。

**编辑：** [HTML 中 id 属性的有效值是什么？](https://stackoverflow.com/questions/70579/what-are-valid-values-for-the-id-attribute-in-html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T08:12:44.520

首先不要使用以数字开头的 id，某些浏览器会遇到问题，并且它不是有效的 HTML。

我会这样写JavaScript：

```
$("#imageset .swatch").click(function(){
   this.t = this.title;
   this.title = "";
   this.b = this.bigimage;
   this.bigimage = "";
   if ($('#sum_' + this.id).length === 0) {
      $("ul#summary").append("<li><div id='sum_" + this.id + "'>"+this.t+"</div></br><img id='img_" + this.id + "' src="+this.b+"/></li>");
   }
}); 
```

它的作用是检查 DOM 如果之前没有添加摘要，然后添加它，否则它不会添加它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T08:15:31.747

如果您坚持不希望使用 AJAX 请求使用[jQuery GET 请求](http://api.jquery.com/jQuery.get/)之类的方式从服务器获取更多可能存储的信息，那么无论如何您都必须将信息存储在页面上的*某个*位置，尽管如果代码是自动生成的，那么您的生活确实会变得容易得多，并且您的 jQuery 代码（至少！）可以大大简化！

使用上面现有的**HTML**代码，考虑以下 jQuery 代码：

```
$('#imageset img').click(function(){

    // get everything we need...
    var id = $(this).attr('id');
    var title = $(this).attr('title');
    var big_image = $(this).attr('bigimage');
    var list = $('#summary');

    // check to see if the list item already exists...
    var existing_item = $('#list_item_' + id);
    if (existing_item.length < 1)
    {
        // create the new list item...
        var new_item = $('<li />');
        new_item.attr('id', 'list_item_' + id);
        new_item.html('<div>' + title + '</div><br /><img src="' + big_image + '" />');

        // add it to the list...
        list.append(new_item);
    }
}); 
```

我希望这会有所帮助并且有意义！:)

# jquery - 如何防止默认复选框事件覆盖我的 jQuery 检查/取消选中功能？

> ID：10663432
> 
> 赞同：6
> 
> 时间：2012-05-19T07:59:47.337
> 
> 标签：jquery, checkbox

我在表格中有一个复选框列表，其中包含一个简单的 jQuery 函数，允许用户单击表格行中的任意位置来选中/取消选中复选框。它工作得很好，除非用户实际点击复选框。那就不行了。有任何想法吗？这是我的代码：

HTML：

```
<tr onClick="checkBox()">...</tr> 
```

jQuery：

```
function checkBox() {

var ischecked = $('input#myContacts').attr("checked");

if(ischecked)
{
    $('input#myContacts').attr("checked", false);
}
else
{
    $('input#myContacts').attr("checked", true);
}

return false;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-19T08:26:54.163

您可以使用[`event.stopPropagation`](http://api.jquery.com/event.stopPropagation/)来避免您`input#myContacts`的点击事件传播到`tr`点击事件。另外，当您应该使用 jQuery 事件时，我不敢相信您会以这种方式混合 jQuery 和 DOM。

```
$(document).ready(function(){
  $("input#myContacts").click(function(e){
    e.stopPropagation();
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T16:24:49.683

解决方案1： http: [//jsfiddle.net/qmdGK/3/](http://jsfiddle.net/qmdGK/3/)（使用两个表格单元格但只绑定点击到文本单元格）

解决方案2： http: [//jsfiddle.net/qmdGK/4/](http://jsfiddle.net/qmdGK/4/)（在复选框单击事件上使用stopPropagation（））

两者都使用 jQuery 将事件绑定到首选元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T09:18:57.903

```
 <tr class="checkBox">...</tr>

    $(document).ready(function () {
        $('tr.checkBox').live('click', function (e) {
            if (e.target.type !== 'checkbox') {
                $('input#myContacts').attr("checked", function () {
                    return !$(this).prop('checked');
                });

                //Or

                $(this).find('input#myContacts').attr("checked", function () {
                    return !$(this).prop('checked');
                });
            }
        });
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T08:08:43.993

如果没有 HTML 显示为什么该功能被触发，很难说。一个 jsFiddle 会很有帮助。只是猜测，但是否可能是您单击了选中它的复选框，但单击事件立即调用了取消选中它的函数？

# bash - 运行另一个脚本并在 BASH 中发送参数？

> ID：10663436
> 
> 赞同：0
> 
> 时间：2012-05-19T08:00:26.407
> 
> 标签：bash

我有一个需要分析的数据列表。我做的第一件事是检查文件是否确实是我想要的文件，然后我根据第 4 列对数据进行排序，然后我需要手动对排序后的行进行排序。

例如，我需要打印该行中的第三个单词，然后是第一个单词等。这是我写的：
mainScript ：

```
#!/bin/bash
for file in `ls ${1}` ; do
    if [[ ! ($file = *.user) ]] ; then
        continue
    fi

    sort -nrk4 $file | source printer_script

done 
```

打印机脚本：

```
#!/bin/bash
echo $3
echo $1
echo $2 
```

即使我通过管道发送已排序的行，为什么什么也没有打印？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T08:05:07.753

因为通过管道，排序的输出进入脚本的标准输入，而在其中您正在查看参数；如果您想获取该输出并将其作为参数传递，您应该执行以下操作：

```
./printer_script $(sort -nrk4 $file) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T08:19:56.587

如果你想从管道中读取，printer_script 应该是：

```
#!/bin/bash
read a b c
echo $c
echo $a
echo $b 
```

# php - 使用 PHP 监听数据库变化

> ID：10663437
> 
> 赞同：0
> 
> 时间：2012-05-19T08:00:31.857
> 
> 标签：php, jquery, ajax, database

我有一个使用 Oracle 并运行夜间作业的旧系统，也就是 Batch。在批处理期间，它会将多个事件发布到该数据库中的多个表中。我想创建一个可以监视这些更改的基于 Web 的应用程序。

我的总体想法是

*   创建一个 PHP 服务器/后端应用程序，它监听 db 中的任何更改（特别是前面提到的表）并发出消息/数据（json、XML）
*   拥有一个 Ajax 驱动（HTML5、jquery）的 Web 应用程序，该应用程序已“注册”以侦听 PHP 服务器
*   根据这些事件和消息更新 Web 应用程序上的各种组件

有没有人做过这样的事情并且可以提供一些指导或方向？

像这样的项目是否应该基于 PHP 框架，例如 Yii？我通读了 Yii 的文档，其中提到了它的 db API。

附带说明：我尝试使用 NodeJS 进行类似的练习。我没有连接到真实的数据库，而是在服务器代码中模拟了事件。同样，它是一个基于 jquery 的页面，其中事件通过服务器的发出（消息）很好地发布。

所以，底线：希望 PHP 服务监听 db 变化；注册前端应用程序以监听更改；更新前端。

谢谢。抢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T08:37:19.670

您仍然需要 PHP 连接到数据库（否​​则客户端连接会泄露您的用户名和密码）。

因此，在您的网络应用程序中，有一个 ajax 调用（如果您使用过它，请使用 jQuery，它可以很好地完成工作）以每分钟/10 秒/秒调用一个 PHP 脚本 - 无论您想要响应多快 - 并采取行动在结果上。PHP 脚本将连接到数据库并报告任何更改。

如果您想要一个单独的服务“侦听”数据库更改，请编写普通的 PHP（您可以使用浏览器运行/调试）。这将是每分钟监视数据库并执行所需操作的 PHP 脚本。你可以使用任何你喜欢的框架——它只是普通的 PHP。当你开始工作时，将其设置为“cron”作业。您每分钟运行一次“PHP -q /path/to/yourfile.php”。当有变化时，PHP 可以设置任何需要的标志。

Javascript 轮询上的文字或警告 - 确保您没有使用 setInterval() - 但每次 AJAX 调用返回（或返回失败）时开始下一次。如果服务器太忙而无法响应并且您发送另一个请求，它会使其更忙并从那里走下坡路。因此，当您收到回复或在合理的时间后未能获得回复时，请设置下一次投票。

您可以在 myresistance.net 中看到这一点：它运行 WordPress 和 SMF 安装 - 如果您在 Wordpress 部分（博客/新闻位），那么它每隔几分钟就会使用“ping”功能轮询数据库。这将检查数据库以查看您是否已登录或退出 SMF 部分，如果已登录，将重新加载 WordPress 部分，还会根据需要登录或退出。

# php - DELETE FROM 不适用于多个表 - 对 mysql 毫无头绪

> ID：10663438
> 
> 赞同：1
> 
> 时间：2012-05-19T08:00:35.803
> 
> 标签：php, mysql

基本上，我有三张桌子

具有字段 id 的工作场所（我想删除其中一个关联数据）和一个用于标识参与者列表的参与者列表 ID。

参与者列表 - 只是 list_id 和名称

参与者列表链接 - 带有 list_id 和参与者 ID

我试图使用的查询是这样的：

```
DELETE FROM workplaces,
participantlist,
participantlist_links 
WHERE workplaces.id =  '8' AND 
      workplaces.participantlist_id = participantlist_links.list_id AND  
      workplaces.participantlist_id = participantlist.list_id 
```

但我得到：

MySQL 说：

# 1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 3 行的 'WHERE workspaces.id='8' AND workspaces.participantlist_id = 参与者' 附近使用正确的语法

有任何想法吗？

解决方案：

```
 DELETE t1, t2, t3
    FROM workplaces AS t1
    LEFT JOIN participantlist AS t2 ON t1.participantlist_id = t2.list_id
    LEFT JOIN participantlist_links AS t3 ON t2.list_id = t3.list_id
    WHERE t1.id = '8' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T08:07:59.893

您是否考虑过放置`ON DELETE CASCADE`外键？这样，当您从工作区中删除该行时，其他行也将被自动删除。

有关更多信息，请参阅此链接：http: [//dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)

否则，您必须使用单独的 DELETE FROM 查询将它们全部删除。

在执行这些删除时使用事务是明智的。因此，如果出现任何问题，您可以回滚您的更改：

```
BEGIN TRANSACTION;
DELETE FROM ......;
DELETE FROM ......;
COMMIT; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T08:09:48.280

尝试

```
DELETE workplaces, participantlist, participantlist_links FROM workplaces,
participantlist,
participantlist_links 
WHERE workplaces.id =  '8' AND 
      workplaces.participantlist_id = participantlist_links.list_id AND  
      workplaces.participantlist_id = participantlist.list_id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T08:11:28.157

如[手册中所述](http://dev.mysql.com/doc/en/delete.html)，多表形式的`DELETE`语法与您使用的语法不同。你要：

```
DELETE workplaces, participantlist, participant_links
FROM   workplaces
  JOIN participantlist
    ON workplaces.participantlist_id = participantlist.list_id
  JOIN participantlist_links
    ON workplaces.participantlist_id = participantlist_links.list_id
WHERE  workplaces.id = '8' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-19T08:15:43.630

您可以使用 JOIN 从多个表中删除，如下所示：

```
DELETE t1, t2 FROM t1 INNER JOIN t2 INNER JOIN t3
WHERE t1.id=t2.id AND t2.id=t3.id; 
```

[http://dev.mysql.com/doc/refman/5.5/en/delete.html](http://dev.mysql.com/doc/refman/5.5/en/delete.html)

# java - ResponseText 为 null，即使它应该设置为 JavaScript

> ID：10663440
> 
> 赞同：0
> 
> 时间：2012-05-19T08:00:40.527
> 
> 标签：java, javascript, ajax, servlets

我有一个大问题，我的代码中没有任何错误。该程序应从字段中添加两个值`p1`并将`p2`它们上传到站点，而无需重新加载整个页面。我是用简单的 javascript 完成的，但我想使用 AJAX。一切都已经完成，但某处存在小错误。

我看`validate()`and `insterter()`，警报具有适当的价值

```
 alert("data = "+data);
 req.send(data); 
```

但是来自 insterter 的味精是空的。我不知道为什么。请帮忙。我想更正这段代码。

```
var msg = req.responseText;
        alert("msg = "+msg); 
```

为什么 msg 为空的原因是什么？

* * *

```
@WebServlet("/Serwlet")
public class Serwlet extends HttpServlet {
private static final long serialVersionUID = 1L;
static String KOD =

"<html>"+
"<head>"+
 "<meta http-equiv=\"Content-Type\" content=\"text/html; charset=windows-1250\">"+
"<title>Testowanie</title>"+
"<script type=\"text/javascript\" language=\"javascript\" src=\"servletD2Script.js\"></script>"+
"</head>"+
"<body>"+
"<div id=\"msg1\">Pierwsza suma</div>"+
"<div id=\"msg2\">Pierwsza suma</div>"+
"<center><h2>Testowanie parametrów</h2></center>"+
"<hr>"+
"<form method=\"get\" action=\"Serwlet\">"+
"p1<input type=\"text\" size=\"50\" name=\"p1\" onblur=\"validate()\"><br>"+
"p2<input type=\"text\" size=\"50\" name=\"p2\" onblur=\"validate()\"><br>"+
"<br><input type=\"submit\" value=\"Wyślij formularz by GET\">"+
"</form>"+
"</hr>"+
"<hr>"+
"<form method=\"post\" action=\"Serwlet\">"+
"p3<input type=\"text\" size=\"50\" name=\"p3\" onblur=\"funkcja()\"><br>"+
"p4<input type=\"text\" size=\"50\" name=\"p4\" onblur=\"funkcja()\"><br>"+
"<br><input type=\"submit\" value=\"Wyślij formularz by POST\">"+
"</form>"+
"</hr>"+

"</body></html>";

public Serwlet() {
    super();

}
static boolean raz = true;
private void serviceRequest(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

      response.setContentType("text/html");
      response.setHeader("Cache-Control", "no-cache");
      PrintWriter out = response.getWriter();
      if(raz){out.print(Serwlet.KOD);raz = false;}
      String name = request.getParameter("name");   // dostaję nazwisko
      String org = ""; //jakas wartosc 
      out.write(org != null ?  org : "");    // zwracam organizację lub pusty napis, jesli nie znam nazwiska
}

protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    serviceRequest( request, response);
}

protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    serviceRequest( request, response);
}

} 
```

* * *

```
var req;

function validate() {
//var idField = document.getElementById("name");
var wrt1 = document.getElementById("p1").value;
var wrt2 = document.getElementById("p2").value;
var data = eval(wrt1)+eval(wrt2)+"";

if (typeof XMLHttpRequest != "undefined") {
    req = new XMLHttpRequest();
} else if (window.ActiveXObject) {
    req = new ActiveXObject("Microsoft.XMLHTTP");
}
var url = "Serwlet";
req.open("POST", url, true);      
req.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
alert("data = "+data);
req.send(data);
req.onreadystatechange = inserter;
}

function inserter() {
if (req.readyState == 4) {
    if (req.status == 200) {
        var msg = req.responseText;
        alert("msg = "+msg);
        if (msg == "") {
            document.getElementById("msg1").innerHTML = "<div style=\"color:red\">"+"MSG WAS EMPTY"+"</div>";
            //document.getElementById("msg1").value = "blabla";
        }
        else
            document.getElementById("msg1").innerHTML = "<div style=\"color:red\">"+msg+"</div>";
            //document.getElementById("msg1").value = "COOOO JEST";
    }
}
} 
```

* * *

这部分代码总是被调用味精是“”

```
if (msg == "") {
        document.getElementById("msg1").innerHTML = "<div style=\"color:red\">"+"MSG WAS EMPTY"+"</div>";
        //document.getElementById("msg1").value = "blabla";
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T08:15:31.233

`raz`似乎只有一次，所以下次您输入 servlet 时，您不会在 if 语句中输入，也不会 print `Serwlet.KOD`。

然后我不明白：

```
 String org = ""; //jakas wartosc 
  out.write(org != null ?  org : "") 
```

它总是打印一个空字符串，它没用。

`serviceRequest`以 . 结尾的方法也是一个好习惯`out.close();`。

# python - 使用带有 CTE 的联合时 sqlalchemy 生成的格式错误的查询

> ID：10663445
> 
> 赞同：1
> 
> 时间：2012-05-19T08:01:22.083
> 
> 标签：python, sql, postgresql, sqlalchemy

我正在尝试使用 SQLAlchemy 生成一个涉及 CTE 和联合的查询。不幸的是，每当我应用联合时，生成的 SQL 不包括定义的 CTE。

这是包含 WITH 的 SQL，没有 UNION：

```
(Pdb) import sqlalchemy as sa  
(Pdb) print str(sa.select([sa.select([sa.sql.null().label('a1')]).cte('bb')]))

WITH bb AS
(SELECT NULL AS a1)
 SELECT bb.a1
FROM bb 
```

现在是相同的查询，但调用了联合：

```
(Pdb) print str(sa.select([sa.select([sa.sql.null().label('a1')]).cte('bb')]).union_all(sa.select([sa.sql.null().label('b1')])))

SELECT bb.a1
FROM bb UNION ALL SELECT NULL AS b1 
```

我希望联合调用的查询仍然包含 WITH，但事实并非如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T17:44:32.820

我相信这是一个错误。我应用了以下补丁来使 UNION 与 CTE 一起工作：

```
--- sqlalchemy.orig/sql/compiler.py 2012-05-20 17:39:41.000000000 +0000
+++ sqlalchemy/sql/compiler.py  2012-05-20 17:39:00.000000000 +0000
@@ -562,6 +562,15 @@
         text += (cs._limit is not None or cs._offset is not None) and \
                         self.limit_clause(cs) or ""

+        if self.ctes and \
+            compound_index==1 and not entry:
+            cte_text = self.get_cte_preamble(self.ctes_recursive) + " "
+            cte_text += ", \n".join(
+                [txt for txt in self.ctes.values()]
+            )
+            cte_text += "\n "
+            text = cte_text + text
+
         self.stack.pop(-1)
         if asfrom and parens:
             return "(" + text + ")" 
```

# django - POST 方法总是返回 403 Forbidden

> ID：10663446
> 
> 赞同：18
> 
> 时间：2012-05-19T08:01:43.053
> 
> 标签：django, post, csrf, django-csrf

我已阅读[Django - CSRF 验证失败](https://stackoverflow.com/questions/4547639/django-csrf-verification-failed)以及与 django 和 POST 方法相关的几个问题（和答案）。对我来说最好但不工作的答案之一是[https://stackoverflow.com/a/4707639/755319](https://stackoverflow.com/a/4707639/755319)

所有批准的答案都至少表明了三件事：

1.  使用 RequestContext 作为 render_to_response_call 的第三个参数
2.  使用 POST 方法在每个表单中添加 {% csrf_token %}
3.  检查 settings.py 中的 MIDDLEWARE_CLASSES

我完全按照建议做了，但错误仍然出现。我使用 django 1.3.1（来自 ubuntu 12.04 存储库）和 python 2.7（默认来自 ubuntu）

这是我的观点：

```
# Create your views here.
from django.template import RequestContext
from django.http import HttpResponse
from django.shortcuts import render_to_response
from models import BookModel

def index(request):
    return HttpResponse('Welcome to the library')

def search_form(request):
    return render_to_response('library/search_form.html')

def search(request):
    if request.method=='POST':
        if 'q' in request.POST:
            q=request.POST['q']
            bookModel = BookModel.objects.filter(title__icontains=q)
            result = {'books' : bookModel,}
            return render_to_response('library/search.html', result, context_instance=RequestContext(request))
        else:
            return search_form(request)
    else:
        return search_form(request) 
```

这是我的模板（search_form.html）：

```
{% extends "base.html" %}
{% block content %}
<form action="/library/search/" method="post">
    {% csrf_token %} 
    <input type="text" name="q">
    <input type="submit" value="Search">
</form>
{% endblock %} 
```

我重启了服务器，但是403禁止错误仍然存​​在，告诉CSRF验证失败。

我有两个问题：

1.  如何修复此错误？
2.  为什么在 django 中做一个“POST”这么难，我的意思是有什么具体的理由让它如此冗长（我来自 PHP，以前从未发现过这样的问题）？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-06-28T01:50:44.877

我可能错了，但是我发现上述解决方案相当复杂。

对我有用的只是将我的 csrf 令牌包含到我的发布请求中。

```
$.ajax({
    type: "POST",
    url: "/reports/",
    data: { csrfmiddlewaretoken: "{{ csrf_token }}",   // < here 
            state:"inactive" 
          },
    success: function() {
        alert("pocohuntus")
        console.log("prototype")
    }
}) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2018-01-13T01:48:33.780

这个答案适用于将来可能遇到同样问题的人。

Django 中表单所需的 CSRF`{{csrf_token}}`模板标签可防止跨站点请求伪造。CSRF 使客户端浏览器访问过的恶意站点可以向您自己的服务器发出请求。因此，django 提供的 csrf_token 使您的 django 服务器和站点可以很容易地被保护免受这种类型的恶意攻击。如果您的表单不受 csrf_token 保护，django 会返回 403 禁止页面。这是对您网站的一种保护形式，尤其是在没有故意遗漏令牌的情况下。

但在某些情况下，django 站点不想使用 csrf_token 保护其表单。例如，我开发了一个 USSD 应用程序，需要一个视图函数来接收来自 USSD API 的 POST 请求。我们应该注意到 POST 请求不是来自客户端上的表单，因此不可能存在 CSRF 风险，因为恶意站点无法提交请求。POST 请求是在用户拨打 USSD 代码时收到的，而不是在提交表单时收到的。

换句话说，在某些情况下，函数需要获取 POST 请求而不需要 {{csrf_token}}。

Django 为我们提供了一个装饰器`@csrf_exempt`。此装饰器将视图标记为不受中间件确保的保护。

```
from django.views.decorators.csrf import csrf_exempt
from django.http import HttpResponse

@csrf_exempt
def my_view(request):
    return HttpResponse('Hello world') 
```

Django 还提供了另一个与 执行相同功能的装饰器`{{csrf_token}}`，但它不会拒绝传入的请求。这个装饰器是`@requires_csrf_token`. 例如：

```
@requires_csrf_token
def my_view(request):
    c = {}
    # ...
    return render(request, "a_template.html", c) 
```

这篇文章中将提到的最后一个装饰器与 {{csrf_token}} 完全相同，它被称为`@csrf_protect`. 但是，单独使用这个装饰器并不是最佳实践，因为您可能会忘记将它添加到您的视图中。例如：

```
@csrf_protect
def my_view(request):
    c = {}
    # ...
    return render(request, "a_template.html", c) 
```

以下是一些可以更好地指导和解释的链接。

[https://docs.djangoproject.com/en/1.7/ref/contrib/csrf/#module-django.views.decorators.csrf](https://docs.djangoproject.com/en/1.7/ref/contrib/csrf/#module-django.views.decorators.csrf)

[https://docs.djangoproject.com/en/1.7/ref/contrib/csrf/](https://docs.djangoproject.com/en/1.7/ref/contrib/csrf/)

[http://www.squarefree.com/securitytips/web-developers.html#CSRF](http://www.squarefree.com/securitytips/web-developers.html#CSRF)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-19T09:44:20.480

避免此类问题的最简单方法是使用[`render`](http://django.me/render)快捷方式。

```
from django.shortcuts import render
# .. your other imports

def search_form(request):
    return render(request, 'library/search_form.html')

def search(request):
    q = request.GET.get('q')
    results = BookModel.objects.all()
    if q:
        results = results.filter(title__icontains=q)
    return render(request, 'library/search.html', {'result': results}) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-19T08:08:30.240

尝试将 RequestContext 放在 search_form 视图的 render_to_response 中：

```
context_instance=RequestContext(request) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-06-19T15:29:11.430

响应是 403 bcoz，django 在您发出的每个 POST 请求中都需要一个 csrf 令牌（包含在发布数据中）。

有多种方法可以做到这一点，例如：

从cookie中获取token，方法已在文章中说明，请[在此处输入链接描述](https://docs.djangoproject.com/en/1.7/ref/contrib/csrf/)

或者

您可以使用模板中提供的 {{ csrf_token }} 从 DOM 访问它

所以现在使用第二种方法：

```
var post_data = {
  ...
  'csrfmiddlewaretoken':"{{ csrf_token }}"
  ...
}
$.ajax({
  url:'url',
  type:'POST'
  data:post_data,
  success:function(data){
    console.log(data);
  },
  error:function(error){
    console.log(error);
  }
}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-06-03T10:04:31.927

您需要使用`RequestContext`您的回复

例如在`view.py`文件中

```
from django.template import RequestContext

def home(request):
    return render_to_response('home.html',RequestContext(request, {})) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-19T08:45:03.290

你也可以使用

```
direct_to_template(request, 'library/search.html', result) 
```

代替

```
render_to_response('library/search.html', result, context_instance=RequestContext(request)) 
```

因为自动`direct_to_template`添加`RequestContext`。但请注意，这`direct_to_template`将被弃用，django 提议使用 CBV `TemplateView`。

[`RequestContext`](https://docs.djangoproject.com/en/dev/ref/templates/api/#subclassing-context-requestcontext)允许您使用上下文处理器。这是你的错误：`{% csrf_token %}`输出空字符串，你得到 403。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-03-27T18:57:10.563

这为我解决了。正如 Django 文档所说，在能够直接将 POST 方法发送到您的 RESTAPI 之前，需要完成一些处理。这是代码：

```
function getCookie(name) {
    let cookieValue = null;
    if (document.cookie && document.cookie !== '') {
        const cookies = document.cookie.split(';');
        for (let i = 0; i < cookies.length; i++) {
            const cookie = cookies[i].trim();
            // Does this cookie string begin with the name we want?
            if (cookie.substring(0, name.length + 1) === (name + '=')) {
                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                break;
            }
        }
    }
    return cookieValue;
}

const csrftoken = getCookie('csrftoken');
console.log(csrftoken)

$.ajax({
    method:'POST',
    url:"//127.0.0.1:8000/app/homepage/", /*change it to your api endpoint*/
    headers: {'X-CSRFToken': csrftoken},
    data : { "data" : "3"}

}) 
```

我不能用这个解决方案保证的一件事是**安全方面**。

# iphone - 在排列的 UIImageview 中更新 UIImage

> ID：10663449
> 
> 赞同：0
> 
> 时间：2012-05-19T08:01:56.617
> 
> 标签：iphone, objective-c, xcode

我现在可以显示一个数组内的 UIImageView 但使用以下内容：

```
[[self.guess objectAtIndex:1] setFrame:CGRectMake(20, 20, 100, 100)];
[self.view addSubview:[self.guess objectAtIndex:1]]; 
```

如果我想更改数组中我的 UIImageViews 之一中的图像，我可以使用：

```
[self.guess replaceObjectAtIndex:1 withObject:Square]; 
```

但是我必须删除原始视图，然后再次添加新的子视图：

```
[[self.guess objectAtIndex:1] removeFromSuperview];
[self.view addSubview:[self.guess objectAtIndex:1]]; 
```

问题是，我的新子视图没有继承原始图像的框架位置和大小（因为这可能已经改变）。有没有办法更容易做到这一点？

我希望有这样的东西，它只会更新相同位置的原始图像，大小相同：

```
[self.guess.image replaceObjectAtIndex:1 withObject:Square.image]; 
```

再次感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T09:27:06.480

Radu 已经说过，最好保留一组图像或图像名称。然后你也不必从 superView 中删除 imageView，你只需重用一个也是唯一一个 ImageView。

所以你留下的是这样的

```
yourImageView.image = [self.guess objectAtIndex:1]; 
```

如果您只将名称存储在数组中

```
yourImageView.image = [UIImage imageNamed:[self.guess objectAtIndex:1]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T08:08:47.860

是否可以只存储数组中的图像而只有一个 UIImageView？然后，只需替换 UIImageView 元素内的图像

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T08:57:21.020

如果您已经尝试过，我不知道，但这应该可以。

```
UIImageView *img = (UIImageView *)[self.guess objectAtIndex:1];
img.image = Your Image; 
```

# java - -source 和 -target 兼容性有什么区别？

> ID：10663450
> 
> 赞同：43
> 
> 时间：2012-05-19T08:02:07.120
> 
> 标签：java, compilation, javac, backwards-compatibility

在使用 Java 编译器 ( `javac`) 时，我们可以指定两种兼容性。一个正在使用`-source`，另一个正在使用`-target`。这两者有什么区别？

例如，`-source 1.5`和`-target 1.6`？

此外，是否存在我们使用不同的源和目标兼容级别的情况？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-19T08:06:36.583

从[javac 文档](http://docs.oracle.com/javase/6/docs/technotes/tools/windows/javac.html)：

> **-source**指定接受的源代码版本。
> 
> **-target**生成以指定 VM 版本为目标的类文件。类文件将在指定的目标和更高版本上运行，但不会在 VM 的早期版本上运行。

在您的示例中：

```
-source 1.5 and -target 1.6 
```

这将用于确保源代码与 JDK 1.5 兼容，但应生成用于 JDK 1.6 及更高版本的类文件。

你*为什么*要这样做是另一回事。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-19T08:09:41.247

`-source`指示您的源代码的合规级别：您是否使用注释？那么你至少需要`1.5`; 你`@override`在接口实现上使用吗，你需要`1.6`等

`-target`指定您希望能够在哪个 Java 版本上运行您的类。您可以使用 Java SE`7`编译器并编译以在 Java SE 上运行`1.5`。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-19T08:25:35.550

这对于生成使用旧版本 Java 的 jar 文件非常有用。我相信到目前为止所有的 JDK 都能够执行旧版本，所以没有真正的理由让目标大于源。

`target`但是，在使用 1.7 JDK 时设置为例如 1.6 是有意义的。

我不确定，但我相信它可以在某些情况下使用 1.7 编译器将 1.7 java 代码编译为 1.6 jar，例如表达式

```
ArrayList<Integer> foo = new ArrayList<>(); 
```

仅在 1.7+ 源版本中有效的应编译为 1.6 兼容字节码。但我还没有验证编译器是否真的会这样做。**不幸的是，这似乎并没有在实践中实现。**

# c# - WCF 和通用接口的问题

> ID：10663463
> 
> 赞同：0
> 
> 时间：2012-05-19T08:03:55.933
> 
> 标签：c#, asp.net-mvc, wcf, entity-framework

我开始学习和使用 WCF，这对我来说是一项新技术，实际上是我第一次使用服务。我有

```
[ServiceContract]
interface IContract<T>
{
[OperationContract]
T Do(T some);
[OperationContract]
void Work();
} 
```

我有一个班级服务

```
class MyClass : ICrud<AnotherClass>
{
AnotherClass Do(AnotherClass some)
{}
void Work()
{}
} 
```

我使用实体框架，我已经用 Cruds 替换了模型（Poco 类）和文件夹到 WCF 库。对于每个表的每个 CRUD，我都有写服务类，就像你在上面看到的那样。我已经通过 DataContract 和 MemberContract 的属性标记了所有模型。

```
 <service name="Action.Cruds.MyClass">
        <host>
          <baseAddresses>
            <add baseAddress = "http://localhost:8732/Design_Time_Addresses/Action/Cruds/MyClass/" />
          </baseAddresses>
        </host>
        <endpoint address ="" binding="wsHttpBinding" contract="Action.Cruds.IContract[Class]">
          <identity>
            <dns value="localhost"/>
          </identity>
        </endpoint>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
      </service> 
```

我为每个 crud 类添加了每个标签，它们都是相同的，只是更改一个端点以设置另一个 IContract 泛型。我想问一下我的方法是否正确？泛型我会遇到哪些麻烦？如何正确定义所有这些代码？如何正确更改我的 App.config 以用于我的服务？

# asp.net - 如何使用只有一个用户的 asp.net mvc 项目

> ID：10663475
> 
> 赞同：8
> 
> 时间：2012-05-19T08:05:26.723
> 
> 标签：asp.net, asp.net-mvc-3, authentication, logging

我正在做一个在公司中使用的项目。系统将**只有 1 个管理员帐户。**

管理员将添加系统用户，每个用户都可以创建自己的联系人。

我创建了一个用于连接数据库的 WCF 服务、一个用于管理员的 asp.net mvc3 项目以及另一个用于系统用户的 WPF 应用程序。

我的问题是：

> 我只有一个用户（管理员）可以使用这个 asp.net mvc 项目登录：我该如何处理这种情况？

我认为不需要会员提供者和数据库，因为我只与一个用户合作，对吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-19T12:35:55.610

试试这个：

**网络配置**：

```
<authentication mode="Forms">
  <forms loginUrl="~/Admin/LogOn" timeout="2880" >
    <credentials passwordFormat="SHA1">
      <user name="admin" password="5baa61e4c9b93f3f0682250b6cf8331b7ee68fd8"/>
    </credentials>
  </forms>
</authentication> 
```

密码格式设置为 SHA1，因此您的密码不会以明文形式显示。不过还是可以破解的。例如，使用在线 SHA1 生成器生成您自己的哈希。

loginUrl 是您的登录页面的路由（duh :P），所以如果它不同，请更改它。

**凭据视图模型**：

```
public class CredentialsViewModel
{
    [Required]
    public string UserName { get; set; }

    [Required]
    [DataType(DataType.Password)]
    public string Password { get; set; }
} 
```

您的登录视图的视图模型。

**管理员控制器**：

```
public ViewResult LogOn()
{
    return View();
}

[HttpPost]
public ActionResult LogOn(CredentialsViewModel model, string returnUrl)
{
    if(ModelState.IsValid)
    {
        if(FormsAuthentication.Authenticate(model.UserName, model.Password))
        {
            FormsAuthentication.SetAuthCookie(model.UserName, false);
            return Redirect(returnUrl ?? Url.Action("Index", "Admin"));                
        }
        else
        {
            ModelState.AddModelError("", "Incorrect username or password");
        }
    }

    return View();
}

[Authorize]
public ViewResult Index()
{
    return View();
} 
```

因此 LogOn 操作将验证从视图传递的凭据；将其与 web.config 数据进行比较。

这里的重要部分是[[Authorize]](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute%28v=vs.98%29.aspx)属性，它将防止未经授权的用户访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T08:27:55.480

您肯定需要一个 User 表来处理非管理员帐户。将 Admin 用户也添加到此表中，并添加一个标有“IsAdmin”的列，其中只有一个设置为 true，这将是微不足道的。成员资格和角色提供者可以很好地做到这一点，并且可以更快地构建您需要的内容，尽管它们往往会在您的数据库中到处乱跑。

.. 作为旁注，尽管您非常有信心只会有一个管理员帐户，但我怀疑要求最终会发生变化，并且可能不会另行通知。

# android - Android 上的 AddProximityAlert 功耗

> ID：10663479
> 
> 赞同：0
> 
> 时间：2012-05-19T08:06:30.840
> 
> 标签：android, geolocation, gps, power-management

我正在开发一个 GeoFencing Android 应用程序，它会在用户靠近某个区域时通知用户（类似于 iOS 中的 Start Monitoring for Region）。

我知道我可以在 Android 中使用 AddProximityAlert，但我担心功耗，因为我将添加大约 50 个地理点。

问题是：增加更多点会改变功耗吗？或者无论我加了多少分，它都会保持不变？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T08:35:26.887

您必须进行测试才能确定:-) 但我的理解是 LocationManager 会定期检查当前位置（如果屏幕关闭，则每 4 分钟进行一次“昂贵的”GPS 检查，如果屏幕处于打开状态则更频繁，不能查找频率），然后将位置与所有注册的中心点进行比较。因此，GPS 方面的功耗是有限的，之后它只是通过检查一系列点创建的“正常”CPU 消耗。

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-09T15:57:59.913

我之前没有做过任何测试，但我认为功耗取决于硬件刷新率。您可以设置没有地理点和多个地理点的比较测试。您可能需要静止不动以确保相同的 GPS 能见度。并使用一些功耗工具，例如Battery Historian，来评估功耗。

# c# - 替换按钮位置

> ID：10663481
> 
> 赞同：2
> 
> 时间：2012-05-19T08:06:37.960
> 
> 标签：c#, winforms

我的 c# winform 项目有问题。

在我的项目中，如果按钮位于同一区域，我有一个功能可以将按钮的位置切换到旧位置。

私人无效myText_MouseUp（对象发送者，MouseEventArgs e）{

```
Point q = new Point(0, 0);
        Point q2 = new Point(0, 0);
        bool flag = false;
        int r = 0;
        foreach (Control p in this.Controls)
        {
            for (int i = 0; i < counter; i++)
            {
                if (flag)
                {
                    if (p.Location.X == locationx[i] && p.Location.Y == locationy[i])
                    {
                        oldx = e.X;
                        oldy = e.Y;
                        flag = true;
                        r = i;
                    }
                }
            }
        }
        foreach (Control p in this.Controls)
        {
            for (int j = 0; j < counter; j++)
            {
                if ((locationx[j] == p.Location.X) && (locationy[j] == p.Location.Y))
                {
                    Point arrr = new Point(oldx, oldy);
                    buttons[j].Location = arrr;
                    buttons[r].Location = new Point(locationx[j], locationy[j]);
                }
            }
        }
}
   The problem with this code is that if they are in the same area, the buttons do not switch their locations.  Instead they goes to the last button location. 
```

如果有人可以帮助我，那将对我有很大帮助:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T09:46:12.840

该`if`语句的计算结果始终为真。这意味着最终`j`循环将执行此操作：

```
// last time round the i loop, i == counter-1
// and q == new Point(locationx[counter-1], locationy[counter-1])
for (int j = 0; j < counter; j++)
{
    Point q2 = new Point(locationx[j], locationy[j]);
    buttons[i].Location = q2;
    buttons[j].Location = q;
} 
```

这样做的最终结果是每个按钮`Location`都设置为`q`，即

```
new Point(locationx[counter-1], locationy[counter-1]) 
```

* * *

为什么`if`语句总是评估为`true`. 好吧，首先让我们看一下语句`or`中的几个子句`if`：

```
|| ((q.Y >= q2.Y) && (q.X <= q2.X))
|| ((q.Y >= q2.Y) && (q.X == q2.X)) 
```

这相当于

```
|| ((q.Y >= q2.Y) && (q.X <= q2.X)) 
```

包含`==`测试的行对条件的最终结果绝对没有影响。事实上，所有包含的行都`==`可以进行类似的处理。这留下：

```
|| ((q.Y >= q2.Y) && (q.X <= q2.X))
|| ((q.Y >= q2.Y) && (q.X >= q2.X))
|| ((q.Y <= q2.Y) && (q.X >= q2.X))
|| ((q.Y <= q2.Y) && (q.X <= q2.X)) 
```

我们可以浓缩

```
|| ((q.Y >= q2.Y) && (q.X <= q2.X))
|| ((q.Y >= q2.Y) && (q.X >= q2.X)) 
```

进入

```
|| ((q.Y >= q2.Y) 
```

同样地

```
|| ((q.Y <= q2.Y) && (q.X >= q2.X))
|| ((q.Y <= q2.Y) && (q.X <= q2.X)) 
```

是相同的

```
|| ((q.Y <= q2.Y) 
```

结合

```
|| ((q.Y >= q2.Y)
|| ((q.Y <= q2.Y) 
```

你可以看到`if`条件总是计算为`true`。

# html - 纯粹从 Javascript 处理表单

> ID：10663482
> 
> 赞同：0
> 
> 时间：2012-05-19T08:06:47.413
> 
> 标签：html, ajax, forms, submit

[我的网站](http://www.psycowlogist.com)上有以下表格。

```
 <form action="" method="GET">
        <input type="text" name="query" value="" />
        <input type="button" name="talk" value="talk" onClick="askCow(this.form)" />
      </form> 
```

单击该按钮会触发更新页面的 AJAX 请求。但是，使用 return 不会；它只是使用 GET 提交表单，这不是所需的行为。使用`onsumit="return false;"`或类似禁用提交，但这不是所需的行为。

如何`askCow`在确保未提交表单的同时在 enter press（“表单提交”）上执行该功能？我这样做是坏人吗？我使用 AJAX 的原因是它让我完全省略了服务器端的模板逻辑。

谢谢！

编辑：这是完整的页面

```
<html>
  <head><title>Psycowlogist</title></head>
  <body>
    <div id="history">
      Previous discussion
    </div>
    <div id="cow">
      <pre>
 _______________________
< What is your problem? >
 -----------------------
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||
      </pre>
    </div>
    <div id="talk">
      <form id="talkForm" action="" method="GET" onsubmit="askCow(this)">
        <input type="text" name="query" value="" />
        <input type="button" name="talk" value="talk" onClick="askCow(this.form)" />
      </form>
    </div>
  </body>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript" charset="utf-8"></script>
  <script src="http://jashkenas.github.com/coffee-script/extras/coffee-script.js" type="text/javascript" charset="utf-8"></script>
  <script type="text/coffeescript">
    $j = jQuery

    window.askCow = (form) ->
      $j.get "/cowanswer",
      {q: form.query.value},
      (data) -> $j("#cow pre").html(data["cow-answer"])
      return false
  </script>  
 </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T08:11:11.353

只需`onsubmit event`使用`form`

```
 <form action="" method="GET" onsubmit="return askCow(this);">
    <input type="text" name="query" value="" />
    <input type="button" name="talk" value="talk"/>
  </form> 
```

`askCow`函数应该看起来像这样

```
function askCow()
{
    //do ajax stuff
    return false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T08:10:33.213

您可以使用[jQuery 表单插件](http://jquery.malsup.com/form/)。

在通话中，您可以调用`askCow()`.

```
 var options = {
        target:        '#output',   // target element(s) to be updated with server response 
        beforeSubmit:  showRequest,  // pre-submit callback 
        success:       showResponse  // post-submit callback 
    }; 

 $('#theForm').submit(function() { 
        askCow(this);
        $(this).ajaxSubmit(options); 

        return false; 
    }); 
```

# java - Mac 状态栏项目但不在 Dock 上

> ID：10663490
> 
> 赞同：4
> 
> 时间：2012-05-19T08:07:57.223
> 
> 标签：java, macos, statusbar, dock, headless

我正在尝试在 Mac 上制作一个 java 应用程序，在状态栏中放置一个图标，但我不希望 Mac 底座上的罐子图标（纸上有咖啡杯的那个）。所以我尝试使用 System.setProperty(java.awt.headless, true) 技术，但是我无法在 SystemTray 菜单栏中放置任何内容，因为我得到了 HeadlessException。如果有人知道解决此问题的方法，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T15:44:19.313

这很容易......如果你知道怎么做:)

首先将您的 jar 文件包装在 mac 应用程序包中

*   要么使用 mac 开发人员工具附带的“jar bundler”应用程序
*   或使用 -unrelated- jarbundler ant 任务[http://jarbundler.sourceforge.net/](http://jarbundler.sourceforge.net/)

然后进入生成的包的内容并打开 info.plist。只需添加 LSUIElement 属性并将其设置为 1。这会在启动时从 Dock 中删除应用程序。还可以在这里查看苹果文档：http: [//developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/LaunchServicesKeys.html](http://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/LaunchServicesKeys.html)

* * *

为了完整性：还有另一种方法可以做到这一点，但更痛苦。有一个可可命令允许您动态显示/隐藏停靠图标：SetSystemUIMode（https://developer.apple.com/library/mac/#documentation/Carbon/reference/Dock_Manager/Reference/reference.html）你可以尝试使用 rococoa 调用此命令或编写自己的 jni lib。或者，我会有一个 xcode 项目，它在我的 github 帐户中执行非常相似的操作 - 隐藏菜单栏：[https://github.com/kritzikratzi/jAppleMenuBar/](https://github.com/kritzikratzi/jAppleMenuBar/) 你只需要更改 src/native/ 中的一些参数jAppleMenuBar.m 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-12T15:41:14.927

这避免了码头中的任何事情：

```
System.setProperty("apple.awt.UIElement", "true"); 
```

这会添加托盘图标，如[https://docs.oracle.com/javase/tutorial/uiswing/misc/systemtray.html所示](https://docs.oracle.com/javase/tutorial/uiswing/misc/systemtray.html)

```
//Check the SystemTray is supported
        if (!SystemTray.isSupported()) {
            System.out.println("SystemTray is not supported");
            return;
        }
        final PopupMenu popup = new PopupMenu();
        final TrayIcon trayIcon =
                new TrayIcon(createImage("images/bulb.gif", "tray icon"));
        final SystemTray tray = SystemTray.getSystemTray();

        // Create a pop-up menu components
        MenuItem aboutItem = new MenuItem("About");
        CheckboxMenuItem cb1 = new CheckboxMenuItem("Set auto size");
        CheckboxMenuItem cb2 = new CheckboxMenuItem("Set tooltip");
        Menu displayMenu = new Menu("Display");
        MenuItem errorItem = new MenuItem("Error");
        MenuItem warningItem = new MenuItem("Warning");
        MenuItem infoItem = new MenuItem("Info");
        MenuItem noneItem = new MenuItem("None");
        MenuItem exitItem = new MenuItem("Exit");

        //Add components to pop-up menu
        popup.add(aboutItem);
        popup.addSeparator();
        popup.add(cb1);
        popup.add(cb2);
        popup.addSeparator();
        popup.add(displayMenu);
        displayMenu.add(errorItem);
        displayMenu.add(warningItem);
        displayMenu.add(infoItem);
        displayMenu.add(noneItem);
        popup.add(exitItem);

        trayIcon.setPopupMenu(popup);

        try {
            tray.add(trayIcon);
        } catch (AWTException e) {
            System.out.println("TrayIcon could not be added.");
        } 
```

# eclipse - 如何更改 Eclipse Git 插件中的默认作者和提交者？

> ID：10663492
> 
> 赞同：108
> 
> 时间：2012-05-19T08:08:07.360
> 
> 标签：eclipse, git, eclipse-plugin, egit, author

我正在为 Eclipse 使用 Git 插件。我有几个作者和提交者，当我开始在这些字段中输入时会显示这些作者和提交者。

如何提供对此列表的更改，或删除某些作者或提交者？

我还想设置默认显示的默认作者和提交者。

![在此处输入图像描述](../Images/5fbd70d96793c4f4066feb58206a6edc.png)

* * *

## 回答 #1

> 赞同：175
> 
> 时间：2014-07-24T17:01:43.450

1.  单击**窗口 > 首选项 > 团队 > Git > 配置**
2.  单击**添加条目**并输入键值对：

    *   键： **用户名**
    *   值：*YourUsernameHere*

        和

    *   键： **user.email**
    *   值：*YourEmailHere*

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-05-19T14:05:10.747

每个开发人员应执行：

```
git config --global user.name "<name of user>"
git config --global user.email "<email of user>" 
```

如果您想更改现有提交的作者，请查看[此处](https://stackoverflow.com/q/750172/1286639)

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2017-08-24T10:02:34.420

## 在全球范围内更改您的提交者姓名和电子邮件

您可以运行带有标志的“ `git config`”命令；`--global`这将确保您未来的所有提交都使用给定的信息：

```
$ git config --global user.name "John Doe"
$ git config --global user.email "john@doe.org" 
```

## 更改每个存储库的提交者名称和电子邮件

如果您只想在某个存储库中工作时使用特殊设置，您可以简单地省略该`--global`标志。这使得配置仅在该存储库中有效：

```
$ git config user.name "John Doe"
$ git config user.email "john@doe.org" 
```

* * *

Git 备忘单：[git for dummy](https://github.com/JerryGoyal/Git-for-Dummies)

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2012-05-19T17:43:00.210

EGit 应该在您第一次提交某事时询问您。但是您以后可以随时更改它，请参见此处：[http ://wiki.eclipse.org/EGit/User_Guide#Identifying_yourself](http://wiki.eclipse.org/EGit/User_Guide#Identifying_yourself)

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2015-01-29T12:16:50.283

在[Eclipse v4.4](https://en.wikipedia.org/wiki/Eclipse_%28software%29#Releases) (Luna) 中，它将像以下方式一样工作。

![在此处输入图像描述](../Images/ddc4177bef68adbc1f7d02789f2591a6.png)

# c# - 如何使 + 运算符在相互添加两个点的同时工作？

> ID：10663499
> 
> 赞同：6
> 
> 时间：2012-05-19T08:08:23.337
> 
> 标签：c#, .net, winforms, operators, point

有什么方法可以让`+`操作员为 Point 对象工作？

举个例子，这个小片段：

```
this.cm1.Show((MouseEventArgs)e.Location+this.i_rendered.Location); 
```

你看，我试着给彼此加两点。它只是不起作用（这是预期的）。我很想让这个工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-19T10:57:25.760

我阅读了`System.Drawing.Point`（链接在 Cody Gray 的答案中）的文档，它有一个实例方法`Offset`。该方法改变了电流`Point`（设计者选择制作`Point`一个可变结构！）。

所以这里有一个例子：

```
var p1 = new Point(10, 20);
var p2 = new Point(6, 7);
p1.Offset(p2); // will change p1 into the sum! 
```

在同一个文档中，我还看到了从`Point`to的显式转换`Size`。因此，试试这个：

```
var p1 = new Point(10, 20);
var p2 = new Point(6, 7);
Point pTotal = p1 + (Size)p2; // your solution? 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-19T08:11:32.073

它不会像你期望的那样发生。该`Point`结构为`+`（加法）运算符提供的唯一重载是[将 的坐标转换为`Point`a`Size`](http://msdn.microsoft.com/en-us/library/system.drawing.point.op_addition.aspx)的重载。

没有办法将两个`Point`结构加在一起，我什至不确定这意味着什么。

[考虑到您不能编写重载操作符的扩展方法，也](https://stackoverflow.com/questions/172658/operator-overloading-with-c-sharp-extension-methods)不要浪费太多时间来弄清楚它。

幸运的是，在编译语言中，将代码拆分为多行不会有任何损失。因此，您可以按如下方式重新编写代码：

```
Point newLocation = new Point(e.Location.X + this.i_rendered.Location.X,
                              e.Location.Y + this.i_rendered.Location.Y);
this.cm1.Show(newLocation); 
```

或者，您可以使用[`Offset`method](http://msdn.microsoft.com/en-us/library/ms142187)，但我不相信它会增强可读性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-13T19:22:00.083

最简单（也是最干净）的解决方案是将 i_rendered.Location 转换为**Size**

```
Point newLocation = (e.Location + (Size)this.i_rendered.Location); 
```

当一个简单的演员按照 OP 所要求的方式完成工作时，我看不出如何或为什么需要将任何东西分成复杂的 X 和 Y 组件。

# php - 概率计算

> ID：10663504
> 
> 赞同：-1
> 
> 时间：2012-05-19T08:09:20.450
> 
> 标签：php, javascript

我的网站上有这样的东西：有网格，成员随机点击它们，他们查看网页，然后他们了解他们是否中奖。他们每天的机会有限。

我计算中奖概率的算法：

1.  随机选择 1 到 10,000
    1a 之间的数字。如果这个数字等于 1 个成员赢 X
    1b。如果这个数字 =< 5 成员赢 Y 等。

有没有其他方法来计算这个或者我应该用额外的代码来控制奖品（例如：如果今天 x 会员赢得了 y 金额的奖品，则停止提供奖品）？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T08:36:09.273

是的，还有其他几种计算方法，但你的想法已经足够好了。您也可以使用以下伪代码来获得帮助：

```
int randomnumber = generaterandomnumber();
bool allprizesgone = getinformationfromdatabase();
if ( allprizesgone equals false ) {
    if(randomnumber equals 1) {
        member wins X
        if(checkifallprizesfortodayaretakes() equals true) {
            setinformationtodatabase(allprizesgonetrue);
        }
    } else if (randomnumer is smaller than 5 ){ //because of else if members can't get both prizes
       member wins Y
       if(checkifallprizesfortodayaretakes() equals true) {
            setinformationtodatabase(allprizesgonetrue);
        }
    }

} 
```

# jsf - 在第二次点击时不起作用

> ID：10663505
> 
> 赞同：1
> 
> 时间：2012-05-19T08:09:30.650
> 
> 标签：jsf, richfaces, ajax4jsf

我有一个`rich:popupPanel`页面，它需要一些文本作为输入，并且我已经对该输入文本字段进行了验证。现在，如果我们按`<a4j:commandButton>`第一次，它将正确执行所有操作，但第二次将不起作用。

```
<a4j:commandButton styleClass="button" id="addFieldBtn" value="#{msg.Add}"
   oncomplete="if(#{messageDataBean.isSuccess}) {#{rich:component('fieldPopUp')}.hide();}"
   action="#{categoryServiceBean.addAddtionalFields}" render="fieldList"/> 
```

我的`messageDataBean`和`categoryServiceBean`是请求范围的。

# ios - pushViewController 的自定义动画

> ID：10663511
> 
> 赞同：0
> 
> 时间：2012-05-19T08:09:52.153
> 
> 标签：ios, core-animation, navigationcontroller

我想为`pushViewController`使用一系列图像的动画创建自定义动画。

我已经做到了这一点，`currentViewController`上面覆盖了我想要的图像，但我不知道我是否可以`nextViewController`在尝试反转动画图像的顺序时显示。

到目前为止，我有以下

```
- (IBAction)nextAction:(id)sender {

    UIImage* img1 = [UIImage imageNamed:@"image-1.png"]; 
    UIImage* img2 = [UIImage imageNamed:@"image-2.png"];
    UIImage* img3 = [UIImage imageNamed:@"image-3.png"];
    UIImage* img4 = [UIImage imageNamed:@"image-4.png"];
    UIImage* img5 = [UIImage imageNamed:@"image-5.png"];

    NSArray *animationImages = [NSArray arrayWithObjects:img1,img2,img3,img4,img5,nil];

    CALayer *myLayer = [CALayer layer];
    myLayer.bounds = CGRectMake(0.0, 0.0, 320.0, 480.0);
    myLayer.position =  self.view.center; //CGPointMake(0.0 ,0.0);
    CAKeyframeAnimation *animationSequence = [CAKeyframeAnimation animationWithKeyPath: @"contents"];
    animationSequence.calculationMode = kCAAnimationLinear;
    animationSequence.autoreverses = NO;
    animationSequence.duration = 0.4;
    animationSequence.delegate = self;
    animationSequence.repeatCount = 1; //HUGE_VALF;
    NSMutableArray *animationSequenceArray = [[NSMutableArray alloc] init];
    for (UIImage *image in animationImages) 
    {
        [animationSequenceArray addObject:(id)image.CGImage];
    }
    animationSequence.values = animationSequenceArray;
    [myLayer addAnimation:animationSequence forKey:@"contents"];    
    [self.view.layer addSublayer:myLayer];

}

- (void)animationDidStop:(CAAnimation*)animation finished:(BOOL)finished {

    NextViewController *nextViewController;
    nextViewController = [[NextViewController alloc] initWithNibName:@"NextViewController" bundle:nil];
    nextViewController.title = @"next";

    [self.navigationController pushViewController:nextViewController animated:NO];
    [nextViewController release];

} 
```

`IBAction` `nextAction`当用户按下一个按钮并且图像在当前视图之上动画化时执行。

我想要实现的是在图像位于顶部之后，推动`nextViewController`图像下方并反转动画，以便`nextViewController`显示出来。

我希望这是有道理的。这就像有一张照片，将一些卡片放在照片上，然后取出卡片，露出另一张照片。

张

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T08:24:11.860

不要将该动画层添加到当前的 viewController 上，而是将该层直接添加到当前的 keyWindow 上。这将隐藏您当前的 viewController。

```
[[[UIApplication sharedApplication] keyWindow] layer addSublayer:myLayer]; 
```

一旦你的动画的前半部分完成（或者换句话说，一旦完成了正序的完整动画），移除动画层。用新的 viewController 替换 viewController 并再次将第二个动画层添加到 keyWindow - 现在开始动画的后半部分。完成后，从 keyWindow 中删除动画层。

根据应用程序的结构，您还可以使用有效驻留在附加视图控制器下方的 rootViewController 作为动画层的超级视图/超级层。

```
[[[[UIApplication sharedApplication] rootViewController] view] layer addSublayer:myLayer]; 
```

# postgresql - postgresql：顺序执行多个查询并将结果发送到文件

> ID：10663520
> 
> 赞同：2
> 
> 时间：2012-05-19T08:10:41.807
> 
> 标签：postgresql

我正在 Windows (pgAdmin3) 中使用 PostgreSQL 9，我正在尝试对真正耗时的 5 个查询中的每一个执行不同的 EXPLAIN ANAlYZE 命令，并将结果发送到单个文件。有人可以帮我解决这个问题吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T10:48:16.753

`psql`使用命令行实用程序可能会更好，而不是使用 pgadminIII。您可以使用所需的所有 psql 命令创建一个文件，就像这样。

```
$ cat test.psql
\o test.txt
\qecho First query
explain analyze select * from narrow;
\qecho Second query
explain analyze select * from person;
\q 
```

`\o`告诉 psql 将所有查询输出发送到文件 test.txt。`\qecho`仅用于文档；它将您喜欢的任何字符串写入输出文件。

在我的机器上，我会像这样运行该文件（test.psql）。

```
$ psql -h localhost -p 5433 -U postgres sandbox < test.psql 
```

这只是告诉`psql`服务器在我的计算机上，它正在侦听端口 5433，我想以用户“postgres”的身份连接到数据库“沙箱”，并从 test.psql 中读取所有命令。所有查询的输出都将在文件 test.txt 中。

# c++ - Where are the implementations of sys/*.h files?

> ID：10663522
> 
> 赞同：1
> 
> 时间：2012-05-19T08:11:02.273
> 
> 标签：c++, linux

I am wondering where the implementations (.c or .cpp files) are in the Linux system for the core header files. For example, where is the implementation of sys/socket.h stored?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T08:14:40.823

The implementation is in GNU libc. You can browse GNU libc sources or download them from gnu.org

Some useful links are in the answer to "[Where can I browse the source code of libc online?](https://stackoverflow.com/q/1978517/1328439)"

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T08:15:37.217

The functions in these headers are typically system calls. System calls provide a mechanism to talk to the kernel space functionality . in this perticular example access the tcp/ip stack functionality.

[http://www.ibm.com/developerworks/aix/library/au-tcpsystemcalls/](http://www.ibm.com/developerworks/aix/library/au-tcpsystemcalls/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T08:15:20.930

try the linux source tarball from kernel.org or if you're into glibc and the like, their home pages. For the most part this stuff is not distributed with most distributions, but gentoo does and it's in /usr/src

# apache - apache tomcat重定向错误：worker1连接到后端失败

> ID：10663525
> 
> 赞同：2
> 
> 时间：2012-05-19T08:11:31.183
> 
> 标签：apache, tomcat, mod-jk

尝试使用 apache tomcat integertaion 运行 servlet 时获取以下日志。它说无法连接到tomcat。不知道为什么？此外，它试图连接到`0.0.0.0:0`我有

```
<Connector port="8009" maxHttpHeaderSize="8192"
           maxThreads="150" minSpareThreads="25" maxSpareThreads="75"
           enableLookups="false" redirectPort="8443" acceptCount="100"
           connectionTimeout="20000" disableUploadTimeout="true" /> 
```

试过了

```
<Connector port="8009" protocol="AJP/1.3" redirectPort="8443" /> 
```

但没有运气

```
[2012 年 5 月 19 日星期六 13:29:39] [5260:4324] [info] ajp_service::jk_ajp_common.c (2622): (worker1) 向 tomcat 发送请求失败（可恢复），因为请求发送期间出错（尝试 = 1)
    [2012 年 5 月 19 日星期六 13:29:39] [5260:4324] [调试] ajp_service::jk_ajp_common.c (2471)：重试 1，在重试前休眠 100 毫秒
    [2012 年 5 月 19 日星期六 13:29:39] [5260:4324] [调试] ajp_send_request::jk_ajp_common.c (1623): (worker1) 所有端点都断开连接。
    [2012 年 5 月 19 日星期六 13:29:39] [5260:4324] [调试] jk_open_socket::jk_connect.c (485): 套接字 TCP_NODELAY 设置为 On
    [2012 年 5 月 19 日星期六 13:29:39] [5260:4324] [调试] jk_open_socket::jk_connect.c (574)：为 socket=1548 设置了超时 3000
    [2012 年 5 月 19 日星期六 13:29:39] [5260:4324] [调试] jk_open_socket::jk_connect.c (609): 试图将套接字 1548 连接到 0.0.0.0:0
    [2012 年 5 月 19 日星期六 13:29:39] [5260:4324] [info] jk_open_socket::jk_connect.c (627): 连接到 0.0.0.0:0 失败 (errno=47)
    [2012 年 5 月 19 日星期六 13:29:39] [5260:4324] [info] ajp_connect_to_endpoint::jk_ajp_common.c (995)：打开套接字失败 (0.0.0.0:0) (errno=47)
    [2012 年 5 月 19 日星期六 13:29:39] [5260:4324] [错误] ajp_send_request::jk_ajp_common.c (1629): (worker1) 连接到后端失败。Tomcat 可能未启动或正在侦听错误的端口 (errno=47)
    [2012 年 5 月 19 日星期六 13:29:39] [5260:4324] [info] ajp_service::jk_ajp_common.c (2622): (worker1) 向 tomcat 发送请求失败（可恢复），因为请求发送期间出错（尝试 = 2)
    [2012 年 5 月 19 日星期六 13:29:39] [5260:4324] [错误] ajp_service::jk_ajp_common.c (2642): (worker1) 连接到 tomcat 失败。
    [2012 年 5 月 19 日星期六 13:29:39] [5260:4324] [调试] ajp_reset_endpoint::jk_ajp_common.c (786): (worker1) 使用套接字 -1 重置端点（套接字关闭）
    [2012 年 5 月 19 日星期六 13:29:39] [5260:4324] [debug] ajp_done::jk_ajp_common.c (3085): 为 worker worker1 和 socket -1 回收连接池
    [2012 年 5 月 19 日星期六 13:29:39] [5260:4324] [info] jk_handler::mod_jk.c (2788)：worker=worker1 的服务错误=-3
    [2012 年 5 月 19 日星期六 13:29:47] [5260:4324] [调试] map_uri_to_worker_ext::jk_uri_worker_map.c (1131)：尝试从 3 个映射映射 URI '/automationutil/LoginApp'
    [2012 年 5 月 19 日星期六 13:29:47] [5260:4324] [调试] find_match::jk_uri_worker_map.c (945)：尝试映射上下文 URI '/automationutil/*=worker1' 源 'JkMount'
    [2012 年 5 月 19 日星期六 13:29:47] [5260:4324] [调试] find_match::jk_uri_worker_map.c (958): 找到通配符匹配 '/automationutil/*=worker1'
    [2012 年 5 月 19 日星期六 13:29:47] [5260:4324] [调试] jk_handler::mod_jk.c (2621): 进入处理程序 jakarta-servlet worker=worker1 r->proxyreq=0
    [2012 年 5 月 19 日星期六 13:29:47] [5260:4324] [调试] wc_get_worker_for_name::jk_worker.c (115): 找到一个工人 worker1
    [2012 年 5 月 19 日星期六 13:29:47] [5260:4324] [调试] wc_get_name_for_type::jk_worker.c (292): 找到工作类型 'ajp13'
    [2012 年 5 月 19 日星期六 13:29:47] [5260:4324] [调试] init_ws_service::mod_jk.c (1097): 服务协议=HTTP/1.1 方法=POST ssl=false 主机=(null) addr=127.0。 0.1 name=localhost port=82 auth=(null) user=(null) laddr=127.0.0.1 raddr=127.0.0.1 uri=/automationutil/LoginApp
    [2012 年 5 月 19 日星期六 13:29:47] [5260:4324] [调试] ajp_get_endpoint::jk_ajp_common.c (3154)：在 0 次重试后获得连接池插槽 = 0
    [2012 年 5 月 19 日星期六 13:29:47] [5260:4324] [调试] ajp_marshal_into_msgb::jk_ajp_common.c (626)：ajp 编组完成
    [2012 年 5 月 19 日星期六 13:29:47] [5260:4324] [调试] ajp_service::jk_ajp_common.c (2449)：处理 worker1 重试 2 次
    [2012 年 5 月 19 日星期六 13:29:47] [5260:4324] [调试] ajp_send_request::jk_ajp_common.c (1623): (worker1) 所有端点都已断开连接。
    [2012 年 5 月 19 日星期六 13:29:47] [5260:4324] [调试] jk_open_socket::jk_connect.c (485): 套接字 TCP_NODELAY 设置为 On
    [2012 年 5 月 19 日星期六 13:29:47] [5260:4324] [调试] jk_open_socket::jk_connect.c (574): 为 socket=1548 设置超时 3000
    [2012 年 5 月 19 日星期六 13:29:47] [5260:4324] [调试] jk_open_socket::jk_connect.c (609)：尝试将套接字 1548 连接到 0.0.0.0:0
    [2012 年 5 月 19 日星期六 13:29:47] [5260:4324] [info] jk_open_socket::jk_connect.c (627): 连接到 0.0.0.0:0 失败 (errno=47)
    [2012 年 5 月 19 日星期六 13:29:47] [5260:4324] [info] ajp_connect_to_endpoint::jk_ajp_common.c (995)：打开套接字失败 (0.0.0.0:0) (errno=47)
    [2012 年 5 月 19 日星期六 13:29:47] [5260:4324] [错误] ajp_send_request::jk_ajp_common.c (1629): (worker1) 连接到后端失败。Tomcat 可能未启动或正在侦听错误的端口 (errno=47)
    [2012 年 5 月 19 日星期六 13:29:47] [5260:4324] [info] ajp_service::jk_ajp_common.c (2622): (worker1) 向 tomcat 发送请求失败（可恢复），因为请求发送期间出错（尝试 = 1)
    [2012 年 5 月 19 日星期六 13:29:47] [5260:4324] [调试] ajp_service::jk_ajp_common.c (2471)：重试 1，在重试前休眠 100 毫秒
    [2012 年 5 月 19 日星期六 13:29:47] [5260:4324] [调试] ajp_send_request::jk_ajp_common.c (1623): (worker1) 所有端点都已断开连接。
    [2012 年 5 月 19 日星期六 13:29:47] [5260:4324] [调试] jk_open_socket::jk_connect.c (485): 套接字 TCP_NODELAY 设置为 On
    [2012 年 5 月 19 日星期六 13:29:47] [5260:4324] [调试] jk_open_socket::jk_connect.c (574): 为 socket=1548 设置超时 3000
    [2012 年 5 月 19 日星期六 13:29:47] [5260:4324] [调试] jk_open_socket::jk_connect.c (609)：尝试将套接字 1548 连接到 0.0.0.0:0
    [2012 年 5 月 19 日星期六 13:29:47] [5260:4324] [info] jk_open_socket::jk_connect.c (627): 连接到 0.0.0.0:0 失败 (errno=47)
    [2012 年 5 月 19 日星期六 13:29:47] [5260:4324] [info] ajp_connect_to_endpoint::jk_ajp_common.c (995)：打开套接字失败 (0.0.0.0:0) (errno=47)
    [2012 年 5 月 19 日星期六 13:29:47] [5260:4324] [错误] ajp_send_request::jk_ajp_common.c (1629): (worker1) 连接到后端失败。Tomcat 可能未启动或正在侦听错误的端口 (errno=47)
    [2012 年 5 月 19 日星期六 13:29:47] [5260:4324] [info] ajp_service::jk_ajp_common.c (2622): (worker1) 向 tomcat 发送请求失败（可恢复），因为请求发送期间出错（尝试 = 2)
    [2012 年 5 月 19 日星期六 13:29:47] [5260:4324] [错误] ajp_service::jk_ajp_common.c (2642): (worker1) 连接到 tomcat 失败。
    [2012 年 5 月 19 日星期六 13:29:47] [5260:4324] [调试] ajp_reset_endpoint::jk_ajp_common.c (786): (worker1) 使用套接字 -1 重置端点（套接字关闭）
    [2012 年 5 月 19 日星期六 13:29:47] [5260:4324] [debug] ajp_done::jk_ajp_common.c (3085)：为 worker worker1 和 socket -1 回收连接池
    [2012 年 5 月 19 日星期六 13:29:47] [5260:4324] [调试] jk_handler::mod_jk.c (2719): 消耗了 worker=worker1 的 22 字节剩余请求数据
    [2012 年 5 月 19 日星期六 13:29:47] [5260:4324] [info] jk_handler::mod_jk.c (2788): 服务错误=-3 for worker=worker1

```

非常感谢任何帮助。在过去的 10 天里一直在敲我的头。

mod_jk.conf (C:\Program Files\apache-tomcat-5.5.35\conf\auto)

```
########## Auto generated on Sat May 19 12:48:58 IST 2012##########

<IfModule !mod_jk.c>
  LoadModule jk_module "modules/mod_jk.dll"
</IfModule>

<VirtualHost localhost>
    ServerName localhost

    JkMount /webdav ajp13
    JkMount /webdav/* ajp13

    JkMount /tomcat-docs ajp13
    JkMount /tomcat-docs/* ajp13

    JkMount /balancer ajp13
    JkMount /balancer/* ajp13

    JkMount /host-manager ajp13
    JkMount /host-manager/* ajp13

    JkMount /automationutil ajp13
    JkMount /automationutil/* ajp13

    JkMount /servlets-examples ajp13
    JkMount /servlets-examples/* ajp13

    JkMount /jsp-examples ajp13
    JkMount /jsp-examples/* ajp13

    JkMount /manager ajp13
    JkMount /manager/* ajp13
</VirtualHost> 
```

**worker.properties**

```
# Define 1 real worker using ajp13
worker.list=worker1
# Set properties for worker1 (ajp13)
worker.worker1.type=ajp13
worker.worker1.host=localhost
worker.worker1.port=8009
#worker.worker1.lbfactor=50
#worker.worker1.cachesize=10
#worker.worker1.cache_timeout=600
#worker.worker1.socket_keepalive=1
worker.worker1.socket_timeout=3000 
```

**uriworkermap.properties**

```
 # Licensed to the Apache Software Foundation (ASF) under one or more
# contributor license agreements.  See the NOTICE file distributed with
# this work for additional information regarding copyright ownership.
# The ASF licenses this file to You under the Apache License, Version 2.0
# (the "License"); you may not use this file except in compliance with
# the License.  You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

# uriworkermap.properties - IIS
#
# This file provides sample mappings for example wlb
# worker defined in workermap.properties.minimal
# The general syntax for this file is:
# [URL]=[Worker name]

#/admin/*=lb
#/manager/*=lb
#/jsp-examples/*=lb
/servlets-examples/*=worker1
#/examples/*=lb
/automationutil=worker1
/automationutil/*=worker1

#!/automationutil/*.html=worker1

# Optionally filter out all .jpeg files inside that context
# For no mapping the url has to start with exclamation (!)

#!/servlets-examples/*.jpeg=lb

#
# Mount jkstatus to /jkmanager
# For production servers you will need to
# secure the access to the /jkmanager url
#
#/jk-manager=jk-status 
```

**httpd.conf**

```
#Include "C:/Program Files/Apache Software Foundation/Apache2.2/conf/vhosts.conf" 

#LoadModule jk_module "C:/Program Files/Apache Software Foundation/Apache2.2/modules/mod_jk.so"

# Load mod_jk module
# Update this path to match your modules location
LoadModule    jk_module  "C:/Program Files/Apache Software Foundation/Apache2.2/modules/mod_jk.so"
# Declare the module for <IfModule directive> (remove this line on Apache 2.x)
#AddModule     mod_jk.c
# Where to find workers.properties
# Update this path to match your conf directory location (put workers.properties next to httpd.conf)
JkWorkersFile "C:/Program Files/Apache Software Foundation/Apache2.2/conf/workers.properties"
# Where to put jk shared memory
# Update this path to match your local state directory or logs directory
JkShmFile "C:/Program Files/Apache Software Foundation/Apache2.2/logs/mod_jk.shm"
# Where to put jk logs
# Update this path to match your logs directory location (put mod_jk.log next to access_log)
JkLogFile "C:/Program Files/Apache Software Foundation/Apache2.2/logs/mod_jk.log"
# Set the jk log level [debug/error/info]
#JkLogLevel    info
JkLogLevel    debug
# Select the timestamp log format
JkLogStampFormat "[%a %b %d %H:%M:%S %Y] "
# Send everything for context /examples to worker named worker1 (ajp13)
#<VirtualHost localhost:80>
# Set DocumentRoot equal to Tomcat ROOT context
#DocumentRoot "C:/Program Files/Apache Software Foundation/Apache2.2/htdocs"
#DocumentRoot "C:/Program Files/apache-tomcat-5.5.35/webapps"
# Exclude PHP & CGI (let Apache handle)
SetEnvIf Request_URI \.php no-jk
#SetEnvIf Request_URI \.cgi no-jk
#JkMount /* worker1
JkMount  /automationutil worker1
JkMount  /automationutil/* worker1
JkUnMount  /automationutil/*.html worker1
#JkMount  /automationutil/* worker1
#</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T16:16:07.960

我遇到了类似的问题，我使用以前版本的 mod_jk 修复了它。我最初下载的是 1.2 版。**36**，但我能够使用 1.2 让它工作。**35** . 你可以在这里下载以前的版本：http: [//archive.apache.org/dist/tomcat/tomcat-connectors/jk/binaries/windows/](http://archive.apache.org/dist/tomcat/tomcat-connectors/jk/binaries/windows/)

# git - 如何将 Git 子模块移动到子目录？

> ID：10663527
> 
> 赞同：22
> 
> 时间：2012-05-19T08:11:47.393
> 
> 标签：git, git-submodules

伙计们，我只是用 submodule 组织了一些 Git repos，地址在这里： [repos](https://github.com/shawjia/repos)

我想将所有子模块移动到一个名为 repos 的新目录中，例如 jquery -> repos/jquery。

我更改了**.gitmodules**文件，但似乎它不起作用。我应该怎么办？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-05T13:00:35.490

刚才遇到了同样的问题，最后删除了子模块引用（如[本文所述](http://chrisjean.com/2009/04/20/git-submodules-adding-using-removing-and-updating/)）并在我希望它去的地方重新创建它。

按照您将子模块移动`jquery`到的示例`repos/jquery`

1.  从 中删除（通常为三行）子模块引用`.gitmodules`。
2.  检查`.git/config`对子模块的引用并删除它们（如果存在）
3.  将`git rm --cached jquery`子模块引用从存储库中删除
4.  删除旧的子模块文件夹
5.  用`git submodule add git://github.com/jquery/jquery.git repos/jquery`

如果您的子模块[设置为特定标签，分别提交](https://stackoverflow.com/questions/1777854/git-submodules-specify-a-branch-tag#1778247)（您肯定会在一个稳定的项目中拥有），您将再次设置它。

由于这个复杂的过程，我强烈希望有（或将有，至少在 git 路线图上）一种更直接的方法来实现这一目标。如果不是，那么肯定可以将一些脚本组合在一起以更快地完成此操作...

# javascript - 使用变量简化 javascript

> ID：10663528
> 
> 赞同：0
> 
> 时间：2012-05-19T08:11:55.183
> 
> 标签：javascript, variables, simplify

```
if (this.firstChild.style.display == 'none')
{this.firstChild.style.display = 'block'}
else
{this.firstChild.style.display = 'none'}; 
```

是否可以使用变量缩短此代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T08:15:15.027

你可以像这样缩短它：

```
var a = this.firstChild.style;
a.display = (a.display=='none'?'block':'none'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T08:14:13.307

```
var childStyle=this.firstChild.style;
if ( childStyle.display == 'none'){
    childStyle.display = 'block';
}
else{
    childStyle.display = 'none';
} 
```

将是等价的。

**您可以使用三元运算符**进一步缩短，例如

```
var childStyle=this.firstChild.style;
childStyle.display=(childStyle.display=='none')?'block':'none'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T08:16:08.760

如果你选择 jquery 比它更短

```
$("div span:first-child").toggle(); 
```

或者

```
$(this).find(">:first-child").toggle(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-19T08:22:24.840

顺便说一句，这可以是另一种选择吗？

```
with this.firstChild.style.display{this=(this=='none')?'block':'none';} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-19T08:21:13.563

尝试：

```
var elstyle = this.firstChild.style;
elstyle.display = /block/i.test(elstyle.display) ? 'none' : 'block' 
```

# javascript - stringWithContentsOfFile: 在 XCode 中的非常奇怪的行为

> ID：10663537
> 
> 赞同：0
> 
> 时间：2012-05-19T08:13:11.357
> 
> 标签：javascript, xcode, ios5

我正在构建一个基于 HTML 的 iPad 应用程序，并且我正在从本地文件加载 HTML。在这些文件中，我需要 jQuery 库，所以我的项目中有 js 文件，我将使用 stringByEvaluatingJavaScriptFromString 或类似的东西加载它——这目前无关紧要。

当我使用以下代码时，NSLog 返回 null：

```
NSString *gameFileContents = [NSString stringWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"jquery172" ofType:@"js"] encoding:NSASCIIStringEncoding error:nil];
NSLog(@"%@",gameFileContents); 
```

当我仅将文件的扩展名从 .js 更改为 .json 时，一切都很好。

```
NSString *gameFileContents = [NSString stringWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"jquery172" ofType:@"json"] encoding:NSASCIIStringEncoding error:nil];
NSLog(@"%@",gameFileContents); 
```

对文件的扩展名有任何限制吗？我可以像那样使用该文件，但它似乎不正确 - 我喜欢一切都到位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T08:25:59.130

`Xcode`总是显示警告，如 - 没有规则来处理架构 i386 的 sourcecode.javascript 类型的文件 '$(PROJECT_DIR)/--/.js' 这就是它不起作用的原因。

结帐下面的线程进行详细讨论 - [iPhone UIWebView local resources using Javascript and handling onorientationChange](https://stackoverflow.com/questions/843820/iphone-uiwebview-local-resources-using-javascript-and-handling-onorientationchan)

# c - 使用 sizeof 运算符的整数范围

> ID：10663538
> 
> 赞同：3
> 
> 时间：2012-05-19T08:13:14.963
> 
> 标签：c, sizeof

考虑一下：

```
1\. printf(“%d”, sizeof(32767));
2\. printf(“%d”, sizeof(-32767));
3\. printf(“%d”, sizeof(-32768)); 
```

1 和 2 的结果为 2，而第三条语句的结果为 4。但是 的范围`int`是从 -32768 到 32767。为什么仅第三条语句就有区别？谁能解释一下？

在我的编译器中，大小`int`为 2。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T09:23:59.123

值`-32768`不被语言视为单个项目，它由两部分组成 - 符号和值。

当上限为 32767 时，该值`32768`不能为 an ，因此确定为较大的类型，如. 只有在那之后才应用标志。`int``long`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T09:27:16.260

编译器将其读取为`-`应用于常量 32768。由于 32768 超出了`int`（在此特定编译器中）的范围，它将被提升为`long`.

事实上，标准头文件的许多实现都定义`INT_MIN`了，比如说，`(-32767-1)`为了避免这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T09:36:03.263

默认情况下，整数常量，但在必要时（当它们不适合 时）`int`被提升为足够大以容纳它们的最小尺寸（例如）。`long``int`

如果 an`int`是 16 位，那么（对于 2 的补码）最大理论范围是从 -32768 到 +32767。但是，在实践中，这会破坏诸如`abs()`不可能（对于 16 位）为`abs(-32768)`. 编译器可以通过设置`INT_MIN`为 -32767 来避免该问题；这样`abs()`对于 的所有有效值都可以正确运行，`int`并且不会意外地在您的脸上炸毁（例如`abs(-32768) = -32768`）。

这样做的最终结果是，理论上可以适合 16 位的整数常量 -32768`int`可能会被提升为，`long`因为它小于`INT_MIN`.

# c++ - 匿名进程

> ID：10663543
> 
> 赞同：1
> 
> 时间：2012-05-19T08:13:48.467
> 
> 标签：c++, process

是否可以在 Windows 中创建一种匿名进程？例如，创建一个显示在任务管理器中的进程，它有一个 PID 等。但是，不是用 EXE 启动它，你只需给它一个当前正在运行的进程的入口点地址（有点像 DLL ) 并启动自己的线程。

这样的事情可能吗？如果是这样，一个人会怎么做？

编辑：另外，如果父进程返回或终止，子进程将与父进程一起死亡。

# audio - 编写音频播放器

> ID：10663547
> 
> 赞同：1
> 
> 时间：2012-05-19T08:14:34.320
> 
> 标签：audio, signal-processing

我目前正在使用 ffmpeg 为 mac 编写音频播放器。我按照教程

[http://dranger.com/ffmpeg/](http://dranger.com/ffmpeg/)

教程有点过时（例如它使用了avcodec_decode_audio2，它已经从ffmpeg库中删除了），播放器工作，但我对代码不太了解，尤其是这些API背后的概念和过程.

所以我正在考虑更多地了解这个主题。如何获得有关音频编程的系统知识？我需要学习数字信号处理吗？有适合初学者的书吗？

# javascript - YUI 3.5 计算列和排序

> ID：10663550
> 
> 赞同：0
> 
> 时间：2012-05-19T08:15:03.567
> 
> 标签：javascript, yui

我正在学习 YUI 3.5，并使用格式化程序计算了列 VAT 和 Total。（见下面的jsfiddle）。

但是对它们进行排序不起作用。我猜是因为我正在为数据创建可视化表示，但它下面没有基础数据。创建计算列以便排序工作的正确方法是什么？

[http://jsfiddle.net/zWk54/1/](http://jsfiddle.net/zWk54/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T16:23:41.650

我在 IRC freenode #yui 频道上收到了回复

```
<Tew> stivlo - http://jsfiddle.net/zWk54/2/  is how I'd do it.
<Tew> (using getter in recordType; just in case someone wants to comment on 
      that but is not tempted to click)
<Tew> stivlo - the examples are linked on top right-hand side,
      http://yuilibrary.com/yui/docs/datatable/datatable-recordtype.html 
     (Sortable generated columns).  In case you have some comment on 
     documentation, we(?)'d appreciate it (it's "that week", it seems). 
```

链接： http: [//jsfiddle.net/zWk54/2/](http://jsfiddle.net/zWk54/2/)和 [http://yuilibrary.com/yui/docs/datatable/datatable-recordtype.html](http://yuilibrary.com/yui/docs/datatable/datatable-recordtype.html)

# actionscript-3 - 动态添加时，Flex Spark.TextArea 中未显示文本

> ID：10663553
> 
> 赞同：0
> 
> 时间：2012-05-19T08:15:18.300
> 
> 标签：actionscript-3, apache-flex, mxml

我正在编写一个简单的代码，其中 Spark TextArea 位于 TabNavigator 中，我想动态地向其中写入一些内容。问题是：当我尝试这样做时，TextArea 保持白色，直到单击它使文本神奇地出现。

mxml 是这样的：http: [//pastebin.com/7WqvXuH2](http://pastebin.com/7WqvXuH2)

非常简单的代码是这样的：

```
xmlError.text += error+"\n\n"; 
```

我也试过了，但结果相同

```
xmlError.appendText(error+"\n\n"); 
```

希望我已经清楚了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T02:12:05.617

作为一种解决方法，我使用了下面的代码，此视图上有多个输入字段，仅将焦点设置在一个文本输入上会导致它们都正确呈现文本。

唯一真正相关的“属性”是 creationComplete 处理程序。

```
 <s:TextInput autoCapitalize="none"
                     autoCorrect="false"
                     creationComplete="{tiFirst.setFocus()}"
                     id="tiFirst"
                     prompt="{data.firstName}"
                     text="{data.firstName}"
                     width="300"
                     tabIndex="0"/> 
```

# asp.net-membership - 删除 asp.net 成员资格和角色提供程序

> ID：10663555
> 
> 赞同：28
> 
> 时间：2012-05-19T08:15:26.720
> 
> 标签：asp.net-membership, roleprovider

无论出于何种原因，我正在处理的站点（稍作停顿后）开始为 asp.net 成员的 sql server 连接而大喊大叫。我正在使用没有 asp.net 成员资格的 mysql，所以这很奇怪。但是为了确定我已经决定删除​​与之相关的任何内容，包括角色提供者。

我已将这些添加到 web.config

```
 <membership>
      <providers>
          <clear />
      </providers>
  </membership>
  <roleManager enabled="false">
      <providers>
          <clear />
      </providers>
  </roleManager>
  <profile enabled="false">
      <providers>
          <clear />
      </providers>
  </profile> 
```

但是，它仍然抛出异常：“配置错误，找不到默认角色提供者。” . 我能做些什么？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-05-19T08:29:45.370

我想我找到了缺失的东西：我还必须删除 RoleManager 模块。

```
<system.webServer>
    <modules runAllManagedModulesForAllRequests="true">
        <remove name="RoleManager" />
    </modules>
</system.webServer> 
```

# html - 如何让 div 使用 100% 的可用高度？

> ID：10663562
> 
> 赞同：0
> 
> 时间：2012-05-19T08:16:14.290
> 
> 标签：html, css

我有下一个html：

```
<div class="left">
    <div style="margin: 32px 0;">
        <div class="border"></div>
    </div>
</div> 
```

和CSS：

```
.left {
    position:absolute;
    background: red;
    height: 50%;
    width: 32px;
}
.border {
    background: green;
    height: 100%;
} 
```

但我没有看到绿框:(

UPD：我想看到绿色框上方和下方的红色方块。
UPD2：绿色框的高度应为 red.height - 32px*2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T08:24:17.693

您的问题是您在这里有 3 个空 div，并且没有一个具有固定高度。因此，即使您这样做`min-height: 100%`，除非某些外部容器的高度您没有显示，否则它也不会起作用。您将需要在其中放置一些内容或为 3 个 div 之一（假设它们是页面上唯一的容器）提供实际高度。就像`.left{ height: #px; }`（# = 你想要的高度）。否则浏览器不知道如何呈现百分比，因为它也没有任何关联。

Div 是块级元素，这意味着它们将假定放入其中的内容的大小，但*如果其中没有内容，它们将假定高度为 0px x 0px。*

[http://jsfiddle.net/X6qkL/5/](http://jsfiddle.net/X6qkL/5/)更新

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T08:28:03.047

第二个 div 没有分配高度，所以最里面的 div 不能分配相对高度。尝试添加以下 CSS 规则：

```
.left div {
    height: 100%;
} 
```

或者，为内部 div 分配明确的高度。

[http://jsfiddle.net/B9z92/1/](http://jsfiddle.net/B9z92/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T08:20:08.213

`min-height: 100%;`中使用`.border{...}`。并添加一个类 `.middle { height: 100%; }`并将其分配给div的父`div`级。`.border{...}`

# jquery - 调试 JQuery - 不在代码中工作

> ID：10663564
> 
> 赞同：0
> 
> 时间：2012-05-19T08:16:41.170
> 
> 标签：jquery, jquery-ui

我正在尝试使此代码正常工作，但在尝试了很多之后我仍然无法运行它。图像应该动画，但它不工作。有什么想法有什么问题吗？谢谢

```
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Untitled Document</title>
<script type=""
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>

<style type="text/css">
img
{
    position:absolute;
}​

</style>

<script type="text/javascript">
$(document).ready(function() {
 $zombie = $('img#flickr');

          function runit(){

            $zombie
             .animate({ opacity: 1 },100)
                .animate({top:'300px',left:'300px'}, {duration:2000})
            .animate({top:'260px',left:'340px'}, {duration:2000})
            .animate({top:'220px', left:'380px'}, {duration:2000})
            .animate({top:'180px', left:'420px'}, {duration:2000})
            .animate({top:'140px', left:'460px'}, {duration:2000})
                .animate({top:'100px', left:'500px'}, 2000,function(){
                   runit();    
                });

        }

        runit();​
});
</script>
</head>

<body>
<!--<img id ="flickr" src="9.png" />
-->
<img id ="flickr" src="http://placekitten.com/g/200/300" />​
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T08:22:27.650

在这里工作正常：http: [//jsfiddle.net/B9z92/](http://jsfiddle.net/B9z92/)

在您的代码示例中，您有标签 fragment `<script type=""`。也许这是你的问题？

你正在经历什么行为？您是否收到任何 javascript 错误？

编辑：看起来您在第 37 行收到错误“Unexpected token ILLEGAL”。您是否从某处复制/粘贴了一些代码？尝试在调用 to 后删除所有空格`runit()`，看看是否能解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T08:27:36.553

**[它](http://jsfiddle.net/thecodeparadox/btLhP/1/)**工作得很好。你的代码有`<script type=""`问题，删除它。但它适用于带有损坏标签的我。如果仍然有问题，则使用`firebug`或此类调试器检查错误。

*   检查 jquery 是否正确加载。
*   拿你`<script>`之前的代码`</body>`，虽然它可能不是问题。

### 转到调用函数的js代码`runit();`，将光标放在后面`;`并`backspace`按键直到它删除分号（`;`）并保存脚本，上传并再次检查。

# haskell - Haskell 中 IO 操作的重复

> ID：10663566
> 
> 赞同：0
> 
> 时间：2012-05-19T08:16:50.390
> 
> 标签：haskell, recursion, haskell-tagsoup

我正在尝试重写一个小程序，该程序从一个或多个网页中抓取信息，然后将其转换为闪存卡。这里的小片段：

```
-- | this takes a string and produces IO [Tag String]
getVerbePage x = fmap parseTags $ openURL $ "http://leconjugueur.lefigaro.fr/conjugaison/verbe/" ++ x ++ ".html"

main = do
    tags <- getVerbePage "aller"
    -- | from here I do whatever I like with a clean [Tag String] 
```

一次做一个我没有问题，IO进入do循环，然后我用纯函数做我需要做的事情。我真的不明白如何以重复的方式做到这一点，基本上我所追求的是：

```
-- | this takes a string and produces IO [Tag String]
getVerbePage x = fmap parseTags $ openURL $ "http://leconjugueur.lefigaro.fr/conjugaison/verbe/" ++ x ++ ".html"

main = do
    verbsString <- getLine -- | example input "aller pouvoir"
    let verbs = splitOn " " verbsString -- | list of strings
    pages <- getVerbePages verbs
    -- | from here use pure functions on pages, which would be type [[Tag String]]

getVerbePages :: [String] -> [[Tag String]] -- | I guess.
getVerbePages ps = ?????? 
```

问题是我如何编写 getVerbePages 来遍历 ps 中的每个字符串并干净地返回它？到目前为止，我已经能够很好地处理递归动作以及所有这些，非常像 Haskell 新手，但我不明白在重复 IO 动作时这一切是如何工作的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T10:16:45.303

如果您想对`IO`一系列事物重复相同的操作，那么您可以使用`mapM`. 它的类型签名是（这里专门用于`IO`）

```
mapM :: (a -> IO b) -> [a] -> IO [b] 
```

与您一起使用它`getVerbPage`意味着`a`类型变量是`String`并且`b`类型变量是`[Tag String]`。然后你会有`mapM getVerbPage :: [String] -> IO [[Tag String]]`，这就是你想要的定义`getVerbPages`。

# android - 在画布中绘制点，如矩阵 android

> ID：10663568
> 
> 赞同：2
> 
> 时间：2012-05-19T08:16:52.957
> 
> 标签：android

我有一个应用程序，我想动态生成像 2 x 2、3 x 3 和 4 x 4 这样的点 ![像这样](../Images/88b6a1a9fdb545afcda362a0832877c9.png)

现在我正在使用以下代码绘制没有动态的点阵：

```
if(test.equals("galmenu2"))
            {
            canvas.drawCircle(wid/4,3*ht/8,3, mPaint);
            canvas.drawCircle(3*wid/4,3*ht/8,3, mPaint);
            canvas.drawCircle(3*wid/4,5*ht/8,3, mPaint);
            canvas.drawCircle(wid/4,5*ht/8,3, mPaint);
            }
            else if(test.equals("galmenu3"))
            {
                canvas.drawCircle(wid/4,3*ht/8,3, mPaint);
                canvas.drawCircle(wid/2,3*ht/8,3, mPaint);
                canvas.drawCircle(3*wid/4,3*ht/8,3, mPaint);
                canvas.drawCircle(wid/4,ht/2,3, mPaint);
                canvas.drawCircle(wid/2,ht/2,3, mPaint);
                canvas.drawCircle(3*wid/4,ht/2,3, mPaint);

                canvas.drawCircle(wid/4,5*ht/8,3, mPaint);
                canvas.drawCircle(wid/2,5*ht/8,3, mPaint);
                canvas.drawCircle(3*wid/4,5*ht/8,3, mPaint);

            }
            else if(test.equals("galmenu4"))
            {
                for(wid=1/8;wid<1;wid+=2/8)
                {
                for(ht=5/16;ht<3/4;ht+=1/8)
                {
                    canvas.drawCircle(wid,ht,3, mPaint);
                }
                }//this for loop crash the application 
            } 
```

我需要一个公式来在我的画布中心生成点请帮助我上面提到的代码添加在 onDraw() 方法中提前谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T09:25:09.320

`n`要在画布上按圆圈绘制`n`，我会使用以下内容：

```
// n is defined
for (int i=0; i<n; i++) {
    for (int j=0; j<n; j++) {
         canvas.drawCircle(((float)i +.5)/n*(float)width, ((float)j +.5)/n*(float)width, 3, mPaint);
     }
} 
```

这里发生了什么？我们循环`n*n`绘制命令：

*   画在`(i+.5)/n`，这是一个介于`0`和之间的数字`1`，它是我们坐标所在的canaws宽度的百分比。
*   乘以宽度得到实际的像素坐标
*   对高度做同样的事情。
*   请注意 (float) 强制转换，这是确保百分比不四舍五入为 int 所必需的。

# javascript - 如何使用 javascript 将一种语言转换为另一种语言的字体转换器？

> ID：10663571
> 
> 赞同：-1
> 
> 时间：2012-05-19T08:17:12.800
> 
> 标签：javascript, html

我想使用javascript制作一个转换器，它将一种字体转换为另一种字体。示例：如果我在表单中输入“A”，那么其他字体将显示“আ”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T08:35:42.113

你能讨论更多关于你的问题吗？您是在谈论一个输入文本的区域，以及另一个显示文本的区域吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T08:21:19.443

发送表单后，只需更改您正在使用的元素上的 Fon't `@font-face`

尝试这样的事情：

```
 @font-face {
    font-family: 'Comfortaa Regular';
    src: url('Comfortaa.eot');
    src: local('Comfortaa Regular'), 
         local('Comfortaa'), 
         url('Comfortaa.ttf') format('truetype'),
         url('Comfortaa.svg#font') format('svg'); 
} 
```

并创建一个 switch case 来选择要在元素上设置的字体系列。

# linux - 检查文件是否存在 Linux bash

> ID：10663575
> 
> 赞同：4
> 
> 时间：2012-05-19T08:17:47.217
> 
> 标签：linux, bash, file

所以我试图检查一个文件是否存在，如果它存在，脚本应该做一些事情。我遇到的问题实际上是让它认识到确实存在某些东西。

```
if [ -e /temp/file.txt ]; then
        echo "file found!"
        sudo cp -r temp/* extra
else
        echo "file not found! Creating new one..."
        ./create.sh
fi 
```

下面是我正在测试的目录中的文件示例。它们显然在那里，但由于某种原因，我无法让脚本看到它。我究竟做错了什么？

```
nima@mkt:/docs/text$ ls -a temp
.  ..  more  file.txt  file2.txt 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-19T08:20:37.383

您在测试中使用绝对路径，而您应该使用相对路径：

```
 if [ -e ./temp/file.txt ]; then 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T08:20:38.510

`/temp/file.txt`与`/docs/text/temp/file.txt`？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T08:21:03.427

您的脚本在`/temp`您查看时查看`/docs/text/temp`

# android - android中的Listitem拖放

> ID：10663585
> 
> 赞同：0
> 
> 时间：2012-05-19T08:20:22.067
> 
> 标签：android, drag-and-drop

![在此处输入图像描述](../Images/8e44d84ea413738b99ff535c5cf69e64.png)

我用过 commonsguy-cwac-touchlist。它工作正常。但问题是，当我拖动列表项时，它会移出 Listview。我该如何解决这个问题。

# asp.net - 测试会员提供者

> ID：10663588
> 
> 赞同：0
> 
> 时间：2012-05-19T08:20:39.550
> 
> 标签：asp.net, nhibernate, testing, membership-provider

我想尝试测试会员提供者。问题是我想测试例如 memb 中的 CreateUser 方法。提供者，此方法应在数据库中插入数据，测试是否已插入以及是否为 True 回滚事务（从数据库中删除用户，保持数据库原样）。

有人可以提供该测试的示例代码提示吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T10:03:20.390

我确信会员资格提供者对用户名有唯一约束，如果插入现有用户名，数据库将不允许在表中插入重复条目。

如果要测试它，只需使用现有用户名对用户表运行插入语句。

# android - 我的 Android 应用必须在市场上发布才能从 AdMob 获得广告收入吗？

> ID：10663591
> 
> 赞同：3
> 
> 时间：2012-05-19T08:20:57.167
> 
> 标签：android, admob

我编写了我的第一个 android 应用程序，并成功地将 AdMob 广告包含在应用程序中。我必须通过 Market (Google Play) 发布应用程序才能开始赚取收入吗？

此外，我了解在开发过程中，我们需要放入测试设备以表明广告仍处于测试模式。当我真正发布应用程序时，我所要做的就是从我的代码中删除 testDevice 对吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T08:55:30.187

> 我必须通过 Market (Google Play) 发布应用程序才能开始赚取收入吗？

您需要发布您的应用程序并使其可供其他人下载和安装，以便在他们使用该应用程序时提供广告请求。只有当用户点击您的广告时，您才会产生收入。

如果您的问题是您是否必须**仅**在 Google Play 商店上发布应用程序才能获得收入，我认为没有必要。

IIRC，没有提及阻止发布者在替代 Android 市场上发布应用程序的发布者[指南和政策。](https://support.google.com/admob/bin/answer.py?hl=en&answer=1307237&topic=1307235&parent=1307209&rd=1)[如果您需要更清楚地了解ToS](http://www.admob.com/home/terms)，您应该咨询法律顾问。

> 此外，我了解在开发过程中，我们需要放入测试设备以表明广告仍处于测试模式。当我真正发布应用程序时，我所要做的就是从我的代码中删除 testDevice 对吗？

您可以留下测试设备 ID，以防止点击测试设备上的广告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T08:57:08.493

AFAIK，您在客户端设置 testmode = false 或检查禁用 admob 站点中的所有测试模式，然后您开始赚钱...

# perl - 如何在“使用基础”的包中创建子例程？

> ID：10663597
> 
> 赞同：3
> 
> 时间：2012-05-19T08:21:44.827
> 
> 标签：perl, orm, metaprogramming

我正在尝试创建一个用于 Mojolicious Web 应用程序的小型 ORM 库。我已经非常喜欢 Ruby 的 Datamapper 库，如果可能的话，我想模仿它的一些行为。

在 Datamapper 中，您可以混合 Resource，然后将方法添加到您的类中，例如“all”等：

```
# User.rb
class User
    include Datamapper::Resource;
end
...

# Application.rb
users = User.all 
```

对于我的库，我正在尝试向从基本模型继承的模块添加一些包级功能，以实现类似的行为。

从本质上讲，我希望能够做一些近似于以下的事情：

```
# User.pm
package User;
use base Model;
...

# Application.pm
my @users = User::all(); 
```

我环顾四周寻找 perl 中的元编程示例，但没有发现任何立即有用的东西。

我所追求的是以下内容：

*   以更惯用的方式实现类似优雅的替代 perl 模式
*   能够在包级别以及对象级别继承子例程
*   能够在当前包的范围内执行“使用”代码，或
*   将当前包传递给在“使用”时执行的代码
*   Perl 元编程指南
*   一个现有的声明式 ORM 库，支持轻松创建模拟适配器以及 DB2 和 MySQL

理想情况下，我想尽可能避免在大字符串上运行 eval 。

任何帮助将不胜感激 ：-）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T09:37:25.453

> 以更惯用的方式实现类似优雅的替代 perl 模式

[角色](http://enwp.org/Role_%28computer_science%29)超越了 mixins。

> 能够在包级别以及对象级别继承子例程

角色通常在包级别使用，但也可以仅将技巧应用于实例。（**FIXME**怎么样？）

> 能够在当前包的范围内执行“使用”代码

[`import`](http://perldoc.perl.org/functions/import.html)

> 将当前包传递给在“使用”时执行的代码

语句中的所有参数`use`都作为参数传入`import`。

> Perl 元编程指南

[Moose::Manual](http://p3rl.org/Moose%3a%3aManual) , [Moose::Cookbook](http://p3rl.org/Moose%3a%3aCookbook)

> 一个现有的声明式 ORM 库，支持轻松创建模拟适配器以及 DB2 和 MySQL

[DBIx::类](http://p3rl.org/DBIx%3a%3aClass)

# php - PHP检查foreach是否存在备用用户名？

> ID：10663603
> 
> 赞同：0
> 
> 时间：2012-05-19T08:22:36.333
> 
> 标签：php, foreach

在我的网站上，我有一个 PHP 注册页面。
有人可以`Ashley`通过制作来模仿`AshIey`。
我不希望这种情况发生。他们用大写替换`L`小写`I`。
字符串是`$username`，我想检查它是否包含大写字母“I”。
如果是这样，我会设置一个新字符串并使用 SQL 查询来查看它是否存在。
但是，如果用户名中有多个大写字母 I 呢？喜欢`DaryII`。
我正在考虑做一个 foreach 语句，但不知道该怎么做。
如果有人能给我一个关于我需要做什么的小演示，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T08:55:10.123

就像 Kasia Gogolek 建议的那样，您可能对`str_replace()`PHP 提供的功能感兴趣。你可以这样使用它：

`$username = str_replace('I', 'l', $username);`

或者，您可能希望使用 Levenshtein 距离函数来确定与`$username`名称字典中的字符串最接近的匹配。仅当数据库中没有匹配项时，您才可以使用字典，即使您替换字符以减少资源使用。PHP 有这样一个函数，它被调用（令你惊讶）`levenshtein()`——[更多在这里](http://php.net/manual/en/function.levenshtein.php)。

如果您可以在 MySQL 主机上定义存储过程，则可以使用以下例程（在 MySQL 5.5.16 上测试）：

```
CREATE FUNCTION `LEVENSHTEIN`(`s1` VARCHAR(255), `s2` VARCHAR(255))
    RETURNS int(11)
    LANGUAGE SQL
    DETERMINISTIC
    CONTAINS SQL
    SQL SECURITY DEFINER
    COMMENT ''
BEGIN
  DECLARE s1_len, s2_len, i, j, c, c_temp, cost INT;
  DECLARE s1_char CHAR;
  DECLARE cv0, cv1 VARBINARY(256);
  SET s1_len = CHAR_LENGTH(s1), s2_len = CHAR_LENGTH(s2), cv1 = "0×00", j = 1, i = 1, c = 0;
  IF s1 = s2 THEN
    RETURN 0;
  ELSEIF s1_len = 0 THEN
    RETURN s2_len;
  ELSEIF s2_len = 0 THEN
    RETURN s1_len;
  ELSE
    WHILE j <= s2_len DO
      SET cv1 = CONCAT(cv1, UNHEX(HEX(j))), j = j + 1;
    END WHILE;
    WHILE i <= s1_len DO
      SET s1_char = SUBSTRING(s1, i, 1), c = i, cv0 = UNHEX(HEX(i)), j = 1;
      WHILE j <= s2_len DO
        SET c = c + 1;
        IF s1_char = SUBSTRING(s2, j, 1) THEN SET cost = 0; ELSE SET cost = 1; END IF;
        SET c_temp = CONV(HEX(SUBSTRING(cv1, j, 1)), 16, 10) + cost;
        IF c > c_temp THEN SET c = c_temp; END IF;
        SET c_temp = CONV(HEX(SUBSTRING(cv1, j+1, 1)), 16, 10) + 1;
        IF c > c_temp THEN SET c = c_temp; END IF;
        SET cv0 = CONCAT(cv0, UNHEX(HEX(c))), j = j + 1;
      END WHILE;
      SET cv1 = cv0, i = i + 1;
    END WHILE;
  END IF;
  RETURN c;
END 
```

您的查询可能如下所示：

```
SELECT t1.`key` FROM `dict` AS t1 WHERE levenshtein("patryk", t1.`key`) < 5 
```

`"patryk"`你的`$username`变量在哪里。

**编辑** 我刚刚根据您提供的示例输入（`DaryII`和`Daryll`）检查了查询，它返回了正确的行。

**编辑 2** 您可能还对百分比感兴趣。然后使用此功能：

```
CREATE FUNCTION levenshtein_ratio( s1 VARCHAR(255), s2 VARCHAR(255) ) 
  RETURNS INT 
  DETERMINISTIC 
  BEGIN 
    DECLARE s1_len, s2_len, max_len INT; 
    SET s1_len = LENGTH(s1), s2_len = LENGTH(s2); 
    IF s1_len > s2_len THEN  
      SET max_len = s1_len;  
    ELSE  
      SET max_len = s2_len;  
    END IF; 
    RETURN ROUND((1 - LEVENSHTEIN(s1, s2) / max_len) * 100); 
  END; 
```

这两个函数都取自[http://www.artfulsoftware.com/infotree/queries.php#552](http://www.artfulsoftware.com/infotree/queries.php#552)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T08:25:41.813

[str_replace](http://php.net/manual/en/function.str-replace.php)应该是您要查找的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T10:02:36.417

您可以通过设置一个规则来避免这个问题，该规则只允许用户名中的小写字母，第一个字母除外。这可以通过这样的正则表达式来完成：

```
if(preg_match('/^[A-Z]{0,1}[a-z]+$/', $username)){
    echo 'Username is allowed';
}else{
    echo 'Username is not allowed';
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T05:57:21.360

我做到了！！！

```
if (preg_match('/[^A-Za-z\d\s]|[^A-Z\s]I|[A-Z]I[a-z]/', $username)) {
die("That username is unavailable for registration.");
} 
```

# ruby-on-rails-3 - Redmine 2.0.0 插件安装错误 ActionController::RoutingError 未初始化常量

> ID：10663609
> 
> 赞同：-1
> 
> 时间：2012-05-19T08:23:27.570
> 
> 标签：ruby-on-rails-3, redmine, redmine-plugins

我已经安装了 Redmine 2.0.0 并尝试在github的**插件目录中安装插件。**
我曾尝试安装两个插件**Monitoring_Controlling**和**Redmine-Bulk-User-Assignments**遵循 github 插件上编写的安装步骤，但在两个插件中都出现相同的错误并且错误如下

```
Started GET "/bulk_user_assignments" for 127.0.0.1 at Sat May 19 13:37:26 +0530 2012

ActionController::RoutingError (uninitialized constant BulkUserAssignmentsController):
  activesupport (3.2.3) lib/active_support/inflector/methods.rb:218:in `constantize'
  activesupport (3.2.3) lib/active_support/inflector/methods.rb:217:in `each'
  activesupport (3.2.3) lib/active_support/inflector/methods.rb:217:in `constantize'
  actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:69:in `controller_reference'
  actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:54:in `controller'
  actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:32:in `call'
  journey (1.0.3) lib/journey/router.rb:68:in `call'
  journey (1.0.3) lib/journey/router.rb:56:in `each'
  journey (1.0.3) lib/journey/router.rb:56:in `call'
  actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:600:in `call'
  rack-openid (1.3.1) lib/rack/openid.rb:98:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.1) lib/rack/etag.rb:23:in `call'
  rack (1.4.1) lib/rack/conditionalget.rb:25:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/head.rb:14:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.1) lib/rack/session/abstract/id.rb:205:in `context'
  rack (1.4.1) lib/rack/session/abstract/id.rb:200:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/cookies.rb:338:in `call'
  activerecord (3.2.3) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:467:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/callbacks.rb:28:in `call'
  activesupport (3.2.3) lib/active_support/callbacks.rb:405:in `_run__108590059__call__4__callbacks'
  activesupport (3.2.3) lib/active_support/callbacks.rb:405:in `send'
  activesupport (3.2.3) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.3) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.3) lib/active_support/callbacks.rb:81:in `send'
  activesupport (3.2.3) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.3) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.3) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.3) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.1) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.3) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.1) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/static.rb:62:in `call'
  railties (3.2.3) lib/rails/engine.rb:479:in `call'
  railties (3.2.3) lib/rails/application.rb:220:in `call'
  rack (1.4.1) lib/rack/content_length.rb:14:in `call'
  railties (3.2.3) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'
  rack (1.4.1) lib/rack/handler/webrick.rb:13:in `run'
  rack (1.4.1) lib/rack/server.rb:265:in `start'
  railties (3.2.3) lib/rails/commands/server.rb:70:in `start'
  railties (3.2.3) lib/rails/commands.rb:55
  railties (3.2.3) lib/rails/commands.rb:50:in `tap'
  railties (3.2.3) lib/rails/commands.rb:50
  script/rails:6:in `require'
  script/rails:6 
```

我是否需要做任何其他事情才能在 redmine 2 中安装插件或在任何其他地方编写路由。这两个插件都是用 rails 2 编写的，所以我将路由文件更改为 rails 3 路由文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T06:46:07.130

基于 Redmine 1.x 的插件将在 2.0 上中断

看redmine2.0发布新闻--> [http://www.redmine.org/news/66](http://www.redmine.org/news/66)

monitor_controlling 插件尚不兼容 Redmine2.0（未做广告），我在这里提出了一个问题 --> [https://github.com/alexmonteiro/Redmine-Monitoring-Controlling/issues/17#issuecomment-5806223](https://github.com/alexmonteiro/Redmine-Monitoring-Controlling/issues/17#issuecomment-5806223)

您需要更改路线文件（其中一项更改）。更多地了解编写未来证明插件的一般范围，这个讨论可能会有一些用处-->

[http://www.redmine.org/issues/10813](http://www.redmine.org/issues/10813)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T19:53:38.333

Redmine Monitoring Controlling Plugin 已为 Redmine 2.0 做好准备。

检查 git 存储库的最后一次提交：[https ://github.com/alexmonteiro/Redmine-Monitoring-Controlling](https://github.com/alexmonteiro/Redmine-Monitoring-Controlling)

# .htaccess - .htaccess RewriteRule 的正确格式

> ID：10663611
> 
> 赞同：0
> 
> 时间：2012-05-19T08:23:31.943
> 
> 标签：.htaccess, mod-rewrite

我有一个使用选项卡的“JQueried”页面 - 选项卡 A、选项卡 B 等选项卡基于这样的链接隐藏/显示内容：`<a href="#tab1" title="Tab1 title">Tab 1</a>` 我正在使用 jQuery 地址插件 v1.4 [http://www.asual.com/jquery/ address/](http://www.asual.com/jquery/address/)为每个选项卡创建新页面标题和新 URL。如果您不知道地址插件会重新创建 URL，那么链接 #tab1 会创建 URL page.html#tab1 但不会刷新页面。它还会更改页面标题，但有什么方法可以创建一个 RewriteRule 以便`http://domain/page.html#tab1`可以通过 say 调用`http://domain/tab1.html`（其中 tab1、tab2 等具有专有名称而不是选项卡！）

已经尝试过，但似乎没有让它工作。例如

```
Options +FollowSymlinks
RewriteEngine on
RewriteRule about.html /test.php#tab1 [NC] 
```

请提出建议。在此先感谢 - 哦，htaccess 将进入实际的根文件夹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T09:10:24.370

对不起，我检查了`\#`，它也不适合我。

如何重定向到`test.php?hash=tab1`，然后：

```
if (isset($_GET["hash"]))
 header ( "Location: test.php#".$_GET["hash"] ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T05:59:27.573

根据我上面的评论 - 我刚刚找到了这个 stackoverflow.com/questions/8606127/mod-rewrite-hash-tags 所以我猜无法完成 -</p>

# jquery - 空文本输入的jQuery验证

> ID：10663619
> 
> 赞同：0
> 
> 时间：2012-05-19T08:24:06.850
> 
> 标签：jquery, html

我有一个`HTML Form` 包含输入文本字段和选择标签。`jQuery`我确保这些输入字段和选择不为空，但如果其中一个为空，则会在该空字段旁边显示一条错误消息，它对我很有效，但是我的问题是，如果输入字段为空然后我填写它，错误消息不会删除，

# jQuery代码

```
$(document).ready(function (){
    $("#aioForm").on('submit',function(e){
        var errorCount = 0;
        $('span.errorMessage').text('');
        $('#addIO select').each(function(){
            var $this = $(this);
            if(this.selectedIndex==0 ){
                var error = 'Please select a cell' ;
                $this.next('span').text(error);
                errorCount = errorCount + 1;   
            }
        });
        var input = $("#aioForm input").val();
        if(input==''){
            $("#aioForm input").next('span').text("fill the name please");
            errorCount= errorCount+1;
        }
        if(errorCount>0){
            e.preventDefault();
        }
        if(errorCount==0){
            $(this)[0].submit(); // submit form if no error
        }else
            return false;
    });
}); 
```

# html代码

```
<div id="addIO">
    <form id="aioForm" method="POST" action="<?php echo URL; ?>InformationObject/addIO">
        <ul id="ioAddul">
            <li class="ioAddli">
                <p>
                    <label>Concept</label>
                    <select id="ConceptSelect"></select>
                    <span class="errorMessage"></span>
                </p>
                <p>
                    <label>Name</label>
                    <input type="text" id="aioConceptName" name="name"  />
                    <span class="errorMessage"></span>
                </p>
            </li>
            <li class="ioAddli">
                <p>
                    <label>Concepts</label>
                    <a href="#" class="smallLink" id="aioShowLink">Show Concepts</a>
                </p>
                <div id="ioAddRelatedConcepts">
                </div>
            </li>
            <li class="ioAddli" id="ioAddContents">
                <p><label>Contents</label></p>
                <p>
                    <label class="ioAddOneContent">write one info</label>
                    <input name="contents[]" type="text" class="longInput"/>
                    <span class="errorMessage"></span>
                    <a href="" class="smallLink" onclick="return ioAddNewContent(this)">new info</a>
                </p>
            </li>
            <li class="ioAddli"id="ioAddOtherRelation">
                <a href="" onclick="return ioAddSetOtherRelation(this)"class="smallLink">add other relation</a>
            </li>
            <li>
                <input type="submit" class="button1" value="save"/>
            </li>
        </ul>
    </form>
</div> 
```

最重要的声明是这个

```
$('span.errorMessage').text(''); 
```

我用了它，它只适用于选择标签，而不适用于输入文本字段 [的完整代码](http://jsfiddle.net/Wiliam_Kinaan/HcjsV/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T09:04:35.917

您需要对每个输入进行循环，在您的代码中，您只检查第一个输入，如果输入不为空，则需要清空范围替换

```
 var input = $("#aioForm input").val();
    if(input==''){
        $("#aioForm input").next('span').text("fill the name please");
        errorCount= errorCount+1;
    } 
```

经过

```
 var inputs = $("#aioForm input");
            inputs.each(function(index, value) {
                var input = $(this).val();
                if(input==''){
                    $(this).next('span').text("fill the name please");
                    errorCount= errorCount+1;
                } else {
                    $(this).next('span').empty();
                }
            }); 
```

祝你好运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T09:19:12.887

您可以简化代码，如下所示：

```
$(document).ready(function (){
    $("#aioForm").on('submit',function(e){
        var errorCount = 0;
        $('span.errorMessage').text('');
        // checkign for multiple select [now you have one]
        var select = $('#addIO select').filter(function(){
            return this.selectedIndex == 0;
        }).next('span').text('Please select a cell');
        // checking for inputs
        var input = $("#aioForm input[type=text]").filter(function() {
           return !this.value;
        }).next('span').text("fill the name please");
        // no error checking
        if(input.length==0 && select.length == 0){
            $(this)[0].submit(); // submit form if no error
        }
        e.preventDefault();
    });
}); 
```

**[演示](http://jsfiddle.net/thecodeparadox/HcjsV/7/)**

# html - 对齐html中的文本

> ID：10663622
> 
> 赞同：0
> 
> 时间：2012-05-19T08:24:25.790
> 
> 标签：html, css, alignment

我在 css 文件中有以下行

```
body {text-align: center;}
table {margin: 0 auto} 
```

这会导致所有文本都对齐到中间。但在 somse inner 中，我希望文本向右或向左对齐所以我添加了

```
 <table style="text-align:right;"> 
```

并且文本仍然居中。我应该添加什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T08:30:19.473

请添加 style="text-align:right" 与`td`. 我认为这将是工作。

谢谢

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T08:33:59.307

您的代码实际上有效，在您的示例中很难说。看看这个小提琴：

[http://jsfiddle.net/UzRdL/](http://jsfiddle.net/UzRdL/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T08:30:35.010

我猜由于父 div（主体），表格居中。我将使用 100% 宽度的 div 并将其中的文本向右对齐 或者将 div 或表格浮动到右侧

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-19T13:41:53.887

如果您只希望表格中的某些文本右对齐。

然后

```
<table>
<tr>
<td> Text </td>
<td style='text-align:right'>  This text is align to right </td>
<td style='text-align:left'> This text is align to the left </td>
</tr>
</table> 
```

# vb.net - 如果用户单击该行并将焦点从该行移开，则重置 DataGridView 空白行

> ID：10663623
> 
> 赞同：4
> 
> 时间：2012-05-19T08:24:39.483
> 
> 标签：vb.net, datagridview, focus, reset

如果用户单击 DataGridView 底部的空白行并将焦点从 DataGridView 移开，则单击的行现在处于指示对该行进行更改的状态。

是否可以告诉 DataGridView 取消将此行标记为已更改？

焦点不在 DataGridView 时是否可以重置此行？

如果 Invoiced On 留空，我们将使用以下事件处理程序来提醒用户：

```
Private Sub dataGridViewPayments_CellValidating(ByVal sender As Object, _
ByVal e As DataGridViewCellValidatingEventArgs) _
Handles DataGridViewPayments.CellValidating

    Dim headerText As String = _
        DataGridViewPayments.Columns(e.ColumnIndex).HeaderText

    ' Validate the Invoiced On cell and display the error if it's empty.
    '-------------------------------------------------------------------
    If (String.IsNullOrEmpty(e.FormattedValue.ToString()) And
        headerText.Equals("Invoiced On")) Then

        DataGridViewPayments.Rows(e.RowIndex).ErrorText = _
            "Please enter an Inoiced On date."

        e.Cancel = True
    End If
End Sub 
```

如果用户只是单击网格然后单击表单中的其他位置，看起来我们需要一种方法来阻止它执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:19:56.057

你可以尝试这样的事情：

```
Private Sub dg_CellValidating(ByVal sender As Object, ByVal e As DataGridViewCellValidatingEventArgs) Handles dg.CellValidating
    Dim headerText As String = dg.Columns(e.ColumnIndex).HeaderText

    'Try this --------------------------------------------------------------
    Dim vClicked As Boolean = False
    If (Control.MouseButtons And MouseButtons.Left) = MouseButtons.Left Then
        vClicked = True
    End If
    '-----------------------------------------------------------------------

    'Validate the Invoiced On cell and display the error if it's empty.
    'And put vClicked here
    If Not vClicked AndAlso (String.IsNullOrEmpty(e.FormattedValue.ToString()) And headerText.Equals("Invoiced On")) Then

        dg.Rows(e.RowIndex).ErrorText = "Please enter an Inoiced On date."

        e.Cancel = True
    End If
End Sub 
```

请让我知道它是否有帮助。=)

# android - 如何显示一个图像视图以及单击它时会出现下一个图像视图

> ID：10663624
> 
> 赞同：0
> 
> 时间：2012-05-19T08:25:11.880
> 
> 标签：android, android-imageview

我希望从 5 个图像视图中随机显示一个图像视图，然后当用户单击显示的图像视图时，我希望出现另一个图像视图，并且该过程将重复直到计数达到 5，但代码一次显示多个图像视图。

我的代码：

```
public class Gamepage extends Activity 
{
    ImageView img,img1,img2,img3,img4;

    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        setContentView(R.layout.trygame);

        img=(ImageView) findViewById(R.id.imageView2);
        img1=(ImageView) findViewById(R.id.imageView3);
        img2=(ImageView) findViewById(R.id.imageView4);
        img3=(ImageView) findViewById(R.id.imageView5);
        img4=(ImageView) findViewById(R.id.imageView6);
        int choose;
        int count=0;
            choose=(int) (Math.random()*5);
            while(count!=5)
            {
            switch(choose)
        {
        case 1:

        img.setVisibility(View.VISIBLE);
                img.setOnTouchListener(new View.OnTouchListener() {

        public boolean onTouch(View v, MotionEvent event) {
            // TODO Auto-generated method stub

            Toast toast= Toast.makeText(Gamepage.this, "caught!! ",     200);
            toast.setGravity(Gravity.RIGHT, 10,10);
            toast.show();

            img.setVisibility(View.INVISIBLE);
            return true;

        }
    });
            //choose=(int) (Math.random()*5);
            //count++;
    break;
    case 2:
        img1.setVisibility(View.VISIBLE);

        img1.setOnTouchListener(new View.OnTouchListener() {

            public boolean onTouch(View v, MotionEvent event) {
                // TODO Auto-generated method stub

                Toast toast= Toast.makeText(Gamepage.this,     "caught!! ", 200);
                toast.setGravity(Gravity.RIGHT, 10,10);
                toast.show();
                img1.setVisibility(View.INVISIBLE);
                return true;
            }
        });
        //choose=(int) (Math.random()*5);
        //count++;
        break;
    case 3:

        img2.setVisibility(View.VISIBLE);

        img2.setOnTouchListener(new View.OnTouchListener() {

            public boolean onTouch(View v, MotionEvent event) {
                // TODO Auto-generated method stub

                Toast toast= Toast.makeText(Gamepage.this, "caught!! ", 200);
                toast.setGravity(Gravity.RIGHT, 10,10);
                toast.show();
                img2.setVisibility(View.INVISIBLE);
                return true;
            }
        });
        //choose=(int) (Math.random()*5);
        //count++;
        break;
    case 4:

        img3.setVisibility(View.VISIBLE);

        img3.setOnTouchListener(new View.OnTouchListener() {

            public boolean onTouch(View v, MotionEvent event) {
                // TODO Auto-generated method stub

                Toast toast= Toast.makeText(Gamepage.this, "caught!! ", 200);
                toast.setGravity(Gravity.RIGHT, 10,10);
                toast.show();
                img3.setVisibility(View.INVISIBLE);
                return true;
            }
        });
        //choose=(int) (Math.random()*5);
        //count++;
        break;
    case 5:

        img4.setVisibility(View.VISIBLE);

        img4.setOnTouchListener(new View.OnTouchListener() {

            public boolean onTouch(View v, MotionEvent event) {
                // TODO Auto-generated method stub

                Toast toast= Toast.makeText(Gamepage.this, "caught!! ", 200);
                toast.setGravity(Gravity.RIGHT, 10,10);
                toast.show();
                img4.setVisibility(View.INVISIBLE);
                return true;

            }
        });
        //choose=(int) (Math.random()*5);
    //  count++;
        break;
        default:
            img4.setVisibility(View.VISIBLE);

            img4.setOnTouchListener(new View.OnTouchListener() {

                public boolean onTouch(View v, MotionEvent event) {
                    // TODO Auto-generated method stub

                    Toast toast= Toast.makeText(Gamepage.this, "caught!! ", 200);
                    toast.setGravity(Gravity.RIGHT, 10,10);
                    toast.show();
                    img4.setVisibility(View.INVISIBLE);
                    return true;

                }
            });
            //choose=(int) (Math.random()*5);
            //count++;
            break;

    }
        choose=(int) (Math.random()*5);
        count++;
        }

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T09:03:10.700

*   在循环之前，您是否将所有 ImageView 的可见性设置为 INVISIBLE？
*   由于循环可以非常快地运行，因此您可能不会以这种方式看到结果。尝试将 Thread.sleep(3000) 放在循环的末尾，这样它会减慢循环速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T13:11:11.337

像这样设置可见性真假是非常糟糕的设计。您可以改为创建一个 ImageView 并使用“setImageResource()”更改图像资源。

如果，据我了解，单击图像的功能只是显示另一个随机图像，您可以执行以下操作：

1- 在您的 XML 布局中，创建一个“ImageView”。

2- 在您的活动 java 代码中，使用您的图像资源创建一个数组（最好是一个数组列表）。

```
ArrayList<int> myImages = new ArrayList<int>();
myImages.add(R.drawable.firstimage);
myImages.add(R.drawable.secondImage); 
```

3-不要编写所有这些侦听器和长开关案例，而是使用以下简单代码：

```
int rnd = Math.random()*5;
int counter = 0;
public void onClick(View v){
   if(counter<5){
      img.setImageResource(myImages.get(rnd));
      counter++;
   }
   else{
      //do whatever you want
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T09:11:37.177

我想我有解决办法。它在这里工作......试试这个：

```
public class GamePage extends Activity {
/** Called when the activity is first created. */

private int count=0;
private ImageView img;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.trygame);

    img=(ImageView) findViewById(R.id.imageView1);
    img.setImageResource(R.drawable.your_bitmap_drawable1);
    img.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            if (count<5){
                int choose=(int) (Math.random()*5);
                switch(choose){
                    case 1:
                        img.setImageResource(R.drawable.your_bitmap_drawable1);
                    break;
                    case 2:
                        img.setImageResource(R.drawable.your_bitmap_drawable2);
                    break;
                    case 3:
                        img.setImageResource(R.drawable.your_bitmap_drawable3);
                    break;
                    case 4:
                        img.setImageResource(R.drawable.your_bitmap_drawable4);
                    break;
                    case 5:
                        img.setImageResource(R.drawable.your_bitmap_drawable5);
                    break;
                    default:
                        img.setImageResource(R.drawable.your_bitmap_drawable5);
                    break;
                }
                Toast toast= Toast.makeText(TextViewEffectsActivity.this, "caught!! ",     200);
                toast.setGravity(Gravity.RIGHT, 10,10);
                toast.show();
            }
            count++;
        }
    });
}
} 
```

**尝试游戏.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent">

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" />

</LinearLayout> 
```

你不需要有 5 个 ImageViews ......告诉我它是否适合你......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T13:22:20.260

我在这里有一个问题：

- 你把你的图像放入一个数组列表中

- 随机化你的列表

- 获取列表中的第一张图片以显示

- 设置监听器或超时以更改为下一个图像。

# javascript - CSS，jQuery：如何缩放图片库？

> ID：10663626
> 
> 赞同：0
> 
> 时间：2012-05-19T08:25:28.380
> 
> 标签：javascript, jquery, html, css

我有一个图片库，其中包含许多内联块容器（类似于国际象棋场）。不，当我使用浏览器缩放 strg + 鼠标滚轮时，图像会被缩放，以便我可以看到更多或更少，具体取决于我是缩小还是放大。

我现在的问题是如何在不使用浏览器缩放功能的情况下直接在 jQuery 中执行此操作（可能使用幻灯片）？

有没有一种简单的方法可以做到这一点，还是我必须改变所有的宽度高度？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T19:16:39.880

也试试这个，以紧凑的形式：

```
$('#image').mouseover(function()
{
    $(this).animate({width: "300px", height: "300px"}, 'slow');
});
$('#image').mouseout(function()
{   
    $(this).animate({width: "200px", height: "200px"}, 'slow');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T10:39:32.397

第一个问题是你想放大*多少*图像以及它们有多大。我问是因为您需要以最大分辨率预加载图像，大图像可能会很慢。

假设这不是问题，我要做的是编写自己的函数来为宽度和高度设置动画；我认为没有更直接的方法了。

除此之外，还有很多 jQuery 插件：只需谷歌它们，我发现了一个有趣的列表：[http ://www.tripwiremagazine.com/2011/10/jquery-image-zoom.html](http://www.tripwiremagazine.com/2011/10/jquery-image-zoom.html)

# c++ - 类内的函数指针

> ID：10663629
> 
> 赞同：0
> 
> 时间：2012-05-19T08:25:52.673
> 
> 标签：c++, function-pointers, typedef

我需要一个用于不同功能的开关来规避频繁的 if 方向。它应该类似于以下代码，封装在一个类中：

```
#include<iostream>
#include<stdlib.h>

using namespace std;

template<class T>
class MaxSwitch
{
public:
typedef T (MaxSwitch::*Max_P)(T,T);
Max_P fooC_P;

MaxSwitch(int Q) {
    if (Q==0)fooC_P=&MaxSwitch::MaxVal1;
    else fooC_P=&MaxSwitch::MaxVal2;
}

inline T MaxVal1(T kx,T MAX)
{
    return kx+1;
}

inline T MaxVal2(T kx,T MAX)
{
    return MAX;
}

};

 int main( int argc, char ** argv )
{
int Q=atoi ( argv[1] );
MaxSwitch<int> MAXSW(Q);

int MAX=5;

for ( int kx=0;kx<MAX;kx++ ) for ( int ky=0;ky<(MAXSW.fooC_P)(kx,MAX);ky++ )
    {
        cout<<"(kx="<<kx<<", ky="<<ky<<endl;
    }

return 0;
 } 
```

我现在有一个小问题，即函数调用 (MAXSW.fooC_P)(ky,MAX) 是错误的。如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T08:32:01.407

`MAXSW.fooC_P`是您需要调用的指向成员函数的指针，并且`MAXSW`是您要调用它的对象。因此，您可以使用以下命令调用该函数：

```
(MAXSW.*(MAXSW.fooC_P))(ky,MAX); 
```

# jquery - 使用 jquery 移动到唯一的下一个列表项

> ID：10663630
> 
> 赞同：1
> 
> 时间：2012-05-19T08:25:54.927
> 
> 标签：jquery, html

我的导航是这样的：

```
<img id="leftButton" />
  <ul id="bullets">
    <li class="style"></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
  </ul>
<img id="rightButton" /> 
```

我想要实现的是，当您单击右侧或左侧按钮时，“样式”类会移动到最近的兄弟姐妹。例如，当我单击#rightButton 时，我想将样式类从第一个列表项移动到第二个，依此类推。我遇到了这样的事情：

```
$('#rightButton').click(function() {
    if  ($('#bullets li').hasClass('style')) {
        $('#bullets li').removeClass('style');
        $('#bullets li').next().addClass('style').
        }
}); 
```

像这样，当您单击#rightButton 时，它会正确地从第一个列表项中删除类“样式”，但将该类添加到所有其他项中。

哦，对不起这个混乱的代码，我是 jQuery 的初学者。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T08:33:47.300

在这种情况下，您使用的选择器不针对单个元素。`#bullets li`将返回 id 元素中包含的所有 5 个列表项`#bullets`。如果您想定位`li`分配了 CSS 类的单曲，`active`请将您的选择器更改为`#bullets li.active`.

因此，您的代码将变为：

```
$('#rightButton').click(function() {
    $('#bullets li.active').removeClass('active').next().addClass('active');
}); 
```

请注意，您可以链接您的调用，而无需测试是否返回了元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T08:31:18.437

```
$('#rightButton, #leftButton').on('click', function(e) {
    var cur = $('ul#bullets li.style'),
        next = cur.next('li'),
        prev = cur.prev('li');
    if (e.target.id == 'rightButton') {
        if (next.length == 1) {
            cur.removeClass('style');
            next.addClass('style');
        }
    } else if (e.target.id = 'leftButton') {
        if (prev.length == 1) {
            cur.removeClass('style');
            prev.addClass('style');
        }
    }
}); 
```

[**演示**](http://jsfiddle.net/thecodeparadox/yKRga/17/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T08:35:02.050

您可以使用以下方法轻松实现此目的：

```
$('#rightButton').click(function() {
    $('#bullets li.style').removeClass('style').next().addClass('style');
});​ 
```

# playframework - 在 Play Morphia 中，我如何管理更新？

> ID：10663633
> 
> 赞同：0
> 
> 时间：2012-05-19T08:26:12.853
> 
> 标签：playframework, morphia

如果我有一个像“Update(JsonObject body)”这样的调用，并且目的是获取现有文档并更新一些文档但不是全部，那么它是如何工作的？

```
{ 
  _id: "12345",
  name: "my name",
  email: "me@here.org",
  privatefield: "secret data"
} 
```

如果上面是当前存储的文档，并且更新只允许包含“姓名”和“电子邮件”，那怎么办？

```
body = { 
  _id: "12345",
  name: "my name",
  email: "me@here.org"
}

static public void Update(JsonObject body){
   Gson gs = new GsonBuilder().create();
   MyModel m = gs.fromJson(body, MyModel.class);
   // this call erases "privatefield" from the document
   m.Save();
} 
```

如果我使用 Gson().fromJson(...) 调用，则创建的对象缺少私有字段值。现在我需要手动合并它们。如果更新后的电子邮件值故意为空怎么办？合并是如何工作的？

我觉得我需要手动映射所有这些看起来很反游戏的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T22:02:59.540

我已经提交了一个问题来请求 PlayMorphia 中的功能来解决这个问题：

[https://github.com/greenlaw110/play-morphia/issues/94](https://github.com/greenlaw110/play-morphia/issues/94)

# solr - 有没有办法在 SOlr 中指定文档感知令牌过滤器？

> ID：10663635
> 
> 赞同：0
> 
> 时间：2012-05-19T08:26:35.353
> 
> 标签：solr, tokenize

我想编写根据其他 InputSolrDocument 字段表现不同的 TokenFilter。我试图通过 ThreadLocal 和 InputProcessor 来实现这一点，但它们在不同的线程中运行......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T11:38:56.730

不，您不能这样做，例如，请参见[此处的讨论。](https://issues.apache.org/jira/browse/SOLR-1536)您可以尝试使用 UpdateProcessor

# mysql - 运行日期/年年查询的更有效方式？

> ID：10663637
> 
> 赞同：6
> 
> 时间：2012-05-19T08:26:49.053
> 
> 标签：mysql, sql

我经常使用以下查询，但我很确定必须有更有效的方法来做到这一点。

基本上，我从用户表中计算人们出生的几十年：

```
select count(*) as howmany, yyyy from bday where (((yyyy > '1949')
AND (yyyy < '1961')) AND (user_id = '63')) UNION
select count(*) as howmany, yyyy from bday where (((yyyy > '1959')
AND (yyyy < '1971')) AND (user_id = '63')) UNION
select count(*) as howmany, yyyy from bday where (((yyyy > '1969')
AND (yyyy < '1981')) AND (user_id = '63')) UNION
select count(*) as howmany, yyyy from bday where (((yyyy > '1979')
AND (yyyy < '1991')) AND (user_id = '63')) UNION
select count(*) as howmany, yyyy from bday where (((yyyy > '1989')
AND (yyyy < '2001')) AND (user_id = '63')) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T08:39:52.597

您可以计算十年并使用它对用户进行分组：

```
SELECT
    COUNT(id) AS howmany,
    CEIL((`yyyy`+1)/10) AS decade,
    yyyy
FROM `bday`
GROUP BY decade 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T08:43:38.043

计算人们出生的几十年：

```
select substring(yyyy, 1, 3) || '0''s' decade, count(*) howmany
from bday
group by decade 
```

# php - grep 与 -f 类似在 PHP

> ID：10663641
> 
> 赞同：8
> 
> 时间：2012-05-19T08:26:58.867
> 
> 标签：php, grep

PHP 中是否有这样的函数在 unix/linux 系统中执行 grep -f 文件名。如果没有，哪些 PHP 函数/工具将有助于为此创建自定义方法/函数。谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-19T12:10:20.210

实际上恕我直言，我想说的是：

```
$result = preg_grep($pattern, file($path)); 
```

看 [^(*文档*)](http://php.net/preg_grep)和 [^(*文档*)](http://php.net/file)。[`preg_grep`](http://php.net/preg_grep)*[`file`](http://php.net/file)*

 **如果您需要（递归地）对一组文件执行此操作，则还有[`glob`](http://php.net/glob)and`foreach`或 ( `Recursive`)`DirectoryIterator`或 [^(*文档*)](http://php.net/GlobIterator)，不要忘记 [^(*文档*)](http://php.net/RegexIterator)。[`GlobIterator`](http://php.net/GlobIterator)*[`RegexIterator`](http://php.net/RegexIterator)*

 *** * *

**SplFileObject**和**RegexIterator**的示例：

```
$stream = new SplFileObject($file); 
$grepped = new RegexIterator($stream, $pattern); 

foreach ($grepped as $line) {
    echo $line;
} 
```

输出（`$file`包含 $pattern 的所有行）：

```
$grepped = new RegexIterator($stream, $pattern); 
foreach ($grepped as $line) {
    echo $line;
} 
```

演示：[https ://eval.in/208699](https://eval.in/208699)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T08:30:46.207

您可以结合使用[file_get_contens()](http://php.net/manual/en/function.file-get-contents.php)函数打开文件和[preg_match_all()](http://php.net/manual/en/function.preg-match-all.php)函数使用正则表达式捕获内容。

```
$file = file_get_contents ('path/to/file.ext');
preg_match_all ('regex_pattern_here', $file, $matches);
print_r ($matches); 
```****

# dns - 如果网站服务器关闭，则显示特殊页面。有没有办法在没有 nginx 代理的情况下做到这一点？

> ID：10663648
> 
> 赞同：3
> 
> 时间：2012-05-19T08:28:13.697
> 
> 标签：dns, custom-error-pages

如果我的网络服务器出现故障，我想向用户显示漂亮的页面（有借口）。怎么可能？

我的第一个想法是在云中创建虚拟机并在那里设置 nginx，它将检查网络服务器是否可用，如果不可用，则显示漂亮的错误页面。

有没有另一种方法来执行它（没有 nginx 代理）？（也许有一些 dns 的魔力 .. 我不知道）

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T18:31:13.477

使用代理，当您的站点启动时，所有流量都将通过该代理。现在，当代理关闭时你会怎么做？- 在尝试处理一个故障点时，您只需引入一个额外的故障点。此外，您的站点响应时间会更短，并且您将为您的流量（您的网站、VPS 输入和 VPS 输出）支付三倍的费用。因此，仅代理想法是没有意义的。

您可以做的是，当您的站点出现故障时，将您站点的 DNS 记录指向其他位置（例如您的 VPS）。您将需要[支持动态更新的 DNS 提供商](http://talkdns.info)。

您也可以将这种基于 DNS 的故障转移完全作为一项服务 - 请参阅[dnshat.com](http://dnshat.com)、[edgedirector.com](http://edgedirector.com)和许多其他的。

# android - 如何根据屏幕分辨率查看徽标？

> ID：10663650
> 
> 赞同：1
> 
> 时间：2012-05-19T08:28:42.000
> 
> 标签：android, imageview, screen-resolution

嗨，我创建了一个医疗应用程序。它工作正常。我在应用程序屏幕的中心放置了一个徽标，我的徽标大小高度和宽度为 70x70，我的模拟器屏幕分辨率为 900 x 800 如果我更改屏幕分辨率，我希望更改我的徽标大小也是动态的。这是我怀疑如何根据屏幕分辨率设置徽标？

代码：

```
public class ImageviewAppActivity extends Activity {

    private ImageView img; 
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        img =(ImageView) findViewById(R.id.imagetest);
        img.setMaxWidth(20);
        img.setMaxHeight(100);

    }
} 
```

xml：main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/imagetest"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_launcher" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T08:33:32.797

看，我认为您应该根据不同的分辨率设置徽标的大小，然后尝试使用

```
DisplayMetrics metrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(metrics);
float density = metrics.density; 
```

密度是浮动的，它的值会根据屏幕尺寸变化......

所以，如果你有

```
240*320 density is 0.5
320*480 density is 1.0
480*800 density is 1.5 
```

并使用密度设置大小，例如， `img.setMaxHeight(density*100);`

并在清单文件中放置多个屏幕支持...[多屏幕支持](http://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T08:32:28.327

我不确定，但您可以通过 dpi 使用不同的屏幕分辨率。在您的项目中，您可以创建不同的可绘制文件夹，允许您将不同分辨率的不同图像放入项目中，这些图像将根据屏幕分辨率从设备自动加载。

```
http://developer.android.com/guide/practices/screens_support.html 
```

# prolog - 删除 DCG 中的左递归 - Prolog

> ID：10663652
> 
> 赞同：6
> 
> 时间：2012-05-19T08:29:38.367
> 
> 标签：prolog, grammar, dcg, left-recursion, prolog-tabling

我在这个语法中的左递归有一个小问题。我正在尝试在 Prolog 中编写它，但我不知道如何删除左递归。

```
<expression> -> <simple_expression>
<simple_expression> -> <simple_expression> <binary_operator> <simple_expression>
<simple_expression> -> <function>
<function> -> <function> <atom>
<function> -> <atom>
<atom> -> <number> | <variable>

<binary_operator> -> + | - | * | /

expression(Expr) --> simple_expression(SExpr), { Expr = SExpr }.
simple_expression(SExpr) --> simple_expression(SExpr1), binary_operator(Op), simple_expression(SExpr2), { SExpr =.. [Op, SExpr1, SExpr2] }.
simple_expression(SExpr) --> function(Func), { SExpr = Func }.
function(Func) --> function(Func2), atom(At), { Func = [Func2, atom(At)] }.
function(Func) --> atom(At), { Func = At }. 
```

我写过类似的东西，但它根本不起作用。如何更改它以使该程序正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T16:27:26.197

只有在您使用反向链接时才会出现问题。在前向链接中，可以直接处理左递归语法规则。提供形式的语法规则：

```
NT ==> NT' 
```

不要形成一个循环。您也可以使用辅助计算，即`{}/1`，如果您将它们放在主体的非终结符之后，并且头部中的非终结符没有专门用于辅助计算的参数。即自下而上的条件。

这是一个左递归语法示例，它在前向链接中完美地工作：

```
:- use_module(library(minimal/chart)).
:- use_module(library(experiment/ref)).

:- static 'D'/3.

expr(C) ==> expr(A), [+], term(B), {C is A+B}.
expr(C) ==> expr(A), [-], term(B), {C is A-B}.
expr(A) ==> term(A).

term(C) ==> term(A), [*], factor(B), {C is A*B}.
term(C) ==> term(A), [/], factor(B), {C is A/B}.
term(A) ==> factor(A).

factor(A) ==> [A], {integer(A)}. 
```

这是图表解析器源代码的[链接。](http://www.jekejeke.ch/idatab/doclet/blog/en/docs/15_min/02_reference/minimal/chart.html)从此链接还可以找到前向链接器的源代码。下面显示了一个示例会话：

```
?- use_module(library(minimal/hypo)).

?- chart([1,+,2,*,3], N) => chart(expr(X), N).
X = 7 
```

在解析过程中，图表解析器将以自下而上的方式填充图表。对于上述产生式中的每个非终结 p/n，将有事实 p/n+2。以下是上述示例的图表结果：

```
:- thread_local factor/3.
factor(3, 4, 5).
factor(2, 2, 3).
factor(1, 0, 1).

:- thread_local term/3.
term(3, 4, 5).
term(2, 2, 3).
term(6, 2, 5).
term(1, 0, 1).

:- thread_local expr/3.
expr(3, 4, 5).
expr(2, 2, 3).
expr(6, 2, 5).
expr(1, 0, 1).
expr(3, 0, 3).
expr(7, 0, 5). 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T08:40:02.427

您的程序的问题确实是左递归；它应该被删除，否则你会陷入无限循环

要删除立即左递归，请替换表单的每个规则

`A->A a1|A a2|....|b1|b2|....`

和：

```
A -> b1 A'|b2 A'|....
A' -> ε | a1 A'| a2 A'|.... 
```

所以功能是

```
function -> atom, functionR.
funtionR -> []. 
```

[维基页面](https://secure.wikimedia.org/wikipedia/en/wiki/Left_recursion)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T09:27:57.743

@thanosQR 的答案相当不错，但适用于比 DCG 更一般的上下文，并且需要更改解析树。实际上，解析的“结果”已被删除，这不好。

如果您只对解析*表达式*感兴趣，我在[这里](https://stackoverflow.com/a/7828855/874024)发布了一些有用的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-09T14:34:45.390

Answer set programming (ASP) provides another route to implement grammars. ASP can be implemented with non-deterministic forward chaining and this is what our library(minimal/asp) provides. The result of ASP are then different models

of the given rules. We use here ASP models to represent a Cocke-Younger-Kasami chart. We begin our chart with the given words we want to parse which are represented by word/3 facts. Compared to DCG we do not pass around anymore

lists but instead word positions. The Prolog text [calc2.p](https://gist.github.com/jburse/be96f5b89eacc303cb9c8730f4313da6#file-calc2-p) shows such an implementation of an ASP based parser. All rules are now (<=)/2 rules, means they are forward chaining rules. And all heads are now choose/1 heads, means they make a ASP

model choice. We explain how expr is realized, the term is realized similary. Since we do not have an automatic translation, we did the translation manually. We will provide the words from right to left and only trigger at the beginning

of each attributed grammar rule:

```
choose([expr(C, I, O)]) <= posted(expr(A, I, H)), word('+', H, J), term(B, J, O),  C is A+B.
choose([expr(C, I, O)]) <= posted(expr(A, I, H)), word('-', H, J), term(B, J, O),  C is A-B.
choose([expr(B, I, O)]) <= posted(word('-', I, H)), term(A, H, O), B is -A.
choose([expr(A, I, O)]) <= posted(term(A, I, O)). 
```

As can be seen no extra predicate expr_rest was needed and the translation from grammar to rules was 1-1\. The same happens for term. The execution of such a grammar requires that first the words are posted from right to left, and the result can

then be read off from the corresponding non-terminal:

```
?- post(word(78,7,8)), post(word('+',6,7)), post(word(56,5,6)), post(word('*',4,5)),
    post(word(34,3,4)), post(word('+',2,3)), post(word(12,1,2)), post(word('-',0,1)),
    expr(X,0,8).
X = 1970 
```

We have also made a Prolog text [show.p](https://gist.github.com/jburse/be96f5b89eacc303cb9c8730f4313da6#file-show-p) which allows visualizing the ASP model as a parsing chart. We simply use the common triangular matrix representation. The parsing chart for the above arithmetic expression has looks as follows:

[![enter image description here](../Images/4bc27a1818c7fdfb8be0ca32c52af7c6.png)](https://i.stack.imgur.com/N0jXg.png)

**Peter Schüller (2018) - Answer Set Programming in Linguistics**
[https://peterschueller.com//pub/2018/2018-schueller-asp-linguistics.pdf](https://peterschueller.com//pub/2018/2018-schueller-asp-linguistics.pdf)

**User Manual - Module "asp"**
[http://www.jekejeke.ch/idatab/doclet/prod/en/docs/15_min/10_docu/02_reference/07_theory/01_minimal/06_asp.html](http://www.jekejeke.ch/idatab/doclet/prod/en/docs/15_min/10_docu/02_reference/07_theory/01_minimal/06_asp.html)

# c# - VB中的切换案例

> ID：10663665
> 
> 赞同：0
> 
> 时间：2012-05-19T08:31:26.680
> 
> 标签：c#, vb.net, vb.net-to-c#

这是我的 vb.net 代码：

```
 Private Function PartOK(ByVal sPart As String) As Boolean
    Dim sCheck As String
    sCheck = "1234567890"
    PartOK = False
    sPart = Trim(sPart)

    If (Len(sPart) = PART_LENGTH) Or (IsNumeric(sPart)) Then
        Select Case sPart
            Case New String("1", PART_LENGTH), New String("2", PART_LENGTH), New String("3", PART_LENGTH)
            Case New String("4", PART_LENGTH), New String("5", PART_LENGTH), New String("6", PART_LENGTH)
            Case New String("7", PART_LENGTH), New String("8", PART_LENGTH), New String("9", PART_LENGTH)
            Case New String("0", PART_LENGTH), Left(sCheck, PART_LENGTH), Left(StrReverse(Left(sCheck, PART_LENGTH)), PART_LENGTH)
            Case Else : PartOK = True
        End Select
    End If
End Function 
```

这个函数我转换成c#。但我不明白开关盒。

你们能解释一下吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T09:37:08.177

这是年度混淆代码奖的有力竞争者。C# *switch*语句没有 VB.NET Select 语句几乎相同的灵活性，因此无法直接转换。在这种情况下，一个又好又快的替代品是 HashSet。它应该类似于这样（假设 PART_LENGTH 为 5）：

```
 private static HashSet<string> badParts = new HashSet<string> { 
        "00000", "11111", "22222", "33333", "44444", "55555", 
        "66666", "77777", "88888", "99999", "01234", "98765" 
    }; 
```

请注意，如果 PART_LENGTH 不是 10，则原始代码中的 Left() 案例可能是一个错误。您肯定想编写代码来填充它，但我这样保留它是为了更清楚地看到被拒绝的内容。那么测试字符串就变成了：

```
 public static bool PartOK(string part) {
        long partNumber;
        if (part.Length != badParts[0].Length) return false;
        if (!long.TryParse(part, out partNumber)) return false;
        if (badParts.Contains(part)) return false;
        return true;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T09:00:00.683

> 这个函数我转换成c#。但我不明白开关盒。

我假设您的意思是当您尝试将其转换为 C# 时，您收到了错误。查看转换后的代码和错误会很有用，但没关系......它也没有帮助您的 VB 代码甚至没有使用 Option Strict On 进行编译。

在 C# 中，`case`表达式必须是编译时常量 - 您不能直接指定范围或多个值（您指定多个情况）。基本上，C# switch/case 语句比 VB 中的限制性更强。

尚不完全清楚您的代码*试图*实现什么，但在 C# 中，您几乎可以肯定只需要使用 if/else 语句。甚至只是一个表达式：

```
// Names changed for sanity. You could use the VB IsNumeric function, or
// consider *exactly* what you want - int.TryParse, long.TryParse or
// decimal.TryParse may be appropriate. Also note that I've changed your "Or"
// into an "And" as that's the only thing that makes sense...
return part.Length == ValidPartLength && 
       IsNumeric(part)) &&
       part != new string(part[0], ValidPartLength) &&
       part != "1234567890".Substring(0, ValidPartLength) &&
       part != "0987654321".Substring(0, ValidPartLength); 
```

# django - Django / 阿帕奇 / WGSI

> ID：10663666
> 
> 赞同：1
> 
> 时间：2012-05-19T08:31:29.330
> 
> 标签：django, apache, django-wsgi

我试图通过 wsgi 配置 apache 和 django。但是我遇到了有关导入设置的错误，例如：

```
ImportError: Could not import settings 'mymask.settings' (Is it on sys.path?): No module named mymask.settings 
```

## 布局

我的网站和我的应用程序位于以下结构中：

```
[root@Fileserver opt]# tree django/mysite2/
django/mysite2/
|-- 1
|-- README
|-- TEMPLATES
|   |-- contact_form.html
|   |-- timedate.html
|   |-- whatmask_input.html
|   |-- whatmask_input.html.bak
|   |-- whatmask_output.html
|   `-- whois_output.html
|-- __init__.py
|-- __init__.pyc
|-- apache
|   `-- django.wsgi
|-- manage.py
|-- mymask
|   |-- __init__.py
|   |-- __init__.pyc
|   |-- models.py
|   |-- models.pyc
|   |-- tests.py
|   |-- views.py
|   `-- views.pyc
|-- settings.py
|-- settings.pyc
|-- static
|   |-- css
|   |-- images
|   `-- js
|       `-- jquery.js
|-- timedate
|   |-- __init__.py
|   |-- __init__.pyc
|   |-- models.py
|   |-- tests.py
|   |-- views.py
|   `-- views.pyc
|-- urls.py
`-- urls.pyc 
```

## apache/django.wsgi

```
import os, sys

path = '/opt/django/mysite2/mymask'
if path not in sys.path:
    sys.path.append(path)

os.environ['DJANGO_SETTINGS_MODULE'] = 'mymask.settings'

import django.core.handlers.wsgi

application = django.core.handlers.wsgi.WSGIHandler() 
```

## httpd.conf

```
# Django

Alias /media/ /opt/django/mysite2/media

<Directory /opt/django/mysite2/media>
Order deny,allow
Allow from all
</Directory>

WSGIScriptAlias / /opt/django/mysite2/apache/django.wsgi

<Directory /opt/django/mysite2/apache>
Order deny,allow
Allow from all
</Directory>

WSGIScriptAlias / /opt/django/mysite2/apache/django.wsgi 
```

有任何想法吗 ？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T09:26:53.787

设置不在`mymask`，它在基本`django/mysite`目录中。因此，您应该将其添加到`sys.path`，并将您的设置`DJANGO_SETTINGS_MODULE`为`settings`。

# emacs - Emacs lisp 定义语法

> ID：10663667
> 
> 赞同：2
> 
> 时间：2012-05-19T08:31:32.250
> 
> 标签：emacs, scheme, elisp, emacs24

`define-syntax`它与 ELisp中的 Scheme 有什么类比吗？在`define-syntax`我可以指定一些关键字，而在 elisp 中`defmacro`似乎我不能。编辑：似乎我要么不太了解你，要么我的问题不清楚。在方案中，可以使用保留字定义宏，例如

> （循环`for`一些`in`列表
> 
> （循环`while`……</p>

在 Emacs Lisp 中，我发现没有办法引入这种糖。最多，我可以制作宏，必须像这样调用

（循环列表（做很多事情......）

可读性很重要

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T09:59:59.647

Scheme 和 Elisp 都有宏系统。“关键字”`define-syntax`都`defmacro`为用户定义的宏引入了名称。

在实际代码中使用宏 foo 时，假设`(foo 1 bar)`宏扩展器必须确定如何将给定的形式 重写为`(foo 1 bar)`不包含用户宏的更简单的形式。宏扩展器调用在定义宏`foo`时定义的函数。即，它调用您指定的函数，`define-syntax`或者`defmacro`使用表单的表示，`(foo 1 bar)`. 表示可以是“语法对象”或普通列表（这在不同的宏系统中有所不同）。

这是我对 和 之间相似性的`define-syntax`看法`defmacro`。

R5RS Scheme 和 Elisp 的宏系统是不同的。

与 R5RS 方案中关联的宏扩展器`foo`可以在`syntax-rules`. 这允许您使用模式匹配来指定重写规则（在内部，语法规则表单将评估为函数）。其他区别：R5RS 方案中的宏扩展算法将帮助您再次无意中引入与程序其他部分的名称冲突的名称（比如来自库，您没有编写自己的名称）。从历史上看，由于名称空间在 Lisp 中的工作方式，这个问题在 Lisp 中并不是什么大问题，但可能会出错。

从历史上看，Scheme 和 Elisp 都使用相同的宏扩展算法，但后来 Schemers 开始尝试其他算法。R5RS 中引入了“语法规则”系统，但演变并没有就此停止。如今，所有现代 Scheme 实现都有（变体）“语法案例”系统。

一些实现已经完成了使此扩展算法与模块（Racket、R6RS 实现等）一起使用的工作。

简而言之，当您阅读 Scheme 宏系统时，请注意准确检查您正在阅读的变体。如果您正在阅读有关限制的内容，那么您很可能在（现在相当旧的）`syntax-rules`系统上找到了文本。

# ruby - Ruby 中的类的剖析？

> ID：10663672
> 
> 赞同：0
> 
> 时间：2012-05-19T08:33:23.613
> 
> 标签：ruby, class

如果你被要求为教学目的编写一个简单的类，你会怎么做？我在想整洁和指示性。一种可以产生物体的东西。也许有一些变量类型而不会太复杂。

作为一个建议，它可以是一个`Person`类，每个对象具有三个属性：姓名、国籍、问候语，但我不确定这是否有助于以最少的代码行获得最大的指导价值？

我希望从编写了数千个 Ruby 课程并且可以将他们的专业知识提炼成完美的教学课程的专家那里得到答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T08:49:24.307

如果您只需要跟踪实例变量中的状态，则可以先向人们展示最简单的类：

```
class Person < Struct.new(:name, :nationality, :greeting) ; end

puts Person.new("b1_", "Somewhere", "Heydiho")
#=> #<struct Person name="b1_", nationality="Somewhere", greeting="Heydiho"> 
```

下一步，以更“传统”的方式显示定义的类：

```
class Person
  attr_accessor :name, :nationality, :greeting

  def initialize(name, nationality, greeting)
    @name = name
    @nationality = nationality
    @greeting = greeting
  end

  def to_s
    "#@name is from #@nationality and says \"#@greeting\""
  end

  def say_hi(name)
    "#@greeting, #{name}"
  end
end 
```

`attr_accessor`然后你可以用自定义的 setter 和 getter做类似的事情。恕我直言，这显示了一个很好的进展。

# spring-mvc - Spring 语言环境解析器 - url 中的当前语言环境

> ID：10663680
> 
> 赞同：1
> 
> 时间：2012-05-19T08:35:11.940
> 
> 标签：spring-mvc, localization, locale, interceptor

我使用这个简单的配置

```
 <beans:bean id="messageSource" class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
        <beans:property name="basename" value="classpath:localization/messages" />
        <beans:property name="defaultEncoding" value="UTF-8" />
    </beans:bean>

    <interceptors>
        <beans:bean class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor">
            <beans:property name="paramName" value="lang" />
        </beans:bean>
    </interceptors>

    <beans:bean id="localeResolver" class="org.springframework.web.servlet.i18n.CookieLocaleResolver">
        <beans:property name="defaultLocale" value="en" />
        <beans:property name="cookieMaxAge" value="100000" />
    </beans:bean> 
```

效果很好，但是如果有人将 url 发送给其他人怎么办？这仅适用于客户端浏览器，如果用户更改本地化，它将设置一个 cookie。我已经看到很多网站在 url 中的第一个斜杠（例如`nette.org/en/about`）之后进行了本地化。当有人发送此链接时，它将根据 url 解析本地化。在 spring 框架中是否存在任何简单的解决方案来做到这一点？以某种方式在 url 中映射这个地方？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-19T09:21:51.763

而不是**CookieLocaleResolver**使用**SessionLocaleResolver**。

```
 <bean id="localeResolver" class="org.springframework.web.servlet.i18n.SessionLocaleResolver">
        <property name="defaultLocale" value="en"/>
    </bean> 
```

我认为这应该可以解决您的问题。

干杯。

# google-app-engine - AppEngine 数据存储区实体统计信息不可用。但它在本地工作。

> ID：10663682
> 
> 赞同：2
> 
> 时间：2012-05-19T08:35:26.887
> 
> 标签：google-app-engine, google-cloud-datastore

我在 appengine 上有一个应用程序。它在本地运行良好。今天早上，我部署了它，但它不能正常工作。这是[应用链接](http://team-app.appspot.com/login)，您可以使用用户名：qingWANG & 密码：wang123456 以教师身份登录。请原谅它丑陋的样子，因为它只是一个原型。登录后点击reviewAssignment，在新页面可以看到作业学生上传的内容。您可以尝试单击分数按钮，您将看到 500 服务器错误。奇怪的是，第一个得分按钮可以正常工作，尽管一开始就不行；其他的完全不起作用。

当我检查数据存储管理员时，它显示：

![在此处输入图像描述](../Images/298e61cc10bafa165b0d4e17edbe6d26.png)

我多次在本地测试了所有这些页面。但是为什么我部署的时候会出现这个错误呢？

此致。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T08:41:31.720

它对我有用。我没有收到任何 500 错误...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T08:45:09.263

转到您的仪表板并检查日志以查看发生了什么...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-23T10:19:52.723

根据统计页面（[https://cloud.google.com/appengine/docs/standard/java/datastore/stats](https://cloud.google.com/appengine/docs/standard/java/datastore/stats)）

“为了使存储和更新统计数据的开销保持合理，Cloud Datastore 会逐步删除统计实体”

因此，当拥有大量命名空间或实体时，数据存储统计信息将变得不可用。

因此，在某些时候必须使用分片计数器 ( [https://cloud.google.com/appengine/articles/sharding_counters )。](https://cloud.google.com/appengine/articles/sharding_counters)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-01-14T12:39:42.770

我将我的应用程序部署到服务器，然后我也遇到了这种情况。

无论我做什么，我都可以保存一个Entity并通过Key获取它。但我总是通过查询失败。

两个小时后，神奇的事情发生了。我回到控制台并刷新数据......他们在这里。我保存到数据库中的每一个数据都在那里。

...显然，您不需要做任何事情来修复它。让它运行一段时间。它将自行修复。

# php - php上的3d画布框架

> ID：10663683
> 
> 赞同：2
> 
> 时间：2012-05-19T08:35:40.593
> 
> 标签：php, image, imagemagick, imagick

我正在开发一个在运行时创建框架的项目，但所有者想要困难的事情:) 我设法对这个项目做了一些事情。

> 但业主想要这些：

![第一件事](../Images/a8e6802916696822ff579f51fa2c352c.png)

> 和

![第二件事](../Images/029db593d163378496fc726ccd39dc05.png)

> **我在互联网上找到了一些代码，就是这样。**

```
 $im = new Imagick('Penguins.jpg');       
        $im->setImageFormat('png');
        $d = $im->getImageGeometry();
        $w = $d['width'];
        $h = $d['height'];
        $im3 = new Imagick();
        $im3->newImage(1, $h, 'none', 'png');
        $im3->setImageVirtualPixelMethod(Imagick::VIRTUALPIXELMETHOD_TRANSPARENT);
        $im1 = $im->clone();

        $im1->setImageVirtualPixelMethod(Imagick::VIRTUALPIXELMETHOD_TRANSPARENT);
        $im1->setImageMatte(true);
        $im1->cropImage(($w - 10), $h, 0, 0);
            /* $controlPoints = array(
             kenar açisi, orta açi,15,15,
            ($w - 10), 0, ($w - 10), 0,
            0, $h, 25, ($h - 20),
            ($w - 10), $h, ($w - 10), $h
        );*/
        $controlPoints = array(
             0,0,15,15,
            ($w - 10), 0, ($w - 10), 0,
            0, $h, 25, ($h - 20),
            ($w - 10), $h, ($w - 10), $h
        );
        $im1->distortImage(Imagick::DISTORTION_BILINEAR, $controlPoints, true);
        $im2 = $im->clone();
        $im2->setImageVirtualPixelMethod(Imagick::VIRTUALPIXELMETHOD_TRANSPARENT);
        $im2->setImageMatte(true);          
        $im2->cropImage(10, $h, ($w - 10), 0);
        $controlPoints2 = array(
            0, 0, 0, 0,
            10, 0, 10, 10,
            0, $h, 0, $h,
            10, $h, 10, ($h - 10)
        );
        $im2->distortImage(Imagick::DISTORTION_BILINEAR, $controlPoints2, true);

         $im4 = $im->clone();
        $im4->setImageVirtualPixelMethod(Imagick::VIRTUALPIXELMETHOD_TRANSPARENT);
        $im4->setImageMatte(true);          
        $im4->cropImage($w, 10, 0,  0);
       $controlPoints4 = array(
            0, 0, 0, 0,
            10, 0, 10, 10,
            $w, 10, $w, 10,
            $w, 10, ($w -10 ), 10
        );
        $im4->distortImage(Imagick::DISTORTION_BILINEAR, $controlPoints4, true);

        $image = new Imagick();
        $image->addImage($im4);
        $image->addImage($im1);
        $image->addImage($im3);
        $image->addImage($im2);
        $image->resetIterator();
        $combined = $image->appendImages(false);
        $shadow = $combined->clone();
        $shadow->setImageBackgroundColor(new ImagickPixel('black'));
        $shadow->shadowImage(50, 3, 5, 5);
        $shadow->compositeImage($combined, Imagick::COMPOSITE_OVER, 0, 0);    
        header("Content-Type: image/png");
        echo $shadow; 
```

> 结果：

![在此处输入图像描述](../Images/fc3dbafe8fc0b2cecca587d06eb9e0e0.png)

> 谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T13:50:51.997

我也是imagick的新手，我相信我们正在做同样的项目。

这是我的方法，但需要改进。

```
$im = new Imagick('Koala.jpg');
$im->setImageFormat('png');
$im->cropThumbnailImage(300,200);

$p1 = $im->clone();
$p1->cropImage(50, 150, 0, 25);
$p1->setImageVirtualPixelMethod(Imagick::VIRTUALPIXELMETHOD_TRANSPARENT);
$p1->setImageMatte(true);

$cPoints = array(
    0,0, 5,5, 
    50,0, 50,0, 
    0,150, 5,145, 
    50,150, 50,150 
);

$p1->distortImage(Imagick::DISTORTION_BILINEAR, $cPoints, true);

$p2 = $im->clone();
$p2->cropImage(5, 150, 50, 25);
$p2->setImageVirtualPixelMethod(Imagick::VIRTUALPIXELMETHOD_TRANSPARENT);
$p2->setImageMatte(true);

$cPoints2 = array(
    0,0, 0,0, 
    5,0, 5,5, 
    0,150, 0,150, 
    5,150, 5,145 
);    

$p2->distortImage(Imagick::DISTORTION_BILINEAR, $cPoints2, true);

$canvas1 = new Imagick();
$canvas1->newImage(55, 200, 'none','png');
$canvas1->setImageVirtualPixelMethod(Imagick::VIRTUALPIXELMETHOD_TRANSPARENT);
$canvas1->setImageMatte(true);

$canvas1->compositeImage( $p1, imagick::COMPOSITE_OVER, 0,25 );
$canvas1->compositeImage( $p2, imagick::COMPOSITE_OVER, 50,25 );

$p3 = new Imagick();
$p3->newImage(10, 200, 'none','png');
$p3->setImageVirtualPixelMethod(Imagick::VIRTUALPIXELMETHOD_TRANSPARENT);

$p4 = $im->clone();
$p4->cropImage(50, 200, 65, 0);
$p4->setImageVirtualPixelMethod(Imagick::VIRTUALPIXELMETHOD_TRANSPARENT);
$p4->setImageMatte(true);

$cPoints4 = array(
    0,0, 5,5, 
    50,0, 50,0, 
    0,200, 5,195, 
    50,200, 50,200 
);

$p4->distortImage(Imagick::DISTORTION_BILINEAR, $cPoints4, true);

$p5 = $im->clone();
$p5->cropImage(5, 200, 135, 0);
$p5->setImageVirtualPixelMethod(Imagick::VIRTUALPIXELMETHOD_TRANSPARENT);
$p5->setImageMatte(true);

$cPoints5 = array(
    0,0, 0,0, 
    5,0, 5,5, 
    0,200, 0,200, 
    5,200, 5,195 
);

$p5->distortImage(Imagick::DISTORTION_BILINEAR, $cPoints5, true);

$p6 = new Imagick();
$p6->newImage(10, 200, 'none','png');
$p6->setImageVirtualPixelMethod(Imagick::VIRTUALPIXELMETHOD_TRANSPARENT);

$p7 = $im->clone();
$p7->cropImage(50, 150, 150, 25);
$p7->setImageVirtualPixelMethod(Imagick::VIRTUALPIXELMETHOD_TRANSPARENT);
$p7->setImageMatte(true);

$cPoints7 = array(
    0,0, 5,5, 
    50,0, 50,0, 
    0,150, 5,145, 
    50,150, 50,150 
);

$p7->distortImage(Imagick::DISTORTION_BILINEAR, $cPoints7, true);

$p8 = $im->clone();
$p8->cropImage(5, 150, 200, 25);
$p8->setImageVirtualPixelMethod(Imagick::VIRTUALPIXELMETHOD_TRANSPARENT);
$p8->setImageMatte(true);

$cPoints8 = array(
    0,0, 0,0, 
    5,0, 5,5, 
    0,150, 0,150, 
    5,150, 5,145 
);

$p8->distortImage(Imagick::DISTORTION_BILINEAR, $cPoints8, true);

$canvas2 = new Imagick();
$canvas2->newImage(55, 200, 'none','png');
$canvas2->setImageVirtualPixelMethod(Imagick::VIRTUALPIXELMETHOD_TRANSPARENT);
$canvas2->setImageMatte(true);

$canvas2->compositeImage( $p7, imagick::COMPOSITE_OVER, 0,25 );
$canvas2->compositeImage( $p8, imagick::COMPOSITE_OVER, 50,25 );

$pImage = new Imagick();
$pImage->addImage($canvas1);
$pImage->addImage($p3);
$pImage->addImage($p4);
$pImage->addImage($p5);
$pImage->addImage($p6);
$pImage->addImage($canvas2);
$pImage->resetIterator();

$combined = $pImage->appendImages(false);

$shadow = $combined->clone(); 

$shadow->setImageBackgroundColor( new ImagickPixel( 'black' ) ); 

$shadow->shadowImage( 50, 3, 5, 5 ); 

$shadow->compositeImage( $combined, Imagick::COMPOSITE_OVER, 0, 0 ); 

header("Content-Type: image/png");
echo $shadow; 
```

结果是；

![](../Images/78516319c35aea5afeb7d497d7344eaf.png)

我希望它有所帮助，但如果您找到更简单的解决方案，请告诉我们，因为我也需要它:)

# matlab - Matlab：如何在其他功能中更改按钮的属性？

> ID：10663684
> 
> 赞同：1
> 
> 时间：2012-05-19T08:35:41.013
> 
> 标签：matlab, matlab-guide

我创建了一个指南 GUI，我需要在另一个功能中更改其中一个按钮的颜色。我的朋友告诉我，如果不使用 GUIDE GUI，那么只能在两侧全局按下按钮。但它不适用于指南 GUI。谁能告诉我为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T15:20:11.137

您不必使用`global`变量，也可以通过`handles`（如果您使用 GUIDE）访问它。

```
 function myCallback(hObj,evt,handles)
      data = get(handles.myOtherPushButton);
      disp(data);
 end 
```

# java - OpenCV Android 初始化 Mat 使用 unsatisfiedLinkedError 使应用程序崩溃

> ID：10663687
> 
> 赞同：3
> 
> 时间：2012-05-19T08:35:42.503
> 
> 标签：java, android, c++, opencv, mixed

似乎我无法使用任何 opencv 变量或函数，它仅使用 Mat outMat = new Mat(); 会因以下类型的错误而崩溃；当我在java类中编码时这段代码。

```
Exception Ljava/lang/UnsatisfiedLinkError; thrown during Lorg/opencv/core/Mat

05-19 11:27:58.403: E/AndroidRuntime(890): FATAL EXCEPTION: main
05-19 11:27:58.403: E/AndroidRuntime(890): java.lang.ExceptionInInitializerError
05-19 11:27:58.403: E/AndroidRuntime(890):  at com.android.ndkexample.FarhandkproActivity$1.onClick(FarhandkproActivity.java:60)
05-19 11:27:58.403: E/AndroidRuntime(890):  at android.view.View.performClick(View.java:2408)
05-19 11:27:58.403: E/AndroidRuntime(890):  at android.view.View$PerformClick.run(View.java:8816)
05-19 11:27:58.403: E/AndroidRuntime(890):  at android.os.Handler.handleCallback(Handler.java:587)
05-19 11:27:58.403: E/AndroidRuntime(890):  at android.os.Handler.dispatchMessage(Handler.java:92)
05-19 11:27:58.403: E/AndroidRuntime(890):  at android.os.Looper.loop(Looper.java:123)
05-19 11:27:58.403: E/AndroidRuntime(890):  at android.app.ActivityThread.main(ActivityThread.java:4627)
05-19 11:27:58.403: E/AndroidRuntime(890):  at java.lang.reflect.Method.invokeNative(Native Method)
05-19 11:27:58.403: E/AndroidRuntime(890):  at java.lang.reflect.Method.invoke(Method.java:521)
05-19 11:27:58.403: E/AndroidRuntime(890):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-19 11:27:58.403: E/AndroidRuntime(890):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-19 11:27:58.403: E/AndroidRuntime(890):  at dalvik.system.NativeStart.main(Native Method)
05-19 11:27:58.403: E/AndroidRuntime(890): Caused by: java.lang.UnsatisfiedLinkError: Library opencv_java not found
05-19 11:27:58.403: E/AndroidRuntime(890):  at java.lang.Runtime.loadLibrary(Runtime.java:461)
05-19 11:27:58.403: E/AndroidRuntime(890):  at java.lang.System.loadLibrary(System.java:557)
05-19 11:27:58.403: E/AndroidRuntime(890):  at org.opencv.core.Mat.<clinit>(Mat.java:2065)
05-19 11:27:58.403: E/AndroidRuntime(890):  ... 12 more 
```

我正在使用 java ndk ， ndk 部分成功编译，甚至在 java 上也给出了结果。但是当我在java中调用任何opencv函数或变量时，它会给出同样的上述错误。

我已经在外部添加了opencv java库，它编译完美没有任何错误......

如果我通过进入项目属性-> Android 来使用库项目，那么我必须添加浏览文件夹的 OpenCV 2.3 库项目。这样做然后它工作正常并且不会崩溃。但是大小变成了 14 MB 并且需要太多时间来加载。因此，我没有尝试将 OpenCVAndroid jar 文件作为外部库，但使用它却给了我错误。

请帮助，因为我花了 2-3 个小时但无法解决它。由于图书馆项目的增加，我对大尺寸不感兴趣。

# java - java with eclipse - 丢失的设计页面

> ID：10663689
> 
> 赞同：3
> 
> 时间：2012-05-19T08:35:47.893
> 
> 标签：java, eclipse, swing

我正在使用 Eclipse 学习 Java - 使用 javax.swing 开始了一个项目，并且可以查看一个设计页面，其中显示了我的页面布局和组件的各种调色板等。现在这个设计页面似乎已经消失了，我找不到任何恢复它的选项。我希望有人能让我重回正轨。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T11:06:18.173

`MySwingPanel.java`您是否尝试过在包编辑器中右键单击类（例如） `Open With->WindowBuilder Editor`？

上次您选择的`Open With`内容 - 这是双击打开该文件的编辑器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T09:17:40.153

您是否尝试过更改视角？单击 Eclipse 右上角 DDMS 选项卡旁边的箭头并选择“Java”透视图。

# c# - 存储 m:n 关系时的实体框架 DbUpdateException

> ID：10663692
> 
> 赞同：1
> 
> 时间：2012-05-19T08:36:36.903
> 
> 标签：c#, entity-framework, ef-code-first

我在创建和/或存储与 EF 4.3 Code first 的 m:n 关系时遇到问题

因此，第一个实体`Publication`被定义为具有其他一些内部标量属性：

```
 public class Publication : IDataErrorInfo{

    [Key]
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public int PublicationId { get; set; }

    [InverseProperty("Publications")]
    public virtual ICollection<Group> Groups { get; set; } 
```

和其他类以同样的方式：

```
 public class Group : IDataErrorInfo {

    [Key]
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public int GroupId { get; set; }

    [InverseProperty("Groups")]
    public ICollection<Publication> Publications { get; set; } 
```

根据众多文章，这应该没问题。

我出现了几个问题。首先：

*   如果我创建一个新出版物并将其声明为一些组。全部存储到数据库中。但随后我重新启动程序，同一特定出版物将 ICollection 设置为空。因此与集团的关系信息已被删除。我不知道为什么:(
*   当我尝试使用 Group 关系更新现有的 Publication 条目时，会引发 DBUpdateException 并带有以下文本：

> 保存不为其关系公开外键属性的实体时发生错误。EntityEntries 属性将返回 null，因为无法将单个实体标识为异常源。通过在实体类型中公开外键属性，可以更轻松地处理保存时的异常

在内部异常中是一样的，在这个内部异常中是这样的：

> 违反 PRIMARY KEY 约束“ PK_Publicat *_3AF5D6A10AD2A005* ”。无法在对象“dbo.PublicationGroups”中插入重复键。该语句已终止。

我断言出版物的新值如下：

```
var entry = db.Publications.First(a => a.PublicationId == publKey);
entry.Groups = db.Groups.
                Where(a => groupKeys.Contains(a.GroupId)).
                Select(b => b).
                ToList(); 
```

where`publKey`是已编辑实体的键，`groupKeys`是应该与发布相关的 GroupId 的列表。

调用后`db.SaveContext()`抛出异常

这个话题已经被很多文章覆盖了，但我没有找到任何解决方案。所有示例都使用相同的代码，但显然我遗漏了一些东西。我使用 SQL Ce 4.0 作为持久性数据存储。

谢谢大家的回答，我从昨天开始就在处理它，但不知道为什么会发生这种情况

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T08:49:50.790

将组添加到数据库后是否调用 .Save？否则，当您尝试将组添加到发布时，它们实际上还不会在 DbSet 中。以下代码对我有用 - 也许您可以澄清它与您的代码有何不同？

```
public class Publication
{
    public int PublicationId { get; set; }
    public string PublicationName { get; set; }
    public virtual ICollection<Group> Groups { get; set; }
}

public class Group
{
    public int GroupId { get; set; }
    public string GroupName { get; set; }
    public ICollection<Publication> Publications { get; set; }
}

public class Context : DbContext
{
    public DbSet<Publication> Publications { get; set; }
    public DbSet<Group> Groups { get; set; }
}

class Program
{
    static void Main(string[] args)
    {
        Database.DefaultConnectionFactory = new SqlCeConnectionFactory("System.Data.SqlServerCe.4.0");
        Database.SetInitializer(new DropCreateDatabaseIfModelChanges<Context>());

        Context context = new Context();

        // Only add the groups if it's a new database
        if (!context.Groups.Any())
        {
            context.Groups.Add(new Group { GroupName = "Group 1" });
            context.Groups.Add(new Group { GroupName = "Group 2" });
            context.SaveChanges();
        }

        if (context.Publications.Any())
        {
            Console.WriteLine("At startup, P1 is in groups " + String.Join(", ", context.Publications.First().Groups.Select(g => g.GroupName)));
        }

        // Add publication
        Publication p;
        p = new Publication();
        p.Groups = context.Groups.ToList();     // Add to all existing groups
        context.Publications.Add(p);
        context.SaveChanges();

        Console.WriteLine("P1 is in groups " + String.Join(", ", context.Publications.First().Groups.Select(g => g.GroupName)));
    }
} 
```

（代码更新为使用 SqlCe 提供程序）

# bash - 在 Bash 中从字符串更改为数组无法按预期工作

> ID：10663694
> 
> 赞同：3
> 
> 时间：2012-05-19T08:37:01.053
> 
> 标签：bash

我想将排序方法的结果放入一个数组中，其中每个单元格都包含一个单词。我尝试了此代码，但仅打印了 $file 的一部分并且未对其进行排序：

```
#!/bin/bash
for file in `ls ${1}` ; do
    if [[ ! ($file = *.user) ]] ; then
        continue
    fi

    arr=(`sort -nrk4 $file`)
    echo ${arr[*]}

done 
```

为什么这不起作用？我怎样才能做到这一点？

数据文件：

```
name1 01/01/1994 a 0
name2 01/01/1994 b 5
name3 01/01/1994 c 2 
```

如果我只运行排序行（sort -nrk4 $file），这就是打印的内容：

```
name2 01/01/1994 b 5
name3 01/01/1994 c 2
name1 01/01/1994 a 0 
```

当我运行上面的 2 行时，这就是它的打印内容：

```
 name1 01/01/1994 a 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T11:15:15.457

为了将`sort`输出的每一行放入自己的数组元素中，`IFS`需要设置为换行符。要输出数组，您需要对其进行迭代。

```
#!/bin/bash
for file in $1; do
    if [[ ! $file = *.user ]]; then
        continue
    fi

    saveIFS=$IFS
    IFS=$'\n'
    arr=($(sort -nrk4 "$file"))
    IFS=$saveIFS
    for i in "${arr[@]}"
    do
        echo "$i"
    done

done 
```

或者，不要重置`IFS`，不要使用循环输出，以下命令将输出由换行符分隔的元素，因为第一个字符`IFS`用于输出分隔符，当`*`用于引用上下文中的下标时：

```
echo "${arr[*]}" 
```

请记住，引用可以解决所有问题。

不要`ls`在`for`循环中使用。如果`$1`可能包含通配符，则应不加引号。如果目录或文件名可能包含空格字符，则应该引用它。理想情况下，`$1`应在此处使用 的内容之前对其进行验证。

比较运算符的优先级高于否定运算符，因此不需要括号。

对于命令替换，`$()`优先于反引号。它们更具可读性并且更易于嵌套使用。

最后，当变量被扩展时，应该被引用。此外，`@`应该几乎总是用于下标数组。

# html - extjs "helloworld" 例子，不运行？

> ID：10663695
> 
> 赞同：1
> 
> 时间：2012-05-19T08:37:04.307
> 
> 标签：html, sencha-touch, xampp, extjs

根据[本网站](http://www.sencha.com/learn/getting-started-with-ext-js-4)的示例，我按照步骤操作，但在浏览器中没有得到任何输出。

如示例中所述，文件“index.html”应位于以下路径中

'D:\xampp\htdocs\helloext\extjs\index.html'

其“index.html”内容如下：

```
<html>
<head>
    <title>Hello Ext</title>
    <link rel="stylesheet" type="text/css" href="extjs/resources/css/ext-all.css">
    <script type="text/javascript" src="extjs/ext-debug.js"></script>
    <script type="text/javascript" src="app.js"></script>
</head>
<body></body>
</html> 
```

但是，当我在 Chrome 或 FireFox 中运行此示例时，没有要显示的输出。

请指导我让这个小例子正确运行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T08:45:14.440

您是否按照第 2.1 节（应用程序结构）末尾的说明进行操作？您需要创建 app.js 文件：

> 现在您已准备好编写应用程序代码。打开 app.js 并插入以下 JavaScript 代码：

```
Ext.application({
    name: 'HelloExt',
    launch: function() {
        Ext.create('Ext.container.Viewport', {
            layout: 'fit',
            items: [
                {
                    title: 'Hello Ext',
                    html : 'Hello! Welcome to Ext JS.'
                }
            ]
        });
    }
}); 
```

# shell - 机架空间云中的 ubuntu linux 但 www-data 用户未显示 www-data@server1 用于登录 shell

> ID：10663700
> 
> 赞同：-1
> 
> 时间：2012-05-19T08:39:12.790
> 
> 标签：shell, ubuntu, rackspace

我在机架空间云上的 ubuntu 11.10 上运行了一个服务器

root 和其他用户成功地以格式显示登录 shell

根@server1：

但是，对于 www-data 用户而言，情况并非如此。

我该如何纠正？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T08:41:04.693

Root 和其他用户帐户设置为 /bin/sh

对于 www-data，您需要为此更改登录 shell。

以 root 身份通过 ssh 登录

并输入

```
chsh -s /bin/bash www-data 
```

这将更改 www-data 的登录 shell，以便使用 /bin/sh

# eclipse - 在 Eclipse 中构建 flex 应用程序

> ID：10663701
> 
> 赞同：0
> 
> 时间：2012-05-19T08:39:21.943
> 
> 标签：eclipse, apache-flex, fdt

我安装了 eclipse 和 FDT 插件。现在我想创建一个弹性项目。

我想知道如何为 mxml 找到一个设计器，我可以在其中拖放列表、按钮并在 flex 中构建 UI。

我对 flex 完全陌生。

此外，一旦我有了它，如果我将它构建为应用程序，它似乎会生成一个 swf 文件。不知道我是否可以在除浏览器之外的任何东西上运行它。最新的 adobe flash player 没有独立的 exe。

如果我需要构建弹性应用程序，我想了解推荐的工作流程。我基本上是在考虑开发一个桌面/网络应用程序，它有融合图表来可视化某些数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T10:39:59.023

> 我想知道如何为 mxml 找到一个设计器，我可以在其中拖放列表、按钮并在 flex 中构建 UI。

当前版本的 Flash Builder 有一个，我认为这是唯一具有设计视图的 Flex IDE。Flash Builder 设计视图是有限的，因为它只适用于当前版本的 Flex SDK 并且到处都是问题。大多数开发人员不使用它，并且该功能将在下一版本的 Flash Builder 中删除。

我听说 IntelliJ 可能会在未来的版本中添加一个，但我不会指望它。

> 一旦我有了它，如果我将它构建为应用程序，它似乎会生成一个 swf 文件。不知道我是否可以在除浏览器之外的任何东西上运行它。最新的 adobe flash player 没有独立的 exe。

正确的; Flex 项目的主要目的是构建将在浏览器中运行的 SWf 文件。有一次，Adobe 提供了一个由 SWF 运行的独立播放器。我不确定他们是否仍然这样做。但是，假设最终用户拥有 Flash Player 的独立版本是不切实际的。

我不知道 FDT 是否支持这一点；但是您可以使用与 Adob​​e AIR 相同或相似的代码来创建 AIR 文件。AIR 文件应在可以安装 AIR 运行时的任何位置运行。如果您在 Windows PC 上使用 Adob​​e AIR Captive Runtime 功能，您可以创建一个可执行文件。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-21T03:15:43.580

Idea 永远不会获得设计视图，因为它需要在 IDE 中内置的特殊版本的 Flash 播放器。这反过来又需要访问 Player 源代码，并将一堆特定于平台的 JNDI 垃圾添加到您的 IDE。鉴于即使 Adob​​e 也放弃了对设计视图的支持，即使您拥有 Player 的资源并有权使用它们，维护该特殊版本显然在经济上也不可行。

# c++ - 使用名称中包含值的其他人的库

> ID：10663705
> 
> 赞同：-2
> 
> 时间：2012-05-19T08:40:11.310
> 
> 标签：c++, c, arduino

所以，我正在使用 Arduino 的[GinSing](http://www.ginsingsound.com/)库，但遇到了问题。**他们的**代码中有一大块是从变量名（或对象？或其他东西？）中提取值。我已经阅读了关于变量名中有值的信息（堆栈溢出），我知道你不应该这样做，但我被困住了！

我不是一个足够好的程序员来修改他们的代码，但我仍然想使用它（GinSing shield 很酷）。以下是它们的用法示例`s->setEnvelope`：

```
s->setEnvelope (OSC_1, AT_100MS, 1.0f, DR_100MS, 1.0f, DR_100MS, 0.0f); 
```

我想随机更改这些值，所以我做了这个：

```
String adsrMake(String type, int attack){
    return type + attack + "MS";
} 
```

然后我这样做：

```
 s->setEnvelope (OSC_1, adsrMake("AT_",time/2),  etc.. 
```

但它不喜欢那样。它不想要一个字符串，它想要一个名字（？）或其他东西。我得到的错误说它想要：

```
void GinSingSynth::setEnvelope(GSSynthOsc, GSAttackDur, float, GSDecRelDur, float, GSDecRelDur, float) 
```

我打开了`.cpp`文件，它说它在另一端这样做：

```
void GinSingSynth::setEnvelope (GSSynthOsc  oscIdx ,
                                GSAttackDur attackDur , float attackAmp,
                                GSDecRelDur decayDur  , float decayAmp ,
                                GSDecRelDur releaseDur, float releaseAmp )
{
    ubyte voiceIdx = OscIdxToVoiceIdx(oscIdx);

    // Construct ADR bytes ( high four bits amplitude, low four bits duration )

    ubyte atkByte = ( (ubyte) ( 0x0f * attackAmp   ) << 4 ) + attackDur;
    ubyte dcyByte = ( (ubyte) ( 0x0f * decayAmp    ) << 4 ) + decayDur;
    ubyte rlsByte = ( (ubyte) ( 0x0f * releaseAmp  ) << 4 ) + releaseDur; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T08:45:15.307

很可能`GSAttackDur`代表某种intergal类型。它可能是一个枚举，因此您必须查找定义并查看接受的值是什么。诸如`AT_100MS`可能代表整数值的符号。

这一切都意味着您可以通过像这样传递整数来更改值：

```
s->setEnvelope (OSC_1, GsAttackDur(42), 1.0f, DR_100MS, 1.0f, DR_100MS, 0.0f);
                                    ^ random 
```

但是，您必须检查有效值的范围。不要传递不在可接受范围内的枚举值，这一点非常重要。不幸的是，`GsAttackDur(n)`将接受任何`n`，而不管它是否有效。这意味着您必须知道有效范围，并`n`在此范围内生成一个数字。最近有一个[相关的问题](https://stackoverflow.com/questions/2999012/generating-random-enums)，您应该检查一下。请记住，您的随机枚举生成将始终与枚举定义耦合。如果后者发生变化，您将不得不修改前者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T08:46:57.690

1.  将他们的头文件添加到您的[C](http://en.wikipedia.org/wiki/C_%28programming_language%29) / [C++](http://en.wikipedia.org/wiki/C_%28programming_language%29)源代码中
2.  让你的函数返回它们的结构类型或`#def`可能。

`GSAttackDur adsrMake(String type, int attack) { .... }`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T08:08:58.773

虽然您知道`GSAttackDur`枚举成员是顺序数值，但依靠第三方库（甚至您自己的库）的*内部信息来推断将整数转换为枚举是有效或安全的并不是**最佳实践*。

在一般情况下或在代码维护的情况下，值是连续的甚至是算术级数可能并不总是正确的。更好的通用解决方案是使用查找表将您的随机整数转换为有效的枚举类型值，因此不需要了解实际枚举文字值的大小或顺序：

```
GSAttackDur getRandomDuration()
{
    static const GSAttackDur lookup[]
    {
        AT_2MS, AT_8MS, AT_16MS, AT_24MS, AT_38MS, 
        AT_56MS, AT_68MS, AT_80MS, AT_100MS // add more as necessary
    } ;

    // Get random index into lookup - 0 to N-1 where N is the number 
    // of elements in lookup.
    int r = rand() / (RAND_MAX / (sizeof(lookup) / sizeof(*lookup)) ) ;

    // Return a random GSAttackDur value
    return lookup[r] ;
} 
```

# java - 如何使用重复方法？

> ID：10663709
> 
> 赞同：-2
> 
> 时间：2012-05-19T08:41:27.643
> 
> 标签：java, android, phone-call

我有一个打电话的方法。数字和延迟来自两个编辑文本框中的字符串。它工作正常。但是，我想把它放在一个循环中，以便它在结束之前多次执行相同的操作。

我的代码是 -

```
public void makeCall(View view) {

             //create handler for phone call

         Handler delayedCallHandler = new Handler() {
              public void handleMessage(Message msg) {
                String num = (String) msg.obj;

                Intent intent = new Intent(Intent.ACTION_CALL);
                intent.setData(Uri.parse(num));
                startActivity(intent);
              }
            };

            //Grabs milli seconds count from edit text box

               EditText edit_seconds = (EditText)
                    findViewById(R.id.seconds);
               CharSequence edit_seconds_value =
                    edit_seconds.getText();

               int secondz = Integer.parseInt(edit_seconds_value.toString());                    

            // Grabs TXT Char from MSISDN edit text box and converts to edit_text_value
            EditText edit_text = (EditText)
                    findViewById(R.id.msisdn);
               CharSequence edit_text_value =
                    edit_text.getText();

            //Delay phone call

            delayedCallHandler.sendMessageDelayed(
                    delayedCallHandler.obtainMessage(0, "tel:" + edit_text_value), // msg.obj = the number to call
                    secondz); // 50 seconds

            // Toast Popup when call set button pressed

            Toast toast=Toast.makeText(this, "You have now set the call for " + edit_seconds_value + "milliseconds" , Toast.LENGTH_LONG); 
            toast.show();  

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T08:45:53.700

非常简单，您可以使用`Thread`Class、`TimerTask`Class 或`AlarmManager`Class。在 Thread 和 TimerTask 类中需要睡眠时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T09:04:25.393

您可以使用 启动 CALL 活动`startactivityForResult()`。然后在`OnActivtyResult`发送延迟消息开始下一个CALL。

```
@Override
void onActivityResult(...) {
   ....
   if (count <= NUMBER_OF_CALLS) {
       delayedCallHandler.sendMessageDelayed(
                    delayedCallHandler.obtainMessage(0, "tel:" + edit_text_value), // msg.obj = the number to call
                    secondz); // 50 seconds
       count++;
   }
   ....
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T00:21:37.297

简单的。我认为。行。假设您希望它重复 10 次。并且您的方法称为“method()”

```
//BEFORE YOUR ONCREATE
int count = 1;
//PUT THIS WHEREVER YOU WANT TO CALL YOUR METHOD
while(count<=10){
    method();
    count++;
} 
```

然后在此之后设置您的方法（）（在 OnCreate 之外）

```
private void method() {
    //DO ALL YOUR STUFF HERE

} 
```

简而言之，这将创建名为 method() 的方法。

然后它将创建一个名为 count 的 int，其值为 1。

然后它会按照你的方法加1到“count”

所以“count”现在的值为 2。

由于计数仍低于 10，它将再次执行该方法..

一次又一次……一次又一次，直到 count=10

然后它将停止。

将 method() 重命名为您喜欢的任何内容并添加您想要做的事情。

# php - 河豚成本与时间

> ID：10663711
> 
> 赞同：5
> 
> 时间：2012-05-19T08:41:53.300
> 
> 标签：php, time, passwords, blowfish

我在 php 中使用 bcrypt/blowfish，当我将成本参数设置为 10 美元（我认为是 1024 轮）时，加密过程需要 0.1 秒。如果我将其设置为 12 美元，则需要 0.3 秒。我的问题是：这是否占用了 0.3 秒的 cpu 时间，即如果我有 100 个用户运行这个进程，他们都必须等待 30 秒（0.3 x 100）吗？（编辑：由于双核/多线程处理可能会更短，但即使是 10 秒也是不可接受的）。

另外：保留这个成本参数有什么好的价值？有些人推荐 16 美元，但在我的网站（由大型网络主机托管）上花费了 5 秒以上。

顺便说一句，我正在使用以下代码来检查它所花费的时间：

```
<?php
// set a password to work with
$var1 = "doodoo1234";

//echo that password onto the screen 
echo $var1 . "<br /><br />";

//Start the clock
$time_start = microtime(true);

//Run blowfish function to encrypt the password
$hashedpass = PassHash::blowfishhash($var1);

//stop the clock  
$time_end = microtime(true);

//echo the password to the screen
echo $echohashedpass . "<br /><br />";

//Echo the length of the encrypted password to the screen
//(this taught me that blowfish always returns a 60 varchar string)
echo strlen($sajpass). "<br /><br />";

$time = $time_end - $time_start;
echo "that took $time seconds\n";
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T04:29:45.837

诚实地？*标准是 7，但您可以将其设置为您想要的任何值，即使像 4 这样的低值仍然比其他所有*东西都要飞跃。它还比其他哈希具有优势，因为它不能通过使用 GPU 来加速。所以它和其他哈希一样慢（现在甚至更慢）。因此，它仍然像往常一样缓慢。如果您在 10 上花费 0.1 秒，那么请尝试 5 或 6 次。那会使您缩短到 0.05 秒左右。那么这就够了吗？这取决于你对*足够*的定义是什么。

就个人而言，我会说任何高于最小值（即 4）的东西都绰绰有余。也不要直接做河豚。当有人设法并行它时，他们将能够将您的密码扔给这个已经预先编程的工具。尝试在使用 bcrypt 散列密码之前或之后使用其他*快速散列对密码进行散列。*使用强大的东西，比如 sha256 或 sha512。这样，您的系统就与其他使用 bcrypt 的人不同。

由于您已经在使用 bcrypt，我将假设您正在使用适当的哈希加盐（在 bcrypt 单独要求的范围之外）。

我已经在自己的笔记本电脑上进行了*大量*的基准测试，老实说，我已经确定了 6 作为成本参数，当然这不是默认的 7，但它还不足以让我真正担心有人试图进入它。它也比 sha 哈希家族慢数百万倍。

如果你想要一些代码来做事（因为我不知道你是否这样做），也可以编辑，我已经在这个链接[Link to implementation of bcrypt based hashing](https://stackoverflow.com/questions/8195689/encryption-using-crypt/11389283#11389283)上发布了一些。我不知道你是否想要它，所以我没有把它放在这里。该许可证非常自由，所以如果您还没有自己编写它，我建议您可以使用它（但也许可以修改一些东西）。

# php - 博客 CMS 一些问题

> ID：10663712
> 
> 赞同：1
> 
> 时间：2012-05-19T08:42:03.460
> 
> 标签：php, mysql, content-management-system, blogs

我正在编写自己的博客 cms。我想在其中编写以下功能。

> 公共区域：

1.导航栏。

2.在包含的索引页面上的帖子。小帖子图片然后帖子标题和帖子内容约200个字符。然后是一个阅读更多按钮，它将把用户带到完整的帖子页面。

> 行政区：

1.Posts CRUD（创建读取更新删除）。

2.General Information CRUD，例如 Title Meta Keyowords 和其他一些东西。

> 我可以从上面做的是：

1.我可以从数据库中抓取帖子内容等。

1.  我可以创建帖子 CRUD。

我需要帮助的事情是：我如何创建完整的帖子页面意味着当用户点击阅读更多按钮或帖子标题时，它会将用户带到完整的帖子页面。我不知道这整个事情是如何运作的。你能解释一下我如何创建这个，我将如何管理这个数据库。这看起来很简单，但我不知道我该怎么做。如果可能的话，任何具有此功能的简单 cms 示例（不是 wordpress 和其他）。关于如何做到这一点的任何教程？任何帮助将不胜感激。非常感谢贾斯敏德

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T09:01:18.210

我相信您正在寻找术语“CRUD”= 创建、读取、更新、删除。[http://en.wikipedia.org/wiki/Create,_read,_update_and_delete](http://en.wikipedia.org/wiki/Create,_read,_update_and_delete)

> 我如何创建完整的帖子页面意味着当用户单击“阅读更多”按钮或帖子标题时，它将带用户进入完整的帖子页面。我不知道这整个事情是如何运作的。

其实很简单。您需要使用 $_GET 来获取与某个帖子相关联的一些值，例如，如果您有如下表：

> id 标题正文已创建

将帖子与 id 相关联是有意义的。然后你会有一个文件，我们称它为“read.php” 在该文件中你需要获取 $_GET 值，然后查询与 id 关联的帖子：

伪：

```
 <?php

    if (isset($_GET['id'])) {
     $id = $_GET['id']; //Make sure the value is of integer before continuing

     $query = mysql_query("SELECT id, title, body, created FROM posts WHERE id = $id");

     $row = mysql_fetch_assoc($query);

     //present the result

echo "<h1>" . $row['title'] . "</h1>";
echo "<div>" . $row['body'] . "</div>";

//etc..

    } 
```

请记住使用 XSS 进行防护。[http://shiflett.org/articles/cross-site-scripting](http://shiflett.org/articles/cross-site-scripting)

# .htaccess - .htaccess 重定向 www。到非 www 但保留子域

> ID：10663713
> 
> 赞同：0
> 
> 时间：2012-05-19T08:42:35.557
> 
> 标签：.htaccess, rewrite

我现在已经搜索了很多，但找不到答案。我试图让域（或任何其他指向它的域）重定向到没有“www”（如果存在）的版本，但要留下子域，因此它的工作方式如下：

```
http://www.domain.com -> http://domain.com
http://www.otherpointing.com -> http://domain.com
http://otherpointing.com -> http://domain.com
http://m.domain.com -> http://m.domain.com 
```

到目前为止，我有以下内容，这似乎不尊重子域：

```
RewriteCond %{HTTP_HOST} !^domain\.com$ [NC] 
RewriteRule ^(.*)$ http://domain.com/$1 [L,R=301] 
```

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T09:49:53.017

```
RewriteCond %{HTTP_HOST} ^www\.domain\.com$ [NC,OR]
RewriteCond %{HTTP_HOST} !^(.+\.)?domain\.com$ [NC] 
RewriteRule ^(.*)$ http://domain.com/$1 [L,R=301] 
```

或可选地，保留来自其他域的子域：

```
RewriteCond %{HTTP_HOST} ^www\.domain\.com$ [NC,OR]
RewriteCond %{HTTP_HOST} !^(.+\.)?domain\.com$ [NC] 
RewriteRule ^(.*)$ http://%1domain.com/$1 [L,R=301] 
```

# php - PHP/MYSQL 添加批量记录

> ID：10663714
> 
> 赞同：0
> 
> 时间：2012-05-19T08:42:37.960
> 
> 标签：php, mysql, batch-file, insert

我想同时将一群人添加到一个表中。有没有办法将批量插入作为数组进行，或者我是否需要像 for each... 那样使用循环`mysql_query(Insert into people (name,address,email) values ('$name','$adr','$email'))`。非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T08:44:28.637

您可以使用这种格式：

`"INSERT INTO table (id,value) VALUES (1,'temp1'),(2,'temp2'),(3,'temp3')"`

因此，根据您的查询：

```
mysql_query("insert into people (name,address,email) 
values ('$name1','$adr1','$email1'),
values ('$name2','$adr2','$email2'),
values ('$name3','$adr3','$email3'),
values ('$name4','$adr4','$email4')
"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T08:45:19.153

```
INSERT INTO people (name, address,email)
       VALUES ('$name','$adr','$email'),
              ('$name2','$adr2','$email2'),
              ('$name3','$adr3','$email3') 
```

至于查询的实现，我将不再使用这些`mysql_`函数，因为文档明确指出，对于您可能使用的较新版本的 MySql，您应该使用`mysqli`。

> 如果您使用 MySQL 4.1.3 或更高版本，强烈建议您改用 mysqli 扩展。

[mysqli的手册](http://php.net/manual/en/book.mysqli.php)

使用示例：

```
mysqli = new mysqli("example.com", "user", "password", "database");
if ($mysqli->connect_errno) {
    echo $mysqli->connect_error;
}else{
    $mysqli->query("INSERT INTO people (name, address,email)
                    VALUES ('$name','$adr','$email'),
                           ('$name2','$adr2','$email2'),
                           ('$name3','$adr3','$email3')");
} 
```

# powershell - cp -r 是否与 cp -recurse 做同样的事情？

> ID：10663717
> 
> 赞同：1
> 
> 时间：2012-05-19T08:43:32.973
> 
> 标签：powershell

刚开始学习shell脚本..两者之间有点混淆。他们似乎在做同样的操作？有人可以提供任何示例来展示他们的不同工作方式吗？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T08:45:34.293

是的。确实如此。

Cmdlet 参数可以缩短，只要它们是明确的。因为`-Recurse`是唯一以以下所有参数`Copy-Item`开头的参数`R`会做同样的事情：

```
-Recurse
-Recurs
-Recur
-Recu
-Rec
-Re
-R 
```

但是，这主要是为了帮助交互式输入（别名也是如此）。在脚本中，您通常*应该*依赖 cmdlet 名称和完整参数名称，因为当添加的参数与您使用缩短的参数冲突时，您的脚本将停止工作（请注意，这并不能保证；有一段时间 PSCX 添加了甚至与 PowerShell 2不同`Get-Random`的 cmdlet。因此覆盖了内置的 - 您可以使用完整的 cmdlet 名称，但这很快就会变得笨拙）。

# python - 如何将时间字符串转换为秒？

> ID：10663720
> 
> 赞同：68
> 
> 时间：2012-05-19T08:43:57.193
> 
> 标签：python, time, python-datetime

我需要将以下格式给出的时间值字符串转换为秒，例如：

```
1.'00:00:00,000' -> 0 seconds

2.'00:00:10,000' -> 10 seconds

3.'00:01:04,000' -> 64 seconds

4.'01:01:09,000' -> 3669 seconds 
```

我需要使用正则表达式来做到这一点吗？我尝试使用时间模块，但是

```
time.strptime('00:00:00,000','%I:%M:%S') 
```

抛出：

```
ValueError: time data '00:00:00,000' does not match format '%I:%M:%S' 
```

* * *

**编辑**：

看起来像这样：

```
from datetime import datetime
pt = datetime.strptime(timestring,'%H:%M:%S,%f')
total_seconds = pt.second + pt.minute*60 + pt.hour*3600 
```

给出正确的结果。我只是使用了错误的模块。

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-05-19T09:07:29.187

```
>>> import datetime
>>> import time
>>> x = time.strptime('00:01:00,000'.split(',')[0],'%H:%M:%S')
>>> datetime.timedelta(hours=x.tm_hour,minutes=x.tm_min,seconds=x.tm_sec).total_seconds()
60.0 
```

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2012-10-05T04:34:55.920

我认为更pythonic的方式是：

```
timestr = '00:04:23'

ftr = [3600,60,1]

sum([a*b for a,b in zip(ftr, map(int,timestr.split(':')))]) 
```

输出为 263 秒。

我很想看看是否有人可以进一步简化它。

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2016-12-20T22:56:31.790

没有进口

```
time = "01:34:11"
sum(x * int(t) for x, t in zip([3600, 60, 1], time.split(":"))) 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2015-09-12T12:00:03.447

要得到`timedelta()`，你应该减去`1900-01-01`：

```
>>> from datetime import datetime
>>> datetime.strptime('01:01:09,000', '%H:%M:%S,%f')
datetime.datetime(1900, 1, 1, 1, 1, 9)
>>> td = datetime.strptime('01:01:09,000', '%H:%M:%S,%f') - datetime(1900,1,1)
>>> td
datetime.timedelta(0, 3669)
>>> td.total_seconds() # 2.7+
3669.0 
```

`%H`上面暗示输入小于一天，支持一天以上的时差：

```
>>> import re
>>> from datetime import timedelta
>>> td = timedelta(**dict(zip("hours minutes seconds milliseconds".split(),
...                           map(int, re.findall('\d+', '31:01:09,000')))))
>>> td
datetime.timedelta(1, 25269)
>>> td.total_seconds()
111669.0 
```

`.total_seconds()`在 Python 2.6 上进行模拟：

```
>>> from __future__ import division
>>> ((td.days * 86400 + td.seconds) * 10**6 + td.microseconds) / 10**6
111669.0 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-05-19T08:50:01.397

看起来你愿意剥夺几分之一秒......问题是你不能使用'00'作为小时`%I`

```
>>> time.strptime('00:00:00,000'.split(',')[0],'%H:%M:%S')
time.struct_time(tm_year=1900, tm_mon=1, tm_mday=1, tm_hour=0, tm_min=0, tm_sec=0, tm_wday=0, tm_yday=1, tm_isdst=-1)
>>> 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2021-02-17T10:53:05.233

```
def time_to_sec(t):
   h, m, s = map(int, t.split(':'))
   return h * 3600 + m * 60 + s

t = '10:40:20'
time_to_sec(t)  # 38420 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2012-05-19T08:54:02.847

总是有手工解析

```
>>> import re
>>> ts = ['00:00:00,000', '00:00:10,000', '00:01:04,000', '01:01:09,000']
>>> for t in ts:
...     times = map(int, re.split(r"[:,]", t))
...     print t, times[0]*3600+times[1]*60+times[2]+times[3]/1000.
... 
00:00:00,000 0.0
00:00:10,000 10.0
00:01:04,000 64.0
01:01:09,000 3669.0
>>> 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2018-08-30T21:03:17.463

```
import time
from datetime import datetime

t1 = datetime.now().replace(microsecond=0)
time.sleep(3)
now = datetime.now().replace(microsecond=0)
print((now - t1).total_seconds()) 
```

结果：3.0

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-05-06T10:13:24.503

灵感来自[sverrir-sigmundarson 的](https://stackoverflow.com/users/779521/sverrir-sigmundarson)评论：

```
def time_to_sec(time_str):
    return sum(x * int(t) for x, t in zip([1, 60, 3600], reversed(time_str.split(":")))) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-09-20T22:15:59.243

```
def time_to_sec(time):
    sep = ','
    rest = time.split(sep, 1)[0]
    splitted = rest.split(":")
    emel = len(splitted) - 1
    i = 0
    summa = 0
    for numb in splitted:
        szor = 60 ** (emel - i)
        i += 1
        summa += int(numb) * szor
    return summa 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-04-17T17:55:48.740

HH:MM:SS 和 MM:SS 的动态解决方案。如果要处理命令，请使用`split(',')`除以 1000 或其他内容，然后添加。

```
_time = 'SS'
_time = 'MM:SS'
_time = 'HH:MM:SS'
seconds = sum(int(x) * 60 ** i for i, x in enumerate(reversed(_time.split(':'))))
# multiple timestamps
_times = ['MM:SS', 'HH:MM:SS', 'SS']
_times = [sum(int(x) * 60 ** i for i, x in enumerate(reversed(_time.split(':')))) for _time in times] 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-06-10T23:32:29.650

为什么不使用`functools.reduce`？

```
from functools import reduce

def str_to_seconds(t):
    reduce(lambda prev, next: prev * 60 + next, [float(x) for x in t.replace(',', '.').split(":")], 0) 
```

一个功能，适用`10,40`于`09:12,40`或`02:08:14,59`。如果您使用`.`而不是`,`十进制符号，它会更简单：

```
def str_to_seconds(t):
    reduce(lambda prev, next: prev * 60 + next, [float(x) for x in t.split(":")], 0) 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2022-01-13T13:36:24.960

`.total_seconds()`似乎**直截了当**。

```
from datetime import datetime

FMT = '%H:%M:%S.%f'

#example
s2 = '11:01:49.897'
s1 = '10:59:26.754'

# calculate difference
pt = datetime.strptime(s2, FMT) - datetime.strptime(s1, FMT)

# compute seconds number (answer)
total_seconds = pt.total_seconds()
# output: 143.143 
```

# c# - 实体框架，根据特定条件插入对象

> ID：10663722
> 
> 赞同：1
> 
> 时间：2012-05-19T08:45:02.170
> 
> 标签：c#, sql-server, entity-framework

我必须关注问题。我有大量的 XML 文件。在每个 XML 文件中都有不同的员工。我必须将唯一的员工添加到数据库中。在数据库中，每个员工都有名字、姓氏和出生日期。我想检查数据库中是否已经存在具有相同属性的员工，如果没有插入它。

我正在使用以下代码：

```
Entities entities;
entities.AddToEmployee(emp);
entities.SaveChanges(); 
```

我的员工连接到另一个数据结构 - 销售。所以我只需要将员工的主键添加到销售表中，而不是数据库中的整个员工（如果它已经存在）。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T08:58:47.010

“查找或添加模式”在以下类型的情况下很有用：

```
var db = new YourContext();
var emp = db.Employees.Find(empID) ?? db.Employees.Add( new Employee { FirstName ="xx" , LastName="xxx"});
db.SaveChanges(); 
```

这样，如果 emp 对象存在于数据库中或已创建并保存到数据库中，则它已被加载。如果您搜索多个属性，您可能需要将 Find() 替换为 Where()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T12:07:50.757

在实体框架中，您可以通过多种方式创建和修改关系。在您的情况下，我将首先搜索一名员工，如果它存在，我将只设置 ForeingKey 而不是这样的导航属性

```
sale.EmployeeID = x; // id of existing employee 
```

如果员工是新员工，则必须创建一个新的员工对象，然后从销售对象中引用它，然后保存它。

如果您收到“...无法将附加到 ObjectContext 的对象添加到 EntityCollection...”错误，请确保您只打开了一个上下文。我更喜欢像这样包装我的所有数据库操作

```
using(var dbContext = new MyContext())
{
//do persistence stuff
} 
```

# javascript - 使用modernizr检测设备

> ID：10663727
> 
> 赞同：4
> 
> 时间：2012-05-19T08:45:18.690
> 
> 标签：javascript, jquery, modernizr

我设计了一个页面，它使用设备宽度检测设备，并基于它加载受尊重的 js 和 css 文件。我如何评估 modernizr 中的 3 个条件，哪个是检测设备（台式机、移动设备或平板电脑）的更好方法

```
<script type="text/javascript">
            Modernizr.load([
                {
                    test: Modernizr.mq('(min-device-width: 320px) and (max-device-width: 728px)'),
                    yep : ['mob.css', 'jquery.mobile-1.1.0.css', 'jquery.mobile-1.1.0.js'],
                    nope : 'pc.css'
                }
            ]);

            if (!Modernizr.borderradius) {
                $.getScript("jquery.corner.js", function () {
                    $("input").corner();
                });
            }

            if(!Modernizr.required) {
                $("#frmSearch").submit(function(){
                    if($.trim($("#txtSearch").val().length) == 0){
                        alert('Please, Enter some keyword');
                        return false;
                    }
                });
            }
        </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T21:33:54.390

如果您要在 Modernizr 中执行此操作，我会说不要尝试编写三向条件；写三个单独的真/假条件。

也就是说，您应该拥有三个条件，分别是“桌面”、“移动”或“平板电脑”，而不是“桌面”、“移动”或“平板电脑”这三个条件，每个条件都是真或假。

希望这能回答你的问题。

但是，我要提出的另一点是您如何在这些类型之间划清界限？

很容易说 iPhone 是手机，iPad 是平板电脑，但在这两者之间有各种尺寸的设备。手机变成平板电脑的分界点在哪里？那么可以连接到基本单元成为笔记本电脑的平板电脑呢？

您将在这里遇到的麻烦是形状因素非常灵活。因此，您可能永远无法确定某些设备属于哪个类别。您最好使用响应式 CSS 和 CSS 媒体查询让您的网站动态调整到屏幕分辨率。

希望有帮助。

# php - 检查字符串是否为图像

> ID：10663735
> 
> 赞同：6
> 
> 时间：2012-05-19T08:46:02.650
> 
> 标签：php, image

有一个字符串格式的图像，输出带有一些 mime 类型标题的字符串就足以在页面上呈现它，如何检查该字符串是否是图像？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-19T08:48:33.427

“成功时将返回图像资源。如果图像类型不受支持、数据不是可识别的格式或图像已损坏且无法加载，则返回 FALSE。”

例子：

```
<?php
$data = 'iVBORw0KGgoAAAANSUhEUgAAABwAAAASCAMAAAB/2U7WAAAABl'
       . 'BMVEUAAAD///+l2Z/dAAAASUlEQVR4XqWQUQoAIAxC2/0vXZDr'
       . 'EX4IJTRkb7lobNUStXsB0jIXIAMSsQnWlsV+wULF4Avk9fLq2r'
       . '8a5HSE35Q3eO2XP1A1wQkZSgETvDtKdQAAAABJRU5ErkJggg==';
$data = base64_decode($data);

$im = imagecreatefromstring($data);
if ($im !== false) {
    header('Content-Type: image/png');
    imagepng($im);
    imagedestroy($im);
}
else {
    echo 'An error occurred.';
}
?> 
```

[http://php.net/manual/en/function.imagecreatefromstring.php](http://php.net/manual/en/function.imagecreatefromstring.php)

# objective-c - 在播放期间更改 AVPlayerItem 的 videoComposition 属性 (AVMutableVideoComposition)

> ID：10663736
> 
> 赞同：7
> 
> 时间：2012-05-19T08:46:35.767
> 
> 标签：objective-c, avfoundation

我正在尝试在播放期间更改视频合成的布局（即其组件帧的变换）。似乎有时这是可行的，并且视频合成无缝地更改为新的转换集，但其他时候它只是冻结并保持当前的转换。AVPlayer 实例上没有状态代码更改，播放器或播放器项目上都没有错误。

以前有人经历过吗？任何关于为什么会发生这种情况或如何解决它的建议将不胜感激。

一些代码如下所示。重要的一点是“playerItem.videoComposition = videoComposition”，它在点击视频时触发（用于测试目的）。

此问题的另一种解决方案是将视频显示在单独的图层上，但视频必须同步，因此合成似乎是实现此目的的唯一方法。

```
@implementation VideoView
{
    CGSize _videoSize;
    CMTimeRange _videoFullRange;

    AVMutableCompositionTrack * _compositionTrackVideoA;
    AVMutableCompositionTrack * _compositionTrackVideoB;
}

+ (Class)layerClass
{
    return [AVPlayerLayer class];
}

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if ( self )
    {
        NSString * videoAPath = [[NSBundle mainBundle] pathForResource:@"cam09v2" ofType:@"mp4"];
        NSString * videoBPath = [[NSBundle mainBundle] pathForResource:@"cam10v2_b" ofType:@"mp4"];
        AVURLAsset * videoAAsset = [AVURLAsset URLAssetWithURL:[NSURL fileURLWithPath:videoAPath] options:nil];
        AVURLAsset * videoBAsset = [AVURLAsset URLAssetWithURL:[NSURL fileURLWithPath:videoBPath] options:nil];

        AVAssetTrack * videoATrack = [[videoAAsset tracksWithMediaType:AVMediaTypeVideo] lastObject];
        AVAssetTrack * videoBTrack = [[videoBAsset tracksWithMediaType:AVMediaTypeVideo] lastObject];
        AVAssetTrack * audioTrack = [[videoAAsset tracksWithMediaType:AVMediaTypeAudio] lastObject];

        _videoSize = [videoATrack naturalSize];
        CMTime videoDuration = videoAAsset.duration;
        _videoFullRange = CMTimeRangeMake(kCMTimeZero, videoDuration);

        AVMutableComposition *composition = [AVMutableComposition composition];
        AVMutableCompositionTrack * compositionTrackVideoA = [composition addMutableTrackWithMediaType:AVMediaTypeVideo preferredTrackID:kCMPersistentTrackID_Invalid];
        AVMutableCompositionTrack * compositionTrackVideoB = [composition addMutableTrackWithMediaType:AVMediaTypeVideo preferredTrackID:kCMPersistentTrackID_Invalid];
        AVMutableCompositionTrack * compositionTrackAudio = [composition addMutableTrackWithMediaType:AVMediaTypeAudio preferredTrackID:kCMPersistentTrackID_Invalid];

        compositionTrackVideoA.preferredTransform = videoATrack.preferredTransform;

        NSError * error = nil;
        if ( ! [compositionTrackVideoA insertTimeRange:_videoFullRange ofTrack:videoATrack atTime:kCMTimeZero error:&error] )
            NSLog(@"%@", error);

        if ( ! [compositionTrackVideoB insertTimeRange:_videoFullRange ofTrack:videoBTrack atTime:kCMTimeZero error:&error] )
            NSLog(@"%@", error);

        if ( ! [compositionTrackAudio insertTimeRange:_videoFullRange ofTrack:audioTrack atTime:kCMTimeZero error:&error] )
            NSLog(@"%@", error);

        _compositionTrackVideoA = [compositionTrackVideoA copy];
        _compositionTrackVideoB = [compositionTrackVideoB copy];

        AVPlayerItem * playerItem = [AVPlayerItem playerItemWithAsset:composition];

        AVPlayer * player = [AVPlayer playerWithPlayerItem:playerItem];

        [(AVPlayerLayer *)self.layer setPlayer:player];

        [player play];

        [player addObserver:self forKeyPath:@"status" options:0 context:0];

        [self updateCompositionForPlayerItem:playerItem];

        UITapGestureRecognizer * tapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(didTap:)];
        [self addGestureRecognizer:tapGesture];
    }
    return self;
}

- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context
{
    if ( [keyPath isEqualToString:@"status"] )
        NSLog(@"STATUS %d", ((AVPlayer *)object).status );
}

- (void)updateCompositionForPlayerItem:(AVPlayerItem *)playerItem
{

    AVMutableVideoComposition * videoComposition = [AVMutableVideoComposition videoComposition];

    AVMutableVideoCompositionInstruction *videoInstruction = [AVMutableVideoCompositionInstruction videoCompositionInstruction];
    videoInstruction.enablePostProcessing = NO;
    videoInstruction.timeRange = _videoFullRange;

    AVMutableVideoCompositionLayerInstruction * layerInstructionA = [AVMutableVideoCompositionLayerInstruction videoCompositionLayerInstructionWithAssetTrack:_compositionTrackVideoA];
    CGAffineTransform transformA = CGAffineTransformMakeScale(0.5, 0.5);
    [layerInstructionA setTransform:transformA atTime:kCMTimeZero];
    AVMutableVideoCompositionLayerInstruction * layerInstructionB = [AVMutableVideoCompositionLayerInstruction videoCompositionLayerInstructionWithAssetTrack:_compositionTrackVideoB];
    CGAffineTransform transformB = CGAffineTransformMakeScale(0.5, 0.5);
    static int i = 0;
    transformB = CGAffineTransformTranslate(transformB, (i++ % 2 == 0) ? _videoSize.width : 0, _videoSize.height);
    [layerInstructionB setTransform:transformB atTime:kCMTimeZero];

    videoInstruction.layerInstructions = [NSArray arrayWithObjects:layerInstructionA, layerInstructionB, nil];

    videoComposition.instructions = [NSArray arrayWithObject:videoInstruction];

    videoComposition.frameDuration = CMTimeMake(1, 30); // 30 fps
    videoComposition.renderSize = _videoSize;

    playerItem.videoComposition = videoComposition;

}

- (void)didTap:(UITapGestureRecognizer *)tapGesture
{
    [self updateCompositionForPlayerItem:((AVPlayerLayer *)self.layer).player.currentItem];
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-18T22:00:15.537

您可以节省要更改它的时间，并用新的视频合成替换播放器项目，并从您停止播放的时间开始用新的播放器项目重新启动播放器。

# java - 如何在框架中设置按钮的 X、Y 位置？

> ID：10663737
> 
> 赞同：3
> 
> 时间：2012-05-19T08:46:52.693
> 
> 标签：java, swing, jframe, jbutton, layout-manager

如何设置`JButton`位置`JFrame`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T10:42:07.240

> 谁能告诉我在 Jframe 上设置按钮位置的属性。

答案很简单--->

使用适当的[Layout Manager](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)，以防您真正用描述编辑问题，但[SSCCE 会更好](http://sscce.org/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T08:53:50.713

如果你有一个 Absolute Layout（你不能这样做，可怕的调整大小的能力，以及一个坏习惯），你可以调用`.setBounds(int x, int y, int w, int h)`, 或`.setLocation(int x, int y)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-21T19:40:38.703

尝试使用合适的布局管理器，我最喜欢的是`GridBagLayout`因为它易于使用。您只需要创建一个`JPanel`然后`GridBagConstraints`为`JFrame`. 这是代码（主类中的函数，它是 的扩展`JFrame`）：

```
public void GridBagLayoutExample() {
    JPanel pane = new JPanel(new GridBagLayout()) //create a Panel with a layout
    JButton b = new JButton('Button1');
    GridBagConstraints bconstraints = new GridBagConstraints();
    //more code here
} 
```

有关更多信息，请查看[javadocs](http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html)。

# javascript - Chrome 扩展程序第一次不起作用

> ID：10663744
> 
> 赞同：0
> 
> 时间：2012-05-19T08:48:13.480
> 
> 标签：javascript, jquery, facebook, google-chrome, google-chrome-extension

我有一个 chrome 扩展，它在 facebook 中的“like”按钮旁边添加了一个自定义按钮。

问题是，当我启动 facebook 时，该按钮不会出现，而当我刷新页面时，它会出现。

这是一个基本的 jQuery 脚本：

```
$(".like_link").after("...MY BUTTON..."); 
```

我还尝试放置一个 alert("extension works") 函数来查看扩展何时加载以及何时不加载。所以问题不在于按钮，而是扩展本身的问题。

我又尝试了一件事，我将扩展设置为在所有网站上工作（`*://*.*`在 manifest.json 中）。在所有网站中，它一直都在工作，而在 facebook 中，我必须在启动它后刷新每个页面。

jQuery id 已加载到我的扩展中。我的 manifest.json 文件：

```
{
"name": "Custom button",
"version": "0.1",
"description": "Add a custom button beside the like button!",
"content_scripts": [
    {
    "matches": ["*://facebook.com/*"], //or *://*/*
    "css": ["style.css"],
    "js": ["jquery-1.7.2.min.js","script.js"]
    }
]
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T09:00:50.563

怎么样`"matches": ["*://*.facebook.com/*"]`（在前面插入星号`facebook.com`）

# php - php unicode 基本区域转换传播是

> ID：10663745
> 
> 赞同：0
> 
> 时间：2012-05-19T08:48:26.360
> 
> 标签：php, unicode

遇到这个阿拉伯UNICODE基本区文字转换成UNICODE扩区码的问题，但不成功。我有下面的代码，帮我看看。这个转换不正确。是什么原因

```
<?
header("content-type: text/html; charset=utf-8");
    mb_http_output( "UTF-8" );
function Un2k($Un){
     $Uk[0] ="چېتيڭپسىقكلشغبنمفگخجروۈزۋداەژۆۇﻻﺋھ";
        $Uk[1] = "ﭺﯥﺕﻱﯓﭖﺱﻯﻕﻙﻝﺵﻍﺏﻥﻡﻑﮒﺥﺝﺭﻭﯛﺯﯞﺩﺍﻩﮊﯙﯗﻻ∥∥";
        $Uk[2] = "ﭼﯦﺗﻳﯕﭘﺳﯨﻗﻛﻟﺷﻏﺑﻧﻣﻓﮔﺧﺟ∥∥∥∥∥∥∥∥∥∥∥∥ﺋﮬ";
        $Uk[3] = "ﭻﯥﺖﻲﯔﭗﺲﻰﻖﻚﻞﺶﻎﺐﻦﻢﻒﮓﺦﺞﺮﻮﯜﺰﯟﺪﺎﻪﮋﯚﯘﻼ∥∥";
        $Uk[4] = "ﭽﯧﺘﻴﯖﭙﺴﯩﻘﻜﻠﺸﻐﺒﻨﻤﻔﮕﺨຠ∥∥∥∥∥∥∥∥∥∥∥∥ﺌﮭ";

        $Un2K1 = "";
        $i ;
        $ix ;
        $s ;
        $s_ ;
        $_s ;
        $L ;
        $_ix ;
        $ix_ ;
        $_TF ;
        $TF_ ;
        $L = mb_strlen($Un,"utf8");

        for ($i=1;$i<$L;$i++){
            $s = mb_substr($Un, $i, 1,"utf8");

            if($i!=$L){ $s_ = mb_substr($Un, $i + 1, 1,"utf8");}else{$s_="";}
            if($i>1){ $_s = mb_substr($Un, $i - 1, 1,"utf8");}else{$_s="";}
            $ix = mb_strpos($Uk[0], $s);
             if(empty($ix)){
                 //
               if($i!=$L){$ix_ = mb_strpos($Uk[0], $s_);}else{$ix_="";}
               if($i>1){$_ix = mb_strpos($Uk[0], $_s);}else{$_ix="";}
               //
                 if($_ix == 0 or mb_strpos("روۈزۋداەژۆۇ", $_s) != 0){
                      $_TF = false;
                 }elseif(mb_substr($Uk[2], $_ix, 1,"utf8") != "." or mb_substr($Uk[4], $_ix, 1,"utf8") != "."){
                     $_TF = true;
                 }
                 if($ix==0){
                    $TF_ = false;
                 }elseif(mb_substr($Uk[3], $ix_, 1,"utf8") != "." or mb_substr($Uk[4], $ix_, 1,"utf8") != "."){
                     $_TF = true;
                 }
                 if(mb_strpos("چېتيڭپسىقكلشغبنمفگخج", $s) != 0){
                     if($_TF == false and $TF_ == false){
                         $Un2K1 = $Un2K1.mb_substr($Uk[1], $ix, 1,"utf8");
                     }elseif($_TF == true and $TF_ == false){
                         $Un2K1 = $Un2K1.mb_substr($Uk[3], $ix, 1,"utf8");
                     }elseif($_TF == false and $TF_ == true){
                         $Un2K1 = $Un2K1.mb_substr($Uk[2], $ix, 1,"utf8");
                     }

                 }elseif(mb_strpos("روۈزۋداەژۆۇ", $s) != 0){
                     if($_TF == false){
                        $Un2K1 = $Un2K1.mb_substr($Uk[1], $ix, 1,"utf8");
                     }elseif($_TF == true){
                        $Un2K1 = $Un2K1.mb_substr($Uk[3], $ix, 1,"utf8");
                     }
                 }else{
                     if($TF_ == false){
                        $Un2K1 = $Un2K1.mb_substr($Uk[4], $ix, 1,"utf8");
                     }elseif($TF_ == true){
                        $Un2K1 = $Un2K1.mb_substr($Uk[2], $ix, 1,"utf8");
                     }
                 }

             }else{
                 $Un2K1 = $Un2K1.$s;
             }
        }
        $Un2K1 = str_ireplace("ﻟﺎ", "ﻻ",$Un2K1);
        $Un2K1 = str_ireplace("(", "<!>",$Un2K1);
        $Un2K1 = str_ireplace(")", "(",$Un2K1);
        $Un2K1 = str_ireplace("<!>", ")",$Un2K1);
        $Un2K1 = str_ireplace("«", "<!>",$Un2K1);
        $Un2K1 = str_ireplace("»", "«",$Un2K1);
        $Un2K1 = str_ireplace("<!>", "»",$Un2K1);
        $Un2K1 = str_ireplace("", "",$Un2K1);
        $Un2K1 = str_ireplace("", "",$Un2K1);
        //$Un2K1 = santatur2($Un2K1);

        return  $Un2K1;
}

function santatur2($str) {  
    $len = mb_strlen($str, 'UTF-8');  
    $string = '';  
    for ($i = $len - 1; $i >= 0; $i--) {  
       $string .= mb_substr($str, $i, 1, 'UTF-8');                                                           
    }  
    return $string;  
} 

?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title></title>
</head>

<body>

<?

echo(Un2k("شاكىر"));

?>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T08:52:40.633

你为什么不使用[mb_convert_encoding()](http://php.net/manual/en/function.mb-convert-encoding.php)。在您的情况下，它应该非常有用。

这是一个将 EUC-JP 转换为 UTF-7的**示例：**

```
$str = mb_convert_encoding($str, "UTF-7", "EUC-JP"); 
```

[支持的编码列表](http://php.net/manual/en/mbstring.supported-encodings.php)

# cocoa - 在自定义属性更改时重绘自定义 CALayer 子类

> ID：10663746
> 
> 赞同：9
> 
> 时间：2012-05-19T08:48:28.340
> 
> 标签：cocoa, core-animation, quartz-graphics

我正在尝试构建一个绘制文本的特殊图层。这`TWFlapLayer`有一个属性字符串作为属性：

`TWFlapLayer.h`：

```
@interface TWFlapLayer : CALayer
@property(nonatomic, strong) __attribute__((NSObject)) CFAttributedStringRef attrString;
@end 
```

并合成`TWFlapLayer.m`：

```
@implementation TWFlapLayer

@synthesize attrString = _attrString;

/* overwrite method to redraw the layer if the string changed */

+ (BOOL)needsDisplayForKey:(NSString *)key
{
    if ([key isEqualToString:@"attrString"]){
        return YES;
    } else {
        return NO;
    }
}

- (void)drawInContext:(CGContextRef)ctx
{
    NSLog(@"%s: %@",__FUNCTION__,self.attrString);
    if (self.attrString == NULL) return;
    /* my custom drawing code */
} 
```

我的意图是，如果使用合成的 setter 方法更改了 attrString 属性，则使用我的自定义绘图方法自动重绘图层。但是，从放置在 drawInContext: 方法中的 NSLog 语句中，我看到该层*没有*重绘。

通过在 needsDisplayForKey 方法中放置一个断点，我确保它在询问 attrString 键时返回 YES。

我现在正在像这样更改 attrString

```
// self.frontString is a NSAttributedString* that is why I need the toll-free bridging
self.frontLayer.attrString = (__bridge CFAttributedStringRef) self.frontString;

//should not be necessary, but without it the drawInContext method is not called
[self.frontLayer setNeedsDisplay]; // <-- why is this still needed? 
```

我在 CALayer 头文件中查找了 needsDisplayForKey 的类方法定义，但在我看来，这是我想使用的方法，还是我在这里遗漏了重要的一点？

来自`CALayer.h`：

```
/* Method for subclasses to override. Returning true for a given
 * property causes the layer's contents to be redrawn when the property
 * is changed (including when changed by an animation attached to the
 * layer). The default implementation returns NO. Subclasses should
 * call super for properties defined by the superclass. (For example,
 * do not try to return YES for properties implemented by CALayer,
 * doing will have undefined results.) */

+ (BOOL)needsDisplayForKey:(NSString *)key; 
```

**概括**

当自定义属性 attrString 更改并标记为 时，为什么我的图层不重绘`needsDisplayForKey:`？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-20T05:12:42.570

`CALayer.h`还说：

```
/* CALayer implements the standard NSKeyValueCoding protocol for all
 * Objective C properties defined by the class and its subclasses. It
 * dynamically implements missing accessor methods for properties
 * declared by subclasses. 
```

显然，该`needsDisplayForKey:`机制依赖于 CALayer 的动态实现的访问器方法。所以，改变这个：

```
@synthesize attrString = _attrString; 
```

到

```
@dynamic attrString; 
```

# php - 使用 PHP 迭代此 json 代码的最佳方法

> ID：10663750
> 
> 赞同：-2
> 
> 时间：2012-05-19T08:49:09.387
> 
> 标签：php

我有这个json代码：

```
{
   "data": [
      {
         "name": "John",
         "id": "11"
      },
      {
         "name": "Max",
         "id": "22"
      },
      {
         "name": "Martin",
         "id": "33"
      },
      {
         "name": "Adrian",
         "id": "44"
      }
   ]
} 
```

现在，我需要以这种方式打印所有名称和 ID：

```
John 11
Max 22
Martin 33
Adrian 44 
```

最简单的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T08:56:01.823

像这样：

```
$arr = json_decode($string, true); // true to retrieve an associative array
foreach($arr['data'] as $sub) {
  echo $sub['name'],' ',$sub['id'],PHP_EOL;
} 
```

输出：

```
John 11
Max 22
Martin 33
Adrian 44 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T09:06:51.870

```
<?php
$a='{ "data": [ { "name": "John", "id": "11" }, { "name": "Max", "id": "22" }, { "name": "Martin", "id": "33" }, { "name": "Adrian", "id": "44" } ] }';
$b=json_decode($a);
$data=$b->{'data'};
foreach($data as $item) {
  print $item->{'name'}.' '.$item->{'id'}."\n";
}

?> 
```

另外，Javascript 版本：

```
objectValueList=function(x) {
  var tags=[];
  for (i in x) {
    if(x.hasOwnProperty(i)) {
      tags.push(x[i]);
    }
  }
  return tags;
}

var a='{ "data": [ { "name": "John", "id": "11" }, { "name": "Max", "id": "22" }, { "name": "Martin", "id": "33" }, { "name": "Adrian", "id": "44" } ] }';
var b=JSON.parse(a);
var data=objectValueList(b.data);
for (x in data) {
  console.log(data[x].name+" "+data[x].id);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T08:52:19.497

使用`json_decode()`.

```
$data=json_decode($string);

foreach($data as $person){
    foreach($person as $key=>$val){
        foreach($val as $tuple)
            echo $tuple." ";
        echo "\r\n"; 
        }
    }   
} 
```

# django - Django：如何过滤相关模型中两个字段的总和？

> ID：10663751
> 
> 赞同：6
> 
> 时间：2012-05-19T08:49:23.770
> 
> 标签：django, django-queryset, django-models

我有一个基本上是这样的模型：

```
class Unit(models.Model):
    name = models.CharField(max_length=64)

class UnitPrice(models.Model):
    unit       = models.ForeignKey(Unit, related_name="prices")
    agency_fee = models.DecimalField(default=0.0, max_digits=7, decimal_places=2)
    owner_fee  = models.DecimalField(default=0.0, max_digits=7, decimal_places=2)
    def amount(self):
        return self.owner_fee + self.agency_fee 
```

有没有办法从 中过滤`amount`（即 和 的`agency_fee`总和`owner_fee`）`Unit.objects`？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-19T10:47:11.963

或者简单地转换`a + b > c`为`a > c - b`以使用[`models.F`表达式](https://docs.djangoproject.com/en/dev/topics/db/queries/#filters-can-reference-fields-on-the-model)：

```
UnitPrice.objects.filter(agency_fee__gt=10-models.F('owner_fee')) 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-19T09:12:11.467

[`extra()`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#extra)可以帮你

```
UnitPrice.objects.extra(where=["agency_fee + owner_fee > 10"]) 
```

# haskell - haskell 模式匹配 - 许多条件与一个表达式匹配

> ID：10663757
> 
> 赞同：2
> 
> 时间：2012-05-19T08:51:01.973
> 
> 标签：haskell, pattern-matching

我想用 Haskell 模式匹配中的一个表达式匹配许多条件。

例如，

```
data Message = HELLO | HI | GOODBYE | BYE

greeting x = case x of
  HELLO or HI          -> "hello"
  GOODBYE or BYE   -> "bye" 
```

但我找不到如何做到这一点。

对不起我糟糕的英语。谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T09:05:22.060

试试看守。前任，

```
data Message = HELLO | HI | GOODBYE | BYE deriving (Eq)

greeting x
    | x == HELLO   || x == HI   = "hello"
    | x == GOODBYE || x == BYE  = "bye" 
```

请注意，您必须`Eq`为您的数据类型派生一个实例。查看[Learn you a Haskell](http://learnyouahaskell.com/syntax-in-functions)的相关部分。

# php - 为什么 localhost 与 127.0.0.1 关于会话的差异

> ID：10663759
> 
> 赞同：2
> 
> 时间：2012-05-19T08:51:04.503
> 
> 标签：php, session, localhost

我想知道为什么这两个会话有区别？如果我有一个登录表单并将会话传递到一个页面（即：）`settings.php`。如果我有`localhost/settings.php`会话将工作，如果我去不同的页面并回来。但如果是`127.0.0.1/settings.php`，会话将在第一次通过，然后如果我重定向到其他地方并返回，它不再存在。

这也发生在其他人身上吗？还是这只是我？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T08:59:53.560

也许这会有所帮助： [http ://www.issociate.de/board/post/179979/Cookie_Problems_on_Localhost.html](http://www.issociate.de/board/post/179979/Cookie_Problems_on_Localhost.html)

> 'localhost' 和任何 ip 都不被接受为 cookie 中的有效域标识符（根据 RFC）。

和 127.0.0.1 != localhost 用于浏览器。浏览器不会将从 127.0.0.1 设置的 cookie 发送到 localhost，因为它们是不同的域。

ps 在实践中，一个 ip 上可以有多个域。当然，出于安全原因，浏览器不能完全发送所有 cookie（想象一下，浏览器可以将来自您网站的 cookie 发送到具有相同 IP 的虚拟主机上的所有网站）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T09:03:50.680

由于@true 的回答中提到的问题，在我们的开发中，我们通常会创建一个虚假的本地域，例如 dev.localhost.net，并使用 hosts 文件将其映射到机器 IP 地址或 127.0.0.1。这有助于解决会话/cookie 问题。

# git - 使用 git，如何将本地部署分支重置为原始版本？

> ID：10663766
> 
> 赞同：8
> 
> 时间：2012-05-19T08:52:52.740
> 
> 标签：git

我有一个名为`deployment`. 这个分支也在`origin`。如何将本地部署分支重置为部署分支的状态`origin`？

类似于以下内容：

```
git fetch origin
git reset --hard origin/deployment 
```

那可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T08:58:24.327

这是正确的，但要小心 -`git reset --hard`丢弃*所有*未提交的更改，即那些仅在您的工作树或索引（暂存区）中的更改。此外，只需确保您确实在带有 的`deployment`分支上`git checkout deployment`，因为`git reset`总是更改当前分支的位置，即`HEAD`指向的那个。

# iphone - 创建一个返回 b2Body 问题的类

> ID：10663767
> 
> 赞同：1
> 
> 时间：2012-05-19T08:53:07.420
> 
> 标签：iphone, objective-c, cocos2d-iphone, physics, box2d-iphone

我必须创建一个返回 b2Body 的类，我试图在 HelloWorldLayer.mm 文件中访问它。请参阅下面的圆圈类：

Circle.h

```
#import <Foundation/Foundation.h>
#import "cocos2d.h"
#import "Box2D.h"
#import "PhysicsSprite.h"

#define PTM_RATIO 32

@interface Circle : CCLayer   {

}

+(b2Body *)rCircle;

@end 
```

和 Circle.mm

```
#import "Circle.h"

@implementation Circle

+(b2Body *)rCircle    {

//body and fixture defs for circleSprite
b2World *world_;
b2BodyDef bodyDef;
bodyDef.type = b2_dynamicBody;
b2FixtureDef fixtureDef;
fixtureDef.density = 0.1;
b2PolygonShape polygonShape;
fixtureDef.shape = &polygonShape;

PhysicsSprite* circleBodySprite = [PhysicsSprite spriteWithFile:@"circleB.png"];
//[self addChild:circleBodySprite z:1];

//body with circle fixture
b2CircleShape circleShape;
circleShape.m_radius = circleBodySprite.contentSize.width/2 / PTM_RATIO;
fixtureDef.shape = &circleShape;
b2Body* chainBase = world_->CreateBody( &bodyDef );
chainBase->CreateFixture( &fixtureDef );
[circleBodySprite setPhysicsBody:chainBase];

return chainBase;

}

@end 
```

我不断收到指向该行的 EXC_BAD_ACCESS 错误：

```
 b2Body* chainBase = world_->CreateBody( &bodyDef ); 
```

我不知道我做错了什么。我也一直`b2Body`在通过以下方式访问 HelloWorldLayer.mm ：

```
[Circle rCircle]; 
```

这也给出了一个`EXC_BAD_ACCESS`错误。

我希望该类返回 a `b2Body`，以便我可以在 HelloWorldLayer.mm 中创建一个关节。

# android - Google Place API 集成

> ID：10663768
> 
> 赞同：0
> 
> 时间：2012-05-19T08:53:31.030
> 
> 标签：android, google-places-api

我正在使用来自[GitHub的 google place api 示例代码](https://github.com/tuthan/Google-Place-Api-Demo)

并且，在使用上述示例时出现以下错误 -

> ```
> Could not find class 'com.google.api.client.http.apache.ApacheHttpTransport', referenced from method hung.vo.PlaceRequest.<clinit>
> Could not find class 'hung.vo.PlaceRequest$1', referenced from method hung.vo.PlaceRequest.createRequestFactory
> Could not find class 'com.google.api.client.http.GenericUrl', referenced from method hung.vo.PlaceRequest.performSearch
> Caused by: java.lang.VerifyError: hung.vo.PlaceRequest 
> hung.vo.hung.vo.GooglePlaceActivity$SearchSrv.doInBackground(GooglePlaceActivity.java:36) 
> ```

在**GooglePlaceActivity 第 36 行**是

```
pl = new PlaceRequest().performSearch(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T09:09:56.873

实际上，您所指的项目是一个**Maven 项目**，所以您不能将它作为一个简单的**Android 项目**添加到您的 Eclipse 工作区中（我希望您使用的是 Eclipse）。为此，您必须在 Eclipse 中使用[**Eclipse - Maven 插件**](http://www.roseindia.net/maven2/maven_2_eclipse_plugin.shtml)并将此项目作为**导入现有 Maven 项目导入**。当您将此项目构建为**Maven 构建**时，它将通过包含它们来自动解析所有依赖项 jar 文件（您不需要不必手动添加）。然后它将作为 Android 项目运行。

否则请参阅本教程[介绍 Google Places API](http://ddewaele.blogspot.in/2011/05/introducing-google-places-api.html)并提供很好的解释。

此外，您只能使用上述项目的源代码并手动将[Google APIs Client Library for Java](http://code.google.com/p/google-api-java-client/downloads/list)添加到您的 android 项目的构建路径中，而无需用作 Maven 项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T09:02:41.970

下载 Google Api Java 客户端

在 Eclipse 项目中创建一个 libs 文件夹。

将所有不以 -source 结尾的客户端文件拖放到刚刚创建的 libs 文件夹中。不要添加依赖项文件夹，而是将依赖项从文件夹内拖到 libs 文件夹中。

转到项目 -> 属性 -> Java 构建路径 -> 库选项卡

单击添加 JARS，导航到您的 libs 文件夹并添加所有客户端文件。

单击“订购和导出”选项卡并检查您添加的所有客户端文件。

清理项目。你应该很高兴。

看到这个[链接](https://stackoverflow.com/questions/8595808/add-external-jar-to-android-project-in-eclipse)它和你的问题一样。

# ajax - Spring MVC 和 Ajax 请求

> ID：10663774
> 
> 赞同：1
> 
> 时间：2012-05-19T08:54:44.773
> 
> 标签：ajax, spring-mvc

我在 Spring MVC 中使用 ajax 时遇到了一些问题。我只想使用 ajax 刷新一个页面（并从控制器获取一个页面）。所以我在做什么。

```
$.ajax({                                       
  url : '/getCartProducts',
  type : 'GET',
  async: true,
  data : {},
  success : function(data) {  
    //data shoud be rendered jsp with model from the controller  
  },
  error: function (jqXHR, textStatus, errorThrown) {
    alert(jqXHR + " : " + textStatus + " : " + errorThrown); 
  }
})` 
```

此功能应该让我从控制器查看页面。这是我的控制器。

```
@RequestMapping(value = "/getCartProducts", method = RequestMethod.GET)
@ResponseBody String ajaxGetProdCart(HttpServletRequest request) {
    LOG.trace("We are in the controller");      
    return "cart"; //this is jsp page
} 
```

在没有@ResponseBody 的情况下尝试这样做，但它不起作用。它提醒我错误：`Not found`

```
<bean id="validator"
class="org.springframework.validation.beanvalidation.LocalValidatorFactoryBean" />
<bean id="viewResolver"
      class="org.springframework.web.servlet.view.InternalResourceViewResolver">
  <property name="prefix" value="/pages/" />
  <property name="suffix" value=".jsp" />
  <property name="contentType" value="text/html; charset=UTF-8" />
</bean>

<bean id="messageSource"
      class="org.springframework.context.support.ResourceBundleMessageSource">
  <property name="basename" value="messages" />
  <property name="useCodeAsDefaultMessage" value="true" />
</bean>

<bean id="jacksonMessageConverter"
class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter">
</bean>

<bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter">      
  <property name="messageConverters">
    <list>
      <ref bean="jacksonMessageConverter" />
    </list>
  </property>
</bean> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T09:15:30.630

您`cart.jsp`必须在 pages 文件夹内。您必须删除`@ResponseBody`注释

# php - ImageMagick 获取网络优化图片

> ID：10663779
> 
> 赞同：1
> 
> 时间：2012-05-19T08:56:26.253
> 
> 标签：php, imagemagick

我正在使用 ImageMagick 获取上传图片的 3 个版本。

问题是这 3 张新图片没有针对 Web 进行优化，例如Photoshop 中的**“保存为 Web 和设备”。**差别很大。ImageMagick 生成的文件比 Photoshop 中的网络优化图片大 5 倍。

你能帮我改善这个问题吗？

这是 ImageMagick 部分：

```
exec($imageMagickPath." uploads/foto.jpg -resize 514x uploads/fl-foto.jpg");
exec($imageMagickPath." uploads/fl-foto.jpg -resize 320x320 uploads/hl-foto.jpg");
exec($imageMagickPath." uploads/fl-foto.jpg -resize x96 -gravity center -crop 96x96+0+0 +repage uploads/th-foto.jpg"); 
```

当然，我想在前端使用这 3 个图像，但它们会变大并减慢整个页面的速度。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T09:03:09.847

你能试试这个代码。

```
 $im = new Imagick('Penguins.jpg');
   $im->cropImage(300, 300, 0, 0);       
   header("Content-Type: image/png");
   echo $im; 
```

如果它不工作。你介意我给你的phpinfo吗？

```
 <?php phpinfo(); ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T09:11:00.483

Imagemagick 使用该参数`-quality #`设置所需的质量，通过该参数您可以通过增加压缩来减小图像大小。您可以在他们的[文档](http://www.imagemagick.org/script/command-line-options.php#quality)中阅读更多相关信息。关于 jpeg 的部分是这样说的：

> 对于 JPEG 和 MPEG 图像格式，质量为 1（最低图像质量和最高压缩）到 100（最佳质量但最不有效的压缩）。如果可以确定，默认使用输入图像的估计质量，否则使用 92。当质量大于 90 时，色度通道不会下采样。使用 -sampling-factor 选项指定色度下采样的因子。

在您的情况下，这将变为：

```
exec($imageMagickPath." uploads/foto.jpg -resize 514x -quality 60 uploads/fl-foto.jpg"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T00:03:35.873

```
<p>
//Function for image re-size and cropping//
if(isset($_POST))
{
     //Some Settings
    $ThumbSquareSize        = 200; //Thumbnail will be 200x200
    $BigImageMaxSize        = 500; //Image Maximum height or width
    $ThumbPrefix            = "thumb_"; //Normal thumb Prefix
    $DestinationDirectory   = 'uploads/'; //Upload Directory ends with / (slash)
    $Quality                = 90;

    // check $_FILES['ImageFile'] array is not empty
    // "is_uploaded_file" Tells whether the file was uploaded via HTTP POST
    if(!isset($_FILES['ImageFile']) || !is_uploaded_file($_FILES['ImageFile']['tmp_name']))
    {
            die('Something went wrong with Upload!'); // output error when above checks fail.
    }

    // Random number for both file, will be added after image name
    $RandomNumber   = rand(0, 9999999999); 

    // Elements (values) of $_FILES['ImageFile'] array
    //let's access these values by using their index position
    $ImageName      = str_replace(' ','-',strtolower($_FILES['ImageFile']['name'])); 
    $ImageSize      = $_FILES['ImageFile']['size']; // Obtain original image size
    $TempSrc        = $_FILES['ImageFile']['tmp_name']; // Tmp name of image file stored in PHP tmp folder
    $ImageType      = $_FILES['ImageFile']['type']; //Obtain file type, returns "image/png", image/jpeg, text/plain etc.

    switch(strtolower($ImageType))
    {
        case 'image/png':
            $CreatedImage =  imagecreatefrompng($_FILES['ImageFile']['tmp_name']);
            break;
        case 'image/gif':
            $CreatedImage =  imagecreatefromgif($_FILES['ImageFile']['tmp_name']);
            break;          
        case 'image/jpeg':
        case 'image/pjpeg':
            $CreatedImage = imagecreatefromjpeg($_FILES['ImageFile']['tmp_name']);
            break;
        default:
            die('Unsupported File!'); //output error and exit
    }

    //PHP getimagesize() function returns height-width from image file stored in PHP tmp folder.
    //Let's get first two values from image, width and height. list assign values to $CurWidth,$CurHeight
    list($CurWidth,$CurHeight)=getimagesize($TempSrc);
    //Get file extension from Image name, this will be re-added after random name
    $ImageExt = substr($ImageName, strrpos($ImageName, '.'));
    $ImageExt = str_replace('.','',$ImageExt);

    //remove extension from filename
    $ImageName      = preg_replace("/\\.[^.\\s]{3,4}$/", "", $ImageName); 

    //Construct a new image name (with random number added) for our new image.
    $NewImageName = $ImageName.'-'.$RandomNumber.'.'.$ImageExt;
    //set the Destination Image
    $thumb_DestRandImageName    = $DestinationDirectory.$ThumbPrefix.$NewImageName; //Thumb name
    $DestRandImageName          = $DestinationDirectory.$NewImageName; //Name for Big Image

    //Resize image to our Specified Size by calling resizeImage function.
    if(resizeImage($CurWidth,$CurHeight,$BigImageMaxSize,$DestRandImageName,$CreatedImage,$Quality,$ImageType))
    {
        //Create a square Thumbnail right after, this time we are using cropImage() function
        if(!cropImage($CurWidth,$CurHeight,$ThumbSquareSize,$thumb_DestRandImageName,$CreatedImage,$Quality,$ImageType))
            {
                echo 'Error Creating thumbnail';
            }
        /*
        At this point we have succesfully resized and created thumbnail image
        We can render image to user's browser or store information in the database
        For demo, we are going to output results on browser.
        */
        echo '<table width="100%" border="0" cellpadding="4" cellspacing="0">';
        echo '<tr>';
        echo '<td align="center"><img src="uploads/'.$ThumbPrefix.$NewImageName.'" alt="Thumbnail"></td>';
        echo '</tr><tr>';
        echo '<td align="center"><img src="uploads/'.$NewImageName.'" alt="Resized Image"></td>';
        echo '</tr>';
        echo '</table>';

        /*
        // Insert info into database table!
        mysql_query("INSERT INTO myImageTable (ImageName, ThumbName, ImgPath)
        VALUES ($DestRandImageName, $thumb_DestRandImageName, 'uploads/')");
        */

    }else{
        die('Resize Error'); //output error
    }
}

// This function will proportionally resize image 
function resizeImage($CurWidth,$CurHeight,$MaxSize,$DestFolder,$SrcImage,$Quality,$ImageType)
{
    //Check Image size is not 0
    if($CurWidth <= 0 || $CurHeight <= 0) 
    {
        return false;
    }

    //Construct a proportional size of new image
    $ImageScale         = min($MaxSize/$CurWidth, $MaxSize/$CurHeight); 
    $NewWidth           = ceil($ImageScale*$CurWidth);
    $NewHeight          = ceil($ImageScale*$CurHeight);
    $NewCanves          = imagecreatetruecolor($NewWidth, $NewHeight);

    // Resize Image
    if(imagecopyresampled($NewCanves, $SrcImage,0, 0, 0, 0, $NewWidth, $NewHeight, $CurWidth, $CurHeight))
    {
        switch(strtolower($ImageType))
        {
            case 'image/png':
                imagepng($NewCanves,$DestFolder);
                break;
            case 'image/gif':
                imagegif($NewCanves,$DestFolder);
                break;          
            case 'image/jpeg':
            case 'image/pjpeg':
                imagejpeg($NewCanves,$DestFolder,$Quality);
                break;
            default:
                return false;
        }
    //Destroy image, frees memory   
    if(is_resource($NewCanves)) {imagedestroy($NewCanves);} 
    return true;
    }

}

//This function corps image to create exact square images, no matter what its original size!
function cropImage($CurWidth,$CurHeight,$iSize,$DestFolder,$SrcImage,$Quality,$ImageType)
{    
    //Check Image size is not 0
    if($CurWidth <= 0 || $CurHeight <= 0) 
    {
        return false;
    }

    if($CurWidth>$CurHeight)
    {
        $y_offset = 0;
        $x_offset = ($CurWidth - $CurHeight) / 2;
        $square_size    = $CurWidth - ($x_offset * 2);
    }else{
        $x_offset = 0;
        $y_offset = ($CurHeight - $CurWidth) / 2;
        $square_size = $CurHeight - ($y_offset * 2);
    }

    $NewCanves  = imagecreatetruecolor($iSize, $iSize); 
    if(imagecopyresampled($NewCanves, $SrcImage,0, 0, $x_offset, $y_offset, $iSize, $iSize, $square_size, $square_size))
    {
        switch(strtolower($ImageType))
        {
            case 'image/png':
                imagepng($NewCanves,$DestFolder);
                break;
            case 'image/gif':
                imagegif($NewCanves,$DestFolder);
                break;          
            case 'image/jpeg':
            case 'image/pjpeg':
                imagejpeg($NewCanves,$DestFolder,$Quality);
                break;
            default:
                return false;
        }
    //Destroy image, frees memory   
    if(is_resource($NewCanves)) {imagedestroy($NewCanves);} 
    return true;

    }

}
</p> 
```

# android - 在imageview中替换图像在Android中无法正常工作

> ID：10663780
> 
> 赞同：1
> 
> 时间：2012-05-19T08:56:44.623
> 
> 标签：android, imageview

我有一个 ImageView，单击一下我想用更大的图像替换它的图像，但似乎有问题。图像向下延伸，但应该向上延伸。我也尝试通过 XML 动态地执行此操作，但它不起作用。

```
// addnews button on the first screen
final ImageView addnewsback = (ImageView)findViewById(R.id.newslistback);
ImageView addnews = (ImageView)findViewById(R.id.newslistbtn);
addnews.setOnClickListener(new OnClickListener() {
    public void onClick(View arg0) {
        addnewsback.setImageResource(R.drawable.bgbig);
    vf.setDisplayedChild(0);
    }
}); 
```

![在此处输入图像描述](../Images/288992a6979d3391ad0abbf0c4d23e47.png)

```
<RelativeLayout
    android:id="@+id/c1"
    android:layout_marginTop="0dp"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="10dp"
    android:layout_alignParentLeft="true">

    <ImageView
        android:id="@+id/newslistback"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/holderview"
        android:src="@drawable/bg" />

    <ImageView
        android:id="@+id/newslistbtn"
    android:layout_marginLeft="14dp"
    android:scaleType="fitXY"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/newslisticon" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T08:05:28.603

尝试使用带有背景图像的relativelayout 作为它自己的背景，而不是新的图像视图，它会减少混乱，不要尝试给出大小并使用适当的图形大小。

# java - NonUniqueDiscoveredSqlAliasException 当两个表具有相同的列名时

> ID：10663785
> 
> 赞同：27
> 
> 时间：2012-05-19T08:58:09.000
> 
> 标签：java, sql, hibernate

我有两个表`Item`和`Nikasa`- 其定义如下：

`Item { id, name, spec}`和`Nikasa {id, date, item_id}.`这里`item_id`代表`Item.id`。

我做了一个简单的本机 SQL 连接来仅选择`Item.id`和`Nikasa.id`作为：

```
Session s = getSession();
SQLQuery sq = s.createSQLQuery("SELECT it.id, nik.id FROM item it LEFT JOIN nikasa nik ON (it.id = nik.item_id)");
List result = sq.list(); 
```

但是我`NonUniqueDiscoveredSqlAliasException : Encountered a duplicated sql alias [ID] during auto-discovery of a native-sql query`在行遇到异常`List result=sq.list();`：

**堆栈跟踪 ：**

```
org.hibernate.loader.custom.NonUniqueDiscoveredSqlAliasException: Encountered a duplicated sql alias [ID] during auto-discovery of a native-sql query
    at org.hibernate.loader.custom.CustomLoader.autoDiscoverTypes(CustomLoader.java:594)
    at org.hibernate.loader.Loader.getResultSet(Loader.java:1986)
    at org.hibernate.loader.Loader.doQuery(Loader.java:829)
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:289)
    at org.hibernate.loader.Loader.doList(Loader.java:2463)
    at org.hibernate.loader.Loader.doList(Loader.java:2449)
    at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2279)
    at org.hibernate.loader.Loader.list(Loader.java:2274)
    at org.hibernate.loader.custom.CustomLoader.list(CustomLoader.java:331)
    at org.hibernate.internal.SessionImpl.listCustomQuery(SessionImpl.java:1585)
    at org.hibernate.internal.AbstractSessionImpl.list(AbstractSessionImpl.java:224)
    at org.hibernate.internal.SQLQueryImpl.list(SQLQueryImpl.java:156) 
```

你能建议发生什么问题吗？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-05-19T09:00:24.240

您需要设置结果别名。

```
SELECT it.id as itemid, nik.id as nikasaid FROM item it LEFT JOIN nikasa nik ON (it.id = nik.item_id) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-01-06T09:57:40.550

如果您在 SQL 工作台中运行查询，您会发现表名与两列的 id 相同。Hibernate 将其视为重复的，因此需要别名。让我们假设您有查询：

```
SELECT it.id, nik.id FROM item it LEFT JOIN nikasa nik ON (it.id = nik.item_id) 
```

SQL 工作台上列名的输出将是：

```
id | id | 
```

在那里正常工作。但是对于休眠它需要唯一的列名。因此，您需要在任何列中添加别名

```
SELECT it.id as it_id, nik.id FROM item it LEFT JOIN nikasa nik ON (it.id = nik.item_id) 
```

或者

```
SELECT it.id , nik.id as nik_id FROM item it LEFT JOIN nikasa nik ON (it.id = nik.item_id) 
```

或者给这两个列一个别名。

# android - Android将数据从对话框传递到弹出对话框的屏幕

> ID：10663787
> 
> 赞同：2
> 
> 时间：2012-05-19T08:58:17.260
> 
> 标签：android, dialog

我想通过对话框在我的主屏幕上填充编辑文本。将弹出对话框。用户将输入数据（姓名或电子邮件），然后单击确定。名称和电子邮件应显示在弹出对话框的屏幕上。

```
public class DialogActivity extends Activity 
{
/* Called when the activity is first created.*/
final Context context = this;
//private Button button;
String result;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.item);

        final Dialog dialog = new Dialog(DialogActivity.this);
        dialog.setContentView(R.layout.main);
        dialog.setTitle("I'm soo ");
        dialog.setCancelable(true);
        dialog.show();

        Button okButton = (Button) dialog.findViewById(R.id.button1);
        okButton.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {

        LayoutInflater factory = LayoutInflater.from(DialogActivity.this);
                    final EditText barFirst= (EditText) dialog.findViewById(R.id.edittext01);
                    final EditText barSecond= (EditText) dialog.findViewById(R.id.edittext02);
                    result = barFirst.getText().toString();

                    dialog.hide(); 

            }  
        });
      EditText tview = (EditText)findViewById(R.id.cat_id);
        tview.setText(result);
        Toast.makeText(this, result,Toast.LENGTH_LONG).show();

    }
} 
```

我的 xml 文件必须`EditText`在对话框关闭后显示在对话框中输入的数据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T10:26:30.507

```
 public class DialogActivity extends Activity {

/* Called when the activity is first created.*/
   final Context context = this;
    //private Button button;
       String result;

       @Override
       public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

          setContentView(R.layout.main);

    final Dialog dialog = new Dialog(DialogActivity.this);
    dialog.setContentView(R.layout.main);
    dialog.setTitle("I'm soo ");
    dialog.setCancelable(true);
    dialog.show();

    Button okButton = (Button) dialog.findViewById(R.id.button1);
    okButton.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {

    LayoutInflater factory = LayoutInflater.from(DialogActivity.this);
                final EditText barFirst= (EditText) dialog.findViewById(R.id.edittext01);
                final EditText barSecond= (EditText) dialog.findViewById(R.id.edittext02);
                result = barFirst.getText().toString();

                dialog.dismiss(); 
    EditText tview = (EditText)findViewById(R.id.cat_id);
    tview.setText(result);

        }  
    }); 
```

# sql - 带日期的 SQL 查询

> ID：10663793
> 
> 赞同：0
> 
> 时间：2012-05-19T08:59:17.617
> 
> 标签：sql, date

我试图在 SQL 中使用“日期”，但我显然做错了什么。建议？

```
SELECT Name, ID, Town FROM Participants p, Towns t WHERE t.Date < '2012-05-19'; 
```

我想要的答案是今天或更早日期（来自另一个表）所在的名称、ID 和城镇。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T09:02:49.910

您还没有加入您的表格，并且您的数据库可能将日期一词作为关键字？如果是这种情况，请尝试：

```
WHERE t.[Date] < '2012-05-09' 
```

# postgresql - 如何使 sphinx 表现得像 postgres 相似性？

> ID：10663797
> 
> 赞同：0
> 
> 时间：2012-05-19T08:59:34.093
> 
> 标签：postgresql, sphinx

出于性能原因，我最近选择了 sphinx 而不是 postgres [http://www.postgresql.org/docs/8.4/static/pgtrgm.html](http://www.postgresql.org/docs/8.4/static/pgtrgm.html)中的相似函数。

但是，开箱即用的 sphinx 的行为与相似度函数不同。

并且似乎只匹配完整的单词（在我的情况下是地址），

关键字如：“Main South Rd”、“Field St”、“Olive Av”，没有给出结果

我曾尝试启用 SPH_MATCH_ANY，但通过 postgres 相似性，我得到了更好的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T13:50:49.423

要处理缩写，您也许可以使用单词形式。因此，短格式匹配长格式。

还有 [http://sphinxsearch.googlecode.com/svn/trunk/misc/suggest/](http://sphinxsearch.googlecode.com/svn/trunk/misc/suggest/) 这是一个使用三元组来获得模糊匹配的例子。

如果您需要更多帮助，建议给出一个更完整的示例，关于效果不佳的查询，以及您匹配的内容。

（我猜你只是使用similarity() 函数，通过循环遍历所有文档，并获取最佳匹配。它的蛮力，检查每个文档。Sphinx 正在使用索引（这就是它快速的原因）但并非所有查询都是适合这种类型的设置）

# android - 向应用小部件发送更新广播

> ID：10663800
> 
> 赞同：6
> 
> 时间：2012-05-19T09:00:14.450
> 
> 标签：android, android-intent

我有一个带有配置活动的应用程序小部件，我想在单击活动中的确定按钮时触发对小部件的更新。我写了这段代码：

```
 Intent initialUpdateIntent=new Intent(AppWidgetManager.
                    ACTION_APPWIDGET_UPDATE);
            initialUpdateIntent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID,
                    widgetID);
            sendBroadcast(initialUpdateIntent); 
```

但是由于某种原因，没有调用 onUpdate 函数！有谁知道问题可能是什么？谢谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-10-02T09:42:58.440

尝试以下操作：

```
public static void updateWidgets(Context context) {
    Intent intent = new Intent(context.getApplicationContext(), DayActivitiesAppWidget.class);
    intent.setAction(AppWidgetManager.ACTION_APPWIDGET_UPDATE);
    // Use an array and EXTRA_APPWIDGET_IDS instead of AppWidgetManager.EXTRA_APPWIDGET_ID,
    // since it seems the onUpdate() is only fired on that:
    AppWidgetManager widgetManager = AppWidgetManager.getInstance(context);
    int[] ids = widgetManager.getAppWidgetIds(new ComponentName(context, DayActivitiesAppWidget.class));

    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
        widgetManager.notifyAppWidgetViewDataChanged(ids, android.R.id.list);
    }

    intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, ids);
    context.sendBroadcast(intent);
} 
```

以这种方式替换`DayActivitiesAppWidget`您的`AppWidgetProvider`类，您可以更新所有小部件实例，然后您可以跟踪更新单个小部件实例的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T11:26:33.743

您是否尝试在 onReceive 中捕获您的广播消息：

```
@Override
public void onReceive(Context context, Intent intent) {
    super.onReceive(context, intent);
    String strAction = intent.getAction();
    if (AppWidgetManager.ACTION_APPWIDGET_UPDATE.equals(strAction)) {
        /* Do update */
    }
} 
```

否则，IMO 最好定义自己的消息，而不是使用 ACTION_APPWIDGET_UPDATE 来明确小部件更新视图的逻辑，类似的，在 1.Declare Intent name in Manifest 文件中：

```
<action android:name="com.yourdomain.youapp.SETTING_UPDATE" /> 
```

2.定义意图名称：

```
public static final String SETTING_UPDATE = "com.yourdomain.youapp.SETTING_UPDATE"; 
```

3.在onReceive中处理：

```
@Override
public void onReceive(Context context, Intent intent) {
    super.onReceive(context, intent);
    String strAction = intent.getAction();
    if (SETTING_UPDATE.equals(strAction)) {
        /* Do update setting */
    }
} 
```

希望对你有帮助^^

# java - 如何在“查询”方法中传递选择参数

> ID：10663808
> 
> 赞同：2
> 
> 时间：2012-05-19T09:01:20.987
> 
> 标签：java, android, sql, android-contentresolver

我正在尝试使用查询方法获取特定艺术家的所有专辑。但是，我是初学者，我不知道如何在查询方法中传递选择参数。

这是我到目前为止所拥有的：

```
artistAlbumCursor = getContentResolver().query(
                MediaStore.Audio.Artists.Albums.ALBUM, null,
                MediaStore.Audio.Media.ARTIST=?, new String[] {artistChosen},
                MediaStore.Audio.Artists.Albums.ALBUM + " ASC"); 
```

其中artistChosen 是包含所需艺术家的字符串。

正如我所说，我实际上并不知道如何传递选择参数，所以这只是一种尝试。

所以我想我要问的是，我如何将选择参数传递给查询方法。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T09:10:35.177

试试这个

```
artistAlbumCursor = getContentResolver().query(
                MediaStore.Audio.Artists.Albums.ALBUM, null,
                MediaStore.Audio.Media.ARTIST+ "=?", new String[] {artistChosen},
                MediaStore.Audio.Artists.Albums.ALBUM + " ASC"); 
```

# javascript - 如何在我的简单 Express 应用中使用 Node.js 集群？

> ID：10663809
> 
> 赞同：27
> 
> 时间：2012-05-19T09:01:24.553
> 
> 标签：javascript, node.js, redis, express, cluster-computing

— 我构建了一个简单的应用程序，它从 Redis 数据库中提取数据（50 项）并将其扔到本地主机上。我做了一个 ApacheBench（c = 100，n = 50000），我在双核 T2080 @ 1.73GHz（我的 6 年笔记本电脑）上获得了 150 个请求/秒，但 proc 的使用非常令人失望，因为显示： ![在此处输入图像描述](../Images/5ed641ff821ee5b4937c5ad0658dc3fb.png)

只使用了一个核心，这与 Node 中的设计一致，但我认为如果我可以使用 Node.js 集群，我的请求/秒几乎可以翻一番，达到约 300 个，甚至可能更多。我摆弄了很多，但我无法弄清楚如何将[此处给出的代码](http://nodejs.org/docs/latest/api/cluster.html)用于下面列出的我的应用程序：

```
var 
    express = require( 'express' ),
    app     = express.createServer(),
    redis   = require( 'redis' ).createClient();

app.configure( function() {
    app.set( 'view options', { layout: false } );
    app.set( 'view engine', 'jade' );
    app.set( 'views', __dirname + '/views' );
    app.use( express.bodyParser() );
} );

function log( what ) { console.log( what ); }

app.get( '/', function( req, res ) {
    redis.lrange( 'items', 0, 50, function( err, items ) {
            if( err ) { log( err ); } else {
                res.render( 'index', { items: items } );
            }
    });
});

app.listen( 8080 ); 
```

我还想强调的是，该应用程序是 I/O 密集型的（不是 CPU 密集型的，这会使像[threads-a-gogo](http://github.com/xk/node-threads-a-gogo)这样的东西比集群更好的选择）。

希望在解决这个问题方面得到一些帮助。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-19T11:49:48.627

实际上，您的工作负载并不是真正的 I/O 限制：由于基于翡翠的动态页面生成的成本，它是 CPU 限制的。我无法猜测您的玉模板的复杂性，但即使使用简单的模板，生成 HTML 页面也很昂贵。

对于我的测试，我使用了这个模板：

```
html(lang="en")
  head
    title Example
  body
    h1 Jade - node template engine
    #container
      ul#users
        each user in items
          li User:#{user} 
```

我在 Redis 中的 items 键中添加了 100 个虚拟字符串。

在我的机器上，我得到 475 req/s with node.js CPU at 100%（这意味着这个双核机器上的 CPU 消耗为 50%）。让我们替换：

```
res.render( 'index', { items: items } ); 
```

经过：

```
res.send( '<html lang="en"><head><title>Example</title></head><body><h1>Jade - node template engine</h1><div id="container"><ul id="users"><li>User:NOTHING</li><li>User:NOTHING</li><li>User:NOTHING</li><li>User:NOTHING</li><li>User:NOTHING</li><li>User:NOTHING</li><li>User:NOTHING</li><li>User:NOTHING</li><li>User:NOTHING</li><li>User:NOTHING</li><li>User:NOTHING</li><li>User:NOTHING</li><li>User:NOTHING</li><li>User:NOTHING</li><li>User:NOTHING</li><li>User:NOTHING</li><li>User:NOTHING</li><li>User:NOTHING</li><li>User:NOTHING</li><li>User:NOTHING</li><li>User:NOTHING</li><li>User:NOTHING</li><li>User:NOTHING</li><li>User:NOTHING</li><li>User:NOTHING</li><li>User:NOTHING</li><li>User:NOTHING</li><li>User:NOTHING</li><li>User:NOTHING</li><li>User:NOTHING</li><li>User:NOTHING</li><li>User:NOTHING</li><li>User:NOTHING</li><li>User:NOTHING</li><li>User:NOTHING</li><li>User:NOTHING</li><li>User:NOTHING</li><li>User:NOTHING</li><li>User:NOTHING</li><li>User:NOTHING</li><li>User:NOTHING</li><li>User:NOTHING</li><li>User:NOTHING</li><li>User:NOTHING</li><li>User:NOTHING</li><li>User:NOTHING</li><li>User:NOTHING</li><li>User:NOTHING</li><li>User:NOTHING</li><li>User:NOTHING</li><li>User:NOTHING</li></ul></div></body></html>' ); 
```

现在，基准测试的结果接近 2700 req/s。所以瓶颈显然是由于 HTML 页面的格式。

在这种情况下使用集群包是个好主意，而且很简单。代码可以修改如下：

```
var cluster = require('cluster')

if ( cluster.isMaster ) {
  for ( var i=0; i<2; ++i )
    cluster.fork();
} else {
  var
      express = require( 'express' ),
      app     = express.createServer(),
      redis   = require( 'redis' ).createClient();

  app.configure( function() {
      app.set( 'view options', { layout: false } );
      app.set( 'view engine', 'jade' );
      app.set( 'views', __dirname + '/views' );
      app.use( express.bodyParser() );
  });

  function log( what ) { console.log( what ); }

  app.get( '/', function( req, res ) {
      redis.lrange( 'items', 0, 50, function( err, items ) {
            if( err ) { log( err ); } else {
              res.render( 'index', { items: items } );
            }
      });
  });

  app.listen( 8080 );
} 
```

现在基准测试的结果接近 750 req/s，CPU 消耗为 100%（与最初的 475 req/s 相比）。

# perl - 为什么 Term::ReadKey::SetTerminalSize 在测试中表现不同？

> ID：10663811
> 
> 赞同：0
> 
> 时间：2012-05-19T09:01:28.500
> 
> 标签：perl, terminal, automated-tests

```
#!/usr/bin/env perl
use warnings;
no warnings 'redefine';
use 5.10.1;
use Term::ReadKey;
use lib 'lib';
use Term::Choose qw(choose);

my @test_keys = ( 
    Term::Choose::KEY_SPACE, Term::Choose::KEY_RIGHT, Term::Choose::KEY_RIGHT, Term::Choose::KEY_RIGHT,    
    Term::Choose::KEY_RIGHT, Term::Choose::KEY_SPACE, Term::Choose::KEY_DOWN,  Term::Choose::KEY_DOWN,
    Term::Choose::KEY_DOWN,  Term::Choose::KEY_DOWN,  Term::Choose::KEY_SPACE, Term::Choose::KEY_BTAB,
    Term::Choose::KEY_SPACE, Term::Choose::KEY_LEFT,  Term::Choose::KEY_UP,    Term::Choose::KEY_SPACE,
    Term::Choose::KEY_DOWN,  Term::Choose::KEY_DOWN,  Term::Choose::KEY_TAB,   Term::Choose::KEY_TAB,  
    Term::Choose::KEY_TAB,   Term::Choose::KEY_TAB,   Term::Choose::KEY_TAB,   Term::Choose::KEY_TAB,  
    Term::Choose::KEY_TAB,   Term::Choose::KEY_TAB,   Term::Choose::KEY_TAB,   Term::Choose::KEY_TAB,  
    Term::Choose::KEY_TAB,   Term::Choose::KEY_SPACE, Term::Choose::KEY_BSPACE,Term::Choose::KEY_BSPACE,
    Term::Choose::KEY_BSPACE,Term::Choose::KEY_BSPACE,Term::Choose::KEY_ENTER
);

SetTerminalSize( 80, 25 ,0 , 0, \*STDOUT );

sub Term::Choose::_getch { return shift @test_keys };

my @expected = ( 1, 23, 26, 33, 38, 42, 88 );
my @result = choose( [ 1 .. 100 ] );

say "expected: <@expected>";
say "result  : <@result>"; 
```

返回

```
expected: <1 23 26 33 38 42 88>
result  : <1 23 26 33 38 42 88> 
```

为什么`SetTerminalSize`from [Term::ReadKey](http://search.cpan.org/perldoc?Term%3a%3aReadKey)在此测试中不起作用：

```
#!/usr/bin/env perl
use warnings;
no warnings 'redefine';
use strict;
use 5.10.1;
use Term::ReadKey;
use Term::Choose qw(choose);
use Test::More tests => 1;

my @test_keys = ( 
    Term::Choose::KEY_SPACE, Term::Choose::KEY_RIGHT, Term::Choose::KEY_RIGHT, Term::Choose::KEY_RIGHT,    
    Term::Choose::KEY_RIGHT, Term::Choose::KEY_SPACE, Term::Choose::KEY_DOWN,  Term::Choose::KEY_DOWN,
    Term::Choose::KEY_DOWN,  Term::Choose::KEY_DOWN,  Term::Choose::KEY_SPACE, Term::Choose::KEY_BTAB,
    Term::Choose::KEY_SPACE, Term::Choose::KEY_LEFT,  Term::Choose::KEY_UP,    Term::Choose::KEY_SPACE,
    Term::Choose::KEY_DOWN,  Term::Choose::KEY_DOWN,  Term::Choose::KEY_TAB,   Term::Choose::KEY_TAB,  
    Term::Choose::KEY_TAB,   Term::Choose::KEY_TAB,   Term::Choose::KEY_TAB,   Term::Choose::KEY_TAB,  
    Term::Choose::KEY_TAB,   Term::Choose::KEY_TAB,   Term::Choose::KEY_TAB,   Term::Choose::KEY_TAB,  
    Term::Choose::KEY_TAB,   Term::Choose::KEY_SPACE, Term::Choose::KEY_BSPACE,Term::Choose::KEY_BSPACE,
    Term::Choose::KEY_BSPACE,Term::Choose::KEY_BSPACE,Term::Choose::KEY_ENTER
);

SetTerminalSize( 80, 25 ,0 , 0, \*STDOUT );

sub Term::Choose::_getch { return shift @test_keys };

my @expected = ( 1, 23, 26, 33, 38, 42, 88 );
my @result = choose( [ 1 .. 100 ] );

is( "@result", "@expected", 'returnvalues "choose"' ); 
```

输出：

```
t/choose.t .. TIOCSWINSZ ioctl call to set terminal size failed: The argument is invalid at t/choose.t line 22, <DATA> line 261.
# Looks like your test exited with 22 before it could output anything.
t/choose.t .. Dubious, test returned 22 (wstat 5632, 0x1600)
Failed 1/1 subtests 

Test Summary Report
-------------------
t/choose.t (Wstat: 5632 Tests: 0 Failed: 0)
  Non-zero exit status: 22
  Parse errors: Bad plan.  You planned 1 tests but ran 0.
Files=1, Tests=0,  0 wallclock secs ( 0.02 usr  0.00 sys +  0.04 cusr  0.01 csys =  0.07 CPU)
Result: FAIL
Failed 1/1 test programs. 0/0 subtests failed. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T21:20:15.117

这可能是因为脚本试图调用句柄`TIOCSWINSZ` `ioctl()`上的`STDOUT`，并且在通过单元测试运行的情况下，脚本`STDOUT`没有连接到终端，而是连接到来自`prove`. 作为管道而不是 TTY，它不会对此做出响应`ioctl()`并产生所示的错误。

# php - 从 __callStatic 调用私有静态方法

> ID：10663813
> 
> 赞同：0
> 
> 时间：2012-05-19T09:01:37.833
> 
> 标签：php, private, static-methods, overloading, private-methods

我想使用 __callStatic 作为调用静态方法的预处理器。我的想法是将方法设为私有，以便将每个静态调用转发到 __callStatic。然后我可以用它来做一些事情，然后调用该方法。但这似乎不可能。这是一个例子：

```
class A {

    public static function __callStatic($name, $params) {
        var_dump($name);

        // TODO call the private function from class B here

        //call_user_func_array('self::' . $name, $params); //infinite loop

    }

}

class B extends A {

    private static function test($bar) {
        echo $bar;
    }

}

B::test('foo'); 
```

也许有人有解决方案:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T12:42:06.780

这也有效

```
class A 
{
    public static function __callStatic($method, $params)
    {
        return call_user_func_array('static::'.$method, $params);
    }
}
class B extends A
{
    protected static function test($value)
    {
        echo $value;
    }
}
B::test('foo'); 
```

原始的第一个问题是使您的方法私有。私有方法仅在当前类的范围内（在本例中为 B::test()），但是，该方法是从 A::__callStatic() 调用的，因此超出了范围。

第二个问题是 self:: 的使用，虽然我无法充分解释为什么我害怕（也许更精通细微差别的人可能会有所启发？），但是用`static`关键字替换 self 是有效的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T12:45:03.803

[http://www.php.net/manual/en/function.get-defined-functions.php](http://www.php.net/manual/en/function.get-defined-functions.php)？看一个例子@http: [//plugins.svn.wordpress.org/fresh-post/trunk/phpthumb.functions.php](http://plugins.svn.wordpress.org/fresh-post/trunk/phpthumb.functions.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T09:16:47.267

这有效

```
 <?php
/**
 * Created by JetBrains PhpStorm.
 * User: ckoch
 * Date: 19.05.12
 * Time: 10:43
 * To change this template use File | Settings | File Templates.
 */

class A {

    public static function __callStatic($name, $params) {
        var_dump($name);

        // TODO call the private function from class B here

        //call_user_func_array('self::' . $name, $params); //infinite loop

        //forward_static_call_array(array(self, $name), $params); // loops too

        $method = new ReflectionMethod(get_called_class(), $name);
        $method->setAccessible(true);
        $method->invokeArgs(null, $params);

    }

}

class B extends A {

    private static function test($bar) {
        var_dump($bar);
    }

}

B::test('foo'); 
```

# php - 使用 PHP 将 HTML 代码添加到 XML 文件

> ID：10663814
> 
> 赞同：-1
> 
> 时间：2012-05-19T09:01:53.623
> 
> 标签：php, xml

我有一个 xml 文件（scores.xml），我使用 php 代码向它添加新标签...

我有一个名为 Header 的标签，其中包含一些 html 代码

```
<![CDATA[<tr><td colspan='7' id='headertd'>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<img border='0' src='images/euro.png' />
&nbsp;&nbsp;&nbsp;&nbsp;
UEFA Euro 2012 Qualifications</td></tr>]]> 
```

当我以 pgp 脚本的形式编写此代码并提交除标头标记外的所有 XML 文件时，一切正常。我在 php 脚本中遇到错误，并且代码在 xml 标记中是这样的：

```
&lt;![CDATA[&lt;tr&gt;&lt;td colspan='7' id='headertd'&gt;&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#13;
&lt;img border='0' src='images/euro.png' /&gt;&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&#13;
UEFA Euro 2012 Qualifications&lt;/td&gt;&lt;/tr&gt;]]&gt; 
```

所以这让我的xml得到了wong信息......无论如何我可以解决这个问题吗？并避免这些代码的转换？

那是我的 php 代码：

```
<?php
if (isset($_POST['submitted'])) {//If the user submitted the form, then add to the XML file
    //Load the scores XML file
    $scores = new DOMDocument();
    $scores -> load('../scores.xml');

    //Get the <Games> tag
    $games = $scores -> getElementsByTagName('Games');

    //Create the new <Game> tag (Could probably be done better by first placing everything in an array or something)
    $newGame = $scores -> createElement("Game");
    $newGame -> appendChild($scores -> createElement("Header", $_POST['header']));
    $newGame -> appendChild($scores -> createElement("Row", $_POST['row']));
    $newGame -> appendChild($scores -> createElement("Date", $_POST['date']));
    $newGame -> appendChild($scores -> createElement("Time", $_POST['time']));
    $newGame -> appendChild($scores -> createElement("HomeTeam", $_POST['hometeam']));
    $newGame -> appendChild($scores -> createElement("Score", $_POST['score']));
    $newGame -> appendChild($scores -> createElement("AwayTeam", $_POST['awayteam']));
    $newGame -> appendChild($scores -> createElement("Other", $_POST['other']));
    $newGame -> appendChild($scores -> createElement("InfoID", $_POST['infoid']));
    $newGame -> appendChild($scores -> createElement("InfoData", $_POST['infodata']));

    //Add the new <Game> tag under the <Games> tag
    $games -> item(0) -> appendChild($newGame);

    //Save again
    $scores -> save('../scores.xml');

    echo "New game added.";
}
?> 
```

这个 php 连接到一个看起来像这样的表单：

```
<form id="form1" method="post" action="">
<table id="table2">

<tr><td>Header:</td> <td><textarea style=" color:#000;" name="header" cols="73" rows="6" > </textarea></td></tr>

<tr><td>Row:</td> <td><input id='textfield' type="text" size="70" name="row" value='A or B' onfocus="inputFocus(this)" onblur="inputBlur(this)"></td></tr>

<tr><td>Date:</td> <td><input id='textfield' type="text" size="70" name="date" value='Date and time of the match' onfocus="inputFocus(this)" onblur="inputBlur(this)"></td></tr>

<tr><td>Time:</td> <td><input id='textfield' type="text" size="70" name="time" value='Current time' onfocus="inputFocus(this)" onblur="inputBlur(this)"></td></tr>

<tr><td>HomeTeam:</td> <td><input id='textfield' type="text" size="70" name="hometeam" value='Home Team' onfocus="inputFocus(this)" onblur="inputBlur(this)"></td></tr>

<tr><td>Score:</td> <td><input id='textfield' type="text" size="70" name="score" value='Score' onfocus="inputFocus(this)" onblur="inputBlur(this)"></td><td>"3 - 2"</td></tr>

<tr><td>AwayTeam:</td> <td><input id='textfield' type="text" size="70" name="awayteam" value='Away Team' onfocus="inputFocus(this)" onblur="inputBlur(this)"></td></tr>

<tr><td>Other:</td> <td><input id='textfield' type="text" size="70" name="other" value='Additional Info' onfocus="inputFocus(this)" onblur="inputBlur(this)"></td></tr>

<tr><td>InfoID:</td> <td><input id='textfield' type="text" size="70" name="infoid" value='The ID of the Popup' onfocus="inputFocus(this)" onblur="inputBlur(this)" ></td><td></td></tr>

<tr><td>InfoData:</td> <td><textarea id='textfield' value='Data of the Popup' onfocus="inputFocus(this)" onblur="inputBlur(this)" name="infodata" cols="73" rows="6"></textarea></td><td>

<tr><td> </td><td><input type="submit" name="submitted" name="Add new row"></td><td> <td></td> 

</table>

 <style>
 BODY {font-family:"Trebuchet MS", Arial, Helvetica, sans-serif; color:#333; font-size:11px;}
 #textfield {color:#888;}
 #table2 td, tr { padding-right:10px;}
 </style> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T20:44:45.120

您可以使用 PHP 函数 createCDATASection 将 CDATA 添加到您的 xml 文件中：

交换

```
$newGame -> appendChild($scores -> createElement("Header", $_POST['header'])); 
```

为了

```
$h = $scores -> createElement("Header"); //Create a empty <Header> tag
$h -> appendChild($scores ->createCDATASection ($_POST['header'])); //Add a CDATA element to it
$newGame -> appendChild($h); //Then append it to the game tag 
```

有了评论，它应该是相当直截了当的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T09:14:07.603

我认为您根本不应该使用CDATA。它有很多问题；通过忽略它，我相信一切都会按预期工作。

您现在拥有的实际上是双重编码（使用 CDATA 和添加的实体），因此在这种情况下结果将是错误的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T00:01:18.213

表单背后的代码可能是使用以下方式保存表单值：

```
htmlentities($xml_string); 
```

如果您使用框架来处理表单提交，则可能会传递一个标志（真/假）来告诉框架在保存数据时不要使用 htmlentities。但是，请确保您仍在以某种方式验证该字段以防止注入安全漏洞。（例如 - 如果存储在数据库中，请使用 mysql_real_escape_string() 或类似的。）

你可以试试：

```
$scores = new DOMDocument();
$scores->substituteEntities = false;
$scores->load('../scores.xml'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T21:16:51.770

我只是让它看起来像在 xml 文件中，当您检索它时，您将使用 PHP 函数`htmlspecialchars_decode`将它们转换回来。

例子：

```
<?php
$s = "&lt;tr&gt;&lt;td colspan='7' id='headertd'&gt;&#xD;
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#xD;
    &lt;img border='0' src='images/euro.png' /&gt;&#xD;
    &nbsp;&nbsp;&nbsp;&nbsp;&#xD;
    UEFA Euro 2012 Qualifications&lt;/td&gt;&lt;/tr&gt;"; 
//The orginal $s is retrieved from the XML file

$s = htmlspecialchars_decode($s);
echo $s; //The orginal code is printed
?> 
```

# html - CSS：侧边栏 100% 高度无滚动

> ID：10663815
> 
> 赞同：8
> 
> 时间：2012-05-19T09:01:58.593
> 
> 标签：html, css

我想要一个侧边栏，它占据屏幕的整个高度并且在向下滚动时不会改变。

因此，当我仅滚动内容时，导航栏始终保持不变。

我做了第一个例子：http: [//jsfiddle.net/CwSD6/](http://jsfiddle.net/CwSD6/)

但是缺少非滚动功能...

问候

编辑：您需要使用位置：固定，顶部，底部，左侧，值为 0。 [http://jsfiddle.net/CwSD6/1/](http://jsfiddle.net/CwSD6/1/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-19T09:17:56.710

可以通过`position: fixed;`做`<aside>`

看到这个小提琴[jsfiddle](http://jsfiddle.net/HNjQR/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T09:09:28.877

尝试这个：

```
aside
{
    position: fixed;
    width: 200px;
    height: 100%;
    top: 0;
    left: 0;
    border: 1px solid #111;
} 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-14T02:34:59.067

我使用 jQuery 方法，因为我的网格布局通常使用固定或绝对螺丝。在下面的示例中，当宽度低于 990 像素时，我的网格会折叠，因此假设您正在响应，您需要更改此设置。

```
$(window).resize(function() {
    var doc_height = $(document).height();
    var doc_width = $(document).width()
    if (doc_width > 990) {
        $('#sidebar').css("height", doc_height);
    } else {
        $('#sidebar').css("height", 'auto');
    }
}); 
```

虽然这可能不是最有效的方式，但您不需要设置变量。我发现它有助于提高可读性。

亲切的问候，M

# objective-c - NSExpression 和核心数据

> ID：10663820
> 
> 赞同：2
> 
> 时间：2012-05-19T09:02:24.040
> 
> 标签：objective-c, ios, xcode4

我是核心数据的初学者。我正在创建一个应用程序，它可以计算每个家庭成员所承担的费用。我有一个名为“费用”的实体，属性是

1.  付款人
2.  日期
3.  amt（金额）
4.  描述（描述）

如何使用 NSExpression 或任何其他可以返回每个付款人的总费用金额的方式创建一个数组。

PS =我可以通过以下代码获得特定字符串的“amt”的“总和”

```
NSExpression *keyPathExpression = [NSExpression expressionForKeyPath:@"amt"];

NSExpression *expression = [NSExpression expressionForFunction:@"sum:"arguments:[NSArray arrayWithObject:keyPathExpression]];

NSExpressionDescription *expressionDescription = [[NSExpressionDescription alloc] init];

NSPredicate *predicate = [[NSPredicate alloc]init];    

NSString *mem = @"Chintu";

predicate = [NSPredicate predicateWithFormat:

             @"payer like %@", mem];

[expressionDescription setName:@"sumExpenses"];
[expressionDescription setExpression:expression];
[expressionDescription setExpressionResultType:NSDecimalAttributeType];
[request setPropertiesToFetch:[NSArray arrayWithObject:expressionDescription]];
[request setPredicate:predicate]; 
```

# android - 服务是否自动启动？

> ID：10663822
> 
> 赞同：1
> 
> 时间：2012-05-19T09:02:45.117
> 
> 标签：android

我有一个由 startService 启动并与 BIND_AutoCreate 绑定的服务，我希望我的服务在 android 因内存不足而杀死它时自动运行，我该如何植入它？

谢谢'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T09:32:55.473

您必须注册广播接收器，`ACTION_DEVICE_STORAGE_OK`这表明设备上的低内存条件不再存在。在`onReceive()`方法中检查您的服务是否已停止，请启动它。

`DEVICE_STORAGE_OK`当设备从低内存状态（内部存储器）中恢复时广播该操作。我认为这是一个完美的事件，您可以检查您的服务是否在系统内存恢复期间被杀死，如果被杀死则启动它。

请在此处阅读[文档](http://developer.android.com/reference/android/content/Intent.html#ACTION_DEVICE_STORAGE_OK)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T14:14:17.530

如果服务是由于**BIND_AUTO_CREATE**绑定而创建的，如果它没有绑定任何活动，它将被停止。

根据文档（[服务生命周期](http://developer.android.com/reference/android/app/Service.html#ServiceLifecycle)），您可以显式启动服务，然后绑定启用自动创建标志。

如果您以 STICKY 显式启动服务（在其 * onStartCommand* 方法中返回 START_STICKY ，则只要系统有更多资源，它将自动重新启动。

# xml - XPATH : 从 Soap 消息中提取数据

> ID：10663823
> 
> 赞同：0
> 
> 时间：2012-05-19T09:02:45.167
> 
> 标签：xml, xpath

我收到以下肥皂消息，想知道如何编写 xpath 查询来提取 GetNewGUIDResult？

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
<s:Header>
<ActivityId CorrelationId="06996737-224f-4004-9dad-042222b161fc" xmlns="http://schemas.microsoft.com/2004/09/ServiceModel/Diagnostics">b89cdee8-18b4-4ea0-a5a1-7b10ace1b23e</ActivityId>
</s:Header>
<s:Body>
<GetNewGUIDResponse xmlns="http://bank.co.com/Service/2011_01/Service">
<GetNewGUIDResult>125959</GetNewGUIDResult>
</GetNewGUIDResponse>
</s:Body>
</s:Envelope> 
```

我尝试了一些 xpath 命令，但它们给出了例外。我也不确定 xmlnamespacemanager 的用法。

谢谢

瓦伦

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T09:18:00.573

您的 XPath 表达式应该像这样工作：

`/soap:Envelope/soap:Body/srv:GetNewGUIDResponse/srv:GetNewGUIDResult/text()`

您需要声明命名空间前缀。我不知道您使用的是什么 API，但您需要声明以下命名空间前缀才能使上述表达式为您工作：

肥皂 -> [http://schemas.xmlsoap.org/soap/envelope/srv](http://schemas.xmlsoap.org/soap/envelope/) -> [http://bank.co.com/Service/2011_01/Service](http://bank.co.com/Service/2011_01/Service)

如果您不想声明名称空间并且使用 XPath 2.0 处理器，您也可以执行以下操作（但不推荐！）

`/s:Envelope/s:Body/*[namespace-uri()='http://bank.co.com/Service/2011_01/Service' and local-name()='GetNewGUIDResponse']/*[namespace-uri()='http://bank.co.com/Service/2011_01/Service' and local-name()='GetNewGUIDResult']`

# ios5 - 在 UIViewController 上的两个 UIView 之间翻转动画

> ID：10663828
> 
> 赞同：5
> 
> 时间：2012-05-19T09:03:23.700
> 
> 标签：ios5, uiview, uiviewanimation

我的视图控制器上有两个 UIView。我想在用户触摸的两个视图之间切换。一切都很好，除了动画我尝试了两种方法，第一种是：

```
[UIView transitionFromView:frontView toView:backView 
duration:01.0 options:UIViewAnimationOptionTransitionFlipFromRight 
completion:NULL]; 
```

这是为视图设置动画，但实际上是在为整个视图控制器的视图设置动画，而我只想要我的视图所在的部分，即屏幕中央大约 320x200 的部分。

然后我尝试了另一个选项，即：

```
[UIView animateWithDuration:1.0 delay:0.0
            options:UIViewAnimationOptionTransitionFlipFromRight 
            animations:^{
        [frontView removeFromSuperview];
        [self.view addSubview:backView];
    } completion:nil]; 
```

但这根本不是动画视图。只需立即切换视图，无需任何动画。任何人都可以帮助我理解我错在哪里或需要改变。非常感谢您的时间和考虑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T09:46:29.187

在我发布我的问题后不久，我为这个查询找到了一个很好的答案，你们可以看看：

[如何翻转单个 UIView（不翻转父视图）](https://stackoverflow.com/questions/9524048/how-to-flip-an-individual-uiview-without-flipping-the-parent-view)

诀窍是使用第三个 UIView 作为容器视图，然后在其上添加需要动画的视图作为子视图。在我的情况下，这就是诀窍。请记住，我使用的是我在问题中提到的第一种方法。感谢大家的时间。

# javascript - 使用 JSNI 从 GWT 向 Google Analytics 发送事件

> ID：10663834
> 
> 赞同：1
> 
> 时间：2012-05-19T09:04:04.013
> 
> 标签：javascript, gwt, google-analytics, jsni

我的 HTML 文件中有 和 之间的所有 Google Analytics 代码。这些统计信息已正确处理。

在我的 onclick 事件后，调用下面的函数，我想向 Google Analytics 发送一个事件，但从未收到。我究竟做错了什么？

```
public static native void googleAnalyticsEvent(String boxId) /*-{
_gaq.push(['_trackEvent', boxId , 'Click']);
}-*/; 
```

仅供参考，如果我将以下代码替换为以下代码，则会正确显示警报：

```
public static native void googleAnalyticsEvent(String boxId) /*-{
alert(boxId);
}-*/; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T11:49:42.217

尝试：

```
public static native void googleAnalyticsEvent(String boxId) /*-{
    $wnd._gaq.push(['_trackEvent', boxId , 'Click']);
}-*/; 
```

来自[https://developers.google.com/web-toolkit/doc/1.6/DevGuideCodingBasics#DevGuideJavaScriptNativeInterface](https://developers.google.com/web-toolkit/doc/1.6/DevGuideCodingBasics#DevGuideJavaScriptNativeInterface)

> “请注意，代码并没有直接在方法内部引用 JavaScript 窗口对象。当从 JSNI 访问浏览器的窗口和文档对象时，您必须分别将它们引用为 $wnd 和 $doc。您编译的脚本在嵌套框架中运行，并且 $wnd 和 $doc 会自动初始化以正确引用主机页面的窗口和文档。”

# java - 如何从设备获取新短信？

> ID：10663835
> 
> 赞同：0
> 
> 时间：2012-05-19T09:04:24.823
> 
> 标签：java, android, sms

我一直在开发应用程序，我需要处理文本正文。我尝试使用`BroadcastReceiver`它：

```
private static final Uri SMS_INBOX_URI = Uri.parse("content://sms/inbox");

@Override
public void onReceive(Context context, Intent intent) {
    // TODO Auto-generated method stub
    SharedPreferences prefs=PreferenceManager.getDefaultSharedPreferences(context);

    Cursor sms = context.getContentResolver().query(SMS_INBOX_URI, null, null, null, null);
    sms.moveToFirst();

    String body=sms.getString(sms.getColumnIndex("body"));
    String number=sms.getString(sms.getColumnIndex("address"));
    String key=prefs.getString(context.getString(R.string.acc_key_key), "");
    sms.close();
    Log.e("body", body);
    if (body.trim().equals("#"+key)) {
        Log.e("sms", "sending");
        sendGPSCoordinates(context, number);
    } else if (body.trim().equals("?"+key)){
        Log.e("request", "manual");
        sendResponces(context);
    }
} 
```

但此代码返回最后一条短信，而不是一条新短信。但我需要接收新的短信。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T09:09:16.733

[接收短信这里](http://mobiforge.com/developing/story/sms-messaging-android)有一个非常非常好的教程

```
@Override
    public void onReceive(Context context, Intent intent) 
    {
        //---get the SMS message passed in---
        Bundle bundle = intent.getExtras();        
        SmsMessage[] msgs = null;
        String str = "";            
        if (bundle != null)
        {
            //---retrieve the SMS message received---
            Object[] pdus = (Object[]) bundle.get("pdus");
            msgs = new SmsMessage[pdus.length];            
            for (int i=0; i<msgs.length; i++){
                msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);                
                str += "SMS from " + msgs[i].getOriginatingAddress();                     
                str += " :";
                str += msgs[i].getMessageBody().toString();
                str += "\n";        
            }
            //---display the new SMS message---
            Toast.makeText(context, str, Toast.LENGTH_SHORT).show();
        }                         
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T09:28:27.323

请更改以下行，

```
Cursor sms = context.getContentResolver().query(SMS_INBOX_URI, null, null, null, null);
sms.moveToFirst(); 
```

到，如下所示，

```
Cursor sms = context.getContentResolver().query(SMS_INBOX_URI, null, null, null, null);
sms.moveToLast();   // Moving to newly received SMS 
```

# java - NameNode：java.net.BindException

> ID：10663839
> 
> 赞同：1
> 
> 时间：2012-05-19T09:05:13.387
> 
> 标签：java, linux, jakarta-ee, hadoop, hbase

嗨，伙计们，我遇到了一个非常奇怪的问题。我正在通过从我的机器上访问它来在另一个 VM 上安装 HBase 和 hadoop。现在我已经正确安装了 hadoop，然后伊朗它./start-all.sh 我看到所有进程都是运行完美。所以我做了 jps，我看到
jobtracker tasktracker
namenode
secondrynamenode
datanode
一切

运行良好。现在当我设置 hbase 然后启动 hadoop 和 Hbase 时，我看到 namenode 没有运行并且在日志中（来自 namenode 日志文件）我得到了这个例外

```
java.lang.InterruptedException: sleep interrupted
    at java.lang.Thread.sleep(Native Method)
    at org.apache.hadoop.hdfs.server.namenode.DecommissionManager$Monitor.run(DecommissionManager.java:65)
    at java.lang.Thread.run(Thread.java:662)
2012-05-19 08:46:07,493 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: Number of transactions: 0 Total time for transactions(ms): 0Number of transactions batched in Syncs: 0 Number of syncs: 0 SyncTimes(ms): 0 
2012-05-19 08:46:07,516 ERROR org.apache.hadoop.hdfs.server.namenode.NameNode: java.net.BindException: Problem binding to localhost/23.21.195.24:54310 : Cannot assign requested address
    at org.apache.hadoop.ipc.Server.bind(Server.java:227)
    at org.apache.hadoop.ipc.Server$Listener.<init>(Server.java:301)
    at org.apache.hadoop.ipc.Server.<init>(Server.java:1483)
    at org.apache.hadoop.ipc.RPC$Server.<init>(RPC.java:545)
    at org.apache.hadoop.ipc.RPC.getServer(RPC.java:506)
    at org.apache.hadoop.hdfs.server.namenode.NameNode.initialize(NameNode.java:294)
    at org.apache.hadoop.hdfs.server.namenode.NameNode.<init>(NameNode.java:497)
    at org.apache.hadoop.hdfs.server.namenode.NameNode.createNameNode(NameNode.java:1268)
    at org.apache.hadoop.hdfs.server.namenode.NameNode.main(NameNode.java:1277)
Caused by: java.net.BindException: Cannot assign requested address
    at sun.nio.ch.Net.bind(Native Method)
    at sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:126)
    at sun.nio.ch.ServerSocketAdaptor.bind(ServerSocketAdaptor.java:59)
    at org.apache.hadoop.ipc.Server.bind(Server.java:225)
    ... 8 more

2012-05-19 08:46:07,516 INFO org.apache.hadoop.hdfs.server.namenode.NameNode: SHUTDOWN_MSG: 
```

我检查了端口并一次又一次地修改了所有 conf 文件，但没有找到解决方案。如果有人有想法，请指导我
-Thnaks 很多

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T16:08:32.837

根据您的评论，您很可能与主机文件有关。

首先，您应该取消注释 127.0.0.1 localhost 条目，这是一个基本条目。

其次，您是否设置了 hadoop 和 hbase 以使用外部可访问服务运行 - 我对 hbase 不太了解，但对于 hadoop，服务需要绑定到非本地主机地址以进行外部访问，因此您的 master 和 slave 文件在 $HADOOP_HOME/conf 中需要命名实际的机器名称（或 IP 地址，如果您没有 DNS 服务器）。您的任何配置文件都不应提及 localhost，而应使用主机名或 IP 地址。

# sql - 加入两个选择查询会导致每个值在一行中？

> ID：10663843
> 
> 赞同：-2
> 
> 时间：2012-05-19T09:06:28.410
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005

我有一个名为的表`CharUser`有以下数据

```
UserID UserName UserPhone UserAddress 
```

还有一张桌子叫`subscriptionjob`

```
subID userId   companyid 
```

另一个名为 user 的表`UsersCvs`有以下数据

```
CVId   Companyuserid   cvpath 
```

我想做一个查询，每行的结果如下

```
userid   username   userphone  useraddress usercv 
```

用户 ID 是从`subcriptionjob`表中给出的，我尝试了以下第一个查询

```
SELECT        CharUserId, CharUserName, CharUserPassword, CharUserMail, CharUserPhone, CharUserAddress, CharUserGender, ProgId, CharUserBirthdate
FROM            CharUser
WHERE        (CharUserId IN
                             (SELECT        CompanyUserId
                                FROM            SubsciptionJob
                                WHERE        (JobId = 1))) 
```

这是第二个查询

```
SELECT        TOP (1) CvPath
FROM            UsersCvs
WHERE        (CompanyUserId IN
                             (SELECT        CompanyUserId
                                FROM            SubsciptionJob AS SubsciptionJob_1
                                WHERE        (JobId = 1)))
ORDER BY CvId DESC 
```

两者都可以单独工作，我尝试将它们结合起来，但它不起作用

我想将 cvpath 列附加到第一个查询，每行都有一个唯一值

有任何想法吗.. ？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T09:58:02.557

这比上面的答案更有效：

```
SELECT CharUserId, 
       CharUserName, 
       CharUserPassword, 
       CharUserMail, 
       CharUserPhone, 
       CharUserAddress, 
       CharUserGender, 
       ProgId, 
       CharUserBirthdate,
       (SELECT TOP (1) CvPath FROM UsersCvs c where c.CompanyUserID=X.CharUserID
       FROM CharUser X
       WHERE (CharUserId IN 
                           (SELECT CompanyUserId FROM SubsciptionJob 
                            WHERE (JobId = 1))) 
```

通过在订阅表和 CharUser 表之间使用内部连接可能会更有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T23:19:57.213

利用`ROW_NUMBER()`

```
SELECT CharUserId, CharUserName, CharUserPassword, CharUserMail, 
    CharUserPhone, CharUserAddress, 
    CharUserGender, ProgId, CharUserBirthdate,cvpath
FROM CharUser CU
JOIN subscriptionjob SJ ON SJ.UserId = CU.UserID
INNER JOIN 
(   SELECT cvpath,Companyuserid,
    ROW_NUMBER() OVER (PARTITION BY A.Companyuserid ORDER BY A.CVID DESC) X
    FROM UsersCvs A
)R ON R.X = 1 AND CU.UserID = R.Companyuserid
WHERE JobId = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T09:40:01.013

一种方法：

```
SELECT CharUserId
     , CharUserName
     , CharUserPassword
     , CharUserMail
     , CharUserPhone
     , CharUserAddress
     , CharUserGender
     , ProgId
     , CharUserBirthdate
     , (SELECT TOP (1) CvPath
       FROM UsersCvs
       WHERE CompanyUserId IN (SELECT CompanyUserId
                               FROM SubsciptionJob
                               WHERE JobId = 1)
       ORDER BY CvId DESC) AS CvPath    
FROM CharUser
WHERE CharUserId IN (SELECT CompanyUserId
                     FROM  SubsciptionJob
                     WHERE JobId = 1) 
```

# asp.net - 在linq中用字母ی替换字母ي？

> ID：10663844
> 
> 赞同：0
> 
> 时间：2012-05-19T09:06:34.710
> 
> 标签：asp.net, linq, linq-to-entities, linq-to-objects

我想将 بازي 替换为 بازی

```
var List = (from darkhast in Tbl_Darkhast.Where(d => d.Address.Replace("ی","ي").StartsWith( Address.Replace("ی","ي")  ) )
                select new
                {
                  ....
                } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T09:21:00.900

我想，你应该写在选择查询中

```
 var List = (from darkhast in Tbl_Darkhast) )
                select new Tbl_Darkhast
                          {
                             Address= darkhast.Address.Replace("ی","ي")
                             ,Name = darkhast.Name
                          }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T07:09:01.743

距离和字符位移：

```
var List = (from darkhast in Tbl_Darkhast.Where(d => d.Address.Replace(" ", "").Replace("ي", "ی").Replace("ك", "ک").StartsWith(Address.Replace(" ", "").Replace("ي", "ی").Replace("ك", "ک")))
select new
{
    ....strong text
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T07:14:54.260

结果是=>

var List = (来自 Tbl_Darkhast.Where(d => d.Name_Moteghazi.Replace(" ", "").Replace("ي", "ی").Replace("ك", "ک").StartsWith (NameMoteghazi.Replace(" ", "").Replace("ي", "ی").Replace("ك", "ک")))

```
 select new
                {
                    Shomare_Darkhast = darkhast.Shomare_Darkhast,
                    Tarikhe_Darkhast = darkhast.Tarikhe_Darkhast,
                    Sharhe_NoeDarkhast = darkhast.TBL_NoeDarkhast.Sharhe_NoeDarkhast,
                    Mantaghe = darkhast.Mantaghe,
                    Hoze = darkhast.Hoze,
                    Block = darkhast.Block,
                    Melk = darkhast.Melk,

                });
    return (ObjectQuery)List; 
```

# windows-phone-7 - XNA 库未注册。无法编译或调试项目

> ID：10663845
> 
> 赞同：4
> 
> 时间：2012-05-19T09:06:36.537
> 
> 标签：windows-phone-7, xna, assemblies

我只使用 Windows Phone 解决方案就面临这个问题。我的电脑游戏旧解决方案，工作正常。谁能帮助我这是什么问题？

到目前为止，我已经尝试重新安装 windows phone 工具。源代码是从 MSDN 的官方 XNA 教程页面下载的。我也检查了 GAC，PC 版本的库已经在那里。但是，XBox 和 Phone 版本的库根本不存在（如 XNA.Framework.Avatar、XNA.Framework.Touch）。考虑到我使用 MS 的默认电话工具安装程序，我无法弄清楚为什么会发生这种情况。所有 dll 都存在于 ProgramFiles/XNA/v4.0 文件夹中，但不知何故，它们没有注册到 GAC。

好的，重新安装了 XNA 4.0 和手机工具，同样的问题。它只是根本不注册程序集。该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:19:45.227

我以前遇到过这个问题。尝试安装“Windows 游戏”组件

[http://www.microsoft.com/en-us/download/details.aspx?id=5549](http://www.microsoft.com/en-us/download/details.aspx?id=5549)

然后再次安装 XNA。它对我有用。

# excel - Excel 高级过滤器过滤列表上的唯一值 - 多个条件

> ID：10663846
> 
> 赞同：0
> 
> 时间：2012-05-19T09:06:46.100
> 
> 标签：excel, vba

我正在尝试在已过滤列表上使用 VBA 中 Excel 唯一值中的高级过滤器，但我看到的结果与预期不符。我遇到的问题是唯一值的高级过滤器正在运行已过滤的行列表，并且当高级过滤器运行时，它会添加已过滤掉的值。为了描述这个问题，我已经过滤掉了非空日期，以及另一个包含“-”的列。但是，当我在列上应用唯一值过滤器时，它会添加空日期和其他列中的其他值。

是否可以对已过滤列表上的唯一值应用高级过滤器，以便它不会添加不应该存在的行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T21:14:01.387

你可能不再需要这个，但这里有。如果您尝试从过滤的工作表中复制唯一值，请首先为相关工作表的已用范围中的可见单元格设置一个范围。例如 SET myrange = thisworksheet.usedrange.SpecialCells(xlCellTypeVisible)。然后对这个范围做你独特的过滤器。没有足够的信息（你对结果做了什么）来提供更多帮助。这是基于具有您已使用高级过滤器的列表的工作表。如果您使用的是标准过滤器，这将不起作用。

# php - Facebook php：如何跳过警告

> ID：10663849
> 
> 赞同：-1
> 
> 时间：2012-05-19T09:07:06.570
> 
> 标签：php, facebook, facebook-graph-api, fatal-error

我写了一个 facebook php 程序来张贴在 10 个朋友墙上。
但是如果有些朋友不允许其他人在他们的墙上发帖，我会收到以下错误

```
Fatal error: Uncaught OAuthException: (#210) User not visible thrown in 
```

所以代码停在中间。如果发生某种错误，我需要忽略警告并继续循环。感谢任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T09:08:43.400

您需要使用 try .. catch 块并处理`OAuthException`

[http://php.net/manual/en/language.exceptions.php](http://php.net/manual/en/language.exceptions.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T09:55:02.627

您还可以使用 FQL 来检查当前用户是否*可以*预先在他们朋友的墙上发帖——比如

```
SELECT uid, username, can_post FROM user WHERE uid IN
  (SELECT uid2 FROM friend WHERE uid1 = me()) 
```

如果您只想选择那些允许用户首先发帖的朋友，您可以添加`AND can_post`到 WHERE 子句。

# r - 使用 R 进行重尾参数估计

> ID：10663852
> 
> 赞同：1
> 
> 时间：2012-05-19T09:07:32.870
> 
> 标签：r

我需要估计类帕累托分布尾部的 alpha 参数。我想用 R 来做。经过一番谷歌搜索后，我找到了这个[参考](http://www.stat.ucl.ac.be/ISdidactique/Rhelp/library/aws/html/awstindex.html)。我尝试直接安装带有函数的 asw 库`install.packages('aws')`。R回答了我

```
In getDependencies(pkgs, dependencies, available, lib) :
package ‘aws’ is not available 
```

所以我尝试了sos库

```
findFn('awstindex')
found 0 matches
x has zero rows;  nothing to display.
Warning message:
In findFn("awstindex") : HIT not found in HTML;  processing one page only. 
```

为什么 R 找不到这个库？是否有不同的函数可以用 R 测量尾部参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T20:41:51.703

您对其他实现持开放态度吗？这是 fitdistrplus 包文档中提到的函数的使用，该函数在估计 Pareto 参数中具有特殊用途。

```
require(fitdistrplus)
require(actuar)  # to get a random Pareto function
rpar1000 <- rpareto(1000, 2.5, 3)
mgedist(rpar1000,"pareto",gof="ADR", start=list(shape=1, scale=1))
#------ the ADR measure weights the right tail observations ----------
$estimate
   shape    scale 
2.356235 2.871350 

$convergence
[1] 0

$value
[1] 0.2150991

$hessian
          shape     scale
shape  90.15040 -55.60725
scale -55.60725  35.04152

$gof
[1] "ADR"

$optim.function
[1] "optim"

$loglik
[1] -1612.233 
```

# java - 文本分类的质心算法，工具？

> ID：10663854
> 
> 赞同：1
> 
> 时间：2012-05-19T09:07:46.787
> 
> 标签：java, algorithm, machine-learning, document-classification, centroid

[正如这里](http://classes.seattleu.edu/computer_science/csse470/Madani/ABCs.html#centroid)所讨论的，你知道有什么工具可以为 java 中的文本分类提供质心算法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T10:16:21.077

[scikit-learn 将](http://scikit-learn.org/)其包含在 class[`NearestCentroid`](http://scikit-learn.org/stable/modules/neighbors.html#nearest-centroid-classifier)中。它还包括 L2 标准化 tf-idf 的实现。

[免责声明：我是 scikit-learn 开发人员。]

# wpf - WPF：验证三个文本框，两个必需，最小长度

> ID：10663856
> 
> 赞同：1
> 
> 时间：2012-05-19T09:08:05.523
> 
> 标签：wpf, validation

我有一个 MVVM 应用程序，用户可以在其中注册一个人。要注册一个人，用户必须在提供的三个文本框中提供至少 2 个有效的电话号码。

“有效”电话号码至少包含 10 个号码。

我已经实现了 IDataErrorInfo，并且每当绑定的属性发生更改时，我的文本框都会进行验证。

我的问题与如何实际验证内容有关？

这构成了有效的输入：

```
Textbox 1 : 0123456789
Textbox 2 : 0123456789
Textbox 3 : {null} 
```

原样

```
Textbox 1 : 0123456789
Textbox 2 : 0123456789
Textbox 3 : 0123456789 
```

但是，这些无效：

```
Textbox 1 : 0123456789
Textbox 2 : 012345678
Textbox 3 : {null} 
```

和

```
Textbox 1 : 0123456789
Textbox 2 : {null}
Textbox 3 : {null} 
```

所以这实际上更像是一个编码问题而不是验证问题。

我到目前为止：

```
private string ValidateTelephoneNumbers()
{
    var hasNumber1 = BoundProperty1 != string.Empty;
    var hasNumber2 = BoundProperty2 != string.Empty;
    var hasNumber3 = BoundProperty3 != string.Empty;

    if (hasNumber1 && (hasNumber2 || hasNumber3) || (hasNumber2 && hasNumber3))
    {
        return null;
    }
    else
    {
        return "Specify at least 2 valid telephone numbers."
    }
} 
```

它涵盖了要求的“指定至少两个”部分......但是有没有一种更优雅的方法来检查每个提供的数字的长度，而不是检查每个数字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T00:54:13.380

我会这样做：

```
private string ValidateTelephoneNumbers()
{
    int number = 0;
    int validNumbers = 0;

    if (int.TryParse(BoundProperty1, out number) && number > 999999999)
        validNumbers++;
    if (int.TryParse(BoundProperty2, out number) && number > 999999999)
        validNumbers++;
    if (int.TryParse(BoundProperty3, out number) && number > 999999999)
        validNumbers++;

    if (validNumbers > 1)
    {
        return null;
    }
    else
    {
        return "Specify at least 2 valid telephone numbers.";
    }
} 
```

# android - Android TelephonyManager 和 PhoneStateListener

> ID：10663860
> 
> 赞同：0
> 
> 时间：2012-05-19T09:08:45.257
> 
> 标签：android, android-intent, phone-state-listener

当接到电话并处于振铃模式时，我想在顶部弹出一个新视图..但我无法做到这一点。我正在发布我的代码，但也要考虑评论中的代码。

```
package com.android.CallIntent;

import android.content.Context;
import android.content.Intent;
import android.telephony.PhoneStateListener;
import android.telephony.TelephonyManager;
import android.util.Log;

public class Listener extends PhoneStateListener {
    Context Context;
    public Listener(Context context)
    {
        this.Context = context;
    }

    @Override
    public void onCallStateChanged(int state, String incomingNumber) {
        // TODO Auto-generated method stub
        super.onCallStateChanged(state, incomingNumber);

        switch(state)
        {
            case TelephonyManager.CALL_STATE_OFFHOOK:

                break;
            case TelephonyManager.CALL_STATE_RINGING:

                Log.d("message","Ringing");
                Intent intent = new Intent(Context, CallOptions.class);
                // I want to start my new Activity From here please Help me.

                //I am unable to access StartActivity
                break;

        }
    }

}

// My BroadcastReceiver class is here
public class Receiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        // TODO Auto-generated method stub
        TelephonyManager manager = (TelephonyManager)context.getSystemService(Context.TELEPHONY_SERVICE);
        Listener phoneStateListener= new Listener();
        manager.listen(phoneStateListener, Listener.LISTEN_CALL_STATE);

    } 
```

请有人帮助我，请请。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T10:47:05.113

看这里......它必须帮助你......

```
 case TelephonyManager.CALL_STATE_RINGING:
            Toast.makeText( context, "incoming call", Toast.LENGTH_LONG).show();
            IntentService = new Intent(context, PlayService.class).setAction("incoming_call");
            IntentService.putExtra("phone_number",intent.getStringExtra(TelephonyManager.EXTRA_INCOMING_NUMBER) );
            if (SmsReceiver.bool)
            context.startService(IntentService);
            break; 
```

# cocoa-touch - NSFetchedResultsController 手动添加对象

> ID：10663866
> 
> 赞同：0
> 
> 时间：2012-05-19T09:09:26.317
> 
> 标签：cocoa-touch, ios5, nsfetchrequest

我最近偶然发现了一个难题..

我通常使用 a`NSFetchedResultsController`从我的 CoreData 中获取数据，并将其显示在 TableViewController 中。

我现在遇到的问题是我无法立即使用 NSFetchRequest 获得我想要的结果，因为有 am:n 关系并且我在核心数据（参考）中实现了一个表，它存储了对对象的引用......

所以我现在要做的是，我使用一个 fetch 请求：

```
NSArray* references = [self.context executeFetchRequest:fetchRequest error:&error]; 
```

然后遍历这个数组来获取我的对象：

```
for(References* ref in references)
{
    Post* tmp = ref.ref_of_post;
} 
```

那么有没有办法手动将这些对象添加到 my`NSFetchedResultsController`中，或者是否有可能通过 a 获得想要的对象`NSFetchRequest`？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T14:28:26.977

不要管那个。

我只是将这些对象添加到 a 中，然后以与..`NSMutableArray`相同的方式使用此 Array`NSFetchedResultsController`

# c - C 中的 CGI 编程

> ID：10663868
> 
> 赞同：0
> 
> 时间：2012-05-19T09:09:45.843
> 
> 标签：c, cgi, forms

我有一个关于 C 语言 CGI 编程的一般性问题。

我使用嵌入式 Web 服务器来处理 Web 界面。为此，我在服务器中存储了一个 HTML 文件。在这个 HTML 文件中有 JavaScript 和 CSS 代码。到目前为止，一切都很好。

当用户按下“提交”按钮时，我会在我的 CGI 程序中收到表单数据。但我不明白如何将相同的数据返回给用户的表单。我是否需要读取 HTML 文件、将其复制到缓冲区、解析数据、用用户数据填写表单并将缓冲区（不是 HTML 文件）发送回浏览器（例如使用`puts`函数）？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T09:22:42.660

您需要准确发送您希望客户端浏览器显示的内容。

这意味着一个完整的 HTML 页面，其中包含您想要的所有数据。您描述它的方式会起作用，但正确解析 HTML 并非易事。

您应该使用某种形式的模板系统进行调查，例如[libctemplate](http://libctemplate.sourceforge.net/doc.html)（我没有这方面的经验，但您可以通过搜索找到其他模板系统）。

或者使用 AJAX 进行 POST 并仅返回 XML 或 JSON，让前端 JavaScript 处理更新页面。

# php - 如何轻松存储用户帐户详细信息？

> ID：10663870
> 
> 赞同：1
> 
> 时间：2012-05-19T09:10:23.643
> 
> 标签：php, mysql, sql

我发布这个是因为我不确定进一步调查的确切技术和方法。

我想建立一个简单的网站：

1) 用户使用用户名和密码登录。

2）用户保存简单的页面，其中包含从他们填写的表格中获取的输入。

3）用户注销，但所有数据都保存在服务器上。

4) 用户再次登录，可以看到存储在其帐户中的所有内容。

这一定很简单，但没有太多的开发知识，我有点不知道下一步该去哪里。

我知道以下一点 - HTML/CSS/Javascript/PHP/MySQL

因此，我在考虑这种方法：

1) 基于 php/mysql 脚本的用户帐户。

2) 用户通过 html/php 表单输入简单页面。为效果添加了 javascript。

3) mysql 数据库中记录的所有表单输入。

在 mysql 数据库上 - 这应该如何构建？

1) 用户账户表：用户名 | 电子邮件 | 上次登录

2) 简单表格：用户名 | Form_Field1 | Form_Field2 | 形式....

是否有更好的方法来存储个人用户信息 - 全部在一个表中或每个用户的个人表中？

由于编码不是我的强项，是否有我可以利用的预打包脚本等。我正在考虑将可用的后端与 Twitter Boostrap 前端相结合。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T09:19:04.550

是的，有一种更有效的方式来存储这些数据；

您的*用户*必须具有以下列：

*   **id** - 选中 AUTO_INCREMENT 选项的整数，PRIMARY_KEY -***用户的唯一 ID***
*   **用户名**
*   **电子邮件**
*   **密码**
*   **上次登录**

您的*表单*表的结构应如下所示：

*   **id** - 一个带有 AUTO_INCREMENT 选项的整数，PRIMARY_KEY - 记录的唯一 id
*   **user_id** - 填写/发布表单的用户 ID
*   **字段1**
*   **字段2**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T09:22:36.480

你的方法很好；我唯一要说的是，不要考虑将每个用户的信息存储在单独的表中的方向。您在问题中概述的结构很好，即：有一个用户表，其中包含用户名、密码、last_login 等，另一个表用于其他“字段”，正如您所说的那样。当您从另一个表中获取数据时，请确保您包含用户名作为连接两个表的*键*。确保在两个表中都将*用户名*声明为唯一键。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T09:40:47.627

为每个用户创建 1 个表将使您的数据库如此复杂..

您可以像这样创建 3 个表::--

1) table_user 字段：-- id, name, account_details_id[外键]

2) table_account_details:-- id, username, password, email, last_login

3) table_form:-- id, form_field, user_id[外键]

# asp.net-mvc - 注销asp.net mvc后的User.Identity.IsAuthenticated true

> ID：10663873
> 
> 赞同：4
> 
> 时间：2012-05-19T09:10:32.397
> 
> 标签：asp.net-mvc

我有一个函数，它有一个循环，在每个循环结束时休眠 6 秒

`Thread.Sleep(TimeSpan.FromSeconds(6));` 这循环 10 次，即函数运行 60 秒，每次暂停 6 秒。

我在循环开始时进行了身份验证测试

```
 if (!HttpContext.Current.User.Identity.IsAuthenticated)
                {
                    return null;
                } 
```

所以每次它首先进行身份验证然后运行并等待 6 秒。

这是我的功能：

```
while (counter < 10)

            {
                if (!HttpContext.Current.User.Identity.IsAuthenticated)
                {
                    return null;
                }

                // doing stuff

                Thread.Sleep(TimeSpan.FromSeconds(6));
                counter++;
            } 
```

现在用户同时注销（比如在第 15 秒）。我使用 ajax 注销，因此不想重定向我的页面。即使在注销后 IsAuthenticated 对于所有 10 个循环始终为 true，并且仅在重新执行此函数时才为 false

对于注销我使用：

```
FormsAuthentication.SignOut();
Session.Abandon();
Response.Cookies.Remove(FormsAuthentication.FormsCookieName);
Response.Cache.SetExpires(DateTime.Now.AddSeconds(-1));
HttpCookie cookie = HttpContext.Request.Cookies[FormsAuthentication.FormsCookieName];
                if (cookie != null)
                {
                    cookie.Expires = DateTime.Now.AddDays(-1);
                    Response.Cookies.Add(cookie);
                } 
```

但它仍然是真的.. **我想在用户注销后立即停止执行我的线程**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T09:26:17.323

发生这种情况是因为`IsAuthenticated`有一个内部缓存，因为一次又一次地进行此身份验证的时间太长。因此，在您的循环内并且不离开页面，`IsAuthenticated`is 不会改变。

另一方面，这是什么意思？在一个循环中，用户可以看到前 4 个想法，然后看不到其余的，因为不再经过身份验证？没有意义。

如果您想检查用户是否已经离开并离开页面，您可以做的是检查其他一些参数。

这是显示此内部缓存的代码。

```
public virtual bool IsAuthenticated
{
    get
    {
        if (this.m_isAuthenticated == -1)
        {
            WindowsPrincipal principal = new WindowsPrincipal(this);
            SecurityIdentifier sid = new SecurityIdentifier(IdentifierAuthority.NTAuthority, new int[] { 11 });
            this.m_isAuthenticated = principal.IsInRole(sid) ? 1 : 0;
        }
        return (this.m_isAuthenticated == 1);
    }
} 
```

# javascript - javascript - 如何理解两个不同的跨度是否在同一行？

> ID：10663876
> 
> 赞同：4
> 
> 时间：2012-05-19T09:11:06.370
> 
> 标签：javascript

我有一个带有 CSS`wrap`属性的 div 样式。它有一个固定的宽度，当内容超过允许的最大值时，它会分成不同的行。我正在构建一个应用程序，我需要了解不同的跨度元素是否在同一行中。让我举个例子：

```
<div style="width: 300px;" class="wrap">
    <span style="font-size:15px;color:red;">Lorem ipsum dolor sit amet, consectetur adipiscing elit</span>
    <span style="font-size:17px;color:green;"> Vivamus in mauris dui, non posuere</span>
</div> 
```

一个活生生的例子：[jsFiddle](http://jsfiddle.net/H3LW9/1/)

我需要了解3个案例：

*   当跨度从同一行开始但在不同的行结束时。
*   当跨度从不同的行开始但在同一行结束时。
*   当跨度在同一行开始和结束时。

**到目前为止我所做的：**

*   如果跨度具有相同的字体大小，则很容易使用该`offsetTop`属性进行估计。我试过了，它工作正常。
*   然而，当跨度有不同的字体大小时，它们也会有不同`offsetTop`的。当 font-size 较小时，则`offsetTop`增加，反之亦然，因此很难使用该属性进行估计。
*   最后，均衡字体大小也不会起作用，因为当您更改字体大小时，可能必须将适合一行的跨度分成两行（例如，当字体大小从 13px 增加到 25px 时）。

所以，简而言之，你会如何使用纯 javascript 来理解它？这是一个可以玩的[jsFiddle 。](http://jsfiddle.net/H3LW9/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T15:51:07.247

尝试这个：

```
<div class="wrap">
    <span id='first'>Lorem elit</span><span id='second'> Vivamus amet, consectetur</span>
</div> ​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​

<script>
    /* Check if span is broken into two lines or not */
    var firstBefore = document.createElement('span'),
        firstAfter = document.createElement('span'),
        secondBefore = document.createElement('span'),
        secondAfter = document.createElement('span');

    first.insertBefore(firstBefore, first.childNodes[0]);
    first.appendChild(firstAfter);
    second.insertBefore(secondBefore, second.childNodes[0]);
    second.appendChild(secondAfter);

    var firstBroken = (firstBefore.offsetTop === firstAfter.offsetTop) ? false : true,
        secondBroken = (secondBefore.offsetTop === secondAfter.offsetTop) ? false : true;

    /* Since the spans' baselines seem to be aligned by default, lets compared that instead */
    first.offsetBottom = (first.offsetTop + first.offsetHeight);
    second.offsetBottom = (second.offsetTop + second.offsetHeight);

    /* Main logic */
    if (first.offsetBottom === second.offsetBottom) {
        if (!firstBroken && !secondBroken) {
            alert('Begins and ends on the same line');
        } else if (firstBroken) {
            alert('Begins on different lines, but end on the same line');
        }
    } else {
        if (firstBroken) {
            alert('Begins and ends on different lines');
        } else {
            alert('Begins on the same line, but ends on different lines');   
        }
    }​​
</script> 
```

或者在这里玩：http: [//jsfiddle.net/RYEnY/1/](http://jsfiddle.net/RYEnY/1/)

确保使用不同长度的文本运行。

它的工作原理是首先在要检测`<span>`的每个目标的开头和结尾插入一个隐藏。`<span>`然后，代码通过比较隐藏的 span来检查目标`<span>`是否被分成两行。`offsetTop`然后，它获取每个目标跨度的基线偏移量，并从逻辑上推断跨度是否在同一行开始/结束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T16:16:57.933

你可以这样做（它使用查询）：

```
var span1 = $('#span1');
var span2 = $('#span2');
var offsetTop1 = getOffsetTop(span1);//you've to count offsetTop there
var offsetTop2 = getOffsetTop(span2);
var height1 = span1.height();
var height2 = span2.height();

if (Math.abs((offsetTop1 + height1) - (offsetTop2 + height2)) < 1) { //you can increase accuracy
    // two spans are in the same line
} 
```

# android - Android 数据库查询无法正常工作

> ID：10663883
> 
> 赞同：1
> 
> 时间：2012-05-19T09:12:17.207
> 
> 标签：android, database, sqlite

我创建了一个数据库，其中包含类似 [http://i170.photobucket.com/albums/u244/therealbbri06/database.jpg的信息](http://i170.photobucket.com/albums/u244/therealbbri06/database.jpg)

我正在尝试使用这个从数据库中获取 groupName

```
public String readNameFromPosition(int position) {
    Cursor c;
    c = myDataBase.query("hikingGroups", new String[] { "groupName" },
            "position=\'" + position + "\'", null, null, null, null);
    if (c.moveToFirst()) {
        return c.getString(0);
    } else {
        return "" + c.getCount();
    }
} 
```

当 position = 0 时，groupName 被正确检索，但只要 position 等于任何其他有效数字，c.getCount() 就会返回“0”。有什么帮助吗？如果需要，我可以发布更多代码，请问。readNameFromPosition() 也在我的 DataBaseHelper 类中。

更新：我的代码

```
package bry.Bicker.OjaiHiking;
import java.io.IOException;
import android.app.Activity;
import android.database.SQLException;
import android.graphics.Typeface;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.Gallery;
import android.widget.TextView;
import android.widget.Toast;

public class OjaiHikingActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    final DataBaseHelper theDb = new DataBaseHelper(getApplicationContext());
    try {

        theDb.createDataBase();

    } catch (IOException ioe) {

        throw new Error("Unable to create database");

    }

    try {

        theDb.openDataBase();

    } catch (SQLException sqle) {

        throw sqle;

    }
    final Gallery hikesGallery = (Gallery) findViewById(R.id.gallery1);
    hikesGallery.setAdapter(new ImageAdapter(this));
    hikesGallery.setOnItemSelectedListener(new OnItemSelectedListener() {

        @Override
        public void onItemSelected(AdapterView<?> arg0, View arg1,
                int arg2, long arg3) {
            String groupName = "";
            int position = hikesGallery.getSelectedItemPosition();
            Toast.makeText(getApplicationContext(), "" + position,
                    Toast.LENGTH_SHORT).show();
            groupName = theDb.readNameFromPosition(position);
            TextView tV = (TextView) findViewById(R.id.groupName);
            Typeface font = Typeface.createFromAsset(getAssets(),
                    "arialbd.ttf");
            tV.setTypeface(font);
            tV.setText(groupName);
        }

        @Override
        public void onNothingSelected(AdapterView<?> arg0) {
        }

    });
    hikesGallery.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView parent, View v, int position,
                long id) {

        }
    });
}
} 
```

DataBaseHelper.java 的代码

```
package bry.Bicker.OjaiHiking;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteException;
import android.database.sqlite.SQLiteOpenHelper;

public class DataBaseHelper extends SQLiteOpenHelper {

// The Android's default system path of your application database.
private static String DB_PATH = "/data/data/bry.Bicker.OjaiHiking/databases/";

private static String DB_NAME = "Ojaiker.db";

private SQLiteDatabase myDataBase;

private final Context myContext;

public DataBaseHelper(Context context) {

    super(context, DB_NAME, null, 1);
    this.myContext = context;
}

public void createDataBase() throws IOException {

    boolean dbExist = checkDataBase();

    if (dbExist) {
        // do nothing - database already exist
    } else {

        this.getReadableDatabase();

        try {

            copyDataBase();

        } catch (IOException e) {

            throw new Error("Error copying database");

        }
    }

}

/**
 * Check if the database already exist to avoid re-copying the file each
 * time you open the application.
 * 
 * @return true if it exists, false if it doesn't
 */
private boolean checkDataBase() {

    SQLiteDatabase checkDB = null;

    try {
        String myPath = DB_PATH + DB_NAME;
        checkDB = SQLiteDatabase.openDatabase(myPath, null,
                SQLiteDatabase.OPEN_READONLY);

    } catch (SQLiteException e) {

        // database does't exist yet.

    }

    if (checkDB != null) {

        checkDB.close();

    }

    return checkDB != null ? true : false;
}

/**
 * Copies your database from your local assets-folder to the just created
 * empty database in the system folder, from where it can be accessed and
 * handled. This is done by transfering bytestream.
 * */
private void copyDataBase() throws IOException {

    // Open your local db as the input stream
    InputStream myInput = myContext.getAssets().open(DB_NAME);

    // Path to the just created empty db
    String outFileName = DB_PATH + DB_NAME;

    // Open the empty db as the output stream
    OutputStream myOutput = new FileOutputStream(outFileName);

    // transfer bytes from the inputfile to the outputfile
    byte[] buffer = new byte[1024];
    int length;
    while ((length = myInput.read(buffer)) > 0) {
        myOutput.write(buffer, 0, length);
    }

    // Close the streams
    myOutput.flush();
    myOutput.close();
    myInput.close();

}

public void openDataBase() throws SQLException {

    // Open the database
    String myPath = DB_PATH + DB_NAME;
    myDataBase = SQLiteDatabase.openDatabase(myPath, null,
            SQLiteDatabase.OPEN_READONLY);

}

@Override
public synchronized void close() {

    if (myDataBase != null)
        myDataBase.close();

    super.close();

}

public String readNameFromPosition(int position) {
    Cursor c;
    c = myDataBase.query("hikingGroups", new String[] { "groupName" },
            "position=\'" + position + "\'", null, null, null, null);
    if (c.moveToFirst()) {
        return c.getString(0);
    } else {
        return "" + c.getCount();
    }
}

@Override
public void onCreate(SQLiteDatabase db) {

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T10:31:19.753

您确定您没有使用应用程序外部的值（例如在 SQLite 管理器中）更新数据库，然后假设新值将在新运行时出现，然后运行应用程序？您的数据库将不会使用新值再次构建，因为它存在于设备/模拟器上。

尝试重新安装该应用程序，然后再次安装它（一个疯狂的猜测是您第一次启动数据库时只有一个值（对于 position `0`））。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T09:38:33.957

```
public String readNameFromPosition(int position) {
Cursor c;
public static final String KEY_ROWID="id";
public static final String KEY_POSITION="position";
public static final String KEY_GROPUNAME="groupName";
String[] col=new String[]{KEY_ROWID,KEY_POSITION,KEY_GROPUNAME};
Cursor c=ourDatabase.query("hikingGroups", col,KEY_POSITION+"="+position, null, null, null, null);

if (c!=null) {
     c.moveToFirst();

    return c.getString(c.getColumnIndex(KEY_GROPUNAME));
} else {
    return "" + c.getCount();
}

} 
```

试试这个方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-25T06:47:15.243

我认为数据库查询没有返回任何结果。c.moveToFirst() 必须返回 false，因此您不应该执行 c.getString(...)

更好的处理将是

```
if (c.moveToFirst()) {
    return c.getString(c.getColumnIndex(KEY_GROPUNAME));
} else {
    return "" + c.getCount();
} 
```

# ios - 安装应用程序 - 推送通知 alertview 回调

> ID：10663885
> 
> 赞同：0
> 
> 时间：2012-05-19T09:12:51.300
> 
> 标签：ios, keyboard, push-notification, uialertview, overlap

我正在开发一个使用推送通知的应用程序。

在方法 -

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
```

我打电话 -

```
[[UIApplication sharedApplication] registerForRemoteNotificationTypes:
   (UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeSound |UIRemoteNotificationTypeAlert)]; 
```

注册推送通知。一切正常。但它也安装了我想展示`alert view`一个`UITextField`比需要“成为FirstResponder”的东西。

问题是键盘与 enablePushNotofication alertview 的按钮重叠，用户无法关闭它。

![在此处输入图像描述](../Images/e2532592e4f726aca82fc28bee48dad5.png)

无论如何，当 enablePushNotofication 警报视图被解除时，是否有一个方法被调用？（所以我可以显示我的警报视图）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T10:00:23.213

每次启动应用程序时都应调用注册远程通知的代码。如果用户的令牌发生变化，您可以在服务器上更新它。

```
[[UIApplication sharedApplication] registerForRemoteNotificationTypes:
 (UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeSound |UIRemoteNotificationTypeAlert)]; 
```

考虑到这一点，由于每次应用程序启动时都会调用它，因此您将知道它是成功还是失败。将您的文本字段的代码放置在已注册通知后成为第一响应者。

```
- (void)application:(UIApplication *)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)deviceToken

- (void)application:(UIApplication *)application didFailToRegisterForRemoteNotificationsWithError:(NSError *)error 
```

# haskell - Vim 有什么好的 Haskell 缩进脚本吗？

> ID：10663888
> 
> 赞同：16
> 
> 时间：2012-05-19T09:13:54.257
> 
> 标签：haskell, vim, indentation

不幸的是，当谈到 Haddock 评论时，我发现的一个 Haskell 缩进脚本（由 motemen 提供）中断了：

```
-- |Docline 1, lorem ipsum<CR>
    -- Docline 2
^^^^ - an autoindent here, wtf 
```

有人会碰巧知道更好的选择吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-20T21:15:16.467

好的，经过更多的谷歌搜索，我找到了这个缩进脚本：

[https://github.com/kana/vim-filetype-haskell/blob/master/indent/haskell.vim](https://github.com/kana/vim-filetype-haskell/blob/master/indent/haskell.vim)

它似乎工作得几乎完美（忽略`if`.. `then`..`else`和`let`）。但老实说，它并没有破坏我的文档这一事实使它现在已经足够好了:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-19T15:30:53.087

我对[haskellmode-vim没有任何问题](http://projects.haskell.org/haskellmode-vim/)

编辑：FWIW，我最近发现[了这个 reddit 线程](http://www.reddit.com/r/haskell/comments/xxxyi/is_there_a_standard_haskell_development_setup_for/)。[vim2hs](https://github.com/dag/vim2hs)对我来说看起来不错，关于缩进也是如此。

# php - 如何防止对网站的这种自动攻击？

> ID：10663892
> 
> 赞同：2
> 
> 时间：2012-05-19T09:14:24.417
> 
> 标签：php, mysql

我注意到这个电子邮件地址`graceamsalu10@yahoo.com`破坏了我的网站并向网站上的每个成员发送了一条消息（不是电子邮件，它使用了该网站的消息应用程序）。它通过电子邮件注册并激活了它的会员资格。我在电子邮件上运行了谷歌搜索，第一页上的所有结果都显示其他网站，相同的电子邮件地址发送的消息与它发送给我网站上的成员的消息完全相同。

*   请问有人遇到过这种攻击吗？

*   以及我可以使用哪些方法来防止对我的网站进行进一步的类似攻击？谢谢你。

我的网站是用`PHP`和开发的`MYSQL`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-19T09:16:21.627

使用谷歌 catpcha。甚至人类有时也无法理解它；） [http://www.google.com/recaptcha](http://www.google.com/recaptcha)

现在通过短信确认注册也是一种很好的做法。一些服务免费提供这个！（他们在文字中添加了小广告）。完美运行。

完成此步骤后，您可以实施禁令系统。创建假帐户在您的网站上做坏事将变得更加困难。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T09:29:25.063

Captcha 是其中之一，但添加到 captcha 中的内容主要是让他们远离：为数据库中发送的每条消息注册该用户的 unix 时间，例如将 $timeBetweenMessages 的值设置为 60（秒），并且每个如果 $timeBetweenMessages 还没有过去，那么有人想要发送消息的时间，那么他们需要等待。通常所有的“黑客”都会寻找一种快速做事并离开的方法，没有理智的“黑客”会留在您的网站上每隔 $timeBetweenMessages 间隔发送消息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-19T09:24:43.737

你可以尝试一些东西...

一个。检查表单帖子上的推荐人，并拒绝来自其他网址的帖子（如果表单是从您的网站或远程脚本发布的）

湾。使用验证码图片（我真的不喜欢它）

C。限制每个帐户或每分钟的每日用户帖子

希望这对你有帮助

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-19T09:23:39.227

如果您想让普通用户免于 CAPTCHA 麻烦，您可以使用[Mollom](http://mollom.com/)或[Akismet](http://akismet.com/)等服务在发送垃圾邮件内容之前检查消息和帖子。两种服务都提供 PHP 库。

# events - C# - 一种调用异步方法的简单方法？

> ID：10663893
> 
> 赞同：0
> 
> 时间：2012-05-19T09:14:32.307
> 
> 标签：events, user-interface, asynchronous

我正在开发 ac# user-control @ work。该控件只是加载一些信息和数据并显示它。
现在我想为控件的用户提供一个选项来加载数据异步 .. smth 像这样：

```
Cntrl.LoadSmthAsync(..)
Cntrl.LoadSmthComplete   //EventHandler to give feedback if the Load was successfull. 
```

我决定使下载函数异步并通过 EventHandlers 提供返回值。
但是那个代码变得相当复杂......毕竟。

这里有一些代码来理解控件应该做什么：

```
 public byte[] LoadByPos(int pos)
    {
        string url = Pos2Url(pos);

        // update gui
        this.textBox1.Text = url;

        byte[] res = LoadByUrl(url);

        // update gui
        this.textBox2.Text = BytesToString(res);

        return res;
    }

    public byte[] LoadByUrl(string url)
    {
        return Download(url);
    }

    //primary problem: download function
    private byte[] Download(string url)
    {
        System.Threading.Thread.Sleep(1000 * 30);
        return StringToBytes(url);
    }

    //secondary problem: an other function
    private string Pos2Url(int pos)
    {
        System.Threading.Thread.Sleep(1000 * 5);
        return pos.ToString();
    }

    // LoadByPosAsync
    public delegate void LoadByPosDoneHandler(Object sender, byte[] e);
    public event LoadByPosDoneHandler LoadByPosDone;

    public void LoadByPosAsync(int pos)
    {
        string url = Pos2Url(pos);

        // update gui
        this.textBox1.Text = url;

        LoadByUrlDone += new LoadByUrlDoneHandler(LoadByPosAsync_LoadByUrlDone);
        LoadByUrlAsync(url);
    }
    public void  LoadByPosAsync_LoadByUrlDone(object sender, byte[] e)
    {
        // update gui
        this.textBox2.Text = BytesToString(e);

        LoadByUrlDone = null;
        LoadByPosDone(sender, e);
    }

    //LoadByUrlAsync

    public delegate void LoadByUrlDoneHandler(Object sender, byte[] e);
    public event LoadByUrlDoneHandler LoadByUrlDone;

    public void LoadByUrlAsync(string url)
    {
        DownloadDone += new DownloadDoneHandler(LoadByUrlAsync_DownloadDone);
        DownloadAsync(url);
    }
    private void LoadByUrlAsync_DownloadDone(object sender, byte[] e)
    {
        LoadByUrlDone(sender, e);
    }

    //DownloadAsync

    private delegate void DownloadDoneHandler(Object sender, byte[] e);
    private event DownloadDoneHandler DownloadDone;

    private void DownloadAsync(string url)
    {
        BackgroundWorker bw_DownloadAsync = new BackgroundWorker();
        bw_DownloadAsync.RunWorkerCompleted += new RunWorkerCompletedEventHandler(bw_DownloadAsync_RunWorkerCompleted);
        bw_DownloadAsync.DoWork += new DoWorkEventHandler(bw_DownloadAsync_DoWork);
        bw_DownloadAsync.RunWorkerAsync(url);
    }
    void bw_DownloadAsync_DoWork(object sender, DoWorkEventArgs e)
    {
        byte[] res = Download((string)e.Argument);
        e.Result = res;
    }
    void bw_DownloadAsync_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        DownloadDone(sender, (byte[])e.Result);
    } 
```

有没有更简单的方法来完成我打算做的事情？

提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T09:22:18.087

> 有没有更简单的方法来完成我打算做的事情？

有单独的*实现*方面，但如果您使用的是 .NET 4，我*强烈*建议您不要将此模型用于异步。与其使用事件处理程序，我鼓励您使用`Task<T>`. [`TaskCompletionSource`](http://msdn.microsoft.com/en-us/library/dd449174.aspx)如果您没有对它的任何固有支持，您可以使用它来创建任务，这意味着您的 API 在 C# 5 中*将更*容易使用，因为支持 async/await。此时，您的 UI 线程方法将如下所示：

```
public async Task<byte[]> LoadByPos(int pos)
{
    string url = await Pos2UrlAsync(pos);

    // update gui
    this.textBox1.Text = url;

    byte[] res = await LoadByUrlAsync(url);

    // update gui
    this.textBox2.Text = BytesToString(res);

    return res;
} 
```

异步将简单地自然地流过您的代码。

# html - 如何选择“选择”的一部分

> ID：10663894
> 
> 赞同：0
> 
> 时间：2012-05-19T09:14:36.660
> 
> 标签：html, select

我有两个多选列表

```
<html><head></head>
<body>

<select name="cars" multiple="multiple" size="7">
  <option value="">-</option>
  <option value="volvo">Volvo</option>
  <option value="saab">Saab</option>
  <option value="mercedes">Mercedes</option>
  <option value="audi">Audi</option>
</select>

<select name="drivers" multiple="multiple" size="7">
  <option value="1">Luiza</option>
  <option value="2">Sebastian</option>
  <option value="3">John</option>
  <option value="4">Arthur</option>
  <option value="5">Staszek</option>
  <option value="6">Patryk</option>
  <option value="7">Lucas</option>
  <option value="8">Madlen</option>
  <option value="9">Bartek</option>
  <option value="10">Inter</option>
</select>
</body></html> 
```

我必须根据“汽车”选择“司机”

例如，当我选择沃尔沃时，它会自动选择 Luiza、John 和 Staszek。如果我选择萨博，我一定选择了亚瑟、国米、卢卡斯、帕特里克

如果不可能，那么从“汽车”中选择“司机”后应该禁用，当我从“汽车”中选择“-”时，“司机”应该再次处于活动状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T09:37:54.620

有了 jQuery，你可以轻松做到：

```
 $(document).ready(function (){
        $('#select-cars').change(function(){
            var car = $('#select-cars').val();
            // Uncheck ALL driver
            $('#select-drivers option').each(function (index, value) {
                $(this).removeAttr('selected');
            });
            // Check each driver in funcition of the car
            if (car == 'volvo') {
                //check Luiza etc
                $('#select-drivers option[value=1]').attr('selected', 'true');
            } else if (car == 'saab') {

            }

        });
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T09:41:42.170

如果可能，请使用 ajax 执行此操作并从数据库中加载数据。或者用 jquery 试试这个

```
$(document).ready(function() {     
            $('#a2').attr("disabled", "disabled");
            $('#a1').change(function() {
                var str = "";
                $("#a1 option:selected").each(function () {
                    str += $(this).text() + " ";
                });
                if(str.trim()=="-")
                    $('#a2').removeAttr("disabled");
                else
                    $('#a2').attr("disabled", "disabled");
            });
 }); 
```

并为 case 提供 id 为“a1”，为“a2”提供驱动程序

# jquery - 强制更改选择列表

> ID：10663895
> 
> 赞同：0
> 
> 时间：2012-05-19T09:15:05.177
> 
> 标签：jquery

我想在选择列表中选择一个选项并将代码触发到更改功能中。

PHP请求代码：

```
$la_reservation = $dbh->prepare("SELECT *,
                                          Date_debut, Date_fin, 
                                          client.Nom_societe, Personne_de_contact_idPersonne_de_contact,
                                          IdAdresse, adresse.Rue, adresse.Numero, adresse.Boite, adresse.Code_postal, adresse.Localite, adresse.Pays, adresse.Email, Tel1, adresse.Client_IdClient

                                          FROM bail 
                                          LEFT JOIN reservation ON idBail = Ref_bail
                                          LEFT JOIN client ON bail.Ref_filiale = client.IdClient
                                          LEFT JOIN personne_de_contact ON Personne_de_contact_idPersonne_de_contact = idPersonne_de_contact
                                          LEFT JOIN adresse ON adresse.Client_IdClient = client.IdClient
                                          WHERE idBail = :num_reservation");
            $data = array(":num_reservation"=>$_GET['num_res']);
            //echo str_replace(array_keys($data), array_values($data), $la_reservation->queryString);
            $la_reservation->execute($data);
            $res = $la_reservation->fetch(); 
```

我使用 $res['IdClient'] 来指示我想在选择列表中选择哪个选项：

```
<script>$('#liste_clients').val("<?php echo $res['IdClient']?>");</script> 
```

生成的代码是：

```
<script>$('#liste_clients').val("14");</script> 
```

但是更改功能中的警报不起作用：

```
$("#liste_clients").change(function(){
alert("here");
 ....
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T09:28:22.987

尝试这个：

```
<script>
  $(document).ready(function(){
       $('#liste_clients option[value=14]').attr('selected', 'selected');
       $('#liste_clients').trigger('change');
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T09:19:58.897

使用 `.on()` 事件，因为数据是动态添加到页面中的。

```
$(document).on("change", "#liste_clients", function(event){
    alert("changed");
}); 
```

# jquery - 使用 SimpleModal jquery 的 osx 样式弹出窗口无法正常工作

> ID：10663902
> 
> 赞同：0
> 
> 时间：2012-05-19T09:16:31.920
> 
> 标签：jquery

我正在尝试使 simpleModal jquery 脚本工作，但无法弄清楚我做错了什么。也许那套新鲜的眼睛可以帮助我？我非常感激:)

测试站点在这里：登录链接应该会弹出隐藏的 div。

我正在使用的 Jquery 是这样的： [http](http://www.ericmmartin.com/projects/simplemodal-demos/) : //www.ericmmartin.com/projects/simplemodal-demos/（OSX 样式对话框）

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T10:37:23.317

这是 settings.js 引用了许多我没有包含在 html 中的插件。把它们放回去解决了这个问题。

# android - Android：System.out：“resolveUri failed on bad bitmap Uri:[B@4072aa78” 将图像流重新定位到 ListView 时提示

> ID：10663904
> 
> 赞同：1
> 
> 时间：2012-05-19T09:17:15.120
> 
> 标签：android, android-layout, bitmapimage

我已经参考了几篇关于 System. 提示消息的类似[文章。](https://stackoverflow.com/questions/477572/android-strange-out-of-memory-issue-while-loading-an-image-to-a-bitmap-object)

1.  图像字符串是字节数组类型的位图格式。使用 andorid 的 Base64 类工具将其编码为字符串格式。然后它以 Blob 格式保存到 mysql DB 中。

2.  在我的新应用程序上，我想将 Blob 图像重新加载到 ListView 并显示图像：我尝试了两种方法，但都未能将图像加载到 listview：

    一个。将重新加载的 Blob 图像（它是一个字符串文本类型）作为 HashMap 的键/值对的值。然后，初始化一个 Adaper（例如 SimpleAdapter）来加载键/值，然后尝试在 ListView 上显示它（失败）。

    湾。类似a，但先使用Base64解码方法将Blob图像解码回字节数组。并将其作为 Byte 数组类型作为 hashMap 的键/值对的值。（失败）

我已经研究了这个问题几天了，这个问题没有任何进展。如果我之前使用了错误的过程，请指导我更正它，谢谢！

顺便一提。存储的 Blob 图像字符串可以使用 imageview.setImageBitmap(bitmap) 方法重新加载并显示到 ImageView 没有问题。因此，存储的图像串数据是有效的位图数据。但是，此方法不能在 ListView 上使用。

# php - 1 个抽象方法，因此必须声明为抽象方法或实现其余方法

> ID：10663905
> 
> 赞同：0
> 
> 时间：2012-05-19T09:17:21.877
> 
> 标签：php, magento, shipping

我最近将我的 magento 商店从 1.5.1 升级到了 1.7.0 版本。大多数事情都在正常工作，但是当我通过管理区域进入运输方式选项时，我收到以下错误。

```
Fatal error: Class Zenprint_Ordership_Model_Shipping_Carrier_Ups contains 1 abstract method and must therefore be declared abstract or implement the remaining methods (Mage_Usa_Model_Shipping_Carrier_Abstract::_doShipmentRequest) in /home/dev/public_html/app/code/community/Zenprint/Ordership/Model/Shipping/Carrier/Ups.php on line 33 
```

在 Ups.php 的第 33 行，这是代码。

```
extends Mage_Usa_Model_Shipping_Carrier_Abstract 
```

我通过 Magento Connect 检查了所有模块，它们都已更新为稳定版本。升级时我错过了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T20:02:15.600

Magento 的 1.6.x 分支重构了`Mage_Usa_Model_Shipping_Carrier_Abstract`工作原理，包括添加一个所有子类都必须实现的抽象方法。

您的系统上有一个名为的模块`Zenprint_Ordership`，其中包括运输承运人类别。它可能是[这个扩展](http://www.magentocommerce.com/magento-connect/api-shipping-module.html)的一部分。

此扩展尚未更新为与 Magento 1.6+ 一起使用。要让您的商店再次运行，您应该通过重命名/删除文件来禁用此扩展

```
#rename so it doesn't have a xml extension to disable
app/etc/modules/Zenprint_Ordership.xml

app/etc/modules/Zenprint_Ordership.xml.disable 
```

这将删除您使用`Zenprint_Ordership`的任何自定义功能，但应该使您的系统恢复正常工作。

从长远来看，您要么需要

1.  重新编码`Zenprint_Ordership`模块以与您的系统一起使用，因为看起来开发人员自 Magento 1.2 以来还没有更新它。

2.  为您使用 Zenprint_Ordership 的任何功能寻找替代方案。

此外，即使在禁用扩展程序后，您在查看使用这种运输方式的旧订单时也可能会遇到问题。如果您对此感到满意`_doShipmentRequest`，在类上定义一个空白方法可能会帮助您解决这个问题，但我不确定我是否会将它推荐给非程序员。

高水平的解决方案？与任何复杂的 Web 应用程序一样，电子商务系统需要不断维护。如果您要托管自己的购物车，请确保在遇到此类情况时可以联系到具有专业知识的人来帮助您。

# sencha-touch - 如何在sencha touch2中制作可见列表

> ID：10663907
> 
> 赞同：0
> 
> 时间：2012-05-19T09:17:55.387
> 
> 标签：sencha-touch, sencha-touch-2

我是sencha touch2的新手。我想在页面中显示列表。绑定发生成功。但我看不到数据但能够滚动页面。请任何人都可以帮助我。我面临这个问题。谢谢你。

我的代码在这里：

```
Ext.define("Sencha.view.ProjectListView", {
    extend: 'Ext.form.Panel',    
    xtype: 'projectListepage',
    id: 'projectListepage',
    requires: [
        'Ext.data.JsonP'
    ],
    config: {
        scrollable: true,
        items: [{
            xtype: 'panel',
            id: 'JSONP'
        },
            {
                docked: 'top',
                xtype: 'toolbar',
                flex: 3,
                items: [{
                    text: 'Project Deatils',
                    handler: function () {
                        var list = Ext.getCmp('JSONP'),
                        tpl = new Ext.XTemplate([
                            '<tpl for=".">',
                                   '<img src="{MainImageUrl}"/><label>{ProjectName}</label><p class="temp_low">{ShortDescription}</p>', //                                                                    
                            '</tpl>',
                    ]);
                        Ext.data.JsonP.request({
                            url: 'http://localhost:53985/PropertyService.svc/GetAllProject',
                            callbackKey: 'callback',
                            params: {

                            },
                            callback: function (success, request) {
                                var project = request;
                                if (project) {
                                    list.updateHtml(tpl.applyTemplate(project));
                                }
                                else {
                                    alert('There was an error retrieving the weather.');
                                }
                            }
                        });
                    }
                }]
            }]
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T22:49:21.087

我在您的代码示例中没有看到您正在创建列表的任何地方。您需要扩展`'Ext.List'`或使用`xtype:'list'`. sencha touch 2 文档中有一些关于如何创建列表的简单示例。 [http://docs.sencha.com/touch/2-0/#!/api/Ext.dataview.List](http://docs.sencha.com/touch/2-0/#!/api/Ext.dataview.List)

# html - 单元格边框更改影响整个表格标记

> ID：10663911
> 
> 赞同：0
> 
> 时间：2012-05-19T09:18:30.953
> 
> 标签：html, css, border, cell, css-tables

我有下一种风格的桌子：

```
table {
    border-collapse:collapse;
}

td, th {
    height: 20px;
    width: 20px;
    border: 1px solid #000000;
    text-align:center;
}

th {
    border: 0;
} 
```

当我更改一个或几个单元格的边框宽度时，行和列的宽度以及整个表格的宽度以未定义的方式发生变化。它不是那么严重，我想阻止任何视觉变化，除了受影响的单元格的边界。更改这些单元格的宽度或高度无济于事。如何防止修改表格位置并仅更改所需单元格的边框宽度？

[JSFiddle](http://jsfiddle.net/Tm9k6/)

* * *

UPD 问题已修复。我只是在表格的右侧和底部添加了两行和两列，并在最后一行和最后一列中将边框设置为 2px。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-01T12:23:45.063

border-collapse:collapse 意味着你所有的单元格边框都被混合在一起，因此也采用相同的样式。

[看到这个链接](http://css-tricks.com/almanac/properties/b/border-collapse/)

> 崩溃 - 表格单元格之间的空间和边框都塌陷，因此单元格之间只有一个边框并且没有空间。

# mysql - 如何根据结果集中的值限制 MySQL 结果？

> ID：10663913
> 
> 赞同：0
> 
> 时间：2012-05-19T09:18:50.043
> 
> 标签：mysql, sql

我正在创建一个 PHP 脚本来维护用户信息、注册新用户和登录到安全页面。为此，我有一个 MySQL 表**用户**，它存储有关用户的所有信息。**用户**表有不同的字段，如用户 ID、用户名、用户组 ID、电子邮件哈希、国家等。

在我的脚本中，我想从每个 usergroup_id 中获取 10 个用户。
对此的 SQL 查询是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T11:29:10.543

我认为以下内容适用于为每个用户组随机获取 10 个用户：

```
select u.*
from user u
where u.userid in (select userid
                   from user
                   where u.usergroupid = user.usergroupid
                   limit 10
                  ) 
```

这是使用相关子查询将每个用户组的行数限制为 10。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T10:14:59.180

你可以使用`LIMIT`从句。

例子：

```
SELECT * FROM `your_table` LIMIT 5, 5 
```

这将显示记录 6、7、8、9 和 10。

> 限制用于将您的 MySQL 查询结果限制在指定范围内。您可以使用它来显示前 X 个结果，或显示 X - Y 结果的范围。它被表述为限制 X、Y，并包含在查询的末尾。X 是起点（记住第一条记录是 0），Y 是持续时间（要显示多少条记录）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T15:56:48.810

请试试这个，

```
SELECT c.* FROM customers c where c.id in (select c2.id from customers c2 where c.group_id=c2.group_id limit 0, 10) 
```

# php - 在 Symfony 2 中使用 Zend Search Lucene

> ID：10663915
> 
> 赞同：2
> 
> 时间：2012-05-19T09:19:01.837
> 
> 标签：php, symfony, zend-search-lucene

我的网络应用程序中有一个搜索表单，用户可以在其中按姓名、俱乐部名称搜索其他人……这是我用于搜索的代码，但它没有给我任何“点击”。

```
$search = $this->get('ewz_search.lucene');

$query = new MultiTerm();
$query->addTerm(new Term($form->getData()->getName()));
$query->addTerm(new Term($form->getData()->getClub()->getId()));

// See point 1 to see what this displays
var_dump($query);

// See point 2 to see what this displays
die("debug: " . $query);

// If I use this instead of the MultiTerm, I do get a hit
// $query = 'Mathew';

$hits = $search->find($query); 
```

第 1 点：对象(Zend\Search\Lucene\Search\Query\MultiTerm)#644 (9) { ["_terms":"Zend\Search\Lucene\Search\Query\MultiTerm":private]=> 数组(2) { [0]=> object(Zend\Search\Lucene\Index\Term)#638 (2) { ["field"]=> NULL ["text"]=> string(12) "Mathew" } [1] => object(Zend\Search\Lucene\Index\Term)#637 (2) { ["field"]=> NULL ["text"]=> int(1) } } ["_signs":"Zend\Search \Lucene\Search\Query\MultiTerm":private]=> array(2) { [0]=> NULL [1]=> NULL } ["_resVector":"Zend\Search\Lucene\Search\Query\MultiTerm" :private]=> NULL ["_termsFreqs":"Zend\Search\Lucene\Search\Query\MultiTerm":private]=> array(0) { } ["_coord":"Zend\Search\Lucene\Search\Query \MultiTerm":private]=>NULL ["_weights":"Zend\Search\Lucene\Search\Query\MultiTerm":private]=> array(0) { } ["_boost":"Zend\Search\Lucene\Search\Query\AbstractQuery":private ]=> int(1) ["_weight":protected]=> NULL ["_currentColorIndex":"Zend\Search\Lucene\Search\Query\AbstractQuery":private]=> int(0) }

第 2 点：调试：Mathew 1

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T09:26:33.220

检查默认术语运算符。如果您对 clubid 和 name 有单独的字段索引，则可以为字段名称添加前缀。

`$query = "name:Mathew AND clubid:1";`

有关详细信息，请参阅[解析器语法](http://lucene.apache.org/core/3_6_0/queryparsersyntax.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T18:09:30.487

找到了！我有这个：

```
$document->addField(Field::text('Name', $user->getName())); 
```

代替：

```
$document->addField(Field::text('name', $user->getName())); 
```

# grails - 拒绝用户创建/更新和其他 SQL 命令

> ID：10663917
> 
> 赞同：0
> 
> 时间：2012-05-19T09:19:12.727
> 
> 标签：grails, cloud-foundry

我正在使用 Grails 云铸造插件。应用程序启动后，我收到以下异常

```
2012-05-19 08:34:09,179 [main] ERROR hbm2ddl.SchemaUpdate  - Unsuccessful: create 
table article_content (id bigint not null auto_increment, version bigint not null, 
comments LONGTEXT, content LONGTEXT, date_created datetime not null, failure bit 
not null, tags varchar(255), title varchar(255), url varchar(500) not null, 
primary key (id)) ENGINE=InnoDB 

2012-05-19 08:34:09,181 [main] ERROR hbm2ddl.SchemaUpdate  - CREATE command denied 
to user 'uozOL0LSfBM3u'@'172.30.50.25' for table 'article_content' 
```

使用我连接到 db 的 dbConsole 和 CloudFoundry 属性，尝试执行 SQL 命令并获得相同的异常。

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T00:18:34.817

您是否尝试过`create table...`使用 vmc 隧道功能运行该命令？[http://docs.cloudfoundry.com/tools/vmc/caldecott.html](http://docs.cloudfoundry.com/tools/vmc/caldecott.html)

我能够在我的 Cloud Foundry 帐户上配置的 MySQL 服务上执行 SQL。如果这没有帮助，您能否链接到您的应用程序的 zip，以便我可以下载并尝试重现该问题？

# javascript - 页面应显示在某个 div 中，无需重新加载

> ID：10663919
> 
> 赞同：0
> 
> 时间：2012-05-19T09:19:20.720
> 
> 标签：javascript, ajax, jquery

我一直在尝试编写这样的脚本，当我单击链接时，然后在某些 div 中，链接页面的全部内容会被加载，我尝试了以下代码，但它不能正常工作，并且当我单击链接时总是闪烁。如果有任何问题，请告诉我，我该如何完成它：

现场示例：[http ://caremerge.us/ajax/waleed_rai_2/index_FAIZAN.html](http://caremerge.us/ajax/waleed_rai_2/index_FAIZAN.html)

```
<script>
    $("#aa").click(function(){
        // load by id on click

            $("#response").delay(10000).load("aa.html");
        });
</script>
    <div id="main-body">        
            <div class="span-19 last" id="response">
    </div>

            </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T09:20:45.877

假设`#aa`是一个`<a>`标签，您可以使用`return false`或`event.preventDefault()`阻止链接去任何地方。`event.preventDefault()`可以放在代码块的任何地方，而`return false`应该放在最后。

```
$("#aa").click(function(){

    //prevent the page from going anywhere
    event.preventDefault()

    // load by id on click
    $("#response").delay(10000).load("aa.html");

    //return false also does the same thing
    return false;
}); 
```

# java - 从 Java 中的同步上下文调用 Thread.sleep()

> ID：10663920
> 
> 赞同：15
> 
> 时间：2012-05-19T09:19:29.033
> 
> 标签：java, multithreading, synchronized, thread-sleep

我已经读过`Thread.sleep()`它将暂停当前正在运行的线程指定的时间，之后它会返回可运行状态等待轮到它运行。

`synchronized`此外，如果从上下文调用，`sleep()`不会释放它持有的锁。所以我想知道它什么时候会释放锁。如果线程进入睡眠状态，则永远没有机会运行，因此它将始终与自身保持锁定，然后其他线程如何进入同步方法/块。

我不确定我是否在问有效的问题。但请帮帮我。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-19T09:22:28.980

> 所以我想知道它什么时候会释放锁。

它将在退出`synchronized`块时释放锁，而不是更早。

> 如果线程进入睡眠状态，则永远没有机会运行，因此它将始终与自身保持锁定，然后其他线程如何进入同步方法/块。

很简单，其他线程将无法输入与休眠线程*在同一对象上同步的代码。*

总而言之，`Thread.sleep()`从`synchronized`块中调用可能不是一个好主意。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-05-19T09:24:01.737

如果你使用`Object.wait`而不是`Thread.sleep`，来自同步块的锁将被释放。

# jquery - 有没有办法让 jQuery 跨多个 DIV 扩展？

> ID：10663923
> 
> 赞同：0
> 
> 时间：2012-05-19T09:20:01.003
> 
> 标签：jquery, transitions

有没有办法让 jQuery 以下列方式工作？

我需要一个 3 x 3 的图像网格，一旦单击它们将打开一个覆盖网格的 div。因此，如果您单击左上角的图像，则 div 会从左到右和从上到下滑动。如果您单击中间图像，它将向各个方向滑出。

有谁知道使用 .this 来最小化代码的通用方法？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T09:36:03.997

绝对定位容器 div 中的所有 9 个图像，然后根据需要使用 jQuery 的 animate() 扩展它们。

jsFiddle 示例：http: [//jsfiddle.net/gGc5K/](http://jsfiddle.net/gGc5K/)

JavaScript 部分：

```
$("td").click(function() {
    $(this).css({
        "z-index": 1
    }).animate({
        top: 0,
        left: 0,
        width: "120px",
        height: "120px"
    }, "4s");
}); 
```

# ruby-on-rails - 如何使用 Ruby on Rails 生成 PDF 邮件合并？

> ID：10663926
> 
> 赞同：0
> 
> 时间：2012-05-19T09:20:32.917
> 
> 标签：ruby-on-rails, ruby-on-rails-3, pdf

我正在使用 Ruby on Rails 开发一个非常简单的邮件合并系统。我有 2 个模型（成员和字母）。

首先，我创建了一个带有一些特殊字段（如 {NAME}、{ADDRESS} 或 {CITY}）的 html 格式的字母。

然后，我必须生成一个 PDF，每个成员一封信。因此，如果我在数据库中有 100 个成员，则 PDF 必须有 100 个字母，每个字母都是自定义的（用数据库中的数据替换特殊字段）。

我知道如何在 html 中创建字母，但我不知道如何生成 PDF。你能帮我解决这个问题吗？我知道有一些宝石可以创建 PDF，但我不知道如何在不同页面上添加字母。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T10:26:23.360

我已经使用[Prawn](http://prawn.majesticseacreature.com/)生成 PDF，听起来它对你有用。有一篇关于在 Rails 中使用 Prawn的[wiki 文章。](https://github.com/prawnpdf/prawn/wiki/Using-Prawn-in-Rails-3)

该`go_to_page`方法将允许您在`add_pages`创建元素后将元素放置在特定页面上。

# javascript - 多个 div 创建，jquery/javascript，性能/最佳实践

> ID：10663927
> 
> 赞同：8
> 
> 时间：2012-05-19T09:20:45.423
> 
> 标签：javascript, jquery, html, performance, function

在以疯狂的速度创建多个 DIV 时，我试图找出有关性能的最佳实践。例如，在每个 .mousemove 事件中...

```
$('head').append("<style>.draw {width: 20px; height: 20px; position:fixed;</style>");

$(document).mousemove(function(mouseMOVE) {
//current mouse position
    var mouseXcurrent = mouseMOVE.pageX;
    var mouseYcurrent = mouseMOVE.pageY;

//function to create div
   function mouseTRAIL(mouseX, mouseY, COLOR) {
        $('body').append("<div class='draw' style='top:" + mouseY + "px; left:" + mouseX + "px; background: " + COLOR + ";'></div>");
    }

// function call to create <div> at current mouse positiion
   mouseTRAIL(mouseXcurrent, mouseYcurrent, '#00F');

// Remove <div>
    setTimeout(function() {
        $('.draw:first-child').remove();
    }, 250);
}); 
```

所以，这一切都很好而且很花哨，但它的效率非常低（特别是当我尝试填充每个鼠标移动位置之间的空间时）。这是一个例子......

```
$('head').append("<style>.draw {width: 20px; height: 20px; position:fixed;</style>");

$(document).mousemove(function(mouseMOVE) {
//current mouse position
    var mouseXcurrent = mouseMOVE.pageX;
    var mouseYcurrent = mouseMOVE.pageY;

// function to create div
    function mouseTRAIL(mouseX, mouseY, COLOR) {
        $('body').append("<div class='draw' style='top:" + mouseY + "px; left:" + mouseX + "px; background: " + COLOR + ";'></div>");
    }

// function call to create <div> at current mouse positiion
    mouseTRAIL(mouseXcurrent, mouseYcurrent, '#00F');

// variabls to calculate position between current and last mouse position
    var num = ($('.draw').length) - 3;
    var mouseXold = parseInt($('.draw:eq(' + num + ')').css('left'), 10);
    var mouseYold = parseInt($('.draw:eq(' + num + ')').css('top'), 10);
    var mouseXfill = (mouseXcurrent + mouseXold) / 2;
    var mouseYfill = (mouseYcurrent + mouseYold) / 2;

// if first and last mouse postion exist, function call to create a div between them
    if ($('.draw').length > 2) {
    mouseTRAIL(mouseXfill, mouseYfill, '#F80');
    }

// Remove <div>
    setTimeout(function() {
        $('.draw:first-child').remove();
        $('.draw:nth-child(2)').remove();
    }, 250);
}); 
```

我真的不知道如何改进。相信我，我已经尝试过研究，但效果不佳……我正在寻找一些建议、示例或指向更好实践的链接……

请注意，我正在自学编码。我是一名平面设计专业的学生，​​这就是我在课外度过暑假的方式......制作一些小项目来自学 JavasSript，有趣的东西 :)

* * *

我已经设置了一些 jsfiddles 来展示我在做什么......

[鼠标轨迹，更多元素](http://jsfiddle.net/terry/hYFHj/)- 非常非常慢
[鼠标轨迹，更少元素](http://jsfiddle.net/terry/XaVeb/)- 非常慢
[鼠标轨迹，Bare Bones](http://jsfiddle.net/terry/sJ9d4/) - 慢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T13:02:39.593

这里有多种不良做法：

*   使用元素而不是画布
*   通过 jQuery 使用这些元素
*   滥用 jQuery，就好像你故意让它变慢一样
*   将以上所有内容填充到 mousemove 处理程序中

这里的根本问题实际上是使用元素而不是画布。修复后，与 DOM 的交互应该变得最小，因此也修复了其他点。

此外，那些声称这工作正常的人并没有检查他们的 CPU 使用率。在我的 Core I5-2500K 上，一个内核立即被最大化，这对于像在屏幕上渲染鼠标轨迹这样的琐碎事情来说是荒谬和不可接受的。我可以很好地想象这在旧计算机上非常非常慢。所以是的，它很顺利，但代价是使用的资源量足以让 10-20 多个标签正确地执行相同的操作。

[当快速移动鼠标时，这](http://hakim.se/experiments/html5/trail/03/)需要 7-14% 的 cpu，[这](http://jsfiddle.net/terry/sJ9d4/)需要 25%。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T12:49:03.550

你应该小心不要导致回流，只坚持重绘。->[回流在 DOM 环境中何时发生？](https://stackoverflow.com/questions/510213/when-does-reflow-happen-in-a-dom-environment)

所以创建`<div>`s 是没有选择的。- 但你不需要:)

只需创建尽可能多`<div>`的 s，然后重新定位它们。如果将它们放在数组中，则只需要一个指向当前最大整数的整数，并且在每次鼠标移动时，您都会增加该值（一旦达到数组长度，将其设置为 0）并重新定位`<div>`指向的那个由那个数字。

# android - 我应该在我的应用程序中显式创建 SQLite 表吗？

> ID：10663932
> 
> 赞同：1
> 
> 时间：2012-05-19T09:21:07.460
> 
> 标签：android, sqlite

我是一个新手，正在创建一个简单的应用程序，它只从 SQLite 数据库中的表中读取数据并显示在 GUI 上。（只需选择操作）

在开发过程中，我使用“SQLite 数据库浏览器”工具创建了数据库和表。我通过该工具将所有数据插入到表中。

现在，我的疑问是..

1）在java代码中，我应该有一些创建数据库和表的方法吗？（目前，我有单独进行选择操作的方法）

2）我创建的数据库位于我的本地驱动器中。创建apk文件时，数据库是否也会包含在apk文件中？

请帮忙！提前致谢 ！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T09:26:40.730

> 1）在Java代码中，我应该有一些创建数据库和表的方法吗？（目前，我有单独进行选择操作的方法）

不，您只需将数据库文件从`/asset`一个目录复制到`/data/data/<package_name>/database`另一个目录。并且只能单独使用选择操作。您不需要使用创建数据库和表操作..

> 2）我创建的数据库位于我的本地驱动器中。创建 apk 文件时，数据库是否也会包含在 apk 文件中？

为此，正如我上面提到的，您必须首先将数据库文件放入应用程序的`/asset`目录，然后将其复制到内部存储（当您的应用程序启动时），然后它才能工作。

看看这个 SO question [How to ship an Android application with a database?](https://stackoverflow.com/questions/513084/how-to-ship-an-android-application-with-a-database) . 它回答了你所需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T09:44:56.610

试试下面的链接 [http://www.higherpass.com/Android/Tutorials/Accessing-Data-With-Android-Cursors/](http://www.higherpass.com/Android/Tutorials/Accessing-Data-With-Android-Cursors/)

# java - 从引用 localhost 的远程 WSDL 创建 CXF 客户端

> ID：10663933
> 
> 赞同：3
> 
> 时间：2012-05-19T09:21:15.930
> 
> 标签：java, cxf

我正在使用 CXF 生成用于连接到远程 Web 服务的客户端。我无法控制 web 服务或 wsdl 定义。

Web 服务的 wsdl 对 localhost 进行了多次引用，例如：

```
<soap12:address location="http://localhost:8002/request" />
<wsa10:EndPointReference>
    <wsa10:Address>http://localhost:8002/request</wsa10:Address>
</wsa10:EndPointReference> 
```

我正在尝试使用 wsdl2java maven 目标生成我的客户端，同时指向远程 wsdl：

```
...
<wsdlOptions>
<wsdlOption>
<wsdl>http://remotehost:8002/?wsdl</wsdl>
<wsdlOption>
<wsdlOptions>
... 
```

当我尝试构建客户端时，由于对 localhost 的引用，目标失败：

```
org.apache.cxf.wsd11.WSDLRuntimeException: Fail to create wsdl definition from :       http://remotehost:8002/?wsdl [ERROR] caused by : WSDLException (at  
/wsdldefinitions/wsdl:import) faultCode=PARSER_ERROR: Problem parsing  
'http://localhost:8002/?wsdl=wsdl0'.: java.net.ConnectionException: Connection refused: connect 
```

有什么方法可以让 CXF 了解 localhost 引用与 wsdl 主机相关，并在生成客户端时自动将它们替换为适当的主机名？

我设法通过将 wsdl 复制到本地文件并用适当的主机名手动替换本地主机引用来生成客户端。但是，我需要从远程 wsdl 定义而不是本地文件生成客户端。有谁知道可以实现的方法？我目前正在使用 cxf 版本 2.6.0

提前感谢您的任何答案。

（我已将我的实际服务名称替换为通用名称，例如远程主机）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T10:43:30.210

You want to make CXF understand that the localhost references are relevant to the wsdl host but this is not something that should be understood by any tool, since the WSDL can import other WSDL from any location, and this could be **in some cases** the correct reference. Simply it is not in your case, it is **configuration error** from the site you want to connect to.

I understand you're giving the URL to WSDL as an argument to the tool making proxy **dynamically**, so you can't just download it and change references.

The **workaround** I suggest is to write simple proxy, a servlet that would connect to remote URL (given as argument) and would return WSDL, changing localhost references to the correct ones. And you would give the URL of this servlet as argument to your proxy factory. It isn't nice, but the only nice solution is that the provider fixes its own WSDL.

# ruby-on-rails - 如何从值的平面散列中创建分组选择？

> ID：10663934
> 
> 赞同：0
> 
> 时间：2012-05-19T09:21:31.803
> 
> 标签：ruby-on-rails

我正在将来自外部 API 的参数的平面散列提取到我的 Rails 应用程序中。我需要在选择字段中将这些参数呈现给用户。

哈希的格式如下：

```
[["Name", "ID", "Category"]] 
```

我想将此作为分组选择。但我相信 grouped_select 标签采用分层哈希，而不是平面哈希？

有没有一种简单的方法可以将此散列重组为结构化散列？IE，

```
['CategoryA', [['Name-A1','ID-A1'],['Name-A2', 'ID-A2']] 
```

作为参考，我目前正在像这样处理我的控制器中的哈希

```
@hash = session["hash"].map { |h| [ h["name"], h["id"], h["category"] ] } 
```

并且在视图中

```
<%= f.select :hash_id, @hash %> 
```

这给了我一个无序列表的选项。我怎样才能分组`h["category"]`？

感谢您的任何指示。

**编辑**

顺便说一句，我已经尝试过`group_by`，因为这似乎是显而易见的方法。但我得到了`can't convert String into Integer`。也许我没有正确使用它？

```
hash.group_by {|h| h["category"] }.map { |h| [ h["name"], h["id"], h["category"] ] } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T10:46:20.063

```
hash.group_by {|h| h["category"] }.map { |h| [ h[0], h[1].map{|e| [e["name"],e["id"]]} ] } 
```

# php - 设置 Thrift 后无法读取字节错误

> ID：10663935
> 
> 赞同：0
> 
> 时间：2012-05-19T09:21:32.390
> 
> 标签：php, sockets, thrift

我已经在我的本地系统上设置了 Thrift - windows 7、PHP 5.3.8、Apache 2.2.21、Thrift 0.80、APC。我试图运行从 Thrift 编译器生成的客户端/服务器节俭程序，但是这些程序都不起作用。每个都给我一个错误'TSocket：无法从“localhost / path_to_client port 80”读取4个字节'。

我已经为 PHP 启用了 Socket 扩展并尝试使用 THttpClient 和 TSocket 类，但这些都不起作用。我已将协议类从 TBinaryProtocol 切换到 TBinaryProtocolAccelerated，但没有任何结果。

我已经浏览了 Thrift 的核心类，我看到“_handle”实际上并不指向文件，而是指向“localhost”。我试过给它一个文件路径，但它仍然不起作用。

我在 Socket 编程方面没有太多经验，但是我觉得我做的大部分事情都是正确的。

您对此的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T14:14:31.913

我能够解决此问题，方法如下-：

1.  首先，从 Thrift 编译器生成 PHP 代码的语法是 thrift --gen php* *:server* * yourfile.thrift 。我在代码中缺少**:server**。Thrift 文档中没有提到这一点

2.  将 Thrift 编译器生成的 PHP 文件包含在您的客户端和服务器文件中。

3.  您的服务器文件应该实现 Thrift 接口。

4.  确保首先执行服务器文件来启动 Thrift 服务器。创建您的classProcessor 文件的对象并打开传输层。你会在 thrift php 教程中找到这个。

5.  如示例中所示，从您的客户端文件调用服务器函数。

注意 - 确保您充分了解 Thrift 中的函数返回类型。

问候库纳尔

# android - 如何在 Android GridView 的后台下载图像？

> ID：10663940
> 
> 赞同：1
> 
> 时间：2012-05-19T09:22:33.783
> 
> 标签：android, android-imageview, android-gridview

我在 android 中有这个 GridView，我在其中显示了一些应该按需下载的图像。问题在于程序会等待每个图像请求完全下载，然后移动到下一个图像，从而使加载速度非常慢。我只想知道如何将图像下载移动到背景并在图像准备好时显示图像。
我想我应该为此目的使用 AsyncTask，但我不知道该怎么做？

# html - 字符解码失败错误

> ID：10663944
> 
> 赞同：1
> 
> 时间：2012-05-19T09:22:56.090
> 
> 标签：html, struts2

我无法理解为什么在我的服务器上出现字符解码失败警告。

> 2012 年 5 月 19 日上午 2:56:57 org.apache.tomcat.util.http.Parameters processParameters
> 
> 警告：参数：字符解码失败。值“100%”的参数“宽度”已被忽略。请注意，此处引用的名称和值可能由于解码失败而损坏。使用调试级别日志记录查看原始的、未损坏的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T17:52:18.057

好吧，末尾的 % 表示编码错误。如果编码正确，它后面应该跟着两个十六进制字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T12:46:23.257

如果“参数：字符解码失败”警告包括 % 问题，那么我们可以使用下面给出的代码，无需做任何事情。我在我的 ajax 函数中使用它。

```
var productPromoCodeIdParam = productPromoCodeId.replace('%','%25'); 
```

# android - 通过 adb 看不到华硕变压器

> ID：10663947
> 
> 赞同：4
> 
> 时间：2012-05-19T09:23:30.540
> 
> 标签：android, windows-7, adb, transformer

我在 Windows 7 和 Asus Transformer (ISC, 4.0.3) 上遇到 adb 问题

adb devices 显示空列表。

我已经安装了华硕PC套装，USB调试已打开。在 Linux 上一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T11:35:36.783

如果android的usb包不工作，试试这个： http: [//support.asus.com/download.aspx ?SLanguage=en&p=20&s=16&m=Eee+Pad+Transformer+TF101&os=32](http://support.asus.com/download.aspx?SLanguage=en&p=20&s=16&m=Eee+Pad+Transformer+TF101&os=32)

另外，请确保 USB 电缆足够短。某些设备和某些计算机存在 USB 电缆过长的问题。此外，尝试不同的 USB 端口。

# java - 如果我想从密钥库加载特定提供商的证书，如何获得相同的证书？

> ID：10663952
> 
> 赞同：1
> 
> 时间：2012-05-19T09:24:12.007
> 
> 标签：java, security, certificate, digital-signature, pki

我有一个 .p12 文件，我用指定的提供程序将它加载到密钥库，现在我得到一个编码证书并转换为 base64 编码，之后我通过网络将它传递到服务器端，在服务器端我在 base64 中得到它格式，解码为正常，并解析为证书类型，但是，当我使用它来检查签名时，它会给出异常

```
javaenter code here.lang.ClassCastException: "myprovider".JCEECPublicKey cannot be cast to java.security.interfaces.RSAPublicKey 
```

引发此异常的代码：

```
Certificate cert = null;
            try {
                cert = CertificateFactory.getInstance("X.509").generateCertificate(new ByteArrayInputStream(cert_array));
            } catch (Exception e) {
                e.printStackTrace();
            }

if (cert != null) {

                boolean ret = false;
                try {
                    //load with specific crypto provider
                    Signature sgn = Signature.getInstance("ECGOST34310", "GAMMA");
                    sgn.initVerify(cert.getPublicKey());
                    sgn.update(textBlob);
                    ret = sgn.verify(sign);
                } catch (Exception ex) {
                    ex.printStackTrace();
                }

                //signature check
                if (ret) {
                    System.out.println("verify sign OK");
                } else {
                    System.out.println("verify sign FALSE");
                }
            } 
```

客户端代码，生成证书：

```
KeyStore store = loadKeyStorep12(fileName, pass);
            Enumeration en = store.aliases();
            while (en.hasMoreElements()) {
                StoreObjectParam profParam = (StoreObjectParam) en.nextElement();
                System.out.println(profParam);
                aliasKey = profParam.getSn();
            }
            PrivateKey prvKey = (PrivateKey) store.getKey(aliasKey, pass.toCharArray());
            if (prvKey != null) {
                byte[] textBlob = loadDocument(filePath);
                sign = SetSign(textBlob, prvKey);
                Certificate cert = store.getCertificate(aliasKey);
                certificate = cert.getEncoded(); 
```

将此证书发送到服务器端后

# java - 为什么 getAnnotation 不接受 Class

> ID：10663955
> 
> 赞同：3
> 
> 时间：2012-05-19T09:24:31.350
> 
> 标签：java, generics, annotations, javac

为什么后续行会在 Java 中产生编译错误？或者我如何编写正确的泛型语法？

```
Class<? extends Annotation> annotation = annotations[i];
Class<? extends Annotation> anno = javaClass.getAnnotation(annotation); 
```

该方法的签名是：

```
public <A extends Annotation> A getAnnotation(Class<A> annotationClass) 
```

来自 Eclipse 的编译错误：

```
Type mismatch: cannot convert from capture#5-of ? extends Annotation to Class<? extends Annotation> 
```

javac编译错误：

```
incompatible types
    Class<? extends Annotation> anno = javaClass.getAnnotation(annotation);
                                                              ^
 required: Class<? extends Annotation>
 found:    CAP#1
 where CAP#1 is a fresh type-variable:
   CAP#1 extends Annotation from capture of ? extends Annotation 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T09:38:13.487

`getAnnotation`返回注解本身 - 而不是注解的*类*。我怀疑你可以使用：

```
Class<? extends Annotation> annotationClass = annotations[i];
Annotation annotation = javaClass.getAnnotation(annotationClass); 
```

# actionscript-3 - AS3 将向量转换为数组

> ID：10663959
> 
> 赞同：0
> 
> 时间：2012-05-19T09:25:35.420
> 
> 标签：actionscript-3, flash, vector

```
var leaderboardRowVOs:Vector.<LeaderboardRowVO> = new Vector.<LeaderboardRowVO>(); 
```

作为对象转到系统的另一部分，我正在尝试将其转换回实际类型

```
notification.getBody() as Vector.<LeaderboardRowVO> //throwing error 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T10:20:36.223

在 AS3 中有两种类型转换的方法：

```
// Casting
// 1: returns null if types are not compatible, 
//    returns reference otherwise
notification.getBody() as Vector.<LeaderboardRowVO>

// Converting    
// 2: throws exception if types are not compatible, 
//    returns reference otherwise
Vector.<LeaderboardRowVO>(notification.getBody()) 
```

情况1不会抛出错误，如果您有这样的行为，则`notification.getBody()`方法中一定有错误。

**编辑：** @divillysausages 巧妙地评论了案例 2 实际上创建了另一种类型的对象。这不是这里的情况。这是原生类型最常发生的情况，但有一个例外：Array 类。一些本机类具有顶级转换功能。有关它们的完整列表，请参阅[adobe livedocs](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/package.html)。可以通过将适当类型的*Array*`Vector()`传递给函数来以这种方式实例化 Vector 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T10:19:41.923

类中的 Vector 必须发生其他事情，因为将向量转换为 Object 然后再转换回 Vector 是有效的。这个简单的测试表明：

```
var v:Vector.<int> = new Vector.<int>();
v.push(1);
v.push(2);

var o:Object = v as Object;

var v2:Vector.<int> = o as Vector.<int>;

trace(v2[0]); // Output "1"
trace(v2[1]); // Output "2" 
```

所以你的问题一定出在其他地方。

# c - USB 设备注册 - 仅在停止请求时记录

> ID：10663960
> 
> 赞同：0
> 
> 时间：2012-05-19T09:25:37.327
> 
> 标签：c, windows, winapi, service, windows-services

请找到为检测我的 USB 设备而创建的服务的[代码](http://pastebin.com/SRVRdiHJ)。

上面代码中的问题是日志文件只有在服务停止后才会更新。

我的意图是在检测到设备后更新日志文件。但只有在服务停止后才会发生。如何实现我的意图？

请指导我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T09:46:00.807

为避免丢失日志条目，您需要刷新`fwrite`s 。

`fflush(your file handle )`

# delphi - 最小化/优化重复代码

> ID：10663962
> 
> 赞同：4
> 
> 时间：2012-05-19T09:25:54.257
> 
> 标签：delphi, delphi-2010

这是`TPanel`当鼠标光标悬停在它上面时“动画”的代码。我也有一个代码块来取消它的动画。

```
procedure Tmain.pStarting1MouseEnter(Sender: TObject);
begin
  if sender = pStarting1 then pStarting1.BevelInner := bvLowered;
  if sender = pStarting2 then pStarting2.BevelInner := bvLowered;
  if sender = pStarting3 then pStarting3.BevelInner := bvLowered;
  if sender = pStarting4 then pStarting4.BevelInner := bvLowered;
  if sender = pStarting5 then pStarting5.BevelInner := bvLowered;
  if sender = pStarting6 then pStarting6.BevelInner := bvLowered;
  if sender = pStarting7 then pStarting7.BevelInner := bvLowered;
  if sender = pStarting8 then pStarting8.BevelInner := bvLowered;
  if sender = pStarting9 then pStarting9.BevelInner := bvLowered;
end; 
```

正如你所看到的，它非常重复，因为我还有另外 27`TPanel`秒的动画，这意味着另外 27 行重复的代码。那么有没有办法可以优化呢？

我也尝试过将该代码块放入一个单独的过程中（在同一个单元中）。但德尔福告诉我这`sender`是未声明的。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-19T09:26:59.400

```
if Sender is TPanel then
  TPanel(Sender).BevelInner := bvLowered; 
```

或者，如果您确定它`Sender`始终是 a `TPanel`，只需

```
(Sender as TPanel).BevelInner := bvLowered; 
```

或（如果你*真的*确定）

```
TPanel(Sender).BevelInner := bvLowered; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T03:34:58.753

第四种方法是利用[`absolute`](http://docwiki.embarcadero.com/RADStudio/en/Variables#Absolute_Addresses)关键字。

```
procedure Tmain.pStarting1MouseEnter(Sender: TObject);
var
    Panel: TPanel absolute Sender;

begin
    if Sender is TPanel then
        Panel.BevelInner := bvLowered;
end; 
```

# java - Tomcat 6 不远程服务 webapps

> ID：10663967
> 
> 赞同：2
> 
> 时间：2012-05-19T09:26:40.447
> 
> 标签：java, debian, tomcat6, ipv6, ipv4

基本上，我安装了 linky（基于文本的浏览器）并且一切正常

我在这里发现了问题

```
/etc# netstat -an | grep LIST
tcp        0      0 127.0.0.1:3306          0.0.0.0:*               LISTEN     
tcp        0      0 0.0.0.0:1167            0.0.0.0:*               LISTEN     
tcp        0      0 0.0.0.0:465             0.0.0.0:*               LISTEN     
tcp        0      0 x.x.x.x:53              0.0.0.0:*               LISTEN     
tcp        0      0 127.0.0.1:53            0.0.0.0:*               LISTEN     
tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN     
tcp        0      0 0.0.0.0:25              0.0.0.0:*               LISTEN     
tcp        0      0 127.0.0.1:5433          0.0.0.0:*               LISTEN     
tcp        0      0 127.0.0.1:953           0.0.0.0:*               LISTEN     
tcp        0      0 0.0.0.0:10050           0.0.0.0:*               LISTEN     
tcp6       0      0 :::139                  :::*                    LISTEN     
tcp6       0      0 :::465                  :::*                    LISTEN     
tcp6       0      0 :::53                   :::*                    LISTEN     
tcp6       0      0 :::22                   :::*                    LISTEN     
tcp6       0      0 :::25                   :::*                    LISTEN     
tcp6       0      0 :::8123                 :::*                    LISTEN     
tcp6       0      0 :::445                  :::*                    LISTEN     
tcp6       0      0 127.0.0.1:8005          :::*                    LISTEN 
```

问题是tomcat 6只在tcp6上监听端口8123（我选择的那个）而不是tcp（ipv4）

我在 /etc/sysctl.d/ 中没有任何 .conf，但我有 /etc/sysctl.conf，在这里我添加了：

```
net.ipv6.bindv6only = 0 
```

并重新启动，但没有任何改变，它继续只在 tcp6 (ipv6) 上侦听..

我在 Debian 挤压：

```
Linux ma21641.plusserver.de 2.6.32-5-amd64 #1 SMP Sun May 6 04:00:17 UTC 2012 x86_64 GNU/Linux 
```

爪哇：

```
java -version
java version "1.6.0_18"
OpenJDK Runtime Environment (IcedTea6 1.8.13) (6b18-1.8.13-0+squeeze1)
OpenJDK 64-Bit Server VM (build 14.0-b16, mixed mode) 
```

我能做什么？

# php - PHP Regex 使用 glob() 指定多个路径

> ID：10663974
> 
> 赞同：8
> 
> 时间：2012-05-19T09:27:40.227
> 
> 标签：php, regex, directory, glob

```
glob("aaafolder/*php")
glob("bbbfolder/*php")
glob("cccfolder/*php") 
```

是否可以简化这一点？

```
glob("(?=aaafolder/*php)(?=bbbfolder/*php)(?=cccfolder/*php)") 
```

上面没有返回任何内容。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-19T09:31:40.473

[](http://fr.php.net/manual/en/function.glob.php#103022)**手册页上的[**此注释**](http://fr.php.net/manual/en/function.glob.php#103022)**`glob()`**似乎回答了您的问题，说 glob 不限于单个目录：使用**`GLOB_BRACE`**，您可以指定多个目录。**

 **我引用了`@Ultimater`那里给出的例子：

```
$results=glob("{includes/*.php,core/*.php}",GLOB_BRACE); 
```

[手册页上的用户注释通常包含有用的信息和示例；-)]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T09:32:50.880

正如[PHP 手册](http://de3.php.net/manual/en/function.glob.php)所说，它是`GLOB_BRACE`标志。

```
glob("{aaafolder/*php,bbbfolder/*php,cccfolder/*php}", GLOB_BRACE) 
```**

# c# - Visual Studio 2010 中缺少参考

> ID：10663976
> 
> 赞同：1
> 
> 时间：2012-05-19T09:27:55.163
> 
> 标签：c#, arcgis-server

我正在使用 Visual Studio 2010 和 arcgis server 10 开发服务器对象扩展，并且在开发管理器属性页 esri.arcgis.servermanager 时缺少如何在我的项目中包含此程序集引用。我正在使用此链接寻求帮助[http://help.arcgis.com/en/sdk/10.0/arcobjects_net/conceptualhelp/index.html#/How_to_develop_a_property_page_for_the_REST_SOE/000100000nwm000000/](http://help.arcgis.com/en/sdk/10.0/arcobjects_net/conceptualhelp/index.html#/How_to_develop_a_property_page_for_the_REST_SOE/000100000nwm000000/) 请尽快帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T11:21:28.597

首先：我不熟悉ArcGIS Server，但我可能可以帮助您提供一些一般性的评论。

检查您发布的链接的第 6 步下列出的程序集是否在 Visual Studio 的解决方案资源管理器中的*引用*（当您展开它时）下可见。如果没有，您需要添加它们。

要添加对程序集的引用，请右键单击解决方案资源管理器中的*引用*项，然后单击*添加引用*...。找到您必须包含的程序集（例如`ESRI.ArcGIS.ServerManager`）。这基本上是您发布的链接的第 5 步和第 6 步。如果您已正确执行此操作，它们应该会出现在您的解决方案资源管理器中的“*参考*”下。

请注意，文档声明`ServerManager`需要 ArcGIS Server 的 Web 应用程序组件。确保你有这个，否则它可能不起作用。

# ruby-on-rails - f.collection_select 来自 rails 3 中的 2 个表

> ID：10663978
> 
> 赞同：0
> 
> 时间：2012-05-19T09:28:03.127
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1

我有这个代码行 `<%= f.collection_select :owner_ids, Owner.order(:id), :id, :name, {}, {multiple: true} %>`，它以大众媒体形式返回所有者列表，但我还需要在这个领域也包括公司，所以我也可以在同一个列表中包含公司，因为可以拥有大众媒体频道由个人或公司。

**公司.rb**

```
class Company < ActiveRecord::Base

  has_many :ownerships
  has_many :massmedia, through: :ownerships
  has_many :owners, through: :ownerships
end 
```

**所有者.rb**

```
class Owner < ActiveRecord::Base

  has_many :ownerships
  has_many :massmedia, through: :ownerships
  has_many :companies, through: :ownerships
end 
```

**大众媒体.rb**

```
class Massmedium < ActiveRecord::Base
  belongs_to :category

  has_many :ownerships
  has_many :owners, through: :ownerships
  has_many :companies, through: :ownerships

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T10:35:24.187

```
= f.select :owners, options_for_select((Owner.all + Company.all)
  .collect{|o| [o.name, "#{o.class},#{o.id}"], {multiple: true} 
```

您必须在模型中定义`owners=(values)`方法，该方法将解析 ["Company,1","Owner,2"] 等值

# c++ - Visual Studio 2010：关于“程序数据库管理器”的致命错误 C1902

> ID：10663979
> 
> 赞同：13
> 
> 时间：2012-05-19T09:28:09.170
> 
> 标签：c++, visual-studio-2010

这是来自 MSDN 的一些描述

> 错误消息程序数据库管理器不匹配；请检查您的安装 程序数据库文件 (.pdb) 是使用比编译时发现的更新版本的 mspdb80.dll 创建的。
> 
> 此错误通常表示缺少 mspdbsrv.exe 或 mspdbcore.dll 或与 mspdb80.dll 具有不同的版本。确保您的系统上安装了匹配版本的 mspdbsrv.exe、mspdbcore.dll 和 mspdb80.dll。

我想知道什么是“程序数据库管理器”？而“mspdbsrv.exe、mspdbcore.dll、mspdb80.dll”又是什么关系？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-05-18T16:20:43.273

```
fatal error C1902: Program database manager mismatch; 
please check your installation 
```

如果您保存`mspdb100.dll`在`D:\Program Files\Microsoft Visual Studio 10.0\VC\bin`文件夹中，则意味着此问题将存在。从 bin 文件夹中删除它，它不应该在那里。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-11-04T20:40:58.773

即使使用 Opus 编解码器的 Project SLN 卸载并重新安装 VS，我也遇到了完全相同的问题。

经过数小时的谷歌搜索，我相信我已经找到了来自其他论坛和网站的大量答案的解决方案，这些答案本身并没有奏效。

卸载并重新安装 VS2010 后，将以下文件从 Common7\IDE 复制到 VC\bin

```
mspdbsrv.exe
mspdb100.dll
mspdbcore.dll
mspdbst.dll 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T10:05:56.187

干净地重建项目。您将获得新的 exe 、 pdb 和相关文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-21T07:17:18.260

试试这个 将文件 mspdbsrv.exe 从 VisualStudio/Common7/IDE 目录复制到 /VC/bin 目录。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-24T16:25:53.600

我已经尝试了上述所有解决方案，但没有一个对我有用。

在我的例子中，Jenkins 使用 NT AUTHORITY\SYSTEM 用户运行。将此更改为另一个用户后，此错误已修复。希望它对某人有所帮助。

# magento - 在下单点击和感谢页面之间加载自定义页面

> ID：10663980
> 
> 赞同：0
> 
> 时间：2012-05-19T09:28:12.643
> 
> 标签：magento, tracking

我目前正在尝试将 Econda 跟踪集成到 magento 网店的单页结帐过程中，并具有特殊要求，即一旦客户单击下订单按钮，通常在感谢页面上完成的跟踪已经完成（在按钮单击和重定向到支付提供商或感谢页面之间）。跟踪代码本身是由 magento 扩展动态创建的，并作为 html 注入到感谢页面的 phtml 文件中。通过加载该 phtml 发送信息。此外，在可以注入跟踪代码之前，magento 中的订单必须存在（意味着必须已经点击下订单按钮）。

目前，我正在尝试创建一个“不可见”的 phtml，一旦客户单击 place-order-button 就会加载该 phtml，其中包含跟踪代码。此页面应显示几秒钟，然后转发/重定向到支付提供商或感谢页面。这是我完全迷路的地方。

一旦订单完成/保存，我就会对事件进行观察。这个观察者在我的模型中调用一个动作。但模型无法加载/显示 phtml。

一旦客户单击下订单按钮，如何加载自定义 phtml 文件，显示此 phtml 几秒钟，然后动态转发到支付提供商或感谢页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T00:15:29.780

购物车成功页面本质上是您应该放置任何电子商务跟踪 Javascript 或标记的地方。

一旦所有必要的订单处理在后端进行，这是第一件要交付给浏览器的东西。将它们传送到临时页面仅几秒钟似乎很麻烦，最终效率低下。这是可能的，但这是不好的做法。

成功页面不足有什么特别的原因吗？我似乎无法在你的问题中找到这一点。

将新块加载到您的成功页面是一个简单的过程。了解更多关于布局和模板的信息（也许[在这里尝试 Alan Storm 的教程](http://alanstorm.com/layouts_blocks_and_templates)）并使用此方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-07T22:28:43.500

还有两个选择：

*   您可以将跟踪添加到按钮的点击事件中
*   您可以使用 econda PHP SDK 使用服务器端跟踪

以下是如何将跟踪添加到点击事件

```
<script type="text/javascript">
  function trackIt() {
   window.emosPropertiesEvent({
       siteid: "my-site.de",
       content: "CONTENT-LABEL"
   });
  }
</script>
<tag onclick="trackIt();">content</tag> 
```

在链接中使用点击事件跟踪时要小心，如果您的页面在跟踪事件发送之前卸载，它将不起作用。

我找不到 econda PHP SDK 文档的英文版，很抱歉，这里是德语文档： https: [//support.econda.de/display/INDE/PHP-Helferklasse](https://support.econda.de/display/INDE/PHP-Helferklasse)

如前所述，感谢页面是添加跟踪的最佳位置。另一个原因是，通常您想要跟踪客户是否真的订购了。支付页面是常见问题，所以之前添加“订单成功”跟踪调用没有任何意义。

# php - PHP 的 SplFileObject 类的 C++/VC++ 替代方案

> ID：10663984
> 
> 赞同：0
> 
> 时间：2012-05-19T09:28:55.497
> 
> 标签：php, c++, visual-c++, splfileobject

是否有任何与 PHP 相同的手动编码**类**`SplFileObject`或 VC++ 插件可用？

请参阅问题[https://stackoverflow.com/questions/10650864/fetching-nth-line-of-a-file/10650864#10650864](https://stackoverflow.com/questions/10650864/fetching-nth-line-of-a-file/10650864#10650864)。我想使用 C++ 来实现这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T10:38:17.110

不确定为什么要使用它，iostreams 或 boost::filesystem 呢？

[http://msdn.microsoft.com/de-de/library/22z6066f%28v=vs.100%29](http://msdn.microsoft.com/de-de/library/22z6066f%28v=vs.100%29)

[http://www.boost.org/doc/libs/1_49_0/libs/filesystem/v3/doc/index.htm](http://www.boost.org/doc/libs/1_49_0/libs/filesystem/v3/doc/index.htm)

更新（阅读评论后添加代码示例）：

那么有这样的事情吗？

```
#include <iostream>
#include <fstream>
#include <string>

int main(int argc, char* argv[])
{
    auto fd = std::fstream("veryLargeFile.txt");
    if (fd.good()) {
        std::string buffer;
        fd.seekg(200000);
        std::getline(fd, buffer);
        std::cout << buffer << std::endl;
    }
    fd.close();

    return 0;
} 
```

# javascript - 当用户滚动到页面末尾时使用 jQuery .load()

> ID：10663985
> 
> 赞同：1
> 
> 时间：2012-05-19T09:29:13.720
> 
> 标签：javascript, jquery

当用户滚动到页面底部时，我正在使用 jQuery load() 加载更多内容。这是我的脚本。

```
$(window).scroll(function () {
    if ($(window).scrollTop() >= $(document).height() - $(window).height()) {
        var visible_posts = $('.post').length - 1;
        $(".posts").append('<div class="more-content-'+ visible_posts + '"></div>');
        $(".more-content-" + visible_posts).html('<div class="loading"><img src="/img/loading.gif" alt="" />');
        $(".more-content-" + visible_posts).load('<?php bloginfo('template_directory'); ?>/ajax/get_posts.php?offset=' + visible_posts);
    }
}); 
```

问题是，如果用户滚动太快，这会产生奇怪的行为和许多加载 gif。我认为，因为它在加载 div 的每个时间都满足条件时附加 div，甚至在加载完成之前。

问题是：

有没有办法在第一次执行后停止脚本..运行 load() ...然后重新启用该功能？当您想禁用太快的点击时，类似于取消绑定点击。

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T09:33:51.087

加载完成后如何重新启用该功能？

```
var canLoad = true;
$(window).scroll(function () {
    if ($(window).scrollTop() >= $(document).height() - $(window).height() && canLoad) {
        canLoad = false;
        // other stuff
        $(".more-content").load('stuff', function() {
           // re-enable scroll function
           canLoad = true;
        });
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T09:35:06.257

开始加载新页面后设置一个标志，并在页面更新后取消设置..

```
var loadingMore = false;
$(window).scroll(function () {
    if ( !loadingMore && 
         $(window).scrollTop() >= $(document).height() - $(window).height()) {

        loadingMore = true;

        var visible_posts = $('.post').length - 1;
        $(".posts").append('<div class="more-content-'+ visible_posts + '"></div>');
        $(".more-content-" + visible_posts).html('<div class="loading"><img src="/img/loading.gif" alt="" />');
        $(".more-content-" + visible_posts)
             .load('<?php bloginfo('template_directory'); ?>/ajax/get_posts.php?offset=' + visible_posts, 
                   function(){loadingMore = false;}
                  );
    }
}); 
```

需要注意的是，它不仅仅是多次出现的 div，您实际上是在发出多个 AJAX 请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T09:36:32.513

尝试这个

```
var flag = true;
$(window).scroll(function () {
    if ($(window).scrollTop() >= $(document).height() - $(window).height()) {
        if(flag){
           flag = false;
           var visible_posts = $('.post').length - 1;
           $(".posts").append('<div class="more-content-'+ visible_posts + '"></div>');
           $(".more-content-" + visible_posts).html('<div class="loading"><img src="/img/loading.gif" alt="" />');
           $(".more-content-" + visible_posts).load('<?php bloginfo('template_directory'); ?>/ajax/get_posts.php?offset=' + visible_posts, function(){ 
           flag = true
          });
       }
    }
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-19T09:39:19.473

这应该可行，我还添加了评论来帮助您：

```
$(window).scroll(function () {
  var bload = 1; // Add a boolean var
    if ($(window).scrollTop() >= $(document).height() - $(window).height() && bload) {
      // Check in the condition to see if we load
      bload = 0; // Set the boolean to false or zero, so that we don't load anything else until the var is true again
        var visible_posts = $('.post').length - 1;
        $(".posts").append('<div class="more-content-'+ visible_posts + '"></div>');
        $(".more-content-" + visible_posts).html('<div class="loading"><img src="/img/loading.gif" alt="" />');
        $(".more-content-" + visible_posts).load('<?php bloginfo('template_directory'); ?>/ajax/get_posts.php?offset=' + visible_posts, function () {
          bload = 1; // This gets fired when the load is done, so we can load again (we set the bool to true)
        });
    }
}); 
```

# c# - 预览时 Windows 窗体无法以正确的格式显示

> ID：10663986
> 
> 赞同：0
> 
> 时间：2012-05-19T09:29:21.333
> 
> 标签：c#, graphics, printing

我想在 C# 中打印包含在 Windows 窗体中的部分区域中的数据。这是我的 DrawAll() 方法，它在单击预览按钮时调用。我只想打印该部分中的数据而没有背景图像。但它没有给出正确的格式，这是正确的格式

![在此处输入图像描述](../Images/ad473cbb8bd073128680a878e5f8a0a0.png)

这就是我得到的

![在此处输入图像描述](../Images/02fe67b3ac2953430e011f881f10020b.png)

这是 DrawAll 方法

`私人无效DrawAll（图形g）{

```
 // RectangleF srcRect = new RectangleF(0, 0, this.pictureBox1.Width,       this.pictureBox1.Height);
        Rectangle srcRect=new Rectangle(0,0,this.pictureBox1.Width,this.pictureBox1.Height);
        int nWidth = printDocument1.PrinterSettings.DefaultPageSettings.PaperSize.Width;
        int nHeight = printDocument1.PrinterSettings.DefaultPageSettings.PaperSize.Height;
        Rectangle destRect = new Rectangle(0, 0, nWidth, nHeight /3);
       // Rectangle drawRect = (Rectangle)destRect.;
       // g.DrawImage(this.pictureBox1.BackgroundImage, destRect, srcRect,   GraphicsUnit.Pixel);
         Pen aPen = new Pen(Brushes.Black, 1);
         g.DrawRectangle(aPen,destRect);

        float scalex = destRect.Width / srcRect.Width;
        float scaley = destRect.Height / srcRect.Height;

       // Pen aPen = new Pen(Brushes.Black, 1);
        for (int i = 0; i < this.Controls.Count; i++)
        {
            if (Controls[i].GetType() == this.paytext.GetType())
            {
                TextBox theText = (TextBox)Controls[i];
                g.DrawString(theText.Text, theText.Font, Brushes.Black, theText.Bounds.Left * scalex, theText.Bounds.Top * scaley, new StringFormat());
            }
            if (Controls[i].GetType() == this.label4.GetType())
            {
                Label theTextlbl = (Label)Controls[i];
                g.DrawString(theTextlbl.Text, theTextlbl.Font, Brushes.Black, theTextlbl.Bounds.Left * scalex, theTextlbl.Bounds.Top * scaley, new StringFormat());
            }
            if (Controls[i].GetType() == this.dateTimePicker1.GetType())
            {
                DateTimePicker theDate = (DateTimePicker)Controls[i];
                g.DrawString(theDate.Text, theDate.Font, Brushes.Black, theDate.Bounds.Left * scalex, theDate.Bounds.Top * scaley, new StringFormat());
            }
        }
    }` 
```

# asp.net - Crystal Report错误移动到下一页时缺少参数值

> ID：10663992
> 
> 赞同：0
> 
> 时间：2012-05-19T09:30:03.110
> 
> 标签：asp.net, mysql, parameters, crystal-reports

我的水晶报表在第一页中工作正常，但是当我单击下一页按钮时，报表不会加载并给出缺少参数值错误。谁能帮我解决这个问题。

我目前的编码如下。

```
protected void ddlStudent_SelectedIndexChanged(object sender, EventArgs e)
{

        GenerateReport();

}

protected void GenerateReport()
{
    //Create report document
    ReportDocument crystalReport = new ReportDocument();

    //Load crystal report made in design view
    crystalReport.Load(Server.MapPath("Reports/PhotoGallery.rpt"));

    //Set DataBase Login Info
    crystalReport.SetDatabaseLogon("root", "pwd", @"localhost", "nsis");

    //Provide parameter values
    crystalReport.SetParameterValue("adno", adNo);

    crvReportViewer.ReportSource = crystalReport;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T11:32:21.930

我认为你需要调用 GenerateReport(); 页面加载中的方法以及尝试以下

```
 protected void ddlStudent_SelectedIndexChanged(object sender, EventArgs e)
        {

            GenerateReport();
            ViewState["ReportLoad"] = "Load";
        }

  protected void Page_Load(object sender, EventArgs e)
        {
            if (ViewState["ReportLoad"] != null)
            {
                GenerateReport();
            }
        } 
```

# c# - 在 Z3 中对多个值的逻辑公式进行评估

> ID：10663994
> 
> 赞同：1
> 
> 时间：2012-05-19T09:30:57.790
> 
> 标签：c#, z3

我需要使用 Z3 对各种变量值评估表达式的值。我知道 Z3 是一个可满足性检查器，但 model.Eval(Args) 会导致对模型生成的变量值的表达式进行评估。

那么我们是否可以迭代各种值来评估表达式。

示例： p 和 q 在 p 和 q 的所有可能值（p，q 是 Boolean ）

所以在某种意义上，使用一些递归或迭代来创建一个真值表。Z3有没有办法做到这一点？

C# API 的帮助会更好。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T14:52:20.697

您可以考虑`Substitute`C# API 中的方法。它可用于替换常量，例如`p`和`q`值。它还在应用替换后简化/评估公式。

这是一个小的 C# 示例（来自我们的回归套件），使用`Substitute`：

```
using Microsoft.Z3;
using System;
using System.Collections.Generic;

class Test
{
    public void Run()
    {
        Dictionary<string, string> cfg = new Dictionary<string, string>() { 
            { "AUTO_CONFIG", "true" } };

        using (Context ctx = new Context(cfg))
        {
            IntExpr x = ctx.MkIntConst("x");
            IntExpr y = ctx.MkIntConst("y");

            FuncDecl f = ctx.MkFuncDecl("f", new Sort[] { ctx.IntSort, ctx.IntSort }, ctx.IntSort);
            FuncDecl g = ctx.MkFuncDecl("g", new Sort[] { ctx.IntSort }, ctx.IntSort);
            Expr n = f[f[g[x], g[g[x]]], g[g[y]]];

            Console.WriteLine(n);

            Expr nn = n.Substitute(new Expr[] { g[g[x]], g[y] }, 
                                   new Expr[] { y, ctx.MkAdd(x, ctx.MkInt(1)) } );

            Console.WriteLine(nn);

            Console.WriteLine(n.Substitute(g[g[x]], y));
        }
    }
} 
```

当然，您必须编写一个循环来遍历所有可能的值。在 Python 中，您可以使用列表推导：[http](http://rise4fun.com/Z3Py/56) ://rise4fun.com/Z3Py/56 另一种选择是使用方法`Simplify`。此方法可用于评估不包含未解释符号（例如`p`和）的公式`q`。这是 Python 中的另一个示例：[http](http://rise4fun.com/Z3Py/PC) ://rise4fun.com/Z3Py/PC 我正在使用 Python，因为我们不支持在浏览器中运行 C# 示例。请注意，C# 中的 Z3 API 包含 Python 的所有功能。

最后，另一种可能性是枚举模型。通过这样做，您实际上是在生成满足公式的所有值（即`p`，`q`使其为真）。这个想法是添加阻止当前模型的新约束，然后再次求解。这是一个用 Python 编写的小脚本： [http ://rise4fun.com/Z3Py/PDJ](http://rise4fun.com/Z3Py/PDJ)

约束`block`用于阻止当前模型。如果我们取消注释`print block`，我们还可以为 Z3 生产的每个模型打印它。当然，如果有无限模型满足这个例子中的公式，这种方法不会终止： [http ://rise4fun.com/Z3Py/X0l](http://rise4fun.com/Z3Py/X0l)

这些示例可以用 C# 编码。这是一个 C# 示例，演示如何迭代模型中的常量（和函数），并获得它们的解释：

```
using Microsoft.Z3;
using System;

class Test
{

    public void Run()
    {        
        using (Context ctx = new Context())
        {
            Sort U = ctx.MkUninterpretedSort("U");
            FuncDecl f = ctx.MkFuncDecl("f", U, U);
            Expr a = ctx.MkConst("a", U);
            Expr b = ctx.MkConst("b", U);
            Expr c = ctx.MkConst("c", U);

            Solver s = ctx.MkSolver();
            s.Assert(ctx.MkEq(f[f[a]], b),
                     ctx.MkNot(ctx.MkEq(f[b], c)),
                     ctx.MkEq(f[c], c));
            Console.WriteLine(s.Check());
            Model m = s.Model;
            foreach (FuncDecl d in m.Decls)
                if (d.DomainSize == 0)
                    Console.WriteLine(d.Name + " -> " + m.ConstInterp(d));
                else 
                    Console.WriteLine(d.Name + " -> " + m.FuncInterp(d));

            Console.WriteLine(m.NumSorts);
            Console.WriteLine(m.Sorts[0]);

            foreach(Sort srt in m.Sorts)
                Console.WriteLine(srt);

            foreach (Expr v in m.SortUniverse(U))
                Console.WriteLine(v);
        }
    }
} 
```

# zend-framework - Zend 框架：表单验证 - 请填写“A”或“B”

> ID：10663995
> 
> 赞同：1
> 
> 时间：2012-05-19T09:31:30.287
> 
> 标签：zend-framework

我正在使用 Zend Framework 编写应用程序。我有一个简单的表单，它有两个文本框。

如何向表单添加验证，以便至少填充一个输入框？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T17:03:53.553

您可以创建一个自定义验证器，例如：

```
class My_Validate_AtLeastOneNotEmpty implements Zend_Validate_Interface
{    
    protected $thisField;
    protected $otherField;

    protected $messages = array();

    public function __construct($thisField, $otherField){
        $this->thisField = $thisField;
        $this->otherField = $otherField;
    }

    public function isValid($value, $context = null)
    {
        $validator = new Zend_Validate_NotEmpty();
        if (!$validator->isValid($value) && !$validator->isValid($context['otherField'])){
            $this->messages[] = 'At least one of the fields - ' 
                . $thisField . ' or '  . $otherField 
                . ' - must be non-empty';
            return false;
        }
        return true;
    }

    public function getMessages()
    {
        return $this->messages;
    }
} 
```

然后将此验证器附加到元素之一，标识两个名称：

```
// create the two fields
$fld1 = new Zend_Form_Element_Text('field1');    
$fld2 = new Zend_Form_Element_Text('field2');

// add the validator to one of them, identifying both fields
$fld1->addValidator(new My_Validate_AtLeastOneNotEmpty('field1', 'field2')); 
```

通常，我们不需要识别要附加验证器的元素的字段名。但是，通过将两个字段名都传递给验证器，我们可以让用户更清楚地看到错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T11:54:18.107

创建一个带有两个选项的单选组，均未选中。隐藏文本字段。通过单选按钮上的 onclick 事件，您可以显示其中一个文本框。现在您可以将所需的验证器添加到单选按钮。一点解决方法，但结果是一样的。

# ios - UIGraphicsBeginImageContextWithOptions 中的内存泄漏？

> ID：10663997
> 
> 赞同：1
> 
> 时间：2012-05-19T09:31:46.590
> 
> 标签：ios, ipad

我已经将我的代码一分为二，并确定这会导致内存泄漏。有人可以解释为什么吗？

`self.overlay`是`UIImageView`, 在 IB 中设置。该属性被声明为`(nonatomic, weak)`。

如果我注释掉这个 while 块，我不会收到 malloc 错误。如果我在这里只注释掉 // Graphics 操作（如下所示），我仍然会得到 malloc 错误。

```
UIGraphicsBeginImageContextWithOptions(self.overlay.frame.size, NO, 0);

// Graphics operations here

self.overlay.image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```