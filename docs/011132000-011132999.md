# StackOverflow 问答 11132000-11132999

# database - 如何为实体框架创建有效的连接字符串 - 底层提供程序在打开时失败？

> ID：11132003
> 
> 赞同：2
> 
> 时间：2012-06-21T05:28:43.703
> 
> 标签：database, entity-framework-4.1, connection-string

给定以下连接字符串：

```
<add name="PrimaryDBConnectionString" connectionString="metadata=res://*/;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=10.1.1.101;Initial Catalog=primary;Persist Security Info=True;User ID=myuserid;Password=mypassword;MultipleActiveResultSets=True;Application Name=EntityFramework&quot;" /> 
```

我尝试使用以下内容在我的 DAL 中打开连接：

```
 using (PrimaryDBContext ctx = new PrimaryDBContext(ConfigurationManager.ConnectionStrings["PrimaryDBConnectionString"].ToString()))
        {
            try
            {
                ctx.Connection.Open();
                var result = ctx.sq_newsfeed_GetProfileByID(profileID); 
```

我得到的错误是：

> 基础提供程序在打开时失败

我弄乱了 EF 连接字符串，并用“metadata=res://*/;”替换了所有提供程序前缀的东西 但还是不行。

任何人都可以对此有所了解吗？

谢谢。

- 更新 -

感谢您的回复...我最终只是从 UI 创建了一个新的数据库连接并修改了连接字符串以满足我的需求：

```
<add name="PrimaryEntities" connectionString="metadata=res://*/PrimaryModel1.csdl|res://*/PrimaryModel1.ssdl|res://*/PrimaryModel1.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=10.99.108.42;initial catalog=primary;user id=dbuserID;password=somepw;multipleactiveresultsets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" /> 
```

我保留了元数据部分。诀窍是确保您的 .csdl、.ssdl 和 .msl 文件名前缀与您的数据库上下文相匹配。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T19:09:48.293

您是否使用 Code First/DbContext（您的问题在 entity-framework-4.1 下提交）？如果是这样，那么您的连接字符串应该只是一个常规连接字符串 - 如下所示：

```
<add name="PrimaryDBConnectionString" providerName="System.Data.SqlClient"  connectionString="Data Source=(localdb)\v11.0;Initial Catalog=squirtprimary;Persist Security Info=True;Integrated Security=true;MultipleActiveResultSets=True;Application Name=EntityFramework" /> 
```

（您也不必对配置管理器施展魔法 - 您可以像这样向您的 ctor 提供连接字符串的名称：

```
"name=PrimaryDBConnectionString" 
```

它应该工作）

另一方面，如果您使用的不是 DbContext 而是 ObjectContext（您得到的异常将表明这一点 - 您没有得到说明您的连接字符串错误或缺少 providerName 参数的异常）。然后您需要检查是否能够在没有 EF 的情况下连接到数据库。一些提示：

*   您使用 IP 地址作为数据源 - 如果这是远程服务器，您确定您启用了接受外部客户端吗？（AFAIR 默认情况下在 Sql Server 中禁用此功能）
*   您正在使用用户/密码进行身份验证 - 您确定这些是正确的

检查上述内容的方法之一是在您的计算机上打开 Sql Server Management Studio 并提供您在连接字符串中的数据。

您看到的异常并不表示元数据部分有任何问题。它特别是关于无法打开与数据库的连接。

# ssas - 查看 Cube 浏览器中使用的 MDX

> ID：11132010
> 
> 赞同：1
> 
> 时间：2012-06-21T05:29:09.647
> 
> 标签：ssas, mdx, sql-server-profiler, olap-cube

我正在尝试查看 Cube Browser 中使用的 MDX。我在谷歌上搜索，我再次被重定向 StackOverflow 的帖子 [查看 MDX 查询在浏览多维数据集时生成](https://stackoverflow.com/questions/3321453/view-mdx-query-generated-while-browsing-a-cube)

是的，我可以看到 MDX，但是当我尝试在 SSMS-Analysis 服务器中执行相同的 MDX（从 Profiler 复制并粘贴到 SSMS 中）时，它不会执行并给我错误。

我在这里做错了吗？如果没有，还有其他方法可以将 MDX 从立方体中取出吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T05:57:10.757

有错误消息会很有帮助，但我猜这个集合的定义（？）丢失了：

```
select non empty [{73C699C7-F74B-48A7-96AE-E131412D0725}Pivot73Axis0Set0] ... 
```

根据您的要求。不知何故，您也应该在 MDX 请求中有一个 WITH SET ...。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T07:24:46.520

我尝试解决这个问题并咨询了许多论坛，但无法得到绝对的答案。

但我使用 MS EXcel 和插件[http://olappivottableextend.codeplex.com/找到了解决方法](http://olappivottableextend.codeplex.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T12:34:25.530

你需要包括集合的创建`[{73C699C7-F74B-48A7-96AE-E131412D0725}Pivot73Axis0Set0]`

在您发布的代码之前可能有几行

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T04:29:03.503

经过深入分析，我发现 SQL Profiler 是一个更棒的工具，可以帮助您获取此查询。

您需要做的是捕获批处理操作之间的所有查询，然后将它们放在 SSMS 的 MDX 查询窗格中。

您可以一一执行并获得结果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-28T15:10:27.570

一个非常简单的解决方案：

如果您安装了 EXCEL 2010 + PowerPivot 插件...

所以你打开excel 2010你去“Powerpivot Icon”你尝试打开一个新的连接......然后你会看到一个窗口标题“MDX STATEMENT”你选择设计......

当您完成多维数据集的设计后，您将看到与 MDX 语句相关的...

# iphone - 应用内购买 - 消耗品

> ID：11132011
> 
> 赞同：0
> 
> 时间：2012-06-21T05:29:12.923
> 
> 标签：iphone, ios, ios5, in-app-purchase

我正在我的应用程序中实施应用程序购买。根据要求，每次我在我的应用程序中按下“购买”按钮时都**应该购买产品。**

在 itunesconnect 网站上，我的产品将属于哪一类？**消耗品或非消耗品。**

我对选择类别感到困惑。我已经为此阅读了一些文件，但仍然令人困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T05:41:04.470

苹果的文档说

> 每次用户需要该物品时，都必须购买消耗品。

你说：

> 每次我在应用程序中按“购买”按钮时都应该购买产品

你不觉得这是同一个句子吗？

所以，是的，你应该选择**consumable**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T05:40:06.127

这意味着您的产品是**消耗品**。检查[此链接](http://troybrant.net/blog/2010/01/in-app-purchases-a-full-walkthrough/)以获取您需要的所有详细信息。

# selenium - 编写 Selenium 脚本时如何处理网站重定向

> ID：11132015
> 
> 赞同：0
> 
> 时间：2012-06-21T05:29:29.397
> 
> 标签：selenium, selenium-webdriver, web-testing

我正在测试一个 Web 应用程序是否按预期工作：

这是我的脚本

```
setSpeed    7000    
open    router2/default.aspx?FIRID=10CAAR&SUMSTAT=1&SID=200ba6db-99d7-474b-a26b-8a0b9e772fec&PID=   
click   name=radio_43   
clickAndWait    id=ctl00_Content_btnContinue    
verifyTextPresent   United States Military  
selectWindow    null 
```

我正在使用 setSpeed 命令，因为它下面显示了那个链接（ router2/default.aspx?FIRID=10CAAR.... ），它被快速重定向，然后生成一个随机 URL（所以我不能抓住那个 URL） .

这就是为什么我把 7 秒延迟。但它似乎很慢/效率低下。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:12:29.270

如果需要，无需降低执行速度，只需`pause`几秒钟即可。

使用getAttribute 方法，即`storeAttribute`在IDE 中获取要打开的url。

当您使用 open 命令时，selenium 会等待超时时间。

谢谢。

# macos - 信息提取mac

> ID：11132016
> 
> 赞同：0
> 
> 时间：2012-06-21T05:29:30.843
> 
> 标签：macos

是否可以从日志中提取以下信息？

*   Mac的启动/关闭时间。
*   将卷连接到 Mac。

此外，是否有可能检索信息，如 -

*   到目前为止连接到 Mac 的所有设备，例如 - 所有 USB 设备、打印机等，

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T05:42:47.067

您可以使用命令提取有关会话、重新启动和关闭的信息`last`。据我所知，并没有保存所有连接设备的日志，但我可能错了。

# objective-c - 如何捕获发送到实例异常的无法识别的选择器？

> ID：11132017
> 
> 赞同：5
> 
> 时间：2012-06-21T05:29:34.230
> 
> 标签：objective-c, ios5

一段时间后，我将无法识别的选择器发送到实例异常。当我得到这个时，我想跳过它，我的应用程序应该可以工作。

但是我不知道如何捕捉。因为这没有抓住：

```
@property(nonatomic,retain) UIButton *button;
    @try{

       if(button.currentBackgroundImage == nil){//rises exception 
    }
    }@catch(NSException *e){
} 
```

我怎么能处理这个？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T05:33:04.790

我经常使用和看到的技术是：不是捕获异常，而是检查对象是否响应选择器：

```
if(![button respondsToSelector:@selector(currentBackgroundImage)] || button.currentBackgroundImage == nil) {
  // do your thing here...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T06:24:35.807

如果您遇到此异常，则表示您的代码中存在设计缺陷或错误。通过忽略异常来修补它不是正确的做法。试着找出你为什么要向错误的对象发送错误的消息。您的代码将变得更加健壮和可维护。

此外，有时当对象最初是正确的类型时，您会遇到此异常，但正在释放的过程中途。小心！

如果您仍想绕过异常，请阅读 Apple 的文档，其中解释了在运行时将消息绑定到方法实现的多步骤过程。至少有两个地方可以通过覆盖 NSObject 的默认行为来捕获它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-02-26T13:17:53.907

我理解告诉您防止无法识别的选择器的答案，因为这是首选方法。

但是在您没有该选项的情况下（例如在我的情况下，Cocoa 内部在调用堆栈的下方混乱）您确实可以在尝试时捕获无法识别的选择器。

**概念验证代码：**

```
// Do a really bad cast from NSObject to NSButton
// to get something to demonstrate on
NSButton *object = (NSButton*)[[NSObject alloc] init];

@try{
    // Log the description as the method exists 
    // on both NSObject and NSButton
    NSLog(@"%@", [object description]);

    // Send an unrecognized selector to NSObject
    [object bounds];
} @catch(NSException *e){
    NSLog(@"Catch");
} @finally {
    NSLog(@"Finally");
}

// Print the description to prove continued execution
NSLog(@"Description again: %@", [object description]); 
```

**输出：**

```
2019-02-26 14:11:04.246050+0100 app[46152:172456] <NSObject: 0x60000000a6f0>
2019-02-26 14:11:04.246130+0100 app[46152:172456] -[NSObject bounds]: unrecognized selector sent to instance 0x60000000a6f0
2019-02-26 14:11:04.246226+0100 app[46152:172456] Catch
2019-02-26 14:11:04.246242+0100 app[46152:172456] Finally
2019-02-26 14:11:04.246258+0100 app[46152:172456] Description again: <NSObject: 0x60000000a6f0> 
```

如您所见，异常仍记录到控制台，但代码执行仍在继续。

# javascript - 如何组织此功能以正常工作？

> ID：11132018
> 
> 赞同：1
> 
> 时间：2012-06-21T05:29:39.237
> 
> 标签：javascript, jquery, validation, date

我正在扩展我的插件[Ideal Forms](https://github.com/elclanrs/jq-idealforms)中的日期过滤器，以允许用户配置日期格式，即`dd/mm/yyyy`...`mm-dd-yyyy`这是我目前得到的：

```
 date: {
    regex: function (input, value) {
      var

      // Just grabbing some info from the plugin...
      data = input.userOptions.data
        ? input.userOptions.data.date
        : { format: 'mm/dd/yyyy' }, // default format

      separator = '\\' + /[^mdy]/.exec(data.format)[0], // extract separator
      userFormat = data.format.replace(/[^mdy]/g, ''), // convert to proper format

      isDate = function (m, d, y) {
        return m > 0 &&
          m < 13 &&
          y > 0 &&
          y < 32768 &&
          d > 0 &&
          d <= (new Date(y, m, 0)).getDate()
      },

      n2 = '(\\d{1,2})', // day and month
      n4 = '(\\d{4})', // year

      format = {
        'mmddyyyy': function () {
          var re = new RegExp(n2 + separator + n2 + separator + n4),
              m = re.exec(value)
          return m && isDate(m[1], m[2], m[3])
        },
        'ddmmyyyy': function () {
          var re = new RegExp(n2 + separator + n2 + separator + n4),
              m = re.exec(value)
          return m && isDate(m[2], m[1], m[3])
        },
        'yyyymmdd': function () {
          var re = new RegExp(n4 + separator + n2 + separator + n2),
              m = re.exec(value)
          return m && isDate(m[2], m[3], m[1])
        },
        'yyyyddmm': function () {
          var re = new RegExp(n4 + separator + n2 + separator + n2),
              m = re.exec(value)
          return m && isDate(m[3], m[2], m[1])
        }
      }

      return format[userFormat]() || format['mmddyyyy']()
    }, 
```

当使用默认`mm/dd/yyyy`问题以外的格式时，因为该函数`isDate`测试从月份值开始的日期，所以当我传递自定义格式时`dd-mm-yyyy`，调用`isDate(m[2], m[1], m[3])`有效，但它也会验证值`12-13-1986`但不是`13-13-1986`。

我怎样才能开始解决这个问题？有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T05:56:23.220

**编辑**

我也想谈谈您对 . 的回归的评论`isDate`。该函数按预期运行，问题出在其他地方。我没有剖析你的代码足以说明错误在哪里，但`isDate`它是正确的：http: [//jsfiddle.net/nQMYe/](http://jsfiddle.net/nQMYe/)

* * *

**原始答案**

我对这里的片段变体很幸运：http: [//joey.mazzarelli.com/2008/11/25/easy-date-parsing-with-javascript/](http://joey.mazzarelli.com/2008/11/25/easy-date-parsing-with-javascript/)

基本上，它`fromString`在 Date 对象中实现了一个方法。我不喜欢这种方法，所以我将我的实现修改为作为一个函数独立运行，并消除了一些不必要的位。也就是说，它工作得很好。

基本思想是首先对输入进行归一化。由于您永远不知道用户是否给了您类似`1.11.2011`or的格式`3~12~2012`，所以第一件事就是去除噪音：

```
data = data.replace(/[^:a-z0-9]/g, '-'); 
```

我们将丢弃所有非字母数字字符并放入 a `-`，您似乎更喜欢`/`- 无论如何，只需让输入保持一致。我们保留 alpha，以便我们也可以处理`March 18, 2012`。

该片段然后解析输入，提取时间（如果给出，使用 : 来识别），然后它建立一个年份。正如评论中所指出的，日期和月份以最合理的格式彼此相邻，因此您希望确定什么不是年份并从那里开始。然后是一个排除过程来确定月份，然后是日期。

不是我的代码，所以我并不是要赞扬这个想法，但同样，事情就像宣传的那样交付。您可以按原样使用它（BSD 许可证），也可以通读源代码并剖析概念。

下面是代码，供后人参考：

```
/**
 * @author Joey Mazzarelli
 * @website http://bitbucket.org/mazzarelli/js-date/
 * @website http://joey.mazzarelli.com/2008/11/25/easy-date-parsing-with-javascript/
 * @copyright Joey Mazzarelli
 * @license BSD license
 */

Date.fromString = (function () {

  var defaults = {
    order : 'MDY',
    strict : false
  };

  var months = ["JAN", "FEB", "MAR", "APR", "MAY", "JUN", "JUL", "AUG",
      "SEP", "OCT", "NOV", "DEC"];

  var abs = ["AM", "PM", "AFTERNOON", "MORNING"];

  var mark = function (str, val) {
    var lval = val.toLowerCase();
    var regex = new RegExp('^' + lval + '|(.*[^:alpha:])' + lval, 'g');
    return str.replace(regex, '$1' + val);
  };

  var normalize = function (str) {
    str = str.toLowerCase();
    str = str.replace(/[^:a-z0-9]/g, '-');
    for (var i=0; i<months.length; i++) str = mark(str, months[i]);
    for (var i=0; i<abs.length; i++) str = mark(str, abs[i]);
    str = str.replace(/[a-z]/g, '');
    str = str.replace(/([0-9])([A-Z])/g, '$1-$2');
    str = ('-' + str + '-').replace(/-+/g, '-');
    return str;
  };

  var find_time = function (norm) {
    var obj = {date:norm, time:''};
    obj.time = norm.replace(
        /^.*-(\d\d?(:\d\d){1,2}(:\d\d\d)?(-(AM|PM))?)-.*$/, '$1');
    if (obj.time == obj.date)
      obj.time = norm.replace(/^.*-(\d\d?-(AM|PM))-.*$/, '$1');
    if (obj.time == obj.date) obj.time = '';
    obj.date = norm.replace(obj.time, '');
    obj.time = ('-' + obj.time + '-').replace(/-+/g, '-');
    obj.date = ('-' + obj.date + '-').replace(/-+/g, '-');
    return obj;
  };

  var find_year = function (norm) {
    var year = null;

    // Check for a 4-digit year
    year = norm.replace(/^.*-(\d\d\d\d)-.*$/, '$1');
    if (year != norm) return year; else year = null;

    // Check for a 2-digit year, over 32.
    year = norm.replace(/^.*-((3[2-9])|([4-9][0-9]))-.*$/, '$1');
    if (year != norm) return year; else year = null;

    // Day is always by month, so check for explicit months in 
    // first or third spot
    year = norm.replace(/^.*-[A-Z]{3}-\d\d?-(\d\d?)-.*$/, '$1');
    if (year != norm) return year; else year = null;
    year = norm.replace(/^.*-(\d\d?)-\d\d?-[A-Z]{3}-.*$/, '$1');
    if (year != norm) return year; else year = null;

    // If all else fails, use the setting for the position of the year.
    var pos = '$3';
    if (defaults.opts.order.charAt(0) == 'Y') pos = '$1';
    else if (defaults.opts.order.charAt(1) == 'Y') pos = '$2';
    year = norm.replace(/^.*-(\d\d?)-([A-Z]{3}|\d{1,2})-(\d\d?)-.*$/, pos);
    if (year != norm) return year; else year = null;

    return year;
  };

  var find_month = function (norm, year) {
    // Check for an explicity month
    var matches = norm.match(/[A-Z]{3}/);
    if (matches && matches.length) return matches[0];

    // Remove the year, and unless obviously wrong, use order
    // to chose which one to use for month.
    var parts = norm.replace(year + '-', '').split('-');
    if (parts.length != 4) return null;
    var order = defaults.opts.order;
    var md = order.indexOf('M') < order.indexOf('D')? 1: 2;
    return (parseInt(parts[md], 10) <= 12)? parts[md]: parts[md==1? 2: 1];
  };

  var find_day  = function (norm, year, month) {
    return norm.replace(year, '').replace(month, '').replace(/-/g, '');
  };

  var create_absolute = function (obj) {

    var time = obj.time.replace(/[-APM]/g, '');
    var parts = time.split(':');
    parts[1] = parts[1] || 0;
    parts[2] = parts[2] || 0;
    parts[3] = parts[3] || 0;
    var ihr = parseInt(parts[0], 10);
    if (obj.time.match(/-AM-/) && ihr == 12) parts[0] = 0;
    else if (obj.time.match(/-PM-/) && ihr < 12) parts[0] = ihr + 12;
    parts[0] = ("0" + parts[0]).substring(("0" + parts[0]).length - 2);
    parts[1] = ("0" + parts[1]).substring(("0" + parts[1]).length - 2);
    parts[2] = ("0" + parts[2]).substring(("0" + parts[2]).length - 2);
    time = parts[0] + ":" + parts[1] + ":" + parts[2];
    var millisecs = parts[3];

    var strict = defaults.opts.strict;
    if (!obj.year && !strict) obj.year = (new Date()).getFullYear();
    var year = parseInt(obj.year, 10);
    if (year < 100) {
      year += (year<70? 2000: 1900);
    }

    if (!obj.month && !strict) obj.month = (new Date()).getMonth() + 1;
    var month = String(obj.month);
    if (month.match(/[A-Z]{3}/)) {
      month = "JAN-FEB-MAR-APR-MAY-JUN-JUL-AUG-SEP-OCT-NOV-DEC-"
          .indexOf(month) / 4 + 1;
    }
    month = ("0" + month).substring(("0" + month).length - 2);
    if (!obj.day && !strict) obj.day = (new Date()).getDate();
    var day = ("0" + obj.day).substring(("0" + obj.day).length - 2);

    var date = new Date();
    date.setTime(Date.parse(year + '/' + month + '/' + day + ' ' + time));
    date.setMilliseconds(millisecs);
    return date;
  };

  var parse = function (norm) {
    return absolute(norm);
  };

  var absolute = function (norm) {
    var obj = find_time(norm);
    obj.norm = norm;
    obj.year = find_year(obj.date);
    obj.month = find_month(obj.date, obj.year);
    obj.day = find_day(obj.date, obj.year, obj.month);
    return create_absolute(obj);
  };

  return function (fuzz, opts) {
    defaults.opts = { order: defaults.order, strict: defaults.strict };
    if (opts && opts.order) defaults.opts.order = opts.order;
    if (opts && opts.strict != undefined) defaults.opts.strict = opts.strict;
    var date = parse(normalize(fuzz));
    return date;
  };

})(); 
```

# ruby-on-rails - Rails 3嵌套资源和关联（调用contact.note.create时user_id为零）

> ID：11132020
> 
> 赞同：0
> 
> 时间：2012-06-21T05:29:54.323
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord, associations

（我可能会为此想一个更好的标题并接受建议）

我试图在我的 NotesController 中调用它，在 rails 控制台中对其进行测试：

```
 ?> u = User.first
  User Load (1.6ms)  SELECT "users".* FROM "users" LIMIT 1
=> #<User id: 2, email: nil, password: nil, linkedin_url: nil, created_at: "2012-06-17 05:54:44", updated_at: "2012-06-17 05:54:44", liid: "7fB-pQGIQi">
>> c = u.contacts.first
  Contact Load (2.0ms)  SELECT "contacts".* FROM "contacts" WHERE "contacts"."user_id" = 2 LIMIT 1
=> #<Contact id: 8, user_id: 2, created_at: "2012-06-19 01:23:45", updated_at: "2012-06-19 01:23:45">
>> c.notes.create!(:body => "this is a note")
   (0.5ms)  BEGIN
  SQL (23.3ms)  INSERT INTO "notes" ("body", "contact_id", "created_at", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["body", "this is a note"], ["contact_id", 8], ["created_at", Thu, 21 Jun 2012 05:42:21 UTC +00:00], ["updated_at", Thu, 21 Jun 2012 05:42:21 UTC +00:00], ["user_id", nil]]
   (1.7ms)  COMMIT
=> #<Note id: 4, created_at: "2012-06-21 05:42:21", updated_at: "2012-06-21 05:42:21", body: "this is a note", user_id: nil, contact_id: 8> 
```

问题出在最后一行，它说创建的 Note 有一个“user_id: nil”。我想知道我错过了什么不允许便笺从联系人 user_id 正确获取 user_id？我可以想到一个快速解决方法，在便笺对象上设置 user_id，但似乎它可以从 contact_id 中获取它，我错了吗？

这是我的模型，以防万一这有帮助：

```
class Contact < ActiveRecord::Base
  attr_accessible :user_id

  belongs_to :user
  has_many :notes
end

class User < ActiveRecord::Base
  attr_accessible :password, :liid

  has_many :contacts
  has_many :notes, :through => :contacts
end

class Note < ActiveRecord::Base
  attr_accessible :title, :body

  belongs_to :contact
  belongs_to :user
end 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T05:33:40.863

您的笔记也需要属于您的用户：

```
class Note < ActiveRecord::Base
  attr_accessible :title, :body

  belongs_to :contact
  belongs_to :user
end 
```

Rails 只会自动设置父对象的 foreign_key，而不是你想要的父对象的父对象。因此，您必须手动设置该属性：

```
c.notes.create!(:body => "this is a note", :user_id => c.user_id) 
```

# oracle - 更改 Oracle Apex 数字格式的货币符号

> ID：11132028
> 
> 赞同：0
> 
> 时间：2012-06-21T05:30:32.607
> 
> 标签：oracle, oracle11g, oracle-apex, currency-formatting

当我`FML999G999G999G999G990D00`在 Oracle Apex 中用作我的数字格式掩码时，它显示值为`$800.00`. 我需要`$`用另一个货币符号替换。

我怎么能这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T07:55:46.413

您需要修改会话参数[NLS_CURRENCY](http://docs.oracle.com/cd/E11882_01/server.112/e25513/initparams143.htm#REFRN10118)以更改货币：

```
SQL> ALTER SESSION SET NLS_CURRENCY='EUR';

Session altered.

SQL> SELECT to_char(800, 'FML999G999G999G999G990D00') FROM dual;

TO_CHAR(800,'FML999G999G999G999G9
---------------------------------
EUR800,00 
```

或使用[DBMS_SESSION](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/d_sessio.htm#i1010906)：

```
SQL> BEGIN dbms_session.set_nls('NLS_CURRENCY', 'GBP'); END;
  2  /

PL/SQL procedure successfully completed.

SQL> SELECT to_char(800, 'FML999G999G999G999G990D00') FROM dual;

TO_CHAR(800,'FML999G999G999G999G9
---------------------------------
GBP800,00 
```

您还可以使用以下命令直接指定货币[`TO_CHAR`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions201.htm#SQLRF06130)：

```
SQL> SELECT to_char(800, 'FML999G990D00', 'NLS_CURRENCY=''£''') FROM dual;

TO_CHAR(800,'FML999G9
---------------------
£800,00 
```

# c# - 集成2个windows形式开发的独立项目

> ID：11132034
> 
> 赞同：0
> 
> 时间：2012-06-21T05:30:52.297
> 
> 标签：c#, sql-server, winforms

我有一个独立的酒店管理项目和一个独立的 Windows 形式的餐厅项目。现在我想整合这两个项目。和餐厅在酒店充当客房服务，请帮助提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T05:35:29.580

就像一个快速而肮脏的解决方案：

*   编译你的 Restorant 项目，如`dll`
*   确保它公开了酒店项目交互所需的所有类型
*   将其添加`dll`到酒店项目

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T05:46:28.563

您可以使用 Visual Studio 将一个项目添加到另一个项目 --> 在解决方案资源管理器中添加项目。并确保两个项目的名称空间相同，以便将两者集成。

在**解决方案资源管理器中->右键单击并单击添加->现有项目->找到您的项目并添加。**

使两个项目的名称空间相同。

试试看..

# html - 具有相同类的两个元素在 Firefox 中看起来不同

> ID：11132037
> 
> 赞同：5
> 
> 时间：2012-06-21T05:31:12.843
> 
> 标签：html, css, firefox

我有两个`<hr>`s 都具有完全相同的类，并且两者都没有其他属性，这在 Chrome 等中看起来相同。但是在 Firefox 中，由于某种原因，页面底部的那个看起来很正常，但那个在顶部是两倍厚。

有任何想法吗？如果他们能更好地创建一条 2.5 像素高的黑线，我也愿意接受其他建议。

问题出在[http://www.duncannz.com](http://www.duncannz.com)的每一页- 顶部的黑线在 Firefox 中看起来太粗，但底部的黑线很好。这两行在其他所有浏览器中都很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T05:44:06.067

尝试添加`height: 2px;`它不能是2.5px；

如果要以小数形式定义值，请尝试使用`2.5em`. 您不能将小数与像素一起使用。小数在ems上很好

# asp.net-mvc-3 - 带有 RadioButton 的 WebGrid MVC 3 被选中

> ID：11132039
> 
> 赞同：1
> 
> 时间：2012-06-21T05:31:16.777
> 
> 标签：asp.net-mvc-3, webgrid

如何使 WebGrid 显示在图片中并使用 rariobutton 获取选定的行

![在此处输入图像描述](../Images/eba4eb65151642b9ea29f3ec445138d5.png)

祝福

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T06:14:01.357

尝试这个

```
 myGrid.Column(header: "Select", format: @<text><input name="chck" 
  TYPE="RADIO" CHECKED="@item.select" /></text>), 
```

还要检查这个链接[http://fiddle.jshell.net/Gt4GH/](http://fiddle.jshell.net/Gt4GH/)

这不是编译代码，试试这个，让我知道它是否有效:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T06:20:59.260

您可以定义视图模型：

```
public class UserViewModel
{
    public int Id { get; set; }
    public string Email { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
}

public class MyViewModel
{
    public int? SelectedUserId { get; set; }
    public IEnumerable<UserViewModel> Users { get; set; }
} 
```

然后是控制器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        var users = Enumerable.Range(1, 5).Select(x => new UserViewModel
        {
            Id = x,
            Email = "email " + x,
            FirstName = "fn " + x,
            LastName = "ln " + x,
        });
        var model = new MyViewModel
        {
            Users = users
        };
        return View(model);
    }

    [HttpPost]
    public ActionResult Index(int? selectedUserId)
    {
        return Content(string.Format("Thank you for selecting user id: {0}", selectedUserId));
    }
} 
```

最后是一个观点：

```
@model MyViewModel

@{
    var grid = new WebGrid(Model.Users);
}

@using (Html.BeginForm())
{
    @grid.GetHtml(
        columns: grid.Columns(
            grid.Column(
                header: "Select", 
                format: @<text>@Html.RadioButtonFor(x => x.SelectedUserId, (int)item.Id)</text>
            ),
            grid.Column("Email"),
            grid.Column("FirstName", "First Name"),
            grid.Column("LastName", "Last Name")
        )
    )
    <button type="submit">OK</button>
} 
```

# android - Android - 如何让键盘出现在 EditText 上

> ID：11132041
> 
> 赞同：0
> 
> 时间：2012-06-21T05:31:30.630
> 
> 标签：android, android-softkeyboard, android-ui

我有一个视图，`editText`但键盘没有出现。经过大量研究，我能找到的唯一合适的事情是如何在第一次加载视图时显示键盘。但是，如果用户关闭键盘，似乎无法将其取回。

`editText`每次用户输入该字段时，如何使键盘出现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T05:34:48.703

已经讨论过很多次了。

使用以下代码段。

```
InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
imm.hideSoftInputFromWindow(myEditText.getWindowToken(), 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T05:36:17.687

每当您在 EditText 框中单击以键入文本时，android 键盘就会自动打开。

# android - 如何通过按钮单击添加和删除线性布局

> ID：11132045
> 
> 赞同：1
> 
> 时间：2012-06-21T05:31:44.293
> 
> 标签：android, android-linearlayout

我正在尝试使用两个按钮来动态添加和删除线性布局。

```
 protected void createT () {
    // -----------------------------------------------
    count++;
    LinearLayout temp_ll, frame;
    frame = new LinearLayout(this);
    frame.setOrientation(LinearLayout.VERTICAL);
    frame.setId(count);
    EditText temp1, temp2;

    for (int i=0; i<numClass; i++) {

        temp_ll = new LinearLayout(this);
        temp_ll.setOrientation(LinearLayout.HORIZONTAL);

        temp1 = new EditText(this);
        temp2 = new EditText(this);
        temp2.setInputType(InputType.TYPE_CLASS_NUMBER | InputType.TYPE_NUMBER_FLAG_DECIMAL);
        temp1.setHint("class name");
        temp2.setHint("grade");

        temp_ll.addView(temp1);
        temp_ll.addView(temp2);
        frame.addView(temp_ll);
    }

    ll.addView(frame);
}

protected void deleteT() {
    // --------------------------------------
    if (count > 0) {
                    LinearLayout temp = new LinearLyout(this);
        temp = (LinearLayout) findViewById(count);
        temp.removeAllViews();
        temp.setVisibility(View.GONE);
        count--;
    }
} 
```

*   每次我按下**添加**按钮时，它都会调用`createT()`
*   每次我按下**del**按钮时，它都会调用`deleteT()`

问题是我正在使用**计数**变量来跟踪`linearLayout`ID。
第一次按**x次****添加**按钮，然后按**del**按钮，一切都很好。

 ****问题是按第二次**添加**后。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T06:35:27.840

我检查了您的代码，发现 deleteT() 方法内部有一个小错误，您删除了 LinearLayout 中的所有视图，但您没有从根布局中删除实际布局。

还有一个建议，当你想使用 findviewbyid 方法时不需要新的 LinearLayout 实例，并使用 ll.removeView(View) 方法删除动态 LinearLayout 容器。

这是代码：

```
private int count;
private LinearLayout ll;
private final int numClass = 1;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    ll = (LinearLayout) findViewById(R.id.main_linearlayout);
}

public void createT(View view) {
    count++;
    final LinearLayout frame = new LinearLayout(this);
    frame.setOrientation(LinearLayout.VERTICAL);
    frame.setId(count);

    for (int i = 0; i < numClass; i++) {
        final LinearLayout temp_ll = new LinearLayout(this);

        final EditText temp1;
        final EditText temp2;
        temp_ll.setOrientation(LinearLayout.HORIZONTAL);

        temp1 = new EditText(this);
        temp2 = new EditText(this);
        temp2.setInputType(InputType.TYPE_CLASS_NUMBER | InputType.TYPE_NUMBER_FLAG_DECIMAL);
        temp1.setHint("class name");
        temp2.setHint("grade");

        temp_ll.addView(temp1);
        temp_ll.addView(temp2);
        frame.addView(temp_ll);
    }
    ll.addView(frame);

}

public void deleteT(View view) {
    if (count > 0) {
        final LinearLayout temp = (LinearLayout) ll.findViewById(count);
        temp.removeAllViews();
        ll.removeView(temp);
        count--;
    }
} 
```

和布局xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
    android:id="@+id/main_linearlayout"
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent">

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="add"
        android:onClick="createT" />

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="delete"
        android:onClick="deleteT" />

</LinearLayout> 
```

我希望它有帮助！****

# android - 如何使用 StateListDrawable 将图像设置为按钮的背景（动态或编程或通过代码）

> ID：11132047
> 
> 赞同：1
> 
> 时间：2012-06-21T05:31:48.003
> 
> 标签：android, android-layout

这是我的代码：

```
public void setHoverEffect(final Button button,int normalImageId, int hoverImageId) {
        if (button != null) 
        {
            StateListDrawable stateListDrawable = new StateListDrawable();
            stateListDrawable.addState(new int[]{ }, getResources().getDrawable(normalImageId));
            stateListDrawable.addState(new int[]{android.R.attr.state_pressed}, getResources().getDrawable(hoverImageId));
            button.setBackgroundDrawable(stateListDrawable);
        }
} 
```

当我使用上面的代码时，只有普通图像显示为背景，当我按下按钮时，它不显示悬停图像。

当我使用`selector.xml`如下所示的文件并将其设置为背景时，它工作正常。

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true" android:drawable="@drawable/btn_ok_h"> </item>
    <item android:drawable="@drawable/btn_ok"> </item>
</selector> 
```

我想动态地执行此操作，以避免为我的应用程序中的每个按钮创建选择器 xml 文件。我无法弄清楚我的代码在哪里出错或我必须在哪里指定额外的属性...... :(

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T06:02:45.683

@KK你做对了一些错误

看我的代码

```
public void selector(Button b,int pressed_image,int normal_image )
    {
        StateListDrawable states = new StateListDrawable();
        states.addState(new int[] { android.R.attr.state_pressed }, getResources().getDrawable(pressed_image));
        states.addState(new int[] {}, getResources().getDrawable(normal_image));
        b.setBackgroundDrawable(states);
    } 
```

您可以说此代码与您的代码相同，但存在一些差异。我`states.addState(new int[] { android.R.attr.state_pressed }, getResources().getDrawable(pressed_image));`之前写过一行`states.addState(new int[] {}, getResources().getDrawable(normal_image));`

首先尝试这段代码，我已经测试了这段代码4-5次，然后在这里发布。我真的不知道为什么更改行代码可以正常工作。

# mysql - MySQL查询排序在两个字段中具有相同的值

> ID：11132049
> 
> 赞同：0
> 
> 时间：2012-06-21T05:32:16.847
> 
> 标签：mysql

```
SELECT
  t1.f1 AS val1,
  SUM(t2.f1) AS val2
FROM t2
INNER JOIN t1 ON t2.f2 = t1.f2
GROUP BY t1.f2 
```

结果：

```
va1    val2  
25      8         
10      10
25      25
10      1 
```

并希望有一种方法可以从两个字段中对相同的值进行排序，使用 MySQL 查询，数据格式如下：

```
va1    val2       
10      10
25      25 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T05:36:52.593

扩展您的查询

```
HAVING t1.f1=SUM(t2.f1)
ORDER BY t1.f1 
```

# java - derby 10.7 内存中的驱动程序名称

> ID：11132051
> 
> 赞同：0
> 
> 时间：2012-06-21T05:32:45.310
> 
> 标签：java, jdbc, derby, in-memory-database

任何人都可以在内存模式下告诉 derby 10.7 的驱动程序名称吗？我们在以下内存中使用：

```
org.apache.derby.jdbc.EmbeddedDriver 
```

以下是基于文件系统的（对于以前的 derby 版本）：

```
org.apache.derby.jdbc.ClientDriver 
```

我发现对于 10.7 ，基于文件系统的驱动程序名称应该是：

```
org.hibernate.dialect.DerbyTenSevenDialect 
```

那么内存驱动程序名称有什么变化吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T13:53:05.710

如果内存数据库暴露于网络，您可以通过嵌入式驱动程序或网络驱动程序访问内存数据库。不过，您必须正确指定 JDBC 连接 URL。

[http://db.apache.org/derby/docs/10.11/devguide/cdevdvlpinmemdb.html](http://db.apache.org/derby/docs/10.11/devguide/cdevdvlpinmemdb.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T13:47:20.023

我不明白你的术语。Derby 有两种不同的运行环境：嵌入式和客户端/服务器。见：[http ://db.apache.org/derby/docs/10.8/getstart/cgsquck70629.html](http://db.apache.org/derby/docs/10.8/getstart/cgsquck70629.html)

您拥有的 JDBC 驱动程序名称（EmbeddedDriver 和 ClientDriver）是正确的。[http://db.apache.org/derby/docs/10.8/getstart/rgsquck35368.html](http://db.apache.org/derby/docs/10.8/getstart/rgsquck35368.html)

看起来您在应用程序中包含了 Hibernate，因为 DerbyTenSevenDialect 是 Hibernate 类，而不是 Derby 类。您需要咨询 Hibernate 社区和文档以获取 Hibernate 信息。

# php - 如何使用 sqlite3 支持编译 php

> ID：11132052
> 
> 赞同：0
> 
> 时间：2012-06-21T05:32:47.617
> 
> 标签：php, linux, sqlite, php-extension

我想用自定义编译选项编译 php sqlite3。为此，我遵循以下步骤

1.  wget [http://be.php.net/distributions/php-5.3.10.tar.gz](http://be.php.net/distributions/php-5.3.10.tar.gz)
2.  焦油 -xvf php-5.3.10.tar.gz
3.  cd php-5.3.10/ext/sqlite3
4.  运行 phpize

但我收到错误：

```
Cannot find config.m4\. 
Make sure that you run '/usr/bin/phpize' in the top level source directory of the module 
```

我怎么解决这个问题 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T16:50:17.373

似乎已经报告了错误 [https://bugs.php.net/bug.php?id=53571&edit=1](https://bugs.php.net/bug.php?id=53571&edit=1)。

# qt4 - 单击按钮和 lineedit 后显示帮助文本

> ID：11132053
> 
> 赞同：0
> 
> 时间：2012-06-21T05:32:51.250
> 
> 标签：qt4

我有一个按钮和一个 lineedit，我想要的是，当我单击那个按钮或 lineedit 时，一个帮助文本（该组件的用途）将显示在相应的组件旁边。请尽快回复，我急需..提前谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T08:15:50.000

```
connect(ui->pushButton,SIGNAL(pressed()),this,SLOT(YourPrivateSlot()));

void YourPrivateSlot()
{
QPalette palette(QColor(0,0,0,0));
QToolTip::setPalette(palette);
QToolTip::showText(QPoint(Parentwidgetofpushbutton->x() + pushButton->x(),
Parentwidgetofpushbutton->y() + pushButton->y()) ,"Your Message" ,
pushButton,QRect(20,20,50,50));
} 
```

当按下按钮时，这将在按钮上方显示一个文本气球，黄色背景上的文本颜色为黑色（默认情况下）。您可以通过相应地更改位置来调整气球的位置。

# php - 理解 MySQL 数据库中的序列化数据

> ID：11132054
> 
> 赞同：0
> 
> 时间：2012-06-21T05:33:02.197
> 
> 标签：php, mysql, wordpress, serialization

我正在开发我购买的自定义 WordPress 主题，并且 SQL 转储文件刚刚加载了序列化数据。该网站的每一个小方面都是这种格式。有没有一种简单的方法来解决这个问题？使用现在如此普遍使用的这种方法是否有一些方便？

考虑到许多 HTML 元素都以这种格式存储在数据库中，理想情况下您将如何访问页面内容并以不那么抽象的方式对其进行编辑？谢谢。

# ms-access - Microsoft Office Access 数据库引擎找不到对象

> ID：11132055
> 
> 赞同：5
> 
> 时间：2012-06-21T05:33:04.400
> 
> 标签：ms-access, ms-access-2007, vba

我创建了一个测试 MS Access DB 来将一个表导出到 Excel 和一个文本文件。

这适用于 Excel：

```
DoCmd.OutputTo acOutputQuery, "QryExportToExcel", _
acFormatXLS, XFile, False 
```

对于文本文件，我创建了一个规范并使用了这段代码

```
DoCmd.TransferText acExportDelim, "Mytable Import Specification", "mytable", "D:\myfolder\test1.txt", False 
```

在错误消息中，我得到**"test1#txt"**。

> Microsoft Office Access 数据库引擎找不到对象
> “test1#txt”。确保对象存在并且
> 正确拼写其名称和路径名。

![我得到的错误](../Images/2a3afcc2bb63d9434a8e05b36123ea57.png)

我尝试在同一路径中创建 test1.txt。令我惊讶的是，这删除了已经存在的文件。

软件：MS ACCESS 2007

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:21:28.750

> Microsoft Office Access 数据库引擎找不到对象“test1#txt”。确保对象存在并且正确拼写其名称和路径名。

这是一个通用的（而且相当无用的）错误消息，Access 会在出现*任何*问题时输出。一个示例是导入/导出规范中拼写错误的字段名称。

您可以通过在 Access 用户界面中“手动”尝试导入操作（而不是通过代码）来获取“真实”错误消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-06T17:58:23.767

问题作者报告的问题是*“因为我正在使用导入规范来导出文件”。*

他们通过使用导出规范解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T18:18:40.630

因为您正在执行 DoCmd.TransferText，所以 Access 期望文件 Test1.txt 存在于该位置。尝试先创建文件，然后传输文本。

您可以在导出之前尝试此代码以创建文件：

```
Public Sub CreateExportFile()
 Dim strFileName As String
 Dim SomeStringToOutput

 strFileName = "d:\myfolder\test1.txt"
 Open strFileName For Output As #1

End Sub 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-21T20:02:45.220

我遇到了类似的情况，发现文件*schema.ini*在目标文件夹中。这是在之前执行 acExportMerge 时创建的，它会导致此错误。确保在执行新的 TransferText 之前已删除该文件。

# facebook-graph-api - 您如何从 Windows 手机移动应用程序在用户的时间轴上发布照片？

> ID：11132057
> 
> 赞同：1
> 
> 时间：2012-06-21T05:33:08.303
> 
> 标签：facebook-graph-api, windows-phone-7.1, photos

我正在尝试将我的 Windows 7.1 移动应用程序中的照片发布到用户的时间轴中。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T05:56:14.347

您可以查看现在支持 Windows Phone的[Facebook C# SDK 。](http://csharpsdk.org/)我认为在时间轴上看到一张照片就足够了。如果您过去指的是信息，我相信当前的 Api 是不可能的。

照片上传工作示例代码

[http://igrali.com/2012/06/07/share-photos-on-facebook-from-windows-phone-app/](http://igrali.com/2012/06/07/share-photos-on-facebook-from-windows-phone-app/) [http://facebooksdk.blogspot.com/2011/04/facebook-album.html](http://facebooksdk.blogspot.com/2011/04/facebook-album.html)

带有额外讨论和示例的有趣线程

[http://facebooksdk.codeplex.com/discussions/258497](http://facebooksdk.codeplex.com/discussions/258497)

# python - 除了 Apache 网络服务器之外，还有其他开源网络服务器可用于网络应用程序开发吗？

> ID：11132059
> 
> 赞同：0
> 
> 时间：2012-06-21T05:33:16.197
> 
> 标签：python, apache, web-applications, webserver

除了 Apache Web 服务器，还有其他可用于 Web 应用程序开发的开源 Web 服务器吗？

我正在寻找一个开发 python web 应用程序的 web 服务器并对其进行部署和测试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T06:11:23.213

`Apart from Apache web server is there any open source web servers available for web application development?`您是在寻找`HTTP`服务器还是 Web 框架，两者完全不同。

HTTP 服务器只是在其他任务中发送/接收请求，是的，您可以通过最常见的方式使用 PHP 和其他工具，`CGI`或者`FCGI`从根本上说，`HTTP`服务器只是接受 HTTP 请求，如果某些内容来自底层框架，则它可能是动态的。

Web 框架是用于生成动态内容或 Web 应用程序的工具的集合，许多框架都带有内置`http`服务器，因此您不必自己配置一个，但它们没有那么强大或健壮，因为底层框架倾向于专注于生成内容。

`nginx`是我最喜欢`HTTP`的服务器之一，在众多服务器中，因为它往往是更容易配置的服务器之一。

至于 web 框架，有很多，在 python 社区中（给出`python`标签）`django`往往非常流行，因为它往往包含部署 web 应用程序所需的几乎所有工具，包括 url dispatchig，数据库引擎+`ORM` `Object Relational Mapper`和它自己的`templating`引擎以`html`自己有限的语言进行动态渲染，从渲染阶段尽可能地去除逻辑。

通常`django`应用程序部署在 nginx 后面，以控制服务器上的多个站点实例，以及提供静态内容，Web 框架并不擅长。

还有类似的微网络框架`bottle`，基本上是一个单一的python文件，它很酷，我通常`sqlalchemy`在`ORM`构建简单的`bottle`应用程序时使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T05:35:45.197

我使用[Nginx](http://wiki.nginx.org/Main)来部署我的 Python 应用程序。它是开源的，静态内容非常快，对我来说效果很好。

从网站：

> Nginx 是一个免费、开源、高性能的 HTTP 服务器和反向代理，以及 IMAP/POP3 代理服务器。Igor Sysoev 于 2002 年开始开发 Nginx，并于 2004 年首次公开发布。Nginx 现在托管了所有域中近 12.18% (22.2M) 的活动站点。Nginx 以其高性能、稳定性、丰富的功能集、简单的配置和低资源消耗而著称。

我也知道[lighttpd](http://www.lighttpd.net/)和[Cherokee](http://www.cherokee-project.com/)支持 Python webapps。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T05:40:43.727

如果你只是简单地谷歌“开源网络服务器”，你会得到很多结果。

*   Nginx
*   轻量级
*   切诺基
*   学者
*   龙卷风

Nginx 可能是最好的选择。

# jquery-ui - jQuery-UI 对话框：如何使无操作按钮“默认”

> ID：11132061
> 
> 赞同：0
> 
> 时间：2012-06-21T05:33:31.750
> 
> 标签：jquery-ui, dialog, modal-dialog

在 jQuery-UI 对话框中，第一个按钮似乎是默认按钮，因此将焦点设置为自身。

但是，这会导致令人沮丧的效果，尤其是在 Safari 中。即使在 IE 中，您也会在按钮周围看到一个矩形选择标记。而且，不会看到*悬停效果。*

我怎样才能将**这些**按钮中的任何一个设置**为默认值**，因此**没有将焦点设置在其中任何一个上**？

编辑：

示例可以在[jqueryui 演示页面](http://jqueryui.com/dialog/#modal-confirmation)上看到，下面是使用 Safari 的快照。

![这些页面的快照](../Images/edfee25b36f8311f3c732c98a982c49e.png)

我想摆脱这个蓝色的选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T23:56:22.307

我认为它可能是一个 css 类，它将按钮变为“默认”。

使用 Firebug 元素检查器检查这些按钮应用了哪些类，并将标准 css 类附加到表单的所有按钮。

# mysql - DATETIME 列上的 MySQL 加入/比较（<5.6.4 和 > 5.6.4）

> ID：11132067
> 
> 赞同：8
> 
> 时间：2012-06-21T05:34:10.090
> 
> 标签：mysql, datetime, time-precision

假设我有两个这样的表：

```
Events
ID (PK int autoInc), Time (datetime), Caption (varchar)

Position
ID (PK int autoinc), Time (datetime), Easting (float), Northing (float) 
```

例如，如果我使用该`Time`字段作为我的加入条件，列出所有事件及其位置是否安全？IE：

```
SELECT E.*,P.* FROM Events E JOIN Position P ON E.Time = P.Time 
```

或者，甚至只是简单地比较一个日期时间值（考虑到参数化值可能包含小数秒部分 - MySQL 一直接受）例如

```
SELECT E.* FROM Events E WHERE E.Time = @Time 
```

* * *

我了解 MySQL（5.6.4 版之前）只存储没有毫秒的日期时间字段。所以我会假设这个查询可以正常工作。但是，从 5.6.4 版开始，我已经阅读 MySQL 现在可以使用 datetime 字段存储毫秒数。

假设使用诸如 的函数插入日期时间值`NOW()`，毫秒会被截断（<5.6.4），我认为这允许上述查询工作。但是，对于 5.6.4 及更高版本，这可能无法正常工作。**我是，而且永远只会对第二精度感兴趣。**

如果有人能回答以下问题，将不胜感激：

1.  一般来说，MySQL 如何将日期时间字段相互比较（考虑上面的查询）。
2.  上述查询是否正常，是否使用时间字段上的索引？*(MySQL < 5.6.4)*
3.  有没有办法排除毫秒？即在插入和条件连接/选择等时？*(MySQL > 5.6.4)*
4.  上面的连接查询会起作用吗？*(MySQL > 5.6.4)*

* * *

**编辑**

我知道我可以转换日期时间，感谢那些回答的人，但我正在尝试解决问题的根源（存储类型/定义已更改的事实）并且我不想在我的查询。这否定了我所有优化查询应用索引等的工作，更不用说必须重写我的所有查询。

**编辑2**

`DATETIME`那里的任何人都可以提出不使用第二精度加入某个领域的理由吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T07:33:28.880

似乎 MySQL 开发人员不想破坏向后兼容性，因此要使用毫秒，您必须明确更改表、sql 等以使用此功能：

[http://dev.mysql.com/doc/refman/5.6/en/date-and-time-functions.html#function_now](http://dev.mysql.com/doc/refman/5.6/en/date-and-time-functions.html#function_now)

> 现在（[fsp]）
> 
> 从 MySQL 5.6.4 开始，如果给出 fsp 参数以指定从 0 到 6 的小数秒精度，则返回值包括那么多数字的小数秒部分。在 5.6.4 之前，任何参数都会被忽略。

[http://dev.mysql.com/doc/refman/5.6/en/fractional-seconds.html](http://dev.mysql.com/doc/refman/5.6/en/fractional-seconds.html)

> MySQL 5.6.4 及更高版本扩展了对 TIME、DATETIME 和 TIMESTAMP 值的小数秒支持，精度高达微秒（6 位）：
> 
> 要定义包含小数秒部分的列，请使用语法 type_name(fsp)，其中 type_name 是 TIME、DATETIME 或 TIMESTAMP，fsp 是小数秒精度。例如：

```
CREATE TABLE t1 (t TIME(3), dt DATETIME(6)); The fsp value, if given, must be in the range 0 to 6\. A value of 0 signifies that there is no fractional part. If omitted, the default precision is 0\. (This differs from the standard SQL default of 6, for compatibility with previous MySQL versions.) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T06:22:50.477

试试这个查询。对于问题 3 和 4，这将正常工作。使用时间字段进行连接仍然不是一个好习惯

```
SELECT E.*,P.* FROM Events E JOIN Position P ON date(E.Time) = date(P.Time) 
```

虽然我给了你一个解决方案，但你将被限制在不同的表中插入相同的时间。然后您将能够进行比较，但这非常困难，因为您不能同时运行两个插入查询。所以你必须为此做一些菜单工作。如果您想阅读更多内容，请阅读这篇文章。

[http://billauer.co.il/blog/2009/03/mysql-datetime-epoch-unix-time/](http://billauer.co.il/blog/2009/03/mysql-datetime-epoch-unix-time/)

# jquery - 来自带有 cookie 的平面 HTML 文件的 CORS Ajax 请求

> ID：11132071
> 
> 赞同：2
> 
> 时间：2012-06-21T05:34:41.657
> 
> 标签：jquery, ajax, json, cross-domain, cors

我正在尝试制作一个独立的 HTML 文件，该文件通过 CORS 向 RESTful JSON 服务发出跨域请求。

我的 jQuery ajax 请求：

```
var query = $.ajax(
{
    type: 'GET',
    url: 'http://localhost:8626/Home/About',
    contentType: 'application/json',
    dataType: 'json',
    success: function (response)
    {
        alert('success');
        alert(query.getAllResponseHeaders());
        alert($.cookie('SessionID'));
    },
    error: function (x, e)
    {
        alert('error ' + e);
    }
}); 
```

我在（ASP MVC3）服务器端设置了 Access-Control-etc 标头：

```
public ActionResult About()
{
    Response.AddHeader("Access-Control-Allow-Origin", "*");

    Response.AddHeader("Access-Control-Allow-Methods", "PUT, GET, POST, DELETE");

    Response.AddHeader("Access-Control-Allow-Headers", "Content-Type");

    Response.SetCookie(new HttpCookie("SessionID", "1234"));

    return Json(new { name = "John" }, JsonRequestBehavior.AllowGet);
} 
```

除了饼干，一切都很好。我正确地得到了我的响应 JSON 数据。

但我也从服务器发回了一个 cookie。它没有在标题中显示为 Set-Cookie，也没有显示在 cookie 集合中。我在[这里](https://stackoverflow.com/questions/8863571/cors-request-why-are-the-cookies-not-sent)读到，要在跨域请求中获取 cookie，您需要在 $.ajax 调用中设置以下内容：

```
xhrFields:
{
    withCredentials: true
}, 
```

当我添加这个时，调用不再有效，出现 JS 错误：

```
Cannot use wildcard in Access-Control-Allow-Origin when credentials flag is true. 
```

显然，它对我的​​ Access-Control-Allow-Origin 标头为“*”感到不满。

由于这是一个平面的、独立的 HTML 文件（来自磁盘，而不是 HTTP 服务器），Chrome 传递一个等于“null”的 Origin 标头。我似乎无法覆盖此值——当我添加自定义 Origin 标头时，Chrome 显然会忽略它。

如果我返回 Access-Control-Allow-Origin = "null"（与请求中的 Origin 标头值匹配），我会收到 JS 错误：

```
Origin null is not allowed by Access-Control-Allow-Origin. 
```

所以我不知道该怎么办。我无法使用通配符获取我的 cookie，并且允许“null”也不起作用。

这不可能吗？还是我错过了一步？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T17:30:53.487

您的服务器需要允许带有此标头的凭据。

访问控制允许凭据：true

[https://developer.mozilla.org/En/HTTP_access_control#Access-Control-Allow-Credentials](https://developer.mozilla.org/En/HTTP_access_control#Access-Control-Allow-Credentials)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T14:06:03.667

尝试将您的页面放在现场并通过网络访问它（您可以将其安装到本地 Web 服务器中）。

如果您只想在 Chrome 上测试它 - 有一个名为`--disable-web-security`.

此链接是关于如何使用参数启动 Chrome：http: [//www.chromium.org/developers/how-tos/run-chromium-with-flags](http://www.chromium.org/developers/how-tos/run-chromium-with-flags)。

# c# - 具有双精度命名列的表数据结构的最佳方法

> ID：11132073
> 
> 赞同：0
> 
> 时间：2012-06-21T05:34:53.593
> 
> 标签：c#, data-structures, thread-safety, c#-2.0

我正在寻找这样的数据结构：

```
position      whoCares    bla           ...
200.001890     -0.00110    -0.100000
199.997990     0.000790    -2.200000
199.952110     0.026330    -28.900000
199.780060     0.116370    -60.400000
199.321650     0.349330    -154.200000
198.242900     0.901430    -248.700000
196.447890     1.816030    -289.200000
...            ...         ... 
```

通过添加标签或向列添加新数据，表格可以在两个维度上增长。数据大小从 3-20 列到每列 100-10000 个 double 不等。

这应该定义为一个数据集作为一个类实例。数据访问应如下所示：

```
double[] Get(string tag)             // data.Get("position")
double Get(string tag, int index)    // data.Get("position", 17)
... 
```

到目前为止，这很容易，只需使用 a`Dictionary<string, double[]>`或`Dictionary<string, List<double>>`。

**现在这必须是线程安全的，并且应该具有良好的性能。但简单的数据访问比性能更重要。**

请注意，`double[] Get(...)`返回内部数据的副本，因为返回引用会在多线程场景中造成麻烦。通常会有一名作者和 1-3 名读者。

我尝试了几种方法，例如`Dictionary<string, double[]>`and `double[]`vs. `List<double>`。

最好的方法是什么？是否有其他使用 C# 2.0 的数据容器/结构？

* * *

编辑：

此类应充当由一个写入器线程填充的数据容器，该写入器线程从硬件读取所有数据。在应用程序运行时，UI 线程读取该数据只是为了绘制图表。

第二种情况是之前的编写器线程，但是 UI 线程被一个线程取代，该线程对该数据执行计算并将结果存储在第二个数据实例中，然后由 UI 显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T06:24:12.680

另一种方法是使用多维数组。这在性能上可能会更好。

```
object[] table = new object[2];
table[0] = new string[x]; // Tags
table[0][0] = "tag";  // Example for a tag, you may iterate it

object[] doubles = new object[x];
doubles[0] = new double[y]; // Example for a column, you may iterate it

table[3] = doubles; // Doubles table 
```

通过这种方式，您将在另一个数组中拥有两个数组。

注意 x = 列数和 y = 行数。

# c# - 将实体集合转换为实体集合未实现 IEnumerable 的 Ilist

> ID：11132075
> 
> 赞同：1
> 
> 时间：2012-06-21T05:34:59.330
> 
> 标签：c#, dynamics-crm

我有一个`Entity`这样的集合： **EntityCollection** users;

我想把它转换成`Ilist`这样的：

```
systemUsers = new List<CrmSdkTypeProxy.SystemUser>(); 
```

`CrmSdkTypeProxy.SystemUser`的类型在哪里`Entity`。但是，我的`Entity`Collection 是从其中一个`dll`未`Microsoft.Xrm.Sdk`实现的`IEnumerable`. 我正在使用`mscrm`2011 特定`dlls`的 .

关于如何创建这样的列表的任何想法：`.List<CrmSdkTypeProxy.SystemUser>`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T15:46:10.947

这对我有用。

实体是一个`DataCollection<Entity>`，您可以将其转换为一个`IEnumerable`，然后使用该`ToList`函数来创建与`IList`您需要的界面相匹配的列表。

```
return service.RetrieveMultiple(query)
                                .Entities
                                .Select(item => item.ToEntity<SystemUser>())
                                .ToList<SystemUser>(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T06:05:17.990

从我从[http://msdn.microsoft.com/en-us/library/microsoft.xrm.sdk.entitycollection_members.aspx](http://msdn.microsoft.com/en-us/library/microsoft.xrm.sdk.entitycollection_members.aspx)和我的头顶收集到的信息：

```
var myList = (from t in myEntityCollection.Entities select t as CRMSDKTypeProxy.SystemUser).ToList(); 
```

和无 linq：

```
var myList = new List<CRMSDKTypeProxy.SystemUser>(myEntityCollection.Entities); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T09:43:51.617

最后...遍历 DataCollection 并将单个值添加到 Ilist

# .net - MVVM 中的启动逻辑应该放在哪里？

> ID：11132076
> 
> 赞同：3
> 
> 时间：2012-06-21T05:35:00.300
> 
> 标签：.net, wpf, mvvm

我正在使用 MVVM 编写我的第一个 WPF 应用程序，我对视图模型的角色以及我应该在哪里放置应用程序启动时应该运行的代码感到困惑。

我的应用程序非常简单。它列出了来自远程位置的文件，然后用户可以从中选择以复制到他们自己的计算机上。当应用程序第一次启动时，它必须从配置文件中确定当前文件的来源，从源头读取当前文件，并在主窗口中将它们列出给用户。如果找不到配置的文件源，则会提示用户选择一个源。

这个逻辑应该放在 ViewModel 中吗？如果是这样，它应该进入视图模型的构造函数吗？这似乎不对，因为我不希望 ViewModel 读取配置文件，并在实例化时提示用户。

如果这是一个 WinForms 应用程序，我会在 Form.Load 或 Form.Shown 事件中执行此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T05:50:56.567

通常，主要数据加载代码可以保存在单独的视图模型函数中，例如`ViewModel.Initialize()`......更重要的是在后台线程上，因为它在执行时不会挂起 GUI，直到那一刻你可以在 GUI 上显示一个忙碌的服务员目标。

您可以让它`Command`为您的轻松驱动（例如 Relay/DelegateCommand 等`InitilizeCommand`），并且`Initialize()`方法可以是命令的`Execute`委托。

`Initialize()`可以根据您的方便调用...从 ViewModel 的构造函数开始，或使用附加行为处理`Window`/`UserControl.Load`事件并调度“ViewModel.Initialize()”函数，只要该函数在不同的后台线程上，我们很好。

如果您使用 的模式和实践`PRISM`，像这样的数据加载可以自动适合特定模块，作为 Prism 所代表的复合 GUI 整体设计的一部分。

一个好的 MVVM 教程在这里... [http://msdn.microsoft.com/en-us/library/gg405484%28v=pandp.40%29.aspx](http://msdn.microsoft.com/en-us/library/gg405484%28v=pandp.40%29.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T06:03:01.237

如果您有一个简单的应用程序并且已知启动时间不长，您可以使用 unity 引导您的应用程序。

做这一切的一切都显示在一个非常好的 MVVM 视频介绍中，可以在这里找到： [Jason Dollinger on MVVM](https://www.youtube.com/watch?v=BRxnZahCPFQ)

他在此视频中开发的源代码也可以使用： [模型-视图-视图模型视频的源代码](http://web.archive.org/web/20150912094855/http://blog.lab49.com/archives/2689)

除此之外，您的引导逻辑（读取配置，...）应该清楚地由视图模型控制。您仍然可以拥有一个 ConfigSource，它可以进行读取并且可以在后台线程中运行。

实现该 Source，您可以拥有一个接口，它可以轻松地将您的 ConfigSource 与从数据库或其他地方读取数据的接口交换。并且：您可以从统一中获得这样的实例，更多地从具体实现中解耦。您可以使用构造函数注入：

即 viewmodel 被引导 => 获得一个 ConfigReader 注入 => 调用 ConfigReader（在 BackgroundThread 上） => 视图被填充

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-21T08:54:33.603

最好不要在 ctor 中执行复杂的逻辑。如前所述，最好定义`Initialize()`方法（如果它是`IInitializable`接口的成员就更好了）。

如果您的应用程序非常简单并且没有计划对其进行太多扩展，您可以组合`Model`和`ViewModel`分层并在`ViewModel`. 但是如果您的应用程序足够复杂，`Model`则应通过构造函数将类注入到`ViewModel`. `Model`类包含所有逻辑，ViewModel 使用它们来执行操作和显示数据。

# android - 安装“Mono for Android”不会安装任何东西，没有任何错误报告

> ID：11132081
> 
> 赞同：0
> 
> 时间：2012-06-21T05:35:18.780
> 
> 标签：android, mono, installation, xamarin.android

我正在尝试在 Windows 7 Ultimate 64bit 上安装 Mono for Android。安装程序只是检查组件，然后告诉：“你准备好了”“看来您的系统已经设置为使用 Mono for Android！”。它不安装任何东西！

这些行在日志中找到：

```
[2012-06-21 05:17:43.229] [Info] Determining list of software items to install.
[2012-06-21 05:17:43.230] [Info] Component detection starting
[2012-06-21 05:17:43.230] [Debug] Processing update nodes from the manifest.
[2012-06-21 05:17:43.230] [Info] Waiting for detection to finish
[2012-06-21 05:17:43.231] [Info] Detection complete
[2012-06-21 05:17:43.231] [Info] Component detection complete
[2012-06-21 05:17:43.231] [Debug] Download service starting.
[2012-06-21 05:17:43.232] [Info] Component detection task completed successfully
[2012-06-21 05:17:43.232] [Debug] Creating and initializing software item 'Java JDK'
[2012-06-21 05:17:43.232] [Debug] Creating and initializing software item 'Android SDK'
[2012-06-21 05:17:43.233] [Debug] Creating and initializing software item 'GTK#'
[2012-06-21 05:17:43.233] [Debug] Creating and initializing software item 'MonoDevelop'
[2012-06-21 05:17:43.233] [Debug] Creating and initializing software item 'Mono for Android, VisualStudio and MonoDevelop'
[2012-06-21 05:17:43.334] [Debug] Detection completed.
[2012-06-21 05:17:43.335] [Info] No software needs to be installed.
[2012-06-21 05:17:43.335] [Info] Status: successful 
```

我的机器上没有安装某些组件（如“Android SDK”），为什么它说“无需安装软件”？我是否需要自己安装所有 SDK（与“http://docs.xamarin.com/android/getting_started/installation/Installation_for_Windows”有什么不同）？有什么想法有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T13:32:17.917

似乎是安装程序问题。从网上获取 mono-android-4.6.07004.msi 并将其复制到 C:\Users\*username*\AppData\Local\Temp\MonoForAndroid\downloads。从那里运行提到的 .msi 文件。完成后，再次运行 Xamarin 安装。Xamarin 安装程序需要一些时间才能完成。这应该有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T13:37:18.817

这是他们正在处理的一个已知问题，似乎发生在 Windows 7 64 位系统上。您可以在[此处查看错误报告](https://bugzilla.xamarin.com/show_bug.cgi?id=5695)。根据该错误，听起来运行安装程序几次可能有助于完成它。如果您有更多信息可能有助于他们重现/解决问题，我绝对建议将其记录在错误中。

# wpf - How to set DataContext of a UserControl inside a DataGrid.DataGridTemplateColumn?

> ID：11132085
> 
> 赞同：2
> 
> 时间：2012-06-21T05:35:40.673
> 
> 标签：wpf, mvvm, user-controls, wpfdatagrid, datacontext

I want to set datacontext of a usercontrol inside a DataGridTemplateColumn, but it dosen't work,here's the code:

```
<DataGrid AutoGenerateColumns="False" ItemsSource="{Binding RequesterPeoples}">
<DataGrid.Columns>
    <DataGridTemplateColumn  Header="name" Width="200">
        <DataGridTemplateColumn.CellTemplate>
            <DataTemplate>
                <MvvmCommonControl:CustomDataGridSelectorControl DataContext="{Binding DataContext.RequesterPeoplesDataContext,ElementName=MyWindow}">
                    <MvvmCommonControl:CustomDataGridSelectorControl.DataGridColumns>
                        <MvvmCommonControl:DataGridColumnCollection>
                            <DataGridTextColumn Header="FarsiNmae" Width="100" Binding="{Binding FarsiName, Mode=OneWay}"></DataGridTextColumn>
                        </MvvmCommonControl:DataGridColumnCollection>
                    </MvvmCommonControl:CustomDataGridSelectorControl.DataGridColumns>
                </MvvmCommonControl:CustomDataGridSelectorControl>
            </DataTemplate>
        </DataGridTemplateColumn.CellTemplate>
    </DataGridTemplateColumn>
</DataGrid.Columns> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T06:03:22.417

I just need to use `RelativeSource` instead of `ElementName`.

I changed this:

```
 DataContext="{Binding DataContext.RequesterPeoplesDataContext,ElementName=MyWindow}" 
```

to this:

```
 DataContext="{Binding DataContext.RequesterPeoplesDataContext,RelativeSource={RelativeSource AncestorType=Window}}" 
```

# java - 为什么访问 volatile 变量比成员慢大约 100？

> ID：11132087
> 
> 赞同：7
> 
> 时间：2012-06-21T05:35:44.137
> 
> 标签：java, performance, volatile

这里我写了一个关于local、member、volatile成员访问速度的测试：

```
public class VolatileTest {

public int member = -100;

public volatile int volatileMember = -100;

public static void main(String[] args) {
    int testloop = 10;
    for (int i = 1; i <= testloop; i++) {
        System.out.println("Round:" + i);
        VolatileTest vt = new VolatileTest();
        vt.runTest();
        System.out.println();
    }
}

public void runTest() {
    int local = -100;

    int loop = 1;
    int loop2 = Integer.MAX_VALUE;
    long startTime;

    startTime = System.currentTimeMillis();
    for (int i = 0; i < loop; i++) {
        for (int j = 0; j < loop2; j++) {
        }
        for (int j = 0; j < loop2; j++) {
        }
    }
    System.out.println("Empty:" + (System.currentTimeMillis() - startTime));

    startTime = System.currentTimeMillis();
    for (int i = 0; i < loop; i++) {
        for (int j = 0; j < loop2; j++) {
            local++;
        }
        for (int j = 0; j < loop2; j++) {
            local--;
        }
    }
    System.out.println("Local:" + (System.currentTimeMillis() - startTime));

    startTime = System.currentTimeMillis();
    for (int i = 0; i < loop; i++) {
        for (int j = 0; j < loop2; j++) {
            member++;
        }
        for (int j = 0; j < loop2; j++) {
            member--;
        }
    }
    System.out.println("Member:" + (System.currentTimeMillis() - startTime));

    startTime = System.currentTimeMillis();
    for (int i = 0; i < loop; i++) {
        for (int j = 0; j < loop2; j++) {
            volatileMember++;
        }
        for (int j = 0; j < loop2; j++) {
            volatileMember--;
        }
    }
    System.out.println("VMember:" + (System.currentTimeMillis() - startTime));

}
} 
```

这是我的 X220 (I5 CPU) 上的结果：

**Round:1** *Empty:5 Local:10 Member:312 VMember:33378*

**Round:2** *Empty:31 Local:0 Member:294 VMember:33180*

**Round:3** *Empty:0 Local:0 Member:306 VMember:33085*

**Round:4** *Empty:0 Local:0 Member:300 VMember:33066*

**Round:5** *Empty:0 Local:0 Member:303 VMember:33078*

**Round:6** *Empty:0 Local:0 Member:299 VMember:33398*

**Round:7** *Empty:0 Local:0 Member:305 VMember:33139*

**Round:8** *Empty:0 Local:0 Member:307 VMember:33490*

**Round:9** *Empty:0 Local:0 Member:350 VMember:35291*

**Round:10** *Empty:0 Local:0 Member:332 VMember:33838*

令我惊讶的是，访问 volatile 成员的速度比普通成员慢 100 倍。我知道 volatile 成员有一些突出特性，例如对它的修改将立即对所有线程可见，对 volatile 变量的访问点起着“内存屏障”的作用。但是所有这些副作用会是100倍慢的主要原因吗？

PS：我也在Core II CPU机器上做了测试。大约是 9 点 50 分，慢了大约 5 倍。似乎这也与CPU拱门有关。5倍还是很大的吧？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-21T06:52:20.977

volatile 成员永远不会被缓存，因此它们是直接从主内存中读取的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-21T05:42:21.093

访问`volatile`变量会阻止 CPU 在访问前后重新排序指令，这通常会减慢执行速度。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-21T07:08:38.923

访问以`volatile`防止某些 JIT 优化。如果您有一个实际上不做任何事情的循环，这一点尤其重要，因为 JIT 可以优化此类循环（除非您有一个 volatile 字段）如果您“长时间”运行循环，则差异应该增加更多。

在更实际的测试中，您可能会期望`volatile`对关键代码慢 30% 到 10 倍。在大多数实际程序中，它几乎没有什么区别，因为 CPU 足够聪明，可以“意识到”只有一个内核在使用 volatile 字段并将其缓存而不是使用主存储器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-02T07:21:01.010

使用 volatile 会直接从内存中读取，这样每个 cpu 核心都会在下一次 get 时从变量中获取变化，没有使用 cpu 缓存，不会使用寄存器，L1~L3 缓存技术，从

1.  寄存器 1 个时钟周期
2.  L1 高速缓存 4 个时钟周期
3.  L2 高速缓存 11 个时钟周期
4.  三级缓存 30~40 个时钟周期
5.  内存 100+ 个时钟周期

这就是为什么使用 volatile 时结果会慢 100 倍的原因。

# ios - 如何在 iOS 中将钥匙串与核心数据数据库中的数据一起保存？

> ID：11132091
> 
> 赞同：0
> 
> 时间：2012-06-21T05:36:12.717
> 
> 标签：ios, core-data, keychain

好的，我会尽量让这件事变得简单。我正在尝试从我的 iPhone 应用程序中的创建用户场景创建一个用户帐户，现在写我不知道为什么我不能将用户创建的 pin 保存到 / 钥匙串中。我有一个标记为**创建帐户**的按钮，我想将用户输入的数据保存到钥匙串中，并将我的帐户实体保存在核心数据数据库中。这是用户按下**创建帐户**按钮时的代码。

```
- (IBAction)createAccount:(id)sender {

[self checkTextFieldCharLength];

// check if create textfields are empty, check if boolean is YES / NO
if([self checkTextFieldEmpty] == YES ) // empty text fields
{
    NSLog(@"Please fill in text fields");
}

else {
    NSLog(@"Thanks for filling out the text fields.");
    // Core Data - retrieve values from text fields and store in database.
    Account *newAccount;
    Account *pinAccount;
    newAccount = [NSEntityDescription insertNewObjectForEntityForName:@"Account" inManagedObjectContext:_managedObjectContext];
    [newAccount setValue:_createUserTextField.text forKey:@"username"];
    [newAccount setValue:_createEmailTextField.text forKey:@"email"];
    [newAccount setValue:_createPhoneNumber.text forKey:@"phoneNumber"];

    // TODO store pin in keychain
    [pinAccount setPassword:_createPinTextField.text];
    NSLog(@"Pin saved is %@", [newAccount password]);

    _createUserTextField.text = @"";
    _createEmailTextField.text = @"";
    _createPhoneNumber.text = @"";
    _createPinTextField.text = @"";
    _createPinReTextField.text = @"";
    NSError *error;
    [_managedObjectContext save:&error];
    [_createAccountSuccess setHidden:NO];
    NSLog(@"Succefully created account.");

    // Segue to user home screen

}
} 
```

account.h和**account.m****文件**：

**帐户.h**

```
#import "AccountBase.h"

@interface Account : AccountBase {

}

// nonatomic - don't worry about multithreading

@property (nonatomic, assign) NSString *password;

- (void)setPassword:(NSString*)aPassword;

@end 
```

**帐户.m**

```
#import "Account.h"
#import "KeychainHelper.h"

@implementation Account

- (NSString*)password 
{
if (self.username)
    return [KeychainHelper getPasswordForKey:self.username];
return nil;
}

- (void)setPassword:(NSString*)aPassword 
{
if (self.username) [KeychainHelper setPassword:aPassword forKey:self.username];

}
- (void)prepareForDeletion
{
if (self.username) [KeychainHelper removePasswordForKey:self.username];
 }
@end 
```

**KeychainHelper.h** [http://pastie.org/4124627](http://pastie.org/4124627) **KeychainHelper.m** [http://pastie.org/4124631](http://pastie.org/4124631)

我收到以下错误：

`2012-06-21 00:33:24.915 KegCop[41960:fb03] -[NSManagedObject password]: unrecognized selector sent to instance 0x6b83940 2012-06-21 00:33:24.916 KegCop[41960:fb03] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[NSManagedObject password]: unrecognized selector sent to instance 0x6b83940' *** First throw call stack: (0x134a022 0x1733cd6 0x134bcbd 0x12b0ed0 0x12b0cb2 0x5df3 0x134be99 0x38614e 0x3860e6 0x42cade 0x42cfa7 0x42c266 0x647a1a 0x131e99e 0x12b5640 0x12814c6 0x1280d84 0x1280c9b 0x1f837d8 0x1f8388a 0x383626 0x1d0d 0x1c75 0x1) terminate called throwing an exception(lldb)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T02:32:09.373

我能够创建一个帐户并将其存储在 Core Data DB 中，并且还能够使用以下代码将用户输入的密码存储在钥匙串中。

```
// Core Data - retrieve values from text fields and store in database.
    Account *newAccount;
    newAccount = [NSEntityDescription insertNewObjectForEntityForName:@"Account" inManagedObjectContext:_managedObjectContext];
    [newAccount setValue:_createUserTextField.text forKey:@"username"];
    [newAccount setValue:_createEmailTextField.text forKey:@"email"];
    [newAccount setValue:_createPhoneNumber.text forKey:@"phoneNumber"];

    // TODO store pin in keychain
    [newAccount setPassword:_createPinTextField.text];
    NSLog(@"Pin saved is %@", [newAccount password]); 
```

# php - 如何在 PHP 脚本的不同实例（可能是不同的）之间实现实时消息传递？

> ID：11132095
> 
> 赞同：0
> 
> 时间：2012-06-21T05:36:31.590
> 
> 标签：php

我正在使用事件流和 HTML5 SSE 客户端提供客户端实时事件。

但我的一些事件实际上将来自其他客户提交的表单。

尽快（在它们发生之后）检测这些表单提交（以便将它们附加到事件流脚本）的最佳方法是什么？

所以本质上，我需要不同客户端实例化的不同脚本的多个实例之间的实时跨脚本消息传递，类似于 JS 中的 X-doc 消息传递，但对于 PHP。

我能想到的最好的办法是反复轮询`/tmp`通知文件的子目录，这是一个糟糕的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T09:25:25.337

如果您希望事件接近实时触发，那么您需要同步处理它们——这意味着运行一个守护进程。实现可以跨客户端连接同步数据的守护进程的最简单方法是使用基于事件的服务器。后者[在这里使用 php](http://www.phpclasses.org/package/5758-PHP-Handle-requests-to-network-servers.html)有一个很好的实现- 有很多关于如何在互联网上守护 PHP 进程的示例。然后只需从您的 PHP 代码打开与服务器的阻塞连接/通过彗星访问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T05:41:15.653

通常你可以使用 MYSQL 来扮演你所说的 tmp 目录的角色。这更具可移植性，因为它们不必在同一台服务器上执行此操作，并且数据是分开的。然而，脚本将不得不手动检查 mysql 位置，以查看其他脚本是否已处理此问题。另一种选择是打开套接字并实时来回写入，或者为此目的使用一些预构建的工具，我很确定可能存在。

# android - 具有多个侦听器的 android 服务

> ID：11132097
> 
> 赞同：0
> 
> 时间：2012-06-21T05:36:40.747
> 
> 标签：android, service, listener

我在创建允许在不同时间添加/删除多个侦听器的 NON-IPC 服务时遇到了一些问题，例如，我希望能够随时联系该服务并“订阅”其事件，或“取消订阅”它。该服务每隔一段时间就会唤醒一次，并向所有订阅的侦听器发送一个事件。

我一直在查看 stackoverflow 示例、谷歌搜索等，特别是我在这里发现了类似的东西： [android restful api](https://stackoverflow.com/questions/3197335/restful-api-service)

在该示例中，建议使用 ResultReceiver 作为服务的回调。但是在这种方法中，这是否意味着服务只能通知作为第一个意图的一部分发送给它的侦听器（即我不能随时添加/删除侦听器）？

此外，在该示例中，如果活动因某种原因被操作系统破坏，但服务仍然具有对侦听器的引用并尝试调用它，会发生什么情况？侦听器将尝试对不再存在的活动执行一些操作，对吗？

也许我错过了一些东西......如果可能的话，我会很感激一些输入......

肿瘤坏死因子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T06:35:05.873

首先，“睡眠”服务在 Android 中是反模式的。如果您需要定期执行某些操作，请使用 AlarmManager 启动您的服务。其次，服务可以随时重新启动，因此您不能依赖“订阅”来保留对其他组件（主要是活动）的引用。如果您需要向多个活动发送通知，请使用广播接收器。活动可以静态注册（使用 AndroidManifest.xml），也可以动态注册（使用代码）。

# mysql - 填充数据库的所有字段时遇到问题

> ID：11132098
> 
> 赞同：1
> 
> 时间：2012-06-21T05:36:43.730
> 
> 标签：mysql

我正在尝试将文本文件导入 MySQL 数据库，但无法让第一个字段 (card_no) 完全填充到我的所有记录中。导入文件后（不会产生任何错误），第一条记录正确显示，但其他记录没有。谁能告诉我如何解决这个问题？- 如果它很重要，我正在使用 phpMyAdmin 来加载文件。 - 谢谢你的时间。

这是数据库的结构：

```
Field       Type            Collation         Attributes    Null    
card_no     smallint(6)                       Yes           NULL
name        varchar(100)    latin1_swedish_ci No    
artist      varchar(30)     latin1_swedish_ci Yes           NULL
color       varchar(25)     latin1_swedish_ci Yes           NULL
rarity      varchar(1)      latin1_swedish_ci Yes           NULL
expansion   varchar(50)     latin1_swedish_ci Yes           NULL 
```

这是代码：

```
 LOAD DATA LOCAL INFILE 'C:\\xampp\\tmp\\php43.tmp'
    INTO TABLE `mtginfo` FIELDS TERMINATED BY ';'
    ENCLOSED BY '"' ESCAPED BY '\\' LINES TERMINATED BY ','; 
```

这是导入的文件：

```
 "1";"Ajani Goldmane";"Aleksi Briclot";"White";"M";"Magic 2010",
    "2";"Angel's Mercy";"Andrew Robinson";"White";"C";"Magic 2010",
    "3";"Armored Ascension";"Jesper Ejsing";"White";"U";"Magic 2010",
    "4";"Baneslayer Angel";"Greg Staples";"White";"M";"Magic 2010",
    "5";"Blinding Mage";"Eric Deschamps";"White";"C";"Magic 2010" 
```

这是输出示例：

```
 card_no name            artist          color   rarity  expansion
    1       Ajani Goldmane  Aleksi Briclot  White   M       Magic 2010
    0       Angel's Mercy   Andrew Robinson White   C       Magic 2010
    0       Armored Ascensi Jesper Ejsing   White   U       Magic 2010
    0       Baneslayer Ange Greg Staples    White   M       Magic 2010
    0       Blinding Mage   Eric Deschamps  White   C       Magic 2010 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T06:38:58.143

所有新行都以一些空格开头。您应该处理它们，指定 LINES STARTING BY 子句，例如 -

```
LOAD DATA LOCAL INFILE 'd:\\1\\php43.tmp'
INTO TABLE 'C:\\xampp\\tmp\\php43.tmp'
FIELDS TERMINATED BY ';' ENCLOSED BY '"' ESCAPED BY '\\'
LINES STARTING BY '        ' TERMINATED BY ','; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T16:07:50.623

我不确定回答您自己问题的协议是什么，所以如果其他人有这个问题，我会发布我刚刚发现的解决方案。-- 我的 CARD_NO 字段类型为 smallint，我正在尝试将非整数类型加载到其中。因此导入不会加载 char 类型（因为引号是 char），它会移动到下一个字段。- 再次感谢Devart的回答。虽然您的回复并没有纠正我的问题，但它确实让我更多地思考我的问题。

# ajax - 在 Sharepoint 2010 中开发并转换为 Sharepoint 2007 的 Webpart 无法正常工作

> ID：11132099
> 
> 赞同：0
> 
> 时间：2012-06-21T05:36:52.000
> 
> 标签：ajax, sharepoint

我在 SP 2010 中使用**Ajax Toolkit**创建了 webpart ，然后我将其转换为 Sp 2007，但是当我在 SP 2007 中将该 webpart 添加到我的网页时，它给了我以下错误

![在此处输入图像描述](../Images/c60c793593d8afeb48c326f00a35d798.png)

**注意：**我已经在我的 web.config 文件中注册了我的 Ajax Toolkit。

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T07:39:32.690

最后我从以下链接得到了解决方案：

[这个链接](http://www.codeproject.com/Articles/18778/Microsoft-Office-SharePoint-2007-and-ASP-NET-2-0-A)

在此链接的第 9 步中，我在 webpart 的标题部分添加了以下语句：

```
using System.Web.Extensions; 
```

# javascript - 如何确定对象中的任何值是否为非空值？

> ID：11132101
> 
> 赞同：0
> 
> 时间：2012-06-21T05:36:58.683
> 
> 标签：javascript, underscore.js

在 Javascript 中，我正在处理一些采用以下形式的 JSON 数据：

```
o = {
  a: null,
  b: null,
  c: 1,
  d: null
  // ... 10 or so other properties that are either null or numerical
} 
```

我正在尝试编写一个快速函数来处理整个对象以确定任何键是否有任何非空值。有什么建议可以通过几行代码有效地做到这一点吗？我的项目已经使用了 underscore.js，所以如果这可以加快速度或使其更简洁，那就更好了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T06:20:07.517

单线呢，

```
_.any(_.values(a), function (v) { return !_.isNull(v) }); 
```

如果至少有一个非空值，它将返回 true。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T05:43:03.197

```
var hasVal = false;
for (var prop in obj) {
    hasVal = obj.hasOwnProperty(prop) && obj[prop] !== null;
    if (hasVal) break;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T06:26:54.163

您可以[`_.find`](http://underscorejs.org/#find)结合使用[`_.isNull`](http://underscorejs.org/#isNull)：

```
var has_a_null = _.chain(o).find(_.isNull).isNull().value(); 
```

或类似地：

```
var has_a_null = _(o).find(_.isNull) === null 
```

演示：http: [//jsfiddle.net/ambiguous/t678w/](http://jsfiddle.net/ambiguous/t678w/)

# javascript - 使用三元运算符缩短代码

> ID：11132105
> 
> 赞同：0
> 
> 时间：2012-06-21T05:37:20.107
> 
> 标签：javascript, ternary-operator

如何使用三元运算符缩短以下内容？

```
if ((pos - maxPos) == (c.clientWidth)) {
    $j("#next").addClass("filter");
} else {
    $j("#next").removeClass("filter");
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-21T05:39:41.670

无需使用三元运算符，[`.toggleClass()`](http://api.jquery.com/toggleClass/)接受第二个参数来确定是否应该添加或删除类：

```
$j('#next').toggleClass('filter', ((pos - maxPos) == c.clientWidth)) 
```

但是，为了完全按照您的要求回答您的问题（不要使用它！）：

```
$j('#next')[((pos - maxPos) == c.clientWidth) ? 'addClass' : 'removeClass']('filter'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T05:39:49.493

甚至比三元更好，使用`switch`参数`toggleClass()`

```
$j("#next").toggleClass("filter", pos - maxPos === c.clientWidth); 
```

# mysql - mysql。在同一个表中重复的自动增量键

> ID：11132106
> 
> 赞同：0
> 
> 时间：2012-06-21T05:37:21.937
> 
> 标签：mysql, foreign-keys, auto-increment, self-reference

有一张桌子。Parent_id 引用相同的表 id。如果parent_id = id，如何插入raw？我不知道 id（插入前），如果没有 parent_id 则无法插入。没有获得最后一个 INCREMENT id 并创建临时表的最佳方法是什么？

```
CREATE TABLE `test` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `parent_id` int(11) unsigned NOT NULL,
  `someotherfield` varchar(45) NOT NULL,
  PRIMARY KEY (`id`),
  FOREIGN KEY `constr_catalog_guid_id` (`parent_id`) REFERENCES `test` (`id`)   
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

这是行不通的：

```
Insert into 'test' values (parent_id = test.id, "NOt matter"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T05:50:42.450

```
CREATE TRIGGER trigger_increment_id_for_another_field BEFORE INSERT ON test FOR EACH ROW
BEGIN
   DECLARE next_id INT;
   SET next_id = (SELECT AUTO_INCREMENT FROM information_schema.TABLES WHERE TABLE_SCHEMA=DATABASE() AND TABLE_NAME='test');
   SET NEW.parent_id=next_id;
END 
```

此触发器应根据每行插入的 auto_increment 值复制 parent_id 值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T05:46:52.403

您可以暂时禁用外键的执行，例如：

```
SET foreign_key_checks = 0;
INSERT INTO 'test' VALUES (NULL, NULL, "foo");
UPDATE 'test' SET parent_id = id WHERE parent_id IS NULL;
SET foreign_key_checks = 1; 
```

我不确定，但您可能需要使该列允许 NULL 才能正常工作。

[http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_foreign_key_checks](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_foreign_key_checks)

# drupal-7 - drupal 中的一个模块，它可以让我在树状结构中拥有数据

> ID：11132107
> 
> 赞同：0
> 
> 时间：2012-06-21T05:37:24.290
> 
> 标签：drupal-7, drupal-modules, drupal-themes

我正在drupal 中搜索一个主题或模块，它可以让我以下图中给出的形式展示我的网页。这些盒子有一些内容。是否有任何主题/模块可以让我这样做，还是我必须自己从头开始编写一个？ ![在此处输入图像描述](../Images/606096a1441fbc663dd380c36e7f754a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T07:34:28.587

我不知道有什么模块可以做到这一点，但是修改你最喜欢的主题应该很容易（使用子主题，这样你就不会错过更新）来做到这一点。

您可以在 template.php 中输出的节点上放置一个交替类。其余的你应该可以用 CSS 来完成。

詹姆士

# android - 按钮对齐

> ID：11132119
> 
> 赞同：1
> 
> 时间：2012-06-21T05:39:21.500
> 
> 标签：android, button, alignment

我做了一个相机布局，其中存在两个按钮。`click`一个按钮和一个`share`按钮。

问题是我想在同一个视图中对齐这个按钮，但我不能。

这是我的按钮代码

```
<Button
    android:id="@+id/buttonClick"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Click"
    android:layout_gravity="left" />

<Button
    android:id="@+id/buttonShare"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Share"
    android:layout_gravity="right" /> 
```

![在此处输入图像描述](../Images/d7593ececc7cc9be919b1ae1a62d57f0.png)

但我希望`click`按钮与按钮所在的位置相同`share`...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T05:44:40.687

您可能将它们放在`LinearLayout`另一个视图中（带有“相机演示”文本）。但是如果没有看到完整的布局文件，您可以将它们包装在另一个布局中，如下所示：

```
<RelativeLayout    android:layout_width="fill_parent"
    android:layout_height="wrap_content">
<Button
    android:id="@+id/buttonClick"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Click"
    android:layout_alignParentLeft="true" />

<Button
    android:id="@+id/buttonShare"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Share"
    android:layout_alignParentRight="true" />
</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T05:45:52.077

从您的图像来看，您的父布局正在使用具有垂直方向的 LinearLayout。因此，您添加到其中的每个视图都将在垂直方向上一一放置。

如果要将两个按钮放在同一行，则必须使用 RelativeLayout 来包装这两个按钮。并将child放置在RelativeLayout的左右两侧

```
<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <Button
        android:id="@+id/buttonShare"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:text="Share" />

    <Button
        android:id="@+id/buttonClick"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:text="Click" />

</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T05:47:15.197

```
 <RelativeLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
             >

            <Button
                android:id="@+id/buttonClick"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:text="Click" />

            <Button
                android:id="@+id/buttonShare"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentRight="true"
                android:text="Share" />
        </RelativeLayout>

should have one more RelativeLayout as parent of all.... 
```

![在此处输入图像描述](../Images/a5b98688c7aa1f534556438110263307.png)

我把它作为compelte ..

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
         >

        <Button
            android:id="@+id/buttonClick"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:text="Click" />

        <Button
            android:id="@+id/buttonShare"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:text="Share" />
    </RelativeLayout>

</RelativeLayout> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T04:50:39.967

要更好地理解布局，请遵循此[布局](http://www.androidhive.info/2011/07/android-layouts-linear-layout-relative-layout-and-table-layout/)

这里。并根据您的问题更好地使用相对布局

```
<RelativeLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true" //to assign botton to bottom of layout
     > 
```

# ruby-on-rails - 如何在没有 ActiveRecord 的情况下创建模型？

> ID：11132121
> 
> 赞同：1
> 
> 时间：2012-06-21T05:39:26.747
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我的 Web 应用程序使用 MongoDB，因为数据不是关系型或复杂的，我宁愿不使用任何 MongoDB ODM，如 Mongoid。此外，MongoDb 驱动程序应该比可用的 ODM 快很多倍。

ActiveRecord 是否提供了我可以在基本模型中使用的东西，或者我应该只创建一个知道如何访问 MongoDB 并定义一些访问数据的方法的基本类？

我发现[了 Yehuda Catz 的这篇文章，](http://yehudakatz.com/2010/01/10/activemodel-make-any-ruby-object-feel-like-activerecord/)他建议使用 ActiveModel 以便为您的自定义模型提供 ActiveRecord 的优点。对我来说这听起来很合乎逻辑。这是正确的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T06:22:45.137

是的，如果您不打算将 ActiveRecord 用于无表模型，那么 ActiveModel 也是正确的选择

从 Rails 3+ 开始，ActiveModel 一直是突出的特性之一。

ActiveModel 具有开始使用无表模型的所有优点。

大多数 ActiveRecord 验证和回调大多继承自 ActiveModel 。

根据使用 MongoDB ( **MongoId** ) 的一个 mongodb 适配器利用 ActiveModel 的优势进行验证检查验证文件[here](https://github.com/mongoid/mongoid/tree/3.1.0-stable/lib/mongoid/validations)

# java - pythonic“a”* 10的java等价物是什么？

> ID：11132124
> 
> 赞同：3
> 
> 时间：2012-06-21T05:39:35.073
> 
> 标签：java

我想基于运行时变量 i 构建一个包含“a”数量的字符串。例如，如果 i 的值为 3，则字符串的值将为“aaa”，如果 i 的值为 5，则字符串将为“ aaaaa”。我如何在 java 中创建它 [没有在循环中创建字符串缓冲区的明显方法] 例如在 python 中我可以做到`string = 'a' * i`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T05:45:09.797

使用[Google Guava](http://code.google.com/p/guava-libraries/)，我们可以使用[重复](http://guava-libraries.googlecode.com/svn/tags/release09/javadoc/com/google/common/base/Strings.html#repeat%28java.lang.String,%20int%29)方法：

> 公共静态字符串重复（字符串字符串，整数计数）
> 
> 返回由输入字符串的特定数量的连接副本组成的字符串。例如，repeat("hey", 3) 返回字符串“heyheyhey”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T14:14:14.153

```
char [] a = new char[5];
Arrays.fill(a, 'f'); 
```

# javascript - 我想将javascript变量分配给javascript中的html元素

> ID：11132132
> 
> 赞同：3
> 
> 时间：2012-06-21T05:40:07.460
> 
> 标签：javascript, html

我正在尝试在 javascript 内的 html 元素中插入 javascript 变量值。但它无法正常工作。以下是我的代码。

```
 window.onload = function() {
    var image=document.getElementById('img').value;
        var img = '<div id="pic"><img src="image" width="200" height="108" /><p></p></div>';
      } 
```

这就是功能。在这里，我正在获取可变图像中的图像.. 我试图将此图像分配给一个 div id pic.. 我正在分配 src="image" 我在 var image 中获得的.. 但它不起作用。 .

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T05:41:51.187

您需要将值插入到字符串中：

```
var img = '<div id="pic"><img src="' + image + '" width="200" height="108" /><p></p></div>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T05:45:54.300

我认为你应该这样做：

```
window.onload = function() {
    var image=document.getElementById('img').value;
    document.getElementById('pic').innerHTML='<img src="'+image+'" width="200" height="108" /><p></p>';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T05:43:59.533

它应该是这样的：

```
 var img = '<div id="pic"><img src="'+image+'" width="200" height="108" /><p></p></div>'; 
```

# jsf - Facelets 1.x 以不正确的文件名/路径静默失败

> ID：11132133
> 
> 赞同：1
> 
> 时间：2012-06-21T05:40:14.167
> 
> 标签：jsf, facelets, jsf-1.2

在 IBM 门户服务器 6.1 之上使用 JSF 1.2 和 Facelets 1.x

我们正在广泛使用 facelets 提供的模板、组合、装饰和包含机制，这绝对是很棒的，并且允许我们广泛地模块化我们的 html。

我们不喜欢的一个“功能”是，如果我们在 include 或 src 属性中引用它们时在文件名或路径名中出错，则页面根本不会呈现，只是一个完全空白的屏幕，没有任何内容写入任何日志并且没有抛出异常。这会极大地妨碍调试。

提示这个问题的特殊情况是我们将我们的应用程序从本地 Windows 机器提升到我们的 unix staging 测试机器。我们包含的一个片段在名称中包含一个小写的 s 而不是大写的 S，并且分配给开发人员修复它需要很长时间才能找到它。

当找不到 html 片段时，有什么方法可以让 facelets 记录或抛出异常？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T13:24:15.227

JSF 2.x 对此提出了质疑`FileNotFoundException`。我现在没有 Facelets 1.x 游乐场环境，所以我无法为您测试它，但*理论上*您应该能够通过实现自定义 Facelets 资源解析器来捕获它，通过`DefaultResourceResolver`该解析器检查方法中的`null`结果`resolveUrl()`.

像这样的东西：

```
import com.sun.facelets.impl.DefaultResourceResolver;

public class CustomResourceResolver extends DefaultResourceResolver {

    @Override
    public URL resolveUrl(String resource) {
        URL url = super.resolveUrl(resource);

        if (url == null) {
            throw new FacesException(new FileNotFoundException(resource));
            // Perhaps add a logging statement instead if this exception
            // is after all actually completely swallowed for some reason.
        }

        return url;
    }

} 
```

要让它运行，请在 web.xml 中按如下方式注册它：

```
<context-param>
    <param-name>facelets.RESOURCE_RESOLVER</param-name>
    <param-value>com.example.CustomResourceResolver</param-value>
</context-param> 
```

# actionscript-3 - 我一次可以发送多少个请求

> ID：11132135
> 
> 赞同：0
> 
> 时间：2012-06-21T05:40:18.650
> 
> 标签：actionscript-3, facebook-graph-api

我正在使用 Facebook.web.swc，我一次将 apprequest 发送给 100 人，但 facebook 抛出了一个错误。谁能告诉我一次可以发送多少个请求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T16:42:16.087

每个用户每天可以发送的[请求](https://developers.facebook.com/docs/requests/)数量在策略上或技术上没有限制。

但是，[请求对话框](https://developers.facebook.com/docs/reference/dialogs/requests/)在一次调用中只能发送**50 个请求**

# ruby - 如何在 Ruby 中从另一个初始化器调用一个初始化器？

> ID：11132141
> 
> 赞同：1
> 
> 时间：2012-06-21T05:40:56.133
> 
> 标签：ruby, constructor, initializer

如何干燥以下代码并从第二个调用第一个初始化程序？

```
class DataStream

  attr_reader :asset
  attr_reader :data

  def initialize(asset)
    @asset = asset
    @data = Array.new
  end

  def initialize(asset, values)
    @asset = asset
    @data = Array.new
    values.each do |value|
      add_value(value)
    end
  end

end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T05:45:10.167

你不能定义两个同名的方法，如果你这样做了，只会发生最后一个，就像重新定义方法一样。

您可以使用可选参数，例如：

```
def initialize(asset, values = nil)
    @asset = asset
    @data = Array.new
    values.each do |value|
        add_value(value)
    end if values
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T05:46:39.243

使用默认参数：

```
def initialize(asset, values = [])
  @asset = asset
  @data = Array.new
  values.each do |value|
    add_value(value)
  end
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T05:47:11.140

怎么样 ：

```
class DataStream
  attr_reader :asset
  attr_reader :data
  def initialize(asset, values=nil)
    @asset=asset
    @data = Array.new
    values.each{|v| add_value(v)} unless values.nil?
  end
end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T06:22:19.403

如果你使用警告，Ruby 会告诉你重新定义了一个现有的方法，因此不能再使用它：

```
$VERBOSE = true
class DataStream

  attr_reader :asset
  attr_reader :data

  def initialize(asset)
    @asset = asset
    @data = Array.new
  end

  def initialize(asset, values)
    @asset = asset
    @data = Array.new
    values.each do |value|
      add_value(value)
    end
  end
end 
```

给

```
(irb):12: warning: method redefined; discarding old initialize
(irb):7: warning: previous definition of initialize was here 
```

# algorithm - 根据样本运行估计模拟运行时间

> ID：11132143
> 
> 赞同：4
> 
> 时间：2012-06-21T05:41:03.497
> 
> 标签：algorithm, time-complexity, timing

我需要在一个周末运行一次模拟。我希望模拟足够大，使其尽可能具有描述性，但我不希望它在我重新开始工作时还没有完成，我不能继续使用这个软件。

该算法是这样的，一旦开始，它必须完成，否则运行它根本没有意义。

模拟的各个元素以阶乘、n^4 和 n^2 运行

```
 n:
<= 6  =         0ms
   7  =         8ms
   8  =        91ms
   9  =     1,089ms
   10 =    14,666ms
   11 =   197,288ms
   12 = 3,091,739ms 
```

我在 WolframAlpha 中为这些样本拟合了一条[曲线](http://goo.gl/Qrn1N)。我关心的两件事首先是 n^4 分量是负数，这没有任何意义，因为它肯定是运行时的一个促成因素。另一件事是，我过去曾尝试在类似情况下估计运行时间，而我的推断通常很遥远。

你们中是否有人以这种方式根据输入大小猜测算法的运行时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T06:09:43.210

**外推失败的原因：**
当您要估计原始范围之外的值时，预计外推会很远。
至少在多项式外推中 -[误差](http://www.proofwiki.org/wiki/Lagrange_Polynomial_Approximation)是点到所有样本点之间的距离的乘积，以及函数在该范围内的第 n 阶导数的最大值的函数。如果这个距离很大 - 它（距离和最大导数的乘积）预计会很高。

n^4 分量给出负值，因为它显示了可以解释“观察”的最佳函数。

为了估计样本区域之外的运行时间 - 我建议避免使用外推法。当走出已知样本的“舒适区”时，根据定义，它们不是很好的估计。

**考虑一个替代方案：**
我会尝试找到常量的粗略估计（通过静态分析代码） - 主要是 - 我想看看阶乘分量是否有非常小的常数，而其余的有非常大的常数。如果不是这种情况，则可以忽略 n^2 和 n^4 分量 - 与阶乘分量相比，它们可以忽略不计，这将更容易分析。

**PS**从您提供的动态数据来看 - 似乎是这样，运行时间之间的差异正在迅速收敛到阶乘因素，因此将函数分析为阶乘和估计`f(12) ~= 12* f(11)`等似乎是一个合理的假设。
如果您想安全起见，可以使用`f(n) = (n + d) * f(n-1)`，其中 d 是预定义的正常数，例如`d = max{0,f(11)/f(10) - 11}`。

**PS2：**
由于阶乘的行为如此激进，您可以尝试迭代地运行模拟，`f(1) + f(2) + ... + f(n)`预计不会花费太多`f(n)`时间`n > 10`。通过这样做，您将获得您有时间计算的结果，尽管您在回到办公室时中止了它。这种行为被称为[任何时候](http://en.wikipedia.org/wiki/Anytime_algorithm)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T07:04:41.833

一般来说，当你有一些 O(N ⁴ ) 时，你还必须引入 O(N ³ )、O(N ² )、O(N) 和 O(1) 的术语。换句话说，尝试将 x ³、 x ¹和 x ⁰添加到曲线拟合模型中。

对于这种特殊情况，你有一个 O(N!)，好吧，我会遵循 amit 的建议，只考虑阶乘部分，因为它似乎收敛得很快。

但无论如何，如果你真的有一个 O(N!) 你不需要估计，只需使用[迭代加深](http://en.wikipedia.org/wiki/Iterative_deepening_depth-first_search)方法。让您的计算机迭代地运行 n=1,2,3,4,5,6,7... 的案例并让它尽可能地运行。

看起来你在浪费你的计算机时间，但如果你分析它，你会发现浪费的时间是微不足道的。例如，您已经在 n=12，因此对于 n=13，所需的 CPU C [13]将是 13*C [12]、 C [12] = 12*C [11]等等。介绍您的测量值 sum(C [13] ..C [0] )/C [13] = 1.082，因此对从 0 到 13 的所有值运行函数仅比运行 13 贵 8%。 N 值越大，该百分比将进一步降低。

**更新**：

为什么您需要为复杂性级别以下的所有幂添加项：

[考虑一个复杂度为 O(N 3] )的简单三级循环：

```
void foo(int n) {
  int i, j, k;
  for (i = 0; i < n; i++)
    for (j = 0; j < n; j++)
      for (k = 0; k < n; k++)
        do_something(i, j, k);
}

foo(3); 
```

很明显，`do_something(i, j, k)`调用了 n ³次。

但是我们从头开始考虑执行的每条指令，我们可以看到比进入和离开函数、设置堆栈和其他低级任务都完成一次；该`i=0`指令也执行一次。这些是对应于 n ⁰成本的指令。

指令`i < n`和被调用 n 次`i++`，`j=0`它们对应于 n ¹项。

指令`j < n`和被调用 n ²`j++`次，它们对应于 n ²项。`k=0`

嗯，等等。

更复杂的情况是一样的，你总是有指令运行的次数与低于复杂性级别的所有幂成正比。

关于你的测量`C(0) = 0`，这只是你的时间不够准确的问题。它可能非常小，但绝不是绝对的 0。

最后，如果你的曲线拟合不起作用，那是因为 N! 在这种情况下，您还将运行指令（n-1）！次，和（n-2！）次等等。

# android - 如何在Android上压缩WAV文件

> ID：11132145
> 
> 赞同：4
> 
> 时间：2012-06-21T05:41:05.890
> 
> 标签：android, audio, compression, audio-recording

在我的应用程序中，我正在使用 AudioRecorder 录制语音，如下面的站点[Audio Recorder](http://matrix-examplecode.blogspot.in/2011/12/audio-recording-part-2.html)中给出的 它正在工作，但它会产生大尺寸的 WAV 文件。例如，如果我录制音频**1 分钟，则需要 2MB 到 3MB。**所以我必须将 WAV 文件压缩成小文件。我已经尝试了很长时间，但我无法得到任何想法。我尝试了不同的**SAMPLERATE，例如 8000、11025、22050、32000、44056，**但我的应用程序崩溃，缓冲区大小无效，音频配置无效，并且工作了一段时间，但语音质量太差了。**SAMPLE_RATE = 44100 只能完美运行，但结果文件太大。**请帮我压缩wav文件，举个例子。提前致谢。

# jquery - 从 SVG G 元素中获取子元素

> ID：11132146
> 
> 赞同：0
> 
> 时间：2012-06-21T05:41:09.453
> 
> 标签：jquery, svg

我正在使用 HighStock 图表来准备图表。HighStock 用于`SVG`在其 API 中绘制 HTML。

这是生成的 HTML 片段：

```
<g class="highcharts-grid" zIndex="1"> 
<g class="highcharts-grid" zIndex="1">
<g class="highcharts-grid" zIndex="1">
<g class="highcharts-grid" zIndex="1">
    <path fill="none" d="M 36 385.5 L 1397 385.5" stroke="#C0C0C0" stroke-width="1" zIndex="1">
    <path fill="none" d="M 36 350.5 L 1397 350.5" stroke="#C0C0C0" stroke-width="1" zIndex="1">
    <path fill="none" d="M 36 420.5 L 1397 420.5" stroke="#C0C0C0" stroke-width="1" zIndex="1">
</g>
<g class="highcharts-grid" zIndex="1"> 
```

现在我正在使用`Jquery` `foreach`以下方法获取`g`包含类“highcharts-grid”：

```
$('.highcharts-grid').each(function(i, gridLinesArray) {
        // get path from gridLines

    }); 
```

现在，有些元素可能包含“路径”而有些不包含（正如您在生成的 HTML 中看到的那样），我想为每个包含它们的“g”获取路径元素数组。

希望我对这个问题很清楚。如果需要，请要求澄清。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T05:43:24.587

我不完全确定你在用它们做什么，但这可能对你有用：

```
$('.highcharts-grid').each(function(i, gridLinesArray) {
  var paths = $('path', this);
       // or  $(this).find('path');
}); 
```

# ruby-on-rails - 将现有的 ruby 添加到 RVM

> ID：11132150
> 
> 赞同：7
> 
> 时间：2012-06-21T05:41:18.753
> 
> 标签：ruby-on-rails, rvm

我的机器上安装了 ruby​​ 1.8.7 和 rails 2.3.5。我安装了带有 ruby​​ 1.9.3 和 rails 3.2.0 的 RVM。

所以我想将现有的 ruby​​ 1.8.7 添加到 RVM。我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T05:47:08.677

通过 RVM 安装 ruby​​ 1.8.7

```
rvm install ruby-1.8.7 
```

使用现有系统 ruby

```
rvm use system 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-21T06:49:30.307

1.  `rvm install 1.8.7` 将安装 ruby​​ 1.8.7
2.  在 shell 中浏览到您的项目文件夹
3.  `rvm use 1.8.7` 您为此项目使用 1.8.7
4.  `rvm gemset create gemsetname` 使用 1.8.7 为您的项目创建 gemset
5.  `gem install bundler` 安装你需要为 rails 2.3 配置 bundler 的 bundler
6.  `bundle install` #安装宝石
7.  添加`rvm use 1.8.7-p352@gemsetname --create`你的 .rvmrc 文件
8.  请享用 ：）

这些步骤在 2.3 的 3.x 中可以正常工作，您需要配置 bundle

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-07-23T17:27:09.953

该`rvm mount`命令允许您将现有的 ruby​​ 安装与 rvm 相关联。有关如何使用它的示例，请参阅[此答案。](https://stackoverflow.com/a/12169498/473691)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T06:21:06.310

使用 rvm 时，最好的做法是创建一个 gemset

```
rvm gemset create mygemset 
```

然后创建一个 .rvmrc 文件

```
rvm --create --rvmrc ruby-1.8.7-p352@mygemset 
```

从具有明显正确的 ruby​​ 版本的 rails 目录执行上述命令（如果不存在则安装..rvm install ruby​​-1.8.7）和 gemset。这样 rvm 会自动为您的项目设置正确的 ruby​​ 版本。

希望这可以帮助

# android - 设置 OnClickListener 并将 putExtra 添加到 Intent 时，按钮数组出现空指针异常

> ID：11132151
> 
> 赞同：1
> 
> 时间：2012-06-21T05:41:19.003
> 
> 标签：android, arrays, button, nullpointerexception, onclicklistener

我正在尝试编写一个 Android 益智游戏，在第一个 Activity 中选择关卡，在第二个 Activity 中选择实际谜题。第一个活动必须向第二个活动提供有关所选拼图编号的信息，以便第二个活动可以加载适当的信息。这一直很好，直到我尝试清理我的代码并将我的按钮放入数组中：

例如，

我以前有：

```
 puzzle0 =  (Button) findViewById(R.id.puzzle0);
    puzzle1 =  (Button) findViewById(R.id.puzzle1);
    puzzle2 =  (Button) findViewById(R.id.puzzle2);

    puzzle0.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            Intent intent = new Intent(view.getContext(), Puzzle.class);
            intent.putExtra("LevelNumber", "0");
            startActivityForResult(intent, 0);
        }
    });

    puzzle1.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            Intent intent = new Intent(view.getContext(), Puzzle.class);
            intent.putExtra("LevelNumber", "1");
            startActivityForResult(intent, 1);
        }
    });

    puzzle2.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            Intent intent = new Intent(view.getContext(), Puzzle.class);
            intent.putExtra("LevelNumber", "2");
            startActivityForResult(intent, 2);
        }
    }); 
```

上面的代码效果很好，让我在第二个拼图活动中获得了正确的信息并加载了适当的拼图。

随着我开发了更多的谜题，使用 for 循环并稍微自动化一下似乎很合适：

```
private void initializePuzzleButtons() {
    for(int i = 0; i < numberOfPuzzles; i++)
    {
        Log.i("Trial","A" + i);
        int puzzleButtonID = getResources().getIdentifier("puzzle" + i, "button", this.getPackageName());
        Log.i("Trial","B" + i);
        puzzleButtons[i] = (Button) findViewById(puzzleButtonID);
        Log.i("Trial","C" + i);
        final int j = i;
        Log.i("Trial","D" + i);
    }
    for(int i = 0; i < numberOfPuzzles; i++)
    {   
        final int j = i;
        puzzleButtons[i].setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                Intent intent = new Intent(view.getContext(), Puzzle.class);
                Log.i("Trial","E" + j);
                intent.putExtra("LevelNumber", j + "");
                Log.i("Trial","F" + j);
                startActivityForResult(intent, j);
            }
        });
    }

} 
```

LogCat 中的 Log 命令显示 NullPointerException 在第二个 for 循环中被抛出。也就是说，LogCat 显示 A1、B1、C1...、A2、B2、C3、... 一直到 D6（注意：numberOfPuzzles = 7），然后抛出异常。

我使用 j 变量的理由是需要一个最终变量（不能只使用 i），因为如 Eclipse 所示：“不能在以不同方法定义的内部类中引用非最终变量 j”如果 j 是不是最终的。

我认为 j 变量导致了问题，但我用文字 0 替换了每个 j 并且仍然得到 NullPointerException

那是，

```
for(int i = 0; i < numberOfPuzzles; i++)
    {   
        final int j = i;
        puzzleButtons[i].setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                Intent intent = new Intent(view.getContext(), Puzzle.class);
                Log.i("Trial","E" + 0);
                intent.putExtra("LevelNumber", 0 + "");
                Log.i("Trial","F" + 0);
                startActivityForResult(intent, 0);
            }
        });
    }

} 
```

仍然会导致 NullPointerException。我可能在这里遗漏了一些简单的东西，但我已经绞尽脑汁好几个小时了。我在类似的困境中查看了其他人，但我发现的所有回复都没有使用“New View.OnClickListener”作为 setOnClickListener 的参数（他们使用“this”），因为他们不需要向子活动发送额外内容并且可以允许实现 OnClickListener 的 Activity。这在我的情况下不起作用，因为 Activity 通常只能实现 OnClickListener，并且我需要一个特定的字符串与每个 Button 相关联（使用 putExtra 命令）。

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T05:58:25.290

如果您有多个功能相似的按钮。我建议您在 Activity 中实现 OnClickListener，而不是为每个按钮创建匿名侦听器。

要区分单击了哪个按钮，有两种方法可以做到这一点。1\. 初始化按钮时，可以使用`View.setTag()` 方法给按钮设置标签。

1.  使用 resID。

在您的情况下，我建议您使用方法 1，因为您需要在单击按钮时将级别传递给意图。当你初始化按钮时，你可以简单地用级别值设置按钮标签。

那么你的代码应该是这样的：

```
public class YourActivity extends Activity implements OnClickListener  {

    private void initializePuzzleButtons() {
        ...
        puzzleButtons[i].setOnClickListener(this);
        puzzleButtons[i].setTag(i);
        ...
    }

    @Override
    public void onClick(View view) {
        int level = (int)view.getTag(); 
        ...
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T05:57:13.063

代替

```
int puzzleButtonID = getResources().getIdentifier("puzzle" + i, "button", this.getPackageName()); 
```

经过

```
int puzzleButtonID = getResources().getIdentifier("puzzle" + i, "id", this.getPackageName()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T05:57:46.307

我认为应该按照[链接使用](http://steven.bitsetters.com/2007/11/27/accessing-android-resources-by-name-at-runtime/)

int id = getResources().getIdentifier("name_of_resource", "id", getPackageName());

# codeigniter - CodeIgniter 数据库会话问题：sess_expire_on_close

> ID：11132152
> 
> 赞同：3
> 
> 时间：2012-06-21T05:41:32.527
> 
> 标签：codeigniter, codeigniter-2

当 CI 的会话存储在数据库中时，我遇到了一个非常奇怪的问题。我正在使用会话来存储有关用户是否在我的网站上登录的信息。出于某种原因，我的一位来自立陶宛的朋友（我提到这个国家以防万一它是相关的）无法登录。当我监控会话表时，似乎她正在为她访问的每个页面创建一个新会话。她尝试使用各种浏览器，但无论使用哪种浏览器，都会出现同样的问题。没有其他人有这个问题（所有其他测试人员都在立陶宛境外）。

奇怪的是：我可以通过设置`sess_expire_on_close`= TRUE 来解决她的问题。我猜这不可能是解决方法，但是每当我将其设置回 FALSE 时，问题就会再次出现。

我的另一个问题是我似乎偶尔会丢失会话数据，这意味着用户被注销。不知道是什么原因造成的。我将为它发布一个不同的 SO 问题，但认为在这里提及它可能很有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T14:48:01.017

您使用的是哪个版本的 CodeIgniter？CI 2.1.1 在发布时有一个[会话错误](https://github.com/EllisLab/CodeIgniter/issues/1508)，即会话没有从数据库中删除，以及其他问题。如果您使用的是 2.1.1（受问题影响的唯一版本），我建议您升级到 2.1.2 并重试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T23:54:27.917

您的 ci 会话配置是否设置为匹配 IP 地址？如果是这样，您的朋友可能正在使用 3G 移动连接，并且可能在上网时不断更改她的 IP 地址……只是猜测。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T13:46:54.247

我记得几年前英国的一家互联网提供商也有类似的问题。他们的 IP 几乎改变了，如果不是每个请求的话。我相信会话与IP有关。因此，每次她访问另一个页面时，她都会被分配到一个新会话。

每次她访问您的页面时检查她的 IP。

# c - C 头文件在 debian 中的位置

> ID：11132153
> 
> 赞同：2
> 
> 时间：2012-06-21T05:41:42.700
> 
> 标签：c, linux, unix, debian, header-files

debian 在哪里存储 C 头文件`stdio.h`等`string.h`？我正在做一个项目，我需要在该位置添加一个头文件，但我无法在任何地方找到它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-21T05:43:28.033

系统头文件在`/usr/include`，用户安装包的头文件在`/usr/local/include`.

但是，如果您正在编写其他项目将使用的库，则仅应将标头放在那里。否则，您应该使用`-I`编译器的标志来指定其他头文件搜索路径的位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T05:45:26.057

1.  通常在 /usr/include

2.  运行这样的命令以确保您拥有诸如编译器和标准头文件之类的“基础知识”并没有什么坏处：`apt-get install build-essential`

3.  其他一切都失败了，您也可以进行“查找”。例如：

    `find / -name stdio.h -print 2> /dev/null`

# node.js - CoffeeScript 和 NodeJS：如何导出多个类？

> ID：11132158
> 
> 赞同：7
> 
> 时间：2012-06-21T05:42:12.183
> 
> 标签：node.js, coffeescript, commonjs

我想导出一些类，比如说，`Dog`和`Cat`. 解决此问题的一种方法是：

```
class Dog
  bark: -> console.log "Arff! :D"

class Cat
  meaow: -> console.log "Meaw!"

module.exports = {Dog, Cat} 
```

如何在不输入两次类名的情况下做类似的事情？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T05:51:07.353

你可以使用这样的东西：

```
class exports.Dog
  bark: -> console.log "Arff! :D" 
```

这编译为：

```
exports.Dog = (function() {

  function Dog() {}

  Dog.prototype.bark = function() {
    return console.log("Arff! :D");
  };

  return Dog;

})(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T07:57:29.937

另一种方法是执行以下操作：

```
module.exports = 
   Dog: class Dog
          bark: -> console.log "Arff! :D"

   Cat: class Cat
         meaow: -> console.log "Meaw!" 
```

然后您可以执行以下操作：

```
animals = require './animals'

dog = new Animals.dog() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T07:51:28.923

一般来说，我想要一个局部变量（所以我不必一直输入`exports.x`）和一个导出变量（所以我最后不必一次定义所有导出），所以我执行以下操作：

```
exports.dog = class Dog
  bark: ->

exports.cat = class Cat
  meow: -> 
```

# c# - 将枚举转换为自定义对象列表？

> ID：11132160
> 
> 赞同：2
> 
> 时间：2012-06-21T05:42:24.587
> 
> 标签：c#, enums

我有这个枚举：

```
public enum Translation     
{   
    English=1,
    Russian, 
    French,  
    German  
} 
```

我有一个自定义对象

```
public class MyKeyValuePair
{
    string code {set;get;}
    string text {set;get;}

} 
```

我想将我的所有枚举成员都放入 MyKeyValuePair 列表中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T05:44:43.977

假设“代码”应该只是整数的字符串表示，听起来你想要这样的东西：

```
// Type and property names changed for sanity
var pairs = Enum.GetValues(typeof(Translation))
                .Cast<Translation>()
                .Select(t => new KeyValuePair { 
                            Code = ((int) t).ToString(),
                            Text = t.ToString()
                        }); 
```

请注意，使用枚举值名称作为其文本表示非常有限 - 您*只能*使用有效的 C# 标识符。从长远来看，您可能会发现使用属性来描述文本是有益的，至少作为替代：

```
public enum Translation {
    ...
    [Description("Traditional Chinese")]
    TraditionalChinese
} 
```

属性还允许您添加其他数据 - 例如，如果您不希望代码只是整数表示，则可以将其放入枚举中。您需要通过反射来获取属性。我支持`DescriptionAttribute`在[Unconstrained Melody](http://unconstrained-melody.googlecode.com)中，这使得各种枚举任务更简单，但其他属性需要更多的工作。

同样，另一种选择是使用集合初始化程序直接在代码中构建字典或集合。老实说，你所追求的还不够清楚。希望其中一些有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T05:45:44.103

简单的; 创建一个静态方法，如下所示：

```
public static mykeyvaluePair Translate(Translation translation) {
    switch(translation) {
        case Translation.English:
            return new mykeyvaluePair { code = "en", text = "English" };
        case Translation.Russian:
            return new mykeyvaluePair { code = "ru", text = "Russian" };
        default:
            return null;
    }
} 
```

# java - GraphicsConfiguration 与 Canvas3D 不兼容

> ID：11132162
> 
> 赞同：1
> 
> 时间：2012-06-21T05:42:39.357
> 
> 标签：java, java-3d, illegalargumentexception

我在 Java 应用程序中收到以下异常：

```
Exception in thread "AWT-EventQueue-0" java.lang.IllegalArgumentException:
Canvas3D: GraphicsConfiguration is not compatible with Canvas3D
    at javax.media.j3d.Canvas3D.checkForValidGraphicsConfig(Canvas3D.java:965)
    at javax.media.j3d.Canvas3D.<init>(Canvas3D.java:1032)
    ...etc... 
```

Canvas3D 的实例化如下：

```
GraphicsConfiguration graphicsConfiguration = SimpleUniverse.getPreferredConfiguration();
Canvas3D canvas3D = new Canvas3D(graphicsConfiguration); 
```

此代码在一台机器（HP dc7900 台式机）上正常工作，但不是几个较新的机器（HP 630 笔记本电脑）。所有运行XP。

[API 文档](http://docs.oracle.com/cd/E17802_01/j2se/javase/technologies/desktop/java3d/forDevelopers/J3D_1_3_API/j3dapi/javax/media/j3d/Canvas3D.html#Canvas3D%28java.awt.GraphicsConfiguration%29)说这个异常意味着“指定的 GraphicsConfiguration 不支持 3D 渲染”。这意味着什么？“首选配置”可能是从操作系统中获得的，因此反映了实际可能的情况......但我有点迷失了。

[错误报告](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4637651)建议将此代码作为替代：

```
GraphicsConfigTemplate3D template = new GraphicsConfigTemplate3D();
GraphicsConfiguration gc = GraphicsEnvironment.getLocalGraphicsEnvironment().
getDefaultScreenDevice().getBestConfiguration(template);
Canvas3D c3d = new Canvas3D(gc); 
```

但这并没有改变任何东西。

[类似的](http://www.mail-archive.com/java3d-interest@java.sun.com/msg25938.html) [问题](https://cn.forums.oracle.com/forums/thread.jspa?threadID=1272961#jive-message-5397301)似乎已经通过修改图形适配器设置或选择不同的渲染器来解决，例如：将位深度降低到 16，或运行 java with `-Dj3d.rend=d3d`，但这样做不会改变任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T23:33:54.517

事实证明，这只是 Java 版本不兼容：我从 1.7 降级到 1.6，一切正常。

# java - 一段时间后或基于用户请求的预定事件

> ID：11132164
> 
> 赞同：2
> 
> 时间：2012-06-21T05:42:41.840
> 
> 标签：java

我想在一段时间后或根据用户请求安排一个操作（任务）。在我的代码中，我有这样的东西

```
Timer timer = new Timer();
TimerTask timerTask = new TimerTask();
timer.schedule(timerTask,time);//Time in milli seconds

if(UserRequestedtoCancel)
{
  // Do operatation 
  timerTask.cancel(); 
} 
```

问题是我的任务在我指定的那个时间之后仍在执行，但只有一次。我是否还应该执行 timer.cancel() 或其他操作来避免执行任务？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T06:16:33.897

在调用 timerTask.cancel() 后设置 timerTask = null 对我有用。我让用户或调度程序只执行一次任务！

# tridion - 导入时出现错误“无法从链接字段中检索链接”

> ID：11132168
> 
> 赞同：0
> 
> 时间：2012-06-21T05:43:07.863
> 
> 标签：tridion, tridion-2011

我收到错误“使用内容搬运器导入内容时无法从链接字段中检索链接”。但我无法弄清楚问题究竟出在哪里。帮助！！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T06:47:00.587

我已经弄清楚了这个问题。结构组元数据模式发生了变化，其中有一个选择是或否的下拉菜单。当我在结构组中更改此值并完成保存并关闭时。然后问题解决了。对于某些页面，这个东西正在工作，但仍有一些页面没有被导入。

# javascript - 我想将第一个链接保留为使用 javascript 选择的默认值

> ID：11132170
> 
> 赞同：2
> 
> 时间：2012-06-21T05:43:11.667
> 
> 标签：javascript, extjs

我想将第一个链接保留为使用 javascript 选择的默认链接，这是我的代码。目前它显示活动状态和悬停状态。但我想默认选择第一个链接，当用户点击第二个链接时，第一个链接将处于正常状态。：

```
<table width=100% height=20% border=0 cellspacing=0 cellpadding=0
       style=margin:20px>
 <tr>
  <td>
   <a onclick="selectElement(this)"
      href=javascript:getBasicInfoPanel();
      style=font-weight:normal
      class="linkbold">Basic</a></td>
 </tr>
 <tr>
  <td style=padding-top:5px;>
   <a onclick="selectElement(this)"
      href=javascript:getNetworkPanel();
      style=font-weight:normal
      class="linkbold">Network</a></td>
 </tr>
 <tr>
  <td style=padding-top:5px;>
   <a onclick="selectElement(this)"
      href=javascript:getNetworkPanel2();
      style=font-weight:normal
      class="linkbold">Basic3</a>   
  <td>
 </tr>
</table> 

var selectedElement;
function selectElement(elem) {
    /* Select new element */
    elem.attributes["class"].value = "linkbolds";
    /* Unselect currently selected */
    if (selectedElement) {
        selectedElement.attributes["class"].value = "linkbold";
    }
    selectedElement = elem;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T05:50:24.267

也许这就是你需要的 -

```
var selectedElement; 
function selectElement(elem) {     
   /* Select new element */     
   elem.className = "linkbolds";//used className instead of attributes["class"].value 

   /* Unselect currently selected */     
   if (selectedElement) {         
      selectedElement.className = "linkbold";//used className instead
   }     

   selectedElement = elem; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T06:18:22.383

如果您使用的是 ExtJS，那么您可以这样做：

```
Ext.select('a').on('click', function(e, target){
    Ext.select('a').removeCls('linkbold');
    Ext.get(target).addCls('linkbold');
}, null, {preventDefault:true});​ 
```

这假设标记如下：

```
​&lt;ul id="menu">
  <li><a href="#">1</a></li>
  <li><a href="#">2</a></li>
  <li><a href="#">3</a></li>
</ul> 
```

让我们说一些 CSS，例如：

```
​a {
    display: block;
    background-color: #ccc;
    color: #fff;
    padding: 2px;
    text-decoration: none;
}

a.linkbold {
    background-color: #c00;
}​ 
```

​有关操作 Ext 元素的更多文档，请参阅[http://docs.sencha.com/ext-js/4-0/#!/api/Ext.Element](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.Element)。

* * *

**编辑**

更新的 JavaScript：

```
Ext.onReady(function(){

    Ext.select('table a').on('click', function(e, target){
        Ext.select('table a').removeCls('linkbold');
        Ext.get(target).addCls('linkbold');
    }, null, {preventDefault:false});

}); 
```

更新的 HTML：​</p>

```
<table width="100%" height="20%" border="0" cellspacing="0" cellpadding="0"
       style="margin:20px">
 <tr>
  <td>
   <a href="javascript:getBasicInfoPanel();"
      style="font-weight:normal"
      class="linkbold">Basic</a></td>
 </tr>
 <tr>
  <td style="padding-top:5px;">
   <a href="javascript:getNetworkPanel();"
      style="font-weight:normal">Network</a></td>
 </tr>
 <tr>
  <td style="padding-top:5px;">
   <a href="javascript:getNetworkPanel2();"
      style="font-weight:normal">Basic3</a>   
  <td>
 </tr>
</table> ​​​​​​​​​​​​​​​​​​​​​​ 
```

# cairo - 可滚动绘图区中的开罗

> ID：11132177
> 
> 赞同：2
> 
> 时间：2012-06-21T05:43:45.737
> 
> 标签：cairo, gtk3

我在 Ubuntu 11.04 (Natty) 上使用 gtk+-3.2.4。我正在尝试使用 Cairo 绘制 GtkDrawingArea 并使绘图区域可滚动。代码运行没有错误，但没有完成绘图。我究竟做错了什么 ？

```
// gcc -Wextra -o scrol `pkg-config --cflags --libs gtk+-3.0` scrol1.c

#include <gtk/gtk.h>

#define WINDOW_WIDTH  800
#define WINDOW_HEIGHT 600

static gboolean draw_cb (GtkWidget *widget, GdkEventExpose *event) 
{
  cairo_t *cr;
  cr = gdk_cairo_create (gtk_widget_get_window (widget));
  cairo_set_source_rgb(cr, 1, 1, 1);
  cairo_paint(cr);
  cairo_set_source_rgb (cr, 0.42, 0.65, 0.80);
  cairo_set_line_width (cr,6);
  cairo_rectangle (cr, 3, 3, 100, 100);
  cairo_stroke (cr); 
  cairo_destroy(cr);
  return FALSE;
}

int main (int argc, char *argv[])
{
  gtk_init (&argc, &argv);
  GtkWidget *window;
  GtkWidget *grid;
  GtkWidget *swindow;
  GtkWidget *viewport;
  GtkWidget *darea;

  window = gtk_window_new (GTK_WINDOW_TOPLEVEL);
  grid = gtk_grid_new();
  swindow = gtk_scrolled_window_new (NULL,NULL);
  viewport = gtk_viewport_new (NULL,NULL);
  darea = gtk_drawing_area_new();

  gtk_container_add (GTK_CONTAINER(viewport), darea);
  gtk_container_add (GTK_CONTAINER(swindow), viewport);
  gtk_grid_attach (GTK_GRID(grid), swindow, 0, 1, 1, 2);
  gtk_container_add (GTK_CONTAINER(window), grid);

  g_signal_connect (window, "destroy", G_CALLBACK (gtk_main_quit), NULL);
  g_signal_connect (darea, "draw", G_CALLBACK(draw_cb),  NULL);

  gtk_widget_show_all (window);
  gtk_main ();
  return 0;
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T20:57:50.593

这是您的代码创建的窗口的屏幕截图：

![窗口截图](../Images/521e377275e7376cc21e608b6fef2b5b.png)

我想你期待看到一个正方形。但是，您所看到的只是该正方形的左上角。这是因为绘图区域请求的空间非常小，导致窗口很小。这意味着您的精彩作品正在被剪裁以适合这个最小尺寸的窗口。你可以做几件事：

1.  设置包含绘图区域的滚动窗口的最小尺寸：

    ```
    gtk_widget_set_size_request( swindow, 500, 500 ); 
    ```

    这将导致一个 500 x 500 像素的绘图区域可见（这比您需要的正方形要多得多）。但是，如果您将窗口放大，则绘图区域将不会填满它。

2.  将滚动窗口设置为占据它可以获得的所有水平和垂直空间：

    ```
    gtk_widget_set_hexpand( swindow, TRUE );
    gtk_widget_set_vexpand( swindow, TRUE ); 
    ```

    如果您只是这样做，那么窗口最初看起来与原始代码中的窗口相同。但是，如果您手动调整窗口大小，您会看到滚动窗口（以及绘图区域）会扩展以填充窗口中的所有空间。如果你把它扩展得足够大，你会看到你的正方形。

如果您将上述两者结合起来，那么您将得到一个最初约为 500x500 像素的窗口。如果您调整它的大小，那么绘图区域将扩大以填满窗口。

您还可以添加一个`gtk_widget_set_size_request`调用来设置绘图区域小部件的大小。如果您将其设置为大于滚动窗口的大小，那么您将获得滚动条。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T15:29:11.823

绘图已完成，但它就在窗口的左上角。我添加了以下两个调用，对我来说一切都很好：

```
gtk_widget_set_hexpand(GTK_WIDGET(swindow), TRUE);  
gtk_widget_set_vexpand(GTK_WIDGET(swindow), TRUE); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T08:10:30.033

尝试`TRUE`从`on_draw()`回调返回以阻止默认处理程序；也许默认处理程序是在您的绘图上绘制空白空间？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T00:04:47.397

```
// gcc -Wextra -o grid1 `pkg-config --cflags --libs gtk+-3.0` grid1.c

#include <gtk/gtk.h>

#define WINDOW_WIDTH  200
#define WINDOW_HEIGHT 80

static gboolean draw_cb (GtkWidget *widget, GdkEventExpose *event) 
{
  cairo_t *cr;
  cr = gdk_cairo_create (gtk_widget_get_window (widget));
  cairo_set_source_rgb(cr, 1, 1, 1);
  cairo_paint(cr);
  cairo_set_source_rgb (cr, 0.42, 0.65, 0.80);
  cairo_set_line_width (cr,6);
  cairo_rectangle (cr, 3, 3, 400, 100);
  cairo_stroke (cr);
  cairo_destroy(cr);
  return TRUE;
}

int main (int argc, char *argv[])
{
  gtk_init (&argc, &argv);
  GtkWidget *window;
  GtkWidget *grid;
  GtkWidget *swindow;
  GtkWidget *viewport;
  GtkWidget *darea;

  window = gtk_window_new (GTK_WINDOW_TOPLEVEL);
  grid = gtk_grid_new();
  swindow = gtk_scrolled_window_new (NULL,NULL);
  viewport = gtk_viewport_new (NULL,NULL);
  darea = gtk_drawing_area_new();

  gtk_widget_set_size_request (window, 200, 100);
  gtk_widget_set_size_request (darea, 406, 106);

  gtk_scrolled_window_set_policy (GTK_SCROLLED_WINDOW (swindow),
                                  GTK_POLICY_ALWAYS,
                                  GTK_POLICY_NEVER);

  gtk_widget_set_hexpand(GTK_WIDGET(swindow), TRUE);  
  gtk_widget_set_vexpand(GTK_WIDGET(swindow), TRUE);

  gtk_container_add (GTK_CONTAINER(viewport), darea);
  gtk_container_add (GTK_CONTAINER(swindow), viewport);
  gtk_grid_attach (GTK_GRID(grid), swindow, 0, 0, 1, 1);                 
  gtk_container_add (GTK_CONTAINER(window), grid);

  g_signal_connect (window, "destroy", G_CALLBACK (gtk_main_quit), NULL);
  g_signal_connect (darea, "draw", G_CALLBACK(draw_cb),  NULL);

  gtk_widget_show_all (window);
  gtk_main ();
  return 0;
  } 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-07-03T23:35:37.530

我想到了。

[http://www.gtkforums.com/viewtopic.php?f=3&t=988&p=195381#p195381](http://www.gtkforums.com/viewtopic.php?f=3&t=988&p=195381#p195381)

# python - 如何使用 BioPython 解析模棱两可的字符

> ID：11132178
> 
> 赞同：3
> 
> 时间：2012-06-21T05:43:49.110
> 
> 标签：python, parsing, sequence, biopython

我是 Python 和一般编程的新手。我已经安装了 BioPython，希望它的一些组件可以帮助我编写一个脚本。该脚本需要处理许多 xread 文件，每个文件都包含一个矩阵，我需要以多种方式对其进行切片。我希望已经存在一个序列数据类型或类（有区别吗？），它允许以非 IUPAC 格式编码的不明确字符的序列所需的奇怪方式进行索引。例如，在序列中。

```
2-123[01]3-22 
```

字符串文字中的字符表示所表示的 DNA 序列中`[01]`的单个模棱两可的字符，或者`0`或。`1`所以切片`[-6:]`应该返回`3[01]3-22`。我在 BioPython 文档中找不到任何关于此的内容，尽管我可能忽略了它。如果 BioPython 中有一些东西可以做到这一点，你能指点我看相关的文档吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T17:49:38.280

我不是 BioPython 专家，但您可以定义自己的类以按照您需要的方式工作。您需要先解析它，也许使用[正则表达式](http://docs.python.org/library/re.html)。例如：

```
import re
class Sequence(list):
    def __init__(self, s):
        if isinstance(s, str):
            self.extend(re.findall(r'[^\[\]]|\[\d+\]', s))
        else:
            list.__init__(self, s)
    def __str__(self):
        return ''.join(self)
    def __getslice__(self, i, j):
        l = list(self)
        return Sequence(l[i:j]) 
```

测试它：

```
In [1]: seq = Sequence('2-123[01]3-22') 
```

里面有一个清单...

```
In [2]: seq
Out[2]: ['2', '-', '1', '2', '3', '[01]', '3', '-', '2', '2'] 
```

但表现得像一个字符串！

```
In [3]: print seq
2-123[01]3-22
In [4]: print seq[-6:]
3[01]3-22 
```

也许您需要定义一些其他[方法](http://docs.python.org/reference/datamodel.html#special-method-names)来获得所需的行为。

# blackberry - 从服务器下载黑莓中的图像？

> ID：11132181
> 
> 赞同：2
> 
> 时间：2012-06-21T05:43:59.747
> 
> 标签：blackberry, blackberry-simulator, httpconnection, fileinputstream

我正在使用 HTTPConnections & Filesystems 下载图像并将该图像保存在黑莓模拟器 SDCard 中。当我执行代码时，它在 BB 9800 模拟器（操作系统版本 6.0）和 BB 9550 模拟器（操作系统版本 5.0）中运行良好。但是当我在 BB 9900 Simulator（操作系统版本 7.1）中执行相同的代码时，没有得到输出（我的意思是不将图像保存在 SDCard 中）。以下是我正在使用的以下代码..

代码：

MyApp.java

```
 public class MyApp extends UiApplication
 {
/**
 * Entry point for application
 * @param args Command line arguments (not used)
 */ 
   public static void main(String[] args)
  {
    // Create a new instance of the application and make the currently
    // running thread the application's event dispatch thread.
    MyApp theApp = new MyApp();       
    theApp.enterEventDispatcher();
  }
/**
 * Creates a new MyApp object
 */
   public MyApp()
  {        
    // Push a screen onto the UI stack for rendering.
    pushScreen(new MyScreen());
 }    
} 
```

MyScreen.java

```
 public final class MyScreen extends MainScreen
 {
/**
 * Creates a new MyScreen object
 */
  public MyScreen()
  {        
    // Set the displayed title of the screen       
    setTitle("MyTitle");        
    LabelField title = new LabelField("hiiiiiiiiiiii", LabelField.ELLIPSIS);
    add(title);
    DownloadHelper downloader = new DownloadHelper("http://www.google.co.in/images/srpr/logo3w.png");
    System.out.println("this is downloader");
    Thread worker = new Thread(downloader);
    worker.start();     
   }
  } 
```

下载Helper.java

```
 public class DownloadHelper implements Runnable{

private String _url;

   public DownloadHelper(String url) {
      _url = url;
   }
public void run() {
    // TODO Auto-generated method stub

    System.out.println("---------------download helper page");
    HttpConnection connection = null;
      OutputStream output = null;
      InputStream input = null;
      try {
         // Open a HTTP connection to the webserver
         connection = (HttpConnection) Connector.open(_url);
         // Getting the response code will open the connection, send the request,
         // and read the HTTP response headers. The headers are stored until requested.
         if (connection.getResponseCode() == HttpConnection.HTTP_OK) {
             System.out.println("----------------http connection response");
            input = new DataInputStream(connection.openInputStream());
            int len = (int) connection.getLength();   // Get the content length
            if (len > 0) {
                System.out.println("--------------entered into condition");
               // Save the download as a local file, named the same as in the URL
               String filename = _url.substring(_url.lastIndexOf('/') + 1);
               FileConnection outputFile = (FileConnection) Connector.open("file:///SDCard/BlackBerry/pictures/" + filename, 
                     Connector.READ_WRITE);
               if (!outputFile.exists()) {
                  outputFile.create();
               }
               // This is probably not a robust check ...
               if (len <= outputFile.availableSize()) {
                  output = outputFile.openDataOutputStream();
                  // We'll read and write this many bytes at a time until complete
                  int maxRead = 1024;  
                  byte[] buffer = new byte[maxRead];
                  int bytesRead;

                  for (;;) {
                     bytesRead = input.read(buffer);
                     if (bytesRead <= 0) {
                        break;
                     }
                     output.write(buffer, 0, bytesRead);
                  }
                  output.close();
               }
            }
         }
      } catch (java.io.IOException ioe) {
         ioe.printStackTrace();
      } finally {
         try {
            if (output != null) {
               output.close();
            }
            if (connection != null) {
               connection.close();
            }
            if (input != null) {
               input.close();
            }
         } catch (IOException e) {
            // do nothing
         }
      }
      System.out.println("download completed.......");
}
} 
```

以下是我用来下载图像并将其保存在 BB SDCard 中的代码。

在黑莓模拟器中：

BB 9550 (5.0 OS) ---- 工作（在 SDCard 中保存图像）
BB 9800 (6.0 OS) ---- 工作（在 SDCard 中保存图像）
**BB 9900 (7.1 OS) ---- 不工作（不保存图像在 SD 卡中）**

任何人都可以帮我解决这个问题.. 等待您的回复并提前感谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T06:50:46.877

我刚刚在我的 9900 OS 7.1 模拟器上运行了代码，它对我有用。这并不意味着代码是完美的，并且在异常情况下不会失败。但是，这是我的猜测：

每个模拟器都有单独的设置。您还记得为您的 9900 模拟器设置 SDCard 吗？在模拟器菜单上，转到**Simulate** -> **Change SD Card ...**并确保 SDCard 已设置。例如，我通常只在我的计算机上使用一个 SDCard 目录，`C:\temp\SDCard`以便我可以运行不同的模拟器，并拥有相同的 /SDCard/BlackBerry/pictures/ 目录。

![在此处输入图像描述](../Images/e8e5ba8b83b65773c53b83808c953abd.png)

正如我在发布的答案中提到的那样`DownloadHelper`，代码假定文件夹 /SDCard/BlackBerry/pictures 存在。如果该文件夹不存在，您可能希望使用代码[创建该文件夹`mkdirs()`](http://www.blackberry.com/developers/docs/5.0.0api/java/io/File.html#mkdirs())，或者至少检查您的模拟器正在使用的 SDCard 文件夹，并确保那里已经有一个**BlackBerry/pictures**文件夹。

否则，只需使用调试器，并尝试确定哪一行`DownloadHelper.run()`失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-07T07:00:53.870

我有同样的问题，但我通过以下方式解决了它。

**Step1：**设置java主路径：

```
set JAVA_HOME=C:\Program Files\Java\jre6 
```

**Step2：**选择项目->点击运行配置->选择模拟器选项卡->勾选启动MDS与模拟器的连接服务

**Step3 :** 双击`rub.bat`文件，位于 中`MDS`，该文件位于我系统中安装 Eclipse 的位置，该文​​件夹位于

```
F:\eclipse\eclipse\plugins\net.rim.ejde.componentpack7.1.0_7.1.0.10\components\MDS 
```

**Step4：**双击`run.bat`文件。cmd.exe 将执行并启动服务器。

**Step5：**现在运行模拟器

我希望这将有所帮助。

# javascript - 如何在javascript中从嵌套函数中设置变量

> ID：11132183
> 
> 赞同：1
> 
> 时间：2012-06-21T05:44:06.113
> 
> 标签：javascript

我正在使用 knockoutjs，这是简化的视图模型：

```
 var app = function(){
     var self = this;
     this.index = 0;
     myfunction = function(){
         //how can i modify index here      
         self.index = 1;
     };
     console.log(self.index);  // i want to output 1 here , rather than 0
}; 

new app();​ 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T06:03:50.053

这是否与 knockout.js 相关，或者您只是想对一个简单的 ECMAScript 问题进行排序？任何...

通常最好不要在声明的地方使用函数表达式，构造函数应该以大写字母开头，让其他人知道他们是构造函数。

```
function App() {
    var self = this; 
```

目前尚不清楚您为什么要这样做。保持对*this*的引用在构造函数中并不常见。

```
 this.index = 0;
    myfunction = function(){ 
```

这就是你遇到麻烦的地方。当构造函数第一次被调用时，上面会创建一个名为*myfunction*的全局变量。那个概率不是你想做的。函数声明将明确地保持本地化。但无论如何，该功能应该可能在 App.prototype 上。

```
 function myFunction() { 
```

.

```
 //how can i modify index here
      self.index = 1;
  }; 
```

该函数将修改 index 属性，但前提是它被调用。所以你可能会做的是：

```
function App(){
    this.index = 0;  // Each instance will have an index property
}

// All instances will share a myfunction method
App.prototype.myfunction = function() {
    this.index = 1;
    console.log(this.index);
}

var app = new App();
app.myfunction();  // 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T05:46:09.393

我会像这样初始化函数：

```
this.myfunction = function(){ 
  self.index = 1;
}; 
```

然后就叫它：

```
var test = new app();​

test.myfunction();
console.log(test.index); 
```

初始化时不会调用您的函数，因此不会执行内部代码。

但是，在您的情况下，这应该足够了（将您的代码更改为类似于此）：

```
myfunction();
console.log(self.index);  // i want to output 1 here , rather than 0 
```

# maven - 重用 Maven 配置

> ID：11132186
> 
> 赞同：1
> 
> 时间：2012-06-21T05:44:36.983
> 
> 标签：maven, maven-3, m2eclipse, profiles

在 Maven 中创建可重用的依赖定义和配置文件的最佳方法是什么？

我想将集成测试的依赖项和配置文件外部化到一个单独的 pom 中，它可以包含在其他 maven 项目中（不是从单个父 pom 继承）。稍后，我可以在控制台和 Eclipse 的不同应用程序服务器上运行集成测试时激活配置文件。

```
integrations-tests
    pom.xml (contains Arquillian dependencies and profiles)
        profile:jboss-remote
        profile:tomcat-embedded
        dependencies:Arquillian,Java EE,MavenShrinkWrap etc.
project1
    pom.xml
        dependency:integration-tests (or other way to include)
project2
    module1
        pom.xml
            dependency:integration-tests (or other way to include)

mvn test -P jboss-remote (profile from integrations-tests)
mvn test -P tomcat-embedded (profile from integrations-tests) 
```

我不想弄乱本地 settings.xml，因为配置文件应该可以被许多开发人员和 CI 服务器重用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T06:09:40.950

你会想看看maven [pom](http://maven.apache.org/pom.html)`<dependencyManagement>`的配置来实现这一点。您可以查看有关[依赖管理](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Dependency_Management)和[构建配置文件](http://docs.codehaus.org/display/MAVEN/Build+Profiles)的 maven 注释（后者已过时）。`<pluginManagement>`

根据您的要求类型，您可能有一个挑战`externalizing`配置文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-05T08:12:26.173

这实际上是一个很好且有趣的问题。

简而言之，没有什么好方法可以实现你想要的。您正在寻找的是用于共享配置的 Mix-in，但在 Maven（当前）中共享配置的主要方式主要是通过继承。

因此，您可能做的最好的事情是将所有这些共享配置放在父 POM 中，并通过使用 Profile 来打开/关闭。但是，如果您想在一个模块中打开但在另一个模块中关闭，则可能会很困难。

混入仅可用作依赖范围导入。但是使用相当有限（仅影响dependencyManagement）。您可以看看它是否可以满足您的部分需求。

# xml - XML - 附加到命名空间的数字

> ID：11132190
> 
> 赞同：0
> 
> 时间：2012-06-21T05:44:47.313
> 
> 标签：xml, namespaces

这是一个 WSDL：

```
 <types>
<!—Namespace declaration -->
<s:schema elementFormDefault="qualified" targetNamespace="http://KeithPij.org/WSLibrary/MyStore">

  <!—Element declaration for PlaceOrder request messages -->
  <s:element name="PlaceOrder">
    <s:complexType>
      <s:sequence>
        <s:element minOccurs="0" maxOccurs="1" name="objOrder" type="s0:Order" />
      </s:sequence>
    </s:complexType>
  </s:element>

  <!—Type definition for the Order class -->
  <s:complexType name="Order">
    <s:sequence>
      <s:element minOccurs="1" maxOccurs="1" name="OrderID" type="s:long" />
      <s:element minOccurs="1" maxOccurs="1" name="ProductID" type="s:long" />
      <s:element minOccurs="0" maxOccurs="1" name="ProductName" type="s:string" />
      <s:element minOccurs="1" maxOccurs="1" name="Quantity" type="s:int" />
      <s:element minOccurs="1" maxOccurs="1" name="UnitPrice" type="s:decimal" />
      <s:element minOccurs="1" maxOccurs="1" name="OrderDate" type="s:dateTime" />
    </s:sequence>
  </s:complexType>

  <!—Element declaration for PlaceOrder response messages -->
  <s:element name="PlaceOrderResponse">
    <s:complexType>
      <s:sequence>
        <s:element minOccurs="0" maxOccurs="1" name="PlaceOrderResult" type="s0:Confirm" />
      </s:sequence>
    </s:complexType>
  </s:element>

  <!—Type definition for the Confirm class -->
  <s:complexType name="Confirm">
    <s:sequence>
      <s:element minOccurs="1" maxOccurs="1" name="OrderID" type="s:long" />
      <s:element minOccurs="0" maxOccurs="1" name="Status" type="s:string" />
    </s:sequence>
  </s:complexType>

  <!—Element declaration for CheckOrder request messages -->
  <s:element name="CheckOrder">
    <s:complexType>
      <s:sequence>
        <s:element minOccurs="1" maxOccurs="1" name="nOrderID" type="s:int" />
      </s:sequence>
    </s:complexType>
  </s:element>

  <!—Element declaration for CheckOrder response messages-->
  <s:element name="CheckOrderResponse">
    <s:complexType>
      <s:sequence>
        <s:element minOccurs="0" maxOccurs="1" name="CheckOrderResult" type="s0:Confirm" />
      </s:sequence>
    </s:complexType>
  </s:element>

</s:schema> 
```

请有人解释一下这是什么意思：type="s0:Order"。如果写成 type="s:Order" 我会理解的，它是在命名空间 "s" 中声明的类型，但是这个 "s0" 是从哪里来的呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T08:08:27.787

你做了错误的假设。类型 Order 未在命名空间“s”中声明。从我在这里看到的 -

```
<s:schema>
....
    type="s:dateTime" 
```

's' 是命名空间[http://www.w3.org/2001/XMLSchema](http://www.w3.org/2001/XMLSchema)。您的自定义类型 Order 不可能成为此架构的一部分。在顶层（<wsdl> 元素）上显示完整的 WSDL 和声明的名称空间。

并且 s0: 表示这是为模式中定义的自定义类型自动生成的标识符。

# linux - Shell 脚本 - 在循环中使用变量

> ID：11132192
> 
> 赞同：0
> 
> 时间：2012-06-21T05:45:09.237
> 
> 标签：linux, postgresql, shell

我使用以下命令授予 postgres db。这是工作。

```
for tbl in `psql -qAt -c "select sequence_name from information_schema.sequences where sequence_schema = 'public';" performanceeyedev` ; do  psql -c "alter table $tbl owner to prodteam" performanceeyedev ; done 
```

我为授予 postgres db 编写了以下脚本。但它不起作用。

```
DB = 'performanceeyedev';
OWNER = 'prodteam';

for tbl in `psql -qAt -c "select sequence_name from information_schema.sequences where sequence_schema = 'public';" $DB` ;
do  psql -c "alter table $tbl owner to $OWNER" $DB ; done

for tbl in `psql -qAt -c "select table_name from information_schema.views where table_schema = 'public';" $DB` ;
do  psql -c "alter seq $tbl owner to $OWNER" $DB ; done 
```

它产生以下结果

```
./grant.sh: line 1: DB: command not found
./grant.sh: line 2: OWNER: command not found
ERROR:  syntax error at end of input
LINE 1: alter table dir_destinations_dir_dest_id_seq owner to 
                                                              ^
ERROR:  syntax error at end of input
LINE 1: alter table dir_types_dir_type_id_seq owner to 
                                                       ^
ERROR:  syntax error at end of input
LINE 1: alter table dir_specialities_dir_sp_id_seq owner to 
                                                            ^
ERROR:  syntax error at end of input
LINE 1: alter table lb_report_types_id_seq owner to 
                                                    ^
ERROR:  syntax error at end of input
LINE 1: alter table too_many_submission_summary_id_seq owner to 
                                                                ^
ERROR:  syntax error at end of input
LINE 1: alter table web_campaigns_web_camp_id_seq owner to 
```

请帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T06:14:30.807

分配变量时不要在变量和'='之间留空格

```
DB='performanceeyedev';
OWNER='prodteam'; 
```

# android - 在 WebView android 中播放 youtube 视频

> ID：11132195
> 
> 赞同：1
> 
> 时间：2012-06-21T05:45:22.103
> 
> 标签：android, youtube, youtube-api, android-webview

我想在我的 WebView中播放**Youtube 视频。**我知道这是 StackOverflow 上的一个重复问题，但我仍然没有得到解决方案。

我使用 android 2.2 及更高版本。我尝试了 HTML5，但我的设备不支持它。
我从过去 5 天开始在谷歌上搜索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-30T17:49:15.157

我会推荐在[https://developers.google.com/youtube/android/player/找到的 Google 自己的 youtube android api](https://developers.google.com/youtube/android/player/)

# javascript - 带有手风琴标题的 Jquery 图像库

> ID：11132198
> 
> 赞同：3
> 
> 时间：2012-06-21T05:45:29.203
> 
> 标签：javascript, jquery, html, css

我正在寻找右侧带有手风琴标题的 jquery 图片库插件，就像这样（[请参阅](http://www.brothersoft.com/windows/)）。
我搜索了很多，但没有找到。我找到了一些相关的插件，如 jQuery.slideBanjo（[请参阅](http://www.gbws.ru/content/downloads/sbanjodemo/)）和 Featured Content Slider Using jquery-ui（[请参阅](http://webdeveloperplus.com/jquery/featured-content-slider-using-jquery-ui/)）。但他们不好。

请有人告诉我一个他们知道的好插件。
谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T07:23:22.347

看看这个

[斯莱多里昂](http://www.slidorion.com/)

它有滑块和手风琴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T07:13:36.433

这里有几个插件可以帮助你：

*   [带有 jQ​​uery 和 CSS3 的优雅手风琴](http://tympanus.net/codrops/2010/04/26/elegant-accordion-with-jquery-and-css3/)
*   [为您的网站创建一个 jQuery Accordion 图像滑块](http://www.aoclarkejr.com/tutorial-jquery-accordion-slider.html)
*   [jQueryUI 手风琴](http://jqueryui.com/demos/accordion/)
*   [jQuery Easy 手风琴插件](http://www.madeincima.it/download/samples/jquery/easyAccordion/)
*   [如何创建手风琴菜单（CSS3+jQuery）（教程）](http://designmodo.com/jquery-accordion-menu/)
*   [jQuery – 手风琴图像菜单插件](http://web-argument.com/2011/03/07/jquery-accordion-image-menu-plugin/)

对于那些显示文本的手风琴插件，您可以将其替换为您的图库图像。

希望它有所帮助。

# c# - C# 数据库检索

> ID：11132202
> 
> 赞同：0
> 
> 时间：2012-06-21T05:45:38.497
> 
> 标签：c#

我再次无法得到我的查询的答案。我编写了代码来从数据库中检索数据并通过选择下拉列表将其加载到文本框中。如果我在下拉列表中选择了我的数据，它不会给出准确的答案，而是显示选定的索引 0。我的意思是它会显示“-Select-”。文本框中没有做任何事情。我检查了我的 asp 页面上的 OnSelectedIndex 和 AutoPostBack=True。请纠正我..这是我的代码：

```
//This is for retrieval of data to dropdown list.
 public void engi()
    {
        DropDownList1.Items.Clear();
        ListItem l = new ListItem();
        l.Text = "-Select-";
        DropDownList1.Items.Add(l);
        DropDownList1.SelectedIndex = 0;
        Conhr.Open();
        SqlCommand cmd = new SqlCommand("select EmployeeName from tbl_EmploeeDetails where Designation like('%Engineer') ", Conhr);
        //SqlCommand cmd=new SqlCommand("select  Sitecode from MRsite where Sitealiasname in (select Componetcode from tbl_Component where Sitecode='" + TextBox1.Text.Trim() + "'");
        SqlDataReader dr;
        dr = cmd.ExecuteReader();
        while (dr.Read())
        {
            ListItem n = new ListItem();
            n.Text = dr["EmployeeName"].ToString().Trim();
            DropDownList1.Items.Add(n);
        }
        dr.Close();
        Conhr.Close();
    }

//This is for retrieval data for text box by selecting DropDown List
 public void des()
    {
        Conhr.Open();
        string s3;
        s3 = "select Designation from tbl_EmploeeDetails where EmployeeName='" + DropDownList1.SelectedItem.Text + "'";
        SqlCommand c3 = new SqlCommand(s3, Conhr);
        SqlDataReader d3;
        d3 = c3.ExecuteReader();
        while (d3.Read())
        {
            TextBox1.Text = d3["Designation"].ToString().Trim();

        }
        d3.Close();
        Conhr.Close();
    }
//Called the method for data retrieval for Textbox

 protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
    {
        des();

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T05:53:06.143

我很高兴您发布了您的代码（很好！） - 但我们需要更多信息。

建议：

1) 直接查询您的数据库（例如使用MSSQL GUI）。找到一个有效的“选择”语句。

2) 进入调试器。在查询之前打印您的 SQL（例如“s3”）。

3）将“好查询”与“失败”查询进行比较。

问题可能就像拼写错误一样简单：

```
-- Maybe you meant "tbl_EmployeeDetails" here?
s3 = 
  "select Designation from tbl_EmploeeDetails where EmployeeName='" +       
  DropDownList1.SelectedItem.Text + "'"; 
```

# java - java.nio.channels.IllegalBlockingModeException，同时通过通道从客户端读取内容

> ID：11132206
> 
> 赞同：1
> 
> 时间：2012-06-21T05:45:59.183
> 
> 标签：java, sockets, networking, nio, socketchannel

我对 NIO 非常陌生，我正在构建一个聊天应用程序，我在所有客户端中都建立了连接，但是在从客户端读取内容时我得到了`java.nio.channels.IllegalBlockingModeException`。请帮助我这里是发生异常的代码。发生异常`while (rbc.read(b) != -1)`时`PrintRequest class`

```
public class PrintRequest extends Thread
{

    public  PrintRequest(SocketChannel sc,int i)throws Exception
    {
        System.out.println("going to enter the try block of PrintRequest");        
        try
        {   
               System.out.println("Am in the try block of PrintRequest");    

               ReadableByteChannel rbc = Channels.newChannel(sc.socket().getInputStream()); 
               System.out.println("checking in PrintRequest 0001");
               WritableByteChannel wbc = Channels.newChannel(System.out); 
               System.out.println("checking in PrintRequest 0010");
               ByteBuffer b = ByteBuffer.allocateDirect(1024); // read 1024 bytes 
                // int numBytesRead = sc.read(b);
                 System.out.println("checking in PrintRequest 0011");
                 while (rbc.read(b) != -1) 
                 {
                     System.out.println("Am  in while loop of PrintRequest ");
                    b.flip();
                    while (b.hasRemaining())
                    { 
                         wbc.write(b);
                         System.out.println();
                    }
                    b.clear();
                 }

        }
        catch(Exception E)
        {
            System.out.println("Exception in printlnRequest  "+E);
        }                          
    }  } 
```

我的服务器代码：

```
public class Server
{

  private Selector selector;

 private ServerSocketChannel channel;

  public void listner()
   {

           try
    {
      this.selector = Selector.open();
      this.channel = ServerSocketChannel.open();
      this.channel.configureBlocking(false);
      this.channel.socket().bind(new InetSocketAddress(8888));
      this.channel.register(this.selector, 16);
    }
    catch (IOException e)
    {
      throw new RuntimeException("Could not register listener", e);
    }}

  public void non_Socket()throws Exception
    {

        try
        {
             int i=0;
             this.channel = ServerSocketChannel.open();
             this.channel.configureBlocking(false);
             this.channel.socket().bind(new InetSocketAddress(80));

            while(true)
            {

                this.selector = Selector.open();
                this.channel.register(this.selector, 16);

                Set<SelectionKey> keys = this.selector.selectedKeys();
                Iterator<SelectionKey> iterator = keys.iterator();
                int readyChannels = selector.select();
                if(readyChannels == 0) continue;
                Set<SelectionKey> selectedKeys = selector.selectedKeys();
                Iterator<SelectionKey> keyIterator = selectedKeys.iterator();
                while(keyIterator.hasNext()) 
                {
                     SelectionKey key  = keyIterator.next();
                     if(key.isAcceptable()) 
                     {
                          // a connection was accepted by a ServerSocketChannel.
                          System.out.println("a connection was accepted by a ServerSocketChannel");
                          SocketChannel sc = this.channel.accept();
                          sc.configureBlocking(false);
                          System.out.println("Received an incoming connection from " + sc.socket().getRemoteSocketAddress()); 
                          System.out.println("checking 0101");
                          // new PrintRequest(sc,i).start(); 
                          System.out.println("checking 0110");

                          if(sc == null )
                            {
                                System.out.println("Please login");
                                Thread.sleep(6000);
                            }
                          else
                          {
                                System.out.println("Last Login was successful");
                               // new PrintRequest(sc,i).start(); 
                                PrintRequest pr=new PrintRequest(sc,i);
                                new Thread(pr).start();

                          }

                     }
                     else if (key.isConnectable())
                     {
                             // a connection was established with a remote server.
                         System.out.println("a connection was established with a remote server");

                     }
                     else if (key.isWritable()) 
                     {
                        // a channel is ready for writing
                         System.out.println(" a channel is ready for writing");
                     }

                     else if (key.isReadable()) 
                     {
                        // a channel is ready for reading
                         System.out.println(" a channel is ready for Reading");
                     } 
                     System.out.println(" a channel is prepare for Reading");
                     keyIterator.remove();
                     Thread.sleep(5000);
                }

           }
        }

        catch(Exception E)
        {
            System.out.println(" Here    : "+E);
        }
        finally
              { 
                   if (channel != null) 
                   { 
                    try 
                    { 
                            channel.close(); 
                    }
                    catch (Exception e) 
                    { 
                            e.printStackTrace(); 
                    }
                   }
               }
    }

    public static void main(String [] abc) throws Exception
    {
        new Server().non_Socket();
    }} 
```

客户端：

```
public class Client 
{

    public void non_Client_Socket()
    {
        SocketChannel sChannel=null;
        try
        {
            sChannel = SocketChannel.open();
            sChannel.connect(new InetSocketAddress("localhost", 80));
            while (!sChannel.finishConnect())
            {
                System.out.println("Channel is not connected yet");
                Thread.sleep(5000);
            }

            System.out.println("Channel is ready to use");

            /* ----------  going to send data to server ------------*/   
            System.out.println("please enter the text");
            BufferedReader stdin=new BufferedReader(new InputStreamReader(System.in));
            while(true)
                {
                    System.out.println("Enter the text");
                    String HELLO_REQUEST =stdin.readLine().toString();
                    if(HELLO_REQUEST.equalsIgnoreCase("end"))
                    {
                        break;
                    }

                    System.out.println("Sending a request to HelloServer");    
                    ByteBuffer buffer = ByteBuffer.wrap(HELLO_REQUEST.getBytes());    
                    sChannel.write(buffer); 
                }  
        }
        catch(Exception E)
        {

        }

         finally
        {       
            if (sChannel != null)
            {            
                try 
                {             
                   sChannel.close();            
                }
                catch (Exception e)
                {           
                    e.printStackTrace();       
                }       
            } 

        }  } 
         /* ----------  the data is written in sChannel server will read from this channel  ------------   */

    public static void main(String [] args)throws Exception
    {
        new Client().non_Client_Socket();
    }} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T07:11:56.200

```
ReadableByteChannel rbc = Channels.newChannel(sc.socket().getInputStream()); 
```

你的问题就在这里。您不能使用来自处于非阻塞模式的通道的流。无论如何，代码是毫无意义的，因为`sc`已经是 ReadableByteChannel。`sc`只需删除此行并使用而不是执行以下 I/O `rbc`。但见下文。

你还没有解决我在[上一篇文章](https://stackoverflow.com/questions/11099927/server-not-accepting-morethan-one-client-in-nio)中提到的任何问题。您的连接技术仍然是错误的，并且您正在调用 PrintRequest()，它以非阻塞模式循环读取，而不是为 OP_READ 注册接受的通道。代码仍然没有意义。

# ruby - 在 Lion 上安装 datamapper gem 时出错

> ID：11132207
> 
> 赞同：0
> 
> 时间：2012-06-21T05:46:02.697
> 
> 标签：ruby, gem, osx-lion, datamapper, ruby-datamapper

我正在尝试在 mac os x lion 上安装[datamapper](http://datamapper.org/) gem，但是在安装 sqlite 适配器时无法构建 gem 本机扩展（请参阅下面的终端输出）。我从谷歌和其他堆栈溢出问题中找到的两个解决方案是使用 sudo 或安装 Xcode，但我已经在使用 sudo 并从应用商店安装了 Xcode 4.3.3。

sudo gem install dm-sqlite-adapter 密码：构建原生扩展。这可能需要一段时间... 错误：安装 dm-sqlite-adapter 时出错：错误：无法构建 gem 原生扩展。

/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby extconf.rb mkmf.rb 在 /System/Library/Frameworks/Ruby.framework/Versions/1.8/ 找不到 ruby​​ 的头文件usr/lib/ruby/ruby.h

Gem 文件将继续安装在 /Library/Ruby/Gems/1.8/gems/do_sqlite3-0.10.8 以供检查。结果记录到 /Library/Ruby/Gems/1.8/gems/do_sqlite3-0.10.8/ext/do_sqlite3/gem_make.out

**gem_make.out**

/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby extconf.rb mkmf.rb 在 /System/Library/Frameworks/Ruby.framework/Versions/1.8/ 找不到 ruby​​ 的头文件usr/lib/ruby/ruby.h

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T06:53:08.413

好的，看起来您缺少 Xcode Preferences-General Xcode Command Line Tools。

如果没有命令行工具会生成上述错误，您可以从[http://developer.apple.com/downloads](http://developer.apple.com/downloads)下载它们（需要免费的 Apple ID）。

从 Xcode CLI 工具的描述中：

> 该软件包通过安装命令行开发工具以及 Mac OS X SDK 框架和***头文件***，通过终端实现 UNIX 风格的开发。包括许多有用的工具，例如 Apple LLVM 编译器、链接器和 Make。如果您使用 Xcode，这些工具也嵌入在 Xcode IDE 中，并且可以使用 Xcode 4.3 及更高版本中的“下载”首选项窗格安装在您的系统上。此软件包需要 Mac OS X 10.7.3 或更高版本。

另外，请参阅这篇[文章](http://kennethreitz.com/xcode-gcc-and-homebrew.html)，该文章建议您之前也卸载 xcode。

# drupal - 在 drupal 7 中创建内容时隐藏字段

> ID：11132208
> 
> 赞同：1
> 
> 时间：2012-06-21T05:46:03.967
> 
> 标签：drupal, drupal-7

我正在使用“Commerce Auction”模块自动从内容创建拍卖。我想这样当用户输入数据时，只显示一些字段。

我尝试过使用字段权限模块，但是当用户创建新内容时它无法隐藏字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T07:49:16.747

使用字段权限模块创建新内容时，您应该能够对用户隐藏字段

[http://drupal.org/project/field_permissions](http://drupal.org/project/field_permissions)

# sql - 对一张表中的多组合索引感到困惑

> ID：11132210
> 
> 赞同：0
> 
> 时间：2012-06-21T05:46:15.557
> 
> 标签：sql, performance, tsql, indexing, non-clustered-index

我有一个图书在线销售网站，在系统中，有一个名为 的表格`Order`，其中有一些列如下：

```
OrderID int (Primary key),
Library_ID int,
Mode int,
BookId int,
Ext_User_ID varchar(2000),
Activated varchar(1),
RequiredDate datetime,
AmountBuy int,
APPROVAL_DATE datetime,
... 
```

所以该表有超过 700 万行，目前我正在向网页添加更多查询条件，sql 脚本如下所示：

```
SELECT * FROM Book b, Library l, [Order] o 
WHERE o.bookid = b.bookID 
AND o.mode = 'A' 
AND o.library_ID = l.library_ID 
AND l.library_ID > 19 
AND b.publisher_id  > 1000 
AND b.print_id > 800 
AND NOT EXISTS (SELECT * FROM ExtBOOK WHERE b.bookid = extbookid AND library_ID = l.library_ID) 
AND o.activated = 'Y' 
AND b.eisbn13 LIKE '978%' 
AND len(o.ext_user_id) > 3 
AND b.bookid > 200000 
AND b.bookid in (SELECT bookid FROM category WHERE categoryid  > 2) 
ORDER BY o.orderid DESC 
```

`Order`该脚本可能包含所有可能的查询条件，在我在 Management Studio 上运行它并打开“包含的实际执行计划”后，建议说我需要在表上创建索引

```
CREATE NONCLUSTERED INDEX [<Name of Missing Index, sysname,>]
ON [dbo].[Order] ([MODE],[ACTIVATED],[LIBRARY_ID],[BOOKID])
INCLUDE ([OrderID],[EXT_USER_ID],[APPROVAL_DATE]) 
```

但是，当我去创建索引时，我发现其他三个索引已经存在，它们是：

```
create nonclustered index IDX_Order_1 { MODE asc}
create nonclustered index IDX_Order_2 { Library_ID asc, EXT_USER_ID asc, BookID asc}
create nonclustered index IDX_Order_3 { BOOKID asc, Library_id asc, MODE asc } 
```

所以上面的3个索引已经创建了，问题是，如果我想创建我的索引，我的意思是我觉得有些重复，我可以合并它们吗？或者每个索引都是针对特定查询的，因为表每天都在增长，除了我的查询之外，我无法确定使用哪个应用程序或什么 sql 脚本。任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T09:09:43.267

我建议您阅读有关索引如何工作的内容。

该链接将为您提供基础知识。

[http://www.simple-talk.com/sql/learn-sql-server/sql-server-index-basics/](http://www.simple-talk.com/sql/learn-sql-server/sql-server-index-basics/)

但是在回答您的问题时，您应该在经常使用的列上创建索引。这意味着，如果您在 BookID、LibraryID 和 Mode 上创建索引，该索引将使用所有 3 列，并且当您的 where 子句查看这 3 列时很有用。据我了解，拥有该索引然后仅搜索 LibraryID 将没有用。

基本上查看您在表上执行的查询，确定使用了哪些列，然后索引最常用的列。但请注意过度索引，因为这会减慢您的数据库速度。

# c++ - 将 v8::String 转换为 LPCWSTR？

> ID：11132212
> 
> 赞同：2
> 
> 时间：2012-06-21T05:46:28.487
> 
> 标签：c++, string, types, v8

所以我从运行时传递一个字符串值作为函数参数：

```
Handle<Value> xObj::Whatever(const Arguments& args){ ... // etc. 
```

`args[0]`绝对应该是字符串：

```
 if(!args[0]->IsString()) { ThrowException(... // etc. 
```

现在我们有了它，我如何将它转换成有用的东西，比如 LPCWSTR、wchar_t、char[] 或其他什么？

```
 MessageBox(NULL, args[0], L"Your value, sir.",0); // no way
      MessageBox(NULL, args[0]->ToString(), L"Your value, sir.",0); // also no
      /// then how? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T09:12:13.053

`v8::String::Value(args[0])`可以转换为 a `uint16_t const*`，它要么是，要么可以转换为`LPCWSTR`. （这取决于编译器设置`/Zc:wchar_t-`）

# facebook - 无法通过 Graph API 删除页面注释

> ID：11132215
> 
> 赞同：0
> 
> 时间：2012-06-21T05:46:40.073
> 
> 标签：facebook, facebook-graph-api, http-delete

我已经能够通过 Graph API 成功创建一个 Page 'Note' 对象，但似乎无法让删除工作。

我一直在尝试通过发出 HTTP DELETE 来删除注释：

```
https://graph.facebook.com/[NOTE_ID]?access_token=[PAGE_ACCESS_TOKEN] 
```

在哪里：

*   [NOTE_ID] 是页面注释的“story_fbid”
*   [PAGE_ACCESS_TOKEN] 是页面级访问令牌

我从 Graph API 得到的错误是： `{"error":{"message":"An unexpected error has occurred. Please retry your request later.","type":"OAuthException","code":2}}`

请注意文档 ( [http://developers.facebook.com/docs/reference/api/page](http://developers.facebook.com/docs/reference/api/page) ) 讨论了创建页面注释，但没有删除它们。也许这是不可能的？

# java - maven 没有选择带有 build-version 的 jars

> ID：11132216
> 
> 赞同：1
> 
> 时间：2012-06-21T05:46:46.347
> 
> 标签：java, maven-plugin, maven-3

嗨，我每次构建时都使用 buildVersion 插件将构建号添加到我的 jar 中。我还在构建一个包含这些 jar的**战争文件。**虽然 jar 是在 /target 中构建的，并且 buildVersion 附加到它们的名称，但在 war 文件中它不是这样。例如，如果 jar 是 myJar-1.0.2.jar ，其中 '2' 是 buildVersion ，在 war 文件中它仍然是myJar-1.0.jar ..我认为是这样，因为在本地存储库中，jar 存储为 myJar-1.0.jar .. 所以 war 文件中的 jar 可能附加了 buildVersion 吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T06:09:48.193

`pom.xml`由于没有给出文件，因此在此响应中做出了一些假设。

您在目标文件夹中找到的 jar 的名称与安装在存储库中的 jar 的名称不同。

您在目标文件夹中找到的 jar 将具有`<finalName>`jar，而安装在您的存储库中的 jar 通常将使用 maven 约定`${artifactId}-${version}`。

您的战争中包含的 jar 是从存储库下载的，因此将移植 maven 常规名称。

我总是将 buildNumber 放在 jar 中的 MANIFEST 文件中（连同其他信息），因此它在存储库中可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T06:21:14.890

也许你有两个 jar 附加到你的 jar 文件的 maven 模块的构建中，并且 maven 选择第一个可用的 jar 包含在 war 程序集中。

# windows-phone-7.1 - 在 Windows Phone 7 的 bing 地图中点击图钉时出现空引用异常？

> ID：11132227
> 
> 赞同：0
> 
> 时间：2012-06-21T05:47:36.373
> 
> 标签：windows-phone-7.1, bing-maps

我在地图中显示图钉。

```
 void GeoPositionChanged(object sender, GeoPositionChangedEventArgs<GeoCoordinate> e)
        {
            _pushpins.Clear();
            var cor = new GeoCoordinate(e.Position.Location.Latitude, e.Position.Location.Longitude);
            //Using the current coordinates define the Map center to those coordinates.
            map.Center = cor;
            _pushpins.Add(new PushpinModel
            {

                Description = "test",
                Name = "test",
                Location = new GeoCoordinate(e.Position.Location.Latitude,
                                                e.Position.Location.Longitude),
                DatetimeAdded = DateTime.Now
            });

            map.ZoomLevel = 15;

        } 
```

对于图钉加载需要一些时间，因为图钉正在移动到地图中的当前位置。在那个时候，只要单击图钉给出“NULL 引用异常”。请告诉我如何处理？

编辑：

```
 private void Pushpin_Tap(object sender,
        System.Windows.Input.GestureEventArgs e)
        {
            var _ppmodel = sender as Pushpin;
            Pushpin pin = sender as Pushpin;

             _id = _ppmodel.Tag.ToString();

            ContextMenu contextMenu =
                ContextMenuService.GetContextMenu(_ppmodel);

            contextMenu.DataContext = _pushpins.Where
                (c => (c.Location
                    == _ppmodel.Location)).FirstOrDefault();
            if (contextMenu.Parent == null)
            {
                contextMenu.IsOpen = true;
            }
        } 
```

虽然图钉点击有时会出现空引用异常......

# python - 返回其 col-row 值的 Tkinter 按钮

> ID：11132229
> 
> 赞同：1
> 
> 时间：2012-06-21T05:47:44.240
> 
> 标签：python, tkinter

我需要我的按钮在单击时返回它们的列和行值。我试过编码但没有奏效。

```
my_button = ttk.Button(mainframe)
my_button['command'] = return_func(my_button.grid_info()['row'])
my_button.grid(column=1, sticky=(W, E)) 
```

我正在自动创建按钮，因此 col 和 row 值正在改变。我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T05:50:12.527

当您编写 时`return_func(inpt.grid_info()['row'])`，您正在`return_func`使用该参数执行。你不想这样做。

相反，用于`lambda: return_func(inpt.grid_info()['row'])`为您的函数调用创建一个容器函数。这样，该`lambda`函数在调用时执行您的函数。

另一种方法是这样的：

```
def command_function():
  return_func(inpt.grid_info()['row'])

my_button['command'] = command_function 
```

我没有`tk`足够的工作来判断你是否需要传递一个参数，所以这对你来说也可能是一个问题。

# html5-canvas - html5 Canvas google+ 反馈高亮功能

> ID：11132232
> 
> 赞同：0
> 
> 时间：2012-06-21T05:48:29.077
> 
> 标签：html5-canvas, google-plus, feedback, globalcompositeoperation

对于 google+ 反馈，它如何在不剪切 html 页面的情况下“剪切”其黑色叠加层（白色矩形）来为其反馈创建突出显示效果？在这篇文章中，[Google+ 反馈系统的屏幕截图部分是如何工作的？](https://stackoverflow.com/questions/6527742/how-does-the-screenshot-part-of-the-google-feedback-system-work)，我知道高亮和黑屏是<div>标签和<canvas>标签。

[我在这个网站http://hertzen.com/experiments/jsfeedback/examples/combination/index.html](http://hertzen.com/experiments/jsfeedback/examples/combination/index.html)找到了一个类似的反馈，它的高亮效果也是 <div> 标签并且它使用了 CSS。但是，它的白色矩形堆叠在黑色覆盖层之上，而不是“切开”它。因此，亮点并不像谷歌那样清晰。关于谷歌的反馈突出显示功能如何工作的任何见解？是通过使用canvas globalCompositeOperation吗？我尝试修改代码以使用canvas globalCompositeOperation、destination-out 操作，但它会切穿黑色覆盖和html 页面。但这可能只是我编码错误，因为我在 JavaScript 方面不是很好。任何帮助将非常感激！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-01T18:32:58.727

最好的方法是您尝试 google+ 反馈并使用 firebug（或其他一些开发工具）对其进行分析。起初他们使用画布从网站制作快照，我认为。然后他们放入一个 div 以使网站变灰。现在是棘手的部分。当您突出显示一个区域时，在使网站变灰的 div 中，google 会在突出显示的 div 周围放置数百个 div。所以突出显示的 div 没有背景，其他的 div 是灰色的。

我认为因此在 g+ 中，您无法轻松拖动突出显示的 div 并将其放置在左侧更多像素。

目前我只能尝试复制这种方式或找到另一种方式以全视野突出显示，而不是突出显示 div 中的一个灰色百分比

# c++ - 为什么像“a[i] = i++;”这样的递增操作 导致未定义的行为？

> ID：11132236
> 
> 赞同：4
> 
> 时间：2012-06-21T05:49:04.633
> 
> 标签：c++, undefined-behavior, sequence-points

> **可能重复：**
> [未定义的行为和序列点](https://stackoverflow.com/questions/4176328/undefined-behavior-and-sequence-points)

```
#include <iostream>
using namespace std;

int main()
{
int x[3] = {};
int i=0;
x[i] = i++;
cout << x[0] << " " << x[1] << endl;
return 0;
} 
```

键盘给了我这个： 第 9 行：警告：“i”上的操作可能未定义 为什么操作未定义？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-21T05:52:59.263

在这里清楚地解释： [C-Faq](http://c-faq.com/expr/evalorder1.html)

为什么这段代码 `a[i] = i++;`不起作用？

> 子表达式`i++`会产生副作用——它会修改`i'`s 的值——这会导致未定义的行为，因为`i`在同一表达式的其他地方也引用了它。没有办法知道引用会在副作用之前还是之后发生——事实上，两种明显的解释都不可能成立；见问题[3.9](http://c-faq.com/expr/evalorder4.html)。（请注意，尽管 K&R 中的语言暗示此表达式的行为未指定，但 C 标准更强烈地声明它未定义——请参阅问题[11.33](http://c-faq.com/ansi/undef.html)。）

相关标准报价如下：

**C++03 5 表达式 [expr]：**
**第 4 段：**

> ....
> **在前一个和下一个序列点之间，一个标量对象的存储值最多只能通过表达式的评估修改一次。此外，只能访问先验值以确定要存储的值**。对于完整表达式的子表达式的每个允许排序，都应满足本段的要求；**否则行为未定义**。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-21T05:51:32.573

您正在修改一个变量并使用它的值，而没有中间的序列点。你期望`i`when`x[i]`出现的值是多少？因为无论你期望什么，你都错了。

# php - 将 www-data 推送到本地 git repo

> ID：11132239
> 
> 赞同：0
> 
> 时间：2012-06-21T05:49:18.607
> 
> 标签：php, linux, git, drupal, hosting

因此，我正在创建一个系统来管理位于特定文件夹中的所有 drupal 网站（可以在此文件夹中创建新网站）。

下一步是创建一种允许用户将网站恢复到先前版本的方法。

我的解决方案？创建一个本地“git 服务器”，并为我的系统上执行的每个操作（例如：更新/安装模块、升级核心等）创建该站点的新版本。

我创建了一个“git”用户，负责在`/~/gitrepos/`. 对于每个新网站，我使用`sudo -u git`apache 用户 (www-data) 来运行`mkdir`和`git init --bare`. 我目前能够创建新文件夹并在这些文件夹上初始化 git 存储库。

但是当我尝试将网站更改推送到这些存储库时，我得到“权限被拒绝”。

当检测到新站点时，我执行以下操作：

1.  创建存储库 [使用 www-data 和`sudo -u git`]
    *   `mkdir`和`git init`
2.  初始化网站目录上的 git 存储库（.git 文件夹）[使用 www-data]
    *   `git init`
3.  将文件添加到提交队列 [使用 www-data]
    *   `git add *`
4.  提交更改以填充新创建的存储库 [使用 www-data]
    *   `git commit -m 'msg'`
5.  添加存储库的远程地址 [使用 www-data]
    *   `git remote add origin ssh://git@localhost/path/to/repo/`
6.  推送更改 [使用 www-data]
    *   `git push -u origin master`

现在我被困在这一步，因为我总是得到“权限被拒绝”。

我有什么方法可以将更改推送到本地“git 服务器”而无需进行身份验证？

或者，我应该创建哪些 ssh 密钥来启用 www-data 将更改推送到本地“git 服务器”？

我真的迷路了，**如果有人有一步一步的方法来设置一个本地“git 服务器”，www-data 用户可以在其中推送，那就太好了**。

注意： www-data 的主目录是`/var/www/`，因此在此目录中存储 ssh-key 不是一个好主意

* * *

是的，在问这里之前，我至少花了 4 个小时试图弄清楚这一点。

我试图遵循的一些资源：

*   [http://www.hackido.com/2010/01/installing-git-on-server-ubuntu-or.html](http://www.hackido.com/2010/01/installing-git-on-server-ubuntu-or.html)
*   [http://toroid.org/ams/git-website-howto](http://toroid.org/ams/git-website-howto)
*   [http://pthree.org/2008/11/28/setup-a-git-repository/](http://pthree.org/2008/11/28/setup-a-git-repository/)
*   [基于 Git 的网站部署工作流程](https://stackoverflow.com/questions/5439290/git-based-website-deployment-workflow)
*   [http://tumblr.intranation.com/post/766290565/how-set-up-your-own-private-git-server-linux](http://tumblr.intranation.com/post/766290565/how-set-up-your-own-private-git-server-linux)
*   [http://blogs.gurulabs.com/aaron/2008/11/setup-a-git-repository.html](http://blogs.gurulabs.com/aaron/2008/11/setup-a-git-repository.html)

* * *

我引用“git server”的原因是因为没有 git *server*这样的东西。

引自[http://blogs.gurulabs.com/aaron/2008/11/setup-a-git-repository.html](http://blogs.gurulabs.com/aaron/2008/11/setup-a-git-repository.html)：

> 换句话说，没有“git 服务器”和“git 客户端”之类的东西。Git 是由文件系统开发人员开发的，考虑到文件系统属性。因此，相反，我们有一个称为“源”的远程 Git 存储库和一个本地 Git 存储库 (...)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T15:46:53.983

# 解决方案：

**假设：**

*   您的`www-data`主目录是`/var/www/`
*   将处理所有 git 命令的用户是`gituser`

**脚步：**

要让`www-data`用户在不需要输入密码的情况下将更改推送到 git repo，只需：

*   为 www-data 用户创建一个新的 ssh-key
    *   `www-data:~$ ssh-keygen -t rsa`
    *   按`enter`每个问题（密码留空）
*   将新创建的 ssh-key 添加到`/home/gituser/.ssh/authorized_keys`
    *   `gituser:~$ touch ~/.ssh/authorized_keys`
    *   `gituser:~$ chmod 0600 ~/.ssh/authorized_keys`
    *   `gituser:~$ cat /var/www/.ssh/id_rsa.pub >> /home/gituser/.ssh/authorized_keys`

其背后的想法是将`www-data`的 ssh-key 添加到`gituser`的“受信任”密钥中。之后，`www-data`将能够通过 ssh 连接到服务器并进行身份验证，`gituser`而无需输入密码。

请记住，git 需要 ssh 访问服务器（至少在我所在的环境中）。

这可能会有所帮助：[http ://www.linuxproblem.org/art_9.html](http://www.linuxproblem.org/art_9.html)

# html - 在打印页面时不显示选择框仅显示选择框的元素

> ID：11132240
> 
> 赞同：0
> 
> 时间：2012-06-21T05:49:23.340
> 
> 标签：html, css

我想打印一个页面，该页面有一个选择框，我只想在选择框中显示元素（甚至不显示选择下拉箭头）。因此，当用户打印此页面时，他们会看到选择框中的所有元素，而不仅仅是“选择项目”文本。

```
<html>
<head></head>
<body>
     <select> <option selected> Select item </option>
                            <option value="1" > 10 </option>
                            <option value="2"> 20 </option>
                            <option value="3"> 30 </option>
                            <option value="4"> 40 </option>
     </select>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T06:00:19.897

在 div 中拥有与您选择的项目完全相同的副本，并确保它是隐藏的。例如

```
<div class="printselector" style="display:none">10,20,30,40</div> 
```

然后在您的打印样式表中，确保显示它并且您选择框被隐藏。

所以完成的 html 看起来像这样。

```
<html>
<head>
<link rel="stylesheet" href="print.css" type="text/css" media="print" />
<style type="text/css">
    .myselector { display: block}
</style> 
</head>
<body>
     <select class="myselector"> <option selected> Select item </option>
                            <option value="1" > 10 </option>
                            <option value="2"> 20 </option>
                            <option value="3"> 30 </option>
                            <option value="4"> 40 </option>
     </select>
    <div class="printselector" style="display:none">10,20,30,40</div>
</body>
</html> 
```

有一个单独的 print.css 文件，其中包含以下代码：

```
.printselector { display:block !important; }
.myselector { display:none !important; } 
```

# android - Phonegap + Jquery Mobile Android App 表单提交

> ID：11132245
> 
> 赞同：1
> 
> 时间：2012-06-21T05:50:04.290
> 
> 标签：android, ajax, forms, jquery-mobile, cordova

我正在尝试使用 Phonegap 和 Jquery Mobile 在 Eclipse Android 模拟器中提交表单。我正在寻找提交表单并有一条消息显示表单是否已成功提交。如果我在 Internet 浏览器上提交表单，则 php 页面可以正常工作。但是，尝试使用 Android 模拟器时，表单提交永远不会到达 php 文件。

下面是我正在使用的 html 表单。我已经包含了 phonegap 和 jquery 脚本。

```
 <form id="myForm" >
                <div data-role="fieldcontain">
                    <fieldset data-role="controlgroup" data-mini="true">
                        <label for="textinput1">
                            Name
                        </label>
                        <input id="fullnameid" name="fullname" placeholder="" value="" type="text" />
                    </fieldset>
                </div>
                <div data-role="fieldcontain">
                    <fieldset data-role="controlgroup" data-mini="true">
                        <label for="textinput2">
                            E-Mail
                        </label>
                        <input id="emailid" name="email" placeholder="" value="" type="text" />
                    </fieldset>
                </div>
                <div data-role="fieldcontain">
                    <fieldset data-role="controlgroup">
                        <label for="textarea1">
                            Message
                        </label>
                        <textarea id="commentid" name="comment" placeholder="" data-mini="true"></textarea>
                    </fieldset>
                </div>
                 <h3 id="return"></h3>
                <button data-theme="b" id="submitid" data-icon="arrow-r" data-iconpos="left" name="submit" type="submit">Submit</button>

           </form> 
```

我正在使用的 javascript 是 AJAX 帖子：

```
<script>
 function onSuccess(data, status)
    {
        data = $.trim(data);
        $("#return").text(data);
    }

    function onError(data, status)
    {
        // handle an error
        alert("Error Submitting Form");
    }       

    $(document).ready(function() {
        $("#submitid").click(function(){

            var formData = $("#myForm").serialize();

            $.ajax({
                type: "POST",
                url: "http://www.dowlingnetworks.com/app/contactscript.php",
                cache: false,
                data: formData,
                success: onSuccess,
                error: onError
            });

            return false;
        });
    });
</script> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T06:40:59.157

Easy way to do cross domain calls is just to put in your php page's header this line:

```
header("Access-Control-Allow-Origin: *"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T06:39:53.123

You cannot post data to server like this from android. You are doing Cross domain request through jquery from a webserver. You have to make a JSON or JSONP request to reach the server. Please go throught the link to make a [Request to web server using phonegap jquery mobile](https://stackoverflow.com/questions/11054319/ajax-on-phonegap/11062464#11062464).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-05T11:18:07.620

您可以通过在 [project_name]/res/xml/config.xml 中进行设置来控制可以从您的应用程序访问哪些外部源：

```
<access origin="http://[some-external-domain.com]" subdomains="true" /> 
```

文档之一在这里：

```
https://build.phonegap.com/docs/config-xml 
```

注意：一直滚动到底部以找到讨论设置的特定部分。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-23T11:26:54.110

我以前有同样的问题。但是，当我使用实际的 android 手机作为我的测试设备时，一切正常，无需额外配置。干杯!

最好的问候， 易莹

# matlab - 微不足道的线性代数问题（八度/ matlab）

> ID：11132266
> 
> 赞同：3
> 
> 时间：2012-06-21T05:52:27.097
> 
> 标签：matlab, octave, linear-algebra

假设我有一个权重矩阵和另一个数据值矩阵。我是否可以将一个矩阵乘以或除以另一个矩阵，以便一个矩阵中的每个元素仅乘以/除以另一个矩阵中的相应元素，而不必遍历每个位置？

问这个问题我觉得很荒谬，但我似乎无法通过谷歌找到答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T05:54:32.303

a .* b 将矩阵逐点相乘。

a ./ b 划分。

像这样：

```
octave:1> a = [1 2; 3 4];
octave:2> b = [3 4; 5 6];
octave:3> a .* b
ans =

    3    8
   15   24

octave:4> a ./ b
ans =

   0.33333   0.50000
   0.60000   0.66667 
```

对于任意二进制函数，请使用`bsxfun`：

[八度音阶](http://octave.sourceforge.net/octave/function/bsxfun.html)

[在matlab中](http://www.mathworks.com/help/techdoc/ref/bsxfun.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T08:43:32.920

A = [1 2 3]；B = [ 1 1 1; 2 2 2; 3 3 3];

C = repmat(A', 1,3) ans = C *. 乙

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-30T18:02:31.560

您想使用元素乘法或除法。要使用元素乘法（与矩阵乘法相反），请在前面放置一个句点，如下所示：

```
A .* B 
```

这是一个关于八度线性代数的教程（更深入一点）：[http ://www.lauradhamilton.com/tutorial-linear-algebra-with-octave](http://www.lauradhamilton.com/tutorial-linear-algebra-with-octave)

# mysql - 如何以简洁优雅的方式编写 sql 查询？

> ID：11132267
> 
> 赞同：0
> 
> 时间：2012-06-21T05:52:33.417
> 
> 标签：mysql, sql

我有这个庞大的数据库：

```
#
# Dropping tables
#

DROP TABLE IF EXISTS hotels;
DROP TABLE IF EXISTS guests;
DROP TABLE IF EXISTS rooms;
DROP TABLE IF EXISTS reservation;

#
# Table structure for tables hotels, guests, rooms and reservation
#

CREATE TABLE hotels(
hotel_code int(4) unsigned NOT NULL default '0',
hotel_name char(20) default NULL,
city char(20) default NULL,
address char(20) default NULL,
hotel_rank int(1) unsigned NOT NULL default '0',
phone char(10) default NULL,
number_of_rooms int(4) unsigned NOT NULL default '0',
PRIMARY KEY  (hotel_code));

CREATE TABLE guests(
id char(10) default NULL,
name char(20) default NULL,
city char(20) default NULL,
address char(20) default NULL,
state char(20) default NULL,
PRIMARY KEY  (id));

CREATE TABLE rooms(
hotel_code int(4) unsigned NOT NULL default '0',
room_number int(4) unsigned NOT NULL default '0',
type char(20) default NULL,
beds int(4) unsigned NOT NULL default '0',
price int(4) unsigned NOT NULL default '0',
PRIMARY KEY  (hotel_code, room_number));

CREATE TABLE reservation(
hotel_code int(4) unsigned NOT NULL default '0',
room_number int(4) unsigned NOT NULL default '0',
from_date char(20) default NULL,
to_date char(20) default NULL,
payment_method char(20) default NULL,
id char(10) default NULL,
PRIMARY KEY  (hotel_code, room_number, from_date));

#
# Dumping data for tables hotels, guests, rooms and reservation
#

INSERT INTO hotels VALUES
(1, 'Meridian', 'Tel Aviv', 'Shinkin 24', 3, '03-6527384', 230),
(2, 'Meridian', 'Tveria', 'Kineret 22', 5, '04-7369944', 320),
(3, 'King David', 'Jerusalem', 'Kineret 22', 5, '02-7435334', 200),
(4, 'Hilton', 'Jerusalem', 'Kineret 22', 4, '02-4566324', 180),
(5, 'Herods', 'Eilat', 'Dolphin 14', 4, '09-7333245', 190),
(6, 'Hof Yam', 'Haifa', 'Kasam 39', 5, '04-7344545', 150),
(7, 'Ha Tsuk', 'Haifa', 'Lohem 17', 3, '04-7345678', 110),
(8, 'Ha Nesiha', 'Eilat', 'Suf 4', 5, '09-6543543', 170),
(9, 'King David', 'Tveria', 'Kineret 55', 5, '04-7445544', 270);

INSERT INTO guests VALUES
('00000001-0', 'Adam', 'Gan Eden', 'Mango 3', 'Israel'),
('00000002-0', 'Eve', 'Gan Eden', 'Avucado 12', 'Israel'),
('04352244-4', 'Dani Mor', 'Tel Aviv', 'Magen 3', 'Israel'),
('06112343-6', 'Amiad Rozenberg', 'Petah Tikva', 'Zahal 14', 'Israel'),
('12345678-0', 'Ehud Olmert', 'Jerusalem', 'Money 99', 'Israel'),
('87654321-0', 'Moris Talenski', 'Jerusalem', 'Money 100', 'Israel'),
('04256372-0', 'Uri Meser', 'Holyland', 'Money 101', 'Israel'),
('02637482-0', 'Shula Zaken', 'Jerusalem', 'Money 102', 'Israel'),
('00000000-0', 'Gimel', 'Mosad', 'Secret 007', 'Dubai');

INSERT INTO rooms VALUES
(1, 100, 'basic', 2, 100),
(1, 101, 'basic', 2, 100),
(1, 102, 'basic', 2, 100),
(1, 200, 'double', 2, 100),
(1, 201, 'double', 2, 100),
(1, 202, 'double', 2, 100),
(1, 300, 'truple', 3, 180),
(1, 400, 'honeymoon', 2, 270),
(2, 100, 'basic', 2, 100),
(2, 200, 'double', 4, 200),
(2, 201, 'double', 4, 200),
(2, 202, 'double', 4, 200),
(2, 300, 'truple', 5, 220),
(2, 400, 'honeymoon', 3, 230),
(2, 401, 'honeymoon', 3, 230),
(3, 100, 'basic', 2, 100),
(3, 200, 'double', 2, 210),
(3, 201, 'double', 2, 210),
(3, 202, 'double', 2, 210),
(3, 300, 'truple', 4, 220),
(3, 400, 'honeymoon', 3, 230),
(4, 100, 'basic', 2, 100),
(4, 200, 'double', 1, 500),
(4, 300, 'truple', 4, 120),
(4, 301, 'truple', 4, 120),
(4, 400, 'honeymoon', 3, 230),
(4, 401, 'honeymoon', 3, 230),
(4, 402, 'honeymoon', 3, 230),
(4, 403, 'honeymoon', 3, 230),
(5, 100, 'basic', 2, 100),
(5, 200, 'double', 4, 150),
(5, 300, 'truple', 4, 340),
(5, 400, 'honeymoon', 3, 210),
(6, 100, 'basic', 2, 100),
(6, 101, 'basic', 2, 100),
(6, 200, 'double', 3, 110),
(6, 201, 'double', 3, 110),
(6, 300, 'truple', 4, 310),
(6, 400, 'honeymoon', 1, 240),
(7, 100, 'basic', 2, 100),
(7, 101, 'basic', 2, 100),
(7, 102, 'basic', 2, 100),
(7, 200, 'double', 4, 130),
(7, 300, 'truple', 2, 250),
(7, 301, 'truple', 2, 250),
(7, 302, 'truple', 2, 250),
(7, 400, 'honeymoon', 3, 280),
(8, 100, 'basic', 2, 90),
(8, 200, 'double', 4, 290),
(8, 300, 'truple', 2, 430),
(8, 400, 'honeymoon', 3, 150),
(9, 100, 'basic', 2, 130),
(9, 200, 'double', 4, 150),
(9, 300, 'truple', 2, 280),
(9, 400, 'honeymoon', 3, 270);

INSERT INTO reservation VALUES
(6, 300, '2010-06-15', '2010-06-29', 'cash', '00000001-0'),
(5, 400, '2010-01-02', '2010-01-13', 'credit', '00000001-0'),
(4, 300, '2010-06-15', '2010-07-01', 'cash', '00000002-0'),
(5, 400, '2010-01-01', '2010-01-13', 'credit', '00000002-0'),
(3, 200, '2010-06-15', '2010-08-01', 'cash', '04352244-4'),
(2, 100, '2010-04-15', '2010-06-21', 'cash', '06112343-6'),
(1, 100, '2010-06-23', '2010-07-01', 'cash', '06112343-6'),
(8, 300, '2010-04-12', '2010-04-15', 'cash', '12345678-0'),
(8, 200, '2010-04-12', '2010-04-15', 'cash', '87654321-0'),
(8, 100, '2010-04-12', '2010-04-15', 'cash', '04256372-0'),
(8, 200, '2010-04-17', '2010-04-25', 'cash', '04256372-0'),
(8, 200, '2010-04-25', '2010-04-29', 'cash', '02637482-0'); 
```

我想写查询：

```
present a list of the hotels with more than 2 rooms , where their price is 
bigger than 186 . 
Order it by : hotel name ,city ,number of rooms . Sort by number of rooms . 
```

所以我的查询是：

```
SELECT DISTINCT hotel_name, city, rooms_number
FROM hotels JOIN
(SELECT DISTINCT hotel_code, COUNT(*) as rooms_number
FROM rooms
WHERE price > 186
GROUP BY hotel_code
) as rooms_count
ON (hotels.hotel_code = rooms_count.hotel_code AND rooms_number > 2)
ORDER BY rooms_number; 
```

但是这个查询太长了，是否可以用另一种方式编写它，以满足问题的需要？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T06:07:14.200

`HAVING`您可以通过使用子句来避免子选择。

```
SELECT
    a.hotel_name,
    a.city,
    COUNT(*) AS room_count
FROM 
    hotels a
INNER JOIN
    rooms b ON a.hotel_code = b.hotel_code AND b.price > 186
GROUP BY
    a.hotel_name,
    a.city
HAVING
    COUNT(*) > 2
ORDER BY
    room_count DESC 
```

# jquery - 使用 jqGrid 'actions' 预定义格式化程序时如何传递额外参数？

> ID：11132269
> 
> 赞同：0
> 
> 时间：2012-06-21T05:52:42.167
> 
> 标签：jquery, jquery-plugins, jqgrid, jqgrid-formatter

我正在使用 jqGrid v3.8.1，并且无法使用预定义的格式化程序“操作”传递额外的参数。基本上我想在编辑和删除时传递两个参数以及编辑的字段。根据文档，extraparam 可用于将附加参数发布到服务器。我已经尽我所能尝试并尽可能多地进行研究，但是我仍然无法让它发挥作用。我提到了以下内容：

[链接 1](https://stackoverflow.com/questions/10074774/how-to-pass-custom-params-to-ajax-request-on-in-line-edit-in-jqgrid)
[链接 2](https://stackoverflow.com/questions/10074774/how-to-pass-custom-params-to-ajax-request-on-in-line-edit-in-jqgrid)

和其他人在stackoverflow和其他地方。我不确定出了什么问题。

以下是我的代码。请帮帮我。

```
jQuery("#configGrid").jqGrid({
    mtype: "post",
    url: '/Controller/Action',
    datatype: "json",
    colNames: ['Location', 'S_No', 'S_C', 'D_No', 'D_C', 'B_No', 'B_C', 'G_No', 'GP_P', 'IP', 'OA', 'NA', 'Months', 'Edit'],
    colModel: [{
        name: 'name',
        index: 'name',
        width: 90
    }, {
        name: 's_no',
        index: 's_no',
        width: 90,
        align: "center",
        editable: false
    }, {
        name: 's_c',
        index: 's_c',
        width: 90,
        align: "center",
        editable: true
    }, {
        name: 'd_no',
        index: 'd_no',
        width: 90,
        align: "center",
        editable: false
    }, {
        name: 'd_c',
        index: 'd_c',
        width: 90,
        align: "center",
        editable: true
    }, {
        name: 'b_no',
        index: 'b_no',
        width: 90,
        align: "center",
        editable: false
    }, {
        name: 'b_c',
        index: 'b_c',
        width: 90,
        align: "center",
        editable: true
    }, {
        name: 'g_no',
        index: 'g_no',
        width: 100,
        align: "center",
        editable: false
    }, {
        name: 'g_c',
        index: 'g_c',
        width: 100,
        align: "center",
        editable: true
    }, {
        name: 'TIP',
        index: 'TIP',
        width: 80,
        align: "right",
        editable: true
    }, {
        name: 'OA',
        index: 'OA',
        width: 80,
        align: "center",
        editable: true
    }, {
        name: 'NA',
        index: 'NA',
        width: 80,
        align: "center",
        editable: true
    }, {
        name: 'Months',
        index: 'Months',
        width: 150,
        align: "center",
        sortable: false,
        editable: true
    }, {
        name: 'myac',
        width: 50,
        align: "center",
        fixed: true,
        sortable: false,
        resize: false,
        formatter: 'actions',
        formatoptions: {
            keys: true,
            extraparam: {
                slot: "1",
                installment: "1"
            }
        }
    }],
    rowNum: 10,
    rownumbers: true,
    autowidth: true,
    rowList: [10, 20, 30],
    postData: {
        level: function () {
            if (p_level == undefined || p_level == null) {
                return 'S';
            } else {
                return p_level;
            }
        },
        location: function () {
            return p_location;
        },
        ownLower: function () {
            return flagOwnLower;
        },
        slot: function () {
            return $("#ddlSlot").val();
        },
        installment: function () {
            return $("#ddlInstallment").val();
        }
    },
    loadError: function (xhr, status, error) {
        $('#ErrorMessage').html(xhr.responseText);
        $('#ui-widget').show();
        $("#ErrorMessage").stop().show('slow');
    },
    //loadonce: true,
    pager: '#configPager',
    sortname: 'invdate',
    viewrecords: true,
    sortorder: "desc",
    //jsonReader: { repeatitems: false },
    caption: "caption",
    height: '100%',
    editurl: '/Controller/UpdateAction/' + Math.random(),
    multiselect: true,
    loadComplete: function () {
        $('#ErrorMessage').html("");
        $('#ui-widget').hide();
        $("#ErrorMessage").stop().hide('slow');

        gridLoaded = true;
    },
    onSelectRow: function (rowId) {

        //tried this but it is not working
        //jQuery("#frmac").editRow(rowId, true, null, null, '/Action/Controller/' + Math.random(), { slot: $("#ddlSlot").val(), installment: $("#ddlInstallment").val() });
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T13:47:44.590

[更改日志](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3achange#jqgrid_3.8.2_changes_and_fixes)提到在 v3.8.2 中引入了预定义的格式化程序“操作” 。即使我使用的是 v3.8.1，它也允许我使用“操作”格式化程序以及它的一些属性，如键、编辑按钮和删除按钮（我没有尝试其他的），但是不支持 extraparam、onEdit、onSearch。我升级到 v3.8.2 并解决了我的问题。

# php - 从 xml 中获取 2 个元素

> ID：11132270
> 
> 赞同：0
> 
> 时间：2012-06-21T05:52:52.663
> 
> 标签：php, xml

如何在 xml 文件中检索元素的两个实例

这就是我得到其他人的方式

```
 $LargeImage = $xml->Items->Item->LargeImage->URL;
    $author = $xml->Items->Item->ItemAttributes->Author;
echo ($author); 
```

但是对于 $author，有 2 个作者，元素是这样的

```
Items->Item->ItemAttributes->
<Author>Ralph Bravaco</Author>
<Author>Shai Simonson</Author> 
```

所以我目前的代码只能找回第一作者

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T05:58:22.067

```
$xml = new SimpleXMLElement($string);
$result = $xml->xpath('/Items/Item/ItemAttributes/Author');
while(list( , $node) = each($result)) {
    echo $node,"\n";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T11:11:13.030

尝试这个：

```
foreach($xml->Items->Item->ItemAttributes->Author as $author) {
    echo (string)$author.'<br>';
} 
```

它将呼应所有作者，无论是否。作者的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T06:00:44.993

我想你是在问这个——

```
echo $author = $xml->Items->Item->ItemAttributes->Author[0];

echo $author = $xml->Items->Item->ItemAttributes->Author[1]; 
```

# asp.net - 在 ASP.NET 中查找 DIV HTML

> ID：11132279
> 
> 赞同：0
> 
> 时间：2012-06-21T05:53:18.840
> 
> 标签：asp.net, html

我正在使用 VS2010、C# 来开发我的 ASP.NET Web 应用程序，我已经动态地创建了一个页面（在页面上使用多个服务器端和 HTML 控件）。现在我要通过电子邮件发送我的页面，我应该将其内容作为 HTML，我怎样才能拥有我的页面 HTML？当然我有一个 DIV (runat=....)，其中包含应该发送的部分，我怎样才能得到它的 HTML 内容？`innerHTML`给我的不是字面错误，我有什么选择？我想要我的 DIV 的最终渲染内容

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T06:01:36.417

您可以使用以下代码在代码中呈现 webforms 控件：

```
var control = new Control();
StringBuilder b = new StringBuilder();
HtmlTextWriter writer = new HtmlTextWriter(new System.IO.StringWriter(b));
control.RenderControl(writer);
return b.ToString(); 
```

注意：还有另一种渲染整个页面的方法，它可能比已经提出的方法更容易一些：

```
var writer = new StringWriter();
HttpContext.Current.Server.Execute(url, writer);
string output = writer.GetStringBuilder().ToString(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T06:02:15.350

您可能想尝试使用*WebClient*将页面简单地下载为字符串。

```
var wc = new WebClient();
string url = Request.Url.AbsoluteUri;    // for the current page, otherwise set the URL
string html = wc.DownloadString(url); 
```

不确定您是否知道，但 HTML 电子邮件是一个棘手的主题（电子邮件客户端就像非常糟糕的浏览器，您只能使用基本的标记和 CSS）。我建议您查看[HTML Email Boilerplate](http://htmlemailboilerplate.com/)，了解有关这方面的一些提示和最佳实践。

# sencha-touch-2 - 如何在 iPad 上优化 Sencha Touch 2.0 性能？

> ID：11132281
> 
> 赞同：0
> 
> 时间：2012-06-21T05:53:26.627
> 
> 标签：sencha-touch-2

我正在尝试优化iPad 设备上[Sencha Touch 2.0应用程序的性能。](http://docs.sencha.com/touch/2-0/)请指出一些方法来做到这一点。

是否有任何工具可用于 iPad 来测试 Web 应用程序的性能？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T14:20:44.973

对于您的第一个问题，此链接可能会有所帮助：

[PhoneGap 1.4 包装 Sencha Touch 2.X - 性能如何？](https://stackoverflow.com/questions/10085637/phonegap-1-4-wrapping-sencha-touch-2-x-what-about-performance/10085756#10085756)

关于性能检查，您可以使用 iPad Safari 的开发者工具。这是一个很好的入门教程：[https ://developer.apple.com/technologies/safari/developer-tools.html](https://developer.apple.com/technologies/safari/developer-tools.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T10:50:46.077

您打算将应用程序部署为 iPad 原生应用程序，还是打算在 Web 浏览器中使用它？

无论如何，如果您要部署为本机，它将自动进行优化，并且不会加载不必要的文件。

如果您打算在 Web 浏览器中使用它，我建议将其部署为生产环境，而不是加载整个源代码。

这可以通过导航到您的 sencha touch 2 应用程序并运行以下 sdk 命令来实现：

```
sencha app build production 
```

然后，您应该在浏览器中加载该页面。

# objective-c - 选项卡式应用程序中的登录视图

> ID：11132282
> 
> 赞同：0
> 
> 时间：2012-06-21T05:53:29.063
> 
> 标签：objective-c, ios, xcode

如何在选项卡式应用程序中构建登录视图？我是ios开发新手。我通过互联网阅读了很多内容，但没有人只是发布我能理解的代码。任何帮助表示赞赏=)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T07:46:34.937

这是一个相关的帖子：[在 IOS 的 Cocoa Touch Tab Bar Application 前面添加登录屏幕](https://stackoverflow.com/questions/4406426/adding-login-screen-in-front-of-cocoa-touch-tab-bar-application-for-ios?rq=1)

我更喜欢这样写。

```
[window setRootController:tabBarCon];
if (notLogedIn) {
    loginViewController = [[InitialScreenViewController alloc] init];
    [tabBarCon.view addSubview:loginViewController.view];
}
[window makeKeyAndVisible];
return YES;

- (bool)notLoggedIn {
     //check if there is any sessions exists in local storage
} 
```

如果您的内容与用户帐户相关，请记住实现登录后重新加载内容的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T11:18:01.683

最后我这样做是为了解决我的问题：

我的 rootViewController 是我的注册视图，然后我设置了一个实现自定义 segue 的按钮：

```
-(IBAction)button {
    NSLog(@"username: %@, password: %@, passwordrt: %@", username.text, password.text, passwordrt.text);
    [self performSegueWithIdentifier:@"tabBar" sender:self];
} 
```

# sql-server - GEOMETRY 数据类型的 SQL Server 计算列值

> ID：11132285
> 
> 赞同：3
> 
> 时间：2012-06-21T05:53:42.963
> 
> 标签：sql-server, geometry

我在 SQL Server 2008 R2 数据库中有一个表。它包含 X、Y 和 Shape 列，用于存储用于经度和纬度的数字（38、8）以及用于几何类型的计算列。这个想法是每当插入 X 和 Y 时，Shape 列应该自动填充正确的几何数据。

X 和 Y 已填充。但是，我没有成功指定 Shape 列。在 SQL Server Management Studio 中，当我在计算列规范公式中填充以下任一代码时，它给了我验证公式失败的错误：

```
(STGeomFromText('POINT (' + CAST([x] as varchar(32)) + ' ' + CAST([y] as varchar(32)) + ')', 4283))

OR

([STGeomFromText]('POINT (' + CAST([x] as varchar(32)) + ' ' + CAST([y] as varchar(32)) + ')', 4283)) 
```

谁能帮我一把？谢谢！

干杯，亚历克斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T06:22:09.327

我实际上是被这篇[文章](https://stackoverflow.com/questions/5572806/trigger-for-insert-and-update-on-same-table)启发的。

希望它对其他有同样问题的人有所帮助。

```
ALTER TABLE LOCATION
ADD Shape AS (CONVERT(GEOMETRY, CASE WHEN x<> 0
                                    AND y<> 0
                               THEN GEOMETRY::STGeomFromText('POINT('
                                                          + CONVERT(VARCHAR, x)
                                                          + ' '
                                                          + CONVERT(VARCHAR, y)
                                                          + ')', 4238)
                               ELSE NULL
                          END)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-16T06:49:43.457

稍微好一点的解决方案：

```
ALTER TABLE LOCATION
ADD Shape AS (CONVERT(GEOMETRY, CASE WHEN x IS NOT NULL AND y IS NOT NULL
                               THEN GEOMETRY::Point(x,y,4238)
                               ELSE NULL
                          END)) 
```

这节省了两个不必要的转换（从 int 到 varchar），并且还允许赤道（0° 纬度）和本初子午线（0° 经度）相交的点也被认为是“有效的”。

# iphone - 如何仅在 DEBUG 和 AdHoc 模式下执行特定功能

> ID：11132287
> 
> 赞同：0
> 
> 时间：2012-06-21T05:53:59.617
> 
> 标签：iphone, ios, xcode4.3, ios5.1

我想做的是一个带有操作方法的简单按钮，这个按钮被初始化、创建、分配给它的操作方法，并且只在调试和 AdHoc 模式下显示。因此，作为开发人员或测试人员，我可以看到按钮，但在发布中，客户端将无法看到该按钮。

到目前为止我所做的如下：

- 在我的`project-->Build Settings`选项卡中，我在 Debug 和 Adhoc 中将 Debug 值设置为 1，如下所示：

![在此处输入图像描述](../Images/9c1d2b5df6f30b2c87e14d8eca626ebf.png)

-然后我打开了 prefix.pch 文件，在那里，我被阻止了，我不知道该怎么办。

基本上，我的操作方法是这样的：

```
UIButton btnSwitch=[[UIButton alloc]init];

//Etc... 
```

上面的代码应该在一个特定的文件中调用（应该包含按钮的 UIViewController 类）。

我该怎么做，我的意思是，我怎么能告诉我的应用程序仅在 DEBUG 和 Adhoc 模式下执行特定文件中的代码。

提前谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-21T08:20:49.003

我不确定您对 prefix.pch 文件的想法是什么。暂时不要管它。

您可以在视图控制器内的代码中创建一个按钮，并像这样有条件地执行此操作。

```
#ifdef DEBUG
    UIImage *buttonImage = [UIImage imageNamed:@"btnSwitchImage"];

    btnSwitch = [UIButton buttonWithType:UIButtonTypeCustom];
    //frame size given as a point of reference only but when you create a button this
    //way you have to set the frame otherwise you will see nothing.
    btnSwitch.frame = CGRectMake(0.0f, 0.0f, buttonImage.size.width, buttonImage.size.height);
    [btnSwitch setBackgroundImage:buttonImage forState:UIControlStateNormal];

    [btnSwitch addTarget:self action:@selector(buttonAction:)forControlEvents:UIControlEventTouchUpInside];

    [self.view addSubview:btnSwitch];
#endif 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-21T08:19:47.693

您可以将代码包装在警卫中：

```
#ifdef DEBUG
    // Code here to only run when DEBUG is defined
#else
    // Code here to run only when DEBUG is not defined
#endif

// code here to execute regardless of the state of DEBUG 
```

另外——如果你使用的是 Xcode 4，你不需要自己定义 DEBUG，它已经为你完成了。您可以通过查看方案来控制是否设置。

默认的 Xcode 方案是针对设置调试标志的调试配置构建的。如果要创建设置此构建标志的 AdHoc 方案，则基于 Debug 配置添加 AdHoc 配置，然后基于该配置创建方案。

# c# - 在 C# 中迭代 JSON 对象

> ID：11132288
> 
> 赞同：67
> 
> 时间：2012-06-21T05:54:01.367
> 
> 标签：c#, json, c#-4.0, json.net

我在 C# 中使用 JSON.NET 来解析来自 Klout API 的响应。我的回复是这样的：

```
[
  {
    "id": "5241585099662481339",
    "displayName": "Music",
    "name": "music",
    "slug": "music",
    "imageUrl": "http://kcdn3.klout.com/static/images/music-1333561300502.png"
  },
  {
    "id": "6953585193220490118",
    "displayName": "Celebrities",
    "name": "celebrities",
    "slug": "celebrities",
    "imageUrl": "http://kcdn3.klout.com/static/images/topics/celebrities_b32741b6703151cc7bd85fba24c44c52.png"
  },
  {
    "id": "5757029936226020304",
    "displayName": "Entertainment",
    "name": "entertainment",
    "slug": "entertainment",
    "imageUrl": "http://kcdn3.klout.com/static/images/topics/Entertainment_7002e5d2316e85a2ff004fafa017ff44.png"
  },
  {
    "id": "3718",
    "displayName": "Saturday Night Live",
    "name": "saturday night live",
    "slug": "saturday-night-live",
    "imageUrl": "http://kcdn3.klout.com/static/images/icons/generic-topic.png"
  },
  {
    "id": "8113008320053776960",
    "displayName": "Hollywood",
    "name": "hollywood",
    "slug": "hollywood",
    "imageUrl": "http://kcdn3.klout.com/static/images/topics/hollywood_9eccd1f7f83f067cb9aa2b491cd461f3.png"
  }
] 
```

如您所见，它包含 5 个`id`标签。也许下次它会是 6 或 1 或其他数字。我想遍历 JSON 并获取每个`id`标签的值。在不知道会有多少的情况下，我无法运行循环。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2012-06-21T05:59:43.720

```
dynamic dynJson = JsonConvert.DeserializeObject(json);
foreach (var item in dynJson)
{
    Console.WriteLine("{0} {1} {2} {3}\n", item.id, item.displayName, 
        item.slug, item.imageUrl);
} 
```

或者

```
var list = JsonConvert.DeserializeObject<List<MyItem>>(json);

public class MyItem
{
    public string id;
    public string displayName;
    public string name;
    public string slug;
    public string imageUrl;
} 
```

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2012-06-21T06:05:44.087

您可以使用`JsonTextReader`来读取 JSON 并遍历令牌：

```
using (var reader = new JsonTextReader(new StringReader(jsonText)))
{
    while (reader.Read())
    {
        Console.WriteLine("{0} - {1} - {2}", 
                          reader.TokenType, reader.ValueType, reader.Value);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-23T04:47:22.397

这对我有用，将嵌套 JSON 转换为易于阅读的 YAML

```
 string JSONDeserialized {get; set;}
    public int indentLevel;

    private bool JSONDictionarytoYAML(Dictionary<string, object> dict)
    {
        bool bSuccess = false;
        indentLevel++;

        foreach (string strKey in dict.Keys)
        {
            string strOutput = "".PadLeft(indentLevel * 3) + strKey + ":";
            JSONDeserialized+="\r\n" + strOutput;

            object o = dict[strKey];
            if (o is Dictionary<string, object>)
            {
                JSONDictionarytoYAML((Dictionary<string, object>)o);
            }
            else if (o is ArrayList)
            {
                foreach (object oChild in ((ArrayList)o))
                {
                    if (oChild is string)
                    {
                        strOutput = ((string)oChild);
                        JSONDeserialized += strOutput + ",";
                    }
                    else if (oChild is Dictionary<string, object>)
                    {
                        JSONDictionarytoYAML((Dictionary<string, object>)oChild);
                        JSONDeserialized += "\r\n";  
                    }
                }
            }
            else
            {
                strOutput = o.ToString();
                JSONDeserialized += strOutput;
            }
        }

        indentLevel--;

        return bSuccess;

    } 
```

用法

```
 Dictionary<string, object> JSONDic = new Dictionary<string, object>();
        JavaScriptSerializer js = new JavaScriptSerializer();

          try {

            JSONDic = js.Deserialize<Dictionary<string, object>>(inString);
            JSONDeserialized = "";

            indentLevel = 0;
            DisplayDictionary(JSONDic); 

            return JSONDeserialized;

        }
        catch (Exception)
        {
            return "Could not parse input JSON string";
        } 
```

# iphone - NSCFString objectForKey 无法识别的选择器发送到实例

> ID：11132304
> 
> 赞同：1
> 
> 时间：2012-06-21T05:55:34.493
> 
> 标签：iphone, ios5

```
//initialize the people data list
- (void)initializePeopleListFromJson:(CLLocationCoordinate2D)coordinate auraId:(NSString *)auraId
{

//initialize the NSMutableArray list
self.peopleList = [[NSMutableArray alloc] init];

//retrieve the coordinate of myself
//NSString *myCoordinate = [NSString stringWithFormat:@"%f,%f", coordinate.latitude, coordinate.longitude];
NSString *myCoordinate = @"31.2,121.6";

NSString *url = [NSString stringWithFormat:@"%@%@%@%@", @"http://services.portaura.mobi/AuraMesh/auraFinder/findPeoples?ll=", myCoordinate, @"&source=tencent,netease,kaixin&myAuraId=", auraId];

NSLog(@"*********** %@", url);

//retrieve the people list from web service
NSDictionary* result = [NSDictionary dictionaryWithContentsOfJSONURLString:url];
NSArray *peopleListFromJson = [result objectForKey:@"data"]; 
```

// NSLog(@"peopleList: %@", peopleListFromJson);

```
People *people;
UserProfile *userProfile;
NSDictionary *geoFromJson;
NSDictionary *profileFromJson;

for (NSDictionary *peopleFromJson in peopleListFromJson)
{

    people = [[People alloc] init];
    userProfile = [[UserProfile alloc] init];

    people.foreignId = [peopleFromJson objectForKey:@"foreignId"];
    people.id1 = [peopleFromJson objectForKey:@"id"];
    people.isFavorited = [peopleFromJson objectForKey:@"isFavorited"];
    people.lastActiveTime = [peopleFromJson objectForKey:@"lastActiveTime"];
    people.lastActivity = [peopleFromJson objectForKey:@"lastActivity"];
    people.lastPlace = [peopleFromJson objectForKey:@"lastPlace"];
    people.source = [peopleFromJson objectForKey:@"source"];

    NSLog(@"AAAAAAAA %@", [peopleFromJson objectForKey:@"foreignId"]);

    //process geo
    geoFromJson = [[NSDictionary alloc] init];
    geoFromJson = [peopleFromJson objectForKey:@"geo"];

    CLLocationCoordinate2D coordinate;
    coordinate.latitude = [[geoFromJson objectForKey:@"lat"] floatValue];
    coordinate.longitude = [[geoFromJson objectForKey:@"lng"] floatValue];

    people.geo = coordinate;
    people.distance = [geoFromJson objectForKey:@"distance"];

    //process profile
    profileFromJson = [[NSDictionary alloc] init];
    profileFromJson = [peopleFromJson objectForKey:@"profile"];

    people.avatar = [profileFromJson objectForKey:@"avatar"];
    people.gender = [profileFromJson objectForKey:@"gender"];
    people.location = [profileFromJson objectForKey:@"location"];
    people.screenName = [profileFromJson objectForKey:@"screenName"];
    people.signature = [profileFromJson objectForKey:@"sigunature"];

    //people.userProfile = userProfile;
    [self addPeople:people];

} 
```

}

```
it  give me the [__NSCFString objectForKey:]: unrecognized selector sent to instance 0x1808d0,can you give some advice 
```

json 喜欢：

{"status":0,"data":{"list":[{"foreignId":"8827857641648129226","geo":{"distance":1359,"lat":31.20926508184017,"lng":121.59068046014856}, "id":"netease_8827857641648129226","isFavorited":false,"lastActiveTime":"2012-05-19T20:26:47Z","lastActivity":"目标[http://126.fm/kFEKl","lastPlace](http://126.fm/kFEKl) " :"","profile":{"头像":"http://oimagea3.ydstatic.com/image?w=48&h=48&url=http%3A%2F%2Fmimg.126.net%2Fp%2Fbutter%2F1008031648% 2Fimg%2Fface_big.gif","gender":0,"location":"","screenName":"4671784460","sigunature":"","tags": []},"source":“网易”}......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-21T06:02:48.867

检查您的变量类`peopleFromJson`，在您调用 objectForKey 时它可能不是字典。

将此语句作为您`for`循环中的第一行
`NSLog(@"%@",NSStringFromClass([peopleFromJson class]));`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T08:14:26.290

我已经解决了问题，我认为问题不简单，也许有些人只知道原因是对象是 NSString 而不是 NSDir，但真正的问题是取决于 json“样式”，有时我的代码是正确的，但对于其他json 不正确，例如我的问题 json. 所以解决的是：

```
if ( ![peopleListFromJson isKindOfClass:[NSArray class]] && peopleListFromJson!=nil) {
    peopleListFromJson =[NSArray arrayWithObject:peopleListFromJson];
}

because i used 
NSDictionary* result = [NSDictionary dictionaryWithContentsOfJSONURLString:url];
NSArray *peopleListFromJson = [result valueForKeyPath:@"data.list"];
so peopleListFromJson!=nil is impotent 
```

# ruby-on-rails - 如何在 Ruby on Rails 中实现由 JSF 2.0 (Primefaces) 驱动的 UI 魔法

> ID：11132309
> 
> 赞同：5
> 
> 时间：2012-06-21T05:56:12.980
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, jsf-2, jruby

**问题 1）** 我想知道 ruby​​ on rails 是否有功能类似于 primefaces 的 gems。为什么我要问的是

如果您使用 primefaces ( [http://www.primefaces.org/showcase-labs/ui/home.jsf](http://www.primefaces.org/showcase-labs/ui/home.jsf) )，开发人员无需担心 javascript 或 jquery 的东西。

据我所知，JSF 是一个规范，基于规范的各种可用实现，primefaces 是这些实现的 ui 框架，primefaces 有很多基于 jquery 和 javascript 库的组件。或多或少的 primefaces 只是用作 javascript 包装器。我使用 primefaces ，您主要专注于业务逻辑，无需担心 UI。

我深受 ruby​​ on rails 方法的启发，并且有很多可用的宝石。

***我的问题是，是否有可用于 ruby​​ on rails 的 gem 或 UI 框架，类似于 primefaces 驱动的 UI 魔术***

注意：我不是在寻找纯 jquery 或 dojo 的东西，我在寻找用于 ruby​​ on rails 的 UI 组件驱动的东西。从事使用 primefaces 项目和使用 rails 项目的人会 100% 理解我的问题。

**问题 2)** 我想知道与用户界面相关的宝石列表。我要问的是为了在 ruby​​ on rails 上创建非常利基的用户界面，需要什么东西（框架或 gem）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T20:21:35.437

先前答案的许多部分根本不正确。听起来回答者没有使用 JSF2.0，这就是 Primefaces。JSF v1 非常复杂，对每个人来说都是一次糟糕的体验。JSF2.0 与 JSF v1 完全不同，所以要小心那些承认不使用 JSF2.0 的反对者。

JSF2.0 是一个非常高效且有趣的 Web 框架。它根本不是“企业性”（但从 JSF v1 获得了这种声誉）。它很轻巧，不会妨碍您。因为它是 Java（最终被编译，而不是解释），所以它也很快。

它的核心是一个模板框架：您不仅限于组件，默认情况下它是自由格式的 HTML。您可以选择使用称为组件的智能标记，这些标记可以在请求生命周期内维护状态，这对于执行验证和 ajax 之类的事情非常方便（在 JSF2.0 中两者都是非常简单的任务）。

JSF2.0 还管理可以绑定到不同范​​围（如请求、视图、会话甚至应用程序）的 bean（您定义的小型有状态对象）的生命周期。控制器在 Rails 中是一个类似的概念，但是 JSF2.0 没有路由的概念，而是使用 EL 传递函数对象，因此它具有动作的概念。这使它具有难以置信的自由形式；你可以使用任何你喜欢的软件模式：我喜欢 MVVM 而不是 MVC，我倾向于使用这种模式，而 Rails 是相当严格的 MVC。

组件库是一组可以放到页面上的 java 代码和 html 片段。Primefaces 是常用 UI 小部件的组件库。本质上，您编写一些 JSF/HTML 代码并在浏览器上驱动 JQuery UI。

你能在 Ruby 中使用 JSF2.0 吗？我打赌你可以使用 JRuby。如果可以使用 JSF2.0 注释（如 @ManagedBean）来注释 Ruby 对象，我相当肯定您可以通过一些实验来完成这项工作。

祝你好运，如果你最终这样做了，请回帖！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-02T18:01:52.057

我真的觉得你在这里问的是“错误”的问题——因为我以前在 JSF（主要是 MyFaces）和 Rails 方面的经验。

我假设您大部分时间都在使用 Rails - 忘记 JSF，忘记组件，甚至可能忘记您如何编写 JavaScript（在 JSF 项目中）。RoR 是一个不同的世界，你越深入它就越忽视组件，至少我是这样。我还用 Ruby on Rails 重新发明了“简单”的 Web 编程，并获得了一些“宝贵”的 JavaScript 经验，但我不得不放弃我以前从 Java 领域获得的一些“智慧”:)

据我所知，Rails 没有这样的 UI“魔法驱动框架”，我相信也没有需求。视图层，包括 JavaScript 集成，在（基于组件的）JSF 应用程序中（在概念上）与在 Ruby on Rails 中的不同。

我个人只认为 JSF 是“企业形式”应用程序的一个不错的选择，这些应用程序只需要编写一次，发展最少并且需要很少的组件定制（或者需要一些但比提出定制组件所花费的时间应该在其他应用程序上重用） .

JSF 的视图层往往会限制您使用您拥有的组件 - 您倾向于考虑使现有组件适应您的需求，而不是清楚地考虑“小部件”的 HTML 的布局，在真正的用例需求，而不是您最终花费大量时间检查组件以寻找可能的扩展和黑客攻击。更不用说适应您没有编写的 HTML + JavaScript 生成的片段可能更难，即使仔细编写它仍然存在，您必须为每个组件学习另一个“小”API。

如果您查看 Rails，它的设计不同 - 您编写“普通旧”视图（最初需要一些时间），为了重用，您可以将它们逻辑地拆分为部分（很可能是随着新需求的出现）。重用时，部分可以很容易地适应新的场景，更不用说你可以控制标记附带的 JavaScript。

除了许多新的应用程序被编写为带有 REST API 的胖 JavaScript 客户端之外，我无法想象 JSF 在这里不会成为一个负担，因为您大多数时间都需要完全控制您的 HTML 和 JavaScript。您必须并且想要担心 UI，当然不需要另一个服务器 + 客户端 JavaScript 包装器。如果您更喜欢在组件方面进行思考，我宁愿建议您查看诸如 Ext-JS 之类的客户端组件库。

# .htaccess - htaccess 重定向与查询字符串修改

> ID：11132317
> 
> 赞同：0
> 
> 时间：2012-06-21T05:56:44.350
> 
> 标签：.htaccess

我有一个这样的页面： [http ://www.example.com/page.php?id=1&pnc=5](http://www.example.com/page.php?id=1&pnc=5)

我想使用 htaccess 将其重定向到一个新的静态页面： [http ://www.example.com/page-1-5.html](http://www.example.com/page-1-5.html)

然后 ！！

如果新页面[http://www.example.com/page-1-5.html](http://www.example.com/page-1-5.html) 将被加载，它将读取并显示原始页面[http://www.example.com/page.php?id= 1&pnc=5](http://www.example.com/page.php?id=1&pnc=5)

先感谢您 ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T20:47:31.920

在您的 .htaccess 中尝试以下操作：

```
RewriteEngine On
RewriteRule ^page-(\d+)-(\d+)$ page.php?id=$1&pnc=$2 
```

现在您应该可以通过在地址栏 page-1-5 中键入来访问 page.php?id=1&pnc=5。

# javascript - 如何收集onMouse和onTouch以便画布可以在鼠标和ipad上使用？

> ID：11132318
> 
> 赞同：1
> 
> 时间：2012-06-21T05:56:44.307
> 
> 标签：javascript, canvas, touch-event, onmousemove

我在混淆如何在我的编码中放置 ontouch 时遇到了问题，因为我希望它在 ipad 上运行，下面是我的代码

```
 <script language="javascript">
function sig1()
{
    if(sig == null)
    {
        xclear('myCanvas');
    }
} 
```

清除画布中的行的代码

```
<body id="main_body" class="no_guidelines" onload="sig1()" onmouseup="bodyonmouseup"> 
```

让画布具有填充样式颜色和功能

```
<canvas border=1 id="myCanvas" height=200 width=400 onmousedown="onmousedown()" onmouseup="onmouseup()" onmousemove="onmousemove()">Your browser does not support the application</canvas> 
```

可以像签名一样画线的画布

```
var sig = null;
      var ele;
      function bodyonmouseup(e)
{
    var ele;
    ele = document.getElementById('myCanvas');
    ele.isDown = false;
}
function onmousedown(e)
{
    var ele,p;
    if (!e) e = window.event;
    ele = (e.srcElement);
    if (! ele) ele = e.target;
    ele.isDown = true; 
    ele.context = ele.getContext("2d");
    ele.context.lineWidth = 1;
    ele.context.beginPath();   
    ele.context.moveTo(e.offsetX,e.offsetY);
    sig.line = new Array();

    p = new Object();
    p.x = e.offsetX;
    p.y = e.offsetY;

    sig.p = p;
    sig.line[sig.line.length] = p;
    sig.lines[sig.lines.length] = sig.line;
}
function onmousemove(e)
{
    var ele,dx,dy,p;
    if (!e) e = window.event;
    ele = (e.srcElement);
    if (! ele) ele = e.target;
    if (! ele.isDown) return;
    ele.context.lineTo(e.offsetX,e.offsetY);
    ele.context.stroke();
    dx = e.offsetX - sig.p.x;
    dy = e.offsetY - sig.p.y;
    if (dx == 0 && dy == 0) return;
    sig.p = new Object();
    sig.p.x = e.offsetX;
    sig.p.y = e.offsetY;
    sig.line[sig.line.length] = sig.p;
} 
```

所以我想知道我是否要同时保留onMouse和ontouch，我如何放置ontouch以便可以在ipad上绘制画布？请帮忙，很紧急

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T07:37:25.943

使用这个 js。您的手指将成为您的鼠标。他们正在将所有触摸事件转换为鼠标事件。

[jquery-ui-touch-punch](https://github.com/furf/jquery-ui-touch-punch)

# regex - DFA 最小化

> ID：11132319
> 
> 赞同：4
> 
> 时间：2012-06-21T05:56:54.960
> 
> 标签：regex, lexer, dfa, nfa

我有一个关于 DFA 最小化的问题。因此，我使用了众所周知的技术将正则表达式转换为 NFA，然后使用 goto / 闭包算法从中构造 DFA。现在的问题是如何最小化它？我在这里看过有关它的演讲：[http](http://www.youtube.com/watch?v=T9Z66NF5YRk) ://www.youtube.com/watch?v=T9Z66NF5YRk，但我仍然无法理解这一点。什么是 DFA 最小化？这只是合并相同的状态（在相同字符上进入相同状态的状态）还是不同的东西？

所以，我从以下语法开始：

```
%digit = '0'..'9'
%letter = 'a'..'z' | 'A'..'Z'
%exponent = ("e" | "E") ("+" | "-")? digit+

T_INT = digit+
T_FLOAT = T_INT exponent
T_IDENTIFIER = (letter | "$" | "_") (letter | "$" | "_" | digit)* 
```

并最终得到以下 DFA（表示为 JSON）：

```
{
    "START": [{
        "type": "range",
        "from": 36,
        "to": 36,
        "shift": "1"
    }, {
        "type": "range",
        "from": 48,
        "to": 57,
        "shift": "2"
    }, {
        "type": "range",
        "from": 65,
        "to": 90,
        "shift": "1"
    }, {
        "type": "range",
        "from": 95,
        "to": 95,
        "shift": "1"
    }, {
        "type": "range",
        "from": 97,
        "to": 122,
        "shift": "1"
    }],
    "1": [{
        "type": "range",
        "from": 36,
        "to": 36,
        "shift": "1"
    }, {
        "type": "range",
        "from": 48,
        "to": 57,
        "shift": "1"
    }, {
        "type": "range",
        "from": 65,
        "to": 90,
        "shift": "1"
    }, {
        "type": "range",
        "from": 95,
        "to": 95,
        "shift": "1"
    }, {
        "type": "range",
        "from": 97,
        "to": 122,
        "shift": "1"
    }, {
        "shift": ["t_identifier"]
    }],
    "2": [{
        "type": "range",
        "from": 48,
        "to": 57,
        "shift": "2"
    }, {
        "type": "range",
        "from": 69,
        "to": 69,
        "shift": "3"
    }, {
        "type": "range",
        "from": 101,
        "to": 101,
        "shift": "3"
    }, {
        "shift": ["t_int"]
    }],
    "3": [{
        "type": "range",
        "from": 43,
        "to": 43,
        "shift": "5"
    }, {
        "type": "range",
        "from": 45,
        "to": 45,
        "shift": "5"
    }, {
        "type": "range",
        "from": 48,
        "to": 57,
        "shift": "4"
    }],
    "4": [{
        "type": "range",
        "from": 48,
        "to": 57,
        "shift": "4"
    }, {
        "shift": ["t_float"]
    }],
    "5": [{
        "type": "range",
        "from": 48,
        "to": 57,
        "shift": "4"
    }]
} 
```

那么如何最小化它呢？

**更新：**

好的，这是我的算法。给定以下 DFA：

```
{
    0: [{
        from: 97,
        to: 97,
        shift: 1
    }],
    1: [{
        from: 97,
        to: 97,
        shift: 3
    }, {
        from: 98,
        to: 98,
        shift: 2
    }],
    2: [{
        from: 98,
        to: 98,
        shift: 4
    }],
    3: [{
        from: 97,
        to: 97,
        shift: 3
    }, {
        from: 98,
        to: 98,
        shift: 4
    }],
    4: [{
        from: 98,
        to: 98,
        shift: 4
    }]
} 
```

这就是我为最小化它所做的事情：

1.  对于每个状态（在我的示例中编号为 0、1、2、3、4），获取标识此类状态的唯一哈希（例如，对于 state0，这将是：from=97,to=97,shift=1，对于 state1，此将是：from=97,to=97,shift=3&from=98,to=98,shift=2 等等...)

2.  比较获得的哈希值，如果我们找到两个相同的哈希值，则将其合并。在我的例子中，state2 hash 为：from=98&shift=4&to=98，state4 hash 为：from=98&shift=4&to=98，它们是相同的，所以我们可以将它们合并到新的 state5 中，之后 DFA 将看起来像这样：

    ```
    {
    0: [{
        from: 97,
        to: 97,
        shift: 1
    }],
    1: [{
        from: 97,
        to: 97,
        shift: 3
    }, {
        from: 98,
        to: 98,
        shift: 5
    }],
    3: [{
        from: 97,
        to: 97,
        shift: 3
    }, {
        from: 98,
        to: 98,
        shift: 5
    }],
    5: [{
        from: 98,
        to: 98,
        shift: 5
    }] 
    ```

    }

3.  继续这个，直到我们没有任何变化，所以下一步（合并状态 1 和 3）会将 DFA 转换为以下形式：

    ```
    {
    0: [{
        from: 97,
        to: 97,
        shift: 6
    }],
    6: [{
        from: 97,
        to: 97,
        shift: 6
    }, {
        from: 98,
        to: 98,
        shift: 5
    }],
    5: [{
        from: 98,
        to: 98,
        shift: 5
    }] 
    ```

    }

4.  没有更多相同的状态，这意味着我们完成了。

**第二次更新：**

好的，给定以下正则表达式： 'a' ('ce')* ('d' | 'xa' | 'AFe')+ | 'b' ('ce')* ('d' | 'xa' | 'AFe')+ 'ce'+ 我有以下 DFA (START -> start state, ["accept"] -> so to说转换到接受状态）：

```
{
    "START": [{
        "type": "range",
        "from": 98,
        "to": 98,
        "shift": "1.2"
    }, {
        "type": "range",
        "from": 97,
        "to": 97,
        "shift": "17.18"
    }],
    "1.2": [{
        "type": "range",
        "from": 120,
        "to": 120,
        "shift": "10"
    }, {
        "type": "range",
        "from": 100,
        "to": 100,
        "shift": "6.7"
    }, {
        "type": "range",
        "from": 65,
        "to": 65,
        "shift": "8"
    }, {
        "type": "range",
        "from": 99,
        "to": 99,
        "shift": "4"
    }],
    "10": [{
        "type": "range",
        "from": 97,
        "to": 97,
        "shift": "6.7"
    }],
    "6.7": [{
        "type": "range",
        "from": 99,
        "to": 99,
        "shift": "15"
    }, {
        "type": "range",
        "from": 120,
        "to": 120,
        "shift": "13"
    }, {
        "type": "range",
        "from": 100,
        "to": 100,
        "shift": "6.7"
    }, {
        "type": "range",
        "from": 65,
        "to": 65,
        "shift": "11"
    }],
    "15": [{
        "type": "range",
        "from": 101,
        "to": 101,
        "shift": "14.accept"
    }],
    "14.accept": [{
        "type": "range",
        "from": 99,
        "to": 99,
        "shift": "16"
    }, {
        "shift": ["accept"]
    }],
    "16": [{
        "type": "range",
        "from": 101,
        "to": 101,
        "shift": "14.accept"
    }],
    "13": [{
        "type": "range",
        "from": 97,
        "to": 97,
        "shift": "6.7"
    }],
    "11": [{
        "type": "range",
        "from": 70,
        "to": 70,
        "shift": "12"
    }],
    "12": [{
        "type": "range",
        "from": 101,
        "to": 101,
        "shift": "6.7"
    }],
    "8": [{
        "type": "range",
        "from": 70,
        "to": 70,
        "shift": "9"
    }],
    "9": [{
        "type": "range",
        "from": 101,
        "to": 101,
        "shift": "6.7"
    }],
    "4": [{
        "type": "range",
        "from": 101,
        "to": 101,
        "shift": "2.3"
    }],
    "2.3": [{
        "type": "range",
        "from": 120,
        "to": 120,
        "shift": "10"
    }, {
        "type": "range",
        "from": 100,
        "to": 100,
        "shift": "6.7"
    }, {
        "type": "range",
        "from": 65,
        "to": 65,
        "shift": "8"
    }, {
        "type": "range",
        "from": 99,
        "to": 99,
        "shift": "5"
    }],
    "5": [{
        "type": "range",
        "from": 101,
        "to": 101,
        "shift": "2.3"
    }],
    "17.18": [{
        "type": "range",
        "from": 120,
        "to": 120,
        "shift": "25"
    }, {
        "type": "range",
        "from": 100,
        "to": 100,
        "shift": "22.accept"
    }, {
        "type": "range",
        "from": 65,
        "to": 65,
        "shift": "23"
    }, {
        "type": "range",
        "from": 99,
        "to": 99,
        "shift": "20"
    }],
    "25": [{
        "type": "range",
        "from": 97,
        "to": 97,
        "shift": "22.accept"
    }],
    "22.accept": [{
        "type": "range",
        "from": 120,
        "to": 120,
        "shift": "28"
    }, {
        "type": "range",
        "from": 100,
        "to": 100,
        "shift": "22.accept"
    }, {
        "type": "range",
        "from": 65,
        "to": 65,
        "shift": "26"
    }, {
        "shift": ["accept"]
    }],
    "28": [{
        "type": "range",
        "from": 97,
        "to": 97,
        "shift": "22.accept"
    }],
    "26": [{
        "type": "range",
        "from": 70,
        "to": 70,
        "shift": "27"
    }],
    "27": [{
        "type": "range",
        "from": 101,
        "to": 101,
        "shift": "22.accept"
    }],
    "23": [{
        "type": "range",
        "from": 70,
        "to": 70,
        "shift": "24"
    }],
    "24": [{
        "type": "range",
        "from": 101,
        "to": 101,
        "shift": "22.accept"
    }],
    "20": [{
        "type": "range",
        "from": 101,
        "to": 101,
        "shift": "18.19"
    }],
    "18.19": [{
        "type": "range",
        "from": 120,
        "to": 120,
        "shift": "25"
    }, {
        "type": "range",
        "from": 100,
        "to": 100,
        "shift": "22.accept"
    }, {
        "type": "range",
        "from": 65,
        "to": 65,
        "shift": "23"
    }, {
        "type": "range",
        "from": 99,
        "to": 99,
        "shift": "21"
    }],
    "21": [{
        "type": "range",
        "from": 101,
        "to": 101,
        "shift": "18.19"
    }]
} 
```

故事是一样的，我如何最小化它？如果我遵循经典的 Hopcroft 算法来构建所有这些表，确定不可区分的状态，将它们合并在一起等等，那么我将获得包含 15 个状态的 DFA（使用此工具：[http](http://regexvisualizer.apphb.com/) ://regexvisualizer.apphb.com/使用这个正则表达式 a(ce) *(d|xa|AFe)+|b(ce)* (d|xa|AFe)+ce+ 来检查）。以下是使用 Hopcroft 算法缩小后 DFA 的样子：

![Hopcroft 的最小化 DFA](../Images/ba93b115cc61085ad76f55efbdba71bd.png)

我想出的算法，在“重新思考” Hopcroft 的算法之后，构建的 DFA 比您在上面看到的要小（对不起图像质量，我不得不一步一步地重新绘制它以了解为什么它更小）：

![我的算法](../Images/5583438e0c0b52b445efe40bb78bd15f.png)

这就是它的工作原理，关于“状态等价”的决定是基于给定状态（例如“START”）的哈希函数的结果，如果我们从该状态开始，可以构建可以从 DFA 构造的短字符串. 给定上面的 DFA 和 START 状态，我们可以构造以下字符串：98->120, 98->100, 98->65, 98->99, 97->120, 97->100, 97->65 , 97->99 所以让它成为 START 状态的哈希函数的结果。如果我们为 DFA 中的每个状态运行此函数，我们将看到对于某些状态，此函数为我们提供相同的结果（“1.2”、“6.7”、“2.3”和“10”、“13”和“15” ，“16”和“11”，“8”，“26”，“23”和“12”，“9”，“4”，

我看到我在某个地方错了，但不明白我的算法产生的最小化 DFA 有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T11:32:54.853

您提出的算法没有完全最小化，因为它没有检测到行为相同的复杂结构。要理解这一点，请查看此 DFA（由[JFLAP](http://www.jflap.org/)绘制）：

![在此处输入图像描述](../Images/1918f9efb1068d836b5b4d73068f1457.png)

最小化将结合 q1 和 q2，但概述的算法无法做到。

与此相反，Hopcroft 的算法最初会这样划分：

```
 {q0, q1, q2}, {q3} 
```

然后拆分第一组，因为 q0 没有到 q3 的转换：

```
 {q0}, {q1, q2}, {q3} 
```

并且不会进一步拆分，因为 q1 和 q2 的行为相同。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-21T09:14:23.663

让您的原始 DFA 称为 M1。简单来说，构造一个最小化的 DFA（称为 M2）意味着将其转换为包含最少状态数的 DFA。因此，M2 中的状态数将少于 M1 中的状态数。这里需要注意的重要一点是 M1 和 M2 必须是等价的，这意味着它们必须定义相同的正则语言。构建最小化的 DFA 不仅涉及寻找相同的状态，还涉及以下内容：

1.  移除“不可到达”状态：
    这涉及从 DFA 的初始状态移除不可到达的状态，对于任何输入字符串。

2.  去除“死”或“陷阱”状态：
    这涉及去除终止于自身的非接受状态。它们也被称为 TRAP 状态。

3.  删除“不可区分”状态：
    这涉及删除对于任何输入字符串无法相互区分的状态。

还有一些流行的算法用于 DFA 最小化：

*   [摩尔算法](http://www.cs.vassar.edu/~cs240/lectures/myhill-nerode.pdf)

*   [Brzozowski 算法](https://cs.stackexchange.com/questions/1872/brzozowskis-algorithm-for-dfa-minimization)

*   [Hopcroft 算法](http://web.cecs.pdx.edu/~harry/compilers/slides/LexicalPart4.pdf)

可能值得通过这些算法！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-26T19:40:22.183

鉴于您有将 NFA 确定为 DFA 的代码，最小化它的最简单解决方案是 Brzozowski 算法。您将需要实现一个函数来反转 NFA，但这相当简单。（反转转换，交换开始和接受状态）

一旦你有一个确定和反向函数，Brzozowski 最小化被实现为：

```
minimize(nfa) = determinize(reverse(determinize(reverse(nfa)))) 
```

恕我直言，这是一个非常优雅的解决方案

# json - 将元素添加到空 json 数组并删除它们

> ID：11132320
> 
> 赞同：4
> 
> 时间：2012-06-21T05:57:02.140
> 
> 标签：json, arrays

我通过以下方式创建了一个空的 json 对象，该对象具有一个数组 itemlist（其中还包含 itemid 和 item 的标题）：

```
var jsonObj = {};
jsonObj.itemlist=[];
jsonObj.itemlist.push({}); 
```

首先，我是否正确完成了声明？

其次，标题和 itemid 是动态生成的，所以我需要将它们添加到 itemlist 数组中。我试过了，但它只保留一个数组元素：

```
jsonObj.itemlist['title']=gentitle;
jsonObj.itemlist['itemid']=genitemid; 
```

如果我有一个空的项目列表数组，如何添加多个元素（不是一次全部）？

此外，我还需要根据元素的标题删除特定的数组元素。怎么可能呢？我认为可以使用拼接和删除功能，但是我怎样才能找到那个元素的索引呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T06:19:39.057

由于您已经将一个空对象推送到数组中，因此您需要修改该对象：

```
jsonObj.itemlist[0]['title']=gentitle;
jsonObj.itemlist[0]['itemid']=genitemid; 
```

要添加更多对象，您可以执行相同的操作：推入一个空对象，然后修改该对象。或者，您可以创建一个对象，对其进行修改，然后将其推送到列表中。

```
var new_obj = {'title':gentitle, 'itemid':genitemid};
jsonObj.itemlist.push( new_obj ); 
```

删除具有特定属性值的对象：

```
for (var i = jsonObj.itemlist.length-1; i >= 0; i--)
    if(jsonObj.itemlist[i]['title'] == "to-be-removed")
        jsonObj.itemlist.splice(i,1); 
```

请注意，您需要向后退，否则`splice`会弄乱数组索引

# javascript - 如何检测 Safari 是否处于阅读器模式？

> ID：11132321
> 
> 赞同：3
> 
> 时间：2012-06-21T05:57:03.367
> 
> 标签：javascript, ios, macos, safari

我希望能够在 Safari 处于`reader`模式时从 Javascript 获得通知。浏览器是否触发了事件或设置了标志？

这个问题与 iPhone、iPad 和 OSX 有关。

# android - 使用android开发三星电视应用程序

> ID：11132324
> 
> 赞同：2
> 
> 时间：2012-06-21T05:57:28.900
> 
> 标签：android, google-tv, samsung-smart-tv

那里显示了三星智能电视的应用程序开发工具包。但我怀疑它是否支持安卓应用程序。所有的智能电视都是谷歌驱动的吗？他们都支持android应用程序吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T06:20:35.147

三星 2012 年的电视系列将以某种方式运行 Google TV 软件（我不确定是哪种方式，但我相信它将与三星现有系统并列或之上）。

Google TV 由 Android 驱动。

如果您想支持 2011 年或更早发布的电视，您将无法利用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T05:38:26.473

在正常的 2012 年三星机型上，您也不会运行 Android 应用程序。

三星和谷歌已经签署了协议，但它只适用于一两台电视机型号，就像与索尼和 LG 一样。

因此，如果您想为三星制作应用程序 - 忘记 Android 应用程序，使用 HTML/JavaScript。

我已经在这里提到过[https://stackoverflow.com/a/10881869/364483](https://stackoverflow.com/a/10881869/364483) - 您还可以为 Google TV 制作 HTML/Javascript 应用程序。

# javascript - JQuery .post() 不返回数据

> ID：11132325
> 
> 赞同：1
> 
> 时间：2012-06-21T05:57:34.127
> 
> 标签：javascript, jquery

我正在尝试将参数传递给[TinyPaste](http://www.tinypaste.com/) API。我在 HTML 文件中有以下 JQuery 脚本，

```
$.post("http://tinypaste.com/api/create.json", 
    { 
     "paste": "This is test paste", 
     "title": "Test",
     "is_code": 0,
     "is_private": 1
    },
    function(data) {
        console.log(data);
    }
); 
```

正如在 Firefox 的 Web 控制台中看到的，我可以看到请求已发出并且成功（响应的内容长度符合预期）。但是回调函数没有在控制台窗口中打印任何内容。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T06:36:08.523

问题中发布的脚本的主要（也是唯一）问题是它在正常网页上发出跨域 HTTP/POST 请求。我以前认为您正在开发一些浏览器扩展，如果配置正确，您将可以进行跨域请求。HTTP/POST 在您的情况下将不起作用。尽管有一些技巧可以让 HTTP/GET 正常工作，比如使用脚本标签和 JSONP。

在您的情况下，我建议让您的服务器（为您的页面提供服务）为您执行请求。

该过程将是：

*   您使用 tinypaste 的参数向服务器提交请求。
*   服务器端脚本将对 tinypaste 执行 HTTP/POST，并获取响应。这个响应被发送到浏览器。
*   浏览器得到响应。（可能是重定向或其他东西）

或者正如@charlietfl 建议的那样，您可以使用[YQL 和 Jquery](http://net.tutsplus.com/tutorials/javascript-ajax/quick-tip-cross-domain-ajax-request-with-yql-and-jquery/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T06:00:39.380

你应该这样写

```
 $.post("http://tinypaste.com/api/create.json", 
            { 
             'paste': "This is test paste", 
             'title': "Test",
             'is_code': 0,
             'is_private': 1
            },
            function(data) {
                console.log(data);
            },
            'jsonp'
        ); 
```

您还必须向服务器发送数据类型，即`jsonp`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T06:04:04.560

看起来您正在从您的网站向另一个域发出请求，这违反了浏览器的 SAME ORIGIN POLICY，您需要使用[JSONP](http://en.wikipedia.org/wiki/JSONP)来解决这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T06:04:08.617

**编辑： POST 不适用于跨域使用 $.getJSON 代替**

```
$.getJSON("http://tinypaste.com/api/create.json", 
    { 
     "paste": "This is test paste", 
     "title": "Test",
     "is_code": 0,
     "is_private": 1
    },
    function(data) {
        console.log(data);
    }
); 
```

API 完全有可能不提供 JSONP，在这种情况下，您将需要求助于替代方法

# wcf - 如何在 Visual Studio Express 中调试 wcf Web 服务？

> ID：11132328
> 
> 赞同：0
> 
> 时间：2012-06-21T05:57:56.613
> 
> 标签：wcf, debugging, visual-studio-express

我在 Visual Studio 2010 Express Edition 的 vb.net 中开发了 WCF Web 服务。截至目前，也在本地部署了 t。由于 VS Express 不支持单元测试，我无法测试 Web 服务。使用 NUnit 之类的框架受到限制。我应该如何测试我的 Web 服务并对其进行调试？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T06:58:08.963

使用 WCF 测试客户端（在此位置找到 -

> C:\Program Files\Microsoft Visual Studio 9.0\Common7\IDE\

）。

绑定 wcf TEST 客户端进程进行调试。从 VS 转到调试 -> 附加到进程 -> wcfTestClient.exe。

然后从测试客户端执行该方法，您将能够调试服务代码

# grails - Grails理解属于关联

> ID：11132329
> 
> 赞同：0
> 
> 时间：2012-06-21T05:57:57.090
> 
> 标签：grails, associations, grails-2.0

> **可能重复：**
> [Grails/GORM：belongsTo 在 1:N 关系中的含义](https://stackoverflow.com/questions/654871/grails-gorm-the-meaning-of-belongsto-in-1n-relationships)

我有 2 个具有 belongsTo 关联的域类

```
 class Teacher {
         String name
         String department
      }

      class Address {
        String line1
        String line2

       // Teacher teacher  //this line is commented.
       static belongsTo = [teacher: Teacher]

        static constraints = {
        }
     } 
```

1.  当我让地址**属于**老师时，我得到了什么好处
2.  我需要在地址类中声明教师对象引用吗（参见教师类中的注释行）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T06:22:08.007

拥有该`belongsTo`子句的目标是实现从一个类到另一个类的双向访问。请参阅[belongsTo 的文档](http://grails.org/doc/latest/ref/Domain%20Classes/belongsTo.html)。

您可以省略第二个教师声明（您已注释掉）。

所以它应该是这样的：

```
 class Teacher {
     String name
     String department

     Set<Address> adresses = new HashSet<Address>() // here you could set a specific list/set data holder
     static hasMany = [adresses:Address]
  }

  class Address {
    String line1
    String line2

   static belongsTo = [teacher: Teacher]

    static constraints = {
    }
 } 
```

在这里，您有一个一对多的关联，两个类都可以相互访问。如果删除该`belongsTo`子句，您将无法从地址对象访问教师对象。这也反映在数据库中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T09:01:03.270

belongsTo 的目标不是使关系成为双向的 - 目标是指定关联的哪一方获得所有权并定义级联保存和删除操作的行为

阅读这个[文档](http://grails.org/doc/latest/ref/Domain%20Classes/belongsTo.html)，它解释了你需要知道的关于 belongsTo 的所有事情。

# php - fopen() 返回错误：打开流失败：HTTP 请求失败！HTTP/1.1 404 未找到

> ID：11132331
> 
> 赞同：1
> 
> 时间：2012-06-21T05:58:17.867
> 
> 标签：php, linux

以下代码产生了我在标题中所述的错误：

```
 $authkey = "XXXXXXXXXXX";

    if (!isset($_SESSION["steamid"])) {

        $handle = fopen("http://api.steampowered.com/ISteamUser/GetPlayerSummaries/v0002/?key=" . $authkey . "&steamids=" . $uid, "r");

        $content = stream_get_contents($handle);

        $stdclass = json_decode($content);

        //var_dump($stdclass);

        $data = get_object_vars($stdclass->response->players[0]);

        foreach ($data as $key => $value) {
            $_SESSION[$key] = $value;
    } 
```

我已经在 stackoverflow 上阅读了其他关于相同问题的问题，但从来没有真正的解决方案。我发布的代码在某种登录过程中调用的函数中。如果我将代码放在文档之外并用我的网络浏览器打开该文档，则不会出现错误。此外，该代码正在我的本地机器上运行。但是在我的服务器上出现了错误。

我的本地机器使用 php5 运行 ubuntu 12.04，我的外部服务器使用 php5 运行 ubuntu 8.04。allow_url_fopen 为“开”。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T06:28:54.143

fopen 默认情况下不允许打开远程位置。更稳定的方法是使用 curl：

```
$c = curl_init( sprintf("http://api.steampowered.com/ISteamUser/GetPlayerSummaries/v0002/?key=%s&steamids=%s" , $authkey , $uid) );
curl_setopt( $c , CURLOPT_RETURNTRANSFER , true );
$stdClass = json_decode( curl_exec( $c ) ); 
```

# java - Android：发送没有回应的帖子

> ID：11132334
> 
> 赞同：0
> 
> 时间：2012-06-21T05:58:22.940
> 
> 标签：java, android, http-post, apache-httpclient-4.x

在我的应用程序中，我需要向服务器发送各种`POST`请求。其中一些请求有响应，而另一些则没有。

这是我用来发送请求的代码：

```
private static final String TAG = "Server";
private static final String PATH = "http://10.0.0.2:8001/data_connection";
private static HttpResponse response = null;
private static StringEntity se = null;
private static HttpClient client;
private static HttpPost post = null;
public static String actionKey = null;

public static JSONObject sendRequest(JSONObject req) {
    try {
        client = new DefaultHttpClient();

        actionKey = req.getString("actionKey");
        se = new StringEntity(req.toString());
        se.setContentEncoding(new BasicHeader(HTTP.CONTENT_ENCODING, "application/json"));
        se.setContentType(new BasicHeader(HTTP.CONTENT_TYPE, "application/json"));
        post = new HttpPost(PATH);
        post.setEntity(se);

        Log.d(TAG, "http request is being sent");
        response = client.execute(post);
        Log.d(TAG, "http request was sent");

        if (response != null) {
            InputStream in = response.getEntity().getContent();
            String a = convertFromInputStream(in);
            in.close();
            return new JSONObject(a);
        }

    } catch (UnsupportedEncodingException e) {
        Log.d(TAG, "encoding request to String entity faild!");
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        Log.d(TAG, "executing the http POST didn't work");
        e.printStackTrace();
    } catch (IOException e) {
        Log.d(TAG, "executing the http POST didn't work");
        e.printStackTrace();
    } catch (JSONException e) {
        Log.d(TAG, "no ActionKey");
        e.printStackTrace();
    }
    return null;
}

private static String convertFromInputStream(InputStream in)
        throws IOException {
    BufferedReader br = new BufferedReader(new InputStreamReader(in));
    StringBuilder sb = new StringBuilder();
    String line = null;
    while ((line = br.readLine()) != null) {
        sb.append(line);
    }
    return (sb.toString());
} 
```

* * *

这是`AsyncTask`发送请求的类的代码：

```
class ServerRequest extends AsyncTask<JSONObject, Void, JSONObject> {

    @Override
    protected JSONObject doInBackground(JSONObject... params) {
        JSONObject req = params[0];
        JSONObject response = Server.sendRequest(req);
        return response;
    }

    @Override
    protected void onPostExecute(JSONObject result) {
        // HANDLE RESULT
        super.onPostExecute(result);
    }
} 
```

* * *

当服务器没有返回响应时，我的问题就开始了。`AsyncTask`即使工作完成后线程仍保持打开状态，因为它从不`HTTPClient`关闭连接。

有没有办法不等待回复？这肯定会给服务器增加很多开销，因为所有尝试连接到它的 Android 应用程序都会保持连接处于活动状态，并且可能会导致应用程序本身出现许多问题。

基本上，我正在寻找一种方法，它允许我在发送`POST`请求后立即发送消息并终止连接，因为我没有任何响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T06:06:38.003

只是，`ConnectionTimeOut`使用 HttpClient 对象设置，（代码供您理解，在您的情况下可能会有所不同）

```
int TIMEOUT_MILLISEC = 30000;  
HttpParams httpParams = new BasicHttpParams();
HttpConnectionParams.setConnectionTimeout(httpParams, TIMEOUT_MILLISEC);
HttpConnectionParams.setSoTimeout(httpParams, TIMEOUT_MILLISEC);
HttpClient httpclient = new DefaultHttpClient(httpParams);
HttpPost httppost = new HttpPost(url);
httppost.addHeader("Content-Type", "application/json"); 
```

现在，它将在您定义的**TimeoOut之后终止连接。**但请确保这会抛出`TimeOutException`，因此您必须在**HttpRequest**中处理此异常..（使用 Try -catch）

**编辑：**或者你可以使用**HttpRequestExecutor**类。

来自包[org.apache.http.protocol](http://developer.android.com/reference/org/apache/http/protocol/package-summary.html)的类[HttpRequestExecutor](http://developer.android.com/reference/org/apache/http/protocol/HttpRequestExecutor.html#canResponseHaveBody%28org.apache.http.HttpRequest,%20org.apache.http.HttpResponse%29)

```
protected boolean canResponseHaveBody (HttpRequest request, HttpResponse response) 
```

确定响应是否带有实体。此类中的实现基于 RFC 2616。未知方法和响应代码应该指示与实体的响应。派生的执行器可以覆盖此方法来处理 RFC 2616 中未指定的方法和响应代码。

# html - HTML5 - 从哪里开始的建议

> ID：11132336
> 
> 赞同：1
> 
> 时间：2012-06-21T05:58:25.833
> 
> 标签：html, sencha-touch, extjs

我想研究使用 HTML5 开发移动应用程序。我对它很陌生，对 HTML5 没有任何想法。我想就从哪里获得初学者的基本教程以及最好使用的 IDE 提出一些建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T06:25:19.527

如果您是 HTML5 新手，那么我会推荐[**Headfirst HTML5**](https://rads.stackoverflow.com/amzn/click/com/1449390544)，这是一本非常全面的书，其中对每个 JavaScript API（地理定位、音频、视频、网络工作者、画布等）都进行了很好的解释。

如果您想对语言进行简单的概述，请参阅 Google 的 Open Web Advocacy 的 HTML5 介绍视频，http: [//youtu.be/siOHh0uzcuY](http://youtu.be/siOHh0uzcuY)。它过时了，尽管您可以感受到 HTML5。

**并且不要忘记 Divya Manian 在**HTML5Please**[**上的出色工作**](http://html5please.com/)**

 ****编辑：**对于 IDE，我会推荐重量很轻的[SublimeText2 。](http://www.sublimetext.com/blog/articles/sublime-text-2-beta)

您还可以看到 Big IDE，例如 Microsoft Expression Web、Dreamweaver 或 Komodo Edit、Aptana Studio

**更新：** **Sencha Touch**是轻量级的，不像它的姊妹项目（jQTouch）那样依赖于 jQuery。Sencha Touch 是一个框架，提供了许多前者无法开发的功能（即 API）。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T06:15:18.843

如果您仍在学习 HTML5 基础知识，那么[HTML5 Doctor](http://html5doctor.com/)是一个很好的参考。它告诉您标签的所有语义含义以及正确使用它。

接下来，查看来自[sitepoint](http://www.sitepoint.com/a-basic-html5-template/)的快速入门教程，它将帮助您入门。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T06:30:28.213

看看[http://www.html5rocks.com/en/](http://www.html5rocks.com/en/)也..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T06:03:57.667

一个非常好的开始方法是先学习基本的 HTML（如果你还不知道的话），然后是 HTML5。[W3Schools](http://www.w3schools.com/html5/default.asp)是学习这两者的好网站。在那里，您至少可以学习 HTML5 的基础知识。**

# sql-server - 用其他表替换表

> ID：11132338
> 
> 赞同：0
> 
> 时间：2012-06-21T05:58:33.020
> 
> 标签：sql-server, sql-server-2008-r2, backup, overwrite

我们有这个当前数据库，我们需要用备份数据库中的另一个表替换一些表。我们正在使用 sql server 2008 r2，我想知道如何用具有相同结构的新表覆盖或替换当前表。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T06:22:10.417

**步骤1：**

```
Restore the backup to the same server with a different name. 
```

假设您的实际数据库是“MYDB”，您可以恢复备份并将“MYBD_BKUP”命名为类似的名称。

```
You can restore database using SQL server management studio

Right click on Databases>Restore Database 
```

**第2步**：`Once restore is success full, you can delete all the tables (to be deleted) from MYDB`

**第三步：**

```
transfer table from MYDB_BKUP

USE MYDB

select * into <table1> from MYDB_BKUP.dbo.<table1>

etc.. for each table 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T06:12:41.890

```
 IF (EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE 
    TABLE_SCHEMA = 'MySchema' AND  TABLE_NAME = 'MyTable'))
    BEGIN
        DROP TABLE MyTable;
    END 
```

对于要替换的每个表，将此查询放在备份数据库脚本中。喜欢..

```
IF (EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE 
TABLE_SCHEMA = 'YourSchemaName' AND  TABLE_NAME = 'table_staff'))
BEGIN
    DROP TABLE table_staff;
END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T07:08:06.153

如果你想用备份数据库替换整个数据库，那么......

1.  右键单击要替换的数据库
2.  前往任务
3.  去恢复...
4.  从文件单选按钮检查
5.  选择备份文件
6.  现在您的 .bak 文件将显示在下部区域并通过单击复选框检查此文件
7.  在弹出窗口中选择左侧的选项
8.  检查复选框..覆盖现有
9.  点击确定

这将用备份数据库替换您当前的数据库

# c# - URL 重定向 + VSTO

> ID：11132340
> 
> 赞同：1
> 
> 时间：2012-06-21T05:58:36.773
> 
> 标签：c#, .net, vsto

我正在为 Outlook 2010 创建一个加载项。单击按钮后，电子邮件和主题将保存到数据库中（这很好），并且还会重定向到 URL。你能告诉我如何为 VSTO 做 URL 重定向吗？不确定这是否可能。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T16:07:57.120

您可以使用`Process.Start()`在用户的默认 Web 浏览器中打开 URL，如下所示：

`Process.Start("explorer.exe", @"http://www.google.com");`

或更简单地说（如您所见）：

`Process.Start(@"http://www.google.com");`

需要明确的是，您不是在*重定向*，只是在新窗口中浏览到 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T07:43:41.127

如果它是您使用的 Outlook 表单区域，则可以使用 SHDocVw.WebBrowser 的 Navigate2

我不确定您是否想在默认网络浏览器中打开一个新网址。

# javascript - 不假设 Javascript 知识的 Coffeescript 教程

> ID：11132345
> 
> 赞同：11
> 
> 时间：2012-06-21T05:59:26.833
> 
> 标签：javascript, coffeescript

我知道我来错地方了。你应该先学习 Javascript，然后当你厌倦了大括号和变量声明时开始研究 Coffeescript。然而，我是一位经验丰富的 Ruby 和 Python 程序员，但 Javascript 流利度为零，希望进入 Web 脚本（主要通过 Rails）。

我确信 Coffeescript 是适合我的方式，但我很难找到一个不假定对 Javascript 非常熟悉的教程。我看到的大多数教程都详细解释了 Coffeescript 的特性，只是为了掩盖诸如如何实际编写 Web 应用程序这样的小话题。

那么，您是否知道任何针对不了解 JS 的人的 Coffeescript 教程？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-21T06:12:05.973

我建议免费的在线[Smooth Coffeescript](http://autotelicum.github.com/Smooth-CoffeeScript/interactive/interactive-coffeescript.html)书（基于Eloquent [Javascript](http://eloquentjavascript.net/)）。

> 不需要以前的编程知识。CoffeeScript 让您可以简单而优雅地编写面向 Web 的应用程序。它与 JavaScript 密切相关，但没有其古怪的角落。
> 
> Smooth CoffeeScript 是一本关于 CoffeeScript 和编程的书。从编程基础开始，学习使用 Underscore 和解决问题的函数式编程，学习面向对象和模块化。它涵盖了带有 Canvas 和 WebSockets 的客户端/服务器 Web 应用程序。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-21T06:13:29.140

你可能不想听到这个，但我还是要说：*你还是应该先学习 JavaScript。*

JavaScript 与其他语言有点不同，因为它垄断了浏览器脚本。目前**没有**其他语言可以在浏览器中使用（除非它使用插件，或者解释器是 JavaScript！）。因此，对于任何需要执行任意数量的客户端脚本的项目，JavaScript 知识是必须的。

你可能在想“嘿，我知道 Python 和 Ruby，而且我从来不需要学习 C 或汇编！”，这当然是真的。但是，这些语言从来没有垄断过他们的领域。在许多情况下，Python 可以用于与 C 相同的事情。该平台不关心你使用什么语言，只要它支持它。

并且浏览器平台只支持 JavaScript。

CoffeScript 是 JavaScript 的抽象。尽管 CoffeeScript 被编译成 JavaScript，但是当你试图找出那个晦涩的 JavaScript 错误，或者调试一个生成的函数，或者想知道为什么有两个级别的未命名函数嵌套时，你会想知道到底发生了什么上。

现在，我并不是说你必须成为 JavaScript Ninja（尽管我会推荐它），但我*要说*的是你应该首先掌握*实际的 Web 语言*。

学习 JavaScript，学习它的概念（在我看来，这是一种*非常*迷人的语言，一旦你克服了一些缺陷），然后使用 CoffeeScript 抽象出技术细节。

不过，既然您确实要求提供教程，这里有一些： 首先，[Mozilla 的 JavaScript 指南](https://developer.mozilla.org/en/JavaScript/Guide)非常好。如果您想要一些更高级的主题，还有[一个由 John Resig 制作的交互式教程](http://ejohn.org/apps/learn/)。最后，这里[有一堆](http://renaissancenerd.net/post/5454665475/coffeescript-tutorial-round-up)你可能已经知道的 CoffeeScript 教程。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-22T02:04:21.793

我有 Python、ActionScript 和 Java 方面的背景。我开始直接学习 CoffeeScript，无意学习 JavaScript。在此过程中我学习了一堆 JavaScript，但我认为直接开始学习 CoffeeScript 是完全可以的。

我第一次被 Smooth CoffeeScript 吸引是因为它声称是针对那些试图直接学习 CoffeeScript 的人。然而，写作风格不是我喜欢的。YMMV。

此外，以我的 Python 背景，我发现我不需要太多的语法帮助。[我直接从他的CoffeeScript 网页](http://coffeescript.org/)获得了我需要的所有语法帮助。我主要需要平台方面的帮助（蛋糕、开发环境、测试等），这在 CoffeeScript 网页上得到了很好的介绍，我还需要从其他几本书中得到什么。我最喜欢的教学书是[The Little Book on CoffeeScript](http://arcturo.github.com/library/coffeescript/)（用一个小时读完），我最喜欢的参考书是[Trevor Burnham](https://github.com/TrevorBurnham)的[关于 CoffeeScript 的实用书架书，](http://pragprog.com/book/tbcoffee/coffeescript)它从 CoffeeScript 的角度教会了我 jQuery。

帮助我快速提升的另一件事是在 CoffeeScript 中分叉/升级了一些我自己的工具。我在 github 上 fork CoffeeDoc 存储库以创建我自己的版本，最终我重新编写它以创建[CoffeeDocTest](https://github.com/lmaccherone/coffeedoctest)，它类似于 Python 的 DocTest，除了 CoffeeScript。我对 CoffeeScript 的 Coda 语法模式的升级通过 github 的 pull-request 机制被接受回 master 分支……在代码审查和一些清理之后。查看别人的代码确实可以帮助您学习习语。从知情人士那里获得代码审查会更有帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T07:10:29.867

你的问题对我来说没有多大意义，因为 CoffeeScript*是*JavaScript。认识一个就是认识另一个。如果我建议学习 CoffeeScript 的最佳方法是打开一本 JavaScript 书籍，但这些语言是相同的，这听起来可能违反直觉。

我知道它们看起来不同，但差异在句法层结束[1]。在 CoffeeScript 中添加一些分号、花括号和括号，你就差不多了。所以去学习 JavaScript，你会发现你也在学习 CoffeeScript。

您还可以学习 CoffeeScript 并顺便学习 JavaScript。不过这可能有点困难，因为在实现源映射之前，只能在 JavaScript 中进行调试（我向你保证，你会进行很多调试；-)）。

[1]：除了可能稍微复杂的类定义。

# asp.net-mvc-3 - asp.net mvc 中基于时间的身份验证和操作

> ID：11132346
> 
> 赞同：0
> 
> 时间：2012-06-21T05:59:30.783
> 
> 标签：asp.net-mvc-3, forms-authentication

asp.net mvc 3 中是否有一种集成方式来允许基于一天中的时间进行身份验证和操作？例如，如果是 18:00 点，属于特定角色的用户不允许登录，或者如果他们已经通过身份验证，他们将被自动注销或无法执行任何操作。

我想在登录方法中我可以检查用户角色和时间，然后在每个操作中，我还会检查角色和时间并允许，但是有没有更简单的方法来完成这个？

更新：我想没有更简单的方法来设置时间和用户/角色，所以我最终实现了答案（解决方案）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T06:23:52.190

您可以编写自定义`Authorize`属性并覆盖`AuthorizeCore`执行必要检查的方法：

```
public class MyAuthorizeAttribute : AuthorizeAttribute
{
    protected override bool AuthorizeCore(HttpContextBase httpContext)
    {
        var authorized = base.AuthorizeCore(httpContext);
        if (!authorized)
        {
            return false;
        }

        // At this stage standard authorization passed =>
        // you could now check the user roles in the database
        // and the time of the day and return true or false from here

        ...
    }
} 
```

现在剩下的就是用这个自定义属性装饰你的控制器/动作。

# css - 如何仅在左侧和右侧从 div 中制作阴影渐变？

> ID：11132347
> 
> 赞同：0
> 
> 时间：2012-06-21T05:59:32.527
> 
> 标签：css, gradient, shadow

我想用代码 css3 或其他东西替换[演示图像。](http://www.centerwow.com/stackoverflow/shadow1.jpg)

我有一个蓝色的图像我有一个白色的背景，

在图像和白色背景的一侧，

在左右两侧我有一个渐变阴影。

我可以只在使用 css3 的侧面做这个阴影，或者没有图片吗？

我尝试在这里做[jsfiddle Demo](http://jsfiddle.net/centerwow/jJCwL/3/)

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T07:32:23.563

你想要这样的东西吗？
[http://jsfiddle.net/jJCwL/4/](http://jsfiddle.net/jJCwL/4/)

如果你只想要左右两边的阴影：http:
[//jsfiddle.net/jJCwL/5/](http://jsfiddle.net/jJCwL/5/)

# android - 如何在android中的xml中设置搜索栏拇指的大小

> ID：11132350
> 
> 赞同：1
> 
> 时间：2012-06-21T05:59:44.650
> 
> 标签：android

谁能告诉我如何在搜索栏中设置拇指的大小（高度、宽度）。我用谷歌搜索，发现这只能通过代码来完成。但我希望它只在 xml 中设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T07:18:17.053

我有一个完全符合您需要的解决方法，您只需使用图像并将其放在您的 xml 中，`android:thumb="@drawable/seekbar_thumb_slider"` 您可以根据您的选择使用此拇指。它不能准确回答您的问题，但您可以将其作为一种解决方法，更薄的可绘制对象会减小 Thumb 的大小。

# android - android phonegap 设计问题

> ID：11132353
> 
> 赞同：1
> 
> 时间：2012-06-21T05:59:56.730
> 
> 标签：android, html, css, cordova

我的应用程序是使用 html 页面和 css 的 android phonegap 应用程序。但是我的应用程序设计在不同的模拟器中有所不同。我需要为所有移动设备获得相同的 UI 设计。

**笔记**

**我没用过jquery mobile**

这是我的代码

```
<!DOCTYPE HTML>
    <html>
      <head>
        <meta name="viewport" content="width=320; user-scalable=no" />
        <meta http-equiv="Content-type" content="text/html; charset=utf-8">
        <title>PhoneGap</title>
        <script src="../Scripts/jquery-1.4.1-vsdoc.js" type="text/javascript"></script>

        <link rel="stylesheet" href="../js/master.css" type="text/css" media="screen" title="no title" charset="utf-8">
        <script type="text/javascript">
        </script>
        <style type="text/css">
        label.custom-select 
        {
        position: relative;
        }
        .custom-select select 
        {
            display: inline-block;
            border: 2px solid #03498A;
            padding: 2px 3px 3px 50px;
            margin: 0;
            outline:none; /* remove focus ring from Webkit */
            line-height: 1.2;
            background: #03498A;
            color: #FFFFFF;
            font-size:15pt;font:bold;
            width:80%;
            height:7%;
            -webkit-appearance:none; /* remove the strong OSX influence from Webkit */
            -webkit-border-radius: 6px;
            -moz-border-radius: 6px;
            border-radius: 2px;
        }

        /* for Webkit's CSS-only solution */
        @media screen and (-webkit-min-device-pixel-ratio:0) 
        {
            .custom-select select 
            {
                padding-right:30px;    
            }
        }

        /* Since we removed the default focus styles, we have to add our own */
        .custom-select select:focus 
        {
            -webkit-box-shadow: 0 0 3px 1px #c00;
            -moz-box-shadow: 0 0 3px 1px #c00;
            box-shadow: 0 0 3px 1px #c00;
        }

        /* Select arrow styling */
        .custom-select:after 
        {
            content: "â–¼";
            position: absolute;
            top: 2%;
            right: 0;
            bottom: 0;
            font-size: 60%;
            line-height: 30px;
            padding: 0 7px;
            background-image: url(../images/dd.PNG);
            background-repeat:no-repeat;
            padding-left:80%;
            color: #03498A;
            pointer-events:none;
            -webkit-border-radius: 0 6px 6px 0;
            -moz-border-radius: 0 6px 6px 0;
            border-radius: 0 6px 6px 0;
        }

        .no-pointer-events .custom-select:after 
        {
            content: none;
        }
        .dropdown
        {
            border-top-left-radius: 5px;
            border-top-right-radius: 5px;
            background-color: #03498A;
            border: 1px solid;
            color: #FFFFFF;
            width:260px;font-size:20pt;font:bold;
        }
        #setting
        {
            margin-left:10%;
            margin_right:5%;
        }
        #checknotify
        {
            margin-left:50%;
        }
        #checkphone
        {
            margin-left:38%;
        }
        #checklocation
        {
            margin-left:51%;
        }
        #allcauses
        {
            margin-left:2%;
        }
        #link
        {
            margin-left:20%;
        }
        #managelabel
        {
            margin-left:6%;
        }

        .checkBox
        {
            background-position: 0px 0px;
        }
        .checkBoxClear
        {
            background-position: -32px 0px;
        }
        .checkBox, .checkBoxClear
        {
            background-image: url('../images/Check.png');
            background-repeat: no-repeat;
            display: inline-block;
            float: left;
            width: 32px;
            height: 32px;
            padding: 0px;
            margin: 0px;
            cursor: hand;
        }
        .checkBox1
        {
            background-position: 0px 0px;
        }
        .checkBoxClear1
        {
            background-position: -32px 0px;
        }
        .checkBox1, .checkBoxClear1
        {
            background-image: url('../images/Check.png');
            background-repeat: no-repeat;
            display: inline-block;
            float: left;
            width: 32px;
            height: 32px;
            padding: 0px;
            margin: 0px;
            cursor: hand;
        }
        .checkBox2
        {
            background-position: 0px 0px;
        }
        .checkBoxClear2
        {
            background-position: -32px 0px;
        }

        .checkBox2, .checkBoxClear2
        {
            background-image: url('../images/Check.png');
            background-repeat: no-repeat;
            display: inline-block;
            float: left;
            width: 32px;
            height: 32px;
            padding: 0px;
            margin: 0px;
            cursor: hand;
        }
            .checkBox3
        {
            background-position: 0px 0px;
        }
        .checkBoxClear3
        {
            background-position: -32px 0px;
        }

        .checkBox3, .checkBoxClear3
        {
            background-image: url('../images/Check.png');
            background-repeat: no-repeat;
            display: inline-block;
            float: left;
            width: 32px;
            height: 32px;
            padding: 0px;
            margin: 0px;
            cursor: hand;
        }
        </style>
      </head>
      <body >
        <div>
            <div><input type="image" style="width:100%" src="../images/set.png" />
            </div>
            <div align="center" style="margin-top:2%"><input type="image" src="../images/load.png" style="width:90%" />
                <input type="image" src="../images/image.png" style="width:90%"/>
                <div style="margin-top:5%">
                    <label id="managelabel" style="width:70%;font-size:12pt">Manage Cause Settings</label>
                    <a id="link" href="javascript:help()">Help ?</a>
                </div>
            </div>
            <div id="loadingScreen" align="center"></div>
            <div align="center" style="margin-top:5%"><label class="custom-select"><select name="mydropdown" style="width:90%;height:10%;font-size:15pt" >
                <option id="0" value="opt">option</option>
                </select></label>
            </div>
            <div style="margin-top:3%;padding:5%">
                <table>
                    <tr width="100%">
                        <td width="90%"><label>One</label></td>
                        <td><div id="Div1" class="checkBox">&nbsp;</div></td>
                        <label for="Div1"></label>
                        <td><input value='' type='checkbox' style="display:none"  /></td>
                    </tr> 
                    <tr width="100%">
                        <td ><label>Two</label></td>
                        <td><div id="Div2" class="checkBox1">&nbsp;</div></td>
                        <label for="Div2"></label>
                        <td><input value='' type='checkbox' style="display:none" /></td>
                    </tr>
                    <tr width="100%">
                        <td ><label>Three</label></td>
                        <td><div id="Div3" class="checkBox2">&nbsp;</div></td>
                        <label for="Div3"></label>
                        <td><input value='' type='checkbox' style="display:none" /></td>
                    </tr> 
                </table>
            </div>
            <br/>
            <div>
                <table>
                    <tr width="100%">
                        <td><div id="Div4" class="checkBox3">&nbsp;</div></td>
                        <label for="Div4"></label>
                        <td><label style="width:60%;font-size:12pt">Here settings</label></td>
                        <td><input value='' type='checkbox' style="display:none" id='chkAllCauses'/></td>
                    </tr>
                </table>
            </div>
        </div>
        <div style="margin-top:32%">
            <div style="border-width:3px;padding-top:2%;padding-bottom:2%;padding-right:0px;padding-left:0px;background-color:#00458D;bottom:0;" align="center">
                <table width=100%>
                <input type="image" src="../images/first.PNG" style="width:23%" />
                <input type="image" src="../images/second.jpg" style="width:23%" />
                <input type="image" src="../images/third.jpg" style="width:23%" />
                <input type="image" src="../images/fourth.png" style="width:23%"/>
                </table>
            </div>
        </div>
    </div>
    </body>
    </html> 
```

* * *

我附上了两张截图，我在不同的两个模拟器中运行现在你可以简单地分析问题。

![图片来自 Galaxy Tab][1]

* * *

来自settingFromAndroid2.2的图片底部设计消失了，当我向下滚动时，只有我可以看到这个。

![Android2.2][2]

* * *

**要清除这些问题，我正在尝试使用页脚**

假设我的设计中有文本框，

```
<input type="text"  style="width: 80%;height: 35px;font-size:15pt;border:4px solid orange" placeholder="Email Address (User ID)" /> 
```

我无法在文本框中输入文本，我的设计在输入时折叠，这里我附上了屏幕截图和 html 文件。请查看。![带页脚][3]

如何解决我的问题？

**UpDate** 在我上面的代码中，我只为页脚添加了这一行

```
 <input type="text"  style="width: 80%;height: 35px;font-size:15pt;border:4px solid orange" placeholder="Email Address (User ID)" />
      <div data-role="footer" class="ui-bar"  style="height:2px;bottom:0%;padding-bottom:0%;">

    <table width=100%>
            <input type="image" src="../images/Home.PNG" style="width:23%" onClick="home()"/>
            <input type="image" src="../images/messages-menu.jpg" style="width:23%" onClick="inbox()"/>
            <input type="image" src="../images/settings-menu.jpg" style="width:23%" onClick="settings()"/>
            <input type="image" src="../images/close-menu.png" style="width:23%" onClick="callServiceFunction()"/>
            </table>
    </div>
      </div>

    </div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T05:16:06.800

我有一个类似的问题，但我的显示一个菜单选项。我认为css位置在文本软键盘加载时被破坏。

```
$('#menuFooter').css('position', 'fixed');
$('#menuFooter').toggle(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T06:33:22.923

通常带有 jquery mobile 的 phonegap 会产生这类问题。在某些设备中会发生页脚跳转。通过以下代码在固定位置制作页脚，

```
<div data-role="footer" data-position="fixed">
    <h1>Fixed Footer!</h1>
</div> 
```

## 或者

你可以做一些css样式更改来制作一个固定的页脚

```
[data-role=page]{height: 100% !important; position:relative !important;}
[data-role=footer]{bottom:0; position:absolute !important; top: auto !important; width:100%;} 
```

## 或者

您可以将 iscroll jquery 移动插件用于带有列表项的固定页脚。看这个[演示](http://yappo.github.com/projects/jquery.mobile.iscroll/livedemo.html)

# jquery - 在 JQuery Mobile 中，选择对话框未居中并按页面宽度切割

> ID：11132354
> 
> 赞同：0
> 
> 时间：2012-06-21T05:59:59.467
> 
> 标签：jquery, select, mobile, dialog

我有一个 JQuery 移动页面。它在顶部并排有两个选择元素。

在 iphone 等小而窄的屏幕上打开页面并单击选择时，对话框显示在侧面过多（未居中）并且文本被截断。

[这里的例子。](https://picasaweb.google.com/102463851712712911502/June202012?authuser=0&feat=directlink)

jQuery 页面代码是：

```
<body>
<div data-role="page" id="page">
  <div data-role="content">
    <div id="selectview" style="width:50%; float:left">
      <label for="select-view1" style="font-size:12px" >First</label>
      <select name="select-view1" class="select-view" id="select-view1" >
        <option value="aaa">AAAAAAAAA</option>
        <option value="bbb">BBBBBBBB</option>
        <option value="ccc">CCCCCCCCC</option>
      </select>
    </div>
    <div id="select-function-div" style="width:50%; float:left">
      <label for="select-view2" style="font-size:12px" >Second</label>
      <select name="select-view2" id="select-view2"  >
        <option value="ddd">DDDDDDDDDDDDD</option>
        <option value="eee">EE</option>
        <option value="mafffin">FFFFFFFFFFFF</option>
      </select>
    </div>
  </div>
</div>
</body> 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T06:47:00.373

`float:left`像这样从样式标签中删除

```
<div id="selectview" style="width:50%;">
      <label for="select-view1" style="font-size:12px" >First</label>
      <select name="select-view1" class="select-view" id="select-view1" >
        <option value="aaa">AAAAAAAAA</option>
        <option value="bbb">BBBBBBBB</option>
        <option value="ccc">CCCCCCCCC</option>
      </select>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-28T17:49:50.850

您的样式元素后缺少分号，这可能会导致一些显示问题，请尝试： style="width:50%; float:left;" 反而

# regex - LINQ 表达式正文 ToString

> ID：11132355
> 
> 赞同：1
> 
> 时间：2012-06-21T06:00:01.690
> 
> 标签：regex, string, linq, lambda

我想知道是否有人可以向我解释检索的缺点

```
(Expression<Func<T, bool>>) Expression.Body 
```

在运行时并将其作为字符串操作？

例如给出以下

```
public partial class Tests : Form
{
    public Tests()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        TestClass t = new TestClass();
        textBox1.Text = t.Evaluate(templates => templates.usable == true && templates.name == "tc1");
    }       
}

public class TestClass
{
    public string name { get; set; }
    public bool usable { get; set; }
}

public static class Helpers
{
    public static string Evaluate<T>(this T input,Expression<Func<T, bool>> Expression) where T : class
    {

        return Expression.Parameters.Single().Name + " " + Expression.Body;

    }
} 
```

返回

```
templates ((templates.usable == True) AndAlso (templates.name == "tc1")) 
```

**我想知道检索这个然后通过正则表达式解析它可能会出现什么样的性能问题**

回答为什么？我一直在玩 Dapper，但没有一个预先存在的扩展（我见过）吸引我

例如，我希望能够以与 EF 类似的方式对其进行操作

```
_repo.Select(templates=>templates.usable== true && templates.id == templateId); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T10:30:46.237

感谢您推动使用实际表达式而不是解析文本。对于任何感兴趣的人，我已经发布了指向我的 sqlexpression 项目初稿的链接。[谷歌代码 - SqlExpression.cs](http://code.google.com/p/sqlexpressions/source/browse/trunk/sqlexpression.cs)

创建的参数是来自 Dapper 的 DynamicParameters，但可以轻松交换为标准 sql 参数

还没有做很多测试，但查询在这个阶段似乎表现得相当好

# mysql - varchar(20) 和 varchar(50) 是一样的吗？

> ID：11132357
> 
> 赞同：10
> 
> 时间：2012-06-21T06:00:13.023
> 
> 标签：mysql, varchar

我看到评论“如果您在 varchar(20) 列中有 10 到 15 个字符之间的 5000 万个值，并且在 varchar(50) 列中有相同的 5000 万个值，它们将占用完全相同的空间。这就是重点varchar，而不是 char。”。谁能告诉我原因？请参阅[人员“姓名”字段的合理长度限制是多少？](https://stackoverflow.com/questions/30485/what-is-a-reasonable-length-limit-on-person-name-fields#comment-3373890)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-21T07:41:53.780

MySQL 提供了多种存储引擎选择。数据的物理存储取决于存储引擎。

**VARCHAR 的 MyISAM 存储**

在 MyISAM 中，`VARCHAR`s 通常只占用字符串的实际长度加上一两个字节的长度。这是因为 MyISAM 的设计限制为表锁定而不是行锁定功能。性能后果包括更紧凑的缓存配置文件，但也更复杂（更慢）的记录偏移计算。

（事实上​​，MyISAM 为您在固定物理行大小和可变物理行大小表格式之间提供[了一定程度的选择](http://dev.mysql.com/doc/refman/5.1/en/static-format.html)，具体取决于整个表中出现的列类型。发生的`VARCHAR`更改仅默认方法，但`TEXT`blob的存在*迫使* `VARCHAR`s同一个表也可以使用可变长度方法。）

物理存储方法对于索引尤其重要，这与表不同。MyISAM 对和列*都* 使用空间压缩，这意味着在这两种情况下，较短的数据在索引中占用的空间较少。`CHAR``VARCHAR`

**VARCHAR 的 InnoDB 存储**

InnoDB 与大多数其他当前关系数据库一样，使用更复杂的机制。 `VARCHAR`最大宽度小于 768 字节的列将被内联存储，保留的空间与该最大宽度匹配。更准确地说[：](http://dev.mysql.com/doc/refman/5.1/en/innodb-physical-record.html)

> 对于每个非 NULL 可变长度字段，记录头包含一个或两个字节的列长度。仅当列的一部分存储在溢出页的外部或最大长度超过 255 字节且实际长度超过 127 字节时才需要两个字节。对于外部存储的列，两字节长度表示内部存储部分的长度加上指向外部存储部分的 20 字节指针。内部部分为768字节，所以长度为768+20。20 字节指针存储列的真实长度。

InnoDB 目前不在其索引中进行空间压缩，与上述 MyISAM 正好相反。

**回到问题**

然而，以上所有只是一个实现细节，甚至可能在版本之间发生变化。`CHAR`和之间的真正区别`VARCHAR`是语义上的，而 和之间的区别`VARCHAR(20)`也是如此`VARCHAR(50)`。通过确保无法在 a 中存储 30 个字符的字符串`VARCHAR(20)`，该数据库使各种处理器和应用程序的生活变得更轻松，更好地定义了它应该集成到可预测行为解决方案中的各种处理器和应用程序。这是大问题。

具体到个人姓名，[这个问题](https://stackoverflow.com/questions/30485/what-is-a-reasonable-length-limit-on-person-name-fields)可能会给你一些实用的指导。无论如何，全名超过 70 个 UTF-8 字符的人都会遇到麻烦。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-21T06:03:03.967

是的，这确实是 VARCHAR 的重点。它只占用与文本长度一样多的空间。

如果你有 CHAR(50)，无论数据有多短（它会被填充，通常是空格），它都会占用 50 个字节（或字符）。

> 谁能告诉我原因？

因为人们认为存储大量无用的填充很浪费，所以他们发明了 VARCHAR。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T07:21:38.593

[手册](http://dev.mysql.com/doc/refman/5.5/en/char.html)指出：

> CHAR 和 VARCHAR 类型的声明长度表示要存储的最大字符数。(...)
> 
> 与 CHAR 相比，VARCHAR 值存储为一个字节或两个字节长度的前缀加上数据。长度前缀表示值中的字节数。如果值需要不超过 255 个字节，则一列使用一个长度字节，如果值可能需要超过 255 个字节，则使用两个长度字节。

请注意，VARCHAR(255)*与*VARCHAR(256) 不同。

这是理论。正如 habeebperwad 建议的那样，*一行*的实际占用空间取决于（引擎）页面大小和（硬盘）块大小。

# c# - 如何在一个应用程序中使用同名 dll

> ID：11132358
> 
> 赞同：0
> 
> 时间：2012-06-21T06:00:14.387
> 
> 标签：c#, windows, dll, gac, autocad

为了构建 Autocad 应用程序，我使用 C# 4.0。

我的应用程序有两个模块，一个用于 2005，另一个用于 2010 **autocad**。它使用 autocad 的特殊**dll**，但完成起来有些困难。由于 dll 具有相同的名称，所以对于 2005 年和 2010 年的 autocad 都应该是通用的，因此应用程序不可能有不同的 autocad 版本。它为 autocad interop dll 在reference.help 我为不同的模块使用不同的 dll。

1.  应用有两个模块(2005,2010)
2.  特殊dll
3.  2005 和 2010 dll 具有相同的名称。
4.  应用程序无法区分dll
5.  帮助我在一个应用程序中使用不同的同名 dll。

**注意：在单个项目中，它们可以完美运行。**

需要帮助才能在一个应用程序中使用同名 dll。

如果有任何疑问，请询问，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T15:54:53.953

我有一个类似的应用程序，它适用于 2006 年到 2013 年的 autocad（x86 和 x64）和 bricscad v12-v13。

为了解决这个问题，我为每个架构做了一个 Visual Studio 项目，每个项目都引用不同的 .dll，具体取决于 AutoCAD 版本。特别是这些项目中的每一个`AcDbMgd.dll, AcMgd.dll, Autodesk.AutoCAD.Interop and Autodesk.AutoCAD.Interop.Common`，这些 dll 都特定于每个 AutoCAD 体系结构。

您必须注意，所有引用的 dll 都在复制本地 FALSE 中！

在我的情况下，所有项目都在不同的文件夹中编译，但如果您为每个项目分配不同的程序集名称，则不是必须的。

由于 AutoCAD API 从 2006 年到 2012 年是相同的（2013 年有一些差异），源代码与那些项目分开，每个项目都包含它作为链接源文件（转到解决方案资源管理器中的项目 ->右键单击-> 添加现有项目-> 选择源文件并按“添加为链接”）。这样，所有项目的源代码都相同，但它们的编译包含不同的 autocad dll。

就我而言，也有一些麻烦，因为 BricsCAD 有时与 AutoCAD 有不同的 API。为了解决这几种情况，我设置了一个条件编译符号并像这样使用它：

```
#if BricsCad
                CADAPI.ApplicationServices.Application.SystemVariableChanged += new CADAPI.ApplicationServices.SystemVariableChangedEventHandler(Application_SystemVariableChanged);
#else
                CADDB.LayoutManager.Current.LayoutSwitched += new CADDB.LayoutEventHandler(Current_LayoutSwitched);
#endif 
```

如果您需要更多信息，请告诉我。顺便说一句，我认为您的主要问题是 autocad Dlls 的副本 local = true。

# iphone - 应用内购买无法在 iPhone 上运行？

> ID：11132361
> 
> 赞同：1
> 
> 时间：2012-06-21T06:00:19.727
> 
> 标签：iphone, ios, in-app-purchase

这是代码：

```
-(IBAction)purchase5010:(id)sender{

    productUserRequests = 0;
    SKPayment *payment = [SKPayment paymentWithProductIdentifier:@"com.mobice.wtm.5010"];
    [[SKPaymentQueue defaultQueue] addTransactionObserver:self];
    [[SKPaymentQueue defaultQueue] addPayment:payment];

}

-(void)productsRequest:(SKProductsRequest *)request didReceiveResponse:(SKProductsResponse *)response {
    SKProduct *validProduct = nil;
    int count = [response.products count];
    if (count > 0) {
    validProduct = [response.products objectAtIndex:productUserRequests];
    }else if(!validProduct){
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" message:@"No products available at this time." 
                                                   delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [alert show];
    [alert release];
    [self dismissModalViewControllerAnimated:YES];
    }
}

-(void)productsRequest:(SKProductsRequest *)request didReceiveResponse:(SKProductsResponse *)response{
    SKProduct *validProduct = nil;
    int count = [response.products count];
    if (count > 0) {
    validProduct = [response.products objectAtIndex:productUserRequests];
    }else if(!validProduct){
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" message:@"No products available at this time." 
                                                   delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [alert show];
    [alert release];
    [self dismissModalViewControllerAnimated:YES];
    }
}
-(void)paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions{
    for (SKPaymentTransaction *transaction in transactions) {
    switch (transaction.transactionState) {
        case SKPaymentTransactionStatePurchasing:

            break;
        case SKPaymentTransactionStatePurchased:
            if (productUserRequests == 0) {
                NSString *hints = [[NSString alloc]initWithContentsOfFile:[self pathOfFile:@"Hints"]];
                int hintValue = [hints intValue];
                hintValue+=50;
                [hints release];
                hints = [[NSString alloc]initWithFormat:@"%i", hintValue];
                [hints writeToFile:[self pathOfFile:@"Hints"] atomically:YES];

                NSString *reveals = [[NSString alloc]initWithContentsOfFile:[self pathOfFile:@"Reveals"]];
                int revealValue = [reveals intValue];
                revealValue+=50;
                [reveals release];
                reveals = [[NSString alloc]initWithFormat:@"%i", revealValue];
                [reveals writeToFile:[self pathOfFile:@"Reveals"] atomically:YES];

            }else if(productUserRequests == 1){
                NSString *hints = [[NSString alloc]initWithContentsOfFile:[self pathOfFile:@"Hints"]];
                int hintValue = [hints intValue];
                hintValue+=150;
                [hints release];
                hints = [[NSString alloc]initWithFormat:@"%i", hintValue];
                [hints writeToFile:[self pathOfFile:@"Hints"] atomically:YES];

                NSString *reveals = [[NSString alloc]initWithContentsOfFile:[self pathOfFile:@"Reveals"]];
                int revealValue = [reveals intValue];
                revealValue+=20;
                [reveals release];
                reveals = [[NSString alloc]initWithFormat:@"%i", revealValue];
                [reveals writeToFile:[self pathOfFile:@"Reveals"] atomically:YES];
            }
    case SKPaymentTransactionStateFailed:
            if (transaction.error.code != SKErrorPaymentCancelled) {
                UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" message:@"In-app purchase failed. No money was charged." 
                                                               delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
                [alert show];
                [alert release];

            }
            [[SKPaymentQueue defaultQueue]finishTransaction:transaction];
            break;
    }
    }
} 
```

现在，每当我尝试购买该商品时，它都会显示“目前没有可用的产品。”以及“应用内购买失败。没有收取任何费用。” 我想知道，上面的代码有问题吗？还是更可能是iTunes连接问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T06:08:20.373

而不是请求的完整捆绑ID：，`@"com.mobice.wtm.5010"`继续并只提供一个`@"5010"`. 例如，我有一个产品`com.example.somerandomapp.track01`，以下代码有效：

```
SKPayment *paymentRequest = [SKPayment paymentWithProductIdentifier: @"track01"]; 
```

有很多不同的因素会导致错误，这是一个很好的列表，列出了可能导致失败的[原因](http://troybrant.net/blog/2010/01/invalid-product-ids/ "这里")

# unit-testing - 如何在 Play Framework 2.0 (Scala) 中插入测试数据？

> ID：11132362
> 
> 赞同：4
> 
> 时间：2012-06-21T06:00:21.390
> 
> 标签：unit-testing, scala, playframework, playframework-2.0

我在让我的测试在我的数据库中插入假数据时遇到了一些问题。我尝试了几种方法，但没有运气。在 FakeApplication 中运行测试时，似乎 Global.onStart 没有运行，尽管我认为我读到它应该可以工作。

```
object TestGlobal extends GlobalSettings {
  val config = Map("global" -> "controllers.TestGlobal")

  override def onStart(app: play.api.Application) = {
    // load the data ... 
  }
} 
```

在我的测试代码中：

```
private def fakeApp = FakeApplication(additionalConfiguration = (
  inMemoryDatabase().toSeq +
  TestGlobal.config.toSeq
).toMap, additionalPlugins = Seq("plugin.InsertTestDataPlugin")) 
```

然后我`running(fakeApp)`在每个测试中使用。

这`plugin.InsertTestDataPlugin`是另一种尝试，但如果没有在其中定义插件，它就无法工作`conf/play.plugins`——这是不想要的，因为我只希望在测试范围内使用此代码。

这些中的任何一个都应该起作用吗？有没有人通过类似的选择成功？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T15:32:11.480

Global.onStart 应该在应用程序启动时执行一次（并且只执行一次），无论它处于何种模式（开发、产品、测试）。尝试按照[wiki 了解如何使用 Global](https://github.com/playframework/Play20/wiki/ScalaGlobal)。

在该方法中，您可以检查数据库状态并进行填充。例如在测试中，如果你使用内存数据库，它应该是空的，所以做类似的事情：

```
if(User.findAll.isEmpty) {  //code taken from Play 2.0 samples

      Seq(
        User("guillaume@sample.com", "Guillaume Bort", "secret"),
        User("maxime@sample.com", "Maxime Dantec", "secret"),
        User("sadek@sample.com", "Sadek Drobi", "secret"),
        User("erwan@sample.com", "Erwan Loisant", "secret")
      ).foreach(User.create)   

  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T11:16:01.517

我选择以另一种方式解决这个问题：

我做了一个这样的夹具：

```
def runWithTestDatabase[T](block: => T) {
  val fakeApp = FakeApplication(additionalConfiguration = inMemoryDatabase())

  running(fakeApp) {
    ProjectRepositoryFake.insertTestDataIfEmpty()
    block
  }
} 
```

然后，而不是`running(FakeApplication()){ /* ... */}`，我这样做：

```
class StuffTest extends FunSpec with ShouldMatchers with CommonFixtures {
  describe("Stuff") {
    it("should be found in the database") {
      runWithTestDatabase {       // <--- *The interesting part of this example*
        findStuff("bar").size must be(1);
      }
    }
  }
} 
```

# android - 为什么我的身体返回 null？

> ID：11132369
> 
> 赞同：0
> 
> 时间：2012-06-21T06:01:22.627
> 
> 标签：android, nullpointerexception, andengine

我正在使用 AndEngine 为 Android 平台制作游戏。我需要检测圆形物体是否与圆形精灵接触。为此，我正在计算两者的中心和半径，并使用 pythag 来确定它们是否确实接触。但是，当我尝试获取身体的 x 坐标时，我不断收到 nullpointerexception。每次触摸屏幕并创建精灵时， spriteNum 都会增加。任何想法为什么？我的代码：

```
public class grow implements Runnable{
    Sprite sp;
    Body body[] = new Body[100];
    public grow(Sprite sprite){
        sp = sprite;
    }
    @Override
    public void run() {
        float radf, rads; //fill radius/stationary radius
        float[] fill; //fillx/stationaryx
        float fx=0, fy=0, sx, sy;

        while(down){
            //Log.e("Tag","Running thread. Down = "+Boolean.toString(down));
             yourSprite[spriteNum].setScale(scale += 0.1);
             fill = yourSprite[spriteNum].getSceneCenterCoordinates();
             fill[0]=fx;
             fill[1]=fy;
             radf=yourSprite[spriteNum].getHeightScaled()/2;    

             Log.e("Fill X before for",Float.toString(fx));

            if(spriteNum>0)
                for(int x=0;x<spriteNum;x++){               
                    rads=yourSprite[x].getHeightScaled()/2;
                    sx = body[x].getWorldCenter().x; //Null pointer exception
                    sy = body[x].getWorldCenter().y;

                    if(Math.sqrt(Math.pow((fx-sx),2)+Math.pow((fy-sy),2))<(radf+rads))
                            down = false;
                    Log.e("Fill x",Float.toString(fx));
                    Log.e("Stat x",Float.toString(sy));
                }
             try {
                Thread.sleep(75);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }

        }
        body[spriteNum] = PhysicsFactory.createCircleBody(mPhysicsWorld, yourSprite[spriteNum], BodyType.DynamicBody, FIXTURE_DEF);
        mPhysicsWorld.registerPhysicsConnector(new PhysicsConnector(yourSprite[spriteNum], body[spriteNum], true, true));
        if(body[0]!=null)
            Log.e("Body created","not null"); //This says it's not null, but when I did the same thing just inside of my for() loop and it did say it was null
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T06:05:50.407

我想这是因为您已经初始化了 body 数组`Body body[] = new Body[100]`，但没有初始化其中的单个`Body`元素。因此，当您访问`body[x]`它时，它会返回 null。您还应该初始化数组中的正文元素。就像是：

```
for(int i=0; i<body.length; i++) {
   // probably some cod here..
   body[i] = new Body(..);
   // probably some cod here..
} 
```

* * *

我想到您的问题的另一个原因是，您说：

> 每次触摸屏幕并创建精灵时， spriteNum 都会增加。

因此，您有可能在启动时初始化了一些身体元素，然后当精灵计数增加时，您不会在身体数组中创建新元素，因此当您尝试时`body[0]`它不是空的，而是对于可能没有身体元素的新精灵初始化你得到null，因此NPE。

# c# - C# 按钮每天单击一次

> ID：11132372
> 
> 赞同：2
> 
> 时间：2012-06-21T06:01:40.533
> 
> 标签：c#, asp.net

```
protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            this.GetLeft.Value = invited.GetInviteCountByWeb().ToString();
            HttpCookie oldCookie = Request.Cookies["Time"];
            if (oldCookie != null)
            {
                if (DateTime.Now.ToString("yyyy-MM-dd") == Convert.ToDateTime(oldCookie.Values["GetTime"]).ToString("yyyy-MM-dd"))
                {
                    this.IsGet.Value = "false";
                }
                else
                {
                    HttpCookie newCookie = new HttpCookie("Time");
                    newCookie.Values.Add("GetTime", DateTime.Now.Date.ToString("yyyy-MM-dd"));
                    newCookie.Expires = DateTime.Now.AddHours(24.0);
                    Response.Cookies.Add(newCookie);
                }
            }
        }
    } 
```

但它不起作用，每次关闭浏览器时 oldcookie 为空.. 那么我如何设置每天一次单击按钮？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T06:06:38.257

你的 else 语句在错误的地方，试试这样；

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        this.GetLeft.Value = invited.GetInviteCountByWeb().ToString();
        HttpCookie oldCookie = Request.Cookies["Time"];
        if (oldCookie != null)
        {
            if (DateTime.Now.ToString("yyyy-MM-dd") == Convert.ToDateTime(oldCookie.Values["GetTime"]).ToString("yyyy-MM-dd"))
            {
                this.IsGet.Value = "false";
            }
        }
        else
        {
            HttpCookie newCookie = new HttpCookie("Time");
            newCookie.Values.Add("GetTime", DateTime.Now.Date.ToString("yyyy-MM-dd"));
            newCookie.Expires = DateTime.Now.AddHours(24.0);
            Response.Cookies.Add(newCookie);
        }
    } 
```

# android - 当配置更改重新构建 Activity 时，谁获得 Activity 结果？

> ID：11132373
> 
> 赞同：0
> 
> 时间：2012-06-21T06:01:41.287
> 
> 标签：android

据我了解，如果我没有明确告诉 Android 我要处理 Activity 中的配置更改，它将被拆除并重新创建，例如方向更改。

假设我有对象 O，它是 Activity A 中某个类的实例`MyCustomClass`。当用户按下 Activity A 布局中的按钮时，我们调用`O.startActivityB`. 该方法将启动 Activity B。当在方向更改时重新创建 Activity B 时，我可以知道（在另一个或其他东西中设置了一些标志），因此 Activity B 立即运行：

```
setResult(RESULT_CANCELED);
finish();
return; 
```

此时，活动 B 的父活动是谁？谁得到结果代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T06:13:59.340

如果您从 Activity A 启动 Activity B，则“父级”是 Activity A。由于某种原因重新创建了 Activity 的事实不会以任何方式改变 Activity 堆栈。顺便说一句，如果你想收到结果，你需要使用`startActivityForResult()`，而不是`startActvity()`.

# sql - 在 Oracle SQL 中连接

> ID：11132375
> 
> 赞同：15
> 
> 时间：2012-06-21T06:01:44.290
> 
> 标签：sql, oracle, hierarchical-query

假设我们有以下表格

```
create table Employee(
  2    EMPNO         NUMBER(3),
  3    ENAME         VARCHAR2(15 BYTE),
  4    HIREDATE      DATE,
  5    ORIG_SALARY   NUMBER(6),
  6    CURR_SALARY   NUMBER(6),
  7    REGION        VARCHAR2(1 BYTE),
  8    MANAGER_ID    NUMBER(3)
  9  ) 
```

和

```
create table job (
  2    EMPNO         NUMBER(3),
  3    jobtitle      VARCHAR2(20 BYTE)
  4  )
  5  / 
```

我对以下查询的作用感兴趣

```
SELECT empno, manager_id, ename
  2  FROM employee
  3  START WITH empno = 1
  4  CONNECT BY PRIOR empno = manager_id; 
```

据我了解，此代码从员工中选择`empno`, `manager_id`，`ename`它从该行开始选择 where `empno=1`，但无法理解该行的作用：

```
CONNECT BY PRIOR empno = manager_id; 
```

这是否与以下内容相同：

```
where empno=manager_id? 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-21T06:43:24.283

```
CONNECT BY PRIOR empno = manager_id; 
```

这将产生递归。属于下一个较低层次级别的所有记录都将返回。这将为所有经理及其各自的下属返回一个从上到下的层次结构。

```
30 (manager_id)
   12 
   5 (manager_id)
      1
      7
20 (manager_id)
   15
   10 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-21T06:33:24.220

查询是递归的，它从员工 #1（可能是 CEO）开始，然后递归地打印他的所有下属，然后是他们的所有下属，依此类推（直到打印所有员工）。

关于“START WITH”和“CONNECT BY”的一个很好的解释可以在[这里找到](http://www.adp-gmbh.ch/ora/sql/connect_by.html)

# java - 就 JVM 而言，什么是乌龙？

> ID：11132377
> 
> 赞同：3
> 
> 时间：2012-06-21T06:01:52.777
> 
> 标签：java, jvm, oolong

我正在阅读 Joshua Engel 的“Java 虚拟机编程”一书，其中作者提供了名为 Oolong 的“JVM 汇编语言”。

据我了解，这是一种编译成 java 字节码的语言，它与原始的 java 字节码非常相似（那里使用了大量的字节码操作码）。如果是这样，那为什么叫汇编语言呢？那是因为它是低级语言并且看起来像字节码吗？

另一个问题是关于茉莉的。正如 Wikipedia 所说，它是“一个免费的开源汇编器，可以使用 Java 虚拟机指令集从人类可读的类似汇编器的语法创建类文件”。Jasmin 文件（也有 .j 扩展名）的语法看起来像 Oolong 的语法。它在那里使用吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T06:53:40.353

Oolong 是 JVM 的汇编语言。

> ...为什么叫汇编语言？

[您最好在（例如） Wikipedia](https://en.wikipedia.org/wiki/Assembly_language)中查找“汇编语言”的含义。它本质上是一种在“语句”和目标机器的机器指令之间具有直接一对一映射^(1的语言。)如果您将 JVM 视为目标机器，OOlong 匹配此描述。（在 Oolong 语句和 JVM 字节码指令之间存在一对一的映射。）

> Jasmin 文件（也有 .j 扩展名）的语法看起来像 Oolong 的语法。它在那里使用吗？

我看到消息来源说 Oolong 的语法是“基于 Jasmin”，但我找不到任何详细描述语法的独立文档。

如果您有兴趣查看乌龙，这个 SO question 详细说明了从哪里下载它：

*   [Oolong 和 Gnoloo 的源代码在哪里？](https://stackoverflow.com/questions/4505808/where-is-the-source-code-for-oolong-and-gnoloo)

* * *

^(1 - 我过于简单化了。一些汇编语言支持“宏”，其中单个源语句可以映射到多个目标指令。阅读维基百科参考。)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-04T23:48:37.390

它使用堆栈、堆栈帧，并具有与真正的汇编语言相对应的字节码。它还有更高级别的指令，可以从内存中检索字段，但不是直接检索。您必须使用 getfield、putfield、invokespecial 等。由于 JVM 不在真正的硬件环境（如 Unix 内核）中运行，它不会像真正的操作系统那样做任何繁重的工作，比如制作进程、担心时间片和服务中断，与设备驱动程序通信等等。我不得不说 JVM 是 Java 和本机操作系统之间的中间件。这正是他们所说的......虚拟机。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-21T06:38:43.120

乌龙茶是中国茶，名字并不重要。请记住，Java 语言是由 java 编译器编译的。Java Bytecode 不是汇编语言，但您可以将其视为（JVM）Java 虚拟机的汇编语言。

# android - 在 android eclipse 中显示单个屏幕而不是 tabhost

> ID：11132380
> 
> 赞同：0
> 
> 时间：2012-06-21T06:01:59.413
> 
> 标签：android, eclipse, sharedpreferences, android-tabhost

我是安卓的自学者。

我有两个屏幕。第一个屏幕包含一个编辑文本和一个按钮，编辑文本是从用户那里获取输入，按钮是调用第二个屏幕上的 tabhost 的活动。

在运行时，从用户那里获得输入后，它应该向第二个屏幕上的选项卡主机的任何一个选项卡显示适当的值**（根据用户的输入） 。**

但这里我的问题是，它在单独的屏幕上显示答案，而不是在 tabhost 格式上。

**注意：**在下面的代码中，我猜只有问题在于使用共享首选项来存储数据并将数据显示到 tabhost。请任何人帮助我吗？

请在下面找到代码

**Demo_tabActivity.java**

```
 public class Demo_tabActivity extends Activity 
     {

private static String NAMESPACE = "http://tempuri.org/";
   private static String METHOD_NAME = "FahrenheitToCelsius";
   private static String SOAP_ACTION = "http://tempuri.org/FahrenheitToCelsius";
   private static String URL = "http://www.w3schools.com/webservices/tempconvert.asmx?WSDL";

   Button btnFar;
   EditText txtFar,txtshow;

   @Override
   public void onCreate(Bundle savedInstanceState)
   {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.main);

       txtFar = (EditText)findViewById(R.id.editText_in);

       btnFar = (Button)findViewById(R.id.button1);
       btnFar.setOnClickListener(new View.OnClickListener()
       {
       public void onClick(View v)
       {
           String b;

         //Initialize soap request + add parameters
         SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);       

         //Use this to add parameters
         request.addProperty("Fahrenheit",txtFar.getText().toString());

         //Declare the version of the SOAP request
         SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

         envelope.setOutputSoapObject(request);
         envelope.dotNet = true;

         try 
         {   
             HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

             //this is the actual part that will call the webservice
             androidHttpTransport.call(SOAP_ACTION, envelope);

             // Get the SoapResult from the envelope body.

             SoapPrimitive result = (SoapPrimitive)envelope.getResponse();

             SharedPreferences sharedPreferences;
              sharedPreferences=PreferenceManager.getDefaultSharedPreferences(Demo_tabActivity.this);
             Editor editor = sharedPreferences.edit();
             editor.putString("your", "b");
             editor.commit();

             if(result != null)
             {
                 b=result.toString();
                 Intent i = new Intent(getApplicationContext(),Tab_1.class);
                 i.putExtra("goto", b.toString());
                 startActivity(i);
             }
             else
             {
                 Toast.makeText(getApplicationContext(), "oops!..empty",Toast.LENGTH_SHORT).show();
             }

           }
         catch (Exception e)
         {
           e.printStackTrace();
           }
         }
       });   

   }
 } 
```

**Tab_1.java**

```
 public class Tab_1 extends Activity 
    {
EditText tv;
String result;

     /** Called when the activity is first created. */

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.tab1);

SharedPreferences sharedPreferences;
sharedPreferences = PreferenceManager.getDefaultSharedPreferences(Tab_1.this);
String answer= sharedPreferences.getString("your","");

Bundle extras = getIntent().getExtras();

if(extras !=null)
{
    result = extras.getString("goto");

}
tv=(EditText)findViewById(R.id.editText_output);
tv.setText(result);
}
  } 
```

感谢您宝贵的时间！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T06:38:28.167

好的。让我先简要解释一下。

当您调用 startActivity() 时，它仅表示您正在尝试调用 Activity 类。但这并不意味着您将能够在您导航到的所有屏幕中都有标签栏。因为选项卡与 tabActivity 相关，这意味着它与正常活动完全分开。因此，要让您的选项卡在所有页面中可见，您必须替换视图，从而保持在同一个 tabActivity 中。

所以第一步是获取下一个要显示为视图的活动并将其添加到选项卡中。这就是活动组要做的事情。这是一个很好的例子来说明如何理解 ActivityGroup。

[活动组示例](http://web.archive.org/web/20100816175634/http://blog.henriklarsentoft.com/2010/07/android-tabactivity-nested-activities/)

为了使这更容易，引入了[片段](http://developer.android.com/reference/android/app/Fragment.html)。它与活动组执行相同的操作（替换视图）。这里有几个例子，

[http://android.codeandmagic.org/2011/07/android-tabs-with-fragments/](http://android.codeandmagic.org/2011/07/android-tabs-with-fragments/)

[http://developer.android.com/resources/samples/Support4Demos/src/com/example/android/supportv4/app/FragmentTabs.html](http://developer.android.com/resources/samples/Support4Demos/src/com/example/android/supportv4/app/FragmentTabs.html)

# ninject - Ninject ActivationException

> ID：11132381
> 
> 赞同：0
> 
> 时间：2012-06-21T06:02:00.190
> 
> 标签：ninject

我在一个 ASP.NET MVC 项目中从 Ninject 3.0.1.10 中得到臭名昭著的“激活 XYZ 时出错。没有匹配的绑定可用等等等等”。

以下是我设置绑定的方式（非常简单）：

```
public static class NinjectWebCommon 
    {
        private static readonly Bootstrapper bootstrapper = new Bootstrapper();

        /// <summary>
        /// Starts the application
        /// </summary>
        public static void Start() 
        {
            DynamicModuleUtility.RegisterModule(typeof(OnePerRequestHttpModule));
            DynamicModuleUtility.RegisterModule(typeof(NinjectHttpModule));

            bootstrapper.Initialize(CreateKernel);
        }

        /// <summary>
        /// Stops the application.
        /// </summary>
        public static void Stop()
        {
            bootstrapper.ShutDown();
        }

        /// <summary>
        /// Creates the kernel that will manage your application.
        /// </summary>
        /// <returns>The created kernel.</returns>
        private static IKernel CreateKernel()
        {
            var kernel = new StandardKernel();

            kernel.Bind<Func<IKernel>>().ToMethod(ctx => () => new Bootstrapper().Kernel);
            kernel.Bind<IHttpModule>().To<HttpApplicationInitializationHttpModule>();
            RegisterServices(kernel);

            return kernel;
        }

        private static void RegisterServices(IKernel kernel)
        {
            string connectionString = WebConfigurationManager.ConnectionStrings["STAGING"].ConnectionString;

            kernel.Bind<IUserAccountRepository>()
                  .To<SqlUserAccountRepository>()
                  .WithConstructorArgument("connectionString", connectionString);

            kernel.Bind<IRecipeRepository>()
                  .To<SqlRecipeRepository>()
                  .WithConstructorArgument("connectionString", connectionString);

            kernel.Bind<HomeViewModel>().ToSelf();
        }
    } 
```

当调用控制器 Index 操作时，它会尝试创建一个 HomeViewModel 对象，如下所示：

```
public ActionResult Index()
{
    IKernel      kernel = new StandardKernel();
    HomeViewModel model = kernel.Get<HomeViewModel>();

    ... 
```

触发异常：

```
Error activating IRecipeRepository No matching bindings are available, and the type is not self-bindable. 
Activation path: 
2) Injection of dependency IRecipeRepository into parameter recipeRepository of constructor of type HomeViewModel  
1) Request for HomeViewModel 
```

但是，如果我在 RegisterServices 中调用 kernel.Bind 后尝试直接获取 HomeViewModel 的实例，那么它可以正常工作。

这是 HomeViewModel 的样子（为简洁起见，删除了一些细节）：

```
public class HomeViewModel
{
    public HomeViewModel(IRecipeRepository      recipeRepository,
                         IUserAccountRepository userAccountRepository)
    {
        this.recipeRepository = recipeRepository;
        this.userAccountRepository = userAccountRepository;
    }

    //
    // Some details removed for sake of brevity
    //

    private readonly IRecipeRepository      recipeRepository;
    private readonly IUserAccountRepository userAccountRepository;
} 
```

知道我错过了什么吗？为什么在这种情况下控制器是“特殊的”？

# mapping - dozer.xml 中的日期格式配置

> ID：11132382
> 
> 赞同：1
> 
> 时间：2012-06-21T06:02:00.360
> 
> 标签：mapping, dozer, xml-configuration

我正在使用 Dozer 映射器将 Service 对象映射到 Value 对象。我通过以下方式映射日期：

```
<mapping date-format="dd-MM-yyyy">
  <class-a>MySo</class-a>
  <class-b>MyVO</class-b>
  <field>
    <a>dateStr</a>
    <b>dateObj</b>
  </field>
</mapping> 
```

但是，我每次都需要指定日期的格式。是否有其他方法可以直接映射字符串日期？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T06:05:06.787

在 dozer.xml 中我们可以指定一些默认配置。

例如。

```
<configuration>
    <stop-on-errors>true</stop-on-errors>
    <date-format>dd-MM-yy</date-format>
    <wildcard>true</wildcard>
</configuration> 
```

这是要参考的[链接。](http://dozer.sourceforge.net/documentation/stringtodatemapping.html)

# php - PHP：哪个更快：执行 while、while 或 for 循环

> ID：11132383
> 
> 赞同：0
> 
> 时间：2012-06-21T06:02:02.313
> 
> 标签：php, loops, micro-optimization

我目前正在用 PHP 创建一个套接字服务器，我想知道哪一个在整个过程中使用起来会更快。我听说 for 循环比 while 循环快，但我不知道 do while。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T06:15:22.527

根据您使用的基准，`do`已显示循环稍微快一些：

[http://www.ebrueggeman.com/blog/php_benchmarking_loops](http://www.ebrueggeman.com/blog/php_benchmarking_loops)

```
Test            Avg Execution Time  
for loop        23.44 ms
while loop      24.65 ms
do while loop   22.96 ms 
```

在这个[基准测试](http://juliusbeckmann.de/blog/php-foreach-vs-while-vs-for-the-loop-battle.html)中，`foreach`表现优于其他循环类型，并且`while`被发现表现优于`for`。我提出这个是因为你会注意到这与我引用的第一个测试相矛盾。

最后，[这个基准](http://www.phpbench.com/)支持第一个的发现，它`while`比`for`.

结论？没有基准能够模拟您的用例，以至于您应该根据它做出决定，这可能是一个不会实质性地改进您的程序的微优化。使用适合情况的语句，然后编写测试以使用变体对您自己的应用程序进行基准测试。`while`交换 the和 the是非常简单的`for`- 尝试它们，看看你会得到什么。然后在你的下一个项目中忘掉这一课，因为它将是独一无二的，再次值得单独测试。

**文档**

*   PHP 的 - [http://php.net/manual/en/control-structures.for.php](http://php.net/manual/en/control-structures.for.php)
*   [PHP 的 while -http](http://php.net/manual/en/control-structures.while.php) ://php.net/manual/en/control-structures.while.php
*   PHP 的 do...while - [http://php.net/manual/en/control-structures.do.while.php](http://php.net/manual/en/control-structures.do.while.php)
*   关于性能、优化和将微优化置于代码质量之前的愚蠢的文章 - [http://docstore.mik.ua/orelly/webprog/php/ch13_05.htm](http://docstore.mik.ua/orelly/webprog/php/ch13_05.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T06:14:32.013

如果您非常关心代码的速度，请对其进行*分析*。无论您阅读到有关特定代码片段性能的任何信息（例如，在这样的地方[）](http://www.phpbench.com/)，在您的特定情况下都可能会出错 - 因为一些奇怪的 PHP 解释器怪癖或其他原因。

有大量可供 PHP 程序员使用的分析工具 - 从简单的[microtime](http://php.net/manual/en/function.microtime.php)开始，到完整的分析器工具包（如[XDebug](http://www.xdebug.org/) ）结束。我建议阅读[此主题](https://stackoverflow.com/questions/21133/simplest-way-to-profile-a-php-script)以了解分析的基本准则。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T06:06:02.433

使用任何适合您的目的。for 循环和 while 循环用于循环首先检查条件。do-whiles 保证代码至少运行一次。

因此，您可以根据此约束立即将您的选择范围缩小到 for/while 或 do-while。尝试使用不适当的构造会导致代码非常难看，而且很可能会变慢。

在for和while之间，我认为没有任何区别。即使您正在编写一个科学图书馆，这也几乎不会引起注意（如果有的话）。一般准则是：for 循环设计用于迭代事物，while 循环用作其他通用循环。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T06:05:20.677

本身没有区别，因为它们基本上只是编写循环的不同方式，直接取自 C。

唯一可能会影响的是评估条件的次数，但您可以自己计算。

所以使用最简洁易读的。

# jquery - 如何在使用jquery的掩码时用'*'替换ssn的初始数字

> ID：11132397
> 
> 赞同：4
> 
> 时间：2012-06-21T06:03:48.117
> 
> 标签：jquery, html

如何在使用jquery的掩码时用'*'替换ssn的初始数字

例如： 123-45-6789 将被插入为 ***-**-6789 ，但是当我们获取值时，我们应该得到 123456789

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T06:20:16.187

给定 HTML 如下：

```
<form id="ssn_form">
    <input name="ssn" id="ssn" type="text">
    <button id="submit">Submit</button>
</form>​ 
```

您可以将 SSN 存储在模糊的数据属性中并屏蔽该值。然后在提交表单时，您可以在提交表单之前将值重新填充到输入中：

```
var retrieveValue = function(ev){
        var $this = $(this),
            val = $this.data('value');

        if (val) {
            $this.val(val);
        }
    },
    hideValue = function(ev){
        var $this = $(this);

        $this.data('value', $this.val());
        $this.val($this.val().replace(/^\d{5}/, '*****'));
    };

$('#ssn').focus(retrieveValue);

$('#ssn').blur(hideValue);

$('#ssn_form').submit(function(ev){
    ev.preventDefault();
    retrieveValue.call($('#ssn')[0], ev);
    $(this).submit();
}); 
```

## [看演示](http://jsfiddle.net/nKa8z/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T06:16:06.533

没有任何代码供应我认为这是你可以尝试的最好的:)

输入 - `123-45-6789`

输出- `***-**-6789`

检查这个——

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<script>
function mask(f){
tel='';
var val =f.value.split('');
for(var i=0;i<val.length;i++){
if(i<3){val[i]='*'}
if(i<6 && i>3 ){val[i]='*'}
tel=tel+val[i]
}
f.value=tel;
}
</script>
</head>
<body>
<form>
<input name="phone" type="text" onblur="mask(this)">
</form>
</body>
</html> 
```

# c# - C# - ListView 空异常

> ID：11132398
> 
> 赞同：0
> 
> 时间：2012-06-21T06:03:48.593
> 
> 标签：c#, listview, null, scroll

我在 ListViews 上苦苦挣扎了一段时间...我正在编写一个无法复制到这里的程序（它有 637 行长）...基本上我正在尝试删除 ListView 的选定行...但是如果ListView 足够大，可以显示一个滚动条，它追逐程序说“没有为对象的实例设置对象引用”，它实际上并没有完全崩溃，但它显示了一个丑陋的 JIT 调试窗口。我知道问题出在 ListView 的大小上，因为如果我只是尝试使用活动滚动条删除 ListView 的任何项目，我就会崩溃，但是如果我只是将窗口的大小调整到足够大以禁用滚动条（即足够大，所以一切都适合，滚动条不是必需的，因此系统不会制作滚动条），一切正常！

（我已经尝试过各种代码来删除选定的项目，每个代码都有同样的错误，但我通过将所有 ListView 复制到一个数组，删除数组中的选定项目，然后复制它们使其工作回到一个干净的 ListView ......奇怪，凌乱，丑陋，我知道，但它是唯一有效的代码......但现在我得到了同样的错误，但只有在安装程序之后，当我没有发生这种情况时在 Visual Studio 中运行程序！）

编辑：删除代码是（注释部分是我之前尝试过的所有代码，但在同一个错误中失败了......这个只在安装时崩溃，而不是在 Visual Studio 2010 中......框架是 .NET 4.0）：

```
private void limparLinhasSelecionadas() 
        {
            if (listView1.Items.Count > 0 && limpando == false)
            {
                limpando = true;
                int i = 0; 

                //for (i = listView1.Items.Count - 1; i >= 0 ; i--)
                //{
                    //if (listView1.Items[i].Selected == true)
                    //{
                    //    listView1.Items[i].Remove();                       
                    //}

                //}              
                //////for (i = listView1.SelectedIndices.Count - 1; i >= 0; i--)
                //////{
                //////    listView1.Items[listView1.SelectedIndices[i]].Remove();
                //////}
                //foreach (ListViewItem item in listView1.SelectedItems)
                //{
                //    listView1.Items.Remove(item);
                //}

                ArrayList itens = new ArrayList();

                foreach (ListViewItem item in listView1.Items)
                {
                    itens.Add(item);
                }

                foreach (ListViewItem item in listView1.SelectedItems)
                {
                    itens.Remove(item);                    
                }

                listView1.Items.Clear();

                foreach (ListViewItem item in itens)
                {
                    listView1.Items.Add((ListViewItem)item.Clone());
                }

                //for (i = 0; i < itens.Count; i ++)
                //{                    
                //    ListViewItem item = new ListViewItem((itens[i] as ListViewItem).Text);

                //    for (j = 1; j < (itens[i] as ListViewItem).SubItems.Count; j++)
                //    {
                //        item.SubItems.Add((itens[i] as ListViewItem).SubItems[j].Text);                     
                //    }
                //    listView1.Items.Add(item);
                //}

                for (i = 0; i < listView1.Items.Count; i++)
                {
                    listView1.Items[i].Text = "Passe " + (i + 1).ToString();
                }

                ////ListView listView = new ListView();

                ////int j = 0;

                ////for (i = 0; i < listView1.Items.Count; i++)
                ////{
                ////    //listView.Items.Add(listView1.Items[i]);
                ////    for (j = 0; j < listView1.Items[i].SubItems.Count; j++)
                ////    {
                ////        listView.Items[i].SubItems.Add(listView1.Items[i].SubItems[j].Text);
                ////    }
                ////}

                ////listView1.Items.Clear();

                ////for (i = 0; i < listView.Items.Count; i++)
                ////{
                ////    listView1.Items.Add(listView.Items[i].Clone() as ListViewItem);
                ////}

                //foreach (ListViewItem item in listViewCollection)
                //{
                //    listView1.Items.Add(item.Clone() as ListViewItem);
                //}

                SetWindowTheme(listView1.Handle, "Explorer", null);
                limpando = false;
            }

           // SetWindowTheme(listView1.Handle, "Explorer", null);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:01:25.613

如果您只想从列表视图中删除所选项目，则此代码将起作用。

```
foreach (ListViewItem item in listView1.SelectedItems)
{
    listView1.Items.Remove(item);
} 
```

# deployment - 无法在tomcat7上部署struts2 war

> ID：11132400
> 
> 赞同：1
> 
> 时间：2012-06-21T06:03:56.783
> 
> 标签：deployment, struts2, tomcat7

我现在真的很愚蠢，但我整天都在挣扎，我一点头绪都没有，不胜感激一些帮助:)

我开发了一个 struts2 webapp，当我通过 eclipse (indigo sr2) 运行它时，它与我自己计算机上安装的 serverlt 服务器 apache tomcat 7.0.27 相关。我所做的就是：右键单击我的 webapp 的文件夹 --> 运行方式 --> 在服务器上运行。然后，当我复制和路径我的 servlet 的 url 地址时，它可以在 eclipse 浏览器或其他浏览器（chrome、firefox）中很好地运行。

现在我想做的就是让它在没有 Eclipse 的情况下运行。所以我将我的 webapp 导出到一个 .war 文件中（右键单击 webapp 文件夹 --> 导出 --> War 文件），并尝试使用应用程序管理器 tomcat web 界面部署它：它要求我做的就是浏览通过我的计算机获取战争文件并单击部署按钮。轻松到此为止！

然后我的 webapp 出现在应用程序管理器界面的应用程序选项卡中，但是当我单击“运行”按钮时，我得到的只是这条消息：

> 失败：上下文路径/MMSProject 的应用程序无法启动

（原始消息是法语，我没有找到如何更改 tomcat7 语言，所以这可能不是您在英语中得到的确切消息，我希望这个翻译足够接近*。MMSProject*是我的 webapp 的名称）。

因此，我在struts2网站上下载了一些struts2 webapp示例，并尝试使用相同的过程在tomcat7上部署struts2-blank。这个工作得很好：我可以从 tomcat 应用程序管理器中运行它。所以我想我的问题来自我自己的战争文件，而不是来自 tomcat 本身，但由于它是由 eclipse 生成的，所以这部分过程可能会出错，这对我来说似乎很奇怪。

所以我坚持这一点。你们知道吗：

*   我怎样才能获得有关出了什么问题的更多信息（我查看了 tomcat 日志，但没有找到任何错误消息）。这对我解决问题有很大帮助！
*   我的 webapp 会从 eclipse 运行而不是直接从 tomcat 运行的任何原因？
*   我怎样才能让它从 tomcat 运行？:)

非常感谢您的帮助！我现在有点绝望，没想到部署会这么痛苦！

编辑：我仔细检查了 tomcat 的日志，实际上在 catalina.[date].log 中找到了这个：

> *   Grave: Error filterStart juin 21, 2012 1:48:42 PM org.apache.catalina.core.StandardContext startInternal
> *   严重：上下文 [/MMSproject] 启动失败，由于以前的错误
> *   2012 年 6 月 21 日下午 1:48:42 org.apache.catalina.loader.WebappClassLoader checkThreadLocalMapForLeaks
> *   Grave：Web 应用程序 [/MMSproject] 创建了一个 ThreadLocal，其键类型为 [com.opensymphony.xwork2.inject.ContainerImpl$10]（值 [com.opensymphony.xwork2.inject.ContainerImpl$10@2de3bcb5]），值类型[java.lang.Object[]]（值 [[Ljava.lang.Object;@427a269c]）但在 Web 应用程序停止时未能将其删除。线程将随着时间的推移而更新，以尝试避免可能的内存泄漏。
> *   2012 年 6 月 21 日下午 1:48:42 org.apache.catalina.loader.WebappClassLoader checkThreadLocalMapForLeaks
> *   Grave：Web 应用程序 [/MMSproject] 创建了一个 ThreadLocal，其键类型为 [com.opensymphony.xwork2.inject.ContainerImpl$10]（值 [com.opensymphony.xwork2.inject.ContainerImpl$10@617ceddc]），值类型[java.lang.Object[]]（值 [[Ljava.lang.Object;@50e43884]）但在 Web 应用程序停止时未能将其删除。线程将随着时间的推移而更新，以尝试避免可能的内存泄漏。

这在 localhost.[date].localhost ：

> 2012 年 6 月 21 日下午 1:48:42 org.apache.catalina.core.StandardContext filterStart SEVERE: com.opensymphony.xwork2.util.FileManager$FileRevision.needsReloading (FileManager.java: 209) 在 com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.needsReload(XmlConfigurationProvider.java:325) 在 org.apache.struts2.config 的 com.opensymphony.xwork2.util.FileManager.fileNeedsReloading(FileManager.java:60) .StrutsXmlConfigurationProvider.needsReload(StrutsXmlConfigurationProvider.java:168) 在 com.opensymphony.xwork2.config.ConfigurationManager.conditionalReload(ConfigurationManager.java:220) 在 com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:61) 在org.apache.struts2.dispatcher.Dispatcher。getContainer(Dispatcher.java:774) at org.apache.struts2.dispatcher.FilterDispatcher.init(FilterDispatcher.java:191) at org.apache.catalina.core.ApplicationFilterConfig.initFilter(ApplicationFilterConfig.java:277) at org.apache .catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:258) 在 org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:382) 在 org.apache.catalina.core.ApplicationFilterConfig.(ApplicationFilterConfig.java: 103）在 org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4638) 在 org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5294) 在 org.apache.catalina.util.LifecycleBase .start(LifecycleBase.java:150) 在 org.apache.catalina.manager.ManagerServlet.start(ManagerServlet.java:1247) 在 org.apache.catalina.manager.HTMLManagerServlet.start(HTMLManagerServlet.java:747) 在 org.apache.catalina.manager.HTMLManagerServlet.doPost(HTMLManagerServlet.java:222) 在 javax.servlet.http.HttpServlet .service(HttpServlet.java:641) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305) 在 org.apache。 catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) 在 org.apache.catalina.filters.CsrfPreventionFilter.doFilter(CsrfPreventionFilter.java:186) 在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java: 243) 在 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) 在 org.apache.catalina.filters.SetCharacterEncodingFilter.doFilter(SetCharacterEncodingFilter.java:108) 在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243) 在 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain. java:210) at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225) at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169) at org.apache.catalina.authenticator .AuthenticatorBase.invoke(AuthenticatorBase.java:581) 在 org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168) 在 org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98) 在org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927) 在 org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118) 在 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407) 在 org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor. java:999) at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565) at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307) at java.util .concurrent.ThreadPoolExecutor.runWorker(Unknown Source) at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) at java.lang.Thread.run(Unknown Source)AbstractHttp11Processor.process(AbstractHttp11Processor.java:999) at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565) at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java: 307) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) 在 java.lang.Thread.run(Unknown Source) 在 java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)AbstractHttp11Processor.process(AbstractHttp11Processor.java:999) at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565) at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java: 307) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) 在 java.lang.Thread.run(Unknown Source) 在 java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)在 java.lang.Thread.run(Unknown Source) 处运行(Unknown Source)在 java.lang.Thread.run(Unknown Source) 处运行(Unknown Source)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T14:59:37.967

好的，所以我找到了答案并想发布它以帮助遇到同样问题的人！

这是一个很小的细节，但一旦你知道它可能会为你节省很多挣扎和祈祷的时间：如果你决定在部署之前不要忘记将 struts devMode 切换为 false（在 struts.xml 文件中）开始你的开发（即：可能是几个星期前的硬编码！）。

所以基本上这就是你想要的 struts.xml ：

```
<constant name="struts.devMode" value="false" /> 
```

代替 ：

```
<constant name="struts.devMode" value="true" /> 
```

祝大家好运！

# php - 使用 AJAX/PHP/MySQL 在服务器和客户端之间传输数据的安全有效方法？

> ID：11132404
> 
> 赞同：0
> 
> 时间：2012-06-21T06:04:16.863
> 
> 标签：php, javascript, mysql, ajax

好吧，我是 PHP 新手，但是这些天来思考这些东西真的让我很困惑。

这是我的详细问题：

首先，我需要在客户端和服务器之间传输数据。应该使用 Ajax 在客户端呈现数据。在服务器端，将使用 PHP 和 MySQL 来解析请求，抓取数据，然后将其发送回。

那么问题来了。浏览器发送的用户数据可以包含**&, %, ', "**这可能会损坏格式化的POST请求或进行数据库攻击。虽然我们可以使用JS来检测它们，但用户仍然可以绕过验证发送数据，更不用说我们不能简单地删除它们，因为它们可能对用户有用。

然后我检查了我的武器库。在服务器端，事实证明我有太多的功能来处理它们：
除了常规的表达之外，我还有

```
htmlspecialchars, htmlspecialchars_decode, addslashes, stripslashes
urlencode, urldecode, mysql_escape_string, mysql_real_escape_string 
```

在使用javascript的客户端，我没有那么多但仍然有：

```
escape, unescape 
```

好的。知道自己有这么多武器很好，但是……如何选择、组合和使用它们真的让我很头疼。

例如，假设我想要一个名为的产品名称：

**'%万岁%'+&ABC**

好吧，也许现实生活中不会有这样的产品被命名，但让我们以它为例。

& 标记将中断 POST 消息。
+ 可能会影响 ajax 解析。
单引号可能允许 SQL 注入。
% 标记可能会导致问题，但我不确定它是否会。

但是在将它发送到数据库并取回之后，我仍然希望该名称完全相同，
这意味着数据库中的名称可以不同但它在浏览器中的呈现应该是相同的。

那么这个问题可能有点太长了，但希望有人可以分享一些好的经验：如何使用这些函数处理用户输入字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T06:14:25.767

服务器端你想要的是[准备好的语句](http://php.net/manual/en/pdo.prepared-statements.php)，也就是参数化查询，以保证你的数据库安全（避免 SQL 注入）。

在客户端，我会推荐带有已定义对象和 DOM 操作的 JSON，而不是 innerText 或 innerHTML。浏览器将转义发布帖子所需的一切。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T06:36:46.657

在通过**ajax**发送数据之前，对它们进行编码：假设数据是一个**javascript 数组**。为什么是数组？因为如果你已经有一个查询（例如'name=me&foo=b&ar'），你如何解决'b&ar'这对**你**来说显然是一个值，但对于javascript引擎来说'b'和'ar'呢？

```
for(i in arr)
   { arr[i] = encodeURIComponent(arr[i]); } 
```

[此](http://www.w3schools.com/jsref/jsref_encodeuricomponent.asp)功能替换所有有害的 url 字符 (, / ? : @ & = + $ #) 等等。然后你可以通过建立像`arr.join('');` 但我会使用 jquery 并在之后发送数组来发送你的查询。

在**PHP 方面**，您必须遵守的基本规则是，您**永远不要**在不保存数据的情况下保存数据`mysql_real_escape_string();`

# android - 如何在android中实现FM发射器？

> ID：11132406
> 
> 赞同：4
> 
> 时间：2012-06-21T06:04:29.623
> 
> 标签：android, radio

我想知道如何在 android 应用程序中实现 FM Transmitter。我希望我的安卓手机生成一个无线电频率。这样我就可以在手机上播放音乐并通过无线电频率将其传输给附近的无线电接收器（可能在汽车中），这样可以扩大到更多的听众。就像诺基亚 C7 上的 TuneAudio。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-21T06:22:49.153

您将 -**需要一个 FM 发射器**- 即，用于在所需范围内生成频率的*适当硬件。*

可以从许多电子零售商处购买[便携式 FM 发射器](https://www.google.com/?q=portable+FM+transmitter)是一件好事。它们通常插入 2.5 毫米插孔，电池可以传输数小时；也有 Android/Phone 专用型号。

诺基亚 C7*已经*内置了相应的硬件。标准的“Android”没有。

祝你好运 ：）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T06:38:10.227

XDA的某个人提到了类似的事情

[http://forum.xda-developers.com/showthread.php?t=1092719](http://forum.xda-developers.com/showthread.php?t=1092719)

这听起来很复杂，并且可能仅适用于某些 rom，这意味着目前在 android 上可能不容易实现。

不管怎样，祝你好运，我很想看到这种情况发生。

# c# - 如何在 ios 中从 CGImage 读取 RBG 像素值

> ID：11132410
> 
> 赞同：0
> 
> 时间：2012-06-21T06:04:45.413
> 
> 标签：c#, mono, xamarin.ios, monodevelop

在如何将其分配给 UIImage 之后，如何从 CGImagea 读取 RGB-Pixel by Pixel 值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:36:35.243

要使用 MonoTouch 读取 RGB 像素值，您可以使用以下帖子的答案中发布的代码（对我来说很好）：

[检索 UIImage (MonoTouch) 的像素 alpha 值](https://stackoverflow.com/questions/2597198/retrieving-a-pixel-alpha-value-for-a-uiimage-monotouch)

您还可以找到以下有用的帖子：

[iOS 版 Monotouch 中的透明 PNG](https://stackoverflow.com/questions/8254215/transparent-pngs-in-monotouch-for-ios)

这里是一个卷积过滤器的工作实现的链接，它读取和分解像素的 rgb 值（在 iOS 上，所有具有 alpha 通道的图像都以预乘 alpha 格式存储）：

[如何在 MonoTouch 中优化这种图像卷积过滤方法？](https://stackoverflow.com/questions/7625582/how-to-optimize-this-image-convolution-filter-method-in-monotouch)

请记住，读取像素值非常慢，即使您使用该技巧创建只有 1x1 像素的位图上下文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T06:26:31.180

根据[此链接](http://msdn.microsoft.com/en-us/library/system.drawing.bitmap.getpixel.aspx)位图用于处理由像素数据定义的图像。

```
yourimage= new Bitmap(@"image address", true);

    int x, y;

    // Loop through the images
    for(x=0; x<yourimage.Width; x++)
    {
        for(y=0; y<yourimage.Height; y++)
        {
            //Get Pixel Color
            Color pixelColor = image1.GetPixel(x, y);
            Color yourColor = Color.FromArgb(pixelColor.R, 0, 0);
            //Set Pixel Color
            yourimage.SetPixel(x, y, yourColor ); 
```

# android - 为什么为我的 ListView 元素的背景分配颜色不能覆盖整个 ListView 背景，而分配一个可绘制对象呢？

> ID：11132412
> 
> 赞同：1
> 
> 时间：2012-06-21T06:04:52.263
> 
> 标签：android, user-interface, android-layout

我有一个`ListView`位于平板电脑大小屏幕左侧的。我的目标是给它一个坚实的背景，右边有一个边框，然后在列表元素上应用一个重叠的背景来打破这个边框，使它看起来是右边视图的一部分。

* * *

## ListView 背景

[我使用Emile 在另一个问题中建议](https://stackoverflow.com/a/4313329/780075)`<layer-list>`的可绘制对象实现了正确的边框：

右边框.xml

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item>
        <shape android:shape="rectangle">
            <solid android:color="@color/black" />
        </shape>
    </item>
    <item android:right="2dp">
        <shape android:shape="rectangle">
            <solid android:color="@color/white" />
        </shape>
    </item>

</layer-list> 
```

...这是 ListView 的良好衡量标准：

```
<ListView
    android:id="@+id/msglist"
    android:layout_width="300dp"
    android:layout_height="match_parent"
    android:divider="@color/black"
    android:dividerHeight="1dp"
    android:background="@drawable/rightborder"
    android:paddingRight="0dip">
</ListView>
<!-- I added the android:paddingRight after reading something 
about shape drawables and padding, don't think it actually
did anything. --> 
```

* * *

## 试图用颜色覆盖它

为了达到预期的效果，我在`getView`我的适配器的函数中放置了以下内容：

```
//If it's selected, highlight the background
if(position == mSelectedIndex)
    convertView.setBackgroundColor(R.color.light_gray);

else
    convertView.setBackgroundResource(0); 
```

但是，使用这种方法，可绘制**的黑色边框`ListView`仍然可见，只有背景的白色部分被灰色替换。** 这是一个屏幕截图：

![通过彩色背景显示的边框](../Images/62476b0a4383e8c27b2137624b268e3d.png)

* * *

## 用drawable修复它

凭直觉，我用一个`shape`drawable替换了我分配的颜色：

selectedmessage.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<shape android:shape="rectangle"
    xmlns:android="http://schemas.android.com/apk/res/android" >
    <solid android:color="@color/light_gray" />
</shape> 
```

获取视图片段：

```
//If it's selected, highlight the background
if(position == mSelectedIndex)
    convertView.setBackgroundResource(R.drawable.selectedmessage);

else
    convertView.setBackgroundResource(0); 
```

这样就达到了预期的效果，如下图：

![边框不再显示](../Images/b80c65fcb991a46ff66b8a8af4c81a6d.png)

* * *

## 问题：

为什么为我的`ListView`元素指定一个矩形作为背景会覆盖整个视图，而指定颜色则允许黑色边框显示出来？我很高兴它能正常工作，但我想知道为什么 Android 会以这种方式呈现视图，以便我可以了解更多关于 Android 如何呈现视图的信息。

## 其他注意事项：

*   我正在库存的 Android 3.2 模拟器中运行该项目，如果这有什么不同的话。
*   一个线索可能是`light_gray`颜色背景似乎比`light_gray` `shape`资源更暗。
*   我怀疑它会有所作为，但是`light_gray`：

    `<color name="light_gray">#FFCCCCCC</color>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T22:19:35.733

你不能这样做：

```
 convertView.setBackgroundColor(R.color.light_gray); 
```

setBackgroundColor 不采用资源 id： http: [//developer.android.com/reference/android/view/View.html#setBackgroundColor(int)](http://developer.android.com/reference/android/view/View.html#setBackgroundColor%28int%29)

所以你得到了一些不符合你期望的偶然行为。

你必须这样做：

```
 convertView.setBackgroundColor(getResources().getColor(R.color.light_gray); 
```

[http://developer.android.com/reference/android/content/res/Resources.html#getColor(int)](http://developer.android.com/reference/android/content/res/Resources.html#getColor%28int%29)

# java - 在 JPA 中修改查询结果

> ID：11132427
> 
> 赞同：2
> 
> 时间：2012-06-21T06:06:05.277
> 
> 标签：java, google-app-engine, jpa

```
EntityManager em = EMF.get().createEntityManager();
EntityTransaction tx = null;

List<Profile> list = null;
Query q = null;

try{
    tx = em.getTransaction();
    tx.begin();

    q = em.createNamedQuery("Profile.getRandomProfile");
    q.setParameter("random", Math.random());
    q.setMaxResults(8);
    list = (List<Profile>) q.getResultList();

    if (list != null){
        Collections.shuffle(list);
    }

    tx.commit();

} catch(NoResultException ex){
    System.out.println("ERROR CATCHED: " +ex.getMessage());
    if(tx != null && tx.isActive())
        tx.rollback();
} catch(Exception e){
    e.printStackTrace();
}
finally{
    em.close();
} 
```

洗牌列表有错误：

```
java.lang.UnsupportedOperationException: Query result sets are not modifiable 
```

如何克服这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T06:51:36.577

将结果复制到二级列表并打乱它而不是查询结果列表。

```
ArrayList copyList = new ArrayList();
Collections.copy(copyList,list);
Collections.shuffle(copyList); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-31T15:22:10.030

在行

```
list = (List<Profile>) q.getResultList(); 
```

之后，您应该根据结果创建一个新列表，如下所示：

```
 List<Profile> anotherList= new ArrayList<Profile>(listaOrdenes); 
```

这样，您就有了一个“新”列表，并且您可以对其进行修改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T07:13:28.417

就像另外两个人说的那样，您应该将结果复制到您自己的列表中，因为它们以只读模式返回。另一种可能性是返回的 List 实现不支持 shuffle 调用的操作。您也可以尝试查看要验证的列表类型，但我怀疑情况是否如此。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T06:58:24.737

也许像这样？

```
List<Profile> profiles = null;
List<Profile> results = (List<Profile>) q.getResultList();
if(results != null) {
    profiles = new ArrayList<Profile>();
    profiles.addAll(results);
    Collections.shuffle(profiles);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-29T04:15:59.563

有2个选项：

1）创建新列表（2）在查询中使用 ORDER BY 子句。

Collections.sort(...) 将对您提供的列表进行排序。因此，它将修改列表。但是，您尝试排序的列表是不可修改的。当 Collections.sort(...) 调用列表的方法之一来添加或删除元素时，它会抛出异常。

一种解决方案是从原始列表创建一个新的、可修改的列表，然后对该列表进行排序。

```
// Create a new ArrayList that contains all elements from the list 'identities'
List<Identity> data = new ArrayList<Identity>(identities);

// Sort the new list

Collections.sort(data); 
```

但是，由于您可能是使用 JPA 查询从数据库中获取列表，因此最好将数据库查询更改为包含**“order by”子句**，让数据库进行排序。那时您不需要在 Java 代码中进行排序。

# javascript - 为单元测试安装 Google js 测试

> ID：11132430
> 
> 赞同：3
> 
> 时间：2012-06-21T06:06:11.487
> 
> 标签：javascript, unit-testing, v8

我目前正在研究 JavaScript 并想为 JavaScript 设计单元测试我正在使用 google-JS-Test

[http://code.google.com/p/google-js-test/](http://code.google.com/p/google-js-test/)

我已经下载**了 gjstest-1.0.7**

我已经安装了所有需要的先决条件。

[http://code.google.com/p/google-js-test/wiki/Installing#Prerequisites](http://code.google.com/p/google-js-test/wiki/Installing#Prerequisites)

但是当我使用安装 google js 测试时

```
$ cd gjstest-1.0.7 
$ make 
```

我收到以下错误

```
g++ -DHASH_NAMESPACE=__gnu_cxx -lrt -I. -I/usr/include/libxml2 -DDEFAULT_DATA_DIR=/usr/local/share/gjstest  -c -o gjstest/internal/cpp/v8_utils.o gjstest/internal/cpp/v8_utils.cc
gjstest/internal/cpp/v8_utils.cc:33: error: ‘v8::StackFrame’ has not been declared
gjstest/internal/cpp/v8_utils.cc:34: error: ‘v8::StackTrace’ has not been declared
gjstest/internal/cpp/v8_utils.cc: In function ‘void gjstest::ConvertToStringVector(const v8::Handle<v8::Value>&, std::vector<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::allocator<std::basic_string<char, std::char_traits<char>, std::allocator<char> > > >*)’:
gjstest/internal/cpp/v8_utils.cc:60: error: no matching function for call to ‘v8::Array::Get(uint32&)’
/usr/include/v8.h:1161: note: candidates are: v8::Local<v8::Value> v8::Object::Get(v8::Handle<v8::Value>)
make: *** [gjstest/internal/cpp/v8_utils.o] Error 1 
```

好像 v8 没有正确安装

我已经使用类似的命令安装了 V8

```
sudo apt-get install libv8-2.0.3 
sudo apt-get install libv8-dbg 
sudo apt-get install libv8-dev 
```

也可以通过下载

```
svn checkout http://v8.googlecode.com/svn/trunk/ v8
cd v8
make dependencies
scons 
```

但仍然收到这些错误

因此，如果有人安装和使用过 Google Js 或安装了 v8，请指导我如何解决这个问题。

我正在使用 Ubuntu 10.04。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T20:08:53.823

这确实是由于尝试针对非常旧版本的 libv8 构建 gjstest 造成的。

[我按照此处](http://code.google.com/p/v8/wiki/BuildingWithGYP)的说明检查并在 ubuntu 10.04 上构建了一个更新的 libv8 ：

```
svn checkout http://v8.googlecode.com/svn/trunk/ v8
cd v8
make depdendencies
make native library=shared
cp out/native/lib.target/libv8.so /usr/local/lib/libv8.so
cp include/v8.h /usr/local/include/v8.h
cp include/v8stdint.h /usr/local/include/v8stdint.h 
```

之后 gjstest 编译并运行，没有进一步的惊喜。

# sql - 根据sql xml中的父xml检索嵌套的父子xml

> ID：11132436
> 
> 赞同：2
> 
> 时间：2012-06-21T06:06:50.500
> 
> 标签：sql, xml, sqlxml

[我在SQL XML](http://en.wikipedia.org/wiki/SQL/XML)中有以下代码。我需要将父元素插入到 SQL XML 中的父元素中。

我有下表。

```
Firstname   Lastname    class   mark
John        Lim          V      60
Wills       smith        V      80
Mark        Bay          V      75
Carl        mark         V      65 
```

这是我的 SQL XML 语句

```
 Select 
  Firstname,
  Lastname,
  class,
  mark
  from Student for xml path('Students'), type 
```

结果如下

```
<Students>
  <Firstname>John</Firstname>
  <Lastname>Lim</Lastname>
  <class>V</class>
  <mark>60</mark>
</Students>
<Students>
  <Firstname>Wills</Firstname>
  <Lastname>smith</Lastname>
  <class>V</class>
  <mark>80</mark>
</Students>
<Students>
  <Firstname>Mark</Firstname>
  <Lastname>Bay</Lastname>
  <class>V</class>
  <mark>75</mark>
</Students>
<Students>
  <Firstname>Carl</Firstname>
  <Lastname>mark</Lastname>
  <class>V</class>
  <mark>65</mark>
</Students> 
```

我希望以下结果是类和标记标记包含在另一个标记中：

```
 <Students>
  <Firstname>John</Firstname>
  <Lastname>Lim</Lastname>
  <Details>
    <class>V</class>
    <mark>60</mark>
  </Details>  
</Students>
<Students>
  <Firstname>Wills</Firstname>
  <Lastname>smith</Lastname>
  <Details>
    <class>V</class>
    <mark>80</mark>
  </Details>
</Students>
<Students>
  <Firstname>Mark</Firstname>
  <Lastname>Bay</Lastname>
  <Details>
    <class>V</class>
    <mark>75</mark>
  </Details>
</Students>
<Students>
  <Firstname>Carl</Firstname>
  <Lastname>mark</Lastname>
  <Details>
    <class>V</class>
    <mark>65</mark>
  </Details>
</Students> 
```

知道如何去做吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T07:38:00.503

您可以使用列别名。

```
select Firstname,
       Lastname,
       class as "Details/class",
       mark as "Details/mark"
from Student
for xml path('Students'), type 
```

# jquery - 通过代码控制页面大小和要打印的份数

> ID：11132437
> 
> 赞同：2
> 
> 时间：2012-06-21T06:06:53.387
> 
> 标签：jquery, html, activex

我可以在 window.print() 或通过其他方式控制我的页面大小和要打印的副本数量吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T17:52:15.973

您不能直接使用 html 执行此操作，只需创建一个 activex 插件并将其设置为

# android - 带有按日期排序的节标题的光标适配器

> ID：11132440
> 
> 赞同：1
> 
> 时间：2012-06-21T06:06:58.257
> 
> 标签：android, android-listview, android-cursor

[我基本上按照本](http://eshyu.wordpress.com/2010/08/15/cursoradapter-with-alphabet-indexed-section-headers/)教程制作了一个带有字母索引部分标题的列表视图。我正在尝试制作相同的内容，并按日期排序。

这就是我在数据库中的日期列的输入方式。 `String currentDateTime = DateFormat.getDateTimeInstance().format(new Date());`

**有人可以帮我提供按日期排序的指针或片段吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T06:18:06.797

我知道的唯一方法是使用`java.util.Date`. 它几乎只不过是一个长值的包装器，对应于它所代表的时间和纪元之间的差异`Jan 1, 1970 00:00:00 GMT`。因此，您可以将 long 存储在 DB 中（而不是字符串），然后在查询表时按“日期”（long）对结果进行排序，从这些值中构造日期。这一切都是因为 sqlite 不支持日期格式。

像这样的东西：

```
Cursor c = db.rawQuery("select * from table sort by table_column_date");
for(c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
     Date date = new Date(c.getLong("table_column_date"));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-02T13:06:07.247

一个简单的方法是使用[adapter-kit](https://github.com/mobsandgeeks/adapter-kit)库

首先，实现一个 DateSectionizer。它从您的模型中加载日期时间戳并将其“四舍五入”到这一天的开始，因此同一天的时间戳将具有相同的格式化日期字符串。

```
public class DateSectionizer implements Sectionizer<Cursor>
{
   private static final SimpleDateFormat YMD_FORMAT = new SimpleDateFormat("yyyy-MMMMM-dd");

   private static long beginning_of_day(long timestamp)
   {
      Calendar c = Calendar.getInstance();
      c.setTimeInMillis( timestamp  );
      c.set( Calendar.HOUR_OF_DAY, 0 );
      c.set( Calendar.MINUTE, 0 );
      c.set( Calendar.SECOND, 0 );
      c.set(Calendar.MILLISECOND,0 );
      return c.getTimeInMillis();
   }

   @Override
   public String getSectionTitleForItem( Cursor cursor )
   {
      return YMD_FORMAT.format(new Date(beginning_of_day(cursor.getLong( 2 ));
   }
} 
```

其次，将 SimpleSectionAdapter 包裹在现有的 CursorAdapter 周围：

```
 Context c = getApplicationContext();

 YourCursorAdapter yca = new YourCursorAdaper(c , your_cursor, true);
 your_list_view.setAdapter( new SimpleSectionAdapter<Cursor>(c,yca, R.layout.header_layout, R.id.date , new DateSectionizer() )); 
```

# spring - grails服务中嵌套事务可能出现死锁

> ID：11132444
> 
> 赞同：4
> 
> 时间：2012-06-21T06:07:21.030
> 
> 标签：spring, hibernate, grails, transactions

我有一个事务性 grails 服务正在执行一些（长时间运行）处理。在处理时，我想更新一个“percentComplete”值（最终将用于在前端显示进度条）。这显然必须立即写入（即不作为当前事务的一部分），否则它没有任何价值。

因此，我使用[Grails 事务处理插件](http://grails.org/plugin/transaction-handling)，特别是“withNewTransaction”方法来启动一个新事务，其中更新了 percentComplete 属性。

我的问题是，第二次进入“updatePercentComplete()”方法时，应用程序在尝试退出“withNewTransaction”方法时挂起（大概是在尝试提交事务时）。

笔记：

*   如果我在主服务方法中注释掉会话刷新，则没有问题（顺便说一句，在我的实际应用程序中出于性能原因需要此刷新以及清除）
*   使用 hsql 数据库，没有问题（参见 DataSources.groovy）。
*   也使用 grails 执行器插件，但我认为这本身不会导致任何问题（请参阅 LibraryServiceTests，它也挂起并绕过插件）。

**我应该去哪里调试这个问题？也许我可以在 grails/hibernate 中设置一些日志级别以查明发生了什么？**

执行这项工作的线程似乎在尝试从套接字读取时卡住了，请参阅下面的堆栈跟踪。JVM 本身似乎没有任何实际的死锁。

这是我的服务类，下面是完整项目的链接：

```
package withtransactiontest

class LibraryService {

    static transactional = true

    def sessionFactory

    def loadBooks(library) {

        int repeat = 5
        repeat.times {
            updatePercentComplete(library, it * (100 / repeat))

            // Simulate some long running process in order to be able to see percentComplete getting written to DB.
            Thread.sleep(2000)

            // Update some property (within the default transaction)
            library.name += "x"
            library.save()

            // Comment out the following, and the current method will complete successfully.
            def session = sessionFactory?.currentSession
            session?.flush()
        }

        library.percentComplete = 100
        library.save()
    }

    void updatePercentComplete(library, val) {

        println "before new transaction"
        Library.withNewTransaction {

            println "Percent complete: " + val
            library.refresh()
            library.percentComplete = val
            library.save()

            println "after save"

            // Hang here, second time around.
        }

        println "Percent complete transaction committed"
        library.refresh()
    }
} 
```

[链接到带有重新创建问题的集成测试用例的 grails 项目](http://dl.dropbox.com/u/31611964/WithTransactionTest.zip)

“worker”线程的堆栈跟踪：

线程 [pool-1-thread-1] (Suspended)
SocketInputStream.socketRead0(FileDescriptor, byte[], int, int, int) 行：不可用 [native method]
SocketInputStream.read(byte[], int, int) 行: 129
ReadAheadInputStream.fill(int) line: 114
ReadAheadInputStream.readFromUnderlyingStreamIfNecessary(byte[], int, int) line: 161
ReadAheadInputStream.read(byte[], int, int) line: 189
MysqlIO.readFully(InputStream, byte[] , int, int) line: 2499 MysqlIO.reuseAndReadPacket(Buffer, int) line: 2952
MysqlIO.reuseAndReadPacket(Buffer) line: 2941
MysqlIO.checkErrorPacket(int) line: 3489
MysqlIO.sendCommand(int, String, Buffer, boolean, String , int) 行：1959
MysqlIO.sqlQueryDirect(StatementImpl, String, String, Buffer, int, int, int, boolean, String, Field[]) line: 2113
JDBC4Connection(ConnectionImpl).execSQL(StatementImpl, String, int, Buffer, int, int, boolean, String, Field[], boolean) line: 2568 JDBC4PreparedStatement(PreparedStatement).executeInternal(int, Buffer, boolean, boolean, Field[], boolean) line: 2113
JDBC4PreparedStatement(PreparedStatement).executeUpdate(byte[][], InputStream[ ], boolean[], int[], boolean[], boolean) line: 2409
JDBC4PreparedStatement(PreparedStatement).executeUpdate(boolean, boolean) line: 2327
JDBC4PreparedStatement(PreparedStatement).executeUpdate() line: 2312
DelegatingPreparedStatement.executeUpdate() line : 105
DelegatingPreparedStatement.executeUpdate() line: 105
GroovyAwareSingleTableEntityPersister(AbstractEntityPersister).update(Serializable, Object[], Object[], Object, boolean[], int, Object, Object, String, SessionImplementor) line: 2435
GroovyAwareSingleTableEntityPersister(AbstractEntityPersister).updateOrInsert (Serializable, Object[], Object[], Object, boolean[], int, Object, Object, String, SessionImplementor) line: 2335
GroovyAwareSingleTableEntityPersister(AbstractEntityPersister).update(Serializable, Object[], int[], boolean, Object []，对象，对象，对象，SessionImplementor) 行：2635
EntityUpdateAction.execute() 行：115
ActionQueue.execute(Executable) 行：279
ActionQueue.executeActions(List) 行：263
ActionQueue.executeActions() 行：168
PatchedDefaultFlushEventListener.performExecutions(EventSource) 行：46
PatchedDefaultFlushEventListener(DefaultFlushEventListener).onFlush(FlushEvent) 行：50
SessionImpl.flush() 行：1027
SessionImpl.managedFlush() 行：365
JDBCTransaction.commit()行：137
GrailsHibernateTransactionManager(HibernateTransactionManager).doCommit(DefaultTransactionStatus) 行：656 GrailsHibernateTransactionManager(AbstractPlatformTransactionManager).processCommit(DefaultTransactionStatus) 行：754 GrailsHibernateTransactionManager(AbstractPlatformTransactionManager).commit(TransactionStatus) 行：723
TransactionTemplate.execute(TransactionCallback)行：
NativeMethodAccessorImpl.invoke0(Method, Object, Object[]) line: not available [native method]
NativeMethodAccessorImpl.invoke(Object, Object[]) line: 39
DelegatingMethodAccessorImpl.invoke(Object, Object[]) line: 25
Method.invoke(对象，对象...) 行：597
PojoMetaMethodSite$PojoCachedMethodSite.invoke(Object, Object[]) 行：188
PojoMetaMethodSite$PojoCachedMethodSite(PojoMetaMethodSite).call(Object, Object[]) 行：52 PojoMetaMethodSite$PojoCachedMethodSite(AbstractCallSite)。 call(Object, Object) line: 124
GroovyDynamicMethods$_doWith_closure1.doCall(Map, Map, Closure) line: 55
NativeMethodAccessorImpl.invoke0(Method, Object, Object[]) line: not available [native method]
NativeMethodAccessorImpl.invoke(Object, Object[]) line: 39
DelegatingMethodAccessorImpl.invoke(Object, Object[]) line: 25
Method.invoke(Object, Object...) line: 597
PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(Object, Object[ ]) 行：266
PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce(PogoMetaMethodSite).callCurrent(GroovyObject, Object[]) 行：51
PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce(AbstractCallSite).callCurrent(GroovyObject, Object, Object, Object) 行：157
GroovyDynamicMethods$_doWith_closure1.call(Map , Map, Closure) line: 不可用
NativeMethodAccessorImpl.invoke0(Method, Object, Object[]) line: 不可用 [native method]
NativeMethodAccessorImpl.invoke(Object, Object[]) line: 39
DelegatingMethodAccessorImpl.invoke(Object, Object[]) line: 25
Method.invoke(Object, Object...) line: 597
PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(Object, Object[ ]) 行：266
PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce(PogoMetaMethodSite).call(Object, Object[]) 行：63 PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce(AbstractCallSite).call(Object, Object, Object, Object) 行：132
GroovyDynamicMethods$_doWith_closure3.doCall(Map , Closure) line: 65 NativeMethodAccessorImpl.invoke0(Method, Object, Object[]) line: not available [native method]
NativeMethodAccessorImpl.invoke(Object, Object[]) line: 39
DelegatingMethodAccessorImpl.invoke(Object, Object[]) line: 25
Method.invoke(Object, Object...) line: 597
PogoMetaMethodSite$PogoCachedMethodSite.invoke(Object, Object[]) line: 225
PogoMetaMethodSite$PogoCachedMethodSite(PogoMetaMethodSite).callCurrent (GroovyObject, Object[]) line: 51
PogoMetaMethodSite$PogoCachedMethodSite(AbstractCallSite).callCurrent(GroovyObject, Object, Object) line: 153
GroovyDynamicMethods$_doWith_closure3.doCall(Closure) line: 不可用
NativeMethodAccessorImpl.invoke0(Method, Object, Object[ ]) 行：不可用 [本机方法]
NativeMethodAccessorImpl.invoke(Object, Object[]) 行：39
DelegatingMethodAccessorImpl.invoke(Object, Object[]) 行：25
Method.invoke(Object, Object...) line: 597
CachedMethod.invoke(Object, Object[]) line: 90
CachedMethod(MetaMethod).doMethodInvoke(Object, Object[]) line: 233 ExpandoMetaClass(MetaClassImpl).invokeMethod( Class, Object, String, Object[], boolean, boolean) line: 1058
ExpandoMetaClass.invokeMethod(Class, Object, String, Object[], boolean, boolean) line: 1070 ExpandoMetaClass(MetaClassImpl).invokeMethod(Object, String, Object []) 行：886
GroovyDynamicMethods$_doWith_closure3(Closure).call(Object[]) 行：282 ClosureStaticMetaMethod.invoke(Object, Object[]) 行：59
StaticMetaMethodSite$StaticMetaMethodSiteNoUnwrapNoCoerce.invoke(Object, Object[]) 行：148
StaticMetaMethodSite$StaticMetaMethodSiteNoUnwrapNoCoerce(StaticMetaMethodSite).call(Object, Object[]) 行：88 StaticMetaMethodSite$StaticMetaMethodSiteNoUnwrapNoCoerce(AbstractCallSite).call(Object, Object) 行：124
LibraryService.updatePercentComplete(Object, Object) 行：34
NativeMethodAccessorImpl.invoke0(Method , Object, Object[]) line: not available [native method]
NativeMethodAccessorImpl.invoke(Object, Object[]) line: 39
DelegatingMethodAccessorImpl.invoke(Object, Object[]) line: 25
Method.invoke(Object, Object.. .) 行：597
CachedMethod.invoke(Object, Object[]) 行：90
CachedMethod(MetaMethod).doMethodInvoke(Object, Object[]) line: 233 ExpandoMetaClass(MetaClassImpl).invokeMethod(Class, Object, String, Object[], boolean, boolean) line: 1058
ExpandoMetaClass.invokeMethod(Class, Object, String, Object[], boolean, boolean) line: 1070 ExpandoMetaClass(MetaClassImpl).invokeMethod(Object, String, Object[]) line: 886
ExpandoMetaClass(MetaClassImpl).invokeMethod(Class, Object, String, Object[], boolean, boolean)行：1003
ExpandoMetaClass.invokeMethod(Class, Object, String, Object[], boolean, boolean) 行：1070 ExpandoMetaClass(MetaClassImpl).invokeMethod(Object, String, Object[]) 行：886
PogoMetaClassSite.callCurrent(GroovyObject, Object[ ]) 行：66
PogoMetaClassSite(AbstractCallSite).callCurrent(GroovyObject, Object, Object) line: 153 LibraryService$_loadBooks_closure1.doCall(Object) line: 13
NativeMethodAccessorImpl.invoke0(Method, Object, Object[]) line: not available [native method]
NativeMethodAccessorImpl.invoke (Object, Object[]) line: 39
DelegatingMethodAccessorImpl.invoke(Object, Object[]) line: 25
Method.invoke(Object, Object...) line: 597
CachedMethod.invoke(Object, Object[]) line: 90
CachedMethod(MetaMethod).doMethodInvoke(Object, Object[]) line: 233 ExpandoMetaClass(MetaClassImpl).invokeMethod(Class, Object, String, Object[], boolean, boolean) line: 1058
ExpandoMetaClass.invokeMethod(Class, Object, String, Object[], boolean, boolean) line: 1070 ExpandoMetaClass(MetaClassImpl).invokeMethod(Object, String, Object[]) line: 886
LibraryService$_loadBooks_closure1(Closure).call(Object[ ]) 行：282
LibraryService$_loadBooks_closure1(Closure).call(Object) 行：295
DefaultGroovyMethods.times(Number, Closure) 行：9487
dgm$630.invoke(Object, Object[]) 行：不可用
PojoMetaMethodSite$PojoMetaMethodSiteNoUnwrapNoCoerce.invoke (Object, Object[]) 行：270
PojoMetaMethodSite$PojoMetaMethodSiteNoUnwrapNoCoerce(PojoMetaMethodSite).call(Object, Object[]) 行：52
PojoMetaMethodSite$PojoMetaMethodSiteNoUnwrapNoCoerce(AbstractCallSite).call(Object, Object) 行：124
LibraryService.loadBooks(Object) 行：12
LibraryService$$FastClassByCGLIB$$f97d911e.invoke(int, Object, Object[]) 行：不可用
MethodProxy.invoke(Object, Object[]) 行：149
Cglib2AopProxy$CglibMethodInvocation.invokeJoinpoint( ) 行：688
Cglib2AopProxy$CglibMethodInvocation(ReflectiveMethodInvocation).proceed() 行：150
TransactionInterceptor.invoke(MethodInvocation) 行：110
Cglib2AopProxy$CglibMethodInvocation(ReflectiveMethodInvocation).proceed() 行：172
Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Object, Method, Object[], MethodProxy) 行：621 LibraryService$$EnhancerByCGLIB$$c098c6ba.loadBooks(Object) 行：不可用 LibraryService$loadBooks.call(Object, Object) 行：不可用
LibraryController $_closure4_closure9.doCall(Object) line: 30
NativeMethodAccessorImpl.invoke0(Method, Object, Object[]) line: not available [native method]
NativeMethodAccessorImpl.invoke(Object, Object[]) line: 39
DelegatingMethodAccessorImpl.invoke(Object, Object []) 行：25
Method.invoke(Object, Object...) 行：597
PogoMetaMethodSite$PogoCachedMethodSite.invoke(Object, Object[]) 行：225
PogoMetaMethodSite$PogoCachedMethodSite(PogoMetaMethodSite).callCurrent(GroovyObject, Object[]) 行：51
PogoMetaMethodSite$PogoCachedMethodSite(AbstractCallSite).callCurrent(GroovyObject, Object) 行：149
LibraryController$_closure4_closure9.doCall() 行：不可用
NativeMethodAccessorImpl.invoke0(Method , Object, Object[]) line: not available [native method]
NativeMethodAccessorImpl.invoke(Object, Object[]) line: 39
DelegatingMethodAccessorImpl.invoke(Object, Object[]) line: 25
Method.invoke(Object, Object.. .) 行：597
CachedMethod.invoke(Object, Object[]) 行：90
CachedMethod(MetaMethod).doMethodInvoke(Object, Object[]) line: 233 ExpandoMetaClass(MetaClassImpl).invokeMethod(Class, Object, String, Object[], boolean, boolean) line: 1058
ExpandoMetaClass.invokeMethod(Class, Object, String, Object[], boolean, boolean) line: 1070 ExpandoMetaClass(MetaClassImpl).invokeMethod(Object, String, Object[]) line: 886
LibraryController$_closure4_closure9(Closure).call(Object[]) line: 282
ConvertedClosure.invokeCustom(Object , Method, Object[]) line: 51
ConvertedClosure(ConversionHandler).invoke(Object, Method, Object[]) line: 82
$Proxy6.call() line: 不可用
java_util_concurrent_Callable$call.call(Object) 行：不可用 PersistenceContextCallableWrapper$_call_closure1.doCall(Object) 行：36
NativeMethodAccessorImpl.invoke0(Method, Object, Object[]) 行：不可用 [本机方法]
NativeMethodAccessorImpl.invoke(Object, Object []) 行：39
DelegatingMethodAccessorImpl.invoke(Object, Object[]) 行：25
Method.invoke(Object, Object...) 行：597
PogoMetaMethodSite$PogoCachedMethodSite.invoke(Object, Object[]) 行：225
PogoMetaMethodSite$ PogoCachedMethodSite(PogoMetaMethodSite).callCurrent(GroovyObject, Object[]) 行：51
PogoMetaMethodSite$PogoCachedMethodSite(AbstractCallSite).callCurrent(GroovyObject, Object) 行：149
PersistenceContextCallableWrapper$_call_closure1.doCall() line: 不可用
NativeMethodAccessorImpl.invoke0(Method, Object, Object[]) line: 不可用 [native Method]
NativeMethodAccessorImpl.invoke(Object, Object[]) line: 39
DelegatingMethodAccessorImpl.invoke(Object, Object[]) 行：25
Method.invoke(Object, Object...) 行：597
CachedMethod.invoke(Object, Object[]) 行：90
CachedMethod(MetaMethod).doMethodInvoke(Object, Object[]) 行：233 ExpandoMetaClass(MetaClassImpl).invokeMethod(Class, Object, String, Object[], boolean, boolean) 行：1058
ExpandoMetaClass.invokeMethod(Class, Object, String, Object[], boolean, boolean) line: 1070 ExpandoMetaClass(MetaClassImpl).invokeMethod(Object, String, Object[]) line: 886
PersistenceContextCallableWrapper$_call_closure1(Closure).call(Object[ ]) 行：282
PersistenceContextCallableWrapper$_call_closure1(Closure).call() 行：277
Closure$call.call(Object) 行：不可用
PersistenceContextCallableWrapper(PersistenceContextWrapper).wrap(Closure) 行：35
NativeMethodAccessorImpl.invoke0（方法，对象， Object[]) line: not available [native method]
NativeMethodAccessorImpl.invoke(Object, Object[]) line: 39
DelegatingMethodAccessorImpl.invoke(Object, Object[]) line: 25
Method.invoke(Object, Object...) 行：597
PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(Object, Object[]) 行：266
PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce(PogoMetaMethodSite).callCurrent(GroovyObject, Object[]) 行：51
PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce (AbstractCallSite).callCurrent(GroovyObject, Object) 行：149
PersistenceContextCallableWrapper.call() 行：36
FutureTask$Sync.innerRun() 行：303
FutureTask.run() 行：138
ThreadPoolExecutor$Worker.runTask(Runnable) 行：886
ThreadPoolExecutor$Worker.run() 行：908
Thread.run() 行：680

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T06:08:32.307

解决方法是引入一个新的域类`Progress`，它具有属性`percentComplete`和`belongsTo`库。这是在新的（嵌套的）事务中更新的，而不是在`Library`实例本身中更新。

# yahoo-api - 关于雅虎天气状况说明

> ID：11132445
> 
> 赞同：1
> 
> 时间：2012-06-21T06:07:34.433
> 
> 标签：yahoo-api, yahoo-weather-api

我使用 yahoo weather api 在 iPhone 中构建一个通知应用程序。

我每天记录api数据，发现了一个有趣的事情。

某些天气情况的描述与 api 列表不同。

比如今天的天气描述是：雷雨晚了

但是在[http://developer.yahoo.com/weather/](http://developer.yahoo.com/weather/)你找不到“Thunderstorms Late”。

因为我要把天气描述翻译成中文所以我需要所有条件的描述。

此外，在 api 列表中也找不到当前状态的描述。

我怀疑是否有另一个雅虎天气的 api 列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T01:10:51.240

没有其他 API 调用可以仅获取条件列表。我的建议是翻译文档页面上列出的条件（代码 0-47）。在（希望很少见）获得不在列表中的条件的情况下，您可以通过编程方式捕获这些条件并随着时间的推移添加翻译。

# android - 在android中的构建时从生产构建中过滤语言环境

> ID：11132446
> 
> 赞同：0
> 
> 时间：2012-06-21T06:07:42.187
> 
> 标签：android, internationalization, locale, android-build, build-settings

是否有记录的方式可以在构建 android 应用程序时过滤掉支持的语言环境？例如，如果我有一个仅部分构建支持的语言环境，我想将其包含在调试构建中，但将其从我的发布构建中排除，是否有我可以使用的配置设置来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T18:37:36.683

嗯，很难，您可以查询区域设置并更改它，如果它设置为您不喜欢的区域设置，则使用此 api：

[http://developer.android.com/reference/java/util/Locale.html#setDefault(java.util.Locale)](http://developer.android.com/reference/java/util/Locale.html#setDefault%28java.util.Locale%29)

然后，如果您希望在您的开发版本中而不是在您的实时版本中使用它，那么您在构建 APK 时将需要不同的配置。这将涉及使用 Ant。

为此，您必须阅读：

[使用常量和 Ant 切换 Android 配置](http://blog.blundell-apps.com/switching-android-configurations-using-constants-and-ant/)

或者，您可以使用上述样式的 ant 脚本配置，并使用空文件夹覆盖区域设置文件夹以进行实时构建，这将是一个有趣的实验。

# android - 实现水平进度条

> ID：11132447
> 
> 赞同：0
> 
> 时间：2012-06-21T06:07:44.710
> 
> 标签：android, progress-bar

我正在尝试实现水平进度条。但我不明白如何在我的班级中实现它。现在我已经实现了 sphener 格式的对话框，但我希望它以水平格式显示我的活动进度那时下载一些内容应该会显示进度。

我的代码是

```
 public class Loginwebview extends Activity {
                WebView webview;
                String url1;
                Bundle bundle=null;
                private ProgressDialog progressDialog;
                public void onCreate(Bundle savedInstanceState) {
                    super.onCreate(savedInstanceState);
                    setContentView(R.layout.weblogin);
                    webview = (WebView) findViewById(R.id.webview);
                    webview.getSettings().setJavaScriptEnabled(true);       
                    bundle = new Bundle();
                    webview.setWebViewClient(new WebViewClient() 
                    {
                        public boolean shouldOverrideUrlLoading(WebView view, String url) {
                            view.loadUrl(url);
                            url1=url.toString();                
                            bundle.putString("parameter", url1);
                            progressDialog = ProgressDialog.show(Loginwebview.this, "", "Loading...");
                            new Thread() {
                                public void run() {
                                    try{        
                                        if(url1.contains("&mydownloads=true"))  
                                        {
                                            if(url1.contains(".zip"))
                                            {   
                                                sleep(150000);
                                                Intent i1 = new Intent(Loginwebview.this, DownloadZipActivity.class);
                                                i1.putExtras(bundle);
                                                startActivityForResult(i1,0);
                                            }
                                            else 
                                            {
                                                sleep(40000);
                                                Intent i2 = new Intent(Loginwebview.this, DownloadOther.class);
                                                i2.putExtras(bundle);
                                                startActivityForResult(i2, 0);
                                            }

                                        }
                                        else if(url1.contains("mydownloads=true"))
                                        {   
                                            Log.d("its in Mydownloadssss",url1.toString());
                                            Intent i3=new Intent(Loginwebview.this,Downloadlist.class);
                                            i3.putExtras(bundle);
                                            startActivityForResult(i3, 0);
                                        }

                                    }
                                    catch(Exception e)
                                    {

                                    }
                                    progressDialog.dismiss();
                                }
                            }.start();  
                            return true;
                        }    
                        public void onPageFinished(WebView view, String url1) {
                            Log.i("inside onpage", "Finished loading URL: " +url1);
                            String mainurl=url1;
                        }
                        public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {
                            Log.e("onReceivedError", "Error: " + description);

                        }
                    });
                    webview.loadUrl("http://xxx/PublicModules/UserLoginVerify.aspx?userid=809&deviceid=DA0CE50D-0EEB-5E8E-9DCA-AED00F9BDFE5");
                }
            } 
```

# php - 如何在地址栏中隐藏 GET 变量

> ID：11132448
> 
> 赞同：-3
> 
> 时间：2012-06-21T06:07:47.830
> 
> 标签：php

> **可能重复：**
> [如何从 PHP 脚本中更改 URL 的外观](https://stackoverflow.com/questions/8392965/how-to-change-appearance-of-url-from-within-a-php-script)

我的地址栏中有这个

> 本地主机/somedirectory/main.php?id=123456

如何隐藏那些 GET 变量，所以它变成

> 本地主机/somedirectory/main/123456

我知道 .htaccess 是答案，但到目前为止我的尝试都无济于事。有人可以说明如何实现它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T06:10:51.767

没有办法以你想要的方式用 PHP 做到这一点！

只有 htaccess 可以帮助完成这项任务。

```
RewriteEngine on 
RewriteBase    /
RewriteRule ^localhost/([^/]*)/([^/]*)/([^/]*)$    localhost/$1/$2.php?id=$3 
```

# grails - 关闭类的每个对象

> ID：11132449
> 
> 赞同：0
> 
> 时间：2012-06-21T06:07:55.537
> 
> 标签：grails, closures

我试图在一个类的每个对象上调用一个闭包，然后显示闭包返回的对象。关闭是：

```
 def activitiesPlanned={
        cal.set(this.plannedStartDate)
        def planDateMonth=cal.get(Calendar.MONTH)
        def planDateYear=cal.get(Calendar.YEAR)
    } 
```

我打的电话是：

```
 def getActivitiesPlanned(int month,int year){
       countActivitiesPlanned=ProgressData.each{it.activitiesPlanned.findAllWhere(planDateMonth:month,planDateYear:year).count()}
    println countActivitiesPlanned
} 
```

域类 //EDIT

```
package main
class ProgressData {
//String milestoneName
String taskId   //Added later
String taskDescription
String taskCategory
Integer plannedHours  
Integer actualHours      
Date plannedStartDate     
Date actualStartDate     
Date plannedEndDate     
Date actualEndDate     
Integer stepsCreated=0    
Integer stepsExecuted=0   
String status   //Originally Completed
String assignedTo
//String unplanned
String accepted //Added later
def ProgressData(){}

static constraints = {
   //milestoneName(blank:false)
   taskDescription(blank:false)
   taskCategory(blank:false)
   plannedHours(blank:false)
   actualHours(blank:false)
   id generator:"assigned",name:"taskId"
}

 Calendar cal=Calendar.getInstance()
 def activitiesPlanned={
        cal.set(this.plannedStartDate)
        def planDateMonth=cal.get(Calendar.MONTH)
        def planDateYear=cal.get(Calendar.YEAR)
    }
static hasMany=[defects:DefectData] 
```

}

我得到：“没有这样的属性：activityPlanned for class：main.ProgressData 可能的解决方案：activityPlanned”。可能有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T18:54:55.580

我认为你不想要 .each{} 而不是 .sum{}

例子：

```
def listThing = [1,2,3]
def sumOfList = listThing.sum{it}
assert sumOfList == 6 
```

ProgressData 也是一个域类，所以你不能`.each{}`在它上面使用。你必须这样做`ProgressData.list().each{`，我的意思`ProgressData.list().sum{`是我认为你正在尝试做的事情。

此外，activityPlanned 关闭不会返回任何活动......

# ruby-on-rails-3 - 字符串和数字分隔

> ID：11132452
> 
> 赞同：0
> 
> 时间：2012-06-21T06:08:18.817
> 
> 标签：ruby-on-rails-3

我确实从表格中发布了电话号码

```
def update_phone
  if params[:phone]
  #here I want to check weather params[:phone] is number or string 
end 
```

我确实使用`params[:phone].class`它总是显示字符串类。我怎样才能找到字符串或整数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T07:25:14.223

在 Ruby 中，您通常不会对类型进行操作，而是对变量的行为进行操作。如果您想检查那`params[:phone]`是有效的电话号码，请使用正则表达式，即：

```
phone = params[:phone] if params[:phone] =~ /\A\(?\d{3}\)?-?\d{3}-?\d{3}\Z/ 
```

但更好的选择是在模型中的验证器中检查这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T07:25:42.973

您应该在模型中使用一些[验证器](http://guides.rubyonrails.org/active_record_validations_callbacks.html)并结合电话号码的正则表达式：根据您所在国家/地区的电话号码系统，只允许使用数字和一些格式字符，例如`+-./()`和空格：`+23 (0) 322/242324-12`或者`234.1432.123`都是有效数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T06:50:25.750

已编辑，感谢您的评论。我认为这适用于最常见的情况。但是，这不适用于前导零：

```
str = params[:phone]

#it is numeric if the following is true:
str.to_f.to_s == str || str.to_i.to_s == str 
```

# javascript - 使用 IMG 地图显示更大的图像

> ID：11132457
> 
> 赞同：0
> 
> 时间：2012-06-21T06:08:48.907
> 
> 标签：javascript, jquery, html, css, imagemap

我正在使用包含许多小图片的 IMG 地图。当我将鼠标悬停在每个图像上时，它将显示一个更大的图像。我该怎么做呢？我不介意使用 javascript、css 等，只要它有效。请举个例子。

**IMG 地图的 HTML**

```
<img src="img.jpg" alt="Main Photo - Please View With Images On"
usemap="#Map" class="center" style="width:900px;" border="0" />
<map name="Map" id="Map">
 <area class="1" shape="rect" coords="4,3,225,150" />
 <area class="2" shape="rect" coords="2,152,221,303" />
 <area class="3" shape="rect" coords="3,303,221,452"  />
</map> 
```

每个类都有不同的图像以显示更大。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T11:23:31.420

这是使用[ImageMapster](http://www.outsharked.com/imagemapster)的一种方法：

[http://jsfiddle.net/zSBL5/](http://jsfiddle.net/zSBL5/)

要使用其内置的工具提示 API 进行这项工作，您需要做几件事。首先为每个区域添加一个属性，如下所示：

```
<area data-key="2,all"  shape="rect" coords="0,90,82,170" 
    href="http://www.shelterness.com/pictures/amazing-diy-photo-tiles-1-500x373.jpg" /> 
```

注意`data-key`。这是 ImageMapster 的“mapKey”。对于您的情况，我们需要它的唯一原因是创建一个名为“all”的区域组，可用于为每个区域显示相同的工具提示。每个区域都将具有这样的属性，但具有不同的数字，例如`data-key="3,all"`、`data-key="4,all"`等。

然后是绑定imagemapster的代码：

```
$('img').mapster({
    toolTipContainer: $('#tooltip-container'),
    mapKey: 'data-key',
    areas: [ {
        key: 'all',
        toolTip: true
    }],
    showToolTip: true,
    onShowToolTip: function(data) {
        if (this.href && this.href!='#') {
            data.toolTip.html('<img src="'+this.href+'">');
        }
    }});​ 
```

以下是每个选项的含义：

1)`toolTipContainer`应包含模板的 HTML 以显示工具提示。在小提琴中，你会看到我添加了一个 ID 为“tooltip-container”的隐藏 div

2)`mapKey`是您添加到每个区域的属性的名称。此属性可以包含一个或多个逗号分隔值。Imagemapster 将共享第一个值的突出显示区域组合在一起，因此如果您不需要对任何区域进行分组，请使用不同的区域。每个区域的第二个值应该相同，我使用它来激活所有区域的工具提示。

3)`areas`是一组特定于区域的格式信息。通常您使用它来控制如何显示每个区域的突出显示效果。在您的情况下，我只是使用它来激活所有区域的工具提示。该键`all`匹配每个区域，因为它们都将其作为第二个键，并`toolTip: true`启用工具提示。通常您会说`toolTip: "some text specific to this area:"`，该文本只会显示在您的默认工具提示容器中。在您的情况下，我们想要显示图像，并且我想从区域本身获取图像 URL，因此在显示工具提示时我需要在函数中处理它。

4）`showToolTip`说为整个地图启用工具提示。

5)`onShowToolTip`定义一个在显示工具提示时调用的函数。从这里您可以截取它并更改内容以显示该区域的图像。

This should be simpler - but the tooltip API in imagemapster is really designed around a very simple model where you just have some hardcoded text for each area. This is a workaround to grab the URL from the the href of each area.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T06:39:04.263

我想你想要下面给出的小提琴。编写的代码非常粗糙并且可以优化。只需检查你想要这个或其他东西。

**演示：http:** [//jsfiddle.net/3GF6s/3/](http://jsfiddle.net/3GF6s/3/)

# javascript - 确保输入以 9344 开头并且全部为 13 位

> ID：11132459
> 
> 赞同：0
> 
> 时间：2012-06-21T06:09:24.993
> 
> 标签：javascript, forms, input, digits

是否可以确保 INPUT#barcode 中的所有数字都以 9344 开头并包含 13 位数字？

我真的需要在发送表单之前执行此操作，因为我想使用 required 因为如果他们没有填写，我在输入框中有一个红色拇指。

demo@ [http://www.vipcashback.com](http://www.vipcashback.com)（以前是incard.com）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T06:14:06.163

这个正则表达式应该可以解决问题：

```
if (/9344\d{9}/.test(val) {
  // matches 9344 followed by 9 more digits
} 
```

其中 'val' 是 $('#barcode').val()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T06:18:10.090

您可以使用表单验证插件（像[这样](http://docs.jquery.com/Plugins/Validation)）。

并在您的输入上使用正则表达式规则。

您的正则表达式规则是：**9344\d{9}**

# db2 - 直接读取 SAP 的数据库？

> ID：11132461
> 
> 赞同：2
> 
> 时间：2012-06-21T06:09:28.517
> 
> 标签：db2, sap

我们是一家实施了 SAP 的 SME。我们正在尝试使用 SAP 中的事务数据为我们的货运部门构建另一个 PHP 系统，用于图形报告等。这是因为我们没有内部的 ABAP 开发专业知识，并且任何 SAP 修改都是昂贵的。

目前，我已经成功实现了我们的目标，即对我们的 Quality DB2 服务器进行只读访问，并且任何写入都转到另一个 DB2 服务器。我们发现 SELECT 语句上的 CPU 使用率是可以接受的，并且用户仅被授予对特定表/视图的访问权限。

```
SAP's Quality DB2 -> PHP -> Different DB2 client 
```

想知道以同样的方式从生产环境中读取是否安全？通过 RFC 连接器再次实现所有这些似乎非常痛苦。主从配置是我们的一个选项，但同样需要外部咨询。

**编辑**

忘了提一下，我们的 SAP 人员甚至不想再构建 6 个月的报告——他们想保持系统完好无损。这就是为什么我们在顶部使用 PHP 构建它的原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T07:18:36.380

如果您没有 ABAP 专业知识，请掌握它 -[这并不难](http://help.sap.com/saphelp_nw70ehp2/helpdata/en/ed/b2934258a5c76ae10000000a155106/frameset.htm)，而且您将获得很多“理所当然”（如“平台提供”）的东西，否则您将不得不手动实现 -比如用户认证和权限管理以及软件物流（将东西从开发转移到生产存储库）。有关简短（尽管有偏见）的介绍，请参阅[这些](http://www.volker-wegert.de/en/node/17) [文章](http://www.volker-wegert.de/en/node/21)。如果您仍然需要外部 PHP 应用程序，那很好 - 但您确实应该首先尝试 ABAP。对于 Web 应用程序，您可能需要查看[Web Dynpro ABAP](http://help.sap.com/saphelp_nw70ehp2/helpdata/en/77/3545415ea6f523e10000000a155106/frameset.htm)。[使用带有BusinessGraphics](http://help.sap.com/saphelp_nw70ehp2/helpdata/en/ed/258841a79f1609e10000000a155106/frameset.htm)元素的 IGS 内置图表引擎，您 [将免费获得大量最自定义的图表类型](http://help.sap.com/saphelp_nw70ehp2/helpdata/en/7a/664e6f57663945a7db0165d01bb051/frameset.htm)。你也可以[集成](http://help.sap.com/saphelp_nw70ehp2/helpdata/en/48/a06778fb696bb9e10000000a42189d/frameset.htm)使用 Adob​​e Livecycle Designer 创建的 PDF 表单。

其次，虽然“任何 SAP 修改都很昂贵”可能是一个好方法，但您所建议的并不是修改。那是附加开发，它既不昂贵也不比任何其他编程语言和/或环境更复杂。如果你不能或不想完全使用现有的基础设施来实现你自己的应用程序，至少使用一个像样的接口——Web 服务、RFC 等等。从 ABAP 的角度来看，RFC 始终是最简单的选择，但您也可以使用 SOAP 或 REST，尽管您必须手动实现后者。这也不是那么难。

永远不要直接访问 SAP 数据库。只是不要。您必须自己实现所有约束，例如客户端依赖关系或检查有效日期和取消标志 - 这几乎不比编写一个体面的接口简单，并且每次结构更改时都容易中断。如果在某些时候你需要阅读一些更复杂的内容，比如[长文本](https://stackoverflow.com/questions/2115170/how-to-decode-sap-text-from-from-stxl-clustd/2116137)，那你就完蛋了。更不用说大多数内部或外部审计员（如果这恰好是您的公司和/或法律要求的问题）不喜欢直接数据库访问像这个一样重要的系统，这又会导致很多麻烦你真的不想惹的人。这不值得。

# java - SQL 十进制到 Java 十进制

> ID：11132467
> 
> 赞同：1
> 
> 时间：2012-06-21T06:09:57.397
> 
> 标签：java, sql, jdbc, decimal

我正在编写一个 JDBC 应用程序。我的任务是从 SQL 服务器获取数据加密它们，然后将它们作为`varbinary`字段存储在另一个表中。我已经成功地将所有 sql 数据类型转换为二进制，除了十进制字段。

我正在使用`getBytes()`JDBC 的方法来获取这个十进制字段的字节。但是我收到的字节不是有效字节，例如我在 sql 中运行一个查询，它将十进制转换为二进制

```
declare @deci decimal(18,2)
set @deci = 2.33
print cast(@deci as varbinary) 
```

结果我得到了—— `0x12020001E9000000`（为了让我的应用程序正常工作，我需要在 JDBC 端使用这个二进制文件）：（5 个字节）

但在 JDBC 方面，我得到的字节为（对于相同的值）- `2,1,-23,3,0`（5 个字节）（我正在打印每个字节的值）

有人可以帮我理解其中的区别吗？以及如何将这些 JDBC 字节转换为以上`varbinary`

提前致谢

# php - 从 $_SERVER["SERVER_NAME"] （或其他方式）获取域和子域

> ID：11132468
> 
> 赞同：2
> 
> 时间：2012-06-21T06:10:07.273
> 
> 标签：php

我正在使用：`$_SERVER["SERVER_NAME"];`来获得：`sub1.host.com.ar`

我怎样才能从/获得“sub1”和“host” `$_SERVER["SERVER_NAME"];`？有没有更简单的方法来回显它们？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-21T06:13:11.353

使用

```
$parts=explode('.', $_SERVER["SERVER_NAME"]); 
```

你可以用点来分割它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T06:22:31.150

在一行中给出有意义的名称和中断数组：

```
list($first,$host) = explode(".",$_SERVER["SERVER_NAME"]);
echo $host; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T06:12:49.793

```
$exp = explode('.', $_SERVER['SERVER_NAME']);
print_r($exp); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-02T08:35:46.407

如果您使用explode 函数，它将从您的url 字符串创建一个数组，一旦您获得一个数组，您就可以导航并从中获取您想要的元素。

对于名字，您可以使用以下代码。

```
echo array_shift((explode(".",$_SERVER['HTTP_HOST']))); 
```

# javascript - 在非 mozilla 浏览器中应用 MozTransform（通过 JS）

> ID：11132470
> 
> 赞同：1
> 
> 时间：2012-06-21T06:10:26.923
> 
> 标签：javascript, css, vendor-prefix

**背景资料**

我正在开发一个可视表单设计器，没有编码经验的人可以在其中拖动表单域来创建表单并打印它们或保存为 HTML 文档。

我介绍了一种绘制直线的方法，该直线也可以以任何角度倾斜。我通过使用没有高度且仅使用底部边框的普通 div 来完成此操作。而当我应用`CSS rotate transform`到 div 时，它可以任意角度倾斜。

**问题**

在设计器中，当用户更改线条的角度（斜率）时，我通过 Javascript 应用样式。像这样的东西：

```
lineWrapper.style.webkitTransform = "rotate(" + angle + "deg)";
lineWrapper.style.MozTransform = "rotate(" + angle + "deg)"; 
```

当用户想要将表单保存为 HTML 时，我会获取 outerHTML 并将其返回给用户。在这里，如果我使用的是 Chrome，`MozTransform`则生成的 HTML 中不存在该属性，如果我使用的是 Firefox，`webkitTransform`则该属性不存在。

**我尝试过的方法**

我试图通过多种方式解决这个问题：

*   我没有通过`style`属性设置它，而是尝试通过`style.cssText`属性设置它。它没有用。
*   我可以`outerHTML`在 HTML 生成期间获取 div 并插入属性，但这是一件非常麻烦的事情。
*   我可以通过为常用角度（0、45、90、135、180 等）提供 CSS 类来妥协，但我不想在这里太快放弃。

所以，我问你们 - 有没有更好的方法来解决这个问题？

在此先感谢，谢
什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T06:46:13.867

不要使用“.style”设置样式，而是使用“setattribute”。它应该在两个浏览器中都添加。这也将允许您使用一个命令应用样式。

```
 lineWrapper.setattribute("style", "-webkit-transform : rotate(" + angle + "deg); -moz-transform : rotate(" + angle + "deg)"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T06:40:31.777

我使用一个轻量级的 jQuery 插件进行旋转：[http](http://code.google.com/p/jqueryrotate/) ://code.google.com/p/jqueryrotate/。它真的很容易使用，你可以通过使用返回任何 html 元素的当前 angel：`.getRotateAngle()`

文档：[http ://code.google.com/p/jqueryrotate/wiki/Documentation](http://code.google.com/p/jqueryrotate/wiki/Documentation)

# python - web2py ajax 问题 onclick

> ID：11132474
> 
> 赞同：1
> 
> 时间：2012-06-21T06:10:49.033
> 
> 标签：python, html, ajax, web2py

我正在尝试编写一个控制器方法和一个相应的视图，它将使用 Ajax 在 web2py 上调用控制器。这个想法是在数据库上做一个小的更新，并使用 Ajax 在目标 div 上返回一个简单的更新消息。下面是控制器方法：

```
def deleteajax():
recid1 = request.vars.recid
reptype1 = request.vars.reptype
if recid1 == None:
    out = 'Missing Param : recid'
    return out
if reptype1 == None:
    reptype1 = 'pr'        
if reptype1 == 'pr':
    row = db2(db2.prs_mailed.id==recid1).select().first()
    return str(row.id)
elif reptype1 == 'tb':
    row = db2(db2.tbs_mailed.id==recid1).select().first()
else:
    return 'Please provide the parameter : rep'
if row['action'] == 'D':
    out = 'Already deleted'
    return out
else:
    row.update_record(action='D')
    out = 'Deleted Successfully!'
    return out 
```

这就是我从视图中调用相同的方式：

```
 <form>{{
     response.write('<input type="hidden" name="recid" value="'+str(response._vars['prs']['id'][k])+'"/>',escape=False)}}
     <input type ='button' name="del" value = "D"  onclick="ajax('deleteajax', ['reid'], 'target')" />
     <div id="target"></div>
     </form> 
```

我已经使用 POST 调用单独测试了控制器，并且可以正常工作。甚至 AJAX 调用也能正常工作，并在目标 div 上显示错误消息，例如“Missing Param：recid”。我什至尝试在完成每个语句后修改控制器以显示更多消息。但是，发布任何数据库操作后，不会执行来自控制器的命令，也不会在目标 div 上显示任何内容。我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T15:26:45.320

首先，而不是这个：

```
{{response.write('<input type="hidden" name="recid" value="' +
    str(response._vars['prs']['id'][k])+'"/>',escape=False)}} 
```

只需这样做：

```
<input type="hidden" name="recid" value="{{=prs['id'][k])}}"/> 
```

无需使用 response.write 或通过 response._vars 访问“prs”对象（response._vars 中的所有项目在视图环境中全局可用）。

关于 Ajax 问题，您的输入元素名称是“recid”，但您的`ajax()`调用指的是“reid”。将后者更改为“recid”，看看它是否有效。

更新：

要创建多个唯一的 recid，您可以执行以下操作：

```
name="{{='recid%s' % prs['id'][k]}}" 
```

然后，在控制器中，检查以“recid”开头的 request.vars：

```
recid = [v for v in request.post_vars if v.startswith('recid')]
if recid:
    recid = int(recid[0][5:])
    [code to delete record with id==recid] 
```

# asp.net-mvc - 文本框 asp.net mvc razor 上的水印文本

> ID：11132476
> 
> 赞同：0
> 
> 时间：2012-06-21T06:11:15.850
> 
> 标签：asp.net-mvc, entity-framework, c#-3.0

我目前正在开发一个 ASP.NET MVC3 项目，我创建了视图来显示内容，现在我想在 @html.TextBoxFor() 上添加水印，所以我尝试了 [Display(Prompt="WaterMarkText")]，但它不起作用在 IE8 和谷歌浏览器中运行良好请帮我放水印..

这是我的代码

```
 [Display(Prompt = "Scheme", Name = "Scheme")]
        [Required(ErrorMessage = "*")]           
        public string name { get; set; } 
```

看法

```
 <td>
                    @Html.LabelFor(model => model.scheme.name)
                </td>
                <td>

                    @Html.EditorFor(model => model.scheme.name)
                </td>
                <td>
                    @Html.ValidationMessageFor(model => model.scheme.name)
                </td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T23:59:05.470

Display 属性中的 Prompt 参数只是为渲染的输入标签添加了一个“占位符”属性，如下所示：

`<input type="text" placeholder="WaterMarkText" />`

IE8 不支持 placeholder 属性，所以需要使用 javascript 或 CSS 来实现。你可以用 jQuery 来做到这一点：http: [//www.standardista.com/html5-placeholder-attribute-script/](http://www.standardista.com/html5-placeholder-attribute-script/)

# windows-phone-7 - 关于在 Skydrive 上共享和更新共享文件夹（以编程方式）

> ID：11132478
> 
> 赞同：0
> 
> 时间：2012-06-21T06:11:25.443
> 
> 标签：windows-phone-7, live, onedrive

我有一个关于通过 Windows Phone 上的 Live SDK 以编程方式访问 Skydrive 文件夹的问题。

所以我手头的场景是我构建的 Windows 手机应用程序在您的 Skydrive 上创建文件夹（和文件）。现在我想要以下功能，直到现在我还不能这样做。

我是否可以通过编程方式将具有查看（和/或编辑）权限的文件夹和文件共享给我的朋友（因为我知道他们的用户 ID）？

如果我能够共享这样的文件夹，我可以在从手机登录（使用我的实时 ID）后访问内容。通过访问我的意思是下载或流式传输内容。

如果在第 1 步中，向共享文件的人提供了编辑权限，我如何以编程方式编辑这样的文件？我在此步骤中面临的当前问题是，要更新共享文件夹，实时 sdk 请求 wl.contacts_skydrive_update 范围，但是在登录时我被通知不存在这样的范围。

这是我尝试获取 shared_edit_link 时收到的错误消息：

> request_token_unauthorized：Microsoft.Live.LiveConnectException：提供的访问令牌无权访问此资源。需要具有以下范围之一的访问令牌：'wl.contacts_skydrive_update'。

尽管用户确实具有编辑权限。注意：这样的范围不存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T16:12:23.413

在此有一个线程，它被列为测试版中的错误。他们说现在应该修复它，你应该只需要这个范围：'wl.contacts_skydrive'。

[这是线程](http://social.msdn.microsoft.com/Forums/en/messengerconnect/thread/216aca24-a6e9-4a1b-a52f-dca80d39dcbc)

# cscope - cscope：Cscope 错误：cscope：无法从文件 cscope.out 读取列表大小

> ID：11132481
> 
> 赞同：2
> 
> 时间：2012-06-21T06:11:40.853
> 
> 标签：cscope

**问题**：当我尝试在 vim（版本 7.3）中打开文件时出现以下错误。

**cs_read_prompt EOF: Illegal seek E609: Cscope error: cscope: cannot read list size from file cscope.out**

**描述**：我使用命令“cscope -b -R”创建了 cscope 数据库“cscope.out”。文件 ~/.vim/plugin/cscope_maps.vim 包含命令“cs add cscope.out”来添加 cscope 数据库。当我尝试打开其中一个源文件时，出现上述错误。

unname -a

Linux 2.6.16.60-0.58.1.3835.0.PTF.638363-smp #1 SMP 2009 年 12 月 2 日星期三 12:27:56 UTC 2009 x86_64 x86_64 x86_64 GNU/Linux

这里可能是什么问题？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-29T06:16:47.733

我有同样的问题。

当我发现“cscope.out”文件的大小太大（~2.5GB）时，我的问题得到了解决。
为较大的子文件夹创建单独的 cscope 数据库。并使用 ":cs add " 分别添加所有数据库。

注意：反向索引（cscope -b -q）会创建更大的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-24T12:43:49.923

遇到此错误的一种情况是：如果您的**目录名称中有****空格（**甚至在源文件夹的路径中），则重命名不带空格的目录并重试。

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-07T08:07:13.177

您的系统上可能有多个版本的 cscope。您可以通过以下方式检查 cscope 二进制文件的各个位置

```
whereis cscope 
```

然后在您的 .vimrc 中添加此路径之一

```
vim ~/.vimrc
set csprg=/path/to/your/desired/cscope 
```**

# asp.net - 如何在注册中使用取消按钮？

> ID：11132483
> 
> 赞同：0
> 
> 时间：2012-06-21T06:12:03.543
> 
> 标签：asp.net, validation

在我的注册网页中，5 个带有必需和正则表达式验证器的文本框。单击注册按钮意味着它正确显示所有验证器，但假设单击取消按钮意味着它删除了所有文本框中的文本，但它显示验证器在之后填充所有文本框在所有文本框中填充值它允许删除文本框中的所有文本，否则不会......如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T06:15:48.847

设置`CausesValidation="False"` 在取消按钮上

# php - 通过 Zend Framework 更新查询传递 Mysql 函数

> ID：11132493
> 
> 赞同：1
> 
> 时间：2012-06-21T06:12:46.283
> 
> 标签：php, mysql, zend-framework

如何`current_timestamp`使用 Zend Framework 在 Mysql 数据库中进行设置？

我这样做是为了更新查询：

```
$data=array("usercode"=>$username,
                "active"=>1,
                "activation_tme"=>"CURRENT_TIMESTAMP()"); 
```

问题是 Zend 框架更改`CURRENT_TIMESTAMP()`为`'CURRENT_TIMESTAMP()'`，Mysql 将其作为字符串获取，结果`000000000000`在时间列中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T06:29:16.007

利用 ：

```
$data = array("usercode"       => $username,
              "active"         => 1,
              "activation_tme" => new Zend_Db_Expr('CURRENT_TIMESTAMP()')); 
```

文档：[Zend_Db_Table 程序员参考指南](http://framework.zend.com/manual/en/zend.db.table.html)

# javascript - JS中的JSON解析

> ID：11132498
> 
> 赞同：0
> 
> 时间：2012-06-21T06:12:53.693
> 
> 标签：javascript, arrays, json, parsing

我收到来自服务器的 JSON 响应：

```
{
    "width": "765",
    "height": "990",
    "srcPath": "http://192.168.5.13:8888/ebook/user_content/_ADMIN_/_MERGED_/1273.pdf",
    "coverPage": "",
    "documents": [
        {
            "index": "1",
            "text": "Archiving Microsoft® Office SharePoint® Server 2007 Data with the Hitachi Content Archive Platform and Hitachi Data Discovery for Microsoft SharePoint",
            "type": "doc",
            "id": "HDS_054227~201106290029",
            "children": [
                {
                    "text": "Page 1",
                    "leaf": "true",
                    "pageLocation": "http://192.168.5.13:8888/ebook/user_content/_ADMIN_/_IMAGES_/HDS_054227~201106290029/image_1.png"
                },
                {
                    "text": "Page 2",
                    "leaf": "true",
                    "pageLocation": "http://192.168.5.13:8888/ebook/user_content/_ADMIN_/_IMAGES_/HDS_054227~201106290029/image_2.png"
                }               

            ]
        },
        {
            "index": "11",
            "text": "Brocade FCoE Enabling Server I/O Consolidation",
            "type": "doc",
            "id": "HDS_053732~201105261741",
            "children": [
                {
                    "text": "Page 1",
                    "leaf": "true",
                    "pageLocation": "http://192.168.5.13:8888/ebook/user_content/_ADMIN_/_IMAGES_/HDS_053732~201105261741/image_1.png"
                },
                {
                    "text": "Page 2",
                    "leaf": "true",
                    "pageLocation": "http://192.168.5.13:8888/ebook/user_content/_ADMIN_/_IMAGES_/HDS_053732~201105261741/image_2.png"
                }
                     ]
        }
    ]
} 
```

我想获得孩子们的页面位置。

谁能告诉我该怎么做？

嗨，我也想从中获取索引，然后想获取那个特定孩子的页面位置。你能告诉我我该怎么做吗？

而且当我得到索引数组时，它只返回我，而不是索引号。我为此使用以下代码：

```
 indexes=response.documents.map(function(e){ return e.children.index; }) 
```

感谢和问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T06:18:06.623

如果您有兴趣简单地检索所有页面位置，可以使用*[filter](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/filter)*来完成：

```
var locations = [];
json.documents.forEach(function(e,i) {
    e.children.forEach(function(e2,i2) {
        locations.push(e2.pageLocation);
    )}
});
// returns flat array like [item1,item2,item3,item4] 
```

*[您可以使用map](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/map)*获取数组数组：

```
var locations = [];
var locations = json.documents.map(function(e) {
    return e.children.map(function(e2) {
        return e2.pageLocation;
    });
});

// returns 2-dimensional array like [[item1,item2],[item1,item2]] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T06:20:42.063

您的 json 响应是一个适当的 javascript 对象，因此您可以像在后端一样访问对象的所有元素。在这里，您有一个文档类型的对象数组，每个文档对象都有一个子类型的对象数组。所以语法是

```
myjson.documents[0].children[0].pagelocation 

( = http://192.168.5.13:8888/ebook/user_content/_ADMIN_/_IMAGES_/HDS_054227~201106290029/image_1.png) 
```

会给你第一页的位置..等等

# jquery - 如何在 Jquery Mobile 中取消显示页面并显示另一个页面？

> ID：11132500
> 
> 赞同：0
> 
> 时间：2012-06-21T06:13:12.127
> 
> 标签：jquery, jquery-mobile

我正在使用 Jquery Mobile 构建移动应用程序，我需要根据某些规则取消显示页面并改为显示另一个页面。

我有以下代码：

```
$('#login').live("pagebeforeshow", function() {
    /*-> Here i have some code where i decide 
    if i continue loading the page or load(changepage) another page instead.*/
}); 
```

感谢您帮助我的建议。我应该更好地使用“pagebeforecreate”而不是“pagebeforeshow”还是你推荐什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-22T15:17:03.367

`.live()`已弃用，请`.on()`改用：

```
$(document).on("pagebeforecreate", "#login", function(event){ 
   if(condition){
      event.preventDefault();
      event.stopPropagation();
      $.mobile.changePage("login.htm");
   }
}); 
```

# javascript - 检查未定义的变量在 chrome 中不起作用

> ID：11132501
> 
> 赞同：0
> 
> 时间：2012-06-21T06:13:12.917
> 
> 标签：javascript

我正在检查是否定义了变量。它在 Firefox 中可以正常工作，而在 Chrome 中则无法正常工作：

```
if(window[myClass] == undefined)
{
    return;
} 
```

如果变量未定义，它应该返回。

我正在使用`window[myClass]`，因为我从`onclick`事件中获取 id 的名称，并使用与 id 相同的命名变量，如果定义了变量，则其他部分应该或如果未定义，则如果部分应该工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T06:16:03.300

你应该做这样的事情来检查是否`window[myclass]`定义：

```
if (typeof window[myclass] === 'undefined') { 
```

但是，如果我正确理解了这个问题，您可能正在寻找是否`window[myclass]`存在。通常你会这样做：

```
if (window.hasOwnProperty(myclass)) { 
```

另外，是`myclass`变量还是字符串 ( `'myclass'`)？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T06:20:11.773

从您问题的最后一句话来看，听起来`myClass`实际上是文档中某些元素的 ID。

在这种情况下，您应该使用这样的代码来检查这样的元素是否真的存在：

```
if (!document.getElementById(myClass))
    return; 
```

*当具有此类 ID 的元素*不存在时，这将取消该功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T06:16:12.783

```
if (typeof window[myClass] !== 'undefined') {
    //do stuff
} else {
    alert('undefined');
} 
```

# vb.net - VB.NET 多维数组

> ID：11132507
> 
> 赞同：0
> 
> 时间：2012-06-21T06:13:46.070
> 
> 标签：vb.net, arrays, multidimensional-array

好的，所以我习惯了 PHP，我可以在其中声明一个多级数组，例如`$something[0][1] = "test";`. 我需要能够完成同样的事情，但我使用的是 VB.NET。我该怎么做？

很抱歉，如果这不是多维数组，我可能对它的名称有误，但这就是我想要做的。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T06:25:08.200

VB.Net中的多维数组...

```
Dim twoDimensionalArray(10, 10) As String
twoDimensionalArray(0, 1) = "test" 
```

但是，我很少使用数组。更优雅的解决方案通常可以使用[Lists](http://msdn.microsoft.com/en-us/library/6sh2ey19)、[Dictionaries](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)或两者的组合来实现。

**更新** 。

是数组的`(10, 10)`上限（大小实际上是 11，0 到 10）。如果您不指定边界，则必须`Redim Preserve`在要添加到数组时才指定该数组。这是列表的一件好事，您不必指定初始大小，您可以自由地添加到它们中。

这是列表列表的快速示例。

```
Dim listOfLists As New List(Of List(Of String))
listOfLists.Add(New List(Of String)(New String() {"a", "b", "c"}))
listOfLists.Add(New List(Of String)(New String() {"d", "e", "f"}))
listOfLists.Add(New List(Of String)(New String() {"g", "h", "i"}))
'listOfLists(0)(0) = "a"
'listOfLists(0)(1) = "b"
'listOfLists(2)(1) = "h" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T08:51:14.647

只是一个简单的样本，动态调整数组大小

```
Dim arr(0)() As String            '** array declaration 
For i As Integer = 0 To 100       '** Outer loop (for the 1st dimension)
   For j As Integer = 0 To 1      '** inner loop (for the 2nd dimension)
      ReDim Preserve arr(i)       '** Resize the first dimension array preserving the stored values
      ReDim Preserve arr(i)(j)    '** Resize the 2nd dimension array preserving the stored values
      arr(i)(j) = String.Format("I={0},J={1}", i, j) '** Store a value 
   Next                           
Next 
```

在 .NET 中，数组通常是静态的，不会自动调整大小。（例如在 Javascript 等中）因此，每次要添加新项目时都需要手动调整数组的大小，或者在开始时指定大小。

# wordpress - 将设计构建到 WordPress 和插件中

> ID：11132508
> 
> 赞同：0
> 
> 时间：2012-06-21T06:13:48.763
> 
> 标签：wordpress

我想在 WP 中构建一个新设计（不是为任何人制作一个主题），但我想知道你需要做些什么来确保插件仍然有效吗？

您在当前主题上使用的插件怎么样？他们会自动为新设计工作，还是您必须为他们做些什么才能继续工作？

**编辑：**为了进一步详细说明，我有一个当前使用 WP 主题的网站，但是我想为其创建一个新设计，然后将该设计构建到 WP 中。我只是想知道我需要做些什么来确保插件（新的和现有的）在新主题上工作，因为我将对其进行编码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T06:55:40.290

那么程序是这样的： -

1.  创建您的设计，然后制作相同的 html。

2.  在现有主题中正确放置您的 html 标签并将您的 css 添加到 style.css

3.  请记住，您不会在不知情的情况下删除任何 wordpress 功能。

4.  对于插件，不要删除以下功能：-

    *   在 header.php 中有一个函数`wp_head();`，这有助于插件脚本嵌入脚本。
    *   在 footer.php 中有一个函数`wp_footer();`，这也有助于插件嵌入脚本。

希望这些步骤对您有所帮助，如果还有其他困惑，请告诉我。

# iphone - NSUserDefaults 设置

> ID：11132513
> 
> 赞同：2
> 
> 时间：2012-06-21T06:14:05.273
> 
> 标签：iphone, ios, xcode

我在其中设置了一个值，`viewDidLoad`因此它可以是默认设置，所以每当我加载到该视图控制器中时，它都会有一个默认值。

我`NSUserDefaults`在这里使用：

```
- (void)viewDidLoad
{
    NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
    [prefs setInteger:1 forKey:@"defaultKey"];

    NSInteger defaultKey = [[NSUserDefaults standardUserDefaults] integerForKey:@"defaultKey"];

    if (defaultKey == 1){
    // do something 1
    } else if ( defaultKey == 2){
    // do something 2
    }
} 
```

但我想要的是当按下按钮时，例如 button2，

```
-(IBAction) button2Pressed:(id)sender {
    NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
    [prefs setInteger:2 forKey:@"defaultKey"];
} 
```

它会改变它的价值。因此，例如，我再次加载该 ViewController

```
NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
    [prefs setInteger:2 forKey:@"defaultKey"]; 
```

将是下一次加载时的设置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T06:16:51.430

这样做

```
- (void)viewDidLoad
{

    NSInteger defaultKey = [[NSUserDefaults standardUserDefaults] integerForKey:@"defaultKey"];

    if (defaultKey == 1){
    // do something 1
    } else if ( defaultKey == 2){
    // do something 2
    }
   else 
   {
        //for the first time
          NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
    [prefs setInteger:1 forKey:@"defaultKey"];
   } 
} 
```

和

```
-(IBAction) button2Pressed:(id)sender {
    NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
    [prefs setInteger:2 forKey:@"defaultKey"];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T06:19:53.320

试试这样

```
NSInteger defaultKey = [[NSUserDefaults standardUserDefaults] integerForKey:@"defaultKey"];
    if(defaultKey == 0){
    NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
        [prefs setInteger:1 forKey:@"defaultKey"];
    }else if (defaultKey == 1){
        // do something 1
    } else if ( defaultKey == 2){
        // do something 2
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T06:20:47.467

这没有意义。您应该首先将其设置为默认值（1 或 2）。老实说，您应该在 AppDelegate 上执行此操作：

```
 NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
  // it will return 0 if it doesn't exist
  if([prefs integerForKey:@"defaultKey"] == 0){
       [prefs setInteger:1 forKey:@"defaultKey"];
  } 
```

这样您就设置了默认值。之后，您可以将此逻辑保留在您的`viewDidLoad`：

```
- (void)viewDidLoad
{
    NSInteger defaultKey = [[NSUserDefaults standardUserDefaults] integerForKey:@"defaultKey"];

    if (defaultKey == 1){
    // do something 1
    } else if ( defaultKey == 2){
    // do something 2
    }
} 
```

然后在按下按钮时使用其余的逻辑：

```
-(IBAction) button2Pressed:(id)sender {
    NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
    [prefs setInteger:2 forKey:@"defaultKey"];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T06:23:45.660

您需要做 2 件事：
1\. 每次更新用户默认值以保留您的更改时，您应该这样做：

```
[prefs synchronize]; 
```

2.使用此代码：

```
NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
NSInteger defaultKey = [prefs integerForKey:@"defaultKey"];
if(defaultKey == 0) //This is when you haven't set it and as it's integer you will get 0
{
    [prefs setInteger:1 forKey:@"defaultKey"];
    [prefs synchronize];
    //Do whatever you will do when it's 1
}
else if(defaultKey == 1)
{
   //Do something else
}
else if(defaultKey == 2)
{
  //Do something else
} 
```

# javascript - 如何使用 PHP 在本地服务器（wamp）上运行 KnockoutJs？

> ID：11132522
> 
> 赞同：0
> 
> 时间：2012-06-21T06:14:36.253
> 
> 标签：javascript, jquery

**我是KnockoutJs**的新手，我尝试了其官方网站上的所有教程。
现在我想在我的本地机器上运行所有的实用教程，我已经下载了[knockout-2.1.0.js](http://github.com/downloads/SteveSanderson/knockout/knockout-2.1.0.js)。

我试过这段代码，但它不能在本地机器上工作

```
index.php
---------
<!DOCTYPE html>
<html>
    <head>
        <title>Knockout</title>
        <script src="js/knockout-2.1.0.js"></script>
        <link rel="stylesheet" href="css/styles.css" />
        <script>
        // This is a simple *viewmodel* - JavaScript that defines the data and behavior of your UI
        function AppViewModel() {
            this.myname= ko.observable("Frank");
            this.myage= ko.observable("26");

            this.mydetails= ko.computed(function() {
                var x;
                return this.myname() + ", and my age is " + this.myage() + 'yr. old.';
            }, this);

            this.capitalizeMyName = function() {
                var currentVal = this.myname();        // Read the current value
                this.myname(currentVal.toUpperCase()); // Write back a modified value
            };
        }

        // Activates knockout.js
        ko.applyBindings(new AppViewModel());
        </script>
    </head>
    <body>
    <p>New Application</p>
        <!-- This is a *view* - HTML markup that defines the appearance of your UI -->
        <p>My Name: <strong data-bind="text: myname"></strong></p>
        <p>My Age: <strong data-bind="text: myage"></strong></p>

        <p>My Name: <input data-bind="value: myname" /></p>
        <p>My Age: <input data-bind="value: myage" /></p>

        <p>Full Detalis: <strong>Hi, my name is <text data-bind="text: mydetails"></strong></p>

        <button data-bind="click: capitalizeMyName">Go caps</button>
    </body>
</html> 
```

如果有人对此有知识或想法，请建议我。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T06:51:56.310

[http://code.jquery.com/jquery-1.7.2.min.js](http://code.jquery.com/jquery-1.7.2.min.js)

你需要包括缩小文件：js/jquery-1.7.2.min.js

```
And put your viewmodel code between:

  $(document).ready(function(){

  // This is a simple *viewmodel* - JavaScript that defines the data and behavior of

}); 
```

# java - 突出显示 PDF 文件中的行

> ID：11132524
> 
> 赞同：0
> 
> 时间：2012-06-21T06:15:01.497
> 
> 标签：java, pdf, servlets, blob

程序在数据库中搜索特定记录，该记录具有`BLOB`包含 PDF 的字段。我需要使用 Java Servlet 将文件输出给用户。

这很容易，但现在我需要搜索特定的单词/行并突出显示它们，然后输出带有突出显示文本的 PDF 文件。

我正在使用 Oracle 10g 数据库。

iText 是这样做的一个选项吗？

# android - 如何在我单击 android 中的图像按钮时使用 KeyEvent.KEYCODE_MENU

> ID：11132531
> 
> 赞同：1
> 
> 时间：2012-06-21T06:15:31.930
> 
> 标签：android, menu, imagebutton, keyevent

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if ( keyCode == KeyEvent.KEYCODE_MENU ) {
        Log.d(TAG, "MENU pressed");
        return true;
    }
    return super.onKeyDown(keyCode, event);
} 
```

在这里，我想在我的应用程序中使用图像按钮来使用此功能

```
 if ( keyCode == KeyEvent.KEYCODE_MENU ) {
                Log.d(TAG, "MENU pressed");
                return true;
        } 
```

有没有可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T06:16:24.710

假设您要在 ImageButton 的单击事件上打开菜单，则必须使用

```
openOptionsmenu(); 
```

在 ImageButton 的 onClickListener 中。

```
 imageButton.setOnClickListener(new OnClickListener() {

            public void onClick(View arg0) {
                openOptionsMenu();
            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-07T08:07:29.743

**它由框架本身处理，从不交付给应用程序。**

但是您可以使用`Reflection`. 在这里看到这篇[文章](https://stackoverflow.com/a/31872330/3496570)

# sql - SQL QUERY - 合并具有相同 ID 的行中的数据

> ID：11132532
> 
> 赞同：1
> 
> 时间：2012-06-21T06:15:40.313
> 
> 标签：sql, wordpress

我在我的网站上使用 wordpress，并且我有大量数据要通过 SQL 导出。问题是我为每个帖子（项目）收到了几行，其中包含类别列下的数据。我想要做的是合并所有类别，所以最终我将只有 1 行的每个帖子包含所有类别。

这是目前我的查询：

```
 SELECT post_title, b.object_id, b.term_taxonomy_id, c.term_id, d.name
FROM wp_posts a
JOIN wp_term_relationships b ON a.ID = b.object_id
JOIN wp_term_taxonomy c ON b.term_taxonomy_id = c.term_taxonomy_id
JOIN wp_terms d ON d.term_id = c.term_id 
```

这是我的结果的一个例子：

```
post_title     object_id  term_taxonomy_id  term_id name
Holcroft Covenant   2       5                 5         Action
Holcroft Covenant   2       6                 6         Drama
Holcroft Covenant   2       8                 8         Thriller 
```

我想要的结果是：Holcroft Covenant 2 5 5 Action,Drama,Thriller

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T07:39:15.910

如果您使用的是 MySql，请尝试以下操作：

```
SELECT 
    post_title, b.object_id, b.term_taxonomy_id, c.term_id, GROUP_CONCAT(d.name)
FROM wp_posts a
    JOIN wp_term_relationships b ON a.ID = b.object_id
    JOIN wp_term_taxonomy c ON b.term_taxonomy_id = c.term_taxonomy_id
    JOIN wp_terms d ON d.term_id = c.term_id
GROUP BY post_title, b.object_id, b.term_taxonomy_id, c.term_id 
```

# google-chrome - 如何使用 Chromium 实现服务器端屏幕截图？

> ID：11132534
> 
> 赞同：0
> 
> 时间：2012-06-21T06:15:49.780
> 
> 标签：google-chrome, screenshot, chromium, screen-capture

我正在构建一个可以获取给定 URL 的网页屏幕截图的站点，然后输出图像 URL。这样的服务有很多，但我很好奇它是如何工作的。

最初，我想我必须在服务器端执行浏览器，提供客户端提供的 URL。然后浏览器加载 URL，然后等待几秒钟以执行 javascript，因为某些页面需要时间来执行其 UI，例如 Trello。最后，调用某些 API 来捕获该页面。

我决定使用开源浏览器 Chromium。即便如此，我仍然怀疑自己是否做对了。

## 问题

1.  我的方向对吗？
2.  我想知道如何在我的服务器上执行一个长寿命的 Chromium 浏览器。
3.  有没有可以在命令行中控制 Chromium 的 shell？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T05:50:59.293

Chrome 有一个内置的 API 可以满足你的需求“captureVisibleTab”：

> chrome.tabs.captureVisibleTab(integer windowId, object options, function callback)
> 
> 捕获指定窗口中当前活动选项卡的可见区域。您必须对选项卡显示的 URL 具有主机权限。

[http://developer.chrome.com/trunk/extensions/tabs.html#method-captureVisibleTab](http://developer.chrome.com/trunk/extensions/tabs.html#method-captureVisibleTab)

# google-maps-api-3 - Google Map V3 .png 地面覆盖不透明度

> ID：11132537
> 
> 赞同：5
> 
> 时间：2012-06-21T06:16:10.057
> 
> 标签：google-maps-api-3, maps, png, opacitymask

我创建了我的第一个带有 png 叠加层的 Google Map API（感谢@andresf 的帮助）。

这张地图有多个彼此相邻的 png 地面叠加层，可以在[http://www.earthstation.mobi/coverage.htm看到](http://www.earthstation.mobi/coverage.htm)

问题：如何在每个叠加层上设置不透明度（透明度？），以便我可以看到叠加层下的地图细节？我不需要从网页上调整它，一个预先编码到脚本中就足够了。

上面列出的页面的代码是：

```
 <!DOCTYPE html "-//W3C//DTD XHTML 1.0 Strict//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
 <html xmlns="http://www.w3.org/1999/xhtml">
  <head>
 <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
 <title>Earthstation WIMAX Coverage</title>
 <script src="http://maps.googleapis.com/maps/api/js?key=MY_API_KEY&sensor=false"
      type="text/javascript"></script>
  <script type="text/javascript">

  function initialize() {

  var myOptions = {
            center: new google.maps.LatLng(-18.975750, 32.669184),
            zoom: 13,
            mapTypeId: google.maps.MapTypeId.HYBRID
          };

  var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

  //note to self co-ords are SW and then NE
  var imageBounds = new google.maps.LatLngBounds(
    new google.maps.LatLng(-19.000417,30.999583),
    new google.maps.LatLng(-17.999583,32.000417));

  var oldmap = new google.maps.GroundOverlay(
    "http://www.earthstation.mobi/cloakpS19E031.png",imageBounds);
    oldmap.setMap(map);

    var imageBounds2 = new google.maps.LatLngBounds(
    new google.maps.LatLng(-19.000417,31.999583),
    new google.maps.LatLng(-17.999583,33.000417));

  var oldmap = new google.maps.GroundOverlay(
    "http://www.earthstation.mobi/cloakpS19E032.png",imageBounds2);
    oldmap.setMap(map);

    var imageBounds3 = new google.maps.LatLngBounds(
    new google.maps.LatLng(-20.000417,30.999583),
    new google.maps.LatLng(-18.999583,32.000417));

  var oldmap = new google.maps.GroundOverlay(
    "http://www.earthstation.mobi/cloakpS20E031.png",imageBounds3);
    oldmap.setMap(map);

 var imageBounds4 = new google.maps.LatLngBounds(
    new google.maps.LatLng(-20.000417,31.999583),
    new google.maps.LatLng(-18.999583,33.000417));

  var oldmap = new google.maps.GroundOverlay(
    "http://www.earthstation.mobi/cloakpS20E032.png",imageBounds4);
    oldmap.setMap(map); 

}

 </script>
  </head>
  <body onload="initialize()">
  <div id="map_canvas" style="width: 1000px; height: 600px"></div>
  </body>
  </html> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-22T16:18:05.217

问题解决了！

声明 var MyOptions 后，添加

```
 var overlayOpts = {
      opacity:0.3
  } 
```

然后在.GroundOverlay调用中调用变量，直接调用ImageBounds之后

IE

```
var oldmap = new google.maps.GroundOverlay(
"http://www.earthstation.mobi/cloakpS19E031.png",imageBounds, overlayOpts);
oldmap.setMap(map); 
```

然后在每个 .groundoverlay 调用中使用相同的调用，假设您希望每个叠加层具有相同的不透明度设置。如果没有，请贴上另一个 var 并调用它。

成品可见[http://www.eartshtation.mobi/coverage.htm](http://www.eartshtation.mobi/coverage.htm) - 在 Firefox 中，Ctrl U 将显示源代码。

希望这可以帮助某人避免我花了 3 天时间寻找这个解决方案！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T20:08:14.253

这在我的情况下解决了同样的问题 - [http://www.usnaviguide.com/v3maps/ProjectedOverlayTest.htm](http://www.usnaviguide.com/v3maps/ProjectedOverlayTest.htm)

使用代码中的库（http://www.usnaviguide.com/v3maps/js/ProjectedOverlay.js），您可以通过以下方式轻松更改透明度`overlay.setOpacity()`

# php - 如何在 PHP 中更改 url（静态页面）

> ID：11132538
> 
> 赞同：0
> 
> 时间：2012-06-21T06:16:12.353
> 
> 标签：php, url, url-rewriting

我是 PHP 新手。我正在开发一个网站（截至目前具有静态内容，尚未涉及数据库）。url 看起来像这样，例如：localhost/main/listcontent/content1#abc.php

我想隐藏整个路径并将其替换为：localhost/main?sub=1&brch=1

有什么建议么？

PS：我已经用谷歌搜索了它，但不明白如何继续。

提前致谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T06:22:32.083

一种方法是使用 .htaccess 规则：

```
RewriteEngine on
Options +FollowSymLinks
RewriteBase /

RewriteRule !(\.xpi|\.xml|\.txt|\.air|\.exe|\.zip|\.pdf|\.ico|\.gif|\.jpg|\.png|\.jpeg|\.js|\.swf|\.css|\.php|\.html)$ index_mod_rewrite.php [L] 
```

在内部`index_mod_rewrite.php`，您将当前 URL 解析为您创建的映射（参见 $_SERVER["REQUEST_URI"]），然后解析`require`必要的 .php 文件。

另一种方法是手动（或使用脚本）将所有映射添加到 .htacccess。

如果您使用的是 Apache，上述内容是有效的。.htaccess 是您放置在任何文件夹中的文件，它会影响当前文件夹和子文件夹。如果您选择特定文件夹，则路径上的后续 .htacccess 文件可以更改配置甚至停止 mod 重写。

为了确保起见，我还在这里添加了对最多 .htaccess 文件的另一个要求（禁用目录列表的安全功能）：

```
options All -Indexes
IndexIgnore * 
```

# python - 在 django 中处理异常 - 使用基类

> ID：11132543
> 
> 赞同：1
> 
> 时间：2012-06-21T06:16:37.153
> 
> 标签：python, django, unit-testing

我的 django 视图通过一个列表，使用正则表达式来检测列表中的特定元素，最后返回内容的字典。两者`IndexError`和`ValueError`都可以在解析列表时发生。

在这种情况下我需要处理异常。我试过这样

```
def parse_list(oldlist):
    try:
        newlist=create_newlist(oldlist)
    except Exception as e:
        logger.debug(str(e))
    else:
        mydict = make_dict(newlist)

def create_newlist(oldlist):
    mydict = {}
    for elem in oldlist:
        if re.match('somepattern',elem[0]):
            mydict['somekey']=int(elem[0].strip())
        else:
            raise ValueError(elem[0],' expects an integer')
    ...
    return mydict 
```

是否以正确的方式使用`Exception`类 `except Exception as e:`来处理源自上述函数的任何异常？

当我写一个单元测试方法时

```
def test_me(self):
    dl = parse_list(self.somelist)
    print 'dl=\n',dl
    self.assertTrue(len(dl),0) 
```

我得到控制台输出为

```
ERROR: test_me (myapp.tests.ParseTest)
..
IndexError: list index out of range 
```

为什么记录器没有记录异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T06:29:21.220

> 是否在 except Exception as e 中使用 Exception 类：处理源自上述函数的任何异常的正确方法？

在处理异常时，您应该尽可能具体。在您的情况下，您应该捕获`IndexError`and`ValueError`而不是 general `Exception`：

```
try:
    ...
except (ValueError, IndexError) as e:
    ... 
```

你的另一个问题：

> 为什么记录器没有记录异常？

这取决于记录器的配置。您正在打印“调试”消息，但可以将其设置为仅记录/显示级别为“错误”或更高级别的消息。有关更多信息，请参阅Python 中的[日志记录文档](http://docs.python.org/library/logging.html)。

# excel - 如何修改 xlsread 以从加载过程中获取逐步更新的标志

> ID：11132544
> 
> 赞同：0
> 
> 时间：2012-06-21T06:16:42.433
> 
> 标签：excel, matlab, file-io, progress-bar, xls

我已经在我的电脑上安装了 Matlab r2010a

我需要使用函数 xlsread 从一个 *.xls 或 *.xlsx 文件中加载数据。这不是一个大挑战，问题是如何修改`xlsread.m`以获得一个标志（整数），它给出了加载过程的百分比？

非常感谢。

到目前为止，我做了这个：将一个步进变量计数到一半，然后调用`xlsread`这需要一点时间，在加载过程之后，49.5% 的计数器计数到最后。

不是最好的，但这就是我所拥有的

```
file = 'example.xls';

h = waitbar(0, ['Loading data from ' file], ...
            'Name', 'Loading',...
            'CreateCancelBtn',...
            'setappdata(gcbf, ''canceling'', 1)');

steps = 200;

for step = 1 : steps

    %# Check for Cancel button press

    if getappdata(h, 'canceling')
        okCancel = 1;
        break
    end

    pause(0.01);         %# Delay time for wait bar progres

    if step == steps/2
        [data, txt] = xlsread(file);
    end

    %# Process status report

    waitbar(step/steps, h, sprintf(['Loading data from file... %3.2f%%'], step*100/steps));
end

set(h, 'CloseRequestFcn', 'closereq')
close(h) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T06:25:35.550

XLSREAD 函数允许您指定要读取的单元格范围。因此，您可以分批读取数据（例如读取表的前 50 行，然后读取接下来的 50 行，依此类推），每次“递增”进度条。

请注意，这将比一次读取整个表格要慢，因为该函数必须与 Excel COM 建立连接，然后在每次调用它时将其拆除（有关解释和可能的解决方案，请参阅[此帖子）。](https://stackoverflow.com/a/6784516/97160)

* * *

## 编辑：

这是一个简单的例子：

```
%# path to excel file to read
fname = fullfile(pwd,'test.xls');

%# get number of rows/columns in table
Excel = actxserver('Excel.Application');    %# open Excel COM Server
wb = Excel.Workbooks.Open(fname, 0, true);  %# open XLS file for reading
sheet = Excel.Worksheets.get('item',1);     %# activate first sheet
numRows = sheet.Range('A1').End('xlDown').Row;
numCols = sheet.Range('A1').End('xlToRight').Column;
wb.Close(false);                            %# close XLS file
Excel.Quit();                               %# cleanup
Excel.delete();
clear Excel wb sheet;

%# read rows in steps, and show progress-bar
numSteps = 20;
idx = fix(linspace(0,numRows,numSteps+1));
num = cell(numSteps,1);
h = waitbar(0, 'Reading excel file');
for i=1:numSteps
    %# update progress-bar
    waitbar(i / numSteps);

    %# range of cells to read
    cellRange = sprintf('%c%d:%c%d', ...
        'A', idx(i)+1, char('A'+numCols-1), idx(i+1));
    num{i} = xlsread(fname, 1, cellRange);
end
close(h)

%# merge all cells into a matrix
num = cell2mat(num); 
```

![截屏](../Images/47cc3e83f2c606a165e0ec14a436fd6c.png)

这假定 Excel 文件包含一个数字数据表。随意适应您自己的文件。

# iphone - 如何擦除 iPhone 中自定义 UIView 上的手指画

> ID：11132546
> 
> 赞同：1
> 
> 时间：2012-06-21T06:17:05.147
> 
> 标签：iphone, objective-c, cgcontext, paint, cgcontextref

我为手指画应用程序创建了一个自定义 UIView（没有 .xib）。

Paint 与自定义 UIView 一起工作正常，但我的问题是，当我尝试擦除绘制的路径时，我得到：

> 错误：上下文无效

下面是我的课：

.h 文件

```
@interface draw2D : UIView
{
    CGPoint previousPoint;
    CGPoint lastPoint;
    CGMutablePathRef path;
    UIButton *btnClose;
    UIButton *btnErase;
    BOOL IsErase;
}
- (IBAction)btnClose:(id)sender;
- (IBAction)btnErase:(id)sender;
@end

@implementation draw2D
- (void)awakeFromNib
{
    path = CGPathCreateMutable();
}
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) 
    {
        btnClose = [UIButton buttonWithType:UIButtonTypeRoundedRect];
        [btnClose addTarget:self action:@selector(btnClose:)
         forControlEvents:UIControlEventTouchDown];
        [btnClose setTitle:@"close" forState:UIControlStateNormal];
        btnClose.frame = CGRectMake(10, 10, 100, 40.0);

        btnErase = [UIButton buttonWithType:UIButtonTypeRoundedRect];
        [btnErase addTarget:self action:@selector(btnErase:)
           forControlEvents:UIControlEventTouchDown];
        [btnErase setTitle:@"Erase" forState:UIControlStateNormal];
        btnErase.frame = CGRectMake(150, 10, 100, 40.0);

        [self addSubview:btnClose];
        [self addSubview:btnErase];
    }
    return self;
}

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event 
{    
    UITouch *touch = [touches anyObject];
    NSLog(@"Touch Began :%d",[touch tapCount]);

    if ([touch tapCount] > 1) 
    {
        NSLog(@"::::: Paint Start :::::");
        path = CGPathCreateMutable();
        previousPoint = lastPoint;
        [self setNeedsDisplay];
    }
    self.backgroundColor = [UIColor clearColor];
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event 
{
    NSLog(@"::::: touchesMoved :::::");
    lastPoint = [[touches anyObject] locationInView:self];
    previousPoint = [[touches anyObject] previousLocationInView:self];

    if(IsErase)
    {
        NSLog(@"erase");
        UITouch *erasetouch = [touches anyObject];  
        CGPoint erasecurrentPoint = [erasetouch locationInView:self];

        CGContextRef erasecontext = UIGraphicsGetCurrentContext();
        CGContextSetLineCap(erasecontext, kCGLineCapRound);
        CGContextSetLineWidth(erasecontext,10);
        CGContextSetBlendMode(erasecontext, kCGBlendModeClear);
        CGContextSetStrokeColorWithColor(erasecontext, [[UIColor clearColor] CGColor]);
        CGContextBeginPath(erasecontext);
        CGContextMoveToPoint(erasecontext, lastPoint.x, lastPoint.y);
        CGContextAddLineToPoint(erasecontext, erasecurrentPoint.x, erasecurrentPoint.y);
        CGContextStrokePath(erasecontext);     
        CGContextFlush(erasecontext);

    }  

    [self setNeedsDisplay];
}
- (void)drawRect:(CGRect)rect
{
    NSLog(@"::::: drawRect :::::");

    CGContextRef context = UIGraphicsGetCurrentContext();
    CGPathMoveToPoint(path, NULL, previousPoint.x, previousPoint.y);
    CGPathAddLineToPoint(path, NULL, lastPoint.x, lastPoint.y);
    CGContextAddPath(context, path);
    CGContextSetLineWidth(context, 5);
    [[UIColor blueColor] setStroke];
    CGContextDrawPath(context, kCGPathFillStroke);
}

- (IBAction)btnClose:(id)sender
{
    [self removeFromSuperview];
}
- (IBAction)btnErase:(id)sender
{
    IsErase = YES;
}    

@end 
```

我设置了具有功能但不起作用的擦除按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T10:02:25.110

你遇到的问题是你不应该在`UIGraphicGetContext()`外面打电话`drawRect:`

在你的`touchesBegan:withEvent:`和`touchesMoved:withEvent:`你应该像现在一样简单地存储你想要绘制和调用的点`[self setNeedsDisplay]`。在您的`drawRect:`实现中，您将绘制已存储的点。

你可以看看这个 github repo，它提供了一个平滑绘图的实现：[https ://github.com/levinunnink/Smooth-Line-View](https://github.com/levinunnink/Smooth-Line-View)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T05:21:59.983

最后我找到了解决方案。`touchMove`我的错误是我用 new 方法实现擦除代码`context`。我不需要新的`context`。在方法中实现擦除代码`drawrect`，现在它工作正常。请参阅下面的代码。

```
- (void)drawRect:(CGRect)rect
{

    [curImage drawAtPoint:CGPointMake(0, 0)];
    CGPoint mid1 = midPoint(previousPoint1, previousPoint2); 
    CGPoint mid2 = midPoint(currentPoint, previousPoint1);

    context = UIGraphicsGetCurrentContext(); 
    [self.layer renderInContext:context];

    if(IsErase)
    {
        CGContextSetLineWidth(context,self.lineWidth);
        CGContextSetBlendMode(context, kCGBlendModeClear);
        CGContextSetStrokeColorWithColor(context, [[UIColor clearColor] CGColor]);
        CGContextBeginPath(context);
        CGContextMoveToPoint(context, mid1.x, mid1.y);
        CGContextAddLineToPoint(context, previousPoint1.x, previousPoint1.y);
        CGContextStrokePath(context);     
        CGContextFlush(context);
    }
    else
    {
        CGContextMoveToPoint(context, mid1.x, mid1.y);
        CGContextAddQuadCurveToPoint(context, previousPoint1.x, previousPoint1.y, mid2.x, mid2.y); 
        CGContextSetLineCap(context, kCGLineCapRound);
        CGContextSetLineWidth(context, self.lineWidth);
        CGContextSetStrokeColorWithColor(context, self.lineColor.CGColor);
        CGContextSaveGState(context);
        CGContextStrokePath(context);
    }
    [super drawRect:rect];
    [curImage release];
} 
```

我希望它对擦除功能的人有所帮助。

# c# - 数据表中group by子句中的多列

> ID：11132547
> 
> 赞同：0
> 
> 时间：2012-06-21T06:17:09.653
> 
> 标签：c#

我有一个数据表包含 3 列计数、内存、核心。现在我正在尝试按内存和内核获取计数组的总和。

我正在使用这段代码：

```
var queryG = from row in dtFilterX.AsEnumerable()
                        group row by row.Field<string>("memory") into grp
                        select new
                        {
                            Id = grp.Key,
                            sum = grp.Sum(r => r.Field<int>("count"))
                        };
            foreach (var grp in queryG)
            {
                dtFilter.Rows.Add(grp.Id, grp.sum);
            } 
```

由于我是 LINQ 新手，因此无法按条件在组中添加核心列。请帮我。

谢谢 Gulrej

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T06:19:32.667

对于 group by 中的多个列，**使用匿名类型**（使用 new 关键字）：

```
group row by new 
             { 
               memoryCol = row.Field<string>("memory"), 
               coreCol = row.Field<string>("core")
              } into grp 
```

# facebook - 如何获得 Facebook 用户的照片评论

> ID：11132550
> 
> 赞同：1
> 
> 时间：2012-06-21T06:17:41.880
> 
> 标签：facebook, facebook-fql

目前，当我通过 GraphAPI 查看我的帖子时： [https ://graph.facebook.com/me/posts/](https://graph.facebook.com/me/posts/)

有些帖子的“故事”参数像这样被截断（注意 toe 这个词后面的 ...）：

```
{
"id": "xxxxxxxxx_yyyyyyyyyyyyy", 
  "from": {
    "name": "zzzzzz", 
    "id": "1234567890"
  }, 
  "story": "\"those things pivot at the toe,...\" on XYZ's photo.", 
  "story_tags": {
    "39": [
      {
        "id": 11111, 
        "name": "XYZ", 
        "offset": 39, 
        "length": 22, 
        "type": "user"
      }
    ]
  } 
```

以上是对 facebook 中一张照片的评论，因此我在 SO 其他地方看到的 graph api ids=http://.... 方法不起作用。当我尝试通过 FQL 将 id 传递给评论表时，我没有返回任何数据。我在访问令牌中拥有所有适当的权限。

总的来说，我想要实现的是一种获取用户最近在 facebook 上编写/键入的所有内容的方法，所以我需要：

1.status 更新 - 通过以下方式实现：

```
select time, message from status where uid=me() 
```

2.签到 - 仍在努力

3.评论照片或处理其他人的状态 - 仍在处理此问题以及此帖子的原因

# javascript - 如何拆分数组或分配键，jquery

> ID：11132552
> 
> 赞同：0
> 
> 时间：2012-06-21T06:17:48.190
> 
> 标签：javascript, jquery, arrays

使用 jQuery ，

我有一个数组结果

```
[<a href=""><img src="image1"></a>,<a href=""><img src="image2"></a>] 
```

如果我尝试做每一个，我只会得到数组中的第一个，

我怎么能分开这个所以我可以做

```
$.each(my_array, function (index, value) {
     this.parent().attr.('href',this.src);// assign image as href to parent
}); 
```

这是不好的尝试

[http://jsfiddle.net/ZZVXf/6/](http://jsfiddle.net/ZZVXf/6/)

请注意，上面的数组是由 jquery 的 imagesLoaded 插件返回给我的，我无法直接选择父级，因为它不在结果中，ZI 必须通过 element.parent() 任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T06:30:06.760

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T06:34:12.513

Select the img elements.

```
var $imgs = $("a > img"); 
```

Loop over selected elements

```
$imgs.each(function () {
    $(this).parent().attr('href',this.src);// assign image as href to parent
}); 
```

Note there is no '.' after attr, since that is a method. Also, you need to do `$(this)`, since `this` in the loop is a dom element, not a jquery object.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T06:27:11.647

```
var arr = ['<a href=""><img src="image1"></a>','<a href=""><img src="image2"></a>'];

$.each(arr, function (index, value) {
    alert(value.replace(/^.*src="(.*)".*$/m, '$1'));
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T06:37:05.997

Use this :

```
var obj = ['<a href=""><img src="image1"></a>,<a href=""><img src="image2"></a>']

jQuery(obj).each(function(key,value){
    var imgObj = jQuery(value).find('img')
       jQuery(imgObj ).each(function(key,value){ 
            jQuery(this).parent('a').attr('href',jQuery(this).attr('src')); 
     });
});​ 
```

Here is the [DEMO](http://jsfiddle.net/sLYDV/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-21T06:38:23.370

if your code is: [http://jsfiddle.net/ZZVXf/6/](http://jsfiddle.net/ZZVXf/6/) then you just need to change it to:

```
$.each($('img'), function (index, value) {
    $(this).parent().attr('href', this.src);// assign image as href to parent
}); 
```

because you want to access the jQuery methods you need to wrap this with jQuery (witch is the DOM reference, not a jQuery reference).

# javascript - 如何捕捉 jQuery.event.trigger()？

> ID：11132553
> 
> 赞同：9
> 
> 时间：2012-06-21T06:17:48.790
> 
> 标签：javascript, jquery

我想使用未设置为 DOM 元素的 jQuery 构建自定义事件。

它在 jQuery 描述中说：

```
jQuery.event.trigger('test'); 
```

是触发自定义事件。

但我怎么能抓住它？？

提前谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-21T06:24:22.867

我想你是在问那个自定义事件（至少我试图捕捉 没有意义`trigger`）：它是用[.bind](http://api.jquery.com/bind/)完成的：

```
$('some_selector').bind('test', function() { 
  console.log('Test was caught'); }
); 
```

**更新：**实际上不，您不需要选择器 - 只需一个对象即可成为事件的“主机”。你可能会使用这样的东西：

```
// taken from the comments at the Doc page
var o = {length: 3};
$(o).bind( 'custom', function(){ console.log('hi') } );
$(o).trigger('custom');

// Output
hi
hi
hi 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-09-17T14:04:28.197

我认为你们错过了这个问题。他不是在问您如何侦听在对象上触发的事件。他在问你如何监听通过 jQuery.event.trigger() 直接触发的事件。

[我在http://www.sitepoint.com/jquery-custom-events/](http://www.sitepoint.com/jquery-custom-events/)找到了一篇非常棒的文章。

本质上，您只需监听文档对象。

```
$(document).on("test", function(event, data) {
  console.log(data)
});

$.event.trigger('test', [{ foo: 'bar' }]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-11T02:08:46.140

您应该将事件的目标元素传递给 jQuery.event.trigger()，如下所示：

```
jQuery.event.trigger('test', null, element); 
```

这样当你想抓住它时，你可以使用：

```
$(element).on('test', fn); 
```

你可以在jQuery源码中找到jQuery.event.trigger的定义和用法：

看完jQuery的源码，你会发现jQuery.event.trigger的定义：

```
jQuery.event = {
    ...

    trigger: function( event, data, elem, onlyHandlers ) {...}

    ...
} 
```

（这并不是 jQuery 的公共接口，仅供内部使用。）

和用法：

```
jQuery.fn.extend({
...
    trigger: function( type, data ) {
        return this.each(function() {
            jQuery.event.trigger( type, data, this );
        });
    },
    triggerHandler: function( type, data ) {
        var elem = this[0];
        if ( elem ) {
            return jQuery.event.trigger( type, data, elem, true );
        }
    },
...
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-24T12:29:03.520

就是这样：

```
$(document).bind('test', function (e) {
  // handler code here...
}); 
```

# c - 如何禁用mmap（）的写时复制和按需填充零

> ID：11132559
> 
> 赞同：6
> 
> 时间：2012-06-21T06:18:19.173
> 
> 标签：c, linux, mmap, copy-on-write, page-fault

我正在使用 mmap() 实现 cp(file copy) 命令。为此，我将源文件映射为 MAP_PRIVATE（我只想读取）模式，并将目标文件映射为 MAP_SHARED 模式（因为我必须写回目标文件的更改内容）。

在执行此操作时，我观察到由于两个原因而发生的许多次要页面错误导致性能下降。1) 为源文件调用 mmap(MAP_PRIVATE) 时按需填零。2) 为目标文件调用 mmap(MAP_SHARED) 时写入时复制。

有什么方法可以禁用 Zero-fill-on-demand 和 Copy-on-write 吗？

谢谢， 哈里什

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T14:08:55.593

mmap(2) 有 MMAP_POPULATE 标志：

[http://linux.die.net/man/2/mmap](http://linux.die.net/man/2/mmap)

> MAP_POPULATE（自 Linux 2.5.46 起）为映射填充（默认）页表。对于文件映射，这会导致文件预读。以后对映射的访问不会被页面错误阻塞。MAP_POPULATE 自 Linux 2.6.23 起仅支持私有映射。

它应该预先故障映射区域中的所有页面。它应该适用于问题（1），可能不适用于问题（2）（共享）。

# sql - 临时禁用外键？

> ID：11132562
> 
> 赞同：0
> 
> 时间：2012-06-21T06:18:38.500
> 
> 标签：sql, sql-server-2008

我在 MSDN 杂志上看到了这个。我想暂时禁用外键，我可以使用以下代码吗。不需要删除但暂时禁用，因为我想再次启用

```
ALTER TABLE Orders
NOCHECK CONSTRAINT 
    FK_Orders_Customers 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T06:29:05.150

-- 禁用约束。

```
ALTER TABLE Orders NOCHECK CONSTRAINT FK_Orders_Customers 
```

-- 重新启用约束。

```
ALTER TABLE Orders WITH CHECK CHECK CONSTRAINT FK_Orders_Customers 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T06:29:42.850

是的，正如您所怀疑的那样，`ALTER TABLE [table] CHECK / NOCHECK CONSTRAINT *FK_Name*`启用和禁用外键约束检查。它还证明了为什么明确命名约束是一个好主意，即避免使用`FK__TABLE__A2A64E930CBAE877`.

需要注意的一点是，在使用禁用的外键约束插入/更改数据之后，如果您只是使用 CHECK CONSTRAINT 启用它，SQL 将不会信任您的约束。您需要执行以下操作以使 SQL 在重新启用期间重新检查约束：

```
ALTER TABLE [table] WITH CHECK CHECK CONSTRAINT *FK_Name* 
```

您可以检查违规行为

```
DBCC CHECKCONSTRAINTS ([table]) 
```

参考： http: [//msdn.microsoft.com/en-us/library/ms177456](http://msdn.microsoft.com/en-us/library/ms177456(v=sql.90).aspx) (v=sql.90).aspx（禁用约束），另请参阅[http://geekswithblogs.net/dturner/archive/2011/01 /31/sql-constraints-check-and-nocheck.aspx](http://geekswithblogs.net/dturner/archive/2011/01/31/sql-constraints-check-and-nocheck.aspx)

# android - 默认情况下，如何将“CDMA网络选择”设置更改为“家庭”？

> ID：11132566
> 
> 赞同：1
> 
> 时间：2012-06-21T06:18:57.767
> 
> 标签：android, cdma

我必须更改 Android 设备上的 CDMA 设置实现。默认情况下，在设备的选择网络选项中出现的对话框中选择了“自动”选项，但我必须强制它默认选择“主页”选项。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-31T21:21:42.573

在 cdma 设备上，您可能能够修改 nv 项目 442 即 NV_ROAM_PREF_I

[https://community.republicwireless.com/thread/2736](https://community.republicwireless.com/thread/2736)

该程序将允许您更改它（但您可能必须使用最新版本中的脚本选项卡）

[http://code.google.com/p/cdmaworkshoptool/](http://code.google.com/p/cdmaworkshoptool/)

# android - 错误：无法分配最终局部变量分数，因为它是在封闭类型中定义的？

> ID：11132567
> 
> 赞同：2
> 
> 时间：2012-06-21T06:19:05.287
> 
> 标签：android, android-intent

我正在尝试使用从上一个活动中检索到的 getIntent 值（分数），但它似乎是不可能的。if else 下的加减法好像检测不到分数。还有其他方法吗？

```
package com.mkyong.android;

import com.mkyong.android.R;
import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.widget.Button;
import android.widget.RadioButton;
import android.widget.RadioGroup;
import android.widget.TextView;
import android.widget.Toast;
import android.view.View;
import android.view.View.OnClickListener;

public class App2Activity extends Activity {

    private RadioGroup radioAnswerGroup2;
    private RadioButton radioAnswerButton2;
    private Button btnSubmit2;

    Button button2;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main2);
        addListenerOnButton();

    }

    public void addListenerOnButton() {

        final Context context = this;

        radioAnswerGroup2 = (RadioGroup) findViewById(R.id.radioAnswer2);

        button2 = (Button) findViewById(R.id.button2);
        Button button2pre = (Button) findViewById(R.id.button2pre);

        Intent intent = getIntent();
        final int score = intent.getIntExtra("int", -1);
        final TextView result2 = (TextView) findViewById(R.id.txtResult2);
        result2.setText("Result counting: " + String.valueOf(score));

        button2.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                int correctId2 = (R.id.answer2b);

                // get selected radio button from radioGroup
                int selectedId2 = radioAnswerGroup2.getCheckedRadioButtonId();

                // find the radio button by returned id
                radioAnswerButton2 = (RadioButton) findViewById(selectedId2);

                if (selectedId2==correctId2){

                     score = score + 1;
                    //show toast saying it is correct
                    //Context context = getApplicationContext();
                    //CharSequence text = ("You are correct!");
                    //int duration = Toast.LENGTH_SHORT;

                    //Toast toast = Toast.makeText(context, text, duration);
                    //toast.show();
                }
                else{

                    score = score - 1;
                    //toast incorrect
                    //Context context = getApplicationContext();
                    //CharSequence text = ("You are wrong but it's ok and the answer is Data Link");
                    //int duration = Toast.LENGTH_LONG;

                    //Toast toast = Toast.makeText(context, text, duration);
                    //toast.show();
                }   

                Intent intent2 = new Intent(App2Activity.this, App3Activity.class);
                intent2.putExtra("int", score); 
                startActivity(intent2);  

            }

        });

        button2pre.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {

                Intent intent = new Intent(context, AppActivity.class);
                startActivity(intent);   

            }

        });

    }

} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-21T06:21:58.387

移动`int score`为全局变量以在 onClick 中访问它。您还需要删除`final`关键字，以便在初始化后更改值。

```
 public class YourActivity extends Activity{

       int score;

      public onCreate( /*...etc.*/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T06:20:09.433

只需`final`从中删除关键字：

```
final int score = intent.getIntExtra("int", -1); 
```

因为`final`变量只能通过初始化程序或赋值语句初始化一次。

[在这里](http://en.wikipedia.org/wiki/Final_%28Java%29#Final_variables)阅读更多。

# javascript - 使用 javascript 使用间隔更改多个属性？

> ID：11132568
> 
> 赞同：2
> 
> 时间：2012-06-21T06:19:13.660
> 
> 标签：javascript, jquery, glow

我正在尝试实现类似于[jQuery Glow](http://ajaxian.com/archives/jquery-glow)或[this fiddle](http://jsfiddle.net/3LCdA/)的东西。

具体来说，我正在考虑加载开始并持续 10 秒，javascript 以 100 毫秒的间隔执行。应该发生的是背景颜色或元素 A 将使用渐变范围（开始 #000 和结束 #fff）更改，而元素 B 的不透明度将更改（开始 0 和结束 1）。因此，每 100 毫秒，不透明度将增加 1（0.01、0.02、...、1.0）并结束。一直以来，元素 A 的背景将沿着从 #000 到 #fff 的渐变。

我可以通过 jQuery Glow 看到这个功能应该不会太难，但是将它拼凑起来并不那么直观。该 js 看起来非常适合悬停和链接，没有定义不同的值 onLoad 并在预定时间结束。

我怎么能这样做？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T03:26:44.030

setTimeout 不再是 JavaScript 动画中的唯一选择。

查看 Paul Irish 的 HTML5Rocks 中的 setAnimationFrame。[在这里](http://www.html5rocks.com/en/tutorials/speed/animations/)阅读。

> 黄油般流畅的每秒 60 帧。

[滚动此页面](http://www.html5rocks.com/en/tutorials/speed/animations/post.html)，然后...

> 避免导致回流重绘循环的动画；更新您的 rAF 调用以期望高分辨率时间戳作为第一个参数；

最后，

> 在以下位置获取完整的概要：requestAnimationFrame API：现在具有 [亚毫秒精度](http://updates.html5rocks.com/2012/05/requestAnimationFrame-API-now-with-sub-millisecond-precision)

另外，nnnnnn 是正确的。jQuery 的一个主要优势是效果。

但是，JSWorld 不仅仅是 jQuery，还有更多。

对于初学者，请查看[CreativeJS.com](http://creativejs.com/)。

它是 WebGL，但更重要的是：three.js（关注 @mrdoob）。

[ExtJS](http://www.sencha.com/products/extjs/)是简单的企业级 UI，动画交互。

[Raphael](http://raphaeljs.com/)是目前最先进的 SVG 。

其他值得一提的图形解决方案是：D3.js、HTML5 Canvas 和 CSS3 Transforms。

编辑：[我认为 Adob​​e Edge 很酷](http://labs.adobe.com/technologies/edge/)。这是 HTML 动画生成中的全新隐喻，具有关键帧界面……接受，批评者无法超越 beta 版的非语义 DIV。我想我们会从那个团队那里听到更多关于一些高级 HTML 动画生成器的信息……[是的，他们得到了一些新东西！](http://edge.adobe.com/)

希望有帮助。一切顺利！纳什

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T06:26:30.710

尝试[褪色效果](http://api.jquery.com/category/effects/fading/)并将其与`setTimeout`. 您必须进行一些实验，我认为它会起作用:)

# c++ - 为什么编译器在定义类似的模板特化时不会出错？

> ID：11132573
> 
> 赞同：10
> 
> 时间：2012-06-21T06:19:38.620
> 
> 标签：c++, templates, compiler-errors, template-specialization

比较班级`template`专业化的程序是什么？该标准在这一点上没有详细说明（或者我错过了正确的地方）。
我的问题与决定在实例化期间使用什么专业无关。请不要对此发表评论。问题是关于相互比较专业化以确定特定专业化是否已经定义。

考虑这个示例代码：

```
template <class x1, class x2>
struct CoreTemplate { };

template <class x1, class x2>
struct CoreTemplate<x1*, x2*> { int spec; CoreTemplate() { spec = 1; } };

template <class x1, class x2>
struct CoreTemplate<x2*, x1*> { int spec; CoreTemplate() { spec = 2; } };

int main(int argc, char* argv[])
{
    CoreTemplate<int*, int*> qq;
    printf("var=%d.\r\n", qq.spec);
} 
```

当我尝试使用 MSVC 编译此代码时，我在函数内部尝试实例化时收到错误消息`main`：

> cpptest1.cxx(15) : 错误 C2752: ' `CoreTemplate<x1,x2>`' : 多个部分特化匹配模板参数列表

对我来说，尝试声明相同的模板特化时发出错误会更合乎逻辑。我看不出上面的专业有什么区别。

那么，有人知道比较模板专业化的规则吗？文章、链接、书籍等也会有所帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T06:47:14.333

该标准特别指出这仅在您尝试实例化模板时发生（第 14.5.4.1/1 节）：

> **当在需要类实例化的上下文中使用类模板时**，有必要确定是使用主模板还是部分特化生成实例化。[重点补充]

不幸的是，如果不讨论如何决定在实例化期间使用哪种专业化，就无法回答您的其余问题。这是标准中的文本（继续上面的摘录）：

> 这是通过将类模板特化的模板参数与部分特化的模板参数列表匹配来完成的。
> 
> *   如果恰好找到一个匹配的特化，则从该特化生成实例化。
> *   如果找到多个匹配的特化，则使用偏序规则 (14.5.4.2) 来确定其中一个特化是否比其他特化更特化。如果没有一个特化比所有其他匹配的特化更特化，那么类模板的使用是模棱两可的并且程序是非良构的。

因此，它甚至根本不会尝试直接将模板相互比较。相反，它试图找到与给定参数匹配的专业化。如果有多个匹配项，它会尝试根据部分排序规则选择最专业的一个。如果两者都不比另一个更专业，则实例化是不明确的，并且编译失败。

现在，确实不能使用这两种专业化，因为总会有歧义——如果任何一个匹配，另一个显然同样匹配。不过，编译器根本不需要检测或诊断它。在这种确切的情况下（基本上相同的专业化）可能很容易，但几乎可以肯定在其他情况下它会困难得多，因此（显然）委员会决定编译器甚至不必尝试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T06:54:46.980

啊，但是它们*不*一样，因为它们不使用相同的参数。使用 clang 和您的原始示例：

```
#include <cstdio>

template <class x1, class x2>
struct CoreTemplate { };

template <class x1, class x2>
struct CoreTemplate<x1*, x2*> { int spec; CoreTemplate() { spec = 1; } };
// note: partial specialization matches [with x1 = int, x2 = int]

template <class x1, class x2>
struct CoreTemplate<x2*, x1*> { int spec; CoreTemplate() { spec = 2; } };
// note: partial specialization matches [with x1 = int, x2 = int]

int main()
{
    CoreTemplate<int*, int*> qq;
    // error: ambiguous partial specializations of 'CoreTemplate<int *, int *>'
    std::printf("var=%d.\r\n", qq.spec);
} 
```

但是，如果我们调整部分特化以使它们完全匹配：

```
template <class x1, class x2>
struct Core { };

template <class x1>
struct Core<x1*, x1*> { int spec; Core() { spec = 1; } };
// note: previous definition is here

template <class x1>
struct Core<x1*, x1*> { int spec; Core() { spec = 2; } };
// error: redefinition of 'Core<type-parameter-0-0 *, type-parameter-0-0 *>' 
```

因此，这似乎只是一个实施质量问题。编译器可能会针对第一种情况发出警告，但在一般情况下它可能会消耗资源，或者可能只是到目前为止没有人表示需要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T06:26:16.793

> 对我来说，尝试声明相同的模板特化时发出错误会更合乎逻辑。

~~这不会发生，因为`CoreTemplate<int*, double*>`并且`CoreTemplate<double*, int*>`会生成不同的类型。~~

以下是我的猜测：
编译器可能不会对身体进行额外的*理智/常识*检查。 实例化 a后，编译器会查找匹配的类型并选择最好的类型。如果它不只匹配**one**，那么它会给出*no-match*或*multiple-match*的编译器错误。`template`
`template`

 ****例如：

```
template<typename T>
void foo ()
{
  T::x();
}

int main ()
{
} 
```

编译得很好，即使我们知道在整个 C++ 程序中没有一个函数名`x()`。只有当您尝试实例化`foo<T>`.

此外，如果您通过在两个专业之间放置一点来扭曲您的示例`main()`，它将[编译得非常好](http://ideone.com/w73PX)。****

# qt - QSlider鼠标直接跳转

> ID：11132597
> 
> 赞同：45
> 
> 时间：2012-06-21T06:21:20.450
> 
> 标签：qt, qslider

当用户单击 qslider 上的某个位置时，我不想步进，而是想让滑块跳到那个位置。如何实施？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2014-10-09T14:54:49.887

在@spyke @Massimo Callegari 和@Ben 的所有版本出现问题后（滑块位置对于整个区域都不正确），我在 QSlider 源代码中发现了一些 Qt 样式功能：`QStyle::SH_Slider_AbsoluteSetButtons`.

您必须创建一个可能非常烦人的新 QStyle，或者您使用[http://www.qtcentre.org/threads/9208-QSlider-step-customize?p=49035#post49035](http://www.qtcentre.org/threads/9208-QSlider-step-customize?p=49035#post49035)`ProxyStyle`中的用户 jpn 所示

我添加了另一个构造函数并修复了一个错字，但使用了原始源代码的其余部分。

```
#include <QProxyStyle>

class MyStyle : public QProxyStyle
{
public:
    using QProxyStyle::QProxyStyle;

    int styleHint(QStyle::StyleHint hint, const QStyleOption* option = 0, const QWidget* widget = 0, QStyleHintReturn* returnData = 0) const
    {
        if (hint == QStyle::SH_Slider_AbsoluteSetButtons)
            return (Qt::LeftButton | Qt::MidButton | Qt::RightButton);
        return QProxyStyle::styleHint(hint, option, widget, returnData);
    }
}; 
```

现在您可以在滑块构造函数中设置滑块的样式（如果您的滑块是从 QSlider 派生的）：

```
setStyle(new MyStyle(this->style())); 
```

或者如果它是标准 QSlider，它应该以这种方式工作：

```
standardSlider.setStyle(new MyStyle(standardSlider->style())); 
```

所以您使用该元素的原始样式，但是如果要求`QStyle::SH_Slider_AbsoluteSetButtons`“属性”，您可以根据需要返回；）

也许您必须在删除滑块时销毁这些代理样式，尚未测试。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-06-21T06:56:02.037

好吧，我怀疑 Qt 是否有用于此目的的直接功能。

尝试使用自定义小部件。这应该工作！

试试下面的逻辑

```
class MySlider : public QSlider
{

protected:
  void mousePressEvent ( QMouseEvent * event )
  {
    if (event->button() == Qt::LeftButton)
    {
        if (orientation() == Qt::Vertical)
            setValue(minimum() + ((maximum()-minimum()) * (height()-event->y())) / height() ) ;
        else
            setValue(minimum() + ((maximum()-minimum()) * event->x()) / width() ) ;

        event->accept();
    }
    QSlider::mousePressEvent(event);
  }
}; 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-03-09T15:12:49.760

我也需要这个并尝试了 spyke 解决方案，但它缺少两件事：

*   倒置的外观
*   手柄拾取（当鼠标在手柄上时，不需要直接跳转）

因此，这是经过审查的代码：

```
void MySlider::mousePressEvent ( QMouseEvent * event )
{
  QStyleOptionSlider opt;
  initStyleOption(&opt);
  QRect sr = style()->subControlRect(QStyle::CC_Slider, &opt, QStyle::SC_SliderHandle, this);

  if (event->button() == Qt::LeftButton &&
      sr.contains(event->pos()) == false)
  {
    int newVal;
    if (orientation() == Qt::Vertical)
       newVal = minimum() + ((maximum()-minimum()) * (height()-event->y())) / height();
    else
       newVal = minimum() + ((maximum()-minimum()) * event->x()) / width();

    if (invertedAppearance() == true)
        setValue( maximum() - newVal );
    else
        setValue(newVal);

    event->accept();
  }
  QSlider::mousePressEvent(event);
} 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2013-07-05T15:02:54.077

Massimo Callegari 的答案几乎是正确的，但是 newVal 的计算忽略了滑块手柄宽度。当您尝试单击滑块末端附近时会出现此问题。

以下代码为水平滑块修复了这个问题

```
double halfHandleWidth = (0.5 * sr.width()) + 0.5; // Correct rounding
int adaptedPosX = event->x();
if ( adaptedPosX < halfHandleWidth )
        adaptedPosX = halfHandleWidth;
if ( adaptedPosX > width() - halfHandleWidth )
        adaptedPosX = width() - halfHandleWidth;
// get new dimensions accounting for slider handle width
double newWidth = (width() - halfHandleWidth) - halfHandleWidth;
double normalizedPosition = (adaptedPosX - halfHandleWidth)  / newWidth ;

newVal = minimum() + ((maximum()-minimum()) * normalizedPosition); 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2015-04-14T23:32:41.457

这是使用 QStyle.sliderValueFromPosition() 在 python 中的一个简单实现：

```
class JumpSlider(QtGui.QSlider):

    def mousePressEvent(self, ev):
        """ Jump to click position """
        self.setValue(QtGui.QStyle.sliderValueFromPosition(self.minimum(), self.maximum(), ev.x(), self.width()))

    def mouseMoveEvent(self, ev):
        """ Jump to pointer position while moving """
        self.setValue(QtGui.QStyle.sliderValueFromPosition(self.minimum(), self.maximum(), ev.x(), self.width())) 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-03-10T11:21:33.873

下面的代码实际上是一个 hack，但它可以在没有子类化 QSlider 的情况下正常工作。您唯一需要做的就是将 QSlider valueChanged 信号连接到您的容器。

注意1：您必须在滑块中设置 pageStep > 0

注意2：它只适用于水平的，从左到右的滑块（你应该改变“sliderPosUnderMouse”的计算以使用垂直方向或倒置外观）

```
MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{

    // ...
    connect(ui->mySlider, SIGNAL(valueChanged(int)),
            this, SLOT(mySliderValueChanged(int)));
   // ...
}

void MainWindow::mySliderValueChanged(int newPos)
{
    // Make slider to follow the mouse directly and not by pageStep steps
    Qt::MouseButtons btns = QApplication::mouseButtons();
    QPoint localMousePos = ui->mySlider->mapFromGlobal(QCursor::pos());
    bool clickOnSlider = (btns & Qt::LeftButton) &&
                         (localMousePos.x() >= 0 && localMousePos.y() >= 0 &&
                          localMousePos.x() < ui->mySlider->size().width() &&
                          localMousePos.y() < ui->mySlider->size().height());
    if (clickOnSlider)
    {
        // Attention! The following works only for Horizontal, Left-to-right sliders
        float posRatio = localMousePos.x() / (float )ui->mySlider->size().width();
        int sliderRange = ui->mySlider->maximum() - ui->mySlider->minimum();
        int sliderPosUnderMouse = ui->mySlider->minimum() + sliderRange * posRatio;
        if (sliderPosUnderMouse != newPos)
        {
            ui->mySlider->setValue(sliderPosUnderMouse);
            return;
        }
    }
    // ...
} 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-04-28T13:53:03.973

我的最终实现基于周围的评论：

```
class ClickableSlider : public QSlider {
public:
    ClickableSlider(QWidget *parent = 0) : QSlider(parent) {}

protected:
    void ClickableSlider::mousePressEvent(QMouseEvent *event) {
      QStyleOptionSlider opt;
      initStyleOption(&opt);
      QRect sr = style()->subControlRect(QStyle::CC_Slider, &opt, QStyle::SC_SliderHandle, this);

      if (event->button() == Qt::LeftButton &&
          !sr.contains(event->pos())) {
        int newVal;
        if (orientation() == Qt::Vertical) {
           double halfHandleHeight = (0.5 * sr.height()) + 0.5;
           int adaptedPosY = height() - event->y();
           if ( adaptedPosY < halfHandleHeight )
                 adaptedPosY = halfHandleHeight;
           if ( adaptedPosY > height() - halfHandleHeight )
                 adaptedPosY = height() - halfHandleHeight;
           double newHeight = (height() - halfHandleHeight) - halfHandleHeight;
           double normalizedPosition = (adaptedPosY - halfHandleHeight)  / newHeight ;

           newVal = minimum() + (maximum()-minimum()) * normalizedPosition;
        } else {
            double halfHandleWidth = (0.5 * sr.width()) + 0.5;
            int adaptedPosX = event->x();
            if ( adaptedPosX < halfHandleWidth )
                  adaptedPosX = halfHandleWidth;
            if ( adaptedPosX > width() - halfHandleWidth )
                  adaptedPosX = width() - halfHandleWidth;
            double newWidth = (width() - halfHandleWidth) - halfHandleWidth;
            double normalizedPosition = (adaptedPosX - halfHandleWidth)  / newWidth ;

            newVal = minimum() + ((maximum()-minimum()) * normalizedPosition);
        }

        if (invertedAppearance())
            setValue( maximum() - newVal );
        else
            setValue(newVal);

        event->accept();
      } else {
        QSlider::mousePressEvent(event);
      }
    }
}; 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-01-24T21:38:50.943

我认为，

可以使用 QStyle::sliderValueFromPosition() 函数。

[http://qt-project.org/doc/qt-5/qstyle.html#sliderValueFromPosition](http://qt-project.org/doc/qt-5/qstyle.html#sliderValueFromPosition)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-05-25T02:07:52.927

对上述 JumpSlider 的修改在 PyQt5 中有效：

```
class JumpSlider(QSlider):
    def _FixPositionToInterval(self,ev):
        """ Function to force the slider position to be on tick locations """

        # Get the value from the slider
        Value=QStyle.sliderValueFromPosition(self.minimum(), self.maximum(), ev.x(), self.width())

        # Get the desired tick interval from the slider
        TickInterval=self.tickInterval()

        # Convert the value to be only at the tick interval locations
        Value=round(Value/TickInterval)*TickInterval

        # Set the position of the slider based on the interval position
        self.setValue(Value)

    def mousePressEvent(self, ev):
        self._FixPositionToInterval(ev)

    def mouseMoveEvent(self, ev):
        self._FixPositionToInterval(ev) 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-03-06T06:57:48.767

我一直在网上尝试和搜索，并期待 Qt 能以更聪明的方式做到这一点，不幸的是没有太大的帮助（可能是我没有正确搜索）

好吧，我已经在 Qt creator 中做到了：

1.  在 header 中添加一个 eventFilter（以 QObject 和 QEvent 作为参数）（bool 返回类型）
2.  在构造函数中初始化..例如..如果你的滑块是 HSlider 然后 ui->HSlider->installEventFilter(this);
3.  在定义中：

    一种。检查对象是否是您的滑块类型，例如：`ui->HSlider == Object`

    湾。检查鼠标单击事件，例如：`QEvent::MouseButtonPress == event->type`

    C。如果以上所有通过意味着您在滑块上有鼠标事件，请执行以下操作：在定义中：`ui->HSlider->setValue( Qcursor::pos().x() - firstval ); return QMainWindow::eventFilter(object, event);`

注意：fistVal ：可以通过打印 0 = 滑块初始位置的光标位置来取出（在 的帮助下`QCursor::pos().x()`）

希望这可以帮助

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-06-21T06:55:26.137

一个简单的方法是派生`QSlider`并重新实现`mousePressEvent(....)`以使用`setSliderPosition(int)`.

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-04-12T02:50:05.287

我也遇到了这个问题。我的解决方案如下所示。

```
slider->installEventFilter(this);
---    
bool MyDialog::eventFilter(QObject *object, QEvent *event)
    {
        if (object == slider && slider->isEnabled())
        {
            if (event->type() == QEvent::MouseButtonPress)
            {
                auto mevent = static_cast<QMouseEvent *>(event);
                qreal value = slider->minimum() + (slider->maximum() - slider->minimum()) * mevent->localPos().x() / slider->width();
                if (mevent->button() == Qt::LeftButton)
                {
                    slider->setValue(qRound(value));
                }
                event->accept();
                return true;
            }
            if (event->type() == QEvent::MouseMove)
            {
                auto mevent = static_cast<QMouseEvent *>(event);
                qreal value = slider->minimum() + (slider->maximum() - slider->minimum()) * mevent->localPos().x() / slider->width();
                if (mevent->buttons() & Qt::LeftButton)
                {
                    slider->setValue(qRound(value));
                }
                event->accept();
                return true;
            }
            if (event->type() == QEvent::MouseButtonDblClick)
            {
                event->accept();
                return true;
            }
        }
        return QDialog::eventFilter(object, event);
    } 
```

您还可以覆盖 QSlider 的这些事件处理程序。

*   `QSlider::mousePressedEvent`
*   `QSlider::mouseMoveEvent`
*   `QSlider::mouseDoubleClickEvent`

# php - 使用 PHP 计算是少于还是多于 24 小时

> ID：11132600
> 
> 赞同：-1
> 
> 时间：2012-06-21T06:21:27.970
> 
> 标签：php, datetime

我想计算两个设定时间之间的时间（Cron 作业运行 1 小时，每小时）。

例如：

2012 年 6 月 20 日下午 2:18 2012 年 6 月 21 日下午 3:00 * Cron 作业运行，超过 24 小时

我将如何在 PHP 中计算它来完成我稍后将开发的任务。

我尝试过的脚本：

```
define("SECONDS_PER_HOUR", 60*60);
date_default_timezone_set('UTC');

$result = mysql_query("SELECT * FROM tickets") or die(mysql_error());

while($row = mysql_fetch_array($result)) {
    // Calculate the start time
    $str = $row['openTime'] . " " . $row['openDate'];

    $startdatetime = strtotime($str);

    $enddatetime = time();

    // calculate the difference in seconds.

    $difference =  $enddatetime - $startdatetime;

    $hoursDiff = $difference / SECONDS_PER_HOUR;

    $minutesDiffRemainder = $difference % SECONDS_PER_HOUR;

    echo $row['ticketID'] . ": " . $hoursDiff . "h " . $minutesDiffRemainder . "m<br />";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T07:58:35.353

您是否考虑过实际执行您需要的查询而不是提取所有数据并在 PHP 中进行比较？你可以做

`SELECT * from TICKETS WHERE DATE_ADD(open time, INTERVAL 24 HOUR) > CURTIME();`

通过阅读您的代码，我假设您需要将该`opentime`字段设置为时间戳，同时包含日期和时间。但无论如何，在大多数情况下，这是明智的选择。

# c - 关于整数格式转换

> ID：11132604
> 
> 赞同：1
> 
> 时间：2012-06-21T06:21:51.713
> 
> 标签：c, sse

来自英特尔的[文章](http://www.intel.com/technology/itj/2008/v12i3/1-paper/4-instructions.htm)：

> 整数格式转换通常用于成像和视频应用程序中。例如，它们可以用于在计算像素之前将 RGBA 从四个字节转换为四个浮点数。如图所示，一条 SSE4 转换指令可以执行与之前四条 SIMD 指令相同的操作。

```
SSE2: 
pmovd xmm0, m32 
pxor xmm7, xmm7 
punpcklbw xmm0, xmm7 
punpcklwd xmm0, xmm7 
cvtdq2ps xmm0, xmm0

SSE4: 
pmovzxbd xmm0, m32 
cvtdq2ps xmm0, xmm0 
```

有人可以给我看一个完整的例子吗？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T07:56:30.393

因为`pmovzxbd`仅适用于 32 位内存操作数或 128 位 sse 寄存器，但不适用于通用寄存器，您需要插入一些类型转换或从 GPR 到 SSE 的显式加载。

```
__m128 convert_RGBA_to_float(float* rgba) {
    return  _mm_cvtepi32_ps( _mm_cvtepu8_epi32 ( *(__m128i*)rgba) );
} 
```

# automation - 如何更新 QTP 中的共享对象存储库？

> ID：11132616
> 
> 赞同：0
> 
> 时间：2012-06-21T06:22:32.503
> 
> 标签：automation, qtp

有什么方法可以更新 QTP 中的共享 OR(Object Repository)，而不必将所有对象复制到本地然后导出。我有一个问题，我想更新 Shared OR，但我无法做到。如果你们中的任何人知道....请帮助我。非常感谢您的帮助。

谢谢马奈萨

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T07:28:24.473

根据您的需要，您必须使用本地 OR 更新共享 OR。请找到此[链接](http://www.articlesontesting.com/2010/10/updating-shared-object-repository-from.html)以了解步骤

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T07:28:34.037

是不是您以只读模式打开了共享对象存储库 (SOR)？

打开 SOR 时，它们默认以只读方式打开，您可以在打开 SOR 时取消选中“以只读模式打开”。

![SOR 打开对话框](../Images/e35b56bc8205537dab5f30a93c5dc76a.png)

或者，如果 SOR 已经打开，您可以通过按*“启用编辑”*按钮启用编辑（**文件 -> 启用编辑**）

![启用编辑](../Images/9e0802469b916f98db5a50a45683543f.png)

# ruby-on-rails - Ruby on rails .authentication 失败

> ID：11132617
> 
> 赞同：0
> 
> 时间：2012-06-21T06:22:34.707
> 
> 标签：ruby-on-rails, ruby-on-rails-3, api, authentication

我正在为正在开发的 Web 应用程序构建 API，并且我尝试用于 API 身份验证/登录的以下代码在授权时返回 false。

在我的 API 用户控制器中，我有：

```
def login
  if params[:user]
    # Find the user by email first
    @user = User.where(email: params[:user][:email]).first
    if !@user
      respond_with nil
    else
      @auth = @user.authenticate(params[:user][:password])
      if @auth
        respond_with @user
      else
        respond_with @auth
      end
    end
  end
end 
```

即使提供了有效的电子邮件和密码，它总是以 @auth 响应，这是错误的。从我的 Mongo 数据库中提取用户信息没有问题。

我想我只是不清楚 .authenticate 的作用。根据我观看的 railscast.com 视频，它应该将用户密码摘要与输入的密码进行比较。当为用户提供有效密码时，@auth 始终为 false。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T18:57:01.977

这种方法实际上工作得很好，数据库中的测试数据不是我想的那样..

# ruby-on-rails - 如何在 ruby 中使用 net/http 发送音频文件

> ID：11132618
> 
> 赞同：1
> 
> 时间：2012-06-21T06:22:35.720
> 
> 标签：ruby-on-rails, ruby, rubygems

我想通过 http 请求作为 api cal 发送音频文件，而不是通过使用 net/http 的表单。我不想使用任何其他宝石。请让我知道如何实现。下面是我的红宝石脚本。

```
require 'net/http'  
require "uri"

data = File.read('/root/Desktop/amc.amr')

url = URI.parse('http://localhost:3000/api/applications')

http = Net::HTTP.new(url.host, url.port)

response, body = http.post(url.path, data, {'Content-type'=>'audio/amr;
charset=utf-8'})

puts response 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T07:35:22.050

通过以下代码得到它：

```
require 'net/http'
require "uri"

url = "http://#{domain}:#{port}"
uri = URI.parse(url);

data = File.read('fil_path')  #File.read("/usr/test.amr") 

http = Net::HTTP.new(uri.host, uri.port)
request = Net::HTTP::Post.new(uri.request_uri)
request.body = data
request.content_type = 'audio/amr'

res = http.request(request)
puts res.body 
```

# iphone - 如何阻止屏幕上的视图增加？(touchesBegan,touchesMoved,touchesEnded)

> ID：11132619
> 
> 赞同：0
> 
> 时间：2012-06-21T06:22:40.117
> 
> 标签：iphone, objective-c, ipad-2, touchesbegan, touchesmoved

我是 Objective C 的新手，我正在尝试制作一个基本的益智游戏。我正在使用多个 UIImage 对象、一些标签和一个按钮。它包括将碎片移动到正确的位置。如果用户未能将一块放在某个地方，则该块将回到其原始位置。

该部分完美运行，一旦我“删除”该视图并在其他屏幕上继续，问题就开始了。每当我点击屏幕上的任何地方时，视图都会无限增加。为什么会这样？

我该怎么办？，我很绝望，我已经尝试了几乎所有的方法，包括忽略触摸，阻止触摸等。这只会造成更多的麻烦。

我已经尝试将使用交互设置为否，忽略交互事件，自动释放视图，但我还没有找到解决方案。

任何帮助将不胜感激。问候！

---> 我尝试发布图片，但鉴于我是新手，我无法发布，但是如果需要，我可以将图片发送给任何人，以向您展示我得到的奇怪效果。

```
-(void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event {
    [self touchesCancelled:touches withEvent:event];
}

-(IBAction) navigationConversation: (id)sender{
    //[self.view.superview setUserInteractionEnabled:NO];
    //[[UIApplication sharedApplication] endIgnoringInteractionEvents];
    if (nextButton.hidden == NO) {
        conversation *navigationConversationController=[[conversation alloc]     initWithNibName:@"conversation" bundle:nil];
        [self.view addSubview:navigationConversationController.view];
        if (self.view.superview == nil)
            [navigationConversationController autorelease];
    }
    return;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:18:03.903

感谢上帝，现在问题已经解决了。这是我所做的更改，这纠正了错误。:)

```
-(IBAction) navigationConversation: (id)sender{
    if (nextButton.hidden == NO) {
        //I disabled the interactions with the puzzle view in here, thus eliminating the problem
        [self.view.superview setUserInteractionEnabled:NO];
        conversation *navigationConversationController=[[conversation alloc]     initWithNibName:@"conversation" bundle:nil];
        [self.view addSubview:navigationConversationController.view];
        if (self.view.superview == nil)
            [navigationConversationController autorelease];
    }
    return;
} 
```

感谢所有看过的人！并想帮忙！我希望这适用于其他有同样问题的人。

# sql - SQL 从另一个表中选择具有最小值的表中的行

> ID：11132621
> 
> 赞同：1
> 
> 时间：2012-06-21T06:22:48.483
> 
> 标签：sql

我想这不是那么难，但我无法得到它。

例如我有表`T1`：

```
ID    
-----
1000
1001 
```

我有桌子`T2`：

```
ID      GROUP  DATE
--------------------------
1000    ADSL   2.2.2012
1000    null   3.2.2012
1000    NOC    4.2.2012
1001    NOC    5.2.2012
1001    null   6.2.2012
1001    TV    7.2.2012 
```

我只想从具有作为值的`T1`行中进行选择，但前提是group是.`GROUP``NOC``T2``NOC``DATE``T2`

所以我在这种情况下的结果只是`1001`因为它的最低`DATE`5.2.2012 Group 是`NOC`！

我不想要任何连接，也不能使用 ID ( `where id=1000 or id=1001`) 的默认值，因为这只是一些大表的示例。

重要的是我不能使用`t1.id = t2.id`，因为在我使用它的某些应用程序中，我不能编写整个 SQL 表达式，而只能写部分。我只能使用id。

我试过类似的东西：

```
select id 
from t1 
where
   id in (select id from t2 
          where group = 'NOC' 
          and date in (select min(date) from t2 
                       where id in (select id from t1) 
                      )
         ) 
```

但这不起作用。

我知道这似乎有点令人困惑，但我真的无法使用`where t1.id = t2.id`

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T14:29:57.427

如果`T2.ID`是外键引用`T1.ID`，则您实际上并不需要该`T1`表，因为所有 ID 只能从以下位置获取`T2`：

```
SELECT o.ID
FROM T2 AS o
WHERE EXISTS (
  SELECT MIN(i.DATE)
  FROM T2 AS i
  WHERE i.ID = o.ID
  HAVING MIN(i.DATE) = o.DATE
)
WHERE o."GROUP" = 'NOC' 
```

但是如果你坚持涉及`T1`，你只需要像这样修改上面的内容：

```
**SELECT *
FROM T1
WHERE ID IN (**
  SELECT o.ID
  FROM T2 AS o
  WHERE o."GROUP" = 'NOC'
    AND EXISTS (
      SELECT MIN(i.DATE)
      FROM T2 AS i
      WHERE i.ID = o.ID
      HAVING MIN(i.DATE) = o.DATE
    )
**)** 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T06:34:34.433

您可以分多个步骤执行此操作吗？

首先，要获得每个 id 的最短日期，您需要：

```
select id, peoplegroup, min(date)
from t2
group by id 
```

那会给你

```
1000    ADSL   2.2.2012
1001    NOC    5.2.2012 
```

将此表称为 t3。

然后做

```
select id
from t3
where id in (
  select id from t1
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T06:58:37.930

试试这个：

```
select id from t1 where id in
 (select id from t2 where group = 'NOC' and date =
   (select min(date) from t2 where id = t1.id)) 
```

# android - Android：java.lang.IllegalStateException 和 SQLiteDatabase.queryWithFactory()

> ID：11132625
> 
> 赞同：0
> 
> 时间：2012-06-21T06:23:01.103
> 
> 标签：android

我在 2 个月前发布了我的应用程序，有时我会收到一些关于错误的报告。

这是错误报告：

```
java.lang.RuntimeException: Unable to start activity    ComponentInfo{mdpi.android/mdpi.android.User_Registration_Country_Choosing}: java.lang.IllegalStateException: database not open
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
at android.app.ActivityThread.access$1500(ActivityThread.java:117)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3687)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.IllegalStateException: database not open
at android.database.sqlite.SQLiteDatabase.queryWithFactory(SQLiteDatabase.java:1232)
at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1191)
at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1273)
at mdpi.android.database.LocalDatabase.getAllCountrys(LocalDatabase.java:310)
at    mdpi.android.User_Registration_Country_Choosing.onCreate(User_Registration_Country_Choosing.java:81)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
... 11 more 
```

奇怪的是，当我测试应用程序时，我更新了这个错误......

你有一个想法可能是什么问题？？？

谢谢你。

这是 User_Registration_country_Choosing 的代码

```
public class User_Registration_Country_Choosing extends Activity implements TextWatcher {

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState); 

    setContentView(R.layout.choosecountry);

//      Disable the Strict mode
    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
    StrictMode.setThreadPolicy(policy);

    Country = (EditText) findViewById(R.id.CountryName);
    Country.requestFocus();

    Bundle b                        = this.getIntent().getExtras();    
    user =  new User_Database(0, null, null, null, null, null, null, null, null, null);
    registrationConfirmPassword     = b.getString("registrationConfirmPassword");
    user                            = b.getParcelable("user");

    InputMethodManager inputManager = (InputMethodManager)
            getSystemService(Context.INPUT_METHOD_SERVICE); 
    try{
    inputManager.showSoftInput(Country, InputMethodManager.SHOW_IMPLICIT);
    }
    catch (Exception e)
    {}

    Country.addTextChangedListener(this);
    String ChooseCountry = "'%%'";
    List<Country> values = LocalDatabase.getAllCountrys(ChooseCountry);

    ListView lv = (ListView)findViewById(R.id.listView1);
    lv.setAdapter(new ArrayAdapter<Country>(
            this,R.layout.country_list_black_text,R.id.list_content, values));

    lv.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, final View view,
            int position, long id) {
            TextView textView = (TextView) view.findViewById(R.id.list_content);
            final String choosencountry = textView.getText().toString(); 
            Toast.makeText(mContext, "You choosed: "+choosencountry, Toast.LENGTH_LONG).show();
            user.setcountry(choosencountry);
            KeyboardDown();
            new Handler().postDelayed(new Runnable() {
                public void run() {

                    Intent myIntent = new Intent(view.getContext(), UserRegistration.class);
                    Bundle b                = new Bundle();
                    b.putParcelable("user", user);
                    b.putString("registrationConfirmPassword", registrationConfirmPassword);
                    myIntent.putExtras(b);
                    startActivityForResult(myIntent, 0);  
                    KeyboardDown(); 
                    finish(); 
                    }
                }, 3500);
            }
        });
  }

public void afterTextChanged(Editable arg0) {}

public void beforeTextChanged(CharSequence arg0, int arg1, int arg2,
        int arg3) { }

public void onTextChanged(CharSequence s, int start, int before, int count) {
    EditText Country;
    Country = (EditText) findViewById(R.id.CountryName);
    String country = Country.getText().toString();
    String ChooseCountry = "'"+country+"%'";
    List<Country> values = LocalDatabase.getAllCountrys(ChooseCountry);

    ListView lv = (ListView)findViewById(R.id.listView1);
    lv.setAdapter(new ArrayAdapter<Country>(
            this,R.layout.country_list_black_text,R.id.list_content, values));
}

public void KeyboardDown(){
    InputMethodManager inputManager = (InputMethodManager)
            getSystemService(Context.INPUT_METHOD_SERVICE); 
    try{
    inputManager.hideSoftInputFromWindow(getCurrentFocus().getWindowToken(),
               InputMethodManager.HIDE_NOT_ALWAYS);
    }
    catch (Exception e)
    {}
}
} 
```

这是 LocalDatabase.java 的代码

```
package mdpi.android.database;

public class LocalDatabase {

public LocalDatabase(Context context){
    databasetables = new DatabaseTables(context, NAME_Database, null, VERSION_BDD);
}

public void open(){
    Database = databasetables.getWritableDatabase();
}

public void close(){
    Database.close();
}

public SQLiteDatabase getBDD(){
    return Database;
}

public static long insertUser(User_Database user){
    ContentValues values = new ContentValues();
    values.put("ID", user.getuserId());
    values.put("email", user.getemail());
    values.put("password", user.getpassword());
    values.put("first_name", user.getfirstname());
    values.put("last_name", user.getlastname());
    values.put("street", user.getstreet());
    values.put("postal_code", user.getpostalcode());
    values.put("city", user.getcity());
    values.put("country", user.getcountry());
    values.put("alert_frequency", user.getalertfrequency());
    return Database.insert("user", null, values);
}

public static long insertSubmission(Submissions_Database submission){
    ContentValues values = new ContentValues();
    values.put("ID", submission.getID());
    values.put("hash", submission.getHashKey());
    values.put("journalId", submission.getJournalID());
    values.put("title", submission.getTitle());
    values.put("subtitle", submission.getSubTitle());
    values.put("date", submission.getDate());
    values.put("status", submission.getStatus());
    values.put("journal_title", submission.getJournalTitle());
    return Database.insert("submission", null, values);
}

public static long insertSubmissionLog(SubmissionLog_Database submissionLog){
    ContentValues values = new ContentValues();
    values.put("title", submissionLog.getTitle());
    values.put("hash", submissionLog.getHashKey());
    values.put("date", submissionLog.getDate());
    return Database.insert("submissionlog", null, values);
}

public static long insertSubscriptionsFromTheServer(Subscription_Database subscriptions){
    ContentValues values = new ContentValues();
    values.put("journalId", subscriptions.getJournalID());
    return Database.insert("subscriptions", null, values);
}

public static long insertSubscriptionsFromtTheJournalList(int journalId){
    ContentValues values = new ContentValues();
    values.put("journalId", journalId);
    return Database.insert("subscriptions", null, values);
}

public static long insertCountry(Country country){
    ContentValues values = new ContentValues();
    values.put("id", country.getid());
    values.put("name", country.toString());
    return Database.insert("country", null, values);    
}

public static long insertJournal(Journal_Database journals){
    ContentValues values = new ContentValues();
    values.put("journalId", journals.getJournalID());
    values.put("nameFull", journals.getNameFull());
    values.put("nameShort", journals.getNameShort());
    values.put("nameSystem", journals.getNameSystem());
    values.put("about", journals.getAbout());
    values.put("nameIso4", journals.getNameIso4());
    values.put("namePubmed", journals.getNamePubmed());
    values.put("namePubmedShort", journals.getNamePubmedShort());
    values.put("ISSNElectronic", journals.getISSNElectronic());
    values.put("coden", journals.getCoden());
    values.put("APCChf", journals.getAPCChf());
    values.put("APCCny", journals.getAPCCny());
    values.put("APCEngChf", journals.getAPCEngChf());
    values.put("APCEngCny", journals.getAPCEngCny());
    values.put("APCFormatChf", journals.getAPCFormatChf());
    values.put("SCITracked", journals.getSCITracked());
    values.put("impactFactor", journals.getImpactFactor());
    values.put("ImpactFactor5years", journals.getImpactFactor5years());
    values.put("ImpactFactorYear", journals.getImpactFactorYear());
    values.put("EstablishedYear", journals.getEstablishedYear());
    values.put("ShortDescription", journals.getShortDescription());
    values.put("AcceptedPapers", journals.getAcceptedPapers());
    values.put("StyleHeaderLight", journals.getStyleHeaderLight());
    values.put("StyleHeaderDark", journals.getStyleHeaderLight());
    values.put("CurrentIssue", journals.getCurrentIssue());
    values.put("FurthcomingIssue", journals.getForthcomingIssue());
    values.put("ContactEmail", journals.getContactEmail());
    values.put("ContactID", journals.getContactID());
    values.put("Pubfrequency", journals.getPubfrequency());
    values.put("PublicFlag", journals.getPublicFlag());
    values.put("ReviewRequestTime", journals.getReviewRequestTime());
    values.put("DOIAbbreviation", journals.getDOIAbbreviation());
    return Database.insert("journals", null, values);
}

public static void delateSubscribedJournal(int journalId){
    Database.execSQL("DELETE FROM subscriptions WHERE journalId ="+journalId);
}

public static void deleteSubmissionLog(){
    Database.execSQL("DELETE FROM submissionlog");
}

public static void deleteSubscriptions(){
    Database.execSQL("DELETE FROM subscriptions");
}

public static void deleteUser(){
    Database.execSQL("DELETE FROM user");
}

public static void deleteUserSubmissions(){
    Database.execSQL("DELETE FROM submission");
}

public static void deleteHistory(){ 
    Database.execSQL("DELETE FROM history");
}

public static void deleteJournals()
{
    Database.execSQL("DELETE FROM journals");
}

public static void deleteEditorialBoard()
{
    Database.execSQL("DELETE FROM editorialboard");
}

public static void deleteHighlights_News()
{
    Database.execSQL("DELETE FROM highlights_news");
}
public static void deleteHighlights_NewSpecialIssues()
{
    Database.execSQL("DELETE FROM highlights_new_special_issues");
}

public static List<Country> getAllCountrys(String ChooseCountry) {
    List<Country> countrys = new ArrayList<Country>();

    Cursor cursor = Database.query("country",
            CountryColName,"name like " + ChooseCountry, null, null, null, null);

    cursor.moveToFirst();
    while (!cursor.isAfterLast()) {
        Country country = cursorToCountry(cursor);
        countrys.add(country);
        cursor.moveToNext();
    }
    cursor.close();
    return countrys;
}

public static  String getChoosenCountryName(String countryIdString) {

    if (countryIdString!=null)
    {
    int countryIdInt=Integer.decode(countryIdString);

    Cursor cursor = Database.query("country",
            CountryColName,"id like " + countryIdInt, null, null, null, null);

    cursor.moveToFirst();
    String countryName = null;
    while (!cursor.isAfterLast()) {
        countryName = cursor.getString(0);      
        cursor.moveToNext();
    }
    cursor.close();
    return countryName;
    }
    return "";
}

public static  int getChoosenCountryId(String countryName) {
    Cursor cursor = Database.query("country",
            CountryColId,"name like "+"'"+countryName+"'", null, null, null, null);

    cursor.moveToFirst();
    int countryId = 0;
    while (!cursor.isAfterLast()) {
        countryId = cursor.getInt(0);
        cursor.moveToNext();
    }
    cursor.close();
    return countryId;
}

private static Country cursorToCountry(Cursor cursor) {
    Country country = new Country(0,null);
    country.setname(cursor.getString(0));
    return country;
}

public static long updateJournal(int journalId, String updateRow,String value){
    ContentValues values = new ContentValues();
    values.put(updateRow,value);
    return Database.update("journals", values, "journalId="+ journalId, null);
}

public static int CheckCountryPresence() {
    final SQLiteStatement stmt = 
    Database.compileStatement("SELECT COUNT(*) FROM COUNTRY");
    return (int) stmt.simpleQueryForLong();
}

public static int CheckOfficesPresence() {
    final SQLiteStatement stmt = 
    Database.compileStatement("SELECT COUNT(*) FROM OFFICES");
    return (int) stmt.simpleQueryForLong();
}

private static User_Database cursorToUser(Cursor cursor) {
    User_Database user = new User_Database(0, null, null, null, null, null, null, null, null, null);
    user.setuserId(cursor.getInt(0));
    user.setemail(cursor.getString(1));
    user.setpassword(cursor.getString(2));
    user.setfirstname(cursor.getString(3));
    user.setlastname(cursor.getString(4));
    user.setstreet(cursor.getString(5));
    user.setpostalcode(cursor.getString(6));
    user.setcity(cursor.getString(7));
    user.setcountry(cursor.getString(8));
    user.setalertfrequency(cursor.getString(9));
    return user;
}

public static User_Database getUserInformations() {
    User_Database user = new User_Database(0, null, null, null, null, null, null, null, null, null);
    Cursor cursor = Database.query("user",
            UserCol_All,"", null, null, null, null);

    cursor.moveToFirst();
    while (!cursor.isAfterLast()) {
        user = cursorToUser(cursor);
        cursor.moveToNext();
    }
    cursor.close();
    return user;
}

public static ArrayList<Submissions_Database> getAllSubmissions() {
    ArrayList<Submissions_Database> submissions = new ArrayList<Submissions_Database>();

    Cursor cursor = Database.query("submission",
            SubmissionCOL_All,"", null, null, null, "date DESC");
    cursor.moveToFirst();
    while (!cursor.isAfterLast()) {
        Submissions_Database submission = cursorToSubmissions(cursor);
        submissions.add(submission);
        cursor.moveToNext();
    }
    cursor.close();
    return submissions;
}

public static Submissions_Database getSelectedSubmission(String hashKey) {

    Cursor cursor = Database.query("submission",
            SubmissionCOL_All,"hash like "+"'"+hashKey+"'", null, null, null, null);
    Submissions_Database submission = new Submissions_Database(0, null, 0, null, null, null, 0, null);
    cursor.moveToFirst();
    while (!cursor.isAfterLast()) {
        submission = cursorToSubmissions(cursor);
        cursor.moveToNext();
    }
    cursor.close();
    return submission;
}

public static ArrayList<Submissions_Database> getAllSearchedSubmissions(String submissionName) {
    ArrayList<Submissions_Database> submissions = new ArrayList<Submissions_Database>();

    Cursor cursor = Database.query("submission",
            SubmissionCOL_All,
            "title like '%"+submissionName+"%'"
            +" OR subtitle like '%"+submissionName+"%'"
            +" OR id like '%"+submissionName+"%'",
            null, null, null, "date DESC", "10");
    cursor.moveToFirst();
    while (!cursor.isAfterLast()) {
        Submissions_Database submission = cursorToSubmissions(cursor);
        submissions.add(submission);
        cursor.moveToNext();
    }
    cursor.close();
    return submissions;
}

private static Submissions_Database cursorToSubmissions(Cursor cursor) {
    Submissions_Database submission = new Submissions_Database(0, null, 0, null, null, null, 0, null);
    submission.setJournalTitle(cursor.getString(0));

    String SubmissionJournalDate = "Unknown";
    SubmissionJournalDate = cursor.getString(1);

    if (SubmissionJournalDate ==null)
    {
        submission.setDate("Unknown");
    }
    else
    {
        SimpleDateFormat fmt = new SimpleDateFormat("yyyy-MM-dd");
        try 
        {
            Date date = fmt.parse(SubmissionJournalDate);
            SimpleDateFormat fmtOut = new SimpleDateFormat("dd-MM-yyyy");
            submission.setDate(fmtOut.format(date));
        }
        catch(ParseException pe) 
        {
            submission.setDate("Unknown");   
        }
    }
    submission.setTitle(cursor.getString(2));
    submission.setID(cursor.getInt(3));
    submission.setHashKey(cursor.getString(4));
    submission.setStatus(cursor.getInt(5));
    return submission;
}

public static int getSubmissionsSize() {
    try{
    final SQLiteStatement stmt = Database
            .compileStatement("SELECT MAX(rowid) FROM submission");
    return (int) stmt.simpleQueryForLong();
    }
    catch (Exception e) {
        return 0;
    }
}

public static ArrayList<Journal_Database> getAllPublicJournalNames() {
    ArrayList<Journal_Database> journals = new ArrayList<Journal_Database>();
    Cursor cursor = Database.query("journals",
            JournalsCOL_All,"publicFlag like 1", null, null, null, "nameSystem");
    cursor.moveToFirst();
    while (!cursor.isAfterLast()) {
        Journal_Database journalObject = cursorToJournals(cursor);
        journals.add(journalObject);
        cursor.moveToNext();
    }
    cursor.close();
    return journals;
}

public static ArrayList<Journal_Database> getAllSearchedJournals(String journalName, String limit ) {
    ArrayList<Journal_Database> journals = new ArrayList<Journal_Database>();
    Cursor cursor = Database.query("journals",
            JournalsCOL_All,
            "nameSystem like '%"+journalName+"%' AND PublicFlag = 1"
            +" OR nameFull like '%"+journalName+"%' AND PublicFlag = 1"
            +" OR nameShort like '%"+journalName+"%' AND PublicFlag = 1"
            , null, null, null, "nameSystem", limit );
    cursor.moveToFirst();
    while (!cursor.isAfterLast()) {
        Journal_Database journalObject = cursorToJournals(cursor);
        journals.add(journalObject);
        cursor.moveToNext();
    }
    cursor.close();
    return journals;
}

private static Subscription_Database cursorToSubscriptions(Cursor cursor) {
    Subscription_Database subscription = new Subscription_Database(0);
    subscription.setJournalID(cursor.getInt(0));
    return subscription;
}

public static boolean JournalPresence() {
    final SQLiteStatement stmt = 
    Database.compileStatement("SELECT COUNT(*) FROM JOURNALS");
    if (stmt.simpleQueryForLong()==0){
    return false;
    }
    else{
        return true;
    }
}

public static String getJournalNameShort(int journalId){
    Cursor cursor2 = Database.query("journals",
            JournalCOL_NameShort,"journalId like "+"'"+journalId+"'", null, null, null, null);
    cursor2.moveToFirst();
    String Title = "";
    while (!cursor2.isAfterLast()) {
        Title = cursor2.getString(0);
        cursor2.moveToNext();
    }
    cursor2.close();
    return Title;
}

public static String getJournalEditorialBoard(int journalId){
    Cursor cursor2 = Database.query("editorialboard",
            EditorialBoard_All,"journalId like "+"'"+journalId+"'", null, null, null, null);
    cursor2.moveToFirst();
    String EditorialBoard = "";
    while (!cursor2.isAfterLast()) {
        EditorialBoard = cursor2.getString(2)+cursor2.getString(0)+cursor2.getString(1);
        cursor2.moveToNext();
    }
    cursor2.close();
    return EditorialBoard;
}

public static ArrayList<Subscription_Database> getAllSubscribedJournals() {
    ArrayList<Subscription_Database> journals = new ArrayList<Subscription_Database>();
    Cursor cursor = Database.query("subscriptions",
            SubscriptionCOL_JournalId,"", null, null, null, null);
    cursor.moveToFirst();
    while (!cursor.isAfterLast()) {
        Subscription_Database subscription = cursorToSubscriptions(cursor);
        journals.add(subscription);
        cursor.moveToNext();
    }
    cursor.close();
    return journals;
}

public static int getHistoryLastSuccessfullUpdate(){
    Cursor cursor2 = Database.query("history",
            HistoryCOL_LastSuccessfullUpdate,"", null, null, null, null);
    cursor2.moveToFirst();
    int lastSuccessfullUpdate = 0;
    lastSuccessfullUpdate = cursor2.getInt(0);
    cursor2.close();
    return lastSuccessfullUpdate;
}

public static int CheckMDPIPresence() 
{
    final SQLiteStatement stmt = 
    Database.compileStatement("SELECT COUNT(*) FROM mdpi");
    return (int) stmt.simpleQueryForLong();
}

public static String getJournalAimsAndScope(String journalNameShort)
{
    Cursor cursor2 = Database.query("journals",
            JournalCOL_Abaut,"nameSystem ="+"'"+journalNameShort+"'", null, null, null, null);
    cursor2.moveToFirst();
    String aimsAndScope = null;
    aimsAndScope = cursor2.getString(0);
    cursor2.close();
    return aimsAndScope;
}

public static int getJournalIdFromNameShort(String journalNameShort)
{
    Cursor cursor2 = Database.query("journals",
            JournalCOL_Id,"nameShort ="+"'"+journalNameShort+"'", null, null, null, null);
    cursor2.moveToFirst();
    int journalId = 0;
    while (!cursor2.isAfterLast()) {
        journalId = cursor2.getInt(0);
        cursor2.moveToNext();
    }
    cursor2.close();
    return journalId;
}

public static String getJournalNameShortFromNameSystem(String journalNameSystem)
{
    Cursor cursor2 = Database.query("journals",
            JournalCOL_NameShort,"nameSystem ="+"'"+journalNameSystem+"'", null, null, null, null);
    cursor2.moveToFirst();
    String journalNameShort = null;
    while (!cursor2.isAfterLast()) {
        journalNameShort = cursor2.getString(0);
        cursor2.moveToNext();
    }
    cursor2.close();
    return journalNameShort;
}

public static int getJournalIdFromNameSystem(String journalNameShort)
{
    Cursor cursor2 = Database.query("journals",
            JournalCOL_Id,"nameSystem ="+"'"+journalNameShort+"'", null, null, null, null);
    cursor2.moveToFirst();
    int journalId = 0;
    while (!cursor2.isAfterLast()) {
        journalId = cursor2.getInt(0);
        cursor2.moveToNext();
    }
    cursor2.close();
    return journalId;
}

public static boolean editorialBoardExistsAllready(int journalId) {
    final SQLiteStatement stmt = 
            Database.compileStatement("SELECT COUNT(*) FROM editorialboard WHERE journalId ="+journalId);
            long count= stmt.simpleQueryForLong();
    if (count==1)
        return true;
    else
    return false;
}

public  static String getEditorialboardValue(int journalId, String row) {
    String[] editorialBoardValue = {row};
    Cursor cursor = Database.query("editorialboard",
            editorialBoardValue, "journalId ="+journalId, null, null, null,null);
    cursor.moveToFirst();
    String result = "";
        result = cursor.getString(0);
    cursor.close();
    return result;
}

public static String getJournalISSNfromJournalId(int journalId){
    Cursor cursor2 = Database.query("journals",
            JournalCOL_ISSNelectronic,"journalId like "+journalId, null, null, null, null);
    cursor2.moveToFirst();
    String ISSNElectronic = null;
    while (!cursor2.isAfterLast()) {
        ISSNElectronic = cursor2.getString(0);
        cursor2.moveToNext();
    }
    cursor2.close();
    return ISSNElectronic;
}

public  static String getMDPIAbaut() {
    Cursor cursor = Database.query("mdpi",
            MDPIColAbaut,"", null, null, null, null);
    cursor.moveToFirst();
    String abaut = null;
    while (!cursor.isAfterLast()) {
        abaut = cursor.getString(0);        
        cursor.moveToNext();
    }
    cursor.close();
    return abaut;
}

public  static String getMDPIOpenAccess() {
    Cursor cursor = Database.query("mdpi",
            MDPIColOpenAccess,"", null, null, null, null);
    cursor.moveToFirst();
    String openAccess = null;
    while (!cursor.isAfterLast()) {
        openAccess = cursor.getString(0);       
        cursor.moveToNext();
    }
    cursor.close();
    return openAccess;
}

public  static ArrayList<String>  getOfficesHTML() {
    Cursor cursor = Database.query("offices",
            OfficesColHTML,"", null, null, null, null);
    cursor.moveToFirst();
    ArrayList<String> officesHTML = new ArrayList<String>();
    while (!cursor.isAfterLast()) {
        officesHTML.add(cursor.getString(0));       
        cursor.moveToNext();
    }
    cursor.close();
    return officesHTML;
}

public  static ArrayList<String>  getPublicJournalsNameSystem() {
    Cursor cursor = Database.query("journals",
            JournalCOL_NameSystem,"publicFlag like 1", null, null, null, "nameSystem");
    cursor.moveToFirst();
    ArrayList<String> publicJournalsNameSystem = new ArrayList<String>();
    while (!cursor.isAfterLast()) {
        publicJournalsNameSystem.add(cursor.getString(0));      
        cursor.moveToNext();
    }
    cursor.close();
    return publicJournalsNameSystem;
}

public  static ArrayList<String>  getPublicSearchedJournalsNameSystem(String journalName) {
    Cursor cursor = Database.query("journals",
            JournalCOL_NameSystem,"publicFlag like 1 AND nameSystem like "+journalName, null, null, null, "nameSystem");
    cursor.moveToFirst();
    ArrayList<String> publicJournalsNameSystem = new ArrayList<String>();
    while (!cursor.isAfterLast()) {
        publicJournalsNameSystem.add(cursor.getString(0));      
        cursor.moveToNext();
    }
    cursor.close();
    return publicJournalsNameSystem;
}

public  static ArrayList<String>  getPublicJournalsNameShort() {
    Cursor cursor = Database.query("journals",
            JournalCOL_NameShort,"publicFlag like 1", null, null, null, "nameShort");
    cursor.moveToFirst();
    ArrayList<String> publicJournalsNameShort = new ArrayList<String>();
    while (!cursor.isAfterLast()) {
        publicJournalsNameShort.add(cursor.getString(0));       
        cursor.moveToNext();
    }
    cursor.close();
    return publicJournalsNameShort;
}

public static String getHistoryLastSelectedJournalNameSystem(){
    Cursor cursor2 = Database.query("history",
            HistoryCOL_LastSelectedJournal,"", null, null, null, null);
    cursor2.moveToFirst();
    String lastSelectedJournal = null;

    lastSelectedJournal = cursor2.getString(0);
    cursor2.close();
    return lastSelectedJournal;
}

public static Journal_Database getHistoryLastSelectedJournal(String lastSelectedJournalNameSystem){
    Cursor cursor = Database.query("journals",
            JournalsCOL_All,"nameSystem like "+"'"+lastSelectedJournalNameSystem+"'", null, null, null, null);
    cursor.moveToFirst();
        Journal_Database lastSelectedJournal = cursorToJournals(cursor);
        cursor.moveToNext();
    cursor.close();
    return lastSelectedJournal;
}
private static Journal_Database cursorToJournals(Cursor cursor) {
    Journal_Database journal = new Journal_Database(0, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, 0, null, null);
    journal.setJournalID(cursor.getInt(0));
    journal.setNameFull(cursor.getString(1));
    journal.setNameShort(cursor.getString(2));
    journal.setNameSystem(cursor.getString(3));
    journal.setAbout(cursor.getString(4));
    journal.setNameIso4(cursor.getString(5));
    journal.setNamePubmed(cursor.getString(6));
    journal.setNamePubmedShort(cursor.getString(7));
    journal.setISSNElectronic(cursor.getString(8));
    journal.setCoden(cursor.getString(9));
    journal.setAPCChf(cursor.getString(10));
    journal.setAPCCny(cursor.getString(11));
    journal.setAPCEngChf(cursor.getString(12));
    journal.setAPCEngCny(cursor.getString(13));
    journal.setAPCFormatChf(cursor.getString(14));
    journal.setSCITracked(cursor.getString(15));
    journal.setImpactFactor(cursor.getString(16));
    journal.setImpactFactor5years(cursor.getString(17));
    journal.setImpactFactorYear(cursor.getString(18));
    journal.setEstablishedYear(cursor.getString(19));
    journal.setShortDescription(cursor.getString(20));
    journal.setAcceptedPapers(cursor.getString(21));
    journal.setStyleHeaderLight(cursor.getString(22));
    journal.setStyleHeaderDark(cursor.getString(23));
    journal.setForthcomingIssue(cursor.getString(24));
    journal.setContactEmail(cursor.getString(25));
    journal.setContactID(cursor.getString(26));
    journal.setPubfrequency(cursor.getString(27));
    journal.setPublicFlag(cursor.getInt(28));
    journal.setReviewRequestTime(cursor.getString(29));
    journal.setDOIAbbreviation(cursor.getString(30));
    return journal;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T06:40:11.037

您需要更改访问数据库的模式。

最重要的是，如果您没有它，请制作一个数据库助手。这样做的主要原因是可以同时访问数据库进行写入。SQLite 可以同时从 2 个地方进行写入访问。数据库助手会处理这个问题。

这是一个可能对您有所帮助的 DBHelper 代码示例。请注意，这是用于使用 ORMLite 库数据库助手，但它与常规助手几乎相同。

```
public class DatabaseHelper extends OrmLiteSqliteOpenHelper {

    private static final String DATABASE_NAME = "database.db";
    private static final int DATABASE_VERSION = 6;

    private static final AtomicInteger usageCounter = new AtomicInteger(0);
    // we do this so there is only one helper
    private static DatabaseHelper helper = null;

    /**
     * Use the {@link #DatabaseHelper(Context, String)}
     *
     * @param context
     */
    public DatabaseHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION, R.raw.ormlite_config);
    }

    @Override
    public void onCreate(SQLiteDatabase sqliteDatabase, ConnectionSource connectionSource) {
    }

    @Override
    public void onUpgrade(SQLiteDatabase sqliteDatabase, ConnectionSource connectionSource,
                }

    /**
     * Get the helper, possibly constructing it if necessary. For each call to this method, there
     * should be 1 and only 1 call to {@link #close()}.
     */
    public static synchronized DatabaseHelper getHelper(Context context) {
        if (helper == null) {
            initHelper(context);
        }
        usageCounter.incrementAndGet();
        return helper;
    }

    private static void initHelper(Context context) {
        helper = new DatabaseHelper(context);
        usageCounter.set(0);
    }

    /**
     * Close the database connections and clear any cached DAOs. For each call to
     * {@link #getHelper(Context)}, there should be 1 and only 1 call to this method. If there were
     * 3 calls to {@link #getHelper(Context)} then on the 3rd call to this method, the helper and
     * the underlying database connections will be closed.
     */
    @Override
    public void close() {
        if (usageCounter.decrementAndGet() <= 0) {
            super.close();
            helper = null;
        }
    }
} 
```

因此，这显示了如何拥有一个打开的数据库实例并访问它。

每次你想进行一些数据库操作时调用 getHelper(context) 方法，完成后你必须调用 close。请注意，对于每个 getHelper 方法，您需要调用 close。因此，使用它的一种常见方法是在活动的 onCreate 中获取引用并在 onDestroy 中关闭它（也许制作一个抽象的基础活动来分组此功能）。

还要记住，即使在活动关闭后也可能存在的代码（例如异步任务）中单独使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T06:53:53.033

问题是你忘了打电话`open()`。

你从来没有调用过`open()`函数`LocalDatabase`

# c# - 为什么我应该使用 IQueryable 列表 在 LINQ to SQL 中

> ID：11132626
> 
> 赞同：8
> 
> 时间：2012-06-21T06:23:06.547
> 
> 标签：c#, .net, design-patterns, linq-to-sql, repository-pattern

> **可能重复：**
> [返回 IQueryable<T> 或不返回 IQueryable<T>](https://stackoverflow.com/questions/718624/to-return-iqueryablet-or-not-return-iqueryablet)

我有如下实现的 LINQ to SQL 存储库。GetAll 方法正在返回一个泛型 List 而不是 IQueryable。然而，在大多数示例和教程中，pit 显示为返回 IQueryable。恢复 IQueryable 有什么好处？

```
using System.Linq;
namespace RepositoryLayer
{
public interface IRepository<T> where T : class
{
    //System.Linq.IQueryable<T> GetAll();
    System.Collections.Generic.List<T> GetAll();
}

public class Repository<T> : IRepository<T> where T : class
{
    public System.Data.Linq.DataContext Context
    {
        get;
        set;
    }

    //public virtual System.Linq.IQueryable<T> GetAll()
    //{
    //    //GetAll is returning generic Queryable<T>. 
    //    System.Linq.IQueryable<T> allItems = Context.GetTable<T>();
    //    return allItems;
    //}

    public virtual System.Collections.Generic.List<T> GetAll()
    {

        System.Linq.IQueryable<T> allItems = Context.GetTable<T>();
        return allItems.ToList();
    }

  }
} 
```

业务层

```
namespace BusinessLayerProject
{
public class AccountBusiness
{
    //IRepository<T>
    RepositoryLayer.IRepository<RepositoryLayer.Account> accountRepository;
    public AccountBusiness(RepositoryLayer.IRepository<RepositoryLayer.Account> repo)
    {
        accountRepository = repo;
    }

    //public List<RepositoryLayer.Account> GetAllAccounts()
    //{

    //    //LibraryManagementClassesDataContext context = new LibraryManagementClassesDataContext();
    //    //List<RepositoryLayer.Account> accontList = context.Accounts.ToList();

    //    System.Linq.IQueryable<RepositoryLayer.Account> acc = accountRepository.GetAll();
    //    return acc.ToList();
    //}

    public List<RepositoryLayer.Account> GetAllAccounts()
    {
        List<RepositoryLayer.Account> acc = accountRepository.GetAll();
        return acc;
    }

 }
} 
```

阅读

1.  [为每个对象创建通用存储库与特定存储库的优势？](https://stackoverflow.com/questions/1230571/advantage-of-creating-a-generic-repository-vs-specific-repository-for-each-obje?lq=1)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T06:26:26.577

使用`IQueryable`let LINQ 通过创建不同的 SQL 查询将一些额外的工作转移到 DB 中。例如。当您尝试使用类似的东西`GetAll().Where(condition)`并使用时`List`，将从数据库中查询所有项目，并在应用程序端检查条件。当您使用`IQueryable`它时，可以将其移至数据库，并且适当的项目直接从那里返回。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T06:26:26.597

`IQueryable`延伸`IEnumerable`。在迭代之前，两者都不会投影/膨胀它们的数据，而`IList`对象会提取所有数据并在分配时填充。

所以这是“延迟加载”与“急切加载”的区别。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T06:27:31.427

因为 IList 是 - 啊 - 不聪明？

开始了：

IIF yo uexport IQueryable - 在 Get 方法上，它是您唯一需要的方法。所有参数都进入 IQueryable 并且因为延迟执行最终在您的 SQL 层中。

导出 IList，然后 GET ALL 然后过滤 - 在内存中，这与 LINQ 的变态一样多。

这里真正的诀窍是，如果我将您的 Get 方法然后 .Where、OrderBy 输入数据库中的 sql 语句。

# regex - 两个分隔符之间的字符

> ID：11132627
> 
> 赞同：3
> 
> 时间：2012-06-21T06:23:11.557
> 
> 标签：regex

试图将一个正则表达式放在一起，返回 _ 和 _$ 之间的字符串（其中 $ 是字符串的结尾）。

输入：

```
abc_def_ghi_ 
```

所需的正则表达式结果：

```
def_ghi 
```

我已经尝试了很多组合，例如 thsi。

```
((([^_]*){1})[^_]*)_$ 
```

任何帮助表示赞赏。

注意：上面的正则表达式返回 abc_def，而不是所需的 def_ghi。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T06:27:14.490

所以它是第一个`_`和最后一个`_`（不包括）之间的一切？

然后尝试

```
(?<=_).*(?=_$) 
```

（希望你没有使用 JavaScript）

**解释：**

```
(?<=_)  # Assert that the previous character is a _
.*      # Match any number of characters...
(?=_$)  # ... until right before the final, string-ending _ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T06:28:26.410

您可以尝试利用运营商的贪婪来发挥自己的优势：

```
^.*?_(.*)_$ 
```

匹配从开头（非贪婪）到下划线的所有内容，从下划线到字符串的结尾，它期望和下划线，然后是字符串的结尾，并在第一次匹配中捕获它。

```
^    Beginning of string
.*?  Any number of characters, at least 0
_    Anchor-tag, literal underscore
(.*) Any number of characters, greedy
_    Anchor-tag, literal underscore
$    End of string 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-16T17:59:30.853

我在一个更大的日志条目中搜索这个：

```
"threat_name":"PUP.Optional.Wajam" 
```

该格式将字段名称用双引号括起来，然后是冒号，然后是双引号中的值。

这是我最终避免标点符号破坏正则表达式的结果..

```
threat_name["][:]["](?P<signature>.*?)["] 
```

（来自 regex101.com）

*   `threat_name`从字面上匹配字符threat_name（区分大小写）
*   `["]`匹配下面列表中的单个字符
*   `"`列表中的单个字符 " 字面意思（区分大小写）
*   `[:]`匹配下面列表中的单个字符
*   `:`文字字符：
*   `["]`匹配下面列表中的单个字符
*   `"`列表中的单个字符 " 字面意思（区分大小写）
*   `(?P<signature>.*?)`命名捕获组签名
*   `.*?`匹配任何字符（换行符除外）
*   `Quantifier: *?`零到无限次之间，尽可能少，按需扩展[懒惰]
*   `["]`匹配下面列表中的单个字符
*   `"`列表中的单个字符 " 字面意思（区分大小写）

# php - 联邦快递一般故障

> ID：11132628
> 
> 赞同：4
> 
> 时间：2012-06-21T06:23:18.463
> 
> 标签：php, soap, fedex

当我在使用fedex运输服务时调用processShipment方法时出现“一般故障”，我已按要求完成了所有操作，我不知道该服务有什么问题。

谁能告诉我这个请求中缺少什么？

```
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:v10="http://fedex.com/ws/ship/v10">
   <SOAP-ENV:Header/>
   <SOAP-ENV:Body>
      <v10:ProcessShipmentRequest>
         <v10:WebAuthenticationDetail>
            <v10:UserCredential>
                <v10:Key>XXXXX</v10:Key>
               <v10:Password>XXXXX</v10:Password>
            </v10:UserCredential>
         </v10:WebAuthenticationDetail>
         <v10:ClientDetail>
            <v10:AccountNumber>XXXXX</v10:AccountNumber>
            <v10:MeterNumber>XXXXX</v10:MeterNumber>
            <v10:IntegratorId>123</v10:IntegratorId>
            <v10:Localization>
               <v10:LanguageCode>EN</v10:LanguageCode>
               <v10:LocaleCode>ES</v10:LocaleCode>
            </v10:Localization>
         </v10:ClientDetail>
         <v10:TransactionDetail>
            <v10:CustomerTransactionId>PROCESS SHIPMENT</v10:CustomerTransactionId>
            <v10:Localization>
               <v10:LanguageCode>EN</v10:LanguageCode>
               <v10:LocaleCode>ES</v10:LocaleCode>
            </v10:Localization>
         </v10:TransactionDetail>
         <v10:Version>
            <v10:ServiceId>ship</v10:ServiceId>
            <v10:Major>10</v10:Major>
            <v10:Intermediate>0</v10:Intermediate>
            <v10:Minor>0</v10:Minor>
         </v10:Version>
         <v10:RequestedShipment>
            <v10:ShipTimestamp>2012-06-22T10:56:46-06:00</v10:ShipTimestamp>
            <v10:DropoffType>REGULAR_PICKUP</v10:DropoffType>
            <v10:ServiceType>FEDEX_GROUND</v10:ServiceType>
            <v10:PackagingType>YOUR_PACKAGING</v10:PackagingType>
            <v10:Shipper>
               <v10:AccountNumber>510087682</v10:AccountNumber>
               <v10:Tins>
                  <v10:TinType>PERSONAL_STATE</v10:TinType>
                  <v10:Number>1057</v10:Number>
                  <v10:Usage>ShipperTinsUsage</v10:Usage>
               </v10:Tins>
               <v10:Contact>
                  <v10:ContactId>RBB1057</v10:ContactId>
                  <v10:PersonName>ROHIT BORSE</v10:PersonName>
                  <v10:Title>Mr.</v10:Title>
                  <v10:CompanyName>DEOYAROHIT0705$</v10:CompanyName>
                  <v10:PhoneNumber>9762308621</v10:PhoneNumber>
                  <v10:PhoneExtension>02033469</v10:PhoneExtension>
                  <v10:PagerNumber>9762308621</v10:PagerNumber>
                  <v10:FaxNumber>9762308621</v10:FaxNumber>
                  <v10:EMailAddress>Rohit*Borse@DeoyaRohit.com</v10:EMailAddress>
               </v10:Contact>
               <v10:Address>
                  <v10:StreetLines>1202 Chalet Ln</v10:StreetLines>
                  <v10:StreetLines>Do Not Delete - Test Account</v10:StreetLines>
                  <v10:City>Harrison</v10:City>
                  <v10:StateOrProvinceCode>AR</v10:StateOrProvinceCode>
                  <v10:PostalCode>72601</v10:PostalCode>
                  <v10:UrbanizationCode>AR</v10:UrbanizationCode>
                  <v10:CountryCode>US</v10:CountryCode>
                  <v10:Residential>0</v10:Residential>
               </v10:Address>
            </v10:Shipper>
            <v10:Recipient>
               <v10:AccountNumber>510051408</v10:AccountNumber>
               <v10:Tins>
                  <v10:TinType>PERSONAL_STATE</v10:TinType>
                  <v10:Number>0705</v10:Number>
                  <v10:Usage>RecipientTinsUsage</v10:Usage>
               </v10:Tins>
               <v10:Contact>
                  <v10:ContactId>DRB0705</v10:ContactId>
                  <v10:PersonName>DEOYANEE BHADANE</v10:PersonName>
                  <v10:Title>Ms.</v10:Title>
                  <v10:CompanyName>DEOYAROHIT0705$</v10:CompanyName>
                  <v10:PhoneNumber>9762308621</v10:PhoneNumber>
                  <v10:PhoneExtension>02033469</v10:PhoneExtension>
                  <v10:PagerNumber>9762308621</v10:PagerNumber>
                  <v10:FaxNumber>9762308621</v10:FaxNumber>
                  <v10:EMailAddress>Deoyanee*Bhadane@DeoyaRohit.com</v10:EMailAddress>
               </v10:Contact>
               <v10:Address>
                  <v10:StreetLines>2000 Freight LTL Testing</v10:StreetLines>
                  <v10:StreetLines>Do Not Delete - Test Account</v10:StreetLines>
                  <v10:City>Harrison</v10:City>
                  <v10:StateOrProvinceCode>AR</v10:StateOrProvinceCode>
                  <v10:PostalCode>72601</v10:PostalCode>
                  <v10:UrbanizationCode>AR</v10:UrbanizationCode>
                  <v10:CountryCode>US</v10:CountryCode>
                  <v10:Residential>0</v10:Residential>
               </v10:Address>
            </v10:Recipient>
            <v10:RecipientLocationNumber>DEN001</v10:RecipientLocationNumber>
            <v10:Origin>
               <v10:Contact>
                  <v10:ContactId>RBB1057</v10:ContactId>
                  <v10:PersonName>ROHIT BORSE</v10:PersonName>
                  <v10:Title>Mr.</v10:Title>
                  <v10:CompanyName>DEOYAROHIT0705$</v10:CompanyName>
                  <v10:PhoneNumber>9762308621</v10:PhoneNumber>
                  <v10:PhoneExtension>02033469</v10:PhoneExtension>
                  <v10:PagerNumber>9762308621</v10:PagerNumber>
                  <v10:FaxNumber>9762308621</v10:FaxNumber>
                  <v10:EMailAddress>Rohit*Borse@DeoyaRohit.com</v10:EMailAddress>
               </v10:Contact>
               <v10:Address>
                  <v10:StreetLines>ORIGIN ADDRESS LINE 1</v10:StreetLines>
                  <v10:StreetLines>ORIGIN ADDRESS LINE 2</v10:StreetLines>
                  <v10:City>COLORADO SPRINGS</v10:City>
                  <v10:StateOrProvinceCode>CO</v10:StateOrProvinceCode>
                  <v10:PostalCode>80915</v10:PostalCode>
                  <v10:UrbanizationCode>CO</v10:UrbanizationCode>
                  <v10:CountryCode>US</v10:CountryCode>
                  <v10:Residential>0</v10:Residential>
               </v10:Address>
            </v10:Origin>
            <v10:ShippingChargesPayment>
               <v10:PaymentType>SENDER</v10:PaymentType>
               <v10:Payor>
                  <v10:AccountNumber>510087682</v10:AccountNumber>
                  <v10:CountryCode>US</v10:CountryCode>
               </v10:Payor>
            </v10:ShippingChargesPayment>
            <v10:DeliveryInstructions>DeliveryInstructions</v10:DeliveryInstructions>
            <v10:PickupDetail>
               <v10:ReadyDateTime>2012-06-22T10:56:46-06:00</v10:ReadyDateTime>
               <v10:LatestPickupDateTime>2012-06-15T10:56:46-06:00</v10:LatestPickupDateTime>
               <v10:CourierInstructions>PickupCourierInstructions</v10:CourierInstructions>
               <v10:RequestType>SAME_DAY</v10:RequestType>
               <v10:RequestSource>CUSTOMER_SERVICE</v10:RequestSource>
            </v10:PickupDetail>
            <v10:BlockInsightVisibility>1</v10:BlockInsightVisibility>
            <v10:ErrorLabelBehavior>STANDARD</v10:ErrorLabelBehavior>
            <v10:LabelSpecification>
               <v10:LabelFormatType>COMMON2D</v10:LabelFormatType>
               <v10:ImageType>PNG</v10:ImageType>
               <v10:LabelStockType>PAPER_4X6</v10:LabelStockType>
               <v10:LabelPrintingOrientation>TOP_EDGE_OF_TEXT_FIRST</v10:LabelPrintingOrientation>
            </v10:LabelSpecification>
            <v10:RateRequestTypes>ACCOUNT</v10:RateRequestTypes>
            <v10:PackageCount>1</v10:PackageCount>
            <v10:RequestedPackageLineItems>
               <v10:SequenceNumber>1</v10:SequenceNumber>
               <v10:GroupNumber>1</v10:GroupNumber>
               <v10:GroupPackageCount>1</v10:GroupPackageCount>
               <v10:Weight>
                  <v10:Units>LB</v10:Units>
                  <v10:Value>60</v10:Value>
               </v10:Weight>
               <v10:Dimensions>
                  <v10:Length>12</v10:Length>
                  <v10:Width>12</v10:Width>
                  <v10:Height>12</v10:Height>
                  <v10:Units>IN</v10:Units>
               </v10:Dimensions>
               <v10:PhysicalPackaging>BAG</v10:PhysicalPackaging>
               <v10:ItemDescription>TEST</v10:ItemDescription>
               <v10:CustomerReferences>
                  <v10:CustomerReferenceType>CUSTOMER_REFERENCE</v10:CustomerReferenceType>
                  <v10:Value>CUSTREF20110408T105646</v10:Value>
               </v10:CustomerReferences>
               <v10:CustomerReferences>
                  <v10:CustomerReferenceType>P_O_NUMBER</v10:CustomerReferenceType>
                  <v10:Value>PO20110408T105646</v10:Value>
               </v10:CustomerReferences>
               <v10:CustomerReferences>
                  <v10:CustomerReferenceType>INVOICE_NUMBER</v10:CustomerReferenceType>
                  <v10:Value>IO20110408T105646</v10:Value>
               </v10:CustomerReferences>
               <v10:ContentRecords>
                  <v10:PartNumber>PRTNUM01</v10:PartNumber>
                  <v10:ItemNumber>ITMNUM01</v10:ItemNumber>
                  <v10:ReceivedQuantity>15</v10:ReceivedQuantity>
                  <v10:Description>ContentDescription</v10:Description>
               </v10:ContentRecords>
            </v10:RequestedPackageLineItems>
         </v10:RequestedShipment>
      </v10:ProcessShipmentRequest>
   </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T20:27:44.777

FedEx beta/develop/test Web 服务 API 目前可能已关闭？[评级暂时不可用 - FEDEX 出现错误](https://stackoverflow.com/questions/11156258/rating-is-temporarily-unavailable-error-in-fedex)

# ruby-on-rails - 导轨形式重复

> ID：11132631
> 
> 赞同：0
> 
> 时间：2012-06-21T06:23:43.993
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, simple-form

我有一个表单向导设置，其中包含 4 个步骤，它们都适用于同一模型。

当我填写第一个并单击提交（并被重定向到第 2 步）时，表格已经填写完毕，并在下面添加了一个重复的相同表格。每个步骤都会发生这种情况。

在第 1 步单击提交并进入第 2 步（或 3/4）后，如何呈现一个全新的表单？

步骤1

```
<%= simple_form_for @user, url: wizard_path do |f| %>

  <h2 class="signup">Step 3: Friends Birthday</h2>

  <%= f.simple_fields_for :events do |event_f| %>
    <%= event_f.input :name, :placeholder => 'Enter Persons Name' %>

    <%= event_f.input :date, :as => :date_picker, :input_html => { :class => 'special' } %>

    <%= event_f.input :reccuring, :label => false,  :inline_label => 'Remind me of this event every year?' %>

    <h3>Choose up to 3 interests for this person</h3>
      <%= event_f.association :interests, :label => false, :as => :check_boxes %>

      <%= event_f.input :kind, :as => :hidden, :input_html => { :value => "Birthday" } %>

<%end%>

    <%= link_to "skip this step", next_wizard_path %>
    <%= f.button :submit, 'Submit' %>
    <%end%> 
```

第2步

```
<%= simple_form_for @user, url: wizard_path do |f| %>

<h2 class="signup"> Married? Add your anniverarsy</h2>

  <%= f.simple_fields_for :events do |anniversary_f| %>

    <%= anniversary_f.input :name %>
    <%= anniversary_f.input :date, :as => :date_picker, :input_html => { :class => 'special' } %>

    <h3>Choose up to 3 interests for this person</h3>

     <%= anniversary_f.association :interests, :as => :check_boxes, :label => false %></li>

     <%= anniversary_f.input :kind, :as => :hidden, :input_html => { :value => "Anniversary" } %>
     <%end%>

        <%= link_to "skip this step", next_wizard_path %>
        <%= f.button :submit, 'Submit' %>
     <%end%> 
```

控制器

events_controller.rb

```
 def new
      @user = current_user
      @event = Event.new 
    end

  def create
      @user = current_user
      @event = Event.new(params[:event])
      @event.user = User.find(current_user.id)
   end 
```

users_controller

```
class UsersController < ApplicationController
  before_filter :authenticate_user!

  def create
      @user = User.new(params[:user])
      if @user.save
        redirect_to user_steps_path
      else
        render :new
      end
    end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:48:14.297

当您完成一个步骤时，然后插入新对象并将第二种形式绑定到新对象。对第 3 种和第 4 种形式重复此步骤。

意味着每次初始化

```
 @user = User.new 
```

# tridion - Tridion 2009 自定义页面：如何修复错误消息“需要对象：'TMSMail'”？

> ID：11132633
> 
> 赞同：1
> 
> 时间：2012-06-21T06:23:44.553
> 
> 标签：tridion, tridion2009

我们在 Tridion 2009 上使用了一个自定义页面。这个自定义页面之前运行良好。

最近我们已将其移至另一台服务器。现在这个自定义页面抛出错误说

```
Error 424 occurred while rendering the Page: Object required: 'TMSMail' 
(source: WriteOut TMSMail.GetHTMLStartTag()) 
```

请就如何解决此问题提出建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T07:06:44.500

当我环顾 DLL 和 tridion MMC 管理单元时，我有了一个想法。

如果我们在 MMC 管理单元上添加以下条目会发生什么

1.  单击脚本扩展
2.  添加一个新对象
    *   **中药对象名称：** `TMSMail`
    *   **COM 对象名称：** `TMSScriptExtension.ProfileHelper`

## 编辑：

最后，我经过了很多尝试后解决了。

以下是我解决的步骤： -

1.  首先，我在 MMC 管理单元上添加了上述条目
2.  我找到了这个扩展的 dll 位置并使用**`regsvr32`**命令注册了它
3.  重启**`COM+`**服务

现在试了一下，效果很好。

非常感谢您的投入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T06:45:11.273

这看起来特定于您的自定义页面的代码，而不是一般的 Tridion 错误。

如果您使用的是第三方库（可能来自 tmssoftware.com？），请检查它是否已在您的新服务器上安装/可用。

此外，可能需要将带有 TmsMail 类的 DLL 添加到 GAC 或注册表中（查找 regasm.exe 以了解如何执行此操作）。

# ios - 相同的应用名称，但不同的国家和二进制

> ID：11132637
> 
> 赞同：0
> 
> 时间：2012-06-21T06:23:54.080
> 
> 标签：ios, app-store, submission, country

我有一个当前在墨西哥商店中可用的应用程序版本，但我想做一个哥伦比亚版本。使用的数据和 UI 会有所改变。

我可以创建一个不同的二进制文件以上传到不同的商店并保持相同的应用程序名称吗？

我在上面的某个地方找到了没有答案的问题，只是稍微编辑了一下。我发现了这个问题，因为这是我现在的问题。你能给我一些想法或建议吗？

感谢您提供的任何帮助或建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T06:33:35.267

您无法为每个国家/地区上传不同的版本，但您可以检测用户位置，然后更改 UI/其他任何内容以匹配该区域设置所需的内容。

# c# - 如何在 Datagridview 中上传修改后的数据？

> ID：11132638
> 
> 赞同：0
> 
> 时间：2012-06-21T06:24:08.047
> 
> 标签：c#, sql, datagridview

我已经从 SQL 数据库中提取了一些数据到 datagridview 中，但是在用户修改了 datagridview 中的数据后，如何将数据上传回来？

而且，我发现了这样的代码：

```
this.dataGridView1.Update(); 
```

这个方法更新了什么？这是我将数据绑定到datagridview的代码：

```
SqlDataReader read;
SqlCommand cmd;
DataTable dt = new DataTable();
cmd = new SqlCommand("Select * from Table", 204.192.49.3);
read = cmd.ExecuteReader();
dt.Load(read);
dataGridView1.DataSource = dt; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T06:38:12.177

为此，您已使用 Datasource 属性和 SqlDataAdapter 填充数据网格。您只需要更新适配器对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T06:39:08.637

你不能用这个“this.dataGridView1.Update();”更新你的网格 更新数据库中的数据后，您必须将网格视图绑定到数据库的代码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T06:48:13.770

```
private void dataGridVies1_CellValidated(object sender, DataGridViewCellEventArgs e)
{
        SqlCommandBuilder cb = new SqlCommandBuilder(sda);
        sda.Update(ds);
}

public partial class Form2 : Form
{

       private void Form2_Load(object sender, EventArgs e)
    {
        con.ConnectionString = connectionstr;

        sda = new SqlDataAdapter("select * from table_user", con);//define dataadapter
        sda.Fill(ds );
        dataGridView1.DataSource = ds.Tables[0];//bind the data，now the datagridview can show up the data

    }
    string connectionstr = "integrated security=SSPI;Initial Catalog=****;Data Source=localhost;";//init

    SqlConnection con = new SqlConnection();//
    SqlDataAdapter sda = new SqlDataAdapter();//

    DataSet ds = new DataSet();
    private void dataGridView1_CellContentClick(object sender, DataGridViewCellEventArgs e)
    {

    }

    private void dataGridView1_CellEndEdit(object sender, DataGridViewCellEventArgs e)
    {
        //you can not update sda here

    }

    private void button1_Click(object sender, EventArgs e)
    {

    }

    private void dataGridVies1_CellValidated(object sender, DataGridViewCellEventArgs e)
    {
        SqlCommandBuilder cb = new SqlCommandBuilder(sda);//auto generate the cmd of create, delete and update 
        sda.Update(ds);//flush to database
     }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T07:21:26.237

最简单的方法是创建一个临时 DataSet，使用 SqlDataAdapter 填充数据，然后将其作为 dataGridView 的 DataSource 传递。这段代码应该可以解决问题： `DataSet temp = new DataSet(); SqlDataAdapter SDA = new SqlDataAdapter(); SqlCommand command = new SqlCommand(); SqlConnection connection = new SqlConnection(); string connstring = "YourConnectionString";`

然后在您要触发更新的方法中执行以下操作：

```
`connection.Open();
 command.CommandText = "SELECT * FROM Table" //Adjust the SQL query to your needs
 command.Connection = connection;
 SDA.SelectCommand = command;
 SDA.Fill(temp);
 dataGridView1.DataSource = temp.Tables[0].DefaultView;` 
```

这应该可以解决您的问题。

# windows-phone-7 - 在 windows phone 7 中更改位置时如何将用户位置更新到服务器？

> ID：11132639
> 
> 赞同：-1
> 
> 时间：2012-06-21T06:24:12.283
> 
> 标签：windows-phone-7

当位置改变时，我需要将用户位置更新到服务器。请告诉我如何实现这一点？

使用以下方法：

```
void GeoPositionChanged(object sender, GeoPositionChangedEventArgs<GeoCoordinate> e)
        {
            _pushpins.Clear();
            var cor = new GeoCoordinate(e.Position.Location.Latitude, e.Position.Location.Longitude);
            //Using the current coordinates define the Map center to those coordinates.
            map.Center = cor;

            _pushpins.Add(new PushpinModel
            {
                UserId=userId,
                Description = "test",
                Name = "test",
                Location = new GeoCoordinate(e.Position.Location.Latitude,
                                                e.Position.Location.Longitude),
                DatetimeAdded = DateTime.Now
            });

            map.ZoomLevel = 15;

            //locationupdate method
            locationupdate(e.Position.Location.Latitude,
                                                e.Position.Location.Longitude);

        }

    private void locationupdate(double lat,double lon)
        {
              bool isAvailable = NetworkInterface.GetIsNetworkAvailable();
                 if (isAvailable == true)
                 {
                     try
                     {

                         WebClient wc = new WebClient();
                         wc.DownloadStringAsync(
                         new Uri("http://{ipaddress}/Network/Records/UpdateLocation?userid="+userId+"&latitude="+lat+"&longitude="+lon));
                         wc.DownloadStringCompleted +=
                          new DownloadStringCompletedEventHandler(
                                         wc_DownloadStringUpdateCompleted);
                     }
                     catch (Exception ex)
                     {
                         throw;
                     }
                 }
                 else
                 {
                     MessageBox.Show("Network is not available.Please try again later");
                 }
       } 
```

请告诉我，每当用户更改其位置时，上述内容会更新位置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T06:47:36.500

分开你的目标...

您是否已经知道如何获取用户位置？

使用后台代理在后台运行任务（如有必要）[http://www.silverlightshow.net/items/Windows-Phone-7.5-Use-Background-agents.aspx](http://www.silverlightshow.net/items/Windows-Phone-7.5-Use-Background-agents.aspx)

创建一个网络服务来更新你的服务器

# java - JAXB。从字符串中获取布尔值

> ID：11132647
> 
> 赞同：4
> 
> 时间：2012-06-21T06:25:06.620
> 
> 标签：java, jaxb

在我的 XML 我有

```
<myelem required="false"/> 
```

如何将`required`属性读取为布尔值？我可以`String`在吸气剂内部阅读它：`return new Boolean(required)` 但也许有一些更优雅的方式？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-21T06:44:35.767

只需简单地`boolean`用于 Java 类中的成员：

```
@XmlAttribute
private boolean required; 
```

或者，如果您使用 getter-setter 样式的映射：

```
@XmlAttribute
public boolean isRequired() {
    return required;
} 
```

JAXB 解组器能够将 XML 文档中的字符串解释为`"true"`值。`"false"``boolean`

**更新：**

我用以下类对此进行了测试：

***测试/MyElem.java*****：**

```
package test;

import javax.xml.bind.annotation.*;

@XmlRootElement(name="myelem")
public class MyElem {

    private boolean required;

    @XmlAttribute
    public boolean isRequired() {
        return required;
    }

    public void setRequired(boolean value) {
        required = value;
    }

} 
```

***测试.java*****：**

```
import javax.xml.bind.*;
import java.io.*;
import test.*;

public class Test {
    public static void main(String[] args) {
        try {
            JAXBContext jc = JAXBContext.newInstance(MyElem.class);
            Unmarshaller u = jc.createUnmarshaller();
            Object o = u.unmarshal( new File( "test.xml" ) );   
            System.out.println(((MyElem)o).isRequired());
        } catch(Exception e) {
            e.printStackTrace();
        }
    }
} 
```

并使用以下输入（*test.xml*）：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<myelem required="true"/> 
```

我在控制台上得到了正确的结果：

```
true 
```

# php - 为什么 PHP 的 get_meta_tags 在某些 URL 上不起作用？

> ID：11132649
> 
> 赞同：1
> 
> 时间：2012-06-21T06:25:15.297
> 
> 标签：php, meta-tags

为什么下面的代码在大多数网站（如 www.apple.com）上运行良好，但在其他网站（如 www.yahoo.com）上不起作用？

```
$tags = get_meta_tags( $webpage );

if( $tags )
{
    if( $tags['description'] )
    {
        $link_description = $tags['description'];
    }
    else
    {
        $link_description = '';
    }
} 
```

当我说它不起作用时，我的意思是脚本只是停滞不前。我的程序挂了。当 get_meta_tags() 不起作用并使用替代代码块处理此问题时，有没有办法捕获？我写的时候以为我在做这个

```
$tags = get_meta_tags( $webpage );

if( $tags )
{
    // stuff
}
else
{
    // handle the case when the above doesn't work.
} 
```

但是，它仍然在 www.yahoo.com 等网站上停滞不前。关于如何处理这些麻烦的 URL 的任何想法？

# spring - Spring 3.0 无法转发来自 HandlerInterceptorAdapter 的请求

> ID：11132653
> 
> 赞同：1
> 
> 时间：2012-06-21T06:25:39.553
> 
> 标签：spring, interceptor, spring-3

如果会话无效，我想重定向到主页。我的 spring-servlet.xml 是

```
<mvc:interceptors>
    <bean class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor" />
    <mvc:interceptor>
        <mvc:mapping path="/**" />
        <bean class="com.xxx.MyInterceptor" />
    </mvc:interceptor>
</mvc:interceptors> 
```

拦截器：

```
public boolean preHandle(HttpServletRequest request,
            HttpServletResponse response, Object handler) throws Exception {
        if ((null == request.getSession(false))
                || (null == request.getSession(false).getAttribute(
                        "user"))) {
            System.out.println("user logged out...");
            RequestDispatcher rd = request.getRequestDispatcher("loginForm.htm");
            rd.forward(request, response);
            return false;
        }
        return super.preHandle(request, response, handler);
    } 
```

但它不起作用......每当应用程序启动时，消息都会被打印多次，最后它会导致堆栈溢出......

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T06:55:40.667

似乎问题出在您的映射路径中。由于它与`/**`您的 loginForm.htm 映射也被拦截。您有两种解决方案可用于解决此问题。

要么定义`<mvc:resources location="/resources/" mapping="/resources/**" />`为不拦截 *.htm 请求。根据 *.htm 文件所在的路径替换位置和映射值。

另一种选择是用类似的东西或其他东西来改变你在拦截器中的映射`/*.do`。

希望这对您有所帮助。干杯。

# asp.net - 没有出现传递值？

> ID：11132658
> 
> 赞同：1
> 
> 时间：2012-06-21T06:26:19.980
> 
> 标签：asp.net, vb.net

我是 ASP.net 和 VB.net 的新手。所以我从 VB 2008 中的 ASP.Net 3.5 开始学习这本书

select.aspx.vb 上的代码是

```
Imports System.Data
Imports System.Data.SqlClient
Imports System.Web.Configuration

Partial Public Class _Select
    Inherits System.Web.UI.Page

    Private Conn As String = WebConfigurationManager.ConnectionStrings("MyConnectionString").ConnectionString

    Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

        If Not Page.IsPostBack Then
            FillAuthorList()
        End If
    End Sub

    Private Sub FillAuthorList()
        lstAuthor.Items.Clear()
        ' Define the Select statement.
        ' Three pieces of information are needed: the unique id
        ' and the first and last name.
        Dim selectSQL As String = "SELECT Nama_Depan, Nama_Belakang, ID FROM Employee"
        ' Define the ADO.NET objects.
        Dim con As New SqlConnection(Conn)
        Dim cmd As New SqlCommand(selectSQL, con)
        Dim reader As SqlDataReader
        ' Try to open database and read information.
        Try
            con.Open()
            reader = cmd.ExecuteReader()
            ' For each item, add the author name to the displayed
            ' list box text, and store the unique ID in the Value property.
            Do While reader.Read()
                Dim newItem As New ListItem()
                newItem.Text = reader("Nama_Depan") & ", " & reader("Nama_Belakang")
                newItem.Value = reader("ID").ToString()
                lstAuthor.Items.Add(newItem)
            Loop
            reader.Close()
        Catch err As Exception
            lblResults.Text = "Error reading list of names."
            lblResults.Text &= err.Message
        Finally
            con.Close()
        End Try
    End Sub

    Protected Sub lstAuthor_SelectedIndexChanged(ByVal sender As Object, ByVal e As EventArgs) Handles lstAuthor.SelectedIndexChanged
        ' Create a Select statement that searches for a record
        ' matching the specific author ID from the Value property.
        Dim selectSQL As String
        selectSQL = "SELECT * FROM Employee "
        selectSQL &= "WHERE ID='" & lstAuthor.SelectedItem.Value & "' "
        ' Define the ADO.NET objects.
        Dim con As New SqlConnection(Conn)
        Dim cmd As New SqlCommand(selectSQL, con)
        Dim reader As SqlDataReader
        ' Try to open database and read information.
        Try
            con.Open()
            reader = cmd.ExecuteReader()
            reader.Read()

            ' Build a string with the record information,
            ' and display that in a label.
            Dim sb As New StringBuilder()
            sb.Append("<b>")
            sb.Append(reader("Nama_Depan"))
            sb.Append(", ")
            sb.Append(reader("Nama_Belakang"))
            sb.Append("</b><br />")

            lblResults.Text = sb.ToString()
            reader.Close()
        Catch err As Exception
            lblResults.Text = "Error getting author. "
            lblResults.Text &= err.Message
        Finally
            con.Close()
        End Try
    End Sub
End Class 
```

而 select.aspx 是

```
<%@ Page Language="vb" AutoEventWireup="false" CodeBehind="Select.aspx.vb" Inherits="connn._Select" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
    <asp:ListBox ID="lstAuthor" runat="server" ></asp:ListBox>
        <br />

    <asp:Label ID="lblResults" runat="server">

    </asp:Label>
    </div>
    </form>
</body>
</html> 
```

我正在尝试选择 ID="lstAuthor" 的列表框时，标签框将传递该值但未能显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T06:35:32.533

设置`True`为`AutoPostBack`属性：

```
<asp:ListBox ID="lstAuthor" 
             runat="server"  
             AutoPostBack="True" ></asp:ListBox> 
```

# asp.net - 如何通过 Youtube API 在 asp.net 中获取用户视频列表

> ID：11132667
> 
> 赞同：0
> 
> 时间：2012-06-21T06:26:46.717
> 
> 标签：asp.net, youtube-api

如何通过 Youtube APT 在 asp.net 中获取播放列表提要。当我尝试获取数据时，我得到了 Totalresult =o。请看下图：

![在此处输入图像描述](../Images/d9706ae152179e705270768ea91de03f.png)

请建议我如何做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T06:32:03.953

试试这个

```
Feed<Video> videoFeed = request.Get<Video>(new Uri(feedUrl));

        //Iterate through each video entry
        foreach (Video videoEntry in videoFeed.Entries)
        {

.
.
. 
```

[在 ASP.NET 中动态输出 YouTube 视频列表](http://surinder.computing-studio.com/post/2009/05/26/Dynamically-Output-A-List-of-YouTube-Videos-In-ASPNET.aspx)

# java - 如何在java中实现ISO9797 M2 Padding

> ID：11132675
> 
> 赞同：2
> 
> 时间：2012-06-21T06:27:39.730
> 
> 标签：java, encryption, cryptography

我想将`AES`加密与`ISO9797 M2 Padding`. 但是在java下不能按标准填充模式[Cipher Algorithm Padding](http://docs.oracle.com/javase/6/docs/technotes/guides/security/StandardNames.html)
..如何实现？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T11:16:46.457

如果它在标准 Java 中不可用，那么您可以自己实现它，并将适当的字节添加到明文的末尾。然后使用加密，`NoPadding`这样您就不会添加额外的填充。再次使用解密`NoPadding`，然后自己删除填充。

填充方案实现起来非常简单：

```
add an 0x80 byte
while not at block boundary
  add an 0x00 byte
endwhile 
```

我快速浏览了 Bouncy Castle 库，它似乎也没有 ISO 9797。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T13:06:27.353

请参阅从 Bouncy Castle 复制的以下代码。它主要在 Bouncy Castle*提供程序*中用于 DES MAC 算法，但您可以在 Bouncy Castle 的轻量级加密库中简单地使用它，或者将其用作您自己实现的基础：

```
package org.bouncycastle.crypto.paddings;

import java.security.SecureRandom;

import org.bouncycastle.crypto.InvalidCipherTextException;

/**
 * A padder that adds the padding according to the scheme referenced in
 * ISO 7814-4 - scheme 2 from ISO 9797-1\. The first byte is 0x80, rest is 0x00
 */
public class ISO7816d4Padding
    implements BlockCipherPadding
{
    /**
     * Initialise the padder.
     *
     * @param random - a SecureRandom if available.
     */
    public void init(SecureRandom random)
        throws IllegalArgumentException
    {
        // nothing to do.
    }

    /**
     * Return the name of the algorithm the padder implements.
     *
     * @return the name of the algorithm the padder implements.
     */
    public String getPaddingName()
    {
        return "ISO7816-4";
    }

    /**
     * add the pad bytes to the passed in block, returning the
     * number of bytes added.
     */
    public int addPadding(
        byte[]  in,
        int     inOff)
    {
        int added = (in.length - inOff);

        in [inOff]= (byte) 0x80;
        inOff ++;

        while (inOff < in.length)
        {
            in[inOff] = (byte) 0;
            inOff++;
        }

        return added;
    }

    /**
     * return the number of pad bytes present in the block.
     */
    public int padCount(byte[] in)
        throws InvalidCipherTextException
    {
        int count = in.length - 1;

        while (count > 0 && in[count] == 0)
        {
            count--;
        }

        if (in[count] != (byte)0x80)
        {
            throw new InvalidCipherTextException("pad block corrupted");
        }

        return in.length - count;
    }
} 
```

# c++ - 未在派生类中调用 C++ 继承运算符

> ID：11132679
> 
> 赞同：0
> 
> 时间：2012-06-21T06:28:02.910
> 
> 标签：c++, inheritance

我在 C++ 中有以下代码

```
#include <iostream>
#include <list>
#include <algorithm>

using namespace std;

class A{
  public:
    int x;
    int y;
    int first(){
      return x;
    }
    int second(){
      return y;
    }
};

class C{
  public:
    float a,b;
    C(){
      a = 0.0f;
      b = 0.0f;
    }
    template<class T>
      C(T t){
        cout<<"Copy Constructor\n";
        a = t.first();
        b = t.second();
      }
      template<class T>
    C & operator=(T const &c){
        cout <<"Assignment operator\n";
        this->a = c.first();
        this->b = c.first();
    }
};

class D: public C{
  public:
    template <typename T> D (T t) : C(t) {}
    float area(){
      return a*b; 
    }
};

int main(){
  A a;
  a.x = 6;
  a.y = 8;
  C c(a);
  D d(a);
  D e = a;   // Here copy constructor is being called!!
  cout<<e.a<<" "<<e.b<<" "<<e.area()<<endl;
} 
```

这是上述程序的输出

```
Copy Constructor
Copy Constructor
Copy Constructor
6 8 48 
```

为什么派生类中没有调用赋值运算符？

**Edit1：**我已更改问题以使问题更清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T06:32:58.667

构造函数不作为常规公共函数继承。如果缺少默认构造函数，则由编译器定义，但您应该`A`为. 您还需要定义一个赋值运算符。`C``D`

```
class D: public C{
  public:
    D(A aparam)
    : a(aparam.first(), b(aparam.second()){
    }
    D& operator=(const D& rhs){
      a = rhs.first();
      b = rhs.second();
    }
    float area(){
      return a*b; 
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T07:05:43.330

您可以使用以下命令显式收回所述 operator=：

```
using C::operator= 
```

在D级。

operator= 是继承的，但默认情况下被电子编译器生成的掩码。

# math - 得到一个向量垂直于另一个向量的公式是什么？

> ID：11132681
> 
> 赞同：12
> 
> 时间：2012-06-21T06:28:17.407
> 
> 标签：math, vector, formula, algebra

获得位于垂直于向量 A 的平面上的三维向量 B 的公式是什么？

也就是说，给定一个向量 A，公式 f(angle,modulus) 是什么，它给出了一个垂直于 A 的向量，具有所述模数并旋转了一个角度？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-21T06:35:24.013

如果两个向量垂直，则它们的点积为零。

所以：`v1(x1, y1, z1), v2(x2, y2, z2)`。

```
=> x1 * x2 + y1 * y2 + z1 * z2 = 0 
```

你知道`(x1, y1, z1)`。放任意`x2`and`y2`你会收到相应的`z2`：

```
z1 * z2 = -x1 * x2 - y1 * y2
=> z2 = (-x1 * x2 - y1 * y2) / z1 
```

请注意，如果`z1`是`0`。然后你在飞机上。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-07-16T02:21:55.230

```
function (a,b,c)
{
    return (-b,a,0)
} 
```

但是当 a,b 接近 0 时，这个答案在数值上不稳定。

为避免这种情况，请使用：

```
function (a,b,c) 
{
    return  c<a  ? (b,-a,0) : (0,-c,b) 
} 
```

上面的答案是数值稳定的，因为如果`c < a`then `max(a,b) = max(a,b,c)`、 then`vector(b,-a,0).length() > max(a,b) = max(a,b,c)`和 since`max(a,b,c)`不应该接近于零，那么向量也是如此。`c > a`情况类似。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-06-21T06:31:56.963

计算与另一个不共线的向量的[叉积](http://en.wikipedia.org/wiki/Cross_product) 。`AxC``C``A`

在垂直于 的平面上有许多可能的方向`A`。如果您真的不在乎，选择哪一个，只需创建一个`C`与 不共线的任意向量`A`：

```
if (A2 != 0 || A3 != 0)
    C = (1, 0, 0);
else
    C = (0, 1, 0);
B = A x C; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-04-17T15:41:12.503

我相信这应该产生一个垂直于给定向量的任意向量，`vec`同时无论角度如何`vec`（假设 的大小`vec`不接近零）都保持数值稳定。假设 Vec3D 是一个任意数值类型的三维向量。

```
Vec3D arbitrary_orthogonal(Vec3D vec)
{
  bool b0 = (vec[0] <  vec[1]) && (vec[0] <  vec[2]);
  bool b1 = (vec[1] <= vec[0]) && (vec[1] <  vec[2]);
  bool b2 = (vec[2] <= vec[0]) && (vec[2] <= vec[1]);

  return cross(vec, Vec3D(int(b0), int(b1), int(b2)));
} 
```

**非正式解释**

恰好 1 个并且只有 1 个布尔值被设置；`bN`如果维度`N`的大小严格小于所有后续维度且不大于所有先前维度，则设置。然后，我们有一个具有单个非零维度的单位向量，该维度对应于 中的最小量值维度`vec`。this 的叉积与叉积的定义`vec`正交`vec`。现在考虑只有当两个向量非常接近时，叉积在数值上是不稳定的。考虑我们的单位向量仅在一个维度上很大，并且该维度对应`vec`于较小的维度。因此，它保证松散正交于`vec``vec`在取叉积之前，在所有维度相等的情况下正交性最小。在这种最小正交的情况下，我们仍然是*完全*正交的，因为我们的单位向量除了一维 0外，其他所有维度`vec`都相等。因此，我们避免了取两个几乎对齐的向量的叉积的不稳定情况。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-21T09:05:20.450

一种方法是找到从正 z 轴（或任何其他轴）到给定向量的旋转变换。然后`<modulus * cos(angle), modulus * sin(angle), 0>`使用此变换进行变换。

```
def getPerpendicular(v1,modulus,angle):
    v2 = vector(0,0,1)
    v1_len = v2.length()

    axis = v1.cross_product(v2)
    sinAngle = axis.length() / v1_len       # |u x v| = |u| * |v| * sin(angle)
    cosAngle = v1.dot_product(v2) / v1_len  # u . v = |u| * |v| * cos(angle)
    axis = axis.normalize()
    # atan2(sin(a), cos(a)) = a, -pi < a < pi
    angle = math.atan2(sinAngle, cosAngle)

    rotationMatrix = fromAxisAngle(axis, angle)

    # perpendicular to v2
    v3 = vector(modulus*cos(angle),modulus*sin(angle),0)

    return rotationMatrix.multiply(v3); 
```

要计算旋转矩阵，请参阅这篇文章：[WP: Rotation matrix from axis and angle](http://en.wikipedia.org/wiki/Rotation_matrix#Rotation_matrix_from_axis_and_angle "WP：旋转矩阵")

另一种方法是使用[四元数旋转](http://en.wikipedia.org/wiki/Quaternions_and_spatial_rotation "WP：四元数和空间旋转")。绕着你的脑袋要多一点，但要跟踪的数字要少一些。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-08-22T17:50:14.853

q4w56 几乎可以提供强大的解决方案。问题： 1) 不考虑帐户缩放。2）不应该比较两个变量之间的大小。

```
scale = |x| + |y| + |z|

if scale == 0:
  return (0,0,0)

x = x/scale
y = y/scale
z = z/scale

if |x| > |y|:
  return (z, 0,-x)
else:
  return (0, z,-y) 
```

在处理非常大或非常小的数字时，缩放很重要。另外，一般来说，你最好对 0 到 1 之间的值进行浮点运算。

# asp.net - 在内容页面之间切换时显示以前的数据

> ID：11132685
> 
> 赞同：0
> 
> 时间：2012-06-21T06:28:45.080
> 
> 标签：asp.net, telerik, master-pages

我有一个带有母版页和许多内容页的网站。我在一个页面中搜索数据，然后在另一个页面中搜索数据。通常，从第一页中选择的结果应该填充另一个搜索条件。如何切换回上一页并保留搜索结果？

当用户控件全部应用于一个 default.aspx 页面时，我的站点可以正常工作，但是页面太大了。

我在单页中使用带有 RadPageview 的 Telerik RadTab，在主/内容页面中使用 asp ContentPlaceHolder。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T10:08:41.637

我理解你的问题。将所有内容放在一页上意味着搜索会被记住，但您的表现会受到影响。您想将其更改为单独的页面，但仍保留搜索。

我已经编写了一个导航框架来帮助你，[http://navigation.codeplex.com/](http://navigation.codeplex.com/)

在文档中，我构建了一个示例 Web 项目，该项目具有一个搜索页面，其中包含从每个搜索结果到详细信息页面的超链接。然后在详细信息页面上有一个链接，该链接返回到搜索页面，并保留了所有搜索（和分页）信息，并将搜索结果完全还原为以前。

如果您有兴趣并需要任何帮助，请告诉我。

# matlab - matlab高效复制矩阵

> ID：11132686
> 
> 赞同：0
> 
> 时间：2012-06-21T06:28:47.903
> 
> 标签：matlab, matrix, copying

我有 (1:10),<10 x 1> 双倍的矩阵 (a)。我想复制这些值并将它们按列重新排列到另一个矩阵变量中。(b)。请参见下面的示例。另外，什么方法在这项任务中最有效？

```
matrix a    matrix b

1            1
2            2  2
3            3  3  3  
4            4  4  4  4
5            5  5  5  5  5
6            6  6  6  6  6  6
7            7  7  7  7  7  7  7
8            8  8  8  8  8  8  8  8
9            9  9  9  9  9  9  9  9  9
10           10 10 10 10 10 10 10 10 10 10 
```

更新：你好再次Amro。如果我想定义要复制的值怎么样。请参见下面的示例：

```
matrix a    matrix b
column:      1  2  3  4  5  6  7

1            1
2            2  2
3               3  3  
4                  4  
5                     5  
6                     6     
7                        7  
8                        8     
9                           9  
10                         10 10 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T06:33:45.377

尝试：

```
>> a = (1:10)'
a =
     1
     2
     3
     4
     5
     6
     7
     8
     9
    10

>> b = tril(repmat(a,1,10))
b =
     1     0     0     0     0     0     0     0     0     0
     2     2     0     0     0     0     0     0     0     0
     3     3     3     0     0     0     0     0     0     0
     4     4     4     4     0     0     0     0     0     0
     5     5     5     5     5     0     0     0     0     0
     6     6     6     6     6     6     0     0     0     0
     7     7     7     7     7     7     7     0     0     0
     8     8     8     8     8     8     8     8     0     0
     9     9     9     9     9     9     9     9     9     0
    10    10    10    10    10    10    10    10    10    10 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T07:31:12.850

我认为在您指定的第二个矩阵中您犯了一个错误。我假设你想做这样的事情：

```
b =

 1     0     0     0     0     0
 2     2     0     0     0     0
 0     3     3     0     0     0
 0     0     4     4     0     0
 0     0     0     5     5     0
 0     0     0     0     6     6 
```

这很简单：

```
%define vector of arbitrary length
a=1:6;
%generate b with shifted diagonal matrices
b=diag(a)+diag(a(2:end),-1); 
```

diag 的第二个参数只是移动生成的对角线。

# android - 如何在 Android 中查找新安装的应用程序的数据使用情况

> ID：11132693
> 
> 赞同：2
> 
> 时间：2012-06-21T06:29:13.427
> 
> 标签：android

如何查找新安装的应用程序的数据使用情况？

**getUidTxBytes(int uid) 和 getUidRxBytes(int uid)**用于获取数据使用情况，但如果安装了新应用并使用数据，如何识别新应用已安装？还有我怎么知道新安装的应用程序正在使用数据？
我对这个话题很陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T17:51:59.483

您可以从系统中注册广播意图，`ACTION_PACKAGE_ADDED`并`ACTION_PACKAGE_CHANGED`在安装或升级新应用程序时收到通知。包的 UID 总是与这些 Intent 作为额外的一起传递。

[SDK 文档链接](http://developer.android.com/reference/android/content/Intent.html#ACTION_PACKAGE_ADDED)以获取更多信息。

高温高压

# php - PHP PDO 的事务究竟如何与并发一起工作？

> ID：11132696
> 
> 赞同：1
> 
> 时间：2012-06-21T06:29:20.103
> 
> 标签：php, mysql, transactions, pdo, acid

我正在制作一个 web 应用程序，他们将是多个用户相互交互并阅读/做出决定/修改共享数据。

我读过事务是原子的，这是我需要的。但是，我不确定它如何与 PHP 一起使用`PDO::beginTransaction()`

我的意思是原子的，如果一个事务正在编辑一些数据，所有其他事务也修改/读取该数据将需要等到第一个事务完成。就像我不希望两个脚本读取一个值，增加旧的，并且有效地只存储一个增量。第二个脚本必须等待第一个脚本完成。

在我见过的几乎所有示例中，查询都是连续使用的（例如[PHP + MySQL 事务示例](https://stackoverflow.com/questions/2708237/php-mysql-transactions-examples)）。我正在做的很多事情都需要

*   查询和获取
*   检查该数据并对其采取行动，作为同一事务的一部分

* * *

1.  **如果查询之间存在 PHP 代码，事务是否仍会自动进行？**
2.  **我知道你应该在交易之外准备你的陈述，但是可以在里面准备吗？基本上，我担心 PHP 活动会破坏事务的原子性。**

这是一个示例（此示例不需要检查先前的值）。我有一个非常基本的收件箱系统，它将邮件存储为序列化数组（如果有人有更好的建议，请告诉我）。所以我查询它，附加新消息并存储它。它会按预期工作吗？

```
$getMail = $con->prepare('SELECT messages FROM inboxes WHERE id=?');
$storeMail = $con->prepare('UPDATE inboxes SET messages=? WHERE id=?');
$con->beginTransaction();
$getMail->execute(array($recipientID));
$result = $getMail->fetch();
$result = unserialize($result[0]);
$result[] = $msg;
$storeMail->execute(array(serialize($result), $recipientID));
$con->commit(); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-21T06:33:37.730

事务仅相对于尝试使用相同数据的其他数据库连接是原子的，即其他连接将看到您的事务*没有*更改或*所有*更改；“原子”意味着没有其他数据库连接会看到中间状态，其中一些数据已更新，而另一些则没有。

查询之间的 PHP 代码不会破坏原子性，并且在哪里准备语句都没有关系。

# android - 为什么我的鼠标光标在 Eclipse 中变为加号？

> ID：11132700
> 
> 赞同：10
> 
> 时间：2012-06-21T06:29:40.207
> 
> 标签：android, eclipse

我只是在 Eclipse 中看到奇怪的行为。我正在开发一个 android 项目。在一项活动中，我的光标更改为加号，但它工作正常。

你能告诉我如何解决这个问题吗？

如何在该特定活动中更改为箭头符号？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-21T06:38:37.440

您可能已经选择了“切换块选择模式`Alt`++ ”工具，这就是为什么您的鼠标点被转换为`Shift`+`A`号的原因，将其关闭，它会再次变得简单。

有关此模式的更多信息：[单击此处](http://tkilla.ch/column_mode/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-21T06:35:44.750

只需执行以下步骤 -

1.  窗口 -> 关闭所有透视图。并且，重建你的观点。

2.  窗口-> 打开透视图-> Java（默认）-> 好的。

希望这两个步骤对您有所帮助。

# asp.net-mvc-3 - 如何在 asp.net mvc3 中使用 Kendo UI Editor 和剃须刀？

> ID：11132705
> 
> 赞同：8
> 
> 时间：2012-06-21T06:30:00.453
> 
> 标签：asp.net-mvc-3, razor, editor, kendo-ui

我正在使用 Kendo UI 的编辑器，所以我有很大的问题。

我不知道如何显示编辑器返回的项目。

编辑器转换如下：

```
<img src="someurl" /> 
```

到：

```
lt;p&gt;&lt;img src=&quot;someurl&quot;/&gt;&lt;/p&gt; 
```

我将转换后的字符串保存在数据库中，并尝试使用以下方式显示它：

```
@Html.Raw(item.description) 
```

其中描述是剑道返回的字符串。

**所以我不知道如何在我的视图中正确显示它**

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-21T08:06:33.700

有一个名为 KendeUI 编辑器的选项，`encoded`用于配置编辑器是否应提交编码的 HTML 标记。

`encoded`默认值为`true`

如果您不想存储未编码的文本，请在创建编辑器时使用此代码段：

```
$("#Editor").kendoEditor({
     encoded: false
 }); 
```

但是因为你没有向服务器发送编码文本，所以 Asp.net 请求验证器会启动，它会中止你的请求。

如果您使用的是强类型视图，您可以做的是`AllowHtmlAttribute`在您的模型属性上使用：

看法：

```
@model MyModel

@using(Html.BeginForm("SomeAction", "SomeController"))
{
     @Html.TextAreaFor(m => m.Editor)
     <input type="submit" value="Save" />
}

<script type="text/javascript">
   $(function(){
      $("#Editor").kendoEditor({
        encoded: false
      });
   });
</script> 
```

模型：

```
public class MyModel
{
    [AllowHtml]
    public string Editor { get; set; }
} 
```

控制器动作

```
public ActionResult SomeAction(MyModel myModel)
{
    //Save to db, etc.
} 
```

您还需要在 web.config 中设置以下内容，否则此属性在 .NET 4.0 中无效：

```
<httpRuntime requestValidationMode="2.0"/> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-05-04T18:37:59.173

我为 MVC 找到了这个解决方案：在视图中

```
<div class="editor-field">
    @(Html.Kendo().EditorFor(model => model.HtmlField).Encode(false))
    @Html.ValidationMessageFor(model => model.HtmlField)
</div> 
```

在模型中：

```
 [DataType(DataType.Html)]
   [AllowHtml]
   public string HtmlField{ get; set; } 
```

这已经足够了

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-29T20:47:12.903

更简单的方法是在控制器中进行更改，而不是在视图和模型中进行更改。所以：

**看法**

```
$("#Editor").kendoEditor(); 
```

**模型**

```
public class MyModel
{
    public string Editor { get; set; }
} 
```

**控制器**

```
Editor = Server.HtmlDecode(Editor); 
```

[html解码](http://msdn.microsoft.com/en-us/library/hwzhtkke.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-09T01:43:51.067

从 .NET Wrappers 生成的编辑器模板不再起作用。这是一个修复。

[http://pknopf.com/blog/kendo-ui-editor-templates-for-asp-net](http://pknopf.com/blog/kendo-ui-editor-templates-for-asp-net)

# javascript - 跟踪访问者在网页上的点击行为

> ID：11132708
> 
> 赞同：0
> 
> 时间：2012-06-21T06:30:38.667
> 
> 标签：javascript, html

`html`我正在用和编写我自己的主页`javascript`。

我的主页上有很多超链接，我感兴趣的是，我的页面的访问者点击了多少次。

例如，`<a href="paper.pdf">pdf</a>`是一个指向下载 pdf 文件的超链接。我想建立一个点击它的计数器机制。例如，这些信息会自动记录在一个文件中，以便我不时检查它。

除了计数器，其他信息，如点击时间，点击的访问者的IP也让我感兴趣。如果我能把它们录下来就太好了。

我不知道`javascript`，谁能建议我一种有效的方法来通过细节（或一段代码）来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T07:16:52.133

根据你的代码

```
<a href="some.pdf" id="uniqueID">PDF</a> 
```

你可以看到我在PDF链接中添加了一个ID，现在

```
$("#uniqueID").click(function(){
//Write a ajax function to calculate the count and storing
}); 
```

我没有写完整的代码，我认为你理解逻辑就足够了。

# php - 如何在wordpress中过滤“链接到现有内容”的建议？

> ID：11132710
> 
> 赞同：2
> 
> 时间：2012-06-21T06:30:50.303
> 
> 标签：php, wordpress, filter, hook

如何过滤“指向现有内容的链接”中给出的链接。

![在此处输入图像描述](../Images/90b75aaa39d5d602b941fd9a2e25d246.png)

如上图所示。我只想显示 WSP 横幅。

其中 WSP BANNER 和 CALENDAR 是自定义 post_type

任何帮助都将是可观的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T08:28:32.760

目前没有可用于此目的的现成过滤器。已为该请求发布了一张票。希望我们能尽快得到一张[。](http://core.trac.wordpress.org/ticket/21033)

在此之前，您可以创建自己的过滤器。

打开 include/class-wp-editor.php 并在第 712 行进行以下更改

```
$pt_names = apply_filters('custom_insert_link_suggestion_filter',array_keys( $pts )); 
```

我们只是添加了一个新过滤器，而不是获取所有公共帖子类型

然后在您的主题中添加以下代码以过滤内部链接自定义帖子类型

```
function my_filter_function($allowed_post_types)
{

if( condition chek)
{
         return array('page','your custom post types');
} 
```

} add_filter('custom_insert_link_suggestion_filter','my_filter_function',10,1);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T14:45:13.813

有一个插件可能对您有所帮助：[B09 Link to Existing Content](http://wordpress.org/plugins/b09-link-to-existing-content/)

它有一个名为“link_to_existing_content_post_types”的过滤器，可让您控制应搜索的帖子类型。

如果您还想完全控制搜索结果，您也可以将它与此插件一起使用：[Search Everything](http://wordpress.org/plugins/search-everything/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-15T07:05:45.503

考虑一个示例，在 wp.abc.com 上配置我的站点，并将我的根域 www.abc.com 指向新站点。我需要在常规设置中更新 URL。所以当我更新 URL 时，它会反映在菜单项等中。它是否也会反映在内容区域链接中？

# java - java applet - 在关闭 applet 或 stop() 时删除 ("java.io.tmpdir")+"myfolder" 内容

> ID：11132711
> 
> 赞同：0
> 
> 时间：2012-06-21T06:30:51.627
> 
> 标签：java, file, applet, java-io, temporary-files

我正在尝试清除我在 java.io.tmpdir 中为小程序临时使用而编写的 myfolder 内容（有一些罐子）。现在，当我尝试使用以下代码删除 void stop() 方法上的内容（jar）时：

```
 public void stop()
{
 File directory = new File (System.getProperty("java.io.tmpdir")+"JarClassLoader");
                 // Get all files in directory
                    File[] files = directory.listFiles();
                    for (File file : files)
                    {

                        // Delete each file
                        if (!file.delete())
                        {   
                            // Failed to delete file
                    }
                }
} 
```

它没有清除任何东西，或者操作系统可能持有这些罐子。每次我运行一个小程序，这些罐子不断增加..有没有办法在小程序停止时删除这些内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T23:40:17.990

```
File directory = new File (System.getProperty("java.io.tmpdir")+"JarClassLoader"); 
```

那应该是：

```
File directory = new File (System.getProperty("java.io.tmpdir"), "JarClassLoader"); 
```

# sql - Service Broker：接收数据时出错：'10054（现有连接被远程主机强制关闭。）'

> ID：11132713
> 
> 赞同：1
> 
> 时间：2012-06-21T06:31:12.687
> 
> 标签：sql, sql-server-2008-r2, service-broker

我已经成功地在相同的实例中执行了服务代理。但最近我开始探索多个实例之间的分布式服务代理应用程序，但没有任何成功。

我在域内的两个不同系统中创建了两个实例（都是开发人员版），当我将消息从一个实例发送到另一个实例时，它不会发送到接收/目标实例。当我检查`sys.transmission_queue`时，我得到`transmission_status`如下：

```
An error occurred while receiving data: 
'10054(An existing connection was forcibly closed by the remote host.)'. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:50:30.183

将 Profiler 附加到*另一个*实例（“强制”关闭连接的实例）并监视[Audit Broker Login](http://msdn.microsoft.com/en-us/library/ms190261.aspx)类。它将跟踪拒绝连接的原因（很可能端点上缺少 CONNECT 权限）。

运行[`ssbdiagnose`](http://msdn.microsoft.com/en-us/library/bb934450.aspx)也应该揭示问题：

```
ssbdiagnose runtime connect to -S <machineA> connect to -S <machineB> 
```

# python - Python：双向字母数字加密

> ID：11132714
> 
> 赞同：15
> 
> 时间：2012-06-21T06:31:17.200
> 
> 标签：python, encryption

我正在使用**Python 2.7**。我有一个字母数字字符串，我想对其执行加密/解密。无论我做什么都应该保持双向，结果也应该是字母数字。

例如：

```
str = 'ma6546fbd'
encrypted_data = encrypt_function(str)
decrypted_data = decrypt_function(encrypted_data)
print decrypted_data # I get 'ma6546fbd' 
```

**我做了什么：**

我写了一个函数

```
def xor_crypt_string(data, key):
    return ''.join(chr(ord(x) ^ ord(y)) for (x,y) in izip(data, cycle(key))) 
```

这需要数据和一个键并返回结果，问题是它也包含特殊字符，我想避免这种情况。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-06-21T06:47:27.607

如果您想要严格的加密（读取牢不可破），那么我会使用来自[pycrypto的](https://www.dlitz.net/software/pycrypto/api/current/)[AES](http://en.wikipedia.org/wiki/Advanced_Encryption_Standard)之类的东西。

```
>>> from Crypto.Cipher import AES
>>> from Crypto import Random
>>> key = b'Sixteen byte key'
>>> iv = Random.new().read(AES.block_size)
>>> cipher = AES.new(key, AES.MODE_CFB, iv)
>>> msg = iv + cipher.encrypt(b'Attack at dawn')
>>> msg.encode("hex")
'e10e096aabff9db382abe8d704404995a7b64d72a4e1b9e5208912d206c4' 
```

那是你的ASCII信息。现在像这样解码消息

```
>>> recv='e10e096aabff9db382abe8d704404995a7b64d72a4e1b9e5208912d206c4'
>>> cipher.decrypt(recv.decode("hex"))[len(iv):]
'Attack at dawn'
>>> 
```

您自己编写的任何加密方法都将很容易被专家破解，而您上面展示的加密方法属于该类别。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T06:48:11.600

字母数字要求有多严格？

对现有加密功能的结果进行 base64 编码怎么样？您最终可能会得到一些杂散的 '=' 填充字符，但您可以修剪这些字符并计算和处理额外的填充。

```
def xor_crypt_string(plaintext, key):
    ciphertext = ''.join(chr(ord(x) ^ ord(y)) for (x,y) in izip(plaintext, cycle(key)))
    return ciphertext.encode('base64')

def xor_decrypt_string(ciphertext, key):
    ciphertext = ciphertext.decode('base64')
    return ''.join(chr(ord(x) ^ ord(y)) for (x,y) in izip(ciphertext, cycle(key))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-23T14:28:58.153

使用[PyCryptodome](https://pypi.org/project/pycryptodome/)，它是 PyCrypto 的一个[分支](https://pypi.org/project/pycrypto/)。

```
pip install pycryptodome

>>> from Crypto.Cipher import AES
>>> from Crypto import Random
>>> key = b'Sixteen byte key'
>>> iv = Random.new().read(AES.block_size)
>>> cipher = AES.new(key, AES.MODE_CFB, iv)
>>> msg = iv + cipher.encrypt(b'Attack at dawn')
>>> msg.hex()
'747a6a3c7357711773f4df5c3e8989dd055da5870d0bf7a967a5cd59ca98' 
```

对于解密：

```
>>> encrypted_data = '747a6a3c7357711773f4df5c3e8989dd055da5870d0bf7a967a5cd59ca98'
>>> cipher = AES.new(key, AES.MODE_CFB, iv)
>>> cipher.decrypt(binascii.unhexlify(encrypted_data))[len(iv):] 
```

注意：

> 密码对象是有状态的：一旦您解密了一条消息，您就无法解密（或加密）具有相同对象的另一条消息。

# python - 如何使用 PyOpenGL 指定缓冲区偏移量

> ID：11132716
> 
> 赞同：6
> 
> 时间：2012-06-21T06:31:25.797
> 
> 标签：python, opengl, pyopengl, vertex-buffer

什么是 PyOpenGL 等价物

```
#define BUFFER_OFFSET(i) (reinterpret_cast<void*>(i))

glDrawElements(GL_TRIANGLE_STRIP, count, GL_UNSIGNED_SHORT, BUFFER_OFFSET(offset)) 
```

如果偏移量为 0，则

```
glDrawElements(GL_TRIANGLE_STRIP, count, GL_UNSIGNED_SHORT, None) 
```

有效，但我不知道如何将非零偏移量指定到缓冲区对象中。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-21T06:51:26.610

您应该传递一个`ctypes`void 指针，该指针可以通过以下方式构造：

```
ctypes.c_void_p(offset) 
```

似乎有一个使用`VBO`类的更具体的 PyOpenGL 选项，并且根据[this](http://www.digipedia.pl/usenet/thread/16013/403/)使用某些版本的 PyOpenGL 。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-21T06:51:00.977

您可以为此使用[OpenGL.arrays.vbo.VBO](http://pyopengl.sourceforge.net/documentation/pydoc/OpenGL.arrays.vbo.html)类：

```
from OpenGL.arrays import vbo

# data for your buffer
buf = vbo.VBO( [ 1,2,3,4,5,...], target = GL_ELEMENT_ARRAY_BUFFER ) 

# calls glBindBuffer
buf.bind() 

# starts reading at 14-th byte
glDrawElements(GL_TRIANGLE_STRIP, count, GL_UNSIGNED_SHORT, buf + 14) 
```

# android - Android：安装非市场应用

> ID：11132719
> 
> 赞同：0
> 
> 时间：2012-06-21T06:31:56.870
> 
> 标签：android, installation, google-play

我正在尝试在 Android 中安装非市场应用程序。它在以下位置下载：`file:///mnt/sdcard/Download/App.apk`

我正在做的是：

```
Intent promptInstall = new Intent(Intent.ACTION_VIEW).setData(Uri.parse(uriString)).setType("application/vnd.android.package-archive");
startActivity(promptInstall); 
```

其中 uriString 是 : `file:///mnt/sdcard/Download/App.apk`。

但有一个例外：

```
android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.VIEW typ=application/vnd.android.package-archive } 
```

**编辑**

我正在使用 DownloadManager 下载应用程序：

```
DownloadManager dm = (DownloadManager) getSystemService(DOWNLOAD_SERVICE);
DownloadManager.Request req = new DownloadManager.Request(Uri.parse(MY_PATH_TP_APK));
Request req.setTitle("Test")
       .setDescription("Something useful.")
       .setDestinationInExternalPublicDir(Environment.DIRECTORY_DOWNLOADS, "App.apk");
long enqueue = dm.enqueue(req); 
```

下载后：

```
_receiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        String action = intent.getAction();
        if (DownloadManager.ACTION_DOWNLOAD_COMPLETE.equals(action)) {
            Query query = new Query();
            query.setFilterById(enqueue);
            Cursor c = dm.query(query);
            if (c.moveToFirst()) {
                int columnIndex = c.getColumnIndex(DownloadManager.COLUMN_STATUS);
                if (DownloadManager.STATUS_SUCCESSFUL == c.getInt(columnIndex)) {
                    String uriString = c.getString(c.getColumnIndex(DownloadManager.COLUMN_LOCAL_URI));
                    Intent promptInstall = new  Intent(Intent.ACTION_VIEW)
                    .setData(Uri.parse(uriString))
                    .setType("application/vnd.android.package-archive");
                    startActivity(promptInstall);
                }
            }
        }
    }
}; 
```

如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T06:34:57.557

我在我的一个应用程序中使用此代码，它工作正常：

```
Uri fileUri = Uri.fromFile(new File("/mnt/sdcard/Download", "App.apk"));
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(fileUri, "application/vnd.android.package-archive");
startActivity(intent); 
```

也许你的代码有太多的斜线（file:///mnt 而不是 file://mnt（这里不确定））。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T04:05:43.147

代替

```
String uriString = c.getString(c.getColumnIndex(DownloadManager.COLUMN_LOCAL_URI)); 
```

和：

```
c.getString(c.getColumnIndex(DownloadManager.COLUMN_LOCAL_FILENAME)); 
```

# xml - 将列顺序保持为 flex 数据网格中的数据提供者

> ID：11132724
> 
> 赞同：0
> 
> 时间：2012-06-21T06:32:21.113
> 
> 标签：xml, apache-flex, datagrid

我正在通过 web 服务获取 xml，并希望将其显示到数据网格。但是这些列不是为了数据提供者而来的。请在下面找到xmldata：

```
<Vendor name="Infosys Limited" adopTotal="120" totalstrength="775" FY10Q1="162" FY10Q2="132" FY10Q3="229" FY10Q4="254" FY11Q1="282" FY11Q2="243" FY11Q3="238" FY11Q4="233" FY12Q1="237" FY12Q2="136" FY12Q3="101" FY12Q4="120"/>
<Vendor name="Wipro" adopTotal="42" totalstrength="1181" FY10Q1="9" FY10Q2="12" FY10Q3="53" FY10Q4="67" FY11Q1="85" FY11Q2="76" FY11Q3="84" FY11Q4="82" FY12Q1="98" FY12Q2="51" FY12Q3="39" FY12Q4="42"/>
<Vendor name="Zensar Technologies Inc" adopTotal="187" totalstrength="1408" FY10Q1="207" FY10Q2="197" FY10Q3="428" FY10Q4="490" FY11Q1="511" FY11Q2="479" FY11Q3="471" FY11Q4="440" FY12Q1="440" FY12Q2="308" FY12Q3="137" FY12Q4="187"/>
<Vendor name="Hcl Technologies Limited" adopTotal="0" totalstrength="342" FY10Q1="0" FY10Q2="0" FY10Q3="0" FY10Q4="0" FY11Q1="3" FY11Q2="0" FY11Q3="9" FY11Q4="0" FY12Q1="0" FY12Q2="1" FY12Q3="1" FY12Q4="0"/>
<Vendor name="Mahindra Satyam" adopTotal="73" totalstrength="12" FY10Q1="106" FY10Q2="69" FY10Q3="50" FY10Q4="63" FY11Q1="117" FY11Q2="203" FY11Q3="192" FY11Q4="195" FY12Q1="208" FY12Q2="139" FY12Q3="53" FY12Q4="73"/>
<Vendor name="TCS" adopTotal="48" totalstrength="106" FY10Q1="54" FY10Q2="75" FY10Q3="140" FY10Q4="164" FY11Q1="164" FY11Q2="140" FY11Q3="147" FY11Q4="134" FY12Q1="124" FY12Q2="83" FY12Q3="49" FY12Q4="48"/> 
```

在 datagrid 中，名称属性终于来了。我不能保留弹性代码，因为列数可能会增加。请帮忙。

谢谢里米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T07:39:39.613

请找到以下代码：-这可能会给您一些想法：-

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600"
               >
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
        <fx:XML id="sampleXML" >
            <contacts>
                <Vendor name="Infosys Limited" adopTotal="120" totalstrength="775" FY10Q1="162" FY10Q2="132" FY10Q3="229" FY10Q4="254" FY11Q1="282" FY11Q2="243" FY11Q3="238" FY11Q4="233" FY12Q1="237" FY12Q2="136" FY12Q3="101" FY12Q4="120"/>
                <Vendor name="Wipro" adopTotal="42" totalstrength="1181" FY10Q1="9" FY10Q2="12" FY10Q3="53" FY10Q4="67" FY11Q1="85" FY11Q2="76" FY11Q3="84" FY11Q4="82" FY12Q1="98" FY12Q2="51" FY12Q3="39" FY12Q4="42"/>
                <Vendor name="Zensar Technologies Inc" adopTotal="187" totalstrength="1408" FY10Q1="207" FY10Q2="197" FY10Q3="428" FY10Q4="490" FY11Q1="511" FY11Q2="479" FY11Q3="471" FY11Q4="440" FY12Q1="440" FY12Q2="308" FY12Q3="137" FY12Q4="187"/>
                <Vendor name="Hcl Technologies Limited" adopTotal="0" totalstrength="342" FY10Q1="0" FY10Q2="0" FY10Q3="0" FY10Q4="0" FY11Q1="3" FY11Q2="0" FY11Q3="9" FY11Q4="0" FY12Q1="0" FY12Q2="1" FY12Q3="1" FY12Q4="0"/>
                <Vendor name="Mahindra Satyam" adopTotal="73" totalstrength="12" FY10Q1="106" FY10Q2="69" FY10Q3="50" FY10Q4="63" FY11Q1="117" FY11Q2="203" FY11Q3="192" FY11Q4="195" FY12Q1="208" FY12Q2="139" FY12Q3="53" FY12Q4="73"/>
                <Vendor name="TCS" adopTotal="48" totalstrength="106" FY10Q1="54" FY10Q2="75" FY10Q3="140" FY10Q4="164" FY11Q1="164" FY11Q2="140" FY11Q3="147" FY11Q4="134" FY12Q1="124" FY12Q2="83" FY12Q3="49" FY12Q4="48"/>
            </contacts>
        </fx:XML>
    </fx:Declarations>

    <fx:Script>
        <![CDATA[
            import mx.collections.ArrayCollection;
            import mx.controls.advancedDataGridClasses.AdvancedDataGridColumn;
            import mx.events.FlexEvent;

            private function createADGColumn():void
            {
                var attributes:XMLList = sampleXML.Vendor[0].@*;
                var length:int = attributes.length();
                var columns:Array = myADG.columns;
                for(var i:Number=0; i<length; i++)
                {
                    var adgColumn:AdvancedDataGridColumn = new AdvancedDataGridColumn();
                    adgColumn.headerText = String(attributes[i].localName()).toLocaleUpperCase();
                    adgColumn.dataField = "@"+attributes[i].localName();
                    columns.push(adgColumn);
                    myADG.columns = columns;
                } 
                myADG.dataProvider = sampleXML.Vendor;
            }

        ]]>
    </fx:Script>

    <mx:AdvancedDataGrid id="myADG" x="50" y="50"
                         width="900" height="400" creationComplete="createADGColumn()"
                         variableRowHeight="true" />
</s:Application> 
```

# javascript - 将日期插入数组

> ID：11132726
> 
> 赞同：-2
> 
> 时间：2012-06-21T06:32:48.163
> 
> 标签：javascript

我已经将随机日期插入到文本框中，让它成为 2009 年 12 月 2 日，现在我只想要 2 个如何使用 javascript 来完成我需要数组或任何其他方法。

请给我一个合适的例子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T06:41:26.093

You'll get month from 'dd/m/yyyy' formatted date by reversing the date

`new Date("12/2/2009".split("/").reverse().join("/")).getMonth()`

Check [here](http://jsfiddle.net/ranganadh/jaZZM/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T06:37:13.940

利用 ：

```
var mydate = $("textboxId").val();
var dateArr = mydate.split("/");

var date = dateArr[0];
var month = dateArr[1];
var year = dateArr[2]; 
```

# image-processing - 在opencv中查找轮廓的长度

> ID：11132729
> 
> 赞同：9
> 
> 时间：2012-06-21T06:32:59.413
> 
> 标签：image-processing, opencv

这是关于一个项目，该项目涉及在 C 中使用 OpenCV 检测图像中的文本。该过程是检测相应轮廓内外的颜色，这样做的方法是在等距位置的轮廓上绘制法线并提取法线端点对应位置的像素颜色。

我正在尝试使用以下代码来实现这一点，但它不起作用。我的意思是，它绘制法线，但不是以等间距的方式绘制。

```
for( ; contours!=0 ; contours = contours->h_next )
{
        CvScalar color = CV_RGB( rand()&255, rand()&255, rand()&255 );

        cvDrawContours( cc_color, contours, color, CV_RGB(0,0,0), -1, 1, 8, cvPoint(0,0) );
        ptr = contours;
        for( i=1; i<ptr->total; i++)
        {
         p1 = CV_GET_SEQ_ELEM( CvPoint, ptr, i );

         p2 = CV_GET_SEQ_ELEM( CvPoint, ptr, i+1 );

         x1 = p1->x;
         y1 = p1->y;

         x2 = p2->x;
         y2 = p2->y;
         printf("%d %d     %d %d\n",x1,y1,x2,y2);
         draw_normals(x1,y1,x2,y2);
     }
} 
```

那么有没有办法找到轮廓的长度，以便我可以将它除以我想要绘制的法线数量。提前致谢。

编辑：draw_normal 函数在作为参数传递给它的两点之间绘制法线。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-21T06:49:08.470

> 那么有没有办法找到轮廓的长度？

是的，您可以使用 OpenCV 标准函数 , 找到轮廓的长度`cvarcLength()`。

[在此处检查文档。](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=arclength#arclength)

# javascript - JQuery attr 选择器转为字符串，存储为变量，然后传入另一个 JQuery 选择器

> ID：11132731
> 
> 赞同：0
> 
> 时间：2012-06-21T06:33:00.853
> 
> 标签：javascript, jquery

如果单击，我想使用 JQuery 选择器来获取 elelement，检查以确保它具有适当的类名（在本例中为 jobtype），如果是，则将其 name 属性值用作选择器，以 hide()值与第一个选择器名称属性值相同的类。

这是我到目前为止的代码：

```
 $('fieldset.workexperience input').on('change', function() {
        // var jtaa = {"bit" : "Business Information Technology",
        //          "cs" : "Customer Service",
        //          "dev" : "Developer",
        //          "eng" : "Engineer",
        //          "mgr" : "Manager",
        //          "ocm" : "Organizational Change Management" };
        if ($(this).hasClass('jobtype')) {
            $($(this).attr("name")).hide();
        } else {

        }
    }); 
```

var jtaa 具有键和值。键代表不同的可能“名称”属性。我想当一个被点击时，如果它的名字是 eng，那么 JQuery 选择器应该是`$(.eng).hide()`. 当我直接在控制台中输入时，它可以工作，但是，直接从这里，它会出错。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T06:36:41.923

```
$('fieldset.workexperience input').on('change', function() {
        // var jtaa = {"bit" : "Business Information Technology",
        //          "cs" : "Customer Service",
        //          "dev" : "Developer",
        //          "eng" : "Engineer",
        //          "mgr" : "Manager",
        //          "ocm" : "Organizational Change Management" };
        var obj=$(this);
        if (obj.hasClass('jobtype')) {
            $('.'+obj.attr("name")).hide();
        } else {

        }
    }); 
```

注意`.`选择器的句点连接另外，您可能需要考虑添加一个非空检查以使代码健壮..

# openx - 安装openX时没有css和js

> ID：11132733
> 
> 赞同：1
> 
> 时间：2012-06-21T06:33:13.117
> 
> 标签：openx

控制台显示 2 个错误：找不到变量 $ 和找不到变量：initPage。页面看起来没有包含任何 css 和 js。安装后（验证码也没有看到）情况相同。管理面板没有 css 和 javascripts :(

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-21T08:49:59.250

天哪，这是 AdBlock。禁用使用 openx

# string - 在 T-SQL 中获取字符串的特定部分

> ID：11132734
> 
> 赞同：2
> 
> 时间：2012-06-21T06:33:20.587
> 
> 标签：string, sql-server-2008, tsql

我有一个字符串，比如`prop234`字母部分有固定长度，但数字部分可以是任意长度

我必须从 T-SQL 中的字符串中获取数字部分（在 SQL Server 2008 上）

我尝试了`SUBSTRING`函数，但我不知道数字部分的长度，所以无法提供第三个参数，即长度

```
SUBSTRING ( expression ,start , length ) 
```

我知道起始索引，但长度可以是任何东西

一种解决方案是

```
SELECT substring([ColumnName], 5, LEN(ColumnName) - 4) 
```

因为起始索引是固定的，即字母部分的长度是 4（固定）

有没有更好的解决方案，如果字母部分的长度不是恒定的怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T08:26:40.873

```
select stuff('prop234', 1,4,'') 
```

如果长度不是常数：

```
declare @t table(expression varchar(100))
insert @t values('propprop234')

select stuff(expression, 1, patindex('%_[0-9]%', expression), '') from @t 
```

编辑：为确保处理不良数据，例如首先没有文本或最后没有数字，这里有一个稍微不同的方法：

```
select stuff(expression, 1,patindex('%[^0-9][0-9]%', expression + '0'), '') 
from @t 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T05:18:37.347

您根本不需要计算字符串其余部分的长度。以下将正常工作。

```
SELECT substring([ColumnName], PATINDEX('%0-9%',[ColumnName]),8000) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T07:49:17.973

无论它有多长或字母部分有多长，这都应该得到数字：

```
declare @str as varchar(50)
declare @pos as integer

set @str = 'abdfgdfghhcd123456784564690'
set @pos =  PATINDEX('%[0-9]%',@str)

select substring(@str, @pos,len(@str)-@pos+1) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T06:42:09.777

If your "prefix" is always 4 chars, you can writesomething like:

```
declare @v varchar(max) = 'prop234'

select substring(@v, 5, DATALENGTH(@v))

select @v = 'prop567890'

select substring(@v, 5, DATALENGTH(@v)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-21T06:38:21.593

您可以使用用户定义函数 (UDF) 从包含数字、特殊字符等的字符串中仅获取字母。

```
IF object_id('dbo.GetAlpha') is not NULL
   DROP FUNCTION GetAlpha
GO

CREATE FUNCTION GetAlpha (@strAlpha VARCHAR(256)) 
RETURNS VARCHAR(256)
AS

BEGIN
DECLARE  @intAlpha INT
SET      @intAlpha = PATINDEX('%[^a-z]%', @strAlpha)

BEGIN
WHILE    @intAlpha > 0
BEGIN
SET @strAlpha = STUFF(@strAlpha, @intAlpha, 1, '' )
SET @intAlpha = PATINDEX('%[^a-z]%', @strAlpha)
END
END
RETURN ISNULL(@strAlpha,0)
END
GO 
```

示例如何使用函数

```
select dbo.getalpha('stackoverflow102020');

-------------
stackoverflow 
```

# asp.net - ASP 纯文本文件响应被缩短

> ID：11132735
> 
> 赞同：2
> 
> 时间：2012-06-21T06:33:22.233
> 
> 标签：asp.net

我有一个带有按钮的 ASP Web 表单页面。在回发时，按钮将一些 XML 内容作为文件发送回用户。它一直在工作，但是在一个长度为 16759 的字符串的情况下，下载的文件被缩短了 10 个字节。Chrome 和 Firefox 都表现出相同的行为。

解决方案是将内容类型从“text/xml”（我也尝试过“text/plain”）更改为“application/octet-stream”。但是，我想了解为什么其他内容类型会以这种方式运行。

我的代码如下。（我玩过几种不同的方法，它们没有改变任何东西）

```
HttpContext.Current.Response.Clear();
HttpContext.Current.Response.ContentType = "text/plain";
HttpContext.Current.Response.AddHeader("Content-Length", content.Length.ToString());
HttpContext.Current.Response.AddHeader("Content-Disposition", "attachment; filename=\"test.txt\"");
HttpContext.Current.Response.Write(content);
HttpContext.Current.Response.Flush();
HttpContext.Current.Response.Close(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T06:41:46.750

All you have to do is not call *Close* on the Stream. Don't ask me for an explanation, all I know is it works.

Explanation per the [MSDN link for HttpResponse.Close](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.close.aspx) kindly provided by Ray Cheng:

> This method terminates the connection to the client in an abrupt manner and is not intended for normal HTTP request processing. The method sends a reset packet to the client, which can cause response data that is buffered on the server, the client, or somewhere in between to be dropped.

# notifications - JMX：包装的 MXBean 不发送通知

> ID：11132740
> 
> 赞同：0
> 
> 时间：2012-06-21T06:33:36.980
> 
> 标签：notifications, jmx

根据 JMX API，我可以使用[StandardMBean](http://docs.oracle.com/javase/6/docs/api/javax/management/StandardMBean.html)和[StandardEmitterMBean](http://docs.oracle.com/javase/6/docs/api/javax/management/StandardEmitterMBean.html)之类的类来使用自定义挂钩。所以我可以将它包装在这些类之一中，而不是直接注册 MXBean 本身。这工作正常，但是一旦我尝试使用 JMX 通知框架，当直接使用这个包装类而不是 MXBean 时，不会触发任何通知。一些示例代码：

MXBean 接口

```
public interface MyMXBean {
    public void hello();
} 
```

实施

```
public class MyMXBeanImpl extends NotificationBroadcasterSupport implements MyMXBean {

    @Override    
    public void hello() {
        Notification n = //...creating new Notification
        sendNotification(n);
    }
} 
```

注册：

```
public class Registration() {
    public static void main(String[] args) throws Exception {

        MBeanServer mbs = ManagementFactory.getPlatformMBeanServer();  
        ObjectName oname = 
            new ObjectName("example:type=myexample,name=MyExamleMXBean");
        // does not fire any notifications      
        mbs.registerMBean(
            new StandardEmitterMBean(new MyMXBeanImpl(), MyMXBean.class, true), oname);

        // would fire the notification
        // mbs.register(new MyMXBeanImpl(), oname);
    }
} 
```

当我将 JConsole 连接到我的 bean 时，订阅 Notification 机制并执行 hello() 方法没有任何反应。仅当直接注册 MXBean 时，一切正常。将自定义 NotificationListeners 添加到我的 MXBean 时，它也不起作用。我已经尝试以某种方式在包装类中捕获此 Notification 事件并以某种方式转发它，但这也不起作用。你知道我在这里想念什么吗？或者它只是在使用其中一个包装类时不起作用？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T11:14:27.613

简而言之（在移动设备上你看到），你需要扩展你的类来为你的通知类型提供通知信息元数据。

# android - TitlePageIndicator CirclePageIndicator 都在同一个 ViewPager

> ID：11132741
> 
> 赞同：2
> 
> 时间：2012-06-21T06:33:37.010
> 
> 标签：android, android-fragments, android-viewpager, viewpagerindicator

我正在开发一个 Android 3.1 平板电脑应用程序。

我正在使用带有 Fragments 的 ViewPager，并且我正在使用[ViewPageIndicator](http://viewpagerindicator.com/)来显示 TitlePageIndicator 和 CirclePageIndicator。

我的问题是我可以同时使用两者。

```
public class FillEReportFragmentActivity extends FragmentActivity
{
    private ViewPager mViewPager;
    private FillEReportFragmentPagerAdapter mPagerAdapter;

    @Override
    protected void onCreate(Bundle savedInstance)
    {
        super.onCreate(savedInstance);
        setContentView(R.layout.fill_ereport_paged);

        mViewPager = (ViewPager)findViewById(R.id.pager);
        mPagerAdapter = new FillEReportFragmentPagerAdapter(getSupportFragmentManager());
        mViewPager.setAdapter(mPagerAdapter);

        CirclePageIndicator mIndicator = (CirclePageIndicator)findViewById(R.id.indicator);
        mIndicator.setViewPager(mViewPager);
        //mIndicator.setSnap(true);
        //mIndicator.setCurrentItem(0);

        //Bind the title indicator to the adapter
        TitlePageIndicator titleIndicator = (TitlePageIndicator)findViewById(R.id.titles);
        titleIndicator.setViewPager(mViewPager);
    }
} 
```

它只适用于最后一个绑定到`mViewPager`.

**如何将 TitleIndicator 和 CirclePageIndicator 与同一个 ViewPager 绑定？**

# javascript - 如何在没有 javascript 的情况下验证 html 文件？

> ID：11132743
> 
> 赞同：0
> 
> 时间：2012-06-21T06:33:40.240
> 
> 标签：javascript, html, validation

如果浏览器禁用了 javascript，那么如何验证 html 文件？我不是在谈论'如何启用 javascript，而是如何在不使用 javascript 的情况下验证 html 表单？这个问题是面试官问的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T06:38:51.273

表单验证必须**始终**在服务器端执行。客户端验证很棒，但可选。这肯定是面试官要找的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T06:40:18.283

Not sure what 'validate' means in that context (might be a good chance for you to ask a follow up question on what he/she means on html validation?)

Anyway, I am assuming that they are talking about HTML markup validation then there are online services like:

*   [http://validator.w3.org/](http://validator.w3.org/)

If the interviewer is talking about validation in terms of client-side validation (eg user age must contain range between X to Yetc), then you might need to validate the input on the server (eg with server side code).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T06:38:36.447

您可以参考[How to validate html for input without using javascript](https://stackoverflow.com/questions/4798046/how-to-validate-html-form-input-without-using-javascript)中的示例之一。

> Javascript 是在提交数据之前在客户端验证数据的唯一方法。由于可以禁用 Javascript，因此您的服务器端代码应始终在使用之前验证任何提交的数据。

# git - 为什么推送后远程没有删除已删除的分支？

> ID：11132744
> 
> 赞同：4
> 
> 时间：2012-06-21T06:33:45.247
> 
> 标签：git, version-control, branch, dvcs, git-flow

我正在使用它，它的作用是每当我这样做时`git-flow`它都会删除我的`feature/abc`分支：

```
git flow feature abc finish 
```

`feature/abc`它与分支合并后删除`develop`分支。之后我推动我的`develop`分支。

```
git push origin develop 
```

现在，在远程我可以看到`feature/abc`分支，但不能在本地看到。那么，这是否意味着它已从本地存储库中删除，并且该删除没有被带到远程？

据我了解：

*   由于 git 是分布式的，所以整个 repo 存在于所有机器上。
*   因此，如果我在本地存储库中进行更改并将其推送到远程。
*   然后，我的所有更改都应该推送到远程，包括删除。

冲突：

*   推送后本地和远程 git repo 有何不同。

=> 假设我是代码的唯一开发者。

**更新**

我的问题是我在合并后在本地删除了分支。然后我推送了我合并的分支，那为什么没有反映在遥控器上？因为，GIT 是 DVCS，在推/拉上应该是相同的。[考虑到我是唯一的开发者]

我也没有要求创建它。它使分支进行了我的更改，将其合并回来，然后删除了分支并推送了我更新的开发分支。那么，如果它自动检测到这些分支的创建，那么为什么不删除呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T08:56:36.320

> 因为，GIT 是 DVCS，在推/拉上应该是相同的。

不，这不是真的。它是分布式的，因此网络中的每个存储库或多或少都包含相同的数据，但只是或多或少。当您使用 push 和 pull 时，您明确指定要推送的内容。

`git push remote branch`仅将分支指针推`branch`送到远程存储库并传输远程存储库构建它所需的所有提交，但不会更多。这意味着只有分支指向的提交和所有父级实际上被推送，直到远程存储库找到它已经拥有的公共父级（在最坏的情况下，这是特殊的零提交，即空父级）。

以同样的方式只获取在本地`git pull remote branch`构建远程分支所需的更改。`remote/branch`

要真正获得所有提交，您可以使用`git fetch`，并推送您可以使用的所有本地分支`git push --all`。但同样，它只获取/推送构建分支（或标签）所需的提交，而不是存储库拥有的所有内容。

现在，当您将分支推送到远程存储库时，它只会更新您实际推送的那些分支，因此当您删除本地远程并使用 推送时`--all`，只会推送您的本地分支，并且不包括已删除的分支。因此，您的本地 Git 不再知道您在本地删除了哪些分支（因为它们已合并），因此无法自动将该信息提供给远程存储库。然而，它可以做的是告诉远程存储库它在本地拥有的每个分支，以便远程可以找出哪个被删除。您可以使用选项来执行此操作`--prune`。但是请注意，这会删除本地不存在的所有分支，因此在与推送不同分支但不拉其他分支的多个用户一起工作时可能会出现问题（尽管我实际上从未测试过）。

最好的显然是直接删除本地删除的分支：

```
git push remote :branch 
```

# java - 如何使静态递归方法返回 HashMap？

> ID：11132746
> 
> 赞同：1
> 
> 时间：2012-06-21T06:33:47.307
> 
> 标签：java, android, recursion

我正在创建一个帮助方法，该方法允许我遍历 XML 文档并将每个元素放入数据 HashMap 中，然后返回它。这是我一直在研究的方法：

```
private static HashMap<String, String> traverseNodes( Node n, HashMap<String,String> data ) 
{
    NodeList children = n.getChildNodes();
    if( children != null ) {
      for( int i = 0; i < children.getLength(); i++ ) {
        Node childNode = children.item( i );

        String nodeName = childNode.getNodeName();
        if(childNode instanceof Element)
        {
            data.put(nodeName, getStringByTag(nodeName, (Element)childNode));
            Log.d("traversal", childNode.getNodeName() + " was saved in hashmap");
        }

        else
            Log.d("traversal", childNode.getNodeName() + " Is not an Element type");

        System.out.println( "node name = " + childNode.getNodeName() );
        traverseNodes( childNode, data );
      }
    }

    return data;

} 
```

我尝试运行该示例，虽然我收到消息说“childNode.getNodeName() +”已保存在 hashmap 中。但返回的 HashMap 是空的。

我究竟做错了什么？

*编辑！奖励问题：我编辑了代码以反映建议的更改。然而，似乎该方法本身并没有保存我的 XML 文档的值。方法的逻辑有问题吗？*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T06:37:16.360

您正在为每次通话创建一个新地图。您需要将现有地图传递给*递归*调用。它应该看起来像这样：

```
private static Map<String, String> traverseNodes(Node n) {
    Map<String, String> map = new HashMap<String, String>();
    traverseNodesRecurse(n, map);
    return map;
}

private static void traverseNodesRecurse(Node n, Map<String, String> map) {
    // Logic as per question
    // Recursive call (in the loop, etc)
    traverseNodes(childNode, map);

    // No need for a return statement
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T06:41:18.940

I think you need something like that

```
private static HashMap<String, String> traverseNodes( Node n ) {
    HashMap<String, String> data = new HashMap<String, String>();
    traverseNodes( n, data );
    return data;
}

private static void traverseNodes( Node n, HashMap<String, String> data ) {
    // Here is your recursive code that do data.put(key, value)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T07:22:42.960

```
private static HashMap<String, String> data = new HashMap<String, String>();

private static traverseNodes( Node n) 
{
    NodeList children = n.getChildNodes();
    if( children != null ) {
      for( int i = 0; i < children.getLength(); i++ ) {

        Node childNode = children.item( i );

        if(childNode instanceof Element)
        {

            String nodeName = childNode.getNodeName();
            data.put(nodeName, getStringByTag(nodeName, (Element)childNode));
            Log.d("traversal", childNode.getNodeName() + " was saved in hashmap");
        }

        else
            Log.d("traversal", childNode.getNodeName() + " Is not an Element type");

        System.out.println( "node name = " + childNode.getNodeName() );
        traverseNodes( childNode);
      }
    }

    return data;

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T06:37:41.297

我会说保持`HashMap`在方法之外并将其作为参数传递 -

```
private static HashMap<String, String> traverseNodes( Node n, HashMap<String, String> data  ) 
```

# qt - QT 从 QWebView 的 QNetworkAccessManager 中读取数据

> ID：11132747
> 
> 赞同：1
> 
> 时间：2012-06-21T06:33:47.183
> 
> 标签：qt, qwebview, qnetworkaccessmanager

我正在尝试使用 QNetworkAccessManager 从 QWebView 读取响应数据。

我按照此处找到的回复中的说明进行操作： [how to get response in QtWebKit](https://stackoverflow.com/questions/2426053/how-to-get-response-in-qtwebkit)

我将 QNetworkAccessManager 子类化，然后将 QWebView 设置为使用我的类：

```
ui->explorer->page()->setNetworkAccessManager(new myNetworkAccessManager()); 
```

然后我重写 createRequest 函数并尝试读取数据：

```
#include "mynetworkaccessmanager.h"
myNetworkAccessManager::myNetworkAccessManager(QObject *parent) :
    QNetworkAccessManager(parent)
{
}
QNetworkReply *myNetworkAccessManager::createRequest ( Operation op, const QNetworkRequest & req, QIODevice * outgoingData){
    QNetworkReply *reply = QNetworkAccessManager::createRequest(op, req, outgoingData);
    qDebug() << reply->readAll();
    return reply;
} 
```

我仍然得到空数据。我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T18:36:56.100

QNetworkAccessManager 和 QNetworkReply 都是异步 IO 类，AKA 非阻塞 IO，这意味着 createRequest() 将立即返回，而无需等待 QNetworkReply 完成获取/创建请求。因此，如果您立即阅读它，几乎可以肯定它是空的。

您需要做的是连接 QNetworkReply 的 readyread() 信号，该信号将在您的数据准备好后发出。有关更多详细信息，请阅读[文档](http://doc.qt.nokia.com/4.7-snapshot/qnetworkreply.html#details)

编辑：哦，还有一件事，正如[您所链接的问题所](https://stackoverflow.com/questions/2426053/how-to-get-response-in-qtwebkit)回答的那样，请使用 peek() 而不是 readAll() 因为您的 QWebView 在您阅读后将不会收到数据（QIODevices 在一次阅读后清除所有系统资源）

# asp.net - SharpSvn 64 位问题

> ID：11132749
> 
> 赞同：2
> 
> 时间：2012-06-21T06:33:52.117
> 
> 标签：asp.net, .net, visual-studio-2010, 32bit-64bit, sharpsvn

我在 Windows Server 2008（64 位）机器上安装了 Tortoise SVN（64 位），在这台机器上，我安装了 Visual Studio 2010。我正在使用 VS2010 构建一个 Web 应用程序，在这个项目中，我引用了 SharpSVN dll 来执行一些 SVN 任务。这个 dll 是 32 位的，当我在本地运行我的项目时工作正常。但是，当我尝试发布到 IIS 然后尝试远程运行 Web 应用程序时，它显示有关 SharpSVN 的错误。所以为了解决这个问题，我在项目中更改了对 SharpSvn 64 位的引用。现在它在远程情况下工作正常，但在本地却不行。因此，每次在本地或远程工作之间切换时，我都必须更改此 dll 版本。有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T16:45:55.380

您可以在 web.config 或应用程序配置文件中执行一些技巧。另一种选择是在您的 GAC 中安装 SharpSvn（但我会避免这样做）。

# php - 如何使 php 脚本与 Cron Job 一起永久运行？

> ID：11132751
> 
> 赞同：10
> 
> 时间：2012-06-21T06:34:09.180
> 
> 标签：php

```
<?php
 while(true){
 //code goes here.....
 }
  ?> 
```

我想制作一个 PHP Web 服务器，那么如何使用 Curl 让这个脚本永远运行呢？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-21T06:45:20.107

不要忘记将最大执行时间设置为无限（0）。

如果这是您的意图，最好确保您不运行多个实例：

```
ignore_user_abort(true);//if caller closes the connection (if initiating with cURL from another PHP, this allows you to end the calling PHP script without ending this one)
set_time_limit(0);

$hLock=fopen(__FILE__.".lock", "w+");
if(!flock($hLock, LOCK_EX | LOCK_NB))
    die("Already running. Exiting...");

while(true)
{

    //avoid CPU exhaustion, adjust as necessary
    usleep(2000);//0.002 seconds
}

flock($hLock, LOCK_UN);
fclose($hLock);
unlink(__FILE__.".lock"); 
```

如果在 CLI 模式下，只需运行该文件。

如果在网络服务器上的另一个 PHP 中，您可以启动一个必须像这样无限运行的 PHP（而不是使用 cURL，这消除了依赖性）：

```
$cx=stream_context_create(
    array(
        "http"=>array(
            "timeout" => 1, //at least PHP 5.2.1
            "ignore_errors" => true
        )
    )
);
@file_get_contents("http://localhost/infinite_loop.php", false, $cx); 
```

或者您可以使用 wget 从 linux cron 开始，如下所示：

```
`* * * * * wget -O - http://localhost/infinite_loop.php` 
```

或者，您可以使用运行包含以下内容的 .bat 文件的 bitsadmin 从 Windows 调度程序开始：

```
bitsadmin /create infiniteloop
bitsadmin /addfile infiniteloop http://localhost/infinite_loop.php
bitsadmin /resume infiniteloop 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T06:42:34.540

For a php code to run forever, it should have the ff.:

*   `set_time_limit(0);` // so php won't terminate as normal, if you will be doing stuff that will take a very long processing time
*   handler for keeping the page active [usually by setting up a client-side script to call the same page in intervals] See `setInterval()`, `setTimeout()`

EDIT: But since you will be setting up a cron job then you can keep away from the client-side handling.

EDIT: My suggestion, is not to use infinite loops unless you have a code that tells it to exit the loop after some time. Remember, you will be calling the same page using a cron job, so there is no point in keeping the loop infinite. [edit] Otherwise, you will be needing a locking system as suggested by @Tiberiu-Ionuț Stan so only 1 instance may run each time the cron job is called.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T06:38:34.167

默认情况下，否，因为 PHP 有执行时间限制。见：[http ://www.php.net/manual/en/info.configuration.php#ini.max-execution-time](http://www.php.net/manual/en/info.configuration.php#ini.max-execution-time)

`set_time_limit`您可以通过设置值或在脚本中调用来使其永远运行（http://php.net/manual/en/function.set-time-limit.php）。

但我不推荐这样做，因为 PHP（由 HTTP 请求调用）并非设计为具有无限循环。如果可以，请改用本地脚本，或者定期请求页面以频繁执行任务。

如果您的网站经常被其他人浏览，您可以改为在每个页面中执行此操作。

（想象一下，如果有人多次请求脚本，您将运行多个实例）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T06:41:44.440

You can make it happen only if you set **[set_time_limit](http://www.php.net/manual/en/info.configuration.php#ini.max-execution-time)(0)** in your script, else it will stop execution after **max_execution_time** set in configuration.

And you are using while(true) condition, that will make your script to run always.

# amazon-s3 - 如何将 AWS S3 url 转换为 boto 的存储桶名称？

> ID：11132752
> 
> 赞同：4
> 
> 时间：2012-06-21T06:34:10.193
> 
> 标签：amazon-s3, amazon-web-services, boto

我正在尝试使用 boto访问[http://s3.amazonaws.com/commoncrawl/parse-output/segment/存储桶。](http://s3.amazonaws.com/commoncrawl/parse-output/segment/)我不知道如何将它翻译成 boto.s3.bucket.Bucket() 的名称。

这是我要做的事情的要点：

```
s3 = boto.connect_s3()
cc = boto.s3.bucket.Bucket(connection=s3, name='commoncrawl/parse-output/segment')
requester = {'x-amz-request-payer':'requester'}
contents = cc.list(headers=requester)
for i,item in enumerate(contents):
    print item.__repr__() 
```

我得到“boto.exception.S3ResponseError: S3ResponseError: 400 Bad Request ...指定的存储桶无效...”

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-01-20T18:14:28.043

[AWS 文档列出了 S3 的四种可能的 url 格式](http://docs.aws.amazon.com/AmazonS3/latest/dev/UsingBucket.html)——这是我刚刚汇总的内容，以提取所有不同 url 格式的存储桶和区域。

```
import re

def bucket_name_from_url(url):
    """ Gets bucket name and region from url, matching any of the different formats for S3 urls 
    * http://bucket.s3.amazonaws.com
    * http://bucket.s3-aws-region.amazonaws.com
    * http://s3.amazonaws.com/bucket
    * http://s3-aws-region.amazonaws.com/bucket

    returns bucket name, region
    """       
    match =  re.search('^https?://(.+).s3.amazonaws.com/', url)
    if match:
        return match.group(1), None

    match =  re.search('^https?://(.+).s3-([^.]+).amazonaws.com/', url)
    if match:
        return match.group(1), match.group(2)

    match = re.search('^https?://s3.amazonaws.com/([^\/]+)', url)
    if match:
        return match.group(1), None

    match =  re.search('^https?://s3-([^.]+).amazonaws.com/([^\/]+)', url)
    if match:
        return match.group(2), match.group(1)

    return None, None 
```

像这样的东西真的应该进入博托......亚马逊，我希望你在听

**编辑 10/10/2018**：存储桶正则表达式现在应该捕获带有句点的存储桶名称。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-03-23T19:22:17.620

扩展标记回答返回键

```
#!/usr/bin/env python

import re

def parse_s3_url(url):
    # returns bucket_name, region, key

    bucket_name = None
    region = None
    key = None

    # http://bucket.s3.amazonaws.com/key1/key2
    match = re.search('^https?://([^.]+).s3.amazonaws.com(.*?)$', url)
    if match:
        bucket_name, key = match.group(1), match.group(2)

    # http://bucket.s3-aws-region.amazonaws.com/key1/key2
    match = re.search('^https?://([^.]+).s3-([^\.]+).amazonaws.com(.*?)$', url)
    if match:
        bucket_name, region, key = match.group(1), match.group(2), match.group(3)

    # http://s3.amazonaws.com/bucket/key1/key2
    match = re.search('^https?://s3.amazonaws.com/([^\/]+)(.*?)$', url)
    if match:
        bucket_name, key = match.group(1), match.group(2)

    # http://s3-aws-region.amazonaws.com/bucket/key1/key2
    match = re.search('^https?://s3-([^.]+).amazonaws.com/([^\/]+)(.*?)$', url)
    if match:
        bucket_name, region, key = match.group(2), match.group(1), match.group(3)

    return list( map(lambda x: x.strip('/') if x else None, [bucket_name, region, key] ) ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T12:44:31.573

存储桶名称将是 commoncrawl。之后出现的所有内容实际上只是存储桶中出现的键名称的一部分。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-01-31T14:01:21.460

这是我的 JS 版本：

```
function parseS3Url(url) {
  // Process all aws s3 url cases

  url = decodeURIComponent(url);
  let match = "";

  // http://s3.amazonaws.com/bucket/key1/key2
  match = url.match(/^https?:\/\/s3.amazonaws.com\/([^\/]+)\/?(.*?)$/);
  if (match) {
    return {
      bucket: match[1],
      key: match[2],
      region: ""
    };
  }

  // http://s3-aws-region.amazonaws.com/bucket/key1/key2
  match = url.match(/^https?:\/\/s3-([^.]+).amazonaws.com\/([^\/]+)\/?(.*?)$/);
  if (match) {
    return {
      bucket: match[2],
      key: match[3],
      region: match[1]
    };
  }

  // http://bucket.s3.amazonaws.com/key1/key2
  match = url.match(/^https?:\/\/([^.]+).s3.amazonaws.com\/?(.*?)$/);
  if (match) {
    return {
      bucket: match[1],
      key: match[2],
      region: ""
    };
  }

  // http://bucket.s3-aws-region.amazonaws.com/key1/key2
  match = url.match(/^https?:\/\/([^.]+).s3-([^\.]+).amazonaws.com\/?(.*?)$/);
  if (match) {
    return {
      bucket: match[1],
      key: match[3],
      region: match[2]
    };
  }

  return {
    bucket: "",
    key: "",
    region: ""
  };
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-27T13:42:00.373

根据马克的回答，我制作了一个`pyparsing`对我来说更清晰的小脚本（包括可能的关键匹配）：

```
#!/usr/bin/env python

from pyparsing import Word, alphanums, Or, Optional, Combine

schema = Or(['http://', 'https://']).setResultsName('schema')
word = Word(alphanums + '-', min=1)
bucket_name = word.setResultsName('bucket')
region = word.setResultsName('region')

key = Optional('/' + word.setResultsName('key'))

"bucket.s3.amazonaws.com"
opt1 = Combine(schema + bucket_name + '.s3.amazonaws.com' + key)

"bucket.s3-aws-region.amazonaws.com"
opt2 = Combine(schema + bucket_name + '.' + region + '.amazonaws.com' + key)

"s3.amazonaws.com/bucket"
opt3 = Combine(schema + 's3.amazonaws.com/' + bucket_name + key)

"s3-aws-region.amazonaws.com/bucket"
opt4 = Combine(schema + region + ".amazonaws.com/" + bucket_name + key)

tests = [
    "http://bucket-name.s3.amazonaws.com",
    "https://bucket-name.s3-aws-region-name.amazonaws.com",
    "http://s3.amazonaws.com/bucket-name",
    "https://s3-aws-region-name.amazonaws.com/bucket-name",
    "http://bucket-name.s3.amazonaws.com/key-name",
    "https://bucket-name.s3-aws-region-name.amazonaws.com/key-name",
    "http://s3.amazonaws.com/bucket-name/key-name",
    "https://s3-aws-region-name.amazonaws.com/bucket-name/key-name",
]

s3_url = Or([opt1, opt2, opt3, opt4]).setResultsName('url')

for test in tests:
    result = s3_url.parseString(test)
    print "found url: " + str(result.url)
    print "schema: " + str(result.schema)
    print "bucket name: " + str(result.bucket)
    print "key name: " + str(result.key) 
```

最初我让马克的脚本也检索密钥（对象）：

```
def parse_s3_url(url):
    """ Gets bucket name and region from url, matching any of the different formats for S3 urls
    * http://bucket.s3.amazonaws.com
    * http://bucket.s3-aws-region.amazonaws.com
    * http://s3.amazonaws.com/bucket
    * http://s3-aws-region.amazonaws.com/bucket

    returns bucket name, region
    """
    match = re.search('^https?://([^.]+).s3.amazonaws.com(/\([^.]+\))', url)
    if match:
        return match.group(1), None, match.group(2)

    match = re.search('^https?://([^.]+).s3-([^.]+).amazonaws.com/', url)
    if match:
        return match.group(1), match.group(2), match.group(3)

    match = re.search('^https?://s3.amazonaws.com/([^\/]+)', url)
    if match:
        return match.group(1), None, match.group(2)

    match = re.search('^https?://s3-([^.]+).amazonaws.com/([^\/]+)', url)
    if match:
        return match.group(2), match.group(1), match.group(3)

    return None, None, None 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-04-10T14:51:51.307

其他答案不支持像“s3://bucket/key”这样的 S3 url，所以我写了一个受[Java 包装器](https://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/s3/AmazonS3URI.html)启发的 python 函数：

```
def bucket_name_from_url(url):
"""
A URI wrapper that can parse out information about an S3 URI.
Implementation based on com.amazonaws.services.s3.AmazonS3URI
:param url: the URL to parse
:return: the bucket and the key
"""
uri = urlparse(url)

if uri.scheme == "s3":
    bucket = uri.netloc
    path = uri.path
    if len(path) <= 1:
        # s3://bucket or s3://bucket/
        key = None
    else:
        # s3://bucket/key
        # Remove the leading '/'.
        key = path[1:]

    return bucket, key

match = re.search('^https://(.+\.)?s3[.-]([a-z0-9-]+)\.', url)
prefix = match.group(1)

if not prefix:
    # No bucket name in the authority; parse it from the path.
    path = uri.path
    index = path.find('/', 1)
    if index == -1:
        # https://s3.amazonaws.com/bucket
        bucket = urllib.unquote(path[1:])
        key = None
    elif index == (len(path) - 1):
        # https://s3.amazonaws.com/bucket/
        bucket = urllib.unquote(path[1:index])
        key = None
    else:
        bucket = urllib.unquote(path[1:index])
        key = urllib.unquote(path[index+1:])
else:
    # Bucket name was found in the host; path is the key.
    bucket = prefix[0:len(prefix)-1]
    path = uri.path
    if not path or path == "/":
        key = None
    else:
        # Remove the leading '/'.
        key = path[1:]

return bucket, key 
```

# java - 如何在 Selenium 自动测试中管理 Gmail 中 COMPOSE 按钮的动态 ID

> ID：11132755
> 
> 赞同：0
> 
> 时间：2012-06-21T06:34:25.140
> 
> 标签：java, xpath, css-selectors, selenium-rc, selenium-webdriver

Gmail 的 COMPOSE 按钮的 id 是动态的。因此，当单击它时，Selenium IDE 会记录不同的 xpath，如下所示：

```
//div[@id=':lw']/div/div , //div[@id=':as']/div/div 
```

使用 id 或 xpath 的替代方法是什么？

以下是 COMPOSE 按钮的 HTML：

```
<div class="aic" id=":as"><div class="z0"><div tabindex="0" role="button" class="T-I J-J5Ji L3 T-I-KE" style="-moz-user-select: none;" gh="cm">COMPOSE</div></div></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T10:20:21.377

在 Gmail 中使用下面的 COMPOSE 代码

```
ClickAt   |  //div[text()='COMPOSE'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T15:20:29.723

您应该使用 CSS 类。它们不会在 Gmail 中更改，并且此解决方案不会依赖于区域设置。

对于撰写按钮，类别是“TI J-J5-Ji L3”。

使用 jQuery 的示例：

```
$('.T-I.J-J5-Ji.L3').live('click', function () {

     alert('Compose button clicked');

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T05:03:55.703

以下 WebDriver Java 代码应该可以正常工作：

```
driver.findElement(By.xpath("//div[text()='COMPOSE']")).click(); 
```

在 Java 中使用 Selenium RC：

```
selenium.click("//div[text()='COMPOSE']"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T05:38:25.427

最好在这里使用[Sikuli](http://www.sikuli.org/)。

> Sikuli Script 自动执行您在屏幕上看到的任何内容。它使用图像识别来识别和控制 GUI 组件。当无法轻松访问 GUI 的内部或源代码时，它很有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-16T05:22:24.290

google 对大多数元素使用动态 id。尝试使用“撰写”文本而不是使用 ID。

你可以使用这样的东西。Webelement element = driver.findElementByXpath("//div[text()='COMPOSE']"); 元素.click();

希望这有效！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-26T11:11:55.657

我已经使用 Gmail 帐户通过 selenium 自动化成功发送了一个 Emil 下面是脚本，请找到它：

```
WebDriver driver = new FirefoxDriver();

String baseUrl = "http://www.google.co.in/";
selenium = new WebDriverBackedSelenium(driver, baseUrl);

driver.manage().timeouts().implicitlyWait(15, TimeUnit.SECONDS);
driver.findElement(By.xpath("//div[@id=':jb']/div[@class='z0']/div")).click(); // Compose

selenium.type("//div[@class='wO nr l1']//textarea[@name='to']", "vikramn@gmail.com"); // For To 
selenium.type("//div[@class='aoD az6']//input[@name='subjectbox']", "Wanted to SAY HI"); // For Subject
selenium.type("//div[@class='Ar Au']/div[@class='Am Al editable LW-avf']", "Hi Vikram");// For Message body
selenium.click("//div[@class='J-J5-Ji']/div[@class='T-I J-J5-Ji aoO T-I-atl L3']"); //send 
```

# java - 如何在生成时动态设置 iReport 页面高度

> ID：11132757
> 
> 赞同：0
> 
> 时间：2012-06-21T06:34:41.240
> 
> 标签：java, dynamic, height, report, ireport

我是 iReport 的新手。我正在使用 java 构建一个销售点系统。打印收据我使用了 irepot。我的问题是当我生成报告时报告高度不会动态减少或增加。

例如：当报表中有 2 行时，报表高度必须降低。如果报表中有 50 行，则报表高度必须动态增加。

我怎样才能做到这一点....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T06:52:50.883

您必须将字段放在详细信息带中。这是一个基本教程：http: [//jasperforge.org/uploads/publish/ireportwebsite/IR%20Website/ir_design_a_report.html](http://jasperforge.org/uploads/publish/ireportwebsite/IR%20Website/ir_design_a_report.html)

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-21T00:12:55.443

选择报告 > 属性 > 忽略分页 = true

```
<jasperReport 
 xmlns=....
 ...
 ...
 isIgnorePagination="true" 
 > 
```

# linux - Linux - 从第二个选项卡获取文本

> ID：11132763
> 
> 赞同：7
> 
> 时间：2012-06-21T06:35:10.677
> 
> 标签：linux, bash, text

假设我们有这样的文件：

> sometext11 sometext12 sometext13 sometext21 sometext22 sometext23

文本由制表符分隔，我们知道第 1 列中的一些文本，但想从第 2 列中获取文本。我知道我可以通过以下方式获取文本：

```
grep 'sometext11' file.txt 
```

如何从第二列获取文本？也许一些带有选项 -t [column nr] 的工具？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-21T09:49:34.873

awk：

```
awk '{print $2}' file.txt 
```

切：

```
cut -f2 file.txt 
```

重击：

```
while read -a A; do echo ${A[1]}; done < file.txt 
```

perl:

```
perl -lane 'print $F[1]' file.txt 
```

如果您知道要查找的字符串，则可以使用`grep`：

```
grep -o 'sometext12' file.txt 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T06:38:21.737

```
awk '{print $2}' < yourfile 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T06:45:50.013

您可以使用[剪切](http://lowfatlinux.com/linux-columns-cut.html)命令

```
cut -f2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T11:20:47.730

你不需要`grep`：

```
awk '/sometext11/ {print $2}' file.txt 
```

或者，`grep`如果您的支持 Perl 兼容正则表达式 (PCRE)，例如 GNU 或 OS X，您也可以全部完成`grep`：

```
grep -Po '(?<=sometext11\t).*?(?=\t.*)' file.txt 
```

# database - 定期付款贝宝在数据库中插入数据

> ID：11132764
> 
> 赞同：0
> 
> 时间：2012-06-21T06:35:16.557
> 
> 标签：database, codeigniter, paypal

我有成功的集成`CreateRecurringPaymentsProfile`方法，可以从客户那里重复付款。现在我需要做的是：

每个月的定期付款后，我需要在我的数据库表中插入数据。付款完成后，我从贝宝收到什么回复吗？或者如何在每个时间段之后在我的数据库中插入数据？

谢谢大家阅读我的帖子。我期待着您的帖子-欢迎任何建议。

问候， anstrangelover

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T07:20:11.083

您需要查看 API 以及 paypal 提供的内容：

[https://www.x.com/developers/paypal/products/instant-payment-notification](https://www.x.com/developers/paypal/products/instant-payment-notification)

[https://www.paypal.com/ipn](https://www.paypal.com/ipn)

> IPN 可以为这些交易发送通知：
> 
> ```
> Instant payments, including Express Checkout and direct credit card payments
> eCheck payments and pending, completed, or denied status payments
> Pending payments
> Recurring payments and subscriptions
> Authorizations
> Disputes, chargebacks, reversals, and refunds 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T14:43:55.817

我使用这个库：[http ://codeigniter.com/wiki/PayPal_Lib/](http://codeigniter.com/wiki/PayPal_Lib/)

它对我来说效果很好。我创建了一个 order_model，它映射到一个与 IPN 中我想要的字段匹配的表，然后我用这样的方法制作了一个控制器：

```
function ipn(){
    $this->load->library("paypal_lib");
    $res = $this->paypal_lib->ipn();

    $response = print_r($res, TRUE);
    log_message('error', $response);

    if(isset($res["error"])) {
        log_message('error', 'fail');
        return;
    }
    if($res["verified"]) {
        log_message('error', 'verified');
        $res["payment"] = "paypal";
        $new_order = $this->order_model->create($res["data"]);  
        log_message('error', 'created order: '.$new_order['id']);           
    } else {
        log_message('error', 'no error, but not verified?');
    }
} 
```

# php - php 状态，curl 会话

> ID：11132766
> 
> 赞同：0
> 
> 时间：2012-06-21T06:35:23.863
> 
> 标签：php, session, cookies, curl

我将使用 curl 登录一个网站。它会很好地登录。现在我想知道会话的状态，它是否活着。因为用户在登录后可能会发送不同页面的请求。我的代码在这里。谢谢

```
$url="https://mywebsite.com/login.pl";
$ch = curl_init();
curl_setopt ($ch, CURLOPT_COOKIEJAR, 'cookies.txt');
curl_setopt($ch, CURLOPT_COOKIEFILE, 'cookies.txt');
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt ($ch, CURLOPT_POST, 1);
curl_setopt ($ch, CURLOPT_POSTFIELDS, "username=xxxxxx&passwd=xxxxx&client=xxxxx");
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, TRUE);
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_VERBOSE, 1);
curl_setopt($ch, CURLOPT_MAXREDIRS, 4);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
$store = curl_exec ($ch);
curl_close ($ch); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T07:32:43.283

您需要获取 cookie 并在下一个请求中使用它们，例如：

```
curl_setopt($ch,    CURLOPT_COOKIE,         $cookie); 
curl_setopt($ch,    CURLOPT_AUTOREFERER,    true); 
curl_setopt($ch,    CURLOPT_COOKIESESSION,  true); 
curl_setopt($ch,    CURLOPT_FAILONERROR,    false); 
curl_setopt($ch,    CURLOPT_FOLLOWLOCATION, false); 
curl_setopt($ch,    CURLOPT_FRESH_CONNECT,  true); 
curl_setopt($ch,    CURLOPT_HEADER,         false); 
curl_setopt($ch,    CURLOPT_POST,           false); 
curl_setopt($ch,    CURLOPT_RETURNTRANSFER, true); 
$result = curl_exec($ch); 
curl_close($ch); 
```

# actionscript-3 - 重定向 URL 请求？

> ID：11132775
> 
> 赞同：1
> 
> 时间：2012-06-21T06:35:52.500
> 
> 标签：actionscript-3, flash, apache-flex, flex4.5

我有一个嵌入到另一个闪存文件中的闪存文件，嵌入的文件正在通过 HTTP 创建到特定主机的请求，我希望将这些请求重定向到另一台主机，而无需触及嵌入文件的源代码。

*   有可能吗，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T08:38:25.623

它可以在服务器端使用 PHP 或 ColdFusion 或任何你的船，但在客户端，不...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T08:24:15.580

恐怕这对于 Flash 是不可能的（即使是 AIR 也不可能。）你能做的最好的是将 URL 放入外部 config/flashvars 并在此处更改它们。

# cxf - 如何配置 wss4j 签名验证器

> ID：11132782
> 
> 赞同：2
> 
> 时间：2012-06-21T06:36:19.537
> 
> 标签：cxf, signature, interceptor, ws-security, wss4j

我正在使用 WSS4J 来验证肥皂消息中的签名和时间戳。但是当我收到没有签名时间戳部分的消息时，wssj4 认为一切正常，我希望在这种情况下看到错误。

我的好消息是这样的：

```
<?xml version="1.0" encoding="UTF-8"?><soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" soap:mustUnderstand="1">
      <ds:Signature xmlns:ds="http://www.w3.org/2000/09/xmldsig#" Id="SIG-3">
        <ds:SignedInfo>
          <ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#">
            <ec:InclusiveNamespaces xmlns:ec="http://www.w3.org/2001/10/xml-exc-c14n#" PrefixList="soap"/>
          </ds:CanonicalizationMethod>
          <ds:SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#dsa-sha1"/>
          <ds:Reference URI="#id-2">
            <ds:Transforms>
              <ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#">
                <ec:InclusiveNamespaces xmlns:ec="http://www.w3.org/2001/10/xml-exc-c14n#" PrefixList=""/>
              </ds:Transform>
            </ds:Transforms>
            <ds:DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
            <ds:DigestValue>u8CMT7Q7fJJ1Dv5dEmzGU1FO5Y0=</ds:DigestValue>
          </ds:Reference>
          <ds:Reference URI="#TS-1">
            <ds:Transforms>
              <ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#">
                <ec:InclusiveNamespaces xmlns:ec="http://www.w3.org/2001/10/xml-exc-c14n#" PrefixList="wsse soap"/>
              </ds:Transform>
            </ds:Transforms>
            <ds:DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
            <ds:DigestValue>m8XN2C3FUjK4WHAXhO9gLI82XeE=</ds:DigestValue>
          </ds:Reference>
        </ds:SignedInfo>
        <ds:SignatureValue>X9EntCBO7nmNrYsYuugpHxN13wSUNhTF4exkRRWj0tTrfEqbz8potg==</ds:SignatureValue>
        <ds:KeyInfo Id="KI-B60AEEFF94DBA35E9413402583324452">
          <wsse:SecurityTokenReference wsu:Id="STR-B60AEEFF94DBA35E9413402583324473">
            <ds:X509Data>
              <ds:X509IssuerSerial>
                <ds:X509IssuerName>CN=TEST,OU=Unknown,O=Unknown,L=Unknown,ST=Unknown,C=Unknown</ds:X509IssuerName>
                <ds:X509SerialNumber>1332750124</ds:X509SerialNumber>
              </ds:X509IssuerSerial>
            </ds:X509Data>
          </wsse:SecurityTokenReference>
        </ds:KeyInfo>
      </ds:Signature>
      <wsu:Timestamp wsu:Id="TS-1">
        <wsu:Created>2012-06-21T05:58:52.392Z</wsu:Created>
        <wsu:Expires>2012-06-21T06:03:52.392Z</wsu:Expires>
      </wsu:Timestamp>
    </wsse:Security>
  </soap:Header>
  <soap:Body xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" wsu:Id="id-2">
    [...]
  </soap:Body>
</soap:Envelope> 
```

和坏消息（这个应该抛出类似“时间戳未签名”的异常）：

```
<?xml version="1.0" encoding="UTF-8"?><soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" soap:mustUnderstand="1">
      <ds:Signature xmlns:ds="http://www.w3.org/2000/09/xmldsig#" Id="SIG-3">
        <ds:SignedInfo>
          <ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#">
            <ec:InclusiveNamespaces xmlns:ec="http://www.w3.org/2001/10/xml-exc-c14n#" PrefixList="soap"/>
          </ds:CanonicalizationMethod>
          <ds:SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#dsa-sha1"/>
          <ds:Reference URI="#id-2">
            <ds:Transforms>
              <ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#">
                <ec:InclusiveNamespaces xmlns:ec="http://www.w3.org/2001/10/xml-exc-c14n#" PrefixList=""/>
              </ds:Transform>
            </ds:Transforms>
            <ds:DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
            <ds:DigestValue>u8CMT7Q7fJJ1Dv5dEmzGU1FO5Y0=</ds:DigestValue>
          </ds:Reference>
        </ds:SignedInfo>
        <ds:SignatureValue>U6TSJXJTCryEm5FhoMBbEoiUIL0jjFDvPxPJ3ihoOHsWCwk4t3++2w==</ds:SignatureValue>
        <ds:KeyInfo Id="KI-9AEDF8EC92B112ADE113402583983992">
          <wsse:SecurityTokenReference wsu:Id="STR-9AEDF8EC92B112ADE113402583984013">
            <ds:X509Data>
              <ds:X509IssuerSerial>
                <ds:X509IssuerName>CN=TEST,OU=Unknown,O=Unknown,L=Unknown,ST=Unknown,C=Unknown</ds:X509IssuerName>
                <ds:X509SerialNumber>1332750124</ds:X509SerialNumber>
              </ds:X509IssuerSerial>
            </ds:X509Data>
          </wsse:SecurityTokenReference>
        </ds:KeyInfo>
      </ds:Signature>
      <wsu:Timestamp wsu:Id="TS-1">
        <wsu:Created>2012-06-21T05:59:58.376Z</wsu:Created>
        <wsu:Expires>2012-06-21T06:04:58.376Z</wsu:Expires>
      </wsu:Timestamp>
    </wsse:Security>
  </soap:Header>
  <soap:Body xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" wsu:Id="id-2">
    [...]
  </soap:Body>
</soap:Envelope> 
```

所以我的坏消息不包含：

```
<ds:Reference URI="#TS-1">
<ds:Transforms>
  <ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#">
    <ec:InclusiveNamespaces xmlns:ec="http://www.w3.org/2001/10/xml-exc-c14n#" PrefixList="wsse soap"/>
  </ds:Transform>
</ds:Transforms>
<ds:DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
<ds:DigestValue>m8XN2C3FUjK4WHAXhO9gLI82XeE=</ds:DigestValue>
</ds:Reference> 
```

目前我的拦截器配置如下：

```
// verifying incepteptor
final String actions = WSHandlerConstants.TIMESTAMP + " " + WSHandlerConstants.SIGNATURE;
Map<String, Object> inProps = new HashMap<String, Object>();

Map<QName, Validator> validatorMap = new HashMap<QName, Validator>(); 
validatorMap.put(WSSecurityEngine.SIGNATURE, new SignatureTrustValidator());
validatorMap.put(WSSecurityEngine.TIMESTAMP, new TimeStampValidator());
inProps.put(WSS4JInInterceptor.VALIDATOR_MAP, validatorMap); 

inProps.put(WSHandlerConstants.ACTION, actions);
inProps.put(WSHandlerConstants.SIGNATURE_PARTS, "{Element}{http://schemas.xmlsoap.org/soap/envelope/}Body;{Element}{http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd}Timestamp");
inProps.put(WSHandlerConstants.SIG_PROP_FILE, SIG_PROPFILE);

WSS4JInInterceptor verifying = new WSS4JInInterceptor(inProps); 
```

如何设置 wss4j 来实现这种行为？顺便说一句：CXF 版本：2.5.1 WSS4J 版本：1.6.2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T10:42:44.543

答案是**org.apache.cxf.ws.security.wss4j.CryptoCoverageChecker**：

```
<util:constant id="typeSigned" static-field="org.apache.cxf.ws.security.wss4j.CryptoCoverageUtil.CoverageType.SIGNED"/>
<util:constant id="scoopeElement" static-field="org.apache.cxf.ws.security.wss4j.CryptoCoverageUtil.CoverageScope.ELEMENT"/>
<util:map id="prfx">
    <entry key="soap" value="http://schemas.xmlsoap.org/soap/envelope/"/>
    <entry key="wsse" value="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd"/>
    <entry key="wsu" value="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd"/>
</util:map>
<bean id="bodyVerifier" class="org.apache.cxf.ws.security.wss4j.CryptoCoverageChecker.XPathExpression">
    <constructor-arg index="0" value="/soap:Envelope/soap:Body" />
    <constructor-arg index="1"><ref bean="typeSigned" /></constructor-arg>
    <constructor-arg index="2"><ref bean="scoopeElement" /></constructor-arg>
</bean>
<bean id="timestampVerifier" class="org.apache.cxf.ws.security.wss4j.CryptoCoverageChecker.XPathExpression">
    <constructor-arg index="0" value="/soap:Envelope/soap:Header/wsse:Security/wsu:Timestamp" />
    <constructor-arg index="1"><ref bean="typeSigned" /></constructor-arg>
    <constructor-arg index="2"><ref bean="scoopeElement" /></constructor-arg>
</bean>
<util:list id="paths" >
    <ref bean="bodyVerifier" />
    <ref bean="timestampVerifier" />
</util:list>
<bean id="coverageChecker" class="org.apache.cxf.ws.security.wss4j.CryptoCoverageChecker">
    <constructor-arg index="0"><ref bean="prfx" /></constructor-arg>
    <constructor-arg index="1"><ref bean="paths" /></constructor-arg>
</bean> 
```

接下来我们必须将其添加为拦截器：

```
<jaxws:endpoint id="someId" implementor="#example" address="/">
    <jaxws:inInterceptors>
        <ref bean="coverageChecker" />
    </jaxws:inInterceptors>
</jaxws:endpoint> 
```

# scala - 将 scala 列表拆分为 n 个交错列表

> ID：11132788
> 
> 赞同：5
> 
> 时间：2012-06-21T06:36:50.500
> 
> 标签：scala, scala-collections

给定一个`List`例如

```
List(1, 2, 3, 4, 5, 6, 7) 
```

将其拆分为 n 个子列表并以循环方式将项目放入每个列表的最佳方法是什么？

例如，如果 n = 3，结果应该是

```
List(List(1, 4, 7), List(2, 5), List(3, 6)) 
```

我认为集合 API 中有一个方法可以做到这一点，但我似乎找不到它。

优雅单线的奖励积分；）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-21T06:56:56.353

```
scala> def round[T](l: List[T], n: Int) = (0 until n).map{ i => l.drop(i).sliding(1, n).flatten.toList }.toList
round: [T](l: List[T], n: Int)List[List[T]]

scala> round((1 to 7).toList, 3)
res4: List[List[Int]] = List(List(1, 4, 7), List(2, 5), List(3, 6)) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-21T07:13:49.770

这是一个简单的单行：

```
scala> List.range(1, 10)
res11: List[Int] = List(1, 2, 3, 4, 5, 6, 7, 8, 9)

scala> res11.grouped(3).toList.transpose
res12: List[List[Int]] = List(List(1, 4, 7), List(2, 5, 8), List(3, 6, 9)) 
```

*不幸的是，当您的列表不可转置*时，它将不起作用。

```
scala> List.range(1, 8).grouped(3).toList.transpose
java.lang.IllegalArgumentException: transpose requires all collections have the 
same size 
```

您可以使用以下方法使其可*转置*，然后应用上述方法。

```
scala> def extend[A](xs: List[A], c: Int): List[Option[A]] = {
     |   val n = Stream.iterate(c)(c +).find(_ >= xs.length).get
     |   xs.map(Some(_)).padTo(n, None)
     | }
extend: [A](xs: List[A], c: Int)List[Option[A]]

scala> List.range(1, 8)
res13: List[Int] = List(1, 2, 3, 4, 5, 6, 7)

scala> extend(res13, 3).grouped(3).toList.transpose.map(_.flatten)
res14: List[List[Int]] = List(List(1, 4, 7), List(2, 5), List(3, 6)) 
```

放在一起：

```
scala> def round[A](xs: List[A], c: Int) = {
     |   val n = Stream.iterate(c)(c +).find(_ >= xs.length).get
     |   val ys = xs.map(Some(_)).padTo(n, None)
     |   ys.grouped(c).toList.transpose.map(_.flatten)
     | }
round: [A](xs: List[A], c: Int)List[List[A]]

scala> round(List.range(1, 10), 3)
res16: List[List[Int]] = List(List(1, 4, 7), List(2, 5, 8), List(3, 6, 9))

scala> round(List.range(1, 8), 3)
res17: List[List[Int]] = List(List(1, 4, 7), List(2, 5), List(3, 6)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-26T07:07:34.950

如果你不关心让它循环，你可以这样做：

```
val list = List(1, 2, 3, 4, 5, 6, 7)
list.grouped(Math.ceil(list.size / 3)) 
```

# android - Android中Listview中选定项目的突出显示

> ID：11132795
> 
> 赞同：0
> 
> 时间：2012-06-21T06:37:51.093
> 
> 标签：android, android-listview, highlighting

我正在尝试突出显示`listview`使用中的选定项目`selector`。
当我触地并移动时，一个项目被很好地突出显示。但是，如果我只是单击它，则该项目**不会突出显示**。

这是我的选择器：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@drawable/item_focused" android:state_pressed="false" android:state_selected="false"/>
    <item android:drawable="@drawable/item_focused" android:state_pressed="true"/>
    <item android:drawable="@android:drawable/item_default" android:state_pressed="false" android:state_selected="true"/>

</selector> 
```

我一直在研究这个问题，但我还没有找到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T07:09:23.967

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

<item android:drawable="@drawable/item_focused" android:state_pressed="true"/>
<item android:drawable="@drawable/item_focused" android:state_focused="true"/>
<item android:drawable="@drawable/item_focused" android:state_selected="true"/>
<item android:drawable="@android:drawable/item_default"/>
</selector> 
```

# mysql - 如何在magento中逃逸mysql？

> ID：11132797
> 
> 赞同：14
> 
> 时间：2012-06-21T06:37:54.627
> 
> 标签：mysql, magento

我想在magento中转义字符串，但是当我使用时`mysql_real_escape_string`，我收到警告。

> 警告：mysql_real_escape_string() [function.mysql-real-escape-string]: 无法通过套接字 '/var/lib/mysql/mysql.soc.....' 连接到本地 MySQL 服务器

我找不到任何 magento 的核心 mysql 转义功能。所以我该怎么做？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-21T07:00:31.203

使用它来转义查询的字符串并添加周围的单引号：

```
Mage::getSingleton('core/resource')->getConnection('default_write')->quote($string); 
```

如果需要，您可以查找`Varien_Db_Adapter_Pdo_Mysql`进一步的报价细节。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-09-30T20:09:55.110

我认为 Magento 使用基于 PDO 的 DB Access 层，如果您使用绑定参数，它会自动处理转义。[使用 Magento 方法编写插入查询以小心 SQL 注入的](https://stackoverflow.com/questions/3575160/using-magento-methods-to-write-insert-queries-with-care-for-sql-injection)示例

```
$write = Mage::getSingleton("core/resource")->getConnection("core_write");

// Concatenated with . for readability
$query = "insert into mage_example "
       . "(name, email, company, description, status, date) values "
       . "(:name, :email, :company, :desc, 0, NOW())";

$binds = array(
    'name'    => "name' or 1=1",
    'email'   => "email",
    'company' => "company",
    'desc'    => "desc",
);
$write->query($query, $binds); 
```

# spring - JSP 的可靠会话机制

> ID：11132799
> 
> 赞同：1
> 
> 时间：2012-06-21T06:38:10.743
> 
> 标签：spring, jsp, session, servlets

我们在 JSP 中实现一个好的会话机制时遇到了麻烦。我们的要求之一是每个用户只允许一个会话，并且不允许打开另一个覆盖前一个的会话。这意味着我们需要一个非常可靠的会话系统，因为丢失会话意味着等待会话超时......我们对 servlet 提供的所有会话机制存在问题：

*   网址重写：一切正常，但是......它避免了我们做缓存的东西（mod_pagespeed 无法合并文件；我们正在使用 CDN......）
*   Cookies：当然，我们有一些客户端会阻止 cookie...
*   https Id : 不可靠，如果重置连接，则会话丢失。某些浏览器会自动重新初始化连接。如果您在移动时使用该网站（例如，从您在街上的手机），您的连接将根据地点而改变。

完美的解决方案是使用 Rewrite+Cookie 并停用资源的重写。知道我们必须使用 c:url 标签，因为我们的应用程序将安装在多个域上。

关于完美会话机制的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T07:28:22.563

标准`Cookies`,`URL Rewriting`和`SSL Session ID`是处理会话的最佳标准方法。

是的，如果你能找出一些`Unique id from a given request`. 您只能从以下请求参数之一推断出唯一 id：

*   请求 URL：URL 重写。标准的最佳方式。
*   标头：这不可能。客户端无法发送自定义标头
*   远程套接字地址：这又是完美的，因为中间有代理。
*   Cookies：标准的最佳方式。
*   隐藏表单字段：这仅适用于 POST 请求。

# three.js - XTK 中的精灵功能

> ID：11132804
> 
> 赞同：0
> 
> 时间：2012-06-21T06:38:24.427
> 
> 标签：three.js, xtk

是否可以在 XTK 中添加精灵功能？

我需要渲染大量的点数据。我能够将其渲染为 X.displayable.types.POINTS。但是，如果我可以用纹理渲染点，那就太好了。我正在寻找与three.js [https://github.com/mrdoob/three.js/blob/master/src/objects/Sprite.js提供的类似的东西](https://github.com/mrdoob/three.js/blob/master/src/objects/Sprite.js)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T14:28:19.023

看看下面的例子，它是一种精灵方法。不同之处在于每个对象仍然被单独推送到着色器，因此它相当慢。这是由于 XTK 的背景是针对渲染大型对象而不是大量对象进行优化。

[http://jsfiddle.net/haehn/jjzuD/](http://jsfiddle.net/haehn/jjzuD/)

# c# - 获取WebBrowser控件文档的Y轴高度

> ID：11132809
> 
> 赞同：1
> 
> 时间：2012-06-21T06:38:42.770
> 
> 标签：c#

我正在尝试在 Web 浏览器控件中获取文档的高度。

目前我正在使用下面的代码，但它总是返回 622，而且我知道我的文档大小都不同。

```
private void webCompareSQL_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
        {
            HtmlDocument htmldoc = webCompareSQL.Document;
           int ScrollHight = htmldoc.Window.Position.Y;
        } 
```

有人可以告诉我正确的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T06:51:14.257

尝试这个

```
webBrowser.Document.GetElementsByTagName("body")[0].OffsetRectangle.Bottom; 
```

或者

```
webBrowser.Document.Body.ScrollRectangle.Height 
```

或者

```
webBrowser.Document.GetElementsByTagName("body")[0].OffsetRectangle.Height; 
```

对于第三种情况，结果是 WebBrowser 视图窗口 + 边框的高度。

**编辑：**

# apache - 不想一次又一次地建造

> ID：11132817
> 
> 赞同：-1
> 
> 时间：2012-06-21T06:38:55.017
> 
> 标签：apache, jsp, ant

我有一个网络应用程序可以在位置说

```
C:\Test\MyWeb 
```

每次我进行一些更改时，我都必须通过`ant package`命令重建它。然后我将 MyWeb.war 文件复制到 apache 的 webapp 文件夹中。

我想在每次更改后避免这种构建和复制。如何绕过它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T06:47:42.247

尝试使用 Eclipse 之类的 IDE 并从 IDE 中启动您的应用程序。IDE 应该会自动重新编译您的文件，并且在大多数情况下可以对代码进行热替换，因此您无需重新启动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T07:39:26.930

对于开发环境，服务器支持类似`HOT Deployment`. 您可以部署 Web 应用程序的展开目录。

对 Web 应用程序进行以下更改将自动反映。有时，某些服务器可能会针对其中一些更改重新启动应用程序。但是，您不必为每次更改打包和部署。

*   添加新的Jsp
*   修改 web.xml
*   修改 Jsp 或 Servlet

# java - 开源 Alfresco

> ID：11132819
> 
> 赞同：1
> 
> 时间：2012-06-21T06:39:01.687
> 
> 标签：java, content-management-system, customization, alfresco

嗨，我是 Alfresco 的新手，我已经安装了 Alfresco 的企业版，但我猜它的试用期仅为 30 天，仅用于评估目的。我有三个问题。

1.  alfresco 是否提供免费版本？
2.  Alfresco 是内容管理还是文档管理？
3.  我可以自定义 Alfresco 以构建任何时间的 Web 应用程序，例如购物车、图书馆管理、工作门户。如果答案是肯定的，那会有多困难？

就像 Joomla(PHP CMS) 有数以百万计的安装程序，我们需要下载安装程序并安装模块，您的整个应用程序将在一分钟内转换为您的选择，例如购物车、图书馆管理、工作门户。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T07:32:59.497

1.  有一个名为“社区”版本的免费版本：[http ://wiki.alfresco.com/wiki/Download_and_Install_Alfresco](http://wiki.alfresco.com/wiki/Download_and_Install_Alfresco)

2.  Alfresco 是一个 ECM 系统（企业内容管理）

3.  您可以使用 Alfresco 开发您想要的任何类型的应用程序，但我不建议这样做。在大多数情况下，您会使事情变得复杂，而这些事情在其他系统/框架上更容易做到。Alfresco 是一个平台，旨在用于在其上构建内容丰富的软件。因此，如果您的应用程序不是关于内容和内容管理的，我不建议使用 Alfresco。

（第3点。只是我的意见！）

# c++ - Dev C++ 中是否提供“tr1/rand”标头？在海湾合作委员会？

> ID：11132823
> 
> 赞同：0
> 
> 时间：2012-06-21T06:39:12.543
> 
> 标签：c++, dev-c++

如果在 Dev C++ 版本 4.9.9.2 中可能，请告诉我如何使用它！

如果不告诉我在哪里可以下载所需版本的 GCC/C++？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T07:20:20.763

为什么 IDE 应该与 Compiler 提供的头文件有任何关系？[如果您使用最新的 g++/gcc（例如来自TDM-GCC](http://tdm-gcc.tdragon.net/)）的 Dev-C++（由于它的年龄，我不推荐它），您应该有可用的标头。

# java - 如何在 Java 中处理信号/事件

> ID：11132824
> 
> 赞同：0
> 
> 时间：2012-06-21T06:39:29.297
> 
> 标签：java, android, signal-handling

有谁能告诉我如何在 Java 中处理信号？我有一种情况，我需要从应用程序 main() 向线程发出事件/信号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T06:45:22.680

在 Java 中，通知通常作为事件传递，这意味着发生了某些操作，例如单击了按钮，或者作为异常传递，意味着出现了问题，例如尝试访问数组中的无效位置。

另一种方法是使用`volatile`变量作为标志。

一种更与语言无关的方法是使用标志，可能是某种信号量（尽管这些通常更多地用于规范跨竞争线程的访问）。

我想你也可以使用套接字，但这些通常用于进程间通信。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T06:58:56.477

在 android 上，您可以使用 Handler 类跨线程发送消息。 [这是 Handler 类描述](http://developer.android.com/reference/android/os/Handler.html)和[代码示例](http://marakana.com/forums/android/examples/500.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T07:11:34.183

我会尝试解释它...

**活动：** `When some action take place.`

**事件处理：** `To do certain actions on the basis of the Event.`

```
Eg: 

   Button - Button is an Event Source

   Action - Button Pressed

   Pressing of button generates an Event, which is needed to be Handled.. 
```

**例外：**`When Something unexpectedly take place.`

`Throwable --> Exception --> IOException & InterruptedException --> Checked and UnChecked` `Exceptions`

```
Eg: 
      Making a Socket Connection to the Server 

If the connection to the Server fails it leads to 
UnknowHostException which in need to be Handled..
this is called Exception Handling..

    We handle the exception using try/catch blocks 
```

# c# - 具有外键属性的 ASP.NET MVC 模型

> ID：11132825
> 
> 赞同：1
> 
> 时间：2012-06-21T06:39:51.190
> 
> 标签：c#, .net, asp.net-mvc

所以我有一个城市模型。每个城市都有一个 Name 属性以及其他属性以及 StateId 和 State（StateId 是外键）。State 也有一个 Name 属性。我想创建一个名为“Name_Full”的属性，它是 Name + ", " + State.Name，就像“Ashland, OR”一样。但是，每当我想引用该属性时，都会收到错误“对象引用未设置为对象的实例”。

这是城市模型的代码：

```
public class City
{
    public int CityId { get; set; }

    [Required]
    public string Name { get; set; }

    public int StateId { get; set; }

    public State State { get; set; }

    public List<Store> Stores { get; set; }

    public string Name_Full
    {
        get
        {
            return Name + ", " + State.Name;
        }
    }
} 
```

（我没有包括命名空间和使用的东西）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T06:44:11.850

大概有些*State*表在您的数据库中为空；因此，当您尝试提取空对象的*Name*属性时，会引发异常。使用以下方法处理 null 情况：

```
return Name + ((State == null) ? "" : ", " + State.Name); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T06:47:35.910

确保在调用 Name_Full 时，必须加载 State 对象且不为空。如果您担心外键关系不存在，您可以显式链接外键：

```
// Foreign key to state
[ForeignKey("State")] 
public int StateId { get; set; } 
public virtual State State { get; set; } 
```

# ios - Child ManagedObjectContext with NSPrivateQueueConcurrencyType after resetting parent PersistenceStoreCoordinator

> ID：11132829
> 
> 赞同：1
> 
> 时间：2012-06-21T06:40:02.013
> 
> 标签：ios, core-data, nsmanagedobjectcontext

When user logs in into my app I download some data from server in a background thread. I have a singleton that sets its managedObjectContext as a child of the main managedobjectcontext.

```
-(NSManagedObjectContext*) context{
    if(!_context){
        NSManagedObjectContext *child = [[NSManagedObjectContext alloc]initWithConcurrencyType:NSPrivateQueueConcurrencyType];
        [child setParentContext:[MyAppDelegate delegate].managedObjectContext];
        _context = child;
    }
    return _context;
} 
```

When the users logs out I delete the PersistenceStoreCoordinator sqllite file locking the main managedobjectcontext

```
-(void)onLogout{
    NSError *error = nil;

    if ([_persistentStoreCoordinator persistentStores] == nil)
        return;

    [self.managedObjectContext reset];
    [self.managedObjectContext lock];

    NSPersistentStore *store = [[self.persistentStoreCoordinator persistentStores] lastObject];

    if (![self.persistentStoreCoordinator removePersistentStore:store error:&error]) {
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }  

    // Delete file
    if ([[NSFileManager defaultManager] fileExistsAtPath:store.URL.path]) {
         if (![[NSFileManager defaultManager] removeItemAtPath:store.URL.path error:&error]) {
            NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
            abort();
        } 
    }

    _persistentStoreCoordinator = nil;

    _persistentStoreCoordinator = [self persistentStoreCoordinator];
    [self.managedObjectContext unlock];
    self.agendaLoader = nil;
    _agendaLoader = self.agendaLoader;
} 
```

If I logout/login in the same simulator session (without stopping the app) the save method in the singleton crashes with following error:

```
This NSPersistentStoreCoordinator has no persistent stores.  It cannot perform a save operation.' 
```

But it works without any problem if i logout/stop the app/restart the app/login.

I tried to reset the child managedobjectcontext on logout without any results..

Are there any best practices to reset all managedobjectcontexts, delete the storecoordinator file, and "reboot" all the core data stack?

Thanks for your help.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T06:55:18.107

我认为通知是您最好的选择。每个持有对托管对象上下文以及任何托管对象的引用的视图控制器或对象都必须遵守您的自定义重置通知。因为所有这些都将失效。

我只是好奇，您需要删除持久存储文件的原因是什么？是出于隐私或安全原因吗？如果它只是数据的临时性质？

# asp.net - 在文本框下方显示日历

> ID：11132836
> 
> 赞同：0
> 
> 时间：2012-06-21T06:40:28.443
> 
> 标签：asp.net, html, css

我设计了一个下拉日历，但是如果我单击图像以显示下拉日历，我在文本框下方看不到它。如何在文本框下方显示此日历：

```
<table width=100%>
  <tr align=center>
    <td align=center>
      <asp:Panel ID="Panel2" runat="server" GroupingText="Suche" >
        <table width=100%>
          <tr align=center>
            <td align=center>
              <asp:Label ID="Label4" runat="server" Text="Von :"></asp:Label>
              <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
              <img id="Calimg1" src="Images/cal.jpg" onclick="selectdate()" />
              <div id="calblock1" class=calander >
                <asp:Calendar OnSelectionChanged="Calendar1_SelectionChanged"
                              ID="Calendar1" runat="server" BackColor="#FFFFCC" 
                              BorderColor="#FFCC66" BorderWidth="1px"
                              DayNameFormat="Shortest" Font-Names="Verdana"
                              Font-Size="8pt" ForeColor="#663399" Height="200px" 
                              ShowGridLines="True" Width="220px">
                  <DayHeaderStyle BackColor="#FFCC66" Font-Bold="True"
                                  Height="1px" />
                  <NextPrevStyle Font-Size="9pt" ForeColor="#FFFFCC" />
                  <OtherMonthDayStyle ForeColor="#CC9966" />
                  <SelectedDayStyle BackColor="#CCCCFF" Font-Bold="True" />
                  <SelectorStyle BackColor="#FFCC66" />
                  <TitleStyle BackColor="#990000" Font-Bold="True"
                              Font-Size="9pt" ForeColor="#FFFFCC" />
                  <TodayDayStyle BackColor="#FFCC66" ForeColor="White" />
                </asp:Calendar>
              </div>
              <asp:RequiredFieldValidator ID="RequiredFieldValidator1"
                                          runat="server" 
                                          ControlToValidate="TextBox1"
                                          ErrorMessage="*" ForeColor="Red">
              </asp:RequiredFieldValidator>
            </td>
          </tr>
...... 
```

CSS：

```
.calander
{
    display:none;
    position:absolute
} 
```

和我使用的 JavaScript：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $('#Calimg1').click(function () {
            if (isAnyVisible()) return false;
            $('#calblock1').slideToggle("slow");
        });

        $('#Img1').click(function () {
            if (isAnyVisible()) return false;
            $('#Div2').slideToggle("slow");
        });
    });

    function isAnyVisible() {
        if ($('#Calimg1').is(':visible') || $('#Img1').is(':visible')) {
            return false;
        }
        return true;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T06:50:34.367

您已指定`position`is `absolute`，这是正确的轨道。但是，您缺少一些东西。

首先，绝对元素的父级应该有`position:relative`. 如果没有该相对父级，当您指定 a 时`top`，`left`它将相对于整个文档。如果您使用的坐标是相对于容器的，那么使用起来会容易得多。

接下来，嵌套表很糟糕。使用 div，消除其中一些容器。CSS 定位、浮动、边距和填充将实现相同的结果。

**文件**

*   `position`MDN 上的CSS - [https://developer.mozilla.org/en/CSS/position](https://developer.mozilla.org/en/CSS/position)
*   关于 CSS 定位的列表分开文章 - [http://www.alistapart.com/articles/css-positioning-101/](http://www.alistapart.com/articles/css-positioning-101/)
*   停止使用表格进行布局@ Stack Overflow -[为什么不在 HTML 中使用表格进行布局？](https://stackoverflow.com/questions/83073/why-not-use-tables-for-layout-in-html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-06T13:22:51.253

如果您有 2012 或更高版本，则可以更好地使用**本机 .Net工具。**使用**任何文本框**，然后转到属性并将**TextMode**更改为**DateTimeLocal**。这将创建一个非常好的下拉日历。注意：如果您的 IE 太旧，它不会显示日历，因此请尝试在 Chrome 和 Firefox 上调试它。

# php - PHP & Jquery Image crop and upload

> ID：11132841
> 
> 赞同：-1
> 
> 时间：2012-06-21T06:40:57.350
> 
> 标签：php, jquery

When a user uploads a picture, pop up window should come, where he'll crop the image, after this is done. I want to use php script to upload this to folder but i want cropped image and thumbnail of cropped image to be present.After cropping is done,then he'll click upload button which will upload cropped image then create thumbnail of it and upload them to a folders.

I tried many plug-ins but could not find one for my requirement.

Plug-ins that i tried are [http://deepliquid.com/projects/Jcrop/demos.php](http://deepliquid.com/projects/Jcrop/demos.php)

[http://net.tutsplus.com/tutorials/javascript-ajax/how-to-create-a-jquery-image-cropping-plug-in-from-scratch-part-ii/](http://net.tutsplus.com/tutorials/javascript-ajax/how-to-create-a-jquery-image-cropping-plug-in-from-scratch-part-ii/)

Any help would be appreciated

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-21T15:10:49.450

这是图像裁剪和替换的简单教程 首先为选择图像创建视图文件

```
<!DOCTYPE html>
 <html lang="en">
 <head>
 <script type="text/javascript"     src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="js/jquery.Jcrop.js"></script>
<script type="text/javascript" src="js/cropsetup.js"></script>
</head>
 <body>
<div id="wrapper">
 <div class="jc-demo-box">
 <img src="uploads/Chrysanthemum.jpg" id="target" alt="[Jcrop Example]" />
  <div id="form-container">
  <form id="cropimg" name="cropimg" method="post" action="crop.php" target="_blank">
          <input type="hidden" id="x" name="x">
          <input type="hidden" id="y" name="y">
          <input type="hidden" id="w" name="w">
          <input type="hidden" id="h" name="h">
          <input type="hidden" id="image_name" name="image_name" value="uploads/Chrysanthemum.jpg">
          <input type="submit" id="submit" value="Crop Image!">
  </form>
</div>
 </div>
</div>
</body>
</html> 
```

然后创建图像裁剪 php 文件

```
 <?php

    if ($_SERVER['REQUEST_METHOD'] == 'POST') {
$targ_w =$_POST['w'];
$targ_h =$_POST['h'];

$jpeg_quality = 90;

if(!isset($_POST['x']) || !is_numeric($_POST['x'])) {
  die('Please select a crop area.');
}

$src = $_POST['image_name'];
$system = explode(".", $src);

if (preg_match("/jpg|jpeg/", $system[1]))
{
    $src_img=imagecreatefromjpeg($src);
}
if (preg_match("/png/", $system[1]))
{
    $src_img = imagecreatefrompng($src);
}
if (preg_match("/gif/", $system[1]))
{
    $src_img = imagecreatefromgif($src);
}

$dst_r = ImageCreateTrueColor($targ_w, $targ_h);

imagecopyresampled($dst_r,$src_img,0,0,$_POST['x'],$_POST['y'],
$targ_w,$targ_h,$_POST['w'],$_POST['h']);

if (preg_match("/png/", $system[1]))
{
    imagepng($dst_r, $_POST['image_name']); 
} 
else if (preg_match("/gif/", $system[1]))
{
    imagegif($dst_r, $_POST['image_name']);
}
else
{
    imagejpeg($dst_r, $_POST['image_name']); 
}

imagedestroy($dst_r);   
imagedestroy($src_img);

exit;
   }

  ?> 
```

# matlab - MATLAB calculate angle of rotation

> ID：11132842
> 
> 赞同：1
> 
> 时间：2012-06-21T06:41:02.863
> 
> 标签：matlab, transform, mathematical-optimization, least-squares, numerical-analysis

I have 5 points on a circle:..........1
................................... ......... 2 ...... . 3

```
 4     5 
```

Now I have its rotated image: .............

.............................................................1\. .......3

```
 2          5

                             4 
```

Note: the points aren't numbered.

I basically have 5 sets of coordinates, which when plotted look like the below image.

I need to calculate the amount by which i have to tilt the image so as to make it look like the above image

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T07:20:39.730

如果您有点坐标，您可以尝试通过定义适当的误差函数来最小化误差，这取决于角度和偏移量。

如果您的变换中也有比例，则此问题可以通过线性最小二乘法解决。在这种情况下，Matlab 中的解决方案很简单：

设 x,y 为您的原始点，xt,yt 为结果点。

```
 tform = cp2tform([x,y],[xt,yt],'linear conformal'); 
```

可以使用此变换在图像上应用`imtransform`

* * *

如果您的模型没有比例，并且它只是旋转和移动，您可以通过以下最小二乘方程找到近似解：

```
 ( x1   y1  1  0)                      (x1t)
   (-y1   x1  0  1)                      (y1t)
   ( x2   y2  1  0)                      (x2t)
   (-y2   x2  0  1) * ( cos(theta) )     (y1t)
          ...         ( sin(theta) ) = 
          ...         (    xc      )
          ...         (    yc      )

   (xn   yn  1   0)   
   (-yn  xn  0   1)                       (ynt) 
```

显然，您不能强制 cos(theta) 和 sin(theta) 具有相同的 theta，因此解决方案是近似的。它可以作为初始解并通过梯度下降法进行细化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T12:35:18.730

如果您有权访问 Statistics Toolbox，我认为该`procrustes`命令可能会满足您的需求。给定两组点，它会找到一组点的最佳（就误差平方和而言）线性变换（平移、反射、正交旋转和缩放），以使它们与另一组中的点保持一致。

您可以使用命令的可选输入来抑制缩放和反射分量。如果在应用命令之前将这两个集合平移到一个共同的原点，您还将抑制平移组件，并且只剩下一个旋转。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T08:28:02.053

如果我正确理解了您的问题，这就是*绝对方向问题*。您可以找到几个解决方案（*例如*Horn 使用四元数的解决方案）。可以在[此处](https://math.stackexchange.com/questions/23197/finding-a-rotation-transformation-from-two-coordinate-frames-in-3-space)找到类似的问题。

# svn - 在 jenkins svn 结帐策略中，是否可以每天更新并在周末模拟干净结帐？

> ID：11132848
> 
> 赞同：3
> 
> 时间：2012-06-21T06:41:26.587
> 
> 标签：svn, jenkins, svn-checkout

我正在使用带有 svn 存储库的 jenkins。
通常我只想更新 svn，因为清理时间很长，而且可能会中断其他正在运行的进程。
但是在周末我想做一个干净的结帐。
是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T07:17:23.513

我所做的是每 10 分钟轮询一次更改的持续集成作业，该作业设置为更新，以及一个每天轮询一次更改的夜间作业，设置为每次新鲜结帐。

我不知道有任何标准方法可以设置正常更新的作业，但每 N 小时/天/构建从头开始检查一次，但我可以想到一种解决方法。创建一个单独的作业，该作业将清除第一个工作区并以所需的频率安排它。只要确保作业不会同时运行（在某处有一个选项）。

# android - PhoneGap 1.8.1 - super.loadUrl("file:///android_asset/www/index.html") 问题

> ID：11132852
> 
> 赞同：3
> 
> 时间：2012-06-21T06:41:53.020
> 
> 标签：android, cordova

我只需下载并使用最新版本的 phonegap ：v.1.8.1

像往常一样，我`setContentView(R.layout.main)`用`super.loadUrl("file:///android_asset/www/index.html");`

当我测试我的“hello world”应用程序时，它总是会强制关闭。该应用程序无法正常运行。但是，如果我将行改回`setContentView(R.layout.main)`，应用程序将正常运行并且没有问题（对于应用程序）。真正的问题是，应用程序没有加载 index.html，因为没有`super.loadUrl("file:///android_asset/www/index.html");`行。

这是我的代码：

```
package com.urfinder.android;

import android.os.Bundle;

import org.apache.cordova.DroidGap;

public class URFinderActivity extends DroidGap {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        super.loadUrl("file:///android_asset/www/index.html");

    }
}` 
```

任何人都可以给我一些建议吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-21T06:59:52.943

将类的扩展从 更改`Activity`为`DroidGap`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T08:30:00.230

1）在你的html文件中，你把这一行放进去了`<head>`吗？

```
<script type="text/javascript" charset="utf-8" src="cordova-1.8.1.js"></script> 
```

2）将此行添加到您的活动顶部

```
import org.apache.cordova.*; 
```

3）你有没有`cordova-1.8.1.jar`从你之前下载的 Cordova 复制到文件夹中`/libs`

4）您是否配置了项目构建路径？

> 右键单击`/libs`文件夹并转到**Build Paths/ > Configure Build Path** ...。然后，在 Libraries 选项卡中，添加`cordova-1.8.1.jar`到项目

5）您是否将之前从 Cordova 下载的文件复制`cordova.xml`并归档到文件夹中`plugins.xml``/res/xml`

这是你的检查清单。希望它有所帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T09:02:25.653

可能您已经用大写字母创建了 WWW 目录...试试下面显示的代码。

```
super.loadUrl("file:///android_asset/WWW/index.html"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-17T23:40:02.063

也看看这里：

[当 phonegap 版本从 1.5 更新到 1.9 时，android 中的 Phonegap 应用程序会导致强制关闭](https://stackoverflow.com/questions/11309814/phonegap-application-in-android-results-in-force-close-when-phonegap-version-is)

需要检查的几个项目：

1.  您是否将**xml**文件夹从 PhoneGap/Cordova 存档复制到您的**res**文件夹？
2.  您是否将 Cordova javascript 文件复制到您的 **assets/www**文件夹？

你好祝你好运！

最好的，

-奥里

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T19:50:55.633

网络错误的简单答案：使用相对路径（`file:///android_asset/index.html`）。确保 android 和资产之间有一个下划线。Eclipse 创建“资产”，但在相对路径中我们将使用 android_asset。

我浪费了几个小时，我在路径中使用了“android-asset”。还要确保将 xml 文件夹从下载的 phonegap 复制到项目的 res 文件夹中。xml 文件夹包含 config.xml 文件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-16T05:10:56.400

// 这只是因为与模拟器的连接超时。在加载 url 之前添加此行。

```
super.setIntegerProperty("loadUrlTimeoutValue", 60000); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-16T14:16:39.107

...另一件事可能会让您大吃一惊....cordova jar 和 javascript 文件是在您创建项目时创建的，但是...在我的机器上它们是空的。我仍然必须手动将它们复制到适当位置的项目文件夹中。

我们使用 Sencha Touch，所以这是项目中不兼容问题的另一部分。我从网上加载了很多 Javascript，并且订单似乎相关。我有一个项目，我仍在绞尽脑汁，但是......您可以为 WebView onReceivedError 事件添加一个处理程序并记录错误，这有时会有所帮助。我也不反对在 HTML 文件中放置警报代码以找出故障发生的位置。我们也在使用 webkit 在客户端本地提供 HTML 服务……这是另一个潜在的麻烦点。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-10-23T15:18:12.623

我在这背后挣扎了几个小时。我的文件夹结构是： assets/www/index.html

MainActivty.java 中的代码是： super.loadUrl("file:///asset/www/index.html");

正确的方法是： super.loadUrl("file:///android_asset/www/index.html");

它现在工作。有人可以解释为什么这个“android_”被附加到文件夹名称中吗？

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-02-13T12:21:39.773

这对我有用：

...我正在关注本教程： http: [//nick.perfectedz.com/2012/10/02/how-to-use-phonegap-with-intellijidea/#comment-286](http://nick.perfectedz.com/2012/10/02/how-to-use-phonegap-with-intellijidea/#comment-286)

使用 Android IntelliJ Idea3 + Phonegap 制作 Hello World 并在“file:///android_asset/www/index.html”处遇到同样烦人的错误

并将这一行添加到我的 Manifest.xml 文件中解决了类似魅力的问题：

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-10-01T10:19:16.517

```
<script type="text/javascript" charset="utf-8" src="cordova-1.8.1.js"></script> 
```

关于 index.html：
并检查您的 .js 文件是否真的像您在 src-tag 中引用的那样命名。
在这种情况下，cordova-1.8.1.js

# javascript - 仅在页面提交后显示具有透明背景的加载图像

> ID：11132859
> 
> 赞同：0
> 
> 时间：2012-06-21T06:42:45.803
> 
> 标签：javascript, html, css, css-position

我想在页面提交后显示加载图像。我希望它像，加载图像显示在页面中间，它应该有一个透明的背景来显示页面内容。我用过以下

```
 #loading {
    position:fixed;
    top:50%;
    left:50%;
    z-index:1104;
    background-color:#999999;
    width:100%;
    height:100%;

    } 
```

请不要在答案中包含 javascript 部分，我只想了解样式。

这不是为整个页面提供背景颜色。请帮助我如何在页面中心显示加载图像并且页面内容应该稍微显示。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T06:45:13.277

移除顶部：50% 和左侧：50%；

[http://jsfiddle.net/qqncv/1/](http://jsfiddle.net/qqncv/1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T06:51:04.180

假设您要禁用与正在加载的内容的所有交互，您可以简单地覆盖元素并将其*背景*居中：

```
#overlay { 
    /*Cover the entire screen regardless of scrolling*/ 
    position:fixed;top:0;right:0;bottom:0;left:0; 
    background: #ff0000 url(...) no-repeat 50% 50%; 
} 
```

为演示目的[摆弄了一个半透明的 bgcolor。](http://jsfiddle.net/ovfiddle/Fm2ub/)

编辑：实际上将元素垂直和水平居中[是困难的](https://stackoverflow.com/a/9758556/1081234)。

# iphone - 弹出视图以在 iphone 中单击按钮时显示字符串

> ID：11132864
> 
> 赞同：0
> 
> 时间：2012-06-21T06:43:16.583
> 
> 标签：iphone, ios, popup, xcode4.2

在我的应用程序中，我有一些 .strings 文件。在我的主视图上单击按钮，我必须显示从这些 .strings 文件中获取的内容，它应该看起来像一个弹出视图，就像我的屏幕截图一样已附上。我该怎么做？有人有任何有用的教程或解决方案吗？

![在此处输入图像描述](../Images/7e91576f3108d396613ac8355229f47f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T07:00:37.760

只需使用这些数量的标签或 textviews 创建一个视图。如果它只是字符串，则设置 label.text=corresponding 字符串，或者使用文件设置文本视图的内容。然后在视图 didload 中隐藏视图。然后呈现或当按钮单击事件时取消隐藏视图。然后在关闭按钮操作中再次隐藏它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T07:02:08.027

如果字符串很短，请使用

```
[btn setTitle:@"string" forState:UIControlStateNormal]; 
```

如果字符串很长，你可以在 btn 上添加一个 UIImageView。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T07:03:44.593

只需参考[此](https://stackoverflow.com/a/6498257/1132951)答案即可阅读 .string 文件。或制作 .txt 文件

然后显示字符串只需使用@bugfinder 描述的标签并显示/隐藏视图

# bash - Putty / Bash alt + 左/右箭头键逐字移动光标

> ID：11132866
> 
> 赞同：6
> 
> 时间：2012-06-21T06:43:22.323
> 
> 标签：bash, keyboard-shortcuts, putty

我无法让这个腻子正确处理 alt + left/right。

（编辑：通过“正确”，我显然是指我已经习惯于移动光标的方式;-)

通常我可以这样做：

```
cat > /dev/null
..&lt;hold alt and left arrow&gt;.. 
```

获得正确的密钥。在这种情况下，我得到： ^[^[[D

然后我继续做：

```
bind '^[^[[D:backward-word' 
```

我也试过：

```
bind '\e\e[D:backward-word' 
```

请注意，这个问题在屏幕内（TERM=screen）和屏幕外（TERM=xterm）是一样的。

关于下一步我应该尝试什么的任何提示？任何需要启用/禁用的腻子选项？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T07:48:42.877

由于某种原因，这种格式`bind`对我也不起作用，但我在`bind -f`.

〜/ .bashrc：

```
if [ -f ~/.readline-bindings ] ; then
    bind -f ~/.readline-bindings
fi 
```

~/.readline 绑定：

```
"\e[1;3D": backward-word
"\e[1;3C": forward-word 
```

注意字符后面的空格`:`。显然你应该在这里使用你自己的控制序列。

# c++ - fork() 分支超出预期？

> ID：11132868
> 
> 赞同：188
> 
> 时间：2012-06-21T06:43:33.553
> 
> 标签：c++, c, fork

考虑以下代码：

```
#include <stdio.h>
#include <sys/types.h>
#include <unistd.h>

int main(void)
{
    int i;
    for(i = 0; i < 2; i++)
    {
        fork();
        printf(".");
    }
    return 0;
} 
```

该程序输出 8 个点。这怎么可能？不应该有6个点吗？

* * *

## 回答 #1

> 赞同：247
> 
> 时间：2012-06-21T06:58:19.537

原始人往往会`fork()`延伸想象力。在您对它有所了解之前，您应该在纸上追踪每个操作是什么，并说明进程的数量。不要忘记 fork() 创建了当前进程的近乎完美的副本。最显着的区别（对于大多数目的）是`fork()`父子之间的返回值不同。（由于此代码忽略了返回值，因此没有区别。）

所以，起初，有一个过程。这将创建第二个过程，这两个过程都打印一个点和循环。在他们的第二次迭代中，每个人都会创建另一个副本，因此有四个进程打印一个点，然后退出。所以我们可以很容易地解释六个点，就像你期望的那样。

然而，`printf()`真正做的是缓冲它的输出。因此，只有两个进程时的第一个点在写入时不会出现。这些点保留在缓冲区中——在 fork() 中被复制。直到进程即将退出缓冲点才出现。四个过程打印一个缓冲点，加上新的一个提供 8 个点。

如果您想避免这种行为，请致电`fflush(stdout);`after `printf()`。

* * *

## 回答 #2

> 赞同：70
> 
> 时间：2012-06-21T06:59:15.913

您**在输出流中有未提交的缓冲区**。stdout 是行缓冲的，并且缓冲区与进程的其余部分一起复制。当程序终止时，未提交的缓冲区被写入两次（每个进程一次）。两者都使用

```
printf("a\n"); 
```

和

```
printf("a "); fflush(stdout); 
```

不要表现出问题。

在您的第一个示例中，您创建了四个进程，每个进程在其输出流缓冲区中都有两个点。当每个流终止时，它会刷新其缓冲区，生成八个点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-24T20:12:18.487

**当 i=0**

Process_1：缓冲文本= 1 点

Process_2（由 Process_1 创建）：缓冲文本 = 1 点

**当 i=1**

Process_3（由 Process_1 创建）：从 Process_1 继承 1 个缓冲点并自行打印 1 个点。Process_3 总共打印 2 个点。

Process_4（由 Process_2 创建）：从 Process_2 继承 1 个缓冲点并自行打印 1 个点。Process_4 总共打印 2 个点。

Process_1：打印 2 个点（当 i=0 时打印一个缓冲点，当 i=1 时打印另一个点）

Process_2：打印 2 个点（当 i=0 时打印一个缓冲点，当 i=1 时打印另一个点）

最终输出：8 点。:)

# java - Issue with getters and setters Methods

> ID：11132869
> 
> 赞同：0
> 
> 时间：2012-06-21T06:43:39.967
> 
> 标签：java, android, setter, getter, serializable

Hello I am working on the `google NewsReader` Application Using `SAX`, Here I am using `getters` and `setter`s methods for get the data.
But I have issue that I could add the value into the `setters` methods but could not get into the `getters` methods, I don't know what's Mistake, Please let me know where I do Mistake .

```
public class Item implements Serializable {

private String title;
private String description;
private String link;
private String date;

public Item() {
    setTitle(null);
    setDescription(null);
    setLink(null);
    setDate(null);
}

public String getTitle() {
    System.out.println(" value of the Gettitle ===============> "+ title);
    return title;
}

public void setTitle(String title) {
    this.title = title;
    System.out.println("value of the settitle =============>"+this.title);
} 
```

* * *

Output into Logcat:

```
 value of the settitle =============>Oracle CEO Ellison to Buy Most of Hawaiian Island Lanai - Bloomberg

 value of the Gettitle ===============> null 
```

* * *

Here I got the value of `item.getTitle().length()` is null.

Edit:

```
public void endElement(String uri, String localName, String qName)
        throws SAXException {
    // TODO Auto-generated method stub
    //super.endElement(uri, localName, qName);

    if(localName.equalsIgnoreCase("title")) {

        if(inItem) {
            //System.out.println("value of the content=========>"+content.toString());
            item.setTitle(content.toString());
        } else {
            channel.setTitle(content.toString());
        }
    } 
```

* * *

```
 Item item  = new Item();

        for (int i = 0; i < item.getTitle().length(); i++) {

            HashMap<String, String> map = new HashMap<String, String>();

            map.put("title", item.getTitle().valueOf(i));
            map.put("pubdate", item.getDate().valueOf(i));
            map.put("desc", item.getDescription().valueOf(i));

             items.add(map);

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T06:45:57.800

我强烈怀疑您调用`getTitle()`的实例与`Item`您调用的实例不同`setTitle()`：

```
Item item1 = new Item();
item1.setTitle("foo");

// Some other code

Item item2 = new Item();
String title = item2.getTitle(); // This will return null 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T06:47:37.567

如果您对 和 使用 2 个不同的对象，则可能会发生这种`set`情况`get`。检查您是否在同一个对象上调用`setter`and 。`getter`

**编辑**

用于设置标题的对象 ie`item.setTitle(content.toString());`与在循环`item`之前创建的对象不同。您正在通过在循环之前使用来`for`重新创建/重新初始化`item`对象。创建一个全局对象并只创建一次。`Item item = new Item()``for``item`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T06:52:19.577

尝试这个，

```
public class Item implements Serializable {

private String title;
private String description;
private String link;
private String date;

public Item() {
    setTitle(null);
    setDescription(null);
    setLink(null);
    setDate(null);
}

public String getTitle() {
    System.out.println(" value of the Gettitle ===============> "+ title);
    return title;
}

public void setTitle(String title) {
    this.title = title;
    System.out.println("value of the settitle =============>"+this.title);
}

public static void main(String[] args) {

 Item i = new Item();
 i.setTitle("War-Craft");

  i.getTitle();
}
} 
```

**请尝试检查您正在设置和获取的实例。**

# iphone - 使用代码中的 JavaScript 在 webview 中设置 HTML 内容。

> ID：11132871
> 
> 赞同：0
> 
> 时间：2012-06-21T06:43:59.390
> 
> 标签：iphone, objective-c, ios

我正在尝试在 webview 中使用此 JavaScript 打印 HTML，但它实际上是在打印`<p>HELLO</p>`. 我该如何解决？

```
NSString* statement = [NSString stringWithFormat:@"document.getElementById('test').innerText = '<p>HELLO</p>'"];

[self.myWebView stringByEvaluatingJavaScriptFromString:statement]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T07:03:57.667

我猜你需要使用`innerHTML`而不是`innerText`.

因为`innerText`会简单地分配你在那里写的任何东西。如果您的文本包含 html 并且您元素解析该 HTML，那么您肯定必须使用 innerHTML。

尝试如下，可能会有所帮助。

```
NSString* statement = [NSString stringWithFormat:@"document.getElementById('test').innerHTML = '<p>HELLO</p>'"];    
[self.myWebView stringByEvaluatingJavaScriptFromString:statement]; 
```

**注意** 您的测试元素必须支持 innerHTML 属性，例如 div span 等。

# charts - google chart series label

> ID：11132872
> 
> 赞同：2
> 
> 时间：2012-06-21T06:44:08.440
> 
> 标签：charts, label

I am setting up a bar chart using google chart, and I would like to display a value next to the bar chart to indicate the value the bar is referring to.

I know that when you hover over the bar, it will display the number as the example below: [https://code.google.com/apis/ajax/playground/?type=visualization#bar_chart](https://code.google.com/apis/ajax/playground/?type=visualization#bar_chart)

But I want it to display without hovering, like how you can set up a bar chart with series displaying in PowerPoint.

I am not sure if there is a way to get around this? Or is this simple a non-existence at the moment for google chart?

Thanks, Roy

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-04T14:30:39.870

此功能备受追捧，但遗憾的是 Google Charts 仍然不支持。

经过长时间的努力，我已经对`ComboChart`（可以使用`BarChart`并且`ColumnChart`也可以进行一些更改）将标签插入 SVG 进行了破解。

看看这个小提琴：http: [//jsfiddle.net/augustomen/FE2nh/](http://jsfiddle.net/augustomen/FE2nh/)

在 Firefox 21、Chrome 27 和 IE 9 上测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T07:09:07.520

看起来他们是在 2012 年 9 月添加的。 [https://developers.google.com/chart/interactive/docs/customizing_tooltip_content](https://developers.google.com/chart/interactive/docs/customizing_tooltip_content)

# tomcat - java web application deployment on tomcat server

> ID：11132873
> 
> 赞同：1
> 
> 时间：2012-06-21T06:44:08.713
> 
> 标签：tomcat, web-applications, deployment, java

I had developed a java web application on jdk1.5.

I used eclipse IDE for the development purpose. And when am running the application through eclipse, its working properly, no issues am facing. But when am trying to deploy the same application as war file in the same machine's tomcat server, its throwing some error like `Bad version number in .class file` or in some other time i will get error message like `java.lang.NoClassDefFoundError`.

This is what am getting in the stack trace.

```
javax.servlet.ServletException: Servlet execution threw an exception

root cause

java.lang.NoClassDefFoundError
    com.bdisys.auditservice.manager.AuditServiceManager.updateAuditServiceDetails(AuditServiceManager.java:46)
    com.bdisys.auditservice.servlet.AuditServiceHandler.doPost(AuditServiceHandler.java:45)
    com.bdisys.auditservice.servlet.AuditServiceHandler.doGet(AuditServiceHandler.java:34)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:689)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:802) 
```

Am attaching my project config for Java compiler settings.

![enter image description here](../Images/8146998fcd52bfaa3f7d61681d767a33.png)

Can anyone give suggestions to resolve this strange issue.?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T06:46:06.937

错误

```
Bad version number in .class 
```

这是由于 JVM 不兼容造成的。

确保您使用相同的 Java 版本进行编译和执行。

检查您的 Tomcat 安装使用的 JRE 是否与您用于编译和生成 WAR 文件的 JDK 1.5 版本相匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T06:48:04.953

您的类路径和库是否正确？该应用程序未运行，因为在 com.bdisys.auditservice.manager 包中找不到类 AuditServiceManager（它是一个库？）

# informix - String alignment with spaces in 4GL

> ID：11132878
> 
> 赞同：1
> 
> 时间：2012-06-21T06:44:33.987
> 
> 标签：informix, 4gl

How to right align a string in 4gl with specified no.of spaces?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T07:03:58.257

You can use the FILL function to create a specified number of spaces. For example, FILL("A", 10) will return "AAAAAAAAAA".

Here's is a simple demo:

```
DEFINE VARIABLE cText   AS CHARACTER   NO-UNDO.
DEFINE VARIABLE iLength AS INTEGER     NO-UNDO.

iLength = 16.
cText = "Some text".

cText = FILL(" ", iLength - LENGTH(cText)) + cText.

MESSAGE cText. 
```

Your required overall length is 16 characters. Use LENGTH(cText) to determine how many characters your text takes up, and then use FILL to create the remaining number of spaces at the front of the string.

* * *

**Informix**

I answered this question for Progress 4GL, and only noticed afterwards that the question was asked about Informix 4GL. I am very sorry for my mistake.

You can use the same principal to do this in Informix. You use the LENGTH keyword to find out how long your existing text is, but instead of using FILL() to pad it with spaces, you should use SPACES.

```
Progress: FILL(" ", 10) + c_text
Informix: 10 SPACES, c_text 
```

I really hope this helps you.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-23T13:45:03.710

When using DISPLAY you can specify its location:

```
DISPLAY l_string at 3,3 
```

Similarly, you can set a variable as a placeholder for the location:

```
DEFINE l_dest1, l_dest2 int
DEFINE l_string char(20)

LET l_string = "Some text here"
LET l_dest1 = 3
LET l_dest2 = 6
DISPLAY l_string at l_dest1, l_dest2 
```

Result:

```
 Some text here 
```

You can also just add spaces before the string like:

```
DISPLAY"                                MY TEXT" 
```

If the text is in a variable and you don't want to add spaces to that variable. You can do like this:

```
DISPLAY "                                         ", l_string 
```

See also my answer here on [how to center a string](https://stackoverflow.com/a/35999916/4398840). I hope that helps.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-22T13:01:29.820

You use the USING statement in Informix 4GL. This can be used to do all sorts of formatting, including padding.

```
LET l_string = "X" 
LET l_string = l_string USING "######" 
```

This will change a string "X" to have 5 spaces in front.

Also useful for padding numbers with zero. USING "&&&&&&" changes 1 to 00001\.

# c# - ConfigurationManager.GetSection() 函数

> ID：11132882
> 
> 赞同：0
> 
> 时间：2012-06-21T06:44:54.243
> 
> 标签：c#, configuration

有人可以详细说明这个功能是如何工作的吗？它是每次都从磁盘加载还是将其缓存在内存中的某个位置等？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T06:47:17.770

> .NET 缓存此内容并在 web.config 更改时失效

此外，当有疑问时，打开反编译的源代码并查看代码，它不仅会给你答案，而且你会学到很多东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T06:47:28.783

当应用程序运行时，整个配置被加载到内存中，每当您尝试访问时，都会从内存中检索您所需的部分

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T07:33:26.760

配置在内存中，磁盘配置文件中的任何外部更改都必须重新加载（独立应用程序）

```
ConfigurationManager.RefreshSection(sectionName); [1] 
```

[1] [http://msdn.microsoft.com/en-us/library/system.configuration.configurationmanager.refreshsection.aspx](http://msdn.microsoft.com/en-us/library/system.configuration.configurationmanager.refreshsection.aspx)

# javascript - javascript/jQuery：使用 .each 时验证数字

> ID：11132883
> 
> 赞同：0
> 
> 时间：2012-06-21T06:44:57.797
> 
> 标签：javascript, jquery, forms, validation

大家好，

我正在验证我的表单，只是检查用户是否在应该是数字的字段中输入了一个字符串。

在表单中有一个字段，用户可以根据需要添加更多字段。然后表单被发送到一个 js 函数，我在其中收集添加的字段，如下所示：

```
 params ='';   
var myAray = []; 
    $(".myfieldThatNeedNumbers").each(function(){
        myAray.push($(this).val());
    })
    params += '&myfieldThatNeedNumbers='+myAray; 
```

由于 .ajax()，稍后的参数将被发送到我的 php 文件

如何验证字段“myfieldThatNeedNumbers”中的值是数字？

万分感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T06:51:12.510

或者你可以试试

```
!isNaN(Number(value)) 
```

编辑：你的意思是 -

```
$(".myfieldThatNeedNumbers").each(function(){
    var val = $(this).val();
    if(!isNaN(Number(val)){ /* invalid number detected */ }

    myAray.push($(this).val());
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T06:58:04.747

```
var params = $( '.myFieldsThatAreNumber' ).filter( function() {
    return $.isNumeric( this.value );
} ); 
```

当天的优雅答案™。

`$.isNumeric`需要 jQuery 1.7（[垫片的来源](http://james.padolsey.com/jquery/#v=git&fn=jQuery.isNumeric)，可能基于[这个答案](https://stackoverflow.com/a/1830844/851498)）。

此外，`$.ajax`需要参数的对象`data`，因此您需要以下内容：

```
var data = {
    'myFieldsThatAreNumbers': params
};

$.ajax( {
    data: data,
} ); 
```

要不就：

```
$.ajax( {
    data: {
        'myFieldsThatAreNumbers': params
    },
} ); 
```

jQuery 将负责为您创建字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T06:48:39.607

```
 $(".myfieldThatNeedNumbers").each(function(){
        var value = $(this).val();
        if($.isNumeric(value)) {
           myAray.push(value);   
        } else {
           alert('Not number')
        }
    }); 
```

阅读更多关于**[`$.isNumeric()`](http://api.jquery.com/jQuery.isNumeric/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T06:53:43.523

```
/^\d+$/.text(string) 
```

一段时间的数字。

```
/^\d+\.?\d*$/.test(string) 
```

为浮点数。`[+\-]?`如果您需要签名，请在前面添加。

你可以用美元

```
/^[+\-]?\d+(\.\d{2})?/.test(string) 
```

# c# - IEnumerable 和 IQueryable 澄清？

> ID：11132888
> 
> 赞同：17
> 
> 时间：2012-06-21T06:45:19.340
> 
> 标签：c#, .net, ienumerable, iqueryable

读完[这个](https://stackoverflow.com/questions/2876616/returning-ienumerablet-vs-iqueryablet)问题后，我需要澄清一些事情。

```
IQueryable<Customer> custs = from c in db.Customers
where c.City == "<City>"
select c;

IEnumerable<Customer> custs = from c in db.Customers
where c.City == "<City>"
select c; 
```

问题：

1) 可以这样说：在第一个查询中，SQLServer 正在运行整个操作，包括 where 子句并**仅**返回相关行 - 而第二个查询`SELECT *`...并将 **所有** 行返回到 C# 和*THEN*过滤器？

2）如果我只有一个*集合*——在内存中怎么办。( `var lstMyPerson = new List<MyPerson>()`)

```
IQueryable<MyPerson> lst = from c in lstMyPerson 
where c.City == "<City>"
select c; 
```

对比

```
IEnumerable<MyPerson> custs = from c in lstMyPerson 
where c.City == "<City>"
select c; 
```

现在执行会有什么不同？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-21T06:52:13.083

**1：不，这是不正确的**

由于您只是*将*结果存储到 中`IEnumerable<Customer>`，但仍然具有产生结果的完全相同的表达式，因此它们都将在服务器上执行并仅返回相关行。

你会得到这样的行为差异：

```
IEnumerable<Customer> custs = from c in (IEnumerable<Customer>)db.Customers
    where c. City == "<City>"
    select c; 
```

在这种情况下，您强制将`db.Customers`集合用作`IEnumerable<T>`，枚举时将获取整个集合。

请注意：

```
IEnumerable<Customer> x = from c in db.Customers
                          where c.City == "<City>"
                          select c; 
```

与此不同：

```
IEnumerable<Customer> x = from c in db.Customers
                          select c;
IEnumerable<Customer> y = x.Where(c => c.City == "<City>"); 
```

在第一种情况下，`where`子句将成为 SQL 的一部分，而在第二种情况下则不会。这就是为什么链接的问题/答案涉及差异，而您的代码没有。

另请注意，*只有*您编写的语句实际上不会在服务器上执行任何操作，因为它们实际上只会存储惰性集合。如果您继续枚举这些集合，*那么*相关位将在服务器上执行。

**2：`List<T>`没有实现或具有扩展方法`IQueryable<T>`，涉及的 LINQ 运算符也不会返回任何与`IQueryable<T>`**

在这种情况下，第一个将无法编译。

# android - Android JSON杰克逊教程

> ID：11132891
> 
> 赞同：14
> 
> 时间：2012-06-21T06:45:24.307
> 
> 标签：android, json, jackson

我正在开发使用`JSON`数据格式的 android 应用程序，我需要`Jackson JSON library`使用`JSON handling`.
谁能推荐一些好的教程`Jackson`。

我查看了杰克逊官方网站，但网站上的教程有些混乱。我只需要杰克逊的一些基本教程。

# git - 如何从第二个 git repo 中删除克隆的 git repo？

> ID：11132892
> 
> 赞同：1
> 
> 时间：2012-06-21T06:45:26.893
> 
> 标签：git, git-submodules

我不小心将一个克隆的 git 存储库添加到我的存储库的工作副本克隆中，并将更改推送到我的远程。我没有使用 git submodule 来做到这一点，而是做了类似“git add somedir.git”的事情。

现在每当我克隆我的仓库时，我都会得到一个空的“somedir.git”目录。我不能做“git rm -r somedir”，因为 git 抱怨“somedir.git 是一个目录”。

如何摆脱此目录或将其转换为适当的子模块？克隆后该目录完全为空，其中甚至没有 .git/ 文件夹。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T09:33:11.930

Git 无法删除目录，因为它是空的，空目录总是很棘手（顺便说一句，我不清楚为什么克隆 repo 会给你这个空目录！）

简单地`rm -rf somedir.git`提交它的删除。

# python - 如何在 PIL 中的透明图像上绘制 unicode 字符

> ID：11132894
> 
> 赞同：3
> 
> 时间：2012-06-21T06:45:42.213
> 
> 标签：python, python-imaging-library, imaging

我正在尝试使用 python（准确地说是 PIL）在图像上绘制某些 unicode 字符。

使用以下代码，我可以生成具有白色背景的图像：

（'entity_code' 被传递给方法）

```
 size = self.font.getsize(entity_code)
    im = Image.new("RGBA", size, (255,255,255))
    draw = ImageDraw.Draw(im)
    draw.text((0,6), entity_code, font=self.font, fill=(0,0,0))
    del draw
    img_buffer = StringIO()
    im.save(img_buffer, format="PNG") 
```

我尝试了以下方法：

（'entity_code' 被传递给方法）

```
 img = Image.new('RGBA',(100, 100))
    draw = ImageDraw.Draw(img)
    draw.text((0,6), entity_code, fill=(0,0,0), font=self.font)
    img_buffer = StringIO()
    img.save(img_buffer, 'GIF', transparency=0) 
```

但是，这无法绘制 unicode 字符。看起来我最终得到了一个空的透明图像:(

我在这里想念什么？有没有更好的方法在 python 中的透明图像上绘制文本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T19:55:49.620

您的代码示例到处都是，我倾向于同意@fraxel 的观点，即您在填充颜色和 RGBA 图像的背景颜色的使用方面不够具体。但是，我实际上根本无法让您的代码示例正常工作，因为我真的不知道您的代码如何组合在一起。

此外，就像@monkut 提到的那样，您需要查看您正在使用的字体，因为您的字体可能不支持特定的 unicode 字符。然而，不受支持的字符应该被绘制为一个空方块（或任何默认值），这样您至少会看到某种输出。

我在下面创建了一个简单的示例，它绘制 unicode 字符并将它们保存到 .png 文件中。

```
import Image,ImageDraw,ImageFont

# sample text and font
unicode_text = u"Unicode Characters: \u00C6 \u00E6 \u00B2 \u00C4 \u00D1 \u220F"
verdana_font = ImageFont.truetype("verdana.ttf", 20, encoding="unic")

# get the line size
text_width, text_height = verdana_font.getsize(unicode_text)

# create a blank canvas with extra space between lines
canvas = Image.new('RGB', (text_width + 10, text_height + 10), (255, 255, 255))

# draw the text onto the text canvas, and use black as the text color
draw = ImageDraw.Draw(canvas)
draw.text((5,5), unicode_text, font = verdana_font, fill = "#000000")

# save the blank canvas to a file
canvas.save("unicode-text.png", "PNG") 
```

上面的代码创建了下面显示的 png： ![统一码文本](../Images/4e2905c703f1d1196e70c118cf548f58.png)

作为旁注，我在 Windows 上使用 Pil 1.1.7 和 Python 2.7.3。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T07:59:24.303

我认为您必须确保加载的字体支持您尝试输出的字符。

这里的一个例子：http: [//blog.wensheng.com/2006/03/how-to-create-images-from-chinese-text.html](http://blog.wensheng.com/2006/03/how-to-create-images-from-chinese-text.html)

```
font = ImageFont.truetype('simsun.ttc',24) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T07:59:55.280

在您的示例中，您创建了一个`RGBA`图像，但您没有指定`alpha`通道的值（因此默认为 255）。如果`(255, 255, 255)`用`(255,255,255,0)`它替换应该可以正常工作（因为具有 0 alpha 的像素是透明的）。

为了显示：

```
import Image
im = Image.new("RGBA", (200,200), (255,255,255))
print im.getpixel((0,0))
im2 = Image.new("RGBA", (200,200), (255,255,255,0))
print im2.getpixel((0,0))
#Output:
(255, 255, 255, 255)
(255, 255, 255, 0) 
```

# java - OpenDJ LDAP 中的 GROUPS 和 ROLES 是否相同？

> ID：11132896
> 
> 赞同：1
> 
> 时间：2012-06-21T06:45:43.840
> 
> 标签：java, ldap, opendj

我设法创建了一个具有三个组织单位的层次结构，即：

ou=人 || ou=组 || ou=Role（这些是 baseDN 下的三个不同节点）

在人员下，我有用户条目（例如 edanny），每个条目都有 objectClass = inetOrgPerson。在组下，我有条目（例如库存部门）具有 objectClass = groupOfUniqueNames，最后在角色（例如管理员）下条目具有 objectClass = organizationsRole。

以上条目是在需要人员组、角色和组织部门的 LDAP 中组织层次结构的正确方法吗？

此外，我已将*People Unit*下的每个用户分别与他们自己的属性 roleOccupant 和 uniqueMember 中的角色和组相关联，而不是在用户条目中写入每个用户的角色和组。

这是正确的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T06:59:22.800

可以这样做。我建议您删除角色组并添加成员（在组中（基本上这些将是您的角色）

然后您可以将每个用户的部门添加为每个单独用户的属性。

如果 objectclass inetOrgPerson 的属性不够，您还可以添加更多 objectclasses 或者您可以创建自己的

因此，最终您将拥有 ou=People 下的用户和 ou=Groups 下的角色

这不是一个正确或错误类型的问题，可以使用您的方式完成，但我认为遵循上述内容会更容易

# javascript - websockets安全与否？

> ID：11132897
> 
> 赞同：55
> 
> 时间：2012-06-21T06:45:46.093
> 
> 标签：javascript, html, websocket

[维基百科](http://en.wikipedia.org/wiki/Web_Sockets)似乎推断`websockets`是安全的：

> 对于 Web 浏览器支持，WebSocket 协议的安全版本在 Firefox 6（名为 MozWebSocket）、[2] Google Chrome 14[3] 和 Internet Explorer 10 开发者预览版中实现。...虽然没有已知的漏洞利用，但它在 Firefox 4 和 5 中被禁用...

但[w3](http://www.w3.org/TR/websockets/)表示它们不安全：

> 在此处遵循 HTTP 过程可能会在 Web 浏览器上下文中引入严重的安全问题。例如，考虑一个主机，在一个路径上有一个 WebSocket 服务器，在另一个路径上有一个开放的 HTTP 重定向器。突然之间，任何可以被赋予特定 WebSocket URL 的脚本都可能被诱骗与 Internet 上的任何主机通信（并可能与之共享机密），即使该脚本检查该 URL 是否具有正确的主机名也是如此。

1.  (ws:)是否`http websockets`安全？

2.  (wss:)是否`https websockets`安全？

3.  如果不是#2，是否有记录在案的预防措施？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-06-21T15:31:18.840

WebSocket 安全性有很多不同的方面。

您引用的维基百科的摘录是指 WebSocket 客户端对服务器数据的屏蔽。这是为了保护行为不端的中介（例如代理和缓存）不会意外地将 WebSocket 流量解释为正常的 HTTP 流量。这里的危险是 WebSockets 协议可能被用来毒化缓存中介。然而，我应该指出，这纯粹是理论上的问题，但 Mozilla 和 Opera 不愿意发布 WebSocket 协议的 Hixie 和早期 HyBi 版本就足够了。因此，IETF 决定添加客户端到服务器的数据屏蔽来解决这个问题。

顺便说一句，IETF 负责 WebSocket 协议（IETF 6455），而 W3C 负责 HTML5 WebSocket API（Javascript 对象、方法和事件）。

WebSocket 安全性的另一个方面是跨域安全性。您从 W3C WebSocket API 规范中引用的第二个片段与跨域安全性有关。WebSockets 支持跨域连接（到提供 HTML 页面的不同主机）。这个警告是说**如果**WebSockets 已经使用了正常的 HTTP 跨域程序，这将打开一个巨大的安全漏洞。但是，正是由于这个原因，WebSocket 过程是不同的。一方面，WebSocket 握手和响应被设计为无法与不支持 WebSocket 连接的 HTTP 服务器建立 WebSocket 连接：服务器必须以 WebSocket 特定的方式对密钥进行签名/散列，并在握手响应中返回。第二部分是浏览器必须发送一个 Origin 标头作为握手的一部分（这表明 HTML/Javascript 最初是从哪里加载的）。这允许服务器选择它将允许哪些域*发起*WebSocket 连接。

最后，有两种WebSocket连接方式：未加密（ws://）和加密（wss://）。加密模式使用 TLS/SSL 加密来加密发送到服务器和从服务器发送的所有数据（包括初始握手和响应）。这与用于 HTTPS 连接的加密机制相同（并在浏览器中使用相同的加密引擎）。这可以防止第三方窥探正在传输的数据。

实际上只有两个版本的 WebSocket 协议值得了解：

*   **Hixie76**：此版本的协议增加了跨域安全性和标头哈希/签名。然而，由于协议的设计方式，很难将对它的支持添加到现有的 Web 服务器。这是 iOS 目前支持的版本（希望 iOS 6 最终会更新到 IETF 6455）

*   **IETF 6455**：这是去年 11 月（2011 年 11 月）由 IETF 标准化的 WebSocket 协议版本。这是 IETF HyBi 工作组的工作成果（导致它的协议迭代被标记为 HyBi XX）。这是当前版本的 Chrome 和 Firefox 以及 IE 10 和即将推出的 Opera 支持的版本。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-21T07:32:51.830

WebSocket 协议的 hixie-76 版本比早期版本更安全，hybi-07 版本更安全。在 hixie-76 版本中增加[了对虚假请求的保护](https://datatracker.ietf.org/doc/html/draft-hixie-thewebsocketprotocol-76#section-7)。在 hybi-07 版本中添加了[消息屏蔽](https://datatracker.ietf.org/doc/html/draft-ietf-hybi-thewebsocketprotocol-07#section-9)。

# iphone - 以编程方式将 SQLite 数据导出到 iOS 中的 Excel

> ID：11132900
> 
> 赞同：9
> 
> 时间：2012-06-21T06:45:58.143
> 
> 标签：iphone, objective-c, ios, sqlite

在我的应用程序中，我使用 sqlite 作为后端（在本地存储数据）。我能够将数据插入到我的表中。但我想要做的是，想以编程方式将我所有的 sqlite 数据导入到 excel 中。我不想为这个应用程序使用服务器。一旦生成了 excel 表，用户应该能够邮寄那张纸。这在 iPhone 中是否可行：请帮帮我。

以下是我将数据插入表的代码：

```
-(IBAction)Login
{
sqlite3_stmt *stmt;
        char *errorMsg; 
        char *update1 = "insert into Login1 values (?,?,?,?);";
        int x = sqlite3_prepare_v2(database, update1, -1, &stmt, nil);

    if (x == SQLITE_OK) 
    { 
        sqlite3_bind_text(stmt, 1, NULL,-1, NULL);
        sqlite3_bind_text(stmt, 2, [USERID UTF8String],-1, NULL);
        sqlite3_bind_text(stmt, 3, [str1 UTF8String],-1, NULL);
        sqlite3_bind_text(stmt, 4, [str4 UTF8String],-1, NULL);

    } 

    if (sqlite3_step(stmt) != SQLITE_DONE)
        NSLog(@"Error: %@",errorMsg); 
    sqlite3_finalize(stmt); 
```

}

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-21T20:47:36.673

对于我这样做的应用程序，SQLite 数据相当大。因此，我使用后台线程将所有数据导出到 Excel 可以导入的 CSV（逗号分隔值）文件，然后以 CSV 文件作为附件打开邮件编写器。如果您的数据很小，您可能不需要使用后台线程：

```
- (IBAction) export: (id) sender
{    
    // in my full code, I start a UIActivityIndicator spinning and show a 
    //  message that the app is "Exporting ..."

    [self performSelectorInBackground: @selector(exportImpl) withObject: nil];
} 
```

这是`exportImpl`

```
- (void) exportImpl
{
    NSAutoreleasePool* pool = [[NSAutoreleasePool alloc] init];

    NSArray* documentPaths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSSystemDomainMask, YES);
    NSString* documentsDir = [documentPaths objectAtIndex:0];
    NSString* csvPath = [documentsDir stringByAppendingPathComponent: @"export.csv"];

    // TODO: mutex lock?
    [sqliteDb exportCsv: csvPath];

    [pool release];

    // mail is graphical and must be run on UI thread
    [self performSelectorOnMainThread: @selector(mail:) withObject: csvPath waitUntilDone: NO];
}

- (void) mail: (NSString*) filePath
{
    // here I stop animating the UIActivityIndicator

    // http://howtomakeiphoneapps.com/home/2009/7/14/how-to-make-your-iphone-app-send-email-with-attachments.html
    BOOL success = NO;
    if ([MFMailComposeViewController canSendMail]) {
        // TODO: autorelease pool needed ?
        NSData* database = [NSData dataWithContentsOfFile: filePath];

        if (database != nil) {
            MFMailComposeViewController* picker = [[MFMailComposeViewController alloc] init];
            picker.mailComposeDelegate = self;
            [picker setSubject:[NSString stringWithFormat: @"%@ %@", [[UIDevice currentDevice] model], [filePath lastPathComponent]]];

            NSString* filename = [filePath lastPathComponent];
            [picker addAttachmentData: database mimeType:@"application/octet-stream" fileName: filename];
            NSString* emailBody = @"Attached is the SQLite data from my iOS device.";
            [picker setMessageBody:emailBody isHTML:YES];

            [self presentModalViewController:picker animated:YES];
            success = YES;
            [picker release];
        }
    }

    if (!success) {
        UIAlertView* warning = [[UIAlertView alloc] initWithTitle: @"Error"
                                                          message: @"Unable to send attachment!"
                                                         delegate: self
                                                cancelButtonTitle: @"Ok"
                                                otherButtonTitles: nil];
        [warning show];
        [warning release];
    }
} 
```

然后，我有一个封装了我所有的 SQLite 数据的类。这个类是唯一一个进行 sqlite 调用的类。在这个类中，我有一种方法可以将数据导出到我的应用程序**缓存**目录中的 CSV 文件中。上面代码中的变量`sqliteDb`就是这个类的一个实例。以下是导出数据的方法：

```
-(void) exportCsv: (NSString*) filename
{
    // We record this filename, because the app deletes it on exit
    self.tempFile = filename;

    NSAutoreleasePool* pool = [[NSAutoreleasePool alloc] init];
    // Setup the database object
    sqlite3* database;

    // Open the database from the users filessytem
    if (sqlite3_open([self.databasePath UTF8String], &database) == SQLITE_OK)
    {
        [self createTempFile: filename];
        NSOutputStream* output = [[NSOutputStream alloc] initToFileAtPath: filename append: YES];
        [output open];
        if (![output hasSpaceAvailable]) {
            NSLog(@"No space available in %@", filename);
            // TODO: UIAlertView?
        } else {
            NSString* header = @"Source,Time,Latitude,Longitude,Accuracy\n";
            NSInteger result = [output write: [header UTF8String] maxLength: [header length]];
            if (result <= 0) {
                NSLog(@"exportCsv encountered error=%d from header write", result);
            }

            BOOL errorLogged = NO;
            NSString* sqlStatement = @"select timestamp,latitude,longitude,horizontalAccuracy from my_sqlite_table";

            // Setup the SQL Statement and compile it for faster access
            sqlite3_stmt* compiledStatement;
            if (sqlite3_prepare_v2(database, [sqlStatement UTF8String], -1, &compiledStatement, NULL) == SQLITE_OK)
            {
                 // Loop through the results and write them to the CSV file
                 while (sqlite3_step(compiledStatement) == SQLITE_ROW) {
                     // Read the data from the result row
                     NSInteger secondsSinceReferenceDate = (NSInteger)sqlite3_column_double(compiledStatement, 0);
                     float lat = (float)sqlite3_column_double(compiledStatement, 1);
                     float lon = (float)sqlite3_column_double(compiledStatement, 2);
                     float accuracy = (float)sqlite3_column_double(compiledStatement, 3);

                     if (lat != 0 && lon != 0) {
                         NSDate* timestamp = [[NSDate alloc] initWithTimeIntervalSinceReferenceDate: secondsSinceReferenceDate];
                         NSString* line = [[NSString alloc] initWithFormat: @"%@,%@,%f,%f,%d\n",
                                       table, [dateFormatter stringFromDate: timestamp], lat, lon, (NSInteger)accuracy];
                         result = [output write: [line UTF8String] maxLength: [line length]];
                         if (!errorLogged && (result <= 0)) {
                             NSLog(@"exportCsv write returned %d", result);
                             errorLogged = YES;
                         }
                         [line release];
                         [timestamp release];
                     }
                     // Release the compiled statement from memory
                     sqlite3_finalize(compiledStatement);
                 }
            }
        }
        [output close];
        [output release];
    }

    sqlite3_close(database);
    [pool release];
}

-(void) createTempFile: (NSString*) filename {
    NSFileManager* fileSystem = [NSFileManager defaultManager];
    [fileSystem removeItemAtPath: filename error: nil];

    NSMutableDictionary* attributes = [[NSMutableDictionary alloc] init];
    NSNumber* permission = [NSNumber numberWithLong: 0640];
    [attributes setObject: permission forKey: NSFilePosixPermissions];
    if (![fileSystem createFileAtPath: filename contents: nil attributes: attributes]) {
        NSLog(@"Unable to create temp file for exporting CSV.");
        // TODO: UIAlertView?
    }
    [attributes release];
} 
```

我的代码正在导出位置信息数据库。显然，在内部`exportCsv`，您需要将我的 sqlite 调用替换为适合您的数据库内容的调用。

此外，代码将数据存储在临时文件中。您可能需要决定何时清除这些临时文件。

显然，这段代码是在 ARC 可用之前编写的。根据需要进行调整。

# c# - 如何开发 Dicom Web 查看器

> ID：11132905
> 
> 赞同：2
> 
> 时间：2012-06-21T06:46:35.337
> 
> 标签：c#, wpf, wcf, silverlight, dicom

我的任务是为 DICOM 图像开发 Web 查看器。因为这是一个小型/演示项目，所以我没有在 DICOM 成像服务器中注册。所以我打算从网上下载一些示例 DICOM 图像并开始处理它们。我已经经历了[一种基于服务的医疗内部网络中医学图像分发的方法。

Eleni Kaldoudi，Dimosthenis Karaiskakis] [1](http://www.researchgate.net/publication/7357975_A_service_based_approach_for_medical_image_distribution_in_healthcare_Intranets)那里提到了**“DIM Web 服务”**，![DIM 网络服务](../Images/d724009179d50d8ac0f7abe3665f5c25.png) 我没有得到该服务是什么。该预定义服务是由任何第三方或 DICOM 图像服务器本身提供的，还是我必须从头开始开发？即使我用谷歌搜索它，我也没有得到太多帮助。从初步调查中我发现，我猜我的任务需要以下内容：

1.  一种开发 UI 以在 Web 浏览器中运行的技术。（我为此选择了 Silverlight）
2.  很少有 Web 服务向服务器发送请求并从服务器获取响应（我为此选择 WCF）
3.  一个 Web 服务器，用于在我的本地机器中保存一些示例 DICOM 图像（Apache Tomcat/IIS 服务器）
4.  还有一种用于后端编码的语言（我之前研究过的 C#.Net，我发现它最适合我）。

任何人都可以指导我找到我的作业的确切要求，或者我上面写的对我来说就足够了吗？任何想法或帮助将不胜感激。提前致谢。

**更新：** 如果我错了，请纠正我。正如我在我的问题中提到的，我正在开发一个小型演示类型的应用程序。所以我使用我的本地机器作为我的 DICOM 成像服务器，这就是为什么我在发送/获取文本和图像时不关心安全性和偏离路线的原因，所以我认为带有 HTTP/SOAP 协议传输的 XML 格式将是最适合我的应用程序。我暂时不关心安全性和性能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T09:13:54.627

我们正在使用 Leadtools HTML5 零足迹 DICOM 查看器来显示来自 PACS 的 DICOM 图像。有关详细信息，请参阅以下链接： http: [//www.codeproject.com/Articles/397527/HTML5-Zero-Footprint-Viewer-for-DICOM-and-PACS](http://www.codeproject.com/Articles/397527/HTML5-Zero-Footprint-Viewer-for-DICOM-and-PACS)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T07:00:55.047

您需要弄清楚您的传输策略和方法是什么，并且由于它是基于图像的 Web 转换，您必须弄清楚传输协议。我认为图像分发将是某种大文件，我不建议使用 WCF，因为它的压缩和解压缩策略非常差且效率低下。您可以使用带有自定义字节压缩模式的套接字。

# c# - 在 Crystal Report 中仅从 For 循环加载最后一条记录

> ID：11132914
> 
> 赞同：0
> 
> 时间：2012-06-21T06:47:21.477
> 
> 标签：c#, crystal-reports

我在 C# Web 应用程序中使用水晶报表。水晶报告从 For 循环加载最后一条记录存在问题。

我将产品代码作为代码存储在for循环中。并根据该单个或多个代码，水晶报告显示信息。那个产品。

我用....

```
for (int i = 0; i < code.Length; i++)
    {
        string str = "select crbal*-1 as crbal, glname, contprsn, refby, glphone1, glcity, glphone2, email, crlimit, restorddueamt  from db1.dbo.glmast WHERE drgroup='A3402' and crbal<>0 and glcode="+code[i]+ "";

        SqlDataAdapter ad = new SqlDataAdapter(str, con2);
        DataSet ds = new DataSet();
        ad.Fill(ds);

        path = Server.MapPath("ERP_REPORT_MAIN.rpt");
        cr = new ReportDocument();
        cr.Load(path);

        cr.SetDataSource(ds.Tables[0]);
        CrystalReportViewer1.ReportSource = cr;
    } 
```

如果，for 循环中有两个代码，它只显示最后一条记录。请帮我。

谢谢和问候... Mitesh

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T07:35:18.413

我会修改代码，并做一些轻微的效率改进：

```
string query = "select crbal*-1 as crbal, glname, contprsn, refby, glphone1, glcity,    glphone2, email, crlimit, restorddueamt  from db1.dbo.glmast WHERE drgroup='A3402' and crbal<>0 and glcode in (

for (int i = 0; i < code.Length; i++)
{
    query += code[i];
    if (i != code.Length -1)
        query += ","
    else
        query += ")";
}

SqlDataAdapter ad = new SqlDataAdapter(str, con2);
DataSet ds = new DataSet();
ad.Fill(ds);

path = Server.MapPath("ERP_REPORT_MAIN.rpt");
cr = new ReportDocument();
cr.Load(path);

cr.SetDataSource(ds.Tables[0]);
CrystalReportViewer1.ReportSource = cr; 
```

# jquery - Asp.net MVC 中的 Jquery 分页滚动

> ID：11132919
> 
> 赞同：0
> 
> 时间：2012-06-21T06:47:34.050
> 
> 标签：jquery, asp.net-mvc

我试图搜索 2 天关于如何在 asp.net mvc 项目中进行分页滚动。但我只是发现不适合我的结果。

我正在使用 asp.net mvc 2，并通过 JSON 从控制器中检索所有数据，并将 JSON 结果显示在我的 mvc 项目视图中。结果，我的视图中显示了许多产品（我将产品放在表格中）。所以我想做一个分页滚动以在用户滚动到元素之外时自动在屏幕底部加载新内容，就像 Facebook 对其状态更新所做的那样。

这是一些代码显示了我如何在部分视图中显示 JSON：

```
<script type="text/javascript" language="javascript">
 $(document).ready(function () {
   var url = '<%: Url.Content("~/") %>' + "ProductListing/AllProductListing";
   var $parent = $("#productlist").empty();

   $parent.append('<br/><table id="myTable" cellpadding="0" cellspacing="0" width="100%" class="productlist" style="margin-left:4px; padding-top:2px;"><tbody>');

   var loading = $.getJSON(url,function (product) {
   if(product.ja.length == 0){
     $('#loading').hide();
     $("#productlist").html("<br/><br/><br/><br/><b>There is no product in this category.</b>");
   }
   while (k < loopK) {
     var count_item = 0;
     $.each(product.ja, function (index, value) {
      //blah blah blah ....

     });
    }
  });
});
</script> 
```

这段代码运行良好。

请有任何想法或样品。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T07:07:40.413

Rob Conery 写了一篇关于这个主题的[详细博客文章。](http://wekeroad.com/2009/11/27/paging-records-sucks--use-jquery-to-scroll-just-in-time)

# c# - 运行涵盖此方法/类的所有测试

> ID：11132927
> 
> 赞同：2
> 
> 时间：2012-06-21T06:47:53.790
> 
> 标签：c#, unit-testing, tdd, resharper, dotcover

在对方法进行更改后，我反复做的一件事是我很快想要运行涵盖此方法的所有测试。

你知道有一个工具可以给我这个按钮/菜单条目吗？*运行影响此方法*的测试并*运行影响此类的测试*？

我安装了 dotCover 和 ReShaper，但在任何地方都看不到这样的选项。

我知道有像 NCrunch 或 Mighty Moose 这样的持续测试工具会在后台持续运行我的所有测试，但我不确定我是否已经准备好进行这些测试。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T07:47:13.967

1.  据此，Jetbrains 将在其下一个版本中添加[此](http://youtrack.jetbrains.com/issue/DCVR-3313)功能。
2.  你可以试试微软的[Test Impact Analysis](http://blogs.msdn.com/b/phuene/archive/2009/12/07/test-impact-analysis-in-visual-studio-2010.aspx)，但我相信它只支持 MSTest （据说它会在 VS2012 中改变）。
3.  [Typemock Isolator 7](http://www.typemock.com/isolator-product-page)具有此功能，称为 AutoRunner。

披露：我曾经为 Typemock 工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T07:47:46.460

如果您正确划分了测试，例如针对特定行为的所有测试都存在于类/类包中，并且它们都很快..您可以运行一个子集。不是 MS 测试影响单元测试的忠实粉丝，但它似乎是你想要的。（端到端测试很棒，但遗憾的是还没有工作）

我宁愿努力让整个套件在几分钟内在配置良好的笔记本电脑上执行。我想在每次更改时都运行我的所有测试（我想要的唯一优化是首先运行前一次运行中失败的测试——一些工具支持这一点）。我刚刚观看了 NDC Oslo 视频，其中 Bob 叔叔展示了 Fitnesse 的整个套件（单元 + 验收）在 4 分钟内完成。2 在带有 SSD 的笔记本电脑上。

# c# - 具有格式化值的 TextBoxFor 扩展显示 0

> ID：11132928
> 
> 赞同：0
> 
> 时间：2012-06-21T06:47:57.657
> 
> 标签：c#, asp.net-mvc-3, razor, html-helper

我不能使用 EditorFor，因为我的输入有一些其他属性，例如`readonly`，`disable`因此`class`我正在使用 TextBoxFor 的扩展名。我需要显示格式化的数值，所以我的扩展方法定义为

```
public static MvcHtmlString FieldForAmount<TModel, TValue>(
    this HtmlHelper<TModel> htmlHelper, 
    Expression<Func<TModel, TValue>> expression)
{
    MvcHtmlString html = default(MvcHtmlString);
    Dictionary<string, object> newHtmlAttrib = new Dictionary<string, object>();

    newHtmlAttrib.Add("readonly", "readonly");
    newHtmlAttrib.Add("class", "lockedField amountField");

    var _value = ModelMetadata.FromLambdaExpression(expression, 
                     htmlHelper.ViewData).Model;
    newHtmlAttrib.Add("value", string.Format(Formats.AmountFormat, value));

    html = System.Web.Mvc.Html.InputExtensions.TextBoxFor(htmlHelper, 
        expression, newHtmlAttrib);
    return html;
} 
```

`Formats.AmountFormat`定义为`"{0:#,##0.00##########}"`。

假设`_value`是 2， `newHtmlAttrib`将其显示为`2.00`但结果`html`显示`0`，它始终显示，`0`无论任何值。我在哪里错了，或者我能做些什么来修复它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T06:56:19.420

`TextBox`如果要指定格式，则应使用帮助程序：

```
public static MvcHtmlString FieldForAmount<TModel, TValue>(
    this HtmlHelper<TModel> htmlHelper,
    Expression<Func<TModel, TValue>> expression
)
{
    var htmlAttributes = new Dictionary<string, object>
    {
        { "readonly", "readonly" },
        { "class", "lockedField amountField" },
    };

    var metadata = ModelMetadata.FromLambdaExpression(expression, htmlHelper.ViewData);
    var value = string.Format(Formats.AmountFormat, metadata.Model);
    var name = ExpressionHelper.GetExpressionText(expression);
    var fullHtmlFieldName = htmlHelper.ViewContext.ViewData.TemplateInfo.GetFullHtmlFieldName(name);

    return htmlHelper.TextBox(fullHtmlFieldName, value, htmlAttributes);
} 
```

# python - 在菜单中显示 gtk.Calendar？

> ID：11132929
> 
> 赞同：8
> 
> 时间：2012-06-21T06:48:01.640
> 
> 标签：python, ubuntu, gtk, pygtk

![日历菜单截图](../Images/3eb1e469f86cecae682ea38de82e3707.png)

我想构建一个带有用于选择日期的菜单项的上下文菜单。（用例是在树视图中选择一堆项目，然后为所有项目设置新的截止日期。）

因为 menuitem 是 Gtk.Bin，所以我可以指定任何小部件来代替标签。但是，我似乎无法与小部件进行*交互*。如果我单击菜单上的任何位置，菜单项就会得到单击。所以，我不能选择一个特定的日期，也不能导航几个月或几年。如何让日历获取鼠标活动？

此外，日历外部有多余的填充，当将鼠标悬停在它上面时，它会变成橙色。如何删除填充和/或不做橙色突出显示？

```
#!/usr/bin/env python

import gobject
import pygtk
pygtk.require('2.0')
import gtk
import time

class ContextMenu(gtk.Menu):
    def __init__(self):
        gtk.Menu.__init__(self)

    def add_calendar_submenu_item(self, text, callback, uuids, data=None):
        calendar = gtk.Calendar()
        calendar.show()
        calendar_item = gtk.MenuItem()
        calendar_item.add(calendar)
        calendar_item.show()

        submenu = gtk.Menu()
        submenu.append(calendar_item)
        submenu_item = gtk.MenuItem("%s..." %(text))
        submenu_item.set_submenu(submenu)
        submenu_item.show()
        submenu_item.connect("activate", self.on_calendar_activate)
        self.append(submenu_item)

    def on_calendar_activate(self, widget):
        print "activate"

if __name__ == "__main__":
    class CalendarExample:
        def __init__(self):
            window = gtk.Window(gtk.WINDOW_TOPLEVEL)
            window.set_title("Calendar Example")
            window.set_border_width(5)
            window.set_size_request(200, 100)
            window.set_resizable(False)
            window.stick()
            window.connect("destroy", lambda x: gtk.main_quit())

            menu = ContextMenu()
            menu.add_calendar_submenu_item("date", self.on_date, ['123'])

            root_menu = gtk.MenuItem("Calendar Menu")
            root_menu.show()
            root_menu.set_submenu(menu)

            vbox = gtk.VBox(False, 10)
            window.add(vbox)
            vbox.show()

            menu_bar = gtk.MenuBar()
            vbox.pack_start(menu_bar, False, False, 2)
            menu_bar.append (root_menu)
            menu_bar.show()

            button = gtk.Button("Push Me")
            button.connect("clicked", self.on_menu_push, menu)
            vbox.pack_start(button, False, True, 10)
            button.show()

            window.show()

        def on_menu_push(self, widget, menu):
            menu.popup(None, None, None, 0, 0)

        def on_action(self, widget, uuids, text):
            print "Item %s pressed" %(text)

        def on_date(self, widget, uuids, text):
            print "Calendar activated with %s" %(text)

    CalendarExample()
    gtk.main() 
```

[更新]

我要做的是类似于 Ubuntu 的指示器菜单日期/时间日历。

![Ubuntu 日历](../Images/fb2fdbe1269fde19bfa1f0c2e266b181.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-29T11:34:29.140

正如[ilius](https://stackoverflow.com/users/495838/ilius)在评论中已经提到的那样，菜单不是为容纳任意小部件而设计的。[在这个 SO post](https://stackoverflow.com/questions/4350470/how-to-put-arbitrary-widgets-into-a-gtk-menu)中也进行了讨论。您将不得不使用弹出窗口选项。
您尝试模拟的 Ubuntu 中的时钟小程序使用弹出窗口。您可以使用`xwininfo`. 如果您显示了日历，然后选择它（用于`xwininfo`实用程序），您可以看到它是一个单独的窗口，与面板不同。
此外，这可以通过查看[源](http://git.gnome.org/browse/gnome-panel/tree)来确认。显示的时钟小程序是一个[切换按钮](http://git.gnome.org/browse/gnome-panel/tree/applets/clock/clock.c#n878)，它在[切换](http://git.gnome.org/browse/gnome-panel/tree/applets/clock/clock.c#n805)时显示/隐藏带有日历的弹出窗口（更准确地说，它是一个自定义小部件[`CalendarWindow`](http://git.gnome.org/browse/gnome-panel/tree/applets/clock/calendar-window.h)它在创建时适当地扩展`GtkWindow`和[添加）。`GtkCalendar`](http://git.gnome.org/browse/gnome-panel/tree/applets/clock/calendar-window.c#n1412)基于您的代码的相同想法的粗略实现如下（请原谅我有限的python知识）：

```
#!/usr/bin/env python

import gobject
import pygtk
pygtk.require('2.0')
import gtk
import time

class CalendarExample:
    def __init__(self):
        window = gtk.Window(gtk.WINDOW_TOPLEVEL)
        window.set_title("Calendar Example")
        window.set_border_width(5)
        window.set_size_request(200, 100)
        window.set_resizable(False)
        window.stick()
        window.connect("destroy", lambda x: gtk.main_quit())

        vbox = gtk.VBox(False, 10)
        window.add(vbox)

        # Could have used WINDOW_POPUP to create below window, but trying to emulate the same properties as the window
        # in applet.
        cal_window = gtk.Window(gtk.WINDOW_TOPLEVEL)
        cal_window.set_decorated(False)
        cal_window.set_resizable(False)
        cal_window.set_type_hint(gtk.gdk.WINDOW_TYPE_HINT_DOCK)
        cal_window.stick()
        cal_vbox = gtk.VBox(False, 10)
        cal_window.add(cal_vbox)
        cal_vbox.pack_start(gtk.Calendar(), True, False, 0)
        cal_vbox.pack_start(gtk.Button("Dummy locations"), True, False, 0)

        toggle_button = gtk.ToggleButton("Show Calendar")
        vbox.pack_start(toggle_button, False, True, 10)
        toggle_button.connect("toggled", self.on_toggle, cal_window)

        # Track movements of the window to move calendar window as well
        window.connect("configure-event", self.on_window_config, toggle_button, cal_window)
        window.show_all()

    # Calendar window co ordinates without off-screen correction:
    #         Window origin (x, y)
    #          |
    #          V
    #          ---------------------------------
    #          | Main Window                   |
    #          |                               |
    #          |                               |
    #          |Toggle button's (x, y)         |
    #          |(relative to parent window)    |
    #          | |                             |
    #          | V                             |
    #          |  .........................    |
    # Calendar | |  Toggle Button          |   |
    # window's | |                         |   |
    # (x, y)---+> .........................    |
    #          |(Calendar window will be here) |
    #          |                               |
    #          |                               |
    #          ---------------------------------
    #  Calendar Window's screen coordinates:
    #   x = Window's origin x + Toggle Button's relative x
    #   y = Window's origin y + Toggle Button's relative y + Toggle Button's height

    # "toggle" callback which shows & hides calendar window.
    def on_toggle(self, toggle_button, cal_window):
        if toggle_button.get_active():
            rect = toggle_button.get_allocation()
            main_window = toggle_button.get_toplevel()
            [win_x, win_y] = main_window.get_window().get_origin()
            cal_x = win_x + rect.x
            cal_y = win_y + rect.y + rect.height
            [x, y] = self.apply_screen_coord_correction(cal_x, cal_y, cal_window, toggle_button)
            cal_window.move(x, y)
            cal_window.show_all()
            toggle_button.set_label("Hide Calendar")
        else:
            cal_window.hide_all()
            toggle_button.set_label("Show Calendar")

    # "configure-event" callback of main window, try to move calendar window along with main window.
    def on_window_config(self, widget, event, toggle_button, cal_window):
        # Maybe better way to find the visiblilty
        if cal_window.get_mapped():
            rect = toggle_button.get_allocation()
            cal_x = event.x + rect.x
            cal_y = event.y + rect.y + rect.height
            [x, y] = self.apply_screen_coord_correction(cal_x, cal_y, cal_window, toggle_button)
            cal_window.move(x, y)

    # This function "tries" to correct calendar window position so that it is not obscured when
    # a portion of main window is off-screen.
    # Known bug: If the main window is partially off-screen before Calendar window
    # has been realized then get_allocation() will return rect of 1x1 in which case
    # the calculations will fail & correction will not be applied
    def apply_screen_coord_correction(self, x, y, widget, relative_widget):
        corrected_y = y
        corrected_x = x
        rect = widget.get_allocation()
        screen_w = gtk.gdk.screen_width()
        screen_h = gtk.gdk.screen_height()
        delta_x = screen_w - (x + rect.width)
        delta_y = screen_h - (y + rect.height)
        if delta_x < 0:
            corrected_x += delta_x
        if corrected_x < 0:
            corrected_x = 0
        if delta_y < 0:
            corrected_y = y - rect.height - relative_widget.get_allocation().height
        if corrected_y < 0:
            corrected_y = 0
        return [corrected_x, corrected_y]

if __name__ == "__main__":
    CalendarExample()
    gtk.main() 
```

希望这可以帮助！

# c++ - C++ 类“未声明的标识符”

> ID：11132930
> 
> 赞同：0
> 
> 时间：2012-06-21T06:48:02.543
> 
> 标签：c++, class

这真是令人沮丧，我尝试了我的类和构造函数的多种变体，筛选了谷歌结果页面和该网站上的其他问题，但我无法弄清楚。我相信这个错误很简单，我忽略了。

错误代码：

```
1>main.cpp(60): error C2065: 'Student' : undeclared identifier
1>main.cpp(60): error C2146: syntax error : missing ';' before identifier 'newStudent'
1>main.cpp(60): error C3861: 'newStudent': identifier not found 
```

学生.h

```
#ifndef STUDENT_H
#define STUDENT_H
class Student {  
    private:
    static const int SIZE = 7;         // initial size of the array
    int *Students;                     // Students will point to the dynamically allocated array
    //int numStudents;                   // number of students currently in the list
    int rosterSize;                    // the current size of the roster
    int student_id;
    string name;
    string classification;
    public:
    Student();                         // constructor; initialize the list to be empty
    ~Student();
        void set_id(int);
        void set_name(string);
        void set_class(string);
            int print_id();
            string print_name();
            string print_class();
    //void enrollStudent();              
    //void Print(ostream &output) const; // print the list to output
};
#endif 
```

学生.cpp

```
 #include <iostream>
#include <string>

#include "student.h"

#define PROMPT "class> "
using namespace std;

Student::Student(){    // declared here right?
    student_id = 0;
    name = "";
    classification = "";
}

Student::~Student(){
    //delete Student
}

void Student::set_id( int i ){
    student_id = i;
}

void Student::set_name( string n ){
    name = n;
}

void Student::set_class( string c ){
    classification = c;
}

int Student::print_id(){
    return student_id;
}

string Student::print_name(){
    return name;
}

string Student::print_class(){
    return classification;
} 
```

主文件

```
#include <iostream>
#include <string>
#include "student.h"

#define PROMPT "class> "
using namespace std;

//**** Implement Error Handling ****\\

enum errorType {
    UNKNOWN_ERROR,
    INPUT_ERROR,
    HANDLER,
    NUM_ERRORS
};

// error messages

string errorMessage[NUM_ERRORS]= {
    "Unknown Error\n",
    "Input Error\n",
};

// error handler

void handleError(errorType err) {
    if(err > 0 && err < NUM_ERRORS)
        cout<< "Error: "<< errorMessage[err];
    else cout<< "Error: "<< errorMessage[UNKNOWN_ERROR];
}

//**** END Error Handling ****\\

void getInput() {

    int id; string n, c;
    cin>>id>>n>>c; 
    //cout<<id<<"-"<<n<<"-"<<c<<endl;
    Student newStudent();      //****WORK DAMN U!
    //set_id(id);
    //print_id();

    return;
}

int main() {
    //Student newStudent();   /* <-- why doesn't this work?!*/
    string input = "";
    bool finished = false;

    cout<<PROMPT; // prompt the user
    while(!finished) {
        if(input!="") cout<<PROMPT;
        cin>>input;
        if(input=="enroll") {
            cout<<PROMPT<<"Enroll student:"<<endl;
            getInput();
        }
        else if(input=="drop") {
            cout<<PROMPT<<"Enter ID:"<<endl;
        }
        else if(input=="roster") {
            cout<<"This will print formatted list of students"<<endl;
        }
        else if(input=="quit") {
            finished=true;
        }
        else handleError(errorType(1));
    }
} 
```

正如一个注释，我的教授说将#include student.h 添加
到我的main.cpp 将解决我的问题。显然不是因为我将它包含在我的 student.cpp 中，所以谢谢。ಠ_ಠ</p>

tl;博士这里是一个较小的准系统版本，它得到相同的错误：

```
#include<iostream>
#include<string>
#define PROMPT "class> "

using namespace std;

class Student {
private:
int student_id;
string name;
string classification;
public:
Student();    // constructor
~Student();
void set_id(int);
int print_id();
};

Student::Student(){
    student_id = 0;
    name = "";
    classification = "";
}

Student::~Student(){
//delete Student
}

void Student::set_id( int i ){
    student_id = i;
}

int Student::print_id(){
    return student_id;
}

void messenger(){
int id;

   Student newStudent();

   cin>>id;      //this will drop the name and class
   newStudent.set_id(id);
   newStudent.print_id();
return;
}

void main() {
//Student newStudent();
string input="";
bool finished=false;

cout<<PROMPT; // prompt the user
        while(!finished) {
                if(input!="") cout<<PROMPT;
                cin>>input;
                if(input=="enroll") {
                        cout<<PROMPT<<"Enroll student:"<<endl;
                        messenger();
                        //cin>>input;
                        //newStudent.enroll(input );
                }
                else if(input=="drop") {
                        cout<<PROMPT<<"Enter ID:"<<endl;
                }
                else if(input=="roster") {
                        cout<<"This will print formatted list of students"<<endl;
                }
                else if(input=="quit") {
                        finished=true;
                }
        }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T06:53:31.847

您是否尝试过初始化不带括号的 Student 对象？

```
Student newStudent; 
```

这将调用默认构造函数。你做了什么

```
Student newStudent(); 
```

就是声明一个不带参数的函数，返回一个Student对象。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-21T06:49:33.053

> 正如一个注释，我的教授说添加`#include student.h`
> 到我`main.cpp`会解决我的问题。显然不是因为我把它包含在我的`student.cpp`

您`main()`需要知道`Student`能够创建其对象的类型是什么。
所以你的教授是对的。

每个源文件都是单独编译的，因此编译器在编译`main.cpp`时需要***查看***类型的定义。只有在包含定义类型`Student`的头文件时才能这样做。请注意，包含标题与需要查看定义的事实无关，因为它们都被编译为单独的文件。`student.``main.cpp``student.cpp``main.cpp`

# android - 旋转屏幕表格布局

> ID：11132936
> 
> 赞同：0
> 
> 时间：2012-06-21T06:48:25.613
> 
> 标签：android

我有一个 TableLayout 小按钮和 8 个矩阵 8 个用 XML 描述，当我打开显示屏时，按钮看不到，我如何描述所有类型的屏幕，并且状态保留的所有元素都是可见的？

```
<?xml version="1.0" encoding="UTF-8"?>
    <TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/Table8"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:padding="20dp" >

        <TableRow
            android:id="@+id/tableRow1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="-4dp"
            android:layout_marginBottom="-4dp" >

            <Button
                android:id="@+id/button1"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:layout_marginRight="-4dp"
                android:layout_marginLeft="-4dp"
                android:text="" />

            <Button
                android:id="@+id/button2"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:layout_marginRight="-4dp"
                android:layout_marginLeft="-4dp"
                android:text="" />

            <Button
                android:id="@+id/button3"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:layout_marginRight="-4dp"
                android:layout_marginLeft="-4dp"
                android:text="" />

            <Button
                android:id="@+id/button4"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:layout_marginRight="-4dp"
                android:layout_marginLeft="-4dp"
                android:text="" />

            <Button
                android:id="@+id/button5"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:layout_marginRight="-4dp"
                android:layout_marginLeft="-4dp"
                android:text="" />

            <Button
                android:id="@+id/button6"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:layout_marginRight="-4dp"
                android:layout_marginLeft="-4dp"
                android:text="" />

            <Button
                android:id="@+id/button7"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:layout_marginRight="-4dp"
                android:layout_marginLeft="-4dp"
                android:text="" />

            <Button
                android:id="@+id/button8"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:layout_marginRight="-4dp"
                android:layout_marginLeft="-4dp"
                android:text="" />

        </TableRow>

        <TableRow
            android:id="@+id/tableRow2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="-4dp"
            android:layout_marginBottom="-4dp" >

            <Button
                android:id="@+id/button9"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:layout_marginRight="-4dp"
                android:layout_marginLeft="-4dp"
                android:text="" />

            <Button
                android:id="@+id/button10"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:layout_marginRight="-4dp"
                android:layout_marginLeft="-4dp"
                android:text="" />

            <Button
                android:id="@+id/button11"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:layout_marginRight="-4dp"
                android:layout_marginLeft="-4dp"
                android:text="" />

            <Button
                android:id="@+id/button12"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:layout_marginRight="-4dp"
                android:layout_marginLeft="-4dp"
                android:text="" />

            <Button
                android:id="@+id/button13"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:layout_marginRight="-4dp"
                android:layout_marginLeft="-4dp"
                android:text="" />

            <Button
                android:id="@+id/button14"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:layout_marginRight="-4dp"
                android:layout_marginLeft="-4dp"
                android:text="" />

            <Button
                android:id="@+id/button15"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:layout_marginRight="-4dp"
                android:layout_marginLeft="-4dp"
                android:text="" />

            <Button
                android:id="@+id/button16"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:layout_marginRight="-4dp"
                android:layout_marginLeft="-4dp"
                android:text="" />

        </TableRow>

        <TableRow
            android:id="@+id/tableRow3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="-4dp"
            android:layout_marginBottom="-4dp" >

            <Button
                android:id="@+id/button17"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:layout_marginRight="-4dp"
                android:layout_marginLeft="-4dp"
                android:text="" />

            <Button
                android:id="@+id/button18"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:layout_marginRight="-4dp"
                android:layout_marginLeft="-4dp"
                android:text="" />

            <Button
                android:id="@+id/button19"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:layout_marginRight="-4dp"
                android:layout_marginLeft="-4dp"
                android:text="" />

            <Button
                android:id="@+id/button20"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:layout_marginRight="-4dp"
                android:layout_marginLeft="-4dp"
                android:text="" />

            <Button
                android:id="@+id/button21"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:layout_marginRight="-4dp"
                android:layout_marginLeft="-4dp"
                android:text="" />

            <Button
                android:id="@+id/button22"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:layout_marginRight="-4dp"
                android:layout_marginLeft="-4dp"
                android:text="" />

            <Button
                android:id="@+id/button23"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:layout_marginRight="-4dp"
                android:layout_marginLeft="-4dp"
                android:text="" />

            <Button
                android:id="@+id/button24"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:layout_marginRight="-4dp"
                android:layout_marginLeft="-4dp"
                android:text="" />

        </TableRow>

        <TableRow
            android:id="@+id/tableRow4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="-4dp"
            android:layout_marginBottom="-4dp" >

            <Button
                android:id="@+id/button25"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:layout_marginRight="-4dp"
                android:layout_marginLeft="-4dp"
                android:text="" />

            <Button
                android:id="@+id/button26"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:layout_marginRight="-4dp"
                android:layout_marginLeft="-4dp"
                android:text="" />

            <Button
                android:id="@+id/button27"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:layout_marginRight="-4dp"
                android:layout_marginLeft="-4dp"
                android:text="" />

            <Button
                android:id="@+id/button28"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:layout_marginRight="-4dp"
                android:layout_marginLeft="-4dp"
                android:text="" />

            <Button
                android:id="@+id/button29"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:layout_marginRight="-4dp"
                android:layout_marginLeft="-4dp"
                android:text="" />

            <Button
                android:id="@+id/button31"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:layout_marginRight="-4dp"
                android:layout_marginLeft="-4dp"
                android:text="" />

            <Button
                android:id="@+id/button30"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:layout_marginRight="-4dp"
                android:layout_marginLeft="-4dp"
                android:text="" />

            <Button
                android:id="@+id/button32"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:layout_marginRight="-4dp"
                android:layout_marginLeft="-4dp"
                android:text="" />

        </TableRow>

        <TableRow
            android:id="@+id/tableRow5"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" 
            android:layout_marginTop="-4dp"
            android:layout_marginBottom="-4dp">

            <Button
                android:id="@+id/button33"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:layout_marginRight="-4dp"
                android:layout_marginLeft="-4dp"
                android:text="" />

            <Button
                android:id="@+id/button34"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:layout_marginRight="-4dp"
                android:layout_marginLeft="-4dp"
                android:text="" />

            <Button
                android:id="@+id/button35"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:layout_marginRight="-4dp"
                android:layout_marginLeft="-4dp"
                android:text="" />

            <Button
                android:id="@+id/button36"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:layout_marginRight="-4dp"
                android:layout_marginLeft="-4dp"
                android:text="" />

            <Button
                android:id="@+id/button37"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:layout_marginRight="-4dp"
                android:layout_marginLeft="-4dp"
                android:text="" />

            <Button
                android:id="@+id/button38"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:layout_marginRight="-4dp"
                android:layout_marginLeft="-4dp"
                android:text="" />

            <Button
                android:id="@+id/button39"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:layout_marginRight="-4dp"
                android:layout_marginLeft="-4dp"
                android:text="" />

            <Button
                android:id="@+id/button40"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:layout_marginRight="-4dp"
                android:layout_marginLeft="-4dp"
                android:text="" />

        </TableRow>

        <TableRow
            android:id="@+id/tableRow6"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="-4dp"
            android:layout_marginBottom="-4dp" >

            <Button
                android:id="@+id/button41"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:layout_marginRight="-4dp"
                android:layout_marginLeft="-4dp"
                android:text="" />

            <Button
                android:id="@+id/button42"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:layout_marginRight="-4dp"
                android:layout_marginLeft="-4dp"
                android:text="" />

            <Button
                android:id="@+id/button43"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:layout_marginRight="-4dp"
                android:layout_marginLeft="-4dp"
                android:text="" />

            <Button
                android:id="@+id/button44"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:layout_marginRight="-4dp"
                android:layout_marginLeft="-4dp"
                android:text="" />

            <Button
                android:id="@+id/button45"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:layout_marginRight="-4dp"
                android:layout_marginLeft="-4dp"
                android:text="" />

            <Button
                android:id="@+id/button46"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:layout_marginRight="-4dp"
                android:layout_marginLeft="-4dp"
                android:text="" />

            <Button
                android:id="@+id/button47"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:layout_marginRight="-4dp"
                android:layout_marginLeft="-4dp"
                android:text="" />

            <Button
                android:id="@+id/button48"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:layout_marginRight="-4dp"
                android:layout_marginLeft="-4dp"
                android:text="" />

        </TableRow>

        <TableRow
            android:id="@+id/tableRow7"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="-4dp"
            android:layout_marginBottom="-4dp" >

            <Button
                android:id="@+id/button49"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:layout_marginRight="-4dp"
                android:layout_marginLeft="-4dp"
                android:text="" />

            <Button
                android:id="@+id/button50"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:layout_marginRight="-4dp"
                android:layout_marginLeft="-4dp"
                android:text="" />

            <Button
                android:id="@+id/button51"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:layout_marginRight="-4dp"
                android:layout_marginLeft="-4dp"
                android:text="" />

            <Button
                android:id="@+id/button52"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:layout_marginRight="-4dp"
                android:layout_marginLeft="-4dp"
                android:text="" />

            <Button
                android:id="@+id/button53"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:layout_marginRight="-4dp"
                android:layout_marginLeft="-4dp"
                android:text="" />

            <Button
                android:id="@+id/button54"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:layout_marginRight="-4dp"
                android:layout_marginLeft="-4dp"
                android:text="" />

            <Button
                android:id="@+id/button55"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:layout_marginRight="-4dp"
                android:layout_marginLeft="-4dp"
                android:text="" />

            <Button
                android:id="@+id/button56"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:layout_marginRight="-4dp"
                android:layout_marginLeft="-4dp"
                android:text="" />

        </TableRow>

        <TableRow
            android:id="@+id/tableRow8"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="-4dp"
            android:layout_marginBottom="-4dp" >

            <Button
                android:id="@+id/button57"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:layout_marginRight="-4dp"
                android:layout_marginLeft="-4dp"
                android:text="" />

            <Button
                android:id="@+id/button58"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:layout_marginRight="-4dp"
                android:layout_marginLeft="-4dp"
                android:text="" />

            <Button
                android:id="@+id/button59"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:layout_marginRight="-4dp"
                android:layout_marginLeft="-4dp"
                android:text="" />

            <Button
                android:id="@+id/button60"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:layout_marginRight="-4dp"
                android:layout_marginLeft="-4dp"
                android:text="" />

            <Button
                android:id="@+id/button61"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:layout_marginRight="-4dp"
                android:layout_marginLeft="-4dp"
                android:text="" />

            <Button
                android:id="@+id/button62"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:layout_marginRight="-4dp"
                android:layout_marginLeft="-4dp"
                android:text="" />

            <Button
                android:id="@+id/button63"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:layout_marginRight="-4dp"
                android:layout_marginLeft="-4dp"
                android:text="" />

            <Button
                android:id="@+id/button64"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:layout_marginRight="-4dp"
                android:layout_marginLeft="-4dp"
                android:text="" />

        </TableRow>

    </TableLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T07:02:43.447

我会这样做`Manifest.xml`：`activity`

```
<activity 
    android:name=".YourActivity"
    android:screenOrientation="landscape" /> 
```

好的，我认为您的按钮不在显示屏上。试试这个，转到你的布局并切换到图形布局，在那里你应该看到你的布局。从纵向切换到横向。现在您可以在顶部的右上角创建一个 onw 横向布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T07:03:00.143

可以尝试[链接中的重量总和](https://stackoverflow.com/questions/9952895/tablelayout-row-strech-shrink)

或者

将表格布局放在滚动视图中，您想要相同的布局......

# session - GWTP 中的服务器会话管理

> ID：11132937
> 
> 赞同：0
> 
> 时间：2012-06-21T06:48:30.727
> 
> 标签：session, gwt, rest

我对 GWTP 中的会话管理有几个基本问​​题。

1.  现在，我们在用户登录到应用程序时创建一个新会话。现在，我可以打开浏览器并使用令牌直接输入应用程序 url 而无需登录。它将向用户呈现 UI 页面而无需任何检查。现在，我们在服务器端进行了会话检查。因此，如果 UI 页面仅在渲染时进行服务器调用，我会知道会话无效，我可以将他重定向到登录页面。但是，我们如何处理 UI 页面没有任何服务器端逻辑并且用户直接粘贴带有该令牌的 URL 的情况。

我是否必须对来自 GWTP 演示者的每个页面请求进行服务器调用才能检查会话是否有效？或者我们还有其他方法吗？

1.  我没有将任何显式会话 ID 参数从 GWT 客户端传递到服务器。它只有 JSessionId 从浏览器自动传递到服务器。我们只是在服务器中执行 request.getSession() 并查看它是否为空（如果为空则不登录）。所以我希望我们对此没有任何安全问题。请确认。

2.  由于 GWT 客户端在 Android 上运行，服务器端逻辑使用 Jersey 公开为 Restful Web 服务，我们如何维护会话，因为 Restful WS 是无状态的。现在我们如何在这种情况下实现用户会话？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T08:21:59.623

不，您不需要每次都调用服务器。当你登录时，在登录的守护者类中只设置一次当前用户。@UseGatekeeper 注释只检查当前用户实例，不进行任何服务器调用。如果当前用户存在，那么它将从 canReveal 方法返回 true。并且它将允许访问 url 中的演示者名称令牌。

假设您不需要任何会话访问，然后使用 @NoGatekeeper 代替它。

```
>> let me know if the understanding is fine with your solution. Also, what about point 2 and 3 questions? 
```

A.1 U 可以使用 jsession 没有任何安全问题。A.2 通过使用 JSESSION id，你可以传递 jsession id 来进行服务器调用，因为如果服务器获得相同的会话，它就可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T07:01:09.100

尽管应始终在服务器端强制实施安全性，但您可能不希望普通用户查看您的管理页面。在 GWTP 中，您可以通过创建自定义 Gatekeeper 类来防止某些演示者暴露自己。

```
@Singleton
public class LoggedInGatekeeper implements Gatekeeper {  

  private final CurrentUser currentUser;

  @Inject
  public LoggedInGatekeeper (
      final CurrentUser currentUser ) {
    this.currentUser = currentUser;
  }

  @Override
  public boolean canReveal() {
    return currentUser.isLoggedIn();
  }
} 
```

然后，您只需将`@UseGatekeeper`注释添加到您要保护的每个演示者的代理中：

```
 @ProxyCodeSplit
  @NameToken("userSettings")
  @UseGatekeeper( LoggedInGatekeeper.class )
  public interface MyProxy extends ProxyPlace<MainPagePresenter> {} 
```

您必须确保您的自定义 ginjector 有一个`getLoggedInGatekeeper()`方法。在您的 ginjector 中，您还可以使用该`@DefaultGatekeeper`方法来注释 get 方法，该方法返回要用于任何未使用 注释的代理的 Gatekeeper 类`@UseGatekeeper`。如果您使用 a`@DefaultGatekeeper`并且想指定代理不应该使用任何网守，则`@NoGatekeeper`在该代理上使用注释。

您必须确保处理错误的演示者没有使用 Gatekeeper，否则您可能会遇到错误。出于这个原因，最好用`@NoGatekeeper`. 演示者处理错误是您的自定义 PlaceManager`revealErrorPlace`方法所揭示的错误。如果您不覆盖该方法，那么它就是您的方法所揭示的`revealDefaultPlace`方法。

有关更多信息，请参阅[GWTP 文档](http://code.google.com/p/gwt-platform/wiki/GettingStarted)

# java - 如何在java中显示本机文件系统文件/文件夹的“属性窗口”

> ID：11132939
> 
> 赞同：1
> 
> 时间：2012-06-21T06:48:40.980
> 
> 标签：java, windows, linux, macos, file-properties

我正在使用 java 1.6，我的 java 桌面应用程序在三个操作系统 Windows、Linux 和 MAC 上运行。使用我的应用程序，用户可以在`JTree`.

我的要求是用户可以根据本机文件系统查看文件/文件夹的“属性窗口”。假设如果用户在 Window 上运行我的 java 桌面应用程序，那么如果用户右键单击任何文件/文件夹并选择“属性”，那么这个窗口可以打开 -

![在此处输入图像描述](../Images/b1e8c6a0d0eec793a6f77bca200e5e9d.png)

如果万一我们无法使用 java 1.6 显示本机文件系统的文件/文件夹属性文件，那么有没有办法获取所有这些文件/文件夹属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T07:18:39.420

这是一个如何： [http ://docs.oracle.com/javase/tutorial/essential/io/fileAttr.html](http://docs.oracle.com/javase/tutorial/essential/io/fileAttr.html)

# svn - 如何限制用户访问中继

> ID：11132948
> 
> 赞同：0
> 
> 时间：2012-06-21T06:49:50.110
> 
> 标签：svn

我是 svn 的新手。在我的项目中，sombody 正在从 main 开始创建分支。所以我需要限制用户创建分支。所以任何人都可以帮助如何限制用户访问 main。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T08:43:08.063

在[SVN 书中](http://svnbook.red-bean.com/en/1.4/svn.serverconfig.pathbasedauthz.html)，它解释得非常清楚，而且易于理解。

> 对于 Apache，需要加载 mod_authz_svn 模块，然后添加指向您自己的规则文件的 AuthzSVNAccessFile 指令（在 httpd.conf 文件中）。如果您使用的是 svnserve，那么您需要使 authz-db 变量（在 svnserve.conf 中）指向您的规则文件。

规则文件的格式如下：

```
[calc:/branches]
harry = rw
sally = r 
```

您甚至可以定义访问组或为所有人或任何人设置默认访问权限。

# javascript - 将泛型参数从 Javascript 传递到 Asp.net C#

> ID：11132950
> 
> 赞同：0
> 
> 时间：2012-06-21T06:50:22.303
> 
> 标签：javascript, jquery, asp.net, export-to-excel

我正在开发一个 jquery api 获取数据作为 LINQ 列表并将其写入 HTML 表和一些过滤器进程；使用了 Javascript、.Net C# 和 Linq。但是有一个我无法弄清楚的问题。

我想将过滤后的数据导出到 Excel 工作表。过滤器也在 javascript -clientside- 中创建。所以我必须从客户端发送参数。另一方面，我不能使用 Ajax Call 来导出 Excel。所以我必须使用 aspx 按钮。我搜索使用 Aspx Button CommandArgument 属性发送参数，但它不是动态的。

要清除，我必须将动态参数发送到服务器端，并根据此参数将其写入 excel 表返回的数据。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T09:06:02.290

最简单的事情（我认为）是通过使用纯 html 字段通过表单字段传递数据

```
// html
<input id="param1Input" name="param1" type="hidden" />
// script
document.getElementById('param1Input').value = someValue
// server code
Request.Form["param1"] 
```

或服务器控制

```
// aspx
<asp:HiddenField ID="Param1Field" runat="server" />
// script
document.getElementById('<%= Param1Field.ClientID %>').value = someValue
// server code
Param1Field.Value 
```

# windows-phone-7 - 必应地图肥皂服务

> ID：11132954
> 
> 赞同：1
> 
> 时间：2012-06-21T06:50:48.997
> 
> 标签：windows-phone-7

我正在使用 Bingmap 肥皂服务为电话 7 开发应用程序。该应用程序运行良好。但有时我在 Bingmap Soap 服务中遇到“找不到端点”的异常。当我在浏览器上点击该服务时，它运行良好。是否有类似“特定日期 bingmap 肥皂服务的点击次数”之类的东西。请帮我解决这个问题。我在 1-2 天后得到这个 exceotion。

异常详细信息“在[http://dev.virtualearth.net/webservices/v1/geocodeservice/GeocodeService.svc](http://dev.virtualearth.net/webservices/v1/geocodeservice/GeocodeService.svc)上没有可以接受消息的端点侦听。这通常是由不正确的地址或 SOAP 操作引起的。请参阅 InnerException，如果现在，了解更多详情。”

# java - 接口及其使用

> ID：11132958
> 
> 赞同：1
> 
> 时间：2012-06-21T06:50:58.370
> 
> 标签：java

```
public class MinimumEditDistance {
    public interface CostFunction{
        public int cost(int[][] distanceMatrix,CharSequence x, CharSequence y,int i,int j);
    }
    public static final CostFunction ONE = new CostFunction() {
        public int cost(int[][] distanceMatrix, CharSequence x, CharSequence y, int i, int j) {
            return 1;
        }
    };

    public static final CostFunction TWO = new CostFunction() {
        public int cost(int[][] distanceMatrix, CharSequence x, CharSequence y, int i, int j) {
            return 2;
        }
    }; 
```

我无法理解这段代码中实际做了什么！！！`new`前面是什么意思`CostFunction()`。实际上，我对这个理解很混乱！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T06:57:53.723

看看[内部类](http://docs.oracle.com/javase/tutorial/java/javaOO/innerclasses.html)。您所拥有的是内部接口的匿名内部实现，并且是一个非常肮脏的示例，这就是您无法理解它的原因。

如果你把它分开，你会有：

- 一个独立的 ConstFunction 接口

```
public interface CostFunction{
  public int cost(int[][] distanceMatrix,CharSequence x, CharSequence y,int i,int j);
} 
```

- 一个名为 CostFunctionOne 的独立 ConstFunction 实现

```
public class CostFunctionOne{
  public int cost(int[][] distanceMatrix, CharSequence x, CharSequence y, int i, int j) {
    return 1;
  }
}; 
```

- 一个名为 CostFunctionTwo 的独立 ConstFunction 实现

```
public class CostFunctiontTwo{
  public int cost(int[][] distanceMatrix, CharSequence x, CharSequence y, int i, int j) {
    return 2;
  }
}; 
```

- 使用上述的独立的 MinimumEditDistance 类

```
public class MinimumEditDistance{
  public static final CostFunction ONE = new CostFunctionOne();
  public static final CostFunction TWO = new CostFunctionTwo();
} 
```

尽管它们可能很难看，但有时您会选择对接口进行如此快速的实现，因为您可以从容器类中访问变量和方法。使用侦听器时，您会看到很多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T06:54:58.530

它只是 CostFunction 接口的匿名实现。就像您创建了一个实现此接口的类并创建了该类的一个实例一样。 **编辑：**我的意思是，*两个*不同类的实例，因为你的代码中有两个实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T06:57:57.077

的实例化`ONE`并`TWO`正在创建实现 CostFunction 接口的匿名类，因此您会看到该`cost`方法在同一代码块中实现。

看看这个讨论匿名类的[页面。](http://docstore.mik.ua/orelly/java-ent/jnut/ch03_12.htm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T06:59:22.797

这就是匿名内部类的用法。

```
public static final CostFunction ONE = new CostFunction() {
    public int cost(int[][] distanceMatrix, CharSequence x, CharSequence y, int i, int j) {
        return 1;
    }
}; 
```

这将通过 javac 创建一个类 CostFunction$1.class

```
class 'Anonymous inner class' implements CostFunction {
    public int cost(int[][] distanceMatrix, CharSequence x, CharSequence y, int i, int j) {
        return 1;
    }
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-21T07:00:23.800

基本上你正在实现接口并创建一个匿名类。要查看它的工作原理，只需运行以下代码：

```
public class Main{
    public interface CostFunction{
        public int cost();
    }
    public static final CostFunction ONE = new CostFunction() {
        public int cost() {
            return 1;
        }
    };

    public static final CostFunction TWO = new CostFunction() {
        public int cost() {
            return 2;
        }
    };
     public static void main (String[] args)
     {
      System.out.println(ONE.cost());
     }
} 
```

# java - 同时使用 PHP 和 Java EE

> ID：11132961
> 
> 赞同：0
> 
> 时间：2012-06-21T06:51:12.040
> 
> 标签：java, php, jakarta-ee

我正在从我的朋友那里借用一个完整的电子商务网站，该网站带有内置 PHP 的后端（管理）界面。我想要做的是在 Java EE 中并行构建一个 OMS，但一个限制是我不能使用 PHP 网站正在使用的数据库。我想直接从 PHP 控制器类跟踪所有订单并建立一个单独的后端（管理）系统。

假设 PHP 网站使用的是 MVC，那么所有的订单请求都会来到控制器类。我想在客户端发出 HTTP 订单请求后立即获取该数据，并将其存储在 Java EE 中内置的 OMS 中。

我想知道让 Java EE 和 PHP 进行通信以跟踪某些特定 HTTP 请求的最佳方法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T07:26:27.407

您可能需要调查的一些方法：

*   您可以尝试使用**PHP/Java Bridge** [http://php-java-bridge.sourceforge.net/pjb/实现通信](http://php-java-bridge.sourceforge.net/pjb/)
*   您可以尝试使用**Quercus** [http://quercus.caucho.com/](http://quercus.caucho.com/)。它是 Caucho Technology 发布的 100% Java 实现的 PHP 5。
*   例如，您可以在我们的 Java EE 应用程序中创建 REST API，以与不同的 API 客户（例如 PHP 前端）集成。

我更喜欢最后一个解决方案，因为它更灵活（您可以根据需要更改前端技术堆栈）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T08:43:30.290

看看[Typo3](http://www.typo3-solr.com/en/solr-for-typo3/)项目的 apache solr，它利用了 Typo [3](http://www.typo3.org) cms 框架 (php) 和 solr 项目 (Java EE)之间的通信

# ruby-on-rails - 为应用程序创建rest api

> ID：11132975
> 
> 赞同：0
> 
> 时间：2012-06-21T06:52:11.943
> 
> 标签：ruby-on-rails, rest

我刚刚开始为我的一个应用程序编写rest api，我想用can can 实现这个rest api，以便我可以为应用程序提供访问控制。

有没有办法做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T07:26:00.653

以下 Railscast Episode 解释了创建 Rest Api 和版本控制（如果你需要它可能会处理）

[http://railscasts.com/episodes/350-rest-api-versioning](http://railscasts.com/episodes/350-rest-api-versioning)

对于访问控制，您可以执行与其他 Rest Api 相同的操作，创建一个基于哈希的令牌并将其保存在数据库中。任何想要访问其余 API 的人都需要传递该哈希令牌才能访问。

# c# - 2个项目之间的事件处理

> ID：11132984
> 
> 赞同：0
> 
> 时间：2012-06-21T06:52:37.107
> 
> 标签：c#, events, delegates

我在一个解决方案中有 2 个项目。我在第一个项目中有一个按钮，我必须在第二个项目中为此编写事件。没有参考 b/w 1st 和 2nd 但第二个项目参考了项目 1。我们可以使用代表和事件来做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T06:56:07.760

在有按钮的项目中，制作按钮和表单`public`，然后在另一个项目中，添加对该项目的引用，您可以使用

```
whateverProject.whateverForm.whateverButton.Click += MyEventHandler; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T07:03:28.883

是的你可以。您必须按照以下步骤操作：右键单击 Project2 并选择 Add Reference，然后在 Projects 下选择 Project1。

您必须在 Project2 源文件的顶部使用此代码：

```
using Project1;  // for replacing Project1 with the namespace of your Project1 
```

现在你必须得到并设置。例如，您有标签和文本框，因此您必须使用以下代码：

```
public string TextBox1_text    
        {           
            get { return TextBox1.Text; }           
            set { TextBox1.Text = value; }          
        }  

    public string lable1_text       
    {           
        get { return label1.Text; }           
        set { label1.Text = value; }          
    } 
```

# javascript - 如何在 shell 中克隆/扩展 mongodb javascript 对象

> ID：11132985
> 
> 赞同：1
> 
> 时间：2012-06-21T06:52:40.867
> 
> 标签：javascript, shell, mongodb

使用 jQuery.extend() 函数调用在 jQuery 中复制 javascript 对象非常容易。我很好奇有没有办法在 mongodb shell 中做同样的任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T07:20:44.000

好的所以如果你在这里看到：

[http://www.mongodb.org/display/DOCS/Overview+-+The+MongoDB+Interactive+Shell#Overview-TheMongoDBInteractiveShell-.mongorc.js](http://www.mongodb.org/display/DOCS/Overview+-+The+MongoDB+Interactive+Shell#Overview-TheMongoDBInteractiveShell-.mongorc.js)

你会看见：

> 当 shell 启动时，它会检查用户的主目录中是否存在名为 .mongorc.js 的 javascript 文件。

这个 .mongorc.js 允许您定义自定义函数以及不用于集合对象和数据库对象的函数。

更进一步这里是一个从毫无戒心的 gist 用户那里偷来的例子：[https ://gist.github.com/1640154](https://gist.github.com/1640154)

希望能帮助到你，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-20T15:45:12.097

如果我理解您的问题，您正在寻求向 MongoDB 集合中的现有文档添加其他属性。这可以通过`update`使用`$set`更新程序添加新属性及其值的方法来完成。[此 MongoDB文档页面](http://docs.mongodb.org/manual/reference/operator/update/set/#up._S_set)中描述了该过程`$set`。

# java - Java 格式化程序，浮点值，超过最大宽度的异常

> ID：11132988
> 
> 赞同：1
> 
> 时间：2012-06-21T06:53:00.667
> 
> 标签：java, exception, floating-point, formatter

我想使用 java.util.Formatter 类来格式化固定长度的记录。该记录包括 Integer 和 Double 字段。

对于相应字符串表示适合指定宽度的任何整数和双精度数（例如“12.345”“适合”“%3.3d”），没问题，我可以将值填充到“012.345”。但是，如果我的 Double**超出**了指定的宽度，例如 '1234.567'，则 '%3.3d' 转换格式将导致 '1234.567'，这会破坏定长记录定义。

我想在这种情况下得到一个异常，所以我的程序可以进行适当的错误处理。例如，我希望看到类似的内容：

```
String r = null;
try {
    r = String.format("%3.3d", new Double(1234.567));
} catch (SomeFormatException e) {
    // do error handling
} 
```

是否有任何转换标志可用于实现此目的？

# jquery - 是否有现有的库/插件来创建像 Visual Studio 中那样的可停靠、可调整大小和可固定的侧边栏窗口？

> ID：11132990
> 
> 赞同：0
> 
> 时间：2012-06-21T06:53:11.803
> 
> 标签：jquery, css, jquery-ui

Visual Studio 中的解决方案资源管理器和工具箱窗口可以隐藏在侧面，除非它们被固定。它们也可以调整大小。有什么东西可以在 CSS 中模拟这种行为吗？我希望有人已经制作了一些 jQuery 插件或类似的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T09:57:57.197

我不确定此控件对您有多大帮助，因为缺少一些主要功能。但是，请查看此链接：

[http://www.jankoatwarpspeed.com/examples/AdvancedDocking/#](http://www.jankoatwarpspeed.com/examples/AdvancedDocking/#)

# jquery - 如何使用jquery选择父字段

> ID：11132991
> 
> 赞同：0
> 
> 时间：2012-06-21T06:53:31.197
> 
> 标签：jquery

我的主要文件是

```
<div id="man">
//some content
<div id="one">
//some content
<div id="two">
//some content
<div id="three">
//some content
<div id="four">
<a title="to delete">delete</a>
<a title="to reset">reset</a>
<a title="to change">change</a>
</div>...// all div ends...

<div id="woman">
//some content
<div id="one">
//some content
<div id="two">
//some content
<div id="three">
//some content
<div id="four">
<a title="to delete">delete</a>
<a title="to reset">reset</a>
<a title="to change">change</a>
</div>...// all div ends... 
```

而jQuery是 -

```
$("document").ready(function(){
$("a:contains(delete)").click(function(){
alert($(this).parent().parent().parent().parent().parent().attr("id"))
})
}) 
```

有没有其他方法可以找到顶级父母而不是使用这个......？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T06:57:40.303

如果您可以稍微修改您的 html 并为这些顶级 div 提供一个通用类：

```
<div id="man" class="top">
...
<div id="woman" class="top"> 
```

...然后您可以使用该[`.closest()`方法](http://api.jquery.com/closest/)来选择它们：

```
$("a:contains(delete)").click(function(){
   alert($(this).closest('div.top').attr("id"))
}) 
```

请注意，您当前的 html 标记是无效的，因为您不应该为`id`多个元素提供相同的标记。（因此，鉴于您应该更改标记以解决将类添加到顶级 div 的问题。）

编辑：证明即使“男人”和“女人”不在顶层，上述工作也有效：http: [//jsfiddle.net/NVQXq/](http://jsfiddle.net/NVQXq/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T07:10:49.453

好吧，如果您必须严格遵守该 html 结构（不能添加类等），那么您当然可以在选择器中使用该结构；

```
$(document).ready(function(){
    $("a:contains(delete)").click(function(){
        var pId = $(this).parents("#man").attr("id") ||
            $(this).parents("#woman").attr("id");
        alert(pId);
    });
}); 
```

这也是假设您的 html 格式正确（即您的 man div 都已关闭）。

由于 ID 是唯一的（或者应该是唯一的，尽管不是所有的都是......）并且“男人”和“女人”元素必须是不相交的，所以一个元素只能是其中一个或另一个的子元素 - 因为此选择器将绑定到两者之一中的链接，您知道如果其父级不是“男人”，则它必须是“女人”。

# vaadin - 我应该为露天 Web 服务客户端使用哪种设计模式

> ID：11132994
> 
> 赞同：1
> 
> 时间：2012-06-21T06:53:40.603
> 
> 标签：vaadin, alfresco

我正在使用 vaadin 作为 ui 和 alfresco 作为文件存储创建一个文件管理器应用程序。我正在使用 alfresco Web 服务客户端与 alfresco 进行通信。

谁能建议我应该使用哪种设计模式来调用 alfresco Web 服务客户端？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T07:25:02.213

首先，您不必强迫自己使用设计模式。设计模式是某些问题的可重用解决方案。我认为直接调用 Web 服务没有问题。只需使您的代码干净，删除重复并开发一些简单的内部 API 来进行调用。

第二。您可以使用一些内容管理集成模式。但是你必须更具体地说明你在做什么。如果它是一个简单的文件浏览器，您可以使用“浏览器视图”模式，但不是必需的。

如果它只是一个简单的应用程序，我不会把事情复杂化太多。

您没有告诉我们的另一件事是您使用的是哪种网络服务？RESTful 还是 SOAP？

希望这个对你有帮助。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T08:29:32.177

没有只解决 Web 服务调用的设计模式。如果您真的在寻找帮助您设计集成的模式，您可能需要查看[Enterprise Integration Patterns](http://www.enterpriseintegrationpatterns.com/toc.html)。

先决条件是您对集成约束有透彻的了解，例如同步与异步、顺序性、故障处理和传播等。

我发现有趣的其他模式来自[Nygard](http://www.michaelnygard.com/)的优秀书籍[Release it！](http://pragprog.com/book/mnee/release-it)，例如[断路器](http://en.wikipedia.org/wiki/Circuit_breaker_design_pattern)、超时和隔板。

# javascript - 恢复网页的样式

> ID：11132996
> 
> 赞同：0
> 
> 时间：2012-06-21T06:53:50.573
> 
> 标签：javascript, html, css

我正在建立自己的主页。我发现某人的页面不错，并下载了它的页面源，并在我的浏览器中本地打开它，奇怪的是内容在那里，但样式（框架，位置......）丢失了。我想知道恢复风格缺少什么...

我猜它与`head`源的部分有关，可能是`css`或`js`文件......我在这里复制它们：

```
<!doctype html>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="stylev5.css" />
    <title>homepage</title>
    <meta charset="utf-8" />
    <script type="application/javascript" src="jquery-1.7.2.min.js"></script>
    <script type="application/javascript">
      $(window).ready(function () {
        var codes = [38, 38, 40, 40, 37, 39, 37, 39, 66, 65];
        // codes = [65];
        $(window).keydown(function (event) {
          var code = event.keyCode;
          if (code == codes.shift()) {
            if (codes.length == 0) {
              $(".konami").fadeIn("slow");
              var h = $(".konami").height() - $(".links").height();
              $(".links").css("margin-top", h/2);
            }
          } else {
            codes = [];
          }
        });
        $(".door").click(function () {
          $(".konami").fadeOut("slow");
        });
      });
    </script>
  </head>
.... 
```

不知道`javascript`，谁能帮忙？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T06:57:00.850

您需要将`<link>`和`<script>`标签中提到的文件下载到您的`.html`文件所在的目录。

将您的浏览器指向`http://website-you-are-stealing-from.com/stylev5.css`并下载该文件。Javascript 也是如此。

PS：不要窃取人们的网站设计；）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T06:59:40.290

如果您有 Chrome，您可以导航到该页面并按*Ctrl-S*以保存整个页面，包括链接、脚本、样式和所有内容。这通常工作得很好，对于静态页面几乎是完美的。但是请记住，如果您正在处理动态页面，那么您将无法下载或复制服务器端逻辑。

# html - 打印，表格不响应纵向和横向

> ID：11132998
> 
> 赞同：0
> 
> 时间：2012-06-21T06:53:53.363
> 
> 标签：html, css, html-table, media-queries

我有一个显示一组数据的表格。但是当我尝试使用`Control`+`P`或打印页面时`window.print();`，表格宽度不响应纵向或横向。表格宽度将超过纸张宽度。我怎样才能解决这个问题？

我的表格标记：

```
 <table class="datatable">
            <thead>
                <tr>
                    <th class="sorting" width="15">ID</th>
                    <th class="sorting" width="15">Type</th>
                    <th class="sorting" width="30">Property Type</th>
                    <th class="sorting" width="50">Name/Address</th>
                    <th class="sorting" width="10">Block</th>
                    <th class="sorting" width="35">Unit</th>
                    <th class="sorting" width="35">Sqft</th>
                    <th class="sorting" width="35">$</th>
                    <th class="sorting" width="35">$/Sqft</th>
                                            <th class="sorting" width="35">R.Yield</th>
                                            <th class="sorting" width="35">Status</th>
                </tr>
            </thead>
            <tbody>

                <tr id="listing1" class="odd">
                    <td class="sorting_1">1</td>
                    <td>Sale</td>
                    <td>Apartment / Condo</td>
                    <td>
                        <a href="/index.php/listings/view/7" title="Parc Rosewood">Parc Rosewood</a>                            <br />
                        Default Administrator (12345678)
                    </td>
                    <td>10</td>
                    <td>08-90</td>
                    <td>227</td>
                    <td>$2,170,000</td>
                    <td>$9,559</td>
                    <td>
                        1%                      </td>
                    <td>
                        Available                       </td>
                </tr>

                <tr id="listing2" class="even">
                    <td class="sorting_1">2</td>
                    <td>Sale</td>
                    <td>Apartment / Condo</td>
                    <td>
                        <a href="/index.php/listings/view/3" title="Woodgrove Condo">Woodgrove Condo</a>                            <br />
                        John Doe (12345678)
                    </td>
                    <td>5</td>
                    <td>03-12</td>
                    <td>2,360</td>
                    <td>$1,900,000</td>
                    <td>$805</td>
                    <td>
                        --                      </td>
                    <td>
                        Available                       </td>
                </tr>

                <tr id="listing3" class="odd">
                    <td class="sorting_1">3</td>
                    <td>Sale</td>
                    <td>Apartment / Condo</td>
                    <td>
                        <a href="/index.php/listings/view/2" title="Casablanca">Casablanca</a>                          <br />
                        John Champion (12345678)
                    </td>
                    <td>7</td>
                    <td>01-36</td>
                    <td>1,326</td>
                    <td>$1,000,000</td>
                    <td>$754</td>
                    <td>
                        --                      </td>
                    <td>
                        Available                       </td>
                </tr>

            </tbody>
        </table> 
```

CSS 标记：

```
table {
    margin: 20px 0px 10px 0px;
    padding: 0px;
    border-collapse:collapse;
    border-spacing: 0px;
    width: 100%;
}
thead th { text-align: left; padding: 2px 5px; border-bottom: 1px solid #E0E0E0; } 
```

截屏： ![在此处输入图像描述](../Images/98de6b44f9e05fa88312b023ad5974ee.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T08:07:54.563

我找到了解决方案，似乎我的包装看起来像个小丑。

html标记

```
<div class="wrapper">
     <div class="container">
          <div class="row"> 
```

CSS 标记

```
.row {
     width: 100%;
     max-width: 1440px;
     min-width: 1200px;
     margin: 0px auto;
 } 
```

正确的 CSS 标记（在打印媒体查询上执行此操作）

```
.row {
     width: 100%;
     margin: 0px auto;
 } 
```

感谢所有的帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T07:34:04.327

您的代码是正确的，并且表格宽度在打印预览时很好地扩展（在 FF、IE9、Chrome 上测试...在 A4 上打印，缩放到 100% - 没有缩小）。检查您的打印机默认设置和浏览器打印首选项（页面设置和缩放）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T07:48:52.717

如果您希望 CSS 可调整以进行打印，则必须打开“@media print”规则。

例子：

```
@media print {
    /* any css rule */
    table {
    margin: 20px 0px 10px 0px;
    padding: 0px;
    border-collapse:collapse;
    border-spacing: 0px;
    width: 100%;
    }
    thead th { text-align: left; padding: 2px 5px; border-bottom: 1px solid #E0E0E0; }
} 
```

# jquery - 添加 href 以单击序列化字符串

> ID：11132999
> 
> 赞同：0
> 
> 时间：2012-06-21T06:54:04.203
> 
> 标签：jquery, html

我正在尝试使用在其中创建的序列化字符串将输入框（在附加的 JSFiddle 上）设置为 href，以便提交者可以单击他们创建的链接以查看它是否已经存在。这可能吗？如果不是，最好用序列化字符串隐藏输入单元格并在输入框之外显示另一个序列化输出（在href中）？

[JSFiddle - 序列化](http://jsfiddle.net/dactivo/4Nmcx/)

Javascript：

```
var partFields =  $('#form1').find('input[type=text]').not('#url');

$(partFields).change(function(){
  var url = 'static/url/to/file.php?';
  var urlValue = url+partFields.serialize();
   $('#url').val(urlValue); // set the hidden input value
}); 
```

HTML：

```
<form id="form1" name="form1" method="post" action="">
  <p>
    <label>Variable 1
      <input type="text" name="variable1" id="variable1" />
    </label>
  </p>
  <p>
    <label>Variable 2
      <input type="text" name="variable2" id="variable2" />
    </label>
  </p>
  <p>
    <label>URL
      <input type="text" name="url" id="url" />

    </label>
  </p>
  <p>
    <input type="button" name="button" id="button" value="Submit" />
  </p>
</form>
​

​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T07:02:02.330

您可以像这样创建指向创建的 url 的链接：

```
$('#link').text(urlValue).attr('href', urlValue); 
```

这是你想要做的吗？

我已经更新[了小提琴。](http://jsfiddle.net/4Nmcx/117/)

更新。我已经[编辑了 fiddle](http://jsfiddle.net/4Nmcx/120/)，所以它是转到生成的 url 的提交按钮。