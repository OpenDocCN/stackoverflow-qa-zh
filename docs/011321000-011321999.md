# StackOverflow 问答 11321000-11321999

# actionscript-3 - ActionsScript 3 事件侦听器未执行函数

> ID：11321000
> 
> 赞同：1
> 
> 时间：2012-07-04T00:30:44.547
> 
> 标签：actionscript-3, function, events, listener, trace

下面的代码似乎没有按预期工作，我什至没有看到跟踪语句，但我没有收到任何错误。我特别迷茫！

```
keyboardMC.button0MC.addEventListener(MouseEvent.CLICK, Button0);

function Button0(mouseEvent:MouseEvent):void {
    trace('0');
} 
```

我还应该提到，我放入函数中的任何其他代码都不会执行。

有人能看出这有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T01:09:55.793

如果 Jason Sturges 说它在[Display List](http://www.republicofcode.com/tutorials/flash/as3displaylist/)的顶部，您的代码应该可以工作。基本上检查该电影剪辑上是否覆盖了某些东西，它不会发生事件。

shaumhusain 的意思是这样做：

```
stage.addEventListener(MouseEvent.CLICK, OnClickHandler);
function OnClickHandler(e:MouseEvent):void
{
   trace(e.target.name);
} 
```

还要检查该movieclip 的父级是否为mouseEnabled，否则它将不起作用。

# scala - 递归计算字符串中所有字母的Unicode代码的乘积

> ID：11321001
> 
> 赞同：1
> 
> 时间：2012-07-04T00:31:09.103
> 
> 标签：scala, recursion

我有点讨厌递归（这就是我研究这个的原因）而且我很难弄清楚如何做到这一点：`("Hello" foldLeft(1))((x, y) => x * y.toInt)`递归。有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T00:48:14.767

```
scala> def r(s : String) : Int = {
 | s match { 
 | case "" => 1
 | case _ => s.head.toInt * r(s.tail)
 | }
 | }
r: (s: String)Int

scala> r("hello")
res4: Int = 714668928 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T01:21:17.650

我将另一个答案转换为我认为的尾递归版本：

```
@tailrec
def r(acc: Int, s: String): Int = {
  s match {
    case "" => acc
    case _ => r(s.head.toInt * acc, s.tail)
  }
}

print(r(1, "hello")) 
```

有关将此类函数转换为尾递归格式的一般建议，请参阅此答案：

[那不是尾递归风格的代码吗？](https://stackoverflow.com/questions/6005392/isnt-that-code-in-tail-recursive-style)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T02:39:13.067

这是使用累加器的尾递归版本。这个版本也有一个干净的 API。

```
import scala.annotation.tailrec

def unicodeProduct(string: String): Int = {
  @tailrec
  def unicodeProductAcc(string: String, acc: Int): Int = {
    string match{
      case "" => acc
      case _ => unicodeProductAcc(string.tail, string.head.toInt * acc )
    }
  }
  unicodeProductAcc(string, 1)
}

scala> :load unicodeProduct.scala
Loading unicodeProduct.scala...
import scala.annotation.tailrec
unicodeProduct: (string: String)Int

scala> unicodeProduct("hello")
res0: Int = 714668928 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-03T00:17:45.880

过时了，但是下面的问题是什么？

```
 def product_recursive(s: String): Long = {
      if (s.length == 1) 
        s.head.toLong
      else 
        s.head.toLong * product_recursive(s.tail)
  } 
```

# java - 实例化一个类，然后在另一个线程中使用它

> ID：11321005
> 
> 赞同：1
> 
> 时间：2012-07-04T00:31:45.940
> 
> 标签：java, android, multithreading, constructor

考虑两个线程：*threadA*和*threadB*。（例如，让*threadA*成为 UI 线程，让*threadB*成为自己的子类`Thread`。）关于**数据可见性**，在*threadA中实例化一个类，将其传递给**threadB*的构造函数，然后从*threadB*独占使用它是否安全？让我用代码来澄清这一点。（请注意，代码被简化了，所以这种架构在实际应用程序中是有意义的。）

```
public class SomeClass {
    public SomeClass(....) {
       // initialization
    }
}

public class MyCustomThread extends Thread {
    public MyCustomThread(SomeClass someClass) {
        mSomeClass = someClass;
    }

    @Override
    public void run() {
           // operate on mSomeClass         
    }
} 
```

启动一切的方法如下（它的位置无关紧要）。这由*threadA 调用*。

```
public void launchThread() {
   SomeClass someClass = new SomeClass();
   MyCustomThread threadB = new MyCustomThread(someClass); // MyCustomThread is a subclass of Thread
   threadB.start();
   // After this point, threadA never accesses someClass,
   // and only threadB is operating on it
} 
```

我知道不允许对构造函数进行同步，并且其中不需要同步代码（因为*this*引用——除非泄露出去——在类在其创建者线程中构造之前对其他线程不可用）。*所以我的问题是关于数据可见性：如果我在调用threadA*后不访问`someClass`（及其任何引用的数据），代码是否安全？*`threadB.start()`*

 *换句话说，会`threadB.run()`看到最新版本的`someClass`数据（如字段、内部引用等）吗？我的猜测：因为在*threadB*第一次访问之后不会有外部变化，所以`someClass`threadB*必须*看到正确的值，因为**它不能从 before 缓存副本**。因此，出于上述原因，我不需要从. *（同样，请注意，在threadB*启动后，可以保证*threadA*不会访问。）*`someClass`***`someClass``threadB.run()`*`someClass`*****

 ****** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T00:42:29.463

如果你说，之后`threadB.start()`，引用的实例`someClass`将不再被任何其他线程修改：是的，`threadB.run()`将看到最新版本。

在这种情况下确实不会发生并发/竞争条件。一切都是按顺序发生的，您只是拥有`Thread`s 的对象，我认为这可能会导致您有点偏执:)。******

# c++ - 是否在前向声明的类型未定义行为上使用 typeid？

> ID：11321007
> 
> 赞同：10
> 
> 时间：2012-07-04T00:31:52.540
> 
> 标签：c++, c++11, standards

如果类型不是“完全定义的”，我是否正确阅读了标准，`5.2.8.3: ... If the type of the expression is a class type, the class shall be completely-defined.` 这是否意味着以下程序未定义？

foo.cpp：

```
struct foo
{
  virtual void a(){}
};

struct bar : foo
{
  virtual void a(){}
};

bar abar;

foo& get_some_foo()
{
  return abar;
} 
```

主.cpp：

```
#include <iostream>
#include <typeinfo>

struct foo;

foo& get_some_foo();

int main()
{
  foo& a_ref_foo(get_some_foo());

  std::cout << "a_ref_foo typeid name: " << typeid(a_ref_foo).name() << std::endl;

  return 0;
} 
```

MSVC10 输出：`a_ref_foo typeid name: struct foo'

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-04T02:14:04.250

当我编译你的代码时：

```
g++ foo.cpp main.cpp -o main 
```

我得到：

```
main.cpp: In function ‘int main()’:
main.cpp:12:52: error: invalid use of incomplete type ‘struct foo’
main.cpp:4:8: error: forward declaration of ‘struct foo’ 
```

这与我对标准的解释一致，即您不能应用于`typeid`不完整的类型——并且`a_ref_foo`是不完整的类型，因为类型的完整定义`foo`是不可见的。`main.cpp`（我添加的行）格式不正确，需要进行诊断。

**更新 ：**

我已经用 Visual Studio 2010 Express 重现了这个问题。即使禁用了语言扩展，这个简单的程序：

```
#include <typeinfo>

struct foo;

int main()
{
  typeid (foo);
  return 0;
} 
```

编译时没有诊断消息。使用 gcc 4.7，我得到：

```
main.cpp: In function ‘int main()’:
main.cpp:7:14: error: invalid use of incomplete type ‘struct foo’
main.cpp:3:8: error: forward declaration of ‘struct foo’ 
```

相同的规则：

> 如果表达式的类型是类类型，则类应该是完全定义的。

出现在 ISO C++ 标准的 1998、2003 和 2012 版本中。

看起来像 Visual Studio 中的错误。（如果有人想将此情况报告给 Microsoft，请继续。）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-04T02:59:46.837

是的，该程序格式错误（而不是导致未定义的行为）。

如果你想知道*为什么*，那么你应该认为这`typeid`是一个单一的运算符，但它对于多态类型的语义与非多态类型的语义完全不同。特别是，如果`foo`是多态的（至少有一个虚函数，那么`typeid`将产生对*实际类型*`type_info`的对象的引用（在这种情况下），而如果该类型没有任何虚函数，那么它将返回对对象的引用对于表达式的*静态*类型（在这种情况下）。*`bar``type_info`*`foo`**

 **为了让编译器生成适当的代码，编译器必须*知道*在使用的地方`typeid`这两种情况中的哪一种适用。如果类型不完整，则编译器不会提供该信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T00:50:14.203

您的程序是完全正确的，因为函数 `get_some_foo`和`bar`是全局的。so`bar`是完全定义的，但是如果定义了 in 的变体`bar`，`main.cpp`那么在 typeid 中作为参数使用，否则编译时会报错。**

# python - python subprocess.Popen 捕获大量输出

> ID：11321011
> 
> 赞同：0
> 
> 时间：2012-07-04T00:32:17.793
> 
> 标签：python, subprocess

我从 python 脚本调用 subprocess.Popen 然后调用通信

```
process = subprocess.Popen(cmds, shell=shell, stdout=subprocess.PIPE,  
                               stderr=subprocess.PIPE)  

stdout, stderr = process.communicate() 
```

这样做的问题是标准输出被缓冲并且只会捕获一定数量的字符。

问题是，如何获得我生成的进程的完整标准输出和完整标准错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T04:29:46.263

几点。

如果您将**PIPE**用于**stdout/stderr**并且**Popened**进程开始写入大量数据，并且在您的进程中您没有读取**stdout/stderr**那么***Popened 进程将阻塞***。这***有点***像

```
Note

Do not use stdout=PIPE or stderr=PIPE with this function. As the pipes are not being read in the current process, the child process may block if it generates enough output to a pipe to fill up the OS pipe buffer. 
```

关于您指出的另一条注释。**仅当您使用stdout=None,stderr=None**进行 Popen 时才适用。在这种情况下，所有**Popened 进程的**out/err 都将存储在内存中。

# desire2learn - 在 D2L 中以编程方式设置个人成绩？

> ID：11321012
> 
> 赞同：0
> 
> 时间：2012-07-04T00:32:34.033
> 
> 标签：desire2learn

如何通过 D2L 中的 REST/Valence API 为特定作业或测验设置成绩？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T00:35:19.367

有[设置最终“等级值”](http://docs.valence.desire2learn.com/res/grade.html#put--d2l-api-le-%28D2LVERSION-version%29-%28D2LID-orgUnitId%29-grades-final-values-%28D2LID-userId%29)的调用，以及[为特定](http://docs.valence.desire2learn.com/res/grade.html#put--d2l-api-le-%28D2LVERSION-version%29-%28D2LID-orgUnitId%29-grades-%28D2LID-gradeObjectId%29-values-%28D2LID-userId%29)可分级对象设置等级值的调用。您还可以获得[“可分级对象”的列表](http://docs.valence.desire2learn.com/res/grade.html#get--d2l-api-le-%28D2LVERSION-version%29-%28D2LID-orgUnitId%29-grades-)

# c# - PdfSharp XGraphics.DrawString 不适用于波斯语等从右到左的语言

> ID：11321015
> 
> 赞同：4
> 
> 时间：2012-07-04T00:32:51.740
> 
> 标签：c#, pdfsharp, drawstring, right-to-left, persian

我正在使用 PdfSharp 创建一些 pdf 文件。一切正常，除非我尝试使用 Drawstring 方法以从右到左的语言（例如波斯语）将一些文本放入文件中。虽然我在 XPdfFontOptions 中选择了 Unicode 编码和合适的字体系列（例如，“B Nazanin”），但它会离散地绘制字母。

[这](http://i.stack.imgur.com/nOl9B.jpg)是我得到的图像。

顺便说一句，有没有更好的方法来创建 pdf 文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T05:36:25.670

iTextSharp 是 RTL 语言的更好选择。[您可以在此处](http://www.dotnettips.info/Post/582/%D9%81%D8%A7%D8%B1%D8%B3%D9%89-%D9%86%D9%88%DB%8C%D8%B3%D9%89-%D9%88-itextsharp)找到有关它的教程。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-03-03T09:03:49.843

您需要反转字母，然后反转整个字符串。我自己需要它，所以它经过测试和工作：

```
 public static string ReverseString(this string str)
{
    StringBuilder sb = new StringBuilder();
    foreach (char c in str.Reverse())
    {
        sb.Append(c);
    }

    return sb.ToString();
}

 public static string RightToLeft(this string str)
{
    List<string> output = str.Split(' ').Select(s => s.Any(c => c >= 1424 && c <= 1535) ? s.ReverseString() : s).ToList();
    output.Reverse();
    return string.Join(" ", output.ToArray());
}

 private void DrawStringBoxRightToLeft(XGraphics gfx, string text, XFont font, XBrush brush, XRect rect)
{
    List<string> words = text.Split(' ').ToList();
    List<string> sentences = new List<string>();

    while (words.Any())
    {
        while (gfx.MeasureString(string.Join(" ", sentences), font).Width < rect.Width && words.Any())
        {
            string s = words[0];
            sentences.Add(s);
            words.RemoveAt(0);
        }

        gfx.DrawString(string.Join(" ", sentences).RightToLeft(), font, brush, rect, XStringFormats.TopRight);
        rect.Y += font.Height;
        sentences.Clear();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T05:37:27.360

PDFsharp （尚）不支持从右到左的语言。

另见： [http ://www.pdfsharp.net/wiki/PDFsharpFAQ.ashx#Does_PDFsharp_support_for_Arabic_Hebrew_CJK_Chinese_Japanese_Korean_6](http://www.pdfsharp.net/wiki/PDFsharpFAQ.ashx#Does_PDFsharp_support_for_Arabic_Hebrew_CJK_Chinese_Japanese_Korean_6)

# maven - 是否可以使用变量定义 Maven 目标？

> ID：11321016
> 
> 赞同：3
> 
> 时间：2012-07-04T00:32:56.060
> 
> 标签：maven, javadoc

我的问题来自想要为所有项目运行 javadoc:aggregate，除了一个我想运行 javadoc:javadoc 的项目（因为这个项目有一个子模块，需要在其 maven-javadoc-plugin 配置中使用 sourcepath 设置，因为它生成了代码和源代码）。

据我了解，存在一个错误，这意味着如果您运行聚合目标，则会忽略源路径设置。我自己尝试过，但没有用，我发现：http: [//jira.codehaus.org/browse/MJAVADOC-311](http://jira.codehaus.org/browse/MJAVADOC-311)

我有一个定义插件配置的父 POM：

```
<properties>
  <javadoc-goal>aggregate</javadoc-goal>
<properties> 
```

IE

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-javadoc-plugin</artifactId>
  <executions>
    <execution>
      <id>generate-javadoc</id>
      <phase>package</phase>
      <goals>
        <goal>${javadoc-goal}</goal>
      </goals>
      <configuration>
         ...
      </configuration>
    </execution>
  </executions>
</plugin> 
```

然后我有几个从这个项目继承的项目。我需要运行 javadoc 而不是聚合的地方将定义：

```
<javadoc-goal>javadoc</javadoc-goal> 
```

其子模块将定义其源路径：

```
<reporting>
  <plugins>
    <plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-javadoc-plugin</artifactId>
        <configuration>
          <sourcepath>${basedir}/src/main/java:${basedir}/src/generated/java</sourcepath>
        </configuration>

        ... 
    </plugin>
  </plugins>
</reporting> 
```

我猜我的问题的答案是否定的，因为当我尝试安装我的父 POM 时，它看起来像是将变量视为文字，我觉得这很奇怪，因为你可以在很多其他地方使用它们：

```
[ERROR] BUILD ERROR
[INFO] ------------------------------------------------------------------------
[INFO] '${javadoc-goal}' was specified in an execution, but not found in the plugin 
```

如果我不能这样做，有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T03:54:00.323

这是我想出的解决方案：

在父 POM 中配置 javadoc 插件，但不提供目标：

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-javadoc-plugin</artifactId>
  <executions>
    <execution>
      <id>generate-javadoc</id>
      <phase>package</phase>
      <configuration>
         ...
      </configuration>
    </execution>
  </executions>
</plugin> 
```

每个项目中的 POM 都提供了目标：

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-javadoc-plugin</artifactId>
  <executions>
    <execution>
      <id>generate-javadoc</id>
      <phase>package</phase>
      <goals>
        <goal>javadoc</goal> <!-- or aggregate for those projects that require it -->
      </goals>
    </execution>
  </executions>
</plugin> 
```

# c++ - 读写矢量 到 C++ 中的文件

> ID：11321018
> 
> 赞同：0
> 
> 时间：2012-07-04T00:33:15.050
> 
> 标签：c++, file-io, vector

我有一个向量，其大小可能非常大（100 万个元素）。我将向量的内容作为字节值写入文件。我无法弄清楚如何将字节值读回向量中。

这是代码：

```
#include <fstream>
#include <vector>
#include <iterator>
#include <iostream>
using namespace std;

int main()
{
  // Filling a vector with values
  std::vector<bool> ve;
  ve.push_back(true);
  ve.push_back(false);
  ve.push_back(true);
  ve.push_back(false);
  ve.push_back(true);
  // Printing the values of the vector
  for(unsigned int i = 0; i < ve.size(); i++)
      cout << ve.at(i) << ".";
  cout << endl;

  // Writing the vector contents to a file
  const char* file_name = "abc.txt";
  ofstream outfile(file_name, ios::out | ios::binary);
  outfile.write((const char*)&(ve[0]), ve.size());
  outfile.close();
  // Reading the file and filling the vector with values
  ifstream infile ("abc.txt", ifstream::binary);
  vector<bool> out_ve((std::istreambuf_iterator<char>(infile)),
                       std::istreambuf_iterator<char>());

  while( !infile.eof() )
      out_ve.push_back(infile.get());

  // Checking if the values read are the same as the original values
  cout << "SIZE: " << out_ve.size() << endl;
  for(unsigned int i = 0; i < out_ve.size(); i++)
    cout << out_ve.at(i) << ".";
  cout << endl;

  infile.close();
  return 0;
} 
```

[编辑] 写入后关闭文件，输出与输入有很大不同。

```
1.0.1.0.1.
SIZE: 6
1.1.1.0.1.1. 
```

如何将正确的元素放入向量 out_ve？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T01:31:04.490

无法从大多数 STL 容器写入数据，`outfile.write((const char*)&(ve[0]), ve.size());`因为它们以复杂的方式管理内存，而这对它们的操作方式至关重要。使用`vector`，它可以工作，因为内存存储是连续的，但`vector<bool>`它的特殊之处在于它将多个布尔值打包到一个字节中。正如评论者已经指出的那样，`ve[0]`返回一个特殊的临时准引用类型，并通过强制转换为 a 来写出该引用`char*`将产生与向量中的数据完全无关的东西。

即使这种构造使您可以访问向量的原始内存，您用来写出数据的代码也与您用来读入数据的代码不兼容。您用来写出数据的代码*会将*`bool`8个条目打包到每个.`char``char``bool`

既然您正在使用 读取数据`istreambuf_iterator`，为什么不以同样的方式写出来：

```
std::copy(ve.begin(), ve.end(), std::ostreambuf_iterator<char>(outfile)); 
```

`bool`每个字节写出一个。

如果您想以每个写入一位的打包表示形式写出数据`bool`，我认为您需要发明自己的输入和输出迭代器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T01:24:51.137

`vector<bool>`不是真的`vector`。您在其他地方找到的用于处理向量的代码不会。并且您绝不能忽略“临时地址”。这条线

```
outfile.write((const char*)&(ve[0]), ve.size()); 
```

将无法正常工作`vector<bool>`。

问题是您要获取地址的东西不是您认为的类型。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-04T01:08:47.590

试试这个 AND 操作：

```
#define logical_and(x, y)   ((x==y) ? x | y) 
```

您应该研究运算符重载并创建一个返回文件中下一个无符号字符的运算符，然后使用 atoi 将值转换为整数

前任。

```
template<typename T>
  T operator << (ifstream& file)
  {
    return reinterpret_cast<T>(file.get());
  }; 
```

以上只是一个示例（未经测试。有一段时间没有使用 c++ 模板，因此可能需要返工

祝你好运，

亚历山大·弗兰克兰 (Tandex)

# html - 具有 alpha 透明度的背景颜色

> ID：11321026
> 
> 赞同：0
> 
> 时间：2012-07-04T00:34:33.143
> 
> 标签：html, css

如果我有一个带有这种 CSS 的 div：

```
background: #000000; 
```

然后我可以只对背景颜色应用透明度，这不会影响边框或 div 中的内容吗？所以它只影响背景颜色？如果可以的话，我不想使用`.png`背景，所以想知道它是如何完成的。

另外，如果支持，是否所有浏览器都支持？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T00:37:32.437

您可以使用 RGBa：

```
background: rgba(0, 0, 0, .5); 
```

[RGBa 浏览器支持](http://css-tricks.com/rgba-browser-support/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T05:40:47.217

你可以试试这个..它可能适用于所有浏览器：

```
.class_name {
zoom: 1;
filter: alpha(opacity=50);
opacity: 0.5;
} 
```

# restkit - 发布 json 后的 RestKit，如何将 json 响应映射到对象

> ID：11321029
> 
> 赞同：0
> 
> 时间：2012-07-04T00:34:53.343
> 
> 标签：restkit

我按照此链接[https://github.com/RestKit/RestKit/wiki/Posting-NSDictionary-as-JSON](https://github.com/RestKit/RestKit/wiki/Posting-NSDictionary-as-JSON)创建 json 帖子，并从服务器获取 json 响应。如何继续处理对对象列表的 json 响应？

```
- (void)sendAsJSON:(NSDictionary*)dictionary {

    RKClient *client = [RKClient clientWithBaseURL:@"http://restkit.org"];        

    // create a JSON string from your NSDictionary 
    id<RKParser> parser = [[RKParserRegistry sharedRegistry] parserForMIMEType:RKMIMETypeJSON];
    NSError *error = nil;
    NSString *json = [parser stringFromObject:dictionary error:&error];

    // send your data
    if (!error)
        [[RKClient sharedClient] post:@"/some/path" params:[RKRequestSerialization serializationWithData:[json dataUsingEncoding:NSUTF8StringEncoding] MIMEType:RKMIMETypeJSON] delegate:self];

}

- (void)request:(RKRequest *)request didLoadResponse:(RKResponse *)response
{
    NSLog(@"after posting to server, %@", [response bodyAsString]);
} 
```

**EDIT1：**这是我要发布到服务器的 Json。

```
{
    "memberId": "1000000",
    "countryCode": "US",
    "contacts": [
        {
            "phoneNumber": "+12233333333",
            "memberId": "2222",
            "contactId": "123456",
            "name": "john"
        },
        {
            "phoneNumber": "+12244444444",
            "memberId": "3333",
            "contactId": "123457",
            "name": "mary"
        }
    ]
} 
```

**EDIT2：**实际上有人在另一个线程中解决了这个问题。 [https://stackoverflow.com/a/7726829/772481](https://stackoverflow.com/a/7726829/772481)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T01:30:11.353

使用 RKObjectManger 而不是 RKClient 来执行 POST。然后，您可以在调用此方法时将响应加载到对象中：

```
- (void)objectLoader:(RKObjectLoader*)objectLoader didLoadObjects:(NSArray*)objects 
```

**编辑（给定 JSON 发送到服务器）：**

您可以创建自定义模型类，而不是按照您当前的方式创建 JSON。

首先，您可以为您的顶级对象创建一个模型类（假设它被称为用户）。

*用户标题*

```
//  User.h

#import <Foundation/Foundation.h>

@interface User : NSObject

@property (nonatomic) int memberId;
@property (nonatomic, copy) NSString *countryCode;
@property (nonatomic, strong) NSArray *contacts;

@end 
```

*用户实现*

```
//  User.m

#import "User.h"

@implementation User

@synthesize memberId;
@synthesize countryCode;
@synthesize contacts;

@end 
```

然后，您可以创建一个名为 Contact 的模型类。

*联系人标题*

```
//  Contact.h

#import <Foundation/Foundation.h>

@interface Contact : NSObject

@property (nonatomic, strong) NSString *phoneNumber;
@property (nonatomic) int memberId;
@property (nonatomic) int contactId;
@property (nonatomic, strong) NSString *name;

@end 
```

*联系实施*

```
//  Contact.m

#import "Contact.h"

@implementation Contact

@synthesize phoneNumber;
@synthesize memberId;
@synthesize contactId;
@synthesize name;

@end 
```

您可以这样使用这些类：

```
Contact *john = [[Contact alloc] init];
john.phoneNumber = @"+12233333333";
john.memberId = 2222;
john.contactId = 123456;
john.name = @"john";

Contact *mary = [[Contact alloc] init];
mary.phoneNumber = @"+12244444444";
mary.memberId = 3333;
mary.contactId = 123457;
mary.name = @"mary";

User *user = [[User alloc] init];
user.memberId = 1000000;
user.countryCode = @"US";
user.contacts = [NSArray arrayWithObjects:john, mary, nil];

RKObjectMapping *contactsMapping = [RKObjectMapping mappingForClass:[Contact class]];
[contactsMapping mapKeyPath:@"phoneNumber" toAttribute:@"phoneNumber"];
[contactsMapping mapKeyPath:@"memberId" toAttribute:@"memberId"];
[contactsMapping mapKeyPath:@"contactId" toAttribute:@"contactId"];
[contactsMapping mapKeyPath:@"name" toAttribute:@"name"];

RKObjectMapping *objectMapping = [RKObjectMapping mappingForClass:[User class]];
[objectMapping mapKeyPath:@"memberId" toAttribute:@"memberId"];
[objectMapping mapKeyPath:@"countryCode" toAttribute:@"countryCode"];
[objectMapping mapKeyPath:@"contacts" toRelationship:@"contacts" withMapping:contactsMapping];

//Then you set up a serialization mapping and object mapping and POST it

//This method takes care of both the serialization and object mapping
[[RKObjectManager sharedManager].mappingProvider registerMapping:objectMapping withRootKeyPath:@"user"]; 

//POST it
[[RKObjectManager sharedManager] postObject:user delegate:self]; 
```

在向您展示如何进行序列化映射和 POST 之前，我需要知道您期望什么样的 JSON 响应。

**编辑（给定从服务器返回的 JSON）**：

要设置序列化映射和对象映射并发布它，您需要设置资源路径（我在启动应用程序时会这样做）：

```
RKObjectRouter *router = [RKObjectManager sharedManager].router;
[router routeClass:[User class] toResourcePath:@"/users" forMethod:RKRequestMethodPOST]; 
```

您的资源路径可能不是“/users”。

看一下注释下的代码`//Then you set up a serialization mapping and object mapping and POST it`，我在其中添加了序列化映射、对象映射和 POST。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T06:54:26.947

通常在这种情况下您会使用`RKObjectLoader`，可以通过`RKObjectManager`@ill_always_be_a_warriors 所说的方式访问。您使用它的原因是因为它包含自由对象映射（如果已配置）。需要注意的一件事是您直接发布“对象”而不是 JSON。有关更多信息，请尝试查看[RestKit 示例](https://github.com/RestKit/RestKit/tree/master/Examples)以了解如何执行此操作，然后如果您仍然有问题，请在此处发布问题。

# windows - 批量连接字符串很麻烦

> ID：11321030
> 
> 赞同：1
> 
> 时间：2012-07-04T00:34:57.743
> 
> 标签：windows, string, batch-file, concat

我想在没有这个的情况下连接 2 个变量（参见示例） --> " <-- 现在：

```
set upvar="update/"
echo %upvar%%1 
```

**输出：** “更新/”“example.txt”

有了这个输出，我无法制作我的复制命令 - 那么我如何在没有这个“符号的情况下连接这些变量？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T01:01:27.830

批处理文件不需要在字符串周围加上引号。因此，您可以简单地将第一行更改为：

```
set upvar=update/ 
```

这是一个[链接](http://www.dostips.com/DtTipsStringManipulation.php)，其中包含有关批处理文件中的字符串操作的一些有用提示。

# iphone - UITableView 节删除控件

> ID：11321031
> 
> 赞同：1
> 
> 时间：2012-07-04T00:35:03.347
> 
> 标签：iphone, ios, ipad, uitableview

如何在 iOS 的联系人应用程序中显示整个部分的删除控件？

![这是控件的外观。](../Images/8fafcaa02bbddad9afd35e93ce3a9407.png)

# c# - 如何允许用户调整窗口大小？

> ID：11321038
> 
> 赞同：1
> 
> 时间：2012-07-04T00:36:52.187
> 
> 标签：c#, winforms, c#-4.0

目前，当有人使用我的应用程序时，如果他们调整它的大小，那么除了窗口之外的所有东西都会留在同一个地方，而且看起来很难看。我如何调整它的大小以使一切都相对于彼此？这是代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace BroZer
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void Reload_Click(object sender, EventArgs e)
        {
            webBrowser1.Refresh();
        }

        private void Go_Click(object sender, EventArgs e)
        {
            webBrowser1.Navigate(textBox1.Text);
        }

        private void Back_Click(object sender, EventArgs e)
        {
            webBrowser1.GoBack();
        }

        private void Forward_Click(object sender, EventArgs e)
        {
            webBrowser1.GoForward();
        }

        private void textBox1_TextChanged(object sender, EventArgs e)
        {
            webBrowser1.Navigate("https://www.google.com/search?&ie=UTF-8&q=" + textBox1.Text);
        }

        private void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
        {

        }

        private void Save_Click(object sender, EventArgs e)
        {
            webBrowser1.ShowSaveAsDialog();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T00:41:45.953

如果您使用的是 WinForms，则可以使用[锚定和停靠](http://www.techrepublic.com/article/manage-winform-controls-using-the-anchor-and-dock-properties/6165908)来动态调整大小。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T00:42:18.880

Windows 控件有一个名为 Anchor 的属性，您需要对其进行设置，以便当用户调整窗口大小时，您的控件将自动适应窗口大小

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T05:25:27.290

您应该使用控件的[Dock](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.dock.aspx)或[Anchor](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.anchor.aspx)属性。因此，如果窗口调整大小，您的控件将被调整。

阅读这些教程，非常简单易懂。

[使用 Anchor 和 Dock 属性管理 WinForm 控件](http://www.techrepublic.com/article/manage-winform-controls-using-the-anchor-and-dock-properties/6165908)

[使用锚定和停靠属性](http://www.codeproject.com/Articles/2231/Working-with-Anchoring-and-Docking-Properties)

# c - GBA C 编程编译器 gcc

> ID：11321039
> 
> 赞同：3
> 
> 时间：2012-07-04T00:36:54.760
> 
> 标签：c, gcc, compiler-construction, game-boy-advance

我正在尝试开始在 Windows 中为 GBA 编程。有人可以给我指出一个很好的参考，他们能够遵循一套完整的方向吗？

我希望指示包括以下内容：

```
1) downloading the compiler needed for gba development
2) downloading the gcc necessary for gba development 
```

我尝试了几个网站，但总是遇到安装一些 gcc 变体的问题。如果您没有亲自下载 gba 开发工具包并为 gba 编译代码，请不要使用 cygwin 的链接回答此线程。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T02:03:16.700

这是所有有抱负的GBA程序员的链接：

[http://www.coranac.com/tonc/text/setup.htm](http://www.coranac.com/tonc/text/setup.htm)

对于 Windows，这将自动下载您需要的所有 gcc 工具和 GBA 开发工具。它还会制作和设置一堆环境变量以便于编译，不需要额外的工作！您唯一需要做的就是下载一个 GBA 模拟器，可能是视觉男孩前进。

devKitPro 实际上是唯一维护的 GBA 开发组。很棒的网站！

# c# - 如何正确加入多个异步方法的结果？

> ID：11321040
> 
> 赞同：3
> 
> 时间：2012-07-04T00:37:10.417
> 
> 标签：c#, .net, silverlight, asynchronous, parallel-processing

在 Silverlight 应用程序中，我需要并行运行多个异步调用 - 它们将调用服务器来检查数据等。我的伪代码设置如下所示

```
public interface IAsyncVerifier
{
    event EventHandler OnCompleted;

    void Verify();
}

// Subscribe to verifier completion events
foreach (var verifier in this.VerifierEngine.GetVerifiers())
{
    var asyncVerifier = verifier as IAsyncVerifier;
    if (asyncVerifier == null || !asyncVerifier.IsVerifierRunning()) continue;

    asyncVerifier.OnCompleted += (s, a) => DoWhat(); // ????????
    asyncVerifier.Verify();
} 
```

所以，在我看来，我有所有这些任务通用的界面。然后在执行之前我订阅了他们所有的事件和......？

我需要以某种方式等待他们完成并继续我正在做的事情。如何正确编写剩余代码？我看到某种`counter`我每次调用时都会增加`Verify()`并每次收到时都会减少的东西`OnCompleted`。但我没有完全了解如何将它包裹在一起，这样它就不会闻起来。此外，如果我理解正确，Silverlight 会在后台线程上运行它们（调用 WCF 服务）

编辑：

我正在使用 3rd 方验证引擎。`this.Verifier.VerifierEngine`不是我写的。我只能将验证器添加到集合中。通常它们在主线程上执行以验证属性等。我需要创建一个验证器来回调服务器，因此`async`在 Silverlight 中。我不是手动处理线程，当我调用服务时，它会在主线程上返回，所以很好，这部分对我隐藏。我想要的只是能够“等待”直到所有验证者都完成。我现在唯一可以检查的方法就是我正在做的事情。

因此我的用户界面很古怪。完成修改字段后，用户点击“保存”，我的验证开始。我检查是否所有验证者`IsVerifierRunning`并给用户他需要重试的消息。我真的需要能够等待所有人完成然后继续。

1.  我不需要担心线程，除非适当的解决方案涉及使用线程
2.  我已经可以访问结果

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T02:17:22.393

我使用 System.Reactive.Linq 使用 Linq 到 Rx；Observable.FromEvent 压缩方法

```
 var InitNetCellCache = InitNetCell();
            InitNetCellCache.Subscribe((s) =>
            {
                Debug.WriteLine("init NetCell Cache OK.");

                //ScheduleCrrentThread(innerAction);
            });
            var InitKPIMapCache = InitKPIMapCell();
            var zipped = InitKPIMapCache.Zip(InitNetCellCache, (left, right) => left + " - " + right);

            zipped.Subscribe((s) =>
                {
                    //When all async methods are completed
                    runtime.Show();
                }
            );

  IObservable<object> InitNetCell()
    {
        IUnityContainer unityContainer = ServiceLocator.Current.GetInstance<IUnityContainer>();
        INetCellManager inc = unityContainer.Resolve<INetCellManager>();
        var NetCell = Observable.FromEvent<InitCacheCompletedDelegate, object>(
         h => ((object sendera) => h.Invoke(sendera)),
         h => inc.InitCacheCompleted += h,
         h => inc.InitCacheCompleted -= h);
         //Run you async method
        inc.InitCache();
        return from e in NetCell select e;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T01:13:06.587

我也建议使用 Reactive Framework (Rx) 来做你想做的事。

首先，您需要一个函数，该函数将`IAsyncVerifier`变成一个可观察对象，该函数将启动验证过程并订阅`OnCompleted`. 这里是：

```
Func<IAsyncVerifier, IObservable<Unit>> startVerifier = av =>
    Observable.Create<Unit>(o =>
    {
        var subject = new AsyncSubject<Unit>();
        var s1 =
            Observable
                .FromEventPattern(
                    h => av.OnCompleted += h,
                    h => av.OnCompleted -= h)
                .Select(_ => Unit.Default)
                .Subscribe(subject);
        var s2 = subject.Subscribe(o);
        av.Verify();
        return new CompositeDisposable(s1, s2);
    }); 
```

此函数使用 an`AsyncSubject`来确保它捕获事件触发。

现在查询变得非常简单。

```
var query = (
    from av in VerifierEngine
        .GetVerifiers()
        .OfType<IAsyncVerifier>()
        .ToObservable()
    where !av.IsVerifierRunning()
    from result in startVerifier(av)
    select av)
        .ToArray(); 
```

在 Rx 世界中，因为这是一个`SelectMany`查询，所以默认是在线程池上运行这些 - 所以它是并行运行的。

最终`.ToArray()`调用与函数的可枚举版本略有不同。可观察版本将`IObservable<T>`（返回零或多个值的可观察对象）更改为（返回零或多个值`IObservable<T[]>`的单个数组的可观察对象）。换句话说，这将等到所有验证者都完成后才返回所有验证者。

现在您只需订阅查询并运行您想知道所有验证程序都已完成的任何代码。

```
query.Subscribe(avs => DoWhat()); 
```

如果您想在每次验证程序完成时运行一些代码**并且**当所有代码都完成时，您可以取消`.ToArray()`呼叫并订阅查询，如下所示：

```
query.Subscribe(av => { /* Each */ }, () => { /* All */ }); 
```

我希望这一切都足够清楚。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T17:21:53.380

从我听说你的要求来看，我认为一个简单的计数器就足够了。现在，我将使用与您发布的内容最接近的解决方案，并列出需要有效的假设才能使其工作。如果任何假设无效，请告诉我，我会适当地更新代码。

如果您的循环在 UI 线程上运行，则可能如下所示。这里有几个假设。首先是我们在 UI 线程上，验证的调用在 ui 线程上执行。这使 DispatcherSynchronizationContext 生效。来自 wcf 的完成事件将在它们开始的 SynchronizationContext 中执行。这将有效地序列化它们的执行，这将使您的代码具有非常单线程的行为，因此在计数器上不需要锁定/等。更多关于这里[http://msdn.microsoft.com/en-us/library/z8chs7ft(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/z8chs7ft(v=vs.95).aspx)的信息。第二个假设是验证调用将始终完成，即使它们出错。

编辑以匹配退订要求。忍受任何错字，因为我只是为此使用了记事本。EventHandler 可能必须是特定类型的事件处理程序，具体取决于您的事件参数。

```
int activeVerifiers = 0;
List<VerificationCleanup> cleanups = new List<VerificationCleanup>();

EventHandler completionHandler = (s, a) => 
{
     activeVerifiers--;
     if(activeVerifiers == 0)
     {
          //execute some sort of message/notification/all complete event

          foreach(VerificationCleanup cleanup in cleanups)
          {
            cleanup.Cleanup();
          }
     }
}; 

foreach (var verifier in this.VerifierEngine.GetVerifiers())
{
    var asyncVerifier = verifier as IAsyncVerifier;
    if (asyncVerifier == null || !asyncVerifier.IsVerifierRunning()) continue;

    cleanups.Add(new VerificationCleanup(completionHandler, asyncVerifier));

    activeVerifiers++;
    asyncVerifier.OnCompleted += completionHandler
    asyncVerifier.Verify();
}

private class VerificationCleanup
{
    private EventHandler eventHandler = null;
    private IAsyncVerifier verifier = null;

    public VerificationCleanup(EventHandler eventHandler, IAsyncVerifier verifier)
    {
        this.eventHandler = eventHandler;
        this.verifier = verifier;
    }

    public void Cleanup()
    {
        if(this.verifier != null)
        {
            this.verifier.OnCompleted -= this.eventHandler;
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T01:20:55.523

Silverlight 确实有[ManualResetEvent](http://msdn.microsoft.com/en-us/library/system.threading.manualresetevent%28v=vs.95%29.aspx)，它会给你你需要的东西。但是，代码需要看起来与您所拥有的不同。

是否有特定原因您不想使用计数器和自旋循环？它没有那么漂亮，但它也不需要像其他方法一样多的代码更改。

埃里克

# google-apps-script - 谷歌脚本金融应用刷新

> ID：11321047
> 
> 赞同：1
> 
> 时间：2012-07-04T00:37:52.957
> 
> 标签：google-apps-script

我正在编写一个脚本，它将检查谷歌电子表格中的一些值并将结果通过电子邮件发送给我。它检查的值主要来自 FinanceApp（过去一个月的各种股票价格），当电子表格打开时一切正常，但是当电子表格关闭时（我有一个时间触发器设置为每天运行脚本）我接收包含 NaN 而不是实际值的电子邮件！

这是我的代码的骨架：

```
    var 电子表格 = SpreadsheetApp.openById(id);
    var sheet = spreadsheet.getSheetByName(sheetName);
    var rows = sheet.getRange(range);
    var 值 = rows.getValues();
    MailApp.sendEmail(email, "stock stuff", values);

```

这是我从 FinanceApp 中检索的值类型的示例：

```
    =GoogleFinance("GOOG","PRICE")

```

在此先感谢您的帮助 ：）

* * *

我最终将所有金融内容转移到股市收盘后每天运行的脚本中。该脚本将信息作为一种每日摘要通过电子邮件发送给我，并将其存储在电子表格中，以便我可以随时查看。

这样电子表格没有逻辑，只是一个视图。虽然这不是我最初问题的解决方案，但由于这种观点和逻辑的混合，我最初的方法存在缺陷:)

# php - 使用 preg_replace 删除所有非字母数字字符

> ID：11321048
> 
> 赞同：70
> 
> 时间：2012-07-04T00:38:25.423
> 
> 标签：php, regex, preg-replace

如何从 PHP 中的字符串中删除所有非字母数字字符？

这是我目前正在使用的代码：

```
$url = preg_replace('/\s+/', '', $string); 
```

它只替换空格。

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2012-07-04T00:40:13.023

```
$url = preg_replace('/[^\da-z]/i', '', $string); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-07-04T01:27:54.150

起初这就是我的做法

```
$str = 'qwerty!@#$@#$^@#$Hello%#$';

$outcome = preg_replace("/[^a-zA-Z0-9]/", "", $str);

var_dump($outcome);
//string(11) "qwertyHello" 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-07-30T13:05:39.280

不知道为什么没有人提出这个建议，但这似乎是最简单的正则表达式：

```
preg_replace("/\W|_/", "", $string) 
```

您也可以在这里看到它的实际效果：http: [//phpfiddle.org/lite/code/0sg-314](http://phpfiddle.org/lite/code/0sg-314)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-06-26T07:31:03.847

您可以使用，

```
$url = preg_replace('/[^\da-z]/i', '', $string); 
```

您可以用于 unicode 字符，

```
$url = preg_replace("/[^[:alnum:][:space:]]/u", '', $string); 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-07-04T00:42:57.797

```
preg_replace('/[\s\W]+/', '', $string) 
```

似乎有效，实际上该示例在 preg_replace 上的 PHP 文档中

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-07-04T00:55:58.800

```
$alpha = '0-9a-z'; // what to KEEP
$regex = sprintf('~[^%s]++~i', preg_quote($alpha, '~')); // case insensitive

$string = preg_replace($regex, '', $string); 
```

# c# - 在 C# 中“附加”整数的好方法？

> ID：11321049
> 
> 赞同：7
> 
> 时间：2012-07-04T00:38:30.173
> 
> 标签：c#, integer

我有两个整数，例如。15和6，我想得到156。我做什么：

```
int i = 15;
int j = 6;
Convert.ToInt32(i.ToString() + j.ToString()); 
```

有更好的方法吗？

**更新：** 感谢您所有的好答案。我运行了一个快速的秒表测试以查看性能影响：这是在我的机器上测试的代码：

```
static void Main()
    {
        const int LOOP = 10000000;
        int a = 16;
        int b = 5;
        int result = 0;
        Stopwatch sw = Stopwatch.StartNew();
        for (int i = 0; i < LOOP; i++)
        {
            result = AppendIntegers3(a, b);
        }
        sw.Stop();
        Console.WriteLine("{0}ms, LastResult({1})", sw.ElapsedMilliseconds,result);
    } 
```

这是时间：

```
My original attempt: ~3700ms 
Guffa 1st answer: ~105ms 
Guffa 2nd answer: ~110ms 
Pent Ploompuu answer: ~990ms 
shenhengbin answer: ~3830ms 
dasblinkenlight answer: ~3800ms
Chris Gessler answer: ~105ms 
```

Guffa 提供了一个非常好的和智能的解决方案，而 Chris Gessler 为该解决方案提供了一个非常好的扩展方法。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-04T00:45:01.530

你可以用数字来做。无需字符串转换：

```
int i=15;
int j=6;

int c = 1;
while (c <= j) {
  i *= 10;
  c *= 10;
}
int result = i + j; 
```

或者：

```
int c = 1;
while (c <= j) c *= 10;
int result = i * c + j; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T03:20:41.653

这是一个扩展方法：

```
public static class Extensions
{
    public static int Append(this int n, int i)
    {
        int c = 1;
        while (c <= i) c *= 10;
        return n * c + i; 
    }
} 
```

并使用它：

```
 int x = 123;
    int y = x.Append(4).Append(5).Append(6).Append(789);
    Console.WriteLine(y); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-04T00:45:01.950

```
int res = j == 0 ? i : i * (int)Math.Pow(10, (int)Math.Log10(j) + 1) + j; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T07:55:42.887

我想用`string.Concat(i,j)`

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-07-04T01:46:31.053

```
int i=15
int j=6
int result=i*10+6; 
```

# netty - netty 可以处理重新分段的 TLS 记录吗？

> ID：11321056
> 
> 赞同：0
> 
> 时间：2012-07-04T00:39:52.577
> 
> 标签：netty

由于 NIO TCP 读取事件（本质上是 TCP 缓冲段）与作为有效负载携带的 TLS 记录之间没有对应关系，因此我试图弄清楚 Netty 是否正确处理随机重新分段为单独的 NIO 读取的 TLS 记录。

在 SSLEngine.unwrap() 中，这将导致 BUFFER_UNDERFLOW 只需在此处中断循环即可处理： [https ://github.com/netty/netty/blob/master/handler/src/main/java/io/netty/handler /ssl/SslHandler.java#L483](https://github.com/netty/netty/blob/master/handler/src/main/java/io/netty/handler/ssl/SslHandler.java#L483)

有没有人有重新分段的经验，如果这段代码足以在所有情况下恢复 TLS 记录？任何有关测试的建议将不胜感激？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T04:42:26.057

答案是肯定的。打破循环后，`unwrap()`当接收到更多数据时，将再次调用该方法。如果您发现`SslHandler`无法处理重新分段的 TLS 记录的错误，请提交错误以便我们修复它。

# regex - mod rewrite 以重定向除根以外的所有内容

> ID：11321059
> 
> 赞同：0
> 
> 时间：2012-07-04T00:40:53.513
> 
> 标签：regex, apache, mod-rewrite

所以我有 SomeFunnyWebsite.com 和 ActualSite.com 如果有人登陆 SomeFunnyWebsite.com 我希望他们看到有趣的图片，但如果他们转到 SomeFunnyWebsite.com/AnyThing 我需要用 301 重定向到 ActualSite.com

```
 RewriteEngine on
        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteCond %{REQUEST_FILENAME} !-d
        RewriteRule ^(.*)$ http://actualsite.com/$1 [R=301,L,QSA] 
```

但这不会重定向到任何东西。但我已经验证其他重定向规则可以工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T01:29:28.723

`/`尝试使用为特定域反转匹配的重写条件。

```
RewriteEngine on
RewriteCond %{REQUEST_URI} !^/$
RewriteCond %{HTTP_HOST} ^(www\.)?somefunnywebsite\.com$ [NC]
RewriteRule ^.*$ http://actualsite.com%{REQUEST_URI} [R=301,L,QSA] 
```

我尚未对其进行测试，但这应该可以帮助您入门。（我建议使用 302 启动，因为浏览器倾向于缓存 301 重定向。）

# css - 文本对齐兼容性

> ID：11321065
> 
> 赞同：6
> 
> 时间：2012-07-04T00:41:34.930
> 
> 标签：css, html, html-table

在表格标题中，`th`标签的默认文本对齐方式是居中。

考虑以下代码：

```
<!DOCTYPE html>
<html>
    <head>
        <style type="text/css">
            body {
                background-color: aliceblue;
            }
            .default_grid {
                text-align: left;
                width: 600px;
                color: white;
            }
                .default_grid th {
                    /*  text-align: left;  */
                }
                .default_grid .first {
                    background-color: purple;
                }
                .default_grid .second {
                    background-color: orange;
                }
        </style>
    </head>
    <body>
        <table class="default_grid">
            <thead>
                <tr>
                    <th class="first">Test One</th>
                    <th class="second">Test Two</th>
                </tr>
            </thead>
        </table>
    </body>
</html> 
```

在 Firefox、[Internet Explorer 7](http://en.wikipedia.org/wiki/Internet_Explorer_7)（及更低版本）、Safari、Chrome 和[Opera](http://en.wikipedia.org/wiki/Opera_%28web_browser%29)中，<th> 中的文本左对齐。在[Internet Explorer 8](http://en.wikipedia.org/wiki/Internet_Explorer_8)和[Internet Explorer 9](http://en.wikipedia.org/wiki/Internet_Explorer_9)中，文本居中对齐，除非直接在 <th> 标记上指定规则（取消注释第 14 行）。

哪一个是正确的行为？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-04T02:32:47.487

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-03T19:52:11.313

尽管@vulcanraven 的回答在发布时基本上是正确的，但情况已经发生了变化。当前的 HTML 规范 HTML5 描述了“预期呈现”，这不是强制性的，但可以视为隐含推荐，如果浏览器供应商愿意，可以声称符合它。“预期呈现”规则`th`包括以下内容：

“用户代理应该在其用户代理样式表中有一个规则，该规则匹配具有父节点的元素，该父节点的 'text-align' 属性的计算值是其初始值，其声明块仅包含一个声明，该声明设置'text-align' 属性到值 'center'。”</p>

这是一种相当复杂的说法，即`th`元素默认居中。（这也很奇怪，因为 CSS 无法以这种方式引用属性的计算值。）但它确实表示只有当父元素（即`tr`元素）没有`text-align`设置为不同于`left`.

然而，许多现代浏览器未能实现这一点。在 Chrome 和 Firefox 中，单元格是左对齐的。如果您使用没有 CSS 或显示属性的简单表格进行测试并使用开发工具检查它，您可以看到`th`单元格居中，但这并没有反映在 CSS 中；这些浏览器根据 CSS 规则计算属性（并且没有“预期呈现”中描述的浏览器样式表规则），但如果`text-align`根本没有为 a 设置`th`，它会居中并`text-align`显示为`center`，就像从蓝色开始一样天空。这意味着这些浏览器具有处理“默认居中”的临时规则。IE 11 似乎实现了“建议渲染”并将此处的单元格显示为居中，但它没有显示这是基于什么 CSS 规则。

# java - 这叫什么名字，如何用 Java 计算？

> ID：11321069
> 
> 赞同：0
> 
> 时间：2012-07-04T00:42:05.173
> 
> 标签：java, math

我不擅长数学术语。

这个叫什么？

假设你有数字 48，你需要找到 48 的两个因数。在 48 中将是 8,6 在 72 中将是 9,8

我不想为 48 或 12,6 说 12,4

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T00:56:06.353

```
public static int[] revominuteFactors(long x) {
    int[] result = new int[2];
    for (int a = 0; a <= x; a++) {
        for (int b = 0; b <= x; b++) {
            if ((a * b) == x) {
                if (result[0] == 0 && result[1] == 0) {
                    result[0] = a;
                    result[1] = b;
                } else if (Math.abs(a - b) < Math.abs(result[0] - result[1])) {
                    result[0] = a;
                    result[1] = b;
                }
            }
        }
    }
    return result;
} 
```

问了一位数学教授，他说它的名字与 revominute 因素有关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T00:47:06.870

距离最小的一对因子没有特定的名称。但是很容易计算出这是不是你想要的。（至少和一般的因式分解一样容易，但对于小数来说它是微不足道的。）

这是一种方法（当两个因素接近时，这将是最快的。）它基于费马的因式分解算法。

```
static int sqrRoot(int n){
    //Find largest square <= n
    int sqr = 0;

    for (int i=15; i >= 0; --i){
        int newsqr = sqr + (1<<i);
        if (newsqr * newsqr <= n) {sqr = newsqr;}
    }

    return sqr;
}

static int[] closestFactors(int n){
    if (n <= 0) {throw new IllegalArgumentException();}

    int s = sqrRoot(n);
    if (s*s == n){
        int[] ans = {s,s};
        return ans;
    }

    int a = s * s - n;      
    while(s < n){
        if (a > 0){ //may not be true on first iteration
            int sa = sqrRoot(a);
            //whole number case
            if (sa*sa == a){    //We found a factorization
                int[] ans = {s-sa, s+sa};
                return ans;
            }
        }

        //half number case
        int sa2 = sqrRoot(a+s);
        if (sa2 * (sa2+1) == a+s){
            int[] ans = {s-sa2, s+sa2+1};
            return ans;
        }

        a += s + s + 1;
        s++;
    }

    int[] ans = {1, n};
    return ans;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T00:50:10.547

我不知道这个的名字。

在 Java 中，您的计算方式与在任何其他语言中相同。

1.  对数字进行因式分解。
2.  将一组因子划分为两个子集，以使两组乘积之间的差异最小化。蛮力应该作为第一次尝试......除非有很多因素。

请注意，在最坏的情况下，第 1 步是 NP，第 2 步（蛮力）是“仅” `O(F^3)`，其中`F`是因素的数量。

一种更暴力的方法是在适当范围内迭代成对的数字，测试它们的乘积是否是原始数字。

* * *

编码和调试留给读者作为练习:-)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-04T00:57:59.270

显然，您可以找到所有因素并从列表中选择适当的因素。

作为替代方案，您可以从`low = high = floor(sqrt(n))`. 然后，如果`low * high < n`，增加`high`; 如果`low * high > n`, 减量`low`; 如果`low * high = n`，则`(low, high)`作为答案返回。这不是非常有效，但您可能会进行一些小的优化。

例子：

```
n = 325
low = 18, high = 18, low * high = 324
low = 18, high = 19, low * high = 342
low = 17, high = 19, low * high = 323
low = 17, high = 20, low * high = 340
low = 16, high = 20, low * high = 320
low = 16, high = 21, low * high = 336
low = 15, high = 21, low * high = 315
low = 15, high = 22, low * high = 330
low = 14, high = 23, low * high = 322
low = 14, high = 24, low * high = 336
low = 13, high = 24, low * high = 312
low = 13, high = 25, low * high = 325
answer: 13, 25 
```

这很粗略，但可以替代因式分解。请注意，找到像这样的两个因子的任何有效解决方案都能够有效地分解密码学中使用的伪素数，因此您可能不会很快得到任何*东西*。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-04T01:00:26.030

要在通常情况下进行因式分解`N`，一个简单的算法是从 开始`p = 2`并检查是否`p`除以`N`。如果不是，则设置`p`为下一个值（例如下一个整数或下一个素数）并重复。

在您的问题的理想情况下，这些因素将接近`sqrt(N)`. 因此，您可以从 开始`p = floor(sqrt(N))`并递减`p`，直到找到一个除以`N`.

每次减少测试值都会起作用。在通常情况下，可能有数学上更聪明的方法 - 例如尝试连续的素数。如果一个数可以因式分解，那么素数就可以作为一个因式。但是在您的问题中，您并不关心素数，因此您在这里可能无法使用它们。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-04T01:01:43.213

我认为这样的数字没有特定的名称。至于找到它们，最简单的方法可能是（给定一个数字 n）：

```
int factor1, factor 2;
for (int i = (int)(Math.sqrt(n)); i > 0; i--) {
    if (i/n == (double)i/n) {
        factor1 = i;
        factor2 = i/n;
        break;
    }
} 
```

希望有帮助！

# linux - 从 pdftotext 和 pdfimages 将 PDF 图像插入文本？

> ID：11321070
> 
> 赞同：2
> 
> 时间：2012-07-04T00:42:18.690
> 
> 标签：linux, unix, pdf, text-extraction, pdftotext

我能够安装`pdftotext`实用程序（我猜是 Linux 附带的）将 PDF 转换为文本，并在 Mac 上提取图像：

```
# install poppler, xpdf, and imagemagick
brew install imagemagick
brew install poppler # not sure if this worked, had to install `xpdf` from online .dmg
pdftotext sample.pdf output.txt
pdfimages sample.pdf pdf-images
# then convert .ppm to .jpg
# one at a time:
# convert pdf-images-001.ppm pdf-images-001.jpg
# batch:
mogrify -format jpg *.ppm 
```

所以现在我有一个来自 PDF 的（令人印象深刻的格式良好的）文本，以及我必须使用 ImageMagick`output.txt`转换的一堆图像。`.ppm``.jpg`

问题是，现在有什么方法可以在`output.txt`文档的正确位置插入对这些图像的引用？或者，有没有办法将这两个命令结合起来，以便同时提取文本和图像并在文本中创建指向图像的链接？想知道我是否必须自己手动编写解析代码才能将图像插入到文本中。

# php - 自动进行第二次搜索

> ID：11321075
> 
> 赞同：0
> 
> 时间：2012-07-04T00:42:41.883
> 
> 标签：php, database, search, lookup

我有 PHP 代码来做一个简单的 MySQL 数据库搜索，只有两列数据。我怀疑当我可以简单地以不同的方式做时，我可能已经走了很长一段路。

我有一个表格，您可以输入名称或 IP 地址，它会在数据库中搜索其中任何一个，并输出结果。每个名称只能有一个 IP 地址（他们使用的最后一个）（完全唯一的名称将只有 1 个结果，如果部分名称匹配多个帐户，则有多个结果），但一个 IP 地址可以有多个名称（使用多个帐户的人在同一个 IP 上）。我想要做的是拥有它，所以如果您搜索一个名称，它将执行常规的单个结果（如果输入了完整的唯一名称），但然后在它下面，如果只有名称，则对 IP 进行二次搜索在表格中搜索。

> “您搜索 NAME 已返回以下结果：{results}。我们还发现了这些使用相同 IP 地址的帐户：{results matching the same IP from the first result of the Name search}”。

这是我到目前为止的代码：

* * *

*（一些清理，因为我使用的是 GET）*

```
$iplookup = strtolower($_GET['iplookup']);
$iplookup = stripslashes($iplookup);
$iplookup = strip_tags($iplookup);
$iplookup = preg_replace('/[^A-Za-z0-9\._]/','',$iplookup);

$sql = mysql_query("select 
* from banlistip where name like '%$iplookup%' OR lastip like '%$iplookup%'
");

if (empty($iplookup)) {
echo '<br><b>You left the search form empty.</b>';
} else {
while ($row = mysql_fetch_array($sql)) {
        echo '<br/> Name: '.$row['name'];
        echo '<br/> Player IP: '.$row['lastip'];
        echo '<br/><br/>';
} 
```

}

* * *

然后在这里它会得到那个`$row['lastip']`变量，然后搜索那个变量，这相当于首先搜索一个 IP 地址。

* * *

这样做的全部目的是消除几个步骤并立即查看所有所需的结果。通常，为了进行 IP 搜索，我必须**搜索名称，突出显示 + 复制 ip，返回表单，然后搜索 IP**。

* * *

* * *

具有名为“name”和“lastip”的两列的表分别具有如下数据：

```
player1 111.111.111.111
player2 222.222.222.222
player3 111.000.111.000
player4 222.000.222.000
altaccount1 111.000.111.000
altaccount2 222.222.222.222 
```

（如果你搜索 Player2，你会得到一个结果，因为它是一个唯一的名字。如果你搜索 Player2 的 IP，你会得到两个结果 [player2 + altaccount2]，因为有一个备用帐户使用相同的IP地址。）

（请原谅这篇很长的帖子。我只想提供尽可能多的细节，我试图研究这个，但现在有一个障碍。**非常感谢，再一次，很抱歉让你阅读所有这些。** )

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T00:56:46.373

我认为您要做的事情需要 2 个单独的 SQL 字符串，并调用所提供数据所需的任何一个。

因此，如果`$iplookup`显然是一个 IP（使用正则表达式检查），那么：

```
$sql = "SELECT * FROM banlistip WHERE lastip LIKE '%$iplookup%'"; 
```

否则你将使用：

```
$sql = "SELECT * FROM banlistip WHERE name LIKE '%$iplookup%'"; 
```

一个正则表达式，您可以使用以下命令进行`preg_match()`检查`regular-expressions.info`：

```
$regex = '/(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)/'; 

if (preg_match($regex, $iplookup)) {
    // Call IP SQL
} else {
    // Call Name SQL
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T01:08:28.713

```
SELECT * FROM banlistip
WHERE lastip = (SELECT DISTINCT lastip FROM banlistip WHERE name LIKE '%$iplookup%' OR lastip LIKE '%$iplookup%') 
```

# linq - Linq 仅返回表中选定的列

> ID：11321076
> 
> 赞同：1
> 
> 时间：2012-07-04T00:42:48.797
> 
> 标签：linq, entity-framework

我只想从 LINQ 查询中返回一些列。我怎么做？这是asp.net：

```
 <asp:EntityDataSource ID="RequestorDataEntitySource" runat="server"
        ConnectionString="name=RequestDataEntities" 
        DefaultContainerName="RequestDataEntities" EnableFlattening="False" 
        EntitySetName="requests"
        OnQueryCreated="Requestor_QueryCreated" >
    </asp:EntityDataSource>
    <asp:GridView ID="RequestorGridView" runat="server" 
        DataSourceID="RequestorDataEntitySource">
    </asp:GridView> 
```

以及背后的代码：

```
protected void Requestor_QueryCreated(object sender, QueryCreatedEventArgs e)
    {

        var currentRequestor = e.Query.Cast<requests>();
        e.Query = (from rq in currentRequestor
                   where rq.lname == "Somebody"
                   select rq);
    } 
```

这用所有 20 列填满了网格，但我可以只选择几个特定的​​列（fname、lname、email）吗？我在这里看到了很多关于这个主题的帖子，但我无法让这些示例对我有用。如果我尝试将选择更改为：

```
 select new { rq.fname, rq.lname }); 
```

我收到一个错误：

> System.InvalidOperationException：QueryCreated 事件返回了“ObjectQuery `1' when type 'ObjectQuery`1”类型的查询是必需的。

我遗漏了一些东西，请赐教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-06T10:32:07.130

您最初在 entitydatasource 中选择的内容应该与创建的 on-query 中的相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T01:13:08.927

也许**Select**属性是您需要的：

```
<asp:EntityDataSource ID="RequestorDataEntitySource" runat="server"
    ConnectionString="name=RequestDataEntities" 
    DefaultContainerName="RequestDataEntities" EnableFlattening="False" 
    EntitySetName="requests"
    Select="it.fname, it.lname"
    OnQueryCreated="Requestor_QueryCreated" >
</asp:EntityDataSource> 
```

# linux - 让屏幕保持活力

> ID：11321083
> 
> 赞同：1
> 
> 时间：2012-07-04T00:44:07.540
> 
> 标签：linux, process, gnu-screen

我在使用屏幕时遇到问题。我知道屏幕会话在主进程工作时工作，但我怎样才能让这个会话保持活力？我需要这个，因为会话关闭时有一些子进程被杀死。

我如何开始一个会话：

```
-A -m -d -S test  mytestapplication 
```

也许我需要在屏幕会话之外启动子进程，但是如何？也许我需要设置屏幕以保持会话处于活动状态，直到内部的所有进程都被关闭，但是如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T01:02:23.850

我不确定我是否完全理解你的问题。如果要防止`screen`在其所有子进程退出后自动终止，可以`zombie`在配置文件（系统范围或主目录）中设置命令，例如：

```
zombie KR 
```

这将防止已完成进程的窗口自动关闭，并使`screen`会话无限期地保持活动状态。命令调用之后的第一个字符 ( `K`)`zombie`然后杀死已完成进程的当前窗口，而第二个字符 ( `R`) 尝试重新启动关联的进程。鉴于您正在使用`-d`and`-m`标志运行屏幕，您显然需要使用`screen -r`or附加到会话`-R`。

# c# - 无论我的表单是否有焦点，我能否确保我的控件捕获第一个事件？

> ID：11321086
> 
> 赞同：4
> 
> 时间：2012-07-04T00:44:54.680
> 
> 标签：c#, winforms

我对 C# 比较陌生。我有一个带按钮的窗口。如果窗口失焦并且我第一次单击按钮，则第一次单击会获取窗口的焦点，并且所有后续单击都将执行各自的操作。

有没有办法执行与按钮相关的事件而不是抓住焦点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-04T01:13:43.293

听起来您正在描述 ToolStrips 的操作方式，除非应用程序具有焦点，否则它不会触发单击事件。

一种解决方法是使用您自己的 ToolStrip 并让鼠标激活为控件提供焦点，然后让按钮触发它的单击事件：

```
public class ToolStripIgnoreFocus : ToolStrip {
  private const int WM_MOUSEACTIVATE = 0x21;

  protected override void WndProc(ref Message m) {
    if (m.Msg == WM_MOUSEACTIVATE && this.CanFocus && !this.Focused)
      this.Focus();

    base.WndProc(ref m);
  }
} 
```

重建您的解决方案，您应该`ToolStripIgnoreFocus`会在工具箱中看到可用的控件。尝试将其添加到您的表单中，然后相应地添加您的工具按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T00:53:04.320

据我所知，您已经描述了一种固有的 Windows 行为，因此这可能是不可能的。

另一种方法是利用 Windows 应用程序的“始终位于顶部”样式，此处对此进行了说明：

[如何使窗口始终保持在.Net 的顶部？](https://stackoverflow.com/questions/683330/how-to-make-a-window-always-stay-on-top-in-net)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T01:02:42.643

这是正常的 Windows 行为。我认为您无法覆盖的东西（以便触发点击事件，但不会将您的应用程序置于前台和活动状态）。

如果您不想将焦点放在窗口上，但仍想与窗口本身提供一些“交互”，请尝试使用键盘挂钩或热键事件。例子：

*   [http://social.msdn.microsoft.com/Forums/en-US/Vsexpressvb/thread/2622427d-1e15-4f30-b01d-57b0ba054f5c](http://social.msdn.microsoft.com/Forums/en-US/Vsexpressvb/thread/2622427d-1e15-4f30-b01d-57b0ba054f5c)
*   [在 WPF / C# 中使用全局键盘挂钩 (WH_KEYBOARD_LL)](https://stackoverflow.com/questions/1639331/using-global-keyboard-hook-wh-keyboard-ll-in-wpf-c-sharp)
*   [低级键钩](https://stackoverflow.com/questions/2191779/low-level-keyhook)
*   [http://www.pinvoke.net/default.aspx/user32/RegisterHotKey.html](http://www.pinvoke.net/default.aspx/user32/RegisterHotKey.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T00:51:55.133

这就是大多数 Windows 应用程序的工作方式 - 应用程序需要先获得焦点，然后才能接收点击事件。

# asp-classic - 循环查询结果

> ID：11321090
> 
> 赞同：0
> 
> 时间：2012-07-04T00:45:05.697
> 
> 标签：asp-classic

我对asp完全陌生。对不起，如果它真的很基础，但我无法通过我的研究找到。

我想通过 ID 和 NAME 查询 Table_A。（ID 是 PK，Name 是可选的）然后如果找到 ID 但 Name 为空，我想使用该 ID 从其他表中查询。

```
Select * 
From Table_A; 
```

给我

```
ID    NAME
1     PAUL
2     BOB
3     NULL 
```

然后将其保存到存储过程中的光标之类的地方。然后在循环期间，ID 名称为空，因此运行 Select * From Table_B where ID = 3;

如果我标记某些内容，请帮助正确标记。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T01:05:45.063

您不需要进行 2 次查询；你可以这样做：

```
select coalesce(a.name,b.name) as name
      , a.id 
from table_a a left join table_b b on b.id=a.id; 
```

如果不为空，这将返回表 a 中的名称；否则从表 b。

# python - SQLite 中的事务与 Flask

> ID：11321092
> 
> 赞同：1
> 
> 时间：2012-07-04T00:45:13.990
> 
> 标签：python, sqlite, transactions, flask

我正在使用带有 SQLite 作为数据库的 Flask 编写 Python Web 应用程序

我有一个带有自动递增 PK 和文件名的表。我想在插入此表时生成文件名，以便第一个文件命名为 file1、第二个文件 2 等。最好的方法是什么？我的第一个想法是做一个事务，我找出下一个 auto-inc，生成文件名，然后插入数据库并提交。问题是我似乎在 Flask 中找不到任何关于事务的信息，听起来它是自动完成的，但我不确定我是否可以依赖 id 查找和 insert 是原子的。我猜另一种选择是以某种方式在插入语句中使用 auto-inc 值，那个新值在那个时候是否可用？任何对这些方法或替代方法的见解将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-09T16:54:51.637

如果我正确理解您的问题，您的表格如下所示：

```
CREATE TABLE files (
  file_id INTEGER PRIMARY KEY AUTOINCREMENT,
  filename TEXT
) 
```

你想原子地：

1.  使用自动递增的主键值在表中创建一个新行。
2.  获取该主键。
3.  使用从键值派生的名称设置行的文件名。

在 Python 中使用 sqlite3，使用事务（根据您的要求）：

```
import sqlite3
con = sqlite3.connect('files.db')
with con:   # Context manager on the connection manages the transaction
    cur = con.cursor()
    cur.execute('INSERT INTO files DEFAULT VALUES')
    file_id = cur.lastrowid   # Get the primary key of the new row
    cur.execute(
        'UPDATE files SET filename="file"||file_id WHERE file_id=?',
        (file_id,)
    ) 
```

有关上下文管理器的更多详细信息，请参见此处：

[http://docs.python.org/2/library/sqlite3.html](http://docs.python.org/2/library/sqlite3.html)

运行后：

```
sqlite> SELECT * FROM files;
1|file1 
```

由于您使用的是 Flask，因此没有真正的区别。但是，您可能会在 before_request 中调用 connect 并将结果分配给全局，如下所示：

[http://flask.pocoo.org/docs/patterns/sqlite3/](http://flask.pocoo.org/docs/patterns/sqlite3/)

最后，您可以考虑的其他方法是表上的 VIEW（如果文件名永远不会改变，并且总是简单地从主键派生），或者表的 AFTER INSERT 触发器。

# google-app-engine - 如何在谷歌应用引擎上设置 SSL（自定义域名）

> ID：11321094
> 
> 赞同：6
> 
> 时间：2012-07-04T00:45:37.660
> 
> 标签：google-app-engine

Google 刚刚宣布对自定义域的 SSL 支持，但我无法理解如何设置它，因为无法在 GAE 上生成证书签名请求 (CSR)？！

[http://support.google.com/a/bin/answer.py?hl=en&hlrm=en&answer=2644386](http://support.google.com/a/bin/answer.py?hl=en&hlrm=en&answer=2644386) 我错过了什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-27T23:37:44.833

扩展上述内容：

以下三个步骤应该足以生成私钥和自签名证书，适用于在 linux 机器上测试 GAE 上的 SSL：

*   openssl genrsa -out yourdomain.com.key 1024
*   openssl req -new -key yourdomain.com.key -out yourdomain.com.csr
*   openssl x509 -req -days 365 -in yourdomain.com.csr -signkey yourdomain.com.key -out yourdomain.com.crt

免责声明：它有效，但我不知道我在做什么

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-29T23:18:13.057

存在各种程序来创建证书签名请求 (CSR)。我在 linux 机器上使用“openssl”来生成密钥和 CSR。

[1）我为自定义域（ https://cloud.google.com/appengine/docs/ssl](https://cloud.google.com/appengine/docs/ssl)）生成了一个未加密的 PEM 编码的 RSA 私钥，由 Google 的 SSL 指定

```
cd $HOME
openssl genrsa -out rsa_private_key.key 2048 
```

2) 使用“rsa_private_key.key”生成所需的证书签名请求 (CSR) 文件。

```
openssl req -new -key rsa_private_key.key -out request.csr 
```

您将被问到以下问题：

```
 Country Name (2 letter code) [AU]: US
   State or Province Name (full name) [Some-State]: Illinois
   Locality Name (eg, city) []: Chicago
   Organization Name (eg, company) [Internet Widgits Pty Ltd]: Chicago Company, Ltd.
   Organizational Unit Name (eg, section) []: IT
   Common Name (eg, YOUR name) []: checkout.customedomain.com
   Email Address []: 
```

我忽略了另外两个问题，一切正常。位于您的主目录 ($HOME) 上的“request.csr”是证书颁发机构提供者生成您的证书所需的 CSR 文件。同样，它不一定是 openssl：供应商支持各种平台的许多工具。请记住 Google 的要求。

关于自定义域的旁注：

确保您的自定义域包含子域或“完全限定域名”。“万维网”。被认为是一个子域，并且它始终是 Google Appengine 中的 ssl 所必需的（10/2014。）因此，在我的示例中，如果我想在 customedomain.com 使用 SSL，我会添加“www.customedomain.com”您可以将您的裸域重定向到您的完整合格域名。

Google Appengine 不为裸域提供 SSL 支持，例如：[https ://customedomain.com](https://customedomain.com)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-09T16:30:59.727

这是从我的回答中转贴的： [如何从 .key 和 .crt 文件中获取 .pem 文件？](https://stackoverflow.com/questions/991758/how-to-get-an-openssl-pem-file-from-key-and-crt-files/31905897#31905897)

我试图从 Godaddy 到应用引擎。诀窍是在终端（mac）中使用这一行来生成密钥和csr：

```
openssl req -new -newkey rsa:2048 -nodes -keyout name.unencrypted.priv.key -out name.csr 
```

完全一样，但是用我的域名替换 name（这甚至不重要）

此外，接下来是一堆问题，我回答了与通用名称/组织有关的所有问题 www.name.com ，我只需按 Enter 键就跳过了密码和公司名称

然后我打开.csr文件，复制，粘贴到go daddy的csr表单中，等待godaddy批准，然后下载，解压，在终端导航到解压后的文件夹，输入：

cat otherfilegodaddygivesyou.crt gd_bundle-g2-g1.crt > name.crt

然后我使用了谷歌应用程序自定义域 SSL 问题中的这些说明，它们是：

```
openssl rsa -in privateKey.key -text > private.pem
openssl x509 -inform PEM -in www_mydomain_com.crt > public.pem 
```

完全一样，除了我使用 name.unencrypted.priv.key 而不是 privateKey.key，而不是 www_mydomain_com.crt，我使用 name.crt

然后我将 public.pem 上传到“PEM 编码 X.509 证书”的管理控制台，

并为“未加密的 PEM 编码的 RSA 私钥”上传了 private.pem。

..这终于奏效了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-04T01:31:14.420

您需要使用 CA 生成证书并上传。他们不提供证书创建作为服务。

# django - 我如何将 memoization 应用于查询集方法，如 get、get_or_create

> ID：11321095
> 
> 赞同：0
> 
> 时间：2012-07-04T00:45:47.690
> 
> 标签：django, django-models, memoization

在我的代码中，我需要缓存一些查找，例如：

```
MyModel.objects.get(slug='foo')

MyModel.objects.get_or_create(slug='bar', defaults={'name':'bar'}) 
```

为了避免命中DB。

我猜对这些方法应用记忆可能是一个很好的解决方案，但我没有找到正确的方法来实现这一点，

你能帮助我吗，

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T01:55:08.670

这些方法为您返回对象，因此您可以立即缓存它。

```
from django.core.cache import cache

a = cache.get('a')
if not a:
    a = MyModel.objects.get(slug='foo')
    cache.set('a', a)

b = cache.get('b')
if not b:
    b, exists = MyModel.objects.get_or_create(slug='bar', defaults={'name':'bar'})
    cache.set('b', b) 
```

希望我不会误解你的问题。

# apache - Apache htaccess 文件，我哪里出错了？

> ID：11321100
> 
> 赞同：0
> 
> 时间：2012-07-04T00:46:26.117
> 
> 标签：apache, .htaccess

真的找不到我的错误，我可以访问站点地图/链接，但所有其他人都给出了 404 Not Found 错误。

```
DirectoryIndex index.php index.php?page=home index.php?page=error
Options Indexes FollowSymLinks MultiViews

AllowOverride All
Order allow,deny
Allow from all

<IfModule mod_rewrite.c>
    RewriteEngine On

    # some other stuff #

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteBase /
    RewriteRule ^sitemap/?$ sitemap.xml.php [L]
    RewriteRule ^([a-zA-Z]+)/?$ index.php?page=$1 [L]
    RewriteRule ^products/?$ index.php?page=products [L]
    RewriteRule ^products/([0-9]+)/?$ index.php?page=products&id=$1 [L]
</IfModule> 
```

我真的很感激一些帮助，我绝对不喜欢 .htaccess 文件......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T08:40:58.333

除了重写规则，这里还有其他问题：

```
DirectoryIndex index.php index.php?page=home index.php?page=error 
```

这意味着，对于文件夹，将按以下顺序选择显示索引的**文件（第一个现有获胜）：**

1.  `index.php`
2.  `index.php?page=home`（这是**文件名**）
3.  `index.php?page=error`（这是**文件名**）

我怀疑这是你的意图。

下一个：

```
AllowOverride All 
```

如果您已经进入`.htaccess`并且`AllowOverride`受到限制，这将无济于事，如果不是，则没有必要再次编写此内容。

```
Order allow,deny
Allow from all 
```

这基本上是说“允许每个人在任何地方”，无论如何这是默认设置。除非它在上层或 apache 配置中以某种方式受到限制，否则这是多余的。

* * *

至于重写：

```
RewriteRule ^([a-zA-Z]+)/?$ index.php?page=$1 [L]
RewriteRule ^products/?$ index.php?page=products [L] 
```

无论如何，第二条规则是多余的，永远不会达到（因为第一条也匹配）。

* * *

至于您看到的错误：

```
[Wed Jul 04 02:56:30 2012] [error] [client 127.0.0.1] File does not exist: /var/www/home" 
```

这可能意味着`DocumentRoot`定义存在问题。请发布您的`VirtualHosts`配置。

# ruby-on-rails - 动态预加载 STI 类

> ID：11321101
> 
> 赞同：4
> 
> 时间：2012-07-04T00:46:40.050
> 
> 标签：ruby-on-rails, eager-loading, single-table-inheritance

**场景：**我的 Rails 3.2 应用程序中有许多 STI 模型。有时，我使用父类来查询数据库中的子类，如下所示：

```
class ParentObject < ActiveRecord::Base
end

class ChildObject < ParentObject
end

class User < ActiveRecord::Base
  has_many :parent_objects
end

> User.find(1).parent_objects
 => [#<ParentObject ...>, #<ChildObject ...>] 
```

如果我检查生成的 SQL 查询，这就是我（预期）看到的：

```
WHERE "parent_objects"."type" IN ('ParentObject', 'ChildObject') 
```

**问题：**在开发环境中，类在发生更改时会动态重新加载。如果我更改了某些内容`ParentObject`并且不重新启动 Rails 控制台，那么我将得到以下结果：

```
> User.find(1).parent_classes
 => [#<ParentObject ...>] 
```

检查生成的 SQL：

```
WHERE "parent_objects"."type" IN ('ParentObject') 
```

但：

```
> ChildObject
 => ChildObject(...)
> User.find(1).parent_objects
 => [#<ParentObject ...>, #<ChildObject ...>] 
```

**问题：**在我的 Rails 应用程序中，我可以在哪里编写一小段代码，以便在每个 Web 服务器请求上重新加载任何 STI 模型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T21:24:14.047

我找到了解决方案...：

```
# in development.rb
ActionDispatch::Reloader.to_prepare do
  Rails.application.eager_load!
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T01:45:03.157

一种解决方案是在 ApplicationController 上创建一个过滤器：

```
class ApplicationController < ActionController::Base
  before_filter :reload_sti_classes if Rails.env.development?

  def reload_sti_classes
    [ParentObject, ChildObject]
  end
end 
```

不过，这对我来说似乎不合适。

# c# - 监视器（显示）名称和边界

> ID：11321107
> 
> 赞同：3
> 
> 时间：2012-07-04T00:48:07.733
> 
> 标签：c#, multiple-monitors

我的应用程序能够使用双显示器配置。在应用程序的设置中，我列出了用户将选择其辅助屏幕的可用显示器。

我正在使用以下方法获取（真实）监视器设备名称：

[http://msdn.microsoft.com/en-us/library/aa394122%28VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/aa394122%28VS.85%29.aspx)

```
 SelectQuery q = new SelectQuery("SELECT Name, DeviceID, ScreenHeight, ScreenWidth FROM Win32_DesktopMonitor");
 using (ManagementObjectSearcher mos = new ManagementObjectSearcher(q))
            {
                foreach (ManagementObject mo in mos.Get())
                {
                       ...
                }
             } 
```

但我还需要这没有给我的显示边界（顶部、左侧等）。但`System.Windows.Forms.Screen`确实给了我界限，但不是真正的设备名称。如果我确定它们每次都以相同的顺序返回设备，我可以一起使用它们。这两个总是按时间顺序返回“设备 1”、“设备 2”等吗？或者有没有一种方法可以包含我所有需要的信息？

[编辑] 嗯。Win32_DesptopMonitor 没有给我我的辅助监视器名称。它只是将其称为默认监视器。它在我的初选之前列出。

[edit2] 好的，名字和他们的决议搞砸了.....有人知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T05:50:12.227

在使用 Win API 调用之前，我已经这样做了。我在下面粘贴了一些代码，这可能对您有所帮助...

```
public void Store()
{
  Screens.Clear();
  uint iAdaptorNum = 0;
  Win.User32.DISPLAY_DEVICE adaptor = new Win.User32.DISPLAY_DEVICE();
        adaptor.cb = (short)Marshal.SizeOf(adaptor);
  Win.User32.DISPLAY_DEVICE dd = new Win.User32.DISPLAY_DEVICE();
  dd.cb = (short)Marshal.SizeOf(dd);

  while (Win.User32.EnumDisplayDevices(null, iAdaptorNum, ref adaptor, Win.User32.EDD_GET_DEVICE_INTERFACE_NAME))
  {
    uint iDevNum = 0;
    while (Win.User32.EnumDisplayDevices(adaptor.DeviceName, iDevNum, ref dd, Win.User32.EDD_GET_DEVICE_INTERFACE_NAME))
    {
      log.WriteFormat(LogLevel.Debug, "Adaptor {0}:{1} {2}='{3}', Device {4}='{5}', State flags = {4}",
        iAdaptorNum, iDevNum, adaptor.DeviceName, adaptor.DeviceString, dd.DeviceName, dd.DeviceString, dd.StateFlags);
      if ((dd.StateFlags & Win.User32.DisplayDeviceStateFlags.AttachedToDesktop) > 0)
        Screens.Add(new ScreenInfo(adaptor, dd));
      iDevNum++;
    }
    iAdaptorNum++;
  }
} 
```

这就是后面所说的`new ScreenInfo`：

```
public void StoreScreen(Win.User32.DISPLAY_DEVICE Adaptor, Win.User32.DISPLAY_DEVICE Device)
    {
  adaptor = Adaptor.DeviceName;
  device = Device.DeviceName;
  name = string.Format("{0} on {1}", Device.DeviceString, Adaptor.DeviceString);
  Win.User32.DEVMODE dm = newDevMode();
  if (Win.User32.EnumDisplaySettings(Adaptor.DeviceName, Win.User32.ENUM_CURRENT_SETTINGS, ref dm) != 0)
  {
    isAttached = (Adaptor.StateFlags & Win.User32.DisplayDeviceStateFlags.AttachedToDesktop) > 0;
    isPrimary = (Adaptor.StateFlags & Win.User32.DisplayDeviceStateFlags.PrimaryDevice) > 0;
    mode = findMode(Adaptor.DeviceName, dm);
    if ((dm.dmFields & Win.User32.DM.PelsWidth) > 0) width = dm.dmPelsWidth;
    if ((dm.dmFields & Win.User32.DM.PelsHeight) > 0) height = dm.dmPelsHeight;
    if ((dm.dmFields & Win.User32.DM.BitsPerPixel) > 0) bpp = dm.dmBitsPerPel;
    if ((dm.dmFields & Win.User32.DM.Orientation) > 0) orientation = dm.dmOrientation;
    if ((dm.dmFields & Win.User32.DM.DisplayFrequency) > 0) frequency = dm.dmDisplayFrequency;
    if ((dm.dmFields & Win.User32.DM.DisplayFlags) > 0) flags = dm.dmDisplayFlags;
    if ((dm.dmFields & Win.User32.DM.Position) > 0)
    {
      posX = dm.dmPosition.x;
      posY = dm.dmPosition.y;
    }
  }
}

private static Win.User32.DEVMODE newDevMode()
{
  Win.User32.DEVMODE dm = new Win.User32.DEVMODE();
  dm.dmDeviceName = new String(new char[31]);
  dm.dmFormName = new String(new char[31]);
  dm.dmSize = (short)Marshal.SizeOf(dm);
  return dm;
} 
```

# mysql - MySQL-每组至少选择 n 行

> ID：11321108
> 
> 赞同：0
> 
> 时间：2012-07-04T00:48:11.497
> 
> 标签：mysql, select, greatest-n-per-group

假设你有

```
id   /   value
1        2
1        3
1        6
2        3
3        1 
3        3
3        6 
```

而且我想检索每个 id 组至少 n 行，假设 n = 4。此外，如果将计数器添加为列，这将有所帮助。所以结果应该是这样的：

```
counter /  id   /  value
1          1       2
2          1       3
3          1       6
4          null    null
1          2       3
2          null    null
3          null    null
4          null    null
1          3       1
2          3       3
3          3       6
4          null    null 
```

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T17:21:57.680

下一篇博客文章描述了您的查询的解决方案： [SQL: selection top N records per group](http://code.openark.org/blog/mysql/sql-selecting-top-n-records-per-group)。

它需要一个额外的小数字表，用于通过字符串遍历技术“迭代”每组的前 N ​​个值。它使用 GROUP_CONCAT 来克服 MySQL 不支持窗口函数的事实。这也意味着它不是一个漂亮的景象！

这种技术的一个优点是它不需要子查询，并且可以最佳地利用表上的索引。

要完成对您问题的回答，我们必须添加一个额外的列：您已请求每组每个项目的计数器。

这是一个使用**世界**样本数据库的示例，选择每个大陆的前 5 个最大的县：

```
CREATE TABLE `tinyint_asc` (
 `value` tinyint(3) unsigned NOT NULL default '0',
 PRIMARY KEY (value)
) ;

INSERT INTO `tinyint_asc` VALUES (0),(1),(2),(3),(4),(5),(6),(7),(8),(9),(10),(11),(12),(13),(14),(15),(16),(17),(18),(19),(20),(21),(22),(23),(24),(25),(26),(27),(28),(29),(30),(31),(32),(33),(34),(35),(36),(37),(38),(39),(40),(41),(42),(43),(44),(45),(46),(47),(48),(49),(50),(51),(52),(53),(54),(55),(56),(57),(58),(59),(60),(61),(62),(63),(64),(65),(66),(67),(68),(69),(70),(71),(72),(73),(74),(75),(76),(77),(78),(79),(80),(81),(82),(83),(84),(85),(86),(87),(88),(89),(90),(91),(92),(93),(94),(95),(96),(97),(98),(99),(100),(101),(102),(103),(104),(105),(106),(107),(108),(109),(110),(111),(112),(113),(114),(115),(116),(117),(118),(119),(120),(121),(122),(123),(124),(125),(126),(127),(128),(129),(130),(131),(132),(133),(134),(135),(136),(137),(138),(139),(140),(141),(142),(143),(144),(145),(146),(147),(148),(149),(150),(151),(152),(153),(154),(155),(156),(157),(158),(159),(160),(161),(162),(163),(164),(165),(166),(167),(168),(169),(170),(171),(172),(173),(174),(175),(176),(177),(178),(179),(180),(181),(182),(183),(184),(185),(186),(187),(188),(189),(190),(191),(192),(193),(194),(195),(196),(197),(198),(199),(200),(201),(202),(203),(204),(205),(206),(207),(208),(209),(210),(211),(212),(213),(214),(215),(216),(217),(218),(219),(220),(221),(222),(223),(224),(225),(226),(227),(228),(229),(230),(231),(232),(233),(234),(235),(236),(237),(238),(239),(240),(241),(242),(243),(244),(245),(246),(247),(248),(249),(250),(251),(252),(253),(254),(255);

SELECT
  Continent,
  SUBSTRING_INDEX(
    SUBSTRING_INDEX(
      GROUP_CONCAT(Name ORDER BY SurfaceArea DESC),
      ',', value),
    ',', -1)
    AS Name,
  CAST(
    SUBSTRING_INDEX(
      SUBSTRING_INDEX(
        GROUP_CONCAT(SurfaceArea ORDER BY SurfaceArea DESC),
        ',', value),
      ',', -1)
    AS DECIMAL(20,2)
    ) AS SurfaceArea,
  CAST(
    SUBSTRING_INDEX(
      SUBSTRING_INDEX(
        GROUP_CONCAT(Population ORDER BY SurfaceArea DESC),
        ',', value),
      ',', -1)
    AS UNSIGNED
    ) AS Population,
    tinyint_asc.value AS counter
FROM
  Country, tinyint_asc
WHERE
  tinyint_asc.value >= 1 AND tinyint_asc.value <= 5
GROUP BY
  Continent, value
; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T03:19:47.987

我假设 和 的组合`id`是`value`独一无二的。以下是不使用 MySQL 变量的方法：

```
SELECT
    a.n AS counter, 
    b.id, 
    b.value
FROM
    (
        SELECT 
            aa.n, 
            bb.id
        FROM
            (
                SELECT 1 AS n UNION ALL
                SELECT 2 AS n UNION ALL
                SELECT 3 AS n UNION ALL
                SELECT 4 AS n
            ) aa
        CROSS JOIN 
            (
                SELECT DISTINCT id
                FROM tbl
            ) bb
    ) a
LEFT JOIN
    (
        SELECT aa.id, aa.value, COUNT(*) AS rank
        FROM tbl aa
        LEFT JOIN tbl bb ON aa.id = bb.id AND aa.value >= bb.value
        GROUP BY aa.id, aa.value
    ) b ON a.id = b.id AND a.n = b.rank
ORDER BY
    a.id, 
    a.n 
```

# javascript - 猫鼬在查找功能中没有提供错误

> ID：11321110
> 
> 赞同：1
> 
> 时间：2012-07-04T00:48:24.630
> 
> 标签：javascript, node.js, express, mongoose

在尝试使用 Mongoose 构造一些静态变量时，我在调用 find() 或 findOne() 时似乎无法访问错误参数。这是我的静态：

```
User.statics.authenticate = function(login, password, cb){
    return this.model('User').findOne({
        username: login, 
        password: password
    }, function(err, user){
        console.log("error", err);
        console.log("user", user);
    }).exec(cb);
}; 
```

我试图用这样的东西来称呼它：

```
exports.session = function(req, res){
    return User.authenticate(req.body.login, req.body.password, function(err, doc){
        console.log('err', err);
        console.log('doc', doc);
    });
}; 
```

在任何情况下，无论 findOne 查询的结果如何，err 始终为空。知道这里发生了什么吗？也许我无法理解所有这些回调......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T04:09:53.017

Apparently an empty query result is not actually an error, so that's the reason 'err' remains null despite not finding a result. So, you need to test if 'user' is null or not, and then create your own error.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T01:55:53.443

我不确定它是否完全解释了你所看到的，但如果你直接提供一个回调函数，`findOne`那么你就不会调用`exec`. 因此，您的身份验证函数应如下所示：

```
User.statics.authenticate = function(login, password, cb){
    this.model('User').findOne({
        username: login, 
        password: password
    }, function(err, user){
        console.log("error", err);
        console.log("user", user);
        cb(err, user);
    });
}; 
```

# java - 协议缓冲区是否优化为使用 java nio 进行文件 IO？

> ID：11321113
> 
> 赞同：0
> 
> 时间：2012-07-04T00:48:48.557
> 
> 标签：java, protocol-buffers, nio

我正在使用协议缓冲区，想知道是否：

```
mergeDelimitedFrom(FileInputStream fis) 
```

方法被优化为使用java nio？我真的不想去 src 找出来……但也许我会的。我觉得它应该或可以选择同时使用两者。我猜它不是。如果不是 - 我想如果你想要 nio，你必须自己解析字节并手动处理分隔符？

现在对 nio api 不是很有信心，但你不要打电话：

```
 getChannel() 
```

在 FileInputStream 上使用 nio，所以假设可以使用 nio，因为向 mergeDelimitedFrom 方法提供了 FileInputStream？

相关帖子，但更针对网络 IO：

[在 Java NIO 中使用 Google 协议缓冲区？](https://stackoverflow.com/questions/3337805/using-google-protocol-buffers-with-java-nio)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-04T02:20:54.750

我在想这段代码不是生成代码的一部分，但我想它是......

MergeDelimitedFrom 调用 CodedInputStream.readRawVarint32 下面：

```
public static int readRawVarint32(
  final int firstByte, final InputStream input) throws IOException {
if ((firstByte & 0x80) == 0) {
  return firstByte;
}

int result = firstByte & 0x7f;
int offset = 7;
for (; offset < 32; offset += 7) {
  final int b = input.read();
  if (b == -1) {
    throw InvalidProtocolBufferException.truncatedMessage();
  }
  result |= (b & 0x7f) << offset;
  if ((b & 0x80) == 0) {
    return result;
  }
}
// Keep reading up to 64 bits.
for (; offset < 64; offset += 7) {
  final int b = input.read();
  if (b == -1) {
    throw InvalidProtocolBufferException.truncatedMessage();
  }
  if ((b & 0x80) == 0) {
    return result;
  }
}
throw InvalidProtocolBufferException.malformedVarint(); 
```

}

看起来像普通的旧 java.io。

# javascript - 将 jQuery 变量简化为循环函数

> ID：11321115
> 
> 赞同：0
> 
> 时间：2012-07-04T00:49:01.603
> 
> 标签：javascript, jquery, html

我对 jQuery 很陌生，我正在尝试找到最实用的方法来解决我的问题。目前我所拥有的作品，但我知道我可以简化它并使其更实用。我只是不知道该怎么做。

**所以这是我的 jQuery ...**

```
var hl1 = data.headlines[0,0].headline;
var hl2 = data.headlines[0,1].headline;
var hl3 = data.headlines[0,2].headline;
var hl4 = data.headlines[0,3].headline;
var hl5 = data.headlines[0,4].headline;
var hl6 = data.headlines[0,5].headline;
var hl7 = data.headlines[0,6].headline;
var hl8 = data.headlines[0,7].headline;
var hl9 = data.headlines[0,8].headline;
var hl10 = data.headlines[0,9].headline;

$('#headlines .title').eq(0).append(hl1);
$('#headlines .title').eq(1).append(hl2);
$('#headlines .title').eq(2).append(hl3);
$('#headlines .title').eq(3).append(hl4);
$('#headlines .title').eq(4).append(hl5);
$('#headlines .title').eq(5).append(hl6);
$('#headlines .title').eq(6).append(hl7);
$('#headlines .title').eq(7).append(hl8);
$('#headlines .title').eq(8).append(hl9);
$('#headlines .title').eq(9).append(hl10); 
```

这是我的 HTML ......

```
<div id="headlines">
   <h2 class="title"></h2>
   <h2 class="title"></h2>
   <h2 class="title"></h2>
   <h2 class="title"></h2>
   <h2 class="title"></h2>
   <h2 class="title"></h2>
   <h2 class="title"></h2>
   <h2 class="title"></h2>
</div> 
```

所以基本上我正在做的是通过 AJAX/JSON 提取一些数据并将其附加到这些 h2 标签中。这可以按照我想要的方式工作，但是我觉得可以将其压缩为一个功能，但是我不确定如何到达那里。任何示例或描述性帮助将不胜感激。谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T00:57:33.653

使用良好的老式`for`循环：

```
var titles = $('#headlines .title');
for (var i=0; i<titles.length; i++)
    titles.eq(i).append(data.headlines[0,i].headline); 
```

***解释：***
[`for`](https://developer.mozilla.org/en/JavaScript/Reference/Statements/for)是Javascript迭代的最基本形式。

首先，我将`$('#headlines .title')`jQuery 选择器缓存在`titles`var 中，这样我就可以通过`$('#headlines .title')`选择器访问所有匹配的元素，而无需为每次迭代创建一个新的 jQuery 对象，这提供了良好的性能提升。

接下来，我遍历所有匹配的元素，即从索引 0（第一个元素）到最后一个元素（即`titles.length-1`，因为索引是从[0 开始的](http://en.wikipedia.org/wiki/Zero-based_numbering#In_computer_programming)）。该部分与我使用整数的`i<titles.length`部分相同，因此我选择了看起来更整洁且性能更好的部分。`i<=titles.length-1`

请注意，jQuery 对象的`.length`属性返回与方法相同的值[`.size()`](http://api.jquery.com/size/)，但`.length`它是首选，因为它没有函数调用的开销，根据[文档](http://api.jquery.com/size/)。

这部分的其余部分是不言自明的，该[`.eq()`](http://api.jquery.com/eq/)方法过滤`titles`选择器，仅返回具有我正在迭代的索引的项目，这样我可以将`data.headlines`具有相同索引的`data.headlines[0,i].headline`.

或者使用 jQuery[`.each`](http://api.jquery.com/each/)迭代：

```
$('#headlines .title').each(function(i) {
    $(this).append(data.headlines[0,i].headline);
} 
```

`.each`jQuery 方法也非常不言自明，取自 jQuery API 站点：

> ***描述：***遍历一个 jQuery 对象，为每个匹配的元素执行一个函数。

所以我用 . 创建了一组 DOM 元素，`$('#headlines .title')`并用`.each`. 作为参数传递的函数将对选择器匹配的每个元素执行，因此，我在迭代中创建一个带有当前元素的 jQuery 对象`$(this)`- 并将相应的标题索引附加到它。`.each`的索引是基于 0 的，以及 JS 中几乎所有索引数组（类似）结构。

# wif - ClaimTypes.IdentityProvider 在哪里？

> ID：11321116
> 
> 赞同：12
> 
> 时间：2012-07-04T00:49:07.740
> 
> 标签：wif, .net-4.5, claims-based-identity, acs

使用 .Net 4.5 RC 和 Azure 访问控制服务，我感兴趣的主要声明是 IdentityProvider 和 NameIdentifier。

System.Security.Claims.ClaimTypes 包含众所周知的声明的常量，并且它具有 ClaimTypes.NameIdentifier，但它似乎缺少 ClaimTypes.IdentityProvider。

我真的很惊讶没有在那里找到它。当然，我可以在我自己的常量之一中使用字符串表示“http://schemas.microsoft.com/accesscontrolservice/2010/07/claims/identityprovider”，但鉴于微软向云的推动，我希望使用标准 ClaimTypes 找到它。

这只是疏忽吗？它的缺席有充分的理由吗？它在其他命名空间中吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T15:17:43.537

我敢冒险，IdentityProvider 声明不是标准 WIF 声明类型集的一部分，因为 IdentityProvider 已经是已发布的安全令牌中存在的必填字段，与声明集分开。

另一方面，ACS 充当依赖方应用程序和第 3 方身份提供者之间的联合提供者。请注意，ACS 不使用[ActAs 或 OnBehalfOf](http://msdn.microsoft.com/en-us/library/ee748487.aspx)机制，但 RP 可能想知道用户来自哪个 IP，因此 ACS 为此发出 IdentityProvider 声明。

# css - 我的 div 没有留在我的 div 容器中

> ID：11321117
> 
> 赞同：3
> 
> 时间：2012-07-04T00:49:51.353
> 
> 标签：css, html, containers

我有三个 div，我给他们绝对定位。但是，它们并没有留在我的容器 div 中。

这是代码：

```
<body >
    <div id="container">
        <div id="col1"> testing one</div>
        <div id="col2"> testing two</div>
        <div id="col3"> testing three</div>
        <br/><p/>ksjdlfkjsldkjfl;s 
```

这是我的三个 div 和我的容器的 CSS：

```
div#container {
    position:reletive;
    border-spacing: 10px;
    margin: 100px 80px auto;
    padding: 0  100px10px;
    background-color: #EEEEEE;
    width: 800px;
     -moz-border-radius-topleft: 10px;
    -webkit-border-top-left-radius: 10px;
    border: 1px solid;
}

div#col1{
    position:absolute;
    float: left;
    left:0;
    width:220px;
    background-color :red;
}

div#col2{
    position:absolute;
    float: left;
    left:220px;
    width:220px;
    background-color :yellow;
    padding: 10px auto ;
}

div#col3{
    position:absolute;
    float: left;
    left:500px;
    width:100px;
    background-color :green;
    padding: 10px auto;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T01:01:55.910

我认为，首先，容器 div 的位置应该是“相对”，而不是“相对”。其次，我认为您应该使用“相对”位置而不是“绝对”位置。

# c# - 在 C# 中生成带有图表的图像/电子邮件附件

> ID：11321123
> 
> 赞同：1
> 
> 时间：2012-07-04T00:50:20.510
> 
> 标签：c#, charts

我有一个在多台服务器上运行 24/7 的后台工作人员。我想让那个工作人员生成一些包含 PNG 或 PDF 的电子邮件，这些电子邮件代表了一些图表系列上的许多数据点，这些数据点绘制在图表上。

为了实现这一点，对要使用的控件或方法有什么建议吗？我们目前拥有 Telerik 的产品套件，如果这有帮助的话

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T01:33:24.603

我建议使用 mschart。它包含在 .Net 3.5 和 4 中。这是从 Microsoft 下载示例 VS 解决方案的链接：

[http://archive.msdn.microsoft.com/mschart/Release/ProjectReleases.aspx?ReleaseId=1591](http://archive.msdn.microsoft.com/mschart/Release/ProjectReleases.aspx?ReleaseId=1591)

保存到 png 就像这样简单

`chartObject.SaveAs("file.png", ChartImageFormat.Png);`

图表对象也可以以各种格式保存到内存流中。

如果这很重要，图表真的可以看起来很棒！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T01:23:49.547

对于一个快速而肮脏的解决方案，为什么不生成可以轻松导入到准备绘制数据的电子表格的 CSV？

更一般地说，我建议您的后端进程不生成图像，而仅在其他地方收集和发送数据。您可以使用*rrdtool*或*石墨*来进行收集和绘图。这将允许您拥有一台机器的图表、来自所有服务器的汇总图表等。

# android - 是否可以更改 Android SearchView 上的文本颜色？

> ID：11321129
> 
> 赞同：134
> 
> 时间：2012-07-04T00:51:00.207
> 
> 标签：android, android-toolbar, searchview

SearchView 元素没有任何用于更改文本颜色的属性。默认文本颜色为黑色，不适用于我们的深色背景。有没有办法在不求助于黑客的情况下改变文本的颜色？

我发现这个与更改文本大小有关的类似问题，但到目前为止，它没有任何答案： [如何设置 SearchView TextSize？](https://stackoverflow.com/questions/10535176/how-to-set-searchview-textsize)

* * *

## 回答 #1

> 赞同：134
> 
> 时间：2014-11-12T21:35:03.937

添加

```
<item name="android:editTextColor">@android:color/white</item> 
```

到父主题，这应该会改变输入的文本。你也可以使用

```
<item name="android:textColorHint">@android:color/white</item> 
```

更改 SearchView 的提示文本颜色。（请注意，您可以将 替换为`@android:color/white`您希望使用的任何合适的值）

* * *

## 回答 #2

> 赞同：104
> 
> 时间：2013-01-16T17:29:49.513

尝试这样的事情：您将从 sdk 获得 textview 的句柄，然后更改它，因为它们不会公开公开它。

```
int id = searchView.getContext().getResources().getIdentifier("android:id/search_src_text", null, null);
TextView textView = (TextView) searchView.findViewById(id);
textView.setTextColor(Color.WHITE); 
```

* * *

## 回答 #3

> 赞同：74
> 
> 时间：2015-05-07T04:27:25.253

这对我有用。

```
SearchView searchView = (SearchView) findViewById(R.id.search);
EditText searchEditText = (EditText) searchView.findViewById(android.support.v7.appcompat.R.id.search_src_text);
searchEditText.setTextColor(getResources().getColor(R.color.white));
searchEditText.setHintTextColor(getResources().getColor(R.color.white)); 
```

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2014-10-08T07:18:44.340

感谢@CzarMatt，我添加了**AndroidX**支持。

对我来说，以下作品。我使用了来自链接的代码：[Change text color of search hint in actionbar using support library](https://stackoverflow.com/questions/18786726/change-text-color-of-search-hint-in-actionbar-using-support-library)。

```
 searchView = (SearchView) menu.findItem(R.id.action_search).getActionView();

    EditText txtSearch = ((EditText)searchView.findViewById(androidx.appcompat.R.id.search_src_text));
    txtSearch.setHint(getResources().getString(R.string.search_hint));
    txtSearch.setHintTextColor(Color.LTGRAY);
    txtSearch.setTextColor(Color.WHITE); 
```

[更改操作栏搜索视图提示文本颜色](https://stackoverflow.com/questions/17791388/changing-action-bar-searchview-hint-text-color)建议另一种解决方案。它可以工作，但只设置提示文本和颜色。

```
 searchView.setQueryHint(Html.fromHtml("<font color = #ffffff>" + getResources().getString(R.string.search_hint) + "</font>")); 
```

* * *

## 回答 #5

> 赞同：27
> 
> 时间：2014-05-07T15:54:50.063

我想做类似的事情。我终于不得不`TextView`在`SearchView`孩子们中间找到：

```
for (TextView textView : findChildrenByClass(searchView, TextView.class)) {
    textView.setTextColor(Color.WHITE);
} 
```

如果你想要 util 方法：

```
public static <V extends View> Collection<V> findChildrenByClass(ViewGroup viewGroup, Class<V> clazz) {

    return gatherChildrenByClass(viewGroup, clazz, new ArrayList<V>());
}

private static <V extends View> Collection<V> gatherChildrenByClass(ViewGroup viewGroup, Class<V> clazz, Collection<V> childrenFound) {

    for (int i = 0; i < viewGroup.getChildCount(); i++)
    {
        final View child = viewGroup.getChildAt(i);
        if (clazz.isAssignableFrom(child.getClass())) {
            childrenFound.add((V)child);
        }
        if (child instanceof ViewGroup) {
            gatherChildrenByClass((ViewGroup) child, clazz, childrenFound);
        }
    }

    return childrenFound;
} 
```

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2014-04-20T16:15:50.223

这最好通过自定义样式来实现。使用您自己的自定义样式重载操作栏小部件样式。对于带有深色操作栏的全息灯，请将其放入您自己的样式文件中，例如`res/values/styles_mytheme.xml`：

```
<style name="Theme.MyTheme" parent="@android:style/Theme.Holo.Light.DarkActionBar">
    <item name="android:actionBarWidgetTheme">@style/Theme.MyTheme.Widget</item>
    <!-- your other custom styles -->
</style>

<style name="Theme.MyTheme.Widget" parent="@android:style/Theme.Holo">
    <item name="android:textColorHint">@android:color/white</item>
    <!-- your other custom widget styles -->
</style> 
```

确保您的应用程序使用主题自定义主题，如在[此处输入链接描述中所述](https://developer.android.com/guide/topics/ui/themes.html#ApplyATheme)

* * *

## 回答 #7

> 赞同：15
> 
> 时间：2016-10-14T01:18:43.930

`editTextColor`您可以通过在样式中设置属性来做到这一点。

```
<style name="SearchViewStyle" parent="Some.Relevant.Parent">
    <item name="android:editTextColor">@color/some_color</item>
</style> 
```

并且您将此样式应用于布局`Toolbar`或`SearchView`布局中。

```
<android.support.v7.widget.Toolbar
    android:theme="@style/SearchViewStyle">

    <android.support.v7.widget.SearchView />

</android.support.v7.widget.Toolbar> 
```

* * *

## 回答 #8

> 赞同：14
> 
> 时间：2020-07-18T08:31:18.393

**`android:theme`**您可以使用视图中的属性覆盖默认颜色。

如果您使用的是**`Toolbar`**or **`MaterialToolbar`**：

```
<com.google.android.material.appbar.MaterialToolbar
    android:theme="@style/ThemeOverlay.Toobar"
    ...> 
```

或者：

```
<androidx.appcompat.widget.Toolbar
    android:theme="@style/ThemeOverlay.Toobar"
    ...> 
```

带有**Material Components Theme**的 Theme 叠加层是：

```
<style name="ThemeOverlay.Toobar" parent="ThemeOverlay.MaterialComponents.Toolbar.Primary">
    <!-- Text color -->
    <item name="android:editTextColor">@color/....</item>
    <!-- Hint text color -->
    <item name="android:textColorHint">@color/...</item>
</style> 
```

带有 AppCompat 主题：

```
<style name="ThemeOverlay.Toobar" parent="ThemeOverlay.AppCompat.Light.*">
    <!-- Text color -->
    <item name="android:editTextColor">@color/....</item>
    <!-- Hint text color -->
    <item name="android:textColorHint">@color/...</item>
</style> 
```

[![在此处输入图像描述](../Images/15a52ef93ea6b2fc49e1db9b4630078f.png)](https://i.stack.imgur.com/tn73k.png)

* * *

如果您**`SearchView`**在布局中使用 a ，您可以执行类似的操作：

```
 <androidx.appcompat.widget.SearchView
       android:theme="@style/ThemeOverlay.SearchView" 
```

和

```
 <style name="ThemeOverlay.SearchView" parent="">
        <!-- Text color -->
        <item name="android:editTextColor">@color/...</item>
        <!-- Hint text color -->
        <item name="android:textColorHint">@color/...</item>
    </style> 
```

[![在此处输入图像描述](../Images/5a26c87cbf09f28ab548a97f185b0e48.png)](https://i.stack.imgur.com/a5xDI.png)

* * *

## 回答 #9

> 赞同：9
> 
> 时间：2017-03-09T09:36:15.647

如果你使用 - android.support.v7.widget.SearchView

```
SearchView searchView = (SearchView) item.getActionView();
EditText editText = (EditText) searchView.findViewById(android.support.v7.appcompat.R.id.search_src_text);
editText.setTextColor(Color.WHITE); 
```

在科特林

```
val searchView = SearchView(this)
val editText = searchView.findViewById<EditText>(androidx.appcompat.R.id.search_src_text)
editText.setTextColor(Color.WHITE) 
```

您现在应该开始使用 androidx 支持库

* * *

## 回答 #10

> 赞同：8
> 
> 时间：2017-07-24T14:23:10.393

为您创建一个样式`Toolbar`

```
<style name="AppTheme.Toolbar" parent="ThemeOverlay.AppCompat.ActionBar">
    <item name="android:editTextColor">@color/some_color</item>
</style> 
```

并将其设置为主题`Toolbar`

```
<android.support.v7.widget.Toolbar
    android:theme="@style/AppTheme.Toolbar"
    ... 
```

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2014-12-16T05:21:18.160

If you're using the android.support.v7.widget.SearchView, it's possible without having to use reflection.

Here's how I'm doing it in my app:

```
EditText text = (EditText) searchView.findViewById(android.support.v7.appcompat.R.id.search_src_text);
ImageView searchCloseIcon = (ImageView) searchView.findViewById(android.support.v7.appcompat.R.id.search_close_btn);
View searchPlate = searchView.findViewById(android.support.v7.appcompat.R.id.search_plate);

if (searchPlate != null) {
    searchPlate.setBackgroundResource(R.drawable.search_background);
}

if (text != null){
    text.setTextColor(resources.getColor(R.color.white));
    text.setHintTextColor(getResources().getColor(R.color.white));

    SpannableStringBuilder magHint = new SpannableStringBuilder("  ");
    magHint.append(resources.getString(R.string.search));

    Drawable searchIcon = getResources().getDrawable(R.drawable.ic_action_view_search);
    int textSize = (int) (text.getTextSize() * 1.5);
    searchIcon.setBounds(0, 0, textSize, textSize);
    magHint.setSpan(new ImageSpan(searchIcon), 0, 1, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);

    // Set the new hint text
    text.setHint(magHint);

}

if (searchCloseIcon != null){
    searchCloseIcon.setImageDrawable(getResources().getDrawable(R.drawable.ic_action_close));
} 
```

They don't expose the ids publicly for the non appcompat SearchView, but they do for AppCompat if you know where to look. :)

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2013-03-01T14:41:28.970

我遇到了这个问题，这对我有用。

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.customer_menu, menu);
        SearchManager searchManager = (SearchManager) getSystemService(Context.SEARCH_SERVICE);
        SearchView searchView       = (SearchView) menu.findItem(R.id.menu_customer_search).getActionView();
        searchView.setSearchableInfo(searchManager.getSearchableInfo(getComponentName()));

        searchView.setOnQueryTextListener(this);

        //Applies white color on searchview text
        int id = searchView.getContext().getResources().getIdentifier("android:id/search_src_text", null, null);
        TextView textView = (TextView) searchView.findViewById(id);
        textView.setTextColor(Color.WHITE);

        return true;
} 
```

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2012-12-31T08:23:21.883

是的，可以使用以下方法。

```
public static EditText setHintEditText(EditText argEditText, String argHintMessage, boolean argIsRequire) {
    try {
        if (argIsRequire) {
            argHintMessage = "   " + argHintMessage;
            //String text = "<font color=#8c8c8c>"+argHintMessage+"</font> <font color=#cc0029>*</font>";
            String text = "<font color=#8c8c8c>" + argHintMessage + "</font>";
            argEditText.setHint(Html.fromHtml(text));
        } else {
            argEditText.setHint(argHintMessage);
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
    return argEditText;
} 
```

调用这个方法看起来像这样..

```
metLoginUserName=(EditText)this.findViewById(R.id.etLoginUserName);
    metLoginPassword=(EditText)this.findViewById(R.id.etLoginPassword);

    /**Set the hint in username and password edittext*/
    metLoginUserName=HotSpotStaticMethod.setHintEditText(metLoginUserName, getString(R.string.hint_username),true);
    metLoginPassword=HotSpotStaticMethod.setHintEditText(metLoginPassword, getString(R.string.hint_password),true); 
```

使用它我已经成功地使用这种方法在提示中添加了红色 * 标记。您应该根据您的要求更改此方法。我希望它对你有帮助.... :)

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2012-10-17T09:21:21.350

如果您的应用主题基于全息主题，您将在 SearchView 中获得白色而不是黑色文本

`<style name="Theme.MyTheme" parent="android:Theme.Holo">`

我没有找到任何其他方法来更改搜索视图的文本颜色而不使用肮脏的黑客。

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2017-08-07T11:37:12.087

最干净的方法是：

工具栏使用主题 ThemeOverlay.AppCompat.Dark.Actionbar。

现在让它的孩子像：

toolbarStyle 父级“ThemeOverlay.AppCompat.Dark.Actionbar”

以该样式添加此项目

项目名称“android:editTextColor”>yourcolor

完毕。

另一件非常重要的事情是，在工具栏中放置 layout_height ="?attr/actionbarSize"。默认情况下它是 wrap_content。对我来说，搜索视图中甚至看不到文本，它解决了这个问题。

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2013-07-17T22:18:02.967

更改键入文本的颜色：

```
((EditText)((SearchView)findViewById(R.id.searchView)).findViewById(((SearchView)findViewById(R.id.searchView)).getContext().getResources().getIdentifier("android:id/search_src_text", null, null))).setTextColor(Color.WHITE); 
```

更改提示文本的颜色：

```
((EditText)((SearchView)findViewById(R.id.searchView)).findViewById(((SearchView)findViewById(R.id.searchView)).getContext().getResources().getIdentifier("android:id/search_src_text", null, null))).setHintTextColor(Color.LTGRAY); 
```

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2013-01-28T10:27:15.900

用这个，就对了。:D

```
AutoCompleteTextView searchText = (AutoCompleteTextView) searchView.findViewById(R.id.abs__search_src_text);
searchText.setHintTextColor(getResources().getColor(color.black));
searchText.setTextColor(getResources().getColor(color.black)); 
```

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2015-04-10T05:38:32.040

我们可以，

```
SearchView searchView = (SearchView) findViewById(R.id.sv_symbol); 
```

要为 SerachView 文本应用白色，

```
int id = searchView.getContext().getResources().getIdentifier("android:id/search_src_text", null, null);
TextView textView = (TextView) searchView.findViewById(id);
textView.setTextColor(Color.WHITE); 
```

快乐编码！！！！

* * *

## 回答 #19

> 赞同：3
> 
> 时间：2016-08-26T07:31:38.747

这对我有用。

```
final SearchView searchView = (SearchView) MenuItemCompat.getActionView(item);

searchView.setOnQueryTextListener(this);   
searchEditText = (EditText) searchView.findViewById(android.support.v7.appcompat.R.id.search_src_text);
searchEditText.setTextColor(getResources().getColor(R.color.white));
searchEditText.setHintTextColor(getResources().getColor(R.color.white));

if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN) 
{
    searchEditText.setBackgroundColor(getResources().getColor(R.color.c_trasnparent));
    searchEditText.setGravity(Gravity.CENTER);
    searchEditText.setCompoundDrawables(null,null,R.drawable.ic_cross,null);
} 
```

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2014-03-07T22:51:42.410

```
TextView textView = (TextView) searchView.findViewById(R.id.search_src_text);
textView.setTextColor(Color.BLACK); 
```

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2020-09-08T19:11:04.060

这对我有用，如果你使用 **androidx.appcompat.widget.SearchView**应用**androidx.appcompat.R.id.search_src_text**来识别搜索视图，在 textView 中没有返回**null**

```
 TextView textView = (TextView) searchView.findViewById(androidx.appcompat.R.id.search_src_text);
    textView.setTextColor(Color.RED);
    textView.setHintTextColorstrong text(Color.RED); 
```

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2015-01-23T01:31:25.890

对于带有 searchView 的 appcompat-v7 工具栏（通过 MenuItemCompat 提供）：

将工具栏主题设置为 @style/ThemeOverlay.AppCompat.Light 将为提示文本和输入文本生成深色（黑色），但不会影响光标*颜色。因此，将 Toolbar 主题设置为 @style/ThemeOverlay.AppCompat.Dark 将为提示文本和输入的文本生成浅色（白色），光标* 无论如何都是白色的。

自定义上述主题：

android:textColorPrimary --> 输入文本的颜色

editTextColor --> 输入文本的颜色（如果设置，将覆盖 android:textColorPrimary 的影响）

android:textColorHint --> 提示的颜色

*注意：我还没有确定如何控制光标颜色（不使用反射解决方案）。

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2014-09-22T10:57:38.053

可以使用 appcompat v7 库自定义搜索视图。我使用了 appcompat v7 库并为其定义了自定义样式。在drawable文件夹中放置bottom_border.xml文件，如下所示：

```
 <?xml version="1.0" encoding="utf-8"?>
 <layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
 <item>
  <shape >
      <solid android:color="@color/blue_color" />
  </shape>
 </item>
 <item android:bottom="0.8dp"
   android:left="0.8dp"
   android:right="0.8dp">
  <shape >
      <solid android:color="@color/background_color" />
  </shape>
 </item>

 <!-- draw another block to cut-off the left and right bars -->
 <item android:bottom="2.0dp">
  <shape >
      <solid android:color="@color/main_accent" />
  </shape>
  </item>
 </layer-list> 
```

在值文件夹 styles_myactionbartheme.xml 中：

```
 <?xml version="1.0" encoding="utf-8"?>
 <resources>
  <style name="AppnewTheme" parent="Theme.AppCompat.Light">
    <item name="android:windowBackground">@color/background</item>
    <item name="android:actionBarStyle">@style/ActionBar</item>
    <item name="android:actionBarWidgetTheme">@style/ActionBarWidget</item>
  </style> 
  <!-- Actionbar Theme -->
  <style name="ActionBar" parent="Widget.AppCompat.Light.ActionBar.Solid.Inverse">
    <item name="android:background">@color/main_accent</item>
    <!-- <item name="android:icon">@drawable/abc_ic_ab_back_holo_light</item> -->
  </style> 
  <style name="ActionBarWidget" parent="Theme.AppCompat.Light">
    <!-- SearchView customization-->
     <!-- Changing the small search icon when the view is expanded -->
    <!-- <item name="searchViewSearchIcon">@drawable/ic_action_search</item> -->
     <!-- Changing the cross icon to erase typed text -->
   <!--   <item name="searchViewCloseIcon">@drawable/ic_action_remove</item> -->
     <!-- Styling the background of the text field, i.e. blue bracket -->
    <item name="searchViewTextField">@drawable/bottom_border</item>
     <!-- Styling the text view that displays the typed text query -->
    <item name="searchViewAutoCompleteTextView">@style/AutoCompleteTextView</item>        
  </style>

    <style name="AutoCompleteTextView" parent="Widget.AppCompat.Light.AutoCompleteTextView">
     <item name="android:textColor">@color/text_color</item>
   <!--   <item name="android:textCursorDrawable">@null</item> -->
    <!-- <item name="android:textColorHighlight">@color/search_view_selected_text</item> -->
  </style>
 </resources> 
```

我定义了用于显示菜单的 custommenu.xml 文件：

```
 <menu xmlns:android="http://schemas.android.com/apk/res/android"
   xmlns:com.example.actionbartheme="http://schemas.android.com/apk/res-auto" >  

  <item android:id="@+id/search"
      android:title="@string/search_title"
      android:icon="@drawable/search_buttonn"
      com.example.actionbartheme:showAsAction="ifRoom|collapseActionView"
        com.example.actionbartheme:actionViewClass="android.support.v7.widget.SearchView"/>        
  </menu> 
```

您的活动应该扩展 ActionBarActivity 而不是 Activity。这是 onCreateOptionsMenu 方法。

```
 @Override
  public boolean onCreateOptionsMenu(Menu menu) 
  {
    // Inflate the menu; this adds items to the action bar if it is present.
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.custommenu, menu);
  } 
```

在清单文件中：

```
 <application
      android:allowBackup="true"
      android:icon="@drawable/ic_launcher"
      android:label="@string/app_name"
      android:theme="@style/AppnewTheme" > 
```

有关更多信息，请参阅此网址：
此处为[http://www.jayway.com/2014/06/02/android-theming-the-actionbar/](http://www.jayway.com/2014/06/02/android-theming-the-actionbar/)

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2014-03-11T04:13:17.710

一个`SearchView`对象从 扩展而来`LinearLayout`，因此它拥有其他视图。诀窍是找到保存提示文本的视图并以编程方式更改颜色。尝试通过 id 查找视图的问题在于 id 取决于应用程序中使用的主题。因此，根据使用的主题，该`findViewById(int id)`方法可能会返回`null`. 适用于每个主题的更好方法是遍历视图层次结构并找到包含提示文本的小部件：

```
// get your SearchView with its id
SearchView searchView = (SearchView) menu.findItem(R.id.search).getActionView();
// traverse the view to the widget containing the hint text
LinearLayout ll = (LinearLayout)searchView.getChildAt(0);
LinearLayout ll2 = (LinearLayout)ll.getChildAt(2);
LinearLayout ll3 = (LinearLayout)ll2.getChildAt(1);
SearchView.SearchAutoComplete autoComplete = (SearchView.SearchAutoComplete)ll3.getChildAt(0);
// set the hint text color
autoComplete.setHintTextColor(getResources().getColor(Color.WHITE));
// set the text color
autoComplete.setTextColor(Color.BLUE); 
```

使用此方法，您还可以更改`SearchView`层次结构中其他小部件的外观，例如`EditText`保存搜索查询。除非 Google 决定`SearchView`很快更改视图层次结构，否则您应该能够在一段时间内使用此方法更改小部件的外观。

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2017-04-12T18:19:14.070

哇。很多答案。它从您的原色中获取颜色值。

改变它，它就完成了！

```
@Override
public void onResume() {
    super.onResume();
    getActivity().setTheme(R.style.YourTheme_Searching);
} 
```

样式；

```
<style name="YourTheme.Searching" parent="YourTheme">
    <item name="android:textColorPrimary">@android:color/white</item>
</style> 
```

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2019-11-11T17:10:45.013

使用 androidx 更改工具栏中的 searchView 样式。

首先，在您的工具栏样式中设置搜索视图样式（使用您自己的应用程序更改父项）：

```
 <!-- toolbar style -->
      <style name="ToolbarStyle" parent="Theme.AppCompat.Light.NoActionBar">     
          <!-- search view about -->
          <item name="android:editTextColor">@color/colorWhitePrimaryText</item>
          <item name="android:textColorHint">@color/colorWhiteSecondaryText</item>
          <item name="android:textCursorDrawable">@drawable/drawable_cursor_white</item>
          <item name="closeIcon">@mipmap/ic_close</item>
          <item name="searchHintIcon">@mipmap/ic_search_white</item>
          <item name="searchIcon">@mipmap/ic_search_white</item>
          <item name="android:longClickable">false</item>
          <item name="android:queryHint">@string/toolbar_search</item>
      </style> 
```

然后，在您的工具栏布局中使用它：

```
android:theme="@style/ToolbarStyle" 
```

有了这个，您可以更改除查询提示之外的大多数 searchView 样式。

最后在工具栏菜单的选项中设置查询提示：

```
toolbar.setOnMenuItemClickListener(item -> {
        switch (item.getItemId()){
            case R.id.toolbar_search:
                SearchView searchView = (SearchView) item.getActionView();
                searchView.setQueryHint("default query");
                searchView.setOnQueryTextListener(new SearchView.OnQueryTextListener() {
                    @Override
                    public boolean onQueryTextSubmit(String query) {
                        return false;
                    }

                    @Override
                    public boolean onQueryTextChange(String newText) {
                        return false;
                    }
                });
                return true;
                default:
                    return false;
        } 
```

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2016-05-22T15:31:46.050

通过使用它，我能够在搜索视图中更改键入的颜色文本

```
AutoCompleteTextView typed_text = (AutoCompleteTextView) inputSearch.findViewById(inputSearch.getContext().getResources().getIdentifier("android:id/search_src_text", null, null));
typed_text.setTextColor(Color.WHITE); 
```

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2014-03-01T07:44:52.197

```
searchView = (SearchView) view.findViewById(R.id.searchView);

SearchView.SearchAutoComplete searchText = (SearchView.SearchAutoComplete) searchView
      .findViewById(org.holoeverywhere.R.id.search_src_text);
searchText.setTextColor(Color.BLACK); 
```

我正在使用 Holoeverywhere 库。注意**org.holoeverywhere.R.id.search_src_text**

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2014-10-05T15:38:27.297

我从博客文章中找到了解决方案。见[这里](http://www.jayway.com/2014/06/02/android-theming-the-actionbar/)。

基本上你设置了 searchViewAutoCompleteTextView 的样式并让 android:actionBarWidgetTheme 继承了样式。

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2016-04-19T13:47:01.800

它对我有用

```
@Override
public boolean onPrepareOptionsMenu(Menu menu) {
    MenuItem searchItem = menu.findItem(R.id.action_search);
    EditText searchEditText = (EditText) searchView.getActionView().findViewById(android.support.v7.appcompat.R.id.search_src_text);
    searchEditText.setTextColor(getResources().getColor(R.color.white));
    searchEditText.setHintTextColor(getResources().getColor(R.color.white));
    return super.onPrepareOptionsMenu(menu);
} 
```

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2018-08-02T07:36:19.920

什么对我有用

```
((EditText)searchView.findViewById(R.id.search_src_text)).setTextColor(getResources().getColor(R.color.text)); 
```

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2020-05-05T12:34:04.997

**对于 Kotlin 语言**

```
 searchView = view.findViewById(R.id.searchView_Contacts)
    // change color
    val id = searchView.context.resources
        .getIdentifier("android:id/search_src_text", null, null)

    val textView = searchView.findViewById<View>(id) as TextView

    textView.setTextColor(Color.WHITE) 
```

* * *

## 回答 #33

> 赞同：-1
> 
> 时间：2013-10-03T17:43:18.333

您可以像此类一样实现以更改字体颜色和图像::

```
import com.actionbarsherlock.widget.SearchView;
import com.actionbarsherlock.widget.SearchView.SearchAutoComplete;

public class MySearchView {
    public static SearchView getSearchView(Context context, String strHint) {
        SearchView searchView = new SearchView(context);
        searchView.setQueryHint(strHint);
        searchView.setFocusable(true);
        searchView.setFocusableInTouchMode(true);
        searchView.requestFocus();
        searchView.requestFocusFromTouch();

         ImageView searchBtn = (ImageView) searchView.findViewById(R.id.abs__search_button);
         searchBtn.setImageResource(R.drawable.ic_menu_search);

         ImageView searchBtnClose = (ImageView) searchView.findViewById(R.id.abs__search_close_btn);
         searchBtnClose.setImageResource(R.drawable.ic_cancel_search_bar);

         SearchAutoComplete searchText = (SearchAutoComplete) searchView.findViewById(R.id.abs__search_src_text);

        searchText.setTextColor(context.getResources().getColor(color.white));

        return searchView;
    }

    public static SearchView getSearchView(Context context, int strHintRes) {
        return getSearchView(context, context.getString(strHintRes));
    }
} 
```

我希望它可以帮助你们。:D

* * *

## 回答 #34

> 赞同：-2
> 
> 时间：2012-08-15T07:38:14.510

我尝试并为此找到了一种解决方案。我想它会帮助你..

```
searchView.setBackgroundColor(Color.WHITE); 
```

![在此处输入图像描述](../Images/eae40ed94a1c66a00cb9b71a9eb105de.png)

* * *

## 回答 #35

> 赞同：-2
> 
> 时间：2018-03-10T07:23:56.457

这边走 ：）

```
View searchPlate = searchView.findViewById(searchPlateId);
if (searchPlate!=null) {
    searchPlate.setBackgroundColor(Color.DKGRAY);
    int searchTextId = searchPlate.getContext().getResources().getIdentifier("android:id/search_src_text", null, null);
    TextView searchText = (TextView) searchPlate.findViewById(searchTextId);
    if (searchText != null) {
        searchText.setTextColor(Color.WHITE);
        searchText.setHintTextColor(Color.WHITE);
    }
}
return ;
} 
```

* * *

## 回答 #36

> 赞同：-3
> 
> 时间：2015-07-07T09:47:58.863

将*SearchView*转换为*TextView*允许您使用*TextView*的方法来更改其颜色：

```
((TextView) searchView).setTextColor(Color.WHITE);
((TextView) searchView).setHintTextColor(Color.WHITE); 
```

# javascript - Zend Studio 是否支持远程 javascript 调试

> ID：11321130
> 
> 赞同：1
> 
> 时间：2012-07-04T00:51:13.437
> 
> 标签：javascript, remote-debugging, zend-studio, phpstorm

我发现phpstorm 4可以在远程浏览器中调试javascript，zend studio可以远程调试javascript吗？我知道zend studio可以远程调试php，但它也支持远程调试javascript吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T01:17:04.840

不，它不支持javascript的远程调试。

要记录客户端 javascript 错误，请安装 Google Analytics 并尝试以下操作：[http ://www.thetaboard.com/blog/client-side-error-logging-with-google-analytics?r=378](http://www.thetaboard.com/blog/client-side-error-logging-with-google-analytics?r=378)

# cordova - PhoneGap 支持的 WebOS 版本

> ID：11321131
> 
> 赞同：1
> 
> 时间：2012-07-04T00:51:42.373
> 
> 标签：cordova, webos

有人知道**PhoneGap**（Apache Cordova）支持哪些版本的**webOS ？**他们的[网站](http://phonegap.com/about/features)没有提供具体信息，他们只是列出了框架支持的设备功能。

 **感谢您的帮助和时间。

奥克塔维奥

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T16:39:49.500

PhoneGap/Cordova 支持所有版本的 webOS，1.0 到 3.0.5。对于平板电脑应用程序，您需要在 appinfo.json 文件中添加“uiRevision: 2”行以使用全屏，并且指南针支持仅在 Pre3 设备上。**

# sql - 使用 HiveQL 连接两个表

> ID：11321132
> 
> 赞同：1
> 
> 时间：2012-07-04T00:51:46.320
> 
> 标签：sql, hive

这是下面的两个表格-

```
CREATE EXTERNAL TABLE IF NOT EXISTS Table1   (This is the MAIN table through which     comparisons need to be made) 
( 
ITEM_ID BIGINT, 
CREATED_TIME STRING, 
BUYER_ID BIGINT 
) 

CREATE EXTERNAL TABLE IF NOT EXISTS Table2 
( 
USER_ID BIGINT, 
PURCHASED_ITEM ARRAY<STRUCT<PRODUCT_ID: BIGINT,TIMESTAMPS:STRING>> 
) 
```

作为 BUYER_ID 和 USER_ID 他们都是一样的东西。

我需要通过与 Table1 的比较来找到 Table2 中不存在的总 COUNT 和所有那些 BUYER_ID。所以我认为这是一种左外连接查询。我是 HiveSql 的新手，所以我很难弄清楚在 HiveQL 中执行此操作的实际语法应该是什么。我写了下面的 SQL 查询。谁能告诉我下面的 SQL 查询是否可以实现我的场景？

```
SELECT COUNT(BUYER_ID), BUYER_ID 
FROM Table1 dw 
LEFT OUTER JOIN Table2 dps ON (dw.BUYER_ID = dps.USER_ID) 
GROUP BY BUYER_ID; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T15:57:40.360

如果我正确理解您的要求，我想您就快到了。如果两个表之间不匹配，您似乎只需要添加一个条件检查：

```
SELECT COUNT(BUYER_ID), BUYER_ID 
FROM Table1 dw 
LEFT OUTER JOIN Table2 dps ON (dw.BUYER_ID = dps.USER_ID) 
**WHERE dps.USER_ID IS NULL**
GROUP BY BUYER_ID; 
```

以上将过滤掉在表 2 中匹配的 BUYER_ID，并显示剩余的 BUYER_ID 及其对应的计数值。（嗯，这就是我理解你想要的。）

# .htaccess - 由于 .php 扩展名，谷歌网站管理员重复描述

> ID：11321133
> 
> 赞同：-1
> 
> 时间：2012-07-04T00:51:50.133
> 
> 标签：.htaccess, seo, google-search-console

Google 网站管理员工具向我显示 26 个重复页面，因为您可以通过两种方式访问​​该页面：/crossMaker.php?jsonID=103 /crossMaker?jsonID=103

在我的 htaccess 文件中，我可以不包含 php 扩展名，但可能在我链接到带有后缀的文件名的代码中的某处，因此谷歌抓取了它。

我该怎么做才能让谷歌忘记带有扩展名的文件？使用 301 重定向？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T00:52:48.277

只需使用[规范的 URL](http://googlewebmastercentral.blogspot.com/2009/02/specify-your-canonical.html)。处理这个问题要容易*得多，也是正确的方法。*

例如，将其放在页面顶部：

```
<link rel="canonical" href="http://www.example.com/crossMaker?jsonID=103" /> 
```

您可以动态创建这些，因此您应该很容易实现。

# android - 在不更改 OnDraw 参数的情况下将自定义视图置于布局底部？

> ID：11321135
> 
> 赞同：0
> 
> 时间：2012-07-04T00:52:06.947
> 
> 标签：android, android-layout

我在自定义视图上绘制了一个自定义绘图。我想将此视图带到屏幕的下半部分而不更改 ondraw 函数的坐标。我知道这可以做到，但我做不到。请帮助我。

这是我的 XML 代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/main"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <ScrollView
        android:layout_width="fill_parent"
        android:layout_height="0px"
        android:layout_weight="1" >

        <your.com.learn.game
            android:id="@+id/game1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="bottom" />
    </ScrollView>

</RelativeLayout> 
```

游戏查看代码：

```
public class game extends View{
    private Bitmap image;
    private Paint paint;
    private int x=0;private int baseY = 250;

    public game(Context context,AttributeSet attr) {
        super(context,attr);

        //TODO Auto-generated constructor stub
        //LayoutInflater layoutInflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        //layoutInflater.inflate(R.layout.example,this);

        //this.inflate(context, R.layout.example, null);
        image=Bitmap.createBitmap(BitmapFactory.decodeResource(this.getResources(),R.drawable.ic_launcher));
        paint =new Paint();
        paint.setColor(Color.BLUE);

    }

    public void onDraw(Canvas canvas)
        {
        super.onDraw(canvas);
        canvas.drawLine(90, baseY,200,baseY, paint);
        canvas.drawLine(125,baseY,125,baseY-100,paint);
        canvas.drawLine(110,baseY,125,baseY-15,paint);
        canvas.drawLine(140,baseY,125,baseY-15,paint);
        canvas.drawLine(125,baseY-100,175,baseY-100,paint);
        canvas.drawLine(125,baseY-85,140,baseY-100,paint);
        canvas.drawLine(175,baseY-100,175,baseY-75,paint);
        canvas.drawOval(new RectF(170,(baseY-75),10,12),paint);
        canvas.drawOval(new RectF(170,baseY-65,15,25), paint);
        canvas.drawLine(160,baseY-65,170,baseY-60,paint);
        canvas.drawLine(183,baseY-60,193,baseY-65,paint);
        canvas.drawLine(165,baseY-30,170,baseY-45,paint);
        canvas.drawLine(183,baseY-45,193,baseY-30,paint);
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        // TODO Auto-generated method stub
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);
        final int widthSpecMode = MeasureSpec.getMode(widthMeasureSpec);
        final int heightSpecMode = MeasureSpec.getMode(heightMeasureSpec);
        boolean resizeWidth = widthSpecMode != MeasureSpec.UNSPECIFIED;
        boolean resizeHeight = heightSpecMode != MeasureSpec.UNSPECIFIED;
    }

    public void update()
    {
         if(x < 200)
                x++;
            else
                x=0;
    }
} 
```

将游戏视图添加到嵌套 Scrollview 时的 Logcat（如下 Sam 所述）：

```
07-05 18:53:09.638: W/dalvikvm(858): threadid=1: thread exiting with uncaught exception (group=0x40015560) 
07-05 18:53:09.649: E/AndroidRuntime(858): FATAL EXCEPTION: main 
07-05 18:53:09.649: E/AndroidRuntime(858): java.lang.RuntimeException: Unable to start activity ComponentInfo{your.com.learn/your.com.learn.LearningActivity}: java.lang.NullPointerException 
07-05 18:53:09.649: E/AndroidRuntime(858): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647) 
07-05 18:53:09.649: E/AndroidRuntime(858): at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663) 
07-05 18:53:09.649: E/AndroidRuntime(858): at android.app.ActivityThread.access$1500(ActivityThread.java:117) 
07-05 18:53:09.649: E/AndroidRuntime(858): at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931) 
07-05 18:53:09.649: E/AndroidRuntime(858): at android.os.Handler.dispatchMessage(Handler.java:99) 
07-05 18:53:09.649: E/AndroidRuntime(858): at android.os.Looper.loop(Looper.java:123) 
07-05 18:53:09.649: E/AndroidRuntime(858): at android.app.ActivityThread.main(ActivityThread.java:3683) 
07-05 18:53:09.649: E/AndroidRuntime(858): at java.lang.reflect.Method.invokeNative(Native Method) 
07-05 18:53:09.649: E/AndroidRuntime(858): at java.lang.reflect.Method.invoke(Method.java:507) 
07-05 18:53:09.649: E/AndroidRuntime(858): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839) 
07-05 18:53:09.649: E/AndroidRuntime(858): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597) 
07-05 18:53:09.649: E/AndroidRuntime(858): at dalvik.system.NativeStart.main(Native Method) 
07-05 18:53:09.649: E/AndroidRuntime(858): Caused by: java.lang.NullPointerException 
07-05 18:53:09.649: E/AndroidRuntime(858): at your.com.learn.LearningActivity.onCreate(LearningActivity.java:42) 
07-05 18:53:09.649: E/AndroidRuntime(858): at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 
07-05 18:53:09.649: E/AndroidRuntime(858): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611) 
07-05 18:53:09.649: E/AndroidRuntime(858): ... 11 more

public class LearningActivity extends Activity  {
/** Called when the activity is first created. */

private game g;

int i=0;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    //For my button class
    /*
    MyButton myb = (MyButton)findViewById(R.id.mybutton1);
    myb.setText("Hello Students");
    myb.setTextSize(40);
   **/

    //For custom view
    setContentView(R.layout.main);
    //RelativeLayout r=(RelativeLayout) findViewById(R.id.relative1);
    g=new game(this,null);
    ViewGroup vgroup=(ViewGroup) findViewById(R.id.main);
     vgroup.addView(g);
    Thread mythread=new Thread(new UpdateThread());
    mythread.start();

}

public Handler updatehandler=new Handler(){
    /** Gets called on every message that is received */
    // @Override
    public void handleMessage(Message msg) {
       // g.update();

        g.invalidate();
         super.handleMessage(msg);

    }
};

public class UpdateThread implements Runnable
{

    public void run() {
        // TODO Auto-generated method stub
        while(true){
            //calling the handler
            LearningActivity.this.updatehandler.sendEmptyMessage(0);
        }

    }

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T00:58:33.680

**改写**

我自己并没有在画布上画太多，但这里有一种方法可以让你当前的课程正常工作：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/text"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1" />

    <org.whatever.example.game
        android:id="@+id/game1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1" />

</LinearLayout> 
```

但是当我尝试将您的游戏视图嵌套在另一个视图中（比如 ScrollView）时，它不会绘制任何东西。我现在不知道为什么，但是上面的代码会让你继续下一步。希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T01:01:10.247

尝试更改您的布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/main"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ScrollView
        android:layout_width="match_parent"
        android:layout_height="wrap_content">

        <your.com.learn.game
            android:id="@+id/game1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true" />
    </ScrollView>

</RelativeLayout> 
```

该`alingparentbottom`属性会将您的自定义视图设置为底部。

# python - Django在模板中查询manytomanyfield

> ID：11321136
> 
> 赞同：2
> 
> 时间：2012-07-04T00:52:23.117
> 
> 标签：python, django, django-templates

如何在 Django 模板中查询多多字段？

例如，这个 if 语句不起作用（我知道我不能在 Django 模板中调用带参数的函数），但这显示了我想做的事情：

模板.html

```
{% for post in posts %}
    {% if post.likes.filter(user=user) %}
        You like this post
    {% else %}
        <a>Click here to like this post</a>
    {% endif %}
{% endfor %} 
```

模型.py

```
class User(Model):
    # fields

class Post(Model):
    likes = ManyToManyField(User) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T07:37:51.827

为了做您正在寻找的东西，您可以执行以下操作：

```
{% for post in posts %}
    {% if user in post.likes.distinct %}
        You like this post
    {% else %}
        <a>Click here to like this post</a>
    {% endif %}
{% endfor %} 
```

或者，您可以使用 Greg 的方法。他的回答的优点是当你进入非常大的数据集时它会更好地扩展。这种方法不需要您编写任何自定义过滤器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T01:36:25.053

它不起作用，因为您似乎在模板中编写 python 代码......您需要在视图中运行循环并将帖子列表及其信息传递给模板，或者编写一个模板过滤器来确定是否某个用户喜欢一个帖子。例如：

```
from django import template

register = template.Library()

@register.filter
def is_liked_by(post, user):
    return bool(post.likes.filter(user=user)) 
```

然后在您的模板中：

```
{% for post in posts %}
    {% if post|is_liked_by:request.user %}
        You like this post
    {% else %}
        <a>Click here to like this post</a>
    {% endif %}
{% endfor %} 
```

# java - Eclipse 的 Google 插件无法正常工作

> ID：11321142
> 
> 赞同：2
> 
> 时间：2012-07-04T00:53:06.773
> 
> 标签：java, android, eclipse, google-app-engine, wizard

哇.. 我的一些梦想成真了 :) 很棒的工具！我还是有问题。我有一个非常全新的安装`eclipse 4.2`+ `Android Development Tools 20`+ `Google App Engine Tools for Android 3.0.1`+`Google Plugin for Eclipse 4.2 3.0.1`

当我创建一个新的干净的 Android 项目并尝试“生成应用程序引擎后端”时，我收到一个错误，并且缺少很多依赖项和代码。错误消息是无用的，控制台告诉我一切正常

错误：`Error in Generating Backend Project`

安慰：`DataNucleus Enhancer (version 1.1.4) : Enhancement of classes DataNucleus Enhancer completed with success for 1 classes. Timings : input=80 ms, enhance=44 ms, total=124 ms. Consult the log for full details`

在我的创建向导中，我也没有选项`App Engine Connected Android Project`

我仔细检查了我已经通过“安装新软件”新安装了所有依赖项

已安装软件的链接： http: [//sharetext.org/EFS2](http://sharetext.org/EFS2)

我在 Eclipse 3 上遇到了同样的问题并将其删除并重新安装了 Eclipse 4.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T18:56:39.507

我有完全相同的问题。你有进展吗？

**编辑**

基于此：[https](https://groups.google.com/forum/#!msg/google-plugin-eclipse/QIgMgvAdn3o/hdiLLD3HQeQJ) ://groups.google.com/forum/#!msg/google-plugin-eclipse/QIgMgvAdn3o/hdiLLD3HQeQJ我认为我们应该推迟到文档更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T03:51:52.173

我也有同样的问题。代替 Eclipse 4.2 尝试使用 Eclipse 3.7 Indigo。它确实对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T17:00:44.173

如果您遇到此检查以更新您的 GooglePlugin for Eclipse，这是一个已在更高版本之一中修复的错误

# .htaccess - htaccess 移动重定向正在 PC 上重定向

> ID：11321144
> 
> 赞同：0
> 
> 时间：2012-07-04T00:53:39.733
> 
> 标签：.htaccess, redirect, mobile

我的主站点 (www.jguffphotography.com) 目前使用 htaccess 重定向到 (mobile.jguffphotography)。效果很好

我有一个目录单独重定向（www.jguffphotography.com/photopage/）到（mobile.jguffphotography.com/photopage）

我的主域和 photopage 目录中有一个 htaccess 文件。

在我的手机上一切正常，但在 PC 上，照片页面 URL 正在重定向到移动子域。

* * *

我拥有的主要域 htaccess 编码是

```
 RewriteEngine On
RewriteCond %{HTTP_USER_AGENT} "android|blackberry|googlebot-mobile|iemobile|ipad|iphone|ipod|opera mobile|palmos|webos" [NC]
RewriteRule ^$ [http://mobile.jguffphotography.com](http://mobile.jguffphotography.com) [L,R=302] 
```

我在 photopage 目录中的一个是

```
 RewriteEngine On
RewriteCond %{HTTP_USER_AGENT} "android|blackberry|googlebot-mobile|iemobile|ipad|iphone|ipod|opera mobile|palmos|webos" [NC]
RedirectMatch 301 ^/photopage/([^.]+).html$ [http://mobile.jguffphotography.com/photopage/](http://mobile.jguffphotography.com/photopage/)$1.html 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T01:00:49.140

`RedirectCond`是 mod_rewrite 的一部分，适用于以下`RewriteRule`. `RedirectMatch`是 mod_alias 的一部分，与前面的条件没有任何关系。你需要坚持使用 mod_rewrite：

```
RewriteCond %{HTTP_USER_AGENT} "android|blackberry|googlebot-mobile|iemobile|ipad|iphone|ipod|opera mobile|palmos|webos" [NC]
RewriteRule ^photopage/([^.]+).html$ http://mobile.jguffphotography.com/photopage/$1.html [R=301,L] 
```

# scala - 将 scala 文件放在 Play Framework 2.0 中的什么位置，以便将其编译为默认包的一部分？

> ID：11321150
> 
> 赞同：8
> 
> 时间：2012-07-04T00:56:04.913
> 
> 标签：scala, playframework, playframework-2.0

我是 Play 和 Scala 的新手，我正在阅读Manning 出版社[的 Play for Scala](http://www.manning.com/hilton/)。我想使用说明来使用 Squeryl 而不是 Anorm。

书中提到我需要在一个扩展 GlobalSettings 的类中初始化 Squeryl。

```
import org.squeryl.adapters.H2Adapter
import org.squeryl.{Session, SessionFactory}
import play.api.db.DB import play.api.{Application, GlobalSettings}

object Global extends GlobalSettings {
    SessionFactory.concreteFactory = Some(() =>
    Session.create(DB.getConnection()(app), new H2Adapter) ) 
... 
```

由于这是早期版本（MEAP），因此不清楚该代码的放置位置......所以我在播放网站上进行了一些挖掘后，我发现了以下扩展 GlobalSettings的[示例](http://www.playframework.org/documentation/2.0/ScalaGlobal)

```
import play.api._

object Global extends GlobalSettings {

    override def onStart(app: Application) {
        Logger.info("Application has started")
    }  

    override def onStop(app: Application) {
        Logger.info("Application shutdown...")
    }  

} 
```

播放示例提供了更多帮助，但我仍然无法按照指示进行操作，其中状态：此对象必须在默认（空）包中定义。

这引出了我的问题：将 scala 文件放在 Play Framework 2.0 中的什么位置，以便将其作为默认包的一部分进行编译？

谢谢你的帮助...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-04T02:35:10.743

GlobalSettings 对象通常位于 app/Global.scala 中。查看 zentasks 示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T09:20:59.693

**这不能回答您提出的具体问题**

但是，如果您的问题是关于*“如何将 squeryl 与 Play2 一起使用？”* ，有一些资源你可以看看：

*   [如何让 Squeryl 与 Play 一起工作！框架？](https://stackoverflow.com/questions/10559562/how-to-make-squeryl-work-with-the-play-framework)
*   [https://groups.google.com/d/topic/squeryl/d7hBDNUjE2Y/discussion](https://groups.google.com/d/topic/squeryl/d7hBDNUjE2Y/discussion)
*   还有一个例子：[https ://github.com/jamesward/play2bars/tree/scala-squeryl](https://github.com/jamesward/play2bars/tree/scala-squeryl)

# ruby-on-rails - 为什么 sunspot/solr 在服务器重新启动时似乎会丢失大多数索引搜索结果，直到它被手动重新索引？

> ID：11321158
> 
> 赞同：0
> 
> 时间：2012-07-04T00:57:21.500
> 
> 标签：ruby-on-rails, solr, sunspot

有没有其他人遇到过这个问题？

我有一个启动脚本，它为 sunspot/solr 运行启动和重新索引命令。当服务器重新启动时，服务会启动。但是由于某种原因，在我手动运行重新索引之前，搜索结果仍然不会显示在我的应用程序中。因此，由于某种原因，结果不仅会在重新启动时消失，而且启动脚本的重新索引似乎没有做任何事情。

在你问之前，我确定脚本运行，因为如果我没有它，我会收到 Solr 连接错误，表明该服务甚至没有启动。但即使我弄清楚了重新索引似乎没有发生的原因，我对大多数太阳黑子/solr 搜索结果在重新启动时丢失，需要通过重新索引重新添加这一事实感到更加困惑。

# activemq - 无法在 ActiveMQ 中设置拦截器/代理插件

> ID：11321160
> 
> 赞同：1
> 
> 时间：2012-07-04T00:57:42.367
> 
> 标签：activemq

我编写了一个简单的身份验证/授权插件，我想将它注入 ActiveMQ。我希望它被称为 onConnect 和 onSubscribe。我[在 ActiveMQ 网站上遵循了这些步骤，](http://activemq.apache.org/interceptors.html)但发生了一些事情。

1) 如果我在 //beans/broker/plugins 的默认 activemq.xml 文件中放入我的 bean 声明，我会收到一个验证错误，指出节点“bean”不允许在那里。

2）如果我将插件声明放在代理元素之外，它将注入该元素，但它不会调用 installPlugin() 也不会调用钩子，大概是因为这是代理要做的。

3) 如果我将默认 activemq.xml (http://activemq.apache.org/schema/core) 中的 XML 命名空间声明更改为上面列出的文档中所述的内容 (http://activemq.org/config /1.0) 连同正确的 URL，我得到它找不到架构文档的错误。

我唯一能想到的是 5.6 中的更改未反映在文档中，我做错了什么，或者我只是疯了。这是 xml 文档的相关部分（减去与问题没有直接关系的几个节点）。

```
<beans
  xmlns="http://www.springframework.org/schema/beans"
  xmlns:amq="http://activemq.org/config/1.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
  http://activemq.apache.org/schema/core http://activemq.apache.org/schema/core/activemq-core.xsd">

<broker xmlns="http://activemq.apache.org/schema/core" brokerName="localhost" dataDirectory="${activemq.data}">

  <plugins>
     <bean id="tokenLoginPlugin" class="auth.TokenLoginPlugin">
       <property name="host" value="localhost" />
     </bean>
   </plugins>
</broker> 
```

这会产生以下异常。

```
The matching wildcard is strict, but no declaration can be found for element 'broker'. 
```

如果我使用默认 activemq.xml 文件中的 xmlns 声明，我会得到以下信息。

```
Invalid content was found starting with element 'bean' 
```

我可以看到这是一个验证错误，但似乎没有一个文档将我指向正确的方向。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T11:32:19.983

想通了，虽然我之前尝试过，但没有奏效。也许我上次搞砸了我的命名空间。我更改了插件定义并将 Spring 命名空间添加到我的 bean 声明中。

```
<plugins>
    <bean id="tokenLoginPlugin" class="auth.TokenLoginPlugin" xmlns="http://www.springframework.org/schema/beans">
        <property name="host" value="localhost" />
    </bean>
</plugins> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T11:37:33.687

我的配置是：

```
<beans
  xmlns="http://www.springframework.org/schema/beans"
  xmlns:amq="http://activemq.apache.org/schema/core"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
  http://activemq.apache.org/schema/core http://activemq.apache.org/schema/core/activemq-core.xsd">

<plugins>
     <bean  xmlns="http://www.springframework.org/schema/beans"  id="probePlugin" class="com.ProbePlugin"/>
</plugins>

</beans> 
```

# haskell - seq 不强制评估

> ID：11321163
> 
> 赞同：4
> 
> 时间：2012-07-04T00:58:18.093
> 
> 标签：haskell

所以我的haskell程序看起来像这样：

```
main = do
    secondData <- loadSecondBars "output.data"
    putStrLn $ "Generated Second Data " ++ (show $ length secondData)
    let tenMinBars = secondData `seq` generateBars (barSize featureSet) secondData
    putStrLn $ "Generated Ten Minute Bars " ++ (show $ length tenMinBars)
    let combinedData = seq tenMinBars sortBars (tenMinBars ++ secondData)
    putStrLn $ "Generated Combined" ++ (show $ length combinedData)
    let completedOrderManager = evalState (runBar combinedData) startState
    putStrLn "Ran Algo" 
```

这样做大约需要 8 秒来加载我的第二个数据，然后大约 3 秒来完成其余的功能。

但是，如果我删除显示长度数据，它会闪烁

```
"Generated Second Data"
"Generated Ten Minute Bars"
"Generated Combined"
"Ran Algo" 
```

然后暂停一下，直到它运行完所有实际功能。

我的理解是通过在其中放置 seq 来阻止惰性评估。我用错了吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-04T01:16:07.670

是的。有两点需要考虑：`seq`评估为 WHNF（弱头范式），并且`secondData`是一个列表。WHNF表示数据会被求值到最外层的构造函数，最外层的构造函数为`secondData`is `:`（除非为空，则构造函数为`[]`）。所以

```
secondData `seq` generateBars (barSize featureSet) secondData 
```

只会做足够的工作来确定是否`secondData`是空列表，或者它是否具有至少一个元素。

`length`评估列表的脊椎，这基本上意味着它通过遍历完整结构来确定列表中有多少元素。这意味着它将比具有超过 1 个元素的列表`length`做更多的工作。`seq`

您可以使用`deepseq`（来自[deepseq](http://hackage.haskell.org/package/deepseq)）来全面评估列表，但您可能不想这样做。 `length`并且`deepseq`必须完全遍历列表。如果您不需要提前知道该信息，那么这是浪费精力，因为您的消费者还必须再次遍历该列表。根据消费者的不同，这也可能会增加堆驻留，因为 deepseq 将首先强制所有数据结构，但直到算法完成后才会对它们进行 GC。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T01:16:22.920

`seq`仅将值强制为弱头范式；对于列表，这意味着它只评估足够远来判断列表是否匹配`[]`或`_:_`。猜测一下，纯粹基于名称（因为您没有给出任何类型），这或类似的事情就是发生在您身上的事情：它只是评估到足以意识到“是的，这里根本没有数据” .

通常的技巧是调用`seq`列表的长度或使用`deepseq`.

# java - Using an older version of JRE for certain programs

> ID：11321166
> 
> 赞同：-2
> 
> 时间：2012-07-04T00:58:35.347
> 
> 标签：java

I have learned that on my computer, Minecraft will only run with Java 6 installed. As soon as I install java 7 (JDK or otherwise), the application encounters multiple problems (doesn't crash, just can't connect to any file servers.) My question is: Is there a way to allow Minecraft to use Java 6 while all other programs use 7?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T02:12:53.123

You have installed 2 versions: JRE 6 and JRE 7\. They were stored in Program Files\Java folder.

To run your program in JRE 6: - The first way, you must re-config Environment Variables and then run command / terminal to interpre your program. java yourfolder\yoursubfolder\yourMain

yourMain is a file "yourMain.class"

*   The second way, you must change your current directory to JRE 6 Folder in Program Files\Java, you can do that in command / terminal (ex: DOS...). And then, you use java command normally.

# php - 相似文本搜索

> ID：11321170
> 
> 赞同：0
> 
> 时间：2012-07-04T00:58:55.677
> 
> 标签：php, mysql, search

我使用以下代码搜索类似的文本。但由于某种原因，无论我搜索什么，它都只会返回相同的值。有人可以看到问题可能是什么吗？

```
 $result = mysql_query("SELECT keyword FROM search");
$storeArray = Array();
while ($row = mysql_fetch_array($result, MYSQL_ASSOC)) {
$storeArray[] =  $row['keyword'];  
      }
foreach ($storeArray as $key){
    //echo "'".$key."'";
}  

$my_word = $_POST['value'];

$all_words = array(
"'".$key."'"
);

$bestMatch = array('word' => $my_word, 'match' => 2);

foreach($all_words as $word) {
similar_text($word, $my_word, $percent);
if($percent > $bestMatch['match']) $bestMatch = array('word' => $word, 'match' =>     $percent);
}

if($bestMatch['match'] < 100) echo 'Did you mean: <strong>' . $bestMatch['word'] .   '</strong>'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T01:08:22.813

我稍微编辑了一下，告诉我这是不是你想要的。

```
$my_word = $_POST['value'];
$bestMatch = array('word' => $my_word, 'match' => 2);
$result = mysql_query("SELECT keyword FROM search");
while ($row = mysql_fetch_array($result, MYSQL_ASSOC)) {
            //run similar text on each row
        similar_text($row['keyword'], $my_word, $percent);
            //if row has a better score, overwrite $bestMatch
        if ($percent > $bestMatch['match'])
            $bestMatch = array('word' => $row['keyword'], 'match' => $percent);
}
if ($bestMatch['match'] < 100)
    echo 'Did you mean: <strong>' . $bestMatch['word'] .   '</strong>'; 
```

编辑：不要忘记，`similar_text`仅对于已经具有很大相似性的单词（主要在长度方面），这显示出良好的结果，我认为这是 80% 的相似性（结合字符数和长度）。虽然不是 100% 确定...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T01:10:09.337

看来您正在代码中执行此操作，并且只能解释得到一个结果。

```
$all_words = array(
    "'".$key."'"
);

foreach($all_words as $word) {
    // ...
} 
```

你正在做的是运行一个不存在的`foreach()`on `$key`，因此得到最接近的匹配`''`.. 这将永远是同一件事。

尝试将其更改`foreach()`为`foreach($storeArray as $word)`，或类似的东西。

这里有一些调试策略——把这段代码放在上面`if($bestMatch['match'] < 100)`。

```
echo '<pre>';
echo $my_word;
print_r($storeArray);
print_r($all_words);
echo '/<pre>'; 
```

您正在寻找的是`$all_words`包含您想要运行的所有单词`similar_text()`。

# ruby-on-rails - Ruby/Rails Javascript (flot) 使用 Wickedpdf 渲染 pdf

> ID：11321171
> 
> 赞同：3
> 
> 时间：2012-07-04T00:59:14.740
> 
> 标签：ruby-on-rails, ruby, pdf, flot, wicked-pdf

wickedpdf 是否呈现 javascript 图形？

红宝石 1.8.7

导轨 - 2.3.8

我的代码工作正常，视图很好 - flot 确实按照我想要的方式绘制图形......但是当我查看 pdf 文件时，它都是空白的。

有没有其他人遇到过类似的问题？

控制器：

```
 def graph
 @now=Time.now

 @graph = [0,0] / some sort of dataset /

 pdf = render_to_string :pdf => "graphs", :orientation => 'Landscape', :font_size => 11
 save_path = Rails.root.join('pdfs', @now.to_date.to_s+'_graphs.pdf')

 File.open(save_path, 'wb') do |file|

 file << pdf
 end 
```

看法：

```
<script language="javascript" type="text/javascript" src="/javascripts/jquery.js"></script>
<script language="javascript" type="text/javascript" src="/javascripts/jquery.flot.js"></script>
<script language="javascript" type="text/javascript" src="/javascripts/jquery.flot.navigate.js"></script>

<%= wicked_pdf_stylesheet_link_tag "pdf" -%>
<%= wicked_pdf_javascript_src_tag "jquery" %>
<%= wicked_pdf_javascript_src_tag "jquery.flot" %>
<%= wicked_pdf_javascript_src_tag "jquery.flot.navigate" %>
<script type="text/javascript">

$(function () {

var options = {
    lines: { show: true },
    points: { show: true },
    xaxis: { mode: "time",  timeformat: "%m/%y",   minTickSize: [1, "day"], tickSize: [1, "month"]}
    };

    var graph = <%= @graph.to_json %>;
    $.plot(placeholder,graph.data,options);
    }

  <div id="placeholder" style="width:1000;height:500px"></div> 
```

帮手：

```
 module WickedPdfHelper
  def wicked_pdf_stylesheet_link_tag(*sources)
    css_dir = Rails.root.join('public','stylesheets')
    sources.collect { |source|
      "<style type='text/css'>#{File.read(css_dir.join(source+'.css'))}</style>"
    }.join("\n").html_safe
  end

  def wicked_pdf_image_tag(img, options={})
    image_tag "file:///#{Rails.root.join('public', 'images', img)}", options
  end

  def wicked_pdf_javascript_src_tag(jsfile, options={})
    javascript_src_tag jsfile, options
  end

  def wicked_pdf_javascript_include_tag(*sources)
    sources.collect{ |source| wicked_pdf_javascript_src_tag(source, {}) }.join("\n").html_safe
  end

  module Assets
    def wicked_pdf_stylesheet_link_tag(*sources)
      sources.collect { |source|
        "<style type='text/css'>#{read_asset(source+".css")}</style>"
      }.join("\n").html_safe
    end

    def wicked_pdf_image_tag(img, options={})
      image_tag "file://#{asset_pathname(img).to_s}", options
    end

    def wicked_pdf_javascript_src_tag(jsfile, options={})
      javascript_include_tag jsfile, options
    end

    def wicked_pdf_javascript_include_tag(*sources)
      sources.collect { |source|
        "<script type='text/javascript'>#{read_asset(source+".js")}</script>"
      }.join("\n").html_safe
    end

    private

    def asset_pathname(source)
      if Rails.configuration.assets.compile == false
        File.join(Rails.public_path, asset_path(source))
      else
        Rails.application.assets.find_asset(source).pathname
      end
    end

    def read_asset(source)
      if Rails.configuration.assets.compile == false
        IO.read(asset_pathname(source))
      else
        Rails.application.assets.find_asset(source).to_s
      end
    end
  end
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T07:17:35.740

它可能没有完整的 js 解释器。尝试渲染 jpg。Gruff 会这样做，但它看起来不太好，尤其是对于时间图

# javascript - 单元格背景颜色不改变javascript

> ID：11321174
> 
> 赞同：1
> 
> 时间：2012-07-04T00:59:29.650
> 
> 标签：javascript, html, css

我正在为基于一些简单阈值的一些结果创建热图。我正在使用 JavaScript 创建、设置值和背景颜色。预期的结果是使用一些`blue`不同色调的热图。但是，没有任何内容被着色，通过分析 DOM 我发现：

```
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td> 
```

因此，`bgcolor="#"`未设置。我都使用了`bgcolor`and `setAtribute`，但结果是一样的：没有任何东西被着色。我的功能贴在下面：

```
function makeTable(data)
    {
        var row = new Array();
        var cell = new Array();

        var row_num = 26;
        var cell_num = 44;

        var tab = document.createElement('table');
        tab.setAttribute('id', 'newtable');
        tab.border = '1px';

        var tbo = document.createElement('tbody');

        for(var i = 0; i < row_num; i++){
            row[i] = document.createElement('tr');

            var upper = (i+1)*44;
            var lower = i*44;
            for(var j = lower; j < upper; j++){
                cell[j] = document.createElement('td');
                if(data[j] != undefined){
                    var index = document.createTextNode(data[j].diff);
                    cell[j].appendChild(index);
                    /* specify which color better suits the heatmap */
                    if(index >= 0 || index <= 100){
                        cell[j].bgcolor = "#ADDDE6";
                    }
                    else if(index > 100 || index <= 1000){
                        cell[j].bgcolor = "#00BFFF";
                    }
                    else if(index > 1000 || index <= 4000){
                        cell[j].bgcolor = "#6495ED";
                    }
                    else if(index > 4000 || index <= 6000){
                        cell[j].bgcolor = "#00008B";
                    }
                    else{
                        cell[j].bgcolor = "#0000FF";
                    }
                    row[i].appendChild(cell[j]);
                }
            }

            tbo.appendChild(row[i]);
        }

        tab.appendChild(tbo);
        document.getElementById('mytable').appendChild(tab);
    } 
```

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T01:02:24.440

```
cell.style.backgroundColor="red" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T01:19:08.557

您需要在 bgcolor 属性 -> bgColor 中使用大写的 C。

# java - java中的一个类可以控制另一个类中的对象吗？

> ID：11321176
> 
> 赞同：2
> 
> 时间：2012-07-04T00:59:38.143
> 
> 标签：java

假设我有一个名为`Factory`. 我打算让该类公开访问，以便任何人都可以创建和访问`factory`. 我希望工厂创建和分发`widgets`. 我只希望工厂能够创建`widgets`，而不是公共程序空间中的任何人。但是，我想要一个调用的方法，它会向主程序`distribute()`发出 a 。`widget`那时主程序可以访问所有的公共方法`widget`。如果需要，它还可以将其返回工厂，从而删除对该对象的任何公共访问。

如果这是可能的，如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T01:05:17.797

你正在寻找的是一个内部类。通过将内部类的构造函数声明为private，只有封装类才能访问！然后在外部类中创建一个工厂方法来构建小部件并分发它。我已经在`static`这里声明了，但这不是必需的，具体取决于您的需要。

```
public class Factory {

  public static Widget buildWidget() {
    Widget widget = new Widget();
    return widget;
  }

  public class Widget {
    private Widget() { ... }
    public void someMethod() { ... }
  }
} 
```

请注意，在干净的代码中，您必须通过注意引用完整性来解决您的其他问题。要“归还”小部件，必须释放对它的所有其他引用。您的工厂当然可以跟踪它发出的小部件，但是很难可靠地“召回”小部件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T01:03:45.157

您正在描述随时间变化的访问控制（“如果需要，它也可以将其返回工厂，从而删除对该对象的任何公共访问。”）。Java 不是那样工作的。所有访问限定符都经过静态检查，并在程序的整个生命周期内保持不变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T01:19:48.830

将小部件放在与工厂相同的包中，并将小部件的构造函数设置为具有受保护的可见性。这会将对象的创建限制在工厂中。

对于每个小部件，可以部分实现访问控制。您可以在允许访问的 Objects 的每个小部件中保留一个 List，并且只有工厂可以修改此列表（受保护的可见性）。对于所有公共功能，您需要用户传入一个已被授权访问小部件功能的对象。您可以通过将已授权的对象传递回工厂来返回该对象，以便工厂删除授权。

您可以将主类中的私有对象作为授权对象传递 - 这将阻止其他类使用小部件。但是，这并不妨碍其他类请求授权。

这有点不稳定，因为您可能忘记释放授权并使用“不死对象”使小部件混乱（除了小部件中的访问控制列表外，其他任何地方都没有使用）。

# javascript - FusionCharts：无法设置图表的部分样式

> ID：11321183
> 
> 赞同：4
> 
> 时间：2012-07-04T01:01:50.063
> 
> 标签：javascript, json, styles, fusioncharts

我正在使用 JSON 格式来设置 FusionChart 的样式。当我整体更改图表的属性时，更改会显示在图表上。但是，当我更改单个元素时（使用[此处](http://docs.fusioncharts.com/charts/contents/index.html?Introduction/JSChartingCapabilities.html)找到的格式，在“使用样式指定单个标题的字体属性”标题下），更改不会显示在我的图表上。

这是我的代码：

```
dataSource: {
            //works    
            chart: {
                    paletteColors: PALETTE_COLORS,
                    showBorder: "0",
                    formatNumber: "1",
                    formatNumberScale: "0",
                    numberPrefix: '$',
                    labelSepChar: ': ',
                    toolTipSepChar: ': ',
                    bgColor: 'FFFFFF',
                    seriesNameInToolTip: "0",
                    decimals: options.unit() === 'ppd' ? 2 : 0,

                    showLegend: options.showBudget() ? "1" : "0"
                },
                //doesn't work
                styles: {
                    definition: [{
                        name: "myDataValuesFont",
                        type: "font",
                        size: "24"
                    }]
                },
                application: [{
                    toobject: "tooltip",
                    styles: "myDataValuesFont"
                }]
            } 
```

我究竟做错了什么？

# ios - 我可以用 EAGLView 制作卷曲页面效果吗？

> ID：11321185
> 
> 赞同：0
> 
> 时间：2012-07-04T01:02:09.560
> 
> 标签：ios, eaglview, page-curl

我想获得像谷歌地图一样的效果，但是用 EAGLView 替换 MapView。这可能吗？如何？

我使用了[链接](https://github.com/FairfaxMobile/FDCurlViewControl)。它使用 UIView 作为 targetView，将 targetView 设置为 EAGLView 时出现问题我不确定它是否支持 EAGLView

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T02:26:40.317

查看 XBPageCurl，[https://github.com/xissburg/XBPageCurl](https://github.com/xissburg/XBPageCurl)

我没有使用它 EAGLView，但它似乎适用于任何视图

# android - 在android中通过索引指针检测移动事件

> ID：11321187
> 
> 赞同：4
> 
> 时间：2012-07-04T01:02:24.547
> 
> 标签：android, multi-touch

我正在开发一个多点触控程序，该程序只需要记录第二根手指或食指的动作。现在文档说我们可以使用 MotionEvent.ACTION_POINTER_INDEX_MASK 和 & 它与 action 和 shift by INDEX_SHIFT 来获取使动作像上升或下降的指针。但是这种技术在移动时不起作用。

无论如何，我们可以单独检测某个指针所做的移动动作吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T01:17:02.640

是的，你的`View`课堂上可以有这样的东西：

```
@Override
public boolean onTouchEvent(MotionEvent event) {
    switch (event.getActionMasked()) {
        case MotionEvent.ACTION_MOVE:
            if(event.getPointerCount()>1){
                //where 1 is the index of the second finger
                final int Y = event.getY(1); 
                final int X = event.getX(1); 
            }
            break;
    }
} 
```

因此，根据您想要获取移动的手指，您可以将获取设置为该索引。请记住，值可能是从 0（第一个向下的指针）到`getPointerCount()-1`. 我在 2.2 Gingerbread 上对此进行了测试，希望对您有用:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-30T14:03:54.203

您可以通过检查哪个指针更改来获得有效的指针索引：

```
private final int MAX_POINTER = 5; // 5 different touch pointers supported on most devices
private float mLastTouchPositionX[];
private float mLastTouchPositionY[];

@Override
public boolean onTouchEvent(MotionEvent aEvent)
int tActionIndex = aEvent.getActionIndex();
int tPointerCount = aEvent.getPointerCount();
    /*
     * Check which pointer changed on move
     */
    if (tMaskedAction == MotionEvent.ACTION_MOVE) {
        for (int i = 0; i < tPointerCount && i < MAX_POINTER; i++) {
            if (mLastTouchPositionX[i] != aEvent.getX(i) || mLastTouchPositionY[i] != aEvent.getY(i)) {
                mLastTouchPositionX[i] = aEvent.getX(i);
                mLastTouchPositionY[i] = aEvent.getY(i);
                // Found new action index
                tActionIndex = i;
                break;
            }
        }
    }
...
} 
```

# android - toast和对话框如何协调？Toast 部分覆盖了加载对话框。我可以调整吐司的大小吗？

> ID：11321189
> 
> 赞同：0
> 
> 时间：2012-07-04T01:02:38.050
> 
> 标签：android

这是确切的情况。用户登录，并得到一个持续几秒钟的欢迎祝酒词，然后他们被切换到一个有加载对话框的帐户页面......所以它有点难看，因为祝酒词与对话框同时进行。实际上它部分覆盖了它。我希望用户看到 Toast，然后在 Toast 结束后它仍在进行中的加载对话框。....因此，如果我可以将 toast 对话框的大小调整到可以工作的相同大小的位置，或者如果我可以隐藏 Loading 对话框直到 Toast 结束..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T01:57:10.777

我建议创建一个等待 Toast 完成的线程。显示吐司后立即启动它。

```
 Toast.makeText(this,"WELCOME TO MY APPLICATION!", Toast.LENGTH_LONG).show();
        thread.start(); 
```

在您的线程中，您等待 (LENGTH_LONG = 3.5) 或 (LENGTH_SHORT = 2) 秒，然后显示您的对话框。

```
Thread thread = new Thread(){
         @Override
        public void run() {
             try {
                Thread.sleep(3500); // use 2000 if LENGTH_SHORT is used
                displayDialog(); // toast should have disappeared at this point so you can display your dialog box here
            } catch (Exception e) {
                e.printStackTrace();
            }
         }  
       }; 
```

# php - PHP Jquery Ajax - 获取 URL 参数

> ID：11321196
> 
> 赞同：0
> 
> 时间：2012-07-04T01:03:04.877
> 
> 标签：php, jquery, get

我正在处理 Ajax 登录表单。登录成功后的PHP处理页面，有3个选项可以重定向用户。

```
<?php
// ------------------------------------------------------------
// PROCESS LOGIN FORM ON POSTBACK
// ------------------------------------------------------------

if ($_SERVER['REQUEST_METHOD'] == 'POST') {
    ...

    // 1\. DEFAULT URL: default destination url from config
    $plLoginDestinationUrl = PL_DEFAULT_LOGIN_DESTINATION;

    // 2\. RETURN URL: if return address present in url
    if (isset($_GET['ReturnUrl'])) {
        $plLoginDestinationUrl = $_GET['ReturnUrl'];
    }

    // 3\. PER USER URL: if custom user destination in db exists
    if ($pllogin->loginDestinationUrl != 'default') {
        $plLoginDestinationUrl = $pllogin->loginDestinationUrl;
    }
} 
```

如果表单在没有 javascript (jquery) 的情况下提交，一切正常。使用 ajax 提交页面在 #2 上失败。它只是不会解析 $_GET['ReturnUrl']。

使用ajax提交时我总是得到的PHP错误响应是：注意：未定义索引：ReturnUrl in。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T01:07:31.613

Ajax 很可能是发布而不是获取。尝试替换`$_GET['ReturnUrl'];`为`$_POST['ReturnUrl'];`甚至`$_REQUEST['ReturnUrl'];`

# javascript - JsRender：使用 if 语句将 JSON 对象中的值与外部变量进行比较

> ID：11321198
> 
> 赞同：0
> 
> 时间：2012-07-04T01:03:15.767
> 
> 标签：javascript, jsrender

在我的 JsRender 模板中，我想过滤 json 对象以仅呈现满足特定条件的记录——例如父 id，它是一个在执行呈现之前立即初始化的变量。

我想做的是下面，但第二行语法只是一个猜测。这该怎么做？

```
<script id="tmpl_report_entry_table_data_rows" type="text/x-jsrender">
{{if ENTRY_ID==n_current_entry_id_from_external_variable}}
<tr class="attribute_data_row">
    <td class="entry_id attribute_data"><span>{{:ENTRY_ID}}</span></td>
    <td class="attribute_1 attribute_data hidden"><span>{{:ATTRIBUTE__1}}</span></td>
    <td class="attribute_2 attribute_data"><span>{{:ATTRIBUTE__2}}</span></td>
    <td class="attribute_14 attribute_data"><span>{{:ATTRIBUTE__14}}</span></td>
    <td class="attribute_13 attribute_data"><span>{{:ATTRIBUTE__13}}</span></td>
    <td class="attribute_11 attribute_date attribute_data"><span>{{:ATTRIBUTE__11}}</span></td>
    <td class="attribute_11 attribute_date_hidden"><span>{{:ATTRIBUTE__11}}</span></td>
    <td class="attribute_3 attribute_data"><span>{{:ATTRIBUTE__3}}</span></td>
    <td class="attribute_4 attribute_data"><span>{{:ATTRIBUTE__4}}</span></td>
    <td class="attribute_5 attribute_data">
        <a href="?"><span>{{:ATTRIBUTE__5}}</span></a>
    </td>
    <td class="cmd"></td>
</tr>    
{{/if}}
</script>

<script>
var obj_my_data = [
    {"ENTRY_ID":79,
        "test":true,
        "ATTRIBUTE__1":"Aleutian Islands",
        "ATTRIBUTE__2":"Arrowtooth Flounder",
        "ATTRIBUTE__13":"BSAI trawl limited access",
        "ATTRIBUTE__3":"Open",
    "ATTRIBUTE__4":"TAC",
    "ATTRIBUTE__5":"",
    "ATTRIBUTE__11":",",
    "ATTRIBUTE__14":"Entire GOA"},
    {"ENTRY_ID":80,
    "test":true,
    "ATTRIBUTE__1":"Aleutian Islands",
    "ATTRIBUTE__2":"Atka Macherel",
    "ATTRIBUTE__13":"BSAI trawl limited access",
    "ATTRIBUTE__3":"Open",
    "ATTRIBUTE__4":"TAC",
    "ATTRIBUTE__5":"",
    "ATTRIBUTE__11":",",
    "ATTRIBUTE__14":"Entire GOA"}
];

$(document).ready(function(){  
    $("table tbody").append($("#my_template").render(obj_my_data)); 
});
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T03:44:47.340

虽然您可以修改您的数据以携带您当前的行 ID，但通常通过使用 render 方法传入参数来“参数化”模板同样简单（且更简洁）。你可以通过传入一个额外的上下文参数来做到这一点。它可以携带参数和辅助函数，您可以动态传递这些参数和辅助函数，仅用于此模板渲染......

```
$("#my_template").render(myData, {currentRowId: myCurrIdVar})); 
```

然后，您可以从模板（或嵌套模板）中访问这些命名参数，就像访问已注册的帮助程序一样 - 通过将“~”附加到名称。

```
{{if ENTRY_ID==~currentRowId}}
    ...
{{/if}} 
```

我[在 GitHub 上添加了一个新的示例演示，](http://borismoore.github.com/jsrender/demos/step-by-step/12_passing-in-context.html)显示了这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T01:41:37.653

您可以将当前行值分配给数据对象的属性...

```
$(document).ready(function(){
    obj_my_data.currentRow = n_current_entry_id_from_external_variable;
    $("table tbody").append($("#my_template").render(obj_my_data)); 
}); 
```

然后，您的模板可以检查此属性。

```
<script id="tmpl_report_entry_table_data_rows" type="text/x-jsrender">
    {{if ENTRY_ID == currentRow}}
    // remaining template. 
```

# html - 如何使用 htaccess 重定向 html 扩展？

> ID：11321203
> 
> 赞同：7
> 
> 时间：2012-07-04T01:03:55.373
> 
> 标签：html, .htaccess, file-extension

目前，这两个链接都显示相同的页面：

[http://www.example.com/podcast/episode.html](http://www.example.com/podcast/episode.html)
[http://www.example.com/podcast/episode](http://www.example.com/podcast/episode)

我想要做的是将所有 html 类型的链接重定向到非 html 链接。

我知道这对 htaccess 来说似乎很简单，但它对我不起作用。

到目前为止，这是我的 htaccess 代码：

```
 RewriteEngine On
    RewriteBase /

    #removing trailing slash

    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)/$ $1 [R=301,L]

    #non www to www

    RewriteCond %{HTTP_HOST} !^www\.
    RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L]

    #shtml

    AddType text/html .html
    AddHandler server-parsed .html

    #html

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^([^\.]+)$ $1.html [NC,L]

    #index redirect

    RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /index\.html\ HTTP/ 
    RewriteRule ^index\.html$ http://example.com/ [R=301,L] 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-04T20:52:06.487

```
RewriteCond %{THE_REQUEST} \.html
RewriteRule ^(.*)\.html$ /$1 [R=301,L] 
```

# php - 错误消息“调用非对象上的成员函数 query()”

> ID：11321204
> 
> 赞同：0
> 
> 时间：2012-07-04T01:03:59.590
> 
> 标签：php, mysql

在下面的代码中，我试图通过计算用户名来检查输入的用户名是否已被使用。

```
<?php
$hostname = 'aaa';
$username = 'bbb';
$password = 'ccc';
$prefix = "";
$dbna = 'ddd';
$username11 = $_POST['username'];
try {
$dbh = new PDO("mysql:host=$hostname;dbname=$dbna", $username, $password);
$nRows = $pdo->query("SELECT count(Username) FROM Users WHERE Username ='$username11'")->fetchColumn(); 
if($nRows)
{
echo '<span style="color: red;">The username <b>'.$username11.'</b> is already in use.    </span>';
}
else
{
echo 'OK';
}
}
catch(PDOException $e)
{
echo $e->getMessage();
}
?> 
```

错误是：

```
Fatal error: Call to a member function query() on a non-object in /home/check.php on line 10 
```

我寻找此错误的解决方案，但找不到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T01:05:08.807

```
$pdo->query 
```

应该：

```
$dbh->query 
```

# c - 使用 SSE4 向量化点积计算

> ID：11321205
> 
> 赞同：10
> 
> 时间：2012-07-04T01:04:01.077
> 
> 标签：c, performance, sse, dot-product

我正在尝试使用 SSE4 点积来改进此代码，但我很难找到解决方案。此函数获取参数 qi 和 tj，其中包含每个 80 个单元格的浮点数组，然后计算点积。返回值是一个具有四个点积的向量。所以我要做的是并行计算二十个值的四个点积。

您知道如何改进此代码吗？

```
inline __m128 ScalarProd20Vec(__m128* qi, __m128* tj)
{
    __m128 res=_mm_add_ps(_mm_mul_ps(tj[0],qi[0]),_mm_mul_ps(tj[1],qi[1]));
    res=_mm_add_ps(res,_mm_add_ps(_mm_mul_ps(tj[2],qi[2]),_mm_mul_ps(tj[3],qi[3])));
    res=_mm_add_ps(res,_mm_add_ps(_mm_mul_ps(tj[4],qi[4]),_mm_mul_ps(tj[5],qi[5])));
    res=_mm_add_ps(res,_mm_add_ps(_mm_mul_ps(tj[6],qi[6]),_mm_mul_ps(tj[7],qi[7])));
    res=_mm_add_ps(res,_mm_add_ps(_mm_mul_ps(tj[8],qi[8]),_mm_mul_ps(tj[9],qi[9])));
    res=_mm_add_ps(res,_mm_add_ps(_mm_mul_ps(tj[10],qi[10]),_mm_mul_ps(tj[11],qi[11])));
    res=_mm_add_ps(res,_mm_add_ps(_mm_mul_ps(tj[12],qi[12]),_mm_mul_ps(tj[13],qi[13])));
    res=_mm_add_ps(res,_mm_add_ps(_mm_mul_ps(tj[14],qi[14]),_mm_mul_ps(tj[15],qi[15])));
    res=_mm_add_ps(res,_mm_add_ps(_mm_mul_ps(tj[16],qi[16]),_mm_mul_ps(tj[17],qi[17])));
    res=_mm_add_ps(res,_mm_add_ps(_mm_mul_ps(tj[18],qi[18]),_mm_mul_ps(tj[19],qi[19])));
    return res;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-04T02:36:32.333

在我在 SO 上看到的数百个 SSE 示例中，您的代码是少数从一开始就已经处于良好状态的代码之一。您不需要 SSE4 点积指令。（你可以做得更好！）

**但是，您可以尝试一件事：（**我说尝试是因为我还没有计时。）

目前，您在`res`. 当今大多数机器上的向量加法是 3-4 个周期。因此，您的代码至少需要运行 30 个周期，因为您有：

```
(10 additions on critical path) * (3 cycles addps latency) = 30 cycles 
```

您可以做的是`res`按如下方式对变量进行节点拆分：

```
__m128 res0 = _mm_add_ps(_mm_mul_ps(tj[ 0],qi[ 0]),_mm_mul_ps(tj[ 1],qi[ 1]));
__m128 res1 = _mm_add_ps(_mm_mul_ps(tj[ 2],qi[ 2]),_mm_mul_ps(tj[ 3],qi[ 3]));

res0 = _mm_add_ps(res0,_mm_add_ps(_mm_mul_ps(tj[ 4],qi[ 4]),_mm_mul_ps(tj[ 5],qi[ 5]))); 
res1 = _mm_add_ps(res1,_mm_add_ps(_mm_mul_ps(tj[ 6],qi[ 6]),_mm_mul_ps(tj[ 7],qi[ 7])));

res0 = _mm_add_ps(res0,_mm_add_ps(_mm_mul_ps(tj[ 8],qi[ 8]),_mm_mul_ps(tj[ 9],qi[ 9])));
res1 = _mm_add_ps(res1,_mm_add_ps(_mm_mul_ps(tj[10],qi[10]),_mm_mul_ps(tj[11],qi[11])));

res0 = _mm_add_ps(res0,_mm_add_ps(_mm_mul_ps(tj[12],qi[12]),_mm_mul_ps(tj[13],qi[13])));
res1 = _mm_add_ps(res1,_mm_add_ps(_mm_mul_ps(tj[14],qi[14]),_mm_mul_ps(tj[15],qi[15])));

res0 = _mm_add_ps(res0,_mm_add_ps(_mm_mul_ps(tj[16],qi[16]),_mm_mul_ps(tj[17],qi[17])));
res1 = _mm_add_ps(res1,_mm_add_ps(_mm_mul_ps(tj[18],qi[18]),_mm_mul_ps(tj[19],qi[19])));

return _mm_add_ps(res0,res1); 
```

这几乎将您的关键路径减半。请注意，由于浮点非关联性，这种优化对于编译器来说是非法的。

* * *

这是使用 4 路节点拆分和 AMD FMA4 指令的替代版本。如果您不能使用 fused-multiply 添加，请随意拆分它们。它可能仍然比上面的第一个版本更好。

```
__m128 res0 = _mm_mul_ps(tj[ 0],qi[ 0]);
__m128 res1 = _mm_mul_ps(tj[ 1],qi[ 1]);
__m128 res2 = _mm_mul_ps(tj[ 2],qi[ 2]);
__m128 res3 = _mm_mul_ps(tj[ 3],qi[ 3]);

res0 = _mm_macc_ps(tj[ 4],qi[ 4],res0);
res1 = _mm_macc_ps(tj[ 5],qi[ 5],res1);
res2 = _mm_macc_ps(tj[ 6],qi[ 6],res2);
res3 = _mm_macc_ps(tj[ 7],qi[ 7],res3);

res0 = _mm_macc_ps(tj[ 8],qi[ 8],res0);
res1 = _mm_macc_ps(tj[ 9],qi[ 9],res1);
res2 = _mm_macc_ps(tj[10],qi[10],res2);
res3 = _mm_macc_ps(tj[11],qi[11],res3);

res0 = _mm_macc_ps(tj[12],qi[12],res0);
res1 = _mm_macc_ps(tj[13],qi[13],res1);
res2 = _mm_macc_ps(tj[14],qi[14],res2);
res3 = _mm_macc_ps(tj[15],qi[15],res3);

res0 = _mm_macc_ps(tj[16],qi[16],res0);
res1 = _mm_macc_ps(tj[17],qi[17],res1);
res2 = _mm_macc_ps(tj[18],qi[18],res2);
res3 = _mm_macc_ps(tj[19],qi[19],res3);

res0 = _mm_add_ps(res0,res1);
res2 = _mm_add_ps(res2,res3);

return _mm_add_ps(res0,res2); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T01:48:25.153

首先，您可以做的最重要的优化是确保您的编译器已打开所有优化设置。

* * *

编译器非常聪明，所以如果把它写成一个循环，它很可能会展开它：

```
__128 res = _mm_setzero();
for (int i = 0; i < 10; i++) {
  res = _mm_add_ps(res, _mm_add_ps(_mm_mul_ps(tj[2*i], qi[2*i]), _mm_mul_ps(tj[2*i+1], qi[2*i+1])));
}
return res; 
```

（使用 GCC，您需要通过`-funroll-loops`，然后它会展开它以一次进行 5 次迭代。）

如果循环版本较慢，您还可以定义一个宏并手动展开它，例如：

```
__128 res = _mm_setzero();

#define STEP(i) res = _mm_add_ps(res, _mm_add_ps(_mm_mul_ps(tj[2*i], qi[2*i]), _mm_mul_ps(tj[2*i+1], qi[2*i+1])))

STEP(0); STEP(1); STEP(2); STEP(3); STEP(4);
STEP(5); STEP(6); STEP(7); STEP(8); STEP(9);

#undef STEP

return res; 
```

* * *

您甚至可以运行从 0 到 20 的循环（或对宏版本执行相同操作），即：

```
__128 res = _mm_setzero();
for (int i = 0; i < 20; i++) {
  res = _mm_add_ps(res, _mm_mul_ps(tj[i], qi[i]));
}
return res; 
```

（使用 GCC，`-funroll-loops`它一次展开 10 次迭代，即与上面的一次两次循环相同。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-04T01:52:41.203

您的数据没有以适合专门 SSE4 点积指令 ( `dpps`) 的格式排列在内存中。这些指令期望单个向量的维度是相邻的，如下所示：

```
| dim0 | dim1 | dim2 | ... | dim19 | 
```

而您的数据似乎使向量相互交错：

```
| v0-dim0 | v1-dim0 | v2-dim0 | v3-dim0 | v0-dim1 | ... 
```

您当前的一般方法似乎是合适的-您可以通过重新排序指令来改进事情，这样乘法的结果在生成后不会立即使用，但实际上编译器应该能够自己解决这个问题。

# java - JTidyFilter / JTidyServlet 替代方案？

> ID：11321206
> 
> 赞同：2
> 
> 时间：2012-07-04T01:04:19.930
> 
> 标签：java, html, servlet-filters, pretty-print

JTidyServlet项目（在[各种](https://stackoverflow.com/a/3604320/27358)[答案](https://stackoverflow.com/a/1589867/27358)[中](http://jtidy.sourceforge.net/multiproject/jtidyservlet/index.html)提到）似乎或多或少已经失效——没有可浏览的源代码，除了主要的 JTidy 下载（不包括 servlet 或过滤器）之外，没有从 SourceForge 项目页面链接的下载，没有 Maven我能找到的任何存储库中的工件。谁能推荐一个更新的替代品？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-28T13:52:42.980

为了美观——尽管毫无意义——我最近也在努力将源自 JSF（连同 PrimeFaces）Facelets 的具有视觉吸引力的 HTML5 源代码提供给用户代理。

*JTidy*及其附带的实用程序并没有真正帮助我。它从根本上试图“修复”我的“损坏”标记，例如通过切换 DTD 和修改各种元素（好像在现实世界中无论如何都存在有效 HTML 这样的东西）。[XSLT](http://javax.xml.transform.Transformer)将是一个令人满意的替代方案，如果`application/xhtml+xml`要使用 Content-Type（类似地在理想世界中）。然后我偶然发现了[jsoup](http://jsoup.org/)，经过几次尝试，将它的 API 与从 [3]、[4]、[5]、[6]、[7] 中获得的示例结合起来，结果非常令人惊讶：

* * *

### JSF 输出

```
<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"><head><link type="text/css" rel="stylesheet" href="/javax.faces.resource/theme.css.xhtml?ln=primefaces-bootstrap" /><link type="text/css" rel="stylesheet" href="/javax.faces.resource/primefaces.css.xhtml?ln=primefaces&amp;v=5.0" /><script type="text/javascript" src="/javax.faces.resource/jquery/jquery.js.xhtml?ln=primefaces&amp;v=5.0"></script><!-- ... -->
    <title>Some Page</title></head><body>
<form id="j_idt5" name="j_idt5" method="post" action="/somePage.xhtml" enctype="application/x-www-form-urlencoded">
<input type="hidden" name="j_idt5" value="j_idt5" />
<table id="j_idt5:j_idt6" class="ui-panelgrid ui-widget" role="grid"><tbody><tr class="ui-widget-content" role="row"><td role="gridcell" class="ui-panelgrid-cell"><label>Title : </label></td><td role="gridcell" class="ui-panelgrid-cell"><input id="j_idt5:j_idt8" name="j_idt5:j_idt8" type="text" class="ui-inputfield ui-inputtext ui-widget ui-state-default ui-corner-all" /><script id="j_idt5:j_idt8_s" type="text/javascript">PrimeFaces.cw("InputText","widget_j_idt5_j_idt8",{id:"j_idt5:j_idt8",widgetVar:"widget_j_idt5_j_idt8"});</script></td></tr><!-- ... --><tr class="ui-widget-content" role="row"><td role="gridcell" class="ui-panelgrid-cell"><button id="j_idt5:j_idt13" name="j_idt5:j_idt13" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-left" onclick="PrimeFaces.ab({s:'j_idt5:j_idt13'});return false;" type="submit"><span class="ui-button-icon-left ui-icon ui-c ui-icon-cancel"></span><span class="ui-button-text ui-c">Submit Item</span></button><script id="j_idt5:j_idt13_s" type="text/javascript">PrimeFaces.cw("CommandButton","widget_j_idt5_j_idt13",{id:"j_idt5:j_idt13",widgetVar:"widget_j_idt5_j_idt13"});</script></td></tbody></table><input type="hidden" name="javax.faces.ViewState" id="j_id1:javax.faces.ViewState:0" value="328014904185199862:2925470649195950066" autocomplete="off" />
</form></body>
</html> 
```

* * *

### 在 jsoup 之后

```
<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <link type="text/css" rel="stylesheet" href="/javax.faces.resource/theme.css.xhtml?ln=primefaces-bootstrap" />
    <link type="text/css" rel="stylesheet" href="/javax.faces.resource/primefaces.css.xhtml?ln=primefaces&amp;v=5.0" />
    <script type="text/javascript" src="/javax.faces.resource/jquery/jquery.js.xhtml?ln=primefaces&amp;v=5.0"></script>
    <!-- ... -->
    <title>Some Page</title>
  </head>
  <body> 
    <form id="j_idt5" name="j_idt5" method="post" action="/somePage.xhtml" enctype="application/x-www-form-urlencoded"> 
      <input type="hidden" name="j_idt5" value="j_idt5" /> 
      <table id="j_idt5:j_idt6" class="ui-panelgrid ui-widget" role="grid">
        <tbody>
          <tr class="ui-widget-content" role="row">
            <td role="gridcell" class="ui-panelgrid-cell">
              <label>Title : </label>
            </td>
            <td role="gridcell" class="ui-panelgrid-cell">
              <input id="j_idt5:j_idt8" name="j_idt5:j_idt8" type="text" class="ui-inputfield ui-inputtext ui-widget ui-state-default ui-corner-all" />
              <script id="j_idt5:j_idt8_s" type="text/javascript">PrimeFaces.cw("InputText","widget_j_idt5_j_idt8",{id:"j_idt5:j_idt8",widgetVar:"widget_j_idt5_j_idt8"});
              </script>
            </td>
          </tr>
          <!-- ... -->
          <tr class="ui-widget-content" role="row">
            <td role="gridcell" class="ui-panelgrid-cell">
              <button id="j_idt5:j_idt13" name="j_idt5:j_idt13" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-left" onclick="PrimeFaces.ab({s:'j_idt5:j_idt13'});return false;" type="submit">
                <span class="ui-button-icon-left ui-icon ui-c ui-icon-cancel"></span>
                <span class="ui-button-text ui-c">Submit Item</span>
              </button>
              <script id="j_idt5:j_idt13_s" type="text/javascript">PrimeFaces.cw("CommandButton","widget_j_idt5_j_idt13",{id:"j_idt5:j_idt13",widgetVar:"widget_j_idt5_j_idt13"});
              </script>
            </td>
          </tr>
        </tbody>
      </table>
      <input type="hidden" name="javax.faces.ViewState" id="j_id1:javax.faces.ViewState:0" value="328014904185199862:2925470649195950066" autocomplete="off" /> 
    </form> 
  </body>
</html> 
```

* * *

没有任何“深思熟虑的 XML 化”更改（自闭合`<script>`s、`<![CDATA[`s 等），只是换行和缩进。当然，输出仍然是 XHTML 无效，但这对于普通浏览器来说应该不是问题。最后，我不知道在成熟的 Facelet 的情况下结果是否会一样积极。

**参考资料**（不能发布超过 2 个链接）

```
 [3]: http://stackoverflow.com/questions/3604248/jsf-prettify-beautify-html-output
  [4]: http://angelborroy.wordpress.com/2009/03/04/dump-request-and-response-using-javaxservletfilter/
  [5]: http://www.java2s.com/Tutorial/Java/0400__Servlet/Filterthatusesaresponsewrappertoconvertalloutputtouppercase.htm
  [6]: http://www.oracle.com/technetwork/java/filters-137243.html
  [7]: http://stackoverflow.com/questions/14736328/looking-for-an-example-for-inserting-content-into-the-response-using-a-servlet-f 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-20T02:52:05.887

看起来这里有一些源代码；[https://github.com/vnc-biz/zcs-lib-jtidy/](https://github.com/vnc-biz/zcs-lib-jtidy/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T03:55:12.023

在以下位置找到 JTidyServlet

[http://jtidy.sourceforge.net/nightly/](http://jtidy.sourceforge.net/nightly/)

# sql-server - SQL Server 过程超时

> ID：11321209
> 
> 赞同：2
> 
> 时间：2012-07-04T01:04:45.580
> 
> 标签：sql-server, tsql, query-optimization, ssms, connection-timeout

从生产站点上的 ASP.NET 前端环境调用此存储过程时，我遇到了中间超时。它返回以下 sql 异常：

> 异常详细信息：System.Data.SqlClient.SqlException：超时已过期。在操作完成之前超时时间已过或服务器没有响应。

有趣的是，在服务器上或使用 Management Studio 从远程 pc 执行此过程时，它会在 6 秒内执行。但是，有时从 ASP.NET 应用程序执行时会超时？这个查询可以改进吗？还是这个问题与其他问题有关？有谁能帮忙吗？我已经阅读了一些关于增加超时和在我的 web.config 中的连接字符串上启用池的线程，但还没有尝试过。

```
 ALTER PROCEDURE [dbo].[Report_Activity]
    (
        @StartDate      DATETIME
    ,   @EndDate        DATETIME
    ,   @TotalActions INT OUTPUT
    )

    AS
    BEGIN 

        SELECT      @TotalActions = COUNT(EventHistoryId)
        FROM        dbo.SessionEventHistory
        WHERE       DateCreated BETWEEN @StartDate AND @EndDate

        SELECT      EventDescription, COUNT(EventHistoryId) AS EventCount           
        FROM        dbo.SessionEventHistory
        WHERE       DateCreated BETWEEN @StartDate AND @EndDate
        GROUP BY    EventDescription
        ORDER BY    EventDescription 
```

SQL 模式：

```
CREATE TABLE [dbo].[SessionEventHistory](
    [EventHistoryID] [int] IDENTITY(1,1) NOT NULL,
    [SessionHistoryID] [int] NOT NULL,
    [CategoryID] [int] NULL,
    [UserName] [nvarchar](50) NULL,
    [IPAddress] [nvarchar](20) NOT NULL,
    [EventDescription] [nvarchar](1000) NOT NULL,
    [EventData] [varbinary](max) NULL,
    [DateCreated] [datetime] NOT NULL,
 CONSTRAINT [PK_UserEventHistory] PRIMARY KEY CLUSTERED 
(
    [EventHistoryID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

GO

ALTER TABLE [dbo].[SessionEventHistory] ADD  CONSTRAINT [DF_UserEventHistory_DateCreated]  DEFAULT (getdate()) FOR [DateCreated]
GO 
```

表有 3 个索引：

```
/****** Object:  Index [IX_SessionEventHistory_SessionHistoryId_CategoryId]    Script Date: 07/04/2012 10:47:06 ******/
CREATE NONCLUSTERED INDEX [IX_SessionEventHistory_SessionHistoryId_CategoryId] ON [dbo].[SessionEventHistory] 
(
    [SessionHistoryID] ASC,
    [CategoryID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO

/****** Object:  Index [IX_SessionEventHistory_UserName_DateCreated]    Script Date: 07/04/2012 10:47:09 ******/
CREATE NONCLUSTERED INDEX [IX_SessionEventHistory_UserName_DateCreated] ON [dbo].[SessionEventHistory] 
(
    [UserName] ASC,
    [DateCreated] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO

/****** Object:  Index [PK_UserEventHistory]    Script Date: 07/04/2012 10:47:14 ******/
ALTER TABLE [dbo].[SessionEventHistory] ADD  CONSTRAINT [PK_UserEventHistory] PRIMARY KEY CLUSTERED 
(
    [EventHistoryID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO 
```

**编辑**

我添加了以下索引，看起来还可以吗？

```
CREATE NONCLUSTERED INDEX [IX_SessionEventHistory_DateCreated] ON [dbo].[SessionEventHistory] 
(
    [DateCreated] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO 
```

![在此处输入图像描述](../Images/8f425143e5d4d6770154d4ed3d0c286a.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T01:07:58.743

看看`sys.dm_exec_sessions`您的 ASP.Net 应用程序和您的 SSMS 会话。我会冒险猜测您的设置中至少有一个`SET`是不同的。这可能会促成不同的计划（最终这归因于参数嗅探），并且应用程序端通常会因此而变得更糟。

有关更多详细信息，请参阅这些其他问题：

[从 Web 调用存储过程时速度慢，从 Management Studio 调用时速度快](https://stackoverflow.com/questions/6585417/stored-procedure-is-very-slow-only-when-called-from-web-but-fast-if-executed-di)

[过程在 ADO.NET 中超时，但在 SSMS 中没有](https://stackoverflow.com/questions/7096728/sproc-time-out-from-ado-net-but-not-in-ssms-on-a-specific-db)

[从 Web 执行时查询超时，但从 SSMS 执行时超快](https://stackoverflow.com/questions/2248112/sql-server-query-times-out-when-executed-from-web-but-super-fast-when-executed)

[ADO .NET 与 SQL Server Management Studio - ADO 性能更差](https://stackoverflow.com/questions/7273033/ado-net-vs-sql-server-management-studio-ado-performs-worse)

另请阅读[Erland Sommarskog 的这篇精彩文章](http://www.sommarskog.se/query-plan-mysteries.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T01:31:37.723

也许这是用一些非典型的 SP 调用创建的糟糕的执行计划。尝试`WITH RECOMPILE`在执行 SP 时或在定义中使用。

```
EXEC [dbo].[Report_Activity] @StartDate, @EndDate, @TotalActions WITH RECOMPILE 
```

或者

```
ALTER PROCEDURE [dbo].[Report_Activity]
    (
        @StartDate      DATETIME
    ,   @EndDate        DATETIME
    ,   @TotalActions INT OUTPUT
    )
WITH RECOMPILE
AS
... 
```

您还可以运行`sp_recompile`以标记您的 SP 以便在下次执行时重新编译。

# php - 带有单词列表和链接的 MYSQL 和 PHP 搜索脚本

> ID：11321214
> 
> 赞同：1
> 
> 时间：2012-07-04T01:05:28.640
> 
> 标签：php, mysql, string, search, text

我正在为我的网站制作搜索表单/脚本。

首先，我网站内容中使用的每个单词都存储在一个名为 MYSQL 的表中`words`，它看起来像这样：

```
id |  word | title_count | content_count | article_count | photo_count | video_count |
---+-------+-------------+---------------+---------------+-------------+-------------+
 1 | hello |           3 |             1 |             0 |           1 |           0 |
 2 |  what |           1 |             4 |             1 |           0 |           0 | 
```

`word`和`id`字段是唯一的，字段和`title_count`用于`content_count`存储单词在标题或主要内容中使用的次数。另一个`_count`字段只是说明该词在文章/照片/视频中使用了多少次。

我不确定所有这些计数字段是否对搜索功能有用，但我认为它可能会派上用场。

然后我有多个链接表到表的所有`_count`字段，`words`如下所示：

```
id |  word_id | 
---+----------+
43 |        2 |
 7 |        1 |
 7 |        2 | 
```

这些表称为 : `word_link_title`, `word_link_content`, `word_link_article`,`word_link_photo`等`word_link_video`。该`id`字段存储它链接到的文章/照片/视频的 ID，并`word_id`存储链接的单词的 ID。

现在我已经完成了所有这些设置，我有点卡住了。我真的不知道如何根据所有这些数字和研究术语来整理相关内容。

我计划做的是一个带有多个选项卡的搜索结果页面，其中一个会显示所有搜索结果，然后在其他选项卡中，它将在文章/照片/视频中分开。

我不知道我是否真的走在正确的道路上以使某些事情发挥作用。希望可以有人帮帮我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T01:22:05.180

这完全取决于您想要什么，如果您想建议结果，您可能需要研究一些著名的单词搜索算法：[Jaro-Winkler](http://fr.wikipedia.org/wiki/Jaro-Winkler)适用于短字，[Levenshtein](http://en.wikipedia.org/wiki/Levenshtein_distance)适用于长文本中的短字。您还可以`similar_text`在这些以前的算法之后使用 PHP 的函数进行更好的匹配。

[我在这里](http://pastebin.com/tmGYGx48)（Jaro-Winkler）和[这里](http://pastebin.com/4kcYtq9n)发布了一堆搜索脚本，当我建立一个搜索引擎项目时，如果你想检查一下。

至于不同的计数，为什么不呢？您可以使用出现次数来支持某些关键字。但要小心将哪些插入到数据库中！您不希望像“the”或“it”这样的词或任何其他常见词破坏所有这些。

编辑：当然，这意味着搜索将在 PHP 中进行，并且需要从数据库中选择大量关键字（如果不是全部）会带来巨大的不便。在一个超过 3000 个单词的数据库上，我最终估计的最大搜索时间为 0.04 秒。所以看起来还可以=)

# android - 差异 getHeight() 与 mBottom - mTop

> ID：11321216
> 
> 赞同：2
> 
> 时间：2012-07-04T01:05:39.493
> 
> 标签：android, android-layout, android-widget

我刚开始学习 android 开发（以及 Java），并试图修改 Sliding Drawer 小部件。我注意到通过代码我发现如下行：

```
final int childHeight = mHandleHeight;
int height = mBottom - mTop - childHeight - mTopOffset; 
```

为什么使用“mBottom - mTop”而不是 getHeight()？另外，当 mHandleHeight 已经存在时，为什么要专门为 childHeight 创建一个变量？

代码：[http](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.3_r1/android/widget/SlidingDrawer.java?av=f) ://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.3_r1/android/widget/SlidingDrawer.java?av=f 第637行

编辑：更改了引用代码中的第二行；在编写自己的视图时，这些变量（mBottom，mTop）对我们不可用，因此我们必须使用方法 'getTop()' 和 'getBottom()' 来代替。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T07:04:19.010

嗯，我不知道为什么我不只是查看 ViewGroup 的代码，我不习惯我的 SDK 如此开放/随时可用:) [http://grepcode.com/file/repository .grepcode.com/java/ext/com.google.android/android/4.0.3_r1/android/view/View.java#View.getHeight%28%29](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.3_r1/android/view/View.java#View.getHeight%28%29)显示函数定义，很简单

```
6956     public final int getHeight() {
6957         return mBottom - mTop;
6958     } 
```

由于这是问题的主要观点，我会尽可能标记为已回答，并希望有人从中受益。仍然不知道为什么会有额外的变量；也许在多线程环境中 mChildHeight 可以改变中间功能，所以你想要一个快照。

# python - 如何遍历字典的python列表

> ID：11321220
> 
> 赞同：2
> 
> 时间：2012-07-04T01:06:20.810
> 
> 标签：python, django, dictionary

这是我的字典：

```
[{'entity': 'first entity', 'place': ['first', 'second', 'abc']}, {'entity': 'second entity', 'place': ['awe', 'ert']}] 
```

我想以这种方式打印值：

```
-first entity
-first, second, abc

-second entity
-awe, ert 
```

我尝试了很多东西但我不知道如何处理第二个键的列表

你能否建议我如何在 Django 模板中做同样的事情？

提前致谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-04T01:18:58.817

对于python代码，

```
a = [{'entity': 'first entity', 'place': ['first', 'second', 'abc']}, {'entity': 'second entity', 'place': ['awe', 'ert']}]
for x in a:
    print '-', x['entity']
    print '-', ','.join(x['place']) 
```

对于 Django 模板：

```
<p>
{% for x in a %}
    {{x.entity}} <br/>
    {% for y in x.place %}
        {{y}}
    {% endfor %} 
    <br/>
{% endfor %}
</p> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-04T01:10:52.207

```
for d in my_list:
    print "-%s\n-%s" % (d['entity'], ", ".join(d['place'])) 
```

首先，请注意，您所说的“我的字典”实际上是一个字典列表，我在`my_list`这里调用。这些字典中的每一个都有一个`'entity'`易于打印的键。`'place'`键有一个值列表。我使用`.join()`将该列表中的所有字符串与逗号空格字符串组合以生成您想要的人类可读的列表。

# http - HTTP 动词 POST、PUT、DELETE：这些在哪里得到“处理”

> ID：11321224
> 
> 赞同：2
> 
> 时间：2012-07-04T01:07:21.057
> 
> 标签：http

在有人说“重复”之前，我已经查看了其他类似标题的问题，但没有人回答我的具体问题，所以请继续阅读！

我是一个完整的 Web 开发新手，但已经开始研究非常基本的 HTTP 和 HTML。我的背景是 RPC/SOAP 风格的服务和桌面应用程序。问题是我在基本层面上对 HTTP 本身非常困惑，特别是 POST、PUT 和 DELETE 动词。

我可以理解 GET 用于从 Web 服务器请求页面，但我不明白当您实际执行其他三个动词动作中的任何一个时会发生什么。如果您在 Apache 或 IIS 上托管一个网页，并且您有一个带有提交按钮的 Web 表单，大概会发送一个 POST，其中包含您在表单中填写的数据……但是 Web 服务器是做什么用的这个？网页如何使用 PUT 和 DELETE？放什么？删除什么？它不像您在服务上调用某个方法，然后对数据库执行操作。我认为像 ASP.NET 这样的框架在这​​里发挥作用，但在普通的 HTTP/HTML 中，我只是不明白它是如何组合在一起的......

我真的在这里完全错过了一些东西......感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T21:45:01.687

您的问题都在[RFC 2616](http://www.w3.org/Protocols/rfc2616/rfc2616.html)中得到解答，它概述了服务器应如何对[`POST`](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.5), [`PUT`](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.6),[`DELETE`](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.7)方法作出反应。每种方法（包括此处未提及的方法）都有自己的要求和建议。如果您查看 HTTP 请求的[原始文本流](http://en.wikipedia.org/wiki/File:Http_request_telnet_ubuntu.png)，您会注意到通过网络发送的第一条数据是 HTTP 动词。至于如何在服务器端实现这些方法，这完全取决于您正在编程的环境。例如，如果您在 PHP 中实现您的网站，您可以使用它`$_SERVER['REQUEST_METHOD']`来确定您应该如何处理请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-26T12:29:33.900

通常，当您在 IIS 上托管您的网站（我在这里假设为 ASP .Net MVC）时，您发送到服务器端的请求将主要分为两类 http 动词，即`GET`or `POST`。看看下面提到的 ASP .NET MVC 代码。在控制器级别，可以使用任何 http 动词来装饰我们的操作：

[![在此处输入图像描述](../Images/9c591700e389b636f53bdec937e94e82.png)](https://i.stack.imgur.com/CEqaS.png)

现在让我们首先了解如果我们使用的是普通的 ASP .NET MVC 框架（没有任何 java 脚本），那么为什么每个请求只分为两类`GET`，即`POST`.

假设我的网站中有一个视图（也称为网页），它负责注册访问我网站的新用户。您将看到控制器代码如下：

```
namespace MvcTestApp.Controllers
{

        // GET: /Account/Register

        [HttpGet]
        public ActionResult Register()
        {
            return View();
        }

        //
        // POST: /Account/Register

        [HttpPost]
        public ActionResult Register(RegisterModel model)
        {
            if (ModelState.IsValid)
            {
                // Attempt to register the user
                try
                {
                    WebSecurity.CreateUserAndAccount(model.UserName, model.Password);
                    WebSecurity.Login(model.UserName, model.Password);
                    return RedirectToAction("Index", "Home");
                }
                catch (MembershipCreateUserException e)
                {
                    ModelState.AddModelError("", ErrorCodeToString(e.StatusCode));
                }
            }

            // If we got this far, something failed, redisplay form
            return View(model);
        }
    }
} 
```

您在浏览器的地址栏中键入`http://localhost:9896/Account/Register/`url，以便在浏览器中加载注册视图/网页。这就像对网页的第一次请求，所以当您`HttpGet`第一次获取网页时，您的浏览器会自动将其默认为动词。所以在这种情况下，下面用`[HttpGet]`动词注释的方法被调用：

```
 [HttpGet]
    public ActionResult Register()
    {
        return View();
    } 
```

现在，在页面上，我有一个按钮，一旦我提供了与注册相关的所有详细信息，我单击该按钮以启动注册过程。如果您查看网页的源代码，您会看到下面的按钮 html 代码：

```
<input type="submit" value="Register" /> 
```

每当您单击 HTML 类型的控件时，`submit`它的简单工作就是将当前页面的更新内容发布/提交到服务器。任何 html 控件`input`，包括发出服务器端请求的 html 控件，都只能`HttpPost`通过浏览器发出动词请求。由于它是`httpPost`对服务器的动词请求，请求完全相同的 URL，因此下面提到的用`HttpPost`get 修饰的方法被调用。ASP.Net 运行时从客户端请求中获取此信息，它实际上是一个 http POST 请求，因此决定在具有`[HttpPost]`注释的控制器上调用以下方法：

```
[HttpPost]
[AllowAnonymous]
[ValidateAntiForgeryToken]
public ActionResult Register(RegisterModel model)
{
    if (ModelState.IsValid)
    {
    .....
    .....
} 
```

因此，只要您没有在视图/网页上使用任何 javascript，您最终就会发出 http get（首次）请求或 http post（使用 html 提交控件）请求。

在 CRUD 操作中，创建和更新/修改操作由使用`[HttpPost]`.

当满足以下两个条件时，HTTP put 动词用于创建/替换资源：

1.  端点必须是幂等的：一遍又一遍地重做请求是安全的。
2.  URI 必须是要更新的资源的地址。

[您可以在此处](https://stackoverflow.com/questions/630453/put-vs-post-in-rest)阅读有关 put vs post 的更多信息。

因此，如果您在服务器端的业务场景能够管理与 HTTP put 动词相关的约束，那么 ASP.NET MVC 对此有规定。`[HttpPut]`您可以在控制器内创建一个动作，并使用浏览器中的 http put 动词对其进行装饰和调用。

好吧，即使在某些情况下您碰巧满足 put 动词规定的标准，那么您也无法使用 HTTP 提交按钮调用它。您将不得不求助于 java 脚本 XMLHttpRequest（即 AJAX 调用）来进行 put 动词调用，如下所示：

```
$.ajax({
    url: '/Account/Register',
    type: 'PUT',
    success: function(result) {
        // Do something with the result
    }
}); 
```

此外，围绕http delete 动词的使用，我看到人们明确地在MVC 控制器上定义了一个动作，例如`void DeleteUser(int userId)`使用http POST 动词调用。

所以总而言之，我们可以看到对于 http PUT、POST 和 DELETE 动词，我们只有在服务器端使用 http POST 动词调用的动作/方法。在通常的业务应用程序中，我从未想过用`[HttpPut]`or来装饰我的 MVC 操作`[HttpDelete]`。

希望这可以帮助你得到一些澄清。

# android - 一段时间后发布的通知显示日期“1970 年 1 月 1 日，星期四”

> ID：11321229
> 
> 赞同：0
> 
> 时间：2012-07-04T01:07:59.273
> 
> 标签：android, date, notifications, android-4.0-ice-cream-sandwich

我是一个在通知部门很强大的应用程序的开发人员。我最近升级到运行 Android 4.0.3 的 HTC One X，并注意到我以前运行 Android 2.1 的手机从未注意到的问题。

我的应用程序发布的通知没有设置日期，并且我以前的电话通知中从未显示日期。在我的新手机上，发布通知时没有出现日期，但过了一会儿，出现了“Thu, 1 Jan 1970”日期，我不明白为什么。

当我说“一段时间后”时，我并不是说您一直盯着屏幕几秒钟/几分钟并看到日期出现。我的意思是在使用手机一段时间后，放下它，再次使用它，无论如何，最终，我的应用程序发布的所有通知都会有那个日期。

我已经看到这种情况发生了几次，但我找不到模式并理解何时发生这种情况，看看我是否能找到解决办法。有谁知道为什么这可能会发生在 ICS 上？

我不知道它有多相关，但我的`postNotification`方法有完整的代码：

```
NotificationCompat.Builder builder = new NotificationCompat.Builder(mContext);

Intent intent = NoteEditorSingleActivity.createIntent(mContext);
intent.putExtra(AgendaNotesAdapter.KEY_ROW_ID, notifyId);
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_SINGLE_TOP);

builder.setContentIntent(PendingIntent.getActivity(mContext, (int)notifyId, intent,
        PendingIntent.FLAG_CANCEL_CURRENT));

builder.setContentTitle(noteTitle);
builder.setContentText(noteDescription);
builder.setSmallIcon(iconId);
builder.setTicker(noteTitle.length() > 0 ? noteTitle : null);
builder.setWhen(0);

Notification notification = builder.getNotification();

long noteSortOrder = Build.VERSION.SDK_INT >= Build.VERSION_CODES.GINGERBREAD ? 1 : -1;

notification.flags = Notification.FLAG_NO_CLEAR;
notification.when = noteSortOrder * notifyId;

mNotificationManager.notify((int)notifyId, notification); 
```

我知道我正在使用构建器将 0 设置为 0，并通过直接在对象中`when`更改值来设置不同的值。我不记得我最初为什么这样做，但它是有原因的。`when``notification`

我不明白的是，在调用该`notify()`方法并查看状态栏中的通知之后的那一刻，没有日期。为什么使用手机一段时间后会出现。

这就是我想知道和解决的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T05:58:24.597

您的通知`when`应该设置为您希望它显示的时间（自 UNIX 纪元以来的毫秒数：1970 年 1 月 1 日 00:00:00 UTC）。将其设置为 0 是一种不显示任何时间戳的流行但未记录（因此不能保证有效）的方式。

您没有显示`notifyId`设置的位置，但您可能设置`when`为自此处纪元以来的低毫秒数：

```
notification.when = noteSortOrder * notifyId; 
```

您首先将其设置为`0`然后再更改它的原因是您正在使用另一个未记录的黑客，试图影响系统如何将您的通知与其他人联系起来。通过构建设置为 0 的通知（使用`builder.getNotification()`）`when`，您将获得没有时间戳的视图布局。然后，您在调用之前更改时间戳以影响排序顺序`notify()`。

ICS 恰好最终以您设置的非常低的时间戳显示您的通知这一事实可能会或可能不会修复。可能只是 ICS 最终会在一段时间后重新布置您的通知，这当然会使用您提供的最后一个时间戳。

就个人而言，我认为最好的选择是删除黑客。（好吧，我认为您可能可以*将*时间戳设置为`0`完全隐藏时间戳，但排序顺序黑客似乎是在自找麻烦。）

# javascript - 停止和重启 CSS3 动画

> ID：11321232
> 
> 赞同：2
> 
> 时间：2012-07-04T01:08:18.777
> 
> 标签：javascript, jquery, css

我有一个 CSS3 动画，当我单击“播放”时，它会随机乱跑。问题是当我点击我需要完成的“停止”时，我无法停止推挤。

我曾尝试同时使用“-webkit-animation-play-state”和 jquery .stop() 函数，但无济于事。我想我很接近，但似乎不太能得到这个。

我创建了一个[jsfiddle](http://jsfiddle.net/jsledervenson/2RL7w/11/)，代码如下。

提前致谢！

```
<html>
<head>
<style>
#sec {
    background: url(http://placekitten.com/200/200);
    background-repeat:no-repeat;
    z-index: 3;
    position: absolute;
    width: 200px;
    height: 200px;
    top: 45px;
    left: 105px;
}​
</style>
<script>
$(document).ready(function(){
    $("#play-bt").click(function(){
      setInterval( function() {
      var seconds = Math.random() * -20;
      var sdegree = seconds * 2    ;
      var num = -30;
      var together = num + sdegree;
      var srotate = "rotate(" + together + "deg)";
      $("#sec").css({"-moz-transform" : srotate, "-webkit-transform" : srotate});
      }, 100 );
      });

    $("#stop-bt").click(function(){
            $("#sec").stop(stopAll);
        })

 })
</script>
</head>
<body>
<div id="sec"></div>
<br/>
<div id="play-bt">Play</div>
<br/>
<div id="stop-bt">Stop</div>
</body
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T01:19:13.683

`setInterval()`用来阻止它的对应物是`clearInterval()`. 每次调用`setInterval()`都会返回一个间隔 ID，您可以将其传递给`clearInterval()`它以停止它。

因此，您需要存储 的结果`setInterval()`，并在单击停止 btn 时将其清除。

```
$(document).ready(function(){
    var animation = null;
    $("#play-bt").click(function(){
      if (animation !== null) {      // Add this if statement to prevent
         return;                     // doubled animations
      }
      animation = setInterval( function() {
        var seconds = Math.random() * -20;
        var sdegree = seconds * 2    ;
        var num = -30;
        var together = num + sdegree;
        var srotate = "rotate(" + together + "deg)";
        $("#sec").css({"-moz-transform" : srotate, "-webkit-transform" : srotate});
      }, 100 );
      });

    $("#stop-bt").click(function(){
            //$("#sec").stop(stopAll);
        if (animation !== null) {
            clearInterval(animation);
            animation = null;
        }           
    });

 }); 
```

# operational-transform - ShareJS 中的嵌套 JSON 删除

> ID：11321233
> 
> 赞同：1
> 
> 时间：2012-07-04T01:08:21.353
> 
> 标签：operational-transform

我目前正在尝试使用[ShareJS](http://sharejs.org)实现[操作转换](http://en.wikipedia.org/wiki/Operational_transformation)（特别是 JSON API）。如果我删除了一个父 JSON 对象会发生什么，wiki 并不太清楚，而另一个操作是插入到子 JSON 中。是否会重新创建父 JSON，或者它将是一个空操作？

例如

```
{"aa":
  {"bb":
    {"cc":"dd"}
  }
}
//Operation A and B comes in carrying the same version number
//Op A deletes "aa", Op B modifies "cc"
//What happens? (assuming A comes in slightly earlier and is processed first) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T15:03:27.880

自己查了一下：

```
op1 = [{p: ["aa"], od: {"bb": {"cc":"dd"}} }] // Deletes "aa"
op2 = [{p: ["aa", "bb", "cc"], od: "dd", oi: "ee"}] // Modifies "cc"
console.log(json.transform(op2, op1, 'left'))
>> [] 
```

这意味着，当 op2 在 op1 上转换时，它变为无操作 -> 不会重新创建任何对象。

# android - 打开 ContextMenu 时抓取列表项 TextView 值

> ID：11321238
> 
> 赞同：1
> 
> 时间：2012-07-04T01:08:34.250
> 
> 标签：android, android-listview, contextmenu, textview

通过`ListView`单击/短按，我可以做到这一点：

```
protected void onListItemClick(ListView listView, View v, int position,
        long id) {
    tvInt = reviews.get(position);
} 
```

我该怎么做`ContextMenu`？我`ListView`只包含一个`TextView`.

编辑：我想获取 中的值`TextView`，`ListView`而不是`ContextMenu`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T04:28:03.380

打包额外信息，`MenuItem`您可以从中提取`position`点击的行，`ListView`然后只需使用您在`onListItemClick`回调中使用的代码：

```
@Override
public boolean onContextItemSelected(MenuItem item) {
     AdapterView.AdapterContextMenuInfo info = (AdapterView.AdapterContextMenuInfo) item.getMenuInfo();
     int clickedPosition = info.position;
     tvInt = reviews.get(position);
     // ... 
```

如果您想在`ContextMenuInfo`构建.`onCreateContextMenu``ContextMenu`

# python - 分组的 pandas DataFrames：如何将 scipy.stats.sem 应用于它们？

> ID：11321243
> 
> 赞同：3
> 
> 时间：2012-07-04T01:09:56.013
> 
> 标签：python, numpy, statistics, scipy, pandas

我知道我可以通过执行以下操作来应用 numpy 方法：

`dataList`是`DataFrame`s 的列表（相同的列/行）。

```
testDF = (concat(dataList, axis=1, keys=range(len(dataList)))
        .swaplevel(0, 1, axis=1)
        .sortlevel(axis=1)
        .groupby(level=0, axis=1))

testDF.aggregate(numpy.mean)
testDF.aggregate(numpy.var) 
```

等等。但是，如果我想计算均值 (sem) 的标准误差怎么办？

我试过：

```
testDF.aggregate(scipy.stats.sem) 
```

但它给出了一个令人困惑的错误。有人知道怎么做吗？scipy.stats 方法有什么不同？

这是一些为我重现错误的代码：

```
from scipy import stats as st
import pandas
import numpy as np
df_list = []
for ii in range(30):
    df_list.append(pandas.DataFrame(np.random.rand(600, 10), 
    columns = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J']))

testDF = (pandas.concat(df_list, axis=1, keys=range(len(df_list)))
         .swaplevel(0, 1, axis=1)
         .sortlevel(axis=1)
         .groupby(level=0, axis=1))

testDF.aggregate(st.sem) 
```

这是错误消息：

```
---------------------------------------------------------------------------
AssertionError                            Traceback (most recent call last)
<ipython-input-1-184cee8fb2ce> in <module>()
     12          .groupby(level=0, axis=1))
     13 
---> 14 testDF.aggregate(st.sem)

/Library/Frameworks/EPD64.framework/Versions/7.3/lib/python2.7/site-packages/pandas/core/groupby.py in aggregate(self, arg, *args, **kwargs)
   1177                 return self._python_agg_general(arg, *args, **kwargs)
   1178             else:
-> 1179                 result = self._aggregate_generic(arg, *args, **kwargs)
   1180 
   1181         if not self.as_index:

/Library/Frameworks/EPD64.framework/Versions/7.3/lib/python2.7/site-packages/pandas/core/groupby.py in _aggregate_generic(self, func, *args, **kwargs)
   1248             else:
   1249                 result = DataFrame(result, index=obj.index,
-> 1250                                    columns=result_index)
   1251         else:
   1252             result = DataFrame(result)

/Library/Frameworks/EPD64.framework/Versions/7.3/lib/python2.7/site-packages/pandas/core/frame.py in __init__(self, data, index, columns, dtype, copy)
    300             mgr = self._init_mgr(data, index, columns, dtype=dtype, copy=copy)
    301         elif isinstance(data, dict):
--> 302             mgr = self._init_dict(data, index, columns, dtype=dtype)
    303         elif isinstance(data, ma.MaskedArray):
    304             mask = ma.getmaskarray(data)

/Library/Frameworks/EPD64.framework/Versions/7.3/lib/python2.7/site-packages/pandas/core/frame.py in _init_dict(self, data, index, columns, dtype)
    389 
    390         # consolidate for now
--> 391         mgr = BlockManager(blocks, axes)
    392         return mgr.consolidate()
    393 

/Library/Frameworks/EPD64.framework/Versions/7.3/lib/python2.7/site-packages/pandas/core/internals.py in __init__(self, blocks, axes, do_integrity_check)
    329 
    330         if do_integrity_check:
--> 331             self._verify_integrity()
    332 
    333     def __nonzero__(self):

/Library/Frameworks/EPD64.framework/Versions/7.3/lib/python2.7/site-packages/pandas/core/internals.py in _verify_integrity(self)
    404         mgr_shape = self.shape
    405         for block in self.blocks:
--> 406             assert(block.values.shape[1:] == mgr_shape[1:])
    407         tot_items = sum(len(x.items) for x in self.blocks)
    408         assert(len(self.items) == tot_items)

AssertionError: 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T03:07:48.643

**更新答案：**

看来我可以使用各种库的工作版本来复制它。我稍后会检查我的家庭版本，看看这些功能的文档是否有差异。

同时，使用您的确切编辑版本，以下内容对我有用：

```
In [35]: testDF.aggregate(lambda x: st.sem(x, axis=None))
Out[35]:
<class 'pandas.core.frame.DataFrame'>
Int64Index: 600 entries, 0 to 599
Data columns:
A    600  non-null values
B    600  non-null values
C    600  non-null values
D    600  non-null values
E    600  non-null values
F    600  non-null values
G    600  non-null values
H    600  non-null values
I    600  non-null values
J    600  non-null values
dtypes: float64(10) 
```

这让我怀疑它与`sem()`轴约定有关。它默认为 0，最终映射到的 Pandas 对象可能有一个奇怪的第 0 轴或其他东西。当我使用 option`axis=None`时，它会分解它应用到的对象，这使它起作用。

作为一个健全的检查，我这样做了，它也有效：

```
In [37]: testDF.aggregate(lambda x: st.sem(x, axis=1))
Out[37]:
<class 'pandas.core.frame.DataFrame'>
Int64Index: 600 entries, 0 to 599
Data columns:
A    600  non-null values
B    600  non-null values
C    600  non-null values
D    600  non-null values
E    600  non-null values
F    600  non-null values
G    600  non-null values
H    600  non-null values
I    600  non-null values
J    600  non-null values
dtypes: float64(10) 
```

**但是您应该检查以确保这实际上是您想要的 SEM 值，**可能是在一些较小的示例数据上。

**较早的答案：** 这可能与 scipy.stats 的模块问题有关吗？当我使用这个模块时，我必须将其称为`from scipy import stats as st`或类似的名称。`import scipy.stats`不起作用，并且调用`import scipy; scipy.stats.sem`会给出一个错误，指出不存在名为“stats”的模块。

Pandas 似乎根本没有找到该功能。我认为应该改进错误消息，因为这并不明显。

```
>>> from scipy import stats as st
>>> import pandas
>>> import numpy as np
>>> df_list = []
>>> for ii in range(10):
...     df_list.append(pandas.DataFrame(np.random.rand(10,3), 
...     columns = ['A', 'B', 'C']))
... 
>>> df_list
# Suppressed the output cause it was big.

>>> testDF = (pandas.concat(df_list, axis=1, keys=range(len(df_list)))
...     .swaplevel(0, 1, axis=1)
...     .sortlevel(axis=1)
...     .groupby(level=0, axis=1))
>>> testDF
<pandas.core.groupby.DataFrameGroupBy object at 0x38524d0>
>>> testDF.aggregate(np.mean)
key_0         A         B         C
0      0.660324  0.408377  0.374681
1      0.459768  0.345093  0.432542
2      0.498985  0.443794  0.524327
3      0.605572  0.563768  0.558702
4      0.561849  0.488395  0.592399
5      0.466505  0.433560  0.408804
6      0.561591  0.630218  0.543970
7      0.423443  0.413819  0.486188
8      0.514279  0.479214  0.534309
9      0.479820  0.506666  0.449543
>>> testDF.aggregate(np.var)
key_0         A         B         C
0      0.093908  0.095746  0.055405
1      0.075834  0.077010  0.053406
2      0.094680  0.092272  0.095552
3      0.105740  0.126101  0.099316
4      0.087073  0.087461  0.111522
5      0.105696  0.110915  0.096959
6      0.082860  0.026521  0.075242
7      0.100512  0.051899  0.060778
8      0.105198  0.100027  0.097651
9      0.082184  0.060460  0.121344
>>> testDF.aggregate(st.sem)
          A         B         C
0  0.089278  0.087590  0.095891
1  0.088552  0.081365  0.098071
2  0.087968  0.116361  0.076837
3  0.110369  0.087563  0.096460
4  0.101328  0.111676  0.046567
5  0.085044  0.099631  0.091284
6  0.113337  0.076880  0.097620
7  0.087243  0.087664  0.118925
8  0.080569  0.068447  0.106481
9  0.110658  0.071082  0.084928 
```

似乎对我有用。

# google-cloud-datastore - 如何在 NDB 中进行批处理操作是更新 ndb 的原子或锁定记录

> ID：11321245
> 
> 赞同：2
> 
> 时间：2012-07-04T01:09:56.977
> 
> 标签：google-cloud-datastore, app-engine-ndb

我是谷歌应用引擎和 NDB 的初学者。我的问题：如果我在模型中有 1 个实体，我想在 2 个并行操作时防止冲突，代码示例：

```
class MyModel(ndb.Model)
  count = ndb.IntegerProperty()
  def update_value(delta)
    count=count +delta 
```

操作1：

```
my_obj1= MyModel.get_by_id(1)
my_obj1.update_value(10)
my_obj1.put() 
```

操作2：

```
my_obj2= MyModel.get_by_id(1)
my_obj2.update_value(20)
my_obj2.put() 
```

如果 2 个会话并行调用 2 个操作，并且在操作之前，实体（id=1）的计数 = 0。我想防止计数值冲突，例如：

```
 operation1: read my_obj1 from entity(id=1) 
 operation2: read my_obj2 from entity(id=1)
 operation1: update_value(10) #count =10
 operation2: update_value(20) # count=20
 operation1: put() # save to ndb with count =10 
 operation2: put() # save to ndb with count=20 
```

ndb 中的 count=20。ndb 中 count=30 的期望值。

请告诉我解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T15:41:04.473

您可以为此使用事务。但它不会扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T01:23:48.240

尝试使用[锁定](http://docs.python.org/library/threading.html#lock-objects)对象，希望此[博客](http://blog.notdot.net/2011/10/Migrating-to-Python-2-7-part-1-Threadsafe)对您有所帮助。

# ms-access - COUNT() 2 列在 Access 中有 2 个单独的连接？

> ID：11321249
> 
> 赞同：2
> 
> 时间：2012-07-04T01:10:50.410
> 
> 标签：ms-access, ms-access-2007

我正在尝试编写一个 Access 查询，该查询将单个表连接两次，然后对每个表的一个字段进行计数。

```
SELECT Wines.wID, 
       Wines.num, 
       Wines.Brand, 
       Wines.wYear, 
       Wines.Variety, 
       Wines.Score, 
       g.fName, 
       g.lName , 
       Count(DISTINCT Votes.vote1) AS Vote1,  
       Count(DISTINCT Votes_1.vote2) AS Vote2
FROM   ((Wines 
           LEFT JOIN Guests AS g 
              ON Wines.wID = g.wineID) 
           LEFT JOIN Votes 
              ON Wines.num = Votes.vote1) 
           LEFT JOIN Votes AS Votes_1 
              ON Wines.num = Votes_1.vote2
WHERE (((Wines.pID)=2))
GROUP BY Wines.wID, Wines.num, Wines.Brand, 
         Wines.wYear, Wines.Variety, Wines.Score, g.fName, g.lName
ORDER BY Wines.Score DESC , Count(DISTINCT Votes.vote1) DESC; 
```

但是，它不起作用。`COUNT(DISTINCT)`似乎在 Access 中不起作用。忽略它可以让查询运行，但我没有得到正确的结果。只使用一次就可以了。我似乎无法在 COUNT 语句中编写子查询，而且我不确定还能做什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T09:01:57.183

如果您在 MS Access、子查询中工作，则可以使用 DCount，或者可以设置计数查询并加入该查询。我不确定重复来自哪里，所以下面的注释说明了一些想法。它没有经过适当的测试。

```
SELECT Wines.wID, 
   Wines.num, 
   Wines.Brand, 
   Wines.wYear, 
   Wines.Variety, 
   Wines.Score, 
   g.fName, 
   g.lName , 
   DCount("vote1","votes","vote1"=Wines.num) AS Vote1,  
   (SELECT Count(Vote2) FROM 
      (SELECT DISTINCT vote2 
       FROM votes v
       INNER JOIN Wines w ON v.vote2=w.Num
       WHERE w.pID=2 AND w.num=Wines.num)) AS Vote2
FROM   Wines 
           LEFT JOIN Guests AS g 
              ON Wines.wID = g.wineID

WHERE (((Wines.pID)=2))
GROUP BY Wines.wID, Wines.num, Wines.Brand, 
         Wines.wYear, Wines.Variety, Wines.Score, g.fName, g.lName
ORDER BY Wines.Score DESC , vote1 DESC; 
```

# android - 将相机预览安装到比显示器大的 SurfaceView

> ID：11321251
> 
> 赞同：25
> 
> 时间：2012-07-04T01:11:54.220
> 
> 标签：android, android-layout, android-camera, surfaceview

我有一个 Android 应用程序需要全屏显示相机预览，无论预览大小如何，都`getSupportedPreviewSizes()`不会失真。我希望这会在高度或宽度上裁剪预览，但这与我无关。我寻求这样做的原因是因为某些 android 相机（例如三星 Galaxy SII 前置摄像头）不会返回与显示器具有相同纵横比的任何预览，因此需要拉伸和剪裁。

**是否可以将相机预览完全放大到大于显示尺寸的视图？**通过简单地将表面视图的布局参数设置为 match_parent，可以将 SurfaceView 增大到大于返回的预览像素尺寸，但这会导致某些方向的失真，并且只有在预览填满显示之前才有可能。这似乎表明在显示器之外进行预览是不可能的，并且硬件（或操作系统）限制了这种行为。

关于该主题还有[另一个问题](https://stackoverflow.com/questions/6050923/how-can-i-make-a-surfaceview-larger-than-the-screen "另一个问题")，但该问题声称无法创建大于屏幕尺寸的 SurfaceView，这是错误的，正如我在日志记录中发现的那样。然而，情况似乎是相机预览无法增长到巨大的 SurfaceView 的全尺寸。

**我的尝试：**

我有一个相对布局，其中有一个 FrameLayout，并在其中创建了一个 SurfaceView。整个相对布局的宽度设置为 635dp，大约是设备屏幕尺寸的两倍。FrameLayout 与此大小匹配，SurfaceView 也是如此（稍后以编程方式添加）

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/camera_activity_layout"
    android:layout_width="635dp"
    android:layout_height="match_parent" >

    <FrameLayout
        android:id="@+id/camera_preview"
        android:layout_width="match_parent"
        android:layout_height="match_parent">
    </FrameLayout>

</RelativeLayout> 
```

以下是获取和设置预览大小的代码。在这里，我想让相机预览扩大以填充整个 FrameLayout（屏幕宽度的两倍）。视图显示并完全正常破坏，因此我删除了与此特定问题无关的代码，因为它分散了基本问题的注意力，并且我尝试轻松简单地将视图扩大到大于显示的大小。

```
public class CameraPreview extends SurfaceView implements SurfaceHolder.Callback {

    ...

    public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
        Camera.Parameters parameters = mCamera.getParameters();
        final DisplayMetrics dm = this.getResources().getDisplayMetrics();
            //getBestPreviewSize returns the best preview size, don't worry
            //but some devices do not return one for all camera matching the aspect ratio
        cameraSize = getBestPreviewSize(parameters, dm.heightPixels, dm.widthPixels);

        if (cameraSize!=null) {
            parameters.setPreviewSize(cameraSize.width, cameraSize.height);
            mCamera.setParameters(parameters);
        }

        FrameLayout.LayoutParams frameParams = (FrameLayout.LayoutParams) this.getLayoutParams();

        frameParams.width = 800; //For argument's sake making this ~double the width of the display. Same result occurs if I use MATCH_PARENT
        frameParams.height = LayoutParams.MATCH_PARENT;
        this.setLayoutParams(frameParams);

        try {
            mCamera.setPreviewDisplay(mHolder);
            mCamera.startPreview();

            Log.d("surfChange","W/H of CamPreview (child) is "+this.getWidth()+"/"+this.getHeight()+" while parent is ");
            Log.d("surfChange","W/H of holder (child) is "+mHolder.getSurfaceFrame().width()+"/"+mHolder.getSurfaceFrame().height()+" while parent is ");
        } catch (Exception e){
        }
    }
}; 
```

我担心在这项工作中取得成功的唯一方法是以某种方式渲染到 openGL 表面，但这[显然](https://stackoverflow.com/questions/8350230/android-how-to-display-camera-preview-with-callback)在全彩色上可能太慢了。如果可以简单地拉伸和剪切相机预览，那也是一种痛苦。

在此先感谢您对解决方案的任何尝试。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-18T20:16:21.433

好的，我知道这是一个很晚的答案，但这是可能的。下面是来自 Android SDK 示例的代码。要查看实现此代码的其余代码，请下载 android sdk 示例并转到`Samples/android-10(one I used, could try whichever you want to target)/ApiDemos/src/com/example/android/apis/graphics/CameraPreview.java`

```
class PreviewSurface extends ViewGroup implements SurfaceHolder.Callback {
...
@Override
protected void onLayout(boolean changed, int l, int t, int r, int b) {
    if (changed && getChildCount() > 0) {
        final View child = getChildAt(0);

        final int width = r - l;
        final int height = b - t;

        int previewWidth = width;
        int previewHeight = height;
        if (mPreviewSize != null) {
            previewWidth = mPreviewSize.width;
            previewHeight = mPreviewSize.height;
        }

        // Center the child SurfaceView within the parent.
        if (width * previewHeight > height * previewWidth) {
            final int scaledChildWidth = previewWidth * height / previewHeight;
            child.layout((width - scaledChildWidth) / 2, 0,
                    (width + scaledChildWidth) / 2, height);
        } else {
            final int scaledChildHeight = previewHeight * width / previewWidth;
            child.layout(0, (height - scaledChildHeight) / 2,
                    width, (height + scaledChildHeight) / 2);
        }
    }
}
} 
```

此代码旨在使预览适合最小尺寸（不会弄乱纵横比）并居中以在另一个尺寸上有黑条。但是，如果您将其翻转过来，`>`您`<`将实现您想要的。前任：

```
if (width * previewHeight < height * previewWidth) {... 
```

# objective-c - 如何使用情节提要在一个按钮上运行 sentAction 和 Push？

> ID：11321252
> 
> 赞同：0
> 
> 时间：2012-07-04T01:12:19.557
> 
> 标签：objective-c, ios, xcode, ios5

我有一个添加到 UIToolBar 的按钮，该按钮将我带到情节提要中的下一个视图控制器。我通常通过 ctrl 单击按钮并将其拖动到我要使用的视图控制器来在 UIViewControllers 之间切换。现在，我想：

1.  运行一个方法
2.  推送到下一个视图控制器

我想我可以在代码中做到这一点，但下面的代码只是崩溃：

`AddCharacterD20ViewController *AddD20ViewController = [[AddCharacterD20ViewController alloc] initWithNibName:@"AddCharacterD20ViewController" bundle:nil]; [self.navigationController pushViewController:AddD20ViewController animated:YES];`

这是例外：[AddCharacterD20ViewController_Intro Next]：无法识别的选择器发送到实例 0xa56c4a0'

有人告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T01:19:14.313

1）通过从您的视图控制器（不是从按钮）拖动，在情节提要中创建一个segue。

2）给它一个标识符

3）添加以下代码：

```
- (IBAction)onClickMethod:(id)sender 
{
    // replace "SegueIdentifier" with the segue identifier string from the storyboard
    [self performSegueWithIdentifier:@"SegueIdentifier" sender:self];
} 
```

（确保动作连接到情节提要上的按钮。）

4）利润！:)

# android - 如果我使用 Android 4 平台编写应用程序，该应用程序可以在 Android 2 设备上运行吗？

> ID：11321257
> 
> 赞同：3
> 
> 时间：2012-07-04T01:13:00.020
> 
> 标签：android, eclipse, sdk

我想使用 Android SDK 和 Eclipse 编写一个应用程序。我使用 SDK 管理器安装了 Android 4 平台，但我想知道，这个应用程序是否适用于 Android 2 设备？还是只有 Android 4 设备？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T04:05:15.810

[Android Lint](http://tools.android.com/tips/lint/)是 ADT r16 中引入的一个新工具，它会自动扫描并检查您的项目是否有新的 API，并在您的 Eclipse 编辑器中显示一个漂亮的错误标记。

检查新 API 的规则，请参见[此处](http://tools.android.com/tips/lint-checks)：

```
NewApi
------
Summary: Finds API accesses to APIs that are not supported in all targeted API
versions

Priority: 6 / 10
Severity: Error
Category: Correctness

This check scans through all the Android API calls in the application and
warns about any calls that are not available on *all* versions targeted by
this application (according to its minimum SDK attribute in the manifest).

If your code is *deliberately* accessing newer APIs, and you have ensured
(e.g. with conditional execution) that this code will only ever be called on a
supported platform, then you can annotate your class or method with the
@TargetApi annotation specifying the local minimum SDK to apply, such
as@TargetApi(11), such that this check considers 11 rather than your manifest
file's minimum SDK as the required API level. 
```

在 Eclipse 中：

![在此处输入图像描述](../Images/6713e55596cc6668619fc329f0b5260e.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T01:20:57.507

这取决于您进行的系统调用。始终在运行不同版本的设备上进行测试，因为某些调用仅适用于某些 API 级别。

在[sdk 网站上](http://developer.android.com/reference/android/hardware/Camera.html#getNumberOfCameras%28%29)，您可以看到此信息。

（参见 getNumberOfCameras fn 灰色条右侧的“Since: API Level 9”）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-04T01:25:41.177

在您的 App Manifest XML 文件中，您必须指定最低和所需目标 SDK 版本。我正在开发一个针对 Android 4.0.3 (SDK v15) 但必须在 2.3.3 (SDK v10) 上运行的应用程序。

```
<uses-sdk
    android:minSdkVersion="10"
    android:targetSdkVersion="15" /> 
```

当然，您只能使用较低的 SDK 可用功能。您还应该查看为旧 SDK 提供一些新功能的 Google 支持库。 [http://developer.android.com/tools/extras/support-library.html](http://developer.android.com/tools/extras/support-library.html)

// 马塞洛

# javascript - 我是怎么破解的：方法->：删除

> ID：11321258
> 
> 赞同：0
> 
> 时间：2012-07-04T01:13:00.417
> 
> 标签：javascript, ruby-on-rails, ruby, ruby-on-rails-3, rest

我重构了我的整个应用程序并给了它一个全新的设计。似乎被破坏的一件事是`link_to`我拥有的所有原始方法 :method => :delete 现在作为 GET 请求发送。

我唯一能记住的可能导致它的原因是从 gemfile 中删除 jquery-rails （我只是从 google ajax 中获取它）。

有没有人有任何其他想法我可以删除？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T01:17:15.343

当然，你是对的，`:method => :delete`需要 jquery 才能工作。

您必须将 jquery_ujs 文件添加到您的应用程序布局中，并且 jquery-rails 附带。您也可以单独安装它。

[https://github.com/rails/jquery-ujs](https://github.com/rails/jquery-ujs)

# bash - 如何获取脚本所在的补丁的一部分？

> ID：11321262
> 
> 赞同：1
> 
> 时间：2012-07-04T01:13:35.013
> 
> 标签：bash, svn

我想自动将提交的文件从 svn 存储库复制到同名的某个文件夹。

例如，我有 svn 存储库`/svn/project1`，提交后它应该将所有文件放到`/www/project1`.

我有一个简单的提交后挂钩脚本，但不明白如何获取必要目录的一部分（`project1`）：

```
#!/bin/sh
PROJECTNAME=                    # how get it?
rm -rf /www/$PROJECTNAME
mkdir /www/$PROJECTNAME
/usr/bin/svn export --force file:///svn/$PROJECTNAME/trunk /www/$PROJECTNAME 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T01:35:21.767

您可以使用 Bash 参数扩展：

```
PROJECTNAME=${PWD##*/} 
```

获取父目录需要两个步骤：

```
PROJECTNAME=${PWD%/*}
PROJECTNAME=${PROJECTNAME##*/} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T01:26:28.290

尝试这个：

```
echo $PWD | awk -vFS=/ '{printf "%s",$NF}' 
```

对于我想出的所有测试用例，它都会打印*一些东西*`/`——目录除外。所以这对`/`. （但这并不是你想要做的事情。）

如果这似乎对您有用，请在您的脚本中尝试：

```
PROJECTNAME=$(echo $PWD | awk -vFS=/ '{printf "%s",$NF}') 
```

# clojure - 将图像形式 clj-http 请求保存到文件

> ID：11321264
> 
> 赞同：20
> 
> 时间：2012-07-04T01:13:40.333
> 
> 标签：clojure

我正在尝试保存使用[clj-http下载的文件](https://github.com/dakrone/clj-http/)

我有以下代码：

```
(def test-file
  (cl/get "http://placehold.it/350x150"))

(defn write-file []
   (with-open [w (clojure.java.io/writer  "test-file.gif" :append true)]
(.write w (:body test-file)))) 
```

当我尝试将其作为字节数组时，出现异常：

```
 user=>     (def test-file
                    (cl/get "http://placehold.it/350x150" {:as :byte-array}))
       #'user/test-file
       user=> (write-file)
       IllegalArgumentException No matching method found: write for class java.io.BufferedWriter  clojure.lang.Reflector.invokeMatchingMethod (Reflector.java:79) 
```

帮助！

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-07-04T02:39:27.260

使用二进制输出。

```
(def test-file
  (client/get "http://placehold.it/350x150" {:as :byte-array}))

(defn write-file []
   (with-open [w (java.io.BufferedOutputStream. (java.io.FileOutputStream. "test-file.gif"))]
     (.write w (:body test-file)))) 
```

**编辑：** 输出流更好：

```
(defn write-file []
   (with-open [w (clojure.java.io/output-stream "test-file.gif")]
     (.write w (:body test-file)))) 
```

**更新：**

优雅的方式：

```
(clojure.java.io/copy
 (:body (client/get "http://placehold.it/350x150" {:as :stream}))
 (java.io.File. "test-file.gif")) 
```

# ruby-on-rails - 指向 AR 模型的 Mongoid 模型，反之亦然？

> ID：11321270
> 
> 赞同：2
> 
> 时间：2012-07-04T01:14:21.303
> 
> 标签：ruby-on-rails, activerecord, mongoid

假设我们的应用程序中有以下模型：

```
# AR model
class Foo < ActiveRecord::Base
  belongs_to :bars # this is an association pointing to a Mongoid model
end

# Mongoid model
class Bar
  include Mongoid::Document  
  belongs_to :foo # this is an association pointing to a AR model
end 
```

是否可以在指向 AR 模型的 Mongoid 模型中创建关联，反之亦然？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T18:23:24.870

为此，我们使用[Tenacity](https://github.com/jwood/tenacity)（也称为“Polyglot Persistence”）。它工作得非常好，尽管有一些限制。所有者/维护者 JWood 反应迅速，修复了错误并合并到我很快发送的拉取请求中。

# python - NumPy：从数值记录数组中获取最小值/最大值

> ID：11321271
> 
> 赞同：3
> 
> 时间：2012-07-04T01:14:41.250
> 
> 标签：python, numpy

我有一个浮点数的 NumPy 记录数组：

```
import numpy as np
ar = np.array([(238.03, 238.0, 237.0),
               (238.02, 238.0, 237.01),
               (238.05, 238.01, 237.0)], 
              dtype=[('A', 'f'), ('B', 'f'), ('C', 'f')]) 
```

如何从此记录数组中确定最小值/最大值？我通常的尝试`ar.min()`失败了：

> TypeError：无法使用灵活类型执行归约

我不确定如何将值展平为更简单的 NumPy 数组。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T05:58:16.360

最简单和最有效的方法可能是将*您*的数组视为一个[简单的 2D 浮点数组](https://stackoverflow.com/a/10171321/42973)：

```
ar_view = ar.view((ar.dtype[0], len(ar.dtype.names))) 
```

这是结构化数组的二维数组视图：

```
print ar_view.min(axis=0)  # Or whatever… 
```

这种方法很快，因为没有创建新数组（更改会`ar_view`导致更改`ar`）。但是，它仅限于像您这样的情况，其中所有记录字段都具有相同的类型（此处为 float32）。

一个优点是这种方法保持原始数组的 2D 结构完整：例如，您可以*在每个“列”* ( `axis=0`) 中找到最小值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T01:26:54.897

你可以做

```
# construct flattened ndarray
arnew = np.hstack(ar[r] for r in ar.dtype.names) 
```

展平recarray，然后您可以执行正常的ndarray操作，例如

```
armin, armax = np.min(arnew), np.max(arnew)
print(armin),
print(armax) 
```

结果是

```
237.0 238.05 
```

基本上`ar.dtype.names`给你recarray名称的列表，然后你从名称和堆栈中一一检索数组到`arnew`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-02T03:22:40.680

这可能会帮助其他人，但另一种方法可能更明智：

```
import numpy as np
ar = np.array([(238.03, 238.0, 237.0),
              (238.02, 238.0, 237.01),
              (238.05, 238.01, 237.0)], 
              dtype=[('A', 'f'), ('B', 'f'), ('C', 'f')])
arView = ar.view(np.recarray)
arView.A.min() 
```

这让我可以挑选。我的一个问题是我所有元素的 dtype 都不相同（总的来说是一个相当复杂的结构）。

# php - php中插入的时间戳

> ID：11321275
> 
> 赞同：-1
> 
> 时间：2012-07-04T01:15:22.537
> 
> 标签：php, mysql, timestamp

我有这个 sql 查询，我需要在之前更新的函数中为名为“created”的字段添加时间戳。我添加了`$sqlMod = sprintf("UPDATE %s SET last_modified=now(), %s WHERE id='%s'", $table, $implodeArray, $_POST['id']);`哪个效果很好。但是，我似乎无法在 insert into 函数中获得正确的语法以使其正常工作。我试过`(created, %s) VALUES ("now(), %s")`了......但它不起作用。

```
$sql = sprintf('INSERT INTO %s (%s) VALUES ("%s")', $table, implode(', ', array_map('mysql_escape_string', array_keys($values))), implode('",  "',array_map('mysql_escape_string', $values))); 
```

目前：`INSERT INTO projects (created, project_name, project_bold, project_content, id) VALUES ("now(), something", "something", "something", "46919705")`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T01:24:26.297

调用`NOW()`不应在引号内，但应引用其后面的参数。

```
(created, %s) VALUES (now(), "%s") 
```

不要使用`mysql_escape_string()`. 改用更全面的`mysql_real_escape_string()`。从长远来看，考虑切换到支持准备好的语句的 API，如 MySQLi 或 PDO，尽管您仍然需要在表名中连接动态 SQL，例如您正在做的事情。

虽然 MySQL 支持双引号，但字符串值的单引号更标准一些。交换字符串上的引用并`implode()`调用，因此最终产品如下所示：

```
$sql = sprintf("INSERT INTO %s (created, %s) VALUES (NOW(), '%s')", $table, implode(', ', array_map('mysql_real_escape_string', array_keys($values))), implode("',  '",array_map('mysql_real_escape_string', $values))); 
```

作为您和未来读者安全性的最后一点，我们看不到 的来源`$table`，但如果它源自任何类型的用户输入，建议对照可接受表名的白名单检查其值，因为它不能得到充分保护`mysql_real_escape_string()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T01:19:51.987

您似乎将所有参数放入一个字符串中 - 这不起作用，因为每个参数都需要是一个单独的实体。

您可能只使用 a`TIMESTAMP DEFAULT CURRENT_TIMESTAMP`代替，并让数据库为您将创建时间放在那里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T01:24:31.297

`created`从您的数组中删除`$values`并将其硬编码到您的 SQL 字符串中。

```
$sql = sprintf('INSERT INTO %s (%s, created) VALUES ("%s", now())', $table, implode(', ', array_map('mysql_escape_string', array_keys($values))), implode('",  "',array_map('mysql_escape_string', $values))); 
```

# javascript - 代码在 jsfiddle 中有效，但在我的网站上无效

> ID：11321276
> 
> 赞同：1
> 
> 时间：2012-07-04T01:15:52.237
> 
> 标签：javascript, jquery, html, css

我编写了一个 div，它大部分是隐藏的，直到单击它展开的位置，然后在单击时再次隐藏。您可以在这里查看 jsfiddle：http: [//jsfiddle.net/Z8vEs/1/](http://jsfiddle.net/Z8vEs/1/)

我在另一个网站上使用过这种方法，它在那里工作，但由于某种原因，我正在制作的新网站上没有，坦率地说，我感到很沮丧和沮丧。我不是很精通 jQuery，所以我不确定如何进行调试，所以任何建议都将不胜感激。我使用的唯一其他 jQuery 是来自 codrops 的图像滑块的编辑版本：http: [//tympanus.net/codrops/2011/08/09/portfolio-image-navigation/](http://tympanus.net/codrops/2011/08/09/portfolio-image-navigation/)

[您可以在http://quintinmarcus.com/](http://quintinmarcus.com/)查看我的网站以亲自查看问题

感谢您的帮助-昆汀

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T01:24:12.637

看起来您没有在您的网站上正确加载 jQuery。

**在名为custom.js**的 javascript 文件中，您可以看到：

```
/* ANIMATE ABOUT BOX */
$("#about").click(function() {
    if($('#about').css('width') == '83px'){
        $('#about').animate({'width':'380px'},350);
        $('#about').animate({'height':'457px'},350);
    }
    else{
        $('#about').animate({'width':'83px'},350);
        $('#about').animate({'height':'11px'},350);
    }
}); 
```

当它真的应该是这样的：

```
/* ANIMATE ABOUT BOX */
$(document).ready(function(){

    $("#about").click(function() {
        if($('#about').css('width') == '83px'){
            $('#about').animate({'width':'380px'},350);
            $('#about').animate({'height':'457px'},350);
        }
        else{
            $('#about').animate({'width':'83px'},350);
            $('#about').animate({'height':'11px'},350);
        }
    });
}); 
```

请注意新版本顶部和底部的 jQuery 启动脚本和结束标记。

jsfiddle 默认为您添加该代码，因为它很常见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T01:27:48.417

因为“custom.js”文件是在`<div id="about">`创建之前加载的，你可能想做这样的事情：

```
$(document).ready(function() {
    $("#about").click(function() {
    if($('#about').css('width') == '83px'){
      $('#about').animate({'width':'380px'},350);
      $('#about').animate({'height':'457px'},350);
    }
    else{
      $('#about').animate({'width':'83px'},350);
      $('#about').animate({'height':'11px'},350);
    }
    });

 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T01:27:59.463

我认为您的脚本末尾有一个非法字符。我将它放入控制台并且它起作用了（我删除了角色）：

```
$("#about").click(function() {
    if ($('#about').css('width') == '83px') {
        $('#about').animate({
            “宽度”：“380 像素”
        }, 350);
        $('#about').animate({
            “高度”：“457px”
        }, 350);
    }
    别的 {
        $('#about').animate({
            '宽度'：'83px'
        }, 350);
        $('#about').animate({
            “高度”：“11px”
        }, 350);
    }
});

```

# macos - 在 MacOS 10.6.8 中使用 QTKit 播放 HLS (.m3u8)

> ID：11321288
> 
> 赞同：1
> 
> 时间：2012-07-04T01:18:37.427
> 
> 标签：macos, media-player, http-live-streaming, qtkit, m3u

我正在创建一个支持在 Mac OS 环境中播放 hls 文件 (.m3u8) 的应用程序，我刚刚发现 AVFoundation 仅适用于 Mac OS 10.7 及更高版本。

所以，我只剩下 QTKit 了。

Apple 关于 HLS 的文档说 HLS 可以使用 AVFoundation 和 QTKit 框架在 Mac OS 上播放。（嗯，他们使用了“AND”这个词......我希望 QTKit 可以单独播放 m3u8 文件 --- 因为 QuickTime X 播放器可以很好地播放它们）

无论如何，我已经调整了 Apple 的 MyMediaPlayer 示例代码以适应 .m3u8 文件。（示例代码可以在这里看到：http: [//developer.apple.com/library/mac/#samplecode/MyMediaPlayer/Introduction/Intro.html#//apple_ref/doc/uid/DTS40009203](http://developer.apple.com/library/mac/#samplecode/MyMediaPlayer/Introduction/Intro.html#//apple_ref/doc/uid/DTS40009203)）

这是 QTMovie initWithAttributes 代码片段：

```
NSDictionary *attrs = [NSDictionary dictionaryWithObjectsAndKeys: 
                       absoluteURL, QTMovieURLAttribute, 
                       [NSNumber numberWithBool:YES], QTMovieOpenForPlaybackAttribute ,
                       [NSNumber numberWithBool:YES], QTMovieOpenAsyncRequiredAttribute,
                       [NSNumber numberWithBool:YES], QTMovieOpenAsyncOKAttribute,                           
                       nil]; 

[self willChangeValueForKey:@"movie"];
mMovie = [[QTMovie alloc] initWithAttributes:attrs error:outError];
[self didChangeValueForKey:@"movie"]; 
```

我想玩的是这个：

**prog_index.m3u8** --> 我使用 Apple 的 MediaFileSegmenter 制作的。

请告诉我单独的 QTKit 框架是否可以播放 HLS 文件。如果可以，我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T00:12:44.130

好的，我刚刚发现我一直在访问位于本地目录中的 m3u8 文件。由于这是 HLS，因此需要有一个 http 服务器来提供播放列表文件。

我以前的 absoluteURL 是 `file://localhost/Users/guest/Desktop/Music/stream01/index.m3u8`

QTKit 在建立我自己的服务器并将播放列表文件的路径更改为： `http://192.168.0.XX/stream01/index.m3u8`

QTKit（被 Quick Time X Player 采用）可以：

1.  播放 .m3u8 文件（前提是它们由 http 服务器提供服务）

2.  以 .m3u8 格式播放 AES-128 加密的 .ts/.aac/.mp3 文件（视频和音频）

它终于奏效了！耶！

# c# - 为什么我无法访问 System.EventArgs 的 KeyCode 成员？

> ID：11321289
> 
> 赞同：1
> 
> 时间：2012-07-04T01:18:46.177
> 
> 标签：c#, .net

我究竟做错了什么？这是我得到的错误代码：

> “System.EventArgs”不包含“KeyCode”的定义，并且找不到接受“System.EventArgs”类型的第一个参数的扩展方法“KeyCode”（您是否缺少 using 指令或程序集引用？）

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace BroZer
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void Reload_Click(object sender, EventArgs e)
        {
            webBrowser1.Refresh();
        }

        private void Go_Click(object sender, EventArgs e)
        {
            webBrowser1.Navigate(textBox1.Text);
        }

        private void Back_Click(object sender, EventArgs e)
        {
            webBrowser1.GoBack();
        }

        private void Forward_Click(object sender, EventArgs e)
        {
            webBrowser1.GoForward();
        }

        private void textBox1_KeyDown(object sender, EventArgs e)
        {
            if (e.KeyCode == Keys.Enter)
            {
                webBrowser1.Navigate("https://www.google.com/search?&ie=UTF-8&q=" + textBox1.Text);
            }
        }

        private void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
        {

        }

        private void Save_Click(object sender, EventArgs e)
        {
            webBrowser1.ShowSaveAsDialog();
        }

        private void Print_Click(object sender, EventArgs e)
        {
            webBrowser1.ShowPrintPreviewDialog();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T01:20:43.460

更新：我想通了。你所要做的就是改变

```
(object sender, EventArgs e) 
```

至

```
(object sender, KeyEventArgs e) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T01:27:06.783

要最大限度地使用 IDE（即 Visual Studio），请键入：textBox1.KeyDown +=`Tab``Tab`

它将为您提供事件委托方法定义的确切签名。

* * *

如果您的 KeyDown 的代码非常琐碎并且您不想将其放在单独的方法中，您可以选择内联代码，即您可以将代码嵌入到 lambda 中：

```
textBox1.KeyDown += (s,e) => 
    if (e.KeyCode == Keys.Enter) 
        webBrowser1.Navigate(
            "https://www.google.com/search?&ie=UTF-8&q=" + textBox1.Text); 
```

自动完成仍然适用于 lambda，即当您键入 this:`if (e.`时，`KeyCode`将出现在自动完成的下拉列表中。使用 lambda，您不需要知道委托方法的确切签名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T15:33:55.303

要将`KeyDown`事件分配`textBox1`给`textBox1_KeyDown`，在设计模式下单击文本框并查看*属性*窗口并单击*事件*按钮并查找*keydown*并双击它。![在此处输入图像描述](../Images/183bda55bcbf86fc874cbcc6adfbb8ef.png)

# azure - 将 Web 角色迁移到 Windows Azure 虚拟机

> ID：11321296
> 
> 赞同：4
> 
> 时间：2012-07-04T01:19:17.603
> 
> 标签：azure

我有一个在 Windows Azure 中运行的 Web 角色，我在我的 Web 角色中包含了两个实例。

我决定使用 Windows Azure 虚拟机来运行我的 Windows Azure Web 角色。我找不到任何迁移文档来将我的 Web 角色迁移到 Windows Azure 虚拟机。在门户网站上，我看到了 Windows Azure 网站的基于 git、TFS 和 FTP 的迁移，但没有看到 Windows Azure 虚拟机的迁移。

将我的 Web 角色迁移到 Windows Azure 虚拟机的最佳方式是什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T02:18:37.990

Windows Azure 有 3 种模式，所有 3 种模式都可以运行网站。

1.  Windows Azure 网站 (WAWS)
2.  云服务（平台即服务）
3.  虚拟机（基础设施即服务）

您现有的 Web 角色解决方案正在使用云服务 (PaaS)。要迁移到 WAWS 或虚拟机，您需要执行以下操作（我假设在这里使用 Visual Studio）：

1.  制作现有解决方案的副本并从中删除 Windows Azure 项目，只留下 Web 项目。
2.  使用新的 Windows Azure 门户，配置 WAWS 网站或虚拟机。
3.  记录您的访问凭证。如果使用 WAWS，请指定并记住您的部署凭证。如果使用虚拟机，请设置并记住您的远程桌面凭据。
4.  将您的 Web 项目文件部署到云端。如果使用 WAWS，请选择一种部署方法（Web 部署、FTP、Git、TFS）并从 Visual Studio 进行部署。如果使用虚拟机，调用远程桌面，配置本地磁盘共享，连接到虚拟机，配置 IIS，传输文件。

由于所有 3 种模式都可用于托管网站，因此您可以在做出决定之前考虑以下事项：

*   WAWS - 仅适用于具有标准 IIS 配置的 2 层网站；为您管理；保留云和本地之间的可移植性。除非您从共享模式升级到保留模式，否则您正在与其他人共享虚拟机。VM 实例具有共享持久性。仅限 Windows Server 和 IIS；可以使用 SQL 数据库或 MySQL。

*   云服务 - 为您管理，可以支持多种架构，强大的服务可用于存储、数据库、身份、通信、缓存、虚拟网络。您的虚拟机专属于您。虚拟机没有持久性。仅限 Windows 服务器。

*   虚拟机——您管理，可以支持多种架构；保留了便携性。您的虚拟机专属于您。您可以捕获 VM 并将其添加到映像库，以便轻松创建新实例。VM 具有单独的持久性。Windows 服务器或 Linux。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-04T02:40:11.097

如果您使用的是 Windows Azure 虚拟机，那么您就是虚拟机的所有者，这取决于您决定如何部署应用程序。因为当您决定使用 Windows Azure 虚拟机时，您可以使用 Stock Virtual Image（来自图库）或者您可以部署自己的 VHD，您可以自由选择应用程序的部署方法，这就是为什么在 Windows 中提供了选项Azure 门户。（对于 Windows Azure 网站，您没有这样的自由，这就是为什么为那些决定选择 Windows Azure 网站的人提供 GIT、FTP、TFS 和 WebDeploy 方法的原因。）

因为您正在尝试将 Windows Azure Web 角色迁移到虚拟机，所以我认为最好的选择是下面我向其他几个合作伙伴提出的建议：

1.  从 Windows Azure Web 角色解决方案中取出您的 Web 角色应用程序，以便您独立 ASP.NET Web 应用程序
2.  现在您可以在此应用程序中使用 WebDeploy 方法。

要在 Windows Azure 虚拟机中设置 WebDeploy，您需要执行以下步骤：

1.  在 Windows Azure 虚拟机中安装 .Net 3.5
2.  [从此处](http://technet.microsoft.com/en-us/library/dd569059%28v=WS.10%29.aspx)的下载链接安装 Web deploy 2.0 。
3.  设置 Web 部署。完整的步骤可以在[这里找到](http://learn.iis.net/page.aspx/1075/installing-and-configuring-web-deploy/)
4.  在您的 Windows Azure 虚拟机中创建新的端点端口 8172 作为公共和私有的 Web 部署
5.  现在使用您的 VS2010 应用程序并使用 Visual Studio 发布向导部署您的应用程序

请注意，如果您不想使用基于 VS2010 的 WebDeploy，您可以先将您的应用程序打包，然后将 RDP 打包到您的 Windows Azure 虚拟机并在那里安装。因为 Windows Azure 虚拟机持久化数据，所以这一步比 Web 部署简单得多，但也有很大不同，但这是一个有效的选择。

# java - Java 方法访问

> ID：11321297
> 
> 赞同：2
> 
> 时间：2012-07-04T01:19:36.090
> 
> 标签：java, private, public

我对 Java 中的公共类和私有类有疑问。例如，如果您在私有类中有一个公共方法，那么其他公共/私有类可以访问公共方法吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T01:27:04.750

为了能够调用类中的方法，执行调用的方法必须能够访问类本身。因此，定义了私有类的类的方法可以访问公共方法，而其他类的方法不能访问。

当然如果私有类继承了公有类或者实现了公有接口，那么基类或者接口的方法对所有人都是可见的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T01:26:17.207

依靠。如果公共方法是由公共接口定义的，则调用者可以通过该接口访问它。否则，如果不使用私有类（他们看不到），他们将无法获得对它的引用。

此外，使用反射和禁用的安全管理器，你也可以做这些事情，但我想这是一个不同的问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-05-06T13:38:49.340

不能有私课。类只能具有公共或默认访问级别。

# java - 我怎样才能让这个线程停止

> ID：11321303
> 
> 赞同：0
> 
> 时间：2012-07-04T01:20:30.483
> 
> 标签：java, multithreading

所以这是我的问题，我怎样才能让线程停止，我对线程不是很精通，但我读过的少量信息告诉我这应该可以工作。

```
public class testestes {
    static volatile boolean key;

    public static void main (String []args)
    {
        key=true;
        Thread thread=new Thread(new Runnable()
        {
            public void run()
            {
                while(key)
                {
                    System.out.println("running");
                }
            }
        });

        thread.start();
        key=false;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T22:47:18.077

我**不会**使用 a`boolean`检查线程是否应该**终止**。如果您`volatile`用作字段修饰符，这将工作可靠，但如果您的代码变得更复杂，而是在`while`循环中使用其他阻塞方法，则可能会发生，您的代码根本**不会终止**，或者至少**需要更长**的时间可能想要。

> 某些阻塞库方法支持中断。

每个线程都已经有一个布尔标志**中断状态**，你应该利用它。它可以这样实现：

```
public void run() {

   try {
      while(!Thread.currentThread().isInterrupted()) {
         // ...
      }
   } catch (InterruptedException consumed)
      /* Allow thread to exit */
   }

}

public void cancel() { interrupt(); } 
```

源代码取自[Java Concurrency in Practice](http://jcip.net/)。由于该`cancel()`方法是公共的，您可以让另一个线程根据需要调用此方法。

还有一个名字不好的静态方法`interrupted`，可以清除当前线程的中断状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T01:21:46.687

你想打电话`thread.start();`，不是`thread.run();`。run() 不会分叉。

此外，您可能不会看到任何“正在运行”的输出，因为您在`key`fork 后立即设置为 false，因此当分叉线程进入时`run()`，`key`已经为 false。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T02:31:29.417

这样做的基本布局是实际上有一个实现 Runnable 的类。

```
public class SampleThread implements Runnable
{
  private volatile boolean stopFlag = false;

  public void stopThisThread()
  {
    stopFlag = true;
  }

  public void run()
  {
    while (!stopFlag)
    {
      //doStuff
    }
  }
} 
```

然后在别处

```
SampleThread sample = new SampleThread();
new Thread(sample).start();
//Then when you want to kill it...
sample.stopThisThread(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T03:21:13.780

您的简化代码中提出的技术*应该可以*工作。我至少可以确认它可以在我的桌面上运行。你在本地测试过简化版吗？可能在您的实际版本中发生了一些未在此处表示的事情，例如使用非静态变量或还必须满足的附加条件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T06:25:28.130

我相信您可能想考虑使用[`Thread.interrupt()`](http://docs.oracle.com/javase/tutorial/essential/concurrency/interrupt.html). Java 教程中有一篇关于它的好文章。

**建议布尔**标志的答案同样正确。无论哪种情况，您都将在某处检查一些条件语句以查看您的线程是否应该终止。终止的条件可能是线程被中断或设置了它的布尔标志（取决于您选择的实现）。

最后一句警告：永远不要使用 Thread.stop()。它被弃用是有充分理由的。请参阅[此处](http://docs.oracle.com/javase/1.4.2/docs/guide/misc/threadPrimitiveDeprecation.html)以获得很好的解释。

# perl - 使用 REGEX 匹配字符串，而字符串中不重复第一个标记。（第2部分）

> ID：11321307
> 
> 赞同：2
> 
> 时间：2012-07-04T01:21:08.040
> 
> 标签：perl

感谢@cool_me5000 在这里帮助我解决了这个问题的过度简化版本：[PERL: Using REGEX to match a string without the first token repeated in the string。（ABC，不是 AAA ABC）](https://stackoverflow.com/questions/11320651/perl-using-regex-to-match-a-string-without-the-first-token-repeated-in-the-stri)

这是调整后的问题：

我正在尝试使用正则表达式来匹配 ATE 后跟 CAT 的 FIRST 实例，而 ATE 和 CAT 之间没有另一个 ATE。我想匹配“ATE BAT CAT”。请注意，在此文本字符串中，在第一个 ATE/CAT 组合之后还有其他实例也可能适合 ATE/CAT，（特别注意字符串末尾附近的“ATE DOG CAT”）这是文本：

```
$TEXT = "ATE ATE ATE ATE BAT CAT ATE DOG EGG ATE FOR GIN ATE DOG CAT ATE"; 
```

我第一次尝试：

```
@finds1=$TEXT=~m/((ATE).*?(CAT))/;
$result = $finds1[0];
print "result = $result\n"; 
```

这将打印以下内容：

```
result = ATE ATE ATE ATE BAT CAT 
```

当我想要的只是：

```
result = ATE BAT CAT 
```

请注意，我正在尝试创建一个可以在 B 可以是任何字符串的情况下使用的正则表达式。例如 ATE DOG CAT、ATE FAT GET HAT JOT KIN CAT、ATE YAK ULE INN OLD KOC JOG HUG GOT TAL CAT。

接下来我尝试使用前瞻语句和 if then else 语句。这是代码：

```
@finds1=$TEXT=~m/(ATE(?(?!.*?ATE.*?CAT).*?CAT|Z{100}))/;
$result = $finds1[0];
print "result = $result\n"; 
```

REGEX 的第一部分，(ATE，告诉 perl 找到 ATE 的出现。一旦找到，perl 然后处理 if then else 语句，其中条件语句是在 ATE 之后没有 . *?ATE.* ?CAT 的实例, 如果没有找到，则 perl 查找 .*?CAT，如果至少找到一个，则搜索 100 个 Z 实例。我试图解析有 100 个 Z。）

这将返回：

```
result = ATE DOG CAT 
```

在第一次识别 CAT 后，我考虑过使用积极的后视。但是，就像我上面提到的，第一个 ATE.CAT 组合之间没有 A 的字符数是可变的。据我所知，PERL 不能进行可变长度的后视。

非常感谢您提供的任何帮助或指导！

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T01:24:11.277

对于前面的问题，解决方案是：

```
my ($first) = $text =~ /(A[^AC]*C)/; 
```

我们使用了`A|C`then 的否定，这意味着我们需要使用`ATE|CAT`here 的否定。

每个人都应该知道的是，`(?:(?!STRING).)`就是这样。也适用于*一些*更复杂的模式，包括上面的模式。`(?:STRING)``[^CHAR]``CHAR``(?:(?!PAT).)`

 *所以我们得到：

```
my ($first) = $text =~ /(ATE (?:(?!ATE|CAT).)* CAT)/sx; 
```

* * *

解释：

您不希望在“ATE”和“CAT”之间出现“CAT”或“ATE”，所以

```
 +---------------- You don't want CAT or ATE starting here.
   |+--------------- You don't want CAT or ATE starting here.
   ||--+------------ You don't want CAT or ATE starting here.
   ||   +----------- You don't want CAT or ATE starting here.
   ||   |+---------- You don't want CAT or ATE starting here.
   ||   ||
   vv   vv
ATE??...??CAT 
```

所以那将是

```
/
   ATE
   (?! CAT|ATE ) .
   (?! CAT|ATE ) .
   ...
   (?! CAT|ATE ) .
   (?! CAT|ATE ) .
   CAT
/x 
```

使用 处理重复`*`。*

# sql - 计算字符串中嵌入的总文件名和唯一文件名

> ID：11321312
> 
> 赞同：2
> 
> 时间：2012-07-04T01:22:10.700
> 
> 标签：sql, sql-server, regex, sql-server-2008, sqlclr

我有一个表，其中包含一个名为 ExcelLinks 的列，其中包含如下记录：

> =INDEX('\\san1\engData[BT_500.0_Structural_Position.xls]混凝土'!$B$4:$IK$83,MATCH($K$9,'\\san1\engData[BT_500.0_Structural_Position.xls]混凝土'!$ A$4:$A$83,0),MATCH(C212,'\\san1\engData[BT_500.0_Structural_Position.xls]混凝土'!$B$3:$IK$3,0))/1000000
> 
> =INDEX('\\san1\engData[GK_600.0_Pumps.xls]Pumps'!$B$4:$BD$39,MATCH($K$9,'\\san1\engData[TT_640.0_Generator.xls]Generator'!$ A$4:$A$39,0),MATCH(C214,'\\san1\engData[GK_600.0_Pumps.xls]Pumps'!$B$3:$BD$3,0))/1000000
> 
> =INDEX('\\san1\engData[TT_640.0_Generator.xls]Generator'!$B$4:$HU$83,MATCH($K$9,'\\san1\engData[GK_600.0_Pumps.xls]Pumps'!$ A$4:$A$83,0),MATCH(C218,'\\san1\engData[TT_640.0_Generator.xls]Generator'!$B$3:$HU$3,0))/1000000

理想的输出是：

```
_______________________________________
| Row  |  LinkCount |  UniqueLinkCount |
| 1    |     3      |        1         |
| 2    |     3      |        2         |
| 3    |     3      |        2         | 
```

**我想查询这些数据并查看每条记录使用的文件数和唯一文件数。**

我在网上进行了搜索，找不到任何这样做的东西。

我想我会做一个游标，对于每条记录，我会检测以开头`\\`和结尾的字符`'!$`并计算文件数。

困难的一点是 ExcelLinks`=INDEX`和`MATCH`使用多个链接（可能是不同的文件）的函数。

该表中有超过 1200 万条记录，因此我担心使用游标的性能。

[使用 RegEx 的 Oracle](https://forums.oracle.com/forums/thread.jspa?threadID=2327749)有一些更好的方法可以做到这一点。我知道 SQL Server 没有 RegEx，如果这是最简单的选择，我愿意编写/使用 CLR 存储过程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T01:37:30.650

首先，[从 Adam Machanic 中获取这个字符串拆分 CLR 函数](http://dataeducation.com/sqlclr-string-splitting-part-2-even-faster-even-more-scalable/)。将代码编译成 DLL（如果您没有 Visual Studio，则[使用 csc](http://msdn.microsoft.com/en-us/library/78f4aasd.aspx) ），将 DLL 复制到您的服务器，然后按如下方式注册 DLL（您必须在此处替换一些可变部分，例如文件路径, 你想调用的程序集等）：

```
CREATE ASSEMBLY CLRStuff 
  FROM 'C:\DLLs\CLRStuff.dll'  
  WITH PERMISSION_SET = SAFE;
GO

CREATE FUNCTION dbo.SplitStrings
(
   @List      NVARCHAR(MAX),
   @Delimiter NVARCHAR(255)
)
RETURNS TABLE ( Item NVARCHAR(4000) )
  EXTERNAL NAME CLRStuff.UserDefinedFunctions.SplitString_Multi;
GO 
```

有了这些，查询本身就很容易了。让我们创建一个包含几行的简单表变量（为简洁起见，我缩短了路径）：

```
DECLARE @x TABLE(i INT, ExcelLink VARCHAR(MAX));

INSERT @x

    -- 3 files, 1 unique: 
    SELECT 1,'=INDEX(''\\san1\a.xls''!$B$4:$IK$83,MATCH($K$9,''\\san1\a.xls'
    + '''!$A$4:$A$83,0),MATCH(C212,''\\san1\a.xls''!$B$3:$IK$3,0))/1000000'

UNION ALL 

    -- 3 files, 3 unique:
    SELECT 2,'=INDEX(''\\san1\a.xls''!$B$4:$BD$39,MATCH($K$9,''\\san1\b.xls'
    + '''!$A$4:$A$39,0),MATCH(C214,''\\san1\c.xls''!$B$3:$BD$3,0))/1000000'

UNION ALL 

    -- 3 files, 2 unique:
    SELECT 3,'=INDEX(''\\san1\b.xls''!$B$4:$HU$83,MATCH($K$9,''\\san1\c.xls'
    + '''!$A$4:$A$83,0),MATCH(C218,''\\san1\c.xls''!$B$3:$HU$3,0))/1000000'

UNION ALL 

    -- 1 file, 1 unique:
    SELECT 4,'=INDEX(''\\san1\foo.xls''!$B$4:$HU$83,0)';

-- the above was just inserts; the remainder is all of the query:

;WITH x(i,part) AS 
(
  SELECT x.i, SUBSTRING(t.Item, CHARINDEX('''\\', t.Item), 2048) 
    FROM @x AS x CROSS APPLY dbo.SplitStrings(x.ExcelLink, '!$') AS t
)
SELECT i, [file_count] = COUNT(part), [unique_files] = COUNT(DISTINCT part)
  FROM x WHERE part LIKE '''\\%'
  GROUP BY i ORDER BY i; 
```

结果：

```
i   file_count  unique_files
--  ----------  ------------
1   3           1
2   3           3
3   3           2
4   1           1 
```

这依赖于`\\`除了作为文件路径的开头之外不会自然地出现在数据中，并且所有文件路径都驻留在网络共享上。

这可能不是你能得到的最有效的方法——我相信一些 RegEx 向导可以使用这种方法而不是拆分来改进这一点（[这是一篇很好的文章，可以帮助你入门](http://msdn.microsoft.com/en-us/magazine/cc163473.aspx)），但这不是我的强项。大部分成本将是扫描整个表所需的 I/O，而不是计数或替换。

如果您不能使用 CLR，则可以将该函数替换为任意数量的非 CLR 版本（[这里是一个在功能上适合替换的示例](https://stackoverflow.com/a/10986550/61305)），但请记住，其他方法可能会受到不太理想的性能的影响。

# javascript - wp_enqueue_script 或 wp_head

> ID：11321315
> 
> 赞同：0
> 
> 时间：2012-07-04T01:23:01.500
> 
> 标签：javascript, ajax, wordpress, plugins

我下载的许多插件都使用 wp_head 动作挂钩将 JavaScript 添加到标头，我一直使用 wp_enqueue_script() 在标签内输入 JS/Ajax。有什么区别？这是正确的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T07:46:03.740

### 将脚本入队时挂钩的正确操作是`wp_enqueue_scripts`

这个钩子没有文档，但请参阅[admin_enque_scripts](http://codex.wordpress.org/Plugin_API/Action_Reference/admin_enqueue_scripts)， wp_enqueue_scripts 基本上是相同的钩子，只是它只在前端运行。

如果您使用 wp_print_scripts 挂钩，您的脚本也将被添加到管理员中。

另请参阅[开发博客文章](http://wpdevel.wordpress.com/2011/12/12/use-wp_enqueue_scripts-not-wp_print_styles-to-enqueue-scripts-and-styles-for-the-frontend/)了解更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T02:17:11.777

WP 操作的[文档页面](http://codex.wordpress.org/Plugin_API/Action_Reference)说它们是相关的。

> **wp_head**
> 在模板调用 wp_head 函数时运行。这个钩子通常放置在页面模板顶部附近，介于`<head>`和之间`</head>`。这个钩子不带任何参数。
> 
> **wp_print_scripts**
> 在 WordPress 将注册的 JavaScript 脚本打印到页眉之前运行。

因此，如果你想发出一个脚本块`<script>....</script>`，你可以使用任何一个。`wp_print_scripts`如果您希望脚本块紧跟在已注册脚本引用的脚本块之前，这似乎是合适的。

# c++ - 如何使用 OpenCV 的归一化相关性？

> ID：11321316
> 
> 赞同：4
> 
> 时间：2012-07-04T01:23:26.507
> 
> 标签：c++, opencv

如何使用 OpenCV 的归一化相关性？谁能提供代码示例？

**我的问题：** 我有一个螺丝头图像，需要找到螺丝的中心。所以我正在考虑使用 OpenCV 相关性，这是个好主意吗？

您可以在以下链接下找到示例图像：

[http://imageshack.us/photo/my-images/685/screw1.png/](http://imageshack.us/photo/my-images/685/screw1.png/)

请为我提供 OpenCV 中相关性的代码示例。它是如何使用的？相关函数的输出是什么？相关函数会提供螺钉位置吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-04T06:35:43.023

I think you are looking for `cv::matchTemplate` function:

```
cv::Mat image;  // Your input image
cv::Mat templ;  // Your template image of the screw 
cv::Mat result; // Result correlation will be placed here

// Do template matching across whole image
cv::matchTemplate(image, templ, result, CV_TM_CCORR_NORMED);

// Find a best match:
double minVal, maxVal;
cv::Point minLoc, maxLoc;
cv::minMaxLoc(result, &minVal, &maxVal, &minLoc, &maxLoc);

// Regards to documentation the best match is in maxima location
// (http://opencv.willowgarage.com/documentation/cpp/object_detection.html)

// Move center of detected screw to the correct position:  
cv::Point screwCenter = maxLoc + cv::Point(templ.cols/2, templ.rows/2); 
```

# objective-c - Lion 更新后钥匙串项目更新被拒绝

> ID：11321321
> 
> 赞同：0
> 
> 时间：2012-07-04T01:24:14.200
> 
> 标签：objective-c, cocoa, security, keychain, sskeychain

我有一个应用程序将数据存储在将定期更新的钥匙串中。不出所料，每当我更新应用程序时，钥匙串再次需要用户对该构建的许可。但是，钥匙串不允许修改（删除项目或覆盖内容）。

显然这对于​​需要定期更新的钥匙串项目来说是个大问题。

我完全没有问题编辑/删除/修改具有相同内部版本号的钥匙串项目。

有任何想法吗？

* * *

[编辑：删除添加]

请参阅下面我自己的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T17:20:12.413

这个程序的问题是特定于开发机器的。由于我在 /Applications/ 文件夹中接收更新并在构建目录中测试更新，keychain 看到不同位置的两个应用程序试图访问相同的安全凭据。我没有办法测试这个理论是否是实际原因，因为钥匙串或沙盒都没有吐出错误。

但是，删除应用程序及其密钥可以解决问题。

# .net - Mono 中的 AttachConsole() 和 ShowWindow() 等效项

> ID：11321325
> 
> 赞同：0
> 
> 时间：2012-07-04T01:24:45.597
> 
> 标签：.net, ubuntu, mono

我正在移植一个 Windows C# 应用程序以在 Linux 上运行。该应用程序使用对 Windows 系统库的 PInvoke 调用——这在 Linux 上不可用。

这是我在移植时遇到问题的代码部分的片段：

```
namespace MyApp
{
    static class Program
    {
        [DllImport("kernel32.dll")]
        static extern bool AttachConsole(int dwProcessId);
        private const int ATTACH_PARENT_PROCESS = -1;

        [DllImport("user32.dll")]
        static extern bool ShowWindow(IntPtr HWND, int CMDSHOW);

        /// <summary>
        /// The main entry point for the application.
        /// </summary>
        [STAThread]
        static void Main()
        {
            AttachConsole(ATTACH_PARENT_PROCESS);

            // ...
        }
    }
} 
```

单声道框架中是否有类似的功能？如果不是，我如何在 Mono 上实现类似的行为？我在 Ubuntu 10.0.4 LTS 上运行

# c - C - 文件的读取（）错误，存储在数组中并正确打印输出

> ID：11321327
> 
> 赞同：3
> 
> 时间：2012-07-04T01:25:07.773
> 
> 标签：c, file, double, printf

我是 C 新手，所以我不确定我的错误在哪里。但是，我确实知道问题的很大一部分在于我如何将双打存储在 d_buffer (double) 数组中，或者我打印它的方式。

具体来说，我的输出一直在打印非常大的数字（小数点前大约有 10-12 位数字，小数点后有一行零。此外，这是对旧程序的改编，允许双输入，所以我只添加了两个 if 语句（在“read”for 循环和“printf”for 循环中）和 d_buffer 声明。

我将不胜感激任何输入，因为我在这个错误上花了几个小时。

```
#include <stdio.h>
#include <fcntl.h>
#include <sys/types.h>
#include <unistd.h>
#include <string.h>

struct DataDescription
{
   char fieldname[30];
   char fieldtype;
   int  fieldsize;
};

/* -----------------------------------------------
   eof(fd): returns 1 if file `fd' is out of data
   ----------------------------------------------- */
int eof(int fd)
{
   char c;

   if ( read(fd, &c, 1) != 1 )
      return(1);
   else
    { lseek(fd, -1, SEEK_CUR);
      return(0);
    }
}

void main()
{
   FILE *fp;    /* Used to access meta data */
   int fd;  /* Used to access user data */

   /* ----------------------------------------------------------------
      Variables to hold the description of the data  - max 10 fields
      ---------------------------------------------------------------- */
   struct DataDescription DataDes[10];  /* Holds data descriptions
                                           for upto 10 fields */
   int  n_fields;                       /* Actual # fields */

   /* ------------------------------------------------------
      Variables to hold the data  - max 10 fields....
      ------------------------------------------------------ */
   char c_buffer[10][100];  /* For character data */
   int  i_buffer[10];       /* For integer data */
   double d_buffer[10];

   int i, j;
   int found;

   printf("Program for searching a mini database:\n");

   /* =============================
      Read in meta information
      ============================= */
   fp = fopen("db-description", "r");
   n_fields = 0;
   while ( fscanf(fp, "%s %c %d", DataDes[n_fields].fieldname, 
          &DataDes[n_fields].fieldtype,
          &DataDes[n_fields].fieldsize) > 0 )
      n_fields++;

   /* ---
      Prints meta information
      --- */
   printf("\nThe database consists of these fields:\n");
   for (i = 0; i < n_fields; i++)
      printf("Index %d: Fieldname `%s',\ttype = %c,\tsize = %d\n", 
        i, DataDes[i].fieldname, DataDes[i].fieldtype,
        DataDes[i].fieldsize);
   printf("\n\n");

   /* ---
      Open database file
      --- */
   fd = open("db-data", O_RDONLY);

   /* ---
      Print content of the database file
      --- */
   printf("\nThe database content is:\n");
   while ( ! eof(fd) )
   {  /* ------------------
         Read next record
         ------------------ */
      for (j = 0; j < n_fields; j++)
      {  
     if ( DataDes[j].fieldtype == 'I' )
        read(fd, &i_buffer[j], DataDes[j].fieldsize);
     if ( DataDes[j].fieldtype == 'F' )
        read(fd, &d_buffer[j], DataDes[j].fieldsize);
     if ( DataDes[j].fieldtype == 'C' )
        read(fd, &c_buffer[j], DataDes[j].fieldsize);       
      }

      double d;
      /* ------------------
         Print it...
         ------------------ */
      for (j = 0; j < n_fields; j++)
      {   
     if ( DataDes[j].fieldtype == 'I' )
        printf("%d ", i_buffer[j]);
     if ( DataDes[j].fieldtype == 'F' )
        d = d_buffer[j];
        printf("%lf ", d);
     if ( DataDes[j].fieldtype == 'C' )
        printf("%s ", c_buffer[j]);
      }
      printf("\n");
   }
   printf("\n");
   printf("\n");

} 
```

预期输出：以数字“e = 2.18281828”结尾的 3 行数据

要重现该问题，以下两个文件需要与 lookup-data.c 文件位于同一目录中：
- [db-data][1]
- [db-description][2]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T01:33:06.877

编辑：我之前的猜测都是错误的。问题是数据库文件有 big-endian 数字，而数据是在 little-endian 计算机上读取的。跳到标有“从这里开始阅读”的部分，以避免在早期的推测上浪费你的时间（因为它们的历史价值非常有限而留在这里）。

我怀疑您的问题与用于打印值的`printf()`格式规范以及您声明为 type`%lf`的事实有关。可能是真的，因此您将额外的数据字节解释为浮点值的一部分。`d_buffer``int``sizeof(double) > sizeof(int)`

我不确定这一点，因为我看不到您的程序用来运行的数据，但是如果您的`fieldsize`for float 数据`sizeof(float)`不是`sizeof(double)`那么可能您将浮点值存储`d_buffer`得很好，但在打印时会弄乱它们。或者，如果`fieldsize`等于`sizeof(double)`并且`sizeof(double)`大于`sizeof(int)`，那么您正在注销末尾，`d_buffer`然后某些东西正在破坏您的数据。

我建议您将声明更改为`double d_buffer[10];`，看看您的程序是否运行得更好。另外，看看是否`fieldsize`设置为`sizeof(float)`or `sizeof(double)`; 如果它被`sizeof(float)`声明`d_buffer`为类型`float`并使用此代码：

```
 if ( DataDes[j].fieldtype == 'F' )
  {
    double d = d_buffer[j];
    printf("%lf ", d);
  } 
```

编辑：另外，我建议您切换到使用`fopen()`and`fread()`用于所有 I/O。基本的`open()`并且`read()`可以返回`EINTR`，这意味着您需要重试操作，因此这些仅在循环中正确使用，如果返回，将重试调用`EINTR`。`fopen()`和调用使您免受这种`fread()`细节的影响，并有一些缓冲可以使您的程序运行得更顺畅。（我很确定您当前的项目只是读取和写入少量数据，因此此时性能差异对您来说可能并不重要。）

另外，我建议你摆脱你的`eof()`功能；读取一个字符然后用`fseek()`它放回它是非常不寻常的并且可能有点慢。C 库具有`fgetc()`从输入流中获取一个字符的功能，您可以测试该字符以查看它是否是`EOF`检测文件结尾的值。而且C库也有`ungetc()`回退一个字符的功能；这不会涉及实际寻找磁盘，而只是将字符放回某个缓冲区中的某个地方。但是您甚至不需要使用`fgetc()`or`ungetc()`为您的代码；只需检查返回值`fread()`如果你得到一个零长度的读取，你就知道你遇到了文件结尾。在生产代码中，无论如何您都需要检查每个函数调用的返回值；你不能只希望每次阅读都能成功。

编辑：您可以尝试的另一件事：将格式代码从更改`"%lf"`为 just `"%f"`，看看会发生什么。我不确定那`l`会做什么，你不应该需要它。普通旧的`"%f"`应该格式化一个`double`. 但它可能不会改变任何东西：根据我发现的这个网页， in和`printf()`之间没有区别。`"%lf"``"%f"`

[http://www.dgp.toronto.edu/~ajr/209/notes/printf.html](http://www.dgp.toronto.edu/~ajr/209/notes/printf.html)

*** 从这里开始阅读 ***

编辑：好的，我已经确定了一件事。数据库格式是一个索引值（一个整数值），然后是一个浮点值，然后是一个字符串值。您将需要阅读每一个以推进文件中的当前位置。那么您当前的代码是检查格式代码并决定要读取哪些内容？不正确; 您需要为每条记录读取一个整数、一个浮点数和一个字符串。

编辑：好的，这是一个可以读取数据库的正确 Python 程序。无需费心读取元数据文件；我只是在常量中硬编码（没关系，因为它只是一个一次性程序）。

```
import struct

_format_rec = ">id20s"  # big-endian: int, double, 20-char string
_cb_rec = struct.calcsize(_format_rec) # count of bytes in this format

def read_records(fname):
    with open(fname) as in_f:
        try:
            while True:
                idx, f, s = struct.unpack(_format_rec, in_f.read(_cb_rec))
                # Python doesn't chop at NUL byte by default so do it now.
                s, _, _ = s.partition('\0')
                yield (idx, f, s)
        except struct.error:
            pass

if __name__ == "__main__":
    for i, (idx, f, s) in enumerate(read_records("db-data")):
        print "%d) index: %d\tfloat: %f \ttext: \"%s\"" % (i, idx, f, s) 
```

所以索引值是 32 位整数，大端；浮点数是 64 位浮点数，大端；并且文本字段是固定的 20 个字符（因此是 0 到 19 个字符加上一个终止 NUL 字节的字符串）。

这是上述程序的输出：

```
0) index: 1     float: 3.141593         text: "Pi"
1) index: 2     float: 12.345000        text: "Secret Key"
2) index: 3     float: 2.718282         text: "The number E" 
```

现在，当我尝试编译你的 C 代码时，我得到了垃圾值，因为我的计算机是 little-endian。您是否尝试在 little-endian 计算机上运行您的 C 代码？

编辑：要回答最近的评论，这是一个问题：对于每个输入记录，您必须调用`read()`3 次。第一次读取索引时，它是一个 4 字节整数（big-endian）。第二次读取的是一个 8 字节的浮点值，也是大端的。第三次读取是 20 个字节的字符串。每次读取都会移动文件中的当前位置；三个读取一起从文件中读取单个记录。在您阅读并打印了三个记录之后，您就完成了。

由于我的计算机是 little-endian，因此在 C 中正确获取值很棘手，但我做到了。我做了一个联合，让我可以将一个 8 字节的值作为整数或浮点数读出，我用它作为调用的缓冲区`read()`；然后我调用`__builtin_bswap64()`（GCC 中的一个功能）将 big-endian 值交换为 little-endian，将结果存储为 64 位整数，并将其作为浮点数读出。我也用来`__builtin_bswap32()`交换整数索引。我的 C 程序现在打印：

```
The database content is:
1 3.141593 Pi
2 12.345000 Secret Key
3 2.718282 The number E 
```

因此，请阅读每条记录，确保数据的字节序正确，并且您将拥有一个工作程序。

编辑：这里是显示我如何解决字节顺序问题的代码片段。

```
typedef union
{
    unsigned char buf[8];
    double d;
    int64_t i64;
    int32_t i32;
} U;

// then, inside of main():

   printf("\nThe database content is:\n");
   {  /* ------------------
         Read next record
         ------------------ */
      for (j = 0; j < n_fields; j++)
      {
        U u;
        read(fd, u.buf, 4);
        u.i32 = __builtin_bswap32(u.i32);
        i_buffer[j] = u.i32;
        read(fd, u.buf, 8);
        u.i64 = __builtin_bswap64(u.i64);
        d_buffer[j] = u.d;
        read(fd, c_buffer[j], 20);
      } 
```

我有点惊讶数据库是大端格式。任何使用 x86 系列处理器的计算机都是 little-endian。

你绝对不应该像我一样对这些数字（4、8、20）进行硬编码；您应该使用收到的元数据。我会把它留给你。

编辑：你也不应该打电话`__builtin_bswap32()`or `__builtin_bswap64()`。你应该打电话给`ntohl()`...我不确定 64 位是什么。但`ntohl()`便携；如果你在大端计算机上编译，它将跳过交换，如果你在小端计算机上编译，它会进行交换。

`ntohl()`编辑：我在 StackOverflow 上找到了等效于 64 位的解决方案。

[https://stackoverflow.com/a/4410728/166949](https://stackoverflow.com/a/4410728/166949)

如果您只关心 Linux，这很简单：`#include <arpa/inet.h>`您可以使用`#include <endian.h>`然后使用`be32toh()`and来代替使用`be64toh()`。

一旦你有了这个，你可以像这样读取数据库文件：

```
u.i64 = be64toh(u.i64); 
```

如果您在大端机器上编译上述代码，它将编译为无操作并读取大端值。如果您在 little-endian 机器上编译上述代码，它将编译为等效`__builtin_bswap64()`的字节并交换字节，以便正确读取 64 位值。

编辑：我在几个地方说过你需要做三个单独的读取：一个获取索引，一个获取浮点数，一个获取字符串。实际上，您可以声明 a`struct`并发出一次读取，该读取将在一次读取中提取所有数据。但是，棘手的部分是 C 编译器可能会在您的内部插入“填充”字节`struct`，这会导致 的字节结构与`struct`从文件中读取的记录的字节结构不完全匹配。C 编译器应该提供一种方法来控制对齐字节（一条`#pragma`语句），但我不想深入了解细节。对于这个简单的程序，只需阅读三遍即可解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T01:39:26.250

为了获得你想要的结果，我建议更换

```
int  d_buffer[10]; 
```

和：

```
double d_buffer[10]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T02:26:36.593

为什么假设您从 db-description 读取的字段类型与 db-data 中的数据匹配？我肯定不会。至少您应该打印出这些字段类型并确认它们是您所期望的。

# c - 将二进制文件传递给erlang nif

> ID：11321331
> 
> 赞同：3
> 
> 时间：2012-07-04T01:26:04.177
> 
> 标签：c, erlang, erl, erlang-nif

我正在编写一些 Erlang 代码，它基本上接受来自 TCP 连接的一些二进制数据，然后使用 C nif 解密数据并返回解密后的数据。

问题是我似乎无法弄清楚如何修改传入的二进制文件。

这是我正在使用的功能。如果有人能指出我正确的方向，我将不胜感激。

```
static ERL_NIF_TERM decrypt(ErlNifEnv* env, ErlNifBinary *data); 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T01:26:43.827

您不能*修改*传递的二进制文件。您需要先*复制*并修改复制的二进制文件，然后将复制的（=修改的）二进制文件返回给调用者。

记住二进制文件是在共享堆中分配的；如果你覆盖原来的你会遇到麻烦，因为这违反了 Erlang 的单一分配原则。

有关详细信息，请参阅[在 sfmt-erlang NIF 代码中处理二进制参数的示例](https://github.com/jj1bdx/sfmt-erlang/blob/master/c_src/sfmt_nif.c#L497)。

# java - Java 扫描器/数组金字塔

> ID：11321333
> 
> 赞同：0
> 
> 时间：2012-07-04T01:26:06.647
> 
> 标签：java, arrays, loops, io

所以我试图建立一个增值金字塔。前任。第 1 行有 (5)，第 2 行有 (6,7) 第 3 行有 (12,10,7)。目标是添加第一行的最高值，下一行的最高连接子值。因此，在这种情况下，您将添加 5+7+10，结果为 22。您不能使用第 3 行中的 12 的原因是因为您必须使用上述数字的孩子（每个父母都有2 个孩子）。

我的方法是使用 Scanner 将 int 值逐行加载到数组中，并以某种方式索引前一行的最高子值的位置以将其添加到运行总数中。这是我到目前为止的代码......

//在数据文件中...

5

6 7

12 10 7

//就这样。

```
 public static void main(String[] args) {
    Scanner scanner = null;
    try {
        scanner = new Scanner(new File("/users/joe/desktop/data.txt"));
    } catch (FileNotFoundException e) {
        System.out.println("File not found.");
        e.printStackTrace();

    } //reads the file

    int[] a = new int[100]; //establishes new array with a max size of 100
    int i = 0; //placeholder for array position
    int result = 0;
    int total = 0;

    while(scanner.hasNextLine()){ //loops through line
        a[i++] = scanner.nextInt(); //adds int to array
        if(i == 0){ //does this belong here?
            result = a[0];
        }
        else{
            if(a[i-1] >= a[i+1]){
                result = a[i-1];
            }
            else if(a[i-1] <= a[i+1]){
                result = a[i+1];
            }
        }
    }
    total =  total + result;
    scanner.close();

    System.out.print(Arrays.toString(a));
    System.out.println("\n" + total);

    }
    } 
```

目前，这将打印出：[5,6,7,12,10,7,0,0,0,0,0,...最多 100 个位置]

5

如何让扫描仪读取一行，将其加载到数组中，循环，并从下一行的数组中保存最高的子值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T02:47:07.977

当我执行该代码时，我在读入所有数字后得到 NoSuchElementException。发生这种情况是因为您总是检查文件的下一行，但读取下一个整数。

代码中有太多的逻辑缺陷，很难一一评论。以下是您可以处理的一些内容：

您只需在循环之外添加总计 + 结果一次。您应该将其移动到循环内，以便正确计算总数

你计算结果不正确。至少，您应该有一个变量来指示最后一行上最高数字的位置。您还将 i -1 与 i+1 进行比较...当您到达最后一行时，这将不起作用，因为您将比较 i 两侧的项目而不是 i 下方的项目。

我建议将变量读入三角形二维数组。您可以通过为每一行创建另一个扫描仪来做到这一点；将每一行读入新的扫描仪；并轮询 nextInt()。然后，您可以比较 arr[row][pos] 和 arr[row][pos+1]，它们将是 arr[row-1][pos] 的子级。

一旦您可以将文件读入二维数组并从数组中打印出 int 以看起来就像文件内容一样，如果您仍然遇到问题，请回来，我可以为您提供更多帮助。

# asp.net - Web 应用程序在本地工作，但在部署服务器上不起作用

> ID：11321336
> 
> 赞同：3
> 
> 时间：2012-07-04T01:26:21.053
> 
> 标签：asp.net, nhibernate, deployment, iis-7, .net-assembly

我刚刚使用 MVC 3、NHibernate 和 Fluent NHibernate 完成了一个 Web 应用程序。所有参考资料均已使用包库下载。该应用程序在我的计算机上运行良好。我已经发布并上传了所有内容，包括所有 dll 到我在 godaddy 上的网络服务器。但是当我尝试访问它时，会出现以下错误：

无法加载文件或程序集“NHibernate，版本=3.2.0.4000，Culture=neutral，PublicKeyToken=aa95f207798dfdb4”或其依赖项之一。该模块应包含程序集清单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T05:24:01.627

出于某种原因，您能否尝试再次上传导致错误的 dll。我，最后也遇到了同样的问题。再次上传错误的dll后，它起作用了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T06:15:41.780

转到您的 IIS，找到您的 Web 应用程序的应用程序池，转到高级设置并将启用 32 位应用程序更改为 - true。

# nsstring - _cmd 的正确字符串说明符是什么？

> ID：11321340
> 
> 赞同：2
> 
> 时间：2012-07-04T01:26:34.703
> 
> 标签：nsstring, cmd, specifier

我为 _cmd 使用 %s，最新的 XCode 将生成错误“格式指定类型 char * 但参数的类型为 SEL”。检查文档，找不到线索。有人知道要使用的正确字符串说明符吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T06:12:13.073

我这辈子从来没有做过苹果编程，所以请耐心等待，但谷歌搜索一下很容易发现：

*   转换`SEL`为`NSString`使用[`NSStringFromSelector`](http://developer.apple.com/library/ios/documentation/cocoa/reference/foundation/Miscellaneous/Foundation_Functions/Reference/reference.html#//apple_ref/c/func/NSStringFromSelector)
*   然后使用`%@`格式说明符。

# linq - 将多个 LINQ 实体合并为一个实体，包括顶部相关记录

> ID：11321341
> 
> 赞同：0
> 
> 时间：2012-07-04T01:26:51.070
> 
> 标签：linq, entity-framework-4

我有 2 个名为 Person 和 Activity 的表。每个人可以有多个活动。

Person 中的字段是 PersonId、Name、Age。Activity中的字段有ActivityId、PersonId、Description、StartDate、EndDate、Flag

我创建了一个名为 PersonAndLatestActivity 的新实体，它具有来自 Person 和 Activity 的一些类似命名的字段。即PersonId、姓名、年龄、描述、开始日期、结束日期、标志

如何将每个人和他们的 LATEST 活动投影到 PersonAndLatestActivity 实体中？

我需要使用 LINQ for Entities 来实现这一点，因为我使用的是 EF4 Code First，即：-

```
public IQueryable<PersonAndLatestActivity> GetAllPeopleAndLatestActivityList()
{
    var result = (from x in db.People
        select new 
        {

        }                
    return result;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T07:23:53.353

我不确定您如何将其作为可查询的，但如果它有帮助，这就是我对对象的处理方式：

```
public IQueryable<PersonAndLatestActivity> GetAllPeopleAndLatestActivityList()
{
    List<PersonAndLatestActivity> list = new List<PersonAndLatestActivity>();
    foreach(person in db.People.ToList()){
        var act = db.Activity.Where(x=>x.PersonId == person.PersonId).OrderBy(x=>x.Date).Single();
        list.Add(new PersonAndLatestActivity{
            PersonId = person.PersonId,
            ActivityId = act.ActivityId,
            etc...
        });
    }
    return result;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T19:52:37.177

这是一种方法：

```
from p in db.People
from a in p.Activities.OrderByDescending(act => act.StartDate).Take(1)
select new PersonAndLatestActivity { p.PersonId, ..., a.StartDate, ... } 
```

假设有一个导航属性`p.Activities`，否则你应该使用连接。

# ios - 在哪里处理从 UIAlert 调用的带有 UIText 输入的 UIAlert 代码

> ID：11321343
> 
> 赞同：1
> 
> 时间：2012-07-04T01:26:59.500
> 
> 标签：ios, xcode, nested, uialertview, popover

我有一个带有 3 个按钮的 Popover。

其中一个按钮链接到 IBAction 方法，该方法显示 UIAlert 对话框`setAlertViewStyle:UIAletViewStylePlainTextInput`，用于获取用户输入。

根据用户的输入，我想显示另一个 UIAlert 显示基于某些字典查找的正确或错误。

我的挑战是把第二个 UIAlert 代码放在哪里。我试过把它放进一个`alertView:willDismissWithButtonIndex`; 我也试过了`alertView:clickedButtonAtIndex`。在这两种情况下，虽然显示了第二个警报，但单击“确定”按钮后，会再次显示相同的警报……无限。

寻找有关如何避免此循环的建议；最好把这段代码放在哪里？

谢谢托尼。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T02:23:25.713

如果您使用 Popovers，我假设您正在 iPad 上开发？我建议您使用[UIActionSheet](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIActionSheet_Class/Reference/Reference.html)作为初始弹出框，而不是手动定义带有 3 个按钮的弹出框（除非您有一些图形需要这样做）。

使用 UIActionSheet，您可以在 UIActionSheet 委托中指定何时显示正确警报视图的逻辑。iPad 上的 UIActionSheets 默认显示在 Popovers 中，因此这也应该减少一些视图代码，并使 iOS 应用程序的体验更加标准。

如果您绝对必须有多个弹出窗口（这是 iOS 设计中的一般禁忌），上面提到的 Anthony 使用标签属性是正确的，然后关闭数字标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T01:40:01.620

`alertView:clickedButtonAtIndex:`将是正确的使用方法。您是否以某种方式区分 alertViews，例如`tag`属性？您可能正在运行正确`buttonIndex`但错误的代码`alertView`。

# c++ - 最容易使用连接器/接口来使用 MySQL / 其他带有 C++ 的数据库

> ID：11321346
> 
> 赞同：0
> 
> 时间：2012-07-04T01:27:19.920
> 
> 标签：c++, mysql, sql, visual-studio-2010

如果我在这里问一个重复的问题，我提前道歉，但是一起使用 SQL（现在正在尝试 MySQL，但我可以使用任何关系数据库）和 C++ 最简单的方法是什么？我尝试使用 MySQL++，即 MySQL C++ 连接器，但我现在得到的只是一堆链接器错误（我使用的是 Visual Studio 2010）。

我需要做的就是在连接到数据库后进行插入，所以我想知道是否有更简单的解决方案而不是处理所有这些库和驱动程序？我是 C++/Visual Studio 的新手，如果我听起来像个初学者，请原谅我……我希望我可以下载 JDBC 驱动程序 jar 文件并让一切正常……但遗憾的是，这不是 Java :(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T01:31:08.173

使用 ODBC，它是一个功能类似于 JDBC 的通用数据库 API 层：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms710252%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms710252%28v=vs.85%29.aspx)

您可以在此处获取 MySQL 5.1 的 ODBC 连接器：http: [//dev.mysql.com/downloads/connector/odbc/5.1.html](http://dev.mysql.com/downloads/connector/odbc/5.1.html)

Microsoft 在 Windows 上的 ODBC 实现允许您通过控制面板管理驱动程序（连接器）和数据源。

这里有一个很好的概述：http: [//bobobobo.wordpress.com/2009/07/11/working-with-odbc-from-c/](http://bobobobo.wordpress.com/2009/07/11/working-with-odbc-from-c/)

# javascript - Phonegap - 如何从 base64 字符串生成图像文件？

> ID：11321347
> 
> 赞同：6
> 
> 时间：2012-07-04T01:27:26.633
> 
> 标签：javascript, android, cordova, base64, phonegap-plugins

我正在为 Android 编写一个 phonegap 应用程序，有一次，我将一个 base64 PNG 字符串保存为一个文件。但是，我观察到该字符串只是被转储到文件中，并且在打开时不能被视为图像。

我希望能够保存从 base64 字符串生成的图像。这就是我所拥有的：

**Javascript（为 Phonegap 格式化）：**

```
/*** Saving The Pic ***/
var dataURL = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg=="; //A simple red dot

function gotFS(fileSystem) {
    fileSystem.root.getFile("dot.png", {create: true, exclusive: false}, gotFileEntry, fail);
}

function gotFileEntry(fileEntry) {  
    fileEntry.createWriter(gotFileWriter, fail);
}

function gotFileWriter(writer) {
    writer.write(dataURL); //does not open as image
}

function fail(error) {
    console.log(error.code);
} 
```

我尝试编辑代码以仅保存图像数据，但它也不起作用。（见下文）

```
function gotFileWriter(writer) {
     var justTheData = dataURL.replace(/^data:image\/(png|jpg);base64,/, "");//Removes everything up to ...'base64,'
     writer.write(justTheData); //also does not show
 } 
```

**触发一切的 HTML：**

```
<p onclick="window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, gotFS, fail)">Save a Dot</p> 
```

请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T01:52:43.767

您只需要将图像的 src 设置为 base 64 数据即可查看图像。

```
var image = document.getElementById('myImage');
image.src = "data:image/jpeg;base64," + justTheData; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-08T07:05:14.677

这里不需要替换base64字符串，只需通过以下设置转换字符串：

**在 JavaScript 中：**

```
var image = document.getElementById('myImage');
image.src = justTheData;// this convert data 
```

**在jQuery中：**

```
$("#imageid").attr("src",justTheData) 
```

# sharepoint-2010 - 如何在 SharePoint 布局页面上实现无限滚动？

> ID：11321348
> 
> 赞同：3
> 
> 时间：2012-07-04T01:27:27.390
> 
> 标签：sharepoint-2010, infinite-scroll, layout-page

我尝试在 Microsoft SharePoint Server 2010 的布局页面上实现无限滚动，但未能实现。我的猜测是 $(window).scroll 或 $(window).bind('scroll') 不适用于布局页面，我该如何实现呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T10:48:59.290

要在 sharepoint 中实现无限滚动，您需要自定义母版页搜索母版页中的以下行并进行评论

```
var _fV4UI = true; 
```

对于身体标签，使用 make scrolling="yes"

你需要操纵一些 css 。

# android - 在 SQLite 数据库中加入 3 个表

> ID：11321354
> 
> 赞同：29
> 
> 时间：2012-07-04T01:28:29.853
> 
> 标签：android, sql, database, sqlite, join

我在 SQLite 数据库中有 3 个表：

**歌曲：**

```
_id | name | length | artist_id (foreign key) | album_id (foreign key) 
```

**艺术家：**

```
_id | name 
```

**专辑：**

```
_id | name 
```

我需要一个由以下列组成的表的查询（在 Android 应用程序中使用）：

```
_id | name | length | artist_id | artist_name | album_id | album_name 
```

但是，我编写了以下查询语句：

```
SELECT Songs._id, Songs.name, Songs.length, Songs.artist_id, Artists.name, Songs.album_id, Albums.name FROM Songs, Artists, Albums WHERE Songs.artist_id = Artists._id AND Songs.album_id = Albums._id 
```

但它给了我一张空桌子。我尝试`OR`了而不是`AND`它给出了不正确的结果（每张专辑中的每首歌都重复，尽管艺术家是正确的）。如何修复我的查询语句以将 3 个表连接到一个表中？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-07-04T01:32:24.260

使用显式`JOIN`而不是隐式，以下应该得到你想要的，尽管奇怪的是你的隐式连接语法首先没有返回正确的结果。我已经使用`LEFT JOIN`, 来说明没有关联艺术家或专辑的歌曲，但这对于您的数据集可能不是必需的，`INNER JOIN`可以使用 an 来代替。

我还添加了列别名以消除获取行时的歧义，因为在大多数表中都有相似的列名 ( `id, name`)。

```
SELECT
  Songs._id AS song_id,
  Songs.name AS song_name, 
  Songs.length, 
  Songs.artist_id AS artist_id, 
  Artists.name AS artist_name, 
  Songs.album_id AS album_id, 
  Albums.name AS album_name
FROM 
 Songs 
 LEFT JOIN Artists ON Songs.artist_id = Artists._id
 LEFT JOIN Albums ON Songs.album_id = Albums._id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-06T14:26:37.350

试试这个选择，可能`Artists`比其他人更重要，所以从`Songs`低谷`Artists`到`Albums`从`Songs`。

```
SELECT
  Songs._id AS song_id,
  Songs.name AS song_name, 
  Songs.length, 
  Songs.artist_id AS artist_id, 
  Artists.name AS artist_name, 
  Songs.album_id AS album_id, 
  Albums.name AS album_name
FROM 
 Artists
 LEFT JOIN Songs ON Songs.artist_id = Artists._id
 LEFT JOIN Albums ON Songs.album_id = Albums._id 
```

此外，如果没有`Songs`属于特定艺术家的条目或没有`Albums`属于特定歌曲的条目，您仍然可以获得艺术家条目，这要归功于`LEFT JOIN`. 如果您只想返回带有歌曲和专辑的艺术家，请`JOIN`改用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T01:39:42.257

试试 sql 内连接

```
 inner join Artists on Songs.artist_id = Artists._id 
```

# python - Python - 哎呀 - 当我有 2.7 时安装了 Python2.6 - 现在默认是 2.6 - 想要 2.7

> ID：11321359
> 
> 赞同：1
> 
> 时间：2012-07-04T01:29:40.303
> 
> 标签：python, linux

我在 ubuntu 11.10。我安装了 python2.6 因为我必须在 virtualenv 中工作。

在命令行上，当我启动python时，默认是python2.6。

```
which python
/usr/local/bin/python

Python 2.6.8 (unknown, Jul  4 2012, 09:17:51) 
[GCC 4.5.2] on linux2
Type "help", "copyright", "credits" or "license" for more information. 
```

我如何改回默认的python2.7？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T01:43:14.577

在这个地方检查python：

```
/usr/bin/python 
```

它应该是你原来的 python 2.7，或者你可以通过以下方式找到 python2.7：

```
ls /usr/bin | grep python 
```

# javascript - 如何在不打开新窗口的情况下在单页应用中进行 Dropbox 身份验证？

> ID：11321361
> 
> 赞同：8
> 
> 时间：2012-07-04T01:29:48.130
> 
> 标签：javascript, linkedin, dropbox-api, singlepage

我有一个与 Dropbox 和 LinkedIn 等其他服务集成的单页应用程序。例如，Dropbox 有很好的 API，我通过在另一个窗口中打开 Dropbox 的身份验证链接来进行身份验证。用户进行身份验证后，我要求他们关闭该新窗口以返回我的应用程序。

显然，这是次优的，因为它使用户远离我的应用程序，而且在平板电脑上更加麻烦。

我将如何在应用程序中进行身份验证，例如在灯箱或模式形式中？

请注意，集成本身发生在服务器端而不是客户端。目前，Dropbox 身份验证页面有一个回调页面，向我的服务器发出身份验证成功的信号，我将其存储在数据库中的用户表中以备将来使用。

**注意：**赏金评论应为：非常需要代码示例，但**不是**必需的。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-31T14:00:39.037

你提议的是打败安全模型，所以它应该是不可能的。用户应该能够看到真实页面的 URL 以进行验证。想象一下，当您使用 Paypal 付款时，您可能会在输入重要数据之前检查您是否在 paypal.com 上？这同样适用于所有其他应用程序。这是一个非常丑陋的流程，但该行业今天提出了最好的流程。

理想的流程是您将用户重定向到第三方网站或应用程序，用户登录并授权，然后重定向回您。原生应用程序具有切换到另一个原生应用程序的好处，因此流程不那么难看。

解决这个问题的方法是让应用程序向 3rd 方服务询问用户名和密码，然后自己在幕后进行身份验证。这可能会阻止用户使用您的应用，并且非常危险。我不推荐它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-29T19:17:57.427

您可以在网页的 iframe 中加载*授权端点*。但是，请注意，某些浏览器在 iFrame 中对发送到登录提供程序的 cookie 有限制。通常（Safari、iOS）您只有对 cookie 的读取访问权限，如果会话 cookie 已在提供程序处设置，这就足够了。

在您的回调页面上 - 您在身份验证后从保管箱发回；您将需要调用 javascript 函数来触发父页面上的事件，即完成身份验证。

```
window.parent.AppController.authenticationComplete(); 
```

然后父母可以删除*iframe*，并继续进行身份验证。

```
authenticationCompleted = function() {
     // [snipp]
     $("iframe#loginwrapper").remove();
} 
```

* * *

由于潜在的 cookie 问题，我建议您在提供主 HTML 页面之前执行从服务器端启动的所有身份验证步骤。然后，您将确保您的应用没有加载两次。这是许多身份验证/身份中间件软件解决方案的典型行为。

* * *

当您提到*应用程序*时，不清楚您是指纯 WebApp，还是通过使用 Phonegap 等框架在混合应用程序中提供控制。使用 Phonegap 或类似软件，您可以在应用程序内的浏览器中加载浏览器 - 在这种情况下，ChildBrowser 不受相同 cookie 限制的限制。

我最近写了一篇关于如何使用 Phonegap 和 Childbrowser for iOS 进行这项工作的教程。

*   [使用 ChildBrowser 和 JSO 的 Phonegap 的 OAuth 2.0 指南](https://github.com/andreassolberg/jso/blob/master/README-Phonegap.md)

请注意，本教程使用的 OAuth 2.0 与 OAuth 1.0 略有不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T19:52:51.860

如果您的应用程序是 Web 应用程序，简化流程的最佳方法是将当前页面（例如，[如何在 JavaScript/jQuery 中重定向到另一个网页？](https://stackoverflow.com/questions/503093/how-can-i-make-a-redirect-page-in-jquery-javascript)）重定向到 Dropbox 上的 /authorize 页面，并使用 oauth_callback 到在您的应用程序上显示该过程已完成的页面。

这样流程就是：

1.  （在您的应用程序上）用户单击按钮以启动 OAuth 流程
2.  （您的应用重定向到 Dropbox 授权页面）用户授权应用
3.  （Dropbox 将每个 oauth_callback 重定向到您的应用程序）应用程序获取访问令牌并准备好使用集成

这一切都发生在一个页面内，无需关闭/打开额外的窗口。

# java - Eclipse JDT 搜索引擎的替代或改进

> ID：11321363
> 
> 赞同：2
> 
> 时间：2012-07-04T01:30:28.473
> 
> 标签：java, eclipse, search, eclipse-jdt

我正在寻找一种方法来改进 Eclipse 的 SearchEngine 类的运行时间，或者另一种可以替代它的搜索技术。目前我正在搜索给定项目源文件中所有方法的所有引用。这种技术对于较小的项目运行良好，但运行时间呈指数增长，在超过几 MB 的项目上变得毫无用处。

我用来查找方法引用的当前代码是：

```
public void processProject(IJavaProject javaProject) throws JavaModelException{
    initializeEngine(javaProject);
    for(IPackageFragment pkg : javaProject.getPackageFragments()){
        if(pkg.getKind() == IPackageFragmentRoot.K_SOURCE){
            for(ICompilationUnit unit : pkg.getCompilationUnits()){
                System.out.println("Unit: " + unit.getElementName());
                for(IType type : unit.getTypes()){
                    for(IMethod method : type.getMethods()){
                        //getReferenceMatches(method, javaProject);
                        searchFor(method);
                    }
                }
            }
        }
    }
}
public void initializeEngine(IJavaProject searchIn) throws JavaModelException{
    ArrayList<IPackageFragmentRoot> roots = new ArrayList<IPackageFragmentRoot>();
    for(IPackageFragmentRoot root : searchIn.getPackageFragmentRoots()){
        if(root.getKind() == IPackageFragmentRoot.K_SOURCE)
            roots.add(root);
    }
    IJavaElement[] elems = new IJavaElement[roots.size()];
    elems =  roots.toArray(elems);

    scope = SearchEngine.createJavaSearchScope(elems);

    engine = new SearchEngine();
    participants = new SearchParticipant[]{SearchEngine.getDefaultSearchParticipant()};

}
//search for methods, or other element type
public void searchFor(IJavaElement elem){
    requestor = new SimpleRequestor();
    pattern = SearchPattern.createPattern(elem, IJavaSearchConstants.REFERENCES);
    try{
        engine.search(pattern, participants, scope, requestor, null);
    }catch(CoreException e){
        e.printStackTrace();
    }
}
class SimpleRequestor extends SearchRequestor{
private ArrayList<SearchMatch> matches;

public SimpleRequestor(){
    super();
    matches = new ArrayList<SearchMatch>();
}
@Override
public void acceptSearchMatch(SearchMatch match) throws CoreException {
    if(match.getAccuracy() == SearchMatch.A_ACCURATE);
        matches.add(match);
}

public ArrayList<SearchMatch> getMatches(){
    return matches;
}

} 
```

范围、引擎、模式、参与者和请求者都是全局变量。

我目前没有保存结果，因为现在我担心的是搜索的运行时间。直接扫描（遍历每个源文件并保存所有参考实例）会更快吗？有没有办法提升搜索引擎？

似乎我使用内置的 Eclipse 搜索（右键单击方法->引用->项目）工作得非常快，而不是这个程序版本，但我可能错了。任何帮助表示赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T04:12:39.110

不要认为 SearchEngine 旨在搜索所有方法的所有引用。我怀疑您的代码有效地多次遍历相同的源文件。

内置搜索工作得更快可能是因为您在那里只搜索一种方法的引用。

这里捕获了一些关于 SearchEngine 内部的细节 - [http://wiki.eclipse.org/JDT_Core_Programmer_Guide#Search_Engine](http://wiki.eclipse.org/JDT_Core_Programmer_Guide#Search_Engine) - 这可能会让您对正在发生的事情有所了解。

# c++ - C++ 中的正则表达式

> ID：11321366
> 
> 赞同：0
> 
> 时间：2012-07-04T01:31:12.950
> 
> 标签：c++, regex, boost-regex

现在我有两个正则表达式可以做到这一点：

```
Regex-1 = "(\\{(\\w+)\\})";
Regex-2 = "(\\{([^\\|]*)\\|([^\\|]*)\\|([^\\|]*)\\})"; 
```

我只是希望能够将两个正则表达式组合成一个，这样正则表达式首先搜索的就是匹配项。

从概念上讲，我在想 regex-1 || 正则表达式-2。有可能将它们结合起来吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T01:34:09.107

你的意思是这样吗？

```
Regex-1_2 = "(\\{(\\w+)\\})|(\\{([^\\|]*)\\|([^\\|]*)\\|([^\\|]*)\\})"; 
```

编辑：

那么，像这样的事情？

```
{(((\w+)|({\w+}))\|?)*} 
```

编辑2：

你最后的评论有帮助。所以，从头到尾工作。你知道你想匹配一个左大括号，所以这部分很简单：

```
{ 
```

现在，在第一个大括号之后，有两个选项。要么有一个或多个字母数字（或下划线）字符，要么有三组零个或多个字符，用竖线分隔。前两组必须是非管道字符，而最后一组必须是非花括号字符（因为花括号将关闭表达式）。这可以使用交替构造来表示：

```
{(\w+|[^|]*\|[^|]*\|[^}]*) 
```

最后，表达式以大括号结束：

```
{(\w+|[^|]*\|[^|]*\|[^}]*)} 
```

这适用于您提供的示例。如果您的规则不同或更具体，则需要说明。

# jquery - jQuery toggle() 函数：切换相关img src

> ID：11321369
> 
> 赞同：0
> 
> 时间：2012-07-04T01:31:30.537
> 
> 标签：jquery, jquery-ui

这让我发疯了......我有一个 javascript 函数，它可以切换我使用 HTML5 技术传入的元素的可见性。我想交换触发锚元素内的 img 标签显示的图像，使其与展开或折叠元素的状态相对应。

我正在使用以下代码：

```
 $('a.expand-collapse').click(function () {
    var targetID = $(this).attr('data-expcoltarget');
    var target = $('div#' + targetID);
    debugger;

    target.toggle('blind');

    if (target.is(':visible')) imgSrc = contentRoot + 'images/collapse.gif';
    else imgSrc = contentRoot + 'images/expand.gif'; 

    $(this).find('img').first().attr('src', imgSrc);
}); 
```

不幸的是，无论目标元素的可见性状态如何， target.is(':visible') >>always<< 返回 true。

我错过了什么？

编辑：

感谢您愿意查看标记，但事实证明没有必要找到解决方案。

至于 'data-expcoltarget' 是什么，这是一种 HTML5 技术，用于为元素分配任意值。任何带有后缀 data- 的东西都会被解析器忽略。

在这种情况下，我使用该技术将相当于参数的内容传递给 javascript 函数。之所以有效，是因为 $(this) 指向触发事件的元素，因此我可以检查其属性以查找参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T02:07:47.240

问题是您`.toggle()`使用`'blind'`参数调用，这意味着它用作动画方法。动画是异步发生的，直到您的点击处理程序的其余部分完成后才会完成。

如果您`.toggle()`不带参数调用，则切换将立即进行（无动画），因此您的其余代码将起作用。

如果要保留动画，解决此问题的一种方法是将图像更改代码移动到`.toggle()`函数的完整回调中：

```
$('a.expand-collapse').click(function () {
    var $this = $(this),
        targetID = $this.attr('data-expcoltarget'),
        target = $('#' + targetID);

    target.toggle('blind', function() {
       if (target.is(':visible'))
          imgSrc = contentRoot + 'images/collapse.gif';
       else
          imgSrc = contentRoot + 'images/expand.gif'; 

       $this.find('img').first().attr('src', imgSrc);
    });
}); 
```

（请注意，回调函数内部`this`是被切换的元素，因此您需要保留`$(this)`来自外部的引用，以便它引用锚点。）

我可能会进一步“简化”到：

```
$('a.expand-collapse').click(function () {
    var $this = $(this),
        targetID = $this.attr('data-expcoltarget'),
        target = $('#' + targetID);

    target.toggle('blind', function() {
       $this.find('img').first().attr('src',
           contentRoot + (target.is(':visible') ? 'images/collapse.gif'
                                                : 'images/expand.gif'));
    });
}); 
```

# python - Python - Mutliprocess，类的成员函数

> ID：11321370
> 
> 赞同：1
> 
> 时间：2012-07-04T01:31:32.283
> 
> 标签：python, class, multiprocessing, encapsulation

我不知道这是因为我，还是因为 Python2.7 的多处理模块。谁能弄清楚为什么这不起作用？

```
from multiprocessing import pool as mp
class encapsulation:
   def __init__(self):
       self.member_dict = {}
   def update_dict(self,index,value):
       self.member_dict[index] = value
encaps = encapsulation()
def method(argument):
   encaps.update_dict(argument,argument)
   print encaps.member_dict
p = mp() #sets up multiprocess pool of processors
p.map(method,sys.argv[1:]) #method is the function, sys.argv is the list of arguments to multiprocess
print encaps.member_dict
>>>{argument:argument}
>>>{} 
```

所以我的问题只是关于成员变量。我的理解是类封装应该在函数内部和外部保存这个字典。即使我只初始化过一次，为什么它会重置并给我一个空字典？请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T01:46:04.717

即使您封装了对象，多处理模块最终也会在每个进程中使用该对象的本地副本，并且永远不会真正将您的更改传播回给您。在这种情况下，您没有正确使用 Pool.map，因为它希望每个方法调用都返回一个结果，然后将其发送回您的返回值。如果您想要影响共享对象，那么您需要一个管理器，它将协调共享内存：

## 封装共享对象

```
from multiprocessing import Pool 
from multiprocessing import Manager
import sys

class encapsulation:
   def __init__(self):
       self.member_dict = {}
   def update_dict(self,index,value):
       self.member_dict[index] = value

encaps = encapsulation()

def method(argument):
   encaps.update_dict(argument,argument)
   # print encaps.member_dict       

manager = Manager()
encaps.member_dict = manager.dict()

p = Pool()
p.map(method,sys.argv[1:])

print encaps.member_dict 
```

**输出**

```
$ python mp.py a b c
{'a': 'a', 'c': 'c', 'b': 'b'} 
```

我建议不要真正将共享对象设置为成员属性，而是作为 arg 传入，或者封装共享对象本身，然后将其值传递给您的 dict。共享对象不能持久保存。它需要清空和丢弃：

```
# copy the values to a reg dict
encaps.member_dict = encaps.member_dict.copy() 
```

但这可能会更好：

```
class encapsulation:
   def __init__(self):
       self.member_dict = {}
   # normal dict update
   def update_dict(self,d):
       self.member_dict.update(d)

encaps = encapsulation()

manager = Manager()
results_dict = manager.dict()

# pass in the shared object only
def method(argument):
   results_dict[argument] = argument    

p = Pool()
p.map(method,sys.argv[1:])

encaps.update_dict(results_dict) 
```

## 按预期使用 pool.map

如果您使用地图返回值，它可能如下所示：

```
def method(argument):
   encaps.update_dict(argument,argument)
   return encaps.member_dict

p = Pool()
results = p.map(method,sys.argv[1:]) 
print results
# [{'a': 'a'}, {'b': 'b'}, {'c': 'c'}] 
```

您需要再次将结果合并到您的 dict 中：

```
for result in results:
    encaps.member_dict.update(result)
print encaps.member_dict
# {'a': 'a', 'c': 'c', 'b': 'b'} 
```

# php - 类似文字 php mysql

> ID：11321376
> 
> 赞同：1
> 
> 时间：2012-07-04T01:32:43.297
> 
> 标签：php, mysql, foreach

我有以下代码，当我搜索一个词时，它会告诉我你的意思。问题是如果我输入“clin”我希望它返回临床但它返回“重新安排”

```
$my_word = $_POST['value'];
$bestMatch = array('word' = > $my_word, 'match' = > 2);
$result = mysql_query("SELECT keyword FROM athena");
$storeArray = Array();
while ($row = mysql_fetch_array($result, MYSQL_ASSOC)) {
    similar_text($row['keyword'], $my_word, $percent);
    if ($percent > $bestMatch['match'])
       $bestMatch = array('word' = > $row['keyword'], 'match' = > $percent);
}
if ($bestMatch['match'] < 70)
   echo 'Did you mean: <strong>'.$bestMatch['word'].'</strong>'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T02:05:08.340

我不熟悉`similar_word()`PHP，但您也可以尝试以下方法：

[http://www.php.net/manual/en/function.levenshtein.php](http://www.php.net/manual/en/function.levenshtein.php) 这是一种流行的算法，用于执行您想要的搜索类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T02:38:46.010

我刚刚用一小部分测试条目尝试了你的代码，它运行良好。也许您从查询中得到奇怪的结果？这是代码：

```
$my_word = $_REQUEST['value'];
$bestMatch = array('word' => $my_word, 'match' => 2);
$result = array("exam", "clinicals", "templates", "reschedule", "crafting", "php", "answer");
$storeArray = Array();
foreach ($result as $keyword) {
    similar_text($keyword, $my_word, $percent);
    if ($percent > $bestMatch['match'])
       $bestMatch = array('word' => $keyword, 'match' => $percent);
}
if ($bestMatch['match'] < 70)
   echo 'Did you mean: <strong>'.$bestMatch['word'].'</strong> p:'.$bestMatch['match']; 
```

无论如何`similar_text()`，这可能不是正确的功能，因为它通常会在**短字符串/单词**上产生误导性结果。

正如已经指出的那样，您应该将`levenshtein()`其用于此类任务。它计算必须进行多少更改才能匹配单词，其中删除、添加和更改字符是一种更改。您可以（并且在这种情况下应该）**修改更改为 2 的成本**，以使用短字符串获得更好的结果。

levenshtein 函数在性能方面的成本低于similar_text，但它不会以百分比返回结果！

**levenshtein**方法的代码：

```
$my_word = $_REQUEST['value'];
$bestMatch = array('word' => $my_word, 'match' => 2);
$result = array("exam", "clinicals", "templates", "reschedule", "crafting", "php", "answer");
$storeArray = Array();
foreach ($result as $keyword) {
    $lev = levenshtein ($keyword, $my_word, 1, 2, 1);
    if (!isset($lowest) || $lev < $lowest) {
       $bestMatch = array('word' => $keyword, 'match' => $lev);
       $lowest = $lev;
    }
}
if ($bestMatch['match'] > 0)
   echo 'Did you mean: <strong>'.$bestMatch['word'].'</strong> l:'.$bestMatch['match']; 
```

# xmpp - 在 ejabberd 中自动将匿名用户的角色设置为访问者？

> ID：11321378
> 
> 赞同：3
> 
> 时间：2012-07-04T01:32:45.647
> 
> 标签：xmpp, ejabberd, anonymous, multiuserchat

我正在开发一个使用 XMPP 和 moc_muc 具有群聊功能的项目，其中只有注册用户可以发送消息（而匿名用户只能读取但不能写入）。我正在使用 ejabberd，支持 SASL 匿名（注册用户使用自定义外部脚本进行身份验证）。

我现在唯一能想到的方法是为两种类型的用户使用 2 个不同的主机，并编写一个组件来根据他/她的主机在用户加入房间时根据他/她的主机设置用户的角色。这可能有效，但对于看似微不足道的问题似乎是一种相当复杂的方法。我对 XMPP 和所有规范/模块/组件了解不多，所以我可能错过了一些明显的东西。我将不胜感激任何指针！

谢谢一堆

# jquery-ui-tabs - 如何将 .live() 连接到 jquery ui tabs`s div

> ID：11321382
> 
> 赞同：1
> 
> 时间：2012-07-04T01:33:18.367
> 
> 标签：jquery-ui-tabs, jquery

我使用 jQuery UI 选项卡（）。我这样编写代码。首先，我使用 for(){} 制作了标签。我将 .live() 连接到标签`div. But the problem is that only first tab`的点击事件正在运行，其他标签的点击事件不起作用。如何连接 .live() 或 .bind()？请帮帮我。 **HTML 代码**

```
<div class="MYTABS" id="tabs">
        <ul>
            <% for(int i=0, n=scheduleList.size();i<n;i++){%>
                <li><a href="#fragment<%=i%>"><span><%=scheduleList.get(i).getName()%></span></a></li>
            <%}%>
        </ul>

        <% for(int i=0, n=scheduleList.size();i<n;i++){%>
            <div class="TABCONTENT" id="fragment<%=i%>"><%=scheduleList.get(i).getName()%>
                <div class="OFFTIME"><span>CURRENT TIME : </span><%=scheduleList.get(i).getOffTime()%></div>
                <div class="PLUS"><img id="year_Plus" src="../img/schedule/date_plus.png"/></div>
                <div class="TIME"><img src="../img/schedule/date_middle.png"/></div>
                <div class="MINUS"><img id="year_Minus" src="../img/schedule/date_minus.png"/></div>
                <img class="AMPM" id="am" src="../img/schedule/date_am.png"  onclick="toggleAmPm(this.id);"/>
                <img class="SETBTN" src="../img/schedule/btn_set.png" onclick="saveOffTime();"/>

                <div class="TIMETEXT" id="yearText" ><%=yyYear%></div>
                <div class="TIMETEXT" id="monthText"><%=zeroMonth %></div>
                <div class="TIMETEXT" id="dayText"><%=zeroDay %></div>
                <div class="TIMETEXT" id="hourText"><%=zeroHour %></div>
                <div class="TIMETEXT" id="minuteText"><%=zeroMinute %></div>
            </div>
        <%}%>
    </div> 
```

**JavaScript 代码**

```
// make tabs
var tabOption = {
    select: function(event, ui){
          //alert("");
     }
};
var usageTabs = jQuery("#tabs").tabs(tabOption);

// click event
jQuery(".PLUS>img, .MINUS>img").on("click", function(){
    var clickedTime = this.id.split("_");

    // plus and minus
    var timeText = jQuery("#"+clickedTime[0]+"Text");
    var calcTime = "";
    if(clickedTime[1] === "Plus"){
        calcTime = parseInt(timeText.text(),10) + 1 ;
    }else{
        calcTime = parseInt(timeText.text(),10) - 1 ;
    }

    jQuery(timeText.text(calcTime));
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T02:15:18.073

在#main 之后加载#second :)

```
$(function() {
    $( "#main" ).tabs({
        ajaxOptions: {
            success: function( xhr, status ) {
                $("#second").tabs();
            }

        }
    });

}); 
```

# java - 如何在 Java Swing 中创建圆角 BevelBorder？

> ID：11321383
> 
> 赞同：4
> 
> 时间：2012-07-04T01:33:20.447
> 
> 标签：java, swing, border

我想使用斜角边框，因为它有点 3D，但我不知道如何创建圆角 BevelBorder。

SoftBevelBorder 不起作用，因为圆角半径太小。如何让边角更圆？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T14:03:37.577

这里有一个圆形边框的示例，您可以在其中调整半径：

[http://java-swing-tips.blogspot.co.at/2012/03/rounded-border-for-jtextfield.html](http://java-swing-tips.blogspot.co.at/2012/03/rounded-border-for-jtextfield.html)

不是斜面，但是你可以在SoftBevelBorder的源码中看到如何实现“斜面”。如果你能做到，我会对代码感兴趣:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-15T14:59:06.667

为了获得正确的边框形状，您需要覆盖该[`AbstractBorder.paintBorder(...)`](https://docs.oracle.com/javase/8/docs/api/javax/swing/border/AbstractBorder.html#paintBorder-java.awt.Component-java.awt.Graphics-int-int-int-int-)方法。当您这样做时，您可以将与此类似的代码添加到方法中。

```
super.paintBorder(c, g, x, y, width, height);

Graphics2D g2d = (Graphics2D) g;
g2d.setRenderingHints(new RenderingHints(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON));

Shape clip = g2d.getClip();
Area rect = new Area(clip);
rect.subtract(new Area(new RoundRectangle2D.Double(x, y, width, height, radii, radii)));
g2d.setClip(rect);
g2d.setColor(c.getParent().getBackground());
g2d.fillRect(0, 0, width, height);
g2d.setClip(clip);
g2d.draw(rect); 
```

现在有两种主要方法可以在边界周围绘制斜角效果，但取决于您希望斜角的复杂程度，取决于您使用哪种方式。对于使用 2 种颜色的简单斜角边框，您可以使用与此类似的东西。

```
g2d.setColor(inner); //Inner Rectangle
g2d.draw(new RoundRectangle2D.Double(x + 1, y + 1, width - 2, height - 2, radii, radii));

g2d.setColor(outer); //Outer Rectangle
g2d.draw(new RoundRectangle2D.Double(x, y, width - 2, height - 2, radii, radii)); 
```

但是，如果您想使用更复杂的斜角边框，它使用 4 种不同颜色，则需要查看[`javax.swing.border.BevelBorder`](http://docs.oracle.com/javase/8/docs/api/javax/swing/border/BevelBorder.html). 这将告诉您您需要一段与此类似的代码。

```
double offset = radii / 2;
//Outer
g2d.setColor(outerH);
g2d.draw(new Line2D.Double(0, offset, 0, height - 2 - offset)); //Left
g2d.draw(new Line2D.Double(1 + offset, 0, width - 2 - offset, 0)); //Top
g2d.draw(new Arc2D.Double(width - radii - 1, 0, radii, radii, 0, 90, Arc2D.OPEN)); //Top Right
g2d.draw(new Arc2D.Double(0, 0, radii, radii, 90, 90, Arc2D.OPEN)); //Top Left

//Inner
g2d.setColor(innerH);
g2d.draw(new Line2D.Double(1, 1 + offset, 1, height - 3 - offset)); //Left
g2d.draw(new Line2D.Double(2 + offset, 1, width - 3 - offset, 1)); //Top
g2d.draw(new Arc2D.Double(width - radii - 2, 1, radii, radii, 0, 90, Arc2D.OPEN)); //Top Right
g2d.draw(new Arc2D.Double(1, 1, radii, radii, 90, 90, Arc2D.OPEN)); //Top Left

//Outer
g2d.setColor(outer);
g2d.draw(new Line2D.Double(offset, height - 1, width - 1 - offset, height - 1)); //Bottom
g2d.draw(new Line2D.Double(width - 1, offset, width - 1, height - 2 - offset)); //Right
g2d.draw(new Arc2D.Double(width - radii - 1, height - radii - 1, radii, radii, 270, 90, Arc2D.OPEN)); //Bottom Right
g2d.draw(new Arc2D.Double(0, height - radii - 1, radii, radii, 180, 90, Arc2D.OPEN)); //Bottom Left

//Inner
g2d.setColor(inner);
g2d.draw(new Line2D.Double(1 + offset, height - 2, width - 2 - offset, height - 2)); //Bottom
g2d.draw(new Line2D.Double(width - 2, 1 + offset, width - 2, height - 3 - offset)); //Right
g2d.draw(new Arc2D.Double(width - radii - 2, height - radii - 2, radii, radii, 270, 90, Arc2D.OPEN)); //Bottom Right
g2d.draw(new Arc2D.Double(1, height - radii - 2, radii, radii, 180, 90, Arc2D.OPEN)); //Bottom Left 
```

如果颜色在拐角处停止一半很重要，您也可以使用以下代码。

```
double offset = radii / 2;
//Outer
g2d.setColor(outerH);
g2d.draw(new Line2D.Double(0, offset, 0, height - 2 - offset)); //Left
g2d.draw(new Line2D.Double(1 + offset, 0, width - 2 - offset, 0)); //Top
g2d.draw(new Arc2D.Double(width - radii - 1, 0, radii, radii, 45, 45, Arc2D.OPEN)); //Top Right P1
g2d.draw(new Arc2D.Double(0, 0, radii, radii, 90, 90, Arc2D.OPEN)); //Top Left
g2d.draw(new Arc2D.Double(0, height - radii - 1, radii, radii, 180, 45, Arc2D.OPEN)); //Bottom Left P1

//Inner
g2d.setColor(innerH);
g2d.draw(new Line2D.Double(1, 1 + offset, 1, height - 3 - offset)); //Left
g2d.draw(new Line2D.Double(2 + offset, 1, width - 3 - offset, 1)); //Top
g2d.draw(new Arc2D.Double(width - radii - 2, 1, radii, radii, 45, 45, Arc2D.OPEN)); //Top Right P1
g2d.draw(new Arc2D.Double(1, 1, radii, radii, 90, 90, Arc2D.OPEN)); //Top Left
g2d.draw(new Arc2D.Double(1, height - radii - 2, radii, radii, 180, 45, Arc2D.OPEN)); //Bottom Left P1

//Outer
g2d.setColor(outerS);
g2d.draw(new Line2D.Double(offset, height - 1, width - 1 - offset, height - 1)); //Bottom
g2d.draw(new Line2D.Double(width - 1, offset, width - 1, height - 2 - offset)); //Right
g2d.draw(new Arc2D.Double(width - radii - 1, 0, radii, radii, 0, 45, Arc2D.OPEN)); //Top Right P2
g2d.draw(new Arc2D.Double(width - radii - 1, height - radii - 1, radii, radii, 270, 90, Arc2D.OPEN)); //Bottom Right
g2d.draw(new Arc2D.Double(0, height - radii - 1, radii, radii, 225, 45, Arc2D.OPEN)); //Bottom Left P2

//Inner
g2d.setColor(innerS);
g2d.draw(new Line2D.Double(1 + offset, height - 2, width - 2 - offset, height - 2)); //Bottom
g2d.draw(new Line2D.Double(width - 2, 1 + offset, width - 2, height - 3 - offset)); //Right
g2d.draw(new Arc2D.Double(width - radii - 2, 1, radii, radii, 0, 45, Arc2D.OPEN)); //Top Right P2
g2d.draw(new Arc2D.Double(width - radii - 2, height - radii - 2, radii, radii, 270, 90, Arc2D.OPEN)); //Bottom Right
g2d.draw(new Arc2D.Double(1, height - radii - 2, radii, radii, 225, 45, Arc2D.OPEN)); //Bottom Left P2 
```

当我们把所有这些放在一起时，你会得到一个看起来像这样的类。

```
import java.awt.Color;
import java.awt.Component;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Insets;
import java.awt.RenderingHints;
import java.awt.Shape;
import java.awt.geom.Arc2D;
import java.awt.geom.Area;
import java.awt.geom.Line2D;
import java.awt.geom.RoundRectangle2D;

import javax.swing.border.AbstractBorder;

@SuppressWarnings("serial")
public class RoundedBorder extends AbstractBorder {
    private int radii;
    private Insets insets;
    private Color innerS = new Color(166, 166, 166);
    private Color outerS = new Color(116, 116, 116);
    private Color innerH = Color.WHITE; 
    private Color outerH = Color.WHITE;
    private boolean tColor = false;

    public RoundedBorder(int radius) {
        radii = radius;
    }

    public RoundedBorder(int radius, Insets i) {
        radii = radius;
        insets = i;
    }

    public RoundedBorder(int radius, Insets i, Color out, Color in) {
        radii = radius;
        insets = i;
        innerS = in;
        outerS = out;
        tColor = true;
    }

    public RoundedBorder(int radius, Insets i, Color outH, Color inH, Color outS, Color inS) {
        radii = radius;
        insets = i;
        innerS = inS;
        outerS = outS;
        innerH = inH;
        outerH = outH;
    }

    @Override
    public Insets getBorderInsets(Component c) {
        if(insets != null) {
            return insets;
        }
        return new Insets(5, 5, 5, 5);
    }

    @Override
    public Insets getBorderInsets(Component c, Insets insets) {
        return getBorderInsets(c);
    }

    @Override
    public void paintBorder(Component c, Graphics g, int x, int y, int width, int height) {
        super.paintBorder(c, g, x, y, width, height);

        Graphics2D g2d = (Graphics2D) g;
        g2d.setRenderingHints(new RenderingHints(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON));

        Shape clip = g2d.getClip();
        Area rect = new Area(clip);
        rect.subtract(new Area(new RoundRectangle2D.Double(x, y, width, height, radii, radii)));
        g2d.setClip(rect);
        g2d.setColor(c.getParent().getBackground());
        g2d.fillRect(0, 0, width, height);
        g2d.setClip(clip);
        g2d.draw(rect);

        if(!tColor) {
            double offset = radii / 2;
            //Outer
            g2d.setColor(outerH);
            g2d.draw(new Line2D.Double(0, offset, 0, height - 2 - offset)); //Left
            g2d.draw(new Line2D.Double(1 + offset, 0, width - 2 - offset, 0)); //Top
            g2d.draw(new Arc2D.Double(width - radii - 1, 0, radii, radii, 45, 45, Arc2D.OPEN)); //Top Right P1
            g2d.draw(new Arc2D.Double(0, 0, radii, radii, 90, 90, Arc2D.OPEN)); //Top Left
            g2d.draw(new Arc2D.Double(0, height - radii - 1, radii, radii, 180, 45, Arc2D.OPEN)); //Bottom Left P1

            //Inner
            g2d.setColor(innerH);
            g2d.draw(new Line2D.Double(1, 1 + offset, 1, height - 3 - offset)); //Left
            g2d.draw(new Line2D.Double(2 + offset, 1, width - 3 - offset, 1)); //Top
            g2d.draw(new Arc2D.Double(width - radii - 2, 1, radii, radii, 45, 45, Arc2D.OPEN)); //Top Right P1
            g2d.draw(new Arc2D.Double(1, 1, radii, radii, 90, 90, Arc2D.OPEN)); //Top Left
            g2d.draw(new Arc2D.Double(1, height - radii - 2, radii, radii, 180, 45, Arc2D.OPEN)); //Bottom Left P1

            //Outer
            g2d.setColor(outerS);
            g2d.draw(new Line2D.Double(offset, height - 1, width - 1 - offset, height - 1)); //Bottom
            g2d.draw(new Line2D.Double(width - 1, offset, width - 1, height - 2 - offset)); //Right
            g2d.draw(new Arc2D.Double(width - radii - 1, 0, radii, radii, 0, 45, Arc2D.OPEN)); //Top Right P2
            g2d.draw(new Arc2D.Double(width - radii - 1, height - radii - 1, radii, radii, 270, 90, Arc2D.OPEN)); //Bottom Right
            g2d.draw(new Arc2D.Double(0, height - radii - 1, radii, radii, 225, 45, Arc2D.OPEN)); //Bottom Left P2

            //Inner
            g2d.setColor(innerS);
            g2d.draw(new Line2D.Double(1 + offset, height - 2, width - 2 - offset, height - 2)); //Bottom
            g2d.draw(new Line2D.Double(width - 2, 1 + offset, width - 2, height - 3 - offset)); //Right
            g2d.draw(new Arc2D.Double(width - radii - 2, 1, radii, radii, 0, 45, Arc2D.OPEN)); //Top Right P2
            g2d.draw(new Arc2D.Double(width - radii - 2, height - radii - 2, radii, radii, 270, 90, Arc2D.OPEN)); //Bottom Right
            g2d.draw(new Arc2D.Double(1, height - radii - 2, radii, radii, 225, 45, Arc2D.OPEN)); //Bottom Left P2
        } else {
            g2d.setColor(innerS); //Inner Rectangle
            g2d.draw(new RoundRectangle2D.Double(x + 1, y + 1, width - 2, height - 2, radii, radii));

            g2d.setColor(outerS); //Outer Rectangle
            g2d.draw(new RoundRectangle2D.Double(x, y, width - 2, height - 2, radii, radii));
        }
    }
} 
```

现在，您可以通过执行`yourComponent.setBorder(new RoundedBorder(10));`或使用该类的其他构造函数之一在您的组件上实现`RoundedBorder`该类。

# .net - 如何将项目值放入 ActionLink（MVC3 网格）

> ID：11321389
> 
> 赞同：0
> 
> 时间：2012-07-04T01:33:55.290
> 
> 标签：.net, asp.net-mvc-3

我只需要将项目值放入`ActionLink`.

我所拥有的是以下内容：

```
grid.Column(format: (item) => Html.ActionLink("Report", "CombinedData", new { id = item.ChainID })),
grid.Column("OwnerName", "Owner"), 
```

所以我需要而不是`"Report"`放在那里`"OwnerName"`看到**所有者**来排除1个额外的行（`grid.Column("OwnerName", "Owner"),`）

怎么可能呢？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T07:26:32.027

```
grid.Column(format: (item) => Html.ActionLink(
    (string)item.OwnerName, 
    "CombinedData", 
    new { id = item.ChainID }
)) 
```

请注意，因为 ActionLink 帮助程序不接受 null 和 Empty 字符串作为第一个参数。因此，如果您的模型可能有 null 或 Empty`OwnerName`属性，您将不得不测试这种情况并放置一些通用的非空名称。或者只是在您的视图模型上添加一个计算字段来完成这项工作：

```
grid.Column(format: (item) => Html.ActionLink(
    (string)item.FormattedOwnerName, 
    "CombinedData", 
    new { id = item.ChainID }
)) 
```

# java - 使用递归的 Java 元音计数器

> ID：11321390
> 
> 赞同：0
> 
> 时间：2012-07-04T01:34:00.910
> 
> 标签：java, recursion, counter

我正在上一门在线 CPS 课程，一个问题要求我编写一个代码来计算字符串中的元音（大写和小写）。这是我的代码：

```
 public static int countVowels( String s )
    {
        {
        if ( s.length() == 0 )
          return 0 + countVowels(s);
        else if ( (s.substring(0, 1) == "a" ) || (s.substring(0, 1) == "A") ) 
          return 1 + countVowels(s.substring(1));
        else if ( (s.substring(0, 1) == "e" ) || (s.substring(0, 1) == "E") ) 
          return 1 + countVowels(s.substring(1));
        else if ( (s.substring(0, 1) == "i" ) || (s.substring(0, 1) == "I") ) 
          return 1 + countVowels(s.substring(1));
        else if ( (s.substring(0, 1) == "o" ) || (s.substring(0, 1) == "O") ) 
          return 1 + countVowels(s.substring(1));
        else if ( (s.substring(0, 1) == "u" ) || (s.substring(0, 1) == "U") ) 
          return 1 + countVowels(s.substring(1));
        }

        return countVowels(s.substring(1));
    } 
```

但我收到“StackOverFlow”错误，我不知道该怎么做。我知道该错误意味着未达到终止条件。我不允许使用任何我还没有学过的东西，我也不允许使用 for 或 while 语句，因为这是一个递归问题。

我能得到一些帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T01:35:24.670

在`s.length() == 0`您导致无限递归的情况下。一个空字符串有 0 个元音，因此您应该将第 5 行编辑为`return 0;`要注意的另一件事：您正在将字符串与`==`. 该运算符用于其他用途。改为使用`equals`。看看这个，例如：[字符串比较](http://www.leepoint.net/notes-java/data/strings/12stringcomparison.html)。那`s.substring(0, 1) == "a"`应该成为`s.substring(0, 1).equals("a")`

事实上，我会给你一些其他建议，比如只将第一个字母存储在字符串中，而不是在每种情况下都计算它（两次）。此外，您可以获取第一个字符的小写字符，这样您可以将比较的大小写减少两倍。此外，将元音添加到数组中，此代码不是 DRY。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-30T08:05:12.427

元音计数 (vc) - 返回输入字符串中元音的数量。

```
public static int vc(String s)
{
    if(s.length() - 1 < 0) return 0;
    return((("aeiou".indexOf((s.charAt(s.length()-1)+"").toLowerCase()) >= 0 ? 1 : 0)) 
           + vc((s = s.substring(0,s.length()-1))));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T08:21:55.487

我希望现在你已经完成了你的作业。我以更短的方式解决了同样的问题：

```
public class CountVowels {
    private static String vowels = "aeiou";
    public static void main(String[] args){
        String s = "RohanAskedAQuestion";
        System.out.println(recursivelyCountVowels(s));
    }

    private static int recursivelyCountVowels(String s) {
        if(s==null||s.length()==0)
        {
            return 0;
        }
        if(vowels.contains((CharSequence) s.substring(0, 1).toLowerCase())){
            return 1+recursivelyCountVowels(s.substring(1));
        }
        return 0+recursivelyCountVowels(s.substring(1));
    }
} 
```

我希望它有帮助:)，我也在学习java，所以如果有人有任何建议，请告诉我。谢谢。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T02:06:31.483

这是javascript中可能的解决方案。您可以通过创建文件“something.html”并在浏览器中打开它来测试它。

```
<html>
<head></head>
<body>
<div id="input">
</div>
<div id='answer'> 
</div>
<script>
var vowels = ['a','e','i','o','u'];
var testInput = 'Hello this is just a test. Out with it.';

function Contains(value, inArray) {
    var found = false;  
    for(var j=0, size = inArray.length; j < size; j++) {
        if(value.toLowerCase() === inArray[j]) {
        found = true;
        }
    }
    return found;
}

var vowelCounter = 0;
    for(var i=0, j = testInput.length; i < j; i++) {
        if(Contains(testInput[i], vowels)) {
        vowelCounter +=1;
        }
    }

    var inp = document.getElementById("input");
    inp.innerHTML = 'Question <br/>' + testInput;

    document.getElementById('answer').innerHTML = 'Number of Vowels: ' + vowelCounter;

</script>
 </body>
</html> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T05:06:25.367

也许它有点晚了，但仍然:)

```
public int recursiveCountVowels(String str,int count,int currentPosition)
{
    str = str.toLowerCase();
    if(str.trim().length() == 0)
        return count;

    if(currentPosition == str.length())
        return count;

    for(int i = currentPosition ; i < str.length();i++)
    {
        if(str.charAt(i) == 'a' || str.charAt(i) == 'e' || str.charAt(i) == 'i' || str.charAt(i) == 'o' || str.charAt(i) == 'u')
            count++;
            currentPosition++;
    }

    return recursiveCountVowels(str, count, currentPosition);

} 
```

# oauth - 每当我运行 chrome 扩展程序时，它都会返回错误：找不到文件“chrome-extension://jgfhlfelemcfpljpmokkhemkabpknbjc/js/chrome_ex_oauth.html”

> ID：11321391
> 
> 赞同：0
> 
> 时间：2012-07-04T01:34:04.643
> 
> 标签：oauth, google-chrome-extension

我正在编写一个简单的扩展来使用 OAuth 显示用户的电子邮件地址。当我这样做时，会返回上述错误。我的 manifest.json 在这里： http: [//pastebin.com/8V0vYBcz](http://pastebin.com/8V0vYBcz)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T02:03:48.307

我认为错误很明显，检查扩展文件中的文件夹“JS”你不会找到名为“chrome_ex_oauth.html”的文件，也许你在 manifest.json 中输入了错误的路径，如下所示

```
"app": {
"launch": {
  "local_path": "js/chrome_ex_oauth.html"
} 
```

或者您添加了错误的脚本路径

```
<script type="text/javascript" src="JS/chrome_ex_oauth.js"></script> 
```

可能是写的

```
<script type="text/javascript" src="chrome_ex_oauth.js"></script> 
```

# objective-c - 当我尝试在 iOS 应用程序的 NSURL 中传递参数时，为什么会出现此错误？

> ID：11321396
> 
> 赞同：0
> 
> 时间：2012-07-04T01:34:42.673
> 
> 标签：objective-c, ios, nsurlconnection, nsurl

这就是我在公共方法中所拥有的 - (IBAction)methodName

```
NSString *quoteNumber = [[self textBox] text];

NSURL *url = [[NSURL alloc] initWithString:@"http://TestSite.com/virdirectory/Webservice1/Service1.asmx/GetQuote?number=%d", quoteNumber]; 
```

我得到的错误是：

> 方法调用的参数太多，预期为 1，有 2

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T01:37:45.910

您需要格式化您的字符串。尝试这个：

```
NSString *urlString = [NSString stringWithFormat:@"http://TestSite.com/virdirectory/Webservice1/Service1.asmx/GetQuote?number=%@", quoteNumber];
NSURL *url = [[NSURL alloc] initWithString:urlString]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T01:37:58.620

我认为您正在考虑 NSString 的`stringWithFormat:`：

```
[NSURL URLWithString:[NSString stringWithFormat:@"http://TestSite.com/virdirectory/Webservice1/Service1.asmx/GetQuote?number=%@", quoteNumber]] 
```

还要注意格式说明符对 %@ 的更改，因为它是 NSString 的实例（不是 int）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T01:44:15.733

问题是

```
[NSURL initWithString:] 
```

需要一个 NSString 类型的参数，但您传递了两个参数。

您需要传递一个 NSString 参数。更改您的代码

```
NSURL *url = [[NSURL alloc] initWithString:@"http://TestSite.com/virdirectory/Webservice1/Service1.asmx/GetQuote?number=%d", quoteNumber]; 
```

至

```
NSURL *url = [[NSURL alloc] initWithString:[NSString stringWithFormat:@"http://TestSite.com/virdirectory/Webservice1/Service1.asmx/GetQuote?number=%d", quoteNumber]]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T01:45:12.550

该`initWithString`方法只能接受一个普通的 NSString，你传递给它一个格式化的 NSString，看看这段代码：

```
 NSURL *url = [[NSURL alloc] initWithString:[NSString stringWithFormat:@"http://TestSite.com/virdirectory/Webservice1/Service1.asmx/GetQuote?number=%d", quotedNumber]]; 
```

这可能有点令人困惑，您可以将其分解如下：

```
NSString *urlString = [NSString stringWithFormat:@"http://TestSite.com/virdirectory/Webservice1/Service1.asmx/GetQuote?number=%d", quotedNumber];

NSURL *url = [[NSURL alloc] initWithString:urlString]; 
```

现在您的字符串格式正确，该`NSURL initWithString`方法将起作用！

此外，为了让您将来更清楚，您可以在设置`quoteNumber`字符串时利用 Objective-C 的点表示法语法，如下所示：

```
NSString *quoteNumber = self.textBox.text; 
```

此外，您正在尝试将此引用的数字作为数字传递给您`urlString`的数字（如 所示`%d`），请记住这`quotedNumber`是一个 NSString 对象，并且当您尝试将其传递给`stringWithFormat`方法时会崩溃。您必须先将字符串转换为 NSInteger 或 NSUInteger。

请参考[这个 SO question](https://stackoverflow.com/questions/4791470/convert-nsstring-to-nsinteger)如何做到这一点（不用担心这很容易）！

# facebook - 没有 SDK 的 Facebook 用户数据

> ID：11321398
> 
> 赞同：3
> 
> 时间：2012-07-04T01:35:09.577
> 
> 标签：facebook, facebook-graph-api

我有用户的访问令牌，我想从他们的个人资料中检索数据。我正在使用 Unity3D c#，因此我不能使用任何 SDK。有没有办法通过图形请求获得它？

我已经尝试过

```
https://graph.facebook.com/me?access_token=00000000000000|AAAAAAAAAAAAAAA 
```

但给我一个这样的错误..

```
 "message": "An active access token must be used to query information about the current user.", 
```

当我请求权限时，我要求用户允许我发布发布流并访问配置文件数据。如何获得活动访问令牌？我只想要用户ID。

感谢您的回答，并为我糟糕的英语感到抱歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T18:25:56.637

因此，我希望获得用户 UserAgent 令牌，在我的情况下，您唯一必须做的就是将该参数添加到访问 URL

```
https://graph.facebook.com/oauth/authorize?type=user_agent&client_id=000000000000000&redirect_uri=http://yourRedirectdomain.com&scope=user_photos,email,user_birthday,offline_access,plublish_stream 
```

Facebook 会将您重定向到 redirect_uri URL，访问令牌将以哈希的形式提供。额外提示：你必须通过 Javascript 访问哈希令牌，

```
var hash = document.location.hash;
 var n=hash.split("="); 
```

这是一种方法，我相信还有更好的方法。

谢谢大家的回答！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T10:41:11.177

您*无法*`/me`使用**应用**访问令牌查询 API ，因为 API 无法知道“我”应该是谁。

只有**用户**访问令牌包含他们应用到的用户 ID 的信息，因此只有那些可以用于`/me`成功查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T02:00:21.170

你的 Graph Call/HTTP 请求看起来差不多。

根据错误，我猜测访问令牌已过期。通常，它们自上次使用以来持续约 1-2 小时。（如果我没记错的话）。因此，用户将开始使用网站，并且该网站可以在用户实际使用该网站进行该会话时使用访问令牌进行图形调用，但该令牌将在此之后很快到期。

但是，您也可以向 Facebook 索要一个更持久的 access_token，它将持续大约 60 天。在这里查看一些信息 :: [http://developers.facebook.com/roadmap/offline-access-removal/](http://developers.facebook.com/roadmap/offline-access-removal/)

就目前而言，试图通过浏览 Facebook 中的开发者文档来找到这些信息是相当困难的，如果不是不可能的话。：-/

# ruby - Ruby 1.9.3 的 OpenSSL 问题

> ID：11321403
> 
> 赞同：10
> 
> 时间：2012-07-04T01:35:42.610
> 
> 标签：ruby, openssl, ruby-1.9.3, ubuntu-12.04

我在 Ubuntu 12.04 上遇到了 OpenSSL 1.0.1 + Ruby 1.9.3 的半严重问题。

所有 rubies 都使用 rvm 安装

```
require 'uri'
require 'net/http'
require 'net/https'

endpoint = "https://secure.mmoagateway.com/api/transact.php"
RUBY_184_POST_HEADERS = { "Content-Type" => "application/x-www-form-urlencoded" }
body = "orderid=ae5dd847d9f31209cbffeeea076ed966&orderdescription=Active+Merchant+Remote+Test+Purchase&ccnumber=4111111111111111&ccexp=0913&cvv=123&company=Widgets+Inc&address1=1234+My+Street&address2=Apt+1&city=Ottawa&state=ON&zip=K1C2N6&country=CA&phone=%28555%29555-5555&firstname=&lastname=&email=&amount=1.00&type=auth&username=demo&password=password"
headers = {}

endpoint     = endpoint.is_a?(URI) ? endpoint : URI.parse(endpoint)

http = Net::HTTP.new(endpoint.host, endpoint.port)
http.use_ssl = true
http.verify_mode = OpenSSL::SSL::VERIFY_NONE
http.set_debug_output(STDOUT)

result = http.post(endpoint.request_uri, body, RUBY_184_POST_HEADERS.merge(headers))
puts(result) 
```

在 Ubuntu 12.04 + Ruby 1.9.3 + Openss 1.0.1 我得到以下输出：

```
% ruby test.rb 
opening connection to secure.mmoagateway.com...
opened
Conn close because of connect error Connection reset by peer - SSL_connect
/usr/lib/ruby/1.9.1/net/http.rb:799:in `connect': Connection reset by peer - SSL_connect (Errno::ECONNRESET)
        from /usr/lib/ruby/1.9.1/net/http.rb:799:in `block in connect'
        from /usr/lib/ruby/1.9.1/timeout.rb:54:in `timeout'
        from /usr/lib/ruby/1.9.1/timeout.rb:99:in `timeout'
        from /usr/lib/ruby/1.9.1/net/http.rb:799:in `connect'
        from /usr/lib/ruby/1.9.1/net/http.rb:755:in `do_start'
        from /usr/lib/ruby/1.9.1/net/http.rb:744:in `start'
        from /usr/lib/ruby/1.9.1/net/http.rb:1284:in `request'
        from /usr/lib/ruby/1.9.1/net/http.rb:1307:in `send_entity'
        from /usr/lib/ruby/1.9.1/net/http.rb:1096:in `post'
        from test.rb:17:in `<main>' 
```

使用 Ruby 1.8.7 我得到正确的输出：

```
$ ruby test.rb
opening connection to secure.mmoagateway.com...
opened
<- "POST /api/transact.php HTTP/1.1\r\nAccept: */*\r\nContent-Type: application/x-www-form-urlencoded\r\nConnection: close\r\nContent-Length: 347\r\nHost: secure.mmoagateway.com\r\n\r\n"
<- "orderid=ae5dd847d9f31209cbffeeea076ed966&orderdescription=Active+Merchant+Remote+Test+Purchase&ccnumber=4111111111111111&ccexp=0913&cvv=123&company=Widgets+Inc&address1=1234+My+Street&address2=Apt+1&city=Ottawa&state=ON&zip=K1C2N6&country=CA&phone=%28555%29555-5555&firstname=&lastname=&email=&amount=1.00&type=auth&username=demo&password=password"
-> "HTTP/1.1 200 OK\r\n"
-> "Date: Wed, 04 Jul 2012 01:26:35 GMT\r\n"
-> "Server: Apache\r\n"
-> "Content-Length: 240\r\n"
-> "Connection: close\r\n"
-> "Content-Type: text/html\r\n"
-> "\r\n"
reading 240 bytes...
-> "response=1&responsetext=SUCCESS&authcode=123456&transactionid=1648894346&avsresponse=N&cvvresponse=N&orderid=ae5dd847d9f31209cbffeeea076ed966&type=auth&response_code=100&merchant_defined_field_6=&merchant_defined_field_7=&customer_vault_id="
read 240 bytes
Conn close
#<Net::HTTPOK:0xb74175c8>
response=1&responsetext=SUCCESS&authcode=123456&transactionid=1648894346&avsresponse=N&cvvresponse=N&orderid=ae5dd847d9f31209cbffeeea076ed966&type=auth&response_code=100&merchant_defined_field_6=&merchant_defined_field_7=&customer_vault_id= 
```

我在 1.9.3 和 1.0.1 的 arch 中有同样的问题。

如果我在我的 12.04 系统上从 oneiric 安装 1.0.0e，它也适用于 ruby​​ 1.9.3

我认为这可能与此处的 ubuntu 错误有关：[https ://bugs.launchpad.net/ubuntu/+source/openssl/+bug/965371](https://bugs.launchpad.net/ubuntu/+source/openssl/+bug/965371)

虽然我从 Debian 下载了软件包，他们说它已经修复并且没有运气。

有没有其他人遇到过类似的问题？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-11T00:12:32.877

我在连接到授权网关时遇到了同样的问题。最后我能够通过强制 sslv3 进行连接

```
http = Net::HTTP.new(uri.host, uri.port)

http.use_ssl = true if @is_https
http.verify_mode = OpenSSL::SSL::VERIFY_NONE if @is_https
http.ssl_version = :SSLv3 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-18T16:56:36.357

我有同样的问题......[这](http://blog.marc-seeger.de/2012/06/22/ruby-openssl-and-econnreset/)是信息，可以`rvm pkg install openssl`解决`rvm reinstall 1.9.3-p194 --with-openssl-dir=~/.rvm/usr`问题，但它对我没有帮助

# java - Java：使用父类方法访问子类变量

> ID：11321404
> 
> 赞同：17
> 
> 时间：2012-07-04T01:36:07.327
> 
> 标签：java, oop, inheritance

我有以下情况：

```
public class A {

    private int x = 5;

    public void print()
    {
        System.out.println(x);
    }
}

public class B extends A {

    private int x = 10;

    /*public void print()
    {
        System.out.println(x);      
    }*/

    public static void main(String[] args) {
        B b = new B();
        b.print();
    }

} 
```

执行代码时，输​​出为：5。

如何通过父类方法访问子类（B）变量（x）？

这是否可以在**不**覆盖 print() 方法的情况下完成（即在 B 中取消注释）？

[这很重要，因为在重写时我们将不得不再次重写 print() 方法的整个代码]

**已编辑**

更多说明：-

*   问题的动机是使用来自其父类方法的子类私有变量的值。这不需要更改父类私有变量的值即可达到预期的结果。
*   不过，这里发布的答案让我得到了我想要的答案，我在下面发布了这个答案。

（感谢大家的时间和帮助）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-04T02:02:20.803

```
class A {
    private int x = 5;

    protected int getX() {
        return x;
    }

    protected void setX(int x) {
        this.x = x;
    }

    public void print() {
        // getX() is used such that 
        // subclass overriding getX() can be reflected in print();
        System.out.println(getX());
    }
}

class B extends A {
    public B() {
        // setX(10);  // perhaps set the X to 10 in constructor or in main
    }

    public static void main(String[] args) {
        B b = new B();
        b.setX(10);
        b.print();
    }
} 
```

**已编辑**

以下是使用抽象类和方法解决类似场景的一般答案：

```
abstract class SuperA {
    protected abstract Object getObj();

    public void print() {
        System.out.println(getObj());
    }
}

class A extends SuperA {
    @Override
    protected Object getObj() {
        // Your implementation
        return null; // return what you want
    }
}

class B extends A {
    @Override
    protected Object getObj() {
        // Your implementation
        return null; // return what you want
    }

    public static void main(String[] args) {
        B b = new B();
        b.print();
    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-28T12:30:05.490

在阅读了此处发布的所有答案后，我得到了我想要的东西。以下是我认为是我问题的最佳答案：

```
public class A {
    private int x = 5;    
    protected int getX(){
        return x; 
    }    
    public void print(){
        System.out.println(getX());
    }
}
public class B extends A {
    private int x = 10;
    protected int getX(){
        return x; 
    }  
    public static void main(String[] args) {
        B b = new B();
        b.print();
    }
} 
```

设置受保护的 getter 并覆盖它比覆盖`print()`方法本身要好，因为可能有任何其他巨大的方法来代替可能需要访问子类变量的值的 print 方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-08-01T15:26:39.733

要解决您的问题，您必须在父类 A 中定义字段，如受保护（因此它将在子类上继承）并在子类 B 的构造函数中设置字段值 x。打印方法也继承自一个类，因此您可以直接从父类调用它。

我希望这可以帮助你。

```
public class A 
{
    // fields declaration 
    protected int x = 5;

    public void print()
    {
        System.out.println(x);
    }
}

public class B extends A 
{

    public B()
    {
        // set child x value. The field have been defined in the parent class
        x = 10;
    }

    public static void main(String[] args) 
    {
        A a = new A();
        a.print(); // print 5

        B b = new B();
        b.print(); // print 10
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T01:40:12.043

您应该为您想要的值公开一个 getter，并在子类中覆盖它。

像这样：

```
public class A {

    private int x = 5;

    public void print()
    {
        System.out.println(getX());
    }

    protected void setX(int x)
    {
        this.x = x;
    }

    protected int getX()
    {
        return x;
    }

}

public class B extends A {

    /*public void print()
    {
        System.out.println(x);      
    }*/

    public B()
    {
        setX(10);
    }

    public static void main(String[] args) {
        B b = new B();
        b.print();
    }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T01:40:30.933

您始终可以将其添加到构造函数中：

```
public class B extends A {

    //this line is unnecessary: private int x = 10;

    /*public void print()
    {
        System.out.println(x);      
    }*/

    public B()
    {
        x=10;
    }

    public static void main(String[] args) {
        B b = new B();
        b.print();
    }

} 
```

它在您尝试时不起作用的原因是默认值只被评估一次。因此，当它在 A 中默认为 5 时，即使您在 B 中使用默认 10，它也会保持为 5。

# networking - 为什么交换机不使用传出帧的目的 MAC 地址进行 MAC 学习？

> ID：11321407
> 
> 赞同：1
> 
> 时间：2012-07-04T01:36:18.997
> 
> 标签：networking, mac-address

> 通常，交换机可以通过学习每个端口上传入帧的源 MAC 地址来自动填充其 MAC 地址表。

我在以下参考文献中找到了上述句子：

[04-Layer 2 - 局域网交换配置指南](http://www.h3c.com/portal/Technical_Support___Documents/Technical_Documents/Switches/H3C_S12500_Series_Switches/Configuration/Operation_Manual/H3C_S12500_CG-Release1335-5W130/04/201108/722516_1285_0.htm)

为什么交换机不使用传出帧的目的 MAC 地址进行 MAC 学习？

我认为在我遇到的某些情况下，它对于防止洪水泛滥很有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T01:30:41.507

> 为什么交换机不使用传出帧的目的 MAC 地址进行 MAC 学习。

**简短回答：**因为从目标 mac-addresses 中学习是没有意义的

**长答案：**当发送以太网帧时， 交换机从*源 MAC 地址学习两件事：*

*   连接该电缆的以太网 NIC 的 MAC 地址的值
*   具有上述mac地址的端口号

目标 MAC 地址不提供可供交换机学习的有用信息。当 PC 在某处发送以太网帧时，交换机必须传送到该目标 MAC 地址。学习与交付事件巧合的 MAC 地址的存在和位置是一种错误的算法。

# php - 以编程方式运行 PHPUnit Selenium 2 测试用例（“在 PHP 内”）

> ID：11321409
> 
> 赞同：0
> 
> 时间：2012-07-04T01:36:40.190
> 
> 标签：php, selenium, phpunit

[这是与此](https://stackoverflow.com/questions/5047777/run-a-phpunit-selenium-test-case-programatically-within-php/5048029#5048029)相关的问题 ，我确实喜欢这个[答案](https://stackoverflow.com/a/5048029/1337119)

```
require_once 'SeleniumTestCase/Driver.php';
$driver = new PHPUnit_Extensions_SeleniumTestCase_Driver();
$driver->setBrowser('*firefox');
$driver->setHost('localhost');
$driver->setPort(4444);
$driver->setTimeout(30000);
$driver->setBrowserUrl('http://www.google.com');
$driver->start();
$driver->open('/'); 
```

它工作正常，但没有 cssselector 或获取属性值（如大小（宽度 - 高度））的方法，所以我认为使用 Selenium2 更好，所以我检查

[https://github.com/facebook/php-webdriver/](https://github.com/facebook/php-webdriver/)

我在选择元素时发现了同样的问题（注意：有按 id 和类选择，但`("div.father div#child")`在这个例子中没有像这个选择器这样的嵌套选择器我可以得到父亲，但我不能得到这个特定父亲的孩子）所以我能做什么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T06:41:21.587

一旦您想要在 Selenium 中执行基本的“打开页面并单击链接”命令之外的任何操作，[XPath](http://www.w3schools.com/xpath/default.asp)就成为在文档中导航的最佳方式。例如，如果您想测试 的宽度`div.father div#child`，类似（未测试）：

```
$driver->assertEquals("//div[@class='father']/div[@id='child']/@width", "500"); 
```

关于这个主题有很多资源。不过，如果您忽略了它在最后进入 Java 的位置，那么[本教程有一个详细的运行。](http://hedleyproctor.com/2011/05/tutorial-writing-xpath-selectors-for-selenium-tests/)

# meteor - 您如何将响应式会话与传递引用项一起使用？（数组、对象等）

> ID：11321411
> 
> 赞同：3
> 
> 时间：2012-07-04T01:37:25.953
> 
> 标签：meteor

我正在做一个像这样的简单函数：

```
Game.msg = function(msg){
   var m = Session.get("messages") || [];
   m.push({"text": msg});
   Session.set("messages", m);
}; 
```

和一个模板：

```
Template.field.messages = function(){
   return Session.get("messages");
}; 
```

触发 Game.msg() 不会触发模板的自动更新。我怀疑这是因为数组引用没有改变[即使内容有]。触发更新的最佳方式是什么？

我的 hacky 解决方法是在 Game.msg 中设置一个虚拟计数变量 (var c = Session.get("message_count")) 并在 Template.field.messages 中引用，如下所示：

```
Game.msg = function(msg){
  var m = Session.get("messages") || [];
  m.push({"text": msg});

  // silly, but adding a count so the array size changes and triggers a flush
  Session.set("messages", m);
  Session.set("message_count", m.length);
};

Template.field.messages = function(){
    var c = Session.get("message_count");
    return Session.get("messages");
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T06:29:32.550

使用 _.extend 创建一个像这样的新可变对象怎么样？

```
Game.msg = function(msg){
    var m = Session.get("messages");
    m = _.extend([], m);
    m.push({"text": msg});
    Session.set("messages", m);
}; 
```

我认为这比在 Session 中有一个新变量要清楚一些。

PS对不起，我没有足够的声誉来发表评论，所以我把它变成了一个答案。

# eclipse - 从旧项目创建 Eclipse 项目

> ID：11321413
> 
> 赞同：0
> 
> 时间：2012-07-04T01:37:32.787
> 
> 标签：eclipse, svn, project

我有一个存储在 SVN 中的旧 eclipse java 项目。我希望在旧文件的基础上创建一个新文件，但没有 SVN 文件。我将对它进行一些实验性的更改，并且我希望将旧的作为备份。任何人都可以就如何做到这一点提供建议？谢谢

仅供参考：这也已发布在 Javaranch

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T01:59:18.833

您有多种选择：

1.  不要进行签出（它会创建元数据文件，从而可以轻松地在以后提交更改），而是进行导出。在 Eclipse 的“SVN Repositories”视图中，右键单击项目文件夹，然后单击“Export...”。
2.  只需从 SVN 签出该项目的第二个副本，并在工作区中使用不同的项目名称对其进行命名以使其与众不同。只需不要将任何更改签入到 SVN 存储库。
3.  像往常一样复制项目，然后简单地删除 SVN 元数据文件。
4.  与 #3 相同，但让 Eclipse 为您执行此操作 - 使用 Team / Disconnect。

# c++ - Win32 关键部分与互斥体性能

> ID：11321417
> 
> 赞同：3
> 
> 时间：2012-07-04T01:37:49.990
> 
> 标签：c++, multithreading, winapi, mutex, critical-section

我写了一个小程序来比较 Windows 中 Critical Section 与 Mutex 的性能。

在我运行的测试中，获取关键部分似乎更慢：O 谁能解释为什么这两件事花费几乎相同的时间，以及内部发生了什么。

这是我使用的计时器 - [http://cplus.about.com/od/howtodothingsi2/a/timing.htm](http://cplus.about.com/od/howtodothingsi2/a/timing.htm)

```
#include "stdafx.h"
#include<iostream>
#include<vector>
#include "h_timer.h"
#include<WinBase.h>
#include<Windows.h>
#include<stdio.h>

#define MAX_THREADS 2000  
//Comment and Uncomment this to enable/disable critialSection / Mutex
#define CRIT 1

using namespace std;

HANDLE Mutex;
CRITICAL_SECTION critSection;
DWORD WINAPI Contention( LPVOID );

int main( void )
{
    HANDLE Thread[MAX_THREADS];
    DWORD ThreadID;
    int i;

#ifdef CRIT
//create a critical section
InitializeCriticalSection(&critSection);
#else

    // Create a mutex with no initial owner
    Mutex = CreateMutex( NULL, FALSE,NULL);

#endif

    // Create worker threads

CStopWatch timer, tempTimer;
timer.startTimer();
    for( i=0; i < MAX_THREADS; i++ )
    {
        Thread[i] = CreateThread( NULL,
                     0,(LPTHREAD_START_ROUTINE)Contention,NULL,0,&ThreadID);
    }
    WaitForMultipleObjects(MAX_THREADS, Thread, TRUE, INFINITE);

    timer.stopTimer();
    cout<<endl<<"Elapsed Time:"<<timer.getElapsedTime();
    cin.get();
    // Close thread and mutex handles

    for( i=0; i < MAX_THREADS; i++ )
    CloseHandle(Thread[i]);

    CloseHandle(Mutex);
    return 0;
}

DWORD WINAPI Contention( LPVOID lpParam )
{
    #ifdef CRIT
EnterCriticalSection(&critSection);
//printf("ThreadId: %d\n",GetCurrentThreadId());
//printf("Let's try Again. %d\n\n", GetCurrentThreadId());
LeaveCriticalSection(&critSection);

#else
// lpParam not used in this example
    UNREFERENCED_PARAMETER(lpParam);
    DWORD dwCount=0, dwWaitResult;

    // Request ownership of mutex.
    dwWaitResult = WaitForSingleObject(
            ghMutex, // handle to mutex
            INFINITE); // no time-out interval
        dwCount++;
    ReleaseMutex(ghMutex);
#endif

return TRUE;
} 
```

对于 2000 个线程，在四核 HPZ210 上，两者都需要大约 1.5 秒。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-04T01:49:16.293

我认为有两个因素：

主要是 - 您的程序主要是线程创建开销。您正在创建和销毁 2000 个线程，并且每个线程仅访问一次互斥锁/CS。创建线程所花费的时间淹没了锁定/解锁时间的差异。

另外 - 您可能没有测试这些锁优化的用例。尝试生成两个线程，每个线程都尝试访问互斥锁/CS 数千次。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-04T01:57:30.707

关键部分是用户模式和内核模式的混合体。他们试图通过使用自旋锁（用户模式）来阻止您的线程进行上下文切换，然后再使用更昂贵的信号量（内核模式）。这提高了实际场景中的性能。相反，互斥锁是纯粹的内核模式，会立即等待，执行上下文切换。

通过在 2000 个线程之间进行 100% 的争用，您已经做到了，因此临界区几乎肯定会尽可能多地旋转，占用 CPU，然后最终完全执行互斥锁所做的事情并在内核模式下执行等待。因此，他们在这种情况下放慢速度是有道理的。

和japreiss所说的。线程创建非常慢。

# php - 接收来自 PHP 的 JSON 请求

> ID：11321421
> 
> 赞同：2
> 
> 时间：2012-07-04T01:39:23.103
> 
> 标签：php, json, extjs4, firebug

在萤火虫中，在 POST 选项卡中，我看到以下内容；

```
JSON        

textfieldone "Alex"

Source
{"textfieldone :"Alex"} 
```

但在 PARAMS 选项卡中，我看到

```
_dc 1341332451114 
```

`print_r($_REQUEST);`当我得到时，在我的 PHP 代码中

```
Array
(
    [_dc] => 1341332451114
) 
```

而不是在 POST 选项卡中找到的 JSON。我怎么能解决这个问题？

我不知道为什么会这样，我整天都在尝试调试

**更新 PHP 代码：**

```
<?php
// Make a MySQL Connection
mysql_connect("localhost", "root", "pwd") or die(mysql_error());
mysql_select_db("db") or die(mysql_error());

print_r($_REQUEST); 
```

在萤火虫中，我在 url 下看到了上述响应；

```
POST http://localhost/proj/php/result.php?_dc=1341332451114 200 OK 107ms 
```

我可以知道是什么吗`?_dc=1341366375982`？我正在发送 POST

**更新 2**

EXT JS4 代码

模型

```
Ext.define ('Mycomp.model.MyClass',{
    extend: 'Ext.data.Model',

    fields:['textfieldone']

}); 
```

看法

```
Ext.define('Mycomp.view.user.MyClassView', {
    extend: 'Ext.window.Window',
    alias: 'widget.myclassview',
    initComponent: function() {
        this.items = [
            {
                xtype: 'form',
                items: [
                    {
                        xtype: 'textfield',
                        name : 'textfieldone',
                        fieldLabel: 'Contact Person Name'
                    }
                ]
            }
        ];
        this.buttons = [
                        {
                            text: 'Save',
                            name:'save',
                            action: 'save'
                        }
                    ];
        this.callParent(arguments);
    }
}); 
```

控制器

```
Ext.define('Mycomp.controller.MyClass',{
    extend: 'Ext.app.Controller',

    stores:['MyClass'],
    models:['MyClass'],
    views:['MyClassView'],
    init: function(){
        this.control({          
            'myclassview button[action=save]': {
                click: this.myMethod
            }
        });         
        },
         myMethod: function(button, record) {

       var win    = button.up('window'),
           form   = win.down('form'), 
           values = form.getValues(),
           store = this.this.getmyClassStore(),
           model = store.model,
           record = model.create();

           record.set( values );
           store.add( record );
           win.close();
           store.sync(); 
}
}); 
```

店铺

```
Ext.define('Mycomp.store.Myclass',{
    extend:'Ext.data.Store',
    model:'App.model.Myclass',

    proxy: {
        actionMethods : {
            create : 'POST'
        },
        type: 'ajax',
        url : '/savetodb.php'

    }

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T01:52:52.797

我想你会想要设置你的 .php 文件头来提供 JSON：

```
header('Cache-Control: no-cache, must-revalidate');
header('Expires: Mon, 26 Jul 1997 05:00:00 GMT');
header('Content-type: application/json'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T08:04:53.020

试试下面的代码，应该可以解决你的问题：

```
<?php
   var_dump(json_decode(file_get_contents('php://input')));
?> 
```

# python - 在虚拟机上设置 django

> ID：11321425
> 
> 赞同：0
> 
> 时间：2012-07-04T01:39:59.370
> 
> 标签：python, django, apache

我有一台运行薄荷操作系统 2（基本上是 ubuntu）的虚拟机。

我一直在尝试遵循以下教程：http: [//jeffbaier.com/articles/installing-django-on-an-ubuntu-linux-server/](http://jeffbaier.com/articles/installing-django-on-an-ubuntu-linux-server/)

到目前为止，一切都按照教程所述进行。我的 Apache httpd.conf 文件如下所示：

```
ServerName localhost

MaxRequestsPerChild 1

    SetHandler python-program
    PythonHandler django.core.handlers.modpython
    SetEnv DJANGO_SETTINGS_MODULE myproject.settings
    PythonPath "['/home/<my_user_name>/django_projects'] + sys.path"

    SetHandler None

    SetHandler None

    SetHandler None

    SetHandler None 
```

每当我尝试进入“localhost/”时，它都会显示 /var/www/ 文件夹（显示“它可以工作！”的 index.html 文件），而不是应该出现的 django 起始页。我的 /var/www 的内容是“admin_media”和“media”

我需要做什么？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T01:53:41.967

尝试[mod_wsgi](http://code.google.com/p/modwsgi/)或[uwsgi](http://projects.unbit.it/uwsgi/wiki/Quickstart)，它更容易配置、健壮且速度更快。

您还可以在 django doc 上获得帮助[- 使用 django 和 mod_wsgi](https://docs.djangoproject.com/en/1.3/howto/deployment/modwsgi/)

当您使用 ubuntu 时，mod_wsgi 的安装很容易：

```
sudo apt-get install libapache2-mod-wsgi 
```

如果这没有启用 mod-wsgi，请执行以下操作：

```
cd /etc/apache2/mod_available
cp mod_wsgi.* ../mod_enable
sudo service apache2 restart 
```

对于使用 mod_python，apache 配置是：

```
ameVirtualHost *:80
NameVirtualHost *:8000
Listen 80
Listen 8000

WSGIDaemonProcess xxxx display-name=%{GROUP}
WSGIProcessGroup xxxx
<VirtualHost *:80>
    ServerName  xxxx
    WSGIScriptAlias / /home/xxx/xxxx/xxxx.wsgi

    Alias /js "/home/xxx/xxxx/xxxx/public/js"
    <Location "/js">
        SetHandler None
    </Location>
    <Directory "/home/xxx/xxxx/xxxx/public/js">
       Order Deny,Allow
       Allow from all
    </Directory>
</VirtualHost>

NameVirtualHost *:8080
<VirtualHost *:8080>
        WSGIScriptAlias / /home/xxxx/xxxx/wsgi_handler.py
        #WSGIDaemonProcess xxxx_com22 user=xxxx processes=1 threads=10
        #WSGIProcessGroup xxxx_com1

        Alias /upload/ "/home/xxxx/xxxx/upload/"
        <Directory /home/xxxx/xxxx/upload/>
                Options Indexes FollowSymLinks MultiViews
                AllowOverride None
                Order allow,deny
                Allow from all
        </Directory>
</VirtualHost>
Listen 8080 
```

对于使用 uwsgi，我推荐使用 nginx + uwsgi，如果你感兴趣，我会发布教程和配置。

# python - 如何使用 python 代码从给定的 url 获取 youtube 标题和描述？

> ID：11321429
> 
> 赞同：6
> 
> 时间：2012-07-04T01:40:26.627
> 
> 标签：python, youtube, youtube-api, youtube-data-api

如何从给定的 url 从 python 代码中获取 youtube 标题和描述。是否有必要为此使用 youtube API？我正在编写一个程序，它需要从给定的 url 中找到生成标题和描述

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T01:44:00.987

这不是*必需*的，但它可能比自己编写要快得多且容易得多。

有关更多信息，请参阅[https://developers.google.com/youtube/1.0/developers_guide_python](https://developers.google.com/youtube/1.0/developers_guide_python)

安装`gdata`模块后，尝试

```
import gdata.youtube
import gdata.youtube.service

yt_service = gdata.youtube.service.YouTubeService()

# authorize - you need to sign up for your own access key, or be rate-limited
# yt_service.developer_key = 'ABCxyz123...'
# yt_service.client_id = 'My-Client_id'

def PrintEntryDetails(entry):
    print 'Video title: %s' % entry.media.title.text
    print 'Video published on: %s ' % entry.published.text
    print 'Video description: %s' % entry.media.description.text
    print 'Video category: %s' % entry.media.category[0].text
    print 'Video tags: %s' % entry.media.keywords.text
    print 'Video watch page: %s' % entry.media.player.url
    print 'Video flash player URL: %s' % entry.GetSwfUrl()
    print 'Video duration: %s' % entry.media.duration.seconds

for entry in yt_service.GetTopRatedVideoFeed().entry:
    PrintEntryDetails(entry) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-10-03T07:16:19.757

第一个答案不再有效，因为 V2 API 不再可用，另一个答案是因为 URL 资源不再可用。

这是一个有效的 V3 代码：

```
from apiclient.discovery import build

DEVELOPER_KEY = 'your api key goes here'
youtube = build('youtube', 'v3', developerKey=DEVELOPER_KEY)

ids = '5rC0qpLGciU,LgbuxTfJFr0'
results = youtube.videos().list(id=ids, part='snippet').execute()
for result in results.get('items', []):
    print result['id']
    print result['snippet']['description']
    print result['snippet']['title'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-15T21:06:28.787

If you really want to write one by yourself without being tracked by YouTube with your developer key, you can simply send a request to:

```
https://gdata.youtube.com/feeds/api/videos/#{video_id}
https://gdata.youtube.com/feeds/api/videos/#{video_id}?alt=json 
```

Such as: [https://gdata.youtube.com/feeds/api/videos/fcz_DYms4N4](https://gdata.youtube.com/feeds/api/videos/fcz_DYms4N4). It can return XML, JSON, or JSONP depending on your need.

# java - 在调制解调器上捕获数据

> ID：11321432
> 
> 赞同：1
> 
> 时间：2012-07-04T01:40:33.377
> 
> 标签：java, telephony, modem, at-command, rxtx

我正在使用 USB 电话调制解调器并尝试通过拨号连接到另一个调制解调器。我可以使用 rxtx 库拨打号码。一旦被叫回答，我相信它正在尝试切换到数据模式（我能听到尖锐的声音）。有什么方法可以捕获正在交易的原始数据？是否有任何 AT 命令可以执行此操作？

有人可以解释或提供任何参考来了解在这种尖叫声中会发生什么吗？

谢谢你的帮助！

# django - 我的 DJango 应用正在响应 /static url

> ID：11321436
> 
> 赞同：0
> 
> 时间：2012-07-04T01:41:52.627
> 
> 标签：django, python-2.7

**更新**

我弄清楚是什么导致样式表变得不可见，尽管我并不完全理解。我在 settings.py 中设置 DEBUG=False 来测试教程中描述的错误处理。以某种方式将 debug 设置为 false 会导致静态文件不可定位。我将进一步查看配置，看看我是否能清楚地理解原因。在此之前，请随时回答或评论附加信息。我仍在学习！

**更新**

我正在阅读[这里](https://docs.djangoproject.com/en/1.4/intro)的 DJango 教程，但遇到了障碍。我正在学习教程 3，他们解释了当我尝试加载管理站点以确保我没有破坏它时如何重构你的 urls.py 文件。果然它看起来很奇怪，因为它缺少样式表。样式表是从这里提取的：

```
http://127.0.0.1:8000/static/admin/css/base.css 
```

当我在浏览器中点击该链接时，我得到了为我的应用程序配置的自定义 404 页面。样式表之前可以工作，但我不确定哪个更改破坏了它们。我浏览了我的 urls.py 文件并将所有投票特定的 url 配置还原为无济于事。这是我当前在 hellodjango 下的 urls.py （我的项目的名称。）

```
from django.conf.urls import patterns, include, url

# Uncomment the next two lines to enable the admin:
from django.contrib import admin
from django.http import HttpResponse

admin.autodiscover()

urlpatterns = patterns('',
    url(r'^polls/', include('polls.urls')),
    url(r'^admin/', include(admin.site.urls)),
)

def page_not_found(request, template_name='404.html'):
    return HttpResponse("Could not find the resource you asked for...")

handler404 = 'hellodjango.urls.page_not_found' 
```

这是我的投票目录下的 urls.py：

```
from django.conf.urls import patterns, url

# Uncomment the next two lines to enable the admin:

urlpatterns = patterns('polls.views',
    url(r'^$', 'index'),
    url(r'^(?P<poll_id>\d+)/$', 'detail'),
    url(r'^(?P<poll_id>\d+)/results/$', 'results'),
    url(r'^(?P<poll_id>\d+)/vote/$', 'vote'),
) 
```

帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T01:50:18.757

看起来您没有`/static`. 因此，`static/admin/css/base.css`URL 与任何模式都不匹配，因此您会得到 404。尝试这样的操作：

```
from django.conf.urls.static import static

# ...
urlpatterns = patterns('',
# ...
                       url(r'^static/(?P<path>.*)$', 'django.views.static.serve',
                           {'document_root': settings.STATIC_ROOT}),
# ... 
```

这应该对您有用 - 转到`/static/foo.css`，您应该会看到您的 CSS。

值得注意的是，在生产环境中不鼓励这样做。但是，对于您的教程应用程序，它会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T03:43:54.750

staticfiles 应用程序提供了一个自定义`runserver`管理命令，自动为静态文件提供服务，您确定您的设置中有以下内容吗？

```
INSTALLED_APPS = (
    # ...
    'django.contrib.staticfiles',
) 
```

在生产中，您将使用`collectstatic`管理命令查找所有静态媒体并将其转储到其中`STATIC_ROOT`（这是此设置的唯一目的 - 在开发过程中不使用或不需要它）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T23:49:08.093

很高兴你想出来了。这就是它这样工作的原因。

`django.contrib.staticfiles`覆盖`runserver`管理命令，以便自动提供静态文件。为了提醒人们他们不应该使用 django 来提供静态文件，这只会在`DEBUG = True`您发现时发生。

[覆盖管理命令](https://docs.djangoproject.com/en/1.4/ref/contrib/staticfiles/#staticfiles-runserver)的文档解释说，`--insecure`无论设置的状态如何，您都可以使用该标志来完成这项工作`DEBUG`。

# go - 如何执行需要用户输入的命令

> ID：11321437
> 
> 赞同：9
> 
> 时间：2012-07-04T01:42:08.790
> 
> 标签：go

我想从 Go 执行 perforce 命令行“p4”来完成登录工作。“p4 login”要求用户输入密码。

如何运行需要用户在 Go 中输入的程序？

以下代码不起作用。

```
err  = exec.Command(p4cmd, "login").Run()
if err != nil {
    log.Fatal(err)
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T04:04:19.723

从[os/exec.Command](http://golang.org/pkg/os/exec/#Command)文档：

```
// Stdin specifies the process's standard input. If Stdin is
// nil, the process reads from the null device (os.DevNull).
Stdin io.Reader 
```

在执行命令之前设置命令的 Stdin 字段。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-10-25T00:47:17.403

```
// To run any system commands. EX: Cloud Foundry CLI commands: `CF login`
cmd := exec.Command("cf", "login")

// Sets standard output to cmd.stdout writer
cmd.Stdout = os.Stdout

// Sets standard input to cmd.stdin reader
cmd.Stdin = os.Stdin

cmd.Run() 
```

# linux - bash中PHP的preg_replace，具体情况

> ID：11321438
> 
> 赞同：2
> 
> 时间：2012-07-04T01:42:13.610
> 
> 标签：linux, bash, preg-replace, sh

我需要清理一个包含 PHP 序列化值的 mysql 转储（我使用 sed 搜索/替换 url）

在 PHP 中，我会这样做：

```
<?php

$ret_string = preg_replace('!s:(\d+):"(.*?)";!e', "'s:'.mb_strlen('$2').':\"$2\";'", $string );

?> 
```

你会如何在 bash 中做到这一点？

示例原始字符串：

```
a:3:{s:7:"string1";s:4:"test";s:3:"url";s:17:"http://myurl.com";s:7:"string2";s:‌​4:"test";} 
```

我已经用 mynewurl.com 替换了 myurl.com，所以它现在看起来像：

```
a:3:{s:7:"string1";s:4:"test";s:3:"url";s:17:"http://mynewurl.com";s:7:"string2";s:‌​4:"test";} 
```

我需要更改的是字符串的长度以反映新字符串的长度（s：17），以便最终字符串变为：

```
a:3:{s:7:"string1";s:4:"test";s:3:"url";s:19:"http://mynewurl.com";s:7:"string2"‌​;s:4:"test";} 
```

我的 sql 转储中有很多这些，它是文件系统上的一个文件。虽然域已经改变，但url可能有一个额外的路径，因此不同的字符串长度

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T03:45:45.210

在正则表达式中执行此操作的问题在于，正则表达式不适合 JSON 或 PHP 序列化字符串等结构化文本。如果您知道输入数据将始终遵循某种结构，则可以“伪造”事物，但是随着时间的推移，这样编写的代码会出现问题。事情总是会随着时间而改变。如果您可以避免这种黑客攻击，最好这样做。

我们究竟想在这里解决什么问题？您是否无法在需要进行此更改的主机上运行 PHP？序列化的数据在 PHP 中会更容易处理，即使你制作了一个小的 shell 可执行 PHP 脚本来处理它。

```
[ghoti@pc ~]$ cat indexrepl
#!/usr/bin/env php
<?php

// Usage: indexrepl index newcontent [string]

if ($argc < 4) {
  $s='a:3:{s:7:"string1";s:4:"test";s:3:"url";s:16:"http://myurl.com";s:7:"string2";s:4:"test";}';
} else {
  $s=$argv[3];
}

$a=unserialize($s);
$a[$argv[1]]=$argv[2];

print serialize($a) . "\n";

[ghoti@pc ~]$ 
[ghoti@pc ~]$ 
[ghoti@pc ~]$ ./indexrepl url http://example.com/
a:3:{s:7:"string1";s:4:"test";s:3:"url";s:19:"http://example.com/";s:7:"string2";s:4:"test";}
[ghoti@pc ~]$ 
[ghoti@pc ~]$ s='a:3:{s:7:"string1";s:4:"test";s:3:"url";s:19:"http://example.com/";s:7:"string2";s:4:"test";}'
[ghoti@pc ~]$ ./indexrepl string1 foo "$s"
a:3:{s:7:"string1";s:3:"foo";s:3:"url";s:19:"http://example.com/";s:7:"string2";s:4:"test";} 
```

**更新：**根据评论将其包装在一个 shell 结构中：

```
[ghoti@pc ~]$ cat strings.txt
a:1:{s:3:"foo";s:3:"bar";}
a:1:{s:3:"foo";s:3:"baz";}
a:1:{s:3:"foo";s:5:"snert";}
[ghoti@pc ~]$ while read line; do ./indexrepl foo test "$line"; done < strings.txt
a:1:{s:3:"foo";s:4:"test";}
a:1:{s:3:"foo";s:4:"test";}
a:1:{s:3:"foo";s:4:"test";}
[ghoti@pc ~]$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T23:21:22.900

我最终得到了一个 php -r 解决方案。我认为在 bash 中执行此操作会有很多行：

```
mv "$DATA_DIR/final.sql" "$DATA_DIR/final.sql.1"
php -r  "echo preg_replace('!s:(\\d+):\\\\\\\"(.*?)\\\\\\\";!e', \"'s:'.strlen( str_replace (array('\\\\r', '\\\\n', '\\\\t'), ' ', '\$2') ) .':\\\\\\\"\$2\\\\\\\";'\", file_get_contents('$DATA_DIR/final.sql.1') );" >"$DATA_DIR/final.sql"
rm "$DATA_DIR/final.sql.1"; 
```

这适用于我的情况。

# actionscript-3 - 嵌入式声音提前中断

> ID：11321441
> 
> 赞同：2
> 
> 时间：2012-07-04T01:42:52.473
> 
> 标签：actionscript-3, flash, apache-flex, flash-builder, embed

我有一个组合的 Flash Builder/Flash Pro 项目。由于在时间线上维护声音资产的麻烦，我的声音都嵌入到类文件中，例如：

```
[Embed (source="/mp3/Welcome_01_V.mp3", mimeType="audio/mpeg")]
private static const WELCOME_1:Class; 
```

这些文件然后由需要它们的符号的基类引用，嵌入到第 10 帧上的 Actionscript（因为第二个帧标签位于第 10 帧上，以便为您提供阅读第一个帧的空间）。

我发现其中一些声音并没有一直播放，但是 SoundChannel 调度了“soundComplete”事件，它的最终位置与声音的长度相匹配。

所有声音都以 44Hz / 16 kbps 从 wav 转换为 mp3。我通过包含一个扩展 Sound 的虚拟 SoundAsset 来伪造编译器以避免对 Flex 的引用。

我不知道要采取什么其他步骤来调试它。有没有办法确定问题是在编译端还是在运行端？

# 更新

我尝试过的更多事情：

*   查看大小报告：嵌入形式的非工作声音比源 mp3 小
*   摆脱了我自己的 BitmapAsset 并让 Flash 在 Flex 框架中链接并做任何事情（肯定更糟）
*   将编码从 44 kHz 降低到 22 kHz（没有改善或更糟）
*   将比特率降至 8kbps（我使用的工具支持的最低 dbPowerAmp）。这通常会有所帮助，但我仍然通常使用文件末尾的一两个词
*   删除了编码中的两个参数。这有助于一些仅仅降低比特率并没有帮助的人，但不是所有文件。再加上它听起来很小。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T07:55:48.187

对于 Flash 音频，如果您有高质量的源 wav，我建议使用 wav 文件将声音资源导入 FLA。否则，您也可以考虑将 mp3 转换为 wav。然后将 FLA 导出设置设置为您想要的质量，Flash 将以您设置的质量将您的 wav 转换为自己的格式，希望问题更少。

一旦你这样做了，你就可以在你的库中导出动作脚本的声音符号，并设置一个类名，就像你嵌入它的方式一样。

我使用的另一个技巧是我有一个 FLA 仅用于声音资产，它可以用来存储我想要的大波浪。当我导出它时，它会变成一个小的 SWF 文件，然后我可以将其嵌入到我的主应用程序中。这样，我每次导出 swf 时都不会让 Flash 将 wavs 重新转换为 swf。相反，它只是复制速度更快的 swf 数据。

```
 [Embed(source="Audio/Sfx.swf", symbol="WELCOME_1_WAV")]
    private static const WELCOME_1:Class; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-16T20:49:14.333

如果您在 Flash Pro 中遇到音频中断问题，您可能需要检查您的帧速率。

我遇到了声音中断的问题（在 Flash pro CC 2014 中）。我的问题原来与设置为 25 而不是默认的 24 的帧速率有关。我一直在使用 25 来解决与该项目中的任何内容无关的问题，所以我的解决方案是将 FPS 更改为 24，它调用移动所有同步动画以重新与相应音频对齐的必要性。

为什么不管使用正确的关键帧，当帧速率为 25 时，长（ish）音轨最终会被切断是一个谜。然而，这解决了这些症状，因此如果您在 Flash Pro 中遇到音频中断问题，您可能需要检查您的帧速率。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-11-10T18:56:23.873

我的症状特别是当音频剪辑特别长并且深入时间线时。

什么对我有用：我在音频编辑器中打开了音频文件，并在结尾添加了几秒钟的静音。

祝你好运！- J.霍尔

# android - 如何使多个图标覆盖仅在 Google Maps MapView 上的某个缩放级别后出现？

> ID：11321445
> 
> 赞同：1
> 
> 时间：2012-07-04T01:43:29.387
> 
> 标签：android, overlay, zooming, android-mapview, overlay-icon-disappear

在使用 Maps API 时，我是初学者，所以请多多包涵，我知道还有很多其他帖子处理相同的问题，但我仍然卡住了。

*   我已经能够在我的地图上放置一些叠加图像。我现在唯一遇到的问题是，当我缩小足够的级别时，我不知道如何使它们消失，因为这会导致叠加图像挤在一起并重叠 - 基本上使它们在那个级别无用。因此，对于如何使它们出现（在缩放级别 18 之后）的任何帮助将不胜感激。

*   我曾尝试使用缩放侦听器和 if 语句，但它没有任何变化 - 很可能是因为我不知道我需要在哪里实现它和/或启用它需要哪些其他方法。另外，我不确定如何实现 draw() 方法，因为许多其他人已经使用它来使其缩放和消失。

**编辑：**

**这些是我迄今为止成功执行的两个类（在应用答案之后）：**

Map.java**文件**：

```
public class Map extends com.google.android.maps.MapActivity implements
    OnOverlayGestureListener {

private boolean mShowOverlays = true;
private MapView mMapView;
MapView mapView;
MapController mapController;

private void setOverlayVisibility() {
    boolean showOverlays = mMapView.getZoomLevel() > 18;
    if (showOverlays != mShowOverlays) {
        mShowOverlays = showOverlays;
        for (Overlay overlay : mMapView.getOverlays()) {
            if (overlay instanceof ItemOverlay) {
                ((ItemOverlay) overlay).setVisible(showOverlays);
            }
        }
    }

}

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mapView = (MapView) findViewById(R.id.mapview);
    mapView.setBuiltInZoomControls(true);
    mapController = mapView.getController();
    mapController.setZoom(17);

    boolean showOverlays = mMapView.getZoomLevel() > 18;

    List<Overlay> mapOverlays = mapView.getOverlays();
    Drawable lot = this.getResources().getDrawable(R.drawable.lot);
    ItemOverlay parking_lot = new ItemOverlay(lot, this);
    GeoPoint point1 = new GeoPoint(43806622, -79219797);
    OverlayItem parking = new OverlayItem(point1, "Shopping Center","Parking Lot");

    parking_lot.addOverlayItems(parking);
    mapOverlays.add(parking_lot);

    Drawable logo = this.getResources().getDrawable(R.drawable.entrance);
    ItemOverlay ent = new ItemOverlay(logo, this);
    GeoPoint start = new GeoPoint(43805697, -79221031);
    mapController.setCenter(start);
    OverlayItem welcome = new OverlayItem(start, "Welcome", " ");

    ent.addOverlayItems(welcome);
    mapOverlays.add(ent);

    public <ZoomEvent> boolean onZoom(ZoomEvent ze, ManagedOverlay mo) {
        setOverlayVisibility();    
        return true;
    }

}

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}

} 
```

ItemOverlay.java**文件**：

```
public class ItemOverlay extends ItemizedOverlay<OverlayItem> {
private ArrayList<OverlayItem> mOverlays = new ArrayList<OverlayItem>();
private Context mContext;
private boolean visible = true;

private boolean mVisible = true;

    public void setVisible(boolean value) {
       mVisible = value;
    }
    public boolean isVisible() {
       return mVisible ;
    }

    @Override
    public void draw(android.graphics.Canvas canvas, MapView mapView, boolean shadow) {
        if (mVisible) {
            super.draw(canvas, mapView, shadow);
        }
     }

public ItemOverlay(Drawable defaultMarker, Context context) {
    super(boundCenterBottom(defaultMarker));
    // TODO Auto-generated constructor stub
    mContext = context;
}

public void addOverlayItems(OverlayItem overlay) {
    mOverlays.add(overlay);
    populate();
}

@Override
protected OverlayItem createItem(int i) {
    // TODO Auto-generated method stub
    return mOverlays.get(i);

}

@Override
public int size() {
    // TODO Auto-generated method stub
    return mOverlays.size();
}

@Override
protected boolean onTap(int index) {
    // TODO Auto-generated method stub
    OverlayItem item = mOverlays.get(index);
    AlertDialog.Builder dialog = new AlertDialog.Builder(mContext);
    dialog.setTitle(item.getTitle());
    dialog.setMessage(item.getSnippet());
    dialog.show();
    return true;
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T02:30:17.630

我真的很喜欢使用 Android 的**OverlayManager**库。它为 Google 地图代码添加了一些功能，并使一些事情变得更容易。 [在这里找到它，](http://code.google.com/p/mapview-overlay-manager/)包括[一些使用它的演示代码](http://code.google.com/p/mapview-overlay-manager/downloads/detail?name=OverlayManagerDemo.zip&can=2&q=)

**选项#1：**如果你使用它，那么你可以为你的 MapActivity 使用 OverlayManager 的手势监听器接口，接收每个缩放（in/out）事件的回调。

```
public class Map extends MapActivity implements OnOverlayGestureListener 
{ 
    private boolean mShowOverlays = true;
    private MapView mMapView;     // assign this in onCreate()

    private void setOverlayVisibility() {
        boolean showOverlays = mMapView.getZoomLevel() >= 18;
        if (showOverlays != mShowOverlays) {
           mShowOverlays = showOverlays;
           for (Overlay overlay : mMapView.getOverlays()) { 
              if (overlay instanceof ItemOverlay) { 
                 ((ItemOverlay)overlay).setVisible(showOverlays); 
              } 
           } 
        }
    }

    // this is the onOverlayGestureListener callback:
    public boolean onZoom(ZoomEvent ze, ManagedOverlay mo) {
        setOverlayVisibility();    
        return true;
    }
} 
```

您还必须将您的`Map`实例添加为带有`ManagedOverlay.setOnOverlayGestureListener()`. 请参阅示例代码。

最后，在您的 ItemOverlay 类中，您可以覆盖该`draw()`方法，并根据覆盖是否已标记为可见有选择地绘制。您需要添加一个自定义`visible`属性：

```
public class ItemOverlay extends ItemizedOverlay {

    private boolean mVisible = true;

    public void setVisible(boolean value) {
       mVisible = value;
    }
    public boolean isVisible() {
       return mVisible ;
    }

    @Override
    public void draw(android.graphics.Canvas canvas, MapView mapView, boolean shadow) {
       if (mVisible) {
           super.draw(canvas, mapView, shadow);
       }
    }
 } 
```

**选项 #2：**现在，仅出于这一目的使用 Overlay Manager 库可能是矫枉过正。因此，另一种可能更简单的替代方法是[按照此堆栈溢出答案中描述](https://stackoverflow.com/a/5345237/119114)的方式创建*缩放侦听*器。Kurru 提供的代码会出现在你的课堂上。您将在答案的代码中替换它：`Map`

```
checkMapIcons(); 
```

使用我上面展示的方法：

```
setOverlayVisibility(); 
```

所以，现在你有两种方法来“观察”缩放级别，覆盖`ItemOverlay.draw()`允许你让标记在你喜欢的时候消失（在这个例子中缩放级别 < 18）。

# jquery - JQuery：单击复选框时更改元素的样式

> ID：11321449
> 
> 赞同：1
> 
> 时间：2012-07-04T01:44:31.300
> 
> 标签：jquery, checkboxfor

我有一个 html 元素（使用 MVC3 Razor）

```
 <h2 class="price">
              @Html.LabelFor(vm => vm.Price)
              @Html.Encode(@Model.Price)
       </h2>
        <div id="checkbox-price">
              @Html.CheckBoxFor(vm => vm.IncludeToPayment) Include in payment.
        </div> 
```

当用户使用 JQUery 取消选中/选中复选框时，如何更改 h2 元素的样式（在这种情况下，我想要 text-decoration: line-through 里面的项目）？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T01:48:35.043

```
$('#checkbox-price input:checkbox').change(function(){
  if (!$(this).is(':checked')) {
     $('.price').css('text-decoration', 'line-through')
  } else {
     $('.price').css('text-decoration', 'none')
  }
}) 
```

**或者**

```
 $('#checkbox-price input:checkbox').change(function() { 
            // or $(`input[type="checkbox"]')
            var $obj = $('.price');
            if (!$(this).is(':checked')) {
              $obj.css('text-decoration', 'line-through'); //or addClass                
            } else {
              $obj.css('text-decoration', 'none'); // or addClass                
            }
        }) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T01:58:37.140

这是一个简单的代码和[现场演示](http://jsfiddle.net/BCZh9/)。

这适用于所有复选框

```
$('input[type="checkbox"]').click(function() {
    if (this.checked) {
        //alert('Checked');
        $("h2").addClass('newclass');
    } else {
        //alert('Unchecked');
        $("h2").removeClass('newclass');
    }
});​ 
```

如果您想申请特定的复选框，请使用下面

```
$('input[type="checkbox"]') to $('input.someclass) 
```

​</p>

# mysql - 将 MySQL 数据库导出到 CouchDB 的最简单方法是什么？

> ID：11321452
> 
> 赞同：2
> 
> 时间：2012-07-04T01:44:57.740
> 
> 标签：mysql, node.js, database-design, nosql, couchdb

我只是想通过重写一个非常简单的 MySQL 和 PHP 应用程序来玩弄 NOSQL 和 Node.js，这样学生就可以给教授留下评论：

```
Table: Prof
Columns: id, first, last, university, department

Table: Comments
Columns: id, user_id, likes, data 
```

这种关系基本上是一个教授有很多评论，一个评论属于一个教授。

我认为 CouchDB/JSON 版本应该是这样的：

```
{ "Profs" : [{
  "Comments" : [ {"data" : "comment1", "likes" : 42 } , { "data" : "comment2", "likes" : 1} ],
 "first" : "Carlos",
 "last" : "Marx",
 "university" : "some university",
 "department" : "math"
}, {...another prof with comments...}], 
 } 
```

我的第一个问题是，有没有可以运行的工具或脚本将我的所有数据导入到 CouchDB 可以工作的东西中？如果没有，你会推荐什么？我可以将它从 phpmyadmin 导出到 .sql 和 .cvs。

我的第二个问题是我是否正确地用 JSON 构造了我的数据？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T12:14:32.773

这是一个经典的博文+评论类型的场景。

与其对整个数据库使用单一的 JSON 文档，不如将评论和 profs 拆分为单独的 JSON blob。我建议使用电子邮件地址作为 ID，因为它们是独一无二的，几乎每个人都有。使用 CouchDB 的 include_docs 功能将 prof 文档和评论文档链接在一起。

```
{
  "_id": "carlos_marx@uni.de",
  "university" : "Some Uni",
  "department" : "Math",
  "name" : "Carlos Marx"
}

{
  "_id": "comment1",
  "prof": "carlos_marx@uni.de",
  "comment": "Very smart"
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T08:35:54.687

您真的不只是将 MySQL 数据库导出到 CouchDB 或任何其他 NoSQL 数据库。它们是不同的范例，需要改变您对数据存储方式的看法。关系数据库和文档数据库都有很好的用例，虽然有很多重叠，但它们都擅长不同的事情。

对于 NoSQL 数据库，了解数据的使用方式非常重要。您的应用程序如何编写和使用数据，以及数据是否经常更新，这些都对您应该如何设计文档有非常重要的影响。例如在你的例子中。可以编辑评论吗？如何查看评论？您是总是显示所有这些还是希望对结果进行分页？添加评论的频率如何？它们可以被移除吗？在不知道其中一些问题的答案的情况下，我无法确定 CouchDB 是否是解决该问题的正确 NoSQL 解决方案！

很抱歉，这是对您问题的非直接回答，但是将关系数据库迁移到 NoSQL 解决方案作为从表到集合的简单映射是失败的原因。一旦您花时间设计文档在 CouchDB 中的外观，数据就必须经过转换过程。这可以采取多种形式。您可以编写一个可以从 MySQL 读取并写入 CouchDB 的应用程序，或者您可以导出为其他格式并通过脚本导入该格式。没有魔术按钮可以将您的 MySQL 数据库转换为 Couch 数据库，如果有，由于上述问题，它确实不应该存在。

# asp.net-mvc-3 - AJAX 在 MVC 页面上不起作用

> ID：11321456
> 
> 赞同：-2
> 
> 时间：2012-07-04T01:45:16.587
> 
> 标签：asp.net-mvc-3, asp.net-mvc-ajax

我正在将 MVC3 与 Razor 一起使用。我有一个想要使用 AJAX 加载的动作。我正在使用 jQuery UIblock 插件[http://jquery.malsup.com/block/#](http://jquery.malsup.com/block/#)向用户显示一些等待图像。

action对应的View如下图：

```
@using (Ajax.BeginForm("Search", "Home", new AjaxOptions() { HttpMethod = "GET", OnBegin = "BlockUI", OnComplete = "UnBlockUI", UpdateTargetId = "page" }))
{
...................
} 
```

Javascript代码如下所示：

```
<script type="text/javascript">
function BlockUI() {
    $.blockUI({ message: "<img src='@Url.Content("~/Content/images/loading.gif")' />" });
}

function UnBlockUI() {
    $.unblockUI({ message: "Done....." });
} 
```

现在我使用链接重定向到 Action

```
location.href = '@Url.Content("~/Home/Search/")'; 
```

加载搜索视图时，我看不到任何显示正在加载图像的 Div。

同样的事情在其他页面上工作，唯一的区别是在其他页面上 Image 来自**POSTBACK**。

此外，所有 Ajax **POST**操作都在工作，但不是**GET**操作。

这里的搜索页面有什么问题？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T07:24:53.807

> 现在我使用链接重定向到 Action
> 
> location.href = '@Url.Content("~/Home/Search/")';

这里的关键字是*我正在重定向*。我不是*在发送 AJAX 请求*。当您重定向时，浏览器只是停止在当前页面上运行任何脚本并重定向到目标位置。当您重定向时，您订阅的`OnBegin`and`OnComplete`方法将永远不会触发，这就是您看不到任何 blockUI 的原因。

# c - (x < 8) 当 x = -3 (double) 时返回 false

> ID：11321458
> 
> 赞同：0
> 
> 时间：2012-07-04T01:45:24.513
> 
> 标签：c, if-statement, double

代码如下：

```
if (chan->sampcnt < 8)
{
    *data = 0;
    return;
} 
```

`chan`包含指向有效结构的指针。在调试器中，列出的``chan->sampcnt`值为`-3`。不知何故，它不会将条件解析为 false 并在 if 语句的范围内执行代码。这种情况很少见，但它构成了一个主要错误。

`sampcnt`的默认值 ,`-3`多次运行此条件。它几乎总是能正确解决，但当它没有解决时，事情会很快变得丑陋。到底发生了什么？我说不出话来。我以前从未遇到过这样的事情。提前致谢。

更新（鼓励重新开放）：

```
struct channel_struct
{
    channel_struct()
    {}
    u32 num;
   u8 vol;
   u8 datashift;
   u8 hold;
   u8 pan;
   u8 waveduty;
   u8 repeat;
   u8 format;
   u8 keyon;
   u8 status;
   u32 addr;
   u16 timer;
   u16 loopstart;
   u32 length;
   u32 totlength;
   double double_totlength_shifted;
   double sampcnt;
   double sampinc;
   // ADPCM specific
   u32 lastsampcnt;
   s16 pcm16b, pcm16b_last;
   s16 loop_pcm16b;
   int index;
   int loop_index;
   u16 x;
   s16 psgnoise_last;
}; 
```

这是一个多线程应用程序。我不熟悉所有代码，因为它是一个庞大而复杂的项目。我怀疑 sampcnt 在另一个线程中被更改，但是当错误发生时，它表现出令人震惊的规律性。这使我远离某种原子性打嗝；但是，这仍然是一个考虑因素。我还没有确定修改`chan->sampcnt`在另一个线程中运行的代码，但它可能就在那里。

只是要清楚。 `sampcnt`是双类型的，我敢肯定。它被声明为双精度，调试器将其列为双精度。此外， chan 是指向 type 的指针`struct channel_struct`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T02:13:54.623

您可能偶尔会覆盖 chan->sampcnt，因此当它失败时它并不是真正的 -3 ...这是一个常见问题，尤其是当 chan 指向分配的内存时。您确实没有提供足够的信息，也没有进行足够的调试。例如，您可以在进行测试之前将 chan->sampcnt 的值保存在一个全局变量中，然后在出现问题时检查该值，看看它是否真的是您所期望的。您应该做的最后一件事是假设编译器或硬件中存在错误......几乎可以肯定它在您的程序中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T01:51:07.207

将其重写为以下形式应该会给编译器一个指出问题的机会。

```
double toTest = chan->sampcnt;
if ( toTest < 8)
{
    *data = 0;
    return;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T02:44:55.667

```
int test = (int)chan->sampcnt;
if ( test < 8)
{
   *data = 0;
   return;
} 
```

可能`chan->sampcnt`是无符号类型

# php - Php 字符串操作（提取第一个单词）

> ID：11321467
> 
> 赞同：1
> 
> 时间：2012-07-04T01:48:42.923
> 
> 标签：php, string

我在下面有一段，我想从中得到一个句号每个结尾的第一个词。

```
$paragraph="Microsoft is writing down $6.2 billion of the goodwill within its OSD. It's worth noting that at the time of the acquisition, the company recorded $5.3 billion of goodwill assigned to the OSD, bringing its total carrying balance up to $5.9 billion in September of that year. The goodwill in the OSD had climbed up to $6.4 billion by March of this year, so this accounting charge is wiping out the vast majority of that figure."; 
```

例如，我可以做到这一点。

```
$sentences=explode('.',$paragraph);
print_r( $sentences); 
```

它打印

```
Array ( [0] => Microsoft is writing down $6
        [1] => 2 billion of the goodwill within its OSD 
        [2] => It's worth noting that at the time of the acquisition, the company recorded $5 
        [3] => 3 billion of goodwill assigned to the OSD, bringing its total carrying balance up to $5                            
        [4] => 9 billion in September of that year 
        [5] => The goodwill in the OSD had climbed up to $6 
        [6] => 4 billion by March of this year, so this accounting charge is wiping out the vast majority    of that figure 
        [7] => ) 
```

但是，我在徘徊如何从每个数组中获取第一个单词。例如，如何创建一个函数来获取第一个单词，如下例所示：

微软 2 它是 3 9 4

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T01:52:56.133

在每个句子上使用`explode()`，但使用空格，而不是句号。

```
$paragraph = "Microsoft is writing down $6.2 billion of the goodwill within its OSD. It's worth noting that at the time of the acquisition, the company recorded $5.3 billion of goodwill assigned to the OSD, bringing its total carrying balance up to $5.9 billion in September of that year. The goodwill in the OSD had climbed up to $6.4 billion by March of this year, so this accounting charge is wiping out the vast majority of that figure.";

$sentences = explode('.', $paragraph);

foreach($sentences as $sentence){
 $words = explode(' ', trim($sentence));
 $first = $words[0];
 echo $first;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T01:56:48.797

```
$paragraph="Microsoft is writing down $6.2 billion of the goodwill within its OSD. It's worth noting that at the time of the acquisition, the company recorded $5.3 billion of goodwill assigned to the OSD, bringing its total carrying balance up to $5.9 billion in September of that year. The goodwill in the OSD had climbed up to $6.4 billion by March of this year, so this accounting charge is wiping out the vast majority of that figure.";

firstWords($paragraph);

function firstWords($paragraph) {
  $sentences = explode('.', $paragraph);

  foreach ($sentences as $sentence) {
   $words = explode(' ', trim($sentence));
   echo $words[0];
  }
} 
```

# ios - CALayers 和音频

> ID：11321473
> 
> 赞同：0
> 
> 时间：2012-07-04T01:49:58.790
> 
> 标签：ios, calayer, avaudioplayer

我有一个带有图像的 CALayer，当我触摸它时，它会产生动画效果，它可以工作，非常棒。我现在想做的还有一个声音片段，当你按下相同的图像时播放。我发现这很棘手，因为 CALayer 来自名为 BounceView 的 UIView 类。我在 MainViewController 上创建了一个 BounceView 实例。如果我没有使用正确的术语，我深表歉意。我是否需要将我的音频代码放在我的 MainViewController 中，然后使用委托来允许 BounceView 触发 MainViewController 上的方法？非常感谢任何帮助或指导。

主视图控制器.h

```
#import <UIKit/UIKit.h>
#import <Foundation/Foundation.h>
#import <QuartzCore/QuartzCore.h>
#import <AVFoundation/AVFoundation.h>
#import <CoreAudio/CoreAudioTypes.h>

@interface MainViewController : UIViewController <AVAudioPlayerDelegate>

@property (nonatomic, retain) IBOutlet UIView *BounceView;
@property (strong, nonatomic) AVAudioPlayer *audioPlayer;

- (IBAction)playAudio:(id)sender;

@end 
```

主视图控制器.m

```
#import "MainViewController.h"
#import "BounceView.h"

@interface MainViewController ()

@end

@implementation MainViewController 
@synthesize BounceView;
@synthesize audioPlayer;

- (void)viewDidLoad
{
    [super viewDidLoad];

  //Setup the audio player
  NSURL *noSoundFileURL=[NSURL fileURLWithPath:
                       [[NSBundle mainBundle] 
                        pathForResource:@"InTheMood" ofType:@"mp3"]];
  self.audioPlayer =  [[AVAudioPlayer alloc] 
                     initWithContentsOfURL:noSoundFileURL error:nil];

  // Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload
{  
  [super viewDidUnload];
  // Release any retained subviews of the main view.
}

- (void)loadView
{
  NSLog(@"loadView");
  // Create a view
  CGRect frame = [[UIScreen mainScreen] bounds];
  BounceView *v = [[BounceView alloc] initWithFrame:frame];

  // Set it as *the* view of this view controller
  [self setView:v];    
}

- (IBAction)playAudio:(id)sender {
  //    self.audioPlayer.delegate=self;
  [self.audioPlayer play];
}

@end 
```

弹跳视图.h

```
#import <UIKit/UIKit.h>
#import <Foundation/Foundation.h>
#import <QuartzCore/QuartzCore.h>
#import "MainViewController.h"

@interface BounceView : UIView
{
   CALayer *myLayer;  
}

@end 
```

BounceView.m 如果需要，我将提供此代码，但我不想重载代码。在这里，我创建新层打开（alloc init），给它大小，位置，创建 UIImage，获取底层 CGImage 并将其放在层上，然后创建视图层的子层。

再次，非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T02:36:28.433

由于 BounceView 是一个 UIView 类而不是 UIViewController，我会让播放音频到 MainViewController。

# python - Python virtualenviroments - 如何选择 python 版本

> ID：11321476
> 
> 赞同：0
> 
> 时间：2012-07-04T01:50:26.697
> 
> 标签：python, virtualenv

我正在运行 ubuntu 11.10，我的默认 python 是 2.7。我刚刚安装了 python 2.6.8，当我创建虚拟环境时，我希望虚拟环境使用 python 2.6。

我怎么做？

```
 mkvirtualenv myve --no-site-packages ????? 
```

# java - 读取文件时缺少第一个字母

> ID：11321477
> 
> 赞同：1
> 
> 时间：2012-07-04T01:50:34.340
> 
> 标签：java, android, file-io

我正在从文件中检索数据，出于某种原因，我每次都错过了第一个字符。我的代码。

```
public String readFile(){
String str = "Not Authenticated";
//Reading the file  
 try{
        FileInputStream fIn = openFileInput(fileName);
        InputStreamReader isr = new InputStreamReader(fIn); 
        char[] inputBuffer = new char[isr.read()]; //str.length()

        // Fill the Buffer with data from the file 
        try {
            isr.read(inputBuffer);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            return e.toString();
        } 

        // Transform the chars to a String 
        String readString = new String(inputBuffer); 
        str = readString;

    } catch (IOException ioe)  
      {return ioe.toString();} 
    return str;
} 
```

该文件包含单词“True”我也得到“rue”，当我创建文件时，第一个字母不能是大写字母？如果我使用大写文件，则永远找不到文件，我猜这两者不相关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T01:52:52.183

```
 char[] inputBuffer = new char[isr.read()]; //str.length() 
```

这不是从你的读者那里读出一个字符吗？

编辑：[http ://docs.oracle.com/javase/1.4.2/docs/api/java/io/InputStreamReader.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/InputStreamReader.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T02:03:36.593

如果该文件是`text`文件，则通过`BufferedReader`.

```
 StringBuilder sb=new StringBuilder();
  BufferedReader br=null;

  try{
   br=new BufferedReader(new InputStreamReader(openFileInput(fileName));
   String line=null;
   while((line = br.readLine()) != null)
    {
      sb.append(line);
     }
   }catch(Exception ex){
     //
   }finally{
    if(br!=null)
      br.close();
   }
  return sb.toString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T01:58:25.943

isr.read() 将读取单个字符（即第一个字符）。

要获取文件的大小，您可以使用

```
long length = new File(fileName).length() 
```

有关详细信息，请参阅[File.length()](http://developer.android.com/reference/java/io/File.html#length%28%29)函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T01:59:08.617

您可以使用 File 类来查找文件的长度，：

```
File f=new File("c:\\new\\abc.txt"); 
```

`f.length();`将以字节为单位返回大小您还应该关闭打开的文件。经过`isr.close();`

# tridion - SDL Tridion 组件中的组件字段和条件字段值中的工具提示（说明）

> ID：11321484
> 
> 赞同：0
> 
> 时间：2012-07-04T01:52:42.017
> 
> 标签：tridion, tridion-2011

1.  是否可以使用 GUI 扩展为 SDL Tridion 组件字段实现工具提示（指令）？如果是这样，您能否提供有关如何完成的详细信息。只要将光标放在字段上，工具提示就会出现在字段旁边。

2.  根据 SDL Tridion 组件的一个字段中的选定值，是否可以将其他字段中的值限制为特定的一组值？例如，国家和城市字段。选择国家时，城市字段应仅显示所选国家的城市。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T13:42:26.327

# 带有字段说明的自定义工具提示

您可以考虑使用自定义 URL 来完成相同的功能。您可以为每个字段提供单独的 URL，因此您可以轻松地为一个字段提供“/Extensions/Instructions/Article_Body.html”，为另一个字段提供“”/Extensions/Instructions/Article_NavTitle.html”。这样用户可以点击用于弹出带有说明的 HTML 文件的字段名称。虽然 GUI 与您描述的不同，但它需要的自定义编码较少。

如果您按照要求中的描述卡在 GUI 上，我建议您从编写自己的 GUI 扩展开始，并向我们展示您已经走了多远。

# 字段之间的依赖关系

正如 Jeremy 所说，这不是 Tridion 中的默认选项，但可以在 GUI 扩展中完成（就像几乎任何事情一样）。

在这些问题中已经相当广泛地涵盖了这种类型的要求：

*   [在 SDL Tridion 2011 SP1 的架构中设计 Tridion 中的动态下拉菜单](https://stackoverflow.com/questions/11031592/dynamic-drop-downs-in-tridion-designing-in-schema-in-sdl-tridion-2011-sp1)
*   [如何在 SDL Tridion 2011 SP1 中将嵌入模式作为内容模式的下拉列表传递](https://stackoverflow.com/questions/10281646/how-to-pass-embedded-schemas-as-drop-down-for-the-content-schema-in-sdl-tridion)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T07:56:25.757

查看[禁用仪表板按钮时我们可以显示不同的工具提示吗？](https://stackoverflow.com/questions/11279018/dashboard-button-extension-tooltip)问题 1 的答案。问题 2 的默认选项是不可能这样做。不过，GUI 扩展可能是答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T00:46:47.380

# 自定义 URL 和描述

在自定义 URL 上向 Frank +1。特定于组织的帮助页面绝对可以帮助作者。尽管他们可能不会为此使用自定义 URL，但请参阅[Yale 的一个很棒的用户指南示例](http://medicine.yale.edu/web/help/tridion_guides/index.aspx)。

**不要忘记描述字段。**这是为作者提供每个领域基本指导的最简单方法，它显示为工具提示。

对于字段中的文本*，*您还可以使用默认设置。如果您使用的是内联 UI（以前称为 SiteEdit），请考虑使用内容（组件）类型来设置默认值和说明。

# 字段依赖项的类别和关键字（作为树）

通过将子类别（例如国家/地区）设置为关键字，使用“树”选项显示的类别和`abstract`关键字。将可选关键字（例如城市）设置为`normal`。然后选择树选项，以便更轻松地在选项之间导航。

*如果用例实际上是国家和城市，请考虑提供比树选择器或下拉菜单更好的界面。*

关键是只有`normal`关键字会保存在组件中。但是，[有一些解决方法可以获取关键字 path](https://stackoverflow.com/questions/11191010/keyword-path-in-sdl-tridion)。

更新：自定义 URL 未被弃用，只有旧脚本被弃用，以支持 SDL Tridion 2011 SP1 中的新方法。

# ms-word - VSTO 词扩展相互了解

> ID：11321487
> 
> 赞同：0
> 
> 时间：2012-07-04T01:52:52.703
> 
> 标签：ms-word, vsto, office-interop

我需要为 Word 2010 的工具栏插件扩展一个按钮，该按钮可以使用配套的 C# Word 2010 文档（模板）检测文档。

场景是：当我点击工具栏（我们的自定义工具栏）中的一个按钮时，它会在文档中激活一个已经用 C#/WPF 编程的 Form。

Bing 让我失望了，我一直在寻找 COM 的疯狂之处。文档的“_CodeName”很容易找到，但它是一个字符串，是否有一个隐藏在文档某处的 .net 插件实例？

这甚至可能吗？

# r - 将 dlply 与 pROC 一起使用

> ID：11321490
> 
> 赞同：0
> 
> 时间：2012-07-04T01:53:28.790
> 
> 标签：r, plyr, roc

我正在尝试将`roc()`pROC 包中的函数应用于 dataframe 中的特定变量，其中的`df`子集`df$site`由看起来像“01”、“02”、“03”的字符组成。该函数`roc()`返回一个列表，因此我希望我的对象`roc_site`是一个列表，该列表又包含每个站点的结果列表。

```
roc_site <- dlply(
  .data = df, 
  .variables = "site", 
  .fun = roc, 
  .progress = "text",
  response = df$Risk,
  predictor = df$Rating, 
  na.rm = TRUE, plot = TRUE) 
```

这运行成功，并且`roc_site`是一个列表，每个站点包含一个列表，但每个站点的结果是相同的；它没有将数据框分开。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T02:03:37.950

`.fun`您传递给的函数`dlply`需要接受数据帧的整个块作为其（第一个）参数。

所以在这种情况下，你真正想要的是编写你自己的小函数，它将获取你的数据框并计算你想要的。例如

```
foo <- function(x){
    roc(x$Risk, x$Rating, na.rm = TRUE, plot = TRUE)
} 
```

然后将该函数传递给`.fun`.

您获得相同结果的原因是，对于每个块，`dlply`都在调用您的块，但*每次都*`roc`传递`df$Risk`和，这些是*整个数据集*的向量。`df$Rating`

# mysql - 何时在 MySQL 中使用单引号、双引号和反引号

> ID：11321491
> 
> 赞同：727
> 
> 时间：2012-07-04T01:53:36.917
> 
> 标签：mysql, sql, quotes

我正在尝试学习编写查询的最佳方法。我也明白保持一致的重要性。到目前为止，我随意使用单引号、双引号和反引号，没有任何真正的想法。

例子：

```
$query = 'INSERT INTO table (id, col1, col2) VALUES (NULL, val1, val2)'; 
```

此外，在上面的示例中，考虑 , `table`,`col1`等`val1`可能是变量。

这个的标准是什么？你做什么工作？

[我在这里阅读了类似问题的答案大约 20 分钟，但似乎这个问题没有明确的答案。]

* * *

## 回答 #1

> 赞同：704
> 
> 时间：2012-07-04T01:57:55.800

反引号用于表和列标识符，但仅当标识符是[MySQL 保留关键字](https://dev.mysql.com/doc/refman/5.7/en/keywords.html)，或者标识符包含空白字符或超出有限集合的字符时才需要（见下文） 通常建议避免使用保留关键字尽可能作为列或表标识符，避免引用问题。

单引号应该用于`VALUES()`列表中的字符串值。MySQL 也支持字符串值的双引号，但单引号被其他 RDBMS 更广泛地接受，因此使用单引号而不是双引号是一个好习惯。

MySQL 还期望`DATE`和`DATETIME`文字值作为字符串单引号，如`'2001-01-01 00:00:00'`. 有关更多详细信息，请[参阅日期和时间文字](https://dev.mysql.com/doc/refman/5.7/en/date-and-time-literals.html)`-`文档，特别是在日期字符串中使用连字符作为段分隔符的替代方法。

因此，使用您的示例，我将双引号 PHP 字符串并在 values 上使用单引号`'val1', 'val2'`。 `NULL`是一个 MySQL 关键字，并且是一个特殊的（非）值，因此不被引用。

这些表或列标识符都不是保留字或使用需要引用的字符，但我还是用反引号引用了它们（稍后会详细介绍......）。

`NOW()`不应引用RDBMS 的本机函数（例如，在 MySQL 中），尽管它们的参数受制于已经提到的相同字符串或标识符引用规则。

```
反引号 (`)
表列────────┬──────┬──┬──┬──┬────┬──┬────┬──┬────┬──┬ ────────┐
                      ↓ ↓ ↓ ↓ ↓ ↓ ↓ ↓ ↓ ↓ ↓ ↓
$query = " INSERT INTO `table` (`id`, `col1`, `col2`, `date`, `updated`)
                       值（NULL，'val1'，'val2'，'2001-01-01'，NOW（）） “；
                               ↑↑↑↑ ↑ ↑ ↑ ↑ ↑ ↑ ↑↑↑↑↑
不加引号的关键字─────┴┴┴┘ │ │ │ │ │ │ │││││
单引号 (') 字符串────────────┴────┴──┴────┘ │ │ │││││
单引号 (') 日期──────────────────────────┴──────────┘ ││││ │
不带引号的函数────────────────────────────────────────┴┴┴┴┘    

```

### 变量插值

变量的引用模式不会改变，但如果您打算直接在字符串中插入变量，则必须在 PHP 中使用双引号。只需确保您已正确转义变量以在 SQL 中使用。（[建议改用支持预处理语句的 API，以防止 SQL 注入](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)）。

```
// 与一些变量替换相同
// 这里，变量表名 $table 用反引号括起来，而变量
// 在 VALUES 列表中是单引号的
$query = "INSERT INTO `$table` (`id`, `col1`, `col2`, `date`) VALUES (NULL, '$val1' , '$val2' , '$date' )";

```

### 准备好的报表

使用准备好的语句时，请查阅文档以确定是否必须引用语句的占位符。PHP、PDO 和 MySQLi 中最流行的 API需要不带*引号*的占位符，其他语言中的大多数准备好的语句 API 也是如此：

```
// PDO example with named parameters, unquoted
$query = "INSERT INTO `table` (`id`, `col1`, `col2`, `date`) VALUES (:id, :col1, :col2, :date)";

// MySQLi example with ? parameters, unquoted
$query = "INSERT INTO `table` (`id`, `col1`, `col2`, `date`) VALUES (?, ?, ?, ?)"; 
```

### 在标识符中需要反引号引用的字符：

[根据 MySQL 文档](http://dev.mysql.com/doc/refman/5.5/en/identifiers.html)，您不需要使用以下字符集引用（反引号）标识符：

> ASCII：（`[0-9,a-z,A-Z$_]`基本拉丁字母、数字 0-9、美元、下划线）

您可以使用超出该集合的字符作为表或列标识符，例如包括空格，但是您*必须*引用（反引号）它们。

此外，虽然数字是标识符的有效字符，但标识符不能仅由数字组成。如果他们这样做，则必须将它们包裹在反引号中。

* * *

## 回答 #2

> 赞同：145
> 
> 时间：2013-01-02T14:17:35.703

MySQL 中有两种类型的引号：

1.  `'`用于封闭字符串文字
2.  ```用于封闭标识符，例如表名和列名

然后`"`是一种特殊情况。它可以一次用于上述目的*之一*[`sql_mode`](https://dev.mysql.com/doc/refman/5.7/en/sql-mode.html)，具体取决于 MySQL 服务器：

1.  *默认情况下*，该`"`字符可用于包含字符串文字，就像`'`
2.  在[`ANSI_QUOTES`](https://dev.mysql.com/doc/refman/5.7/en/sql-mode.html#sqlmode_ansi_quotes)模式中，该`"`字符可用于包含标识符，就像```

### 以下查询将根据 SQL 模式产生不同的结果（或错误）：

```
SELECT "column" FROM table WHERE foo = "bar" 
```

### ANSI_QUOTES 已禁用

查询将选择`"column"`列`foo`等于字符串的字符串文字`"bar"`

### ANSI_QUOTES 已启用

查询将选择`column`列`foo`等于列的列`bar`

### 什么时候用什么

*   我建议您避免使用`"`，以便您的代码独立于 SQL 模式
*   总是引用标识符，因为这是一种很好的做法（关于 SO 的很多问题都在讨论这个）

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2012-07-04T02:03:01.137

*（关于您的问题的 SQL 性质，上面有很好的答案，但如果您是 PHP 新手，这也可能是相关的。）*

也许值得一提的是，PHP 以不同的方式处理单引号和双引号字符串......

单引号字符串是“文字”，几乎是所见即所得的字符串。双引号字符串被 PHP 解释为可能的变量替换（PHP 中的反引号不完全是字符串；它们在 shell 中执行命令并返回结果）。

例子：

```
$foo = "bar";
echo 'there is a $foo'; // There is a $foo
echo "there is a $foo"; // There is a bar
echo `ls -l`; // ... a directory list 
```

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2012-07-04T02:00:29.297

反引号通常用于表示一个`identifier`并且**防止**意外使用[保留关键字](https://dev.mysql.com/doc/refman/5.7/en/keywords.html)。

例如：

```
Use `database`; 
```

这里的反引号将帮助服务器理解它`database`实际上是数据库的名称，而不是数据库标识符。

表名和字段名也可以这样做。如果你用反引号包裹你的数据库标识符，这是一个非常*好的习惯。*

> 检查[此](https://stackoverflow.com/a/261476/295264)答案以了解有关反引号的更多信息。

* * *

现在关于双引号和单引号（迈克尔已经提到过）。

但是，要定义一个值，您必须使用单引号或双引号。让我们看另一个例子。

```
INSERT INTO `tablename` (`id, `title`) VALUES ( NULL, title1); 
```

在这里，我故意忘记`title1`用引号括起来。现在服务器将把它`title1`作为一个列名（即一个标识符）。因此，要表明它是一个值，您必须使用双引号或单引号。

```
INSERT INTO `tablename` (`id, `title`) VALUES ( NULL, 'title1'); 
```

* * *

现在，结合 PHP，双引号和单引号使您的查询编写时间变得更加容易。让我们在您的问题中查看查询的修改版本。

```
$query = "INSERT INTO `table` (`id`, `col1`, `col2`) VALUES (NULL, '$val1', '$val2')"; 
```

现在，在 PHP 中使用双引号，您将创建变量`$val1`，并`$val2`使用它们的值，从而创建一个完全有效的查询。像

```
$val1 = "my value 1";
$val2 = "my value 2";
$query = "INSERT INTO `table` (`id`, `col1`, `col2`) VALUES (NULL, '$val1', '$val2')"; 
```

会让

```
INSERT INTO `table` (`id`, `col1`, `col2`) VALUES (NULL, 'my value 1', 'my value 2') 
```

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2017-01-03T11:42:10.520

在 MySQL 中，这些符号用于分隔查询```、、`"`和。`'``()`

1.  `"`or`'`用于封闭类似字符串的值`"26-01-2014 00:00:00"`或`'26-01-2014 00:00:00'`. 这些符号仅适用于字符串，不适用于 、 或 等`now`聚合`sum`函数`max`。

2.  ``` 用于封闭表或列名，例如`select `column_name` from `table_name` where id='2'`

3.  `(`并`)`简单地包含查询的部分，例如 `select `column_name` from `table_name` where (id='2' and gender='male') or name='rakesh'`。

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2012-07-04T02:16:30.993

MySQL 和 PHP 中的字符串文字是相同的。

> 字符串是由单引号 (“'”) 或双引号 (“"”) 字符括起来的字节或字符序列。

因此，如果您的字符串包含单引号，那么您可以使用双引号来引用字符串，或者如果它包含双引号，那么您可以使用单引号来引用字符串。但是，如果您的字符串同时包含单引号和双引号，则需要转义用于引用该字符串的那个。

大多数情况下，我们对 SQL 字符串值使用单引号，因此我们需要对 PHP 字符串使用双引号。

```
$query = "INSERT INTO table (id, col1, col2) VALUES (NULL, 'val1', 'val2')"; 
```

你可以在 PHP 的双引号字符串中使用一个变量：

```
$query = "INSERT INTO table (id, col1, col2) VALUES (NULL, '$val1', '$val2')"; 
```

但是如果`$val1`or`$val2`包含单引号，那会让你的 SQL 出错。所以在sql中使用之前需要先对其进行转义；这就是`mysql_real_escape_string`目的。（虽然准备好的语句更好。）

* * *

## 回答 #7

> 赞同：15
> 
> 时间：2017-01-28T07:35:58.530

这里有很多有用的答案，通常总结为两点。

1.  BACKTICKS(`) 用于标识符名称。
2.  单引号（'）用于值周围。

正如@MichaelBerkowski 所说

> 反引号将用于表和列标识符，但仅在标识符是`MySQL`保留关键字或标识符包含空白字符或超出有限集合的字符时才需要（见下文） 通常建议避免使用保留关键字作为尽可能使用列或表标识符，避免引用问题。

在某些情况下，标识符既不能是*保留关键字*，也不能包含*空格*或*超出限制集的字符，*但必须在它们周围加上反引号。

例子

`123E10`是一个有效的标识符名称，但也是一个有效的`INTEGER`文字。

[不详细说明如何获得这样的标识符名称]，假设我想创建一个名为`123456e6`.

反引号没有错误。

```
DB [XXX]> create temporary table `123456e6` (`id` char (8));
Query OK, 0 rows affected (0.03 sec) 
```

不使用反引号时出错。

```
DB [XXX]> create temporary table 123451e6 (`id` char (8));
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near '123451e6 (`id` char (8))' at line 1 
```

但是，`123451a6`是一个非常好的标识符名称（没有反引号）。

```
DB [XXX]> create temporary table 123451a6 (`id` char (8));
Query OK, 0 rows affected (0.03 sec) 
```

这完全是因为`1234156e6`也是一个指数数。

* * *

## 回答 #8

> 赞同：14
> 
> 时间：2015-06-16T10:25:05.737

结合 PHP 和 MySQL，双引号和单引号使您的查询编写时间变得更加轻松。

```
$query = "INSERT INTO `table` (`id`, `col1`, `col2`) VALUES (NULL, '$val1', '$val2')"; 
```

现在，假设您在 MySQL 查询中使用直接 post 变量，然后以这种方式使用它：

```
$query = "INSERT INTO `table` (`id`, `name`, `email`) VALUES (' ".$_POST['id']." ', ' ".$_POST['name']." ', ' ".$_POST['email']." ')"; 
```

这是在 MySQL 中使用 PHP 变量的最佳实践。

* * *

## 回答 #9

> 赞同：12
> 
> 时间：2012-07-04T02:03:00.667

如果表 cols 和 values 是变量，那么有两种方法：

带双引号`""`的完整查询：

```
$query = "INSERT INTO $table_name (id, $col1, $col2)
                 VALUES (NULL, '$val1', '$val2')"; 
```

或者

```
 $query = "INSERT INTO ".$table_name." (id, ".$col1.", ".$col2.")
               VALUES (NULL, '".$val1."', '".$val2."')"; 
```

带单引号`''`：

```
$query = 'INSERT INTO '.$table_name.' (id, '.$col1.', '.$col2.')
             VALUES (NULL, '.$val1.', '.$val2.')'; 
```

````当列/值名称类似于 MySQL 保留关键字时，使用反引号。

**注意：**如果您用表名表示列名，则使用反引号，如下所示：

``table_name``. ``column_name`` <-- 注意：`.` 从反引号中排除。

* * *

## 回答 #10

> 赞同：10
> 
> 时间：2015-07-09T06:21:59.237

单引号应该用于字符串值，如 VALUES() 列表中。

反引号通常用于指示标识符，并且可以防止意外使用保留关键字。

结合 PHP 和 MySQL，双引号和单引号使您的查询编写时间变得更加轻松。

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2018-02-18T22:10:23.863

除了所有（解释清楚的）答案之外，没有提到以下内容，我经常访问此问答。

简而言之; **MySQL 认为您想对**自己的表/列进行数学运算，并将诸如“电子邮件”之类的连字符解释为`e` **减号** `mail`。

* * *

**免责声明：**所以我想我会将其添加为“仅供参考”类型的答案，适用于那些完全不熟悉使用数据库并且可能不理解已经描述的技术术语的人。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2018-08-22T06:47:23.133

SQL 服务器和 MySQL、PostgreySQL、Oracle 不理解双引号 (")。因此您的查询应该没有双引号 (")，并且应该只使用单引号 (')。

Back-trip(`) 在 SQL 中是可选的，用于表名、数据库名和列名。

如果您尝试在后端编写查询以调用 MySQL，那么您可以使用双引号 (") 或单引号 (') 将查询分配给如下变量：

```
let query = "select id, name from accounts";
//Or
let query = 'select id, name from accounts'; 
```

如果`where`您的查询中有一条语句和/或尝试使用字符串`insert`的值和/或`update`值，请对这些值使用单引号（'），例如：

```
let querySelect = "select id, name from accounts where name = 'John'";
let queryUpdate = "update accounts set name = 'John' where id = 8";
let queryInsert = "insert into accounts(name) values('John')";

//Please not that double quotes are only to be used in assigning string to our variable not in the query
//All these below will generate error

let querySelect = 'select id, name from accounts where name = "John"';
let queryUpdate = 'update accounts set name = "John" where id = 8';
let queryInsert = 'insert into accounts(name) values("John")';

//As MySQL or any SQL doesn't understand double quotes("), these all will generate error. 
```

如果您想在使用双引号（“）和单引号（'）时避免这种混乱，建议坚持使用单引号（'），这将包括反斜杠（），如：

```
let query = 'select is, name from accounts where name = \'John\''; 
```

当我们必须动态分配一些值并执行一些字符串连接时，就会出现双（“）或单（'）引号的问题，例如：

```
let query = "select id, name from accounts where name = " + fName + " " + lName;
//This will generate error as it must be like name = 'John Smith' for SQL
//However our statement made it like name = John Smith

//In order to resolve such errors use
let query = "select id, name from accounts where name = '" + fName + " " + lName + "'";

//Or using backslash(\)
let query = 'select id, name from accounts where name = \'' + fName + ' ' + lName + '\''; 
```

如果需要进一步的许可，请遵循[JavaScript 中的引号](https://stackoverflow.com/questions/242813/when-to-use-double-or-single-quotes-in-javascript)

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2020-12-01T18:32:42.740

有时不使用引号很有用...因为这可以突出生成查询的代码中的问题...例如：

其中 x 和 y 应始终为整数...

选择 * 从`table`哪里 x= 和 y=0

是 SQL 语法错误吗……有点懒，但很有用……

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-10-19T09:51:30.923

**简单来说：**

*   引号（单引号和双引号）用于字符串周围。

*   反引号用于表和列标识符周围。

**一起实现单引号和双引号：**

~ 如果我们想实现这个，

[![输出](../Images/6166ff0053c6786441003af55855d73d.png)](https://i.stack.imgur.com/lPGYV.png)

试试这个，

```
SELECT "They've found this tutorial to be helpful"
```

~ 想要实现这个：

[![图片2](../Images/aa24fd35bf21066840d88ecd894af1a5.png)](https://i.stack.imgur.com/q0Is5.png)

试试这个，

```
SELECT 'They\'ve responded, "We found this tutorial helpful"'
```

**完整说明：**

[![完整的解释](../Images/4d741218bc596a6bff4b97b8f5a29608.png)](https://i.stack.imgur.com/t4eX8.png)：

# objective-c - 将光标悬停在图像上？

> ID：11321493
> 
> 赞同：0
> 
> 时间：2012-07-04T01:54:29.600
> 
> 标签：objective-c, macos, cocoa

我有一个 NSImageView 子类的单元格。当用户将光标悬停在图像上时，我希望弹出一个小文本框。

我正在寻找的一个示例是当您将光标悬停在网络浏览器中的图像上时弹出的“黄色文本框”。例如，将光标悬停在 Google 徽标上会在一个小文本框中显示文本“Google”。

我该怎么做呢？注意我正在为 OSX**而不是**iOS 开发应用程序。我正在使用 Xcode 3.2.6。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T00:36:03.767

您可以使用`setToolTip:`on an `NSView`(for a string) 或使用其他与工具提示相关的`NSView`方法来更好地控制结果。

# postgresql - 为什么 Mac OS Lion 中的 postgres 出现无法连接到服务器的错误？

> ID：11321496
> 
> 赞同：2
> 
> 时间：2012-07-04T01:56:07.307
> 
> 标签：postgresql, osx-lion

我刚刚在我的 Mac OS Lion 机器上安装了 postgresql。我已经卸载并重新安装了`pg`gem。

当我运行时，`psql`我收到以下错误：

```
psql: could not connect to server: No such file or directory
    Is the server running locally and accepting
    connections on Unix domain socket "/tmp/.s.PGSQL.5432"? 
```

运行`which psql`：
`/usr/local/bin/psql`

我使用自制软件安装了 postgresql

这是`lsof`postgres 的结果：

```
postgres  21159 myuser  cwd      DIR               14,2       680 3528182 /usr/local/var/postgres
postgres  21159 myuser  txt      REG               14,2   5092464 3546949 /usr/local/Cellar/postgresql/9.1.3/bin/postgres
postgres  21159 myuser  txt      REG               14,2    599280  641674 /usr/lib/dyld
postgres  21159 myuser  txt      REG               14,2 297734144 3151814 /private/var/db/dyld/dyld_shared_cache_x86_64
postgres  21159 myuser    0r     CHR                3,2       0t0     306 /dev/null
postgres  21159 myuser    1w     REG               14,2      1193 3529245 /usr/local/var/postgres/server.log
postgres  21159 myuser    2w     REG               14,2      1193 3529245 /usr/local/var/postgres/server.log
postgres  21159 myuser    3u   systm                          0t0         
postgres  21159 myuser    4u    unix 0xffffff8012b85578       0t0         ->0xffffff8012b85640
postgres  21159 myuser    5u    IPv6 0xffffff80128f4e80       0t0     TCP localhost:postgresql (LISTEN)
postgres  21159 myuser    6u    IPv4 0xffffff80128f9880       0t0     TCP localhost:postgresql (LISTEN)
postgres  21159 myuser    7u    IPv6 0xffffff80128f5600       0t0     TCP localhost:postgresql (LISTEN)
postgres  21159 myuser    8u    unix 0xffffff80202d9968       0t0         /tmp/.s.PGSQL.5432
postgres  21159 myuser    9u    IPv6 0xffffff8013ebc508       0t0     UDP localhost:57404->localhost:57404
postgres  21170 myuser  cwd      DIR               14,2       680 3528182 /usr/local/var/postgres
postgres  21170 myuser  txt      REG               14,2   5092464 3546949 /usr/local/Cellar/postgresql/9.1.3/bin/postgres
postgres  21170 myuser  txt      REG               14,2    599280  641674 /usr/lib/dyld
postgres  21170 myuser  txt      REG               14,2 297734144 3151814 /private/var/db/dyld/dyld_shared_cache_x86_64
postgres  21170 myuser    0r     CHR                3,2       0t0     306 /dev/null
postgres  21170 myuser    1w     REG               14,2      1193 3529245 /usr/local/var/postgres/server.log
postgres  21170 myuser    2w     REG               14,2      1193 3529245 /usr/local/var/postgres/server.log
postgres  21170 myuser    3u   systm                          0t0         
postgres  21170 myuser    4u    unix 0xffffff8012b85578       0t0         ->0xffffff8012b85640
postgres  21170 myuser    5     PIPE 0xffffff8015250290     16384         ->0xffffff8015250810
postgres  21170 myuser    6     PIPE 0xffffff8015250810     16384         ->0xffffff8015250290
postgres  21170 myuser    9u    IPv6 0xffffff8013ebc508       0t0     UDP localhost:57404->localhost:57404
postgres  21171 myuser  cwd      DIR               14,2       680 3528182 /usr/local/var/postgres
postgres  21171 myuser  txt      REG               14,2   5092464 3546949 /usr/local/Cellar/postgresql/9.1.3/bin/postgres
postgres  21171 myuser  txt      REG               14,2    599280  641674 /usr/lib/dyld
postgres  21171 myuser  txt      REG               14,2 297734144 3151814 /private/var/db/dyld/dyld_shared_cache_x86_64
postgres  21171 myuser    0r     CHR                3,2       0t0     306 /dev/null
postgres  21171 myuser    1w     REG               14,2      1193 3529245 /usr/local/var/postgres/server.log
postgres  21171 myuser    2w     REG               14,2      1193 3529245 /usr/local/var/postgres/server.log
postgres  21171 myuser    3u   systm                          0t0         
postgres  21171 myuser    4u    unix 0xffffff8012b85578       0t0         ->0xffffff8012b85640
postgres  21171 myuser    5     PIPE 0xffffff80152501e0     16384         ->0xffffff8015250760
postgres  21171 myuser    6     PIPE 0xffffff8015250760     16384         ->0xffffff80152501e0
postgres  21171 myuser    9u    IPv6 0xffffff8013ebc508       0t0     UDP localhost:57404->localhost:57404
postgres  21172 myuser  cwd      DIR               14,2       680 3528182 /usr/local/var/postgres
postgres  21172 myuser  txt      REG               14,2   5092464 3546949 /usr/local/Cellar/postgresql/9.1.3/bin/postgres
postgres  21172 myuser  txt      REG               14,2    599280  641674 /usr/lib/dyld
postgres  21172 myuser  txt      REG               14,2 297734144 3151814 /private/var/db/dyld/dyld_shared_cache_x86_64
postgres  21172 myuser    0r     CHR                3,2       0t0     306 /dev/null
postgres  21172 myuser    1w     REG               14,2      1193 3529245 /usr/local/var/postgres/server.log
postgres  21172 myuser    2w     REG               14,2      1193 3529245 /usr/local/var/postgres/server.log
postgres  21172 myuser    3u   systm                          0t0         
postgres  21172 myuser    4u    unix 0xffffff8012b85578       0t0         ->0xffffff8012b85640
postgres  21172 myuser    5     PIPE 0xffffff801449a650     16384         ->0xffffff8014497d10
postgres  21172 myuser    6     PIPE 0xffffff8014497d10     16384         ->0xffffff801449a650
postgres  21172 myuser    7u     REG               14,2      8192 3529006 /usr/local/var/postgres/global/12174
postgres  21172 myuser    9u    IPv6 0xffffff8013ebc508       0t0     UDP localhost:57404->localhost:57404
postgres  21173 myuser  cwd      DIR               14,2       680 3528182 /usr/local/var/postgres
postgres  21173 myuser  txt      REG               14,2   5092464 3546949 /usr/local/Cellar/postgresql/9.1.3/bin/postgres
postgres  21173 myuser  txt      REG               14,2    599280  641674 /usr/lib/dyld
postgres  21173 myuser  txt      REG               14,2 297734144 3151814 /private/var/db/dyld/dyld_shared_cache_x86_64
postgres  21173 myuser    0r     CHR                3,2       0t0     306 /dev/null
postgres  21173 myuser    1w     REG               14,2      1193 3529245 /usr/local/var/postgres/server.log
postgres  21173 myuser    2w     REG               14,2      1193 3529245 /usr/local/var/postgres/server.log
postgres  21173 myuser    3u   systm                          0t0         
postgres  21173 myuser    4u    unix 0xffffff8012b85578       0t0         ->0xffffff8012b85640
postgres  21173 myuser    9u    IPv6 0xffffff8013ebc508       0t0     UDP localhost:57404->localhost:57404 
```

如何解决此错误？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T09:38:00.543

首先要尝试：

psql -h 本地主机

可能是客户端和服务器试图为 UNIX 域套接字使用不同的文件位置。您可以通过 tcp/ip 连接来避免这种情况。

# passwords - PHP 盐密码

> ID：11321503
> 
> 赞同：1
> 
> 时间：2012-07-04T01:57:22.337
> 
> 标签：passwords, md5, password-protection, sha512

好的，这就是我们如何处理密码。

note 我们确实改变了我们的盐分。

```
<?

$PASSWORD = $_GET["password"];

$ranNUM = rand(965824, 957873488423748423486483);
$PASSWORD =  hash('sha512', $PASSWORD.$ranNUM.'MONKEY MONEY sad happy 7ab27t8g2hjq8tt 2g y8t 82 t2g edb t7e2gqjcb  t8egsjc byut87qebcjn 87ctyeqcb t78ye jscyt8ique bcg781eghjs btgq78 cbqjg78pqdgj d t87dqgjh bxauy fpqdgs,q vayupf d', TRUE);

for ($i = 1; $i <= $_GET['num']; $i++) {
$PASSWORD =  md5($PASSWORD);
$PASSWORD =  hash('sha512', $PASSWORD.$ranNUM.'MONKEY MONEY sad happy 7ab27t8g2hjq8tt 2g y8t 82 t2g edb t7e2gqjcb  t8egsjc byut87qebcjn 87ctyeqcb t78ye jscyt8ique bcg781eghjs btgq78 cbqjg78pqdgj d t87dqgjh bxauy fpqdgs,q vayupf d', TRUE);
$PASSWORD =  hash('sha512', $PASSWORD.$ranNUM.'MONKEY MONEY sad happy 7ab27t8g2hjq8tt 2g y8t 82 t2g edb t7e2gqjcb  t8egsjc byut87qebcjn 87ctyeqcb t78ye jscyt8ique bcg781eghjs btgq78 cbqjg78pqdgj d t87dqgjh bxauy fpqdgs,q vayupf d', TRUE);
$PASSWORD =  hash('sha512', $PASSWORD.$ranNUM.'MONKEY MONEY sad happy 7ab27t8g2hjq8tt 2g y8t 82 t2g edb t7e2gqjcb  t8egsjc byut87qebcjn 87ctyeqcb t78ye jscyt8ique bcg781eghjs btgq78 cbqjg78pqdgj d t87dqgjh bxauy fpqdgs,q vayupf d', FALSE);
$PASSWORD =  hash('sha512', $PASSWORD.$ranNUM.'MONKEY MONEY sad happy 7ab27t8g2hjq8tt 2g y8t 82 t2g edb t7e2gqjcb  t8egsjc byut87qebcjn 87ctyeqcb t78ye jscyt8ique bcg781eghjs btgq78 cbqjg78pqdgj d t87dqgjh bxauy fpqdgs,q vayupf d', TRUE);
$PASSWORD =  hash('sha512', $PASSWORD.$ranNUM.'MONKEY MONEY sad happy 7ab27t8g2hjq8tt 2g y8t 82 t2g edb t7e2gqjcb  t8egsjc byut87qebcjn 87ctyeqcb t78ye jscyt8ique bcg781eghjs btgq78 cbqjg78pqdgj d t87dqgjh bxauy fpqdgs,q vayupf d', TRUE);
$PASSWORD =  hash('sha512', $PASSWORD.$ranNUM.'MONKEY MONEY sad happy 7ab27t8g2hjq8tt 2g y8t 82 t2g edb t7e2gqjcb  t8egsjc byut87qebcjn 87ctyeqcb t78ye jscyt8ique bcg781eghjs btgq78 cbqjg78pqdgj d t87dqgjh bxauy fpqdgs,q vayupf d', TRUE);
$PASSWORD =  md5($PASSWORD);
$PASSWORD =  hash('sha512', $PASSWORD.$ranNUM.'MONKEY MONEY sad happy 7ab27t8g2hjq8tt 2g y8t 82 t2g edb t7e2gqjcb  t8egsjc byut87qebcjn 87ctyeqcb t78ye jscyt8ique bcg781eghjs btgq78 cbqjg78pqdgj d t87dqgjh bxauy fpqdgs,q vayupf d', TRUE);
$PASSWORD =  hash('sha512', $PASSWORD.$ranNUM.'MONKEY MONEY sad happy 7ab27t8g2hjq8tt 2g y8t 82 t2g edb t7e2gqjcb  t8egsjc byut87qebcjn 87ctyeqcb t78ye jscyt8ique bcg781eghjs btgq78 cbqjg78pqdgj d t87dqgjh bxauy fpqdgs,q vayupf d', FALSE);
$PASSWORD =  hash('sha512', $PASSWORD.$ranNUM.'MONKEY MONEY sad happy 7ab27t8g2hjq8tt 2g y8t 82 t2g edb t7e2gqjcb  t8egsjc byut87qebcjn 87ctyeqcb t78ye jscyt8ique bcg781eghjs btgq78 cbqjg78pqdgj d t87dqgjh bxauy fpqdgs,q vayupf d', TRUE);
$PASSWORD =  md5($PASSWORD);
$PASSWORD =  hash('sha512', $PASSWORD.$ranNUM.'MONKEY MONEY sad happy 7ab27t8g2hjq8tt 2g y8t 82 t2g edb t7e2gqjcb  t8egsjc byut87qebcjn 87ctyeqcb t78ye jscyt8ique bcg781eghjs btgq78 cbqjg78pqdgj d t87dqgjh bxauy fpqdgs,q vayupf d', TRUE);
$PASSWORD =  hash('sha512', $PASSWORD.$ranNUM.'MONKEY MONEY sad happy 7ab27t8g2hjq8tt 2g y8t 82 t2g edb t7e2gqjcb  t8egsjc byut87qebcjn 87ctyeqcb t78ye jscyt8ique bcg781eghjs btgq78 cbqjg78pqdgj d t87dqgjh bxauy fpqdgs,q vayupf d', FALSE);
$PASSWORD =  hash('sha512', $PASSWORD.$ranNUM.'MONKEY MONEY sad happy 7ab27t8g2hjq8tt 2g y8t 82 t2g edb t7e2gqjcb  t8egsjc byut87qebcjn 87ctyeqcb t78ye jscyt8ique bcg781eghjs btgq78 cbqjg78pqdgj d t87dqgjh bxauy fpqdgs,q vayupf d', TRUE);
$PASSWORD =  hash('sha512', $PASSWORD.$ranNUM.'MONKEY MONEY sad happy 7ab27t8g2hjq8tt 2g y8t 82 t2g edb t7e2gqjcb  t8egsjc byut87qebcjn 87ctyeqcb t78ye jscyt8ique bcg781eghjs btgq78 cbqjg78pqdgj d t87dqgjh bxauy fpqdgs,q vayupf d', TRUE);

print $PASSWORD;
print "<br>";

}

//print $PASSWORD;
?> 
```

我们所做的是我们发送一个数字，比如 7 和密码，然后我们运行加密 7 次

以及该用户的随机数（保存在另一个数据库中）**不在同一台服务器上**

然后我们就知道密码应该是什么了。

你觉得这是什么过度杀戮？

例如 123 运行两次会得到

```
íaªyå`ˆsœA²„†N¸jø¦žÃïªd*hÂ?‘\e½s­&žÉ:Ñl6DïƒÀ`ß,¢‹HÎÌ(üBìð6 
```

为了使这更加安全，您可以为每个段落设置随机段落。

您需要将其保存在某个地方，但如果您可以扫描 google 或 bing 或任何网站，并从该网站获取随机句子，那就太好了。

请告诉我你的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T02:25:29.727

这是一种矫枉过正，我不确定它在理论上是否合理。

RSA 的 PBKDF2 是一种使您的（加盐的）密码难以破解的合理方法。

[这是一个 PBKDF2 PHP 实现](http://www.itnewb.com/tutorial/Encrypting-Passwords-with-PHP-for-Storage-Using-the-RSA-PBKDF2-Standard)。

您可能还对**Blowcrypt**（类似意图，但使用河豚算法）和**Scrypt**（一个讨厌的小家伙，可以告诉您希望攻击者在暴力破解您的密码时浪费多少内存）感兴趣

# python - 解析 pwdump 文件 python

> ID：11321510
> 
> 赞同：0
> 
> 时间：2012-07-04T01:58:25.743
> 
> 标签：python, string, split

我正在尝试在 python 中解析一个 pwdump 文件。pwdump 文件的内容如下所示：

```
...[snip]

Domain\TESTIN$::aad3b435b51404eeaad3b435b51404ee:31d6cfe0d16ae931b73c59d7e0c089c0:::

Guest(current):501:aad3b435b51404eeaad3b435b51404ee:31d6cfe0d16ae931b73c59d7e0c089c0:::

Guest(hist_01):501:aad3b435b51404eeaad3b435b51404ee:31d6cfe0d16ae931b73c59d7e0c089c0:::

Guest(hist_02):501:aad3b435b51404eeaad3b435b51404ee:31d6cfe0d16ae931b73c59d7e0c089c0:::

...[snip] 
```

我想从中得到两件事：

```
Domain\USER (So first string before the ":") 
```

和实际的哈希：

```
"aad3b435b51404eeaad3b435b51404ee:31d6cfe0d16ae931b73c59d7e0c089c0" 
```

我在想这样的事情：

```
import sys

infile, outfile = sys.argv[1], sys.argv[2]

with open(infile) as inf, open(outfile,"w") as outf:
    line_words = (line.split('::') for line in inf)
    outf.writelines(words[1].strip() + '\n' for words in line_words if len(words)>1) 
```

但不知何故，我只解析了第一个哈希。

任何帮助将不胜感激 ！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T02:39:22.350

问题是你正在分裂`"::"`。尝试拆分`":"`。只有第一行符合这种格式。第 2 行及以后的行在两个`:`s 之间有一个数字，这与您的算法不符。

试试这个（更详细的可读性）：

```
with open(infile) as inf, open(outfile,"w") as outf:
    for line in inf:
        splits = line.split(":")
        user, hash = splits[0], ":".join(splits[2:4])
        outf.write(hash + '\n') 
```

希望有帮助

# django - 使用 django 的身份验证框架保存表单？

> ID：11321513
> 
> 赞同：1
> 
> 时间：2012-07-04T01:58:46.907
> 
> 标签：django, forms, authentication, post, view

我希望能够根据登录的用户保存表单提交的数据（而不是让用户通过文本框写下他/她的名字）。我正在使用 django 的内置身份验证系统。关于我如何做到这一点的任何想法？

```
@login_required 
def add_review(request, product_id):
    p = get_object_or_404(Productbackup, pk=product_id)
    if request.method == 'POST':
        form = ReviewbackupForm(request.POST)
        if form.is_valid():
            review = form.save(commit=False)
            review.product = p
            #how to save user as well?  review.user = user
            review.save()
            return HttpResponseRedirect(reverse('reserve.views.view_reviews', kwargs={'product_id':p.id}))
    else:
        form = ReviewbackupForm()
    variables = RequestContext(request, {'form': form, 'product_id': product_id})
    return render_to_response('reserve/templates/create_review.html', variables) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T02:23:38.737

你已经使用 save with`commit=False`所以你快到了。您可以从请求对象中获取登录用户。

```
if form.is_valid(): 
    review = form.save(commit=False) 
    review.product = p 
    review.user = request. user 
    review.save() 
```

有关更多详细信息，请参阅[用户身份验证的 Django 文档](https://docs.djangoproject.com/en/dev/topics/auth/#authentication-in-web-requests)。

# lua - 我可以使用基于 Lua 的工具为 Apple Store 创建游戏吗？

> ID：11321517
> 
> 赞同：0
> 
> 时间：2012-07-04T01:59:19.520
> 
> 标签：lua, mac-app-store

在 Lua 中通过[Love 之](https://love2d.org/)类的框架（所有东西都很好地打包）制作游戏会违反 mac 应用商店规则吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T07:52:36.467

您可以使用基于 Lua 的工具来创建游戏。Löve 在 IOS 上不工作，但还有其他工作。最受欢迎的是[Corona SDK](http://www.coronalabs.com/products/corona-sdk/)和[Moai SDK](http://getmoai.com/)。

# python - 正则表达式：在逗号之前、美元符号之后、百分比之前提取数字

> ID：11321520
> 
> 赞同：0
> 
> 时间：2012-07-04T01:59:50.003
> 
> 标签：python, regex, math

试图保持简单，但我想我现在已经复杂化了正则表达式：

基本上，我想从字符串中删除所有数字 - 但考虑到可能有逗号或小数。

例子：

```
$13 -> 13
$13.95 -> 13
$1,300 -> 1300
$ 13 -> 13
Only 3 left -> 3
34 sold -> 34
34% -> 34
(45%) -> 45
($14) -> 14
£13 -> 13 (unicode u00A3) 
```

python中的当前正则表达式：

```
re.match(ur"\$?\u00A3?(?:\s+)?((\d+)\,?(\d+)?)\%?(?:\.[0-9]*)?", value) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T02:12:38.267

那么基于非正则表达式的解决方案呢？

```
>>> s = '$1,300'
>>> ''.join([x for x in s if x.isdigit()])
'1300' 
```

这应该适用于您的所有示例，除了`$13.95 -> 13`我需要澄清推理。如果您需要识别负数、浮点数、科学记数法等，则必须对其进行调整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T02:14:52.977

适用于每种情况。对`.`事物进行了回顾

```
>>> u''.join(re.findall(ur'(?<!\.|\d)(\d+)', '$13.95'))
'13' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T02:24:09.910

这个正则表达式应该完美匹配所有内容：

`'\$?([0-9,]+)[.%]?'`

字面意思：

*   可以有美元符号
*   抓住所有`[0-9,]`的数字和逗号。
*   如果没有更多的数字、a`.`或 a`%`出现，则停止。

# java - 在运行时评估逻辑表达式

> ID：11321526
> 
> 赞同：2
> 
> 时间：2012-07-04T02:00:52.463
> 
> 标签：java, groovy, antlr, antlr3, abstract-syntax-tree

如何评估在运行时输入的“VERB1 OR (VERB2 AND VERB3) OR (VERB4)”之类的逻辑表达式。VERB* 是评估某些条件的占位符。例如，VERB1 可能意味着检查数据库中是否存在记录。

在表达式“VERB1 OR (VERB2 AND VERB3) OR (VERB4)”中，如果 VERB1 为真，则不应执行其他动词

[编辑： http](http://www.alittlemadness.com/2006/06/05/antlr-by-example-part-1-the-language/) ://www.alittlemadness.com/2006/06/05/antlr-by-example-part-1-the-language/中描述的示例似乎与我正在尝试做的非常相似。但是，优化步骤（如果 VERB1 为真，则不应执行其他动词）似乎不存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T09:06:42.153

如果您可以使用`||`and`&&`代替`AND`and `OR`，您可以使用 groovy 缺少的属性方法和[GroovyShell 基类设置](http://groovy.codehaus.org/Embedding+Groovy)，如下所示：

```
import org.codehaus.groovy.control.CompilerConfiguration

// The command to be executes
def command = "VERB1 || (VERB2 && VERB3) || (VERB4)"

// Set a base class for the GroovyShell
new CompilerConfiguration().with { compiler ->
  compiler.scriptBaseClass = 'VerbHandlingBaseClass'
  new GroovyShell( this.class.classLoader, new Binding(), compiler ).with { shell ->
    // and evaluate the command
    shell.evaluate( command )
  }
}

abstract class VerbHandlingBaseClass extends Script {
  boolean VERB1() {
    System.out.println( 'CHECK THE DATABASE, RETURN FALSE' )
    false
  }

  boolean VERB2() {
    System.out.println( 'WRITE A LOG ENTRY RETURN TRUE' )
    true
  }

  boolean VERB3() {
    System.out.println( 'VALIDATE SOMETHING, RETURN TRUE' )
    true
  }

  boolean VERB4() {
    System.out.println( 'THIS WONT BE REACHED, AS VERB2 && VERB3 == true' )
    true
  }

  def propertyMissing( String name ) {
    "$name"()
  }
} 
```

那应该打印：

```
CHECK THE DATABASE, RETURN FALSE
WRITE A LOG ENTRY RETURN TRUE
VALIDATE SOMETHING, RETURN TRUE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T02:17:17.160

您在标签中提到了 ANTLR：您尝试过吗？您可以在 ANTLR 中创建完整的布尔语法，但是当您深入到如何评估动词的水平时，它会变得更加困难。

如果有一小部分固定的动词可以被查询，您可以轻松地在动词和函数之间创建映射。

如果有一个更大的动词列表，您也许可以使用反射来调用特定的方法来评估它们。

如果您的动词可以包含数学比较，那么当您创建数学词法分析器和解析器时，这一切都会变得更加困难。

如果没有更具体的问题和您在 ANTLR 中尝试过的知识，我不确定我能否给您更多建议。

编辑：根据您的评论，我会添加更多内容。您可以在语法中添加解析规则：

```
boolean_or returns [boolean b]
    : b1=boolean_and {$b = $b1.b;}
      (OR b2=boolean_and {$b = $b || $b2.b;})* 
    ;

boolean_atom returns [boolean b]
    :
    ((numeric_comparison)=> b1=numeric_comparison {$b = $b1.b;}
    | TRUE {$b = true;} | FALSE {$b = false;}
    | s1=VERB {$b = evalVerb($s1.s);}
    | LPAREN b1=boolean_expr RPAREN {$b = $b1.b;}
    )

; 
```

这是我目前正在使用的布尔解析器的一小部分。你可以填空。

然后使用类似的东西调用解析器

```
ANTLRStringStream in = new ANTLRStringStream(booleanString);
ActionLexer lexer = new  ActionLexer(in);
CommonTokenStream tokens = new CommonTokenStream(lexer);
BooleanParser parser = new  BooleanParser(tokens);
try {
    return parser.eval();
} catch (Exception e) {
} 
```

这并没有考虑到您提前返回的要求，但我相信您可以弄清楚如何做到这一点。

这可能不是做事的最佳方式，但它是我过去让它为我工作的方式。希望这可以帮助。

# git-extensions - 忽略 GitExtensions 待更改的空格

> ID：11321527
> 
> 赞同：5
> 
> 时间：2012-07-04T02:00:58.833
> 
> 标签：git-extensions

在 Visual Studio 的 GitExtensions 挂起更改窗口中，我如何让它忽略空格。当我使用格式文档时，它经常在旧代码中添加标签，但这些行并没有真正改变。问题是看起来整个班级都发生了变化，很容易错过实际的变化。

我尝试配置 kdiff 并尝试在 gitextensions 中设置 diff 工具以使用 winmerge。它们都没有效果。

**Mergetool** C:/Program Files (x86)/WinMerge/winmergeu.exe

**MergeTool 命令** "C:/Program Files (x86)/WinMerge/winmergeu.exe" -e -u -dl "Original" -dr "Modified" "$MERGED" "$REMOTE"

**DiffTool** C:/Program Files (x86)/WinMerge/winmergeu.exe

**DiffTool 命令** "C:/Program Files (x86)/WinMerge/winmergeu.exe" -e -u "$LOCAL" "$REMOTE"

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T12:14:21.160

在差异窗口中，您可以在上下文菜单中选择“忽略空格”。希望这可以帮助！

# windows - Windows 8 mjpeg 视频解码能力

> ID：11321531
> 
> 赞同：0
> 
> 时间：2012-07-04T02:01:55.760
> 
> 标签：windows, codec, mjpeg, decoder

由于 windows 7 内置 mjpeg 解码器似乎有分辨率限制，它无法解码分辨率大于 2592x1944 像素的 mjpeg。所以我想知道 windows 8 解码器对 mjpeg 的能力，它可以解码分辨率大于 2592x1944 像素的 mjpeg 视频吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T13:01:28.603

在 Windows 8 上试用后，我发现内置解码器可以处理 2592x1944 像素的高分辨率。

# php - 亚马逊 simpleDB 查询

> ID：11321532
> 
> 赞同：0
> 
> 时间：2012-07-04T02:02:04.390
> 
> 标签：php, amazon-simpledb

我正在尝试在我的 simpleDB 上创建一个查询。这是查询：

```
select * from flyers where eventDate >= '20120101' and clubId= '0001' OR clubId = '0002' ORDER BY eventDate asc limit 20 
```

问题在于：

```
clubId= '0001' OR clubId = '0002' 
```

我得到错误：[无效的排序表达式。sort 属性必须存在于至少一个谓词中，并且谓词不能包含 is null 运算符。]

如果可能的话，我还希望能够将多达 20 个“或”链接在一起

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T02:16:16.190

正如 daan 亲切地指出的那样：

```
select * from flyers where eventDate >= '20120101' and clubId in('0001','0002') ORDER BY eventDate asc limit 20 
```

# c++ - 如何使用 Boost 正则表达式替换方法？

> ID：11321533
> 
> 赞同：14
> 
> 时间：2012-07-04T02:02:06.680
> 
> 标签：c++, boost, boost-regex

我有这些变量：

```
boost::regex re //regular expression to use
std::string stringToChange //replace this string
std::string newValue //new value that is going to replace the stringToChange depending on the regex. 
```

我只想替换它的第一次出现。

谢谢各位。

编辑：我发现了这个：

```
boost::regex_replace(stringToChange, re, boost::format_first_only); 
```

但它说该函数不存在，我猜目前参数不正确。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-07-04T02:33:31.190

下面是一个基本用法的例子：

```
#include <iostream>
#include <string>
#include <boost/regex.hpp>

int main(){
  std::string str = "hellooooooooo";
  std::string newtext = "o Bob";
  boost::regex re("ooooooooo");
  std::cout << str << std::endl;

  std::string result = boost::regex_replace(str, re, newtext);
  std::cout << result << std::endl;
} 
```

**输出**

> 你好啊啊啊啊
> 
> 你好鲍勃

确保您包含`<boost/regex.hpp>`并链接到 boost_regex 库。

# objective-c - Xcode整数++加4

> ID：11321538
> 
> 赞同：0
> 
> 时间：2012-07-04T02:02:57.070
> 
> 标签：objective-c, xcode, integer

我有一个带有以下代码的 xcode 项目：

在fflayer.h

诠释*芬贾尔；

在fflayer.m

```
-(void)ccTouchMoved:(UITouch *)touch withEvent:(UIEvent *)event {
    CGSize winSize = [[CCDirector sharedDirector] winSize];
    CGPoint touchLocation = [self convertTouchtoNodeSpace:touch];
    CGPoint oldTouchLocation = [touch previousLocationInView:touch.view];
    oldTouchLocation = [CCDirector sharedDirector] convertToGL:oldLocation];
    oldTouchLocation = [self convertoToNodeSpace:oldTouchLocation];

    CGPoint translation = ccpSub(touchLocation, oldTouchLocation);
    [self panForTranslation:translation];

    if (CGRectIntersectsRect(selSprite.boundingBox, eJar.boundingBox)) {

    selSprite.userData = FALSE;
    selSprite.visible = FALSE;
    selSprite.position = ccp(winSize.width +40, winSize.height + 40);
    _currentFlies--;
    ffinjar++;

 } 
```

出于某种原因，这导致 ffinjar 添加 4 而不是 1。但 _currentFlies 只是减去 1。我不知道。谁能看到我可能做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T02:07:12.647

这是因为您的声明是一个指针，并且增加一个指针与增加一个 int 具有不同的含义（IIRC，它增加了 sizeof(int)，我不确定）。

```
int *ffinjar;
// perhaps should be
int ffinjar; 
```

编辑：我已经做了一个测试，并且确实增加了一个指向 int 的指针在我的系统上增加了 4（并且 sizeof(int) 也是 4）

# sql - 从 VB.NET 解析 DateTime 到 Oracle 存储过程

> ID：11321546
> 
> 赞同：0
> 
> 时间：2012-07-04T02:03:49.723
> 
> 标签：sql, vb.net, oracle

我一直在努力使用 Oracle 的日期时间功能。

我的存储过程运行正常且做得很好，但我不知道如何从 VB.net 解析日期，以便存储过程可以从 VB.net 接收值？

有谁知道如何从 VB.net 解析值，在这种情况下，我谈论的是日期时间，所以它将是一小时、秒和分钟。

太感谢了

这是.NET代码

```
Try
            Dim conn As New OracleConnection(connectionString(data(0), data(1), data(2)))
            conn.Open()
            Dim cmd As New OracleCommand
            cmd.Connection = conn
            cmd.CommandType = CommandType.StoredProcedure
            cmd.CommandText = "transactionme"
            Dim p1 As OracleParameter
            Dim p2 As OracleParameter
            Dim p3 As OracleParameter
            Dim p4 As OracleParameter
            Dim p5 As OracleParameter
            Dim p6 As OracleParameter
            Dim p7 As OracleParameter
            Dim p8 As OracleParameter
            Dim p9 As OracleParameter
            Dim p10 As OracleParameter
            p1 = cmd.Parameters.Add("param1", OracleDbType.NChar)
            p1.Value = ""
            p2 = cmd.Parameters.Add("param2", OracleDbType.NChar)
            p2.Value = "STD2"
            p3 = cmd.Parameters.Add("param3", OracleDbType.NChar)
            p3.Value = "RK001"
            p4 = cmd.Parameters.Add("param4", OracleDbType.NChar)
            p4.Value = "EK001"
            p5 = cmd.Parameters.Add("param5", OracleDbType.Date)
            p5.Value = "here is the problem"
            p6 = cmd.Parameters.Add("param6", OracleDbType.Date)
            p6.Value = "here is the problem"
            p7 = cmd.Parameters.Add("param7", OracleDbType.Date)
            p7.Value = "here is the problem"
            p8 = cmd.Parameters.Add("param8", OracleDbType.NChar)
            p8.Value = "Master Card"
            p9 = cmd.Parameters.Add("param9", OracleDbType.Int32)
            p9.Value = 30000

            Dim n As Integer
            n = cmd.ExecuteNonQuery()
            MessageBox.Show(n.ToString)
            conn.Close()
        Catch ex As Exception
            MessageBox.Show(ex.ToString)
        End Try 
```

参数应该是这样的，试过很多concat之类的

```
to_date('2012-01-23 22:00', 'YYYY-MM-DD hh24:mi') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T02:35:07.123

根据this [MSDN Forum Posting](http://social.msdn.microsoft.com/Forums/en-US/adodotnetdataproviders/thread/99acc52c-6eb3-48be-8453-907deefc9d8a)，Oracle Date 数据类型对应于.Net Date 数据类型。

从上面的链接：

> 参数值应该是日期数据值而不是字符串。当您将日期作为参数传递时，无需格式化日期，因为基础表示是数字。

IE

```
p5 = cmd.Parameters.Add("param5", OracleDbType.Date)  
p5.Value = Convert.ToDateTime("Your Date here") 
```

编辑试试这个来解析你的日期/时间信息并转换你的字符串。

```
 Private Function GetDateTime(dateFormat As String) As Date
    Dim split() As String = New String() {","}

    Return Convert.ToDateTime(dateFormat.Split(split, 2, StringSplitOptions.None)(0))

End Function 
```

用法：

```
p5.Value = GetDateTime("2012-01-23 22:00, YYYY-MM-DD hh24:mi") 'or what ever your string variable is. 
```

# delphi - 停止平铺图像

> ID：11321552
> 
> 赞同：-1
> 
> 时间：2012-07-04T02:04:56.557
> 
> 标签：delphi

我有一个程序：

```
 procedure DrawSolidHexImage(Target: TCanvas;     { Canvas to draw hex on }
                         Fillstyle : TBrushStyle; { How to fill the hex }
                         Fillcolor : TColor;      { Color to fill it }
                         fillimage : Tbitmap;     { Image to show}
                         Linestyle : TPenStyle;   { What kind of lines }
                         LineColor : Tcolor;      { What color for lines }
                         x,y,radius: integer;     { Position and size of Hex }
                         button    : boolean);    { Make hexes look like buttons? } 
```

当我使用它时，图像被平铺以填充该区域。有什么我可以添加或必须删除以使其不平铺的东西吗？因此不重复图像。也许让它成为中心？

```
{Solid Hexagon drawing function}
procedure THexMap.DrawSolidHeximage(Target:TCanvas;
                          Fillstyle : TBrushStyle;
                          Fillcolor : TColor;
                          Fillimage : TBitmap;
                          Linestyle : TPenStyle;
                          LineColor : Tcolor;
                          x,y,radius: integer;
                          button    : boolean);
 var
   p0,p1,p2,p3,p4,p5,p6:TPoint;
 Begin
   p0 := Point(x,y);

   {compute each point of hex based on center coordinate (p0) }
   p1.x := p0.x - round(Radius /2);
   p1.y := p0.y - Rise;
   p2.x := p0.x + round(Radius /2);
   p2.y := p1.y;
   p3.x := p0.x + Radius;
   p3.y := p0.y;
   p4.x := p2.x;
   p4.y := p0.y + rise;
   p5.x := p1.x;
   p5.y := p4.y;
   p6.x := p0.x - Radius;
   p6.y := p0.y;

   {set color / Style of lines}
   target.pen.color := linecolor;
   target.pen.style := linestyle;

   {Set color and style of hex }
   target.brush.color := FillColor;
   target.brush.style := FillStyle;
   target.Brush.Bitmap := Fillimage;

   {draw the hex}
   target.polygon([p1,p2,p3,p4,p5,p6]);

   {If Desired, draw the borders for the hex}
   if button = true then
   begin
     with target do
     begin
       pen.mode:=pmcopy;
       pen.color:=clWhite;
       moveto(p5.x+1,p5.y-1);
       lineto(p6.x+1,p6.y);
       lineto(p1.x+1,p1.y+1);
       lineto(p2.x-1,p2.y+1);
       pen.color:=clBlack;
       lineto(p3.x-1,p3.y);
       lineto(p4.x-1,p4.y-1);
       lineto(p5.x+1,p5.y-1);
     end;
   end;
 end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T22:16:17.557

是的，请参阅我的第二条评论：`Target.Brush.Bitmap`已设置。删除该线将阻止平铺效果，但也会完全阻止绘制任何图像。为了弥补这一点，使用类似的东西：

```
Target.Draw(x, y, FillImage); 
```

不过，您可能不得不摆弄坐标。

# javascript - 内联 if 语句并返回

> ID：11321554
> 
> 赞同：5
> 
> 时间：2012-07-04T02:05:35.360
> 
> 标签：javascript, syntax

我目前正在尝试优化一个功能，但遇到了一些问题。

该函数将被调用很多次，所以我试图让它快速确定返回值并开始下一次调用。

`return`（通过快速确定，我的意思是在函数末尾没有一条语句。）

这是简化的代码：

```
function myFunction(letr) {
    if (letr === " ") return var letc = " ";
    // ... other checks on letr that will return other values for letc
} 
```

问题是第二行似乎不是有效的 JavaScript。

如何以正确的方式编写 + 优化？

先感谢您 ！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-04T02:22:35.883

不要为结果声明变量，只需返回值。例子：

```
function myFunction(letr) {
  if (letr === " ") return " ";
  if (letr === "x") return "X";
  if (letr === "y") return "Y";
  return "neither";
} 
```

您还可以使用条件运算符：

```
function myFunction(letr) {
  return letr === " " ? " " :
    letr === "x" ? "X" :
    letr === "y" ? "Y" :
    "neither";
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-04T02:07:02.753

```
function myFunction(letr) {
    if (letr === " ") return { letc : " " };

    // ... other checks on letr that will return other values for letc
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T02:09:01.793

返回后，函数将终止并为调用者获取值

```
function myFunction(letr) {
    var letc = " ";
    //Do some thing wit letc;
    if (letr === " ") return letr ;
    // ... other checks on letr that will return other values for letc
} 
```

# mysql - mysql 从另一个具有 ip 范围的表中查找 ip 地址

> ID：11321555
> 
> 赞同：3
> 
> 时间：2012-07-04T02:05:45.550
> 
> 标签：mysql

我有 2 个表如下

```
client_table
 date (timestamp)
 ip (varchar)
 value1 (int)
 value2 (int)

ip_address_table
 starting_ip (varchar)
 ending_ip (varchar)
 provider (varchar) 
```

如果 ip 地址在范围内，我正在尝试使用 ip_address_table 表查找 client_table 条目以查找平均每小时。（如果不在范围内，请忽略该行）以下是我想出的

```
SELECT avg(value1),avg(value2)
FROM client_table
WHERE (INET_ATON(ip) BETWEEN INET_ATON(starting_ip) AND INET_ATON(ending_ip))
GROUP BY DATE(date),HOUR(date) 
```

但是，它没有给出正确的输出。我看了一下[http://blog.jcole.us/2007/11/24/on-efficiently-geo-referencing-ips-with-maxmind-geoip-and-mysql-gis/](http://blog.jcole.us/2007/11/24/on-efficiently-geo-referencing-ips-with-maxmind-geoip-and-mysql-gis/)但努力编写存储函数简化任务任何帮助表示赞赏

谢谢

编辑：我的示例数据如下

```
client_table
"date"  "ip"    "value1"    "value2"
"2012-01-10 06:38:29"   "121.1.2.3" "1049"  "301"
"2012-01-11 06:41:35"   "58.1.2.3"  "16453" "794"
"2012-01-12 06:43:50"   "101.1.2.3" "1712"  "410"
"2012-01-13 06:44:04"   "121.1.10.3"    "6594"  "863"
"2012-01-14 06:45:00"   "79.1.2.3"  "879"   "614"

ip_address_table
"starting_ip" "ending_ip" "provider"
"121.0.0.0" "121.255.255.255" provider1
"79.1.2.0" "79.1.2.255" provider1
.... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T02:13:00.700

我没有看到您正在使用 ip 表，也许可以尝试这样的事情（未经测试）：

```
SELECT avg(value1),avg(value2)
FROM client_table c, ip_address_table ip
WHERE (INET_ATON(ip) BETWEEN INET_ATON(starting_ip) AND INET_ATON(ending_ip))
GROUP BY DATE(date),HOUR(date) 
```

# c# - 使用 Facebook、Google C# 包装库登录？

> ID：11321556
> 
> 赞同：1
> 
> 时间：2012-07-04T02:05:48.270
> 
> 标签：c#, javascript, html, facebook

是否有一个单点登录库可以轻松让我在我的网站上添加“使用 Facebook 登录”和“使用 Google 登录”选项？

（只想要一个只登录的库）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T03:55:38.190

您可能应该考虑使用 OAuth，这就是一切似乎都在发展的方向。以下是一些链接：

[http://oauth.net/code/](http://oauth.net/code/)

[https://developers.google.com/accounts/docs/OAuth2](https://developers.google.com/accounts/docs/OAuth2)

[http://developers.facebook.com/blog/post/525/](http://developers.facebook.com/blog/post/525/)

另外，请参阅这个 SO question

[https://stackoverflow.com/questions/3997172/oauth-2-0-service-provider-net-libraries](https://stackoverflow.com/questions/3997172/oauth-2-0-service-provider-net-libraries)

# c# - 如何使用 Control.Triggers？

> ID：11321557
> 
> 赞同：1
> 
> 时间：2012-07-04T02:05:51.167
> 
> 标签：c#, .net, wpf

```
<ItemsControl Name="workingCardsPanel">
    <ItemsControl.Triggers>
        <Trigger SourceName="workingCardsPanel" Property="HasItems" Value="True">
            <Setter TargetName="workingCardsPanel" Property="BorderThickness" Value="1"/>
            <Setter TargetName="workingCardsPanel" Property="BorderBrush" Value="#FF828790"/>
        </Trigger>
    </ItemsControl.Triggers>
    <ItemsControl.Style>
        <Style TargetType="ItemsControl">
            <Style.Triggers>
            </Style.Triggers>
        </Style>
    </ItemsControl.Style>
    <ItemsControl.Items>
        <ListBoxItem><TextBlock Text="Hello world!"/></ListBoxItem>
    </ItemsControl.Items>
</ItemsControl> 
```

当 ItemsControl 有项目时，我想将其`BorderThickness`和设置`BorderBrush`为相应的值，如上所示。

但是代码不可编译。

当我将二传手移动到`Style.Triggers`. 我只想知道`ItemsControl.Triggers`能不能做到。或者如果不能，ItemsControl.Triggers 有什么用？

还有一个问题。

```
<ItemsControl>
    <ItemsControl.Triggers>
        <Trigger Property="HasItems" Value="True">
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush" Value="#FF828790"/>
        </Trigger>
    </ItemsControl.Triggers> 
```

我想知道是否所有属性（HasItems、BorderThickness 和 BorderBrush）都引用了没有名称的控件。（因为 ItemsControl 现在没有名称。）

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T04:33:59.750

我可以回答我自己的问题。

经过大量搜索，令我惊讶的是，[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.triggers)解释了 FrameworkElement.Triggers 的用法。

总之，只能`EventTrigger`添加到FrameworkElement.Triggers。

# c# - System.Action 无法加载

> ID：11321562
> 
> 赞同：0
> 
> 时间：2012-07-04T02:06:37.333
> 
> 标签：c#, api, windows-phone-7, twitter, hammock

我一直在研究这个我不断遇到的错误，但找不到正确的解决方案。好像对这个人来说是独一无二的。有谁知道我为什么会收到错误？非常感谢时间。

```
 public void uploadPhoto(Stream photoStream, string photoName)
{
var credentials = new OAuthCredentials
        {
            Type = OAuthType.ProtectedResource,
            SignatureMethod = OAuthSignatureMethod.HmacSha1,
            ParameterHandling = OAuthParameterHandling.HttpAuthorizationHeader,
            ConsumerKey = TwitterSettings.consumerKey,
            ConsumerSecret = TwitterSettings.consumerKeySecret,
            Token = TwitterSettings.accessToken,
            TokenSecret = TwitterSettings.accessTokenSecret,
            Version = "1.0a"
        };

        RestClient restClient = new RestClient
        {
            Authority = "https://upload.twitter.com",
            HasElevatedPermissions = true,
            Credentials = credentials,
            Method = WebMethod.Post
         };
         RestRequest restRequest = new RestRequest
         {
            Path = "1/statuses/update_with_media.json"
         };

         restRequest.AddParameter("status", tbxNewTweet.Text);
         restRequest.AddFile("media[]", photoName, photoStream, "image/jpg");

}

    restClient.BeginRequest(restRequest, new RestCallback(PostTweetRequestCallback));
}

private void PostTweetRequestCallback(RestRequest request, Hammock.RestResponse response, object obj)
{
        if (response.StatusCode == System.Net.HttpStatusCode.OK)
        {
        //Success code
        }
} 
```

我收到一个错误：

```
 restClient.BeginRequest(restRequest, new RestCallback(PostTweetRequestCallback)); 
```

未处理 TypeLoadException 无法从程序集“mscorlib，版本=3.7.0.0，文化=中性，PublicKeyToken=969DB8053D3322AC”加载类型“System.Action”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T03:00:05.307

我找到了这个答案。它帮助我解决了同样的问题，希望它可以帮助你！

[TypeLoadException 说'没有实现'，但它已实现](https://stackoverflow.com/questions/948785/typeloadexception-says-no-implementation-but-it-is-implemented)

# asp.net-mvc-3 - Elmah 为 Controller Action 上的每个 HandleError 属性记录一次相同的异常

> ID：11321566
> 
> 赞同：0
> 
> 时间：2012-07-04T02:07:02.017
> 
> 标签：asp.net-mvc-3, logging, elmah, handleerror

我正在使用 ELMAH 在我的 MVC3 项目中记录错误，并使用[此](https://stackoverflow.com/a/779961/323005)HandleError 属性来处理预期的异常。

当一个动作有多个 HandleError 属性时，就会出现我的问题。Elmah 为操作中的每个 HandleError 属性发送电子邮件并记录相同的异常，再加一个。

我链接到的答案提到这是一个可能的副作用，但我不知道如何解决这个问题。

我最担心的是下面详述的操作，因为预计会有许多异常，用户需要查看不同的原因，其中任何一个都可能经常发生。

```
[HandleError(ExceptionType = typeof(NotFoundException), View = "SomeErrorPage")]
[HandleError(ExceptionType = typeof(FaultException), View = "SomeErrorPage2")]
[HandleError(ExceptionType = typeof(RestrictedDrawingException), View = "SomeErrorPage3")]
[HandleError(ExceptionType = typeof(IOException), View = "SomeErrorPage4")]
public FileStreamResult ViewPdf(int id)
{
     ...
} 
```

# javascript - 如何为谷歌地图中的标记绑定触摸事件？

> ID：11321568
> 
> 赞同：5
> 
> 时间：2012-07-04T02:07:05.823
> 
> 标签：javascript, html, google-maps, google-maps-api-3, touch-event

google maps api 不支持触​​摸事件

但是现在我需要在地图和标记上做一些事情，例如长按地图，点击标记，拖动标记。

我想做的和iOS的谷歌地图客户端一样

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-06T01:30:27.210

我以与 shreedhar 相同的方式实现触摸事件，但使用了“mousedown”事件。我发现在 web 视图（即 PhoneGap）中使用 Google Maps API 时不会在移动设备上触发“点击”，但是通过点击移动设备或点击网络会触发“mousedown”事件。

```
window.infowindow = new google.maps.InfoWindow({
   content: 'content'
});

google.maps.event.addListener(marker, 'mousedown', function(){
   window.infowindow.open(marker.get('map'), marker);
}); 
```

此外，请务必在您的页面上仅定义一个 infowindow 变量，并将其重新用于所有标记，因此我将 infowindow 定义为“全局”变量 window.infowindow。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T03:47:06.487

在此链接中，您可以获得许多示例。 [https://google-developers.appspot.com/maps/documentation/javascript/examples/](https://google-developers.appspot.com/maps/documentation/javascript/examples/)

最近我在谷歌地图上工作，下面是你可以拖放标记的代码，它在移动网络浏览器中完美运行。

```
gmap : function(lat,lng){
            var stockholm = new google.maps.LatLng(lat, lng);
            var parliament = new google.maps.LatLng(lat, lng);
            var marker;
            var map;
            function initialize() {
                var mapOptions = {
                    zoom: 13,
                    disableDefaultUI: true,
                    mapTypeId: google.maps.MapTypeId.ROADMAP,
                    center: stockholm
                };
                map = new google.maps.Map(document.getElementById("gmapDiv"),mapOptions);
                marker = new google.maps.Marker({
                    map:map,
                    draggable:true,
                    animation: google.maps.Animation.DROP,
                    position: parliament
                });
               var infowindow = new google.maps.InfoWindow({
                   content: 'content'
               });
                google.maps.event.addListener(marker, 'click', function(){
                  infowindow.open(marker.get('map'), marker);
                  });
            }
            initialize();
        } 
```

# pdf - 了解 PDF 中的文本定位运算符

> ID：11321572
> 
> 赞同：0
> 
> 时间：2012-07-04T02:07:44.863
> 
> 标签：pdf, position

> **可能重复：**
> [了解 PDF 运算符 - 适用于 iOS 应用](https://stackoverflow.com/questions/11258551/understanding-pdf-operators-for-ios-app)

我想了解`Td`、`TD`和`T*`运算符如何影响`Tm`.

例如，我们有以下信息：

```
Tm: (20, 0, 0, 20, 100, 200)
Td: 4.1001, 0
TD: 2.8961, 0
T*: 1.2219, 0 
```

现在这些运营商将如何影响`Tm`？

我应该乘以这些值吗？减，加？请帮我理解。提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T07:34:52.650

这些运算符影响当前点，因此仅影响文本矩阵的 Tx 和 Ty 成员。PDF 参考手册对 p406（1.7 参考）有相当清晰的定义。

对于 Td，您采用当前文本行矩阵，将 Tx 和 Ty 提供给 Td 与隐式矩阵相乘（即矩阵为 [1 0 0 1 Tx Ty]），结果将成为新的文本矩阵和新的文本线矩阵。

TD 完全一样，只是它还将文本状态中的前导参数设置为 -Ty。

T* 与 Td 具有相同的效果，但它使用当前文本前导 Ty 并且 Tx = 0。

转换矩阵在参考的第 4.2.3 节中描述，

# javascript - 当我从 phonegap android 上的 javascript 调用它时，为什么我的 WCF 服务的响应是空的？

> ID：11321574
> 
> 赞同：0
> 
> 时间：2012-07-04T02:08:00.257
> 
> 标签：javascript, json, cordova

我有使用 JSON 响应的 WCF 服务。我想从我在 phonegap android 上的 javascript 从我的 WCF 服务中获取 JSON 字符串。但是当我从我的 javascript 调用 WCF 服务时，来自 WCF 服务的响应是空的。我已经测试调用这个 WCF 服务并且它可以工作。我的javascript错了吗？

这是我的javascript：

```
<script type="text/javascript">
        function displayText()
        {
            $.ajax(
                    {
                        type: "GET",
                        contentType: "application/json; charset=utf-8",
                        url: "http://10.80.3.73/webservice/Service1.svc/json/weeklyflash/id",
                        dataType: "json",
                        success:function(data){
                            alert(data);
                        },
                        error: function () { 
                            alert("ERROR"); 
                        }
                    });

        }   
</script> 
```

警报消息仅显示`[object Object]`，当我尝试使用 firebug 跟踪它时，响应为空。

这是来自 WCF 服务的 JSON 字符串：

```
{"GetReportIdResult":[{"bulan":"4","total":"1728","type":"CHEESE1K","uang":"8796383"},{"bulan":"4","total":"572476","type":"ESL","uang":"5863408410"},{"bulan":"4","total":"46008","type":"ESL500ML","uang":"234498301"},{"bulan":"4","total":"190369","type":"UHT","uang":"1367063805"},{"bulan":"4","total":"33507","type":"WHP","uang":"235653242"},{"bulan":"5","total":"4761","type":"CHEESE1K","uang":"134877865"},{"bulan":"5","total":"648663","type":"ESL","uang":"6645764498"},{"bulan":"5","total":"49305","type":"ESL500ML","uang":"266817346"},{"bulan":"5","total":"245867","type":"UHT","uang":"1446787280"},{"bulan":"5","total":"47974","type":"WHP","uang":"631929807"},{"bulan":"6","total":"5762","type":"CHEESE1K","uang":"293393832"},{"bulan":"6","total":"594942","type":"ESL","uang":"6088671790"},{"bulan":"6","total":"39457","type":"ESL500ML","uang":"221983181"},{"bulan":"6","total":"236803","type":"UHT","uang":"2219506085"},{"bulan":"6","total":"24853","type":"WHP","uang":"386175022"}]} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T02:21:14.550

当您使用 jquery 并指定`dataType: 'json'`时，jQuery 会在运行时将 json 字符串反序列化为一个 javascript 对象，然后再调用您的成功回调。

您看到的原因`[object object]` 是：这是 javascript 对象的字符串表示形式。

# php - 显示“成功”或“错误”jquery 对话框的好方法是什么？

> ID：11321578
> 
> 赞同：0
> 
> 时间：2012-07-04T02:09:08.930
> 
> 标签：php, jquery, jquery-ui, codeigniter

我正在使用带有 jQ​​uery 的 PHP CodeIgniter。

比如说我有一个`<table>`（也许是员工）。现在在上述表格上方，我有一个“添加员工”按钮。此按钮打开一个`jQuery-dialog`带有 的`<form>`。当这个表单提交时，它当然会进入服务器端（验证是否重复条目），然后将它与更新的表一起发送回相应的视图。

我想要做的是显示一个成功添加员工或者它是重复条目的对话框。

我这样做是通过

```
appname/controller/action?addSuccess=true 
```

或者

```
appname/controller/action?addSuccess=false 
```

每次我返回视图，然后在我的页面上，`$(document).ready()`我都会检查此类查询字符串并打开相应的对话框（成功或错误对话框）。我现在的问题是，如果我刷新页面（相同的 url），我会再次获得对话框（尽管服务器端没有任何反应）。

**问题**：这种方法是否足够好？有什么好的建议可以改善这一点吗？:)

非常感谢！。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T02:49:39.067

为什么不将该信息作为查询参数传递，为什么不存储该信息 Code Igniters 闪存数据。此数据仅在一个重定向中保留。下次您重新加载页面时，数据将不会被设置（因为 CI 会自动为您删除它）并且您不会意外显示警告。

*   表单提交到服务器。在 CI 的 flash 消息系统中设置适当的值。
*   重定向到另一个网址？或者也许显示另一个视图。
*   在视图 html 中，使用 php 读取该 flash 消息值并在 javascript 中设置适当的值。
*   读取该 js 值并相应地显示弹出/模态/消息。
*   在下一页刷新时，CI 会自动删除 Flash 消息数据。

一些用于重定向视图 html 的示例代码：（我不做 php...）

```
var shouldDisplayWarning = "<? php code that sets some value based on flash variable ?>";
if (shouldDisplayWarning === "yes") {
  displayWarning();
} 
```

进一步阅读：[http](http://codeigniter.com/user_guide/libraries/sessions.html) ://codeigniter.com/user_guide/libraries/sessions.html （他们提到闪存数据的页面的一半。）

# php - Cakephp 核心 XML 类字符串无法解析为 XML

> ID：11321579
> 
> 赞同：1
> 
> 时间：2012-07-04T02:09:39.897
> 
> 标签：php, xml, cakephp

我尝试过以下查询并使用了 Cake 的核心 XML 类，但我得到 String could not be parsed as XML 错误...

```
$output = $this->Job->query("
            SELECT job.id, job.title, organisation.name, jobsboard.name
            FROM job
            LEFT JOIN portfolio_job_category pjc ON pjc.job_id = job.id
            LEFT JOIN category c ON c.id = pjc.category_id
            LEFT JOIN organisation ON organisation.id = job.organisation_id
            LEFT JOIN portfolio jobsboard ON jobsboard.id = pjc.portfolio_id
            WHERE job.end_date >= DATE( NOW( ) ) 
            AND pjc.portfolio_id = $portfolio
            ORDER BY c.id DESC
            ");
$jobs['jobs_feed'] = $output;
$jobs = Xml::fromArray($jobs);
$jobs = $jobs->asXML(); 
```

以下是模型自定义查询的数组输出。

```
Array
(
    [0] => Array
        (
            [job] => Array
                (
                    [id] => 38459
                    [title] => UTS: Engineering Research Scholarships in Petroleum Remediation
                )

            [organisation] => Array
                (
                    [name] => University of Technology Sydney
                )

            [jobsboard] => Array
                (
                    [name] => Research Jobs
                )

        )

    [1] => Array
        (
            [job] => Array
                (
                    [id] => 44144
                    [title] => Associate Lecturer - Clinical Exercise Physiology
                )

            [organisation] => Array
                (
                    [name] => James Cook University
                )

            [jobsboard] => Array
                (
                    [name] => Research Jobs
                )

        )
) 
```

我能做些什么来解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T08:08:18.553

xml 需要一个根节点：

改变：

```
$jobs = Xml::fromArray($jobs); 
```

至：

```
$jobs = Xml::fromArray(array('jobs' => $jobs)); 
```

# java - 公历 GUI - 问题

> ID：11321581
> 
> 赞同：3
> 
> 时间：2012-07-04T02:10:02.247
> 
> 标签：java, swing, user-interface, gregorian-calendar

我必须为我的 Java 类制作一个功能齐全的日历，但我被卡住了。我`GregorianCalendar`用来获取当前日期、月份、年份等。我使用`JButton`s 来填充填写日历的 42 个字段，并在每个人上发布月份中的日期`JButton`。我无法让本月的第一天（7 月）落入正确的`JButton`. 日历将月份识别为 7 月，将年份识别为 2012 年，但它将 1 号放在星期一而不是星期日，并且相差一周。这是我的代码，感谢您的帮助！

```
import java.awt.BorderLayout;
import java.awt.GridLayout;
import java.util.GregorianCalendar;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;

public class Calendar extends JFrame {

    public Calendar() {
        this.setSize(800, 600);
        this.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        this.setVisible(true);
        this.setTitle("Calendar");

        JPanel borderPanel = new JPanel();
        borderPanel.setLayout(new BorderLayout());
        getContentPane().add(borderPanel);

        // Initialize GregorianCalendar
        GregorianCalendar cal = new GregorianCalendar();
        int currYear = cal.get(GregorianCalendar.YEAR);
        int currDOM = cal.get(GregorianCalendar.DAY_OF_MONTH);
        int currMnth = cal.get(GregorianCalendar.MONTH);
        String month2 = "";
        switch (currMnth) {
            case 0:
                month2 = "January";
                break;
            case 1:
                month2 = "February";
                break;
            case 2:
                month2 = "March";
                break;
            case 3:
                month2 = "April";
                break;
            case 4:
                month2 = "May";
                break;
            case 5:
                month2 = "June";
                break;
            case 6:
                month2 = "July";
                break;
            case 7:
                month2 = "August";
                break;
            case 8:
                month2 = "September";
                break;
            case 9:
                month2 = "October";
                break;
            case 10:
                month2 = "November";
                break;
            case 11:
                month2 = "December";
                break;
        }
        int nod, som;
        nod = cal.getActualMaximum(GregorianCalendar.DAY_OF_MONTH); //Number of Days
        som = cal.get(GregorianCalendar.DAY_OF_WEEK_IN_MONTH); // Start of the Month

        // Button Layout
        final int ROWS = 6;
        final int COLS = 7;
        JButton[][] days;
        JPanel calendar = new JPanel();
        calendar.setLayout(new GridLayout(6, 7));
        days = new JButton[ROWS][COLS];
        for (int row = 0; row < ROWS; row++) {
            for (int col = 0; col < COLS; col++) {
                days[row][col] = new JButton("");
                calendar.add(days[row][col]);
            }
        }

        // Add Some Number to the Buttons
        int[] tableMonth = {31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
        int startDay = som;
        int daysInMonth = tableMonth[currMnth];
        for (int i = 0; i < daysInMonth; i++) {
            days[(startDay + i) / 7][(startDay + i) % 7].setText("" + (i + 1));
        }
        borderPanel.add(calendar, BorderLayout.CENTER);

        // North Panel - Current Month / Prev & Next Button
        JPanel month = new JPanel();
        month.add(new JButton("Previous"));
        month.add(new JLabel(month2));
        month.add(new JButton("Next"));
        borderPanel.add(month, BorderLayout.NORTH);

        // West Panel - Current Date
        JPanel year = new JPanel();
        year.add(new JButton("The Year is: " + currYear));
        borderPanel.add(year, BorderLayout.SOUTH);

        // South Panel - Current Year
        JPanel today = new JPanel();
        today.add(new JButton("Today is: " + month2 + " " + currDOM + ", " + currYear));
        borderPanel.add(today, BorderLayout.WEST);

    }

    public static void main(String[] args) {
        new Calendar();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T03:32:56.517

我将解决程序的逻辑部分与 GUI 部分分开，然后使用逻辑部分。我会使用 SimpleDateFormat 来获取我的特殊日历字符串，例如月份和星期几字符串。例如：

```
import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Date;
import java.util.GregorianCalendar;

public class MyCalendar {
   private static final SimpleDateFormat MONTH_FORMAT = new SimpleDateFormat("MMMM");
   private static final SimpleDateFormat DAY_OF_WEEK_FORMAT = new SimpleDateFormat("EEEE");
   private static final SimpleDateFormat MY_DATE_FORMAT = new SimpleDateFormat("MM/dd/yyyy");

   public static void main(String[] args) {

      GregorianCalendar cal = new GregorianCalendar(2012, Calendar.JANUARY, 1);
      for (int j = 0; j < 24; j++) {
         Date date = cal.getTime();
         System.out.println("Date: " + MY_DATE_FORMAT.format(date));
         int year = cal.get(Calendar.YEAR);
         System.out.println("year := " + year);
         int month = cal.get(Calendar.MONTH);
         System.out.printf("month number: %d, month name: %s%n", month, MONTH_FORMAT.format(date));
         int dayOfWeek = cal.get(Calendar.DAY_OF_WEEK);
         System.out.printf("day of week: %d, day of week string: %s%n", dayOfWeek, DAY_OF_WEEK_FORMAT.format(date));

         int maxDaysInMonth = cal.getActualMaximum(Calendar.DAY_OF_MONTH);
         System.out.println("maxDaysInMonth := " + maxDaysInMonth);
         cal.add(Calendar.MONTH, 1);
         System.out.println();
      }

      System.out.println("Today!");
      cal = new GregorianCalendar(); // today!
      Date date = cal.getTime();
      System.out.println("Date: " + MY_DATE_FORMAT.format(date));
      int year = cal.get(Calendar.YEAR);
      System.out.println("year := " + year);
      int month = cal.get(Calendar.MONTH);
      System.out.printf("month number: %d, month name: %s%n", month, MONTH_FORMAT.format(date));
      int dayOfWeek = cal.get(Calendar.DAY_OF_WEEK);
      System.out.printf("day of week: %d, day of week string: %s%n", dayOfWeek, DAY_OF_WEEK_FORMAT.format(date));

      int maxDaysInMonth = cal.getActualMaximum(Calendar.DAY_OF_MONTH);
      System.out.println("maxDaysInMonth := " + maxDaysInMonth);
      cal.add(Calendar.MONTH, 1);

   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T04:19:22.633

除了@HFOE 的出色指导，以下建议可能会有所帮助：

*   使用符合您要求的最高抽象级别。

    ```
    public static void main(String[] args) {

        Calendar cal = Calendar.getInstance();
        cal.set(2012, Calendar.JANUARY, 1);
        for (int j = 0; j < 24; j++) {
        ...
        }
    } 
    ```

*   构建您的代码以模块化方式构建组件和面板，如此[处](https://stackoverflow.com/a/5522583/230513)和[此处](https://stackoverflow.com/a/3175280/230513)所示。

*   使用[事件调度线程](http://download.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T04:05:27.110

好的，一切正常，但我卡在 Prev 和 Next 按钮上。我有 ActionListener 设置，当我按下按钮时，它会分别打印到我的控制台 +1 或 -1 中，但日历没有刷新。我不确定我需要做些什么才能让这部分工作。这是我现在所拥有的...

公共类日历扩展 JFrame {

```
static JButton btnNext, btnPrev;
static int currYear, currDOM, currentMonth;

public Calendar() {
    this.setSize(800,600);
    this.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
    this.setVisible(true);
    this.setTitle("Calendar");

    JPanel borderPanel = new JPanel();
    borderPanel.setLayout(new BorderLayout());
    getContentPane().add(borderPanel);

    // Initialize GregorianCalendar
    GregorianCalendar cal = new GregorianCalendar();
    int currYear = cal.get(GregorianCalendar.YEAR);
    int currDOM = cal.get(GregorianCalendar.DAY_OF_MONTH);
    int currMnth = cal.get(GregorianCalendar.MONTH);
    currentMonth = currMnth;
    String StringMnth = "";
        switch(currMnth) {
        case 0: StringMnth = "January"; break;
        case 1: StringMnth = "February"; break;
        case 2: StringMnth = "March"; break;
        case 3: StringMnth = "April"; break;
        case 4: StringMnth = "May"; break;
        case 5: StringMnth = "June"; break;
        case 6: StringMnth = "July"; break;
        case 7: StringMnth = "August"; break;
        case 8: StringMnth = "September"; break;
        case 9: StringMnth = "October"; break;
        case 10: StringMnth = "November"; break;
        case 11: StringMnth = "December"; break;
    }
    int nod, som;
    cal.set(GregorianCalendar.DATE, 1);
    nod = cal.getActualMaximum(GregorianCalendar.DAY_OF_MONTH); //Number of Days
    som = (cal.get(GregorianCalendar.DAY_OF_WEEK) - GregorianCalendar.SUNDAY + 7)%7; // Start of the Month

    // Button Layout
    final int ROWS = 6;
    final int COLS = 7;
    JButton[][] days;
    JPanel calendar = new JPanel();
    calendar.setLayout(new GridLayout(6,7));
    days = new JButton[ROWS][COLS];
    for(int row = 0; row < ROWS; row++) {
        for(int col = 0; col < COLS; col++) {
            days[row][col] = new JButton("");
            calendar.add(days[row][col]);
        }
    }

    // Add Some Number to the Buttons
    int[] tableMonth = {31,28,31,30,31,30,31,31,30,31,30,31};
    int startDay = som;
    int daysInMonth = tableMonth[currMnth];
    for(int i = 0; i < daysInMonth; i++){
        days[(startDay + i)/7][(startDay + i) % 7].setText("" + (i + 1));
    }
    borderPanel.add(calendar, BorderLayout.CENTER);

    // North Panel - Current Month / Prev & Next Button
    btnNext = new JButton(">>");
    btnPrev = new JButton("<<");
    JPanel month = new JPanel();    
    month.add(btnPrev);
    month.add(new JLabel(StringMnth));
    month.add(btnNext);
    borderPanel.add(month, BorderLayout.NORTH);

    //Listeners
    btnPrev.addActionListener(new btnPrev_Action());
    btnNext.addActionListener(new btnNext_Action());

    // West Panel - Current Date
    JPanel year = new JPanel();
    year.add(new JButton("The Year is: " + currYear ));
    borderPanel.add(year, BorderLayout.SOUTH);

    // South Panel - Current Year
    JPanel today = new JPanel();
    today.add(new JButton("Today is: " + StringMnth + " " + currDOM + ", " + currYear));
    borderPanel.add(today, BorderLayout.WEST);

}

static class btnNext_Action implements ActionListener{
    public void actionPerformed (ActionEvent e){
        currentMonth += 1;
        System.out.print(currentMonth);
    }
}

static class btnPrev_Action implements ActionListener{
    public void actionPerformed (ActionEvent e){
        currentMonth -= 1;
        System.out.print(currentMonth);
    }
}
public static void main(String[] args) {
    new Calendar();
} 
```

}

# php - 在这种情况下如何使用 PHP 检索 RSS 提要？

> ID：11321582
> 
> 赞同：0
> 
> 时间：2012-07-04T02:10:09.207
> 
> 标签：php, rss

我正在尝试使用 php 检索 RSS 提要。xml 有许多不同的节点。我不确定如何显示`<dc:>,<rdf:>,<syn:>`节点。

喂养

```
<item>xxx</item>
....
....
<dc:name>John</dc:name>    //I am not sure how to get this content
<dc:title>Manager</dc:title>
<syn:updateTime>1970-01-01</syn:updateTime>
<rdf:Seq>
   <rdf:li rdf:resource="http://xxx/>
   <rdf:li rdf:resource="http://xxx/>
</rdf:Seq> 
```

php

```
$contents= file_get_contents($url);

$results=new SimpleXMLElement($contents);

    //not sure what I can do to display those special nodes...
    foreach ($results->channel as $node):

        echo $node->item; //only show item content  

    endforeach; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T02:21:28.177

尝试这个：

```
$xmlStr= simplexml_load_string($contents); 
```

然后您可以使用 print_r 转储对象`$xmlStr`

```
echo print_r($xmlStr) 
```

或在浏览器中

```
echo "<pre>".print_r($xmlStr)."</pre>"; 
```

这样，您可以检查对象，如果那是您正在尝试做的事情。要访问单个值/节点：

```
echo $xmlStr->node 
```

这应该返回节点的内容。

不知道如果你这样做会发生什么，但你也可以尝试以下，但这取决于`$xmlStr`也许...的内容：

```
foreach($xmlStr as $key => $value) {
    print "$key => $value\n";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T02:56:33.013

如果它是符合标准的 RSS 提要，为什么不使用[simplepie](https://github.com/simplepie/simplepie/)或类似的东西呢？一个专用的解析器几乎总是比滚动你自己的更好:)

# ios - 如何在 UITextView 下添加 UIImageViews（UITextView 跨越整个屏幕）

> ID：11321585
> 
> 赞同：0
> 
> 时间：2012-07-04T02:10:39.413
> 
> 标签：ios, xcode, uiview, uitextview

我的 UITextView 有一个描述，但在它的底部，我想在最后一行文本下方添加图像。我怎么做？

```
UITextView* description = [[UITextView alloc] init];
description.frame = CGRectMake(0, 0, 320, 420);
description.text = [self.dict valueForKey:@"description"];
description.font = [UIFont systemFontOfSize:14];
[self.view addSubview:description]; 
```

已编辑：文本不可编辑。我真正想做的看起来像是 Apple App Store 中的一个应用程序。滚动到描述的底部后，有一个可滚动的屏幕截图视图。我想实现同样的事情。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T02:18:03.953

不确定我是否完全理解您的要求，但请查看[UIScrollView](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html)和[UITableView](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html)（UIScrollView 的子类）。表格视图可能效果最好，因为您可以将文本视图添加到一个单元格，然后在后续单元格中添加图像视图。如果您可以发布更多详细信息，我可能会提供更多帮助。

# multithreading - 如何逐步加载我的 Silverlight 用户控件？

> ID：11321586
> 
> 赞同：0
> 
> 时间：2012-07-04T02:10:47.467
> 
> 标签：multithreading, silverlight, load

如何逐步加载我的 silverlight 用户控件？我们可以看到一个完成，1秒后另一个开始....如果能提供演示，非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T18:21:29.017

你可以像这样使用一个TransitionControl：http: [//demos.telerik.com/silverlight/#TransitionControl/FirstLook](http://demos.telerik.com/silverlight/#TransitionControl/FirstLook) 然后你可以在后面的代码中手动设置一个计时器来每隔一秒左右切换一次内容吗？

# android - 如何在 Android 的不同屏幕密度上正确缩放位图中的文本？

> ID：11321587
> 
> 赞同：1
> 
> 时间：2012-07-04T02:11:00.103
> 
> 标签：android, text, bitmap, textview, android-canvas

我对 android 编程很陌生，但是我有一些人为我编写了一个小部件，但他们做的事情与我想要的有点不同......他们在小部件显示为位图而不是文本视图。这并没有给我我想要的控制权。让我发布我所拥有的代码，看看是否有人可以提供帮助。这是它的 .java 代码：

```
 String strHourFormat = "hh:mm";
    String strDateFormat = "MM.dd.yy";
    SimpleDateFormat fHour = new SimpleDateFormat(strHourFormat);
    SimpleDateFormat fDate = new SimpleDateFormat(strDateFormat);
    Date date = new Date();
    String am = date.getHours() > 11 ? "PM":"AM";

    setContentView(R.layout.widget_ui);
    TextView day = new TextView(this);
    day = (TextView) findViewById(R.id.day);
    day.setText("" + fDate.format( date));
    day.setTypeface(Typeface.createFromAsset(this.getAssets(), "roboto_thin.ttf"));

    ///////////
    WidgetBiggs.previousState = WidgetBiggs.getWifiState(getApplication());     
    SoundDebug.previousState = SoundDebug.getSoundState(getApplication());
    // Update each requested appWidgetId
    RemoteViews widgetView = WidgetBiggs.buildUpdate(getApplication(), -1);

    for(int wid:widgetIds){
        //final RemoteViews widgetView = new RemoteViews(getPackageName(),R.layout.widget_ui);
        widgetView.setImageViewBitmap( R.id.img_Hour, updateFontText(""+fHour.format(date),40,100,84,100,60)); 
        widgetView.setImageViewBitmap( R.id.img_AM, updateFontText(""+am,25,40,84,40,60)); 
        widgetView.setImageViewBitmap( R.id.img_Day, updateFontText("" + fDate.format( date),38,150,40,150,40)); 
        //widgetView.setImageViewBitmap( R.id.img_Weather, updateFontText(getWeatherGoogle().toString(),25,120,30,120,30)); 
```

中间还有一些其他的东西......

```
private Bitmap updateFontText(String time, int size, int width, int height, int widthText, int heightText) 
{
Bitmap myBitmap = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_4444);
Canvas myCanvas = new Canvas(myBitmap);
Paint paint = new Paint();
Typeface clock = Typeface.createFromAsset(this.getAssets(),"roboto_thin.ttf");
paint.setAntiAlias(true);
paint.setSubpixelText(true);
paint.setTypeface(clock);
paint.setStyle(Paint.Style.FILL);
paint.setColor(Color.WHITE);
paint.setTextSize(size);
paint.setTextAlign(Align.RIGHT );
myCanvas.drawText(time, widthText, heightText, paint);
return myBitmap; 
```

这是我开始的 XML：

```
<TextView
    android:id="@+id/day"
    android:visibility="visible"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:gravity="center_horizontal|center_vertical"
    android:textSize="32dp">            
</TextView> 
```

这导致我的应用程序失控。如果你看到任何突出的东西，请告诉我。我想把位图文本拿出来，把textview文本放进去。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T07:15:38.980

他们的位图策略没有错。只需根据屏幕密度更改“大小”参数即可。

```
DisplayMetrics metrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(metrics); 
```

现在将您的`size`, `width`, `height`,`widthText`和`heightText`值乘以`metrics.density`。

这会将它们视为 dp 值，以便为您所在的屏幕生成正确的 px 值。

从文档：

> DisplayMetrics.density 字段指定根据当前屏幕密度将 dp 单位转换为像素时必须使用的比例因子。在中等密度屏幕上，DisplayMetrics.density 等于 1.0；在高密度屏幕上它等于 1.5；在超高密度屏幕上，它等于 2.0；在低密度屏幕上，它等于 0.75。这个数字是您应该乘以 dp 单位以获得当前屏幕的实际像素数的因子。

如果您坚持使用位图，您将可以更好地控制字体渲染。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T15:22:50.110

对您的问题的简短回答是，使用密度资源。如果您使用的是高密度屏幕，但您的位图位于：

`res/drawable-hdpi/`

长答案是，屏幕密度没有“灵丹妙药”，可以这么说，并且要拥有成功的应用程序，您需要确保您的应用程序在所有屏幕上都能正常工作。让您的图像在一个屏幕上呈现很容易，但在多个分辨率下保持相同则有点棘手。

本文很好地讨论了一些不同的方法和技术，您可以使用这些方法和技术来确保您的位图在所有屏幕上正确显示，而不仅仅是一个屏幕。本文包含一些您应该了解的最佳实践和其他信息，这将使您更轻松：

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

祝你好运！

# slideshow - Colorbox - 将图像编号更改为有序

> ID：11321588
> 
> 赞同：0
> 
> 时间：2012-07-04T02:11:06.553
> 
> 标签：slideshow, colorbox

图像幻灯片的 Colorbox 的编号/监视器类似于**"1 of 3"**。我想让它成为**“1 | 2 | 3”**。我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T02:42:34.450

抱歉，我想不出一个简单的方法来做到这一点。您必须修改插件的源代码才能提供此功能。

# macos - Mac系统应用扩展

> ID：11321593
> 
> 赞同：-1
> 
> 时间：2012-07-04T02:12:43.437
> 
> 标签：macos, code-injection

我正在尝试修改属于 dock.app 的任务控制的功能，我想知道这样做的首选方法是什么。我已经研究过使用更简单的默认方法，但这不会给我足够的控制权。我很好奇人们是否使用 Unsanity 的 Application Enhancer 之类的东西来执行这些目的的自定义代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T20:11:36.010

Application Enhancer 在这一点上实际上是一个死项目——虽然当前版本确实宣传了对 Lion 的支持，但 Mountain Lion 计划在下个月发布，而且他们不太可能支持它（因为 Unsanity 网站和自去年 11 月以来，他们的 Twitter 帐户根本没有更新）。我强烈建议不要将其用于新产品。

在以前的 OS X 版本中，SIMBL 和 PlugSuit 很流行，但在 Lion 上都没有。现在选项似乎更加有限；然而，Rentzch 的[mach_star](https://github.com/rentzsch/mach_star) (mach_override / mach_inject) 代码似乎仍在工作。

# iphone - 使用airplay时如何控制副屏

> ID：11321598
> 
> 赞同：-1
> 
> 时间：2012-07-04T02:13:20.607
> 
> 标签：iphone, objective-c, ios, xcode

我正在使用这个著名的 airplay 演示应用程序：[https ://github.com/quellish/AirplayDemo/](https://github.com/quellish/AirplayDemo/)

并试图弄清楚如何从主屏幕控制辅助屏幕。为简单起见，在屏幕 1 上有一个按钮，如果点击该按钮，则会在屏幕 2 (Apple TV) 上显示一些内容。

知道如何做到这一点或如何使用这个演示应用程序来支持这样的功能吗？

多谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T22:26:17.290

您可以通过两种不同的方式执行此操作，您可以尝试通过创建委托接口来执行此操作。试试这个教程，它准确地解释了如何创建/使用委托。

见： http: [//www.ios-developer.net/iphone-ipad-programmer/development/delegates/how-to-create-a-delegate](http://www.ios-developer.net/iphone-ipad-programmer/development/delegates/how-to-create-a-delegate)

或者，您可以在加载视图控制器的地方创建类的单例。所以你可以调用这个单例并调用另一个视图控制器的函数。

对于单身人士，请参阅： http: [//getsetgames.com/2009/08/30/the-objective-c-singleton/](http://getsetgames.com/2009/08/30/the-objective-c-singleton/)

我只是在我的 AppDelegate 中加载我的视图控制器，然后当我按下按钮时，我调用我的应用程序的 UIApplication sharedInstance。请参阅下面的代码以获取计数器：

```
- (IBAction)raiseNumber:(id)sender {
int number = [[AppDelegate sharedInstance] getNumber];
number++;

[[AppDelegate sharedInstance] setNumber:number];

//Set to label on the remote view
[[AppDelegate sharedInstance].remoteViewController setNumber:number];
} 
```

我希望这很有帮助，如果您有任何问题，请告诉我:-)。

# python - 尝试在 Windows 上启动 IDLE 时出现 python 错误：无法导入名称 InteractiveInterpreter

> ID：11321607
> 
> 赞同：0
> 
> 时间：2012-07-04T02:15:13.647
> 
> 标签：python, python-idle

今天早上安装并玩弄了 web.py 之后，加上在 Python26 安装（Windows）上安装（不必要的）pysqlite，空闲界面将不再启动。

我收到的错误代码：

```
C:\Python26>python -m idlelib.idle
Traceback (most recent call last):
  File "C:\Python26\lib\runpy.py", line 122, in _run_module_as_main
    "__main__", fname, loader, pkg_name)
  File "C:\Python26\lib\runpy.py", line 34, in _run_code
    exec code in run_globals
  File "C:\Python26\lib\idlelib\idle.py", line 6, in <module>
    import PyShell
  File "C:\Python26\lib\idlelib\PyShell.py", line 16, in <module>
    from code import InteractiveInterpreter
ImportError: cannot import name InteractiveInterpreter 
```

我尝试了一些方法，包括重新安装 Python 2.6.6。尚未恢复 Idle 的运行能力。

有人对出了什么问题/我该如何解决有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T02:01:04.510

叹息……没关系。

web.py 的入门演练代码建议您将文件称为“code.py”。即使我在 C:\Python26 文件夹之外的自己的目录中有这个文件，它也会干扰 Python 期望的 code.py（其中包含 InteractiveInterpreter 代码。）

除非这是 web.py 人的残酷玩笑，否则我建议他们更改他们建议您调用示例测试代码名称的内容！

# jquery - 如何从jQuery.post的回调中获取变量的值？

> ID：11321610
> 
> 赞同：0
> 
> 时间：2012-07-04T02:15:59.407
> 
> 标签：jquery

我正在尝试使用 jQuery.post API 外部回调的返回值（响应）.. 那怎么做？

```
jQuery.post( ajaxurl, 'action', function( response ) 
{
console.log(response); // this comes back with "working"

// i tried this responseVal = response;  but didn't work            

}); 

alert(response); // this will be undefined. 
```

所以我希望警报能够访问响应....是的，我知道我可以在回调内部轻松地提醒它，但我的应用程序需要在外部访问它。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T02:19:33.280

`response`调用警报时超出范围。

以下代码段执行一个检查是否已设置的函数，`result`如果已设置，则清除间隔和警报`result`：

```
var result, interval;

jQuery.post( ajaxurl, 'action', function( response ) 
{
    result = response;
}); 

interval = setInterval(function(){
    if(result !== undefined) {
        clearInterval(interval);
        alert(result); 
    }
}, 1000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T02:29:30.263

该回调是异步的，因此您的 js 中的执行无需等待设置响应即可继续。很可能在火灾发生时`responseVal = response`不会*发生*`alert(responseVal)`，因此 responseVal 将未设置。

您可以通过初始化`responseVal`一些明显“未设置”的值、执行 ajax 调用、提醒、在脚本中浪费时间（如`while(responseVal == "not set") { i++; }`）然后再次提醒来测试这一点。

我知道你的问题说你不能`response`在成功回调中使用你需要的任何东西，但我建议你*更加努力地弄清楚如何去做，*否则你将处理`setInterval(...)`恶作剧ala @Xander's answer或设置`async=false`选项在[`jQuery.ajax(...)`](http://api.jquery.com/jQuery.ajax/)（连同将该请求发布并设置网址等）并阻止执行。

# asp.net-mvc - MVC 4 - 接受多个参数的视图

> ID：11321615
> 
> 赞同：0
> 
> 时间：2012-07-04T02:16:42.230
> 
> 标签：asp.net-mvc, view, parameters

我已经看到其他一些与我有相同问题的线程，但我不太了解它们。无论如何，我的场景是这样的：我有一个 MainView，它在其中呈现四个不同的 PartialView。原因是因为每个 PartialView 都包含来自不同表（模型）的数据。

所以我的问题是这个。我的 MainView 接受一个字符串类型的参数，它是一个 ID。我需要将该 ID 传递给我的每个 PartialViews。这很容易实现，但问题是，每个局部视图还需要接受 List<> 类型的参数。

我的问题是，如何将两个参数传递给我的 PartialView（即字符串和 List<>）？

目前，我的 PartialViews 只接受一个参数 (List<>)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T03:44:26.077

创建一个同时包含字符串和列表<> 的对象，并将其传递给您的 PartialViews。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T20:02:34.793

您可以使用 ViewModel。创建一个 Viewmodel，它是您需要在视图中显示的所有对象的结果。更干净。

有很多文章包含这些信息。

# lambda-calculus - 函数的 Lambda 演算约简

> ID：11321623
> 
> 赞同：1
> 
> 时间：2012-07-04T02:18:09.920
> 
> 标签：lambda-calculus

我对 lambda 演算非常陌生，在阅读教程时遇到了这个问题。这是我的方程式。

```
Y = ƛf.( ƛx.f(xx)) ( ƛx.f(xx)) 
```

现在如果我们应用另一个术语，比如说 F (YF)，那么我们如何才能减少它。如果我根据 beta 减少是正确的，我们可以将**(ƛx.f(xx))**中 的所有**f**替换为**(ƛx. f(xx))**，这是正确的，如果是，我们该怎么做。

 ****谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T02:20:07.180

还原步骤：

```
Y = ƛf.( ƛx.f(xx)) ( ƛx.f(xx)) = ƛf.( f ( ƛx.f(xx) ƛx.f(xx) ) ) 
  = ƛf.( f ( f (ƛx.f(xx) ƛx.f(xx)))) 
  = ƛf.( f ( f ( f (ƛx.f(xx) ƛx.f(xx)))) 
  = ƛf.( f ( f ( f ( f (ƛx.f(xx) ƛx.f(xx))))) = ... 
```

所以这个 Lambda 项进入了一个无限循环......

**解释：**
让我们看看`( ƛx.f(xx) ƛx.f(xx) )`我们`ƛx.f(xx)`用`f'`
它替换的术语`(f' f')`=> 激活术语`f'`本身。
这样看可能更容易：
`( ƛy.f(yy) ƛx.f(xx) )`现在当您激活`ƛy.f(yy)`并提供输入（用 替换`y`）`ƛx.f(xx)`时，结果是：`f(ƛx.f(xx) ƛx.f(xx))`反过来，它可以一次又一次地遍历相同的过程，而 lambda 表达式只会消耗。 ..

**备注：**
写错了：
`Y = ƛf.( ƛx.f(xx)) ( ƛx.f(xx))` 它实际上应该是： 和`Y = ƛf.(ƛx.f(xx) ƛx.f(xx))`
的区别在于后者是一个激活- 像这样激活它是没有意义的，因为我们需要一个（输入）来激活它。**最后：**意思：`ƛx.f(xx)``(ƛx.f(xx))``ƛx.f(xx)``(ƛx.f(xx))``x`

 **`Y = ƛf.( ƛx.f(xx)) ( ƛx.f(xx)) = ƛf.( f ( ƛx.f(xx) ƛx.f(xx) ) )`

`YF = ( ƛx.F(xx)) ( ƛx.F(xx)) = F(ƛx.F(xx)) ( ƛx.F(xx)) = F(YF)`******

# android - 屏幕解锁后再次显示已关闭的对话框

> ID：11321624
> 
> 赞同：0
> 
> 时间：2012-07-04T02:18:16.500
> 
> 标签：android, dialog

我已经多次观察到，在手机锁定一段时间然后解锁后，已经关闭的对话框再次出现。这种情况偶尔会发生，并非总是如此。

我使用的代码非常简单：

```
showDialog(DIALOG_LOADING);
new AsyncTask<Void, Void, PhotoList>(){
    @Override
    protected PhotoList doInBackground(Void... params) {
        // load and return data
    }

    protected void onPostExecute(PhotoList result) {
        dismissDialog(DIALOG_LOADING);
        // display data
    }
}.execute();
....
@Override
protected Dialog onCreateDialog(int id) {
    Log.d(TAG, "onCreateDialog");
    switch(id){
    case DIALOG_LOADING:
        return ProgressDialog.show(this, null, "Loading. Please wait...", true);
    default:
        return super.onCreateDialog(id);
    }
} 
```

现在，发生的事情是：对话框显示，数据被加载，对话框被关闭。到目前为止一切顺利，只是在手机锁定一段时间后对话框再次出现，我再次解锁。

任何想法为什么会发生？

谢谢西蒙
_

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T03:31:50.127

我怀疑你把`showDialog(DIALOG_LOADING);`in`onResume()`回调。`onResume()`这是屏幕解锁后显示对话框的最可能原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T06:43:51.150

我不能 100% 肯定地说，但我认为这与调试有关。对于为生产而编译的应用程序，我从来不喜欢它。

# objective-c - TWTweetComposeViewController - 动画 GIF

> ID：11321626
> 
> 赞同：3
> 
> 时间：2012-07-04T02:18:44.667
> 
> 标签：objective-c, ios, ios5, twitter, xamarin.ios

是否可以使用上传动画**GIF**`TWTweetComposeViewController`？

我试了一下`UIImage`，它只上传第一帧。这是有道理的，因为`UIImage`不支持动画 GIF。

有没有办法做到这一点？也许是一种通过的方法`NSData`？

> （**我的应用是 MonoTouch C#，但 Objective-C 的答案也同样有效**）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T07:28:11.363

[按照此链接 http://blog.stijnspijker.nl/2009/07/animated-and-transparent-gifs-for-iphone-made-easy/](http://blog.stijnspijker.nl/2009/07/animated-and-transparent-gifs-for-iphone-made-easy/)它具有将 GIF 图像插入 UIImageView 的库

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T17:27:26.873

我假设没有办法做到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T19:35:44.670

你是对的 - Twitter 的官方 API 文档**不允许使用**动画 gif - 只允许使用 png、jpeg 和一帧 gif

这是他们的[api 文档页面](https://dev.twitter.com/docs/api/1.1/post/statuses/update_with_media)

我还尝试了使用多部分图像数据集到原始 Gif 文件和 twitter 发回 400 / 403 错误消息的[TWrequest post示例](https://stackoverflow.com/questions/8034764)

# javascript - 聆听地点标签点击

> ID：11321629
> 
> 赞同：0
> 
> 时间：2012-07-04T02:19:36.560
> 
> 标签：javascript, google-maps

单击地点标签时是否会触发事件？

![关联](../Images/0d649c7cb7a6cecf63b58ed6aa18b150.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T02:10:22.273

```
google.maps.event.addListener(button1, 'click', function() {
    map.setZoom(4);
    } 
  }); 
```

所以在这个例子中，我们有一个监听器（在初始化函数内部）。我们有我们的 var button1。每当单击 button1 时，我们的地图都会将其缩放级别设置为 4。当然，您可以更改函数内部发生的任何事情。

您提出的问题是单击地点标签时是否触发了事件，默认情况下简单的答案是否定的。但是，您可以使用此侦听器触发事件​​。

# mysql - 在 group by 上使用多个列时 mysql 如何工作？

> ID：11321630
> 
> 赞同：2
> 
> 时间：2012-07-04T02:19:40.587
> 
> 标签：mysql, group-by

那么当在 group by 上使用多个列时，mysql 是如何工作的：

```
select
    a.nome,
    b.tb2_id,
    count(c.tb2_id) as saida
from tb1 a
left join tb2 b on a.tb1_id = b.tb1_id
left join tb3 c on b.tb2_id = c.tb2_id
group by a.tb1_id, b.tb2_id
order by a.tb1_id desc 
```

mysql如何知道它将使用哪一列对结果集进行分组？

我认为它会按顺序执行，但我将 group by 更改为 'b.tb2_id,a.tb1_id' 但它没有做任何更改，结果相同。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T02:22:52.770

`group by a.tb1_id, b.tb2_id`表示由 和 组成的组`a.tb1_id`，`b.tb2_id`两者`a.tb1_id`和`b.tb2_id`需要相同才能被视为一个组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T04:52:34.800

只有`order by`子句影响行的顺序。

该`group by`子句影响数据聚合。mysql 的特殊之处在于，与大多数其他数据库不同，它允许按未选择的列对数据进行分组，并进一步允许对未按列分组的数据进行非聚合。在这种最后一个选项被执行的情况下（如在您的查询中 -`a.nome`没有被分组），mysql返回每个组遇到的*第一行。*如果您尝试执行此查询，我知道的所有其他数据库都会引发 SQL 语法异常。

# java - Java将原始类型连接到String

> ID：11321631
> 
> 赞同：2
> 
> 时间：2012-07-04T02:19:42.217
> 
> 标签：java, primitive, autoboxing

由于自动装箱，您可以将原始类型连接到 String 的原因是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T02:21:56.077

不。

Java 语言本机处理原语与字符串的连接。

它是该语言第一个版本的一部分——比自动装箱早了大约 10 年

# ios - 为什么用于 UINavigationBar 自定义的图像对于 Retina 显示是 44 像素而不是 88 像素？

> ID：11321634
> 
> 赞同：0
> 
> 时间：2012-07-04T02:20:15.063
> 
> 标签：ios

我正在使用以下方法自定义导航栏：

```
 UIImage *anImage = [[UIImage imageNamed:@"theImage"] 
        resizableImageWithCapInsets:UIEdgeInsetsMake(0, 0, 0, 0)];

   [[UINavigationBar appearance] setBackgroundImage:anImage 
        forBarMetrics:UIBarMetricsDefault]; 
```

（在 Xcode 中，图像称为“theImage@2x.png”）我正在使用一个 88 像素高的 tile 用于视网膜显示。然而，它的高度是我想要的两倍。所以我查看了这个 [http://www.raywenderlich.com/4344/user-interface-customization-in-ios-5](http://www.raywenderlich.com/4344/user-interface-customization-in-ios-5)，他们使用的是 44 高的图像，这让我很困惑。我期待图像 44 不应该用于视网膜，而是 88 用于视网膜，但显然不是？为什么这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T02:30:21.503

您指定标准分辨率版本，UIKit 将自动在具有视网膜显示的设备上加载 2x 版本（如果可用）。

# node.js - NodeJS / Express：什么是“app.use”？

> ID：11321635
> 
> 赞同：413
> 
> 时间：2012-07-04T02:20:29.520
> 
> 标签：node.js, express

在[NodeJS`express`模块](http://expressjs.com/guide.html)的文档中，示例代码具有`app.use(...)`.

函数是什么`use`，在哪里定义？

* * *

## 回答 #1

> 赞同：440
> 
> 时间：2012-07-04T02:52:02.253

app 对象在创建 Express 服务器时被实例化。它有一个可以定制的***中间件**堆栈*[`app.configure()`（现在在版本 4.x 中已弃用）](https://github.com/strongloop/express/wiki/Migrating-from-3.x-to-4.x)。

要设置中间件，您可以[`app.use(<specific_middleware_layer_here>)`](http://expressjs.com/en/4x/api.html#app.use)为要添加的每个中间件层调用（它可以对所有路径通用，或者仅在您的服务器处理的特定路径上触发），它将添加到您的[Express](http://expressjs.com/en/guide/routing.html)中间件堆栈中。中间件层可以在多次调用中一层一层地添加`use`，甚至可以在一次调用中一次添加。有关更多详细信息，请参阅[`use`文档](http://expressjs.com/en/4x/api.html#app.use)。

举例说明 Express 中间件的概念理解，以下是我的应用程序中间件堆栈 (app.stack) 在将我的应用程序对象作为 JSON 记录到控制台时的样子：

```
stack: 
   [ { route: '', handle: [Function] },
     { route: '', handle: [Function: static] },
     { route: '', handle: [Function: bodyParser] },
     { route: '', handle: [Function: cookieParser] },
     { route: '', handle: [Function: session] },
     { route: '', handle: [Function: methodOverride] },
     { route: '', handle: [Function] },
     { route: '', handle: [Function] } ] 
```

正如您可能推断的那样，我调用了`app.use(express.bodyParser())`,`app.use(express.cookieParser())`等，它将这些快速中间件“层”添加到中间件堆栈中。请注意，路由是空白的，这意味着当我添加这些中间件层时，我指定它们在任何路由上触发。如果我添加了一个自定义中间件层，该中间件层仅在路径上触发，该路径`/user/:id`将反映为`route`上面堆栈打印输出中该中间件层对象字段中的字符串。

*每一层本质上都是添加一个函数，专门处理通过中间件的流程。*

例如，通过添加`bodyParser`，*您可以确保您的服务器通过快速中间件处理传入请求*。因此，*现在解析传入请求的主体是您的中间件在处理传入请求时所采取的过程的一部分*——这一切都是因为您调用了`app.use(bodyParser)`.

* * *

## 回答 #2

> 赞同：92
> 
> 时间：2017-04-24T18:37:43.617

每次向服务器发送请求时，都会调用每个**app.use(middleware) 。**

* * *

## 回答 #3

> 赞同：56
> 
> 时间：2012-07-04T02:33:58.887

[`use`](http://www.senchalabs.org/connect/proto.html#app.use)是一种配置 Express HTTP 服务器对象的路由使用的中间件的方法。该方法被定义为Express 所基于的[Connect的一部分。](http://www.senchalabs.org/connect/)

[更新](http://expressjs.com/en/guide/using-middleware.html)从版本 4.x 开始，Express 不再依赖[Connect](http://www.senchalabs.org/connect/)。

以前包含在 Express 中的中间件功能现在位于单独的模块中；请参阅[中间件函数列表](https://github.com/senchalabs/connect#middleware)。

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2018-05-24T12:23:59.753

**app.use()**充当快速应用程序中的中间件。与**app.get()**和**app.post()**左右不同，您实际上可以在不指定请求 URL 的情况下使用**app.use() 。**在这种情况下，它的作用是，无论点击什么 URL，它每次都会执行。

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2017-01-23T07:51:22.557

app.use() 用于挂载中间件函数或挂载到指定路径，当基路径匹配时执行中间件函数。

**例如：** 如果您在 indexRouter.js 中使用 app.use()，如下所示：

```
//indexRouter.js

var adsRouter = require('./adsRouter.js');

module.exports = function(app) {
    app.use('/ads', adsRouter);
} 
```

在上面的代码 app.use() 中，将 '/ads' 上的路径挂载到 adsRouter.js。

**现在在 adsRouter.js 中**

```
// adsRouter.js

var router = require('express').Router();
var controllerIndex = require('../controller/index');
router.post('/show', controllerIndex.ads.showAd);
module.exports = router; 
```

**在 adsRouter.js 中，ads- '/ads/show' 的路径是这样的，然后它会根据 controllerIndex.ads.showAd() 工作。**

**app.use([path],callback,[callback]) ：** 我们可以在其上添加回调。

```
app.use('/test', function(req, res, next) {

  // write your callback code here.

    }); 
```

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2019-04-26T13:26:37.997

```
app.use(function middleware1(req, res, next){
   // middleware1 logic
}, function middleware2(req, res, next){
   // middleware2 logic
}, ... middlewareN); 
```

**app.use**是一种在根据中间件注册顺序执行任何最终路由逻辑或中间路由逻辑之前注册***中间件或中间件链（或多个中间件）的方法。***

**中间件：**形成具有**3 个参数 req、res 和 next的****函数/中间件函数**链。next 是回调，它引用链中的下一个中间件函数，如果是链的最后一个中间件函数，则 next 指向下一个注册的中间件链的第一个中间件函数。

 *** * *

## 回答 #7

> 赞同：10
> 
> 时间：2020-09-03T09:33:50.953

`app.use()`处理所有中间件功能。
什么是中间件？
中间件是在两条所有路由之间像一扇门一样工作的功能。

例如：

```
app.use((req, res, next) => {
    console.log("middleware ran");
    next();
});

app.get("/", (req, res) => {
    console.log("Home route");
}); 
```

当您`/`在控制台中访问路由时，将打印两条消息。第一条消息将来自中间件功能。如果没有`next()`传递函数，则只有中间件函数运行，其他路由被阻塞。

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2017-03-04T16:46:58.070

app.use() 像这样工作：

1.  在节点 http 服务器实例上触发的请求事件。
2.  express 使用 req 对象进行一些内部操作。
3.  这是 express 开始做你用 app.use 指定的事情的时候

这很简单。

只有这样 express 才能完成其余的事情，比如路由。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2017-09-10T14:07:29.247

在 express 中，如果我们从“express”导入 express 并使用 app = express(); 然后应用程序具有快递的所有功能

如果我们使用 app.use()

在整个 express 项目中使用任何模块/中间件功能

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2019-01-23T15:36:04.260

**app.use**作为应用请求的**中间件**。句法

```
app.use('pass request format',function which contain request response onject) 
```

例子

```
app.use('/',funtion(req,res){
 console.log(all request pass through it);
// here u can check your authentication and other activities.
}) 
```

您也可以在路由您的请求时使用它。

```
app.use('/', roting_object); 
```

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2021-04-26T13:25:03.947

express 中的 .use() 方法是一个 *middleware 处理程序。Express 应用程序本质上是一系列中间件函数调用。

一个 Express 应用程序可以使用 5 种不同类型的中间件，其中主要使用这两种：

1.  应用级中间件
2.  路由器级中间件

App.use() 用于将 *应用程序级中间件绑定到应用程序对象的实例，该对象在创建 Express 服务器时实例化（router.use() 用于路由器级中间件）。

句法 ：`app.use(path, middleware function/s)`

在这里，路径是可选的。如果未指定路径，则每次应用程序收到请求时都会执行该函数，而不管已命中哪个 URL。

*示例：
身份验证中间件 - 在待办事项应用程序中，一旦已创建的用户登录，他就会获得一个 JWT 令牌，每次用户发出 GET、PUT、PATCH、POST 或 DELETE 请求时都必须验证该令牌。

```
app.use("/api/*", verifyToken(req, res, next): void {
const jwt: string = req.headers['x-token-header'];
if (!jwt) {
  res.status(403).send({ message: 'No token provided!' });
} else {
  jsonwebtoken.verify(jwt, config.get('secretString'), (err) => {
    if (err) {
      res.status(403).send(err);
    } else {
      next();
    }
  });
}); 
```

在这里，添加了路径 /api 以区分不需要 JWT 身份验证的请求，例如注册和登录（因为我们不希望在不需要身份验证时执行中间件）。

*中间件函数是可以访问请求对象 (req)、响应对象 (res) 和应用程序请求-响应周期中的下一个中间件函数的函数。next 中间件函数通常由名为 next 的变量表示。

中间件的语法：`function(req, res, next)`

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2018-10-27T13:35:01.313

`app.use`是一个需要中间件的功能。例如：

```
 app.use('/user/:id', function (req, res, next) {
       console.log('Request Type:', req.method);
        next();
     }); 
```

此示例显示了安装在`/user/:id`路径中的中间件功能。该函数对`/user/:id`路径中的任何类型的 HTTP 请求执行。

它类似于 REST Web Server，只是用不同`/xx`的方式来表示不同的动作。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2019-04-09T11:55:22.343

`app.use()`是一种允许我们注册中间件的方法。

中间件方法就像java中的一个拦截器，这个方法总是对所有请求执行。

中间件的用途和用途：-

1.  检查会话是否过期
2.  用于用户认证和授权
3.  检查 cookie（到期日期）
4.  在响应之前解析数据

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2017-03-29T22:11:56.487

中间件是用于“粘合在一起”的软件的总称，因此 app.use 是一种配置中间件的方法，例如：解析和处理请求的主体： app.use(bodyParser.urlencoded({ extended: true })); app.use(bodyParser.json()); 您可以在快速应用程序中使用许多中间件，只需阅读文档： [http ://expressjs.com/en/guide/using-middleware.html](http://expressjs.com/en/guide/using-middleware.html)

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2018-05-23T11:42:48.287

app.use 将指定的中间件应用于主应用程序中间件堆栈。将中间件附加到主应用程序堆栈时，附加顺序很重要；如果您在中间件 B 之前附加中间件 A，则中间件 A 将始终首先执行。您可以指定特定中间件适用的路径。在下面的示例中，“hello world”将始终在“happy holiday”之前记录。</p>

```
const express = require('express')
const app = express()

app.use(function(req, res, next) {
  console.log('hello world')
  next()
})

app.use(function(req, res, next) {
  console.log('happy holidays')
  next()
}) 
```

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2018-12-05T11:49:20.877

它使您能够使用任何中间件（[阅读更多](https://stackoverflow.com/questions/7337572/what-does-middleware-and-app-use-actually-mean-in-expressjs)）等`body_parser`。中间件可以对对象`CORS`进行更改。它也可以执行一段代码。`request``response`

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2019-02-20T08:44:31.500

您还可以创建自己的中间件功能，例如

```
app.use( function(req, res, next) {
  // your code 
  next();
}) 
```

它包含三个参数`req`, `res`,`next`
您还可以将其用于输入参数的身份验证和验证，以保持控制器清洁。

`next()`用于转到下一个中​​间件或路由。
您可以从中间件发送响应

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2019-07-09T07:38:54.247

app.use 是应用程序级中间件

使用 app.use() 和 app.METHOD() 函数将应用程序级中间件绑定到应用程序对象的实例，其中 METHOD 是中间件函数处理的请求的 HTTP 方法（例如 GET、PUT 或POST) 小写。

您可以使用来检查所有请求，例如，您要检查令牌/访问令牌，您需要编写一个中间件，使用 app.use 来检查请求中的令牌。

此示例显示了一个没有挂载路径的中间件函数。每次应用收到请求时都会执行该函数。

```
var app = express()

app.use(function (req, res, next) {
  console.log('Time:', Date.now())
  next()
}) 
```

来自[https://expressjs.com/en/guide/using-middleware.html的参考](https://expressjs.com/en/guide/using-middleware.html)

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2020-06-16T23:36:12.187

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2017-08-23T11:52:17.453

使用 app.use() 和 app.METHOD() 函数将应用程序级中间件绑定到应用程序对象的实例，其中 METHOD 是中间件函数处理的请求的 HTTP 方法（例如 GET、PUT 或POST) 小写。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2018-11-27T19:37:07.953

总之 app.use() 支持所有类型的请求 [eg:get,post,...] 所以它主要用于设置中间件。或可用于路由和功能分开时

例子：

```
app.use("/test",functionName) 
```

和 functionName 位于不同的文件中

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2020-03-21T18:16:00.897

app.use
由 express(nodejs 中间件框架) 创建
app.use 用于在初始化过程中执行任何特定查询
**server.js(node)**
var app = require('express'); 所以每次***服务器启动时基本上都会调用 app.use 函数***
**`app.use(bodyparser.json())`**

 ** * *

## 回答 #23

> 赞同：1
> 
> 时间：2020-07-02T03:58:21.763

您可以使用`app.use('/apis/test', () => {...})`为您的 api 编写中间件，以在您提供的条件不合格时处理一个或某些操作（身份验证、验证数据、验证令牌等），然后再进行任何进一步的处理或以特定状态代码响应。

例子：

```
var express = require('express')
var app = express()

app.use(function (req, res, next) {
  // Your code to handle data here
  next()
}) 
```

更详细的是，这部分实际上是一个匿名函数，供您在运行时编写逻辑

```
function (req, res, next) {
   // Your code to handle data here
   next()
} 
```

您可以将其从另一个文件中拆分为另一个函数并`module.export`用于使用

`next()`这里的逻辑是，如果你处理一切都很好，那么你可以使用 then 让程序继续它过去的逻辑。

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2021-06-20T10:40:55.023

app.use() 函数用于在指定的路径上挂载指定的中间件函数。它主要用于为您的应用程序设置中间件。
语法
`app.use(path, callback)`
参数：

1.  `path`：这是调用中间件函数的路径。它可以是表示路径或路径模式或正则表达式模式以匹配路径的字符串。

2.  `callback`：它是一个中间件函数或一系列/数组中间件函数。

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2021-06-23T08:40:13.877

简单来说`app.use()`就是一个函数，它接受另一个函数（回调）作为参数并在每次请求发送到快速应用程序/服务器时运行。

app.use 内部传递的函数也称为中间件，中间件只是一个存在于 express app 中的函数的花哨名称，它具有三个参数 request、response 和 next。您可以阅读有关[中间件](https://expressjs.com/en/guide/using-middleware.html)的更多信息。

在请求和响应周期之间调用中间件。如果您希望在所有路由上应用中间件，那么您可以使用`app.use()`或执行一些验证、错误检查和其他操作。

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2021-07-28T13:25:17.563

`app.use()`将为每个请求调用：`GET`, `POST`, `PUT`, `PATCH`,`DELETE`

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2022-02-19T21:00:03.347

假设我们有一组我们的网站可以处理的路线

```
app.get('/1/', function(req, res) {
    res.send('page1');
});

app.get('/2/', function(req, res) {
    res.send('page2');
}); 
```

显然，如果请求了一个我们不处理的地址，那么应该返回一个 404 错误。但是，Express 默认情况下不执行此操作。但它很容易实现。

特殊的方法`app.use`将帮助我们解决这个问题。它允许您拦截所有原始地址

让我们使用这个方法返回一个 404 错误

```
app.use(function(req, res) {
    res.status(404).send('not found');
}); 
```

现在让我们放置我们的构造`app.get`

```
app.get('/1/', function(req, res) {
    res.send('page1');
});

app.get('/2/', function(req, res) {
    res.send('page2');
});

app.use(function(req, res) {
    res.status(404).send('not found');
}); 
```

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2020-06-24T13:22:06.973

顾名思义，它充当路由中的中间件。

假设对于任何单个路由，您希望在发送响应之前调用多个 url 或在内部执行多个功能。您可以使用此中间件并传递您的路由并执行所有内部操作。

```
syntax:
app.use( function(req, res, next) {
  // code
 next();
}) 
```

**next**是可选的，您可以使用此参数将结果传递给 next 函数。

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2021-12-04T03:20:26.050

app.use() 是应用程序中间件。使用应用程序将应用程序级中间件绑定到应用程序对象的实例。使用（）和应用程序。METHOD() 函数，其中 METHOD 是中间件函数处理的请求的 HTTP 方法（例如 GET、PUT 或 POST）

```
var express = require('express');
var app = express();
var PORT = 3000;

// This middleware will not allow the
// request to go beyond it
app.use(function (req, res, next) {
    console.log("Middleware called")
    next();
});

// Requests will never reach this route
app.get('/user', function (req, res) {
    console.log("/user request called");
    res.send('Hello test');
});

app.listen(PORT, function(err){
    if (err) console.log(err);
    console.log("Server listening on PORT", PORT);
}); 
```***

# ios - 使用适用于 iOS/Android 的 Adob e Air 部署 Trail 和完整版设置

> ID：11321639
> 
> 赞同：0
> 
> 时间：2012-07-04T02:21:15.033
> 
> 标签：ios, flash, air, app-store, demo

如何使用 Adob​​e Flash/Adobe Air 从 iOS/Android 应用程序部署演示/试用版，以将我的应用程序上传到应用商店或安卓市场。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T04:14:55.470

苹果积极拒绝任何测试版。我假设他们会拒绝任何过期的审判。

每个演示版本与“完整”版本，我假设你会发布：

*   **演示**- 发布您的应用的缩减版免费版本
*   **Full** - 在某个定价层发布功能齐全的付费应用程序

这与[Angry Birds 免费版](http://itunes.apple.com/us/app/angry-birds-free/id409807569?mt=8)和其他版本（例如[Angry Birds Space 的 0.99 美元](http://itunes.apple.com/us/app/angry-birds-space/id499511971?mt=8)）没有什么不同。

Android Market / Google Play 的限制较少。

# c++ - C++：当 try/catch 添加到代码中时，错误消失

> ID：11321642
> 
> 赞同：0
> 
> 时间：2012-07-04T02:21:49.997
> 
> 标签：c++, exception, try-catch

我遇到了一个非常奇怪的错误，也许有人可以帮助我理解。我有一个代码与向量超出范围错误一致地崩溃。关于这个错误的另一个奇怪的事情是，当我在整个代码中加入大量 cout 语句以试图确定错误的位置时，它就停止了崩溃。

无论如何，作为进一步的测试，我在部分代码周围放置了 try/catch 块，我的实现类似于：

```
try {
    // my code that is presumably causing problems
  }
  catch (out_of_range& oor) {
    cerr << "Out of Range error: " << oor.what() << endl;
  } 
```

当我添加此代码时，错误似乎消失了。没有更多的崩溃，我再也没有在 catch 中看到 cerr 消息。

有什么可能的方法可以使这有意义吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T02:31:34.603

单步调试器中的旧代码并隔离错误。在调试器中单步执行新代码并隔离非错误。我将其发布为“答案”而不是评论，因为它会在比我们回答或您阅读我们的答案时更短的时间内为您提供您正在寻找的答案。

十个字的调试器：用-g编译，google“gdb cheatsheet”，很简单。

# php - .htaccess 多个规则

> ID：11321645
> 
> 赞同：1
> 
> 时间：2012-07-04T02:22:11.097
> 
> 标签：php, .htaccess, mod-rewrite

```
RewriteEngine On
RewriteBase /
# Use the following rule if you want to make the page like a directory
RewriteRule ^(v)$ /$1/
# The following rule does the rewrite.
RewriteRule ^(.+)/$ profile.php?name=$1
# The following rewrite the other way round:
RewriteCond %{REQUEST_URI} ^/profile.php
RewriteCond %{THE_REQUEST} ^(GET|POST|HEAD|TRACE)\ /profile.php
RewriteCond %{QUERY_STRING} name=([^&]+)
RewriteRule ^profile.php$ %1? 
```

我在我的 .htaccess 文件中执行上面的代码，这在我的 profile.php 页面中运行良好，因为之前，我的 profile.php 显示这种 URL：

```
http://mysite.com/profile.php?name=john 
```

但是当我编写该代码时，结果如下：

```
http://mysite.com/john/ 
```

我还想将此代码应用于我的 category.php，所以我所做的只是复制上面的代码，我的整个 .htaccess 文件看起来像这样：

```
RewriteEngine On
RewriteBase /

# Use the following rule if you want to make the page like a directory
RewriteRule ^(v)$ /$1/

# The following rule does the rewrite.
RewriteRule ^(.+)/$ profile.php?name=$1
RewriteRule ^(.+)/$ category.php?cid=$1

# The following rewrite the other way round:
RewriteCond %{REQUEST_URI} ^/profile.php
RewriteCond %{THE_REQUEST} ^(GET|POST|HEAD|TRACE)\ /profile.php
RewriteCond %{QUERY_STRING} name=([^&]+)
RewriteRule ^profile.php$ %1?

RewriteCond %{REQUEST_URI} ^/category.php
RewriteCond %{THE_REQUEST} ^(GET|POST|HEAD|TRACE)\ /category.php
RewriteCond %{QUERY_STRING} cid=([^&]+)
RewriteRule ^category.php$ %1? 
```

但是这段代码给了我一个奇怪的结果，因为当我访问 `http://mysite.com/john/`我看到的内容是我的 category.php 的内容。

我应该在这里做什么？任何帮助将不胜感激和奖励！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T02:28:41.870

我在你的规则中遇到了问题。我认为的问题是您的网络服务器无法区分请求是类别页面/个人资料页面，只要请求来自 [http://mysite.com/john/](http://mysite.com/john/)

所以我建议在个人资料页面请求或类别页面请求中进行一次更改。

只需添加[http://mysite.com/profile/john/](http://mysite.com/profile/john/)

希望这能解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T02:39:29.230

要回答评论中修改的问题：

如果这些术语出现在 url 中，要区分用户和类别，您只需要每条规则一行（未经测试的示例）：

```
RewriteEngine On
RewriteBase /

RewriteRule ^user/(\w+)/?$ /profile.php?name=$1    // using only a limited set of chars (letters and underscore) for the user name and an optional / at the end

RewriteRule ^category/(\w+)/?$ /category.php?cid=$1    // using only a limited set of chars for the category (letters and underscore) and an optional / at the end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T02:38:32.850

看起来我用这个解决了它：

```
RewriteEngine On
RewriteBase /

# Use the following rule if you want to make the page like a directory
RewriteRule ^user/(!(profile.php))$ user/$1/ [R=301,L]
RewriteRule ^category/(!(category.php))$ category/$1/ [R=301,L]

# The following rule does the rewrite.
RewriteRule ^user/(.+)/$ profile.php?id=$1
RewriteRule ^category/(.+)/$ category.php?id=$1

# The following rewrite the other way round:
RewriteCond %{REQUEST_URI} ^/profile.php
RewriteCond %{THE_REQUEST} ^(GET|POST|HEAD|TRACE)\ /profile.php
RewriteCond %{QUERY_STRING} id=([^&]+)
RewriteRule ^profile.php$ user/%1?

RewriteCond %{REQUEST_URI} ^/category.php
RewriteCond %{THE_REQUEST} ^(GET|POST|HEAD|TRACE)\ /category.php
RewriteCond %{QUERY_STRING} id=([^&]+)
RewriteRule ^category.php$ category/%1? 
```

# java - Swing + LWJGL 不渲染任何东西。黑屏

> ID：11321650
> 
> 赞同：1
> 
> 时间：2012-07-04T02:22:39.680
> 
> 标签：java, swing, opengl, lwjgl

我正在做一个 12 年级的项目。基本思想是渲染可以通过摇摆 GUI 更改的地图纹理。
我坚持使用以 .parented 为 JFrame 的 Display 进行渲染。什么都没有出现，我无法弄清楚。我改变了背景颜色和渲染颜色。继承人的一些代码：

```
 public class DisplayWindow extends JFrame{

   public Canvas canvas = new Canvas();                           
   private JPanel westPanel=new JPanel();                         
   private List animalArr;                                       
   private List animalOptionsBoxArr;                                                              
   public JLabel optionsLabel=new JLabel();                       
   public JToggleButton animalIOToggle = new JToggleButton();     
   public JTextArea animalIOText = new JTextArea();               

   List renderableEntities= new ArrayList();                      

   //states modified by logic class that handle all swing listners 
   private boolean resizePending=false;  
   private boolean exitPending=false;   

   DisplayWindow(List animalArr)
   {
     super(); 
     this.animalArr=animalArr; //created from db in logic class
   }
   public void run()
   {
     startDisplay();   
   }

   public void startDisplay() 
   {  
      //Init GUI

      setupFrame();             //setup main Jframe
      setupMainPanels();        //setup main panels within JFrames borderLayout)
      setupContentPanels();     //setup the content panels within the main panel

      canvas.setSize(getDisplayWidth(), getDisplayHeight());     
      canvas.setFocusable(true);                                
      canvas.setIgnoreRepaint(true);                         

      this.add(canvas,BorderLayout.CENTER);                       
      this.setVisible(true);                                     

      //Display Setup
      try
      {
         Display.setResizable(true);  
         Display.setParent(canvas);                            
         Display.sync(60);            
         Display.create();            
      }
      catch(LWJGLException ex)
      {
        Error.fatalError("Failed to Initialise Park Display",ex);  
      } 

      //OpenGL INIT                    
      glClearColor(0.0f,0.0f,0.0f,0.0f); //black backround                          
      glEnable(GL11.GL_TEXTURE_2D);     
      glEnable(GL11.GL_BLEND);                                    
      glBlendFunc(GL11.GL_SRC_ALPHA,GL11.GL_ONE_MINUS_SRC_ALPHA);

      glMatrixMode(GL_PROJECTION);                                 
      glLoadIdentity();                                            
      glOrtho(0,getDisplayWidth(),0,getDisplayHeight(),1,-1);      
      glMatrixMode(GL_MODELVIEW);   

      //Render Loop    
      while(!isExitPending())                     
      {
           glClear(GL_COLOR_BUFFER_BIT);
           render();

           checkResizeDisplay();
           Display.update();
      }
      cleanUp();
   }

  public void render()
  { 
     //test Render 
     glColor3f(1,1,1);             //white render color
     glRectf(100,100,400,400);     
     glBegin(GL_POINTS);           //point at 5 above mouse location
     glVertex2d(Mouse.getX(),Mouse.getY()+5 );
     glEnd();
  } 

  public void checkResizeDisplay() //is this even neccisary?
 {   
     if(resizePending==true)
     {
         glMatrixMode(GL_PROJECTION);                                 
         glLoadIdentity();                                            
         glOrtho(0,Display.getWidth(),0,Display.getHeight(),1,-1);      
         glMatrixMode(GL_MODELVIEW);                                   
     }

 }

} 
```

有很多代码，所以我非常希望问题出在那儿。我试着格式化了一下。这将解释未使用的对象/引用分机。这是与 LWJGL 相关的唯一代码。DisplayWindow 作为新的 Runnable 线程运行。
这是程序目前的样子： [grr http://img839.imageshack.us/img839/6697/grrf.jpg](http://img839.imageshack.us/img839/6697/grrf.jpg)

为什么显示器上什么都没有显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T22:48:04.643

固定的。它归结为非常基本的缺乏理解。我试图用

```
glColor3f(1,1,1); 
```

尽管

```
GL_TEXTURE_2D 
```

已启用。它似乎

```
glDisable(GL11.GL_TEXTURE_2D ); 
```

必须在渲染彩色形状之前调用。假如说

```
glEnable(GL11.GL_TEXTURE_2D ); 
```

已经被调用。

# c# - 将 ArrayList 中的值设置为 TreeView

> ID：11321651
> 
> 赞同：0
> 
> 时间：2012-07-04T02:22:48.057
> 
> 标签：c#, winforms, treeview, .net-2.0, treenode

我有两个名为`ProductList`和的 ArrayList `ItemList`。

**ProductList**包含两个*string[]*数组。

```
string[0]    string[1]
---------   -----------
ProductID    ProductName
---------   -------------
  A001        Food
  B120        NotFood 
```

**ItemList**包含三个*string[]*数组。

```
string[0]   string[1]    string[2]
---------  -----------  -----------
ProductID    ItemID       ItemName
---------  -----------  -----------
  A001       X12332        Rice
  A001       X2133         Pepsi
  A001       X12450        Sardine
  B120       H1LKL         Pen
  B120       JLA122        Printer 
```

我想在 TreeView 中显示这些数据。

所以我写了如下所示的编码：

```
for(int i = 0; i <ProductList.Count; i++) //loop for every item in ProductList
{
    TreeNode node = new TreeNode(((string[])ProductList[i])[1]); //create Parent node using ProductName
    TreeView.Nodes.Add(node); //add node into TreeView
    for(int j = 0; j < ItemList.Count; i++) //loop for every item in ItemList
    {
         if(((string[])ProductList[i])[0] == ((string[])ItemList[j])[0]) //Compare if ProdutID in ProductList same with ProductID in ItemList
         {
             node.Nodes.Add(((string[])ItemList[j])[2]); //Add ItemName from ItemList as Child node for current Parent Node
         }
    }
} 
```

运行上面的代码，我得到以下结果：

```
+Food
 - Rice
 - Pepsi
 - Sardine
+NotFood
 - Pen
 - Printer 
```

**问题：** 如何获得`ItemID`用户选择节点的时间？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T02:47:29.710

您可以使用该`Tag`属性来存储有关节点的其他信息（在您的情况下，它可以保存`ID`）。稍后在节点单击时，您应该能够获得此信息。这是[MSDN 链接](http://msdn.microsoft.com/en-us/library/system.windows.forms.treenode.tag%28v=vs.80%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T02:54:31.557

现在，就您的问题而言：TreeNode 有两个有趣的属性，名称和文本。Text 是用户阅读的内容，Name 是一个任意的名称。也许，当您将项目添加到 TreeView 时，您可以将 ItemID 设置为 TreeNode 的名称。

# blackberry - 黑莓全球弹出窗口

> ID：11321653
> 
> 赞同：3
> 
> 时间：2012-07-04T02:23:03.503
> 
> 标签：blackberry

我正在尝试从我从备用入口点开始的后台线程中弹出一个全局对话框。

```
public static void main(String[] args) {
    MyApp theApp = new MyApp();  
    if (args != null && args.length > 0 && args[0].equals("test")) {
        new Thread(new Runnable() {
            public void run() {
                try {
                    synchronized (UiApplication.getEventLock()) {
                        UiEngine ui = Ui.getUiEngine();
                        Screen screen = new Dialog(Dialog.D_OK, "Test", Dialog.OK,
                                                   Bitmap.getPredefinedBitmap(Bitmap.EXCLAMATION),
                                                   Manager.VERTICAL_SCROLL);
                        ui.pushGlobalScreen(screen, 1, UiEngine.GLOBAL_MODAL);
                    }
                } catch (Exception e) {
                    System.out.println(e.toString());
                }
            }
        }).start();
    } else {
        theApp.enterEventDispatcher();
    }
} 
```

我尝试了很多变化来使其工作，但它仍然没有出现。我试过了

同步`Application.getEventLock()`，我也试过
`UiApplication.getUiApplication().invokeLater`， `UiApplication.getUiApplication().invokeAndWait`。我什`synchronizing the eventlock`至在调用之前先尝试过`invokeLater`（我认为这是多余的，但我仍然尝试过......）。我不确定我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T11:26:34.537

好的，我给你一个示例演示......

首先编辑**BlackBerry_App_Descriptor.xml**单击`Application Tab` In ApplicationArgument 写入`alternate`并选中 Auto Run on start up 单击`Alternate Entry Points`单击添加并在标题中写入`BackgroundApp`

制作一个将扩展 Application 类而不是像这样的 UiApplication 类的类

```

导入 net.rim.device.api.system.Alert；
导入 net.rim.device.api.system.Application；
导入 net.rim.device.api.system.Bitmap；
导入 net.rim.device.api.ui.Manager；
导入 net.rim.device.api.ui.Screen；
导入 net.rim.device.api.ui.Ui；
导入 net.rim.device.api.ui.UiEngine；
导入 net.rim.device.api.ui.component.Dialog；

公共类 BackGroundApp 扩展应用程序 {
// 这个类用于后台处理.....

     公共无效 startBackgroundThread()
        {
            新线程（）{
                公共无效运行（）{
                    而（真）{
                        尝试 {
                            线程.sleep(60000);
                        } 捕捉（InterruptedException e）{
                            e.printStackTrace();
                        }

                        同步（getEventLock（））{

                            //使用这个 UiEngine pushGlobal 对话框

                            //每当应用程序在后台时

                            UiEngine ui = Ui.getUiEngine();
                            Screen screen = new Dialog(Dialog.D_OK, "你有更新！",
                                    对话框.OK，位图
                                            .getPredefinedBitmap(Bitmap.EXCLAMATION),
                                    经理.VERTICAL_SCROLL);
                            ui.pushGlobalScreen(screen, 1, UiEngine.GLOBAL_QUEUE);

                        }
                    }
                }
            }。开始（）;
        }

}

```

创建一个将像这样扩展 UiApplication 类的类

```
公共类 GuiTest 扩展 UiApplication {
    静态定时器 t；

    公共静态无效主要（字符串[]参数）{

         if(args.length>0&&"alternate".equals(args[0])){

                            BackGroundApp 应用程序 = 新的 BackGroundApp();
                            app.startBackgroundThread();
                            app.enterEventDispatcher();

            }

         别的{
             GuiTest 测试 = 新 GuiTest();          
             test.enterEventDispatcher();
         }
    }
    公共 GuiTest(){
        Myscreen screeMyscreen = new Myscreen();
        pushScreen(screeMyscreen);
    }

}

```

现在创建一个 MyScreen 类并在其中添加所有 Ui .... 并按下屏幕

```
公共类 Myscreen 扩展 MainScreen {

    公共我的屏幕（）{
    创建GUI（）；
    }

    公共无效 CreateGui(){
       // 你的用户界面在这里.......
     }

}

```

运行示例，您将在一分钟后看到一个对话框，无论您是在应用程序中还是在应用程序之外，屏幕上都会出现一个对话框。谢谢，这可能会有所帮助。

# jquery - JQuery：如何对文本框的模糊进行验证？

> ID：11321656
> 
> 赞同：0
> 
> 时间：2012-07-04T02:23:36.973
> 
> 标签：jquery

我有一个 ID 为“名称”的文本框，我想在文本框获取 onblur 函数时进行验证。下面的代码不起作用。我怎么了？

```
 $(function() {
    $('name').validate({
      rules:{ "name": {required: true, minlength: 5 } }
    });
    $('name').blur(function(){
      $('name').validate()
    });
  }; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T02:28:16.570

**工作演示** [http://jsfiddle.net/qC2Ya/](http://jsfiddle.net/qC2Ya/) **或者这个更短更酷** [http://jsfiddle.net/XdAkv/](http://jsfiddle.net/XdAkv/)

您需要做的就是在`blur`事件上添加一个元素验证，这将像火箭一样工作。

请参阅验证元素 api：[http ://docs.jquery.com/Plugins/Validation/Validator/element#element](http://docs.jquery.com/Plugins/Validation/Validator/element#element)

希望这可以帮助`:)`

**代码**

```
var v = $("form").validate({
    submitHandler: function() {
        console.log('successful submit');
        return false;
    }
});

$('#firstName').blur(function(){
   v.element('#firstName');
});

$('#lastName').blur(function(){
   v.element('#lastName');
}); 
```

**或者**来自第二个演示

```
$("form").validate({
    submitHandler: function() {
        console.log('successful submit');
        return false;
    }
});

$('#firstName,#lastName').blur(function(){
    $("form").validate().element($(this))
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T02:28:30.477

有一个`onfocusout`选项，设置为`false`将在模糊时验证元素（复选框/单选按钮除外）。[文档](http://docs.jquery.com/Plugins/Validation/validate#toptions)。_

```
$('form').validate({
  onfocusout: false,
  rules:{ "name": {required: true, minlength: 5 } }
}); 
```

# iphone - UIView 与核心图形

> ID：11321661
> 
> 赞同：1
> 
> 时间：2012-07-04T02:24:09.237
> 
> 标签：iphone, objective-c, ios, ipad

我有一个 UITableViewCell 子类，它绘制一条 5px 宽度和 100 高度的矩形垂直线。我为此使用了 UIView。但是我有点害怕使用 UIView 的性能。将核心图形用于这样的东西会更好吗？如果是，那么您将如何转换以下内容：

UIView *vLine = [UIView alloc] initWithFrame:CGRectMake(10, 0, 5, 100)]; [self addsubView:vLine] [vLine 发布]

您如何使用CG转换上述内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T02:28:16.630

这很好并且不会导致性能问题，只要每次调用`cellForRowAtIndexPath` 相反时不调用它，仅在尝试获取可重用单元失败时创建和添加子视图。

# google-chrome - 确定扩展程序是否有权在隐身模式下运行

> ID：11321663
> 
> 赞同：1
> 
> 时间：2012-07-04T02:24:16.247
> 
> 标签：google-chrome, google-chrome-extension, incognito-mode

我正在开发一个 Chrome 扩展程序，并希望该扩展程序能够定期检查它是否有权（通过 chrome://extensions 页面上的复选框）以隐身模式运行。反正有这样做吗？

显然，我可以监视新窗口，如果它是隐身窗口，那么我知道它有权限。但是，如果我没有权限，这种方法不会明确告诉我。另一种可能性是让它定期创建新的隐身窗口并检查它是否可以访问它们，但这可能会让用户感到烦恼。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T08:18:28.887

它有一个现有的功能[`chrome.extension.isAllowedIncognitoAccess`](http://code.google.com/chrome/extensions/extension.html#method-isAllowedIncognitoAccess)：

```
chrome.extension.isAllowedIncognitoAccess(function(/*boolean*/ isAllowedAccess) {
    // ...
}); 
```

# go - 如何在 Windows 上编译 Go 包？

> ID：11321668
> 
> 赞同：14
> 
> 时间：2012-07-04T02:25:14.700
> 
> 标签：go, window, cross-compiling

文档都是针对 Mac OS X 和 Linux 的，我想知道如何在 Windows 平台上编译 Go 包。在 Windows 上，我不知道如何编写 make 文件以及使用哪个工具来制作它。

似乎没有一个名为 make 或 go make 的工具可以与 Go 开发工具的安装文件一起使用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-04T03:16:14.753

在 Windows 上编译 Go 包就像在 Linux 或 Mac OS X 上编译 Go 包。使用[`go build`](http://golang.org/cmd/go/)命令。没有制作文件。

这里有一些说明。

[入门](http://golang.org/doc/install)

[如何编写 Go 代码](http://golang.org/doc/code.html)

[编译包和依赖](http://golang.org/cmd/go/#Compile_packages_and_dependencies)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-04T04:42:13.343

Go 中不再需要 Makefile，因此不需要该`make`工具。你也不需要cygwin。

如果您的 windows shell 中似乎没有有效的`go`命令，请尝试按照官方文档[安装 Go for windows](http://golang.org/doc/install#windows)

> **压缩存档**
> 
> 将 zip 文件解压缩到您选择的目录（我们建议使用 c:\Go）。
> 
> 如果您选择了 c:\Go 以外的目录，则必须将 GOROOT 环境变量设置为您选择的路径。
> 
> 将 Go 根目录的 bin 子目录（例如 c:\Go\bin）添加到 PATH 环境变量中。
> 
> **MSI 安装程序（实验性）**
> 
> 打开 MSI 文件并按照提示安装 Go 工具。默认情况下，安装程序将 Go 发行版放在 c:\Go 中。
> 
> 安装程序应将 c:\Go\bin 目录放在 PATH 环境变量中。您可能需要重新启动任何打开的命令提示符才能使更改生效。
> 
> **Windows下设置环境变量**
> 
> 在 Windows 下，您可以通过“系统”控制面板的“高级”选项卡上的“环境变量”按钮来设置环境变量。某些版本的 Windows 通过“系统”控制面板中的“高级系统设置”选项提供此控制面板。

最后一节很重要。您的 Windows PATH 环境变量需要具有`C:\Go\bin`，以便您`go`在路径中拥有。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-07-14T07:45:34.510

来自：***Golang windows，完整设置指南***，[http ://noypi-linux.blogspot.com/2014/07/golang-windows-complete-setup-guide.html](http://noypi-linux.blogspot.com/2014/07/golang-windows-complete-setup-guide.html "Golang windows，完整的设置指南")

**1) 下载压缩包**

> 获取最新代码： http: [//golang.org/dl/](http://golang.org/dl/)

**2）提取ZIP**

> 将 zip 解压到示例 C:\local\dev\go

**3）创建一个gopath目录，**

> Gopath 是第三方存储的地方。例如，如果您将执行“go get github.com/somelib”，该库将存储在 gopath 中。创建 ac:\local\dev\gopath

**4）设置环境变量**

> 打开系统属性->高级->环境变量

```
GOROOT=C:\local\dev\go
GOBIN=%GOROOT%\bin
GOPATH=c:\local\dev\gopath 
```

**5) 将你的 gobin 添加到 PATH**

> 将 C:\local\dev\go\bin 附加到 PATH

**6) 测试**

6.1) 创建路径“C:\local\dev\gopath\src\myfirstproject”

6.2）创建main.go文件“C:\local\dev\gopath\src\myfirstproject\main.go”

```
package main

import "fmt"

func main() {
    fmt.Println("Hi foobar")
} 
```

6.2）您现在可以在任何地方构建项目示例，

6.2.1) 打开cmd.exe

6.2.2) cd c:\temp

6.2.3) 去构建 myfirstproject

6.2.4) 运行 myfirstproject.exe

**7) 获取一些库**

7.1) 你可以下载一些免费的 git、svn 和 hg for windows

7.2）一旦你有了它们，你现在可以“去获取 -u github.com/somelib”

**8) 获得一个 IDE**

> 下载liteide

**恭喜！**

# java - 使用 JNI 从 C++ 调用 JAVA 方法，无参数

> ID：11321677
> 
> 赞同：5
> 
> 时间：2012-07-04T02:27:58.673
> 
> 标签：java, android, c++, jvm, java-native-interface

请多多包涵，我是一名 iPhone 开发人员，这整个 android 让我有点困惑。

我有一些从 cocos2d-x CCMenuItem 调用的 c++ 方法。因此，根据文档，我无法发送任何参数。

我需要使用 android 浏览器打开一个 url，这将需要我调用一个 JAVA 函数来启动一个新的意图。

我知道我需要创建一个 VM，但是下面的代码给了我错误：

> jni/../../Classes/OptionsScene.cpp:184：错误：未在此范围内声明“JNI_CreateJavaVM”

我在看这个线程：[Calling a java method from c++ in Android](https://stackoverflow.com/questions/5198105/calling-a-java-method-from-c-in-android)

但是他使用参数，而我不能这样做。而且我看不到那些在他的代码中的位置，只是我自己制作的。

我不知道“查找类”方法中的字符串应该是什么。另外，我认为在我需要调用的每个方法中创建一个新的 VM 实例是非常糟糕的。我将如何创建一个作为单例以全面使用？

这是我的菜单项调用的 C++ 代码：

```
#include <jni.h>
...
JavaVM *vm; // Global
...
void OptionsScene::website(){
JNIEnv *env;
JavaVMInitArgs vm_args;
vm_args.version = JNI_VERSION_1_2;
vm_args.nOptions = 0;
vm_args.ignoreUnrecognized = 1;

jint result = JNI_CreateJavaVM(&vm, (void **)&env, &vm_args); // This line still errors

jclass clazz = env->FindClass("com/prndl/project/WebExecute");
jmethodID method = env->GetMethodID(clazz, "website", "(Ljava/lang/String;)V");
env->CallVoidMethod(NULL,method);

vm->DestroyJavaVM(); 
```

这是我需要调用的 JAVA 方法：

```
public class WebExecute extends Activity{
    public void website(){
        Intent browserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.google.com"));
        startActivity(browserIntent);
    }
} 
```

老实说，我正在为此苦苦挣扎，感谢任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-01-10T12:57:04.290

如果您正在查看如何调用不接受任何参数的 java 方法，格式为`jmethodID mid = env->GetStaticMethodID(myClass, "myMethod", "()V");`

`()`就是你告诉它不接受任何参数的方式。

`V`说它返回无效。`Ljava/lang/String;`如果方法返回类型为 的对象，则应使用`String`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T02:54:15.427

很多事情...

1.  给定声明`JNIEnv* env;`，并假设您在 C++ 中，您将其用作`env->FindClass(someString)`，**而不是**您的操作方式。如果它是 C，你会使用`FindClass(env, someString)`，但在 C++ 中，你使用`env->FindClass(someString)`.
2.  要使用的字符串`FindClass`是完全限定的路径名​​，但`/`作为分隔符而不是`.` 例如，如果类`Foo`在 package`bar.baz.quux`中，则完全限定的名称是`bar.baz.quux.Foo`并且您要提供的字符串`FindClass`是`bar/baz/quux/Foo`。
3.  每个 C++ 进程只能创建一个 JVM。我很确定您需要一次创建一个 JVM。因此，您将需要`JavaVM* vm`成为一个全局变量（或者至少在某个地方可以访问需要使用的所有内容。与调用的线程相同的 C++ 线程中的所有内容都`JNI_CreateJavaVM()`将使用`JNIEnv *`由该调用填充的那个。所有其他线程想要使用 JVM 需要调用`AttachCurrentThread`which 将该线程绑定到 JVM 并为该线程填写一个*新* `JNIEnv *`的有效值。
4.  您是否仔细检查了编译器/IDE 设置以确保`JDK_HOME/include`目录（包含`jni.h`）位于包含搜索路径中？目录是否相同（或在 Android JDK 中调用的`JDK_HOME/include/android`任何特定操作目录）？`JDK_HOME/include`

一个非常有用的资源是[The JNI book](http://java.sun.com/docs/books/jni/download/jni.pdf)

但是在阅读时要小心，因为有些示例是用 C 语言编写的，有些是用 C++ 编写的，因此请确保您了解调用约定的不同之处。

# python - 以特定格式导入 .txt 数据

> ID：11321685
> 
> 赞同：0
> 
> 时间：2012-07-04T02:29:40.847
> 
> 标签：python

这是以下数据样本

```
"TABITHA","OLLIE","JAIME","WINIFRED" 
```

然后是一段正确读取它的代码。

```
with open("names.txt", 'rb') as f:
    data = [map(str, line.split(',')) for line in f] 
```

但是，这会将其作为列表列表读取。该列表只有一个“高”列表，

```
e.g. [["TABITHA", "OLLIE", "JAIME", "WINIFRED"]] 
```

因此也可能只是一个列表，而不是列表的列表。有没有办法将它作为一个列表来阅读？学习之旅还在继续:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T02:36:40.387

使用“包含电池”的[csv](http://docs.python.org/library/csv.html)（逗号分隔值）模块。尽管名称如此，它也可以配置为其他分隔符，并且还有许多其他选项。

```
import csv
with open('names.txt','rb') as f:
    for line in csv.reader(f):
        print line 
```

输出：

```
['TABITHA', 'OLLIE', 'JAIME', 'WINIFRED'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T02:32:34.850

**编辑**

功能性，“自己动手”，代码：

```
with open("names.txt", 'rb') as f:
    for line in f:
       line = line.strip()
       line = [w.replace('"','') for w in line.split(',')]
       print line 
```

创建*列表* `line`：

```
['TABITHA', 'OLLIE', 'JAIME', 'WINIFRED'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T02:36:54.167

阅读此类内容的最佳方法是使用[csv 模块](http://docs.python.org/library/csv.html)。这将正确处理可能出现在引用值中的嵌入逗号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T02:46:06.963

如果您想变得愚蠢而不使用 CSV 模块：

```
sum([line.split(", ") for line in f], []) 
```

编辑：那我的初始数据有什么问题？

```
>>> f
['TABITHA, OLLIE, JAIME, WINIFRED', 'Spam, Eggs, Dead Parrots']
>>> sum([line.split(", ") for line in f], [])
['TABITHA', 'OLLIE', 'JAIME', 'WINIFRED', 'Spam', 'Eggs', 'Dead Parrots'] 
```

有一个文件：

```
$ cat temp.csv
foo, bar, baz
spam, eggs, quux
$ python
>>> f = open("temp.csv")
>>> sum([line.split(", ") for line in f], [])
['foo', 'bar', 'baz\n', 'spam', 'eggs', 'quux\n'] 
```

（添加 a`map(str.strip, ...)`以消除尾随空格）

# java - 基于谁是被调用者的逻辑

> ID：11321689
> 
> 赞同：0
> 
> 时间：2012-07-04T02:30:35.327
> 
> 标签：java, spring, methods, struts2

我有一个 X 类，其中包含 do 方法。

我还有另外两个类 A 和 B，其中创建了 X 的对象。

**有什么方法可以找出 x 的 do() 是否被 A 或 B 调用。**

我不想在 do() 方法中使用参数。来自呼叫跟踪或其他什么？

我正在使用struts2，Spring。那么框架有什么帮助吗？？？

我想在 do() 中根据它是从 A 调用还是从 B 调用来实现一些逻辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T02:35:50.640

好吧，是的，您可以使用 s 检索堆栈`Thread.getCurrentThread().getStackTrace()`并读取`StackTraceElement`s`getClassName()`并与 A 或 B 匹配。（我试图想象一个场景，这比 param 更可取并且出现空白，但是 YMMV ......）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T02:38:29.503

可能，但是如果您必须这样做，则可能值得为单独的功能使用两种方法，这两种方法调用共享部分的单个方法。

```
Ascall(...)
  specialStuffA
  commonCall(...)

Bscall(...)
  specialStuffB
  commonCall(...)

commonCall(...)
  commonStuffAB 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T11:12:14.000

我知道这看起来很连贯，但现有的逻辑可以快速发布到推特上来解决这个问题。

情景是，

我有两个动作 A 和 B 调用服务 X。

X 被 Spring AOP 拦截以添加过滤器并传递给 DAO。

如果 A 调用 X 则显示所有数据，即不应用过滤器，如果 B 调用 X 则仅显示登录用户的数据。

X 已经因为添加一些其他过滤器而被拦截，因此添加一个过滤器会很容易。此过滤器也集中存在，因此所有 A 或 B 调用 X，因此 X 将相应地完成工作。

我在这里找到了更好的方法，在 X 中有一个实例变量，而 A 的 X 实例将具有值“a”等等。

所以现在我将能够区分 A 对 X 的调用和 B 对 X 的调用。

是否有意义？

# asp.net - 如何更改 Y 轴标签字体大小？

> ID：11321693
> 
> 赞同：8
> 
> 时间：2012-07-04T02:31:32.707
> 
> 标签：asp.net, fonts, size, label, mschart

我想更改 Y 轴标签字体大小。

我试过了...

```
AxisY LineColor="64, 64, 64, 64" LabelAutoFitMinFontSize="5"
   LabelStyle Font="NanumGothic, 5pt" 
```

和

```
Chart1.ChartAreas["ChartArea1"].AxisX.LabelStyle.Font.Size = 5; 
```

但它不起作用。即使我扩展或缩小它，它的大小也无法修改。

请帮我...！！:)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-24T07:38:12.830

您似乎忘记更改此轴的自动调整样式。它的默认设置会替换您的字体大小

```
Chart1.ChartAreas.["ChartArea1"].AxisY.LabelAutoFitStyle 
    = LabelAutoFitStyles.None;
Chart1.ChartAreas.["ChartArea1"].AxisX.LabelStyle.Font 
    = new System.Drawing.Font("Trebuchet MS", 2.25F, System.Drawing.FontStyle.Bold); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-09-28T07:14:33.057

你试试这可能是它的工作

```
Chart1.ChartAreas["ChartArea1"].AxisX.TitleFont = new Font("your required font",uyour required size, FontStyle.your required style); 
```

设置标题颜色

Chart1.ChartAreas["ChartArea1"].AxisX.ForeColor = Color.Red;

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-11T04:48:21.877

与其尝试直接更改字体大小，不如为字体分配您需要的样式。例如：

```
Chart1.ChartAreas.["ChartArea1"].AxisX.LabelStyle.Font = new System.Drawing.Font("Trebuchet MS", 2.25F, System.Drawing.FontStyle.Bold); 
```

根据您的操作，您可能还希望将 IsLabelAutoFit 设置为 false。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-08T23:10:06.840

秘诀不在chartArea，而在Series：

```
Chart1.Series["SerieName"].Font = new Font("Arial", 7, FontStyle.Bold); 
```

# python - 使用 python 脚本解析多个日志文件 - 如何？

> ID：11321699
> 
> 赞同：0
> 
> 时间：2012-07-04T02:32:46.270
> 
> 标签：python, command-line, matomo

我使用 python 脚本将日志文件导入 Piwik，**我可以一次成功地解析一个日志文件**，但是如何为目录中的所有日志文件执行此操作？

从自述文件中，脚本的用法是：

```
import_logs.py [options] log_file [ log_file [...] ] 
```

所以如果我有日志文件 u_ex120101.log 到 u_ex120701.log 我怎么能运行一次来​​完成所有这些文件？我确信答案正盯着我看，但我对 python 基本上一无所知。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T03:00:44.563

如果您在一个目录中有一堆日志文件并且您只想要其中的一个范围，另一种选择是编写一个小的 Python 脚本，该脚本接受一个范围和一个基数，并且只为每个日志文件调用导入日志（或者，如果您想要特别花哨，其实可以`import_logs`直接导入）。

`Popen`你可以在 Python中运行任何 shell 命令。所以如果你想运行`import_logs log_base_str01123.txt`，你可以运行以下命令：

```
from subprocess import Popen, PIPE
print Popen("import_logs.py log_base_str01123.txt", stdout=PIPE, shell=True).stdout.read() 
```

如果你想为一堆字符串做到这一点：

```
from subprocess import Popen, PIPE
import os
base_prefix = "u_ex"
base_suffix = ".log"
logs=["my", "list", "of", "log#s"]
for log in logs:
    path = "import_logs.py {prefix}{log_name}{suffix}".format(
                prefix=prefix, log_name=log, suffix=base_suffix)
    if not os.path.exists(log):
        print Popen(,
                stdout=PIPE, shell=True).stdout.read()) 
```

这可能是一个更通用的解决方案/让您拥有更细粒度的控制。

如果你想通过一个连续值列表，你可以使用：

```
logs = map(str, range(start_number, end_number + 1)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T18:34:21.393

您可以在 Python中使用[glob模块。](http://docs.python.org/library/glob.html)glob.glob() 函数接受一个包含通配符的字符串，并返回一个包含匹配文件和文件夹的列表。

例子：

```
import blob

# assume file_argument is a variable containing wildcard
file_argument = '/var/log/*.log'

for log_file in glob.glob(file_argument):
    do_stuff(log_file) 
```

这将导致 Python 为您执行通配符扩展。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T02:34:49.073

仅使用 shell 通配符调用脚本怎么样？

```
cd logs/
import_logs.py u_*.log 
```

*注意：这不适用于 Windows。Windows shell 不会扩展通配符。接收程序必须这样做（即import_logs.py）

**Windows 解决方案：**使用[cygwin](http://www.cygwin.com/)、[powershell](http://en.wikipedia.org/wiki/Windows_PowerShell)或其他 *nix-like shell 替换。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T07:48:16.407

我使用的是 Windows Server 2012，我没有使用 Python 的经验，并且我有 4 年的日志文件，每个文件大小约为 20mb-40mb。

我只是想分享一下我使用了一个名为 Merge Logs 的免费实用程序来解决这个问题。使用`copy *.log merged.txt`or`type *.log > merged.txt`花了**很**长时间，而这个实用程序在几分钟内完成了我需要的工作。

这是下载：[http ://www.allscoop.com/dotnet-software/log-file-merge.php](http://www.allscoop.com/dotnet-software/log-file-merge.php)

# netbeans - Netbeans SCSS 文件自动完成，就像 CSS 文件一样

> ID：11321708
> 
> 赞同：7
> 
> 时间：2012-07-04T02:34:02.490
> 
> 标签：netbeans, autocomplete, sass

我想知道我是否可以使用与 netbeans 中的 .scss 文件中的 .css 文件相同的自动完成功能。netbeans 具有的 scss 文件插件提供了很好的着色，但似乎不适用于自动完成。有没有办法可以使用 css 之类的 css 文件自动完成功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T14:12:15.523

Netbeans 有一个 scss 插件。[http://code.google.com/p/scss-editor/](http://code.google.com/p/scss-editor/)

最新版本（scss-editor 1.1.1 beta）支持 scss 文件的自动完成。

# php - PHP REG EXP 回溯问题

> ID：11321710
> 
> 赞同：1
> 
> 时间：2012-07-04T02:34:43.630
> 
> 标签：php, regex, optimization, pcre, backtracking

我正在尝试在 preg_match_all 中的 PHP 中使用这个 reg exp

```
/\d+ (?:<[^>]+>)(?:<[^>]+>)(\S+.*\S+)(?:<[^>]+>)\s*(\S+) (?:L|R)\s*\w* \w*\s*(?:\w+\s*){14}(\d+)\s*(\d)\s*(\d*\xA0*\d{3}\xA0*\d{3})/is 
```

有一些数据样本：

```
38 <A NAME="Philip McRae"><A HREF="xtrastats.html#Philip McRae">Philip McRae</A>            C L  OK    58 71 69 49 33 89 71 45 48 69 50 35 32 61   21   3    787 000
43 <A NAME="Alexander Nikulin"><A HREF="xtrastats.html#Alexander Nikulin">Alexander Nikulin</A>       C L  OK    41 68 71 40 28 90 67 29 31 60 31 37 34 50   26   0      0 000 <a href="http://www.hockeydb.com/ihdb/stats/pdisplay.php?pid=78680" target="_blank">HDB</a>
20 <A NAME="Christian Hanson"><A HREF="xtrastats.html#Christian Hanson">Christian Hanson</A>        C R  OK    57 72 71 54 33 79 70 42 45 71 46 40 36 60   25   1    875 000 <a href="http://www.hockeydb.com/ihdb/stats/pdisplay.php?pid=73824" target="_blank">HDB</a> 
```

我得到了大约1500行。

我需要匹配这个：

```
Philip McRae, C, 21, 3, 787 000 (Name, Position, Age, Contract Lenght, Salary) 
```

每次我运行我的代码时，我都会收到一个致命错误：Maximum execution time of 30 seconds exceeded 错误。

经过一番搜索后，我在脚本顶部添加了这一行，但这并不能解决我的问题

```
ini_set("pcre.backtrack_limit",10000000); 
```

任何人都可以用这个 reg exp 帮助我进行一些优化吗？

问候。

帕特里克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T07:19:48.917

我不会尝试重写您的正则表达式，因为我们没有要求，但这里的主要问题是您的姓名组：

```
(\S+.*\S+) 
```

`.*`是贪婪的。这意味着它将消耗尽可能多的内容，包括您期望表达式的其余部分匹配的内容，并且不会止步于此。由于您有`/s`模式修饰符，点也将匹配换行符，允许`.*`在尝试匹配之前消耗整个文件`\S`并开始其漫长的回溯之旅。

一种解决方案是使`.*`惰性与`?`, 即，`.*?`但由于您知道名称包含在元素中，您可以简单地为整个组使用否定字符类：

```
([^<]*) 
```

这应该可以解决您的问题，但您可能不想`/s`在这种情况下使用模式修饰符，或者您至少应该在模​​式中添加行尾锚点。您还应该尝试限制使用`*`.

请参阅： [灾难性回溯](http://www.regular-expressions.info/catastrophic.html "灾难性的回溯")并 [提防贪婪](http://www.regular-expressions.info/repeat.html%20%22Repeat)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T08:28:08.690

即使你有大约 1 500 行，你想解决的问题也是每行。

如果您能够*逐行*处理输入，那么您已经将问题减少了相当多。

```
$file = new SplFileObject($path);
foreach ($file as $i => $line) {
    printf("#%'0-4d: %s\n", $i, $line);
} 
```

这只是一个例子，自然地，正则表达式引擎本身可以用它的多行修饰符（m）做类似的事情。但是，如果您执行上述 foreach，则可以`break`直接使用第一行进行测试：

```
foreach ($file as $i => $line) {
    printf("#%'0-4d: %s\n", $i, $line);
    $pattern = '(^\d++ <A NAME="([^"]++)"><A HREF="xtrastats.html#Philip McRae">Philip McRae</A>            C L  OK    58 71 69 49 33 89 71 45 48 69 50 35 32 61   21   3    787 000)$';
    $r = preg_match($pattern, $line, $matches);
    if (FALSE === $r) {
        throw new Exception(sprintf("Regex failed (%d)", preg_last_error());
    }
    if (!$r) {
        throw new Exception(sprintf("Pattern does not match."));
    }
    var_dump($matches);
    if ($i > 0) break; # exit foreach after X lines.
}
echo "Done.\n"; 
```

正如您在此示例中所看到的，该模式尚不完整，但您可以逐步完成整行替换。

它还使用锚点作为字符串的开头 ( `^`) 和字符串的结尾 ( `$`)。

它还使用所有格量词 ( `+`)，因此如果它们不匹配，则不会发生回溯（类似于原子分组，但更容易编写）。

继续逐步改进您的正则表达式模式。如果正则表达式未编译，则会引发异常。以及当一条线不匹配时。

你应该在一段时间后完成你的工作，改进错误处理并从长远来看创建一些稳定高效的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T00:11:30.377

@hakre 和 @bodhizero

在您的输入和帮助下，我将正则表达式修改为：

```
\d{1,2}+ (?:<[^>]++>)(?:<[^>]++>)([^<]*+)(?:<[^>]++>)\s*+(\S{1,2}+) (?:L|R)\s*+\w*+ \w*+\s*+(?:\w++\s*+){14}(\d{1,2}+)\s*+(\d)\s*(\d*+.*?\d{0,3}+.*?\d{3}+)(?: <[^>]++>[^<]*+<[^>]++>)*? 
```

结果：在大约 2 秒内解析整个文件！！！

我使用[Regexbuddy](http://www.regexbuddy.com/debug.html)程序并帮助了我很多。

我希望我能给出两个答案，但我不能

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T03:30:42.870

您需要限制用于正则表达式匹配的数据量，或更改`set_time_limit`和`memory_limit`限制。

`preg_match_all()`非常占用 CPU，并且根据您的服务器 CPU 的强大程度，它可能会导致执行时间和内存问题。

一种解决方案是将其添加到代码的顶部：

```
set_time_limit(0);
ini_set('memory_limit', '128M'); 
```

您的另一个选择是将脚本限制为`preg_match_all()`每次页面加载的匹配更少。

# autocomplete - 如何像重构对话框一样在 Eclipse 中制作 AutoCompleteField？

> ID：11321712
> 
> 赞同：1
> 
> 时间：2012-07-04T02:34:54.287
> 
> 标签：autocomplete, eclipse-plugin, swt, jface

这个问题与Eclipse插件开发有关。

我想编写一个 SWT 文本字段（或 Combo），就像“更改方法签名”重构对话框页面中的“返回类型”字段一样。我希望拥有与该字段相同的自动完成行为。

我知道我可以使用 AutoCompleteField 和 TextContentAdapter，但我不知道如何使用项目类路径中的所有类设置提案数组。类名左侧的那些图像装饰呢？

我会很感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:01:55.820

您是否只需要一个 ContentProposals 示例，或者您想知道如何获取 classPath 中的所有类名？首先我可以帮助你。希望这段代码有帮助，如果您有问题，请提出。

```
package com.porsche.dps.core;

import org.apache.log4j.Logger;
import org.eclipse.jface.bindings.keys.KeyStroke;
import org.eclipse.jface.bindings.keys.ParseException;
import org.eclipse.jface.fieldassist.ContentProposal;
import org.eclipse.jface.fieldassist.ContentProposalAdapter;
import org.eclipse.jface.fieldassist.SimpleContentProposalProvider;
import org.eclipse.jface.fieldassist.TextContentAdapter;
import org.eclipse.jface.viewers.ILabelProvider;
import org.eclipse.jface.viewers.ILabelProviderListener;
import org.eclipse.swt.SWT;
import org.eclipse.swt.graphics.Image;
import org.eclipse.swt.layout.GridLayout;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Shell;
import org.eclipse.swt.widgets.Text;

public class ContentProposalsTest {
   public static void main(String[] args) {
      Display display = new Display();
      Shell shell = new Shell(display);
      shell.setLayout(new GridLayout(1, false));

      Text text = new Text(shell, SWT.BORDER);

      String[] proposals = new String[] {"abc", "bcd", "cde", "abc2", "bcd2", "cde2"};
      String autoActivationCharacters = "";
      SimpleContentProposalProvider simpleContentProposalProvider = new     SimpleContentProposalProvider(proposals);

      for (int i = 0; i < proposals.length; i++) {

         if (proposals[i].length() == 0)
            continue;

         char c = proposals[i].charAt(0);

         if (autoActivationCharacters.indexOf(c) == -1) {
            autoActivationCharacters += c;
         }
      }

      KeyStroke keyStroke = null;
      simpleContentProposalProvider.setFiltering(true);
      try {
         keyStroke = KeyStroke.getInstance("Ctrl+Space");
      } catch (ParseException e) {
         Logger.getLogger("").error("KeyStroke Parse Exception");
      }
      ContentProposalAdapter proposalAdapter = new ContentProposalAdapter(text, new TextContentAdapter(),
     simpleContentProposalProvider, keyStroke, autoActivationCharacters.toCharArray());

          proposalAdapter.setProposalAcceptanceStyle(ContentProposalAdapter.PROPOSAL_REPLACE);
      proposalAdapter.setLabelProvider(new ILabelProvider() {

         @Override
         public void removeListener(ILabelProviderListener listener) {}

         @Override
         public boolean isLabelProperty(Object element, String property) {
            return false;
         }

         @Override
         public void dispose() {}

         @Override
         public void addListener(ILabelProviderListener listener) {}

         @Override
         public String getText(Object element) {
            return ((ContentProposal)element).getLabel();
         }

         @Override
         public Image getImage(Object element) {
            return <insert image>;
         }
      });
      shell.open();
      while (!shell.isDisposed()) {
         if (!display.readAndDispatch()) {
            display.sleep();
         }
      }
      display.dispose();
   }
} 
```

# php - PHP/Apache 超时过早

> ID：11321714
> 
> 赞同：1
> 
> 时间：2012-07-04T02:35:08.343
> 
> 标签：php, apache, timeout

我有一个程序向 PHP 脚本提交大约 1.8MB 大小的 post 请求，该脚本将数据转换为图像。

不幸的是，由于某种原因，服务器最近开始拒绝较大的发布请求，同时仍接受较小的请求。

我已经检查了所有设置，但我似乎无法找到问题所在。

每次发布请求都恰好在 20 秒处超时，即使它不应该在 60 秒后才超时。

```
max_input_time: 60
upload_max_filesize: 10M
post_max_size: 8M

Timeout: 300

Post request timeout in vb program: 60000 (60 seconds) 
```

失败请求示例：[imgur.com/qx1iW,LV9OS](http://imgur.com/qx1iW,LV9OS)

成功请求示例：[imgur.com/qx1iW,LV9OS#1](http://imgur.com/qx1iW,LV9OS#1)

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T02:38:00.143

查看其中显示的属性`php.ini`：

```
max_execution_time: 60; # in seconds 
```

# grails - 如何从我的服务中获取状态？

> ID：11321716
> 
> 赞同：0
> 
> 时间：2012-07-04T02:35:20.353
> 
> 标签：grails, groovy

我有服务类，我有一项服务：

```
class service { 
  def activate(def part1,def part2) { 
    //here I check whether the provided part1 and part2 are correct 
    //If so I open a keystore or else catch the exception. . 
    try { 
      //code goes here. . . . 
    } 
    catch(IOException e) 
    { 
      log.error("") 
    } 
  } 
} 
```

现在在我的控制器代码中，我调用了这个服务。我想知道`activate`服务是否成功打开密钥库，提供的`part1`和`part2`. 最初我在块中添加了一个布尔变量`try/catch`来获取状态，但我想这是不好的做法。

除此之外，我如何知道主动服务是否成功？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T02:49:14.977

您可以在这里采取几种方法：

`activate`如果打开密钥库失败（而不是仅仅捕获和记录错误），则可以抛出异常而不是仅仅记录错误。不过，这取决于您的应用程序的具体情况 - 如果未打开密钥库，这实际上是一个错误情况吗？还是可能/可能无法打开密钥库？

您可以`activate`返回一个布尔值 true/false，并且该方法的调用者可以检查`activate`

# iphone - 在获取永久 ID 后，核心数据无法为对象完成故障

> ID：11321717
> 
> 赞同：15
> 
> 时间：2012-07-04T02:35:31.320
> 
> 标签：iphone, objective-c, ios, core-data

我正在从网络服务器获取数据，并在名为`backgroundMOC`. `mainMOC`它是链接到主 UI的 a 的子级，因此保存`backgroundMOC`触发器 UI 更改。`mainMOC`是 a 的子级，它`masterMOC`是绑定到持久存储的私有后台队列，因此保存在 master 上会保存到磁盘。

我现在做的是接收数据，在 上创建新对象`backgroundMOC`，然后保存`backgroundMOC`（以便 UI 更新），保存`mainMOC`，（以便我几乎可以保存到磁盘），然后保存`masterMOC`（以便我最终可以写入磁盘）。问题是当对象通过获取的结果控制器出现在 UI 中时，`objectId`它仍然是一个临时对象。

这会导致重复行问题的问题，如果我从服务器收到相同的数据（偶然），我`backgroundMOC`不知道这个对象已经存在，因为它没有被分配一个永久 id，所以它创建了另一个对象。当我重新启动应用程序时，重复的对象消失了，所以我知道这只是 id 映射的问题。

所以我想我可以试试

```
[backgroundMOC obtainPermanentIDsForObjects:backgroundMOC.registeredObjects.allObjects error:nil]; 
```

在完全保存之前（我也在保存后尝试过）。但是，由于某种原因，调用此行会引发异常：

> CoreData 无法满足...

如果您有任何提示可以引导我朝着正确的方向前进，请分享。谢谢

**编辑：**好的，所以最初我在 backgroundMOC 上调用了 gainPermanentIDsForObjects，它是 mainMOC 的子对象，它是 masterMOC 的子对象。我切换它以便获得 mainMOC 上的 id，它解决了我所有的问题（目前）。我不应该在子上下文中调用 gainPermIds 吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-16T22:15:15.870

这是一个已知的错误（保存新对象时嵌套上下文没有获得永久 ID）可能，并且应该在即将发布的版本中修复......

虽然您应该能够要求永久 ID，但您应该只在已插入的对象上要求它们。

```
[moc obtainPermanentIDsForObjects:moc.insertedObjects.allObjects error:0]; 
```

但是，您必须在保存 MOC 之前执行此操作，因为如果您在没有获得永久 ID 的情况下保存，临时 ID 会传播到父上下文。例如，在您保存到 mainMoc，然后获取 IDS 的情况下，backgroundMOC 仍然具有临时 ID，因此将来从中保存将创建重复数据。

请注意，获取永久 ID 一直到数据库，但如果您在主 MOC 的子 MOC 中执行此操作，则在发生这种情况时您根本不应该阻塞主线程。

所以，在你从最低级别的 MOC 中保存时，你应该有效地拥有这样的东西（当然，有适当的错误处理）......

```
[backgroundMoc performBlock:^{
    [backgroundMoc obtainPermanentIDsForObjects:backgroundMoc.insertedObjects.allObjects error:0];
    [backgroundMoc save:0];
    [mainMoc performBlock:^{
       [mainMoc save:0];
        [masterMoc performBlock:^{
            [masterMoc save:0];
        }];
    }];
}]; 
```

如果您愿意，还可以玩一些其他游戏。

在 NSManagedObject 上提供与此类似的类别...

```
@implementation NSManagedObject (initWithPermanentID)
- (id)initWithEntity:(NSEntityDescription *)entity insertWithPermanentIDIntoManagedObjectContext:(NSManagedObjectContext *)context {
    if (self = [self initWithEntity:entity insertIntoManagedObjectContext:context]) {
        NSError *error = nil;
        if (![context obtainPermanentIDsForObjects:@[self] error:&error]) {
            @throw [NSException exceptionWithName:@"CoreData Error" reason:error.localizedDescription userInfo:error.userInfo];
        }
    }
    return self;
}

+ (NSArray*)createMultipleObjects:(NSUInteger)count withEntity:(NSEntityDescription *)entity inManagedObjectContext:(NSManagedObjectContext *)context {
    NSMutableArray *array = [NSMutableArray arrayWithCapacity:count];
    for (NSUInteger i = 0; i < count; ++i) {
        [array addObject:[[self alloc] initWithEntity:entity insertIntoManagedObjectContext:context]];
    }
    NSError *error = nil;
    if (![context obtainPermanentIDsForObjects:array error:&error]) {
        @throw [NSException exceptionWithName:@"CoreData Error" reason:error.localizedDescription userInfo:error.userInfo];
    }
    return array;
}
@end 
```

现在，在第一个中，您需要付费进入数据库并为创建的每个实体创建一个 ID，但这并不多，而且它发生在后台线程中，并且每次下降都很短......

哦，好吧，它不是最好的，但它提供了有用的。此外，第二个创建多个相同对象，并同时获取它们的永久 ID。

您还可以使用直接连接到 PSC 的 MOC，并监视 DidChange 事件，但这与旧方法相同。

不幸的是，你不能有一个单独的 MOC 只发出 persistentID 请求并传递 ObjectID，尽管你可以有一个单独的 MOC 在 DB 中制作原型对象，并为你提供它们的 ObjectID。

原型工厂是一种相当常见的模式，如果你走这条路，当最终的错误修复到这里时，很容易做出微小的改变。

**编辑**

回应斯文...

如果您要创建新的复杂图表，则需要在创建后立即获取永久 ID。要减少对商店的点击次数，您应该全部创建它们，然后立即获取 ID，然后开始连接它们。

老实说，所有这些都是为了解决当前存在的错误，这些错误对于中小型更新来说是值得解决的。修复错误后，您的代码将是相同的（无需获取）。因此，我建议将这种方法用于较小的进口。

如果您正在进行大规模更新，我建议使用“旧”方法。创建一个直接连接到 PSC 的新 MOC。在那里进行所有更改，并让您的“实时”上下文从那些 DidSave 通知中合并。

最后，关于永久 ID 对数据库的影响。可以丢弃 MOC。磁盘被击中，元数据被改变，但对象没有被持久化。

老实说，我没有做一个大的测试来看看是否有任何空白空间，所以你可能想这样做，然后和我一起回来。

查看磁盘上实际的数据库文件大小，然后创建 10000 个对象，然后获取持久 ID，释放 MOC，再查看大小。

如果有影响，您可以尝试删除对象，或在大更新后对数据库运行清理以查看是否有效。

如果您要创建大量可能会丢弃的对象，则无需访问数据库。您可能只想直接附加到 PSC 并使用旧的忠实通知。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T13:52:33.740

在前台和后台线程之间工作时，我对 Core Data 有过各种挫败感。在为我遇到的一个问题寻找解决方案时

[魔法唱片](https://github.com/magicalpanda/MagicalRecord/)

我花了一些时间阅读文档和方法，我可以说它确实使使用 Core Data 变得更加容易。具体来说，它还将帮助您管理多个上下文和线程。

你可能想检查一下。

# python - 如何使用 Python 显示 OSM 磁贴？

> ID：11321718
> 
> 赞同：12
> 
> 时间：2012-07-04T02:35:36.157
> 
> 标签：python, gis, openstreetmap

我正在使用 generate_tiles.py 生成图块，我想编写一个 Python 应用程序来显示它们，而不是使用 Web 界面。是否已经存在类似的东西，或者是否有关于如何自己编写这样的应用程序的信息？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-04T08:22:52.297

您可以使用 Tilemill 或 QGIS 之类的桌面应用程序查看/编辑地图（如果不是用于 Web 应用程序，我真的猜不出为什么要生成图块）。

Tilestache 有一个可用于测试的内部网络服务器，只需使用配置文件即可轻松运行。

一些让你开始的建议（或者让你忙几个星期）：

服务器端库和应用程序

*   [TileStache](http://tilestache.org/)：非常易于使用的切片服务器和切片缓存
*   [Mapnik](http://mapnik.org/)：tilestache 和 tilemill 背后的底层库
*   [TileLite](https://bitbucket.org/springmeyer/tilelite/wiki/Home) : 轻量级 Python tile-server
*   [MapOSMatic](http://maposmatic.org/)：用 Python/Django + mapnik 编写？

客户端库

*   [Leaflet](http://leaflet.cloudmade.com/)：客户端库很像 Google Maps API
*   [OpenLayers](http://openlayers.org/)：可以很容易地在任何网页中放置动态地图
*   [Wax](http://mapbox.com/wax/)：向最小映射库添加常用实用程序
*   [适度的地图](http://modestmaps.com/)：一个简单的构建平台
*   [Mapstraction](http://mapstraction.com/)：众多 javascript 映射库的通用接口

自定义地图创建工具

*   [Tilemill](http://mapbox.com/tilemill/) : 像用于地图的 css (真棒)
*   [OSGeo4W](http://trac.osgeo.org/osgeo4w/)：必须有 Windows 的地理空间工具箱

标记

*   [MakiIcons](http://mapbox.com/maki/)：为网络制图制作的干净的兴趣点图标集
*   [地图图标集合](http://mapicons.nicolasmollet.com/)：700 个免费图标可用作地标

PyCon2012 的一些相关视频

*   [简单介绍 GIS](http://pyvideo.org/video/887/a-gentle-introduction-to-gis)
*   [用 Python 制作地图](http://pyvideo.org/video/672/making-maps-with-python)
*   [使用 Python 进行空间数据和网络制图](http://pyvideo.org/video/680/spatial-data-and-web-mapping-with-python)
*   [为网络制作交互式地图](http://pyvideo.org/video/623/making-interactive-maps-for-the-web)

一些有趣的应用程序可以激发您的灵感：

*   [8bitcity](http://8bitcity.com/map)：如果谷歌地图遇到了[Atari 2600](http://en.wikipedia.org/wiki/Atari_2600) [River Raid](http://youtu.be/zYLA_uO-XH0)墨盒
*   [OpenWhateverMap](http://www.openwhatevermap.org/)：不同渲染风格的拼凑

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-04-08T15:34:21.980

引用OP：

> 我想编写一个 Python 应用程序来显示它们，而不是使用 Web 界面

我有同样的要求（更具体地说，我需要在已经存在的 GTK+ 桌面应用程序中显示交互式地图），我没有看到这里回答的问题，所以我去寻找[直接参考信息](https://wiki.openstreetmap.org/wiki/Frameworks)。在那里我看到三个选项：

*   如果你在 KDE 上：[https ://wiki.openstreetmap.org/wiki/KDE_Marble](https://wiki.openstreetmap.org/wiki/KDE_Marble)
*   如果你在 GTK+： http: [//nzjrs.github.io/osm-gps-map/](http://nzjrs.github.io/osm-gps-map/)
*   再次在 GTK+ 中：[https ://wiki.openstreetmap.org/wiki/Libchamplain](https://wiki.openstreetmap.org/wiki/Libchamplain)

Paulo Scardine 非常完整的概述侧重于 web 界面，并没有提及它们。

# tabs - Chrome 扩展程序会记住打开选项卡的选项卡

> ID：11321720
> 
> 赞同：0
> 
> 时间：2012-07-04T02:35:42.227
> 
> 标签：tabs, google-chrome-extension

我经常在 Chrome 中打开许多标签页，尤其是在阅读维基百科时。问题是，当我阅读维基百科中的一篇文章并想返回继续阅读上一篇文章时，我可能会忘记是哪篇文章（或标签）将我带到了当前文章/tab，我想知道是否有这样的 Chrome 扩展程序可以将我导航回上一个选项卡。如果没有，我想我会自己写这样的扩展。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T05:07:19.573

这样的扩展已经存在。
这里有两个例子：

[https://chrome.google.com/webstore/detail/nikomkkhhpfoeamojhhgpfkpkdlfhfii](https://chrome.google.com/webstore/detail/nikomkkhhpfoeamojhhgpfkpkdlfhfii)
[https://chrome.google.com/webstore/detail/cldflinjcjehpjddjkohganfpjlnbpem](https://chrome.google.com/webstore/detail/cldflinjcjehpjddjkohganfpjlnbpem)

# css - 我在哪里可以定义全局混合，以便我可以从任何其他样式表中使用它们

> ID：11321738
> 
> 赞同：1
> 
> 时间：2012-07-04T02:38:35.343
> 
> 标签：css, ruby-on-rails, sass

我在资产管道的样式表文件夹中创建了一个名为 mixins 的文件，因此我可以从任何其他样式表中使用此文件中的 mixins，但它不起作用并且出现错误`Undefined mixin 'mymixin'`。所以有什么帮助我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T04:16:26.517

只需像这样在您的应用程序 css 文件中导入此文件`@import "mixins.ext";`

# sql-server - SQL Server 统计中究竟保存了什么？他们什么时候更新？SQL Server 本身是否在照顾它们？

> ID：11321740
> 
> 赞同：0
> 
> 时间：2012-07-04T02:38:46.903
> 
> 标签：sql-server, sql-server-2008, sql-server-2005, statistics, sql-execution-plan

我作为开发人员使用 SQL Server 已经有一段时间了。

我学到的一件事是 SQL Server 管理帮助引擎创建优化执行计划的统计信息。

我无法弄清楚统计中的商店到底是什么？（我读到它保存了 Vector，但是 Vector 是什么？）

SQL Server 何时/在哪种情况下更新统计信息？

他们如何/为什么有时会不同步（旧统计数据）

如果旧的统计信息需要手动 DBA/开发人员干预，否则 SQL Server 将更新它们。

作为 DBA/开发人员如何找出统计信息是否 OLD？我们应该做什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T03:12:23.960

*[在此上下文中的统计](http://msdn.microsoft.com/en-us/library/ms190397.aspx)*信息是指 RDBMS 对给定索引的值进行的抽样。粗略地说，这让引擎了解了值的分布，并帮助它规划高效的查询。[您可以使用DBCC SHOW_STATISTICS](http://msdn.microsoft.com/en-us/library/ms174384.aspx)查看统计信息集的实际内容。

```
DBCC SHOW_STATISTICS (table_name, index_name) 
```

随着表中的数据（以及因此索引值的分布）的变化，索引的统计数据可能会随着时间的推移而过时。这可能会导致查询执行计划不够理想，这就是为什么您应该致力于使统计信息保持最新。

[您可以使用UPDATE STATISTICS](http://msdn.microsoft.com/en-us/library/ms187348.aspx) T-SQL 命令手动更新统计信息，或将它们设置为自动更新。从第一个 MSDN 链接：

> 当自动更新统计信息选项 AUTO_UPDATE_STATISTICS 开启时，查询优化器确定统计信息何时可能过期，然后在查询使用它们时更新它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T04:56:47.590

您可以通过以下方式查看您的统计信息是否是最新的：

```
select  object_name(ind.object_id) as TableName
,       ind.name as IndexName
,       stats_date(ind.object_id, ind.index_id) as StatisticsDate
FROM    sys.indexes ind
order by 
        stats_date(ind.object_id, ind.index_id) desc 
```

# licensing - 关于“知识共享署名 3.0 许可”的说明

> ID：11321746
> 
> 赞同：0
> 
> 时间：2012-07-04T02:39:18.947
> 
> 标签：licensing

我需要更多关于知识共享署名 3.0 许可的说明[http://creativecommons.org/licenses/by/3.0/]

请参阅[创意许可网站](http://creativecommons.org/licenses/by/3.0/) “署名 - 您必须以作者或许可人指定的方式对作品进行署名（但不得以任何方式暗示他们认可您或您对作品的使用”）是什么意思？

谢谢，拉希杜尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:34:16.970

如果您使用许可人的作品（无论他们如何指定），您就已经对许可人表示认可，但您不能声称他们认可您的项目（使用商标、他们的名称等）。

所以如果我在CC3下使用Y博士的Library X，我不得不说我使用的是Y博士创建的Library X，但是Y博士与这个项目没有任何联系。

如果您还有任何许可问题，请参阅我的网站[http://www.tldrlegal.com/](http://www.tldrlegal.com/)。

# ruby - Ruby中哈希参数和Hash#merge的语法错误

> ID：11321751
> 
> 赞同：0
> 
> 时间：2012-07-04T02:39:45.573
> 
> 标签：ruby

我试图做一个开源贡献，下面的 star_rating 方法中的代码行`options.merge()`（这是我试图提交的更改）被踢回了以下消息“这是无效的 Ruby 语法（在 1.8.7和 1.9.3)..." 我的问题是为什么？我检查了`Hash#merge`ruby​​ 交互式 shell 上的方法，它似乎有效。

```
def star_rating(options = {})
   ##original line of code
   has_many :rates_without_dimension, :as => :rateable, :class_name => 'RateMe', :dependent => :destroy, :conditions => {:dimension => nil}  

  ##line of code I tried to submit
  has_many :rates_without_dimension, :as => :rateable, options.merge(:class_name => 'RateMe'), :dependent => :destroy, :conditions => {:dimension => nil}  
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T04:04:52.603

根据“The Ruby Programming Language”第一版的第 6.4.4 章

> 如果哈希字面量是方法的最后一个参数（或者它后面的唯一参数是块参数，以 & 为前缀），Ruby 允许您省略围绕哈希字面量的花括号

您的方法调用的形式为`method a => b, c => d, {e => f, g => h}, i => j`，因为 hash.merge 将返回一个哈希值。因此，您要分解散列，而不是放入单个散列，并且编译器假定这`a => b, c=>d`是一个散列，这将不是最后一个参数，从而破坏了最后一个参数规则。

另外，根据同一节

> 如果省略括号，则*必须*省略花括号。

您的 hash.merge 返回花括号中的哈希，这违反了该规则。

编辑：只要哈希不是唯一的参数，这实际上就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T02:49:08.230

通常，传递`options`给 Ruby 方法通常是通过将其作为最后一个参数来完成的。在某些情况下，它实际上需要作为最后一个参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T04:04:50.830

这确实是无效的语法。方法调用的最后一个参数可以是 Hash，在这种情况下 Ruby 允许您删除封闭的`{}`:

```
foo(1, 2, 3, :a => 4, :b => 5)
# equivalent to:
foo(1, 2, 3, {:a => 4, :b => 5}) 
```

在您的情况下，您`:as => :rateable`之前有一个简单的参数 ( `options.merge`)，这是不允许的。

如果你倒置它们，你仍然不会得到你想要的效果：

```
has_many :rates_without_dimension, options.merge(:class_name => 'RateMe'), :as => :rateable, :dependent => :destroy, :conditions => {:dimension => nil}
# same as
has_many :rates_without_dimension, options.merge(:class_name => 'RateMe'), {:as => :rateable, :dependent => :destroy, :conditions => {:dimension => nil}}
# => has 3 arguments, not 2. 
```

你可以在这里做的是确保你传递了两个参数。一种方法：

```
has_many :rates_without_dimension, options.merge(:class_name => 'RateMe', :as => :rateable, :dependent => :destroy, :conditions => {:dimension => nil}) 
```

请注意，在 Ruby 2.0 中，**可以**`*`使用与数组 ( )等效的 splat 运算符来执行您想要的操作，这[将`**`用于哈希](http://bugs.ruby-lang.org/issues/5474)：

```
h = {:b => 2}
foo(:a => 1, **h, :c => 3)
# same as
foo(:a => 1, :b => 2, :c => 3) 

# so you will be allowed to write:
has_many :rates_without_dimension, :as => :rateable, **options.merge(:class_name => 'RateMe'), :dependent => :destroy, :conditions => {:dimension => nil} 
```

# java - 如何获取最新版本的 Java 进行安装

> ID：11321753
> 
> 赞同：0
> 
> 时间：2012-07-04T02:40:18.340
> 
> 标签：java

我一直在使用最新版本的 Java 时遇到问题，它们无法安装，并且 Sun 没有提供有关何时修复此错误的信息。

所以：1）为什么java更新无法安装最新的更新？(6.32) (7.5) 安装程序完成 99%，然后它退出并显示错误消息，此时，机器上的 java 已卸载，需要我重新安装 java 6.31。

如果无法修复此错误或绕过它，该怎么办：2）我如何对我的系统进行版本标记，以便他们不会尝试安装更新，至少在我可以验证错误已修复之前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T02:46:32.583

你想要JDK版本吗？如果您无法安装，则可能是您的机器出了问题，而不是 JDK 包中的错误。但是，如果您想拥有最新版本。这是另一种方式：（同样，如果您的操作系统没有问题，这很好用）。

我假设您正在使用Windows。在另一台机器上安装 JDK，并将所有此文件夹复制到您的计算机。例如，`C:\JDK 1.7\`

**更改您的环境变量：**

转到`Environment Variable`对话框（在 Windows Xp 和 Windows 7 上有所不同）

在`Path`, 添加`C:\JDK 1.7\bin`

在处`system variable`，您添加名为 : 的新变量并将`JAVA_HOME`其设置为 :`C:\JDK 1.7` 注意`bin`此路径后没有。

希望这有帮助:)

# android - 图像处理和相机 ISO

> ID：11321756
> 
> 赞同：3
> 
> 时间：2012-07-04T02:41:07.613
> 
> 标签：android, image-processing, opencv

我有兴趣更改我的 Android 手机摄像头的 ISO 值。我浏览了开发人员页面，但没有什么令人满意的。我还发现了有关 OpenCV 的信息。但我无法理解改变像素强度值数组的iso在数学上意味着什么？也许如果我明白我可以尝试改变相机图像的iso。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T02:51:27.330

ISO 是对胶片摄影的参考，其中高 ISO 值意味着胶片对光更敏感。一张 400 倍速的胶片需要的光量是 200 倍速胶片的一半才能产生相同的图像。

在数码相机上，ISO 是在数字化之前应用于来自图像传感器的模拟信号的电子增益。增加增益使系统更加敏感，但它也放大了噪音——与胶片相同的权衡。

因此，更改图像的 ISO 是无稽之谈。您只能更改相机的 ISO，并且在拍照之前进行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T13:41:05.270

最接近您的问题的解决方案是使用称为曝光补偿的 Android 相机参数 - 如果您的特定 Android 支持它。

检查这个类似的帖子[Android Camera API ISO Setting?](https://stackoverflow.com/questions/2978095/android-camera-api-iso-setting)

# c# - File.Delete = IOException（文件仍在被其他进程使用）

> ID：11321757
> 
> 赞同：1
> 
> 时间：2012-07-04T02:41:23.387
> 
> 标签：c#, webclient, ioexception

我的申请有点问题。对于我的应用程序，我想通过 webclient.DownloadFileAsync 下载一些文件，如果用户在下载仍在运行时退出程序，我想取消该 webclient 进程并删除该文件。

我已经用下面的代码试过了，但它并不能很好地工作，因为我总是得到一个 IOException（其他进程正在使用的文件）。

```
 for (z = 0; z < CheckedCount; z++)
        {
            MultiWebclient[z].CancelAsync();
            MultiWebclient[z].Dispose();

            dgvDownloads.Rows[z].Cells[5].Value = "Canceled";
            File.Delete(selectedFolder + _downloadRowNameList[z] + ".mp4");
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T02:49:01.877

下载文件附有下载例程，当您尝试删除这些文件时，您会收到错误消息。您可以尝试的事情很少。

1.  使用定时器重复检查文件句柄是否被下载例程释放，您可以在 30 秒后检查。这样，您将能够在通过下载例程释放句柄后立即删除文件。

2.  当用户取消操作并在下次应用程序启动时删除文件时，您可以存储要删除的文件的路径/文件名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T01:24:13.497

我不确定这是否是一个合法的解决方案，但我设法通过使用额外的按钮取消 webclient (webclient.CancelAsync();) 并放置 File.Delete(); 来解决我的问题。在将在 DownloadFileCompleted 事件中触发的 if(e.Cancelled) 语句中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T02:49:19.373

您的 MultiWebClient 可能仍然在流中打开文件。Dispose 方法的真正作用是什么？我想 Dispose 方法也有可能异步执行一些工作，并且当它到达该文件时，您的流仍然处于打开状态。底线是某个地方有那个文件，而最大的嫌疑人就是那个 MultiWebClient。

# php - 使用 cURL 下载 zip 文件不适用于以下 php 代码

> ID：11321761
> 
> 赞同：-1
> 
> 时间：2012-07-04T02:41:56.403
> 
> 标签：php, curl

**我尝试/正在尝试的**

```
function download_data($target_document,$outfile_location) 
{
    log_message('info', 'Downloading every page in data set');

    do 
    {   

       $ch = curl_init ($target_document.'apiKey=' . self::$API_KEY);       
       $fp = fopen($outfile_location . "data.zip", "w");

        curl_setopt($ch, CURLOPT_FILE, $fp);
        curl_setopt($ch, CURLOPT_HEADER, 0);
        curl_exec($ch);
        $http_status = curl_getinfo($ch, CURLINFO_HTTP_CODE);
        curl_close($ch);

        fclose($fp);

        $this->http_status = $http_status;

            if($this->http_status != 200) 
            {
                $this->data_retry_count += 1;   
            }

    } while($this->http_status != 200 && $this->data_retry_count < $this->retry_max);

        if($this->http_status == 200) 
        {

            return;

        }

} 
```

使用上面的代码一切都很顺利，除了我得到一个没有内容的压缩（zip）。如果我在浏览器中下载目标文档，它就可以工作。为了获取 zip 文件的内容，我是否必须对 curl 做一些不同的事情？

忽略`$this`变量，因为此函数是类的一部分，而这些变量代表类中包含的变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T03:05:20.360

这应该可以解决您的问题。

这将下载 ZIP 而不会为空，这是不久前解决我的问题的方法。

您还应该考虑`echo curl_error($ch);`进行调试。

```
<?php 
function get_file1($file, $local_path, $newfilename) { 
    $err_msg = ''; 
    echo "<br>Attempting message download for $file<br>"; 
    $out = fopen($newfilename, 'wb'); 
    if ($out == FALSE){ 
      print "File not opened<br>"; 
      exit; 
    } 

    $ch = curl_init(); 

    curl_setopt($ch, CURLOPT_FILE, $out); 
    curl_setopt($ch, CURLOPT_HEADER, 0); 
    curl_setopt($ch, CURLOPT_URL, $file); 

    curl_exec($ch); 
    echo "<br>Error is : ".curl_error ( $ch); 

    curl_close($ch); 
    //fclose($handle); 

}
?> 
```

*来源：* [http ://www.weberdev.com/get_example.php3?ExampleID=4009](http://www.weberdev.com/get_example.php3?ExampleID=4009)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-04T02:50:21.397

听起来您正在尝试使用 curl 执行 FTP 或 wget 类型的功能。不确定它与 curl 的效果如何。备择方案：

对于 PHP 中的 ftp：

[http://php.net/manual/en/book.ftp.php](http://php.net/manual/en/book.ftp.php)

对于 PHP 的类似 wget 的功能，您可以尝试

文件获取内容（$url）

[http://php.net/manual/en/function.file-get-contents.php](http://php.net/manual/en/function.file-get-contents.php)

# css - 我应该如何使用 Bootstrap 设置 Django 验证错误的样式？

> ID：11321767
> 
> 赞同：7
> 
> 时间：2012-07-04T02:44:14.560
> 
> 标签：css, django, twitter-bootstrap

当 Django 中的表单出现验证错误时，错误会在带有 class 的列表中给出`errorlist`。

Bootstrap 可以通过设置为元素赋予错误样式`class="alert alert-error"`。

将这些结合起来并使用 Bootstrap 的错误样式验证 Django 表单上的错误的最佳方法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-04T04:16:27.227

在 Twitter Bootstrap 中，输入元素包含在`"control-group"` `div`或之间`fieldset`。所以我会在模板中做这样的事情

```
{%for field in form %}
<div class="control-group {%if field.errors %}error{%endif%}">
{# render your field #}
</div>
{% endfor %} 
```

注意：在引导程序中，`class="alert alert-error"`似乎是针对警报消息而不是针对特定字段的错误。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-01-18T21:01:34.813

在 Bootstrap 3 中，输入元素包含在“form-group”div 之间，并且错误类已更改为 has-error。

```
{%for field in form %}
  <div class="form-group {%if field.errors %}has-error{%endif%}">
    {# render your field #}
  </div>
{% endfor %} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T05:15:00.127

已经定型了！:)

*   [https://github.com/maraujop/django-crispy-forms/](https://github.com/maraujop/django-crispy-forms/)
*   [https://github.com/earle/django-bootstrap](https://github.com/earle/django-bootstrap)

这些库充当表单的包装器，并添加在 Django Bootstrap 中使用的相关类名，以便您拥有开箱即用的基本样式（默认引导程序）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-03T09:51:16.457

# Bootstrap 4 Django 解决方案

如果`<form class="was-validated>"`在您的回复中返回验证，这将适用于您：

此示例适用于`admin/change_form.html`，但很容易通过更改将其转换为您的表单`adminform.form`

**这不适用于 Multi 小部件，例如`DateSelectorWidget`**

删除`class="was-validated"`

```
{% if adminform.form.errors %} {# Delete this if you always want active validations #}
  <script type="text/javascript">
    {% for field in adminform.form %}
      var field_input = document.getElementById("{{ field.auto_id }}");
      if (field_input) {
        field_input.classList.add("is-{% if field.errors %}in{% endif %}valid");
      }
    {% endfor %}
  </script>
{% endif %} 
```

**这适用于 Multi 小部件，`DateSelectorWidget`但如果调用一个字段并且`start``start_time`** *赞赏***其他改进，则可能会引入问题**

 *```
{% if adminform.form.errors %} {# Delete this if you always want to see a validation #}
<script type="text/javascript">
  {% for field in adminform.form %}
    var field_input = document.getElementById("{{ field.auto_id }}");
    if (field_input) {
      field_input.classList.add("is-{% if field.errors %}in{% endif %}valid");
    } else {
      multi_widget_fields = document.querySelectorAll('[id^="{{ field.auto_id }}_"]')
      multi_widget_fields.forEach(function (element) {
        element.classList.add("is-{% if field.errors %}in{% endif %}valid");
      });
    }
  {% endfor %}
</script>
{% endif %} 
```*

# python - 无法根据用户输入输出形状

> ID：11321768
> 
> 赞同：-4
> 
> 时间：2012-07-04T02:44:14.860
> 
> 标签：python

该程序应该根据用户指定的数量`rows`和方法打印一个星号矩形。下面包括的是我目前正在使用的非工作代码：`asterisks``input()`

```
numRows = input('Please enter the number of rows: ')
numRows = eval(numRows)

numAst  = input('Please enter the number of asterisks in a row: ')
numAst  = eval(numAst) 

for i in range(numRows):
    print(numAst*'*') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T02:50:29.130

我怀疑你是在 Python2 下运行程序

这会给你

```
TypeError: eval() arg 1 must be a string or code object 
```

尝试使用 Python3 运行

注意：`eval`这样使用是危险的。为什么不`int`改用？

如果您需要 Python2 版本。替换`input`为`raw_input`和`eval`_`int`

```
numRows = raw_input('Please enter the number of rows: ')
numRows = int(numRows)
numAst  = raw_input('Please enter the number of asterisks in a row: ')
numAst  = int(numAst) 
for i in range(numRows):
    print(numAst*'*') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T02:51:32.657

它在我的机器上运行，确保在 eval 中传递字符串。检查这里[http://docs.python.org/library/functions.html#eval](http://docs.python.org/library/functions.html#eval)

# ruby-on-rails - Rails3：从回调中跳过回调

> ID：11321771
> 
> 赞同：1
> 
> 时间：2012-07-04T02:44:58.977
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, mongoid

我的模型中定义了以下`after_save`回调。

```
after_save :validate_image, :publish, :update_some_data, :send_notifications 
```

`after_save`是否可以根据某些条件跳过其余的回调`validate_image`，所以像这样 -

```
def validate_image
  if image_not_valid
    # skip rest of the callbacks in the after_save chain
    destroy # destroy this record
  end
end 
```

注意：- 我也在根据该条件销毁记录，并且我有一些需要执行的“after_destroy”回调。

我正在使用带有 Mongoid v2.4.10 的 Rails v3.2.6，但我想如果它是 ActiveRecord 不会有什么不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T04:43:39.333

像这样更改您的 before_save 定义

```
after_save do
   validate_image
   unless image_not_valid
       publish 
       update_some_data 
       send_notifications
   end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T00:58:48.173

使用 ActiveRecord：

[http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html](http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html)

> 如果 before_* 回调返回 false，则所有后面的回调和相关操作都将被取消。如果 after_* 回调返回 false，则取消所有后面的回调

使用常规回调，只有 before_* 回调一旦返回 false 就会停止

# sql-server - 将 2 列合并为 sql server 中的一列并显示在组合框中

> ID：11321772
> 
> 赞同：0
> 
> 时间：2012-07-04T02:45:13.237
> 
> 标签：sql-server, vb.net

我想将 2 列合并为一列并对齐第 2 列。

示例（我想将公司 ID 和名称组合为 1 列），

```
coid               coname

co1                company 1

comp2              company 2

companyid3         company 3 
```

* * *

如果我只是从 mytable 中选择 coid + ' ' + coname，那么它给我的结果是，

```
co1   company 1

comp2   company 2

companyid3   company 3 
```

我想对齐第 2 列（即 coname to like ），

```
co1                company 1

comp2              company 2

companyid3         company 3 
```

* * *

我的代码，（我正在尝试以下代码）-但仍未对齐

我正在尝试获取 coid 的最大长度，然后相应地添加。在上面例如只在第 3 条记录中添加 5 个空格，在第 2 条记录中添加 10 个空格，在第 1 条中添加 12 个空格。但仍然没有用可能是因为单个字符的宽度。任何人都有任何想法这样做。

```
Dim mySql As String = "declare @len1 int " & Chr(10)
mySql = mySql & "select @len1 =  max(len(coid)) from mytable" & Chr(10)
mySql = mySql & "select coid, coid + space(@len1-len(coyid)+5) + coname as coname from mytable order by coid" & Chr(10)
Dim sqladp As New SqlClient.SqlDataAdapter(mySql, _SqlCon.sqlCon) 
```

我想在组合框中显示这个。用户应从列表中选择公司。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T05:06:42.443

你可以试试这个。。

```
create table #t (compid varchar(10),name varchar(20))
go
insert into #t (compid ,name) 
SELECT 'Col1','Company ID -1'
union all
SELECT 'ID2','Compa -1'
union all
SELECT 'Comp3','Com ID -1'
union all
SELECT '4','Company-1'
go
select convert(char(10),compid) + SPACE(10) + convert(char(20),name) from #t
go
drop table #t 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T02:53:13.343

虽然我还没有看到任何看起来像这样的组合框，但
找到 conid 的最大长度并在所有字段中用 ' ' 填充，然后附加 coname ..

我想更好的格式是显示公司名称并在括号中显示 conid..

公司 1 (co1)
公司 2 (c02)

# jquery - jQuery函数之间传递的全局变量

> ID：11321773
> 
> 赞同：0
> 
> 时间：2012-07-04T02:45:17.070
> 
> 标签：jquery, function, variables, global-variables

我在 if...else 语句中设置一个变量。但是，当我尝试在另一个函数中调用该变量时，我收到未定义该变量的错误。如何设置全局变量？

```
function username_check(){  
username = $('#username').val();
if(username == "" || username.length < 7 || username.indexOf(' ') > -1){
    usernameFilled = 0;
else{
    usernameFilled = 1;
}   
}

function email_check(){ 
email = $('#email').val();
if(email == "" || email.indexOf(' ') > -1) {
    emailFilled = 0;
}else{
    emailFilled = 1;
}
}

function password_length(){ 
password = $('#password').val();
if(password == "" || password.indexOf(' ') > -1) {
    passwordFilled = 0;
}else{
    passwordFilled = 1;
}
}

function password_check(){  
  password2 = $('#password2').val();
  password = $('#password').val();
  if(password2.length > 7 && password2 == password) {
    password2Filled = 1; /**setting the variable**/
  }else{
    password2Filled = 0;
  }
}

function upload(){
if (usernameFilled == 0 || emailFilled == 0 || passwordFilled == 0 || password2Filled == 0) {
    alert('All fields are required');
}else{
    /**upload to database**/
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T02:58:30.330

您可能以错误的顺序调用函数，或者做错了其他事情，因为它对我来说工作得很好，稍微编辑代码来测试它：

```
function password_check(){  
  var password2 = $('#password2').val(), 
      password = $('#password').val();
  password2Filled = (password2.length > 7 && password2 == password) ? 1:0;
}

function upload(){
    console.log(password2Filled); //prints 0 or 1 just fine ???
}

$("#btn").on('click', function() {
    password_check();
    upload();
}); 
```

[小提琴](http://jsfiddle.net/pBXe6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T02:54:33.347

无需设置全局变量，只需返回 password2Filled 并将其保存在函数之外。然后你可以将它传递给下一个函数。

IE

```
function password_check(){  
   password2 = $('#password2').val();
   password = $('#password').val();
   if(password2.length > 7 && password2 == password) {
       password2Filled = 1; /**setting the variable**/
   }else{
       password2Filled = 0;
   }
   return password2Filled;
}

function upload(password2Filled)
{
    if (password2Filled == 0) { /**calling the variable**/
        alert('All fields are required');
    }else{
        /**upload to database**/
    }
}

....

var passwordsOk = password_check();
upload(passwordOk); 
```

尽量避免使用全局变量，它们会使程序混乱，难以查看代码流和创建可重用的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T02:48:28.983

您可以通过在所有函数范围之外定义全局变量来在 JavaScript 中创建全局变量。像这样：

```
<script type="text/javascript">
var globalVariable;

function blah()
{
    globalVariable = "something";
}

function anotherFunction()
{
    alert(globalVariable);
}
</script> 
```

[ECMAScript / JavaScript 文档](http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-262.pdf)声明应该在任何执行上下文之外创建“全局对象” 。

# python - Python Sqlite 添加一行

> ID：11321777
> 
> 赞同：1
> 
> 时间：2012-07-04T02:45:49.507
> 
> 标签：python, sql, sqlite

我有一个本地 sqlite 服务器。SQL 数据库只包含一个名为`flights`. 该表`flights`仅包含两列：`dt`和`flight`。它是这样创建的：`CREATE TABLE IF NOT EXISTS flight (dt INT NOT NULL, flight INT PRIMARY KEY);`. `dt`表示日期时间。此列`dt`包含每个航班的时间和日期戳。该`flight`列是每个航班的自动增量 ID。

我现在需要创建航班并记录 ID。但我认为我下面的方法非常愚蠢。必须有比这更好的方法。下面的代码不起作用，因此增加了我尝试的愚蠢性。它返回当前打印`(None,)`的 .

为了进一步澄清，我需要做的就是添加一个带有提供时间戳的航班。然后找到我刚刚创建的航班的id。应该足够简单。

```
t = (int(time.time()),)
conn, c = AT.startSQLdb()
c.execute("INSERT INTO flight VALUES (?,NULL);",t)
c.execute("SELECT flight FROM flight WHERE dt=?;",t)
print c.fetchone()
conn.commit() 
```

顺便说一句，`AT.startSQLdb()`它只是一个返回元组的方法`(sql connection, sql cursor)`。我只是将它作为一个函数来保持所有线程的启动功能相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T02:50:06.447

您可以使用此 SQL 选择最后一个自动分配的 id：

```
SELECT last_insert_rowid() 
```

顺便说一句：你提到线程，SQLite 对并发访问不是很好，所以要小心多线程。

# javascript - 如何将 history.js 与 jquery.pjax 集成？

> ID：11321778
> 
> 赞同：1
> 
> 时间：2012-07-04T02:46:03.907
> 
> 标签：javascript, html, pushstate, history.js, pjax

我开始玩 PJAX。但是有一个问题。IE9- 不支持 pushState。我发现 history.js 可以为旧浏览器提供 pushState 和 replaceState，但我不能在 jquery.pjax 中使用 history.js。谁在 jquery.pjax 中使用了 history.js？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:21:11.830

他们不一起工作，也不打算这样做。History.js 完成了 PJAX 所做的一切并且做得更好，因此无需将两者混为一谈。

# c# - 不支持实体框架 4.3 Windows Azure 关键字：“元数据”

> ID：11321781
> 
> 赞同：1
> 
> 时间：2012-07-04T02:46:21.660
> 
> 标签：c#, asp.net-mvc, entity-framework, azure

我的代码在本地工作，连接字符串指向 AZURE SQL SERVER。但是，一旦我发布到 Azure 网站，每个带有 EF 模型的视图都会引发此错误。我已将“更改为”作为建议的解决方案之一，没有任何效果。我卡住了！！

```
 System.Data.EntityException: The underlying provider failed on ConnectionString. ---> System.ArgumentException: Keyword not supported: 'metadata'.
   at System.Data.Common.DbConnectionOptions.ParseInternal(Hashtable parsetable, String connectionString, Boolean buildChain, Hashtable synonyms, Boolean firstKey)
   at System.Data.Common.DbConnectionOptions..ctor(String connectionString, Hashtable synonyms, Boolean useOdbcRules)
   at System.Data.SqlClient.SqlConnectionString..ctor(String connectionString)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnectionOptions(String connectionString, DbConnectionOptions previous) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T03:01:27.543

如果您的连接字符串中有**MultipleActiveResultSets=True**，那么请将其**删除**，并且相同的连接字符串应该可以在 Windows Azure 中使用。我发现这是您遇到的最常见的错误。

如果不是这种情况，请发布您的连接字符串，我会看看。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-29T04:09:05.723

我和 OP 有同样的问题，但他的解决方案对我不起作用。

这是一个连接字符串问题，但不是引号。

由于我花了两天时间解决，也许这对其他人有帮助：

在 Azure 上托管时适用于我的 ASP.NET MVC 4.5/Entity Framework 5.0 应用程序的连接字符串*（我在本地针对 SQL Server 2012 进行开发，但将数据库迁移到 Azure SQL 数据库（使用[SQL 数据库迁移向导](http://sqlazuremw.codeplex.com/)））。我首先使用数据库来创建我的 .edmx 文件（我从数据库生成（数据）模型）]*是：

```
<add name="MYPROJECTENTITIES" connectionString="**metadata=**res://*/MODELS.MYPROJECTMODEL.csdl|res://*/MODELS.MYPROJECTMODEL.ssdl|res://*/MODELS.MYPROJECTMODEL.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=tcp:B6JD5K5EP4.database.windows.net,1433;Initial Catalog=MYPROJECT_DB;Integrated Security=False;User ID=MYPROJECT@B6JD5K5EP4;Password=MYPASSWORDABC123;**MultipleActiveResultSets=True**;Encrypt=True;TrustServerCertificate=False&quot;" providerName="System.Data.EntityClient"/> 
```

大写的文本是我的 Azure 信息。显然，您需要使用自己的。

连接字符串的这一部分给了我噩梦，它也可能导致您的问题：

```
res://*/Models.MyProjectModel.csdl|res://*/Models.MyProjectModel.ssdl|res://*/Models.MyProjectModel.msl 
```

*这些引用必须完全正确*。让我重复一遍：*那些参考必须完全正确！*

After reading [this article from 2008](http://blogs.teamb.com/craigstuntz/2010/08/13/38628/) ("Troubleshooting Entity Framework Connection Strings"), I used .NET Reflector to look inside the MyProjectModel.dll (the name of my .dll (likely different in your project) like he suggests and, sure enough, the connection string (that was generated automatically for me by the Entity Framework!) was wrong. It didn't include a prefix. As soon as I added **Models.** prefix (which is how the .csdl/.msl/.ssdl are named inside of my .dll (likely different in yours)), everything worked great. Have a look inside your .dll and see if the names match. If not, change them to match what appears in the .dll. (Read the article above if what I'm saying isn't clear enough.)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-03T09:31:10.937

I had to change the connection string type to Custom in Azure portal.

[![enter image description here](../Images/d9e47a186aca1d3e688aa06e5083882a.png)](https://i.stack.imgur.com/wJQ2M.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-21T20:44:32.043

Here is my answer on another SO thread that might be helpful. Steps I have mentioned there include an end-to-end configuration of connection string on Azure and dynamically using it. And yes, it fixes the error in question!

[https://stackoverflow.com/a/37938912/3785895](https://stackoverflow.com/a/37938912/3785895)

**More Info:** Along with changing the providerName, there are a few extra bits we might need to check. Azure seems to be updating the web.config file after publishing the API App/Web App.

# java - 如何向 Varargs 添加新元素？

> ID：11321784
> 
> 赞同：10
> 
> 时间：2012-07-04T02:46:54.753
> 
> 标签：java, variadic-functions

我有一个方法

```
public boolean findANDsetText  (String Description, String ... extra ) { 
```

在里面我想调用另一个方法并传递它，`extras`但我想将新元素（描述）添加到附加组件中。

```
 object_for_text = getObject(find_arguments,extra); 
```

我怎么能在java中做到这一点？代码会是什么样子？

我厌倦了容纳[这个问题](https://stackoverflow.com/questions/7687342/how-to-add-new-element-into-an-array)的代码，但无法让它工作。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-04T03:01:56.357

要扩展此处的其他一些答案，可以使用以下方法更快地完成数组复制

```
String[] newArr = new String[extra.length + 1];
System.arraycopy(extra, 0, newArr, 0, extra.length);
newArr[extra.length] = Description; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-10-04T09:58:08.980

使用`Arrays.copyOf(...)`：

```
String[] extra2 = Arrays.copyOf(extra, extra.length+1);
extra2[extra.length] = description;

object_for_text = getObject(find_arguments,extra2); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-04T02:51:13.917

`extra`只是一个`String`数组。像这样：

```
List<String> extrasList = Arrays.asList(extra);
extrasList.add(description);
getObject(find_arguments, extrasList.toArray()); 
```

您可能需要弄乱`extrasList.toArray()`.

您可以更快但更详细：

```
String[] extraWithDescription = new String[extra.length + 1];
int i = 0;
for(; i < extra.length; ++i) {
  extraWithDescription[i] = extra[i];
}
extraWithDescription[i] = description;
getObject(find_arguments, extraWithDescription); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-04T02:52:53.447

你的意思是这样的吗？

```
public boolean findANDsetText(String description, String ... extra)
{
    String[] newArr = new String[extra.length + 1];
    int counter = 0;
    for(String s : extra) newArr[counter++] = s;
    newArr[counter] = description;

    // ...

    Foo object_for_text = getObject(find_arguments, newArr);

    // ...
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T02:58:55.243

简直就是这样……

如下对待 Var-args...

**例子：**

在您上面的示例中，第二个参数是“String ... extra”

所以你可以这样使用：

```
extra[0] = "Vivek";
extra[1] = "Hello"; 
```

**或者**

```
for (int i=0 ; i<extra.length ; i++)

  {

          extra[i] = value;

  } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-12-03T19:20:19.290

使用 Java 11 作为新列表的参数：

```
List<String> templateArguments = new ArrayList<(Arrays.asList(args));
templateArguments.add(throwable.getMessage());
String.format(template, templateArguments.toArray()); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-02-10T15:04:16.103

转换为列表并返回数组，但使用实用函数更短：

```
// import com.google.common.collect.Lists;

var descriptionAndExtra
    = Lists.asList(description, extra).toArray(new String[extra.length + 1])); 
```

# maven - 在 Intellij IDEA 中使用 maven 时如何禁用自动依赖项目而不是唯一的 jar？

> ID：11321789
> 
> 赞同：0
> 
> 时间：2012-07-04T02:47:36.550
> 
> 标签：maven, intellij-idea, dependency-management, pom.xml

我在 Intellij IDEA 11.1.2 中使用 Maven，我正在处理两个不同的项目，其中一个依赖于另一个。

项目 A 的 pom.xml 如下

```
 <dependency>
        <groupId>project.b</groupId>
        <artifactId>project.b</artifactId>
        <version>1.0-SNAPSHOT</version>
    </dependency> 
```

然后 IntellIj IDEA 会自动依赖项目 B。有时我可以使用 mvn 命令行编译项目 A，但 IDEA 显示源代码中有很多错误，解决此问题的唯一方法是从本地文件中删除项目 b系统然后将其从 IDEA 中删除。

所以我想让 IDEA 自动依赖项目，但只依赖 jar 并执行 pom.xml 告诉它执行的操作。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T15:55:19.737

正如@CrazyCoder 所说，

> SNAPSHOT 依赖项通过项目源位置解决

我只是接受事实。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T06:08:07.863

我相信你应该调整[依赖范围](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Dependency_Scope)。尝试将范围指定为`runtime`- *“此范围表示依赖项不是编译所必需的，而是执行所必需的。它在运行时和测试类路径中，但不在编译类路径中。”*

# nginx - 通过套接字到 Unicorn 的 Keepalived 上游连接

> ID：11321790
> 
> 赞同：4
> 
> 时间：2012-07-04T02:47:53.743
> 
> 标签：nginx, unicorn

Nginx 1.1.4+ 可以使用 HTTP1.1 **keepalive**指令提供上游连接，请参阅[官方文档](http://nginx.org/en/docs/http/ngx_http_upstream_module.html#keepalive)（它与 keepalived 客户端的连接不同）。所以 Unicorn 配置如下所示：

```
upstream unicorn {
  server             unix:/tmp/unicorn.todo.sock fail_timeout=0;
  keepalive          4;
}

server {
  try_files          $uri/index.html $uri @unicorn;
  keepalive_timeout  70;

  location @unicorn {
    proxy_set_header   X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header   Host $http_host;
    proxy_redirect     off;
    proxy_pass         http://unicorn;

    proxy_http_version 1.1;
    proxy_set_header   Connection "";
  }
} 
```

HTTP 连接需要这些标头：**proxy_http_version**和**proxy_set_header**。

所以问题是配置有效还是套接字连接本身是永久的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T21:14:45.240

是的，它是有效的。就 HTTP Keepalive 而言，UNIX 套接字和 TCP/IP 套接字之间没有区别。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-15T13:01:19.210

Unicorn 不支持设计上的持久（保持活动）连接。所以，你不应该尝试使用持久（保持活动）连接到独角兽后端。

# jquery - 为什么 onclick 函数在类上不起作用？

> ID：11321791
> 
> 赞同：0
> 
> 时间：2012-07-04T02:48:23.997
> 
> 标签：jquery, node.js, click

我正在使用 JQuery 和 Node.js 运行 Drupal 7。我希望在 div onclick 事件中发生一个事件。但是，它不适用于类，但如果我使用父 div id 则它可以工作。

我遇到的问题是：

```
 $(document).ready(function() {

  $('.chatNickname').click(function(){ 
alert("hello");
  }); 
```

代码片段在 jsfiddle 中工作..不确定问题是什么。整个代码如下：

```
<script src="http://<?php print $_SERVER['SERVER_ADDR'] ?>:8080/socket.io/socket.io.js"></script>
<script>
  (function($){
    var myNick = 'me';
    var newlyJoined = true;
    var socket = io.connect('http://<?php print $_SERVER['SERVER_ADDR'] ?>:8080');

    socket.on('connect', function () {
      $('#chat').addClass('connected');
    });

    socket.on('announcement', function (msg) {
      $('#lines').append($('<p>').append($('<em>').text(msg)));
    });

    socket.on('nicknames', function (nicknames) {
    $('#nicknames').empty().append($('<span>Online: </span>'));
      for (var i in nicknames) {
    $('#nicknames').append($('<div class="chatNickname" id="' + nicknames[i] + '">').text(nicknames[i]));
      }
    });

    socket.on('user message', message);
    socket.on('reconnect', function () {
      $('#lines').remove();
      message('System', 'Reconnected to the server');
    });

    socket.on('reconnecting', function () {
      message('System', 'Attempting to re-connect to the server');
    });

    socket.on('error', function (e) {
      message('System', e ? e : 'A unknown error occurred');
    });

    socket.on('chat log', function(chatlog) {
      if (newlyJoined) {
    var i = 0;
    for (stamp in chatlog) {
      if (chatlog[stamp].type == 'user message') {
        var ts   = tstamp(stamp);
        var nick = chatlog[stamp].nick
        var msg  = chatlog[stamp].msg
        message(ts, nick, msg);
        i++;
      }
    }
    if (i > 0) {
      $('#lines').append($('<hr>')).append($('<small style="text-align:center; display:block; color: #888;">').text('Chat messages posted within the past half hour appear above this line.')).append($('<hr>'));
      $('#lines').get(0).scrollTop = 10000000;       
    }
    newlyJoined = false;
      }
    });

    function message (msg_time, from, msg) {
      $('#lines').append($('<p>').append($('<small>').text(msg_time)).append($('<b>').text(from), linkify(msg)));
    }

    function linkify(inputText) {
      //URLs starting with http://, https://, or ftp://
      var replacePattern1 = /(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gim;
      var replacedText = inputText.replace(replacePattern1, '<a href="$1" target="_blank">$1</a>');

      //URLs starting with www. (without // before it, or it'd re-link the ones done above)
      var replacePattern2 = /(^|[^\/])(www\.[\S]+(\b|$))/gim;
      var replacedText = replacedText.replace(replacePattern2, '$1<a href="http://$2" target="_blank">$2</a>');

      //Change email addresses to mailto:: links
      var replacePattern3 = /(\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,6})/gim;
      var replacedText = replacedText.replace(replacePattern3, '<a href="mailto:$1">$1</a>');

      return replacedText
    }

    function tstamp(stamp) {
      var currentTime = new Date(); 
      if (typeof stamp != 'undefined') {
    currentTime.setTime(stamp);
      }
      var days = new Array('Sun', 'Mon', 'Tue', 'Wed', 'Thr', 'Fri', 'Sat');
      var day = currentTime.getDay();
      var hours = currentTime.getHours();
      var minutes = currentTime.getMinutes();
      if (minutes < 10) {
    minutes = "0" + minutes;
      }
      if (hours > 11) {
    var ap = 'p';
      }
      else {
    var ap = 'a';
      }
      if (hours > 12) {
    hours = hours - 12;
      }
      return "["+ days[day] + " " + hours + ":" + minutes + ap + "m] ";
    }

    $(document).ready(function() {

      $('#nicknames .chatNickname').click(function(){ 
    alert("hello");
      });

      $('input#message').focus(function() {
    if ($(this).val() == 'Type your chat messages here...') {
      $(this).val('');
    }
      });

      $('input#show-timestamps').click(function() {
    if ($(this).is(':checked')) {
      $('#messages p small').show();
    }
    else {
      $('#messages p small').hide();
    }
      })

      socket.emit('nickname', '<?php print $username ?>', function (nick) {
    if (nick != 'me') {
      myNick = nick;
      socket.emit('get log');          
      return $('#chat').addClass('nickname-set');
    }
      });

      $('#send-message').submit(function () {
    message(tstamp(), myNick, $('#message').val());
    socket.emit('user message', $('#message').val());
    clear();
    $('#lines').get(0).scrollTop = 10000000;
    return false;
      });

      function clear () {
    $('#message').val('').focus();
      };

    });
  })(jQuery);
</script>
<div id="chat">
  <div id="messages">
    <div id="nicknames">
    </div>
    <div id="lines">
    </div>
  </div>
  <form id="send-message" autocomplete="off">
    <input id="message" type="text" value="Type your chat messages here..." autocomplete="off" />
    <button>Send</button>
  </form>
</div>
<small><input id="show-timestamps" type="checkbox" checked="checked" /> Show timestamps</small> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T03:03:09.083

您正在使用套接字并在附加单击处理程序后附加元素。这意味着在设置原始点击处理程序时该元素不存在。您需要将事件委托给更高的元素，如下所示：

```
$('#nicknames').on('click', '.chatNickname', function(){ 
   alert("hello");
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T02:50:31.903

如我所见，您正在动态添加元素，请尝试以下操作：示例演示：http: [//jsfiddle.net/CGxyj/](http://jsfiddle.net/CGxyj/)

API: `.on`: [http://api.jquery.com/on/](http://api.jquery.com/on/)

```
$(document).ready(function() {

  $('.chatNickname').on('click', function(){ 
       alert("hello");
  });

}); // this was not closed wither 
```

# css - 减少滚动链接之间的空间

> ID：11321793
> 
> 赞同：0
> 
> 时间：2012-07-04T02:48:31.003
> 
> 标签：css

样本：

```
<!DOCTYPE html>
<html>
<head>
<title></title>
   <style type="text/css">
    #container {width:300px; overflow-x:auto; overflow-y:hidden; white-space:nowrap;}
    img {border:0;}
   </style>
</head>
<body>
   <div id="container">
    <a href="#"><img src="http://lh3.googleusercontent.com/-hUXeHq5OxEo/Thc7hFFv3gI/AAAAAAAAABQ/Yh7omR8iwzI/s800/thumb1.jpg" alt=""></a>
    <a href="#"><img src="http://lh3.googleusercontent.com/-hUXeHq5OxEo/Thc7hFFv3gI/AAAAAAAAABQ/Yh7omR8iwzI/s800/thumb1.jpg" alt=""></a>
    <a href="#"><img src="http://lh3.googleusercontent.com/-hUXeHq5OxEo/Thc7hFFv3gI/AAAAAAAAABQ/Yh7omR8iwzI/s800/thumb1.jpg" alt=""></a>
    <a href="#"><img src="http://lh3.googleusercontent.com/-hUXeHq5OxEo/Thc7hFFv3gI/AAAAAAAAABQ/Yh7omR8iwzI/s800/thumb1.jpg" alt=""></a>
    <a href="#"><img src="http://lh3.googleusercontent.com/-hUXeHq5OxEo/Thc7hFFv3gI/AAAAAAAAABQ/Yh7omR8iwzI/s800/thumb1.jpg" alt=""></a>
   </div>
</body>
</html> 
```

如何将链接之间的空间减少到 1px？

提前谢谢了！

麦克风

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T09:56:29.790

This should hopefully work:

```
* {padding:0;margin:0;}
div#container {overflow:auto;}
img {float:left;margin-right:1px;border:0;} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T02:50:43.540

删除它们之间的空格。将它们全部放在一条线上，否则它们之间会出现空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T04:35:28.957

`vertical-align:top;`嘿，像这样在你的 CSS 中添加 img 属性

```
img {
    border: 0 none;
    vertical-align: top;
} 
```

现场演示[http://jsfiddle.net/nZKv8/](http://jsfiddle.net/nZKv8/)

# android - Android 发布步骤

> ID：11321796
> 
> 赞同：0
> 
> 时间：2012-07-04T02:48:32.493
> 
> 标签：android, eclipse, google-play

我对准备要发布的应用程序的步骤有一些疑问。我已经达到了[准备发布](http://developer.android.com/tools/publishing/preparing.html#publishing-build)指南的步骤。所以我只需要做剩下的这些步骤吗？

1.  我使用 Eclipse，使用导出向导导出应用程序。但是，在使用 Eclipse 构建部分：

    > 导出向导编译您的应用程序以供发布，使用您的私钥签署您的应用程序，并使用 zipalign 工具优化您的应用程序。

    我需要再次压缩对齐吗？

2.  混淆应用程序。

如果我错过了什么，请随时编辑我的帖子。非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T02:56:57.647

不，您不需要再次运行 zipalign。当您导出已签名的应用程序包时，ADT 将为您执行此操作。

你不需要自己混淆你的代码，只要你正确配置了[ProGuard](http://developer.android.com/tools/help/proguard.html)。当您导出已签名的应用程序包（以发布模式构建您的应用程序）时，ProGuard 将为您混淆您的代码。

`proguard.config=proguard.cfg`如果项目根目录中有自动生成的 proguard.cfg，则启用 proguard 就像添加到 project.properties 文件一样简单。

您真的只需要按照[签名说明](http://developer.android.com/tools/publishing/app-signing.html#align)进行操作。它们非常简单，将指导您完成所有必要的步骤。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T03:09:21.187

不需要 zipalign 工具。
当您使用导出 Android 应用程序向导创建 apk 时 - 只需按照步骤操作，它会为您创建一个私钥，以防您没有私钥。
这些是*[确切的步骤](http://developer.android.com/tools/publishing/app-signing.html#ExportWizard)*（完成了！）：

> 要在 Eclipse 中创建签名并对齐的 APK：
> 
> 1.  在 Package Explorer 中选择项目，然后选择 File > Export。
> 2.  打开 Android 文件夹，选择导出 Android 应用程序，然后单击下一步。导出 Android 应用程序向导现在启动，它将指导您完成对应用程序进行签名的过程，包括选择用于签署 APK 的私钥（或创建新的密钥库和私钥）的步骤。
> 3.  完成导出向导，您的应用程序将被编译、签名、对齐并准备好分发。

# validation - jQuery 验证器将字段标记为有效

> ID：11321799
> 
> 赞同：1
> 
> 时间：2012-07-04T02:49:10.377
> 
> 标签：validation, jquery, jquery-plugins

是否可以使用 jQuery 验证器将字段标记为有效，或者以另一种方式询问远程其关联的错误映射。我正在使用两种自定义 ajax 验证方法，这意味着我的验证方法不能返回 true 或 false。因此，我尝试使用 showErrors: { field: false } 隐藏错误（并标记 validator.invalid.field=false），但我猜测仍然保留了一些错误映射，这会阻止表单在 onsubmit: true 时提交。如果我设置 onsubmit: true 表单将提交，即使其中一个 ajax 验证字段显示错误！

```
$(document).ready(function () {

    var validator = $(".formframe").validate({
        groups: { phone: "phone_1 phone_2 phone_3" },
        rules: {
            FirstName: { required: true },
            LastName: { required: true },
            Email: { required: true, email_custom: true },
            phone_1: { required: true }, // these two fields get a phone validation rule
            phone_2: { required: true }, // added upon validation triggered by phone_3 
            phone_3: { required: true, phone: true },
            Address1: { required: true },
            City: { required: true },
            PostalZipCode: { required: true, postalcode: true },
            CustField1: { required: true, range: [1950,2012] }
        },
        messages: {
            FirstName: "S'il vous plaît entrer votre prénom",
            LastName: "S'il vous plaît entrer votre nom de famille",
            Email: "S'il vous plaît entrer une adresse email valide",
            phone_1: "S'il vous plaît entrer votre numéro de téléphone",
            phone_2: "S'il vous plaît entrer votre numéro de téléphone",
            phone_3: {
                required: "S'il vous plaît entrer votre numéro de téléphone",
                phone: "Numéro de téléphone doit être réel"
            },
            Address1: "S'il vous plaît, entrer votre adresse",
            City: "S'il vous plaît, entrer votre ville",
            PostalZipCode: {
                required: "S'il vous plaît entrer votre code postal",
                postalcode: "S'il vous plaît entrer votre code postal"
            },
            CustField1: {
                required: "S'il vous plaît entrer votre dernière année d'études",
                range: "Entrer une année de l'obtention du diplôme réel"
            }
        },
        onfocusout: function(element) { $(element).valid(); },
        errorPlacement: function(error, element) {
            if (element.attr("name") == "phone_1" || element.attr("name") == "phone_2" || element.attr("name") == "phone_3") {
                error.insertAfter("#phone_3");
            } else {
                error.insertAfter(element);
            }
        },
        onkeyup: false,
        onsubmit: true
    }); console.log(validator);

    // custom email validation method
    $.validator.addMethod("email_custom", function(value, element) {
        var verify = $.tdverify({
            // Use TowerData's domain authentication for best security 
            // or set your license key here
            'license' : 'xxx', 

            // This is the data to validate
            // The values here are the IDs of the input fields.
            // See demo.js on how to use jQuery or DOM to specify fields.
            'email' : $('#Email'),
        });

        // These are the API settings. 
        verify.set({
            'settings' : {
                'valid_email' : 'mailbox',  // Enable email validation of mailbox.
                                            // Use value of 'syntaxdomain' for syntax and 
                                            // domain validation only.
                'timeout'    : 5            // Set timeout to 5 seconds
            }
        });

        // because this function uses a callback, we can't return true to the validation
        // method, instead we set validator.invalid.[field name] = false so the form submits
        verify.process({
            'onSuccess' : function(data, textStatus, xhr) {
                if (typeof data.email == "object" && data.email.ok == false) {
                    //validator.showErrors({"Email": data.email.status_desc});
                    validator.defaultShowErrors();
                } else {
                    validator.showErrors({"Email": false});
                    delete validator.invalid["Email"];
                    console.log(validator);
                } 
            },
            'onError' : function() {
                validator.showErrors({"Email": "Email validation timeout"});
            }
        });
    });

    // custom phone validation method
    $.validator.addMethod("phone", function(value, element) {

        // concatenate phone number parts into a single hidden field
        $("#phone").val($("#phone_1").val() + $("#phone_2").val() + $("#phone_3").val());
        // initially only phone_3 has validation enabled, this allows the phone number to be
        // typedfrom start to finish, adding the phone class to phone_1 and phone_2
        // will cause them to be validated if they are changed
        $("#phone_1,#phone_2").addClass("phone");

        var verify = $.tdverify({
            // Use TowerData's domain authentication for best security 
            // or set your license key here
            'license' : 'xxx', 

            // This is the data to validate
            // The values here are the IDs of the input fields.
            // See demo.js on how to use jQuery or DOM to specify fields.
            'phone' : $("#phone")
        });

        // These are the API settings. 
        verify.set({
            'settings' : {
                'valid_phone' : true,       // Enable phone validation
                'timeout'    : 5            // Set timeout to 5 seconds
            }
        });

        verify.process({
            'onSuccess' : function(data, textStatus, xhr) {
                if (typeof data.phone != "undefined" && data.phone.ok == false) {
                    //validator.showErrors({"phone": data.phone.status_desc});
                    validator.defaultShowErrors();
                } else {
                    validator.showErrors({"phone_3": false});
                    delete validator.errorMap["phone_1"];
                    delete validator.errorMap["phone_2"];
                    delete validator.errorMap["phone_3"];
                    delete validator.invalid["phone_1"];
                    delete validator.invalid["phone_2"];
                    delete validator.invalid["phone_3"];
                    console.log(validator);
                }               
            },
            'onError' : function() {
                validator.showErrors({"phone_3": "Phone validation timeout"});
            }
        })
    });

    $.validator.addMethod("postalcode", function(postalcode, element) {
        if(postalcode.length == 6 && !parseInt(postalcode)){
            // no space in postal code
            var s = postalcode.substring(0,3) + ' ' + postalcode.substring(3);
            element.value = s;
        }
        return this.optional(element) || postalcode.match(/(^[ABCEGHJKLMNPRSTVXYabceghjklmnpstvxy]{1}\d{1}[A-Za-z]{1} ?\d{1}[A-Za-z]{1}\d{1})$/);
    });

    // phone number auto-tabbing
    $('#phone_1').autotab({ target: 'phone_2', format: 'numeric' });
    $('#phone_2').autotab({ target: 'phone_3', format: 'numeric', previous: 'phone_1' });
    $('#phone_3').autotab({ previous: 'phone_2', format: 'numeric' });
    $("#PostalZipCode").autotab_filter('alphanumeric');

    // allows only numeric input:
    // this keydown binding won't allow letters at all, the above autotab
    // numeric format simply removes anything typed that isn't within 0-9
    $("#phone_1,#phone_2,#phone_3,#CustField1").keydown(function(event) {
        // Allow: backspace, delete, tab, escape, and enter
        if ( event.keyCode == 46 || event.keyCode == 8 || event.keyCode == 9 || event.keyCode == 27 || event.keyCode == 13 || 
            // Allow: Ctrl+A
            (event.keyCode == 65 && event.ctrlKey === true) || 
            // Allow: home, end, left, right
            (event.keyCode >= 35 && event.keyCode <= 39)) {
                // let it happen, don't do anything
                return;
        } else {
            // Ensure that it is a number and stop the keypress
            if (event.shiftKey || (event.keyCode < 48 || event.keyCode > 57) && (event.keyCode < 96 || event.keyCode > 105 )) {
                event.preventDefault(); 
            }
        }
    });

    // automatically capitalize letters in postal code  
    $("#PostalZipCode").keyup(function() {
        $(this).val(($(this).val()).toUpperCase());
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T20:31:45.660

在将“取消”类添加到阻止验证 onsubmit 的提交按钮后，我能够让 submitHandler 执行。我尝试设置 onsubmit: false 但随后允许提交无效表单。奇怪的是，设置 onsubmit: true （默认行为）并将 class="cancel" 添加到提交按钮会在表单有效并且不允许提交无效表单时触发 submitHandler。

这是我的 submitHandler ，它检查是否 validator.invalid 为空并且没有空字段。这可以防止在所有字段为空时提交。我确信有一种更优雅的方法可以删除自定义 ajax 验证方法（与之相关的 $ 费用）并让表单在提交之前使用所需的规则重新验证。

```
submitHandler: function(form) {
    var emptyFields = false;
    $(":input").each(function() {
        if ($(this).val() === "") emptyFields = true;
    });
    if ($.isEmptyObject(validator.invalid) && !emptyFields) { // all is valid, submit
        form.submit();
    } else {
        alert("Please correct some errors");
    }
} 
```

此外，为了让 form.submit() 在 Safari 中工作，我必须将其名称从 name="submit" 更改为 name="send"（提交以外的其他名称），请参阅以下链接： [http://www. luqmanmarzuki.com/read/20101222/jquery_form_validation_not_submitting_in_safari.html](http://www.luqmanmarzuki.com/read/20101222/jquery_form_validation_not_submitting_in_safari.html) [http://api.jquery.com/submit/#comment-106178333](http://api.jquery.com/submit/#comment-106178333)

这是另一个解决方案： [JQuery Validate - class="cancel" submit button only stop validation once](https://stackoverflow.com/questions/2850662/jquery-validate-class-cancel-submit-button-only-stops-validation-once)

# php - 我应该如何分隔正则表达式字符串？

> ID：11321802
> 
> 赞同：3
> 
> 时间：2012-07-04T02:49:23.120
> 
> 标签：php, regex, delimiter

我想在 mysql 数据库的文本字段中存储一些正则表达式。目前我最好的想法是为我的分隔符使用不规则的符号模式。例子：

```
$delim = '!@#$%';
$regex1 = '/^(.+)$/';
$regex2 = '/.(.+)./';
$regex3 = '/(\s+):\/\//';
$string = $regex1.$delim.$regex2.$delim.$regex3; 
```

然后将 $string 存储在数据库中。要检索我会使用类似的东西：

```
$array = explode($delim,$string); 
```

我想知道的是，是否有一种更好、更准确的方法，而不仅仅是希望我的定界符不出现在其中一个正则表达式中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T02:50:54.760

是的，更好的方法。将它们放入数据库和或将它们拉出时使用[`serialize()`](http://ca2.php.net/serialize)或。[`json_encode()`](http://ca2.php.net/json_encode)[`unserialize()`](http://ca2.php.net/unserialize)[`json_decode()`](http://ca2.php.net/manual/en/function.json-decode.php)

这样做的好处是不会以灾难性的方式失败，最终导致您永远进行调试。

```
<?php
$string = json_encode( array( $regex1, $regex2, $regex3 ) );

// Later
$array = json_decode( $string ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T02:51:41.123

为什么不使用空字节，`\0`？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T03:06:53.527

我们使用数据库的原因之一是我们不必自己想出分隔符，而是可以让数据库处理数据的存储方式。

现在，您正在发明自己的数据结构，即使您的数据库可以自己完成这一切。

我想说的是：您应该将正则表达式的每个部分存储在自己的行中，让您的 DBMS 担心其余部分。

# ruby-on-rails - 如何使用 HAML 在 Rails3 中呈现 JSON 视图？

> ID：11321809
> 
> 赞同：1
> 
> 时间：2012-07-04T02:50:18.813
> 
> 标签：ruby-on-rails, ruby-on-rails-3, json, haml

我想让我的控制器呈现 json 视图，因为 .json.haml ...这可能吗？语法是什么样的？还是我需要为 JSON 模板使用其他东西？比如[http://inem.github.com/tequila.html](http://inem.github.com/tequila.html)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T03:01:55.107

HAML 旨在用于生成 HTML 标记。

如果您需要渲染 json，只需在控制器中将`render`传递`:json`作为选项调用：

```
render :json => my_object 
```

或者，如果您有更复杂的数据结构和/或需要更大的灵活性，请尝试[JSON Builder](http://github.com/dewski/json_builder)，它是 JSON 的模板引擎，类似于 Rails 中提供的 XML 构建器。

# python - 在 Python 中经过身份验证的 POST 以插入 Google Fusion Tables

> ID：11321815
> 
> 赞同：3
> 
> 时间：2012-07-04T02:50:36.263
> 
> 标签：python, post, insert, google-fusion-tables

抱歉，如果这是基本的东西 - 我已经尝试了一段时间成功地将经过身份验证的 POST 发送到 Google Fusion Tables 以测试插入到私有表中。

已阅读融合表文档中的示例和库 - 但示例似乎通常是选择（与插入相比）并且可用于 Python 的库似乎不适用于 OAuth 2.0。

我已经成功-

1.  使用 OAuth 2.0 进行身份验证。拥有访问令牌和刷新令牌。
2.  我可以直接从 Google 示例中使用以下代码在私人表上进行选择：

    ```
    request = urllib2.Request(
    url='https://www.google.com/fusiontables/api/query?%s' % \
    (urllib.urlencode({'access_token': access_token,
                       'sql': 'SELECT * FROM 1cRYFfBB_nA0qUSAe6R8vI96G2yxIULrX92FOum4'})))
    request_open = urllib2.urlopen(request)
    response = request_open.read()
    request_open.close()
    print response 
    ```

使用以下代码进行 POST

```
import httplib, urllib, urllib2
query = 'INSERT INTO 1cRYFfBB_nA0qUSAe6R8vI96G2yxIULrX92FOum4 (locations, strings, numbers) VALUES (1,2,3);'
data = urllib.urlencode({'sql': query})
URL = 'https://www.googleapis.com/fusiontables/v1/query'
headers = {
      'Authorization': 'GoogleLogin auth=' + access_token,
      'Content-Type': 'application/x-www-form-urlencoded',
    }
    serv_req = urllib2.Request(url=URL, data=data, headers=headers)
    serv_resp = urllib2.urlopen(serv_req) 
```

我收到 HTTPError：HTTP 错误 401：未经授权

这是在我可以在具有相同 access_token 的私有表上运行 Select 之后 - 我假设我有代码或语法问题。

另外 - 我是 Python 新手和 Fusion Tables 新手 - 提前感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T05:15:19.767

requests-oauth 可能值得一看：[https ://github.com/maraujop/requests-oauth](https://github.com/maraujop/requests-oauth)

# .htaccess - .htaccess mod_rewrite 子域

> ID：11321816
> 
> 赞同：0
> 
> 时间：2012-07-04T02:50:41.973
> 
> 标签：.htaccess, mod-rewrite

.ht 访问：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{HTTP_HOST} ^site\.com$ [NC]
RewriteRule ^(.*)$ http://www.site.com/$1 [L,R=301]
RewriteRule ^new/?$ index.php?section=new 
```

这很好用，但我最近实现了一个从目录`m.site.com`中读取的子域。`/mobile`访问`m.site.com/new`时，除了返回服务器错误外，不会显示任何内容。我能做些什么来纠正这个问题？

基本上，我想要`http://m.site.com/new`

达到同样的效果`http://www.site.com/new`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T08:11:49.590

您可以指向`m.site.com`然后`/`：

```
RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{HTTP_HOST} ^site\.com$ [NC]
RewriteRule ^(.*)$ http://www.site.com/$1 [L,R=301]

# here i added [L] flag to stop rules matching
RewriteRule ^new/?$ index.php?section=new [L]

# everything that is not in new/* will still get redirected to the "old" mobile site
RewriteCond %{HTTP_HOST} ^m\.site\.com$
RewriteRule (.*) /mobile/$1 [L,QSA] 
```

# android - 如何在 Android 上使用硬件加速视频解码？

> ID：11321825
> 
> 赞同：35
> 
> 时间：2012-07-04T02:51:40.813
> 
> 标签：android, video, h.264, hardware-acceleration, stagefright

我需要一个研究项目的硬件加速 H.264 解码，以测试自定义协议。

当我在网上搜索时，我发现了几种在 Android 上执行硬件加速视频解码的方法。

1.  使用**ffmpeg** libstagefright（libstagefright[概述](http://freepine.blogspot.com/2010/01/overview-of-stagefrighter-player.html)）或直接在操作系统中使用 libstagefright，如此[处](https://stackoverflow.com/questions/9832503/android-include-native-stagefright-features-in-my-own-project)。
2.  在特定硬件平台上使用**OpenMax 。**喜欢[这里关于三星设备](http://forum.samdroid.net/f53/hw-video-decoding-3195/)和[这里关于高通骁龙系列](https://developer.qualcomm.com/blog/under-hood-video-acceleration-hardware)
3.  有人提到**PVplayer**，

有些人[“说”](https://stackoverflow.com/questions/9098167/ffmpeg-android-stagefright-sigsegv-error-h264-decode) libstagefright 是唯一的方法，而高通公司的人显然已经取得了成功。

**目前我不确定哪种方式可行**。我现在有点困惑。如果一切正常，我当然更喜欢独立于硬件的方法。

由于我已经使用 Galaxy Tab 7.7（3.2 和 Enxyos）测试了一些视频播放器的硬件加速，VLC、Mobo、Rock、vplayer、rock 和 mobo 工作正常，VLC 不起作用，vplayer 似乎有渲染损害其性能的错误。

无论如何，我对 Rockplayer 进行了“操作”并删除了它在 data\data\com.redirecting\rockplayer 中的所有 .so 库，并且软件解码崩溃，而硬件解码仍然可以正常工作！我想知道他们是怎么做到的。在我看来，硬件加速可以独立于硬件平台。

有人可以解决这个问题吗？或者提供任何参考以提供更多信息或更好的细节？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-07T22:19:18.810

为了回答上面的问题，我先介绍几个与Android相关的概念

`OpenMAX` Android 使用 OpenMAX 作为编解码器接口。因此，所有本机编解码器（硬件加速或其他）都提供 OpenMAX 接口。StageFright（播放器框架）使用此接口使用编解码器解码媒体

`NDK` Android 允许 Java 应用程序使用 NDK 与底层 C/C++ 本机库进行交互。这需要使用 JNI（Java 本机接口）。

现在来回答你的问题`How to tap native decoder to decode raw video bitstream?`

在 Android 4.0 及以下版本中，Android 不提供对 Java 层底层视频解码器的访问。您需要编写本机代码才能直接与 OMX 解码器交互。尽管这是可能的，但这并不是一件小事，因为它需要了解 OMX 的工作原理以及如何使用 NDK 将此 OMX 映射到应用程序。

在 4.1（Jelly Bean 版本）中，Android 似乎通过 JAVA API 在应用程序级别提供了对硬件加速解码器的访问。有关新 API 的更多详细信息，请访问[http://developer.android.com/about/versions/android-4.1.html#Multimedia](http://developer.android.com/about/versions/android-4.1.html#Multimedia)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-11T22:23:24.153

使用[ExoPlayer](http://developer.android.com/guide/topics/media/exoplayer.html) ( [github](https://github.com/google/ExoPlayer) )。

它是一个由谷歌赞助的开源项目，取代了平台的 MediaPlayer。管道中的每个组件都是可扩展的，包括示例源（如何从自定义协议中提取 H.264 帧）到渲染（到 Surface、SurfaceTexture 等）。

它包括一个很好的[演示应用程序，显示使用情况](https://github.com/google/ExoPlayer/tree/master/demo/src/main/java/com/google/android/exoplayer/demo)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-13T12:11:18.277

您可能想尝试[MediaExtractor](https://developer.android.com/reference/android/media/MediaExtractor.html)和[MediaCodec](https://developer.android.com/reference/android/media/MediaCodec.html)（它们也可用于 NDK - AMediaExtractor 和 AMediaCodec - 请参阅此处播放 .mp4 的示例[native-codec](https://github.com/googlesamples/android-ndk/tree/master/native-codec)）

# pythonbrew - pythonbrew 与 mod_wsgi

> ID：11321827
> 
> 赞同：0
> 
> 时间：2012-07-04T02:51:57.597
> 
> 标签：pythonbrew

pythonbrew 没有被 mod_wsgi 文件接收，配置如下：

```
import os
import sys
import site

site.addsitedir('/home/bharal/.pythonbrew/pythons/Python-2.7.2/lib/python2.7/site-packages')
sys.path.append ('/home/bharal/public_html/dumpstown')

os.environ['DJANGO_SETTINGS_MODULE'] = 'dumpstown.settings'

import django.core.handlers.wsgi
application = django.core.handlers.wsgi.WSGIHandler() 
```

我想使用的pythonbrew版本的python位于：

> /home/bharal/.pythonbrew/pythons/Python-2.7.2/lib/python2.7/site-packages

我的 pythonbrew 安装在这里：

> /home/bharal/.pythonbrew/

我如何告诉 mod_wsgi 使用*这个*版本 (2.7.2) 而不是 ubuntu (2.6) 附带的默认 python 版本？

当我运行我的服务器时，我收到如下错误：

```
[Wed Jul 04 02:17:27 2012] [error] [client 127.0.0.1] mod_wsgi (pid=18694): Exception occurred processing WSGI script '/home/bharal/public_html/dumpstown/dumpstown/apache/dumpstown.wsgi'.
[Wed Jul 04 02:17:27 2012] [error] [client 127.0.0.1] Traceback (most recent call last):
[Wed Jul 04 02:17:27 2012] [error] [client 127.0.0.1]   File "/usr/local/lib/python2.6/dist-packages/django/core/handlers/wsgi.py", line 250, in __call__
[Wed Jul 04 02:17:27 2012] [error] [client 127.0.0.1]     self.load_middleware()
[Wed Jul 04 02:17:27 2012] [error] [client 127.0.0.1]   File "/usr/local/lib/python2.6/dist-packages/django/core/handlers/base.py", line 39, in load_middleware
[Wed Jul 04 02:17:27 2012] [error] [client 127.0.0.1]     for middleware_path in settings.MIDDLEWARE_CLASSES:
[Wed Jul 04 02:17:27 2012] [error] [client 127.0.0.1]   File "/usr/local/lib/python2.6/dist-packages/django/utils/functional.py", line 276, in __getattr__
[Wed Jul 04 02:17:27 2012] [error] [client 127.0.0.1]     self._setup()
[Wed Jul 04 02:17:27 2012] [error] [client 127.0.0.1]   File "/usr/local/lib/python2.6/dist-packages/django/conf/__init__.py", line 42, in _setup
[Wed Jul 04 02:17:27 2012] [error] [client 127.0.0.1]     self._wrapped = Settings(settings_module)
[Wed Jul 04 02:17:27 2012] [error] [client 127.0.0.1]   File "/usr/local/lib/python2.6/dist-packages/django/conf/__init__.py", line 89, in __init__
[Wed Jul 04 02:17:27 2012] [error] [client 127.0.0.1]     raise ImportError("Could not import settings '%s' (Is it on sys.path?): %s" % (self.SETTINGS_MODULE, e))
[Wed Jul 04 02:17:27 2012] [error] [client 127.0.0.1] ImportError: Could not import settings 'dumpstown.settings' (Is it on sys.path?): No module named gravatar.templatetags 
```

从日志中可以看出，服务器*仍在*查看 python 2.6！为什么？我已经启动了 pythonbrew，所以当*我*输入时，`python`我可以看到版本是 2.7.2，并且我需要的所有设置和包都是可导入的！

**更新**如下面的答案所示，mod_wsgi*不在乎我**告诉*它使用哪个 python - 事实上，我不能告诉它使用任何特定的 python。这样做的唯一方法是下载一个未编译的 wsgi 文件，使用我想要的特定 python 版本进行编译，然后使用已编译的 wsgi。

如果您愿意，请参阅我的另一个问题[Error: Command failed with rc=65536 python and mod_wsgi](https://stackoverflow.com/q/11332717/1061426)了解一些步骤和指向 tutes 的链接。最后我*没有*针对 2.7 进行编译（我的 2.6 很好，让 pythonbrew 编译工作太难了）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T06:10:33.760

该特定错误与使用的 Python 版本无关。采用：

sys.path.append ('/home/bharal/public_html') sys.path.append ('/home/bharal/public_html/dumpstown')

要让 mod_wsgi 使用特定版本，请根据该版本从源代码编译它，或者找到针对正确版本编译的 mod_wsgi 的二进制包。

# emacs - 无法向 OCaml 顶层和 coqtop（以及 Proof General）提供长（1024+ 个字符）输入

> ID：11321829
> 
> 赞同：7
> 
> 时间：2012-07-04T02:52:04.013
> 
> 标签：emacs, ocaml, tty, coq, proof-general

**编辑 4**：事实证明，这实际上只是一般 TTY 输入的限制；导致问题的 OCaml、Coq 或 Emacs 没有任何具体内容。

* * *

我正在使用 Emacs 中的 Proof General 开发 Coq 程序，但我发现了一个输入太长的错误。如果要通过 Proof General 提交的区域`coqtop`包含超过 1023 个字符，Proof General（虽然不是 Emacs）在等待响应时会挂起，并且`*coq*`缓冲区包含一个额外`^G`字符，用于超过 1023 个字符。例如，如果一个 1025 个字符区域被发送到`coqtop`，那么`*coq*`缓冲区将以两个额外的字符结束`^G^G`。我无法继续文件中的这一点，我必须终止`coqtop`进程（使用终端`C-c C-x`或`kill`/`killall`从终端）。

关于这种限制的某些东西来自`coqtop`其本身。如果生成一个 1024 字符或更长的字符串并将其通过管道输入，例如通过运行

```
perl -e 'print ("Eval simpl in " . (" " x 1024) . "1.\n")' | coqtop 
```

然后一切正常。（同样，`coqc`也可以正常工作。） *但是*，如果我`coqtop`在终端中运行，我不能在一行上输入超过 1024 个字符，*包括*结束返回字符。因此，输入 1023 个字符的行然后按回车即可；但是在输入 1024 个字符后，按任何键，包括返回（但不包括删除等），只会发出哔哔声。事实证明`ocaml`（OCaml 顶层）具有相同的行为：

```
perl -e 'print ((" " x 1024) . "1;;")' | ocaml 
```

`ocaml`工作正常，但如果从终端运行，我不能在一行上输入超过 1024 个字符。由于我的理解是`coqtop`依赖于 OCaml 顶层（在运行时更明显`coqtop -byte`），我想这是一个相关的限制。

相关软件版本为：

*   [来自Homebrew的](https://brew.sh/)[OCaml](https://caml.inria.fr/ocaml/) 3.12.1 ；
*   [来自Homebrew的](https://brew.sh/)[Coq](https://coq.inria.fr/) 8.3pl3（和 8.3pl2）；
*   [证明总则](https://proofgeneral.github.io/)4.1；
*   [从Emacs 为 Mac OS X](https://emacsformacosx.com/)构建[GNU Emacs](https://www.gnu.org/software/emacs/) 24.1.1 ；和
*   Mac OS X 10.6.7。

我的问题是：

*   怎么样`ocaml`并且`coqtop`正在执行这个字符限制？为什么只用于来自终端或 Emacs 的输入，而不是来自管道或文件的输入？
*   为什么Proof General（明显）不知道这个限制会导致挂起错误和神秘`^G`的s？
*   我该如何解决这个限制？我的最终目标是在 Proof General/Emacs 中使用 Coq，因此可以避开潜在问题的解决方法。

* * *

**编辑 3：**在发现 Ocaml 顶层也存在 1024 个字符的输入限制（我想这是相关的）后，我添加了该信息并删除了原始问题描述，因为它已被完全掩盖和取代。（如有必要，请参阅[编辑历史）。](https://stackoverflow.com/revisions/11321829/2)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T18:56:24.517

我在 OCaml 错误跟踪器上将此报告为[问题 5678](http://caml.inria.fr/mantis/view.php?id=5678)，用户 dim 解释说这不是 OCaml*本身*的问题，而是 TTY 输入的限制。问题是这样的。由于在用户点击返回之前文本不会发送到正在运行的命令，因此所有等待的输入都必须存储在某个地方。存储它的缓冲区，称为输入队列或预输入缓冲区，具有固定大小，由 C 常量控制`MAX_INPUT`。 [这个常数在 Mac OS X 上等于 1024](https://superuser.com/questions/219225/command-limits-when-pasting-into-tcsh-mac-os-x)。像这样的缓冲允许对输入进行有用的处理，例如在发送字符之前删除字符。从终端运行的所有不做特殊事情（例如使用`readline`库）的命令都会表现出这种行为；例如，`cat` chokes in exactly the same way.

To avoid this behavior, one can unset the `ICANON` flag, for instance by running `stty -icanon`; this puts the TTY into [non-canonical input mode](http://pubs.opengroup.org/onlinepubs/7908799/xbd/termios.html#tag_008_001_007), where input is not processed at all before being sent to the command. This means that editing becomes impossible: delete, left and right arrows, and so on all enter their literal equivalents (`^?`, `^[[D`, `^[[C`, …); similarly, `⌃D` no longer sends an EOF, but merely a literal control character. However, for my particular use case, this (so far!) seems to be ideal, since Emacs is handling all my input for me. (**Edit:** But there's a better option!) (Libraries like `readline`，据我了解，也更改此设置，但要注意控制字符和处理编辑等。）要恢复规范模式，可以运行`stty icanon`.

该[`ledit`](http://pauillac.inria.fr/~ddr/ledit/)工具将行编辑包装在作为参数提供给它的程序周围，因此`ledit coqtop`可以正常工作（如果奇怪的话；我更喜欢`ledit -l 65536`避免它的滚动），但与 Emacs 的交互却很奇怪。该[`rlwrap`](http://utopia.knoware.nl/~hlub/rlwrap/)工具做同样的事情，但让其他程序从 TTY 读取；因此，虽然*它*可以接收更长的输入，但按 enter 并将它们发送到包装的命令会表现得非常奇怪，最终需要终止该命令。

**Edit:** In my specific use-case, I can also simply tell Emacs to use a pipe instead of a PTY, solving the problems at a stroke. The Emacs variable [`process-connection-type`](http://www.gnu.org/software/emacs/manual/html_node/elisp/Asynchronous-Processes.html#index-process_002dconnection_002dtype-3474) controls how subsidiary processes are communicated with; `nil` means to use a pipe, and non-`nil` means to use a TTY. Proof General uses the variable [`proof-shell-process-connection-type`](http://proofgeneral.inf.ed.ac.uk/htmlshow.php?title=Proof+General+adapting+manual+(latest+release)&file=releases%2FProofGeneral-latest%2Fdoc%2FPG-adapting%2FPG-adapting_5.html#index-proof_002dshell_002dprocess_002dconnection_002dtype) to determine how this should be set. Using a pipe solves all the 1024-character-limit problems.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-05T08:35:10.800

我不确定 Emacs/coqtop 交互如何在这里发挥作用，但我相信确实存在 OCaml 顶级错误，应该[在 OCaml bugtracker](http://caml.inria.fr/mantis/)中报告。你准备好报告了吗？如果没有，我可以照顾它。

> ocaml 和 coqtop 是否强制执行此字符限制？

顶层代码中有各种输入缓冲区，其中一些长度为 1024；快速查看代码后，有一个调整大小的逻辑，以防输入太大，所以它*应该可以*工作。我已经能够重现“不能在交互式顶层输入超过 N 个字符”的问题（不使用时`rlwrap`），但是限制为 N=4096 而不是 N=1024，所以我不确定它是否完全相同问题。

> 为什么只用于来自终端或 Emacs 的输入，而不是来自管道或文件的输入？

顶层代码区分了交互式和非交互式输入；iirc。例如，它会影响打印错误位置的方式。

> 为什么证明将军（显然）不知道这个限制会导致挂起错误和神秘的^Gs？

我不知道。`coqtop`您观察到的问题甚至可能是由类似缓冲逻辑引起的*不同*错误（不同于错误）。`ocaml`

> 我该如何解决这个限制？

在 Proof General 中不要一次发送太长的输入怎么样？也许您可以分解您的代码以使用中间定义或其他东西，以保持低于限制。

关于“上游修复”的情况：我相信 OCaml 和 Coq 都在很快获得新版本的过程中。如果人们对这个 bug 有足够的兴趣并很快得到一个真正的修复（特别是，如果你自己找到了修复），它可以相当快地集成到上游。否则，您将不得不等待下一个发布周期，并可能同时维护一个本地分支以避免该问题。务实地说，“通过改变我的 Coq 开发来解决”选择可能是最省力的解决方案，但它不会造福整个人类！

**编辑：（**回答评论）

我正在考虑的调整大小逻辑是 in `Lexing.lex_refill`， found in `stdlib/lexing.ml`，由创建的闭包`Lexing.from_function`调用，调用 from `toplevel/toploop.ml`。

我有另一个“解决方法”的想法：将您的长短语写入外部文件`foo.v`，并用于`Load foo.`获取顶层以读取文件本身。我怀疑这将解决大小限制，但尚未测试。

# c++ - 检查用户是否使用 C++ 在 X 时间内输入值

> ID：11321831
> 
> 赞同：1
> 
> 时间：2012-07-04T02:52:22.480
> 
> 标签：c++, input, timer

我正在制作一个游戏，我想要一个在后台运行的计时器。如果用户在规定的时间限制内没有输入任何内容，那么他​​们就输了。

我已经让计时器和单独的线程正常工作，但是，我不确定如何让程序检查用户是否为输入提供了值。如果用户没有输入任何内容，则计时器应继续倒计时，直到时间用完，此时程序退出。

我设想的伪代码是这样的：

```
do
{
    CheckIfUserInputs;

    //skip this if there is no input
    if(UserInput == WinningPhrase)
    {
        cout<< "You win\n";
        PlayerWon = true;
    }
}while((time > 0) && (PlayerWon != true)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T03:05:55.350

我想你想要`cin.eof()`。如果没有任何东西，应该返回 -1。

# sql - 如何使用 SQL 对数据进行“水平”和“垂直”排序？

> ID：11321835
> 
> 赞同：0
> 
> 时间：2012-07-04T02:53:16.237
> 
> 标签：sql

样本表：

```
+------+--------+---------+
|  id  |  type  |  date   |
+------+--------+---------+
|    1 |    A   | 201205  |
|    2 |    A   | 201206  |
|    3 |    A   | 201206  |
|    4 |    A   | 201207  |
|    5 |    B   | 201205  |
|    6 |    B   | 201206  |
|    7 |    C   | 201206  |
|    8 |    C   | 201206  |
+------+--------+---------+ 
```

目标：显示每个月每种类型的数量：

```
+------+--------+--------+--------+
|      | 201205 | 201206 | 201207 |
+------+--------+--------+--------+
|  A   |    1   |    2   |   1    |
|  B   |    1   |    1   |   0    |
|  C   |    0   |    2   |   0    |
+------+--------+--------+--------+ 
```

实际表有很多个月，怎么写sql又不费力的用join呢？

我使用多重连接来做到这一点，sql开始很长，我不得不使用另一种语言来动态生成它。

```
SELECT type ``, a.201205, b.201206, c.201207 FROM
(SELECT type FROM t GROUP BY type) foo
LEFT OUTER JOIN
(SELECT count(id) `201205` ,type FROM t WHERE date = '201205' GROUP BY type) a
USING (type)
LEFT OUTER JOIN 
(SELECT count(id) `201206` ,type FROM t WHERE date = '201206' GROUP BY type) b
USING (type)
LEFT OUTER JOIN 
(SELECT count(id) `201207` ,type FROM t WHERE date = '201207' GROUP BY type) c
USING (type) 
```

PS：我的帖子找不到合适的标题，请帮我改一下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T02:58:42.187

这不会完全按照您要查找的格式输出，但会显示“每月每种类型的数量”：

```
SELECT DISTINCT date, type, COUNT(*) AS Amount FROM table GROUP BY date, type 
```

# r - R - 图形/绘图窗口的查询位置

> ID：11321837
> 
> 赞同：2
> 
> 时间：2012-07-04T02:53:38.537
> 
> 标签：r, graphics

是否可以询问绘图窗口在 R 中的位置？

我正在做一些绘图，从而连续打开多个窗口，如果这些窗口出现在与以前的图形窗口相同的位置和相同的大小以便快速比较，那将很有用。

我可以通过这个来获取窗口`dev.size`的大小并设置后续窗口的大小。

但是，我怎样才能获得窗口的位置？

（想象第一个图表弹出 - 用户移动并调整其大小以适合他们。所有后续窗口都应出现在该位置/大小，因此它几乎看起来像一个动画，从而更容易分辨后续图表之间发生了什么变化。

我不能简单地使用相同的图形窗口并在其顶部绘制图形，因为有时我想从图形中删除线（保持其他所有相同）而不是添加它们。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T03:03:30.597

我记得你不能这样做，因为“R 不知道”，只有窗口管理器会这样做，并且在窗口管理器和应用程序之间没有回调机制，即 R，它作为应用程序级开发人员传递给我们。

# knockout.js - KnockoutJS - 在文本框中显示 observableArray 逗号分隔的内容

> ID：11321839
> 
> 赞同：2
> 
> 时间：2012-07-04T02:53:51.480
> 
> 标签：knockout.js

这应该是一个简单的：我的视图模型中有一个名为“To”的 observableArray 对象，其中包含 EmailAddress 元素。每个元素都有两个属性：DisplayName 和 Address。

我想将数组中的每个元素打印到单个输入字段，用分号分隔。我现在得到的是：

“[对象对象]，[对象对象]”

如何绑定和打印属性？我尝试了各种解决方案，例如添加“value：to.DisplayName”，但无济于事。

```
<!-- illustration only, this is what the items in the TO array look like
     I want to print the value of DisplayName for each element -->
var EmailAddress = function(dName, addr) {
    self = this;
    self.DisplayName = dName;
    self.Address = addr;
};

<!-- viewmodel -->
var EmailModel = function (email) {
            var self = this;
            self.id = ko.observable();
            self.subject = ko.observable();
            self.body = ko.observable();
            self.from = ko.observable();
            self.to = ko.observableArray(); <-- display the DisplayName property of these elements)
            self.cc = ko.isObservable();
            self.bcc = ko.observable();
            };

<!-- print the contents of the TO array --> 
<input data-bind="value: to" type="text" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T03:09:29.390

**编辑：**第一次错过了错误，下次应该阅读整个问题。

在这种情况下，有两种方法。使用计算的 obvservable，或内联 arrayMap。

这是[一个小提琴。](http://jsfiddle.net/eXx4R/1/)

# php - Magento 自定义 xml 结构更改

> ID：11321841
> 
> 赞同：-3
> 
> 时间：2012-07-04T02:54:07.477
> 
> 标签：php, magento

我是 Magento 的新手，我想要制作的是以下内容（但我不确定如何执行此操作）：

1.  如何将新列添加到订单页面
2.  我如何集成 XML 以将订单数据发送到我要发送到的任何位置。

我不确定文件夹结构如何修改文件以生成上述文件。我是通过 lib hooks 还是其他方式来实现的？

我是否放置了 xml 提要文档等

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T03:19:10.150

[Magento 知识库](http://www.magentocommerce.com/knowledge-base/entry/magento-for-dev-part-1-introduction-to-magento/)

[Magento U 面对面课程（FD：我教了几个）](http://www.magentocommerce.com/training/course-schedule)

[Magento U 视频](http://www.magentocommerce.com/training/on-demand/)

# jsf - JSF 不同用户权限的不同视图

> ID：11321844
> 
> 赞同：0
> 
> 时间：2012-07-04T02:54:27.167
> 
> 标签：jsf, phaselistener

我正在尝试在我的 JSF 应用程序中实现用户控制。我需要为具有不同权限的用户提供不同的页面。

最好的方法是什么？

我的一个想法是制作一个 PhaseListener 将用户重定向到正确的页面，但我不喜欢在收到的请求中测试字符串的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T18:58:01.443

就像拉维回答的那样。“我知道的最简单的方法是使用 Primefaces EL 扩展进行 UI 授权”

# matlab - Matlab中的ecdf（）函数没有给出输出中的所有值

> ID：11321848
> 
> 赞同：1
> 
> 时间：2012-07-04T02:54:41.453
> 
> 标签：matlab, statistics, cdf, ecdf

我使用`ecdf()`Matlab 中的函数计算了经验分布的 CDF，用于具有`10,000`值的分布。但是，我从中获得的输出仅包含`9967`值。如何获得`10,000`CDF 的总值？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T03:26:01.550

从具有 10'000 个值的分布中，您期望输出长度为 10'001。最有可能的是，您的分布包含 44 个 NaN，或重复值。前者用 核对`sum(isnan(data(:))`，后者用`length(unique(data(:))`。

```
>> out = ecdf(1:5)
out =
         0
    0.2000
    0.4000
    0.6000
    0.8000
    1.0000
>> length(out)
ans =
     6
>> out = ecdf([1:5,NaN,NaN])
out =
         0
    0.2000
    0.4000
    0.6000
    0.8000
    1.0000
>> length(out)
ans =
     6
>> out = ecdf([1:5,5,5])
out =
         0
    0.1429
    0.2857
    0.4286
    0.5714
    1.0000
>> length(out)
ans =
     6 
```

# java - 找到一个正在杀死我的进程的神秘进程

> ID：11321849
> 
> 赞同：4
> 
> 时间：2012-07-04T02:54:46.490
> 
> 标签：java, linux, unix, process, signals

假设我有一些进程——在本例中是一个由 ant 启动的 Java 进程。我发现随机发送此 Java 进程 SIGTERM。它可能是向自身发送该信号的过程，也可能是其他东西。

我已经消除了大部分明显的原因（oom 杀手、父进程杀死孩子等），但我真的很想找出是*谁*在发送这个进程的 SIGTERM。有什么方法可以在操作系统或进程级别跟踪此行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T14:28:03.023

您可以通过 JNI 在您的 java 程序中安装信号处理程序，请参阅[interface java with C timer library using JNI](https://stackoverflow.com/questions/11616362/interface-java-with-c-timer-library-using-jni)作为示例（捕获 SIGALRM，但应该很容易适应）。不过，在处理 java 中的信号时要注意一些问题（请参阅[http://nerds-central.blogspot.de/2011/04/java-jvm-jni-and-signal-handling.html](http://nerds-central.blogspot.de/2011/04/java-jvm-jni-and-signal-handling.html)）：基本上你需要采取注意将您的信号处理程序链接到现有的而不是替换它们。

如果您怀疑人类交互，另一种方法可能是修改`kill`发生此谜题的机器上的可执行文件。将它替换为一个 shell 脚本，该脚本记录谁登录、它的 PID 和父 PID，然后调用原始的 kill。

我把一些可以在我的电脑上运行的东西放在一起：[https ://gist.github.com/4183018](https://gist.github.com/4183018)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T04:32:49.590

你确定你收到 SIGTERM 信号吗？您是否尝试过使用 linux`strace`命令并查看您有什么信号。我不确定它是否会向您显示发送信号的进程的 pid。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T23:16:04.097

如果您有可用的 dtrace（Solaris、OS X、FreeBSD），这个简单的 Dtrace 脚本将很容易检测到神秘进程：

```
#!/usr/sbin/dtrace -qCs

#include <signal.h>

proc:::signal-send
/ args[2] == SIGTERM && args[1]->pr_fname == "java" /
{
    printf("Process %d (%s) run by uid %d is sending SIGTERM to java (pid %d)\n",
            pid, execname, uid, args[1]->pr_pid);
} 
```

# sql - 如何在 sql server 2000 中使用 select 语句

> ID：11321852
> 
> 赞同：0
> 
> 时间：2012-07-04T02:54:58.330
> 
> 标签：sql, sql-server-2000

我有一个表**stdmarks**，其结构如下

```
pk id bigint 
marks_obtained 
```

我有一个选择语句如下：

```
SELECT CASE WHEN marks_obtained<25 THEN marks_obtained+'*'
ELSE marks_obtained
END 
```

当marks_obtained小于25并且如果大于25时，我想打印类似**{marks_obtained}*的东西****{marks_obtained}**

当我执行语句时，出现以下错误：

> 将数据类型 varchar 转换为 bigint 时出错。

我尝试使用 cast 和 convert 将结果转换为*varchar*但没有成功我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T03:18:36.410

你可以这样做：[http ://www.sqlfiddle.com/#!3/ef9f4/4](http://www.sqlfiddle.com/#!3/ef9f4/4)

```
select 

  i = case when i >= 1 then 
          convert(varchar(100), i) + '*'
      else
          convert(varchar(100), i)
      end 

from test; 
```

当然，你也可以这样做：

```
select 

  i = convert(varchar(100),i) + case when i >= 1 then '*' else '' end

from test; 
```

* * *

DDL：

```
create table test
(
  i int
  );

insert into test values(1); 
```

输出：

```
|  I |
------
| 1* | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-10T01:50:53.623

为一个 3 岁的问题添加答案。我正在查询一个古老的 MS SQL 7 数据库，这是我使用 CASE 语句所做的：

```
 CASE WHEN
        (SELECT COUNT(*)
      FROM Table1
      WHERE Table2.code = Table1.code)  > 1 
         THEN 'SET' 
      ELSE 'PIECE' END AS UnitOfProduct 
```

# java - 很难制作使用非静态方法的静态方法

> ID：11321853
> 
> 赞同：0
> 
> 时间：2012-07-04T02:55:18.883
> 
> 标签：java, android, instantiation, static

我学习 Java 大约 6 周，但仍在努力实现静态方法（以为我真的理解它，但这证明我错了！）。

我正在尝试使本地存储的键值对的值公开可用。这是我的初始代码：

```
public class Settings extends Activity implements OnClickListener {
        public Settings(TextView loginText, TextView passwdText) {
    super();
    this.loginText = loginText;
    this.passwdText = passwdText;
}

public static String getDriverNum() {
    SharedPreferences sp = getSharedPreferences(DELEX_SP, MODE_PRIVATE); <---ERROR
    String Login = sp.getString("KeyLgn", "No Login Found");
    return Login;
} 
```

当然，我得到一个错误“无法从类型 ContextWrapper 对非静态方法 getSharedPreferences(String, int) 进行静态引用”，所以我尝试将非静态方法包装在我自己的公共方法中，作为类似StackOverflow 的[回答](https://stackoverflow.com/questions/926822/java-non-static-variable-cannot-be-referenced-from-a-static-context-error)表明：

```
public class Settings extends Activity implements OnClickListener {
public Settings(TextView loginText, TextView passwdText) {
    super();
    this.loginText = loginText;
    this.passwdText = passwdText;
}

public static String getDriverNum() {
    String Login = getSharedPref().getString("KeyLgn", "No Login Found"); <-- SAME ERROR
    return Login;
}

public  SharedPreferences getSharedPref() {
    SharedPreferences sp = getSharedPreferences(DELEX_SP, MODE_PRIVATE);
    return sp;
} 
```

但这只是导致了同样的错误，因为我还没有解决对非静态*getSharedPreferences*方法的调用。解决此问题的最佳方法是什么？是创建一个包装*getSharedPreferences*的类吗？

感谢您在我与静态命名法斗争时的耐心等待。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T03:03:52.667

我认为您可能误解了静态的工作原理。

静态方法（或变量）是对类的所有实例具有单个副本并且不需要类的实例来调用它的方法。例如，

```
class MyClass {
      public static void sayHello() {
          System.out.println("hello");
      }
 } 
```

可以调用为

```
MyClass.sayHello(); 
```

请注意，没有创建 MyClass 的新实例。

实例方法是需要类的特定实例并且通常依赖于类的某些内部状态的方法。

```
class MyClass {

    // assume this is initialized somewhere in the constructor
    private final String myName;

    public void sayMyName() {
        System.out.println(myName);
    }
} 
```

现在您需要该类的特定实例

```
MyClass m = new MyClass("Bill");
m.sayMyName(); 
```

静态方法不能引用实例方法（或实例变量），因为静态方法与类的特定实例无关。

非静态方法可以访问非静态和静态方法。

一般来说，如果一个方法依赖于实例的状态，它应该是一个非静态方法。如果它不依赖于实例的内部状态，那么它可以是一个静态方法。

在您的情况下，`getSharedPref`不会从 的实例访问任何状态`Settings`，因此可以将其制成静态方法，然后可以被类中的其他静态方法访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T03:24:26.120

简单来说，你需要知道两件事：

1.  您可以在非静态方法中调用静态方法

2.  您不能在同一类的静态方法中调用非静态方法（除非您新建另一个类的实例，并通过该对象调用非静态方法）

这就是为什么你会出错，当你打电话时你打破了第二条`getSharedPref()`规则`getDriverNum()`。

要解决这个问题，请尝试制作`getSharedPref()`静态，然后再制作`getSharedPreferences()`静态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T03:01:50.177

如果你想编写一个使用非静态方法的静态方法，你只需像这样传递一个实例：

```
public static void invokeMethod(SomeObject foo) {
    foo.bar();
} 
```

所以你正在做的是一个很好的模式。我一直将它用于可以在许多类（也称为组合）中重用的“帮助器”，只需将“SomeObject”设置为上下文即可。

这是我在 Android 中使用的模式来获得一个很好的中心点来定义默认首选项：

```
import android.content.Context;
import android.content.SharedPreferences;
import android.preference.PreferenceManager;

import java.util.HashMap;
/**
 * Provides support functions for getting preferences as well as a
 * central place for storing default preferences.
 */
public final class PreferencesHelper {
    public static class Preferences {
        public static final String SOME_SETTING = "SOME_SETTING";
    }

   /** This allows us to define our default preferences all in one place */
    private static HashMap<String, Object> sDefaultPreferences =
        new HashMap<String, Object>(){{
        put(Preferences.SOME_SETTING, "value");
    }};

    public static SharedPreferences getDefaultPreferences(Context context) {
        return PreferenceManager.getDefaultSharedPreferences(context);
    }

    public static String getString(SharedPreferences prefs, String key) {
        return prefs.getString(key, (String) sDefaultPreferences.get(key));
    }

    /* Convenience method (use when getting only one preference) */
    public static String getString(Context context, String scanner) {
        SharedPreferences prefs = getDefaultPreferences(context);
        return getString(prefs, scanner);
    } 
```

...

这种模式允许在一个地方定义默认值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T03:02:10.600

您不能从静态方法内部访问*非`static`*方法。你在这里做的是同样的事情。您正在访问非`static`方法，即`getSharedPref()`从静态方法内部`getDriverNum`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-16T22:19:28.460

在您的 Helper 类中，只需将 Activity 类的静态变量传递给它。例如

助手类：

```
public static int getDefaultYear()
{
    return HomeActivity.prefs.getInt("myYear", 10);
} 
```

家庭活动：

```
public class HomeActivity extends AppCompatActivity {

public static SharedPreferences prefs;

@Override
protected void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);
   prefs = this.getSharedPreferences(getString(R.string.applicationIdString), Context.MODE_PRIVATE);
   ...
   } 
```

# sql - sql Trigger 需要从一个值中设置 x

> ID：11321856
> 
> 赞同：1
> 
> 时间：2012-07-04T02:56:05.867
> 
> 标签：sql, oracle, triggers, oracle-apex

我被困在这种约束所需的触发器类型上。

我会有价格和佣金。价格决定佣金金额，< 100 - 4%、< 200 - 5% 等。

我的点子。该数据库包含一个单独的表，其中包含 4 个价格值 101、201、401、601，以及它们自己的匹配佣金百分比，这将被称为 PC。当我创建一个房产列表时，我想根据输入的价格计算他们赚取的佣金。

在插入时，我需要检查 new.price 并将其与 PC 中的价格进行比较。一旦 new.price 小于价格元组，我将价格设置为该佣金值

```
create or replace TRIGGER findCommission BEFORE INSERT OR UPDATE ON HASLISTING
FOR each ROW
BEGIN
IF (:NEW.ASKING_PRICE < 100001) THEN
:NEW.COMMISSION = 6.0;
END IF;
IF (:NEW.ASKING_PRICE < 250001) THEN
:NEW.COMMISSION = 5.5;
END IF;
IF (:NEW.ASKING_PRICE < 1000001) THEN
:NEW.COMMISSION = 5.0;
END IF;
IF (:NEW.ASKING_PRICE > 1000000) THEN
:NEW.COMMISSION = 4.0;
END IF;
END; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T03:39:28.320

我建议使用这样的计算函数，然后在触发器中调用它。这样，佣金逻辑保持独立并且可以更改。

此外，您的佣金表描述可能会有所帮助。

```
create table price_comm(
   max_price number(20),
   comm number(5,2)
);

insert into price_comm (max_price, comm) values (10000, 2.0);
insert into price_comm (max_price, comm) values (20000, 3.0);
insert into price_comm (max_price, comm) values (30000, 4.0);
commit;

create or replace function f_get_comm_percent(
    i_price in number
) return number
as
 o_comm_percent price_comm.comm%type;
begin
  select comm 
    into o_comm_percent
  from (
      select comm,
             rank () over (order by max_price desc) rnk
        from price_comm
        where max_price <= i_price
  ) where rnk = 1;      

  return o_comm_percent;

end;
/ 
```

--这也是假设范围不重叠，如果重叠，他们会得到最大的佣金；）

现在要获取佣金值...

```
SQL> select f_get_comm_percent(12000) from dual;

F_GET_COMM_PERCENT(12000)
-------------------------
                        2

SQL> select f_get_comm_percent(45000) from dual;

F_GET_COMM_PERCENT(45000)
-------------------------
                        4 
```

-- 你的触发器定义就这么简单。查看您的问题，您似乎在表格中有百分比，并且您需要在决赛桌中获得佣金值。

```
create or replace trigger trg_biu_haslisting
before insert or update of haslisting
for each row
referencing new as new and old as old
begin
  :NEW.commission := :NEW.price*f_get_comm_percent(:NEW.price);
  --any other columns that you need to set
end;
/ 
```

我还没有测试过语法错误的触发代码，请在你端测试。

# javascript - 为什么 document.getElementById('files') 返回 null？

> ID：11321857
> 
> 赞同：1
> 
> 时间：2012-07-04T02:56:09.147
> 
> 标签：javascript, html

下面的代码根本不起作用。

```
document.getElementById('files').addEventListener('change', handleFileSelect, false); 
```

萤火虫报告此 getElementById 为空，但我添加了一个文本，它正在工作.....

看来代码是正确的...

更新：这是 html 页面

```
<script type="text/javascript">

   document.getElementById('files').addEventListener('change', handleFileSelect,   false);
   document.getElementById('username');
   function handleFileSelect(evt) {
   alert('i am called');
   var files = evt.target.files; // FileList object

 // files is a FileList of File objects. List some properties.
 var output = [];
 for (var i = 0, f; f = files[i]; i++) {
  output.push('<li><strong>', escape(f.name), '</strong> (', f.type || 'n/a', ') - ',
              f.size, ' bytes, last modified: ',
              f.lastModifiedDate ? f.lastModifiedDate.toLocaleDateString() : 'n/a',
              '</li>');}
  document.getElementById('list').innerHTML = '<ul>' + output.join('') + '</ul>';}
</script>
</head>
<body>
<form>
<input type="text" id="username" />
<input type="file" id="files"  />
<div id="list"></div>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-04T03:15:45.583

那是因为您正在尝试获取一个元素，而元素本身尚未加载。您需要将 JavaScript 向下移动到元素之后，或者在页面完成加载后将代码作为回调运行。

```
document.addEventListener('DOMContentLoaded', function(){
    document.getElementById('files').addEventListener('change', handleFileSelect, false);
    document.getElementById('username');
    function handleFileSelect(evt) {

        alert('i am called');

        var files = evt.target.files; // FileList object

        // files is a FileList of File objects. List some properties.
        var output = [];
        for (var i = 0, f; f = files[i]; i++) {
            output.push('<li><strong>', escape(f.name), '</strong> (', f.type || 'n/a', ') - ',
            f.size, ' bytes, last modified: ',
            f.lastModifiedDate ? f.lastModifiedDate.toLocaleDateString() : 'n/a',
              '</li>');
        }
        document.getElementById('list').innerHTML = '<ul>' + output.join('') + '</ul>';
    }
}, false); 
```

# jquery - jQuery 插件 - 不完全自动完成

> ID：11321858
> 
> 赞同：1
> 
> 时间：2012-07-04T02:56:10.793
> 
> 标签：jquery, autocomplete

我正在寻找一个可以执行自动完成类型行为的 jQuery 插件（或其他可以与 jquery 一起使用的库）。我正在寻找的几个功能

1.  支持 text/id 配对数据，其中文本显示在“下拉”和文本框中，但 ID 可用于与表单一起提交。
2.  不需要将 ID 提交给服务器 - 也就是说，不在列表中的项目可以输入到文本框中
3.  最好能够设置列表中项目标记的样式

这个[http://code.drewwilson.com/entry/autosuggest-jquery-plugin/](http://code.drewwilson.com/entry/autosuggest-jquery-plugin/)是一个很好的匹配，但似乎有几个错误。jQuery UI 实现似乎至少缺少第一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T07:28:58.420

不确定这是否是您正在寻找的，但它是我使用的，轻巧且易于造型！

[http://harvesthq.github.com/chosen/](http://harvesthq.github.com/chosen/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T03:39:56.620

由于我的英语很差，我无法理解你的意思。但我为您找到了一些 jQuery 插件，它们可能很有用：

1.  [http://jquery-plugins.net/#](http://jquery-plugins.net/#)
2.  [http://www.jqueryplugins.com/](http://www.jqueryplugins.com/)

# .net - 使用 HQL 从复合表中检索数据

> ID：11321859
> 
> 赞同：0
> 
> 时间：2012-07-04T02:56:15.800
> 
> 标签：.net, nhibernate, hql, nhibernate-criteria

使用 NHibernate for .NET 我有 3 个表。一个是`CourseType`，另一个是`Contact`，最后一个是称为`CourseType_Contact`组合表的组合，看起来像这样......

```
CourseTypeID Guid, ContactID Guid 
```

我正在尝试使用 HQL 编写一个查询，该查询将检索`Contacts`特定课程类型的所有内容，但我不知道如何在 HQL 中执行此操作。

在 SQL 中，我的查询看起来像这样。

```
SELECT * FROM Contact WHERE ContactID IN(
SELECT ContactID FROM CourseType_Contact WHERE CourseTypeID = @CourseTypeID) 
```

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T03:25:53.847

好久没用HQL了，不过我觉得你可以

```
SELECT co FROM CourseType ct 
JOIN   ct.Contacts co
WHERE  ct.CourseTypeId = :Id 
```

# css - CSS：如何在垂直方向的块元素中心设置文本

> ID：11321860
> 
> 赞同：1
> 
> 时间：2012-07-04T02:56:31.297
> 
> 标签：css, inline, vertical-alignment

关键是我已经设置了`vertical-align: center`属性

我有一个`p`：

```
<p><span>Hello World</span></p>​

p{
    text-align:center;
    height:200px;
    width:200px;
    border:1px black solid;
}
span{
    vertical-align: middle;
    display:inline-block;
} 
```

这是演示：http: [//jsfiddle.net/hh54188/yhLqV/2/](http://jsfiddle.net/hh54188/yhLqV/2/)

我希望段落中的文本可以在垂直和水平方向居中

但是`span`'`vertical-align`属性不起作用？为什么？

我得到了一些关于设置`line-height`等于父级高度的建议，它仅在父级框中只有一行时才有效。

我怎样才能实现我的目标（也许我可以使用一些 css3 属性）？将内部元素设置在父垂直方向的中心

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T04:47:20.590

您好，您可以通过下面提到的**CSS**代码实现您想要的结果：-

您可以给`display:table`the`parent`和`display:table-cell; & vertical-align:middle;` to the`Child`以获得您想要的结果，如下所述**CSS** & **Demo 链接...**

**CSS**

```
p{
    text-align:center;
    height:200px;
    width:200px;
    border:1px black solid;
    display:table;

}
span{
    vertical-align: middle;
    display:table-cell;
} 
```

**这是演示**：- [http://jsfiddle.net/yhLqV/5/](http://jsfiddle.net/yhLqV/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T05:16:40.737

您可能想深入研究显示等属性：表格、表格单元格、表格行。我相信那些是ie8及以上。所以你可以用你的 html 组织来模仿表格的行为。

html是一样的...

CSS将是

```
p{
    text-align:center;
    height:200px;
    width:200px;
    border:1px black solid;
    display:table;
}
span{
    vertical-align: middle;
    display:table-cell;
} 
```

小提琴：http: [//jsfiddle.net/yhLqV/6/](http://jsfiddle.net/yhLqV/6/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T03:40:45.223

[CSS [工作小提琴]](http://jsfiddle.net/yhLqV/4/)中的更改：

```
`   border: 1px solid black;
    height: 200px;
    margin: 50% auto;
    width: 200px;` 
```

# bash - bash 中的条件执行和重定向

> ID：11321863
> 
> 赞同：1
> 
> 时间：2012-07-04T02:57:09.207
> 
> 标签：bash, io-redirection

我想要这样的东西：

```
maybeexec command arg1 arg2 &> /logs/log 
```

其中 Maybeexec 是一个 bash 函数，如下所示：

```
maybeexec() {
  if ! ps ax | grep -v grep | grep "$*" > /dev/null
  then
    "$@"
  fi
} 
```

所以基本上它检查是否`command arg1 arg2`已经运行，如果是，则不运行它。

不过，我的问题是，即使`command arg1 arg2`它已经在运行，因此`maybeexec`不会同时运行它，`/logs/log`仍然会打开以进行重定向，并且会覆盖现有的`/logs/log`，这是我不想要的。

解决这个问题的最优雅的方法是什么？如果可能的话，我想像现在一样继续调用`maybeexec`，因为我使用它来运行许多命令，这些命令都将输出重定向到不同的文件。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T05:17:33.140

你需要稍微重写你的代码。在函数内部而不是外部进行重定向。重定向的目标没有指定为函数的第一个参数（稍后将使用 删除`shift`）：

```
maybeexec /logs/log command arg1 arg2

maybeexec() {
  LOG=$1
  shift
  if ! ps ax | grep -v grep | grep "$*" > /dev/null
  then
    "$@" >& $LOG
  fi
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T03:07:23.877

我不明白你的函数试图做什么，或者你的重定向问题是什么。进程启动后，文件描述符表不能在外部修改（GDB 和其他 hack 除外）。

请使用[正确的进程管理](http://mywiki.wooledge.org/ProcessManagement)而不是`ps`在脚本中。这种方法不好。要按名称搜索进程，您应该使用`pgrep`，但这也不应该在脚本中完成。

另见：[http](http://wiki.bash-hackers.org/howto/mutex) ://wiki.bash-hackers.org/howto/mutex 和： http: [//mywiki.wooledge.org/BashFAQ/045](http://mywiki.wooledge.org/BashFAQ/045)

# php - 从 mysql_num_rows 中选择查询

> ID：11321864
> 
> 赞同：0
> 
> 时间：2012-07-04T02:57:13.420
> 
> 标签：php, mysql

我想创建多个搜索，其中语句 $where_search 是来自帖子表单的多个条件。但是当我使用此代码“.where_search”时仍然出错。在 where 条件下使用 mysql_num_rows 进行分页

```
$tampil2 = mysql_query("SELECT * FROM bb where ".$where_search."  and kd_kelompok='2' and kd_komoditi='11' and nm_sebutan IS NOT NULL " ); 
```

这是完整的代码。

```
$where_search = "kd_pok='2' and kd_komoditi='11' ";

if (isset($_POST['lakpus']))
{

    if (empty($_POST['lakpus']))
    {

    }
    else
    {

        if (empty($where_search))
        {
             $where_search .= "lakpus = '$lakpus' ";
        }
        else
        {

             $where_search .= "AND lakpus = '$lakpus' ";

        }
    }
} 

if (isset($_POST['kd_por']))
{
    $kd_por = $_POST['kd_por'] ;

    if (empty($_POST['kd_por']))
    {

    }
    else
    {

        if (empty($where_search))
        {
            $where_search .= "kd_por = '$kd_por' ";

        } 
        else
        {

            $where_search .= "AND tab1.kd_por = '$kd_por' ";

        }
    }
} 

$max=15;
$tampil2 = mysql_query("SELECT * FROM bb where ".$where_search."  and kd_kelompok='2' and kd_komoditi='11' and nm_sebutan IS NOT NULL " );
$jml = mysql_num_rows($tampil2);
$jmlhal  = ceil($jml/$max); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T03:05:46.457

也许你的错误在这里：

```
$where_search .= "AND tab1.kd_por = '$kd_por' "; 
```

因为您没有声明“tab1”。尝试更改为：

```
$where_search .= "AND kd_por = '$kd_por' "; 
```

**编辑 1**

您没有`$lakpus`从`$_POST`使用它之前恢复 var。这是您必须更新的部分代码。

```
...

else
{

    $lakpus = $_POST['lakpus'];

    if (empty($where_search))
    {
        $where_search .= "lakpus = '$lakpus' ";
    }

    ... 
```

**编辑 2**

正如我在评论中所说，尝试在 mysql_query() 之后调用 mysql_num_rows()，如下所示。

```
$qry = "SELECT * FROM bb where ".$where_search; 

$res = mysql_query($qry); 

$num = mysql_num_rows($res);

$row = mysql_fetch_array($res); 
```

# asp.net - 关于asp.net 4.0中Global.asax中的路由

> ID：11321865
> 
> 赞同：0
> 
> 时间：2012-07-04T02:57:16.780
> 
> 标签：asp.net, url-routing, asp.net-routing

嘿伙计们，我对如何从我们的 .cs 页面进行自定义路由感到震惊我知道我们可以在 global.asax 中使用 routeCollection.MapPageRoute("Default Page", "Default/{ProductName}/{CategoryName}", " ~/Default.aspx");

但是我想从我们的文件后面的代码中自定义 url 路由，因为页面的名称来自数据库……我该怎么做，请帮帮我……！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T09:24:07.410

您可以尝试以下方法

在 global.asax 中定义另一条路线，如下所示

```
route.MapPageRoute("page/{pageid}", "~/thefilethatdisplaypage.aspx"); 
```

在显示page.aspx.cs的文件中

```
protected void Page_Load(object sender, EventArgs e)
{
   string pageId = RouteData.Values["pageid"].ToString();
   string content = getPageFromDatabase(pageId);

   pageDisplayControl.Text = content;
} 
```

虽然我不知道你的实现，但这应该给你和想法

# jquery - 添加此小部件与 ember 冲突

> ID：11321867
> 
> 赞同：0
> 
> 时间：2012-07-04T02:57:38.457
> 
> 标签：jquery, ember.js, addthis

在我的网站上应用 ember 0.9.8.1 时，我遇到了 addthis 小部件的问题。你能帮我弄清楚吗？我正在使用 Windows 7 并使用以下浏览器进行测试：firefox 13.0.1，即 9、safari、chrome。

请转到此链接[http://jsfiddle.net/kcjzw/205/](http://jsfiddle.net/kcjzw/205/) 然后将鼠标悬停在紧凑（加号）图标上。它会在萤火虫中抛出错误

```
evar
TypeError: P[O] is undefined
[Break On This Error]

...";}else{if(a1.bro.saf){aM+="
";aM+="
AddTh...

menu116.js (line 2)
menu116.js (line 2)
addthis_ssh is not defined
[Break On This Error]

...";}else{if(a1.bro.saf){aM+="
";aM+="
AddTh... 
```

预先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T10:22:11.990

我通过在我的页面中添加以下行来解决这个问题：

`window.addthis_translations = {};`

有关更多详细信息，请参阅我对 GitHub 问题的评论：

[https://github.com/emberjs/ember.js/issues/1099#issuecomment-6757044](https://github.com/emberjs/ember.js/issues/1099#issuecomment-6757044)

# regex - 正则表达式添加尾随零

> ID：11321868
> 
> 赞同：4
> 
> 时间：2012-07-04T02:57:41.857
> 
> 标签：regex, replace, pentaho

我试图在转换数据时将零填充到一系列数字中。

基本上我有这样的事情：

```
1234
2345
3456
4567 
```

而我想要转换成的是

```
12340000
23450000
34560000
45670000 
```

到目前为止我尝试过的是

```
regex: ^(.+)$
replace: $1/0000  => 1234/0000
replace: $10000   => NOTHING
replace: $1\0000  => 1234\0000 
```

如果有人可以帮助我，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T03:15:09.323

这在记事本++中对我有用

```
regex: ^(.+)$
replace: \1\20000 
```

我用 1 美元 20000 美元试了一下，但没有用 :(

另一种有效的方法如下

```
regex: ^(.+)$
replace: $1z0000
regex: ^(.+)z(0000)$
replace: $1$2 
```

这也有效

```
regex: ^(.+)$
replace: $1(0000) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T04:29:56.757

正则表达式`(?<=^\d+)$`和简单替换`0000`怎么样？这与现有数字不匹配，它只是确保它们在行尾的零宽度匹配位置之前存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T15:00:41.327

在我看来，您应该使用 pad 函数，例如修改后的 javascript 步骤中的一个，而不是任何类型的正则表达式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T13:58:06.323

如果您将这些字段作为数字，@ghoti 将它们乘以 10000 的解决方案听起来最好。但是，如果您将它们作为字符串，我真的不知道您希望对于少于或多于 4 个字符的字符串有什么行为。“123”或“98765”（因为您没有在问题中定义它）。

1-如果你想把它变成“1230000”/“987650000”（只是连接4个零）那么你可以使用计算器步骤，创建一个临时常量字段“0000”而不是创建一个字段作为原始字段的总和，这个临时字段；

2-如果你想把它变成“12300000”/“98765000”（都是 8 个字符），那么你可以使用字符串操作步骤选择 Padding = right、Pad char = 0 和 Pad Length = 9（不要问我为什么9 而不是 8）。

Both steps are really usefull for string operations, hope they help you.

# python - Python：如何更好地编写以下代码？

> ID：11321869
> 
> 赞同：1
> 
> 时间：2012-07-04T02:57:46.927
> 
> 标签：python, optimization

我对 python 很陌生，因此没有完全意识到它的力量。我有以下代码，我认为应该可以更快地工作。我有一种感觉，它可以使用 numpy/map 来完成，但不知道如何构建它。

这里有问题的两个字典都有 10,000 个键，其值由 7 个元素的列表组成，例如：

```
T_com ={0: [[1.2, 3,.65,.63, 3, 3 , 5.5]] 1:[[1.7, 2,.55,.13, 2, 8 , 5.5]] ...10,000th key:[[3.2, 9,.15,.23, 1, 3 , 2.5]]} 
```

为此，我当前的代码（下面讨论）延伸到**hours**，我觉得这不好。基本上，我正在阅读与两个字典中的每个键相关的列表，计算它们的分数，然后将分数附加到字典中，最后将其写入 ZODB。以下是片段（字典的结构与上面定义`R_com`的完全相似。）：`T_com`

```
 for tar_node,tar_community in T_com.iteritems():   # iterate over the key value pair of first dic
     for i,(ref_node,ref_community) in enumerate(R_com.iteritems()):  # iterate over second dictionary. Enumeration was required for some other operation
         score = compute_score(T_com[tar_node],R_com[ref_node])      # calculate some score   
         bTree_container.setdefault(tar_node,PersistentList () ).append( [ref_node,score,priority.pop(),0])    #Builds a list of lists associated with every value of tar_node
         if i % 2500 ==0:            # After every 2,500 values temporarily save the data to disk
             transaction.savepoint(True)
 transaction.commit()  # finally write all the data to disk 
```

关于如何减少运行时间/避免循环的任何建议？一般来说，python处理这种情况的最佳实践是什么？

正如所建议的，来自 cProfile 的一些结果：-

```
200000000 3792.449    0.000 3792.449    0.000 {numpy.core.multiarray.array}
100000000   51.033    0.000   51.186    0.000 {method 'setdefault' of 'BTrees.IOBTree.IOBTree' objects} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T03:05:50.953

从外观上看，您正在为您遍历的每个字典中的每个元素创建一棵树和一个新节点。

如果您需要检查字典的每个元素来计算分数，您唯一的另一个选择是拥有一个包含一些计算的辅助资源，这将防止您不得不通过每个字段重复。

同样，您可以保留每个字典生成树的副本，然后在获得更多信息时简单地添加到每个字典中，并最终将它们链接在一起。

抱歉，我会将其作为评论留下，但我不允许发表评论，或者可能无法弄清楚如何......

无论如何，祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T03:10:19.793

```
score = compute_score(~~T_com[tar_node]~~tar_community,~~R_com[ref_node]~~ref_community)
```

这可以为您节省一些 dict 查找时间，但您的根本问题是 x*y; 如果您真的需要这个，并且非常关心运行时间，请考虑使用 cython 或纯 c 代码来加速

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T03:15:23.450

即使每次执行 compute_score 只需要 1ms，如果 T_com 中有 10k 个元素，R_com 中有 10k 个元素，这将花费你 10k * 10k * 1ms，大约 27 小时。你提出的方式，这是一个 O(n2) 问题。你能简化你的逻辑吗？如果不能，则需要其他技术——例如并行或分布式执行。

==编辑==

正如您在评论中解释的那样，这是一个点积。你能试着把它减少到 O(n) 吗？就像是：

```
scores = []
for index in T_com.keys():
    score = T_com[index] * R_com[index]
dot_product = sum(scores) 
```

# asp.net - Cannot set to submit form by pressing enter

> ID：11321870
> 
> 赞同：0
> 
> 时间：2012-07-04T02:57:55.837
> 
> 标签：asp.net, vb.net, login-control, enter

I am on vb.net 4.0\. I want to press enter to submit my login form. However, I cannot set the btnLogin as default button for submitting my login form. As I use the login page from masterpage template, I set the default button property in contentplaceholder tag but doesn't work. Try to set in the form of masterpage also doesn't work. Should I try other method? or Javascript?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T09:55:44.187

You need to add the `defaultbutton` attribute to your `form` tag

```
<form id="form1" runat="server" defaultbutton="btnLogin">

</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T14:34:39.220

Put a panel around the login form and set the default button on there

```
<asp:Panel runat="server" id="pnlLogin" DefaultButton="btnLogin">
<asp:Label runat="server" id="lblUsername" Text="Username:" AssociatedControlID="txtUsername" />
<asp:TextBox runat="server" id="txtUsername" />
<asp:Label runat="server" id="lblPassword" Text="Password:" AssociatedControlID="txtPassword" />
<asp:TextBox runat="server" id="txtPassword" TextMode="Password" />
<asp:Button runat="server" id="btnLogin" Text="Login" />
</asp:Panel> 
```

Something along those lines.

# c# - 在不可变对象中处理来自终结器的底层对象

> ID：11321872
> 
> 赞同：1
> 
> 时间：2012-07-04T02:58:41.000
> 
> 标签：c#, .net, design-patterns, awesomium

我正在尝试环绕`Awesomium`并使其看起来尽可能接近 NET 的其余代码，`WebBrowser`因为这是针对已经使用`WebBrowser`.

在这个库中，有一个名为的类`JSObject`，它代表一个 javascript 对象。例如，您可以通过调用类的`ExecuteJavascriptWithResult`方法来获得其中之一`WebView`。如果你把它叫做 like `myWebView.ExecuteJavascriptWithResult("document", string.Empty).ToObject()`，那么你会得到一个`JSObject`代表文档的。

我正在编写一个不可变的类（它的唯一字段是一个`readonly JSObject`对象）`JSObjectWrap`，`JSObject`我想将其用作其他类的基类，这些类将模拟 .NET 类，例如`HtmlElement`和`HtmlDocument`。现在，这些类不实现`Dispose`，但是实现了`JSObject`。我首先想到的是在我的终结器中调用底层`JSObject`的`Dispose`方法（而不是实现），以便我的其余代码可以保持原样（而不是必须在任何地方添加 ' 并确保每个都是妥善处置）。`JSObjectWrap``JSObjectWrap``Dispose``using``JSObjectWrap`

但我刚刚意识到，如果两个以上`JSObjectWrap`的具有相同的基础`JSObject`，其中一个得到最终确定，这将搞砸另一个`JSObjectWrap`。所以现在我在想也许我应该保持一个静态`Dictionary`并`JSObjects`计算它们中的每一个被 a 引用了多少，`JSObjectWrap`但这听起来很混乱，我认为可能会导致主要的性能问题。

由于这对我来说听起来像是一种常见的模式，我想知道是否还有其他人有更好的主意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T03:46:39.433

要跟进 user1168577 的回答，您当然可以设置系统，以便包装器和被包装器之间存在一对一的关系。然后（更喜欢组合而不是继承），让库类在适当的情况下持有对同一包装类的引用。然后垃圾收集器可以发挥它的魔力。

但这样做可能会浪费你的时间。IDisposable 实现者的标准模式在终结器中调用 Dispose，如果它之前没有被调用的话。使用 ILSpy 或类似工具反编译 JSObject 以确认它是否执行此操作。如果是这样，那么您就无需编写*也可以*做到这一点的代码！

如果您确定您的包装库永远不会用于新代码，那么您甚至不需要实现 IDisposable；如果是，则实现该接口，但允许遗留代码省略调用 Dispose，除非您出于某种原因必须对其进行修改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T03:14:41.227

如果超过 2 个 JSObjectWrap 具有相同的底层 JSObject，则引用 JSObject 的引用超过 2 个，因此在引用计数达到 0 之前不会被垃圾收集。我错过了什么吗？

评论后编辑：

好的。我得到它。您想要做的是能够共享 JSObject 但只要有人引用它就不想处置它。对我来说，唯一的出路似乎是您建议保留 JSObjects 字典。为了绘制一个平行线，这与 .NET/JVM 对共享的不可变字符串所做的非常相似，唯一的区别是在我们的示例中 dispose 意味着在这里对字符串进行垃圾收集，除非引用计数为零（我除非维护字典，否则无法确定猜测），字符串不符合垃圾收集条件。

# image - 位于图像上的文本框，在 IE8 中不可选择

> ID：11321874
> 
> 赞同：0
> 
> 时间：2012-07-04T02:58:46.953
> 
> 标签：image, for-loop, textbox

我需要一个搜索栏的背景图片，类似于 fotolia.com。所以我将图像定位在所需位置，然后在其上相对定位一个文本框，然后在文本框上设置背景：透明，以便通过文本框可以看到图像......

这在 FF 和 chrome 中运行良好......它可以选择文本框并开始输入它..

在 IE8 中.. 文本框存在，但无法使用鼠标选择...但是如果您使用 TAB 按钮，文本框将被选中，我可以输入它...唯一的问题是在 IE 中，即文本框是无法选择输入它...

请注意：z-index 似乎不是问题，并且是预防性的，我一直保持在高位..

任何人都可以帮助..

谢谢你..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T03:03:36.590

您可能不应该放置一个透明的文本框，而是设置`background-image`文本框的。

```
input[type="text"] { background-image: url(foo.png); } 
```

或者，您可以将`<input>` *放置在*a或其他块元素中并为其提供`<div>`背景图像，但不要*放在*`<img>`.

# django - 使用 Bitnami Djangostack 在 EC2 上部署 Django：无法加载 WSGI 脚本

> ID：11321877
> 
> 赞同：2
> 
> 时间：2012-07-04T02:58:53.480
> 
> 标签：django, apache, amazon-ec2, mod-wsgi, bitnami

在过去的几天里，我一直在努力使用[Bitnami Djangostack在 Amazon EC2 上部署 Django 应用程序。](http://bitnami.org/stack/djangostack/)当我去我的主页（比如[http://example.com](http://example.com)）时，我看到默认的 bitnami 页面（**/opt/bitnami/apache2/htdocs/index.html**），但是，当我打开[http://example.com/ portnoy](http://example.com/portnoy)，我得到“内部服务器错误”。但众所周知，如果 mod_wsgi 设置正确，来自 httpd.conf 的 DocumentRoot 值将被忽略，因此，我应该在访问[http://example.com](http://example.com)时看到我的 Django 应用程序。本质上，主要错误是 - '目标 WSGI 脚本不能作为 Python 模块加载'。两个问题：1) 任何想法如何修复这些 mod_wsgi 错误（Apache 日志如下）？2）如何禁用默认**/opt/bitnami/apache2/htdocs/index.html页面并在访问**[http://example.com](http://example.com)时从 django 应用程序显示我的主页？先感谢您！

# 细节

在我的 EC2 实例上，我正在运行带有 DjangoStack 1.4-1 的 64 位 Ubuntu 12.04。我的 Django 项目位于此处 - **/opt/bitnami/apps/django/django_projects/portnoy**。

```
root@example:/opt/bitnami/apps/django/django_projects/portnoy# ls
manage.py README.md settings.py site_media users Procfile sandbox static test.py topics urls.py views.py __init__.pyc templates testviews.py 
```

Apache 错误日志 ( **/opt/bitnami/apache2/logs/error_log** )：

```
[Wed Jul 04 02:29:00 2012] [error] [client 140.180.6.212] File does not exist: /opt/bitnami/apache2/htdocs/favicon.ico
[Wed Jul 04 02:29:15 2012] [error] [client 140.180.6.212] mod_wsgi (pid=3990): Target WSGI script '/opt/bitnami/apps/django/scripts/django.wsgi' cannot be loaded as Python module.
[Wed Jul 04 02:29:15 2012] [error] [client 140.180.6.212] mod_wsgi (pid=3990): Exception occurred processing WSGI script '/opt/bitnami/apps/django/scripts/django.wsgi'.
[Wed Jul 04 02:29:15 2012] [error] [client 140.180.6.212] Traceback (most recent call last):
[Wed Jul 04 02:29:15 2012] [error] [client 140.180.6.212]   File "/opt/bitnami/apps/django/scripts/django.wsgi", line 8, in <module>
[Wed Jul 04 02:29:15 2012] [error] [client 140.180.6.212]     import django.core.handlers.wsgi
[Wed Jul 04 02:29:15 2012] [error] [client 140.180.6.212]   File "/opt/bitnami/apps/django/lib/python2.7/site-packages/django/core/handlers/wsgi.py", line 8, in <module>
[Wed Jul 04 02:29:15 2012] [error] [client 140.180.6.212]     from django import http
[Wed Jul 04 02:29:15 2012] [error] [client 140.180.6.212]   File "/opt/bitnami/apps/django/lib/python2.7/site-packages/django/http/__init__.py", line 119, in <module>
[Wed Jul 04 02:29:15 2012] [error] [client 140.180.6.212]     from django.http.multipartparser import MultiPartParser
[Wed Jul 04 02:29:15 2012] [error] [client 140.180.6.212]   File "/opt/bitnami/apps/django/lib/python2.7/site-packages/django/http/multipartparser.py", line 13, in <module>
[Wed Jul 04 02:29:15 2012] [error] [client 140.180.6.212]     from django.utils.text import unescape_entities
[Wed Jul 04 02:29:15 2012] [error] [client 140.180.6.212]   File "/opt/bitnami/apps/django/lib/python2.7/site-packages/django/utils/text.py", line 4, in <module>
[Wed Jul 04 02:29:15 2012] [error] [client 140.180.6.212]     from gzip import GzipFile
[Wed Jul 04 02:29:15 2012] [error] [client 140.180.6.212]   File "/opt/bitnami/python/lib/python2.7/gzip.py", line 10, in <module>
[Wed Jul 04 02:29:15 2012] [error] [client 140.180.6.212]     import io
[Wed Jul 04 02:29:15 2012] [error] [client 140.180.6.212]   File "/opt/bitnami/python/lib/python2.7/io.py", line 60, in <module>
[Wed Jul 04 02:29:15 2012] [error] [client 140.180.6.212]     import _io
[Wed Jul 04 02:29:15 2012] [error] [client 140.180.6.212] ImportError: /opt/bitnami/python/lib/python2.7/lib-dynload/_io.so: undefined symbol: PyUnicodeUCS2_AsEncodedString
[Wed Jul 04 02:29:15 2012] [error] [client 140.180.6.212] File does not exist: /opt/bitnami/apache2/htdocs/favicon.ico
[Wed Jul 04 02:44:00 2012] [error] [client 140.180.6.212] File does not exist: /opt/bitnami/apache2/htdocs/favicon.ico 
```

让我快速介绍一下文件的内容，以使案例更加具体。

这是我的**/etc/apache2/sites-available/default**文件

```
<VirtualHost *:80>
ServerAdmin root@example.com
ServerName example.com

Alias /site_media/ /opt/bitnami/apps/django/django_projects/portnoy/site_media/
Alias /static/ /opt/bitnami/apps/django/lib/python2.7/site-packages/django/contrib/admin/static/
Alias /robots.txt /opt/bitnami/apps/django/django_projects/portnoy/site_media/robots.txt
Alias /favicon.ico /opt/bitnami/apps/django/django_projects/portnoy/site_media/favicon.ico

CustomLog "|/usr/sbin/rotatelogs /opt/bitnami/apps/django/django_projects/logs/access.log.%Y%m%d-%H%M%S 5M" combined
ErrorLog "|/usr/sbin/rotatelogs /opt/bitnami/apps/django/django_projects/logs/error.log.%Y%m%d-%H%M%S 5M"
LogLevel warn

WSGIProcessGroup example.com
WSGIScriptAlias / /opt/bitnami/apps/django/scripts/django.wsgi

<Directory /opt/bitnami/apps/django/django_projects/portnoy/site_media>
Order deny,allow
Allow from all
Options -Indexes FollowSymLinks
</Directory>

<Directory /opt/bitnami/apps/django/django_projects/portnoy/conf/apache>
Order deny,allow
Allow from all
</Directory>
</VirtualHost> 
```

这是我的**/opt/bitnami/apps/django/scripts/django.wsgi**文件

```
import os, sys

sys.path.append('/opt/bitnami/apps/django/lib/python2.7/site-packages/')
sys.path.append('/opt/bitnami/apps/django/django_projects')
sys.path.append('/opt/bitnami/apps/django/django_projects/portnoy')
os.environ['DJANGO_SETTINGS_MODULE'] = 'portnoy.settings'

import django.core.handlers.wsgi

application = django.core.handlers.wsgi.WSGIHandler() 
```

这是**/opt/bitnami/apache2/conf/httpd.conf**文件的相关部分：

```
ServerRoot "/opt/bitnami/apache2"
Listen 80
ServerName example.com
DocumentRoot "/opt/bitnami/apache2/htdocs"
LoadModule wsgi_module modules/mod_wsgi.so
WSGIPythonHome /opt/bitnami/python
Include "/opt/bitnami/apache2/conf/ssi.conf"
Include "/opt/bitnami/apps/django/conf/django.conf"
Include "/opt/bitnami/apache2/conf/bitnami/httpd.conf" 
```

注意：我在这篇文章中使用 example.com 来指代我实际拥有的域。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T23:45:06.290

这已在以下位置得到回答：

[https://groups.google.com/forum/?fromgroups#!topic/modwsgi/YLDd6ojQrzo](https://groups.google.com/forum/?fromgroups#!topic/modwsgi/YLDd6ojQrzo)

# macros - clojure 中的宏是如何扩展的？

> ID：11321880
> 
> 赞同：3
> 
> 时间：2012-07-04T02:59:41.330
> 
> 标签：macros, clojure, expand

在 Programming Clojure(Stuart) 一书中，当阅读如何扩展宏时，我感到困惑。

```
user=> (defmacro chain
          ([x form] (list '. x form))
          ([x form & more] (concat (list 'chain (list '. x form)) more)))
#'user/chain 
```

上面的宏可以展开为：

```
user=> (macroexpand '(chain a b c))
(. (. a b) c) 
```

但以下仅扩展到第一级：

```
user=> (macroexpand '(and a b c))
(let* [and__3822__auto__ a]
     (if and__3822__auto__ (clojure.core/and b c) and__3822__auto__)) 
```

和***宏源***：

```
user=> (source and)
(defmacro and([] true)
    ([x] x)
    ([x & next]
    `(let [and# ~x]
          (if and# (and ~@next) and#)))) 
```

为什么***chain***宏一直扩展***而***不是and？为什么它不扩展为以下内容：

```
user=> (macroexpand '(chain a b c d))
(. (chain a b c) d) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T03:14:05.940

`macroexpand`一遍又一遍地扩展最外层的形式，直到它得到一个非宏观的结果。如果您只想查看单个宏扩展阶段的输出，请使用`macroexpand-1`.

所以区别在于，`chain`'s 递归调用是第一个，而`and`'s 不是。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T04:32:13.120

对我来说，amalloy 的回答直接回答了你的问题。但是，如果隐藏在您的问题之下，您想知道如何显示某些东西的完全宏观扩展的形式，我会向您指出[clojure.walk](http://clojuredocs.org/clojure_core/1.3.0/clojure.walk)的方向[`macroexpand-all`](http://clojuredocs.org/clojure_core/1.3.0/clojure.walk/macroexpand-all)。使用相同的示例，现在使用 macroexpand-all：

```
user=> (macroexpand-all '(and a b c))
(let* [and__3546__auto__ a]
  (if and__3546__auto__
    (let* [and__3546__auto__ b]
      (if and__3546__auto__ c and__3546__auto__))
    and__3546__auto__)) 
```

所有宏都已扩展。另请注意，对于您的第一个示例，它的行为与`macroexpand`（由于 amalloy 给出的原因）相同：

```
user=> (macroexpand-all '(chain a b c))
(. (. a b) c) 
```

# javascript - R gvisTable 使用事件触发选项和 Javascript 代码进行预选

> ID：11321883
> 
> 赞同：1
> 
> 时间：2012-07-04T03:00:03.357
> 
> 标签：javascript, r, google-visualization

在**R**中，我希望为 gvisTable 设置输出选择，以便突出显示特定的行或列。

例如我有以下代码：

```
a <- as.data.frame(matrix(1:100, nrow=10))

plot(gvisTable(a)) 
```

只有在单击第 4 行之前，它才会突出显示。

有没有办法在运行绘图功能时预先选择第 4 行，即它会自动突出显示第 4 行。

在查看 googleVis 的小插图后，似乎有一个事件侦听器和事件触发器，可以将一些 javascript 代码插入到选项中，以便更改输出。这是通过使用选项 gvis.listener.jscode 完成的。触发器是否有一个等效的触发事件。我认为 javascript 代码需要使用类似的东西，`setSelection()`但我的 Javascript 知识充其量是有限的，所以我不太确定如何集成它。

ps事件监听器可以通过运行找到

```
demo(EventListener) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T04:00:08.007

我能想到的唯一方法是将一些自定义 JavaScript 注入到由调用创建的 HTML 中`gvisTable()`。您将无法像您提供的示例那样使用 EventListener - 原因是当前实现的 eventListener 仅在单击表时才会执行。您需要在此之前执行您的代码。那么，插入它的最佳位置似乎是在`jsDrawChart`返回的 HTML 部分中。这是图表对象的 JS 表示被组装的地方。绘制图表后`draw`，您可以对该对象进行其他调用。

快速查看表格对象的[Google Charts 文档](https://google-developers.appspot.com/chart/interactive/docs/gallery/table)表明`setSelection()`，假设您使用正确的参数格式，您可以在 Javascript 中使用一个不错的函数。

我做了以下事情：

```
mytab <- (gvisTable(a,chartid="myTable"))
#you just want to add the following line of JS before the close bracket in the jsDrawChart function.
# chart.setSelection([{'row':2, 'column':null}]);

#in my case, that turned out to be the following:
mytab$html$chart["jsDrawChart"] <- "\n// jsDrawChart\nfunction drawChartmyTable() {\n  var data = gvisDatamyTable();\n  var options = {};\noptions[\"allowHtml\"] = true;\n\n     var chart = new google.visualization.Table(\n       document.getElementById('myTable')\n     );\n     chart.draw(data,options);\n  chart.setSelection([{'row':2, 'column':null}]);   \n\n}\n  \n" 
```

您当然可以通过使用 RegEx 在右括号之前自动插入额外的 JS 行或修改 GoogleVis 函数的源代码来使其更加健壮。

但是一旦我添加了那行 JS，我现在就可以运行`plot(mytab)`并让它自动选择我想要的行（请记住它是 0 索引的）。

# ios5 - IOS5 和 Xcode 4.3 的 @2x 图像问题

> ID：11321905
> 
> 赞同：0
> 
> 时间：2012-07-04T03:02:31.177
> 
> 标签：ios5, xcode4.3, retina-display

我已经在 Google 和 Stackoverflow 上为这个问题寻找了几个小时的答案，但到目前为止，这些建议都没有奏效，所以也许你们中的一个人可以告诉我问题出在哪里。

这正是我正在做的，一步一步：

1.  创建一个 44x44 红色方形图像 (test.png) 和一个 88X88 绿色方形图像 (test@2x.png)
2.  将两个图像拖到我的 Xcode 项目中名为“Resources”的文件夹中
3.  在控制器的 viewWillAppear 方法中插入以下代码

    ```
    UIImage *navigationBackground = [[UIImage imageNamed:@"test.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 0, 0, 0)];
    [self.navigationController.navigationBar setBackgroundImage:navigationBackground forBarMetrics:UIBarMetricsDefault]; 
    ```

在模拟器（iOS 5.1）上启动应用程序后，该栏有红色背景，这意味着 iOS 加载了低分辨率的图像，而不是高分辨率的图像。

我在这里做错了什么？我错过了一步吗？我必须更改 plist 文件吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T06:13:00.680

模拟器默认处于非视网膜模式。确保从硬件/设备菜单中选择 iPhone (Retina)。

我在您发布的代码中看不到任何明显错误的地方。

# python - 在 django-taggit 中，如何获取与特定用户关联的对象的标签？

> ID：11321906
> 
> 赞同：7
> 
> 时间：2012-07-04T03:02:30.810
> 
> 标签：python, django, django-models, tags, django-taggit

我有一系列与特定用户相关联的对象，如下所示：

```
from django.db import models
from django.contrib.auth.models import User
from taggit.managers import TaggableManager

class LibraryObject(models.Model):
    title = models.CharField(max_length=255)
    owner = models.ForeignKey(User)
    tags = TaggableManager()
    class Meta:
        abstract = True

class Book(LibraryObject):
    summary = models.TextField()

class JournalArticle(LibraryObject):
    excerpt = models.TextField()

# ...etc. 
```

我知道我可以像这样检索所有标签：

```
>>> from taggit.models import Tag
>>> Tag.objects.all() 
```

但是如何检索与特定用户关联的所有标签？我在想象类似`Tag.objects.filter(owner=me)`的东西，但这当然行不通。

作为参考，这里是[django-taggit 文档](http://django-taggit.readthedocs.org/en/latest/index.html)。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-03T06:00:33.843

我遇到了类似的问题，这是我的解决方案：

```
tags = Tag.objects.filter(book__owner=me)
tags |= Tag.objects.filter(journalarticle__owner=me)
tags = tags.distinct() 
```

希望会有所帮助~

# javascript - 使用 innerHTML 将动态参数传递给 JavaScript 函数

> ID：11321914
> 
> 赞同：5
> 
> 时间：2012-07-04T03:03:16.900
> 
> 标签：javascript, html

我在使用 innerHTML 将动态参数传递给 JavaScript 函数时遇到问题。

下面是我正在使用的当前代码：

```
var name = "test";

frm.innerHtml = '<button name="close" id="close" title="Cancel" type="button"
     onclick="closeTab('+name+');">Return</button>'; 
```

当我调试`closeTab()`函数的代码时，变量指定的`name`参数是`null`.

我认为在修改 innerHTML 属性时声明值存在问题。

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T03:17:54.890

您的动态声明将参数作为变量传递，而不是参数的值。为了更正此问题，您必须将值作为字符串而不是变量传递，这是通过将变量用单引号括起来和转义来完成的，如下所示：

```
var name = "test";

frm.innerHtml = '<button name="close"  id="close"  title="Cancel" type="button"
      onclick="closeTab(\''+name+'\');">Return</button>'; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-04T03:09:59.483

您生成的代码是：

```
<button ... onclick="closeTab(test);">Return</button> 
```

你能看出有什么问题吗？`test`当您实际上打算将其作为字符串时，它被视为变量。

我喜欢使用`JSON.stringify`使变量可解析（有点像[`var_export`](http://php.net/var-export)在 PHP 中），但在这种情况下，您还需要转义引号。所以：

```
JSON.stringify(test).replace(/"/g,"&quot;") 
```

在您的按钮中使用它，而不仅仅是`test`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T04:55:11.193

使用 DOM：

```
var name="test";
var el = document.createElement("button");
el.name = "close";
el.id = "close";
el.title = "Cancel";
el.type = "button";
el.onclick = function() {  // an inline function that will be executed when el is clicked
    closeTab(name);        // `name` here contains `"test"`
};
frm.appendChild(el); 
```

我真的不鼓励过度使用`innerHTML`，因为它很乱，有时会很慢。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-12T14:55:40.923

假设您的 html 是 -

```
<form id='frm'>

</form> 
```

你的 JS 应该是 -

```
var name = "test";
var innerHtml = "<button name='close' id='close' title='Cancel'   type='button'>Return</button>";
$("#frm").html(innerHtml);
$("#close").attr("onclick","javascript:closeTab('"+name+"');"); 
```

看看这个 - [http://jsfiddle.net/arindam006/avGHz/1/](http://jsfiddle.net/arindam006/avgHz/1/)

这是实现这一目标的最干净的方法，尽管 innerHtml 并不是上面每个人都建议的正确方法。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-04T03:19:56.090

我只是在 innerHTML 中使用了 onclick="closeTab(name);"> 并且它起作用了。我猜这个工作的 coz 名称是全局变量。

# api - 如何在 CATIA CAA V5 R18 c++ 中学习流

> ID：11321916
> 
> 赞同：3
> 
> 时间：2012-07-04T03:03:36.243
> 
> 标签：api, visual-c++, cad, catia, caa

我是 CAA 的新手。我已经阅读了 CAA 文档。我可以找到我需要的接口，但我不知道我应该从哪里查询它们。在 CAA 文档中，没有关于接口相关内容的详细描述。我怎样才能学会流。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T06:25:25.810

**您可以在CAA V5 对象浏览器**上找到组件和相关接口。

```
Menu > CAAV5 Workspace > CAA V5 Object Browser 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-14T06:54:30.053

如果接口在同一组件上实现，则查询一个接口到另一个接口将是成功的。例如：如果 interface_1 以名称 Component_1 实现，而 interface_2 以 Component_1 的扩展名实现。由于两者都在同一个组件上实现，因此任何相互查询。

# python - 虚拟环境设置为 python 2.6，但在 2.7 中安装包

> ID：11321918
> 
> 赞同：0
> 
> 时间：2012-07-04T03:03:44.187
> 
> 标签：python, virtualenv

我使用以下内容来创建我的虚拟环境。

```
mkvirtualenv myenv --no-site-packages -p /usr/bin/python2.6 
```

当我在虚拟环境中时，我可以看到我正在使用 python2.6，即使系统的默认值在 ubuntu 11.10 上是 2.7。

所以，我为一个包运行 python setup.py install 并且正在安装在 python2.7 站点包中。请注意，我依次安装的软件包运行 easy_install 来安装依赖项。

例如

```
Using /usr/lib/pymodules/python2.7
Searching for nltk==2.0.1
Best match: nltk 2.0.1
Processing nltk-2.0.1-py2.7.egg
nltk 2.0.1 is already the active version in easy-install.pth 
```

如何为python创建一个纯虚拟环境？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T05:03:21.237

如果您使用活动脚本并且它不能正常工作。尝试直接安装软件包，例如：

```
/virtualenv/bin/pip install package 
```

这是一个 100% 不错的工作解决方案。当你想从 virtualenv 启动你的应用程序时，你可以：

```
/virtualenv/bin/python your_project.py 
```

# windows-7 - Windows 7 中的命令行照片打印

> ID：11321919
> 
> 赞同：3
> 
> 时间：2012-07-04T03:03:45.977
> 
> 标签：windows-7, printing, photo

我需要从 Windows 7 的命令行打印照片 (.jpg)。我尝试使用 lpr 没有成功，并找到了适用于 Windows XP 的方法，如下所示：

```
rundll32 shimgvw.dll ImageView_PrintTo /pt myPhoto.jpg "myPrinter" 
```

这不起作用（不足为奇），而且我在谷歌上搜索的时间也没有别的。我正在尝试找到一种在任何 Windows 7 机器上执行此操作的常用方法，而无需安装或设置任何东西。是否存在这样的命令？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-12-05T14:24:19.337

也许重新格式化命令并添加一些绝对路径会有所帮助？以下对我有用：

```
rundll32 C:\WINDOWS\system32\shimgvw.dll,ImageView_PrintTo "c:\mydir\my.bmp" "Fictional HP Printer" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-11T10:16:45.193

通过 MS Paint 尝试

```
mspaint /pt <FILE> <PRINTER> 
```

对我来说就像一个魅力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T03:56:25.207

你看过这里吗？

[http://social.technet.microsoft.com/Forums/en-US/ITCG/thread/87e942da-faec-48e1-b339-7ba3da7c9134](http://social.technet.microsoft.com/Forums/en-US/ITCG/thread/87e942da-faec-48e1-b339-7ba3da7c9134)

提供的 rundll32 命令行看起来与您的略有不同。或者，该页面暗示 mspaint.exe 具有用于打印的命令行选项。

请注意，我没有尝试过任何这些，虽然......

# javascript - 依赖复选框，你认为这可以简化更多吗？

> ID：11321923
> 
> 赞同：0
> 
> 时间：2012-07-04T03:04:13.557
> 
> 标签：javascript, jquery, checkbox

我有以下正在运行的代码，我想知道这是否可以进一步简化。

演示：http: [//jsfiddle.net/TnpNV/8/](http://jsfiddle.net/TnpNV/8/)

```
<form name="cbform">
<input type="checkbox" value="1" name="one" id="one" /> one<br />
<input type="checkbox" value="1" name="two" id="two" /> two
</form>​

<script>
$('#one, #two').click(function(event) {
    var checked = $(this).is(':checked');
    if (checked) {
        $('#one').attr('checked', true);
        $('#two').attr('checked', true);
    }
    else {
        $('#one').attr('checked', false);
        $('#two').attr('checked', false);
    }
});
</script> 
```

它基本上是一个相互依赖的两个复选框。Jquery 用于检查和取消选中它们。

问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T03:28:53.820

**最紧凑的 DEMO** [http://jsfiddle.net/U5GfF/](http://jsfiddle.net/U5GfF/) **或** [http://jsfiddle.net/U5GfF/3/](http://jsfiddle.net/U5GfF/3/)

这是您可以为您的代码获得的最少行版本：即

`this.checked`将返回`true`并`false`在点击事件上休息`prop`将相应地设置`checked`属性。`:)`

希望这可以帮助，

**代码**

```
$("#one, #two").click(function() {
    $("input").prop('checked', this.checked);
}); 
```

**或者**

```
$("#one, #two").click(function() {
    $("#one, #two").prop('checked', this.checked);
}); 
```

**或者**

```
$("#one, #two").on('click', function() {
    $("#one, #two").prop('checked', this.checked);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T03:07:57.743

你可以使用`prop()`方法：

```
$('#one, #two').click(function(event) { // or $("input:checkbox")
    if ($(this).is(':checked')) {
        $('#one, #two').prop('checked', true); // or $("input:checkbox")
    } else {
        $('#one, #two').prop('checked', false);
    }
}); 
```

[演示](http://jsfiddle.net/TnpNV/10/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T03:15:03.833

试试这个，只有 2 行 :-)

**现场演示：**

[http://jsfiddle.net/TnpNV/15/](http://jsfiddle.net/TnpNV/15/)

**对于 jQuery 现代版本：**

```
$('#one, #two').on('click', function(e) {
  var prop = ($(this).is(':checked')) ? true : false;
  $('#one, #two').prop('checked', prop);
});​ 
```

**对于 jQuery 旧版本** *（因为我在您的 jsFiddle 中看到您使用的是 jQuery 1.4.4 版本）此外，此代码适用于所有版本。*

```
$('#one, #two').click(function(e) {
  var prop = ($(this).is(':checked')) ? true : false;
  $('#one, #two').attr('checked', prop);
}); 
```

​</p>

# linux - 无法更新 slackware 中的 resolv.conf 文件

> ID：11321925
> 
> 赞同：0
> 
> 时间：2012-07-04T03:04:16.553
> 
> 标签：linux, unix, slackware

最近，我设置了一个 slackware 盒子，但有些问题困扰着我。

1.  我使用 dhcp 配置启动 netconfig 路由，之后我无法访问网络。我为 google.com 发出 ping 命令，但收到 ping 未知服务器 google 消息。2\. 其次，我通过编辑 /etc/rc.d/rc.inet1.conf 将 dhcp 配置更改为静态 IP，填充静态 ip，然后为 dns 配置更新 /etc/resolv.conf 文件。在这里，我搞砸了，当我保存文件时，它会弹出“读取时正在写入文件”的消息，我保存时再次打开它。我丢失了所有的编辑。

我认为这个问题是因为 dhcp 服务更新了这个文件。但我真的不知道如何解决它。

有人处理这个案子吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T07:55:29.873

文件 /etc/resolv.conf 由 root 拥有，因此您需要以 root 身份登录，su 到 root 或在编辑时使用 sudo。此外，如果您可以剪切和粘贴错误消息而不是写下您记得的内容，这将有所帮助。

# append - SevenZipSharp 附加加密存档

> ID：11321927
> 
> 赞同：2
> 
> 时间：2012-07-04T03:04:19.350
> 
> 标签：append, archive, 7zip, encryption, sevenzipsharp

我正在使用 7 个 zip sharp 并且在尝试将文件添加到加密存档时遇到问题。附加到非加密存档（使用适当的方法）似乎有效，但加密存档会引发以下错误

```
Invalid archive: open/read error! Is it encrypted and a wrong password was provided?
If your archive is an exotic one, it is possible that SevenZipSharp has no signature 
for its format and thus decided it is TAR by mistake. Message: Can not update the archive:
Open() failed. 
```

我想知道是否有人成功执行了此操作这是我正在使用的一些示例代码

```
void AppendEncFilefile(Stream docstream, string addfilename, string archivename)
{          

    SevenZip.SevenZipCompressor compressor = new SevenZip.SevenZipCompressor();
    compressor.CompressionMode = SevenZip.CompressionMode.Append;
    compressor.CompressionLevel = SevenZip.CompressionLevel.Ultra;
    compressor.ArchiveFormat = SevenZip.OutArchiveFormat.SevenZip;
    compressor.EncryptHeaders = true;

    //this fails : trying to pass archive and file to add
    compressor.CompressFilesEncrypted(datafile, "password", addfilename);
    //this fails : trying to pass stream containg data to be written, and filename to save as
    compressor.CompressStreamDictionary(
          new Dictionary<string, System.IO.Stream>() 
              { 
                 { addfilename, xmldocstream } 
              }
          , archivename, "password");    
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T08:38:23.383

我也有同样的问题。我通过在不加密的情况下进行压缩来“解决”这个问题，但添加了一个带加密的 +1 文件。7z 文件管理器要求输入密码，7z 包含所有文件——这对我来说已经足够了。当然，文件管理器列出了其余未加密的文件。

仍在寻找解决此问题的**好**方法，但是对于解决方法，它只是暂时起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-01T13:06:45.637

有同样的问题尝试：

```
 compressor.ArchiveFormat = SevenZip.OutArchiveFormat.Zip; 
```

代替：

```
 compressor.ArchiveFormat = SevenZip.OutArchiveFormat.SevenZip; 
```

# actionscript-3 - 访问 AS3 生成的影片剪辑的未定义属性

> ID：11321930
> 
> 赞同：0
> 
> 时间：2012-07-04T03:04:40.453
> 
> 标签：actionscript-3, function, actionscript, instance

我已经从动作脚本在我的时间轴上创建了电影剪辑......但是每当我尝试引用它们时，它会说：

> 符号 'puzzle1'，图层 'AS3'，第 1 帧，第 27 行 1120：访问未定义的属性 piece1。

但它就在那里。我可以看到它，我可以看到我在哪里给它起了实例名称。如果实例名称在我发布时不在我的 FLA 的舞台上，我是否需要以另一种方式调用实例名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T03:29:26.757

根据错误的内容，我可以假设您正在尝试访问`piece1`舞台上的`puzzle1`哪个也在舞台上。

如果是这种情况，`piece1`则需要通过以下方式引用：

```
MovieClip(root).piece1 
```

# iphone - 哪个执行更快的获取，使用 SELF IN 或 ==？

> ID：11321943
> 
> 赞同：0
> 
> 时间：2012-07-04T03:06:37.543
> 
> 标签：iphone, objective-c, ios, core-data

假设我有一个名为的实体`User`和一个名为 的实体`Message`。一个用户有几条消息（一对多关系），一条消息只有一个作者。

现在说我想获取该用户的所有消息。我有两个选择：

1.  `predicate = [NSPredicate predicateWithFormat:@"SELF IN %@ ", user.messages];`
2.  `predicate = [NSPredicate predicateWithFormat:@"authorEmail == %@ ", user.email];`

哪个会更快，为什么？假设用户的`email`索引。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T12:41:28.257

如果您关心性能，请不要重新获取。获取**总是很**昂贵，因为获取**总是**必须从文件系统中读取（按照惯例）。如果内存中已经有数据，只需使用不带 NSFetchedResultsController 的 UITableViewController。

如果您不关心性能，那么无论哪种方式都无关紧要。

# php - PHP 购物车脚本 - 何时清空购物车？

> ID：11321954
> 
> 赞同：0
> 
> 时间：2012-07-04T03:08:20.573
> 
> 标签：php, paypal, shopping-cart, checkout

我正在处理 php 中的购物车脚本，需要一些关于如何处理最终过程的建议。

一旦客户将商品输入购物车，选择运输选项，然后单击结帐按钮，他们就会被重定向到使用 BMCreateButton 动态生成的 paypal 按钮。

我的问题是，清空客户购物车的最佳时间是什么时候？

我已经在贝宝上设置了自动退货功能，我打算用它来清空购物车，但它不是很好，因为客户必须点击链接才能重定向。

那么当他们在动态按钮之前单击结帐按钮时，我应该清空它吗？

我也可以在 php 中使用这些设置来防止缓存返回按钮问题

```
// Date in the past
header("Expires: Mon, 26 Jul 1997 05:00:00 GMT");
// Always modified
header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT");
// HTTP/1.1
header("Cache-Control: no-store, no-cache, must-revalidate");
header("Cache-Control: post-check=0, pre-check=0", false);
// HTTP/1.0
header("Pragma: no-cache"); 
```

男生会推荐什么？

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T03:14:24.043

来自[Paypal 网站](https://cms.paypal.com/cms_content/US/en_US/files/developer/PP_WebsitePaymentsStandard_IntegrationGuide.pdf)：
*使用 PayPal Payments Standard 的自动退货，您可以避免让人们在使用 PayPal 完成付款后**单击按钮返回您的网站**
... ...
注意：如果您已打开自动退货并已选择为新用户打开 PayPal Account Optional，新用户不会被自动引导回您的网站，但可以选择返回。*

意思是，如果您想在用户不点击链接/按钮的情况下自动重定向工作，您应该禁用该选项：`PayPal Account Optional for new users`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T03:16:07.770

一旦您更新/插入数据库。

这是因为如果他们返回并添加更多产品，则会有重复的条目，而您不希望这样。

一旦您插入数据库并将`header()`它们转移到 Paypal 等，请清除他们的购物车。

# c# - C# .net 对象引用未设置为静态类上的对象实例

> ID：11321959
> 
> 赞同：2
> 
> 时间：2012-07-04T03:09:51.527
> 
> 标签：c#, .net, class, exception

使用 CodeMaid 清理我的代码后，我遇到了一个奇怪的问题。现在，保存我所有全局变量和函数的类正在抛出异常，我不知道为什么。

GlobalClass.GetID() 中抛出外部异常：TypeInitializationException。

内部异常是：对象引用未设置为对象的实例

这是导致此问题的一些代码的示例。

## 图书馆

```
namespace ErrorCode //Library
{

    public static class GlobalClass
    {
        private static int _globalid = 0; //Never reached
        public static int GlobalID
        {
            get
            {
                return _globalid;
            }
        } //Read-Only

        public static int GetID()
        {
            retun _globalid++; //Crashes here with TypeInitialzationException
        }
    }

    public class Entity
    {
        private int _id;
        public int ID
        {
            get
            {
                return _id;
            }
        }
        public Entity()
        {
            _id = GlobalClass.GetID(); //Crashes here with object reference not set to an instance of an object? 
        }
    }
} 
```

## 实际程序

```
using ErrorCode;
namespace MainProgram //The program that will run
{
    public class Program
    {
        public Entity e = new Entity(); //Triggers GlobalClass.GetID()
    }
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T03:22:44.863

尝试使用静态构造函数：

```
public static class GlobalClass
{
    static GlobalClass()
    {
        GlobalClass._globalid = 0;
    }

    private static int _globalid;
    public static int GlobalID
    {
        get
        {
            return _globalid;
        }
    }

    //...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T03:25:01.820

您将代码编辑得太多，并删除了异常的真正原因。具有如下字段初始值设定项的类：

```
public static class Globals {
    private static int _globalid = 0;
} 
```

CLR 不直接支持。编译器重写此代码，它为类创建一个静态构造函数（或修改现有的构造函数）并改为这样编写：

```
public static class Globals {
    private static int _globalid;
    static Globals() {
        _globalid = 0;
    }
} 
```

它对*所有*带有初始化程序的静态字段执行此操作。其中之一是在您的情况下引发异常，我们在您的代码段中看不到它。追踪它的一种方法是强制调试器停止异常，Debug + Exceptions，勾选 CLR 异常的 Throw 复选框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T03:27:43.217

正如 Anthony Pegram 暗示的那样，我怀疑您有一个静态构造函数或另一个未包含在示例代码中的静态字段初始值设定项。此构造函数或初始化程序抛出空引用异常。

# javascript - Javascript只允许某些字符？

> ID：11321963
> 
> 赞同：1
> 
> 时间：2012-07-04T03:10:13.657
> 
> 标签：javascript, validation

我有一个文本框，用户可以在其中输入评论。注释可以是字母（小写或大写）或数字或 @ 或分号或冒号或句点或逗号或 $ 或正斜杠或空格或 - 或 _ 的组合。我尝试使用以下函数，但它不测试 $ 或空格或 - 或 _。我怎样才能将这些也包含在这个 JavaScript 函数中？我还想在输入中允许一个空字符串。

```
function alphanumeric(inputtxt) 
{  
  var letters = /^[0-9a-zA-Z]+$/; 
  if(inputtxt.value.match(letters)) 
  { 
    alert('Your registration number have accepted : you can try another'); 
    document.form1.text1.focus(); 
    return true; 
  } 
  else 
  { 
    alert('Please input alphanumeric characters only'); 
    return false; 
  } 
} 
```

**答案**如下（在 xdazz 的帮助下提供）：

```
 function alphanumeric(inputtxt) 
{  
  var letters = /^[\w\d\s@;:.,-/$/]*$/; 
  if(inputtxt.value.match(letters)) 
  { 
    alert('Your registration number have accepted : you can try another'); 
    document.form1.text1.focus(); 
    return true; 
  } 
  else 
  { 
    alert('Please input alphanumeric characters only'); 
    return false; 
  } 
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T03:23:05.887

试试下面的正则表达式。

```
var letters = /^[\w\d\s$@;.,-/]+$/; 
```

# c# - 一个跨平台的应用程序 WPF、ASP.NET、Silverlight、WP7、XAML

> ID：11321965
> 
> 赞同：6
> 
> 时间：2012-07-04T03:10:24.880
> 
> 标签：c#, asp.net, .net, wpf, design-patterns

考虑到所有应用程序都将与 Web 项目（将使用云或 Web 服务）交互这一事实。有没有办法在应用程序之间共享我的类模型？

如果是，最好的方法是什么？

关于从 Web 服务发送/接收数据、序列化和反序列化，我怎样才能以简单的方式做到这一点，而无需手动填充对象？

有关此应用程序的任何信息都会非常有帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T10:24:38.567

一般来说，像这样在应用程序之间共享域模型并不是一个好主意，因为您在它们之间创建了硬依赖关系，即对域模型的任何更改都会影响所有应用程序，从而迫使您同步 Web、电话和桌面应用程序的版本.

我建议创建针对每种应用程序类型的特定信息需求量身定制的单独模型，这当然会增加复杂性，但根据我的经验，与其他场景相比，这是可以管理的。

不确定您的序列化问题，如果您使用 WCF 调用服务，这不是问题，它会为您处理。

为了填充您的域类，我推荐 AutoMapper，我已在多个项目中成功使用过它。它可以根据名称自动从一个类映射到另一个类，您只需指定例外情况（即字段名称未映射，或者您需要某种类型的转换逻辑）[github 上的 Automapper](https://github.com/AutoMapper/AutoMapper)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T14:01:45.060

您可以通过简单的引用在 WPF 和 ASP.net 之间与您的所有类型共享一个 Common.Domain.dll。

然后，您可以在 WCF 客户端和服务器之间共享这些相同类型（参见在线示例，例如[http://blog.walteralmeida.com/2010/08/wcf-tips-and-tricks-share-types-between-server- and-client.html](http://blog.walteralmeida.com/2010/08/wcf-tips-and-tricks-share-types-between-server-and-client.html) ) 允许单独的应用程序域进行通信。

最难的是在 Silverlight 中共享它们，因为 AFAIK silverlight 使用精简的 .net 框架和它自己的编译器。一种技巧是将文件快捷方式添加到 Common.Domain.dll 中定义的 c# 类或使用可移植类库 (http://msdn.microsoft.com/en-us/library/gg597391.aspx)

然而，所有这些共享是否是一个好主意是一个单独的问题，这在很大程度上取决于您的发布策略。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-11T20:49:57.143

要在应用程序之间共享域模型，请查看 Microsoft 的[Portable Class Libraries](http://msdn.microsoft.com/en-us/library/gg597391.aspx "便携式类库") Visual Studio 扩展。它包含用于创建可在 WPF、Silverlight 和 Windows Phone 中的一个或多个上运行的库的模板。生成的编译后的 .dll 可以在所有三个平台上使用。

我已使用此项目类型在 WCF 服务及其 Silverlight 使用者之间共享通用 DTO，等等。

对于域模型和 DTO 之间的转换，请查看[AutoMapper](http://automapper.org/ "自动映射器")。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-09T14:06:13.397

有些人建议不要将服务器端域模型分发给客户端应用程序，而是通过 Web 服务代理生成器生成客户端实体并使用 AutoMap 进行映射，但我更喜欢坚持通过共享 DLL 与客户端共享实体的方法。这有各种优点：

优点

*   没有双重编码。
*   没有将代理对象映射到真实对象。因此没有性能损失。
*   一次在服务器上，然后在客户端实体上没有双重验证实现。
*   共享引用实体对象的实用程序库。您不必为客户端代理生成的实体再次编写实用程序库，这是一个*很大*的痛苦。
*   设计一次，到处重复使用。

缺点

*   实体库必须是普通的类。没有引用外部库。
*   无法删除或重命名现有属性。

现在我明白了一些关于服务器实体被改变和破坏客户端代码的反对意见。但在现实生活中，您拥有客户端和服务器，您始终可以向客户端发送新版本。即使您不这样做，您也可以始终对实体的更改进行版本控制，并引入新的服务来发回新版本的实体。破坏兼容性的机会也很低。仅当您删除属性或更改现有实体上的属性名称时，它才会中断。这通常是低概率。以我的经验，它主要是向实体添加新属性。即使您向实体添加新属性，具有旧实体 DLL 的旧客户端仍然可以工作。它还可以反序列化 SOAP 有效负载。

因此，尽管有一些缺点，但在我看来，利大于弊。所以，我总是有一个实体 DLL，它包含我所有的实体作为 POCO，并与客户端应用程序和服务器共享它。

希望这可以帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-04T05:18:19.623

我知道有几个选项。

1.  在您的 Web 服务中定义模型，当您的应用程序添加对服务的引用时，您还将获得模型定义。

2.  使用文件链接并将您的域文件链接到每个项目（我们目前通过一些魔术来解决客户端和完整 .net 之间的差异（使用自动映射器或反射来填充本地对象）

3.  您是否将域模型放在每个项目引用的单独项目中

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-12T19:56:36.143

我会推荐一个非常精简的**域**项目，它可以完成大部分繁重的工作，但仍然为您的项目类型（WPF、ASP.Net 等）提供一个公共层。

由于**Domain**旨在与所有不同类型的项目一起使用，因此它不能包含并非在所有所需项目类型中都可用的命名空间，这将很困难。

为了解决这个问题，我建议创建一个**服务**项目，该项目将通过编译器指令为您的**域**项目提供扩展功能，或者**服务**可以是一个命名空间，每种项目类型都有不同的项目。（这样，当只发送 Silverlight 时，您将发送**Services.Silverlight**以及**域**和您的 Silverlight 项目。）这将减少编译器指令的数量。

完成上述项目后，您可以开始为所有其他项目创建前端和特定于应用程序的逻辑。然后，您可以使用自动映射器或其他工具将您的（可能）视图模型映射到来自**Domain**的模型。

如果需要，将**域**和**服务**作为所有核心逻辑的一层将有助于您以后扩展到其他项目类型。

# web-services - Servicestack SOAP & ToOptimizedResult 客户端解析错误

> ID：11321966
> 
> 赞同：2
> 
> 时间：2012-07-04T03:10:30.433
> 
> 标签：web-services, soap, servicestack

我使用最新的 Nuget 包（我相信是 3.8.3？）配置了一个超级简单的 ServiceStack Web 服务。我所做的主要更改是调用`ResultContext.ToOptimizedResult(object)`以压缩响应消息（如果调用客户端支持它）。服务定义如下：

```
public class PingService : BaseService<Ping>
    {
        protected override string OperationName { get { return "Ping"; } }

        protected override object Run(Ping request)
        {
            // Implementation removed for brevity
            return new PingResponse();
        }

        protected override object OnAfterExecute(object response)
        {
            //return response;
            return RequestContext.ToOptimizedResult(response);
        }
    } 
```

客户端代码如下：

```
var jsonClient = new JsonServiceClient("http://localhost/WebAppServiceV3/api");
var response = jsonClient.Send<PingResponse>(new Ping { LoginInfo = new ClientLoginInfo { UserName = "guest", Password = "guest", ClientPlatform = "TEST", ClientVersion = "1.3", InstanceUID = Guid.NewGuid().ToString() } });
Console.WriteLine(response.ToJson() + "\n");

var jsvClient = new JsvServiceClient("http://localhost/WebAppServiceV3/api");
response = jsvClient.Send<PingResponse>(new Ping { LoginInfo = new ClientLoginInfo { UserName = "guest", Password = "guest", ClientPlatform = "TEST", ClientVersion = "1.3", InstanceUID = Guid.NewGuid().ToString() } });
Console.WriteLine(response.ToJsv() + "\n");

var xmlClient = new XmlServiceClient("http://localhost/WebAppServiceV3/api");
response = xmlClient.Send<PingResponse>(new Ping { LoginInfo = new ClientLoginInfo { UserName = "guest", Password = "guest", ClientPlatform = "TEST", ClientVersion = "1.3", InstanceUID = Guid.NewGuid().ToString() } });
Console.WriteLine(response.ToXml() + "\n");

var soap11 = new Soap11ServiceClient("http://localhost/WebAppServiceV3/api");
response = soap11.Send<PingResponse>(new Ping { LoginInfo = new ClientLoginInfo { UserName = "guest", Password = "guest", ClientPlatform = "TEST", ClientVersion = "1.3", InstanceUID = Guid.NewGuid().ToString() } });
Console.WriteLine(response.ToXml() + "\n");

var soap12 = new Soap12ServiceClient("http://localhost/WebAppServiceV3/api");
response = soap12.Send<PingResponse>(new Ping { LoginInfo = new ClientLoginInfo { UserName = "guest", Password = "guest", ClientPlatform = "TEST", ClientVersion = "1.3", InstanceUID = Guid.NewGuid().ToString() } });
Console.WriteLine(response.ToXml() + "\n"); 
```

Json、Jsv 和 Xml 客户端都在此处接收压缩响应并正常工作。当该行`return ResultContext.ToOptimizedResult(result)`包含在服务中时，Soap 客户端会抛出异常，而不仅仅是`return result`.

似乎客户端期待一个元素，但在返回压缩结果时`<PingResponse/>`接收到一个元素：`<Base64Binary/>`

```
Error in line 1 position 185\. Expecting element 'PingResponse' from namespace 'http://schemas.datacontract.org/2004/07/IMDSSWebService_SS.ServiceModel'.. Encountered 'Element'  with name 'base64Binary', namespace 'http://schemas.microsoft.com/2003/10/Serialization/'. 
```

压缩打开（失败）

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
  <s:Header />
  <s:Body>
    <base64Binary xmlns="http://schemas.microsoft.com/2003/10/Serialization/">...</base64Binary>
  </s:Body>
</s:Envelope> 
```

压缩关闭（成功）

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
  <s:Header />
  <s:Body>
    <PingResponse>...<PingResponse>
  </s:Body>
</s:Envelope> 
```

关于我在这里可能做错了什么的任何见解？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T04:31:48.823

当前不支持 SOAP 的压缩。

您可以在[https://github.com/ServiceStack/ServiceStack/issues](https://github.com/ServiceStack/ServiceStack/issues)提交问题以请求和跟踪此功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T03:17:09.797

我们之前遇到过这种情况，除了 ServiceStack 中的 JSON 序列化程序......您必须明确指定返回类型：

```
protected PingResponse Run(Ping request)
{
    // Implementation removed for brevity
    return new PingResponse();
} 
```

（例如，您不能`object`用作返回类型。）

我们来回尝试了所有不同的方法（`dyanmic`、泛型等），而 SerivceStack 只是由于其数据合同性质而无法在全球范围内支持这些方法。

我们最终要做的是为每种将要使用泛型/简单对象（例如，等）的类型创建 API`RunPingResponse()`方法`RunOtherResponse()`。:(

# inheritance - Maven POM：如何坚持属性不被覆盖

> ID：11321971
> 
> 赞同：3
> 
> 时间：2012-07-04T03:11:23.600
> 
> 标签：inheritance, maven, properties, pom.xml

我有一个使用 gmaven 脚本做一些事情的父 POM：

```
 <plugin>
      <groupId>org.codehaus.gmaven</groupId>
      <artifactId>gmaven-plugin</artifactId>
      <version>1.4</version>

      <configuration combine.children="override">
        <providerSelection>2.0</providerSelection>
        <scriptPath>${basedir}/build/groovy</scriptPath>
      </configuration>
      <executions>
        <execution>
          <id>groovy-properties-script</id>
          <phase>validate</phase>
          <goals>
            <goal>execute</goal>
          </goals>
          <configuration>
            <source>computeProperties.groovy</source>
          </configuration>
        </execution>
          <!-- ... --> 
```

所有的孩子也应该运行这个脚本，但是他们尝试根据他们的 OWN basedir 来解析脚本路径。通常这正是你想要的属性，但在这里它不起作用，我想不出任何办法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T03:14:07.563

解决这个问题的一种方法似乎是使用 的`set-system-properties`目标`properties-maven-plugin`，因此：

```
 <plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>properties-maven-plugin</artifactId>
    <version>1.0-alpha-2</version>
    <inherited>false</inherited>
    <executions>
      <execution>
        <goals>
          <goal>set-system-properties</goal>
        </goals>
        <configuration>
          <properties>
            <property>
              <name>com.binu.core.parent.basedir</name>
              <value>${basedir}</value>
            </property>
          </properties>
        </configuration>
      </execution>
    </executions>
  </plugin> 
```

因为不是继承的，所以这个插件只会在父pom中运行。不过，这似乎很hacky，有没有一种本地的maven方法来实现这一点？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T08:33:14.263

做这些事情的最好方法是将你的 groovy 脚本放在它自己的 jar 文件中，`maven-dependency-plugin`然后为你解压。然后你的脚本可以指向解压后的脚本。

像这个例子：

`directory layout`

```
+- pom.xml
  +- script
  | +- pom.xml
  | +- src
  |   +- main
  |     +- resources
  |       +-computeProperties.groovy
  +- code
    +- pom.xml
    +- src
      +- main
        +- java 
```

`pom.xml`

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.stackoverflow</groupId>
    <artifactId>Q11321971</artifactId>
    <version>1.0-SNAPSHOT</version>
    <packaging>pom</packaging>

    <name>${project.artifactId}-${project.version}</name>

    <properties>
    </properties>

    <modules>
        <module>script</module>
        <module>code</module>
    </modules>

    <dependencyManagement>
        <dependencies>
            <!-- Inter-Module dependencies -->
            <dependency>
                <groupId>com.stackoverflow</groupId>
                <artifactId>Q11321971-script</artifactId>
                <version>${project.version}</version>
            </dependency>
        </dependencies>
    </dependencyManagement>

    <build>
        <pluginManagement>
            <plugins>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-dependency-plugin</artifactId>
                    <version>2.4</version>
                    <executions>
                        <execution>
                            <id>unpack</id>
                            <phase>validate</phase>
                            <goals>
                                <goal>unpack</goal>
                            </goals>
                            <configuration>
                                <artifactItems>
                                    <artifactItem>
                                        <groupId>com.stackoverflow</groupId>
                                        <artifactId>Q11321971-script</artifactId>
                                        <overWrite>false</overWrite>
                                        <outputDirectory>${project.build.directory}/build/groovy</outputDirectory>
                                        <includes>**/*.groovy</includes>
                                    </artifactItem>
                                </artifactItems>
                            </configuration>
                        </execution>
                    </executions>
                </plugin>
            </plugins>
        </pluginManagement>
    </build>
</project> 
```

`script/pom.xml`

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <parent>
        <groupId>com.stackoverflow</groupId>
        <artifactId>Q11321971</artifactId>
        <version>1.0-SNAPSHOT</version>
    </parent>

    <artifactId>Q11321971-script</artifactId>

    <name>${project.artifactId}-${project.version}</name>

</project> 
```

`code/pom.xml`

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <parent>
        <groupId>com.stackoverflow</groupId>
        <artifactId>Q11321971</artifactId>
        <version>1.0-SNAPSHOT</version>
    </parent>

    <artifactId>Q11321971-code</artifactId>

    <name>${project.artifactId}-${project.version}</name>

    <build>
        <plugins>
            <plugin>
                <artifactId>maven-dependency-plugin</artifactId>
            </plugin>
        </plugins>
    </build>
</project> 
```

如果你运行这个顶级 pom，你会发现在模块的`target`目录中，`code`现在`build/groovy/computeProperties.groovy`你可以在插件中引用它。

`<build/>`通过将其添加到父级的标签中，这将适用于所有模块，即使对于父级 pom ：

```
 <build>
        <plugins>
            <plugin>
                <artifactId>maven-dependency-plugin</artifactId>
            </plugin>
        </plugins>
    </build> 
```

父级现在将有一个`target`目录`build/groovy/computeProperties.groovy`。

在您的插件中，您可以将其更改`<scriptPath/>`为：

```
<scriptPath>${project.build.directory}/build/groovy</scriptPath> 
```

并且由于`maven-dependency-plugin`现在正在该`validate`阶段运行，因此`gmaven-plugin`必须在以后的阶段运行。这是您可以根据需要进行详细说明的内容。

这样做的好处是，如果有人只想签出一个子模块，那么他们可以运行它，脚本 jar 将从 repo 下载并被使用。

不需要相对路径...

# javascript - 悬停多个元素仅影响 1 个项目

> ID：11321975
> 
> 赞同：0
> 
> 时间：2012-07-04T03:13:41.977
> 
> 标签：javascript, jquery

嗨，伙计们，我想知道是否有一种方法可以悬停一些具有相同类名的元素，这些元素并排放置，并且在离开元素区域时会触发动作。例如 ：

```
<div class="hoverme"></div>
<div class="hoverme"></div>
<div class="hoverme"></div>
<div class="hoverme"></div>
<div class="hoverme"></div> 
```

只有当它们离开“hoverme”类的整个区域时，才应该调用下面的“unhover”的javascript。

```
$('.hoverme').live('mouseover mouseout', function(event) {
            if (event.type == 'mouseover') {

                if(!$("#stage1 td").hasClass("hover"))
                {
                    $("#stage1 td").addClass("hover",200)
                }   
            } 
            else {

                //$("#stage1 td").removeClass("hover",200)

            }
        }); 
```

这个动作有办法吗？？

编辑：忘了提到 div 的形状不仅仅是纯粹的正方形。它由几个正方形组成，但最终形状很奇怪。所以我不能用另一个父 div 包装我的 div。

我正在使用 jquery ui，因此我可以使用第二个参数添加类和删除类

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T03:19:41.637

试试这个：`live()`不推荐使用你可以使用`on()`方法：

```
$('.hoverme').on('mouseover', function(event) {
   $("#stage1 td").addClass("hover")
}).on('mouseout', function() {
   $("#stage1 td").removeClass("hover")
}) 
```

[http://jsfiddle.net/jUmTt/](http://jsfiddle.net/jUmTt/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T03:22:17.157

您的意思是每当他们将鼠标悬停在他们都接受`hover`课程的任何元素上时？试试这个：

```
var elements = $('.hoverme');
elements.on('hover', function(event) {
  event.type == 'mouseover' ? elements.addClass('hover') : elements.removeClass('hover');
}); 
```

或者，您可以重组 HTML 以包装可悬停的元素，即：

```
<div class="hoverWrap">
  <div class="hoverme"></div>
  <div class="hoverme"></div>
  <div class="hoverme"></div>
  <div class="hoverme"></div>
  <div class="hoverme"></div>
</div> 
```

然后将悬停事件侦听器附加到`hoverWrap`. 从语义上讲，这更有意义；仅仅因为标记中的元素彼此靠近并不意味着它们应该被视为一个大元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T03:31:54.850

我不知道，但我认为你正在尝试这样做：

```
var timer;
$('.hoverme').on('mouseenter mouseleave', function(e) {
    if (e.type === 'mouseenter') {
        clearTimeout(timer);
        if(!$("#stage1 td").hasClass("hover")) {
            $("#stage1 td").addClass("hover")
        }   
    } else {
        timer = setTimeout(function() {
            $("#stage1 td").removeClass("hover");
        }, 300);
    }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-04T04:19:39.003

它似乎是先前答案的混合。

*   使用 mouseenter 和 mouseleave 而不是 mouseover 和 mouseout。

*   其次，您**可以**使用包装器 div，这就是我的工作方式。如果您将鼠标悬停在子 div 上，那么您也将鼠标悬停在其父 div 上，而不管该父 div 在哪里。父 div 上的 mouseleave 事件不会触发，直到您不再将鼠标悬停在任何子上。

我尝试创建一个大小为零的包装 div，其中五个子 div 绝对定位成十字形，我相信它会按照您所说的方式工作。在 Firefox 和 Chrome 中测试。

```
$('.hoverme-wrapper').on('mouseenter mouseleave', function(e) {
  if (e.type === 'mouseenter') {
    if(!$("#stage1 td").hasClass("hover")) 
      $("#stage1 td").addClass("hover", 200)
  } else {
    $("#stage1 td").removeClass("hover", 200);
  } 
```

[编辑以确认我已经针对 jQuery UI addClass 实现进行了测试]

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T03:45:04.023

使用`mouseleave`而不是`mouseout`.

# c++ - Qt拖放：启用复制时无法移动（Ubuntu Gnome）

> ID：11321982
> 
> 赞同：5
> 
> 时间：2012-07-04T03:14:24.440
> 
> 标签：c++, qt, ubuntu, drag-and-drop, gnome

我正在实现一个视图和一个模型，我希望在其中支持在内部移动项目（通过拖动）和复制项目（通过在拖动时按 Ctrl）。我已经按照说明完成了我需要做的所有事情。我已经设置了 mime 函数，我已经实现了 removeRows() 和 flags()。问题是当我拖动时，它默认为复制操作（我得到带有加号的箭头光标，它确实通过在模型中创建一个新项目来复制项目）。

我能看到的唯一区别是：如果我在supportedDropActions() 中只返回Qt::MoveAction，它只会移动。如果我返回 (Qt::CopyAction | Qt::MoveAction)，它只会复制。

有任何想法吗？我希望它像 Nautilus (Gnome) 或 Windows 文件资源管理器中的文件一样工作：拖动移动图标，ctrl+drag 复制它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:36:39.887

很抱歉，当我发现我做错了什么时，我没有回答这个问题。把我搞砸的代码在`QAbstractItemView::startDrag()`：

```
if (d->defaultDropAction != Qt::IgnoreAction && (supportedActions & d->defaultDropAction))
        defaultDropAction = d->defaultDropAction;
    else if (supportedActions & Qt::CopyAction && dragDropMode() != QAbstractItemView::InternalMove)
        defaultDropAction = Qt::CopyAction; 
```

问题是我没有在小部件上设置**defaultDropAction**属性，`setDefaultDropAction( Qt::MoveAction );` 因此 startDrag() 默认为 CopyAction。如果 defaultDropAction 是 Qt::MoveAction，那么您可以使用键盘 Ctrl 将正在进行的拖动切换到复制操作，这是我想要的行为。

我喜欢 Qt，但肯定有很多与拖放相关的令人困惑且有些交织的属性。很容易得不到正确的属性组合。

底线：确保将**defaultDropAction**设置为**Qt::MoveAction**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T19:26:58.653

这就是我要做的：

启用复制操作。然后收听拖放信号或覆盖虚拟方法（或任何 Qt 提供的，我没有检查），如果您的意思是移动，请“手动”删除该行。放下后，保存您喜欢的操作。

如果无法从 Qt 数据中确定所需的操作，请检查 Ctrl 键状态并保存一个布尔值，说明它是复制还是移动。现在，当 Qt 发出信号被删除时，检查您选择的操作，然后自己删除移动的行。

（我个人使用 gtkmm，copy-if-Ctrl-is-pressed 可以完美地工作）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T07:03:24.483

如果您尝试这种方式会怎样首先编写一个keyPressEvent并设置是否按下ctrl键'

```
keyPressEvent(QKeyEvent *e)
    {
        if(e->key() == Qt::Key_Control)
            bControlKeyPressed = true;
    }
    keyReleaseEvent (QKeyEvent *e)
    {
       if(e->key() == Qt::Key_Control)
          bControlKeyPressed = false;
    } 
```

并在鼠标按下事件中检查是否按下了 ctrl 键

```
`mousePressEvent()
{ 
  if (bControlKeyPressed) 
    //enable Qt::CopyAction 
else 
    //enable  Qt::MoveAction 
}` 
```

# c# - 仅针对特定请求的 MVC 跟踪

> ID：11321983
> 
> 赞同：2
> 
> 时间：2012-07-04T03:14:31.133
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

我想在 mvc 中启用跟踪，具体来说，如果满足某个条件，我想在页面上显示跟踪。

如果我在单个请求的上下文中请求它们，是否可以`System.Diagnostics.Trace`显示写入？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T05:13:52.280

不幸的是，[`Trace`该类](http://msdn.microsoft.com/en-us/library/system.diagnostics.trace.aspx)没有办法根据您要基于每个请求解决的条件来打开/关闭跟踪。这是一种全有或全无的方法。

也就是说，我*强烈*推荐[MVC MiniProfiler](http://miniprofiler.com/)（在 Stack Exchange 网站上使用，尤其是[Stack Exchange Data Explorer](https://data.stackexchange.com/)上的公众）。

你基本上会在你的页面上得到这样的渲染：

![MiniProfiler 截图](../Images/abfdf3a1f7296232d70c1017af7c712f.png)

您可以根据每个请求设置分析：

```
using StackExchange.Profiling;
...    
protected void Application_BeginRequest()
{
    if (Request.IsLocal)
    {
        MiniProfiler.Start();
    } 
} 
```

语法与使用类略有不同`Trace`，因为您必须使用`using`语句，如下所示：

```
using (profiler.Step("Set page title"))
{
    ViewBag.Title = "Home Page";
} 
```

原因是这是一个根本不同的操作；当你追踪时，你是在某个时间点写出一条信息。在进行分析时，您正在查看时间段，并且该`using`语句允许您确定这些段的范围。

这可能有点矫枉过正，但我​​很乐意使用它，`Trace`因为分析方面以及所显示信息的非侵入性（`Trace`有一个令人讨厌的习惯，使页面看起来很奇怪）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T23:36:34.737

我最终求助于通过我的类传递一个记录器，然后在必要时有条件地在控制器中显示该信息。

使用容器，我将记录器实例绑定到 HttpContext 的范围，然后将其泵入我的视图模型。

# authentication - HTTP 请求未经客户端身份验证方案“匿名”授权

> ID：11321987
> 
> 赞同：1
> 
> 时间：2012-07-04T03:15:05.553
> 
> 标签：authentication, anonymous, firstdata

我使用 firstdata 网络服务 API。我使用带有 WCF 的 C# 客户端调用 firstdata webservice API。

但显示错误消息：

```
 "System.ServiceModel.Security.MessageSecurityException: The HTTP request is unauthorized with client 

authentication scheme 'Anonymous'. The authentication header received from the server was ''. ---> System.Net.WebException: 

The remote server returned an error: (401) Unauthorized. at System.Net.HttpWebRequest.GetResponse() at  System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan timeout) --- End 

of inner exception stack trace --- Server stack trace: at 

System.ServiceModel.Channels.HttpChannelUtilities.ValidateAuthentication(HttpWebRequest request, HttpWebResponse response, 

WebException responseException, HttpChannelFactory factory) at 

 System.ServiceModel.Channels.HttpChannelUtilities.ValidateRequestReplyResponse(HttpWebRequest request, HttpWebResponse response, HttpChannelFactory factory, WebException responseException, ChannelBinding channelBinding) at 

System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan timeout) at 

System.ServiceModel.Channels.RequestChannel.Request(Message message, TimeSpan timeout) at 

System.ServiceModel.Dispatcher.RequestChannelBinder.Request(Message message, TimeSpan timeout) at 

System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] 

ins, Object[] outs, TimeSpan timeout) at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage 

methodCall, ProxyOperationRuntime operation) at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message) 

Exception rethrown at [0]: at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage 

retMsg) at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type) at 

com.firstdata.globalgatewaye4.api.ServiceSoap.SendAndCommit(SendAndCommitRequest request) at 

com.firstdata.globalgatewaye4.api.ServiceSoapClient.com.firstdata.globalgatewaye4.api.ServiceSoap.SendAndCommit

(SendAndCommitRequest request) at com.firstdata.globalgatewaye4.api.ServiceSoapClient.SendAndCommit(Transaction 

SendAndCommitSource)" 
```

我的 web.config 信息如下：

```
<behaviors>
        <endpointBehaviors>
            <behavior name="FDGGBehavior">
                <clientCredentials>
                    <clientCertificate  findValue="WS1909642825._.1"  storeLocation="LocalMachine" x509FindType="FindBySubjectName" storeName="TrustedPeople" />
                    <serviceCertificate>
                        <authentication certificateValidationMode="PeerTrust" />
                    </serviceCertificate>
                </clientCredentials>
            </behavior>
        </endpointBehaviors>
    </behaviors>
<binding name="ServiceSoap" closeTimeout="00:01:00" openTimeout="00:01:00"
             receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false"
             bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
             maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
             messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
             useDefaultWebProxy="true">
                <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                 maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                <security mode="TransportWithMessageCredential">
                    <transport clientCredentialType="Certificate" proxyCredentialType="Ntlm" />
                    <message clientCredentialType="UserName" algorithmSuite="Default" />
                </security>
            </binding>
<endpoint address="https://api.globalgatewaye4.firstdata.com/transaction/v11"
         binding="basicHttpBinding" bindingConfiguration="ServiceSoap"
         contract="com.firstdata.globalgatewaye4.api.ServiceSoap" name="ServiceSoap"  behaviorConfiguration="FDGGBehavior" /> 
```

如何解决问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T18:07:05.160

有同样的问题。请检查您是否使用了正确的**GatewayID**和**Password**。请注意，您需要在生成密码后单击**更新按钮。**我也不使用行为配置

```
<behaviors>
     <endpointBehaviors>
         <behavior name="FDGGBehavior">
             <clientCredentials>
                 <clientCertificate  findValue="WS1909642825._.1"  
                     storeLocation="LocalMachine" 
                     x509FindType="FindBySubjectName"
                     storeName="TrustedPeople" />
                 <serviceCertificate>
                     <authentication certificateValidationMode="PeerTrust" />
                 </serviceCertificate>
             </clientCredentials>
         </behavior>
     </endpointBehaviors>
 </behaviors> 
```

# java - org.hibernate.Hibernate 常量用于枚举

> ID：11321993
> 
> 赞同：1
> 
> 时间：2012-07-04T03:16:04.960
> 
> 标签：java, hibernate, enums

我的问题很简单，如果 org.hibernate.Hibernate.SRTING 用于处理 String 类，而 org.hibernate.Hibernate.INTEGER 用于 Integer 类，那么 org.hibernate.Hibernate 中用于处理枚举类的常量是什么？

谢谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T05:01:28.537

尝试

org.hibernate.Type.EnumType

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T05:08:26.700

如果你的枚举是非参数化的，那么就这样做

```
@Enumerated(EnumType.STRING) 
@Column(name="enumTest")
private YourEnum myEnum; 
```

在参数化的情况下，需要一点技巧，请参见[此处](https://community.jboss.org/wiki/Java5EnumUserType)。

# php - .htaccess 403 禁止排除

> ID：11321998
> 
> 赞同：0
> 
> 时间：2012-07-04T03:16:29.307
> 
> 标签：php, html, .htaccess, http-status-code-403

我正在努力做到这一点，所以我的 403 Forbidden 页面在每一页上，除了一个。我不希望 403 Forbidden 出现的文件夹/目录称为“下载”。

这是我当前的 .htaccess 代码。

```
Options -Indexes
ErrorDocument 403 /forbidden.html 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T03:19:27.830

在下载目录中创建另一个`.htaccess`文件，取消主要文件：

```
Options +Indexes 
```