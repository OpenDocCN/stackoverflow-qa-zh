# StackOverflow 问答 000528000-000528999

# sql - 与从表中检索最新条目相关的查询问题？

> ID：528000
> 
> 赞同：0
> 
> 时间：2009-02-09T12:44:05.167
> 
> 标签：sql

嗨，我不擅长提出问题。我会尽力。我正在创建一个网站，我的问题与网站相关的查询有关。这是我当前的查询。

```
SELECT
  GPS_modem.vehicle_no, 
  vehicle_log.longitude, 
  vehicle_log.latitude, 
  vehicle_log.timestamp
FROM
  vehicle_log,
  GPS_modem
WHERE
  GPS_modem.modem_ID = vehicle_log.modem_ID
ORDER BY 
  timestamp desc 
```

我要显示的是表中具有最新时间戳的条目，`vehicle_log`其中`modem_ID`from表与from`GPS_modem`表匹配。`modem_ID``vehicle_log`

我尝试使用`DISTINCT`但我没有工作。尝试使用`MAX`函数时出现错误。希望您能够理解我的问题，如果可以，请帮助我。提前谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-09T12:58:11.390

您可以使用相关的子查询：

```
SELECT
  m.vehicle_no, 
  l.longitude, 
  l.latitude, 
  l.timestamp
FROM
  vehicle_log AS l,
  GPS_modem   AS m 
WHERE
  m.modem_ID = l.modem_ID
  AND l.timestamp = (
    SELECT MAX(timestamp) FROM vehicle_log WHERE modem_ID = l.modem_ID
  ) 
```

* * *

编辑：在我回答的第 1 版中，我看到了上面的查询。然后有些事情让我觉得我应该把它改成下面的那个。下面的工作但不必要的复杂，很可能表现更差。睡过之后，我建议不要使用这种方法。;-)

```
SELECT
  m.vehicle_no,
  latest.longitude, 
  latest.latitude, 
  latest.timestamp
FROM
  GPS_modem AS m,
  (
    SELECT
      modem_ID,
      longitude, 
      latitude, 
      timestamp
    FROM
      vehicle_log AS l
    WHERE
      timestamp = (
        SELECT MAX(timestamp) FROM vehicle_log WHERE modem_ID = l.modem_ID
      )
  ) AS latest
WHERE
  m.modem_ID = latest.modem_ID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-09T12:47:17.047

根据数据库，

```
SELECT TOP 1 GPS_modem.vehicle_no, vehicle_log.longitude, vehicle_log.latitude,  vehicle_log.timestamp from vehicle_log,GPS_modem where GPS_modem.modem_ID = vehicle_log.modem_ID order by timestamp desc 
```

将在 SQL Server 上工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-09T12:49:15.200

在 MySQL 中，您可以在查询末尾使用“limit 1”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-09T12:52:13.963

这可能不是最好的方法。

但是由于您订购了结果，因此您可以使用 LIMIT。

`SELECT GPS_modem.vehicle_no, vehicle_log.longitude, vehicle_log.latitude, vehicle_log.timestamp from vehicle_log,GPS_modem where GPS_modem.modem_ID = vehicle_log.modem_ID order by timestamp desc LIMIT 1`

还有其他解决方案（可能更好），但这是一种选择。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-09T13:12:43.320

下面是一个使用 SQL Server 的示例。它使用相关子查询，其优点是使用 modem_ID 执行匹配，而不是时间戳的相等匹配。

```
CREATE TABLE #GPS_modem
(
    ID INT IDENTITY(1,1) PRIMARY KEY,
    vehicle_no VARCHAR(10)
)

CREATE TABLE #vehicle_log
(
    ID INT IDENTITY(1,1) PRIMARY KEY,
    modem_ID    INT,
    longitude   INT,
    latitude    INT,
    [timestamp] DATETIME DEFAULT GETDATE()
)

INSERT INTO #GPS_modem
SELECT 'ABC123' UNION ALL SELECT 'XYZ123'

INSERT INTO #vehicle_log
SELECT 1,234,543,GETDATE()
UNION all
SELECT 2,4342,432234,GETDATE()
UNION all
SELECT 1,4322,432,DATEADD(DAY,-1,GETDATE())
UNION all
SELECT 2,6336,5324,DATEADD(DAY,-1,GETDATE())

SELECT * FROM #GPS_modem
SELECT * FROM #vehicle_log

SELECT
    vehicle_no,
    longitude,
    latitude,
    [timestamp]
FROM 
    #GPS_modem A
        inner join #vehicle_log B on
        A.ID = B.modem_ID
WHERE B.ID IN
(
    SELECT TOP 1 ID
    FROM #vehicle_log
    WHERE modem_ID = A.ID
    ORDER BY [timestamp] DESC 
)

DROP TABLE #GPS_modem
DROP TABLE #vehicle_log 
```

干杯，约翰

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-09T13:16:24.887

在甲骨文中：

```
SELECT
  GPS_modem.vehicle_no, 
  vehicle_log.longitude, 
  vehicle_log.latitude, 
  vehicle_log.timestamp
FROM
  (
  SELECT v.*, ROW_NUMBER() OVER (PARTITION BY modem_id ORDER BY timespace DESC) AS rn
  ) l, GPS_modem m
WHERE
  l.rn = 1
  AND m.modem_ID = l.modem_ID 
```

在 MySQL 中：

```
SELECT *
FROM (
   SELECT DISTINCT g.id AS gid, (
     SELECT l.modem_id
     FROM vehicle_log l
     WHERE l.modem_id = g.modem_id
     ORDER BY timestemp DESC
     LIMIT 1
     ) lid
 ), vehicle_log lo, GPS_modem go
WHERE lo.modem_id = lid
  AND go.modem_id = lo.modem_id 
```

# java - 日食Java；导出 jar，包括引用的库，没有 fatjar

> ID：528007
> 
> 赞同：22
> 
> 时间：2009-02-09T12:46:35.300
> 
> 标签：java, eclipse, jar, export

我需要从我的 Eclipse Java 项目中导出 jar，并且我想包含引用的库。我不能为此使用 fatjar，这似乎是每个人都推荐的。必须有另一种方法来做到这一点。有谁知道这是什么？！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-02-09T12:55:45.467

Eclipse 的下一个版本（3.5，将于明年 6 月到期）可以选择包含所有必要的 jar。它是在 3.5M5 中引入的（感谢[basszero](https://stackoverflow.com/users/287/basszero)）。

或者您可以尝试使用[Maven 2](http://maven.apache.org/)构建您的项目。然后，您可以使用[`mvn assembly:assembly`](http://maven.apache.org/plugins/maven-assembly-plugin/index.html).

另一种选择是使用[ant](http://ant.apache.org/)。将所有 JAR 文件解压到一个临时目录中，然后再次 jar 起来。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-02-09T18:08:37.650

我认为它的 Eclipse (ganymede) 版本 3.3 具有 Export as **Runnable JAR file**。上次我尝试它时，它确实包含了引用的库，并且还取消了所有 jars。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-22T18:07:55.183

eclipse 的这个特性可以很好地只将引用的库转储到单独的文件夹中。“Export as Runnable Jar”和“Copy the referenced libraries into a subfolder ..”选项。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2011-06-03T09:35:59.117

只需发布一点（Helios）使用 Eclipse 导出 Jar 的问题 - 您必须首先（在 Eclipse 中）使用 main() 方法运行一个类，否则“启动配置”下拉菜单将为空白，您将无法出口。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-09T12:57:33.310

我想您可以修改构建脚本以包含库。如果我理解正确，您可以放入您的 `<jar destfile="myProject.jar"> ... <zipfileset src="theExternalLib.jar"> </jar>`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-06-04T10:34:16.443

您可以从 Eclipse 导出 XML 文件，然后分析该文件以获取所需的 jar - 请参阅[此](http://www.avajava.com/tutorials/lessons/how-do-i-share-an-eclipse-user-library-with-other-users.html)链接。

# windows - Windows 上的 Webistrano

> ID：528008
> 
> 赞同：0
> 
> 时间：2009-02-09T12:46:57.797
> 
> 标签：windows, ruby, webistrano

有没有人成功让 Webistrano 在 Windows 上运行。我读过的所有地方都说它不会在 Windows 上运行，但这不是使用 Ruby 的重点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-02-09T13:44:26.223

使用 Ruby（和 Python），如果你不避免使用 linux 特定的路径名​​、函数和库，它就无法在 Windows 上运行。

很多 ruby​​ 开发都是针对 linux/mac 完成的，而没有考虑可移植性，因此您将很难获得在 Windows 中工作的工具。

# java - 没有字符集的码头响应

> ID：528014
> 
> 赞同：4
> 
> 时间：2009-02-09T12:48:03.440
> 
> 标签：java, jetty, response, character-encoding

我正在使用 Jetty 来测试我们拥有的网络服务，并且我试图让它在内容类型标题下没有字符集的情况下做出响应。

有谁知道如何做到这一点？

我尝试拦截响应并将 CharacterEncoding 设置为 null 或“”，但这会产生异常。

我正在使用码头 6.1.6。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-10T07:52:12.693

我认为这与您使用哪个 servlet 容器无关，而是您如何处理 servlet 中的响应。如果您通过使用参数调用 ServletResponse 的 setContentType (2.3) 或 setCharacterEncoding (2.4, 2.5) 来设置字符编码，`null`或者`""`它应该可以工作（我自己没试过）。但一定要在调用getWriter*之前*调用上面提到的方法，否则设置编码[无效](http://java.sun.com/products/servlet/2.2/javadoc/javax/servlet/ServletResponse.html#getWriter())！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-10T15:17:22.520

我现在自己试过了，但我必须承认，我的码头是一个非常古老的码头（4.2.，但一切都按照我需要的方式进行）。我将它与 tomcat（4.1.29，也很旧）进行了比较。我使用以下代码检查了内容类型：

```
URL tomcatUrl = new URL("http://localhost:18080/ppi/jobperform/headertest")//tomcat;
URLConnection tconnect = tomcatUrl.openConnection();
System.out.println("tomcat: " + tconnect.getContentType());

URL jettyUrl = new URL("http://localhost:13818/ppi/jobperform/headertest")//jetty;
URLConnection jconnect = jettyUrl.openConnection();
System.out.println("jetty: " + jconnect.getContentType()); 
```

结果如下：

小服务程序代码：

```
 response.setContentType("");
    response.getWriter().write("Return"); 
```

=>
tomcat: ;charset=ISO-8859-1
码头：

小服务程序代码：

```
 response.setContentType("text/plain");
     response.getWriter().write("Return"); 
```

=>
tomcat: text/plain;charset=ISO-8859-1
jetty: text/plain

小服务程序代码：

```
response.setContentType("text/plain;charset=UTF-8");
response.getWriter().write("Return"); 
```

=>
tomcat: text/plain;charset=UTF-8
码头: text/plain;charset=UTF-8

所以看起来旧的码头做的正是你想要的，而 tomcat 做的是你从新码头得到的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-09T23:25:57.183

字符集是非常有用的信息。与其试图强迫一个好的产品（Jetty）做错事，我更愿意教服务的消费者做正确的事（识别和尊重字符集）。

# php - PEAR 与 PHP 时间函数

> ID：528018
> 
> 赞同：1
> 
> 时间：2009-02-09T12:49:18.167
> 
> 标签：php, timestamp, pear

我正在研究基本时间函数（创建 UTC 时间戳并转换为本地时区）。我遇到的第一组教程指向 PEAR，因为它更好地避免了计算中的溢出错误。现在，在另一个中途，PEAR 似乎在某些操作系统上运行的某些时区功能存在问题。作者推断PHP5更稳定！我现在对最好的有点困惑。你能从经验中推荐吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-09T13:27:40.290

我对 PHP5 内置的 DateTime 类非常满意。它以一种 OO 的方式包装了旧时的功能。

对于真正的瑞士军刀，试试 Zend_Date。那里有很多花里胡哨的东西。最多日出/日落数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-01T18:18:09.333

我都使用过（尽管我使用 PHP5 的次数多于 Pear），您可能不会发现其中任何一个都适合您。无论哪种方式，您都可能需要进行大量检查和发现问题，然后自己决定如何处理。你是舍入它，默认它，告诉用户有问题还是默默地处理它？我倾向于四舍五入到最近的正确日期......但到目前为止，我的应用程序在日期/时间方面并不需要精确的精度。我的观点是——你可能找不到一个开箱即用的完美契合——所以选择你认为最容易使用的那个，然后根据你自己的需要进行扩展/调整。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-09T21:23:51.517

使用时区时，我通常会设置应用程序的时区，并相应地处理其他所有内容。服务器始终为 GMT。

查看[putenv](http://us.php.net/manual/en/function.putenv.php)

此外，除非您有正当理由使用 4\. 4 = 废话，否则您应该运行 PHP5。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-09T13:23:11.720

我使用 PEAR 的 Date 类没有问题。看到您所指的教程会很有趣。它在网络上的某个地方吗？

# silverlight - 是否可以按名称而不是按列索引访问 Silverlight DataGrid 列？

> ID：528022
> 
> 赞同：6
> 
> 时间：2009-02-09T12:51:15.930
> 
> 标签：silverlight, xaml

有谁知道是否可以通过在后面的代码中使用它的 x:name（在 xaml 中定义）来访问 DataGrid 列？

我知道我可以使用以下代码：

```
myDataGridList.Columns[0].Header = "Some Data"; 
```

..但如果可能的话，我更愿意使用这样的东西：

```
myDataGridList.Columns["ColumnName"].Header = "Some Data"; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-02-09T22:20:23.767

您可以使用一些 Linq 或 foreach 循环扩展 ObservableCollection 以对列进行线性搜索。

```
public static class MyExtensions
{
    public static DataGridColumn GetByName(this ObservableCollection<DataGridColumn> col, string name)
    {
        return col.SingleOrDefault(p =>
            (string)p.GetValue(FrameworkElement.NameProperty) == name
        );
    }
} 
```

然后，您可以调用它而不是 Columns 属性：

```
myGrid.Columns.GetByName("theName"); 
```

# opengl - glVertexAttrib*：预定义了哪些属性索引？

> ID：528028
> 
> 赞同：1
> 
> 时间：2009-02-09T12:53:09.670
> 
> 标签：opengl

glVertexAttrib 系列函数允许为每个顶点添加通用属性。您可以设置数据将与之关联的索引。但是，您不能随意选择索引，因为我发现使用低于 4 的索引会破坏标准（Normal/TexCoord）属性，加上 0 是顶点位置。我怎样才能知道哪个是第一个真正用于自定义属性的免费索引？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-02-09T16:22:57.107

我找到了一个网站，其中列出了 nvidia 硬件上的预定义索引：

[http://www.opengl.org/sdk/docs/tutorials/ClockworkCoders/attributes.php](http://www.opengl.org/sdk/docs/tutorials/ClockworkCoders/attributes.php)

> 不幸的是，在 NVidia 硬件上使用它时存在某些限制。根据 NVidia 的说法：“GLSL 试图消除顶点属性的混叠，但这是 NVIDIA 硬件方法不可或缺的一部分，也是保持与 NVIDIA 客户所依赖的现有 OpenGL 应用程序的兼容性所必需的。因此，NVIDIA 的 GLSL 实现不允许内置顶点属性发生冲突使用glBindAttribLocation分配给特定顶点属性索引的通用顶点属性。例如，您不应使用gl_Normal（内置顶点属性），还应使用glBindAttribLocation将名为“whatever”的通用顶点属性绑定到顶点属性索引 2，因为 gl_Normal 是索引 2 的别名。”
> 
> 换句话说，NVidia 硬件索引是为内置属性保留的：

*   gl_Vertex 0
*   gl_Normal 2
*   gl_Color 3
*   gl_SecondaryColor 4
*   gl_FogCoord 5
*   gl_MultiTexCoord0 8
*   gl_MultiTexCoord1 9
*   gl_MultiTexCoord2 10
*   gl_MultiTexCoord3 11
*   gl_MultiTexCoord4 12
*   gl_MultiTexCoord5 13
*   gl_MultiTexCoord6 14
*   gl_MultiTexCoord7 15

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-09T13:43:41.343

您不应该选择自己的索引。GL可以通过[glGetAttribLocation](http://www.opengl.org/sdk/docs/man/xhtml/glGetAttribLocation.xml)函数在代码中使用属性名称为您提供免费的（如果您在链接程序后这样做）。

我从来没有遇到过这个问题......但不幸的是，我没有自己的着色器包装代码（在工作 atm 中）能够解释原因。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-09T14:22:16.740

您实际上可以专门使用顶点属性数组，从而`glVertexPointer()`完全跳过和合作。这将避免任何重复，并且也很好地统一。不过，您仍然应该使用`glGetAttribLocation()`，因为 AFAIK 您无法提前知道每个属性在运行时将映射到哪个索引。

与往常一样，[扩展规范](http://oss.sgi.com/projects/ogl-sample/registry/ARB/vertex_shader.txt)包含所有血淋淋的细节。

# deployment - 有人试过 Webistrano 吗？

> ID：528034
> 
> 赞同：6
> 
> 时间：2009-02-09T12:54:50.960
> 
> 标签：deployment, webistrano

我正在为我正在从事的项目寻找一种远程部署策略，甚至从头开始设计一个。

但是我偶然发现了一个几乎相同的实现，称为 Webistrano。有没有人尝试使用它进行项目部署，还有人在使用它吗？这有什么好处，还是让你想用钝铅笔刺伤自己的眼睛？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-06-27T14:52:56.393

我的 webdev 公司成功地将它用于不同生产服务器上的几十个 PHP 项目。我们对此非常满意！

Webistrano 是 capistrano 的 Web GUI。我们选择它而不是直接运行 Capistrano 的原因是它提供了一个很好的集中式界面。我们的大多数开发人员都不是很精通 CLI，我认为他们真的不需要。与其让 capistrano 食谱到处传播，我们更喜欢网络应用程序的方法。

Webistrano 存储每个部署日志和用户名，因此我们有一些责任。它提供了一个中心位置，可以查看当前项目的哪个修订版本。一些管理员能够为 Webistrano 创建配方，并且 Webistrano 的 GUI 可以被我们内联网上的所有开发人员访问。他们只需要选择一个项目和一个阶段（如 Dev 或 Prod）并按下部署。

它大大降低了出错的可能性，并且证明对我们来说是完美的。

我想念的一些功能：

*   **用户权限**：比管理员和用户更受限制的用户权限。我们是否愿意将某些操作或项目限制为某些用户。
*   **交互式提示**：如果 capistrano 进程在部署*期间*需要输入，Webistrano 不能要求输入。*您可以在部署之前*让 webistrano 提示变量 ，但在部署期间不能提示，如果出现一些意外问题。
*   **集中式身份验证**：好吧，公平地说，它确实支持 .htaccess 身份验证，所以我们可能应该配置 PAM 来检查 LDAP。

它是开源的，所以我可能应该看看自己实现其中的一些。只是希望我在 Ruby on Rails 上做得更好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2011-04-04T07:59:25.773

关于Webistrano中用户权限不足的问题，可以试试Webistrano Privilege插件：[https ://github.com/espace/webistrano_privileges/](https://github.com/espace/webistrano_privileges/)

“Webistrano 特权，是 webistrano 1.3 的 Rails 插件，用于引入用户对项目的访问控制。它将保护和组织用户对项目的访问，并赋予他们部署他们只能访问的项目的特权。”

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-02-09T13:35:00.880

假设您正在部署到 *nix 服务器...

为什么不直接使用 webistrano 只是一个包装器的 capistrano 呢？它可以配置为部署几乎任何东西。（Capistrano 使通过 ruby​​ 使用 ssh 变得容易。）

如果您不部署 Rails，您可能最终会编写自定义脚本，如果您有任何系统管理经验，这应该不难。capistrano 项目的文档很烂，但是有很多人已经弄清楚了，一旦你的部署脚本工作了，你应该会很好。

# eclipse - Eclipse 不支持哪些编程语言？

> ID：528035
> 
> 赞同：-6
> 
> 时间：2009-02-09T12:55:08.353
> 
> 标签：eclipse, programming-languages, eclipse-plugin

1.  Eclipse 不支持哪些编程语言？
2.  我们如何改变这个事实？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-09T13:00:20.417

1）我不知道.... BrainF**k + 空格，可能。但我认为你真的很关心#2。

2）[自己做](http://www.informit.com/articles/article.aspx?p=370625)。

如果你用谷歌搜索“eclipse for a new language”，会有很多文章

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-22T19:40:36.427

好吧，它确实支持其中的很多，但它在大多数情况下做得很糟糕。Notepad++ 支持大约 75 种语言，但我真的不会将它用作大多数语言的 IDE。我认为这是 Eclipse 的弱点。它试图支持阳光下的每一种语言。但是对于很多语言来说，有更好的工具，它们也是免费的。就个人而言，我不认为它是任何语言的最佳 IDE。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T11:55:50.320

至少以下：MAX/MSP、Pd、Oz、AutoHotkey、PDDL，Prolog的大部分方言（只支持三四种方言）。Mathematica 仅通过*基于*Eclipse 的商业IDE 得到支持。（Wolfram Workbench。）我相信其他人知道一些不那么晦涩的例子，但是:-)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-02-22T19:36:50.117

它没有像样的 SQLJ 支持。

# erlang - 我在哪里可以找到“BIF”的好的 erlang 参考？

> ID：528042
> 
> 赞同：4
> 
> 时间：2009-02-09T12:58:19.097
> 
> 标签：erlang

我已经有 Programming Erlang 的书，我使用[http://www.erlang.org/](http://www.erlang.org/)站点。
但是我找不到像**lists:duplicate**这样的 BIF 和模块的好的参考站点。我从 Programming Erlang book 的末尾找到了简短的解释，但我需要更多；（（关于参数，示例代码..等）

任何人都可以帮助我解决这个问题吗？
谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-09T13:03:27.930

Erlang 网站上的[这个页面](http://www.erlang.org/doc/man_index.html)怎么样？例如，您可以在[此处](http://www.erlang.org/doc/man/lists.html)`lists`找到该模块的文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-10T01:35:14.860

[erlang 模块文档](http://erlang.org/doc/man/erlang.html)说明了 BIF，以及可能出现在守卫中的说明。如果您已经安装了手册页，您还可以使用 `erl -man erlang`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-08-23T15:08:13.303

后期更新：8 月 9 日

这有点像 Railsapi.com

[http://erlapi.prepor.ru/docs/](http://erlapi.prepor.ru/docs/)

[http://groups.google.com/group/erlang-programming/browse_frm/thread/1e5bcaf304ef249f/1b3d0d676603a81d?lnk=gst&q=erlapi#](http://groups.google.com/group/erlang-programming/browse_frm/thread/1e5bcaf304ef249f/1b3d0d676603a81d?lnk=gst&q=erlapi#)

来源：

[http://github.com/prepor/erlapi-static/tree/master](http://github.com/prepor/erlapi-static/tree/master)

* * *

还：

[http://erldocs.com/otp_src_R13B/](http://erldocs.com/otp_src_R13B/)

[http://www.gotapi.com/erlang](http://www.gotapi.com/erlang)

[http://www.dpawson.co.uk/erlang/](http://www.dpawson.co.uk/erlang/)

# javascript - 在别人的 Javascript 之后使用 jQuery

> ID：528045
> 
> 赞同：1
> 
> 时间：2009-02-09T13:00:10.463
> 
> 标签：javascript, jquery, html, events, dom

**场景：**我有一个 Javascript 生成的网页，这是很久以前别人写的，我想用 jQuery 来美化它。我的目标是清理其他人生成的 Javascript 生成的 html，这些 html 在生成后仅通过对该 HTML 使用一些 jQuery 调用来生成。

这将比直接修改其他人的 Javascript 简单*得多*，至少现在是这样。

我的第一次尝试是在调用所需 jQuery 代码的 HTML 头部的末尾添加一个脚本标记。

```
 <script src="/someone-elses-js-generator.js" />
    <script>
    $(document).ready(function() {
        alert('the other stuff ran, now do the jquery cleanup');
        $('.foobar').css("display","none");
        $('.doobar').css("display","inline");
        /// ... so on and so forth ...
    });
    </script> 
```

**问题：**上述工作正常，但是当我注释掉“警报”消息时。jquery 不再执行清理。显然，发生的事情是警报消息框延迟了后续清理代码的运行，这很好，但是没有警报，jQuery 似乎在其他 javascript 完成输出之前运行。

**问题：**有没有办法让 jQuery 清理代码在 js-generator 代码*之后*运行，但不必在其中放置一个 alert() 框？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-09T13:10:17.320

也许`$(document).ready()`不是正确的方法。

另一个脚本是如何被触发的？如果它在 a`window.onload`那么它可能仅在您的 jQuery 启动后才启动。

您想等到另一个脚本停止运行。可能最好的方法是将您的 jQuery 包装在一个函数中，并在您确定它已完成时从另一个脚本中调用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-09T13:05:14.850

你可以把

```
$(document).ready(function() { ... }); 
```

`/someone-elses-js-generator.js`在此文件中的操作逻辑的末尾或末尾。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-09T13:06:10.357

您可以使用以下 JavaScript 函数将您的清理代码延迟到一定程度：

```
setTimeout('JS Cleanup Code', number_of_miliseconds); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-09T13:08:00.493

您也可以尝试稍后使用 setTimeout() 调用清理代码；

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-09T13:09:52.750

我想你可能需要看看为什么其他编码员的代码被延迟了。如果它没有立即运行并且没有理由不能运行，您可以将他的功能包装在一个匿名函数中并立即运行它。

```
(function() {
    /*
    Other coder's code here
    */
 })(); //run this function and the code inside it immediately. 
```

# sharepoint - 您如何为我的网站创建新的网站模板？

> ID：528054
> 
> 赞同：2
> 
> 时间：2009-02-09T13:02:09.227
> 
> 标签：sharepoint

我们为一般网站创建了一个新的网站模板。

但是，我们如何为我的网站的用户实现相同的网站模板？
它们的工作方式似乎完全不同。

有没有人如何指导如何做到这一点？

额外细节：这是针对 Sharepoint 2007 标准版的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-11T12:48:16.773

此链接说明了如何执行此操作：

[在企业内自定义 MOSS 2007 My Sites](http://blogs.msdn.com/sharepoint/archive/2007/03/22/customizing-moss-2007-my-sites-within-the-enterprise.aspx)

上面的博客文章是 Sharepoint 社区工具包的一部分的前身。

看：

[MySiteCreate 1.0 生产](http://www.codeplex.com/CKS/Release/ProjectReleases.aspx?ReleaseId=2824)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-09T19:07:13.577

哪个版本的 Sharepoint？而且，你在寻找这样的东西吗？从 MSDN 网站：

[品牌化 Sharepoint 站点](http://msdn.microsoft.com/en-us/library/ms916822.aspx) 以及 [关于模板](http://msdn.microsoft.com/en-us/library/ms916822.aspx#office_sharepointapplyingcorporatebrand_abouttemplates) 和 [自定义 Sharepoint 站点](http://msdn.microsoft.com/en-us/library/ms916801.aspx)

至少应该让您定位或作为启动点，为您提供所需的信息。

# sms - Symbian 中的 WAP 推送短信

> ID：528057
> 
> 赞同：2
> 
> 时间：2009-02-09T13:03:18.427
> 
> 标签：sms, symbian, wap

我已经设法发送（和接收）二进制短信，但我想要完成的是发送接入点设置或书签或电子邮件设置等。目前我正在发送如下消息：

```
//udh=0605040B8423F0
//message=FD0601AE02056A0045C60C037777772E676F6F676C65...000101
    //udh
    iMessage->Des().Append(0x06);
    iMessage->Des().Append(0x05);
    iMessage->Des().Append(0x04);
    iMessage->Des().Append(0x0B);
    iMessage->Des().Append(0x84);
    iMessage->Des().Append(0x23);
    iMessage->Des().Append(0xF0);

    iMessage->Des().Append(0xFD);
    iMessage->Des().Append(0x06); 
```

但它们以相同的格式到达，也与普通 SMS 到达相同的端口。当我从运营商那里收到 AP 设置时，它会到达某个不同的端口并正确显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-12T07:36:03.483

诺基亚也问了这个问题，结果是我做不到。:(

当手机用作调制解调器并从 PC 发送命令时，可以完成此操作。如果我能弄清楚如何在手机中模拟所有这些，那就太酷了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-12T11:03:50.910

由于您无法使用 SMS 来执行此操作，因此只需使用 SMS 作为触发器，以便安装在手机上的应用程序知道从网站下载设置。

在该应用程序中，使用消息 API 更新电子邮件设置，使用 commsdb API 更新 APN 设置，使用 webkit API 更新书签，所有这些都根据您刚刚从网站下载的数据。

部署成为一个问题，需要更多的开发，但这应该可以完成工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-13T12:04:23.987

FWIW，WAP 推送需要 2948 的目标端口和（我认为）9200 的源端口，内容是作为 8 位数据发送的 WBXML 格式的命令/请求。

此链接显示如何使用 Symbian 设置端口：

[http://www.newlc.com/Sending-a-message-from-Symbian-C.html](http://www.newlc.com/Sending-a-message-from-Symbian-C.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-13T12:11:06.933

我使用 aspsms 代理服务。他们有这个 wap 推送示例：[http ://www.aspsms.com/examples/asp/wappush.asp](http://www.aspsms.com/examples/asp/wappush.asp)

它可能有效，也可能无效...尝试自行承担风险:)

# html - 如何使用jsp保存生成的xml文件？

> ID：528060
> 
> 赞同：0
> 
> 时间：2009-02-09T13:04:01.280
> 
> 标签：html, xml, jsp

我已经使用 jsp 生成了 xml 文件，但是我希望生成的 xml 文件应该保存为文件。我的代码是

```
 <?xml version="1.0" encoding="UTF-8"?>
   <%@ page contentType="text/xml;charset=ISO-8859-1" %>
   <playlist version="1" xmlns = "http://xspf.org/ns/0/">
   <title>My Band Rocks Your Socks</title>
   <trackList>
   <%! String[] sports; %>
   <%
    sports = request.getParameterValues("sports");
    if (sports != null)
    { 
         for (int i = 0; i < sports.length; i++)
         { 
              // out.println (sports[i]); 
              String total=sports[i];
              String[] sa=total.split("[,]");
              // String[] sub=new String();
              out.print("<track>");
              for (int j=0;j<sa.length;j++)
              {
                // out.println(sa[j]);
                // out.println("sa["+j+"]="+sa[j]);
                if( j == 0)
                {
                     out.print("<location>" + sa[0] +"</location>"); 
                }
                else if (j == 1)
                     {
                        out.print("<image>" + sa[1] +"</image>"); 
                     }
                     else if( j==2)
                          {
                            out.print("<title>" + sa[2] +"</title>");
                          }

               }// end of inner for loop()       
               out.print("</track>");
         //out.println();
      }// end of outer for()
    } 
    //else out.println ("<b>none<b>");
  %>
  </trackList>
 </playlist> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-09T13:09:31.813

是的你可以。这样做的方法基本上是设置一个额外的标头 - 您可以在响应对象上执行此操作。

要设置的标头称为 Content-Disposition，其值应类似于“附件；文件名=\”foo.xml\“”。

# asp.net - OnClientClick 中的服务器标记

> ID：528066
> 
> 赞同：8
> 
> 时间：2009-02-09T13:05:58.407
> 
> 标签：asp.net

以下给了我“服务器标签格式不正确”的错误

```
<asp:LinkButton ID="DeleteButton" runat="server" CommandName="Delete" 
    OnClientClick="return confirm('Are you sure you want to delete <%# Eval("Username") %>?');">
    Delete
</asp:LinkButton> 
```

（这用于显示用户列表的数据绑定 ListView。当您单击删除按钮时，将使用 JavaScript 确认对话框询问您是否确定）

那么，如何在包含 JavaScript 的字符串中嵌入服务器标签？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-02-09T13:49:51.750

问题在于绑定块以及单引号和双引号的使用。

```
<asp:LinkButton D="DeleteButton" runat="server" CommandName="Delete" OnClientClick='<%# CreateConfirmation(Eval("Username")) %>'>Delete</asp:LinkButton> 
```

然后在代码隐藏添加功能...

```
Public Function CreateConfirmation(ByVal Username As String) As String
    Return String.Format("return confirm('Are you sure you want to delete {0}?');", Username)
End Function 
```

当绑定块用作属性的值时，您会注意到您必须使用单引号。您的脚本还需要为确认函数的嵌入字符串参数加上引号。你基本上用完了报价。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-09-11T17:38:52.567

我在 www.asp.net 找到了这个答案

```
OnClientClick='<%# Eval("ProductName", "return confirm(""Delete the Product {0}?"")" ) %>' 
```

这会将所有内容都放在标记中，因此以后进行维护的任何人都不必四处寻找所有部分。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-09T13:17:58.657

在 ListView 控件的 ItemDataBound 事件中动态添加代码。

在您的 page_Load 事件中添加以下内容

```
lst.ItemDataBound += new EventHandler<ListViewItemEventArgs>(lst_ItemDataBound); 
```

然后在您的 ItemDataBound 事件处理程序中添加

```
Control DeleteButton = e.Item.FindControl("DeleteButton");
DeleteButton.OnClientClick = string.Format( "return confirm('Are you sure you want to delete '{0}'?", Username); 
```

无论您使用 OnClientClick 还是 Sachin Gaur 的解决方案，此解决方案都应该有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-09T13:09:34.577

您可以在运行时添加 onclick 事件，如下所示：

```
DeleteButton.Attributes.Add("onclick", "'return confirm('Are you sure you want to delete '" + Username); 
```

# .net - System.Net.Mail.MailAddress 的解析器接受的格式是什么？

> ID：528090
> 
> 赞同：8
> 
> 时间：2009-02-09T13:12:56.610
> 
> 标签：.net, validation, email

我正在开发一个使用[System.Net.Mail.MailAddress](http://msdn.microsoft.com/en-us/library/system.net.mail.mailaddress.aspx)和朋友发送电子邮件的应用程序。该解析器是否实现了完整的[RFC5322](http://www.ietf.org/rfc/rfc5322.txt)或子集或什么？MSDN 在这个话题上不是很热情。

任何提示表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-09T13:49:05.183

我写了一个小片段来测试这个功能：

```
foreach (int i in Enumerable.Range(32,128-32))
{
    char c = (char)i;
    string addr = String.Format("par.t1{0}pa.r{0}t2@example.com", c);
    try
    {
        var mailAddr = new MailAddress(addr);
    }
    catch
    {
        Console.WriteLine("MailAddress failed '{0}' ({1}): {2}", c, i, addr);
    }
} 
```

在 3.5 SP1 上得到以下结果：

```
邮件地址失败 ' ' (32): par.t1 par.r t2@example.com
邮件地址失败 '"' (34): par.t1"pa.r"t2@example.com
邮件地址失败 '(' (40): par.t1(pa.r(t2@example.com
邮件地址失败 ')' (41): par.t1)pa.r)t2@example.com
邮件地址失败'，'（44）：par.t1，pa.r，t2@example.com
邮件地址失败'：'（58）：par.t1：pa.r：t2@example.com
邮件地址失败';' (59): 部分.t1;pa.r;t2@example.com
邮件地址失败 '<' (60)：par.t1<pa.r<t2@example.com
邮件地址失败'>'（62）：par.t1>pa.r>t2@example.com
邮件地址失败'@'（64）：par.t1@pa.r@t2@example.com
邮件地址失败 '[' (91): par.t1[pa.r[t2@example.com
邮件地址失败 '\' (92): par.t1\pa.r\t2@example.com
邮件地址失败']'（93）：par.t1]pa.r]t2@example.com
邮件地址失败“⌂”（127）：par.t1⌂pa.r⌂t2@example.com

```

此外，它似乎不支持“引用字符串”本地部分，例如`"blah"@example.com`.

我认为验证者在变得无法使用之前不能接受任何更少。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2010-02-11T18:51:20.550

在[Dominic Sayers isemail 文章](http://www.dominicsayers.com/isemail/)`System.Net.MailAddress`的讨论线程中，Jerry O'Brien 说他阅读了 Dominic 针对该类的 RFC 合规性测试用例：

> `System.Net.MailAddress`仅 59% 符合 RFC 规范。后续评论指出了它产生误报和漏报的具体案例。

RFC 对有效电子邮件地址的构成非常薄弱。它们允许一系列不寻常和不受欢迎的格式。所以我想真正的问题是，`System.Net.MailAddress`在大多数现实世界的情况下是否足够好？

# msbuild - MbUnit 无法识别在 Windows Server 2003 上使用 MSBuild 编译的测试程序集

> ID：528093
> 
> 赞同：1
> 
> 时间：2009-02-09T13:14:30.523
> 
> 标签：msbuild, cruisecontrol.net, windows-server-2003, mbunit

我最近在安装了 .NET Framework 3.5 SP1 的 Windows Server 2003 机器上通过 Cruise Control.NET 和 NAnt 运行的构建服务器上安装了 MbUnit 版本 2.4.2.355。

我检查了构建脚本的每个角落，CC.NET 上的 NAnt 输出报告告诉我测试项目构建良好。

这是 NAnt 脚本：

```
<target name="compiletests" description="Compiles unit tests separately">
    <exec program="${netframework.dir}\msbuild.exe">
        <arg line="C:\dev\PROJ3.1\trunk\src\PROJ\Customer\CustomerUnitTests\Company.CustomerUnitTests.csproj  /t:Rebuild /p:Configuration=Debug"></arg>
    </exec>
</target> 
```

输出是ff：

> [exec] Company.CustomerUnitTests -> C:\dev\PROJ.1\trunk\src\PROJ\Customer\CustomerUnitTests\bin\Debug\Company.CustomerUnitTests.dll [exec] 完成构建项目“C:\dev\PROJ. 1\trunk\src\PROJ\Customer\CustomerUnitTests\Company.CustomerUnitTests.csproj”（重建目标）。[执行] 构建成功。[exec] "C:\dev\PROJ3.1\trunk\src\PROJ\Customer\CustomerUnitTests\Company.CustomerUnitTests.csproj" (重建目标) (1) ->

这意味着单元测试程序集的构建成功。

事情是，在 NAnt 输出的末尾是这样的：

> mbunit-tests：[mbunit] MbUnit 2.4.2.355 测试运行程序 [mbunit] 在测试中找不到测试程序集

我已经使用控制台并尝试使用 MbUnit.Cons.Exe 手动测试编译的程序集。结果是这样的：

*   使用我的 Windows XP SP3 机器构建的测试程序集被正确识别，并且测试在我的机器上正确运行，并且在任何其他开发机器上都可以正常运行。
*   在运行 Windows Server 2003 的构建服务器中构建的测试程序集不会被识别为测试程序集；我尝试将这些文件复制到我的 XP 机器中，但它们也无法识别。

我现在想知道：测试程序集和非测试程序集有什么区别？我确定它与`Test`and`TestFixture`属性有关，但在我的情况下，为什么在 WinXP 机器中编译的程序集编译为测试，而那些编译 Win2K3 机器的程序集无法识别？

希望有人对此有所了解。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-21T09:48:32.910

首先检查[这个问题](http://code.google.com/p/mb-unit/issues/detail?id=103)。
如果这没有帮助，您需要检查目标平台（项目属性，构建）是否为“任何 CPU”。在此之后尝试打开使用 Reflector 在您的构建机器上生成的程序集。可能是生成的文件已损坏。您也可以尝试使用 VS 手动构建项目并在 MbUnit 中加载生成的测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-09T16:26:54.210

任何特定程序集是否被视为测试程序集没有根本区别。

我的猜测是您的开发机器运行的 MbUnit 版本与您的构建服务器略有不同。MbUnit v2 存在跨版本兼容性问题，可能导致它无法正确识别测试（因为它尝试加载与安装不同版本的框架程序集）。

顺便说一句，这些问题在 MbUnit v3 中已基本解决。

如果您还没有这样做，您可能会发现在源代码树中安装 MbUnit 的副本很有帮助。这将确保始终在任何地方使用一致的版本。

# vb.net - MDI 父背景上的控件

> ID：528095
> 
> 赞同：0
> 
> 时间：2009-02-09T13:14:54.407
> 
> 标签：vb.net, winforms, visual-studio-2005

在 MID 父窗口的背景上放置控件是个好主意吗？我已经向 MDI 窗口添加了一个拆分容器，该窗口按预期显示，但是当我尝试在同一窗口中打开任何其他表单时，它们显示在 SplitContainer 后面。让它们弹出的唯一方法是如果我使用 ShowDialog 来显示它们。不幸的是，我需要能够同时打开多个窗口，所以这不是一个实用的解决方案。

我是否以错误的方式处理了这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-09T17:37:07.583

您不能添加任何覆盖 MDI 客户端窗口（深灰色背景）的控件。MDI 客户端以客户端窗口作为父窗口显示，因此它们的 Z 顺序低于控件。

WF 确实支持停靠控件，它会自动将客户区调整为父窗体中的剩余空间。但仅此而已，SplitContainer 无法工作。

请注意，您可以在 SplitContainer 的面板上显示表单。将它们的 TopLevel 属性设置为 False，以便它们变成控件。例如：

```
 public partial class Form1 : Form {
    public Form1() {
      InitializeComponent();
      Form2 f2 = new Form2();
      f2.TopLevel = false;
      f2.FormBorderStyle = FormBorderStyle.None;
      f2.Visible = true;
      splitContainer1.Panel1.Controls.Add(f2);
    }
  } 
```

# cocoa-touch - 基于 UIView 的动画

> ID：528098
> 
> 赞同：1
> 
> 时间：2009-02-09T13:16:36.023
> 
> 标签：cocoa-touch

我正在尝试为 2D 游戏制作一些 UIImageViews 动画。使用 [UiView 开始/提交动画] 是不可能的，因为我需要始终确定所有图像视图的位置。相反，我正在更改 UIImageViews 中的 frame.origin.x/y 以手动控制我的动画。我的问题是，对于大量 UIImageView 或它们的大小太大（顺便说一句，UIImageView 包含具有透明颜色的 PNG），帧速率会显着下降。您有任何优化建议吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-09T16:28:28.560

UIImageView 非常适合制作关于显示的动画（UIView 是 CALayers 的轻量级包装器，它只是存储在显卡上的纹理），但您确实需要使用 begin / commit 动画块来获得流畅的动画。使用它，您可以通过访问 UIView 的支持层并获取其表示层来检索视图的当前位置。Dustin Bachrach 有一篇[文章](http://dbachrach.com/blog/2008/04/07/instantaneous-frame-of-moving-core-animation-views/)描述了如何做到这一点。基本上，表示层是 Core Animation 在任何给定时间最接近实际层的位置，因此它的帧是您的 UIView 在那个时刻的帧。

我不确定触摸事件在屏幕上移动时是否会到达视图，因此如果您需要让 UIImageView 响应触摸，您可能需要将其替换为 CALayer，将其插入为您的子层主 UIView 的层，并在该主层的presentationLayer 上调用hitTest 方法。如果单击它，则应该返回移动层的presentationLayer，否则返回背景层。

老实说，除非出于性能原因，我绝对不会使用 OpenGL，因为它比 Core Animation 为您提供的 UIViews 和 CALayers 更难编写代码。我已经能够仅使用 UIViews 和 CALayers 以 60 FPS（100 在 30 FPS）的速度为 50 个移动的半透明图层制作动画。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-09T14:08:30.050

对于 2D 游戏，我会选择[Cocos2D-iphone](http://code.google.com/p/cocos2d-iphone/)。

它很像 Flash，具有开源的优点，并且与 Chipmunk Physics 紧密集成。此外，在 riq 的大力发展下。

你可以用 Cocos 做更多的事情，而不仅仅是游戏。绝对值得一试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-11T08:27:34.760

好的，使用开始/提交动画解决了我的帧率问题，我能够确定我的 UIView 的实时坐标。最后一个问题仍然存在：我可以以编程方式停止这样的动画吗？

# visual-c++ - 如何合并多个 PDB 文件？

> ID：528105
> 
> 赞同：10
> 
> 时间：2009-02-09T13:20:59.120
> 
> 标签：visual-c++, command-line, pdb-files

我们目前使用单个命令行工具在 Windows 和 Linux 上构建我们的产品。

Si 到目前为止它工作得很好，允许我们从源代码构建并且具有比我们以前的任何构建系统所允许的更精细的依赖关系。这为我们带来了强大的增量和并行构建能力。

为了简要描述构建过程，我们得到通常的：

```
.cpp -- cl.exe --> .obj and .pdb
multiple .obj and .pdb -- cl.exe --> single .dll .lib .pdb
multiple .obj and .pdb -- cl.exe --> single .exe .pdb 
```

msvc C/C++ 编译器充分支持它。

最近出现了构建一些静态库的需求。根据我们收集到的信息，构建静态库的过程是：

```
multiple .cpp -- cl.exe --> multiple .obj and a single .pdb
multiple .obj -- lib.exe --> a single .lib 
```

单个 .pdb 意味着`cl.exe`只应对所有 .cpp 源执行一次。这个单一的执行意味着我们不能并行化这个静态库的构建。这真的很不幸。

我们根据文档（以及可用的命令行选项）进行了进一步调查：

*   `cl.exe`不知道如何构建静态库
*   `lib.exe`不知道如何构建 .pdb 文件

有人知道合并多个 PDB 文件的方法吗？我们注定要缓慢构建静态库吗？Incredibuild 等工具如何解决此问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-19T11:08:55.003

我很长时间没有使用 C++，但从这篇[文章](http://blogs.msdn.com/b/vcblog/archive/2014/03/05/shrink-my-program-database-pdb-file.aspx)看来，这是一个停止为常见标头重新创建符号的性能技巧。

您可以尝试 /Z7 在每个 obj 中嵌入信息，而不是创建 PDB，然后使用 rebase 链接并重新创建它，如[本文](http://msdn.microsoft.com/en-us/library/hh7adf4f.aspx)中所述。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-25T13:01:51.880

无需合并 PDB 文件。

使用 /Z7 编译源文件以避免在 CL.EXE 步骤期间创建 PDB。

使用 LIB.EXE 创建带有嵌入式调试信息的静态库。使用 LINK.EXE 而不是 CL.EXE 来链接，使用 /PDB 来指定调试信息的去向。

如果您使用 EXE 和一个或多个 DLL 调试进程，请为调试器提供每个映像（EXE 或 DLL）的 PDB。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-09-16T08:44:19.120

合并 PDB 文件是可能的，但只能由 cl.exe 和 link.exe 完成。我不知道任何用于合并 PDB 文件的独立工具。

您可以使用链接器的 /PDB 选项（我检查了 VC2005）来指定备用 pdb 文件名。

Microsoft 建议还包括 PDB 文件（每个 obj 都有一个相应的 PDB 文件）以及 .LIB 文件。

您无法将 PDB 文件存档在 .LIB 文件中，我用 VC2003 尝试过，失败了。

使用 /Z7 编译可以避免 .LIB 的 PDB 文件，但目标文件很大，除非 link.exe 去除调试信息。如果您没有链接器的 /debug 选项，则无法调试您的 exe/dll。

除非您使用 /Fd 选项指定另一个名称，否则编译器 (cl.exe) 始终写入 vcXX.pdb 文件。即使您使用 cl.exe “直接”生成可执行文件，它也会生成 vc80.pdb 文件，然后 link.exe 将生成与可执行文件相同的 pdb 文件名。

cl /子测试.c

cl.exe -> vc80.pdb link.exe 读取 vc80.pdb（名称嵌入在 test.obj 文件中） -> test.pdb

每次 cl /Zi /c 编译一个文件时，它都会尝试修改现有的 vcXX.pdb 文件而不是覆盖它。

我通过反复玩编译器得到了上述结论，然后捕获 sysinternals 的 procexp 结果并对其进行分析。希望能帮助到你。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-05T08:52:23.467

除非您想*重新分发*带有调试信息的静态库，否则您实际上不需要合并任何 PDB 文件（或用于`/Z7`嵌入调试信息）。

正如@zhaorufei 提到的，在使用时`/Zi`，每个目标文件都包含对其 PDB 文件的引用，然后链接器会使用该引用。

只需使用[`/Fd`](https://docs.microsoft.com/en-us/cpp/build/reference/fd-program-database-file-name)给每个对象一个唯一的 PDB 文件：

```
> cl -c foo.cpp -Fo:target/foo.obj -Fd:target/foo.pdb -Zi
> cl -c bar.cpp -Fo:target/bar.obj -Fd:target/bar.pdb -Zi

> strings target/foo.obj | grep pdb
D:\Dev\sample\target\foo.pdb
> strings target/bar.obj | grep pdb
D:\Dev\sample\target\bar.pdb 
```

这还有一个好处，它可以解决[此处](https://docs.microsoft.com/en-us/cpp/build/reference/fs-force-synchronous-pdb-writes)提到的对共享 PDB 文件的并发访问问题，因此您可以按照需要并行化编译步骤。

然后像往常一样链接/归档目标文件。VC++ 已经在目标文件中嵌入了各种信息以将它们传递给链接器，例如运行时链接设置和依赖库——PDB 文件路径也不例外。从对象创建静态库不会删除引用：

```
> lib -out:target/all.lib target/foo.obj target/bar.obj
> strings target/all.lib | grep pdb
D:\Dev\sample\target\bar.pdb
D:\Dev\sample\target\foo.pdb 
```

当将此库链接到可执行文件或 DLL 时，链接器仍会从引用的 PDB 中提取调试信息并将其添加到最终的 PDB 文件中。

我能看到的唯一警告是路径始终是绝对的，因此如果您在链接之前将文件移动到本地或另一台机器上，这可能不起作用。

# c++ - 是否可以在 Visual Studio 2008 64 位版本中使用 boost 库？

> ID：528107
> 
> 赞同：0
> 
> 时间：2009-02-09T13:22:21.080
> 
> 标签：c++, boost, 64-bit

我尝试在 VS2008 的 64 位模式下使用 boost 库，但出现“找不到头文件”错误。
是否可以在 VS2008 的 64 位模式下使用 boost 库？
它在 32 位模式下运行良好。这就是为什么我对 64 位持怀疑态度，但是 ;(

或者任何人都有很好的链接来显示设置 64 位模式以使用 boost？
谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-09T14:37:43.257

Boost 适用于 VS2008。你确定你的包含路径设置正确吗？

我通常将 boost 库的引用指向选项|项目和解决方案|VC++ 目录设置。确保为 win32 和 x64 设置“包含文件”设置。

大多数库只是标题，无论您构建的是 32 位还是 64 位都没有关系。

# python - TypeError：“NoneType”对象不可迭代

> ID：528116
> 
> 赞同：-3
> 
> 时间：2009-02-09T13:25:34.973
> 
> 标签：python, mysql

我需要一次处理一行 mysql 数据，并且我选择了所有行将它们放在一个元组中，但我得到了上面的错误。

这是什么意思，我该怎么做？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-02-09T13:31:20.577

1.  提供一些代码。
2.  您可能调用了一些应该更新数据库的函数，但该函数不返回任何数据（如`cursor.execute()`）。和代码：

    数据 = cursor.execute()

    制作`data`一个`None`（的`NoneType`）对象。但是如果没有代码，就很难指出错误的确切原因。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-02-09T13:32:01.603

这意味着您尝试迭代的对象实际上是 None；也许查询没有产生结果？
你能发布一个代码示例吗？

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-02-09T13:35:36.823

用于选择所有行的函数返回 None。这个“可能”（因为你没有提供代码，我只是假设）意味着 SQL 查询没有返回任何值。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-02-09T14:20:03.237

在调用 cursor.execute() 后尝试使用 cursor.rowcount 变量。（此代码不起作用，因为我不知道您使用的是什么模块）。

```
db = mysqlmodule.connect("a connection string")
curs = dbo.cursor()
curs.execute("select top 10 * from tablename where fieldA > 100")
for i in range(curs.rowcount):
  row = curs.fetchone()
  print row 
```

或者，您可以这样做（如果您知道要返回结果）：

```
db = mysqlmodule.connect("a connection string")
curs = dbo.cursor()
curs.execute("select top 10 * from tablename where fieldA > 100")
results = curs.fetchall()
if results:
  for r in results:
    print r 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-02-09T14:55:27.003

此错误意味着您正在尝试遍历 None 对象。这就像试图在 C/C++ 中循环一个 Null 数组。正如 Abgan, orsogufo, Dan 提到的，这可能是因为查询没有返回任何内容。我建议您检查您的查询/数据库连接。

重现此错误的简单代码片段是：

x = 无

对于 x 中的每个 i：#Do Something pass

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-20T20:06:04.407

I know it's an old question but I thought I'd add one more possibility. I was getting this error when calling a stored procedure, and adding SET NOCOUNT ON at the top of the stored procedure solved it. The issue is that earlier selects that are not the final select for the procedure make it look like you've got empty row sets.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-06-21T07:54:29.823

当我尝试让“usrsor.fetchone”执行两次时，可能会发生这种情况。像这样：

```
import sqlite3

db_filename = 'test.db'

with sqlite3.connect(db_filename) as conn:
    cursor = conn.cursor()

    cursor.execute("""
    insert into test_table (id, username, password)
    values ('user_id', 'myname', 'passwd')
    """)

    cursor.execute("""
    select username, password from test_table where id = 'user_id'
    """)

    if cursor.fetchone() is not None:
        username, password = cursor.fetchone()
        print username, password 
```

我不太了解原因。但我用 try 和 except 对其进行了修改，如下所示：

```
import sqlite3

db_filename = 'test.db'

with sqlite3.connect(db_filename) as conn:
    cursor = conn.cursor()

    cursor.execute("""
    insert into test_table (id, username, password)
    values ('user_id', 'myname', 'passwd')
    """)

    cursor.execute("""
    select username, password from test_table where id = 'user_id'
    """)

    try:
        username, password = cursor.fetchone()
        print username, password
    except:
        pass 
```

我猜 cursor.fetchone() 不能执行两次，因为第一次执行时游标将是 None 。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-05-16T09:57:51.167

尝试将您的查询结果附加到列表中，然后您就可以访问它。像这样的东西：

```
try:
    cursor = con.cursor()
    getDataQuery = 'SELECT * FROM everything'
    cursor.execute(getDataQuery)
    result = cursor.fetchall()  
except Exception as e:
    print "There was an error while getting the values: %s" % e
    raise

resultList = []

for r in result:
    resultList.append(r) 
```

现在你有了一个可迭代的列表。

# c++ - const 函数的编译器错误

> ID：528117
> 
> 赞同：1
> 
> 时间：2009-02-09T13:25:46.020
> 
> 标签：c++, constants

我不确定我是否缺少一些基本的东西。但我无法理解为什么编译器会为此代码生成错误：

```
class A
{
};

class B
{
public:
    B();
    A* get() const;

private:
    A* m_p;
};

B::B()
{
    m_p = new A;
}

A* B::get() const
{
    //This is compiling fine
    return m_p;
}

class C
{
public:
    A* get() const;
private:
    A m_a;
};

A* C::get() const
{
   //Compiler generates an error for this. Why? 
    return &m_a;
} 
```

编辑：编译器错误是：错误 C2440：'return'：无法从 'const class A *' 转换为 'class A *' 转换丢失限定符

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-02-09T13:28:58.117

`const`在函数签名中告诉编译器对象的成员可能不会被修改。然而，您返回一个`const`指向成员的非指针，从而允许违反该承诺。

在您的班级`B`中，您没有做出承诺，因为您没有返回指向成员的指针，而是返回了它的副本（并且该成员恰好是指针）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-09T13:28:15.873

这是因为您要从 const 函数返回一个指向成员的非常量指针。

第一部分有效，因为您要返回成员指针的*副本*，因此这不会违反 get 函数的 const-ness：

```
class B
{
public:
    B();
    A* get() const;

private:
    A* m_p;
};

A* B::get() const
{
    //This is compiling fine
    return m_p;
} 
```

但是下一位会产生编译错误（在 gcc 4 上）

> testfile.cpp:37: 错误：从 'const A*' 到 'A*' 的无效转换</p>

因为您的 const get 函数通过返回指向它的非常量指针来提供对 m_a 的非常量访问。

```
class C
{
public:
    A* get() const;
private:
    A m_a;
};

A* C::get() const
{
   //Compiler generates an error for this. Why?
    return &m_a;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-09T13:30:25.307

因为返回的指针不是 const。将其更改为：

```
class C
{
public:
    const A* get() const;
private:
    A m_a;
};

const A* C::get() const
{
    //Compiler generates an error for this. Why? 
    return &m_a;
} 
```

注意 C::get() 现在返回一个指向 A 的 const 指针。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-09T13:30:26.053

标记的成员函数`const`不能返回非常量引用或指向私有变量的指针。如果编译器允许这样做，您的类之外的任何人都可以修改所述私有变量，并且`const`函数上的限定符将失去意义。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-09T13:31:11.387

这个问题可以用一个更简单的例子来说明：

```
class MyClass {
public:
    int *get() const;
private:
    int value;
};

int *MyClass::get() const {
    return &value;
} 
```

中`MyClass::get() const`，`value`有类型`const int`。当你取消引用它时，你会得到`const int *`. 该类型不能安全（隐式）转换为`int *`. 要纠正您的问题，请`get()`返回`const int *`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-09T13:33:38.603

```
A* C::get() const
{
   //Compiler generates an error for this. Why? 
    return &m_a;
} 
```

因为 get() 是一个 const 函数，所以编译器将它引用的所有成员变量都视为 const。当你获取这样一个成员的地址时，你会得到一个指向 const 的指针。但是您的函数正在返回一个非常量指针。您需要将代码更改为

```
const A* C::get() const
{
    return &m_a;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-02-09T16:08:44.847

基本上只是在前面添加一个 const ，

```
const A* C::get() const
{
   //Compiler generates an error for this. Why? 
    return &m_a;
} 
```

然后如果你想访问它，基本上做：

```
C something;

const A* a = something.get(); 
```

但是，对我来说，您的程序毫无意义。

IMO，这样做最有意义：

```
class A{
};

class C : public A
{
}; 
```

这样你就不必做一个“get”来返回 A 的实例。

# sharepoint - Sharepoint - 如何设置权限级别以添加项目但不查看？

> ID：528119
> 
> 赞同：12
> 
> 时间：2009-02-09T13:27:36.170
> 
> 标签：sharepoint

我想允许某组用户将项目添加到列表中，但不能查看所有项目。这样我就可以设置一个工作流，其中某些部分是私有的。我认为可以通过在以下位置定义新的权限级别来实现：

[http://servername/_layouts/addrole.aspx](http://servername/_layouts/addrole.aspx)（“添加权限级别”页面）

但是，当您选择“添加项目”列表权限时，“查看项目”也会自动勾选。

有谁知道这个问题的解决方案？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-10-06T09:04:25.673

作为中途选项，您可以将列表设置为仅向其所有者显示项目（*设置>高级设置*，然后将*读取访问/编辑访问*的选项设置为“仅他们自己的”。这不会阻止一个人看到他们添加的所有项目，但在此权限之外将无法查看任何内容（列表所有者除外）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-09T13:49:50.983

View Items 是 Add Items 的依赖权限，因此不确定我们是否可以在 sharepoint 中添加此类权限 OOB，请看这里：( [http://office.microsoft.com/en-us/sharepointtechnology/HA101001491033.aspx](http://office.microsoft.com/en-us/sharepointtechnology/HA101001491033.aspx) )

您可以有一个肮脏的解决方法，即创建 2 个列表，然后在第一个列表的项目添加事件中添加代码以将项目添加到另一个列表，而不是将其从第一个列表中删除，不确定这是否是一个好的解决方案。. .

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-27T15:31:08.843

```
$spweb=Get-SPWeb -Identity "<site url>";
$spRoleDefinition = New-Object Microsoft.SharePoint.SPRoleDefinition;
$spRoleDefinition.Name = "Submit only";
$spRoleDefinition.Description = "Can submit/add forms/files/items into library or list but cannot  view/edit them.";
$spRoleDefinition.BasePermissions = "AddListItems, ViewPages, ViewFormPages, Open";
$spweb.RoleDefinitions.Add($spRoleDefinition); 
```

取自： [http ://sajiviswam.wordpress.com/2011/12/09/add-only-permission-level-in-sharepoint-2010/](http://sajiviswam.wordpress.com/2011/12/09/add-only-permission-level-in-sharepoint-2010/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-10-27T13:40:07.557

我有一个类似的问题，不希望匿名用户看到列表的内容。

相同的解决方案可能适用于此。

在 SharePoint 设计器中（由于某种原因无法在 Web 上编辑页面），打开 DispForm.aspx 页面并在 webpart 属性上，添加目标受众（如果不希望任何人看到将 webpart 隐藏）不要删除 WEBPART - 这样做会中断你的名单完全！

可以对 AllItems.aspx 做同样的事情

希望这可以帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-01-04T14:32:18.097

在工作流中使用模拟步骤。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-11-26T16:39:17.673

我完全同意'Ceesaaxp'。在列表的*Advanced Settings*下，将 Read Access 设置为*Only They Own*。我创建了一个知识管理流程，其中我创建了两个列表，一个用于待处理的知识文章，一个用于批准。我修改了待处理列表的“新表单”页面，并使用 JavaScript 禁用了一个下拉框，该下拉框用作文章的状态。然后，此下拉菜单将永久设置为“待定”。我还创建了一个新的权限级别，它只允许用户添加项目。然后，我创建了一个工作流，当状态下拉框设置为“已批准”时，该工作流将文章移动到“已批准”列表中。

然后，我将待处理列表的高级设置中的只读设置更改为仅他们自己的设置，因此所有知识文章在发布之前都经过批准。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-02-20T08:57:50.327

我认为使用高级权限是不可访问的，因为它不能阻止提交者查看它，否则这是一个很好的解决方案！我认为工作流应该可以完成这项工作。只需确保在上传项目时触发工作流。然后，如果您可以构建一个可以为项目设置特定权限的工作流，那么所有事情都应该完成。如果您不熟悉构建工作流程，请访问 3w.sharepointboost.com，如果有一种称为 Column View Permission 的即插即用解决方案。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-02-09T20:22:42.427

开箱即用的 SharePoint 设计器我只能考虑使用工作流将任何项目从公共“保管箱”列表移动到安全列表。

用户可以查看项目并将其上传到公共保管箱，但会立即启动一个工作流程，将内容移动到另一个相同的安全列表。您可以决定是否需要允许内容覆盖。

一个 hacky 解决方法，但没有编程，这就是 SharePoint 的全部内容。（我的公司还不让我给它写代码）

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-02-10T02:53:45.000

您并没有真正指定您使用的是哪种列表，但如果您查看“高级设置”下的列表设置，您可能会找到“项目级别权限”部分。这将允许您选择限制用户仅阅读（或编辑）他们提交的项目。这超出了列表上设置的任何其他 ACL 或其项目。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-03-13T16:24:28.723

当我发现此消息时，我正在为此制定一个快速解决方案，并进行研究。除了 SPD 工作流程，不适用于匿名用户，我正在考虑做一个 infopath html 表单，将表单邮寄到表单库。您可以将一个表单库作为启动表单的站点，然后将结果存储在不同的表单库中。由于您可以将表单库设置为接受来自任何人的电子邮件，因此您可以阻止人们阅读但他们仍然可以编辑。

没有尝试过，但如果我遇到问题会发表评论。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2010-02-16T19:08:53.530

@Jomit。您的解决方法可能有效，但存在赛车条件问题。用户可能仍有机会看到其他项目。根据您的规则，这可能是一个禁忌。

SharePoint 中的常规列表在设置/高级设置/项目级权限下提供此选项。尽管出于某种原因，*文档*和*表单库*的 GUI 中缺少此选项。

一种可能的解决方案是编写一个简单的程序来使用 SharePoint 对象模型进行这些更改。 [http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.splist.writesecurity.aspx](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.splist.writesecurity.aspx)

```
// Sample code for setting writing and reading security on a form library
class Program
            {
                static void Main(string[] args)
                {
                    using (SPSite site = new SPSite(args[0]))
                    {
                        using (SPWeb web = site.OpenWeb())
                        {
                            SPList list = web.Lists[args[1]];
                            list.WriteSecurity = 2;
                            list.ReadSecurity = 2;
                            list.Update();
                        }
                    }
                }
            } 
```

# c# - 为什么 C# 不提供类似于 C++ 的常量？

> ID：528122
> 
> 赞同：14
> 
> 时间：2009-02-09T13:27:57.323
> 
> 标签：c#, compiler-construction, reference, constants

C# 中的引用与 C++ 中的引用非常相似，只是它们是垃圾回收的。

为什么 C# 编译器很难支持以下内容：

1.  成员函数标记为`const`。
2.  对标记的数据类型（字符串除外）的引用`const`，通过它只能`const`调用成员函数？

我相信如果 C# 支持它会非常有用。一方面，它确实有助于看似广泛的同性恋放弃，C# 程序员返回对私有数据的裸引用（至少这是我在工作场所看到的）。

或者我在 C# 中已经有一些等价的东西了？（我知道`readonly`and`const`关键字，但它们并没有真正达到上述目的）

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-02-09T13:41:20.287

我怀疑有一些实际原因，还有一些理论上的原因：

*   常量应该适用于*对象*还是*引用*？如果它在参考中，这应该只是编译时的，还是参考本身的一点？其他具有对同一对象的非常量引用的东西可以在引擎盖下摆弄它吗？
*   您是否希望能够像在 C++ 中一样将其丢弃？这听起来不太像您在托管平台上想要的东西……但是在 C++ 中有意义的所有时候呢？
*   当您在声明中涉及多个类型时，语法会变得棘手（IMO） - 想想数组，泛型等。很难准确确定哪个位是 const。
*   如果你不能把它扔掉，*每个人都必须把它做好*。换句话说，您使用的 .NET 框架类型和任何其他 3rd 方库都必须做正确的事情，或者您会遇到令人讨厌的情况，即您的代码由于一个微妙的问题而无法做正确的事情恒常性。

*就为什么现在*不能支持它而言，有一个很大的原因：

*   向后兼容性：不可能所有的库都正确迁移到它，使它几乎没用:(

我同意拥有某种 constness 指标会很有用，但恐怕我看不到它的发生。

编辑：多年来，Java 社区一直存在关于这种情况的争论。有很多关于[相关错误](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4211070)的评论，您可能会觉得有趣。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-02-09T15:02:21.030

正如 Jon 已经涵盖的（当然） const 正确性并不像看起来那么简单。C++ 以一种方式做到这一点。D 以另一种方式（可以说更正确/有用）。C# 与它调情，但没有做任何更大胆的事情，正如您所发现的（而且可能永远不会很好，正如 Jon 再次很好地介绍的那样）。

也就是说，我相信 Jon 的许多“理论原因”在 D 的模型中得到了解决。

在 D (2.0) 中， const 的工作方式与 C++ 非常相似，只是它是完全可传递的（因此应用于指针的 const 将应用于指向的对象、该对象的任何成员、该对象具有的任何指针、它们指向的对象等) - 但很明显，这*仅*适用于您声明 const 的变量（因此，如果您已经有一个非常量对象并且您将 const 指针指向它，那么非常量变量仍然可以改变状态）。

D 引入了另一个关键字——不变量——它适用于对象本身。这意味着一旦初始化，任何东西都无法改变状态。

这种安排的美妙之处在于 const 方法可以接受 const 和不变对象。由于不变对象是函数世界的面包和黄油，并且 const 方法可以在函数意义上被标记为“纯” - 即使它可以与可变对象一起使用。

回到正轨 - 我认为我们现在（后半部分顽皮）才了解如何最好地使用 const （和不变量）。.Net 最初是在事情更加模糊的时候定义的，所以没有做出太多承诺——现在改造已经太晚了。

不过，我希望看到 D 的端口在 .Net VM 上运行 :-)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-02-09T15:05:45.933

[C#语言的设计者Heljsberg先生](http://en.wikipedia.org/wiki/Anders_Hejlsberg)已经回答了这个问题：

[http://www.artima.com/intv/choicesP.html](http://www.artima.com/intv/choicesP.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-12T11:08:39.277

如果不可变类型被添加到 C# 的未来版本中，我不会感到惊讶。C# 3.0 已经朝着这个方向发展。

例如，匿名类型是不可变的。

我认为，由于旨在包含并行性的扩展，您可能会看到越来越多的不可变性出现。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-09T13:40:06.607

问题是，我们需要 C# 中的 constness 吗？

1.  我很确定 JITter 知道给定的方法不会影响对象本身并自动执行相应的优化。（也许通过发射`call`而不是`callvirt`？）

2.  我不确定我们是否需要这些，因为 constness 的大多数优点都与性能相关，所以你最终会得到第 1 点。

除此之外，C# 有`readonly`关键字。

# c# - 比较两个字符串时如何用另一个值替换一个值？

> ID：528123
> 
> 赞同：1
> 
> 时间：2009-02-09T13:28:14.610
> 
> 标签：c#, asp.net, cobol, transoft

我的用户在数据库中保存了一个密码字段，例如“0！ZWQ2”。我必须将我的用户输入密码从“aA1234”解读为“0！ZWQ2”，并将其与数据库中的数据进行比较。

我比较的 2 个字符串是：

“abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890”与“9setybcpqwiuvxr108daj5'-`~!@#$%^&*()_+|}][{:.?/<>,;ZWQ2@#34KDA”</p>

这样 a = 9 和 0 = A

我将如何在 C# 中做到这一点，有什么想法吗？

我只需要从用户输入中获取密码字段并将其打乱为有趣的文本，以将其与数据库中的数据进行比较。

任何帮助将不胜感激。

问候艾蒂安

更新：（2009 年 2 月 10 日）感谢大家的回复。请注意，我确实意识到有更好的方法来处理这个问题。但请注意，我正在创建一个 ASP.NET 应用程序，该应用程序位于 SharePoint 内部，连接到 Cobol 平面文件数据，而不是适当的数据库。使用 Transoft 将我的 ASP.NET（ODBC 连接器）连接到 Cobol 平面文件。所以我必须坚持使用这段代码，这不会在我的私人网站上使用。我也无法控制何时在 Cobol 中创建密码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-09T13:31:15.693

有什么特殊的理由不使用标准哈希+盐来存储密码，而不是凯撒密码？

应该解决它的一种方法（未经测试的代码）：

```
new string("aA1234".ToCharArray().Select(c => ScrambleChars[OriginalChars.IndexOf(c)]).ToArray()); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-02-09T13:46:57.107

以下是要转换的 Quick、Fast 和更少的代码示例。

C# 中的代码：

```
 char[] OriginalChars = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890".ToCharArray();
        char[] ScrambleChars = "9setybcpqwiuvxr108daj5'-`~!@#$%^&()+|}][{:.?/<>,;ZWQ2@#34KDART".ToCharArray();
        string TextToTransfer = "Hello";
        string NewText = "";
        foreach (char c in TextToTransfer)
        {
            NewText = NewText + ScrambleChars[Array.IndexOf<char>(OriginalChars, c)].ToString();
        }
        Console.WriteLine(NewText); 
```

VB中的代码：

```
 Dim OriginalChars() As Char = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890"
    Dim ScrambleChars() As Char = "9setybcpqwiuvxr108daj5'-`~!@#$%^&()+|}][{:.?/<>,;ZWQ2@#34KDART"
    Dim TextToTransfer As String = "Hello"
    Dim NewText As String = ""
    For Each c As Char In TextToTransfer
        NewText += ScrambleChars(Array.IndexOf(OriginalChars, c))
    Next
    MsgBox(NewText) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-09T13:35:12.860

您不应该以可以反转的方式将密码保存在数据库中。入侵您系统的数据库管理员或黑客应该无法获取用户存储的密码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-09T14:22:07.333

首先，正如其他用户所说，如果您正在设计这个系统和密码存储方法，那么这种方法几乎毫无价值，应该使用许多更安全的方法。

但是，您要求此进行比较的事实使我认为您无法控制数据库中已有的内容，因此正在处理遗留的内容。

下面的函数会将您的用户密码作为字符串并将数据库密码作为字符串返回。需要注意的一点是，您提供的两个字符串长度不相等，因此对于字符 9 和 0 会崩溃。我已在 dbChars 字符串中添加了额外的字母 B 和 C。另外，我已经“假设”在映射字符中找不到的任何输入的字符都只是按照输入的方式附加。您可能要求忽略这些字符。

```
 private string DatabasePassword(string userPassword)
    {
        //Constants showing mapping between user password and database password
        const string userChars = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890";
        const string dbChars   = "9setybcpqwiuvxr108daj5'-`~!@#$%^&()+|}][{:.?/<>,;ZWQ2@#34KDABC";

        //Stringbuilder used to build the database password for output
        System.Text.StringBuilder databasePassword = new System.Text.StringBuilder();

        //Run through every character in the user password
        foreach (Char userChar in userPassword)
        {
            //Find the index of the user character in the userChars string.
            int userCharIndex = userChars.IndexOf(userChar);

            //if the userChar exists in the userChars string then map the character to the
            //equivalent database pasword character else just use the entered char
            char mappedChar = userCharIndex >= 0 ? dbChars[userChars.IndexOf(userChar)] : userChar;

            //Append mapped password to the output database password
            databasePassword.Append(mappedChar);
        }

        return databasePassword.ToString();
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-09T13:32:56.203

我会编写一个实用程序类，其中包含一个 Encode 或 Translate 方法，该方法采用 inputString 并（检查任何错误/恶意输入）使用您的密码方法对其进行变形。

```
return String.Compare(dbPassword, PasswordUtility.Encode(inputString)); 
```

# wpf - 内置 WPF 控件如何管理其事件处理程序以附加事件？

> ID：528127
> 
> 赞同：5
> 
> 时间：2009-02-09T13:29:16.087
> 
> 标签：wpf, events, memory-leaks

我知道当您将对象注册到鼠标的附加事件时，您会发生内存泄漏。这就是您需要使用[Wea​​kEvent 模式](http://msdn.microsoft.com/en-us/library/aa970850.aspx)的原因。

我对这种模式有一个问题：如果你想使用它，你不能在 XAML 代码中定义你的处理程序。

对我来说，这意味着像这样的每个代码都会泄漏：

```
<SomeControl Mouse.MouseDown="MyHandler" /> 
```

除非您在代码中明确删除您的处理程序（而且我怀疑有人这样做）。现在有一些我不明白的东西：

```
<Button Click="MyHandler" /> 
```

此代码以某种方式在某处使用 Mouse.MouseDown 事件来检测对按钮的单击。通过对反射器的一些研究，我发现此事件使用 UIElement 类的 MouseDown。当我阅读 UIElement 的代码时，我不明白：没有 WeakEventManager ！

有人可以解释一下 UIElement 如何从 Mouse.MouseDown 接收事件而不会泄漏吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-02-09T21:24:56.897

在 XAML 中使用普通处理程序不需要弱引用。

您正在做的是在主控件和包含在该控件中的子控件之间创建内存引用；在这种情况下，子控件是按钮。

如果有人为主控件维护对可视树任何部分的引用，则整个树将保留在内存中，因为它链接在一起（父/子引用）。

现在，如果删除了对该树的所有引用，则父子控件（主控件和按钮）之间的事件引用并不重要，因为这些控件已经通过父/子引用链接。一旦删除了所有外部引用，就可以对这个控件进行垃圾回收。

XAML 中的事件处理程序仅创建内部事件引用。

当外部客户端注册到控件上的事件时，您必须小心，因为您正在创建一个外部引用，只要链接和客户端存在，它将使控件保持活动状态（除非它是弱引用）。

您的问题是关于附加事件。似乎没有任何关于附加事件是否会导致内存泄漏的明确文档。在我看来，订阅事件的 UI 控件包含对事件的引用，而不是相反，但我假设静态事件对象必须有某种方式来通知控件它已被触发。微软似乎出人意料地缺乏对此的评论。

# javascript - 如何淡化背景

> ID：528135
> 
> 赞同：2
> 
> 时间：2009-02-09T13:31:29.030
> 
> 标签：javascript, html, css

我打算查找如何执行此操作，但我真的不知道该怎么称呼它来查找它，所以我希望我可以在这里描述它并且有人可以指出我正确的方向。无论如何，我正在寻找如何在网站上制作它，当您单击某些东西时，会弹出一个新的排序层并淡化背景。我看到网站一直这样做，但我不知道该怎么做。一点指导会很棒。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-02-09T13:33:38.073

它被称为灯箱。你可以用[谷歌搜索那个词](http://www.google.com/search?q=light%20box)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-09T16:35:09.013

如果您想避免 JavaScript 库的重量，这里有一个工作示例，您可能会发现它具有指导意义，基于我多次使用的一些自制代码......

```
<html>
<head>
<style type="text/css">
  #helloWorld {
    position:absolute;
    margin:2em;padding:2em;
    border:1px solid #000;
    background-color:#ccd;
    opacity:0;
    filter:alpha(opacity=0.0); }
</style>

<script type='text/javascript'>

  function setOpacity( elem, amount ) {
    if ( amount > 1.0 )
      amount = 1.0

  /*@cc_on
    @if (@_jscript)
    // This is For Internet Explorer Only
    //
            elem.style.filter = "alpha(opacity=" + Math.round( amount * 100 ) + ")";
    @else*/
    // for all other browsers
    //
            elem.style.opacity = amount;
  /*@end
    @*/
  }
  // endOpacity ranges from 0.0 to 1.0
  // fade time is in seconds
  function fadeIn( elem, endOpacity, fadeTime ) {
    var startTime = (new Date()).getTime();
    var fadeTimer = null;

    var fadeStep = function() {
      var elapsedTime = (new Date()).getTime() - startTime;
      var opacity = endOpacity * elapsedTime / (fadeTime * 1000.0);
      if ( opacity >= endOpacity ) {
        opacity = endOpacity 
        clearInterval( fadeTimer );
      }
      setOpacity( elem, opacity );
    }
    fadeTimer = setInterval( fadeStep, 40 ) // with luck = 25 frames per second
  }

  window.onload = function() { 
    var elem = document.getElementById( 'helloWorld' );
    var clickMe = document.getElementById( 'clickMe' );
    clickMe.onclick = function() {
      fadeIn( elem, 0.8, 2.0 ); // fade to 80% over 2 seconds
    }
  }

</script>
</head>
<body>

<div id="helloWorld"><h1>Hello World</h1></div>

<p>lorem ipsum blah blah dum de dum quick brown fox etc...</p>
<p>lorem ipsum blah blah dum de dum quick brown fox etc...</p>
<p>lorem ipsum blah blah dum de dum quick brown fox etc...</p>
<p>lorem ipsum blah blah dum de dum quick brown fox etc...</p>
<p>lorem ipsum blah blah dum de dum quick brown fox etc...</p>
<p>lorem ipsum blah blah dum de dum quick brown fox etc...</p>

<p><input id='clickMe' type='button' value='Click me please' /></p>

</body>
</html> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-09T16:52:12.560

使用[影子盒](http://www.mjijackson.com/shadowbox/)！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-09T13:34:31.160

这是 ppk 撰写的一篇关于 css 中 opacty 的精彩文章：[http ://www.quirksmode.org/css/opacity.html](http://www.quirksmode.org/css/opacity.html)

应该帮助你：）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-09T13:37:44.850

您可以使用 Javascript 函数解决此问题：

```
function ShowNewPanel()
{
var new_panel = document.getElementById(’new_panel’);
// w is a width of the new panel
w = 300;
// h is a height of the new panel
h = 300;
// get the x and y coordinates to center the new panel
xc = Math.round((document.body.clientWidth/2)-(w/2))
yc = Math.round((document.body.clientHeight/2)-(h/2))
// show the newsletter panel
new_panel.style.left = xc + “px”;
new_panel.style.top = yc + “px”;
new_panel.style.display = ‘block’;
} 
```

如您所见，我们首先确定将输入面板在页面上居中的坐标。更新面板的宽度和高度可以根据您的需要更改，但请记住，您需要在 CSS 和此函数中更改这些值。

**对于暗屏本身，在 CSS 中使用类似这样的内容：**

```
filter:alpha(opacity=80);
opacity: 0.8; 
```

更多关于这个[here](http://codingatlas.wordpress.com/2006/07/08/darken-the-page-and-set-focus-on-the-user-input/ "这里")。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-02-09T16:55:27.357

您可以使用 jQuery 的[SimpleModal 插件](http://www.ericmmartin.com/projects/simplemodal/)。我已经在许多项目中成功使用了它。

它使用起来并不难，而且非常灵活。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-02-09T13:33:58.807

您可以使用[jQuery](http://www.jquery.com)来做到这一点。CSS Tricks 有一个名为*Color Fading Menu with jQuery* [here](http://css-tricks.com/color-fading-menu-with-jquery/)的教程。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-02-09T13:34:22.083

我相当确定您的意思是通常称为模态对话框的内容（这是一个有点误导性的术语）......可以在[这里找到一个不错的 jquery 演示](http://www.ericmmartin.com/projects/simplemodal/)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-02-09T13:37:06.460

我认为您还需要使用 javascript 才能做到这一点。

这是一种使背景褪色的 jQuery 方法，称为 BlockUI： [http ://malsup.com/jquery/block/](http://malsup.com/jquery/block/)

# wpf - 依赖属性奇异性

> ID：528161
> 
> 赞同：0
> 
> 时间：2009-02-09T13:36:56.053
> 
> 标签：wpf, data-binding, dependency-properties, observablecollection

我已经使用 and 组合了一个 WPF 应用程序`ObservableCollection`，`Dependency Properties`这很酷，因为我只需向其中添加一个项目`ObservableCollection`，它就会自动显示，例如，我将集合中的对象显示为包装面板中屏幕上的框，每个框都显示其`Title`.

所以我想让每个项目不仅显示它的`Title`加前缀或后缀，而且似乎甚至没有使用依赖对象属性。我可以在它上面设置一个断点，它永远不会到达。

谁能告诉我为什么，如果我将文本添加到传出属性中，该文本永远不会被看到？我已经读过该值实际上“不是存储在对象中而是存储在 WPF 中”，但我不明白这意味着什么。

为什么依赖对象永远不会输出此文**本的文本？**

```
public class ApplicationItem : DependencyObject
{

    public string Title
    {
        get
        {
            return (string)GetValue("this text will NOT be seen: " + TitleProperty);
        }
        set
        {
            SetValue(TitleProperty, "this text will be seen: " + value);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-09T13:42:18.210

TitleProperty 不是普通属性，而是依赖属性，所以如果你想检索 TitleProperty 的值，你必须这样做：

```
var title = (string)GetValue(TitleProperty); 
```

在 WPF 指南中，访问依赖属性的公共属性不被 WPF 和绑定引擎调用（不是必需的）。此公共属性仅供您的代码使用。因此，您不得在公共财产中添加代码逻辑。

但是您可以在注册 DP 并提供 CoerceValueCallback 以更改设置值时使用 FrameworkPropertyMetadata。

您还可以在绑定中使用 IValueConverter。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-09T14:23:35.957

我得到这个为我工作：

```
public string Title
{
    get 
    { 
        string value = (string)GetValue(TitleProperty); 
        return value + " postfix";
    }
    set 
    { 
        SetValue(TitleProperty, "Prefix " + value); 
    }
} 
```

您是否有理由在检索值时尝试修改该值，而不仅仅是在设置值时对其进行修改？

# silverlight-2.0 - Silverlight WCF 访问返回 LLBLGen 实体的 IList？

> ID：528165
> 
> 赞同：0
> 
> 时间：2009-02-09T13:37:59.593
> 
> 标签：silverlight-2.0

我在将实体集合从 LLBLGen 传递回 silverlight 时遇到问题。我的合同是这样的。我什至不知道这是否可能。

我的网络服务代码如下所示：

```
public IEnumerable<WaterWorksCustomersEntity> GetCustomer(long custId, string acctKey)
{
    var toReturn = new WaterWorksCustomersEntity(custId, acctKey);
    using (var adapter = new DataAccessAdapter())
    {
        adapter.ConnectionString = "data source=CWCPROD.cwc.local;user.."; 
        adapter.FetchEntity(toReturn);
    }
    IList<WaterWorksCustomersEntity> customers = new List<WaterWorksCustomersEntity>();
    customers.Add(toReturn);
    return customers; 
} 
```

在我正在做的silverlight客户端上......

```
var client = new Service1Client();
client.GetCustomerCompleted += new EventHandler<GetCustomerCompletedEventArgs>(client_GetCustomerCompleted);
client.GetCustomerAsync(2,"110865"); 
```

编译失败并出现此错误：

> 错误 1 ​​命名空间“AppointmentClientSL.ServiceReference1”中不存在类型或命名空间名称“ArrayOfXElement”（您是否缺少程序集引用？） c:\work\Appointment\Appointment\AppointmentClientSL\Service References\ServiceReference1\Reference.cs 63 54 预约客户SL

看起来 SL 无法处理 Web 服务返回的数据。

谁能帮忙？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-10T01:47:07.203

LLBLGEN 网站上有一个通过 WCF 调用 LLBLGEN 的示例： [http ://www.llblgen.com/pages/secure/ListDownloads.aspx?ProductVersion=6#6](http://www.llblgen.com/pages/secure/ListDownloads.aspx?ProductVersion=6#6)

它正在通过 netTcp 进行同步调用，但可能有一些有用的线索......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-04-16T06:38:07.623

Silverlight 构建在不同的 .NET 框架上，因此我们的实体类型不能在该平台上使用。如果您想将我们的实体类发送到 silverlight，请使用 DTO 类。我们的论坛有几个可用的模板，可以为您生成帮助代码 + DTO 类。搜索“DTO 模板”。

# html - 如何使链接变白？

> ID：528168
> 
> 赞同：13
> 
> 时间：2009-02-09T13:39:20.463
> 
> 标签：html, css, colors, hyperlink

如何在 HTML 和 CSS 中将超链接的颜色更改为白色？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2009-02-09T13:40:50.757

使用[颜色 CSS 属性](http://www.w3.org/TR/CSS2/colors.html#colors)。

```
a { color: white; } 
```

问题是，访问过的链接也可能不会显示为白色。您可能需要添加额外的规则：

```
a, a:hover, a:active, a:visited { color: white; } 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-02-09T13:40:36.763

你使用 CSS

```
a
{
    color: #ffffff;
} 
```

锚定伪类： [http ://www.w3schools.com/CSS/css_pseudo_classes.asp](http://www.w3schools.com/CSS/css_pseudo_classes.asp)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-02-09T13:41:38.570

只是猜测，您可能也在寻找这些：

```
a:link
{
    color:#FFFFFF;
}

a:visited
{
    color:#FFFFFF;
}

a:hover 
{
    color:#FFFFFF;
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-02-09T13:41:47.960

```
a { color: #fff; } 
```

在你的 css 文件中。我要补充一点，如果您这样做是为了尝试在页面的白色背景上隐藏许多白色链接，这是一个*非常糟糕的*主意。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-08T20:20:50.720

可以通过以下方式完成：
1）如果您想在 HTML 特定链接中将超链接的颜色设置为白色，然后使用

```
<a href="#" style="color:#ffffff;">Some text</a> 
```

2）要在整个 html 页面中将超链接的颜色添加到 CSS 中的白色，请创建一个 .css 文件，其中写入以下内容：

```
{ a, a:hover, a:active, a:visited { color: white; } 
```

它将抑制`white`每个`link`.

# .net - 多语言 ASP.NET 网站的动态生成语句

> ID：528174
> 
> 赞同：3
> 
> 时间：2009-02-09T13:41:41.067
> 
> 标签：.net, asp.net

我们计划为我们的 ASP.NET 网站添加多语言支持。我了解基于当前文化从资源文件中提取字符串的一般过程，但是处理以下情况的最佳方法是什么？

假设我们想向用户显示他们今天发布了多少 Stack Overflow 帖子。可以说这`i`是帖子数。如果您只是用英语工作，那么您将拥有以下代码。

```
if(i == 1)
{
    postCountText = "You have made " + i + " post today";
} else {
    postCountText = "You have made " + i + " posts today";
} 
```

因此，文本是根据我们是处理单数还是复数的帖子来创建的。

如果我们想用任何其他语言创建帖子计数文本怎么办？显然我们不能像上面那样有很多条件语句，所以资源文件中的字符串需要自动工作以创建所需的输出文本。在另一种语言中，当您在单数和复数之间移动时，可能不仅仅是`post(s)`单词发生变化，而且单词也可能发生变化。`today`

到目前为止，我唯一的想法是在外部资源文件中存储两个字符串，一个用于单数，一个用于复数，然后将 a`String.Format`应用于这些以将帖子计数插入正确的位置。

即英语资源文件将包含以下两个字符串：

```
singlePostCount : "You have made {0} post today"

pluralPostCount : "You have made {0} posts today" 
```

然后我将有以下代码来创建输出文本：

```
if(i == 1)
{
    postCountText = String.Format(GetResourceString("singlePostCount"), i);
} else {
    postCountText = String.Format(GetResourceString("pluralPostCount"), i);
} 
```

然后，这将允许文本针对任何语言正确更改。但是，如果帖子数量为零，如果某种语言需要不同的文本怎么办？等等

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-09T13:54:19.193

我们也在处理大量动态生成的句子（3 种语言）。
我们总是试图使句子尽可能中性，以避免尽可能多的条件语句：

“您今天的帖子数：{0}”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-09T23:22:01.793

您绝对应该将单数和复数句子视为不同的字符串，并且不要从碎片中构建它们（我会投票给 Sachin 帖子，但我还没有“权力”:-)

haarrrgh 关于“您今天的帖子数：{0}”表格是正确的。虽然听起来太“像计算机”，但它是最具可扩展性的解决方案。

有些语言的复数规则非常复杂（阿拉伯语对 0、1、2、many 有不同的形式；俄语使用单数如果模 10 为 1（1、51、4231 都使用单数形式）；罗马尼亚语使用不同形式的复数如果模100 介于 20 和 99 之间）。有关更多示例（和确切规则），请参阅 CLDR 数据中的补充\plurals.xml 文件。[（来自ftp://ftp.unicode.org/Public/cldr/1.6.1/](ftp://ftp.unicode.org/Public/cldr/1.6.1/)的 core.zip 内部）

看看这里的其他注意事项：[http ://www.mihai-nita.net/article.php?artID=20060430a](http://www.mihai-nita.net/article.php?artID=20060430a)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-09T14:06:58.073

使用[StringTemplate](http://www.stringtemplate.org/)，因为它是处理这种情况的最佳方式。

这很容易，如下所示：

假设您有一个模板文件`sample.st`：

```
Dear $user$ you have exceeded the usage. Your current balance is $amount$ 
```

只需添加以下代码：

```
StringTemplateGroup group =  new StringTemplateGroup("myGroup", "C:\\Templates", DefaultTemplateLexer.class);
StringTemplate Message = group.getInstanceOf("sample");
Message.setAttribute("user", "Sam");
Message.setAttribute("amount", "100");
Message.toString(); 
```

编辑：您可以使用复数的功能，如下所示：

```
Dear $user$ you have  $posts$ post$plural$ 
```

* * *

```
StringTemplate Message = group.getInstanceOf("sample");
Message.setAttribute("user", "Sam");
Message.setAttribute("post", post);

Message.setAttribute("plural", Getplural(post));
Message.toString();

String getplural(int i)
{

If i >1
Return “s“;
} 
```

更多信息[在这里](http://www.antlr.org/wiki/display/ST/Five+minute+Introduction)。

# .net - 如何更改 MessageBox.Icon

> ID：528184
> 
> 赞同：3
> 
> 时间：2009-02-09T13:44:46.333
> 
> 标签：.net, messagebox

有谁知道如何更改 MessageBox 的图标？我想更改为我制作的一些图标。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-09T13:53:36.683

这是不可能的，`MessageBox`只支持几个基本图标。

您必须设计自己的`MessageBox`-esque 对话框。

# asp.net - 显示浮动窗口的最佳 ajax 控件是什么？

> ID：528186
> 
> 赞同：0
> 
> 时间：2009-02-09T13:45:02.510
> 
> 标签：asp.net, ajax, popup, ajaxcontroltoolkit, overlay

阿罗哈，

我正在寻找一种浮动 div 类型的控件，以使用 ASP.NET 和 Ajax 在 aspx 页面上显示另一个（用户）控件。据我所知，[Ajax Control Toolkit](http://www.asp.net/AJAX/AjaxControlToolkit/)没有很好的覆盖控件。谁能指出我的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-09T13:58:21.493

您可以使用 jQuery 使用 BlockUI：

[http://malsup.com/jquery/block/index-old.html#overview](http://malsup.com/jquery/block/index-old.html#overview)

它是一个“浮动”在 aspx 页面上的元素，这就是您要找的东西？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-09T14:19:01.007

如果您正在寻找模态对话，那么

在 AJAX 工具包中，有[ModalPopup](http://www.asp.net/ajax/ajaxcontroltoolkit/samples/modalpopup/modalpopup.aspx)

[Thickbox](http://jquery.com/demo/thickbox/)是一个 JQuery 模式。

# reporting - 报告服务客户端

> ID：528189
> 
> 赞同：1
> 
> 时间：2009-02-09T13:46:20.557
> 
> 标签：reporting, service, client-side

我需要使用多个子报表撰写报表，在运行时在 C# Forms 项目中“链接”在一起。

每个子报表都代表一个产品的子测试，并且数据需要特殊格式才能对报表用户有意义（特殊图表、带有/不带工程细节的合理列名等）

我想象每个子报表都有一个子报表字段，以便我在运行时可以插入下一个子报表。显然第一个（主）报告也有一个子报告，而最终的子报告没有（摘要子报告）

是否可以在运行时一起构建链子报表？

有人有样品吗？

亲切的问候杰斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-11-06T01:34:04.427

我想这可以通过 Reporting Services 产品实现，但我不知道该怎么做。根据我们作为 ActiveReports 团队一员的经验，我们发现子报表也不总是实现这一目标的最高效和内存效率最高的方式。

有关我们建议如何使用我们的 ActiveReports 产品执行此操作的信息，请参阅以下说明： [http ://www.datadynamics.com/Help/ActiveReports6/arHOWInsertOrAddPages.html](http://www.datadynamics.com/Help/ActiveReports6/arHOWInsertOrAddPages.html)

```
Scott Willeke
GrapeCity - Data Dynamics 
```

# delphi - Delphi 的 REGION 指令是否支持默认的“折叠”属性？

> ID：528201
> 
> 赞同：1
> 
> 时间：2009-02-09T13:49:25.133
> 
> 标签：delphi, region

我似乎找不到让 Delphi 默认折叠 {$REGION}...{$ENDREGION} 块的选项（我的意思是：直接在打开文件后）。真的有可能吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-09T14:00:56.497

恐怕不是。

至少，没有提到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-06T12:01:35.503

请注意，在 d2009 中，折叠区域将在您下次打开该项目时保持折叠状态。这可能与“保存项目桌面”选项相关联。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-09T19:35:09.673

我不使用 D2007/2009，但至少对于 Delphi 2006 及以下版本：不。

# javascript - javascript blur 事件——有没有办法检测现在哪个元素有焦点？

> ID：528208
> 
> 赞同：8
> 
> 时间：2009-02-09T13:52:53.067
> 
> 标签：javascript, javascript-events

有没有人有一种技术可以让我在模糊事件后确定哪个元素具有焦点？我有一个输入字段，我想在模糊时重置它，*除非*模糊是由用户单击“保存”按钮引起的。我很想在保存按钮的 onclick 函数中设置一个标志，但这会触发得太晚（除非点击事件总是在模糊事件之前触发，我对此表示怀疑。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-09T13:57:23.073

在这里回答；[**当 onblur 发生时，我怎样才能找出哪个元素焦点去*了*？**](https://stackoverflow.com/questions/121499/when-onblur-occurs-how-can-i-find-out-which-element-focus-went-to)

# data-binding - 如何在 XAML Setter Value 中格式化字符串？

> ID：528210
> 
> 赞同：2
> 
> 时间：2009-02-09T13:53:53.407
> 
> 标签：data-binding, xaml

我已经学会了如何在这样的标签的内容属性中格式化字符串：

```
<Label Content="{Binding ElementName=theSlider, Path=Value}" 
   ContentStringFormat="The font size is {0}."/> 
```

我想在 Setter 中做同样的事情，但“ValueStringFormat”不存在，什么是正确的语法来做我想要在这里完成的事情：

```
<DataTrigger Binding="{Binding Path=Kind}" Value="Task">
    <Setter TargetName="TheTitle" Property="Text" 
       Value="{Binding Title}" 
       ValueStringFormat="Your title was: {0}"/>
</DataTrigger> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-02-20T08:32:00.353

您可以简单地使用 Binding 本身的 StringFormat 属性吗？

```
<DataTrigger Binding="{Binding Path=Kind}" Value="Task">
    <Setter TargetName="TheTitle" Property="Text" 
        Value="{Binding Title,StringFormat='Your title was: {}{0}'}" 
        />
</DataTrigger> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-11T11:11:59.607

我无法对此进行测试，但希望它有效：

```
...
xmlns:local="clr-namespace:ValueConverter"
...

<Window.Resources>
   <local:MyTextConverter x:Key="MyTextConverter" />
</Window.Resources>

...
<DataTrigger Value="Task">
     <DataTrigger.Binding>
        <Binding Converter="{StaticResource MyTextConverter}"
            Path="Kind" />
     </DataTrigger.Binding>
     <Setter TargetName="TheTitle" Property="Text"/>
</DataTrigger> 
```

其中 MyTextConverter 是实现 IValueConverter 接口的类：

```
public class PositionConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, 
         CultureInfo culture)
    {
        return String.Format("Your title was: {0}", value);
    }

    public object ConvertBack(object value, Type targetType, object parameter,
        CultureInfo culture)
    {
        throw new Exception("The method or operation is not implemented.");
    } 
```

# asp.net - 本地化 ASP.NET 2.0 应用程序

> ID：528218
> 
> 赞同：2
> 
> 时间：2009-02-09T13:56:09.517
> 
> 标签：asp.net, localization, webforms

目前，我们所有的本地化文本都存储在资源文件中，然后使用 <% $Resouces:Something %> 进行引用。不幸的是，这种方法不能很好地扩展，遇到了很多差异问题并且文件变得相当大。有谁知道更好的本地化解决方案？还是我在 ASP.NET 中拥有的所有资源文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-09T14:24:55.533

您可以使用自定义资源提供程序将本地化数据存储在 resx 文件以外的其他文件中。这是 Rick Strahl 的一篇好文章，他在其中演示了如何在数据库中存储资源信息。

[创建数据驱动的 ASP.NET 本地化资源提供程序和编辑器](http://www.west-wind.com/presentations/wwDbResourceProvider/#To_Resx_or_not_to_Resx)

这是一篇关于创建您自己的自定义资源提供程序的 MSDN 文章，它还包括有关如何使用自定义资源提供程序访问数据库中的内容的部分。

[扩展 ASP.NET 2.0 资源提供者模型](http://msdn.microsoft.com/en-us/library/aa905797.aspx)

# project-management - 为什么今天很多软件项目都失败了？

> ID：528221
> 
> 赞同：23
> 
> 时间：2009-02-09T13:57:29.030
> 
> 标签：project-management, projects

只要有软件项目，世界就会想知道为什么它们经常失败。

我想知道是否有一个列表或类似的东西可以显示今天有多少软件项目失败了。如果能对过去 20 到 30 年进行比较就好了。

您还可以添加软件项目失败的主要原因。我的是“需求很差，甚至不存在”。其中还包括“不涉及（真实）客户/用户”。

**编辑：**几乎不可能清楚地定义“失败”一词。假设失败意味着：项目超出预算和时间超过 10%。在我看来，10% + / - 是一个很好的报价/投标范围。

**编辑：**直到现在（2 月 11 日），似乎大多数张贴者都同意项目的失败基本上是项目管理的失败（无论失败意味着什么）。但恕我直言，大多数开发人员对这种情况并不满意。也许是因为当项目不成功时受到惩罚的不是经理，而是懒惰、无能的开发团队？

当我阅读帖子时，我还可以听到开发人员和管理人员之间存在很大的“差距”。期望（也许也是要求）似乎如此不同，以至于项目最终无法成功（随着时间/预算；用户不满意；并非所有优先功能都已实现；由于开发人员被迫在太短的时间内实施...）

我在问自己：我们如何改进它？还是我们有可能改进它？每个人似乎都对现在的方式不满意。我们能缩小这两个世界之间的差距吗？我们（开发人员）是否应该罢工并为“高质量要求”和“基于现实/迭代的时间安排”而战？

**编辑：** Ralph Westphal 和 Stefan Lieser 建立了一个名为*Clean-Code-Developer*的新“社区” 。该小组的目标是为软件工程带来更多的专业性。独立地，如果开发人员拥有学位或多年的经验，您就可以成为这一运动的一部分。

> 清洁代码开发人员每天都遵循 SOLID 等原则。一个专业的开发者是他自己工作的最大审稿人。他有一个内部价值体系，可以帮助他提高和变得更好。

看看： [清洁代码开发人员](http://www.clean-code-developer.de/)

**编辑：**我们公司目前正在做一个叫做“应用程序开发和维护基准测试”的事情。这是 IBM 提供的一项服务，用于从外部人员那里获得关于您的软件工程过程质量等的反馈。当我们得到结果时，我会告诉您更多有关它的信息。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2009-02-09T14:55:45.473

管理不善。

项目的成功或失败不是基于项目的某些基本特征，而是取决于它们是否满足用户的需求。（它们可能完全失败，在这种情况下，可能会出现严重错误。）在评估项目的可行性和成本效益比以及建立目标的过程中，软件项目往往会失败或成功。

与事实和事物打交道的人（如程序员）和与其他人打交道的人（如销售人员和经理）之间存在脱节。对于程序员来说，事实就是事实，必须处理。对销售人员来说，事实就是别人的想法，而且是可变的。

有形和无形的事实之间也存在差异。没有人认为工人真的有动力可以在一个月内建造一座大桥。他们可以看到所有需要移动和固定到位的钢材、混凝土和其他材料。软件的有形性要少得多，并且缺乏物理限制：虽然理论上甚至不可能在一个月内建立桥​​梁，但可以想象一个团队可以在一个月内创建一个大型项目，因为他们必须做的“全部”是第一次把一切都做好。一天输入数千行代码在物理上是可能的；只是它们按原样可用的机会如此接近于零，这并不重要。顶级开发人员的实际生产力在字数方面实际上并不令人印象深刻，

因此，那些习惯于灵活事实的人没有强加的物理限制来提醒他们事情只能推到这么远，没有了解编程实际需要什么，也没有对实际可能的生产力有多少感觉。此外，他们比普通开发人员更了解如何在谈判中取得成功，因此在关于可能发生的谈判中，他们倾向于假设比他们在现实世界中所能得到的更多。

同时，软件开发本质上是模糊的，因为生产物理产品是微不足道的。一旦软件开发完成，我可以快速、廉价地制作软件副本。软件开发是设计工作，纯粹而简单。任何与制造相关的东西都被编译器和向导以及代码生成等东西无情地消除了。开发人员，面对想要不可能的经理，发现很难说不可能实际上是不可能的，因为没有办法说它实际上是不可能的。鉴于未知的事实足以让人感到灵活，具有强大谈判技巧和决心的人通常会得到他或她想要的答案。

鉴于这种脱节，人们可能会问是谁负责弥合这种脱节。在我看来，答案是明确的。了解不同人的想法的责任属于专门与他人打交道的人。协调不同类型的人的责任属于协调这些事情的人。因此，管理者。

真正了解软件开发和开发人员并能与其他经理打交道的经理会做得很好，他们的项目通常会成功。世界上其他类型的人仍然太多。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2009-02-09T14:05:26.343

不是一个直接的答案，但我发现[虚拟案例文件](http://www.spectrum.ieee.org/sep05/1455)是一个有趣的案例研究，它说明了一个大型政府支持的资金充足的项目如何仍然失败。

> 您还可以添加软件项目失败的主要原因。

另一篇[IEEE Spectrum Online](http://www.spectrum.ieee.org/)文章“[为什么软件失败](http://www.spectrum.ieee.org/sep05/1685)”研究了这个问题。主要总结如下：

*   不切实际或不明确的项目目标
*   对所需资源的估计不准确
*   定义不明确的系统要求
*   项目状态报告不佳
*   未管理的风险
*   客户、开发人员和用户之间的沟通不畅
*   使用不成熟的技术
*   无法处理项目的复杂性
*   马虎的开发实践
*   项目管理不善
*   利益相关者政治
*   商业压力

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2009-02-09T14:20:18.680

**计划不周。**

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2009-02-09T14:26:01.817

[霍夫斯塔德定律](http://en.wikipedia.org/wiki/Hofstadter%27s_law)

> 即使考虑到霍夫施塔特定律，它也总是比您预期的要长。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2009-02-09T14:12:37.187

老实说，我认为这是因为大多数程序员并不擅长他们所做的事情（而且我并不是说只是编写代码）。stackoverflow 上的人可能是个例外。我不知道你们其他人的情况，但作为一名顾问/合同程序员，我曾在很多地方或附近工作过，平庸或差劲的程序员与优秀程序员的比例约为 10 比 1。

我的优势之一一直是准确地估算，然后按时按预算或按预算交付——我的目标是在成本和按时减少 10%。然后我想告诉我的客户，因为我完成的事情比预期的要少，你想添加哪些“额外”？

即使是延迟和/或超出预算的完美功能产品也会被许多业务经理视为失败。程序员通常只关注他们所做工作的技术方面，而很少考虑成本或截止日期。你真的需要把这三件事都做好才能被认为是成功的项目。毫无疑问，还有许多其他程序员可以在我周围编写代码，但对于为项目付费的人来说，这还不够。

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2009-02-09T14:34:28.397

管理不善。

SW 项目通过让开发人员解决一个感知到的问题开始。业务需求随着项目的进展而具体化。在截止日期不变的情况下添加了新功能。更多的开发人员被投入其中。原始项目成员退出或被解雇。到目前为止，该项目投入了太多时间、金钱和资源，因此无法取消。随着最后期限的过去，尽管明显缺乏成品，但该项目被宣布完成并成功。

想一想 - 我已经看到一个 SW 项目失败了......

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2009-02-10T12:29:45.530

这是因为似乎没有人再读书了。项目失败的每一个原因都经过了一次又一次的分析。你只需要读三本书就知道为什么 80% 的项目会失败：

截止日期：关于项目管理的小说（Tom Demarco，1997 年出版）这是一个很棒的介绍，而且非常有趣。Peopleware : Productive Projects and Teams (Tom Demarco, 1987 年出版) The Mythical Man-Month: Essays on Software Engineering (Fred Brooks, 1975 年出版)

作为一个行业，我们似乎每 3 到 5 年就会忘记所有事情（参见“集中计算效率低下；让客户处理它”与云计算）。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2009-02-09T16:31:46.273

第一个原因：**项目管理失败**。

PM 存在的理由是让项目成功，因此项目失败就是他们的失败。当然有一些他们无法控制的因素，但管理该风险仍然在 PM 的工作描述范围内，唯一的退出条款应该是食物链更高层的人进行决策控制（这对 PM 来说是一件可怕的事情）或上帝的作为。

以我的经验，失败主要发生在 PM 工作快速松散或不存在的情况下，包括当决策开始从销售人员手中流出以及当客户开始下令更改控制时。一个好的 PM 是*无价*的。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2009-02-09T14:33:43.763

（从程序员的角度来看——我不是项目经理，但我经常参与这个过程）。

许多人提到糟糕的程序员很普遍。但我认为这在另一种意义上也是正确的——我们都是糟糕的程序员，因为我们发现很难预测复杂性，这是一个不可避免的问题，50 年的灵丹妙药估计和规划方案未能解决。

随着项目的增长，预测大型项目的副作用变得更加困难。当然，这是一个乏味的老生常谈，但对我来说，这意味着在我参与过的任何项目中，我参与了估算过程，我遇到了一些设计决策产生意想不到的后果的情况导致一切停止，或至少几天的错误修复 - 只是没有人预见到的事情，而不是任何形式的渎职或愚蠢。这只是一个足够复杂的系统的本质。

除了内在的不确定性之外，还有一种趋势是低估轮廓已知的事物，因为它们具有较少的不确定性这一事实使它们看起来更易于实现。

所以不确定的东西被放大了，清晰的东西被最小化了，真正要你命的是那些你认为不会是不确定的东西。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2009-02-11T03:15:30.050

失败是一种判断——更多的是一种指责，真的。

“该项目超出预算和时间超过 10%。”

哪个预算？哪个时间表？

6个月前，我写了一个计划，说需要6个月。

3 个月前，用户要求更多的东西。我给了他们一个计划，说还需要 9 个月。

上个月我被告知该项目超出预算 6 个月，因此“失败”。

可是等等。它提供了用户想要的东西。它超过了“原始”估计。这是在修订后的估计之下。用户想要更多。IT 想要的更少。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2009-02-11T13:33:56.897

我将从与这里的大多数其他方面不同的方面来处理它。

我注意到一个项目在一段时间内慢慢失败。当然，它在那个时候也变得更好了——但它仍然没有盈利。在这个市场中，盈利和盈利意味着成功。

为什么会失败？我认为这很简单：*你得到你所支付的。*

软件就像一个银行账户，而不是原始的软泥。如果你不投入资源（时间、金钱、专注、努力），那么除了失败和成本之外，你将一无所获。所以你必须在你的项目中投入一些东西，有时最早的工作为未来几年奠定了基础。你不能在你的电脑上扔泥巴，并期望在两年内获得新鼠标并在 1000 万美元之后获得新鼠标，因此同样必须付出努力。

今天最大的问题之一是第三世界国家的“预算开发商”。我并不嫉妒他们在市场上的份额，但对于一家资金雄厚的硅谷初创公司来说，寻找他们并获得预算基础（框架甚至原型）是对未来的糟糕投资。这个相同的预算框架是今天给我的朋友们带来如此多麻烦的原因。现在可以了；它在写的时候就可以工作，但是写得不好，甚至很少有人花时间去维护它。如果公司停止并*按照最初应该编写的方式重写软件，*他们就不会遇到所有这些麻烦。他们能负担得起时间吗？没有。他们必须先让它盈利，然后才能考虑到它。

俗话说，“我能做到：便宜、快或好。现在，选择其中任何两个。” 每个人都想要这三个，包括我自己。但是，如果您没有投入时间、计划和**工作**以使您的项目从一开始就取得成功……那么就不要指望以后有什么可以引以为豪的事情。感觉就像是伪造的蒙娜丽莎，您和其他所有像您一样的工程师都可以在这里和那里看到从一开始就不应该存在的缺陷。

所以：

*   不要承担你负担不起的事情：时间、金钱、努力、专注等。
*   不要跳过计划！
*   不要害怕在最重要的时候*尽早重写。*（相信我，以后会比去看牙医更糟糕。）
*   不要低估官僚主义阻止你做正确的事情的力量。
*   并且不要在你应该花大部分时间的地方便宜。 *以后会花你的钱，保证。* 如果不是你，那么别人会替你挡子弹。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2009-02-09T14:28:31.797

一个常见的错误是销售人员和技术人员没有充分沟通。所以销售人员销售的东西在技术上在预算范围内是不可行的。（然后他们带着奖金跑了:)）

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2009-10-21T18:23:13.050

超出预算和时间并不能很好地定义失败（实际上超出预算和时间并不总是意味着成功）。以 PMP 的 Hugh Woodward 在[专家项目管理 - 项目成功：超越传统项目度量标准](http://www.maxwideman.com/guests/metrics/failures.htm)中提供的以下示例为例：

> *   **悉尼歌剧院**：悉尼歌剧院以其优雅的风帆统治着悉尼港，可以说是世界上最知名的建筑之一。然而，从项目管理的角度来看，这是一个巨大的失败。1959 年开工建设时，估计耗资 700 万美元，建造时间为 4 年。它最终于 1973 年以超过 1 亿美元的价格完成。
>     
>     
>     
>     [...]
>     
>     
> *   **猎户座计划**：从项目管理的角度来看，为开发柯达新的 Advantix 摄影系统所做的巨大努力据说得到了很好的管理。PMI 将其评为 1997 年年度国际项目，《商业周刊》将该系统选为 1996 年最佳新产品之一（Adams，1998）。但自推出 Advantix 系统以来，柯达的股价已下跌 67%，部分原因是它未能预见到加速转向数码摄影。
>     
>     
> *   **企业内联网**: Finch 描述了一个项目，该项目涉及实施企业内部网以实现全球化和改进通信。从传统项目的角度来看，它未能达到其成功标准，但并不显着。它迟到了一个月，据信是在小额预算超支的情况下完成的。但项目经理和高级管理层都认为该项目是成功的。硬件和软件已成功安装，中断最少，因此所有员工都可以访问公司内部网。然而，在实施之后，员工仅有限地使用了内部网设施。因此，该项目的主要目标没有实现。在这种情况下，项目经理和高级管理人员都专注于一个过于狭窄的目标。
>     
>     
>     
>     [...]
>     
>     
> *   **制造工厂优化**：一家在北美拥有五家工厂的造纸公司决定通过实施消除瓶颈计划来提高其制造能力。成立了一个项目团队来安装必要的设备，并负责在 18 个月内完成这项工作，耗资 2600 万美元。但几乎立即，项目团队被要求推迟主要支出，直到一个不相关的现金流问题得到解决。该团队并没有完全停止工作，而是采取了一种策略，对去瓶颈计划所基于的技术进行原型设计，并实际上开发了一些更便宜、更有效的解决方案。即使该项目被授权继续进行，该团队仍继续采用相同的方法。该项目最终跨越了五年，但由此产生的产能增加是最初承诺的三倍。
>     
>     
>     
>     [...]
>     
>     
> 
> 那么在这些例子中，哪些是真正成功的？2002 年冬奥会和 Batu Hijau 铜矿选矿厂等例子表明，这些都是真正的成功，因为它们不仅符合传统项目经理对成功的定义，而且符合项目发起人对成功的看法。
> 
> 当我们开始研究猎户座项目、企业内部网和笔记本电脑升级等示例时，我们注意到传统指标开始失效。这些项目在项目经理对成功的定义中被认为是成功的，但未能满足发起人的成功标准。Orion 项目的例子非常令人震惊，因为该项目在 1997 年被 PMI（国际项目管理）认定为年度国际项目。然而这并没有增加柯达的收入，因为他们没有预见到数码相机的采用。
> 
> 最有趣的是制造工厂优化和悉尼歌剧院的例子。他们都未能达到传统项目经理的成功指标，但实际上都被认为是成功的。当您看到悉尼歌剧院“成本超支 1300%”和“进度超支 250%”时，这尤其令人震惊。
> 
> 一旦我们意识到项目可能无法满足传统的成功指标，但对利益相关者来说仍然是成功的，这会给项目经理带来困境。如何真正定义成功？是否有可能取消满足发起人需求的“挑战”项目？是否还可以确定一个当前按时、在预算范围内并满足既定需求的应该取消的项目？

你怎么看这个结论？你如何真正定义成功？

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2009-10-21T18:44:38.983

我的回答与其余部分相比相当不寻常，但在这里很常见：杀手虫。我有一个项目额外进行了两周（50％的额外时间），因为在我挖掘源代码之前我不知道源代码的一次切换（帮助或网络上没有任何文档记录）。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2009-02-11T20:54:12.857

上面的 Construx 链接非常好！

许多项目都是在现实的美好画面上进行管理的。经理们倾向于说服开发人员做出乐观的估计。但是假设一个 20 周的项目被“讨论”到 10 周。需求阶段现在将是 1 周而不是 2 周。1 周后，需求尚未完成，但项目继续进行。现在你在摇摇欲坠的土地上工作——而且时间很长！

这可能很有趣。曾经有一个老家伙在我对面的房间里。他的职位是系统管理员。但是他应该管理的系统并不存在。它从未完成，尽管管理层认为已经完成。这家伙玩了大约一年的游戏，然后才感到无聊并继续前进。

最有趣的部分？管理层在他离开后提出了一个新的职位空缺！

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2009-02-11T18:06:21.563

对此进行了一些很好的研究。我推荐来自 Construx 网站（Steve McConnells 公司）的[这个链接。](http://forums.construx.com/tags/classic+mistakes/default.aspx)

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2009-02-09T16:20:41.793

实践和软件开发方法使用不当。以我的经验，项目失败的一大原因是开发团队使用错误的方法来面对软件开发过程。在没有很好地理解它的工作原理和需要什么的情况下选择一种方法，可能会给项目带来耗时的问题，比如计划不周。

还有一个常见问题是使用技术而没有事先对其进行评估，以了解如何应用它，以及它是否为项目带来任何价值。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2009-02-09T14:15:17.773

人们/公司不会自豪地大喊他们的失败，所以很多案例都不会被听到。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2009-10-06T21:01:48.617

[IT Project Failures](http://blogs.zdnet.com/projectfailures/)是一个关于项目失败的博客，如果你想阅读它，这里可能会有一些答案。

我自己，我认为这个问题的很大一部分在于能够准确地说明 x 个月内 $y 的预期，而实际上答案更加开放。例如，如果一家公司正在更换 ERP 或 CRM 系统，那么很有可能无法完全正确地满足所有要求，因此会出现一些变化、错误修复和额外的内容。一个大项目。打个比方，考虑一下有多少进入高中或大学的学生可以在不参加任何课程的情况下说出他们所有 4 年的准确时间表，并最终坚持下去。我的猜测是很少有人会这样做，因为有些人会改变他们想要学习的专业或课程'

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2009-02-11T21:33:02.077

**不同的议程**

管理层并不真正了解开发人员做什么、他们如何生成代码以及遇到的困难。他们只关心按时交付的最终产品。但是对于开发人员来说，他们关心技术方面，在他们引以为豪的解决方案中生成良好的代码。

**截止日期**

我经常听到开发人员说他们希望他们能写出更好的代码，而最后期限往往会促使他们写出能正常工作的东西，而不是好的代码。当这些最后期限不切实际时，问题就会加剧。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2009-02-11T09:33:25.240

如前所述，绝大多数参与软件开发的人实际上并不了解如何

*   提出正确的问题以了解问题
*   欣赏用户的目标并判断期望
*   了解可用的技术和相关的生态结构
*   大多数直接/间接参与的团队技能都很差。
*   不欣赏或不知道他们什么时候错了，他们可以采取行动。

即使有完美的需求和相关定义，也有太多的开发人员不知道他们在做什么。

只需查看此处提出的问题类型即可。你会去看问同样问题的医生吗？可怕的是他们会问，却不知道如何学习或推理。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2009-02-09T14:16:24.023

不仅软件项目超出预算，或者花费超过预定时间来完成。只需打开报纸，看看像桥梁这样的公共项目。

但是对于一个软件项目来说，取消一切要容易得多。如果一座桥梁或建筑物完成了一半，就没有回头路了。一半的基础设施已经到位。它非常明显，需要花钱才能将其移除。

对于软件项目，您可以按 Shift-Delete 并且没有人注意到。

进行准确的成本分析是一项非常艰巨的工作。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2009-02-09T14:32:24.593

使用 FBI 的虚拟案件文件系统归结为糟糕的项目管理。该计划有 9/11 之前的要求和 9/11 之后的期望。如果政府管理层完成了他们的工作，就会有合同模式。

[http://government.zdnet.com/?p=2518](http://government.zdnet.com/?p=2518)

“由于一项没有保障措施的开放式合同，随着项目变得更大、更复杂，上汽收获了超过 1 亿美元，尽管其软件从未正常运行。该公司继续满足该局的要求，尽管有明显迹象表明，该公司仍接受付款据参与该项目或后来为政府审查该项目的人士称，联邦调查局对该项目的处理方式存在严重缺陷。”

尽管 700,000 行代码的 105,000,000 美元相当于每行代码 150 美元。还不错。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2009-02-09T14:00:42.613

我听到的最后一个统计数据是，90% 的项目要么超时，要么超出预算。因此，如果您认为失败，请退出。

它失败的原因主要在于过程。我们作为软件工程师没有做好收集需求和控制客户的工作。因为对于 IT 以外的人来说，构建软件是一项“神秘”的工作，他们很难理解为什么最后一刻的改变是困难的。这不像盖房子并清楚地向他们展示为什么不能快速在砖房子的背面添加另一扇门。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2009-02-11T03:53:51.237

要真正衡量一个项目是否真的成功，最初的估计/预算可能是一个糟糕的衡量标准。由于政治压力，大多数工程师往往会低估需要多少时间，而且他们也不知道如何估计。许多经理是糟糕的计划者，因为他们想要不切实际的最后期限来取悦他们的老板，他们通常不了解所涉及的内容，而且他们可以在会议中查看、理解和使用这些东西，而不是实际帮助解决问题。实际上，它可以帮助企业出于预算目的对费用进行粗略的预测，至少它可以为他们提供一些参考。

衡量项目成功的更好方法是——用户满意吗？对企业赚钱有帮助吗？获得的资金能以多快的速度帮助收回系统成本？不过，这些比简单的计划更难衡量。

最后，我发现你最好在截止日期前交付，即使这意味着加班。这很糟糕，但这就是它的现实。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2010-04-27T11:01:07.640

我认为这个线程成功地聚集了最大的一群不快乐的软件开发人员、工程师、项目经理等，有可能聚集在一个地方。

我与卡在这里的大多数帖子分享观点，我认为当工作（编程）和成功是我们生活中最重要的部分时，看到同事没有做好工作，他们经历了很多痛苦。

[http://www.clean-code-developer.de/](http://www.clean-code-developer.de/) 他们有一个不可思议的事业！他们的理念，如果被采用，可以设法创造一个新的英雄层，因为现在开发人员和 IT 专业人士的主流已经很烂了。

我正在巴西做类似的事情，因为我喜欢我们作为 PM 和软件开发人员 (.NET) 让软件活起来的职业，我不能忍受那些面对编程的人，他们只是想出路几乎不费吹灰之力就能*赚大钱*。

...当然，我不考虑在电脑前通宵达旦。但是少数重要的人不止一次这样做了。

# qt - 如何在 Windows Qt 中使用 linux 字体？

> ID：528224
> 
> 赞同：2
> 
> 时间：2009-02-09T13:58:22.680
> 
> 标签：qt, fonts

我们在 MS Windows 上为 linux 开发嵌入式 Qt 应用程序。目标平台是没有 X-windows (framebuffer) 的 linux。不幸的是，windows 上的屏幕看起来与 linux 上的相同屏幕完全不同（更好），因为 windows 有更好的字体。有没有办法强制 Windows 上的 Qt 使用 linux 字体？我想实现二进制兼容性，即截图的CRC在linux和windows中是相同的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-02-09T15:55:01.400

您可以使用[QFontDatabase](https://doc.qt.io/qt-5/qfontdatabase.html) :: [addApplicationFont](https://doc.qt.io/qt-5/qfontdatabase.html#addApplicationFont)从文件或内存（[QByteArray](https://doc.qt.io/qt-5/qbytearray.html)）加载字体。返回的 id 可用于检索字体系列列表（请参阅 QFontDatabase:: [applicationFontFamilies](https://doc.qt.io/qt-5/qfontdatabase.html#applicationFontFamilies)），该列表可传递给 QFontDatabase:: [font](https://doc.qt.io/qt-5/qfontdatabase.html#font)以创建用于您的应用程序的[QFont对象。](https://doc.qt.io/qt-5/qfont.html)

仅支持[TrueType](https://en.wikipedia.org/wiki/True_Type_Font)字体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-10T20:51:13.983

我怀疑这将很难做到。Windows 正在使用它自己的字体渲染器来绘制字体，因此无论您做什么，提示等都会关闭。您可以使用相同的字体，但它们看起来仍然不同。微妙的不同，可能，但仍然不同。

您可以通过使用位图字体来避免这种情况。不过，我不确定。

# oop - 过程编程比 OOP 有什么优势吗？

> ID：528234
> 
> 赞同：41
> 
> 时间：2009-02-09T14:02:06.803
> 
> 标签：oop, object, scope, procedural-programming

[编辑：] 早些时候，我问这个问题可能是一个框架不佳的问题，关于何时使用 OOP 与何时使用过程编程——一些回答暗示我在寻求帮助理解 OOP。相反，我经常使用 OOP，但想知道何时使用过程方法。从回复来看，我认为有一个相当强烈的共识，即 OOP 通常是一种更好的全方位方法，但如果 OOP 架构从长远来看不会提供任何重用优势，则应该使用过程语言。

然而，我作为 Java 程序员的经验却并非如此。我看到了一个庞大的 Java 程序，由 Perl 大师用我编写的代码的 1/10 重写，并且看起来和我的 OOP 完美模型一样健壮。我的架构看到了大量的重用，但更简洁的程序方法产生了一个更好的解决方案。

因此，冒着重复自己的风险，我想知道在什么情况下我应该选择程序而不是面向对象的方法。您将如何提前识别 OOP 架构可能过度使用的情况以及更简洁和高效的过程方法。

任何人都可以提出这些场景的例子吗？

**有什么好方法可以提前确定一个项目可以更好地通过程序编程方法来服务？**

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2009-02-09T14:14:15.747

在重用方面，我喜欢[Glass](https://rads.stackoverflow.com/amzn/click/com/0321117425)的 3 规则（这似乎是您感兴趣的内容）。

> 1) 构建可重用组件的难度是单次使用组件的 3 倍
> 2) 一个可重用组件应该在三个不同的应用程序中进行试验，然后才能足够通用以接受重用库

由此我认为你可以推断出这些推论

> a) 如果您没有预算 3 倍于构建一次性组件所需的时间，也许您应该推迟重用。（假设难度 = 时间）
> b) 如果您没有 3 个地方可以使用您正在构建的组件，那么您可能应该推迟构建可重用组件。

我仍然认为 OOP 对于构建一次性组件很有用，因为您始终可以将其重构为以后真正可重用的东西。（您也可以从 PP 重构为 OOP，但我认为 OOP 在组织和封装方面有足够的好处，可以从那里开始）

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2009-02-09T14:12:19.620

可重用性（或缺乏可重用性）不受任何特定编程范式的约束。根据需要使用面向对象、过程、函数或任何其他编程。组织和可重用性来自你所做的，而不是来自工具。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2009-02-09T14:10:57.003

您自己给出了答案 - 大型项目只需要 OOP 来防止变得过于混乱。

在我看来，OOP 的最大优势是代码组织。这包括 DRY 和封装的原则。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2010-08-19T14:58:13.890

正如我们在这些评论中看到的那样，那些虔诚地支持 OOP 的人没有任何事实来证明他们的支持是正当的。他们在大学接受培训（或洗脑），只使用和赞美 OOP 和 OOP，这就是他们如此盲目地支持它的原因。他们在 PP 中做过任何真正的工作吗？除了在团队环境中保护代码免受粗心程序员的侵害之外，OOP 并没有提供太多帮助。个人在 PP 和 OOP 工作多年，我发现 PP 简单、直接且更高效，我同意以下明智的男人和女人：

（参考：[http](http://en.wikipedia.org/wiki/Object-oriented_programming) ://en.wikipedia.org/wiki/Object-oriented_programming ）：

许多著名的研究人员和程序员都批评了OOP。这是一个不完整的列表：

*   Luca Cardelli 写了一篇题为“<a href="http://lucacardelli.name/Papers/BadPropertiesOfOO.html" rel="noreferrer">Bad Engineering Properties of Object-Oriented Languages”的论文。

*   Richard Stallman 在 1995 年写道：“在 Emacs 中添加 OOP 显然不是一种改进；我在开发 Lisp Machine 窗口系统时使用了 OOP，但我不同意通常认为它是一种更好的编程方式的观点。”</p>

*   Potok 等人的一项研究。OOP 和程序方法之间的生产力没有显着差异。

*   Christopher J. Date 表示，将 OOP 与其他技术（尤其是关系技术）进行批判性比较是很困难的，因为缺乏对 OOP 的一致和严格的定义。提出了OOP的理论基础，将OOP作为一种可定制的类型系统来支持RDBMS。

*   Alexander Stepanov 建议 OOP 提供了一个数学上受限的观点，并称其“几乎与人工智能一样是骗局”（可能指的是 1980 年代的人工智能项目和营销，有时回想起来被认为过于狂热）。

*   Paul Graham 建议 OOP 的目的是充当“羊群机制”，防止平庸组织中的平庸程序员“造成太大的损害”。这是以减慢知道如何使用更强大和更紧凑技术的高效程序员为代价的。

*   引用 Erlang 的主要发明者乔·阿姆斯特朗 (Joe Armstrong) 的话说：“面向对象语言的问题在于它们拥有所有这些隐含的环境，它们随身携带。你想要一根香蕉，但你得到的是一只拿着香蕉和整个丛林的大猩猩。”</p>

*   Richard Mansfield，COMPUTE 的作者和前编辑！杂志指出，“就像多年来无数其他的知识潮流（“相关性”、共产主义、“现代主义”等等——历史上到处都是），OOP 将与我们同在，直到最终成为现实。但考虑到 OOP 目前在大学和工作场所中的普及情况，OOP 很可能被证明是一种持久的错觉。整整一代被灌输思想的程序员继续走出学院，在他们的余生中致力于面向对象编程，除了面向对象编程之外别无他法。” 并且还引用了一句话“OOP是编写程序，通过机场安检是飞行”。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2009-02-09T22:31:35.690

对于任何给定的问题，我建议使用最简洁、基于标准的方法。您使用 Perl 的同事证明，一个熟悉特定工具的优秀开发人员无论采用何种方法都可以获得出色的结果。与其将您的 Java 与 Perl 项目作为程序与 OOP 辩论的一个很好的例子进行比较，我更希望看到 Perl 与类似简洁的语言（如 Ruby）之间的对峙，碰巧也有好处面向对象的。现在这是我想看到的。我的猜测是 Ruby 会名列前茅，但我对在这里挑起语言火焰大战不感兴趣——我的观点只是你为这项工作选择了合适的工具——无论哪种方法都能以最有效和最健壮的方式完成任务可能的方式。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2009-02-09T14:48:13.543

我认为 DRY 原则（不要重复自己）结合一点敏捷是一种很好的方法。从最简单的工作开始逐步构建您的程序，然后逐个添加功能，并根据需要重构您的代码。

如果您发现自己一遍又一遍地编写相同的几行代码——可能使用不同的数据——是时候考虑抽象，以帮助将变化的内容与保持不变的内容区分开来。

为每次迭代创建彻底的单元测试，以便您可以放心地进行重构。

花太多时间试图预测代码的哪些部分需要可重用是错误的。一旦系统开始扩大规模，这一点很快就会变得明显。

对于具有多个并发开发团队的大型项目，您需要有某种架构计划来指导开发，但是如果您是自己工作或在小型合作团队中工作，那么如果您坚持 DRY 原则，架构就会自然而然地出现。

这种方法的另一个优点是，无论你做什么都是基于现实世界的经验。我最喜欢的类比——你必须先玩积木，然后才能想象建筑物是如何建造的。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2010-08-02T08:10:46.710

我认为当你有一个**非常明确的问题**时，你应该使用程序风格，规范**不会改变**，你想要一个运行**速度非常快**的程序。在这种情况下，您可以用可维护性换取性能。

*当您编写游戏引擎*或*科学模拟程序*时，通常会出现这种情况。如果您的程序每秒计算的次数超过百万次，则应将其优化到边缘。

您可以使用非常有效的算法，但在优化缓存使用之前它不会足够快。缓存数据可以大大提高性能。这意味着 CPU 不需要从 RAM 中获取字节，它知道它们。为了实现这一点，您应该尝试将数据彼此靠近存储，您的可执行文件和数据大小应该最小，并尝试使用尽可能少的指针（在您负担得起的情况下使用静态全局固定大小的数组）。

如果您使用指针，您会不断地在内存中跳转，并且您的 CPU 每次都需要重新加载缓存。OOP 代码中充满了指针：每个对象都由其内存地址存储。你打电话`new`到处都是将对象分布在整个内存中，使得缓存优化几乎不可能（除非您有一个分配器或垃圾收集器使事物彼此靠近）。你调用回调和虚函数。编译器通常不能内联虚函数并且虚函数调用比较慢（跳转到VMT，获取虚函数的地址，调用它[这涉及到将参数和局部变量压入堆栈，执行函数）然后弹出所有内容]）。当你有一个循环从 0 到 1000000 每秒运行 25 次时，这很重要。通过使用程序风格，没有虚函数，优化器可以内联那些热循环中的所有内容。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2009-02-09T18:16:38.097

如果项目太小以至于它包含在一个类中并且不会使用很长时间，我会考虑使用函数。或者，如果您使用的语言不支持 OO（例如 c）。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2010-08-19T15:06:34.363

> “面向对象语言的问题在于，他们拥有随身携带的所有这些隐含环境。你想要一根香蕉，但你得到的是一只拿着香蕉和整个丛林的大猩猩。” ——乔·阿姆斯特朗

你想要丛林吗？

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2009-02-09T15:32:44.793

我认为 OOP 的适用性更多地取决于您所从事的主题领域，而不是项目的规模。在某些主题领域（CAD、仿真建模等），OOP 自然地映射到所涉及的概念。然而，还有很多其他领域的映射最终变得笨拙和不协调。许多人在所有事情上都使用 OOP 似乎花了很多时间试图将方形钉子敲入圆孔中。

OOP 有它的位置，但过程式编程、函数式编程等也有它的位置。看看你要解决的问题，然后选择一种编程范式，它允许你编写最简单的程序来解决它。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2009-02-09T22:39:33.487

对于某种类型的程序，程序程序可以更简单。通常，这些是类似脚本的短程序。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2009-02-09T14:03:53.027

这两个概念不是互斥的，你很可能会结合使用 PP 和 OOP，我看不出如何隔离它们。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2009-06-10T15:28:09.743

考虑这种情况：您的代码不是面向对象的。您在整个程序中都有数据结构和许多对数据结构进行操作的函数。每个函数都将数据结构作为参数，并根据数据结构中的“data_type”字段执行不同的操作。

如果一切正常并且不会改变，谁在乎它是否是 OO？它正在工作。完成。如果你能在程序上更快地写作，那么也许这就是要走的路。

但是你确定它不会改变吗？假设您可能会添加新类型的数据结构。每次添加希望这些函数对其进行操作的新数据结构类型时，您必须确保找到并修改其中的每一个函数以添加新的“else if”案例来检查并添加您想要的行为影响新型数据结构。随着程序变得更大和更复杂，这种痛苦也会增加。这越有可能，使用 OO 方法的效果就越好。

而且 - 你确定它没有错误吗？更多涉及的切换逻辑会增加测试每个代码单元的复杂性。通过多态方法调用，语言为您处理切换逻辑，并且每个方法都可以更简单、更直接地进行测试。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2009-02-09T14:20:31.317

我相信 Grady Booch 曾经说过，你真的开始从 10000 多行代码的 OOP 中受益匪浅。

但是，我总是采用 OO 方式。即使是200行。从长远来看，这是一种优越的方法，而开销只是一个被高估的借口。所有的大事都是从小事开始的。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2009-02-09T14:36:02.527

OOP 的目标之一是使可重用性更容易，但这不是唯一的目的。学习有效使用对象的关键是设计模式。

我们都习惯了算法的概念，它告诉我们如何组合不同的过程和数据结构来执行常见的任务。相反，请查看四人组的设计模式，了解如何组合对象以执行常见任务。

在我了解设计模式之前，我几乎不知道如何有效地使用对象而不是作为超类型结构。

请记住，实现接口与继承一样重要，甚至更重要。过去，C++ 是面向对象编程的主要示例，与继承（虚拟函数等）相比，使用接口是模糊的。C++ Legacy 意味着在各种教程和广泛的概述中更加强调重用行为。从那时起，Java、C# 和其他语言已经将界面移到了更多的关注点。

接口最擅长的是精确定义两个对象如何交互。这与重用行为无关。事实证明，我们的大部分软件都是关于不同部分如何交互的。因此，与尝试制作可重用组件相比，使用界面可以带来更多的生产力提升。

请记住，像许多其他编程思想一样，对象是一种工具。您将不得不使用您的最佳判断来判断它们对您的项目的效果如何。对于我的金属切割机 CAD/CAM 软件，有一些重要的数学函数没有放在对象中，因为它们没有理由放在对象中。相反，它们从库中公开并由需要它们的对象使用。然后有一些数学函数被做成面向对象的，因为它们的结构自然会导致这种设置。（获取点列表并将其转换为几种不同类型的切割路径）。再次使用您的最佳判断。

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2009-02-09T15:13:29.380

您的部分答案取决于您使用的语言。我知道在 Python 中，将过程代码移动到一个类或更正式的对象中非常简单。

我的启发式方法之一是基于情况的“状态”。如果该过程污染了命名空间，或者可能影响全局状态（以一种不好的或不可预测的方式），那么将该函数封装在一个对象或类中可能是明智的。

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2017-10-12T18:04:01.183

我的两分钱...

**过程式编程的优点**

*   简单的设计（快速的概念验证，与剧烈的动态需求作斗争）
*   简单的项目间沟通
*   当时间顺序很重要时很自然
*   运行时开销更少

Procedural 代码越完善，就越接近 Functional。FP的优点是众所周知的。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2009-02-09T14:36:39.873

我总是以自上而下的方式开始设计，而在顶部，用 OOP 术语来思考要容易得多。但是，当需要编写一些小的特定部分时，仅使用过程编程就可以提高效率。OOP 在设计和塑造项目方面很酷，因此可以应用分而治之的范式。但是您不能将它应用到代码的各个方面，因为它是一种宗教 :)

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2009-02-09T18:22:52.840

如果您在编程时“思考 OO”，那么我不确定问“我什么时候应该恢复到过程编程？”是否有意义。这相当于问java程序员他们不能做的事情，因为java需要类。（同上 .NET 语言）。

如果您必须努力克服程序上的思考，那么我建议您询问如何克服这一点（如果您愿意的话）；否则留在程序上。如果进入 OOP 模式需要付出很大的努力，那么您的 OOP 代码可能无论如何都不会很好地工作（直到您沿着学习曲线走得更远。）

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2009-02-09T15:23:33.927

恕我直言，OOP 的长期好处超过了短期节省的时间。

就像 AZ 所说，以程序方式使用 OOP（我经常这样做）是一个很好的方法（对于较小的项目）。项目越大，您应该使用的 OOP 越多。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2015-04-28T10:49:06.417

您可以在这两个概念中编写糟糕的软件。尽管如此，用面向对象语言编写、理解和维护复杂软件要比用过程语言容易得多。我用过程语言 (Oracle PL/SQL) 编写了高度复杂的 ERP 应用程序，然后切换到 OOP (C#)。它曾经是，现在仍然是一股新鲜空气。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2021-01-22T08:22:45.977

到目前为止，使用 OO 进行 DRY 和封装的论点只是增加了不必要的复杂性，即它的隐含程度，以及一个类可以将许多属性和方法继承到多少层。

更不用说设计一个好的 OO 真的很难，因为你最终会添加不相关/不必要的东西，这些东西将在继承它们的整个类层中被继承。如果一个父类变得混乱，这真的很糟糕，整个代码库都是混乱的。并被重构。

还有一个事实是，这些继承的属性并不特别适合继承它的类的用例，这需要被覆盖。而对于那些根本不需要它们的人来说，只是毫无理由地拥有它们。

对于不需要共享的东西，确保有抽象属性。但是你最终不得不在所有试图继承它们的实例中实现它们。

这种继承太神奇了，而且很危险。

但我认为 OO 擅长执行应该可用的内容。但是话又说回来，太多的力量真的很容易被错误地使用。

在我看来，final 类应该是默认值。并且你需要慎重选择是否允许它继承。

* * *

## 回答 #23

> 赞同：-1
> 
> 时间：2009-02-09T14:10:29.093

大多数研究发现，OO 代码比过程代码更简洁。如果您查看使用 C++ 重写现有 C 代码的项目（我不一定建议这样做，顺便说一句），您通常会看到代码大小减少了 50% 到 75%。

所以答案是——总是使用 OO！

# sharepoint - 由于缺少 .mdf 文件，MOSS 2007 上的备份和还原 SSP 失败

> ID：528235
> 
> 赞同：1
> 
> 时间：2009-02-09T14:02:09.177
> 
> 标签：sharepoint, moss, backup, restore

我使用中央管理备份工具来备份我们的共享服务提供者。备份位置是新服务器上的驱动器。

然后我尝试通过新服务器上的中央管理员恢复 SSP。它因找不到所需的 .mdf 文件这一事实而失败。它正在查找它们在原始服务器上的位置。

作为备份还原过程的一部分，备份是否不负责移动这些 .mdf 文件？

将不胜感激任何人的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-02-09T20:21:33.757

您是否按照[这些说明](http://technet.microsoft.com/en-us/library/cc896556.aspx)迁移 SSP？

# sql-server - 您最大的 SQL Server 错误或尴尬事件是什么？

> ID：528237
> 
> 赞同：13
> 
> 时间：2009-02-09T14:03:17.737
> 
> 标签：sql-server, sql-server-2005, tsql

你知道我说的那个。

我们都曾在某个时候去过那里。你会有那种可怕的恐惧感，并意识到天哪，这真的发生了。

当然，您现在可以笑了，对，继续与我们分享您的 SQL Server 事故。

如果你能详细说明你是如何解决你的问题的，这样我们就可以从我们的错误中吸取教训，那就更好了。

所以为了让球滚动，我会先去……..

那是我早年作为初级 SQL Server 大师的时候。我在企业管理器周围比赛，执行一些管理职责。你知道它是怎么回事，检查一些日志，确保备份运行正常，进行一点数据库内务管理，在自动驾驶仪上进行几乎所有业务，并在弹出的常见提示上按 Enter 键。

哦等等，那是“您确定要删除此表吗”提示。太晚了！

只是为了确认任何有抱负的 DBA，删除生产表是一件非常非常糟糕的事情！

毋庸置疑，世界纪录很快被刷新为最快的数据库恢复到新数据库，紧随其后的是表迁移，哦，是的。当然，其他人都不是更聪明，但仍然吸取了宝贵的教训。集中！

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2009-02-09T14:05:23.363

我想每个人都在某个时候错过了 DELETE 或 UPDATE 的 WHERE 子句......

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-02-09T14:10:59.327

将 500 万测试人员插入生产数据库。我认为最大的错误是让我首先拥有对生产数据库的写入权限。:P 坏 dba！

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-02-09T14:11:35.970

我最大的 SQL Server 错误是假设它在并发方面与 Oracle 一样强大。

让我解释。

当谈到 SQL Server 中的事务隔离级别时，您有两种选择：

1.  脏读：事务可以看到未提交的数据（来自其他事务）；或者
2.  选择阻止未提交的更新。

我相信这些来自 ANSI SQL。

(2) 是默认的隔离级别和（恕我直言）两害相权取其轻。但这对于任何长期运行的进程来说都是一个巨大的问题。我不得不批量加载数据，而且只能在几个小时内完成，因为它在网站运行时杀死了网站（它需要 10-20 分钟，因为它正在插入 50 万条记录）。

另一方面，Oracle 拥有 MVCC。这基本上意味着每个事务都会看到一致的数据视图。他们不会看到未提交的数据（除非您设置隔离级别来执行此操作）。他们也不会阻止未提交的事务（我对据称企业数据库会认为这在并发基础上可以接受的想法感到震惊）。

可以说，这是一次学习经历。

你知道什么？ **甚至 MySQL 也有 MVCC。**

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-02-09T14:11:55.050

我在一个大批量生产的电子商务网站上将所有价格都更改为零。我不得不关闭该站点并从备份中恢复数据库.. 非常丑陋。

幸运的是，那是很久以前的事了。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2009-02-09T14:15:12.547

更新或删除时忘记突出显示 WHERE 子句

脚本 procs 并首先检查 drop 依赖对象并在生产中运行它

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2009-02-09T15:24:18.183

我正在研究大型在线业务的支付系统。数百万欧元的业务。

*   从同事那里得到一个带有一些小更新的脚本。
*   在生产中运行它。
*   30 分钟后从帮助台获取错误报告，抱怨过去 30 分钟没有购买。
*   发现所有连接都在等待释放表锁
*   发现我同事的脚本以明确的 BEGIN TRANSACTION 开头，并希望我在最后手动键入 COMMIT TRANSACTION。
*   向老板解释为什么失去了 30 分钟的销售。
*   怪我自己没有正确阅读脚本文档。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2009-02-09T14:47:40.753

从上周开始恢复到生产实例而不是开发实例。不是早上好。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2009-02-09T14:08:44.433

我见过很多其他人错过了一个`WHERE`条款。

我自己，我总是`WHERE`先输入子句，然后回到行首并输入查询的其余部分:)

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2009-02-09T14:13:23.407

值得庆幸的是，在您意识到使用交易真的非常非常微不足道之前，我们只做了一次错误。我之前已经修改了数千条事故记录，幸运的是回滚在那里......

如果您在没有彻底测试脚本的情况下查询实时环境，那么我认为*尴尬*应该真的是鲁莽或不专业。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2009-02-09T15:58:05.137

我最喜欢的事情之一发生在自动导入中，当时客户在没有事先通知我们的情况下更改了数据结构。社会安全号码栏和我们要支付给这个人的金额被调换了。幸运的是，我们在系统试图向某人支付他的社会安全号码之前找到了它。我们现在检查自动导入，在运行之前查找有趣的数据，如果数据看起来很奇怪，则停止它。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2009-02-09T14:27:49.350

就像 zabzonk 说的那样，在我一天的一两次更新中忘记了 WHERE 子句。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2009-02-09T15:00:27.587

我们有一个旧应用程序不能非常有效地处理与我们的 HR 数据库同步以进行姓名更新，这主要是因为他们键入标题更改的方式。无论如何，某个女人结婚了，我不得不写一个数据库更改请求来更新她的姓氏，我忘记了 where 子句，并且说应用程序名称中的每个人现在都是 Allison Smith。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2009-02-09T14:08:53.823

列可以为空，并且参数值无法检索到正确的信息...

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2009-02-09T14:18:56.313

我曾经与一位初级开发人员一起工作，他感到困惑并在桌子上叫“Drop”而不是“Delete”。

为恢复备份工作了一个漫长的夜晚……

编辑：我应该提到，这是在生产环境中，表中充满了数据......

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2009-02-09T14:33:37.120

最大的错误是让开发人员“写入”访问生产数据库，许多 DEV 和 TEST 记录也被插入/覆盖和备份，直到（我！）明智地建议只允许读取访问！

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2009-02-09T14:56:18.390

与 SQL 服务器相关的排序。我记得了解始终处置 SqlDataReader 的重要性。我有一个在开发中运行良好的系统，并且恰好针对 ERP 数据库运行。在生产中，它关闭了数据库，因为我认为它足以关闭 SqlConnection，并且有数百个（如果不是数千个）打开的连接。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2009-02-09T15:31:00.867

在我的合作项目开始时，我最终终止了对使用这个特定系统的每个人的访问权限（我所在省的很多应用程序都使用了这个系统）。在我的辩护中，我是 SQL Server Management Studio 的新手，不知道您可以“打开”表并使用 sql 语句编辑特定条目。

我用一个简单的 UPDATE 语句使所有用户访问过期（对这个应用程序的访问是由 SQL 框上的用户帐户以及访问表中的特定条目提供的）但是当我去突出显示该语句并运行它时，我没有包含 WHERE 子句。

有人告诉我一个常见的错误。快速修复是在数据库可以备份之前使每个人的帐户（包括应该过期的帐户）过期。现在，我要么打开表并使用 SQL 选择特定条目，要么将所有内容完全包装在事务中，然后立即回滚。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2009-02-09T16:07:17.800

我们的 IT Ops 决定从 SQL 2000 升级到 SQL 2005。

下周一，用户开始询问他们的应用为何无法运行。像这样的错误：

> DTS 未找到等。

这导致办公室里有一组很好的 3 个星期六在 SSIS 中用一个很好的加班包重建包:)

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2009-02-09T16:14:52.650

不，完全是一个“错误”，但是当我第一次学习 PHP 和 MYSQL 时，我每天都会花几个小时，试图找出我的代码为什么不工作，不知道我有错误的密码/用户名/主机/数据库凭据我的 SQL 数据库。你无法相信我在这上面浪费了多少时间，更糟糕的是，这不是一次性事件。但是大声笑，这一切都很好，它塑造了性格。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2009-02-09T16:22:12.863

我曾经，而且只有一次，输入了类似于以下内容的内容：

```
psql> UPDATE big_table SET foo=0; WHERE bar=123 
```

我设法很快修复了错误。由于那个错误和另一个错误，我的更新总是以：

```
psql> UPDATE table SET WHERE foo='bar'; 
```

这样更容易避免错误。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2009-02-09T17:48:45.810

这是在谷歌可以提供帮助的日子之前。我在使用 SQL Server 时没有遇到过这个问题，但使用它的是丑陋的表亲 Sybase。

我在生产环境中更新了表模式。当时我不明白使用 SELECT * 的存储过程必须重新编译以获取新字段，因此我花了接下来的八个小时试图弄清楚为什么执行关键工作的存储过程一直失败。只有在服务器重新启动后，我才知道。

在您的旗舰客户的网站上损失数千美元和数百个（最终用户）工时是一种相当有教育意义的经历。强烈推荐！！

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2009-02-09T18:03:00.500

几年前，我在一个客户站点上工作，该站点有一个很好的脚本来清除所有订单、购物车和客户的开发环境.. 以简化测试，所以我当然把该死的脚本放在了生产服务器上查询分析器并运行它。

也花了大约 5-6 分钟来运行，我在抱怨开发服务器有多慢，直到删除的行数出现。:)

幸运的是，因为我即将进行安装，所以我刚刚运行了完整备份..

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2009-02-09T21:11:38.880

超出典型的 where 子句错误。在不正确的数据库上运行下降，因此必须运行还原。现在我三重检查我的服务器名称。谢天谢地，我有一个很好的备份。

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2009-03-02T21:03:01.903

我将最大服务器内存设置为 0。当时我在想，它会自动告诉 SQL Server 使用所有可用内存（还早）。没有这样的运气。SQL 服务器决定只使用 16 MB，我必须以单用户模式连接才能将设置更改回来。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2009-12-09T20:56:01.483

在 Management Studio 中点击“恢复”而不是“备份”。

# asp.net - 如何在同一页面上运行不同版本的 jQuery？

> ID：528241
> 
> 赞同：68
> 
> 时间：2009-02-09T14:04:13.680
> 
> 标签：asp.net, javascript, jquery

我的公司购买了一种在页面上呈现 ASP.NET 控件的产品。此控件使用 jQuery 1.2.3 并向页面添加脚本标记以引用它。如果控件以任何方式修改（包括修改以引用不同版本的 jQuery），控件的开发人员将不支持使用该控件。

我即将开始开发自己的控件，并希望使用 jQuery 1.3 的功能和速度改进。这两个控件都需要存在于同一页面上。

如何让购买的控件使用 jQuery 1.2.3 和新的自定义开发使用 jQuery 1.3？同样出于好奇，如果我们要使用需要引用另一个版本的 jQuery 的附加控件怎么办？

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2009-02-09T14:07:39.960

[您可以通过在无冲突模式下](http://docs.jquery.com/Using_jQuery_with_Other_Libraries)运行您的 jQuery 版本来实现这一点。“无冲突”模式是让 jQuery 在页面上与其他框架（如[原型](http://www.prototypejs.org/)）一起工作的典型解决方案，也可以在这里使用，因为它本质上为您加载的每个版本的 jQuery 命名空间。

```
<script src="jQuery1.3.js"></script>
<script>
    jq13 = jQuery.noConflict(true);
</script>

<!-- original author's jquery version -->
<script src="jQuery1.2.3.js"></script> 
```

此更改将意味着您要使用的任何 jQuery 东西都需要使用`jq13`而不是调用`$`，例如

```
jq13("#id").hide(); 
```

让两个版本在同一页面上运行并不是一个理想的情况，但如果您别无选择，那么上述方法应该允许您同时使用两个不同的版本。

> 同样出于好奇，如果我们要使用需要引用另一个版本的 jQuery 的附加控件怎么办？

如果您需要添加另一个版本的 jQuery，您可以扩展上述内容：

```
<script src="jQuery1.3.js"></script>
<script>
    jq13 = jQuery.noConflict(true);
</script>
<script src="jQuery1.3.1.js"></script>
<script>
    jq131 = jQuery.noConflict(true);
</script>

<!-- original author's jquery version -->
<script src="jQuery1.2.3.js"></script> 
```

变量`jq13`和`jq131`将分别用于您需要的特定于版本的功能。

**最后加载原始开发人员使用**的 jQuery 很重要——原始开发人员可能在假设`$()`使用他们的 jQuery 版本的情况下编写他们的代码。如果您在他们之后加载另一个版本，`$`则将被您加载的最后一个版本“抓取”，这意味着原始开发人员的代码在最新的库版本上运行，从而导致`noConflicts`有些多余！

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2010-01-31T21:22:19.370

正如ConroyP所说，你可以这样做，但在声明变量时`jQuery.noConflict`不要忘记。`var`像这样。

```
<script src="jQuery1.3.js"></script>
<script>
    var jq13 = jQuery.noConflict(true);
</script>

<!-- original author's jquery version -->
<script src="jQuery1.2.3.js"></script> 
```

您可以通过在 function's 之后添加 (jq13) 将所有 $'s 连接到 jq13 `})`。像这样

```
(function($) {
 ... 
})(jq13); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-26T20:21:37.113

似乎顺序无关紧要......例如： http: [//gist.github.com/136686](http://gist.github.com/136686)。控制台输出位于顶部，所有版本似乎都在正确的位置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-14T04:59:44.560

让工作变得虚假

```
var jq16 = $.noConflict(false); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-07T09:58:54.803

在第二个版本中，将变量声明为 $.noConflict(true)。并使用声明的变量代替 jquery 代码中使用的 $ 。请检查以下代码：此代码在声明第二个版本的 jquery 后使用：

```
<script type="text/javascript">
var jQuery_1_9_1 = $.noConflict(true); function pageLoad(sender, args) {

        var $ddl = jQuery_1_9_1("select[name$=drpClassCode]");
        var $ddl1 = jQuery_1_9_1("select[name$=drpSubContractors]");
        $ddl.select2();
        $ddl1.select2();

        $ddl.bind("change keyup", function () {
            $ddl.fadeIn("slow");

        });

        $ddl.bind("change keyup", function () {
            $ddl1.fadeIn("slow");

        });
    } 
```

# wpf - 如何在按钮的 CommandParam 中传递特定的视图模型对象？

> ID：528253
> 
> 赞同：3
> 
> 时间：2009-02-09T14:08:09.583
> 
> 标签：wpf, data-binding, mvvm, button, routed-commands

我有一个使用 Master-Detail UI 模式的简单 WPF 程序，其中 Detail 显示主窗格中当前选择的集合项。我正在使用 MVVM，每个 XAML 页面都由一个 ViewModel 对象支持，该对象设置为它的 DataContext。

现在，我想在主窗格中添加一个删除按钮以从主项目列表中删除。但是，我不知道如何将当前选定项的视图模型对象作为按钮 CommandParameter 传递给路由命令处理程序代码。

在此先感谢您的任何指点。

麦克风

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-09T23:35:09.813

与 Paul 所展示的类似的是，您的视图模型将知道当前选择了哪个项目。IE

```
public class MyVM
{
 public ObservableCollection<MyObject> MyCollection { get; set; }
 public MyObject CurrentItem { get; set; }
} 
```

然后您的 XAML 可以很简单

```
CommandParameter="{Binding Path=CurrentItem}" 
```

只要您的主窗格在您选择它时设置 CurrentItem 属性，您的命令就可以简单地将 CurrentItem 设置为命令参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-09T16:44:20.410

一种选择是使用对视图模型的引用创建每个命令，并在绑定到当前选定项的视图模型上创建一个属性。这样您就不需要将所选项目作为参数传递 - 该命令可以从 VM 中检索它。如果这不适合您的情况，您可以像这样传递所选项目：

```
<Button Content="Delete"
                Command="{Binding DeleteCommand}"
                CommandParameter="{Binding ElementName=listBox_, Path=SelectedValue}" /> 
```

其中 listBox_ 是从 Selector 派生的控件。

希望有帮助，

保罗

# iis-7 - IIS7 分析

> ID：528261
> 
> 赞同：10
> 
> 时间：2009-02-09T14:09:27.397
> 
> 标签：iis-7, profiling, administration

有没有办法分析 IIS7？（免费软件？）

*   连接数
*   带宽使用
*   错误（事件查看器？）-...

谢谢，列文卡登

ps：类似于mssqlserver profiling的东西

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-02-09T14:38:46.263

没有什么像 MSSQL 的分析器，而是一组工具：

*   Perfmon 将显示每个网站的当前连接数。Perfmon.msc，网络服务，当前连接，选择网站，点击添加。不喜欢 perfmon 的交互性？没问题，使用 logman.exe，一个不错的性能 CLI。

*   如果启用 iis 日志文件中发送的字节数和接收的字节数，则可以从日志文件中获取带宽使用情况。这也可以通过性能计数器 - Web 服务、发送/接收/秒的字节数获得。我认为这两者相得益彰。

*   IIS7 有一个称为失败请求跟踪的新功能。您可以告诉它登录所有 500 或任何需要 15 秒运行的 .aspx 页面，或基于事件严重性。它在 \inetpub 下为您将所有这些信息保存在一个 XML 文件中，因此它很容易解析，并且还为您提供了一个很好的 XSLT 以在您的浏览器中查看它，如果您愿意，可以向下钻取。

[http://learn.iis.net/page.aspx/266/troubleshooting-failed-requests-using-tracing-in-iis7/](http://learn.iis.net/page.aspx/266/troubleshooting-failed-requests-using-tracing-in-iis7/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-02-09T14:31:47.717

试用[适用于 IIS 7.0 的管理包](http://www.iis.net/downloads/default.aspx?tabid=34&i=1682&g=6)。它有：

**配置编辑器：** 配置编辑器模块将帮助您管理配置文件。此工具仅供服务器管理员使用。它允许您编辑配置文件中的任何部分、属性、元素或集合。除了编辑这些值之外，您还可以锁定和解锁它们。配置编辑器还允许您根据您采取的操作生成脚本，并搜索文件以查看值的使用位置。

**IIS 报告：** IIS 报告模块使您能够查看有关您网站的关键统计信息。您还可以生成自己的模块报告来收集与您和您的业务相关的信息。目前，您可以以图表和/或表格的形式查看这些报告的输出。

**数据库管理器：** 此模块不再是管理包的一部分，而是在 IIS 下载中心作为单独的下载提供。

**UI 扩展：** UI 扩展模块允许您通过 IIS 管理器管理现有功能。

*   FastCGI 模块允许您管理您的 FastCGI 设置。
*   这两个 ASP.NET 模块允许您管理您的授权和自定义错误设置。
*   最后，HTTP 请求过滤允许您设置 HTTP 请求过滤规则。

# cocoa-touch - UITextView 自动向下滚动

> ID：528277
> 
> 赞同：30
> 
> 时间：2009-02-09T14:13:11.210
> 
> 标签：cocoa-touch

我有一个`UIView`，我添加了一个可编辑`UITextView`的，

```
UITextView *textView = [[UITextView alloc] initWithFrame:CGRectMake(5, 5, 219, 47)];
[self addSubview:textView];
textView.font = [UIFont systemFontOfSize:14]; 
```

当我键入时，它不会自动关闭。有人有想法吗？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2009-08-18T20:43:47.403

刚刚发现您必须使用长度> 0。即

```
NSRange range = NSMakeRange(textView.text.length - 1, 1);
[textView scrollRangeToVisible:range]; 
```

反正为我工作。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2010-10-14T16:10:20.290

滚动到我试过的缓冲区的末尾

```
[textView scrollRangeToVisible:NSMakeRange([textView.text length]-1, 1)]; 
```

但是什么也没发生。相反，这有效

```
textView.selectedRange = NSMakeRange(textView.text.length - 1, 0); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-02-09T14:28:01.673

我想你必须做

```
[textView scrollRangeToVisible:[textView selectedRange]]; 
```

在`textDidChange`.

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-03-24T14:42:51.367

以编程方式将文本添加到文本框时，我发现我还需要添加“[textView layoutIfNeeded]”来进行设置，然后才能正确计算新的滚动位置。

例如：

```
[newString appendFormat:@"%@\n",addText];
textView.text = newString;
[textView layoutIfNeeded];
NSRange range = NSMakeRange(textView.text.length - 2, 1); //I ignore the final carriage return, to avoid a blank line at the bottom
[textView scrollRangeToVisible:range] 
```

如果没有这个添加，文本框有时不会滚动，或者每次添加一行数据时都会滚动几行。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-04-14T14:21:13.537

斯威夫特 2.2。这个对我有用

```
func textViewDidChange(textView: UITextView) {

   let bottomOffset = CGPointMake(0, textView.contentSize.height - textView.bounds.size.height)
   textView.setContentOffset(bottomOffset, animated: true)
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-07-12T14:22:46.793

我发现如果添加到 UITextView 的文本包含回车，那么 textview 将无法正确滚动。

我添加了如下逻辑，以允许在滚动到范围之前正确计算边界。

```
BOOL autoscroll = NO;

//I added a 10 px buffer here to allow for better detection as the textview is auto populated 
if (textView.contentOffset.y >= (textView.contentSize.height - textView.frame.size.height - 10))
{
    autoscroll = YES;
}

[textView setText:messageString];
[textView layoutSubviews];

if(autoscroll) {
    dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(0.1 * NSEC_PER_SEC)),     dispatch_get_main_queue(), ^{
        [textView scrollRangeToVisible:NSMakeRange(textView.text.length - 1, 1)];
    });
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-02-10T10:11:43.713

如果找到解决方案

我将 textview 放入视图并将视图设置为 clipToBounds = YES 然后我将 textView 设置为 70 的高度

解决了这个问题。

非常奇怪的解决方案，但它终于奏效了:)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-06-20T00:09:31.407

这有效：

```
- (void)textViewDidChange:(UITextView *)textView {
    if (_moveToBottom) {
        int y = textView.contentSize.height - textView.frameHeight + self.textView.contentInset.bottom + self.textView.contentInset.top;
        if(y > 0) {
            [textView setContentOffset:CGPointMake(0, y) animated:YES];
        }
        _moveToBottom = NO;
    }
    else {
        [textView scrollRangeToVisible:NSMakeRange([textView.text length]-1, 1)];
    }
}

- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text {
    if ([text isEqualToString:@"\n"] && range.location == [textView.text length]) {
        _moveToBottom = YES;
    }
    return YES;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-09-01T13:26:05.323

使用`contentOffset`，它会自动向下滚动

```
textView.contentOffset = CGPointMake(0, textView.contentSize.height - textView.frame.size.height); 
```

# c# - ASP.NET：在资源管理器中重定向时会话状态未更新

> ID：528280
> 
> 赞同：2
> 
> 时间：2009-02-09T14:13:30.817
> 
> 标签：c#, asp.net

我有一个 aspx 页面（page1.aspx），我在其中设置了一个 Session 变量，然后重定向到另一个页面：

```
HttpContext.Current.Response.Redirect("page2.aspx"); 
```

在 page2.aspx 上，我想读取会话变量，但在我重新加载页面之前它不存在。我尝试读取 page_load 中的会话变量。

奇怪的是它可以在Firefox中运行，但不能在资源管理器中运行？

（请注意，我已经简化了这一点来解释问题 page1.aspx 是从我的 HttpModule 访问并被重写路径（我的解决方法来访问 Session）。所以流程是 HttpModule -pathrewrite-> page1.aspx（设置会话变量）-redirect-> page.2.aspx。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-09T14:59:20.147

尝试将您的响应重定向切换到：

```
Response.Redirect("page2.aspx",false);
HttpContext.Current.ApplicationInstance.CompleteRequest(); 
```

名义上的`Redirect(url)`隐式调用`Redirect("url", true)`抛出一个`ThreadAbortException`. 引发的 ThreadAbortException 是一个特殊的异常，当它在 ASP.NET 中这样完成时。此异常虽然可以被捕获，但不能被静音。它将继续冒泡 ASP.NET 调用链，导致当前工作线程立即终止。

突然终止可能会影响这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-11T16:21:21.313

仅用于文档：

添加`ApplicationInstance.CompleteRequest();`并没有真正解决我的问题（我的错误）。

找到一个描述该问题的博客条目，其解决方案成功了。

[http://forums.asp.net/p/1163911/1931020.aspx#1931020](http://forums.asp.net/p/1163911/1931020.aspx#1931020)

即在page2中我添加了（在PageLoad上）：

```
Response.Cache.SetCacheability(HttpCacheability.NoCache);
Response.ExpiresAbsolute = DateTime.Now.AddMonths(-1); 
```

# yaml - 如何在另一个文件中包含 YAML 文件？

> ID：528281
> 
> 赞同：376
> 
> 时间：2009-02-09T14:14:04.717
> 
> 标签：yaml, transclusion

所以我有两个 YAML 文件，“A”和“B”，我希望将 A 的内容插入到 B 中，或者拼接到现有的数据结构中，比如数组，或者作为元素的子元素，比如值对于某个哈希键。

这可能吗？如何？如果没有，任何指向规范性参考的指针？

* * *

## 回答 #1

> 赞同：403
> 
> 时间：2013-03-15T16:39:30.393

不，YAML 不包含任何类型的“导入”或“包含”语句。

* * *

## 回答 #2

> 赞同：140
> 
> 时间：2012-03-06T03:53:58.337

您的问题不要求 Python 解决方案，但这是使用[PyYAML](https://github.com/yaml/pyyaml)的问题。

PyYAML 允许您将自定义构造函数（例如`!include`）附加到 YAML 加载程序。我已经包含了一个可以设置的根目录，以便该解决方案支持相对和绝对文件引用。

# 基于类的解决方案

这是一个基于类的解决方案，它避免了我原始响应的全局根变量。

有关使用元类注册自定义构造函数的类似、更强大的 Python 3 解决方案，请参阅此[要点](https://gist.github.com/joshbode/569627ced3076931b02f)。

```
import yaml
import os

class Loader(yaml.SafeLoader):

    def __init__(self, stream):

        self._root = os.path.split(stream.name)[0]

        super(Loader, self).__init__(stream)

    def include(self, node):

        filename = os.path.join(self._root, self.construct_scalar(node))

        with open(filename, 'r') as f:
            return yaml.load(f, Loader)

Loader.add_constructor('!include', Loader.include) 
```

一个例子：

**`foo.yaml`**

```
a: 1
b:
    - 1.43
    - 543.55
c: !include bar.yaml 
```

**`bar.yaml`**

```
- 3.6
- [1, 2, 3] 
```

现在可以使用以下方法加载文件：

```
>>> with open('foo.yaml', 'r') as f:
>>>    data = yaml.load(f, Loader)
>>> data
{'a': 1, 'b': [1.43, 543.55], 'c': [3.6, [1, 2, 3]]} 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-01-23T18:45:22.610

据我所知，YAML 不直接支持包含，您必须自己提供一种机制，但这通常很容易做到。

我在我的 python 应用程序中使用 YAML 作为配置语言，在这种情况下，通常定义如下约定：

```
>>> main.yml <<<
includes: [ wibble.yml, wobble.yml] 
```

然后在我的（python）代码中我做：

```
import yaml
cfg = yaml.load(open("main.yml"))
for inc in cfg.get("includes", []):
   cfg.update(yaml.load(open(inc))) 
```

唯一的缺点是 include 中的变量将始终覆盖 main 中的变量，并且无法通过更改 "includes: 语句在 main.yml 文件中出现的位置来更改该优先级。

在稍微不同的一点上，YAML 不支持包含，因为它的设计并不像基于文件的标记那样专门。如果您在对 AJAX 请求的响应中得到它，那么包含意味着什么？

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2019-04-02T13:14:01.083

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2012-09-03T17:58:44.373

扩展@Jos​​h_Bode 的答案，这是我自己的 PyYAML 解决方案，它的优点是是`yaml.Loader`. 它不依赖于任何模块级全局变量，也不依赖于修改`yaml`模块的全局状态。

```
import yaml, os

class IncludeLoader(yaml.Loader):                                                 
    """                                                                           
    yaml.Loader subclass handles "!include path/to/foo.yml" directives in config  
    files.  When constructed with a file object, the root path for includes       
    defaults to the directory containing the file, otherwise to the current       
    working directory. In either case, the root path can be overridden by the     
    `root` keyword argument.                                                      

    When an included file F contain its own !include directive, the path is       
    relative to F's location.                                                     

    Example:                                                                      
        YAML file /home/frodo/one-ring.yml:                                       
            ---                                                                   
            Name: The One Ring                                                    
            Specials:                                                             
                - resize-to-wearer                                                
            Effects: 
                - !include path/to/invisibility.yml                            

        YAML file /home/frodo/path/to/invisibility.yml:                           
            ---                                                                   
            Name: invisibility                                                    
            Message: Suddenly you disappear!                                      

        Loading:                                                                  
            data = IncludeLoader(open('/home/frodo/one-ring.yml', 'r')).get_data()

        Result:                                                                   
            {'Effects': [{'Message': 'Suddenly you disappear!', 'Name':            
                'invisibility'}], 'Name': 'The One Ring', 'Specials':              
                ['resize-to-wearer']}                                             
    """                                                                           
    def __init__(self, *args, **kwargs):                                          
        super(IncludeLoader, self).__init__(*args, **kwargs)                      
        self.add_constructor('!include', self._include)                           
        if 'root' in kwargs:                                                      
            self.root = kwargs['root']                                            
        elif isinstance(self.stream, file):                                       
            self.root = os.path.dirname(self.stream.name)                         
        else:                                                                     
            self.root = os.path.curdir                                            

    def _include(self, loader, node):                                    
        oldRoot = self.root                                              
        filename = os.path.join(self.root, loader.construct_scalar(node))
        self.root = os.path.dirname(filename)                           
        data = yaml.load(open(filename, 'r'))                            
        self.root = oldRoot                                              
        return data 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2019-10-24T18:20:21.007

The YML standard **does not** specify a way to do this. And this problem does not limit itself to YML. JSON has the same limitations.

Many applications which use YML or JSON based configurations run into this problem eventually. And when that happens, **they make up their own convention**.

e.g. for swagger API definitions:

```
$ref: 'file.yml' 
```

e.g. for docker compose configurations:

```
services:
  app:
    extends:
      file: docker-compose.base.yml 
```

Alternatively, if you want to split up the content of a yml file in multiple files, like a tree of content, you can define your own folder-structure convention and use an (existing) merge script.

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2020-02-18T00:03:40.283

With [Yglu](https://yglu.io), you can import other files like this:

**A.yaml**

```
foo: !? $import('B.yaml') 
```

**B.yaml**

```
bar: Hello 
```

```
$ yglu A.yaml
foo:
  bar: Hello 
```

As `$import` is a function, you can also pass an expression as argument:

```
 dep: !- b
  foo: !? $import($_.dep.toUpper() + '.yaml') 
```

This would give the same output as above.

Disclaimer: I am the author of Yglu.

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2019-07-29T17:05:57.790

Standard YAML 1.2 doesn't include natively this feature. Nevertheless many implementations provides some extension to do so.

I present a way of achieving it with Java and `snakeyaml:1.24` (Java library to parse/emit YAML files) that allows creating a custom YAML tag to achieve the following goal (you will see I'm using it to load test suites defined in several YAML files and that I made it work as a list of includes for a target `test:` node):

```
# ... yaml prev stuff

tests: !include
  - '1.hello-test-suite.yaml'
  - '3.foo-test-suite.yaml'
  - '2.bar-test-suite.yaml'

# ... more yaml document 
```

Here is the one-class Java that allows processing the `!include` tag. Files are loaded from classpath (Maven resources directory):

```
/**
 * Custom YAML loader. It adds support to the custom !include tag which allows splitting a YAML file across several
 * files for a better organization of YAML tests.
 */
@Slf4j   // <-- This is a Lombok annotation to auto-generate logger
public class MyYamlLoader {

    private static final Constructor CUSTOM_CONSTRUCTOR = new MyYamlConstructor();

    private MyYamlLoader() {
    }

    /**
     * Parse the only YAML document in a stream and produce the Java Map. It provides support for the custom !include
     * YAML tag to split YAML contents across several files.
     */
    public static Map<String, Object> load(InputStream inputStream) {
        return new Yaml(CUSTOM_CONSTRUCTOR)
                .load(inputStream);
    }

    /**
     * Custom SnakeYAML constructor that registers custom tags.
     */
    private static class MyYamlConstructor extends Constructor {

        private static final String TAG_INCLUDE = "!include";

        MyYamlConstructor() {
            // Register custom tags
            yamlConstructors.put(new Tag(TAG_INCLUDE), new IncludeConstruct());
        }

        /**
         * The actual include tag construct.
         */
        private static class IncludeConstruct implements Construct {

            @Override
            public Object construct(Node node) {
                List<Node> inclusions = castToSequenceNode(node);
                return parseInclusions(inclusions);
            }

            @Override
            public void construct2ndStep(Node node, Object object) {
                // do nothing
            }

            private List<Node> castToSequenceNode(Node node) {
                try {
                    return ((SequenceNode) node).getValue();

                } catch (ClassCastException e) {
                    throw new IllegalArgumentException(String.format("The !import value must be a sequence node, but " +
                            "'%s' found.", node));
                }
            }

            private Object parseInclusions(List<Node> inclusions) {

                List<InputStream> inputStreams = inputStreams(inclusions);

                try (final SequenceInputStream sequencedInputStream =
                             new SequenceInputStream(Collections.enumeration(inputStreams))) {

                    return new Yaml(CUSTOM_CONSTRUCTOR)
                            .load(sequencedInputStream);

                } catch (IOException e) {
                    log.error("Error closing the stream.", e);
                    return null;
                }
            }

            private List<InputStream> inputStreams(List<Node> scalarNodes) {
                return scalarNodes.stream()
                        .map(this::inputStream)
                        .collect(toList());
            }

            private InputStream inputStream(Node scalarNode) {
                String filePath = castToScalarNode(scalarNode).getValue();
                final InputStream is = getClass().getClassLoader().getResourceAsStream(filePath);
                Assert.notNull(is, String.format("Resource file %s not found.", filePath));
                return is;
            }

            private ScalarNode castToScalarNode(Node scalarNode) {
                try {
                    return ((ScalarNode) scalarNode);

                } catch (ClassCastException e) {
                    throw new IllegalArgumentException(String.format("The value must be a scalar node, but '%s' found" +
                            ".", scalarNode));
                }
            }
        }

    }

} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-08-04T21:30:20.983

不幸的是，YAML 在其标准中没有提供这一点。

但是，如果您使用 Ruby，有一个 gem 通过扩展 ruby​​ YAML 库来提供您所要求的功能： [https ://github.com/entwanderer/yaml_extend](https://github.com/entwanderer/yaml_extend)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-11-22T11:09:53.993

I make some examples for your reference.

```
import yaml

main_yaml = """
Package:
 - !include _shape_yaml    
 - !include _path_yaml
"""

_shape_yaml = """
# Define
Rectangle: &id_Rectangle
    name: Rectangle
    width: &Rectangle_width 20
    height: &Rectangle_height 10
    area: !product [*Rectangle_width, *Rectangle_height]

Circle: &id_Circle
    name: Circle
    radius: &Circle_radius 5
    area: !product [*Circle_radius, *Circle_radius, pi]

# Setting
Shape:
    property: *id_Rectangle
    color: red
"""

_path_yaml = """
# Define
Root: &BASE /path/src/

Paths: 
    a: &id_path_a !join [*BASE, a]
    b: &id_path_b !join [*BASE, b]

# Setting
Path:
    input_file: *id_path_a
"""

# define custom tag handler
def yaml_import(loader, node):
    other_yaml_file = loader.construct_scalar(node)
    return yaml.load(eval(other_yaml_file), Loader=yaml.SafeLoader)

def yaml_product(loader, node):
    import math
    list_data = loader.construct_sequence(node)
    result = 1
    pi = math.pi
    for val in list_data:
        result *= eval(val) if isinstance(val, str) else val
    return result

def yaml_join(loader, node):
    seq = loader.construct_sequence(node)
    return ''.join([str(i) for i in seq])

def yaml_ref(loader, node):
    ref = loader.construct_sequence(node)
    return ref[0]

def yaml_dict_ref(loader: yaml.loader.SafeLoader, node):
    dict_data, key, const_value = loader.construct_sequence(node)
    return dict_data[key] + str(const_value)

def main():
    # register the tag handler
    yaml.SafeLoader.add_constructor(tag='!include', constructor=yaml_import)
    yaml.SafeLoader.add_constructor(tag='!product', constructor=yaml_product)
    yaml.SafeLoader.add_constructor(tag='!join', constructor=yaml_join)
    yaml.SafeLoader.add_constructor(tag='!ref', constructor=yaml_ref)
    yaml.SafeLoader.add_constructor(tag='!dict_ref', constructor=yaml_dict_ref)

    config = yaml.load(main_yaml, Loader=yaml.SafeLoader)

    pk_shape, pk_path = config['Package']
    pk_shape, pk_path = pk_shape['Shape'], pk_path['Path']
    print(f"shape name: {pk_shape['property']['name']}")
    print(f"shape area: {pk_shape['property']['area']}")
    print(f"shape color: {pk_shape['color']}")

    print(f"input file: {pk_path['input_file']}")

if __name__ == '__main__':
    main() 
```

output

```
shape name: Rectangle
shape area: 200
shape color: red
input file: /path/src/a 
```

# Update 2

and you can combine it, like this

```
# xxx.yaml
CREATE_FONT_PICTURE:
  PROJECTS:
    SUNG: &id_SUNG
      name: SUNG
      work_dir: SUNG
      output_dir: temp
      font_pixel: 24

  DEFINE: &id_define !ref [*id_SUNG]  # you can use config['CREATE_FONT_PICTURE']['DEFINE'][name, work_dir, ... font_pixel]
  AUTO_INIT:
    basename_suffix: !dict_ref [*id_define, name, !product [5, 3, 2]]  # SUNG30

# ↓ This is not correct.
# basename_suffix: !dict_ref [*id_define, name, !product [5, 3, 2]]  # It will build by Deep-level. id_define is Deep-level: 2\. So you must put it after 2\. otherwise, it can't refer to the correct value. 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-02-26T23:18:28.570

我认为@maxy-B 使用的解决方案看起来很棒。但是，嵌套包含对我来说并没有成功。例如，如果 config_1.yaml 包含 config_2.yaml，其中包含 config_3.yaml，则加载程序存在问题。但是，如果您只是在加载时将新的加载器类指向自身，它就可以工作！具体来说，如果我们用稍微修改过的版本替换旧的 _include 函数：

```
def _include(self, loader, node):                                    
     oldRoot = self.root                                              
     filename = os.path.join(self.root, loader.construct_scalar(node))
     self.root = os.path.dirname(filename)                           
     data = yaml.load(open(filename, 'r'), loader = IncludeLoader)                            
     self.root = oldRoot                                              
     return data 
```

经过反思，我同意其他评论，嵌套加载通常不适合 yaml，因为输入流可能不是文件，但它非常有用！

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-02-12T04:07:59.157

使用**Symfony**，它对 yaml 的处理将间接允许您嵌套 yaml 文件。诀窍是利用该`parameters`选项。例如：

**common.yml**

```
parameters:
    yaml_to_repeat:
        option: "value"
        foo:
            - "bar"
            - "baz" 
```

**配置.yml**

```
imports:
    - { resource: common.yml }
whatever:
    thing: "%yaml_to_repeat%"
    other_thing: "%yaml_to_repeat%" 
```

结果将与以下内容相同：

```
whatever:
    thing:
        option: "value"
        foo:
            - "bar"
            - "baz"
    other_thing:
        option: "value"
        foo:
            - "bar"
            - "baz" 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-07-09T09:05:43.380

也许这可以启发您，尝试与 jbb 约定保持一致：

[https://docs.openstack.org/infra/jenkins-job-builder/definition.html#inclusion-tags](https://docs.openstack.org/infra/jenkins-job-builder/definition.html#inclusion-tags)

`- job: name: test-job-include-raw-1 builders: - shell: !include-raw: include-raw001-hello-world.sh`

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-03-11T04:44:17.163

Adding on @Joshbode's initial answer above , I modified the snippet a little to support UNIX style wild card patterns.

I haven't tested in windows though. I was facing an issue of splitting an array in a large yaml across multiple files for easy maintenance and was looking for a solution to refer multiple files within a same array of the base yaml. Hence the below solution. The solution does not support recursive reference. It only supports wildcards in a given directory level referenced in the base yaml.

```
import yaml
import os
import glob

# Base code taken from below link :-
# Ref:https://stackoverflow.com/a/9577670
class Loader(yaml.SafeLoader):

    def __init__(self, stream):

        self._root = os.path.split(stream.name)[0]

        super(Loader, self).__init__(stream)

    def include(self, node):
        consolidated_result = None
        filename = os.path.join(self._root, self.construct_scalar(node))

        # Below section is modified for supporting UNIX wildcard patterns
        filenames = glob.glob(filename)

        # Just to ensure the order of files considered are predictable 
        # and easy to debug in case of errors.
        filenames.sort()
        for file in filenames:
            with open(file, 'r') as f:
                result = yaml.load(f, Loader)

            if isinstance(result, list):
                if not isinstance(consolidated_result, list):
                    consolidated_result = []
                consolidated_result += result
            elif isinstance(result, dict):
                if not isinstance(consolidated_result, dict):
                    consolidated_result = {}
                consolidated_result.update(result)
            else:
                consolidated_result = result

        return consolidated_result

Loader.add_constructor('!include', Loader.include) 
```

**Usage**

```
a:
  !include a.yaml

b:
  # All yamls included within b folder level will be consolidated
  !include b/*.yaml 
```

* * *

## 回答 #15

> 赞同：-8
> 
> 时间：2014-08-01T07:50:19.130

提出问题时可能不支持它，但您可以将其他 YAML 文件导入其中：

```
imports: [/your_location_to_yaml_file/Util.area.yaml] 
```

虽然我没有任何在线参考，但这对我有用。

# deadlock - 死锁的常见原因有哪些？

> ID：528303
> 
> 赞同：40
> 
> 时间：2009-02-09T14:20:45.917
> 
> 标签：deadlock

死锁很难找到，而且很难消除。

如何在我的代码中找到死锁的错误源？有没有“死锁模式”？

在我的特殊情况下，它处理数据库，但这个问题对每个死锁都是开放的。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2009-02-09T14:28:56.600

更新：这篇最近的 MSDN 文章，[识别并发问题的工具和技术](http://msdn.microsoft.com/en-us/magazine/cc546569.aspx)，可能也很有趣

* * *

Stephen Toub 在 MSDN 文章[Deadlock monitor](http://msdn.microsoft.com/en-us/magazine/cc163352.aspx)中指出了发生死锁所必需的以下四个条件：

*   有限数量的特定资源。对于 C# 中的监视器（使用 lock 关键字时使用的监视器），这个有限的数量是 1，因为监视器是互斥锁（意味着一次只有一个线程可以拥有一个监视器）。

*   持有一种资源并请求另一种资源的能力。在 C# 中，这类似于锁定一个对象，然后在释放第一个锁定之前锁定另一个对象，例如：

```
lock(a)
{
...
    lock(b)
    {
            ...
    }
} 
```

*   没有抢占能力。在 C# 中，这意味着一个线程不能强制另一个线程释放锁。

*   循环等待条件。这意味着存在一个线程循环，每个线程都在等待下一个释放资源才能继续。

他继续解释说，避免死锁的方法是避免（或阻止）条件四。

> [Joe Duffy 讨论了几种](http://msdn.microsoft.com/msdnmag/issues/06/04/Deadlocks) 避免和检测死锁的技术，包括一种称为锁平衡的技术。在锁平衡中，锁被分配了数值，并且线程必须只获取比它们已经获取的锁具有更高数字的锁。这防止了循环的可能性。在当今的典型软件应用程序中，通常也很难做好，并且未能在每次锁定获取时遵循锁定平衡会导致死锁。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2009-02-09T14:25:31.193

经典的死锁场景是 A 持有锁 X 并想要获取锁 Y，而 B 持有锁 Y 并想要获取锁 X。由于双方都无法完成他们尝试做的事情，因此双方最终都会永远等待（除非超时）用过的）。

在这种情况下，如果 A 和 B 以相同的顺序获取锁，则可以避免死锁。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-02-09T14:35:53.243

确保所有事务以相同的顺序影响表是避免最常见死锁的关键。

例如：

**交易A**

```
UPDATE Table A SET Foo = 'Bar'
UPDATE Table B SET Bar = 'Foo' 
```

**交易 B**

```
UPDATE Table B SET Bar = 'Foo'
UPDATE Table A SET Foo = 'Bar' 
```

这极有可能导致死锁，因为**事务 A**在表 A 上获得了锁，**事务 B**在表 B 上获得了锁，因此在另一个命令完成之前，他们都没有获得第二个命令的锁。

所有其他形式的死锁通常是由高强度使用和 SQL Server 在内部分配资源时死锁引起的。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2009-02-09T14:40:47.010

据我所知，没有死锁模式（以及 12 年编写大量多线程交易应用程序）。但是 TimedLock 类在发现代码中存在的死锁方面有很大帮助，而无需大量返工。

[http://www.randomtree.org/eric/techblog/archives/2004/10/multithreading_is_hard.html](http://www.randomtree.org/eric/techblog/archives/2004/10/multithreading_is_hard.html)

基本上，（在 dotnet/c# 中）你用“使用 TimedLock.Lock(xxx)”搜索/替换所有“lock(xxx)”语句

如果检测到死锁（在指定的超时时间内无法获得锁，默认为 10 秒），则抛出异常。我的本地版本也立即记录堆栈跟踪。走上堆栈跟踪（最好使用行号调试构建），您将立即看到在故障点持有哪些锁，以及它试图获取哪个锁。

在 dotnet 1.1 中，在所描述的死锁情况下，幸运的是，所有被锁定的线程都会同时抛出异常。所以你会得到 2+ 堆栈跟踪，以及解决问题所需的所有信息。（2.0+ 可能已经在内部改变了线程模型，以至于没有这么幸运，我不确定）

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-02-09T14:23:49.357

是的 - 当进程尝试以随机顺序获取资源时会发生死锁。如果您的所有进程都试图以相同的顺序获取相同的资源，那么即使没有消除死锁的可能性也会大大降低。

当然，这并不总是那么容易安排...

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-06-22T14:54:41.007

我推荐阅读[Herb Sutter](http://www.ddj.com/cpp/209900973)的这篇文章。[它解释了死锁问题背后的原因，并在本文](http://www.ddj.com/hpc-high-performance-computing/204801163)中提出了一个框架来解决这个问题。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-02-09T14:22:31.110

典型的场景是不匹配的更新计划（表并不总是以相同的顺序更新）。然而，在高处理量下发生死锁并不罕见。

我倾向于接受死锁作为生活中的事实，它总有一天会发生，所以我让我的 DAL 准备好处理并重试死锁操作。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-02-09T14:42:22.560

最常见的（根据我的不科学观察）数据库死锁场景非常简单：

*   两个进程读取某些内容（例如 DB 记录），都在关联资源（通常是 DB 页）上获取共享锁，
*   两者都试图进行更新，试图将他们的锁升级为独占锁——瞧，死锁。

如果要在读取之后进行更新，则可以通过指定“FOR UPDATE”子句（或类似的，取决于您的特定 RDBMS）来避免这种情况。这样，进程从一开始就获得了排他锁，使得上述情况变得不可能。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2011-11-12T12:55:08.457

当两个进程都在等待另一个进程完成之前发生的情况。结果是两个进程都挂起。它最常见的多任务处理和 clint/server。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-11-08T02:43:24.430

死锁主要发生在存在多个依赖锁时。在一个线程和另一个线程试图以相反的顺序锁定互斥锁时发生。应该注意使用互斥锁以避免死锁。

务必在解除锁定后完成操作。如果你有多个锁，比如访问顺序是ABC，释放顺序也应该是ABC。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-02-12T16:55:00.020

在我的上一个项目中，我遇到了 sql Server 数据库中的死锁问题。找到原因的问题是，我的软件和第三方软件正在使用同一个数据库并且在同一个表上工作。很难找出导致死锁的原因。我最终编写了一个 sql-query 来找出哪些进程以及哪些 sql-Statements 导致了死锁。您可以在此处找到该语句：[SQL-Server 上的死锁](http://www.reimelt.net/Tipps.aspx)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-11-09T13:47:36.163

为了避免死锁，有一种称为[银行家算法的算法](https://en.wikipedia.org/wiki/Banker%27s_algorithm)。

这也提供了有用的信息[，以避免死锁。](https://docs.oracle.com/cd/E19455-01/806-5257/6je9h0347/index.html)

# oop - 是否有 OOP 的卡通指南？

> ID：528311
> 
> 赞同：4
> 
> 时间：2009-02-09T14:22:46.193
> 
> 标签：oop, drawing

我正在为演示文稿寻找一些视觉效果，以简单易懂的方式说明 oop 的原理。

我想避免说“**对象是相关状态和行为的软件包**”之类的东西。

有没有人看过 OOP 的非行话-y 插图指南？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-09T14:28:40.877

O'Reilly 的书[Head First Object-Oriented Analysis and Design](https://rads.stackoverflow.com/amzn/click/com/0596008678)可以满足您的需求

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-09T14:26:12.240

Grady Booch 的《[Object Oriented Analysis & Design with Applications](https://rads.stackoverflow.com/amzn/click/com/0805353402) 》一书中的插图非常好，而且非常有趣！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-09T14:29:04.307

好吧，我只是将汽车视为 OO 设计的一个例子。有一个固定的接口：油门、刹车、离合器、方向盘、档位、灯、指示灯等。底层“对象”也有不同的实现：汽油、混合动力、电动。继承——手动变速箱继承自自动变速箱，但增加了变速杆和离合器。

# java - 在 Java 中使用命名空间创建 XML 文档

> ID：528312
> 
> 赞同：18
> 
> 时间：2009-02-09T14:22:47.927
> 
> 标签：java, xml, namespaces, xmldocument, xom

我正在寻找可以构造使用名称空间的 XML 文档的示例 Java 代码。我似乎无法使用我[最喜欢的普通工具](http://www.google.com)找到任何东西，所以希望有人能够帮助我。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-02-09T15:05:39.990

有很多方法可以做到这一点。举几个例子：

# 使用[XOM](http://www.xom.nu/tutorial.xhtml)

```
import nu.xom.Document;
import nu.xom.Element;

public class XomTest {

    public static void main(String[] args) {
        XomTest xomTest = new XomTest();
        xomTest.testXmlDocumentWithNamespaces();
    }

    private void testXmlDocumentWithNamespaces() {
        Element root = new Element("my:example", "urn:example.namespace");
        Document document = new Document(root);
        Element element = new Element("element", "http://another.namespace");
        root.appendChild(element);
        System.out.print(document.toXML());
    }
} 
```

# 使用[W3C DOM的 Java 实现](http://www.w3.org/DOM/DOMTR)

```
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;

import org.w3c.dom.DOMImplementation;
import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.ls.DOMImplementationLS;
import org.w3c.dom.ls.LSOutput;
import org.w3c.dom.ls.LSSerializer;

public class DomTest {

    private static DocumentBuilderFactory dbf = DocumentBuilderFactory
            .newInstance();

    public static void main(String[] args) throws Exception {
        DomTest domTest = new DomTest();
        domTest.testXmlDocumentWithNamespaces();
    }

    public void testXmlDocumentWithNamespaces() throws Exception {
        DocumentBuilder db = dbf.newDocumentBuilder();
        DOMImplementation domImpl = db.getDOMImplementation();
        Document document = buildExampleDocumentWithNamespaces(domImpl);
        serialize(domImpl, document);
    }

    private Document buildExampleDocumentWithNamespaces(
            DOMImplementation domImpl) {
        Document document = domImpl.createDocument("urn:example.namespace",
                "my:example", null);
        Element element = document.createElementNS("http://another.namespace",
                "element");
        document.getDocumentElement().appendChild(element);
        return document;
    }

    private void serialize(DOMImplementation domImpl, Document document) {
        DOMImplementationLS ls = (DOMImplementationLS) domImpl;
        LSSerializer lss = ls.createLSSerializer();
        LSOutput lso = ls.createLSOutput();
        lso.setByteStream(System.out);
        lss.write(document, lso);
    }
} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2009-02-09T15:04:04.503

我不确定您要做什么，但是我的大多数 xml 问题都使用[jdom](http://www.jdom.org/)并且它支持名称空间（当然）。

编码：

```
Document doc = new Document();
Namespace sNS = Namespace.getNamespace("someNS", "someNamespace");
Element element = new Element("SomeElement", sNS);
element.setAttribute("someKey", "someValue", Namespace.getNamespace("someONS", "someOtherNamespace"));
Element element2 = new Element("SomeElement", Namespace.getNamespace("someNS", "someNamespace"));
element2.setAttribute("someKey", "someValue", sNS);
element.addContent(element2);
doc.addContent(element); 
```

生成以下 xml：

```
<?xml version="1.0" encoding="UTF-8"?>
 <someNS:SomeElement xmlns:someNS="someNamespace" xmlns:someONS="someOtherNamespace"  someONS:someKey="someValue">
  <someNS:SomeElement someNS:someKey="someValue" />
 </someNS:SomeElement> 
```

其中应该包含您需要的一切。希望有帮助。

# javafx - 在 JavaFX 中强制立即绘制

> ID：528313
> 
> 赞同：7
> 
> 时间：2009-02-09T14:22:50.063
> 
> 标签：javafx

有没有办法强制 JavaFX 应用程序在继续之前重新绘制自己？类似于 Swing Panel 的 paint(Graphic g) 方法（我可能在那里弄​​错了关键字）。

考虑以下示例：您编写了一个井字游戏应用程序以及计算机播放器所需的 AI。您希望能够展示两个电脑玩家对决的能力。也许您在计算机转动之间暂停两秒钟，以赋予它栩栩如生的效果。当您点击“开始”按钮时，会出现很大的无响应暂停（9 圈经过的时间以及计算机“决定”的假暂停），然后应用程序的视觉效果突然更新为已完成游戏的状态。

一旦应用程序线程中的处理完成，JavaFX 似乎会重新绘制？我不完全确定这里。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-09T15:25:40.067

你说的对。JavaFX 是事件驱动和单线程的。这意味着重绘和事件响应不能同时进行。长时间运行的任务应该在单独的线程上执行，这样它们就不会阻塞 UI 的渲染，当任务完成时，它可以通过调用 FX.deferAction() 同步回 FX 线程，这将简单地执行主线程上的代码线。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-09T22:40:35.280

这不会是最有帮助的答案，因为我已经玩了半天 JavaFX，但是您不会使用时间轴、关键帧和绑定来完成重绘，而不是像您描述的那样明确调用它们吗？

[有关示例，](http://java.sun.com/javafx/1/tutorials/ui/animation/index.html)请参阅本教程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-10T22:33:35.160

JavaFX 的模型是将您与屏幕上的“东西”的绘画区分开来。这非常强大，但与您可能熟悉的方式有所不同。

鲸鱼是正确的，在 JavaFX 中执行此操作的适当方法是制作一个时间线，其中移动每 X 秒完成一次，并将在该关键帧处绘制。

如果您对如何执行此操作有疑问，请尝试并使用一些代码提出新问题。

# eclipse - 将文件提交到 SVN 存储库时出现问题

> ID：528327
> 
> 赞同：29
> 
> 时间：2009-02-09T14:26:45.420
> 
> 标签：eclipse, svn, commit, subversive

我在项目的根目录中有一个 maven pom 构建文件。当尝试从 Eclipse (Europa) 与 SVN 存储库同步时，红色的双箭头被添加到文件图标中。这意味着自上次同步以来，我的本地副本和存储库中的副本都已更改。

当我尝试执行“覆盖并更新...”时，会抛出错误消息：

```
Some resources were not reverted.
Attempted to lock an already-locked dir
svn: Working copy 'C:\Java\workspaces\pro\myProject-TRUNK' locked 
```

您知道在这种情况下应该做什么吗？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2009-02-09T14:31:37.577

svn清理？

不知道你会如何从 eclipse 中做到这一点......但如果它是一个标准的 svn 工作副本，你应该仍然可以使用另一个工具来做到这一点。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-09-26T07:39:31.157

在 Eclipse 中，做 SVN 清理

右键单击锁定项目 -> 团队 -> 清理

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-31T05:06:42.347

如果 Team->Cleanup 在 subeclipse 中对您不可用，则从目录中删除 .loc 和 .log 文件，并更新资源，以便更早地为您提供错误消息。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-02-09T14:37:50.870

看起来存储库有点机密！您可以在项目目录中尝试“svn cleanup”。

您可以在命令行上执行此操作，也可以使用其他工具...

在命令提示符下，您必须安装 subversion 并在 PATH 上。关闭 Eclipse，打开命令提示符并 cd 到项目的根目录，然后键入“svn cleanup”。

您也可以使用[Tortoise SVN](http://tortoisesvn.net/)从 Windows 资源管理器中执行相同的操作。安装 Tortoise SVN 并关闭 Eclipse。在 Windows 资源管理器中，导航到项目目录的父级，右键单击项目文件夹并选择“Tortoise SVN”->“清理”

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-10-19T07:37:06.970

当您将目录粘贴到项目中的另一个目录时，通常会发生这种情况。

您必须手动创建目录，然后粘贴所有文件。

要解决问题：

*   右键单击项目（或父目录）
*   然后**组队**
*   然后**清理**

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2011-10-12T06:11:11.877

如果我们在提交更改时有一些待处理的会话，就会发生这种情况，因此我们需要在再次尝试提交更改之前进行一些清理。这是如何做到的。

1.  点击团队->清理
2.  再次尝试提交..

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-04-29T11:56:50.550

它对我有用。

添加svn应用

```
sudo apt-get install svn
cd <folder-project-name>
svn cleanup 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2015-08-31T05:41:13.140

重新启动你的 Eclipse (IDE)。问题解决了。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-04-15T21:38:11.970

我去了本地 svn 文件夹并删除了日志文件和锁定文件，从 eclipse 中更新了 svn，一切都回到了正轨

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-01-20T11:56:15.333

右键单击项目-->团队-->刷新/清理

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-03-01T07:07:29.830

右键单击并选择团队->刷新/清理

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-06-15T20:47:53.693

我在大多数答案中看到 Team -> Cleanup - 不知何故对我不起作用。

我这样做了-对我来说发生了两次。

一旦我像这样解决了 - 我用我的更改制作了一个备份文件。我关闭了我的eclipse->进入Windows资源管理器中的项目->转到冲突文件->右键单击-> SVN->还原。现在我开始 eclipse -> 放回我的更改并且它起作用了。

第二次发生 - 这没有帮助。所以，我不得不在我的 Eclipse 工作区中删除该项目，并从 SVN 中签出该项目并且它工作正常。

-希望能帮助到你。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2017-03-21T09:18:28.947

使用 TortoiseSVN -> 释放锁 -> 打破锁

# vim - VIM 改变了我的行为 - 跳到行：坏了

> ID：528332
> 
> 赞同：2
> 
> 时间：2009-02-09T14:28:38.927
> 
> 标签：vim

在我的vim*的*最后 20 分钟左右发生了一些事情。我一定是碰到*了什么东西*，但我想不通，没有什么能让它恢复到“真实”的行为。

我一直使用 : 跳转到行号。现在，当我点击 : 然后是一个数字 - (1-9) 时，vim 会进入“插入”模式并插入一个字母。（1=q、2=r、3=s、4=t、5=w 等）

试图四处寻找这个比大海捞针更糟糕！

关于我启用了哪种秘密“模式”的任何想法？更好的是，我如何才能恢复正常？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-09T14:32:27.903

不确定您在那里做了什么，但您也可以通过输入行号然后点击`G`( `Shift`+ `g`) 来跳转到特定的行号。

`Shift`+`g`本身会将您带到文件的最后一行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-09T14:39:44.360

它可能是你的 shell 而不是 VIM。如果重新启动 VIM 不能解决您的问题，请尝试打开一个新的 shell 并在那里使用 VIM。如果没有任何效果，请将您的 .vimrc 文件和任何 shell 启动移开（当然是通过重命名，而不是删除），打开一个新的 shell 和 VIM。如果这不起作用，请尝试使用新键盘。:-(

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-09T14:36:34.727

关闭和打开 vim 应该重置您发现的任何时髦模式。如果没有，那么你就会发生一些非常奇怪的事情——vim 不会存储在文件中打开的设置。

顺便说一句，你完全毁了我的“vim 不会破坏”模因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-09T14:49:49.203

好吧，我不知道它是什么，但重新启动计算机 - Macbook 运行豹 - 似乎工作。

我试过新的shell没有效果。我只是不想重新启动。

看 - mac 也有问题！:(

感谢大家的快速回复。希望我不必再想出那个。

# sql-server-express - 我可以免费获得 sql2008 的 sql profiler 吗？

> ID：528334
> 
> 赞同：16
> 
> 时间：2009-02-09T14:28:43.310
> 
> 标签：sql-server-express, profiler, sql-server-2008-express

是否可以免费获得 sql2008 的 sql profiler 或者您必须拥有许可证才能获得它？

即它不适用于 sql express

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-20T14:24:52.150

您可以使用 SQL 的 Developer 版本获取 SQL Profiler。
但是之前怎么写三个答案：

> SQL Profiler 只是所有 SQL 版本中的 TRACE 功能之上的一个 GUI。

所以这个[ExpressProfiler](http://expressprofiler.codeplex.com/downloads/get/478141)是一个免费的实用程序。
阿尔贝托

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-02-09T14:34:39.503

第一的。**SQL Profiler 可以与 SQL Express 一起使用**。第二。您可以使用 SQL 的 Developer 版本获取 SQL Profiler，该版本包含在所有 MSDN 许可证中。但是，您将无法像使用 SSMS 一样使用 SQL Express 免费获得它。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-02-09T14:56:16.643

SQL Profiler 只是所有 SQL 版本中的 TRACE 功能之上的一个 GUI。

[http://sqlprofiler.googlepages.com/](http://sqlprofiler.googlepages.com/)是一个利用这一点的免费实用程序。可能所有你需要的。

免费注册网址下载：[http ://code.google.com/p/sqlexpressprofiler/](http://code.google.com/p/sqlexpressprofiler/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-25T15:30:48.393

自从我一直在寻找相同的答案以来，我一直将其发布到一些较旧的帖子中。只是觉得如果这里有一些更新的答案会很好，希望它们仍然可以为人们节省一些时间。

ExpressProfiler 很好，我确实尝试过，但发现它对我的目的来说有点太简单了。我最近发现了这篇文章[http://www.codeproject.com/Articles/784905/Real-time-Tracing-With-SQL-Server-Express](http://www.codeproject.com/Articles/784905/Real-time-Tracing-With-SQL-Server-Express)，它有相当完整的可下载演示 UI。它更具可配置性，并具有一些方便的功能，例如能够定义无限的跟踪，这些跟踪将保留所有跟踪选项以及列顺序。您可以按列和分组行数据排序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-09T14:36:58.780

[SQL Express 2008 Management Studio](http://www.microsoft.com/downloads/details.aspx?familyid=7522A683-4CB2-454E-B908-E805E9BD4E28&displaylang=en)不附带 Profiler，因此您必须获得 Workgroup/Standard/Enterprise 版本的许可证。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-09T14:54:18.113

SQL Server 2008 Developer Edition 不是免费的，但在 NewEgg（或其他任何地方）大约 50 美元：

[新蛋网产品链接](http://www.newegg.com/Product/Product.aspx?Item=N82E16832116925&Tpk=sql%20server%20developer%20edition)

开发人员版基本上是企业的重新命名的非生产版本，因此它具有企业的所有功能，包括 Profiler。这与您将获得的几乎免费一样，因为 Profiler 不包含在任何 Express 产品中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-04T15:55:41.503

我刚刚试用了上面提到的实用程序：http: [//sqlprofiler.googlepages.com/](http://sqlprofiler.googlepages.com/)。（新链接在[这里](http://www.datawizard.com/)）。它让我得到了服务器的查询文本，这是我当时需要的。5美元，到目前为止你不会出错。唯一让我担心的事情（我对此不是 100% 确定）是他们看起来希望你每年订阅一次，而 5 美元看起来像是某种介绍性的特别优惠。对于一个我很少使用的工具，我宁愿花 30 美元就可以完成它。

# apache-flex - 在 AVM2 中子类化私有（支持）类

> ID：528340
> 
> 赞同：7
> 
> 时间：2009-02-09T14:31:14.410
> 
> 标签：apache-flex, avm2

我正在为 Flex/AS3 开发一个动态模拟框架，并且在私有/支持类型（即在类文件中的包 {} 之外声明的类型）遇到问题。

在我的 ABC“文件”中，我使用 PROTECTED_NAMESPACE 类标志和 PRIVATE_NS 多名称声明实例。我还尝试赋予它与它所继承的类相同的命名空间（例如 PRIVATE_NS("ContainerClass.as$123")）。

不管我做什么，在loadBytes之后我总是得到以下错误：

> VerifyError：错误 #1014：找不到类 ContainerClass.as$123::PrivateClass。

我已经尝试将生成的字节码加载到与私有类相同的 ApplicationDomain 中（默认情况下我使用子域）。我什至尝试在加载之前注册一个类别名（尽管这有点牵强）。

我忘记了什么还是仅仅是 AVM 的限制？

**请注意，我完全知道这在 ActionScript 3.0 中是非法的，我正在寻找这在 AVM 中是否真的可行。**

**编辑：**对于迄今为止对这项工作感兴趣的人，该项目是[asmock](http://asmock.sourceforge.net/)并且在 sourceforge 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-09T15:01:13.747

我不是 ABC 文件的专家，但我认为这在 AVM2 中是不可能的。不久前我用[AS3 Eval lib](http://eval.hurlant.com/)做了几次测试，但都失败了。

与动态模拟相关，我在 Adob​​e bugbase 中提交了一个问题，要求提供动态代理机制：[http ://bugs.adobe.com/jira/browse/ASC-3136](http://bugs.adobe.com/jira/browse/ASC-3136)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-09T07:18:52.340

我不确定 PRIVATE_NS("ContainerClass.as$123") 是什么意思，我对 avm2overview.pdf 4.4.1 的解读是私有命名空间不允许有名称，因此“<class name>$<为方便起见，会在调试输出中生成 number>" 命名空间。我认为这意味着您必须将您的 abc 破解到源 swf 中的相同 abc 标记中才能访问命名空间常量索引（这对我来说听起来太辛苦了！）

不过，我实际上并没有设法生成加载 swf，因此请谨慎对待。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-10-22T16:26:20.960

回过头来看这个问题，我可以肯定地回答这个问题：**私有类只能从加载它们的 LoaderContext 中引用**

我已经能够通过在加载的 ABC '文件'中复制接口来添加对私有*接口*的支持，但它不能被强制/强制转换回原始私有接口。

这对我的要求仍然有用，因为可以使用私有接口来组合多个接口。

# documentation - 寻找 wiki 风格的独立版本控制“安全”文档包

> ID：528341
> 
> 赞同：19
> 
> 时间：2009-02-09T14:31:17.187
> 
> 标签：documentation, wiki, dvcs

我和我的团队发现用 wiki 记录我们的项目（一个带有 API 的开发平台）对我们和用户都很有用。由于一些组织问题，我们被迫在没有网络连接的情况下进行多站点开发。我们已经切换到 DVCS (Mercurial) 并且在这方面取得了巨大的成功。wiki 文档被证明是一个问题，因为中央站点是使用 MediaWiki 设置的。异地人员无法访问或编辑 wiki。

是否有任何不需要服务器/数据库并且可以在 DVCS 环境中使用的 wiki 风格的包？

更新：应该是开源和跨平台的

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-02-09T14:38:22.117

我可以推荐[TiddlyWiki](http://www.tiddlywiki.com/)。它不需要任何网络服务器，只需要一个浏览器，将整个 Wiki 文档存储在一个 HTML 页面中。这可以通过 Mercurial 轻松共享。

*编辑：* [检查此页面](http://hg.opensource.lshift.net/synchrotron/raw-file/tip/tiddlywiki/tiddlydvcs.html)，它讨论了如何将 TiddlyWiki 与 DVCS 一起使用。它涉及使用名为 SynchroTiddly 的扩展。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-09T14:34:32.750

[DokuWiki](http://www.dokuwiki.org/)将所有数据存储在纯文本文件中。您可以为每个开发人员安装本地 Web 服务器，并使用您的 VC 系统在开发人员之间进行同步。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-02-12T21:41:43.967

ikiwiki：[http](http://ikiwiki.info/) ://ikiwiki.info/将信息直接存储在 VCS 中（它支持 mercurial 作为后端）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2010-05-11T10:18:01.273

[http://zim-wiki.org/](http://zim-wiki.org/)
这是一个桌面 wiki（所见即所得的编辑，虽然不是很复杂的格式），它将所有内容存储在纯文本文件中。这意味着您可以将文件保存在版本控制中，*并*拥有友好的编辑体验。

它甚至[内置了 Bazaar 支持](http://zim-wiki.org/manual/Plugins/Version_Control.html)更新：还有 Git、Mercurial 和 Fossil。

^([我知道，聚会迟到了-为阅读此问题的其他人而写作...])

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-02-09T15:06:25.917

也许您应该查看从源代码[自动生成文档](http://en.wikipedia.org/wiki/Comparison_of_documentation_generators)。这样，文档将自动受到版本控制。

许多生成器支持通过可以添加到存储库的纯文本文件添加其他文档。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-02-17T05:04:17.323

看看[Fossil](http://fossil-scm.org)，它是一个 DVCS，包含一个内置的 wiki 和错误跟踪系统。这可能正是您想要的。阅读网站，有一个内置的网络服务器。您可以使用 CGI 脚本打开与人的连接（化石网站是化石 DVCS）。在使用它之后，您可能会决定将您的代码也移到它上面。它是开源的，并且确实具有跨平台构建。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-09-04T17:06:31.810

最终使用 python、cherrpy 和 mercurial 编写了我自己的系统。也许有一天它会开源。感谢所有的建议。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2010-05-11T11:06:34.013

[http://hatta-wiki.org/](http://hatta-wiki.org/)是在 Mercurial 存储库上运行的 wiki。

有趣的是它如何处理冲突：同时编辑在提交时被静默合并，即使*与冲突标记发生冲突和提交*！没关系，因为：

*   是文字，不是软件
*   提交后立即看到编辑结果
*   它将冲突标记视为有效的 wiki 语法（导致 diff -u 像突出显示冲突）！

这种安排会促使您再次编辑以立即解决冲突 - 但不会强迫您这样做。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2011-11-28T18:47:12.010

Github 的[gollum](https://github.com/github/gollum#readme)是开源的，基于 git 的，吃很多流行的语法。但最重要的卖点当然是它内置在 github 中。

Bitbucket 也[有](http://confluence.atlassian.com/display/BITBUCKET/Using+your+Bitbucket+Wiki)一个基于 mercurial 的 wiki。虽然不确定代码是否是开源的（即您可以离线编辑文本，但不确定您是否可以看到它呈现）。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2011-05-09T14:35:53.807

MoinMoin 支持将您的页面存储在 Mercurial 存储库中：http: [//moinmo.in/Storage2009/HelpOnStorageConfiguration#Mercurial_Backend_.28hg.29](http://moinmo.in/Storage2009/HelpOnStorageConfiguration#Mercurial_Backend_.28hg.29)

这很有趣，因为 MoinMoin 已经存在了一段时间，得到了很好的支持，并且具有丰富的功能集（但这只是我的观点；不要相信我的话，自己看看 ;-)）。

# project-management - 开源项目管理/计费系统

> ID：528353
> 
> 赞同：1
> 
> 时间：2009-02-09T14:34:11.783
> 
> 标签：project-management

我正在寻找一个开源（或至少免费）项目管理/计费系统，没有什么特别花哨的，但最低要求如下：

1.  自由。
2.  允许我添加多个客户端。
3.  允许我跟踪客户付款（这里超级基本，我有一个负责主要工作的会计师）并发送自动付款提醒。
4.  自由

它不一定是开源的，但这总是一个优点，所以我可以添加我决定需要的任何其他功能。

需要在windows上运行。（虽然服务器可以是 windows（不是 iis）/*nix）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-09T15:05:38.820

它可能不存在（不是作为一种产品）。如果我正在建造它们，我会将两者分开。如果它对计费有利，那么它可能对 PM 不利。如果它对 PM 有利，那么它可能对计费不利。

对于帐单，花费 150.00 美元并购买 QuickBooks。对于 PM 方面，这实际上取决于您认为项目管理是什么。您总是可以使用 Gforge 之类的东西，或者是那里的许多错误跟踪器之一来跟踪任务。剩下的就是计划和估算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-08-31T16:49:03.263

对于计费，您可以在[http://jbilling.com/](http://jbilling.com/)上查看 JBilling 。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-02-09T14:44:30.743

试试[Open Office .Org 的](http://why.openoffice.org/why_oem.html)Calc (Excel) 程序。

# .net - 如何签署由 ILMerge 操作生成的程序集？

> ID：528355
> 
> 赞同：6
> 
> 时间：2009-02-09T14:34:31.190
> 
> 标签：.net, signing, strongname, ilmerge

我设法使用 ILMerge 将项目中的所有程序集合并到一个程序集中，但问题是似乎没有办法对合并的程序集进行签名。

是否有某种可以运行的命令行选项或命令让我向 ILMerge 生成的合并程序集添加一个强名称？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-19T13:33:48.837

合并... /keyfile:key.snk

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-09T14:37:30.853

您需要使用以下命令行进行签名：

```
al /out:MyAssembly.dll MyModule.netmodule /keyfile:sgKey.snk 
```

如果您想了解更多信息，请访问：http: [//msdn.microsoft.com/en-us/library/xc31ft41.aspx](http://msdn.microsoft.com/en-us/library/xc31ft41.aspx)

# qt - 如何告诉 Qt 始终在 QTableView 中显示编辑器？

> ID：528366
> 
> 赞同：11
> 
> 时间：2009-02-09T14:36:12.963
> 
> 标签：qt, qtableview, qitemdelegate

我有一个 QTableView，我想始终在编辑模式下显示最后一列。（这是一个 QComboBox，用户应该能够始终更改值。）

我想我已经在[Qt 文档](http://doc.trolltech.com/4.4/qtableview.html)中看到了解决方案，但我再也找不到了。有没有简单的方法呢？

我想我可以通过使用[`openPersistentEditor()`](http://doc.trolltech.com/4.4/qabstractitemview.html#openPersistentEditor)每个单元格来存档这种效果，但我正在寻找更好的方法。（就像为整列只指定一次一样。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-19T10:10:15.087

有两种可能：

使用[`setIndexWidget`](http://qt-project.org/doc/qt-4.8/qabstractitemview.html#setIndexWidget)，但奇趣科技写道：

> 此功能仅应用于显示与数据项对应的可见区域内的静态内容。如果要显示自定义动态内容或实现自定义编辑器小部件，请改为子类 QItemDelegate。

（它打破了模型/视图模式……）

或者使用[委托的`paint`方法](http://qt-project.org/doc/qt-4.8/qitemdelegate.html#paint)。但是在这里你必须自己实现所有东西，比如启用/禁用元素。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-23T01:21:10.773

获得自动编辑行为的一种方法是使用 QAbstractItemView::AllEditTriggers 值调用视图的 setEditTriggers() 函数。

要以某种方式显示给定列的内容，请查看 QAbstractItemView::setItemDelegateForColumn()。这将允许您为那些需要它的项目指定一个自定义委托。但是，它不会自动为每个项目创建一个编辑器小部件（原则上可能有数千个），但您可以使用委托以使其看起来像一个编辑器小部件的方式呈现每个项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-09T16:48:44.970

[调用QAbstractItemModel](http://doc.trolltech.com/4.4/qabstractitemmodel.html) :: [flags](http://doc.trolltech.com/4.4/qabstractitemmodel.html#flags)虚函数来测试项目是否可编辑（参见Qt [::ItemIsEditable](http://doc.trolltech.com/4.4/qt.html#ItemFlag-enum)）。查看[模型/视图编程](http://doc.trolltech.com/4.4/model-view-programming.html)文档中的[使模型可编辑。](http://doc.trolltech.com/4.4/model-view-creating-models.html#making-the-model-editable)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-11T14:27:06.580

我看不到一个简单的方法来做到这一点，但你也许可以通过使用委托来管理。老实说，我不知道它是如何工作的，但如果你足够努力，你应该能够得到一些工作。如果你有一个合适的委托，你应该能够将它设置在整个视图、视图的一个单元格，或者只是一列或一行。

# hibernate - HQL 在有序查询结果中返回对象的索引？

> ID：528367
> 
> 赞同：0
> 
> 时间：2009-02-09T14:36:24.477
> 
> 标签：hibernate, hql

我可以使用 HQL 来获取*有序*查询结果的索引吗？

我知道这样做的唯一方法是从数据库中取回所有结果，然后遍历所有结果。

例如，给定：

```
<hibernate-mapping>
<class name="Dog" table="DOG">

    <id name="id" type="int" column="DOG_id">
        <meta attribute="scope-set">protected</meta>
        <generator class="native"/>
    </id>

    <property name="age" type="int" />

    <property name="name" type="string" />
</class>    
</hibernate-mapping> 
```

那么这些类型的查询：

```
//determine where dog with id 43 is in the current search results for dogs ordered by age
Query dogQuery = sess.createQuery("select d.id from Dog as d order by d.age");
List<Dog> dogList = dogQuery.list();
int idx = dogList.indexOf( 43 ); 
```

或者，通过狗列表进行更精细的搜索：

```
Query dogQuery = sess.createQuery("select d.id from Dog as d where (d.name='fluffy' OR d.age >= 3) order by d.age");
List<Dog> dogList = dogQuery.list();
int idx = dogList.indexOf( 43 ); 
```

这里的缺点是我们将每个 dog.id 加载到内存中。

*我需要这个的场景：*

*   将特定查询结果（数千个）显示为一行上的一个点。线和点每分钟左右更新一次。这种可视化提供了搜索查询排名的“实时”更新

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-13T06:46:56.120

使用 List.indexOf() 如果列表特别大，则使列表“特别懒惰”。

但是为什么需要索引呢？也许你真的没有（因此你不需要解决这个问题）

* * *

修改后的答案：

你做的完全错了。所有你需要的是 ：

从狗 d、狗 d1 中选择计数（*），其中 d.age <= d1.age 和 d1.id = :entityId 和 d1.id <> d.id

* * *

为什么会这样：此查询查找与所讨论的狗 (d1) 年龄相同或年轻但*不是*d1 的每只狗。（但实际上并没有归还所有这些狗——因为我们不关心它们）。

计数告诉您“在”d1 之前的狗数量。因此，您可以知道 d1 在完整的狗列表中的位置。由于您不需要知道列表中所有狗的位置，因此您不需要检索所有狗。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-09T14:42:53.837

在 java 列表中，您可以调用 indexOf(Object)。

参见API[列表](https://docs.oracle.com/javase/1.5.0/docs/api/java/util/List.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-10T21:51:53.167

将整个结果列表加载到内存中，然后使用应用程序逻辑来过滤您需要的内容，这是与数据库交互的**错误**方式。

**首先使用 SQL WHERE 和 HAVING 子句从数据库中**获取您需要的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-10T23:50:51.990

从这个 HQL 开始（在这种情况下也是有效的 SQL）：

```
select dog.id as dogId from canines dog order by dog.codename asc 
```

它可以稍加修改并插入到有效的 SQL 查询中（仅适用于具有 rownum 列的 Oracle）：

```
select rn from 
( select dogid dogId, rownum rn from canines dog order by dogname asc)
where dogid=206 
```

不幸的是，这不是有效的 HQL...

为了使用我的初始 HQL 查询来获取与该 SQL 查询相同的信息，我计划：

*   让休眠将我的 HQL 查询生成到它用来制作所有结果列表的 SQL 中（希望不要先运行查询）
*   使用 sessionObj.createSQLQuery 将此休眠生成的 SQL 插入到新的 SQL 查询中。这个新查询看起来像上面的工作 sql。

这是一个疯狂的解决方案吗？

--

*笔记*

[SQL返回特定行的rownum？（使用 Oracle 数据库）](https://stackoverflow.com/questions/534217/sql-to-return-the-rownum-of-a-specific-row-using-oracle-db)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-13T17:55:06.000

您应该能够使用诸如 Hibernates Criteria 对象之类的东西来仅返回查询的一小部分。

我的猜测是您正在尝试实现分页。

```
Criteria criteria=session.createCriteria(Item.class);
criteria.addOrder(Order.asc("name"));
criteria.setFirstResult(100);
criteria.setMaxResults(50);
List pageResults=criteria.list(); 
```

以上代码摘自：http: [//forum.springframework.org/archive/index.php/t-9658.html](http://forum.springframework.org/archive/index.php/t-9658.html)

这也适用于始终更新的目录，因为您应该在每个页面请求上进行此查询。

# c# - DateTime.Compare 如何检查日期是否小于 30 天？

> ID：528368
> 
> 赞同：89
> 
> 时间：2009-02-09T14:36:33.120
> 
> 标签：c#, .net, datetime

我正在尝试确定帐户是否在 30 天内到期。我是否正确使用 DateTime 比较？

```
if (DateTime.Compare(expiryDate, now) < 30)

{
     matchFound = true;
} 
```

* * *

## 回答 #1

> 赞同：250
> 
> 时间：2009-02-09T14:39:09.867

> 我是否正确使用 DateTime 比较？

No.`Compare`仅提供有关两个日期的相对位置的信息：小于、等于或大于。你想要的是这样的：

```
if ((expiryDate - DateTime.Now).TotalDays < 30)
    matchFound = true; 
```

这减去了两个`DateTime`s。结果是一个[`TimeSpan`](http://msdn.microsoft.com/en-us/library/system.timespan(VS.80).aspx)具有`TotalDays`属性的对象。

此外，条件可以直接写成：

```
matchFound = (expiryDate - DateTime.Now).TotalDays < 30; 
```

不需要`if`。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2010-05-25T06:40:28.873

应该

```
matchFound = (expiryDate - DateTime.Now).TotalDays < 30; 
```

注意总天数，否则你会得到奇怪的行为

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-02-09T14:45:39.057

好吧，我会这样做：

```
TimeSpan diff = expiryDate - DateTime.Today;
if (diff.Days > 30) 
   matchFound = true; 
```

比较只响应一个整数，表示第一个天气更早、相同或更晚......

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-02-09T14:40:13.860

试试这个

```
if ( (expiryDate - DateTime.Now ).TotalDays < 30 ) { 
  matchFound = true;
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-02-09T14:44:58.950

对于大于、等于、小于，比较分别返回 1、0、-1。

你要：

```
 if (DateTime.Compare(expiryDate, DateTime.Now.AddDays(30)) <= 0) 
    { 
        bool matchFound = true;
    } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2011-05-03T07:13:52.233

这将为您提供准确的结果：

```
if ((expiryDate.Date - DateTime.Now.Date).Days < 30)
    matchFound = true; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-02-18T01:54:01.483

假设您要分配`false`（如果适用）到`matchtime`，则更简单的编写方式是..

```
matchtime = ((expiryDate - DateTime.Now).TotalDays < 30); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-02-09T14:39:09.197

不，Compare 函数将返回 1、0 或 -1。0 当两个值相等时，-1 和 1 表示小于和大于，我相信这个顺序，但我经常混淆它们。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-02-09T14:40:11.613

不，您没有正确使用它。

有关详细信息，请参见[此处](http://msdn.microsoft.com/en-us/library/system.datetime.compare.aspx)。

```
DateTime t1 = new DateTime(100);
DateTime t2 = new DateTime(20);

if (DateTime.Compare(t1, t2) >  0) Console.WriteLine("t1 > t2"); 
if (DateTime.Compare(t1, t2) == 0) Console.WriteLine("t1 == t2"); 
if (DateTime.Compare(t1, t2) <  0) Console.WriteLine("t1 < t2"); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-02-09T14:41:09.020

您要做的是减去两个 DateTimes（expiryDate 和 DateTime.Now）。这将返回一个 TimeSpan 类型的对象。TimeSpan 有一个属性“天”。将该数字与 30 进行比较即可得出答案。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-02-09T14:41:10.563

不，这是不正确的，试试这个：

```
DateTime expiryDate = DateTime.Now.AddDays(-31);
if (DateTime.Compare(expiryDate, DateTime.Now.AddDays(-30)) < 1)
{
    matchFound = true;
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2011-09-07T10:26:23.867

**比较**是不必要的，**Days** / **TotalDays**是不必要的。

所有你需要的是

```
if (expireDate < DateTime.Now) {
    // has expired
} else {
    // not expired
} 
```

请注意，如果您决定使用几分钟或几个月甚至几年作为到期标准，这将起作用。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2011-11-14T15:21:36.093

实际上，这些答案都不适合我。我通过这样做解决了它：

```
 if ((expireDate.Date - DateTime.Now).Days > -30)
  {
    matchFound = true;
  } 
```

当我尝试这样做时：

```
matchFound = (expiryDate - DateTime.Now).Days < 30; 
```

今天，2011 年 11 月 14 日，我的到期日期是 2011 年 10 月 17 日，我得到了 matchFound = -28。而不是 28。所以我反转了最后一次检查。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2012-08-02T17:18:09.350

```
// this isn't set up for good processing.  
//I don't know what data set has the expiration 
//dates of your accounts.  I assume a list.
// matchfound is a single variablethat returns true if any 1 record is expired.

bool matchFound = false;
            DateTime dateOfExpiration = DateTime.Today.AddDays(-30);
            List<DateTime> accountExpireDates = new List<DateTime>();
            foreach (DateTime date in accountExpireDates)
            {
                if (DateTime.Compare(dateOfExpiration, date) != -1)
                {
                    matchFound = true;
            }
            } 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-09-30T11:38:59.893

您可以尝试这样做：

```
var daysPassed = (DateTime.UtcNow - expiryDate).Days;
if (daysPassed > 30)
{ 
    // ...
} 
```

# c# - 过度使用收益回报

> ID：528372
> 
> 赞同：6
> 
> 时间：2009-02-09T14:36:59.653
> 
> 标签：c#, yield

我没有太多使用 yield 关键字的经验。我有这些用于类型转换的 IEnumerable<T> 扩展。

我的问题是第一个重载方法是否具有与我从第二种方法获得的相同的收益返回效果？

```
public static IEnumerable<TTo> ConvertFrom<TTo, TFrom>(this IEnumerable<TFrom> toList)
{
    return ConvertFrom<TTo, TFrom>(toList, TypeDescriptor.GetConverter(typeof(TTo)));
}

public static IEnumerable<TTo> ConvertFrom<TTo, TFrom>(this IEnumerable<TFrom> toList, TypeConverter converter)
{
    foreach (var t in toList)
        yield return (TTo)converter.ConvertFrom(t);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-09T14:46:19.913

当你调用第一个重载时，它会立即调用第二个重载。这不会执行其主体中的任何代码，这些代码将被移动到实现迭代器块的嵌套类中。当`GetEnumerator()`和 then`MoveNext()`在返回时第一次被调用`IEnumerable<TTo>`，*那么*你的第二个重载中的代码将开始执行。

[我有一篇关于迭代器块实现](http://csharpindepth.com/Articles/Chapter6/IteratorBlockImplementation.aspx)的相当长的文章，您可能会觉得很有趣。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-09T14:42:01.250

是的，因为**yield return**只是在编译时生成一个 IEnumerator 类。 `yield return`只是编译器的魔法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-09T14:51:37.247

顺便说一句……大多数类型转换器仅适用于字符串。这里另一个有趣的选项可能是针对类型定义的静态转换运算符 - 我有一些在[MiscUtil](http://www.yoda.arachsys.com/csharp/miscutil/)中执行此操作的 .NET 3.5 代码- 请参阅[此处](http://www.yoda.arachsys.com/csharp/miscutil/usage/genericoperators.html)`Convert`提到的方法。

回复您的评论：

> 我使用此方法的方式是将 EF 对象转换为 WCF 的 DataContract 对象。所以 List(Hotels).ConvertTo(SerializableHotels, Hotels)()

听起来你应该*使用*序列化，或者如果属性名称有直接关系，可能类似于`PropertyCopy<To>.CopyFrom(from)`- 这又来自 MiscUtil （但这次是 Jon 的一些工作） - 即

```
public static IEnumerable<TTo> ConvertFrom<TTo, TFrom>(
    this IEnumerable<TFrom> list, TypeConverter converter)
{
    return list.Select(item => PropertyCopy<TTo>.CopyFrom<TFrom>(item);
} 
```

除此之外，您可能最好谈论 a`Conversion<,>`而不是 a `TypeConverter`。

# c# - 使用 Ajax 方法（怎么做）

> ID：528396
> 
> 赞同：0
> 
> 时间：2009-02-09T14:43:19.577
> 
> 标签：c#, asp.net, jquery, ajax

在 ASP.NET 中使用更新面板，并在 Matt Berseth 的 ListView 上的一个很好的教程的帮助下，我[完成](http://mattberseth.com/)[了](http://mattberseth.com/blog/2008/06/4_new_grouping_grid_skins_vist.html)下图。

[替代文字 http://www.balexandre.com/temp/StackOverflow_HowToStartUsingAJAX.png](http://www.balexandre.com/temp/StackOverflow_HowToStartUsingAJAX.png)

行为是，当我单击**粗体**名称时，该名称下方带有数字的行将折叠。

获取数据：

这是一个我无法更改的 SDK WebService，通过它我可以在一次调用中获得粗体名称，并为每个粗体名称获取可数行的列表，在此示例中，我必须调用 4 次 Web 服务

1 次呼叫为我提供所有粗体名称，然后每个粗体名称 1 次呼叫以获取辅助列表。

我的雇主告诉我不要这样做，而只有在用户单击粗体名称时才能获得第二行...

我现在该怎么办？我有点迷路了。:(

我知道“做什么”，但不知道“怎么做”

*   我在要使用 jQuery 替换的 HTML 中创建了一个新行
*   在 listView_ItemDataBound 方法中，我将 javascript 更改为具有该行 ID，以便更容易使用 javascript 函数

但是，**如何**在该特定行中显示“加载”图像并加载辅助列表？

（我已经有一个大的，用于在检索粗体名称列表时显示等待消息）

[替代文字 http://www.balexandre.com/temp/SuperOffice_forum_loadingIndicator.png](http://www.balexandre.com/temp/SuperOffice_forum_loadingIndicator.png)

**我需要**创建自己的中间 WebService 来请求这些数据吗？

大问题是**我还需要检查**辅助行中的“提交时”这些复选框:(

我完全迷路了，谁能给我指点灯？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-02-09T14:52:25.467

ASP.NET Ajax 可以使用 UpdateProgress 来显示图像或任何东西。

```
<asp:UpdateProgress ID="UpdateProgress1" runat="server" AssociatedUpdatePanelID="updPanel1" DisplayAfter="0">
    <ProgressTemplate>
        <img alt="Please Wait" src="Images/processing.gif" />
    </ProgressTemplate>
</asp:UpdateProgress> 
```

您可以通过将位置设置为绝对位置，使用 javascript 将其移动到页面上的任何区域。

执行此解决方案的最佳方法是使用回发对谁页面进行编程。然后在页面上放置一个 Ajax UpdatePanel。

您可以在每一行上调用单击事件来填充数据的 Web 服务。将数据放在隐藏的面板中。如果希望它向下“滑动”，请使用 Jquery 和启动脚本来显示它。

我能给出的最好建议是不要担心拥有一个真正流畅的用户界面。使页面正常工作，并从 Web 服务获取数据。然后在你完成之后，努力让 UI 看起来更好。

这就像播放音乐一样，你不能一次写出一首歌的所有部分。您从一个主题开始，然后创建旋律、第二部分和第三部分等。. .

# linux - Linux/Unix 的“make install”应该包括什么？

> ID：528399
> 
> 赞同：26
> 
> 时间：2009-02-09T14:43:56.347
> 
> 标签：linux, unix, installation, makefile

我已经编写了一个 C++ 程序（命令行、可移植代码），并且正在尝试与 Windows 版本同时发布 Linux 版本。我写了一个makefile如下：

```
绫音：*.cpp *.h
    g++ -Wno-write-strings -oayane *.cpp

```

到目前为止足够直截了当；但我知道习惯上会有第二步，进行安装。因此，当我将 install: target 放入 makefile 中时......应该与什么命令相关联？（如果可能的话，我希望它可以在所有 Unix 系统以及 Linux 上工作。）

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2009-02-09T15:36:42.507

## 安装

一个不那么简单的安装程序将复制几件事，首先确保存在适当的路径（使用`mkdir -p`或类似）。通常是这样的：

*   可执行文件进入`$INSTALL_PATH/bin`
*   任何为外部使用而构建的库都可以进入`$INSTALL_PATH/lib`或`$INSTALL_PATH/lib/yourappname`
*   手册页进入，`$INSTALL_PATH/share/man/man1`如果合适，可能还有其他部分
*   其他文档进入`$INSTALL_PATH/share/yourappname`
*   默认配置文件进入`$INSTALL_PATH/etc/yourappname`
*   其他链接的标题进入`$INSTALL_PATH/include/yourappname`

## 安装路径

`INSTALL_PATH`是构建系统的输入，通常默认为`/usr/local`. 这使您的用户可以灵活地在其 $HOME 下安装，而无需提升权限。

在最简单的情况下，只需使用

```
INSTALL_PATH?=/usr/local 
```

在生成文件的顶部。然后用户可以通过在他们的 shell 中设置一个环境变量来覆盖它。

## 卸载

您有时还会看到`make install`构建清单以帮助卸载的 s。清单甚至可以写成脚本来完成这项工作。

另一种方法是`make uninstall`寻找事物的`make install`位置，并在它们存在时将其删除。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-09T14:48:20.453

在最简单的情况下，您只需将新创建的可执行文件复制到`/usr/local/bin`路径中。当然，它通常比这更复杂。

请注意，这些操作中的大多数都需要特殊权限，这就是`make install`通常使用 调用的原因`sudo`。

* * *

## 回答 #3

> 赞同：-7
> 
> 时间：2009-02-09T14:46:26.370

make install 通常是将二进制文件“安装”到正确位置的步骤。

例如，在编译 Vim 时，make install 可能会放在 /usr/local/bin

并非所有 Makefile 都有 make install

# security - 哪些浏览器支持 HttpOnly cookie？

> ID：528405
> 
> 赞同：45
> 
> 时间：2009-02-09T14:45:38.730
> 
> 标签：security, browser, cookies, xss, httponly

哪些浏览器支持 HttpOnly cookie，从哪个版本开始？

有关 HttpOnly cookie 和 XSS 预防的讨论，请参阅[http://www.codinghorror.com/blog/archives/001167.html 。](http://www.codinghorror.com/blog/archives/001167.html)

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2009-02-09T14:49:54.833

随意添加到此列表中：

*   Internet Explorer 自 6 sp1 ([源](http://www.petefreitag.com/item/644.cfm),[源](http://msdn.microsoft.com/en-us/library/ms533046.aspx))
*   Firefox 自 2.0.0.5 ([来源](http://www.petefreitag.com/item/644.cfm))
*   Opera 自 9.5（可能更早）（[来源](http://manicode.blogspot.com/2008/06/opera-95-httponly-read-prevention.html)）
*   自 4 以来的 Safari（[来源](http://www.greebo.net/2009/06/09/httponly-in-safari-40-release/)）
*   自 1.0.154 以来的 Chrome（[来源](http://www.chromium.org/getting-involved/dev-channel/release-notes/releasenotes1015453)）

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2010-12-17T03:41:32.337

最新结果可以在这里找到：

[http://www.browserscope.org/?category=security](http://www.browserscope.org/?category=security)

（链接自上面提到的 OWASP 文章）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2010-07-29T07:43:04.113

OWASP 对此进行了记录。见[http://www.owasp.org/index.php/HttpOnly](http://www.owasp.org/index.php/HttpOnly)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-11T10:56:33.327

上面的链接都没有提供真正的兼容性表（OWASP 页面似乎损坏了）。这是链接：

[来自 Mozilla 的 Cookie（和 HttpOnly）浏览器兼容性表](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie#Browser_compatibility)

* * *

## 回答 #5

> 赞同：-10
> 
> 时间：2009-02-09T14:49:09.250

所有主流浏览器都支持 HttpOnly。

*   微软 IE 5.0+
*   火狐浏览器 1.0+
*   谷歌浏览器
*   苹果浏览器
*   歌剧 8.0+

# jquery - jQuery - Internet Explorer 7 的兼容性问题和一般的错误行为

> ID：528407
> 
> 赞同：0
> 
> 时间：2009-02-09T14:45:51.333
> 
> 标签：jquery, cross-browser

我已经问过一些关于这个话题的问题，我已经做了一些用户在这里建议的修改，但我仍然无法解决问题。我对 JavaScript 知之甚少，我只是修改了另一个页面的代码。

我有这段代码，当鼠标悬停在图像上时，它会动态地将 Div 向上滑动。您可以在此测试页面中查看：[cine.uuuq.com](http://cine.uuuq.com)

- 在 Firefox 中完美运行。

- 在 Chrome 中，我得到了一些错误的行为。当鼠标悬停在 div 底部附近时，div 会向上滑动。

- 在 Internet Explorer 7 中，一切都运行得很慢（有问题），而且 div 的位置也不是很好。

jQuery：

```
jQuery.fn.masque = function(classSelector) {
$(this).hover(function(){
$(this).find(classSelector).stop().animate({height:'90px',opacity: '1'},400);
},function () {
$(this).find(classSelector).stop().animate({height:'0',opacity: '0'}, 300);
});
};
$(document).ready(function(){$('.thumb').masque('.masque');}); 
```

的HTML：

```
<div class="thumb bg25">
    <a href="#"><img src="img/poster2.jpg" alt="Movie Title" /></a>
    <div class="masque">
            <h3 class="movietitle"><a href="#" >Movie Title</a></h3>
            <p class="movieinfo">2008</p>
            <p class="movieinfo">Drama, History, Comedy, Short</p>
    </div>
</div> 
```

CSS：

```
.thumb {float:left; margin:0 14px 14px 0; width:126px; height:186px; padding:10px; position:relative;}

.masque {position:absolute; background:#212326; width:118px; bottom:10px; height:0; padding:4px; display:none;} 
```

也许有人可以帮我解决那些兼容性问题！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-09T15:13:01.783

如果我将您在问题中引用的代码放入测试页面，它在 IE7 中对我来说效果很好，尽管您链接到的测试页面肯定会在 IE7 中向右推一些东西。

我建议从您的问题中获取代码并逐行重建测试站点的效果，直到您破坏它。这应该是问题出在哪里的一个相当公平的指示:)

# c++ - 自定义断言宏

> ID：528409
> 
> 赞同：3
> 
> 时间：2009-02-09T14:46:12.423
> 
> 标签：c++, windows, assert

在 Windows/c++ 上，我想自定义断言对话框以永远忽略断言，因此我可以更积极地使用断言。我了解编写正确的断言宏是多么困难，并且不希望这样做，只需挂钩对话代码即可。有没有简单的方法（或简洁的技巧）来做到这一点？

[关于断言宏危险的文章](http://tinyurl.com/csgqbn)(googlecache)

更新：更激进 => 更频繁地使用和用于非崩溃**错误**。我希望能够永远忽略一个断言，所以如果一个小错误断言发生在一个循环中，它不会有效地停止我的进程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-09T14:57:47.873

如果“更积极”是指使用断言进行错误处理，那么最好使用异常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-09T16:58:31.653

查看 [_CrtSetReportHook](http://msdn.microsoft.com/en-us/library/0yysf5e6(VS.80).aspx)函数或更新的[_CrtSetReportHook2](http://msdn.microsoft.com/en-us/library/94a21kwy(VS.80).aspx)。您可以使用它来安装一个挂钩，该挂钩会记住“已看到”消息，并在再次看到时将其报告为已处理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-09T17:11:45.773

遵循我们嵌入式大师[Miro Samek](http://www.state-machine.com/resources/articles.php)的教导：

[异常还是错误？](http://www.ddj.com/cpp/184401686)

向下滚动以自定义断言的行为。（但请阅读其他所有内容。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-09T20:18:41.127

如果代码不需要是线程安全的，并且如果您只想“永远”忽略断言，因为它们将在*每次*程序运行第一次后被忽略，而不是永远你第一次忽略它，之后它不会再次触发*所有*程序运行，然后只需将断言测试与默认设置为 false 的静态 bool 结合起来。

```
void someFunc(...)
{
...
static bool bFireAssertion( false );

ASSERT( bFireAssertion || <your assertion test> );
...
} 
```

然后，当您希望它停止触发时，请在调试器中将 bFireAssertion 设置为 true。因为它总是正确的，所以 ASSERT 将短路并且不再评估您的测试。

# java - 在 Java 中抛出异常

> ID：528417
> 
> 赞同：5
> 
> 时间：2009-02-09T14:47:30.550
> 
> 标签：java, exception-handling, throw

我有一个关于在 Java 中引发异常的问题，这似乎是我的一种误解，我想为自己澄清一下。

我一直在阅读处理异常代码的两种基本方法是：

1.) 使用“throw new ...”在 try-block 中抛出异常，并立即在 catch-block 中捕获它——所谓的 try-throw-catch 机制。

2.) 用“throw new ...”在方法中抛出异常，然后在方法的标头中声明该方法可能会用“throws ...”抛出异常 - 即所谓的 pass-the-buck。

我最近读到“抛出异常然后用相同的方法捕获它没有任何意义”，这让我思考是否我理解错误的方式，或者写这个的人有什么东西其他的。第一种处理异常的方法不正是这样做的吗（try-throw-catch 机制）？我的意思是，它抛出一个异常并以相同的方法捕获它。我已经读过，在一种方法中抛出异常并在另一种方法中捕获它是一种更好的做法，但这只是一种（可能更好）的方法。另一种方式也是合法和正确的，不是吗？

请您对此发表评论好吗？非常感谢。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-02-09T14:58:28.543

**当该方法无法自行解决异常时，应该从该方法中抛出异常。**

例如，a`FileNotFoundException`被抛出是因为 FileInputStream 本身无法处理文件丢失的情况；需要抛出该异常，以便最终用户应用程序可以处理该问题。`new FileInputStream(new File(*filename*))`

在某些情况下，可以在方法中处理异常。例如，`BadLocationException`可以在足够智能的方法中处理抛出 a 的文档模型方法。根据问题，可以处理或重新抛出异常。

（无论如何，我认为从 try-catch 块中抛出异常以便可以执行 catch 块代表非常糟糕的逻辑流程）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-02-09T14:55:27.877

我想你误解了第一个案例。通常，当您调用某些可能引发异常的方法时，您会添加一个 try-catch-block。捕捉本地抛出的异常确实没有多大意义。特别是您不应该使用异常退出循环，因为与标准方法相比，这非常慢。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-02-09T15:11:54.733

> 第一种处理异常的方法不正是这样做的吗（try-throw-catch 机制）？我的意思是，它抛出一个异常并以相同的方法捕获它。

这不是“处理异常的方式”——这完全是胡说八道。异常的全部意义在于让调用堆栈上的另一个方法处理它。如果您要在同一个方法中处理条件，那么使用异常是没有意义的——这就是 if() 的用途！如果这使您的方法的控制流过于复杂，您可能应该将一些逻辑重构为单独的方法 - 然后让其余方法主体捕获的那些抛出异常可能是有意义的。

话虽如此，我可以想象一种特殊情况，在同一个方法中抛出和捕获异常是有意义的：当你已经调用了一个可能抛出异常并有一个 catch 块来处理它的方法时，然后在在某些情况下，抛出异常以指示现有 catch 块可以以相同方式处理的类似问题可能是有意义的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-02-09T15:32:07.260

我将依次回答您的问题，然后在末尾添加一些评论。我不是异常处理的权威，但我希望我的评论对您有所帮助。

* * *

“不是第一种处理异常的方法就是这样做的”？

我的回答是肯定的，正如您所描述的，第一种方法确实通过在同一方法中抛出和捕获异常来操作。但是，我不知道 try-throw-catch 必须像您描述的那样起作用。

* * *

“我已经读过，在一种方法中抛出异常并在另一种方法中捕获它是一种更好的做法，但这只是一种（可能更好）方式。另一种方式也是合法且正确的，不是吗？ "

我同意从第二种方法捕获异常更好，但第一种方法是合法的。这是对的吗？好吧，这由您决定，毕竟这是您的代码。

在大多数情况下，我同意抛出异常然后立即在同一方法中捕获该异常是没有意义的。如果我们这样做是因为该方法特别长/复杂，并且使用其他逻辑处理错误会使事情变得更加复杂，那么我建议将其中一些逻辑移至另一个方法并调用该方法并捕获其异常。

如果我们的代码更简单，那么使用不包含抛出异常的代码来处理错误可能会很容易。

* * *

我的评论：

你提到的try-throw-catch机制可能不需要在同一个方法中抛出异常。我必须阅读您认为可以确定的文本，但我认为没有必要。如果它不需要在同一个方法中抛出异常，那么你的异常处理策略是 1) 和 2) 的组合。

在组合中，一种方法将使用 try-throw-catch 机制来捕获被调用方法抛出的异常。在我看来，1) 和 2) 应该一起工作以形成您的异常处理策略。

现在，也许有人会过来给我们一些很好的理由，说明我们可能想在同一个方法中抛出异常。我希望有一些，但对我来说，它们似乎是例外，而不是规则。

干杯，埃德

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-02-09T15:16:17.813

写“抛出异常然后用相同的方法捕获它没有任何意义”的人有权发表他们的意见，但它没有被广泛分享。有很多情况需要在同一方法中抛出和捕获异常。最简单的是您正在执行一系列操作，其中任何一个操作失败都会使其余操作无效。如果您检测到这些操作之一失败，那么抛出异常并在方法结束时捕获它是完全合理的。事实上，这是合乎逻辑的做事方式。可以说你可以重写代码以不使用异常，也许有一些状态标志和一个或两个 break 语句，但你为什么要这样做？使用异常可以清楚地知道发生了什么并提高代码的可读性。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-02-09T14:56:05.973

对于第一种方式，您的意思是这样的：

```
try {
  ok = doSomething();
  if (!ok) {
   throw new Exception("Error");
  }
 ok = doSomethingElse();
}catch (Exception e) {
} 
```

这将允许您退出 try-catch 块而不执行其余部分。这是我能想到的使用 throw 抛出异常并自己在 try-catch 块中捕获它的唯一有效用法。但是，应该使用标准 if 块。我不明白为什么有人应该抛出异常然后自己捕获它。

第二种方式更标准，特别是如果抛出异常的方法的调用者是外部模块。这是一种表明发生了真正错误的信号的方式。处理异常是调用者的责任。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-02-09T15:08:03.793

如果您要手动抛出异常，那么显然您知道有一些错误需要处理。与其抛出新的异常，然后捕获它，然后立即处理错误，为什么不直接处理错误呢？您（和处理器）不需要完成生成异常并捕获它的所有工作。该异常还使代码更难阅读和调试。

如果出现以下情况，您将抛出异常，而不是立即处理错误：

*   其他代码，例如调用您的方法的代码，应该处理该错误。例如，如果您的代码不是 UI 代码，那么它可能不应该生成窗口。这是你的方法#2。

*   您可以利用 try、catch 和 finally 块。您可以通过这种方式编写更清晰的代码，但我认为 90% 的情况下，您的代码使用简单的 if 语句会更具可读性。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-02-09T16:48:24.410

*Joshua Bloch 在Effective Java, 2nd Edition*的 Item 57中专门处理了使用控制流的异常：

**第 57 条：仅在例外情况下使用例外**

> ...例外，顾名思义，仅用于例外情况；*它们不应该用于普通的控制流*。[斜体我的]

因此，虽然使用异常来控制流程肯定“有效”，但不建议这样做。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-02-09T14:56:24.053

我的经验是，使用第一种方法会使您的代码很快变得不可读-因为功能和错误处理混淆了。**但在某些情况下，您有 try{}catch{}** **finaly** {} 是有意义的 - 例如在您总是希望关闭连接的文件处理或数据库处理中。

```
try{ //do something
}catch(Exception ex){
//log
}finally{
//connection.close
} 
```

对于其他一切，我使用第二个选项 - 只是为了集中我的错误处理例程并保持实现业务逻辑本身的代码的可读性。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-02-09T14:58:33.223

在我看来，您编写的 try 块不应包含任何在同一方法中捕获的“新抛出”。当您抛出异常时，您是在说“我遇到了我无法处理的情况；其他人将不得不处理它。” 带有“throw new”的方法应该创建一个未检查的异常来抛出或在其方法签名中声明一个检查的异常。

如果您正在使用可能引发异常的 3rd 方类，那么如果发生异常时您实际上可以处理这种情况，那么您的方法应该有一个 try/catch 块。否则，您应该推迟到另一个可以的课程。

我不会创建自己的异常，然后用相同的方法捕获它。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-02-09T16:31:13.077

这看起来是无稽之谈（在同一方法中抛出和捕获）的原因是因为这将是使用异常进行流控制的场景。如果您已经有足够的数据来识别应该引发异常的条件，那么您可以使用该信息来使用条件。

见下文：

1）在同一方法中抛出和捕获异常（**错误**）

```
public void method() { 
    try {    
        workA...
        workA...
        workA...
        workA...    
        if( conditionIvalid() && notEnoughWhatever()  && isWrongMoment() ) { 
            throw new IllegalStateException("No the rigth time" );
        }
        workB...
        workB...
        workB...
        workB...
    } catch( IllegalStateException iee ) { 
        System.out.println( "Skiped workB...");
    }
    workC....
    workC....
    workC....
    workC....
} 
```

在这种情况下，异常抛出用于跳过“workB”部分。

这样做会更好：

2) 使用条件控制流（**右**）

```
public void method() { 
    workA...
    workA...
    workA...
    workA...    
    if( !(conditionIvalid() && notEnoughWhatever()  && isWrongMoment() ) ) { 
        //throw new IllegalStateException("No the rigth time" );
        workB...
        workB...
        workB...
        workB...

    }
    workC....
    workC....
    workC....
    workC....
} 
```

然后你可以重构条件：

```
 if( !(conditionIvalid() && notEnoughWhatever()  && isWrongMoment() ) ) { 
```

为了

```
 if( canProceedWithWorkB() ) { 
```

实现为：

```
 boolean canProceedWithWorkB() {  
      return !(conditionIvalid() && notEnoughWhatever()  && isWrongMoment() );
  } 
```

# php - PostgreSQL 连接问题

> ID：528426
> 
> 赞同：3
> 
> 时间：2009-02-09T14:48:35.070
> 
> 标签：php, postgresql

我的应用程序有一个非常奇怪的问题，有时在连接到 postgres 时会出现以下错误。这种情况没有任何模式发生，通常在我运行一些广泛的硒测试时发生。

警告：pg_connect() [function.pg-connect]：无法连接到 PostgreSQL 服务器：服务器意外关闭了连接这可能意味着服务器在处理请求之前或期间异常终止。

Postgres 日志显示没有异常，在同一个 postgres 实例上运行的其他应用程序也完全没有问题。

我的 Postgres 是 8.2.9，在 windows 2008 服务器上运行

有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-09T19:13:39.893

“服务器意外关闭连接”大多数时候意味着后端崩溃。如果是这种情况，服务器日志中应该有一些关于它的行。

顺便说一句，8.2 分支中的最新版本是 8.2.12。升级、测试、报告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-07-24T18:20:28.860

您只显示客户端错误。由于这意味着后端发生了某些事情，因此您需要查看服务器日志以了解有关实际发生的事情的信息。（postgres 日志和/或事件日志 - 检查两者）

发生这些事情的一个典型原因是您在服务器上运行了一些防病毒软件。如果这样做，请尝试卸载它（而不仅仅是禁用它）并查看问题是否消失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-09T14:55:34.913

随机猜测。你使用持久连接吗？

# keyboard - 有谁知道如何将 Microsoft 的 Instant Viewer 鼠标功能映射到键盘？

> ID：528427
> 
> 赞同：0
> 
> 时间：2009-02-09T14:48:43.043
> 
> 标签：keyboard, keyboard-shortcuts, hardware

在阅读了[Jeff](http://www.codinghorror.com/blog/archives/001221.html)对[Microsoft 的 Natural Ergonomic Keyboard 4000](http://www.microsoft.com/hardware/mouseandkeyboard/productdetails.aspx?pid=043)的评论之后。我决定买一个。它带有这个非常好的即时查看器功能，它分配给鼠标的中间按钮。不想失去我的中间按钮“在新标签页中打开”功能。我想把它分配给键盘。我在使用它时查看了任务管理器，它似乎是 ipoint.exe 的一部分。

有谁知道是否可以将其分配给键盘以及如何分配？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-09T15:36:51.587

您是否尝试使用[Microsoft 的键盘软件 (IntelliType Pro) 和鼠标软件 (IntelliPoint)](http://www.microsoft.com/hardware/mouseandkeyboard/Download.mspx)进行操作？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-05-27T06:01:11.913

我刚刚在 XP 上安装了 Intellitype Pro 7.1（我没有安装 Intellipoint），它确实允许您将 Instant Viewer 分配给一个键。不过，您可能需要 Microsoft 键盘才能使用它（Intellipoint 需要 M$ 鼠标）。

# c# - Lambda“无法从使用中推断”

> ID：528430
> 
> 赞同：7
> 
> 时间：2009-02-09T14:49:12.387
> 
> 标签：c#, linq, lambda

我声明了以下字典：

```
private readonly Dictionary<int, Image> dictionary; 
```

我有一个方法，导致编译器错误：

```
 public IQueryable<Image> Find(Func<Image, bool> exp)
    {
        return  dictionary.Single(exp);
    } 
```

我得到的错误是：

```
Error   1   The type arguments for method 'System.Linq.Enumerable.Single<TSource>(System.Collections.Generic.IEnumerable<TSource>, System.Func<TSource,bool>)' cannot be inferred from the usage. Try specifying the type arguments explicitly. C:\work\MSD-AIDS-Images\MSD-AIDS-Images-Test\TestImageRepository.cs 34  30  MSD-AIDS-Images-Test 
```

我试过用谷歌搜索，我似乎找不到任何关于我做错了什么的确切信息

编辑 - 这是周一早上上班。

我的意思是把“哪里”，而不是单一的

**编辑2！**

好的，代码现在是这样的：

```
public IQueryable<Image> Find(Func<Image, bool> exp)
{
    return dictionary.Values.Where(exp);
} 
```

现在我收到以下错误：

```
Error   1   Cannot implicitly convert type 'System.Collections.Generic.IEnumerable<MSD_AIDS_Images_Data.Image>' to 'System.Linq.IQueryable<MSD_AIDS_Images_Data.Image>'. An explicit conversion exists (are you missing a cast?)    C:\work\MSD-AIDS-Images\MSD-AIDS-Images-Test\TestImageRepository.cs 34  20  MSD-AIDS-Images-Test 
```

作为一个仅供参考，实现接口的方法，其声明是：

```
IQueryable<T> Find(Func<T, bool> exp); 
```

这比它应该的要复杂得多！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-02-09T14:55:45.193

你想做什么？例如，`Single`将返回一个 的实例`T`，而不是一个（对于对象，您可能无论如何`IQueryable<T>`都应该使用）...`IEnumerable<T>`

感觉就像你想要的：

```
public Image Find(Func<Image, bool> predicate)
{
    return dictionary.Values.Single(predicate);
} 
```

当然，您可以通过以下方式在全局范围内作为扩展方法执行此操作：

（**编辑**包括`Where`问题编辑）

```
static class DictionaryExtensions
{
    public static TValue FindSingle<TKey, TValue>(
        this IDictionary<TKey, TValue> dictionary,
        Func<TValue, bool> predicate)
    {
        return dictionary.Values.Single(predicate);
    }
    public static IEnumerable<TValue> Find<TKey, TValue>(
        this IDictionary<TKey, TValue> dictionary,
        Func<TValue, bool> predicate)
    {
        return dictionary.Values.Where(predicate);
    }
} 
```

（不过，我不确定调用者自己做这件事要困难得多）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-09T15:11:45.780

> 存在显式转换（您是否缺少演员表？）

有两种`Where`方法，一种在[System.Linq.Enumerable](http://msdn.microsoft.com/en-us/library/bb534803.aspx)上（它正在使用），另一种在[System.Linq.Queryable](http://msdn.microsoft.com/en-us/library/bb535040.aspx)上（根据该返回类型，您认为它应该使用）。

您需要执行以下操作之一：

*   将返回类型更改为`IEnumerable<Image>` - 我推荐这个！
*   将方法调用更改为`Queryable.Where(dictionary.Values.AsQueryable(), exp)`
*   称呼`AsQueryable()`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-09T14:52:22.877

`IDictionary<TKey, TValue>`工具`IEnumerable<KeyValuePair<TKey,TValue>>`，所以你`Func`应该看起来更像`Func<KeyValuePair<TKey,TValue>>`.

# django - 根据 URL 区分 nginx 行为

> ID：528431
> 
> 赞同：2
> 
> 时间：2009-02-09T14:49:22.463
> 
> 标签：django, http-headers, nginx

我有一个 Django 应用程序，我使用 nginx 来提供静态内容。不幸的是，所有注册的 MIME 类型都会显示在客户端浏览器中，而我希望能够下载**相同的内容**以及通常的行为。说，我下面有 JPEG 文件`/media/images/image01.jpg`，我希望 nginx 以通常的方式使用标准`image/jpeg`头提供这个文件，但另外我希望nginx 提供**相同的**图像`content-disposition: attachment`（有效地强制内容下载），当访问为`/downloads/images/image01.jpg`. 任何人都可以提出解决方案吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-09T15:02:11.560

确保你已经编译了 http_headers_module。（应该默认，如果它不在核心中）

使用“add_header 内容处置附件；”

我建议使用像“/download?file=/downloads/images/image01.jpg”这样的网址并结合重写规则来避免以后出现一些烦人的错误。

[Http Headers 模块文档](http://wiki.nginx.org/NginxHttpHeadersModule)

# sharepoint - 发送邮件时出错

> ID：528432
> 
> 赞同：1
> 
> 时间：2009-02-09T14:49:23.120
> 
> 标签：sharepoint, moss, smtp

当我尝试将新用户添加到站点并尝试向他发送邮件时，我收到以下错误消息。该站点是 Intranet 站点，并且通过备用 URL 映射在 Internet 上公开，同时添加本地交换组的用户它不会给出任何错误，但假设我添加了一个在他的 AD 中表达 gmail id 的用户，这会引发以下错误：

已成功添加用户，但发送电子邮件时出错。服务器可能未正确设置以发送电子邮件。要验证电子邮件配置是否正确，请联系您的服务器管理员。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-09T19:01:21.017

首先验证您刚刚添加的用户在 SharePoint 中有一个有效的电子邮件地址 - 不要假设它是从 AD 中正确提取的（网站设置 > 人员和组）

找出您设置为外发 SMTP 服务器的内容（管理中心 > 操作 > 外发电子邮件设置）

在您的服务器上安装类似[SMTP 测试工具的工具（](http://www.simplecomtools.com/smtptesttool.html)[或使用 Telnet 手动测试](http://support.microsoft.com/kb/323350)）并使用相同的设置/电子邮件地址。这将告诉您问题出在 SharePoint 还是您的电子邮件基础架构上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-12-24T19:56:50.017

问题出在我们的基础架构团队解决的服务器上的设置上

# regex - 从字符串中删除非数字和非字母字符？

> ID：528436
> 
> 赞同：7
> 
> 时间：2009-02-09T14:50:04.473
> 
> 标签：regex, string, replace

从字符串中删除所有特殊字符的最佳方法是什么 - 如下所示：

!@#$%^&*(){}|:"?><,./;'[]\=-

删除了这些字符的项目会很短，那么在每个项目上使用 REGEX 还是只使用字符串操作会更好吗？

谢谢

环境 == C#/.NET

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-09T14:53:58.850

拥有白名单通常比拥有黑名单更好。

正则表达式有一个方便`\w`的方式，有效地表示字母数字加下划线（某些变体还会在列表中添加重音字符（á、é、ô 等），而其他变体则不会）。

您可以通过使用`\W`to 表示非字母数字的所有内容来反转它。

所以**用空字符串****替换将删除所有“特殊”字符。`\W`**

或者，如果您确实需要一组与字母数字不同的字符，您可以使用否定字符类：`[^abc]`将匹配不是`a`or`b`的所有内容`c`，`[^a-z]`并将匹配不在范围内的所有内容`a,b,c,d...x,y,z`

等价于`\w`is`[A-Za-z0-9_]`和因此`\W`是`[^A-Za-z0-9_]`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-09T14:59:02.253

在 php 中：

```
$tests = array(
     'hello, world!'
    ,'this is a test'
    ,'and so is this'
    ,'another test with /slashes/ & (parenthesis)'
    ,'l3375p34k stinks'
);

function strip_non_alphanumerics( $subject )
{
    return preg_replace( '/[^a-z0-9]/i', '', $subject );
}

foreach( $tests as $test )
{
    printf( "%s\n", strip_non_alphanumerics( $test ) );
} 
```

输出将是：

```
helloworld
thisisatest
andsoisthis
anothertestwithslashesparenthesis
l3375p34kstinks 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-09T14:56:21.167

我更喜欢**正则表达式**，因为语法更易于阅读和维护：

```
# in Python
import re
re.sub("[abcdef]", "", text) 
```

要删除`abcdef`的*正确转义*字符在哪里。

或者，如果您只想要字母数字字符（加上下划线），您可以使用：

```
re.sub("\W", "", text) 
```

其中`\W`表示一个*非单词字符*，即`[^a-zA-Z_0-9]`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-09T14:56:42.837

当您只想拥有字母数字字符时，您可以通过使用反转字符类来表达这一点：

```
[^A-Za-z0-9]+ 
```

这意味着：每个不是字母数字的字符。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-09T15:04:42.257

这是一个简单的正则表达式

```
[^\w] 
```

这应该捕获所有非单词字符这将允许 az AZ 0-9 空格和 _ 既不是空格也不是 _ 不在您的列表中，所以如果您也想捕获这些，这可以工作，那么我会做这样的事情：

```
/[a-z0-90/i 
```

这是 az 和 0-9 的 PHP 格式，i 使其不区分大小写。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-09T14:53:05.607

我们使用“tr”命令？

你不说你在什么环境......壳？C程序？爪哇？每一个都有不同的最佳解决方案。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-02-09T14:56:08.080

你用什么语言做正则表达式？

例如，在 Perl 中，您可以进行翻译，将列表中的任何字符翻译为空：

例如，这会将 'a'、'b'、'c' 或 'd' 翻译成 ''

```
$sentence =~ tr/abcd//; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-02-09T16:50:08.710

您可以通过获取键入字符的 askey 值在前端验证它们。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-05-05T16:41:34.550

PHP 中的理想方法是......

```
$text = "ABCDEF...Á123";
$text = preg_replace( '/[^\p{L}]/i', '', $text);
print($text); # Output: ABCDEFÁ 
```

或者，在 Perl...

```
my $text = "ABCDEF...Á123";
$text =~ s/[^\p{L}]//gi;
print($text); # Output: ABCDEFÁ 
```

如果你只是在 [^a-zA-Z] 上匹配，你会错过所有重音字符，我想你会想要保留这些字符（大部分情况下）。

# apache-flex - 在一个 HTTP Post 中灵活上传多个文件

> ID：528441
> 
> 赞同：1
> 
> 时间：2009-02-09T14:52:02.287
> 
> 标签：apache-flex, http, upload

遍历 FileReferenceList 中的每个文件引用调用 upload 意味着文件作为单独的请求上传。

我想在一个 POST 中上传一堆文件（我已经有一个 ASHX 处理程序可以接受它）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-09T15:23:50.743

AFAIK 那是不可能的。

从文档：

> FileReferenceList 类允许用户选择一个或多个文件上传到服务器端脚本。文件上传由 FileReference.upload() 方法处理，必须在用户选择的每个文件上调用该方法。

...和...

> 上传多个文件需要您使用 FileReference.upload() 上传每个选定的文件

您也许可以使用[AS3 zip 库](http://www.nochump.com/blog/?p=15)创建一个 zip并将其发送到服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T20:31:30.010

不，你不能，它是 Flash 播放器的安全限制。您可以使用动作脚本模拟文件上传（如果您想发送数据但没有用户文件，则很有用）。

它与 Flash 10 相同，所以可能在 Flash 11 上......

# php - 有没有办法在 PHP 函数中返回 HTML？（不将返回值构建为字符串）

> ID：528445
> 
> 赞同：77
> 
> 时间：2009-02-09T14:52:41.770
> 
> 标签：php, string, templating

我有一个 PHP 函数，用于输出标准的 HTML 块。它目前看起来像这样：

```
<?php function TestBlockHTML ($replStr) { ?>
    <html>
    <body><h1> <?php echo ($replStr) ?> </h1>
    </html>
<?php } ?> 
```

我想返回（而不是回显）函数内的 HTML。有什么方法可以做到这一点，而无需在字符串中构建 HTML（上图）？

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2009-02-09T15:02:13.773

您可以使用[heredoc](http://php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)，它支持变量插值，使其看起来相当整洁：

```
function TestBlockHTML ($replStr) {
return <<<HTML
    <html>
    <body><h1>{$replStr}</h1>
    </body>
    </html>
HTML;
} 
```

请密切注意手册中的警告 - 结束行不能包含任何空格，因此不能缩进。

* * *

## 回答 #2

> 赞同：85
> 
> 时间：2009-02-09T14:55:23.573

是的，有：您可以`echo`使用以下方法捕获编辑文本[`ob_start`](http://php.net/ob_start)：

```
<?php function TestBlockHTML($replStr) {
    ob_start(); ?>
    <html>
    <body><h1><?php echo($replStr) ?></h1>
    </html>
<?php
    return ob_get_clean();
} ?> 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2011-11-13T00:23:13.517

这可能是一个粗略的解决方案，如果有人指出这是否是一个坏主意，我将不胜感激，因为它不是函数的标准使用。我在没有将返回值构建为字符串的情况下从 PHP 函数中获得了一些成功，其中包含以下内容：

```
function noStrings() {
    echo ''?>
        <div>[Whatever HTML you want]</div>
    <?php;
} 
```

只是'调用'函数：

```
noStrings(); 
```

它会输出：

```
<div>[Whatever HTML you want]</div> 
```

使用此方法，您还可以在函数中定义 PHP 变量，并在 HTML 中回显它们。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2009-02-09T15:32:21.550

创建模板文件并使用模板引擎读取/更新文件。它将增加您的代码在未来的可维护性以及将显示与逻辑分开。

[使用Smarty](http://smarty.net)的示例：

**模板文件**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head><title>{$title}</title></head>
<body>{$string}</body>
</html> 
```

**代码**

```
function TestBlockHTML(){
  $smarty = new Smarty();
  $smarty->assign('title', 'My Title');
  $smarty->assign('string', $replStr);
  return $smarty->render('template.tpl');
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-02-28T18:38:59.143

另一种方法是使用[file_get_contents()](http://us3.php.net/manual/en/function.file-get-contents.php)并拥有一个模板 HTML 页面

模板页面

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head><title>$title</title></head>
<body>$content</body>
</html> 
```

PHP 函数

```
function YOURFUNCTIONNAME($url){

$html_string = file_get_contents($url);
return $html_string;

} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-06-16T22:23:54.010

如果您不想依赖第三方工具，您可以使用此技术：

```
function TestBlockHTML($replStr){
  $template = 
   '<html>
     <body>
       <h1>$str</h1>
     </body>
   </html>';
 return strtr($template, array( '$str' => $replStr));
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-06-11T18:35:01.643

或者你可以使用这个：

```
<?
function TestHtml() { 
# PUT HERE YOU PHP CODE
?>
<!-- HTML HERE -->

<? } ?> 
```

要从此函数获取内容，请使用：

```
<?= file_get_contents(TestHtml()); ?> 
```

就是这样 ：）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-06-13T05:57:42.740

## 模板文件

```
<h1>{title}</h1>
<div>{username}</div> 
```

## PHP

```
if (($text = file_get_contents("file.html")) === false) {
    $text = "";
}

$text = str_replace("{title}", "Title Here", $text);
$text = str_replace("{username}", "Username Here", $text); 
```

然后您可以将 $text 回显为字符串

# ruby-on-rails - Druby 和 ActiveRecord 的线程问题

> ID：528449
> 
> 赞同：2
> 
> 时间：2009-02-09T14:53:33.437
> 
> 标签：ruby-on-rails, ruby, druby

我有一个 Rails 应用程序和一个单独的 druby 进程。这个过程给了我一些方法，在每个 druby 方法的第一行都有一个对 ActiveRecord::Base.establish_connection 的调用，其中 db_name 取决于 rails 应用程序设置的参数。有时该进程获取错误的数据库名称，我认为这可能是一个并发问题。可以吗？关于如何使其线程安全的任何想法？

谢谢你的帮助！罗伯托

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-15T10:46:49.493

Yes, this is a concurrency problem.

To fix it, you would have to change your architecture a little bit, but I don't have enough informations.

*   Is the code running in the backend the same as the one running in your rails application ?
*   Do your different databases use the same model ?
*   How many different databases you have ? Does this number grow ?

Basically, if you have a small and fixed number of databases, the simplest is to use different ruby processes.

If you have different databases with different models, you could envisions to use different base classes:

```
AppA < ActiveRecord::Base
Model1 < AppA
Model2 < AppA

AppB < ActiveRecord::Base
Model3 < AppB 
```

Then you can call

```
AppA.establish_connection(...)
AppB.establish_connection(...) 
```

to different databases.

# c# - 如何区分更改的表单文件 - ( .Designer InitializeComponent )

> ID：528461
> 
> 赞同：3
> 
> 时间：2009-02-09T14:55:57.627
> 
> 标签：c#, winforms, svn, merge, branch

使用 Suversion 和 WinDiff 分支/合并类项目和 Web 项目没有问题。

我永远无法合并的唯一一种项目是 winform 项目。InitializeComponent 方法总是在稍作改动后被打乱。

有什么好方法可以为 .Designer 文件启用差异/合并吗？

**编辑：**

我使用了 Bert 建议的 3 路差异。它让事情变得容易多了。但是 Winform - 文件（.designer 和 .resx）仍然不可合并。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-04T11:44:54.847

我们有一种不同的方法来确保差异更易于管理。我们有一个 checkin 触发器，它将把设计器文件 InitializeComponent 部分修改为一致且有序的方式，以便差异显示真正的变化。

我们想将 InitializeComponent 拆分为 4 个部分 - 创建、布局暂停、设置和布局恢复。然后根据控件的名称对这些部分中的每个部分进行单独排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-06T14:19:40.763

如果您使用的是 Resharper，请在签入之前重新格式化（包括排序成员等）这些文件。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-02-10T09:25:26.977

Windiff 是为比较文件而设计的。它使用 2 路差异合并算法，仅允许您查看文件的两个版本之间的更改，因此您只需猜测哪些更改应应用于结果文件。

对于合并，您应该真正考虑使用 3 路差异算法/工具。

在 3 种方式 diff 中，diff 工具使用文件的原始版本来提取文件 (%mine) 对原点 (%base) 的更改以及它们的文件 (%theirs) 对原点的更改，然后将所有更改应用于原始版本以创建单个结果。（如果有任何冲突我

[SourceGear DiffMerge](http://www.sourcegear.com/diffmerge/) （推荐）是一个非常用户友好的 3 路 GUI 差异工具，您可以免费使用，但 TortoiseMerge 也实现了 3 路合并。

[您可以在Wikipedia](http://en.wikipedia.org/wiki/Comparison_of_file_comparison_tools)上找到其他常用合并工具的列表。

# delphi - 将单元添加到接口或实现部分之间的区别

> ID：528472
> 
> 赞同：7
> 
> 时间：2009-02-09T14:57:27.327
> 
> 标签：delphi

如果我有一个充满常量的单位，比如......

```
unit AConsts;
interface
const
   Const1 : WideString = 'Const1';
   Const2 : WideString = 'Const2';
   Const3 : WideString = 'Const3';
   Const4 = 100;
   Const5 = 100;
implementation
end. 
```

我想从另一个单位使用这个单位，有什么区别......

```
unit AUnit;
interface
uses 
  AConsts;
Implementation
end. 
```

和

```
unit AUnit;
interface
implementation
uses
  AConsts;
end. 
```

?

问题不在于范围，避免循环引用等。它是关于已编译应用程序的差异。

如果`UnitA`,`UnitB`和`UnitC`all 使用, 编译的应用程序 (假设单元中的常量和其他代码之间没有名称冲突) where these , and all have在**接口**部分和where , and all have在**实现**`AConsts`之间会有区别吗部分。`AConsts``App1``UnitA``UnitB``UnitC``AConsts`**`App2``UnitA``UnitB``UnitC``AConsts`**

 ***** * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-02-09T15:02:01.387

不同之处在于您可以在哪里引用`AConsts`其界面部分中的内容。在第一个`AUnit`中，您可以使用在*该*接口部分`Const4`中声明一个固定大小的数组。您无法在第二个中执行此操作，因为不在范围内。*`AUnit``Const4`*

 *如果您不小心，它*可能会对已编译的程序产生影响。*假设我们有*另一个*单元*也*声明了一个名为 的常量`Const4`：

```
unit BConsts;
interface
const
  Const4 = 50;
implementation
end. 
```

现在我们像这样定义一个数组`UnitA`：

```
unit AUnit
interface
uses BConsts;
var
  data: array[0..Pred(Const4)] of Integer;
implementation
uses AConsts;
procedure Work;
var
  i: Integer;
begin
  for i := 0 to Const4 - 1 do begin
    data[i] := 8;
  end;
end;
end. 
```

该代码将写入数组末尾之外，因为`Const4`在接口部分的范围内的代码与`Const4`在实现部分中使用的代码不同。这不会经常发生在常量中。它通常只发生在两个标识符中，定义在 and 中的函数`FindClose`，and ，定义在and中。在这两种情况下，编译器会告诉您您做错了什么，尽管它不会准确地告诉您您使用了具有两种不同含义的标识符。您可以通过限定标识符来解决问题：`Windows``SysUtils``TBitmap``Graphics``Windows`

```
for i := 0 to BConsts.Const4 - 1 do
  data[i] := 8; 
```

如果上述所有预防措施都得到解决，那么您的程序可以正确编译和运行，那么在哪里使用单位就没有区别。在您使用 App1 和 App2 的示例中，这两个程序将是相同的。它们不会完全相同——编译器会以不同的顺序处理事物，因此可能会将事物放在不同的位置——但它不会影响程序的执行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-10T01:14:29.090

我将所有引用都放在实现部分中，并且只将那些单元名称放在我必须的接口中。

不过，我喜欢尽可能地限制所有内容的范围，而本政策就是以此为依据的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-09T17:01:56.920

IDE 还使用您声明用途的方式来确定需要编译的内容。

如果您的接口部分使用 UnitA 而您的实现部分使用 UnitB 那么，如果单元 B 需要重新编译，您的单元不会，但如果 unitA 发生更改，那么您的单元将需要重新编译。

这是 Delphis 超快速构建速度的秘密之一。

至于你完成的可执行文件，我希望它在你放置声明的任何地方都会变成相同的大小（链接器很聪明，只链接你的应用程序实际使用的方法等），但各种来源的实际位置几乎如果单位声明的顺序发生变化，肯定会发生变化。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-09T15:00:24.857

界面中uses语句中的项目在整个单元中都是可见的。

实现中使用语句中的项目仅在实现部分可见。

例子：

```
unit A;
interface
const 
  cA = 1;
..

unit B;
interface
const 
  cB = 1;
..

unit C;
interface
uses
  A;
const 
  cC1 = cA;
  cC2 = cB; // Error

implementation
uses
  B;
const
  cC3 = cA;
  cC4 = cB;

end. 
```

如果实施部分中至少包含一个单元，则可以创建相互依赖的单元：

```
unit A;
interface
implementation
uses
  B;
end.

unit B;
interface
implementation
uses
  A;
end. 
```

如果两者都在接口部分中使用，它将不会编译/链接。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-09T19:55:58.453

我遵循一个规则，除非我需要处理循环引用的问题，否则我将所有内容都放在接口部分。这有助于带来一点清晰。Delphi 和“文件>使用单元...”对话框中的一些向导将单元放在实现部分。

除了 Rob Kennedy 强调的范围界定陷阱之外，这无关紧要。制定你的标准并坚持下去。

# asp.net - asp.net 中的关注点分离导致层次结构混乱

> ID：528484
> 
> 赞同：0
> 
> 时间：2009-02-09T14:59:30.787
> 
> 标签：asp.net, separation-of-concerns

我正在设计一个后台网站，使管理员能够管理内容、产品、价格等。我想在每个页面控制器（即代码隐藏类）将扩展的基类中解决两个问题，它们是：

1.  将 ViewState 存储在磁盘上，以及
2.  用户验证。

此外，我希望每个页面控制器在设置事件处理程序、填充表单和保存数据时都遵循相同的设计。我想通过创建页面控制器实现的抽象方法来解决这个问题。

现在，创建一个满足 ViewState 存储和用户验证的基类，并进一步定义如何以及何时设置事件处理程序、填充表单和持久化数据对我来说太混乱了。我喜欢高度的关注点分离，我倾向于创建三个基类​​：

System.Web.UI.Page
|
FileSystemStatePage : System.Web.UI.Page
（存储 ViewState）
|
SecurePage : FileSystemStatePage
（用户验证）
|
PageBase：SecurePage
（抽象，定义了设置事件处理程序、表单填充、保存的方法）

现在我对关注点的分离很满意，但我对深层的类层次结构并不感到兴奋。如果我发现自己需要用户验证但不需要磁盘上的 ViewState 怎么办？所以...

...你们通常如何解决这些问题？

```
public class FileSystemStatePage : Page
{
    protected override void SavePageStateToPersistenceMedium(object viewState)
    {
        // Serialize ViewState...
        // Save to disk...
    }

    protected override object LoadPageStateFromPersistenceMedium()
    {
// Read file content...
// Deserialize and return...
    }
}

public class SecurePage : FileSystemStatePage
{
    protected override void OnInit(EventArgs e)
    {
        if (!ValidateUser()) Response.Redirect("~/Login.aspx");

        base.OnInit(e);
    }

    protected virtual bool ValidateUser()
    {
        return LoginHelper.LoggedInSystemUser != null;
    }
}

public abstract class PageBase : SecurePage
{
    protected override void OnInit(EventArgs e)
    {
        base.OnInit(e);
        SetEventHandlers();
    }
    protected override void OnLoad(EventArgs e)
    {
        base.OnLoad(e);
        if (!IsPostBack)
        {
            Populate();
        }
    }
    protected abstract void SetEventHandlers();
    protected abstract void Populate();
    protected abstract void OnCancel(object sender, EventArgs e);
    protected abstract void OnSave(object sender, EventArgs e);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-09T15:12:24.170

我不得不说，在没有特别的解决方案的情况下，良好的关注点分离实际上在上述嵌套层次结构中被打乱了。似乎功能部分应该进一步分开，以便在每次需要另一个时都不要包括在内。

为什么必须在同一个空间中拥有视图状态和验证？为什么不完全分开呢？

# asp.net - 回发时视图状态失败

> ID：528485
> 
> 赞同：1
> 
> 时间：2009-02-09T14:59:35.107
> 
> 标签：asp.net, viewstate

我们有一个网络内容管理系统（基于 Sharepoint 2007/MOSS，但对于这个问题，这无关紧要，所以即使您没有在 MOSS 上工作过也请坚持下去！）。在给定页面上，有些条件我们无法更改：

*   编辑器点击“编辑”，页面发回。
*   当它在编辑模式下重新加载时，控制树完全不同。
*   **ViewState 必须在编辑模式下启用**，因为编辑控件经常回发

如果我们在演示模式下禁用 ViewState，一切正常。ViewState 在编辑回发时设置为“启用”，在生成编辑控件时第一次构建 ViewState 树，一切都很好。

如果我们在演示模式下启用 ViewState，当从演示转换到编辑时，我们会收到一个 ViewState 错误，因为控制树发生了变化。

**我们需要在演示模式下启用 ViewState，所以我们需要修复这个转换错误。**

我们尝试在回发期间禁用 ViewState，然后以编程方式再次回发并重新启用它，但这会导致 MOSS 出现验证问题，因此它似乎不是一个选项。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-09T16:32:19.860

您是否尝试过属性包上的 clear 方法 ;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-09T15:11:38.417

您是否正在使用一些高级信息更改控制树？通常在回发中，您将在按钮的事件处理程序触发之前重建相同的控件树（此时应验证视图状态），然后处理该事件 - 这可能包括清除控件树的先前部分。

# c# - 使用 Linq to SQL 选择 @@DBTS

> ID：528486
> 
> 赞同：3
> 
> 时间：2009-02-09T14:59:37.727
> 
> 标签：c#, asp.net, linq-to-sql

如何使用 Linq to SQL 使用 C# 检索 @@DBTS？

这是我正在尝试的：

IEnumerable<System.Data.Linq.Binary> 结果 = db.ExecuteQuery<System.Data.Linq.Binary>(@"SELECT @@DBTS");

但是，这会导致“类型 'System.Data.Linq.Binary' 必须声明默认（无参数）构造函数才能在映射期间构造。”

如果我尝试使用 byte[]，我会得到相同的错误，但使用的是 byte[] 而不是 System.Data.Linq.Binary。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-09T15:05:05.903

我怀疑您可能必须使用常规 ADO.NET 和 ExecuteReader/ExecuteScalar ...

```
using(SqlConnection conn = new SqlConnection(CONN_STRING))
using(SqlCommand cmd = conn.CreateCommand())
{
    cmd.CommandText = "SELECT @@DBTS";
    cmd.CommandType = CommandType.Text;
    conn.Open();
    byte[] ts = (byte[]) cmd.ExecuteScalar();
    foreach (byte b in ts)
    {
        Console.Write(b.ToString("X2"));
    }
    Console.WriteLine();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-09T18:00:13.487

我发现了另一种单独使用 Linq to SQL 的方法：

```
 IEnumerable<Int64> results =
            db.ExecuteQuery<Int64>(@"SELECT CONVERT(bigint,@@DBTS)");
        Int64 latestver = results.First(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-03T08:45:17.890

使用 EF5+ 和 DbContext 时语法更简单：

```
public long CurrentRowVersion()
{
  return Database.SqlQuery<long>("select convert(bigint, @@DBTS)").First();
} 
```

# c# - 内容页面中的正文 onload 处理程序

> ID：528487
> 
> 赞同：3
> 
> 时间：2009-02-09T15:00:09.770
> 
> 标签：c#, javascript, master-pages

如何在内容页面的正文负载上调用 Javascript 函数？因为我不能`onload`在此使用我的母版页正文的正文负载。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-09T15:08:04.587

如果您使用的是 ASP.NET Ajax，那么您可以在您的内容页面上添加一个负载处理程序：

```
Sys.Application.add_load(contentPageLoadHandler);

function contentPageLoadHandler() {
    // do stuff
} 
```

使用这种方法，每个内容页面甚至每个控件都可以设置自己的负载处理程序。请参阅[此页面](http://msdn.microsoft.com/en-us/library/bb383829.aspx)了解更多信息。

* * *

或者，如果您使用的是 jQuery，您可以通过使用这种方法（在您的内容页面上）实现相同的目的：

```
$(document).ready(function() {
  // do stuff
}); 
```

请参阅[此页面](http://docs.jquery.com/How_jQuery_Works#Launching_Code_on_Document_Ready)了解更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-09T15:15:57.220

使用成功尝试`window.onload`：

```
window.onload=function(){
 foo();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-09T15:09:03.633

您需要在母版页中注册[StartupScipt](http://msdn.microsoft.com/en-us/library/system.web.ui.page.registerstartupscript.aspx)

```
Page.RegisterStartupScript("name", script); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-05-17T19:36:24.083

似乎您之前已经处理过这个问题，只是对 googlers，实际上您可以使用母版页中的 onload，缺点是您必须在每个页面上放置与您调用的 javascript 函数相同的名称，在某些情况下可能是空的...

# cocoa-touch - iPhone模拟器上的GPRS

> ID：528488
> 
> 赞同：1
> 
> 时间：2009-02-09T15:00:15.900
> 
> 标签：cocoa-touch, ios-simulator

我想以编程方式在 iPhone 上激活/启用 GPRS。我可以查看哪些 API？模拟器上的设置应用程序中没有“网络”选项，所以我需要在设备本身上测试应用程序吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-09T15:36:32.490

使用 SDK，您不能“激活”任何类型的网络访问。只需尝试连接到远程服务器。

如果设备可以连接，它会。如果不能，您需要检测到这一点并向用户显示警告。

Apple 的示例代码有很多关于如何检测网络是否处于活动状态的示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-09T17:17:44.480

模拟器始终通过主机 Mac 的互联网连接进行连接。如果您询问如何在模拟器上测试 GPRS 性能，那么您应该购买 USB GPRS 无线电并通过它进行测试。您还可以使用内置的 ipfw 来限制模拟器的网络带宽并模拟 GPRS 带宽（请注意，延迟仍然是您的连接方式的延迟）。Throttled 提供了比裸 ipfw 更简单的 UI：http: [//www.intrarts.com/throttled.html](http://www.intrarts.com/throttled.html)

正如 August 所说，您不能通过代码打开和关闭网络，但是，您可以测试连接并建议用户打开连接并打开连接。

Apple 提供了很好的示例代码来测试连接可用性和类型：http: [//developer.apple.com/iphone/library/samplecode/Reachability/index.html](http://developer.apple.com/iphone/library/samplecode/Reachability/index.html)

# c# - 如何更改 ToolStripButton 的光标？

> ID：528489
> 
> 赞同：3
> 
> 时间：2009-02-09T15:00:19.660
> 
> 标签：c#, .net, winforms, toolstripbutton

当用户将鼠标悬停在特定的 ToolStripButton 上时，我想更改用户的光标，而不是 ToolStrip 上的其他项目。如何设置按钮的光标？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-02-09T15:13:12.843

因为 ToolStripItem 不继承自 Control，所以它没有 Cursor 属性。

您可以在 MouseEnter 事件上设置表单光标，并在 MouseLeave 事件上恢复表单光标，VB 示例如下：

```
Dim savedCursor As Windows.Forms.Cursor

Private Sub ToolStripButton1_MouseEnter(ByVal sender As Object, ByVal e As System.EventArgs) Handles ToolStripButton1.MouseEnter
    If savedCursor Is Nothing Then
        savedCursor = Me.Cursor
        Me.Cursor = Cursors.UpArrow
    End If
End Sub

Private Sub ToolStripButton1_MouseLeave(ByVal sender As Object, ByVal e As System.EventArgs) Handles ToolStripButton1.MouseLeave
    Me.Cursor = savedCursor
    savedCursor = Nothing
End Sub 
```

**更新**

这是 C# 中的相同答案：

```
private Cursor savedCursor;

private void ToolStripButton1_MouseEnter(object sender, EventArgs e) {
    if (savedCursor == null) {
        savedCursor = this.Cursor;
        this.Cursor = Cursors.UpArrow;
    }
}

private void ToolStripButton1_MouseLeave(object sender, EventArgs e) {
    this.Cursor = savedCursor;
    savedCursor = null;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-09T15:15:23.213

下拉到 Win32 并处理 WM_SETCURSOR。您可以输入自己的自定义逻辑，以根据按钮的命中测试更改光标。[查看 Raymond Chen](http://blogs.msdn.com/oldnewthing/archive/2006/11/21/1115695.aspx)的这篇文章，以更好地了解光标的设置方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-09T15:12:31.037

您必须设置 Toolstrip.Cursor 属性才能更改光标。是的，您是对的，它将更改所有工具条按钮的鼠标光标。

为了解决这个问题，为工具条上的每个按钮创建一个 OnMouseEnter 事件，然后将整个工具条的光标设置为该特定按钮所需的光标。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-30T01:09:30.623

这是最好的方法：

```
 Private Sub tsbtnGuardar_MouseEnter(sender As Object, e As EventArgs) Handles tsbtnGuardar.MouseEnter
      On Error Resume Next
      ts.Cursor = Cursors.Hand
    End Sub

Private Sub tsbtnGuardar_MouseLeave(sender As Object, e As EventArgs) Handles tsbtnGuardar.MouseLeave
    On Error Resume Next
    ts.Cursor = Cursors.Arrow
End Sub 
```

其中“ts”是工具条栏，tsbtnGuardar 是工具条按钮。它对我很有用

# c# - 如何检查 C# 中的库 (dll) 是否可用？

> ID：528492
> 
> 赞同：1
> 
> 时间：2009-02-09T15:00:42.157
> 
> 标签：c#

如何在调用之前检查库 (dll) 在运行时是否可用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-09T15:09:32.570

[AppDomain.AssemblyLoad](http://msdn.microsoft.com/en-us/library/system.appdomain.assemblyload.aspx)和[AppDomain.AssemblyResolve](http://msdn.microsoft.com/en-us/library/system.appdomain.assemblyresolve.aspx)事件分别在加载和加载失败时发生。如果您处理这些事件，您可以确定加载了哪些程序集以及哪些程序集失败了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-09T15:09:07.690

如果您知道文件的位置，您可以使用 System.IO.File.Exists 来检查文件。

您可以使用 System.Reflection.Assembly.LoadFrom 来加载它。

如果您使用这种后期绑定形式，则需要使用反射来调用 dll 中的方法。

# c++ - 在 C++ 项目中使用特定于域的语言文件

> ID：528494
> 
> 赞同：1
> 
> 时间：2009-02-09T15:01:52.403
> 
> 标签：c++, visual-studio, build-process, dsl

我正在使用自己的图形编辑器开发 DSL。此类文件具有 .own 扩展名。我还有一个小工具，可以将 .own 文件编译成 .h 文件。

X.own --> Xh 和 X/*.h

我编写了一个简单的 .rules 文件来启动生成。

**我的问题如下**：我的大多数源文件都包含 Xh，但 X.own 的更改并不意味着生成的 Xh（或任何其他生成的文件）会有所不同。这由生成器通过使用临时文件和文件比较来处理。但是 Visual Studio 似乎并不知道如何处理这一切。如果我将“输出文件”属性设置为正确的文件，它总是假定它们将被更改。如果我不这样做，它会假设它们不会生成它的构建过程！

我怎样才能把事情做好？

1）启动自定义构建工具

2）基于依赖计算构建过程

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-09T15:57:28.383

不要使用自定义构建工具选项，而是将其设置为解决方案的预构建事件（这可以采用通用命令行，就像自定义构建工具一样）。这样 MSVS 将不会检查生成的文件。只要它们被#included 或列在解决方案资源管理器中，它们就应该被很好地编译，因为 .h 文件的生成将在任何其他编译之前发生。

我发现自定义构建工具通常不如构建前和构建后事件有用，因为它期望生成或修改文件的方式。您可能会发现此工具在将来对其他事情有用（例如，在构建后压缩 .exe、正确生成其他依赖项、确保文件就位等...）

有一个很好的图表显示在哪里可以找到解决方案属性中的这些选项[here](http://geekswithblogs.net/dchestnutt/archive/2006/05/30/80113.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-03T12:14:59.343

jheriko 的回答很有趣，因为它提供了一种启动自定义工具，然后生成构建依赖项的方法。但它不是很有用，因为你失去了使用“自定义构建工具”工具包的所有可能性，你可以在其中

*   选择始终编译具有某些精确扩展名的文件
*   手动跳过特定项目配置中特定文件的自定义构建（并可视化此决定）

没有办法（或者至少我没有找到）“拥有一切”。我发现的唯一方法是让自定义构建工具在文件更新后返回一个非零数字，并向用户说明这*不是*错误并邀请他再次启动构建。下一次，自定义构建工具再次启动（不是最佳的，但我使用的工具非常快）但没有修改新文件，并且构建过程继续，使用有效的依赖关系。

注意：上述方法不适用于 Incredibuild，它似乎忽略了项目构建顺序。

# java - XPath 找不到引擎

> ID：528499
> 
> 赞同：2
> 
> 时间：2009-02-09T15:02:39.170
> 
> 标签：java, xpath

我继承了一些使用 XPath 的代码，我是新手。我现在拥有它，以便它加载文档，但是当 document.selectPath(queryPath) 它总是失败并出现以下错误：

```
`java.lang.RuntimeException:  Trying XBeans path engine... Trying XQRL... Trying delegated path engine... FAILED on //
        at org.apache.xmlbeans.impl.store.Path.getCompiledPath(Path.java:173)
        at org.apache.xmlbeans.impl.store.Path.getCompiledPath(Path.java:130)
        at org.apache.xmlbeans.impl.store.Cursor._selectPath(Cursor.java:902)
        at org.apache.xmlbeans.impl.store.Cursor.selectPath(Cursor.java:2634)
        at org.apache.xmlbeans.impl.values.XmlObjectBase.selectPath(XmlObjectBase.java:462)
        at org.apache.xmlbeans.impl.values.XmlObjectBase.selectPath(XmlObjectBase.java:446)` 
```

* * *

 `## 回答 #1

> 赞同：3
> 
> 时间：2010-06-16T14:29:27.153

谢谢你的帖子。我很困惑，因为之前对 xml bean 的命令是成功的。

没有撒克逊，这仍然有效：

```
MapDocument doc;
...
String cityQuery = "$this//City";
XmlObject[] cities = doc.selectPath(cityQuery); 
```

但是，在标签中显式选择字段时需要 saxon：

```
String aveQuery= "$this//Street[Kind='Avenue']";
XmlObject[] avenues = doc.selectPath(aveQuery); // RuntimeException without saxon on path 
```

```
java.lang.RuntimeException:
Trying XBeans path engine... Trying XQRL... Trying delegated path engine... FAILED on $this//Street[Kind='Avenue'] 
```

我希望这可能对遇到类似问题的其他人有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-09T15:52:01.517

您的类路径中需要一个 XPath 引擎，它取决于 XMLBeans 版本，请参阅 [http://wiki.apache.org/xmlbeans/XmlBeansFaq#whatJars](http://wiki.apache.org/xmlbeans/XmlBeansFaq#whatJars)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-30T12:08:59.293

如果您的 xpath 中有 []，则该移动正在搜索外部 xpath 引擎。您必须下载 saxonb9-0-0-4j & xmlbeans-xpath-2.4.0.jar 并添加到类路径

# .net - .NET 最佳实践？

> ID：528500
> 
> 赞同：4
> 
> 时间：2009-02-09T15:02:48.377
> 
> 标签：.net

我知道这是一个广泛的话题，但我对 .NET 的任何所谓的最佳实践都感兴趣，尽管我正在寻找不太明显的那些，这与“使用 as 而不是强制转换”不同。
让我们看看我可以从 Stack Overflow 用户那里学到什么有趣的东西。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-02-09T15:06:30.333

首先，查看[模式和实践](http://msdn.microsoft.com/en-us/practices/default.aspx)——“使用微软经过验证的软件工程实践。”。

接下来查看 IDesign：.NET 设计和流程解决方案。

在您深入了解这些以获得一些想法之后，请确保在您的代码库上启用代码分析/ [FxCop 。](http://en.wikipedia.org/wiki/FxCop)开始彻底检查每个警告。

最后但同样重要的是，去看看[JetBrains](http://en.wikipedia.org/wiki/JetBrains)的软件和 GET [ReSharper](http://www.jetbrains.com/dotnet/)。如果您想要 100% 的效率并确保您的代码达到高标准且头痛程度最低，那么 ReSharper（或类似的工具，其中一些可用）是必不可少的！:)

这将使您 99% 了解标准和最佳实践。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-10-12T12:33:43.687

这不是 .NET 特定的，但我认为最重要的是 SOLID 原则。Robert Martin（又名 UncleBob）在[这里](http://butunclebob.com/ArticleS.UncleBob.PrinciplesOfOod)有一个很好的参考。我将引用最重要的部分：

1.  SRP 单一职责原则 一个类应该有一个并且只有一个改变的理由。
2.  OCP 开放封闭原则 你应该能够扩展一个类的行为，而无需修改它。
3.  LSP Liskov 替换原则 派生类必须可以替换它们的基类。
4.  DIP 依赖​​倒置原则 依赖于抽象，而不是具体。
5.  ISP 接口隔离原则 制作特定于客户端的细粒度接口。

Steven Bohlen 在[dimecasts.net](http://www.dimecasts.net/Casts/ByTag/SOLID%20Principle)上制作了一系列关于他们的网络广播。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-02-09T15:20:14.917

学习如何使用[反射器](http://www.red-gate.com/products/reflector/)。它会教给你比你想象的更多的东西。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-02-09T15:13:33.280

一个有趣的练习是通过[FxCop](http://msdn.microsoft.com/en-us/library/bb429476(VS.80).aspx)等静态分析工具运行您的代码。它将带来许多提示。有些可能适合您的应用程序，有些则不适合。例如国际化。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-02-09T15:24:43.503

*   我发现这个技巧非常有用：在 web.config 的 system.web 标记中设置部署零售=“true”将强制调试标志为“false”。它还将强制用户使用自定义错误消息页面并禁用页面输出跟踪。当应用程序进入生产环境时，这很有用。

*   [Test Driven .Net](http://www.testdriven.net/)是在 Visual Studio中运行[NUnit](http://en.wikipedia.org/wiki/NUnit)测试的绝佳工具。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-08-28T22:51:31.717

> Let's see what interesting things I can learn from Stack Overflow users.

This may not be exactly on target with "best practices" but certainly may be interesting to you. It looks like Stack Overflow has its share of practices, tips and tricks documented already.

For .NET:

*   [ASP.NET MVC](https://stackoverflow.com/questions/709429/asp-net-mvc-best-practices-tips-and-tricks)
*   [Visual Studio](https://stackoverflow.com/questions/201450/visual-studio-debugger-tips-tricks-for-net)
*   [Compact Framework](https://stackoverflow.com/questions/363158/net-compact-framework-tips-tricks-and-gotchas)

For C#:

*   [Hidden Features of C#](https://stackoverflow.com/questions/9033/hidden-features-of-c)
*   [Syntax Highlighting tricks](https://stackoverflow.com/questions/619631/know-any-c-syntax-highlighting-tricks)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-02-09T15:14:09.207

您可能会发现这两本书很有用：

1.  [有效的 C#](http://www.amazon.co.uk/Effective-C-Specific-Ways-Improve/dp/0321245660)
2.  [更有效的 C#](http://www.amazon.co.uk/More-Effective-Specific-Software-Development/dp/0321485890/ref=pd_sim_b_1/280-2046954-4193738)

它们是特定于 C# 的，但您肯定会学到许多适用于任何 .NET 语言的好主意。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-02-09T15:20:50.173

对于 OO 代码，您可能需要查看[SOLID 原则](http://butunclebob.com/ArticleS.UncleBob.PrinciplesOfOod)。然而，[有些人认为](http://www.joelonsoftware.com/items/2009/01/31.html)它们妨碍了成品。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-08-28T23:19:10.430

这些并不是 .NET 特定的，而是更通用的设计：

一个立即浮现在脑海中的（因为我今天已经看到这个并且一直在抱怨它，并且之前看过太多次）是用条件检查来包装代码以检查损坏的不变量，以避免异常。

因此，您最终会得到一个系统，其中某些功能无法正常工作，并且您不知道为什么会出现这种情况，并且关于原始原因的信息为零。

我本周看到的一个很好的例子是我们的一位工程师对 UI 框架 (WPF) 负责分配的成员变量进行了空引用检查。然后，这些检查避免了执行会导致 null ref 异常的操作。因此，如果发生这种情况（灾难性错误），我们会禁用功能，让用户感到困惑和支持团队生气。

因此，快速失败，明显失败（如果可能）并记录尽可能多的信息。

我最喜欢的另一个指导原则是最小化可变性。在可能的情况下，我更喜欢设计不可变的类。由于多核问题和并发设计的需要，不变性现在变得越来越流行。我开始使用它虽然很久以前需要用复杂的共享状态图来简化系统。我根据与 .NET 的 String 和 StringBuilder 类似的想法对系统进行了建模（有时使用构建器类来构建不可变对象很方便，特别是在它相当复杂的情况下）。

这实际上是我对这个特定组件的第二个版本。我发现设计以最小化可变性并实现不可变类极大地简化了代码库。

我发现即使在设计并发系统时也很少有工程师会考虑这个因素，并且经常会得到大量极其复杂的脆弱代码。我通常对他们可以让它发挥作用的方式印象深刻！但是，对我个人而言，真正好的代码应该看起来很简单。

问候，菲尔

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-08-28T22:52:00.623

[Framework Design Guidelines](https://rads.stackoverflow.com/amzn/click/com/0321545613): Conventions, Idioms, and Patterns for Reusable .NET Libraries (2nd Edition) by Cwalina and Abrams explains the reasoning behind the FxCop rules, and much more. Not all of these may apply to your project, but you'll learn many best practices by reading this book. I refer to it often.

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-08-28T23:31:21.417

我发现有人询问 X 的最佳实践是什么，他们经常需要停下来学习思考，而不仅仅是从某人那里得到一份神奇的清单。没有 5 或 6 个项目的神奇清单，但很多时候很多是常识。想想你试图实现什么，以及这段代码是如何在你的环境中执行的。

个人问这种问题对我来说是一个即时停止信号，因为它表明这个人没有尝试过自己思考，而且很可能永远不会。开发工作中最重要的属性是解决问题和逻辑思考任务的能力。学习语法，图书馆只是一个练习，而不是全部和全部。任何开发人员都可以查看一个新的 API，并通过一些试验和错误来提供它不是完全垃圾的理解它是如何工作的。

开发不是一项仅遵循列表的机器人任务，这里的每个类/组件/插入构建块都是不同的，需要思考和理智。

# c++ - 为什么我能读 char[2] 而不能读 char[1]？

> ID：528502
> 
> 赞同：0
> 
> 时间：2009-02-09T15:03:20.667
> 
> 标签：c++, oracle, types, char

我可以在[OCI C++](http://ocicpplib.sourceforge.net/)代码中将 char 读入 char[2] ，但我无法读入 char [1](http://ocicpplib.sourceforge.net/)？

有谁知道为什么？

（oracle 数据类型为 char(1)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-04T03:39:49.560

如果输入被视为字符串，则需要`'\0'`在末尾应用空终止 (a) 的空间。也就是说，如果数据是`'a'`，那么字符串表示 ( `"a"`) 将作为两个字符`'a'`和存储在内存中`'\0'`。`'\0'`需要告诉通常的字符串处理嫌疑人字符串在哪里结束。

在不了解您正在使用的工具的情况下，我不能肯定地说，但您可能能够分配给字符变量（而不是字符数组变量）。

* * *

简要查看您发布的链接中的文档，我怀疑您应该将其`std::string`用作文本数据的接收类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-09T15:08:08.347

字符串末尾的空字符可能需要空格吗？

# asp.net - 以编程方式设置 ASP.Net 角色提供程序

> ID：528514
> 
> 赞同：0
> 
> 时间：2009-02-09T15:05:49.337
> 
> 标签：asp.net, roleprovider

我需要每个网站有多个角色提供者。我没有看到是否/如何告诉 ASP.Net 使用哪个提供程序（类似于登录控件上的成员资格提供程序属性）。我有一种感觉，因为这是在 HTTP 模块中完成的（我相信），角色检查可能在页面生命周期开始之前发生 - 但我希望有人给我一个不同的答案。

如果我想每个网站有多个提供商，我是否必须将 web.config 中的配置丢弃并手动执行检查？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-09T15:42:34.207

Providers 属性引用为应用程序启用的所有角色提供程序。您可以控制希望在运行时使用的提供程序，如下所示：

```
RoleProvider provider = Roles.Providers["MyRoleProvider"]; 
```

# c# - P/Invoke、固定和 KeepAlive 最佳实践

> ID：528517
> 
> 赞同：4
> 
> 时间：2009-02-09T15:06:31.067
> 
> 标签：c#, .net, interop, pinvoke

在工作中，我们有一个本机 C 代码，负责读取和写入专有的平面文件数据库。我有一个用 C# 编写的包装器，它将 P/Invoke 调用封装到一个 OO 模型中。自项目启动以来，P/Invoke 调用的托管包装器的复杂性显着增加。有趣的是，当前的包装器做得很好，但是，我认为我实际上需要做更多的事情来确保正确的操作。

答案带来了一些注意事项：

1.  可能不需要 KeepAlive
2.  可能不需要 GCHandle 固定
3.  如果您确实使用 GCHandle，请尝试...最后是该业务（尽管 CER 问题未解决）

以下是修改后的代码示例：

```
[DllImport(@"somedll", EntryPoint="ADD", CharSet=CharSet.Ansi,
           ThrowOnUnmappableChar=true, BestFitMapping=false,
           SetLastError=false)]
[ReliabilityContract(Consistency.MayCorruptProcess, Cer.None)]
internal static extern void ADD(
    [In] ref Int32 id,
    [In] [MarshalAs(UnmanagedType.LPStr)] string key,
    [In] byte[] data, // formerly IntPtr
    [In] [MarshalAs(UnmanagedType.LPArray, SizeConst=10)] Int32[] details,
    [In] [MarshalAs(UnmanagedType.LPArray, SizeConst=2)] Int32[] status);

public void Add(FileId file, string key, TypedBuffer buffer)
{
    // ...Arguments get checked

    int[] status = new int[2] { 0, 0 };
    int[] details = new int[10];

    // ...Make the details array

    lock (OPERATION_LOCK)
    {
        ADD(file.Id, key, buffer.GetBytes(), details, status);
        // the byte[], details, and status should be auto
        // pinned/keepalive'd

        if ((status[0] != 0) || (status[1] != 0))
            throw new OurDatabaseException(file, key, status);

        // we no longer KeepAlive the data because it should be auto
        // pinned we DO however KeepAlive our 'file' object since 
        // we're passing it the Id property which will not preserve
        // a reference to 'file' the exception getting thrown 
        // kinda preserves it, but being explicit won't hurt us
        GC.KeepAlive(file);
    }
} 
```

我的（修改后的）问题是：

1.  数据、详细信息和状态是否会自动固定/保持活动状态？
2.  我是否错过了正常运行所需的其他任何内容？

编辑：我最近发现了一个图表，它激发了我的好奇心。它基本上表明，一旦您调用 P/Invoke 方法，[GC 就可以抢占您的本机代码](http://i.msdn.microsoft.com/ms993883.intmiglongch03-01(en-us,MSDN.10).gif)。因此，虽然本地调用可能是同步进行的，但 GC*可以*选择运行和移动/删除我的内存。我想现在我想知道自动固定是否足够（或者它是否可以运行）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-09T15:37:57.993

除非您的非托管代码直接操作内存，否则我认为您不需要固定对象。Pinning 本质上是通知 GC 在收集周期的紧凑阶段它不应该在内存中移动该对象。这仅对非托管内存访问很重要，其中非托管代码期望数据始终位于传入时的同一位置。GC 运行的“模式”（并发或抢占）应该对固定没有影响对象作为固定的行为规则适用于任一模式。.NET 中的编组基础结构试图巧妙地了解它如何在托管/非托管代码之间编组数据。在这种特定情况下，您正在创建的两个数组将在编组过程中自动固定。

除非您的非托管 ADD 方法是异步的，否则可能也不需要调用 GC.KeepAlive。GC.KeepAlive 仅用于防止 GC 在长时间运行的操作期间回收它认为已死的对象。由于文件是作为参数传入的，因此在调用托管 Add 函数之后，它可能会在代码中的其他地方使用，因此不需要 GC.KeepAlive 调用。

您编辑了代码示例并删除了对 GCHandle.Alloc() 和 Free() 的调用，这是否意味着代码不再使用它们？如果您仍在使用它，您的 lock(OPERATION_LOCK) 块中的代码也应该包含在 try/finally 块中。在您的 finally 块中，您可能想要执行以下操作：

```
if (dataHandle.IsAllocated)
{
   dataHandle.Free();
} 
```

此外，您可能想要验证调用 GCHandle.Alloc() 不应该在您的锁内。通过将它放在锁之外，您将有多个线程来分配内存。

至于自动固定，如果数据在编组过程中自动固定，则它会被固定，并且如果在非托管代码运行时发生这种情况，则不会在 GC 收集周期期间移动它。我不确定我是否完全理解您关于继续调用 GC.KeepAlive 原因的代码注释。未管理的代码是否实际上为 file.Id 字段设置了一个值？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-09T15:40:09.503

1.  我不确定您的 KeepAlive 的意义是什么，因为您已经释放了 GCHandle - 此时似乎不再需要数据？
2.  与#1 类似，您为什么觉得需要调用 KeepAlive？您发布的代码之外的东西是我们没有看到的吗？
3.  可能不是。如果这是一个同步的 P/Invoke，那么封送拆收器实际上将固定传入的变量，直到它返回。事实上，您可能也不需要固定数据（除非这是异步的，但您的构造表明它不是）。
4.  不，没有遗漏任何东西。我认为您实际上添加的内容超出了您的需要。

编辑以回应原始问题编辑和评论：

该图简单地显示了 GC*模式*的变化，该模式对 pinned 对象没有影响。类型[在编组期间被固定或复制](http://msdn.microsoft.com/en-us/23acw07k.aspx)，具体取决于类型。在这种情况下，您使用的是字节数组，[文档说它是 blittable type](http://msdn.microsoft.com/en-us/library/75dwhxf7.aspx)。您会看到它还特别指出“作为一种优化，仅包含 blittable 成员的 blittable 类型和类的数组在编组期间被固定而不是复制。” 这意味着数据在调用期间被固定，如果 GC 运行，它无法移动或释放数组。状态也是如此。

传递的字符串稍有不同，复制字符串数据并在堆栈上传递指针。这种行为也使它不受收集和压缩的影响。GC 无法触及副本（它对此一无所知）并且指针在堆栈上，GC 不受影响。

我仍然没有看到调用 KeepAlive 的意义。据推测，该文件不可用于收集，因为它已传递给该方法并具有其他一些根（声明它的位置）可以使其保持活动状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-09T15:19:51.157

一个直接的问题似乎是，如果您抛出异常，您将永远不会调用 dataHandle.Free() ，从而导致泄漏。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-02-26T17:00:06.990

阅读[托管代码和本机代码互操作性的最佳实践](http://msdn.microsoft.com/en-us/magazine/dd315414.aspx)并使用[PInvoke 互操作助手](http://clrinterop.codeplex.com/releases/view/14120)

# wcf-security - WCF System.ServiceModel.Security.SecurityNegotiationException

> ID：528518
> 
> 赞同：1
> 
> 时间：2009-02-09T15:06:45.667
> 
> 标签：wcf-security

尝试从另一台服务器调用我的服务时，我收到以下错误消息。

```
Service cannot be started.
System.ServiceModel.Security.SecurityNegotiationException:
The caller was not authenticated by the service. --->
System.ServiceModel.FaultException:
The request for security token could not be satisfied because authentication failed. 
```

当我尝试将客户端连接到服务器时，在我的事件查看器中。

我在服务器中启用了跟踪，它看起来像

`System.IdentityModel.Tokens.SecurityTokenValidationException`正在被抛出。消息显示“该服务不允许您匿名登录。”

我检查了 IIS -> WCF 网站，我确实启用了“启用匿名访问”。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-02-09T15:14:52.793

除了匿名之外，是否启用了其他安全设置？

如果您选择了匿名和另一个，并且选择了基本类型或其他类型，您将遇到此问题。使用 WCF，在 IIS 中托管时，您几乎受限于单一的安全身份验证模型。

如果您能详细说明一下，我可能会提供更好的答案。:)

# plugins - 哪些工具可以为 Bugzilla 或 Mylyn 提供燃尽图？

> ID：528519
> 
> 赞同：9
> 
> 时间：2009-02-09T15:07:01.627
> 
> 标签：plugins, agile, bugzilla, mylyn

我和我的团队需要使用 Mylyn 处理一个在 Bugzilla 中提交错误的项目。

**您是否知道任何工具或插件可以为 Bugzilla 或 Mylyn 提供受 scrum 启发的燃尽图？**

希望这个工具可以免费用于商业用途，但我们不会对商业工具关闭。

**更新：** 4 小时的研究让我找到了很少的免费工具。看起来 bugzilla 在敏捷团队中并不受欢迎！显然，这不是最合适的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-09T21:38:00.750

[Songbird](http://auberger.com/2008/12/15/songbird-path-to-agility-part-iii/)项目非常出色地记录了他们如何自定义**Bugzilla**实例并开发了自动生成每日报告的工具，包括燃尽图。他们在 MIT 许可下以 ruby**​​ 开源代码的形式发布了他们的工具集。**非常有趣的东西，特别是因为它来自一个备受瞩目的重要社区项目。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-09T19:44:38.387

有[Scrum 愿景](http://sourceforge.net/projects/scrumvision/)：

*   **自由**
*   **在非常活跃的开发中**开源****
***   为**米林***   将燃尽图发布到*Google 电子表格***

 **我们认为这是最后的选择，因为图表是在场外生成的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-09T20:27:34.927

还有[TargetProcess](http://www.targetprocess.com/Product/Integration.aspx)：

*   **商业的**
*   **最多 5 人**免费，自托管（需要 Windows 服务器）****
***   与**Bugzilla**和 JIRA 集成：
    *   **Bugzilla**同步是自动的、单向的（只读）
    *   JIRA 同步是自动的，双向的
    *   颠覆、硒等**

 *** * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-02-09T21:59:49.153

还有[VersionOne](http://www.versionone.com/products_CompareEditions.asp#)：

*   据说是最常用的**商业**工具
*   与**Bugzilla**、JIRA、Subversion、Fitnesse 等集成

还有一个非常好的[功能列表 (PDF)。](http://www.versionone.com/pdf/AgileToolEvaluator.pdf)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-09T19:51:09.273

发现[ScrumWorks Pro](http://danube.com/scrumworks/pro/features/integrations)具有燃尽图并不容易，但仔细一看，确实如此：

*   **商业的**
*   价格未公开（联系公司报价！）
*   Pro 与**Bugzilla**和 JIRA集成
*   同步是**手动**的：import 或 update-from-reimport
*   同步是**单向的**：错误/问题在软件中是只读的

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-02-09T20:01:18.690

我还找到了[Rally Enterprise Edition](http://www.rallydev.com/products/editions/)。

*   **商业的**
*   EE 集成：
    *   **Bugzilla**和 JIRA：
        *   **Bugzilla**同步是自动的，双向的
        *   JIRA 同步是手动的，双向的
    *   **Mylyn** & TaskTop
    *   Subversion、Fitnesse、Hudson、Ant 等等

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-02-09T21:24:50.267

还有[Yoxel](http://www.yoxel.com)：

*   **商业开源**
*   与**Bugzilla**等集成
*   不确定燃尽图是否是免费开源产品的一部分
*   UI 和 UX 让找到燃尽图变得非常困难。或者可能是因为演示数据没有设置为使它们工作，因为我确实看到了折线图，只是没有看起来像燃尽图的折线图。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-01-05T02:05:53.977

*   免费用于商业用途
*   在线的
*   简单的

看看： [http ://www.burndown-charts.com/teams/dreamteam/sprints/prototype-x](http://www.burndown-charts.com/teams/dreamteam/sprints/prototype-x)

哦，他们还支持不同时区和 openID 的团队。

# wpf - WPF：如何使空的TextBlock不占用空间？

> ID：528525
> 
> 赞同：11
> 
> 时间：2009-02-09T15:09:26.813
> 
> 标签：wpf, layout, visibility, textblock

假设我有一个简单的布局，例如：

```
<StackPanel>
  <TextBlock Text="{Binding Path=Title}" />
  <TextBlock Text="{Binding Path=ShortDescription}" />
  <TextBlock Text="{Binding Path=LongDescription}" />
</StackPanel> 
```

现在，当我将 ShortDescription 设置为 null 或空字符串时，在第二个 TextBlock 的位置仍然存在间隙。是否有一些属性可以防止空文本块占用空间？还是我应该使用其他控件？

谢谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-02-09T15:13:11.767

您想将文本框的可见性设置为“已折叠”。

可见性可以是：
可见 - 不言自明
隐藏 - 不可见但仍占用空间
折叠 - 不可见且不占用空间

编辑：您可能应该设置一个触发器，如下所示：

```
<Trigger Property="Text" Value="{x:Null}">
    <Setter Property="Visibility" Value="Collapsed"/>
</Trigger> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2011-07-29T18:13:41.403

你可能想试试这个：

```
<TextBlock.Style>
    <Style TargetType="{x:Type TextBlock}">
        <Style.Triggers>
            <Trigger Property="Text" Value="">
                <Setter Property="Visibility" Value="Collapsed"/>
            </Trigger>
        </Style.Triggers>
    </Style>
</TextBlock.Style> 
```

这应该可以解决基于 Null / Empty Binding 的空白空间问题。

# sql - MS SQL 中的自引用约束

> ID：528529
> 
> 赞同：11
> 
> 时间：2009-02-09T15:10:54.487
> 
> 标签：sql, sql-server, sql-server-2005, tsql

MS SQL 是否使用 ON DELETE CASCADE 选项限制自引用约束？我有一个具有父子关系的表，PARENT_ID 列是 ID 的外键。使用 ON DELETE CASCADE 选项创建它会导致错误

> “引入 FOREIGN KEY 约束可能会导致循环或多个级联路径。指定 ON DELETE NO ACTION 或 ON UPDATE NO ACTION，或修改其他 FOREIGN KEY 约束。”

我不敢相信我必须以递归模式删除这个层次结构。除了触发器有什么问题吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-02-09T15:42:36.407

在这种情况下，您无法在具有自引用约束的表上设置 ON DELETE CASCADE。存在潜在的循环逻辑问题，因此不允许这样做。

[这里](http://msdn.microsoft.com/en-us/library/aa902684(SQL.80).aspx)有一篇很好的文章——尽管它适用于 SQL 的 8 版而不是 9 版——但同样的规则也适用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-08-16T14:37:45.037

我刚刚回答[了另一个问题](https://stackoverflow.com/q/38977004/5089204)，*该*问题被绑定为重复。我认为也值得将我的答案放在这里：

这是不可能的。你可以解决这个问题`INSTEAD OF TRIGGER`

```
create table locations 
(
    id int identity(1, 1),
    name varchar(255) not null,
    parent_id int,

    constraint pk__locations
        primary key clustered (id)

)
GO

INSERT INTO locations(name,parent_id)  VALUES
 ('world',null)
,('Europe',1)
,('Asia',1)
,('France',2)
,('Paris',4)
,('Lyon',4);
GO 
```

--此触发器将使用递归 CTE 来获取您要删除的所有 ID 之后的所有 ID。这些 ID 将被删除。

```
CREATE TRIGGER dbo.DeleteCascadeLocations ON locations
INSTEAD OF DELETE 
AS
BEGIN
    WITH recCTE AS
    (
        SELECT id,parent_id
        FROM deleted

        UNION ALL

        SELECT nxt.id,nxt.parent_id
        FROM recCTE AS prv
        INNER JOIN locations AS nxt ON nxt.parent_id=prv.id
    )
    DELETE FROM locations WHERE id IN(SELECT id FROM recCTE);
END
GO 
```

--在这里测试一下，用不同的ID试试。你也可以试试`WHERE id IN(4,3)`...

```
SELECT * FROM locations;

DELETE FROM locations WHERE id=4;

SELECT * FROM locations
GO 
```

--清理（小心使用真实数据！）

```
if exists(select 1 from INFORMATION_SCHEMA.TABLES where TABLE_NAME='locations')
---DROP TABLE locations; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T11:24:08.600

```
CREATE TRIGGER MyTable_OnDelete ON MyTable
INSTEAD OF DELETE
AS 
BEGIN

  SET NOCOUNT ON;

  DELETE FROM mt
  FROM   deleted AS D
  JOIN   MyTable AS mt
  ON     d.Id = mt.ParentId

  DELETE FROM mt
  FROM   deleted AS D
  JOIN   MyTable AS mt
  ON     d.Id = mt.Id

END 
```

# sql - SQL 查询在链接服务器上给出错误结果

> ID：528534
> 
> 赞同：4
> 
> 时间：2009-02-09T15:12:15.933
> 
> 标签：sql, sql-server

我正在尝试从 2 个表中提取用户数据，一个在本地，一个在链接服务器上，但是在查询远程服务器时我得到了错误的结果。

我已将查询缩减为

```
select * from SQL2.USER.dbo.people where persId = 475785 
```

进行测试，发现当我运行它时，即使我知道这个人存在，我也没有得到任何结果。（persId 是整数，db 是 SQL Server 2000，dbo.people 是表）

如果我复制/粘贴查询并在与数据库相同的服务器上运行它，那么它就可以工作。

例如，它似乎只影响某些运行的用户 ID

```
select * from SQL2.USER.dbo.people where persId = 475784 
```

在我想要的用户之前工作正常。

奇怪的是我发现

```
select * from SQL2.USER.dbo.people where persId like '475785' 
```

也可以，但是

```
select * from SQL2.USER.dbo.people where persId > 475784 
```

带回 persIds 从 22519 开始的记录，而不是我期望的 475785。

希望这对某人有意义

有任何想法吗 ？

更新：由于内部担心对 live people 表进行任何更改，我暂时移动了我的数据库，因此它们都在同一台服务器上，因此链接服务器问题不适用。将整个批次迁移到单独的集群后，我将能够正确调查。一旦发生这种情况，我会更新更新，我可以通过所有建议来解决问题。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-09T17:16:51.003

LIKE 操作的事实不是主要线索：LIKE 强制整数为字符串（因此您可以说 WHERE field LIKE '2%' 并且您将获得所有以 2 开头的记录，即使字段是整数类型）。您不正确的比较会让我认为您的索引已损坏，但您说它们在不通过链接使用时可以工作......但是，所选索引*可能*因用途而异？（我似乎记得一个实例，当我有重复的索引并且只有一个是陈旧的时，尽管那是很久以前回忆起确切的原因）。

不过，我会尝试使用 DBCC DBREINDEX (tablenname) 命令重建您的索引。如果事实证明这样做可以修复您的查询，您可能希望全部重建它们：[这是一个用于轻松重建它们的脚本](http://www.sql-server-performance.com/tips/rebuilding_indexes_p1.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-15T23:46:08.640

链接服务器是否使用相同的排序规则？*根据使用的索引，如果服务器不*兼容排序规则，我可能会看到类似的情况，但链接服务器设置*为兼容*排序规则（这告诉 Sql Server 它可以在远程服务器上运行查询）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-10T23:02:17.223

dbo.people 是表还是视图？我已经看到类似的情况，其中基础表架构已更改，删除并重新创建视图解决了问题，尽管如果直接在链接服务器上运行查询确实表明某些基于索引的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-15T23:41:39.743

对我来说听起来像是一个错误-我已经阅读了这些方面的一些问题，但 btu 不记得具体是什么。您正在运行什么版本的 SQL Server？

```
select * from SQL2.USER.dbo.people where persId = 475785 
```

对于失败的 PersID 如何：

```
SELECT *
FROM OpenQuery(SQL2, 'SELECT * FROM USER.dbo.people WHERE persId = 475785') 
```

表现？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-13T06:02:00.160

我会检查以下内容：

*   检查链接服务器上的定义，并确认 SQL2 是您期望的服务器
*   检查并比较远程和本地服务器的执行计划
*   尝试通过 IP 地址而不是名称进行链接，以确保您拥有正确的机器
*   将代码放入远程机器上的存储过程中，然后尝试调用它

# networking - 不可路由的 IP 地址

> ID：528538
> 
> 赞同：21
> 
> 时间：2009-02-09T15:13:07.883
> 
> 标签：networking, ip-address, tcp

我知道 127.0.0.1 按照惯例是环回地址，并且有各种地址范围保留供本地使用。

是否有保留永远不会分配的 IP 地址？

我想测试当找不到 IP 地址时某些东西是否有效，我可以只使用一个未使用的本地地址，但认为可能有一个地址是为此类用途保留的。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-08-26T05:01:16.287

根据[关于保留地址的 Wikipedia 文章](http://en.wikipedia.org/wiki/Reserved_IP_addresses)，有 3 个测试网络仅用于文档。

```
192.0.2.0/24
198.51.100.0/24
203.0.113.0/24 
```

这些范围之一中的任何地址（例如 203.0.113.1）不应该映射到任何东西，并且确实应该无法路由。

根据您正在执行的测试类型，还有其他列出的地址和地址范围可能适合您尝试执行的操作。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2009-02-09T15:23:32.193

我想你可能想改写你的问题。私有地址段（10.0.0.0 - 10.255.255.255、172.16.0.0 - 172.31.255.255、192.168.0.0 - 192.168.255.255）通常称为“不可路由”地址。我认为您要的是一个保留的 IP 地址，该地址专门保留为永远不会被分配。据我所知，没有以这种方式保留的地址。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-02-09T15:22:42.603

里面的任何东西

10.0.0.0/8
172.16.0.0/12
192.168.0.0/16

范围将被任何 Internet 路由器丢弃 - 它们仅供内部使用，不路由。没有一个地址，但使用您内部不使用的块中的一个地址，只要您的路由器不太聪明就可以完成这项工作。

当然，如果您有一个托管路由器，它很可能会丢弃这些路由器，而不是让它们离开内部网络。

RFC-3330 列出了这些以及许多其他块

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2009-02-09T15:25:53.483

查看[RFC 3330](https://www.rfc-editor.org/rfc/rfc3330)，我没有看到为全局不可路由地址保留的任何 IPv4 地址。

我要做的是在本地 DNS 中将一个未使用的本地网络 IP 地址分配给名称“blackhole.<domain>”（使用适当的域），这样您就可以保证一个稳定的地址，任何计算机都不会响应。当然，与配置 DNS 时一样，请确保没有配置 DHCP 服务器来提供相同的地址。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2013-02-16T01:03:12.517

**192.0.2.0**

根据[http://en.wikipedia.org/wiki/Reserved_IP_addresses](http://en.wikipedia.org/wiki/Reserved_IP_addresses)

> 在 RFC 5737 中指定为“TEST-NET”，仅用于文档和示例源代码，不应公开使用。

[https://www.rfc-editor.org/rfc/rfc5737](https://www.rfc-editor.org/rfc/rfc5737)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-12-18T19:36:20.333

根据[https://en.wikipedia.org/wiki/0.0.0.0，IP](https://en.wikipedia.org/wiki/0.0.0.0)地址`0.0.0.0`“是一个不可路由的元地址，用于指定无效、未知或不适用的目标。”</p>

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-02-09T17:29:36.870

好吧，给出的答案或多或少是正确的。您可以做的是分配一些通常仅用作网络掩码的特殊地址。这些将永远不会作为 IP 地址在野外遇到，因此是安全的 - 只要您实际上并未尝试在错误的情况下使用它们。

最好的是：

0.0.0.0 - 但注意不要用它打开套接字，因为它会打开一个连接到计算机当前主界面的套接字

255.255.255.255 - 这个永远不会分配，所以它应该是最好的哨兵，除非你需要与网络掩码交互。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-02-14T09:44:12.390

我有一个类似的问题，我想办法；如果我理解正确；使用不可转发的网络，例如：169.254.0.0/16 或 127.0.0.0/8

[http://www.iana.org/assignments/iana-ipv4-special-registry/iana-ipv4-special-registry.xhtml](http://www.iana.org/assignments/iana-ipv4-special-registry/iana-ipv4-special-registry.xhtml)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2022-01-11T19:56:17.437

IPv6 是否适合您的目的？看起来 IPv6 有一个专门为黑洞使用而保留的整个范围：`100::/64`

所以，具体来说，`100::`应该工作。

维基百科参考：[https ://en.wikipedia.org/wiki/IPv6_address#Special_addresses](https://en.wikipedia.org/wiki/IPv6_address#Special_addresses)

RFC：[https ://datatracker.ietf.org/doc/html/rfc6666](https://datatracker.ietf.org/doc/html/rfc6666)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-02-16T15:13:08.833

**根据测试的内容，**您可能可以使用子网广播地址。IE

网络 = 192.168.1.0 /24

广播 = 192.168.1.255

* * *

## 回答 #11

> 赞同：-3
> 
> 时间：2013-11-26T15:49:33.613

对于 IPV4，不可路由的地址范围是从 10.1.1.1 到 10.255.255.254，从 172.16.1.1 到 172.31.255.254，从 192.168.1.1 到 192.168.255.254。这些 IP 地址在专用网络之外将无法识别。

# combobox - 对象未设置为对象的实例！！组合框 SelectedIndex SelectedItem

> ID：528541
> 
> 赞同：1
> 
> 时间：2009-02-09T15:13:27.180
> 
> 标签：combobox, clearcase, selecteditem, selectedindex

我正在开发一个程序，它获取所有 Clearcase 区域（基本上是字符串）并将它们添加到组合框中。我比较了组合框中新添加的项目中现有的透明大小写区域字符串，如果找到它，那么我想选择它，但是因为第一次没有选择任何内容，所以 selectedItem 为 null & selectedIndex = -1。当我将 0 分配给 selectedIndex 时，错误来了 --> 对象未设置为对象的实例！！将某些内容分配给 selectedItem 时出现同样的问题；给出一个错误。

我的代码有什么问题？

```
 private void PopulateClearCaseRegionComboBox ( )
    {
        clearCaseRegionComboBox.Items.Clear();

        foreach ( Match token in RegularExpression.Match( "\\w+", clearTool.CmdExec( "lsregion" ) ) )
        {
            clearCaseRegionComboBox.Items.Add(token.Value.Trim());
            if (clearCaseRegion.ToUpperInvariant() == token.Value.Trim().ToUpperInvariant())
            {
                clearCaseRegionComboBox.SelectedIndex = clearCaseRegionComboBox.Items.IndexOf(token.Value.Trim());
            }
        }
        clearCaseRegionComboBox.Sorted = true;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T14:10:07.307

通知：当您设置 SelectedIndex 或 SelectedItem 时，也会发生 SelectedIndexChanged 事件。因此，如果您在那里有东西，也请检查一下。:) 我已经过了几个小时，因为你在调试时看不到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-09T18:13:49.960

您确定以下行返回有效索引吗？

> clearCaseRegionComboBox.Items.IndexOf(token.Value.Trim());

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-09T18:24:21.760

Add 方法返回新添加项的索引。您可以在 if 语句中使用该值。

```
private void PopulateClearCaseRegionComboBox ( )
{
    clearCaseRegionComboBox.Items.Clear();

    foreach ( Match token in RegularExpression.Match( "\\w+", clearTool.CmdExec( "lsregion" ) ) )
    {
        int index = clearCaseRegionComboBox.Items.Add(token.Value.Trim());
        if (clearCaseRegion.ToUpperInvariant() == token.Value.Trim().ToUpperInvariant())
        {
            clearCaseRegionComboBox.SelectedIndex = index;
        }
    }
    clearCaseRegionComboBox.Sorted = true;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-10T19:34:38.317

也许您可以在上下文中显示更多代码？我这样说是因为此时在您的代表代码中似乎不可能出现此错误。您已经使用该对象添加了第 3 行。

您是否沉迷于组合框上将 clearCaseRegionComboBox 变量分配为 null 的任何事件？

# 64-bit - 切换到 64 位还是停留在 32 位？

> ID：528544
> 
> 赞同：1
> 
> 时间：2009-02-09T15:13:35.993
> 
> 标签：64-bit, exchange-server, visual-foxpro, foxpro

我有一个小办公室，我目前使用我编写的 Visual Foxpro 应用程序来处理所有数据。

是时候购买新服务器了。VFP 和 64 位操作系统似乎存在问题。我应该迁移到 64 位并尝试处理出现的问题，还是购买运行旧 32 位架构的新服务器？

后者当然需要我使用 Exchange 2003 而不是 2007 或 2008。可能没什么大不了的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-09T15:19:00.893

也许您可以使用虚拟化产品在仍然兼容 VFP 的现代服务器上设置适当的环境。

这样，您就可以在新服务器上的虚拟 32 位环境中运行有冲突的应用程序，并在真实的 64 位环境中运行外部现代应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-09T15:17:56.327

升级到 64 位的主要原因是允许操作系统使用超过 4 GB 的 RAM。在 32 位架构中，CPU 寄存器只能寻址 2^32 个内存位置。在 64 位处理器中，您可以获得多达 2^64 个内存位置。这在很长一段时间内已经足够了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-09T15:19:31.767

购买两台便宜的服务器而不是一台。:)

但说真的，如果有问题，你可能想买一个 64 位的盒子，然后在上面加载一个 32 位的操作系统。

然后，当问题解决后，或者您可以自己解决问题时，您可以重新进行更改。这只是一个想法。

不过，我的另一个意见是用更现代和维护的东西来替换 Visual FoxPro 应用程序。;) 您可能会惊讶于某些开发堆栈的效率有多么高——尤其是对于较小的办公室。

...正如 Kosi2801 所说的虚拟化。这也适用于我的建议。购买一个不错的 64 位机器并使用 VMWare 的 ESX Server。它甚至可能比实际尝试在单个机器上运行所有服务更好。这些天来，VMWare 提供的工具非常令人印象深刻。

# asp.net-mvc - 日期格式不正确的 MVC DateTime 绑定

> ID：528545
> 
> 赞同：137
> 
> 时间：2009-02-09T15:14:05.353
> 
> 标签：asp.net-mvc, datetime, localization, formatting, model-binders

Asp.net-MVC 现在允许隐式绑定 DateTime 对象。我有一个动作

```
public ActionResult DoSomething(DateTime startDate) 
{ 
... 
}
```

这成功地将 ajax 调用中的字符串转换为 DateTime。但是，我们使用日期格式 dd/MM/yyyy；MVC 正在转换为 MM/dd/yyyy。例如，使用字符串“09/02/2009”提交对操作的调用会导致 DateTime 为“02/09/2009 00:00:00”，或者在我们的本地设置中为 9 月 2 日。

为了日期格式，我不想滚动我自己的模型活页夹。但是，如果 MVC 能够为我执行此操作，则似乎不必更改操作以接受字符串然后使用 DateTime.Parse。

有什么方法可以更改 DateTime 的默认模型绑定器中使用的日期格式？默认模型绑定器不应该使用您的本地化设置吗？

* * *

## 回答 #1

> 赞同：166
> 
> 时间：2009-02-09T15:18:49.430

我刚刚通过更详尽的谷歌搜索找到了答案：

Melvyn Harbour 详细解释了为什么 MVC 会以这种方式处理日期，以及如何在必要时覆盖它：

[http://weblogs.asp.net/melvynharbour/archive/2008/11/21/mvc-modelbinder-and-localization.aspx](http://weblogs.asp.net/melvynharbour/archive/2008/11/21/mvc-modelbinder-and-localization.aspx)

> 在查找要解析的值时，框架按特定顺序查找，即：
> 
> 1.  RouteData（上面未显示）
> 2.  URI 查询字符串
> 3.  申请表
> 
> 然而，只有最后一个是文化意识的。从本地化的角度来看，这是有充分理由的。想象一下，我编写了一个 Web 应用程序，显示我在线发布的航空公司航班信息。我通过单击当天的链接（可能类似于[http://www.melsflighttimes.com/Flights/2008-11-21](http://www.melsflighttimes.com/Flights/2008-11-21)）查找特定日期的航班，然后想通过电子邮件将该链接通过电子邮件发送给我的同事美国。我们可以保证我们都将查看同一页数据的唯一方法是使用 InvariantCulture。相比之下，如果我使用表格预订航班，那么一切都在一个紧凑的周期中发生。数据在写入表单时可以尊重 CurrentCulture，因此在从表单返回时需要尊重它。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2010-05-24T12:37:42.603

我会在全球范围内设置您的文化。ModelBinder 把它捡起来！

```
 <system.web>
    <globalization uiCulture="en-AU" culture="en-AU" /> 
```

或者您只需为此页面更改此设置。
但我认为在 web.config 全局范围内更好

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2013-07-15T10:00:13.683

我在将短日期格式绑定到 DateTime 模型属性时遇到了同样的问题。在查看了许多不同的示例（不仅涉及 DateTime）之后，我整理了以下内容：

```
using System;
using System.Globalization;
using System.Web.Mvc;

namespace YourNamespaceHere
{
    public class CustomDateBinder : IModelBinder
    {
        public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
        {
            if (controllerContext == null)
                throw new ArgumentNullException("controllerContext", "controllerContext is null.");
            if (bindingContext == null)
                throw new ArgumentNullException("bindingContext", "bindingContext is null.");

            var value = bindingContext.ValueProvider.GetValue(bindingContext.ModelName);

            if (value == null)
                throw new ArgumentNullException(bindingContext.ModelName);

            CultureInfo cultureInf = (CultureInfo)CultureInfo.CurrentCulture.Clone();
            cultureInf.DateTimeFormat.ShortDatePattern = "dd/MM/yyyy";

            bindingContext.ModelState.SetModelValue(bindingContext.ModelName, value);

            try
            {
                var date = value.ConvertTo(typeof(DateTime), cultureInf);

                return date;
            }
            catch (Exception ex)
            {
                bindingContext.ModelState.AddModelError(bindingContext.ModelName, ex);
                return null;
            }
        }
    }

    public class NullableCustomDateBinder : IModelBinder
    {
        public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
        {
            if (controllerContext == null)
                throw new ArgumentNullException("controllerContext", "controllerContext is null.");
            if (bindingContext == null)
                throw new ArgumentNullException("bindingContext", "bindingContext is null.");

            var value = bindingContext.ValueProvider.GetValue(bindingContext.ModelName);

            if (value == null) return null;

            CultureInfo cultureInf = (CultureInfo)CultureInfo.CurrentCulture.Clone();
            cultureInf.DateTimeFormat.ShortDatePattern = "dd/MM/yyyy";

            bindingContext.ModelState.SetModelValue(bindingContext.ModelName, value);

            try
            {
                var date = value.ConvertTo(typeof(DateTime), cultureInf);

                return date;
            }
            catch (Exception ex)
            {
                bindingContext.ModelState.AddModelError(bindingContext.ModelName, ex);
                return null;
            }
        }
    }
} 
```

为了保持在全局 ASAX 文件中注册路由等的方式，我还在名为 CustomModelBinderConfig 的 MVC4 项目的 App_Start 文件夹中添加了一个新的 sytatic 类：

```
using System;
using System.Web.Mvc;

namespace YourNamespaceHere
{
    public static class CustomModelBindersConfig
    {
        public static void RegisterCustomModelBinders()
        {
            ModelBinders.Binders.Add(typeof(DateTime), new CustomModelBinders.CustomDateBinder());
            ModelBinders.Binders.Add(typeof(DateTime?), new CustomModelBinders.NullableCustomDateBinder());
        }
    }
} 
```

然后，我只需从我的 Global ASASX Application_Start 中调用静态 RegisterCustomModelBinders，如下所示：

```
protected void Application_Start()
{
    /* bla blah bla the usual stuff and then */

    CustomModelBindersConfig.RegisterCustomModelBinders();
} 
```

这里需要注意的是，如果您将 DateTime 值写入隐藏字段，如下所示：

```
@Html.HiddenFor(model => model.SomeDate) // a DateTime property
@Html.Hiddenfor(model => model) // a model that is of type DateTime 
```

我这样做了，页面上的实际值的格式是“MM/dd/yyyy hh:mm:ss tt”，而不是我想要的“dd/MM/yyyy hh:mm:ss tt”。这导致我的模型验证失败或返回错误的日期（显然交换了日期和月份值）。

经过大量挠头和尝试失败后，解决方案是通过在 Global.ASAX 中执行此操作来为每个请求设置文化信息：

```
protected void Application_BeginRequest()
{
    CultureInfo cInf = new CultureInfo("en-ZA", false);  
    // NOTE: change the culture name en-ZA to whatever culture suits your needs

    cInf.DateTimeFormat.DateSeparator = "/";
    cInf.DateTimeFormat.ShortDatePattern = "dd/MM/yyyy";
    cInf.DateTimeFormat.LongDatePattern = "dd/MM/yyyy hh:mm:ss tt";

    System.Threading.Thread.CurrentThread.CurrentCulture = cInf;
    System.Threading.Thread.CurrentThread.CurrentUICulture = cInf;
} 
```

如果将其粘贴在 Application_Start 甚至 Session_Start 中，它将不起作用，因为这会将其分配给会话的当前线程。如您所知，Web 应用程序是无状态的，因此之前为您的请求提供服务的线程与为您当前的请求提供服务的线程不同，因此您的文化信息已进入数字天空中的伟大 GC。

感谢：Ivan Zlatev - [http://ivanz.com/2010/11/03/custom-model-binding-using-imodelbinder-in-asp-net-mvc-two-gotchas/](http://ivanz.com/2010/11/03/custom-model-binding-using-imodelbinder-in-asp-net-mvc-two-gotchas/)

加里克-https [://stackoverflow.com/a/2468447/578208](https://stackoverflow.com/a/2468447/578208)

德米特里 - [https://stackoverflow.com/a/11903896/578208](https://stackoverflow.com/a/11903896/578208)

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-08-10T14:35:21.767

在 MVC 3 中会略有不同。

假设我们有一个控制器和一个带有 Get 方法的视图

```
public ActionResult DoSomething(DateTime dateTime)
{
    return View();
} 
```

我们应该添加 ModelBinder

```
public class DateTimeBinder : IModelBinder
{
    #region IModelBinder Members
    public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        DateTime dateTime;
        if (DateTime.TryParse(controllerContext.HttpContext.Request.QueryString["dateTime"], CultureInfo.GetCultureInfo("en-GB"), DateTimeStyles.None, out dateTime))
            return dateTime;
        //else
        return new DateTime();//or another appropriate default ;
    }
    #endregion
} 
```

以及 Global.asax 的 Application_Start() 中的命令

```
ModelBinders.Binders.Add(typeof(DateTime), new DateTimeBinder()); 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2009-02-15T03:40:59.563

还值得注意的是，即使没有创建自己的模型绑定器，也可以解析多种不同的格式。

例如，在美国，以下所有字符串都是等效的，并自动绑定到**相同的**DateTime 值：

> /公司/出版社/5月%2001%202008
> 
> /公司/出版社/2008-05-01
> 
> /公司/出版社/05-01-2008

我强烈建议使用 yyyy-mm-dd，因为它更便携。您真的不想处理多种本地化格式。如果有人在 5 月 1 日而不是 1 月 5 日预订航班，那么您将遇到大问题！

注意：我不清楚 yyyy-mm-dd 是否在所有文化中都被普遍解析，所以也许知道的人可以添加评论。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-01-10T10:40:00.423

我在我的 MVC4 上设置了以下配置，它就像一个魅力

```
<globalization uiCulture="auto" culture="auto" /> 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2015-01-29T16:30:16.777

尝试使用 toISOString()。它返回 ISO8601 格式的字符串。

获取方法

javascript

```
$.get('/example/doGet?date=' + new Date().toISOString(), function (result) {
    console.log(result);
}); 
```

C＃

```
[HttpGet]
public JsonResult DoGet(DateTime date)
{
    return Json(date.ToString(), JsonRequestBehavior.AllowGet);
} 
```

POST 方法

javascript

```
$.post('/example/do', { date: date.toISOString() }, function (result) {
    console.log(result);
}); 
```

C＃

```
[HttpPost]
public JsonResult Do(DateTime date)
{
     return Json(date.ToString());
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-01-30T15:24:04.567

```
 public class DateTimeFilter : ActionFilterAttribute
{
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        if (filterContext.HttpContext.Request.RequestType == "GET")
        {

            foreach (var parameter in filterContext.ActionParameters)
            {
                var properties = parameter.Value.GetType().GetProperties();

                foreach (var property in properties)
                {
                    Type type = Nullable.GetUnderlyingType(property.PropertyType) ?? property.PropertyType;

                    if (property.PropertyType == typeof(System.DateTime) || property.PropertyType == typeof(DateTime?))
                    {
                        DateTime dateTime;

                        if (DateTime.TryParse(filterContext.HttpContext.Request.QueryString[property.Name], CultureInfo.CurrentUICulture, DateTimeStyles.None, out dateTime))
                            property.SetValue(parameter.Value, dateTime,null);
                    }
                }

            }
        }
    }
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-05-31T11:14:27.613

```
public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
{
    var str = controllerContext.HttpContext.Request.QueryString[bindingContext.ModelName];
    if (string.IsNullOrEmpty(str)) return null;
    var date = DateTime.ParseExact(str, "dd.MM.yyyy", null);
    return date;
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-08-27T21:56:22.973

我设置`CurrentCulture`和`CurrentUICulture`我的自定义基本控制器

```
 protected override void Initialize(RequestContext requestContext)
    {
        base.Initialize(requestContext);

        Thread.CurrentThread.CurrentCulture = CultureInfo.GetCultureInfo("en-GB");
        Thread.CurrentThread.CurrentUICulture = CultureInfo.GetCultureInfo("en-GB");
    } 
```

# .net - Type.GetInterface 和嵌套类型

> ID：528546
> 
> 赞同：2
> 
> 时间：2009-02-09T15:14:08.520
> 
> 标签：.net, reflection

我刚刚发现 Type.GetInterface 和嵌套类型的一个非常奇怪的行为。

以下示例代码将显示问题，我使用接口的 Type.FullName 来检查给定类型是否派生自该接口：

```
public interface IStandardInterface {}
public class StandardClass : IStandardInterface {}

class Program
{
    public interface INestedInterface {}
    public class NestedClass : INestedInterface { }

    static void Main()
    {
        var stdIfName = typeof (IStandardInterface).FullName;
        var nestedIfName = typeof (INestedInterface).FullName;

        var std = typeof(StandardClass).GetInterface(stdIfName);
        var nested = typeof(NestedClass).GetInterface(nestedIfName);
    }
} 
```

如果我执行上面的代码，它适用于 StandardClass，但不适用于 NestedClass。

*   std 的值为 typeof(IStandardInterface)
*   嵌套的值为 null

* * *

这种行为是预期的还是错误的？如果是预期的，您能解释一下原因吗？

我使用 .net Framework 3.5 SP1 版。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-09T15:38:32.050

扩展马克的答案。

尽管没有记录，但 GetInterface API 会根据最后一个“.”的位置分解您传入的名称。在名字里。“。”右侧的所有内容。将被假定为相关接口的简称。

这给嵌套类型带来了问题，因为它们的名称为“ContainingTypeName+NestedTypeName”。因此，当您将全名传递给 GetInterface 时，它​​实际上最终会寻找一个名为“Program+INestedInterface”的接口，但它不会找到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-09T15:26:53.730

它看起来像处理嵌套名称的“+”标记的错误......以下（使用 LINQ 作弊）有效：

```
var nested = typeof(NestedClass).GetInterfaces()
            .SingleOrDefault(i => i.FullName == nestedIfName); 
```

当然，在大多数情况下，您只会使用`is`or `as`（或者也许`IsAssignableFrom`）来测试接口......这里的用例是什么？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-09T15:36:32.180

我没有正确阅读问题。这应该做你需要的。

```
Boolean isSubClass = typeof(NestedClass).GetInterfaces().Contains(typeof(INestedInterface)); 
```

原答案：

我不确定这是否是一个错误，但这是我用来测试一个类型是否派生自另一种类型的代码。

```
typeof(NestedClass).IsInstanceOfType(typeof(IStandardInterface)) 
```

过去，当您将其转换为名称时，我遇到了问题。我认为总的来说，如果可以的话，您应该使用实际的 Type 对象。

# cocoa - 在 NSScriptCommand

> ID：528548
> 
> 赞同：0
> 
> 时间：2009-02-09T15:14:44.273
> 
> 标签：cocoa, arguments, uri

我创建了一个子类，`NSScriptCommand`我得到了我的 URI。
它运作良好，`[self directParameter]`我得到了网址。

现在我找到了很棒的方法`[self arguments]`。

```
if([self isWellFormed] == YES) {
  NSLog(@"is well formed");
  NSDictionary *dic = [self arguments];
  NSLog(@"dic = %@", dic);
} 
```

但是`dic`是空的。=( 同样当 URL 类似于`myAppUri:foo/bar?a=b#haha`...

**我要怎么做才能承认这些该死的论点？**

顺便一提：

```
MyApp[39851:813] [self commandDescription] = 命令：GetURL ('GURL'/'GURL')
    实现类：URLHandlerCommand
    名称：，描述：
    结果类型：（'null'）
        描述：

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-09T15:27:35.257

GetURL 只接受一个参数，即它的直接参数。该命令不接受关键字参数，因此字典当然是空的。

如果你想要 URL 的查询字符串参数，那么你需要从 URL 字符串创建一个 NSURL，然后向 URL 发送`query`消息，然后自己解析它（可能使用 NSScanner）。

# c++ - C/C++ 向标准输出发送多个字节的最佳方式

> ID：528559
> 
> 赞同：3
> 
> 时间：2009-02-09T15:18:00.053
> 
> 标签：c++, c, optimization, stdout, fwrite

分析我的程序和函数 print 需要花费大量时间来执行。如何将“原始”字节输出直接发送到标准输出而不是使用 fwrite，并使其更快（需要同时将 print() 中的所有 9 个字节发送到标准输出）？

```
void print(){
    unsigned char temp[9];

    temp[0] = matrix[0][0];
    temp[1] = matrix[0][1];
    temp[2] = matrix[0][2];
    temp[3] = matrix[1][0];
    temp[4] = matrix[1][1];
    temp[5] = matrix[1][2];
    temp[6] = matrix[2][0];
    temp[7] = matrix[2][1];
    temp[8] = matrix[2][2];

    fwrite(temp,1,9,stdout); 
```

}

Matrix 被全局定义为一个无符号字符矩阵[3][3]；

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-02-09T15:24:07.717

IO 不是一个廉价的操作。实际上，这是一个**阻塞**操作，这意味着当您调用`write`以允许更多受 CPU 限制的进程在您正在写入的 IO 设备完成操作之前运行时，操作系统可以抢占您的进程。

您可以使用的唯一较低级别的功能（如果您在 *nix 机器上开发）是使用 raw`write`功能，但即便如此，您的性能也不会比现在快得多。简单地说：IO 是昂贵的。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-27T17:02:56.363

评分最高的答案声称 IO 很慢。

这是一个快速基准测试，它具有足够大的缓冲区以使操作系统脱离关键性能路径，但前提**是**您愿意接收巨大的输出。如果第一个字节的延迟是您的问题，您需要在“dribs”模式下运行。

## 从 9 字节数组中写入 1000 万条记录

### 在 gcc 4.6.1 下 3GHz CoreDuo 上的 Mint 12 AMD64

```
 340ms   to /dev/null 
   710ms   to 90MB output file 
 15254ms   to 90MB output file in "dribs" mode 
```

### Clang 3.0 下 2.4GHz CoreDuo 上的 FreeBSD 9 AMD64

```
 450ms   to /dev/null 
   550ms   to 90MB output file on ZFS triple mirror
  1150ms   to 90MB output file on FFS system drive
 22154ms   to 90MB output file in "dribs" mode 
```

如果你能负担得起适当的缓冲，那么 IO 就没有什么慢了。

```
#include <stdio.h> 
#include <assert.h> 
#include <stdlib.h>
#include <string.h>

int main (int argc, char* argv[]) 
{
    int dribs = argc > 1 && 0==strcmp (argv[1], "dribs");
    int err;
    int i; 
    enum { BigBuf = 4*1024*1024 };
    char* outbuf = malloc (BigBuf); 
    assert (outbuf != NULL); 
    err = setvbuf (stdout, outbuf, _IOFBF, BigBuf); // full line buffering 
    assert (err == 0);

    enum { ArraySize = 9 };
    char temp[ArraySize]; 
    enum { Count = 10*1000*1000 }; 

    for (i = 0; i < Count; ++i) {
        fwrite (temp, 1, ArraySize, stdout);    
        if (dribs) fflush (stdout); 
    }
    fflush (stdout);  // seems to be needed after setting own buffer
    fclose (stdout);
    if (outbuf) { free (outbuf); outbuf = NULL; }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-09T15:35:41.307

您可以做的最原始的输出形式是可能的`write`系统调用，像这样

```
write (1, matrix, 9); 
```

1 是标准输出的文件描述符（0 是标准输入，2 是标准错误）。您的标准输出只会与另一端（即终端或您正在输入的程序）读取它的速度一样快，这可能会相当慢。

我不是 100% 确定，但是您可以尝试在 fd 1 上设置非阻塞 IO（使用`fcntl`），并希望操作系统会为您缓冲它，直到它可以被另一端使用。已经有一段时间了，但我认为它是这样工作的

```
fcntl (1, F_SETFL, O_NONBLOCK); 
```

虽然是 YMMV。如果我在语法上错了，请纠正我，正如我所说，已经有一段时间了。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-02-09T15:58:33.967

也许您的问题不是 fwrite() 很慢，而是它被缓冲了。尝试在 fwrite() 之后调用 fflush(stdout)。

这一切都取决于您在这种情况下对慢的定义。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-09T15:23:45.547

所有打印都相当慢，尽管 iostream 的打印速度确实很慢。

您最好的选择是使用 printf，类似于：

```
printf("%c%c%c%c%c%c%c%c%c\n", matrix[0][0], matrix[0][1], matrix[0][2], matrix[1][0],
  matrix[1][1], matrix[1][2], matrix[2][0], matrix[2][1], matrix[2][2]); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-02-09T16:14:35.427

正如每个人都指出，紧密内循环中的 IO 是昂贵的。当需要调试它时，我通常会根据一些标准对 Matrix 进行条件计算。

如果您的应用程序是控制台应用程序，则尝试将其重定向到文件，这将比进行控制台刷新快得多。例如 app.exe > matrixDump.txt

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-02-09T15:26:06.540

有什么问题：

```
fwrite(matrix,1,9,stdout); 
```

一维数组和二维数组都占用相同的内存。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-02-09T15:27:51.093

您可以简单地：

```
std::cout << temp; 
```

*printf*更像是 C 风格。

然而，IO 操作成本高昂，因此请明智地使用它们。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-02-09T16:02:22.757

尝试运行该程序两次。一次有输出，一次没有。您会注意到总体而言，没有 io 的那个是最快的。此外，您可以分叉进程（或创建线程），一个写入文件（stdout），一个执行操作。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-04-04T15:43:45.300

所以首先，不要在每个条目上打印。基本上我要说的是不要那样做。

```
for(int i = 0; i<100; i++){
    printf("Your stuff");
} 
```

而是在堆栈或堆上分配一个缓冲区，并将您的信息存储在那里，然后将这个缓冲区扔到标准输出中，就这样

```
char *buffer = malloc(sizeof(100));
for(int i = 100; i<100; i++){
    char[i] = 1; //your 8 byte value goes here
}

//once you are done print it to a ocnsole with 
write(1, buffer, 100); 
```

但在你的情况下，只需使用`write(1, temp, 9);`

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-05-06T08:47:35.177

我很确定您可以通过增加缓冲区大小来提高输出性能。所以你有更少的 fwrite 调用。写可能会更快，但我不确定。试试这个：

```
❯ yes | dd of=/dev/null count=1000000 
1000000+0 records in
1000000+0 records out
512000000 bytes (512 MB, 488 MiB) copied, 2.18338 s, 234 MB/s 
```

对比

```
> yes | dd of=/dev/null count=100000 bs=50KB iflag=fullblock
100000+0 records in
100000+0 records out
5000000000 bytes (5.0 GB, 4.7 GiB) copied, 2.63986 s, 1.9 GB/s 
```

这同样适用于您的代码。最近几天的一些测试表明，可能好的缓冲区大小约为 1 << 12 (=4096) 和 1<<16 (=65535) 字节。

# asp.net - 为 TD 设置一个 css 类

> ID：528564
> 
> 赞同：0
> 
> 时间：2009-02-09T15:19:49.567
> 
> 标签：asp.net, html

我正在使用自定义的用户控件（我没有修改权限），它呈现表格的 HTML，如下所示：

```
<tr>
  <td></td>
  <td></td>
</tr> 
```

它让我可以在标签中动态添加任何控件。我的问题是如何设置表格单元格的样式。通常，我会这样做`<td class="myClass">`。由于我没有修改它的源代码，所以我使用的解决方法是创建一个`<div>`，设置 CSS 类并将其添加到`<td>`. 代码看起来像这样：

```
 HtmlGenericControl divControl = new HtmlGenericControl("div");
  divControl.Attributes.Add("class", "myClass");
  //Add a textbox to divControl.
  //Add the divControl to the customized user control 
```

这并没有给我我期望的相同 UI。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-09T15:26:09.647

如果可以，只需在生成表之前添加一个 DIV。外部 div 的类名将由 TD 元素继承：

```
<div class="MyClassName">
   //table code here
</div> 
```

然后您可以按如下方式使用 CSS：

```
.MyClassName TD { //CSS here } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-09T16:26:09.923

将控件添加到页面的控件树后，您可以使用它的“父”属性将树添加到表格控件。

```
NewDynamicControl.Parent.Parent.Parent.Attributes.Add("class", "myClass") 
```

这假设您非常了解要添加的用户控件的外观，并且不会被其他人更改并最终破坏您的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-09T15:24:03.770

尝试使用 SPAN 而不是 DIV。DIV 是一个块级元素，它带有一些额外的格式包。SPAN 是一个内联元素，不会像 DIV 那样改变表示语义。

您也可以使用分层 CSS 选择器来实现相同的效果，而无需将表格元素的内容包装在容器中。如果您的 CSS 类同样适用于所有表格元素，这可能是正确的，但如果它们适用于某些而不是其他元素，则它们将不起作用。

# windows - 如何在 Windows 环境中模拟磁盘已满错误？

> ID：528567
> 
> 赞同：19
> 
> 时间：2009-02-09T15:20:07.413
> 
> 标签：windows, automated-tests, batch-file

我必须为测试场景编写一个 bat 脚本，其中我们正在测试的软件由于磁盘已满错误而无法写入文件。例如，测试脚本必须是自动化的，以便我们可以在夜间测试中运行它。测试脚本还必须在不同的计算机上运行，​​因此在这种情况下安装虚拟机之类的软件并不是最好的解决方案。

如何在 Windows 环境中模拟该错误？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-02-09T15:23:01.477

您可以尝试写入完整的软盘。

**编辑：**

根据您编辑的问题，您可以设置没有磁盘空间配额的网络共享并写入。无论登录的用户或机器如何，都会产生错误。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-02-09T16:26:44.180

对于 Windows XP 或更高版本：

此命令可以获得 c:\ 驱动器的可用空间量：

```
for /f "usebackq tokens=1-5" %%A in (`dir c:\ ^| find "bytes free"`) do (
    set FREE_SPACE=%%C
) 
```

根据需要将 c:\ 替换为您的驱动器。

然后，您可以从该值中取出一些空间，以便您有一点空间可以使用：

```
set /a FREE_SPACE=FREE_SPACE-1024 
```

或者你想保留多少空间。

您可以使用该`fsutil`命令创建一个文件来填充磁盘上的可用空间：

```
fsutil file createnew c:\spacehog.dat %FREE_SPACE% 
```

运行测试，写入驱动器。写入 1024 字节左右后，您应该会用完空间。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-02-09T15:35:10.293

下载并安装[TrueCrypt](http://www.truecrypt.org/)。然后，您可以创建一个任意大小（几兆字节）的虚拟分区，挂载它，然后用几个文档填充它。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-06-08T06:52:41.953

**最佳选择：微软的消费计划**

原因：

*   它**测试系统磁盘**（与单独的驱动器相比）
*   **快速运行程序以立即**填满磁盘，不再需要时停止
*   这很容易 - 无需创建和删除文件。没有额外的测试分区。需要安装，但之后您可以使用简单的命令。
*   它是可编写脚本的

脚步：

1.  安装[Windows Server 2003 资源工具包工具](http://www.microsoft.com/en-us/download/details.aspx?id=17657)（在 Windows 7 上运行良好）
2.  `cd "%ProgramFiles(x86)%\Windows Resource Kits\Tools"`（或安装在任何地方）
3.  `consume.exe -disk-space`

命令输出：

```
C:\Program Files (x86)\Windows Resource Kits\Tools>consume.exe
Universal Resource Consumer - Just an innocent stress program, v 0.1.0
Copyright (c) 1998, 1999, Microsoft Corporation

    consume RESOURCE [-time SECONDS]

RESOURCE can be one of the following:

    -physical-memory
    -page-file
    -disk-space
    -cpu-time
    -kernel-pool

C:\Program Files (x86)\Windows Resource Kits\Tools>consume.exe -disk-space
Consume: Message: Total disk space:         96049 Mb
Consume: Message: Free disk space:          14705 Mb
Consume: Message: Free per user space:      14705 Mb
Consume: Message: Attempting to use:        14705 Mb
Consume: Message: Reattempting to use:      14705 Mb
Consume: Message: Sleeping ... 
```

* * *

其他选项：

*   Windows 7 具有[虚拟硬盘功能](http://www.howtogeek.com/howto/5291/how-to-create-a-virtual-hard-drive-in-windows-7/)。基本上执行以下操作：计算机管理 > 磁盘管理 > 操作菜单 > 创建 VHD > 右键单击​​磁盘并初始化 > 右键单击
*   [使用 shell 命令或虚拟文件生成器](http://www.softpedia.com/get/System/File-Management/Dummy-File-Generator.shtml)程序生成大文件（应该是即时的）直到磁盘已满。另一个程序：[SpaceHog](http://www.jddesign.co.uk/products/freeware/freeware_programs.htm)。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2009-02-09T15:22:59.467

这可能看起来有点多，但我能想到的一件事是使用虚拟机，并将其虚拟磁盘设置为足够大以适应操作系统。用一些垃圾文件填充它以使其超出边缘，然后运行您的程序。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2009-02-09T15:25:34.873

创建一个辅助分区，用垃圾填充它，然后在那里运行您的程序。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2009-02-09T16:06:16.443

您可以设置一个小型 ramdisk 并写入它。请参阅此页面了解一些[免费的 ramdisk 产品](http://www.mydigitallife.info/2007/05/27/free-ramdisk-for-windows-vista-xp-2000-and-2003-server/)。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-02-09T15:33:14.527

可以在每台计算机上运行的最好的东西（因为不必在专用机器上进行测试）是可以即时设置的 ramdrive/ramdisk。

到目前为止，只找到了一个虚拟磁盘 SDK，[请参见此处](http://eterlogic.com/Products.VirtualDriveSDK.html)，它可能包含在您的 buzild 进程中。

不同的想法：也许您的测试计算机可以设置为写入共享网络文件夹（即已满）作为驱动器挂载？

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-02-09T15:33:53.027

创建一个新的用户帐户，为其设置配额，并使用 runas 以该用户身份运行您的应用程序。（与磁盘已满不完全相同，但应该有类似的后果。）

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2009-02-09T16:00:00.360

操作系统对其系统驱​​动器填充的响应与对其他驱动器填充的响应不同，因此您的应用程序肯定也会这样做吗？无论使用什么物理介质，简单地填充驱动器都不是准确的测试。

您不能模拟完整磁盘的文件系统事件吗？为什么要等到磁盘已满？您不想定期监控磁盘空间并在磁盘有一定百分比的填充余量时警告用户吗？与其等到磁盘空间耗尽，不如简单地阻止您的应用程序工作，直到问题得到解决，否则可能会影响任何数据 IO 并且无法恢复！

如果测试*必须*是硬集成测试，那么自动化虚拟机、部署应用程序然后用递归脚本填充剩余空间是可行的。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2011-04-25T17:25:55.977

我已经对上面的脚本进行了修改，使其与 Windows 7 兼容......基本上将开关“/-c”添加到 for 语句中。这将删除千位分隔符，因为 fsutil 在语句中不喜欢它。

```
for /f "usebackq tokens=1-5" %%A in (`dir /-c d:\ ^| find "bytes free"`) do (set FREE_SPACE=%%C)
fsutil file createnew d:\largefile.txt %FREE_SPACE% 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2009-02-09T16:56:23.797

使用非常小的 iSCSI 目标

# domain-driven-design - 如何组织领域驱动设计项目？

> ID：528576
> 
> 赞同：33
> 
> 时间：2009-02-09T15:22:51.573
> 
> 标签：domain-driven-design, organization

我已经开始学习 DDD 并且想知道其他人是如何组织他们的项目的。

我开始围绕我的 AggregateRoots 进行组织：

MyApp.Domain（域模型的命名空间）

MyApp.Domain.Product
- 产品
- IProductService
- IProductRepository
- 等

MyApp.Domain.Comment
- 评论
- ICommentService
- ICommentRepository
- 等

MyApp.Infrastructure
- ...

MyApp.Repositories
- ProductRepository : IProductRepository
- 等等

我遇到的问题是我必须将我的域产品引用为 MyApp.Domain.Product.Product 或 Product.Product。我还与产品的 linq 数据模型发生冲突......我必须使用丑陋的代码行来区分两者，例如 MyApp.Domain.Product.Product 和 MyApp.Respoitories.Product。

我真的很想看看其他人如何组织他们的 DDD 解决方案......

我使用 Visual Studio 作为我的 IDE。

非常感谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2009-02-09T15:43:38.700

我尽量让事情变得非常简单，所以通常这样的事情对我有用：

Myapp.Domain - 所有特定于域的类共享这个命名空间

Myapp.Data - 将数据库从域中抽象出来的薄层。

Myapp.Application - 所有“支持代码”、日志记录、共享实用程序代码、服务消费者等

Myapp.Web - 网络用户界面

所以类将是例如：

*   Myapp.Domain.Sales.Order
*   Myapp.Domain.Sales.Customer
*   Myapp.Domain.Pricelist
*   Myapp.Data.OrderManager
*   Myapp.Data.CustomerManager
*   Myapp.Application.Utils
*   Myapp.Application.CacheTools

等等。

我尝试记住的想法是“域”命名空间是捕获应用程序实际逻辑的东西。因此，您可以与“领域专家”（将使用该应用程序的家伙）谈论什么。如果我因为他们提到的东西而编码某些东西，它应该在域命名空间中，并且每当我编写他们没有提到的东西（如日志记录、跟踪错误等）时，它不应该在域命名空间中。

因此，我也对制作过于复杂的对象层次结构持谨慎态度。理想情况下，非编码人员应该可以直观地理解域模型的稍微简化的绘图。

为此，我通常不会从详细考虑模式开始。我尝试按照标准的面向对象设计指南尽可能简单地对域进行建模。什么需要成为对象？它们有什么关系？

在我看来，DDD 是关于处理复杂的软件，但如果你的软件本身不是很复杂，那么你很容易陷入这样一种情况，即 DDD 的做事方式增加了而不是消除了复杂性。

一旦您的模型具有一定程度的复杂性，您将开始了解应如何组织某些事物，然后您将知道要使用哪些模式，哪些类是聚合等。

在我的示例中，Myapp.Domain.Sales.Order 将是一个聚合根，因为当它被实例化时，它可能包含其他对象，例如客户对象和订单行集合，并且您只能访问订单行通过 order 对象获取该特定订单。

但是，为了简单起见，我不会有一个“主”对象，它只包含其他所有内容并且没有其他用途，因此订单类本身将具有在应用程序中有用的值和属性。

因此，我将参考以下内容：

Myapp.Domain.Sales.Order.TotalCost

Myapp.Domain.Sales.Order.OrderDate

Myapp.Domain.Sales.Order.Customer.PreferredInvoiceMethod

Myapp.Domain.Sales.Order.Customer.Address.Zip

等等

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-02-11T00:27:11.810

我喜欢在应用程序的根命名空间中拥有域，在它自己的程序集中：

`Acme.Core.dll`[根命名空间：`Acme`]

这巧妙地代表了域在应用程序所有其他部分的范围内的事实。（有关更多信息，请参阅Jeffrey Palermo[的 The Onion Architecture](http://jeffreypalermo.com/blog/the-onion-architecture-part-1/)）。

接下来，我有一个将域对象映射到数据库的数据程序集（通常使用[NHibernate ）。](http://en.wikipedia.org/wiki/NHibernate)这一层实现了存储库和服务接口：

`Acme.Data.dll`[根命名空间：`Acme.Data`]

然后，我有一个演示程序集，声明了我选择的 UI 模式的元素：

`Acme.Presentation.dll`[根命名空间：`Acme.Presentation`]

最后是 UI 项目（假设这里有一个 Web 应用程序）。这是前面层中元素的组合发生的地方：

`Acme.Web`[根命名空间：`Acme.Web`]

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-12T15:03:44.490

尽管您也是 .Net 开发人员，但Eric Evans 和 Citerus 的 DDD[中货物应用程序的 Java 实现参考是一个很好的资源。](http://dddsample.sourceforge.net/index.html)

在 doc'd 代码中，您可以在 Java 包中看到 DDD 组织到有界上下文和正在运行的聚合。

此外，您可以考虑 Billy McCafferty 的[Sharp Architecture](http://code.google.com/p/sharp-architecture/)。它是一个 ASP.Net MVC、NHibernate/Fluent NHibernate 实现，它在构建时考虑了 DDD。

诚然，您仍然需要应用文件夹/命名空间解决方案来提供上下文。但是，将 Evans 方法与#Arch 结合起来，您应该会顺利进行。

让我们知道你要做什么。我也在同一条路上，而且离你不远！

快乐编码，

库尔特·约翰逊

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-11T00:04:16.013

您的域可能有一个名称，因此您应该将此名称用作命名空间。

我通常将存储库实现和数据访问详细信息放在域命名空间下名为 Persistance 的命名空间中。

应用程序使用自己的名称作为命名空间。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-11T01:00:40.920

我会检查 codecampserver 因为那里的设置很常见。

他们有一个核心项目，其中包括应用程序层和域层。即洋葱的内部（[http://jeffreypalermo.com/blog/the-onion-architecture-part-1/](http://jeffreypalermo.com/blog/the-onion-architecture-part-1/)）。

我实际上喜欢将核心分解成单独的项目来控制依赖的方向。所以通常我有：

MyNamespace.SomethingWeb <-- 多个 UI
MyNamespace.ExtranetWeb <-- 多个 UI

MyNamespace.Application <-- Evans 的应用层，带有 CustomerService
MyNamespace.Domain等类

*   MyNamespace.Domain.Model <-- 实体
*   MyNamespace.Domain.Services <-- 域服务
*   MyNamespace.Domain.Repositories

MyNamespace.Infrastructure <-- repo 实现等。

MyNamespace.Common <-- 所有其他项目都依赖的项目，该项目具有 Logger、Util 类等。

# sql-server-2000 - 如何在 SQL Server 中禁用字符串截断错误？

> ID：528579
> 
> 赞同：18
> 
> 时间：2009-02-09T15:23:04.380
> 
> 标签：sql-server-2000

如果我插入或更新长度超过字段大小的字符串，我如何告诉 SQL Server 不要引发错误 - 在这种情况下，我希望静默截断。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2009-02-09T15:26:48.817

您要做的就是将 ANSI WARNINGS 设置为 OFF 您可以通过调用

```
set ANSI_WARNINGS  OFF 
```

我还写了一个实际的例子：

```
create table bla(id varchar(2))
go

insert bla values ('123') --fails

set ANSI_WARNINGS  OFF

insert bla values ('123') --succeeds 
```

请记住在完成后重新打开 ANSI 警告。您可以通过调用：

```
set ANSI_WARNINGS ON 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-09T15:26:50.767

在插入之前尝试将变量转换为确切的类型和长度。这可能会奏效。铸造（和转换）更加灵活。:)

# android - Android TouchEvents DOM API

> ID：528589
> 
> 赞同：2
> 
> 时间：2009-02-09T15:24:15.483
> 
> 标签：android, api, dom

是否有适用于 Android 的 TouchEvents DOM API？我需要实现拖放行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-16T23:41:46.893

如果您正在为 Android 编写 Java 程序（而不是为 Android 编写带有 JavaScript 的网页），那么[MotionEvent](http://developer.android.com/reference/android/view/MotionEvent.html)可能就是您要寻找的。

# sql - SQL Server 中的动态查询

> ID：528590
> 
> 赞同：1
> 
> 时间：2009-02-09T15:24:16.640
> 
> 标签：sql, sql-server, sql-server-2005

我有一个包含 10 列的表 col_1,col_2,.... col_10。我想编写一个 select 语句，它将从这 10 列之一中选择行之一的值。我有一个变量将决定从哪一列中选择。这样的查询可以写在列名由变量动态决定的地方吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-02-09T15:27:39.937

是的，使用 CASE 语句：

```
SELECT CASE @MyVariable
       WHEN 1 THEN [Col_1]
       WHEN 2 THEN [Col_2]
       ...
       WHEN 10 THEN [Col_10]
       END 
```

这是否是一个好主意完全是另一个问题。您应该使用比 Col_1、Col_2 等更好的名称。

正如其他人所建议的那样，您还可以使用字符串替换方法。但是，这是不得已的选择，因为它可以打开您的代码以进行 sql 注入攻击。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-09T15:28:30.247

对我来说，这听起来像是一个糟糕的、非规范化的设计。

我认为一个更好的做法是将表作为父表，其中的行包含指向包含十行的单独子表的外键，每个子表对应您现在拥有的每一列。当在父表中插入或更新行时，让父表根据该魔术值设置外键。

如果子表是相当静态的，这将起作用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-09T15:27:21.530

由于我没有足够的细节，我无法提供代码。相反，我会解释。

声明一个字符串变量，类似于：

```
declare @sql varchar(5000) 
```

将该变量设置为您想要的完整 SQL 字符串（作为字符串，而不是实际查询......所以您使用字符串连接嵌入您想要的行名）。

然后调用：`exec(@sql)`

可以了，好了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-09T15:29:26.970

我假设您纯粹在 Transact-SQL 中运行。您需要做的是动态创建以您的变量为列名的 SQL 语句，并使用 EXECUTE 命令运行它。例如：

```
EXECUTE('select ' + @myColumn + ' from MyTable') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-09T15:33:55.197

您可以使用 T-SQl CASE 语句来做到这一点：

```
SELECT 'The result' =
   CASE 
     WHEN choice = 1 THEN col1
     WHEN choice = 2 THEN col2
     ...
   END
FROM sometable 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-09T15:37:40.633

恕我直言，[Joel Coehoorn 的案例陈述](https://stackoverflow.com/questions/528590/dynamic-query-in-ms-sql/528613#528613)可能是最好的主意

...但如果你真的必须使用动态 SQL，你可以用[sp_executeSQL()](http://msdn.microsoft.com/en-us/library/ms188001.aspx)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-02-09T15:55:51.743

我不知道你使用的是什么平台，但你可以很容易地使用[Dynamic LINQ来做到这一点。](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)

```
var query = context.Table
                   .Where( t => t.Id == row_id )
                   .Select( "Col_" + column_id );

IEnumerator enumerator = query.GetEnumerator();
enumerator.MoveNext();
object columnValue = enumerator.Current; 
```

大概，您会知道根据列将其转换为哪种实际类型。这样做的好处是您可以免费获得参数化查询，从而保护您免受 SQL 注入攻击。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-02-12T09:56:58.420

如果您的数据库设计正确，这不是您应该做的事情。我将重新审视该架构元素的设计，以消除这样做的需要。

# .net - 我应该如何设计一个类库以允许 IoC，但不依赖于特定容器

> ID：528598
> 
> 赞同：8
> 
> 时间：2009-02-09T15:25:52.143
> 
> 标签：.net, asp.net, inversion-of-control

我正在开发一个类库，它将用于许多不同的 Web 应用程序，甚至可能作为一个开源项目提供。有几点我想使用 IoC，但我不希望类库的使用者必须使用一个特定的实现。设计这个库以使其具有 IoC 的好处，但不依赖于一个 IoC 框架的最佳方法是什么？

具体来说，该库包含依赖于各种服务接口的 ASP.NET MVC 控制器。我知道我可以创建一个 IoCControllerFactory，但我不确定这是否是最好的方法，因为有些用户可能无法或不想在他们的应用程序中使用它，只是为了获得我的库提供的功能。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-09T16:05:40.283

在构造函数中传递属性以用于简单的场景。

对于更复杂的情况，使用 Ioc 容器接口，提供默认实现，但使其足够简单，以便可以使用任何容器来实现。

[CommonServiceLocator](http://www.codeplex.com/CommonServiceLocator)就是这样一种接口。

* * *

**编辑 ：**

我现在将推出另一种设计，这将使 CommonServiceLocator 无用，并使您的图书馆用户的整体体验更好：

您选择具有内部库要求所需的所有功能的 Ioc 容器，并将其 ILMerge 为内部的，以便您的库用户看不到它。用户不必知道库正在使用容器。

然后，您必须提供两个主要扩展点： 配置 - 一种提供依赖项的自定义实现的方法（例如 Logger ...） 工厂 - 如果您的库需要实例化用户的对象，请提供一种指定工厂的方法，以便您的用户可以使用它。这样他们就可以使用自己的容器来实例化和注入他们的对象。

我写了两篇关于这个设计的完整博客文章：

[IOC 容器，隐藏](http://thinkbeforecoding.com/post/2009/05/15/IOC-container-go-hide)

[IOC 容器，Go Hider（第 2 部分）](http://thinkbeforecoding.com/post/2009/05/19/IOC-Container-Go-Hide-part-2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-09T15:35:28.827

如果依赖的数量比较少，可以通过构造函数的方式传入。这样，您的消费者就可以完全选择如何构建您的对象。

属性/设置器或自定义初始化对象是替代的可能性，并涵盖了设计范围内的其他领域。

# usb - 设置 USB 配置失败

> ID：528607
> 
> 赞同：3
> 
> 时间：2009-02-09T15:26:50.003
> 
> 标签：usb, device-driver, libusb

我正在尝试使用 libusb 与 USB 设备通信，但我觉得我在比赛的第一站被绊倒了。我确切地知道我需要与之交谈的端点等，但我什至无法做到这一点。本质上，我有：

```
usb_device *dev = ...; // opened from get_busses()
usb_set_configuration(dev, dev->config[0].bConfigurationValue); // bConfigVal = 1 
```

现在，我可以在调试模式下查看设备信息，我知道当前配置为 0（未初始化/重启后），并且正好有 1 个有效配置，其配置编号为 1。但是当我设置配置时到 1，我得到一个返回值 -22，它（通过 stringifier 传递）转换为“windows api 错误：错误参数。

我找不到其他人有类似的问题，这似乎是一件很简单的事情——我什至无法声明接口，或设置 alt-interface 或类似的东西，因为我必须先设置配置。我错过了什么？（如果重要：这是在 WinXP 上）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-28T22:30:21.093

查看 libusb-win32\src\driver\set_configuration.c，返回的原因似乎有很多不同`STATUS_INVALID_PARAMETER`。

使用`libusb_set_debug`（从您的用户模式应用程序）设置详细调试级别，然后运行[​​Sysinternals DebugView](http://technet.microsoft.com/en-us/sysinternals/bb896647.aspx)以查看驱动程序的错误消息。希望您能找到有关`set_configuration`呼叫失败原因的线索。

# vb.net - VB Linq 中的“New ... With”语法有什么作用？

> ID：528610
> 
> 赞同：19
> 
> 时间：2009-02-09T15:27:08.660
> 
> 标签：vb.net, linq, linq-to-xml

此 VB Linq 查询的以下两个版本的结果之间有什么区别（如果有）？

' 假设我们有一个 XElement，其中包含在其他地方定义的员工详细信息

```
Dim ee = From e In someXML.<Employee> _
Select New With {.Surname = e.<Surname>, .Forename = e.<Forename>} 
```

和

```
Dim ee = From e In someXML.<Employee> _
Select Surname = .Surname = e.<Surname>, .Forename = e.<Forename> 
```

即新的意义是什么... 有语法？

我怀疑这有一个简单的答案，但我找不到它 - 任何指向合适教程或 Microsoft 文档的链接都将不胜感激。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-02-09T15:35:33.257

不同之处在于第一个显式创建了一个匿名类型。第二个是查询表达式，可以使用现有类型而不是创建匿名类型。从 Cameron MacFarland 链接的文档中：

> 查询表达式并不总是需要创建匿名类型。如果可能，他们使用现有类型来保存列数据。当查询返回数据源中的全部记录或每条记录仅返回一个字段时，就会发生这种情况。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-09T15:52:32.810

我的理解是没有区别。

`New With`旨在查询外使用，例如

```
Dim X = New With { .Surname = "A", .Forename = "B" } 
```

特别是对于 Linq 查询，你可以跳过`New With`，但它在其他情况下仍然有用。但是，我不确定，因为我不知道 VB 9 :)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-09T16:19:49.190

您列出的两段代码之间没有功能差异。在后台，这两段代码都将使用匿名类型从查询中返回数据。

第一段代码只是显式地使用了匿名类型。允许使用此语法的原因是可以从 Select 子句返回任何类型。但是类型必须显式使用。

```
Dim x = From it in SomeCollection Select New Student With { .Name = it.Name } 
```

Joel 在他关于第二个查询可能使用现有类型的陈述中是不正确的。如果没有显式类型，则使用显式属性名称的 select 子句将始终返回匿名类型。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-09T15:30:12.273

它们被称为[匿名类型](http://msdn.microsoft.com/en-us/library/bb384767.aspx)。

使用它们的主要原因是将查询中的数据保存在单个对象中，因此迭代器可以继续迭代对象列表。

它们倾向于在大型或多部分 LINQ 查询中用作临时存储类型。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-15T03:32:35.497

没有区别。编译器将推断匿名类型。

您很可能希望像 in 一样返回元素的值`e.<Surname>.Value`，它返回 String 而不是 XElement。

您的第二个示例可以简化为

```
Dim ee = From e In someXML.<Employee> _
         Select e.<Surname>.Value, e.<Forename>.Value 
```

因为编译器还会推断匿名类型成员的名称。

但是，如果您有以下课程

```
Class Employee

    Private _surname As String
    Public Property Surname() As String
        Get
            Return _surname
        End Get
        Set(ByVal value As String)
            _surname = value
        End Set
    End Property

    Private _forename As String
    Public Property Forename() As String
        Get
            Return _forename
        End Get
        Set(ByVal value As String)
            _forename = value
        End Set
    End Property

End Class 
```

`IQueryable(Of Employee)`然后，您可以使用 New ...更改第一个查询以生成一个而不是匿名类型，如下所示：

```
Dim ee = From e In someXML.<Employee> _
         Select New Employee With {.Surname = e.<Surname>.Value, _
                                   .Forename = e.<Forename>.Value} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-09T15:56:20.027

一个区别是匿名类型不可序列化。

# javascript - PDF双值中的Javascript

> ID：528615
> 
> 赞同：1
> 
> 时间：2009-02-09T15:27:51.077
> 
> 标签：javascript, pdf, foxit

我有以下代码应该在pdf中进行求和。

```
var sum = 0.0;
var f1 = this.getField("price");
var temp = parseFloat(f1.value);
sum = temp;

var total = this.getField("total");
if(sum > 0)
{
  total.value = sum;
}
else
{
  total.value = "";
} 
```

但是如果输入是

```
18.31 
```

我的总数是

```
18 
```

**编辑**：我也试过

```
console.println(f1.value); 
```

但是 f1.value 的值只有 18。

**编辑：这是在**[foxit pdf](http://www.foxitsoftware.com/pdf/reader_2/whatsnew23.htm)阅读器的 javascript 解释器中运行的。

**编辑：**我已经确认 foxit reader javascript 解释器中存在错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-09T17:16:17.463

这是因为`parseFloat()`将`f1.value`（如果是数字）转换为字符串，并沿途四舍五入，具体取决于`toString()`对象的方法返回的内容。

尝试不使用它。

[http://www.jibbering.com/faq/faq_notes/type_convert.html#tcParseFl](http://www.jibbering.com/faq/faq_notes/type_convert.html#tcParseFl)

# java - 如何通过拖动从 JTable 中删除列？

> ID：528618
> 
> 赞同：3
> 
> 时间：2009-02-09T15:28:50.467
> 
> 标签：java, swing, drag-and-drop, jtable

在 Outlook 中，如果我将列标题拖出表格，我可以删除表格列。如何在 Java 中使用 Swing JTable 做同样的事情？

无法进行默认拖放操作，因为此功能与目标位置无关。它仅取决于拖动源。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-11T15:23:56.257

对于这个答案，我使用了[SimpleTableDemo](http://java.sun.com/docs/books/tutorial/uiswing/examples/components/SimpleTableDemoProject/src/components/SimpleTableDemo.java)。我只是将 MouseListener 添加到表中。这里是 MouseListener：

```
class MyMouseListener implements MouseListener {
  public void mouseClicked(MouseEvent arg0) {}
  public void mouseEntered(MouseEvent arg0) {}
  public void mouseExited(MouseEvent arg0) {}
  public void mousePressed(MouseEvent arg0) {}
  public void mouseReleased(MouseEvent m) {
    JTableHeader tableHeader = (JTableHeader)m.getComponent();
    JTable table = tableHeader.getTable();
    if (!table.getBounds().contains(m.getPoint())) {
      table.removeColumn(table.getColumnModel().getColumn(
          tableHeader.columnAtPoint(m.getPoint())));
    }
  }
} 
```

这是一个非常基本的方法，没有异常处理或无论如何。但至少它有效。

# html - IE 与 FF 中的 HTML DIV 和 IMG 标记间距

> ID：528628
> 
> 赞同：4
> 
> 时间：2009-02-09T15:32:23.657
> 
> 标签：html, css, cross-browser

我在一个简单的 HTML 页面的布局上遇到了问题。请帮忙。

这是我要的布局...

[布局 http://img516.imageshack.us/img516/9637/layoutfk5.gif](http://img516.imageshack.us/img516/9637/layoutfk5.gif)

*   橙色 = 身体
*   蓝色/红色 = 帧 div
*   绿色 = 标题图片
*   黑/白 = 菜单 div

它在 Internet Explorer 中看起来是正确的，但在 Firefox、Safari 和 Chrome 中，我的图像（标题）和我的 div（菜单）之间有 4 像素的差距。

Internet Explorer、Firefox、Safari 和 Chrome……

[浏览器 http://img516.imageshack.us/img516/3292/browserszi8.gif](http://img516.imageshack.us/img516/3292/browserszi8.gif)

这是我的 HTML...

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html>
    ...
    <body>
        <div id="frame">
            <img id="header" src="images/header.jpg" width="700" height="245" alt="" /><div id="menu">
                <strong>One</strong> &nbsp;|&nbsp;
                <a href="two.html">Two</a> &nbsp;|&nbsp;
                <a href="three.html">Three</a> &nbsp;|&nbsp;
                <a href="four.html">Four</a> &nbsp;|&nbsp;
                <a href="five.html">Five</a> &nbsp;|&nbsp;
                <a href="six.html">Six</a> &nbsp;|&nbsp;
                <a href="seven.html">Seven</a> &nbsp;|&nbsp;
                <a href="eight.html">Eight</a> &nbsp;|&nbsp;
                <a href="nine.html">Nine</a>
            </div>
            <div id="content">
                ...
            </div>
            ...
    </body>
</html> 
```

请注意，IMG 和菜单 DIV 之间没有空格。

这是我的CSS...

```
...

div#frame {
    background: #FF0000;
    margin-right: auto;
    margin-left: auto;
    width: 700px;
    border: 5px #30AADE solid;
}

div#frame img#header {
    margin: 0;
    padding: 0;
    border: 0;
}

div#frame div#menu {
    margin: 0 auto 0 auto;
    padding: 5px 0 5px 0;
    border-top: solid 2px #FFFFFF;
    text-align: center;
    font-size: small;
    color: #88BE34;
    background-color: #000000;
}

div#frame div#menu strong {
    font-size: medium;
    color: #FFFFFF;
}

div#frame div#menu a {
    color: #88BE34;
} 
```

为什么 Firefox、Safari 和 Chrome 显示出 4 像素的差距？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-09T15:36:38.980

它与 IMG 标签的默认规则有关。

我建议始终在样式表中使用它作为默认规则：

```
img{
    display:block;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-09T15:38:56.573

我的猜测是它是图像元素行的行高，因为 IMG 是一个内联元素。您可能可以通过提供 img#header 来修复它`display: block;`。

无论如何，您真正应该做的是删除整个图像并使用 H1 元素加上许多图像替换技术之一。

编辑：话虽如此，您的菜单也应标记为无序列表（UL）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-12T23:53:41.577

在“标准”浏览器中（实际上是带有正确 DOCTYPE 的 IE6！），您的图像默认为 INLINE 模式，因此它的间距就好像它是位于文本基线上的字母一样。

freelookenstein 给出了解决方案，以消除由于 INLINE 模式的文本对齐而导致的多余空格。

这是解决方案，但我会小心使用 display:block 默认情况下，因为这很可能会弄乱您的典型网页内容。

您可以单独将 display:block 属性添加到类或内联样式中。

或者是这样的：

```
img { display:block; }
p img, ul img, td img /* etc*/ { display:inline; } 
```

就我个人而言，我建议将 display:block 限制为您知道用于站点布局的那些图像，或者那些专门插入框中的图像。在这种情况下，通常您已经在父元素上有一个类，例如：

```
<div class="imagebox">
   <img .... />
</div>

.imagebox img { display:block; } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-13T00:59:03.680

您应该将菜单链接包装在无序列表中，然后使用 CSS 设置项目样式。这样做有一些原因：

1.  将导航链接结构化为列表会产生更多语义标记。它更好地代表了您正在呈现的内容。如果您要查看完全没有 CSS 样式的站点（您可以使用 Firefox 的 Web 开发人员工具栏做到这一点），您仍然会获得站点布局的有意义的表示。如果您希望网站可以被移动浏览器查看，这尤其有意义。

2.  这也可能（稍微）帮助搜索引擎优先考虑内容并提高您的排名。

3.  您可以为列表项定义一种样式，其中一侧有边框和一些边距，以获得“管道分隔”效果。这将是可重复使用的，并且将来更容易将菜单更改为其他样式。

See [A List Apart - CSS 设计：驯服列表](http://www.alistapart.com/articles/taminglists/)

那里有一个示例显示了用于实现此效果的完整 CSS。

# sql-server - 如何从 Cocoa (Mac OS X) 访问 SQL Server？

> ID：528634
> 
> 赞同：3
> 
> 时间：2009-02-09T15:33:47.973
> 
> 标签：sql-server, cocoa, macos

正如问题所说：
如何在 Mac OS X 10.5 上从 Cocoa 访问 Microsoft SQL Server 2005？
如果可能，数据库驱动程序应该是免费的，付费解决方案也可以。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-01T00:55:58.850

如果您使用 ODBC，Actual Technologies 会为 OS X 制作 Microsoft SQL Server 驱动程序：

[http://www.actualtechnologies.com/product_sqlserver.php](http://www.actualtechnologies.com/product_sqlserver.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-09T16:36:56.700

一些谷歌搜索提出了这个问题：

[http://lists.apple.com/archives/Cocoa-dev/2004/Jul/msg00077.html](http://lists.apple.com/archives/Cocoa-dev/2004/Jul/msg00077.html)

这指向这两个应用程序：

*   [http://www.freetds.org/](http://www.freetds.org/)
*   [http://www.macosguru.de/](http://www.macosguru.de/)

这些能满足你的需求吗？如果不是，你能详细说明这个问题吗？谢谢！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-11T03:01:52.047

FreeTDS 非常好，并且在 Objective-C 中相当容易使用，因为它有一个 C API。然而，更简单的方法是通过 Java 桥使用 jTDS JDBC 驱动程序。我知道 Apple 不再推荐使用 Java 桥接器，但它可能是与 SQL Server 对话的最简单方法，而且如果你的代码结构很好，几乎可以与地球上的任何其他数据库一起使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-25T06:18:03.123

对此发表评论是因为这是 google 搜索添加 SQL Server 连接到 Cocoa (MacOS) 应用程序的最佳结果之一，但我没有看到列出的任何当前解决方案。

FreeTDS - 正如 Daniel 所建议的那样，这是最快/最简单的方法，但有一些关于如何在不使用可怕的 Java 桥或某种 Python hack 的情况下实现这一点的信息。使用 Homebrew 构建 FreeTDS（不要看在上帝的份上尝试自己在 mac 上构建它），然后在 Xcode finder 中选择您的项目，选择“构建阶段”选项卡，然后在“链接二进制文件与库”下链接 FreeTDS 库**libsybdb**（使用动态或静态的）。单击“+”号，然后选择“添加其他”，然后导航到库所在的位置 - 对我来说，安装库的目录是

> /usr/local/Cellar/freetds/1.00.109/lib

然后在该目录中选择（例如）libsybdb.a

然后，您可以使用 FreeTDS API 或使用像[Martin Rybak 这样](https://github.com/martinrybak/SQLClient)的包装器，这就是我所做的（我使用的是这个“SQLClient”代码的旧版本）。对于 AWS 上的 SQL Server 实例，它的工作相当简单，而对于 Azure AWS 实例，可以预见会稍微复杂一些——我需要破解包装器，因为包装器代码在登录后发出“use db”命令来 azure，Azure 不会接受- 对于天蓝色，必须在连接期间设置数据库 - 我添加了（使用来自 GitHub 的较新代码）：

```
DBSETLDBNAME(_login, [host UTF8String]); 
```

在我添加到该部分的 SQLClient.m 文件中：

```
DBSETLUSER(_login, [username UTF8String]);
DBSETLPWD(_login, _password);
DBSETLHOST(_login, [host UTF8String]);
DBSETLCHARSET(_login, [self.charset UTF8String]); 
```

我注释掉了：

```
 if (database) {
        _returnCode = dbuse(_connection, [database UTF8String]);
        if (_returnCode == FAIL) {
            [self connectionFailure:completion];
            return;
        }
    } 
```

我的应用程序是基于 swift 的，所以我使用了一个桥接头，添加到它：

```
#import SQLClient.h 
```

要使用 lib，类似于（伪代码，因为我现在不在我的代码前面）：

```
let client = SQLClient.sharedInstance()
//I'm using the older code which uses a delegate and not notifications callback 
self.client!.delegate = self
self.client!.connect("database_network_address", username: "username", password: "password", database: "database_name", completion: { (success) -> Void in
         if(success) {
                    print ("connection has succeeded")
// now do something with the connection
                    self.client!.execute("select * from table_name", completion: { (data) -> Void in
    //... do something with the returned array "data" per the wrapper API
    })
        } else {
        print ("connection has NOT been success")
      }
   }) 
```

如果您对此有任何疑问，请告诉我。这绝对适用于 Cocoa 应用程序，我使用我的应用程序将大量数据上传到 Azure SQL Server 实例。祝你好运！

# javascript - 如何构建我的 javascript/jquery 代码？

> ID：528648
> 
> 赞同：66
> 
> 时间：2009-02-09T15:36:39.697
> 
> 标签：javascript, jquery

我正在玩弄一个非常密集的基于 ajax 的 jquery web 应用程序。它已经到了一个地步，我几乎忘记了应该触发什么动作等的事件。

在更基本的层面上，我有点感觉我的 javascript 结构是错误的。你们如何构建您的 javascript/jquery 代码、事件处理等，对新手 javascript 开发人员有何建议。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2011-11-14T19:45:59.507

超微！

自从第一个答案发布到这个问题以来已经有一段时间了，很多事情都发生了变化。首先，JS 浏览器世界似乎正朝着 AMD（异步模块定义）的代码组织方向发展。

可行的方法是将所有代码编写为 AMD 模块，例如：

```
define('moduleName', ['dependency1', 'dependency2'], function (dependency1, dependency2) {
    /*This function will get triggered only after all dependency modules loaded*/
    var module = {/*whatever module object, can be any JS variable here really*/};
    return module;
}); 
```

**然后使用curl.js**或**require.js**等AMD 加载器加载模块，例如：

```
curl(
    [
        'myApp/moduleA',
        'myApp/moduleB'
    ],
).then(
    function success (A, B) {
        // load myApp here!
    },
    function failure (ex) {
        alert('myApp didn't load. reason: ' + ex.message);
    }
); 
```

优点是：

1.  您只需`<script>`在页面上包含加载 AMD 加载程序本身的单个元素（其中一些非常小）。

2.  之后，所有的 JS 文件都会以异步 NON BLOCKING 的方式自动获取！时尚，因此更快！

3.  必要的模块只有在其依赖项被加载后才会被执行。

4.  模块化（这意味着更易于维护和重用的代码）。

5.  如果使用得当，全局变量污染可以完全遏制。

老实说，一旦概念在您的脑海中**响起**，您将永远不会回到以前的方式。

PS：从 1.7 版开始，jQuery 确实将自己注册为 AMD 模块。

有关 AMD 的更多信息：

*   [https://github.com/cujojs/curl](https://github.com/cujojs/curl)
*   [http://wiki.commonjs.org/wiki/Modules/AsynchronousDefinition](http://wiki.commonjs.org/wiki/Modules/AsynchronousDefinition)
*   [http://requirejs.org/](http://requirejs.org/)
*   [http://www.bennadel.com/blog/2275-Using-RequireJS-For-Asynchronous-Script-Loading-And-JavaScript-Dependency-Management.htm](http://www.bennadel.com/blog/2275-Using-RequireJS-For-Asynchronous-Script-Loading-And-JavaScript-Dependency-Management.htm)
*   [https://github.com/Integralist/Blog-Posts/blob/master/2012-01-04-Beginners-guide-to-AMD-and-RequireJS.md](https://github.com/Integralist/Blog-Posts/blob/master/2012-01-04-Beginners-guide-to-AMD-and-RequireJS.md)

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2009-02-09T15:42:28.420

对于 javascript 代码，我发现 Christian Heilmann 的以下链接不可或缺

*   [模块模式](http://www.wait-till-i.com/2007/07/24/show-love-to-the-module-pattern/)
*   [配置脚本](http://www.wait-till-i.com/2008/05/23/script-configuration/)

我也很喜欢 Peter Michaux[在这里描述的方法](http://peter.michaux.ca/articles/how-i-write-javascript-widgets)

对于 jQuery，我衷心推荐阅读关于[创作](http://docs.jquery.com/Plugins/Authoring)的指南，我发现这个关于 jQuery[插件模式](http://www.learningjquery.com/2007/10/a-plugin-development-pattern)的教程非常好

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-02-09T16:16:19.883

为了控制我的事件，我使用发布/订阅机制

```
jQuery.subscribe = function( eventName, obj, method ){
    $(window).bind( eventName, function() {
        obj[method].apply( obj, Array.prototype.slice.call( arguments, 1 ) );
    });
    return jQuery;
}

jQuery.publish = function(eventName){
    $( window ).trigger( eventName, Array.prototype.slice.call( arguments, 1 ) );
    return jQuery;
} 
```

这是它的使用示例

```
// a couple of objects to work with
var myObj = {
    method1: function( arg ) {
        alert( 'myObj::method1 says: '+arg );
    },
    method2: function( arg1, arg2 ) {
        alert( arg1 );
        //republish
        $.publish( 'anEventNameIMadeUp', arg2 );
    }
}

var myOtherObj = {
    say: function(arg){
        alert('myOtherObj::say says: ' + arg);
    }
}

// you can then have all your event connections in one place

//myObj::method2 is now listening for the 'start' event 
$.subscribe( 'start', myObj, 'method2' );

//myOtherObj::say is now listening for the 'another' event
$.subscribe( 'anotherEvent', myOtherObj, 'say' );

//myObj::method1 is now listening for the 'anEventNameIMadeUp' event
$.subscribe( 'anEventNameIMadeUp', myObj, 'method1' );
//so is myOtherObj::say
$.subscribe( 'anEventNameIMadeUp', myOtherObj, 'say' );

// ok, trigger some events (this could happen anywhere)
$.publish( 'start', 'message1', 'message2' );
$.publish( 'anotherEvent', 'another message' ); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-02-09T18:32:50.070

除了模块模式之外，我绝对建议阅读对象文字模式；这是一篇很好的文章：

[http://ajaxian.com/archives/show-love-to-the-object-literal](http://ajaxian.com/archives/show-love-to-the-object-literal)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-06-23T12:08:55.720

```
(function($, window, slice)
{

    $.subscribe = function(eventName, obj, method)
    {
        $(window).bind(eventName, function()
        {
            obj[method].apply(obj, slice.call(arguments, 1));
        });
        return $;
    };

    $.publish = function(eventName)
    {
        $(window).trigger(eventName, slice.call(arguments, 1));
        return jQuery;
    };

})(jQuery, window, Array.prototype.slice); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2011-01-25T03:39:04.207

要添加到现有答案，这里有一篇[很棒的文章](http://www.adequatelygood.com/2010/3/JavaScript-Module-Pattern-In-Depth)，其中涵盖了基于模块模式构建的更高级技术。

一旦您的 Javascript 代码达到一定大小，您将不可避免地希望通过将其分解为多个文件/模块/子模块来对其进行重构。如果您不确定如何使用模块模式来完成此操作，那么这篇文章是必读的。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-02-09T16:03:13.380

我的 js 文件通常遵循类似于这样的命名约定：

*   xxx.utility.js
*   mypage.events.js
*   xxx.common.js
*   /lib/
*   /OS-DoNotDistribute/lib/

在哪里

*   'mypage' 是 html、aspx、php 等文件的名称。
*   'xxx' 是这个概念。（即orders.common.js）
*   'utility' 表示它是一个可重用的库脚本（即 ajax.utility.js、controlfader.utility.js）
*   'common' 是这个应用程序的可重用功能，但不能在其他项目中重用
*   “lib”是任何外部或库脚本的子目录
*   'OS-DoNotDistribute' 是一个子目录，用于确保在销售应用程序时不会分发 OS 许可代码。

此外，对于 ajax，我对回调函数有一个特殊的命名约定，因此很容易分辨它们是什么。

我不确定它是否接近您正在寻找的东西，但我希望它有所帮助。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2011-12-13T16:23:23.727

我真的很喜欢这些文章：

[http://www.virgentech.com/blog/2009/10/building-object-oriented-jquery-plugin.html](http://www.virgentech.com/blog/2009/10/building-object-oriented-jquery-plugin.html)

[http://stefangabos.ro/jquery/jquery-plugin-boilerplate-revisited/](http://stefangabos.ro/jquery/jquery-plugin-boilerplate-revisited/)

他们帮助我了解 Telerik 如何为 asp.net mvc 创建扩展。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-08-10T14:58:14.843

我喜欢 AMD 的想法（参见 [nix 的回答](https://stackoverflow.com/a/8127152/270274)）。

但我通常将我所有的 JS 文件编译成一个 JS 文件。在这种情况下，不需要异步部分。所以我写了一个小“Infile Module Loader”。

这是：[https ://codereview.stackexchange.com/questions/14530/a-little-infile-amd](https://codereview.stackexchange.com/questions/14530/a-little-infile-amd)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2011-09-26T08:47:31.183

我们可以在我们的 javascript-jquery 应用程序中使用 mvc 模式。（Backbone.js、knockout.js vs....）是我们可以用于此目的的成熟库。

# google-app-engine - 实体子级的 Google App Engine 查询（非过滤器）

> ID：528650
> 
> 赞同：6
> 
> 时间：2009-02-09T15:36:44.707
> 
> 标签：google-app-engine, gql, gqlquery, ancestor

实体的子实体在查询中可用吗？

鉴于：

```
class Factory(db.Model):
    """ Parent-kind """
    name = db.StringProperty()

class Product(db.Model):
    """ Child kind, use Product(parent=factory) to make """
    @property
    def factory(self):
        return self.parent()
    serial = db.IntegerProperty() 
```

假设 500 家工厂生产了 500 种产品，共计 250,000 种产品。有没有办法形成一个资源高效的查询，只返回一个特定工厂生产的 500 种产品？祖先方法是一个过滤器，因此使用例如 Product.all().ancestor(factory_1) 将需要重复调​​用数据存储。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-02-13T10:43:02.233

虽然祖先被描述为“过滤器”，但它实际上只是更新查询以添加祖先条件。在迭代查询之前，您不会向数据存储发送请求，因此您所拥有的将正常工作。

一个小问题：500 个具有相同父级的实体可能会损害可伸缩性，因为写入被序列化到实体组的成员。如果您只想跟踪制造产品的工厂，请使用 ReferenceProperty：

```
class Product(db.Model):
   factory = db.ReferenceProperty(Factory, collection_name="products") 
```

然后，您可以使用以下方法获取所有产品：

```
myFactory.products 
```

# c# - 2个C#进程之间最简单的进程间通信方法是什么？

> ID：528652
> 
> 赞同：80
> 
> 时间：2009-02-09T15:37:10.757
> 
> 标签：c#, ipc

我想在父进程和子进程之间创建一个通信，两者都是用 C# 编写的。

它应该是异步的、事件驱动的。

我不想在每个进程中运行一个线程来处理非常罕见的通信。

什么是最好的解决方案？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2009-02-09T15:48:08.533

[匿名管道](https://docs.microsoft.com/en-us/dotnet/standard/io/how-to-use-anonymous-pipes-for-local-interprocess-communication)。

对 BeginRead/BeginWrite 和 AsyncCallback 使用异步操作。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-04-28T05:13:30.950

如果您的进程在同一台计算机上，您可以简单地使用**stdio**。

这是我的用法，一个网页截图：

```
var jobProcess = new Process();

jobProcess.StartInfo.FileName = Assembly.GetExecutingAssembly().Location;
jobProcess.StartInfo.Arguments = "job";

jobProcess.StartInfo.CreateNoWindow = false;
jobProcess.StartInfo.UseShellExecute = false;

jobProcess.StartInfo.RedirectStandardInput = true;
jobProcess.StartInfo.RedirectStandardOutput = true;
jobProcess.StartInfo.RedirectStandardError = true;

// Just Console.WriteLine it.
jobProcess.ErrorDataReceived += jp_ErrorDataReceived;

jobProcess.Start();

jobProcess.BeginErrorReadLine();

try
{
    jobProcess.StandardInput.WriteLine(url);
    var buf = new byte[int.Parse(jobProcess.StandardOutput.ReadLine())];
    jobProcess.StandardOutput.BaseStream.Read(buf, 0, buf.Length);
    return Deserz<Bitmap>(buf);
}
finally
{
    if (jobProcess.HasExited == false)
        jobProcess.Kill();
} 
```

在 Main 上检测 args

```
static void Main(string[] args)
{
    if (args.Length == 1 && args[0]=="job")
    {
        //because stdout has been used by send back, our logs should put to stderr
        Log.SetLogOutput(Console.Error); 

        try
        {
            var url = Console.ReadLine();
            var bmp = new WebPageShooterCr().Shoot(url);
            var buf = Serz(bmp);
            Console.WriteLine(buf.Length);
            System.Threading.Thread.Sleep(100);
            using (var o = Console.OpenStandardOutput())
                o.Write(buf, 0, buf.Length);
        }
        catch (Exception ex)
        {
            Log.E("Err:" + ex.Message);
        }
    }
    //...
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-02-09T15:48:17.970

我建议使用 Windows Communication Foundation：

[http://en.wikipedia.org/wiki/Windows_Communication_Foundation](http://en.wikipedia.org/wiki/Windows_Communication_Foundation)

您可以来回传递对象，使用各种不同的协议。我建议使用二进制 tcp 协议。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-02-09T15:49:18.607

WCF 上的命名管道。

[http://msdn.microsoft.com/en-us/library/ms733769.aspx](http://msdn.microsoft.com/en-us/library/ms733769.aspx)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-03-16T09:15:00.227

还有[COM](https://docs.microsoft.com/en-us/windows/win32/com/com-clients-and-servers)。

有一些技术细节，但我想说的优点是您将能够调用您可以定义的方法。

MSDN 提供 C# COM 互操作教程。请搜索，因为这些链接确实发生了变化。

要立即开始，请转到[此处](https://stackoverflow.com/questions/7092553/turn-a-simple-c-sharp-dll-into-a-com-interop-component)...

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-08-27T09:59:51.590

还有可以跨网络以及在本地计算机上运行的 MSMQ（Microsoft 消息队列）。虽然有更好的沟通方式值得研究：[https ://msdn.microsoft.com/en-us/library/ms711472(v=vs.85).aspx](https://msdn.microsoft.com/en-us/library/ms711472(v=vs.85).aspx)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-01-06T15:59:16.080

当不考虑安全性并考虑到您的限制（同一台机器上的两个 C# 进程）时，C# 中用于进程间通信的最简单解决方案是 Remoting API *。*现在 Remoting 是一项遗留技术（与已弃用的技术不同），不鼓励在新项目中使用，但它确实运行良好，并且不需要大量的盛况和环境即可开始工作。

MSDN 上有一篇[出色的文章，介绍了如何使用`IpcChannel`](https://docs.microsoft.com/en-us/dotnet/api/system.runtime.remoting.channels.ipc.ipcchannel?redirectedfrom=MSDN&view=netframework-4.7.2)Remoting 框架中的类（[感谢 Greg Beech 在这里找到](https://stackoverflow.com/a/1802572/184528)）来设置简单的远程处理服务器和客户端。

我建议先尝试这种方法，然后尝试将您的代码移植到 WCF（Windows 通信框架）。它有几个优点（更好的安全性、跨平台），但必然更复杂。幸运的是，MSDN 有一篇[非常好的文章，用于将代码从 Remoting 移植到 WCF](https://docs.microsoft.com/en-us/dotnet/framework/wcf/migrating-from-net-remoting-to-wcf)。

如果您想立即深入了解[WCF，这里有一个很棒的教程](https://dopeydev.com/wcf-interprocess-communication/)。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-01-15T07:21:39.653

以下是异步进行进程间通信的方法：

1.  匿名管道[https://docs.microsoft.com/en-us/dotnet/api/system.io.pipes.anonymouspipeserverstream?view=net-5.0](https://docs.microsoft.com/en-us/dotnet/api/system.io.pipes.anonymouspipeserverstream?view=net-5.0)
2.  命名管道[https://www.codeproject.com/Articles/1179195/Full-Duplex-Asynchronous-Read-Write-with-Named-Pip](https://www.codeproject.com/Articles/1179195/Full-Duplex-Asynchronous-Read-Write-with-Named-Pip)
3.  套接字[https://docs.microsoft.com/en-us/dotnet/framework/network-programming/asynchronous-server-socket-example](https://docs.microsoft.com/en-us/dotnet/framework/network-programming/asynchronous-server-socket-example)
4.  共享内存

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-12-15T15:24:27.490

死灵法

如果可能的话，制作共享文件会更容易！

```
//out
File.AppendAllText("sharedFile.txt", "payload text here");
// in
File.ReadAllText("sharedFile.txt"); 
```

# git - 如何通过在 Git 中选择远程版本来自动解决合并冲突？

> ID：528659
> 
> 赞同：19
> 
> 时间：2009-02-09T15:38:52.110
> 
> 标签：git, merge, conflict

有没有办法指定 git 通过为每个文件获取远程版本来自动解决一组文件的冲突？例如，获取某个目录中每个文件的远程版本？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-02-09T15:49:16.687

[git-merge](http://www.kernel.org/pub/software/scm/git/docs/git-merge.html)似乎只支持“我们的”策略，合并的结果是本地版本。这只适用于整棵树。

如果您在进行合并时进入冲突状态，您可以使用[git-checkout](http://git-scm.com/docs/git-checkout)的`--theirs`路径从索引中检索文件。

最后，您可以[git-reset](http://git-scm.com/docs/git-reset)强制树的某些部分进行特定的提交。

现在还有[http://www.seanius.net/blog/2011/02/git-merge-s-theirs/](http://www.seanius.net/blog/2011/02/git-merge-s-theirs/)基本上建议进行 a`merge -s ours`然后反向应用更改。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-01-12T21:19:52.183

您可以将`recursive`策略 (-s) 与`theirs`选项 (-X) 一起使用。那是：

```
git merge -s recursive -X theirs source_branch 
```

# java - 用Java做Xml的简单方法

> ID：528664
> 
> 赞同：28
> 
> 时间：2009-02-09T15:40:03.060
> 
> 标签：java, xml, serialization

有没有用 Java 读写 Xml 的简单方法？

我以前使用过 SAX 解析器，但我记得它不直观，我查看了一些 JAXB 教程，它看起来很复杂。

我不知道我是否被 C# 的 XmlDocument 类宠坏了，但我想做的只是创建一个 Xml 文档，它代表一组类及其成员（有些是属性，有些是元素）。

我会研究序列化，但 XML 必须与 ac# 应用程序的输出具有相同的格式，我正在对 Java 进行逆向工程。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-02-09T16:00:27.783

我推荐[XOM](http://www.xom.nu/)。它的 API 清晰直观。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-02-09T15:42:05.443

你应该看看[Xstream](http://xstream.codehaus.org/)。有一个 2 分钟的教程，非常[简单](http://xstream.codehaus.org/tutorial.html)。要获得相同的格式，您将对类进行相同的建模。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-09T15:44:02.410

如果您使用的是 jdk 1.4 或更新版本，请查看[XMLEncoder](http://java.sun.com/javase/6/docs/api/java/beans/XMLEncoder.html)类。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-02-09T16:24:25.200

一些比较流行的方法可以考虑：

## XML 绑定的 Java 架构

JAXB 是标准 XML 绑定的规范。如果您已经有一个 XSD，它可以为您生成 Java 类，然后剩下的就是使用标准 API 进行编组/解组。

*   [Glassfish](http://jaxb.java.net/)的参考实现
*   Apache 的实现[JaxMe](http://ws.apache.org/jaxme/)

## 其他绑定方法

与 JAXB 一样，这些方法使用基于 XML 的绑定配置。它们可以对解组过程提供更细粒度的控制。

*   [蓖麻](http://www.castor.org/)
*   [吉布克斯](http://jibx.sourceforge.net/)

## 自己滚

*   使用[StAX](http://today.java.net/pub/a/today/2006/07/20/introduction-to-stax.html)
*   使用[XOM](http://www.xom.nu/)
*   使用纯[XPath](http://java.sun.com/j2se/1.5.0/docs/api/javax/xml/xpath/package-summary.html)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-02-09T19:04:30.137

[Dom4j](http://dom4j.sourceforge.net/)是一个用于在 java 中创建 xml 文档的简单 api。

```
Document document = DocumentHelper.createDocument();
Element root = document.addElement( "root" );

Element author2 = root.addElement( "author" )
  .addAttribute( "name", "Toby" )
  .addAttribute( "location", "Germany" )
  .addText( "Tobias Rademacher" ); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-02-09T15:49:39.153

迄今为止最简单的方法是Groovy[中的](http://groovy.codehaus.org/)[MarkupBuilder](http://groovy.codehaus.org/Creating+XML+using+Groovy%27s+MarkupBuilder)。将 Groovy 视为 Java 的一种新语法。XmlSlurper[可](http://groovy.codehaus.org/Reading+XML+using+Groovy%27s+XmlSlurper)用于读取 XML。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-02-09T15:50:52.660

我认为[Apache XMLBeans](http://xmlbeans.apache.org/)提供了您所追求的功能。

维基[百科页面](http://en.wikipedia.org/wiki/XMLBeans)提供了很好的概述和示例用法。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-02-09T17:56:00.457

Java 有多种 XML 处理选项可供选择，尽管从[XmlDocument](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.aspx)的 .NET 文档来看，[Java DOM 实现](http://java.sun.com/javase/6/docs/api/org/w3c/dom/Document.html)是最接近的开箱即用等效项。

.NET [XmlDocument](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.aspx)：

> 此类实现了 W3C 文档对象模型 (DOM) Level 1 Core 和 Core DOM Level 2。

Java[文档](http://java.sun.com/javase/6/docs/api/org/w3c/dom/Document.html)：

> 另请参阅文档对象模型 (DOM) 第 3 级核心规范。

示例代码：

```
public static void main(String[] args) throws Exception {
    File xmlFile = new File(".classpath");

    // read it
    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
    DocumentBuilder builder = factory.newDocumentBuilder();
    Document document = builder.parse(xmlFile);

    // walk it
    System.out.println("Node count=" + countNodes(document));

    // write it
    Source source = new DOMSource(document);
    Result result = new StreamResult(System.out);
    TransformerFactory transformerFactory = TransformerFactory
            .newInstance();
    Transformer transformer = transformerFactory.newTransformer();
    transformer.transform(source, result);
}

/** Doesn't count attributes, etc */
private static int countNodes(Node node) {
    int count = 0;

    NodeList kids = node.getChildNodes();
    count += kids.getLength();
    for (int i = 0; i < kids.getLength(); i++) {
        count += countNodes(kids.item(i));
    }

    return count;
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-04-11T00:59:45.503

我认为只有当您查看错误的示例时，JAXB 才会变得复杂。具体来说，是的，基于模式的方式可能会变得混乱。但是代码优先、基于注释的方法非常简单。

另一个简单的选择是[XStream](http://xstream.codehaus.org)。对于非约束性案例，[StaxMate](http://staxmate.codehaus.org/Tutorial)是流式 Stax 解析器的附加组件。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-02-09T15:47:06.303

如果 SAX 解析是强制性的，那么 JAXP 是一个不错的选择。我更喜欢 DOM 解析并使用[jdom](http://www.jdom.org/)，这对我来说似乎更容易。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-07-30T14:13:37.300

如果您想要类似 DOM 的方法，我当然会使用 XOM，如果您想要类似 SAX 的方法，我肯定会使用 SAX (www.sax.org)。我参与了 XML 的早期开发，而 SAX 是作为一种事件驱动的方法开发的，这对某些应用程序很有用。DOM/XOM 和 SAX 是互补的——有时你需要一个，有时另一个。如果您希望随时构建对象而不是将所有内容都读入内存，请使用 SAX。如果您乐于阅读并处理其中的所有内容，请使用 XOM。

我花了太多时间试图让 W3C DOM 工作 - IMO 它的定义很差，因为做某些事情的方式太多，而对其他事情来说还不够。当 XOM 出现时，它彻底改变了我的生产力。

XOM 社区知识渊博、专注且乐于助人。

# javascript - JavaScript window.open 仅当窗口不存在时才打开

> ID：528671
> 
> 赞同：21
> 
> 时间：2009-02-09T15:42:26.267
> 
> 标签：javascript, popup, window

我有一个应用程序，在单击链接时会打开一个新窗口。这会生成一个包含 Java 小程序的页面。我遇到的问题是单击相同的链接会重新加载页面，从而重置 Java 应用程序。有什么办法可以捕获这个吗？可以接受的两种解决方案是：

1.  允许从点击处理程序打开多个窗口
2.  如果窗口已经打开，则忽略后续请求

为成为 Javascript 新手而道歉 - 这并不是我的主要工作。

附加到处理程序的代码是

```
function launchApplication(l_url, l_windowName)
{
  var l_width = screen.availWidth;
  var l_height = screen.availHeight;

  var l_params = 'status=1' +
                 ',resizable=1' +
                 ',scrollbars=1' +
                 ',width=' + l_width +
                 ',height=' + l_height +
                 ',left=0' +
                 ',top=0';

  winRef = window.open(l_url, l_windowName, l_params);
  winRef.moveTo(0,0);
  winRef.resizeTo(l_width, l_height);
} 
```

编辑：

感谢您的回复 - 我稍微修改了建议，以便可以通过该功能打开多个 URL。

EDIT2：此代码的另一个版本在[Check for a URL open on another window](https://stackoverflow.com/questions/528941/how-can-i-check-for-an-open-url-in-another-window)

```
var g_urlarray = [];

Array.prototype.has = function(value) {
    var i;
    for (var i in this) {
        if (i === value) {
            return true;
        }
    }
    return false;
};

function launchApplication(l_url, l_windowName)
{
  var l_width = screen.availWidth;
  var l_height = screen.availHeight;
  var winRef;

  var l_params = 'status=1' +
                 ',resizable=1' +
                 ',scrollbars=1' +
                 ',width=' + l_width +
                 ',height=' + l_height +
                 ',left=0' +
         ',top=0';
  if (g_urlarray.has(l_url)) {
    winRef = g_urlarray[l_url];
  }
  alert(winRef);
  if (winRef == null || winRef.closed) {
      winRef = window.open(l_url, l_windowName, l_params);
      winRef.moveTo(0,0);
      winRef.resizeTo(l_width, l_height);
      g_urlarray[l_url] = winRef;
  }
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-02-09T15:56:47.997

我会这样做 - 基本上将所有引用的打开窗口存储在函数本身上。当函数触发时，检查窗口是否不存在或已关闭 - 如果是这样，启动弹出窗口。否则，请关注该请求的现有弹出窗口。

```
function launchApplication(l_url, l_windowName)
{
  if ( typeof launchApplication.winRefs == 'undefined' )
  {
    launchApplication.winRefs = {};
  }
  if ( typeof launchApplication.winRefs[l_windowName] == 'undefined' || launchApplication.winRefs[l_windowName].closed )
  {
    var l_width = screen.availWidth;
    var l_height = screen.availHeight;

    var l_params = 'status=1' +
                   ',resizable=1' +
                   ',scrollbars=1' +
                   ',width=' + l_width +
                   ',height=' + l_height +
                   ',left=0' +
                   ',top=0';

    launchApplication.winRefs[l_windowName] = window.open(l_url, l_windowName, l_params);
    launchApplication.winRefs[l_windowName].moveTo(0,0);
    launchApplication.winRefs[l_windowName].resizeTo(l_width, l_height);
  } else {
    launchApplication.winRefs[l_windowName].focus()
  }
} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2009-02-09T15:59:10.563

您需要执行 2 次测试... 1 检查弹出窗口是否已定义，2 检查是否已关闭。

```
if(typeof(winRef) == 'undefined' || winRef.closed){
  //create new
  winRef = window.open(....);
} else {
  //it exists, load new content (if necs.)
  winRef.location.href = 'your new url';
  //give it focus (in case it got burried)
  winRef.focus();
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-02-09T15:45:33.030

您可以在打开新窗口的页面中使用类似的内容：

```
var newWindow = null;

function launchApplication()
{
  // open the new window only if newWindow is null (not opened yet)
  // or if it was closed
  if ((newWindow == null) || (newWindow.closed))
    newWindow = window.open(...);
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-06T01:21:51.613

工作代码

```
var newwindow = null;
function popitup(url) {
    if ((newwindow == null) || (newwindow.closed)) {
        newwindow=window.open(url,'Buy','width=950,height=650,scrollbars=yes,resizable=yes');
        newwindow.focus();
    } else {
        newwindow.location.href = url;
        newwindow.focus();    
    }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-02-09T15:46:35.947

你可以这样检查：

```
if(!winref || winref.closed)
{
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-11-05T02:35:41.670

尝试检查：

if (!winref || winref.closed || !winref.document) { }

# .net - 如何使用 .NET 执行多个 Oracle SQL 语句

> ID：528676
> 
> 赞同：2
> 
> 时间：2009-02-09T15:42:34.550
> 
> 标签：.net, sql, oracle

作为我们构建过程的一部分，我们希望针对新的数据库实例执行由 DDL 和 DML 语句组成的 SQL 脚本。

如果不解析和拆分脚本，ADO.NET 连接/命令将无法处理此问题。

命令行实用程序只能以`sqlplus`交互方式执行脚本，不适合批量使用。

我错过了什么？使用oracle时如何执行sql脚本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-09T15:50:53.253

为什么您认为 SQL *Plus 实用程序不适合批量使用？使用它来运行这些类型的脚本是很常见的——*如果你愿意，你可以在调用它时将脚本传递给 SQL Plus，即

```
sqlplus scott/tiger@someDatabase @someScript.sql 
```

这是部署构建的一种非常常见的方式。

如果问题出在 SQL*Plus 处理错误的方式上，您可以简单地添加以下行

```
WHENEVER SQLERROR EXIT SQL.SQLCODE 
```

中止并抛出遇到的 Oracle 错误号。[WHENEVER SQLERROR 命令](http://download.oracle.com/docs/cd/B19306_01/server.102/b14357/ch12052.htm#i2700066)的文档还提供了许多其他选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-09T16:53:44.803

德夫迪米，

我同意 Erik K.

是的，您可以在匿名块中包含 DDL。

```
DECLARE
BEGIN
     EXECUTE IMMEDIATE 'TRUNCATE TABLE foo';
END; 
```

请记住，DDL 在运行之前和之后都会进行提交。所以作为交易的一部分，它有点糟糕。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-09T15:58:26.573

我认为如果你将语句包装在 DECLARE/BEGIN/END 中，你可以做到这一点。不过，我无法再访问 Oracle，因此无法对其进行测试。例子：

```
DECLARE
BEGIN
    INSERT INTO ...;
    UPDATE something ...;
END; 
```

由于要执行 DDL，请使用`EXECUTE IMMEDIATE`.

# ruby - 关于在不使用 Rails / Merb 等框架的情况下使用 Ruby 开发网站的网站/文章/书籍的建议

> ID：528679
> 
> 赞同：2
> 
> 时间：2009-02-09T15:42:50.400
> 
> 标签：ruby

我正在努力寻找有关在 Ruby 中开发 Web 应用程序的好材料，而无需在通常的地方使用 Rails 或 Merb 等框架（我已经在 Google、Safari 在线书籍和 stackoverflow 上花费了一段时间！）。我完全不反对框架。只是我的预期架构有点不同，所以不太合适。

您能否就您认为有用的资源提出一些建议？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-09T15:48:54.990

你应该试试[Sinatra 。](http://github.com/sinatra/sinatra/tree/master)它是一个框架，但却是一个极简主义的框架，因此您可以轻松地看到引擎盖下发生的事情。

除此之外，也许[CGI](http://www.ruby-doc.org/stdlib/libdoc/cgi/rdoc/index.html) Ruby 库是一个值得研究的地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-09T16:58:21.750

如果您打算采用自制方法，我强烈推荐 O'Reilly 出版的 Ruby Cookbook。这是我买过的最有用的 Ruby 书籍之一，并且有一些关于互联网编程的非常好的章节（14 - 16）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-09T16:02:57.000

查看[rack](http://rack.rubyforge.org/)，这是在不使用预先存在的框架的情况下创建 ruby​​ web 应用程序的方法。从文档：

“一个 Rack 应用程序是一个响应调用的 Ruby 对象（不是一个类）。它只接受一个参数，即环境并返回一个恰好包含三个值的数组：状态、标题和正文。”

如果一个最小的框架就足够了，那么我推荐[wave](http://rubywaves.com/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-10T17:47:27.387

[韦比](http://webby.rubyforge.org/)值得一看。简单，但对某些应用程序很有用。

# c# - 强类型数据集会提高性能吗？

> ID：528680
> 
> 赞同：4
> 
> 时间：2009-02-09T15:43:05.703
> 
> 标签：c#, .net, performance, dataset, strongly-typed-dataset

在我工作的地方，我们*终于*想到了使用强类型数据集将我们的一些查询封装到 sqlserver 的想法。我一直在吹捧的想法之一是强类型列的强度，主要是因为不需要转换任何数据。我认为强类型数据集会在以下可能有数千行的情况下提高性能是错误的吗？

老办法：

```
using(DataTable dt = sql.ExecuteSomeQuery())
{
    foreach (DataRow dr in dt.Rows)
    {
        var something = (string)dr["something"];
        var somethingelse = (int)dr["somethingelse"];
    }
} 
```

新方法：

```
MyDataAdapter.Fill(MyDataset);
foreach (DataRow dr in MyDataset.MyDT.Rows)
{
    var something = dr.Something;
    var somethingelse = dr.SomethingElse;
} 
```

如果属性真的只是在幕后进行转换，我可以看到根本不会有任何加速；也许首先要花费比以前更长的函数调用开销。

我们应该了解使用 DataSet 的其他性能优势/劣势吗？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-02-09T15:45:49.397

我不确定使用强类型数据集是否会有任何性能改进，但是您会获得额外的类型安全性，并且例如当您输入错误的字段名称时会出现编译器错误。

[MSDN 杂志](http://msdn.microsoft.com/en-us/magazine/cc163877.aspx)上有一篇关于它们的文章，引用其中的一句话：

> 访问类型化数据集的速度与访问非类型化数据集的更快技术相当（因为类型化数据集只是非类型化数据集的一层），类型化数据集的可读性是最好的

此外，正如 Stuart B 指出的那样，仅 Intellisense 就值得。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2010-07-31T16:24:54.540

如果您查看为类型化数据集生成的代码，您可以看到在每个类型化调用下都有一个使用字符串索引名称进行的调用。因此，它们确实没有提供任何性能提升，只有类型安全。

然而，我确实对类型化数据集中的可空字段有一个主要的抱怨。具体来说，如果您访问一个为空的 int 字段，它会引发异常。您必须首先调用 IsMyfieldNull() 来确定它是否为空，如果是则避免引用它。一个真正的解决方案是允许可以为空的类型字段，因此您不会冒着仅仅因为触摸字段而引发异常的风险。我脑海中的这个缺陷几乎否定了强打字的好处。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-02-09T15:47:09.593

不要忘记智能感知。这很美味。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-09T15:55:19.637

强类型数据集只是对您将使用的相同无类型数据集的强类型包装器。假设您将以合理、有效的方式使用非类型化 DataSet，强类型化 DataSet 不会更快（执行方面）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-09T15:48:59.870

从技术上讲，创建强类型数据集应该会对**性能造成小的影响。**虽然，创建强类型数据集带来了很多好处。在**可维护性**和编程方面。在 Intellisense 之上，如果您的数据访问层发生变化，您将不必搜索“第 1 列”之类的所有内容。您只需要更改实际将值分配给对象的位置。

这类似于“值得性能打击的 linq”。它速度较慢，但​​速度的轻微值得提高生产力水平。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-02-09T15:55:36.953

是的，使用强类型数据集有一个好处——那就是列查找。按名称查找列比按类型查找列要慢。为强类型数据集生成的代码按类型查找列，因此您可以获得一些性能提升。

# javascript - 使用 JavaScript 将转义的 html ASCII 代码转换为纯文本

> ID：528682
> 
> 赞同：2
> 
> 时间：2009-02-09T15:43:08.340
> 
> 标签：javascript, ascii

我正在寻找将指定 ASCII 代码（即：a）的 html 实体字符串转换为它们代表的 ASCII 字符（即：a）。我正在使用对象的属性并尝试分配一个值。例如：

```
object.Text(""); 
```

当我传递的是代表实体的字符串时，我得到了相同的字符串。我找不到将实体转换为它们所代表的字符的函数。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-02-09T16:12:21.813

要将字符串中的所有数字字符实体转换为其等效字符，您可以执行以下操作：

```
str.replace(/&#(\d+);/g, function (m, n) { return String.fromCharCode(n); }) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-02-09T15:45:11.690

试试[String.fromCharCode()](https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/String/fromCharCode)函数。

```
alert(String.fromCharCode(97)); 
```

如您所见，您必须去掉 & 和磅符号。

最好的祝福...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-09T15:45:52.140

检查[String.fromCharCode](http://www.w3schools.com/jsref/jsref_fromCharCode.asp)。

# java - Web 服务和属性类型

> ID：528685
> 
> 赞同：0
> 
> 时间：2009-02-09T15:43:54.453
> 
> 标签：java, web-services, axis2, design-patterns

我目前正在开发一个通过 web 服务公开一些功能的项目。麻烦的是，一些调用应该返回一个“属性”数组，这是一个数据库单元的容器类。

显然，这些属性具有不同的类型（int、string、date、timestamp 等）。没什么难的，只是基本类型。到目前为止，Web 服务调用只返回一个 Attribute 对象数组，该数组保存字符串中的值。

现在我还没有编写 web 服务的代码，我只想知道是否有一些已知的模式来设计这种情况（以便向实际上是这些 web 服务的开发人员的人提出建议）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-09T17:20:36.297

我认为InfoQ 上的[这一系列](http://www.infoq.com/articles/schema-for-ws-part1)文章将帮助您（或实际的开发人员）了解您需要做什么。它讨论了 XML 数据类型和 Java 数据类型之间的映射。

如果不是，那我不太明白你的问题。对不起！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-09T16:17:53.733

我认为您需要“合同优先”的网络服务。以您接受 XML 请求并返回 XML 响应的方式编写它们。它与返回字符串数组的方案没有太大区别，但它在不同客户端之间的可移植性要高得多。字符串和数组的定义在 Java 和 .NET 中是不同的，因此任何将对象用于请求或响应的方法都会锁定在特定客户端中。坚持使用 XML；从模式开始作为您与客户的合同。

# unit-testing - 如何为 Moq 和 Linq-to-Sql 编写 CRUD 单元测试

> ID：528689
> 
> 赞同：3
> 
> 时间：2009-02-09T15:44:45.887
> 
> 标签：unit-testing, .net-3.5, moq, irepository

我只是参与起订量和单元测试，所以如果这看起来很明显，请原谅我（通过 SO 快速搜索并没有向我显示类似的东西）。

我与以下提议的成员有一个接口：

```
void AddFeed(Feed feed); 
```

我想为此功能编写一个单元测试。测试类有一个 Moq Repository，声明如下：

```
static IFeedRepository MockFeedsRepository(params Feed[] feeds)
    {
        var mockFeedsRepository = new Moq.Mock<IFeedRepository>();
        mockFeedsRepository.Expect(x => x.Feeds).Returns((feeds.AsQueryable));

        return mockFeedsRepository.Object;
    } 
```

应该如何修改模拟存储库声明以包含这种新的所需行为，或者我应该创建一个不同的起订量（以及如何完成）。

我的假设是，在创建模拟之后，派生单元测试会容易得多，但非常感谢提示。

非常感谢，

凯夫狗

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-02-10T01:44:37.910

我还假设您会像这样使用 AddFeed 方法

```
Feed myNewFeed = new Feed();
feedRepository.Add(myNewFeed); 
```

并且您没有像这样使用它（这是糟糕的设计）

```
IFeedRepository feedRepository = new FeedRepository();
Feed myNewFeed = new Feed(feedRepository);
...
myNewFeed.Save(); 
```

我猜你会想要进行这样的测试：

```
[Test]
public void TheTest()
{
  IFeedRepository repository = MockFeedsRepository({feed1, feed2, feed3});
  Feed newFeed = new Feed();
  repository.Add(newFeed);
  Assert.AreEqual(4,repository.Count());
} 
```

如果是这种情况，那么测试实际上并没有测试任何东西，除了你的模拟内存存储库的实现。那是你真正需要做的吗？

我建议您要做的是测试存储库的 L2Sql 实现，或者测试类如何与 IFeedRepository 接口交互。

如果你想测试 IFeedRepository 接口的使用，那么只需做一些简单的事情，比如

```
[Test]
public void TheTest()
{
      IFeedRepository repository = Moq.Mock<IFeedRepository>();
      Feed newFeed = new Feed();
      repository.Expect(r => r.Add(newFeed)); //no return as it's a void method
      //repository.Expect(r => r.Add(newFeed)).Throws(new ApplicationException()); --Test handing of exceptions

      //Code to hit the .Add() method

      //Assert the Add method was called.
} 
```

有关断言是否调用了方法的提示，请参阅[使用 Moq 确定是否调用了方法](https://stackoverflow.com/questions/347818/using-moq-to-determine-if-a-method-is-called)

我希望这会有所帮助

# c# - 添加自动属性会影响远程处理吗？

> ID：528691
> 
> 赞同：2
> 
> 时间：2009-02-09T15:45:29.427
> 
> 标签：c#, serialization, remoting

我们有一个巨大的客户端/服务器 WinForms 应用程序，它使用 .NET 远程处理在层之间传递 DAO，这有一些问题。

1.  早在我来到这里之前，所有的 DAO 都被定义为使用字段而不是属性，并且您不能将字段绑定到控件。
2.  向 DAO 添加字段或属性会更改序列化格式，需要双客户端/服务器部署，这对我们来说比客户端或服务器部署要困难得多（我们必须围绕医生的日程安排工作以最大限度地减少停机时间）。

使用一个简单的、人为的、虚构的例子，可以改变对象：

```
public class Employee
{
    public int ID;
    public string Name;
    public DateTime DateOfBirth;
} 
```

对此：

```
public class Employee
{
    public int ID { get; set; }
    public string Name { get; set; }
    public DateTime DateOfBirth { get; set; }
} 
```

更改序列化格式，破坏与旧客户端的兼容性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-09T15:49:47.263

重要编辑：这应该兼容并允许绑定？

```
public class Employee
{
    private int id;
    private string name;
    private DateTime dateOfBirth;
    public int ID { get {return id;} set {id = value;} }
    public string Name { get {return name;} set {name = value;} }
    public DateTime DateOfBirth { get {return dateOfBirth;}
         set {dateOfBirth = value;} }
} 
```

## 当然值得一试，不是吗？

是的，如果客户端/服务器不同步，这将导致问题。

.NET 远程处理使用 BinaryFormatterm，它（没有定制`ISerializable`实现）使用字段名称。使用自动属性会破坏字段名称。

只要您同时更新客户端和服务器，它应该可以工作。另一种选择是使用与名称无关的序列化，例如[protobuf-net](http://code.google.com/p/protobuf-net/)。如果你愿意，我可以提供一个例子（它支持`ISerializable`使用）。

（顺便说一下，添加属性不应该**影响**，`BinaryFormatter`因为它是基于字段的）

* * *

[根据要求，这是使用protobuf-net](http://code.google.com/p/protobuf-net/)控制远程序列化的示例（直接取自我的一个[单元测试](http://code.google.com/p/protobuf-net/source/browse/trunk/Examples/Remoting/RemotingDemo.cs)）；请注意，在客户端和服务器都同意之前，这*也是*不兼容的，但应该承受之后的更改（它被设计为非常可扩展）。请注意，有很多使用它的方法 - 显式成员表示法（如数据合同）或隐式字段（如`BinaryFormatter`）等（介于两者之间的所有内容）......这只是使用它的**一种**方式：

```
[Serializable, ProtoContract]
public sealed class ProtoFragment : ISerializable
{
    [ProtoMember(1, DataFormat=DataFormat.TwosComplement)]
    public int Foo { get; set; }
    [ProtoMember(2)]
    public float Bar { get; set; }

    public ProtoFragment() { }
    private ProtoFragment(
        SerializationInfo info, StreamingContext context)
    {
        Serializer.Merge(info, this);
    }
    void  ISerializable.GetObjectData(
        SerializationInfo info, StreamingContext context)
    {
        Serializer.Serialize(info, this);
    }
} 
```

在这里，底部的 2 个方法满足`ISerializable`，并简单地将执行传递给[protobuf-net](http://code.google.com/p/protobuf-net/)引擎。定义字段（`[ProtoMember(...)]`带有唯一标识标记）。如前所述，它也可以推断出这些，但更安全（不那么脆弱）是明确的。

# flash - 如何以编程方式提取闪存帧

> ID：528692
> 
> 赞同：2
> 
> 时间：2009-02-09T15:45:32.797
> 
> 标签：flash

我需要从 flash swf 中提取帧（可以是每个数字）并将其转换为 jpg/png/.. 以编程方式执行此操作的最佳方法是什么？别介意编程语言

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-09T21:11:22.030

您有原始的 .fla 文件还是只有 .swf 文件？

无论如何，如果您使用 Actionscript 3，那么每个实例`DisplayObject`及其子类 ( `Stage`, `Sprite`, `MovieClip`...) 都可以捕获到位图。为此，请创建一个`BitmapData`对象并使用其`draw`方法。

它看起来像这样：

```
do {
    bitmapData.draw(someMC);
    //then send the data to some server-side page
    //using getPixel or some other solution
    someMC.nextFrame();
} while (someMC.currentFrame =< someMC.totalFrames) 
```

有关如何将图像传输到服务器端页面的更多信息，请查看：[http://www.sephiroth.it/tutorials/flashPHP/print_screen/index.php](http://www.sephiroth.it/tutorials/flashPHP/print_screen/index.php)

如果您只有 swf 文件，您可以尝试将其加载到您自己的 swf 中并运行上述代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-09T16:18:41.500

查看[swfextract](http://www.swftools.org/swfextract.html)，它是[swftools](http://www.swftools.org/)的一部分。它是一个控制台应用程序，因此您可以通过自己的软件轻松驱动它。

# nhibernate - Hibernate/NHibernate 映射文件编辑器

> ID：528707
> 
> 赞同：5
> 
> 时间：2009-02-09T15:48:55.190
> 
> 标签：nhibernate, hibernate, nhibernate-mapping

我正在寻找有帮助的编辑器

[http://www.hibernate.org/hib_docs/nhibernate/html/mapping.html](http://www.hibernate.org/hib_docs/nhibernate/html/mapping.html)

内置，并允许以 GUI 方式简单编辑 XML 文件。我意识到有 CodeSmith 和 MyGeneration，但据我所知，这些只是一种方式，并且不允许编辑现有的 HBM 文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-10T09:44:22.843

我不相信 Hibernate/NHibernate 映射文件的编辑器具有上下文相关的帮助。如果您是 .NET 开发人员（使用 NHibernate 和 Visual Studio .NET），您可以通过注册架构文档来使用 IntelliSense 编辑映射：有关说明，请参阅[将 NHibernate 与 Visual Studio .NET](http://www.hibernate.org/366.html)一起使用。

另一个要考虑的选择是使用[NHibernate 的 Fluent API](http://fluentnhibernate.org/)。这将使用强类型 C# 代码替换映射文件。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-11T10:33:20.490

可能值得一看 Oren Eini 的 NHibernate Query Analyzer。主要用于分析 HQL 查询，它还有一个相当有用的 HBM 编辑器：

[NHibernate 查询分析器截图 http://img6.imageshack.us/img6/5617/nhqa.gif](http://img6.imageshack.us/img6/5617/nhqa.gif)

旧项目页面（带有 Flash 演示）：[http ://ayende.com/projects/nhibernate-query-analyzer.aspx](http://ayende.com/projects/nhibernate-query-analyzer.aspx)

新项目页面：[http ://www.assembla.com/wiki/show/NHibernateQueryAnalyzer](http://www.assembla.com/wiki/show/NHibernateQueryAnalyzer)

这将允许对 HBM 文件进行编辑，并将显示每个映射节点的所有可用属性。

鉴于您*可以*下载源代码，添加内联帮助并不是那么简单。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-08T09:55:56.047

Visual Studio 还有另一个选项。如果你有 Resharper，你可以下载 NHibernate 映射文件的插件。这个解决方案对我来说非常完美。您可以在此处阅读有关插件的更多信息：http: [//nhplugin.lieser-online.de/](http://nhplugin.lieser-online.de/)。希望这对你有用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-13T10:20:32.080

为什么不使用 ActiveWriter 来生成映射？您可以随时编辑它们。AW 为 NHibernate 和 ActiveRecord 生成模型/映射。编辑器在 Visual Studio.NET 内运行，您可以通过服务器资源管理器进行拖放。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-14T16:46:01.520

我遇到的最佳选择是 IDEA 的[Hibernate/JPA 编辑器](http://www.jetbrains.com/idea/features/java_hibernate.html)。然而，IDEA 并不是免费的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-14T17:50:28.887

*您是否尝试过 Hibernate 自己的名为Hibernate Tools for Eclipse and Ant*的 Eclipse 插件？

[http://www.hibernate.org/255.html](http://www.hibernate.org/255.html)

即使您没有使用 Eclipse 及其插件的经验，安装和使用它们的插件也应该相当简单：

只需下载它，将其解压缩到 eclipse 目录中，然后启动 IDE。接下来需要做的是打开 Hibernate 透视图。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-07-10T04:40:27.427

我正在使用 VisualStudio 和架构 (nhibernate-mapping.xsd) 来激活智能感知。R# 的插件对于检查与类的映射很有用。

# tfs - 运行 TFS 构建时，它会始终下载项目的所有文件吗？

> ID：528718
> 
> 赞同：0
> 
> 时间：2009-02-09T15:52:06.230
> 
> 标签：tfs, build-process

运行 TFS 构建时，它会始终下载项目的所有文件，还是可以使用以前的构建下载（只要文件没有更改）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-07-16T07:41:27.020

TFS build (2008) 将始终获取构建配置中指定的所有源，重新创建工作区并在构建之前强制获取源。

如果你添加

```
<PropertyGroup>
  <IncrementalBuild>true</IncrementalBuild>
</PropertyGroup> 
```

到您的 [Build name].proj 配置文件，那么它将仅执行增量构建并仅获取更改的文件。它跳过清理文件、初始化工作区和强制获取步骤。

更多信息：http: [//msdn.microsoft.com/en-us/library/aa833876.aspx](http://msdn.microsoft.com/en-us/library/aa833876.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-09T18:46:05.157

如果您右键单击 TFS2008 中的构建并执行“编辑构建定义...”，然后单击工作区选项卡，您可以控制构建下载的内容以将其限制为仅您需要的内容。请参阅我就该主题撰写的[这篇博文。](http://www.woodwardweb.com/vsts/tfs_top_tip_16.html)

此外，如果您愿意，可以通过在 TFSBuild.proj 文件中设置以下属性来启用 TFS 中的增量获取。

```
<IncrementalGet>true</IncrementalGet> 
```

那将只下载每次所需的文件。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-02-09T16:05:49.737

TFS 会记录您拥有的文件的哪些版本，因此当您执行“获取”时，它只会带来自上次“获取”以来已更改的文件。可以使用“/force”选项覆盖此行为，但很少需要。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2009-02-09T16:01:35.973

如果您执行“获取最新”，它应该只下载。

其他所有构建都将在本地进行。

# c# - 反序列化期间错误：“字符串未被识别为有效日期时间”是什么意思？

> ID：528721
> 
> 赞同：-1
> 
> 时间：2009-02-09T15:54:45.443
> 
> 标签：c#, xml-serialization

```
[XmlElement(ElementName = ElementConstants.CreateDate, 
    Namespace = "http://api.facebook.com/1.0/",
    DataType = "date", Type = typeof(DateTime))]
public DateTime CreateDate { get; set; } 
```

如果我尝试取出属性中的 DataType，我会得到：{“字符串 '1233469624' 不是有效的 AllXsd 值。”}

以下是其中一个节点值的示例：

```
<created>1230437805</created> 
```

我不确定如何在此处设置 DateTime 属性才能成功反序列化。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-02-09T15:57:20.227

[几天前](https://stackoverflow.com/questions/523245/deserialization-error-the-xml-element-name-from-namespace-is-already-presen)我已经为你回答了这个问题。

在您的课堂上，您需要进行翻译：

```
static readonly DateTime epoch = new DateTime(1970, 1, 1);
static long SerializeDateTime(DateTime value)
{
    return (long)((value - epoch).TotalSeconds);
}
static DateTime DeserializeDateTime(long value)
{
    return epoch.AddSeconds(value);
}

[XmlIgnore]
public DateTime CreateDate { get; set; }

[XmlElement("created"), Browsable(false)]
[EditorBrowsable(EditorBrowsableState.Never)]
public long CreateDateInt64 {
    get {return SerializeDateTime(CreateDate);}
    set {CreateDate = DeserializeDateTime(value);}
} 
```

等等。 The`CreateDateInt64`是`XmlSerializer`使用的版本 - 但在调用时，它会进行翻译并将值传递给（由于属性`CreateDate`而被忽略）。`XmlSerializer`

这意味着您`DateTime CreateDate`在类上有一个，在 xml 中有一个数字。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-02-09T16:01:53.227

对我来说，这看起来像是一个 unix 格式的时间戳。Xml“日期”数据类型的格式非常明确：

> yyyy-MM-ddTHH:mm:ss.fffffff+时区偏移

例如： `2009-02-09T10:01:23.3212345+06:00`

# tcp - 是否有一种算法可以对捕获的会话中使用的 TCP 拥塞控制算法进行指纹识别？

> ID：528733
> 
> 赞同：7
> 
> 时间：2009-02-09T15:57:34.703
> 
> 标签：tcp, network-programming, network-protocols, congestion-control

我想要一个程序来确定在捕获的 TCP 会话中使用的[TCP 拥塞控制算法。](http://en.wikipedia.org/wiki/TCP_congestion_avoidance_algorithms)

引用的维基百科文章指出：

> TCP New Reno 是最常实现的算法，SACK 支持非常普遍，是 Reno/New Reno 的扩展。其他大多数是仍需要评估的竞争提案。从 2.6.8 开始，Linux 内核将默认实现从 reno 切换到 BIC。在 2.6.19 版本中，默认实现再次更改为 CUBIC。

还：

> Compound TCP 是 Microsoft 的 TCP 实现，它同时维护两个不同的拥塞窗口，目标是在 LFN 上实现良好的性能，同时不损害公平性。它已与 Microsoft Windows Vista 和 Windows Server 2008 一起广泛部署，并已移植到较旧的 Microsoft Windows 版本以及 Linux。

确定正在使用哪种 CC 算法（来自捕获会话的第三方）的一些策略是什么？

**更新**

[这个项目](http://cse.unl.edu/%7Exu/research/TCPcensus.html)已经建立了一个工具来做到这一点：

> 互联网最近已经从同构拥塞控制发展到异构拥塞控制。几年前，互联网流量主要由标准 TCP AIMD 算法控制，而现在互联网流量由许多不同的 TCP 拥塞控制算法控制，如 AIMD、BIC、CUBIC、CTCP、HSTCP、HTCP、HYBLA、ILLINOIS、LP、 STCP、VEGAS、VENO、WESTWOOD+ 和 YEAH。然而，关于异构拥塞控制的互联网性能和稳定性研究的工作却很少。一个根本原因是缺乏不同 TCP 算法的部署信息。该项目的目标是：
> 
> ```
> 1) develop tools for identifying the TCP algorithms in the Internet,
> 2) conduct large-scale TCP-algorithm measurements in the Internet. 
> ```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-01T13:02:19.347

拥塞控制算法比您在此处提到的要多得多，在我的脑海中，列表包括：FAST、Scalable、HSTCP、HTCP、Bic、Cubic、Veno、Vegas。

由于实际实现中的错误修复，它们也有一些小的变化，我猜不同操作系统中的实现也会彼此略有不同。

但是如果我需要想出一个想法，那就是估计连接的 RTT，您可以尝试查看第三个和第四个数据包之间所用的时间，因为第一个和第二个数据包可能被污染了通过沿路由的 ARP 和其他发现算法。

在您对 RTT 进行估算后，您可以尝试在此过程中对其进行改进，但我不确定您如何做到这一点。但是您不需要该程序的完整规范，只需要想法:-)

计算出 RTT 后，您可以尝试将数据包放入 RTT 箱中，并计算每个箱中飞行数据包的数量。通过这种方式，您将能够“绘制”估计的 cwnd（bin 中的数据包数）到时间并在那里尝试一些模式匹配。

另一种方法是沿着跟踪并尝试在您的脑海中“运行”不同的拥塞控制算法，并查看任何点的决定是否与您将完成的决定相匹配。这将需要一些宽大和准确的间隔。

这听起来绝对是一项有趣且具有挑战性的任务！

# powershell - PowerShell - 分布式解决方案

> ID：528734
> 
> 赞同：4
> 
> 时间：2009-02-09T15:57:46.497
> 
> 标签：powershell, powershell-2.0, pssnapin

我是 PS 新手，所以我可能会弄错一些术语。

如果您想为 30 名开发人员/DBA 的团队推出自定义 PowerShell 环境（管理单元）。最好的方法是什么……如果您打算每周推出一次新功能？PowerShell 2.0 在这方面有帮助吗？

假设：
安装 PowerShell（v1 或 v2）的团队中的每个人都没有问题

**更新**：另请参阅下面关于 v2 的 Jeffrey Snover 的回答。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-09T16:00:47.533

这将在一定程度上取决于您打算进行的功能更改。对于我们的环境，我们推出了一个非常标准的 PS 安装，然后在每个人的配置文件中添加一行，以从服务器上的共享文件夹运行脚本。然后在该脚本中，我可以进行任何我想应用于每个人的自定义。

我们将这条线添加到机器特定的 MS 配置文件（%Windir% 中的那个），这是一个有意的选择。我们这样做是为了让用户基本上只能在他们的生产盒上得到这个。这样，当他们编写一些东西时，他们可以快速登录到测试框并运行脚本，以确保脚本将在不依赖这些定制的情况下部署。

目前，定制非常普通。大多数只是一些添加的功能和别名。我还有一个专门为 powershell 用 C# 编写的记录器，因此它从同一个网络文件夹中的 dll 加载它。

因为我经常在我的环境中玩耍，所以我的个人资料中有这个:)

```
$ProfileDir = ([System.IO.Directory]::GetParent($profile)).FullName
$localMSProfile = "$PShome\Microsoft.Powershell_profile.ps1"
$localAllProfile = "$PShome\profile.ps1"
$userAllProfile = "$ProfileDir\profile.ps1"
$userMSProfile = "$ProfileDir\Microsoft.Powershell_profile.ps1"
$allProfiles = ($localAllProfile, $localMSProfile, $userAllProfile, $userMSProfile) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-22T00:40:04.313

这就是我们在 PowerShell V2 中添加 MODULE 支持的原因——它是 xcopy 部署函数集的最简单机制。模块文档在这一点上非常简单，但在一两个月内应该会好得多。

实验！享受！从事！

Jeffrey Snover [MSFT] Windows 管理合作伙伴架构师

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-09T16:14:17.940

如果您每周推出一个新版本的管理单元，那么切换版本可能对这部分事情没有帮助。但是，您将在一个更新的平台上进行开发，并利用它附带的扩展功能的优势。

正如已经建议的那样，一些脚本可以减轻部署的痛苦，以至于您只需正确维护这些脚本并继续生成新版本即可。

# .net - 从 winforms 应用程序在同一浏览器窗口中打开页面

> ID：528736
> 
> 赞同：0
> 
> 时间：2009-02-09T15:58:05.433
> 
> 标签：.net, internet-explorer-6

我有一个 .NET winforms 程序，其中包含在系统的默认浏览器窗口中启动特定网页的功能。

*如果用户现有的浏览器窗口是 open ，则*最好在用户现有的浏览器窗口中启动该页面。当前启动浏览器的方式总是创建一个新窗口：

```
Process p = new Process();
p.StartInfo.FileName = @"C:\path\to\default\browser.exe";
p.StartInfo.Arguments = "http://pageurl";
p.Start(); 
```

该程序专门用于 Intranet，99% 的用户使用 IE6（我知道，很遗憾。）对其他浏览器的支持会很好，但不是必需的。

有什么建议么？IE6 的命令行参数稀疏，似乎不支持这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-09T16:18:50.657

简单的答案是你不能。

您正在生成一个与您的应用程序无关的新进程。您可以检查 IExplore.EXE 进程是否正在运行，并对应用程序窗口执行一些 SENDKEYS，但这有点粗略。

您可以在 WebBrowser 控件中显示网站，但这完全不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-09T16:20:05.163

如果用户正在使用该浏览器页面怎么办？你不想劫持它。现代浏览器足够聪明，可以在适当的时候创建一个新标签。

# asp.net - 使用 XMLHttpRequest 显示弹出窗口

> ID：528741
> 
> 赞同：0
> 
> 时间：2009-02-09T15:59:52.777
> 
> 标签：asp.net, popup, xmlhttprequest

我正在编写一个显示项目列表的 ASP.NET 3.5 Web 应用程序。当用户选择一个项目时，我希望能够显示一个带有详细信息的非模态弹出窗口。我希望能够同时显示几个细节弹出窗口。（即，用户可以单击一个项目以查看其详细信息，然后单击另一个项目以获取另一个弹出窗口。）目前我在回发期间调用 RegisterStartupScript 以在页面重新写入“window.open(...)”脚本时-渲染。当然，问题在于这需要整页回发和刷新。

我突然想到这可能是 XMLHttpRequest 或 AJAX 的完美用途，但我不知道该怎么做（或者这样做是否可能或聪明）。有人能给我指路吗？

我安装了 AJAX 扩展，但我不想使用 AJAX 控件工具包。

* * *

编辑：一些澄清：当用户选择一个项目时，会引发一个自定义事件。在服务器上，我处理这个事件并使用一些服务器端逻辑来构造一个 URL，然后我使用 RegisterStartupScript 来构造一个“window.open(myUrl...)”脚本。但是发回整个页面来执行此操作似乎效率低下，我想知道我是否可以调用一个简单的服务器端函数，该函数构造 url 并将其发送回，而无需往返整个页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-09T16:04:00.427

创建弹出窗口与 AJAX 几乎没有关系，而与 JavaScript 有更多关系。请参阅此处的 jQuery 对话框库。然后你可以使用 jQuery 的 AJAX API 来做你的服务器脏工作:)

[jQuery 对话框用户界面](http://docs.jquery.com/UI/Dialog)

--

Bill Konrad
[Devtacular - Web 开发教程](http://www.devtacular.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-09T16:24:15.200

您可以使用[DHTML Window 小部件](http://www.dynamicdrive.com/dynamicindex8/dhtmlwindow/)。它提供了多种方式来显示模态或非模态窗口。它还支持 AJAX。

您可以使用 dhtmlwindow 打开一个新窗口，或使用 dhtmlmodal 打开一个新的模态窗口。

当然，您可以对其进行编辑以符合您的要求。样本：

```
var insWindow = dhtmlmodal.open("insbox", "iframe","UserMaster.aspx?" + queryStr, "User Master", "width=425px,height=500,center=1,resize=0,scrolling=1", "recal"); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-02-09T16:08:29.887

你真的需要打开一个新窗口吗？在同一个窗口的当前页面顶部打开一个绝对定位的 DIV 或一个新图层，这些天来风靡一时。

* * *

编辑：

我不认为它会限制弹出窗口的数量，现在可以使用 jQuery + jQuery UI 之类的库来完成一些简洁的工作，您可以根据需要简单地创建尽可能多的这些 DIV/层并使其可移动, 可调整大小等。真正的弹出窗口仅有而这些没有的是它们不会出现在选项卡面板/任务栏上。

是的，您将受到打开主页的窗口大小的限制，但是，我个人并不认为这是一个问题，因为大多数人无论如何都会在最大化的浏览器窗口中冲浪。

老式的典型弹出窗口的实现对您来说无疑要容易得多，但它也会遇到最终用户弹出窗口阻止程序的问题。刚刚在我的工作中遇到了这个问题，出于某种原因，他们需要在证书身份验证过程中弹出一个窗口，并且一旦雅虎发布了他们的工具栏的新版本，它就会停止工作）。

# php - 如何在 PHP 中实现标签引擎？

> ID：528747
> 
> 赞同：1
> 
> 时间：2009-02-09T16:01:04.053
> 
> 标签：php, tags

我一直在尝试在我的应用程序中实现[PHP 标记引擎](http://phptagengine.com/)，但只成功了部分。根据文档，要调用 HTML 表单来修改现有项目的标签，您应该使用以下代码：

```
$pte->html_item_tags($item_id) 
```

问题是，没有任何关于如何调用新项目（还没有 ID）的标签表单的解释。

有谁知道该怎么做？

此外，在**$pte->html_item_tags($item_id)**中， $item_id 不能为空。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-09T16:48:16.360

找到了解决方案。

在文件 phptagengine.class.inc.php 的第 914 行添加：

```
if ($tags==false)
{
    $tags=array();
} 
```

不，您可以使用 $pte->html_item_tags() 调用 HTML 表单

不知道为什么开发人员忘记了这部分。

干杯，

罗伊。

# asp.net - ASP.NET 中的 SQL - 按错误排序仅一种类型排序

> ID：528767
> 
> 赞同：0
> 
> 时间：2009-02-09T16:06:03.387
> 
> 标签：asp.net, sql, sql-order-by, case

我正在开发一个 ASP.NET 应用程序，该应用程序应该输出所选州际公路的检测器数据，按英里标记排序。我们确定最好的方法是按照经度（西和东）或纬度（北和南）对其进行排序，具体取决于它的方向。这是填充它的查询。

```
SELECT [ShortWebID], [AvgSpeed], [update_time], [WebName] FROM [vwAverageSpeed] 

WHERE (([WebName] LIKE '%' + @WebName + '%') AND ([update_time] > @update_time)) 

ORDER BY CASE @WebName WHEN '%EB%'THEN [Longitude] WHEN '%WB%' THEN [Longitude] WHEN '%NB%' THEN [Latitude] WHEN '%SB%' THEN [Latitude] END 
```

WebName 视图具有不同的列表，例如“I-64 WB at MP 3.1”。他们有权访问的 ListItems 被列为“I-64”。

有 4 条不同的州际公路，除了一个 I-55/70 外，它对所有地方都适用。选择该选项后，列表不会按纬度或经度排序，而是仅按它们在表中的顺序排序。I-55/70 是唯一一个带有 / 的。这会影响事情吗？

先感谢您。

编辑：这些在列表项中列为“I-55/70 WB”，依此类推，样式与上例相同。很抱歉造成混乱。

Edit2：这成功了。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-09T16:09:44.657

`I-55/70`不对应`'%EB%`,`'%WB%'`或.`'%NB%'``'%SB%'`

你的`ORDER BY`条款总是`NULL`在那种情况下。

`WebName`当is时，您要对哪个字段进行排序`I-55/70`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-09T16:21:49.607

在我看来，您的 ORDER BY 子句在任何情况下都不应该起作用，因为“CASE @WebName WHEN '%EB%'”等不应评估为真。您使用的 case 语句会进行等价比较，但通配符运算符 ("%") 仅用于 LIKE。试试这个：

```
ORDER BY CASE 
WHEN @WebName LIKE '%EB%' THEN [Longitude] 
WHEN @WebName LIKE '%WB%' THEN [Longitude] 
WHEN @WebName LIKE '%NB%' THEN [Latitude] 
WHEN @WebName LIKE '%SB%' THEN [Latitude] 
END 
```

斜线不应该影响任何东西。

# c# - How can I run a query on a dataset that returns different columns to the table?

> ID：528776
> 
> 赞同：0
> 
> 时间：2009-02-09T16:09:36.827
> 
> 标签：c#, sql, datatable, dataset, non-nullable

I'm trying to pull some data from a SQL table in my dataset using C#.

In this case I do not need all the columns just a few specific ones, however as I am not pulling back a column with a mandatory NOT NULL, the copy of the table is throwing the exception

```
"Failed to enable constraints. One or more rows contain values violating non-null, unique, or foreign-key constraints." 
```

I'm sure I can work around this by returning the unNullable column to my table however I want to avoid returning unnecessary data.

The query I am using which throws this exception is

```
SELECT     DeviceSerialNumber, BuildID, LEMSCredentialsID, LEMSSoftwareID, OwnerID, RestagedDate
FROM         tblDevice
WHERE     (DeviceSerialNumber = @SerialNumber) 
```

This excludes the mandatory column "tblLocationID". In reality though, this column is only mandatory when considering the database as a whole, not when I just need build and software detail for use in my form.

I am trying to use this query in the following manner.

```
private DataTable dtDevice;

dtDevice = taDevice.GetDataByDeviceSN_ForRestage(txtDeviceSerial.Text); 
```

I notice when browsing the preview data, Visual Studio draws columns that are not specified in my SQL including the column tblLocationID it does not however populate these columns with data.

Is there anyway I can use this data in a temporary table without importing the non-nullable aspect of the column? preferably by not pulling through the non-selected columns at all?

For completeness, here's the definition (- minus foreign key definitions) of the source table:

```
CREATE TABLE [dbo].[tblDevice](
[DeviceSerialNumber] [nvarchar](50) NOT NULL,
[Model] [nvarchar](50) NULL,
[ManufactureDate] [smalldatetime] NULL,
[CleanBootDate] [smalldatetime] NULL,
[BuildID] [int] NULL,
[Notes] [nvarchar](3000) NULL,
[AuditID] [int] NULL,
[LocationID] [int] NOT NULL,
[SimID] [int] NULL,
[LEMSCredentialsID] [int] NULL,
[LEMSSoftwareID] [int] NULL,
[OwnerID] [int] NULL,
[RestagedDate] [smalldatetime] NULL,
[Boxed] [bit] NULL,
CONSTRAINT [PK_tblDevice_1] PRIMARY KEY CLUSTERED 
([DeviceSerialNumber] ASC) WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]) ON [PRIMARY] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-09T19:14:31.860

I assume taDevice is a tableadapter ? generated with the typed dataset ?

You could also generate the "FillDataByDeviceSN" method (you can generate a Get and a Fill)

then you get (pseudo-ish code):

```
tblDeviceDataTable dtService = new tblDeviceDataTable();
dtService.tblLocationID.AllowDbNull = true;
taDevice.FillDataByDeviceSN(dtService,txtDeviceSerial.Text); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-09T18:52:25.860

The column is mandatory because the metadata tells the client that to add any new rows (or alter rows), values for this column have to be provided. If you aren't altering the data and don't need two-way mapping, something more lightweight like a DataReader might be more appropriate.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-09T19:18:07.763

Here are a few options:

Create an "untyped dataset" for just the fields you want to use.

OR

Change the NullValue property of the NOT NULL field in your typed dataset from the default of "throw exception" to "empty".

OR

Try what Patrick suggested for setting the EnforceConstraints to False.

# perl - 如何判断 STDIN 是否连接到 Perl 中的终端？

> ID：528781
> 
> 赞同：9
> 
> 时间：2009-02-09T16:10:51.347
> 
> 标签：perl, terminal, stdin

如何判断 STDIN 是否连接到 Perl 中的终端？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-02-09T16:14:42.790

```
if (-t *STDIN) {
  # stdin is connected
} else {
  # stdin is not connected
} 
```

我通常将它与 , 结合使用`-t *STDOUT`，以确定我是从交互式 shell 还是从 cron 运行，以启用更多输出。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-02-09T17:21:34.297

您可能还对[IO::Interactive](http://search.cpan.org/dist/IO-Interactive)感兴趣，以确定 Perl 是否认为它正在与用户交互。仅仅连接到一个 tty 并不意味着用户会看到你在做什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-09T16:16:02.427

一种解决方案是使用*tty*：

```
[root@server] ~> tty
/dev/pts/0
[root@server] ~> echo y | tty
not a tty 
```

但它不是很漂亮...

# jquery - 从一个列表中拖放 jQuery UI 可拖动元素并将其放入另一个列表的问题

> ID：528787
> 
> 赞同：11
> 
> 时间：2009-02-09T16:13:27.130
> 
> 标签：jquery, jquery-ui, drag-and-drop, jquery-ui-draggable, jquery-ui-droppable

我正在使用`jQuery UI`并且可以创建一个简单的拖放列表。但是现在，我想将该元素放入另一个列表中。jQuery 总是认为该项目已被放置在错误的位置并将其滑回原始列表。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-02-09T16:40:25.317

我认为解决方案在这里找到：http: [//ui.jquery.com/demos/sortable/#connect-lists](http://ui.jquery.com/demos/sortable/#connect-lists)

它做了这样的事情：

```
$(function() {
        $("#sortable1, #sortable2").sortable({
            connectWith: ['.connectedSortable']
        });
    }); 
```

# apache-flex - Flex - 将参数发送到自定义 ItemRenderer？

> ID：528796
> 
> 赞同：23
> 
> 时间：2009-02-09T16:17:09.493
> 
> 标签：apache-flex, itemrenderer

我想要完成的工作是让我的 Flex Datagrid 中的财务数据进行颜色编码——如果是肯定的，则为绿色；如果是负数，则为红色。如果我想要着色的列是 dataProvider 的一部分，这将相当简单。相反，我是根据作为 dataProvider 一部分的另外两列来计算它的。这仍然相当简单，因为我可以在 ItemRenderer 中再次计算它，但计算的另一部分是基于文本框的值。所以，我认为我需要能够将文本框的值发送到自定义 ItemRenderer，但由于该值存储在主 MXML 应用程序中，我不知道如何访问它。将其作为参数发送似乎是最好的方法，但也许还有另一种方法。

这是我的 ItemRenderer 的当前代码：

```
package {
import mx.controls.Label;
import mx.controls.listClasses.*;

public class PriceLabel extends Label {
    private const POSITIVE_COLOR:uint = 0x458B00 // Green
    private const NEGATIVE_COLOR:uint = 0xFF0000; // Red 

    override protected function updateDisplayList(unscaledWidth:Number, unscaledHeight:Number):void {
        super.updateDisplayList(unscaledWidth, unscaledHeight);

        /* Set the font color based on the item price. */
        setStyle("color", (data.AvailableFunding >= 0) ? NEGATIVE_COLOR : POSITIVE_COLOR);
    }
} 
```

（data.AvailableFunding 不存在）

那么有谁知道我将如何实现这一目标？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2009-02-09T17:20:11.213

您可能想从 Flex API中查看[ClassFactory ：](http://livedocs.adobe.com/flex/3/langref/mx/core/ClassFactory.html)

这允许您设置具有任意类型/值的原型对象，每个类型/值都将传递给项目渲染器。从样本中：

```
var productRenderer:ClassFactory = new ClassFactory(ProductRenderer);
productRenderer.properties = { showProductImage: true };
myList.itemRenderer = productRenderer; 
```

上面的代码假定“ProductRenderer”有一个名为“showProductImage”的公共属性，该属性将设置为“true”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-09T18:30:53.477

啊，所以我知道outerDocument，但不知道parentDocument。我可以从主应用程序中使用 parentDocument.*任何我想要的东西，只要它是公开的，我就可以访问它。

例子：

```
setStyle("color", (parentDocument.availableFunding >= 0) ? POSITIVE_COLOR : NEGATIVE_COLOR); 
```

甜的！:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-09T18:31:39.857

如果需要，可以使用静态`Application.application`对象直接访问 TextBox 的值，该对象可从应用程序中的任何位置访问。

例如，如果您希望在 TextInput 控件的值更改时通知渲染器，您可以执行以下操作（在 ItemRenderer 中，以及在`myTextInput`主 MXML 类中定义的控件的 ID 在哪里）：

```
<mx:Script>
    <![CDATA[

        import mx.core.Application;

        private function creationCompleteHandler(event:Event):void
        {
            Application.application.myTextInput.addEventListener(TextEvent.TEXT_INPUT, handleTextInput, false, 0, true);
        }

        private function handleTextInput(event:TextEvent):void
        {
            if (event.currentTarget.text == "some special value")
            {
               // Take some action...
            }
        }

    ]]>
</mx:Script> 
```

使用这种方法，当 TextInput 的 text 属性发生变化时，每个 item-renderer 对象都会收到通知，您可以根据当时控件的值采取适当的操作。另请注意，在这种情况下，我已将`useWeakReference`参数设置为 true，以确保侦听器分配不会无意中干扰垃圾收集。希望能帮助到你！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-09T22:25:11.230

我喜欢重写项目渲染器的设置数据功能，以在数据提供者更改时更改渲染器，如下[所示](http://butterfliesandbugs.wordpress.com/2007/06/14/changing-text-color-in-a-datagrid-using-itemrenderers/)

当您覆盖该函数时，您可以将对象强制转换为您的对象以使 availableFunding 属性可用。

要访问文本框，您可以尝试创建一个公共属性并将该属性绑定到 mxml 文件中的文本框：

```
public var textVar:String;

            <mx:itemRenderer>
                <mx:Component>
                    <customrenderer textVar="{txtBox.text}" />
                </mx:Component>
            </mx:itemRenderer> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-01-05T05:01:57.120

不错的 ClassFactory 示例[在这里](http://www.leavethatthingalone.com/blog/index.cfm/2009/2/20/FeatureRichDynamicItemRenderers)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-02-15T17:59:49.147

还有另一种技术，虽然它最初感觉有点hacky，但在实际使用中可能不那么麻烦和清洁。

它涉及一个鲜为人知的事实，即事件调度当然是同步的，并且事件对象可以被视为由任何事件处理程序填充的值对象。

即 ItemRenderer 可以执行以下操作：

```
 ...
  var questionEvt:DynamicEvent = new DynamicEvent('answerMeThis', true, true);
  if (dispatchEvent(questionEvt))
  {
      if (questionEvent.answer == "some value")
      .... 
```

在渲染器上方的视图层次结构中的某个位置使用相应的处理程序，该处理程序具有事件侦听器并执行以下操作：

```
function handleAnswerMeThis(event:DynamicEvent):void
{
     event.answer = "another value";
     event.dataHelper = new DataHelperThingy();
} 
```

等等

它不必是 DynamicEvent - 我只是将它用于懒惰的说明目的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-03T09:30:37.470

我投票赞成悬崖。[迈耶斯的回答](https://stackoverflow.com/a/529053/1573641)。

下面是另一个示例，它通过构建一个函数来从 MXML 设置 itemRenderer 的属性，该函数将 ClassFactory 包装在 itemRenderer 类周围并注入必要的属性。

静态函数：

```
public static function createRendererWithProperties(renderer:Class,
properties:Object ):IFactory {
  var factory:ClassFactory = new ClassFactory(renderer); 
  factory.properties = properties;
  return factory;
} 
```

为列表中的每个项目添加工具提示的简单示例：

```
<mx:List dataProvider="{['Foo', 'Bar']}" itemRenderer="{createRendererWithProperties(Label, {toolTip: 'Hello'})}"/> 
```

参考：
[http ://cookbooks.adobe.com/post_Setting_the_properties_of_an_itemRenderer_from_MXM-5762.html](http://cookbooks.adobe.com/post_Setting_the_properties_of_an_itemRenderer_from_MXM-5762.html)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-08T11:10:45.300

你使用`outerDocument`财产。请[参阅`fx:Component`参考资料](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mxml/component.html)。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-01-06T05:38:00.803

您可以在 ItemRenderer 中创建一个“AvailableFunding”静态变量，然后在父文档中设置它。

```
public class PriceLabel extends Label {
    public static var availableFunding:int;
    ...
    ...
    SetStyle("color", (PriceLabel.availableFunding >= 0) ? NEGATIVE_COLOR : POSITIVE_COLOR);
} 
```

在您的父文档中，在您的文本框更新时设置它

```
PriceLabel.availableFunding = textBox.text; 
```

显然，每个 ItemRenderer 的值都相同，但看起来这可能就是你正在做的事情。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-12-02T16:41:11.250

看这个例子：

```
itemRenderer="{UIUtils.createRenderer(TextBox,{iconSrc:IconRepository.linechart,headerColor:0xB7D034,subHeaderColor:0xE3007F,textColor:0x75757D})}" 
```

# linq-to-sql - LINQ to SQL 错误

> ID：528802
> 
> 赞同：0
> 
> 时间：2009-02-09T16:18:11.923
> 
> 标签：linq-to-sql

我有一个表单，我可以在其中使用 datagridview 列出父表。我还有一个子付款表，列出了所有付款。我添加了一个组合框，这样我可以提高搜索效率。在我添加到盒子之前，一切都很好。现在我得到这个错误==

InValidCastException == 从字符串“”到类型“Double”的转换无效。

你能帮我纠正这个吗？我正在使用 SQL Server 2005 和 Visual Studios 2008。

Dim teamList = From Bowler In Db.Bowlers _ Where Bowler.TeamNumber <> "" _ Order By Bowler.TeamNumber _ 为 teamList 中的每个 TeamNumber 选择 Bowler.TeamNumber Me.ToolStripComboBox1.Items.Add(TeamNumber) Next End Sub

谢谢谢丽尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-09T16:21:03.867

我假设 Bowler.TeamNumber 是 Double 数据类型。这意味着你不能做

```
Bowler.TeamNumber <> "" 
```

相反，你只能做

```
Bowler.TeamNumber <> 0 
```

或者

```
Bowler.TeamNumber <> NULL 
```

编辑：根据评论，你需要这样的东西：

```
Dim teamList = (From Bowler In Db.Bowlers _ 
Where Bowler.TeamNumber <> "" _ 
Order By Bowler.TeamNumber _ 
Select Bowler.TeamNumber ).Distinct()

For Each TeamNumber In teamList 
Me.ToolStripComboBox1.Items.Add(TeamNumber) 
Next 
```

# mysql - MySQL 下一个/上一个 ids（任意排序顺序）

> ID：528806
> 
> 赞同：1
> 
> 时间：2009-02-09T16:19:02.357
> 
> 标签：mysql

这是我的桌子：

```
mysql> describe ps;
+-------+---------+------+-----+---------+----------------+
| Field | Type    | Null | Key | Default | Extra          |
+-------+---------+------+-----+---------+----------------+
| id    | int(11) | NO   | PRI | NULL    | auto_increment | 
| a     | text    | YES  |     | NULL    |                | 
| b     | text    | YES  |     | NULL    |                | 
| c     | text    | YES  |     | NULL    |                | 
+-------+---------+------+-----+---------+----------------+
4 rows in set (0.00 sec) 
```

假设我有如下数据：

```
mysql> select * from ps;
+----+------+------+------+
| id | a    | b    | c    |
+----+------+------+------+
|  1 | x    | x    | x    | 
|  2 | x    | y    | x    | 
|  3 | x    | z    | x    | 
|  4 | x    | x    | y    | 
|  5 | x    | x    | z    | 
|  6 | x    | y    | x    | 
|  7 | x    | y    | y    | 
|  8 | x    | y    | z    | 
|  9 | y    | x    | x    | 
| 10 | z    | x    | x    | 
| 11 | y    | y    | x    | 
| 12 | y    | z    | x    | 
| 13 | y    | x    | y    | 
| 14 | y    | x    | z    | 
| 15 | z    | x    | x    | 
| 16 | z    | y    | x    | 
| 17 | z    | z    | x    | 
| 18 | z    | x    | y    | 
| 19 | z    | x    | z    | 
+----+------+------+------+
19 rows in set (0.00 sec) 
```

我的查询是：

```
mysql> select * from ps where b = 'x' order by c;
+----+------+------+------+
| id | a    | b    | c    |
+----+------+------+------+
|  1 | x    | x    | x    | 
|  9 | y    | x    | x    | 
| 10 | z    | x    | x    | 
| 15 | z    | x    | x    | 
|  4 | x    | x    | y    | 
| 13 | y    | x    | y    | 
| 18 | z    | x    | y    | 
|  5 | x    | x    | z    | 
| 14 | y    | x    | z    | 
| 19 | z    | x    | z    | 
+----+------+------+------+
10 rows in set (0.00 sec) 
```

假设我有 id 4 的行。所以，我知道我在 id 4 并且条件是 b = 'x' 并且顺序是 c。我想获得下一行（即 id 13）和前一行（即 id 15）。我可以通过 SQL 查询从数据库中找到这些，还是必须检索所有内容并在我的代码中循环遍历它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-09T16:26:06.163

您可以使用limit 子句来执行此操作。

但是当数据已经在 PHP 中时，在 sql 中执行此操作似乎没有任何意义。为什么不将行放入每行一个元素的数组中，并使用数组的指针来实现这一点？

prev()、current() 和 next() 函数应该是你所需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-09T16:45:33.510

```
select * from ps where b = 'x' order by c limit 4, 1; 
```

将为您提供第 5 (4 + 1) 个元素，即 id 为 4 的元素。

下一个同样可以通过以下方式获取：

```
select * from ps where b = 'x' order by c limit 5, 1; 
```

当然，如果您真的想从数据库中一次读取一个条目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-09T17:24:24.633

我过去曾使用以下查询（以使用您的示例）来完成此操作，例如：

```
SELECT id FROM ps WHERE id>'4' ORDER BY c LIMIT 1 
```

对于下一个 id 和前一个 id：

```
SELECT id FROM ps WHERE id < '4' ORDER BY c LIMIT 1 
```

这种方法显然需要额外的查询，但我真的从来没有找到一个好的方法来做到这一点。

# javascript - 正则表达式匹配 2-10，但不匹配 99

> ID：528807
> 
> 赞同：7
> 
> 时间：2009-02-09T16:19:09.190
> 
> 标签：javascript, regex, numeric-ranges

我在表单上有一个字段，它采用以下值：-1、2-10、99

我有一个与答案 2-10 相关的业务规则。

我正在尝试编写一个匹配 2-10 但*不*匹配99 的正则表达式，但我遇到了麻烦。

原来的表达：

```
^2|3|4|5|6|7|8|9|10$ 
```

失败，因为 99 匹配（技术上，两次）。此外，Line 边界是我从未感到舒服的东西。我在 expresso 中观察到的行为与在其他地方（例如 .net）不同。在这个特定的例子中，正则表达式在**javascript**中运行。无论如何，expresso 似乎忽略了它们（如果我将值放在括号中：

```
^[2|3|4|5|6|7|8|9|10]$

^[2-9]$ 
```

无论是“全部拼写”还是一个范围，如果我指定开始行/字符串结束行/字符串字符（是的，我试图在第二种情况下单独匹配 10 个），expresso 永远不会返回任何匹配项。

我知道我知道。如果您使用正则表达式来解决问题，那么您将遇到两个问题（并且大概他们会开始邀请朋友过来，事物 1 和事物 2 风格）。我不必**在**这里使用一个；我可能会切换到案例陈述。但似乎我应该可以在这里使用正则表达式，这似乎是一件合理的事情。当谈到正则表达式时，我仍然很年轻；

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2009-02-09T16:28:49.510

这显然是您不应该使用 RegExp 而使用数值评估的情况：

```
var num = parseInt(aNumber, 10);
if (num >= 2 && num <= 10) {
    alert("Match found!");
} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2009-02-09T16:33:39.810

你需要花括号。我会进一步使用范围来保持可读性：

```
^([2-9]|10)$ 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-02-09T16:21:11.697

在交替周围使用括号，因为连接的优先级高于交替：

```
^(2|3|4|5|6|7|8|9|10)$ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-09T17:07:21.900

一个完整的 javascript 函数来匹配 2 到 9 或 10

```
<script type="text/javascript">
    function validateValue( theValue )
    {
        if( theValue.match( /^([2-9]{1}|10)$/ ) )
        {
            window.alert( 'Valid' );
        }
        else
        {
            window.alert( 'invalid' );
        }
        return false;
    }
</script> 
```

正则表达式很容易扩展以包含您的所有规则：

```
/^(-1|[2-9]|10|99)$/ // will match -1, 2-10, 99 
```

编辑：我忘了提到你必须替换你自己的真/假情境逻辑。edit2：在第二个正则表达式中添加了缺少的括号。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-09T16:21:50.713

您的原始表达式失败的原因是因为您正在匹配 ^2、3、4、5、6、7、8、9、10$。

试试这个正则表达式：^(2|3|4|5|6|7|8|9|10)$

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-08-30T14:52:53.877

这个在线实用程序非常擅长为数字范围生成 re：http: [//utilitymill.com/utility/Regex_For_Range](http://utilitymill.com/utility/Regex_For_Range)。对于 2-10（含）范围，它给出以下表达式：`\b0*([2-9]|10)\b`. 如果要省略前导 0，请取出“0*”部分。

# visual-studio - 一旦调试开始，Visual Studio 就会从应用程序中分离出来

> ID：528810
> 
> 赞同：5
> 
> 时间：2009-02-09T16:20:18.190
> 
> 标签：visual-studio, debugging, windows-8.1, windows-vista, uac

我有一个 Web 应用程序，我一直能够在 Visual Studio 中运行，它调试得很好（断点工作，我可以暂停执行等）。最近，行为突然发生了变化，发生了一些事情：

*   我开始调试，它启动 IE 并加载应用程序，但几秒钟后（有时页面甚至还没有显示），Visual Studio 就像调试已经停止一样——我可以再次在 VS 中编辑代码，并且工具栏上的“播放”按钮已启用。应用程序继续在刚刚生成的 IE 窗口中运行，但我没有附加到它
*   在这几秒钟内 VS 正在“调试”，因为它分离，我的断点显示为空心 - 好像我设置为“释放”模式并且它们不会被击中。事实上，我在 Page_Load 中设置了一个断点，它会直接跳过。我已经检查过了，我设置为调试模式，尽管我的工具栏中缺少编译模式下拉菜单（我检查了构建属性以确保我处于调试模式）。

有人可以在这里阐明一下吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-02-10T15:41:56.893

事实证明，这实际上是升级到 Windows Vista 的结果。VS 没有“以管理员身份运行”，这导致它缺乏附加到其他进程进行调试的权限。结果，调试将在开始后立即停止。将 VS 快捷方式更改为以管理员身份运行可解决此问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-11-13T16:49:23.297

我经历过同样的行为。原因是存在几个 `<system.web>`部分（`web.config`模式允许）。Visual Studio 调试器（版本 2008 和 2010 已测试）仅查看第一个遇到的部分。因此，如果您的`<compilation debug="true">`标签不在第一个标签中，它会认为没有 compilation.debug 设置存在，并且通常会尝试添加`<compilation debug="true">`到第一个`<system.web>`. 在某些情况下，VS2008 只是在这种情况下静默处理。例如看这里：[https](https://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=510354#details) ://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=510354#details “

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-09T16:22:22.723

您最近是否在服务器/工作站上安装了其他任何东西？

我们有一个不允许我们调试的第三方应用程序，w3wp.exe 在尝试调试时立即崩溃。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-09T19:05:50.193

当我将一些代码放在崩溃的构造函数中时，我遇到了类似的情况。在应用程序启动后调试将断开连接的完全相同的问题。

简短的如果它，请检查您是否没有将类构造函数配置为在崩溃的 Web 启动期间运行...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-05-24T11:16:32.473

快速 Windows 7 更新：我必须将“本地主机”添加到我的受信任站点列表中以更正此问题……看图。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-06-08T12:20:00.757

对于那些（如我）上述解决方案不起作用的人来说，这只是一个解决方法：启动您要调试的应用程序后，转到 Debug -> Attach to Process，并将其附加到您要调试的进程。在*我的*机器上工作。

# python - 有没有更好的方法（除了COM）来远程控制Excel？

> ID：528817
> 
> 赞同：1
> 
> 时间：2009-02-09T16:21:49.887
> 
> 标签：python, .net, excel, com

我正在开发一个回归测试工具，它将验证大量的 Excel 电子表格。目前，我使用最新版本的 pywin32 产品通过 Python 脚本通过 COM 控制它们。不幸的是，COM 似乎有许多恼人的缺点：

例如，最轻微的干扰似乎能够断开与 COM 服务器的连接，一旦断开，似乎就没有安全的方法可以重新连接到 Excel 应用程序。COM 应用程序对象中绝对没有内置安全性。

Excel COM 接口不允许我安全地远程控制在同一个工作簿文件上运行的 Excel 应用程序的两个单独实例，即使它们是只读的。

此外，当确实出现问题时，我很少收到任何有用的错误消息……最多只能是数字错误代码或几乎没有用的消息，例如“发生异常”。几乎不可能知道为什么会出错。

最后，COM 缺乏控制 Excel 一些最基本方面的能力？例如，没有办法保证只关闭 COM 客户端所连接的 Excel 进程。你甚至不能使用 COM 来查找 Excel 的 PID。

**那么如果我完全放弃 COM 怎么办？**是否有其他方法来控制 Excel？

我想要做的就是运行宏、打开和关闭工作簿以及读写单元格范围？也许一些 .NET 专家知道一两个还没有进入 Python 社区的技巧？你们办公室的黑客呢？有没有比 COM 更好的方法来了解 Excel 的内部结构？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-02-09T16:25:35.057

没有办法完全绕过 COM。您可以使用 VSTO（Visual Studio Tools for Office），它在 COM 对象上有很好的 .NET 包装器，但它在下面仍然是 COM。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-13T15:57:15.720

> Excel COM 接口不允许我安全地远程控制在同一个工作簿文件上运行的 Excel 应用程序的两个单独实例，即使它们是只读的。

这不是 COM 的限制，这是[Excel 的限制](http://blogs.msdn.com/excel/archive/2009/01/07/why-can-t-i-open-two-files-with-the-same-name.aspx)。如果它们存在于不同的目录中，Excel 甚至不允许您同时打开两个具有相同名称的文件。这是 Excel 程序的一个基本限制。

回答您的其他问题

如果您检查您的 python 文档，如果连接丢失，应该有一种方法可以连接到现有服务器。

再次缺少有用的错误消息可能与 Python 有关。

> 你甚至不能使用 COM 来查找 Excel 的 PID。

COM 是一个内部对象模型，它公开了它想要的东西。PID 可用于外部进程和内部进程一样，没有真正的理由公开为 COM 接口。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-09T16:54:49.073

也可以将 Excel 作为服务器应用程序运行并将其用作计算引擎。这允许非 IT 用户在 Excel 中指定业务规则并通过 Web 服务调用它们。我自己没有使用过这个，但我知道我的一个同事曾经使用过这个。[演练：使用 Excel Web Services 开发自定义应用程序](http://msdn.microsoft.com/en-us/library/ms519100.aspx)可能是一个很好的起点。乍一看该页面似乎需要 Sharepoint。这可能不适用于所有环境。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-09T17:16:39.083

你看过[xlrd](http://pypi.python.org/pypi/xlrd)和[xlwt](http://pypi.python.org/pypi/xlwt)包吗？我不再需要它们了，但是我在上一个项目中使用 xlrd 取得了很好的成功。最后我知道，他们不能处理宏，但可以对电子表格进行基本的读写。此外，它们是独立于平台的（我编写的程序是针对在 Linux 上运行的）！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-09T17:34:57.917

您可以将 Jython 与 JExcelApi ( [http://jexcelapi.sourceforge.net/](http://jexcelapi.sourceforge.net/) ) 一起使用来控制您的 Excel 应用程序。我一直在考虑用我的一个 PyQt 项目来实现这个解决方案，但还没有开始尝试它。我以前在 Java 应用程序中有效地使用过 JExcelApi，但没有使用过 Jython（尽管我知道您可以导入 Java 类）。

注意：JExcelApi 可能是引擎盖下的 COM（我不确定）。

# html - 哪些 CSS 属性可以应用于哪些 HTML 元素

> ID：528820
> 
> 赞同：5
> 
> 时间：2009-02-09T16:22:07.453
> 
> 标签：html, css, specifications

我正在寻找可以告诉我哪些 CSS 属性可以应用于哪些 HTML 元素的源/规范。例如，css 属性；“溢出”。我知道我可以将其应用于 div、p、textarea，但我也可以将其应用于哪些其他元素？有没有我可以参考的规范？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-09T16:24:04.653

请参阅[http://www.w3.org/TR/CSS2/](http://www.w3.org/TR/CSS2/)和[http://www.w3.org/TR/CSS/](http://www.w3.org/TR/CSS/)。

例如，关于您关于`overflow`房产的问题，请参阅：

[http://www.w3.org/TR/CSS2/visufx.html#overflow-clipping](http://www.w3.org/TR/CSS2/visufx.html#overflow-clipping)，说明：

```
'overflow'
    Value:          visible | hidden | scroll | auto | inherit
    Initial:        visible
    Applies to:     block-level and replaced elements
    Inherited:      no
    Percentages:    N/A
    Media:          visual 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-20T19:32:43.587

在[CSS 处理模型](http://www.w3.org/TR/CSS21/intro.html#processing-model)中，每个元素都有适用于目标媒体类型的每个属性。例如，即使是空`<br>`元素也有`color`属性。但是属性是否对元素本身的渲染有影响取决于特定的属性和上下文，其方式在适用的 CSS 规范和草案中有所描述。它通常在“适用于”标题下进行描述。没有对此进行组合编译，并且浏览器识别的属性集差异很大。

即使按照规范，属性“适用于”元素，它也不一定具有实际效果。例如，`border-color`如果其`border-style`is`none`或 its `border-width`is ，则与渲染元素无关`0`。（如果它被子元素继承，该值可能仍然很重要。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-09T18:51:35.113

任何 CSS 属性都可以应用于任何 HTML 元素；他们不互相限制。

但是，正如 Aron Rotteveel 所提到的，该元素必须是替换元素（如`img`），或者*指定*为块级元素。这意味着以下是完美的 CSS：

```
strong { display: block; height: 5em; width: 5em; overflow: scroll; } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-09T16:26:06.647

您始终可以使用[官方规范](http://www.w3.org/TR/CSS21/)。您的特定问题的答案在[这里](http://www.w3.org/TR/CSS21/visufx.html#overflow)。

# javascript - 如何使用 jQuery 拦截 F5 按钮单击事件？

> ID：528825
> 
> 赞同：1
> 
> 时间：2009-02-09T16:23:38.837
> 
> 标签：javascript, jquery

我想使用 jQuery 实现键盘快捷键。

具体来说，我想在单击 F5 时触发一个事件。

您在使用键盘快捷键时遇到了哪些问题？

**此外，任何具有所有键盘映射到数字的在线图表？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-09T16:29:53.923

您不能也不应该使用`F5`密钥 - 大多数浏览器都将其保留为刷新，甚至您也不应该通过打破 UI 约定来混淆用户

[您可以使用这个小应用程序找出关键代码](http://www.asquare.net/javascript/tests/KeyCode.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-09T22:52:47.450

这个小的 JS 库可以让你做到这一点：

[http://www.openjs.com/scripts/events/keyboard_shortcuts/](http://www.openjs.com/scripts/events/keyboard_shortcuts/)

但是有一些事情需要注意。

1.) 在 IE 中，你不能 AFAIK 停止事件，你只是在它刷新之前挂上

2.) 在 IE 中，您根本无法拦截某些键盘事件...例如 CTRL+S 将始终显示保存对话框，无论您喜欢与否。

# java - JFreeChart XY 图上的图标

> ID：528827
> 
> 赞同：4
> 
> 时间：2009-02-09T16:24:04.670
> 
> 标签：java, jfreechart

我有一个 XY 位置图，并希望最新的点成为一个图标。这在 JFreeChart 中可行吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-09T16:47:25.283

在 xy 图上，您需要跟踪添加的最后一个 xy 点，然后使用以下内容添加它：

```
double x = 150;
double y = 300;
XYPlot plot = chart.getXYPlot();
ImageIcon imageIcon = new ImageIcon("/path/to/your/icon.png");
XYAnnotation xyannotation = new XYImageAnnotation(x, y, imageIcon.getImage());
plot.addAnnotation(xyannotation); 
```

# sql - SQL按版本“编号”排序，长度不等的字符串

> ID：528830
> 
> 赞同：31
> 
> 时间：2009-02-09T16:24:25.323
> 
> 标签：sql

我正在尝试创建一个 SQL 查询，它将按版本号（例如 1.1、4.5.10 等）对结果进行排序

这是我尝试过的：

```
SELECT * FROM Requirements 
    WHERE Requirements.Release NOT LIKE '%Obsolete%' 
    ORDER BY Requirements.ReqNum 
```

现在，ReqNum 字段是一个字符串字段，不幸的是我不能将它更改为浮点数或类似的东西，因为我有像`162.1.11`.

当我得到结果时，我会得到这样的排序：

```
1.1
1.10
1.11
1.3 
```

**如何编写按字典顺序排序的查询？**

... 或者，

**如何正确排序数据？**

感谢您提前输入！

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2015-06-11T06:42:21.837

在 PostgreSQL 中，您可以执行以下操作：

```
SELECT * FROM Requirements
ORDER BY string_to_array(version, '.')::int[]; 
```

这最后`::int[]`使它将字符串值转换为整数，然后进行比较。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2009-02-09T16:26:20.313

为了获得最佳结果，重构版本号存储，以便每个部分都有自己的列：MajorVersion、MinorVersion、Revision、Build。然后排序问题突然变得微不足道。您还可以构建一个计算列，以便轻松检索完整的字符串。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-11-13T07:16:38.443

```
SELECT * FROM Requirements 
WHERE Requirements.Release NOT LIKE '%Obsolete%' 
ORDER BY cast('/' + replace(Requirements.ReqNum , '.', '/') + '/' as hierarchyid); 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2016-07-12T08:36:26.407

@vuttipong-l 答案略有不同（T-SQL）

```
SELECT VersionNumber
FROM (
SELECT '6.1.3' VersionNumber UNION
SELECT '6.11.3' UNION
SELECT '6.2.3' UNION
SELECT '6.1.12' 
) AS q
ORDER BY cast('/' + VersionNumber + '/' as hierarchyid) 
```

从 2008 年开始在 SQL Server 中工作，点在列的字符串表示中是可以的`hierarchyid`，所以我们不需要用斜杠替换它们。来自文档的引用：

> 比较是通过按字典顺序比较由点分隔的整数序列来执行的。

但是有一个警告：版本段不能以零为前缀。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2009-02-10T05:42:51.427

如果您在 SQL Server 领域...

```
DECLARE @string varchar(40)
SET @string = '1.2.3.4'
SELECT PARSENAME(@string, 1), PARSENAME(@string, 2), PARSENAME(@string, 3), PARSENAME(@string, 4) 
```

结果：4、3、2、1

用于解析 IP 地址和其他虚线项目，例如版本号。（您也可以使用 REPLACE() 将项目转换为点符号...例如 1-2-3-4 -> 1.2.3.4）

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-02-09T16:30:08.523

如果您没有按照 Joel Coehoorn 明智的建议重新设计表格，那么您需要将版本号重新格式化为根据需要排序的字符串，例如

*   1.1 -> 0001.0001.0000
*   162.1.11 -> 0162.0001.0011

这可以通过函数来​​完成，或者如果您的 DBMS 有这些，则可以使用计算/虚拟列。然后，您可以在 ORDER BY 子句中使用该函数或列。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-02-09T18:54:34.357

以下函数将采用版本号并将每个级别格式化为 3 位数：

用法：

```
select * from TableX order by dbo.fn_VersionPad(VersionCol1) 
```

功能：

```
CREATE FUNCTION [dbo].[fn_VersionPad]
(
    @version varchar(20)
)
RETURNS varchar(20)
AS
BEGIN
    /*
        Purpose:  Pads multi-level Version Number sections to 3 digits
        Example:  1.2.3.4
        Returns:  001.002.003.004
    */

    declare @verPad varchar(20)
    declare @i int
    declare @digits int

    set @verPad = ''

    set @i = len(@version)
    set @digits = 0

    while @i > 0
    begin
        if (substring(@version, @i, 1) = '.')
        begin
            while (@digits < 3)
            begin
                -- Pad version level to 3 digits
                set @verPad = '0' + @verPad
                set @digits = @digits + 1
            end

            set @digits = -1
        end

        set @verPad = substring(@version, @i, 1) + @verPad

        set @i = @i - 1
        set @digits = @digits + 1
    end

    while (@digits < 3)
    begin
        -- Pad version level to 3 digits
        set @verPad = '0' + @verPad
        set @digits = @digits + 1
    end

    return @verPad
END 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-02-09T16:32:48.347

您可以使用 CHARINDEX / SUBSTR 和 ORDER BY 不同的部分拆分字符串（您已经知道分隔符：“.”）。在函数中执行或部分执行。

它不会很漂亮，也不会很快：因此，如果您需要快速查询，请关注 Tony 或 Joel。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2011-10-28T01:23:02.260

不使用代码

```
Insert into @table
Select 'A1' union all
Select 'A3' union all
Select 'A5' union all
Select 'A15' union all
Select 'A11' union all
Select 'A10' union all
Select 'A2' union all
Select 'B2' union all
Select 'C2' union all
Select 'C22' union all
Select 'C221' union all
Select 'A7' 

Select cod from @table
Order by LEN(cod),cod 
```

结果 ：

```
A1
A2
A3
A5
A7
B2
C2
A10
A11
A15
C22
C221 
```

这很简单：

```
Declare @table table(id_ int identity(1,1), cod varchar(10))

Insert into @table
Select 'A1' union all
Select 'A3' union all
Select 'A5' union all
Select 'A15' union all
Select 'A11' union all
Select 'A10' union all
Select 'A2' union all
Select 'A7' 

Select cod from @table
Order by LEN(cod),cod 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2014-12-06T16:44:19.157

在 PostgreSQL 上，再简单不过了：

`SELECT ver_no FROM version ORDER BY string_to_array(ver_no, '.', '')::int[]`

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-02-09T17:01:09.963

如果您使用的是 Microsoft SQL Server，这将起作用：

```
create function fnGetVersion (@v AS varchar(50)) returns bigint as
begin
declare @n as bigint;
declare @i as int;
select @n = 0;
select @i = charindex('.',@v);
while(@i > 0)
begin
    select @n = @n * 1000;
    select @n = @n + cast(substring(@v,1,@i-1) as bigint); 
    select @v = substring(@v,@i+1,len(@v)-@i);
    select @i = charindex('.',@v);
end
return @n * 1000 + cast(@v as bigint);
end 
```

通过运行以下命令进行测试：

```
select dbo.fnGetVersion('1.2.3.4') 
```

这将返回完全可排序的数字 1002003004。您是否需要 9.0.1 大于 2.1.2.3 那么您需要稍微更改逻辑。在我的示例中，9.0.1 将排在 2.1.2.3 之前。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2012-08-16T06:40:15.990

PostgreSQL 的功能

只需使用

```
select *
  from sample_table
 order by _sort_version(column_version);

CREATE FUNCTION _sort_version (
  p_version text
)
RETURNS text AS
$body$
declare 
  v_tab text[];
begin
  v_tab := string_to_array(p_version, '.');  

  for i in 1 .. array_length(v_tab, 1) loop
    v_tab[i] := lpad(v_tab[i], 4, '0');
  end loop;

  return array_to_string(v_tab, '.');
end;
$body$
LANGUAGE 'plpgsql'
VOLATILE
CALLED ON NULL INPUT
SECURITY DEFINER
COST 1; 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-02-09T16:35:17.187

我遇到了同样的问题，虽然我的公寓号码是 A1、A2、A3、A10、A11 等，但他们想要“正确”排序。如果将版本号拆分为单独的列不起作用，请尝试此 PL/SQL。它接受一个像 A1 或 A10 这样的字符串并将其扩展为 A0000001、A0000010 等，所以它的排序很好。只需在 ORDER BY 子句中调用它，例如

通过 PAD(apt_num) 从公寓订单中选择 apt_num

```
function pad(inString IN VARCHAR2)
   return VARCHAR2

--This function pads the numbers in a alphanumeric string.
--It is particularly useful in sorting, things like "A1, A2, A10"
--which would sort like "A1, A10, A2" in a standard "ORDER BY name" clause
--but by calling "ORDER BY pkg_sort.pad(name)" it will sort as "A1, A2, A10" because this
--function will convert it to "A00000000000000000001, A00000000000000000002, A00000000000000000010" 
--(but since this is in the order by clause, it will
--not be displayed.

--currently, the charTemplate variable pads the number to 20 digits, so anything up to 99999999999999999999 
--will work correctly.
--to increase the size, just change the charTemplate variable.  If the number is larger than 20 digits, it will just
--appear without padding.

   is
      outString VARCHAR2(255);
      numBeginIndex NUMBER;
      numLength NUMBER;
      stringLength NUMBER;
      i NUMBER;
      thisChar VARCHAR2(6);
      charTemplate VARCHAR2(20) := '00000000000000000000';
      charTemplateLength NUMBER := 20;

   BEGIN
      outString := null;
      numBeginIndex := -1;
      numLength := 0;
      stringLength := length(inString);

      --loop through each character, get that character
      FOR i IN 1..(stringLength) LOOP
         thisChar := substr(inString, i, 1);

         --if this character is a number
         IF (FcnIsNumber(thisChar)) THEN

            --if we haven't started a number yet
            IF (numBeginIndex = -1) THEN
               numBeginIndex := i;
               numLength := 1;

            --else if we're in a number, increase the length
            ELSE 
               numLength := numLength + 1;
            END IF;

            --if this is the last character, we have to append the number
            IF (i = stringLength) THEN
               outString:= FcnConcatNumber(inString, outString, numBeginIndex, numLength, charTemplate, charTemplateLength);
            END IF;

         --else this is a character
         ELSE

            --if we were previously in a number, concat that and reset the numBeginIndex
            IF (numBeginIndex != -1) THEN
               outString:= FcnConcatNumber(inString, outString, numBeginIndex, numLength, charTemplate, charTemplateLength);
               numBeginIndex := -1;
               numLength := 0;
            END IF;

            --concat the character
            outString := outString || thisChar;
         END IF;
      END LOOP;

      RETURN outString;

   --any exception, just return the original string
   EXCEPTION WHEN OTHERS THEN
      RETURN inString;

   END; 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-02-09T16:49:35.903

这是一个提取字符串的示例查询。您应该能够在数据库的 UPDATE 重构中使用它，或者简单地在查询中使用它。但是，我不确定它是如何准时的。只是需要注意和测试的东西。

```
SELECT SUBSTRING_INDEX("1.5.32",'.',1) AS MajorVersion,
  SUBSTRING_INDEX(SUBSTRING_INDEX("1.5.32",'.',-2),'.',1) AS MinorVersion,
  SUBSTRING_INDEX("1.5.32",'.',-1) AS Revision; 
```

这将返回：

```
MajorVersion | MinorVersion | Revision
1            | 5            | 32 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-02-09T17:02:14.297

好的，如果高性能是一个问题，那么您唯一的选择是将您的值更改为数字。

但是，如果这是一个使用率较低的查询，那么您可以将您的号码拆分并按这些号码排序。

此查询仅假定主要和次要版本号，并且它们仅包含数字。

```
SELECT
    *
FROM
    Requirements
WHERE
    Requirements.Release NOT LIKE '%Obsolete%'
ORDER BY
    CONVERT(int, RIGHT(REPLICATE('0', 10) + LEFT(Requirements.ReqNum, CHARINDEX('.', Requirements.ReqNum)-1), 10)),
    CONVERT(int, SUBSTRING(Requirements.ReqNum, CHARINDEX('.', Requirements.ReqNum )+1, LEN(Requirements.ReqNum) - CHARINDEX('.', Requirements.ReqNum ))) 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2009-02-09T23:19:16.450

对于多合一查询纯粹主义者，假设 Oracle，一些 instr/substr/decode/to_number voodoo 可以解决它：

```
SELECT *
FROM Requirements
WHERE Release NOT LIKE '%Obsolete%'
ORDER BY
    to_number(
      substr( reqnum, 1, instr( reqnum, '.' ) - 1 )
    )
  , to_number(
      substr( 
          reqnum
        , instr( reqnum, '.' ) + 1 -- start: after first occurance
        , decode( 
              instr( reqnum, '.', 1, 2 )
            , 0, length( reqnum )
            , instr( reqnum, '.', 1, 2 ) - 1 
          ) -- second occurance (or end)
          - instr( reqnum, '.', 1, 1) -- length: second occurance (or end) less first
      )
    )
  , to_number(
      decode( 
          instr( reqnum, '.', 1, 2 )
        , 0, null
        , substr( 
              reqnum
            , instr( reqnum, '.', 1, 2 ) + 1 -- start: after second occurance
            , decode( 
                  instr( reqnum, '.', 1, 3 )
                , 0, length( reqnum )
                , instr( reqnum, '.', 1, 3 ) - 1 
              ) -- third occurance (or end)
              - instr( reqnum, '.', 1, 2) -- length: third occurance (or end) less second
          ) 
      )
    )
  , to_number(
      decode( 
          instr( reqnum, '.', 1, 3 )
        , 0, null
        , substr( 
              reqnum
            , instr( reqnum, '.', 1, 3 ) + 1 -- start: after second occurance
            , decode( 
                  instr( reqnum, '.', 1, 4 )
                , 0, length( reqnum )
                , instr( reqnum, '.', 1, 4 ) - 1 
              ) -- fourth occurance (or end)
              - instr( reqnum, '.', 1, 3) -- length: fourth occurance (or end) less third
          ) 
      )
    )
; 
```

我怀疑有很多警告，包括：

*   假设存在次要版本（第二个）
*   限于问题评论中指定的四个版本

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2013-08-02T11:50:23.397

以这种方式固定。

```
<pre>
00000001    1
00000001.00000001   1.1
00000001.00000001.00000001  1.1.1
00000001.00000002   1.2
00000001.00000009   1.9
00000001.00000010   1.10
00000001.00000011   1.11
00000001.00000012   1.12
00000002    2
00000002.00000001   2.1
00000002.00000001.00000001  2.1.1
00000002.00000002   2.2
00000002.00000009   2.9
00000002.00000010   2.10
00000002.00000011   2.11
00000002.00000012   2.12

select * from (select '000000001' as tCode,'1' as Code union
select '000000001.000000001' as tCode,'1.1'as Code union
select '000000001.000000001.000000001' as tCode,'1.1.1'as Code union
select '000000001.000000002' as tCode,'1.2'  union
select '000000001.000000010' as tCode,'1.10'as Code union
select '000000001.000000011' as tCode,'1.11'as Code union
select '000000001.000000012' as tCode,'1.12'as Code union
select '000000001.000000009' as tCode,'1.9' as Code
union
select '00000002' as tCode,'2'as Code union
select '00000002.00000001' as tCode,'2.1'as Code union
select '00000002.00000001.00000001' as tCode,'2.1.1'as Code union
select '00000002.00000002' as tCode,'2.2'as Code union
select '00000002.00000010' as tCode,'2.10'as Code union
select '00000002.00000011' as tCode,'2.11'as Code union
select '00000002.00000012' as tCode,'2.12'as Code union
select '00000002.00000009' as tCode,'2.9'as Code ) as t
order by t.tCode

</pre>

<pre>

public static string GenerateToCodeOrder(this string code)
    {
        var splits = code.Split('.');
        var codes = new List<string>();
        foreach (var str in splits)
        {
            var newStr = "";
            var zeroLength = 10 - str.Length;
            for (int i = 1; i < zeroLength; i++)
            {
                newStr += "0";
            }
            newStr += str;
            codes.Add(newStr);
        }
        return string.Join(".", codes);
    }

</pre> 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2014-11-04T13:21:07.353

这是 PostgreSQL 的比较函数，它将比较任意字符串，以便对数字序列进行数字比较。换句话说，“ABC123”>“ABC2”，但“AB123”<“ABC2”。它返回 -1、0 或 +1，因为此类比较函数通常会这样做。

```
CREATE FUNCTION vercmp(a text, b text) RETURNS integer AS $$
DECLARE
   ar text[];
   br text[];
   n integer := 1;
BEGIN
   SELECT array_agg(y) INTO ar FROM (SELECT array_to_string(regexp_matches(a, E'\\d+|\\D+|^$', 'g'),'') y) x;
   SELECT array_agg(y) INTO br FROM (SELECT array_to_string(regexp_matches(b, E'\\d+|\\D+|^$', 'g'),'') y) x;
   WHILE n <= array_length(ar, 1) AND n <= array_length(br, 1) LOOP
      IF ar[n] ~ E'^\\d+$' AND br[n] ~ E'^\\d+$' THEN
         IF ar[n]::integer < br[n]::integer THEN
            RETURN -1;
         ELSIF ar[n]::integer > br[n]::integer THEN
            RETURN 1;
         END IF;
      ELSE
         IF ar[n] < br[n] THEN
            RETURN -1;
         ELSIF ar[n] > br[n] THEN
            RETURN 1;
         END IF;
      END IF;
      n := n + 1;
   END LOOP;

   IF n > array_length(ar, 1) AND n > array_length(br, 1) THEN
      RETURN 0;
   ELSIF n > array_length(ar, 1) THEN
      RETURN 1;
   ELSE
      RETURN -1;
   END IF;
END;
$$ IMMUTABLE LANGUAGE plpgsql; 
```

然后，您可以创建一个运算符类，以便可以通过使用比较函数来完成排序`ORDER BY field USING <#`：

```
CREATE OR REPLACE FUNCTION vernum_lt(a text, b text) RETURNS boolean AS $$
BEGIN
   RETURN vercmp(a, b) < 0;
END;
$$ IMMUTABLE LANGUAGE plpgsql;

CREATE OR REPLACE FUNCTION vernum_lte(a text, b text) RETURNS boolean AS $$
BEGIN
   RETURN vercmp(a, b) <= 0;
END;
$$ IMMUTABLE LANGUAGE plpgsql;

CREATE OR REPLACE FUNCTION vernum_eq(a text, b text) RETURNS boolean AS $$
BEGIN
   RETURN vercmp(a, b) = 0;
END;
$$ IMMUTABLE LANGUAGE plpgsql;

CREATE OR REPLACE FUNCTION vernum_gt(a text, b text) RETURNS boolean AS $$
BEGIN
   RETURN vercmp(a, b) > 0;
END;
$$ IMMUTABLE LANGUAGE plpgsql;

CREATE OR REPLACE FUNCTION vernum_gte(a text, b text) RETURNS boolean AS $$
BEGIN
   RETURN vercmp(a, b) >= 0;
END;
$$ IMMUTABLE LANGUAGE plpgsql;

CREATE OPERATOR <# ( PROCEDURE = vernum_lt, LEFTARG = text, RIGHTARG = text);
CREATE OPERATOR ># ( PROCEDURE = vernum_gt, LEFTARG = text, RIGHTARG = text);
CREATE OPERATOR =# ( PROCEDURE = vernum_lte, LEFTARG = text, RIGHTARG = text);
CREATE OPERATOR <=# ( PROCEDURE = vernum_lte, LEFTARG = text, RIGHTARG = text);
CREATE OPERATOR >=# ( PROCEDURE = vernum_gte, LEFTARG = text, RIGHTARG = text);

CREATE OPERATOR CLASS vernum_ops FOR TYPE varchar USING btree AS
  OPERATOR 1 <# (text, text),
  OPERATOR 2 <=# (text, text),
  OPERATOR 3 =#(text, text),
  OPERATOR 4 >=# (text, text),
  OPERATOR 5 ># (text, text),
  FUNCTION 1 vercmp(text, text)
; 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2018-08-08T20:19:20.913

在 M$ SQL 中，我遇到了 hierachyid 的一些数据问题......

```
select Convert(hierarchyid, '/' + '8.3.0000.1088' + '/') 
```

为了解决这个问题，我使用了 pasename（依赖于 '.' 作为分隔符）......

```
Order by
convert(int, reverse (Parsename( reverse(tblSoftware.softwareVersion) , 1))),
convert(int, reverse (Parsename( reverse(tblSoftware.softwareVersion) , 2))),
convert(int, reverse (Parsename( reverse(tblSoftware.softwareVersion) , 3))),
convert(int, reverse (Parsename( reverse(tblSoftware.softwareVersion) , 4))),
convert(int, reverse (Parsename( reverse(tblSoftware.softwareVersion) , 5))) 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2020-01-20T07:18:15.227

如果版本的列类型是 varchar，则排序按预期完成。这是因为 varchar 没有用空格填充。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2020-07-03T17:45:24.540

这是您可以在 中使用的 ORACLE 表达式`ORDER BY`：

```
select listagg(substr('0000000000' || column_value,-9), '.') within group(order by rownum) from xmltable(replace(version, '.',',')) 
```

假设您的版本列只有点作为分隔符（任意数量的级别）。（如果没有，由您决定替换为 eg `translate(version, '.-', ',,')`）

* * *

## 回答 #22

> 赞同：-3
> 
> 时间：2009-02-09T16:32:00.300

我会按照 Joel Coehoorn 所说的去做。然后重新排列您的数据结构，您不必手动进行。您可以编写一个简单的脚本来处理所有 600 条记录。

* * *

## 回答 #23

> 赞同：-5
> 
> 时间：2013-12-10T17:22:23.843

只需删除点（内联，用空字符串替换）将结果转换为`int`结果`order by`。效果很好：

```
a.Version = 1.4.18.14

select...
Order by cast( replace (a.Version,'.','') as int) 
```

# delphi - 检查班级名称

> ID：528832
> 
> 赞同：4
> 
> 时间：2009-02-09T16:25:12.203
> 
> 标签：delphi, class

我不知道 OWNER 对象类名称。所以我必须像这样检查我的代码中的任何地方：

```
if TObject(OWNER) is TFirstClass then begin
  TFirstClass(OWNER).FirstFunction;
  TFirstClass(OWNER).SecondFunction;
  ...
end else
if TObject(OWNER) is TSecondClass then begin
  TSecondClass(OWNER).FirstFunction;
  TSecondClass(OWNER).SecondFunction;
  ...
end; 
```

有没有更好的办法？因为如果代码的许多地方出现条件，我必须这样做。TFirstClass 和 TSecondClass （我必须运行）的所有功能都是相同的。

注意：我使用 Delphi 5。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-02-09T16:51:33.730

如果您无法访问 TFirstClass 和 TSecondClass，但仍想简化代码，这里有一个方法：

创建一个适配器基类：

```
type
  TMyAdapter = class(TObject)
  public
    procedure FirstMethod; virtual; abstract;
    procedure SecondMethod; virtual; abstract;
  end; 
```

然后创建后代类 TFirstClassAdapter 和 TSecondClassAdapter 并分别给它们每个对 TFirstClass 或 TSecondClass 实例的私有引用。添加一个设置此引用的构造函数。覆盖适配器类的方法，以便它们调用适配的类。

```
type
  TFirstClassAdapter = class(TMyAdapter)
  private
    fObject: TFirstClass;
  public
    constructor Create(AAdaptedObject: TFirstClass);

    procedure FirstMethod; override;
    procedure SecondMethod; override;
  end;

constructor TFirstClassAdapter.Create(AAdaptedObject: TFirstClass);
begin
  inherited Create;
  fObject := AAdaptedObject;
end;

procedure TFirstClassAdapter.FirstMethod;
begin
  fObject.FirstMethod;
end;

procedure TFirstClassAdapter.SecondMethod;
begin
  fObject.SecondMethod;
end; 
```

其他班级也一样。现在您只需要决定是否创建一次适配器并传递它，或者是否创建一个在任何需要它的地方调用的函数，这将为您的具体类提供一个适配器。

如果您使用接口实现适配器，那么您甚至不需要自己管理适配器的生命周期。

这样您就可以拥有 Ulrich 在[他的回答](https://stackoverflow.com/questions/528832/delphi-check-class-name/528852#528852)中给出的多态行为，但无需更改 TFirstClass 和 TSecondClass。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-02-09T16:29:24.690

从声明虚方法 FirstFunction 和 SecondFunction 的公共基类派生 TFirstClass 和 TSecondClass。

乌力。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-02-10T09:17:31.457

起初，请原谅我的英语不好。
如果您不能在响应之前执行 2（适配器并从基类派生），则可以使用 RTTI 通过其名称访问过程。

该程序必须在已发布的部分中声明。

如果你有这样的声明：

```
 TFirstClass = class(TObject)
  published
    procedure FirstFunction;
    procedure SecondFunction;
  end;
  TSecondClass = class(TObject)
  published
    procedure FirstFunction;
    procedure SecondFunction;
  end 
```

如果您有名称，则可以执行以下操作来执行方法：

```
 // Acceso a la rutina; TObject is a Base class for 
  // TFirstClass and TSecondClass
  Routine.Data := Pointer(obj as TObject);
  // Devuelve la dirección de un método published; Method for it's name
  Routine.Code := (obj as TObject).MethodAddress('SecondFunction');
  // Not find
  if (Routine.Code = nil) then Exit;
  // execute
  TExecuteMethod(Routine); 
```

你可以在这里看到类似的代码：
* [Tip4](http://neftali.clubdelphi.com/tips/tip4.html) * [Tip7](http://neftali.clubdelphi.com/tips/tip7.html)

问候。

# java - DFC 读取文件

> ID：528834
> 
> 赞同：1
> 
> 时间：2009-02-09T16:25:35.807
> 
> 标签：java, documentum

我正在使用 DFC 访问 documentum。我正在尝试读取文件。我有 r_object_id，现在我希望返回与此相关的文档。我将如何在java中做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-09T18:22:20.643

假设您还具有至少对文件具有读取权限的有效会话：

```
String docId= getDocId();
IDfSysObject doc = (IDfSysObject)session.getObject(new DfId(docId));
ByteArrayInputStream stream = doc.getContent(); 
```

有关如何处理返回的信息，请参阅[此处的返回类型的 javadocs。](http://java.sun.com/j2se/1.4.2/docs/api/java/io/ByteArrayInputStream.html)此外，我注意到您一直在问很多 Documentum Foundation Classes 问题。根据您使用的 DFC 版本，您可以在[powerlink](http://powerlink.emc.com)或[subscribenet](https://emc.subscribenet.com/)上在线找到 javadocs，并且可能会回答您自己的许多问题。

# java - 生成 JUnit 测试用例

> ID：528846
> 
> 赞同：2
> 
> 时间：2009-02-09T16:28:24.223
> 
> 标签：java, junit

我们的应用程序依赖于另一个系统提供的大量资源。

为了确保这些资源的存在，我们目前有一个 JUnit 测试用例（可能更像是一个集成测试），它将所有资源的列表作为文本文件，获取每个资源并跟踪成功/失败。

这是一个运行时间很长的测试用例，它不是很“工具友好”。我们真正想要的是每个资源一个测试方法。

我知道这不是 JUnit 的本意。但是有没有办法即时生成这些测试方法？

也许比编写 perl 脚本来生成数百种方法更“优雅”？

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-09T16:53:41.650

您可能想查看参数化测试。这在 JUnit 4 中更容易实现，但可以在 JUnit 3 中完成。代码见这个问题：[JUnit test with dynamic number of tests](https://stackoverflow.com/questions/358802/junit-test-with-dynamic-number-of-tests)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-10-30T00:26:39.617

这个： http: [//github.com/adewale/cq-challenge-markup/blob/b99c098f0b31307c92bd09cb6a324ef2e0753a0b/code/acceptance-tests/AcceptanceTest.java](http://github.com/adewale/cq-challenge-markup/blob/b99c098f0b31307c92bd09cb6a324ef2e0753a0b/code/acceptance-tests/AcceptanceTest.java)是一个使用JUnit4 @Parameterized注解为每个资源动态生成一个测试的类的例子

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-09T16:50:14.450

您可能想查看[TestSuite 类](http://junit.org/junit/javadoc/4.5/junit/framework/TestSuite.html)，并创建自己的实例（而不是让其中一个 junit 运行者只在某个目录中运行所有测试）和/或对其进行子类化 - TestSuite 具有以编程方式添加测试的方法它，然后您可以运行套件中的所有测试。

# c++ - 使用 C++ 提升正则表达式

> ID：528854
> 
> 赞同：1
> 
> 时间：2009-02-09T16:29:59.180
> 
> 标签：c++, regex, boost

尽管我广泛使用了 ublas，但我不是 boost 方面的专家。最近，我的主管让我为 gcc 平台构建 boost regex。我的问题是：

为什么我不能像 ublas 一样使用正则表达式？

请给出详细答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-09T17:00:33.133

我假设“不能按原样使用正则表达式”是指“不必单独构建它”。

简短的回答：uBLAS 是“仅标题”（[http://www.boost.org/doc/libs?view=filtered_header-only](http://www.boost.org/doc/libs?view=filtered_header-only)），而 Regex 不是。

“仅标头”库的实现完全驻留在标头 (.hpp) 文件中。要使用它，只需#include 这些标题。

“non-header-only”（“普通”？）库具有声明库接口的标头，但实现是在 .cpp 文件中，这些文件是单独构建的，然后链接到最终的可执行文件中。在 Boost 中，.cpp 文件通常位于 boost/libs/<library-name>/src 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-05T08:57:46.737

我用正则表达做了一些事情。因为我不太了解它，所以我不得不找到一些关于它的东西（网上冲浪和阅读几本书）。

不仅 boost 库而且标准库都包含正则表达式。

如果您介意使用标准库，我想推荐几本书（Stanley B. Lippman、Josée Lajoie 和 Barbara E. Moo 的 C++ Primer 第五版）。您可以在标准库中找到正则表达式并熟悉它。

# asp.net - Visual Studio 中的 App_Data 文件夹是做什么用的？

> ID：528858
> 
> 赞同：163
> 
> 时间：2009-02-09T16:30:28.930
> 
> 标签：asp.net, .net, visual-studio, security, app-data

在 Visual Studio 中创建新的 ASP.NET 应用程序时，会自动创建几个文件和文件夹。其中一个文件夹称为`App_Data`.

此外，当通过选择菜单选项发布网站时，可以`Build->Publish`使用复选框`Include files from the App_Data folder`。

假设无法通过网络访问此文件及其子文件夹中的文件，我是否正确？例如，将我只打算由应用程序代码使用的文件夹资源放入该文件夹是否安全？

`App_Data`文件夹的真正用途是什么？

**编辑：**

谢谢你的所有答案。从到目前为止收到的答案中，我主要对提到的两点感兴趣：

1.  [App_Data 本质上是基于文件的数据存储的存储点](https://stackoverflow.com/questions/528858/what-is-the-appdata-folder-used-for-in-visual-studio/528876#528876)
2.  [它不应该被网络查看，并且是网络应用程序存储和读取数据的地方](https://stackoverflow.com/questions/528858/what-is-the-appdata-folder-used-for-in-visual-studio/528872#528872)

有人可以指定如何确保“网络不可见”吗？我可以在执行标准部署时依赖这个事实，还是我还需要检查服务器上的一些 IIS 设置。

在我有一组我希望只能从应用程序访问的 pdf 文件的情况下。App_Data 文件夹是否适合使用，或者我应该创建一个单独的文件夹并手动设置 IIS 以确保 Web 无法访问它？

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2009-02-09T16:34:12.900

App_Data 本质上是基于文件的数据存储的存储点（例如，与 SQL 服务器数据库存储相对）。例如，一些简单的站点将其用于存储为 XML 的内容，通常在 DB 托管费用昂贵的情况下。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2013-02-05T22:36:32.040

在 IIS 中，突出显示机器，双击“请求过滤”，打开“隐藏段”选项卡。“App_Data”在此处列为受限文件夹。是的，我知道这个线程真的很旧，但这仍然适用。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2009-02-09T16:33:15.943

App_data 的预期用途是存储应用程序数据以供 Web 进程访问。它不应该被网络查看，并且是网络应用程序存储和读取数据的地方。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2009-02-09T16:32:44.227

它是放置嵌入式数据库的地方，例如 Sql Server Express、Access 或 SQLite。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2009-02-09T16:46:46.457

App_Data 文件夹是一个文件夹，您的 asp.net 工作进程也具有文件系统权限，但不通过 Web 服务器发布。

例如，我们使用它来更新*联系我们*表单的本地 CSV。如果首选电子邮件方法失败或需要对数据源进行任何查询，App_Data 文件就在那里。

这并不理想，但它是一个很好的后备。

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2014-05-08T11:51:58.797

从MSDN 中有关*[ASP.NET Web 项目文件夹结构的文档中：](http://msdn.microsoft.com/en-us/library/ex526337%28v=vs.100%29.aspx)*

> 您可以将 Web 项目的文件保存在对您的应用程序方便的任何文件夹结构中。为了更轻松地使用您的应用程序，ASP.NET 保留了某些文件和文件夹名称，您可以将它们用于特定类型的内容。
> 
> **App_Data**包含应用程序数据文件，包括 .mdf 数据库文件、XML 文件和其他数据存储文件。ASP.NET 使用 App_Data 文件夹来存储应用程序的本地数据库，例如用于维护成员资格和角色信息的数据库。有关详细信息，请参阅[成员资格简介](http://msdn.microsoft.com/en-us/library/yh26yfzy(v=vs.100).aspx)和[了解角色管理](http://msdn.microsoft.com/en-us/library/5k850zwb(v=vs.100).aspx)。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2009-02-09T16:33:26.567

主要目的是保存应用程序的数据库文件。

不，默认情况下，这将无法从网络访问。

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2009-04-20T19:54:30.643

我们将其用作上传的 csv 文件的临时存储区。上传后，ajax 方法会处理并删除文件。

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2009-02-09T16:34:52.087

App_Data 的预期用途是存储数据库相关文件。通常是 SQL Server Express .mdf 文件。

# silverlight - 如何禁用 Silverlight Treeview 中的节点？

> ID：528859
> 
> 赞同：1
> 
> 时间：2009-02-09T16:30:52.877
> 
> 标签：silverlight, treeview

当将 Silverlight 工具包中的 Treeview 数据绑定到数据源时，您如何访问 TreeViewItem 本身以使用其 IsEnabled 属性？或者我们是否失去了该功能并需要使用任何自定义分层数据模板来支持它？

如果我正在对自定义对象树进行数据绑定，那么如何访问单个 TreeViewItem 以设置 IsEnabled？理想情况下，我想通过数据绑定来做到这一点。我想知道使用 ItemContainerStyle 是否可行？我想我对 ItemContainerStyle、ItemTemplate 等之间的关系有点困惑。显然，当我们将数据绑定到普通的旧对象时，TreeViewItem 是为我们创建的，但是我们如何设置它的属性，尤其是绑定？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-09T18:40:04.127

真正的问题是您无法在使用 XAML 为每个数据绑定对象自动创建的 TreeViewItem 上设置绑定。

包括 TreeView 在内的各种 ItemsControl 可以让您覆盖项目的创建，例如 ListBoxItem、TreeViewItem 等。您可以在代码中为这些项目的属性设置绑定。

公共类 MyTreeView 继承 TreeView

```
Protected Overrides Sub PrepareContainerForItemOverride(ByVal element As System.Windows.DependencyObject, ByVal item As Object)

    MyBase.PrepareContainerForItemOverride(element, item)

    Dim tvi As TreeViewItem = element
    Dim bindIsEnabled As New Binding("IsEnabled")
    bindIsEnabled.Mode = BindingMode.OneWay
    tvi.SetBinding(TreeViewItem.IsEnabledProperty, bindIsEnabled)

End Sub 
```

[归功于http://www.fret1.com/blog/silverlight-data-binding-enableddisabled-items-on-combobox/](http://www.fret1.com/blog/silverlight-data-binding-enableddisabled-items-on-combobox/)上的 ComboBox 示例

# c# - 我无法弄清楚的正则表达式问题（消极的后视）

> ID：528864
> 
> 赞同：2
> 
> 时间：2009-02-09T16:32:12.920
> 
> 标签：c#, regex, lookbehind, negative-lookbehind

我如何用正则表达式做到这一点？

我想匹配这个字符串：`-myString`

但我不想匹配`-myString`这个字符串中的：`--myString`

myString 当然是任何东西。

有可能吗？

编辑：

自从我发布了一个问题以来，这里有更多关于我到目前为止所获得的信息：

```
string to match:
some random stuff here -string1, --string2, other stuff here
regex:
(-)([\w])* 
```

此正则表达式返回我 3 个匹配项 `-string1`：`-`和`-string2`

理想情况下，我希望它只返回`-string1`匹配项

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-02-09T16:36:37.103

假设您的正则表达式引擎支持（负）lookbehind：

```
/(?<!-)-myString/ 
```

例如，Perl 会，Javascript 不会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-09T16:34:22.650

```
/^[^-]*-myString/ 
```

测试：

```
[~]$ echo -myString | egrep -e '^[^-]*-myString'
-myString
[~]$ echo --myString | egrep -e '^[^-]*-myString'
[~]$ echo test--myString | egrep -e '^[^-]*-myString'
[~]$ echo test --myString | egrep -e '^[^-]*-myString'
[~]$ echo test -myString | egrep -e '^[^-]*-myString'
test -myString 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-09T16:35:14.377

你想匹配一个以单个破折号开头的字符串，而不是包含多个破折号的字符串？

```
^-[^-] 
```

解释：

```
^ Matches start of string
- Matches a dash
[^-] Matches anything but a dash 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-09T16:36:19.680

> [^-]{0,1}-[^\w-]+

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-09T17:01:14.767

根据上次编辑，我想下面的表达式会更好

```
\b\-\w+ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-09T18:40:58.633

不使用任何后视，使用：

```
(?:^|(?:[\s,]))(?:\-)([^-][a-zA-Z_0-9]+) 
```

破解：

```
(
  ?:^|(?:[\s,])        # Determine if this is at the beginning of the input,
                       # or is preceded by whitespace or a comma
)
(
  ?:\-                 # Check for the first dash
)
(
  [^-][a-zA-Z_0-9]+    # Capture a string that doesn't start with a dash
                       # (the string you are looking for)
) 
```

# c# - 如何在 .NET 中创建向导？

> ID：528871
> 
> 赞同：0
> 
> 时间：2009-02-09T16:33:09.750
> 
> 标签：c#, .net, visual-studio-2008, code-generation

如何在 Visual Studio/.NET 中编写向导来生成代码并将其插入到表单中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-09T16:37:42.483

也许这会有所帮助 [MSDN:Creating Wizard](http://msdn.microsoft.com/en-us/library/7k3w6w59(VS.80).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-09T16:37:26.387

您可以从[这里](http://msdn.microsoft.com/en-us/vsx/default.aspx)开始熟悉 VS 可扩展性，以便您可以创建自己的插件。

# c# - 如何显示标准 SharePoint“拒绝访问”消息

> ID：528883
> 
> 赞同：4
> 
> 时间：2009-02-09T16:35:14.207
> 
> 标签：c#, sharepoint, exception

如何将用户重定向到标准 SharePoint“拒绝访问”页面，类似于下图？

目前，我正在抛出 UnauthorizedAccessException，但此错误消息不如 SP 消息优雅。

```
throw new UnauthorizedAccessException("User does not have permission to access this list"); 
```

任何帮助将不胜感激。

![替代文字](https://lh5.ggpht.com/_6g8ldcvIElU/SjdcWxseJAI/AAAAAAAADXM/r_rAIKUTHeI/s400/SharePoint%20-%20Access%20Denied.JPG)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-02-09T17:23:17.023

您应该能够使用 SPUtility.HandleAccessDenied 来执行此操作。（如果您只想强制显示“拒绝访问”页面，但实际上并未处理异常，则可以为异常参数传入 null。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-09T17:14:39.150

不完全确定您要查找的内容，但如果您抛出[SPException](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spexception.aspx)，您可以更好地控制错误页面的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-09T17:33:19.760

根据您正在执行的操作，您应该能够通过正确配置站点上的权限来执行此操作。如果您有不希望某些用户能够查看的页面，则应相应地设置该页面的权限。

但是，如果这是您尝试在某种事件处理程序或其他事件处理程序的代码中执行的操作，您可能需要不同的解决方案。这可能有一个特定的 SharePoint 例外，但我不知道它是什么。

我想真正的问题是，您到底想做什么来阻止访问？

# java - 当部署为 ROOT.war 时，让 struts s:url includeparams 在 jboss 上工作

> ID：528891
> 
> 赞同：1
> 
> 时间：2009-02-09T16:36:22.253
> 
> 标签：java, jakarta-ee, jboss, struts2, url-rewriting

我正在开发一个使用 struts 2、spring、[URL Rewrite Filter](http://code.google.com/p/urlrewritefilter/)和其他一些我不确定是否与此相关的依赖项的 webapp。我们构造的其中一个 url 构造如下：

```
<s:url id="blah" includeParams="get"> 
```

当在 jboss 中部署为部署 /. 那么所有 url 的格式都是[http://localhost:8080/mywebapp/](http://localhost:8080/mywebapp/) ... 并且当使用这个标签时，所有的 get 参数都会按预期包含在内。

但是我们希望在根上下文中部署这段代码（所以一切都在[http://localhost:8080/...](http://localhost:8080/..)），所以我们将它部署为 ROOT.war。突然，所有的 get 参数都不再显示在 URL 中。我一直在寻找一段时间，似乎无法弄清楚可能导致这种情况的原因。首先，我认为这与 URL 重写有关，但它似乎工作正常。欢迎任何提示，指针，进一步的澄清问题。更令人困惑的是，当部署在码头（根上下文是默认值）中时，这一切都可以正常工作。

编辑：我也尝试删除 ROOT.war 并使用 jboss-web.xml 部署到根上下文，但这表现出完全相同的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-10T14:08:01.923

我将此部分归结为 url 重写配置错误，get 参数没有被添加到要重写的 url 中，因为 urlrewrite 上的“include-query-string”未设置为 true。这意味着 'blah?querystring' 没有被重定向到 'blah.action?querystring'。由于相互关联的问题，它现在似乎仍然不起作用，但我会将它们分开到另一个问题。

# c# - 保持 UI 线程自由

> ID：528905
> 
> 赞同：2
> 
> 时间：2009-02-09T16:40:42.040
> 
> 标签：c#, winforms

我有一个带有两个面板（顶部，底部）的表单，每个面板都包含网格。基本上，它是一个主从表单，从顶部网格中选择一行将在底部网格中显示详细信息。

将数据绑定到详细信息网格需要一些时间。由于绑定是在 UI 线程上完成的，它会阻塞线程，因此在绑定完成之前，用户无法从主网格中选择另一行。

请注意，绑定并不是指从数据源获取数据。实际绑定需要更长的时间，因为它会处理大量数据。在详细信息网格进行绑定时，如何保持 UI 线程空闲？

太感谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-09T16:42:30.787

你不能。UI 的更新必须在 UI 线程上执行。

您可以通过使用诸如 BeginUpdate/EndUpdate 之类的东西来加快绑定速度，这在某些控件上可用，但由于您没有指定您使用的内容，所以我不能说它是否可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-09T16:52:18.317

您可以使用后台线程来执行数据检索，然后使用 UI 线程来显示它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-09T17:05:42.887

如果我是您，听起来您正在处理大量数据，我会将您可以进行的所有“按摩”分离到一个单独的线程进程中。

因此，例如，当创建主记录时，您可能“手动”将后台线程中的详细数据分离到另一个数据集并进行按摩，然后将结果数据集绑定到网格。这样，在 UI 线程上发生的唯一事情就是 UI 绑定。

最终，如果花费这么长时间，您可能正接近应用程序中的一个关键点，您需要在代码中手动执行您需要执行的操作，而不是使用 .NET 中的开箱即用数据绑定功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-10T17:35:07.103

最后我找到了解决方案。该解决方案不包括开始使用的多线程。正如我所说的延迟是绑定网格意味着主线程被持有，我们无能为力。所以解决办法是带来延迟。当用户选择主行时，计时器会在一段时间内打勾。如果在时间到期之前发出另一个请求，则计时器将重新启动。这是我们忽略所有由于用户单击或选择行太快而进行的调用。计时器到期后，我将选取选定的行并显示数据。简单而优雅的解决方案。

# git - 我可以将 git 存储库复制到 Windows 吗？

> ID：528907
> 
> 赞同：21
> 
> 时间：2009-02-09T16:42:15.140
> 
> 标签：git

我正在将 git 存储库从我的 Linux 机器移动到 Windows 机器。我希望只是移动整个目录树并发现事情会“正常工作”。是这样吗？我需要对行尾做些什么吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2009-02-10T00:48:46.580

您甚至不需要整个目录结构，只需抓取 .git 目录并将其移动到您的 windows 机器。然后运行“git reset --hard”，它应该会为您重建目录结构的其余部分。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-02-09T16:49:09.697

你为什么不“git pull”回购？

PS：当然——“git clone”它（首先）。要点是：每个 git-repo 都与其克隆一样有效。

# java - 最小化 Java 中的可见性

> ID：528911
> 
> 赞同：3
> 
> 时间：2009-02-09T16:42:42.457
> 
> 标签：java, refactoring

有谁知道重构代码以最小化类及其属性和方法的可见性的自动化方法？我正在尝试清理具有太多公共 getter 和 setter 以适应 JavaBean 标准的旧 API。Eclipse 插件将是理想的，但任何可以提供帮助的工具都会很棒。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-09T16:45:04.917

IntelliJ IDEA 可以对代码进行全局分析，告诉你各种可见性过高的问题。如果涉及到任何动态技术，它也非常善于理解它们是给定方法/类的*用法*；但这并不完美。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-09T18:45:29.870

我使用 Structure101 来维护我的应用程序的结构。值得一看。

# java - 为什么你不必明确声明你可能会在 Java 中抛出一些内置异常？

> ID：528917
> 
> 赞同：7
> 
> 时间：2009-02-09T16:46:28.703
> 
> 标签：java, exception

我注意到`Integer.parseInt()`您不必用 try catch 包围它或声明该方法可能会抛出异常，尽管它“抛出” a `NumberFormatException`。

为什么我不必明确地捕获`NumberFormatException`我的方法抛出的 or 状态？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-02-09T16:50:39.317

因为那是一个“运行时”异常。

**RuntimeExceptions**用于识别编程问题（一个好的程序员可以避免），而

**已检查的异常**是为了识别环境问题（无论您的程序多么好，都无法避免，例如服务器已关闭）

你可以在这里阅读更多关于[它们的信息](https://stackoverflow.com/questions/27578/when-to-choose-checked-and-unchecked-exceptions)

实际上有[三种异常](https://stackoverflow.com/questions/462501/exception-other-than-runtimeexception/462745#462745)，应该只处理其中一种（大多数时候）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-02-09T16:53:30.840

```
 Throwable
         /      \
      Error    Exception
                /     \
           *checked*  RuntimeException
                            \
                         *unchecked* 
```

有关 Checked 与 Unchecked 异常的详细解释，请参阅[Thinking in Java](http://smart2help.com/e-books/tij-3rd-edition/TIJ311.htm)。

有些人认为检查异常的想法是一个失败的实验。例如，Spring 和 Hibernate 都使用未检查的异常，并且经常将已检查的异常包装在未检查的版本中。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-02-09T16:49:05.467

NumberFormatException 扩展了 RuntimeException，您不必显式处理从 RuntimeException 继承的任何内容。

其他 RuntimeExceptions 是 NullPointerException 和 IndexOutOfBoundsException。这些是程序员可以避免的事情，并且必须尝试/捕获这些类型的异常会产生一些非常混乱的代码。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-09T18:36:15.273

只是对工具包答案的长评论。

检查异常是一个问题的原因是它们最终会导致这样的代码：

```
try {
    Something that throws an exception
} catch (Exception e) {} 
```

这是最坏的情况。首先，他们没有记录他们正在捕获异常。这种情况经常发生，并且几乎是由非常愚蠢的检查异常（例如 Thread.sleep() 上的异常）强制执行的，它会抛出必须捕获的 InterruptedException，但 99% 的时间你不在乎是否有一个.

在上述情况下，如果抛出多个异常，人们往往只会捕获“异常”，这一事实使情况更加复杂。这意味着即使抛出了一个严重的未经检查的异常，它也会被捕获并忽略，从而几乎不可能找到问题。

我曾不止一次在团队中花费大约一个人月的时间来试图追踪以这种方式隐藏的错误。

这是一个很好的概念，当你加上人类是必须负责任地实施它的人这一事实时，它就变得可怕了。

# bash - 如何将目录设置为具有持久组权限？

> ID：528920
> 
> 赞同：10
> 
> 时间：2009-02-09T16:47:03.617
> 
> 标签：bash, unix, permissions, directory

我们有两个用户：

*   用户1
*   用户2

他们都属于“管理员”组。

我们有一个已设置为 775 的目录。该目录的组已更改为“admin”。每个用户都具有写入该目录的完全权限，但是当用户将新文件写入目录时，文件夹的组权限不会保留到写入的文件中。

我们应该如何使文件继承目录的组权限？

澄清：当一个新的文件或目录被写入时，它使用用户组作为新文件的组，而不是目录的组，这是有道理的——但我怎么不让它发生呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-02-09T17:01:43.113

`chmod g+s`您可以通过设置目录的 setgid 位 ( )来传播组权限。~~这可能无法在所有 *nixes 和所有文件系统中移植。~~

[http://en.wikipedia.org/wiki/Setuid#setgid_on_directories](http://en.wikipedia.org/wiki/Setuid#setgid_on_directories)

[http://www.gnu.org/software/coreutils/manual/html_node/Directory-Setuid-and-Setgid.html](http://www.gnu.org/software/coreutils/manual/html_node/Directory-Setuid-and-Setgid.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-09T17:00:48.293

如果您使用的是 ext3 或 ReiserFS，这个[关于创建 Linux 文件服务器的页面](http://searchenterpriselinux.techtarget.com/tip/0,289483,sid39_gci1275455,00.html)可能会有所帮助。具体来说，步骤 7 建议使用以下命令。

```
setfacl -d -m g:sales:rw /groups/sales 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-09T16:57:17.447

我想你应该看看[这里](http://content.hccfl.edu/pollock/AUnix1/FilePermissions.htm)。

正如该网站所说，“Unix 不支持继承权限的概念。”

但是，有一个关于 ACL（访问控制列表）的部分，我认为这是您正在寻找的。通过设置 ACL，您可以让您的文件从目录继承相同的 ACL，我认为这正是您所要求的。setfacl 是您需要查看的 shell 命令。

希望有帮助！

# user-interface - 黑莓 - ListFieldCallback 已弃用

> ID：528921
> 
> 赞同：0
> 
> 时间：2009-02-09T16:47:14.880
> 
> 标签：user-interface, blackberry, deprecated, listfield, rim-4.3

我正在使用 4.3.0 的 Blackberry JDE。我创建了一个 ListField 对象并通过覆盖 ListFieldCallback 来填充它。它可以工作，但我收到一个编译警告，表明 ListFieldCallback 已被弃用。我应该改用什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-10T16:38:59.097

这是[4.3.0 的弃用列表](http://www.blackberry.com/developers/docs/4.3.0api/deprecated-list.html)。ListFieldCallback 未列为已弃用的类。而且，它似乎也没有在较新的版本中被弃用。您确定它抱怨的是 ListFieldCallback 吗？

# cocoa-touch - 我应该如何构建这个应用程序？

> ID：528922
> 
> 赞同：0
> 
> 时间：2009-02-09T16:47:21.727
> 
> 标签：cocoa-touch, interface-builder

我正在编写一个 iPhone 应用程序，该应用程序要求用户在继续进入应用程序之前输入他们的手机号码和 PIN 码并按下接受按钮。

以前我有（每个视图都在不同的 Xib 中）

AppDelegate - 如果 {registered add load RootView (which is main view) into NavigationController} else {load RegistrationView subview}

但是当RegistrationView加载时它会出现在状态栏下，我也不知道如何在注册后使用导航栏加载主应用程序，加载时它工作正常，但从注册页面加载时没有导航栏

然后我尝试了

AppDelegate - if {registered add load RootView (which is reg view) in NavigationController} else {load RootView 然后立即推送 HomeView}

但是随后 UINavigationController 似乎在主页上不起作用

实现这一点的最佳方法是什么？我应该把两个主页放在同一个xib中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-02-09T17:22:27.400

我找到了一个临时解决方案

AppDelegate - 如果已注册{将加载 RootView（主视图）添加到 NavigationController} 否则 {将加载 RootView（主视图）添加到 NavigationController 并将 RegistrationView 加载为子视图}

RegistrationView - 在注册时隐藏注册子视图

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-09T17:43:41.797

在我的应用程序中，我让用户在模式视图中输入他们的用户名和密码：

```
[navigationController presentModalViewController:login animated:YES]; 
```

我`applicationDidFinishLaunching:`在应用程序委托的方法中调用它。这在程序第一次启动时被调用。身份验证失败时会显示相同的对话框。

# c# - UpdatePanel中UpdateMethod后GridView的刷新

> ID：528924
> 
> 赞同：3
> 
> 时间：2009-02-09T16:47:41.883
> 
> 标签：c#, gridview, asp.net-ajax

我在 UpdatePanel 中设置了一个 GridView。GridView 有一个与 Gridview1_SelectedIndexChanged 方法绑定的 SELECT CommandField。我希望 GridView 在选择一行后刷新，但它永远不会。我尝试了几种不同的场景，但似乎都没有奏效。

*   我在 UpdatePanel 上将 UpdateMode 设置为“Conditional”和“Always”，并尝试在后面的代码中强制更新 UpdatePanel。
*   我已将 CommandField 转换为带有按钮的模板字段

这是经过消毒的代码：

```
 <asp:UpdatePanel ID="UpdatePanel1" runat="server">
   <ContentTemplate>
    <asp:GridView ID="GridView1"
         runat="server"
         AllowPaging="True" 
         AllowSorting="True"
         AutoGenerateColumns="False"
         DataSourceID="ObjectDataSource1"
         OnSelectedIndexChanged="GridView1_SelectedIndexChanged" 
         PagerSettings-Visible="true" EnableViewState="False" >
    <Columns>
        <asp:CommandField ButtonType="Image"
             SelectImageUrl="~/images/icon.gif" 
             ShowSelectButton="True" />
        <asp:BoundField DataField="Id" HeaderText="Id" SortExpression="Id" />
        <asp:BoundField DataField="Title" HeaderText="Title" 
             SortExpression="Title" />
    </Columns>
    </asp:GridView>
   </ContentTemplate>
   <Triggers>
        <asp:AsyncPostBackTrigger ControlID="GridView1" 
            EventName="SelectedIndexChanged" />
   </Triggers>
  </asp:UpdatePanel> 
```

数据源看起来像这样......

```
<asp:ObjectDataSource ID="ObjectDataSource1" runat="server"
     DataObjectTypeName="myNamespace.Item"
     InsertMethod="myInsertMethod" 
     SelectMethod="mySelectMethod" 
     TypeName="myNamespace.ItemMgr"
     UpdateMethod="myUpdateMethod">
</asp:ObjectDataSource> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-10T17:13:20.700

我想我看到了你的问题。尝试将 DataKeyNames 参数添加到 GridView 以及您要操作的行的 ID。接下来删除触发器部分，因为您不需要它们来执行您正在执行的操作。由于您想要对某事采取行动，请将 CommandField 更改为其他选项之一，例如您当前未使用的 Delete。接下来修改您的 ObjectDataSource 以在 myNamespace.ItemMgr 中定义一个 DeleteMethod，它接受来自 GridView 的 Id（DataKeyNames 参数）并执行您希望执行的任务。方法返回后，它将从定义的 SelectMethod 刷新 GridView。

```
 <asp:UpdatePanel ID="UpdatePanel1" runat="server">
   <ContentTemplate>
    <asp:GridView ID="GridView1"
         runat="server"
         AllowPaging="True" 
         AllowSorting="True"
         AutoGenerateColumns="False"
         DataSourceID="ObjectDataSource1"
         PagerSettings-Visible="true" EnableViewState="False"
         DataKeyNames="Id" >
    <Columns>
        <asp:CommandField DeleteImageUrl="/images/icon.gif" 
             DeleteText="Some Text"
             ShowDeleteButton="True" 
             ButtonType="Image" />
        <asp:BoundField DataField="Id" HeaderText="Id" SortExpression="Id" />
        <asp:BoundField DataField="Title" HeaderText="Title" 
             SortExpression="Title" />
    </Columns>
    </asp:GridView>
   </ContentTemplate>
  </asp:UpdatePanel>

<asp:ObjectDataSource ID="ObjectDataSource1" runat="server"
    DeleteMethod="myDeleteMethod" SelectMethod="mySelectMethod" 
    TypeName="myNamespace.ItemMgr">
</asp:ObjectDataSource> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-10T15:50:26.357

如果我理解正确，您需要在每次回发时将数据源绑定到您的网格。

# php - 如何在 PHP 4 中使用 SOAP/WSDL？

> ID：528925
> 
> 赞同：3
> 
> 时间：2009-02-09T16:47:54.877
> 
> 标签：php, soap, wsdl, google-ads-api

更具体地说，我正在尝试使用 PHP 4 使 google adwords API 工作。我有哪些选择？任何指向我可以使用的类、示例代码等的链接将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-09T16:51:18.240

[我对NuSOAP](http://sourceforge.net/projects/nusoap/)没有任何问题

这是一个使用[Google API 的 NuSOAP示例](http://www.useseo.com/google-api.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-09T16:52:51.170

您可以使用[wsdl2php](http://www.urdalen.no/wsdl2php/index.php)从 wsdl 文件创建 php 代理。之后，您可以使用生成的代理从 Web 服务发送和接收信息。

# gpl - 在 GPL 应用程序中使用闭源 API？

> ID：528931
> 
> 赞同：6
> 
> 时间：2009-02-09T16:48:31.693
> 
> 标签：gpl

我想编写一个作为 GPLv3 发布的应用程序（将用 .NET 编写），我正在编写它以便其他人可以将扩展编写为 DLL 库。我假设这些也必须作为 GPLv3 发布，这是预期的。

我希望应用程序在第一个版本中附带的库之一将是一个与 3rd 方应用程序接口的库。3rd 方应用程序提供了一个免费的（如在 beer 中）.NET 库和 API，它实际上是一个与他们的 3rd 方应用程序通信的通信驱动程序。

我的问题——这样可以吗？我假设是这样，否则我无法编写基于 .NET 的代码并将其作为 GPLv3 发布，因为 .NET 实际上是带有 API 的库的集合。我说得有道理吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-09T16:52:02.450

请记住，这是您应该问知识产权律师而不是软件开发人员的问题。我们所能给出的只是我们最好的猜测。

我的建议是阅读相关 API 附带的许可证，如果您有任何其他问题，请直接联系 API 发布者。猜测，甚至是集体猜测，都是构建软件的糟糕框架。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-02-09T17:10:55.197

GPL 已经包含了对“系统库”和某些“标准接口”的规定，您的 DLL 扩展接口可能在其中。诸如 C 运行时、.NET Framework 和 POSIX API 之类的东西都属于这些例外。您的 DLL 扩展接口可能属于“标准接口”术语。

但是，如果*您*正在编写应用程序（而不是修改现有的 GPL 应用程序），那么您可以做任何您想做的事情——毕竟它是您的。

如果您担心 DLL 扩展接口不是“以源代码形式向公众提供实现的标准接口”，您可能希望在 GPL 中编写一个特定的例外以允许在非用于扩展 DLL 的 GPL 3rd 方库使其清晰并允许其他人提供这些扩展。请注意，除了这样的例外，一些开发人员可能会试图将其用作一个漏洞，因为他们不必通过将修改打包在扩展 DLL 中来发布他们的修改。

当然，与任何与许可证或其他法律事务相关的帖子一样，标准免责声明适用（IANAL，使用风险自负，这不是建议，这可能完全不正确，如果您试图就此起诉我，我会声称不是我写的（一定是有人闯入了我的 SO 帐户），等等，等等，等等）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-02-09T17:16:39.630

根据[FSF](http://www.gnu.org/licenses/gpl-faq.html)关于 GPL 的常见问题解答：

*我可以根据 GPL 发布使用非自由工具开发的程序吗？*

> 您用于编辑源代码、编译、研究或记录源代码的程序通常不会影响与源代码许可相关的问题。但是，如果您将非自由库与源代码链接，那将是您需要处理的问题。它不排除在 GPL 下发布源代码，但如果库不符合“系统库”例外，您应该附加明确的通知，允许将您的程序与它们链接。FSF 可以为您提供建议。

有关更多详细信息，请参阅常见问题解答中的[此条目](http://www.gnu.org/licenses/gpl-faq.html#GPLIncompatibleLibs)（在此处粘贴有点涉及）。

**TL;DR** 如果它是一个系统库，你可以做到。否则，您可以贴一个通知，说明最终用户可以链接到封闭源代码库（如果您需要帮助，请联系 FSF）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-09T16:58:55.460

尽管（正如其他人所说）您不太可能将其作为 GPL 应用程序发布，但请记住，您可以使用其他许可证，这些许可证对您可以使用第三方代码执行的操作更为宽松，但仍然允许您保持对源代码的一些控制（或不控制，如您所愿）：链接等 LGPL、MPL、BSD 许可证等，但是

# java - 如何在代码中的任意位置访问 JAAS 角色？

> ID：528938
> 
> 赞同：4
> 
> 时间：2009-02-09T16:50:08.227
> 
> 标签：java, security, jaas, role, security-roles

我想在我的 SOAP 应用程序中访问具有角色的完整用户模型。例如，我可能想知道名为“Fred”的用户的角色。

如何进入某种全局 JAAS 注册表并执行（伪代码） *globalRegistry.getUser("Fred").getPrincipals()*？（请注意，在 JAAS 中，角色由*Principal*表示。）

我知道如何从*LoginContext获取**Subject的**Principal*， 但这有两个问题。

 **1.  只是在登录的那一刻，我不希望自己编写上述注册表并存储*Subject*和*Principal*对象，因为它们已经由 appserver 存储。
2.  最好，即使 Fred 不是当前用户，我也希望能够访问此信息。

我正在使用 Jetty，但我认为这些行为是 JAAS 的标准行为。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-01-06T23:31:31.677

我看到的一个模式是：

```
AccessControlContext acc = AccessController.getContext();
Subject subject = Subject.getSubject(acc);
Set<Principal> principals = subject.getPrincipals(); 
```

本质上，这会找到当前与当前线程关联的主题，并询问其主体。

[在Apache Jackrabbit](http://jackrabbit.apache.org/)的[RepositoryImpl](http://svn.apache.org/viewvc/jackrabbit/trunk/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/RepositoryImpl.java?view=markup)中使用了一个示例。它在`extendAuthentication`方法中，其工作是确定当前线程在创建新会话时具有哪些 Jackrabbit 权限（我认为）。

但是，我应该注意，这可能不一定真的有效，至少在 J2EE 上下文中是这样。我在 JBoss AS7 下使用此代码，但找不到主题。不过，这可能只是一个错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-09T17:35:18.493

我们使用一个 ThreadLocal 变量来引用当前用户，因为它已经在系统入口点（在我们的例子中是一个 servlet 或 ejb）进行了身份验证。这允许对当前用户进行“全局”访问。这不直接与 JAAS 或任何其他安全协议相关联，但可以从它们初始化。

编辑： ThreadLocal 的返回是当前用户的主题。

访问其他用户通常会通过某种类型的管理模块来完成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-09T17:29:33.950

对我来说，这似乎将appsever 的用户、组等与J2EE 应用程序角色混为一谈。

*   获取认证用户的权限是一项管理任务，通常必须使用特定于应用服务器的 API 来完成。
*   JAAS 编程模型适用于更高层次的抽象。它仅提供用户是否属于 J2EE 角色的信息（在应用程序中定义）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-05-25T14:34:22.120

我相信 JAAS 的设计目的是不允许您真正尝试做的事情。我知道在我构建的应用程序中，我需要那种我必须绕过 JAAS 并直接编程到任何实际身份存储库的功能，无论是 LDAP、ActiveDirectory 还是其他任何东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-07T10:06:07.093

在 EJB 中使用

```
@Resource(mappedName = "java:comp/EJBContext")
protected SessionContext sessionContext; 
```

`context.lookup("java:comp/EJBContext"`并在任何时候尝试使用)。

* * *

此代码适用于 JBoss 服务器系列，其他人可以在他们的 JNDI 中查找。

# javascript - 如何在另一个窗口中检查打开的 URL？

> ID：528941
> 
> 赞同：5
> 
> 时间：2009-02-09T16:50:38.397
> 
> 标签：javascript, windows, popup

这是我最后一个问题的后续行动[如果窗口尚不存在则打开一个窗口](https://stackoverflow.com/questions/528671/javascript-window-open-only-if-the-window-does-not-already-exist) 本质上，我现在保留一个页面已打开的所有窗口引用的列表，并且仅在它们存在时才允许打开它们还没有打开。然后我遇到了一个潜在的问题——用户当然可以关闭原始窗口，然后再次打开它，从而丢失窗口引用列表。

是否可以循环浏览在浏览器中打开的窗口，检查特定的 URL？

编辑：在这里（以及其他问题）提供了很多有用的评论后，这里是应用程序启动器的最终代码。本质上，它尝试使用适当的名称获取打开窗口的位置。如果这导致异常（由于隐私问题），则判断应用程序已加载。如果它是“about:blank”，那么它是一个新窗口。这适用于 Firefox、IE7 和 Google Chrome。感觉很脏...

```
var g_urlarray = [];

Array.prototype.has = function(value) {
    var i;
    for (var i in this) {
        if (i === value) {
            return true;
        }
    }
    return false;
};

function launchApplication(l_url, l_windowName)
{
    var l_width = screen.availWidth;
    var l_height = screen.availHeight;
    var winRef;

    var l_params = 'status=1' +
        ',resizable=1' +
        ',scrollbars=1' +
        ',width=' + l_width +
        ',height=' + l_height +
        ',left=0' +
        ',top=0';
    if (g_urlarray.has(l_url)) {
        winRef = g_urlarray[l_url];
    }
    if (winRef == null || winRef.closed) {
        winRef = window.open('', l_windowName, l_params);
        var l_openNew = 0;
        try {
            if (winRef.location == 'about:blank') {
                l_openNew = 1;
            }
        }
        catch (e) {
            l_openNew = 0;
        }
        if (l_openNew === 1)
        {
            winRef.location = l_url;
            winRef.moveTo(0,0);
            winRef.resizeTo(l_width, l_height);
        }
        g_urlarray[l_url] = winRef;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-09T16:51:26.943

不，这将是一个安全/隐私问题。

* * *

由于其他人提出了所有权/cookie状态存储：这仅在您也是打开窗口的同一个文档时才有效，即在用户关闭窗口并重新打开的情况下，这些引用确实丢失了（即使您存储了它们，您将无权再关闭它们）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-09T16:54:02.400

在 JavaScript 中，您只能获得对当前窗口以及您使用`window.open`.

不过，您可以检查`winRef.closed`用户是否关闭了窗口。不过，我不确定这是否适用于所有浏览器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-09T16:58:01.937

如果您给每个窗口一个唯一的窗口名称（window.open 的第二个参数），则使用相同的窗口名称再次调用 window.open 将在窗口关闭时打开窗口，或者返回对现有窗口的引用而不打开新窗口窗户。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-09T17:01:58.760

你实际上可以用**cookie**来做，但是……如果你问我，你不会做的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-09T19:17:13.007

设置一个数组，并在打开它们时使用窗口引用递增它...

```
var wins = new Array();

function openWindow(url) {
  wins.push(window.open(url));
} 
```

然后，当您想检查窗口的状态时，您可以像这样循环它们，并删除未打开的窗口...

```
function updateWindowArray() {
  for(var i = 0, l = wins.length; i < l; i++) {
    if(wins[i] == null || wins[i].closed)
      arrayRemove(wins, i, i + 1);
  }
}

function arrayRemove(array, from, to) {
  var rest = array.slice((to || from) + 1 || array.length);
  array.length = from < 0 ? array.length + from : from;
  return array.push.apply(array, rest);
} 
```

最好的祝福...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-09T19:43:23.803

> @annakata（即使您存储了它们，您也无权再关闭它们）

不对。如果您有窗口的名称，您可以使用 window.open 重新建立到窗口的链接，即使打开器已关闭并重新打开。例如：

```
<script>
function winOpen(url){
  return window.open(url,getWinName(url));
}
function winClose(url){
  var win = window.open("",getWinName(url));
  win.close();
}
function getWinName(url){
  return "win" + url.replace(/[^A-Za-z0-9\-\_]*/g,"");
}
</script>
<a href="#" onclick="winOpen('http://google.com');return false;">Click me first</a>, close and open this window, then
<a href="#" onclick="winClose('http://google.com');return false;">click me to close the other window</a> 
```

# sharepoint - Infopath 表单模板冲突

> ID：528961
> 
> 赞同：0
> 
> 时间：2009-02-09T16:54:51.430
> 
> 标签：sharepoint, forms, infopath, sharepoint-designer

我们在 Sharepoint 2003 中为我们所有不同的项目提供了一堆故事库。我们在 Sharepoint 中创建了一个不错的故事库，其中包含一堆有用的视图。然后我从 Sharepoint 设计器中导出它，并使用该模板为每个新项目创建一个库。

问题是，Infopath 模板始终具有相同的 ID。因此，当您从其他项目打开故事时，您会在 InfoPath 中看到“表单模板冲突”。我发现的唯一方法是将表单模板上传到具有唯一名称的库（这会更改表单模板 ID）。但问题是当我创建一个新的、独特的库时，我丢失了导出库时包含的所有很酷的有用视图。

我尝试更改 ID： [表单模板冲突 - 复制模板时使用相同的表单 ID](http://social.msdn.microsoft.com/Forums/en-US/sharepointinfopath/thread/e29253c4-5801-4818-bfd1-3993d35acd98/)

但这不起作用，当我发布它时，它恢复到生成的那个。
谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-05T14:08:59.707

升级到 SharePoint 2007

# bluetooth - 蓝牙仿真工具

> ID：528964
> 
> 赞同：3
> 
> 时间：2009-02-09T16:55:57.793
> 
> 标签：bluetooth, simulator

任何人都可以建议我现在最好的蓝牙网络模拟工具。为了测试有关路由和漫游问题的各种算法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-09T17:30:55.803

我知道有两个：[NS-2](http://www.isi.edu/nsnam/ns/.)（带有[UCBT：蓝牙扩展](http://www.ececs.uc.edu/cdmc/ucbt/.)）和[QualNet](http://www.scalable-networks.com/.)。其中，NS2 可能是最常用的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-09-28T12:31:00.940

还有 ns3 那些 ns2 仍然是使用最广泛的模拟器。网络模拟 2 和 3 是开源项目，您已经可以使用许多实现和协议模型。在这种情况下，您需要做的就是将网络设置的代码写入 tcl 文件并执行。瞧，你在跟踪文件上有你的输出。

Qualnet 具有推广性，而且获得许可非常昂贵，但绝对更易于使用。您从他们的团队获得的支持也很棒。

因此，如果您有足够的资金来获得 qualnet，我会建议其他开源项目规则... :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-19T13:55:43.250

是否可以在 Matlab 中对蓝牙算法进行仿真

# ruby-on-rails - Ruby on Rails -Windows 上的 Capistrano 和 SVN. 设置帮助

> ID：528969
> 
> 赞同：0
> 
> 时间：2009-02-09T16:57:59.223
> 
> 标签：ruby-on-rails, windows, capistrano

我使用 Windows 和 svnserve 在本地网络上安装和运行 Subversion。我想使用 Capistrano 部署到远程 ubuntu 服务器，但有点不确定我需要做什么才能让客户端在 Windows 上工作。我的理解是远程服务器需要能够通过隧道进入我的颠覆服务器。我已经阅读了一些教程，但是当他们谈论我的本地系统、我的 svn 服务器或我的远程系统时，他们或我都被转过身来，当然几乎没有人一起谈论 capistrano 和 windows。

我需要设置 Apache 来为我的 subversion 存储库提供服务吗？我宁愿不要，但如果我必须，步骤是什么？

我找到了这个[教程](http://turnleft.inetsolution.com/2007/07/how_to_setup_subversion_apache_1.html)，但我不知道它是否会启用对存储库的 ssh 访问

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-09T19:55:28.327

您可以尝试让 capistrano 在本地签出您的代码，压缩并将其发送到服务器。让服务器访问 svn 效率不高，因为它每次都必须发送整个代码库，但它可以省去将存储库暴露给外部的麻烦。

在capistrano 网站上的[此页面](http://www.capify.org/upgrade/whats-new)中，在部署策略下：

```
set :deploy_via, :copy
set :copy_strategy, :export
set :copy_compression, :zip 
```

您将需要一个可用的命令行 zip 实用程序来完成这项工作。[Info-Zip FTP 站点](ftp://ftp.info-zip.org/pub/infozip/win32/)有一个可用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-09T17:12:45.817

我不是 Windows 人，但我的理解是，在 Capistrano 的正常状态下，它在服务器上执行它的所有命令。这就是为什么它需要能够通过 SVN 从您的机器中提取代码的原因。

查看该教程，它似乎使用 Apache 作为允许客户端（在本例中为 Capistrano）从您的 Windows 机器中提取源代码的机制。这将适用于您想要做的事情。

您不必设置 Apache 即可完成此操作，您可以在 Windows 机器上设置 SSH 服务器，尽管这超出了我的知识范围。:-)

# delphi - 在我的应用程序的安装程序中嵌入 Firebird 安装的最佳方式是什么？

> ID：528970
> 
> 赞同：4
> 
> 时间：2009-02-09T16:57:59.550
> 
> 标签：delphi, installation, windows-installer, delphi-7

我的应用程序有自己的安装程序，但我必须指导我的用户自行安装 Firebird。

我想自动安装它。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-09T17:15:45.373

您可以下载 Firebird 源代码。它包含在 Windows 目标上实际安装 firebird 的[InnoSetup](http://www.jrsoftware.org/isinfo.php)脚本。然后，您可以对其进行修改以满足您的需要。

作为附带建议，也许您应该自己考虑 Inno Setup。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-09T17:31:18.020

InterBase 和 Firebird 提供了一个 API，您可以在安装程序脚本中使用该 API 来自动安装。

请参阅文档“InterBase 5.5 Embedded Installation Guide”中有关此 API 的文档[http://dn.codegear.com/article/26386](http://dn.codegear.com/article/26386)

InterBase Express (IBX) 组件为安装 API 提供了 Delphi 绑定。这在 InterBase 6.0“开发人员指南”中有记录。

* * *

@mghie 和 @TOndrej 对我的错误发表了评论。曾几何时，我是 InterBase 的产品经理，当时 InterBase 确实提供了安装 API。但是这个答案已经过时了，现在已经十年了。

这是另一个更新的资源：

*   [非官方 Firebird 安装页面](http://alanti.net/firebird/inst/index.html)

这包含为 Firebird 创建自己的 Inno Setup 安装程序的分步说明，以配合您自己的应用程序安装程序。毫无疑问，您可以为您的应用程序使用不同的安装程序技术，只需将 Inno Setup 安装程序作为安装程序的外部程序调用即可。但是，如果您也将 Inno Setup 用于您自己的产品，它可能会更加无缝。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-09T18:12:04.303

如果您不需要独立的 Firebird 服务器，您也可以在设置中包含所需的文件并将 Firebird 用作嵌入式 SQL 服务器。

见[http://www.firebirdsql.org/manual/ufb-cs-embedded.html](http://www.firebirdsql.org/manual/ufb-cs-embedded.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-09T17:00:49.107

为您的产品和产品所需的先决条件创建一个引导程序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-09T17:13:59.263

其他产品可能是一个很好的模型。例如，[Pidgin](http://pidgin.im)依赖于特定版本的 GTK，并指导您运行 GTK 安装程序。作为开源，一种选择是查看他们的 NSIS 安装程序包的[源代码](http://pidgin.im/download/source/)，看看他们是如何做到的。

# wpf - 在 Listview (WPF) 上绑定日期时间类型

> ID：528976
> 
> 赞同：3
> 
> 时间：2009-02-09T16:59:10.373
> 
> 标签：wpf, listview, binding

嗨，我正在使用 C# 3.5，这可能吗？

```
<EditItemTemplate>
                                        <asp:TextBox ID="TextBox4" runat="server" Text='<%# Bind("date", "{dd/MM/YYYY}")  %>'></asp:TextBox></EditItemTemplate>
                                    <ItemTemplate> 
```

我在尝试：

```
<ListView Margin="0,80,0,38" Name="dlstInformes" Grid.ColumnSpan="2" >
            <ListView.View>
                <GridView>
                    <GridViewColumn Header="Numero Informe"   DisplayMemberBinding="{Binding Path= numeroinforme}" >
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock >

                                </TextBlock>   
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                    <GridViewColumn Header="Nombre" DisplayMemberBinding="{Binding Path= nombreinforme}" />
                    <GridViewColumn Header="Fecha Informe" DisplayMemberBinding="{Binding Path= fechainforme}" />
                </GridView>
            </ListView.View> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-09T17:33:22.913

这里的一种解决方案：

```
<ListView Margin="0,80,0,38" Name="dlstInformes" MouseDoubleClick="dlstInformes_MouseDoubleClick">
        <ListView.View>
            <GridView>
                <GridViewColumn Header="Numero Informe"   DisplayMemberBinding="{Binding Path= numeroinforme}" >

                </GridViewColumn>
                <GridViewColumn Header="Nombre" DisplayMemberBinding="{Binding Path= nombreinforme}" />
                <GridViewColumn Header="Fecha Informe">
                    <GridViewColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock>
                            <TextBlock.Text>
                             <Binding Path="fechainforme" StringFormat="{}{0:MM/dd/yyyy}"/>
                             </TextBlock.Text>
                            </TextBlock>
                        </DataTemplate>
                    </GridViewColumn.CellTemplate>
                </GridViewColumn> 

            </GridView>
        </ListView.View>

    </ListView> 
```

希望有帮助...

# c# - 从动态加载的用户控件引发事件

> ID：528981
> 
> 赞同：1
> 
> 时间：2009-02-09T16:59:41.153
> 
> 标签：c#, asp.net

我在主机页面的 Oninit 中动态加载 UC。

在 UC 的 Oninit 中，我提出了一个事件。我得到一个空引用异常。代码如下：

```
//In the UC

public event CommandEventHandler DoneProcessing;
protected override void OnInit(EventArgs e)
{
      //Raise a event
      CommandEventArgs cmdEventArgs = new CommandEventArgs("done", "test");
      DoneProcessing(this, cmdEventArgs);
} 
```

当我在页面加载而不是 Oninit 中引发事件时，它可以正常工作，但我不能这样做，因为我必须加载子控件并且要让事情正常工作（视图状态等），我需要在 OnInit 上执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-09T17:09:12.503

我相信您正在尝试进行[Event Bubbling](http://msdn.microsoft.com/en-us/library/aa719644(VS.71).aspx)。这是[代码引用的颂歌，](http://www.odetocode.com/code/94.aspx)称为 ASP.NET (C#) 中 Web 用户控件的事件冒泡

如前所述，我怀疑您可以通过使用标准来停止错误

```
if (DoneProcessing != null) 
    DoneProcessing(this, cmdEventArgs); 
```

但是我认为问题的根源仍然与页面加载方式有关。它周围有一些技巧，但“正确”（或推荐）的方法是事件冒泡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-09T17:06:33.053

最好的做法是在引发事件之前始终进行空检查，以防没有处理程序。

```
if (DoneProcessing != null) {
    DoneProcessing(this, cmdEventArgs);
} 
```

# visual-studio-2008 - 我怎样才能知道哪些类方法没有被使用？

> ID：528992
> 
> 赞同：1
> 
> 时间：2009-02-09T17:02:01.553
> 
> 标签：visual-studio-2008, methods

随着时间的推移，我倾向于创建对我不再有用的方法。我想我已经把我所有的代码都从他们身上移走了，但也许没有。或者，也许代码引用了旧方法并且一切正常，直到我遇到让我创建新方法的特殊事物。

除了在每种方法上使用 find 之外，还有什么方法可以查看在哪里使用了什么？

我想删除我没有使用的方法。谢谢。

我正在使用 Visual Studio 2008 Express。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-02-09T17:05:56.583

右键单击方法名称时，可以在上下文菜单中选择“查找所有引用”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-09T17:04:52.233

我有时这样做的一种方法是将原型留在类定义中，然后删除实现（用`#if 0`and包围它们`#endif`），然后构建您的应用程序。链接器将列出它需要查找的所有方法以及调用它们的位置。任何未列出的方法都不会被任何人调用。

请注意，这并不特定于 Visual Studio，它适用于任何 C/C++ 项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-09T17:07:19.683

像我这样简单、愚蠢的人使用的简单、愚蠢的方法：

将 XX 添加到每个方法名称，如 FooXX，然后编译。

当编译器说 Foo 丢失时，从 Foo 中删除 XX。继续这样做，直到您不再丢失参考文献。

然后删除任何名称中带有 XX 的方法。

但“查找所有参考资料”方法更好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-09T17:08:47.747

如果您使用的是托管语言，则无法确定肯定会使用的所有功能。您可以为代码中的每个函数执行“查找所有引用”，这将使您对代码中显式和静态绑定的每个函数具有高度的信心。

然而，反射确实给方程式带来了麻烦。它允许在运行时绑定函数，并且没有可靠的方法在代码中搜索它。选择方法名称的字符串甚至可以是用户提供的值。

C++ 在这里真的好不到哪里去。一个方法可以通过使用指针魔法和偏移来非静态地绑定。

简而言之，无论您使用哪种语言，都没有万无一失的方法可以做到这一点。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-09T17:09:53.250

您可以随时将它们注释掉并尝试重新编译。编译器会让您知道缺少什么。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-02-09T17:10:10.410

您可以重命名所有方法（在名称前放置一个 xxx），然后尝试重新编译。对于使用的每种方法，您都会收到错误消息。将关联的方法重命名为正确的名称，然后再次尝试编译。

完成后 - 所有未使用的方法都以“xxx”开头。

您需要这样做几次，因为您可能有未使用的方法调用其他未使用的方法。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-02-09T17:11:42.560

[鲍勃叔叔和工作人员](http://www.objectmentor.com/)有一个很好的练习来解释接口隔离原则，这正是你所需要的。

首先，制作一个空白界面。其次，让你的类实现上述接口。最后，将类的实例更改为接口的实例。编译时，它会显示你需要实现哪些方法，或者换句话说，实际使用了哪些方法。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-02-09T17:04:45.617

在 Visual Studio 中右键单击方法名称并选择 Find Usages？或查找高级用法？

我只是不确定它是基本的 VS 功能还是来自我的 ReSharper。但至少对我来说它在那里：D

# c# - 为什么像 BindingList 或 ObservableCollection 这样的类不是线程安全的？

> ID：528999
> 
> 赞同：24
> 
> 时间：2009-02-09T17:05:28.610
> 
> 标签：c#, .net, thread-safety, observablecollection, bindinglist

一次又一次地，我发现自己不得不编写线程安全版本的 BindingList 和 ObservableCollection，因为当绑定到 UI 时，这些控件不能从多个线程中更改。我想了解的是**为什么**会这样——是设计错误还是故意的？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2009-02-09T17:13:20.573

问题是设计一个线程安全的集合并不简单。当然，设计一个可以从多个线程修改/读取而不会破坏状态的集合很简单。但是设计一个可用的集合要困难得多，因为它是从多个线程更新的。以下面的代码为例。

```
if ( myCollection.Count > 0 ) {
  var x = myCollection[0];
} 
```

假设 myCollection 是一个线程安全的集合，其中添加和更新保证不会破坏状态。此代码不是线程安全的，并且是竞争条件。

为什么？即使 myCollection 是安全的，也不能保证在对 myCollection 的两个方法调用之间不会发生更改：命名为 Count 和索引器。另一个线程可以进来并删除这些调用之间的所有元素。

坦率地说，这种类型的问题使使用这种类型的集合成为一场噩梦。您永远不能让一次调用的返回值影响对集合的后续调用。

**编辑**

我在最近的一篇博客文章中扩展了这个讨论：http: [//blogs.msdn.com/jaredpar/archive/2009/02/11/why-are-thread-safe-collections-so-hard.aspx](http://blogs.msdn.com/jaredpar/archive/2009/02/11/why-are-thread-safe-collections-so-hard.aspx)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-02-09T17:20:58.560

为 Jared 的出色回答添加一点内容：线程安全并非免费提供。许多（大多数？）集合仅在单个线程中使用。为什么这些集合会有性能或功能损失来应对多线程情况？

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-14T23:48:54.990

从所有其他答案中收集想法，我认为这是解决您的问题的最简单方法：

改变你的问题：

> “为什么X班不理智？”

到

> “在 X 班上做这件事的明智方法是什么？”

1.  在类的构造函数中，在创建可观察集合时获取当前调度程序。因为，正如您所指出的，需要在**原始**线程上进行修改，这可能不是*主*GUI 线程。所以**App.Current.Dispatcher**并不总是正确的，并不是所有的类都有**this.Dispatcher**。

    ```
    _dispatcher = System.Windows.Threading.Dispatcher.CurrentDispatcher;
    _data = new ObservableCollection<MyDataItemClass>(); 
    ```

2.  使用调度程序调用需要原始线程的代码部分。

    ```
    _dispatcher.Invoke(new Action(() => { _data.Add(dataItem); })); 
    ```

那应该对你有用。尽管在某些情况下您可能更喜欢**.BeginInvoke**而不是**.Invoke**。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-09T20:21:24.473

如果您想发疯 -[这是](http://groups.google.com/group/microsoft.public.dotnet.languages.csharp/browse_thread/thread/214e55884b16f4d9#f12a3c5980567f06)一个`ThreadedBindingList<T>`自动在 UI 线程上返回通知的方法。但是，一次只有一个线程进行更新等仍然是安全的。******`*****