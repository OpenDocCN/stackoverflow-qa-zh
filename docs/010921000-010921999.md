# StackOverflow 问答 10921000-10921999

# php - MYSQL - 如何比较匹配类别的多列

> ID：10921002
> 
> 赞同：0
> 
> 时间：2012-06-06T19:38:55.613
> 
> 标签：php, mysql, multiple-columns

我有一个名为 PRODUCTS 的表，其中包含三个不同类别的 3 列，我想选择在 3 列中的任何一个中具有 3 个值中的任何一个的所有产品。我想要做的是根据 3 个类别中的任何一个显示相关产品。

示例表：

> ID,名称,cat1,cat2,cat3
> 
> 1,键盘,2,8,4
> 2,鼠标,2,NULL,NULL
> 3,显示器,16,2,NULL

假设我正在查看 ITEM id=1，我想做一个查询以显示在 3 列中的任何一个中具有类别编号 2 的其他 2 个产品。

我怎么做？

非常感谢，安德烈斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T19:42:57.680

```
SELECT * FROM table_name WHERE id != 1 AND (cat1 = 2 OR cat2 = 2 OR cat3 = 2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T19:44:44.883

那么，对于任何给定的 ID，在他们的类别中找到与所选 ID 具有相同类别的其他“兄弟姐妹”？

从产品 p1、产品 p2、产品 p3中选择 id 作为 selected_id，p1.cat 作为 p1_cat，p2.cat 作为 p2_cat，p3.cat 作为 p3_cat
其中
p1.cat = p2.cat
和
p1.cat = p3.cat
// 和其他各种限定条件，例如，它不是重复
p1.id != p2.id
p1.id != p3.id
p2.id != p3.id
等
// 你也可以这样做`join products p3 on p3.cat = p1.cat`而不是 // 我做的冗长方式它

顺便说一句，这在性能方面是个坏主意。最好以编程方式完成，而不是在 SQL 中。任何时候你处理像这样的游标查询，只需在代码中使用数组，而不是在 SQL 中

# r - 用R在网格中选择几何形状内的点

> ID：10921015
> 
> 赞同：1
> 
> 时间：2012-06-06T19:39:48.237
> 
> 标签：r, plot, geometry

这是我的问题。我有一个使用以下代码构建的超立方体：

```
X <- seq (-1/sqrt(2),1/sqrt(2),length.out=100)
Y <- seq (-sqrt(2)/(2*sqrt(3)),sqrt(2)/sqrt(3),length.out=100)
Z <- seq (-1/(2*sqrt(3)),sqrt(3)/2,length.out=100)
grid <- data.frame (expand.grid(X=X,Y=Y,Z=Z)) 
```

然后，我将从网格 data.frame 中删除所有不在由以下坐标定义的四面体内的点：

```
w : (0,0,sqrt(3)/2)
x : (0,sqrt(2)/sqrt(3),-1/(2*sqrt(3)))
y : (-1/sqrt(2),-sqrt(2)/(2*sqrt(3)),-1/(2*sqrt(3)))
z : (1/sqrt(2),-sqrt(2)/(2*sqrt(3)),-1/(2*sqrt(3))) 
```

如果没有非常长的代码，我找不到这样做的方法。谁能帮帮我谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:13:51.233

包`ptinpoly`具有`pip3d`查找点是否在多面体中的功能。

```
library(ptinpoly)
X <- seq(-1/sqrt(2),1/sqrt(2),length.out=10)  #I used a smaller dataset here
Y <- seq(-sqrt(2)/(2*sqrt(3)),sqrt(2)/sqrt(3),length.out=10)
Z <- seq(-1/(2*sqrt(3)),sqrt(3)/2,length.out=10)
# The query points has to be inputted as a matrix.
grid <- as.matrix(expand.grid(X=X,Y=Y,Z=Z))

w <- c(0,0,sqrt(3)/2)
x <- c(0,sqrt(2)/sqrt(3),-1/(2*sqrt(3)))
y <- c(-1/sqrt(2),-sqrt(2)/(2*sqrt(3)),-1/(2*sqrt(3)))
z <- c(1/sqrt(2),-sqrt(2)/(2*sqrt(3)),-1/(2*sqrt(3)))
# The matrix of vertices
tetra_vert <- matrix(c(w,x,y,z),byrow=TRUE,nrow=4)
# The matrix of faces (each row correspond to a vector of vertices linked by a face.
tetra_faces <- matrix(c(1,2,3,
                        1,2,4,
                        1,3,4,
                        2,3,4),byrow=TRUE,nrow=4)
inout <- pip3d(tetra_vert, tetra_faces, grid) 
```

结果是一个整数向量，`0`表示点落在一个面上，`1`即它在多面体内部，`-1`在外部。

因此，您的问题的解决方案是：

```
grid[inout%in%c(0,1),] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T19:43:39.570

制作形成四面体的平面，并比较一个点是否在每个平面的右侧。

指点：考虑用平面法线等计算点积。一种选择是从四面体点到每个角绘制一个向量，总共 4 个和从点到点的 1 个向量，然后使用点积等来查看点-点向量是否在其他 4 个向量内。

如果指向它的向量可以表示为角向量的非负倍数和足够短的向量的总和，则该点可能在四面体内。

# java - 让我的 scrollPane 在程序控制下滚动

> ID：10921024
> 
> 赞同：1
> 
> 时间：2012-06-06T19:40:39.010
> 
> 标签：java, groovy, swingbuilder

我有一个 Groovy 应用程序，它使用通过 swing builder 构建的 scrollPane：

```
BinsicWindow(def controller)
{
    controlObject = controller
    swinger = new SwingBuilder()
    mainFrame = swinger.frame(
        title: "Binsic is not Sinclair Instruction Code",
        size:[640, 480],
        show:true,
        defaultCloseOperation: WindowConstants.DISPOSE_ON_CLOSE){
        scrollPane(autoscrolls:true) {
            screenZX = textArea(rows:24, columns:32) {visble:true}
        }
        screenZX.setFont(new Font("Monospaced", Font.PLAIN, 18))
    }
} 
```

我以编程方式将文本添加到 textArea（即没有用户输入），并且我希望 textArea 在添加内容时自动向下滚动。但是视图仍然固定在顶部，我只能通过拖动鼠标看到底部（一旦屏幕已满）。

我可以解决这个问题吗？我一直在寻找这个问题的答案一段时间，但一无所获。抱歉，如果这是一个简单的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T20:35:41.253

以下行应将您的 textarea 滚动到最后一个文本位置：

```
rect = screenZX.modelToView(screenZX.getDocument().getLength() - 1);
screenZX.scrollRectToVisible(rect); 
```

# c++ - 将 Fortran 用户定义类型转换为 C++ 类

> ID：10921031
> 
> 赞同：1
> 
> 时间：2012-06-06T19:41:08.887
> 
> 标签：c++, fortran, converter

有没有工具可以为我处理这个问题？我正在使用英特尔 Fortran 编译器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T11:53:04.940

我不太清楚你所说的“转换”是什么意思，但[FortWrap](http://fortwrap.sourceforge.net/)的一个主要特性是：“生成的包装器代码提供了一个 C++ 接口，它用 C++ 代理类包装了 Fortran 派生类型。” 所以这可能是你正在寻找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T19:44:49.047

您可以查看[Fable](http://cci.lbl.gov/fable/)，因为它很可能是您要查找的内容。

# android - 如何使用 Robotium 单击微调器中的第一个项目？

> ID：10921036
> 
> 赞同：1
> 
> 时间：2012-06-06T19:41:15.983
> 
> 标签：android, spinner, robotium

我在微调器中向上滚动以选择 Robotium 测试用例中的第一项时遇到问题。这是我的代码：

```
int pos = solo.getCurrentSpinners().get(0).getSelectedItemPosition();
solo.pressSpinnerItem(0, 0 - pos); 
```

当我调试时，pos 是 1，但是即使我命令它按下 -1，Robotium 仍然按下索引 1 上的微调器。我究竟做错了什么？

谢谢马库斯

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-06-14T16:44:57.590

看来他们现在把这些课都带走了。我自己也遇到了这个问题，但找到了一种正确且通用的方法。

```
// 0 is the first spinner in the layout
View view1 = solo.getView(Spinner.class, 0);
solo.clickOnView(view1);
solo.scrollToTop(); // I put this in here so that it always keeps the list at start
// select the 10th item in the spinner
solo.clickOnView(solo.getView(TextView.class, 10)); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-06T20:02:51.263

您是否只能获取视图并调用执行单击它？

```
solo.getCurrentSpinners().get(0).performClick() 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-12-11T08:12:06.463

在这里与 Robotium 一起使用的 API 相当不稳定，所以我决定采用直接 API 路线：

```
instrumentation.runOnMainSync(new Runnable() {
    @Override
    public void run() {
        Spinner spinner = (Spinner) solo.getView(resourceId);
        spinner.setSelection(position, true);
    }
}); 
```

这不会显示 Spinner 的弹出窗口，但会选择所需的项目。

# javascript - 使用 keyup() 设置变量

> ID：10921037
> 
> 赞同：1
> 
> 时间：2012-06-06T19:41:22.117
> 
> 标签：javascript, jquery

我正在尝试使用 keyup() 方法在输入字段上获取信用卡号，但是当我在控制台中键入变量名时，我变得不确定。然而，当我在字段中输入数字时，数字将被记录到控制台。

```
$('#authorizenet_cc_number').keyup(function(){
        var ccNum =  $('#authorizenet_cc_number').val();
        console.log(ccNum);       
  }); 
```

我的理解是错误的，当输入中的值发生变化时，它存储在 ccNum 变量中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T19:44:14.833

ccNum 是函数的局部变量，因此除非您在函数中插入断点，否则它将是未定义的。

您还可以添加调试器，这将导致发生中断。然后您可以使用控制台查看 ccNum 的值。

```
$('#authorizenet_cc_number').keyup(function(){
        var ccNum =  $('#authorizenet_cc_number').val();
        console.log(ccNum);  
        debugger;     
  }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T19:47:22.793

`ccNum`的范围对于 keyup 处理程序匿名函数是本地的。如果您想从更高的范围访问它，请将其置于更高的范围内。

```
var ccNum; // declaration in an outer scope

$('#authorizenet_cc_number').keyup(function(){
    // no need to reselect on the input, just use "this"
    ccNum = $(this).val(); // initialization in an inner scope
    console.log(ccNum); // logs the value
});

console.log(ccNum); // also logs the value (if called after the handler has fired) 
```

# xcode - UIKIT 错误字符串

> ID：10921040
> 
> 赞同：1
> 
> 时间：2012-06-06T19:41:35.117
> 
> 标签：xcode, debugging, crash-log

我在我的应用程序中使用 Crashlytics。以下是我很难通过的崩溃日志...

我得到错误

> 哇！太低级了……！24 小时 59 分钟是最大计时器间隔，现在...

这是一个与 UIKIT 相关的错误。

关于如何修复它的任何建议？

```
 ...
CoreFoundation  
__exceptionPreprocess + 162
1    libobjc.A.dylib    
objc_exception_throw + 32
2    CoreFoundation 
+[NSException raise:format:]
3    Foundation 
-[NSAssertionHandler handleFailureInMethod:object:file:lineNumber:description:] + 90
4    UIKit  
-[UIDatePickerView _updateRowInColumn:toValue:withRepeatingAmount:element:animated:] + 538
5    UIKit  
-[UIDatePickerView _loadDateAnimated:] + 264
6    UIKit  
-[UIDatePickerView _updateBitsForDate:forced:andReload:animateIfNeeded:] + 696
7    UIKit  
-[UIDatePickerView _setDate:animated:forced:] + 348
8    UIKit  
-[UIDatePickerView setDate:animated:] + 30
9    UIKit  
-[UIDatePicker setDate:] + 36
10   App ✭   EditAccountViewController.m line 571
-[EditAccountViewController textFieldDidBeginEditing:] + 571
11   UIKit  
-[UITextField _becomeFirstResponder] + 402
12   UIKit  
-[UIResponder becomeFirstResponder] + 336
13   UIKit  
-[UITextInteractionAssistant setFirstResponderIfNecessary] + 174
14   UIKit  
-[UITextInteractionAssistant oneFingerTap:] + 1608
15   UIKit  
_UIGestureRecognizerSendActions + 106
16   UIKit  
-[UIGestureRecognizer _updateGestureWithEvent:] + 304
17   UIKit  
___UIGestureRecognizerUpdate_block_invoke_0541 + 48
18   UIKit  
_UIGestureRecognizerApplyBlocksToArray + 176
19   UIKit  
_UIGestureRecognizerUpdate + 898
20   UIKit  
_UIGestureRecognizerUpdateGesturesFromSendEvent + 28
21   UIKit  
-[UIWindow _sendGesturesForEvent:] + 774
22   UIKit  
-[UIWindow sendEvent:] + 88
23   UIKit  
-[UIApplication sendEvent:] + 356
24   UIKit  
_UIApplicationHandleEvent + 5826
25   GraphicsServices   
PurpleEventCallback + 882
26
...
CoreFoundation  
__CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 38
32   UIKit  
UIApplicationMain + 1080
33   App     main.m line 15
main + 15
34   App    
 start 
```

该应用程序告诉我崩溃正在发生的行如下

```
_birthDatePicker.date = _birthDate; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T23:33:07.510

尝试使用像 TestFlight 或 Crittercism 这样的崩溃报告器，它可以让您在崩溃报告中添加事件跟踪 - 它对让我重现崩溃非常有帮助：

[https://www.crittercism.com/developers/docs-optional#breadcrumb_trails](https://www.crittercism.com/developers/docs-optional#breadcrumb_trails)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-20T04:41:34.240

这被苹果确认为他们的错误。

# datetime - 如何使用 GnuPlot 从存储在单独列中的 CSV 文件日期和时间绘制时间序列图？

> ID：10921043
> 
> 赞同：13
> 
> 时间：2012-06-06T19:41:45.257
> 
> 标签：datetime, csv, gnuplot

让我们把它作为数据文件：

```
2012-06-01, 01:00, 1
2012-06-01, 02:00, 2
2012-06-01, 03:00, 4
2012-06-01, 04:00, 3
...
2012-06-02, 01:00, 5
2012-06-02, 02:00, 2
2012-06-02, 03:00, 1
2012-06-02, 04:00, 1
... 
```

我知道当日期和时间用单个字段表示时如何设置`timefmt`和绘制时间序列，但是当时间和日期存储在单独的列中时如何用 GnuPlot 绘制它？`xdata`

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-06T20:03:26.157

如果它们是空格，则与您不会有太大不同...

```
set timefmt '%Y-%m-%d, %H:%M'
set xdata time
set datafile sep ','
plot 'test.dat' u 1:3 w lines 
```

我不知道您之前是否使用过带有空格的 timefmt（对于常规空格分隔的数据文件），但在这种情况下，您可以指定时间数据开始的列——gnuplot 会自动查看它需要的多少列填写全日制格式。当然，您需要一个完整的使用规范（在这种情况下，这意味着指定数据位于第 3 列——请注意，而不是您可能期望的第二列）。

（在 gnuplot 4.4 上测试——OS X）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-09T01:46:21.447

运行 Arch Linux Gnuplot 4.6 补丁级别 3

我无法让 mgilson 的代码片段工作。我需要`xrange`在它停止抱怨之前设置

```
all points y value undefined! 
```

我不得不

```
set xrange["2012-06-01, 01:00":"2012-06-02, 05:00"] 
```

最后得到了一个漂亮的情节

# windows - 从批处理文件启动 .exe 时奇怪的命令提示符挂起

> ID：10921047
> 
> 赞同：1
> 
> 时间：2012-06-06T19:41:57.857
> 
> 标签：windows, batch-file, dos, bit

我喜欢尽可能多地移植程序/应用程序，因此我会定期创建自动执行的 SFX 存档，将其提取到`%temp%`然后运行选定的文件（通常是原始的 .exe 或，如果需要，一个 .bat 文件）。

我正在尝试将应用程序的 x86 和 x64 版本合并为一个版本，因为我不喜欢有 2 个文件。因此，我有 2 个文件夹（“x86”和“x64”），其中包含不同版本的程序和根目录中的 .bat 文件，它将检查用户的位数，然后启动适当的版本。不过，我有一些问题。

这是我的代码：

**检查并运行.bat**

```
@echo off
goto Payload

:Payload
    echo Checking architecture bit-type...

    IF EXIST "%systemRoot%\SysWOW64" (
        echo Your version of Windows is 64-bit [x64]
        start "x64\GCFScape.exe" >nul
    ) ELSE (
        echo Your version of Windows is 32-bit [x86]
        start "x86\GCFScape.exe" >nul
    )

    echo.
    echo Starting the appropriate version...

    goto End

:End
    echo.
    echo This window will close in 20 seconds.
    ping localhost -n 21 >nul
    exit 
```

如果我使用`start`，那么原始命令窗口将根据需要正确退出，但会打开一个新的、恒定的命令窗口，并且应用程序不会启动。

如果我不使用`start`该应用程序*将*启动，但命令窗口将保持打开状态，并且不会超过用于启动 .exe 的代码行。如果我关闭应用程序本身，则命令窗口将正常执行`exit`命令并成功关闭。

有没有办法解决这个问题？我以前从来没有遇到过这种问题。

这是我的 Dropbox 中 SFX 存档的链接，如果有人想亲自看看环境和效果：[https ://dl.dropbox.com/u/27573003/Social%20Distribution/gcfscape182.exe](https://dl.dropbox.com/u/27573003/Social%20Distribution/gcfscape182.exe)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T20:09:52.087

START 命令的文档说引号中的第一个参数将是窗口的标题。所以，试试这个：

```
start /B "GCFScape" "x64\GCFScape.exe">nul 
```

# javascript - 如何使用 Wordpress 图库代码正确调整图片大小？

> ID：10921048
> 
> 赞同：1
> 
> 时间：2012-06-06T19:41:58.213
> 
> 标签：javascript, wordpress, gallery

我正在使用 wordpress 本机画廊来显示图片库。[http://codex.wordpress.org/Gallery_Shortcode](http://codex.wordpress.org/Gallery_Shortcode) 我的问题是在缩略图库中，它没有显示完整的图片。它会**剪切**图片的一小部分并在图库中显示为缩略图。当我点击图片时，它会显示完整版。我上传了两个状态以便您更好地理解 ![在此处输入图像描述](../Images/e28d8abc02d9bf877c3b2b90e13f5470.png)

![在此处输入图像描述](../Images/6c9a60def9b932e893524e4e9ffb16a3.png)

如您所见，全图与缩略图不同。我怎么解决这个问题 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T20:55:23.353

默认情况下，Wordpress 会裁剪小缩略图。要更改此行为，请转到：

设置 -> 媒体，并取消选中将缩略图裁剪为精确尺寸（通常缩略图是成比例的）。请注意，这意味着您的新缩略图不会完全固定在 150x150 像素的框中。

要重新生成缩略图，您可以使用：[http](http://wordpress.org/extend/plugins/regenerate-thumbnails/) ://wordpress.org/extend/plugins/regenerate-thumbnails/ regenerate plugin。

# git - Git Push 上的 JSHint（更新挂钩）

> ID：10921050
> 
> 赞同：2
> 
> 时间：2012-06-06T19:42:15.237
> 
> 标签：git, githooks

当客户端推送到远程 git 存储库（裸机）时，我想要一个钩子，它会在传入的更改文件上自动运行 JSHint，如果 JSHint 返回错误，则拒绝提交。我只关心确保主分支符合我们的 JSHint 配置。所以我有这个脚本：

```
#!/bin/bash

# --- Command line
refname="$1"
oldrev="$2"
newrev="$3"
branch=${refname#refs/heads/}

echo ${refname}
echo ${oldrev}
echo ${newrev}
echo ${branch}

if [ "$branch" == "master" ]
then
  echo "Need to JSHint" >&2
  exit 1
fi

# Not updating master
exit 0 
```

我想我有两个问题：

1.  如何获取推送中已更改的文件列表？
2.  如何将这些文件传递给 JSHint？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T22:16:37.953

我不相信这是完成任务的最佳方式。基本上，代码在 repo 中生成每个 JavaScript 文件的文件，然后分别调用 JSHint。奖励它实际上使用项目的 .jshintrc 文件（如果存在）。[也在要点上](https://gist.github.com/2884935)

任何建议，指针，替代品？？？

```
#!/bin/bash

# --- Command line
refname="$1"
oldrev="$2"
newrev="$3"
branch=${refname#refs/heads/}

# Make a temp directory for writing the .jshintrc file
TMP_DIR=`mktemp -d`
EXIT_CODE=0

# If commit was on the master branch
if [ "$branch" == "master" ]
then
  # See if the git repo has a .jshintrc file
  JSHINTRC=`git ls-tree --full-tree --name-only -r HEAD -- | egrep .jshintrc`

  JSHINT="jshint"
  if [ -n "$JSHINTRC" ]
  then
    # Create a path to a temp .jshintrc file
    JSHINTRC_FILE="$TMP_DIR/`basename \"$JSHINTRC\"`"

    # Write the repo file to the temp location
    git cat-file blob HEAD:$JSHINTRC > $JSHINTRC_FILE

    # Update the JSHint command to use the configuration file
    JSHINT="$JSHINT --config=$JSHINTRC_TMP_DIR/$JSHINTRC"
  fi

  # Check all of the .js files
  for FILE in `git ls-tree --full-tree --name-only -r ${newrev} -- | egrep *.js`; do
    FILE_PATH=`dirname ${FILE}`
    FULL_PATH=${TMP_DIR}/${FILE_PATH}
    mkdir -p ${FULL_PATH}
    git cat-file blob ${newrev}:${FILE} > "$TMP_DIR/$FILE"
    ${JSHINT} ${TMP_DIR}/${FILE} >&2
    # Exit status of last command
    EXIT_CODE=$((${EXIT_CODE} + $?))
    if [[ $EXIT_CODE -ne 0 ]]
    then
      rm -rf ${TMP_DIR}
      exit $EXIT_CODE
    fi
  done
  rm -rf ${TMP_DIR}
fi

# Not updating master
exit 0 
```

# hudson - 运行时的 Jenkins/Hudson 作业参数？

> ID：10921055
> 
> 赞同：2
> 
> 时间：2012-06-06T19:43:00.343
> 
> 标签：hudson, jenkins, hudson-plugins, jenkins-plugins

**问题**

假设我有一个 jenkins/hudson 工作（例如自由式），它需要两个参数**PARAM_ONE**和**PARAM_TWO**。现在，我不知道这些参数的值，但我可以运行一些脚本（perl/shell）来查找这些参数的值，然后我希望用户从下拉列表中进行选择，然后我可以开始构建。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T20:14:08.417

听起来您已经找到了一个可以满足您需要的插件，它与内置的*参数化构建*功能非常相似。

要回答您的第二个问题：当您定义参数化构建时，参数通常作为环境变量传递给您的工作。因此，您可以访问它们，但是您可以使用您的语言访问环境变量，例如，如果您定义了一个 parameter `PARAM_ONE`，您可以通过以下方式访问它：

在 bash 中：

```
$PARAM_ONE 
```

在 Windows 批处理中：

```
%PARAM_ONE% 
```

在 Python 中：

```
import os
os.getenv('PARAM_ONE') 
```

等等

我想这对于您正在使用的扩展选择参数插件来说是一样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-30T11:26:41.867

只需安装[这个](https://github.com/tekante/Dynamic-Jenkins-Parameter/wiki)，并在构建脚本中提供参数，如：

视窗

> “你的构建脚本” %PARAMON% %PARAMTWO%

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-07T23:52:04.513

在 Java 中，您可以从运行对象访问这些参数

```
EnvVars envVars = new EnvVars();
envVars = run.getEnvironment(listener);
for (String envName2 : envVars.keySet()) {
   listener.getLogger().println(envName2 + " = " + envVars.get(envName2));
} 
```

# svn - SVN 提交不更新

> ID：10921057
> 
> 赞同：16
> 
> 时间：2012-06-06T19:43:13.653
> 
> 标签：svn, merge, commit

我的同事检查了一些我知道是错误的文件。我希望能够替换它们并将我的本地旧副本提交回存储库。但是，SVN 不允许我在没有运行更新的情况下提交这些文件。

我担心这可能会导致自动合并并弄乱我的本地“好”副本。一世

无论如何，我可以在不更新的情况下提交我的版本吗？[非常不鼓励](https://stackoverflow.com/questions/1273113/update-from-svn-without-merging-automatically)非自动合并。什么是替代方案？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-06T19:44:50.797

将修改后的文件复制到一边，更新，将修改后的文件复制回来，提交。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T19:48:43.940

如果您拥有正确的权限，您可以进入并从 repo 中删除无效文件。[在此处查看命令行文档](http://svnbook.red-bean.com/nightly/en/svn.branchmerge.basicmerging.html#svn.branchmerge.basicmerging.undo)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T19:45:36.033

您可以使用 Turtoise 连接到 SVN 并小心删除您想要的内容。

# regex - 正则表达式匹配数字和小数

> ID：10921058
> 
> 赞同：14
> 
> 时间：2012-06-06T19:43:17.973
> 
> 标签：regex

我需要一个匹配以下内容的正则表达式：

```
.5
0.5
1.5
1234 
```

但不是

```
0.5.5
absnd (any letter character or space) 
```

我有这个满足所有但`0.5.5`

```
^[.?\d]+$ 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-06T19:48:15.953

这是一个相当普遍的任务。我知道的最简单的处理方法是：

```
^[+-]?(\d*\.)?\d+$ 
```

还有其他复杂性，例如您是否要允许前导零或逗号或类似的东西。这可以像您希望的那样复杂。例如，如果你想允许 1,234,567.89 格式，你可以这样做：

```
^[+-]?(\d*|\d{1,3}(,\d{3})*)(\.\d+)?\b$ 
```

有一个分词，但我`\b`将其用作一种偷偷摸摸的方式，要求字符串末尾至少有一个数字。这样，空字符串或单个字符串`+`将不匹配。

但是，请注意，**正则表达式不是解析数字字符串的理想方式。**我所知道的所有现代编程语言都有快速、简单、内置的方法来做到这一点。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-12-14T17:24:27.020

这是一个更简单的解决方案，它不使用任何前瞻或后瞻：

```
^\d*\.?\d+$ 
```

要清楚地理解为什么会这样，请从右到左阅读：

*   最后至少需要一位数字。
    `7`有效
    `77`有效
    `.77`有效
    `0.77`无效 空字符串
    `0.`无效

*   数字前的单个句点是可选的。
    `.77`有效
    `77`有效
    `..77`无效

*   （可选）句点之前的任意位数。 `.77`作品
    `0.77`作品
    `0077.77`作品作品
    `0077`作品

不使用前瞻和后瞻的额外好处是不必担心基于 RegEx 的 DOS 攻击。

高温高压

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-06-06T19:50:43.677

似乎没有人考虑负数。此外，有些人正在创建一个不必要的捕获组。这是IMO最彻底的解决方案。

```
^[+-]?(?:\d*\.)?\d+$ 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-06T19:48:19.913

以下应该有效：

```
^(?!.*\..*\.)[.\d]+$ 
```

这使用负前瞻来确保`.`字符串中的字符少于两个。

[http://www.rubular.com/r/N3jl1ifJDX](http://www.rubular.com/r/N3jl1ifJDX)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-06T19:48:01.593

这可以工作：

```
^(?:\d*\.)?\d+$ 
```

# xcode - 如何以恒定的 5 度旋转在手指下旋转 UIImageview？

> ID：10921062
> 
> 赞同：2
> 
> 时间：2012-06-06T19:43:38.790
> 
> 标签：xcode, uiimageview, touch, image-rotation, touchesmoved

我正在制作一个可以由用户控制的时钟。我有一个名为**minhandview**（时钟的分针）的 UIImagview。当用户继续旋转它时，我想在我的手指下旋转它（它应该跟踪手指运动），并**持续旋转 5 度**。我正在使用以下代码

```
- (void) touchesMoved:(NSSet *)_touches withEvent:(UIEvent *)_event 
```

{

```
UITouch *touch=[[_event allTouches]anyObject];
CGPoint pt = [touch locationInView:self.view];

if([touch view]==minhandview)
{

    minhandview.transform = CGAffineTransformRotate(minhandview.transform, Degrees2Radians(5));
} 
```

}

每次调用此方法时，图像都会旋转 5 度，但它没有跟随我的手指（旋转到快速）我该如何纠正它？请帮忙。谢谢

# visual-studio-2010 - 奇怪的 Visual Studio 2010 行为 - 不将 dll 复制到 bin

> ID：10921070
> 
> 赞同：1
> 
> 时间：2012-06-06T19:43:54.520
> 
> 标签：visual-studio-2010, visual-studio

我希望其他人遇到过这个，因为它让我发疯。

我最近买了一台新笔记本电脑，所以我一直在设置我的 Visual Studio 解决方案（带有 .NET 4.0 的 VS2010），这是我从旧机器上保存下来的。其中之一是一个简单的控制台应用程序，我用它来模拟一些用于测试的东西。它引用了我现在正在研究的另一个解决方案中的 2 个程序集。这过去一切正常，但自从搬到新机器后，我得到了可怕的“找不到类型或命名空间名称'YourAssembly'（您是否缺少 using 指令或程序集引用？”错误消息。引用在 Visual Studio 中清楚地显示，但是当项目构建时，它不会将它们复制到解释消息的 bin 目录中。最初，我只是像任何 3rd 方 dll 一样引用 dll，但我什至尝试删除它并将项目文件包含在我的解决方案中并以这种方式引用它们，但仍然失败。我已经验证了 dll 的“复制本地”属性设置为 true，并且确实如此。这真的很奇怪，因为该项目引用了其他几个只是 3rd 方程序集的 dll（例如 NLog、GData 等），并且由于某些奇怪的原因，这些都可以很好地复制，但不是这两个。

这是另一件奇怪的事情。如果我向控制台应用程序添加一些引用我的程序集的代码，它会说它找不到它。如果我然后将程序集重新添加到引用中，错误就会消失，直到我尝试再次构建它然后它返回。这是VS错误还是什么？我以前从未见过这种奇怪的行为。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T20:25:01.307

我看到的一个案例导致了您所说的问题：

包括对内部构建的 dll 的引用，链接到特定版本的 dll。获取 dll 的新副本（具有不同的版本号）并且构建中断。

这种情况下的解决方案是将 DLL 引用属性设置`Specific Version`为 false。dll 的版本被忽略（在我的情况下，忽略它是安全的），并且构建工作正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T20:48:00.587

1.  我也遇到过类似这样的奇怪错误，其中 NTFS 权限是在使用旧登录名的旧文件上设置的，但新机器不喜欢旧权限。
2.  此外，有时旧的 .sln 或 .csproj 文件指的是您似乎无法在 VStudio 中编辑的奇怪文件路径。尝试使用记事本打开这些文件并确保路径没有损坏。您通常可以使用固定路径进行编辑和保存，然后一切都会恢复正常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T11:56:46.100

汉斯有上面的答案，但我无法通过搜索找到那个帖子，所以希望如果你偶然发现这个问题，我可以为你节省几个小时的挫败感。

由于某些奇怪的原因，“目标框架”在项目属性中默认为“.NET Framework 4 - 客户端配置文件”。我仔细检查过，每当我创建一个新的控制台应用程序时，它似乎都会这样做。它必须与VS中的版本相关，因为我在2010年之前没有遇到过这个问题。

修理：

1.  右键单击您的项目，选择属性
2.  在主应用程序选项卡下，将目标框架设置为您选择的框架，但不是“客户端配置文件”选项之一
3.  正常保存和构建

# jquery - 为什么我的 POST 变量显示在 URL 字符串上？

> ID：10921072
> 
> 赞同：8
> 
> 时间：2012-06-06T19:44:02.060
> 
> 标签：jquery, ajax, url, post

我已经实现了一个基于按钮单击的 ajax 发布功能。代码是

```
$.ajax({
    type: "POST",
    url: "includes/phpscripts?action=manage",
    data: {location: loc, lat: latitude, lon: longitude, heading: head, filename: file},
    success: function(){
      $("#panoInfo").html("<div id='message'></div>");
      $("#message").html("Valid Submission");
  }
}); 
```

我指定了 POST 方法，因为我不希望变量通过 URL 可见。然而，他们是。

我发帖前的测试网址是

```
http://localhost/JMCTour/buildtour.php 
```

然后

```
http://localhost/JMCTour/buildtour.php?filename=1-prefix_blended_fused.jpg&location=Start+of+Tour&lat=43.682211&long=-70.450705&heading=100&submit=Save 
```

为什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-09-18T23:08:08.180

确保您的表单标签有`method='POST'`

```
<form method='POST'>
...
</form> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-06T20:36:54.833

由于问题中缺乏信息，我在这里做了很多假设。

您的表单很可能看起来像这样：

```
<form>
    <input type="text" name="lon" />
    <input type="text" name="lat" />
    <input type="text" name="heading" />
    <input type="file" name="image" />

    <input type="button" id="submit" value="Submit" />
</form> 
```

我们马上就有问题了，你的文件输入。不能使用 jQuery 的 ajax 方法通过 ajax 发送文件，而不包括在幕后正确处理文件的附加插件或编写代码来提交到隐藏的 iframe 或其他方法（html5？flash？）。

忽略文件输入，这就是您最初的问题所在。

```
$("#submit").click(function(){
    $.ajax(...);
}); 
```

我省略了 ajax 选项，因为它们无关紧要。问题在于，由于表单中的按钮是表单中的最后一个输入并且没有提交按钮，因此它将像提交按钮一样提交表单，除非您阻止该默认操作。如果您不阻止该默认操作，则表单将使用默认类型“GET”提交，因为您没有在表单中设置类型。

要防止点击事件的默认动作，要么返回 false，要么使用`event.preventDefault()`

```
$("#submit").click(function(event){
    event.preventDefault();
    $.ajax(...);
}); 
```

修复文件输入问题可能已经在其他几个 SO 问题中得到解答。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-06T19:47:12.910

来自[jQuery.ajax 的文档](http://api.jquery.com/jQuery.ajax/)（强调我的）：

> **数据**
> 
> 要发送到服务器的数据。如果还不是字符串，则将其转换为查询字符串。它附加到 GET 请求的 url。**请参阅 processData 选项以防止此自动处理。**对象必须是键/值对。如果 value 是一个数组，jQuery 会根据传统设置的值（如下所述）序列化具有相同键的多个值。

因此：

> **processDataBoolean**
> 
> 默认值：真
> 
> 默认情况下，作为对象（从技术上讲，除了字符串之外的任何内容）传入 data 选项的数据将被处理并转换为查询字符串，适合默认的内容类型“application/x-www-form-urlencoded” . 如果要发送 DOMDocument 或其他未处理的数据，请将此选项设置为 false。

# google-app-engine - 迭代 Jinja2 中的对象？

> ID：10921073
> 
> 赞同：11
> 
> 时间：2012-06-06T19:44:02.443
> 
> 标签：google-app-engine, jinja2

我在 Google App Engine 上使用 Jinja2。我有一个呈现通用模板的 ListView。目前，我不确定我想要显示什么，所以我只想显示模型的每个属性。

有没有办法遍历对象以在表格单元格中输出每个对象？

例如：

```
{% for record in records %}
<tr>
{% for attribute in record %}
<td>{{ attribute }}</td>
{% endfor %}
</tr>
{% endfor %} 
```

任何建议表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2014-03-26T14:37:05.860

在上下文中设置`getattr`是一个坏主意（并且已经有内置的 filter [`attr`](http://jinja.pocoo.org/docs/dev/templates/#attr)）。Jinja2 提供[类似 dict](http://jinja.pocoo.org/docs/dev/templates/#notes-on-subscriptions)的属性访问。

我想你应该这样做：

```
{% for record in records %}
    <tr>
    {% for attribute in record.properties() %}
        <td>{{ record[attribute] }}</td>
    {% endfor %}
    </tr>
{% endfor %} 
```

这个更好...

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-06T20:09:54.847

这将在简单的 python 代码中实现：

```
for attribute in record.properties():
    print '%s: %s' % (attribute, getattr(record, attribute)) 
```

您可以将**getattr**函数放在上下文中，以便在 jinja2 中调用它，如下所示：

```
{% for record in records %}
    <tr>
    {% for attribute in record.properties() %}
        <td>{{ getattr(record, attribute) }}</td>
    {% endfor %}
    </tr>
{% endfor %} 
```

# variables - 为什么没有定义参数，如果我可以转储它并且它在 Coldfusion 中有值？

> ID：10921081
> 
> 赞同：0
> 
> 时间：2012-06-06T19:44:27.507
> 
> 标签：variables, coldfusion, parameters, defined

只是有点无能为力...使用 Coldfusion8，如果我将会话转储到文件：

```
<cfdump output="D:\ColdFusion8\logs\dump.txt" var="#Session#"> 
```

这包括：

```
accounttyp: whatever 
```

如果我只转储这个参数，我会得到相同的结果：

```
<cfdump output="D:\ColdFusion8\logs\dump.txt" var="#Session.accounttyp#"> 
```

**问题：**
如果它已定义且可转储，那么如何检查**isDefined**如下：

```
<cfdump output="D:\ColdFusion8\logs\dump.txt" var="#IsDefined(Session.accounttyp)#"> 
```

结果是**NO**？如果它在那里，它应该被定义，不是吗？

感谢您的澄清。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-06T20:08:01.343

> `<cfdump output="D:\ColdFusion8\logs\dump.txt" var="#IsDefined(Session.accounttyp)#">`

这是因为语法不正确。`IsDefined`期望变量的*名称*，即字符串。通过省略变量名周围的引号，会话变量首先被评估，它的*值*（“whatever”）是传递给`IsDefined`. 所以代码实际上是检查一个名为“whatever”的变量，而不是“session.accounttyp”，即：

```
 <cfif IsDefined("whatever")> 
```

这就是为什么结果是`NO`。这是正确的语法。（注意引号和没有英镑符号）。

```
 <cfif IsDefined("Session.accounttyp")> 
```

但是，我建议切换到`structKeyExists`. 通常首选它，`IsDefined`因为它更精确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T20:06:46.270

这将返回一个布尔值：

```
#IsDefined(Session.accounttyp)# 
```

因此，您要求它返回是或否。

更好的测试可能是这样的：

```
<cfif isDefined("Session.accounttyp")>
    <cfdump output="D:\ColdFusion8\logs\dump.txt" var="#Session.accounttyp#">
</cfif> 
```

# php - 将数据发布到 url 而不导航到它？

> ID：10921082
> 
> 赞同：1
> 
> 时间：2012-06-06T19:44:33.097
> 
> 标签：php, actionscript-3, flash, post, httpwebrequest

我对 Flash 和 AS3 完全陌生。我在谷歌上搜索了关于这个主题的任何内容。

我有一些将图像发布到 php 文件的代码：

```
var header:URLRequestHeader = new URLRequestHeader("Content-type", "application/octet-stream");
    var jpgURLRequest:URLRequest = new URLRequest("http://127.0.0.1/gdipORG/takeImage.php");
    jpgURLRequest.requestHeaders.push(header);
    jpgURLRequest.method = URLRequestMethod.POST;
    jpgURLRequest.data = byteArray;
navigateToURL(jpgURLRequest, "blank"); 
```

问题是，为了进行实际发布，我必须导航到实际的 url（见最后一行代码）......

我希望能够将数据发布到 url 而无需导航到它。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T20:04:59.997

在现有代码之后使用 URLLoader：

```
//Existing code
var header:URLRequestHeader = new URLRequestHeader("Content-type", "application/octet-stream");
var jpgURLRequest:URLRequest = new URLRequest("http://127.0.0.1/gdipORG/takeImage.php");
jpgURLRequest.requestHeaders.push(header);
jpgURLRequest.method = URLRequestMethod.POST;
jpgURLRequest.data = byteArray;

//KILL THIS LINE navigateToURL(jpgURLRequest, "blank");

//Add these (UNTESTED CODE):

var sendJPGLoader:URLLoader = new URLLoader();
sendJPGLoader.dataFormat = URLLoaderDataFormat.BINARY;
sendJPGLoader.addEventListener(Event.COMPLETE, sendJPGToServerComplete);
sendJPGLoader.addEventListener(IOErrorEvent.IO_ERROR, sendJPGToServerIOError);

//Try to send image
sendJPGLoader.load(jpgURLRequest); 

function sendJPGToServerComplete(evt:Event):void {
  //Request was sent to server succesfully
  //Optionally check server response
  // var serverResponse:String = String(evt.target.data);
}

function sendJPGToServerIOError(evt:Event):void {
  //Failed
} 
```

在代码的顶部不要忘记导入：

```
import flash.events.Event;
import flash.events.IOErrorEvent;
import flash.net.URLLoader;
import flash.net.URLLoaderDataFormat;
import flash.net.URLRequest;
import flash.net.URLRequestMethod; 
```

我想我都得到了:)

# javascript - 我的 jQuery 函数是加载 HTML，但该 HTML 不会从不同的函数（来自 flowplayer）加载不同的 jQuery 选择器

> ID：10921084
> 
> 赞同：0
> 
> 时间：2012-06-06T19:44:38.640
> 
> 标签：javascript, jquery, html

我的 jQuery 函数是加载 HTML，但该 HTML 不会从不同的函数（来自 flowplayer）加载不同的 jQuery 选择器

```
flowplayer("player", {src: "http://releases.flowplayer.org/swf/flowplayer-3.2.7.swf", cachebusting: true, wmode: "transparent"});
   $('#options li a').click( function (evt){
    evt.preventDefault();
    $('#options li').removeClass('current');
         $(this).parent('li').addClass('current');
    var rackVideo = $(this).attr('href'); //JQUERY PULLS INFO FROM LINK
    var rackOutput =
        '<a href="http://c3426439.r39.cf0.rackcdn.com/pritchett/'+     rackVideo +'" id="player" style="display:block;width:348x;height:216px; display:block;">'+
        '<img src="http://www.p2ortho.com/wp-content/uploads/2010/10/intro-thumb.jpg" alt="Introduction Video" title="Introduction Video" width="348" height="216" class="alignnone size-full wp-image-620" />'+
        '</a>';
    $('#slidedata').html(rackOutput);
}); 
```

作为输出的 html 中的 id="player" 假设调用 flowplayer 函数，该函数不起作用。我究竟做错了什么？任何帮助谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T19:54:22.317

以下行...

```
flowplayer("player", {src: "http://releases.flowplayer.org/swf/flowplayer-3.2.7.swf", cachebusting: true, wmode: "transparent"}); 
```

...必须出现在此行之后：

```
$('#slidedata').html(rackOutput); 
```

为什么？因为它是当`id="player"`元素存在于文档中的时候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T19:53:56.907

您能否提供指向此页面的链接或设置[JS Fiddle](http://jsfiddle.net)。如果没有看到运行 javascript 的完整 html，很难确切知道发生了什么问题。我没有看到任何明显错误的地方，但是如果没有看到完整的页面，我将无能为力。

# windows - 移动无边框样式的表单

> ID：10921093
> 
> 赞同：13
> 
> 时间：2012-06-06T19:45:30.803
> 
> 标签：windows, forms, delphi, borderless

如何移动无边框表格？我尝试在互联网上查找，但没有。非常感谢。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-06T20:07:38.163

您可以使用任何包含的控件（包括其自身）来拖动表单。

使用以下示例，您可以通过单击其画布并拖动来移动表单。您可以通过在面板的 MouseDown 事件中放置相同的代码来对表单上的面板执行相同的操作，这样您就可以创建自己的伪标题栏。

```
procedure TForm1.FormMouseDown(Sender: TObject; Button: TMouseButton;
  Shift: TShiftState; X, Y: Integer);
const
  SC_DRAGMOVE = $F012;
begin
  if Button = mbLeft then
  begin
    ReleaseCapture;
    Perform(WM_SYSCOMMAND, SC_DRAGMOVE, 0);
  end;
end; 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-06T19:55:33.497

如果您的意思是用鼠标拖动窗口，您可以覆盖`WM_NCHITTEST`消息处理并返回`HTCAPTION`拖动区域。下面将在上部 30 像素内拖动窗口，例如：

```
type
  TForm1 = class(TForm)
  private
  protected
    procedure WMNCHitTest(var Message: TWMNCHitTest); message WM_NCHITTEST;
  end;

..

procedure TForm1.WMNCHitTest(var Message: TWMNCHitTest);
var
  Pt: TPoint;
begin
  Pt := ScreenToClient(SmallPointToPoint(Message.Pos));
  if Pt.Y < 30 then
    Message.Result := HTCAPTION
  else
    inherited;
end; 
```

# ruby-on-rails - 如何将 sqlite3 文件添加到 ruby on rails 填充数据库？

> ID：10921097
> 
> 赞同：0
> 
> 时间：2012-06-06T19:45:49.327
> 
> 标签：ruby-on-rails, ruby, sqlite

我有一个 Ruby on Rails 应用程序，其中包含一个填充有程序的数据库。我还有一个 sqlite3 数据库，它几乎与 RoR 应用程序中的数据库完全相同（没有创建、更新）。我想将 sqlite3 数据库导入 Rails 应用程序（而不是使用 database.yml 文件，结合两个数据库），经过大量谷歌搜索，我不知道如何以及在哪里执行此操作。我会在哪个文件中执行此操作，最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T19:51:12.240

低技术的方法是将您的 SQLite 数据库转储到您可以导入其他数据库的东西中。MySQL`LOAD DATA INFILE`非常灵活，如果配置正确，甚至可以读取 CSV 文件，因此这可能是一种简单的方法。

一般来说，我发现最好按原样导入外部表，但要转换名称，以便将它们识别为非本地表。例如，在它们前面加上前缀，`_import`以明确它们不是常规模式的一部分。然后，您可以使用一系列执行重新映射的语句从这些表迁移到本地表：

```
INSERT INTO foo (x,y) SELECT (x,y) FROM _import_foo 
```

这样可以很容易地解释缺少的列或名称的细微差别。如果需要，您还可以对特定列执行转换。

与往常一样，请确保在开始此操作之前拥有数据库的快照，因为取消合并通常很棘手。

另一种方法是同时创建两个数据库连接，并使用`SELECT`一侧和另一侧在两者之间穿梭数据`INSERT INTO`。

# c# - 如何在新标签中显示 pdf？

> ID：10921100
> 
> 赞同：0
> 
> 时间：2012-06-06T19:46:01.490
> 
> 标签：c#, asp.net, asp.net-mvc, pdf

我想将数据从我的控制器添加到 pdf，然后显示在新选项卡中。

我的模型中有以下内容：

```
using (MemoryStream ms = new MemoryStream())
{
    PdfStamper formFiller = new PdfStamper(reader, ms);
    AcroFields formFields = formFiller.AcroFields;
    formFields.SetField("First", first);

    formFiller.FormFlattening = true;
    formFiller.Writer.CloseStream = false;
    formFiller.Close();
 } 
```

我让这发送了一封附加的 pdf 电子邮件，该电子邮件有效，但我想进行编辑并在新选项卡中打开。我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T20:04:59.813

在_blank中打开链接。那不行吗？您需要将该新选项卡中的请求与原始窗口中的编辑相关联。

# javascript - 使用 JQuery 更改 Metatag 关键字

> ID：10921107
> 
> 赞同：0
> 
> 时间：2012-06-06T19:46:20.123
> 
> 标签：javascript, jquery, keyword, meta-tags

我有一个问题，可以用 JQuery 更改 Metatag 关键字吗？

我已经尝试过了，但没有奏效。

```
$("meta").attr("description", "Keywords bla bla bla"); 
```

和这个

```
$('meta[name=keywords]').attr('content', 'New Author Name'); 
```

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T19:50:21.413

元标记的全部目的是帮助搜索者。如果您通过 JS 搜索器（蜘蛛）加载它们，则不会阅读它们，并且拥有它们没有意义

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T19:48:46.097

我确实对此进行了实验，以激发 Facebook 的 Open Graph，结果发现元标记是在 JS 之前加载的，有点模拟整个想法。

# c++ - Objective-C 预处理器定义，动态 C-String 到 NSString 声明

> ID：10921108
> 
> 赞同：6
> 
> 时间：2012-06-06T19:46:27.280
> 
> 标签：c++, objective-c, c-preprocessor

我正在尝试创建一个宏定义，该定义可以根据上下文发出 C++ 或 Objective-C，但似乎无法在宏内轻松构造 NSString。C++ 版本很简单，因为它使用常规字符串，但制作一个发出 NSString 的字符串被证明是棘手的：

```
#define FOO(x) bar(@##x) 
```

预期的结果是通过前缀将字符串参数转换为 NSString 参数`@`：

```
FOO("x")
// => bar(@"x") 
```

我得到的是一个阻止编译的错误：

```
Pasting formed '@"x"', an invalid preprocessing token 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T19:48:24.677

```
NSString *x = @"text"; 
```

等于：

```
NSString *x = CFSTR("text"); 
```

PS NSString* 和 CFStringRef 和 __CFString* 以及 NSCFStringRef 都是一样的：[免费桥接类型](http://developer.apple.com/library/ios/#documentation/CoreFoundation/Conceptual/CFDesignConcepts/Articles/tollFreeBridgedTypes.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T19:56:35.720

`##`除非它们一起形成有效的预处理标记，否则您不能用于连接元素，但您可以调用`NSString`采用 C 字符串的构造函数，如下所示：

```
#define FOO(x) [NSString stringWithUTF8String:(x)] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-06T20:32:00.187

嗯，为什么不这样：

```
#define FOO(x) bar(@x) 
```

?

无需进行令牌粘贴或字符串化或任何奇怪的事情。您只希望替换点的参数列表中的内容前面有一个 @ 符号。所以就这样做吧。

# java - 获取联系人性能问题

> ID：10921109
> 
> 赞同：5
> 
> 时间：2012-06-06T19:46:46.273
> 
> 标签：java, android, android-cursor

我正在尝试获取 android 设备的联系人。[我在这里](http://www.coderzheaven.com/2011/06/13/get-all-details-from-contacts-in-android/)找到了一个很棒的示例代码

但是，当尝试使用该代码填充 a`ListActivity`时`ArrayAdapter`，它会花费大量时间 - 在 Galaxy s2 上几乎 4 秒，而在旧设备上则更多。我需要改善这种表现。我的想法是实现`Cursor`将包含多个维度`Cursor`，并`SimpleCursorAdapter`用作列表适配器。
我发现这种方法几乎没有问题：

*   我不知道如何在特定位置获取项目。
*   每个游标都有不同的列。

有没有更好/更简单的方法来做到这一点？

编辑：

这是我的代码：

```
public List<ContactData> readContacts(){
    ContentResolver cr = getContentResolver();
    List<ContactData> cd = new ArrayList<ContactData>();
    Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI,
           null, null, null, ContactsContract.Contacts.DISPLAY_NAME);

    if (cur.getCount() > 0) {
       while (cur.moveToNext()) {
           String id = cur.getString(cur.getColumnIndex(ContactsContract.Contacts._ID));
           String name = cur.getString(cur.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
           if (Integer.parseInt(cur.getString(cur.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) {

               // get the phone number
               Cursor pCur = cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,null,
                                      ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = ?",
                                      new String[]{id}, null);
               while (pCur.moveToNext()) {
                     String phone = pCur.getString(
                            pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
                     if (!Utils.isEmpty(phone)) {
                         cd.add(new ContactData(id, name, phone));
                     }
               }
               pCur.close();

           }
       }
  }
    return cd;
} 
```

编辑2：

设法通过将其更改为仅一个查询来修复它：

```
public List<ContactData> readContacts(){
    ContentResolver cr = getContentResolver();
    List<ContactData> cd = new ArrayList<ContactData>();
               Cursor pCur = cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
                       new String[]{ContactsContract.CommonDataKinds.Phone._ID,ContactsContract.CommonDataKinds.Phone.NUMBER,ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME_PRIMARY},
                       ContactsContract.CommonDataKinds.Phone.NUMBER + " IS NOT NULL",
                                      null, 
                                      ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME_PRIMARY);
               while (pCur.moveToNext()) {
                     String phone = pCur.getString(pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
                     String id = pCur.getString(pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone._ID));
                     String name = pCur.getString(pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME_PRIMARY));
                         ContactData cd1 = contactDataProvider.get();
                         cd1.id = id;
                         cd1.name = name;
                         cd1.phone = phone;
                         cd.add(cd1);
               }
               pCur.close();
    return cd;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T21:06:16.133

您可以在获取电话号码的同时获取姓名和身份证：

```
String[] PROJECTION=new String[] {Contacts._ID, Contacts.DISPLAY_NAME, Phone.NUMBER};
Cursor pCur = cr.query(Phone.CONTENT_URI, PROJECTION, Phone.CONTACT_ID +" = ?",
                                      new String[]{id}, null); 
```

这消除了每行子查询。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T19:56:42.677

使用 a`Cursor`是解决这个问题的好方法。要从特定位置获取检索信息，您可以使用`Cursor.moveToPosition(int position)`. 然后，您可以使用 访问 的任何字段`Cursor`，在本例`String`中为`Cursor.getString(int columnIndex)`。

查看[游标](http://developer.android.com/reference/android/database/Cursor.html)文档以获取更多详细信息。

这种方法最好的部分是您可以实现一个[CursorLoader](http://developer.android.com/reference/android/content/CursorLoader.html)来为您进行后台数据检索。它还会自动处理重新填充您`ListView`的数据更改、方向更改等。查看[这个很棒的教程](http://mobile.tutsplus.com/tutorials/android/android-sdk_loading-data_cursorloader/)以获得更多解释。

# hbase - 如何在超表中设计用户表

> ID：10921112
> 
> 赞同：0
> 
> 时间：2012-06-06T19:47:06.860
> 
> 标签：hbase, bigtable, hypertable

我想在超表数据库中设计一个包含以下字段的用户表：

```
rowkey       : (unique Guid)
username     : (unique in the table)
email        : (unique in the table)
passwordHash : (string field)
passwordSalt : (string field)
firstName    : (string field)
lastName     : (string field) 
```

现在rowkey是用户的id，我引用这个id很多属于用户的东西（我知道在hypertable中唯一的自动主键选项是guid）我不会使用用户名作为rowkey的原因是因为如果发生更改，可以更改用户名，我将不得不更新整个数据库中的很多东西。同样的角色也附加到电子邮件字段。

现在用户可以使用他的用户名或他的电子邮件登录。所以我需要通过电子邮件或用户名检索整行。

你能帮我设计这张桌子吗谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T17:42:07.447

如果您下载超表源（或在线浏览源），那么您将找到一个 PHP 示例项目，该项目实现了一个类似 twitter 的微博站点。基本上它实现了与您要求的用户表相同的用户表（有一个区别：它使用用户名作为行键）。但您可以轻松更改此设置并改用 GUID。

（尽管从用户的角度来看，我认为您很少更改用户名，而且我不知道任何提供此类功能的网页。更改电子邮件地址或位置当然是必要的。）

这是生成数据库的脚本（查找“配置文件”表）： [https ://github.com/cruppstahl/hypertable/blob/v0.9.5/examples/php/microblog/setup.hql](https://github.com/cruppstahl/hypertable/blob/v0.9.5/examples/php/microblog/setup.hql)

# javascript - 带有路径连接器的 jQuery 可拖动小部件

> ID：10921115
> 
> 赞同：2
> 
> 时间：2012-06-06T19:47:13.523
> 
> 标签：javascript, jquery, html

参考图像，Block1 和 Block2 都是可拖动的。

我的问题是：如何在两个块之间制作红色链状连接器？要求是链条应该延伸到拖动块的任何地方。请提供任何指向教程/学习材料的指针。谢谢。

![在此处输入图像描述](../Images/2d83bd5a7d309c6146ee89fb21d5e7c0.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-05-09T13:32:33.303

有很多 Jquery 插件可用于为数据库可视化或流程图创建连接器。如果像我这样正在搜索此类插件的人可能想看看以下插件。

```
JointJS
Rappid
Mxgraph
GoJS
Raphael
Draw2D
D3
FabricJS
paperJS
JsPlumb
FlowChart 
```

以下链接可能会有所帮助。

[http://modeling-languages.com/javascript-drawing-libraries-diagrams/](http://modeling-languages.com/javascript-drawing-libraries-diagrams/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-10T04:37:47.863

[GoJS](http://gojs.net)允许您定义自己的链接路径的自定义呈现，如以下示例所示：http: [//gojs.net/latest/samples/relationships.html](http://gojs.net/latest/samples/relationships.html)

以下是在定义链接模板时创建红色 V 形图案的方法：

```
$(go.Link, go.Link.Orthogonal,
  $(go.Shape,
    {
      stroke: transparent,
      pathPattern: $(go.Shape,
       {
         geometryString: "F1 M2 3 L0 0 6 0 8 3 6 6 0 6z",
         fill: "red",
         strokeWidth: 0
       })
    })
) 
```

这将产生以下结果：

[![在此处输入图像描述](../Images/9785dd20a63d8ec51f1a95baf8fa9d5a.png)](https://i.stack.imgur.com/ALgb7.png)

# eclipse - 安装 IMP eclipse 插件

> ID：10921119
> 
> 赞同：1
> 
> 时间：2012-06-06T19:47:31.387
> 
> 标签：eclipse, eclipse-plugin, imp

我有使用[IMP](http://eclipse.org/imp)开发的 eclipse 插件。我需要导出插件，以便可以将其安装在其他机器上。我尝试使用以下方式导出：

> 文件->导出->可部署插件和片段

并将其保存在 zipfile 中。我把创建的 jar 放在 eclipse/plugins 下。重新启动eclipse后，我仍然没有启用插件。我在插件注册表视图下检查过，它似乎处于非活动状态。诊断选项提供了以下信息：

> 缺少约束：Bundle-RequiredExecutionEnvironment：JavaSE-1.7

我检查了我的 MANIFEST.MF 文件，它确实包含以下行：

> Bundle-RequiredExecutionEnvironment：JavaSE-1.7

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T20:06:58.497

您使用 Java 1.7 创建了插件，而目标 Eclipse 使用的是 1.6 或 1.5。您可以通过以下方式更改插件的依赖项

1.  将 Bundle-RequiredExecutionEnvironment 更改为 JavaSE-1.6 或 J2SE-1.5
2.  并更新旧 Java 源包的构建路径：项目属性/Java 构建路径，并编辑 JRE 系统库元素。

顺便说一句，创建一个更新站点而不是将插件直接放入 eclipse/plugins 目录是一个更好的主意 - 它可能会在安装过程中导致任何数量的难以调试的错误。详情请看我对应的博文（自广告请见谅）：[http ://cubussapiens.hu/2010/08/update-sites-in-the-p2-era/](http://cubussapiens.hu/2010/08/update-sites-in-the-p2-era/)

# php - php 通过在下面添加新变量在页面上多次更改变量

> ID：10921122
> 
> 赞同：0
> 
> 时间：2012-06-06T19:47:58.277
> 
> 标签：php, variables, rename, multiple-instances

有谁知道执行以下操作是否不好？如果是这样，是否有替代我想要实现的目标？（以下是我将使用的简化版本）

```
<?php $projectTitle = "my title"; ?>
<h3><?php echo $projectTitle ?></h3>
<img src="bla.jpg" title="<?php echo $projectTitle ?> />
<img src="bla2.jpg" title="<?php echo $projectTitle ?> />
<img src="bla3.jpg" title="<?php echo $projectTitle ?> />

<?php $projectTitle = "my updated title"; ?>
<h3><?php echo $projectTitle ?></h3>
<img src="bla.jpg" title="<?php echo $projectTitle ?> />
<img src="bla2.jpg" title="<?php echo $projectTitle ?> />
<img src="bla3.jpg" title="<?php echo $projectTitle ?> /> 
```

等等。基本上，我只想为每个项目块添加一次标题，然后让它执行到下面调用的位置，直到项目标题将更改的下一个项目。

我已经对此进行了测试，并且效果很好，但是我不确定是否会产生任何无法预料的后果，或者是否有更好的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T19:59:54.823

我不太明白你的问题，但也许这有帮助。将所有项目标题放在一个数组中并执行一次 foreach：

```
<?php
$titles = array('my title', 'my updated title');
foreach ($titles as $title) {
?>
<h3><?php echo $title ?></h3>
<img src="bla.jpg" title="<?php echo $title ?> />
<img src="bla2.jpg" title="<?php echo $title ?> />
<img src="bla3.jpg" title="<?php echo $title ?> />
<?php
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T19:52:34.627

没关系。它使您的生活更轻松，并且完全没有伤害

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T19:57:20.567

尝试制作一个像这样的小 php 文件：

```
<?php $projectTitle = $title; ?>
<h3><?php echo $projectTitle ?></h3>
<img src="bla.jpg" title="<?php echo $projectTitle ?> />
<img src="bla2.jpg" title="<?php echo $projectTitle ?> />
<img src="bla3.jpg" title="<?php echo $projectTitle ?> /> 
```

在你的主文件中这样做：

```
$title = "my updated title"
include(".../projet.php"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T20:44:55.843

我认为`echo`多次调用是可以的，但是如果你总是调用具有相同结构的 IMG，也许这个小函数会帮助你：

```
function addIMG( $imgs, $projectTitle ){
  foreach($imgs as $array)
    echo "<img> src=\"$array\" title=\"$projectTitle\" /> \n";
}

// Then to call:
$projectTitle = $title;
$imgs = array('bla.jpg','bla2.jpg', 'bla3.jpg');
echo addIMG( $imgs, $projectTitle ); 
```

这是一个开始；随意使用/更改它。

# php - Android 到 PHP 并返回

> ID：10921129
> 
> 赞同：-4
> 
> 时间：2012-06-06T19:48:19.553
> 
> 标签：php, android

有人可以提供一个将简单数据发送到 PHP 服务器的 android 代码示例吗？我只需要从在 android 设备上创建的表单中发送几个 string、double 和 int 变量，将这些条目转换为 pdf 文档，然后将其发送回 android。如果我能得到一个至少将它发送到服务器的样本，那将有很大帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T19:50:19.387

```
public void postData() {
    // Create a new HttpClient and Post Header
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("http://www.yoursite.com/script.php");

    try {
        // Add your data
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
        nameValuePairs.add(new BasicNameValuePair("id", "12345"));
        nameValuePairs.add(new BasicNameValuePair("stringdata", "AndDev is Cool!"));
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        // Execute HTTP Post Request
        HttpResponse response = httpclient.execute(httppost);

    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
    } catch (IOException e) {
        // TODO Auto-generated catch block
    }
} 
```

# macos - 构建和安装 x86_64 而不是 i386 的 Brew 应用程序？

> ID：10921133
> 
> 赞同：7
> 
> 时间：2012-06-06T19:48:28.420
> 
> 标签：macos, homebrew, osx-lion

在我这样做之后：

> 酿造安装 git

我这样做：

> 哪个混帐

返回：

> /usr/local/bin/git

然后我这样做：

> 文件 /usr/local/bin/git

返回：

> /usr/local/bin/git: Mach-O 可执行 i386

我需要 brew 安装为 x86_64。

如何强制 brew 将我的应用程序构建和安装为 x86_64？

> 酿造--配置

返回这个：

```
HOMEBREW_VERSION: 0.9
HEAD: 1c64a6624ed83ef17af6e98638b8165400e9e908
HOMEBREW_PREFIX: /usr/local
HOMEBREW_CELLAR: /usr/local/Cellar
CPU: quad-core 64-bit sandybridge
OS X: 10.7.4
Kernel Architecture: x86_64
Xcode: 4.3.2
GCC-4.0: N/A
GCC-4.2: N/A
LLVM: build 2336
Clang: 3.1 build 318
MacPorts or Fink? false
X11: /usr/X11
System Ruby: 1.8.7-357
Which Perl:   /usr/bin/perl
Which Python: /usr/bin/python
Which Ruby:   /Users/tdewell/.rvm/rubies/ruby-1.9.3-p194/bin/ruby 
```

更新：添加 brew --env

```
$ brew --env
CC: /usr/bin/xcrun gcc-4.2 => /Developer/usr/bin/gcc-4.2

CXX: /usr/bin/xcrun g++-4.2 => /Developer/usr/bin/g++-4.2

LD: /usr/bin/xcrun gcc-4.2 => /Developer/usr/bin/gcc-4.2

CFLAGS: -Os -w -pipe -march=core2 -msse4
CXXFLAGS: -Os -w -pipe -march=core2 -msse4
MAKEFLAGS: -j4 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T20:32:34.440

这已经解决了。

我通过 App Store 安装了 Xcode 4.3.2 并安装了命令行工具，但我多年前安装了现有的 Xcode 3.1。我搜索了一下，发现了这些命令：

```
sudo /Developer/Library/uninstall-devtools –mode=all

sudo xcode-select -switch /Applications/Xcode.app/Contents/Developer 
```

这解决了我的问题，在我这样做之后，编译器更改为 brew：

```
$ brew --env
CC: /usr/bin/clang
CXX: /usr/bin/clang++ => /usr/bin/clang
LD: /usr/bin/clang
CFLAGS: -Os -w -pipe -march=native -Qunused-arguments
CXXFLAGS: -Os -w -pipe -march=native -Qunused-arguments
MAKEFLAGS: -j4 
```

brew 安装现在好多了：

```
$ which git
/usr/local/bin/git

$ file /usr/local/bin/git
/usr/local/bin/git: Mach-O 64-bit executable x86_64 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-12-09T10:14:25.067

尝试

```
xcode-select --install 
```

# java - 使用两个 if 的半数组循环的时间复杂度是否与使用一个 if 的全数组循环相同？

> ID：10921138
> 
> 赞同：2
> 
> 时间：2012-06-06T19:48:46.157
> 
> 标签：java, for-loop, time-complexity

我想知道下面代码示例的两个变体在技术上是否具有相同的运行时复杂度。

例如（为了说明问题，假设字符串的长度是偶数）：

```
//counting how many times char 'c' appear in the string s

String s = "ascdwcccdweccaaa"; //the "array", contain char 'c' 6 times

int counter = 0; //times char 'c' appear in the string

for(int i=1; i <= s.length()/2; i++)
    {
    if(s.charAt(i-1) == 'c')
        counter++;
    if(s.charAt(s.length()-i) == 'c')
        counter++;
    } 
```

比起这个...

```
for(int i=0; i < s.length(); i++)
    if(s.charAt(i) == 'c')
        counter++; 
```

第一个示例使用索引从数组的两端和开始检查，直到它到达数组的中间（假设`O(n/2)`）

而第二个例子是从头到尾严格检查数组中的所有字符（据说`O(n)`）

在第一个示例中我需要使用两个`ifs`，而在第二个示例中我需要使用一个`if`。

这两个代码的时间复杂度在技术上是否相同？（考虑到我`ifs`在第一个示例中只传递了一半数组时使用了两个，它们是否“均匀”？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T19:52:26.687

您的两个程序具有完全相同的`O(n)`复杂性。实际上`O(n/2)`等于`O(n)`因为它是相同的顺序。但即使考虑到这一点：您的迭代次数减少了两倍，而工作量增加了两倍。总数是一样的。

所以程序具有相同的复杂性。但是第一个有几个缺点：

*   阅读起来更复杂，不太清楚

*   具有奇数个元素的数组呢？

*   JVM 可能会做一些花哨的优化。边界检查（当虚拟机发现你只是在遍历整个数组时，它可能不会一直检查边界）。使用这种幻想可能会使优化器感到困惑。

话虽如此，您在尝试优化代码时使代码更难阅读，不正确并且可能更慢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T19:52:15.277

O(n) 和 O(n/2) 都具有相同的增长率（线性），因此具有相同的时间复杂度。

[http://en.wikipedia.org/wiki/Big_O_notation](http://en.wikipedia.org/wiki/Big_O_notation)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T20:36:47.170

除了您的算法不等效，因为您的第一个失败的长度为 1 ( `1/2==0`)，当假设每个原子操作的统一成本为 1 时，您的第一个算法具有以下复杂性：

```
for (int i=1;                          // 1
    i <= s.length()/2;                 // 3 + ⎡n/2⎤ · ( 3
    i++) {                             //     1
    if(s.charAt(i) == 'c')             //     3
        counter++;                     //     1
    if(s.charAt(s.length()-i) == 'c')  //     4
        counter++;                     //     1
}                                      // ) 
```

*对于n* ≥ 8，总统一成本为 4 + ⎡<em>n/2⎤·13 ≤ 14·⎡<em>n/2⎤ 。由于 14·⎡<em>n/2⎤ ≤ 28· *n*并且28 是一个常数因子，您的算法在 Ο( *n* ) 中。

或者，正如评论中已经说过的那样：*n* /2 · 2 仍然等于*n*。

# ssh - Capistrano 以顺序模式运行

> ID：10921140
> 
> 赞同：0
> 
> 时间：2012-06-06T19:48:53.767
> 
> 标签：ssh, capistrano

我想知道是否有一种方法可以`run`为 Capistrano 的命令指定一种以顺序模式而不是并行操作的方式（通常通过环境变量）如果可能的话，我想避免使用条件语句在`run`调用和一个`find_servers_for_task(current_task).each do |hostname| ... end`循环。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T14:13:02.117

好的，我终于找到了正确的语法。您可以`run`通过说明符限制命令的范围`:hosts`（感谢[Andriy Yanko](http://railsware.com/blog/2011/11/02/advanced-server-definitions-in-capistrano/)）。例子：

```
 before "mytask", 'set_roles'
    ########### mytask #####################
    desc "Example of a sequential run of capistrano"
    task :mytask, :roles => :dynhosts do
        find_servers_for_task(current_task).each do |hostname|
             info "=> run mytask on #{hostname}"
             run "whoami", :hosts => [ "#{hostname}" ]
        end         
    end 
```

# castle-windsor - Windsor FromAssemblyInDirectory 将程序集添加到运行进程

> ID：10921141
> 
> 赞同：0
> 
> 时间：2012-06-06T19:49:19.647
> 
> 标签：castle-windsor

我正在使用 Castle Windsor 和

```
Classes.FromAssemblyInDirectory 
```

指令在给定目录中加载服务的所有实现。这很好用。我想添加的功能之一是将新程序集动态插入到正在运行的进程中（该进程是 Windows 服务。）

现在，我的第一个想法就是添加一个 FileSystemWatcher 并在目录中的文件更改时手动删除/注册服务。这很好，我肯定会工作。

但在我写任何东西之前，我想到温莎可能已经内置了类似的东西。这会很整洁，并且可以为我节省一些编码。

谷歌搜索没有发现任何明显的东西，但是，我是温莎的新手，也许不知道所有正确的术语。

有人知道这个功能是否存在吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T22:41:46.223

不，这不是 Windsor 支持的那种功能。这不是 IoC 容器的本意。

# variables - 以编程方式更新文件路径以在 Apache JMeter 中使用 HTTP 请求发送文件

> ID：10921142
> 
> 赞同：4
> 
> 时间：2012-06-06T19:49:22.210
> 
> 标签：variables, httprequest, jmeter, filepath

我正在使用 Apache JMeter 2.7 来加载测试 Liferay。我正在创建的一个这样的测试涉及动态生成文件并将它们上传到 Liferay 的文档和媒体 portlet。我遇到的问题与 Liferay 无关……我知道这一点，因为如果我在 HTTP 请求中的“使用请求发送文件”的“文件路径”框中键入确切的路径，我可以上传文档. 这不是我需要运行测试的方式。

我希望测试以这样一种方式运行，即在测试的每个循环中生成一个唯一的文件，文件名具有不同的 UUID（我在 BeanShell PreProcessor 中执行此操作，它按照我的意愿执行）。我有一个用户定义的变量 FILENAME 用于存储文件名。在 HTTP 请求中，对于文件路径，我使用路径`C:\Installs\Apache Jmeter\apache-jmeter-2.7\bin\${FILENAME}`，但 JMeter 不处理变量。

当我查看结果树时，我看到了错误：

> java.io.FileNotFoundException: C:\Installs\Apache Jmeter\apache-jmeter-2.7\bin\${FILENAME} （系统找不到指定的文件）

然而，如果我硬编码文件路径（例如 ...\bin\doc.txt）并使用 ${FILENAME} 作为文档标题的值（我在 HTTP 请求中发送的参数），则文档(doc.txt) 以字符串值 FILENAME 作为标题上传到 portlet。这让我知道正确的字符串存储在变量 FILENAME 中。由此，我推断 JMeter 根本不会替换文件路径中的变量以在 HTTP 请求中发送文件。如果我在这个结论中不正确，请让我知道如何解决我遇到的任何错误。有没有其他人有这个问题？

我目前正在尝试通过向此 http 请求添加 BeanShell PreProcessor 来创建解决方法，该请求将使用变量名称动态更新文件路径。我需要设置一些`variable = vars.get("FILENAME")`. 任何人都知道如何从这里开始以编程方式设置 HTTP 文件路径？我正在[API](http://jmeter.apache.org/api/org/apache/jmeter/protocol/http/sampler/HTTPSamplerBase.html)中寻找答案。任何帮助将不胜感激，因为我现在完全被难住了。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-06T21:15:19.533

它失败了，因为您使用`\${FILENAME}`.
这会转义 $ 所以变量不会被解释。

解决方案：

*   `C:\\Installs\\Apache Jmeter\\apache-jmeter-2.7\\bin\\${FILENAME}`
    （我无法像在 Mac OS 上那样进行测试）；
*   `C:/Installs/Apache Jmeter/apache-jmeter-2.7/bin/${FILENAME}`
    （这肯定适用于 Windows）。

# sql - 如何查找违反参照完整性的记录

> ID：10921144
> 
> 赞同：3
> 
> 时间：2012-06-06T19:49:49.183
> 
> 标签：sql, sql-server

我有两个应该是一对多关系的表，但是在表的许多方面似乎有一些记录阻止了创建关系。违反参照完整性。

由于两个表中都有很多记录，有没有一种方法可以查询到哪些记录在多方，但不是在一方？

```
**Ex.**

Table 1: (one side)
(pk)AccountId

Table 2: (many side)
(pk)UserId
(fk)AccountId  <--  Some accountId's are not in Table 1 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-06T19:52:02.227

```
select *
from table2 t2
where not exists(
    select 1
    from table1 t1
    where t1.AccountId = t2.AccountId
) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-06T19:52:38.740

```
select a.*
from Table2 as a
where not exists (select null from table1 as b where b.AccountId = a.AccountId); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-06T19:52:30.873

```
SELECT table2.UserId, table2.AccountId
FROM table1 RIGHT JOIN table2 ON table1.AccountId = table2.AccountId
WHERE table1.AccountId IS NULL; 
```

[http://sqlfiddle.com/#!3/5b8e30/4](http://sqlfiddle.com/#!3/5b8e30/4)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-06T19:54:57.530

```
FROM Table2 t2
WHERE t2.AccountId not in (SELECT t1.AccountId FROM Table1 t1) 
```

或者，如果您更喜欢加入...

```
FROM Table2 t2
  LEFT JOIN Table1 t1
  ON t2.AccountId = t1.AccountId
WHERE t1.AccountId is null 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-02T20:50:58.683

在 SQL SERVER 中，您可以使用以下命令：

```
 DBCC CHECKCONSTRAINTS WITH ALL_CONSTRAINTS 
```

# ios - 可达性更改通知适用于 iOS5 但不适用于 iOS4

> ID：10921145
> 
> 赞同：2
> 
> 时间：2012-06-06T19:49:52.203
> 
> 标签：ios

我将可达性代码合并到我的应用程序中，它已经成功运行了几个月，但到目前为止我只在 iOS 5 设备上使用过它。但是它不适用于 iOS 4 设备。

通知注册如下：

```
 - (id) init
{
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(reachabilityChange:)
                                                 name:kReachabilityChangedNotification
                                               object:nil];

...

- (void) appBecameActive
{
...
self.reachability = [Reachability reachabilityWithHostName:[url host]];
...
[self.reachability startNotifier]; 
```

stopNotifier 只在 dealloc 中被调用

问题是当可达性发生变化时，ReachabilityCallback 没有被回调，但我看不出它在 iOS5 上应该没问题但在 iOS4 上没问题的任何理由。

这部分代码与 Apple 示例源代码相同：

```
static void ReachabilityCallback(SCNetworkReachabilityRef target, SCNetworkReachabilityFlags flags, void *info) {
#pragma unused (target, flags)
  NSCAssert(info != NULL, @"info was NULL in ReachabilityCallback");
  NSCAssert([(__bridge id)info isKindOfClass:[Reachability class]], @"info was wrong class in ReachabilityCallback");

  Reachability *noteObject = (__bridge Reachability *)info;
  // Post a notification to notify the client that the network reachability changed.
  [[NSNotificationCenter defaultCenter] postNotificationName:kReachabilityChangedNotification object:noteObject];
} 
```

如前所述，在 iOS5 设备上运行时一切都运行良好，过去有没有其他人遇到过类似的问题，将可达性代码与 iOS4 结合起来？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T09:27:56.253

编辑发布通知的可达性代码以将其发布在主线程上，并查看这是否会改变您所看到的行为。

```
dispatch_async(dispatch_get_main_queue(), ^{ 
    [[NSNotificationCenter defaultCenter] postNotificationName:kReachabilityChangedNotification object:noteObject];
}); 
```

（假设你在主线程上听他们）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T17:19:00.053

`kReachabilityChangedNotification`不是系统框架生成的通知。它由可达性示例代码生成。示例代码旨在演示概念，而不仅仅是按原样复制并粘贴到应用程序中。我建议您开始查看问题根源的可达性代码，而不是查看侦听通知的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T17:10:01.550

在您的 init 方法中设置一个断点以确保您的注册被调用。如果不是，请将其移至 viewDidLoad 或确保在其他地方调用了您的 init 方法。

我会为 appBecameActive 做同样的事情。为此设置断点并检查以确保它正在启动。应该从这里调用它：applicationDidBecomeActive: 在 UIApplicationDelegate 类中。

# iphone - Iphone 应用程序无法在设备上正确显示

> ID：10921148
> 
> 赞同：3
> 
> 时间：2012-06-06T19:50:23.693
> 
> 标签：iphone, objective-c, xcode, ipad, ios-simulator

我有一个应用程序可以在模拟器上完美运行，但在设备上却不如预期。动画放错位置和其他错误。但在模拟器上它工作正常。

我的问题是如何修复这个错误。这是我已经尝试过的事情的清单：

重新启动 Mac。重新启动 Xcode。清洁项目。重命名项目。从 iPhone 中删除应用程序。重新启动 iPhone。关闭 iPhone。在 Xcode 中清理和构建。

我真的不知道问题出在哪里。谢谢您的帮助。将不胜感激。

注意：应用程序已正确签名。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T20:21:21.760

确保您的文件键入正确并且区分大小写。模拟器不区分大小写，但 iPhone 是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T00:08:01.177

您是否曾经将代码/xib 文件移动到不同的组或目录中？有时，移动后在原始目录中有文件的旧副本。我曾经遇到过在构建设置之间切换时这些旧文件导致旧代码执行的场景。

如果有重复文件，请确保删除旧位置的那些副本，或者那些您不打算使用的副本。例如，如果您的原始目录`~/Work/App/Resources`和新目录是`~/Work/App/Resources/xibs`然后删除重复的文件`~/Work/App/Resources`

说得通？

现在，在删除之后，如果文件在 XCode 中开始显示为红色，这意味着 XCode 找不到它们了（可能你删除的太多了，或者谁知道你的工作空间的状态）。如果发生这种情况，请使用“文件检查器”确认 XCode 用于文件的位置和路径是否正确。

![在此处输入图像描述](../Images/e7d832392b8c6bdfdb288703fa8c7ff5.png)

# c++ - 如何获得 Windows 控制台高度？

> ID：10921152
> 
> 赞同：2
> 
> 时间：2012-06-06T19:50:39.543
> 
> 标签：c++, winapi, console, height

那是控制台中的行数？

我知道`SetConsoleWindowInfo()`，但我在任何地方都找不到对应的`GetConsoleWindowInfo()`.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T19:53:36.830

使用[`GetConsoleScreenBufferInfo`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683171%28v=vs.85%29.aspx)：

```
CONSOLE_SCREEN_BUFFER_INFO csbi;
GetConsoleScreenBufferInfo (GetStdHandle (STD_OUTPUT_HANDLE), &csbi);

//use csbi.dwSize for the rows and columns... 
```

如果您使用的是 Vista 及更高版本，您也可以使用[“Ex”](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683172%28v=vs.85%29.aspx)形式。

# r - 来自 R 的 C 编译标志

> ID：10921153
> 
> 赞同：8
> 
> 时间：2012-06-06T19:50:42.330
> 
> 标签：r

你可以在安装时在编译时设置 R 的 C 和 C++ 标志吗`R CMD INSTALL`（本质上，在这种特殊情况下，我想关闭编译器优化，但理想情况下有一个通用的解决方案）？

我知道您可以使用 影响某些选项`--configure-args="..."`，我相当乐观地尝试过`--configure-args="diable-optimization"`，但无济于事。同样，我也可以进行编辑`$RHOME/etc/Makeconf`，但这又不是我正在寻找的那种解决方案（并且在我没有相关的写权限的情况下是不可能的）。

我通过 autoconf 脚本和目录`Makevars`中的文件定义我的标志`package/src`，如果这有什么不同的话。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-07T16:13:21.960

Dirk - 非常有帮助的讨论（一如既往）并且明确地指出了我正确的方向。对于我的具体问题，事实证明除了`Makevars`我必须将参数传递给`configure`. 我不知道为什么会这样（并且阅读似乎不是常态，所以也许我在某处做错了什么），但如果其他人有同样的问题，`~/.R/Makevars`请结合以下论点`configure`/`INSTALL`为我工作。

```
R CMD INSTALL --configure-args="CFLAGS=-g CXXFLAGS=-g" package.tar.gz 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-06T21:27:54.353

是的，我为此使用了一个文件`~/.R/Makevars`。在切换 gcc 版本或切换到 llvm 或`CC`...`CXX`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-20T15:20:06.887

我可以确认 Makevars 文件非常有用（特别是如果您需要使用“-L/my/libs”或“-I/my/includes”或其他构建标志）。

对于构建，如果要为站点/机器设置选项，还可以更改*Makeconf*文件 (/path/R/install/[lib64/R/]etc/Makeconf) 中的变量。

不过，如果你和我一样，以后在管理和使用库方面还有一些问题，你也可以使用*ldpaths*文件 [1] 来设置库。此文件包含 R 使用的 R_LD_LIBRARY_PATH。此变量等效于 unix [2] 上众所周知的 LD_LIBRARY_PATH。

我刚刚在这个文件（/path/R/install/[lib64/R/]etc/ldpaths）中添加了一些内容（就在MacOS / Darwin的评论之前）：

```
if test -n "${LD_LIBRARY_PATH}"; then
  R_LD_LIBRARY_PATH="${LD_LIBRARY_PATH}:${R_LD_LIBRARY_PATH}"
fi
## This is DYLD_FALLBACK_LIBRARY_PATH on Darwin (OS X) and 
```

然后，您将能够动态地管理您的库，例如使用“环境模块”或“lmod”。

请注意，您可以使用该 config/etc 目录中的所有文件（Renviron、存储库、javaconf、Rprofile.site ...）更改许多其他环境和 R 变量。

[1] [https://support.rstudio.com/hc/en-us/community/posts/200645248-Setting-up-LD-LIBRARY-PATH-for-a-rsession](https://support.rstudio.com/hc/en-us/community/posts/200645248-Setting-up-LD-LIBRARY-PATH-for-a-rsession)

[2] [http://www.tldp.org/HOWTO/Program-Library-HOWTO/shared-libraries.html](http://www.tldp.org/HOWTO/Program-Library-HOWTO/shared-libraries.html)

# sql - 为什么在 SQL 中动态选择列名和表名如此困难？

> ID：10921158
> 
> 赞同：4
> 
> 时间：2012-06-06T19:50:50.837
> 
> 标签：sql, language-design

我认为必须有一个特定的设计原因导致您不能编写如下查询：

```
select 
    (select column_name 
    from information_schema 
    where column_name not like '%rate%' 
    and table_name = 'Fixed_Income')
from Fixed_Income 
```

而是不得不求助于动态SQL。

有谁知道这是什么原因？我试着用谷歌搜索它，但所有的点击都是寻求帮助解决问题的呼声——这意味着它是一个非常普遍的需求，而且还没有被很好地理解。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T19:59:40.487

原因是查询优化器需要知道您在编译时引用的确切模式对象。它需要他们来优化查询。如果没有这些信息可供查询优化器使用，您不会相信 RDBMS 会多么慢。

这有点像静态类型与动态类型在实践中的性能差异：通常存在不小的差异（我在这里只考虑主流语言）。编译器可以利用静态信息生成出色的代码。

即使存在此功能，也可以通过首先计算表名和列名，然后执行标准的“静态”查询计划来实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T20:10:57.527

你问了一个非常有趣的问题。

“关系代数”中的“关系”是指名称-值对，而不是表之间的关系。在关系代数中，不要求集合（表）中的所有记录都具有相同的列。

我最好的猜测是，限制与实体关系图的想法有关。数据库是围绕表设计的，这些表之间存在关系。数据存储和访问的关系数据库的选择特别是当数据可以以这种方式存储时。了解实体及其属性表明了数据的静态形式，因此可以在查询中使用静态引用。

此外，SQL 作为一种语言是一种*声明性*语言，而不是一种*过程性*语言。这暗示了——但不强加——一个与查询运行分开的编译步骤。通常，SQL 引擎执行以下操作（在非常高的级别）：

1.  将查询编译成某种数据流过程。
2.  优化数据流流程。（通常是编译过程的一部分。）
3.  运行查询。

前两个导致所谓的“查询计划”。但是，除非您了解正在操作的对象，否则您确实无法进行优化。因此，动态选择表和列意味着优化将成为运行查询的一部分，而不是编译它。

最后，一些数据库如 SQL Server 支持动态 SQL。这允许您构建同时编译和运行的字符串。这对于复杂的决策支持查询非常有用。当您需要快速的事务吞吐量时不建议使用，因为编译的开销相对于查询而言太高了。

# python - 我应该明确终止过期的线程吗？

> ID：10921162
> 
> 赞同：1
> 
> 时间：2012-06-06T19:51:05.780
> 
> 标签：python, multithreading

我有一个线程池，其中包含执行特定任务的线程。任务完成后，我让一个worker的run()方法终止。

在此之后，我应该使用 sys.exit() 显式终止线程吗？我注意到工作线程在后台持续存在，即使在任务完成后也是如此。

清除旧线程的推荐方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T20:19:00.580

执行`sys.exit`将退出整个应用程序。没有必要对线程完成执行做任何事情。

有关停止/终止线程的进一步参考，请参见此[问题](https://stackoverflow.com/questions/323972/is-there-any-way-to-kill-a-thread-in-python)。

# mysql - 如何抑制 MySQL 错误？

> ID：10921164
> 
> 赞同：7
> 
> 时间：2012-06-06T19:51:06.797
> 
> 标签：mysql

我有一个问题，我们的数据库每分钟接收约 1000 次更新，而且我们经常收到错误响应：

```
TAF: 1297 (HY000) at line 1: Got temporary error 899 'Rowid already allocated' from NDBCLUSTER 
```

它出现在我们给客户的应用程序中。

有没有办法在 MySQL 级别抑制这些错误？由于我不是此应用程序的开发人员，我不确定执行更新的语言是什么，但我假设是 shell 脚本或 C 程序。

我正在使用 MySQL：5.1.44-ndb-7.1.3-cluster-log（2 个集群节点和 1 个集群管理节点）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-04T12:03:48.120

您是否尝试过在 SQL 语句中使用 'IGNORE' 子句，相关文档在[这里](http://mysqlserverteam.com/improvements-to-the-mysql-ignore-implementation/)

使用 IGNORE 子句会将错误降级为警告，这些警告使用“SHOW WARNINGS;”显示 命令

# java - 这是什么意思？

> ID：10921167
> 
> 赞同：1
> 
> 时间：2012-06-06T19:51:14.347
> 
> 标签：java, android

> **可能重复：**
> [Java this.method() vs method()](https://stackoverflow.com/questions/6547310/java-this-method-vs-method)

我一直在阅读一些东西并做一些关于 android java 的教程，但我仍然不明白“this”是什么意思，就像下面的代码一样。

```
 View continueButton = this.findViewById(R.id.continue_button);
    continueButton.setOnClickListener(this);
    View newButton = this.findViewById(R.id.new_button);
    newButton.setOnClickListener(this); 
```

另外为什么在这个例子中，一个按钮不是用 Button 而是用 View 定义的，有什么区别？

附言。伟大的网站！尝试学习 java 并通过在这里搜索得到了很多答案！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T19:53:18.023

`this`关键字是[对当前对象的](http://docs.oracle.com/javase/tutorial/java/javaOO/thiskey.html)引用。它用于传递对象的*这个*实例，等等。

例如，这两个分配是相等的：

```
class Test{

    int a;

    public Test(){
        a = 5;
        this.a = 5;
    }

} 
```

有时您有一个要访问的隐藏字段：

```
class Test{

    int a;

    public Test(int a){
        this.a = a;
    }

} 
```

在这里，您为该字段分配了`a`参数中的值`a`。

`this`关键字与方法的工作方式相同。同样，这两个是相同的：

```
this.findViewById(R.id.myid);
findViewById(R.id.myid); 
```

最后，假设您有一个 MyObject 类，它有一个采用 MyObject 参数的方法：

```
class MyObject{

    public static void myMethod(MyObject object){
        //Do something
    }

    public MyObject(){
        myMethod(this);
    }

} 
```

在最后一个示例中，您将当前对象的引用传递给静态方法。

> 另外为什么在这个例子中，一个按钮不是用 Button 而是用 View 定义的，有什么区别？

在 Android SDK 中，[a](http://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html)`Button`是. 您可以请求as a并将其[转换](http://www.javabeginner.com/learn-java/java-object-typecasting)为 a ：`View``Button``View``View``Button`

```
Button newButton = (Button) this.findViewById(R.id.new_button); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T19:53:37.757

`this`指的是被操作的对象的实例。

在上述情况下，`this.findViewById(R.id.continue_button)`这是指父类中的方法（特别是[`Activity.findViewById()`](http://developer.android.com/reference/android/app/Activity.html#findViewById%28int%29)or [`View.findViewByid()`](http://developer.android.com/reference/android/view/View.html#findViewById%28int%29)，假设您正在编写自己的子类`Activity`or `View`！）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T19:53:10.847

“this”是当前对象实例。

```
class Blaa
{
   int bar=0;
   public Blaa()
   {}
   public void mogrify(int bar,Blaa that)
   {
       bar=1; //changes the local variable bar
       this.bar=1; //changes the member variable bar. 
       that.bar=1; //changes "that"'s member variable bar. 
   }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T19:53:22.897

`this`引用一个类的当前实例

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T19:55:03.143

`this`在 Java 中是对当前对象实例的引用。所以如果你正在为类写一个方法`MyClass`，`this`就是当前的实例`MyClass`。

请注意，在您的情况下，写作`this.findViewById(...)`并不是真正必要的，并且可能被认为是不好的风格。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-06T20:14:56.897

“this”在面向对象的语言（如 java、c#）中是对您正在调用该方法的对象或您正在访问其数据的对象的引用。

看看这个链接是否有助于你更多地理解“这个”——

[http://docs.oracle.com/javase/tutorial/java/javaOO/thiskey.html](http://docs.oracle.com/javase/tutorial/java/javaOO/thiskey.html)

# sqlite - 正确的 SQLite 语法 - UPDATE SELECT with WHERE EXISTS

> ID：10921172
> 
> 赞同：12
> 
> 时间：2012-06-06T19:51:37.060
> 
> 标签：sqlite, sql-update, where, exists

我正在尝试更新 SQLite 表中列中的选定值。我只想更新满足条件的 maintable 中的单元格，并且必须将单元格更新为从子表中获取的单个值。

我尝试了以下语法，但我只得到一个单元格更新。我还尝试了将所有单元格更新为子表的第一个选定值的替代方法。

```
UPDATE maintable
SET value=(SELECT subtable.value FROM maintable, subtable
WHERE  maintable.key1=subtable.key1 AND maintable.key2=subtable.key2)
WHERE EXISTS (SELECT subtable.value FROM maintable, subtable
WHERE  maintable.key1=subtable.key1 AND maintable.key2=subtable.key2) 
```

什么是适当的语法？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-01-16T03:24:43.783

您可以使用 来执行此操作`update select`，但一次只能执行一个字段。如果 Sqlite 支持更新语句上的连接会很好，但它不支持。

这是一个相关的 SO 问题，[How do I UPDATE from a SELECT in SQL Server?](https://stackoverflow.com/questions/2334712/update-from-select-using-sql-server) ，但对于 SQL Server。那里有类似的答案。

```
sqlite> create table t1 (id int, value1 int);
sqlite> insert into t1 values (1,0),(2,0);
sqlite> select * from t1;
1|0
2|0
sqlite> create table t2 (id int, value2 int);
sqlite> insert into t2 values (1,101),(2,102);
sqlite> update t1 set value1 = (select value2 from t2 where t2.id = t1.id) where t1.value1 = 0;
sqlite> select * from t1;
1|101
2|102 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-04-29T16:10:09.997

默认情况下，SQLite 中不存在`update`with ；`joins`但是我们可以使用 https://www.sqlite.org/lang_update.html 中的++[来做](https://www.sqlite.org/lang_update.html)`with-clause`这样的事情`column-name-list`：`select-stmt`

```
CREATE TABLE aa (
_id INTEGER PRIMARY KEY,
a1 INTEGER,
a2 INTEGER);

INSERT INTO aa  VALUES (1,10,20);
INSERT INTO aa  VALUES (2,-10,-20);
INSERT INTO aa  VALUES (3,0,0);

--a bit unpleasant because we have to select manually each column and it's just a lot to write
WITH bb (_id,b1, b2)  
AS  (SELECT _id,a1+2, a2+1 FROM aa WHERE _id<=2) 
UPDATE aa  SET a1=(SELECT b1 FROM bb WHERE bb._id=aa._id),a2=(SELECT b2 FROM bb WHERE bb._id=aa._id)
WHERE _id in (SELECT _id from bb);

--soo now it should be (1,10,20)->(1,12,21) and (2,-10,-20)->(2,-8,-19), and it is
SELECT * FROM aa;

--even better with one select for each row!
WITH bb (_id,b1, b2)  
AS  (SELECT _id,a1+2, a2+1 from aa WHERE _id<=2)
UPDATE aa  SET (a1,a2)=(SELECT b1,b2 FROM bb WHERE bb._id=aa._id)
WHERE _id in (SELECT _id from bb);

--soo now it should be (1,12,21)->(1,14,22) and (2,-8,-19)->(2,-6,-18), and it is
SELECT * FROM aa;

--you can skip the WITH altogether
UPDATE aa SET (a1,a2)=(SELECT bb.a1+2, bb.a2+1 FROM aa AS bb WHERE aa._id=bb._id)
WHERE _id<=2;

--soo now it should be (1,14,22)->(1,16,23) and (2,-6,-18)->(2,-4,-17), and it is
SELECT * FROM aa; 
```

希望 sqlite 足够聪明，不会增量查询，但根据文档它是。当使用一个选择（案例 2 和 3）设置多个列时，无效的 id（无`where _id in`行）将给出一个无法使用 忽略的错误`ON IGNORE`，案例 1 会将列设置为`null`（对于所有 id > 2），这也很糟糕。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-01-22T22:18:34.673

在这种情况下，它只更新来自 maintable 的每个 raw 的 subtable 中的一个值。错误是当子表包含在 SELECT 语句中时。

```
UPDATE maintable
SET value=(SELECT subtable.value 
             FROM subtable
             WHERE  maintable.key1=subtable.key1 ); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-15T04:34:47.743

您需要使用 INSERT OR REPLACE 语句，如下所示：

假设 maintable 有 4 列：key、c​​ol2、col3、col4
并且您想用 subtable 中的匹配值更新 col3

```
INSERT OR REPLACE INTO maintable
SELECT maintable.key, maintable.col2, subtable.value, maintable.col4
FROM maintable 
JOIN subtable ON subtable.key = maintable.key 
```

# jquery - IPv4验证Jquery

> ID：10921177
> 
> 赞同：1
> 
> 时间：2012-06-06T19:52:00.213
> 
> 标签：jquery, html

我正在尝试编写一个验证 IPv4 地址的函数。

一切似乎都很好，但似乎没有选择正确的课程。

我的代码在这里：http: [//jsfiddle.net/felix001/X7EuJ/23/](http://jsfiddle.net/felix001/X7EuJ/23/)

```
<label for="input">IP</label>
<input type="text" name="input"  id="input" size="22" />
<input type="submit" value="submit" "whatmask_input" id="submit"  align="right" /> 
```

JavaScript：

```
function ipv4addr(x) {
    var REGEX = /^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/;
    if ($x != $REGEX) {
        $("#input").addClass(".bad");
    }
    else {
        $("#input").addClass(".good");
    }
}

$(document).ready(function() {
    $("#submit").click(ipv4addr("#input"));

}); 
```

谁能告诉我解决此问题的最佳方法？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T19:57:01.597

在打开 fiddler 页面时加载浏览器的开发工具控制台（例如，在[Chrome中）。](https://developers.google.com/chrome-developer-tools/docs/console)

第一个错误是：

```
ReferenceError: Can't find variable: $x 
```

不需要在变量名前加上 $，`$foo`并且`foo`是两个不同的变量名。如果你有`var foo`，那么`foo`是变量名。

查看代码，这可能不会达到您的预期：

```
$("#submit").click(ipv4addr("#input")); 
```

这将与以下内容相同：

```
var result = ipv4addr("#input");
$("#submit").click(result); 
```

也就是说，将调用的返回值`ipv4addr`（始终未定义）传递给 click 方法。您可能希望传递一个函数以在每次点击时被调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T19:56:30.487

试试这个功能：

```
function isDottedIPv4(s)
{
 var match = s.match(/^(\d+)\.(\d+)\.(\d+)\.(\d+)$/);
 return match != null &&
        match[1] <= 255 && match[2] <= 255 &&
        match[3] <= 255 && match[4] <= 255;
}

isDottedIPv4("127.0.0.001") // true
isDottedIPv4("448.90210.0.65535") // false
isDottedIPv4("microsoft.com") // false 
```

# c++ - Qt 中有哪些方法可以序列化对象图？

> ID：10921179
> 
> 赞同：2
> 
> 时间：2012-06-06T19:52:04.143
> 
> 标签：c++, serialization, qt4

如果有一个对象图，所有这些对象都派生自 QtObject，其中一些使用 Qt 属性，是否有内置方法或可取的方法来序列化它们？我宁愿不使用数据库支持的 ORM，也不需要在运行时对对象进行水合的高级方法。

换句话说，如果我序列化了 n 个对象，每个对象都是它们自己图的根，那么我能够在运行时简单地读回它们并构建它们的“名称”到指针的映射就可以了。我需要高级查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T17:56:02.730

Qt 没有提供自动序列化 QObjects 的方法，因为有许多问题 Qt 无法知道答案（即如何序列化指向对象的指针）。您需要做一些工作来告诉 Qt 如何序列化您的对象。这是一篇解释如何做到这一点的帖子。

[使用 Qt 进行序列化](https://stackoverflow.com/a/2571212/1329652)

# ruby-on-rails - 解决 create(params[:subscription]) 用 json 做 POST

> ID：10921180
> 
> 赞同：0
> 
> 时间：2012-06-06T19:52:08.670
> 
> 标签：ruby-on-rails, ruby-on-rails-3

以下查询

```
$ curl http://localhost:3000/subscriptions.json -d campaign=CAMPAIGN -d phone=6446342542 -d auth_token=QWvHBzkzGCef58osasxz 
```

正在返回

```
{"errors":{"phone":["can't be blank","Please enter a valid phone number."],"campaign":["can't be blank"]}} 
```

动作是

```
def create
  @subscription = Subscription.create(params[:subscription])
  respond_with(@subscription)
end 
```

该错误似乎是因为我没有`params[:subscription]`通过 json 发送，正如我之前[的为响应与（@object）](https://stackoverflow.com/questions/10920275/implemention-a-specific-action-for-a-model-that-respond-withobject/10920387#10920387)问题的模型实现特定操作所回答的那样。

如果我尝试添加`Subscription.create(params[:subscription][:phone],..)`我得到的细节

```
<h1>
 NoMethodError
   in SubscriptionsController#create 
```

```
nil:NilClass 的未定义方法“[]”
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T20:16:51.567

```
curl -v \
-H "Accept: application/json" \
-H "Content-type: application/json" \
-X POST \
-d '{"subscription":{"campaign":"CAMPAIGN","phone":"6446342542"}, \
"auth_token":"QWvHBzkzGCef58osasxz"}' \
http://localhost:3000/subscriptions.json 
```

尝试类似的事情（在一行中可能更可取......没有反斜杠......我这样做是为了让您阅读清晰......但它也适用于反斜杠）

# java - 从视图调用 Activity

> ID：10921181
> 
> 赞同：1
> 
> 时间：2012-06-06T19:52:09.447
> 
> 标签：java, android, observer-pattern

我有一个名为的类`TouchImageView extends ImageView`，我检测用户点击它的位置。如果这是一个兴趣点，我想调用一个方法`Detailed_Image_Activity`来更新一个`WebView`. 我怎样才能做到这一点？

我发现了一些关于使用观察者和可观察对象的想法，但我不知道该怎么做。我发现这个解决方案[相当于 Android 中的 iOS NSNotificationCenter？](https://stackoverflow.com/questions/10327200/equivalent-of-ios-nsnotificationcenter-in-android)但我不能让它工作

这是我在`TouchImageView`课堂上的代码......

```
switch (event.getAction()) {
    case MotionEvent.ACTION_DOWN:
        if(isPointOfInterest) {
            //The code below is used to update the WebView
            //The task called below exists in the Detailed_Image_Activity
            DownloadHighlightBackground HighlightDownloaderTask = new DownloadHighlightBackground();
            HighlightDownloaderTask.execute(new String[] { arg1.toString() });
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T19:54:35.840

要启动一个活动，您需要访问应用程序的上下文，然后您可以调用 startActivity。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T15:24:10.890

试试这个，

您可以通过这种方式从视图中获取活动..

```
((MyActivity)getContext()).method_name(); 
```

# android - 删除 RadioButton 图标 Android

> ID：10921184
> 
> 赞同：6
> 
> 时间：2012-06-06T19:52:24.127
> 
> 标签：android, radio-button

有没有办法从 RadioButton 中完全删除图标？

我将文本加粗而不是使用图标。

将 android:button 设置为 @null 或 @android:color/transparent 只会隐藏按钮并且仍然会弄乱我的测试定位。

我想我可以使用一个只有 1dip 大的虚拟视图，但我想检查是否有更少的黑客攻击。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-06T20:07:30.150

尝试将背景和按钮设置为@null。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-22T19:20:11.920

set`android:button="@null"`将删除默认的单选图标

# javascript - 如何延迟 iframe 中的浏览器导航以完成 AJAX 请求？

> ID：10921193
> 
> 赞同：0
> 
> 时间：2012-06-06T19:53:08.140
> 
> 标签：javascript, ajax, google-chrome, iframe

我正在使用小书签将 iframe 注入另一个网站，并在提交页面上的任何表单时尝试将数据发布回我的服务器。不幸的是，iframe 中的 AJAX 请求并不总是在浏览器丢弃所有连接作为导航的一部分之前完成。如何在 onsubmit 期间可靠地将数据发送回我的服务器？

我尝试过：

*   onbeforeunload - 在表单的 onsubmit 事件之后不触发
*   onbeforeunload 似乎可以在它处于活动状态时阻止后台 javascript 事件
*   使 AJAX 请求同步 - 没有帮助，可能是因为请求在卸载本身期间开始
*   onunload - 在请求之后触发，但似乎没有任何权限来减慢 AJAX 的导航

我担心尝试：

*   打破表单提交，因为提交时可能会运行 javascript
*   由于未知风险和可能的计划超限，创建浏览器扩展程序
*   直接运行来自父级的请求 - 该请求是在 JQuery 之上运行的内部库的一部分，并且绕过它会很脆弱

在所有情况下，我所针对的浏览器都是 Google Chrome（最新版本）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T20:53:01.993

我最终生成了弹出窗口而不是使用 AJAX 请求，并从 GET 参数中提取我的数据。对浏览器的响应是一个 HTML 页面，其头部有一个 script 标签，其中包含`window.close()`. 这似乎暂时有效。

# ruby-on-rails - 到目前为止已经使用了多少测功小时？

> ID：10921195
> 
> 赞同：5
> 
> 时间：2012-06-06T19:53:13.223
> 
> 标签：ruby-on-rails, heroku

有没有办法查看这个月到目前为止你在 Heroku 上使用了多少 dyno 小时？我知道它在您收到的发票上，但我想要一些“实时”数据。

我经常使用一些“一次性进程”（heroku run rake ...）并希望以某种方式跟踪它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T10:14:01.870

这是一个错误。

联系 Heroku 支持，他们修复了它。您可以在此处查看当前使用情况：[https ://api.heroku.com/account](https://api.heroku.com/account)

# parsing - Antlr：如果重复列表，我可以用不同的方式重写树吗

> ID：10921197
> 
> 赞同：2
> 
> 时间：2012-06-06T19:53:20.753
> 
> 标签：parsing, antlr, expression-trees, antlr3, abstract-syntax-tree

在我的 ANTLR 语法中，我有一条规则说查询可以是单个片段或与 PLUS 符号连接在一起的片段列表。我正在生成一个 AST 作为输出，我想做的是根据片段的数量重写节点。

如果有一个片段，则应该只有一个节点。如果有多个片段，我希望根节点为 PLUS，所有片段为子节点。这可能吗？

```
query
    : frag (PLUS frag)*  -> ^(PLUS frag*)
    ; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T20:10:15.150

当然，您可以在重写规则中使用谓词，如下所示：

```
p
 : M N? P? -> {boolean-expression-1}? ^(rewrite-rule-1)
           -> {boolean-expression-2}? ^(rewrite-rule-2)
           ->                         ^(rewrite-rule-3)
 ; 
```

在您的情况下，只需检查`PLUS`布尔表达式中是否存在令牌：

```
query
 : frag (PLUS frag)* -> {$PLUS != null}? ^(PLUS frag+)
                     ->                  frag
 ;

frag
 : ID
 ;

ID
 : 'a'..'z'+
 ;

PLUS
 : '+'
 ; 
```

*（注意这`fragment`是 ANTLR 中的保留关键字）*

输入 like`"a"`将被解析如下：

![在此处输入图像描述](../Images/9547ae6f57c8f92911d1b9b204649f65.png)

并且`"a+b+c+d"`作为：

![在此处输入图像描述](../Images/fceb28a8ae703182164b17a13bb26c3f.png)

我假设您不是在寻找二叉树，对吗？但是，如果您使用内联树运算符 ,`^`将使这变得如此简单：

```
query
 : frag (PLUS^ frag)*
 ; 
```

为：创建以下 AST `"a+b+c+d"`：

![在此处输入图像描述](../Images/e2fb16ccc79cf17fb61c10d4d8a22ac4.png)

# c# - 在 C# (.net 2.0) 中区分大型 XML 文件

> ID：10921198
> 
> 赞同：0
> 
> 时间：2012-06-06T19:53:21.867
> 
> 标签：c#, xml, diff

我有点不得不使用 .Net 2.0，所以 LINQ xml 不可用，虽然我很感兴趣它会如何比较......

我必须编写一个内部程序来下载、提取和比较一些本质上是构建配置的大型 XML 文件（每个大约 10 兆）。我第一次尝试使用库，例如[​​ Microsoft 的 XML diff/patch](http://msdn.microsoft.com/en-us/library/aa302294.aspx)，但比较文件需要 2-3 分钟，即使忽略空格、命名空间等（我一次测试每个忽略一个，试图找出什么是最快）。我试图实现我自己的想法——来自 XmlDocument 对象的节点列表、根的直接后代的键的字典（顺便说一下，45000 个孩子）指向整数以指示 XML 文档中的节点位置......至少运行 2 分钟。

我的最终实现在 1-2 秒内完成 - 我使用几行上下文对 diff 进行了系统进程调用，并将这些结果保存以显示（我们的开发机器包括 cygwin，谢天谢地）。

我不禁想到有一种更好的、特定于 XML 的方法来做到这一点，它与纯文本差异一样快 - 特别是因为我真正感兴趣的是 Name 元素，它是每个直接的子元素后代，并且可以出于我的目的丢弃文件的 4/5（我们只需要知道包含哪些文件，而不需要知道涉及语言或版本的任何其他内容）

因此，尽管 XML 很受欢迎，但我敢肯定有人不得不做类似的事情。比较这些大型 XML 的快速有效方法是什么？（最好是开源或免费的）

编辑：节点样本 - 我只需要找到缺失的 Name 元素（也有超过 45k 个节点）

```
<file>
     <name>SomeFile</name>
     <version>10.234</version>
     <countries>CA,US</countries>
     <languages>EN</languages>
     <types>blah blah</types>
     <internal>N</internal>
</file> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T20:29:23.210

```
XmlDocument source = new XmlDocument();
source.Load("source.xml");
Dictionary<string, XmlNode> files = new Dictionary<string, XmlNode>();
foreach(XmlNode file in source.SelectNodes("//file"))
    files.Add(file.SelectSingleNode("./name").InnerText, file);

XmlDocument source2 = new XmlDocument();
source2.Load("source2.xml");
XmlNode value;
foreach(XmlNode file in source2.SelectNodes("//file"))
    if (files.TryGetValue(file.SelectSingleNode("./name").InnerText, out value))
      // This file is both in source and source2.
    else
      // This file is only in source2. 
```

我不确定你到底想要什么，我希望这个例子对你的追求有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T20:33:12.247

可以通过多种方式区分 XML。不过，您对细节并不是很具体。发生的是文件很大，您只需要 4/5 的信息。

那么**算法**如下：

*   规范化文档并将其简化为重要的信息。
*   保存结果。
*   比较结果。

和**实施**：

*   使用高效的[XmlReader API](http://msdn.microsoft.com/en-us/library/system.xml.xmlreader.aspx)生成信息的纯文本表示。为什么是纯文本表示？因为差异工具基于存在​​纯文本的假设。我们的眼球也是如此。为什么`XmlReader`？您可以使用 SAX，它可以节省内存，但`XmlReader`效率更高。至于该纯文本文件的确切规格……您只是没有包含足够的信息。
*   将纯文本文件保存到某个临时目录。
*   使用命令行 diff 实用程序（如[GnuWin32 diff](http://gnuwin32.sourceforge.net/packages/diffutils.htm)）来获取一些 diff 输出。是的，我知道，不是完全正确，而是开箱即用，无需编码。如果您熟悉某些 C# diff API（我不熟悉），那么当然可以使用该 API。
*   删除临时文件。（或者如果您要重复使用它们，可以选择保留它们。）

# css - 试图使标题高度自动

> ID：10921201
> 
> 赞同：0
> 
> 时间：2012-06-06T19:53:24.033
> 
> 标签：css

[我的网站](http://www.averylawoffice.ca/averywordpress)是一个 wordpress 网站，但我相信我唯一需要解决的问题就是标题高度。主页作为一个 403px 高的旋转横幅，然后所有其他页面都有一个 303px 高的标题图像。我只是想让标题高度为自动，因此#container 将自动拥抱横幅的底部，无论其高度如何。

CSS

```
header { width: 960px; height: auto; margin: 0 auto; display: block;}

#container { width: 960px; margin: 20px auto; padding: 0 1.5em;} 
```

还有什么应该让#container 意识到标头在那里？

## 更新：

新的 HTML

```
<div style="clear:both;"></div>
</div><!-- end of container--> 
```

新的 CSS

```
#banner { 
    width: 960px;      /* same with already defined */
    height: 403px;
    margin: 0 auto;
 } 
```

我所做的唯一想法略有不同是将导航放在标题而不是横幅下方，因为它位于我不想要的横幅下方。它看起来一样，但似乎与我之前所做的没有什么不同。我在横幅下的博客页面上仍然存在差距。

我感谢 Zuul 的帮助。我确实认为我还有更多工作要做，然后我们才能解决这个问题。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T20:18:31.763

布局的问题不在于`header`标签，有些元素的位置很奇怪，导致了几个问题：

**这是为了纠正布局流程而要做的事情的列表：**

### 1)

从. `<div id="banner">`_`<nav id="main-navigation">`

`<nav id="main-navigation">`设置为`height:70px`并且滑块远高于此。

**将其**作为`<header>` **或**之后`<header>`和 之前的子项`<div id="container">`。

**例如，**

```
<header>...</header>
<div id="banner">...</div>     <!-- here is better -->
<div id="container">...</div> 
```

* * *

### 2)

在第一步之后，您可以从`#banner`以下 CSS 中删除：

**消除**

```
#banner {
    left: 50%;
    margin-left: -480px;
    position: absolute;
    top: 69px;
    width: 960px;
    z-index: 1;
} 
```

**添加**

```
#banner {
    width: 960px;      /* same with already defined */
    height: 403px;
    margin: 0 auto;
} 
```

* * *

### 3)

步骤 01 和 02 应与高度问题`#banner`一起固定位置。`header`

现在仍然修复`#container`包含浮动元素并应在最后清除的内容。

在这里，您当前的课程`clearfix`将不起作用，包含许多声明，我建议：

```
<div id="container">

   <div id="main">...</div>
   <aside>...</aside>

   <div style="clear:both;"></div>

</div> 
```

在最后添加新`<div style="clear:both;"></div>`的`#container`将允许`float`清除并正常恢复文档流。

* * *

# 已编辑

第一阶段已经完成，现在您唯一需要做的就是`height`从中删除`#banner`，差距就会消失。

```
#banner {
    width: 960px;      /* keep this */
    margin: 0 auto;    /* keep this */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T20:04:18.107

在容器 div 结束之前添加`div`a `style`。`clear:both`这将允许根据其中的内容制作容器 div 的高度。您可以创建一个名为的类`clear`，并在其中放置此样式，以便您可以`class`在网站的任何地方使用它。

# doctrine-orm - 在 Doctrine 2 中进行嵌套查询的主页？

> ID：10921202
> 
> 赞同：1
> 
> 时间：2012-06-06T19:53:26.823
> 
> 标签：doctrine-orm

我想用 Doctrine 2 来做这个：

```
SELECT *, 
 (SELECT action FROM operations_history
         WHERE timesheet.id = operations_history.timesheet_id
         ORDER BY operations_history.created DESC 
          LIMIT 1) as status 
FROM timesheet; 
```

有什么帮助吗？如果可能的话，我想这样做`createQueryBuilder();`。谢谢。

# tridion - 自动关联页面元数据？

> ID：10921207
> 
> 赞同：4
> 
> 时间：2012-06-06T19:53:45.580
> 
> 标签：tridion

*链接需要 SDL Live Content 登录。*

[我们可以在文件夹属性](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/concept_04DB0D4B4B1D40CCBC32AFC268CCE241)中选择默认模式（和强制选项）。这些文件夹中的新组件将选择架构并填写适当的字段。

我们可以为[结构组 (SG) 属性](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/concept_B1D62E9FF7BD4EF39DA32CE52274E1BA)选择默认页面模板。这些 SG 中的新页面将选择页面模板。

***对于页面元数据*，我们是否有类似的选项，以便在给定的 SG 中，作者同时获得页面模板和预定的页面元数据（字段）**：

*   页面创建
*   页面模板选择

我们可以使用内联编辑 (SiteEdit) 和页面原型轻松地做到这一点。但是，您将如何使用 Content Manager Explorer 配置或实现这种类型的需求？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T21:24:27.990

我想说有很多方法可以实现这一点：

1) 使用 UI '页面类型' - 如果您使用的页面作为页面类型，则应该保留相同的元数据。*我没有测试过这个！！！也许你可以确认？

2）GUI扩展名 - 选择页面模板后，根据页面模板选择了页面元数据。

3) 事件系统。我不确定这将如何工作，因为它可能必须在创建页面时（检查是否使用默认模板）或在使用模板且未选择元数据模式时保存.. .但是如果有强制性的元数据等等等等。

4) 页面模板。这将设置元数据（在发布或预览时） - 或警告用户应为此给定页面模板设置特定元数据。

希望这可以帮助。

谢谢

约翰

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T20:21:31.113

非常有趣的问题，我可以看到此功能对编辑器的好处。我没有你的答案。但是 AFAIK，甚至事件系统在这里可能不相关，因为除非我们保存页面，否则当您开始创建页面时不会触发任何事件。GUI扩展有可能吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T21:03:18.250

当您创建一个新项目时，这通过 API 中的 GetNewitem() 方法（或旧货币中的 GetNewObject()）发生。我一直认为这个活动应该有单独的事件系统挂钩，而不是修改现有项目。我曾经在 idea.sdltridion.com 上就组件提出过这个建议，但是有人将我推荐给 OnSchemaGetInstanceDataPost 事件挂钩，讨论就结束了。

所以在新组件的情况下，模式会被自动查询，并且通过钩子，你可以干扰默认数据。到目前为止一切都很好，但我仍然相信能够在首次创建时修改*任何项目类型的默认数据通常很有用。*

# c - CPU TSC 获取操作，尤其是在多核多处理器环境中

> ID：10921210
> 
> 赞同：15
> 
> 时间：2012-06-06T19:53:57.180
> 
> 标签：c, assembly, multicore, cpu-registers, microprocessors

在 Linux 世界中，要获得纳秒精度的计时器/时钟，可以使用：

```
#include <sys/time.h>

int foo()
{
   timespec ts;

   clock_gettime(CLOCK_REALTIME, &ts); 
   //--snip--      
} 
```

[这个答案](https://stackoverflow.com/a/275031/143897)提出了`asm`一种使用指令直接查询 cpu 时钟的方法`RDTSC`。

在多核、多处理器架构中，这个时钟滴答/定时器值如何在多个内核/处理器之间同步？我的理解是，内在的围栏正在完成。这种理解正确吗？

你能推荐一些可以详细解释这一点的文档吗？我对 Intel Nehalem 和 Sandy Bridge 微架构感兴趣。

**编辑**

将进程限制为单个内核或 cpu 不是一种选择，因为该进程非常庞大（就消耗的资源而言）并且希望优化利用包括所有内核和处理器的机器中的所有资源。

**编辑**

感谢您确认 TSC 在内核和处理器之间同步。但我最初的问题是这种同步是如何完成的？是用某种围栏吗？你知道任何公共文件吗？

**结论**

感谢所有输入：以下是本次讨论的结论：TSC 在初始化时使用 RESET 进行同步，该 RESET 发生在多处理器/多核系统中的内核和处理器之间。之后，每个核心都是独立的。TSC 通过锁相环保持不变，该锁相环将标准化频率变化，从而标准化**给定核心内**的时钟变化，这就是 TSC 如何在核心和处理器之间保持同步。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-16T03:45:01.787

直接来自英特尔，这里解释了最近的处理器如何保持以恒定速率滴答的 TSC，在多插槽主板上的内核和封装之间同步，甚至在处理器进入深度睡眠 C 状态时可能继续滴答作响，尤其是 Vipin Kumar EK (Intel) 的解释：

[http://software.intel.com/en-us/articles/best-timing-function-for-measuring-ipp-api-timing/](http://software.intel.com/en-us/articles/best-timing-function-for-measuring-ipp-api-timing/)

这是 Intel 讨论跨内核同步 TSC 的另一个参考，在这种情况下，他们提到 rdtscp 允许您以原子方式读取 TSC 和处理器 ID，这对于跟踪应用程序很重要……假设您要跟踪可能从一个内核迁移到另一个内核的线程的执行，如果您在两个单独的指令（非原子）中执行此操作，那么您无法确定线程在读取时钟时位于哪个内核。

[http://software.intel.com/en-us/articles/intel-gpa-tip-cannot-sychronize-cpu-timestamps/](http://software.intel.com/en-us/articles/intel-gpa-tip-cannot-sychronize-cpu-timestamps/)

主板上的所有插座/封装都接收两个外部公共信号：

1.  重启
2.  参考时钟

当您为主板供电时，所有插槽同时看到 RESET，所有处理器封装都从外部晶体振荡器接收参考时钟信号，并且处理器中的内部时钟保持同相（尽管通常使用高倍频器，如 25x）称为锁相环 (PLL) 的电路。最近的处理器将以处理器额定的最高频率（倍频）为 TSC 计时（所谓的恒定 TSC），而不管任何单个内核可能由于温度或电源管理节流（所谓的不变 TSC）而使用的倍频。Nehalem 处理器，如 2008 年发布的 X5570（和更新的 Intel 处理器）支持“不间断 TSC”，即使在深度掉电 C 状态 (C6) 中保存功率时，它也会继续运行。

[http://www.anandtech.com/show/2199](http://www.anandtech.com/show/2199)

经过进一步研究，我发现了英特尔于 2009 年 12 月 22 日提交的专利，并于 2011 年 6 月 23 日发布，题为“控制多核和线程的时间戳计数器 (TSC) 偏移”

[http://www.freepatentsonline.com/y2011/0154090.html](http://www.freepatentsonline.com/y2011/0154090.html)

此专利申请的 Google 页面（带有指向 USPTO 页面的链接）

[http://www.google.com/patents/US20110154090](http://www.google.com/patents/US20110154090)

据我所知，非核心中有一个 TSC（封装中围绕核心但不属于任何核心的逻辑），它在每个外部总线时钟上按 Vipin Kumar 指定的机器特定寄存器字段中的值递增在上面的链接中 (MSR_PLATFORM_INFO[15:8])。外部总线时钟运行在 133.33MHz。此外，每个内核都有自己的 TSC 寄存器，由所有内核共享的时钟域提供时钟，并且可能与任何一个内核的时钟不同 - 因此当 RDTSC 读取内核 TSC 时必须有某种缓冲区（或 RDTSCP）指令在内核中运行。例如，MSR_PLATFORM_INFO[15:8] 可以在一个包上设置为 25，每个总线时钟非核心 TSC 递增 25，有一个 PLL 将总线时钟乘以 25，并将该时钟提供给每个内核以为其本地 TSC 寄存器提供时钟，从而使所有 TSC 寄存器保持同步。因此，将术语映射到实际硬件

*   恒定 TSC 是通过使用运行在 133.33 MHz 的外部总线时钟实现的，该时钟乘以 MSR_PLATFORM_INFO[15:8] 中指定的恒定乘数
*   不变 TSC 是通过将每个内核中的 TSC 保持在单独的时钟域上来实现的
*   不间断 TSC 是通过在每个总线时钟上增加 MSR_PLATFORM_INFO[15:8] 滴答的非核心 TSC 来实现的，这样多核封装可以进入深度断电（C6 状态）并可以关闭 PLL。 ..无需将时钟保持在较高的乘数。当内核从 C6 状态恢复时，其内部 TSC 将被初始化为非内核 TSC（没有进入睡眠状态的那个）的值，并在软件向 TSC 写入值的情况下进行偏移调整，详细信息在专利中。如果软件确实写入 TSC，则该内核的 TSC 将与其他内核异相，但偏移量恒定（TSC 时钟的频率都通过恒定乘数与总线参考时钟相关联）。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-06-06T20:47:55.203

在较新的 CPU (i7 Nehalem+ IIRC) 上，TSC 在所有内核上同步并以恒定速率运行。因此，对于单个处理器，或单个封装或主板（！）上的多个处理器，您可以依赖同步 TSC。

来自英特尔系统手册 16.12.1

> 较新处理器中的时间戳计数器可能支持增强，称为不变 TSC。处理器对不变 TSC 的支持由 CPUID.80000007H:EDX[8] 指示。不变的 TSC 将在所有 ACPI P-、C- 中以恒定速率运行。和 T 状态。这是向前发展的架构行为。

在较旧的处理器上，您不能依赖恒定速率或同步。

编辑：至少在单个包或主板中的多个处理器上，不变的 TSC 是同步的。TSC 在 /RESET 处重置为零，然后在每个处理器上以恒定速率向前滴答，没有漂移。/RESET 信号保证同时到达每个处理器。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-06T20:05:23.383

[RTDSC](http://en.wikipedia.org/wiki/Time_Stamp_Counter)不跨 CPU 同步。因此，您不能在多处理器系统中依赖它。对于 Linux，我能想到的唯一解决方法是通过设置其亲和性来实际限制进程在单个 CPU 上运行。这可以使用实用程序在外部完成，也可以使用[sched_setaffinity](http://www.kernel.org/doc/man-pages/online/pages/man2/sched_setaffinity.2.html)或[pthread_setaffinity_np](http://www.kernel.org/doc/man-pages/online/pages/man3/pthread_setaffinity_np.3.html)函数在`taskset`“内部”完成。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-14T00:56:43.333

[本手册](http://www.intel.com/content/dam/doc/manual/64-ia-32-architectures-software-developer-vol-3b-part-2-manual.pdf)第 17.12 章描述了最新处理器中使用的不变 TSC。Nehalem 提供了这个时间戳，连同 rtscp 指令，允许在一个原子操作中读取时间戳（不受等待状态等影响）和处理器签名。

据说它适合计算挂钟时间，但它显然不希望跨处理器的值相同。陈述的想法是，您可以查看连续读取是否针对同一 CPU 的时钟，或者针对多个 CPU 读取进行调整。“它还可以用于调整 NUMA 系统中每个 CPU 的 TSC 值差异。”

另请参阅[跨 CPU 内核的 rdtsc 准确度](https://stackoverflow.com/questions/3388134/rdtsc-accuracy-across-cpu-cores)

但是，我不确定接受的答案中的最终一致性结论是否来自于 tsc 可用于挂钟时间的声明。如果一致，那有什么理由原子地确定时间的CPU来源。

NB 英特尔手册中的 TSC 信息已从第 11 章移至第 17 章。

# sql - 使用动态列名的 Oracle SQL 转置

> ID：10921212
> 
> 赞同：2
> 
> 时间：2012-06-06T19:53:58.357
> 
> 标签：sql, oracle, pivot

我有一个简单的问题需要快速解决。你能借给我你的帮助吗？

问题如下：我有两张表，一张定义表和一张历史表。

```
create table revenue history(operation_date date, revenue_id number, total_revenue number); 
create table revenue_definition(revenue_id number, revenue_name varchar2(100));

insert into revenue_definition values(1,'Car');
insert into revenue_definition values(2,'Minivan');
insert into revenue_definition values(3,'Bus');

insert into revenue history values(sysdate-2,1,100);
insert into revenue history values(sysdate-2,2,150);
insert into revenue history values(sysdate-2,3,100);

insert into revenue history values(sysdate-1,1,200);
insert into revenue history values(sysdate-1,2,150);
insert into revenue history values(sysdate-1,3,200);

insert into revenue history values(sysdate,1,100);
insert into revenue history values(sysdate,2,150);
insert into revenue history values(sysdate,3,100); 
```

现在我需要做的是显示这样的报告；

> operation_date 小型货车巴士
> sysdate 100 150 100
> sysdate-1 200 150 200
> sysdate-2 100 150 100

我知道我可以通过使用解码或 11g 枢轴来做到这一点。但对于那些我需要提前知道收入类型（汽车、小型货车等）的人，每次定义时我都需要更新我的代码。如果可能的话，我想避免这种情况。

欢迎大家提出意见，

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T20:21:54.427

听起来像是动态 sql 的候选者。每次运行查询时，您都需要将 sql 语句实际构建为字符串。您可以通过从定义表中进行选择、循环定义并将它们添加到您的 sql 语句中来构建列名字符串，然后：

```
execute immediate 'sql statement' 
```

我知道没有其他方法可以动态更改查询运行时显示的列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T15:19:07.450

此代码在 Oracle 11g (11.2.0) 数据库上的 SQL*Plus 中运行。

```
column dummy noprint
column "Header" format a14
column "Data"   format a40
SELECT 0 DUMMY
      ,'Operation Date' "Header"
      ,LISTAGG(lpad(' ', 9 - length(d.revenue_name) ,' ') || d.revenue_name ) WITHIN GROUP (ORDER BY d.revenue_id) "Data"
FROM  revenue_definition d
UNION
SELECT 1
      ,to_Char(h.operation_date,'DD-MON-YYYY')
      ,LISTAGG(lpad(' ',9 - length(h.total_revenue),' ') ||h.total_revenue) WITHIN GROUP (Order by d.revenue_id)
FROM revenue_definition d
    ,revenue_history    h
where h.revenue_id = d.revenue_id
group by h.operation_date
ORDER by 1, 2; 
```

并产生这个输出：

```
Header           Data
-------------- ----------------------------------------
Operation Date       Car  Minivan      Bus
15-OCT-2012          100      150      100
16-OCT-2012          200      150      200
17-OCT-2012          100      150      100 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T20:49:20.520

您可以让函数将定义的内容作为单行输出 - 将其连接回定义和历史记录，应该返回您想要的内容并根据定义中的数据更改进行调整。

一个例子： [http ://docs.oracle.com/cd/E18283_01/appdev.112/e17126/tuning.htm#BABIEICA](http://docs.oracle.com/cd/E18283_01/appdev.112/e17126/tuning.htm#BABIEICA)

# java - 有没有办法用 netbeans 中的记录器替换所有 system.out/err 和 e.printstacktraces？

> ID：10921214
> 
> 赞同：2
> 
> 时间：2012-06-06T19:54:05.200
> 
> 标签：java, netbeans, ide, netbeans-7

netbeans 中是否有一个功能可以让我轻松配置并将所有出现的“system.out”和“e.printstacktrace”替换为“logger.info/error/log”？

我使用查找/替换来摆脱所有“system.out”，现在我需要摆脱所有“printstacktraces”，我可能可以编写一个解析器并读取我所有的 java 文件。但在我这样做之前，我只想知道这样的东西是否已经在 netbeans 中实现了，目前在 netbeans 7.1 提示中，它们只显示这些东西在哪里，但我找不到代码重构的选项。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T20:35:12.110

以下将打开`printStackTrace`vim 中包含的每个 .java 文件。

当然，您可以用您选择的文本编辑器替换 vim：

```
alias javafind='find . -name '\''*.java'\'' -print | xargs fgrep -il'
vim `javafind printStackTrace` 
```

第一个命令创建一个别名，该别名返回包含第一个参数的所有 java 文件（从当前目录开始）。

`printStackTrace`第二个命令说：用 vim打开每个包含该术语的文件。

一个更好的解决方案是使用 sed 智能地搜索/替换为正则表达式。

# app-store - 更改 Apple 开发者公司/组织名称

> ID：10921215
> 
> 赞同：0
> 
> 时间：2012-06-06T19:54:11.320
> 
> 标签：app-store

假设一位美国独立开发者作为个人贡献者创建了一个 Apple Developer 帐户。他们选择公司/组织名称“XYZ Apps”。除了报税，他们从不创建 LLP 或提交任何类型的商业文书工作。

现在开发人员希望更改公司/组织名称。Apple 要求提供“法院/商业”文件来验证新名称。开发人员没有说文档，因为没有任何正式的企业名称更改或任何事情。

**在这种情况下，独立开发者如何更新他们的公司/组织名称？**

也许他们可以告诉苹果这只是一个美学名称的改变。非常感谢有经验的人的任何反馈！

**编辑**：在网上阅读之后，似乎创建另一个开发者帐户可能是最简单的途径。这假设您没有具有原始帐户的应用程序，其中确切名称很重要。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T21:46:26.603

Apple 似乎不允许任何“美观”的名称更改，仅允许更改合法的公司名称或合法的公司名称。因此，您可能需要合并您的业务，并请求 Apple 将您的开发者注册更改为公司注册，以便更改您的开发者帐户上的名称。

# ruby-on-rails - RSpec 结果和 Rails 控制台的行为不同

> ID：10921220
> 
> 赞同：0
> 
> 时间：2012-06-06T19:54:43.187
> 
> 标签：ruby-on-rails, rspec, rails-console

这是我的`Lesson`模型：

```
before_create :set_sequence

def set_sequence
  maxseq = Lesson.where(:course_id => self.course_id).maximum("sequence")
  if (maxseq.nil?)
    maxseq = 0
  end
  self.sequence = maxseq + 1
end 
```

当我运行`rspec`以下测试失败时：

```
it "validate sequence is setup" do
  lesson = Lesson.create(:title => "Testing", :description => "Testing", :course_id => 1)
  lesson.sequence.should_not eql nil
end 
```

但是，当通过对象进行 T 测试时，`rails console`该`Lesson`对象已成功创建并具有正确的顺序。任何想法为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T20:13:24.370

您在课程中获得的任何验证都可能会在您的回调被调用之前静默中止创建。将其更改为`create!`在规范中进行检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T20:05:38.760

`lesson.sequence.should_not be_nil`据我所知，是测试零的正确方法。你试过吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T05:01:29.537

`FactoryGirl`首先初始化没有参数的对象，然后一个一个地分配参数。在这种情况下，您的模型中的回调可能不起作用。因此，您可以尝试`FactoryGirl`通过添加来改变行为

```
initialize_with { new(attributes) } 
```

到`Lesson`'s 的工厂。我不确定它是否会有所帮助。在 Rails 中测试回调行为很棘手。

# perl - 我可以在不重置其“每个”迭代器的情况下复制哈希吗？

> ID：10921221
> 
> 赞同：15
> 
> 时间：2012-06-06T19:54:49.387
> 
> 标签：perl

我`each`用来遍历 Perl 哈希：

```
while (my ($key,$val) = each %hash) {
   ...
} 
```

然后发生了一些有趣的事情，我想打印出哈希。起初，我考虑类似：

```
while (my ($key,$val) = each %hash) {
   if (something_interesting_happens()) {
      foreach my $k (keys %hash) { print "$k => $hash{$k}\n" }
   }
} 
```

但这行不通，因为每个人都知道在哈希上调用`keys`(or `values`) 会重置用于 的内部迭代器`each`，并且我们可能会得到一个无限循环。例如，这些脚本将永远运行：

```
perl -e '%a=(foo=>1); while(each %a){keys %a}'
perl -e '%a=(foo=>1); while(each %a){values %a}' 
```

没问题，我想。我可以制作哈希的副本，然后打印出副本。

```
 if (something_interesting_happens()) {
      %hash2 = %hash;
      foreach my $k (keys %hash2) { print "$k => $hash2{$k}\n" }
   } 
```

但这也行不通。这也会重置`each`迭代器。事实上，`%hash`在列表上下文中的任何使用似乎都会重置其`each`迭代器。所以这些也永远运行：

```
perl -e '%a=(foo=>1); while(each %a){%b = %a}'
perl -e '%a=(foo=>1); while(each %a){@b = %a}'
perl -e '%a=(foo=>1); while(each %a){print %a}' 
```

这在任何地方都有记录吗？perl 可能需要使用相同的内部迭代器将哈希的内容推送到返回堆栈是有道理的，但我也可以想象不需要这样做的哈希实现。

更重要的是，有什么方法可以做我想做的事吗？在不重置`each`迭代器的情况下获取哈希的所有元素？

* * *

这也表明您也不能在`each`迭代中调试哈希。考虑在以下位置运行调试器：

```
%a = (foo => 123, bar => 456);
while ( ($k,$v) = each %a ) {
    $DB::single = 1;
    $o .= "$k,$v;";
}
print $o; 
```

只需检查调试器停止的哈希值（例如，键入`p %a`或`x %a`），您将更改程序的输出。

* * *

**更新：**我上传[`Hash::SafeKeys`](http://search.cpan.org/perldoc?Hash::SafeKeys)了这个问题的一般解决方案。感谢@gpojd 为我指明了正确的方向，感谢@cjm 的建议，使解决方案变得更加简单。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-06T20:16:28.703

您是否尝试过[Storable](http://search.cpan.org/perldoc?Storable) `dclone`复制它？它可能是这样的：

```
use Storable qw(dclone);
my %hash_copy = %{ dclone( \%hash ) }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T20:07:37.360

这个哈希有多大？遍历它需要多长时间，以便您关心访问的时间？

只需设置一个标志并在迭代结束后执行操作：

```
my $print_it;
while (my ($key,$val) = each %hash) {
    $print_it = 1 if something_interesting_happens();
    ...
}

if ($print_it) {
    foreach my $k (keys %hash) { print "$k => $hash{$k}\n" }
} 
```

尽管也没有理由不在`each`打印输出代码中使用，除非您计划按键排序或其他东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T15:03:54.593

并不真地。`each`非常脆弱。它将迭代状态存储在迭代哈希本身上，当 perl 的其他部分需要时，该状态会被重用。更安全的是忘记它的存在，并始终从结果中迭代您自己的列表`keys %hash`，因为列表上的迭代状态作为`for`循环本身的一部分存储在词法上，因此不会受到其他事物的破坏。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T06:13:41.800

我们不要忘记当你进入循环`keys %hash`时已经定义了。`while`可以简单地将键保存到数组中以供以后使用：

```
my @keys = keys %hash;

while (my ($key,$val) = each %hash) {

    if (something_interesting_happens()) {

        print "$_ => $hash{$_}\n" for @keys;
    }
} 
```

缺点：

*   它不那么优雅（主观）
*   如果被修改它将不起作用`%hash`（但是为什么要首先使用`each`呢？）

优势：

*   它通过避免哈希复制使用更少的内存

# emacs - 广告激活有什么作用？

> ID：10921225
> 
> 赞同：5
> 
> 时间：2012-06-06T19:55:06.687
> 
> 标签：emacs, elisp, advising-functions, defadvice

在[回答](https://stackoverflow.com/a/8129994/357313)中，我注意到：

```
;; Align with spaces only
(defadvice align-regexp (around align-regexp-with-spaces)
  "Never use tabs for alignment."
  (let ((indent-tabs-mode nil))
    ad-do-it))
(ad-activate 'align-regexp) 
```

这[听起来](http://www.gnu.org/software/emacs/manual/html_node/elisp/Around_002dAdvice.html)很有希望，但是......它有什么作用？！

我尝试`eval-region`了代码块。但对我来说，它所做的只是在`align-regexp`文档中添加以下内容：

> **建议使用此功能。**
> 
> around-advice `align-regexp-with-spaces'：
> 永远不要使用制表符进行对齐。

我似乎无法实际使用`align-regexp-with-spaces`，如果这应该是效果......我错过了什么？

我使用了 GNU Emacs 版本 24.0.96.1 (i386-mingw-nt6.1.7601)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T19:55:08.807

在问这个问题时，我意识到我只是没有得到[建议功能](http://www.gnu.org/software/emacs/manual/html_node/elisp/Advising-Functions.html)的想法。

我很清楚：

*   `align-regexp-with-spaces`不是函数也不是变量，而只是一个名称（启用/禁用单个建议）
*   从那以后`(ad-activate 'align-regexp)`，`align-regexp`就按照我的“建议”去做：不要使用标签

所以：`ad-activate`激活通知，有效地改变原始函数的行为。伟大的！

我不明白为什么这比定义一个函数“更好” `align-regexp`。但话又说回来，我对 Emacs Lisp 了解不多。

恐怕额外的文档行只会增加混乱......

# java - ExtJS 网格分页不起作用

> ID：10921227
> 
> 赞同：0
> 
> 时间：2012-06-06T19:55:16.020
> 
> 标签：java, javascript, extjs

我是 extjs 的新手，并试图让网格分页为项目工作。

谁能告诉我是否有为 extjs 网格设置分页的在线教程？我正在获取第一页的记录，但没有单击下一步按钮。

如果有人可以编码或指定需要哪些代码更改才能获得下一组结果，那就太好了。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T00:06:59.880

例如，请查看[http://docs.sencha.com/ext-js/4-1/#!/example/grid/paging.html](http://docs.sencha.com/ext-js/4-1/#!/example/grid/paging.html)

示例使用的服务可以在这里看到： [http ://www.sencha.com/forum/topics-browse-remote.php?&page=3&start=100&limit=50&sort=lastpost&dir=DESC](http://www.sencha.com/forum/topics-browse-remote.php?&page=3&start=100&limit=50&sort=lastpost&dir=DESC)

请注意，Ext JS 分页工具栏将页面、开始、限制和排序参数添加到 URL。

您的 java 代码将需要引用这些并在您的 SQL 查询中使用它们。

Spring 控制器可能有这样的东西，它允许您稍后在方法中访问查询参数：

```
@RequestMapping(value = "/listTopics", method = RequestMethod.GET)
public ModelAndView listTopics(
        @RequestParam(value = "start", required = false, defaultValue = "0") Integer start
        @RequestParam(value = "limit", required = false, defaultValue = "10") Integer limit
        ) { 
```

... }

另请参阅带有工作演示的完整 Java 示例： [http ://www.mysamplecode.com/2012/02/extjs-grid-cell-editing-tutorial-2.html](http://www.mysamplecode.com/2012/02/extjs-grid-cell-editing-tutorial-2.html)

# r - igraph + R 顶点按条件着色（最好是连续颜色）

> ID：10921229
> 
> 赞同：2
> 
> 时间：2012-06-06T19:55:19.997
> 
> 标签：r, igraph

igraph 的新手。我想用另一个参数定义顶点颜色，最好是连续颜色（想想热图或灰度）。

```
clusters_only <- as.character(temp_df$SeqID)
v_names <- data.frame(c(unique_order, as.character(temp_df$SeqID)))
graph_order <- graph.data.frame(temp_df, directed = FALSE, vertices = v_names)
V(graph_order)[clusters_only]$size <- ? #continuous colour based on variable in temp_df 
```

有任何想法吗？

非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T09:18:42.013

您可以使用顶点的`color`属性来指定顶点颜色。它可以是字符串（包含 R 已知的颜色名称）或数值，在这种情况下，将从当前调色板中选择颜色。例如：

```
library(igraph)
g <- grg.game(100, 0.2)
V(g)$color <- 1:100
palette(gray.colors(100))
plot(g) 
```

或者，您可以将颜色指定为参数，`plot`而不是将它们分配给顶点属性：

```
plot(g, vertex.color <- 1:100) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-09T16:32:25.760

我对这种语法有更好的运气：

```
R> library(igraph)
R> g <- grg.game(100, 0.2)
R> V(g)$color <- 1:100
R> g$palette <- grey.colors(100)    ####  updated this line
R> plot(g) 
```

也许自原始答案以来语法已经改变？

# javascript - touchmove和gesturechange有什么区别？

> ID：10921230
> 
> 赞同：5
> 
> 时间：2012-06-06T19:55:21.010
> 
> 标签：javascript, android, ios, mobile, webkit

我最初想在移动 webkit (iOS/Android) 上跟踪单指平移。我发现[创建一个适用于 iOS Safari 的“粘性”固定位置项目，](https://stackoverflow.com/questions/8107722/detecting-real-time-scrolling-on-ios-safari)我看到了`gesturechange`. 但据我尝试，`gesturechange`似乎只因两指移动而被解雇。然后我找到`touchmove`了事件，看来我可以使用它。

1.  `touchmove`和 和有什么区别`gesturechange`？
2.  `touchmove`用于检测单指平移是否正确？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-15T20:01:09.530

1.Touchmove、touchstart、touchend、touchcancel是多点触控序列的一部分。当手指第一次接触到表面时，多点触控序列就开始了。

手势更改、手势开始、手势结束仍然是多点触控序列的一部分，但它们包含更精确的对象。并非所有设备都支持手势事件。如果平台支持，它们包含允许组合手势的缩放和旋转信息。如果不支持，一个手势会在另一个手势开始之前结束。

2.因此，如果您只针对一根手指，例如滑动或滑动，我会使用 touchmove。除非您真的想将滑动变成 3d 效果或旋转它，否则我会结合 touchmove 和gesturechange。

总帐

来源： [https ://developer.apple.com/library/safari/documentation/appleapplications/reference/safariwebcontent/HandlingEvents/HandlingEvents.html#//apple_ref/doc/uid/TP40006511-SW1](https://developer.apple.com/library/safari/documentation/appleapplications/reference/safariwebcontent/HandlingEvents/HandlingEvents.html#//apple_ref/doc/uid/TP40006511-SW1)

# mvvm - 关于从 WinForms 更改为 WPF 的问题

> ID：10921239
> 
> 赞同：0
> 
> 时间：2012-06-06T19:55:57.710
> 
> 标签：mvvm

我最近一直在寻找一种使用 MVVM 在 WinForms 中绑定数据的方法。我最终创建了 MVVM 模式的自定义实现。但是，由于缺乏双向绑定，我决定尝试一下 WPF。

我已经有了模型，它封装了非 ui 功能。例如，模型读取配置文件，具有一些属性，侦听套接字上的传入数据，并在需要时保存传入的数据包。如果模型的某些属性设置超出范围，则会引发异常。即验证在模型中完成。

在 WPF 中通常如何进行验证？我已经阅读了大量文章，并且在 ViewModel 中进行验证似乎有一些一致性。事实上，大多数文章只使用 ViewModel 和 View。模型被埋了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T20:29:46.647

很高兴看到您决定放弃 MVVM 的自定义实现，因为已经存在这么多只是......有效的东西。

WPF 对于双向绑定非常强大，这赋予了它最大的优势。

视图模型绑定到视图并充当与数据层通信的机制。此外，实体框架（如果您使用的是框架 4.0）将为您提供一个很好的数据层，用于在您的 ViewModel 中填充您的实体。这基本上成为你的模型。它为您提供了 UnitOfWork 的封装形式以及存储库模式。

虽然所有示例中的视图模型通常都是一对一的，但如果设计需要，您可以拥有跨越多个视图的视图模型。我有一个“菜单”，它显示列表中每个项目的关键标识符和一个详细表单，显示从同一对象编辑的所有字段。所以我跨越了两者之间的观点。

您可以在将视图模型绑定到数据上下文的 xaml 中对视图模型进行硬编码，也可以使用 Unity 并将视图模型注入视图。不幸的是，注入需要添加一个公共属性来设置数据上下文。所以你会有这样的代码：

```
public class MyView:Window
{
     public MyView(MyViewModel model)
     {
         InitializeComponent();
         ViewModel = model;
     }
     public MyViewModel ViewModel
     {
         set{ this.DataContext = value; }
     }
} 
```

所以剩下的只是每个字段的双向绑定，setter 可以封装单值编辑。您的错误消息甚至可以绑定到表单上的文本字段，并在值不为空时显示。

此外，如果您深入研究 Unity，您还将获得一个名为 Event Aggregation 的真正出色的功能，它基本上提供了一种用于发布/订阅事件的工具，并且在处理按钮单击时与您的 ICommand 实现相关联。

# customization - JQuery 轮播偏移量

> ID：10921241
> 
> 赞同：1
> 
> 时间：2012-06-06T18:46:54.267
> 
> 标签：customization, jquery, scripting

我一直在使用这个 JQuery 图像轮播一段时间，并且非常接近......但是有一些事情不太正确:(

我正在使用 JCarousel Light 插件（[http://www.gmarwaha.com/jquery/jcarousellite/](http://www.gmarwaha.com/jquery/jcarousellite/)），它工作得很好......我想做的就是在缩略图悬停时出现一个大图像超过。

通常我会直接做这个，代码很简单（事实上，我在网站的其他部分已经准备好了）。它不能那样工作的原因是元素上有一个溢出：隐藏属性。

那是我发现 JQuery 偏移属性的时候......唯一的问题是它在所有浏览器中呈现不同（或者至少我使用的代码是这样）。

然后我尝试了 JQuery 位置属性......但它跟随图像，所以当完整图像出现时它没有跟随滚动的轮播缩略图。

在所有浏览器中，我需要更改什么以使悬停在其上方居中的图像匹配缩略图？

我正在使用的当前 JQuery 如下所示：

```
<script type="text/javascript">
    <!--
        $(function() {
            /* carousel-full */
            jQuery(".photos a").hover(function() {
                var offset = $(this).offset();
                var id_post = $(this).attr("id");
                jQuery(".carousel-full").find("div[id="+id_post+"]").css("left", (offset.left-265)+"px");
                jQuery(".carousel-full").find("div[id="+id_post+"]").show();
            }, function() {
                jQuery(".carousel-full").find("div").hide();
            });
            /* carousel-thumbnails */
            $(".photos").jCarouselLite({
                btnNext: ".next",
                btnPrev: ".prev",
                visible: 4,
            });
        });

    //-->
</script> 
```

我现在拥有的代码如下所示：

```
 <div class="carousel-full">
        <?php query_posts("category_name=photos&posts_per_page=-1"); ?>
            <?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>
                <div id="<?php echo $post->ID; ?>"><?php the_post_thumbnail("carousel-full"); ?></div>
            <?php endwhile; endif; ?>
        <?php wp_reset_query(); ?>
    </div>
    <div class="carousel-thumbnails">
        <?php $styles = array('photo1','photo2'); $switch = count($styles); $start = 0; ?>
        <?php query_posts( 'category_name=photos&posts_per_page=-1' ); ?>
            <?php if ( have_posts() ) { ?>
                <button class="prev"><!-- --></button>
                <button class="next"><!-- --></button>
                <div class="photos">
                    <ul>
                        <?php while ( have_posts() ) : the_post(); ?>
                            <li class="<?php echo $styles[$start++ % $switch]; ?>"><a href="" id="<?php echo $post->ID;?>"><?php the_post_thumbnail("carousel-thumbnails", array("title" => get_the_title(), "alt" => get_the_title()) ); ?></a></li>
                        <?php endwhile; ?>
                    </ul>
                </div>
            <?php } else { ?>
                <p>Sorry, no pictures have been posted :(</p>
            <?php } ?>
        <?php wp_reset_query(); ?>
    </div> 
```

我希望我在 JQuery 方面做得更好……我错过了什么？提前致谢！！

Ps - 现场示例位于：http: [//joshrodgers.com/](http://joshrodgers.com/) ...它在首页上 :)

乔什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T06:24:36.757

我决定改用灯箱......似乎有同样的效果:)

# http - 为什么 Accept 标头以 HTTP_ 为前缀？

> ID：10921242
> 
> 赞同：1
> 
> 时间：2012-06-06T19:56:09.327
> 
> 标签：http, header, http-headers

我注意到，在从 Web 服务器访问 Http 标头时，使用 HTTP_ 作为前缀几乎是一种通用约定。谁能向我解释一下这是怎么发生的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T20:05:28.540

听起来您在谈论 CGI 脚本。HTTP 标头作为环境变量传递。由于可能存在与 HTTP 无关的其他环境变量（例如：PATH），因此添加一个公共前缀以减少冲突的机会是有意义的。

# c# - 截断事务中的 Oracle 临时表，截断 *ALL* 临时表

> ID：10921244
> 
> 赞同：2
> 
> 时间：2012-06-06T19:56:32.070
> 
> 标签：c#, oracle, transactions, temporary

我有一些 C# 代码在事务中使用“ON COMMIT DELETE ROWS”选项创建多个 Oracle 临时表。

在事务内部，我将在各种临时表中插入一堆行。在某些情况下，我需要截断特定的临时表，以便我可以从该表重新开始，但不理会其他临时表。

我发现当您执行截断时，Oracle 必须执行隐式 COMMIT，因为不仅特定的临时表被截断，而且我的*所有*临时表都被截断。

好的，我在其他地方读到 Truncate 命令被认为是 DDL 命令，这就是为什么正在处理提交，这导致我的“ON COMMIT DELETE ROWS”临时表被清除。

如果这是真的，那么创建一个新的临时表的行为难道不是一个 DDL 命令，而且它还会触发清除所有其他临时表的相同提交？如果是这样，我还没有看到这种行为。我在我的代码中创建了新的临时表，发现在创建新的临时表后，之前创建的临时表的行仍然完好无损。

下面是一些演示该问题的 C# 代码（此处未包含帮助程序）：

```
private void RunTest()
{
  if (_oc == null)
    _oc = new OracleConnection("data source=myserver;user id=myid;password=mypassword");

  _oc.Open();
  _tran = _oc.BeginTransaction();

  string tt1 = "DMTEST1";
  AddTempTable(tt1, false);
  int TempTableRowCount0 = GetTempTableRowCount(tt1);

  AddRows(tt1, 5);
  int TempTableRowCount10 = GetTempTableRowCount(tt1);

  string tt2 = "DMTEST2";
  AddTempTable(tt2, false);
  int TempTableRowCount12 = GetTempTableRowCount(tt1); // This will have the same value as TempTableRowCount10
  AddRows(tt2, 6);
  int TempTableRowCount13 = GetTempTableRowCount(tt2); // This will have the same value as TempTableRowCount10

  string tt3 = "DMTEST3";
  AddTempTable(tt3, true); // The TRUE argument which does a TRUNCATE against the DMTEST3 table is the problem
  int TempTableRowCount14 = GetTempTableRowCount(tt1); // This will return 0, it should be = TempTableRowCount10
  int TempTableRowCount15 = GetTempTableRowCount(tt2); // This will return 0, it should be = TempTableRowCount13

  _tran.Commit();
  _tran = null;
  int TempTableRowCount20 = GetTempTableRowCount(tt1); // This should be 0 because the transaction was committed 
  int TempTableRowCount21 = GetTempTableRowCount(tt2); // and the temp tables are defined as "ON COMMIT DELETE ROWS"
}

private void AddTempTable(string TableName, bool Truncate)
{
  IDbCommand ocmd = new OracleCommand();
  ocmd.Connection = _oc;
  if (!TableExists(TableName))
  {
    ocmd.CommandText = string.Format("CREATE GLOBAL TEMPORARY TABLE {0} ({1}) ON COMMIT DELETE ROWS", TableName, "FIELD1 Float");
    int rc = ocmd.ExecuteNonQuery();
  }
  if (Truncate)
  {
    ocmd.CommandText = "TRUNCATE TABLE " + TableName;
    int rc = ocmd.ExecuteNonQuery();
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T02:55:10.323

在 Oracle 中，您不会在运行时创建全局临时表。您在部署系统时创建一次。每个会话都会自动获得它自己的临时表“副本”。

此外，如果您可以避免 TRUNCATE，我会推荐它 - 即，如果您可以依靠 ON COMMIT DELETE ROWS 导致数据在您提交时消失，那么这是最有效的方法。

要回答您的其他问题（*“CREATE GLOBAL TEMPORARY 似乎没有提交”*） - 我自己尝试过，在我看来 CREATE GLOBAL TEMPORARY 确实确实提交了。我的测试用例：

```
create global temporary table test1 (n number) on commit delete rows;
insert into test1 values (1);
--Expected: 1
select count(*) from test1;
commit;
--Expected: 0
select count(*) from test1;
insert into test1 values (2);
--Expected: 1
select count(*) from test1;
create global temporary table test2 (n number) on commit delete rows;
--Expected: 0
select count(*) from test1;
commit;
--Expected: 0
select count(*) from test1; 
```

# java - Java 小程序可以用作服务器吗？

> ID：10921248
> 
> 赞同：0
> 
> 时间：2012-06-06T19:56:42.577
> 
> 标签：java, applet, port, listen

是否可以编写一个可以作为客户端本地网络中客户端计算机上的服务器的 Java 小程序？

更具体地说，我想做的是通过网络隧道传输非网络流量。发送者将发送到小程序，然后小程序将接收到的数据转发回服务器。

这种事情可能吗？可能会遇到哪些限制？

[注意：我知道小程序可以连接回服务器，这不是问题。问题是小程序是否可以侦听本地客户端端口上的连接/数据。]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T19:59:04.240

未签名的小程序只能连接它们来自的主机。

一个签名的小程序可以做任何你想要的连接，并且可以监听 tcp-ip 端口。

来源：[http ://docs.oracle.com/javase/tutorial/deployment/applet/security.html](http://docs.oracle.com/javase/tutorial/deployment/applet/security.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T20:14:15.710

服务器没有连接到任何地方。服务器打开服务器套接字并正在监听。

据我所知，过去服务器套接字在 MSIE 中受到限制，而在 Netscape 中是允许的（你还记得这样的浏览器吗？）:)

在过去的 10 年里，我个人没有编写小程序，所以我不知道现在现有的浏览器会发生什么，但很容易检查。只需编写最短的小程序并将代码`new ServerSocket(1234).accept();`放入其`init()`或`start()`方法中。如果没有抛出异常，您可以编写用作服务器的小程序。否则你不能。

只需使用所有可用的浏览器进行尝试。20分钟的工作，你就完成了。祝你好运。我很高兴知道结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T20:00:01.023

一般来说，它不能。

一个原因是小程序倾向于在安全受限的环境中运行，这意味着它们被拒绝打开服务器套接字的能力。

绕过这样的限制是有办法的，基本上你可以为小程序指定一个特殊的安全策略，或者在一个特殊的无约束容器中运行它；但是，当您可以将应用程序的内容移植到标准 servlet 甚至独立服务器时，为什么还要麻烦呢？

# iphone - 将三个不同的数组复制到一个数组

> ID：10921250
> 
> 赞同：0
> 
> 时间：2012-06-06T19:56:54.700
> 
> 标签：iphone, nsmutablearray

我有三个array..say array1，array2，array3。所有这些数组都包含字典。现在，我想将这些数组的所有对象复制到一个数组中并显示在表格视图中。我的问题是我将如何将这三个数组复制到 1 中。说；

```
NSMutableArray *array1 = [NSMutableArray arrayWithObject:Dict1];
    NSMutableArray *array2 = [NSMutableArray arrayWithObject:Dict2];
    NSMutableArray *array3 = [NSMutableArray arrayWithObject:Dict3]; 
```

现在，我想将array1、array2、array3 的包含复制到array4。我将如何执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T20:09:54.643

用这个

```
NSMutableArray *array4 = [[NSMutableArray alloc] init];
[array4 addObjectsFromArray:array1];
[array4 addObjectsFromArray:array2];
[array4 addObjectsFromArray:array3];

//Do something on array4

[array4 release]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T20:06:36.530

```
NSMutableArray *allObjs = [[NSMutableArray alloc] initWithArray: array1];
[allObjs addObjectsFromArray: array2];
[allObjs addObjectsFromArray: array3]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T20:04:17.717

```
NSMutableArray *array4 = [[NSMutableArray alloc] init];

for (int i = 0; i < [array1 count]; i++)
{
    [array4 addObject:[array1 objectAtIndex:i]];
}
for (int i = 0; i < [array2 count]; i++)
{
    [array4 addObject:[array2 objectAtIndex:i]];
}
for (int i = 0; i < [array3 count]; i++)
{
    [array4 addObject:[array3 objectAtIndex:i]];
}

//use your array4

 [array4 release]; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-06T20:03:27.773

```
NSMutableArray * array4 = [NSMutableArray arrayWithObjects:[array1 objectAtIndex:0], [array2 objectAtIndex:0], [array3 objectAtIndex:0]]; 
```

# c# - 在运行时并根据用户输入创建中继器模板

> ID：10921252
> 
> 赞同：2
> 
> 时间：2012-06-06T19:57:02.770
> 
> 标签：c#, asp.net, .net

是否可以以某种方式为转发器动态创建 ItemTemplate？

我正在尝试使用中继器，因为它允许最多的控制，但我的要求之一是让我重新考虑。

我基本上有许多通过 Web 服务执行的 SQL 查询。与其让用户输入整个查询，我希望他们能够通过单选按钮选择“部件”、“产品”或“包装”，在文本框中输入搜索词，以及其他一些信息，然后页面返回他们想要的结果。我主要完成了 RadioButtons 控制逻辑，并且我将查询设置为接受来自文本框的输入作为带有通配符的搜索词。唯一的问题是我在中继器控制上苦苦挣扎。问题是每个表都有不同数量的列并且它们具有不同的名称，因此 `<td><%# DataBinder.Eval(Container,\"DataItem.Description\") %></td>` 在 ItemTemplate 中执行 a 是不可能的（直到绑定时间我才知道 3 个中的哪一个（将来可能更多）使用的模板）

我尝试使用文字根据代码隐藏中的逻辑传递我想要的内容，但我无法传递内联函数，并且我无法根据之前的问题汇总如何执行此操作。

我一直在阅读 MSDN 参考资料，如果我学习 DataList 控件，它似乎会让事情变得更容易，但如果有一个简单的方法可以使用中继器（这也将允许我更多控制）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T20:21:33.000

我正在回顾一些旧代码，以了解我是如何处理类似情况的。然后我在写回复之前就看到了杰西的回答。基本上，我倾向于同意 Jesse 的观点——这似乎是您所概述的最直接的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T20:06:28.953

我可能在这里偏离了轨道，但我认为解决您遇到的问题的一个简单方法是创建多个中继器控件，其中包含不同的项目模板并将它们包装在面板中。这样，根据用户参数，您可以简单地将结果数据绑定到正确的中继器并将其他面板设置为不可见。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T20:06:16.447

所以我不知道这有多大帮助，但一种可能性是使用 MVC 模板。MVC 很方便，因为它实际上可以在非常有限的意义上使用（您的整个应用程序不需要实现它，只需要适用的页面）而且它也非常简单。

关于如何在 MVC 中做不同模板的介绍：http: [//bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-1-introduction.html](http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-1-introduction.html)

可以修改模板，使其根据绑定到的对象进行更改 - 就像 WPF DataTemplateSelector 的工作方式一样。

我想我记得在 MVC3 或 MVC4 中看到一些东西，您可以根据数据类型创建模板（就像在 Silverlight 中一样），它会自动选择该模板，但我现在很难找到它。

# asp.net-mvc-3 - 使用 Windows 身份验证获取 WCF 中当前交互用户的用户名，包括 Rest Endpoint 和 MVC3

> ID：10921253
> 
> 赞同：4
> 
> 时间：2012-06-06T19:57:04.487
> 
> 标签：asp.net-mvc-3, wcf, web-services, rest, windows-authentication

在我正在处理的一个 MVC3 项目中，我们试图将当前在控制器中的许多逻辑移动到服务层中，并将其公开为 WCF 中的 REST 服务。

因此，在我们的 Global.asax 中，我们创建了一个服务路由，如下所示：

```
RouteTable.Routes.Add(new ServiceRoute
    ("Exampleservice", new WebServiceHostFactory(), typeof(ExampleService))); 
```

我们的控制器访问服务是这样的：

```
public class ExampleController : Controller {
    private IExampleService service;

    public ExampleController() {
        this.service = new ExampleService();
    } 

    public ActionResult Index() {
         var results = service.GetAll();
         return View(results);
    }
} 
```

这里的要点是我们直接使用服务类（不使用 HttpClient 通过网络发出请求）。

我们的网站使用 Windows 身份验证（它是一个 Intranet 网站），我们希望保持这种方式。我的问题是，有没有一种方法可以让我在服务类中获取用户的身份，这既适用于控制器使用服务的方式，也适用于 WCF 使用服务的方式？

例如：

```
[ServiceContract]
public interface IExampleService
{
    [WebGet(UriTemplate = "/")]
    List<Results> GetAll();
}

public class ExampleService : IExampleService
{
     List<Results> GetAll() {
         // Get User Name Here
         // In ASP.Net I would use User.Identity.Name
         // If I was just worrying about the the REST service I would use
         // ServiceSecurityContext.Current.WindowsIdentity.Name
     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T18:03:59.810

@Ryand.Johnson 建议的指令是正确的。这里的重点是控制器不会向 Web 服务发送任何凭据，因为它以 asp.net 用户身份而不是当前登录用户的身份运行。将身份传递给代理的唯一方法是通过以下方式将对 Web 服务的调用嵌入到模拟上下文中：

```
using (WindowsImpersonationContext impersonatedUser = (User.Identity as System.Security.Principal.WindowsIdentity).Impersonate()){ 
     //your proxy call here  } 
```

如果仍然以这种方式获得 null，则必须手动将默认凭据设置为代理

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T20:21:26.773

是的，在服务安全上下文中......

`OperationContext.Current.ServiceSecurityContext.WindowsIdentity.Name`

# javascript - 带注释的时间线闪烁和重新缩放

> ID：10921254
> 
> 赞同：0
> 
> 时间：2012-06-06T19:57:06.157
> 
> 标签：javascript, google-visualization, annotatedtimeline

我有一个带注释的时间线，我想实时更新（类似于[Google 财经](http://www.google.com/finance?q=NASDAQ%3aFB)的做法）。但是，我无法让图表在添加数据时不闪烁也不重新缩放。

我无法让代码在 JSFiddle 中工作（我认为是因为带注释的时间线是基于 Flash 的？）但这里有一些基本代码，您可以将它们插入[Google 的 Visualization Playground](https://code.google.com/apis/ajax/playground/?type=visualization#annotated_time_line_configuration)。你可以在这里看到一个[保存的例子，](http://savedbythegoog.appspot.com/?id=ffe1d224369fedabe64c18c30bc9301629d8bb33)但不幸的是不能修改代码，你必须去操场做那件事。

```
function drawVisualization() {
  var data = new google.visualization.DataTable();
  data.addColumn('date', 'Date');
  data.addColumn('number', 'My Data');

  data.addRows([
    [new Date(2009, 1 ,1), 30000],
    [new Date(2009, 1 ,2), 14045],
    [new Date(2009, 1 ,3), 55022],
    [new Date(2009, 1 ,4), 75284],
    [new Date(2009, 1 ,5), 41476],
    [new Date(2009, 1 ,6), 33322]
  ]);

  var annotatedtimeline = new google.visualization.AnnotatedTimeLine(
      document.getElementById('visualization'));

  var options = {
     'allowRedraw' : true ,
     'displayAnnotations' : true,
     'zoomStartTime': new Date(2009, 1 ,2), 
     'zoomEndTime': new Date(2009, 1 ,10)
  };
  annotatedtimeline.draw(data, options);

  // let's add some more data in 3 seconds
  setTimeout(function() {
      again(annotatedtimeline, data, options);
  }, 3000);
}

function again(timeline, data, options) {
    data.addRow([new Date(2009, 1 ,7), 30000]);
    timeline.draw(data, options);
}

google.setOnLoadCallback(drawVisualization);​ 
```

奇怪的是，根据我设置 displayAnnotations 的方式，我会得到完全不同的闪烁行为

`displayAnnotations = true`: 图表闪烁但不重新缩放
`displayAnnotations = false`: 图表不闪烁但重新缩放到新数据（在操场上试试看）

无论如何设置`allowRedraw = false`都会导致图表闪烁。知道如何不闪烁也不重新缩放吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T21:28:05.897

从文档：

> *   allowRedraw 必须为真
> *   displayAnnotations 必须为 false（即不能显示注解）

那是你的问题。

# android - Android - 创建 SoapObject 引发 InvocationTargetException

> ID：10921255
> 
> 赞同：1
> 
> 时间：2012-06-06T19:57:13.840
> 
> 标签：android, web-services, soap, ksoap2, android-ksoap2

我正在学习如何通过 KSOAP 在移动平台（特别是 Android）上使用 Web 服务。但是，我在创建`SoapObject`.

```
String NAMESPACE = "http://webservicesx.net/";
String METHOD_NAME = "ChangeMetricWeightUnit";
String SOAP_ACTION = NAMESPACE + METHOD_NAME;
String URL = "http://173.201.44.188/convertMetricWeight.asmx";

SoapObject Request = new SoapObject(NAMESPACE, METHOD_NAME); 
```

我的代码在应用程序启动和调试时崩溃表明`SoapObject Request = new SoapObject(NAMESPACE, METHOD_NAME);`抛出了`InvocationTargetException`.

我的 LogCat 如下：

```
06-06 19:53:18.900: E/AndroidRuntime(995): FATAL EXCEPTION: main
06-06 19:53:18.900: E/AndroidRuntime(995): java.lang.NoClassDefFoundError: org.ksoap2.serialization.SoapObject
06-06 19:53:18.900: E/AndroidRuntime(995):  at org.hcfcd.webtest.WebServicesTest.onCreate(WebServicesTest.java:31)
06-06 19:53:18.900: E/AndroidRuntime(995):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
06-06 19:53:18.900: E/AndroidRuntime(995):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
06-06 19:53:18.900: E/AndroidRuntime(995):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
06-06 19:53:18.900: E/AndroidRuntime(995):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
06-06 19:53:18.900: E/AndroidRuntime(995):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
06-06 19:53:18.900: E/AndroidRuntime(995):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-06 19:53:18.900: E/AndroidRuntime(995):  at android.os.Looper.loop(Looper.java:130)
06-06 19:53:18.900: E/AndroidRuntime(995):  at android.app.ActivityThread.main(ActivityThread.java:3683)
06-06 19:53:18.900: E/AndroidRuntime(995):  at java.lang.reflect.Method.invokeNative(Native Method)
06-06 19:53:18.900: E/AndroidRuntime(995):  at java.lang.reflect.Method.invoke(Method.java:507)
06-06 19:53:18.900: E/AndroidRuntime(995):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
06-06 19:53:18.900: E/AndroidRuntime(995):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
06-06 19:53:18.900: E/AndroidRuntime(995):  at dalvik.system.NativeStart.main(Native Method) 
```

从我从 LogCat 中可以看出，尽管我将 KSOAP.jar 导入到项目中，但编译器找不到 SoapObject 类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T06:32:47.077

[使用 ksoap2 库处理 android 问题时](https://stackoverflow.com/questions/5708624/exception-while-using-ksoap2-library-for-android)可能会出现相同的异常问题。试试[这个](https://stackoverflow.com/a/10329398/637724)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-07T12:28:32.690

我不完全确定为什么这会起作用，而是像这样围绕`SoapObject Request = new SoapObject(NAMESPACE, METHOD_NAME);`在一个`try`块中：

```
try {
SoapObject Request = new SoapObject(NAMESPACE, METHOD_NAME);
...
} 
```

导致我的代码正确编译和执行。不太清楚为什么简单地将它包围在一个`try`块中使它起作用，所以对该注释的任何澄清都会很好。

# php - phpQuery 和重音字符

> ID：10921257
> 
> 赞同：0
> 
> 时间：2012-06-06T19:57:20.293
> 
> 标签：php, phpquery, non-ascii-characters

当我使用 phpQuery 解析 html 时，我得到了带有重音字符的糟糕结果。以下代码回显胡扯...

```
<?php 
    require_once 'phpQuery.php';
    $dom = phpQuery::newDocumentHTML('<p>é</p>');
    echo $dom->text(); //bad result
?> 
```

有人知道 phpQuery 中的重音吗？

我在带有 Firefox 的 windows 2008 服务器上使用 netbeans。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T20:11:29.600

试试看：

```
echo htmlspecialchars($dom->text()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T20:11:39.797

尝试在您的页面上添加：

```
header("Content-Type:text/html; charset=UTF-8"); 
```

没关系 ！

顺便说一句，我相信您使用的是 Windows 2008 Server 而不是 Windows 7 Server ...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T13:17:30.423

你有没有尝试过

```
string utf8_decode ( string $data ) 
```

或者

```
string utf8_encode ( string $data ) 
```

我相信作为我之前的答案，它一定是 UTF-8 问题。

# objective-c - 奇怪的 NSArray 错误

> ID：10921267
> 
> 赞同：0
> 
> 时间：2012-06-06T19:57:46.040
> 
> 标签：objective-c, ios, nsarray

> **可能重复：**
> [__NSArrayI 和 __NSArrayM 是什么？如何转换为 NSArray？](https://stackoverflow.com/questions/7684611/what-is-nsarrayi-and-nsarraym-how-to-convert-to-nsarray)

我收到以下错误

2012-06-06 15:53:19.509 NavApp [5462:707] *** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“*** -[__NSArrayM insertObject:atIndex:]: 对象不能为 nil”*** 第一次抛出调用堆栈：（0x353b788f 0x3775e259 0x3530c1d7 0xba3e5 0xc128b 0x32e2db95 0x32e87d85 0x32e4a251 0x32e49fa1 0x32e49cbb 0x32e49a2f 0x32e00aab 0x32e063d5 0x3220cc2f 0x34246ee7 0x3538a2ad 0x3530d4a5 0x3530d36d 0x36fa9439 0x32e19cd5 0x106a71 0xb8c70）终止叫做抛出异常（LLDB）

我认为这很奇怪，因为它说“__NSArrayM”......知道这意味着什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T19:59:53.353

您似乎正在尝试将 nil 对象插入 NSMutableArray 这将导致异常，因为可变数组不能包含 nil 对象

关于 __NSArrayM

```
__NSArrayM is a NSMutableArray
__NSArrayI is a NSArray 
```

# java - JLabel 不应该能够接收焦点.. 但它可以吗？

> ID：10921269
> 
> 赞同：1
> 
> 时间：2012-06-06T19:58:06.040
> 
> 标签：java, swing, focusmanager

我正在开发一个使用默认 Swing 方法来处理焦点的 Swing 应用程序。焦点没有像我预期的那样工作。

在一种情况下，我有一个称为 .requestFocusInWindow() 的 JTextField 当显示窗口时，JLabel 具有焦点

JLabel 的 Java 6 文档说“因此，它无法获得键盘焦点”。 [http://docs.oracle.com/javase/6/docs/api/javax/swing/JLabel.html](http://docs.oracle.com/javase/6/docs/api/javax/swing/JLabel.html)

但是，我有一个示例应用程序，它显示 JLabel 接收焦点，并且 KeyboardFocusManager.getFocusOwner() 返回该组件。(http://github.com/akinsgre/swingStarter)

该类的代码是[https://raw.github.com/akinsgre/swingStarter/master/src/main/java/test/HelloWorldSwing.java](https://raw.github.com/akinsgre/swingStarter/master/src/main/java/test/HelloWorldSwing.java)

任何人都可以帮助我理解或解释我所缺少的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T11:15:56.703

我认为您需要将标签与文本字段相关联。所以尝试使用 setLabelFor 方法，看看是否有帮助。

# c# - 确定列表中的哪些元素不在另一个列表中

> ID：10921270
> 
> 赞同：3
> 
> 时间：2012-06-06T19:58:11.733
> 
> 标签：c#, ilist

我有两个`IList<CustomObject>`，其中`CustomObject`有一个`Name`属性是`string`. 打电话给第一个`set`，第二个`subset`。`set`包含我刚刚在多选列表框中向用户显示的内容列表。用户选择的那些已经被放置`subset`（所以`subset`保证是 的一个子集`set`，因此聪明的名字;））

`IList<CustomObject>`从这两个集合中生成`inverseSubset`包含用户未选择的所有 CustomObjects 的第三个最直接的方法是什么？

我一直在尝试这样的 LINQ

```
IEnumerable<CustomObject> inverseSubset = set.Select<CustomObject,CustomObject>(
    sp => !subset.ConvertAll<string>(p => p.Name).Contains(sp.Name)); 
```

...基于对模糊相似问题的回答，但到目前为止，甚至没有编译，更不用说工作了：P

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T19:59:58.680

[`Except`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.except.aspx)为此使用 LINQ ：

> 产生两个序列的集合差。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-06T20:00:26.460

啊哈，最近 SQL 太多了——我不想要`Select`，我想要`Where`：

```
List<string> subsetNames = subset.ConvertAll<string>(p => p.Name);
IEnumerable<CustomObject> inverseSubset =
    set.Where<CustomObject>(p => !subsetNames.Contains(p.Name)); 
```

# asp-classic - 创建excel电子表格

> ID：10921277
> 
> 赞同：2
> 
> 时间：2012-06-06T19:58:55.653
> 
> 标签：asp-classic, vbscript

有没有办法使用 VBScript 创建一个 excel 电子表格？我可以使用 FileSystemObject 创建一个文本文件并使用我想要的任何扩展名，但是当我尝试下载它时，它给了我在 excel 中打开选项，然后出现一条消息，说明它采用不同的格式，这就是我想避免：

```
set fs=Server.CreateObject("Scripting.FileSystemObject")
set tfile=fs.CreateTextFile(Server.MapPath("xls/streamtest.xls"),true,false) 
```

我知道这是将文本以 ASCII 格式推送到文件中。

是否有“某些”字符序列、特定格式可以用来解决所有这些问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-10-03T18:14:17.013

最好和最快的方法是生成一个 Excel Xml 文件，而不使用服务器上的 Excel.application，这确实不推荐。您将无法执行的唯一功能是插入图片。

与使用 html 表格不同，您将能够支持 excel 中的原生数据（如日期），并且您将能够格式化、插入公式、...

将您的 Excel 保存为 Excel XML 并查看生成的 XML 文件。这有点棘手，但效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T20:15:24.797

如果 Excel 已在服务器上安装并可访问，并且 sFSpec 是您要创建的（空）.xls 的完整（服务器映射、可访问）文件规范，则

```
 Dim oExcel : Set oExcel = [Server.]CreateObject( "Excel.Application" )
 oExcel.Workbooks.Add.SaveAs sFSpec
 oExcel.Quit 
```

应该管用。如果您不能使用“Excel.Application”，您可以通过打开 Excel 连接并执行合适的 CREATE TABLE 语句来使用 ADO。

**添加**

低技术的方法是使用从某个工作站偷来的空 .xls 作为模板；但您可以即时创建 .xls：

```
 Dim sFSpec : sFSpec = resolvePath("..\data\byado.xls")
  If goFS.FileExists(sFSpec) Then goFS.DeleteFile sFSpec
  Dim oXDb : Set oXDb = CreateObject("ADODB.Connection")
  Dim sCS  : sCS      = Join(Array(_
        "Provider=Microsoft.Jet.OLEDB.4.0" _
      , "Data Source=" & sFSpec            _
      , "Extended Properties="""           _
          & Join(Array(     _
                "Excel 8.0" _
              , "HDR=Yes"   _
              , "IMEX=0"    _
            ), ";" )        _
          & """"            _
  ), ";")
  oXDb.Open sCS
  oXDb.Execute "CREATE TABLE [WhatEver] (DontCare INTEGER)"
  oXDb.Close
  If goFS.FileExists(sFSpec) Then WScript.Echo "qed" 
```

（您可能需要修改“Excel！Version！”；“IMEX=0”很重要）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T07:39:13.500

我在另一个问题上回答了这个问题。 [excel 电子表格的正确格式](https://stackoverflow.com/questions/11129893/correct-formatting-for-excel-spreadsheet) 如果安装了 office（至少 Excel），您应该能够在您的服务器上使用 CreateObject("Excel.Application")。

Xls（以及其他类型的 Excel 2007/2010 是二进制文件，您无法像那样轻松创建，您需要使用 Com 对象来创建和操作它们。这里是脚本[专家 http://blogs.technet 的示例。 com/b/heyscriptingguy/archive/2005/01/31/how-can-i-make-changes-to-and-then-re-save-an-existing-excel-spreadsheet.aspx](http://blogs.technet.com/b/heyscriptingguy/archive/2005/01/31/how-can-i-make-changes-to-and-then-re-save-an-existing-excel-spreadsheet.aspx)

```
Set objExcel = CreateObject("Excel.Application") 
objExcel.Visible = True 
objExcel.DisplayAlerts = FALSE 

Set objWorkbook = objExcel.Workbooks.Add 
Set objWorksheet = objWorkbook.Worksheets(1) 

objWorksheet.Cells(1, 1).Value = Now 
objWorkbook.SaveAs("C:\Scripts\Test.xls") 
objExcel.Quit 
```

有关您可以使用的 vba 函数列表，请参阅[http://msdn.microsoft.com/en-us/library/aa223697(v=office.11 ​​).aspx](http://msdn.microsoft.com/en-us/library/aa223697(v=office.11).aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T12:17:23.790

我同意上面的评论。我一直使用 Response.ContentType 和 Response.AppendHeader 来做到这一点

```
Response.ContentType = "application/vnd.ms-excel"
Response.AppendHeader "content-disposition", "filename=MySpreadsheet.xls" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-09T06:02:48.670

Microsoft .xlsx 文件只是[xml 文件的压缩集合](https://stackoverflow.com/questions/46846678/how-to-open-and-view-the-xml-structure-of-an-excel-file)

这意味着我们可以将 xml 文件和文件夹结构写成文本文件，压缩文件夹并将该 zip 文件重命名为 .xlsx。现在我们有了一个新的空 excel 文件。这是我的代码，无需安装 MS Excel。

ZipAFolder 函数已从[此处的另一个 stackoverflow 问题修改](https://stackoverflow.com/a/15143587/1146659)

```
'
' Dependencies: ZipAFolder, moveFile, writeToFile, Environ, OpenWithExplorer, FileExists, FolderExists, ScriptEngine, MkDir
' Version: 1.0.0
' by jeremy.gerdes@navy.mil 
' CC0 1.0 Universal (CC0 1.0) Public Domain Dedication
' [TODO] reset the file attributes of date - Created, Modified, and Accessed to 12/31/1979 11:00 PM (for eastern time zone) to all files
' Usage example
' BuildEmptyExcelFile GetCurrentFileFolder() & "\" & "anEmptyExcelFile.xlsx"
Public Sub BuildEmptyExcelFile(strNewExcelFile)
    Dim strLocalAppTmp
    strLocalAppTmp = Environ("LocalAppData") & "\" & "tmp"
    MkDir strLocalAppTmp
    Dim strTmpZipPath
    strTmpZipPath = strLocalAppTmp & "\" & "buildEmptyExcelFile"
    MkDir strTmpZipPath
    WriteToFile strTmpZipPath & "\" & "[Content_Types].xml" ,  _
        "<?xml version=""1.0"" encoding=""UTF-8"" standalone=""yes""?>" & _
        "<Types xmlns=""http://schemas.openxmlformats.org/package/2006/content-types""><Default Extension=""rels"" ContentType=""application/vnd.openxmlformats-package.relationships+xml""/><Default Extension=""xml"" ContentType=""application/xml""/><Override PartName=""/xl/workbook.xml"" ContentType=""application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml""/><Override PartName=""/xl/worksheets/sheet1.xml"" ContentType=""application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml""/><Override PartName=""/xl/theme/theme1.xml"" ContentType=""application/vnd.openxmlformats-officedocument.theme+xml""/><Override PartName=""/xl/styles.xml"" ContentType=""application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml""/><Override PartName=""/docProps/core.xml"" ContentType=""application/vnd.openxmlformats-package.core-properties+xml""/><Override PartName=""/docProps/app.xml"" ContentType=""application/vnd.openxmlformats-officedocument.extended-properties+xml""/></Types>", _
        False, True
    MkDir strTmpZipPath & "\" & "_rels"
    WriteToFile _
        strTmpZipPath & "\" & "_rels" & "\" & ".rels" , _
        "<?xml version=""1.0"" encoding=""UTF-8"" standalone=""yes""?><Relationships xmlns=""http://schemas.openxmlformats.org/package/2006/relationships""><Relationship Id=""rId3"" Type=""http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties"" Target=""docProps/app.xml""/><Relationship Id=""rId2"" Type=""http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties"" Target=""docProps/core.xml""/><Relationship Id=""rId1"" Type=""http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument"" Target=""xl/workbook.xml""/></Relationships>", _
        False, True
    MkDir strTmpZipPath & "\" & "docProps"
    WriteToFile _
        strTmpZipPath & "\" & "docProps" & "\" & "app.xml" , _
        "<?xml version=""1.0"" encoding=""UTF-8"" standalone=""yes""?><Properties xmlns=""http://schemas.openxmlformats.org/officeDocument/2006/extended-properties"" xmlns:vt=""http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes""><Application>Microsoft Excel</Application><DocSecurity>0</DocSecurity><ScaleCrop>false</ScaleCrop><HeadingPairs><vt:vector size=""2"" baseType=""variant""><vt:variant><vt:lpstr>Worksheets</vt:lpstr></vt:variant><vt:variant><vt:i4>1</vt:i4></vt:variant></vt:vector></HeadingPairs><TitlesOfParts><vt:vector size=""1"" baseType=""lpstr""><vt:lpstr>Sheet1</vt:lpstr></vt:vector></TitlesOfParts><Company>HPES NMCI NGEN</Company><LinksUpToDate>false</LinksUpToDate><SharedDoc>false</SharedDoc><HyperlinksChanged>false</HyperlinksChanged><AppVersion>16.0300</AppVersion></Properties>", _
        False, True
    WriteToFile _
        strTmpZipPath & "\" & "docProps" & "\" & "core.xml" , _
        "<?xml version=""1.0"" encoding=""UTF-8"" standalone=""yes""?><cp:coreProperties xmlns:cp=""http://schemas.openxmlformats.org/package/2006/metadata/core-properties"" xmlns:dc=""http://purl.org/dc/elements/1.1/"" xmlns:dcterms=""http://purl.org/dc/terms/"" xmlns:dcmitype=""http://purl.org/dc/dcmitype/"" xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance""><dc:creator>jeremy.gerdes</dc:creator><cp:lastModifiedBy>jeremy.gerdes</cp:lastModifiedBy><dcterms:created xsi:type=""dcterms:W3CDTF"">2021-04-09T02:10:55Z</dcterms:created><dcterms:modified xsi:type=""dcterms:W3CDTF"">2021-04-09T02:11:30Z</dcterms:modified></cp:coreProperties>", _
        False, True
    MkDir strTmpZipPath & "\" & "xl"
    MkDir strTmpZipPath & "\" & "xl" & "\" & "theme"
    WriteToFile _
        strTmpZipPath & "\" & "xl" & "\" & "styles.xml", _
"<?xml version=""1.0"" encoding=""UTF-8"" standalone=""yes""?>" & _
"<styleSheet xmlns=""http://schemas.openxmlformats.org/spreadsheetml/2006/main"" xmlns:mc=""http://schemas.openxmlformats.org/markup-compatibility/2006"" mc:Ignorable=""x14ac x16r2"" xmlns:x14ac=""http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"" xmlns:x16r2=""http://schemas.microsoft.com/office/spreadsheetml/2015/02/main""><fonts count=""1"" x14ac:knownFonts=""1""><font><sz val=""11""/><color theme=""1""/><name val=""Calibri""/><family val=""2""/><scheme val=""minor""/></font></fonts><fills count=""2""><fill><patternFill patternType=""none""/></fill><fill><patternFill patternType=""gray125""/></fill></fills><borders count=""1""><border><left/><right/><top/><bottom/><diagonal/></border></borders><cellStyleXfs count=""1""><xf numFmtId=""0"" fontId=""0"" fillId=""0"" borderId=""0""/></cellStyleXfs><cellXfs count=""1""><xf numFmtId=""0"" fontId=""0"" fillId=""0"" borderId=""0"" xfId=""0""/></cellXfs><cellStyles count=""1""><cellStyle name=""Normal"" xfId=""0"" builtinId=""0""/></cellStyles>" & _
"<dxfs count=""0""/><tableStyles count=""0"" defaultTableStyle=""TableStyleMedium2"" defaultPivotStyle=""PivotStyleLight16""/><extLst><ext uri=""{EB79DEF2-80B8-43e5-95BD-54CBDDF9020C}"" xmlns:x14=""http://schemas.microsoft.com/office/spreadsheetml/2009/9/main""><x14:slicerStyles defaultSlicerStyle=""SlicerStyleLight1""/></ext><ext uri=""{9260A510-F301-46a8-8635-F512D64BE5F5}"" xmlns:x15=""http://schemas.microsoft.com/office/spreadsheetml/2010/11/main""><x15:timelineStyles defaultTimelineStyle=""TimeSlicerStyleLight1""/></ext></extLst></styleSheet>", _
        False, True
    WriteToFile _
        strTmpZipPath & "\" & "xl" & "\" & "workbook.xml", _
"<?xml version=""1.0"" encoding=""UTF-8"" standalone=""yes""?>" & _ 
"<workbook xmlns=""http://schemas.openxmlformats.org/spreadsheetml/2006/main"" xmlns:r=""http://schemas.openxmlformats.org/officeDocument/2006/relationships"" xmlns:mc=""http://schemas.openxmlformats.org/markup-compatibility/2006"" mc:Ignorable=""x15"" xmlns:x15=""http://schemas.microsoft.com/office/spreadsheetml/2010/11/main""><fileVersion appName=""xl"" lastEdited=""6"" lowestEdited=""6"" rupBuild=""14420""/><workbookPr defaultThemeVersion=""164011""/><mc:AlternateContent xmlns:mc=""http://schemas.openxmlformats.org/markup-compatibility/2006""><mc:Choice Requires=""x15""><x15ac:absPath url=""\\snnsvr045\NNSY Perm\T&amp;I Lab\NNSY IT Assistant\Documentation\"" xmlns:x15ac=""http://schemas.microsoft.com/office/spreadsheetml/2010/11/ac""/></mc:Choice></mc:AlternateContent><bookViews><workbookView xWindow=""0"" yWindow=""210"" windowWidth=""15495"" windowHeight=""6435""/></bookViews><sheets><sheet name=""Sheet1"" sheetId=""1"" r:id=""rId1""/></sheets><calcPr calcId=""162913""/><extLst>" & _ 
"<ext uri=""{140A7094-0E35-4892-8432-C4D2E57EDEB5}"" xmlns:x15=""http://schemas.microsoft.com/office/spreadsheetml/2010/11/main""><x15:workbookPr chartTrackingRefBase=""1""/></ext></extLst></workbook>", _
        False, True
    MkDir strTmpZipPath & "\" & "xl" & "\" & "_rels"
    WriteToFile _
        strTmpZipPath & "\" & "xl" & "\" & "_rels" & "\" & "workbook.xml.rels", _
        "<?xml version=""1.0"" encoding=""UTF-8"" standalone=""yes""?><Relationships xmlns=""http://schemas.openxmlformats.org/package/2006/relationships""><Relationship Id=""rId3"" Type=""http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles"" Target=""styles.xml""/><Relationship Id=""rId2"" Type=""http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme"" Target=""theme/theme1.xml""/><Relationship Id=""rId1"" Type=""http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet"" Target=""worksheets/sheet1.xml""/></Relationships>", _
        False, True
    MkDir strTmpZipPath & "\" & "xl" & "\" & "theme"
    WriteToFile _
        strTmpZipPath & "\" & "xl" & "\" & "theme" & "\" & "theme1.xml", _
"<?xml version=""1.0"" encoding=""UTF-8"" standalone=""yes""?>" & _
"<a:theme xmlns:a=""http://schemas.openxmlformats.org/drawingml/2006/main"" name=""Office Theme""><a:themeElements><a:clrScheme name=""Office""><a:dk1><a:sysClr val=""windowText"" lastClr=""000000""/></a:dk1><a:lt1><a:sysClr val=""window"" lastClr=""FFFFFF""/></a:lt1><a:dk2><a:srgbClr val=""44546A""/></a:dk2><a:lt2><a:srgbClr val=""E7E6E6""/></a:lt2><a:accent1><a:srgbClr val=""5B9BD5""/></a:accent1><a:accent2><a:srgbClr val=""ED7D31""/></a:accent2><a:accent3><a:srgbClr val=""A5A5A5""/></a:accent3><a:accent4><a:srgbClr val=""FFC000""/></a:accent4><a:accent5><a:srgbClr val=""4472C4""/></a:accent5><a:accent6><a:srgbClr val=""70AD47""/></a:accent6><a:hlink><a:srgbClr val=""0563C1""/></a:hlink><a:folHlink><a:srgbClr val=""954F72""/></a:folHlink></a:clrScheme><a:fontScheme name=""Office""><a:majorFont><a:latin typeface=""Calibri Light"" panose=""020F0302020204030204""/><a:ea typeface=""""/><a:cs typeface=""""/><a:font script=""Jpan"" typeface=""??????å? Light""/>" & _
"<a:font script=""Hang"" typeface=""?? ??""/><a:font script=""Hans"" typeface=""???? Light""/><a:font script=""Hant"" typeface=""?¼????w""/><a:font script=""Arab"" typeface=""Times New Roman""/><a:font script=""Hebr"" typeface=""Times New Roman""/><a:font script=""Thai"" typeface=""Tahoma""/><a:font script=""Ethi"" typeface=""Nyala""/><a:font script=""Beng"" typeface=""Vrinda""/><a:font script=""Gujr"" typeface=""Shruti""/><a:font script=""Khmr"" typeface=""MoolBoran""/><a:font script=""Knda"" typeface=""Tunga""/><a:font script=""Guru"" typeface=""Raavi""/><a:font script=""Cans"" typeface=""Euphemia""/><a:font script=""Cher"" typeface=""Plantagenet Cherokee""/><a:font script=""Yiii"" typeface=""Microsoft Yi Baiti""/><a:font script=""Tibt"" typeface=""Microsoft Himalaya""/><a:font script=""Thaa"" typeface=""MV Boli""/><a:font script=""Deva"" typeface=""Mangal""/><a:font script=""Telu"" typeface=""Gautami""/><a:font script=""Taml"" typeface=""Latha""/><a:font script=""Syrc"" typeface=""Estrangelo Edessa""/>" & _
"<a:font script=""Orya"" typeface=""Kalinga""/><a:font script=""Mlym"" typeface=""Kartika""/><a:font script=""Laoo"" typeface=""DokChampa""/><a:font script=""Sinh"" typeface=""Iskoola Pota""/><a:font script=""Mong"" typeface=""Mongolian Baiti""/><a:font script=""Viet"" typeface=""Times New Roman""/><a:font script=""Uigh"" typeface=""Microsoft Uighur""/><a:font script=""Geor"" typeface=""Sylfaen""/></a:majorFont><a:minorFont><a:latin typeface=""Calibri"" panose=""020F0502020204030204""/><a:ea typeface=""""/><a:cs typeface=""""/><a:font script=""Jpan"" typeface=""??????å?""/><a:font script=""Hang"" typeface=""?? ??""/><a:font script=""Hans"" typeface=""????""/><a:font script=""Hant"" typeface=""?¼????w""/><a:font script=""Arab"" typeface=""Arial""/><a:font script=""Hebr"" typeface=""Arial""/><a:font script=""Thai"" typeface=""Tahoma""/><a:font script=""Ethi"" typeface=""Nyala""/><a:font script=""Beng"" typeface=""Vrinda""/><a:font script=""Gujr"" typeface=""Shruti""/><a:font script=""Khmr"" typeface=""DaunPenh""/>" & _
"<a:font script=""Knda"" typeface=""Tunga""/><a:font script=""Guru"" typeface=""Raavi""/><a:font script=""Cans"" typeface=""Euphemia""/><a:font script=""Cher"" typeface=""Plantagenet Cherokee""/><a:font script=""Yiii"" typeface=""Microsoft Yi Baiti""/><a:font script=""Tibt"" typeface=""Microsoft Himalaya""/><a:font script=""Thaa"" typeface=""MV Boli""/><a:font script=""Deva"" typeface=""Mangal""/><a:font script=""Telu"" typeface=""Gautami""/><a:font script=""Taml"" typeface=""Latha""/><a:font script=""Syrc"" typeface=""Estrangelo Edessa""/><a:font script=""Orya"" typeface=""Kalinga""/><a:font script=""Mlym"" typeface=""Kartika""/><a:font script=""Laoo"" typeface=""DokChampa""/><a:font script=""Sinh"" typeface=""Iskoola Pota""/><a:font script=""Mong"" typeface=""Mongolian Baiti""/><a:font script=""Viet"" typeface=""Arial""/><a:font script=""Uigh"" typeface=""Microsoft Uighur""/><a:font script=""Geor"" typeface=""Sylfaen""/></a:minorFont></a:fontScheme>" & _
"<a:fmtScheme name=""Office""><a:fillStyleLst><a:solidFill><a:schemeClr val=""phClr""/></a:solidFill><a:gradFill rotWithShape=""1""><a:gsLst><a:gs pos=""0""><a:schemeClr val=""phClr""><a:lumMod val=""110000""/><a:satMod val=""105000""/><a:tint val=""67000""/></a:schemeClr></a:gs><a:gs pos=""50000""><a:schemeClr val=""phClr""><a:lumMod val=""105000""/><a:satMod val=""103000""/><a:tint val=""73000""/></a:schemeClr></a:gs><a:gs pos=""100000""><a:schemeClr val=""phClr""><a:lumMod val=""105000""/><a:satMod val=""109000""/><a:tint val=""81000""/></a:schemeClr></a:gs></a:gsLst><a:lin ang=""5400000"" scaled=""0""/></a:gradFill><a:gradFill rotWithShape=""1""><a:gsLst><a:gs pos=""0""><a:schemeClr val=""phClr""><a:satMod val=""103000""/><a:lumMod val=""102000""/><a:tint val=""94000""/></a:schemeClr></a:gs><a:gs pos=""50000""><a:schemeClr val=""phClr""><a:satMod val=""110000""/><a:lumMod val=""100000""/><a:shade val=""100000""/></a:schemeClr></a:gs>" & _
"<a:gs pos=""100000""><a:schemeClr val=""phClr""><a:lumMod val=""99000""/><a:satMod val=""120000""/><a:shade val=""78000""/></a:schemeClr></a:gs></a:gsLst><a:lin ang=""5400000"" scaled=""0""/></a:gradFill></a:fillStyleLst><a:lnStyleLst><a:ln w=""6350"" cap=""flat"" cmpd=""sng"" algn=""ctr""><a:solidFill><a:schemeClr val=""phClr""/></a:solidFill><a:prstDash val=""solid""/><a:miter lim=""800000""/></a:ln><a:ln w=""12700"" cap=""flat"" cmpd=""sng"" algn=""ctr""><a:solidFill><a:schemeClr val=""phClr""/></a:solidFill><a:prstDash val=""solid""/><a:miter lim=""800000""/></a:ln><a:ln w=""19050"" cap=""flat"" cmpd=""sng"" algn=""ctr""><a:solidFill><a:schemeClr val=""phClr""/></a:solidFill><a:prstDash val=""solid""/><a:miter lim=""800000""/></a:ln></a:lnStyleLst><a:effectStyleLst><a:effectStyle><a:effectLst/></a:effectStyle><a:effectStyle><a:effectLst/></a:effectStyle><a:effectStyle><a:effectLst>" & _
"<a:outerShdw blurRad=""57150"" dist=""19050"" dir=""5400000"" algn=""ctr"" rotWithShape=""0""><a:srgbClr val=""000000""><a:alpha val=""63000""/></a:srgbClr></a:outerShdw></a:effectLst></a:effectStyle></a:effectStyleLst><a:bgFillStyleLst><a:solidFill><a:schemeClr val=""phClr""/></a:solidFill><a:solidFill><a:schemeClr val=""phClr""><a:tint val=""95000""/><a:satMod val=""170000""/></a:schemeClr></a:solidFill><a:gradFill rotWithShape=""1""><a:gsLst><a:gs pos=""0""><a:schemeClr val=""phClr""><a:tint val=""93000""/><a:satMod val=""150000""/><a:shade val=""98000""/><a:lumMod val=""102000""/></a:schemeClr></a:gs><a:gs pos=""50000""><a:schemeClr val=""phClr""><a:tint val=""98000""/><a:satMod val=""130000""/><a:shade val=""90000""/><a:lumMod val=""103000""/></a:schemeClr></a:gs><a:gs pos=""100000""><a:schemeClr val=""phClr""><a:shade val=""63000""/><a:satMod val=""120000""/></a:schemeClr></a:gs></a:gsLst>" & _
"<a:lin ang=""5400000"" scaled=""0""/></a:gradFill></a:bgFillStyleLst></a:fmtScheme></a:themeElements><a:objectDefaults/><a:extraClrSchemeLst/><a:extLst><a:ext uri=""{05A4C25C-085E-4340-85A3-A5531E510DB2}""><thm15:themeFamily xmlns:thm15=""http://schemas.microsoft.com/office/thememl/2012/main"" name=""Office Theme"" id=""{62F939B6-93AF-4DB8-9C6B-D6C7DFDC589F}"" vid=""{4A3C46E8-61CC-4603-A589-7422A47A8E4A}""/></a:ext></a:extLst></a:theme>", _
        False, True
    MkDir strTmpZipPath & "\" & "xl" & "\" & "worksheets"
    WriteToFile _
        strTmpZipPath & "\" & "xl" & "\" & "worksheets" & "\" & "sheet1.xml", _
"<?xml version=""1.0"" encoding=""UTF-8"" standalone=""yes""?>" & _
"<worksheet xmlns=""http://schemas.openxmlformats.org/spreadsheetml/2006/main"" xmlns:r=""http://schemas.openxmlformats.org/officeDocument/2006/relationships"" xmlns:mc=""http://schemas.openxmlformats.org/markup-compatibility/2006"" mc:Ignorable=""x14ac"" xmlns:x14ac=""http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac""><dimension ref=""A1""/><sheetViews><sheetView tabSelected=""1"" workbookViewId=""0""/></sheetViews><sheetFormatPr defaultRowHeight=""15"" x14ac:dyDescent=""0.25""/><sheetData/><pageMargins left=""0.7"" right=""0.7"" top=""0.75"" bottom=""0.75"" header=""0.3"" footer=""0.3""/></worksheet>", _
        False, True
    ZipAFolder strTmpZipPath, _
        strLocalAppTmp  & "\" & "EmptyExcelFile.zip"
    moveFile strLocalAppTmp  & "\" & "EmptyExcelFile.zip", strNewExcelFile
End Sub 

'Dependancies NONE
'Version 1.0.0
'By jeremy.gerdes@navy.mil
Public Sub moveFile(strSourcePath, strDestinationPath)
    Dim fso
    Set fso = CreateObject("Scripting.FileSystemObject")
    'Does the source file exist?
    If FileExists(strSourcePath) Then
        'If the destination is a folder then move the file into the folder preserving the source name
        If FolderExists(strDestinationPath) Then
             strDestinationPath = strDestinationPath & "\" & fso.GetFileName(strSourcePath)
        End If
        'If the destination allready exists, attempt to delete it... this move method allways over writes
        If FileExists(strDestinationPath) Then
           fso.DeleteFile strDestinationPath, True
        End If
        'If the destination path doesn't exist attempt to make it
        If Not FolderExists(fso.GetParentFolderName(strDestinationPath)) Then
            MkDir (fso.GetParentFolderName(strDestinationPath))
        End If
        'Move the file
        fso.moveFile strSourcePath, strDestinationPath
    End If
End Sub

Public Sub WriteToFile(ByRef strFileName, ByRef strContent, ByRef fOpenFile, ByRef fOverwrite)
    Dim tf ' As Object
    Dim FSO ' As Object
    Set FSO = CreateObject("Scripting.FileSystemObject")
    If FSO.FileExists(strFileName) Then
        If fOverwrite Then
            FSO.DeleteFile strFileName
        End If
    End If
    Set tf = FSO.OpenTextFile(strFileName, 8, True)
    tf.WriteLine strContent
    tf.Close
    If fOpenFile Then
        OpenWithExplorer strFileName
    End If
    'Clean up
    Set tf = Nothing
    Set FSO = Nothing
End Sub

Sub ZipAFolder (sFolder, zipFile)
    'From /a/15143587/1146659
    With CreateObject("Scripting.FileSystemObject")
        zipFile = .GetAbsolutePathName(zipFile)
        sFolder = .GetAbsolutePathName(sFolder)

        With .CreateTextFile(zipFile, True)
            .Write Chr(80) & Chr(75) & Chr(5) & Chr(6) & String(18, chr(0))
        End With
    End With

    With CreateObject("Shell.Application")
        .NameSpace(zipFile).CopyHere .NameSpace(sFolder).Items

        Do Until .NameSpace(zipFile).Items.Count = _
                 .NameSpace(sFolder).Items.Count
            WScript.Sleep 200
        Loop
    End With

End Sub

Public Sub OpenWithExplorer(ByRef strFilePath)
    Dim wshShell
    Set wshShell = CreateObject("WScript.Shell")
    wshShell.Exec ("Explorer.exe " & strFilePath)
    Set wshShell = Nothing
End Sub

Public Function Environ(ByRef strName)
    'Replaces VBA.Envrion Public Function with wscript version for use in all VB engines
    Dim wshShell: Set wshShell = CreateObject("WScript.Shell")
    Dim strResult: strResult = wshShell.ExpandEnvironmentStrings("%" & strName & "%")
    'wshShell.ExpandEnvironmentStrings behaves differently than VBA.Environ when no environment variable is found,
    '  conforming all results to return nothing if no result was found, like VBA.Environ
    If strResult = "%" & strName & "%" Then
        Environ = vbNullString
    Else
        Environ = strResult
    End If
    'cleanup
    Set wshShell = Nothing
End Function

' Return true if file exists and false if file does not exist
Public Function FileExists(ByVal strPath) ' As String) As Boolean
Dim FSO 'As Object
    Set FSO = CreateObject("Scripting.FileSystemObject")
    FileExists = FSO.FileExists(strPath)
    ' Clean up
    Set FSO = Nothing
End Function

Public Function FolderExists(ByVal strPath) 'As String) As Boolean
Dim FSO ' As Object
    ' Note I used to use the vba.Dir Public Function but using that Public Function
    ' will lock the folder and prevent it from being deleted.
    Set FSO = CreateObject("Scripting.FileSystemObject")
    FolderExists = FSO.FolderExists(strPath)
    ' Clean up
    Set FSO = Nothing
End Function

Function MkDir(strPath)
    ' Version: 1.0.3
    ' Dependancies: NONE
    ' Returns: True if no errors, i.e. folder path allready existed, or was able to be created without errors
    ' Usage Example: MkDir Environ("temp") & "\" & "opsRunner"
    ' Emulates linux 'MkDir -p' command:  creates folders without complaining if it allready exists
    ' Superceeds the the VBA.MkDir function, but requires that drive be included in strPath
    ' By jeremy.gerdes@navy.mil
    Dim fso ' As Scripting.FileSystemObject
    Set fso = CreateObject("Scripting.FileSystemObject") ' New Scripting.FileSystemObject
    If Not fso.FolderExists(strPath) Then
        On Error Resume Next
        Dim fRestore ' As Boolean
        fRestore = False
        'Handle Network Paths
        If Left(strPath, 2) = "\\" Then
            strPath = Right(strPath, Len(strPath) - 2)
            fRestore = True
        End If
        Dim arryPaths 'As Variant
        arryPaths = Split(strPath, "\")
        'Restore Server file path prefix
        If fRestore Then
            arryPaths(0) = "\\" & arryPaths(0)
        End If
        Dim intDir ' As Integer
        Dim strBuiltPath ' As String
        For intDir = LBound(arryPaths) To UBound(arryPaths)
            strBuiltPath = strBuiltPath & arryPaths(intDir) & "\"
            If Not fso.FolderExists(strBuiltPath) Then
                fso.CreateFolder strBuiltPath
            End If
        Next
    End If
    MkDir = (Err.Number = 0)
    'cleanup
    Set fso = Nothing
End Function

'Dependencies: NONE
'--- This function modified from: https://www.reddit.com/r/vba/comments/aom8xs/how_to_tell_if_script_is_running_in_vba_vbscript/ei0z2ll?utm_source=share&utm_medium=web2x&context=3
'--- Returns a string containing which script engine this is running in. Modified to test that wscript has a property 'Version' to allow for wscript emulation in the VBIDE
'--- Will return either "VBS","VBA", or "HTA".
Function ScriptEngine()
    On Error Resume Next
    ScriptEngine = "VBA"
    Dim tmp
    tmp = wscript.Version
    If Err.Number = 0 Then
        ScriptEngine = "VBS"
    End If
    Err.Clear
    ReDim window(0)
    If Err.Number = 501 Then
        ScriptEngine = "HTA"
    End If
    On Error GoTo 0
End Function

'Dependencies: ScriptEngine
Function GetCurrentFileFolder()
    Select Case ScriptEngine()
        Case "VBS"
            GetCurrentFileFolder = Left(wscript.ScriptFullName, Len(wscript.ScriptFullName) - Len(wscript.ScriptName) - 1)
        Case "VBA"
            Select Case Application.Name
                Case "Microsoft Word"
                    GetCurrentFileFolder = ThisDocument.Path
                Case "Microsoft Access"
                    GetCurrentFileFolder = CurrentProject.Path
                Case "Microsoft Excel"
                    GetCurrentFileFolder = ThisWorkbook.Path
            End Select
            'Not going to bother checking for other VBA contexts like powerpoint, visio, ms project or autocad.
        Case "HTA"
            '----------------------------------------------------------------------
            ' - There are several methods to get the current directory of the HTA -
            '----------------------------------------------------------------------
            'From testing don't use the following
            'This method drops the server path for network paths
            'strPath =  Left(Document.Location.pathname, InStrRev(Document.Location.pathname, "\") - 1) & "\Main.hta"
            'This method works fine if the HTA directly executed,
            'but if explorer.exe or cscript.exe executes the hta this method returns the %windir% dictory
            'Dim objScripShell
            'Set objScripShell = CreateObject("WScript.Shell")
            'strPath =  objScripShell.CurrentDirectory & "\Main.hta"
            Dim strPath
            strPath = jsUrlDecode(Document.Location.href)
            strPath = Replace(strPath, "/", "\")
            strPath = Left(strPath, InStrRev(strPath, "\") - 1)

            'URLs that begin with a drive letter will begin with 'file:\\\' Check this first
            If Left(strPath, 8) = "file:\\\" Then
            strPath = Right(strPath, Len(strPath) - 8)
            End If

            'URLs that begin with a server name will begin with 'file:'
            If Left(strPath, 5) = "file:" Then
            strPath = Right(strPath, Len(strPath) - 5)
            End If
            GetCurrentFileFolder = strPath
    End Select
End Function

'BuildEmptyExcelFile GetCurrentFileFolder & "\" & "anEmptyExcelFile.xlsx" 
```

# django - 使用 Django 和 Tastypie 返回随机项目

> ID：10921284
> 
> 赞同：2
> 
> 时间：2012-06-06T19:59:38.293
> 
> 标签：django, random, tastypie

在直接的 Django 中，您可以通过以下方式访问随机模型实例：

```
randinst = MyModel.objects.order_by('?') 
```

*注意：虽然这存在性能问题，但我已经使用 sqlite 后端进行了测试，并且我确实得到了多达 100000 次尝试的非常随机的结果。由于我的应用程序不需要除此之外的显着性能，因此我不关心其他后端。*

我希望完成的是：客户端发出一个请求，`/api/v1/mymodel/?limit=10`然后从 MyModel 通过tastepie 获取一组随机的十行，就像您运行上面的代码片段 10 次一样。然后它发出相同的请求，并接收 10 个不同的（在概率范围内）随机行。

*注意：我尝试过请求`/api/v1/mymodel/?ordering='?'`及其所有合理的变体均无济于事。设置也无济于事`MyModelResource.Meta.ordering = ['?']`*

有什么办法可以用美味派来实现我的目标吗？还有其他解决方案可以尝试吗？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T20:20:40.907

*回答由#tastypie 提供。*

设置模型的查询集如下：

`class MyModelResource(ModelResource): class Meta: queryset = MyModel.objects.all().order_by('?')`

`objects.all().order_by`这里的关键是不仅要使用`objects.order_by`.

# ios - 什么时候在 Objective-C 中删除 BOOL 属性？

> ID：10921286
> 
> 赞同：0
> 
> 时间：2012-06-06T19:59:39.920
> 
> 标签：ios, xcode, automatic-ref-counting

在objective-c中，使用ARC，BOOL（或int）属性何时被删除？例如，假设我有

```
@property (nonatomic) BOOL happy;  //Suppose this is a property of class Face 
```

在这种情况下，happy 属性何时被删除？我问这个是因为没有诸如`strong`or之类的说明符`weak`。事实上，Xcode 甚至不允许你将这个属性声明为`strong`or `weak`?

我的猜测是它与存储在堆栈中的 BOOL 和存储在堆中的常规对象属性有关，但这只是一个猜测。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T20:04:13.353

如果它`BOOL`是你的类的一部分，当类被自动释放池释放时它会被删除。否则，当变量超出范围时，堆栈上的任何原语都会消失。没有必要对原始类型进行内存管理，除非您明确拥有指向它们的指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T20:01:45.270

BOOL 属性永远不会被删除，Primitives 类型的属性不能被保留或释放 Primitives 是 int、bool、float、double 等。

# c# - c#应用程序中的被动等待

> ID：10921289
> 
> 赞同：0
> 
> 时间：2012-06-06T19:59:49.673
> 
> 标签：c#, timer, console-application

我正在开发 ac# 控制台应用程序（稍后将转换为 Windows 服务）。

我的应用程序启动了很多计时器，它们以一定的间隔（每天一次、每小时一次等）执行一些代码。

我不希望我的控制台应用程序在设置完所有计时器后退出。

现在我正在使用一个正确的句子，但我认为这不是正确的方法。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T20:03:37.597

在代码的末尾，您可以添加

```
Console.WriteLine("Press any key to close"); 
Console.ReadKey(); 
```

或者

```
Console.ReadLine(); 
```

其中任何一个都会阻止控制台关闭，直到您按下一个键。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T20:05:34.580

当我开发 Windows 服务时，我通常会创建一个模块 (dll)，其中包含处理所有逻辑的代码。然后我创建一个 Windows 窗体，调用 Start Service 和 Stop service 进行开发，并创建一个 Service 项目进行部署。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T20:05:03.857

在使用控制台应用程序时设置时间后，您应该使用 Console.ReadKey()...

当您将其转换为服务时，您将不再需要使用此行，因为您将在“服务启动”上实现计时器初始化，并且在代码块结束时它将保持启动并运行

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-06T20:10:49.167

不要担心你的`while`循环。

如果您稍后将您的应用程序转换为 Windows 服务，那么我不会为此烦恼。使用服务时，您将在服务的启动方法中设置计时器，并且服务会一直运行，直到您停止它为止。所以不需要自定义应用程序循环。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T20:06:39.030

```
Process.GetCurrentProcess().WaitForExit() 
```

将保持一切运行，直到您以编程方式退出。

# sql - 多个连接到同一个表

> ID：10921290
> 
> 赞同：0
> 
> 时间：2012-06-06T19:59:52.987
> 
> 标签：sql, join

我有两个表 Profile_Appointments 和 Profile。

除了其他配置文件数据（名字、姓氏等）之外，配置文件表中的每条记录都有一个 Profile_key 和一个 Profile_Type_Key。

代表有 Profile_Type 4，客户有 Profile_Type 6

```
 PROFILE TABLE
 Profile_Key    Profile_Type_key    First_Name     Last_Name
  1234                 4              John            Smith
  8765                 6              Mike            Jones 
```

Profile_Appointment 表为每个约会保存两条记录，一条使用 Rep 的 Profile_Key，另一条使用客户的 Profile_Key

```
 Appointment_Key        Profile_Key     
     10                    1234
     10                    8765 
```

约会键是指约会表。

我需要进行查询，为每个约会生成一条记录，并从 Profile 表中获取代表和客户的数据

```
 THE RESULT I WANT
 Appointment_Key  Profile_Key Rep    Profile_Key Customer
    10                1234                    8765 
```

这是不起作用的查询...

```
 select appointment_key, p.profile_key as Rep, p2.profile_key as Customer, p.firs_name,p2.first_name from profile_appointment pa

  join profile p 
  on p.profile_key = pa.profile_key

  join profile p2
  on p2.profile_key = pa.profile_key

  where p.profile_type_key = '4' or p2.profile_type_key = '6' 
```

我得到的是：

```
 Appointment_Key      Rep      Customer     Rep      Customer
    10                1234      1234        John       John 
```

我无法弄清楚我错过了什么。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T20:12:16.033

```
SELECT a1.appointment_key, a1.profile_key rep, a2.profile_key customer
  FROM appointment a1
  INNER JOIN profile p1 ON a1.profile_key = p1.profile_key AND p1.profile_type_key = 4
  INNER JOIN appointment a2 ON a1.appointment_key = a2.appointment_key
  INNER JOIN profile p2 ON a2.profile_key = p2.profile_key AND p2.profile_type_key = 6 
```

编辑：您可能会发现嵌套选择更具可读性：

```
SELECT reps.appointment_key, reps.profile_key rep, customers.profile_key customer
  FROM (
    SELECT appointment.*
      FROM appointment
      INNER JOIN profile ON appointment.profile_key = profile.profile_key AND profile_type_key = 4
  ) reps
  INNER JOIN (
    SELECT appointment.*
      FROM appointment
      INNER JOIN profile ON appointment.profile_key = profile.profile_key AND profile_type_key = 6
  ) customers ON reps.appointment_key = customers.appointment_key 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T20:26:02.510

您需要同时满足这两个条件，因此您需要 AND 而不是 OR

```
 select pa.appointment_key, p.profile_key as Rep, p2.profile_key as Customer, 
        p.first_name as RepName,p2.first_name as CustomerName
from profile_appointment pa    
join profile_appointment pa2 on pa.appointment_key = pa2.appointment_key
join profile p    on p.profile_key = pa.profile_key    and  p.profile_type_key = '4'
join profile p2   on p2.profile_key = pa2.profile_key   and  p2.profile_type_key = '6' 
```

# objective-c - 应用程序的音频无法通过扬声器工作

> ID：10921298
> 
> 赞同：7
> 
> 时间：2012-06-06T20:00:12.870
> 
> 标签：objective-c, ios, ipad, avaudioplayer

我的应用程序中有一个奇怪的错误。我正在使用 AVAudioPlayer 播放声音（它的多个实例），声音通过耳机完美地工作，但使用没有耳机的应用程序不会从扬声器发出声音。所有的音频剪辑都是 AAC 编码的。

我已经尝试通过 Objective-C API ([AVAudioSession sharedInstance]) 和 C API 设置 AVAudioSession 属性，但这些选项似乎都不起作用。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-09-11T18:15:41.300

接受的答案（在 ios7 中）对我不起作用，以下代码确实有效。（我没有足够的评论点，将其作为单独的答案发布）

```
[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayAndRecord
                                 withOptions:AVAudioSessionCategoryOptionDefaultToSpeaker
                                       error:nil]; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-11T11:41:34.650

iPhone 上的问题 - 当声音非常低时 - 似乎是从手机耳机（不是耳机插孔）而不是底部扬声器中出来 - 更改为 DEFAULT TO SPEAKER

```
//http://stackoverflow.com/questions/3104562/avaudiorecorder-avaudioplayer-sound-output-on-internal-speaker-how-to-chang

UInt32 doChangeDefaultRoute = 1;
AudioSessionSetProperty (
    kAudioSessionProperty_OverrideCategoryDefaultToSpeaker,
    sizeof (doChangeDefaultRoute),
    &doChangeDefaultRoute
); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-15T08:33:26.383

对于那些使用`Swift Syntax`...

下面为我​​工作。

```
do {
    try AVAudioSession.sharedInstance().setCategory(AVAudioSessionCategoryPlayAndRecord, withOptions: AVAudioSessionCategoryOptions.DefaultToSpeaker)
   } 
catch {
          print("can't default to speaker ")
      } 
```

# c# - 返回简单类型的泛型方法

> ID：10921300
> 
> 赞同：3
> 
> 时间：2012-06-06T20:00:19.847
> 
> 标签：c#, generics

好的，我有一些我不太喜欢的代码。鉴于我没有写它，只是继承了它，我突然想到我可以清理一下它。基本上，我们有一个与 NHibernate 保持一致的设置对象。我不会对实现细节感到厌烦，只是说它包含一个字典，其中包含我们保存在数据库中的实际值。

我们典型的属性实现如下所示：

```
public string MyDumbProperty
{
get { return GetStringValue("MyDumbProperty", string.Empty); }
set { SetValue("MyDumbProperty", value);}
} 
```

现在，从上面的实现中可能很明显，我们为我们返回的每种类型（字符串、整数、长整数、浮点数等）都有单独的 Getxxxx 方法，第二个参数是默认值。我想要的是能够执行以下操作：

```
public string MyDumbProperty
{
get { return GetValue("MyDumbProperty", string.Empty); }
set { SetValue("MyDumbProperty", value);}
} 
```

我有几个原因想要这样做。最大的问题是我个人不喜欢根据它们采用的参数类型命名的方法。第二个是我想为这个废话制作一个更清晰的模板。然后我可以只填写属性的名称和类型并完成（假设 resharper 可以为类型提供合理的默认值）。

我曾想过创建一个返回 T 的通用方法 GetValue，但我不确定我需要如何设置通用约束，所以这是可行的。从中返回的类型都是基本类型（字符串、整数等）。有几个返回数组，但我总是可以对它们做一些不同的事情。无论如何，这不是一个高优先级的问题，但每次看到它都会让我烦恼。我只是认为应该有更好的方法来做到这一点。

我想第一步就是重命名各种方法。由于它们在第二个参数中为默认值传递的类型有所不同，因此我至少可以将它们强制为相同的名称。但我能做得更好吗？如果我能摆脱每个方法中的多个重复代码位，这些重复代码仅在所使用的数据类型方面有所不同（所有数字类型中的 TryParse），那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T20:20:07.407

我认为如果它的胆量不太复杂，您可能可以使用通用方法。例如，也许是这样的：

```
public T GetValue<T>(string name, T ifNull) where T : IConvertible
{
    string value = GetProperty(name);
    if (value == null)
        return ifNull;
    try
    {
        return (T)Convert.ChangeType(value, typeof(T));
    }
    catch
    {
        return ifNull;
    }
} 
```

对于数组，您可能需要一个`GetArrayValue`执行不同操作的函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T20:14:31.477

您可以使用`default(T)`来获取一个类型的默认值。

```
public T Get<T>(string propertyName)
{
    object obj;
    if (propertyBag.TryGetValue(propertyName, out obj)) {
        return (T)obj;
    }
    if(typeof(T) == typeof(string)) {
        return String.Empty;
    }
    return default(T);
} 
```

* * *

**更新**

作为替代方案，您可以有两个重载，一个接受显式默认值。

```
public T Get<T>(string propertyName)
{
    return Get<T>(propertyName, default(T));
}

public T Get<T>(string propertyName, T defaultValue)
{
    object obj;
    if (propertyBag.TryGetValue(propertyName, out obj)) {
        return (T)obj;
    }
    return defaultValue;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T20:18:17.803

.net 泛型的伟大之处在于，当它们表示哪些参数时，它们可以被隐式使用。不确定那句话的语法，但可以肯定的是，如果经常使用它是可能的..

例如对于 GetValue：

```
 public T GetValue<T>(string PropertyName, T DefaultValue)
 {

 }

 .... return GetValue("Prop1", 4); //T = int
 .....return GetValue("Prop2", string.Empty) //T= string
 //for nullable times, you can always include the generic parameter
 GetValue<int[]>("Prop3",null);
 //or by 'strongly typing' the null value:
 GetValue("Prop3", (int[])null); //for set this isn't a problem, since 'value' already is strongly typed 
```

设置相同

```
public void SetValue<T>(string PropertyName, T Value)
{
} 
```

# django - NoReverseMatch django 1.4 管理员

> ID：10921303
> 
> 赞同：1
> 
> 时间：2012-06-06T20:00:47.230
> 
> 标签：django, django-admin, django-templates, django-urls, django-1.4

我将一个项目从 1.1 迁移到 1.2，然后迁移到 1.3，所有这些都完美无缺。但是，当我将版本升级到 1.4 时，我不断收到

```
NoReverseMatch at /admin/<app_name>/<model_name>/
Reverse for 'app_list' with arguments '()' and keyword arguments '{'app_label': ''}' not found. 
```

所有其他管理功能似乎都可以正常工作，但每次我尝试查看列表时，都会收到此 NoReverseMatch 错误。

我的管理员网址条目是：

```
(r'^admin/', include(admin.site.urls)), 
```

这是我的回溯：

```
Template error:
In template /home/ibustama/yalea/env-yalea/lib/python2.6/site-packages/django/contrib/admin/templates/admin/change_list.html, error at line 44
   Reverse for 'app_list' with arguments '()' and keyword arguments '{'app_label': ''}' not found.
   34 : </script>

   35 : {% endif %}{% endif %}

   36 : {% endblock %}

   37 : 

   38 : {% block bodyclass %}change-list{% endblock %}

   39 : 

   40 : {% if not is_popup %}

   41 : {% block breadcrumbs %}

   42 : <div class="breadcrumbs">

   43 : <a href="{% url 'admin:index' %}">{% trans 'Home' %}</a>

   44 : &rsaquo; <a href=" {% url 'admin:app_list' app_label=cl.opts.app_label %} ">{{ app_label|capfirst|escape }}</a>

   45 : &rsaquo; {{ cl.opts.verbose_name_plural|capfirst }}

   46 : </div>

   47 : {% endblock %}

   48 : {% endif %}

   49 : 

   50 : {% block coltype %}flex{% endblock %}

   51 : 

   52 : {% block content %}

   53 :   <div id="content-main">

   54 :     {% block object-tools %}

Traceback:
File "/home/ibustama/yalea/env-yalea/lib/python2.6/site-packages/django/core/handlers/base.py" in get_response
  136\.                     response = response.render()
File "/home/ibustama/yalea/env-yalea/lib/python2.6/site-packages/django/template/response.py" in render
  104\.             self._set_content(self.rendered_content)
File "/home/ibustama/yalea/env-yalea/lib/python2.6/site-packages/django/template/response.py" in rendered_content
  81\.         content = template.render(context)
File "/home/ibustama/yalea/env-yalea/lib/python2.6/site-packages/django/template/base.py" in render
  140\.             return self._render(context)
File "/home/ibustama/yalea/env-yalea/lib/python2.6/site-packages/django/template/base.py" in _render
  134\.         return self.nodelist.render(context)
File "/home/ibustama/yalea/env-yalea/lib/python2.6/site-packages/django/template/base.py" in render
  823\.                 bit = self.render_node(node, context)
File "/home/ibustama/yalea/env-yalea/lib/python2.6/site-packages/django/template/debug.py" in render_node
  74\.             return node.render(context)
File "/home/ibustama/yalea/env-yalea/lib/python2.6/site-packages/django/template/loader_tags.py" in render
  123\.         return compiled_parent._render(context)
File "/home/ibustama/yalea/env-yalea/lib/python2.6/site-packages/django/template/base.py" in _render
  134\.         return self.nodelist.render(context)
File "/home/ibustama/yalea/env-yalea/lib/python2.6/site-packages/django/template/base.py" in render
  823\.                 bit = self.render_node(node, context)
File "/home/ibustama/yalea/env-yalea/lib/python2.6/site-packages/django/template/debug.py" in render_node
  74\.             return node.render(context)
File "/home/ibustama/yalea/env-yalea/lib/python2.6/site-packages/django/template/loader_tags.py" in render
  123\.         return compiled_parent._render(context)
File "/home/ibustama/yalea/env-yalea/lib/python2.6/site-packages/django/template/base.py" in _render
  134\.         return self.nodelist.render(context)
File "/home/ibustama/yalea/env-yalea/lib/python2.6/site-packages/django/template/base.py" in render
  823\.                 bit = self.render_node(node, context)
File "/home/ibustama/yalea/env-yalea/lib/python2.6/site-packages/django/template/debug.py" in render_node
  74\.             return node.render(context)
File "/home/ibustama/yalea/env-yalea/lib/python2.6/site-packages/django/template/defaulttags.py" in render
  281\.                 return nodelist.render(context)
File "/home/ibustama/yalea/env-yalea/lib/python2.6/site-packages/django/template/base.py" in render
  823\.                 bit = self.render_node(node, context)
File "/home/ibustama/yalea/env-yalea/lib/python2.6/site-packages/django/template/debug.py" in render_node
  74\.             return node.render(context)
File "/home/ibustama/yalea/env-yalea/lib/python2.6/site-packages/django/template/loader_tags.py" in render
  62\.             result = block.nodelist.render(context)
File "/home/ibustama/yalea/env-yalea/lib/python2.6/site-packages/django/template/base.py" in render
  823\.                 bit = self.render_node(node, context)
File "/home/ibustama/yalea/env-yalea/lib/python2.6/site-packages/django/template/debug.py" in render_node
  74\.             return node.render(context)
File "/home/ibustama/yalea/env-yalea/lib/python2.6/site-packages/django/template/defaulttags.py" in render
  424\.                         raise e

Exception Type: NoReverseMatch at /admin/auth/user/
Exception Value: Reverse for 'app_list' with arguments '()' and keyword arguments '{'app_label': ''}' not found. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T16:03:04.557

我的错误最终相当愚蠢。我的一个自定义上下文处理器重新定义了“cl”上下文变量，因此使以下标记失败：

```
{% url 'admin:app_list' app_label=cl.opts.app_label %} 
```

我只需要对我自己的上下文处理器和模板进行一些更改（并使用更好的上下文处理器变量名称）。

笔记：我不知道为什么这之前没有让我感到困扰。理论上，即使在 1.1 中，它也应该是一个问题。

# r - 如何将复杂的日期/时间字符串解析为动物园对象？

> ID：10921304
> 
> 赞同：1
> 
> 时间：2012-06-06T20:00:51.680
> 
> 标签：r, zoo

我正在尝试将以下日期/时间字符串转换为动物园对象：

2004:071:15:23:41.87250

2004:103:15:24:15.35931

年：东：时：分：秒

日期/时间字符串存储在没有标题的数据框中。在 R 中解决这个问题的最佳方法是什么？

干杯!

根据 Gavin 的回答进行编辑：

```
# read in time series from CSV file; each entry as described above
timeSeriesDates <- read.csv("timeseriesdates.csv", header = FALSE, sep = ",")
# convert to format that can be used as a zoo object
timeSeriesDatesZ <- as.POSIXct(timeSeriesDates$V1, format = "%Y:%j:%H:%M:%S") 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T20:11:33.893

以通常的方式将数据读入 R。您将拥有以下内容：

```
dats <- data.frame(times = c("2004:071:15:23:41.87250", "2004:103:15:24:15.35931"))
dats 
```

这些可以通过以下方式转换为其中一个`POSIXt`类：

```
dats <- transform(dats, as.POSIXct(times, format = "%Y:%j:%H:%M:%S")) 
```

或者

```
data$times <- as.POSIXct(dats$times, format = "%Y:%j:%H:%M:%S")) 
```

然后可以在动物园对象中使用。有关参数`?strftime`中使用的占位符的详细信息，请参阅`format`；本质上`%j`是一年中的一天占位符。

为了做**动物园**位，我们会做，对实际时间序列使用一些虚拟数据

```
ts <- rnorm(2) ## dummy data
require(zoo)   ## load zoo
tsZoo <- zoo(ts, dats$times) 
```

最后一行给出：

```
> tsZoo
2004:071:15:23:41.87250 2004:103:15:24:15.35931 
              0.3503648              -0.2336064 
```

使用小数秒需要注意的一件事是 i) 使用浮点运算可能无法记录您所拥有的确切分数。此外，考虑到 R 中的选项值，R 可能不会显示完整的小数秒；`digits.secs`. 有关`?options`此特定选项以及如何更改它的更多信息，请参阅。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T20:11:48.620

这是第一个字符串的注释示例：

```
R> s <- "2004:103:15:24:15.35931"
R> # split on the ":" and convert the result to a numeric vector
R> n <- as.numeric(strsplit(s, ":")[[1]])
R> # Use the year, hour, minute, second to create a POSIXct object
R> # for the first of the year; then add the number of days (as seconds)
R> ISOdatetime(n[1], 1, 1, n[3], n[4], n[5])+n[2]*60*60*24
[1] "2004-04-13 16:24:15 CDT" 
```

# php - 正确使用双引号和单引号、连接句点和逗号

> ID：10921306
> 
> 赞同：3
> 
> 时间：2012-06-06T20:01:10.323
> 
> 标签：php, syntax

对 PHP 来说相当新，试图找出将变量等连接成字符串的正确语法。

例如：

```
A    $mydir = "../../uploads/images/'".$id."'/thumb"; 

B    $mydir = "../../uploads/images/".$id."/thumb"; 

C    $mydir = '../../uploads/images/'.$id.'/thumb"; 

D    $mydir = "../../uploads/images/$id/thumb"; 
```

哪一个是正确的？

当你用一个变量结束一个字符串，但必须用逗号定义下一个元素时怎么办？

```
 mkdir('../../uploads/images/' . $newid , 0777); 
```

当变量在中间时怎么办？

```
 mkdir('../../uploads/images/' . $newid . '/thumb', 0777); 
```

最后，任何人都可以推荐一个好的 PHP 参考资源吗？W3Schools 没有削减它...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T20:08:25.277

PHP 中的字符串可以使用双引号或单引号。两者之间有区别，因为使用双引号会导致 PHP 插入字符串中的任何变量。例如：

```
$var = 'test';
echo "This is a $var";  // outputs: This is a test

echo 'This is a $var'; // outputs: This is a $var 
```

因此，在字符串周围使用双引号会慢一些，因为字符串必须由 PHP 插值才能输出。PHP 中的字符串也有 nowdoc 和 heredoc 支持。

除了这种区别之外，没有任何区别，您可以互换使用它们，如下例所示：

```
echo 'I like ' . "concatenating" . ' strings'; 
```

不过，在整个代码中保持一致可能是一个好主意。更多信息，请参阅[手册](http://php.net/manual/en/language.types.string.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T20:06:17.527

转到 PHP 手册： http: [//php.net/manual/en/language.types.string.php](http://php.net/manual/en/language.types.string.php)

至于不同类型的字符串：

如果使用双引号字符串，则可以在字符串中包含变量，如下所示：

```
$name = "world";
print("Hello $name"); 
```

单引号不会扩展变量。

句点只是连接运算符。因此，如果您以连接一个变量结束，那很好。即这没关系：

```
 $name = "world";
 $greeting = "Hello ".$name; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T20:06:01.947

你不应该使用你的**A**或**B**，如果你有双引号，使用**D**更容易阅读。这并不是说你不能使用它，如果你喜欢难以阅读你的弦乐，那就去吧！

字符串后面的逗号无关紧要

```
mkdir('../../uploads/images/' . $newid , 0777); // works
mkdir('../../uploads/images/' . $newid . '/thumb', 0777); // works too
mkdir("../../uploads/images/$newid" , 0777); // works and is nicer to read
mkdir("../../uploads/images/$newid/thumb", 0777); // also nicer to read 
```

如果字符串中所需的值不是变量，则要么必须创建变量，要么必须使用常规字符串连接（而不是插值）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-06T20:04:48.557

B 和 D 是正确的。PHP 中单引号和双引号的唯一区别是双引号之间的内容是为 PHP 解析的。从[php.net](http://www.php.net/manual/en/language.types.string.php#language.types.string.parsing)，

> 当用双引号或 heredoc 指定字符串时，会在其中解析变量。

A - 有一对不必要的单引号。

B - 精细

C - 结尾引号不正确。应该以单引号结尾。

D - 精细

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T20:05:34.727

对于连接 B 或 C 都可以工作，但是对于相对文件路径，通常最好使用

```
$_SERVER['DOCUMENT_ROOT'] 
```

语法，并访问相对于服务器的 html 根文件夹的文件，这意味着您的语法看起来像

```
$_SERVER['DOCUMENT_ROOT']."/folder/foler/".$id."/thumb"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-06T20:06:10.733

A不会做。

B是最好的。

C 有语法错误。此外，对于您通常使用的字符串`"`，但另一方面，`'`在格式化html时使用：`'<a href="google.com">Google!</a>'`因此您不需要转义引号并且代码看起来不错。

D 有效，但不推荐。例如在 D `"blah $this -> name blah" 中不起作用。这就是原因。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-06T20:07:20.037

从您的选择列表中，“B”很好，“D”也很好。我最喜欢的参考是官方手册：[http ://www.php.net/manual/en/](http://www.php.net/manual/en/)

# android - 应用内购买对话框后Android Play商店劫持焦点

> ID：10921312
> 
> 赞同：2
> 
> 时间：2012-06-06T20:01:47.487
> 
> 标签：android, in-app-purchase, google-play, in-app-billing

有谁知道对此可以做些什么？

基本上，如果 Play 商店应用程序仍在后台运行 - 大多数用户第一次下载并安装应用程序后都会出现这种情况 - 在与任何应用内购买相关的对话框交互后，Play 商店将被带回成为焦点，用户必须回到应用程序才能完成任务。如何防止这种情况？

# asp.net - 使用 DBML 作为模型时如何验证表单数据？

> ID：10921313
> 
> 赞同：0
> 
> 时间：2012-06-06T20:01:48.610
> 
> 标签：asp.net, asp.net-mvc-3, razor

我创建了一个 MVC 应用程序，其中视图中的表单使用 DBML 作为模型。但是当我没有真正使用传统模型文件时，我该如何验证呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T21:11:42.097

尝试[这篇文章](https://stackoverflow.com/questions/2281464/adding-dataannotations-to-auto-generated-dbml-class-mvc-2-0-asp-net)中建议的使用[metadatatype 属性](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.metadatatypeattribute.aspx)的方法。

# .net - 为什么 ABCpdf .Net 在使用 Adob e LiveCycle 创建时看不到我的 pdf 中的字段？

> ID：10921315
> 
> 赞同：2
> 
> 时间：2012-06-06T20:01:51.537
> 
> 标签：.net, pdf, abcpdf, livecycle-designer

我正在开发一个 PDF Filler 应用程序，该应用程序将使用 Web 表单中的值填充 PDF 中的字段。我的代码适用于我拥有的旧 PDF，但使用 Adob​​e LiveCycle Designer 创建的新 PDF 似乎无法看到 PDF 中的字段。建议将 PDF 保存为“Adobe 静态 PDF 表单”，但这并没有解决问题。

这是我的代码：

```
 Doc doc = new Doc();
        doc.Read(Server.MapPath("~/pdfs/test.pdf"));

        foreach (Field field in doc.Form.Fields)
        {
            if (field.Name == "StreetAddress")
            {
                field.Value = StreetAddress.Text;
            }
        } 
```

在我的代码中，doc.Form.Fields 仅包含 1 个字段，其名称为“form1[0]”，即使 PDF 中实际上有 7 个字段。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T14:27:18.273

在大量使用代码之后，我已经找到了答案。使用 GetFieldNames() 函数获取字段名称数组，因为这将返回所有字段，无论级别如何。有了这个，您可以循环通过名称创建字段的数组。我遇到的唯一其他问题是字段名称仍采用“form1[0].#pageSet[0].Page1[0].StreetAddress[0]”格式，但如果您使用 PartialName 属性，它将返回“StreetAddress [0]”，因此您只需删除最后 3 个字符即可获得正确的字段名称。

```
 string[] fieldNames = doc.Form.GetFieldNames();
    foreach (string fieldName in fieldNames)
    {
      Field field = doc.Form[fieldName];
      if(field.PartialName.Substring(0, field.PartialName.Length - 3).ToLower().Equals("streetaddress"))
      {
        field.Value = "whatever value you want";
      }
   } 
```

# python - 在 matplotlib 中绘制多个 y 轴和颜色条

> ID：10921316
> 
> 赞同：3
> 
> 时间：2012-06-06T20:01:56.770
> 
> 标签：python, matplotlib, scatter, colorbar

我正在尝试生成一个具有两个不同 y 轴和一个颜色条的散点图。

这是使用的伪代码：

```
#!/usr/bin/python

import matplotlib.pyplot as plt
from matplotlib import cm

fig = plt.figure()
ax1 = fig.add_subplot(111)
plt.scatter(xgrid,
        ygrid,
        c=be,                   # set colorbar to blaze efficiency
        cmap=cm.hot,
        vmin=0.0,
        vmax=1.0)

cbar = plt.colorbar()
cbar.set_label('Blaze Efficiency')

ax2 = ax1.twinx()
ax2.set_ylabel('Wavelength')

plt.show() 
```

它产生了这个情节： [![阴谋](../Images/5757525c8eb065c02697585c71384f88.png)](https://i.stack.imgur.com/m3tkz.png)

我的问题是，您如何为“波长”轴使用不同的比例，以及如何将颜色条更向右移动，使其不在波长的方式中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T15:09:34.667

@OZ123 抱歉，我花了这么长时间才回复。Matplotlib 具有可扩展的可定制性，有时会让您对自己实际在做什么感到困惑。感谢您帮助创建单独的轴。

但是，我认为我不需要那么多控制，最后我只使用了 PAD 关键字参数

```
fig.colorbar() 
```

这提供了我需要的东西。

伪代码就变成了这样：

```
#!/usr/bin/python

import matplotlib.pyplot as plt
from matplotlib import cm

fig = plt.figure()
ax1 = fig.add_subplot(111)
mappable = ax1.scatter(xgrid,
                       ygrid,
                       c=be,                   # set colorbar to blaze efficiency
                       cmap=cm.hot,
                       vmin=0.0,
                       vmax=1.0)

cbar = fig.colorbar(mappable, pad=0.15)
cbar.set_label('Blaze Efficiency')

ax2 = ax1.twinx()
ax2.set_ylabel('Wavelength')

plt.show() 
```

这是展示它现在的样子![在此处输入图像描述](../Images/fa1a75c108b30f1310a7d2fc821a2401.png)：

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T07:22:37.357

the `plt.colorbar()` is made for really simple cases, e.g. not really thought for a plot with 2 y-axes. For a fine grained control of the colorbar location and properties you should almost always rather work with colorbar specifying on which axes you want to plot the colorbar.

```
# on the figure total in precent l    b      w , height 
cbaxes = fig.add_axes([0.1, 0.1, 0.8, 0.05]) # setup colorbar axes. 
# put the colorbar on new axes
cbar = fig.colorbar(mapable,cax=cbaxes,orientation='horizontal') 
```

Note that colorbar takes the following keywords:

> keyword arguments:
> 
> *cax* None | axes object into which the colorbar will be drawn *ax* None | parent axes object from which space for a new colorbar axes will be stolen

you could also see here a more extended answer of mine regarding [figure colorbar on separate axes](https://stackoverflow.com/questions/9912008/how-to-add-a-single-colobar-that-will-show-the-data-from-2-different-subplot/9914204#9914204).

# rubymotion - RubyMotion 出现 ABPersonViewController 错误

> ID：10921318
> 
> 赞同：1
> 
> 时间：2012-06-06T20:02:03.057
> 
> 标签：rubymotion

我在使用`ABPersonViewController`RubyMotion 时遇到问题。我得到的错误是

> `setDisplayedPerson:' type`消息v@:^v' 的Objective-C 存根未预编译。确保您正确链接到定义此消息的框架或库。

我怀疑这是由于 RubyMotion 没有转换为 IOS 期望的类型。我认为`ABPersonCreate()`正在返回 a`CFType`但`displayedPerson`设置器期望它被转换为 a `ABRecordRef`（这只是错误消息的猜测）

这是查看问题的示例代码（基于 Apple 的 QuickContacts 示例）：

```
#Rakefile
$:.unshift("/Library/RubyMotion/lib")
require 'motion/project'

Motion::Project::App.setup do |app|
  # Use `rake config' to see complete project settings.
  app.name = 'contacts'
  app.frameworks += ['AddressBook', 'AddressBookUI']
end 
```

和

```
# app/app_delegate.rb
class AppDelegate
  def application(application, didFinishLaunchingWithOptions:launchOptions)
    window = UIWindow.alloc.initWithFrame(UIScreen.mainScreen.applicationFrame)
    window.rootViewController = UINavigationController.alloc.init
    window.rootViewController.wantsFullScreenLayout = true
    window.makeKeyAndVisible
    true

    # This works
    add_person('Alex', 'Rothenberg')

    # This fails (is it a type casting problem?)
    show_person_view_controller('Rothenberg')
  end

  def show_person_view_controller(name)
    anError = nil

    address_book = ABAddressBookCreate();
    people = ABAddressBookCopyPeopleWithName(address_book, name);
    person = people.first
    picker = ABPersonViewController.alloc.init.autorelease

    picker.personViewDelegate = self
    puts "Should this be an AddressBookRef? #{person.inspect}" # => #<__NSCFType:0x8c3bec0>
    picker.displayedPerson = person
    # The previous line fails
    puts "We never reach this line!"

    self.navigationController.pushViewController(picker, animated:true)
  end

  def add_person(first_name, last_name)
    error = nil
    contact = ABPersonCreate()
    ABRecordSetValue( contact, KABPersonFirstNameProperty, first_name, error )
    ABRecordSetValue( contact, KABPersonLastNameProperty, last_name, error )

    address_book = ABAddressBookCreate()
    ABAddressBookAddRecord( address_book, contact, error )
    ABAddressBookSave( address_book, error )
  end
end 
```

当你运行它我们可以在方法中添加到通讯录`add_person`但是它失败了`show_person_view_controller`就行了`picker.displayedPerson = person`

```
$ rake
     Build ./build/iPhoneSimulator-5.1-Development
  Simulate ./build/iPhoneSimulator-5.1-Development/contacts.app
Should this be an AddressBookRef? #<__NSCFType:0x8da2900>
Objective-C stub for message `setDisplayedPerson:' type `v@:^v' not precompiled. Make sure you properly link with the framework or library that defines this message. 
```

任何建议，将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T01:57:23.530

这将从 RubyMotion 1.12 (run `sudo motion update`) 开始正常工作。

> *   修复了执行接受 CFType 对象的 Objective-C 方法会导致程序崩溃的错误（例如 [ABPersonViewController setDisplayedPerson:]）。

# javascript - 针对 javascript 中的多个正则表达式测试字符串

> ID：10921321
> 
> 赞同：6
> 
> 时间：2012-06-06T20:02:11.180
> 
> 标签：javascript, regex

我想针对 20 个左右的正则表达式测试给定的字符串。在 Javascript 中执行此操作的干净方法是什么？我更关心干净的代码和可读性而不是效率（但我也不希望它超级慢）。

现在我有：

```
if (href.indexOf('apple.com') > -1 ||
    href.indexOf('google.com') > -1 ||
    href.indexOf('yahoo.com') > -1 ||
    href.indexOf('facebook.com') > -1) {
    performDarkMagic()
} 
```

但随着该列表的增长，它会开始看起来有点混乱。也许我可以创建一个正则表达式数组并执行 _.any() 之类的东西并在每个上应用 regex.test ？

编辑：要匹配的字符串/正则表达式可能会变得更加复杂，我只是使用简单的 URL 来使示例可读。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-06T20:05:31.227

对正则表达式使用测试函数。

更多关于正则表达式的信息在这里。 [https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp)

```
var re = /((google)|(facebook)|(yahoo)|(apple))\.com/;
re.test( str ); // returns true or false; 
```

测试用例。

现场演示：http: [//jsfiddle.net/rkzXP/1/](http://jsfiddle.net/rkzXP/1/)

```
 var func = function( str ){
        var re = /((google)|(facebook)|(yahoo)|(apple))\.com/;
        return re.test( str );
    };
    test("test for valid values", function() {
        equal( func("google.com"), true);
        equal( func("facebook.com"), true);
        equal( func("apple.com"), true);
    });
    test("test for invalid values", function() {
        equal( func("googl.com"), false);
        equal( func("faceook.com"), false);
        equal( func("apple"), false);
    }); 
```

所以你可以重写你的代码如下。

```
var re = /((google)|(facebook)|(yahoo)|(apple))\.com/;
if( re.test(str) ){
    performDarkMagic()
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-06T20:06:31.717

```
var patterns = ['apple.com', 'google.com', 'yahoo.com', 'facebook.com', ...]
var callFunc = false;

patterns.forEach(function(item){
   if(href.indexOf(item) > -1){
       callFunc = true;
       break;
   }
});

if(callFunc) {
   performDarkMagic();
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-06T20:07:18.897

是的，构建一个数组并使用[`.any()`](http://documentcloud.github.com/underscore/docs/underscore.html#section-21)or[`.some()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/some)就可以了，尤其是当值超过 4 个时：

```
if (["apple","google","yahoo","facebook"].some(host => href.includes(`${host}.com`)) {
    performLightMagic();
} 
```

但是我在那里看不到正则表达式，只有字符串；所以你可以简化使用[`regex.test()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp/test)：

```
if (/apple\.com|google\.com|yahoo\.com|facebook\.com/.test(href)) { performLightMagic(); } 
```

甚至

```
if (/(apple|google|yahoo|facebook)\.com/.test(href)) { performLightMagic(); } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-06T20:03:51.180

您可以将每个放入数组中，然后循环遍历每个。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-06T20:04:58.283

我会怎么做：把它分解成一个函数。将每个正则表达式放在一个数组中，循环它们并在第一次 indexOf > -1 时返回 true。如果到达循环的末尾，则返回 false。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-06-06T20:06:20.680

遍历一个正则表达式数组，然后执行：

```
result=result AND (result_of_regex);

next; 
```

循环返回结果后

# streaming - 限制 gstreamer 管道吞吐量以模拟实时源

> ID：10921323
> 
> 赞同：5
> 
> 时间：2012-06-06T20:02:19.267
> 
> 标签：streaming, gstreamer, rtsp

我正在开发一个 RTSP 服务器，它应该模拟实时源，同时从文件中流式传输数据。

我目前拥有的主要是基于[gst-rtsp-server](http://people.freedesktop.org/~wtay/)示例[test-readme.c](http://cgit.freedesktop.org/gstreamer/gst-rtsp-server/tree/examples/test-readme.c)，只有以下管道：

```
gst_rtsp_media_factory_set_launch(factory, "( "
   "filesrc location=stream.mkv ! matroskademux name=demuxer "
   "demuxer. ! queue ! rtph264pay name=pay0 pt=96 "
   "demuxer. ! queue ! rtpmp4gpay name=pay1 pt=97 "
")"); 
```

这很好用，除了一个问题：当 RTSP 客户端（使用 RTSP/TCP 交错传输）无法接收数据时，整个管道会锁定，直到客户端再次准备好，然后恢复到原始位置而没有任何跳跃。

由于我想模拟无法无限期缓冲其视频的实时源，因此在这种情况下所需的行为是继续播放文件，因此当客户端阻塞 5 秒时，它将失去 5 秒的记录。

我试图通过限制队列大小并将它们设置为泄漏来实现这一点（通过将它们设置为`queue max-size-bytes=1000000 max-size-time=1000000000 leaky=upstream`，这应该为大约 1 秒的视频提供缓冲区，但仅此而已）。这并没有完全像我希望的那样工作：源和解复用器填满了队列，然后在 0.1 秒内完全清空了自己。

我想我需要一些方法来限制队列之前的管道吞吐量，或者通过将解复用器限制为实时解复用，或者找到/制作一个 gstreamer 过滤器，让每 1 秒实时通过 1 秒数据。

您对如何执行此操作有任何提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T12:58:50.133

所以看起来虽然[可以完成](https://github.com/che0/gst-throttle)泄漏队列和限制器，但它们在这方面并没有多大帮助，因为 GStreamer RTSP 实现有自己的用于传出 TCP 数据的队列。似乎可行的是保持管道不变并修补 gst-rtsp-server 模块以限制其队列长度（在这种情况下为 1 MB，最新版本也将消息数限制为 100）：

```
--- gst-rtsp-server-1.4.5/gst/rtsp-server/rtsp-client.c 2014-11-06 11:20:28.000000000 +0100
+++ gst-rtsp-server-1.4.5-r1/gst/rtsp-server/rtsp-client.c      2015-04-28 14:25:14.207888281 +0200
@@ -3435,11 +3435,11 @@
   gst_rtsp_client_set_send_func (client, do_send_message, priv->watch,
       (GDestroyNotify) gst_rtsp_watch_unref);

   /* FIXME make this configurable. We don't want to do this yet because it will
    * be superceeded by a cache object later */
-  gst_rtsp_watch_set_send_backlog (priv->watch, 0, 100);
+  gst_rtsp_watch_set_send_backlog (priv->watch, 1000000, 100);

   GST_INFO ("client %p: attaching to context %p", client, context);
   res = gst_rtsp_watch_attach (priv->watch, context);

   return res; 
```

# sql-server - SQL 和 XML 整形 - 用于创建 XML 元素的 true\false 数据值

> ID：10921324
> 
> 赞同：2
> 
> 时间：2012-06-06T20:02:30.577
> 
> 标签：sql-server, xml

对此的解决方案正在逃避我，我希望你能提供帮助。

表 [restrictions] 中的数据集如下所示

```
 item_uid    include    the_value
    00035061     FALSE        'AZ'
    00035061     FALSE        'CA'
    00035061     TRUE         'NC'
    00035061     TRUE         'SC' 
```

预期的 XML 结果应如下所示：

```
<item>
    <item_uid>00035061</item_uid>
    <restrictions>
        <inclusions>
            <include>NC</include>
            <include>SC</include>
        </inclusions>
        <exclusions>
            <exclude>AZ</exclude>
            <exclude>CA</exclude>
        </exclusions>
    </restrictions>
<item> 
```

我可以分别组装每一面；

```
SELECT the_value AS 'data()'
FROM restrictions
WHERE include = TRUE AND item_uid = '00031762'
FOR XML PATH ('include'), ROOT ('inclusions') 
```

接着

```
SELECT the_value AS 'data()'
FROM restrictions
WHERE include = FALSE AND item_uid = '00031762'
FOR XML PATH ('exclude'), ROOT ('exclusions') 
```

但无法弄清楚如何在一条 SQL 语句中生成此 XML。感谢你的协助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T13:01:13.130

您可以将查询作为字段列表中的子查询。

```
select D.item_uid,
       (
        select R.the_value as 'include'
        from restrictions as R
        where R.include = 1 and R.item_uid = D.item_uid
        for xml path (''), root ('inclusions'), type
       ) as 'restrictions',
       (
        select R.the_value as 'exclude'
        from restrictions as R
        where R.include = 0 and R.item_uid = D.item_uid
        for xml path (''), root ('exclusions'), type
       ) as 'restrictions'
from (select '00035061') as D(item_uid)
for xml path(''),  root('item') 
```

[SQL小提琴](http://sqlfiddle.com/#!3/88afd/1)

该`type`指令使查询返回 XML 而不是文本。
将两个 XML 列命名为 `restrictions`将使它们最终出现在同一个`restrictions`元素中，而不是一个。
`(select '00035061') as D(item_uid)`只是在那里，因此您可以`item_uid`在一个地方指定您要查找的内容。您可能想用参数替换它。

# c++ - GUID 解释 - C++

> ID：10921328
> 
> 赞同：0
> 
> 时间：2012-06-06T20:03:02.677
> 
> 标签：c++, guid, uuid, declspec

我使用来自 windows 的示例来学习 DirectShow，并且在一个类中，我在头文件中有以下代码：

```
struct __declspec(uuid("{71771540-2017-11cf-ae26-0020afd79767}")) CLSID_TextureRenderer; 
```

而cpp文件中的这一行：

```
CTextureRenderer::CTextureRenderer(LPUNKNOWN unk, HRESULT *hr): CBaseVideoRenderer(__uuidof(CLSID_TextureRenderer), "Texture Renderer", unk, hr) 
```

你能解释一下所有事物是如何协同工作的吗？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T20:10:38.410

这是 Microsoft Visual C++ 对 C++ 的扩展，用于帮助 COM 编程。将结构与类`__declspec(uuid())`相关联，并产生给定类型/表达式的值。`GUID``__uuidof``GUID`

# javascript - 动态文本操作

> ID：10921333
> 
> 赞同：1
> 
> 时间：2012-06-06T20:03:34.930
> 
> 标签：javascript

在这个站点中，有很多标题（使用 H2），想要一半左边然后用一种颜色，一半右边然后用另一种颜色，用空格分隔，但我不能修改 php 文件（因为它是 CMS）然后，我试图用一些 Javascript 来做到这一点：

```
var headh2 = document.getElementsByName('head2');
    switch (headh2.innerHTML) {
        case ('first item'):
            headh2.innerHTML = '<span style="color: #022662">first </span> item';
        break;
        case ('second item'):
            headh2.innerHTML = '<span style="color: #022662">second </span> item';
        break;
        default:
            headh2.innerHTML = headh2.innerHTML;
    } 
```

但是，它不是在任何情况下都不起作用，我需要指定它，但是，不可能做这样的事情：

```
 var headh2 = document.getElementsByName('head2');
    var X = [abc]; 
    switch (headh2.innerText) {
        case (X[0]+' '+X[1]):
            headh2.innerHTML = '<span style="color: #022662">'+X[0]+'</span>'+X[1];
        break;
        case (X[0]+' '+X[1]+' '+X[2]):
            headh2.innerHTML = '<span style="color: #022662">'+X[0]+'</span>'+X[1]+' '+X[2];
        break;
        default:
            headh2.innerHTML = X[0];
    }
} 
```

其中 X 是一系列没有空格的字符，我尝试使用替换方法：

JS：

```
 var headh2 = document.getElementsByName('head2').innerHTML;
    var str = headh2; 
    var n=str.replace(" ","</span> <span class='color2'>");
    document.getElementsByName('head2').innerHTML=n; 
```

PHP：

```
<h2><a href="<?php the_permalink() ?>" rel="bookmark"><span name="head2" class="color1"><?php the_title(); ?></span></a></h2> 
```

但它不能正常工作，它会替换标题中的所有空格，而不仅仅是我想要的那个。

提前非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T20:19:01.407

这是一种使用 DOM 操作的方法。请注意，这稍作修改以对所有`h2`标签执行此操作： [实时视图](http://jsbin.com/aqacad/5/edit)

```
var nodes = document.getElementsByTagName('h2');
for(var i = 0; i < nodes.length; i++)
{
  var second = nodes[i].firstChild;
  var parts = second.nodeValue.split(" ", 2);

  var first = document.createElement('span');
  first.appendChild(document.createTextNode(parts[0]));
  first.style.color = "#022662";
  nodes[i].insertBefore(first, second);
  if(parts.length > 1)
    second.nodeValue = " " + parts[1];
  else
    second.nodeValue = "";
} 
```

# jquery - 当我将新元素动态添加到可放置区域时，所有现有元素都不可放置

> ID：10921334
> 
> 赞同：0
> 
> 时间：2012-06-06T20:03:36.753
> 
> 标签：jquery, jquery-plugins

我的 html 容器如下所示，它有多个级别。

```
 <div id='levels'>
    <div id="level6" class="container">
    <div class="content">
      <ul id="6" class="levelBucket">
      </ul>
    </div>
    </div>
    <div id="level5" class="container">
        <div class="content">
            <ul id="5" class="levelBucket">
            </ul>
        </div>
    </div>
    </div> 
```

当页面加载时，我从 DB 中获取所需的元素，并使用下面的 HTML 附加到相关的 UL。

```
 <li class='dataWrapper' >
   <div>content..</div>
   </li> 
```

当所有 LI 元素就位后，我使用以下 java 脚本使字段可拖动和可放置。

```
function AddDraggableDropperbleFunctionality() {

var selectedClass = 'areaSelected';

$('.levelBucket li').draggable({
    revert: true,
    start: function (e, ui) {
        ui.helper.addClass(selectedClass);
    },
    stop: function (e, ui) {},
    drag: function (e, ui) {}
});

  $(".levelBucket").sortable().droppable({
    over: function (e, ui) { $(this).addClass(selectedClass); },
    out: function (e, ui) { $(this).removeClass(selectedClass); },
    drop: function (e, ui) {

       //Do all the updates

    }
});

} 
```

页面加载后，所有 Draggable 和 Droppable 功能都可以正常工作。我的页面中有一个单独的按钮可以动态添加 LI 元素。当我添加新元素时，我再次调用上述 Java 脚本方法以使新添加的项目可拖动。但实际上发生的是新添加的 LI 在可拖动和可放置的情况下运行良好，并且所有现有的 LI 不再可放置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T05:01:38.330

我一直在使用以下方法将“LI”元素添加到 levelBuckets。

```
 consultantContainer.innerHTML += consultantWrapper; 
```

但是在我按照下面提到的方式修改了上面的行之后，我的问题就解决了。我认为问题在于使用 innerHTML 附加元素，它会影响可拖动功能。

```
$(consultantWrapper).appendTo('#' + level); 
```

编辑：这是一个更明确的示例来阐明[appendTo](http://api.jquery.com/appendto/)的使用。

```
$('<div class="arbitraryClass">arbitraryContent</div>').appendTo('#' + arbitraryID); 
```

# android - android videoview改变方向

> ID：10921336
> 
> 赞同：1
> 
> 时间：2012-06-06T20:03:38.750
> 
> 标签：android, orientation, android-videoview

我制作了以 3gp 格式播放电影的应用程序。一切都在智能手机上运行良好。当我在平板电脑上安装应用程序时，播放电影时出现奇怪的事情。整个布局是纵向模式，但电影旋转 90 度并以这种方式播放横向（与纵向模式相同的大小）。

我已经在清单文件`android:screenOrientation="portrait"`中设置了`VideoView`. 我根本不想以横向模式显示。

在禁用自动旋转屏幕的智能手机上 - 默认方向是纵向。在平板电脑上，默认方向是横向。平板电脑上的另一件事是当我使用 Youtube 应用程序并以纵向模式选择一些电影时，会自动旋转视频，调整大小并固定为横向模式。

我不确定我可以更改的是硬件设置或应用程序。

目前在平板电脑上，我的应用程序正在以纵向模式播放具有旋转视图的电影。

**编辑**：清单文件：

```
 <activity  android:name=".Video" android:screenOrientation="portrait" /> 
```

代码：

```
 ByteArrayInputStream inputStream = new ByteArrayInputStream(cursor.getBlob(2)); //get from database
   stream = inputStream;
   if (stream == null)
      throw new RuntimeException("stream is null");

   try {   
      temp = File.createTempFile("movie", "3gp");
   } catch (IOException e1) {
      e1.printStackTrace();
   }

   temp.deleteOnExit();
   tempPath = temp.getAbsolutePath();

   try {
      out = new FileOutputStream(temp);
   } catch (FileNotFoundException e1) {
      e1.printStackTrace();
   }

   byte buf[] = new byte[128];

   do {
      try {
         numread = stream.read(buf);
      } catch (IOException e) {
         e.printStackTrace();
      }
      if (numread <= 0)
         break;
      try {
         out.write(buf, 0, numread);
      } catch (IOException e) {
         e.printStackTrace();
      }
   } while (true);

   try {
      stream.close();
   } catch (IOException ex) {
      Log.e("ERROR", "error: " + ex.getMessage(), ex);
   }

   final VideoView myVideoView = new VideoView(this);  
   myVideoView.setVideoPath(tempPath);
   myVideoView.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {
      public void onPrepared(MediaPlayer arg0) {
         myVideoView.start();
      }
   });

   myVideoView.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {
      public void onCompletion(MediaPlayer mp) {
         mp.reset();
         myVideoView.setVideoPath(tempPath);
      }
   }); 
   tl.addView(myVideoView);  //add videoview to table layout 
```

布局.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/rl"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    android:background="@drawable/tlomain">
    <TableLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/tlayout"
        android:layout_height="fill_parent"
        android:layout_width="fill_parent">
    </TableLayout>
</RelativeLayout> 
```

根据纵向模式，平板电脑屏幕上的所有元素都很好，只有视频旋转了 90 度。

您可以使用 Youtube 查看它的外观：http: [//i.stack.imgur.com/qwP5S.jpg](http://i.stack.imgur.com/qwP5S.jpg)

影片旋转。在我的智能手机上，Youtube 应用程序中的同一部电影在水平视图中设置为正常。

我不知道如何在我的应用程序中更改它。是硬件设置吗？如果平板设备要打开 3gp、mp4 格式，它会旋转 90 度以准备横向模式？

# android - 排序具有可变大小记录的 Arraylist

> ID：10921337
> 
> 赞同：0
> 
> 时间：2012-06-06T20:03:38.803
> 
> 标签：android, arraylist

进入android只有几个星期，我有点难过。任何和所有的见解都非常感谢。

在我发现的这段代码中，作者对 setOrderName 和 Status 的值进行了硬编码。

不过，我将从 Web 服务中提取这些值，在这里看起来我需要 o1,o2,o3 对象根据我提取的记录数量增加。它是否正确？如果是这样，我将如何实现这一目标。

如果我喋喋不休，请随时询问细节。提前致谢

```
 private void getOrders(){
      try{
          m_orders = new ArrayList<Order>();
          Order o1 = new Order();
          o1.setOrderName("SF services");
          o1.setOrderStatus("Pending");
          Order o2 = new Order();
          o2.setOrderName("SF Advertisement");
          o2.setOrderStatus("Completed");
          m_orders.add(o1);
          m_orders.add(o2);
          Thread.sleep(5000);
          Log.i("ARRAY", ""+ m_orders.size());
        } catch (Exception e) {
          Log.e("BACKGROUND_PROC", e.getMessage());
        }
        runOnUiThread(returnRes);
    }

public class Order {

private String orderName;
private String orderStatus;

public String getOrderName() {
    return orderName;
}
public void setOrderName(String orderName) {
    this.orderName = orderName;
}
public String getOrderStatus() {
    return orderStatus;
}
public void setOrderStatus(String orderStatus) {
    this.orderStatus = orderStatus;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T20:08:56.073

`Order`不需要多个变量。代替：

```
 m_orders = new ArrayList<Order>();
      Order o1 = new Order();
      o1.setOrderName("SF services");
      o1.setOrderStatus("Pending");
      Order o2 = new Order();
      o2.setOrderName("SF Advertisement");
      o2.setOrderStatus("Completed");
      m_orders.add(o1);
      m_orders.add(o2); 
```

你可以写：

```
 m_orders = new ArrayList<Order>();
      Order o;

      o = new Order();
      o.setOrderName("SF services");
      o.setOrderStatus("Pending");
      m_orders.add(o);

      o = new Order();
      o.setOrderName("SF Advertisement");
      o.setOrderStatus("Completed");
      m_orders.add(o); 
```

请注意，创建和添加订单的 4 行使用相同的局部变量`o`.

# sql-server-2005 - 类似 WHERE 子句的性能比较

> ID：10921338
> 
> 赞同：0
> 
> 时间：2012-06-06T20:03:41.537
> 
> 标签：sql-server-2005, sql-server-2008-r2

我想知道以下 2 个查询之间是否存在任何性能差异。

查询一：

```
Select
         personName
From tbl
Where personName = 'Asif' 
```

查询2：

```
Select
         personName
From tbl
Where personName = 'Muhammad Asif' 
```

PersonName 字段不在索引上。我只是想知道，当我们搜索有空格的字符串时，sql 引擎需要更多的精力/时间来执行查询，否则它的行为与没有空格的相同。

矮个子：

1.  如果字符串像没有空格但像 Asif 或字母数字 Q1234 一样短
2.  如果字符串包含空格，例如 'Muhammad Asif'
3.  如果字符串包含空格并且它有点长，例如“我的名字是可汗”

sql引擎对这些搜索条件会有什么影响？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T20:11:08.050

如果您正在寻找 Muhammad Asif，您的第一个查询将不会返回该记录。如果在 where 子句中使用 equal ，它只会返回完全匹配。

如果您要查找包含名称“asif”的记录，您可以使用

WHERE personName LIKE '%Asif%' 这将返回 Asif 和 Muhammad Asif 以及包含 Asif 的任何其他记录。然而，LIKE 是一个相当耗费资源的查询

# php - 将数据从一个 MYSQL 数据库迁移到另一个

> ID：10921340
> 
> 赞同：1
> 
> 时间：2012-06-06T20:03:59.157
> 
> 标签：php, mysql, drupal-7

我需要将一些数据从一个 MYSQL 数据库迁移到另一个数据库，但问题是表和行会有所不同，因为它来自自定义 DB 结构或 drupal 7 CMS。

有没有一种简单的方法可以做到这一点，或者是否有任何工具可以将数据映射到新结构？

我可以完全访问这两个数据库。

非常感谢任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T20:09:32.273

也许使用 GUI DB 管理器会对您有所帮助？

你可以试试navicat：[navicat.com](http://www.navicat.com)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T20:11:50.737

如果您只是复制数据，则可以使用标准转储，如下所示：

```
mysqldump -hhostname -uusername -ppassword olddbname \
 | mysql -hhostname -uusername -ppassword newdbname 
```

但是如果你必须将数据转换成与 Drupal 7 兼容的东西，你真的必须编写一些自定义[`INSERT…SELECT`](http://dev.mysql.com/doc/refman/5.1/en/insert-select.html)的来进行转换。

您可能想查看 Drupal 的[提要模块](http://drupal.org/project/feeds)，它可以从 CSV 和其他格式导入数据。Feeds 目前正式处于“alpha”阶段，但它仍在广泛使用，如果您遇到错误，最好将其报告（或者甚至修复，如果您觉得有时间为项目）。

drupal.org 上还有各种 Drupal 模块，可帮助您从 CSV 或其他来源导入分类、用户等。试试看，让我们知道你有什么问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T20:12:05.667

您是否考虑过将文件从 mysql 导出为 CSV 并将其导入 drupal？我对 Drupal 7 不是很熟悉，但我相信您可以通过这种方式映射字段和表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-05T18:52:31.847

将实际数据导出到`.csv`文件（或您要导入的部分数据）并使用**Feeds**模块 ( [https://www.drupal.org/project/feeds](https://www.drupal.org/project/feeds) )。它允许`.csv`通过 GUI 将字段映射到 Drupal 实体字段，还允许删除和重新运行导入。它非常有用。

# javascript - Getting the element position - { absolute|relative|fixed } returning null value?

> ID：10921346
> 
> 赞同：3
> 
> 时间：2012-06-06T20:04:28.603
> 
> 标签：javascript, position

Using javascript - we can set the element relative position such as

`object.style.position="absolute"||"fixed"||"relative"`

But,on using the same `console.log(object.style.position)` - it does not return the position applied on the object - it returns `NULL`. Am i missing something here or is there another way to achieve what i'm trying to achieve??

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T20:08:19.783

`.style` represents what's set on the element itself, much like the `style` attribute.

You could instead use `getComputedStyle`: [http://jsfiddle.net/qAbTz/1/](http://jsfiddle.net/qAbTz/1/).

```
var div = document.getElementById("div");

console.log(div.style.position);              // "" (not null by the way)
console.log(getComputedStyle(div).position);​  // "fixed" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T20:11:05.813

Note also (by the same logic presented by pimvdb), if you specify an initial position as part of the object's style, it is accessible by div.style.position.

```
<div id="div" style="position: absolute;"></div> 
```

[http://jsfiddle.net/qAbTz/4/](http://jsfiddle.net/qAbTz/4/)

# java - 从选定的 JTable 中获取对象

> ID：10921351
> 
> 赞同：3
> 
> 时间：2012-06-06T20:04:57.290
> 
> 标签：java, swing, jtable, listselectionlistener

我有一个显示书籍列表的 JTable，它可以被过滤和排序

**BookSwing.java**

```
package com.bookretailer.ui;

import java.awt.Component;
import java.awt.EventQueue;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.util.ArrayList;
import java.util.List;

import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.JTextField;
import javax.swing.ListSelectionModel;
import javax.swing.RowFilter;
import javax.swing.RowSorter;
import javax.swing.SortOrder;
import javax.swing.border.TitledBorder;
import javax.swing.event.DocumentEvent;
import javax.swing.event.DocumentListener;
import javax.swing.event.ListSelectionEvent;
import javax.swing.event.ListSelectionListener;
import javax.swing.table.AbstractTableModel;
import javax.swing.table.JTableHeader;
import javax.swing.table.TableCellRenderer;
import javax.swing.table.TableModel;
import javax.swing.table.TableRowSorter;

import com.bookretailer.modules.Book;
import com.bookretailer.modules.utils.BookDB;

public class BookSwing extends JFrame {
    private final static String TITLE = "Book Retailer - Books";

    private JPanel jpInfo = new JPanel();
    private JTable table;
    private JTextField txtFilter;
    private TableRowSorter<BookTableModel> sorter;
    private BookTableModel bookTableModel;
    private List<Book> booksList;
    private Book selectedBook;
    private ListSelectionModel listSelectionModel;

    /**
     * Launch the application.
     */
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    BookSwing frame = new BookSwing();
                    frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    /**
     * Create the frame.
     */
    public BookSwing() {

        setSize(600, 650);
        initData();
        jpInfo.setBounds(100, 100, 600, 650);
        jpInfo.setLayout(null);

        JPanel tbPanel = new JPanel();
        tbPanel.setBorder(new TitledBorder(null, "", TitledBorder.LEADING, TitledBorder.TOP, null, null));
        tbPanel.setBounds(10, 331, 570, 272);
        jpInfo.add(tbPanel);
        tbPanel.setLayout(null);
        bookTableModel = new BookTableModel(booksList);
        table = new JTable();
        table.setModel(bookTableModel);
        sorter = new TableRowSorter<BookTableModel>(bookTableModel);
        table.setAutoCreateRowSorter(true);
        table.setRowSorter(sorter);
        final JTableHeader header = table.getTableHeader();
        header.setDefaultRenderer(new HeaderRenderer(table));
        List<RowSorter.SortKey> sortKeyList = new ArrayList<RowSorter.SortKey>();
        sortKeyList.add(new RowSorter.SortKey(0, SortOrder.ASCENDING));
        sorter.setSortKeys(sortKeyList);
        sorter.sort();
        sorter.setSortsOnUpdates(true);
        txtFilter = new JTextField();
        // Whenever filterText changes, invoke newFilter.
        txtFilter.getDocument().addDocumentListener(new DocumentListener() {
            public void changedUpdate(DocumentEvent e) {
                filterBook();
            }

            public void insertUpdate(DocumentEvent e) {
                filterBook();
            }

            public void removeUpdate(DocumentEvent e) {
                filterBook();
            }
        });
        JScrollPane scrollPane = new JScrollPane(table);

        table.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
        table.addMouseListener(new MouseAdapter() {
            public void mouseClicked(MouseEvent e) {
                initDetail(table.getSelectedRow());
            }
        });
        scrollPane.setBounds(6, 37, 558, 225);
        tbPanel.add(scrollPane);
        listSelectionModel = table.getSelectionModel();
        table.setSelectionModel(listSelectionModel);
        listSelectionModel.addListSelectionListener(new ListSelectionHandler());
        table.setSelectionModel(listSelectionModel);

        JLabel lblBookFilter = new JLabel("Book Filter");
        lblBookFilter.setBounds(10, 10, 78, 25);
        tbPanel.add(lblBookFilter);

        txtFilter.setBounds(75, 10, 489, 25);
        tbPanel.add(txtFilter);
        txtFilter.setColumns(10);
        getContentPane().add(jpInfo);

    }

    private void initData() {
        booksList = BookDB.getBookList();
    }

    protected void initDetail(int selectedRow) {
        selectedBook = booksList.get(selectedRow);
    }

    private void refreshTableData() {
        table.revalidate();
        table.repaint();
        table.getSelectionModel().clearSelection();
        bookTableModel.fireTableDataChanged();
    }

    private void filterBook() {
        RowFilter<TableModel, Object> rf = null;
        // If current expression doesn't parse, don't update.
        try {
            rf = RowFilter.regexFilter("(?i)" + txtFilter.getText());
        } catch (java.util.regex.PatternSyntaxException e) {
            return;
        }
        sorter.setRowFilter(rf);
    }

    class BookTableModel extends AbstractTableModel {

        List<Book> booksList;

        String[] headerList = { "Book Code", "Title", "Price" };
        Class[] classes = { Integer.class, String.class, Double.class };

        public BookTableModel(List<Book> list) {
            booksList = list;
        }

        @Override
        public int getColumnCount() {
            return headerList.length;
        }

        @Override
        public int getRowCount() {
            return booksList.size();
        }

        @Override
        public Class<?> getColumnClass(int arg0) {
            // TODO Auto-generated method stub
            return classes[arg0];
        }

        // this method is called to set the value of each cell
        @Override
        public Object getValueAt(int row, int column) {
            Book entity = null;
            entity = booksList.get(row);
            switch (column) {
            case 0:
                return entity.getBookId();
            case 1:
                return entity.getTitle();
            case 2:
                return entity.getPrice();
            default:
                return "";
            }
        }

        // This method will be used to display the name of columns
        public String getColumnName(int col) {
            return headerList[col];
        }

        @Override
        public void setValueAt(Object value, int row, int col) {
            Book entity = null;
            entity = booksList.get(row);
            switch (col) {
            case 0:
                entity.setBookId((Integer) value);
                break;
            case 1:
                entity.setTitle((String) value);
                break;
            case 2:
                entity.setPrice((Double) value);
                break;
            default:
                break;

            }
            fireTableCellUpdated(row, col);
        }

    }

    private static class HeaderRenderer implements TableCellRenderer {

        TableCellRenderer renderer;

        public HeaderRenderer(JTable table) {
            renderer = table.getTableHeader().getDefaultRenderer();
        }

        @Override
        public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected,
                boolean hasFocus, int row, int col) {
            return renderer.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, col);
        }
    }

    class ListSelectionHandler implements ListSelectionListener {

        @Override
        public void valueChanged(ListSelectionEvent e) {

            if (!e.getValueIsAdjusting()) {
                ListSelectionModel model = table.getSelectionModel();
                int lead = model.getLeadSelectionIndex();
                setFields(lead);

            }
        }
    }

    private void setFields(int index) {

        System.out.println(booksList.get(index).getTitle());
    }

} 
```

我想在用户单击表格行时设置 selectedBook 当用户不过滤或排序数据但当用户对数据进行排序时，它工作正常 selectedBook 被分配了错误的书

我怎样才能使它工作，以便将正确的书分配给 selectedBook

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-06T20:13:22.747

使用此代码：

```
selectedBook = booksList.get(table.convertRowIndexToModel(selectedRow)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-06T20:13:00.203

您需要将视图中的行索引转换为模型中的索引。如果您允许排序，这些是不同的东西。[这个问题](https://stackoverflow.com/questions/4151850/how-to-keep-track-of-row-index-when-jtable-has-been-sorted-by-the-user)涵盖了这一点。在你的情况下，你应该这样做：

```
selectedBook = booksList.get(table.convertRowIndexToModel(selectedRow)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-29T13:50:21.070

int index = table.getSelectRow(); Book book = booksList.get(index);

# xslt - XSL - 将新节点添加到 XML 中的祖父节点

> ID：10921357
> 
> 赞同：0
> 
> 时间：2012-06-06T20:05:00.647
> 
> 标签：xslt, xslt-2.0

给定 XML，例如：

```
<a>
  <b>
    <c>some keyword</c>
  </b>
</a> 
```

如果节点 c 包含文本“关键字”，我需要将新节点添加到 a 的父节点，所以它看起来像

```
<a>
  <b>
    <c>some keyword</c>
  </b>
</a>
<x> new node X </x> 
```

我可以将文本与表达式匹配：

```
<xsl:template match="//a/b/c[matches(text(),'\.*keyword\.*')]">
  <xsl:copy-of select="."/>
  <xsl:element name="x">
    <xsl:text> new node </xsl:text>
  </xsl:element>
</xsl:template> 
```

这导致

```
<a>
  <b>
    <c>some keyword</c>
    <x> new node X </x>
  </b>
</a> 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T20:26:18.107

您必须`x`在匹配`a`的父级时添加元素。您可以引用谓词中的任何子元素或属性。我的意思是，您必须在复制时查看 a 的父级内部的内容。在复制 a、b 或 c 元素时这样做已经太晚了。

以下样式表应该可以解决问题。我现在没有任何支持 XSLT2.0 的处理器，所以我无法检查它，但您应该能够看到其中的逻辑。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="*">
    <xsl:element name="{name()}">
        <xsl:apply-templates ></xsl:apply-templates>
    </xsl:element>
</xsl:template>
<xsl:template match="//*[matches(a/b/c/text() , 'keyword')]">
    <xsl:element name="{name()}">
        <xsl:apply-templates ></xsl:apply-templates>
        <xsl:element name="x">
            <xsl:text> new node </xsl:text>
        </xsl:element>
    </xsl:element>
</xsl:template> 
```

# java - 使用 Plastic 框架生成代码时的棘手 ClassCastException

> ID：10921361
> 
> 赞同：0
> 
> 时间：2012-06-06T20:05:10.693
> 
> 标签：java, classloader

**大家好** ——我正在看一个名为“吃蛋糕也吃蛋糕：Java 中的元编程”的演示文稿

演示者是 Tapestry 的作者 Howard M. Lewis Ship（其中之一？）——在制作过程中，创建了一个名为“plastic”的子项目，以利用 ASM 更改字节码。

我不会假装自己是专家，但最终结果应该是我可以编写代码，以便可以使用带注释的类、方法和字段来生成更多的 java 代码，从而减少样板代码。

**我的问题** 下面的代码是一个完整的示例来演示我的问题。测试示例应该修改 EqualsDemo 类，使其包含 equals() 和 hashCode() 的实现。运行它时，我收到一个错误，基本上表明我无法将类型为“com.example.plastic.transformed.EqualsDemo”的对象转换为“com.example.plastic.transformed.EqualsDemo”（是的，同一类） .

演示者刚刚提到这些错误很烦人，但并没有提及它们的来源——到目前为止，我的搜索表明它们与不同的类加载器有关。但是，我完全无法解决问题，因此我的问题在这里（！）

```
com.example.plastic.transformed.EqualsDemo cannot be cast to com.example.plastic.transformed.EqualsDemo
        at MainClass.main(MainClass.java:28) 
```

那么我需要做什么呢？替换类加载器？（如果是这样，怎么办？）还是有一些我没有得到的塑料？我需要使用一些生成代理对象或类似对象的方法来使事情顺利进行？

PS！到目前为止，我发现的示例都使用了我*认为*是 Groovy 的注释实例的最终用途。

希望有人比我更有能力:)

链接：Tapestry 主页（塑料以罐子形式包含在下载中）：[http ://tapestry.apache.org/](http://tapestry.apache.org/)

## 主.java

```
import java.util.ArrayList;
import java.util.List;

import org.apache.tapestry5.internal.plastic.StandardDelegate;
import org.apache.tapestry5.plastic.ClassInstantiator;
import org.apache.tapestry5.plastic.PlasticManager;

import com.example.plastic.transformer.EqualsHashCodeTransformer;
import com.example.plastic.transformed.EqualsDemo;

public class MainClass {

    public static void main(String[] args) {

        List<String> pList = new ArrayList<String>();
        pList.add("com.example.plastic.transformed");

        PlasticManager pm = PlasticManager
                .withContextClassLoader()
                .delegate( new StandardDelegate(new EqualsHashCodeTransformer()) )
                .packages(pList)
                .create();

        final String EQUALSDEMO = "com.example.plastic.transformed.EqualsDemo";
        ClassInstantiator<EqualsDemo> i = pm.getClassInstantiator(EQUALSDEMO);
        i.newInstance().hashCode();
        /*
        com.example.plastic.transformed.EqualsDemo cannot be cast to com.example.plastic.transformed.EqualsDemo
        at MainClass.main(MainClass.java:28)
        */
    }
} 
```

## 实现EqualsHashCode.java

```
package com.example.plastic.annotations;

import java.lang.annotation.Documented;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;
import java.lang.annotation.*;

@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
@Documented
public @interface ImplementEqualsHashCode {

} 
```

## EqualsHashCodeTransformer.java

```
package com.example.plastic.transformer;

import java.util.ArrayList;
import java.util.List;

import org.apache.tapestry5.plastic.FieldHandle;
import org.apache.tapestry5.plastic.MethodAdvice;
import org.apache.tapestry5.plastic.MethodDescription;
import org.apache.tapestry5.plastic.MethodInvocation;
import org.apache.tapestry5.plastic.PlasticClass;
import org.apache.tapestry5.plastic.PlasticClassTransformer;
import org.apache.tapestry5.plastic.PlasticField;

import com.example.plastic.annotations.*;

public class EqualsHashCodeTransformer implements PlasticClassTransformer {
    private MethodDescription EQUALS = new MethodDescription("boolean", "equals", "java.lang.Object");

    private MethodDescription HASHCODE = new MethodDescription("int", "hashCode");

    private static final int PRIME = 37;

    public void transform(PlasticClass plasticClass){

        //check that the class is annotated
        if(!plasticClass.hasAnnotation(ImplementEqualsHashCode.class)) {
            return;
        }

        List<PlasticField> fields = plasticClass.getAllFields();

        final List<FieldHandle> handles = new ArrayList<FieldHandle>();
        for(PlasticField field : fields){
            handles.add(field.getHandle());
        }

        //HashCode method introduction :)
        plasticClass.introduceMethod(HASHCODE).addAdvice(new MethodAdvice() {
            public void advise(MethodInvocation invocation){
                Object instance = invocation.getInstance();
                int result = 1;

                for(FieldHandle handle : handles){
                    Object fieldValue = handle.get(instance);

                    if(fieldValue != null)
                        result = (result * PRIME) + fieldValue.hashCode();
                }

                invocation.setReturnValue(result);

                //Don't proceed to the empty introduced method
            }

        });

        plasticClass.introduceMethod(EQUALS).addAdvice(new MethodAdvice() {
            public void advise(MethodInvocation invocation) {
                Object thisInstance = invocation.getInstance();
                Object otherInstance = invocation.getParameter(0);

                invocation.setReturnValue(isEqual(thisInstance, otherInstance));

                //Don't proceed to the empty introduced method
            }

            private boolean isEqual(Object thisInstance, Object otherInstance) {

                if(thisInstance == otherInstance)
                    return true;

                if(otherInstance == null)
                    return false;

                if(!(thisInstance.getClass() == otherInstance.getClass())) 
                    return false;

                for(FieldHandle handle : handles){
                    Object thisValue = handle.get(thisInstance);
                    Object otherValue = handle.get(otherInstance);

                    if(!(thisValue == otherValue || thisValue.equals(otherValue)))
                        return false;
                }

                return true;
            }
        });
    }
} 
```

## 等于Demo.java

```
package com.example.plastic.transformed;

import com.example.plastic.annotations.ImplementEqualsHashCode;

@ImplementEqualsHashCode
public class EqualsDemo {
    private int intValue;
    private String stringValue;

    public int getIntValue(){
        return intValue;
    }

    public void setIntValue(int intValue){
        this.intValue = intValue;
    }

    public String getStringValue(){
        return stringValue;
    }

    public void setStringValue(String stringValue){
        this.stringValue = stringValue;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T17:46:16.373

您不想将包添加到塑料管理器中——它使用不同的类加载器并将加载这些类，在这些包中制作两个类的副本（一个在父类加载器中，一个在塑料类加载器中），这将当框架尝试投射到你的类时，给你你看到的 ClassCastException。试试这个：

```
import org.apache.tapestry5.internal.plastic.StandardDelegate;
import org.apache.tapestry5.plastic.ClassInstantiator;
import org.apache.tapestry5.plastic.PlasticManager;

public class MainClass {

  public static void main(String[] args) {
      PlasticManager pm = PlasticManager
            .withContextClassLoader()
            .delegate(new StandardDelegate())
            .create();
      ClassInstantiator<EqualsDemo> ci = pm.createClass(EqualsDemo.class, new EqualsHashCodeTransformer());
      System.out.println(ci.newInstance().hashCode());
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T20:23:08.950

我想而不是

```
PlasticManager.withContextClassLoader()... 
```

使用以下内容应该可以解决您的问题：

```
PlasticManager.withClassLoader(getClass().getClassLoader())... 
```

# angularjs - AngularJS linky 过滤器抛出“未知提供者”错误

> ID：10921362
> 
> 赞同：4
> 
> 时间：2012-06-06T20:05:14.717
> 
> 标签：angularjs

这是显示我在做什么的 JSFiddle，只需在名称中添加一个过滤器。

[http://jsfiddle.net/9Z5SJ/1/](http://jsfiddle.net/9Z5SJ/1/)

```
Error: Unknown provider: linkyFilterProvider <- linkyFilter
    at Error (unknown source)
    at http://code.angularjs.org/angular-1.0.0rc10.js:2530:15
    at Object.getService [as get] (http://code.angularjs.org/angular-1.0.0rc10.js:2658:39)
    at http://code.angularjs.org/angular-1.0.0rc10.js:2535:45
    at Object.getService [as get] (http://code.angularjs.org/angular-1.0.0rc10.js:2658:39)
    at http://code.angularjs.org/angular-1.0.0rc10.js:8956:24
    at filter (http://code.angularjs.org/angular-1.0.0rc10.js:5744:14)
    at _filterChain (http://code.angularjs.org/angular-1.0.0rc10.js:5735:41)
    at statements (http://code.angularjs.org/angular-1.0.0rc10.js:5711:25)
    at parser (http://code.angularjs.org/angular-1.0.0rc10.js:5644:13) 
```

*关于链接*过滤器 的文档[http://docs.angularjs.org/api/angular.module.ngSanitize.filter.linky](http://docs.angularjs.org/api/angular.module.ngSanitize.filter.linky)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-06T20:58:10.337

您需要加载并包含“sanitize”模块才能使用“linky”：

寻找这两件事：1.我添加了“ [http://docs.angularjs.org/angular-sanitize-1.0.0rc10.min.js](http://docs.angularjs.org/angular-sanitize-1.0.0rc10.min.js) ”作为资源2.我通过添加“ngSanitize”将它链接到我的模块中angular.module('myApp',['ngSanitize']);

见这里：http: [//jsfiddle.net/johnlindquist/y2eJL/](http://jsfiddle.net/johnlindquist/y2eJL/)

# javascript - 将文本框的 id 传递给 javascript 中的 dropdownliast onchange 事件

> ID：10921363
> 
> 赞同：0
> 
> 时间：2012-06-06T20:05:20.180
> 
> 标签：javascript, asp.net

我定义了一个下拉列表：

```
 <asp:DropDownList Width="300px" ID="PlaceHoldersDropDownList" runat="server"
                AppendDataBoundItems="True" TabIndex="3" onchange="PasteTextInEditor 
                                    (this.options[this.selectedIndex].value), '<%= 
                                     SubjectTextBox.ClientID %>'"   > 
```

因此，我将选定的文本和文本框 ID 传递给 javascript 函数。文本框定义为：

```
 <asp:TextBox Width="660px" ID="SubjectTextBox" Text='<%# Bind( "Subject") %>' 
           runat="server" TabIndex="4" MaxLength="100">
        </asp:TextBox> 
```

所以，在脚本函数中，当我像这样发出警报时：

```
 alert(text);    //shows selected value
            alert(editor); // shows undefined 
```

所以编辑器的价值是不确定的。所以，你能告诉我我一直在做的错误吗？我想将从下拉列表中选择的值保存到文本框中。请帮我解决问题。谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T20:33:07.880

看起来您的括号在“onchange”中的位置错误：您只传递了一个参数而不是客户端 ID。

但无论如何，这里不会解析 ClientID。相反，我建议您在 Page_Load 或 Page_PreRender 后面的代码中添加 onclick：

```
PlaceHoldersDropDownList.Attributes.Add("onchange", "PasteTextInEditor(this.options[this.selectedIndex].value, '" + SubjectTextBox.ClientID + "');") 
```

# c# - WatiN 没有响应 API 调用

> ID：10921367
> 
> 赞同：0
> 
> 时间：2012-06-06T20:05:29.717
> 
> 标签：c#, .net, watin

一些我回来了一个非常令人困惑的问题。我已经使用 WatiN 和 .NET 中的互操作库编写了一些类，以便打开一个单独的 Excel 应用程序，从一些单元格中读取一些 URL，然后使用这个列表让我的 IE 浏览器导航到这些相关网站，然后捕获屏幕截图。但是，在使用 Microsoft.Office.Interop.Excel 库 API 打开 Excel 应用程序后，我之前实例化的 IE 实例将不再导航到网页或将焦点放在屏幕上以正确捕获完整的网页。但是它仍在工作，因为它会捕获非常短但宽的空白白色图像。有没有其他人在同时运行 WatiN 和其他应用程序时遇到过类似的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T07:26:08.690

虽然这可能不是您问题的答案，但我有一个建议。您是否考虑过在不使用 Interop API 打开 Excel 实例的情况下读取 Excel 文件？

# jquery - jQuery.val 不适用于范围输入？

> ID：10921368
> 
> 赞同：19
> 
> 时间：2012-06-06T20:05:30.200
> 
> 标签：jquery, input, range

`<input type="range" value="5,17" />`

如果我尝试更改值，`$('input').val('8,20');`它不会改变......

但在隐藏输入上有效： `<input type="hidden" value="s" />`

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-06-06T20:29:57.697

HTML5`<input type="range" />`只处理`min`和`max`属性之间的一个值 - 例如：

```
<input type="range" min="1" max="10" value="5.3" step="0.1" />

$("input[type=range]").val(); // returns 5.3
$("input[type=range]").val(6); // sets value to 6
$("input[type=range]").val(); // returns 6 
```

如果您想让幻灯片在一个 UI 输入中处理最小值**和**最大值，您可以使用 jQueryUI 的滑块：[https ://jqueryui.com/slider/#range](https://jqueryui.com/slider/#range)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T20:28:15.470

我尝试设置一个小提琴，它没有问题。

[http://jsfiddle.net/Z2B7Y/](http://jsfiddle.net/Z2B7Y/)

请记住，`value`代表*数值*，它位于`min`和`max`属性之间。尝试将其设置为`8,20`无效，因为它不是有效数字，因此没有意义。

如果要设置浮点值，则必须使用点，例如

```
$('input').val('8.20'); 
```

如果要设置范围的边界，则必须更改属性，例如

```
$('input').prop('min','8');
$('input').prop('max','20'); 
```

希望这可以帮助。

# ios - 使用包含控件的节标题视图时，在触摸时给出分组的 UITableView “First Crack”

> ID：10921370
> 
> 赞同：0
> 
> 时间：2012-06-06T20:05:33.067
> 
> 标签：ios, uitableview

我正在使用一个标准的分组样式 UITableView，它为它的一个部分返回一个自定义标题视图（使用 tableView 的委托方法 viewForHeaderInSection:)。为节标题返回的视图包含一个控件。它显示一个图像并且是一个控件，因此可以点击它让用户更改图像。我想要的 UI 类似于 Apple 联系人应用程序中的联系人照片（分组样式表中类似于浮动的 imageView 控件）。

我想解决的问题是对 tableView 部分标题的触摸直接进入控件。我希望表格有机会确定触摸是否实际上是滚动手势的开始。如果没有，那么表可以将事件传递给节标题视图进行处理。

这就是表中所有行的行为方式，因为我在表上设置了“delaysContentTouches”。我怀疑问题是因为节标题视图不在表的视图层次结构中。所以一切都可能按照规范工作。只是不是我想要的方式。

**我希望节标题视图的行为与触摸一样，就像行一样（表得到第一次处理的机会）。**

顺便说一句，我没有将此控件放在表格行中（这将解决问题），因为我想要所有表格行的圆角矩形分组样式，而不是这个 UI 元素。这个控件位于我的表格的中心（第 1 部分的标题），这就是为什么我想要拖动它来滚动表格的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T00:58:31.620

好的，显然这只是模拟器问题。在设备上，我的 tableView 获得了第一次参加活动的机会。所以我想在发布到 StackOverflow 之前，我需要听听 Apple 的“总是在实际设备上测试”的口号。对不起朋友......我的错误可能对像我一样可能在模拟器中花费太多时间的其他人有所帮助。

# linux - 包含 /usr/lib 子目录的通用 makefile

> ID：10921371
> 
> 赞同：0
> 
> 时间：2012-06-06T20:05:33.793
> 
> 标签：linux, makefile, portability

我的 makefile 中的一条规则依赖于 -lmysqlclient。在我的 Ubuntu 10.04 32 位机器上，libmysqlclient.so 文件位于 /usr/lib 中。在我的另一个装有 CentOS 6.2 64 位的机器上，这些文件位于 /usr/lib64/mysql 中。有没有比在makefile中添加以下“hack”更好/正确的方法来使我的makefile更通用？

```
ifeq ($(shell uname -m), x86_64)
vpath %.so /usr/lib64/mysql
endif 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T21:55:55.210

也许您可以`config-x86_64.mk`使用该`vpath`行创建一个文件，并在您的 makefile 中执行类似的操作

```
-include config-$(shell uname -m).mk 
```

`-include`如果文件不存在，这将避免错误。

在任何情况下，每个系统都应该正确配置，以便链接器自动获取系统库，而不需要任何手动破解。

# javascript - 如何将图像的值获取到对象/数组中

> ID：10921372
> 
> 赞同：0
> 
> 时间：2012-06-06T20:05:33.937
> 
> 标签：javascript, jquery, arrays

我试图创建一个函数，它循环遍历一组图像并获取它的值并将它们添加到对象/数组中。

```
<div id="col1">
    <img id="layer_a" src="imga.jpg" height="320" width="400" class="holder">
    <img id="layer_b" src="imgb.jpg" height="320" width="400" class="holder">
    <img id="layer_c" src="imgc.jpg" height="320" width="400" class="holder">
    <img id="layer_d" src="imgd.jpg" height="320" width="400" class="last">
</div>
<div id="col2">
    <img id="layer_e" src="imge.jpg" height="320" width="400" class="holder">
    <img id="layer_f" src="imgf.jpg" height="320" width="400" class="last">
</div> 
```

剧本：

```
var data = {};

function pickimage() {
$("img .holder").each(function() {
    var idset = this.attr('id');
    var srcset = this.attr('src');
    var heightset = this.attr('height');
    var widthset = this.attr('width');
    var newSet = {
        'id': idset,
        'src': srcset,
        'width': widthset,
        'height': heightset
    };
    data.images.push(newSet);
    for (var i = 0; i < data.images.length; ++i) {
        if (data.images[i].id == id) return i;
    }
});

}

pickimage(); 
```

我希望数据看起来像这样：

```
var data = {
 "images": [{
    "id": "layer_a",
    "src": "imga.jpg",
    "width": "400",
    "height": "320"}]
}; 
```

依此类推，没有两次获得相同的ID

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T20:35:45.477

[小提琴](http://jsfiddle.net/ncNJB/3/)

当我在小提琴上工作时，你得到了几个类似的答案。检查最适合您的那一款

JS

```
var data = {
    'images': Array()
}

function pickimage() {
$("#imagecontainer").find('img').each(function() {
    var img= $(this)
    var idset = img.attr('id');
    var srcset = img.attr('src');
    var heightset = img.attr('height');
    var widthset = img.attr('width');
    var newSet = {
      'id': idset,
      'src': srcset,
      'width': widthset,
      'height': heightset
    };
    data.images.push(newSet);

});

}

pickimage();
alert(JSON.stringify(data)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T20:26:51.130

您必须将您的 JS 修改为

```
var data = {
    images: []
};

function pickimage() {
    $("img.holder").each(function() {
        var _self = $(this);
        data.images.push({
            'id': _self.attr('id'),
            'src': _self.attr('src'),
            'width': _self.attr('width'),
            'height': _self.attr('height')
        });
    });
}

pickimage();

for (var i = 0, len=data.images.length; i < len; i++) {
    console.log(data.images[i]);
} 
```

见[http://jsfiddle.net/LDFrp/](http://jsfiddle.net/LDFrp/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T20:19:05.883

我认为@am not i am 是正确的，有后续电话。如果您需要打这些电话，我有一个简单的 (jsFiddle)[http://jsfiddle.net/CypAA/] 可以解决这个问题。

```
var data = [];
var ids = {};

function pickImage() {
    $('img.holder').each(function() {
        if (ids[this.id]) return;
        ids[this.id] = 1;

        data.push({
            id: this.id,
            src: this.src,
            width: this.width,
            height: this.height
        });
    });
}

pickImage();
pickImage();
pickImage();

console.log(data);​ 
```

# android - 如果使用以前的活动

> ID：10921379
> 
> 赞同：0
> 
> 时间：2012-06-06T20:05:57.840
> 
> 标签：android, android-activity, android-intent, if-statement

如何根据之前的活动创建 if 语句？我从一个意图进入该页面，但它并不总是来自同一个活动。我希望一些代码仅在前一个活动是给定的活动时执行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T20:10:47.823

从您的“上一个”活动中添加一个意图参数。您可以在新活动中检查它是否存在，如果存在则采取相应的行动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T20:11:00.947

定义一个`EXTRA_`来控制是否应该执行此类代码，并使调用活动在`Intent`他们想要执行代码时指定该值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T20:15:13.620

在启动新活动的活动中，将标志添加到您的 Intent

```
Intent nextActivity = new Intent(thisActivity.this, nextActivity.class
nextActivity.putExtra("key", "value");
startActivity(intent); 
```

在下一个活动中，您检查您的意图附带的“额外”，在`onCreate()`

```
Bundle extras = getIntent().getExtras();
if(extras!=null) 
{
     if(extras.getString("key").contentEquals("value")
     {
       //then you know what activity you just came from
     }
 } 
```

# asp.net - DevExpress.Web.ASPxListBox：如何格式化单个列表项

> ID：10921380
> 
> 赞同：1
> 
> 时间：2012-06-06T20:06:01.620
> 
> 标签：asp.net, web, devexpress

如何在 DevExpress.Web.ASPxListBox 中设置一个或多个**单独项目的外观？**我**不是**在谈论设置每个项目或选定项目的外观。

例如，我想让一些项目以绿色突出显示，而其他项目以红色突出显示，等等。

提前致谢，

索恩海

编辑：

我最终使用了 ASPxGridView。我接受了 j0aqu1n 的回答，因为他提出了建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T22:43:34.507

我认为这不能针对服务器端的特定项目完成。ASPxListBox 没有 ItemDataBound 事件，这意味着您不能在元素内使用绑定表达式。一种方法是在客户端上使用 jQuery。您可以使用类标记 ASPxListBox 项：

```
<dx:ASPxListBox ID="ASPxListBox1" runat="server" >
            <ItemStyle CssClass="list-box-item" />
</dx:ASPxListBox> 
```

然后在 jQuery 选择器中使用这个类来自定义客户端上的单个项目。例如：

如果您在 CSS 中定义此样式：

```
.even-row {
    background: Red;
} 
```

然后在客户端脚本块上执行以下操作：

```
$(document).ready(function () {
    $('td').find('.list-box-item').each(function (i) {
        if ($(this).text() == 'True')
            $(this).parent().addClass('even-row');
    });
}); 
```

# .net - 在 Visual Studio 中转储 Locals 窗口的文本

> ID：10921389
> 
> 赞同：3
> 
> 时间：2012-06-06T20:06:19.163
> 
> 标签：.net, visual-studio-2010, visual-studio

有没有办法将 Locals 窗口的整个文本内容（如果可能，以编程方式，但执行此操作的 UI 命令同样有用）转储到单独的文件和/或 Windows 剪贴板中？（这不是我的日常开发工具，如果这是一个明显/愚蠢的问题，我们深表歉意）。

我正在处理的程序在进行 SOAP 调用后抛出以下异常

> *   $exception {“反序列化操作'登录'的回复消息正文时出错。”} System.Exception {System.ServiceModel.CommunicationException}

我猜想，在 Locals 窗口的某个地方（我可以看到异常），已经包含了无法反序列化的实际消息正文。我想检查这个消息体来调试我的程序。

我希望能够在“本地”窗口中完全展开树，然后在文本编辑器中查看转储的输出，而不是单击-扫描-单击-扫描-单击-扫描通过嵌套的树窗口。

这可能使用 Visual Studio 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T16:42:06.740

我不知道以编程方式，但我能够手动完成。

*   在 Locals 窗口中选择某些内容
*   `Ctrl`+`A`选择本地窗口中的所有内容
*   `Ctrl`+`C`复制

然后在我的文本编辑器中，我只是粘贴了它......但它相当难看（它产生了制表符分隔的列）。幸运的是，我有[UltraEdit](http://www.ultraedit.com/)可以处理将其转换为更易读的结果（我使用了该`Convert to fixed column`功能）。

现在，如果您拥有[StudioShell](http://studioshell.codeplex.com/)，您可以享受各种乐趣！StudioShell 基本上将您的整个解决方案转变为可导航的文件系统。使用它，您可以导航到 `dte:\debugger\DebuggedProcesses\DemoSolution.vshost.exe\5300\current`（5300 是线程号），并且只是为了`ls locals`获取该线程上当前堆栈帧的本地人。

# android - 使用加速度计计算速度

> ID：10921395
> 
> 赞同：7
> 
> 时间：2012-06-06T20:06:30.990
> 
> 标签：android, iphone, accelerometer

我一直在对我们试图解决的问题进行一些研究。我认为这是最好的方法，但请添加您的意见

我们正在尝试计算现实世界驾驶场景中的反应时间，并希望使用手机作为数据收集设备。我们试图完成的是驾驶员在遇到某些提示时施加了多少加速度，更重要的是减速度。

我发现这篇论文有很多有用的信息[加速度计物理学](http://www.freescale.com/files/sensors/doc/app_note/AN3397.pdf)

问题是我们很可能没有从零开始的校准时间。但是假设驾驶员从 0 开始。我们将使用 GPS 定位来定位车辆，跟踪我们应该计算的带有时间戳的位置数据提示发生的时间然后使用带有时间戳的加速度计数据，我们应该能够计算出他们对提示的反应。

这是我发现解决问题的最佳方法，但是我不确定加速度计数据是否会因为无法校准而变得无用，而且从振动中看到的噪音可能太大而无法使用数据。 .. 有没有人尝试过或使用过这些类型的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T20:55:41.160

有趣的应用程序。

你错过了一个重要的观点。您要么必须自己实现所谓的**传感器融合**，要么使用您正在使用的平台上提供的传感器融合。Android 和 iPhone 都有一个。

( `TYPE_LINEAR_ACCELERATION` Android, SensorManager) 或`userAcceleration`(iPhone) 对您来说应该足够了。

至于链接的PDF，[不要尝试集成加速](https://stackoverflow.com/a/7835988/341970)，你会得到很差的结果。即使这个答案是关于位置的，速度已经不准确了。我会尝试使用 GPS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-22T06:21:38.517

我知道这是一个非常古老的问题，但由于我最近正在从事一个类似的项目，所以让我分享一下我们在公司所做的事情。我们只是简单地使用[OBD-II 加密狗](http://en.wikipedia.org/wiki/OBD-II_PIDs)来获取汽车的速度。有许多 API 返回有关车辆的信息。

PID010D 返回车速。我正在使用这个 PID 来计算点 A 和 B 之间的距离，因为没有 PID 可以返回里程表 :(

github上很少有库可以通过搜索轻松找到。[这个矿](https://github.com/Hesamedin/ELM327)。这不是库，但在您的设备上运行后，您可以看到它是如何工作的。

# perl - 打印列并计算字符串

> ID：10921396
> 
> 赞同：-2
> 
> 时间：2012-06-06T20:06:31.480
> 
> 标签：perl, awk

我有空间分隔的大列文本文件

```
Name  subject       Result
John  maths         pass
John  science       fail
John  history       pass
John  geography     pass
Jack  maths         pass
jack  history       fail
kelly science       pass
kelly history       pass 
```

我想计算每个名字（这是一个很长的名字列表，每个名字应该只出现一次），有多少人通过了。例如。对于约翰，他通过了 3，同样，对于杰克，他通过了 1。它应该将结果打印为

```
Name  Passcount
John   3
Jack   1
Kelly  2 
```

任何人都可以帮助使用 awk 或 perl 脚本。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T20:33:40.337

你可以试试这样的 -

```
awk '
BEGIN{ print "Name\tPasscount"} 
NR>1{if ($3=="pass") a[$1]++}
END{ for (x in a) print x"\t"a[x]}' file 
```

### 测试：

```
$ cat file
Name  subject       Result
John  maths         pass
John  science       fail
John  history       pass
John  geography     pass
Jack  maths         pass
jack  history       fail
kelly science       pass
kelly history       pass

$ awk 'BEGIN{ print "Name\tPasscount"} NR>1{if ($3=="pass") a[$1]++}END{ for (x in a) print x"\t"a[x]}' file
Name    Passcount
Jack    1
kelly   2
John    3 
```

# sql-server-2008 - T-SQL 子字符串 - 分隔名字和姓氏

> ID：10921400
> 
> 赞同：47
> 
> 时间：2012-06-06T20:06:39.933
> 
> 标签：sql-server-2008, tsql

我有一个包含 FirstName 和 LastName 的列。我正在写一份报告来区分名字和姓氏。如何在 T-SQL 中分离 FirstName 和 LastName？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-06-06T20:15:36.103

假设`FirstName`是直到第一个空格的所有字符：

```
SELECT
  SUBSTRING(username, 1, CHARINDEX(' ', username) - 1) AS FirstName,
  SUBSTRING(username, CHARINDEX(' ', username) + 1, LEN(username)) AS LastName
FROM
  whereever 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-03-07T11:22:30.633

我能找到的最简单的方法是：

```
SELECT 
  SUBSTRING(FullName, 1, CHARINDEX(' ', FullName) - 1) AS FirstName,
  REVERSE(SUBSTRING(REVERSE(FullName), 1, CHARINDEX(' ', REVERSE(FullName)) - 1)) AS LastName
FROM
  [PERSON_TABLE] 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-06-06T20:14:03.650

这应该有效：

```
Select  
    LTRIM(RTRIM(SUBSTRING(FullName, 0, CHARINDEX(' ', FullName)))) As FirstName
,   LTRIM(RTRIM(SUBSTRING(FullName, CHARINDEX(' ', FullName)+1, 8000)))As LastName
FROM TABLE 
```

**编辑**：采用 Aaron 和 Jonny 的提示，固定长度为 8000，以避免不必要的计算。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-08-24T22:47:37.963

```
validate last name is blank

SELECT  
person.fullName,
(CASE WHEN 0 = CHARINDEX(' ', person.fullName) 
    then  person.fullName 
    ELSE SUBSTRING(person.fullName, 1, CHARINDEX(' ', person.fullName)) end) as first_name,  
(CASE WHEN 0 = CHARINDEX(' ', person.fullName) 
    THEN ''  
    ELSE SUBSTRING(person.fullName,CHARINDEX(' ', person.fullName), LEN(person.fullName) )end) last_name

FROM person 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2014-07-23T02:43:25.897

Here is a more elaborated solution with a SQL function:

GetFirstname

```
CREATE FUNCTION [dbo].[ufn_GetFirstName]  
(  
 @FullName varchar(500)  
)  
RETURNS varchar(500)  
AS  
BEGIN  
 -- Declare the return variable here  
 DECLARE @RetName varchar(500)  

 SET @FullName = replace( replace( replace( replace( @FullName, '.', '' ), 'Mrs', '' ), 'Ms', '' ), 'Mr', '' )  

 SELECT   
  @RetName =   
    CASE WHEN charindex( ' ', ltrim( rtrim( @FullName ) ) ) &gt; 0 THEN left( ltrim( rtrim( @FullName ) ), charindex( ' ', ltrim( rtrim( @FullName  ) ) ) - 1 ) ELSE '' END  

 RETURN @RetName  
END 
```

GetLastName

```
CREATE FUNCTION [dbo].[ufn_GetLastName]  
(  
 @FullName varchar(500)  
)  
RETURNS varchar(500)  
AS  
BEGIN  
 DECLARE @RetName varchar(500)  

 IF(right(ltrim(rtrim(@FullName)), 2) &lt;&gt; ' I')  
 BEGIN  
  set @RetName = left(   
   CASE WHEN   
    charindex( ' ', reverse( ltrim( rtrim(   
    replace( replace( replace( replace( replace( replace( @FullName, ' Jr', '' ), ' III', '' ), ' II', '' ), ' Jr.', '' ), ' Sr', ''), 'Sr.', '')  
    ) ) ) ) &gt; 0   
   THEN   
    right( ltrim( rtrim(   
    replace( replace( replace( replace( replace( replace( @FullName, ' Jr', '' ), ' III', '' ), ' II', '' ), ' Jr.', '' ), ' Sr', ''), 'Sr.', '')  
    ) ) , charindex( ' ', reverse( ltrim( rtrim(   
    replace( replace( replace( replace( replace( replace( @FullName, ' Jr', '' ), ' III', '' ), ' II', '' ), ' Jr.', '' ), ' Sr', ''), 'Sr.', '')  
    ) ) )  ) - 1 )   
   ELSE '' END  
  , 25 )  
 END  
 ELSE  
 BEGIN  
  SET @RetName = left(   
   CASE WHEN   
    charindex( ' ', reverse( ltrim( rtrim(   
    replace( replace( replace( replace( replace( replace( replace( @FullName, ' Jr', '' ), ' III', '' ), ' II', '' ), ' I', '' ), ' Jr.', '' ), ' Sr', ''), 'Sr.', '')  
    ) ) ) ) &gt; 0   
   THEN   
    right( ltrim( rtrim(   
    replace( replace( replace( replace( replace( replace( replace( @FullName, ' Jr', '' ), ' III', '' ), ' II', '' ), ' I', '' ), ' Jr.', '' ), ' Sr', ''), 'Sr.', '')  
    ) ) , charindex( ' ', reverse( ltrim( rtrim(   
    replace( replace( replace( replace( replace( replace( replace( @FullName, ' Jr', '' ), ' III', '' ), ' II', '' ), ' I', '' ), ' Jr.', '' ), ' Sr', ''), 'Sr.', '')  
    ) ) )  ) - 1 )   
   ELSE '' END  
  , 25 )  
 END  

 RETURN @RetName  
END 
```

USE:

```
SELECT dbo.ufn_GetFirstName(Fullname) as FirstName, dbo.ufn_GetLastName(Fullname) as LastName FROM #Names 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2012-06-06T20:13:37.723

如果 firstname 和 surname 用空格分隔，您可以这样做：

```
SELECT SUBSTRING(FirstAndSurnameCol, 0, CHARINDEX(' ', FirstAndSurnameCol)) Firstname,
SUBSTRING(FirstAndSurnameCol, CHARINDEX(' ', FirstAndSurnameCol)+1, LEN(FirstAndSurnameCol)) Surname FROM ... 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2012-11-22T19:15:50.757

这将处理像“Firstname Z. Lastname”和“First Z Last”这样的名字

```
SELECT
CASE 
    WHEN CHARINDEX(' ',name) = 0 THEN name
    WHEN CHARINDEX(' ',name) = PATINDEX('% _[., ]%',name) THEN RTRIM(SUBSTRING(name, 1, CHARINDEX(' ',name) + 2)) 
    ELSE SUBSTRING(name,1, CHARINDEX(' ',name))
END [firstname]
,CASE 
    WHEN CHARINDEX(' ',name) = 0 THEN ''
    WHEN CHARINDEX(' ',name) = PATINDEX('% _[., ]%',name) THEN LTRIM(SUBSTRING(name, CHARINDEX(' ',name) + 3,1000)) 
    ELSE SUBSTRING(name,CHARINDEX(' ',name)+1,1000)
END [lastname]
FROM [myTable] 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2016-01-14T14:37:04.773

我认为下面的查询将有助于从 FullName 中拆分 FirstName 和 LastName，即使只有 FirstName。例如： ' **Philip John** ' 可以拆分为**Philip**和**John**。但是如果只有**Philip**，因为 Space 的 charIndex 为 0，它只会给你 ''。

试试下面的一个。

```
declare @FullName varchar(100)='Philp John'

Select  
    LTRIM(RTRIM(SUBSTRING(@FullName, 0, CHARINDEX(' ', @FullName+' ')))) As FirstName
,   LTRIM(RTRIM(SUBSTRING(@FullName, CHARINDEX(' ', @FullName+' ')+1, 8000)))As LastName 
```

希望这会帮助你。:)

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2014-11-14T10:23:31.983

如果全名不包含空格，您可能会遇到问题。假设如果没有空格，整个 FullName 都转到 Surname 并且 FirstName 变为空字符串，那么您可以使用以下命令：

```
SELECT
  RTRIM(LEFT(FullName, CHARINDEX(' ', FullName))) AS FirstName,
  SUBSTRING(FullName, CHARINDEX(' ', FullName) + 1, 8000) AS LastName
FROM
  MyNameTable; 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-06-10T02:05:49.980

下面的代码适用于姓氏、名字的 M 名字符串。用您的名称字符串列名称替换“名称”。由于当有中间首字母时，您有一个句号作为最后一个字符，所以您将在每一行（2、6 和 8）中用 3 替换 2，并将“RIGHT（Name，1）”更改为“RIGHT （姓名，2）”在第 8 行。

```
SELECT  SUBSTRING(Name, 1, CHARINDEX(',', Name) - 1) LastName ,
CASE WHEN LEFT(RIGHT(Name, 2), 1) <> ' '
     THEN LTRIM(SUBSTRING(Name, CHARINDEX(',', Name) + 1, 99))
     ELSE LEFT(LTRIM(SUBSTRING(Name, CHARINDEX(',', Name) + 1, 99)),
               LEN(LTRIM(SUBSTRING(Name, CHARINDEX(',', Name) + 1, 99)))
               - 2)
END FirstName ,
CASE WHEN LEFT(RIGHT(Name, 2), 1) = ' ' THEN RIGHT(Name, 1)
     ELSE NULL
END MiddleName 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-12-06T03:02:49.773

对于美国标准中的姓氏（即 [Full Name] 列中的最后一个单词），并考虑名字包括可能的中间名首字母、中间名等：

```
SELECT DISTINCT
             [Full Name]
            ,REVERSE([Full Name])                   --  to visualize what the formula is doing
            ,CHARINDEX(' ', REVERSE([Full Name]))   --  finds the last space in the string
            ,[Last Name]    =   REVERSE(RTRIM(LTRIM(LEFT(REVERSE([Full Name]), CHARINDEX(' ', REVERSE([Full Name]))))))
            ,[First Name]   =   RTRIM(LTRIM(LEFT([Full Name], LEN([Full Name]) - CHARINDEX(' ', REVERSE([Full Name]))))) 
```

从 ...

请注意，这假定 [Full Name] 在实际字符串之前或之后没有空格。否则，使用 RTRIM 和 LTRIM 删除这些。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-06-30T14:50:48.637

假设您的表有 Name 列，它包含以下数据 -

```
 Random Person
        FIRST LAST
        Alpha Beta 
```

查询将是这样的

```
 SELECT
LEFT(NAME,CHARINDEX(' ',NAME))                      AS      "First Name",
LTRIM(RTRIM(SUBSTRING(NAME,CHARINDEX(' ',NAME),100)))       AS       "Last Name"

FROM YOUR_TABLE 
```

# iphone - 此代码如何创建按钮？

> ID：10921415
> 
> 赞同：1
> 
> 时间：2012-06-06T20:07:31.000
> 
> 标签：iphone, objective-c

我想知道下面这段代码究竟是如何工作的（是的，它确实按预期工作，并且它给出了不同的标签值，具体取决于单击了哪个按钮。）关键是：我们不是重复使用`button`7 次，在哪里剩下的6个按钮？执行此代码后，我们真的保留了 7`UIButton`秒的内存吗？

或者作为一个更普遍的问题：这是一种好的编程风格吗？关键是我需要根据单击的按钮执行不同的操作，而这种方法（以我有限的 objc 技能）看起来是最直接的。提前致谢， 一位 iOS 开发新手。

```
UIButton *button;
for(int k=0;k<7;k++)
        {
             button = [UIButton buttonWithType:UIButtonTypeCustom];
            [button addTarget:self 
                       action:@selector(aMethod:)
             forControlEvents:UIControlEventTouchUpInside];
            [button setTitle:@"" forState:UIControlStateNormal];
            button.frame = CGRectMake(80, 20+30*k, 30, 30);
            button.backgroundColor=[UIColor clearColor];
            button.tag=k;
            [subview addSubview:button];
        } 
```

其中函数 aMethod: 定义为：

```
-(IBAction)aMethod:(id)sender
{
   UIButton *clickedButton=(UIButton *) sender;
   NSLog(@"Tag is: %d",clickedButton.tag);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T20:14:25.890

不，您没有重用`UIButton`七次：循环的每次迭代都会`UIButton`在对类方法的调用中创建一个新实例`buttonWithType:`，并将其分配给同名的变量：

```
[UIButton buttonWithType:UIButtonTypeCustom]; 
```

如果您在循环中声明该变量，您的代码会更好：

```
for(int k=0;k<7;k++)
    {
         UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
         // ...the rest of the loop
    } 
```

当您的按钮执行非常相似的操作时，这是一种非常好的编程风格。例如，计算器按钮的不同之处仅在于它们插入的数字。当按钮执行差异很大的操作时（例如插入与删除），您最好单独创建它们，而不是在循环中，并使用单独的方法为它们的点击服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T20:15:48.987

在此代码中，您只需创建 7 个具有不同位置和标签的按钮。好多了，然后重复创建代码7次。我可以为您提供的一件事 - 为按钮标签创建一些枚举以防止出现这样的代码：

```
switch([button tag])
{
    case 1:
        // do something
        break;
    case 2:
        // do something else
        break;
    case 3:
        // exit
        break;
    .....
    default:
        assert(NO && @"unhandled button tag");
} 
```

具有枚举值的代码更易于阅读

```
switch([button tag])
{
    case kButtonForDoSomething:
        // do something
        break;
    case kButtonForDoSomethingElse:
        // do something else
        break;
    case kButtonExit:
        // exit
        break;
    .....
    default:
        assert(NO && @"unhandled button tag");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T20:17:42.957

这段代码就足够了，您正在创建 7 个不同的按钮并将它们添加为子视图。一旦你`-addSubview:`，对象被添加到一个数组，通过`.subviews`属性访问`UIView`。

尽管您应该在 for 循环中添加 UIButton *button。所以你的代码应该如下所示..

```
for(int k=0;k<7;k++)
    {
         UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
   ....
} 
```

如果您需要`out`使用按钮执行 for 循环的某些操作，那么在循环之外声明它是有意义的，但这不是您的情况。希望这可以帮助。

# rss - $item->get_description()中自动添加的div；使用简单派

> ID：10921418
> 
> 赞同：0
> 
> 时间：2012-06-06T20:07:38.827
> 
> 标签：rss, feed, feedparser, simplepie

# 我得到一个 div，它出现在调用 RSS 提要的输出中。它忽略了我尝试将其包装在段落标签中并将数据推送到 div 中。

```
foreach ($feed->get_items(0 , 3) as $item):
    $feedDescription = $item->get_content();
    $image = returnImage($feedDescription);
    $image = scrapeImage($image);
    $image_url= $item->get_permalink();
    $description = $item->get_description();
?>
        <div class="item">
            <h4><a href="<?php echo $item->get_permalink(); ?>"><?php echo $item->get_title(); ?></a></h4>
            <div class="image-box"><?php echo '<a href="' . $image_url . '"><img src="' . $image . '" /></a>'."\n";?></div>
            <p><?php echo $description ?></p>
            <p><a href="<?php echo $item->get_permalink(); ?>">Continue Reading</a></p>   
        </div>

    <?php endforeach; ?> 
```

这是html输出：

```
<div class="item">
    <h4><a href="#">Lorem Ipsum</a></h4>
    <div class="image-box"><a href="#"><img src="image.jpg"></a>
</div>
<p></p>

<div>Lorem Ipsum description [...]</div>

<p></p>
<p><a href="#">Continue Reading</a></p>   
</div> 
```

为什么描述调用添加了一个 div 标签而不是包含在段落标签中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T15:12:11.323

这不是 SimplePie 的问题……嗯，不是直接的。尝试测试这个 html 块：

```
 <div class="item">
        <h2><a href="http://#">Title</a></h2>
        <p><div><span>Description</span></div></p>
        <p><small>Posted on TODAY</small></p>
    </div> 
```

你会看到这里的行为是一样的。问题是，您从 simplepie 获得的帖子被封装在 DIV 中。在段落中插入 DIV 会导致两者分离。

因此，例如，您可以尝试使用正则表达式或 jQuery 删除 PHP 中的封闭 DIV。

# javascript - 使用 word_number 值对 javascript 数组进行排序

> ID：10921422
> 
> 赞同：3
> 
> 时间：2012-06-06T20:08:09.377
> 
> 标签：javascript, jquery

如何对数组进行排序

```
var arr = new Array("word_12", "word_59", "word_17"); 
```

所以我得到

```
["word_12", "word_17", "word_59"] 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T20:09:51.993

您需要编写一个排序方法（您可以编写任何您喜欢的方法），它在 _ 上拆分字符串并将第二部分用作数字排序值。

```
​    function sortOnNum(a,b){
         //you'll probably want to add a test to make sure the values have a "_" in them and that the second part IS a number, and strip leading zeros, if these are possible
         return (a.split("_")[1] * 1 > b.split("_")[1] * 1)? 1:-1;// I assume the == case is irrelevant, if not, modify the method to return 0 for ==
    }

    var ar = new Array ("foo_1", "foo_19", "foo_3", "foo_1002");

ar.sort(sortOnNum); //here you pass in your sorting function and it will use the values in the array against the arguments a and b in the function above

alert(ar); // this alerts "foo_1,foo_3,foo_19,foo_1002" 
```

这是一个小提琴：http: [//jsfiddle.net/eUvbx/1/](http://jsfiddle.net/eUvbx/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T20:20:32.570

以下假设您的号码将*始终*位于字符串的末尾。请注意，我在数组中添加了一些额外的示例来演示可以使用的不同格式：

```
var numbers = ["word_12", "word_59", "word_17", "word23", "28", "I am 29"];

numbers.sort(function(a,b){
    return a.match(/\d+$/) - b.match(/\d+$/);
}); 
```

结果是：

```
["word_12", "word_17", "word23", "28", "I am 29", "word_59"] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T20:27:47.173

以防万一单词中有数字和下划线（通过javascript单词定义，它们是非常合法的单词字符：

```
arr.sort(function(_1, _2)
{
    return +_1.substr(_1.lastIndexOf("_")+1)-_2.substr(_2.lastIndexOf("_")+1);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T20:54:28.847

这是一般情况的代码：

```
natcmp = function(a, b) {
    var aa = [], bb = [];

    (a + "").replace(/(\d+)|(\D+)/g, function($0, $1, $2) { aa.push($2 || Number($1)) });
    (b + "").replace(/(\d+)|(\D+)/g, function($0, $1, $2) { bb.push($2 || Number($1)) })

    var la = aa.length, lb = bb.length;

    for (var i = 0; i < Math.max(la, lb); i++) {
        if (i >= lb) return 1;
        if (i >= la) return -1;
        if (aa[i] > bb[i]) return 1;
        if (aa[i] < bb[i]) return -1;
    }

    return 0;
} 
```

例子：

```
var x = ["word_12", "word_59", "ford_1a", "ford_12a", "ford_2a", "word_0", "word_"];
x.sort(natcmp)

# ["ford_1a", "ford_2a", "ford_12a", "word_", "word_0", "word_12", "word_59"] 
```

这称为“自然排序”。

# javascript - 仅当正文到达特定点时 HTML CSS 固定元素

> ID：10921423
> 
> 赞同：3
> 
> 时间：2012-06-06T20:08:14.127
> 
> 标签：javascript, jquery, html, css

不确定该方法是什么或如何实现。但我很想知道它可能会在即将到来的项目中使用它。我指的是当块元素位于特定的 X/Y 轴时，它似乎停止充当固定位置元素，否则该元素充当固定位置元素。

我最常在导航中看到这一点，其中页眉和页脚很大，当元素到达页眉底部或页脚顶部时，元素将停止充当固定元素

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T20:33:15.153

你可以做这样的事情，

```
$(window).scroll(function(){    
    if ($(this).scrollTop() > 250){ 
        $('#top').css('position','fixed'); 
    }
    else{
        $('#top').css('position','static');
    }
}); 
```

更好的方法是，

```
$(window).scroll(function(){    
    var top =  $('#top'); 
    if ($(this).scrollTop() > 250){
        if(top.css('position') !== 'fixed'){ 
            top.css('position','fixed'); 
        }
    }
    else{
        if(top.css('position') !== 'static'){
            top.css('position','static');
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T20:30:39.323

**有一些插件**可以为您做到这一点；这是我以前使用过的一个：[链接](http://www.profilepicture.co.uk/sticky-sidebar-jquery-plugin/)相对成功。也有很好的例子。

但**如果你想自己做**，也不是太难。这个概念有点复杂。如果您将某些内容更改`position`为`fixed`，那么它将不会占用空间，如果它是`static`。

当我遇到这个问题时，我在同一个地方创建了第二个项目（或不创建，取决于您希望它出现的位置），它是不可见的。然后你实现一个加载/滚动事件来检查窗口`scrollTop`是否大于`top`非固定对象的坐标。如果是，则显示固定对象。

像这样的东西：

```
$("#yourObject").each(function() { // The ID should be the FIXED object.
    var $me = $(this);
    var $heightRival = $("#anotherObject"); // This ID should be the non-fixed object.
    $me.hide(); // Hide your fixed div.
    $(window).bind("load scroll",function() {
        var offset = $heightRival.offset(); // Get the document offset of the base object.
        var height = $heightRival.outerHeight(); // Get the height of the base object.
        if ($(window).scrollTop() > offset.top+height)
            $target.show(); // Can be a fade in, slide in, whatever.
        else
            $target.hide(); // Can be a fade out, etc.
    });
}); 
```

这只是一个基本的代码，但它应该让你走上正确的轨道。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T20:26:55.170

看看这个插件，或者其他类似的插件：[http ://www.orangecoat.com/stickyscroll](http://www.orangecoat.com/stickyscroll)

# vb.net - VB.NET - 通过浏览选择文件夹并从应用程序目录复制文件

> ID：10921429
> 
> 赞同：-2
> 
> 时间：2012-06-06T20:08:42.857
> 
> 标签：vb.net, copy, directory

你好 StackOverflow 用户。我正在尝试创建一个应用程序，您可以在其中浏览到文件夹，按安装按钮，它会将一些文件复制到您选择的目录中？我找到了一些示例代码，但我如何从这里继续我的代码？无法弄清楚如何复制文件。您终于可以在代码中看到我试图复制文件但它并没有真正起作用，我该如何使用该功能？我希望文件来自应用程序目录。并复制到浏览的文件夹。

```
Public Class Installer

Private Sub Installer_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load

End Sub

Private Sub LinkLabel1_LinkClicked(sender As System.Object, e As System.Windows.Forms.LinkLabelLinkClickedEventArgs) Handles LinkLabel1.LinkClicked

End Sub

Private Sub BrowseButton_Click_1(sender As System.Object, e As System.EventArgs) Handles BrowseButton.Click
    ' Declare a variable named theFolderBrowser of type FolderBrowserDialog.
    Dim theFolderBrowser As New FolderBrowserDialog

    ' Set theFolderBrowser object's Description property to
    '   give the user instructions.
    theFolderBrowser.Description = "Please browse to your GTAIV directory."

    ' Set theFolderBrowser object's ShowNewFolder property to false when
    '   the a FolderBrowserDialog is to be used only for selecting an existing folder.
    theFolderBrowser.ShowNewFolderButton = False

    ' Optionally set the RootFolder and SelectedPath properties to
    '   control which folder will be selected when browsing begings
    '   and to make it the selected folder.
    ' For this example start browsing in the Desktop folder.
    theFolderBrowser.RootFolder = System.Environment.SpecialFolder.Desktop
    ' Default theFolderBrowserDialog object's SelectedPath property to the path to the Desktop folder.
    theFolderBrowser.SelectedPath = My.Computer.FileSystem.SpecialDirectories.Desktop

    ' If the user clicks theFolderBrowser's OK button..
    If theFolderBrowser.ShowDialog = Windows.Forms.DialogResult.OK Then
        ' Set the FolderChoiceTextBox's Text to theFolderBrowserDialog's
        '    SelectedPath property.
        Me.FolderTextBox.Text = theFolderBrowser.SelectedPath

    End If
End Sub

Private Sub Button2_Click(sender As System.Object, e As System.EventArgs) Handles InstallButton.Click

    My.Computer.FileSystem.CopyFile(My.Application.Info.DirectoryPath, theFolderBrowser.SelectedPath)

End Sub
End Class 
```

*   斯诺克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T20:13:29.040

当你调用这行代码时

```
My.Computer.FileSystem.CopyFile(My.Application.Info.DirectoryPath,  _
                                theFolderBrowser.SelectedPath) 
```

`theFolderBrowser`无法引用该对象，因为它是另一个方法中的局部变量。但是，在退出之前，您已将所选路径复制到文本框中。您可以将该文本框用作副本的目的地

```
My.Computer.FileSystem.CopyDirectory(My.Application.Info.DirectoryPath,  _
                                     Me.FolderTextBox.Text ) 
```

还要记住，CopyFile 只复制一个文件，如果您打算复制整个文件夹，则需要 CopyDirectory 方法。这个方法还有一个重要的细节：

如果您的文件存在于目标目录中并且您没有使用带有覆盖标志的重载，您将得到一个异常

```
My.Computer.FileSystem.CopyDirectory(My.Application.Info.DirectoryPath,  _
                                     Me.FolderTextBox.Text, True ) 
```

# python-sphinx - 全新安装 sphinx-quickstart 失败

> ID：10921430
> 
> 赞同：45
> 
> 时间：2012-06-06T20:08:49.790
> 
> 标签：python-sphinx

第一次尝试使用 Sphinx，安装干净的 Sphinx 1.1.3，但 shinx-quickstart 失败。是否应该安装任何依赖项？我试过了，`pip --force-reinstall sphinx`但结果是一样的。

```
 myhost:doc anton$ sphinx-quickstart 
  Traceback (most recent call last):
  File "/usr/local/bin/sphinx-quickstart", line 8, in <module>
    load_entry_point('Sphinx==1.1.3', 'console_scripts', 'sphinx-quickstart')()
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/pkg_resources.py", line 318, in load_entry_point
    return get_distribution(dist).load_entry_point(group, name)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/pkg_resources.py", line 2221, in load_entry_point
    return ep.load()
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/pkg_resources.py", line 1954, in load
    entry = __import__(self.module_name, globals(),globals(), ['__name__'])
  File "/Library/Python/2.7/site-packages/Sphinx-1.1.3-py2.7.egg/sphinx/quickstart.py", line 19, in <module>
    from sphinx.util.osutil import make_filename
  File "/Library/Python/2.7/site-packages/Sphinx-1.1.3-py2.7.egg/sphinx/util/__init__.py", line 25, in <module>
    from docutils.utils import relative_path
  File "/Library/Python/2.7/site-packages/docutils-0.9-py2.7.egg/docutils/utils/__init__.py", line 19, in <module>
    from docutils.io import FileOutput
  File "/Library/Python/2.7/site-packages/docutils-0.9-py2.7.egg/docutils/io.py", line 18, in <module>
    from docutils.error_reporting import locale_encoding, ErrorString, ErrorOutput
  File "/Library/Python/2.7/site-packages/docutils-0.9-py2.7.egg/docutils/error_reporting.py", line 47, in <module>
    locale_encoding = locale.getlocale()[1] or locale.getdefaultlocale()[1]
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/locale.py", line 496, in getdefaultlocale
    return _parse_localename(localename)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/locale.py", line 428, in _parse_localename
    raise ValueError, 'unknown locale: %s' % localename

  ValueError: unknown locale: UTF-8 
```

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-06-07T05:24:19.013

我在 Mac OS X Snow Leopard 中遇到了同样的问题。这似乎是 Terminal.app 的问题。

请将以下内容添加到您的 $HOME/.bash_profile

```
export LC_ALL=en_US.UTF-8
export LANG=en_US.UTF-8 
```

做

```
source $HOME/.bash_profile 
```

并尝试。这将解决问题。

# java - Java组合框模型并获取选定项

> ID：10921431
> 
> 赞同：0
> 
> 时间：2012-06-06T20:08:52.390
> 
> 标签：java, swing, events, awt

下面的代码显示了我在使用组合操作时遇到的问题。getSelectedItem() 被多次触发，而不仅仅是在选择时触发。只需加载框架调用该方法 3 次。每次单击组合框都是一次调用，即使它只是用于下拉菜单而不是实际选择。在可编辑文本区域内单击也会触发 getSelectedItem() 方法。有没有办法过滤这个事件？或者在盒子模型级别验证数据的替代方法？

```
public class SSCCE {

/**
 * @param args the command line arguments
 */
public static void main(String[] args) {
    JFrame aframe = new JFrame();
    Combo _combo = new Combo();
    _combo.addElement("This");
    _combo.addElement("That");
    JComboBox _box = new JComboBox(new Combo());
    _box.setEditable(true);
    aframe.add(_box);
    aframe.setVisible(true);

}

static class Combo extends DefaultComboBoxModel{
    public Combo(){
    }
    int i = 0;
    @Override
    public Object getSelectedItem() {
        System.out.println("Get selected Item" + i);
        i++;
        return super.getSelectedItem();
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T20:17:10.377

请参阅[本教程](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html)以了解如何使用 JComboBox，特别是有关处理事件的部分。您应该将一个添加`ActionListener`到您的组合框中。当用户实际做出表明他们的选择已确认的手势时，它将被触发。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T20:15:50.280

您已经查看了添加到[JComboBox的](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html)[ItemListener](http://docs.oracle.com/javase/tutorial/uiswing/events/itemlistener.html)或[ActionListener](http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T17:55:13.457

getSelectedItem() 确实触发了多次，以及动作事件。对于可编辑的组合框，该操作会为 comboboxchanged 触发一次，而为 comboboxedited 触发一次。我已经在 getSelectedItem 中设置了不特定于最终项目的验证，并将其余部分移到组合框更改的过滤操作事件中。我完全忽略了 comboboxedited 事件。

# javascript - 如果使用 javascript 在菜单中选择了其他字段，则显示其他字段

> ID：10921438
> 
> 赞同：0
> 
> 时间：2012-06-06T20:09:31.273
> 
> 标签：javascript, forms

如果用户在选择菜单中选择其他字段，我正在尝试显示另一个字段以捕获用户输入。我的代码如下，但是当我在菜单中选择“其他”时，id otherJobType 并未隐藏。谁能发现我哪里出错了？提前致谢。

```
<style type="text/css">
#otherJobType {
    display:none;
}
</style> 

<script type="text/javascript">
function jobType(value){
        if (value == 'Other') {
            document.getElementById('otherJobType').style.display = 'block';
        } else {
            document.getElementById('otherJobType').style.display = 'none';
        }
    }
</script>

<select id="jobType" name="jobType" onchange="jobType(this.value);">
    <option value="option 1" selected>Option 1</option>
    <option value="Other">Other</option>
</select>

<input name="otherJobType" id="otherJobType" type="text" size="50" value="Please specify job type" onblur="if (this.value=='') { this.value='Please specify job type' }" onclick="if (this.value=='Please specify job type') { this.value='' }" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T12:40:02.080

最后我通过将函数重命名为“workJobType”但将选择菜单上的 id 和名称保留为“jobType”来解决这个问题。如果其中任何一个与函数名称相同，则由于某种原因它不起作用。我很想听听是否有人可以解释为什么它不起作用？

这很奇怪，因为在 Musa 发布的 jsfiddle 中一切正常，但在我的页面上还有更多内容，直到我更改了我正在使用的函数名称，它才起作用。

# javascript - 使用javascript检索嵌入视频的宽度

> ID：10921439
> 
> 赞同：1
> 
> 时间：2012-06-06T20:09:31.337
> 
> 标签：javascript, css

我有一个带有嵌入式视频的简单页面。下面是一个例子。我想检索嵌入视频的 iframe 的宽度，该宽度可能会有所不同（例如，如果视频来自 youtube 或 vimeo ）。然后我可以在它旁边放一个 div 和一些文本，并相应地调整后者的宽度

```
<html>
  <head>
  </head>
      <body onLoad = "resizeElements()">
    <iframe width="420" height="315" src="http://www.youtube.com/embed/a34QTcpnKww"     frameborder="0" allowfullscreen>
    </iframe>  
  </body>
    <script language="JavaScript" type="text/javascript">
    function resizeElements() 
    {
      var iframeVideos = document.getElementsByTagName("iframe");
      for ( var i = 0; i < iframeVideos.length; i++) 
      {
        video = iframeVideos[i];
        alert ( ">" + video.style.width+ "<" );
        video.style.width = "112px";
        video.style.height = "63px";
        alert ( ">" + video.style.width+ "<" );
      }
    }
  </script>
</html> 
```

页面已加载，第一个警报（应具有 iframe 的宽度）仅显示“><”，中间没有视频的宽度。

我确信这不是因为视频对象为空。以下几行按预期调整它的大小。调整大小后，相同的警报会显示正确的宽度。

我能做些什么来立即获得宽度吗？

我不是 jQuery 等库的忠实拥护者，但很高兴考虑其中一个提供直接解决方案的情况，该解决方案不会使其比仅解析标签内的字符串更复杂。以防万一该页面将来需要一些维护......

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T20:19:56.850

## DOM: element.offset*

[offsetWidth](https://developer.mozilla.org/en/DOM/element.offsetWidth)和[offsetHeight](https://developer.mozilla.org/en/DOM/element.offsetHeight)应该有所帮助，[甚至在 IE6 和所有现代浏览器中都支持](http://www.quirksmode.org/dom/w3c_cssom.html#t34)。

```
alert ( ">" + video.offsetWidth +  "<" ); 
```

请看一下[jsFiddle 演示](http://jsfiddle.net/KN2zH/)。

## jQuery 宽度（）/高度（）

如果您准备好使用**jQuery**，请查看[`.width()`](http://api.jquery.com/width/)和[`height()`](http://api.jquery.com/height/). 我也不是 jQuery 的“粉丝”，但是如果您厌倦了解决浏览器的不一致问题，需要高级事件处理支持（而不是您当前的内联事件处理程序）和出色的 DOM 助手，那么它是一个了不起的工具。

## 属性

另一种方法是简单地检索 HTML 属性的内容（being `width="420"`）。您可以使用`.getAttribute(width)`or `.width`（访问 DOM 属性）来执行此操作。

```
 alert ( ">" + video.width +  "<" );
 alert ( ">" + video.getAttribute(width) +  "<" ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T20:20:08.707

我认为您只需要设置样式属性以匹配您的宽度和高度属性：

```
<iframe style="width:420;height:315" width="420" height="315" src="http://www.youtube.com/embed/a34QTcpnKww"     frameborder="0" allowfullscreen>
    </iframe> 
```

因为在您的函数中，您正在使用 style 属性。

# vim - 我的 .vimrc 文件在哪里？

> ID：10921441
> 
> 赞同：531
> 
> 时间：2012-06-06T20:09:36.387
> 
> 标签：vim

我一直在使用[Vim](http://en.wikipedia.org/wiki/Vim_%28text_editor%29)，我真的很想保存我的设置。我遇到的问题是我找不到我的 .vimrc 文件，而且它不在标准`/home/user/.vimrc`位置。我怎样才能找到这个文件？

* * *

## 回答 #1

> 赞同：618
> 
> 时间：2012-06-06T20:11:43.080

您需要创建它。在我使用的大多数安装中，默认情况下没有创建它。

您通常将其创建为`~/.vimrc`.

* * *

## 回答 #2

> 赞同：392
> 
> 时间：2012-06-07T14:25:10.207

如果你已经有一个 .vimrc 文件，这些方法可以工作：

`:scriptnames`列出 Vim 为你加载的所有 .vim 文件，包括你的`.vimrc`文件。

`:e $MYVIMRC`打开并编辑您正在使用的当前 .vimrc，然后使用`Ctrl`+`G`查看状态栏中的路径。

* * *

## 回答 #3

> 赞同：114
> 
> 时间：2015-11-30T18:56:12.520

# 简短的回答：

要创建 vimrc，请启动 Vim 并执行以下操作之一：

```
:e $HOME/.vimrc  " on Unix, Mac or OS/2

:e $HOME/_vimrc  " on Windows

:e s:.vimrc      " on Amiga 
```

插入所需的设置，然后保存文件。

请注意，此文件的存在将禁用该`compatible`选项。详情见下文。

# 长答案：

vimrc 有两种：

*   用户*vimrc*在`$HOME`
*   *系统 vimrc*（在`$VIM`Amiga 系统上，`s:.vimrc`被认为是用户 vimrc）

**用户 vimrc 文件通常在用户创建之前不存在。**如果您找不到`$HOME/.vimrc`（或`$HOME/_vimrc`在 Windows 上），那么您可以并且可能应该创建它。

**系统 vimrc 通常应该保持不变**并且位于`$VIM`^*目录中。系统 vimrc*不是*保存个人设置的好地方。如果你修改了这个文件，你的修改可能会在你升级 Vim 时被覆盖。此外，此处的更改将影响多用户系统上的其他用户。在大多数情况下，用户 vimrc 中的设置将覆盖系统 vimrc 中的设置。

来自`:help vimrc`：

> 包含初始化命令的文件称为“vimrc”文件。vimrc 文件中的每一行都作为 Ex 命令行执行。它有时也称为“exrc”文件。它们是相同类型的文件，但“exrc”是 Vi 常用的，“vimrc”是 Vim 特定的名称。另见 |vimrc-intro|。
> 
> 您个人初始化的地方：
> 
> ```
>  Unix            $HOME/.vimrc or $HOME/.vim/vimrc
>     OS/2            $HOME/.vimrc, $HOME/vimfiles/vimrc
>                     or $VIM/.vimrc (or _vimrc)
>     MS-Windows      $HOME/_vimrc, $HOME/vimfiles/vimrc
>                     or $VIM/_vimrc
>     Amiga           s:.vimrc, home:.vimrc, home:vimfiles:vimrc
>                     or $VIM/.vimrc 
> ```
> 
> 这些文件按照上面指定的顺序进行搜索，并且只读取找到的第一个文件。

（对于上述情况，MacOS 算作 Unix。）

请注意，用户 vimrc 的*存在*将通过关闭该`compatible`选项来改变 Vim 的行为。来自`:help compatible-default`：

> 当 Vim 启动时，'compatible' 选项打开。这将在 Vim 开始初始化时使用。但是一旦找到用户 vimrc 文件，或者当前目录中的 vimrc 文件，或者设置了“VIMINIT”环境变量，它就会被设置为 'nocompatible'。这具有设置或重置其他选项的副作用（请参阅“兼容”）。但只会更改尚未设置或重置的选项。

* * *

^(*`$VIM`可能不会在你的 shell 中设置，但总是在 Vim 中设置。如果你想查看它的设置，启动 Vim 并使用命令`:echo $VIM`)

* * *

## 回答 #4

> 赞同：30
> 
> 时间：2013-09-24T06:38:27.650

作为附加信息，主要在 macOS 中，.vimrc 文件位于目录：

```
/usr/share/vim/.vimrc 
```

* * *

## 回答 #5

> 赞同：26
> 
> 时间：2013-09-15T02:47:27.677

```
:echo($MYVIMRC) 
```

将为您提供 .vimrc 文件的位置。

```
:e $MYVIMRC 
```

会打开它。

* * *

## 回答 #6

> 赞同：20
> 
> 时间：2016-06-03T18:45:31.843

无论出于何种原因，这些答案对我来说都不太适用。这对我有用：

在 Vim 中，该`:version`命令为您提供系统和用户 vimrc 和 gvimrc 文件的路径（以及其他内容），输出如下所示：

```
 system vimrc file: "$VIM/vimrc"
   user vimrc file: "$HOME/.vimrc"
    user exrc file: "$HOME/.exrc"
system gvimrc file: "$VIM/gvimrc"
  user gvimrc file: "$HOME/.gvimrc" 
```

你想要的是`user vimrc file: "$HOME/.vimrc"`

所以要编辑文件：`vim $HOME/.vimrc`

来源：*[打开vimrc文件](http://vim.wikia.com/wiki/Vimrc)*

* * *

## 回答 #7

> 赞同：16
> 
> 时间：2019-06-22T12:42:11.230

在 unix 上`vim --version`告诉你 vim 配置文件的不同位置：

```
 system vimrc file: "$VIM/vimrc"
     user vimrc file: "$HOME/.vimrc"
 2nd user vimrc file: "~/.vim/vimrc"
      user exrc file: "$HOME/.exrc"
       defaults file: "$VIMRUNTIME/defaults.vim"
  fall-back for $VIM: "/usr/share/vim" 
```

* * *

## 回答 #8

> 赞同：15
> 
> 时间：2018-02-19T02:14:07.367

打开 Vim，在普通模式下输入：

```
:echo $VIM 
```

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2020-06-27T13:15:27.720

# 可以使用`find`命令获取有用信息

* * *

```
find / -iname "*vimrc*" -type f 2>/dev/null 
```

* * *

已经有很多答案了，但有时对包含名称“vimrc”的任何内容运行“查找”很有用。

原因是这将显示您当前在系统上实际可用的文件，而不是您**可能**放在系统上的文件。（您将获得的信息，`:version`如其他答案中所述。）

# 我的系统上的示例结果

在我的系统上，这会产生

```
/usr/share/vim/vim82/vimrc_example.vim
/usr/share/vim/vim82/gvimrc_example.vim
/etc/vim/gvimrc
/etc/vim/vimrc
/etc/vim/vimrc.tiny 
```

这非常有用，因为它告诉我们在 gvim 和 vim 的共享目录中安装了 2 个示例文件，并且下面还有一些系统范围的配置文件`/etc/`。

在我的系统上，我也有一个文件，`~/.vimrc`但它没有出现在这个列表中，因为它是另一个文件的链接，存储在`~/Linux-Config`. 但是你不会有这个目录，它特定于我在我自己的网络上使用的机器。

# `find`使用语法的详细解释

解释：

*   从根目录开始`/`查找（递归查找）
*   任何包含**不区分大小写**的正则表达式的东西，`*vimrc*`这意味着`vimrc`在某处带有（不区分大小写）的任何名称，可以在前面或后面跟着任何东西或什么都没有（`*`）
*   类型 = 文件（不是目录/符号链接等）
*   抛出所有错误，`/dev/null`否则输出会充满不可读的错误`/proc`

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2013-09-14T02:21:14.720

这里还有一些提示：

*   在[Arch Linux](http://en.wikipedia.org/wiki/Arch_Linux)中，全局版本位于`/etc/vimrc`. 里面有一些评论有帮助的细节。

*   由于文件名以 a 开头，除非您用于显示所有文件`.`，否则它是隐藏的。`ls -a`

*   在 Vim 中输入`:version`会显示很多有趣的信息，包括文件位置。

*   如果您不确定是什么`~/.vimrc`意思[，请查看这个问题](https://stackoverflow.com/questions/1384582/linux-ubuntu-directory-location-vim-syntax)。

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2016-04-02T23:24:00.833

我想分享我如何在 Mac 上将显示行号设置为默认值。

1.  在终端中，键入`cd`。这将帮助您转到主文件夹。
2.  在终端中，键入`vi .vimrc`。这将创建一个您要使用的空 vimrc 系统文件。
3.  在文件中，输入`set number`，然后敲击`Esc`键盘并输入`:wq`. 这将设置默认设置文件中显示的行号`vimrc`并保存。
4.  `vi something`看看这是否有效。如果没有，请尝试完全重新启动终端。

如果在终端中，输入`cd /usr/share/vim/`，转到该文件夹​​，然后输入`ls`。可以直接看到一个名为 vimrc 的文件。但它是一个只读的系统文件。我觉得尝试修改它不是一个好主意。所以按照上面的步骤自己创建一个vimrc比较好。它对我有用。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2015-02-25T04:03:20.253

我尝试了上一个答案中的所有内容，但找不到`.vimrc`文件，所以我不得不制作一个。

我复制了示例文件，`cp vimrc_example.vim ~/.vimrc`.

我必须创建文件，从复制`/usr/share/vim/vim74/vimrc_example.vim`到`~/.vimrc`. 这些是`vimrc_example`文件中的说明。

我的解决方案是针对其他操作系统的 Unix。根据 Vim 文档，您的目标路径应如下所示：

```
 For Unix and OS/2   : ~/.vimrc
    For Amiga           : s:.vimrc
    For MS-DOS and Win32: $VIM\_vimrc
    For OpenVMS         : sys$login:.vimrc 
```

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2020-10-13T01:27:27.927

实际上你有一个 vimrc

> /etc/vimrc

当您在其中编辑某些内容时，
如果您不希望可以在其中创建本地 vimrc，则更改将影响所有用户

> ~/.vimrc

此处的更改只会影响一个用户

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2021-08-14T14:35:04.443

文件在哪里`.vimrc`？这取决于操作系统。如您所见，您正在寻找`/home/$user/.vimrc`，这可能意味着您正在使用 BSD / Linux。以下是每个操作系统的位置...

*   ***BSD/Linux***：`/home/$user/.vimrc`
*   ***SunOS / Solaris***：`/export/home/$user/.vimrc`
*   ***macOS***：`/Users/$user/.vimrc`
*   ***安卓***：`/data/media/$userid/.vimrc`
*   ***Unix***：`$root/home/$user/.vimrc`
*   ***AT&T Unix***：`$root/usr/$user/.vimrc`
*   ***Unix 派生***：
    *   `/var/users/$user/.vimrc`
    *   `/u01/$user/.vimrc`
    *   `/usr/$user/.vimrc`
    *   `/user/$user/.vimrc`
    *   `/users/$user/.vimrc`（来源：[维基百科：每个操作系统的默认主目录](https://en.wikipedia.org/wiki/Home_directory#Default_home_directory_per_operating_system)。）

如果它不存在，请使用`~/.vimrc`.

此外，`root`用户有自己的特殊`.vimrc`文件，可以`/root/.vimrc`在 BSD / Linux 上找到（以及其他操作系统的等效位置）。

该位置在变量中设置，该`$HOME`变量始终在 Linux 环境中设置。（[来源：StackExchange->Unix & Linux](https://unix.stackexchange.com/q/123858/466373)。）

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2015-02-25T14:28:56.630

在[SUSE Linux Enterprise Server (SLES)](http://en.wikipedia.org/wiki/SUSE_Linux_Enterprise_Server)和[openSUSE](http://en.wikipedia.org/wiki/OpenSUSE)中，全局服务器位于`/etc/vimrc`.

要编辑它，只需执行`vi /etc/vimrc`.

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2015-05-24T12:22:23.623

*Ubuntu (* *[12.04 (Precise Pangolin)](https://en.wikipedia.org/wiki/Ubuntu_version_history#Ubuntu_12.04_LTS_.28Precise_Pangolin.29)* *)*中的**vimrc**文件：我在 Vim 中尝试过，它同时显示和.`:scriptnames``/usr/share/vim/vimrc``~/.vimrc`

但是我手动创建了`~/.vimrc`.

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2017-04-27T02:21:46.893

从 cmd (Windows):

```
C\Users\You> `vim foo.txt` 
```

现在在 Vim 中，输入命令模式：“ **:** ”（即`Shift`+ `;`）

```
:tabedit $HOME/.vimrc 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2022-02-18T21:27:07.690

在我的系统中，安装了 Garuda Linux 的文件的名称是 file:///etc/xdg/nvim/sysinit.vim，所以尝试找到这个文件并添加您的自定义更改。

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2021-10-21T12:31:34.133

如果在 Windows 中，它可能位于文件夹“vim”中 Program Files(x86) 下的 C 目录中

# android - 在没有提供“NetworkOnMainThreadexception”的提要对话框的情况下发布到墙上 | 安卓

> ID：10921448
> 
> 赞同：2
> 
> 时间：2012-06-06T20:09:52.950
> 
> 标签：android

我正在尝试从我的应用程序在用户墙上发帖而不显示提要对话框。我有一个与 an`EditText getmessage`和 a的活动`Button with onClick()=postToWall`。我正在关注这个问题： [Android Facebook Post On Wall without Dialog Warnings](http://facebook.stackoverflow.com/questions/9945153/android-facebook-post-on-wall-without-dialog-warnings)

这是我的代码：

```
public void postToWall(View v){
        String message = getmessage.getText().toString();
        postMessage(message);       
    }

    public void postMessage(String message){
        Log.d("test", "testing post to wall");
        try{
            String response;
            Bundle parameters = new Bundle();
            parameters.putString("message", message);           
            response = facebook.request("me/feed", parameters, "POST");

            Log.d("test", "got response "+response);

            if(response == null || response.equals("")){
                Log.v("Error", "Blank");
            }
        }
        catch(Exception e){
            e.printStackTrace();
        }
    } 
```

以下是日志：

```
 06-06 20:03:19.726: I/ActivityManager(78): Displayed com.MyApp/.fbShare: +146ms
06-06 20:03:24.816: D/test(736): testing post to wall
06-06 20:03:24.828: W/System.err(736): android.os.NetworkOnMainThreadException
06-06 20:03:24.836: W/System.err(736):  at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
06-06 20:03:24.836: W/System.err(736):  at java.net.InetAddress.lookupHostByName(InetAddress.java:391)
06-06 20:03:24.846: W/System.err(736):  at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
06-06 20:03:24.846: W/System.err(736):  at java.net.InetAddress.getAllByName(InetAddress.java:220)
06-06 20:03:24.846: W/System.err(736):  at libcore.net.http.HttpConnection.<init>(HttpConnection.java:71)
06-06 20:03:24.846: W/System.err(736):  at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
06-06 20:03:24.846: W/System.err(736):  at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:351)
06-06 20:03:24.846: W/System.err(736):  at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:86)
06-06 20:03:24.846: W/System.err(736):  at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
06-06 20:03:24.846: W/System.err(736):  at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:308)
06-06 20:03:24.846: W/System.err(736):  at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.makeSslConnection(HttpsURLConnectionImpl.java:460)
06-06 20:03:24.846: W/System.err(736):  at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.connect(HttpsURLConnectionImpl.java:432)
06-06 20:03:24.846: W/System.err(736):  at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:282)
06-06 20:03:24.856: W/System.err(736):  at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:232)
06-06 20:03:24.856: W/System.err(736):  at libcore.net.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:80)
06-06 20:03:24.856: W/System.err(736):  at libcore.net.http.HttpsURLConnectionImpl.connect(HttpsURLConnectionImpl.java:164)
06-06 20:03:24.856: W/System.err(736):  at com.facebook.android.Util.openUrl(Util.java:193)
06-06 20:03:24.866: W/System.err(736):  at com.facebook.android.Facebook.request(Facebook.java:751)
06-06 20:03:24.866: W/System.err(736):  at com.MyApp.fbShare.postMessage(fbShare.java:56)
06-06 20:03:24.866: W/System.err(736):  at com.MyApp.fbShare.postToWall(fbShare.java:47)
06-06 20:03:24.866: W/System.err(736):  at java.lang.reflect.Method.invokeNative(Native Method)
06-06 20:03:24.866: W/System.err(736):  at java.lang.reflect.Method.invoke(Method.java:511)
06-06 20:03:24.876: W/System.err(736):  at android.view.View$1.onClick(View.java:3039)
06-06 20:03:24.876: W/System.err(736):  at android.view.View.performClick(View.java:3511)
06-06 20:03:24.876: W/System.err(736):  at android.view.View$PerformClick.run(View.java:14105)
06-06 20:03:24.876: W/System.err(736):  at android.os.Handler.handleCallback(Handler.java:605)
06-06 20:03:24.886: W/System.err(736):  at android.os.Handler.dispatchMessage(Handler.java:92)
06-06 20:03:24.886: W/System.err(736):  at android.os.Looper.loop(Looper.java:137)
06-06 20:03:24.886: W/System.err(736):  at android.app.ActivityThread.main(ActivityThread.java:4424)
06-06 20:03:24.886: W/System.err(736):  at java.lang.reflect.Method.invokeNative(Native Method)
06-06 20:03:24.896: W/System.err(736):  at java.lang.reflect.Method.invoke(Method.java:511)
06-06 20:03:24.896: W/System.err(736):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-06 20:03:24.896: W/System.err(736):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-06 20:03:24.896: W/System.err(736):  at dalvik.system.NativeStart.main(Native Method) 
```

我在这里错过了什么吗？我很感激任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T20:16:44.323

从 3.0（我认为）开始，如果您尝试在主（UI）线程上使用网络，系统会抛出异常。他们选择让系统这样做是为了鼓励开发人员不要将长时间运行的任务（例如网络操作）放在主线程上。

为了解决您的问题，您需要将您的网络操作（例如对 postMessage() 的调用）移动到后台线程。有几种方法。查看[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)或查看使用[Handler](http://developer.android.com/reference/android/os/Handler.html) / [Thread](http://developer.android.com/reference/java/lang/Thread.html)。如果您搜索“Android 创建后台线程”之类的内容，可以在网上找到许多示例

此外[，由 Lars Vogel 制作的本教程](http://www.vogella.com/articles/AndroidPerformance/article.html)非常适合学习这些内容。

# android - 使用自定义操作启动活动

> ID：10921451
> 
> 赞同：51
> 
> 时间：2012-06-06T20:09:57.147
> 
> 标签：android, android-intent, android-activity

我希望使用自定义操作在我的应用程序中启动一项活动。我找到了一些答案，但我尝试的所有内容都显示`java.lang.RuntimeException`没有找到处理 Intent { act=com.example.foo.bar.YOUR_ACTION } 的活动。

这是我的清单文件中的活动：

```
<activity
    android:name=".FeedbackActivity" >  
    <intent-filter>
        <action android:name="com.example.foo.bar.YOUR_ACTION" />
    </intent-filter>
</activity> 
```

这就是我开始活动的方式：

```
Intent intent = new Intent("com.example.foo.bar.YOUR_ACTION");
startActivity(intent); 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：136
> 
> 时间：2012-06-13T05:48:32.910

我认为您需要为您的意图过滤器添加一个默认类别，例如。

```
<activity
    android:name=".FeedbackActivity" >  
    <intent-filter>
        <action android:name="com.example.foo.bar.YOUR_ACTION" />
        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</activity> 
```

有关更多信息，请参阅[此答案](https://stackoverflow.com/a/8584432/85472)。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-06-06T21:08:56.477

我认为你创造你的意图是错误的。试试这样：

```
String CUSTOM_ACTION = "com.example.foo.bar.YOUR_ACTION";

//Intent i = new Intent(this, FeedBackActivity.class);  // <--- You might need to do it this way.
Intent i = new Intent();
i.setAction(CUSTOM_ACTION);

startActivity(i); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-04-12T08:33:19.057

只需将意图过滤器类别添加为默认值。

隐式意图完美地工作，在许多情况下，使用带有 Intent-action 的隐式意图来调用服务/活动比使用类名更好。

在`startActivty() / startService()`使用适当的上下文之前，您可以`'queryIntentActivities(Intent intent, int flags)'`从包管理器类中使用此方法。

它帮助 ActivityManager（负责启动活动）检查 Android 系统是否与您的 Intent 匹配。

如果不是，则返回列表**大小 0 或 >0**。

通过这种方式，您还可以检查您的应用程序是否正在接收呼叫，在这种情况下，即使您的应用程序没有安装/出现问题，它也不会崩溃，但会在 Log 中抛出警告。用户除了应用不启动外，不会遇到大麻烦。

（如果旅游应用程序崩溃，用户永远不会原谅你）。

希望这会有所帮助！快乐编码。:)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-07-21T07:58:24.293

当尝试启动驻留在动态功能模块中的活动并通过操作字符串启动时，我遇到了同样的问题，因为活动在编译时无法通过名称解析。所以我设置了动作，但活动每次都崩溃（没有找到处理意图 bla bla.. 的活动），直到我设置了正确的包名称。

```
Context c = getApplicationContext();// flag would be require Calling startActivity() from outside of an Activity  context requires the FLAG_ACTIVITY_NEW_TASK flag
Intent i = new Intent(action_string);
i.setPackage(context.getPackageName());//this did the trick actually
i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
context.startActivity(i); 
```

**在清单中：将 catrgory 默认添加到来自谷歌文档的意图过滤器**：

```
<category android:name="android.intent.category.DEFAULT"/> 
```

> 注意：为了接收隐式意图，您必须在意图过滤器中包含 CATEGORY_DEFAULT 类别。方法 startActivity() 和 startActivityForResult() 将所有意图视为声明了 CATEGORY_DEFAULT 类别。如果您没有在您的意图过滤器中声明它，则没有隐式意图将解析为您的活动。

# apache - .htaccess 显示目录 index.html 不带斜杠

> ID：10921456
> 
> 赞同：2
> 
> 时间：2012-06-06T20:10:17.630
> 
> 标签：apache, .htaccess

我在 Apache 服务器上运行了一个 Jekyll 生成的站点，但在正确设置我的 .htaccess 文件时遇到了一些问题。Jekyll 将 index.html 文件放入代表每个页面的文件夹中，因此我的 URL 当前看起来像`domain.com/foo/`

我想从 URL 中删除该斜杠，以便它与我之前设置的完全匹配（也因为我认为它看起来更好）。

目前，我的 .htaccess 文件中处理重写的部分如下所示：

```
<IfModule mod_rewrite.c>
  RewriteCond %{HTTPS} !=on
  RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
  RewriteRule ^(.*)$ http://%1/$1 [R=301,L]
</IfModule>

Options -Indexes

DirectoryIndex index.xml index.html 
```

我已经尝试按照[此处](https://stackoverflow.com/questions/4167539/remove-trailing-slash-using-htaccess-except-for-home-landing-page)的建议进行操作，但这使我陷入了重定向循环。

有人可以帮帮我吗？简而言之，我想要的是 domain.com/foo URL 显示 /foo 目录中的 index.html 文件，以及 domain.com/foo/ 和 domain.com/foo/index.html 重定向到域。 com/foo。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T20:14:11.283

您应该能够使用它来关闭斜杠的添加。

```
DirectorySlash Off 
```

**请注意，添加尾部斜杠是有充分理由的。**在目录名称中使用尾部斜杠将使相对 URL 指向同一事物，无论 URL 是以“foo/bar/index.html”结尾还是仅以“foo/bar/”结尾。如果没有尾部斜杠，相对 URL 将引用比它们通常指向的内容更高一级的内容。（例如：“baz.jpg”将给用户“/foo/baz.jpg”而不是“/foo/bar/baz.jpg”，因为如果尾随“bar”不受保护，它将被删除斜杠。）因此，如果您这样做，您可能希望避免使用相对 URL。

然后重写目录名称以返回 index.html 你可能会做这样的事情：

```
RewriteCond %{DOCUMENT_ROOT}%{REQUEST_URI}/index.html -f
RewriteRule ^(.*)$ /$1/index.html [L] 
```

这将检查 REQUEST_URI/index.html 是否存在，以及是否执行内部重定向。

# php - PHP使用DOMDocument从URL检索内部HTML作为字符串

> ID：10921457
> 
> 赞同：2
> 
> 时间：2012-06-06T20:10:21.670
> 
> 标签：php, html, dom, cross-domain

我一直在挑选代码片段，您可以大致看到我正在尝试做的事情，显然这不起作用并且是完全错误的：

```
<?php

$dom= new DOMDocument();
$dom->loadHTMLFile('http://example.com/');
$data = $dom->getElementById("profile_section_container");
$html = $data->saveHTML();
echo $html;

?> 
```

使用 CURL 调用，我可以检索文档 URL 源：

```
function curl_get_file_contents($URL)
{
$c = curl_init();
curl_setopt($c, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($c, CURLOPT_URL, $URL);
$contents = curl_exec($c);
curl_close($c);

if ($contents) return $contents;
else return FALSE;
}

$f = curl_get_file_contents('http://example.com/'); 
echo $f; 
```

那么我现在如何使用它在 PHP 中实例化 DOMDocument 对象并使用**getElementById提取节点**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T21:04:05.857

这是避免任何格式错误的 HTML 错误所需的代码：

```
$dom = new DOMDocument();
libxml_use_internal_errors(true);
$dom->loadHTMLFile('http://example.com/');
$data = $dom->getElementById("banner");
echo $data->nodeValue."\n" 
```

要转储整个 HTML 源代码，您可以调用：

```
echo $dom->saveHTML(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T20:31:25.440

```
<?php

$f = curl_get_file_contents('http://example.com/')

$dom = new DOMDocument();
@$dom->loadHTML($f);
$data = $dom->getElementById("profile_section_container");
$html = $dom->saveHTML($data);
echo $html;

?> 
```

如果您提供示例 html，将会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T20:20:52.230

我不确定，但我记得一旦我想使用它，我就无法将一些外部 url 作为文件加载，因为 php.ini 指令[allow-url-fopen](http://www.php.net/manual/en/filesystem.configuration.php#ini.allow-url-fopen)被设置为关闭......

因此，请检查您的 pnp.ini 或尝试使用 fopen 打开 url 以查看是否可以将 url 作为文件读取

```
<?php
$f = file_get_contents(url);
var_dump($f); // just to see the content
?> 
```

问候;

咪咪

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T20:19:46.997

尝试这个：

```
$dom= new DOMDocument();
$dom->loadHTMLFile('http://example.com/');
$data = $dom->getElementById("profile_section_container")->item(0);
$html = $data->saveHTML();
echo $html; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T20:38:12.183

我认为现在你可以使用[DOMDocument::loadHTML](http://www.php.net/manual/fr/domdocument.loadhtmlfile.php) 也许你应该尝试 Doctype 存在（使用正则表达式），然后在必要时添加它，以确保它声明......问候

咪咪兹

# ruby-on-rails - 在 Ruby Rails 中嵌入 URL？

> ID：10921458
> 
> 赞同：0
> 
> 时间：2012-06-06T20:10:31.857
> 
> 标签：ruby-on-rails, ruby, layout

我在我的 Rails 应用程序中链接到 Web 应用程序时遇到了一些问题。基本上，我有一个应用程序布局，由标题、侧边栏和 main_content 组成，我希望能够在主窗口中打开 Web 应用程序，有点像框架。我该怎么做？我尝试使用简单的 link_to 命令，但即使我包含了**:target**参数，它也会打开一个新窗口。我试图为它设置一个控制器并使用它，但我找不到将它链接到应用程序的方法。请注意，虽然我确实拥有该应用程序，但我只能通过 URL 访问它：我不会将其存储在本地。

抱歉，如果这是一个业余问题，我仍在学习 Rails，而且我还处于初学者阶段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T00:49:08.433

假设您使用的链接指向一个完整的网页，而不是设计用于在另一个页面内使用的片段，那么您最好的选择是嵌入 iframe。

所做的只是呈现一个`link_to`常规的超链接，并且它总是会加载一个新页面（无论是在新窗口、选项卡中还是替换当前页面）。

# web-services - 使用 Spring 和 JAX-WS 创建 Web 服务客户端时出错

> ID：10921465
> 
> 赞同：0
> 
> 时间：2012-06-06T20:10:45.000
> 
> 标签：web-services, spring, jaxb, jax-ws

在使用 spring 和 JAX-WS 创建 Web 服务客户端时.. 我收到以下错误

在谷歌上搜索了很多关于它我注意到

**这是由于旧版本的 JAXB(jaxb-impl:jar:2.1.3:compile) 由 maven 传递获取并因此导致冲突而发生的。**

尝试使用修复它

1.  通过将 JAXB 2.x 放在 jre/lib/endorsed 文件夹中.. 但没有帮助
2.  想知道这个问题是否可以通过排除传递依赖获取来解决。
3.  需要知道如何强制 maven 不获取传递依赖项并强制它使用专门提到的依赖项。

但是我的所有尝试都失败了。有人可以帮我解决这个问题吗

```
Exception in thread "main" java.lang.ExceptionInInitializerError
    at com.sun.xml.internal.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:107)
    at com.sun.xml.internal.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:78)
    at com.sun.xml.internal.ws.client.sei.SEIStub.invoke(SEIStub.java:107)
    at $Proxy21.isValidEmail(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.remoting.jaxws.JaxWsPortClientInterceptor.doInvoke(JaxWsPortClientInterceptor.java:520)
    at org.springframework.remoting.jaxws.JaxWsPortClientInterceptor.doInvoke(JaxWsPortClientInterceptor.java:494)
    at org.springframework.remoting.jaxws.JaxWsPortClientInterceptor.invoke(JaxWsPortClientInterceptor.java:481)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    at $Proxy22.isValidEmail(Unknown Source)
    at com.rosettastone.succor.webservice.EmailValidateClientImpl.main(EmailValidateClientImpl.java:15)
Caused by: java.lang.ClassCastException: com.sun.xml.bind.v2.runtime.JAXBContextImpl cannot be cast to com.sun.xml.internal.bind.api.JAXBRIContext
    at com.sun.xml.internal.ws.fault.SOAPFaultBuilder.<clinit>(SOAPFaultBuilder.java:533)
    ... 15 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T18:13:02.737

此异常很可能是由从不同的类加载器加载的 JAX-WS 和 JAXB 引起的。这些库最初是独立于 JDK 开发的，因此必须作为应用程序的一部分进行部署，但现在是 JDK 的一部分。如果您继续将它们部署为应用程序的一部分，它们在类路径中可用两次，并且可能会导致诸如 ClassCastException 之类的互操作性问题。

最简单的解决方案是不再将它们与应用程序一起部署。如果这是一个由 maven 管理的传递依赖，你可以通过排除它来做到这一点。在eclipse中，这很简单：

*   在 pom 编辑器（这是 pom 文件的默认编辑器）中打开项目的 pom
*   选择依赖层次选项卡
*   右键单击有问题的依赖项
*   并选择“排除 Maven 工件”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T09:06:50.827

您可以通过运行 mvn dependency:tree 来获取所有依赖关系树，然后排除给您带来麻烦的依赖关系。

关于 jaxws/jaxb 问题，有很多方法可以指定特定版本，但我们需要知道您的确切意图。（wsgen、wsimport、运行时出现问题？）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T17:24:37.733

我在 jersey-json pom 引入显式版本的 jaxb-impl 时遇到了这个问题。排除这种依赖关系的 Maven 对我有用。

更多信息在这里：

```
http://jersey.java.net/nonav/documentation/latest/chapter_deps.html 
```

（不完全确定为什么它会获得不同版本的 api 和 impl 类，因为 jaxb-impl pom 引入了其首选的 jaxb-api，AFAICT 上没有时髦的类加载，所以无论它是从 JRE 加载还是从显式 jaxb JAR 加载，它应该有兼容的类......但它没有，并且排除导致它全部工作！）

# python - 验证 Flask WTF 表单中的选择字段

> ID：10921473
> 
> 赞同：4
> 
> 时间：2012-06-06T20:11:05.617
> 
> 标签：python, flask, wtforms

我正在使用 Flask-WTF 表单，我有以下代码：

在forms.py中

```
class DealForm( Form ):
    country  = SelectField( 'Country' ) 
```

在 main.py

```
if not form.validate_on_submit():
    form = DealForm()
    form.country.choices = [('us','USA'),('gb','Great Britain'),('ru','Russia')]
    return render_template( 'index.html', user = current_user, form = form )
else:
    return render_template( 'index.html', form = form ) 
```

当我从 POST 返回时出现错误，因为 country.choices 是 None 我做错了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-06T20:13:44.103

您需要在调用之前设置选项`validate_on_submit()`。

因为它们是静态的，所以在创建 Form 类时这样做：

```
class DealForm(Form):
    country = SelectField('Country', choices=[
        ('us','USA'),('gb','Great Britain'),('ru','Russia')]) 
```

如果您想在创建表单实例后设置它们，例如，因为可用选项不是硬编码或因其他因素而异，您可以在创建类的实例后这样做：

```
form.country.choices = [('us','USA'),('gb','Great Britain'),('ru','Russia')] 
```

就像你已经做过但更早的那样。

# dojo - 刷新对话框时动态更改dojo对话框的标题

> ID：10921476
> 
> 赞同：0
> 
> 时间：2012-06-06T20:11:09.260
> 
> 标签：dojo, dialog

有谁知道如何根据用户的操作动态刷新 dojo 对话框的标题栏？

例如，我单击一个链接打开一个对话框。此对话框将有不同的链接。然后我单击这些链接之一。此对话框刷新，标题栏应该更新为不同的文本？

对话框一：标题栏文本：选择设备 | 第 1 步（共 3 步）。用户单击链接，第一个对话框会刷新新内容和新标题栏文本：选择设备 | 第 2 步，共 3 步（带有一些样式）。用户然后单击此对话框上的链接，并使用新内容刷新。标题栏现在应该显示：选择设备 | 第 3 步，共 3 步。

非常感谢任何答案、提示和帮助。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T20:49:27.100

您可以设置标题属性。

```
 dlg.set('title', newTitle); 
```

这是一个例子：http: [//jsfiddle.net/cswing/DnBTW/](http://jsfiddle.net/cswing/DnBTW/)

# mysql - 除了函数不适用于 mySQL

> ID：10921477
> 
> 赞同：0
> 
> 时间：2012-06-06T20:11:11.630
> 
> 标签：mysql, sql, asp.net-mvc-3, linq

我正在使用 mySQL。除了函数不适用于 mySQL。除了函数返回与在表上选择的内容相反的内容。有没有等价物？
例子：

```
var tmp = db.table1.Where(x=>x.ID=1);    
var tmp2 = db.table1.Except(tmp); 
```

tmp2 将具有 table1 的所有值，除了 ID = 1 。
我尝试过其他 sql 查询，但我不知道如何使用左连接或外连接。
有没有办法让 except 功能起作用？是否有任何等效或算法？

# java - 退出应用程序前按两次返回按钮

> ID：10921495
> 
> 赞同：1
> 
> 时间：2012-06-06T20:12:09.977
> 
> 标签：java, android

如何将后退按钮配置为在应用退出之前按下两次？我想触发

```
@Override
public void onBackPressed() {
    //custom actions
    //display toast "press again to quit app"
    super.onBackPressed();
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-06T20:14:45.330

试试这个：

```
private boolean doubleBackToExitPressedOnce = false;

@Override
protected void onResume() {
    super.onResume();
    // .... other stuff in my onResume ....
    this.doubleBackToExitPressedOnce = false;
}

@Override
public void onBackPressed() {
    if (doubleBackToExitPressedOnce) {
        super.onBackPressed();
        return;
    }
    this.doubleBackToExitPressedOnce = true;
    Toast.makeText(this, "Press twice to exit", Toast.LENGTH_SHORT).show();

} 
```

此代码段还处理活动恢复时的重置状态

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-20T18:23:28.690

我看到这个问题有点老了，但我虽然这可能会帮助一些人寻找已经给出的答案的替代方案。

这就是我处理退出应用程序的方式。如果有人有更好的 - 或谷歌建议的 - 完成此任务的方法，我想知道。

编辑——忘了提到这是针对 Android 2.0 及更高版本的。对于以前的版本，覆盖`onKeyDown(int keyCode, KeyEvent event)`并检查`keyCode == KeyEvent.KEYCODE_BACK`. [这](http://android-developers.blogspot.com/2009/12/back-and-other-hard-keys-three-stories.html "这里")是一个很好的检查链接。

```
private boolean mIsBackEligible = false;

@Override
public void onBackPressed() {

    if (mIsBackEligible) {

        super.onBackPressed();

    } else {

        mIsBackEligible = true;
        new Runnable() {
            // Spin up new runnable to reset the mIsBackEnabled var after 3 seconds
            @Override
            public void run() {
                CountDownTimer cdt = new CountDownTimer(3000, 3000) {
                    @Override
                    public void onTick(long millisUntilFinished) { 
                        // I don't want to do anything onTick
                    }

                    @Override
                    public void onFinish() {
                        mIsBackEligible = false;
                    }
                }.start();
            }
        }.run(); // End Runnable()

        Toast.makeText(this.getApplicationContext(),
                "Press back once more to exit", Toast.LENGTH_SHORT).show();

    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T20:14:52.333

你可以用一个全局整数来做你所要求的事情，然后计算它，如果 > 2，退出。

但是您可以采取更好的（IMO）方法，询问用户是否愿意退出：

```
private void questionQuit(){
    final CharSequence[] items = {"Yes, quit now", "No, cancel and go back"};

    builder = new AlertDialog.Builder(mContext);
    builder.setCancelable(false);
    builder.setTitle("Are you sure you want to quit?");
    builder.setItems(items, new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int item) {
            switch(item){
            case 0:
                quit();
                break;
            case 1:
            default:
                break;
            }
        }
    }).show();
    AlertDialog alert = builder.create();

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T20:31:51.007

```
@Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (event.getAction() == KeyEvent.ACTION_DOWN) {
            switch (keyCode) {
            case KeyEvent.KEYCODE_BACK :
                int i = 0 ;
                   if(i == 1 )
                      {
                       finish();
                      }
                     i++;

                return true;
            }
        }
        return super.onKeyDown(keyCode, event);
    } 
```

# model-view-controller - 迷失在一个简单的 MVC 案例中 - 我如何返回多个用户？

> ID：10921498
> 
> 赞同：0
> 
> 时间：2012-06-06T20:12:32.737
> 
> 标签：model-view-controller, oop, architecture

我不确定哪个标题更具描述性，所以我保持这种方式。我觉得有点迷失在 MVC 的世界里。

仅供参考：我使用 PHP，但在这种特殊情况下这似乎并不重要。

我的问题如下：

我有一个包含以下方法的 UserController：

*   登录
*   新的
*   显示
*   概述

然后我有我的 UserModel，包含 - 在这种情况下 - 大致相同的方法：

*   登录
*   创造
*   拿来

问题是：一旦从数据库（或 XML 提要、Web 服务或其他...）中获取我的用户数据，我该如何保存？我想到了一个用户“业务对象”，其中包含数据库中的所有（相关）属性。然后，当从数据库中获取用户时，我为我获取的每个用户实例化一个新的用户对象。如果只有 1 个用户从搜索中返回，我只返回 User 对象。如果返回更多用户，我会实例化一个包含所有用户对象的 UserCollection 对象——在这种情况下，我可以迭代它们，等等。

这是在 MVC 中与用户打交道的正确方法吗？

然后：假设我对 10 个用户进行了概述。其中 5 个被一次编辑 - 想象一下使用复选框修改状态。如何处理更改？我是否遍历所有更改的用户对象并将它们存储回数据库中？然后它会开始看起来像是 Active Record 模式的实现，我被告知不要使用它。

我希望有人能澄清我需要哪些类和/或方法来解决这个“架构”问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T03:10:40.653

因为这是一个相当冗长的讨论。我将给出我在 MVC 上写的一篇文章的链接，试图用简单的术语来解释它。你可能想看看它。

[MVC 模式是关于什么的？](http://www.nazar-merza.com/index.php/getting-started/73-what-is-mvc-pattern-about)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-07T10:04:08.970

如果我理解正确，您的 UserModel 有点不对劲；
MVC 的模型部分旨在作为现实世界模型的编程表示。
含义-它代表了现实世界主体的所有*属性*和*动作*。经典的例子是`Car`类，它具有诸如 ,`Wheel`之类的属性和诸如等之类`CurrentSpeed`的动作。 `GoForward()``GoReverse()`

因此，就您而言，我认为您的模型应该是您所描述的“用户业务对象”。
您的控制器将负责`UserModel`从存储（或任何地方）获取 s，并将它们更新回来。

您的工作流程将是这样的：
`View`将调用`Controller`'s `GetUsers`。 `Controller`进入存储，并获取`UserModel`s 的列表。
`Controller`将它们返回到视图。
`View`以某种方式显示它们。

而反过来更新。
该类`UserModel`将负责与单个用户相关的逻辑（例如 - `ChangePassword()`）。

# batch-file - 批处理文件：在一行上设置多个命令

> ID：10921499
> 
> 赞同：2
> 
> 时间：2012-06-06T20:12:37.727
> 
> 标签：batch-file

我有一个框架，我只能通过 PowerShell 运行东西，但我需要运行批处理文件命令。我正在尝试运行 PowerShell 脚本，例如：

```
cmd /c blah 
```

因为`blah`我想做类似的事情：

```
set myPath = c:\theDir && if not exist %myPath% mkdir %myPath% 
```

这在我第一次运行时不起作用，因为该`set`命令似乎直到第二行才生效。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T09:41:39.713

这是因为在*解析*`cmd`行时评估变量，而不是在*运行*时。要获得后一种行为，您必须使用延迟扩展：

 **```
cmd /c /v:on "set MyPath=C:\theDir&& if not exist "!myPath!" mkdir "!myPath!" 
```

另请注意，您不能`=`在 a周围有空格`set`，否则您将创建一个末尾带有空格的变量名（也就是说，您的方法无论如何都不会奏效）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T20:16:16.640

```
for %d in (some\path and\maybe\another\one) do @if not exist "%d" md "%d" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-22T13:04:47.317

你也可以这样做

```
SET _KillElevated=1& SET _KillWithGrace=1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-09T13:06:33.453

您还可以在运行多个命令之前定义延迟扩展。这样你就不必打开一个新的 CMD 实例：

```
Setlocal EnableDelayedExpansion
set say=Hello && echo !say! && echo Done! 
```**

# jquery - 在滚动事件上使用 jQuery 滑动 div

> ID：10921500
> 
> 赞同：2
> 
> 时间：2012-06-06T20:12:37.837
> 
> 标签：jquery

我正在使用 jQuery 淡入页面底部的“幻灯片”，它是一个应该贴在右侧的小标签。我目前正在延迟淡入淡出，但我想在用户向下滚动时淡入淡出。

但是，这会保持 div 在页面上滑动，而不是让它粘在一边。

```
 $(function() {
        var slide = $("div[data-slide='true']");

        $(window).scroll(function() {
            var pos = $(document).scrollTop();
            console.log(pos);
            if ($(document).scrollTop() > 400) {
                 slide.animate({opacity: 1,right:'+=350'},1350, 'swing').stop();

           } else {
                 slide.clearQueue().animate({opacity: 0,right:'-=350'},500, 'easeOutBounce');
           }
        });

    }); 
```

到达初始航路点后如何停止滑行？我似乎能够解除滚动事件的绑定，`$(window).unbind('scroll');`但幻灯片永远不会动画。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T22:04:33.893

每次触发滚动事件时，您都会开始一个新的动画到 +350px，这就是它在页面上移动的原因。
我做了一个小测试来防止这种情况。我基本上添加了两个变量（打开和关闭）以防止动画多次启动，并对动画本身进行了一些更改：

演示：http:
[//jsfiddle.net/B7pJL/1/](http://jsfiddle.net/B7pJL/1/)

JS：

```
var slide = $("div[data-slide='true']");
var opening = false;
var closing = false;
$(window).scroll(function() {
    var pos = $(window).scrollTop();
    console.log(pos);
    if (pos > 100) {
        if (!opening) {
            opening = true; closing = false;
            slide.stop().animate({
                opacity: 1,
                'margin-left': -350
            }, 1350, function() {
                opening = false;
            });
        }

    } else {
        if (!closing) {
            closing = true; opening = false;
            slide.stop().animate({
                opacity: 0,
                'margin-left': 0
            }, 500, function() {
                closing = false;
            });
        }
    }
});​ 
```

# asp.net - 无法将“ ”添加到网站。访问被拒绝 (550)

> ID：10921501
> 
> 赞同：4
> 
> 时间：2012-06-06T20:12:38.830
> 
> 标签：asp.net, asp.net-mvc, visual-studio-2010, deployment, ftp

当我尝试通过 Visual Studio 发布项目时，我在谷歌搜索错误后得到“**访问被拒绝（550）** ”，我知道问题出在 ftp 权限上，因为它是只读的。但我无法在 Visual Studio 中看到只读权限属性并取消选中它以授予其完全权限。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T20:15:38.253

这听起来像是 FTP 站点本身的设置，而不是 Visual Studio 问题。您使用的 FTP 帐户可能不允许您写入。

我喜欢发布到我计算机上的目录，然后与我的系统管理员一起确定将数据发送到服务器的最佳方式（例如，他通过允许写入的 FTP 帐户和远程桌面允许我访问。）。然后我只是物理移动文件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-06T20:17:05.290

在部署应用程序时，您必须将 FTP 文件夹中的写入权限授予您正在使用的用户。

可以在此处查看逐步检查的更完整答案：[http ://forums.asp.net/post/3966123.aspx](http://forums.asp.net/post/3966123.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-01T21:17:25.537

我有同样的问题。通过确保当您发布>连接时，被动模式框被选中来解决。问题解决了

# android - Android - 底部的背景

> ID：10921504
> 
> 赞同：0
> 
> 时间：2012-06-06T20:12:58.163
> 
> 标签：android, image, layout, background

我想要一个 android 应用程序，它的背景图像位于视图的底部。希望这可以通过仅使用 XML 来实现。

我的背景图片 (bg.png) 位于文件夹“res/drawable-mdpi”中。XML 代码现在是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="horizontal" >

<ImageView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/bg"
    android:layout_alignParentBottom="true"
    android:layout_marginBottom="0dip" />
</LinearLayout> 
```

但这是在整个页面上拉伸整个图像。我只希望它在水平方向上拉伸。高度必须与（拉伸的）宽度成比例。这个图像必须是视图/布局的**背景**，我想继续使用布局并向其中添加项目/对象。

我希望有人可以帮助我，我已经在互联网上寻找了几个小时，但我找不到比现在更有帮助的东西了。

提前致谢，

丹尼斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T20:15:12.470

首先将您的 LinearLayout 更改为 RelativeLayout（android:layout_alignParentBottom 仅适用于 RelativeLayout）。

其次在 ImageView 上使用 android:src="@drawable/bg" （不是背景）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T20:16:53.197

如果您真的想使用 LinearLayout，可以尝试将此属性添加到您的 imageview`android:layout_gravity="bottom"`

# java - 创建一个将 JLabel 返回到主 JFrame 的自定义函数？

> ID：10921508
> 
> 赞同：0
> 
> 时间：2012-06-06T20:13:13.843
> 
> 标签：java, oop, scope, jframe, jlabel

我希望我能记得包括我所有的细节，所以就这样吧。

我正在使用Java，我正在创建自己的界面，主窗口是JFrame，背景附加到JFrame，背景图像（如JLabel）与窗口完全吻合。然后我有一个附加到背景 Jlabel 的图像作为“开始”按钮。我的问题是我想创建一个自定义类，以方便每个按钮在其自己的类中发挥作用。

所以我不想在主类中有对按钮做出反应的函数，而是创建一个可以添加到背景的类......这是我的代码也许有人可以给我一个例子，我可以弄清楚其余的或指出我正确的方向。

**以下代码包含原始代码，请提供一个示例，说明如何更改它以将事件侦听器封装在 Jlabel 按钮的自己的类中**

```
 import java.awt.*;

    import java.awt.event.*;

    import javax.swing.*;

    public class pipboy{

    public static void main(String[] args){
    pipboy pipboy_os = new pipboy();
    pipboy_os.runmain();
}

public void runmain(){
    //Create and set up the window.
    JFrame frame = new JFrame("PIPBOY Research v0.0.03");

    //background
        ImageIcon background = new ImageIcon("UI/background/default.png");
        JLabel label=new JLabel(background);

    //radiation animated
    ImageIcon animated_loading = new ImageIcon("UI/icon/loading/loading.png");
    JLabel animated_icon = new JLabel(animated_loading);
    animated_icon.setSize(128, 128);
    animated_icon.setLocation(300, 125);

    //Buff arm guy icon
    ImageIcon icon_loading = new ImageIcon("UI/icon/34.png");
    JLabel icon = new JLabel(icon_loading);
    icon.setSize(128, 128);
    icon.setLocation(300, 50);

    label.add(icon);
    label.add(animated_icon);
    frame.add(label);

    //Display the window.
    frame.pack();
    frame.setVisible(true);

    //Full screen
     frame.setSize(800,480);
    frame.setExtendedState(Frame.MAXIMIZED_BOTH); 

    //Set default close operation for JFrame
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    //This is the handler class i made but i want it in its own class with the buff arm icon picure so it can do something specific when the image is pressed
    HandlerClass handler = new HandlerClass();
    frame.addMouseListener(handler);
    frame.addMouseMotionListener(handler);
}

private static class HandlerClass implements MouseListener, MouseMotionListener{
    public void mouseClicked(MouseEvent event){
        System.out.println(String.format("Clicked at %d,%d", event.getX(), event.getY()));
    }

    public void mousePressed(MouseEvent event){

    }

    public void mouseReleased(MouseEvent event){

    }

    public void mouseEntered(MouseEvent event){

    }

    public void mouseExited(MouseEvent event){

    }

    public void mouseDragged(MouseEvent event){

    }

    public void mouseMoved(MouseEvent event){

    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T20:07:15.697

显然我不知道多态性在 Java 中是如何工作的，但这是我的解决方案（更改了一些名称）

```
import javax.swing.*;

class GUItests{
    public JFrame mainContainerFrame;

    public static void main(String[] args){
        GUItests mainController = new GUItests();
        mainController.startGUI();
    }

    public void startGUI(){
        mainContainerFrame = new JFrame("test Frame");

        mainContainerFrame.setSize(800,480);
        mainContainerFrame.pack();
        mainContainerFrame.setVisible(true);

        mainContainerFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JLabel customButtonVar = customButton();
        mainContainerFrame.getContentPane().add(customButtonVar);

    }

    public JLabel customButton(){
        JLabel icon = new JLabel("testing");
        icon.setSize(128, 128);
        icon.setLocation(300, 50);
        return icon;
    }

} 
```

# jquery - fancybox v2 缩略图库在 IE <=8 中不起作用（href 为空或不是对象）

> ID：10921509
> 
> 赞同：0
> 
> 时间：2012-06-06T20:13:15.153
> 
> 标签：jquery, fancybox, fancybox-2

我的画廊在除 IE<=8 之外的所有浏览器中都能正常工作。下面是我的锚标记点击事件以及我在 IE8 中查看时收到的错误消息。

有什么想法吗？

锚标记：

```
<a href="#" id="showPics">View<br />12-Picture<br />Portfolio</a> 
```

JS点击事件：

```
$('#showPics').click(function () {
        $.fancybox([
                {
                    'href': '/Images/Top20/01.jpg',
                    'title': '1 of 12'
                },
                {
                    'href': '/Images/Top20/02.jpg',
                    'title': '2 of 12'
                },
                {
                    'href': '/Images/Top20/03.jpg',
                    'title': '3 of 12'
                },
                {
                    'href': '/Images/Top20/04.jpg',
                    'title': '4 of 12'
                },
                {
                    'href': '/Images/Top20/05.jpg',
                    'title': '5 of 12'
                },
                {
                    'href': '/Images/Top20/06.jpg',
                    'title': '6 of 12'
                },
                {
                    'href': '/Images/Top20/07.jpg',
                    'title': '7 of 12'
                },
                {
                    'href': '/Images/Top20/08.jpg',
                    'title': '8 of 12'
                },
                {
                    'href': '/Images/Top20/09.jpg',
                    'title': '9 of 12'
                },
                {
                    'href': '/Images/Top20/10.jpg',
                    'title': '10 of 12'
                },
                {
                    'href': '/Images/Top20/11.jpg',
                    'title': '11 of 12'
                },
                {
                    'href': '/Images/Top20/12.jpg',
                    'title': '12 of 12'
                },
        ], {

            prevEffect: 'none',
            nextEffect: 'none',
            padding: '3',
            mouseWheel: 'true',
            helpers: {
                title: {
                    type: 'outside'
                },
                overlay: {
                    opacity: 0.8,
                    css: {
                        'background-color': '#000'
                    }
                },
                thumbs: {
                    width: 85,
                    height: 85
                }
            }
        });

    }); 
```

来自 IE8 的错误消息：

![错误信息](../Images/d44cb21b7e1772764517ae9a125ce669.png)

Fancybox.js 代码

![fancybox_thumbs_js_line41](../Images/3692b871db9c0784e29fa594cecdb9e9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T20:19:49.030

尝试删除 href 字符串开头的“/”字符

# java - 将片段更改为 RoboGuice 片段？

> ID：10921512
> 
> 赞同：0
> 
> 时间：2012-06-06T20:13:23.813
> 
> 标签：java, android, roboguice

我正在尝试在我的应用程序中使用 RoboGuice。我的第一个尝试是将一个简单的 Fragment 更改为 RoboFragment。但是在应用程序无法编译之后。这里可能是什么问题？

```
class MyFragment extends RoboFragment {

        @InjectView(R.id.progress_bar) private static ProgressBar progressBar;
    } 
```

结果是：

```
 E/AndroidRuntime(1237): java.lang.RuntimeException: Unable to start activity 
ComponentInfo{path.to.MyApp}: android.view.InflateException: Binary XML file line #34: 
Error inflating class fragment
. 
```

/编辑：

我认为我的问题是在进度条片段中我正在这样做：

```
public static void setProgressBar(Activity parent, int visible) {
    progressBar = (ProgressBar) parent.findViewById(R.id.progress_bar);
} 
```

这可能不适用于 RoboGuice 注入？

```
06-10 12:06:23.063: E/AndroidRuntime(676): FATAL EXCEPTION: main
06-10 12:06:23.063: E/AndroidRuntime(676): java.lang.RuntimeException: Unable to start activity ComponentInfo{MyActivity}: android.view.InflateException: Binary XML file line #42: Error inflating class fragment
06-10 12:06:23.063: E/AndroidRuntime(676):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
06-10 12:06:23.063: E/AndroidRuntime(676):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
06-10 12:06:23.063: E/AndroidRuntime(676):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
06-10 12:06:23.063: E/AndroidRuntime(676):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
06-10 12:06:23.063: E/AndroidRuntime(676):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-10 12:06:23.063: E/AndroidRuntime(676):  at android.os.Looper.loop(Looper.java:137)
06-10 12:06:23.063: E/AndroidRuntime(676):  at android.app.ActivityThread.main(ActivityThread.java:4424)
06-10 12:06:23.063: E/AndroidRuntime(676):  at java.lang.reflect.Method.invokeNative(Native Method)
06-10 12:06:23.063: E/AndroidRuntime(676):  at java.lang.reflect.Method.invoke(Method.java:511)
06-10 12:06:23.063: E/AndroidRuntime(676):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-10 12:06:23.063: E/AndroidRuntime(676):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-10 12:06:23.063: E/AndroidRuntime(676):  at dalvik.system.NativeStart.main(Native Method)
06-10 12:06:23.063: E/AndroidRuntime(676): Caused by: android.view.InflateException: Binary XML file line #42: Error inflating class fragment
06-10 12:06:23.063: E/AndroidRuntime(676):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:697)
06-10 12:06:23.063: E/AndroidRuntime(676):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
06-10 12:06:23.063: E/AndroidRuntime(676):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:742)
06-10 12:06:23.063: E/AndroidRuntime(676):  at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
06-10 12:06:23.063: E/AndroidRuntime(676):  at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
06-10 12:06:23.063: E/AndroidRuntime(676):  at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
06-10 12:06:23.063: E/AndroidRuntime(676):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:251)
06-10 12:06:23.063: E/AndroidRuntime(676):  at com.actionbarsherlock.internal.ActionBarSherlockNative.setContentView(ActionBarSherlockNative.java:119)
06-10 12:06:23.063: E/AndroidRuntime(676):  at com.actionbarsherlock.app.SherlockFragmentActivity.setContentView(SherlockFragmentActivity.java:251)
06-10 12:06:23.063: E/AndroidRuntime(676):  at MyActivity.onCreate(MyActivity.java:109)
06-10 12:06:23.063: E/AndroidRuntime(676):  at android.app.Activity.performCreate(Activity.java:4465)
06-10 12:06:23.063: E/AndroidRuntime(676):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
06-10 12:06:23.063: E/AndroidRuntime(676):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
06-10 12:06:23.063: E/AndroidRuntime(676):  ... 11 more
06-10 12:06:23.063: E/AndroidRuntime(676): Caused by: java.lang.IllegalArgumentException: MyActivity@412f8b38 does not appear to be a RoboGuice context (instanceof RoboContext)
06-10 12:06:23.063: E/AndroidRuntime(676):  at roboguice.inject.ContextScope.getScopedObjectMap(ContextScope.java:147)
06-10 12:06:23.063: E/AndroidRuntime(676):  at roboguice.inject.ContextScope.enter(ContextScope.java:79)
06-10 12:06:23.063: E/AndroidRuntime(676):  at roboguice.inject.ContextScopedRoboInjector.injectMembersWithoutViews(ContextScopedRoboInjector.java:241)
06-10 12:06:23.063: E/AndroidRuntime(676):  at roboguice.fragment.RoboFragment.onCreate(RoboFragment.java:13)
06-10 12:06:23.063: E/AndroidRuntime(676):  at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:834)
06-10 12:06:23.063: E/AndroidRuntime(676):  at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1058)
06-10 12:06:23.063: E/AndroidRuntime(676):  at android.support.v4.app.FragmentManagerImpl.addFragment(FragmentManager.java:1156)
06-10 12:06:23.063: E/AndroidRuntime(676):  at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:270)
06-10 12:06:23.063: E/AndroidRuntime(676):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:669)
06-10 12:06:23.063: E/AndroidRuntime(676):  ... 23 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T12:08:20.140

为什么“progressBar”字段是静态的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T00:53:59.587

如果您发布包含所有异常的完整 logcat 输出，我们可以尝试找出您应该修复哪一个。xml inflate 第 34 行包含您的 .fragment，logcat 输出中的片段应该显示异常，告诉您片段中的哪一行包含错误。

你的堆栈跟踪说

> 06-10 12:06:23.063: E/AndroidRuntime(676): Caused by: java.lang.IllegalArgumentException: MyActivity@412f8b38 似乎不是 RoboGuice 上下文（RoboContext 实例）

您的活动是 RoboFragmentActivity 吗？

# r - 为 data.frame 的每一行获取不同的列

> ID：10921515
> 
> 赞同：2
> 
> 时间：2012-06-06T20:13:29.137
> 
> 标签：r, dataframe, posixct

我有`data.frame`一个任意数量的列，我需要一种从每一行中获取不同列（只有一个）的方法。例如，如果我有`data.frame`这样的：

```
myDF <- data.frame(A=letters[1:5], B=letters[6:10], C=LETTERS[26:22], stringsAsFactors=FALSE) 
```

我想抓取字母 a、g、c、W 和 V。

如果这是一个`matrix`很容易解决的问题。

```
myDF[cbind(c(1, 2, 3, 4, 5), c(1, 2, 1, 3, 3))] 
```

但是我必须将数据存储在 a 中，`data.frame`因为数据通常是 a`POSIXlt`而我还​​没有找到将其中的 a 转换为 a`data.frame`的方法`matrix`。

有没有人有一个不用逐行循环的好方法？我有很多失败的尝试，我很乐意分享。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T21:25:54.327

它不善言辞，但它适用于特别困难的日期：

```
vect <- do.call(c, args=as.list(myDF))
vect[(1:NROW(myDF)) + NROW(myDF) * (c(1, 2, 1, 3, 3) - 1)] 
```

# javascript - Requirejs jQuery 覆盖了 wordpress 加载的 jQuery，我怎样才能避免这种情况（通过调用 noConflict(true) ）？

> ID：10921520
> 
> 赞同：3
> 
> 时间：2012-06-06T20:13:43.033
> 
> 标签：javascript, jquery, requirejs

我在我的 wordpress 插件中使用了 jQuery 版本的 require.js，但是来自 requirejs 的 jQuery 覆盖了 wordpress 加载的 jQuery。我如何告诉 requirejs 使用的 jQuery 调用自身`noConflict( true )`，以便它不会覆盖 wordpress 加载的版本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T10:28:06.700

最后我做了这样的事情：

像这样创建一个配置文件

```
requirejs.config( {
    "paths": { 
        "jquery": "require_jquery"
    },
    "shim": {
        "jquery-cookie"  : ["jquery"],
        "bootstrap-tab"  : ["jquery"],
        "bootstrap-modal": ["jquery"],
        "bootstrap-alert": ["jquery"]
    }
} ); 
```

像这样创建一个 require_jquery.js 文件

```
define(["jquery-1.7.2"], function() {
    // Raw jQuery does not return anything, so return it explicitly here.
    return jQuery.noConflict( true );
}) 
```

然后正常使用jquery。一切正常，jQuery 的外部版本保持不变。

# objective-c - 如何使用 FTP 和 Objective-C 上传图像？（mac应用程序，不是iOS）

> ID：10921523
> 
> 赞同：0
> 
> 时间：2012-06-06T20:13:56.103
> 
> 标签：objective-c, macos, osx-lion

有谁知道是否有我可以使用的内置方法/对象或现有库？我有主机、帖子、用户名、密码、图像路径（本地）和目标路径（远程）。服务器支持'sftp'和'ftp'，我不认为我可以通过http上传。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T20:18:20.870

这很容易。CFFTPSample（PS 还是 SimpleFTPSample？） - XCode 文档中的演示应用程序。运行它，它完全符合您的要求。

或阅读文章：[使用 FTP 服务器](http://developer.apple.com/library/ios/#documentation/Networking/Conceptual/CFNetwork/CFFTPTasks/CFFTPTasks.html)

# ruby-on-rails-3 - Rails 找到 HABTM 关联为 nil 的位置

> ID：10921524
> 
> 赞同：1
> 
> 时间：2012-06-06T20:13:59.697
> 
> 标签：ruby-on-rails-3, scope, has-and-belongs-to-many

我有`Popup`一个`User`HABTM 协会。

我正在尝试为此编写一个范围`Popup`，如下所示：`Popup.not_seen_by(current_user).first`

不幸的是，我下面的实现不起作用。我觉得我走在正确的轨道上，有人愿意帮助我克服这最后一道障碍吗？

```
class Popup < ActiveRecord::Base
  has_and_belongs_to_many :users, :uniq => true

  scope :not_seen_by, lambda { |user| 
    # This does NOT work
    joins("LEFT JOIN popups_users ON popups.id = popups_users.popup_id").
    where("popups_users.user_id != ?", user.id)
  }
end 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T09:35:06.503

您在正确的轨道上，但是您正在加入 popups_users 中具有匹配 popup_id 的每一行（即不包含您的 user_id 的行），因此返回同一弹出窗口的多个实例。这应该是您正在寻找的：

```
scope :not_seen_by, lambda { |user| where('id NOT IN (select popup_id 
                                                  from popups_users 
                                                  where user_id = ?)',user.id) } 
```

不太清楚为什么我原来的“IN”版本不起作用。NOT IN 通常很慢，所以你可能也想试试这个，它应该是等效的并且可能更快：

```
scope :not_seen_by, lambda { |user| where('NOT EXISTS (select 1 
                                                  from popups_users
                                                  where popups_users.popup_id = popups.id
                                                  and user_id = ?)',user.id) } 
```

# javascript - JSON 到 Backbone.js 模型

> ID：10921528
> 
> 赞同：1
> 
> 时间：2012-06-06T20:14:07.397
> 
> 标签：javascript, json, backbone.js

如何将 JSON 发送到模型的初始化？我正在尝试根据表单使模型动态化：

```
v = new ModelObject($('#form-id').serializeJSON()); 
```

但这会将表单数据存储为一个属性和一个对象。我想使用 JSON 属性作为模型属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T20:24:11.643

您需要获得更好的序列化程序。我构建了一个名为 Syphon 的设备，专门用于骨干网：

[https://github.com/derickbailey/backbone.syphon](https://github.com/derickbailey/backbone.syphon)

```
 var data = Backbone.Syphon.serialize(someViewWithAForm);

var model = new Backbone.Model(data); 
```

或者 Ben Alman 的`serializeObject`jQuery 扩展：[http ://benalman.com/projects/jquery-misc-plugins/#serializeobject](http://benalman.com/projects/jquery-misc-plugins/#serializeobject)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T22:49:53.530

您可以使用以下代码使用表单数据填充模型：

```
var data = {};
$.each(this.$("#formId").serializeArray(), function(index, val) {
  data[val.name] = val.value;
}); 
```

然后用数据调用保存或初始化模块。

```
var demo = new My.Dynamic.Model(data); 
```

或者

```
var demo = new My.Dynamic.Model();
demo.save(data); 
```

# c - 基本的 unix 服务器-客户端 IPC（消息队列）问题

> ID：10921535
> 
> 赞同：0
> 
> 时间：2012-06-06T20:14:27.690
> 
> 标签：c, unix, client, ipc

我正在解决一个问题，这意味着一个基本的正在运行的服务器客户端（之前做过一个）。问题是我运行服务器而不是运行客户端。我的 msg Que 是在两个客户端都将我的字符作为输入发送它时创建的，我得到确认打印但我的服务器 msgrcv 没有响应。

sc

```
#include <stdio.h>
#include <stdlib.h>
#include <sys/types.h>
#include <sys/msg.h>
#include <sys/ipc.h>
#include <errno.h>

#include "struc.h"

int main(){
    int qt;
    struct msg m;

    qt = msgget(1271,IPC_CREAT|IPC_EXCL|0600);
    if(qt < 0){ perror("Error MSGGET()\n");}
    printf("msg queue created!\n");

    if(msgrcv(qt,&m,sizeof(struct msg),0,0)<0){
        perror("Msg recive error");
    }   
    printf("msg recived!\n");

    msgctl(qt,IPC_RMID,NULL);
    return 0;
} 
```

抄送

```
#include <stdio.h>
#include <stdlib.h>
#include <sys/types.h>
#include <sys/msg.h>
#include <sys/ipc.h>
#include <errno.h>

#include "struc.h"

int main(){
    int qt;
    struct msg m;
    qt = msgget(1271,0);
    if(qt < 0){ perror("~~~ Error MSGGET()\n");}
    printf("msg created!\n");

    printf("Enter one char: !\n");
    scanf("%c",&m.c);

    msgsnd(qt, &m,sizeof(struct msg),0);
    printf("msg sent!\n");
return 0;
} 
```

结构体

```
struct msg{
    long mtype;
//  matrix M;
    char c;
}; 
```

（通过创建 3 个文件，您可以自己进行测试。欢迎任何想法，也许我错过了一些东西）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T21:33:35.120

您应该这样做以验证发送不会失败。

```
 if(msgsnd(qt, &m,sizeof(struct msg),0)) < 0) {
    perror("Msg send error");
  } 
```

您还应该注意 msgsnd 的文档：

```
msgp 参数是指向调用者定义的结构的指针
以下一般形式：

       结构 msgbuf {
           长 mtype; /* 消息类型，必须 > 0 */
           字符多文本[1]；/* 消息数据 */
        };

```

也就是说，您必须将您发送的消息中的 mtype 设置为 > 0。目前它未初始化，因此您应该这样做：

```
m.mtype = 1;
if(msgsnd(qt, &m,sizeof(struct msg),0)) < 0) {
   perror("Msg send error");
} 
```

# ruby-on-rails - Rails 回形针和多个文件上传

> ID：10921537
> 
> 赞同：14
> 
> 时间：2012-06-06T20:14:32.390
> 
> 标签：ruby-on-rails, file-upload, amazon-s3, paperclip

我正在寻找一种解决方案，让用户能够通过一个 file_field 上传多个图像。我已经研究过诸如 Jquery File Upload 和 Uploadify 之类的选项，但还没有遇到具有工作解决方案的好例子。

我已经有多个图像设置，

```
 has_attached_file :asset,
                   :styles => { :large => "640x480", :medium => "300x300", :thumb => "100x100" },
                   :storage => :s3,
                   :s3_credentials => "#{Rails.root}/config/s3.yml",
                   :path => "/:contributor_id/:listing_name/:filename" 
```

现在我正在显示 5 个单独的 file_fields

```
def new
  @listing = Listing.new
  5.times {@listing.assets.build }

  respond_to do |format|
    format.html # new.html.erb
    format.json { render json: @listing }
  end
end 
```

我想拥有

```
<%= f.file_field :asset, :multiple => true %> 
```

这允许用户在他们的文件浏览器中选择多个文件。但是如何使用嵌套模型处理这些？并让他们上传。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-06-06T21:30:09.043

所以这里有几个问题。

首先，Paperclip 的`has_attached_file`方法与许多文件没有关联。看起来您正在尝试构建一个“资产”，就好像它是一个 Rails 关联一样。Paperclip 所做的只是将几个字段放入您的表中以存储有关文件的一些元数据，并且每个`has_attached_file`. 如果要附加 5 个文件，则需要执行以下操作：

```
has_attached_file :asset1
has_attached_file :asset2
has_attached_file :asset3
has_attached_file :asset4
has_attached_file :asset5 
```

或者，或者，您可以创建另一个模型来存储文件。例如：

```
class Listing < ActiveRecord::Base
  has_many :assets
end

class Asset < ActiveRecord::Base
  belongs_to :listing
  has_attached_file :picture
end 
```

这样，您可以将多个资产附加到一个列表中（您没有说明原始对象是什么，所以我只是将其称为“列表”）。

其次，在 HTML 中没有多文件上传（因此，该`file_field`方法不带`:multiple => true`参数。如果您想要多文件上传，则必须使用 Rails 内置表单处理之外的东西. Uploadify 是一个不错的选择（我以前使用过）。有一个 gem 可以转换文件字段以使用 uploadify （并将支持`:multiple => true`您想要的语法）：[https ://github.com/mateomurphy/uploadify_rails3/ wiki](https://github.com/mateomurphy/uploadify_rails3/wiki) . 但是，我不能保证它有多好。

我的建议是逐步开始。通过 Flash 上传到 Rails 可能是一个复杂的过程，涉及处理 CSRF 元标记和表单中的其他字段。首先制作一个表单，允许用户上传一个文件并通过 Paperclip 存储它。然后可以将`has_attached_file`声明分解为另一个模型，以便您可以拥有一个或多个与模型关联的文件（如上面的多模型代码块所示）。然后尝试添加 Uploadify 或其他替代方法。Ernie Miller 有一个关于集成 Uploadify 的不错的教程：http: [//erniemiller.org/2010/07/09/uploadify-and-rails-3/](http://erniemiller.org/2010/07/09/uploadify-and-rails-3/)。

首先，请记住`has_attached_file`只能附加*一个*文件。当您尝试调用`@listing.assets`时，没有“资产”。有*资产*。如果需要多个文件，您需要自己创建一个单独的模型并使用 Rails 的关联。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-01-10T05:26:01.183

接受的答案说没有像 HTML 中的多个文件上传这样的东西。

```
<%= f.file_field :files, multiple: true %> 
```

这允许您选择多个图像并将它们作为数组发送。

如果您有 和 的关系`Dog has_many Images`，`Image has_attachment :file`请执行此操作以一次上传多张图片：

在你的 html.erb

```
<%= form_for @dog, html: { multipart: true } do |f| %>
  <%= f.file_field :files, accept: 'image/png,image/jpeg,image/gif', multiple: true %>
<%= end %> 
```

在您的控制器中

```
def dog_params
  params.require(:dog).permit files: []
end 
```

在您的 Dog 模型中

```
def files=(array = [])
  array.each do |f|
    images.create file: f
  end
end 
```

这是假设您已经能够上传一张图片但想一次升级到多张图片。请注意，等待时间会增加。

为了帮助减少等待时间，请查看我关于这个与速度上传相关的问题的**[帖子。](https://stackoverflow.com/a/41866644/4812050)**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-03-08T18:13:38.127

这是多个文件上传的完整示例。这里一个`user has_many uploads`. 每个`upload`模型都有一个`avatar`代表文件附件的。最终：`uploads`当我们创建`user`.

**模型**

```
#models/user.rb
class User < ApplicationRecord
  has_many :uploads

  def files=(array_of_files = [])
    array_of_files.each do |f|
      uploads.build(avatar: f, user: self)
    end
  end
end

#models/upload.rb
class Upload < ApplicationRecord
  belongs_to :user

  has_attached_file :avatar
  validates_attachment_content_type :avatar, :content_type => ["image/png"]
end 
```

**表格：**

```
# views/users/_form.html.erb
<%= form_with(model: user, local: true) do |form| %>

  ...

  <div class="field">
    <%= form.file_field :files, multiple: true %>
  </div>

  <div class="actions">
    <%= form.submit %>
  </div>
<% end %> 
```

**控制器**

```
class UsersController < ApplicationController
  before_action :set_user, only: [:show]

  def show
  end

  def new
    @user = User.new
  end

  def create
    @user = User.new(user_params)

    if @user.save
      redirect_to @user, notice: 'User was successfully created.'
    end
  end

  private
    def set_user
      @user = User.find(params[:id])
    end

    def user_params
      params.require(:user).permit(:name, files: [])
    end
end 
```

**用户#show**

```
<p id="notice"><%= notice %></p>

<p>
  <strong>Name:</strong>
  <%= @user.name %>
</p>

<h3>Uploads</h3>
<div>
  <% @user.uploads.each do |upload|  %>
    <div>
      <%= link_to upload.avatar.url do%>
        <%= upload.avatar_file_name %>
      <% end %>
    </div>
  <% end %>
</div>

<%= link_to 'Edit', edit_user_path(@user) %> |
<%= link_to 'Back', users_path %> 
```

# c - 将 const 关键字添加到作为参数传递给函数的数组

> ID：10921538
> 
> 赞同：17
> 
> 时间：2012-06-06T20:14:37.430
> 
> 标签：c, pointers

有什么方法可以将`const`关键字添加到作为参数传递给函数的数组中：

```
void foo(char arr_arg[]) 
```

如果我放在( )`const`之前或( ) 之后，那将意味着它是恒定的，而不是.`char``void foo(const char arr_arg[])``char``void foo(char const arr_arg[])``char``arr_arg`

我刚刚[读到](http://eli.thegreenplace.net/2009/10/21/are-pointers-and-arrays-equivalent-in-c/)，在后台，作为参数发送给函数的数组表示为指针，因此`void foo(char arr_arg[])`与`void foo(char* ptr_arg)`. 考虑到这一点，我可能会重写该功能，`void foo(char * const ptr_arg)`以使其正是我想要实现的。

但我想知道是否有办法`const`在此声明中添加关键字以`void foo(char arr_arg[])`使其与`void foo(char * const ptr_arg)`（而**不是** `void foo(char const * ptr_arg)`或`void foo(const char * ptr_arg)`）相同？

我只是想了解是否有一种语法可以使`arr_arg`数组表示法保持不变`[]`。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-06T20:24:30.627

在 C中，您必须`const` *在*`[]`

```
void foo(char arr_arg[const]); 
```

这是“新”[的 C99 特定语法](http://en.wikipedia.org/wiki/C99)。在 C89/90 或 C++ 中，无法使用“数组”语法来做到这一点，因此您必须切换到等效的“指针”语法，正如 David 的回答中所建议的那样。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-06T20:23:48.807

第一件事是，在您的特定签名中，编译器将参数转换为指针，因此您拥有的是：

```
void foo( char * arg ); 
```

现在，有两个实体可以在该签名中设为 const：指针和指向的类型。可以通过两种不同但等效的方式将指向的类型设为 const [*]：

```
void foo( const char * arg );
void foo( char const * arg ); 
```

可以使用以下语法将指针设为 const：

```
void foo( char * const arg ); 
```

但请注意，在函数签名中，与`char arg[]`转换为指针的方式相同`char *arg`，顶级限定符被丢弃。所以从声明的角度来看，这两者是等价的：

```
void foo( char * const arg );
void foo( char *       arg ); 
```

在定义中，顶级 const 可用于指示编译器不应在函数内更改参数指针（按值），并且它会检测您是否尝试将指针重置到不同的位置。但是，如果只有指针是 const，那么编译器会很乐意让您修改指向的内存。如果您不希望函数更改数组的内容，那么您应该选择前两个签名之一。

[*] 我更喜欢这种`char const *`格式，因为它提供了一种读取类型的一致方式：从右到左读取：*指向 const char 的非 const 指针*。此外，推理类型定义的类型更简单（通过在表达式中执行直接替换）。给定`typedef char* char_p;`,`const char_p`和`char_p const`既等价于`char * const`又不同于`const char *`。通过始终`const`在右侧使用，您可以盲目地替换 typedef 并读取类型而无需推理。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-06T20:29:11.753

是的，在 C 中，自 C99 以来这是可能的：

```
void foo(char ptr_arg[const]); 
```

是有效的语法并且等价于

```
void foo(char *const ptr_arg); 
```

更一般地说，它`[]`可以包含任何类型限定符`static`和一个整数表达式。但

> 可选类型限定符和关键字`static`应仅出现在具有数组类型的函数参数的声明中，然后仅出现在最外层的数组类型派生中。

那是等效于指针声明的维度。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-06T20:55:00.190

C++ 中有多种方法，但没有一种方法*完全*符合您的预期。

```
//typedef has a very clear intent
typedef char* array;
void f0(const array a) {}

//switch to pointers to sidestep the problem
void f1(char* const a) {}

//references are inherently const
//can't take pointers, but guarantees the size, sometimes nice
//this version obviously doesn't work in C
template<int n>
void f2(char (&a)[n]) {} 
```

[http://ideone.com/4LvYT](http://ideone.com/4LvYT)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T20:51:37.897

对于 C++，Mooing Duck 使用模板的答案是最直接的。

如果您有调用 C++ 中实现的 C 接口的 C 代码，则您只能将参数转换为指针参数，然后将其`const`

如果您要使用[Boost 的数组](http://www.boost.org/doc/html/boost/array.html)而不是直接使用 C 数组，那么您将能够做到这一点`const`，尽管它也是一个模板函数：

```
template <unsigned N>
void foo (Boost::array<char, N> const & arg) {} 
```

的优点`Boost::array`是它使您能够对堆栈中的数组进行轻量级分配，但能够充分使用依赖于容器中特征的 STL 算法。

# html - windows下的静态html

> ID：10921539
> 
> 赞同：2
> 
> 时间：2012-06-06T20:14:43.777
> 
> 标签：html, windows, localhost

我在 Windows XP 的文件夹中有一个静态 html 网站。如果我直接从文件所在的位置打开文件，页面会在浏览器中加载，但所有相关链接都不起作用。他们都希望与本地主机相关，而不是他们所在的目录。

我可以将项目放在 IIS 中，它工作正常，但我希望能够跳过该步骤，只需浏览项目而不需要服务器。

但我的问题很简单：有什么我可以做的，以便我可以通过浏览器在本地查看网站，而无需服务器？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T20:18:35.693

`<base>`定义所有相对链接的基本 URL 或目标。它进入`<head>`标签。

对于在一个位置 (dev) 构建网站并最终将放置在另一个位置 (prod) 的开发人员来说，它也很有用。

```
<base href="http://myfolder/test/"> 
```

[在这个SO question](https://stackoverflow.com/questions/1889076/is-it-recommended-to-use-the-base-html-tag)中有一些讨论和更多示例。

# documentation - JDK 文档可离线搜索？

> ID：10921541
> 
> 赞同：0
> 
> 时间：2012-06-06T20:14:47.323
> 
> 标签：documentation, javadoc, java

任何人都可以帮忙吗？

我已将 jdk 文档 (7) 下载到我的电脑上，我可以打开它来查看 html 中的所有包和类，但似乎我无法搜索。

您可以在在线版本上，但它似乎不在离线版本上，或者我可能遗漏了一些东西。

任何人都可以帮助或建议替代方案吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T20:17:57.523

[Microsoft Windows 帮助格式中的 Java 文档](http://java.sun.com/docs/windows_format.html)怎么样？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T20:19:35.543

然后是使用框架的 index.html 并仅使用浏览器搜索来查找类？

# django - 表单中的条件字段

> ID：10921562
> 
> 赞同：5
> 
> 时间：2012-06-06T20:15:57.257
> 
> 标签：django, django-forms

我需要根据用户是否登录来创建一个可能有或没有 ReCaptcha 字段的 Form 类。

因为这是一个 CommentForm，我无法访问`request`表单创建/定义的对象，所以我不能依赖它。

对于`POST`请求，解决方案很简单：我有这个：

```
class ReCaptchaCommentForm(CommentForm):
    def __init__(self, data=None, *args, **kwargs):
        super(ReCaptchaCommentForm, self).__init__(data, *args, **kwargs)
        if data and 'recaptcha_challenge_field' in data:
            self.fields['captcha'] = ReCaptchaField() 
```

完成此操作后，表单验证应该按预期工作。现在的问题在于模板方面。我需要模板是这样的：

```
<form action={% comment_form_target %} method="post">
{# usual form stuff #}
{% if not user.is_authenticated %}
<script  type="text/javascript"
         src="http://www.google.com/recaptcha/api/js/recaptcha_ajax.js"></script>
<div id="recaptcha-div"></div>
<script type="text/javascript">
  Recaptcha.create({{ public_key }}, "recaptcha-div",
                   { theme: 'white',
                     callback: Recaptcha.focus_response_field });
</script>
{% endif %}
</form> 
```

但我不想在每个`comments/*/form.html`模板上重复该代码。我认为应该有某种方法可以从小部件的`render`方法和`Media`定义中添加等效代码。

谁能想到一个很好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T17:35:23.513

我假设您在视图中实例化您的表单，因此您可以将用户从请求传递到表单（就像在 auth app [SetPassword](https://github.com/django/django/blob/master/django/contrib/auth/forms.py#L237)表单中一样）：

```
def __init__(self, user, data=None, *args, **kwargs):
    super(ReCaptchaCommentForm, self).__init__(data, *args, **kwargs)
    if user.is_authenticated():
        self.fields['captcha'] = ReCaptchaField() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T17:51:44.147

使用[酥脆的形式](https://github.com/maraujop/django-crispy-forms)！您可以在表单布局中包含 html 元素，这将允许您根据视图请求上下文排除/包含字段。除此之外还有非常有用的功能。

[这是相关的文档部分。](http://django-crispy-forms.readthedocs.org/en/latest/api_layout.html?#layout.HTML)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T05:02:26.607

我对条件字段所做的是拥有一个基类（继承自`Form`）和其他具有额外条件字段的子类。

然后在我看来，根据条件我选择所需的子类形式。我知道它涉及一些重复的代码，但它似乎比其他方法更容易。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T21:28:02.077

好吧，不幸的是 django-floppyforms 不能访问请求。很高兴知道这是一个选项，因为我最近开始在我自己的项目中使用 django-floppyforms。

除此之外，我能想到的最好的事情就是简单地依赖模板继承。您可以创建一个`comments/form.html`文件，然后让每个文件`comments/*/form.html`扩展它。将 Recaptcha 代码原样放在基础中`form.html`，就可以开始了。

# powershell - 使用powershell脚本从exchage服务器中提取房间日历的报告

> ID：10921563
> 
> 赞同：0
> 
> 时间：2012-06-06T20:16:00.193
> 
> 标签：powershell

我们有大约 90 个房间邮箱作为交换 2010，现在我想使用 powershell 提取交换服务器 2010 中房间的日历报告。报告应包含以下细节。

一个。每个特定房间一周的房间使用情况（使用情况与房间当天可用的小时数有关） b. 每个特定房间一个月的房间使用情况（使用情况与该房间在一周内可用的小时数有关） c．每个用户的预订数量 d. 取消的预订数量 e. 重新安排的预订数量

是否有可能使用exchage服务器中的powershell将具有上述要点的报告导入excel？

如果我从 Outlook 导出房间日历，我只能得到一个房间的报告。是否可以获得所有房间日历的报告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:46:27.277

我做过这样的事情..

您需要安装 Exchange Managed API 才能正常工作。

```
New-ManagementRoleAssignment –Name:impersonationAssignmentName –Role:ApplicationImpersonation –User:serviceAccount 
```

请参阅[http://msdn.microsoft.com/en-us/library/exchange/bb204095%28v=exchg.140%29.aspx](http://msdn.microsoft.com/en-us/library/exchange/bb204095%28v=exchg.140%29.aspx)

运行脚本时，系统将提示您输入凭据。请务必指定域 (DomainName\UserId)

还更改脚本中的 cashub 服务器（或使用自动发现）

另存为 Get-RoomUsage.ps1 可选参数为 -StartDate 和 -Enddate

```
param 
(

[DateTime]$StartDate = (Get-Date).addDays(-30),
[DateTime]$EndDate = (Get-date)

)

$Mailboxes = Get-Mailbox -ResultSize Unlimited -RecipientTypeDetails RoomMailbox #| select -First 10

$rptcollection = @()

## Load Managed API dll  
Add-Type -Path "C:\Program Files\Microsoft\Exchange\Web Services\1.2\Microsoft.Exchange.WebServices.dll"  

## Set Exchange Version  
$ExchangeVersion = [Microsoft.Exchange.WebServices.Data.ExchangeVersion]::Exchange2010_SP2  

## Create Exchange Service Object  
$service = New-Object    Microsoft.Exchange.WebServices.Data.ExchangeService($ExchangeVersion)  

## Set Credentials to use two options are availible Option1 to use explict credentials or Option 2 use the Default (logged On) credentials  

#Credentials Option 1 using UPN for the windows Account  
$psCred = Get-Credential  

$creds = New-Object    System.Net.NetworkCredential($psCred.GetNetworkCredential().username.ToString(),$psCred.GetNetworkCredential().password.ToString(),$psCred.GetNetworkCredential().domain.ToString())  
$service.Credentials = $creds   

#Credentials Option 2  
#$service.UseDefaultCredentials = $true  

## Choose to ignore any SSL Warning issues caused by Self Signed Certificates  

## Code From http://poshcode.org/624
## Create a compilation environment
$Provider=New-Object Microsoft.CSharp.CSharpCodeProvider
$Compiler=$Provider.CreateCompiler()
$Params=New-Object System.CodeDom.Compiler.CompilerParameters
$Params.GenerateExecutable=$False
$Params.GenerateInMemory=$True
$Params.IncludeDebugInformation=$False
$Params.ReferencedAssemblies.Add("System.DLL") | Out-Null

$TASource=@'
  namespace Local.ToolkitExtensions.Net.CertificatePolicy{
    public class TrustAll : System.Net.ICertificatePolicy {
      public TrustAll() { 
      }
      public bool CheckValidationResult(System.Net.ServicePoint sp,
        System.Security.Cryptography.X509Certificates.X509Certificate cert, 
        System.Net.WebRequest req, int problem) {
        return true;
      }
    }
  }
'@ 
$TAResults=$Provider.CompileAssemblyFromSource($Params,$TASource)
$TAAssembly=$TAResults.CompiledAssembly

## We now create an instance of the TrustAll and attach it to the ServicePointManager
$TrustAll=$TAAssembly.CreateInstance("Local.ToolkitExtensions.Net.CertificatePolicy.TrustAll")
[System.Net.ServicePointManager]::CertificatePolicy=$TrustAll

## end code from http://poshcode.org/624

## Set the URL of the CAS (Client Access Server) to use two options are availbe to use Autodiscover to find the CAS URL or Hardcode the CAS to use  

#CAS URL Option 1 Autodiscover  
#$service.AutodiscoverUrl($MailboxName,{$true})  
#"Using CAS Server : " + $Service.url   

#CAS URL Option 2 Hardcoded  

$uri=[system.URI] "https://cashubserver/ews/exchange.asmx"  
$service.Url = $uri    

$obj = @{}
$start = Get-Date 
$i = 0
foreach($Mailbox in $Mailboxes)
{
$i +=1
$Duration = (New-TimeSpan -Start ($start) -End (Get-Date)).totalseconds
$TimeLeft = ($Duration/$i)*($mailboxes.count - $i)
Write-Progress -Status "$($Mailbox.DisplayName)" -Activity "Mailbox $i of $($Mailboxes.Count)" -PercentComplete ($i/$($mailboxes.count)*100) -SecondsRemaining $timeleft -Id 100

$WorkingDays = ($Mailbox | Get-mailboxCalendarConfiguration).WorkDays.ToString()
$WorkingHoursStartTime = ($Mailbox |    Get-mailboxCalendarConfiguration).WorkingHoursStartTime
$WorkingHoursEndTime = ($Mailbox | Get-mailboxCalendarConfiguration).WorkingHoursEndTime

if($WorkingDays -eq "Weekdays"){$WorkingDays = "Monday,Tuesday,Wednesday,Thursday,Friday"}
if($WorkingDays -eq "AllDays"){$WorkingDays = "Monday,Tuesday,Wednesday,Thursday,Friday,Saturday,Sunday"}
if($WorkingDays -eq "WeekEndDays"){$WorkingDays = "Saturday,Sunday"}

## Optional section for Exchange Impersonation  
$service.ImpersonatedUserId = new-object Microsoft.Exchange.WebServices.Data.ImpersonatedUserId([Microsoft.Exchange.WebServices.Data.ConnectingIdType]::SmtpAddress, $Mailbox.PrimarySMTPAddress) 

$folderid = new-object Microsoft.Exchange.WebServices.Data.FolderId([Microsoft.Exchange.WebServices.Data.WellKnown    FolderName]::Calendar,$Mailbox.PrimarySMTPAddress.tostring())   
$Calendar = [Microsoft.Exchange.WebServices.Data.Folder]::Bind($Service,$folderid)

if($Calendar.TotalCount -gt 0){
    $cvCalendarview = new-object    Microsoft.Exchange.WebServices.Data.CalendarView($StartDate,$EndDate,2000)
$cvCalendarview.PropertySet = new-object Microsoft.Exchange.WebServices.Data.PropertySet([Microsoft.Exchange.WebServices.Data.BasePropertySet]::FirstClassProperties)

$frCalendarResult = $Calendar.FindAppointments($cvCalendarview)
$inPolicy = New-TimeSpan
$OutOfPolicy = New-TimeSpan
$TotalDuration = New-timespan
$BookableTime = New-TimeSpan
$c = 0
foreach ($apApointment in $frCalendarResult.Items){
     $c +=1
     Write-Progress -Status "$($Mailbox.DisplayName)" -Activity "Mailbox $i of $($Mailboxes.Count)" -PercentComplete ($i/$($mailboxes.count)*100) -SecondsRemaining $timeleft -Id 100 -CurrentOperation "Processing calendarItem $c or $($frCalendarResult.Items.count)"
     $psPropset = new-object Microsoft.Exchange.WebServices.Data.PropertySet([Microsoft.Exchange.WebServices.Data.BasePropertySet]::FirstClassProperties)
     $apApointment.load($psPropset)
     if($apApointment.IsAllDayEvent -eq $false)
     {

         if($apApointment.Duration)
         {
                if($WorkingDays.split(",") -contains ($apApointment.start).dayofweek)
                {
                    $TotalDuration = $TotalDuration.add((new-timespan -End $apApointment.End.tolongTimeString() -start $apApointment.start.tolongTimeString()))

                    #Only count to inPolicy if within the workinghours time
                    if($apApointment.start.tolongTimeString() -lt $WorkingHoursStartTime)
                    {   
                        $tStart = $WorkingHoursStartTime.ToString()
                    }   
                    else
                    {
                        $tStart = $apApointment.start.ToLongTimeString()
                    }

                    if($apApointment.End.tolongTimeString() -gt $WorkingHoursEndTime)
                    {   
                        $tEnd = $WorkingHoursEndTime.ToString()
                    }   
                    else
                    {
                        $tEnd = $apApointment.End.ToLongTimeString()

                    }

                    $Duration = New-TimeSpan -Start $tStart -End $tEnd
                    $inPolicy = $inPolicy.add($Duration)
                }
            }
     }

}

#Calculate to total hours of bookable time between the 2 dates
for ($d=$Startdate;$d -le $Enddate;$d=$d.AddDays(1)){
  if ($WorkingDays.split(",") -contains $d.DayOfWeek) 
  {
    $BookableTime += $WorkingHoursEndTime - $WorkingHoursStartTime

  }
  } #for

#Save result....
$rptobj = "" | Select samAccountName,DisplayName,inPolicy,Out-Of-Policy,TotalDuration,BookableTime,BookedPersentage
$rptobj.samAccountName = $Mailbox.samAccountName
$rptobj.DisplayName = $Mailbox.DisplayName
$rptobj.inPolicy =  '{0:f2}' -f ($inPolicy.TotalHours)
$rptobj."Out-Of-Policy" =  '{0:f2}' -f (($TotalDuration - $inPolicy).TotalHours)
$rptobj.TotalDuration =  '{0:f2}' -f ($TotalDuration.TotalHours)
$rptobj.BookableTime =  '{0:f2}' -f ($BookableTime.TotalHours)
$rptobj.BookedPersentage =  '{0:f2}' -f (($inPolicy.TotalHours / $BookableTime.TotalHours) * 100)
$rptcollection += $rptobj

} #ForEach
}

$rptcollection 
```

它会输出这样的东西。

```
samAccountName   : room1
DisplayName      : Room Mailbox 1
inPolicy         : 98,50
Out-Of-Policy    : 2,75
TotalDuration    : 101,25
BookableTime     : 207,00
BookedPersentage : 47,58

samAccountName   : room2
DisplayName      : Room Mailbox 2
inPolicy         : 35,92
Out-Of-Policy    : 0,00
TotalDuration    : 35,92
BookableTime     : 207,00
BookedPersentage : 17,35 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-26T13:05:32.493

您是否为您的用户添加了`ManagementRoleAssignment`？

```
New-ManagementRoleAssignment –Name:impersonationAssignmentName –Role:ApplicationImpersonation –User:serviceAccount 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-08-09T17:38:31.627

不确定这是否会绊倒其他任何人，但在一个不应该有它们的地方有空间。我的以下行的复制粘贴包含 WellKnow 和 FolderName 之间的空格

> $folderid = new-object Microsoft.Exchange.WebServices.Data.FolderId([Microsoft.Exchange.WebServices.Data.WellKnown FolderName]::Calendar,$Mailbox.PrimarySMTPAddress.tostring())

# python - 是否可以直接从 S3 打开文件

> ID：10921568
> 
> 赞同：3
> 
> 时间：2012-06-06T20:16:33.060
> 
> 标签：python, django, amazon-s3, boto

我使用 Amazon S3 来存储我的资源，但有时我发现有必要打开存储在 S3 上的文件，以便对其进行一些操作。

是否可以（并且建议）直接从 S3 打开文件，还是应该坚持使用临时的“临时”文件夹？

现在我正在使用[boto](https://github.com/boto/boto)扩展来连接亚马逊。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T20:22:28.860

无法在 S3 上打开文件，您只能通过网络读取或添加/替换它们。

[有一个名为s3fs](http://code.google.com/p/s3fs/wiki/FuseOverAmazon)的开源命令行工具，它模拟将 s3 存储桶安装为用户空间文件系统。像这样安装它后，您可以使用在文件系统中的普通文件上使用的任何命令来打开文件的读取和写入，但在幕后它正在为您的所有写入进行一些本地缓存，然后在上传文件时你关闭手柄。

# vba - Visio VBA 以编程方式“单击”操作

> ID：10921577
> 
> 赞同：0
> 
> 时间：2012-06-06T20:17:21.233
> 
> 标签：vba, office-interop, visio

我有一些代码可以为我生成 Visio 母版，一些母版有自动生成的带有 1 个或多个操作的操作部分。我想做的是将这些母版中的每一个放到一个页面中，并遍历形状中的操作列表，然后执行每个操作，并检查它们是否完成而没有错误。

我的操作都使用 CALLTHIS 来执行 VBA 代码，所以我想可能使用 Application.ExecuteLine，然后我只需要解析 CALLTHIS 及其参数。但我想知道，Visio VBA 中是否有一些机制可以让我以编程方式执行一个动作，还是我自己坚持做这一切？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T08:15:23.323

单元格对象上有一个 Trigger 方法，因此您可以遍历 Action 行，如下所示：

```
Private Sub TriggerActionCells(ByRef shpIn As Shape)
If Not shpIn Is Nothing Then
    If shpIn.SectionExists(visSectionAction, 0) Then
        Dim iRow As Integer
        For iRow = 1 To shpIn.RowCount(visSectionAction)
            shpIn.CellsSRC(visSectionAction, iRow - 1, visActionAction).Trigger
        Next iRow
    End If
End If
End Sub 
```

# watir - 缺少方法类 Text_feild .getContents

> ID：10921578
> 
> 赞同：1
> 
> 时间：2012-06-06T20:17:21.803
> 
> 标签：watir

我正在尝试对 Watir 使用 .getContents 方法，但它说该方法不存在。所以我尝试更新 Watir，但我已经有了最新版本。这是我试图使用的代码行

> Provence = e.frame(:name => "content").frame(:name => "main").text_field(:name => "txtLocDesc").getContents

然后获取和方法丢失错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:45:27.743

使用 #value 方法代替获取输入字段的值属性：

```
e.frame(:name => "content").frame(:name => "main").text_field(:name => "txtLocDesc").value 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T22:56:26.743

为什么你认为`getContents`会返回文本字段值？我在[watir-classic](http://rdoc.info/gems/watir-classic)或[watir-webdriver](http://watir.github.com/watir-webdriver/doc/) gem API 中看不到该方法。

# installation - 类似于 Google Chrome 的下载器和安装程序

> ID：10921579
> 
> 赞同：5
> 
> 时间：2012-06-06T20:17:22.547
> 
> 标签：installation

我正在寻找一个像用于谷歌浏览器的安装程序解决方案：

当您单击下载时，您实际上并没有下载安装程序，而是一个非常小的*Downloader*，然后它会下载 Chrome *Installer*并随后启动它。

我知道 Sweet Labs 正在开发[Ignite](http://www.opencandy.com/developers/ignite/)，但它仍处于封闭测试阶段。

是否有任何类似的解决方案可供使用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T20:20:19.877

[谷歌奥马哈](http://code.google.com/p/omaha/)怎么样？（实际上是由谷歌浏览器使用的）它似乎是这个东西。

> Omaha 项目为 Google 的 Windows 客户端产品提供了一个共享的自动更新和安装系统，该系统适用于多个 Windows 平台，包括 Windows Vista。目标包括以下内容：
> 
> *   一种自动更新机制，允许团队在不依赖其他产品团队的情况下推出更新，而无需编写自己的客户端或服务器逻辑 一个自动更新服务器处理所有自动更新请求 - 每个产品团队都不需要推出和管理自己的服务器 一个由所有桌面客户端软件共享的桌面自动更新客户端 - 不会为每个已安装的应用程序运行单独的程序
> *   一个微小的元安装程序，其中包括更新客户端（并且知道如何在必要时安装它）和对所需应用程序的引用，然后更新客户端可以下载并安装该应用程序
> *   安装更新客户端后，一键式 Web 安装应用程序
> *   支持丰富的更新部署逻辑，允许公开发布、测试版、开发和“金丝雀”实验的多个轨道
> *   支持受限用户环境；例如，没有管理员权限的用户
> *   为所有 Google 客户端应用程序共有的其他功能提供共享运行时：崩溃报告

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-07T12:17:48.080

[高级安装程序](http://www.advancedinstaller.com/download.html)也可以做到这一点。它会创建一个小的可执行文件，可以从您指定的 URL 启动 MSI 包，因此用户下载的包非常小。作为奖励，您可以将应用程序拆分为功能，并将其设置为为每个功能创建一个 CAB 存档，因此实际安装过程将仅下载已安装功能的 CAB 文件，从而减少未安装功能的用户的下载时间安装所有功能。

要让用户只看到一个小的进度条而不是完整的 MSI 对话框，您只需在安装参数页面中勾选一个复选框。

但是，您现在应该知道此功能仅在商业许可证中可用，您至少需要一个专业许可证。您可以对其进行测试，在试用期间对其所有功能的访问不受限制。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-14T17:57:59.623

我现在有这个非常完整的解决方案列表：

*   [谷歌奥马哈](http://code.google.com/p/omaha/)
*   [高级安装程序](http://www.advancedinstaller.com/)
*   [Somoto BetterInstaller](http://betterinstaller.somotoinc.com/)（+ 添加您从中赚钱的建议）
*   [点燃](http://www.opencandy.com/developers/ignite/)（尚不可用）

或者可能使用[WiX 工具集](http://wixtoolset.org/)、[NSIS](http://nsis.sourceforge.net/Main_Page)或[Inno Setup](http://www.jrsoftware.org/isinfo.php)创建您自己的。

所有这些都是免费的解决方案，除了 AdvancedInstaller。它也有免费版，但不能用于创建这种包类型；为此，您至少需要一个专业版。

# sql - 如何找到最近的 FRI？

> ID：10921582
> 
> 赞同：0
> 
> 时间：2012-06-06T20:17:29.337
> 
> 标签：sql, sql-server

在 SQL Server 2008 中，给定一个日期，我将如何获得对应于该周 FRI 的日期？

```
so for example:
6/6/2012 -> 6/8/2012
6/5/2012 -> 6/8/2012 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T20:32:41.863

假设您希望 2012 年 6 月 9 日也返回 2012 年 6 月 8 日（同一周），这将起作用。它获取当前日期的星期几，并将该日期与星期五之间的差值硬编码为 6。

```
SET DATEFIRST 7;    
declare @date date = '6/5/2012'

select dateadd(dd,6-datepart(dw,@date),@date) as Friday 
```

如果你想让 6/9/2012 下周五返回，你只需要做一个小的修改：

```
SET DATEFIRST 7;
declare @date date = '6/9/2012'
set @date = dateadd(dd,1,@date) -- this adds a day to the date you inputted but doesn't matter since the function will always return to you a Friday
-- Sunday resets the week with datepart so adding a day to Saturday resets the week resulting in the next week being returned.

select dateadd(dd,6-datepart(dw,@date),@date) as Friday 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-28T00:11:13.710

这是我创建的一个似乎有效的函数。它不会更改 DATEFIRST，并且会为您提供 DOW 的下一个日期。如果它在您正在寻找的 DOW 上，该函数将返回您传入的日期。

```
CREATE FUNCTION [dbo].[func_NextDate]
(
    @dt DATE,
    @dow INT -- Use the day-of-week as defined by SQL Server (1=Sun, 7=Sat)
)
RETURNS DATE
AS 
BEGIN

DECLARE @dtDiff INT = 7-((DATEPART(dw, @dt)+(7-@dow))%7)
IF @dtDiff = 7
    SET @dtDiff = 0 -- Return the date if it is on the dow requested

RETURN DATEADD(dd, @dtDiff, @dt)

END 
```

# java - SwingX 仅从单词数组中识别列出的单词，并且不会让其他单词被选中

> ID：10921584
> 
> 赞同：0
> 
> 时间：2012-06-06T20:17:40.547
> 
> 标签：java, swing, autocomplete, intellisense, swingx

我正在尝试将自动完成添加到我当前的代码中，所以经过无数次我决定尝试`SwingX`。

代码可以编译，可以工作，但是我仍然有一些“小”问题。

这是我的代码：

```
public class GuiHandler extends javax.swing.JFrame {

private javax.swing.JTextField jtfBoxOfCurrentPath;

// more irrelevant code 

       private void afterXMLfileWasUploaded() { 

       String[] tab = {"abc", "def", "ghjk", "lmnop", "qrst", "rstuv", "wxyz"};

        JList list = new JList(tab); //data has type Object[]

        // jtfBoxOfCurrentPath.setToolTipText("");  // I removed this line , this is when I don't want to use auto-completion 

        AutoCompleteDecorator.decorate(list, jtfBoxOfCurrentPath, ObjectToStringConverter.DEFAULT_IMPLEMENTATION);

        jtfBoxOfCurrentPath.addActionListener(new java.awt.event.ActionListener() 
        {
            public void actionPerformed(java.awt.event.ActionEvent evt) 
            {
                boxOfCurrentPathActionPerformed(evt);
            }

        });

// and more code 
```

这是我的程序的一般视图：![XML 搜索引擎](../Images/70fa0515fe054a6c2bfd13d0b1b330ed.png) 。正如方法名称所提到的`afterXMLfileWasUploaded`，在我点击`open XML file`按钮后，文件被上传并解析到程序中（没问题）。

但是当我尝试在框中写一些东西时`Current path`，然后：

*   我只能从`tab`上面的数组中写单词

*   我不能写以未列出的字符开头的任何其他单词或字符

    “abc”、“def”、“ghjk”、“lmnop”、“qrst”、“rstuv”、“wxyz”

*   我实际上无法擦除使用`tab`上面的数组编写的任何单词。

那怎么了？任何帮助将不胜感激

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T20:34:55.840

> 我只能从上面的 tab 数组中写单词

*   不知道，你必须使用当前版本的 SwingX 1.6.3

*   检查退格是否固定（不是 SwingX 专家），

*   可以帮助您查看[SwingX 团队的优秀成员@kleopatra 的帖子](https://stackoverflow.com/search?q=user:203657%20%5Bswingx%5D)，

*   或者在他们的论坛上你可以搜索相关信息

> 我不能写以未列出的字符开头的任何其他单词或字符

[org.jdesktop.swingx.autocomplete.Configurator#configureTextComponent()](http://download.java.net/javadesktop/swinglabs/releases/0.8/docs/api/org/jdesktop/swingx/autocomplete/Configurator.html#enableAutoCompletion%28javax.swing.JList,%20javax.swing.text.JTextComponent%29)，注意API正在谈论`Document`（`Model`for `JTextComponents`）

* * *

*   我最喜欢的解决方法是（没有提到的问题和潜在的错误） [AutoComplete JComboBox / JTextField](https://stackoverflow.com/a/7255918/714968)（Java5 和更高版本），

*   在那里你可以简单地设置 AutoComplete JComboBox/JTextField`#setStrict(boolean flag)`

*   BackSpace，Focus，存储最后一个插入符号没有问题

# node.js - 带有 sass/stylus/less 的 Node.js 铁路

> ID：10921598
> 
> 赞同：0
> 
> 时间：2012-06-06T20:18:27.620
> 
> 标签：node.js, express, railway.js

我开始使用[**铁路**](http://railwayjs.com/)（node.js mvc 框架），我想使用 sass/less/stylus 作为 css 渲染引擎。
我找不到如何在铁路中配置它。
铁路使用[express.js](http://expressjs.com/guide)，所以我想我可以通过它安装它。
我已经通过`npm install stylus`.
我还`stylesheet_link_tag`用来链接到我的 css 文件。
任何建议将被认真考虑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T21:11:30.207

使用[https://github.com/emberfeather/less.js-middleware](https://github.com/emberfeather/less.js-middleware)。它给了你你需要的东西

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T21:51:11.310

经过一些研究并感谢我的朋友@sivan，我找到了答案。
集成 css 渲染引擎的步骤是（我将使用[stylus](http://learnboost.github.com/stylus/)进行演示，但其余部分类似）：
install stylus

```
npm install stylus 
```

npmfile.js

```
require('stylus'); 
```

环境.js

```
var stylus = require('stylus');
app.configure(function(){
var cwd = process.cwd(); //your root directory

app.use(stylus.middleware({
    src: __dirname + '/public', //your *.styl files here
    compress: true
}));

app.use(express.static(cwd + '/public', {maxAge: 86400000}));
...
} 
```

然后创建一个以扩展名结尾的文件`.styl`。例如：public/stylsheets/style1.styl

```
#div2
  color blue //your css here 
```

并简单地从您的 html 页面链接到这个生成的 .css 文件

```
<%- stylesheet_link_tag('style1') %> 
```

更多关于手写笔中间件[的信息](https://github.com/LearnBoost/stylus/blob/master/docs/middleware.md)。
希望它能为遇到同样问题的人节省时间。

# android - 我想更改应用程序状态，然后重新加载活动以反映更改

> ID：10921600
> 
> 赞同：0
> 
> 时间：2012-06-06T20:18:29.050
> 
> 标签：android, android-listview, android-activity, simplecursoradapter, contextmenu

嗨，我更改了应用程序状态，然后我想重新加载活动以反映我尝试使用 notifyDataSetChanged 的​​更改，但它也不工作......基本上当我选择“删除”选项时，删除操作有效，但它不刷新ListActivity 上的光标适配器 ContextMenu：

```
 public boolean onContextItemSelected(MenuItem item)
{
    AdapterContextMenuInfo info = (AdapterContextMenuInfo) item.getMenuInfo();
    int index = info.position;
    View view = info.targetView;
    long id = info.id;

    if(item.getItemId()==R.id.edit){
        Intent i=new Intent(ProjetoProTelefoneActivity.this, DetailForm.class);
        i.putExtra(ID_EXTRA, String.valueOf(id));
        startActivity(i);
        return(true);
    }
    else if(item.getItemId()==R.id.remove){

        Intent i=new Intent(ProjetoProTelefoneActivity.this, DeleteItemList.class);
        i.putExtra(ID_EXTRA, String.valueOf(id));
        startActivity(i);
        ListView listView = getListView();
        listView.setAdapter(adapter);
        adapter.notifyDataSetChanged();
        return(true);
    }

    return super.onContextItemSelected(item);
} 
```

我的初始化列表（）：

```
 private void initList(){
    if(modelo!=null){
        stopManagingCursor(modelo);
        modelo.close();
    }

    modelo =helper.getAll(prefs.getString("sort_order","nome DESC"));
    startManagingCursor(modelo);        

    adapter = new RestaurantAdapter(modelo);       
    setListAdapter(adapter);         

} 
```

删除项目列表：

```
public class DeleteItemList extends Activity{
RestauranteHelper helper = null;
String restauranteId= null;

public void onCreate(Bundle savedInstaceState){
    super.onCreate(savedInstaceState);
    helper= new RestauranteHelper(this);

    restauranteId=getIntent().getStringExtra(ProjetoProTelefoneActivity.ID_EXTRA);
    helper.delete(restauranteId);
    finish();
}

public void onDestroy(){
    super.onDestroy();
    helper.close();

}
} 
```

我的 RestauranteHelper.delete：

```
 public void delete(String id){
    String[] args = {id};

    getWritableDatabase().delete("restaurantes", "_ID =?", args);

} 
```

类餐厅适配器：

```
class RestaurantAdapter extends CursorAdapter {
    RestaurantAdapter(Cursor c) {
      super(ProjetoProTelefoneActivity.this, c);
    }

    public void bindView(View row, Context ctxt,
                         Cursor c) {
      RestaurantHolder holder=(RestaurantHolder)row.getTag();

      holder.populateFrom(c, helper);
    }

    public View newView(Context ctxt, Cursor c,
                         ViewGroup parent) {
      LayoutInflater inflater=getLayoutInflater();
      View row=inflater.inflate(R.layout.row, parent, false);
      RestaurantHolder holder=new RestaurantHolder(row);

      row.setTag(holder);

      return(row);
    }
  } 
```

我有其他主题，但我在那里尝试做的所有事情都没有工作......我知道该怎么做，删除操作有效，但不要刷新光标适配器

在我更正代码后，onContextItemSelected 看起来像，并且我不再使用 DeleteItemList，如您所见：

```
 public boolean onContextItemSelected(MenuItem item)
{
    AdapterContextMenuInfo info = (AdapterContextMenuInfo) item.getMenuInfo();
    int index = info.position;
    View view = info.targetView;
    long id = info.id;

    if(item.getItemId()==R.id.edit){
        Intent i=new Intent(ProjetoProTelefoneActivity.this, DetailForm.class);
        i.putExtra(ID_EXTRA, String.valueOf(id));
        startActivity(i);
        return(true);
    }
    else if(item.getItemId()==R.id.remove){
        restauranteId=String.valueOf(id);
        //Toast.makeText(this,  String.valueOf(id),  Toast.LENGTH_LONG).show();
        helper.delete(restauranteId);
        initList();
        return(true);
    }
    return super.onContextItemSelected(item);
} 
```

谢谢大家！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T20:39:06.643

我认为问题发生在`onContextItemSelected()`代码内部：

```
else if(item.getItemId()==R.id.remove){
    Intent i=new Intent(ProjetoProTelefoneActivity.this, DeleteItemList.class);
    i.putExtra(ID_EXTRA, String.valueOf(id));
    startActivity(i);

    // The following is executed before the DeleteItemList does 
    // its deletion work!

    ListView listView = getListView();
    listView.setAdapter(adapter);
    adapter.notifyDataSetChanged();

    return(true);
} 
```

因此，只需为结果开始活动：

```
else if(item.getItemId()==R.id.remove){
    Intent i=new Intent(ProjetoProTelefoneActivity.this, DeleteItemList.class);
    i.putExtra(ID_EXTRA, String.valueOf(id));
    startActivityForResult(i, YOUR_REQUEST_CODE); // check the documentation
    return(true);
} 
```

然后您将能够使用 onActivityResult() 从 DeleteItemList 中获取返回：

```
protected void onActivityResult (int requestCode, int resultCode, Intent data) {
    if (YOUR_REQUEST_CODE == requestCode) {
        // you are back from DeleteItemList, so refresh the list content
        ((CursorAdapter) getListAdapter()).notifyDataSetChanged(); // or smth like that
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T20:39:34.003

您可以在删除后重新查询，然后使用适配器设置该光标，可能有更好的方法，但这种方法有效并且可以快速修复

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T20:53:11.483

1.  你不需要`DeleteItemList`活动。活动是用户可以做的一个单一的、*专注*的事情（即一个 UI 屏幕）。为简单的删除创建一个`Activity`完全没有意义。您应该按原样（在当前活动中）执行删除，而不是创建（并完成）一个全新`Activity`的任务来执行任务。

2.  **快速解决**方法是调用`reQuery`光标。在 API 版本 11 之前，刷新`Cursor`s 内容的方式是调用`requery()`它（例如，在执行删除之后）。但是请注意，不赞成这样做，有利于让您`Activity`实现`LoaderManager.LoaderCallbacks<Cursor>`接口。`startManagingCursor()`并且`stopManagingCursor()`也被弃用了。

3.  正确的**解决**方法是重新开始并让您`Activity`实现`LoaderManager.LoaderCallbacks<Cursor>`接口。如果您这样做，您的代码会变得多么简单，这几乎是荒谬的，因为您在帖子中提到的所有内容都是由`LoaderManager`. `LoaderManager`寄存器 a将`ContentObserver`检测您的数据何时更改。它还自动在后台线程上执行查询，这是首选，因为它将确保昂贵的查询不会阻塞 UI 线程。

    话虽如此，这需要您做很多工作，所以如果您只是坚持快速修复并忽略＃3 :)，我不会责怪您。如果您有兴趣，这里有一个有用的[**教程。**](http://mobile.tutsplus.com/tutorials/android/android-sdk_loading-data_cursorloader/)

# php - 确定缺少扩展名的图像的文件扩展名

> ID：10921603
> 
> 赞同：0
> 
> 时间：2012-06-06T20:18:31.963
> 
> 标签：php, image, file-extension

我的系统上有一些图像在没有文件扩展名的情况下保存，它们以“文件名”的格式显示。（注意句号）

我正在尝试使用 getimagesize(); 但它错误地告诉我“文件名不能为空”

这是我正在使用的代码示例

```
 $contents = file_get_contents($localFile);

    $imageData = getimagesize($contents);
    // $imageData[2] will contain the value of one of the constants
    $mimeType = image_type_to_mime_type($imageData[2]);
    $extension = image_type_to_extension($imageData[2]); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T20:22:27.487

[`getimagesize`](http://php.net/manual/en/function.getimagesize.php)需要一个文件名作为第一个参数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T20:23:15.677

查看文档：[http](http://php.net/getimagesize)
: //php.net/getimagesize getimagesize() 期望文件名作为第一个参数，而不是图像文件的内容。

尝试：

```
$imageData = getimagesize($localFile);
// $imageData[2] will contain the value of one of the constants
$mimeType = image_type_to_mime_type($imageData[2]);
$extension = image_type_to_extension($imageData[2]); 
```

# asp.net - 在 asp.net 4.0 中验证请求的正确方法

> ID：10921613
> 
> 赞同：0
> 
> 时间：2012-06-06T20:19:14.813
> 
> 标签：asp.net, web-config

我一直在添加

```
 requestValidationMode="2.0" 
```

自从 .net 4.0 出现以来，我的 web.config 文件，但在我看来，将验证模式设置回之前的 2 个版本似乎有点愚蠢。那么在 .net 4 中，管理请求验证的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T20:26:53.617

在我看来，正确的方法是顺其自然，不要惹它，除非你有充分的理由。4.0 版本中的默认值是，等待它，4.0 :)

请参阅此以获取更多信息：

[http://msdn.microsoft.com/en-us/library/system.web.configuration.httpruntimesection.requestvalidationmode.aspx](http://msdn.microsoft.com/en-us/library/system.web.configuration.httpruntimesection.requestvalidationmode.aspx)

尤其是这篇文章：

[ASP.NET 4 重大更改](http://www.asp.net/whitepapers/aspnet4/breaking-changes#0.1__Toc256770147)

基本区别是这样的：

2.0 - 仅对 asp.net 页面进行验证

4.0 - 对每个 http 请求（服务等）进行验证

# apache-flex - Flash 内 Flex 内 ExtendScript

> ID：10921614
> 
> 赞同：0
> 
> 时间：2012-06-06T20:19:23.377
> 
> 标签：apache-flex, flash, local, extendscript

我一直在处理 Photoshop UI 项目，并且还使用 Flash Builder 工作了大约 3 周，但我找不到解决通信问题的方法。以下是有关该问题的一些详细信息；如果你有兴趣帮助我，谢谢。

*   UI的主框架是Extendscript

*   我有一个 as3 swf 需要动态加载本地 JPG 文件，我认为这是 Flash 的“仅访问本地文件”情况。

*   相同的 SWF 需要与 Extendscript 通信，因此我通过 SWFLoader 将其动态加载到 FLEX 应用程序中，并将一些变量传递给 FLEX，并通过“myFlexParent”对象触发 FLEX 中的一些函数。

*   Flex 是 Fl​​ash 和 Extendscript 之间的桥梁，因此它通过 Externalinterface.call 或 CSXSInterface.instance.evalScript() 将变量和函数传递给 Extendscript JSX 代码。

这就是我卡住的地方。我猜 ExternalInterface 调用或 CSXSInterface.instance.evalScript() 作为网络操作受到威胁，如果我在 flex 中设置编译选项“-use-network=false”，它们将不起作用。否则无法加载本地 JPG 文件。

在设置管理器中添加位置对我来说不起作用，因为我要把 UI 变成一个扩展并且它应该很容易安装。

我想我正试图找到一种在 FLEX 和 ExtendScript 之间建立双向通信的方法，这将被 Flash Player 解释为 LOCAL 通信，实际上是。

我会很感激任何信息。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T15:30:34.900

ExternalInterface is going to be considered a network call and setting the -use-network=false will break those calls down. This is due to the security sandbox. If it was allowed then the flash app could be used with some simple AJAX to turn a non-network app into a network app very easily.

**Adobe doc's say:**

> This communication relies on the domain-based security restrictions that the allowScriptAccess and allowNetworking properties define. You set the values of the allowScriptAccess and allowNetworking properties in the SWF file’s wrapper.

**Reference link:**

[http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf6167e-7fff.html#WS2db454920e96a9e51e63e3d11c0bf6167e-7ff5](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf6167e-7fff.html#WS2db454920e96a9e51e63e3d11c0bf6167e-7ff5)

Look into changing your app into an AIR app as you will be able to do both network and local file operations (different security model since the user installs the application).

# asp.net - ASP.NET 用户管理入门工具包

> ID：10921616
> 
> 赞同：3
> 
> 时间：2012-06-06T20:19:44.157
> 
> 标签：asp.net, authentication

我正在寻找一个 asp.net starterkit，它使我能够管理我的网站上的用户和角色（作为网站管理员）。我找到了 MyWSAT——但这对我的目的来说有点太多了。我只需要：创建和管理用户和角色......

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T00:22:40.230

从您的帖子中，您在 ASP.NET 帐户管理（从头开始创建、扩展现有功能、管理帐户或创建管理工具）中寻找的内容并不完全清楚。

1) 要为您的网站创建 ASP.NET 用户管理功能，下面是一个简单快捷的步骤：[ASP.NET 基本用户帐户管理](http://www.aspfree.com/c/a/ASP.NET/ASPNET-35-Basic-User-Account-Management/)，或者您可以查看[Club Web Site Starter Kit 简介](http://msdn.microsoft.com/en-us/library/aa479303.aspx)

2) 扩展和自定义构建 asp.net 成员[ASP.NET 的成员、角色和配置文件](http://aspnet.4guysfromrolla.com/articles/120705-1.aspx)

3）构建自己的网站管理工具：[构建自己的网站管理工具](http://www.4guysfromrolla.com/articles/052307-1.aspx)

4) 要了解如何在 ASP.NET 2.0 中使用角色管理器，请查看此[链接](http://msdn.microsoft.com/en-us/library/ff647401.aspx)

5) 如果您正在寻找 ASP.NET MVC 替代品，那么这里是：[Asp.Net MVC Membership Starter Kit](https://github.com/TroyGoode/MembershipStarterKit)

# php - Simplepie：按上次更新日期对 RSS 帖子进行排序

> ID：10921617
> 
> 赞同：0
> 
> 时间：2012-06-06T20:19:46.333
> 
> 标签：php, parsing, rss, simplepie

我正在尝试按上次更新日期对 rss 提要的帖子进行排序，使用 simplepie 来解析提要。我在想我可以使用“获取项目标签方法”，如下所示：

`$feed_object->get_item_tags("http://www.w3.org/2005/Atom", "updated");`,

为了创建一个更新日期数组，然后以某种方式对它们进行排序。但是， get_item_tags() 抛出以下内容：

`Fatal error: Call to undefined method SimplePie::get_item_tags()`

所以：有没有更简单/更好的方法来做到这一点，我使用 get_item_tags() 有什么问题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T20:24:53.780

也许这样？

```
$item = $feed->get_item(0));   // the first item in feed; do it in loop
$data = $item->get_item_tags("http://www.w3.org/2005/Atom", "updated"); 
```

[get_item_tags](http://simplepie.org/wiki/reference/start)是一个项目级别的函数。

# dns - 为 DNS 请求编写 linux conntrack 模块

> ID：10921626
> 
> 赞同：0
> 
> 时间：2012-06-06T20:20:22.360
> 
> 标签：dns, kernel-module, netfilter

我设置了一个 netfilter 规则，使用统计模块的随机模式和一些 NAT 规则来平衡 DNS 请求。该部分运行良好，但是当 DNS 客户端从同一源端口发送其所有请求时，所有 DNS 请求都被平衡到同​​一后端服务器。

我假设发生这种情况是因为连接跟踪将所有 UDP 数据包识别为同一 UDP 连接的一部分。我找不到一个简单的解决方法，有吗？

在没有的情况下，我将不得不编写一些代码来让事情按照我的意愿行事。这样做的正确方法是什么？

我的第一个想法是创建类似于 ip_conntrack_ftp 的东西，它使用 ip source/dest 以及 DNS 序列号来识别 DNS​​ 连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T12:11:17.793

您不需要任何复杂的东西 - 您只需要找到一种方法使负载均衡器“按数据包”而不是“按流”工作。

# php - php中的用户权限（和多用户登录表单）

> ID：10921633
> 
> 赞同：2
> 
> 时间：2012-06-06T20:20:46.027
> 
> 标签：php, forms, login, privileges

我正在研究一个学校系统（只是为了学习 PHP），我已经完成了管理员端，但我希望我的登录表单接受来自学生、教师和系统管理员的登录数据，以便我可以显示特定视图系统适用于每种类型的用户。在“if(isset($_POST["log"]))”下注释的代码是我目前用于管理员的代码，它完美地工作（对于我的标准）。这是代码：

```
<?php
//Fazer login para admin e prof;ligar todas databases ao login;????
include("conect.php");
include("classes/class_est.php");
include("classes/class_login.php");
include("classes/class_admin.php");
include("classes/class_prof.php");
$user=(empty($_POST["username"])? "" :$_POST["username"]);
if(isset($_POST["log"])){
/*if(($user)&&($_POST["senha"]!=null)){
        $est=new admin();
        $est->login($user,$_POST["senha"],$_POST["tipo_user"]);
        }else{
            echo"<script>alert('Nome ou Senha Incorrecto')</script>";
        }
    }*/

switch($_POST["tipo_user"]){
        case"administrador":echo 'ighb';
            if(($_POST["username"])&&($_POST["senha"]!=null)){
            $admin=new admin();
            $admin->login($_POST["username"],$_POST["senha"],$_POST["tipo_user"]);
            }else{
            echo"<script>alert('Nome ou Senha Incorrectos')</script>";
        }
            ;
         break;
        case"estudante":
            if(($_POST["username"])&&($_POST["senha"]!=null)){
            $est=new est();
            $est->login($_POST["username"],$_POST["senha"],$_POST["tipo_user"]);
            }else{
            echo"<script>alert('Nome ou Senha Incorrectos')</script>";
        };
        break;
        case"professor":
            if(($_POST["username"] && $_POST["senha"])!=null){
                $prof=new prof();
                $prof=login($_POST["username"],$_POST["senha"],$_POST["tipo_user"]);
            }else{
                echo"<script>alert('Nome ou Senha Incorrectos')</script>";
            };
            break;
        default;break;
    }
}
?>
<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" type="text/css" href="estilos/forms.css"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    </head>
<body>
    <center>
        <div id="login">
            <div id="black_m"><img src="estilos/imagens/black_mamba_logo.png"/></div>
        <table>
        <form method="POST">
            <tr><td>Tipo de usuário:</td><td><?php $listar=new login;$listar->list_tipo()?></td><td><span>(Para Alpha)</span></td></tr>
            <tr><td>Username: </td><td><input type="text" name="username" placeholder="Insira o nome de usuário" id="texto"/></td></tr>
            <tr><td>Senha: </td><td><input type="password" name="senha" placeholder="Insira a senha" id="texto"/><td></tr>
            <tr><td><input type="submit" name="log" value="ENTRAR" id="texto"/></tr>
        </form>
    </table>
    </div>
    </center>
</body>` 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T21:26:49.540

您熟悉使用数据库吗？将用户名、密码和 access_levels 存储在数据库的用户表中可能是您​​的最佳选择。否则，您将不得不在脚本中硬编码用户的访问值。如果你这样做，你可以创建一个开关来定义他们的特权值，比如：

```
$username=$_POST['user'];
switch $username {
  case "supercool_admin":
  $access_level="admin";
break;
  case "supercool_student":
  $access_level="student";
break;
  case "supercool_teacher":
  $access_level="teacher";
break;
  default:
  $access_level="none";
} 
```

然后，当您显示内容时，您可以将 access_level 作为 if 语句或另一个开关来引用。

例如：

```
if($access_level=="admin") {
 //DISPLAY ADMIN CONTENTS
} elseif ($access_level=="teacher") {
 //DISPLAY TEACHER CONTENTS
} elseif ($access_level=="student") {
 //DISPLAY STUDENT CONTENTS
} else {
  echo "YOU DO NOT HAVE PERMISSION TO VIEW THESE CONTENTS";
} 
```

我还可以建议不要使用 post 值进行查找，而是使用 post 值对数据库进行身份验证，或者在您的情况下，在交换机内部进行身份验证。一旦通过身份验证并定义了它们的 access_level，将这些值存储在会话中并引用它。

# sql - SQL 'join' 2 个主键到 1

> ID：10921637
> 
> 赞同：1
> 
> 时间：2012-06-06T20:21:01.530
> 
> 标签：sql, sql-server, sql-server-2008

我有 2 张桌子：

```
PrimKey
001
002 
```

和：

```
ID | ForeignKey
a  | 001
b  | 002
c  | 002 
```

我想删除，比如说，第 002 行并将所有 002 外键“绑定”到 001，所以它看起来像：

```
PrimKey
001 
```

和：

```
ID | ForeignKey
a  | 001
b  | 001
c  | 001 
```

FK 约束不允许我执行 UPDATE + DELETE。任何提示在哪里挖掘？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T20:23:48.960

你必须从另一个方向去做。将第二个表中的行更改为指向第一个表中不同的PK；然后当没有对 row002 的引用时，您可以将其删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T20:24:49.020

你也可以尝试做`begin transaction`,`update`和.`delete``commit`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T20:34:49.490

如果您无法控制数据库架构，则必须按照 Jeremy 的指示手动删除。

如果您确实有控制权，则可以在表之间添加外键关系，并在关系详细信息中添加“级联删除”约束。您可以通过使用外键转到表的表设计并右键单击选择“关系”来执行此操作。然后选择“添加”并转到定义表和列的部分。单击带有三个点的按钮，您将能够选择关系的父表，然后您可以选择用于创建关系的列。最后，在关系屏幕中，您可以找到插入/更新规范部分以指示删除时的“级联”。（对此也有一个 alter table 语句，但有时使用 GUI 会更快。）

# eclipse - 将特定类型的项目与特定视角相关联

> ID：10921638
> 
> 赞同：1
> 
> 时间：2012-06-06T20:21:01.660
> 
> 标签：eclipse, perspective

我只想将所有 Java 项目与 Java 透视图相关**联**。但是，此时，Java 项目也出现在 Ruby 资源管理器下的 Ruby 透视图中。我只希望 ruby​​ 项目出现在 ruby​​ 透视图中。我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T05:14:40.453

您没有，除了新项目向导可能为您做的任何事情之外，两者之间的关系为零。检查 Ruby Explorer 的本地菜单，了解一种过滤您不想在其中看到的项目的方法。

# sql-server - 如何配置 Schema Compare 为外键生成单独的文件？

> ID：10921639
> 
> 赞同：1
> 
> 时间：2012-06-06T20:21:02.340
> 
> 标签：sql-server, visual-studio-2010, database-schema

为了在 VS 2010 中使用我们的数据库项目，我们使用 SSMS 直接将模式更改到我们的本地项目数据库中，然后当我们准备好签入时，我们进行模式比较，本地数据库与项目，它可以识别我们的更改。然后，当我们写入更改时，它会在我们的数据库项目中更改或创建模式对象脚本。如果一切正常，我们就可以将这些更改签入 TFS。

我们对外键和索引的标准是分开保存。也就是说，即使我通过这样说在新表中定义了一个列：

```
CREATE TABLE Billing.EntryPointProduct
(
    EntryPointProductId INT IDENTITY(1,1) PRIMARY KEY,
    EntryPointId INT FOREIGN KEY REFERENCES Billing.EntryPoint(EntryPointId),
    ProductId INT FOREIGN KEY REFERENCES ProductCatalog.Product(ProductID)
) 
```

最后，我们真正想要的是 EntryPointProduct 表的文件和每个外键对象的文件。但是，现在模式比较正在一个表脚本中生成所有内容。我发誓我以前用模式比较做过这个，但我似乎找不到配置它的方法来做到这一点。任何人都可以建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T01:45:39.790

你能改变你的 DDL 使它看起来像这样：

```
CREATE TABLE Billing.EntryPointProduct
(
    EntryPointProductId INT IDENTITY(1,1),
    EntryPointId INT,
    ProductId INT,
CONSTRAINT [PK_EntryPointProduct] PRIMARY KEY CLUSTERED (EntryPointProductId)
)

ALTER TABLE Billing.EntryPointProduct
WITH CHECK ADD CONSTRAINT FK_EntryPointProduct_EntryPoint FOREIGN KEY(EntryPointId)  REFERENCES Billing.EntryPoint(EntryPointId)

ALTER TABLE Billing.EntryPointProduct
WITH CHECK ADD CONSTRAINT FK_EntryPointProduct_ProductCatalog FOREIGN KEY(ProductId)  REFERENCES ProductCatalog.Product(ProductID) 
```

这样，您将拥有 3 个不同的文件，并且您的 FK 将具有真实姓名 (FK_*) 而不是系统生成的名称，这些名称将在每次创建它们时随机生成，因此如果您进行架构比较，则不会匹配2 个单独编写的数据库。（和我修改PK代码的原因一样）

# css - 如何删除特定链接的 div

> ID：10921644
> 
> 赞同：-3
> 
> 时间：2012-06-06T20:21:27.853
> 
> 标签：css, html

我的网站是一个使用图像的简单网站。整个站点内容基于菜单的 div 标签。我使用标签添加了链接并使用 different 为其创建了单独的悬停效果，现在发生的情况是，当我悬停该链接时，会发生与菜单相同的悬停效果，并且我为链接创建的悬停不起作用。我只能在最后关闭菜单的 div [因为如果我在链接之前关闭菜单的 div 并为链接使用不同的 div，对齐方式会发生变化]。请提出解决方案，如果您希望我发布代码以使其清楚，请告诉它。谢谢。！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T21:11:10.550

最好确保您确保伪类特定于某个节点。这可以通过以下方式实现：

```
#(div name) a:hover {
   color: blue;
   text-decoration: underline;
 } 
```

它将确保嵌套在特定 div 内的 a 属性被引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T20:41:46.157

您可以使用属性选择器，根据标记中的内容选择特定链接或链接类型：以下是示例：

```
a[href="www.yoursite.com"]:hover { color: red; } 
```

您可以使用 html 标签内的任何属性来选择（id、class、href、title、alt 等，甚至是组成属性）。您可以更进一步，使用 ,,similar'' 运算符，它根据属性中是否存在指定的短语来选择元素（但不完全相同）。例如：

```
a[href~="https"]:hover { color: red; } 
```

将在 href 属性中选择所有带有 https 的链接。请记住，ie6 不支持该属性选择器，并且在 ie7 中存在问题，请记住这一点，您可以轻松地寻找解决方法。

# sql-server - SSIS如何通过分隔符获取字符串的一部分

> ID：10921645
> 
> 赞同：16
> 
> 时间：2012-06-06T20:21:29.700
> 
> 标签：sql-server, ssis, expression, etl

我需要一个 SSIS 表达式来获取分隔符之前字符串的左侧部分，然后将新字符串放入新列中。我检查了派生列，似乎没有这样的表达式。`Substring`只能返回固定长度的字符串部分。

例如，使用分隔符字符串`-`：

```
Art-Reading                Should return Art
Art-Writing                Should return Art
Science-chemistry          Should return Science 
```

PS 我知道这可以在 MySQL 中完成`SUBSTRING_INDEX()`，但我正在寻找 SSIS 中的等价物，或者至少在 SQL Server 中

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2014-01-16T05:48:02.300

迟到总比没有好，但我也想这样做并找到了这个。

```
TOKEN(character_expression, delimiter_string, occurrence)

TOKEN("a little white dog"," ",2) 
```

返回很少来源在下面

[http://technet.microsoft.com/en-us/library/hh213216.aspx](http://technet.microsoft.com/en-us/library/hh213216.aspx)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-06-07T09:27:10.547

当然可以：

![在此处输入图像描述](../Images/64ec2a31a14e845647c792e52f9ac716.png)

只需像这样配置您的派生列：

![在此处输入图像描述](../Images/cf2c63ec408357ef839d1398cfbf2cb1.png)

这是使您的生活更轻松的表达方式：

```
SUBSTRING(name,1,FINDSTRING(name,"-",1) - 1) 
```

仅供参考，第二个“1”表示第一次出现字符串“-”

编辑：处理不带“-”的字符串的表达式

```
FINDSTRING(name,"-",1) != 0 ? (SUBSTRING(name,1,FINDSTRING(name,"-",1) - 1)) : name 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-06-06T20:30:40.093

您可以指定要在`SUBSTRING`函数中复制的长度并使用检查破折号的位置`CHARINDEX`

```
SELECT SUBSTRING(@sString, 1, CHARINDEX('-',@sString) - 1) 
```

对于 SSIS 表达式，它几乎是相同的代码：

```
SUBSTRING(@[User::String], 1, FINDSTRING(@[User::String], "-", 1)-1) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-09-24T06:43:01.010

如果 SUBSTRING 长度参数返回 -1，则会导致错误，“长度 -1 对函数“SUBSTRING”无效。长度参数不能为负。将长度参数更改为零或正值。”

# c# - msbuild 发布和打包的区别

> ID：10921649
> 
> 赞同：0
> 
> 时间：2012-06-06T20:21:35.077
> 
> 标签：c#, .net, visual-studio-2010, msbuild

在准备要部署的 Web 应用程序时，msbuild /t:publish 和 msbuild/t:package 之间有什么区别？

我知道他们两个都通过收集所有必要的文件并将它们转储到一个目录中来准备应用程序以进行部署，并且包这样做加上压缩文件。这些是唯一的区别吗？文件准备部署的方式有什么不同吗？

这些功能是否与 Visual Studio 2010 中的“发布”和“构建部署包”相同？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T20:28:07.247

交换机将`package`创建一个可部署的包，您可以手动将其复制到您的服务器并运行，同时`publish`尝试将包上传到您的 Web 服务器并自动执行它。

使用`package`，您将在

[项目目录]\obj[BuildType]\Package

如果要在目标服务器上手动运行，则需要跨 .cmd、.SetParameters.xml 和 .zip 文件进行复制。您需要以管理员身份运行 .cmd。

# perl - yada-yada 运算符是否已被弃用？

> ID：10921652
> 
> 赞同：5
> 
> 时间：2012-06-06T20:21:50.910
> 
> 标签：perl, operators

我找不到perldoc 的 5.16.0 版本中记录的[yada-yada](http://perldoc.perl.org/5.14.0/perlop.html#Yada-Yada-Operator)[`perlop`](http://perldoc.perl.org/perlop.html)。

我也没有在[`perldoc perl5160delta`](http://perldoc.perl.org/perl5160delta.html). 它还在吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-06T20:44:48.810

看起来它还在那里。[在perldoc perlsyn](http://perldoc.perl.org/perlsyn.html) (5.16.0)中搜索“yada” ：

> 注意：有些人通俗地把这个标点符号称为“yada-yada”或“triple-dot”，但它的真实名称实际上是一个省略号。

# mapping - Knockout.js 将 JSON 映射到 observable-array

> ID：10921654
> 
> 赞同：17
> 
> 时间：2012-06-06T20:21:56.473
> 
> 标签：mapping, knockout.js, revealing-module-pattern

我想使用 Knockout.js 为我的 REST-Service 构建一个客户端。我有很多我想通过不同的 url 访问的存储库 - 所以我使用 Revealing-Prototype-Pattern 提出了这个解决方案。我的**问题**：我不知道如何将 ItemsProperty 与我从我的服务收到的“数据”映射。

```
var Repository = function (url) {
    this.Url = url;
    this.Items = ko.observableArray([]);
    this.PendingItems = ko.observableArray([]);
};

Repository.prototype = function () {
    var  
        getAllItems = function () {
            var self = this;
            $.getJSON(self.Url, function (data) {
            // data=[{"Id":1,"Name":"Thomas","LastName":"Deutsch"},{"Id":2,"Name":"Julia","LastName":"Baumeistör"}]
                ko.mapping.fromJS(data, self.Items);
            });
        }, 
    ...

// i call it like this:
customerRepository = new Repository('http://localhost:9200/Customer');
customerRepository.getAllItems(); 
```

我认为问题出在：***ko.mapping.fromJS(data, self.Items);*** 但我找不到正确的方法。
**问题**：我做错了什么？我找到了一个例子 - 我认为他们也在做同样的事情：http: [//jsfiddle.net/jearles/CGh9b/](http://jsfiddle.net/jearles/CGh9b/)

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-06T21:10:55.213

我相信 fromJS 的两个参数版本仅用于先前映射的对象，即它们具有隐式的空映射选项对象。由于您的映射是第一次运行，它需要像这样提供空选项对象。

```
ko.mapping.fromJS(data, {}, self.Items); 
```

[http://jsfiddle.net/madcapnmckay/j7Qxh/1/](http://jsfiddle.net/madcapnmckay/j7Qxh/1/)

希望这可以帮助。

# python - 安装 epdfree 的麻烦

> ID：10921655
> 
> 赞同：0
> 
> 时间：2012-06-06T20:22:03.423
> 
> 标签：python, enthought

我正在尝试在两台几乎相同的机器上安装 epdfree：Linux 2.6.18-308.1.1.el5，CentOS 版本 5.8.，64 位机器。（顺便说一句，我对 python 有点陌生。）

在一台机器上安装后，我运行 python 并尝试导入 scipy。一切顺利。

在另一台机器上，我尽我所能遵循所有相同的步骤，但是当我尝试导入 scipy 时，我被告知“ImportError：没有名为 scipy 的模块”。

据我所知，我在两台机器上做的*一切都是一样的。*我从同一个脚本安装，我在 epdfree 安装目录中运行 python，我能想到的一切。

有谁知道什么会阻止“import scipy”在一台机器上工作而在另一台机器上工作正常？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T20:47:46.733

好吧，事实证明有一个区别。两台机器上的文件权限设置不同。我在两台机器上都将 epdfree 安装为 su。在第二台机器上，当我试图在不进入“su”的情况下运行它时，一切都被锁定了。现在我的下一个任务是找出权限设置不同的原因。我猜这是umask设置的不同？好吧，这个我不会打扰任何人。但是，如果您愿意，请随时提供答案！谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T20:25:40.973

问题是您没有安装库 scipy，这是一个完全不同的 epdfree 库。

我猜你可以从 apt-get in linux 安装它，或者去他们的网站 www.scipy.org

# javascript - jquery 更改功能在一个页面上有效，但在另一个页面上无效

> ID：10921656
> 
> 赞同：0
> 
> 时间：2012-06-06T20:22:04.467
> 
> 标签：javascript, jquery, asp.net

[我正在处理的一个项目](http://mb.tmlinc.ca/)的点击功能有点麻烦。如果您在填充签入和签出日期然后切换属性时在主页上注意到，则两个输入中的值都将被清除。

```
// clear datepickers on property change
$('#DropDownListProperty').change(function () {
    $('#TextBoxCheckIn').val('');
    $('#TextBoxCheckOut').val('');
}); 
```

（如果你在萤火虫中，页面脚本上的第 276 行）

我在定价页面上需要同样的功能，但由于某种原因，更改事件永远不会触发。据我所知，我已经以完全相同的方式实现了代码，并增加了几行：

```
// clear datepickers and pricing on property change
$('#DropDownListProperty').change(function () {
    $('#TextBoxCheckIn').val('');
    $('#TextBoxCheckOut').val('');
    $('#pricing').hide();
    $('#personal-info').hide();
}); 
```

但这里的代码永远不会触发。（萤火虫中页面脚本的第 172 行）。我发誓我已经检查了 ID 上百万次，但它让我难以理解是什么阻止了这些字段被清除。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T20:35:05.657

与我之前评论过的错误相关，请尝试在您的代码中注释掉第 166 到 170 行，您的更改事件应该会触发而不会出现错误。

这是您应该注释掉的问题代码：

```
var endDate = new Date($('#TextBoxCheckIn').datepicker('getDate').getTime() + msecsInADay);

if (endDate != null) {
   $('#TextBoxCheckOut').datepicker("option", "minDate", endDate);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T20:32:43.173

第 166 行出现错误：

```
var endDate = new Date($('#TextBoxCheckIn').datepicker('getDate').getTime() + msecsInADay); 
```

返回：未捕获的类型错误：无法调用 null 的方法“getTime”

您尝试获取空白的 getDate 的时间。将这些行放入

```
 $('#TextBoxCheckIn').datepicker({ 
```

这应该有效

# c# - 为什么通过 3rd 方工具测试我的 asp.net mvc 2 应用程序时验证无法正常工作？

> ID：10921658
> 
> 赞同：0
> 
> 时间：2012-06-06T20:22:12.540
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-2, error-handling, fiddler

我正在使用对 DB2 表执行基本 CRUD 操作的 ASP.NET MVC 2 应用程序。在通过简单地在 IE 中加载应用程序来测试我的应用程序时，如果我将字符放在数字字段中或将数字放在日期字段中或与我的视图模型中的数据类型不兼容的其他形式的数据中，MVC 会在其末端执行正确的错误处理并返回视图，其中包含 Html.ValidationSummary() mvc 帮助器显示的相应模型状态错误消息。

但是，当我使用 IBM AppScan 等程序运行测试或使用 Fiddler2 伪造 POST 请求时，应用程序会崩溃。

我正在以两种不同的方式执行我认为是相同类型的测试，并且得到了不同的结果。

我也在使用 MVC 的 AntiForgeryToken 系统，但这并没有多大用处，因为这些程序只是扫描请求数据，找到令牌，并确保它包含在他们的伪造 POST 中。

另请注意，我在服务器端使用 DataAnnotations 来处理其中的几个验证，而不是获取注释应该返回的错误，而是将页面重定向到应用程序错误页面以获取未捕获的异常。

我实际上对这一切感到很困惑。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T13:12:18.147

LukLed 的评论让我对事情进行了全面检查，他是绝对正确的。我做错了。当我在 Fiddler 中伪造请求正文详细信息时，我以一种我知道数据不正确的方式进行操作，但数据也将属于正确的验证范围，因此会捕获错误。我的测试，例如为仅数字字段提交字符（当 AppScan 测试它时，我认为这是轰炸应用程序的那种东西）给出了正确的结果。

然而，LukLed 的评论让我真正看到了 AppScan 发送的 POST 数据。在每个应用程序错误中，该字段都是视图模型上的字符串。我允许数据通过而无需严格检查长度和“字符串数据右截断”。出现 SQL 错误。这也表明我需要更好地清理数据，因为 AppScan 提交的一些值如下：

'../../../../../../../../../../../../bin/id|' 对于帐号字段和

Foobar%0d%0aAppScanHeader:%20AppScanValue%2f1%2e2%2d3%0d%0aSecondAppScanHeader:%20whatever' 用于描述字段。

表单提交中不应允许使用诸如此类的特殊字符。

# excel - Excel：返回非空白单元格的数量

> ID：10921660
> 
> 赞同：5
> 
> 时间：2012-06-06T20:22:16.183
> 
> 标签：excel, function

我正在尝试找到一个函数，该函数将返回给定范围内具有数字的单元格数量。我想计算人们给出的回复数量，无论他们在单元格中输入的值如何。
我该怎么做呢？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-06T20:33:36.013

如果您正在寻找许多包含*数值*的单元格，那么`COUNT()`函数就是您要寻找的：

```
=COUNT(A1:D6) 
```

如果您正在查看具有非空白值（数字或其他）的单元格数量，那么`COUNTA()`是正确的功能：

```
=COUNTA(A1:D6) 
```

最后一个公式仅在没有任何单元格具有空字符串作为值的情况下才有效（即范围内的所有单元格都没有`=""`或它们中的等效项）。如果是这种情况，则应使用此公式：

```
=SUMPRODUCT((E7:G10<>"") * 1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T20:24:32.977

您可以使用 LEN 函数查找单元格输入的长度，然后测试它是否大于零。

```
=LEN(A1)>0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T20:34:47.590

您必须使用 count 来计算数字的数量：

```
=COUNT(Your_range) 
```

Count 不会计算没有数字的单元格的数量（但那些不计算呢？）

# c# - 在 Silverlight 3.0 ASP.NET 中使用 Web 服务

> ID：10921672
> 
> 赞同：0
> 
> 时间：2012-06-06T20:23:37.570
> 
> 标签：c#, asp.net, silverlight, web-services, silverlight-3.0

我有一个需要在 Silverlight 中调用的 Web 服务，但我不知道该怎么做。

我发现的大多数示例都不是 3.0，也不是在谈论 WPF。任何援助将不胜感激。

编辑：取得了一些进展，但仍然无法正常工作。它说它正在返回一个空白，但在我的服务中，我正在返回一个列表。（除非这不是调用我的方法。我假设它在我的方法名称中添加了“异步”。）

```
 FileServiceSoapClient sc = new FileServiceSoapClient();
        List<string> x = sc.GetFilesAsync(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T21:03:25.167

Silverlight 中的所有 Web 服务调用都必须是非阻塞的。您的 FileServiceSoapClient 应该有完成事件，您可以连接到其中包含服务调用的结果

例如类似的东西

```
FileServiceSoapClient sc = new FileServiceSoapClient();
sc.GetFilesCompleted += (sender, args) =>
{
     List<string> x = args.Result;
     //do something with "x" here
};
sc.GetFilesAsync(); 
```

# php - IIS 6：在 PHP 中创建 HTTP 500 错误处理程序

> ID：10921677
> 
> 赞同：1
> 
> 时间：2012-06-06T20:23:52.283
> 
> 标签：php, iis-6

必须有一种方法来配置 IIS 6，以便在发生 HTTP 500 错误时捕获和重定向用户。

我已经成功创建并实现了一个自定义 HTTP 404 错误页面（非常简单）。显然，HTTP 500 错误不可自定义（根据 Microsoft）：[http ://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/80cb8d8d-8fd8-4af5-bb3b-4d11fff3ab9c.mspx?mfr=true](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/80cb8d8d-8fd8-4af5-bb3b-4d11fff3ab9c.mspx?mfr=true)

我想做的是以某种方式捕获 HTTP 500 错误并重定向到一个页面，该页面在遇到 500 错误时记录并通过电子邮件发送给我们的 IT 支持人员。这是一个 PHP 实现，而不是 .Net

任何帮助表示赞赏。

# spring - 如何在 Spring MVC Web 应用程序中安全地存储数据库凭据？

> ID：10921678
> 
> 赞同：3
> 
> 时间：2012-06-06T20:24:07.047
> 
> 标签：spring, tomcat, spring-mvc, spring-data

我有一个需要连接到数据库的 Spring MVC Web 应用程序，并且数据源凭据当前（正在开发中）保存在应用程序上下文配置文件中，即在 WEB-INF\spring\application_context.xml 中，如下所示：

```
<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="username" value="my_username" />
    <property name="password" value="my_password" />
    <property name="url" value="my_datasource_url" />
    <property name="driverClassName" value="oracle.jdbc.driver.OracleDriver" />
</bean> 
```

在我将此应用程序部署到面向公众的 Tomcat 服务器之前，我想确保我不会让这些数据库凭据对全世界可见或被狡猾的黑客轻易发现。我是否可以保持原样，即在纯文本和 WEB-INF 下的 XML 文件中？如果没有，那么这种事情是否有最佳实践？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T20:30:21.053

根据定义，存储在`WEB-INF`文件夹中的文件无法从外部世界访问。例如，如果您将 JSP 文件放在那里，则没有用户可以直接访问该文件 - 例如，可以通过从另一个 JSP 导入或包含来引用它。

话虽如此，您的凭据是安全的，但在`applicationContext.xml`. 您是否将这些凭据推送到源代码控制？

`.properties`最安全的方法是在硬盘上某处的外部文件中提取敏感且经常更改的配置。Spring 完全能够读取`.properties`文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T20:59:33.277

要考虑的另一件事是进行 JNDI 查找。JNDI 将包含在 servlet 容器（在您的情况下为 tomcat）中，仅允许通过当前从 Tomcat 部署的 webapp 连接到数据库。

这种方式还在构建管理和开发之间创造了一种孤立的体验，所以如果你明白我的比喻，开发就没有汽车的钥匙。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T20:28:31.873

你可以让它在启动时询问密码。但通常我看到的是 xml 文件中的密码，这些密码经过 chmodded 和 chowned，只能由 Web 软件本身访问。没有简单的好解决方案。

一个基本步骤是确保 tomcat 用户只有它需要的访问数据库的权限，所以如果它被入侵，损害是有限的。

# ruby - 在 ruby 迭代器中访问模块

> ID：10921681
> 
> 赞同：1
> 
> 时间：2012-06-06T20:24:30.150
> 
> 标签：ruby, module, iterator

似乎在任何地方都找不到这个：

```
Module::ModelClassOne.all.each do
  Module::ModelClassTwo.all.each do
    # get an error of undefined constant ModelClassTwo
  end
end 
```

是什么赋予了？我尝试了几种不同的选择：

```
Module::ModelClassOne.all.each do
  ::Module::ModelClassTwo.all.each do
    # get an error of undefined constant ModelClassTwo
  end
end 
```

和

```
Module::ModelClassOne.all.each do
  ModelClassTwo.all.each do
    # get an error of undefined constant ModelClassTwo
  end
end 
```

和

```
Module::ModelClassOne.each do
  ::ModelClassTwo.each do
    # get an error of undefined constant ModelClassTwo
  end
end 
```

没有任何效果，这让我感到恶心。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T20:54:45.310

该`each`方法不会重新定义执行上下文，因此这可能是`ModelClassTwo`未按预期定义的情况。

确保`ModelClassTwo`实际加载。您可能忘记了`require`该文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T21:17:01.917

哇，好尴尬。这完全是一个错字，与 rake 任务如何吐出错误有很大关系。我试图分配 model.attributes = { option: option.id } 而不是 model.attributes = { option_id: option.id } 并且它给了我一个来自属性哈希的“未初始化的常量选项”错误。在这里工作太久了。在这里问一个多么可怕的第二个问题。对不起伙计们！

# php - 如何在 PHP 中使用变量来处理复杂的关联数组

> ID：10921684
> 
> 赞同：2
> 
> 时间：2012-06-06T20:24:33.547
> 
> 标签：php, multidimensional-array

假设我有以下多维数组：

```
$fruits['apple']['name'] = 'macintosh'; 
```

有没有办法在单个变量中引用整个关键路径？

我想以某种方式执行以下操作：

```
$path = "['apple']['name']";
echo $fruits[$path];

//output would be "macintosh" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T20:28:27.903

有没有办法在单个变量中引用整个关键路径？

**1）**以这样的方式：`$fruits[$variable]`，答案是**否定的，没有**。

当然，有几种方法可以将单个 $variable 拆分为两个或多个，然后分别使用它的各个部分 ( `$fruits[$part1][$part2]`)

这是一个通用的解决方案：

```
function get_path($array, $path)
{
    $value = $array;
    $parts = explode("']['", trim($path, "[']"));
    foreach($parts as $key)
    {
        $value = $value[$key];
    }
    return $value;
}

$fruits['apple']['name'] = 'macintosh';
$path = "['apple']['name']";
echo get_path($fruits, $path);

// output = 'macintosh' 
```

* * *

**2）**正如还指出的那样，您可以使用“eval”，不建议这样做：

```
$fruits['apple']['name'] = 'macintosh';
$path = "['apple']['name']";
eval('echo $fruits' . $path . ';');

// output = 'macintosh' 
```

* * *

**3）**最后，如果您想使用引用变量访问数组的元素，那么只需：

```
$fruits['apple']['name'] = 'macintosh';
$path &= $fruits['apple']['name'];
echo $path;  // output = 'macintosh'

$path = 'MSX';
echo $fruits['apple']['name'];  // output = 'MSX' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T20:39:07.530

显然有一种可怕的、永远不会使用的方法：[`eval()`](http://php.net/manual/en/function.eval.php)

但如果你真的想做这样的事情，我更喜欢这种方法：

```
function &array_value_by_address (&$array, $address, $addressSeparator = '/') {
  $parts = explode($addressSeparator, $address);
  $thisLevel = array_shift($parts);
  if (isset($array[$thisLevel])) {
    if ($parts) {
      $ref = &array_value_by_address($array[$thisLevel], implode($addressSeparator, $parts));
      return $ref;
    } else {
      return $array[$thisLevel];
    }
  }
} 
```

由于函数声明中的引用，还可以在变量中捕获返回值并使用它来修改源数组。这是可选的 - 如果您`&`在调用时省略前缀，则捕获的值将只是一个 copu 而不是引用。

需要注意的是 - 如果数组中的“地址”不存在，函数将返回`NULL`，但无法区分这种情况和`NULL`存储在数组中的值。

[看到它工作](http://codepad.org/A18wwSy8)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-08T02:34:57.407

J Brun 的 #3 答案是您最好的选择，但是，他的答案不正确，因为他演示了按位与运算符 (&=) 而不是引用赋值。这是更正后的代码：

```
$fruits['apple'] = array( 'name' => 'macintosh' );

$path = &$fruits['apple']['name'];

echo $path; // outputs 'macintosh'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T20:30:10.350

参考可能是您需要的：

```
$path = &$fruits['apple']['name']; 
```

现在每次访问`$path`时`$fruits['apple']['name']`，都会使用（或更改等）的值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T20:32:43.983

您想要做的事情不是直接可能的 - 如果变量被链接起来，那将是模棱两可的。

您将需要编写一个访问器函数，例如

```
define('SEPARATOR','|');

function getElement($array,$path) {
  $path=explode(SEPARATOR,$path);
  $out=&$array;
  foreach ($path as $step) {
    if (!isset($out[$step])) return null;
    $out=$out[$step];
  }
  return $out;
}

$path="apple|name";
echo getElement($fruits,$path); 
```

# xcode - 在苹果 osx lion 上，不要在路径中

> ID：10921690
> 
> 赞同：1
> 
> 时间：2012-06-06T20:24:55.470
> 
> 标签：xcode, macos, path, makefile, installation

我对苹果和 osx 还很陌生。我从应用商店安装了 xcode，现在我的文件系统中有一个可执行文件：

```
192:~ herbert$ locate make | grep bin
/Applications/Xcode.app/Contents/Developer/usr/bin/gnumake
/Applications/Xcode.app/Contents/Developer/usr/bin/make
/opt/X11/bin/gccmakedep
/opt/X11/bin/makedepend
/opt/local/var/macports/sources/rsync.macports.org/release/tarballs/ports/cross/m68k-elf-binutils/files/binutils-makeinfo-check.patch
/opt/local/var/macports/sources/rsync.macports.org/release/tarballs/ports/cross/mipsel-linux-binutils/files/300-001_ld_makefile_patch.patch
/opt/local/var/macports/sources/rsync.macports.org/release/tarballs/ports/devel/libinchi-1/files/patch-INCHI-1-API_INCHI_API_gcc_so_makefile-makefile.diff
/opt/local/var/macports/sources/rsync.macports.org/release/tarballs/ports/science/indi/files/patch-libindi.pc.cmake.diff
/usr/X11/bin/gccmakedep
/usr/X11/bin/makedepend
/usr/bin/makeinfo
/usr/sbin/makedbm
192:~ herbert$ 
```

不幸的是，它不在我的道路上。由于将 /Application/Xcode.app/Content/Developer/usr/bin/ 附加到我的路径将是一个选项，这似乎是不应该做的事情。我可以以某种方式将其安装到 /usr/... 或 /opt/local/... 吗？

```
192:~ herbert$ echo $PATH
/opt/local/bin:/opt/local/sbin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin
192:~ herbert$ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T20:52:31.690

如果要从命令行构建，则必须安装命令行工具（或旧版本的 Unix 开发工具）。

在 4.3.1 中，执行此操作的方法是启动 Xcode，打开首选项，单击下载选项卡，单击组件子选项卡，然后单击“命令行工具”旁边的安装按钮。

在早期版本中，等效项可能是自动的，也可能是初始安装程序中的选择，也可能是单独运行的安装程序。

还有一个`xcrun`工具，它可以让您在不安装 CLT 的情况下使用工具链，对于简单的任务，您可以设置`CC`为`xcrun clang`, `MAKE`to`xcrun make`等，甚至硬链接`xcrun`到`/usr/local/bin/clang`,`/usr/local/bin/make`等。但是以这种方式设置一切是大量的工作，但仍然不足以构建许多源代码分布式项目。

# ruby-on-rails - Ruby：如何返回数组列包含给定字符串的所有行？

> ID：10921691
> 
> 赞同：1
> 
> 时间：2012-06-06T20:24:55.767
> 
> 标签：ruby-on-rails, ruby, database

我正在处理一些市政数据，由于一些市政在技术上位于多个县内这一事实使情况变得复杂——我在数据库中将其作为数组处理，如下所示：

```
[<Municipality id: 11590, name: "Wisconsin Dells", county: ["Adams", "Columbia", "Juneau", "Sauk"], latitude: nil, longitude: nil, created_at: "2012-06-06 20:05:20", updated_at: "2012-06-06 20:05:20", municipality_type: "City">] 
```

如何**在 Ruby**中构造一个调用，该调用将返回`county`包含给定字符串的所有市政当局？

例如，理想情况下，这就是我将列出给定县的所有城市的方式。

编辑：我`serialize :county`在我的`Municipality`班上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T20:31:19.040

```
class Muni < ActiveRecord::Base
  def self.for_county(county)
    where %Q[county like '%"#{county}"%']
  end
end 
```

或者，速度较慢，但​​如果您“只是不想弄乱 SQL”：

```
def self.for_county(county)
  all.select { |m| m.county.include? county }
end 
```

# c# - 在 Windows Phone 上使用 C# 中的 WebClient 发布数据对我不起作用

> ID：10921693
> 
> 赞同：1
> 
> 时间：2012-06-06T20:24:59.893
> 
> 标签：c#, silverlight, windows-phone-7.1

```
// string url = "http://localhost:19315/test/postWithParamters?param1=1&param2=2";
string url = "http://m.mydomain.com/1.0/services/logException?p1=WindowsPhone&p2=a&p3=b&p4=2012-05-01T14:57:32.8375298-04:00&p5=someuser&p6=test&p7=info&p8=data";

WebClient postWithParamsClient = new WebClient();
postWithParamsClient.UploadStringCompleted += new UploadStringCompletedEventHandler(postWithParamsClient_UploadStringCompleted);

Uri address = new Uri(url, UriKind.Absolute);
postWithParamsClient.Headers["Content-Length"] = url.Length.ToString();
postWithParamsClient.UploadStringAsync(address, "POST", string.Empty);

private void postWithParamsClient_UploadStringCompleted(object sender, UploadStringCompletedEventArgs e)
{
  if (e.Error == null)
    MessageBox.Show("WebClient: " + e.Result);
  else
    MessageBox.Show("WebClient: " + e.Error.Message);
} 
```

当我执行上述代码时，它适用于第一个被注释掉的 URL。但是，当我执行第二个代码时，我得到了一般的“NotFound”错误。Fiddler 中没有发布任何内容。所以我把有问题的网址粘贴到“作曲家”中。当我执行请求时，它按预期工作。

我究竟做错了什么？为什么我不能调用那个特定的端点？它在提琴手中工作。它适用于 JQuery。我只是无法让它从 SL for WP 中工作。

感谢您的任何见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T20:01:28.113

我建议尝试对参数进行编码。

```
string url = string.Format("http://m.mydomain.com/1.0/services/logException?p1=WindowsPhone&p2=a&p3=b&p4={0}&p5=someuser&p6=test&p7=info&p8=data", HttpUtility.UrlEncode("2012-05-01T14:57:32.8375298-04:00")); 
```

另外，一般来说：您不是在这里执行 POST 请求，而是执行 GET 请求。Content-Length 不应设置为 URL 的长度，而应设置为 POST 数据的长度（在本例中为 string.Empty）。

实际上，您可以调用 DownloadStringAsync(url) 来实现相同的目的，因为您没有发布任何内容。

```
WebClient wc = new WebClient();
wc.DownloadStringAsync(new Uri(url)); 
```

要实现 POST 请求，您可以尝试以下操作：

```
string url = "http://m.mydomain.com/1.0/services/logException";
string postdata = string.Format("p1=WindowsPhone&p2=a&p3=b&p4={0}&p5=someuser&p6=test&p7=info&p8=data", HttpUtility.UrlEncode("2012-05-01T14:57:32.8375298-04:00"));

WebClient postWithParamsClient = new WebClient();
postWithParamsClient.UploadStringCompleted += new UploadStringCompletedEventHandler(postWithParamsClient_UploadStringCompleted);

postWithParamsClient.Headers["Content-Length"] = postdata.Length.ToString();
postWithParamsClient.UploadStringAsync(new Uri(url), "POST", postdata);

private void postWithParamsClient_UploadStringCompleted(object sender, UploadStringCompletedEventArgs e)
{
  if (e.Error == null)
    MessageBox.Show("WebClient: " + e.Result);
  else
    MessageBox.Show("WebClient: " + e.Error.Message);
} 
```

此外，MessageBox 可能会抛出 InvalidOperationException（跨线程）。如果是这样，请像这样调用它们：

```
private void postWithParamsClient_UploadStringCompleted(object sender, UploadStringCompletedEventArgs e)
{
  Dispatcher.BeginInvoke(() => {
    if (e.Error == null)
      MessageBox.Show("WebClient: " + e.Result);
    else
      MessageBox.Show("WebClient: " + e.Error.Message);
  });
} 
```

# c# - WinCE 注册表值监视器

> ID：10921695
> 
> 赞同：0
> 
> 时间：2012-06-06T20:25:07.700
> 
> 标签：c#, events, registry

晚上所有，

我需要一些关于在 WinCE 中监视注册表值的建议。我正在编写一个 Windows 窗体应用程序，它需要监视注册表中的值，并在它发生变化时触发一个事件，有人能指出我如何实现这一点的正确方向吗？

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T09:52:26.093

我设法使用 PInvoke 代码实现了这一点：

```
 [DllImport("coredll.dll", SetLastError = true)]
    static extern int RegOpenKeyEx(UIntPtr hKey, string lpSubKey, uint ulOptions, int samDesired, out UIntPtr phkResult);

    [DllImport("coredll.dll", SetLastError = true)]
    static extern UIntPtr CeFindFirstRegChange(UIntPtr hKey, [In, MarshalAs(UnmanagedType.Bool)] bool bWatchSubtree, uint dwNotifyFilter);

    [DllImport("coredll.dll", SetLastError = true)]
    public static extern UInt32 WaitForSingleObject(UIntPtr Handle, UInt32 Wait);

    [DllImport("coredll.dll", SetLastError = true)]
    static extern Int32 CeFindNextRegChange(UIntPtr hChangeHandle);

    [DllImport("coredll.dll", SetLastError = true)]
    static extern Int32 CeFindCloseRegChange(UIntPtr hChangeHandle);

    [DllImport("coredll.dll", SetLastError = true)]
    public static extern int RegCloseKey(UIntPtr hKey); 
```

并通过使用 WaitForSingleObject。

# lotus-notes - 计算取决于单选按钮选择的复选框选择

> ID：10921697
> 
> 赞同：0
> 
> 时间：2012-06-06T20:25:19.990
> 
> 标签：lotus-notes, xpages

我希望能够在 XPages 的单选按钮中选择一个值，然后使用该值来确定一组复选框中的选择。

单选按钮的选择是使用 DbLookup 找到一个视图。有一些 javascript 将单选按钮查找的文本值放入隐藏字段。基于该值，复选框选择由另一个 DbLookup 确定。

我一直在摆弄代码，即使我显示它，也永远无法让它使用隐藏字段的更新值来重新计算复选框的选择。

```
<xp:selectItems>
    <xp:this.value>
    <![CDATA[#{javascript: var viewName=reportDoc.getItemValueString("viewChoice");
    var tmp = @DbLookup(@DbName(),"dbprofile",viewName,"Value");
    @If(@IsError(tmp),"None",tmp)
    }]]></xp:this.value>
</xp:selectItems> 
```

我敢肯定这实际上很简单，但我就是想不通。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T20:39:24.620

您需要设置单选按钮的 onChange 事件以部分刷新复选框控件。这可确保刷新复选框控件的值。

checkBox 控件可以使用 getComponent("id of radio button control").getValue() 读取单选按钮控件的值，并使用该值代替 DbLookup 的隐藏字段。

# android - 不从服务器上存在的 .txt 文件中读取文本

> ID：10921699
> 
> 赞同：0
> 
> 时间：2012-06-06T20:25:33.220
> 
> 标签：android, android-intent, android-emulator, android-widget, android-ndk

> **可能重复：**
> [未从服务器读取文本](https://stackoverflow.com/questions/10931043/not-reading-text-from-server)

我正在尝试从服务器上存在的 .txt 文件中读取文本，但我的代码没有从文件中读取文本我使用的是 android 2.1 版，请您告诉我如何处理异常以捕获错误.

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    TextView tv= new TextView(this);
    StringBuilder content = new StringBuilder();

    try {
        URL url = new URL("http://linktomywebsite/textfile.txt");
        BufferedReader in = new BufferedReader(new InputStreamReader(url.openStream()));
        String str;
        while ((str = in.readLine()) != null) {
            content.append(str +"\n");
            tv.setText(content);
        }
        in.close();
    } catch (MalformedURLException e){
    } catch (IOException e) {
        e.printStackTrace();
    }

}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T20:30:32.377

```
 TextView tv= new TextView(this); 
```

这将创建一个独立于当前可见布局的新 TextView。

您不会将这个新创建的 TextView 放在布局中的任何位置，因此不会显示包含在该 TextView 中的结果

假设您的代码可以从您的网站检索文本（对我来说看起来不错），这可能就是您没有看到任何结果的原因。

试着打电话

```
setContentView(tv); 
```

在你之后`try { } catch { }`看看是否有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T20:46:14.190

您必须在主布局中链接现有的 TextView

```
tv = (TextView) findViewById (R.id.myTextView); 
```

# arrays - 将数组哈希存储到数组中？

> ID：10921700
> 
> 赞同：1
> 
> 时间：2012-06-06T20:25:34.473
> 
> 标签：arrays, perl, hash, wrapper, pipe

我必须为管道运行修改一些 Perl 脚本，并编写一个包装脚本以使用给定的一组输入参数运行它们。在我这样做之前，我必须了解第一个程序中发生了什么。我需要帮助来破译这段代码：

```
# declare and initialise an empty hash
my %to_keep= ();

# an array
@line = ('some\one', 'two', 'three', 'four');

# trim the identifier
$line[0]=~s/\/[1]$//;

# store this into an array
@{$to_keep{$line[0]}{'1'}}=($line[1],$line[2]);
print @; 
```

我熟悉 perl 替换函数，s///。它去：

```
s/text-regex_to_be_replaced/replacement/modifier. 
```

但是，我不太确定上面的代码在做什么。如果我理解正确，它将用 line[1] 替换每次出现的“\”，直到字符串的结尾（由“$/”表示）。这个对吗？

我不确定的另一部分是“商店”评论下方的代码。我认为它将数组的哈希存储到数组中。有人可以解释代码是如何工作的以及给定变量它打印出什么吗？另外，如何检索存储在数组中的数据？

额外的问题：有人可以解释为管道运行修改 perl 脚本是如何工作的吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T21:02:14.487

嗯，这是有线的。

```
s/\/[1]$//; 
```

只会匹配并删除字符串末尾的 /1 。所以在你的例子中它没有影响。

```
@{$to_keep{$line[0]}{'1'}}=($line[1],$line[2]); 
```

分解，在左侧你得到 `$to_keep{'some\one'}{1}`的是示例中未定义的！但是如果我们说它会给你 value `foo`，那么你取这个 value 并替换 in ，`@{foo}`这基本上意味着使用 value`foo`作为数组名称，因此`@foo`.

在右侧，您将 的第二个和第三个元素`$line`作为列表保存到这个变量名中，`@foo`.

如果我们忽略未定义并尝试猜测意图，您会得到一个定义自己变量名的脚本。使用列表的第一个元素作为变量名，并将其设置为等于列表的其余部分

# asp.net-mvc-3 - LINQ 的 *OrDefault 在 MVC3 + ActiveRecord 中引发异常

> ID：10921701
> 
> 赞同：3
> 
> 时间：2012-06-06T20:25:40.300
> 
> 标签：asp.net-mvc-3, castle-activerecord

受到[这个问题](https://stackoverflow.com/questions/2640303/linq-to-entites-how-should-i-handle-system-invalidoperationexception-when-check/2640314)的启发，我决定在我的 MVC3/ActiveRecord 应用程序中尝试一下。

我有一堆模型已经在工作了，还有一些视图可以处理这些模型。这里没什么特别的。我的一个模型叫做`AppSession`.

基于上述问题，我希望这会起作用：`AppSession.FirstOrDefault(a => ...) ?? null`.

它没有用。我仍然得到一个`InvalidOperationException`. `FirstOrDefault`和也是如此`SingleOrDefault`。我结束了我的电话`try/catch`以绕过它。

我在这里做错了什么？

**编辑：**根据要求，实际代码是：

```
void getAnAppSession() {
    AppSession sessions = project.AppSessions.FirstOrDefault(a => a.Ip == ip && a.MacAddress == macAddress && a.Platform == platform && a.Version == version && a.EndTime == null)
} 
```

`ip`, `macAddress`,`platform`和`version`都是可验证不为空的方法变量。我的架构`AppSessions`（因此，我的班级的属性）包括：

*   ID（整数，非空）
*   StartDate（日期时间，不为空）
*   结束日期（日期时间，空）
*   ip（字符串，不为空）
*   MacAddress（字符串，不为空）
*   平台（字符串，不为空）
*   版本（字符串，不为空）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T21:06:21.847

也许你`project.AppSessions`自己是空的？这将导致该`FirstOrDefault()`方法抛出错误。您可能想在调用之前检查它是否为 null，`FirstOrDefault`如果它为 null，则创建一个新的 AppSession 对象：

```
AppSession sessions = (project.AppSessions as AppSession ?? new AppSession())
    .FirstOrDefault(a => a.Ip == ip && 
                    a.MacAddress == macAddress && 
                    a.Platform == platform && 
                    a.Version == version && 
                    a.EndTime == null); 
```

# android - 用图像 android 移动我的进度条

> ID：10921703
> 
> 赞同：9
> 
> 时间：2012-06-06T20:25:44.480
> 
> 标签：android, xml, image, progress-bar

我有这个代码

是一个用红色填充的进度条

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@android:id/background">
        <shape>
            <gradient
            android:startColor="#c3c3c3"
                android:centerColor="#c3c3c3"
                android:centerY="0.75"
                android:endColor="#7f7f7f"
                android:angle="270"/>
            <padding android:left="1dp"
            android:top="1dp"
            android:right="1dp"
            android:bottom="1dp"/> 
        <corners android:radius="10dp"/> 
    </shape>
</item>

<item android:id="@android:id/secondaryProgress">
    <clip>
        <shape>
            <gradient
                android:startColor="#234"
                android:centerColor="#234"
                android:centerY="0.75"
                android:endColor="#a24"
                android:angle="270"/>
            <padding android:left="1dp"
                android:top="1dp"
                android:right="1dp"
                android:bottom="1dp"/> 
            <corners android:radius="10dp"/> 
            </shape>
    </clip>
</item>

<item android:id="@android:id/progress">
    <clip>
       <shape>
            <gradient
                android:startColor="#a42c48"
                android:centerColor="#a42c48"
                android:centerY="0.75"
                android:endColor="#eb3e67"
                android:angle="270"/>
            <padding android:left="1dp"
                android:top="1dp"
                android:right="1dp"
                android:bottom="1dp"/> 
            <corners android:radius="10dp"/> 
        </shape>
    </clip>
    </item>
</layer-list> 
```

看起来像这样

![在此处输入图像描述](../Images/e94860c4f38acf294bcbdc37eb5f622e.png)

现在我想添加一个图像以在进度条填满的同时移动，如下图所示

![在此处输入图像描述](../Images/fa9e4de2909a68fabb709e5b195fc833.png)

请帮我

提前致谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-06T20:35:30.440

也许您可以使用您的图层列表设置搜索栏（而不是进度条）并将您的图像添加为拇指擦洗器？

```
<SeekBar
    android:id="@+id/seekBar1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:thumb="@drawable/your_android_image"
    android:progressDrawable="@drawable/your_layerlist_drawable"/> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-06T20:45:56.937

我认为这个动态图像可以使用 seekbar 完成，这个图像被称为 thum drawable

![在此处输入图像描述](../Images/859985f97ca663c6846f815349b005db.png)

你可以试试这个[教程](http://www.mokasocial.com/2011/02/create-a-custom-styled-ui-slider-seekbar-in-android/)，它会对你有很大帮助！！

将 seekbar 属性设置`android:thumb="@drawable/seek_thumb"`为指向您想要的可绘制对象

# c# - Powershell 相当于 LINQ 的 Select 命令？

> ID：10921712
> 
> 赞同：26
> 
> 时间：2012-06-06T20:26:52.183
> 
> 标签：c#, .net, linq, powershell

我正在尝试运行以下 Powershell 脚本。

```
import-module ActiveDirectory

$computers = Get-ADComputer -filter * -SearchBase "OU=myOU,DC=vw,DC=local" | select-object name

Invoke-Command -ComputerName $computers -ScriptBlock {gpupdate /target:Computer} 
```

问题`$computers`不是`string[]`像`-ComputerName`预期的那样。它实际上是一个`ADComputer`带有一个名为 name 的参数的数组。

```
# Get-ADComputer -filter * -SearchBase "OU=myOU,DC=vw,DC=local" | select-object name | Format-Custom

class ADComputer
{
  name = PC1
}

class ADComputer
{
  name = PC2
}

class ADComputer
{
  name = PC3
} 
```

获取名称字符串数组的正确方法是什么？如果我在 C# 中，我知道它会是

```
string[] computerNames = computers.Select(computer => computer.name).ToArray(); 
```

但我想学习如何在 Powershell 中正确地做到这一点。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-06T20:33:04.400

您可以使用

```
Select-Object -ExpandProperty Name 
```

或（可能是最接近的等价物）

```
ForEach-Object { $_.Name } 
```

请注意，要强制结果为数组（例如，如果您想访问其`Count`属性），您应该用 . 将表达式括起来`@()`。否则结果可能是一个数组*或*单个对象。

# rmi - Eclipse 插件 RMI

> ID：10921714
> 
> 赞同：0
> 
> 时间：2012-06-06T20:26:54.577
> 
> 标签：rmi

谁能帮我发送带有 Eclips Indigo 的 RMI 插件。我已经尝试了很多将 RMI 与 Eclips 一起使用，但我不能，请帮助我了解它，因为我非常需要它……

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T09:50:32.983

你有这个用于 Eclipse 的[http://www.genady.net/rmi/index.html RMI 插件。](http://www.genady.net/rmi/index.html)有安装和使用说明，只需阅读文档即可。

# python - python共享全局模块变量问题

> ID：10921717
> 
> 赞同：0
> 
> 时间：2012-06-06T20:26:59.807
> 
> 标签：python, django, namespaces, python-module

我正在为我的 Django 项目编写小型应用程序。这个想法是创建某种小部件——可以通过包含标签添加到模板中的小视图功能，以显示一些辅助信息（例如博客记录、快速链接列表、菜单等）。为此，我想创建类似于默认`templatetag`注册机制的东西。通常我需要以下组件：

*   自定义装饰器来注册这些视图函数
*   某些功能将在启动时搜索所有已安装应用程序中的特定模块（现在是“widgets.py”）（可能从 settings.py 调用）

我现在写的看起来像这样：

```
# -*- coding: utf-8 -*-

REGISTERED_WIDGETS = []

class Library(object):
    """
    Utility class for registering defined widgets
    """
    def widget(self, view=None, name=None, form_class=None):
        if name is None:
            name = view.__name__
        def decorator(view):
            print 'registering', view
            REGISTERED_WIDGETS.append((view, name, form_class))
            def wrapper(request, *args, **kwargs):
                return view(request, *args, **kwargs)
            return wrapper
        if view is not None:
            return decorator(view)
        else:
            return decorator

def search_widgets():
    """
    Search for 'widgets.py' modules inside installed applications and import them,
    hence initializing its registration
    """
    from django.conf import settings

    for app in settings.INSTALLED_APPS:
        try:
            module = __import__(app + '.widgets')
            print module
        except ImportError:
            pass
        else:
            print 'Imported widgets from ', app

if __name__ == '__main__':
    search_widgets()
    print REGISTERED_WIDGETS 
```

为了测试它，我在我的一个应用程序中的 widgets.py 中添加了这个存根小部件：

```
# -*- coding: utf-8 -*-

from experiments.widgets.base import Library

register = Library()

@register.widget(name='dummy')
def dummy_widget(request):
    pass 
```

我现在遇到了一个愚蠢的问题——当运行这个模块时，我想看到 REGISTERED_WIDGETS 变量充满了找到的小部件，但它是空的。实际上我看到了这个输出：

```
>>> %run widgets/base.py
<module 'django' from '/usr/lib/python2.7/dist-packages/django/__init__.pyc'>
Imported widgets from  django.contrib.admin
registering <function dummy_widget at 0x364f320>
<module 'experiments' from '/home/east825/Development/pycharm-experiments/experiments/../experiments/__init__.pyc'>
Imported widgets from  experiments.layout
[] 
```

似乎我忘记了关于 python 共享全局变量行为的一些非常重要的事情。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T20:37:37.997

您的模块 base.py 有可能被导入两次？

在 base.py 的开头添加一个 print 带有“print 'base.py executed'”之类的东西。

编辑：甚至更好，打印 id(REGISTERED_WIDGETS)

# sql - 同一表上的左连接 - 无法识别嵌套的 SELECT 语句

> ID：10921719
> 
> 赞同：-1
> 
> 时间：2012-06-06T20:27:03.083
> 
> 标签：sql

我试图从同一个表中根据不同的条件提取两个不同的值，并且在同一个表的左连接中它无法识别 SELECT 语句。

错误如下：

```
Dynamic SQL Error
SQL error code = -104
Token unknown - line 7, char -1
SELECT. 
```

SQL 语句：

```
SELECT
b.dept,b.typ,c.brand,c.style,c.ext,c.description,
max(c.price),max(c.last_cost),sum(c.quan) "TOTAL INV",D.QUAN "WEB INV"
FROM
invt c
left outer join (
    SELECT dept,typ,brand,style,ext,description,sum(quan) as d.quan
    FROM invt WHERE store in ('997')
    group by dept,typ,brand,style,ext,description) d 
on (b.store = d.store and b.style = d.style and b.brand = d.brand)
LEFT OUTER JOIN
sku b
on c.style = b.style and c.brand = b.brand
where c.quan <> 0 or c.ord <> 0
GROUP BY
b.dept,b.typ,c.brand,c.style,c.ext,c.description 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T20:30:06.107

尝试更改此行：

```
SELECT dept,typ,brand,style,ext,description,sum(quan) as d.quan 
```

对此：

```
SELECT store,dept,typ,brand,style,ext,description,sum(quan) as quan 
```

您在这里不需要`d`别名。

更新：

正如@Jeremy Holovacs 提到的，您似乎也在使用 d.store 进行连接，但它在您的子查询中不存在。

# django - 无法在 Django 模板标签、Twitter Bootstrap 中嵌入 YouTube 链接

> ID：10921721
> 
> 赞同：1
> 
> 时间：2012-06-06T20:27:26.063
> 
> 标签：django, youtube, django-templates, twitter-bootstrap

我目前正在尝试通过 Django 表单在 Twitter Bootstrap 布局中嵌入用户提交的 YouTube 链接。

视频的空间出现了，源代码反映了正确的信息和链接，但是视频和播放器都没有出现。我还使用此链接中的“flex-video”类进行响应式布局[http://poslavsky.com/blog/2012/04/01/responsive-video-in-twitter-bootstrap/](http://poslavsky.com/blog/2012/04/01/responsive-video-in-twitter-bootstrap/)但它没有当该类更改为另一个名称（例如“video”）时也可以工作。

这是代码：

```
<div class="row">
<div class="span12">
    <span>{{story.author}}</span><br>

    <span>{{story.zip_code}}</span><br>

    <span>{{story.date}}</span><br>

    <p>{{story.copy}}</p>
    <div class="image">
        {% if story.pic %}
        <img src="{{ story.pic.url }}" alt="some_image_alt_text" />
        {%  endif %}
    </div>
    <div class="flex-video">
            {% if story.video %}
            <p> <iframe width="460" height="250" src="{{ story.video}}" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>
                </p>
        {% endif %}
        </div>
</div> 
```

任何见解都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T15:27:10.157

我猜想`{{story.video}}`给 Youtube 视频 Url 类似于这个的东西，`http://youtube.com/watch?v=ASO_ypdnsQ`它是直接的 youtube url，而不是嵌入 url。

同一视频的嵌入 URL 与直接 URL 不同，如下所示`http://youtube.com/embed/....`

我创建了一个自定义模板标签，方法如下。

```
import urlparse
...

@register.inclusion_tag('video_embed.html', takes_context=True)
def youtube_embed(context, url):
    url_data = urlparse.urlparse(url)
    query = urlparse.parse_qs(url_data.query)
    video_id = query["v"][0]
    context['embed_url'] = ('http://youtube.com/embed/%s' % video_id)
    return context 
```

然后，在模板中加载标签，并传递 youtube url。它将从普通网址提供嵌入网址。

# r - 如何让 RStudio 将 R-markdown 发布到 rpubs.org 站点？

> ID：10921722
> 
> 赞同：3
> 
> 时间：2012-06-06T20:27:28.717
> 
> 标签：r, markdown, knitr, rstudio, r-markdown

根据[RStudio 团队的回复](http://support.rstudio.org/help/discussions/questions/666-how-do-i-publish-to-rpubs)，“标准”解决方案是[按照“将 R Markdown 与 RStudio 一起使用”的说明进行操作](http://www.rstudio.org/docs/authoring/using_markdown)，并注意第三个屏幕截图中带有“发布”按钮的按钮。我非常感谢他们建立了一个非常简单的解决方案。

但是，带有漂亮箭头和地球图片的“发布”按钮不会出现在我的预览窗口中，无论我多么想要它。

我`RStudio.version()`在 Mac OS X Lion (10.7) 中使用 RStudio (0.96.231)，带有最新的 R 版本和更新`markdown`包`knitr`。我有一个 RPubs 帐户，并按照[RPubs 说明从 RStudio 中创建和预览从 R markdown 文件呈现的 html](http://www.rpubs.com/about/getting-started)。

这似乎与[RStudio 支持博客上关于 not-seeing a Publish button](http://support.rstudio.org/help/discussions/problems/2513-problem-with-publish-to-rpubs-windows-rstudio-096231)的帖子有关。

但是，这个问题是不同的，因为它实际上需要将内容放到[RPubs](http://www.rpubs.com/)上。我[在 RStudio 支持博客上发布了一个类似的问题](http://support.rstudio.org/help/discussions/questions/666-how-do-i-publish-to-rpubs)。

Rstudio 团队已经回答[了如何从 R Markdown 源代码中获取嵌入在 RStudio 渲染的 html 中的图形](http://support.rstudio.org/help/discussions/questions/664-how-do-i-get-graphics-embedded-in-rpubs-published-from-rstudio)；特别是通过将我指向这个非常有用的页面来解释 RStudio使用[knitr呈现和打包](http://yihui.name/knitr/)[R Markdown](http://cran.r-project.org/web/packages/markdown/index.html)的方式：

[使用 RStudio 渲染 R Markdown](http://www.rstudio.org/docs/authoring/using_markdown)

最后，如果您还没有听说过 R-markdown（我刚刚听说过），请访问此处[了解有关 R-markdown](http://www.r-bloggers.com/announcing-the-r-markdown-package/)的详细信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T06:09:06.803

由 RStudio 的 Josh Paulson 确认，这[是 OS X Lion 中 RStudio 的一个错误，](http://support.rstudio.org/help/discussions/questions/666-how-do-i-publish-to-rpubs)而不是一些奇怪的额外的未说明的依赖项或不清楚的说明。

只需安装 v0.96.233 或更高版本，这应该可以在 Mac OS X Lion (10.7) 上运行。

实际上，[实现和说明](http://www.rstudio.org/docs/authoring/using_markdown)非常简单。

# c# - 如何在 MVC4 RC WebApi 中注册自定义模型绑定器

> ID：10921726
> 
> 赞同：3
> 
> 时间：2012-06-06T20:28:02.003
> 
> 标签：c#, asp.net-mvc-4, asp.net-web-api

我最近从 MVC4 beta 更新到 RC，并且遇到了一个 WebApi 项目的小问题。我注意到的第一件事是 ServiceResolver 已被删除。在它被删除之前，我使用它通过以下方式注册自定义模型绑定器提供程序：

```
IEnumerable<object> modelBinderProviderServices = GlobalConfiguration.Configuration.ServiceResolver.GetServices(typeof(ModelBinderProvider));
List<Object> services = new List<object>(modelBinderProviderServices) { new CustomDynamicObjectModelBinderProvider() };
GlobalConfiguration.Configuration.ServiceResolver.SetServices(typeof(ModelBinderProvider), services.ToArray()); 
```

利用此模型绑定器提供程序的操作具有以下签名：

```
[HttpPut]
public void Put(CustomDynamicObject model) 
```

我尝试用以下代码替换旧代码，但没有结果：

```
GlobalConfiguration.Configuration.Services.Add(typeof(ModelBinderProvider), new CustomDynamicObjectModelBinderProvider()); 
```

当我尝试将数据放入给定的操作时，模型提供者的 GetBinder 方法没有被调用，并且模型参数设置为 null。通过将 Acion/方法的签名更改为以下内容，我能够使用 ModelBinder 属性使操作使用所需的模型绑定器

```
[HttpPut]
public void Put([ModelBinder(typeof(CustomDynamicObjectModelBinderProvider))] CustomDynamicObject model) 
```

虽然这可行，但我真的不想在我的所有控制器/操作中使用这种语法。

我想我应该提到我的模型绑定器提供程序继承自：

```
System.Web.Http.ModelBinding.ModelBinderProvider 
```

我这样说是因为我看到以下命名空间中有另一个 ModelBinderProvider 类：

```
Microsoft.Web.Mvc.ModelBinding 
```

回顾一下：如何在 MVC4 RC WebApi 中注册自定义模型绑定器？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-08T03:27:51.093

自 Beta 版以来，Web API 中的模型绑定规则发生了变化。[Mike Stall 的帖子](http://blogs.msdn.com/b/jmstall/archive/2012/04/16/how-webapi-does-parameter-binding.aspx)中描述了新规则。复杂类型的模型绑定现在仅在显式`ModelBinder`向参数添加属性时才有效。

自发布候选版本以来，参数绑定机制*再次*发生了变化，因此您可能希望在进行太多更改之前等待 RTM。在 RC 版本中可能还有其他几个选项可用 - 取决于您尝试绑定的数据的来源（查询字符串或请求正文）。

*   如果您的数据源是请求正文，那么您可以创建自定义`MediaTypeFormatter`而不是模型绑定器：

*   如果您的数据来自查询字符串，并且您希望避免`[ModelBinder]`在参数中明确包含属性，那么您可以使用[custom`TypeConverter`](http://www.hanselman.com/blog/TypeConvertersTheresNotEnoughTypeDescripterGetConverterInTheWorld.aspx) 和[custom`IValueProvider`](http://blogs.msdn.com/b/jmstall/archive/2012/04/23/how-to-create-a-custom-value-provider-in-webapi.aspx)的组合。

[`HttpParameterBinding`](http://blogs.msdn.com/b/jmstall/archive/2012/05/11/webapi-parameter-binding-under-the-hood.aspx)在 RTM 版本（或当前的 nightlies）中，如果其他选项不起作用，您将能够使用自定义。

# html - css divs文本重叠问题

> ID：10921727
> 
> 赞同：1
> 
> 时间：2012-06-06T20:28:02.237
> 
> 标签：html, css, positioning, css-position

如图所示，我有 4 个 div。

![在此处输入图像描述](../Images/d4751439a4e24b6a6354b7269c192318.png)

它们是这样定位的：

```
<style>
div1{ 
    max-width:250px;
    min-width:240px;
    position:absolute;
    right:6px;
    top:6px;
    float:left;
}
div2{
max-width:2248px;
position:absolute;
height:35px;
left:254px;
margin-right:20px;
min-width:275px;}

div3{
max-width:250px;
min-width:240px;
position:absolute;
right:6px;
top:6px;
float:right;}

div4{
position:fixed;
top:1px;
right:400px;
margin-left:260px;}
</style> 
```

我遇到的问题是 div4 从数据库中获取其内容，如果有更多文本位于 div2 下。并使其无法阅读。寻找一种方法，以便如果有更多文本（或者如果您调整浏览器大小）作为 div4 上的文本换行，则 div2 被向下推（如果宽度变窄）或向上推（如果浏览器宽度变宽）有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T20:43:55.160

如果你想让元素对其他元素做出反应，那么你需要使用一种布局方法来让你的元素保持流动。`position:absolute;`就像强力胶一样，最好谨慎使用，只有在没有其他东西粘住的情况下才使用...

另一种方法是在调整大小期间以编程方式调整位置，但不建议这样做。

# couchdb - 用于 ElasticSearch 的 CouchDB 河：过滤并接收完整文档？

> ID：10921730
> 
> 赞同：0
> 
> 时间：2012-06-06T20:28:09.977
> 
> 标签：couchdb, elasticsearch, couchapp

我正在尝试将 CouchDB 设计过滤器与我的 ElasticSearch CouchDB 河一起使用。

似乎当我们设置过滤器时，ElasticSearch 使用的 url 是：

> [http://couchdb.com/_changes?feed=continuous&include_docs=true&heartbeat=10000&filter=stample/users](http://couchdb.com/_changes?feed=continuous&include_docs=true&heartbeat=10000&filter=stample/users)

问题是当我尝试在 ElasticSearch 上查找我的文档时，我什么也找不到。转到 CouchDB 更改流 url 后，我注意到完整的文档没有发送到 ElasticSearch。

当我删除过滤器时：

> [http://couchdb.com/_changes?feed=continuous&include_docs=true&heartbeat=10000](http://couchdb.com/_changes?feed=continuous&include_docs=true&heartbeat=10000)

然后整个文档被发送，我可以在 ElasticSearch 中找到它。

那么是否可以使用 CouchDB 设计过滤器并同时接收整个文档以便 ElasticSearch 可以对其进行索引？是 CouchDB 还是 ElasticSearch 错误？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T15:16:46.570

实际上我的 CouchDB 过滤器是一个已弃用的过滤器，它只返回我已删除的文档。

# java - 以通用方式重试方法调用

> ID：10921731
> 
> 赞同：11
> 
> 时间：2012-06-06T20:28:12.380
> 
> 标签：java, reflection, frameworks, openframeworks

我的 Java 应用程序在远程调用失败时需要重试逻辑。这些远程调用是：

*   分散在应用程序中
*   属于不同的远程服务类。

此外，重试逻辑可能具有不同的重试间隔和不同的重试尝试。

我需要一个通用的 retry() 实现，它可以根据调用的位置进行适当的方法调用。下面是我正在寻找的简单代码说明。我知道我们可以尝试使用 java 反射来做到这一点，但是，是否有一个框架或开源可用的地方是可读的？

```
try {
 ClassA objA = remoteServiceA.call(paramA1, paramA2, ...);
} catch (Exception e){
 ClassA objA = (ClassA)retry(remoteService, listOfParams, ..); // generic method call
}
..

try {
 ClassB objB = remoteServiceB.call(paramB1, paramB2, ...);
} catch (Exception e){
 ClassA objB = (ClassB)retry(remoteService, listOfParams, ..); // generic method call
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-03T08:30:30.560

如前所述，您应该使用 AOP 和 Java 注释。我会推荐一个来自[jcabi-aspects](http://aspects.jcabi.com/annotation-retryonfailure.html)的已读机制（我是开发人员）：

```
@RetryOnFailure(attempts = 3, delay = 5)
public String load(URL url) {
  return url.openConnection().getContent();
} 
```

另请阅读这篇博文：[http ://www.yegor256.com/2014/08/15/retry-java-method-on-exception.html](http://www.yegor256.com/2014/08/15/retry-java-method-on-exception.html)

更新：[`RetryFunc`](http://static.javadoc.io/org.cactoos/cactoos/0.10/org/cactoos/func/RetryFunc.html)从[Cactoos](http://www.cactoos.org)检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T20:35:39.290

这是一个可以使用[aspectj](/questions/tagged/aspectj "显示标记为“aspectj”的问题")（或一般的[aop ）的书籍示例，请参阅](/questions/tagged/aop "显示标记为“aop”的问题")[Spring 文档中的](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/aop.html#aop-ataspectj-example)[*8.2.7 示例*](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/aop.html#aop-ataspectj-example)和[Java 开发人员应该学习和使用 AspectJ 的 5 个原因](http://www.developer.com/print/java/5-reasons-java-developers-should-learn-and-use-aspectj.html)。

基本上，一个方面会拦截对给定方法的所有调用（使用注释、命名约定等指定）并重试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-30T14:51:36.400

假设您有一个方法，需要每 500 毫秒重试一次，最多 5 次。 **当前班级**：

```
public class RemoteCaller{
    Service serviceCaller;
    public void remoteCall(String message) {
                serviceCaller.updateDetails( this.message);
                return null;
    }
} 
```

**修改方法：**

```
public class RetriableHelper<T> implements Callable<T> {

    private Callable<T> task;

    private int numberOfRetries;

    private int numberOfTriesLeft;

    private long timeToWait;

    public RetriableHelper(int numberOfRetries, long timeToWait, Callable<T> task) {
        this.numberOfRetries = numberOfRetries;
        numberOfTriesLeft = numberOfRetries;
        this.timeToWait = timeToWait;
        this.task = task;
    }

    public T call() throws Exception {
        while (true) {
            try {
                return task.call();
            } catch (InterruptedException e) {
                throw e;
            } catch (CancellationException e) {
                throw e;
            } catch (Exception e) {
                numberOfTriesLeft--;
                if (numberOfTriesLeft == 0) {
                    throw e; 
                }
                Thread.sleep(timeToWait);
            }
        }
    }
}

Backend system/remote call class:

public class RemoteCaller{

    Service serviceCaller;

    public void remoteCall(String message) {

        class RemoteCallable implements Callable<Void> {
            String message;
            public RemoteCallable( String message)
            {
                this.message = message;
            }
            public Void call() throws Exception{
                serviceCaller.updateDetails( this.message);
                return null;
            }
        }

        RetriableHelper<Void> retriableHelper = new RetriableHelper<Void>(5, 500, new RemoteCallable( message));
        try {
            retriableHelper.call();
        } catch (Exception e) {
            throw e;
        } 
     }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-05-23T17:58:11.220

[在此处输入链接描述](http://www.baeldung.com/spring-retry) Spring 有一个重试注释，用于服务目的

```
Step 1: Add following dependency to your POM

<dependency>
    <groupId>org.springframework.retry</groupId>
    <artifactId>spring-retry</artifactId>
    <version>1.1.5.RELEASE</version>
</dependency>

Step 2: Enabling Spring Retry

To enable Spring Retry in an application, we need to add the @EnableRetry annotation to our @Configuration class:

Ex:

@Configuration
@EnableRetry
public class AppConfig { ... }

Step 3: To add retry functionality to methods, @Retryable can be used:

Ex: 

@Service
public interface MyService {
    @Retryable(
      value = { SQLException.class }, 
      maxAttempts = 2,
      backoff = @Backoff(delay = 5000))
    void retryService(String sql) throws SQLException;
    ...
}

Step 4.The @Recover annotation is used to define a separate recovery method when a @Retryable method fails with a specified exception:

Ex: 

@Service
public interface MyService {
    ...
    @Recover
    void recover(SQLException e, String sql);
}

See Url for more details : http://www.baeldung.com/spring-retry 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T20:31:38.847

您从哪里获得服务？使用工厂代理您从原始工厂获得的服务。然后代理可以透明地实现重试。请参阅反射中的 java Proxy/ProxyGenerators。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-12-09T14:14:00.070

如果您使用的是 spring ，那么最好使用 Aspects。
否则，以下示例解决方案可以工作：

```
public class Test
{
    public static void main(String[] args) throws Exception
    {
        Test test = new Test();
        test.toRunFirst("Hello! This is normal invocation");
        runWithRetry(test, "toRunFirst", "Hello! This is First, called with retry");
        runWithRetry(test, "toRunSecond", "Hello! This is Second, called with retry");
    }

    public void toRunFirst(String s) {
        System.out.println(s);
    }
    public void toRunSecond(String s) {
        System.out.println(s);
    }

    public static Object runWithRetry(Object obj, String methodName, Object... args) throws Exception
    {
        Class<?>[] paramClass = new Class<?>[args.length];
        for(int i=0; i< args.length; i++) {
            paramClass[i] = args[i].getClass();
        }
        Method method = obj.getClass().getDeclaredMethod(methodName, paramClass);

        int retryCount = 2;

        for(int i=0; i< retryCount; i++) {
            try {
                return  method.invoke(obj, args);
            }
            catch (Exception e) {
                e.printStackTrace();
            }
        }
        return null;
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-07-27T13:33:45.337

我没有找到我需要的东西，所以有我的。主要特点是它会在达到 maxRetries 时抛出您需要的 Exception 类型，以便您可以在调用中捕获它。

```
import org.apache.log4j.Logger;

public class TaskUtils {

    public static <E extends Throwable> void retry(int maxRetries, Task<E> task) throws E {
        retry(maxRetries, 0, null, task);
    }

    public static <E extends Throwable> void retry(int maxRetries, long waitTimeMs, Logger logger, Task<E> task) throws E {
        while (maxRetries > 0) {
            maxRetries--;
            try {
                task.run();
            } catch (Exception e) {
                if (maxRetries == 0) {
                    try {
                        throw e;
                    } catch (Exception ignored) { // can't happen but just in case we wrap it in
                        throw new RuntimeException(e);
                    }
                }

                if (logger != null)
                    logger.warn("Attempt " + maxRetries + " failed", e);
                try {
                    Thread.sleep(waitTimeMs);
                } catch (InterruptedException ignored) {
                }
            }
        }
    }

    public interface Task<E extends Throwable> {
        void run() throws E;
    }
} 
```

用法 ：

```
TaskUtils.retry(3, 500, LOGGER, () -> stmClickhouse.execute(
                        "ALTER TABLE `" + database + "`.`" + table.getName() + "` ON CLUSTER " + clusterName + allColumnsSql
                )); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-11-28T14:56:19.620

将其添加到 pom.xml

```
<dependency>
    <groupId>org.deking.utils</groupId>
    <artifactId>retry</artifactId>
    <version>0.0.2-SNAPSHOT</version>
</dependency>

new Retry<String>()
.maxOperationWaitTime(30_000)//Max operation wait time during a single operation
.retryIntervalTime(1_000)//Interval time between two operations
.maxRetryTimes(3)//Retry times when operation failed(or timeout) at the first time
.operation(() -> {
  //your operation
  return "success!";
})
.judgement(t -> (t == null || t.isEmpty()))//add your judgement whether the operation should be retry(Operation should return a value)
.execute(); 
```

如果要在方法上添加重试配置注释，并调用它：

```
class RetryTests{
    @RetryConfig( maxRetryTimes=1)
    public static String TestAnnotation() { 
        return "aaa";
    } 
    public static void main(String[] args) {
        try { 
            new Retry<String>()
            .of(RetryTest.class.getMethod("TestAnnotation"),null)
            .judgement(r -> r.equals("aaa"))
            .execute(); 
        } catch (NoSuchMethodException | SecurityException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
    }
 } 
```

# java - 数字签名的 sign() 方法如何将 (r,s) 值组合到数组字节中以返回调用主体

> ID：10921733
> 
> 赞同：2
> 
> 时间：2012-06-06T20:28:18.727
> 
> 标签：java, cryptography

我正在实现椭圆曲线数字签名算法（ECDA），而没有重用使用 java 编程实现的标准。我的程序是这样的。

```
 public BigInteger[] sign(){

    // signature generation here

        rs[0] = r;
         rs[1] = s;
        return rs;
      } 
```

但我希望它返回字节数组，就像在实现的标准算法中一样。

```
 public byte[] sign()
    {      
           // my signature generation here already done
            rs[0] = r;
            rs[1] = s;   
          // help me here what shall i do instead of returning array of two BigIntegers
    } 
```

数字签名的 sign() 方法如何将 (r,s) 值组合到数组字节中以返回调用主体。在调用主体时，我必须返回 get (r,s) 对以验证我的签名。

```
 // something like this
            public boolean verify(byte[] sigbyte )
              {

                 rArr =  // help me here
                 sArr = // help me here
                r =new BigInteger(rArr);
                s = new BigInteger(sArr);

               // i have already done signature verification here

               } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T05:55:08.927

FIPS 186-3 未指定如何将 ECDSA 签名序列化为字节数组。

我所知道的所有 API 和协议都使用两种不同的标准方式之一：

1) 零填充 r 和 s 所以它们是 n 的长度（G 的阶）并将它们连接起来：

```
byte[] rArr = toUnsignedByteArray(r);
byte[] sArr = toUnsignedByteArray(s);
int nLength = (n.bitLength()+7)/8;
byte[] res = new byte[2*nLength];
System.arraycopy(rArr, 0, res, nLength - rArr.length, rArr.length);
System.arraycopy(sArr, 0, res, 2* nLength - sArr.length, nLength); 
```

`toUnsignedByteArray`是这样的：

```
byte[] toUnsignedByteArray(BigInteger bi){
  byte[] ba = bi.toByteArray();
  if(ba[0] != 0){
    return ba;
  }
  else
  {
    byte[] ba2 = new byte[ba.length - 1];
    System.arraycopy(ba, 1, ba2, 0, ba.length - 1);
    return ba2;
  }
} 
```

2) 使用以下 ASN.1 结构的 DER 编码：

```
ECDSASignature ::= SEQUENCE {
    r   INTEGER,
    s   INTEGER
} 
```

假设 n 最多为 487 位（如果您需要支持更大的密钥，长度编码会变得更复杂一些）：

```
byte[] rArr = r.toByteArray();
byte[] sArr = s.toByteArray();
byte[] res = new byte[6 + rArr.length + sArr.length];
res[0] = 0x30;
res[1] = 4 + rArr.length + sArr.length;
res[2] = 0x02;
res[3] = rArr.length;
System.arraycopy(rArr, 0, res, 4, rArr.length);
res[4+rArr.length] = 0x02;
res[5+rArr.length] = sArr.length;
System.arraycopy(sArr, 0, res, 6+rArr.length, sArr.length); 
```

解码做这样的事情（这是非常基本的，非防错解码）：

```
if(enc[0]!=0x30) return false; // bad encoding
if(enc[1]&0x80!=0) return false; // unsupported length encoding
if(enc[2]!=0x02) return false; // bad encoding
if(enc[3]&0x80!=0) return false; // unsupported length encoding
int rLength = enc[3];
byte[] rArr = new byte[rLength];
System.arraycopy(enc, 4, rArr, 0, rLength);
BigInteger r = new BigInteger(rArr);
if(enc[4+rLength]!=0x02) return false; // bad encoding
if(enc[5+rLength]&0x80!=0) return false; // unsupported length encoding
int sLength = enc[5+rLength];
byte[] sArr = new byte[sLength];
System.arraycopy(enc, 6+rLength, sArr, 0, sLength);
BigInteger s = new BigInteger(sArr); 
```

Java 安全架构使用第二种编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T03:09:35.953

FIPS 186-3 文档指定了算法，但没有讨论如何在更高级别的协议中使用该算法。我最熟悉的将签名编码为字节数组的标准是[RFC 3279](https://www.rfc-editor.org/rfc/rfc3279)，特别是第 2.2.2 节。这可能是默认 Oracle 提供程序使用的编码方法。

# c - PIC芯片16F690

> ID：10921740
> 
> 赞同：-3
> 
> 时间：2012-06-06T20:28:48.557
> 
> 标签：c, arrays, compiler-construction, pic

我在我的 PIC 16F690 上编写一些代码时遇到问题。
我正在使用 PIC C 编译器 v4.099。

我试图将一个 int 变量作为索引传递给这样的数组：

```
int myArray[2] = {20, 20};
int index = 0;
void myFunction()
{
    int iTest = myArray[index];
} 
```

由于某种原因，此代码不起作用，但是当我将 myArray[index] 中的索引替换为
像 myArray[0] 这样的零时，它可以正常工作

谁能解释我做错了什么？
格里兹·里科

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T21:04:59.510

在嵌入式编程中，通常您的 C 程序是更大整体的一部分，其中包括引导以正确重置系统以运行您的已编译 C 的片段。

是否有可能在您的编程环境中，名称“索引”已经为某些函数保留，然后经过数组的长度？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T21:02:41.533

“index”是我的编译器上的一个内置函数，所以这可能就是它在你的编译器中不起作用的原因。

# json - NodeJS + Mongo - 如何获取集合的内容？

> ID：10921743
> 
> 赞同：7
> 
> 时间：2012-06-06T20:29:10.490
> 
> 标签：json, node.js, mongodb

我正在用 mongo 编写一个简单的 NodeJS 应用程序。为了连接到 mongo，我使用：

```
var mongo = require('mongodb'),
Server = mongo.Server,
Db = mongo.Db,
ObjectID = require('mongodb').ObjectID;
db.open(function(err,db) {...}; 
```

所以，我有数据库“文档”，并且创建了一个名为“公司”的集合。现在它有 4 个对象（记录）。我想将这个集合的全部内容作为一个数组获取并逐行显示：

```
//get companies list
app.get('/companies',function(req,res){
db.collection("companies",function(err,collection){
    collection.find({},function(err, companies) {
        companies.forEach(function(err,company){
                console.log (company);
            }
        );
    });
});
}); 
```

但是，Node 向我返回了这样的错误：

```
TypeError: Object #<Cursor> has no method 'forEach' 
```

有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T20:34:01.987

`companies`传递给`find`回调的参数是一个[`Cursor`](http://mongodb.github.com/node-mongodb-native/api-generated/cursor.html)对象，而不是一个数组。调用`toArray`它将查询结果转换为对象数组，或`each`一次处理一个结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T20:32:00.130

在公司上使用 .each，而不是 forEach

# html - ipage：Dreamweaver 预览版有效，但在直播时无效；想法？

> ID：10921744
> 
> 赞同：1
> 
> 时间：2012-06-06T20:29:11.210
> 
> 标签：html, safari, dreamweaver, image-uploading

因此，我只是启动了一个新站点，并希望在我的实时站点上获取名为“coming_soon”的我的 .jpg 图像（字面意思是一个）。但是，当我上传到 ipage 时，图像似乎没有在网站上呈现。它只是默认显示一个问号。我尝试过使用 Safari 和 Firefox，但无济于事。这是下面的代码。

`<body> <img src="images/coming_soon.jpg" width="1200" height="800" alt="coming_ssoon" /> </body>`

和CSS..

```
@charset "UTF-8"
// CSS Document 

#wrapper{
    width: 1200px;
    margin: auto;
    margin-left: auto;
    margin-right: auto;
}

body{
    background-color: #000;
} 
```

有什么我想念的吗？任何帮助都会很棒！谢谢。

-先生

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T21:19:24.887

问号表示该图像不存在于正确的目录中。检查你的拼写。

不应将 Dreamweaver 用于预览目的。它无法正确识别您的 javascript，并且在您进行微小更改时不会更新。

# c# - AE.Net.Mail Imap 部分获取

> ID：10921752
> 
> 赞同：1
> 
> 时间：2012-06-06T20:29:21.863
> 
> 标签：c#, imap, gmail-imap

我正在使用 C# 和[AE.Net.Mail](https://github.com/andyedinborough/aenetmail)库从 Gmail 中提取文件。我在处理大型 zip 文件时遇到问题。

此处使用 Java 描述并解决了相同的问题：[JavaMail BaseEncode64 错误](https://stackoverflow.com/questions/1755414/javamail-baseencode64-error)

有谁知道如何使用 C# 和 AE.Net.Mail 库设置部分提取标志？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:48:40.813

使用（或查看）[S22.Imap](https://github.com/smiley22/S22.Imap)。这是一个带有一些附加内容的 AE.Net.Mail。

来自示例：仅当附件小于 2 兆字节时才下载附件

```
using System;
using S22.Imap;

namespace Test {
class Program {
    static void Main(string[] args)
    {
        using (ImapClient Client = new ImapClient("imap.gmail.com", 993,
         "username", "password", Authmethod.Login, true))
        {
            // This returns all messages sent since August 23rd 2012
            uint[] uids = Client.Search(
                SearchCondition.SentSince( new DateTime(2012, 8, 23) )
            );

            // Our lambda expression will be evaluated for every MIME part
            // of every mail message in the uids array
            MailMessage[] messages = Client.GetMessages(uids,
                (Bodypart part) => {
                 // We're only interested in attachments
                 if(part.Disposition.Type == ContentDispositionType.Attachment)
                 {
                    Int64 TwoMegabytes = (1024 * 1024 * 2);
                    if(part.Size > TwoMegabytes)
                    {
                        // Don't download this attachment
                        return false;
                    }
                 }

                 // fetch MIME part and include it in the returned MailMessage instance
                 return true;
                }
            );
        }
    }
}
} 
```

# jquery - 在 css3 和 jquery 中滑动 div

> ID：10921754
> 
> 赞同：0
> 
> 时间：2012-06-06T20:29:27.750
> 
> 标签：jquery, html, css

我正在做一个网络项目，我希望在页面顶部有一行图像，但除了一个之外，所有图像都会被模糊掉。

我在想的是一个 div，它用白色背景色覆盖每个图像，不透明度设置为 0.5 左右，其中一个图像完全可见。

将有两个按钮，上一个和下一个，当按下其中一个按钮时，清除 div 将滑过下一个图像以显示该图像，并且前一个图像将像上面提到的那样被模糊。

有没有人对我如何做到这一点有任何想法..

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T21:33:21.973

做了一个小测试，你的意思是这样的吗？让它们真正模糊起来并不容易。但我认为这是一个起点。

**演示：http:**
[//jsfiddle.net/2MExB/3/](http://jsfiddle.net/2MExB/3/)

**HTML：**

```
<div id="c"><ul>
<li><img height="100" src="..."/></li>
<li><img height="100" src="..."/></li>
<li><img height="100" src="..."/></li>
</ul><div id="m" ></div></div>
<br/>
<button>prev</button><button>next</button>​ 
```

**CSS：**

```
li{
 float:left;   
}

#c{
    position:relative;
    overflow:hidden;    
}
#m{
    position:absolute;
    top:0;
    border:0 solid white;
    height:100%;
    width:100px;   
    opacity:.8;
}​ 
```

**JS：**

```
$(function() {
    var current = 0;
    $('button').click(function(ev) {
        current += 1 * ($(this).text() == 'next' ? 1 : -1);
        show();
        ev.preventDefault();
    });

    function show() {
        var c = $('ul li').length;
        current = current < 0 ? c - 1 : (current > c - 1 ? 0 : current);
        var $t = $('ul li:eq(' + current + ')');
        var l = $t.position().left;
        var w = $t.width();
        var cw = $('#c').width();
        $('#m').stop().animate({
            'width': w,
            'border-width': '0 ' + (cw - l - w) + 'px 0 ' + l + 'px'
        }, 300);
    }
    show();
});​ 
```

# ember.js - 什么是绑定或计算属性具有更好的性能？

> ID：10921755
> 
> 赞同：0
> 
> 时间：2012-06-06T20:29:29.163
> 
> 标签：ember.js

我已经多次遇到这种情况，我仍然不知道哪种方法是定义以下对象属性的最佳方法。

选项A

```
name: Em.Binding.oneWay(‘content.name’); 
```

选项 B

```
 name: Em.computed(function(){ 
   return this.getPath(‘content.name’); 
 }).property(‘content.name’).cacheable() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T08:38:21.860

简单地说：

```
nameBinding: 'content.name' 
```

# c++ - 扩展 C++ ostream

> ID：10921761
> 
> 赞同：5
> 
> 时间：2012-06-06T20:30:00.037
> 
> 标签：c++, iostream

我正在尝试通过扩展`std::streambuf`. 作为一个学习实验，我的目标是简单地创建一个自定义流，将所有输出定向到`std::cerr`. 看起来很简单：

```
#include <iostream>
using namespace std;

class my_ostreambuf : public std::streambuf
{
    public:

    protected:

    std::streamsize xsputn(const char * s, std::streamsize n)
    {
        std::cerr << "Redirecting to cerr: " << s << std::endl;
        return n;
    }

};

int main()
{
    my_ostreambuf buf;
    std::ostream os(&buf);
    os << "TEST";
} 
```

这似乎有效，因为它打印`Redirecting to cerr: TEST`. 问题是当**单个字符（而***不是*字符串）通过. 例如：**`std::ostream::sputc`**

 **```
int main()
{
    my_ostreambuf buf;
    std::ostream os(&buf);
    os << "ABC"; // works
    std::string s("TEST");
    std::copy(s.begin(), s.end(), std::ostreambuf_iterator<char>(os)); // DOESN'T WORK
} 
```

我猜的问题是它`xsputn`不处理单个字符插入。（我想`sputc`不会在`xsputn`内部调用？）但是，查看[中的虚拟受保护函数列表](http://www.cplusplus.com/reference/iostream/streambuf/sputc/)，`std::streambuf`我看不到任何我应该重写的处理单个字符插入的函数。

那么，我该如何实现呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T20:33:11.160

单字符输出由`overflow`. 以下是根据实际输出是否可以实现`overflow`的方式：`xsputn``xsputn`

```
int_type overflow(int_type c = traits_type::eof())
{
    if (c == traits_type::eof())
        return traits_type::eof();
    else
    {
        char_type ch = traits_type::to_char_type(c);
        return xsputn(&ch, 1) == 1 ? c : traits_type::eof();
    }
} 
```**

# cancan - CanCan 未初始化常量 Ability::CanCan

> ID：10921762
> 
> 赞同：0
> 
> 时间：2012-06-06T20:29:59.940
> 
> 标签：cancan

知道我在这里做错了什么吗？我知道说ability.can不是很有用？：管理，所有；但是我只是想开始使用 CanCan。

我确实有 gem，并且运行了 generate cancan:ability。

谢谢。

错误和代码：

未初始化的常量 Ability::CanCan 提取的源代码（第 4 行附近）：

```
1: 
2: <% if current_user %>
3:     <p>Currently logged in as <strong><%= current_user.email %></strong></p>
4:     <% current_ability = Ability.new(current_user) %>
5:     <%if can? :manage, :all %>
6:      <p>Hey Buddy, You're Authorized ;)</p>
7:     <% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T21:07:58.593

我收到此错误是因为我的 Gemfile 将 CanCan 要求放在了一个未在测试环境中加载的组中。

尝试检查您的 CanCan 需求是否已加载到您正在运行的环境中。此要求将在默认组中加载 CanCan：

```
# project_root/Gemfile
source 'http://rubygems.org'

gem 'rails', '3.1.0'
gem 'cancan' 
```

# java - 带有@RequestBody的spring mvc异常处理程序

> ID：10921767
> 
> 赞同：1
> 
> 时间：2012-06-06T20:30:24.860
> 
> 标签：java, spring, spring-mvc

在我的 Spring MVC 应用程序中，我有许多方法用于`@RequestBody`绑定到我定义的域对象（特别是从 JSON 使用 Jackson）。

我目前正在使用一个简单的异常视图，如下所示：

```
<bean id="exceptionHandler" class="org.springframework.web.servlet.handler.SimpleMappingExceptionResolver">
    <property name="defaultErrorView" value="errorXmlView" />
</bean>

<bean id="errorXmlView" class="com.example.MyCustomXmlView" /> 
```

我的问题是，在里面`MyCustomXmlView`，目前只是扩展`AbstractView`，有没有办法可以访问绑定的对象`@RequestBody`？也就是说，假设它已经走到了那一步，而且它不是一个有约束力的例外。例如，是否有某种我可以调用的请求范围的 bean，或者有一种方法可以将对象注入到我的异常视图的模型中？如果没有，是否有不同的方法来定义允许我这样做*的异常解析器？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T20:35:12.963

你考虑过[`@ExceptionHandler`](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/bind/annotation/ExceptionHandler.html)注释吗？[spring 文档](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/mvc.html#mvc-ann-exceptionhandler)有一个使用示例，我想您可以创建一个自定义异常来保留您的模型，然后您应该能够在您的异常处理方法中访问它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T12:23:34.307

我经常使用 a 捕获控制器方法参数`ThreadLocal`，然后将它们存储起来以供以后在日志记录等中使用。我发现最好的方法是使用`@Aspect`（或您喜欢的任何 AOP 策略）来拦截控制器方法并存储该方法参数供以后使用。

# php - 如果在 foreach php 中

> ID：10921768
> 
> 赞同：0
> 
> 时间：2012-06-06T20:30:26.460
> 
> 标签：php, if-statement, foreach

嗨，我在想办法在 foreach 中包含 if 子句时遇到了麻烦。我正在编写一个页面，允许用户在将数据提交到数据库之前查看他们在以前的表单中输入的数据。他们可以选择从以前输入的不同尺寸、数量等的数据中进行选择，也可以输入他们自己的新选项。现在我设置它的方式显示所有选项，但它们都在一行上并堆叠在一个单元格内。我的问题是我需要它来创建一个新行并打印`$size`每个`$side`值。

```
<tr>
    <td>
<?php
    if(isset($_POST['var1'])) {
        $var1 = $_POST['var1'];
        foreach($var1 as $value) {
            echo $value . "<br>";
        }
    }
    if(isset($_POST['new_var1'])) {
        $new_var1 = $_POST['new_var1'];
        foreach($new_var1 as $value) {
            echo $value . "<br>";
        }
    }
?>  
    </td>
    <td>
<?php
    if(isset($_POST['var2'])) {
        $var2 = $_POST['var2'];
        foreach($var2 as $value) {
            echo $value . "<br>";
        }
    }    
    if(isset($_POST['new_var2'])) {
        $new_var2 = $_POST['new_var2'];
        foreach($new_var2 as $value) {
            echo $side . "<br>";
        }
    }
?>
    </td>
</tr> 
```

有没有办法`if`在 a 中包含语句，`foreach`这样我就可以检查设置了哪些选项，然后一次循环遍历所有选项，然后`<tr></tr>`在`foreach`? 我正在考虑通过制作多个`if`语句来检查`isset`我的变量的每个组合并使用`foreach`仅包含集合选择的语句来做到这一点，但这似乎非常笨拙并且是一种迂回的方式来做我需要的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T20:40:41.640

我不太了解您的情况，但我建议您将表单更改为：

```
<input name="screws[0][size]" />
<input name="screws[0][side]" />

<input name="screws[1][size]" />
<input name="screws[1][side]" />

<input name="screws[2][size]" />
<input name="screws[2][side]" /> 
```

当 PHP 得到它时，你可以这样做：

```
<?php
$screws = @$_GET['screws'];
$newscrews = @$_GET['newscrews'];
?>
<table>
    <?php if($screws) foreach($screws as $screw): ?>
    <tr>
        <td><?php echo $screw['size'] ?></td>
        <td><?php echo $screw['side'] ?></td>
    </tr>
    <?php endforeach ?>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T20:38:14.903

是的，语句中允许使用条件`foreach`语句。您通常会包括它们。此外，您拥有的代码容易受到 XSS（跨站点脚本）攻击。您可能需要清理通过邮寄提交的数据。

如果我误解了这个问题，我很抱歉，它的措辞有点......有趣的是......

编辑：`if(isset($var1) && isset($var2) &&...etc)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T16:05:02.603

这是使用现有数据格式的另一种解决方案：

```
<?php
$sizes = @$_GET['screw_sizes'];
$sides = @$_GET['screw_sides'];
$screws = array()

if($sides && $sizes) {
    $n = min(count($sizes), count($sides))
    for ($i=0; $i < $n; $i++) {
        $screws[$i]['side'] = $sides[$i];
        $screws[$i]['size'] = $sizes[$i];
    }
}
?> 
```

回显它的方法是相同的：

```
<table>
    <?php foreach($screws as $screw): ?>
    <tr>
        <td><?php echo $screw['size'] ?></td>
        <td><?php echo $screw['side'] ?></td>
    </tr>
    <?php endforeach ?>
</table> 
```

# c# - 是否有令人信服的理由使用 EventHandler 委托而不是行动 声明事件时？

> ID：10921772
> 
> 赞同：1
> 
> 时间：2012-06-06T20:30:34.890
> 
> 标签：c#, .net, events, delegates

当我声明一个事件时，如果事件处理程序有参数，我一直在使用`Action`委托或委托。`Action<T, ...>`我最近注意到`EventHandler`委托的存在，它需要一个继承`EventArgs`. 后一种方法要求我创建一个附加类，该类仅用于封装随事件传递的任何参数，这似乎是不必要的，除非我遗漏了什么。

那么，在声明事件时使用委托*的*原因是什么？`EventArgs`它给我买了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T20:33:35.023

它使您能够返回事件参数，仅此而已。如果您不需要，那么也许您不需要`EventHandler`代表。

从更大的角度来看，`EventArgs`这是使用事件将数据从一个地方获取到另一个地方的“社会可接受的”方式。当然，您可以创建自定义委托来执行此操作，但`EventArgs`在 Visual Studio 等中具有工具支持。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T20:34:54.710

它为您提供了一个可扩展点，用于在未来更改您的事件。

假设我定义了一个类`Car`：

```
public class Car { 
    String Make { get; set; }
    String Model { get; set; }
    int Year { get; set; }
} 
```

和一个事件`CarBuilt`：

```
public event Action<Car> CarBuilt; 
```

没关系。但是，如果我希望以后的活动包括制造汽车的人呢？使用操作，我需要更改事件签名或将该信息添加到`Car`类（它确实不属于）。

如果我这样定义它：

```
public class CarBuiltEventArgs : EventArgs {
    public Car TheCar { get; set; }
}

public event EventHandler<CarBuiltEventArgs> CarBuilt; 
```

然后我可以将 BuiltBy 属性添加到 CarBuiltEventArgs 类中，一切就绪。

```
public class CarBuiltEventArgs : EventArgs {
    public Car TheCar { get; set; }
    public String BuiltBy { get; set; }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T20:35:07.347

如果需要参数，您表示您使用 Action 。比较这两者，问问自己，如果明年您的需求发生变化并且您需要在该事件中传递一个新参数，那么需要什么？您是更改大量代码还是仅更改一个继承 EventArgs 的类？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-06T21:40:32.997

使用的最大原因`EventHandler<T>`可能是不同类型的委托——即使这些类型使用相同的方法签名——也不能互换。如果一个事件使用 an`EventHandler<fnordEventArgs>`而另一个使用 an `Action<Object, fnordEventArgs>`，则可以为这两个事件订阅相同的方法，但为一个事件创建的委托不能与另一个事件一起使用。通常，这没什么大不了的，因为语句 like`FirstEvent += methodName`会翻译成`FirstEvent += new EventHandler<fnordEventArgs>(methodName)`，并且`SecondEvent += methodName`会翻译成`FirstEvent += new Action<Object, fnordEventArgs>(methodName)`。然而，在某些情况下，事件订阅者需要存储用于订阅的委托。对于存储委托的订阅者，它必须正确地知道它的类型。始终`EventHandler<T>`用作表单的事件处理方法的委托`void EventHandler(Object sender, T args)`使得创建正确的委托类型变得更加容易。

# objective-c - insertSublayer atIndex 将事物放在其他层之上

> ID：10921778
> 
> 赞同：0
> 
> 时间：2012-06-06T20:31:16.773
> 
> 标签：objective-c, view, insert, indexing, layer

我正在使用 ColorBGView 并在其中调用方法来制作渐变。但是如果我将两个附加到我的图层，它会与我之后附加的所有其他内容重叠，我不明白为什么。

```
 CAGradientLayer *bgLayer = [ColorBGView pinkSky1];
        bgLayer.frame = CGRectMake(0, 0, 1024, 768);
        [viewController.view.layer insertSublayer:bgLayer atIndex:0];

    //If I insert this sublayer (even at a lower index) 
    //it overlaps everything I attach afterward

        CAGradientLayer *bgLayer2 = [ColorBGView darkCave];
        bgLayer2.frame = CGRectMake(0, 0, 1024, 768);
        [viewController.view.layer insertSublayer:bgLayer2 atIndex:-10];    

        // add custom view

        parallaxView = [[ParallaxView alloc] init];
        parallaxView.frame = CGRectMake(0, 0, 1024, 768);
        [viewController.view insertSubview:parallaxView atIndex:1];

        [parallaxView release]; 
```

# php - 表达式引擎是否有数据库抽象层或 API？

> ID：10921780
> 
> 赞同：1
> 
> 时间：2012-06-06T20:31:24.500
> 
> 标签：php, sql, expressionengine

似乎从 EE 中获取条目的唯一方法是使用模板标签或编写 SQL。我宁愿不写 SQL，因为它不是很便携。我希望 EE 有一些 DAL，所以我可以做类似的事情：

```
// load entry of type "Post" with id 15
$this->EE->db->loadEntry('post',15); 
```

SQL 是从 PHP 访问数据的唯一选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T13:19:38.690

您可以使用由 Objectivehtml 创建的以下库：
[https ://github.com/objectivehtml/Channel-Data](https://github.com/objectivehtml/Channel-Data)

当然，最好的办法是在 EE 核心中直接提供一个 API，但现有的（Api_channel_entries）似乎只允许创建或更新条目。

# eclipse - 如何设置 Eclipse/Selenium 以在 Mac 上的其他浏览器上运行脚本？

> ID：10921783
> 
> 赞同：1
> 
> 时间：2012-06-06T20:31:31.453
> 
> 标签：eclipse, selenium, webdriver

我是 Mac 新手，在尝试在任何浏览器上运行脚本时遇到问题，更不用说 IE 或 Chrome。这是我到目前为止所做的：

1.  安装了最新版本的 Eclipse、Selenium 独立服务器和 Selenium IDE
2.  为 Eclipse 安装了 TestNG 框架
3.  已安装 Selenium Web 驱动程序和 JAVA 库

到目前为止，我所能做的就是运行我在 FF12 上创建的测试脚本。

我使用 Selenium IDE 在 FF12 上创建了一些测试脚本，然后使用 TestNG 将它们导出到 Eclipse，当我尝试运行它们时，我收到此错误消息“请将包含 ''firefox-bin' 或 'firefox'' 的目录添加到您的PATH环境"

我感觉我错过了很多正确配置 Eclipse 和 Selenium 以在其他浏览器（最好是 IE9 和最新版本的 Chrome）上运行脚本的步骤。如果这还不够糟糕，我使用的是 MacBook Pro（我一生都是 PC 人）。请保持温和，我能得到的任何建议将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T22:11:48.277

## **简短的回答**

似乎您的 firefox 可执行文件不在系统路径或默认位置。有多种方法可以解决此问题

1.在代码中设置firefox二进制路径

您需要设置 webdriver.firefox.bin 属性。在 java 中，您可以使用以下代码来执行此操作：

```
FirefoxProfile profile = new FirefoxProfile();
WebDriver driver = new FirefoxDriver(new FirefoxBinary(new File("path/to/your/firefox.exe")), profile); 
```

2.找到你的firefox的安装位置并在你的路径变量中更新该路径

```
export PATH=/my/firefox/path/bin:$PATH 
```

3\. 启动 selenium 服务器时将 webdriver.firefox.bin 指定为系统属性。

```
java -jar seleniumserver.jar -D webdriver.firefox.bin = "/path/to/firefox-bin 
```

执行上述任一操作后，您的问题应该得到解决。

## **不是那么简短的答案 - 为什么它失败了？**

每个 FirefoxDriver javadoc -

> **org.openqa.selenium.firefox.FirefoxDriver**
> 
> 驱动 Firefox 的 {#link WebDriver} 接口的实现。这通过一个 Firefox 扩展来工作，如果需要，它会自动安装。重要的系统变量是：
> 
> webdriver.firefox.bin - 使用哪个 firefox 二进制文件（通常是 PATH 上的“firefox”）。
> webdriver.firefox.profile - 要使用的配置文件的名称（通常是“WebDriver”）。

这里，**webdriver.firefox.bin**确定 firefox.exe（在 windows 中）或 firefox（在 mac 中）的路径。

通常，当您在计算机上安装 firefox 时，firefox 文件的路径会添加到**path**变量中。这将允许用户从任何地方调用 Firefox。

Webdriver 将在路径变量中查找此 firefox 可执行文件，然后在默认位置查找。从 selenium 代码中，此默认路径定义如下：

```
case MAC:
        if (!binaryName.endsWith(".app"))
          binaryName += ".app";
        binaryName += "/Contents/MacOS/firefox-bin";
        break; 
```

如果您的 firefox 文件在**/Contents/MacOS/firefox-bin**中不可用，那么 webdriver 将不知道在哪里可以找到它。因此失败。

# javascript - nodemailer nodejs：发送邮件以 127 退出

> ID：10921788
> 
> 赞同：1
> 
> 时间：2012-06-06T20:32:02.660
> 
> 标签：javascript, node.js, email, express, npm

我想从我的服务器 (kimsufi) 发送一封电子邮件，以确认注册。

所以，我使用**nodemailer** [https://github.com/andris9/Nodemailer](https://github.com/andris9/Nodemailer)

我有这个错误：

```
Error occured
Sendmail exited with 127 
```

什么意思 ？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T06:43:54.517

如果您使用此示例 [https://github.com/andris9/Nodemailer/blob/master/examples/example_sendmail.js](https://github.com/andris9/Nodemailer/blob/master/examples/example_sendmail.js)

然后替换此代码

> var transport = nodemailer.createTransport("Sendmail", "/usr/sbin/sendmail");

和

```
var transport = nodemailer.createTransport("SMTP", {
    host: "smtp.gmail.com", // hostname
    secureConnection: true, // use SSL
    port: 465, // port for secure SMTP
    auth: {
        user: "foo@rcorp.co.in",
        pass: "fooP@ssword"
    } }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T01:34:01.377

确保您的 sendmail 路径正确。要检查，请打开终端并发出：

```
which sendmail 
```

# css - IE中的字体看起来很糟糕

> ID：10921789
> 
> 赞同：0
> 
> 时间：2012-06-06T20:32:18.867
> 
> 标签：css, internet-explorer, cross-browser

最新的 Chrome、Opera、Safari 和 Firefox 中的字体看起来不错，但在 IE9 中它们看起来比较模糊和小。在其他网站上，它们看起来还不错吗？

我可以在 CSS 中更改什么以使它们看起来都一样吗？主要是尺寸，因为它使整个网站看起来很奇怪......

我正在使用以下 CSS：

```
margin: 0px;
padding: 0px;   
font: 11px Verdana, Arial;
line-height: 13px; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T21:18:09.003

声明

```
<!DOCTYPE html> 
```

将使 IE9 表现得更好一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T06:44:15.093

我会查看[HTML5 Boiler Template](http://html5boilerplate.com/)。他们已经解决了所有这些小怪癖，并创建了一个很好的样板供人们使用。

# hibernate - 从 ehcache 加载休眠对象时出现延迟初始化异常

> ID：10921790
> 
> 赞同：3
> 
> 时间：2012-06-06T20:32:22.503
> 
> 标签：hibernate, caching, ehcache, entities, lazy-initialization

我将休眠实体存储在 ehcache 中。当调用外观层以检索实体时，我的拦截器将调用该方法并将其缓存。下次调用相同的方法时，实体将从缓存中返回。这一切都很好。

我的实体有一些定义为 FetchType.Lazy 的属性（对象或关联实体）。它是这样的，

```
@JoinColumn(name = "inventory_item_oid", referencedColumnName = "inventory_item_oid")
@ManyToOne(fetch = FetchType.LAZY)
private InventoryItem inventoryItem; 
```

因此，并非所有属性都已加载。当需要库存项目时，它会被调用。此调用引发 LazyInitialization 异常。

由于我的缓存值只存在一天，因此可以在过期之前多次调用它。

这些调用之一引发上述异常。

我发现使用长休眠会话，我可以解决这个问题。但它不起作用，因为我的是基于请求/响应的应用程序。

还有另一种方法，我需要在访问其属性之前检查 InventoryItem 是否为空，如果它为空，那么我需要单独获取该值并将其附加到父项。这似乎很好......但需要做很多工作，因为我有很多实体。

我想知道是否有任何其他方法可以获取那些定义为惰性的对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T21:14:28.033

您不应该自己在 EHCache 中缓存实体。相反，您应该将 Hibernate 配置为使用二级缓存，并使用 EHCache 作为其实现。

最终结果将是相同的：您的实体将被缓存，并且您将往返保存到数据库。但是通过使用二级缓存，一切都将是透明的：您将从会话中加载实体，而 Hibernate 会自动将它们存储在缓存中。如果您从会话中重新加载它们，Hibernate 将从缓存中获取它们。如果您更新实体，它将从缓存中逐出以确保下次重新加载新副本。

与您的手工解决方案的另一个巨大区别是 Hibernate 将返回您*附加*的实体。因此，如果您只是调用 cachedEntity.getNonCachedEntity()，Hibernate 将延迟加载非缓存实体，就像您根本没有缓存一样。

实体是来自数据库还是来自二级缓存都不会改变任何东西：如果一个属性是延迟加载的，并且如果在会话关闭后访问该属性，那么延迟属性必须在会话之前初始化已经关了。

调用`Hibernate.initialize(foo.getInventotyItem())`初始化它。

更多信息在[Hibernate 文档](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#performance-cache)中。

# r - 使用VBA在excel中融化/重塑？

> ID：10921791
> 
> 赞同：17
> 
> 时间：2012-06-06T20:32:26.453
> 
> 标签：r, vba, excel, pivot-table, reshape2

我目前正在适应一份新工作，我与同事分享的大部分工作都是通过 MS Excel 完成的。我经常使用数据透视表，因此需要“堆叠”数据，这正是我依赖的 R 中 (reshape2) 包中`melt()`函数的输出。`reshape`

**任何人都可以让我开始使用 VBA 宏来完成此操作，或者是否已经存在？**

宏的轮廓是：

1.  在 Excel 工作簿中选择一系列单元格。
2.  启动“融化”宏。
3.  宏将创建一个提示“输入 id 列数”，您将在其中输入识别信息的前列数。（对于下面的示例 R 代码，它是 4）。
4.  在 Excel 文件中创建一个名为“melt”的新工作表，用于堆叠数据，并创建一个名为“变量”的新列，该列与原始选择的数据列标题相同。

换句话说，输出看起来与在 R 中简单地执行这两行的输出完全相同：

```
require(reshape)
melt(your.unstacked.dataframe, id.vars = 1:4) 
```

这是一个例子：

```
# unstacked data
> df1
  Year Month Country  Sport No_wins No_losses High_score Total_games
2 2010     5     USA Soccer       4         3          5           9
3 2010     6     USA Soccer       5         3          4           8
4 2010     5     CAN Soccer       2         9          7          11
5 2010     6     CAN Soccer       4         8          4          13
6 2009     5     USA Soccer       8         1          4           9
7 2009     6     USA Soccer       0         0          3           2
8 2009     5     CAN Soccer       2         0          6           3
9 2009     6     CAN Soccer       3         0          8           3

# stacking the data
> require(reshape)
> melt(df1, id.vars=1:4)

  Year Month Country  Sport    variable value
1  2010     5     USA Soccer     No_wins     4
2  2010     6     USA Soccer     No_wins     5
3  2010     5     CAN Soccer     No_wins     2
4  2010     6     CAN Soccer     No_wins     4
5  2009     5     USA Soccer     No_wins     8
6  2009     6     USA Soccer     No_wins     0
7  2009     5     CAN Soccer     No_wins     2
8  2009     6     CAN Soccer     No_wins     3
9  2010     5     USA Soccer   No_losses     3
10 2010     6     USA Soccer   No_losses     3
11 2010     5     CAN Soccer   No_losses     9
12 2010     6     CAN Soccer   No_losses     8
13 2009     5     USA Soccer   No_losses     1
14 2009     6     USA Soccer   No_losses     0
15 2009     5     CAN Soccer   No_losses     0
16 2009     6     CAN Soccer   No_losses     0
17 2010     5     USA Soccer  High_score     5
18 2010     6     USA Soccer  High_score     4
19 2010     5     CAN Soccer  High_score     7
20 2010     6     CAN Soccer  High_score     4
21 2009     5     USA Soccer  High_score     4
22 2009     6     USA Soccer  High_score     3
23 2009     5     CAN Soccer  High_score     6
24 2009     6     CAN Soccer  High_score     8
25 2010     5     USA Soccer Total_games     9
26 2010     6     USA Soccer Total_games     8
27 2010     5     CAN Soccer Total_games    11
28 2010     6     CAN Soccer Total_games    13
29 2009     5     USA Soccer Total_games     9
30 2009     6     USA Soccer Total_games     2
31 2009     5     CAN Soccer Total_games     3
32 2009     6     CAN Soccer Total_games     3 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-06T21:11:02.347

我的博客上有两篇关于在 Excel/VBA 中执行此操作的帖子，其中包含可用的代码和可下载的工作簿：

[http://yoursumbuddy.com/data-normalizer](http://yoursumbuddy.com/data-normalizer)

[http://yoursumbuddy.com/data-normalizer-the-sql/](http://yoursumbuddy.com/data-normalizer-the-sql/)

这是代码：

```
'Arguments
'List: The range to be normalized.
'RepeatingColsCount: The number of columns, starting with the leftmost,
'   whose headings remain the same.
'NormalizedColHeader: The column header for the rolled-up category.
'DataColHeader: The column header for the normalized data.
'NewWorkbook: Put the sheet with the data in a new workbook?
'
'NOTE: The data must be in a contiguous range and the
'columns that will be repeated must be to the left,
'with the columns to be normalized to the right.

Sub NormalizeList(List As Excel.Range, RepeatingColsCount As Long, _
    NormalizedColHeader As String, DataColHeader As String, _
    Optional NewWorkbook As Boolean = False)

Dim FirstNormalizingCol As Long, NormalizingColsCount As Long
Dim ColsToRepeat As Excel.Range, ColsToNormalize As Excel.Range
Dim NormalizedRowsCount As Long
Dim RepeatingList() As String
Dim NormalizedList() As Variant
Dim ListIndex As Long, i As Long, j As Long
Dim wbSource As Excel.Workbook, wbTarget As Excel.Workbook
Dim wsTarget As Excel.Worksheet

With List
    'If the normalized list won't fit, you must quit.
   If .Rows.Count * (.Columns.Count - RepeatingColsCount) > .Parent.Rows.Count Then
        MsgBox "The normalized list will be too many rows.", _
               vbExclamation + vbOKOnly, "Sorry"
        Exit Sub
    End If

    'You have the range to be normalized and the count of leftmost rows to be repeated.
   'This section uses those arguments to set the two ranges to parse
   'and the two corresponding arrays to fill
   FirstNormalizingCol = RepeatingColsCount + 1
    NormalizingColsCount = .Columns.Count - RepeatingColsCount
    Set ColsToRepeat = .Cells(1).Resize(.Rows.Count, RepeatingColsCount)
    Set ColsToNormalize = .Cells(1, FirstNormalizingCol).Resize(.Rows.Count, NormalizingColsCount)
    NormalizedRowsCount = ColsToNormalize.Columns.Count * .Rows.Count
    ReDim RepeatingList(1 To NormalizedRowsCount, 1 To RepeatingColsCount)
    ReDim NormalizedList(1 To NormalizedRowsCount, 1 To 2)
End With

'Fill in every i elements of the repeating array with the repeating row labels.
For i = 1 To NormalizedRowsCount Step NormalizingColsCount
    ListIndex = ListIndex + 1
    For j = 1 To RepeatingColsCount
        RepeatingList(i, j) = List.Cells(ListIndex, j).Value2
    Next j
Next i

'We stepped over most rows above, so fill in other repeating array elements.
For i = 1 To NormalizedRowsCount
    For j = 1 To RepeatingColsCount
        If RepeatingList(i, j) = "" Then
            RepeatingList(i, j) = RepeatingList(i - 1, j)
        End If
    Next j
Next i

'Fill in each element of the first dimension of the normalizing array
'with the former column header (which is now another row label) and the data.
With ColsToNormalize
    For i = 1 To .Rows.Count
        For j = 1 To .Columns.Count
            NormalizedList(((i - 1) * NormalizingColsCount) + j, 1) = .Cells(1, j)
            NormalizedList(((i - 1) * NormalizingColsCount) + j, 2) = .Cells(i, j)
        Next j
    Next i
End With

'Put the normal data in the same workbook, or a new one.
If NewWorkbook Then
    Set wbTarget = Workbooks.Add
    Set wsTarget = wbTarget.Worksheets(1)
Else
    Set wbSource = List.Parent.Parent
    With wbSource.Worksheets
        Set wsTarget = .Add(after:=.Item(.Count))
    End With
End If

With wsTarget
    'Put the data from the two arrays in the new worksheet.
   .Range("A1").Resize(NormalizedRowsCount, RepeatingColsCount) = RepeatingList
    .Cells(1, FirstNormalizingCol).Resize(NormalizedRowsCount, 2) = NormalizedList

    'At this point there will be repeated header rows, so delete all but one.
   .Range("1:" & NormalizingColsCount - 1).EntireRow.Delete

    'Add the headers for the new label column and the data column.
   .Cells(1, FirstNormalizingCol).Value = NormalizedColHeader
    .Cells(1, FirstNormalizingCol + 1).Value = DataColHeader
End With
End Sub 
```

你会这样称呼它：

```
Sub TestIt()
NormalizeList ActiveSheet.UsedRange, 4, "Variable", "Value", False
End Sub 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-08-26T16:27:37.360

微软最近推出了 Power Query，这是一个 Excel 插件，它为 Excel 中的数据操作添加了许多有趣的功能和能力，包括您正在寻找的内容。

加载项中的实际功能称为“Unpivot Columns”，[本文](http://office.microsoft.com/en-gb/excel-help/unpivot-columns-HA104053356.aspx)对此进行了说明。这是它的要点：

1.  [下载并安装插件](http://www.microsoft.com/en-us/download/details.aspx?id=39379)
2.  打开您的 Excel/CSV 文件
3.  选择要融化/重塑的表格/范围
4.  在“Power Query”选项卡中，单击“From Table”，这将打开“Query Editor”
5.  选择要融化/重塑的列（ctrl 或 shift-select，不要拖动）
6.  在“转换”选项卡中单击“取消透视列”（您也可以在返回 Excel 之前在此处应用其他转换）
7.  在“主页”选项卡中，单击“关闭并加载”。这将在 Excel 中创建一个具有所需结果的新表/查询对象。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-16T05:57:47.643

对于任何寻找可视化方式来规范化 excel 数据的人，请参阅此视频教程：

[http://www.youtube.com/watch?v=xmqTN0X-AgY](http://www.youtube.com/watch?v=xmqTN0X-AgY)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-14T17:45:07.320

或使用：

```
Sub M_snb_000()
  With sheet1.Cells(1).CurrentRegion
    sn = .Resize(, .Columns.Count + 1)
  End With

  For j = 4 To UBound(sn, 2) - 1
    With Sheet2.Cells(2 + (UBound(sn) - 1) * (j - 4), 1)
       .Resize(UBound(sn) - 1, 5) = Application.Index(sn, Evaluate("row(2:" 
             & UBound(sn) & ")"), Array(1, 2, 3,UBound(sn, 2), j))
       .Resize(UBound(sn) - 1, 1).Offset(, 3) = sn(1, j)
    End With
  Next
End Sub 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-30T00:33:25.743

首先创建一个用户表单并将其命名为 Unpivot_Form，其中包含两个 RefEdit 字段 - rng_id 和 value_id 以及一个提交/执行按钮。我也是 R 用户， rng_id 是包含 id 的范围，而 value_id 包含值；两个范围都包括标题。

做两个宏：

```
Sub unpivot()
Unpivot_Form.Show
End Sub 
```

另一个宏位于字段的提交/执行按钮内：

```
Private Sub submit_Click()
'Code to unpivot (convert wide to long for excel)

Dim rng_id, rng_id_header, val_id As Range
Dim colvar, emptyrow, col As Integer
Dim new_sheet As Worksheet

'Put val_id range into a range object
Set val_id = Range(value_id.Value)

'Determine the parameter for the value id range
'This is used for the looping later on
numrows = val_id.Rows.Count
numcols = val_id.Columns.Count

'Resize changes the "block" to the size defined by the row and column
'Offset moves the "block"
Set rng_id_header = Range(range_id.Value).Resize(1)
Set rng_id = Range(range_id.Value).Offset(1, 0).Resize(numrows - 1)

Set new_sheet = Worksheets.Add

'Set up the first column and first batch of id vars
new_sheet.Activate
Range("A65535").End(xlUp).Activate
rng_id_header.Copy ActiveCell
colvar = Range("XFD1").End(xlToLeft).Column + 1
Range("XFD1").End(xlToLeft).Offset(, 1).Value = "Variable"
Range("XFD1").End(xlToLeft).Offset(, 1).Value = "Value"

'Start populating the value ids
For col = 1 To numcols

  'populate var_id
  'determine last row
   emptyrow = Range("A65535").End(xlUp).Row + 1
   'no need to activate to source to copy
   rng_id.Copy new_sheet.Cells(emptyrow, 1)
  'copy the variable
  val_id.Offset(, col - 1).Resize(1, 1).Copy new_sheet.Range(Cells(emptyrow, colvar), Cells(emptyrow + numrows - 2, colvar))
  'copy the value
  val_id.Offset(1, col - 1).Resize(numrows - 1, 1).Copy new_sheet.Range(Cells(emptyrow, colvar + 1), Cells(emptyrow + numrows - 2, colvar + 1))

Next

Unload Me

End Sub 
```

享受！

# data-structures - 每个节点存储多个值的树

> ID：10921795
> 
> 赞同：4
> 
> 时间：2012-06-06T20:32:30.553
> 
> 标签：data-structures, find, binary-tree, treenode

我正在尝试找到一种方法来创建一个二叉树，其中每个节点中存储 3 个双精度，而另一个树中每个节点中存储 6 个双精度。

我遇到的问题是想办法实现查找和插入方法（不需要删除）。

基本上，我的树保存 x、y、z 值，当我调用 find 时，我希望它返回包含最接近我试图查找的 x、y 和 z 值的节点。

我应该如何解决这个问题以及解决方案的一些想法？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T20:41:32.970

您似乎正在寻找[**kd 树**](http://en.wikipedia.org/wiki/K-d_tree)数据结构，它还允许找到给定元素的[最近邻居。](http://en.wikipedia.org/wiki/K-d_tree#Nearest_neighbour_search)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T20:40:47.917

```
 public class BinaryTreeNode<T>
 {
    public T Value {get; set;}

    public BinaryTreeNode<T> Left {get; set;}
    public BinaryTreeNode<T> Right {get; set;}

    public BinaryTreeNode<T> Seach(T forWhat)
    {
       if(Value == forWhat) return this;

       BinaryTreeNode<T> leftResult = Left.Search(forWhat);
       if(leftResult != null) return leftResult;

       BinaryTreeNode<T> rightResult = Right.Search(forWhat);
       if(rightResult != null) return rightResult;

       return null;
    }
 }

 BinaryTreeNode<Tuple<double, double, double>> threeDoublesTree = new BinaryTreeNode<Tuple<double, double, double>>();

 BinaryTreeNode<Tuple<double, double, double, double, double, double>> sixDoublesTree = new BinaryTreeNode<Tuple<double, double, double, double, double, double>>(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T20:38:07.183

基本上每个节点存储 1 个值。您可以将这些 x、y、z 值视为 3D 点。在一个节点的左侧，您放置更接近 (0, 0, 0) 的点，在右侧您持有更远的点。如果您有这样的结构，您可以像在普通二叉树中一样搜索和插入数据。

# sql - 将 PDF 存储在数据库或硬盘中

> ID：10921800
> 
> 赞同：0
> 
> 时间：2012-06-06T20:32:56.117
> 
> 标签：sql, sql-server

我有一个存储扫描的 PDF 文件的网页。目前我将它作为 varbinary 存储在 Sql 数据库中。

我正在从头开始重新设计所有内容，并认为将 PDF 存储在硬盘上并且只有一条路径可能会更有效。

PDF 收藏，可能会达到 500gig+..

哪个更有效，哪种方式有什么优势？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T20:36:01.923

我会使用持久存储，例如 AmazonS3。它很便宜，可复制，而且如果您在未来某个时候更改您的数据库技术，这将相当容易。不要将文件直接存储在您的数据库中，而是将 PDF 的 URL 存储在您的 AmazonS3 存储中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T21:26:30.843

研究使用 FILESTREAM 在文件系统上以数据库可访问的方式存储文件：[Using FILESTREAM to Store BLOBs in the NTFS File System in SQL Server 2008](http://www.mssqltips.com/sqlservertip/1489/using-filestream-to-store-blobs-in-the-ntfs-file-system-in-sql-server-2008/)

# perl - 为什么“包”关键字有时会用注释与包名称隔开？

> ID：10921807
> 
> 赞同：12
> 
> 时间：2012-06-06T20:33:34.407
> 
> 标签：perl

分析 CPAN 模块的来源，我可以看到如下内容：

```
...
package # hide from PAUSE
   Try::Tiny::ScopeGuard;
... 
```

显然，它取自，但我在其他模块中也看到过关键字和包标识符 之间`Try::Tiny`的这种*注释。*`package`

为什么使用这个程序？它的目标是什么，它有什么好处？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-06T21:15:12.917

从 PAUSE 的索引器中隐藏一个包确实是一种 hack。

当分发上传到 PAUSE 时，索引器将检查上传中的每个文件，查找包含在分发中的包的名称。任何被索引的包都可以显示在 CPAN 搜索结果中。

不希望索引器发现您的包的原因有很多。您的发行版可能有许多小的或无关紧要的软件包，它们会使您的模块的搜索结果变得混乱。您可能在`t`(test) 目录或其他一些非标准目录中定义了包，这些包不打算作为分发的一部分安装。您的发行版可能包含来自完全不同的发行版（其他人编写的）的文件。

hack 之所以有效，是因为索引器`package`在同一行严格查找关键字和看起来像包名称的表达式。

现在，您可以`META.yml`在您的发行版中包含一个文件。PAUSE 索引器将查找并遵守`no_index`此文件中的规范。但这是索引器的一项相对较新的功能，因此旧模块和旧 CPAN 贡献者仍将使用换行破解。

`no_index`这是来自的规范示例[`Forks::Super`](http://cpansearch.perl.org/src/MOB/Forks-Super-0.63/META.yml)

```
no_index:
    directory:
        - t
        - inc
    package:
        - Sys::CpuAffinity
        - Signals::XSIG
        - Signals::XSIG::Default
        - Signals::XSIG::TieArray56 
```

`Sys::CpuAffinity`并且`Signals::XSIG`是单独的发行版，也与`Forks::Super`. 一些测试脚本包含不应被索引的`package`声明（例如， ）。[`Arbitrary::Test::Package`](http://cpansearch.perl.org/src/MOB/Forks-Super-0.63/t/02a-tie-enum.t)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-06-06T21:14:01.713

好的，这是关于这种现象的另一个镜头……我已经对 Perl 进行了十几年的黑客攻击，而且我很少看到这种打包的 hack，可能只是被忽略了，也从不费心去调查。不过，有一件事似乎很清楚。在 PAUSE 进行了一些骇人听闻的处理，这些处理是在良好的 ol'Perl'n'UNIX 学派中精心设计的，毫无疑问涉及面向行的文本解析，因此他们解析这些 Perl 文件，甚至可能使用`grep`, 但是相当`perl`本身，谁知道，提取包名称，然后启动一些程序或获取一些统计信息或诸如此类的东西。为了绕过这个过程并破解它的方式，作者将包声明分成两行，所以hacky packy grep 工作不知道在它的鼻子下声明了一个包并且程序员对他的hacky技能感到高兴并且 PAUSE 统计数据或他们正在拼凑的任何东西都是应有的。那有意义吗？

# css - css3 nth 类型限制为类

> ID：10921809
> 
> 赞同：81
> 
> 时间：2012-06-06T20:33:35.433
> 
> 标签：css, css-selectors, pseudo-class

有什么办法可以将 css3 限制`nth-of-type`在一个类中吗？我有动态数量的`section`元素，它们具有不同的类来指定它们的布局需求。我想每 3rd 抓取一次`.module`，但似乎`nth-of-type`查找类元素类型然后计算类型。相反，我想将其限制为仅`.module`s。

谢谢！

JSFiddle 演示：http: [//jsfiddle.net/danielredwood/e2BAq/1/](http://jsfiddle.net/danielredwood/e2BAq/1/)

HTML：

```
<section class="featured video">
    <h1>VIDEO</h1>
</section>
<section class="featured module">
    <h1>NOT A VIDEO</h1>
</section>
<section class="featured module">
    <h1>NOT A VIDEO</h1>
</section>
<section class="featured module">
    <h1>NOT A VIDEO (3)</h1>
</section>
<section class="featured module">
    <h1>NOT A VIDEO</h1>
</section>
<section class="featured module">
    <h1>NOT A VIDEO</h1>
</section>
<section class="featured module">
    <h1>NOT A VIDEO (6)</h1>
</section> 
```

​CSS：

```
.featured {
  width:31%;
  margin:0 0 20px 0;
  padding:0 3.5% 2em 0;
  float:left;
  background:#ccc;
}
  .featured.module:nth-of-type(3n+3) {
    padding-right:0;
    background:red;
  }
  .featured.video {
    width:auto;
    padding:0 0 2em 0;
    float:none;
  }​ 
```

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-06-07T12:38:44.917

不幸的是，没有办法（至少我不知道）选择`nth-of-type`一个类，因为`nth-of-class`不存在。您可能必须`.module`手动为每三分之一添加一个新类。

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2015-04-21T02:31:07.260

看来您真正想要的是[css4 :nth-match 选择器](http://css4-selectors.com/selector/css4/structural-pseudo-class/)，但大多数浏览器还没有真正支持它，所以目前，唯一的方法是使用 javascript

```
$(".featured.module").filter(function(index, element){
    return index % 3 == 2;
}).addClass("third"); 
```

[http://jsfiddle.net/w3af16dj/](http://jsfiddle.net/w3af16dj/)

# iphone - ios - 为什么 Flipside 控制器如此复杂？

> ID：10921813
> 
> 赞同：0
> 
> 时间：2012-06-06T20:33:37.340
> 
> 标签：iphone, ios, modalviewcontroller

只是一个快速的问题。

我正忙于使用基于实用程序应用程序模板的 iPhone 应用程序来设置我的核心数据信息。

我只是想知道，为什么 FlipViewController 是这样设置的。

在情节提要中使用模态视图进行链接不是容易得多吗？

```
- (IBAction)doneFlip:(id)sender
{
[self dismissModalViewControllerAnimated:YES];
} 
```

要返回之前的视图？

这是性能原因吗？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T21:32:09.640

Apple 的模板在 Xcode 4.x 中总是一团糟。对于那些还记得 Xcode 2.x 甚至早期 3.x 的人来说，模板相对统一，评论非常好，而且几乎没有额外的粗鲁。但在 4.x 中，模板已经成为 Apple 众多 Xcode 开发人员的编码风格、偏好和传统的不和谐组合。

至于那个：

```
- (IBAction)doneFlip:(id)sender
{
    [self dismissModalViewControllerAnimated:YES];
} 
```

`-dismissModalViewController`不是最好的使用方法（它应该从呈现控制器调用。`-popViewControllerAnimated`如果它在呈现视图内部的动作中，则使用它。

# javascript - jQuery更改选定选项后刷新选择

> ID：10921821
> 
> 赞同：6
> 
> 时间：2012-06-06T20:34:14.517
> 
> 标签：javascript, jquery

我正在使用 jQuery 以编程方式更新选定的选项，但浏览器中没有任何变化。（也就是说，旧选择的选项保持选中状态，而不是切换到新选择的选项。）建议？

谢谢。——杰夫

我有一个像这样的简单表格：

```
<form id="form1" name="form1" method="" action="">
<p>Assign: 
<select name="assigner" id="assigner">
<option value="Sam" selected="selected">Sam</option>
  <option value="Harry">Harry</option>
  <option value="Fred">Fred</option>
</select>
<input type="button" name="button1" id="button1" value="Submit" />
</p>
<p>    Task A: <select name="assignment[]" id="assigner">
  <option value="Sam">Sam</option>
  <option value="Harry" selected="selected">Harry</option>
  <option value="Fred">Fred</option>
</select>
</p>
<p>    
Task B: <select name="assignment[]" id="assigner">
  <option value="Sam">Sam</option>
  <option value="Harry"  selected="selected">Harry</option>
  <option value="Fred">Fred</option>
</select>
</p>
</form></div> 
```

我的 jQuery 代码如下所示：

```
<script type="text/javascript">
jQuery(document).ready(function(){ 
$('[name="button1"]').click(
    function(){
        var form = $(this).parents('form');
        var assigned = form.find(':selected').first().val();
        form.find(':selected').each(function(index){
            $(this).val( assigned ).change();
        });
    }
 );
});
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T20:38:37.700

> 我正在使用 jQuery 以编程方式更新选定的选项

据我所见。您正在重新设置 selected 的值`option`，但据我所知，实际`select`框没有做任何事情。

要改变一个`select`盒子，你需要识别它，然后调用`val`它**，**而不是它的`option`元素之一。

我不知道你想要你`input[name="button1"]`做什么，但这里有一个更新`select`盒子的例子：[Live copy](http://jsbin.com/awakec) | [来源](http://jsbin.com/awakec/edit)

HTML：

```
<select id="theSelect">
    <option value="1">One</option>
    <option value="2">Two</option>
    <option value="3">Three</option>
</select>
<input type="button" id="theButton" value="Click me"> 
```

JavaScript：

```
jQuery(function($) {

  $("#theButton").click(function() {
    $("#theSelect").val("2");
  });

}); 
```

* * *

另外，正如 j08691 在评论中指出的那样，您不能将相同的`id`值 ( `"assigner"`) 分配给多个元素。[`id`值在文档中**必须**是唯一](http://www.w3.org/TR/html5/elements.html#the-id-attribute)的。您的代码没有显示您使用 that `id`，所以这很可能是无关的，但值得标记。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T20:45:28.653

```
<form id="form1" name="form1" method="" action="">
    <p>Assign: 
        <select name="assigner" id="assigner">
            <option value="Sam" selected="selected">Sam</option>
            <option value="Harry">Harry</option>
            <option value="Fred">Fred</option>
        </select>
        <input type="button" name="button1" id="button1" value="Submit" />
    </p>
    <p>
        Task A: <select name="assignment[]" id="assigner2">
            <option value="Sam">Sam</option>
            <option value="Harry" selected="selected">Harry</option>
            <option value="Fred">Fred</option>
        </select>
    </p>
    <p>    
        Task B: <select name="assignment[]" id="assigner3">
            <option value="Sam">Sam</option>
            <option value="Harry"  selected="selected">Harry</option>
            <option value="Fred">Fred</option>
        </select>
    </p>
</form>

<script type="text/javascript">
jQuery(document).ready(function(){ 
$('[name="button1"]').click(
    function(){
        var assigned = $("#assigner").val();
        $('#form1 select').val( assigned );
    }
 );
});
</script> 
```

# java - 构建动态 JPanel 的最佳方法

> ID：10921822
> 
> 赞同：2
> 
> 时间：2012-06-06T20:34:21.930
> 
> 标签：java, swing, design-patterns, user-interface, jpanel

我正在构建一个包含多个字段的 JPanel，但根据产品，这些字段可能会有所不同。
每个产品都有一些公共字段和一些特定字段。使用一些接口，可以对字段进行分组以使用所有需要的字段构建引用的 JPanel，如下所示：

```
public class VPNProduct extends JPanel implements VPNFields{
    //use and positioning of the fields
}

interface VPNFields extends CommonFields{
    //particular VPN fields
}

interface CommonFields{
    //fields common to all products
} 
```

我的问题是，有一些最佳实践或技术可以使它更容易或更井井有条，包括面板中字段的位置？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T15:07:22.073

有一些优雅的方法可以做到这一点。首先，一个接口将具有您的 get/set 方法，这些方法将访问您的字段。因此，您将有一个用于公共字段的接口和用于其他字段的其他接口。公共字段接口（因为它将被共享）应该实现为抽象类。这个抽象类将扩展 JPanel 并构建您的 JLabel、JComboBoxes ...等，并将它们布置在布局管理器中。

然后对于您需要添加更多字段的任何其他类，您将创建一个 Class 并让它扩展您的抽象类（所以现在它是一个 JPanel，所有公共字段都已经创建和布局）并使用您的额外实现一个接口字段。这些额外的字段您将必须创建它们的 Swing 组件并将它们添加到当前具有公共字段的布局管理器中。

如果您提供一些现场示例或向我们提供有关结构的提示，我可以起草一些代码示例以便您查看。

一个代码示例，显示可用于 Company 和 School 的公共字段，以及我们如何创建 2 个 JFrame，其表单均源自 1 个 JPanel 抽象类：

```
package stackoverflow.test;

public interface CommonFields {

    public void setName(String name);

    public void setLastName(String lastName);

    public void setAge(int age);

    public String getName();

    public String getLastName();

    public int getAge();
} 
```

-

```
package stackoverflow.test;

public interface SchoolFields {

    public void setSchoolName(String schoolName);

    public void setGrade(int grade);

    public void setHonorsProgram(boolean isHonors);

    public String getSchoolName();

    public int getGrade();

    public boolean hasHonorsProgram();
} 
```

-

```
package stackoverflow.test;

public interface CompanyFields {

    public void setCompanyName(String companyName);

    public void setJobTitle(String jobTitle);

    public void setAddress(String address);

    public String getCompanyName();

    public String getJobTitle();

    public String getAddress();
} 
```

-

```
package stackoverflow.test;

import java.awt.GridLayout;

import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;

public class AbstractJPanel extends JPanel implements CommonFields {

    private static final long serialVersionUID = 150030761086805569L;

    private JTextField nameField = null;
    private JTextField lastNameField = null;
    private JTextField ageField = null;
    private JLabel nameLabel = null;
    private JLabel lastNameLabel = null;
    private JLabel ageLabel = null;

    public AbstractJPanel() {
        super(new GridLayout(0, 2));

        nameField = new JTextField();
        lastNameField = new JTextField();
        ageField = new JTextField();

        nameLabel = new JLabel("Name: ");
        lastNameLabel =new JLabel("Last Name: ");
        ageLabel = new JLabel("Age: ");

        add(nameLabel);
        add(nameField);
        add(lastNameLabel);
        add(lastNameField);
        add(ageLabel);
        add(ageField);
    }

    public void setName(String name) {
        nameField.setText(name);
    }

    public void setLastName(String lastName) {
        lastNameField.setText(lastName);
    }

    public void setAge(int age) {
        ageField.setText(""+age);
    }

    public String getName() {
        return nameField.getText();
    }

    public String getLastName() {
        return lastNameField.getText();
    }

    public int getAge() {
        return Integer.parseInt(ageField.getText());
    }
} 
```

-

```
package stackoverflow.test;

import javax.swing.JCheckBox;
import javax.swing.JLabel;
import javax.swing.JTextField;

public class SchoolPanel extends AbstractJPanel implements SchoolFields {

    private static final long serialVersionUID = -6201476099194804075L;

    private JTextField schoolNameField = null;
    private JTextField gradeField = null;
    private JCheckBox honorsCheckBox = null;
    private JLabel schoolNameLabel = null;
    private JLabel gradeLabel = null;
    private JLabel honorsLabel = null;

    public SchoolPanel() {
        super();

        schoolNameLabel = new JLabel("School Name: ");
        gradeLabel = new JLabel("Grade: ");
        honorsLabel = new JLabel("Is Honors: ");

        schoolNameField = new JTextField();
        gradeField = new JTextField();
        honorsCheckBox = new JCheckBox();

        add(schoolNameLabel);
        add(schoolNameField);
        add(gradeLabel);
        add(gradeField);
        add(honorsLabel);
        add(honorsCheckBox);
    }

    @Override
    public void setSchoolName(String schoolName) {
        schoolNameField.setText(schoolName);
    }

    @Override
    public void setGrade(int grade) {
        gradeField.setText(""+grade);
    }

    @Override
    public void setHonorsProgram(boolean isHonors) {
        honorsCheckBox.setSelected(isHonors);
    }

    @Override
    public String getSchoolName() {
        return schoolNameField.getText();
    }

    @Override
    public int getGrade() {
        return Integer.parseInt(gradeField.getText());
    }

    @Override
    public boolean hasHonorsProgram() {
        return honorsCheckBox.isSelected();
    }
} 
```

-

```
package stackoverflow.test;

import javax.swing.JLabel;
import javax.swing.JTextField;

public class CompanyPanel extends AbstractJPanel implements CompanyFields {

    private static final long serialVersionUID = 7834845724312492112L;

    private JTextField companyNameField = null;
    private JTextField jobTitleField = null;
    private JTextField addressField = null;
    private JLabel companyNameLabel = null;
    private JLabel jobTitleLabel = null;
    private JLabel addressLabel = null;

    public CompanyPanel() {
        super();

        companyNameLabel = new JLabel("Company Name: ");
        jobTitleLabel = new JLabel("Job Title: ");
        addressLabel = new JLabel("Address: ");

        companyNameField = new JTextField();
        jobTitleField = new JTextField();
        addressField = new JTextField();

        super.add(companyNameLabel);
        super.add(companyNameField);
        super.add(jobTitleLabel);
        super.add(jobTitleField);
        super.add(addressLabel);
        super.add(addressField);
    }

    @Override
    public void setCompanyName(String companyName) {
        companyNameField.setText(companyName);
    }

    @Override
    public void setJobTitle(String jobTitle) {
        jobTitleField.setText(jobTitle);
    }

    @Override
    public void setAddress(String address) {
        addressField.setText(address);
    }

    @Override
    public String getCompanyName() {
        return companyNameField.getText();
    }

    @Override
    public String getJobTitle() {
        return jobTitleField.getText();
    }

    @Override
    public String getAddress() {
        return addressField.getText();
    }

} 
```

-

```
package stackoverflow.test;

import java.awt.BorderLayout;

import javax.swing.JFrame;

public class MainClass {

    public MainClass() {
        JFrame frame1 = new JFrame();
        frame1.setLayout(new BorderLayout());
        frame1.add(new CompanyPanel());
        frame1.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        frame1.setSize(500, 500);
        frame1.setVisible(true);

        JFrame frame2 = new JFrame();
        frame2.setLayout(new BorderLayout());
        frame2.add(new SchoolPanel());
        frame2.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        frame2.setSize(500, 500);
        frame2.setVisible(true);
    }

    public static final void main(String ... args) {
        new MainClass();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T14:09:05.153

想的不是很好，因为我不知道你用的是什么类型的字段，所以做了一些虚构的字段`JLabel`s，看看。我希望这能很好地解释我试图从我身边提供的东西，以及你可以看到的一个小方向:-)

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class Products
{
    private JComboBox productBox;
    private String[] productNames;
    private JLabel imageLabel;
    private Icon desktopIcon = UIManager.getIcon("OptionPane.informationIcon");
    private Icon keyboardIcon = UIManager.getIcon("OptionPane.errorIcon");
    private Icon mouseIcon = UIManager.getIcon("OptionPane.warningIcon");

    private MainPanel mainPanel;
    private JPanel fieldPanel;
    private AdditionalFields additional;

    public Products()
    {
        productNames = new String[]{
                                    "Desktop",
                                    "Keyboard",
                                    "Mouse"
                                   };
    }

    private void createAndDisplayGUI()
    {
        JFrame frame = new JFrame("Products");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        imageLabel = new JLabel();

        JPanel contentPane = new JPanel();
        contentPane.setOpaque(true);
        contentPane.setBackground(Color.WHITE);
        contentPane.setBorder(
                        BorderFactory.createTitledBorder(
                                                "Products : "));
        contentPane.setLayout(new GridLayout(0, 1, 2, 2));
        contentPane.add(imageLabel);

        fieldPanel = new JPanel();

        fieldPanel.setOpaque(true);
        fieldPanel.setBackground(Color.WHITE);
        fieldPanel.setBorder(
                    BorderFactory.createEmptyBorder(
                                            5, 5, 5, 5));
        fieldPanel.setLayout(new GridLayout(0, 1, 2, 2));

        productBox = new JComboBox(productNames);
        productBox.addActionListener(new ActionListener()
        {
            public void actionPerformed(ActionEvent ae)
            {
                JComboBox cbox = (JComboBox) ae.getSource();
                String product = (String) cbox.getSelectedItem();
                fieldPanel.removeAll();
                if (product.equals("Desktop"))
                {
                    mainPanel = new MainPanel("DESKTOP", "50000");
                    imageLabel.setIcon(desktopIcon);
                    fieldPanel.add(mainPanel);  
                    fieldPanel.revalidate();
                    fieldPanel.repaint();                   
                }
                else if (product.equals("Keyboard"))
                {
                    mainPanel = new MainPanel("Keyboard", "50");
                    additional = new AdditionalFields("Keyboard");
                    imageLabel.setIcon(keyboardIcon);
                    fieldPanel.add(mainPanel);  
                    fieldPanel.add(additional);
                    fieldPanel.revalidate();
                    fieldPanel.repaint();                   
                }
                else if (product.equals("Mouse"))
                {
                    mainPanel = new MainPanel("Mouse", "30");
                    additional = new AdditionalFields("Mouse");
                    imageLabel.setIcon(mouseIcon);
                    fieldPanel.add(mainPanel);  
                    fieldPanel.add(additional);
                    fieldPanel.revalidate();
                    fieldPanel.repaint();                   
                }
            }
        });

        contentPane.add(fieldPanel);

        frame.getContentPane().add(contentPane, BorderLayout.CENTER);
        frame.getContentPane().add(productBox, BorderLayout.PAGE_END);

        frame.setSize(300, 300);
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new Products().createAndDisplayGUI();
            }
        });
    }
}

class MainPanel extends JPanel
{
    private JLabel nameLabel;
    private JLabel valueLabel;
    private JTextField nameField;
    private JTextField valueField;

    public MainPanel(String name, String value)
    {
        setOpaque(true);
        setBackground(Color.WHITE);
        nameLabel = new JLabel("Name : ");
        nameField = new JTextField(name, 10);
        valueLabel = new JLabel("Value : ");
        valueField = new JTextField(value, 10);
        setLayout(new GridBagLayout());
        GridBagConstraints gbc = new GridBagConstraints();
        gbc.anchor = GridBagConstraints.FIRST_LINE_START;
        gbc.weightx = 0.5;
        gbc.fill = GridBagConstraints.NONE;
        gbc.gridx = 0;
        gbc.gridy = 0;
        add(nameLabel, gbc);
        gbc.gridx = 1;
        gbc.gridy = 0;
        add(nameField, gbc);
        gbc.gridx = 0;
        gbc.gridy = 1;
        add(valueLabel, gbc);
        gbc.gridx = 1;
        gbc.gridy = 1;
        add(valueField, gbc);
    }   
}

class AdditionalFields extends JPanel
{
    private JLabel noOfButtons;
    private JLabel noButField;

    public AdditionalFields(String product)
    {       
        setOpaque(true);
        setBackground(Color.WHITE);
        setLayout(new GridBagLayout());
        GridBagConstraints gbc = new GridBagConstraints();
        gbc.anchor = GridBagConstraints.FIRST_LINE_START;
        gbc.weightx = 0.5;
        gbc.fill = GridBagConstraints.NONE;
        gbc.gridx = 0;
        gbc.gridy = 0;
        if (product.equals("Keyboard"))
        {
            noOfButtons = new JLabel(product);
            noButField = new JLabel("110 KEYS", JLabel.CENTER); 
        }   
        else if (product.equals("Mouse"))
        {
            noOfButtons = new JLabel(product);  
            noButField = new JLabel("3 BUTTONS", JLabel.CENTER);
        }   
        add(noOfButtons, gbc);  
        gbc.gridx = 1;
        gbc.gridy = 0;
        add(noButField, gbc);
    }
} 
```

# solr - Solr Faceting Multi-valued vs Tokenizers

> ID：10921823
> 
> 赞同：0
> 
> 时间：2012-06-06T20:34:27.007
> 
> 标签：solr

我正在尝试在我的架构中设置一个主题字段。我从一个数据库中提取，其中一条记录可以有多个主题，并且主题以逗号分隔的字符串列出。有没有办法只关注其中一个主题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T06:17:24.787

检查[SolrFacetingOverview](http://wiki.apache.org/solr/SolrFacetingOverview)以获得刻面概述。
分面索引部分提到了您应该为要分面的字段选择的字段类型。

您可以使用[SimpleFacetParameters自定义分面](http://wiki.apache.org/solr/SimpleFacetParameters)

[您可以使用过滤器查询](http://wiki.apache.org/solr/CommonQueryParameters#fq)过滤具有主题特定值的实体的结果，例如`fq=subject:"MATH"`
过滤将仅生成与条件匹配的结果，而构面结果将包括结果集中的构面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T22:28:28.653

如果我理解你想要这个，在 dih 文件中：

```
 <entity name="entity"  pk="id" query="..." transformer="RegexTransformer">
          <field column="subjects" splitBy=","/>
        </entity> 
```

和分面查询：

```
http://localhost:8983/solr/select?q=...&facet=true&facet.field=subjects&facet.query=subjects:the-one-you-want 
```

那行得通吗？

# javascript - 使用 Javascript 或 HTML 检测 iOS 设备的型号？

> ID：10921832
> 
> 赞同：20
> 
> 时间：2012-06-06T20:35:03.420
> 
> 标签：javascript, iphone, html, mediaelement.js, device-detection

所以我在我的网站上提供 H.264 .mp4 视频。我正在使用开源 HTML5 视频播放器[http://mediaelementjs.com/](http://mediaelementjs.com/)。一些访问者正在从 Safari for iPhone 查看。iPhone 4 仅支持最高 720p 的视频播放，因此如果我将视频制作得比这更小，它们可以在 4 和 4S 上运行。但 4S 支持高达 1080p 的视频。那么如何将较大的视频提供给 4S，而将较小的视频提供给 4？我试过这个：

```
<video width="640" height="400" id="player" controls="controls" preload="auto">
    <source src="https://s3.amazonaws.com/my-big-1080p-video.mp4" type="video/mp4">
    <source src="https://s3.amazonaws.com/my-small-720p-video.mp4" type="video/mp4">
</video> 
```

但它没有用。iPhone 4 不够聪明，无法尝试第二个来源。如何让我的网站为不同的设备提供正确的视频？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-02-11T10:55:31.027

## 在 iPhone 4 上播放 720p 视频 — 在 iPhone 4S 上播放 1080p 视频

在 iPhone 4 和 4S ( [jsfiddle](http://jsfiddle.net/ojohc4bs/) ) 上试试这个

```
<video src="http://file.brow.sr/1080p.mp4" onerror="this.src='http://file.brow.sr/720p.mp4';" controls loop width="320" height="180">
</video>
```

## 解释

加载 1080p 视频，然后使用 Javascript`onError`回退到 720p。

Safari 会嗅探 1080p 文件的标题以确定它是否可播放，如果文件太大而无法解码，则会抛出错误。然后我们捕获该错误以提供 720p 视频。

通过使用这种特征检测，回退不仅适用于一个设备（iPhone 4），而且可能适用于许多不同的浏览器。

## 为什么多个`<source>`'s 不起作用

当使用*具有相同 MIME 类型*`<source>`的多个标签时，浏览器将加载具有兼容 MIME 类型的第一个源并丢弃其他源，即使该视频不可播放。这是因为元素[应](https://bugzilla.mozilla.org/show_bug.cgi?id=449363)提供替代视频编解码器（例如 ogg、webm、mp4），*而不是*替代帧大小/文件大小。*`source`*

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-21T00:52:12.110

以下是如何去做：

> 1) 使用 wurfl 检索设备模型

```
<script type='text/javascript' src=“//wurfl.io/wurfl.js"></script> 
```

您可以使用 HTTP 或 HTTPS（两者都受支持） 如果您计划使用脚本提供的设备信息来做出渲染决策，那么您可能希望将脚本包含在元素中。否则，您可以异步加载它。现在您可以访问 JavaScript 中的 WURFL 对象。

示例响应如下所示：

> { complete_device_name:"Apple iPhone 5", form_factor:"Smartphone", is_mobile:true }

当然你可以（并且应该）

```
console.log(WURFL); 
```

找出您可以使用的其余属性。

> 2) 现在您知道您的用户使用的是哪种设备型号，您可以切换视频播放器配置。

怎么样？

```
<video width="IPHONE5_VIDEO_WIDTH"
       height="IPHONE5_VIDEO_HEIGHT"
       id="player" controls="controls"
       preload="auto">
       <source src="IPHONE5_VIDEO_URL" type="video/mp4">
</video> 
```

超级干净和可读对吗？希望有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-20T09:19:17.980

由于亲爱的@Duvrai 提到的原因，您的解决方案不起作用。我已经寻找一种正确的方法来满足您的目的，似乎我们别无选择，除非使用一些 javascript 代码（这里不考虑服务器端编程）来决定应该交付哪个源。下面的代码片段检测浏览器*类型*及其***版本***：

```
navigator.sayswho= (function(){
    var ua= navigator.userAgent, tem, 
    M= ua.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i) || [];
    if(/trident/i.test(M[1])){
        tem=  /\brv[ :]+(\d+)/g.exec(ua) || [];
        alert('IE '+(tem[1] || ''));
    }
    if(M[1]=== 'Chrome'){
        tem= ua.match(/\bOPR\/(\d+)/)
        if(tem!= null) alert('Opera '+tem[1]);
    }
    M= M[2]? [M[1], M[2]]: [navigator.appName, navigator.appVersion, '-?'];
    if((tem= ua.match(/version\/(\d+)/i))!= null) M.splice(1, 1, tem[1]);
    alert( M.join(' '));
})();
```

现在您可以在 javascript 中编写几行代码，并根据浏览器*Type*和*Version*决定更改视频源。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T19:17:09.283

我有一个执行此操作的 php 脚本。我在这里找到了 - [http://detectmobilebrowsers.com/](http://detectmobilebrowsers.com/) - 是的，有一个 javascript、JQuery 等版本。它对我们来说工作得很好，它的好处是似乎保持相当更新。我们遇到的唯一问题是 iPad 被故意设置为不将自己标识为移动设备。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-10T05:46:54.490

I cannot offer sample code since I am not an Apple geek, but I can tell you based off of my experience trying to make sites compatible between XHTML and HTML5 that it is better to check for browser capability than browser version.

The reason for this is that there are too many browser versions to justify the upkeep, and also the user agent string can be modified. I recommend that you write a script that checks for HTML5 video capabilities with a simple if statement, and then render either one video or the other depending upon the results.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-20T14:56:35.057

MEJS 播放器无法正确处理错误，我想添加更多支持以检测实际发生的情况。在 iPhone 上，它有时甚至会引发错误事件，但没有实际错误，您可以正确播放视频。

打开 mediaelement-and-player.js 并查找

```
 // error handling
        media.addEventListener('error',function() {
            loading.hide();
            controls.find('.mejs-time-buffering').hide();
            error.show();
            error.find('mejs-overlay-error').html("Error loading this resource");
        }, false); 
```

然后使用此代码：

```
 // error handling
        media.addEventListener('error',function() {
            var
                videoError = error.closest('.mejs-inner').find('video,audio')[0].error,
                msg = 'Error loading this resource.';

            if (!videoError) { //webkit sometimes throws error event but video has no actual error and can play the video correctly - ignore the event
                console.log('MEJS event: error throws but no error found - ignored');
                return;
            }

            //hide elements visible while loading and playing - cannot play after error
            loading.hide();
            controls.addClass('hidden'); //controls are automatically displayed when mouse hover is detected - must hide it permanently using class with !important
            error.closest('.mejs-inner').find('.mejs-overlay-play').hide(); //also hide overlay with play button
            error.show();

            //get relevant error message
            switch(videoError.code) { //see http://www.w3.org/TR/html5/embedded-content-0.html#error-codes
                case videoError.MEDIA_ERR_ABORTED: //loading stopped (by user, e.g. by pressing ESC or Back)
                    msg = 'Video loading aborted';
                    break;
                case videoError.MEDIA_ERR_DECODE: //invalid format (actually presumed format is OK, but the data does not correspond with the defined format - probably corrupted file of data transfer)
                    msg = 'Video file is broken';
                    break;
                case videoError.MEDIA_ERR_NETWORK: //network problem (was able to connect to the provided URL but could not get the video data)
                    msg = 'Network connection lost';
                    break;
                case videoError.MEDIA_ERR_SRC_NOT_SUPPORTED: //invalid source URL (url provided does not lead to a supported video file)
                    msg = 'Video not supported';
                    break;
            }

            //display error
            console.log('Video error: ' + msg + ', code: ' + videoError.code);
            error.find('.mejs-overlay-error').html(msg);
        }, false); 
```

如果需要，您可以添加自己的处理方式，以在视频不受支持的情况下切换到 720p。

在 mediaelementplayer.css 中添加这个（不确定是否真的需要或只是对我的主题进行改进）：

```
/* Display errors */
.mejs-overlay-error {
    color: white;
    background: black;
    text-align: center;
    font-size: 1.2EM;
}
.mejs-controls.hidden {
    display: none !important;
}
/* End: Display errors */ 
```

* * *

这是针对版本 2.13.1，不确定新版本是否更好。

更新：最新版本 2.16.3 包含完全相同的无用错误处理程序。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-14T06:16:39.230

[如果视频是您要检查的唯一功能，那么像 WURFL（无线通用资源文件 - http://wurfl.sourceforge.net/](http://wurfl.sourceforge.net/)）或 DeviceAtlas 之类的移动设备检测数据库可能会过大。但它*是*一种快速的方法，可以为比您能够编译检查的更大范围的设备获得强大的功能检测，并且如果您的站点需要验证除视频支持之外的其他功能，它会派上用场。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-07T12:49:43.127

试试[这个](http://blog.mobileesp.com/)链接 该库应该能够检测到用户代理，您可以相应地提供适当的文件。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2014-05-26T10:17:05.793

我使用这段代码：

```
 // iPhone 3
    if (window.screen.height==480 && window.screen.width==320 && window.devicePixelRatio==1)
    { 
        $('#chartDivWrapper').html('<div id="chartdiv" style="height:300px;width:500px;"></div>');
    } 
    // iPhone 4, this is Retina
    else if (window.screen.height==480 && window.screen.width==320 && window.devicePixelRatio==2) 
    { 
        $('#chartDivWrapper').html('<div id="chartdiv" style="height:300px;width:500px;"></div>');
    } 
    // iPhone 5
    else if (window.screen.height==568 && window.screen.width==320 && window.devicePixelRatio==2) 
    { 
        $('#chartDivWrapper').html('<div id="chartdiv" style="height:400px;width:600px;"></div>');
    } 
    // iPad
    else if (window.screen.height==1024 && window.screen.width==768 && window.devicePixelRatio==1) 
    { 
        $('#chartDivWrapper').html('<div id="chartdiv" style="height:425px;width:680px;"></div>');
    } 
    // iPad Retina
    else if (window.screen.height==1024 && window.screen.width==768 && window.devicePixelRatio==2) 
    { 
        $('#chartDivWrapper').html('<div id="chartdiv" style="height:425px;width:680px;"></div>');
    } 
    // all other, this was before for all 
    else  
    { 
        $('#chartDivWrapper').html('<div id="chartdiv" style="height:400px;width:600px;"></div>');
    } 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2013-02-17T05:26:03.087

把它放在你的标签中：

```
<meta name="viewport" content="initial-scale=1.0">
<meta name="viewport" content="width=320.1">    
<script>
if (window.screen.height==568) { // iPhone 5
                    document.querySelector("meta[name=viewport]").content="width=320.1";
                  // your code here
                }
</script> 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2012-11-09T16:07:44.863

这将检测 iOS 版本。也许它可能有用：

```
if (navigator.userAgent.indexOf('5_0') != -1) {
    alert('IOS 5');
} else {
    alert('Other');
} 
```

编辑：我已经调整并测试了脚本。**

# matlab - 将一个 .fig 文件指向另一个

> ID：10921833
> 
> 赞同：0
> 
> 时间：2012-06-06T20:35:04.303
> 
> 标签：matlab, user-interface, matlab-figure

我有两个不同的 MATLAB 图形存储在`.fig`文件中：`solve.fig`和`main.fig`.

现在我有一个按钮`main.fig`，点击它应该会打开`solve.fig`。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T00:49:34.847

如果按钮的名称是`pushbutton1`，则只需将以下行添加到`main.m`：

```
function pushbutton1_Callback(hObject, eventdata, handles)
solve(); 
```

# c++ - 像素转换为原始比特（比特流）

> ID：10921835
> 
> 赞同：1
> 
> 时间：2012-06-06T20:35:06.163
> 
> 标签：c++, image-processing

我想读取我拥有的图像中每个像素的内容并将其转换为比特流（原始比特）或将其包含在二维数组中。哪个是开始寻找这种转换的最佳地点？

图像细节：称为 lena.bmp 的标准测试图像尺寸：256 x 256 像素位深度：8

另外我想知道每个像素的位数对于这个问题的重要性，因为打包和解包也将被合并。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T21:42:33.180

[CImg](http://cimg.sourceforge.net/reference/index.html)是一个简单、轻量级的 C++ 库，可以加载和保存多种图像格式（包括 BMP）。

它是单个头文件，因此无需编译或链接库。只需包含标题，就可以了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T20:52:39.857

您应该研究[OpenCV](http://code.opencv.org/projects/OpenCV/wiki/WikiStart)：一个跨平台的计算机视觉库。它提供了一个**C++ API**和一个**C API**，它支持包括**bmp**在内的许多图像格式。

在 C++ 接口中，`cv::Mat`是表示 2D 图像的类型。[可以在此处找到](http://opencv.itseez.com/doc/tutorials/introduction/display_image/display_image.html#source-code)加载和显示图像的简单应用程序。

要了解如何访问矩阵元素（像素），您可以查看以下线程：

*   [OpenCV 从 Mat 图像中获取像素信息](https://stackoverflow.com/a/7903042/176769)
*   [OpenCV 2.2 中的像素访问](https://stackoverflow.com/a/4745323/176769)
*   [OpenCV 中的常用矩阵运算](http://mablresearch.rit.edu/wiki/index.php/Common_Matrix_Operations_in_OpenCV)

[OpenCV 的 C++ 接口](http://www.aishack.in/2010/07/opencvs-c-interface/)对`cv::Mat`. Stackoverflow 上有很多关于 OpenCV 的主题，周围有很多有价值的内容，您可以通过使用搜索框受益匪浅。

[此页面](http://opencv.willowgarage.com/wiki/Welcome/Introduction)包含一系列专注于 OpenCV 的书籍/教程/安装指南，但这[是最新的官方教程](http://docs.opencv.org/opencv_tutorials.pdf)。

# c# - 如何禁用组合框以便为他分配 null \ 在启用时返回以前的值？

> ID：10921839
> 
> 赞同：0
> 
> 时间：2012-06-06T20:35:12.287
> 
> 标签：c#, winforms, ado.net, combobox

在表格（数据网格）中，组合框，按钮“添加”和复选框。组合框从数据库中获取值。从组合框的列表中选择一些东西，单击“添加”，数据被传输到表中。复选框启用和禁用组合框之一，但尽管处于活动状态，数据仍会传递。添加 SQL 查询的按钮使用参数执行，每个参数分别等于它的组合框。如何使组合框在禁用时其值已传递为空，以便单击“添加”时表的一列保持为空，而当您启用它时获取DataSource的数据？

我这样做了：

```
 SqlParameter param1 = new SqlParameter();

     param1.ParameterName = "@name";

            if (ComboBox1.Enabled == true)
            {

                param1.Value = ComboBox1.Text;
                param1.SqlDbType = SqlDbType.Text;
            }
            else
            {

                param1.Value = " ";
                param1.SqlDbType = SqlDbType.Text;
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T21:13:34.593

在添加按钮的单击事件中，您可以检查组合框是否被禁用。如果它被禁用，则将该组合框的参数设置为空。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T02:25:56.093

处理禁用复选框的[CheckBox.CheckedChanged](http://msdn.microsoft.com/en-us/library/system.windows.forms.checkbox.checkedchanged)事件并将[ComboBox.SelectedValue](http://msdn.microsoft.com/en-us/library/system.windows.forms.listcontrol.selectedvalue)设置为 null。

# mysql - 非常慢的查询，还有其他方法可以更好地格式化它吗？

> ID：10921841
> 
> 赞同：3
> 
> 时间：2012-06-06T20:35:19.320
> 
> 标签：mysql, sql

我有这个查询（我没有写），它对客户端运行良好，直到表中的行数超过几千行，现在仅 4200 行需要 40 秒以上。

关于如何优化并获得相同结果的任何建议？

我尝试了其他一些方法，但没有得到这个较慢的查询返回的正确结果......

```
SELECT COUNT(*) AS num
  FROM `fl_events`
  WHERE id IN(
    SELECT DISTINCT (e2.id)
      FROM `fl_events` AS e1, fl_events AS e2
      WHERE e1.startdate >= now() AND e1.startdate = e2.startdate
  )
  ORDER BY `startdate` 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T20:46:54.253

从所需的明显索引来看，我真的不明白为什么你要加入你的表来选择`IN`条件。`ORDER BY`也不需要。你确定你的查询不能这样写吗？：

```
SELECT COUNT(*) AS num
FROM `fl_events` AS e1
WHERE e1.startdate >= now() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T20:41:15.167

我不认为重写查询会有所帮助。您问题的关键是“直到表格超过几千行”。这意味着重要的列没有被索引。在一定数量的记录之前，所有数据都适合单个内存块 - 在那个点上，它需要一个新块。而索引是加快搜索速度的唯一方法。

首先 - 检查 fl_events 中的 ID 是否实际标记为主键。这对记录进行物理排序，如果没有它，您可能会看到数据损坏和偶尔超慢的结果。在查询中使用 distinct 使其看起来可能不是唯一值。这会带来问题。

然后，确保在 start_date 上添加索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T20:42:20.400

缓慢可能与事件表与自身的连接有关，并且可能与 startdate 没有索引有关。

# ruby - 如何找到宝石的位置？

> ID：10921842
> 
> 赞同：1
> 
> 时间：2012-06-06T20:35:21.377
> 
> 标签：ruby, path, gem

我正在开发一个库，它提供对 gem 元数据的访问，包括它在文件系统上的位置。这个想法是让 gem 作者将其设置为任何脚本的相对路径：

```
# $root/example.gemspec
Example::Gem.root '.'        # => $root/

# $root/lib/example/gem.rb
Example::Gem.root '../..'    # => $root/ 
```

然后，当前脚本的路径将用于计算绝对路径。我的实现目前如下：

```
def root(relative_to = nil, file = __FILE__)
  unless relative_to.nil?
    @root = File.expand_path relative_to, File.dirname(file)
  end
  @root
end 
```

我以为`__FILE__`会返回调用者脚本的路径，但这种假设是错误的。

它在库本身内工作，但当我试图将它与我的其他宝石之一集成时崩溃了；生成的路径总是相对于支持库本身。

我怎样才能实现这一点而不必`__FILE__`在每次通话时都传递电流？否则，没有多少价值可取；写作`root('../..', __FILE__)`几乎和写一个实际的方法来做同样的事情一样。

*如果可以在不指定任何内容*的情况下找出路径，那就更好了，但我想不出任何东西。Rails 是如何做到的？

顺便说一句，我知道[`Gem::Specification#gem_dir`](https://github.com/rubygems/rubygems/blob/master/lib/rubygems/specification.rb#L1620)，但它总是返回相对于安装目录的路径，即使 gem 实际上不存在，这使得它在开发环境中毫无用处。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T03:15:43.757

您始终可以使用提供的回溯工具：

```
caller.first 
```

它产生文件和行的混合体，但通常用`:`. 我会小心地通过忽略行信息但保留其余部分来允许可能包含冒号的文件名或路径。换句话说，不要`split`但是`sub`：

```
caller.first.sub(/:\d+:in .*$/, '') 
```

# c# - 如何在 C# 中返回数组字面量

> ID：10921844
> 
> 赞同：95
> 
> 时间：2012-06-06T20:35:23.770
> 
> 标签：c#

我正在尝试以下代码。指出错误所在的行。

```
int[] myfunction()
{
    {
      //regular code
    }
    catch (Exception ex)
    {                    
       return {0,0,0}; //gives error
    }
} 
```

如何返回像字符串文字一样的数组文字？

* * *

## 回答 #1

> 赞同：184
> 
> 时间：2012-06-06T20:36:06.633

返回一个这样的数组`int`：

```
return new int [] { 0, 0, 0 }; 
```

您还可以[隐式键入数组](https://msdn.microsoft.com/en-us/library/bb384090.aspx)- 编译器会推断它应该是`int[]`，因为它只包含`int`值：

```
return new [] { 0, 0, 0 }; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-06T20:39:19.300

Blorgbeard 是正确的，但您也可以考虑使用新的 for .NET 4.0 Tuple 类。我发现当您要退回一定数量的物品时，使用起来会更容易。就像您总是需要在数组中返回 3 个项目一样，一个 3-int 元组可以清楚地说明它是什么。

```
return new Tuple<int,int,int>(0,0,0); 
```

或者干脆

```
return Tuple.Create(0,0,0); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-06-06T20:39:31.870

如果数组具有固定大小并且您想返回一个用零填充的新数组

```
return new int[3]; 
```

# ruby-on-rails - rails 单选按钮，供所有用户一次性批准

> ID：10921848
> 
> 赞同：0
> 
> 时间：2012-06-06T20:35:33.360
> 
> 标签：ruby-on-rails, forms, radio-button

我正在尝试使用单选按钮让管理员批准用户。因此，在页面中，我列出了所有等待批准的**用户（用户模型中的真/假值）。**管理员在所有的单选按钮字段中都设置了“是”或“否”后，他应该按下唯一的提交按钮。

我试图弄清楚如何将所有用户传递给控制器​​以进行批准更新。`

```
<%= form_tag(approve_url, :html => { class: "form-inline"}  )do |f| %> 
  <table>
    <% @tobeapproved.each do |user| %>
      <tr >
        <td>
          <%= user.name %>
        </td>
        <td>
          <%= user.surname %>
        </td>
        <td>
          <%= user.email %>
        </td>
        <td>
          <%= label :approved %>
          <%= radio_button_tag "approved[#{user.id}]", "true" %> Approved
          <%= radio_button_tag "approved[#{user.id}]", "false" %> Not approved
        </td>
      </tr>
    <% end %>
  </table>
  <%= f.submit %>
<% end %> 
```

提交时我应该得到“approved[id]”=>{“true/false”} 对吗？我对这一切都很陌生。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T15:42:32.713

In the end I figured out how to do such a thing.

```
<%= form_tag(approve_url, :html => { class: "form-inline"}) do |f| %> 
  <table>
    <% @tobeapproved.each do |user| %>
    <tr >

      <td>
        <%= user.name %>
      </td>
      <td>
        <%= user.surname %>
      </td>
      <td>
        <%= user.email %>
      </td>
      <td>
        <%= radio_button_tag "approved[#{user.id}]", "true"  %> Approved
        <%= radio_button_tag "approved[#{user.id}]", "false", true  %> Not approved
      </td>
    </tr>
  <% end %>
</table>
<%= submit_tag 'Confirm'%> 
```

It gets to me something like this in params:

```
"approved"=>{"27"=>"false", "26"=>"false", "25"=>"true"} 
```

And in my controller:

```
 def update
   @users = params[:approved]
   logger.debug "The object is #{@users}"

   respond_to do |format|
   @users.each_pair do |key, value|
     user = User.find(key)
     user.update_attribute(:approved, value)
   end
   format.html { redirect_to :action => :list, notice: 'Users updated' }
end 
```

But I imagine this code kind of sucks. Anybody knows how to better it?

# python - 使用生成器表达式后的意外结果

> ID：10921851
> 
> 赞同：2
> 
> 时间：2012-06-06T20:35:41.393
> 
> 标签：python

我正在尝试过滤一些我正在使用的数据，以去除我的测量设备中的一些伪影，例如负数和错误。我一直在玩使用生成器来做到这一点的想法。我正在使用 Python 2.7.2

```
testlist = [12,2,1,1,1,0,-3,-3,-1]  

gen = (i for i, x in enumerate(testlist) if x < 0 or x > 2.5)

for i in gen: testlist.pop(i)

print testlist 
```

这将返回：

```
[2, 1, 1, 1, 0, -3] 
```

我的问题是为什么 -3 值会出现在更新的“测试列表”中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T20:38:17.763

当您从列表中删除项目时，项目的索引会发生变化（它们都向下移动了一个）。结果，生成器将跳过一些项目。尝试添加更多打印语句，以便您可以看到发生了什么：

```
for i in gen:
        print i
        print testlist
        testlist.pop(i) 
```

输出：

```
0
[12, 2, 1, 1, 1, 0, -3, -3, -1]
5
[2, 1, 1, 1, 0, -3, -3, -1]
6
[2, 1, 1, 1, 0, -3, -1] 
```

您将需要删除索引 0、5、5、5 处的项目。生成器生成索引 0、5、6。这是有道理的，因为`enumerate`返回`0, 1, 2, ...`等。它不会连续两次返回相同的索引。

一次删除一个元素也是非常低效的。这需要多次移动数据，最坏情况下的性能为 O(n ² )。您可以改为使用列表推导。

```
testlist = [x for x in testlist if 0 <= x <= 2.5] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T20:39:03.597

您正在修改您正在处理的列表，这有点类似于在某些其他语言中从循环*内部*修改例如 for 循环的索引值。考虑将此方法作为替代方法：

```
testlist = [x for x in testlist if x >= 0 and x <= 2.5] 
```

使用[列表推导](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)应该更直接地工作，虽然它不是[生成器表达式](http://docs.python.org/reference/expressions.html#generator-expressions)，但可以简单地改为一个：

```
testlist = (x for x in testlist if x >= 0 and x <= 2.5) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T20:41:31.727

让我们考虑一个更简单的输入：

```
[-3, -4, -5] 
```

第一个 (0, -3) 取自枚举数。0 被添加到生成器中。for 循环注意到生成器中有一个新元素可用并删除 -3：

```
[-4, -5] 
```

从枚举器中获取一个新元素。枚举器记得取第一个元素，所以它现在取第二个：-5。-5 以相同的方式从列表中删除。-4 仍然存在。

顺便说一句，一种更简单的方法来做你正在尝试的事情如下：

```
testlist = filter(lambda x: x >= 0 and x <= 2.5, testlist) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-06T20:51:58.920

更好的方法是使用列表推导来创建一个新的过滤列表：

```
testlist = [12,2,1,1,1,0,-3,-3,-1]  

testlist[:] = [x for x in testlist if 0 <= x <= 2.5] 
```

给予：

```
[2, 1, 1, 1, 0] 
```

# java - Java Restlet API 可以与 REST PHP API 一起使用吗？

> ID：10921852
> 
> 赞同：0
> 
> 时间：2012-06-06T20:35:41.800
> 
> 标签：java, php, rest, networking

您能否使用 Java Restlet RESTful API 与一些用 PHP 编写的提供者的 API 进行交互？

如果是这样，这是通过什么方式完成的？

更具体地说，对于使用过 Restlet API 的任何人，您是否知道任何用于此用途的特定包或类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T04:16:14.117

RESTfull web services are designed to be language independent. Most people use JSON as way of communication with REST. And this makes the whole thing language independent.

There is no reason why your Java RESTful API shouldnot work with PHP REST API.

# android - LocationManager requestLocationUpdates 不起作用

> ID：10921853
> 
> 赞同：6
> 
> 时间：2012-06-06T20:35:44.720
> 
> 标签：android, geolocation, locationmanager

我正在尝试使用 LocationManager 和 LocationListener 在 android 中获取当前位置，如[http://developer.android.com/guide/topics/location/obtaining-user-location.html中所述](http://developer.android.com/guide/topics/location/obtaining-user-location.html)

但是，永远不会调用 LocationListener 的 onLocationChanged 方法。我使用了真正的 android 手机/还使用了模拟器和使用 telnet 更改的模拟位置，如上面的链接中所述。

这是我的代码：

```
public class MyActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        /* Use the LocationManager class to obtain GPS locations */
        LocationManager mlocManager = (LocationManager) 
                getSystemService(Context.LOCATION_SERVICE);
        LocationListener mlocListener = new CustomLocationListener(
                getApplicationContext());
        // Location Providers
        String locationProvider = LocationManager.NETWORK_PROVIDER;
        // LocationProvider locationProvider = LocationManager.GPS_PROVIDER;
        mlocManager
                .requestLocationUpdates(locationProvider, 0, 0, mlocListener);
    }
} 
```

和我的 LocationListener：

```
public class CustomLocationListener implements LocationListener {

    private Context m_context;

    public CustomLocationListener(Context context) {
        m_context = context;
    }

    @Override
    public void onLocationChanged(Location location) {
        double latitude = location.getLatitude();
        double longitude = location.getLongitude();
        String Text = latitude + " " + longitude;
        Toast.makeText(m_context, Text, Toast.LENGTH_SHORT).show();
    }

    @Override
    public void onProviderDisabled(String provider) {
        // TODO
    }

    @Override
    public void onProviderEnabled(String provider) {
        // TODO
    }

    @Override
    public void onStatusChanged(String arg0, int arg1, Bundle arg2) {}
} 
```

所以永远不会调用 onLocationChanged。任何人都可以看到问题吗？非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-25T18:37:09.827

您还可以让您的手机确定最佳提供商，而不仅仅是设置

```
String locationProvider = LocationManager.NETWORK_PROVIDER; 
```

试试这个：

```
Criteria criteria = new Criteria();
criteria.setAccuracy(Criteria.ACCURACY_FINE);
criteria.setAltitudeRequired(false);
criteria.setBearingRequired(false);
criteria.setCostAllowed(true);
criteria.setPowerRequirement(Criteria.POWER_LOW);   
String locationProvider = mlocManager.getBestProvider(criteria, true); 
```

另外，您是否通过将设备移动到新位置进行了测试？否则“onlocationchanged”事件可能不会触发。几年前当我弄清楚这些东西时，我放了一些“祝酒词”来提醒我我的纬度/经度坐标，因为我绕着街区走来验证事件正在触发。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-22T10:29:27.650

对我来说，这看起来像[Android Bug 57707](https://code.google.com/p/android/issues/detail?id=57707)。

如果是，重启设备应该会有所帮助，至少在一段时间内。

或者您可以使用[Google Play Services Location API](https://developer.android.com/google/play-services/location.html)。

通过同时使用 Wifi、GPS 和网络定位，Google Play Services Location API 将隐藏网络定位被破坏的事实；只有当您既没有 GPS 也没有 Wifi 可用时，这一点才会很明显。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T20:48:59.437

确保在“设置”中启用了正确的定位服务。您还可以使用`isProviderEnabled()`来检查您选择的特定提供程序是否有效。并确保您在清单中具有 COARSE 或 FINE 位置权限。

此外，请确保您正在设备上进行测试。网络定位在模拟器中根本不起作用，只有使用模拟工具注入新的数据点，GPS才会起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-07T12:58:32.477

我也遇到过类似的问题。`Try replacing getApplication() with MainAvtivity.this`

此外，请确保您保留了 FINE 和 COARSE 位置的权限。如果您的目标 API 超过 23，您还应该处理来自 java 代码的权限。

# linux - SVN - 通过 VIM 提交 - 恢复失败的提交消息

> ID：10921855
> 
> 赞同：2
> 
> 时间：2012-06-06T20:35:55.173
> 
> 标签：linux, svn, vim, version, vi

我通常将 VIM 用于几乎所有与编码相关的事情。

我已经配置了我的环境，所以 Subversion 会在我执行时打开 VIM 来编辑提交消息`svn commit`。如果我关闭 VIM 而不保存提交消息（例如：）`:qa!`，它将被丢弃，并且提交操作被中止。

如果我保存并关闭 VIM，则提交操作将开始。

如果提交失败，我有一些 SVN 提交消息似乎保存在 /tmp/ 中，文件名如 svn- ****** .tmp。

在 VIM 中编写提交消息时，提交消息的文件名似乎为 svn-commit.1.tmp。我希望能够为我的下一次 SVN 提交恢复此消息。典型的用例是：

1.  我试图承诺；在 VIM 中完成写入消息
2.  提交失败
3.  我解决了这个问题（例如`svn update`：）
4.  现在我想`svn commit`再次尝试将上一条消息预加载到 VIM 中

感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T20:42:23.090

您始终可以使用`-F`svn commit 选项，它使用文件来创建日志消息。

每当我使用 svn 提交时，我首先创建一个日志文件：

```
vim log_file 
```

然后我使用以下内容提交：

```
svn commit -F log_file --username blah 
```

这对我来说一直很有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T20:42:23.267

您可以尝试这样的事情： `svn commit -F /tmp/svn-1.tmp` 您可以在那里阅读更多内容：http: [//svnbook.red-bean.com/en/1.0/re06.html](http://svnbook.red-bean.com/en/1.0/re06.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T20:51:56.490

在您的 vim 会话中，只需读取旧日志文件的内容。这允许您在必要时调整旧消息，并且不会从根本上改变工作流程。

```
svn commit 
```

（打开 vim 会话）

```
:r /tmp/svn-**.tmp 
```

`-m`另一种解决方案是使用标志从命令行进行提交。这通常具有相关 shell 的命令历史记录中的最后一次（失败）提交。

```
svn commit -m "Here is my message" 
```

（提交失败，你解决它）

（向上箭头几次，然后重新运行提交）

# android - 在安装前为应用程序留下一条消息，下载后即可检索

> ID：10921860
> 
> 赞同：0
> 
> 时间：2012-06-06T20:36:13.940
> 
> 标签：android, qr-code

我正在特别考虑用户扫描二维码并被重定向到 Google Play 商店（因为他们没有安装我的应用程序）的情况。我可以给应用程序留言`String qrCodeId = "ABC123";`吗？

因此，如果我在多个地方有不同的二维码，应用程序会在安装之前知道哪个二维码已被扫描（显然，如果安装了应用程序，那么会根据扫描的二维码发生特定的事情）。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T21:07:14.790

虽然有点不可靠，但您可以为此使用[Google Play 广告系列跟踪](https://developers.google.com/analytics/devguides/collection/android/devguide#google-play-tracking)。只需将您的`qrCodeId`值放入构建器中的广告系列变量之一（可能`utm_content`是 ），即可[构建](https://developers.google.com/analytics/devguides/collection/android/devguide#google-play-builder)您的 URL 并按照说明进行操作。

# php - 将txt文件转换为excel，然后修改excel并将新的excel文件导入数据库

> ID：10921862
> 
> 赞同：1
> 
> 时间：2012-06-06T20:36:18.620
> 
> 标签：php, database, excel, file

我想将一个 txt 文件转换为 excel，然后修改 excel 文件中的某些数据，然后使用 PHP 将这个新的 excel 文件导入数据库。例如，excel文件的内容将是产品及其价格，修改将在价格上。

这甚至可以使用 PHP 还是我需要别的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T20:39:21.927

这样做似乎是一种相当迂回的方式，但我在 Excel/php 和[phpExcel](http://phpexcel.codeplex.com/)方面取得了巨大成功。这将获得读/写 Excel，但将其放入数据库可能需要 som php 编码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T20:41:33.990

如果您只是在 Excell 中编辑数据（没有公式...），您应该尝试 csv 格式...我认为您应该发送一个 txt 文件示例...

咪咪兹

# java - Android 资源$NotFoundException

> ID：10921865
> 
> 赞同：10
> 
> 时间：2012-06-06T20:36:48.937
> 
> 标签：java, android, eclipse, android-layout, android-intent

我正在创建一个应用程序，玩家可以在其中将他们的名字输入到编辑文本中。检索此信息并通过附加功能将其发送到第二个活动。每当我运行它时，我都会收到 Resources$NotFoundException。我很确定这是来自我的代码还是来自我的资源文件夹。

这是我的代码（更新时没有 TOAST 声明）

```
private void getNames(int number){      

    Intent intent = new Intent(Setup.this, Test.class);
    intent.putExtra("numberofplayers", number);

    try {

    if(!player1.getText().toString().contentEquals(""))
        p1 = player1.getText().toString();
    else
        p1= "Player 1";
    if(!player2.getText().toString().contentEquals(""))
        p2 = player2.getText().toString();
    else
        p2= "Player 2";
    if(!player3.getText().toString().contentEquals(""))
        p3 = player3.getText().toString();
    else
        p3= "Player 3";
    if(!player4.getText().toString().contentEquals(""))
        p4 = player4.getText().toString();
    else
        p5= "Player 5";
    if(!player6.getText().toString().contentEquals(""))
        p6 = player6.getText().toString();
    else
        p6= "Player 6";
    if(!player7.getText().toString().contentEquals(""))
        p7 = player7.getText().toString();
    else
        p7= "Player 7";
    if(!player8.getText().toString().contentEquals(""))
        p8 = player8.getText().toString();
    else
        p8= "Player 8";

    switch (number) {
    case 2:
        String[] a = {p1,p2};
        names=a;
        break;
    case 3:
        String[] b = {p1,p2,p3};
        names=b;
        break;
    case 4:
        String[] c = {p1,p2,p3,p4};
        names=c;
        break;
    case 5:
        String[] d= {p1,p2,p3,p4,p5};
        names=d;
        break;
    case 6:
        String[] e = {p1,p2,p3,p4,p5,p6};
        names=e;
        break;
    case 7:
        String[] f = {p1,p2,p3,p4,p5,p6,p7};
        names=f;
        break;
    case 8:
        String[] g = {p1,p2,p3,p4,p5,p6,p7,p8};
        names=g;
        break;
    }
    } catch (Exception e) {
        Log.e("Setup.class Error:", e.getMessage());
    }
    //Toast.makeText(this, number + "", Toast.LENGTH_SHORT).show();

    //for(int q =0;q<names.length;q++)
    //  Toast.makeText(this, names[q], Toast.LENGTH_SHORT).show();

    intent.putExtra("namearray", names);
    startActivity(intent);
} 
```

这是接收活动的代码：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    Bundle ext = getIntent().getExtras();
    int i= ext.getInt("numberofplayers");
    String[] names = ext.getStringArray("namearray");

    Toast.makeText(this, i, Toast.LENGTH_SHORT).show();

    for(int q =0;q<names.length;q++)
        Toast.makeText(this, names[q], Toast.LENGTH_SHORT).show();
} 
```

这是 logcat 错误（更新的 LOGCAT 报告）：

```
06-06 21:21:07.267: E/AndroidRuntime(2538): FATAL EXCEPTION: main
06-06 21:21:07.267: E/AndroidRuntime(2538): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.brightdesign.truthordare/com.brightdesign.truthordare.Test}: android.content.res.Resources$NotFoundException: String resource ID #0x2
06-06 21:21:07.267: E/AndroidRuntime(2538):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
06-06 21:21:07.267: E/AndroidRuntime(2538):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
06-06 21:21:07.267: E/AndroidRuntime(2538):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
06-06 21:21:07.267: E/AndroidRuntime(2538):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
06-06 21:21:07.267: E/AndroidRuntime(2538):     at android.os.Handler.dispatchMessage(Handler.java:99)
06-06 21:21:07.267: E/AndroidRuntime(2538):     at android.os.Looper.loop(Looper.java:137)
06-06 21:21:07.267: E/AndroidRuntime(2538):     at android.app.ActivityThread.main(ActivityThread.java:4424)
06-06 21:21:07.267: E/AndroidRuntime(2538):     at java.lang.reflect.Method.invokeNative(Native Method)
06-06 21:21:07.267: E/AndroidRuntime(2538):     at java.lang.reflect.Method.invoke(Method.java:511)
06-06 21:21:07.267: E/AndroidRuntime(2538):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-06 21:21:07.267: E/AndroidRuntime(2538):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-06 21:21:07.267: E/AndroidRuntime(2538):     at dalvik.system.NativeStart.main(Native Method)
06-06 21:21:07.267: E/AndroidRuntime(2538): Caused by: android.content.res.Resources$NotFoundException: String resource ID #0x2
06-06 21:21:07.267: E/AndroidRuntime(2538):     at android.content.res.Resources.getText(Resources.java:247)
06-06 21:21:07.267: E/AndroidRuntime(2538):     at android.widget.Toast.makeText(Toast.java:260)
06-06 21:21:07.267: E/AndroidRuntime(2538):     at com.brightdesign.truthordare.Test.onCreate(Test.java:16)
06-06 21:21:07.267: E/AndroidRuntime(2538):     at android.app.Activity.performCreate(Activity.java:4465)
06-06 21:21:07.267: E/AndroidRuntime(2538):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
06-06 21:21:07.267: E/AndroidRuntime(2538):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
06-06 21:21:07.267: E/AndroidRuntime(2538):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-06-06T20:41:48.447

这是您的第一个 Toast 电话：

```
Toast.makeText(this, number, Toast.LENGTH_SHORT).show(); 
```

这里，第二个参数是一个整数 ( `number`)，所以它认为这是一个字符串 ID。尝试替换`number`为`number+""`.

# .net - 为什么我的 Microsoft 测试管理器测试运行不会生成 Intellitrace 文件？

> ID：10921866
> 
> 赞同：0
> 
> 时间：2012-06-06T20:36:53.087
> 
> 标签：.net, microsoft-test-manager, intellitrace

我正在使用 Microsoft 测试管理器 2010。我有一个想要测试的应用程序。我创建了一个启用了“Intellitrace”选项的测试配置。我创建了一个使用该配置的测试。但是，当我运行测试并创建错误时，我找不到 Intellitrace，也没有收到错误消息。与该配置相关的其他项目（即事件日志）确实按预期显示。可能存在哪些条件阻止我成功收集 Intellitrace 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T17:48:58.810

您必须从测试用例中启动正在测试的应用程序，而不是附加到 Visual Studio。如果不这样做，测试管理器将无法正确检测进程，这必须在进程启动时发生。

# ios - UIViewController 发布时应用程序崩溃

> ID：10921867
> 
> 赞同：0
> 
> 时间：2012-06-06T20:36:53.120
> 
> 标签：ios, xcode

这可能是一个菜鸟问题，但它让我发疯。我正在开发一个应用程序，它以编程方式（不在示例代码中）在主视图中加载子视图。子视图是一个 IEAudioChannelViewController 实例，但是当我尝试按如下方式释放对象时应用程序崩溃：

```
IEAudioChannelViewController *audiochannel = (IEAudioChannelViewController *) [sb instantiateViewControllerWithIdentifier:@"AudioChannel"];
NSLog(@"Audio channel: %@", audiochannel);
[audiochannel release]; <-- here the crash! 
```

如果我删除它的工作释放线，

知道为什么会这样吗？（自动引用计数被禁用）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T20:38:49.723

嗯。发生这种情况是因为您调用`release`. `release`仅当您是对象的所有者时才调用- 例如，当使用 alloc、copy、new、retain 关键字时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T20:38:58.590

您正在释放自动释放的对象，请删除

```
[audiochannel release] 
```

因为 instantiateViewControllerWithIdentifier 返回一个自动释放的对象规则总是一样的，如果你不分配、新建、保留或复制一个对象，那么不要在它上面调用释放

# php - PHP/MYSQL：存储列表或海量表

> ID：10921871
> 
> 赞同：2
> 
> 时间：2012-06-06T20:37:12.173
> 
> 标签：php, mysql, list

我还是 PHP 新手，我想知道哪个替代方案会更好，或者有人可以提出更好的方法。

我有一组用户，我必须跟踪他们与帖子的所有互动。如果用户点击一个按钮，它会将帖子添加到列表中，如果他们再次点击它，它将删除帖子，所以最好：

为每个用户（可能有数千个）在表中存储一列 JSON 数组 postID。

-或者-

每次保存（postID 和 userID 的组合）（可能数百万）都有一个单独的表，并返回 userID 匹配的所有结果？

对于这个问题，有两个表：表 A 是用户，表 B 是帖子。我应该如何存储所有用户保存的帖子？

编辑：对不起，但我没有提到帖子将有多个用户交互并且用户将有多个帖子交互（多对多关系）。我认为这会影响鲍勃的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T21:19:45.970

这是个有趣的问题！

解决方案实际上取决于您预期的用例。如果每个用户都有一个他们标记的帖子列表，而这就是您需要的所有信息，那么将这些信息列为用户表中的字段（如果您使用的是 nosql 后端，则在他们的 blob 中）将是方便的 -如果这是您的用例，这是一个可行的选择！）。由于列表的大小相同，因此不会对传输时间产生影响，但在此解决方案中，您可能会节省查找时间，因为您只使用一个表，并且 dbs 将优化以使这些信息保持在一起。

另一方面，如果您必须能够查询给定帖子的所有标记它的用户，那么选项二会好得多。在前一种方法中，您必须查询所有用户并查看每个用户是否有帖子。在此选项中，您只需找到所有关系并从那里开始工作。大概你有一个`user`表，一个`post`表和一个`user_post`表，前两个表有外键。还有其他方法可以做到这一点，但它需要维护多个列表并每次交叉检查，这是一组昂贵的操作并且容易出错。

请注意，后一个选项不应阻塞“数百万”连接，因为数据库应针对这种快速读取进行优化。（专业提示：索引正确的列！）不过，请注意任何数据按摩。一个不必要的 for 循环会扼杀你的表现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T21:29:20.030

> *对于这个问题，有两个表：表 A 是用户，表 B 是帖子。我应该如何存储所有用户保存的帖子？*

如果每个用户都有某种类型的唯一 ID（主键），则在每个帖子中添加一个引用该用户唯一 ID 的字段。

```
mysql> describe users;
+----------+------------------+------+-----+---------+----------------+
| Field    | Type             | Null | Key | Default | Extra          |
+----------+------------------+------+-----+---------+----------------+
| id       | int(11) unsigned | NO   | PRI | NULL    | auto_increment |
| email    | varchar(200)     | YES  |     | NULL    |                |
| username | varchar(20)      | YES  |     | NULL    |                |
+----------+------------------+------+-----+---------+----------------+

mysql> describe posts;
+---------+------------------+------+-----+---------+----------------+
| Field   | Type             | Null | Key | Default | Extra          |
+---------+------------------+------+-----+---------+----------------+
| id      | int(11) unsigned | NO   | PRI | NULL    | auto_increment |
| user    | int(11) unsigned | NO   |     | NULL    |                |
| text    | text             | YES  |     | NULL    |                |
+---------+------------------+------+-----+---------+----------------+ 
```

然后获取用户的帖子，例如：

```
SELECT text
 FROM posts
 WHERE user=5; 
```

或者从特定组织获取所有帖子：

```
SELECT posts.text,users.username
 FROM posts,users
 WHERE post.user=users.id
   AND users.email LIKE '%@example.com'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T20:41:37.120

我认为保留第三张表是所有发布状态数据的表是有意义的。

例如，如果您的用户界面每页显示 50 个帖子，那么 UI 一次只需要跟踪 50 个帖子。它们在您的数据库中都有唯一的 ID，所以这应该不是问题。

# android - 如何使 ListView 充当 EditText

> ID：10921872
> 
> 赞同：0
> 
> 时间：2012-06-06T20:37:13.313
> 
> 标签：android, listview, interactive

我正在为 Android 开发一个应用程序，为此我试图让 ListView 以这样的方式运行，当用户按下一个空条目时，他可以开始直接在该空条目中输入文本，并且当用户触摸屏幕的任何其他部分，它被保存。有没有办法做到这一点？我正在考虑以某种方式使用 onClick，但我没有具体的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T20:54:25.730

这是一种基本的通用方法：

1.  对于 ListView 的每一行，创建一个具有可见 TextView 和 EditText 的布局，其可见性设置为`gone`。

2.  对每一行使用 onClickListener 以在选择该行时交换 TextView 和 EditText（分别为`gone`和`visible`）的可见性。

3.  跟踪该`active`行对另一行或背景的点击。

4.  当`active`行更改时，将 EditText 的值设置为 TextView 并将它们返回到它们原来的可见状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T20:48:39.000

可以采取的其他方法是使用 View.OnFocusChangeListener 和 TextWatcher 您可以在此处获得有关它们的更多详细信息[http://developer.android.com/reference/packages.html](http://developer.android.com/reference/packages.html)

# magento - Magento 更改运输方式导致内部服务器错误 500

> ID：10921874
> 
> 赞同：1
> 
> 时间：2012-06-06T20:37:16.437
> 
> 标签：magento

我在 Magento 商店工作，如果我在后端更改与运输相关的任何内容，它会给我一个内部服务器错误（500 错误）。这仅在尝试保存运输配置设置时发生——我只是更改了税收设置而没有问题。我已经尝试了从重置权限到编辑 .htaccess 文件的所有方法。

屏幕截图： ![在此处输入图像描述](../Images/de242856ccdf302050655de5cb0c69b7.png)

我明白了：

![在此处输入图像描述](../Images/f84a65abd126b3fac66ff4c86ecb3b2b.png)

它允许我更改任何其他设置。

如果有人知道为什么会发生这种情况，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T09:15:46.757

从您在评论部分发布的其他信息来看，您的服务器似乎没有安装 mcrypt 的 PHP 绑定。

您的虚拟主机需要[安装 mcrypt](http://uk.php.net/manual/en/mcrypt.installation.php)，或者您需要找到另一台安装它的主机。

网站上列出了运行 Magento 的要求：http: [//www.magentocommerce.com/system-requirements](http://www.magentocommerce.com/system-requirements)

# java - 如何让 Java 应用程序获得最新版本的自身？

> ID：10921875
> 
> 赞同：3
> 
> 时间：2012-06-06T20:37:24.747
> 
> 标签：java, networking, deployment, installation, automatic-updates

可以这么说，我想做一个更新查找器。客户端应用程序会向服务器发送请求，获取最新版本，并以提示的形式返回给用户：

> 有一个新的更新，`X.x`。你想更新吗？

那种性质的东西。我该怎么做呢？

另外，如果可能的话，请不要推荐 API，除非真的有必要或者初学者很难理解。我想让我的项目使用核心 Java 包。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T20:40:57.230

你看过 Java Web Start 吗？

> 当应用程序从用户桌面独立运行时，会自动下载对 Java Web Start 应用程序的更新。

[http://docs.oracle.com/javase/tutorial/deployment/webstart/](http://docs.oracle.com/javase/tutorial/deployment/webstart/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T20:41:53.133

在 Java 中轻松做到这一点的一种方法是使用[Java Web Start](http://docs.oracle.com/javase/6/docs/technotes/guides/javaws/)。

# jquery - jQuery：将元素属性设置为 .text()

> ID：10921877
> 
> 赞同：0
> 
> 时间：2012-06-06T20:37:30.440
> 
> 标签：jquery, knockout.js

我有一个 span 标签，如下所示：

```
<span class="myClass">Lorem ipsum</span> 
```

我想向它添加一个引用 innerText 值的属性（用于 javascript 函数调用），我希望它看起来像这样：

```
<span class="myClass" data-bind="click: function(data, event) { myFunction('Lorem ipsum') }">Lorem ipsum</span> 
```

我希望能够动态解析一段包含跨度 myClass 的文本，并以编程方式添加属性。因此，如果我的 innerText 是“Sed”，则 myFunction 的参数将是“Sed”。

我尝试了以下方法来产生这个：

```
jquery(container).find('.myClass').attr('data-bind', 'click: function(data, event) { myFunction(' + $(this).text() + ')}'); 
```

它没有用。（函数参数为空。尝试`.html()`输出“null”。）

有谁知道如何在 jQuery 中完成这样的事情？我相信我的问题是`$(this)`关键字，因为它没有指向有问题的对象。我不确定是否还有其他关键字可以使用...

谢谢！

编辑：哎呀，我试图混淆我的代码，并忘记在最后一行做。很抱歉有任何混淆。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T20:42:27.967

您的代码不起作用，因为`$(this)`不是您的元素。

尝试：

```
jquery(container).find('.nonGlossaryKeyword').each(function(){
   $(this).attr('data-bind', 'click: function(data, event) { showNonGlossaryModal(' + $(this).text() + ')}');
}); 
```

在这种情况下，$(this) 迭代所有 .nonGlassorayKeyword 元素，就像一个 for 循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T20:41:22.670

你的意思是：

```
jQuery(".myClass") // or $(".myClass") 
```

代替

```
jquery(container).find('.nonGlossaryKeyword') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T20:50:57.167

是的，此时的关键字“this”指的是容器。我认为你可以这样做：

```
var spans = jQuery(container).find('span');  //all spans
jQuery.each(spans,function(i,ele){
     var text = jQuery(ele).text();
     jQuery(ele).attr('data-bind','click: function(data, event) { myFunction("'+text+'")}');
}); 
```

# c# - 如何使用其 CanExecute 方法启用按钮

> ID：10921881
> 
> 赞同：14
> 
> 时间：2012-06-06T20:37:47.273
> 
> 标签：c#, wpf, button, prism, icommand

我正在使用 MVVM 在 WPF 中开发一个应用程序，但我被 ICommand 对象困住了。

我有一个包含一些按钮的窗口，因此，我将它们绑定到 XAML 中各自的 ICommand，如下所示：

```
<Button Command="{Binding DoSomethingCommand}" Content="Do Something" /> 
```

然后，在我的视图模型类中，我编写了以下内容：

```
public class MyViewModel : ObservableObject
{

    private bool isDoSomethingButtonEnabled = false;
    ....        
    public ICommand DoSomethingCommand
    {
        get;
        private set;
    }
    ....
    ....
    public MyViewModel()
    {
        DoSomethingCommand = new DelegateCommand<String>(this.OnDoSomething, this.CanDoSomething);
    }

    private void OnDoSomething(String arg)
    {

    }

    private bool CanDoSomething(String arg)
    {
        return isDoSomethingButtonEnabled;
    }
    ....
} 
```

因此，由于我需要在第一次打开窗口时不启用我的按钮，所以我将变量设置`isDoSomethingButtonEnabled`为`false`. 它可以工作，按钮在开始时被禁用，但我的问题是当我在运行时将变量更改为`isDoSomethingButtonEnabled`我`true`的按钮仍然被禁用。

`isDoSomethingButtonEnabled`在将变量更改为后，我什至做了一些测试`true`，打印结果`DoSomethingCommand.CanExecute()`并显示“真”！

那么，我应该怎么做才能启用我的按钮？

先感谢您

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-06T20:51:37.767

接口上有一个名为[CanExecuteChanged](http://msdn.microsoft.com/en-us/library/system.windows.input.icommand.canexecutechanged)`ICommand`的​​事件：

> 当发生影响命令是否应执行的更改时发生。

使用 Prism [DelegateCommand](http://msdn.microsoft.com/en-us/library/ff654132)，您可以使用以下方法引发此事件`RaiseCanExecuteChanged`：

```
public void SomeMethod()
{
    //do some work
    isDoSomethingButtonEnabled = true;
    DoSomethingCommand.RaiseCanExecuteChanged();
} 
```

# android - ACRA 的行号不正确

> ID：10921882
> 
> 赞同：4
> 
> 时间：2012-06-06T20:38:03.723
> 
> 标签：android, proguard, acra

我使用 android/proguard/ACRA。谁能告诉我为什么我收到的崩溃报告的行号不正确（行号指向明显错误的语句）？

我无法知道崩溃的确切行号，所以我无法修复用户报告的错误，这真的很烦人谢谢

PS：我正在使用与我正在发布的版本对应的映射文件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T09:26:50.993

通过一些优化（特别是类合并和方法内联），ProGuard 可能无法保留所有调试信息，因为 java 类文件格式不支持它。在这些情况下，该信息可能只是一个近似值。不过，这些应该是例外；如果信息始终错误，则您可能使用了错误的映射文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T16:20:32.820

我找到了感兴趣的人的答案。您应该避免（预验证、优化和缩小）。这将正确显示所有行号，因为代码未播放

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-19T05:03:18.027

经过数小时的研究并尝试了许多方法。我找到了解决方案。

改变

`proguardFiles getDefaultProguardFile(`**'proguard-android-optimize.txt'**`)...`

至

`proguardFiles getDefaultProguardFile(`**'proguard-android.txt'**`)...`

# svn - 应该使用什么 SVN 程序将分支 B 合并到分支 A？

> ID：10921885
> 
> 赞同：0
> 
> 时间：2012-06-06T20:38:11.933
> 
> 标签：svn, tortoisesvn, visualsvn-server

在 SVN 中，考虑：

*   分支 A 从树干上分支
*   分支 B 稍后从分支 A 分支出来（被认为是临时开发分支）
*   请注意，两个分支都不是主干。
*   分支涉及的目录和子目录（带文件）很多
*   分支 A 和分支 B 都进行了开发。
*   在Branch B开发过程中，引入了一些新文件，仅在Branch B上
*   分公司 A 在同一时间修改了一些文件。这些更改不适用于分支 B。
*   希望将 B 的更改（多个修订版）和在 B 开发期间引入的新文件合并到分支 A（在开发 B 时不丢失对 A 所做的更改）。

应该使用什么 SVN 程序将分支 B 合并到分支 A？

编辑：

所以整个过程是：

1.  创建工作目录签出最新分支`a files/directories`（Tortoise checkout）
2.  执行（在此目录中使用 Tortoise）Merge/"Reintegrate `a branch`，在菜单中指定分支 b
3.  Tortoise 将合并到文件/目录中（是否在我的工作目录中？（还没有在 SVN 服务器中？）
4.  可能会报告合并冲突...需要由开发人员处理...
5.  在看似成功的合并之后，我执行了一个 SVN 提交，它进入`branch a`

这些步骤是否准确，或者合并操作是否会自动将更改的文件提交到 SVN 服务器？如果是这样，如果发生合并冲突，会发生什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T21:22:04.517

你会经常从分支 A 合并到分支 B。

> svn 合并 url://brancha url://branchb

在分支 B 中完成开发后，您将一次（仅一次）将分支 B 重新集成到分支 A。重新集成分支 B 后，您必须停止在分支 B 上工作。

> svn merge --reintegrate url://branchb

[http://blogs.collab.net/subversion/2008/07/subversion-merg/](http://blogs.collab.net/subversion/2008/07/subversion-merg/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T12:19:57.297

根据您的最后评论，您提到的步骤是完全正确的。

关于您的下一个问题，svn 只会帮助您合并更改，不会在 svn 服务器上为您提交更改。

您总是在合并后手动提交更改。:-)

希望这可以帮助。

# .net - 当类型 T 的祖先时 Ninject 绑定

> ID：10921890
> 
> 赞同：11
> 
> 时间：2012-06-06T20:38:32.363
> 
> 标签：.net, dependency-injection, inversion-of-control, ninject

我有一个大致如下所示的依赖链：

```
public class CarSalesBatchJob
{
    public CarSalesBatchJob(IFileProvider fileProvider)
    { ... }
}

public class MotorcycleSalesBatchJob
{
    public MotorcycleSalesBatchJob(IFileProvider fileProvider)
    { ... }
}    

public class FtpFileProvider : IFileProvider
{
    public FtpFileProvider(IFtpSettings settings)
    { ... }
}

public class CarSalesFtpSettings : IFtpSettings { ... }
public class MotorcycleSalesFtpSettings : IFtpSettings { ... } 
```

到目前为止，我一直在使用基于约定的绑定，但这还不够好，因为我已经为`IFtpSettings`. 所以我决定使用一些上下文绑定。乍一看`kernel.Bind<>().To<>().WhenInjectedInto<>()`看起来很有希望，但这仅在第一级有帮助，这意味着如果我有 a`CarSalesFtpFileProvider`和 a`MotorcycleSalesFtpProvider`我可以这样做：

```
kernel.Bind<IFtpSettings>().To<CarSalesFtpSettings>()
    .WhenInjectedInto<CarSalesFtpFileProvider>();
kernel.Bind<IFtpSettings>().To<MotorcycleSalesFtpSettings>()
    .WhenInjectedInto<MotorcycleSalesFtpFileProvider>(); 
```

但是创建两个具体的实现似乎很愚蠢`FtpFileProvider`，实际上只是在我希望它们使用的设置上有所不同。我看到有一个方法叫做`WhenAnyAnchestorNamed(string name)`. 但是这条路线需要我在批处理作业中添加属性和魔术字符串，我对此并不感到兴奋。

我还注意到`.When(Func<IRequest, bool>)`绑定语句有一个简单的旧方法，所以我想出了这个作为我的绑定语句：

```
//at this point I've already ran the conventions based bindings code so I need to unbind
kernel.Unbind<IFtpSettings>();
kernel.Bind<IFtpSettings>().To<CarSalesFtpSettings>()
    .When(r => HasAncestorOfType<CarSalesBatchJob>(r));
kernel.Bind<IFtpSettings>().To<MotorcycleSalesFtpSettings>()
    .When(r => HasAncestorOfType<MotorcycleSalesBatchJob>(r));

// later on in the same class
private static bool HasAncestorOfType<T>(IRequest request)
{
    if (request == null)
        return false;

    if (request.Service == typeof(T))
        return true;

    return HasAncestorOfType<T>(request.ParentRequest);
} 
```

因此，如果构造函数请求 IFtpSettings，我们会递归请求树以查看链中是否有任何请求的服务/类型与提供的类型（CarSalesBatchJob 或 MotorcycleSalesBatchJob）匹配，如果匹配则返回 true。如果我们一直到达链的顶部，则返回 false。

抱歉，背景解释太长了。

**这是我的问题：我有什么理由不应该以这种方式解决问题？**这被认为是不好的形式吗？有没有更好的方法来查找祖先请求类型？我应该将我的类/依赖链重组为更“令人愉快”的方式吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T22:02:16.230

您应该使用`request.Target.Member.ReflectedType`而不是`request.Service`This 是实现类型。

此外，WhenAnyAncestorNamed 不需要属性。您可以使用该`Named`方法标记您的作业的绑定。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-06T21:48:39.187

这并不是您问题的真正答案，但您可以通过编写一个类来解决您的问题，如下所示：

```
private sealed class FtpFileProvider<TFileProvider>
     : FtpFileProvider
    where TFileProvider : IFileProvider
{
    public FtpFileProvider(TFileProvider settings)
        : base(settings) { }
} 
```

在这种情况下，您的配置将如下所示：

```
kernel.Bind<IFileProvider>()
    .To<FtpFileProvider<CarSalesFtpSettings>>()
    .WhenInjectedInto<CarSalesBatchJob>();

kernel.Bind<IFileProvider>()
    .To<FtpFileProvider<MotorcycleSalesFtpSettings>>()
    .WhenInjectedInto<MotorcycleSalesBatchJob>(); 
```

请注意，根据我的经验，我发现在大多数情况下，您认为需要基于上下文的注入，但实际上您的设计存在缺陷。但是，根据给定的信息，在您的情况下，我不可能对此发表任何看法，但您可能想看看您的代码。您可能能够以实际上不需要基于上下文的注入的方式重构您的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T15:41:04.493

我的建议是通过注册来定位违反约定的情况，而不是 IFtpSettings 本身。例如，在类似的情况下，我会执行以下操作：

```
container.Register<CarSalesBatchJob>(() => {
    ICommonSetting myCarSpecificDependency = container.Resolve<CarSpecificDependency>();
    new CarSalesBatchJob(myCarSpecificDependency);
});

container.Register<MotorcycleSalesBatchJob>(() => {
    ICommonSetting myMotorcycleSpecificDependency = container.Resolve<MotorcycleSpecificDependency>();
    new MotorcycleSalesBatchJob(myMotorcycleSpecificDependency);
}); 
```

当向其他程序员解释每个批处理作业是如何实例化的时，这几乎是最直接的。不是针对 ICommonSetting 的注册来尝试处理每个一次性，而是在自己的情况下处理每个一次性。

换句话说，想象一下这些类是否有两个依赖项需要在 IoC 容器中进行更改。您将在不同的地方有四行注册代码，但它们都是为了实例化 MotorcycleSalesBatchJob 或 CarSalesBatchJob 等。如果有人想了解如何引用该类，他必须寻找对类（或基类）的任何引用。为什么不直接编写代码来准确解释如何在一个地方实例化每一个？

这样做的缺点（或者至少我从其他人那里听到的）是，如果这些具体类中的任何一个的构造函数发生更改，那么代码将会中断，您将不得不更改注册。嗯，对我来说，这是一个积极的方面，因为我已经在 IoC 容器根据某种状态更改的这种类型的路径上迈出了一步，我*需要*确保我仍然保持预期的行为。

当您考虑各种可能性时，它会变得更加有趣。你可以这样做：

```
container.Register<IProductCatalog>(() => {
    currentState = container.Resolve<ICurrentState>().GetTheState();
    if (currentState.HasSpecialPricing())
       return container.Resolve<SpecialPricingProductCatalog>();
    return container.Resolve<RegularPricingProductCatalog>();
}); 
```

事物在不同情况下如何工作的所有复杂性都可以分解为单独的类，将其留给 IoC 容器在正确的情况下提供正确的类。

# sql-server - 搜索返回找到的总记录的存储过程，非常慢

> ID：10921891
> 
> 赞同：1
> 
> 时间：2012-06-06T20:38:32.550
> 
> 标签：sql-server, sql-server-2008, full-text-search

我有下面的存储过程，它在不返回总记录的情况下工作得很好，但是当我在单独的查询中返回总记录时，它变得很慢。

有没有另一种方法可以更快地返回总记录

视图是

```
SELECT     dbo.tbl_ImagesMaster.ImgTitle, dbo.tbl_ImagesMaster.ImgID, dbo.tbl_ImagesMaster.ImgDate, dbo.tbl_ImagesMaster.ImgActive, 
                      dbo.tbl_ImagesMaster.ImgHits, dbo.aspnet_Users.UserName, dbo.tbl_ImagesMaster.ImgUserID, dbo.tbl_ImagesDetails.ImgDPath, 
                      dbo.tblUsersExtended.UAvatar, dbo.tbl_ImagesMaster.ImgRemarks
FROM         dbo.tbl_ImagesMaster INNER JOIN
                      dbo.aspnet_Users ON dbo.tbl_ImagesMaster.ImgUserID = dbo.aspnet_Users.UserId INNER JOIN
                      dbo.tbl_ImagesDetails ON dbo.tbl_ImagesMaster.ImgID = dbo.tbl_ImagesDetails.ImgDParentID INNER JOIN
                      dbo.tblUsersExtended ON dbo.aspnet_Users.UserId = dbo.tblUsersExtended.UUserID
WHERE     (dbo.tbl_ImagesDetails.ImgDDefault = 1) 
```

SP

```
ALTER Procedure [dbo].[usp_searchImagestest] 

(
@CurrentPage As int=1,
@PageSize As int=10,
@searchType As int=1,
@Activeflag As bit=null,
@searchTerm as nvarchar(200),
@TotalRecords As int OUTPUT
)
As
begin
-- Turn off count return.
Set NoCount On

    --Full text search
    if @searchType=1
    begin
        select 
            ImgID,ImgTitle,ImgDate,imgHits,UserName,uavatar,RowRank
        from
            (Select
                ImgID,imgtitle,ImgDate,imghits,UserName,UAvatar
                , ROW_NUMBER() OVER (ORDER BY ImgID desc) AS RowRank
            From
                 vw_MasterImagesSearch
                WHERE FREETEXT(*, @searchTerm) and (@Activeflag IS NULL or ImgActive=@Activeflag)
            ) as MyImages
        where

            RowRank > (@PageSize * (@CurrentPage-1)) AND RowRank <= (@CurrentPage * @PageSize)

-- TOTAL RECORD, WHICH SLOW DOWN THE WHOLE SP EXECUTION
        select @TotalRecords = (select COUNT(*) From vw_MasterImagesSearch 
        WHERE FREETEXT(*, @searchTerm) and (@Activeflag IS NULL or ImgActive=@Activeflag))
    end 
```

## 编辑

我试过这个

查询 1

```
select 
        ImgID,ImgTitle,ImgDate,imgHits,RowRank,TOTALCOUNT,
        (select username from aspnet_Users where UserId=MyImages.imguserid) as username,
        (select UAvatar from tblUsersExtended where UUserID=MyImages.imguserid) as Uavatar

    from
        (Select
            ImgID,imgtitle,ImgDate,imghits,ImgUserID
            , ROW_NUMBER() OVER (ORDER BY ImgID desc) AS RowRank
            ,COUNT(*) OVER() AS TOTALCOUNT
        From
             tbl_ImagesMaster
            WHERE FREETEXT(ImgTitle, @searchTerm) and (@Activeflag IS NULL or ImgActive=@Activeflag)
        ) as MyImages
    where

        RowRank > (@PageSize * (@CurrentPage-1)) AND RowRank <= (@CurrentPage * @PageSize) 
```

查询 2

```
 select 
        ImgID,ImgTitle,ImgDate,imgHits,RowRank,
        (select username from aspnet_Users where UserId=MyImages.imguserid) as username,
        (select UAvatar from tblUsersExtended where UUserID=MyImages.imguserid) as Uavatar

    from
        (Select
            ImgID,imgtitle,ImgDate,imghits,ImgUserID
            , ROW_NUMBER() OVER (ORDER BY ImgID desc) AS RowRank
        From
             tbl_ImagesMaster
            WHERE FREETEXT(ImgTitle, @searchTerm) and (@Activeflag IS NULL or ImgActive=@Activeflag)
        ) as MyImages
    where

        RowRank > (@PageSize * (@CurrentPage-1)) AND RowRank <= (@CurrentPage * @PageSize)

    select @TotalRecords = (select COUNT(*) From tbl_ImagesMaster
    WHERE FREETEXT(ImgTitle, @searchTerm) and (@Activeflag IS NULL or ImgActive=@Activeflag)) 
```

查询 1 用时 3 秒 查询 2 用时不到 1 秒

表中的总行数为 100,000 行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T20:46:07.353

第二个选择正在重新运行搜索。只需更改您的分页搜索：

```
SELECT 
    ImgID,ImgTitle,ImgDate,imgHits,UserName,uavatar,RowRank, TOTALCOUNT
FROM
    (SELECT
        ImgID,
        imgtitle,
        ImgDate,
        imghits,
        UserName,
        UAvatar, 
        ROW_NUMBER() OVER (ORDER BY ImgID desc) AS RowRank
        COUNT(*) OVER() AS TOTALCOUNT
    FROM
         vw_MasterImagesSearch
        WHERE FREETEXT(*, @searchTerm) and (@Activeflag IS NULL or ImgActive=@Activeflag)
    ) as MyImages
WHERE
    RowRank > (@PageSize * (@CurrentPage-1)) AND RowRank 
```

 `The line` 

`COUNT(*) OVER() AS TOTALCOUNT`

在分页发生之前为您提供内部 SELECT 的计数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T23:31:36.793

我认为应该改变 iKnowKungFoo 的解决方案部分

```
ROW_NUMBER() OVER (ORDER BY ImgID desc) AS RowRank
COUNT(*) OVER() AS TOTALCOUNT 
```

至

```
ROW_NUMBER() OVER (ORDER BY ImgID desc) AS RowRank
ROW_NUMBER() OVER (ORDER BY ImgID) AS TotalRows 
```

所以第二部分应该包含*相反*的顺序。您可以阅读[此答案](https://stackoverflow.com/a/2136741/315935)和[文章](http://www.sqlservercentral.com/articles/T-SQL/66030/)（需要注册到最后一篇）。

无论如何，我个人都会使用[CTE](http://msdn.microsoft.com/en-us/library/ms190766%28v=sql.105%29.aspx)而不是子查询。通过这种方式，您可以将所有行的主集定义为 CTE。您需要的只是执行一次获取`COUNT(*)`并另外获取您需要的数据页面`WHERE seq BETWEEN (@PageSize * (@CurrentPage-1)) AND (@CurrentPage * @PageSize)`

另一种选择可以得到`CROSS JOIN`方法而不是`ROW_NUMBER() OVER (<reverse sort order>)`（参见[此处](http://blog.sqlauthority.com/2009/08/08/sql-server-multiple-cte-in-one-select-statement-query/)）或`UNION`方法（参见[此处](https://stackoverflow.com/a/1641139/315935)）。我建议您测试所有方法并找到最适合您的方法。

**更新**：我对 CTE 的意思是它可以更好地优化为视图。所以首先你可以试试下面的查询

```
WITH MasterImagesSearch AS (
    SELECT im.ImgTitle, im.ImgID, im.ImgDate, im.ImgActive,
           im.ImgHits, asp.UserName, im.ImgUserID, id.ImgDPath,
           e.UAvatar, im.ImgRemarks
    FROM dbo.tbl_ImagesMaster AS im INNER JOIN
           dbo.aspnet_Users AS asp ON im.ImgUserID = asp.UserId INNER JOIN
           dbo.tbl_ImagesDetails AS id ON im.ImgID = id.ImgDParentID INNER JOIN
           dbo.tblUsersExtended AS e ON asp.UserId = e.UUserID
    WHERE id .ImgDDefault = 1
), GetAll AS (
    SELECT ImgID,ImgTitle,ImgDate,imgHits,UserName,uavatar
    FROM MasterImagesSearch
    WHERE FREETEXT(ImgTitle, @searchTerm)
        AND (@Activeflag IS NULL or ImgActive=@Activeflag)
), MyImages AS (
    SELECT ImgID,imgtitle,ImgDate,imghitsUserName,uavatar
        ,ROW_NUMBER() OVER (ORDER BY ImgID desc) AS RowRank
        ,ROW_NUMBER() OVER (ORDER BY ImgID) AS TotalRows
    FROM GetAll
)
SELECT ImgID,imgtitle,ImgDate,imghitsUserName,uavatar
    ,RowRank + TotalRows -1 AS Total
FROM MyImages
WHERE RowRank BETWEEN (@PageSize * (@CurrentPage-1)) AND (@CurrentPage * @PageSize) 
```

我没有做任何额外的优化，但我使用了 CTE`INNER JOIN`而不是子查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T12:11:34.727

我认为当您使用存储过程获取带参数的查询结果时，SQL Server 会为此 SP 生成执行计划，并为您以后调用的每个 SP 使用此生成的执行计划。生成执行计划的有趣之处在于表统计信息，SQL Server 使用它们来生成最佳执行计划。如果您的 SP 的参数发生更改，可能会生成无用的执行计划，也不是最佳执行计划。我认为每次想要使用 whit defrence 参数来计算执行时间时，您都必须重新编译您的 SP。此外，您可以使用 SP 中的内部参数来为每次运行 SP 时由 SQL Server 自动生成执行计划。例如使用下面的代码：

```
ALTER Procedure [dbo].[usp_searchImagestest]
( 
  @CurrentPage As int=1, 
  @PageSize As int=10, 
  @searchType As int=1, 
  @Activeflag As bit=null, 
  @searchTerm as nvarchar(200), 
  @TotalRecords As int OUTPUT 
) 
As begin

Declare       
  @ICurrentPage int, 
  @IPageSize int, 
  @IsearchType int, 
  @IActiveflag bit,
  @IsearchTerm nvarchar(200), 
  @ITotalRecords int 

Set @ICurrentPage = @CurrentPage
Set @IPageSize = @PageSize
Set @IsearchType = @searchType
Set @IActiveflag = Activeflag
Set @IsearchTerm = searchTerm
Set @ITotalRecords = @TotalRecords 
```

然后使用内部参数而不是SP参数。

# python - Numpy：通过多维数组对多维数组进行排序

> ID：10921893
> 
> 赞同：12
> 
> 时间：2012-06-06T20:38:41.207
> 
> 标签：python, numpy, slice

如果这是多余的或超级基本的，请原谅我。我从 R 来到 Python/Numpy，很难在脑海中翻来覆去。

我有一个维度数组，我想使用另一个 n 维索引值数组对其进行排序。我知道我可以将它包装在一个循环中，但似乎应该有一种非常简洁的 Numpyonic 方式来击败它以使其提交。这是我设置 n=2 问题的示例代码：

```
a1 = random.standard_normal(size=[2,5]) 
index = array([[0,1,2,4,3] , [0,1,2,3,4] ]) 
```

所以现在我有一个 2 x 5 的随机数数组和一个 2 x 5 的索引。我已经阅读了`take()`大约 10 次帮助，但显然我的大脑并没有理解它。

我认为这可能会让我到达那里：

```
take(a1, index)

array([[ 0.29589188, -0.71279375, -0.18154864, -1.12184984,  0.25698875],
       [ 0.29589188, -0.71279375, -0.18154864,  0.25698875, -1.12184984]]) 
```

但这显然只对第一个元素进行了重新排序（我推测是因为扁平化）。

关于如何从我所在的位置到按索引的元素 0 对 a1 的元素 0 进行排序的解决方案的任何提示...元素 n？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-06T21:11:17.367

~~我还想不出如何在 N 维度上工作，但~~这里是 2D 版本：

```
>>> a = np.random.standard_normal(size=(2,5))
>>> a
array([[ 0.72322499, -0.05376714, -0.28316358,  1.43025844, -0.90814293],
       [ 0.7459107 ,  0.43020728,  0.05411805, -0.32813465,  2.38829386]])
>>> i = np.array([[0,1,2,4,3],[0,1,2,3,4]]) 
>>> a[np.arange(a.shape[0])[:,np.newaxis],i]
array([[ 0.72322499, -0.05376714, -0.28316358, -0.90814293,  1.43025844],
       [ 0.7459107 ,  0.43020728,  0.05411805, -0.32813465,  2.38829386]]) 
```

这是N维版本：

```
>>> a[list(np.ogrid[[slice(x) for x in a.shape]][:-1])+[i]] 
```

以下是它的工作原理：

好的，让我们从一个 3 维数组开始进行说明。

```
>>> import numpy as np
>>> a = np.arange(24).reshape((2,3,4))
>>> a
array([[[ 0,  1,  2,  3],
        [ 4,  5,  6,  7],
        [ 8,  9, 10, 11]],

       [[12, 13, 14, 15],
        [16, 17, 18, 19],
        [20, 21, 22, 23]]]) 
```

您可以通过指定沿每个轴的索引来访问此数组的元素，如下所示：

```
>>> a[0,1,2]
6 
```

这相当于`a[0][1][2]`如果我们处理的是列表而不是数组，您将如何访问相同的元素。

Numpy 让您在切片数组时变得更漂亮：

```
>>> a[[0,1],[1,1],[2,2]]
array([ 6, 18])
>>> a[[0,1],[1,2],[2,2]]
array([ 6, 22]) 
```

如果我们正在处理列表，这些示例将等效于`[a[0][1][2],a[1][1][2]]`并且。`[a[0][1][2],a[1][2][2]]`

你甚至可以省略重复的索引，numpy 会找出你想要的。例如，上面的例子可以等价地写成：

```
>>> a[[0,1],1,2]
array([ 6, 18])
>>> a[[0,1],[1,2],2]
array([ 6, 22]) 
```

您在每个维度中切片的数组（或列表）的*形状只会影响返回数组的形状*。换句话说，numpy 并不关心您在`(2,3,4)`拉取值时是否尝试使用 shape 数组来索引您的数组，只是它会反馈给您一个 shape 数组`(2,3,4)`。例如：

```
>>> a[[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]]]
array([[0, 0],
       [0, 0]]) 
```

在这种情况下，我们`a[0,0,0]`一遍又一遍地抓取相同的元素，但是 numpy 返回一个与我们传入的形状相同的数组。

好的，关于你的问题。您想要的是使用数组中的数字沿最后一个轴对数组进行索引`index`。因此，对于您问题中的示例，您想要`[[a[0,0],a[0,1],a[0,2],a[0,4],a[0,3]],a[1,0],a[1,1],...`

正如我之前所说，您的索引数组是多维的这一事实并没有告诉 numpy 您想从哪里提取这些索引；它只是指定输出数组的形状。因此，在您的示例中，您需要告诉 numpy 前 5 个值将从中提取`a[0]`，后 5 个值从`a[1]`. 简单的！

```
>>> a[[[0]*5,[1]*5],index] 
```

`a`它在 N 维上变得复杂，但让我们为我上面定义的 3 维数组做它。假设我们有以下索引数组：

```
>>> i = np.array(range(4)[::-1]*6).reshape(a.shape)
>>> i
array([[[3, 2, 1, 0],
        [3, 2, 1, 0],
        [3, 2, 1, 0]],

       [[3, 2, 1, 0],
        [3, 2, 1, 0],
        [3, 2, 1, 0]]]) 
```

因此，这些值都是沿最后一个轴的索引。我们需要告诉 numpy 这些数字要取自第一和第二轴上的哪些索引；即我们需要告诉 numpy 第一个轴的索引是：

```
i1 = [[[0, 0, 0, 0],
       [0, 0, 0, 0],
       [0, 0, 0, 0]],

      [[1, 1, 1, 1],
       [1, 1, 1, 1],
       [1, 1, 1, 1]]] 
```

第二个轴的索引是：

```
i2 = [[[0, 0, 0, 0],
       [1, 1, 1, 1],
       [2, 2, 2, 2]],

      [[0, 0, 0, 0],
       [1, 1, 1, 1],
       [2, 2, 2, 2]]] 
```

然后我们可以这样做：

```
>>> a[i1,i2,i]
array([[[ 3,  2,  1,  0],
        [ 7,  6,  5,  4],
        [11, 10,  9,  8]],

       [[15, 14, 13, 12],
        [19, 18, 17, 16],
        [23, 22, 21, 20]]]) 
```

方便的 numpy 函数，它生成`i1`并被`i2`调用`np.mgrid`。`np.ogrid`由于我之前谈到的 numpy 魔法，我在我的答案中使用了这在这种情况下是等效的。

希望有帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T16:45:09.420

今天又玩了一些之后，我发现如果我使用映射器函数和 take 我可以像这样简单地解决二维版本：

```
a1 = random.standard_normal(size=[2,5]) 
index = array([[0,1,2,4,3] , [0,1,2,3,4] ]) 
map(take, a1, index) 
```

我需要`map()`对`take()`每个元素`a1`

当然，接受的答案解决了 n 维版本。但是回想起来，我确定我真的不需要 n 维解决方案，只需要二维版本。

# javascript - 单击时将类添加到具有特定类的所有元素

> ID：10921894
> 
> 赞同：1
> 
> 时间：2012-06-06T20:38:41.223
> 
> 标签：javascript, jquery, css

我想为所有具有“someClass”类的元素添加一个名为“group”的类 - 但仅限于，例如：

```
<div class="someClass">SomeText</div>
<div class="someClass">SomeOtherText</div>
<div class="someOtherClass">SomeMoreText</div>
<div class="someOtherClass">SomeMoreOtherText</div> 
```

如果用户单击包含类“someClass”的 div，则应变为以下内容：

```
<div class="someClass group">SomeText</div>
<div class="someClass group">SomeOtherText</div>
<div class="someOtherClass">SomeMoreText</div>
<div class="someOtherClass">SomeMoreOtherText</div> 
```

如果用户单击包含“someOtherClass”的 div，则应添加类“组”。

我尝试了以下 jQuery - 不成功：

```
$("#someId").live("click", function() {    
    var selectedClass;
    selectedClass = $(this).attr('class');

    $('.'+selectedClass).addClass('group');
    //...followed by more jQuery...
}); 
```

我还尝试了运气：

```
$("#someId").live("click", function() {    
    $(this).attr('class').addClass('group');
    //...followed by more jQuery...
}); 
```

...这也不起作用:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T20:47:46.933

您应该考虑到 div 具有多个类的可能性——每当连续单击 div 两次时都会发生这种情况：

```
​$('div').on('click',function(e) {
    var cl = $(this).attr('class'),
        carr = cl.split(/\s+/);
    for (var i=0; i<carr.length; i++) {
        $('div.'+carr[i]).addClass('newclass');
    };
});​​​​​ 
```

[http://jsfiddle.net/FcXu5/](http://jsfiddle.net/FcXu5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T20:44:26.563

```
$('div').click(function() {    
    var selectedClass;
    selectedClass = $(this).attr('class');
    $('.'+selectedClass).addClass('group');
});​ 
```

[http://fiddle.jshell.net/H3hs9/1/](http://fiddle.jshell.net/H3hs9/1/)

像那样？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T20:46:11.583

假设被点击的 div 恰好有一个类：

```
$('div').click(function(){
  $('.group').removeClass('group'); //assuming you want this
  $('.'+this.className).addClass('group');
}); 
```

如果他们可能有很多：

```
$('div').click(function(){
  $('.group').removeClass('group'); //assuming you want this
  var classes = this.className.split(/\s+/);
  var select  = $.map(classes,function(c){ return "."+c }).join();
  $(select).addClass('group');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T20:46:20.770

试试这个

```
$(document).ready(function(){
        $('.someClass').on('click',function(){
            var $this = $(this);
            if($this.attr('class')=='someClass'){
            $this.addClass('group');
            }
        });
    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T20:50:41.977

我的解决方案使用一种打开和关闭类的方法。

HTML

```
<div class="item someclass">Hello</div>
<div class="item someclass">Hello</div>
<div class="item someclass">Hello</div>
<div class="item someclass">Hello</div>
<div class="item someclass">Hello</div>
<div class="item someclass">Hello</div> 
```

CSS

```
.group{
color:green;
}​ 
```

JS

```
jQuery('.item').click(function(){

    if(!jQuery(this).hasClass('group')){
    jQuery(this).addClass('group')
    }
    else
    {
    jQuery(this).removeClass('group')
    }
    });​ 
```

当您单击具有类“项目”的某些元素时，它会搜索是否具有类“组”。如果为 true，则删除该类，如果为 false，则添加该类。

在带有“item”元素的 div 上使用 click 事件，当您只想添加具有特定元素组的类时，这是很好的选择。

小提琴在这里

[http://jsfiddle.net/nNS44/](http://jsfiddle.net/nNS44/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-06T21:14:18.503

```
 $(document).ready(function(){
        $('.someOtherClass').on('click',function(){
            $('.someClass').addClass('group');

        });
    }); 
```

jsfiddle：http: [//jsfiddle.net/Ekx7Z/2/](http://jsfiddle.net/Ekx7Z/2/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-06T21:49:53.707

像这样尝试一些jquery：

```
$("#someId").click(function(){
    $("div.someClass").addclass("group");
}); 
```

# javascript - 从 javascript 获取非内联 css

> ID：10921899
> 
> 赞同：1
> 
> 时间：2012-06-06T20:39:04.360
> 
> 标签：javascript, regex

我知道有些人会批评我想要的，但我会问我的问题。

* * *

我知道如果他们的 css 不是内联格式，我们就无法获得元素的样式。所以我想要一个正则表达式（因为我不太擅长制作一个），它将获取所有`style`标签，并为他们应用一个正则表达式`innerHTML`来制作一个像这样的数组：

css["myDiv"]["color"] -> "red"

[`getComputedStyle`由于浏览器不兼容而没有使用。]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T20:50:27.423

使用正则表达式无法实现任何远程接近此的目标。CSS 规则是使用复杂的算法来应用的，并且可以以各种方式继承、优先级和覆盖规则。主流浏览器花了数年时间才提出合规的实现并非巧合。

您应该准确地执行该实现。你需要的工具是 JavaScript，你需要的 API 是 DOM。对于 DOM 中的每个节点，都有一个样式对象，其中包含所有应用的样式，并且其格式与您尝试生成的格式非常接近。您可以通过`getComputedStyle`和访问它`currentStyle`。

# javascript - onClick 事件，但仍继续执行 href 目标

> ID：10921903
> 
> 赞同：1
> 
> 时间：2012-06-06T20:39:06.913
> 
> 标签：javascript, html, jsonp

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T20:51:11.813

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T21:09:18.443

```
function runSomeJsonpCall(obj) {
    //...
    document.location=obj.getAttribute('href');
    return false;
}

<a onclick="runSomeJsonpCall(self);" href="http://www.goherenext.com"> make this work </a> 
```

另请注意 http:// 在 href 链接

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-06T21:44:54.270

尝试：

```
<a onclick="runSomeJsonpCall();" href="#"> make this work </a> 
```

和：

```
function runSomeJsonpCall() {
var script = document.createElement("script");
script.src = "http://jsonpurl.com?parameter1=" + "someparam";
document.body.appendChild(script);
window.location("www.goherenext.com");
} 
```

# dojo - WCF 服务未返回 JSONP，导致 dojo 应用程序出错

> ID：10921907
> 
> 赞同：0
> 
> 时间：2012-06-06T20:39:19.267
> 
> 标签：dojo, jsonp

我尝试了许多演示和egs。当我遇到服务请求问题时，终于在这里得到了一些好的建议。无论如何，我正在使用 io.script.get 从远程服务器获取数据，问题是回调参数未定义，或者有时我得到一个无效的标签。

```
function searchGoogle() {
    // Look up the node we'll stick the text under.
    var targetNode = dojo.byId("rules");
    var jsonpArgs = {
  url: "http://localhost/WcfServices/WcfInstanceRules2/Service1.svc/RetrieveData",
     callbackParamName: "callback",
       content: {
            screenName: "dpjo"
        },
        load: function (data) {
            // Set the data from the search into the viewbox in nicely formatted JSON
            targetNode.innerHTML = "<pre>" + dojo.toJson(data, true) + "</pre>";
        },
        error: function (error) {
            targetNode.innerHTML = "An unexpected error occurred: " + error;
        }
    };
    dojo.io.script.get(jsonpArgs);
}
dojo.ready(searchGoogle); 
```

我在 fiddler 中看到了 json 响应，它看起来不错，但在浏览器中我会收到错误消息。这令人沮丧，因为我一直在努力解决跨域问题。我正在使用 .net 4.0 并且不必显式定义回调。我尝试通过添加回调名称并将 json 包装在回调名称中来手动编辑 json 响应。

编辑：

从 web 服务返回的数据示例：

```
{"rules":[{"value":"AllState"},{"value":"Cidade de Goa beach"},
     {"value":"Euro 2012"},{"value":"Euro&2012"},
     {"value":"Euro2012"},  {"value":"European&Championship"},
     {"value":"Holiday Inn Resort"},{"value":"Holiday Inn Resort goa"},
     {"value":"Hotel Goa"},{"value":"Hyatt Goa"},{"value":"I buy car}]} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T00:35:03.900

应该是服务器的问题。您可以尝试指向一些已知的工作服务（如 Yahoo.com），只是为了快速测试吗？

# c# - 如何防止列表视图添加空行？

> ID：10921909
> 
> 赞同：0
> 
> 时间：2012-06-06T20:39:21.240
> 
> 标签：c#, winforms, listview, blank-line

目前这是我的代码。

```
 TextReader reader = new StringReader(richTextBox1.Text);
        string[] strItems = null;
        while (reader.Peek() != -1)
        {
            string nextRow = reader.ReadLine();
            if (!listView1.Items.ContainsKey(nextRow.GetHashCode().ToString()))
            {
                ListViewItem item = new ListViewItem();
                item.Name = nextRow.GetHashCode().ToString();
                strItems = nextRow.Split("-".ToCharArray());
                item.Text = strItems[0].ToString();
                try
                {
                    item.SubItems.Add(strItems[1].ToString());
                }
                catch (Exception)
                {
                }
                try
                {
                    item.SubItems.Add(strItems[2].ToString());
                }
                catch (Exception)
                {
                }
                try
                {
                    item.SubItems.Add(strItems[3].ToString());
                }
                catch (Exception)
                {
                }
                try
                {
                    item.SubItems.Add(strItems[4].ToString());
                }
                catch (Exception)
                {
                }
                listView1.Items.Add(item);
            }
        } 
```

它将文本框中的项目添加到 ListView，但如果文本框中有一个空白行，它也会向列表视图添加一个空白项。我正在寻找一种方法来阻止这种情况发生。感谢所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T20:41:50.040

添加一个 if 来检查：

```
if(!string.IsNullOrEmpty(nextRow)) {
   execute the code you need
} 
```

# objective-c - 声明一个可以减去的数字 (runningScore) 并在目标 c 中保留新的数字

> ID：10921914
> 
> 赞同：1
> 
> 时间：2012-06-06T20:39:35.557
> 
> 标签：objective-c, ios

我希望设置一个计算器，其中有一个 targetScore，当您单击一个按钮时，它会从 targetScore 中减去给定的数字，结果成为新的 targetScore，并且该过程继续进行，直到 targetScore 为 0。

我已经阅读了 Steven Kochans 的书，以及一些针对傻瓜的 Objective c（非常适合我），查看了 lynda.com 上的教程并在这里阅读了大约一百万个线程，但还没有找到合适的答案（或者至少一个我被认为是合适的）。我对目标 c 非常陌生，并且如果有人能指出我正确的方向，我已经准备好进行硬码和研究。

我不是要求您为我编写代码，只是将我指向正确的方向，即我是否将 targetScore 声明为 NSObject/NSNumber/NSDecimalNumber/NSMutableArray 等，以及如何让新的 targetScore 保留并替换旧的 targetScore。

我要提前感谢您提供的任何帮助，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T20:43:51.607

婴儿步。获取尽可能小的数据格式以满足您的需求。在你的情况下 - 你会很好~~`short`~~ `char`（分数从 -128 到 127）或~~`unsigned short`~~ `unsigned char`（分数从 0 到 255）。如果没有，`int`或者`NSInteger`肯定会覆盖你所有的基础（除非分数高于 2^31）。这是一个简单的整数，你不需要对象（如`NSNumber`or `NSDecimalNumber`）来进行简单的数学运算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T20:51:31.183

您可以从 XCode 模板项目之一开始，我会推荐“单视图应用程序”。这将为您提供一个 UIViewController 和一个 Xib，您可以在其中放置按钮或其他界面元素。

您可以将 targetScore 声明为 UIViewController 的属性。

# wpf - LinearGradientBrush 线外带有渐变点

> ID：10921916
> 
> 赞同：0
> 
> 时间：2012-06-06T20:39:49.000
> 
> 标签：wpf, drawing, lineargradientbrush

我正在尝试在我的 WPF 应用程序中绘制类似于 soundcloud.com 上使用的波形我正在通过绘制多条垂直线来做到这一点

我想要的是所有线条都具有相同的颜色过渡（因此水平方向上所有像素都具有相同的颜色）因为并非所有线条都具有相同的长度，每条线条的末端都有不同的颜色。

LinearGradientBrush 有很多构造函数，最适合我需求的似乎是LinearGradientBrush(GradientStopCollection, Point, Point)。

[Msdn 关于 LinearGradientContstructor 的文章](http://msdn.microsoft.com/en-us/library/ms602514.aspx)

有了这些点，我似乎可以将 GradientStops 设置在画线之外

我的问题是我不知道如何使用积分。

```
var r = new GradientStopCollection();
r.Add(new GradientStop(Colors.Black, 0));
r.Add(new GradientStop(Colors.Red, 0.5));
r.Add(new GradientStop(Colors.Black, 1));

//this would be my main gradient background for all my lines (100%)
for (int i = 0; i < 25; i++)
{
  var line = new Line { X1 = i, X2 = i, Y1 = 0, Y2 = 200, Stroke = new LinearGradientBrush(r), StrokeThickness = 1 };
  WaveformCanvas.Children.Add(line);
}
//this would be an actual value of the waveform, points 0,0 and 1,1 seem to indicate that the gradientstops are exactly on the y1/y2
for (int i = 25; i < 50; i++)
{
  var line = new Line { X1 = i, X2 = i, Y1 = 50, Y2 = 150, Stroke = new LinearGradientBrush(r, new Point(0, 0), new Point(1, 1)), StrokeThickness = 1 };
  WaveformCanvas.Children.Add(line);
}
//these point values seem to be about correct for the current line length
//I came to these values by trial and error
for (int i = 50; i < 75; i++)
{
  var line = new Line { X1 = i, X2 = i, Y1 = 50, Y2 = 150, Stroke = new LinearGradientBrush(r, new Point(-0.5, -0.5), new Point(1.5, 1.5)), StrokeThickness = 1 };
  WaveformCanvas.Children.Add(line);
} 
```

我对为什么这些点是 2d 坐标感到困惑，因为点 -0.5，-0.5 的渐变似乎与绘制的线没有不同的角度

所以我需要了解如何相对于我的“主要 100% 渐变”放置点

或者也许更简单的方法是用纯色绘制线条，然后使用某种颜色选择将黑色像素替换为矩形渐变作为背景。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T02:16:42.067

看看[GradientBrush.MappingMode 属性](http://msdn.microsoft.com/en-us/library/system.windows.media.gradientbrush.mappingmode.aspx)。

[`LinearGradientBrush(GradientStopCollection, Point, Point)`](http://msdn.microsoft.com/en-us/library/ms602514)将初始化画笔，`BrushMappingMode.RelativeToBoundingBox`但我认为你需要`BrushMappingMode.Absolute`. 这个没有构造函数重载。所以你必须自己设置这个属性。

```
LinearGradientBrush brush = new LinearGradientBrush(r, new Point(0, 0), new Point(0, 200));
brush.MappingMode = BrushMappingMode.Absolute; 
```

# php - 使用php 5.0上传xml到Mysql数据库

> ID：10921917
> 
> 赞同：-7
> 
> 时间：2012-06-06T20:39:50.067
> 
> 标签：php, mysql, xml

我有一个xml如下-

```
<?xml version="1.0" encoding="UTF-8"?>
<result>
<item>
    <mid>2557</mid>
    <merchantname>DVD Players</merchantname>
    <linkid>1000012</linkid>
    <createdon>2006-09-30/20:04:17</createdon>
    <sku> JR-E-12324</sku>
    <productname>Sony Blu-Ray DVD Player</productname>
    <category>
        <primary>Electronics</primary>
        <secondary>TV . Video</secondary>
    </category>
    <price currency="JPY">59704</price>
    <upccode>4901340995017</upccode>
    <description>
        <short>Awesome Pictures</short>
        <long>Watch all your HD-DVDs</long>
    </description>
    <keywords>DVD Player~~BluRay~~SONY</keywords>
    <linkurl>http://somelink.com</linkurl>
    <imageurl>image.gif</imgurl>
</item> 
```

我需要将上面的xml上传到mysql表sing php。有人可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T20:43:00.650

[试试 SimpleXML 的加载字符串方法](http://www.php.net/manual/en/function.simplexml-load-string.php)

# ruby-on-rails - 在 update_all 之后没有调用 after_commit

> ID：10921919
> 
> 赞同：4
> 
> 时间：2012-06-06T20:39:56.720
> 
> 标签：ruby-on-rails, activerecord

我有 after_commit 设置如下。

```
class MyModel < ActiveRecord::Base
  after_commit { Rails.logger.info ("commit here") }

  # ...
end 
```

然后，我将不会触发回调的 update_all 包装在应该触发回调的事务中。

```
MyModel.transaction do
  MyModel.update_all(col: 'awesome')
end 
```

为什么 after_commit 没有被解雇？我的日志中没有看到“在此处提交”。它适用于破坏就好了。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-06T22:53:39.377

工作方式`after_commit`是，每当保存记录时，它就会被添加到记录列表中。当事务被提交时，rails 会遍历该列表，并在每个列表上调用 after commit 钩子。

当您这样做时`update_all`，实例不会单独保存（因为它们实际上根本没有加载 - rails 实际上并不知道更新了哪些行），因此它们不会被添加到 power 列表中`after_commit`。

`destroy_all`是不同的，因为它确实加载所有实例并一一删除它们，触发所有回调。`update_all`如果您使用过，您会观察到类似的行为`delete_all`

# objective-c - 使用 ShareKit 将 UILabel 传递给 Facebook

> ID：10921920
> 
> 赞同：0
> 
> 时间：2012-06-06T20:40:07.367
> 
> 标签：objective-c, ios, facebook, sharekit

根据我已将 ShareKit 添加到我的应用程序的建议，我想将 UILabel 的内容发送到 Facebook。尝试后

```
SHKItem *item = [SHKItem text:labelText];
[SHKFacebook shareItem:item]; 
```

它与 -[UILabel 长度] 崩溃：发送到实例 0x8279600 的无法识别的选择器

我已经使用简单的文本对其进行了测试，以确保我没有弄乱任何安装并且它完美地工作。

我开始认为这是我的代码，因为我还在学习。

有什么想法吗？

干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T20:41:07.513

您将需要发送文本而不是 UILabel 所以更改以下内容

```
SHKItem *item = [SHKItem text:labelText]; 
```

至

```
SHKItem *item = [SHKItem text:labelText.text]; 
```

# django - PostgreSQL 上的 Django 1.4 TimeField 迁移失败

> ID：10921921
> 
> 赞同：4
> 
> 时间：2012-06-06T20:40:07.837
> 
> 标签：django, postgresql, django-models, django-south, django-1.4

我在模型上编辑了两个字段并将它们从`IntegerField`s 更改为`TimeField`s：

```
class Model(models.Model):
    start_time = models.TimeField()
    end_time = models.TimeField() 
```

我使用这两个字段来节省天真的时间，这与任何地理时间概念无关，因此没有真正的“时区”（想想类似于比赛时间的东西）。我的本地数据库是 PostgreSQL。

但是，此更改生成的南迁移失败并出现以下错误：

```
> main:0005_auto__chg_field_model_start_time__chg_field_model_end_time
FATAL ERROR - The following SQL query failed: ALTER TABLE "main_model" ALTER COLUMN "start_time" TYPE time, ALTER COLUMN "start_time" SET NOT NULL, ALTER COLUMN "start_time" DROP DEFAULT;

...

File ".../lib/python2.7/site-packages/django/db/backends/postgresql_psycopg2/base.py", line 52, in execute
    return self.cursor.execute(query, args)
django.db.utils.DatabaseError: column "start_time" cannot be cast to type time without time zone 
```

失败的迁移有这个：

```
class Migration(SchemaMigration):

    def forwards(self, orm):

        # Changing field 'Model.start_time'
        db.alter_column('main_model', 'start_time', self.gf('django.db.models.fields.TimeField')())

        # Changing field 'Model.end_time'
        db.alter_column('main_model', 'end_time', self.gf('django.db.models.fields.TimeField')()) 
```

关于如何让 postgres 对这种迁移感到满意的任何想法？

PS我正在开发中，所以我真的不关心任何数据迁移。您可以假设数据库是空的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T21:47:50.333

由于您不关心数据，因此最简单的方法是删除该列，然后使用 type 再次添加它`Time`。

手动编辑当前迁移来执行此操作。或者删除此迁移，然后注释该字段并运行，`schemamigration --auto`然后添加该字段并再次运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T10:43:12.930

我最终手动编辑了迁移脚本（感谢@Maccesch），以便所有`alter_column()`调用都替换为`delete_column()`后跟一个`add_column()`.

请注意，这意味着**不会进行任何数据迁移，**并且在此迁移之前存在的任何数据都将被删除。

代码：

```
def forwards(self, orm):

    # NOTE: NO MIGRATION HERE!!
    # THIS _WILL_ CAUSE DATA LOSS

    # Changing field 'Model.start_time'
    db.delete_column('main_model', 'start_time')
    db.add_column('main_model', 'start_time', self.gf('django.db.models.fields.TimeField')())

    # Changing field 'Model.end_time'
    db.delete_column('main_model', 'end_time')
    db.add_column('main_model', 'end_time', self.gf('django.db.models.fields.TimeField')()) 
```

`backwards()`类似地实现。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-12-17T12:09:43.227

我也遇到过这个问题，问题出在创建新测试数据库时的南方迁移。配售

```
SOUTH_TESTS_MIGRATE = False 
```

进入你的设置文件为我解决了这个问题。

# drupal - 如何强制不为未经身份验证的用户缓存块？

> ID：10921926
> 
> 赞同：1
> 
> 时间：2012-06-06T20:40:49.777
> 
> 标签：drupal, drupal-blocks, drupal-cache

我有一个 php 块，我想在每次页面加载/重新加载时刷新它。尽管我在站点配置 -> 性能下禁用了所有缓存，但该块仍在缓存中。虽然我在这方面搜索了很多，但我还没有找到任何明确的答案。当然，必须有一种方法可以为未经身份验证的用户正确禁用内容缓存！

我正在使用 Drupal 6.20，站点地址是 www.cygnet-rcDOTorg.uk（有问题的块是左侧边栏“最新推文”上的 Twitter 提要......

顺便说一句 - PHP 正在使用 Twitter Pull 模块。我已将模块的配置更改为 1 分钟缓存，所以我认为问题不存在。

# c++ - Windows 应用程序在以非管理员身份运行时看到旧版本的文件而不是当前版本

> ID：10921930
> 
> 赞同：1
> 
> 时间：2012-06-06T20:41:01.833
> 
> 标签：c++, file, windows-7

我有一个用 Microsoft Visual Studio 2003 编译的 C++ 命令行程序，我正在 Windows 7（64 位版本）下运行生成的 32 位可执行文件。除了一个令人费解的奇怪现象外，大多数事情都可以正常工作。

启动时，我的程序尝试使用 ifstream 读取文本文件。如果我以管理员身份运行我的程序，或者通过打开管理员命令提示符，或者在资源管理器中右键单击并选择“以管理员身份运行”，那么一切正常，我的程序会读取文件的当前版本。

相反，如果我从正常的命令提示符运行，或者通过双击资源管理器，我的程序会看到昨天的文本文件的旧版本。即使我删除了文件，我的程序仍然会愉快地打开文件并读出旧内容。

如果我以非管理员模式运行`type`或`notepad`处理文件，则会显示正确的最新版本，问题似乎仅限于我的程序。我已经尝试将文件的所有可能权限授予我的用户而不进行任何更改。

一个可能的线索是，如果我从资源管理器转到`properties`文本文件并在“以前的版本”下查看，则会列出昨天的一个以前的版本，它的内容与我的程序尝试读取时看到的相同文件。

不知何故，当我的程序不是以管理员身份运行时，我的程序似乎卡在了文件系统的旧视图中，而是看到了这个以前的版本，我希望有人能向我解释为什么会发生这种情况以及（希望）如何修复它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T20:47:23.110

如果您没有为输入文件使用绝对路径名，那么您很可能读取了错误的文件（您可以在删除文件后读取文件这一事实证明了这一点）。换句话说，在您的系统某处有另一个旧文件的副本，这就是您的程序正在读取的内容。

Microsoft 的[ProcMon](http://technet.microsoft.com/en-us/sysinternals/bb896645)工具（或较旧的 FileMon）可以显示您的应用程序正在访问哪个文件。

# java - javax.net.ssl.SSLException：SSLSocketFactory 为空

> ID：10921941
> 
> 赞同：4
> 
> 时间：2012-06-06T20:41:39.223
> 
> 标签：java, ssl, client-certificates

我对以下代码有疑问...

```
System.setProperty("javax.net.ssl.keyStoreType", "pkcs12");
System.setProperty("javax.net.ssl.trustStoreType", "jks");
System.setProperty("javax.net.ssl.keyStore","C:\\ClientKeyStore\\ClientKeyStore.p12");
System.setProperty("javax.net.ssl.trustStore","C:\\ClientKeyStore\\ClientKeyStore.keystore");
System.setProperty("javax.net.debug", "ssl");
System.setProperty("javax.net.ssl.keyStorePassword", "keystorepass");
System.setProperty("javax.net.ssl.trustStorePassword", "truststorepass");

SSLSocketFactory sslsocketfactory = (SSLSocketFactory) SSLSocketFactory.getDefault();
URL url = new URL("https://url.com");
HttpsURLConnection httpCon = (HttpsURLConnection) url.openConnection();
httpCon.setSSLSocketFactory(sslsocketfactory);
OutputStream out=httpCon.getOutputStream(); 
```

我尝试使用该`System.setProperty(key,value)`方法设置 SSL 上下文的信任库、密钥库和其他属性，但出现以下错误。

```
javax.net.ssl.SSLException: SSLSocketFactory is null. This can occur if javax.net.ssl.SSLSocketFactory.getDefault() is called to create a socket and javax.net.ssl.* properties are not set. 
```

有人可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T21:27:53.000

即使在 Windows 上，您也可以尝试对路径使用正斜杠：

```
System.setProperty("javax.net.ssl.keyStoreType", "pkcs12");
System.setProperty("javax.net.ssl.trustStoreType", "jks");
System.setProperty("javax.net.ssl.keyStore","C:/ClientKeyStore/ClientKeyStore.p12");
System.setProperty("javax.net.ssl.trustStore","C:/ClientKeyStore/ClientKeyStore.keystore");
System.setProperty("javax.net.debug", "ssl");
System.setProperty("javax.net.ssl.keyStorePassword", "keystorepass");
System.setProperty("javax.net.ssl.trustStorePassword", "truststorepass");

SSLSocketFactory sslsocketfactory = (SSLSocketFactory) SSLSocketFactory.getDefault(); 
```

这是你所有的代码吗？您的属性看起来不错，我能够使用您的示例创建一个套接字工厂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-05T14:52:12.043

我的 websphere 8.5 / ibm java 1.7 设置有这个问题。

在我的情况下，它是由 JREs <JRE_HOME>\lib\security\java.security 文件引起的。

就我而言，文件说...

```
ssl.KeyManagerFactory.algorithm=IbmX509
ssl.TrustManagerFactory.algorithm=PKIX 
```

PKIX 值看起来很可疑，所以我将文件的这一行更改为...

```
ssl.TrustManagerFactory.algorithm=IbmX509 
```

当我重新启动 websphere 服务器时，连接正常。

# django - Django模型：具有多个对象的manytomany

> ID：10921948
> 
> 赞同：0
> 
> 时间：2012-06-06T20:41:57.517
> 
> 标签：django, django-models

我有一个事件模型。事件可以有许多“演示者”。但是每个演示者都可以选择 2 种不同类型的个人资料中的一种。配置文件 1 和配置文件 2。如何允许两个配置文件进入演示者？

*这将是 100% 后端生成的。也就是说，管理员将选择“演示者”。* （不知道这是否重要）。

```
class Profile1(models.Model):
    user = models.ForeignKey(User, null=True, unique=True)
    first_name = models.CharField(max_length=20, null=True, blank=True)
    last_name = models.CharField(max_length=20, null=True, blank=True)
    created = models.DateTimeField(auto_now_add=True)
    modified = models.DateTimeField(auto_now=True)
    about = models.TextField(null=True, blank=True)
    tags = models.ManyToManyField(Tag, null=True, blank=True)
    country = CountryField()
    avatar = models.ImageField(upload_to='avatars/users/', null=True, blank=True)
    score = models.FloatField(default=0.0, null=False, blank=True)
    organization = models.CharField(max_length=2, choices=organizations)

class Profile2(models.Model):
    user = models.ForeignKey(User, null=True, unique=True)
    first_name = models.CharField(max_length=20, null=True, blank=True)
    last_name = models.CharField(max_length=20, null=True, blank=True)
    created = models.DateTimeField(auto_now_add=True)
    modified = models.DateTimeField(auto_now=True)
    about = models.TextField(null=True, blank=True)
    tags = models.ManyToManyField(Tag, null=True, blank=True)
    country = CountryField()
    avatar = models.ImageField(upload_to='avatars/users/', null=True, blank=True)
    score = models.FloatField(default=0.0, null=False, blank=True)

...

class Event(models.Model):
    title = models.CharField(max_length=200)
    sub_heading = models.CharField(max_length=200)
    presenters = ManyToManyField(Profile1, Profile2, blank=True, null=True)  ?
    ...
    # I've also tried: 
    profile1_presenters = models.ManyToManyField(Profile1, null=True, blank=True)
    profile2_presenters = models.ManyToManyField(Profile2, null=True, blank=True)
    # is there a better way to accomplish this?... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T04:13:35.183

我认为你在这里有一个设计问题。在我看来，您必须考虑什么是 Presenter，以及具有“profile 1”和“profile 2”的 Presenter 之间有什么不同。你打算用这些模型做什么？您确定只有两个配置文件吗？从现在开始的某个时间，是否有可能出现不同的配置文件（“配置文件 3”）？和配置文件4？和配置文件 N？

我建议您重新考虑一下您的模型及其关系。不要考虑从 django admin 处理这些模型有多么困难/容易做出这个决定。这是另一个问题，我敢打赌，如果您稍微考虑一下您的模型，以后这不会成为问题。

不过，我可以给你一些建议，告诉你如何实现你想要的（或者我希望如此）。一旦你考虑了如何对这些关系建模，就开始考虑如何在 django 中编写模型。以下是您必须自己回答的一些问题：

每个配置文件是否需要一个不同的表（如果要使用 SQL）？如果您无法回答，请尝试回答以下问题： 1) 两个不同的个人资料有什么区别？2) 是否有多个个人资料？3) 每个演示者只有一个个人资料？该属性在不久的将来发生变化的可能性有多大？

我不太了解您需要什么，但我认为最好的选择是在您的“Presenter”模型之外拥有一个模型“Profile”。可能是这样的：

```
class Profile(models.Model):
    first_profile_field = ...
    second_profile_field = ...

# Each presenter have one profile. One profile can "represent" 
# to none or more presenters
class Presenter(models.Model):
    first_presenter_field = ....
    second_presenter_field = ....
    profile = models.ForeignKey(Profile)

class Event(models.Model):
    presenters = models.ManyToManyField(Presenter)
    .... 
```

这只是我想象你如何设计你的模型的一个想法。一旦您正确设计了模型并回答了我向您提出的问题，这里有一些链接可能会对您有所帮助：

[https://docs.djangoproject.com/en/dev/topics/db/models/#model-inheritance](https://docs.djangoproject.com/en/dev/topics/db/models/#model-inheritance)

[https://docs.djangoproject.com/en/dev/misc/design-philosophies/#models](https://docs.djangoproject.com/en/dev/misc/design-philosophies/#models)

[http://www.martinfowler.com/eaaCatalog/activeRecord.html](http://www.martinfowler.com/eaaCatalog/activeRecord.html)

一旦你决定了你的设计将如何与管理员一起工作：

[https://docs.djangoproject.com/en/dev/ref/contrib/admin/](https://docs.djangoproject.com/en/dev/ref/contrib/admin/)

**编辑：** 如果我没记错的话，配置文件 1 和 2 字段之间的唯一区别是“组织”字段。我对吗？因此，我建议您合并这两个模型，因为它们几乎相同。如果他们有不同的方法，或者你想添加不同的管理器或其他什么，你可以使用 django 模型的[代理选项](https://docs.djangoproject.com/en/dev/topics/db/models/#proxy-models)。例如，您可以这样做：

```
class Profile(models.Model):
    #All the fields you listed above, including the "organization" field

class GoldenProfile(models.Model):
    #you can define its own managers
    objects = GoldenProfileManager()
    ....
    class Meta:
        proxy = True

class SilverProfile(models.Model):
    ....
    class Meta:
        proxy = True 
```

这样，您可以在每个模型中定义不同的方法或具有不同行为的相同方法。你可以给他们自己的经理，等等。

并且事件类应该保持这样：

```
class Event(models.Model):
    title = models.CharField(max_length=200)
    sub_heading = models.CharField(max_length=200)
    presenters = ManyToManyField(Profile, blank=True, null=True) 
```

希望能帮助到你！

# java - Android APK 扩展文件问题

> ID：10921950
> 
> 赞同：0
> 
> 时间：2012-06-06T20:42:01.783
> 
> 标签：java, android, apk, expansion

我想既然我的应用程序是 114 兆，我应该使用扩展 apk。

如果我将所有这些视频放入项目的原始文件夹中，它就会达到那个大小。

通过扩展 APK，我可以让它下载所有这些视频并将其放入原始文件夹吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T02:13:37.767

创建一个辅助 Zip 文件并使用它来存储视频文件，无需任何额外压缩（从命令行使用 zip -0）。提供了一个库 (apkx_zip_file)，可让您从 Zip 文件中获取资产文件描述符。由此，您可以将偏移量和长度传递给 MediaPlayer。如果你需要使用 VideoView，你也可以使用 APEZProvider 来设置自己的内容提供者，它也在库中。

# iphone - iPhone 默认系统键盘颜色和样式指南

> ID：10921956
> 
> 赞同：2
> 
> 时间：2012-06-06T20:42:33.973
> 
> 标签：iphone, objective-c, uitoolbar, uicolor, uitoolbaritem

我创建了一个自定义 UIToolbar，其中 UIBarButtonItems 作为数字并将其作为 inputAccessoryView 添加到键盘。

我需要使 UIToolbar 与键盘配色方案和按钮完全匹配，就像标准 iPhone 键盘数字一样，但我无法在任何地方找到使用了什么颜色、大小或样式。

除了创建看起来像 iPhone 号码的图像之外，有没有办法以编程方式使用**系统颜色、样式和大小**创建它们，以便它们匹配默认的键盘按钮？关于此的任何指南/资源/示例？

# vb.net - 带有来自 vb 字符串的命名标签的 Google Chrome 命令行链接

> ID：10921958
> 
> 赞同：2
> 
> 时间：2012-06-06T20:42:42.977
> 
> 标签：vb.net, google-chrome, character-encoding

我有一系列存储在数据库中的 HTTP 链接，它们有一个命名标记作为链接的一部分（例如`http://somecompany.com/products#123332`），它在一个相当大的页面中表示产品 123332。

上面的链接在使用 IE 时可以正常工作，但不适用于 Chrome。字符被`#`转换为`%23`Chrome 找不到参考。将浏览器的地址字段中的`%23`背面更改为正常工作。`#`

该链接存储在标准 VB 中`String`，我尝试`#`通过`String.Replace()`. 必须有一种正确的方法来正确编码，我似乎无法在网络上找到任何似乎有效的参考资料。

调用的简化示例如下：

```
Shell(strBrowser & strLink) 
```

where`strBrowser`包含所有必要的路径和 exe 名称，并且`strLink`是一个类似于我上面提到的字符串。也如前所述，它适用于 IE。我怎样才能正确编码呢？

谢谢。

编码

```
If oFichierAide.LienIntern = 1 Then
    strLink = " " + Chr(34) + VarGlobales.EmplacementAppl + oFichierAide.LienFichier + Chr(34)
Else
    strLink = " " + Chr(34) + oFichierAide.LienFichier + Chr(34)
End If

Try
    regBrowserKey = My.Computer.Registry.ClassesRoot.OpenSubKey("HTTP\shell\open\command", False)
    strBrowser = regBrowserKey.GetValue(Nothing).ToString().ToLower().Replace(Chr(34), "")
    strBrowser = strBrowser.Substring(0, strBrowser.LastIndexOf(".exe") + 4)

Finally
    If regBrowserKey IsNot Nothing Then
        regBrowserKey.Close()
    End If
End Try

If strBrowser.Length > 0 And strLink.Length > 1 Then
    Dim strCall As String = strBrowser + strLink
    Shell(strCall, AppWinStyle.NormalFocus, False)
    Return True
End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T00:16:06.903

您可以通过执行以下操作打开任何 chrome 窗口到通过 Visual Basic 使用字符串变量存储的任何 URL：

```
Dim appData As String = GetFolderPath(SpecialFolder.ApplicationData)
Dim chromelocation = appdata + "\Local\Google\Chrome\Application\chrome.exe"
process.start(chromelocation + strLink) 
```

然后 Chrome 应该打开并且它去的地址应该是 strLink 的内容。

# nhibernate - nHibernate - IStatelessSession 和 FetchMany 返回多个父记录

> ID：10921959
> 
> 赞同：2
> 
> 时间：2012-06-06T20:42:53.013
> 
> 标签：nhibernate, linq-to-nhibernate

我有以下 linq 语句：

```
var query = from p in session.Query<Parent>().FetchMany(x => x.Children)
            select p; 
```

我最终为子项中的每个子项创建了一个新的父对象。因此，如果我有 5 个孩子，我会得到 5 个单独但相同的父对象。这是预期的行为吗？如果我使用 ISession，我会按预期得到 1 个父级。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T01:20:56.917

这是意料之中的，因为无状态会话不跟踪对象；因此每一行都会产生一个新实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T21:13:08.680

您是否尝试过`Distinct`调用查询？

```
var results = query.Distinct(); 
```

# scala - 在 for 循环中访问 Scala Buffer 的元素的顺序是什么？

> ID：10921960
> 
> 赞同：1
> 
> 时间：2012-06-06T20:42:53.153
> 
> 标签：scala

```
for(elt <- bufferObject: scala.collection.mutable.Buffer)
  // Do something with the element of the collection 
```

将按什么顺序访问 for 循环中的元素？随机？

从 Scala API 可以看出 Buffer 是 Seq 的子类，其中的元素是有序的。这也适用于上面的循环吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T23:07:11.603

以下是 的超类型的选择`mutable.Buffer[A]`，以及它们提供的遍历保证：

*   `Seq[A]`-- 所有元素都有一个位置，有一个关联的索引；它们总是从最低索引到最高索引一一遍历。
*   `GenSeq[A]`-- 所有元素都有一个位置，有一个关联的索引；它们可以一个一个地遍历，也可以并行遍历；如果生成了新的集合，那么新集合中元素的位置将与旧集合相对应，即使是并行遍历。
*   `Iterable[A]`-- 元素可以以任意顺序遍历，但总是以相同的顺序遍历（即不能从一个迭代更改为另一个）；它们将被一一遍历。
*   `GenIterable[A]`-- 元素可以以任意顺序遍历，但总是以相同的顺序遍历（即不能从一个迭代更改为另一个）；遍历可以一个一个地发生，也可以并行地发生；如果生成了新的集合，那么新集合中元素的位置将与旧集合相对应，即使是并行遍历。
*   `Traversable[A]`-- 与 相同的保证`Iterable[A]`，但有额外的限制，即您可以中断遍历，但您无法确定何时选择下一个元素（您可以`Iterable[A]`通过`Iterator`生成
*   `GenTraversable[A]`-- 与 相同的保证`GenIterable[A]`，但有额外的限制，即您可以中断遍历，但您无法确定何时选择下一个元素（您可以`GenIterable[A]`通过`Iterator`生成
*   `TraversableOnce[A]`-- 与 中的保证相同`Traversable[A]`，但您可能无法多次遍历元素。
*   `GenTraversableOnce[A]`-- 与 中的保证相同`GenTraversable[A]`，但您可能无法多次遍历元素。

现在，所有保证都适用，限制更少，这实际上意味着所说的一切都`Seq[A]`适用于`mutable.Buffer[A]`.

现在，到 for 循环：

```
for(elt <- bufferObject: scala.collection.mutable.Buffer)
  doSomething(elt) 
```

与以下内容相同：

```
bufferObject.foreach(elt => dosomething(elt)) 
```

和

```
for(elt <- bufferObject: scala.collection.mutable.Buffer)
yield makeSomething(elt) 
```

与以下内容相同：

```
bufferObject.map(elt => makeSomething(elt)) 
```

事实上，*所有* `for`变体都将被转换为可用的方法`Buffer`（或任何其他类型），因此集合提供的保证都适用。请注意，例如，`GenSeq`与`map`(for-yield) 一起使用的 a 可能会并行处理所有元素，但会生成一个集合，其中`newCollection(i) == makeSomething(bufferObject(i))`保留索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T20:49:14.703

应该订购。`Buffer`默认为`ArrayBuffer`我相信。

```
scala> import scala.collection.mutable.Buffer
import scala.collection.mutable.Buffer

scala> val x = Buffer(1, 2, 3, 4, 5)
x: scala.collection.mutable.Buffer[Int] = ArrayBuffer(1, 2, 3, 4, 5)

scala> for (y <- x) println(y)
1
2
3
4
5 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T20:50:13.867

是的，`for`-comprehension 将 desugar 到 , 和 的某种组合，`map`并且这些都遵循' 定义的顺序。`flatMap``foreach``Seq`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-06T21:01:26.010

除非您使用并行集合（通过`par`方法），否则可变 Buffer 中的操作顺序（如理解、映射、foreach 和其他顺序方法）是有保证的。

# rss - RSS 阅读器 - 如何仅获取特定时间以来的更新？

> ID：10921963
> 
> 赞同：1
> 
> 时间：2012-06-06T20:43:01.617
> 
> 标签：rss, rss-reader

如何仅从 RSS 提要中获取更新后的更新？我看到的各种代码片段似乎在定期轮询 url。但这非常依赖于：

1.  在轮询间隔期间，提要的活跃程度以及，
2.  服务器作为其策略返回的项目数。

这带来了因不频繁轮询、轮询过于频繁和增加带宽成本或两者兼而有之而丢失某些项目的风险。

我正在考虑的提要似乎也将 Last-modified 更新为当前时间，这不是很有帮助。

是否有一些 API 元素允许这样的事情？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T21:35:08.037

除非您正在 ping 的提要允许您发送截止日期的参数，否则如果不重新下载提要，您将无法可靠地确定自上次投票以来何时添加了新项目。

您将回到开始定期轮询的位置，以查看存在哪些新项目（如果有）。

然后，您可以[对提要进行哈希处理以检查](https://stackoverflow.com/questions/1289227/read-only-when-the-xml-data-is-updated/1563382#1563382 "不得不阻止你")它是否与上次不同，如果相同则跳过检查新项目。或者您可以检查它的缓存标头，但是您必须假设服务器正在正确地将其发回和/或您也不会回到像`Last-Modified`标签这样根本不可靠的情况。

# c# - 使用 FileHelpers，如何从上传的 Excel 文件中提取记录

> ID：10921966
> 
> 赞同：1
> 
> 时间：2012-06-06T20:43:12.423
> 
> 标签：c#, excel, filehelpers

[FileHelpers](http://filehelpers.sourceforge.net/)的捆绑示例之一显示了如何从 Microsoft Excel 工作表中提取和插入记录，如下所示：

定义一个类，其成员对应于输入 Excel 文件中的列

```
[DelimitedRecord("|")]
public class CustomersVerticalBar
{
    public string CustomerID;
    public string CompanyName;
    public string ContactName;
    public string ContactTitle;
    public string Address;
    public string City;
    public string Country;
} 
```

然后使用 ExcelDataStorage 提取记录如下：

```
ExcelStorage provider = new ExcelStorage(typeof(CustomersVerticalBar));
provider.StartRow = 3;
provider.StartColumn = 2;           
provider.FileName = "Customers.xls";
CustomerVerticalBar[] res = (CustomerVerticalBar[]) provider.ExtractRecords(); 
```

问题是如果没有输入 Excel 文件，但输入只能作为来自上传文件的输入流（例如来自 HttpPostedFileBase），那么在这种情况下解决方案是什么，因为 ExcelDataStorage 只将文件名作为输入而不是输入流？如果解决方案使用 ExcelDataStorage 以外的其他类，则可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-30T08:55:56.820

您应该将其写入文件，然后在处理后根据需要将其删除，因为库可能需要加载部分数据而不是全部数据，并且可能需要多次引用该文件。

# iphone - 在 UIImageView 中使用标准 iOS 图像？

> ID：10921968
> 
> 赞同：1
> 
> 时间：2012-06-06T20:43:19.830
> 
> 标签：iphone, objective-c, ios

我正在寻找一种通过我的应用程序使用标准 iOS 图像资源的方法。例如，我想将 DisclosureIndicator 图标放在我的图像视图中。您将如何使用 iOS 中的标准资源？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T20:46:50.103

我相信在您的应用程序中使用 iOS 资源将被视为私有 API，但我会查看这个项目[艺术作品提取器](https://github.com/0xced/UIKit-Artwork-Extractor)，它允许您从现有的原生 iOS 应用程序中提取艺术作品，您可以将它们包含在您的项目中。确保在视网膜版本中运行它以获得@2x 版本。

# ruby-on-rails - 语法错误，意外的 tIDENTIFIER，需要关键字_end

> ID：10921969
> 
> 赞同：4
> 
> 时间：2012-06-06T20:43:48.590
> 
> 标签：ruby-on-rails, rspec

我究竟做错了什么？我认为我所有的目的都是对的。我收到此错误

```
describe "visiting the edit page" do

describe "submitting to the update action" do

describe "visiting the user index" do

describe "as wrong user" do

FactoryGirl.create(:user, email: "wrong@example.com")} 
```

和

```
describe "visiting Users#edit page" do 
```

这是我运行 rspec 时遇到的错误

```
syntax error, unexpected tIDENTIFIER, expecting keyword_end

describe "authorization" do

    describe "for non-signed-in users" do
      let(:user) {FactoryGirl.create(:user)}

      describe "when attempting to visit a protected page" do
        before do
          visit edit_user_path(user)
          fill_in "Email", with: user.email
          fill_in "Password", with: user.password
          click_button "Sign in"
        end

        describe "after signing in" do
          it "should render the desired protected page" do
            page.should have_selector('title', text: 'Edit user')
          end

          describe "when signing in again" do
            before do
              click_link "Sign out"
              click_link "Sign in"
              fill_in "Email", with: user.email
              fill_in "Password", with: user.password
              click_button "Sign in"
            end

            it "should render the default (profile) do
            page.should have_selector('title', text: user.name)
            end
          end
        end
      end

      describe "in the Users controller" do

        describe "visiting the edit page" do
          before {visit edit_user_path(user)}
          it { should have_selector('title', text: 'Sign in') }
          it {should have_selector('div.alert.alert-notice')}
        end

        describe "submitting to the update action" do
          before { put user_path(user)}
          specify {response.should redirect_to(signin_path)}
        end

        describe "visiting the user index" do
          before {visit users_path} 
          it {should have_selector{'title', text: 'Sign in'}}         
        end
      end
    end

    describe "as wrong user" do
      let(:user) {FactoryGirl.create(:user)}
      let(:wrong_user) {FactoryGirl.create(:user, email: "wrong@example.com")}
      before { sign_in user}

      describe "visiting Users#edit page" do
        before {visit edit_user_path(wrong_user)}
        it {should_not have_selector('title', text: 'Edit user')}
      end

      describe "submitting a PUT request to the Users#update action" do
        before {put user_path(wrong_user)}
        specify {response.should redirect_to(root_path)}
      end
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T20:46:25.410

你`"`在 `it "should render the default (profile) do`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-06T20:47:38.850

马上开始

```
it "should render the default (profile) do 
```

缺少结束引号，应该是

```
it "should render the default (profile)" do 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-08T07:09:06.200

我在 podspec 中有这个字符“而不是这个”。

# python - Django“保存（）不带参数（3个给定）”

> ID：10921974
> 
> 赞同：2
> 
> 时间：2012-06-06T20:44:01.873
> 
> 标签：python, django

我正在尝试为创建的每个用户帐户创建一个配置文件。我正在使用 Django 1.4 和 python 2.7。

我有我的`Profile`模型课：

```
class Profile(models.Model): 
   ... profile fields ...
   user = models.OneToOneField(User) 
```

然后我使用 post save 信号来创建`Profile`：

```
def create_user_profile(sender, instance, created, **kwargs):
    if created:
        Profile.objects.create(user=instance)
        #Profile(user=instance).save()

post_save.connect(create_user_profile, sender=User, dispatch_uid="accounts.models") 
```

如果我使用`Profile.objects.create(user=instance)`我得到错误：

```
save() takes no arguments (3 given) 
```

但如果我使用`Profile(user=instance).save()`我会得到错误：

```
save() takes no arguments (1 given) 
```

我基本上直接从 django 文档中复制了这个。

我真的不确定这里出了什么问题，所以任何帮助都将不胜感激。

### 编辑

问题已在评论中解决：

> 我有 def`save():`而不是`def save(self, *args, **kwargs):`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-10T06:59:04.437

`save()``self`作为默认参数。所以如果没有显式传递，Django 会自动传递`self`默认参数。

所以你需要`self`明确地传递给`save()`, ie`def save(self)`然后`save()`在任何地方调用，你就不会再得到错误了。

# iphone - 尝试自定义 iOS UIPrint 打印选项

> ID：10921975
> 
> 赞同：4
> 
> 时间：2012-06-06T20:44:18.590
> 
> 标签：iphone, objective-c, cocoa-touch, airprint

我正在尝试修改使用 UIPrint 时出现的打印选项。

```
UIPrintInteractionController *pic;
void (^completionHandler)(UIPrintInteractionController *, BOOL, NSError *) =
^(UIPrintInteractionController *printController, BOOL completed, NSError *error) {
  if (!completed && error) {
    NSLog(@"Printing could not complete because of error: %@", error);
  }
};

[pic presentAnimated:YES completionHandler:completionHandler]; 
```

有一个您可以响应的委托：

```
- (UIViewController *)printInteractionControllerParentViewController:(UIPrintInteractionController *)printInteractionController 
```

如果我从这里返回 nil，则会显示对话框。如果我返回导航视图控制器的视图控制器，则不会出现打印选项。我不知道为什么。

在一个相关的问题上，是否可以在不使用打印选项的情况下获取打印机列表，然后打印到特定的打印机（从而无需显示打印机选项视图）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-08T18:14:48.923

As for modifying the options that appear in the dialog, you might look at the `[UIPrintInfo]` [object](https://developer.apple.com/library/ios/documentation/Uikit/reference/UIPrintInfo_Class/index.html). You basically setup this object and then apply it to the `UIPrintInteractionController` using the `printInfo` property.

I don’t have much advice on using the navigation controller as the parent. I’ve done that in the past with no issues. When setting the parent to nil it shows the system dialog as a modal. When setting it to the navigation controller it slides in from the side more like a normal view. I don’t have any insight why it’s not working for you. Sorry!

As for printing without a dialog, I just answered the same basic question here:

[iOS print without allowing UIPrintInteractionController to appear](https://stackoverflow.com/questions/13145724/ios-print-without-allowing-uiprintinteractioncontroller-to-appear/26263359#26263359)

# android - 在 Android 应用程序中引用 Facebook SDK 的问题

> ID：10921979
> 
> 赞同：1
> 
> 时间：2012-06-06T20:44:42.147
> 
> 标签：android, facebook, facebook-android-sdk

我一直在尝试在我的应用程序中使用 FBConnect，但每当我尝试引用 SDK 时，它并没有完全做到这一点。这是截图

![在此处输入图像描述](../Images/02d07bde3366c828132cef054d701346.png)

请帮忙。我被困了4个小时。在谷歌或这里找不到任何东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T20:47:38.200

参考这个页面：[http](http://www.mobisoftinfotech.com/blog/android/845/) ://www.mobisoftinfotech.com/blog/android/845/ 。似乎您应该添加 JAR 文件。您在这里所做的是添加一个库 - Eclipse 中的一个打开的项目，它充当另一个项目的库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T00:17:40.890

澄清：当您单击添加时，您会看到“FacebookSDK”。在您关闭属性对话框之前，它显示为有效。然后当你再次打开对话框时，它旁边有一个红色的 X。

如果这就是发生在你身上的事情......我很久以前遇到过同样的事情。facebook sdk 需要与您的项目位于同一父文件夹中。

例如，如果您用完了 c:\users\me\workspace\my cool project，则 facebook sdk 需要位于 c:\users\me\workspace\facebook-android-skd-2.0.2.b

不知道为什么，但是在这几天把我的头撞在墙上之后，我想通了。

# javascript - 如何遍历 json 数组并使用 jQuery 提取值

> ID：10921980
> 
> 赞同：1
> 
> 时间：2012-06-06T20:44:43.863
> 
> 标签：javascript, jquery, json

因此，我在订单确认页面上显示了以下 JSON：

```
var orderDetails = {
    "orderID": "o32770183",
    "orderQty": 3,
    "orderTotal": 575.97,
    "orderShipping": 49.97,
    "orderDiscount": 0,
    "orderTax": 39.74,
    "orderCity": "Norwalk",
    "orderState": "Connecticut",
    "itemId": [
        "sku500134",
        "sku230312",
        "sku133846"
    ],
    "itemQty": [
        1,
        1,
        1
    ],
    "itemPrice": [
        159.99,
        225.99,
        189.99
    ],
    "itemName": [
        "The 'Inaugural' Raymond R Cabernet Sauvignon",
        "H de l'Hospitalet",
        "Chateau Florie Aude"
    ]
} 
```

提取数据的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T20:47:47.537

或者，像这样 - 一种更动态的方法 - （如果你不知道对象元素）

```
for(i in orderDetails)
  alert(orderDetails[i]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T20:45:48.887

这实际上不是 JSON，而是一个普通的旧 JavaScript 对象。您像使用任何其他对象一样提取数据

```
var orderId = orderDetails.orderID; 
```

或者

```
var orderId = orderDetails["orderID"]; 
```

或对于数组：

```
var itemQtyArr = orderDetails.itemQty;
for(var i = 0, max = itemQtyArr.length; i < max; i++){
   console.log("itemQty", i, itemQtyArr[i]);
} 
```

或 Vivek 发布的动态方法（+1 给他）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T20:49:26.537

您可以使用 for in 迭代 Javascript 对象的键

让我们说

```
a = {"a":"hello","b":"world"};

for(var c in a){
  console.log(c); //will out put a,b in iterations
  console.log(a[c]) //will access values of keys a and b from the object a output hello, world
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T20:56:11.643

这是一个有用的 JSON 编辑器工具，它为您提供 JSON 对象的可视化表示。它列出了您的命名项目并为您提供了访问 JSON 值的路径：[JSON 编辑器](http://braincast.nl/samples/jsoneditor/)

# c# - C# 基于另一个属性值的不同属性

> ID：10921984
> 
> 赞同：3
> 
> 时间：2012-06-06T20:44:53.803
> 
> 标签：c#, class, properties

我正在写一个消息处理器。处理器通过数据流接收消息。消息可能有不同的类型，但所有类型都有一些共同的属性，例如长度、校验和等。此外，每种类型的消息也有自己的属性。

对于它的实现，我正在考虑创建一个包含公共属性的类（比如消息类），并从消息类继承来为每种消息类型创建单独的类。首先，我想知道在这种情况下继承是否是一个好的解决方案？或者还有其他更好的方法吗？

另外，我想将原始消息传递给一个方法，该方法将相应的属性返回给消息（包括公共和个人）。由于单个属性会根据消息类型发生变化，我如何实现只返回一个对象的方法？为了更好地解释，我不希望它为每种消息类型返回不同的对象。我宁愿有一个通用对象，它具有基于另一个属性（如“MessageType”）的一些特定属性，如下所示：

```
Message Class:
--- Length
--- Check-sum
--- MessageType
--- Property A
--- Property B
     .
     .
     .
--- Property Z 
```

属性 A 到 Z 是单独的属性，它们的数量和类型可能会根据“MessageType”方法而有所不同。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T20:50:27.167

你问题的前半部分听起来像继承是一个完美的选择。但是，在阅读了您需要获取常见和单独属性列表的信息后，这似乎不太合适。

最终，表示此信息的最佳方式取决于您打算如何处理它。

如果您想要一个返回两种信息类别的公共对象，键/值解决方案似乎是合理的，至少对于单个属性而言。类似于以下内容：

```
class Message
{
    CommonProperties Common { get; set; }
    // Property Name / Property Value.  Alternatively use a Tuple to also hold the type if needed.
    Dictionary<string, object> IndividualProperties { get; set; }
} 
```

如果您提供有关您希望如何进一步使用信息的更多详细*信息*，我们可以尝试提供更准确的指导。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T21:09:40.130

当您说“我不希望它为每种消息类型返回不同的对象”时，您是指运行时类型还是设计时类型？如果您的意思是设计时类型，那么这不是问题，只需让该方法返回所有消息的基础对象。

如果您确实想在运行时只返回一种类型，那么 Eric J. 的答案对此有很好的解决方案。

如果您不喜欢使用各种字典的想法，并且您使用的是 .NET 4.0。你可以走动态路线。您仍将使用字典，但访问消息对象的代码看起来不像字典。

```
public class Message : System.Dynamic.DynamicObject
{
    public Message(object data) { //parse data into defined properties and dictionary}

    public string MessageType {get;set;}
    //other "common" properties

    public override bool TryGetMember(GetMemberBinder binder, out object result)
    {
       //binder.Name will hold the property name that is being accessed
       //if the value exists in the message, set it to the result parameter
       //and return true, else set it to null and return false (which will cause an Exception)
    }

} 
```

调用代码：

```
dynamic message = new Message(data);
var type = message.MessageType;
var customProperty = message.Length; 
```

调用`message.MessageType`将简单地访问定义的属性。调用`Message.Length`将调用 TryGetMember 方法，因为没有定义该名称的属性。

# eclipse - Egit：通过 SSH 克隆存储库

> ID：10921986
> 
> 赞同：1
> 
> 时间：2012-06-06T20:44:55.847
> 
> 标签：eclipse, git, egit, git-clone

我正在尝试使用 EGit 通过 SSH 克隆远程存储库。

通过将 http.sslverify 设置为 false 并打开远程连接超时，我取得了一些进展。

现在克隆通过“解决增量”取得了进展，但随后 Eclipse 挂起一个完整的“加载”栏。栏上没有标签，也没有明显的方法可以在不强制退出 Eclipse 的情况下取消操作。

我正在运行 Eclipse 3.7.0 和 Mac OS 10.5.8。

有任何想法吗？我不知道该怎么做，因为我没有错误消息——只是没有进展。

（顺便说一句，我最初将此作为“答案”发布在另一个线程中。我的帖子已被删除。我为违反礼仪表示歉意，只能说我是新来的。我有点困惑我没有收到我的帖子已被删除的任何通知；我不得不再次搜索以找到该主题并向下滚动以查看该消息。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T22:15:57.590

彼得，只是好奇你在哪里托管你的存储库？如果您遇到超时问题，则主机可能有更多问题。

您是否尝试过从命令行运行 git clone 并将 EGit 仅用于“普通”任务？这并不理想，但是能够从命令行执行通常可以省去很多麻烦，如果失败，错误消息会非常清楚地说明原因。

我已经使用 EGit 一段时间了，但又回到只是打开一个终端并做神圣不可侵犯的事情

*   git 提交 -a
*   git fetch origin/master （或任何你的分支）
*   git 合并
*   git 推送

EGit 往往会因为奇怪的原因而失败。当与 Github 一起使用时，将其设置为使用 SSH 密钥成为一场噩梦。

# c# - c# winforms - 如何使 DataGridViewRow UnSelectable？

> ID：10921987
> 
> 赞同：1
> 
> 时间：2012-06-06T20:45:03.433
> 
> 标签：c#, winforms, datagridview

有没有办法阻止用户选择特定 dgvRow 中的单元格。
行是只读的，但仍然 - 可选择的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T20:56:15.290

您可以添加一个自定义委托，以便在更改选择时取消选择相关单元格。

```
DataGridView1.SelectionChanged += new EventHandler(DataGridView1_SelectionChanged);
private void DataGridView1_SelectionChanged(object sender, EventArgs e){
    List<DataGridViewCell> toBeRemoved = new List<DataGridViewCell>();
    foreach(DataGridViewCell selectedCell in DataGridView1.SelectedCells){
        if (isCellUnSelectable(selectedCell))
            toBeRemoved.Add(selectedCell);
    }
    foreach(DataGridViewCell cell in toBeRemoved){
        cell.Selected = false;
    }
} 
```

# java - 无法处理将csv文件转换为android中的数组

> ID：10921988
> 
> 赞同：-1
> 
> 时间：2012-06-06T20:45:04.550
> 
> 标签：java, android, csv

我对 android 和 JAVA 非常陌生，我正在尝试自己学习编写 android 应用程序。当我试图从 csv 文件中读取值并将它们绘制出来时，我遇到了一个问题。更具体地说，我试图修改 Androidplot 示例。

原始的 Androidplot 示例有效，而我修改的示例无法正常工作...我试图找到问题，但失败失败失败...每次我尝试调试代码时，ActivityThread.java 都会弹出，并且有一个小箭头指向以下代码：

```
catch (Exception e) {
        if (!mInstrumentation.onException(activity, e)) {
            throw new RuntimeException(
                "Unable to start activity " + component
                + ": " + e.toString(), e);
        }
    } 
```

谁能告诉我真正的问题是什么？任何帮助将不胜感激 =)

以下是我修改后的代码：

```
package edu.ius.rwisman.AndroidPlotExample;

import android.app.Activity;  

import android.graphics.Color;
import android.os.Bundle;
import com.androidplot.xy.SimpleXYSeries;
import com.androidplot.series.XYSeries;
import com.androidplot.xy.*;
import java.io.BufferedReader;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;
import java.text.DecimalFormat;
import java.util.Arrays;

public class AndroidPlotExampleActivity extends Activity
{

private XYPlot mySimpleXYPlot;

@SuppressWarnings("null")
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // Initialize our XYPlot reference:
    mySimpleXYPlot = (XYPlot) findViewById(R.id.mySimpleXYPlot);
    Number[] series1Numbers = null;
    Number[] series2Numbers = null;
    int row = 0;
    // Create two arrays of y-values to plot:
    try {

        File file = new File("/home/hanrui/workspace/table.csv");
        BufferedReader reader = new BufferedReader(new FileReader(file));
        reader.readLine();
        String line = null;
        while((line=reader.readLine())!=null&&row<24){
            String item[] = line.split(",");

            String last = item[item.length-1];
            int value = Integer.parseInt(last);
            series1Numbers[row] = value;
            series2Numbers[row] = value;
            row++;
        }
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    // Turn the above arrays into XYSeries:
    XYSeries series1 = new SimpleXYSeries(
            Arrays.asList(series1Numbers),          // SimpleXYSeries takes a List so turn our array into a List
            SimpleXYSeries.ArrayFormat.Y_VALS_ONLY, // Y_VALS_ONLY means use the element index as the x value
            "Series1");                             // Set the display title of the series

    // Same as above, for series2
    XYSeries series2 = new SimpleXYSeries(Arrays.asList(series2Numbers), SimpleXYSeries.ArrayFormat.Y_VALS_ONLY, 
            "Series2");

    // Create a formatter to use for drawing a series using LineAndPointRenderer:
    LineAndPointFormatter series1Format = new LineAndPointFormatter(
            Color.rgb(0, 200, 0),                   // line color
            Color.rgb(0, 100, 0),                   // point color
            Color.rgb(150, 190, 150));              // fill color (optional)

    // Add series1 to the xyplot:
    mySimpleXYPlot.addSeries(series1, series1Format);

    // Same as above, with series2:
    mySimpleXYPlot.addSeries(series2, new LineAndPointFormatter(Color.rgb(0, 0, 200), Color.rgb(0, 0, 100),
            Color.rgb(150, 150, 190)));

    // Reduce the number of range labels
    mySimpleXYPlot.setTicksPerRangeLabel(3);

    // By default, AndroidPlot displays developer guides to aid in laying out your plot.
    // To get rid of them call disableAllMarkup():
    mySimpleXYPlot.disableAllMarkup();
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T20:51:32.217

运行 Android 应用程序时，它会在手机（模拟器或实际设备本身）上运行，因此很可能找不到此文件：

`File file = new File("/home/hanrui/workspace/table.csv");`

在你的 try-catch-statement 之后，检查是否`series1Numbers`等于 null。

**编辑：**

我注意到了一些事情，你永远不会初始化你的 Number 数组：

`Number[] series1Numbers = null;`.

Java 不是 PHP，在 PHP 中将直接创建数组，但在 Java 中并非如此。您需要调用`series1Numbers = new Number[10];`where`10`是数组的大小。我建议改用 ArrayList，因为它可以具有动态大小。

# ruby-on-rails - Rails：设计 - user_signed_in 无法识别

> ID：10921990
> 
> 赞同：1
> 
> 时间：2012-06-06T20:45:24.607
> 
> 标签：ruby-on-rails, devise

我正在使用带有注册模型/控制器/视图（进行新注册）和用户模型进行编辑/更新/显示的设计。

一切似乎都运行良好（注册、确认等）。当我尝试在我的应用程序中使用 user_signed 方法时遇到问题。我收到以下错误消息：

```
undefined local variable or method `user_signed_in' 
```

我在 StackOverflow 上研究了这个问题，并应用了我从几个问答环节中学到的知识，这就是我所做的：

在我的用户模型（user.rb）中，我有以下内容：

```
devise :database_authenticatable 
```

在我的用户控制器中，我添加了以下内容：

```
before_filter :authenticate_user! 
```

但我仍然收到错误消息。我还尝试将 before_filter 添加到 Registration 控制器和 Application 控制器，但我仍然收到错误消息。

有任何想法吗？

# 解决问题

如果 current_user，我正在使用 some_action？

作为一种解决方法，但我仍然有兴趣弄清楚是否有人对原始问题有答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T04:17:02.063

Try adding a question mark

```
user_signed_in? 
```

# shopify - Shopify 登陆站点订单属性

> ID：10921991
> 
> 赞同：4
> 
> 时间：2012-06-06T20:45:25.470
> 
> 标签：shopify

我有一个客户要求提供有关`landing_site`Order 资源的属性如何工作的非常详细的信息。这里的[文档](http://wiki.shopify.com/Order#landing_site)说这是设置为有人来商店时访问的第一页。

这是有多执着？例如，如果有人访问一家商店*（假设是通过主页进入），*那么我假设`landing_site`将是“/”。假设访问者在一两天后回来*（这次是通过带有 ref 参数的链接）*并访问产品页面。属性是否`landing_site`更新为“/products/sample-product?ref=mytoken”？

如果不是，这个值会持续多久？有没有办法重置它？如果 Shopify 有人可以解释这一点，我认为这将是许多应用程序开发人员会参考的内容。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T00:20:04.633

## 会议

如果客户从未创建购物车，则使用 cookie 来保存对这些数据的引用。`curl -I snowdevil.myshopify.com`可用于查看这些 cookie 的持久性：

`Set-Cookie: _session_id=...; path=/; HttpOnly`

此标头值表明正在存储会话 cookie，这意味着当用户关闭浏览器时它将过期。它还表示只存储了一个 session_id，因此会话数据本身存储在服务器上。

数据不会无限期地存储在服务器上，因为没有办法知道用户何时关闭浏览器。目前，会话数据本身将在 1 天后过期。

## 大车

当产品添加到用户的购物车时，这个相同的值也将与任何购物车数据一起保留。因此，如果您在将产品添加到购物车后查看您购物的 cookie，您会看到有一个单独的“购物车”cookie，该 cookie 目前在 2 周后过期。即使在用户关闭浏览器后，这些数据也会保留这么长时间，但如果用户删除他们的 cookie，则不会保留。

## 免责声明

这里要注意的一个关键词是“当前”，因为据我所知，Shopify 并未承诺将这些数据保留一段时间。

# ruby - Rails current_path 助手？

> ID：10921999
> 
> 赞同：18
> 
> 时间：2012-06-06T20:45:38.870
> 
> 标签：ruby, ruby-on-rails-3

我正在使用具有以下路由条件的 Rails 3.2 应用程序：

```
scope "(:locale)", locale: /de|en/ do
  resources :categories, only: [:index, :show]
  get "newest/index", as: :newest
end 
```

我有一个具有以下功能的控制器：

```
class LocaleController < ApplicationController
  def set
    session[:locale_override] = params[:locale]
    redirect_to params[:return_to]
  end
end 
```

我在模板中将其与类似的东西一起使用：

```
 = link_to set_locale_path(locale: :de, return_to: current_path(locale: :de)) do
   = image_tag 'de.png', style: 'vertical-align: middle'
     = t('.languages.german') 
```

我想知道为什么 Rails 中不存在诸如 之类的助手`current_path`，它能够推断出我们当前正在使用的路线，并重新路由到它包括新选项。

我遇到的问题是使用类似的东西`redirect_to :back`，将用户推回`/en/........`（或`/de/...`），这会导致糟糕的体验。

到目前为止，我将语言环境存储在会话中，但这不适用于 Google 和其他索引服务。

我敢肯定，如果我投入了足够的时间，我可以找到一些足够聪明的东西来检测匹配的路线，并换掉语言环境部分，但我觉得这将是一个 hack。

我对所有想法持开放态度，但这个[SO question](https://stackoverflow.com/questions/10594155/rails-redirect-to-current-path-but-different-subdomain)建议只使用`sub()`; 不幸的是，像语言环境短代码这样短且频繁出现的字符串，可能不太明智。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-14T13:19:45.777

如果您使用`:locale`范围，您可以使用`url_for`as `current_path`：

```
# Given your page is /en/category/newest with :locale set to 'en' by scope

url_for(:locale => :en) # => /en/category/newest
url_for(:locale => :de) # => /de/kategorie/neueste 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-06-19T10:22:41.267

如果有人看到这里，你可以使用`request.fullpath`which 应该在域名之后给你所有，因此，将包括语言环境。