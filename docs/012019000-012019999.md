# StackOverflow 问答 12019000-12019999

# html - 按钮元素内的 div 忽略 CSS margin-top 设置

> ID：12019002
> 
> 赞同：1
> 
> 时间：2012-08-18T13:33:47.800
> 
> 标签：html, css

我正在寻找使用标签创建“滑动门”效果`button`（因为它用于表单的提交按钮），但它不起作用。检查这个小提琴：http: [//jsfiddle.net/gf8bV/14/](http://jsfiddle.net/gf8bV/14/)

在小提琴中，您会看到，使用**相同的代码**，它适用于 div 但不适用于按钮。这是为什么？有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T13:52:44.960

我不确定为什么边距在按钮内部不起作用，但是如果您不想添加额外的标记，则可以通过将按钮设置为位置而不是边距来实现相同的效果：相对，div到绝对，然后在悬停时将它们都向上移动。

[http://jsfiddle.net/moopet/gdyys/1/](http://jsfiddle.net/moopet/gdyys/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T13:43:04.830

好的，我终于解决了将按钮内的所有内容包装在另一个 div 中的问题：

[http://jsfiddle.net/gf8bV/21/](http://jsfiddle.net/gf8bV/21/)

# ajax - 使应用程序完全支持 AJAX 有什么缺点吗？

> ID：12019003
> 
> 赞同：0
> 
> 时间：2012-08-18T13:33:52.040
> 
> 标签：ajax, architecture

我正在处理行政申请。

我正在考虑让它完全支持 AJAX。基本上，只有一个 URL，所有内容都将通过 AJAX 加载。

这种方法有什么缺点吗？我会因为任何原因错过整页重新加载吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T13:36:41.447

是的

*   禁用javascript的用户无法使用它

*   无法为特定页面添加书签

*   搜索引擎可能会发现很难为您的网站编制索引

但是，有一些方法可以减轻/消除这些缺点，例如。优雅降级，支持浏览器历史 API（pushState 等）

我的首选方法是在没有 javascript 的情况下构建一个站点，然后添加 javascript 支持，以便链接将使用 javascript 重新加载页面的一部分，然后使用 pushState 和 co。更改历史记录，以便浏览器后退按钮和书签再次工作。

在仅 HTML 和服务器端的网站之上构建 AJAX 的另一个优点是该网站已经可以运行，因此您可以逐渐添加 AJAX，即使您还没有完全编写所有 AJAX 功能，该网站也可以继续运行。

* * *

如果您使用的是 Ruby on Rails 框架，您可以尝试使用我的 gem [https://github.com/ronalchn/ajax_pagination](https://github.com/ronalchn/ajax_pagination)。它可以帮助您构建具有优雅降级的 AJAX 支持。

# html - HTML/CSS div 结构

> ID：12019017
> 
> 赞同：3
> 
> 时间：2012-08-18T13:35:10.667
> 
> 标签：html, css, structure

我正在为客户制作一个由其他人设计的网站。该网站本身相对简单，但我似乎无法专注于一件特定的事情。请看下面的截图：

[http://cl.ly/image/0M090g150S28](http://cl.ly/image/0M090g150S28)

如果我希望这两个绿色背景（顶部和底部）在调整大小时与内容（即 960 像素 - 边距 0 自动）保持对齐，但在将窗口扩展到，比方说，3000px？

永无止境的背景很容易。固定到居中 div 的触点的背景很容易。

但两者结合？请在这里帮助我，我已经为此烦恼了一段时间。这可能是超级简单..？！

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T13:44:34.510

我不确定这一点，但你可能会做一些我曾经在雅虎样式表中看到的事情。为顶部和底部创建图像。然后为顶部的带有背景定位的html标签定义一个css规则背景图像，也对具有相同背景定位的底部图像执行相同的操作，这次将其附加到body标签。希望它有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T14:13:55.380

这是一个工作示例：[http ://digitaldemo.net/stack-test.html](http://digitaldemo.net/stack-test.html)

这是CSS：

```
htmo, body  { width:100% ;
height:100% ;
}

body    { background:#ececeb ;
margin:0 ;
padding:30px 0 ;
position:relative ;
font-family:arial,helvetica,sans-serif ;
font-size:16px ;
}

.top-left   { disply:block ;
width:395px ;
height:250px ;
background:url("top-left.png") no-repeat ;
position:absolute ;
top:0 ;
left:0 ;
z-index:-1 ;
}

.bottom-right { display:block ;
width:395px ;
height:250px ;
background:url("bottom-right.png") no-repeat ;
position:absolute ;
bottom:0 ;
right:0 ;
z-index:-1 ;
}

#container  { width:1000px ;
margin:auto ;
margin-bottom:20px !important ;
padding:20px ;
position:relative ;
top:0px ;
background:#ffffff ;
border:1px solid black ;
z-index:99999px ;
overflow:hidden ;
} 
```

和 HTML：

```
<div id="container">

(your main layout and content go here)

</div>

<div class="top-left"></div> // this is the top left teal corner

<div class="bottom-right"></div> // this is the bottom right teal corner 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T14:46:35.463

在你的内容上使用两个巨大的伪元素怎么样，在它们上面设置背景并`overflow: hidden`在正文上使用。

[**演示**](http://dabblet.com/gist/3387068)

HTML：

```
<section class="main"></section> 
```

CSS：

```
html, body, .main { height: 100%; }
body {
    margin: 0;
    overflow: hidden;
}
.main {
    width: 490px;
    margin: 0 auto;
    position: relative;
    background: rgba(192, 186, 176, .7);
}
.main:before, .main:after {
    width: 1500px;
    height: 1000px;
    position: absolute;
    content: '';
}
.main:before {
    right: 60%;
    top: 0;
    background: linear-gradient(-30deg, transparent 54%, teal 54%);
    background-repeat: no-repeat;
}
.main:after {
    left: 60%;
    bottom: 0;
    background: linear-gradient(-30deg, teal 46%, transparent 46%);
    background-repeat: no-repeat;
} 
```

我使用了 CSS 渐变，这在 IE9 和 IE8 中不起作用，但您可以简单地使用图像。

**编辑**：我刚刚有了另一个想法——你可以只使用边框而不是渐变，这样它就可以在 IE9 和 IE8 中使用。只需将 CSS 替换为伪元素：

[**演示**](http://dabblet.com/gist/3387661)

```
.main:before, .main:after {
    border: solid 500px teal;
    border-width: 500px 750px;
    position: absolute;
    content: '';
}
.main:before {
    right: 60%;
    top: 0;
    border-bottom-color: transparent;
    border-right-color: transparent;
    background-repeat: no-repeat;
}
.main:after {
    left: 60%;
    bottom: 0;
    border-top-color: transparent;
    border-left-color: transparent;
    background-repeat: no-repeat;
} 
```

# objective-c - 如何在 View Controller 窗口中加载图像？

> ID：12019018
> 
> 赞同：0
> 
> 时间：2012-08-18T13:35:12.883
> 
> 标签：objective-c, ios, graphics, uikit

*（注意：当我第一次开始我的项目时，我选择使用 StoryBoards，所以我似乎无权访问任何 .nib 文件，以防我在这里要求的内容需要这种访问权限..）*

我想创建一个方法，该方法采用图像和必要的坐标参数，并在调用该方法时将图像加载到当前视图控制器窗口上的特定位置。

我显然没有要求确切的方法，因为目前我什至无法加载一张图片！:)

我之前没有在 iOS 上尝试过图形，但我浏览了文档，这很令人困惑，所以我决定要求澄清一些可能对我和其他人有所帮助的问题。

显然，我需要创建一个 ImageView 对象来保存我想要的图像。但是，文档中没有提及如何实际和最终将图像***加载***到窗口上。此外，没有关于**superView 是什么的**实际解释。SuperView是***我将要创建的******第一个***UIView 对象，还是系统为我创建的并且我可以通过调用来访问它？我是否需要将我正在创建的每个 UIView 对象作为子类添加到第一个 SuperView 中？通过子类化视图，我是否定义了它们在屏幕上相互重叠的方式？*`self.view`*

 *这是我正在使用的代码，用于测试目的，尝试在屏幕上加载一张图像：

```
#import "TestViewController.h"

@interface TestViewController ()
{
    UIView *myView;            
    UIImage *myImage;
    UIImageView *myImageView;
}

@end

@implementation TestViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];

    if (self) 
    {
        // Custom initialization
    }

    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    // defining the size of my UIView..
    CGRect  viewRect = CGRectMake(10, 10, 100, 100);

    // creating the UIView object
    myView = [[UIView alloc] initWithFrame:viewRect];

    // loading my image (a red square) into a UIImage object..
    myImage = [[UIImage alloc] initWithContentsOfFile:(@"userCell.png")];

    // creating a UIImageView object that will hold my myImage..
    myImageView = [[UIImageView alloc] initWithImage:myImage];

    // trying to make my Image load to the screen by adding the object that is 
    // encapsulating it to the UIView I created..

    [myView addSubview:myImageView];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

@end 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T13:41:09.557

这边走：

```
CGRect  viewRect = CGRectMake(10, 10, 100, 100);
myImageView = [[UIImageView alloc] initWithImage:myImage];
[myImageView setFrame:viewRect];
[self.view addSubview:myImageView]; 
```

基本上，您需要定义将显示子视图（在您的情况下为 UIImageView）的框架，然后将此视图添加到视图控制器的主视图（这就是 self.view）。无需将 ImageView 包装在 UIView 中，因为 UIImageView 本身就是 UIView。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T13:45:11.037

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    // defining the size of my UIView..
    CGRect  viewRect = CGRectMake(10, 10, 100, 100);

    // creating the UIView object
    myView = [[UIView alloc] initWithFrame:viewRect];

    // loading my image into a UIImage object..
    myImage = [UIImage imageNamed:@"userCell.png"];

    // creating a UIImageView object that will hold my myImage..
    myImageView = [[UIImageView alloc] initWithImage:myImage];

    // trying to make my Image load to the screen by adding the object that is 
    // encapsulating it to the UIView I created..

    [myView addSubview:myImageView];
    [self.view addSubView:myView]; 
```*

# css - 在 div 元素上使用 -moz-transform

> ID：12019020
> 
> 赞同：1
> 
> 时间：2012-08-18T13:36:11.043
> 
> 标签：css

我正在尝试使`<div id = "sun">`包含太阳的 png 图像的标签旋转 360 度，所以外观是太阳是动画的并且四处移动。似乎仅旋转属性是不够的。这是我将其应用于的网页：

[http://www.manchestergardeningservices.co.uk/](http://www.manchestergardeningservices.co.uk/)

这是我想要达到的效果的网页：

[http://outsideapp.com/](http://outsideapp.com/)

这是我在元素样式中应用的[transform CSS 属性。](https://developer.mozilla.org/en-US/docs/CSS/transform?redirectlocale=en-US&redirectslug=CSS/-moz-transform)请问我是否以错误的方式应用了该属性？我的第二个问题 - 这个 CSS 属性是否有 webkit 版本？

```
#sun {  
    -moz-transform: rotate(360deg);
    float: left;
    height: 350px;
    margin-left: -100px;
    margin-right: 0;
    margin-top: -185px;
    width: 350px;
    z-index: 100;  
    display: inline;       
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T13:49:53.103

将对象旋转 360 度会产生相同的对象。这就是为什么你看不到任何变化。您可以尝试其他学位，例如`180deg`。仅当您`transition`在 transform 属性上应用 css 时，您可能会看到`rotate(360deg)`.

这个属性有一个 webkit 版本，只是`-webkit-transform`. 您还应该添加不带任何供应商前缀的属性，因为对前缀版本的支持可能会在某一天被删除。

**编辑：**连续旋转：

```
@-moz-keyframes rotate {
 from {
  -moz-transform: rotate(0deg);
 }
 to {
  -moz-transform: rotate(360deg);
 }
}
@-webkit-keyframes rotate {
 from {
  -webkit-transform: rotate(0deg);
 }
 to {
  -webkit-transform: rotate(360deg);
 }
}
@keyframes rotate {
 from {
  transform: rotate(0deg);
 }
 to {
  transform: rotate(360deg);
 }
}
#sun {
 -moz-animation: rotate 5s linear infinite;
 -webkit-animation: rotate 5s linear infinite;
 animation: rotate 5s linear infinite;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T14:05:37.140

我认为您希望对其进行动画处理，而不是简单地对其进行转换。变换不会是动画，它只会显示最终结果。

这是使用 CSS 的关键帧动画的概述：http: [//css-tricks.com/snippets/css/webkit-keyframe-animation-syntax/](http://css-tricks.com/snippets/css/webkit-keyframe-animation-syntax/)

这是一个快速模拟的版本来说明如何将动画应用于 div：http: [//jsfiddle.net/donovanh/rhEnY/](http://jsfiddle.net/donovanh/rhEnY/)

## 注意：前缀

^ 以上包括主要浏览器的前缀以及删除前缀时的无前缀版本。重要的是不要依赖特定的前缀（例如 -moz），因为它们仅作为临时措施，直到 CSS 得到适当支持并且前缀被删除。

如果 JSFiddle 删除了这个例子，下面是 CSS：

```
#sun {
    background-color: yellow;
    border: 5px solid black;
    border-radius: 20px;
    width:50px;
    height:50px;
    margin:20px;
     -webkit-animation: rotateAnimation 5s infinite linear;
     -moz-animation:    rotateAnimation 5s infinite linear;
     -ms-animation:     rotateAnimation 5s infinite linear;
     -o-animation:      rotateAnimation 5s infinite linear;
     animation:         rotateAnimation 5s infinite linear;
}

@-webkit-keyframes rotateAnimation {
    0%   { -webkit-transform:rotate(0);}
    100%   { -webkit-transform:rotate(360deg);}
}
@-moz-keyframes rotateAnimation {
    0%   { -moz-transform:rotate(0);}
    100%   { -moz-transform:rotate(360deg);}
}
@-ms-keyframes rotateAnimation {
    0%   { -ms-transform:rotate(0);}
    100%   { -ms-transform:rotate(360deg);}
}
@-o-keyframes rotateAnimation {
    0%   { -o-transform:rotate(0);}
    100%   { -o-transform:rotate(360deg);}
}
@keyframes rotateAnimation {
    0%   { transform:rotate(0);}
    100%   { transform:rotate(360deg);}
} 
```

# c++ - 带有 boost::bind 的模板？

> ID：12019021
> 
> 赞同：0
> 
> 时间：2012-08-18T13:36:12.097
> 
> 标签：c++, boost, bind

我正在寻找类似于以下的功能：

```
template<typename T, boost::function<T* (HandleId)> resolveFunc>
class Handle
{
public:
   T* resolve() const
   {
      return resolveFunc(_handleId);
   }

private:
   HandleId _handleId;
}; 
```

我似乎找不到这样做的方法。重要的是 sizeof(Handle) == sizeof(HandleId)，所以我不能将函数存储为成员..

任何人都可以帮忙吗？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T13:51:45.260

这完全取决于`resolveFunc`.

如果只有 5 个可能的函数，那么您可以将其编码为 5 个普通函数，问题就解决了。

如果有更多信息，那么这是尝试在编译时对运行时信息进行编码的经典案例；那注定要失败。解决技术问题的一种方法是使用静态映射，从句柄映射到指针。但是：在这种情况下，真正的问题很可能出在设计层面，所以做技术是不明智的。即使它在技术上有效。

# .htaccess - 如何使用 htaccess 编写 seo 友好的 url？

> ID：12019022
> 
> 赞同：1
> 
> 时间：2012-08-18T13:36:16.170
> 
> 标签：.htaccess, seo, clean-urls

我想为我的网站创建 seo 友好的 url。我想从 .htaccess 文件创建它。我对 .htaccess 知之甚少

我有以下网址 [http://www.testsite.com/index.php?dispatch=flowers_search.flowers_search_result&city=Pune&type=Carnation](http://www.testsite.com/index.php?dispatch=flowers_search.flowers_search_result&city=Pune&type=Carnation)

我需要显示如下网址， [http://www.testsite.com/flowers/Pune/Carnation](http://www.testsite.com/flowers/Pune/Carnation)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T13:37:47.673

[http://www.generateit.net/mod-rewrite/](http://www.generateit.net/mod-rewrite/)

导致：

```
RewriteEngine On
RewriteRule ^([^/]*)/([^/]*)$ /index.php?dispatch=flowers_search.flowers_search_result&city=$1&type=$2 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T13:21:59.427

***Just Try With the following :***

```
RewriteEngine On
RewriteRule ^([^/]*)/([^/]*)/([^/]*)$ /index.php?dispatch=$1&city=$2&type=$3 [L] 
```

I think this may help you to resolve your problem.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T13:55:02.663

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule . /index.php?args=%{REQUEST_URI} [L]
</IfModule> 
```

这会将您的查询字符串放入一个变量中，您可以在页面上将其用作`$_GET['args']`. 所以你打电话：

`http://www.testsite.com/flowers/Pune/Carnation`

但你真的在显示页面：

`http://www.testsite.com/?args=flowers/Pune/Carnation`

然后，您可以根据需要获取`$_GET['args']`并解析它，例如：

```
$args = explode('/', $_GET['args']);
array_shift($args); // this take an empty value off of the first item in the array
$dispatch = $args[0];
$city = $args[1];
$type = $args[2]; 
```

等等。

# calendar - WinRT 中的日历

> ID：12019025
> 
> 赞同：2
> 
> 时间：2012-08-18T13:37:00.863
> 
> 标签：calendar, windows-runtime

我正在将我的库移植到 WinRT，它依赖于 System.Globalization.Calendar 类及其派生类，如 GregorianCalendar 和 HijriCalendar 等。虽然这些类都在 Silverlight/WPF 中，但我只能在 WinRT 中找到基本 Calendar 类. 我已经尝试过 System.Globalization 和 Windows.Globalization 命名空间，并且在 WinRT 版本中似乎都缩小了。

派生日历是否完全从 WinRT 中删除，我们应该如何获得特定于文化的日历？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T22:22:01.257

是的，派生日历已从 WinRT 中删除。但是所有（或可能是大部分）功能都可以通过 Windows.Globalisation.Calendar 获得。它包括不同类型日历之间的日期转换、日期字符串表示等。

# c# - asp.net treeview如何检查任何级别的已检查子节点的数量

> ID：12019027
> 
> 赞同：-1
> 
> 时间：2012-08-18T13:37:37.470
> 
> 标签：c#, asp.net

我需要在任何特定级别的树视图中查找已检查子节点的数量。将检查的子节点的数量与每个父节点的总节点数进行比较。如果检查的子节点的数量少于该特定父节点的子节点总数，则这将被视为有限，否则将被完全检查。我可以使用 parent.childnodes.count 属性找到每个父节点的子节点总数。我无法找到获取此号码的方法。

问候，

伊姆东多

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T14:19:00.110

递归 lambda 函数`FlattenTree`应该可以解决问题。

```
Func<TreeNodeCollection, IEnumerable<TreeNode>> FlattenTree = null;
FlattenTree = coll => coll.Cast<TreeNode>()
                          .Concat(coll.Cast<TreeNode>()
                                      .SelectMany(x => FlattenTree(x.ChildNodes))
                           );

var nodesCount = FlattenTree(treeView.Nodes).Count();
var checkedNodesCount = FlattenTree(treeView.Nodes).Count(x=>x.Checked); 
```

其他 Linq2Object 函数也是可能的

```
var checkedLeafNodes = FlattenTree(treeView.Nodes)
                       .Where(x => x.ChildNodes.Count == 0 && x.Checked==true)
                       .ToList(); 
```

# javascript - 可滚动的 div — 添加内容时将其固定（或锚定）到底部

> ID：12019030
> 
> 赞同：0
> 
> 时间：2012-08-18T13:38:05.077
> 
> 标签：javascript, css, html

基本上我有一个可滚动的区域，一个容器 div，有很多固定高度的项目（比如 50 像素）。

添加新内容时，div 的高度会逐渐增加（即新内容的动画使其高度从零开始增加。所有这些都是 CSS 过渡。

现在有一种方法可以将可滚动 div '锚定'到底部，以便可滚动 div 中的内容区域向上而不是向下扩展。

我更喜欢不使用`setInterval()`.

* * *

回复下面的评论。

来源位于[Download-To-Dropbox/src](https://github.com/GotEmB/Download-To-Dropbox/tree/master/src)（它们位于 Coffee 和 Stylus 中）。

尝试访问[http://dtd.heroku.com](http://dtd.heroku.com)（那是 Live Copy）。您会看到目录在右侧展开，将父目录推向左侧（基本上就像 Finder – Mac 中的列视图）。

这里的问题是，一旦您钻入多个配音目录并出现水平滚动条，打开的新目录就会隐藏在屏幕右侧。我希望它在整个过渡期间都可见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T13:41:50.183

假设您`div`的 ID 是`scrolldiv`。这是向 中添加内容的基本功能`div`：

```
var dv = document.getElementById("scrolldiv");
dv.innerHTML += "<div class = 'entry' style = 'height: 0px;'>New Entry</div>";
animateAdd(1000); //animation lasts for 1000 ms (1 s) 
```

这是函数的原型`animateAdd`：

```
function animateAdd(duration) {
    var stepDur = duration / 50;
    var curHeight = 0;
    var dv = document.getElementById("scrolldiv");
    var lstDv = dv.getElementsByTagName("div");
    var newDv = lstDv[lstDv.length - 1];
    function doAnim() {
        if(curHeight >= 50) {
             //we're done!
             return;
        }
        curHeight ++;
        dv.scrollTop ++;
        newDv.style.height = curHeight + "px";
        setTimeout(doAnim, stepDur);
    }
    doAnim();
} 
```

演示：[小链接](http://goo.gl/7meOi)。

希望对您有所帮助！

# objective-c - 覆盖方法中的Objective-C顶部或底部超级调用

> ID：12019031
> 
> 赞同：4
> 
> 时间：2012-08-18T13:38:08.517
> 
> 标签：objective-c, ios

在 Objective-C 中，我应该在方法的顶部还是底部调用超级视图覆盖方法？有什么不同？

**例如：**

在方法的顶部：

```
 - (void)viewDidLoad {
// HERE
     [super viewDidLoad];

     //Init the table view
     UITableView *aTableView = [[UITableView alloc] initWithFrame:CGRectMake(0, 0, 100, 400)];
     aTableView.delegate = self;
     aTableView.dataSource = self;
     aTableView.backgroundColor = [UIColor clearColor];

     self.tableView = aTableView;
     [aTableView release];
 } 
```

或者在方法的底部：

```
- (void)viewDidLoad {

    //Init the table view
    UITableView *aTableView = [[UITableView alloc] initWithFrame:CGRectMake(0, 0, 100, 400)];
    aTableView.delegate = self;
    aTableView.dataSource = self;
    aTableView.backgroundColor = [UIColor clearColor];

    self.tableView = aTableView;
    [aTableView release];

// HERE
    [super viewDidLoad];
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T13:40:49.700

在视图生命周期的情况下，您应该首先在方法中调用它，因为您希望超类在您执行所需操作之前完成设置。

尽管在 dealloc 的情况下，您应该在方法结束时调用 super，因为您想在超类清理之前进行清理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T13:41:44.877

据我了解，您将其放置在哪里取决于您是否需要在超类方法中完成某些事情，然后再执行您需要在方法中执行的操作。因此，如果有任何工作需要先在 supermethod 中完成，则将 super 调用放在顶部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-12T19:43:56.153

要回答这个问题，您首先需要知道*为什么*要调用 super。这对于 UIKit 类并不总是很明显，因为您不能轻易地弄清楚这些方法在内部做什么。

然而，忽略这一点，超级调用的位置完全取决于超级类的实现。这里没有黄金法则。有时它应该放在顶部，有时应该放在底部，有时甚至可以在其他行之间调用它。

### 最佳

An example on when it should be placed in the top is if you were to override the `loadView` method of `UIViewController` to add some subviews to its view. In this case, the superclass implementation loads the actual view that you're supposed to place subviews on, so placing it in the top is the right way to go (or it won't work at all).

### Bottom

A pretty common case to place it in the bottom would be if you override `viewWillAppear:` of `UITableViewController`. UITableViewController internally calls `[self.tableView deselectRowAtIndexPath:animated:]` in this method to get the little effect of a row selection fading out when you return to the table view from another view. If you need to do something with the selected row before it's automatically deselect, you must place the super call in the bottom (or below the row where you access the selected indexPath).

# java - 构建功能类似于 UNIX 进程的 Java 独立应用程序的最佳方法是什么？

> ID：12019032
> 
> 赞同：-1
> 
> 时间：2012-08-18T13:38:16.317
> 
> 标签：java, unix, jersey, grizzly

我需要构建一个 Java 应用程序来像 UNIX (FreeBSD) 上的守护程序一样运行。该应用程序需要像任何 UNIX 进程一样启动。启动后，它坐在那里等待来自主主机/服务器的命令。命令通过 RESTful Web 服务调用馈送到此应用程序 - 因此它需要侦听特定端口的网络连接。同时，它需要通过传出http调用来访问外部主机/网站的资源。

编写此类应用程序的最佳方法是什么？我正在考虑编写一个独立的应用程序，包括 Grizzly 和 Jersey 库。这是正确的方法吗？有更好的方法吗？

（另外，我认为我不应该编写一个普通的 Web 应用程序——war 文件——部署在 GlassFish 或某种 Java 容器中。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T13:51:52.767

> 编写此类应用程序的最佳方法是什么？

没有单一的最佳方法。

> 我正在考虑编写一个独立的应用程序，包括 Grizzly 和 Jersey 库。这是正确的方法吗？

假设您遵循相关文档，它将起作用。

> 有更好的方法吗？

可能。

> （另外，我认为我不应该编写一个普通的 Web 应用程序——war 文件——部署在 GlassFish 或某种 Java 容器中。）

那是另一种方法。

另一种方法是使用像 Jetty 这样的轻量级容器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T14:12:25.627

如果您希望您的应用程序一直运行并接受 RESTful Web 服务调用，那么在我看来，您最好的选择是让一个普通的 Web 应用程序在某个 Web Web 服务器下运行，该服务器包含您的应用程序所需的所有方法（Tomcat、Glassfish ， ETC。）。

# javascript - 使用javascript检测上下滚动

> ID：12019033
> 
> 赞同：2
> 
> 时间：2012-08-18T13:38:31.243
> 
> 标签：javascript, jquery

```
<script type="text/javascript">
function scrollFunc(e) {
userScroll=true;
    if ( typeof scrollFunc.x == 'undefined' ) {
        scrollFunc.x=window.pageXOffset;
        scrollFunc.y=window.pageYOffset;
    }
    var diffX=scrollFunc.x-window.pageXOffset;
    var diffY=scrollFunc.y-window.pageYOffset;
if(userScroll)
{
if( diffY<0 ) {
         $(".myCar").animate({"top": "+=50px"},1000);// Scroll down
        alert('down');
        //$(".myCar").stop();
    } else if( diffY>0 ) {
        $(".myCar").animate({"top": "-=50px"},1000);

        alert('Up');// Scroll up
    } else {
        // First scroll event
    }
    userScroll=false;
}
else
{

}
    scrollFunc.x=window.pageXOffset;
    scrollFunc.y=window.pageYOffset;
}
window.onscroll=scrollFunc
</script> 
```

我正在尝试检测，向上和向下滚动，但是，它显示两者的警报消息，我的意思是，如果我向下或向上滚动，它显示两个警报消息。需要帮忙。！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T16:27:01.947

您的代码对我来说很好（在 Opera 和 Firefox 中测试）。但是，查看您的代码，我猜您希望`onscroll`每个滚动“动作”只触发一次事件，而不是多次触发。

如果这是您的意图，您可以使用[本文](http://james.padolsey.com/javascript/special-scroll-events-for-jquery/)`scrollstart`中描述/实现的自定义和`scrollstop`事件...

```
function animateCar(upDown) {
    $(".myCar").animate({"top": (upDown == 1) ? "+=50px" : "-=50px"}, 1000);
}

(function(){
    var lastScrollTop = 0;
    $(window).on("scrollstart", function(){
        lastScrollTop = $(this).scrollTop();
    });
    $(window).on("scrollstop", function(){
        animateCar(lastScrollTop - $(this).scrollTop() > 0 ? -1 : 1);
    });
})(); 
```

[**演示**（JSFiddle）](http://jsfiddle.net/Aletheios/hWmNj/)

如果您想保留代码的原始行为，可以使用 jQuery 重写它 - 也许它可以解决您遇到的错误：

```
$(window).scroll((function(){
    var lastScrollTop = 0;
    return function(){
        $(".myCar").animate({"top": (lastScrollTop - $(this).scrollTop() < 0) ? "+=50px" : "-=50px"}, 1000);
        lastScrollTop = $(this).scrollTop();
    };
})()); 
```

# matlab - 如何在特定行中随机化

> ID：12019034
> 
> 赞同：0
> 
> 时间：2012-08-18T13:38:31.137
> 
> 标签：matlab

我使用以下代码创建了一个矩阵：

```
row=4;
column=5;
pop=5;

for ii = 1:(row*pop)
    done = false;
    while ~done
        newRow = randi([0 2],column,1);
        done = (sum(newRow)<12)...
            && (~any(diff([0;find(newRow);column+1])>3));
    end
    result(:,ii) = newRow;
end
result = permute(reshape(result,column,row,pop), [2 1 3]); 
```

我得到一个矩阵结果`(4,5,5)`，然后我想在特定行中再次随机并弹出由约束引起的。

```
for ii=1:pop;
       while size(find(waktu_libur(:,:,ii)>20&waktu_libur(:,:,ii)<23),1)~=11, 
       %#condition that had to be fullfilled by matrix result.
       for bb=1:row;
           if find(waktu_libur(bb,:,ii)>20&waktu_libur(bb,:,ii)<23),
               continue;
           else
           done = false;
           while ~done
                newRow = randi([0 2],column,1);
                done = (sum(newRow)<12)...
                && (~any(diff([0;find(newRow);column+1])>3));
           end
           dummy = newRow;
           dummy= permute(reshape(dummy,jum_bag,1), [2 1]); %#this matrix which is used to replace
           result(bb:,ii)=dummy %#process replacing dummy to row in matrix result that still obey contraint.
           end %#end looping if
        end %# end looping for
     end %#end looping while
end %# end looping for 
```

我认为我的代码是正确的。但是运行后，它给出了这个错误：

```
??? Subscripted assignment dimension mismatch. 
```

有谁看到导致此错误的原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T18:06:23.603

修复这些问题后，代码运行良好：

1.  我换成`waktu_libur`了`result`。
2.  中缺少逗号`result(bb:,ii)`
3.  `jum_bag`中未定义`reshape(dummy,jum_bag,1)`。但是，由于`reshape()`要求输入和输出元素的数量相等，唯一的可能是设置`jum_bag = numel(dummy)`.

在这些更改之后，代码运行。不幸的是，我无法重现您的错误。

但是，我建议更改其他一些内容：

1.  `clear result`在您的第一个代码片段的开头添加一个。您不初始化输出变量，而是动态构建它（顺便说一下，这很**慢**）。然后你改变形状`result`。如果您重新执行代码，动态创建将不起作用，因为`result`内存中已经存在尺寸错误的。

2.  此代码`newRow = randi([0 2],column,1);`创建一个列向量。因此`reshape(dummy,jum_bag,1)`，不需要以下也创建列向量的 。

# amazon-s3 - Amazon S3：使用 s3cmd 自动删除某些文件

> ID：12019045
> 
> 赞同：0
> 
> 时间：2012-08-18T13:40:33.563
> 
> 标签：amazon-s3, backup, cloud, database-backups, s3cmd

我需要一个用于 s3cmd 的脚本，它为我的 Amazon S3 存储桶中的某些文件发送删除命令。我知道[这个方法](http://docs.amazonwebservices.com/AmazonS3/latest/UG/ObjectExpiration.html)是内置的，但它没有用。让我们看看为什么。

目前我有一个脚本，可以在每个午夜备份我的数据库，每个星期五和星期二（仍然在午夜）备份我的网站文件。

我正在寻找的脚本应该删除文件以便仅在存储桶上拥有：数据库和文件的每月 1 次备份（比方说，每个月的第一天）。并保留过去 7 天的所有备份（每天为 db 和周二和周五为文件，因此是“默认”行为）。

例如，如果我在 2012 年 6 月 17 日，情况应该是：

```
1st January 2012: db and files
1st february 2012: db and files
1st march 2912: db and files
1st april 2012: db and files
1st may 2012: db and files
10th june 2012: db
11th june 2012: db
12th june 2012: db and files
13th june 2012: db
14th june 2012: db
15th june 2012: db and files
16th june 2012: db 
```

然后在 2012 年 7 月 2 日，存储桶应包含：

```
1st of jan, feb, march, apr, may, june: both db and files
last 7 days: "default" backups untouched (files backup only on tuesday and friday and db every midnight). 
```

该脚本将自动执行我现在正在手动执行的操作（我每个月已经只有 1 个备份，因此我必须从 7 天前开始删除备份，然后再回到每月 1 日的最后一次备份）。

抱歉这个令人费解的问题，我希望它足够清楚。:D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T17:49:00.040

要配置 s3cmd 以便能够在您的脚本中运行，请运行：

```
s3cmd --configure 
```

从必须运行备份脚本或将生成的文件复制到该用户主目录的用户处运行此命令。

要使用 s3cmd 删除文件，请使用 del 命令，因此，在您的脚本中，您应该像这样调用 s3cmd：

```
s3cmd del s3://bucketname/file 
```

当然，你也可以使用通配符：

```
s3cmd del s3://bucketname/file* 
```

您可以使用日期命名备份文件：

db.backup.20130411.tgz

并使用日期来删除以前的备份。

顺便说一句，在[s3ql](https://code.google.com/p/s3ql/)项目中有一个[expire_backups](https://code.google.com/p/s3ql/source/browse/contrib/expire_backups.py)脚本可能已经在做你想做的事情。

# java - 使用 Java 程序编译 Java 文件...

> ID：12019050
> 
> 赞同：8
> 
> 时间：2012-08-18T13:40:58.687
> 
> 标签：java, compilation

用Java编写的程序是否可以使用JDK编译器编译文件（除了使用Java打开命令提示符并向其抛出“javac”命令以编译文件）？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-18T13:48:44.557

在 Java 6 及更高版本中，有一个 API 可以使用编译器。这可能是您正在寻找的。

[http://www.javabeat.net/2007/04/the-java-6-0-compiler-api/](http://www.javabeat.net/2007/04/the-java-6-0-compiler-api/)

[http://docs.oracle.com/javase/6/docs/api/javax/tools/JavaCompiler.html](http://docs.oracle.com/javase/6/docs/api/javax/tools/JavaCompiler.html)

请注意，您需要一个 JDK 才能使编译器可用。JRE 是不够的。如果这是一个问题，请考虑在您的应用程序中嵌入 Eclipse Java 编译器。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-18T13:48:35.860

Java 6 有一个编译器 API 查看 Java 编译器类 Javadoc

[http://docs.oracle.com/javase/6/docs/api/javax/tools/JavaCompiler.html](http://docs.oracle.com/javase/6/docs/api/javax/tools/JavaCompiler.html)

和一个例子

[http://www.javabeat.net/2007/04/the-java-6-0-compiler-api/](http://www.javabeat.net/2007/04/the-java-6-0-compiler-api/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-18T13:43:08.703

Apache 字节码工程库是您的朋友。

[http://commons.apache.org/bcel/](http://commons.apache.org/bcel/)

# c# - 接口是否应该使用 IEnumerable 而不是 MyObject[]

> ID：12019052
> 
> 赞同：3
> 
> 时间：2012-08-18T13:41:12.490
> 
> 标签：c#, arrays, ienumerable, enumeration

我有很多 resharper 警告将我的参数从常规数组更改为相同类型的 IEnumerable，因此它会改变这一点：

```
 public Interface IGenerator
 {
       void Go(MyObject[] objects) 
 } 
```

对此：

```
 public Interface IGenerator
 {
       void Go(IEumerable<MyObject> objects) 
 } 
```

如果我去更改所有这些，那么每当我在函数内部调用 .Where() 时都会收到其他警告，并带有警告：

```
 Possible multiple enumeration of IEnumerable 
```

我看到了这个[错误描述](http://confluence.jetbrains.net/display/ReSharper/Possible+multiple+enumeration+of+IEnumerable)，但是这些已经是数组，所以没有延迟查询。

那么这里推荐的做法是什么？我应该将其保留为数组还是在整个位置添加 .ToList() 以删除多个可枚举错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T13:47:44.503

“多重枚举”不是错误，而是警告（如果我没记错的话，这是一个更尖锐的警告）。如果您确定您传递了“物化”集合（与惰性获得的集合相反，例如通过作为`yield return`其结果的函数），您可以忽略它。

*   如果将方法签名更改为 take`IEumerable<MyObject>`是有意义的，因为您想传递各种 LINQ 函数的结果，然后`ToList`在您的方法中进行转换。
*   如果您需要传递除数组之外的其他集合，请使用`ICollection<MyObject>`而不是`IEumerable<MyObject>`.
*   如果转换纯粹是出于审美原因，即您更改签名但继续传递数组，则可以完全忽略警告。

# android - Android 源代码签出特定包

> ID：12019059
> 
> 赞同：0
> 
> 时间：2012-08-18T13:42:46.047
> 
> 标签：android

我希望从 Android 源下载特定的打包应用程序，我正在尝试：

```
repo init -u https://android.googlesource.com/platform/packages/apps/Camera/ -b android-4.1.1_r4 
```

我得到：错误：未找到清单中的修订版 android-4.1.1_r4。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T14:12:15.220

简单的：

```
git clone https://android.googlesource.com/platform/packages/apps/Camera.git 
```

# python - os.chdir 之后inspect.getmodule 的结果变化

> ID：12019061
> 
> 赞同：3
> 
> 时间：2012-08-18T13:43:02.963
> 
> 标签：python, module, inspect, chdir

我的一些代码似乎突然出现了一个错误。当我追踪它时，我发现`inspect.getmodule`在执行之前和之后使用相同（相同）的参数进行评估`os.chdir`会产生不同的结果。

（FWIW，我在 OS X 下运行 Python 2.7.3。）

我发现这种行为非常令人费解和困惑，以至于我不知道如何最好地修复这个错误。（换句话说，在了解行为的原因后，我能想到的任何解决方案都只是一个创可贴。）

下面的测试脚本说明了这种行为（当然，现实生活中的错误发生在更加现实和复杂的环境中）：

```
import inspect
import os

def prn(line, mod):
    print ('getmodule called at line %2d; returned module: %-8s (id: %d)' %
           (line - 1, getattr(mod, '__name__', mod), id(mod)))

fr = inspect.currentframe()

mod = inspect.getmodule(fr) # line 10
prn(fr.f_lineno, mod)

mod = inspect.getmodule(fr) # line 13
prn(fr.f_lineno, mod)

os.chdir('subdir')

mod = inspect.getmodule(fr) # line 18
prn(fr.f_lineno, mod) 
```

（注意：运行此代码需要在当前目录下立即有一个名为“subdir”的子目录。）

它的输出是：

```
getmodule called at line 10; returned module: __main__ (id: 4297636784)
getmodule called at line 13; returned module: __main__ (id: 4297636784)
getmodule called at line 18; returned module: None     (id: 4296513024) 
```

请注意，尽管所有三个调用`getmodule`都具有相同的框架对象作为参数，但最后一个的结果与前两个的结果不同。（正如人们所期望的那样，前两次调用的结果是相同的。）

前两个调用和第三个调用的唯一区别是后者发生在运行之后`os.chdir`。

任何有关正在发生的事情的见解将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T03:21:25.877

我认为这里的问题是您正在检查的模块也是`__main__`模块。如果您将示例代码放入另一个模块并将*其*导入您的主模块，它工作正常。*您在抓取框架后*更改工作目录这一事实也对您没有任何好处。

如果您绝对需要一个模块也是应用程序，您可以手动将路径传递到`inspect.getmodule`：

```
import os
import inspect

__filepath__ = os.path.join(os.getcwd(), __file__)

frame = inspect.currentframe()
os.chdir('subdir')
print inspect.getmodule(frame, _filename=__filepath__).__name__ 
```

但是，您*确定*需要像现在这样更改工作目录吗？在我编写 Python 的 8 年多的时间里，我不记得曾经在现实世界的代码中使用过它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T20:07:06.180

我尝试在 Windows 7 X64 上的 Idle Python 2.7.2 和 2.7.3 上运行代码，但是我无法重现这一点。我得到的只是：-

> getmodule 在第 12 行调用；返回模块：**main** (id: 31281464)
> getmodule 在第 15 行调用；返回模块：**main** (id: 31281464)
> getmodule 在第 20 行调用；返回模块：**main**（id：31281464）

但是，我认为问题在于实施。正如 Python 文档中显而易见的那样：http: [//docs.python.org/library/inspect.html#inspect.getmodule](http://docs.python.org/library/inspect.html#inspect.getmodule)，*尝试猜测对象是在哪个模块中定义的。*

我认为（这只是一个假设，因为我无法在我的系统上重现您的观察结果）在您更改当前目录之前，因为您在父目录中，模块显示为**main**，因此您收到 id：4297636784 . 但是，更改当前目录后，无法从新目录中引用该模块，因此返回新的 id: 4296513024 并以 None 作为模块，因为无法从新目录中引用**主模块。**

# android - android 移动应用程序 + 微软健康保险库？

> ID：12019064
> 
> 赞同：0
> 
> 时间：2012-08-18T13:43:16.843
> 
> 标签：android, health-monitoring, healthvault

向健康保险库发送一些值的简单 android 移动应用程序的任何帮助/教程。有人试过吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T20:38:47.017

看看[http://healthvaultjavalib.codeplex.com/](http://healthvaultjavalib.codeplex.com/)，特别是底部关于 Android 支持的部分。

# wordpress - Register_taxonomy 类别面板而不是标签面板

> ID：12019067
> 
> 赞同：-1
> 
> 时间：2012-08-18T13:43:28.793
> 
> 标签：wordpress

嗨，我正在尝试创建一个新的帖子类型，在注册分类时我注意到我得到了一个标签面板而不是类别面板。这是我的代码：

```
function portfolio_filter(){
        register_taxonomy("filter", 
                           array("portfolio"),
                           array(
                               "hierarchical => true",
                               "label" => "Filter",
                               "singular_label" => "Filter",
                               "rewrite" => array(
                                   'slug' => 'filter',
                                   'hierarchical' => true
                               )
                           ));
    }
    add_action('init' ,'portfolio_filter' , 0);

  How can I get the category panel instead of the tag panel? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T19:11:52.660

我遇到了同样的问题，WP Codex 指出“默认情况下，标签标签用于非分层类型，类别标签用于分层类型。”

以下是我注册自定义分类的方法：

```
add_action( 'init', 'create_product_taxonomy', 0 );

function create_product_taxonomy() {
    register_taxonomy(
                'xyz_products','product',
        array(
                'labels' => array(
                'name' => 'Product Type',
                'add_new_item' => 'Add New Product Type',
                'new_item_name' => "New Product Type Group"
            ),
            'show_ui' => true,
            'show_tagcloud' => false,
            'hierarchical' => true
        )
    );
} 
```

..您会看到层次结构设置为 TRUE，与您的相同，但在您转到 WP 仪表板 -> 设置 -> 常规（或任何其他）并单击更新之前，它可能不会生效。那时functions.php 将重新加载。（functions.php 文件在许多情况下会重新加载，但这个解决了与您相同的问题）。希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-10T11:03:47.630

您的代码中有错误：

```
"hierarchical => true" 
```

一定是

```
"hierarchical" => "true" 
```

# ios - 无法从 ekstore 查询日历中的提醒

> ID：12019069
> 
> 赞同：2
> 
> 时间：2012-08-18T13:43:43.000
> 
> 标签：ios, calendar, ios6, reminders, ekeventkit

我正在尝试从日历中获取提醒列表，但我不断收到错误消息。我可以对日历事件做类似的事情，但是当我尝试修改它以进行提醒时，我遇到了问题。
此代码在与 EKEntityMaskReminder 相关的第一行失败

```
 _store = [[EKEventStore alloc] initWithAccessToEntityTypes:EKEntityMaskReminder];
        EKCalendar *calendar = [_store calendarWithIdentifier:[self.detailItem valueForKey:@"cal_id"]];
    NSArray *calendarArray = [NSArray arrayWithObject:calendar];
    NSPredicate *predicate = [_store predicateForRemindersInCalendars:calendarArray];
    _eventsList = [_store fetchRemindersMatchingPredicate:predicate completion:nil]; 
```

错误信息是：

> -[EKEventStore initWithAccessToEntityTypes:]：无法识别的选择器发送到实例 0x157660

如果我这样更改商店：

```
_store = [[EKEventStore alloc] init]; 
```

然后它失败了：

> ```
> '-[EKEventStore predicateForRemindersInCalendars:]: unrecognized selector sent to instance 0x165c20' 
> ```

如果我将商店设置为：

```
_store = [[EKEventStore alloc] init]; 
```

它显示在提醒应用程序中。

有谁知道为什么我不能查询这些提醒？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T14:24:05.357

从 iOS 6 开始，您遇到错误的两个选择器都可用。如果您尝试针对 beta 操作系统/库以外的其他东西运行程序，它将失败。

（这在 iOS 5.1 文档中`initWithAccessToEntityTypes`被**推荐**是非常奇怪的，虽然没有方法描述。）

# java - Play 2.0 Java：从请求中绑定一个数组

> ID：12019070
> 
> 赞同：6
> 
> 时间：2012-08-18T13:43:46.670
> 
> 标签：java, playframework-2.0

我...卡住了oO

我在国外请求中有参数：

```
param[62537]=abc;
param[20356]=cde;
param[92837]=fgh; 
```

我正在寻找**任何**绑定它们的方法，即。与`DynamicForm`.

我可以得到参数：

```
DynamicForm dynamicForm = form().bindFromRequest();
String firstParam = dynamicForm.field("param[62537]").value(); 
```

但是我当然*不知道*索引，因为它们是在`client-side`独立应用程序创建的表单中选择的。

当我尝试使用时：

```
String[] firstParam = dynamicForm.field("param").value(); // it's NULL
String[] firstParam = dynamicForm.get("param"); // it's NULL 
```

甚至

```
String[] params = request().body().asFormUrlEncoded().get("param");
     // it's still NULL 
```

我错过了一些非常基本的东西，还是 Play 无法做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-19T13:13:50.587

不是最漂亮的方法，但是您是否尝试获取 asFormUrlEncoded 返回的 Map 的键：

```
Set<String> keys = request().body().asFormUrlEncoded().keySet();
for (String key : keys) {
     // check if key begin with "param["
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-19T10:26:56.890

这不起作用的原因是框架中还没有用于 List[String] 或 Array[String] 的 QueryStringBinder。据我所知，这是为 Play 2.1 计划的。

如果您现在需要它，您可以尝试此处显示的解决方案：[QueryStringBinder for List[String]](https://stackoverflow.com/questions/10464268/querystringbinder-for-liststring)

# .net - Linq - 主详细信息表 - 按查找表过滤

> ID：12019071
> 
> 赞同：0
> 
> 时间：2012-08-18T13:44:15.183
> 
> 标签：.net, linq, entity-framework

我有一个简单的主细节场景（例如具有 1..n 外键关联的课程和学生），我查询课程表并使用实体框架来访问学生（通过延迟加载）：

```
 Dim db As New EFEntities()
    Dim x = db.COURSES.SingleOrDefault(Function(f) f.ID= 101)
    'Access Master
    Console.WriteLine(x.COURSENAME.ToString())
    'Access Detail
    For Each e In x.STUDENTS
        Console.WriteLine(e.STUDENTNAME)
    Next 
```

但是现在我只希望返回的学生具有特定的值（称为 CATEGORY）。有效值存储在查找表中。所以我想我需要一个子选择，`WHERE STUDENTS.CATEGORY IN (SELECT VALUE FROM ANYTABLE)`但我不知道如何将它添加到我现有的查询中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T16:24:25.317

```
var catIds= new List<long>{cat1Id, cat2Id};
var filteredStudents = x.Students.Where(s=>catIds.Any(s.Category.CategoryId)); 
```

在 C# 中，您将需要类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T08:30:33.220

您可以像这样使用[Contains()](http://msdn.microsoft.com/en-us/library/bb352880.aspx)：

```
Dim catIds = ... 'Get your category Ids here.
Dim students = From s In context.Students _
               Where catIds.Contains(s.CategoryId) Select s 
```

# linux - 在 Linux 中使用 GHC 进行编译、依赖和可执行文件大小

> ID：12019072
> 
> 赞同：1
> 
> 时间：2012-08-18T13:44:22.093
> 
> 标签：linux, haskell, compilation, dependencies, ghc

***问题 1***

出于改善 haskell 编译时间的原因（无论是否使用底层功能，都会编译包含的任何模块），是否有任何工具可以警告 haskell 程序员包含不必要的模块？例如假设我们有以下设置：

***必要模块1.hs***

```
module NecessaryModule1 where

addNumber1 :: Int -> Int -> Int
addNumber1 a b = a + b 
```

***必要模块2.hs***

```
module NecessaryModule2 where

addNumber2 :: Int -> Int -> Int
addNumber2 a b = a + b 
```

***测试.hs***

```
module Test where

import NecessaryModule1
import NecessaryModule2 
```

***主文件***

```
module Main where
import Test

myadd :: Int->Int->Int
myadd a b = a + b

main::IO()
main = print(myadd 5 6) 
```

然后这样的工具会警告您有不必要的模块：

*   Main.hs ：因为没有使用 Test 的功能
*   Test.hs ：因为没有使用 NecessaryModule1 和 NecessaryModule2 的功能

* * *

* * *

***问题2***

如果我通过以下方式编译上面的代码：

```
ghc -o testProg Main.hs 
```

然后我得到一个 833504 字节的可执行文件大小。但是，如果我将**Main.hs**更改为：

***主文件***

```
module Main where
--import Test

myadd :: Int->Int->Int
myadd a b = a + b

main::IO()
main = print(myadd 5 6) 
```

然后可执行文件大小减少到 833057。鉴于 Test 模块的功能未在**Main.hs**中使用，为什么可执行文件大小有所不同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T14:19:12.337

**Q1** Haskell 无法警告您未使用的模块，因为将来它们可能会被另一个包导入。但是，当您导入模块时，只会链接您导入的模块，因此，如果您使用从未导入的模块创建可执行文件，则该模块将不会包含在可执行文件中，除非您明确告诉`cabal`链接它。

`-fwarn-unused-imports`当您实际导入模块时，如果您在编译时传递标志，GHC 会警告您不要使用该模块。您还应该考虑使用`-Wall`，这将启用此警告和许多其他有用的警告。使用`-Werror`将使 GHC 拒绝编译带有警告的模块，例如未使用的导入或死代码。

您还可以将标志传递`-split-objs`给 GHC，这将使 GHC 为每个函数（或多或少）创建一个目标文件，而不是每个模块一个目标文件，从而可以显着减少可执行文件的大小。

**Q2**模板 Haskell 语言扩展可以浏览模块的本地范围作为其某些功能的一部分。因此，GHC 有必要在编译模块时包含显式导入的代码，因为可能有一些 TH 功能依赖于它。启用某些级别的优化（如`-O2`）可能应该再次剥离未使用的代码，但不能保证。

您可能会考虑使用`-shared`编译标志进行编译，这将使用共享库进行编译并大大减少整体二进制文件的大小，但如果您想在不同的计算机上使用已编译的二进制文件，则必须同时复制库文件。

# push-notification - 简单格式apn

> ID：12019077
> 
> 赞同：0
> 
> 时间：2012-08-18T13:45:08.480
> 
> 标签：push-notification, apple-push-notifications

我在苹果推送通知服务指南中读到：

> 使用简单格式，如果您发送的通知数据包格式不正确（例如，有效负载超过规定的限制），APNs 会通过切断连接来响应。

但是如果消息（简单格式）是正确的呢？如果我发送保持活动数据包，APN 会保持连接吗？我不想建立大量的连接，因为这可能被视为 DOS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T16:29:02.937

我的评论的散列版本，更详细：

*   打开到 APNS 服务器的单个连接，连接到您的设备 ID 的 SQL（或类似）数据库（正式：设备令牌，而不是 UDID）并遍历这些 - 创建有效负载，然后将其发送到 APNS 服务器。
*   您还可以考虑检查您在设备列表中的距离，以便如果您和 APNS 服务器之间的连接断开（或发生其他情况），那么您可以重试。
*   如果确实发生了错误，在断开连接之前，APNS 服务器将返回一个错误响应数据包。更多信息可以在文档的表 5-1 中找到，[链接在这里](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/CommunicatingWIthAPS/CommunicatingWIthAPS.html)。

这是我在第一点中的详细信息示例：

```
// connect to your MySQL database
$con = mysql_connect("localhost", "username", "password");

// select a database
mysql_select_db("my_database", $con);

// run a query to grab your device tokens
$result = mysql_query("SELECT device_tokens FROM some_table");

// set your message
$msg = 'important update';

// create the payload
$body['aps'] = array('alert' => array('body' => $msg, 'action-loc-key' => 'Read'));

// convert to JSON
$payload = json_encode($body);

// setup APNS connection
$ctx = stream_context_create();
stream_context_set_option($ctx, 'ssl', 'local_cert', 'cert.pem');
stream_context_set_option($ctx, 'ssl', 'passphrase', 'password');

// open a connection to the APNS server
$apns = stream_socket_client('ssl://gateway.sandbox.push.apple.com:2195', $error, $errorString, 60, STREAM_CLIENT_CONNECT|STREAM_CLIENT_PERSISTENT, $ctx);

while ($row = mysql_fetch_array($result))
{
    $deviceToken = $row['device_tokens'];
    $apnsMessage = chr(0) . chr(0) . chr(32) . pack('H*', str_replace(' ', '', $deviceToken)) . chr(0) . chr(strlen($payload)) . $payload;
    fwrite($apns, $apnsMessage, strlen($apnsMessage));
}

// close APNS connection
fclose($apns);

// close database connection
mysql_close($con); 
```

...并记住在上面代码中的 URL 中切换沙盒或实时推送服务器。

# asana - 在 Asana API 中获取任务顺序和重新排列

> ID：12019085
> 
> 赞同：2
> 
> 时间：2012-08-18T13:46:10.993
> 
> 标签：asana

两个问题： 1.有没有办法接收项目中任务的顺序？2\. 更重要的是，有没有办法通过 API 重新排列项目中的任务顺序？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-09T23:55:12.630

您可以使用`addProject`API 调用（以及`insertBefore`and`insertAfter`属性）对项目中的任务重新排序。有关更多信息，请参阅[https://asana.com/developers/api-reference/tasks#projects](https://asana.com/developers/api-reference/tasks#projects)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T21:03:10.643

（我在 Asana 工作）

当前任务按项目优先顺序返回。已完成的任务可能是交错的，但您可以识别它们，因为它们具有`completed: true`. 目前无法通过 API 更改项目中任务的顺序，但我们将在未来添加。

# java - 带有 java Play Framework 2 的 HTML 表单

> ID：12019086
> 
> 赞同：4
> 
> 时间：2012-08-18T13:46:42.130
> 
> 标签：java, html, playframework, playframework-2.0

我正在使用一个只有一个输入文本和一个提交按钮的表单。我想将输入文本字段中的文本转发到后端的控制器。也许如果您看一下代码片段，它可以更好地了解我正在尝试做的事情。

这是来自 index.html 页面

```
@helper.form(action=routes.Application.index()){       
<input type='text' name='myname' />
<input type='submit' name='mysubmit' value='Create Class' />    
} 
```

下面是来自控制器的代码片段

```
public class Application extends Controller {

public static Result index() {
return ok(index.render(null)); }
} 
```

代码按预期显示表单，但我想将输入到输入文本字段中的字符串传递给控制器​​方法，然后打印文本。就像下面介绍的一样。

```
System.out.println(variable); 
```

其中变量是输入到文本字段中的测试。任何建议都将受到欢迎。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-18T13:55:31.727

用于`DynamicForm`：

```
public static Result index() {
    DynamicForm bindedForm = form().bindFromRequest();
    System.out.println(bindedForm.get("myname"));
    // or...
    Logger.info(bindedForm.get("myname")); 
        // Play's Logger is nicer than System.out.println();
    return ok(index.render(null)); }
} 
```

# iphone - 如何在当前时间添加 5 分钟？

> ID：12019087
> 
> 赞同：1
> 
> 时间：2012-08-18T13:46:42.613
> 
> 标签：iphone, nsdate

我是 iPhone 应用程序开发的新手。我需要在当前时间增加 5 分钟。示例格式当前时间是“6:15:00”意味着我想添加 5 分钟这样的结果“6:20:00”你能帮帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T13:51:28.603

请参阅[NSDate 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDate_Class/Reference/Reference.html)：

```
NSDate* newDate = [oldDate dateByAddingTimeInterval:60.0*5]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T13:53:04.063

```
NSDate *nowPlus5Min = [NSDate dateWithTimeIntervalSinceNow:5*60]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T13:52:01.773

您可以通过使用此代码在时间中添加秒来做到这一点..这将在当前日期添加 300 秒....您可以根据您的要求更改时间

```
NSDate *dateToFire = [[NSDate date] dateByAddingTimeInterval:5*60]; 
```

# avr - 尝试使用 AVR Dragon 调试 ATmega88 时出错

> ID：12019088
> 
> 赞同：0
> 
> 时间：2012-08-18T13:47:06.923
> 
> 标签：avr, atmega

我正在尝试使用 AVR Dragon 和 AVR Studio 6 调试 ATmega88。该程序是用 C++ 编写的。每次我尝试调试程序时，都会出现一个消息框，说

> “开始调试”：“AVR Dragon (00A2000006C63) 上的 ISP 不支持调试。设备仅被编程。使用 Start without Debugging 来避免此消息。”`

我认为 Dragon 支持通过 ISP 进行调试，因为我可以在 AVR Studio 4 中调试用汇编程序编写的程序。程序是：

```
#include <avr/io.h>
#include <util/delay.h>

int main(void)
{
    DDRC = 0xFF;
    PORTC = (0 << PC4);
    while(1)
    {
        PORTC = (1 << PC4);
        _delay_ms(1000);
        PORTC = (0 << PC4);
        _delay_ms(1000);
    }

    return 0;
} 
```

但这不应该是问题。该程序本身有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T09:34:54.847

要使用 Dragon 和 AVR Studio 6 进行调试，您需要一个支持[debugWIRE](https://en.wikipedia.org/wiki/DebugWIRE)的电路。裸机 ATmega 或修改后的（带有自动重置剪切/禁用）的 Arduino 也可以。

然后，在您的项目（不是解决方案）的设置中，您需要将 Tool - Selected debugger 更改为 AVR Dragon 和 Tool - Interface to debugWIRE。后者是我花了一些时间才找到的，只要将其设置为 ISP，您就永远无法调试。

完成这些更改后，您将在尝试开始调试会话时收到启用 debugWIRE（按是）的问题，之后您需要重新启动电路并按 OK。

在 debugWIRE 模式下，您无法更改其上的任何设置，因为 ISP 已禁用。要退出 debugWIRE 模式，您需要处于调试模式（因此，如果您停止它，只需重新启动它）然后选择 Debug - Disable debugWIRE 并关闭，它将恢复到 ISP 模式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T00:02:10.543

您可以使用 debugWIRE 使用 Dragon 进行调试。这使用电源、接地和复位线。通常 ISP 和 debugWIRE 物理连接都是建立的，因为它们在同一个连接器上。不过，您必须告诉软件退出使用 ISP 并开始使用 debugWIRE。自己做这件事还不够聪明。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T20:24:29.157

你可以在 AVR Studio 的模拟器中调试程序，但是用 ISP 调试硬件是不可能的。如果您想使用 AVR Dragon 调试您的应用程序，您必须使用 JTAG。

此外，您的程序是用 C 而不是 C++ 编写的，并且不会按预期工作。要设置位，`PORTC`您做对了，但要清除它，您必须这样做

```
PORTC &= ~(1 << PC4); // Clear PC4, keep all the others 
```

它将与and进行逻辑`and`运算`PORTC``11110111`

编辑：实际上，您还应该设置

```
PORTC |= (1 << PC4); // Set PC4, keep all the others 
```

否则你只会覆盖整个端口

# bash - 意外退出时启动 nginx 的 shell 脚本

> ID：12019094
> 
> 赞同：0
> 
> 时间：2012-08-18T13:49:09.307
> 
> 标签：bash, shell, nginx, monitor

Centos 6.0），我发现我的 nginx 会意外退出。所以我想写一个shell脚本来在它退出时启动nginx。下面是脚本：

```
 #!/bin/bash
 nginxBin=/usr/bin/nginx
 confFile=/etc/nginx/nginx.conf
 LOGS=/var/log/nginx/nginx.log
 restart_nginx() {
     echo " `date`---restart the nginx " >> $LOGS
     $nginxBin -c $confFile
  }

 while true
 do
     NGINX_NUM=`ps aux | grep "nginx" | grep -v "grep" | wc -l`
     if [ $NGINX_NUM -lt 2 ]; then
         restart_nginx
         continue
     fi                                                                                                                                                                                                 
     sleep 5
 done 
```

我把它放在 /etc/rc.local 中，但是当我杀死 nginx 进行测试时，它似乎不起作用。因为我不熟悉 shell 脚本。
谁能帮我 ？谢谢~~

朱慧

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T14:11:11.607

如果您的脚本名称中包含字符串`nginx`，它将在 5 秒后自杀。

如果有`pidof`，请尝试使用`pidof nginx`笨拙的 double 代替`grep`。否则，请尝试收紧您的正则表达式。

作为记录，避免`grep`在列表中返回自身的习惯方法`ps`是使用与其自身不匹配的正则表达式。例如，`ps aux | grep -c '[n]ginx'`。`-c`摆脱了`wc -l`. 也许添加一个单词边界和/或锚点以避免杀死你自己的脚本（假设它被称为类似的东西`respawn-nginxen`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T14:47:48.343

为什么不使用适合您的 CentOS 发行版的初始化脚本？

一个例子可以在这里阅读：http: [//articles.slicehost.com/2009/2/2/centos-adding-an-nginx-init-script](http://articles.slicehost.com/2009/2/2/centos-adding-an-nginx-init-script)

# zend-framework - Zend 框架：查询

> ID：12019096
> 
> 赞同：0
> 
> 时间：2012-08-18T13:49:43.750
> 
> 标签：zend-framework

如何在 Zend 中执行此查询：

```
mysql_query("UPDATE statistic SET impressions = impressions+1 WHERE user_ip = 'my_ip'"); 
```

我试试这个：

```
$this->update(array('impressions' => 'impressions' + 1), array('user_ip = ?' => 'my_ip')); 
```

但印象数是 1。

**这是真正的查询：**

```
$this->update(array('impressions' => new Zend_DB_Expr('impressions + 1')), array('user_ip = ?' => 'my_ip')); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T13:53:02.460

这是因为您试图在 PHP 中将数字添加到字符串中。发送到数据库的只是数字。你可能想要这个：

```
'impressions' => 'impressions + 1' 
```

# python - wxpython中的事件绑定仅适用于最后一个

> ID：12019101
> 
> 赞同：2
> 
> 时间：2012-08-18T13:50:04.883
> 
> 标签：python, wxpython, signals-slots

我正在尝试使用多个按钮自动填充屏幕*（使用 for 循环）*

这是片段：

```
 i = 0
    for w in [1,2,3,4,5,6,7,8]:
        by.append(wx.Button(panel,label=w,pos = wx.Point(50*i,0)))
        by[i].Bind(wx.EVT_LEFT_DOWN,lambda event: self.OnClicked(event,by[i]))
        i += 1
    i = 0 
```

当事件发生时，由于我设置了`i = 0`，所有事件都被路由到第一个按钮，即使我点击了最后一个按钮。我知道如果我在没有 for 循环的情况下设置插槽，它会起作用。但是假设我需要在屏幕上创建大约 50 个按钮，并且我想自动完成。我将如何设置插槽？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T14:04:37.583

问题是 lambda 表达式`lambda event: self.OnClicked(event,by[i]))`。您可以在此处阅读有关基本问题的更多信息：[(lambda) 函数闭包捕获什么？](https://stackoverflow.com/questions/2295290/what-do-lambda-function-closures-capture-in-python).

但简而言之：`i`在创建 lambda 表达式时并不固定。循环结束后，所有 lambda 表达式仍然引用`i`. 这意味着它们都具有相同的值。

一个肮脏的解决方法是改用它：

```
by[i].Bind(wx.EVT_LEFT_DOWN,lambda event, i=i: self.OnClicked(event,by[i])) 
```

但最好使用另一个辅助函数来进行变量绑定：

```
def addOnClicked(i,w):
    by.append(wx.Button(panel,label=w,pos = wx.Point(50*i,0)))
    by[i].Bind(wx.EVT_LEFT_DOWN,lambda event: self.OnClicked(event,by[i]))

for i in range(8):
    addOnClicked(i,i+1) 
```

# html - 在 CSS 选项卡中启用内容

> ID：12019107
> 
> 赞同：2
> 
> 时间：2012-08-18T13:51:35.263
> 
> 标签：html, css

我正在使用来自以下站点的代码：[http](http://calebogden.com/css-tabs/) ://calebogden.com/css-tabs/它允许我创建一些 CSS 选项卡，但是，只有将鼠标悬停在其中一个选项卡上时才能看到内容，理想情况下我希望内容是可见的，而无需人们这样做。

代码是：

```
<!-- HTML -->
<div id="content" role="main">

            <div id="tabs">
                <nav class="tabs">
                    <a href="#">About Scamper</a>
                    <section class="tabs-content">
                        Scamper is the coolest.
                    </section>
                    <a href="#">His Anatomy</a>
                    <section class="tabs-content">
                        Partly because he's a penguin.
                    </section>
                    <a href="#">Life Achievements</a>
                    <section class="tabs-content">
                        But also he had a movie made about him.
                    </section>
                    <a href="#">More Info</a>
                    <section class="tabs-content">
                        These tabs sure are great.
                    </section>
                </nav>
            </div>

        </div>

<!-- css -->

#content { padding: 25px; background: #FFF; }

    #tabs {
        border: 1px solid #DEDEDE;
        -webkit-border-radius: 4px;
        -moz-border-radius: 4px;
        border-radius: 4px;
        height: 205px;
        position: relative;
        overflow: hidden;
    }
    .tabs-content {
        padding: 25px;
        height: 120px;
        overflow: hidden;
        position: absolute;
        bottom: 0;
        left: 0;
        display: none;
    }
    .tabs {
        overflow: hidden; 
        background: #e1e1e1; 
        background: -moz-linear-gradient(center top , #f2f2f2, #e1e1e1); 
        background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#f2f2f2), color-stop(100%,#e1e1e1)); 
        -moz-border-radius: 4px 4px 0 0; 
        -webkit-border-radius: 4px 4px 0 0; 
        border-radius: 4px 4px 0 0; 
        -webkit-box-shadow: 0 1px 0 #FFF inset; 
        -moz-box-shadow: 0 1px 0 #FFF inset; 
        box-shadow: 0 1px 0 #FFF inset;
    }
    .tabs a {
        display: block; 
        float: left; 
        font: 15px/35px Arial, Helvetica, Sans-serif; 
        padding: 0 20px 0 40px; 
        color: #999; 
        text-shadow: 0 1px 0 #FFF;
        border-left: solid 1px rgba(0,0,0,0.05);
        border-right: solid 1px rgba(255,255,255,0.7);
        position: relative;
        overflow: hidden;
    }
    .tabs a:first-child {
        border-left-width: 0;
    }
    .tabs a:last-child {
        border-right-width: 0;
    }
    .tabs a:after {
        content: '✔';
        position: absolute;
        top: 0;
        left: 10px;
        line-height: 21px;
        font-size: 10px;
        width: 21px; 
        text-align: center; 
        margin: 7px 10px 5px 0; 
        background: #000; 
        font-size: 12px; 
        -moz-border-radius: 21px; 
        -webkit-border-radius: 21px; 
        border-radius: 21px; 
        background: #bdbdbd; 
        background: -moz-linear-gradient(center top , #d4d4d4, #bdbdbd); 
        background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#d4d4d4), color-stop(100%,#bdbdbd)); 
        -webkit-box-shadow: 0 1px 0 0 #FFF, 0 1px 0 0 rgba(0,0,0,0.25) inset; 
        -moz-box-shadow: 0 1px 0 0 #FFF, 0 1px 0 0 rgba(0,0,0,0.25) inset; 
        box-shadow: 0 1px 0 0 #FFF, 0 1px 0 0 rgba(0,0,0,0.25) inset; 
        text-shadow: 0 1px 0 #999; 
        color: #ffffff;
    }
    .tabs a:hover {
        background: #FFF;
        border-left-color: #CCC;
    }
    .tabs a:hover:after {
        background: #038bd5; 
        background: -moz-linear-gradient(center top , #2dc3fc, #038bd5); 
        background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#2dc3fc), color-stop(100%,#038bd5)); 
        text-shadow: 0 1px 0 #096c9e; 
        -webkit-box-shadow: 0 1px 0 0 rgba(255,255,255,0.45), 0 1px 0 0 rgba(0, 0, 0, 0.25) inset, 0 0 5px 0 rgba(0,148,255,0.85); 
        -moz-box-shadow: 0 1px 0 0 rgba(255,255,255,0.45), 0 1px 0 0 rgba(0, 0, 0, 0.25) inset, 0 0 5px 0 rgba(0,148,255,0.85); 
        box-shadow: 0 1px 0 0 rgba(255,255,255,0.45), 0 1px 0 0 rgba(0, 0, 0, 0.25) inset, 0 0 5px 0 rgba(0,148,255,0.85)
    }
    .tabs a:hover + .tabs-content {
        display: block;
    }
    .tabs-content:hover {
        display: block;
    }
</style> 
```

任何人都可以根据脚本中提供的代码协助我在 CSS 中进行编辑以执行此操作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T14:08:39.283

有一个更新版本的代码，允许您单击选项卡以查看内容。单击后，内容仍然可见。

[http://calebogden.com/advanced-css-tabs/](http://calebogden.com/advanced-css-tabs/)

相关摘录：

> 由于我们将使用目标选择器，我们需要将 ID 的 [原文如此] 添加到链接，并选择 HREF 属性。这将允许我们通过它的目标选择选项卡，它是来自同一方法的下一个兄弟。链接的新 HTML 如下所示：
> 
> ```
> <a id="tab1" href="#tab1">Scamper</a> 
> ```
> 
> 随着 HTML 的修改，现在我们需要做的就是将选择器从使用 :hover 更改为 :target。
> 
> ```
> .tabs a:target { declarations } 
> .tabs a:target:after { declarations } 
> .tabs a:target + section.tabs-content { declarations } 
> ```

`:target`这是一个显示选择器的工作小提琴：http: [//jsfiddle.net/8BKtz/](http://jsfiddle.net/8BKtz/)

要选择初始选项卡，您可以将哈希放入 URL。

@matthias.p 展示了一个更好的解决方案，通过使用更智能的选择器来选择初始选项卡。然而，所有解决方案（包括原始代码和我的解决方案）都依赖于较新的 CSS 选择器，因此它们将在 IE8 及更低版本中部分或完全中断，即使添加了像 Modernizr 这样的库以支持所使用的 HTML 5 元素（如`section`）。

现在，我可能会使用一段 JavaScript 来使代码更广泛地兼容。很高兴知道将来会有纯 CSS 解决方案可用。

这是一个完整的解决方案，它使用 JS 来实现更大的兼容性：http: [//jsfiddle.net/hN4S3/1/](http://jsfiddle.net/hN4S3/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T14:32:45.220

通过使用`:target`选择器，这是可能的。但是所有其他答案的问题是，起初没有选择选项卡，但通常第一个选项卡已经被选中，并且根本没有选择选项卡的状态不存在。以下是我如何进行标签导航： [http://jsfiddle.net/UejbP/1/](http://jsfiddle.net/UejbP/1/) 正如您所见，第一个标签是自动选择的——没有任何 javascript。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T14:08:25.917

```
.tabs-content {
    padding: 25px;
    height: 120px;
    overflow: hidden;
    position: absolute;
    bottom: 0;
    left: 0;
    display: none; //REMOVE THIS LINE
} 
```

如果您希望内容始终可见，这听起来像是您想要的那样，那么只需删除该行就可以了：)

# nhibernate - 一对一映射不适用于 2nd-Level-Cache

> ID：12019108
> 
> 赞同：2
> 
> 时间：2012-08-18T13:51:36.970
> 
> 标签：nhibernate, caching, fluent-nhibernate, hibernate-mapping, one-to-one

我已经用 NHibernate3 声明了休闲映射：

使用 FluentNHibernate

```
public class ActivityMap : ClassMap<Activity> {
    public ActivityMap() {
        this.Table("Activity");
        this.Cache.ReadWrite();
        this.Version(x => x.ObjectVersion);
        this.Id(x => x.Id).GeneratedBy.Assigned();

        // snipp

        this.HasOne(x => x.AppointmentRecurrence).Cascade.Delete();
    }
}

public class AppointmentRecurrenceMap : ClassMap<AppointmentRecurrence> {
    public AppointmentRecurrenceMap() {
        this.Table("AppointmentRecurrence");
        this.Cache.ReadWrite();     
        this.Version(x => x.ObjectVersion);
        this.Id(x => x.Id).GeneratedBy.Foreign("Activity");

        // snipp

        this.HasOne(x => x.Activity).Constrained();
    }
} 
```

它正在生成闲置的 hbm 映射：

```
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2">
  <class xmlns="urn:nhibernate-mapping-2.2" lazy="false" name="Prayon.Entities.Activity, Prayon.Entities, Version=1.0.0.867, Culture=neutral, PublicKeyToken=null" table="Activity">
    <cache usage="read-write" />
    <id name="Id" type="System.Guid, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <column name="Id" />
      <generator class="assigned" />
    </id>
    <!-- snipp -->
    <one-to-one cascade="delete" class="Prayon.Entities.AppointmentRecurrence, Prayon.Entities, Version=1.0.0.867, Culture=neutral, PublicKeyToken=null" foreign-key="FK_Activity_AppointmentRecurrence" name="AppointmentRecurrence" />
  </class>
</hibernate-mapping>

<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2">
  <class xmlns="urn:nhibernate-mapping-2.2" lazy="false" name="Prayon.Entities.AppointmentRecurrence, Prayon.Entities, Version=1.0.0.867, Culture=neutral, PublicKeyToken=null" table="AppointmentRecurrence">
    <cache usage="read-write" />
    <id name="Id" type="System.Guid, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <column name="Id" />
      <generator class="foreign">
        <param name="property">Activity</param>
      </generator>
    </id>
    <!-- snipp -->
   <one-to-one class="Prayon.Entities.Activity, Prayon.Entities, Version=1.0.0.867, Culture=neutral, PublicKeyToken=null" constrained="true" foreign-key="FK_AppointmentRecurrence_Activity" name="Activity" />
  </class>
</hibernate-mapping> 
```

现在，当我选择活动（带有可缓存选择）时，我在 NHibernate-Profiler 中看到，NHibernate 正在从二级缓存中正确获取每个活动，但它会为每个活动选择 AppointmentReccurrence。我该怎么办，它也会从缓存中获取 AppointmentRecurrence ？我曾尝试在一对一关系上设置缓存属性，但似乎不受支持。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T03:05:19.907

`Constrained`您的映射方面似乎确实存在问题。根据 Ayende 的[一对一](http://ayende.com/blog/3960/nhibernate-mapping-one-to-one)指南：

> 还有一点需要注意的是我们必须用foreign-key=”none”来指定它，因为否则NHibernate的Schema Export特性会为我们创建两个外键，这会创建一个循环引用，不允许我们插入任何东西到数据库。

显然 FK*实际上并不*存在于您的数据库中，但错误配置可能会导致缓存出现问题：

`foreign-key="none"`Fluent中指定的方式：

```
this.HasOne(x => x.Activity).Constrained().ForeignKey(); 
```

# asp.net - ASP.NET Web API 在同一个 Web 应用程序中的两个 API 之间以不同的方式格式化日期时间

> ID：12019109
> 
> 赞同：12
> 
> 时间：2012-08-18T13:51:38.447
> 
> 标签：asp.net, asp.net-web-api

我正在使用常规方式在我的项目中配置 Web API，但是，我确实有一个需要支持的旧版 API。

我像这样配置日期时间格式：

```
JsonMediaTypeFormatter jsonFormatter = GlobalConfiguration.Configuration.Formatters.JsonFormatter;
        jsonFormatter.SerializerSettings = new JsonSerializerSettings
        {
            NullValueHandling = NullValueHandling.Include,
            ContractResolver = new CamelCasePropertyNamesContractResolver()
        };
        var converters = jsonFormatter.SerializerSettings.Converters;
        converters.Add(new IsoDateTimeConverter() { DateTimeFormat = "yyyy-MM-ddTHH:mm:ss" }); 
```

这正是我想要的大多数 API 控制器，但是，对于旧版 API，它需要使用旧的 MS AJAX 格式输出 DateTimes，如下所示：

> /日期(1345302000000)/

所以有人知道我如何为我的一个 API 模块指定不同的 JSON 日期格式化程序并保持全局配置不变吗？或者任何替代方案，例如每个 API 的配置都可以。谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-18T14:08:08.340

Web API 有一个称为 Per-Controller 配置的概念，仅适用于像您这样的场景。每个控制器的配置使您能够在每个控制器的基础上进行配置。

```
public class MyConfigAttribute : Attribute, IControllerConfiguration
{
    public void Initialize(HttpControllerSettings controllerSettings, HttpControllerDescriptor controllerDescriptor)
    {
        // controllerSettings.Formatters is a cloned list of formatters that are present on the GlobalConfiguration
        // Note that the formatters are not cloned themselves
        controllerSettings.Formatters.Remove(controllerSettings.Formatters.JsonFormatter);

        //Add your Json formatter with the datetime settings that you need here
        controllerSettings.Formatters.Insert(0, **your json formatter with datetime settings**);
    }
}

[MyConfig]
public class ValuesController : ApiController
{
    public string Get(int id)
    {
        return "value";
    }
} 
```

在上面的示例中，ValuesController 将在您的日期时间设置中使用 Json 格式化程序，但您的其余控制器将使用 GlobalConfiguration 上的一个。

# css - 使用 CSS (w/o JavaScript) 自动切换水平/垂直设计？

> ID：12019119
> 
> 赞同：3
> 
> 时间：2012-08-18T13:53:11.563
> 
> 标签：css, layout, mobile, screen-orientation

我想创建我的网站（网络社区）的移动版本。当我开始时，我只是注意到了这个问题，水平屏幕和垂直屏幕的显示元素的位置应该不同。如果设备转动，它甚至应该（如果可能）切换。目的是编写一个普通的网页（HTML、CSS、JavaScript），同时尽可能避免使用 JavaScript

对于 Android 应用程序（UI-Thread），您通常可以在源代码中放置两个布局......是否有类似的 CSS 可用？

我期待什么答案？

1.  如果可能的话，一些 CSS 示例如何做到这一点。
2.  附加：一些方便的教程，用于创建现有页面的移动版本，您认为它们很有帮助（但是：主要关注的是屏幕水平/垂直）...

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-18T13:57:40.133

似乎我在“标记”之后自己找到了答案，因此找到了正确的搜索词：

[http://www.mollerus.net/tom/blog/2010/04/screen-orientation_and_css.html](http://www.mollerus.net/tom/blog/2010/04/screen-orientation_and_css.html)

链接不同的 CSS 文件：

```
<link rel="stylesheet"
      media="all and (orientation:portrait)" href="portrait.css">
<link rel="stylesheet"
      media="all and (orientation:landscape)" href="landscape.css"> 
```

或者将这样的 CSS 放在样式表中：

```
@media all and (orientation:landscape) {
   [styles for landscape orientation]
}

@media all and (orientation:portrait) {
   [styles for portrait orientation]
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T13:57:13.873

您正在寻找的是“响应式网页设计”。这允许您在 CSS 中检测布局，在布局更改时触发 javascript 事件，并根据屏幕的宽度/高度定位 CSS 元素。

我可以推荐这个幻灯片作为一个很好的起点：http: [//johnpolacek.github.com/scrolldeck.js/decks/responsive/](http://johnpolacek.github.com/scrolldeck.js/decks/responsive/)

# ios - 如何在 iOS 应用程序的默认优先级调度队列中调试崩溃？

> ID：12019121
> 
> 赞同：1
> 
> 时间：2012-08-18T13:53:44.153
> 
> 标签：ios, crash, grand-central-dispatch

我的应用程序以 Ad-Hoc Build 的形式分发，在某些设备上崩溃，并带有这样的崩溃日志。

```
Thread 3 name:  Dispatch queue: com.apple.root.default-priority`
Thread 3 Crashed:
0   CoreFoundation                  0x3551d296 CFRelease + 14
1   MyApp                           0x00145dae 0xdf000 + 421294
2   MyApp                           0x00145f6a 0xdf000 + 421738
3   MyApp                           0x0010259c 0xdf000 + 144796
4   MyApp                           0x000e36ca 0xdf000 + 18122
5   libdispatch.dylib             0x34461c52 _dispatch_call_block_and_release + 6
6   libdispatch.dylib             0x34464810 _dispatch_worker_thread2 + 252
7   libsystem_c.dylib             0x32991df4 _pthread_wqthread + 288
8   libsystem_c.dylib             0x32991cc8 start_wqthread + 0 
```

我不知道我能从这个日志中得到什么线索。=(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T13:57:49.810

首先将堆栈上的地址转换为您可以在代码中找到的符号名称。苹果在这里有一个关于它的技术说明：http: [//developer.apple.com/library/ios/#technotes/tn2151/_index.html](http://developer.apple.com/library/ios/#technotes/tn2151/_index.html)

# java - XML 数组字符串项到其他对象

> ID：12019122
> 
> 赞同：0
> 
> 时间：2012-08-18T13:53:51.947
> 
> 标签：java, android, xml, mobile

我有一个 Spinner，我从 XML 字符串数组中选择一首歌曲（项目），如下所示：

```
<string-array name="lst1">
    <item name="ALittleLessCoanversation" tag="0">A Little Less Conversation
        <game>Just Dance</game>
        <music>A Little Less Conversation</music>
        <artist>Elvis Presley</artist>
    </item>
    .
    .
    .
</string-array> 
```

我想把它转换成一个音乐对象（`new Music(String game, String song, String artist)`）。

我尝试`spnSongList.getSelectedItem()`并投射到音乐：

```
Music music = (Music) spnGameList.getSelectedItem(); 
```

我也尝试将其转换为 String 和 String[]，但它总是返回错误。

我想要的是获取那个 XML Item 并将其转换为 Music 对象。

感谢那些提供帮助的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T14:03:17.657

尝试使用'xstream'：http://x-stream.github.io/[它](http://x-stream.github.io/) 是一个不错的库，可以满足您的需求。

您可以创建自己的转换器以两种方式序列化 object <-> xml

[http://x-stream.github.io/converters.html](http://x-stream.github.io/converters.html)

您将必须编写 Converter 类的实现

当你这样做时，你需要做的就是

```
XStream xstream = new XStream();

xstream.registerConverter(new MusicConverter());

Music music = (Music)xstream.fromXML(xml); 
```

另外我建议您使用构建器模式，以便构建对象看起来像这样：

```
Music music =    Music.builder().artist("Elvis").title("A Little Less Conversation").build(); 
```

# javascript - jQuery无限滚动未触发

> ID：12019123
> 
> 赞同：7
> 
> 时间：2012-08-18T13:53:56.510
> 
> 标签：javascript, jquery, jquery-masonry, infinite-scroll

我正在制作一个简单的小网站，以将不同的格式样式应用于 Reddit 帖子，我正在尝试添加无限滚动 jQuery 插件，但它没有做任何事情。我尝试按照无限滚动页面上的（非常简单的）说明进行操作，当它没有执行任何操作时，我认为我一定输入了错误的内容，但后来我只是复制/粘贴了 Masonry/Infinite-Scroll[示例](http://masonry.desandro.com/demos/infinite-scroll.html)中的代码和它仍然没有工作。砌体工作完美（最终），但我无法弄清楚无限滚动有什么问题。我了解 jQuery 和 JavaScript 的基础知识，但显然不如你们大多数人那么了解，所以请你帮我看看有什么问题吗？我的网站位于[reddit.ymindustries.com](http://reddit.ymindustries.com)。

谢谢大家，到目前为止，你们很少让我失望。

YM

编辑：如果没有足够的图片来填满主页上的页面，请访问[reddit.ymindustries.com/r/aww](http://reddit.ymindustries.com/r/aww)获取更多图片。

编辑2：我相信我找到了问题，在这里描述：[https](https://github.com/paulirish/infinite-scroll/issues/5) ://github.com/paulirish/infinite-scroll/issues/5 现在要找出解决方法...

编辑 3：添加了一些技巧以使其工作，但它现在似乎无休止地循环第二页。唔...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-18T21:01:13.137

我对 jQuery 的“infinitescroll”和 Masonry 也有同样的问题。您可以通过为页面提供更多初始项目来解决此问题，以便插件的滚动检测启动。

在 WordPress 中，这是在“阅读”设置下。默认情况下，WordPress 一次只打开 10 个项目。您可以将该数字增加到 100/页，以更确定窗口最初会被填满。我这里有一些非常糟糕的代码，结果我只需要更长的页面，而不是更多的代码。

因此，如果您没有足够的图像，很难在大型显示器上测试这些插件。也许解决方案是在大型显示器上将图像缩放得更大，这样您就可以更加确定将您的内容放在首屏之下。

如果您认为有人可能会以非常大的显示屏访问您的网站，我不确定答案是什么，除了显示更多项目/页面并可能添加`$('#masonry').infinitescroll('retrieve');`到您的页脚以加载额外的页面以防万一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T14:51:17.970

我认为你的问题实际上是css。使您的页面比客户区高度更长。向 $container 添加更多图像

要点是，您的 $container 的底部边缘需要通过窗口底部，以便触发滚动事件，因此无限滚动可以对此事件做出反应并计算天气或未达到边缘

顺便说一句，在相同的情况下，例如，当我缩小窗口时，您设置的示例正在运行。

=== 更新 ===

我找到了一些时间来玩无限滚动，这是最终的工作脚本，只需在脚本中设置 pathParse 方法

```
$(function () {

        var $container = $('#itemContainer');

        $container.imagesLoaded(function () {
            $container.masonry({
                itemSelector:'.item'
            });
        });
        $container.infinitescroll({
                    navSelector:'.navigation', // selector for the paged navigation
                    nextSelector:'.navigation #next', // selector for the NEXT link (to page 2)
                    itemSelector:'.item', // selector for all items you'll retrieve
                    bufferPx:40,
                    debug:true,
                    columnWidth:function (containerWidth) {
                        return containerWidth / 5;
                    },
                    loading:{
                        finishedMsg:'No more pages to load.',
                        img:'http://i.imgur.com/6RMhx.gif'
                    },
                    pathParse: function(path,page){
                        return $(this.nextSelector).attr("href");
                    }
                },
                // trigger Masonry as a callback
                function (newElements) {
                    // hide new items while they are loading
                    var $newElems = $(newElements).css({ opacity:0 });
                    // ensure that images load before adding to masonry layout
                    $newElems.imagesLoaded(function () {
                        // show elems now they're ready
                        $newElems.animate({ opacity:1 });
                        $container.masonry('appended', $newElems, true);
                    });
                    //console.log("test (never fired :( )");
                }
        );

    }); 
```

现在，由于您的下一个链接不会自行更新（http://reddit.ymindustries.com/?after=t3_yh4av），您需要更改回调以从 ajax 响应中提取最后一个元素并更改下一个链接...可能是这样的

```
function (newElements) {
                        // hide new items while they are loading
                        var $newElems = $(newElements).css({ opacity:0 });
                        // ensure that images load before adding to masonry layout

                        // ======> if query parameter after=... is caring filename then do this
                        var lastImageUrl= $newElements[$newElements.length-1].attr("src");
                        var lastFileName= lastImageUrl.substring(lastImageUrl.lastIndexOf("/") +1, lastImageUrl.lastIndexOf("."));
                        $("#next").attr("href", "http://reddit.ymindustries.com/?after="+lastFileName);

                        $newElems.imagesLoaded(function () {
                            // show elems now they're ready
                            $newElems.animate({ opacity:1 });
                            $container.masonry('appended', $newElems, true);
                        });
                        //console.log("test (never fired :( )");
                    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T17:58:25.050

您还需要注意使用的无限滚动版本，因为如果您使用砖石/同位素（版本 2.0b2.110713）附带的版本，则两者都需要一些技巧才能调用该函数而不使用预定义数组：

```
//old code, to be changed (line 489)
desturl = path.join(opts.state.currPage);
// new code
desturl = (typeof path === 'function') ? path(opts.state.currPage) : path.join(opts.state.currPage); 
```

这已经在新版本的无限滚动中修复

# javascript - 身体 onLoad 上的退出功能

> ID：12019126
> 
> 赞同：1
> 
> 时间：2012-08-18T13:54:33.133
> 
> 标签：javascript, jquery, css

当主页需要长时间加载时，我需要一个将用户重定向到第二侧的脚本。

我这样做了：

```
 <script type='text/javascript'>   
    $(document).ready(function() {
    setTimeout("location.replace('contact.html')",10000);
    });
</script> 
```

同时，一个预加载器打开一个隐藏在 body onload 上的东西，当这种情况发生时我需要杀死上面的函数？

有人有想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T13:58:21.577

尝试这个：

```
var redirect = setTimeout(function(){
                  window.location = 'somewhere'
               }, 10000)

$(document).ready(function() { // or $(window).load(function() {
    clearTimeout(redirect);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T13:58:30.857

```
 setTimeout("location.replace('contact.html')",10000); 
```

相反，您可以尝试

```
 setTimeout(function(){window.location='contact.html'},10000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T14:02:24.570

您可以尝试关注

```
var Ispreloader=false;

    <script type='text/javascript'>   
        $(document).ready(function() {
         if(!Ispreloader)
         {
           myfunction();
          }

        });

function myfunction()
{
  setTimeout("location.replace('contact.html')",10000);
}

//------------Whenever preploadeer loads on bodu unload set the variable to true

Ispreloader=true;
 </script> 
```

# php - 单选按钮单击刷新/更改网站的小区域

> ID：12019128
> 
> 赞同：0
> 
> 时间：2012-08-18T13:54:43.007
> 
> 标签：php, javascript, html

我正在寻找一种方法来拥有一个包含某些过滤器的单选按钮，单击这些过滤器会更改网站的某个区域而不会完全刷新页面。

想象一下导航左侧的单选按钮，而右侧的表格在单击单选按钮时会平滑变化。

有人可以指出我需要它工作的正确方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T14:02:44.367

还有一个例子在这里....

```
http://interestingwebs.blogspot.in/2009/01/how-to-show-and-hide-html-elements.html

http://stackoverflow.com/questions/10690898/radio-button-change-table-row-bkgrnd-clor-when-slctd-and-go-bck-to-nrml-whn-slc 
```

# ajax - 如何使用 Ajax 加载日历上的所有事件？

> ID：12019130
> 
> 赞同：14
> 
> 时间：2012-08-18T13:55:03.310
> 
> 标签：ajax, fullcalendar

当**我**单击 .`agenda-views`

我猜，什么时候点击**下一个-上一个按钮**，然后我会将当前发送`date('y-m-d')`到，`url: 'fetch-events.php'`然后它将返回`event{ id: ,title: , start: , end: , allDay: }`格式数据以在日历上呈现

```
$('#calendar').fullCalendar({
    header: {
        left: 'prev,next today',
        center: 'title',
        right: 'month,agendaWeek,agendaDay'
    },
    selectable: false,
    selectHelper: false,
    editable: false,

    events: // on-click next-previous button load events using Ajax
    // post date using Ajax, then query to fetch all events and return data             
}); 
```

JSON在我的情况下不起作用

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-08-20T11:56:12.023

来自 FullCalendar 在线文档

> FullCalendar 将在需要新事件数据时调用此函数。当用户单击上一个/下一个或切换视图时触发。
> 
> 这个函数将被赋予**开始**和**结束**参数，它们是 [Moments](http://arshaw.com/fullcalendar/docs/utilities/Moment/) ，表示日历需要事件的范围。
> 
> **timezone**是描述日历当前时区的字符串/布尔值。它是[时区](http://arshaw.com/fullcalendar/docs/timezone/timezone/)选项的确切值。
> 
> 它还将被赋予**callback**，一个必须在自定义事件函数生成其事件时调用的函数。事件函数的职责是确保使用[事件对象](http://arshaw.com/fullcalendar/docs/event_data/Event_Object/)数组调用**回调**。
> 
> 下面是一个示例，展示了如何使用事件函数从假设的 XML 提要中获取事件：

```
$('#calendar').fullCalendar({
    events: function(start, end, timezone, callback) {
        $.ajax({
            url: 'myxmlfeed.php',
            dataType: 'xml',
            data: {
                // our hypothetical feed requires UNIX timestamps
                start: start.unix(),
                end: end.unix()
            },
            success: function(doc) {
                var events = [];
                $(doc).find('event').each(function() {
                    events.push({
                        title: $(this).attr('title'),
                        start: $(this).attr('start') // will be parsed
                    });
                });
                callback(events);
            }
        });
    }
}); 
```

[资源](http://arshaw.com/fullcalendar/docs/event_data/events_function/)

* * *

我做了一些小改动：

```
$('#calendar').fullCalendar({
    events: function(start, end, timezone, callback) {
        jQuery.ajax({
            url: 'schedule.php/load',
            type: 'POST',
            dataType: 'json',
            data: {
                start: start.format(),
                end: end.format()
            },
            success: function(doc) {
                var events = [];
                if(!!doc.result){
                    $.map( doc.result, function( r ) {
                        events.push({
                            id: r.id,
                            title: r.title,
                            start: r.date_start,
                            end: r.date_end
                        });
                    });
                }
                callback(events);
            }
        });
    }
}); 
```

**注意：** `start`并且`end` **必须**是[**ISO 8601**](https://stackoverflow.com/a/903206/662581)。另一个变化是使用`format`代替`unix`（这让我更容易处理代码隐藏）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-12-04T12:15:20.963

有一个内置选项可用

```
var calendar = new FullCalendar.Calendar(calendarEl, {
    events: '/myfeed.php'
}) 
```

更多细节[https://fullcalendar.io/docs/events-json-feed](https://fullcalendar.io/docs/events-json-feed)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-08-03T23:17:26.680

fullCalendar 已经使用 ajax，因此您不必输入它。当我开始实施 fullCalendar 时，我在这里使用了投票最多的答案的解决方案：

[https://stackoverflow.com/a/25404081/3927450](https://stackoverflow.com/a/25404081/3927450)

但是我可以证明，fullCalendar 负责在视图更改时进行 ajax 调用，而无需您执行任何操作。我发现这个插件非常有用，尽管文档对我来说似乎不是很清楚。

所以这段代码：

```
events: function(start, end, timezone, callback) {
    jQuery.ajax({
        url: 'schedule.php/load',
        type: 'POST',
        dataType: 'json', 
```

正是这样：

```
events: schedule.php/load, 
```

您只需提供网址。当然，您必须处理来自服务器的正确 JSON 响应。或者，如果您需要更多参数，您可以这样做：

```
events: {
url: '/myfeed.php',
method: 'POST',
extraParams: {
  custom_param1: 'something',
  custom_param2: 'somethingelse'
},
failure: function() {
  alert('there was an error while fetching events!');
},
color: 'yellow',   // a non-ajax option
textColor: 'black' // a non-ajax option 
```

}

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-16T09:38:29.900

```
This is perfect way to load data properly.

// if you want to empty events already in calendar.
$('#calendar').fullCalendar('destroy');

$.ajax({
    url: 'ABC.com/Calendar/GetAllCalendar/',
    type: 'POST',
    async: false,
    data: { Id: 1 },
    success: function (data) {
        obj = JSON.stringify(data);
    },
    error: function (xhr, err) {
        alert("readyState: " + xhr.readyState + "\nstatus: " + xhr.status);
        alert("responseText: " + xhr.responseText);
    }
});

/* initialize the external events
-----------------------------------------------------------------*/
$('#external-events div.external-event').each(function () {
    // create an Event Object (http://arshaw.com/fullcalendar/docs/event_data/Event_Object/)
    // it doesn't need to have a start or end
    var eventObject = {
        title: $.trim($(this).text()) // use the element's text as the event title
    };
    // store the Event Object in the DOM element so we can get to it later
    $(this).data('eventObject', eventObject);
    // make the event draggable using jQuery UI
    $(this).draggable({
        zIndex: 999,
        revert: true,      // will cause the event to go back to its
        revertDuration: 0  //  original position after the drag
    });
});

/* initialize the calendar
-----------------------------------------------------------------*/
var date = new Date();
var d = date.getDate();
var m = date.getMonth();
var y = date.getFullYear();

var calendar = $('#calendar').fullCalendar({
    //isRTL: true,
    buttonHtml: {
        prev: '<i class="ace-icon fa fa-chevron-left"></i>',
        next: '<i class="ace-icon fa fa-chevron-right"></i>'
    },
    header: {
        left: 'prev,next today',
        center: 'title',
        right: 'month,agendaWeek,agendaDay'
    },
    //obj that we get json result from ajax
    events: JSON.parse(obj)
    ,
    editable: true,
    selectable: true    
}); 
```

# php - 如何将 cakephp 图像代码插入表单？

> ID：12019131
> 
> 赞同：0
> 
> 时间：2012-08-18T13:55:15.727
> 
> 标签：php, cakephp, cakephp-2.0

我有一个插入表格。我想将下面的代码插入到表单中。

```
<?php
    echo $html->image("slide_03.jpg", array(
        "alt" => "Event Banner",
        'class' => '',
        ));
?> 
```

在我的视图层中，我希望显示图像。但是，图像没有显示，而是在我的视图层中得到了这个代码

```
image("slide_03.jpg", array( "alt" => "Event Banner", 'class' => '', )); ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T15:20:31.743

在 CakePHP 2.x 中，您必须使用`$this->Html->image()`. `$html->image()`在以前的 CakePHP 版本中使用过，在 CakePHP 2.x 中不再工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T20:37:17.433

通常（不仅适用于图像），您可以设置选项`after`，或者`before`如果您想要在输入元素附近添加额外的 html 元素。

正如您从下面的示例中看到的，您可以将输入选项与`$this->Html->image()`.

```
<?php
    echo $this->Form->input('field', array(
        'before' => $this->Html->image(),
        'after' => $this->Html->image(),
)); 
```

有关[文档](http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html#options)选项的更多详细信息。

# c++ - node.js 扩展：是否可以设置句柄 没有 ::New

> ID：12019138
> 
> 赞同：3
> 
> 时间：2012-08-18T13:57:09.753
> 
> 标签：c++, node.js, memory

我正在编写一个具有处理线程的 node.js 扩展，我需要能够设置一些值，然后在处理循环中调用 javascript 回调。

当我在处理时调用 String::New 或 Number::New 时，它会导致分配，从而导致应用程序崩溃。是否可以在不使用 Number::New 之类的东西并导致分配的情况下设置 Handle 的值？

# c++ - 实时应用中图像采集和图像处理的设计模式或最佳实践

> ID：12019140
> 
> 赞同：0
> 
> 时间：2012-08-18T13:57:20.360
> 
> 标签：c++, design-patterns

首先，通过“实时”，图像的图像处理在此应用程序中应该花费 0.1 秒或更短的时间。

在我们的应用程序中，除了主线程之外，还有三个线程正在运行。一个用于图像采集，第二个用于图像处理，第三个用于机器人。在两个线程之间，有一个图像队列要共享，因此当相机将图像入队和机器人将处理后的图像出队时，成像处理器将图像出队并将处理后的图像入队。您可能已经注意到的一个限制是，处理后的图像应该按顺序排列，这意味着图像的顺序与图像采集中的顺序相同。

是否有任何设计模式或最佳实践可应用于此架构。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T16:28:22.050

[管道和过滤器](http://en.wikipedia.org/wiki/Pipeline_%28software%29)模式非常适合此。

*   采集滤波器需要按顺序排列。
*   处理过滤器可以并行运行。
*   传输到机器人的过滤器需要按顺序排列。

为了使用现有技术实现这一点，我看到处理大量数据的实时应用程序使用英特尔的[线程构建块](http://threadingbuildingblocks.org/)(TBB)。在 Thread Building Blocks [Tutorial](http://threadingbuildingblocks.org/uploads/81/91/Latest%20Open%20Source%20Documentation/Tutorial.pdf)中，“在装配线上工作：管道”部分描述了一个类似的问题：

> 将使用一个简单的文本处理示例来演示使用管道和过滤器执行并行格式化。该示例读取一个文本文件，对文本中的每个十进制数字求平方，然后将修改后的文本写入一个新文件。[...] 假设原始文件 I/O 是连续的。平方滤波器可以并行完成。也就是说，如果您可以`n`非常快速地串行读取块，则可以并行转换每个`n`块，只要它们以正确的顺序写入输出文件即可。

以及随附的代码：

```
void RunPipeline( int ntoken, FILE* input_file, FILE* output_file ) {
  tbb::parallel_pipeline(
    ntoken, 
    tbb::make_filter<void,TextSlice*>( 
      tbb::filter::serial_in_order, MyInputFunc(input_file) )
  & tbb::make_filter<TextSlice*,TextSlice*>( 
      tbb::filter::parallel, MyTransformFunc() )
  & tbb::make_filter<TextSlice*,void>(
      tbb::filter::serial_in_order, MyOutputFunc(output_file) ) );
} 
```

无论是否使用 TBB，它都可以作为管道和过滤器模式的一个很好的实现参考，将模式与算法分离，同时提供控制过滤器的数据顺序/线程的能力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T14:10:53.347

我认为你的方法是正确的。

可能的改进可能是线程池的使用，例如用于图像处理（特别是如果它需要比采集更多的时间）。您可以考虑 OpenMP 或 boost 线程池，或 boost::asio::io_service

# image - 每 N 帧从视频中获取图像

> ID：12019143
> 
> 赞同：1
> 
> 时间：2012-08-18T13:57:38.543
> 
> 标签：image, video, media-player, video-capture, video-processing

我正在寻找一些工具或程序来自动从视频文件中抓取快照（几分钟间隔）而不为我显示它。Mkv支持会很好！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T14:21:51.620

从 ffmpeg 手册页[http://ffmpeg.org/ffmpeg.html](http://ffmpeg.org/ffmpeg.html)：

```
For extracting images from a video:

ffmpeg -i foo.avi -r 1 -s WxH -f image2 foo-%03d.jpeg

This will extract one video frame per second from the video and will output them in files named ‘foo-001.jpeg’, ‘foo-002.jpeg’, etc. Images will be rescaled to fit the new WxH values. 
```

根据帧位置或时间等，还有其他用于提取图像的选项。

# c++ - 无法访问重复类的方法

> ID：12019147
> 
> 赞同：0
> 
> 时间：2012-08-18T13:58:01.130
> 
> 标签：c++

我试图通过创建一个新对象并调用它`a()`的方法来访问该方法（创建一个新的 Foo 对象）。然后我打电话，因为我应该可以进入课堂。但它不起作用。谁能解释为什么？`Foo``Foo``duplicate``duplicate``::a()`

```
#include <iostream>
using std::cout;

class Foo {
    public:
        int a() { return 5; }

        Foo *duplicate() {
            return new Foo();
        }
};

int main() {

    Foo foo;

    Foo *a = foo.duplicate()::a(); // should return 5

    cout << a;

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T13:59:45.753

您必须使用`->`运算符来访问对象指针的成员。所以试试这个：

```
foo.duplicate()->a(); 
```

而且您不能将 5（`Foo::a()`方法返回的整数）分配给`Foo *a`，您为什么要这样做？

# ruby-on-rails - Rails Devise：单独配置文件还是与设计控制器集成？

> ID：12019150
> 
> 赞同：0
> 
> 时间：2012-08-18T13:58:25.517
> 
> 标签：ruby-on-rails, authentication, devise, profiles

我有一个 Web 应用程序，上面有 4 个不同的用户：

Owner Admin（我和我的团队） 应用程序的普通用户（使用网站的日常人员） Company Admins（支付账单的人） Company Users

其中最后 3 个将需要配置文件以及其他控制器和模型关系。

我的问题是我是否为这些用户中的每一个创建单独的控制器并让他们通过他们当前的设计 ID 链接到他们的个人配置文件，或者我应该编辑设计数据库表以适应配置文件和不同级别的访问？

干杯，

安德鲁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T14:09:05.967

主要取决于你想要什么。我更喜欢为所有用户类型使用一个表。

> 我应该编辑设计数据库表以适应配置文件和不同级别的访问吗？

再次取决于您想要什么，因为有很多方法可以提供不同级别的访问权限。

*   编辑用户表（即在设计之上推出您自己的解决方案）

*   使用授权 gem（例如 cancan）

因此没有硬性答案。

# c# - 使用 C# 获取 XML 命名空间元素

> ID：12019152
> 
> 赞同：1
> 
> 时间：2012-08-18T13:58:39.187
> 
> 标签：c#, xml, xamarin.ios

我在解析具有命名空间
XML 格式的 xml 文件时遇到了一些麻烦

```
<rss version="2.0" xmlns:fh="http://rss.flightstats.com/ns/rss/1.0">
<channel>
  <item>
    <fh:FlightHistory FlightHistoryId="271955988" DepartureDate="2012-08-16 00:30" ArrivalDate="2012-08-16 04:09" 
    </fh:FlightHistory>
  </item>
</channel> 
```

我想`fh:FlightHistory`用 C# 读取属性，但没有找到任何解决方案。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T14:17:03.307

您可以使用`Linq-to-XML`和`Linq`本身

```
 XDocument doc = XDocument.Load(@"file.xml");
 XNamespace ns="http://rss.flightstats.com/ns/rss/1.0";

 var flight = doc.Descendants(ns + "FlightHistory");
 foreach (var ele in flight)
 {
  Console.WriteLine(ele.Attribute("FlightHistoryId").Value);
  } 
```

或者

```
 var flight = doc.Descendants(ns + "FlightHistory")
                  .Select(ele => new 
                   {
                       FlightHistoryId=ele.Attribute("FlightHistoryId").Value,
                       DepartureDate=ele.Attribute("DepartureDate").Value,
                       ArrivalDate=ele.Attribute("ArrivalDate").Value 
                   }).FirstOrDefault();
    if (flight != null)
    {
        Console.WriteLine(flight.FlightHistoryId + " " + flight.DepartureDate + " " + flight.ArrivalDate);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T14:07:44.390

这是正则表达式中的一个

```
string xmlFileString="<rss version.....</item></channel>";

Regex r=new Regex("(?<=<fh:FlightHistory).*?(?=>|</fh:FlightHistory>)",RegexOptions.Singleline);

foreach(Match m in r.Matches(xmlFileString))
Console.WriteLine(m.Value);//your required output 
```

# javascript - 使用 CSS 和 Javascript 的无限旋转动画

> ID：12019159
> 
> 赞同：12
> 
> 时间：2012-08-18T13:59:25.753
> 
> 标签：javascript, jquery, css, jquery-animate, css-animations

我正在浏览一些单页网站示例，发现：[http](http://alwayscreative.net/) ://alwayscreative.net/ 。我对背景中无限旋转的圆盘感到非常惊讶。我看过一些例子，但没有一个是这样的。谁能告诉我这是如何实施的。谢谢。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-18T14:12:38.390

**CSS3：**

```
@keyframes rotate360 {
  to { transform: rotate(360deg); }
}
img { animation: 2s rotate360 infinite linear; }
/* TODO: Add -vendor-prefixes for different browsers */
```

```
<img src="https://i.stack.imgur.com/qCWYU.jpg?s=64&g=1" />
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-22T14:25:16.283

这个例子很好地实现了无限旋转：

```
div{
    -moz-border-radius: 50px/50px;
    -webkit-border-radius: 50px 50px;
    border-radius: 80px/80px;;
    border:solid 21px #f00; 
    width:100px;
    height:100px;
    -webkit-animation: rotation 2s linear infinite;
    -moz-animation: rotation 2s linear infinite;
    -ms-animation: rotation 2s linear infinite;
}

@-webkit-keyframes rotation {
    0%   { -webkit-transform: rotate(0deg); }
    100% { -webkit-transform: rotate(360deg); }
}
@-moz-keyframes rotation {
    0%   { -moz-transform: rotate(0deg); }
    100% { -moz-transform: rotate(360deg); }
}
@-ms-keyframes rotation {
    0%   { -ms-transform: rotate(0deg); }
    100% { -ms-transform: rotate(360deg); }
} 
```

你可以在这里测试它：http: [//jsfiddle.net/HS68a/2/](http://jsfiddle.net/HS68a/2/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-18T14:18:55.083

请检查这一行。我们可以使用 css3 来旋转图像。我将在 chrome 中测试工作正常 [http://jsfiddle.net/sUHKh/](http://jsfiddle.net/sUHKh/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-07-27T09:23:46.213

以下是它在您的示例中的实现方式：

```
@-webkit-keyframes rotation1{
from{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-ms-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}
to{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}
@-moz-keyframes rotation1{
from{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-ms-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}
to{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}
@-o-keyframes rotation1{
from{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-ms-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}
to{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}

.vector1{-moz-animation:rotation1 30s linear infinite;-o-animation:rotation1 30s linear infinite;-webkit-animation:rotation1 30s linear infinite;animation:rotation1 30s linear infinite} 
```

但我没有看到任何兴趣（我敢说这似乎有点奇怪......）将浏览器前缀转换放在其他浏览器特定的关键帧中。

它还缺少通用关键帧和 IE10 支持，所以这就是我实现它的方式：

```
@-webkit-keyframes rotation1{
  from{-webkit-transform:rotate(0deg);}
  to{-webkit-transform:rotate(360deg);}
}
@-moz-keyframes rotation1{
  from{-moz-transform:rotate(0deg);}
  to{-moz-transform:rotate(360deg);}
}
@-o-keyframes rotation1{
  from{-o-transform:rotate(0deg);}
  to{-o-transform:rotate(360deg);}
}
@keyframes rotation1{
  from{transform:rotate(0deg);}
  to{transform:rotate(360deg);}
  }
.vector1{-moz-animation:rotation1 30s linear infinite;-o-animation:rotation1 30s linear infinite;-webkit-animation:rotation1 30s linear infinite;animation:rotation1 30s linear infinite} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-18T14:06:01.023

我刚刚在 Chrome 中做了一个“检查元素”。这是CSS。

```
.vector1 {
  -moz-animation: rotation1 30s linear infinite;
  -o-animation: rotation1 30s linear infinite;
  -webkit-animation: rotation1 30s linear infinite;
  animation: rotation1 30s linear infinite;
} 
```

# session - Symfony2 Flash 消息未清除

> ID：12019162
> 
> 赞同：3
> 
> 时间：2012-08-18T13:59:55.660
> 
> 标签：session, symfony, flash-message

我第一次尝试在 Symfony2 应用程序中设置并显示一条 Flash 消息。正在设置的闪烁消息在第一次显示后不会被清除。

我在控制器操作中设置了一条闪光消息：

```
public function startAction()
{
    if (!$this->hasError()) {
        $this->get('session')->setFlash('test_start_error', '');
        return $this->redirect($this->generateUrl('app', array(), true));
    }
} 
```

如果设置了相关的 flash 键，我会在相应的视图中显示错误通知：

```
{% if app.session.hasFlash('test_start_error') %}
    error content here
{% endif %} 
```

在正确的错误条件下，控制器设置闪烁消息，并在视图中呈现相关的错误内容。

一旦显示，flash 消息会在请求后再次显示。通过检查相关会话数据可以`var_dump($this->get('session')->getFlashBag());`发现 flash 内容仍保留在会话中。

我的印象是从会话中删除了一条已显示过一次的 Flash 消息。这不会发生在我身上。

很明显我做错了什么——这是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T15:22:47.223

```
 app.session.hasFlash('test_start_error') 
```

这实际上并没有破坏 Flash 消息，下一部分会

```
 {{ app.session.flash('test_start_error') }} 
```

换句话说，你需要实际使用 flash 消息，而不是它会被销毁。您刚刚检查了它是否存在。

**编辑**：根据 catontheflat 请求，这里是[**FlashBag**](http://api.symfony.com/master/Symfony/Component/HttpFoundation/Session/Flash/FlashBag.html) (Symfony > 2.0.x) 类的相应方法。

“有”方法：

```
public function has($type)
{
    return array_key_exists($type, $this->flashes) && $this->flashes[$type];
} 
```

实际的get方法：

```
public function get($type, array $default = array())
{
    if (!$this->has($type)) {
        return $default;
    }

    $return = $this->flashes[$type];

    unset($this->flashes[$type]);

    return $return;
} 
```

如您所见，它仅在您请求实际的闪存消息时才取消设置会话，而不是在您检查它是否存在时。

在 Symfony 2.0.x 中，闪存行为是不同的。闪烁实际上持续一个请求，无论是否使用。或者至少我在浏览[**代码**](https://github.com/symfony/symfony/blob/v2.0.16/src/Symfony/Component/HttpFoundation/Session.php)并在本地测试后有这种印象。

**编辑2：**

哦，是的，在你的情况下，如果现在还不明显的话，实际的解决方案是在 if 语句中使用 removeFlash，如下所示：

```
{% if app.session.hasFlash('test_start_error') %}
    error content here
    {{ app.session.removeFlash('test_start_error') }}
{% endif %} 
```

感谢 thecatontheflat，提醒我我实际上并没有为给定的问题提供解决方案。:)

PS removeFlash 方法在 v2.1 中已弃用，将从 v2.3 中删除。无论如何，如果您查看 Session 类，您会发现它只是像中间人一样从 FlashBag 类调用 get 方法，而该方法实际上执行了删除操作。

# c++ - 监听进程开始和结束

> ID：12019163
> 
> 赞同：8
> 
> 时间：2012-08-18T14:00:04.383
> 
> 标签：c++, winapi, visual-c++

我是 Windows API 编程的新手。我知道有一些方法可以检查进程是否已经在运行（通过枚举）。但是，我想知道是否有一种方法可以监听进程何时开始和结束（例如，notepad.exe），然后在检测到该进程的开始或结束时执行一些操作。我假设可以为每个边际时间单位运行连续枚举和检查循环，但我想知道是否有更清洁的解决方案。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-18T14:05:49.270

使用 WMI、Win32_ProcessStartTrace 和 Win32_ProcessStopTrace 类。示例 C# 代码[在这里](https://stackoverflow.com/a/1986856/17034)。

您需要编写等效的 C++ 代码。哪个，呃，不是那么紧凑。它主要是样板文件，生存指南[可在此处获得](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394558%28v=vs.85%29.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T15:43:37.207

如果您可以在内核中运行代码，请检查[Detecting Windows NT/2K process execution](http://www.codeproject.com/Articles/2018/Detecting-Windows-NT-2K-process-execution)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T15:57:10.363

Hans Passant 可能已经给了你最好的答案，但是……用 C 或 C++ 编写速度很慢而且相当重。

在低于或等于 Vista 的 Windows 版本上，您可以使用 Windows`WH_CBT`挂钩获得 95% 的覆盖率，该挂钩可以使用`SetWindowsHookEx`.

有几个问题：

1.  这会错过一些服务启动/停止，您可以通过保留正在运行的 procs 列表并偶尔扫描列表以查找更改来缓解这些问题。您不必在此列表中保留将 explorer.exe 作为父/祖父进程的 proc。Christian Steiber 的 proc 句柄理念非常适合管理从表中删除 proc。

2.  它错过了内核直接执行的东西。这可以通过与#1 相同的方式来缓解。

3.  有些行为不端的应用程序不遵循挂钩系统规则，这可能会导致您的应用程序错过通知。同样，这可以通过保留进程表来缓解。

积极的一面是它非常轻巧且易于编写。

对于 Windows 7 及更高版本，请查看`SetWinEventHook`. 我还没有编写涵盖 Win7 的代码，所以我没有意见。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T14:25:17.537

进程句柄实际上是您可以“等待”的对象，例如“WaitForMultipleObjects”。

虽然它不发送某种通知，但您可以通过使用 MsgWaitForMultipleObjects() 版本的调用将其与消息处理结合起来，将其作为事件循环的一部分。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-18T15:21:20.493

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion
\Image File Execution Options 
```

您可以在此处使用您的进程名称放置一个注册表项，然后添加一个名为“Debugger”的 REG_SZ 和您的列表器应用程序名称以中继进程启动通知。

不幸的是，我知道没有这样的零开销方法来接收进程退出。

# r - rollapply() 是否允许调用函数的结果数组？

> ID：12019164
> 
> 赞同：3
> 
> 时间：2012-08-18T14:00:06.297
> 
> 标签：r, zoo

```
# Loading packages

require(forecast)
require(quantmod)

# Loading OHLC xts object

getSymbols('SPY', from = '1950-01-01')

# Selecting weekly Close prices

x <- Cl(to.weekly(SPY))

# ARIMA(p,d,q) estimation and forecasting function

a.ari.fun <- function(x) {

  a.ari <- auto.arima(x = x, d = 1, max.p = 50, max.q = 50, max.P = 50,
                      max.Q = 50, ic = 'aic', approximation = TRUE)
  fore <- forecast.Arima(object = a.ari, h = 4, level = c(.9))
  supp <- tail(fore$lower, 1)
  rest <- tail(fore$upper, 1)
  return(c(supp, rest))

}

# Roll apply ARIMA(p,d,q) in rolling window

rollapplyr(data = tail(x, 800), width = 750, FUN = a.ari.fun) 
```

此代码返回一个错误，因为

```
return(c(supp, rest)) 
```

在`a.ari.fun()`我写的函数结束时；我很确定，因为如果`a.ari.fun()`只返回

```
return(rest) 
```

它工作正常。

我必须如何安排`a.ari.fun()`才能获得适合的对象`rollapplyr()`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T14:26:14.143

看起来 using`by.column=FALSE`会满足您的要求。

```
tail(rollapplyr(data = as.zoo(x), width = 750, FUN = a.ari.fun, by.column=FALSE))

2012-07-13 126.0730 145.8036
2012-07-20 126.1342 145.8616
2012-07-27 128.9303 148.6576
2012-08-03 129.7640 149.4975
2012-08-10 130.5752 150.2954
2012-08-17 132.3789 152.0963 
```

~~如果您加载了 PerformanceAnalytics，则将调度 rollapply.xts 而不是 rollapply.zoo。我编辑将对象转换为`zoo`first 以确保`rollapply`调用正确的。~~

**编辑：**

感谢[@JoshuaUlrich](https://stackoverflow.com/users/271616/joshua-ulrich)的一些补丁，现在可以使用`rollapply.xts`，因此您不必转换为`zoo`. 此外，`rollapply.xts`现在注册在**xts**包而不是**PerformanceAnalytics**中，因此无论是否加载**PerformanceAnalytics ，您都将获得相同的结果。**您将需要正在开发的**xts**版本——Rev . 765 或更高版本——它位于[R-Forge](https://r-forge.r-project.org/R/?group_id=118)上。

```
rollapplyr(x, 750, a.ari.fun, by.column=FALSE) 
```

# python - 可以在不同的实体类型中使用重复的数据存储 key_name，并且 get_or_insert()

> ID：12019165
> 
> 赞同：1
> 
> 时间：2012-08-18T14:00:33.883
> 
> 标签：python, google-app-engine, google-cloud-datastore, primary-key

我有两种模型，`CourtDays`天数：

```
class CourtDays(db.Model):    #parent is Courts
    court = db.ReferenceProperty(Courts)
    reserveMaxTimeBefore = db.ListProperty(int)   
    reserveMinTimeBefore = db.ListProperty(int)
    day = db.StringProperty()

class Days (db.Model):
    court = db.ReferenceProperty(Courts)
    startTime = db.ListProperty(int)
    endTime = db.ListProperty(int)
    startTimeLunch = db.ListProperty(int)
    endTimeLunch = db.ListProperty(int)
    name = db.StringProperty() 
```

即使“day”和“name”是一周中的 7 天，我可以删除其中的“day”`CourtDays`和“name” `Days`，而是使用`key_name="day"`and for put() 这两种类型吗？`key_name="name"`请注意，两者都`CourtDays`具有`Days`相同的 ReferenceProperty *（并且也将具有相同的父级）*。此外，请注意 other`CourtDays`和 Days 将涉及相同的日期，但对于其他 CourtLocations 的父级和引用的其他法院。

此外，该方法`get_or_insert()`是否可用于确保“星期一”的`CourtDays`或`Days`实体可以修改但保持唯一？我问是因为[数据存储文档](https://developers.google.com/appengine/docs/python/datastore/modelclass#Model_get_or_insert)说“get 和后续（可能的）put 操作被包装在事务中以确保原子性。这意味着`get_or_insert()` **永远不会覆盖现有实体**，......”。尽管有这个短语并且正因为如此，这是否意味着“Model.get_or_insert（key_name，**kwds）”后面可以跟一个`put()`并覆盖特定实例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T19:37:08.747

如果两个实体具有不同的种类、命名空间或父级，则它们可以具有相同的 key_name。如果两个键具有相同的种类、ids、parents 和 app_id，它们都指向同一个实体。

我相信这句话**永远不会覆盖现有实体**意味着`get_or_insert`如果存在具有这样一个键的实体（属性值不符合），则永远不会将实体放入数据存储区。是的，followed`put()`将覆盖该实例。

# php - CakePHP 查找 id 所在的关联项目列表

> ID：12019168
> 
> 赞同：1
> 
> 时间：2012-08-18T14:01:03.587
> 
> 标签：php, list, cakephp, find, associations

我想用用户、游戏和游戏平台（例如 PS3）在蛋糕 php 应用程序中创建我有表：

userGames (游戏有一个平台) id, name, platform_id

用户（用户可以有很多平台）id、用户名

平台 ID、名称

users_platforms id、platform_id、user_id

现在我想选择所有用户 id=1 平台，并将其列为选择标签。这是sql查询：

```
SELECT platforms.name, platforms.id FROM platforms LEFT JOIN platforms_users ON platforms_users.platform_id=platforms.id WHERE platforms_users.user_id=1 
```

但我不知道通过 cakePHP 中的 find('list') 函数列出什么我尝试在用户控制器中输入：

$this->User->Platform->find('list', array('conditions', array('User.id'=>'1')));

但这会返回 sql 问题（未定义的 User.id） 任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T14:51:17.080

请试试这个

```
$this->loadModel('UserPlatform');
$this->UserPlatform->bindModel(array(
    'belongsTo' => array('Platform')
));
$this->UserPlatform->find('list', array(
    'fields' => array('Platform.id','Platform.name'),
    'conditions' => array('UserPlatform.user_id'=>'1'),
    'recursive' => 1
)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T16:47:43.403

您必须在连接表上应用查找功能

您的发现必须与此相同：

```
 $this->PlatformUser->find('list',array('fields'=>
 array('Platform.name','Platform.id'),'conditions'=> array('PlatformUser.id' => 1))); 
```

您的 PlatformUser 模型必须具有：

```
public $belongsTo = array(
    'Platform' => array(
        'className' => 'Platform',
        'foreignKey' => 'platform_id',
    ),
    'User' => array(
        'className' => 'User',
        'foreignKey' => 'user_id',
    ),
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-09T10:22:36.757

你想要做的实际上是一个 HasAndBelongsToMany 关联。

[http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html)

> hasAndBelongsToMany (HABTM)
> 
> 我们需要在数据库中设置一个额外的表来处理 HABTM 关联。这个新连接表的名称需要包含所涉及的两个模型的名称，按字母顺序排列，并用下划线 (_) 分隔。表的内容应该是两个字段，它们是指向所涉及模型的主键的外键（应该是整数）。为避免任何问题，请不要为这两个字段定义组合主键。如果您的应用程序需要唯一索引，您可以定义一个。如果您计划向此表添加任何额外信息，或使用“with”模型，则应添加一个额外的主键字段（按照约定“id”）。
> 
> HABTM 需要一个包含两个模型名称的单独连接表。

（如果我做对了，这将是 UserPlatform 表。）

> 确保表蛋糕和食谱中的主键具有约定俗成的“id”字段。如果它们与假设不同，则必须在模型的 primaryKey 中更改它们。

```
class Recipe extends AppModel {
public $hasAndBelongsToMany = array(
    'Ingredient' =>
        array(
            'className' => 'Ingredient',
            'joinTable' => 'ingredients_recipes',
            'foreignKey' => 'recipe_id',
            'associationForeignKey' => 'ingredient_id',
            'unique' => true,
            'conditions' => '',
            'fields' => '',
            'order' => '',
            'limit' => '',
            'offset' => '',
            'finderQuery' => '',
            'with' => ''
        )
);
} 
```

# iphone - iOS中的像素和点是什么？

> ID：12019170
> 
> 赞同：41
> 
> 时间：2012-08-18T14:01:44.603
> 
> 标签：iphone, ios, pixel

来自 UIImage 参考：

```
@property(nonatomic, readonly) CGSize size 
```

> 图像的尺寸，考虑到方向。
> 
> 讨论
> 
> 在 iOS 4.0 及更高版本中，该值反映了图像的逻辑大小，以磅为**单位**。在 iOS 3.x 及更早版本中，此值始终反映**以像素为单位测量**的图像尺寸。

iOS中的像素和点有什么区别？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-08-18T14:10:39.813

iOS 上的像素是设备的全分辨率，这意味着如果我的图像长度为 100x100 像素，那么手机将在标准的非视网膜设备上将其渲染为 100x100 像素。但是，由于较新的 iPhone 具有四倍的像素密度，因此相同的图像将以 100x100 像素呈现，但看起来只有该尺寸的一半。iOS 工程师很久以前就解决了这个问题（早在 OS X 中使用 Quartz），当时他们引入了 Core Graphics 的点系统。一个点是标准长度，在非视网膜设备上相当于 1x1 像素，在视网膜设备上相当于 2x2 像素。这样，您的 100x100 图像将在 Retina 设备上呈现两倍的大小，并且基本上可以使用户看到的内容正常化。

它还在 iOS 设备上提供了一个标准的测量系统，因为无论像素密度如何变化，iPhone 屏幕上始终存在 320x480 点，iPad 屏幕上始终存在 768x1024 点。*

但与此同时，考虑到视网膜设备至少是随 iOS 4 一起引入的，你基本上可以忽略文档，而且我不知道有多少人仍在更新的 iPhone 上运行 iOS 3。但是，如果出现这种情况，您的 UIImage 将需要在视网膜 iPhone 上以像素的两倍尺寸进行渲染，以弥补像素密度差异。

[*从 iPhone 5 开始，iPhone 的尺寸不再标准化。请使用适当的 API 来检索屏幕的尺寸或使用布局约束。]

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2015-09-20T18:31:52.553

# iPhone 分辨率终极指南

[![在此处输入图像描述](../Images/ce127866e2b7f828fdf7e07470d12f74.png)](https://i.stack.imgur.com/c6l4f.png)

这些家伙做得很棒，看看这里 - [iPhone 分辨率的终极指南](https://www.paintcodeapp.com/news/ultimate-guide-to-iphone-resolutions)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-03T09:08:23.620

使用来自[http://www.paintcodeapp.com/news/ultimate-guide-to-iphone-resolutions](http://www.paintcodeapp.com/news/ultimate-guide-to-iphone-resolutions)的数据，我设置了公式 sqrt(pointWidth^2+pointHeight^2)/diagonalInches 来计算每部手机显示的点数每英寸。

结果：

*   iPhone 2G、3G、3GS、4、4s = 164.825201164068082 点每英寸

*   iPhone 5、5s = 162.9846618550346903

*   iPhone 6 = 162.8061416117083255

*   iPhone 6 Plus = 153.535954278463216

正如你所知道的，每部手机上的一个点的大小大致相同。使用相同的网页，您可以使用像素值设置相同的公式，并且您会注意到由于较新手机的像素密度更高而导致的较大不规则性。

# php - 上传带有缩略图和原始图片的图片

> ID：12019171
> 
> 赞同：2
> 
> 时间：2012-08-18T14:01:45.493
> 
> 标签：php, file-upload, image-resizing

我已经使用这个脚本在我的网站上上传图片一年了，我终于意识到必须进行更改。我一直在寻找整个互联网，但还没有找到任何合适的解决方案，所以我来找你。

*   *此脚本当前正在创建缩略图并将其移动到具有 111x111 属性的文件夹“/images”中。*
*   *我希望它也上传原始图片，我该怎么做？*

    ```
    if(isset($_POST['submit'])) {
    if (($_FILES["image"]["type"] == "image/jpeg" || $_FILES["image"]["type"] == "image/pjpeg" || $_FILES["image"]["type"] == "image/gif" || $_FILES["image"]["type"] == "image/x-png") && ($_FILES["image"]["size"] < 4000000))
    $current_img=$_FILES['image']['name'];
    $extension = substr(strrchr($current_img, '.'), 1);
    date_default_timezone_set("Europe/Stockholm");
    $time = date("fYhis");
    $new_image = uniqid() . $time;
    $destination   = "images/".$new_image . "-thumb" . "." . $extension;
    $action = move_uploaded_file($_FILES['image']['tmp_name'], $destination);

    $max_upload_width = 111;
    $max_upload_height = 111;
    if($_FILES["image"]["type"] == "image/jpeg" || $_FILES["image"]["type"] == "image/pjpeg"){
        $image_source = imagecreatefromjpeg($destination) ;
    } 
    if($_FILES["image"]["type"] == "image/gif"){    
        $image_source = imagecreatefromgif($_FILES["image"]["tmp_name"]);
    }
    if($_FILES["image"]["type"] == "image/bmp"){    
        $image_source = imagecreatefromwbmp($_FILES["image"]["tmp_name"]);
    }
    if($_FILES["image"]["type"] == "image/x-png"){
        $image_source = imagecreatefrompng($_FILES["image"]["tmp_name"]);
    }

    imagejpeg($image_source,$destination,100);
    chmod($destination,0644);

    list($image_width, $image_height) = getimagesize($destination);

    if($image_width>$max_upload_width || $image_height >$max_upload_height){
        $proportions = 1;

        if($image_width>$image_height){
            $new_width  = $max_upload_width;
            $new_height = round($max_upload_width/$proportions);
        }       
        else{
            $new_height = $max_upload_height;
            $new_width  = round($max_upload_height*$proportions);
        }       

        $new_image = imagecreatetruecolor($new_width , $new_height);
        $image_source = imagecreatefromjpeg($destination);

        imagecopyresampled($new_image, $image_source, 0, 0, 0, 0, $new_width, $new_height, $image_width, $image_height);
        imagejpeg($new_image, $destination, 100); // save
        imagedestroy($new_image);
    } 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T14:11:26.163

只需使用以下代码将文件上传到不同的目录

```
$originalImage  = "images/".$new_image . "-ImageName" . "." . $extension;

$action = move_uploaded_file($_FILES['image']['tmp_name'], $originalImage) 
```

;

并在创建缩略图时使用 $originalImage 而不是 $_FILES['image']['tmp_name']。

通过应用以下代码进行检查

```
if(isset($_POST['submit'])) {
if (($_FILES["image"]["type"] == "image/jpeg" || $_FILES["image"]["type"] == "image/pjpeg" || $_FILES["image"]["type"] == "image/gif" || $_FILES["image"]["type"] == "image/x-png") && ($_FILES["image"]["size"] < 4000000))
$current_img=$_FILES['image']['name'];
$extension = substr(strrchr($current_img, '.'), 1);
date_default_timezone_set("Europe/Stockholm");
$time = date("fYhis");
$new_image = uniqid() . $time;

$originalImage  = "images/".$new_image . "-ImageName" . "." . $extension;
$destination   = "images/".$new_image . "-thumb" . "." . $extension;

$action = move_uploaded_file($_FILES['image']['tmp_name'], $originalImage);

$max_upload_width = 111;
$max_upload_height = 111;
if($_FILES["image"]["type"] == "image/jpeg" || $_FILES["image"]["type"] == "image/pjpeg"){
    $image_source = imagecreatefromjpeg($originalImage) ;
} 
if($_FILES["image"]["type"] == "image/gif"){    
    $image_source = imagecreatefromgif($originalImage);
}
if($_FILES["image"]["type"] == "image/bmp"){    
    $image_source = imagecreatefromwbmp($originalImage);
}
if($_FILES["image"]["type"] == "image/x-png"){
    $image_source = imagecreatefrompng($originalImage);
}

imagejpeg($image_source,$destination,100);
chmod($destination,0644);

list($image_width, $image_height) = getimagesize($destination);

if($image_width>$max_upload_width || $image_height >$max_upload_height){
    $proportions = 1;

    if($image_width>$image_height){
        $new_width  = $max_upload_width;
        $new_height = round($max_upload_width/$proportions);
    }       
    else{
        $new_height = $max_upload_height;
        $new_width  = round($max_upload_height*$proportions);
    }       

    $new_image = imagecreatetruecolor($new_width , $new_height);
    $image_source = imagecreatefromjpeg($destination);

    imagecopyresampled($new_image, $image_source, 0, 0, 0, 0, $new_width, $new_height, $image_width, $image_height);
    imagejpeg($new_image, $destination, 100); // save
    imagedestroy($new_image);
} 
```

# algorithm - 返回位数组的第 i 个组合

> ID：12019172
> 
> 赞同：4
> 
> 时间：2012-08-18T14:01:58.893
> 
> 标签：algorithm, bit-manipulation, combinations

给定一个固定长度的位数组以及它包含的 0 和 1 的数量，我如何安排所有可能的组合，以便返回第 i 个组合花费尽可能少的时间？它们返回的顺序并不重要。

这是一个例子：

```
array length = 6
number of 0s = 4
number of 1s = 2 
```

可能的组合 (6! / 4! / 2!) 000011 000101 000110 001001 001010 001100 010001 010010 010100 011000 100001 100010 100100 101000 110000

问题 第 1 组合 = 000011 第 5 组合 = 001010 第 9 组合 = 010100

使用不同的排列方式，例如 100001 100010 100100 101000 110000 001100 010001 010010 010100 011000 000011 000101 000110 001001 001010

它应返回第 1 个组合 = 100001 第 5 个组合 = 110000 第 9 个组合 = 010100

目前我正在使用 O(n) 算法来测试每个位是 1 还是 0。问题是我需要处理很多非常长的数组（大约 10000 位），所以它仍然非常慢（而且缓存是不可能的）。我想知道您是否认为可能存在更快的算法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T23:54:54.333

我不确定我是否理解这个问题，但如果你只想要第 i 个组合而不生成其他组合，这里有一个可能的算法：

有 C(M,N)=M!/(N!(MN)!) 个将 N 位设置为 1 的组合，最高位在位置 M。

你想要第 i 个：你迭代地递增 M 直到 C(M,N)>=i

```
while( C(M,N) < i ) M = M + 1 
```

这将告诉您设置的最高位。当然，您使用迭代计算组合

```
C(M+1,N) = C(M,N)*(M+1)/(M+1-N) 
```

找到后，您会遇到查找第 (iC(M-1,N)) 个 N-1 位组合的问题，因此您可以在 N 中应用递归...
这是 D=C(M+) 的可能变体1,N)-C(M,N)，并且 I=I-1 使其从零开始

```
SOL=0
I=I-1
while(N>0)
    M=N
    C=1
    D=1
    while(i>=D)
        i=i-D
        M=M+1
        D=N*C/(M-N)
        C=C+D
    SOL=SOL+(1<<(M-1))
    N=N-1
RETURN SOL 
```

如果你有那么多位，这将需要大整数运算......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T11:21:57.240

您的问题似乎受到二项式系数的限制。在您给出的示例中，问题可以翻译如下：

有 6 个项目，一次可以选择 2 个。通过使用二项式系数，可以将唯一组合的总数计算为 N! / (K! (N - K)!，对于 K = 2 的情况，简化为 N(N-1)/2。将 6 代入 N，我们得到 15，这与您计算的组合数量相同6！/ 4！/ 2！ - 这似乎是另一种计算二项式系数的方法，这是我以前从未见过的。我也尝试过其他组合，两个公式产生相同数量的组合。所以，它看起来像您的问题可以转化为二项式系数问题。

鉴于此，您似乎可以利用我编写的一个类来处理处理二项式系数的常用函数：

1.  将任何 N 选择 K 的所有 K 索引以良好的格式输出到文件。K-indexes 可以替换为更具描述性的字符串或字母。这种方法使得解决这类问题变得非常简单。

2.  将 K 索引转换为已排序二项式系数表中条目的正确索引。这种技术比依赖迭代的旧已发布技术快得多。它通过使用帕斯卡三角形固有的数学属性来做到这一点。我的论文谈到了这一点。我相信我是第一个发现并发表这种技术的人，但我可能是错的。

3.  将已排序二项式系数表中的索引转换为相应的 K 索引。

4.  使用[Mark Dominus](http://blog.plover.com/math/choose.html)方法计算二项式系数，它不太可能溢出并且适用于更大的数字。

5.  该类是用 .NET C# 编写的，并提供了一种通过使用通用列表来管理与问题相关的对象（如果有）的方法。此类的构造函数采用一个名为 InitTable 的 bool 值，当它为 true 时，将创建一个通用列表来保存要管理的对象。如果此值为 false，则不会创建表。无需创建表即可执行上述 4 种方法。提供了访问器方法来访问表。

6.  有一个关联的测试类，它显示了如何使用该类及其方法。它已经用 2 个案例进行了广泛的测试，并且没有已知的错误。

要了解此类并下载代码，请参阅[制表二项式系数](http://tablizingthebinomialcoeff.wordpress.com/)。

将此类转换为您选择的语言应该不难。

可能存在一些限制，因为您使用的 N 非常大，最终可能会创建比程序可以处理的更大的数字。如果 K 也可以很大，则尤其如此。目前，该类仅限于 int 的大小。但是，更新它以使用 long 应该不难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T19:30:16.967

如果排序无关紧要（它只需要保持一致），我认为最快的做法是让组合（i）返回任何你想要的具有所需密度**的东西，第一次**用参数调用组合（）一世。然后将该值存储在成员变量中（例如，将值 i 作为键并将您返回的组合作为其值的哈希图）。第二次调用combination(i)，你只需在hashmap中查找i，找出你之前返回的内容，然后再次返回。

当然，当您返回参数（i）的组合时，您需要确保它不是您之前为其他参数返回的东西。

如果您将被要求返回的数字明显小于组合总数，那么第一次调用组合（i）的一个简单实现是使用全 0 生成一个正确长度的值，随机设置 num_ones位为 1，然后确保它不是您已经为不同的 i 值返回的位。

# c# - 在 C# 中，从另一个集合中删除一个集合的最快方法是什么？

> ID：12019179
> 
> 赞同：2
> 
> 时间：2012-08-18T14:03:07.597
> 
> 标签：c#, collections

我有两个集合：

```
 List<MyObject> 
```

1.  全系列
2.  旧收藏

我想找出完整列表中的对象，而不是其他列表中的对象。做这样的事情的最快方法是什么：

```
var inOneButNotTheOther = 
    fullCollection.Remove(oldCollection, new MyObjectComparer()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T14:04:57.523

```
fullCollection.Except(oldCollection, new MyObjectComparer()) 
```

# c# - 是否可以仅在 ASP.Net 中处理 404 错误？

> ID：12019182
> 
> 赞同：1
> 
> 时间：2012-08-18T14:04:01.483
> 
> 标签：c#, asp.net, custom-errors

我应该输入什么 web.config 设置，以便我可以处理 404 错误而不是其他错误。我想处理 404 错误的原因是，有时我会故意输入不存在页面的 url，但我可以处理并在内部重定向到真实页面。这很好用，但是，我不想处理其他页面。相反，我想加载标准的“非自定义”错误，以便我可以识别页面的问题并查看导致错误的行号。但是当我为 404 启用自定义错误时，我开始被重定向到默认错误页面（对于 500 错误）并且不知道是什么导致了错误。

或者，我会考虑有一个自定义错误页面，可以正确显示哪个页面和哪一行导致错误。我可以为经典的 ASP 做到这一点，但我找不到如何为 ASP.Net 做到这一点。

任何帮助或指示将不胜感激。

谢谢！

PS不确定是否有区别，但我的测试服务器是IIS7.5，而用于实时网站的服务器是IIS6。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T14:07:05.290

尝试这个：

> ```
> <httpErrors errorMode="Custom" existingResponse="Replace">
>   <remove statusCode="404" subStatusCode="-1" />
>   <error statusCode="404" path="/Errors/404.aspx" responseMode="ExecuteURL"/>
> </httpErrors> 
> ```

请参考以下帖子： [http ://tedgustaf.com/en/blog/2011/5/custom-404-and-error-pages-for-asp-net-and-static-files/](http://tedgustaf.com/en/blog/2011/5/custom-404-and-error-pages-for-asp-net-and-static-files/)

# php - 在while循环中添加到数组时遇到问题

> ID：12019185
> 
> 赞同：0
> 
> 时间：2012-08-18T14:04:44.823
> 
> 标签：php, arrays, while-loop

我有一个使用 fgetcsv 函数并遍历 csv 文件直到结束的 while 循环。在循环中，我想将特定列中的值添加到新数组中。

一切正常，因为它与我需要的列中的值相呼应。但是，当我将行添加到数组中时，它不起作用。我有一个在 PHP 代码之后打印的 HTML 表，但是当我使用该行添加到数组时它不起作用。

我在网上看过，我所看到的一切都是按照我的方式做的，所以我有点困惑。

这是我的代码：

```
$amountRecords = 0;
$totalValue = 0;
$valueArray = array();

$handle = fopen('data.csv', 'r');
// to skip the header names/values 
fgetcsv($handle);

while($row = fgetcsv($handle, "\r"))
{

    $valueArray[$amountRecords] += $row[1]; // THIS IS THE LINE THAT IS NOT WORKING
    $totalValue = $totalValue + $row[1];
    $amountRecords++;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T14:08:38.850

您的代码有些奇怪。您`$amountRecords`每次都在递增，因此您永远不会`$valueArray`两次访问相同的索引，但是，您正在为每个元素*添加*值。可能您只是想用`$valueArray[$amountRecords] = $row[1];`而不是分配值`+=`？

如果是这种情况，看起来您只是试图将项目添加到数组的末尾，将第 1 列提取到它自己的数组中。您应该为此使用`array_push`or`array[]=`语法：

```
while($row = fgetcsv($handle, "\r"))
{
    // Add $row[1] to the end of $valueArray
    $valueArray[] = $row[1];

    $totalValue = $totalValue + $row[1];
} 
```

运算符用于将某些内容`+=`添加到现有值。键入`a += b`与键入相同`a = a + b`。您应该在下一行使用该运算符，例如：

```
 $totalValue += $row[1]; 
```

作为最后的建议，学习做一些基本的调试。如果你的循环不工作，让它在每次迭代期间向你展示它在做什么。用于`var_dump`检查您的变量并确保它们实际上包含您认为它们包含的内容。使用`var_dump($row)`在确保这`$row[1]`是正确的索引方面特别有用。

```
echo "Before loop\n";

while($row = fgetcsv($handle, "\r"))
{
    echo '$row contains: ';
    var_dump($row);

    $valueArray[] += $row[1]; // THIS IS THE LINE THAT IS NOT WORKING

    echo '$valueArray now contains ':
    var_dump($valueArray);

    $totalValue = $totalValue + $row[1];
}

echo "After loop\n"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T14:17:00.637

根据我对您的脚本的理解，`$valueArray[$amountRecords] += $row[1];`它没有任何逻辑意义，因为它依赖于`$amountRecords ++;`哪个总是会增加。

我认为您的脚本会像这样正常工作

```
while ( $row = fgetcsv($handle, "\r") ) {

    $valueArray[] = $row[1]; // Put all Row[1] Into a array
    $totalValue += $row[1]; // Sum total Value 
    $amountRecords ++; //Get Record Count
} 
```

# php - 为什么我的 url 访问失败？

> ID：12019187
> 
> 赞同：1
> 
> 时间：2012-08-18T14:05:23.123
> 
> 标签：php, python, urllib

好的，所以我有一个网站，我正在制作一个 python 脚本，通过将数据作为 GET 请求发送到 php 脚本来将数据插入网站，但是每当我放置一个没有字母或数字字符的脚本 ex(@[ ];:) 我收到一个 urllib 错误，说我在 url 中没有主机：

```
 return urllib.urlopen("http://this-is-an-example.com/thisisadirectory/file.php?f=Hello&v="+cgi.escape("This is@A#!T33ST::::;'[]{}"))
      File "Python25\lib\urllib.py", line 82, in urlopen
        return opener.open(url)
      File "Python25\lib\urllib.py", line 190, in open
        return getattr(self, name)(url)
      File "Python25\lib\urllib.py", line 301, in open_http
        if not host: raise IOError, ('http error', 'no host given')
    IOError: [Errno http error] no host given 
```

我还尝试制作自己的转义函数来转义所有特殊字符（或至少几个）

```
 full_escape_chars = {" ": "%20",
                    "<": "%3C",
                    ">": "%3E",
                    "#": "%23",
                    "\%": "%25",
                    "{": "%7B",
                    "}": "%7D",
                    "|": "%7C",
                    "\\": "%5C",
                    "^": "%5E",
                    "~": "%7E",
                    "[": "%5B",
                    "]": "%5D",
                    "`": "%60",
                    ";": "%3B",
                    "/": "%2F",
                    "?": "%3F",
                    ":": "%3A",
                    "@": "%40",
                    "=": "%3D",
                    "&": "%26",
                    "$": "%24"}
    def full_escape(s):
        global full_escape_chars
        for key in full_escape_chars.keys():
            s = s.replace(key, full_escape_chars[key])
        return s 
```

但是，还是什么都没有。请建议如何解决此问题！提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T14:18:23.880

一个问题可能是它[`cgi.escape`](http://docs.python.org/library/cgi.html#cgi.escape)没有做你认为它做的事情。看看[`urllib.quote_plus`](http://docs.python.org/library/urllib#urllib.quote_plus)：

```
>>> import cgi
>>> import urllib
>>> s = "This is@A#!T33ST::::;'[]{}"
>>> cgi.escape(s)
"This is@A#!T33ST::::;'[]{}"
>>> urllib.quote_plus(s)
'This+is%40A%23%21T33ST%3A%3A%3A%3A%3B%27%5B%5D%7B%7D' 
```

> `cgi.escape(s[, quote])`
> 
> ```
> Convert the characters '&', '<' and '>' in string s to HTML-safe sequences. 
> Use this if you need to display text that might containsuch characters in HTML. 
> ```

这在一般情况下表现得更明智：

```
>>> urllib.urlopen("http://this-is-an-example.com/thisisadirectory/file.php?f=Hello&v="+urllib.quote_plus("Thi
s is@A#!T33ST::::;'[]{}"))
<addinfourl at 24629656 whose fp = <socket._fileobject object at 0x16ebc30>>
>>> _.read()
'<?xml version="1.0" encoding="iso-8859-1"?>\n<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"\n
         "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">\n<html xmlns="http://www.w3.org/1999/xhtml
" xml:lang="en" lang="en">\n <head>\n  <title>404 - Not Found</title>\n </head>\n <body>\n  <h1>404 - Not Foun
d</h1>\n </body>\n</html>\n'
>>> 
```

# scheme - Scheme中如何正确实现对象继承

> ID：12019188
> 
> 赞同：0
> 
> 时间：2012-08-18T14:05:25.733
> 
> 标签：scheme, closures, r6rs

作为练习，我正在尝试实现一个小型的面向对象程序，有 2 个类：

```
point1d: 1 attribute (x), getter and setter
point2d: inherits from point1d, add a new attribute (y) and its getter and setter 
```

我已经将每个类都实现为闭包。这是第一个的代码：

```
(define (point1d xx)
  (let ((x xx))
    (define (get-x)
      x)
    (define (set-x xx)
      (set! x xx))
    (lambda (f . args)
      (apply
       (case f
         ((get-x) get-x)
         ((set-x) set-x))
       args)))) 
```

第二个：

```
(define (point2d xx yy)
  (let ((p1d (point1d xx))
        (y yy))
    (define (get-y)
      y)
    (define (set-y yy)
      (set! y yy))
    (lambda (f . args)
      (case f
        ((get-y) (get-y))
        ((set-y) (apply set-y args))
        (else (p1d f args)))))) 
```

我对第二个定义有一些问题；在最后一行我尝试调用父母方法，但由于`args`是一个列表，它不起作用。

我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T14:38:13.467

在`point2d`lambda 中，您尝试`point1d`使用

```
(p1d f (list arg1 arg2 ... argN)) 
```

而`point1d`期望的论点是：

```
(p1d f arg1 arg2 ... argN) 
```

为了解决这个问题，`cons`f 到`args`，然后`apply`到`p1d`，就像我在这个固定的定义中所做的那样`p1d`

```
(define (point2d xx yy)
  (let ((p1d (point1d xx))
        (y yy))
    (define (get-y)
      y)
    (define (set-y yy)
      (set! y yy))
    (lambda (f . args)
      (case f
        ((get-y) (get-y))
        ((set-y) (apply set-y args))
        (else (apply p1d (cons f args))))))) 
```

# python - Python套接字服务器错误

> ID：12019189
> 
> 赞同：2
> 
> 时间：2012-08-18T14:05:27.873
> 
> 标签：python, sockets, tcp, python-2.7

将数据发送到服务器时出现一些错误。我对 Python 套接字非常陌生，这是一个简单的脚本。这里是

```
Exception happened during processing of request from ('ip', 53863)
Traceback (most recent call last):
  File "/usr/lib/python2.7/SocketServer.py", line 284, in _handle_request_noblock
    self.process_request(request, client_address)
  File "/usr/lib/python2.7/SocketServer.py", line 310, in process_request
    self.finish_request(request, client_address)
  File "/usr/lib/python2.7/SocketServer.py", line 323, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "/usr/lib/python2.7/SocketServer.py", line 638, in __init__
    self.handle()
  File "serv.pyz", line 9, in handle
    print(self.client_address + ' : ' + self.data)
TypeError: can only concatenate tuple (not "str") to tuple 
```

Serv.pyz（我知道，应该是 .py）

```
import SocketServer

class SEER(SocketServer.BaseRequestHandler):

def handle(self):
    while 1:
        self.data = self.request.recv(9000)
        print(self.client_address + ' : ' + self.data)
server = SocketServer.TCPServer(('', 4857), SEER)
server.serve_forever() 
```

另外，我如何添加一个 Client 类来存储诸如 Client.room_id 或 Client.joinRoom(1) 之类的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T14:12:04.037

问题是由回溯给出的：

```
print(self.client_address + ' : ' + self.data) 
```

self.client_address 是一个元组。您想要（在这种情况下） self.client_address[0] 或者将它们打印在单独的行上

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T14:14:00.963

`self.client_address`是元组，你应该`self.client_address[0]`像[这样](http://docs.python.org/library/socketserver.html#socketserver-udpserver-example)使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T14:14:53.987

`self.client_address`是一个元组，而不是一个字符串！所以你需要打印它的 str() 。

`SEER`是您的客户端类，因此 create`self.room_id`等，以存储客户端状态和实现方法。

TCP 也是一种流协议，因此您需要在其之上实现消息协议以确保您拥有完整的消息。有关示例，请参[见此答案。](https://stackoverflow.com/a/9968240/235698)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T14:10:47.677

尝试将打印功能更改为：

```
 print(str(self.client_address) + ' : ' + str(self.data)) 
```

根据错误，其中一个变量是元组，因此应该将其转换为字符串。

# java - Java中的动态数组

> ID：12019190
> 
> 赞同：0
> 
> 时间：2012-08-18T14:05:33.797
> 
> 标签：java, arrays, dynamic, directory

我正在创建一个用于排序电子邮件的目录遍历应用程序。这是一个非常简单的应用程序，可以满足我的特定需求。

我想通过首先遍历所有电子邮件文件（在几个目录中有 1000 个）并根据 eml 文件中的发送/接收信息创建新目录来实现这一点（发送或接收的名称将根据在一个常数上）。

我在想这样的事情

```
public FileVisitResult visitFile(Path file,BasicFileAttributes attrs) {
    email = getEmail(file);
    emailSentRcievedName = sentRecievedName(email);
    dirArray[currentDir + "\" + emailSentRecievedName] = file.get();
    return CONTINUE;
} 
```

dirArray key:value 将用于文件移动实现。

我知道这个数组结构可以在 Javascript 中工作，但我将如何在 Java 中实现它？

干杯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T14:07:58.040

尝试使用哈希图。它使您能够存储成对的数据

```
Map<String,File> map = new HashMap<String, File>();
map.put(currentdir +"/"+ emailSentReceivedName, file);

File file = map.get(path); //will give you the file 
```

**也看看这个：** *SortedMap*，也许它可以帮助你 [http://docs.oracle.com/javase/1.4.2/docs/api/java/util/SortedMap.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/SortedMap.html)

Javadoc api在这里：[http ://docs.oracle.com/javase/1.4.2/docs/api/java/util/HashMap.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/HashMap.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T14:07:49.240

改用 java.util.HashMap() ！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T14:09:11.880

只需使用[HashMap](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)：

```
Map<String, File> map = new HashMap<String, File>();
map.put(currentdir + "\" + emailSentReceivedName, file.get()); 
```

# jquery - Jquery mobile 不会阻止在 windows mobile 中滚动

> ID：12019192
> 
> 赞同：0
> 
> 时间：2012-08-18T14:05:46.337
> 
> 标签：jquery, jquery-mobile

与在 JQM 中一样，即使单击一次也是 Ajax 调用...在我的应用程序中，当用户单击任何链接时，屏幕上会出现一个进程指示器...当进程指示器出现时，用户不应滚动屏幕，背景区域不应是可点击的，即它应该防止点击。

我已经写了代码：

```
disabelScroll()
{
    $(document).on(scroll,function(e){
                 e.preventDefault();
                 e.stoppropogation();
    });
    $(document).on(scrollstart,function(e){
                 e.preventDefault();
                 e.stoppropogation();
    });
} 
```

当我的处理指示器开始时，我已经调用了这个函数......即发送 ajax 请求时

它适用于所有移动平台，如 android、iphone、ipad、blackberry，但在 windows mobile 中它不起作用。在 windows mobile 中，它会调用`disableScroll()`但不会停止其行为……即当 Spinner 显示时，用户可以滚动并可以单击，这不应该发生。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-28T10:07:30.650

```
e.stopImmediatePropagation() 
```

和

```
e.stopPropogation(); 
```

解决了我的问题

# c - （新手）strstr() 使用无符号参数返回 null

> ID：12019194
> 
> 赞同：0
> 
> 时间：2012-08-18T14:05:54.507
> 
> 标签：c, string, parsing, pointers, unsigned

我对这段代码有疑问>

```
int parse_useragent (unsigned char* buf )
{
    int i;
    for (i=1; i < 200; i++)
    {
        printf("%c ", buf[i-1]); // this prints string with "User-Agent" inside
    }

    unsigned char * scanner = strstr(buf, "User-Agent:"); //returns NULL?

    if (scanner == NULL)
    {
        printf("NULL!!! /n");
        return DEFAULT_USERAGENT;
    }

    /* ... */ 
```

尽管子字符串在那里，但该`strstr`函数返回 NULL ...我相信**unsigned** char* buf 有问题，有什么方法可以快速转换，所以我可以使用`strstr`函数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T14:22:40.340

正确打印缓冲区以了解可能出现空字符的位置：

```
printf("%s\n", buf); 
```

您的方法有几个问题：

*   ~~`buf[0]`可能已经是一个空字符，C 中的数组开始于`0`而不是`1`~~
*   `%c`遇到空字符时可能什么也不打印
*   `strstr`在第一个空字符处停止

# php - 在 WHERE 中使用变量时限制 mysql 查询的输出

> ID：12019199
> 
> 赞同：0
> 
> 时间：2012-08-18T14:06:34.323
> 
> 标签：php, mysql

我有一个查询数据库以获取最新曲目的 mysql 语句。但是，由于数据库是部分规范化的，因此 ID 位于不同的表中。在查询中，我从艺术家表中获取艺术家 ID 并将它们放入变量中。然后将变量解析为一个查询，该查询查看曲目以找到最新的曲目，这就是问题所在。由于 $artist 变量可以包含大量 ID，所有这些 ID 都被解析到查询中，即使我在查询中设置了 LIMIT，结果也是几个 url 放在一起。

请记住，我无法限制艺术家查询，因为我需要从表中获取所有艺术家并从所有艺术家中找到最新的曲目。

如何在不限制艺术家查询的情况下从查询中获取最新的 url？

```
//Set up artist query so only NBS artists are chose

$findartist = mysql_query("SELECT * FROM artists") or die(mysql_error());
  while ($artist = mysql_fetch_array($findartist)){

     $artist =  $artist['ID']; 

        //get track url
        $fetchurl = mysql_query("SELECT * FROM tracks WHERE id = '$artist' ORDER BY timestamp DESC LIMIT 1");

             url = mysql_fetch_array($fetchurl);
             $track_ID = $url ['ID'];
             $trackname = $url ['name'];
             $trackurl = $url ['url'];
             $artist_ID =$url['ID'];

    } 
```

添加：

```
 $findartist = mysql_query("SELECT A.*, T.*
  FROM (
         SELECT T.ARTIST_ID, MIN(T.TRACK_ID) TRACK_ID
           FROM (
                    SELECT ARTIST_ID, MAX(`TIMESTAMP`) `TIMESTAMP`
                      FROM TRACKS
                  GROUP BY ARTIST_ID
                 ) L
           JOIN TRACKS T ON (    L.ARTIST_ID   = T.ARTIST_ID 
                             AND L.`TIMESTAMP` = T.`TIMESTAMP`)
       GROUP BY T.ARTIST_ID
       ) X
  JOIN ARTISTS A ON X.ARTIST_ID = A.ARTIST_ID
  JOIN TRACKS  T ON (X.TRACK_ID = T.TRACK_ID AND X.ARTIST_ID = T.ARTIST_ID)
  ORDER BY A.NAME");

             while ($artist = mysql_fetch_array($findartist)){

             $artist =  $artist['ID']; 
             $trackurl = $artist['url']; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T14:48:01.280

如果我对您的理解正确，您需要艺术家表中每个艺术家的最新（最新时间戳）曲目。

如果您显示您的表定义会有所帮助。我*认为*您在`tracks`表中的查询中混淆了 ARTIST_ID 和 TRACK_ID 。因此，我将始终使用列名 ARTIST_ID 和 TRACK_ID。

（TIMESTAMP 是列名的不幸选择，因为它也是 MySQL 数据类型名称，顺便说一句。没关系。）

您可以通过一个查询来完成此操作。让我们构造那个查询。这不是超级简单，但它会工作得很好。

首先，让我们获取每个艺术家的最新曲目或曲目的时间戳。这将返回一个显示 ARTISTS_ID 和最新 TIMESTAMP 的虚拟表。

```
 SELECT ARTIST_ID, MAX(`TIMESTAMP`) `TIMESTAMP`
     FROM TRACKS
 GROUP BY ARTIST_ID 
```

现在，让我们将该查询嵌套到另一个查询中，以得出一个特定的 track_id，它是每个艺术家的最新曲目。有必要消除艺术家拥有多个具有完全相同时间戳的曲目的情况。在这种情况下，我们将获取编号最小的 TRACK_ID。

我想艺术家专辑中的所有曲目都有相同的时间戳，但它们的曲目 ID 是升序的，所以这会选择艺术家最新专辑中的第一首曲目。

```
 SELECT T.ARTIST_ID, MIN(T.TRACK_ID) TRACK_ID
    FROM (
             SELECT ARTIST_ID, MAX(`TIMESTAMP`) `TIMESTAMP`
               FROM TRACKS
           GROUP BY ARTIST_ID
          ) L
    JOIN TRACKS T ON (    L.ARTIST_ID   = T.ARTIST_ID 
                      AND L.`TIMESTAMP` = T.`TIMESTAMP`)
GROUP BY T.ARTIST_ID 
```

看看这是怎么回事？内部子查询查找每个艺术家的最新时间戳，外部查询使用子查询查找该艺术家和时间戳的编号最小的曲目 ID。所以，现在我们有一个虚拟表，显示每个艺术家的最新 track_id。

最后，我们需要查询加入的艺人和曲目信息，以获取您的艺人列表及其最新曲目。我们将把这两个物理表与我们刚刚找到的虚拟表连接起来。

```
 SELECT A.*, T.*
      FROM (
             SELECT T.ARTIST_ID, MIN(T.TRACK_ID) TRACK_ID
               FROM (
                        SELECT ARTIST_ID, MAX(`TIMESTAMP`) `TIMESTAMP`
                          FROM TRACKS
                      GROUP BY ARTIST_ID
                     ) L
               JOIN TRACKS T ON (    L.ARTIST_ID   = T.ARTIST_ID 
                                 AND L.`TIMESTAMP` = T.`TIMESTAMP`)
           GROUP BY T.ARTIST_ID
           ) X
      JOIN ARTISTS A ON X.ARTIST_ID = A.ARTIST_ID
      JOIN TRACKS  T ON (X.TRACK_ID = T.TRACK_ID AND X.ARTIST_ID = T.ARTIST_ID)
  ORDER BY A.NAME 
```

可以这样想：您有一些物理表，其中包含您的数据。您还可以创建带有子查询的虚拟表，并通过将它们嵌套在查询中来使用它们，就像它们是物理表一样。这种嵌套是它被称为*结构化*查询语言的原因之一。

您将需要 TIMESTAMP、ARTIST_ID 和 TRACK_ID 列上的索引才能有效地工作。

***编辑：*** 在您的问题中确实没有足够的关于您的架构的信息来弄清楚如何明确地获取最近上传的曲目。

如果 TRACK_ID 是 TRACKS 表的自动递增主键，则很容易。获取与艺术家左连接的编号最高的曲目 ID（如果艺术家表中没有相应的行，则左连接）。

```
 SELECT T.*, A.*
          FROM TRACKS T
     LEFT JOIN ARTISTS A ON T.ARTIST_ID = A.ARTIST_ID
      ORDER BY T.TRACK_ID DESC
         LIMIT 1 
```

如果 TRACK_ID 不是自动递增的主键，但您几乎没有两个时间戳相同，请执行此操作。如果恰好有两个或多个具有相同时间戳的轨道，它将任意选择其中一个。

```
 SELECT T.*, A.*
          FROM TRACKS T
     LEFT JOIN ARTISTS A ON T.ARTIST_ID = A.ARTIST_ID
      ORDER BY T.`TIMESTAMP` DESC
         LIMIT 1 
```

这些数据的诀窍是要非常小心地准确指定您想要的内容。从您的问题中可以清楚地看出，您正在尝试循环获取每个艺术家的最新曲目。我的查询在您的程序中没有循环就做到了。但是，你知道吗，我不知道你所有列的名称，所以我的 SQL 可能并不完美。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T15:02:11.953

`artists`表和`tracks`表之间的关系是[`one-to-many`](http://sqlrelationship.com/one-to-many-relationship/)。因此，您的`tracks`表应该有一个列`artist_id`和[外键约束](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)`id`，该约束将该列与表中的列交叉引用`artists`。完成后，获取最新曲目的查询将如下所示：

```
SELECT id, name, url, MAX(timestamp) timestamp
FROM tracks
GROUP BY artist_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T23:23:31.230

非常感谢@OllieJones 和@hookman 在这方面帮助我。我找到了我需要的查询，并且我在一个查询中完成了所有操作，没有任何 PHP，这要感谢他们俩。

不管怎样，它就在这里；

```
SELECT T.url, A.ID, T.ID
FROM tracks T
LEFT JOIN ARTISTS A ON T.ID = A.ID
WHERE T.ID = A.ID
ORDER BY T.timestamp DESC                                      
LIMIT 1 
```

我接受了@OllieJones 的大部分查询并对其进行了一些编辑。我添加了 WHERE 子句，以便仅选择艺术家并删除 *，因此仅返回所需的数据。我还接受了@hookman 的建议并使用了大量外键。以后会帮上大忙的。

# android - 在android中一张一张显示图像

> ID：12019204
> 
> 赞同：0
> 
> 时间：2012-08-18T14:07:15.250
> 
> 标签：android, arrays

我想在启动画面中一个一个地显示我的应用程序的字母。我有 2 个数组，用于保存资源文件夹中的图像的**drw数组和保存图像的****drw_icon**，我编写了这样的代码：

```
 for(j=0;j<lend;j++)
    {           
        drw_icon[j].setBackgroundResource(drw[j]); //this line shows error
    } 
```

其中lend 是数组的长度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T16:12:56.567

使用处理程序延迟执行图像设置的可运行程序。

```
final ImageView drw_icon[] = new ImageView[] {
            (ImageView) findViewById(R.id.image1),
            (ImageView) findViewById(R.id.image2),
            (ImageView) findViewById(R.id.image3),
            (ImageView) findViewById(R.id.image4),
            (ImageView) findViewById(R.id.image5) };

    final int drw[] = new int[] { R.drawable.ic_launcher,
            R.drawable.ic_launcher, R.drawable.ic_launcher,
            R.drawable.ic_launcher, R.drawable.ic_launcher };

    Handler handler = new Handler();
    long delay = 1000l;

    for (int j = 0; j < drw.length && j < drw_icon.length; j++) {
        final int position = j;
        handler.postDelayed(new Runnable() {

            @Override
            public void run() {
                drw_icon[position].setImageResource(drw[position]);
            }
        }, delay * j);
    } 
```

# wpf - ArcSegment 是如何工作的？半径不是真正的半径？

> ID：12019207
> 
> 赞同：1
> 
> 时间：2012-08-18T14:07:21.127
> 
> 标签：wpf

我用 arcsegment 绘制一条弧线，以编程方式更改其坐标（起点和点）。我将默认大小设置为 (50,50)。在屏幕上，弧线确实发生了变化（随着起点和点的值变化而增长），但大小从未更新（始终为 50,50）。MSDN 说 size 属性是弧的半径，那么为什么这个值永远不会改变？

我找到了一种从弧的起点、终点和中点计算实际半径的方法，并且确实不同。我希望用鼠标更改半径，但是如果半径属性不是一个真正的属性（要设置哪个属性）怎么办？

谢谢你的帮助 ！

```
<Path Name="ConnecteurPath" Stroke="Black">
    <Path.Data>
        <PathGeometry>
            <PathFigure x:Name="pthFigure" >
                <ArcSegment x:Name="arcSeg" IsLargeArc="True"
                            Size="50, 50"
                            SweepDirection="Clockwise" />
            </PathFigure>
        </PathGeometry>
    </Path.Data>
</Path> 
```

# iphone - 如何在 iPhone 应用程序中解码 URL

> ID：12019208
> 
> 赞同：0
> 
> 时间：2012-08-18T14:07:34.567
> 
> 标签：iphone, safari

我有来自服务器的 URL，我必须在 iPhone 上的 Safari 中打开它，但它总是显示“Safari 无法打开 URL，地址无效”。这是网址 [http://click.linksynergy.com/fs-bin/stat?id=egb2DUM1TzE&offerid=146261&type=3&subid=0&tmpid=1826&RD_PARM1=http%253A%252F%252Fitunes.apple.com%252Fus%252Falbum%252Fdead-消失的壮举。贾斯汀-timberlake%252Fid291279841%253Fi%253D291279876%2526uo%253D4%2526partnerId%253D30](http://click.linksynergy.com/fs-bin/stat?id=egb2DUM1TzE&offerid=146261&type=3&subid=0&tmpid=1826&RD_PARM1=http%253A%252F%252Fitunes.apple.com%252Fus%252Falbum%252Fdead-gone-feat.-justin-timberlake%252Fid291279841%253Fi%253D291279876%2526uo%253D4%2526partnerId%253D30)

但是我可以在 Mac 浏览器上成功打开这个 URL。我知道这是编码的问题，但我怎样才能解码它以便在我的 iPhone 浏览器上打开它。谢谢-

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T14:21:02.227

iTunes 附属链接应该适用于 Mac 和 iOS。可能是您在 iPhone 上设置的商店区域中没有该链接。如果您正在控制服务器地址，那么我建议您使用以下链接中解释的缩短 URL：http: [//david-smith.org/blog/2011/12/28/user-friendly-itunes-affiliate-links/](http://david-smith.org/blog/2011/12/28/user-friendly-itunes-affiliate-links/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T14:27:47.357

问题不是您的会员链接，而是您使用的指向专辑本身的链接导致设备出现问题。链接

```
http://itunes.apple.com/us/album/.... 
```

将在桌面 safari 上正常工作，如果安装了 itunes，将导致它启动。
当您在设备上时，`http`需要替换为`itms`，否则您将收到您所看到的错误

```
itms://itunes.apple.com/us/album.... 
```

如果您正在从设备查看链接，您正在寻找的内容。该`itms`链接也适用于桌面 safari，但不适用于 IE 或 Firefox 等。需要注意的是，itms 链接不适用于 iPhone 模拟器。

这是一个指向也处理此问题[的 stackoverflow 问题的链接。](https://stackoverflow.com/questions/8867618/how-do-i-launch-the-itunes-store-app-from-my-application)

# mysql - xml unix时间戳转mysql时间戳并记录mysql

> ID：12019210
> 
> 赞同：0
> 
> 时间：2012-08-18T14:07:47.537
> 
> 标签：mysql, xml, unix-timestamp

我的 XML：

```
<simpletype type="TURKEY">
<city code="01">
    <telcode>(0 322)</telcode>
    <name>Adana</name>
    <time>1345337940</time>
</city>
<city code="02">
    <telcode>(0 416)</telcode>
    <name>Adıyaman</name>
    <time>1340236800</time>
    </city>
</simpletype> 
```

MY mysql导入代码：

```
require_once('db.php');
@mysql_connect(_SERVER,_USER,_PASSWORD);
@mysql_select_db(_DATABASE);
$doc = new DOMDocument();
$doc->load( 'CityCode.xml' );
$cities = $doc->getElementsByTagName( "city" );
foreach( $cities as $city )
{
$names = $city->getElementsByTagName( "name" );
$codes = $city->getElementsByTagName( "telcode" );
$times = $city->getElementsByTagName ( "time");
$name = $names->item(0)->nodeValue;
$code = $codes->item(0)->nodeValue;
$time = $times->item(0)->nodeValue;
mysql_query("SET CHARACTER SET utf8"); 
$sql = "INSERT INTO telcode (sehir, name, time) VALUES ('$name' ,'$code'     ,'UNIX_TIMESTAMP ($time') ";
@mysql_query($sql); 
```

}

我的问题：我的 xml 源有一个 unix 时间戳，我必须使用 mysql 时间戳 (0000-00-00 00:00:00) 如何将 $time unix 时间戳转换为 mysql 时间戳并记录 mysql db？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T14:12:53.350

在 php 中，您可以将时间戳读取为您喜欢的任何格式。

`date($format, $timestamp);`

[http://php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T14:21:22.507

在 MySQL 中，您可以使用 FROM_UNIXTIME 函数将 UNIX 样式的时间戳（自 1970 UTC 以来的秒数）转换为 MySQL 时间戳。

看这里。[http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_from-unixtime](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_from-unixtime)

# c++ - 数组的循环缓冲区？

> ID：12019221
> 
> 赞同：0
> 
> 时间：2012-08-18T14:08:55.347
> 
> 标签：c++, boost, circular-buffer

我有一个二维双精度需要保存在循环缓冲区中。我宁愿将它放在一个缓冲区中，而不必跟上两个一维缓冲区。是否可以轻松地做到这一点，或者最好继续使用两个缓冲区？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T14:56:38.090

如果每个元素的大小相同，即 D1 x D2，则只需分配一个数组

```
double data[D1*D2*numElem] 
```

并使用行/列主要索引（ i*D2 + j 或 i*D1 + j）来访问每个元素中的值。当然，每当您调整大小或插入/删除元素时，都必须分配新缓冲区并复制值。如果每个元素的大小是可变的，或者您认为插入/删除/调整大小将很常见，请使用两个缓冲区。如果容器是稳定的并且迭代常见的元素，单个缓冲区可能会更好。

# c++ - 模板类和预处理器指令

> ID：12019224
> 
> 赞同：2
> 
> 时间：2012-08-18T14:09:18.057
> 
> 标签：c++, templates, c-preprocessor, preprocessor-directive

模板类是*许多*可能的类，所以我问我：预处理器指令

```
#ifndef MY_CLASS
#define MY_CLASS

template<typename T>
class My_Class
{};

#endif 
```

是必需品吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T14:15:15.020

包含保护可防止重复包含同一文件。您需要它们来阻止包含以下非法定义的翻译单元：

```
template <typename T> class My_Class { };
template <typename T> class My_Class { };

// Error: redefinition of ‘class Foo<T>’ 
```

重复包含很容易发生。例如，考虑一个包含`A`and的情况`B`，并且由于某些未记录的原因`A`已经包含。`B`您可能无权`B`从显式包含中省略，但也不应`A`要求不包含它。只有使用包含守卫（或某种等效机制）才能使这样的文件结构成为可能。

**简而言之：**您可以有重复的*声明*，但在一个翻译单元中只能有一个*定义。*

[*反例：*以下*是*合法的：]

```
template <typename T> class Foo;
template <typename T> class Foo;
template <typename T> class Foo;
template <typename T> class Foo;
template <typename T> class Foo { };
int main() {} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T14:13:06.470

宏可能被用作“包含守卫”，如果标题碰巧被包含多次，可以防止多次声明错误。所以是的，它们对于其他所有内容都是“必要的”：如果您可以确定标题不会被多次包含，您可以将它们排除在外，但另一方面，它们并没有真正增加文件大小或编译时间。

# asp.net - 无法创建 asp.net 成员数据库 aspnetdb

> ID：12019227
> 
> 赞同：0
> 
> 时间：2012-08-18T14:09:24.580
> 
> 标签：asp.net, mdf, aspnetdb, wsat

我似乎无法通过网站管理工具创建 aspnetdb.mdf。我正在使用 SQL Express 2008 和 Visual Studio Web Developer 2010 Express。我在管理工具中收到以下错误：

> 您选择的数据存储存在问题。这可能是由无效的服务器名称或凭据或权限不足引起的。这也可能是由于未启用角色管理器功能造成的。单击下面的按钮可重定向到您可以选择新数据存储的页面。
> 
> 以下消息可能有助于诊断问题：执行 SQL 文件“InstallCommon.sql”期间发生错误。SQL 错误编号为 5170，SqlException 消息为：无法创建文件 'C:\USERS**\DOCUMENTS\VISUAL STUDIO 2010\WEBSITES\BUGZ-B-GONE\APP_DATA\ASPNETDB_TMP.MDF'，因为它已经存在。更改文件路径或文件名，然后重试该操作。创建数据库失败。无法创建列出的某些文件名。检查相关错误。创建 ASPNETDB_97c73957a1fb4a189ccca0449aa7d754 数据库...

当我删除 mdf 文件或更改路径时，我也会收到此错误。

下面是 web.config 文件：

```
<configuration>
  <connectionStrings>
   <add name="ApplicationServices" connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnetdb.mdf;User Instance=true" providerName="System.Data.SqlClient"/>
   <add name="DATABASEConnectionString" connectionString="Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\DATABASE.mdf;Integrated Security=True;User Instance=True" providerName="System.Data.SqlClient"/>
  </connectionStrings>
  <system.web>
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Data.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
      </assemblies>
    </compilation>
    <authentication mode="Forms">
      <forms loginUrl="~/Account/Login.aspx" timeout="2880"/>
    </authentication>
   <membership>
      <providers>
        <clear/>
        <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="ApplicationServices" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/"/>
      </providers>
    </membership>
    <profile>
      <providers>
        <clear/>
        <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="ApplicationServices" applicationName="/"/>
      </providers>
    </profile>
    <roleManager enabled="true">
      <providers>
        <clear />
        <add connectionStringName="ApplicationServices" applicationName="/"
          name="AspNetSqlRoleProvider" type="System.Web.Security.SqlRoleProvider" />
        <add applicationName="/" name="AspNetWindowsTokenRoleProvider"
          type="System.Web.Security.WindowsTokenRoleProvider" />
      </providers>
    </roleManager>
  </system.web>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>
</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T14:45:59.967

您的错误表明数据库已经存在，因此首先将其删除，然后运行 ​​WSAT。如果不起作用，则删除您的 web.config 并将新的配置文件添加到您的项目中，然后运行 ​​WSAT 并添加 aspnetdb 数据库。

你也可以试试[aspnet_regsql](http://msdn.microsoft.com/en-us/library/ms229862%28v=vs.80%29.aspx)

路径：C:\Windows\Microsoft.NET\Framework\v4.0.30319

运行它，然后您可以在数据库中添加或删除 AspNet 数据库表。[在MSDN](http://msdn.microsoft.com/en-us/library/ms229862%28v=vs.80%29.aspx)上阅读更多详细信息

# javascript - 带有ajax的javaScript返回函数

> ID：12019229
> 
> 赞同：2
> 
> 时间：2012-08-18T14:09:26.497
> 
> 标签：javascript, ajax, return-value

> **可能重复：**
> [jQuery：ajax 调用成功后返回数据](https://stackoverflow.com/questions/5316697/jquery-return-data-after-ajax-call-success)
> [jQuery AJAX：成功时返回值](https://stackoverflow.com/questions/9055810/jquery-ajax-return-value-on-success)

我不明白为什么`goodPassword`总是返回`undefined` 我确定这只是一个愚蠢的错误，并会感谢你的回答

```
function foo(){
    var goodPassword;
    jQuery.ajax({
        data: "action=Potato",
        url: 'servletPotato',
        timeout: 2000,
        error: function() {
            console.log("Failed to send ajax");
        },
        success: function(r) {
            var data = jQuery.parseJSON(r);
            if(data.aprovePassword == "true")
            {
                goodPassword = true;
            }
            else
            {
                goodPassword = false;
            }
        }
    });
    return goodPassword;
} 
```

ajax 调用肯定有效，并且 data.aprovePassword 肯定从 servlet 返回为“false”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T14:13:07.933

因为`goodPassword`还没有分配任何东西，因为 XHR 请求在函数结束后执行，这就是为什么到函数结束时，没有分配任何东西。另一种功能是：

```
function foo(successCallback) {
    var goodPassword;
     jQuery.ajax({
         data: "action=Potato",
         url: 'servletPotato',
         timeout: 2000,
         error: function() {
            console.log("Failed to send ajax");
         },
         success: function(r) {
            var data = jQuery.parseJSON(r);
            if(data.aprovePassword == "true")
                {
                    goodPassword = true;
                }
            else
                {
                    goodPassword = false;
                }
            successCallback(goodPassword);
       }});
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T14:17:17.360

问题是 ajax 请求是异步的，所以函数在启动 jQuery.ajax 调用后立即返回，此时 goodPassword 仍然未定义。

相反，您需要执行以下操作：

```
function foo(callback) {
    var goodPassword;

    jQuery.ajax({
     data: "action=Potato",
     url: 'servletPotato',
     timeout: 2000,
     error: function() {
        console.log("Failed to send ajax");
     },
     success: function(r) {
        var data = jQuery.parseJSON(r);

        if(data.aprovePassword == "true") {
                goodPassword = true;
        } else {
                goodPassword = false;
        }

        callback(goodPassword);
   }});
} 
```

然后，您将像这样调用该函数：

```
foo(function(goodPassword) {
    console.log('goodPassword is ' + goodPassword);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T14:20:26.723

您无法检查返回值，因为函数返回后发生 ajax 调用。

要执行两项操作，一项针对成功，一项针对失败，您需要执行以下操作：-

```
var foo = function(goodCallback, badCallback){
  jQuery.ajax({
    data: "action=Potato",
    url: 'servletPotato',
    timeout: 2000,
    error: function() {
      console.log("Failed to send ajax");
    },
    success: function(r) {
      var data = jQuery.parseJSON(r);
      if(data.aprovePassword == "true")
      {
        goodCallback();
      }
      else
      {
        badCallback();
      }
    }
  });
};

foo(
  function() {
    console.log('dude good password');
  },
  function() {
    console.log('bad password');
  }
); 
```

或只有 1 个回调函数采用 goodpassword 的布尔值...

# c# - 解决异常的“超出范围”错误行为

> ID：12019230
> 
> 赞同：3
> 
> 时间：2012-08-18T14:09:45.550
> 
> 标签：c#, winforms, text, find-occurrences

我正在创建 C# winforms 应用程序，它必须在文件中查找所有出现的字符串，裁剪中间的文本，然后进行一些处理。

文本文件具有以下格式：

> ---- Key_String ----
> 
> 要裁剪的文本 1
> 
> ---- Key_String ----
> 
> 要裁剪的文本 2
> 
> ---- Key_String ----
> 
> 要裁剪的文本 3

基本上我正在从该文件中裁剪“text1”、“text2”、“text3”。

这是执行上述操作的代码：

```
string contents = "";
MatchCollection matches;
using (StreamReader reader = File.OpenText(filepath))
{
    contents = reader.ReadToEnd();
    matches = Regex.Matches(contents, "Key_String");
}
int totalmatchcount = matches.Count;

for (int i = 0; i < totalmatchcount; i++ )
{
    int indd1 = matches[i].Index;
    int indd2 = 0;
    string sub_content = "";
    if (i != totalmatchcount - 1)
    {
        indd2 = matches[i+1].Index;
        try
        {
            sub_content = contents.Substring(indd1, indd2); // error here
        }
        catch
        {
            MessageBox.Show("Index 1: "  + indd1 + "\n" +
                "Index 2: "  + indd2 + "\n" +
                "Max index (length - 1): "  + (contents.Length - 1)
                );
        }
    }
    else { sub_content = contents.Substring(indd1); }
    // do some stuff with "sub_content"
} 
```

它适用于我的某些文件，但在某些情况下 - 我收到以下错误：

> 索引和长度必须引用字符串中的位置。参数名称：长度

这很奇怪，因为我正在裁剪的子字符串位于主字符串内部，而不是您猜到的外部。我可以用“try-catch”输出证明它：

> 索引一：3211
> 
> 指数二：4557
> 
> 最大索引（长度 - 1）：5869

如您所见 - 我没有裁剪位于索引范围之外的东西，那么问题是什么？

PS我已经搜索了解决方案，但在每种情况下的基本想法都是 - “错误的索引”。就我而言 - 索引在范围内。好吧，至少我是这么认为的。任何帮助，将不胜感激。

**编辑：**

与此类似的东西应该可以解决问题：

```
 public string SubstringFix(string original, int start, int end)
    {
        int endindex = 0;
        if (end < original.Length)
        {
            endindex = end;
        }
        else
        {
            endindex = original.Length - 1;
        }

        return original.Substring(start, (end - start));
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T14:13:02.803

`Substring`不需要两个索引。它需要一个索引和一个长度。大概，你想要

```
indd2 - indd1 
```

作为第二个参数（并检查该表达式是否存在非一错误）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T14:19:42.480

有了你所拥有的，这就是你得到的

```
3211+4557 = 7768 
```

并且大于字符串的长度。

这就是子字符串的工作方式

```
substring(startindex, length) 
```

字符串长度不应小于 startIndex + length

# microsoft-metro - 如何在 WinRT 中从 RichTextBlock 中检索文本

> ID：12019235
> 
> 赞同：1
> 
> 时间：2012-08-18T14:10:17.793
> 
> 标签：microsoft-metro, windows-runtime, winrt-xaml

我正在使用由 VS2012 的默认 Metro Style 项目模板添加的标准 RichTextColumns.cs 帮助程序类。它在内部使用 RichTextBlock 来添加 RichTextColumns。DataBinding 与以下标记一起工作正常

```
<common:RichTextColumns>
 <common:RichTextColumns.ColumnTemplate>
  <DataTemplate>
   <RichTextBlockOverflow Width="400" Margin="50,0,0,0"/>
  </DataTemplate>
 </common:RichTextColumns.ColumnTemplate>
 <RichTextBlock Width="400">
  <Paragraph>
   <Run Text="{Binding Content}"/>
  </Paragraph>
 </RichTextBlock> 
```

现在我在“内容”中嵌入了在 WinRT 中不被视为超链接的超链接。我需要它们表现得像超链接。所以我想检索绑定到 RichTextBlock 的文本，对其进行标记，在适当的位置插入具有 HyperlinkBut​​ton 的 InlineUI 元素。现在，如果我只能检索绑定到 RichTextBlock 的文本，我就可以做到这一切。不幸的是，我似乎无法“检索”它。

我试过了

```
RichTextBlock value = (RichTextBlock)GetValue(RichTextContentProperty);
valueRun = (Run)((Paragraph)value.Blocks[0]).Inlines[0];
value.Select(((Paragraph)value.Blocks[0]).ContentStart, ((Paragraph)value.Blocks[0]).ContentEnd);
Paragraph para = TokenizeTweet(value.SelectedText); 
```

但 SelectedText 始终为空。但是，如果我这样做， `value.Blocks.Clear()`
它会清除正在绑定的文本。我错过了什么？

简而言之，如何在 WinRT（不是 WPF 或 Silverlight）中从 RichTextBlock 中检索无格式文本。

谢谢和问候， 苏米特。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T16:00:12.473

与其尝试检索它，不如简单地在绑定上使用转换器？

# java - 用Java解决n-puzzle

> ID：12019238
> 
> 赞同：1
> 
> 时间：2012-08-18T14:10:52.053
> 
> 标签：java, search, artificial-intelligence, graph-algorithm, sliding-tile-puzzle

我正在尝试实现一个程序来解决[n-puzzle 问题](http://en.wikipedia.org/wiki/Fifteen_puzzle)。
我用 Java 编写了一个简单的实现，它的问题状态由表示图块的矩阵表征。我还能够自动生成给出起始状态的所有状态图。然后，在图表上，我可以做一个 BFS 来找到目标状态的路径。
但问题是我的内存不足，我什至无法创建整个图表。我尝试使用 2x2 瓷砖，它可以工作。还有一些 3x3（这取决于起始状态和图中的节点数）。但总的来说这种方式是不适合的。
所以我尝试在运行时生成节点，同时搜索。它可以工作，但速度很慢（有时几分钟后它仍然没有结束，我终止了程序）。
顺便说一句：我只给出可解决的配置作为起始状态，并且我不创建重复的状态。
所以，我无法创建图表。这导致了我的主要问题：我必须实现 A* 算法并且我需要路径成本（即每个节点到起始状态的距离），但我认为我无法在运行时计算它。我需要整个图表，对吗？因为 A* 没有遵循图的 BFS 探索，所以我不知道如何估计每个节点的距离。因此，我不知道如何执行 A* 搜索。
有什么建议吗？

**编辑**

`State:`

```
private int[][] tiles;
private int pathDistance;
private int misplacedTiles;
private State parent;

public State(int[][] tiles) {
    this.tiles = tiles;
    pathDistance = 0;
    misplacedTiles = estimateHammingDistance();
    parent = null;
}

public ArrayList<State> findNext() {
    ArrayList<State> next = new ArrayList<State>();
    int[] coordZero = findCoordinates(0);
    int[][] copy;
    if(coordZero[1] + 1 < Solver.SIZE) {
        copy = copyTiles();
        int[] newCoord = {coordZero[0], coordZero[1] + 1};
        switchValues(copy, coordZero, newCoord);
        State newState = checkNewState(copy);
        if(newState != null)
            next.add(newState);
    }
    if(coordZero[1] - 1 >= 0) {
        copy = copyTiles();
        int[] newCoord = {coordZero[0], coordZero[1] - 1};
        switchValues(copy, coordZero, newCoord);
        State newState = checkNewState(copy);
        if(newState != null)
            next.add(newState);
    }
    if(coordZero[0] + 1 < Solver.SIZE) {
        copy = copyTiles();
        int[] newCoord = {coordZero[0] + 1, coordZero[1]};
        switchValues(copy, coordZero, newCoord);
        State newState = checkNewState(copy);
        if(newState != null)
            next.add(newState);
    }
    if(coordZero[0] - 1 >= 0) {
        copy = copyTiles();
        int[] newCoord = {coordZero[0] - 1, coordZero[1]};
        switchValues(copy, coordZero, newCoord);
        State newState = checkNewState(copy);
        if(newState != null)
            next.add(newState);
    }
    return next;
}

private State checkNewState(int[][] tiles) {
    State newState = new State(tiles);
    for(State s : Solver.states)
        if(s.equals(newState))
            return null;
    return newState;
}

@Override
public boolean equals(Object obj) {
    if(this == null || obj == null)
        return false;
    if (obj.getClass().equals(this.getClass())) {
        for(int r = 0; r < tiles.length; r++) { 
            for(int c = 0; c < tiles[r].length; c++) {
                if (((State)obj).getTiles()[r][c] != tiles[r][c])
                    return false;
            }
        }
            return true;
    }
    return false;
} 
```

`Solver:`

```
public static final HashSet<State> states = new HashSet<State>();

public static void main(String[] args) {
    solve(new State(selectStartingBoard()));
}

public static State solve(State initialState) {
    TreeSet<State> queue = new TreeSet<State>(new Comparator1());
    queue.add(initialState);
    states.add(initialState);
    while(!queue.isEmpty()) {
        State current = queue.pollFirst();
        for(State s : current.findNext()) {
            if(s.goalCheck()) {
                s.setParent(current);
                return s;
            }
            if(!states.contains(s)) {
                s.setPathDistance(current.getPathDistance() + 1);
                s.setParent(current);
                states.add(s);
                queue.add(s);
            }
        }
    }
    return null;
} 
```

基本上这就是我所做的：
-有一个. 元素 ( ) 是根据 排序的，它计算， 其中是路径成本，是启发式（错位图块的数量）。 - 我给出了起始配置并寻找所有的后继者。 - 如果一个后继者还没有被访问过（即如果它不在全局集合中），我将它添加到队列中，并将当前状态设置为其父级和路径成本。 - 出列并重复。 我认为它应该起作用，因为： - 我保留所有访问过的状态，所以我没有循环。`Solver``solve``SortedSet``States``Comparator1``f(n) = g(n) + h(n)``g(n)``h(n)`

`States``States``parent's path + 1`

- 另外，不会有任何无用的优势，因为我会立即存储当前节点的后继节点。例如：如果从 AI 可以到 B 和 C，并且从 BI 也可以到 C，就不会有边 B->C（因为每条边的路径成本为 1，并且 A->B 比 A 便宜->B->C)。
- 每次我选择用最小值扩展路径时`f(n)`，根据 A*。

但它不起作用。或者至少，几分钟后它仍然找不到解决方案（我认为在这种情况下需要很多时间）。
如果我在执行 A* 之前尝试创建树结构，我会用完构建它的内存。

**编辑 2**

这是我的启发式函数：

```
private int estimateManhattanDistance() {
    int counter = 0;
    int[] expectedCoord = new int[2];
    int[] realCoord = new int[2];
    for(int value = 1; value < Solver.SIZE * Solver.SIZE; value++) {
        realCoord = findCoordinates(value);
        expectedCoord[0] = (value - 1) / Solver.SIZE;
        expectedCoord[1] = (value - 1) % Solver.SIZE;
        counter += Math.abs(expectedCoord[0] - realCoord[0]) + Math.abs(expectedCoord[1] - realCoord[1]);
    }
    return counter;
}

private int estimateMisplacedTiles() {
    int counter = 0;
    int expectedTileValue = 1;
    for(int i = 0; i < Solver.SIZE; i++)
        for(int j = 0; j < Solver.SIZE; j++) {
            if(tiles[i][j] != expectedTileValue)
                if(expectedTileValue != Solver.ZERO)
                    counter++;
            expectedTileValue++;
        }
    return counter;
} 
```

如果我使用一个简单的贪心算法，它们都可以工作（使用曼哈顿距离真的很快（大约 500 次迭代才能找到解决方案），而错位瓷砖的数量大约需要 10k 次迭代）。如果我使用 A*（也评估路径成本），它真的很慢。

比较器是这样的：

```
public int compare(State o1, State o2) {
    if(o1.getPathDistance() + o1.getManhattanDistance() >= o2.getPathDistance() + o2.getManhattanDistance())
        return 1;
    else
        return -1;
} 
```

**编辑 3**

有一点错误。我修复了它，现在 A* 可以工作了。或者至少，对于 3x3，如果仅通过 700 次迭代就可以找到最佳解决方案。对于 4x4，它仍然太慢。我将尝试使用 IDA*，但有一个问题：使用 A* 需要多长时间才能找到解决方案？分钟？小时？我离开它10分钟，它并没有结束。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-07T07:08:44.727

为您的状态类添加路径成本，每次从父状态 P 到另一个状态（如 C）时，请执行以下操作：c.cost = P.cost + 1 这将自动计算每个节点的路径成本这也是一个非常在 C# 中使用 A* 实现 8 谜题求解器的良好而简单的实现 看看它你会学到很多东西： http: [//geekbrothers.org/index.php/categories/computer/12-solve-8-puzzle-with -一个](http://geekbrothers.org/index.php/categories/computer/12-solve-8-puzzle-with-a)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T20:36:28.643

无需生成所有状态空间节点来使用 BFS、A* 或任何树搜索来解决问题，您只需添加可以从当前状态探索的状态到边缘，这就是为什么有后继功能的原因。如果 BFS 消耗大量内存是正常的。但我不知道这会带来什么问题。请改用 DFS。对于 A*，您知道您做了多少步才能达到当前状态，并且您可以通过放松问题来估计解决问题所需的步数。作为一个例子，你可以认为任何两个瓷砖都可以替换然后计算解决问题所需的移动。你的启发式只需要被接受，即。您的估计少于解决问题所需的实际动作。

# c# - 如何在 C#.net 中以任何顺序使用 oledbdatareader 从 excel 中读取几列？

> ID：12019247
> 
> 赞同：0
> 
> 时间：2012-08-18T14:12:06.937
> 
> 标签：c#, excel, oledb

当我尝试使用`OLEDbDataReader`类从 excel 中读取记录时，我无法以我想要的任何顺序读取每一行的列数据。它抛出*Index out of range 异常*。

我的列是名字，姓氏，薪水。

```
OleDbDataReader oledbReader = oledbCmd.ExecuteReader();

// Doesn't display anything and throws "Index out of range exception".
MessageBox.Show(oledbReader["LastName"]); 
```

如果我尝试按名字、姓氏和薪水的顺序阅读，它可以工作，但我想按我想要的任何顺序阅读。那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T14:25:44.890

您必须以这种方式编写选择查询： select col1,col2,col3 from table

在特定条件下不要使用 select * from table this。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-02T08:34:53.307

你可以按任何顺序阅读，试试这个：

```
using (OleDbDataReader reader = oledbCmd.ExecuteReader())
{

    while (reader.Read())
    {
        a = reader.GetValue(0).ToString();
        b = reader.GetValue(3).ToString();
        c = reader.GetValue(4).ToString();

    }

} 
```

在这个例子中我使用`reader.GetValue(0).ToString();`因为我不知道值的类型，但是如果你知道你可以使用 reader.GetInt32(0) 和其他的类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T15:30:25.000

我总是使用整数列索引从 Excel 中读取数据，并使用枚举来定义每列的索引。所以例如...

MessageBox.Show(oleDbReader.GetValue(theColumnEnum.LastName))

# android - 将 onClick 中的视图传递给私有类会导致发送错误的对象

> ID：12019249
> 
> 赞同：0
> 
> 时间：2012-08-18T14:12:17.590
> 
> 标签：android, tablelayout, tablerow

我想做的是在 TableLayout 中显示一个复选框、一个按钮和一个微调器。这些值是从 Web 服务获取的，并且 tableRows 会动态添加到 TableLayout。

第一个按钮创建一个带有列表视图的对话框。列表视图包含数字 1-30。当用户单击在 ListView 中选择一个值时，我需要将按钮的文本更改为单击的值。该代码适用于单击的第一个按钮（第一次打开列表视图并选择一个值时，按钮的文本会更改）。但是第二次打开列表视图并选择一个按钮时，第一个按钮的文本会发生变化，而不是被点击的那个。我究竟做错了什么？

```
protected void fillTableView() {
    for (MedicineInfo temp : orderedMedList) {
        LayoutInflater inflater = getLayoutInflater();
        TableRow tr = (TableRow) inflater.inflate(
                R.layout.neworderrestockmedicinelist2, tlOrderInfo, false);
        CheckBox cbMedicine = (CheckBox) tr
                .findViewById(R.id.cbNewOrderRestockMedName);
        cbMedicine.setText(temp.vcProduct);
        Button btnQty = (Button) tr
                .findViewById(R.id.btnNewOrderRestockQty);
        Spinner spnIntakeUnit = (Spinner) tr
                .findViewById(R.id.spnNewOrderRestockIntakeUnit);
        IntakeUnitAdapter intakeUnitAda = new IntakeUnitAdapter(this);
        spnIntakeUnit.setAdapter(intakeUnitAda);
        ArrayAdapter<String> arrayAda = new ArrayAdapter<String>(this,
                android.R.layout.simple_spinner_item, numberArray);
        arrayAda.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        tlOrderInfo.addView(tr);
        btnQty.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                dlgQty = new Dialog(mContext);
                TableRow tr = (TableRow) v.getParent();
                ListView lvQty = new ListView(mContext);
                QuantityAdapter qtyAda = new QuantityAdapter(mContext);
                lvQty.setAdapter(qtyAda);
                dlgQty.addContentView(lvQty,
                        new LinearLayout.LayoutParams(
                                LayoutParams.FILL_PARENT,
                                LayoutParams.WRAP_CONTENT));
                ItemSelectTest test = new ItemSelectTest(tr);
                lvQty.setOnItemClickListener(test);
                showDialog(DLG_QTY);
                test = null;

            }
        });
    }
}

private class ItemSelectTest implements OnItemClickListener {
    Button btn = null;

    public ItemSelectTest(TableRow tr) {
        Button bt = (Button) tr.findViewById(R.id.btnNewOrderRestockQty);
        btn = bt;
    }

    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
            long arg3) {
        btn.setText(String.valueOf(arg3));
    }

} 
```

In the same shown above, i'm passing the TableRow that contains the button. I've also tried passing v from onClick. The problem is the same either way..

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T14:43:35.260

I think that the problem is the way that you're showing the dialog. If you look at the docs for `showDialog` ([here](http://developer.android.com/reference/android/app/Activity.html#showDialog%28int,%20android.os.Bundle%29)):

> Show a dialog managed by this activity. A call to onCreateDialog(int, Bundle) will be made with the same id the first time this is called for a given id. From thereafter, the dialog will be automatically saved and restored.

Presumably you're returning `dlgQty` in `onCreateDialog`. The thing is, that dialog will be cached after the first time. A quick fix for this is to always call `removeDialog` when you are [done with it](http://developer.android.com/reference/android/app/Activity.html#removeDialog%28int%29).

# objective-c - 如何区分 dict 中的 BOOL 值：NO、nil 或不存在

> ID：12019251
> 
> 赞同：0
> 
> 时间：2012-08-18T14:12:25.817
> 
> 标签：objective-c, boolean

我正在使用条件语句，例如

```
// isComplete is a BOOL value
if (![videoDictionary valueForKey:@"isComplete"]) {

    // do important things here

} 
```

问题是这个语句似乎无法区分 NO、nil 和 key 不存在。我如何确保仅当 isComplete 为 NO 时才满足此条件，而不是当 isComplete 为 nil 或 isComplete 不存在（无键）时才满足？如何阻止误报？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T14:17:35.647

做类似的事情：

```
NSNumber* IsComplete;
IsComplete=[videoDictionary objectForKey:@"isComplete"];
if (IsComplete!=nil && ![IsComplete boolValue])
{
   ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T17:50:14.087

这实际上不是问题。字典*不能* `BOOL`直接包含 s，也不能`nil`作为键的值。如果键存在的话，它的值`@"isComplete"` *必须*是一个有效的对象。如果它代表一个布尔值，它很可能是一个`NSNumber`，你应该检查对象的`boolValue`.

如果表达式的`[someDictionary objectForKey:@"aKey"]`计算结果为假，那只是因为该键没有值。

# asp.net - 在 IIS 7 上创建 CN 名称匹配域名的自签名证书

> ID：12019252
> 
> 赞同：0
> 
> 时间：2012-08-18T14:12:28.293
> 
> 标签：asp.net, iis, ssl

有没有办法在 IIS 7 上这样做？根据这里[http://hansolav.net/blog/SelfsignedSSLCertificatesOnIIS7AndCommonNames.aspx](http://hansolav.net/blog/SelfsignedSSLCertificatesOnIIS7AndCommonNames.aspx)

可以在这里使用 IIS 6 资源工具包工具[http://hansolav.net/blog/ct.ashx?id=0ee46977-c27c-4929-8205-490c84fd649a&url=http%3a%2f%2fwww.microsoft.com%2fdownloads %2fdetails.aspx%3fFamilyID%3d56FC92EE-A71A-4C73-B628-ADE629C89499%26displaylang%3den](http://hansolav.net/blog/ct.ashx?id=0ee46977-c27c-4929-8205-490c84fd649a&url=http%3a%2f%2fwww.microsoft.com%2fdownloads%2fdetails.aspx%3fFamilyID%3d56FC92EE-A71A-4C73-B628-ADE629C89499%26displaylang%3den)

除了链接已弃用。

有没有其他方法或更好的方法可以让某人知道在哪里可以再次找到这个资源包。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T14:29:19.937

所有此类证书都可以使用 makecert 创建，

[http://msdn.microsoft.com/en-US/library/bfsktky3(v=VS.80).aspx](http://msdn.microsoft.com/en-US/library/bfsktky3(v=VS.80).aspx)

它是 Microsoft .NET 2 SDK 的一部分，但现在可用于任何 Windows SDK，例如

[http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=8279](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=8279)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T14:44:10.093

该工具常用于管理证书

[http://sourceforge.net/projects/portecle/](http://sourceforge.net/projects/portecle/)

# java - 使用信号量和监视器的 Java Unisex 浴室

> ID：12019254
> 
> 赞同：3
> 
> 时间：2012-08-18T14:12:41.310
> 
> 标签：java, concurrency, semaphore, monitor

我被分配了并发编程的任务，编写一个男女通用的厕所。对于这个主题，这似乎是一个足够普遍的任务。对于那些不熟悉的人，设置了规则（至少在这种情况下）

*   浴室男女均可使用，但不能同时使用。
*   一次最多可以有 5 个人上厕所。
*   如果你使用信号量，你必须自己实现它。

在这个主题之前我已经很长时间没有编码了，我的知识已经生疏了。我最初只用计数器编码，并且在理解信息流时遇到了问题，尽管程序和那个版本一无所获！

所以我又开始了，我想知道我应该怎么做。我最初的想法是有 1 个厕所，用二进制信号量实现，浴室监视器，限制为 5 个。

我还读到，问题背后的想法最适合每个人都是线程的实现。如果是这种情况，它可能会很混乱，因为我已经尝试过一次线程池（几周前）并且它从来没有为我运行过。：-/

目前我没有要显示的代码，所以关于如何设置的大纲是我最关心的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T14:27:01.777

看起来这个问题已经由 [Cormac Redmond在 java 中解决了](http://www.credmond.net/projects/unisex-bathroom-problem/)

# licensing - 单个 LICENSE 文件中的多个许可证

> ID：12019267
> 
> 赞同：1
> 
> 时间：2012-08-18T14:14:21.353
> 
> 标签：licensing

假设我在 A 许可证下发布软件。该软件使用根据 B 许可证许可的外部库。

我可以将两个许可证 A 和 B 放在一个名为 LICENSE 的文件中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T23:50:04.093

你不能。

来自 GNU 网站：

> 如果一个库是在 GPL（而不是 LGPL）下发布的，这是否意味着任何使用它的软件都必须在 GPL 或 GPL 兼容许可证下？（#IfLibraryIsGPL）
> 
> 是的，因为实际运行的软件包含该库。
> 
> *来源：[http ://www.gnu.org/licenses/gpl-faq.html#IfLibraryIsGPL](http://www.gnu.org/licenses/gpl-faq.html#IfLibraryIsGPL)*

由于这个限制，库通常在**LGPL**而不是**GPL下发布。**如果您在软件中包含 GPL 库，甚至是一段 GPL 源代码，您将需要在 GPL 下发布您的软件。

# c++ - 数组声明和内存布局

> ID：12019269
> 
> 赞同：1
> 
> 时间：2012-08-18T14:14:36.597
> 
> 标签：c++, c, memory, operating-system

我知道如果数组是本地的，它会在堆栈中分配大小。如何在代码中为以下数组分配内存。此外，当我给出像 -20 这样的负输入时，答案是 -80。它用于在早期的编译器中给出错误，但现在不是。那么现在是怎么处理的呢？

```
int main()
{
  int i;
  scanf("%d",&i);
int a[i];
printf("%d",sizeof(a));
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T14:20:27.047

你所拥有的是一个**[可变长度数组（VLA）](http://en.wikipedia.org/wiki/Variable-length_array)**，它在 C 标准中是允许的，但在 C++ 中是不允许的。
大多数 C++ 编译器通过编译器扩展提供对它的支持。C++ Standard 提供了一个`std::vector`通常在 C++ over VLA 中使用的方法，因为使用 VLA 会使您的代码不可移植。

对于用户程序，VLA 的元素位于连续的内存位置，就像普通数组一样。唯一的区别是数组的长度可以在运行时指定。

当您向 VLA 提供负大小时，您调用的是**Undefined Behavior**。

**参考：**
**C99 标准§6.7.5.2：**

> 如果大小是一个不是整数常量表达式的表达式... ...每次对其进行评估时，它的值都应大于零。

# java - 重定向到另一个 JSF 后如何显示成功消息？

> ID：12019272
> 
> 赞同：2
> 
> 时间：2012-08-18T14:15:08.533
> 
> 标签：java, jsf, jsf-2

在页面上成功地将客户添加到我的 JSF 应用程序后`add_customer.jsf`，用户将被重定向到该页面`list_customers.jsf`。

在此页面上，我希望显示一条成功消息。仅当用户确实来自该`add_customer.jsf`页面时才应显示该消息。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T08:00:59.177

一种方法是在添加客户的操作方法中向 The Flash 添加一条消息。

`add_customer.jsf`如果设置消息的是那个页面（或者实际上是它背后的代码），您不需要明确检查用户是否来自。在目标页面上，您只需要一个`<h:messages>`组件。

我的一位同事在以下位置发布了一个示例 CRUD 应用程序，该应用程序正是这样做的：[Sample CRUD application with JSF](http://jdevelopment.nl/sample-crud-app-with-jsf-and-richfaces/)。

相关代码位于支持 bean [UserEdit](http://code.google.com/p/javaee6-crud-example/source/browse/src/backing/UserEdit.java?name=default)和重定向发生的[页面中。](http://code.google.com/p/javaee6-crud-example/source/browse/WebContent/index.xhtml?name=default)

请注意，如果您的 JSF 实现是 Mojarra，则 Flash 仅适用于同一目录中的页面之间。如果这让您感到困扰，请考虑对此问题进行投票：http: [//java.net/jira/browse/JAVASERVERFACES-2136](http://java.net/jira/browse/JAVASERVERFACES-2136)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T08:09:56.700

最好的方法是使用一个[`<h:message>`](http://docs.oracle.com/javaee/5/javaserverfaces/1.2/docs/tlddocs/h/message.html)标签，您可以使用该标签绑定一条消息，该消息可以在您重定向到`list_customer.jsf`.

在过去的 3-4 年里，我们一直在使用这种方法在我们的应用程序中显示消息，并且偶尔使用部分触发器在同一页面上刷新。

# popup - 日期悬停弹出窗口上的日期选择器

> ID：12019275
> 
> 赞同：0
> 
> 时间：2012-08-18T14:15:29.827
> 
> 标签：popup, datepicker, hover, onmouseover

当我将鼠标悬停在一周上时，我试图让一周的日期与每天的数据弹出。如果我在一周内单击一个日期，我可以让它弹出一个显示，但我希望它发生在鼠标悬停/鼠标输入上。这是我的代码：

```
 <html>  
    <head>  
      <link href="./jquery-ui.css" rel="stylesheet" type="text/css"/>  
      <script type="text/javascript" src="./jquery.min.js"></script>  
      <script src="./jquery-ui.min.js"></script>  
      <script type="text/javascript" src="./popup.js"></script>

      <script>  

      var dateString;
      var sundayDate;
      var mondayDate;
      var tuesdayDate;
      var wednesdayDate;
      var thursdayDate;
      var fridayDate;
      var saturdayDate;

      $(document).ready(function() {  
        $("#datepicker").datepicker({
                showOtherMonths: true,
                selectOtherMonths: true,
                onSelect: function(dateText, inst) {
                    var date = new $(this).datepicker('getDate');
                    sundayDate    = new Date(date.getFullYear(), date.getMonth(), date.getDate() - date.getDay());
                    mondayDate    = new Date(date.getFullYear(), date.getMonth(), date.getDate() - date.getDay() + 1);
                    tuesdayDate   = new Date(date.getFullYear(), date.getMonth(), date.getDate() - date.getDay() + 2);
                    wednesdayDate = new Date(date.getFullYear(), date.getMonth(), date.getDate() - date.getDay() + 3);
                    thursdayDate  = new Date(date.getFullYear(), date.getMonth(), date.getDate() - date.getDay() + 4);
                    fridayDate    = new Date(date.getFullYear(), date.getMonth(), date.getDate() - date.getDay() + 5);
                    saturdayDate  = new Date(date.getFullYear(), date.getMonth(), date.getDate() - date.getDay() + 6);
                }
        });

        $('td a').live('mouseenter', function () {
            popup('<table border="1" width="350">' +
            '   <tr>' +
            '      <th>Su</th>' +
            '      <th>Mo</th>' +
            '      <th>Tu</th>' +
            '      <th>We</th>' +
            '      <th>Th</th>' +
            '      <th>Fr</th>' +
            '      <th>Sa</th>' +
            '   </tr>' +
            '   <tr height= "50px">' +
            '      <td valign="top" width = "50px">' + sundayDate.getDate() + '</td>' +
            '      <td valign="top" width = "50px">' + mondayDate.getDate() + '</td>' +
            '      <td valign="top" width = "50px">' + tuesdayDate.getDate() + '</td>' +
            '      <td valign="top" width = "50px">' + wednesdayDate.getDate() + '</td>' +
            '      <td valign="top" width = "50px">' + thursdayDate.getDate() + '</td>' +
            '      <td valign="top" width = "50px">' + fridayDate.getDate() + '</td>' +
            '      <td valign="top" width = "50px">' + saturdayDate.getDate() + '</td>' +
            '   </tr>' +
            '</table>');
        });

      });
    </script> 
    </head>  
    <body>  

    <div class="demo">
        <div id="datepicker"></div>
    </div>

    </body>  
    </html> 
```

我已经阅读了一些关于使用 .on 而不是 .live 的内容，因为那是当前的方法，但我仍然不知道如何在“鼠标悬停”上选择一个日期并将其用于显示当前日期。我可以处理格式化一周的表格外观和输入数据，但我希望选择鼠标结束的日期并触发 onSelect 操作。

提前感谢您对此的任何回应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T14:22:11.957

我认为您可以通过使用包含以下效果的按钮或其他对象来触发此操作：

```
<label onmouseover="mouseenter">move here</label> 
```

# android - DDMS 未显示应用程序名称

> ID：12019276
> 
> 赞同：5
> 
> 时间：2012-08-18T14:15:48.347
> 
> 标签：android

我间歇性地遇到这个问题，Android 中的 DDMS 没有显示任何应用程序的名称，如下图所示

![在此处输入图像描述](../Images/bc3da08b91e551b74f0f0380fb8093bb.png)

考虑到日志消息的数量，如果不为特定应用程序设置过滤器，就不可能看到相关消息，这将成为一个主要问题。

**我的问题**

DDMS 设置需要进行哪些更改才能始终在消息中显示应用程序的名称？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T09:39:22.440

您可以按标签过滤，这只是一种解决方法，您可能应该更新您的插件，这有时会在您有两个 ddms 时发生，但在我的情况下很少发生，通常我选择了错误的设备或类似的东西。我记得重置亚行对我有用

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-20T14:51:06.827

在 Android Manifest 中，设置应用程序 Debuggeable = True 之后工作

# algorithm - 时间复杂度和空间复杂度

> ID：12019280
> 
> 赞同：1
> 
> 时间：2012-08-18T14:16:18.407
> 
> 标签：algorithm, time-complexity, space-complexity

我的算法如下图所示。它对服务器进行远程调用并获取结果处理它们，然后再次将远程调用发送到系统。你能告诉我这个算法的时间和空间复杂度是多少吗？

```
Get search keyword from user
ϕ := getInfoFromConceptNet(keyword) // makes remote call
e := expandConcepts(ϕ)
expConcepts := {} // adds to an array
for each ec in e // first loop
expConcepts.add(ec) // adds to array
α= expandConcept(ec) //remote call
expConcepts.add(α) // adds to array
αkeywords=getKeywords(α) // calls a function to remove stopwords
for each αkw in αkeywords // second loop
Ω= expandConcept(αkw) // makes remote call
expConcepts.add(Ω) // adds to an array
results[ ]=performsearch(expConcepts,additional information) // searches the array 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T15:47:42.370

你的第二个循环嵌套到第一个？如果是，下面给出的复杂性分析代表您的算法。

该算法的时间和空间复杂度取决于`expandConcept()`、`getKeywords()`和函数的实现。对于，时间和空间复杂度可能是如果只是将其参数附加到 expConcepts 数组的前索引。假设执行二分搜索，它具有（：expConcepts 元素的数量）、时间复杂度和恒定空间复杂度，以及额外的（：集合 e 的基数，：akeywords 的基数），您就有时间复杂度。空间复杂度取决于空间复杂度。`add()``performsearch()``add()``O(1)``performsearch()``O(logN)``N``O(M*(expandConcept() time-comp)*K*(expandConcept() time-comp))``M``K`**`O(M*(expandConcept time-comp)*K*(expandConcept() time-comp)*logN)`**`expandConcepts()`

# android - 忽略 Android Lint“MissingTranslation”检查部分翻译

> ID：12019282
> 
> 赞同：2
> 
> 时间：2012-08-18T14:16:36.340
> 
> 标签：android, android-lint

在我的应用程序中，我有一组具有完整翻译的语言，以及另一组仅翻译几个字符串的语言。

对于具有完整翻译的语言，我希望 Lint 警告我 MissingTranslations。

对于具有部分翻译的语言，我希望 Lint 忽略 MissingTranslations。

我无法弄清楚如何同时实现这两个目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-29T19:02:34.100

您可以通过基于正则表达式忽略`lint.xml`文件中的错误消息来做到这一点：

```
<?xml version="1.0" encoding="UTF-8"?>
<lint>
    <issue id="MissingTranslation">
        <ignore regexp='^".*" is not translated in "ru" \(Russian\)$'/>
    </issue>
</lint> 
```

这将抑制俄语的 MissingTranslation 错误，但不会抑制任何其他语言。基于错误消息的忽略有点粗俗——如果他们改变措辞，一切都可能会破坏——但这是我所知道的目前唯一有效的解决方案。

[请注意，虽然正则表达式被记录为与“错误消息](http://tools.android.com/tips/lint/suppressing-lint-warnings)”匹配，但它实际上只应用于打印到屏幕上的部分文本。上例中的正则表达式锚点显示了边界。

一些对我不起作用的合理方法**是**：

*   添加`tools:ignore="MissingTranslation"`到部分翻译的语言环境的`<resources>`元素。
*   添加`<ignore path="src/main/res/values-ru/strings.xml"/>`到 中的 MissingTranslation 问题块`lint.xml`。

如果您恰好是想要抑制仅部分覆盖默认字符串文件的特定于区域的字符串文件的 MissingTranslation 错误的非常特殊的情况（例如，默认文件是英文，并且`values-en-rUS/strings.xml`您[希望](https://stackoverflow.com/a/29931151/85950)在一个解法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T05:59:38.273

在警告标记上，按`Ctrl`-`1`以显示可用的快速修复。您可以在快速修复分辨率选择中选择[忽略特定文件的警告。](http://tools.android.com/tips/lint/suppressing-lint-warnings)

您仍然需要自己选择是部分翻译还是完整翻译。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-05-30T22:44:51.970

对于具有部分翻译的语言，您可以使用注释。由于您说那里只有几个字符串，因此您可以像这样在 xml 文件中抑制这些特定字符串：

*字符串.xml*

```
<?xml version="1.0" encoding="utf-8"?>
<resources>    

    <!--suppress MissingTranslation -->
    <string name="some_string">ignore my translation</string>
    ...

</resources> 
```

[http://tools.android.com/tips/lint/suppressing-lint-warnings](http://tools.android.com/tips/lint/suppressing-lint-warnings)

# ruby - ruby 脚本从 RESTful Web 服务获取 JSON

> ID：12019284
> 
> 赞同：0
> 
> 时间：2012-08-18T14:16:52.260
> 
> 标签：ruby, json, rest

我正在尝试编写一个简单的 ruby​​ 脚本来从 RESTful Web 服务收集 JSON 对象数组。我已经阅读了很多建议我需要创建 HTTP GET 请求的文档，但我还没有看到如何传递参数以仅返回我需要的对象的示例。（即我只需要检索具有特定名称/值对的 JSON 对象）

本质上，我正在尝试查询可以以 JSON 格式返回信息的数据库，但我只想选择满足特定条件的对象，并将其存储在数组中。

当我使用 Web GUI 手动搜索这些对象之一时，通过查看 chrome 开发人员工具中的 NET 请求，我已经能够检索一个 JSON 对象，但我无法弄清楚如何为多个对象生成请求。

抱歉，如果这是一个愚蠢的问题，我对 ruby​​ 和 REST 都是新手。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T22:59:54.613

我建议先查看有关 REST API 的演示文稿，然后在 Youtube 上找到一些讨论：

*   [API设计等](https://speakerdeck.com/u/jrom/p/api-design-and-more)
*   [使用 Ruby 实现 RESTful API](https://speakerdeck.com/u/josephruscio/p/implementing-a-restful-api-with-ruby)

当前最有用的宝石：

*   [rails-api](https://github.com/spastorino/rails-api)
*   [拉布尔](https://github.com/nesquena/rabl)
*   [歌利亚](https://github.com/postrank-labs/goliath)
*   [辛纳特拉](http://sinatrarb.com)

别忘了`Grape`。

如果您想更深入地了解该领域，下一本书将帮助您：

*   [API：战略指南](https://rads.stackoverflow.com/amzn/click/com/1449308929)
*   [REST 实践：超媒体和系统架构](https://rads.stackoverflow.com/amzn/click/com/0596805829)
*   [RESTful Web 服务手册](https://rads.stackoverflow.com/amzn/click/com/0596801688)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T22:20:17.557

使用带有 REST 的 java/jpa，我们使用命名查询或本机查询。如果 Ruby 没有类似的东西，我会感到惊讶。

# java - 如何从它们插入哈希图中的顺序打印哈希图值

> ID：12019287
> 
> 赞同：5
> 
> 时间：2012-08-18T14:17:03.447
> 
> 标签：java, string, hashmap

我有一个 HashMap，它有字符串作为键和值，

```
HashMap dataSet = new HashMap();

dataSet.put("A1", "Aania");
dataSet.put("X1", "Abatha");
dataSet.put("C1", "Acathan");
dataSet.put("S1", "Adreenas"); 
```

我想按插入HashMap的顺序打印它，所以输出应该是这样的，

```
A1, Aania
X1, Abatha
C1, Acathan
S1, Adreenas 
```

谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-18T14:18:40.063

您可以使用 a[`LinkedHashMap`](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashMap.html)代替，这将保留插入顺序。你不能用标准做你所要求的`HashMap`。

> 此实现与 HashMap 的不同之处在于它维护一个双向链表，该列表贯穿其所有条目。这个链表定义了迭代顺序，通常是键插入映射的顺序（插入顺序）。

因此，您的代码的第一行将变为：

```
Map dataSet = new LinkedHashMap(); 
```

您可能还希望添加泛型作为一种良好做法：

```
Map<String, String> dataSet = new LinkedHashMap<String, String>(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T14:18:33.087

你不能一个哈希图没有内部顺序

您将不得不使用 Map 的另一个实现

# php - 加载第三方库：未找到

> ID：12019297
> 
> 赞同：0
> 
> 时间：2012-08-18T14:17:56.020
> 
> 标签：php, symfony

我正在尝试将第三方库包含到我的 Symfony 2 项目中，如此[处](http://www.kiwwito.com/article/add-third-party-libraries-to-symfony-2)所述。但是，我不断收到错误消息`Fatal error: Class 'Sprain_Images' not found in /src/MyProject/MyBundle/Controller/BackendController.php on line 267`。

这是我所做的：

我将第三方类放入 src 文件夹（不是直接在供应商中，因为该类无法由 deps 加载）。

```
#Directory structure
-src
  -MyProject
  -vendor
     -sprain
       -lib
         -Images
           -src
           Images.php 
```

然后我创建了要使用的类：

```
 # /src/vendor/sprain/lib/Images/Images.php
 require_once __DIR__.'/src/class.Images.php';
 class Sprain_Images extends Images {
 } 
```

我还在 autoload.php 中注册了前缀：

```
# /app/autoload.php
$loader->registerPrefixes(array(
  'Twig_Extensions_' => __DIR__.'/../vendor/twig-extensions/lib',
  'Twig_'            => __DIR__.'/../vendor/twig/lib',
  'Sprain_'          => __DIR__.'/../src/vendor/sprain/lib',
)); 
```

最终我在我的控制器中调用了这个类：

```
# /src/MyProject/MyBundle/Controller/BackendController.php
$image = new \Sprain_Images(); 
```

但是找不到该课程。我在哪里犯了错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T14:30:02.067

班级`Sprain_Images`应该在`src/vendor/sprain/lib/Sprain/Images.php`.

您可以阅读有关 PSR-0 标准的更多信息：[https ://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md#underscores-in-namespaces-and-class-names](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md#underscores-in-namespaces-and-class-names)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T17:34:49.097

您只需要修改您的 composer.json 文件以获取自动加载值：

[http://getcomposer.org/doc/04-schema.md#autoload](http://getcomposer.org/doc/04-schema.md#autoload)

```
//composer.json 在你的 symfony 2.1 项目中
“自动加载”：{
     “psr-0”：{
         "": "src/",
         “你的图书馆”：“src/location/of/lib”
     }
},

```

然后在您的控制器中，例如：

```
命名空间 Acme\UserBundle\Controller；

使用 Symfony\Bundle\FrameworkBundle\Controller\Controller；
使用 Sensio\Bundle\FrameworkExtraBundle\Configuration\Route；
使用 YourLibrary\FolderName\ClassName.php；

类 DefaultController 扩展控制器 {

/**
 * @路线（”/”）
 * @模板（）
 */
公共函数 indexAction()
{
   $lib = 新的类名（）；
   $lib->getName();

   返回数组('name' => $name);
}

}

```

# java - 正则表达式查看字符串是否包含模式

> ID：12019299
> 
> 赞同：1
> 
> 时间：2012-08-18T14:18:01.417
> 
> 标签：java, regex

我是正则表达式的新手，我发现完成这个简单的任务非常困难。整个字符串看起来像

```
debug1: Authentications that can continue: publickey,gssapi-with-mic,password
debug1: Next authentication method: publickey
debug1: read PEM private key done: type RSA
debug1: Enabling compression at level 6.
debug1: Authentication succeeded (publickey).
debug1: channel 0: new [client-session]
debug1: Entering interactive session.
debug1: Sending subsystem: sftp
Can't ls: "/home/dev/customer/*.out" not found
debug1: client_input_channel_req: channel 0 rtype exit-status reply 0
debug1: channel 0: free: client-session, nchannels 1
debug1: fd 0 clearing O_NONBLOCK
debug1: fd 2 clearing O_NONBLOCK
debug1: Transferred: stdin 0, stdout 0, stderr 0 bytes in 0.1 seconds
debug1: Bytes per second: stdin 0.0, stdout 0.0, stderr 0.0
debug1: Exit status 0
debug1: compress outgoing: raw data 343, compressed 184, factor 0.54
debug1: compress incoming: raw data 860, compressed 430, factor 0.50 
```

我只需要检查`*.out/text" not found`这个字符串中是否存在类似的东西。在这种情况下它确实存在，但我没有得到正确的输出

我使用的正则表达式`.*\*\..*" not found.*`不起作用。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T14:25:49.010

### 使用字符串匹配

您实际上并不需要正则表达式。一个简单的字符串匹配就可以了，而且速度也更快！例如：

```
$ fgrep '.out" not found' /tmp/foo
Can't ls: "/home/dev/customer/*.out" not found 
```

### 如果你真的想要一个正则表达式

如果您坚持，您可以使用正则表达式，但对于您的用例来说，它不会更好地工作。不过，这里是：

```
$ egrep '\.out" not found' /tmp/foo
Can't ls: "/home/dev/customer/*.out" not found 
```

正则表达式的诀窍是确保您只匹配最少必要的文本以确保正确匹配，而不是尝试使用正则表达式标记构建整行。在这种情况下，简单更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T15:23:43.370

```
import java.util.regex.*;

class Main
{
  public static void main (String[] args) throws java.lang.Exception
  {
    java.io.BufferedReader in = new java.io.BufferedReader (new java.io.InputStreamReader (System.in));
    String input = "";
    String s;
    while ((s = in.readLine()) != null && s.length() != 0) input += s;
    Pattern pattern = Pattern.compile("\\*\\.(?:out|text)\\\"\\s+not\\sfound");
    Matcher  matcher = pattern.matcher(input);
    if (matcher.find())
      System.out.println("Match found");
  }
} 
```

[在此处](http://ideone.com/7A7Gn)测试此代码。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-18T14:41:06.813

这适用于多行和单行模式

```
(^.*?|.*?)\.(out|text).*?not found(.*?|.*?$) 
```

# excel - 在字符串中找到一个单元格，然后根据该单元格填充另一个单元格

> ID：12019300
> 
> 赞同：0
> 
> 时间：2012-08-18T14:18:14.770
> 
> 标签：excel, vba, search, find

我有一个基本的财务电子表格，我正试图让它变得更好。我有一个看起来像这样的表：

> | 说明 | 类别 | 数量
> 
> | 2341234 福来鸡 | 外出就餐 | 5.89
> 
> | 11234 Redbox/乔治敦 | 娱乐 | 1.21

另一个看起来像这样的表：

> | 姓名 | 类别 |
> 
> | 福来鸡 | 外出就餐 |
> 
> | 红盒 | 娱乐 |

我想在第一个表的第一列中从第二个表的第一列中找到字符串，并自动填充第一个表的第二列。我很确定我可以通过执行 {=find(2ndSheet!A:A,1stSheetA:A)} 或类似的操作来找到字符串的位置，但我不知道如何基于此填充另一个单元格.

必须是宏吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T15:11:27.470

这有点难看，但似乎有效。它处理您的描述可能不一定与查找表匹配的情况（例如，使用 Redbox | Redbox/Georgetown）。将 替换为`[Lookup_Table]`查找表的绝对范围，并作为数组公式 ( `Control+Shift+Enter`) 输入：

```
=INDEX([Lookup_Table],MATCH(TRUE,NOT(ISERR((FIND([Lookup_Table],A2)))),0),2) 
```

至于它在做什么：

```
=INDEX(
        [Lookup_Table],
        MATCH(
            TRUE,
            NOT(ISERR((FIND([Lookup_Table],A2)))),
            0),
         2) 
```

它使用以`INDEX`[Lookup_Table] 作为基本范围的公式。对于要匹配的行，它会查找`FIND`使用当前单元格运行公式不会导致错误的实例。所以在 的情况下`Redbox`，你会得到一个像`{#VALUE!, 7}`. 然后根据它们是否为错误将值设置为`TRUE/FALSE`，然后翻转它们以使非错误为`True`. 然后，将`TRUE`条件与该数组进行匹配，命中将返回查找表中的行号。然后，您使用该行号和第 2 列来查找相应的值。

同样，这不是一个漂亮的（可能有更好的方法来处理你所有的情况），但它似乎在我对三行的极其详尽的测试中起作用:)

![在此处输入图像描述](../Images/aeb2a04e5304c328aa74ac285235f16b.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T15:07:10.473

假设您的第一个表是从 column 开始的`A`，那么将这个公式替换为从 in 开始`B2`应该会为您找到值。

```
=VLOOKUP(RIGHT(A2,LEN(A2)-FIND(" ",A2,1)),[Range of Helper Table],2,FALSE) 
```

您需要`[Range of Helper Table]`用实际范围替换。确保使用 $ 使用绝对引用，例如：`2ndSheet!A$2:B$20`. 以便您可以复制和粘贴。

# c++ - 根据特定数据计算锯齿波和三角波

> ID：12019304
> 
> 赞同：2
> 
> 时间：2012-08-18T14:18:45.503
> 
> 标签：c++, math, waveform, trigonometry

我需要计算一个三角形和锯齿波，但由于我的模型和我能够使用的数据，它有点复杂（但也许我只是感到困惑）。

我能够计算出我的正弦波，但我并没有真正使用帧计数器。我所做的是，计算一个`theta_increment`变量，下次我需要计算样本时可以使用它。这像这样工作：

```
float x = note.frequency / AppSettings::sampleRate;
float theta_increment = 2.0f * M_PI * x;
float value = 0;

if(waveType == SINE){
    value = sin(note.theta) * fixedAmplitude;
} 
```

现在我有了存储`theta_increment`在`note.theta`成员中的当前帧/样本的值，因此我可以将其用于下一个样本：

```
note.theta += theta_increment; 
```

我已经查看了大量关于如何计算锯子或三角形的示例，但我无法弄清楚。（我只有上面提到的数据可供我使用）这是我最后一次尝试，但它不起作用并给我带来了大量的故障：

```
value = 1.0f - (2.0f * ((float)note.theta / (float)44100)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T14:41:39.780

如果您有一个循环生成您的值，如下所示：

```
for (size_t frame=0; frame!=n_frames; ++frame) {
  float pos = fmod(frequency*frame/sample_rate,1.0);
  value[frame] = xFunc(pos)*fixedAmplitude;
} 
```

然后您可以将这些函数用于不同类型的波：

```
float sinFunc(float pos)
{
  return sin(pos*2*M_PI);
}

float sawFunc(float pos)
{
  return pos*2-1;
}

float triangleFunc(float pos)
{
  return 1-fabs(pos-0.5)*4;
} 
```

基本思想是您需要一个在每个周期内从 0.0 到 1.0 的值 (pos)。然后你可以随心所欲地塑造它。

对于正弦波，sin() 函数可以完成这项工作，您只需乘以 2*PI 即可将 0.0 到 1.0 范围转换为 0.0 到 2*PI 范围。

对于锯齿波，您只需要将 0.0 到 1.0 的范围转换为 -1.0 到 1.0 的范围。乘以 2 并减去 1 即可。

对于三角波，可以使用绝对值函数来引起方向的突变。首先，我们通过减去 -0.5 将 0.0 到 1.0 的范围映射到 -0.5 到 0.5 的范围。然后我们通过取绝对值把它变成0.5到0.0到0.5的形状。通过乘以 4，我们将其转换为 2.0 到 0.0 到 2.0 的形状。最后通过从 1 中减去它，我们得到一个 -1.0 到 1.0 到 -1.0 的形状。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T14:32:39.430

锯齿波可以这样计算：

```
value = x - floor(x); 
```

三角形可以这样计算：

```
value = 1.0 - fabs(fmod(x,2.0) - 1.0); 
```

其中 x 是`note.theta`。

# php - 用 PHP 备份数千张图片？

> ID：12019311
> 
> 赞同：1
> 
> 时间：2012-08-18T14:19:45.940
> 
> 标签：php, zip, backup

我现在只是想知道如何备份一个包含 8000 多个图像的文件夹而不会超时，该文件夹总共包含大约 1.5gb 的数据，我们需要经常备份自己。

我已经尝试过 PHP 中提供的 zip 功能，但是由于需要备份大量文件，它只是使请求超时，但是它确实可以处理少量的工作。

我正在尝试通过 HTTP 请求运行此脚本，是否会将其通过 Cronjob 忽略超时？

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T14:21:34.943

我不会为此使用php。

如果你在 linux 上，我会设置一个 cron 作业并定期运行像 rsync 这样的程序。

关于 rsync的一个很好的[介绍](http://www.cyberciti.biz/tips/linux-use-rsync-transfer-mirror-files-directories.html)。

**编辑：**如果您确实想要/需要采用 php 方式，您也可以考虑只复制而不是使用 zip。`zip`通常不会对图像做太多事情，如果您已经有数据库，则可以根据数据库检查当前目录并进行差异备份（只需复制新文件）。这样，只有您的初始备份需要很长时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T14:22:11.103

您可以发布代码以便我们对其进行优化，除此之外，您应该更改您的 php.ini（配置文件）并删除/增加超时（您的脚本可以在您的服务器上运行的最长时间）

# eclipse - Glassfish 开源版 3.0.1 HTTP 状态 500，EJBException

> ID：12019313
> 
> 赞同：0
> 
> 时间：2012-08-18T14:20:08.810
> 
> 标签：eclipse, jakarta-ee, jpa, glassfish, objectdb

我正在使用[本](http://www.objectdb.com//tutorial/jpa/eclipse/ee)教程来学习 JavaEE Web 应用程序。我在 windows xp 上为 Java EE、objectdb-2.4.2_02、glassfish 3.1.2 使用 eclipse indigo。当我运行程序时，嵌入式浏览器会打开带有此状态的页面并打印 javax.ejb.EJBException。我用谷歌搜索，但我没有找到这个问题的答案。

```
 HTTP Status 500 - 

--------------------------------------------------------------------------------

type Exception report

message

descriptionThe server encountered an internal error () that prevented it from fulfilling this request.

exception 
javax.ejb.EJBException

note The full stack traces of the exception and its root causes are available in the GlassFish Server Open Source Edition 3.1.2.2 logs.

--------------------------------------------------------------------------------

GlassFish Server Open Source Edition 3.1.2.2 
```

**服务器日志文件：**

```
 [#|2012-08-23T15:51:38.979+0300|WARNING|glassfish3.1.2|javax.enterprise.system.container.web.com.sun.enterprise.web|_ThreadID=21;_ThreadName=Thread-2;|StandardWrapperValve[GuestServlet]: PWC1406: Servlet.service() for servlet GuestServlet threw exception
javax.ejb.EJBException
    at com.sun.ejb.containers.BaseContainer.processSystemException(BaseContainer.java:5215)
    at com.sun.ejb.containers.BaseContainer.completeNewTx(BaseContainer.java:5113)
    at com.sun.ejb.containers.BaseContainer.postInvokeTx(BaseContainer.java:4901)
    at com.sun.ejb.containers.BaseContainer.postInvoke(BaseContainer.java:2045)
    at com.sun.ejb.containers.BaseContainer.postInvoke(BaseContainer.java:1994)
    at com.sun.ejb.containers.EJBLocalObjectInvocationHandler.invoke(EJBLocalObjectInvocationHandler.java:222)
    at com.sun.ejb.containers.EJBLocalObjectInvocationHandlerDelegate.invoke(EJBLocalObjectInvocationHandlerDelegate.java:89)
    at $Proxy130.getAllGuests(Unknown Source)
    at guest.__EJB31_Generated__GuestDao__Intf____Bean__.getAllGuests(Unknown Source)
    at guest.GuestServlet.doGet(GuestServlet.java:24)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:668)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.IllegalStateException: Unable to retrieve EntityManagerFactory for unitName GuestbookPU
    at com.sun.enterprise.container.common.impl.EntityManagerWrapper.init(EntityManagerWrapper.java:132)
    at com.sun.enterprise.container.common.impl.EntityManagerWrapper._getDelegate(EntityManagerWrapper.java:173)
    at com.sun.enterprise.container.common.impl.EntityManagerWrapper.createQuery(EntityManagerWrapper.java:467)
    at guest.GuestDao.getAllGuests(GuestDao.java:22)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.glassfish.ejb.security.application.EJBSecurityManager.runMethod(EJBSecurityManager.java:1052)
    at org.glassfish.ejb.security.application.EJBSecurityManager.invoke(EJBSecurityManager.java:1124)
    at com.sun.ejb.containers.BaseContainer.invokeBeanMethod(BaseContainer.java:5388)
    at com.sun.ejb.EjbInvocation.invokeBeanMethod(EjbInvocation.java:619)
    at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
    at com.sun.ejb.EjbInvocation.proceed(EjbInvocation.java:571)
    at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.doAround(SystemInterceptorProxy.java:162)
    at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.aroundInvoke(SystemInterceptorProxy.java:144)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.sun.ejb.containers.interceptors.AroundInvokeInterceptor.intercept(InterceptorManager.java:861)
    at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
    at com.sun.ejb.containers.interceptors.InterceptorManager.intercept(InterceptorManager.java:370)
    at com.sun.ejb.containers.BaseContainer.__intercept(BaseContainer.java:5360)
    at com.sun.ejb.containers.BaseContainer.intercept(BaseContainer.java:5348)
    at com.sun.ejb.containers.EJBLocalObjectInvocationHandler.invoke(EJBLocalObjectInvocationHandler.java:214)
    ... 30 more
|#] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-02T14:40:28.993

以我的经验，这是某种数据库连接问题。最好的办法是登录到服务器并 PING 数据库以查看它是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T21:57:37.277

只是部分答案...

关键问题是

```
 Caused by: java.lang.IllegalStateException: 
     Unable to retrieve EntityManagerFactory for unitName null 
```

这意味着它无法确定应该在 GuestDAO 中使用哪个 PersistenceUnit。这可能表明GF在项目中找不到您的persistence.xml文件，请仔细[检查描述的persistence.xml的创建](http://www.objectdb.com/tutorial/jpa/netbeans/ee/entity)是否顺利，以及persistence.xml在部署的项目中是否存在ONCE和ONCE（曾经的部分是因为我注意到Eclipselink在一个项目中遇到多个persistence.xml文件时会很困惑。如果一切正常，请将单元名称添加到`@PersistenceContext`GuestsDAO中的注释中，如下所示

```
@PersistenceContext(unitName="GuestbookPU")
private EntityManager em; 
```

如果这一切都失败了，请告诉我。

# jquery - 隐藏 P 标签不起作用

> ID：12019316
> 
> 赞同：-1
> 
> 时间：2012-08-18T14:20:28.800
> 
> 标签：jquery, html

我正在自学Javascript（使用Jquery），我只是想在点击功能上进行显示/隐藏。

现在，我正在使用 Sublime Text 2 执行此操作，并尝试通过本地主机在浏览器中查看它——我也在使用 HTML5 Boilerplate 执行此操作。

下面是我的代码。

调用 Jquery

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script> 
```

脚本

```
 <script type="text/javascript">
    $(document).ready(function()
{
    $('p').hide();
});

  </script> 
```

HTML

```
<a href="#" id="paragraphAnchor">click me</a>
 <p>This is  a testThis is  a testThis is  a testThis is  a testThis is  a testThis is  a testThis is  a testThis is  a testThis is  a testThis is  a testThis is  a testThis is  a testThis is  a testThis is  a testThis is  a testThis is  a testThis is  a testThis is  a testThis is  a testThis is  a testThis is  a testThis is  a test</p> 
```

我正在我的 HTML 文档中完成所有这些工作。不是最佳实践，但我认为我会从小处着手。

现在我这样做了，文本甚至没有被隐藏。

为什么是这样？

更新：

```
<!doctype html>
<!--[if lt IE 7]> <html class="no-js ie6 oldie" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <title></title>
  <meta name="description" content="">
  <meta name="author" content="">

  <meta name="viewport" content="width=device-width,initial-scale=1">

  <!-- CSS concatenated and minified via ant build script-->
  <link rel="stylesheet" href="css/style.css">
  <!-- end CSS-->

  <script src="js/libs/modernizr-2.0.6.min.js"></script>

  <script type="text/javascript">
    $(document).ready(function()
{
  $('p').hide();
  $(a#paragraphAnchor).click(function()
  {
    $('p').show();
  });
});

  </script>
</head>

<body>

 <a href="#" id="paragraphAnchor">click me</a>
 <p>This is  a testThis is  a testThis is  a testThis is  a testThis is  a testThis is  a testThis is  a testThis is  a testThis is  a testThis is  a testThis is  a testThis is  a testThis is  a testThis is  a testThis is  a testThis is  a testThis is  a testThis is  a testThis is  a testThis is  a testThis is  a testThis is  a test</p>

  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="js/libs/jquery-1.6.2.min.js"><\/script>')</script>

  <!-- scripts concatenated and minified via ant build script-->
  <script defer src="js/plugins.js"></script>
  <script defer src="js/script.js"></script>
  <!-- end scripts-->

  <script> // Change UA-XXXXX-X to be your site's ID
    window._gaq = [['_setAccount','UAXXXXXXXX1'],['_trackPageview'],['_trackPageLoadTime']];
    Modernizr.load({
      load: ('https:' == location.protocol ? '//ssl' : '//www') + '.google-analytics.com/ga.js'
    });
  </script>

  <!--[if lt IE 7 ]>
    <script src="//ajax.googleapis.com/ajax/libs/chrome-frame/1.0.3/CFInstall.min.js"></script>
    <script>window.attachEvent('onload',function(){CFInstall.check({mode:'overlay'})})</script>
  <![endif]-->

</body>
</html> 
```

**更新：问题已解决**

看来 HTML 5 Boilerplate 应该使用

```
<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js'></script> 
```

代替：

```
<script type='text/javascript' src="//ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script> 
```

或者至少我是这样让它工作的。

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T14:42:41.430

尝试这个：

```
<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js ie6 oldie" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <title></title>
  <meta name="description" content="">
  <meta name="author" content="">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <!-- CSS concatenated and minified via ant build script-->
  <link rel="stylesheet" href="css/style.css">
  <!-- end CSS-->

  <script type='text/javascript' src="//ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
  <script type='text/javascript' src="js/libs/modernizr-2.0.6.min.js"></script>

  <script type="text/javascript">
    $(document).ready(function() {
       $('p').hide();
       $('#paragraphAnchor').click(function() {
           $('p').show();
       });
    });
  </script>
</head> 
```

jQuery 未加载到您的页面中，请注意您应该为选择器使用引号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T14:25:16.347

jQuery URL 缺少协议。这一行：

`<script src="//ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>`

应该读

**http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js **_****

 ****编辑：**这是因为文件是在本地加载的，所以假定的协议`file`将无法通过 HTTP(S) 加载任何 jquery 库。

这可以通过检查控制台来确认。铬报告：

```
Failed to load resource file://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T14:41:02.383

您似乎在加载 jquery 代码之前调用它。

添加这个：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="js/libs/jquery-1.6.2.min.js"><\/script>')</script> 
```

在这之前：

```
<script type="text/javascript">
    $(document).ready(function()
{
  $('p').hide();
  $('a#paragraphAnchor').click(function()
  {
    $('p').show();
  });
});

  </script> 
```

例如：

```
<head>
  ...

  <script src="js/libs/modernizr-2.0.6.min.js"></script>

  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="js/libs/jquery-1.6.2.min.js"><\/script>')</script>

  <script type="text/javascript">
    $(document).ready(function()
{
  $('p').hide();
  $('a#paragraphAnchor').click(function()
  {
    $('p').show();
  });
});

  </script>
</head>
... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T14:37:52.467

检查此代码它工作正常

```
<html>
<head>
<script type='text/javascript' src='http://code.jquery.com/jquery-1.7.1.js'></script>
 <script>
    $(document).ready(function()
{
      $("p").hide();
      $("a").click(function () {
      $("p").slideToggle("slow");
    });
});
</script>

</head>
<body>
<a href="#" id="paragraphAnchor">click me</a>
 <p>This is  a testThis is  a testThis is  a testThis is  a testThis is  a testThis is  a testThis is  a testThis is  a testThis is  a testThis is  a testThis is  a testThis is  a testThis is  a testThis is  a testThis is  a testThis is  a testThis is  a testThis is  a testThis is  a testThis is  a testThis is  a testThis is  a test</p>
 </body>
</html> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-18T14:24:45.383

这是您在`$(document).ready`函数中需要的

```
$('#paragraphAnchor').click(function() {
  $('p').toggle();
}); 
```**

# java - 将使用 Processing.org 制作的应用程序迁移到 Eclipse

> ID：12019317
> 
> 赞同：0
> 
> 时间：2012-08-18T14:20:58.623
> 
> 标签：java, serial-port, xmpp, processing

我在Processing中做了一个简单的程序，效果很好。我现在正试图将我的初学者 Java 技能带到 Eclipse 中，以再次制作相同的程序。该程序采用来自 Com 端口的 Rs232 字符串并通过 Xmpp 发送它。

我遇到的问题是我不能像在处理任何类/选项卡时那样调用 newChat.sendMessage(message)。有人可以告诉我我应该寻找什么来解决这个问题。我猜想扩展或实现 Xmpp 类是我需要做的。我喜欢简单的处理方式。

任何帮助将不胜感激。

仅供参考：Smack 库位于代码文件夹中进行处理。

主要应用：

```
import processing.net.*;

void setup() {
  size(400, 200);
  noStroke();
  background(0);
  LoadSerialPort();
  OpenChatConnection();
  setupFilterThread ();
}

void draw() {
}

String timestampTime() {
  Calendar now = Calendar.getInstance();
  return String.format("%1$tH:%1$tM:%1$tS", now);
}

String timestampDate() {
  Calendar now = Calendar.getInstance();
  return String.format("%1$tm/%1$td/%1$tY", now);
} 
```

过滤器类/选项卡：

```
FilterThread thread1;

List FilteredArchAddressList = new ArrayList();
ArrayList CallList = new ArrayList();

void  setupFilterThread () {

  thread1 = new  FilterThread(100, "a");
  thread1.start();
}

void checkForNewCalls() {
  if (CallList.size() >=1) {
    println("New Call In List, Size: "+CallList.size());
    FilterComPortString((String) CallList.get(0));
    CallList.remove(0);
  }
}

void FilterComPortString(String s) {

    Message message = new Message("icu1@broadcast.server", Message.Type.normal);
    //message.setTo("icu1@broadcast.x-dev");
    message.setSubject("MSG_TYPE_NORMAL");
    message.setBody(s);
    message.setProperty("systemID", "JS1");
    message.setProperty("serverTime", trim(timestampTime()));
    message.setProperty("serverDate", trim(timestampDate()));

    try {
      newChat.sendMessage(message);
    }
    catch (Exception e) {
      println(e);
    }
  }
}

class  FilterThread extends  Thread {

  boolean  running;           // Is the thread running?  Yes or no?
  int  wait;                  // How many milliseconds should we wait in between executions?
  String  id;                 // Thread name
  int  count;                 // counter

  // Constructor, create the thread
  // It is not running by default
  FilterThread (int  w, String  s) {
    wait = w;
    running = false ;
    id = s;
    count = 0;
  }

  int  getCount() {
    return  count;
  }

  // Overriding "start()"
  void  start () {
    // Set running equal to true
    running = true ;
    // Print messages
    println ("Starting thread (will execute every " + wait + " milliseconds.)"); 
    // Do whatever start does in Thread, don't forget this!
    super .start();
  }

  // We must implement run, this gets triggered by start()
  void  run () {
    while  (running) {
      checkForNewCalls();
      // Ok, let's wait for however long we should wait
      try {
        sleep((long )(wait));
      } 
      catch  (Exception e) {
      }
    }
    System.out.println (id + " thread is done!");  // The thread is done when we get to    the end of run()
  }

  // Our method that quits the thread
  void  quit() {
    System.out.println ("Quitting."); 
    running = false ;  // Setting running to false ends the loop in run()
    // IUn case the thread is waiting. . .
    interrupt();
  }
} 
```

Rs232 类/选项卡：

```
import processing.serial.*;

Serial myPort; // Rs232, Serial Port
String inString;  // Input string from serial port: 
int lf = 10;      // ASCII linefeed 

String SelectedCom;

void LoadSerialPort() {

  println(Serial.list()); 
  println("________________________________________________________");

  try {
    myPort = new Serial(this, Serial.list()[0], 9600); 
    myPort.bufferUntil(lf);
    SelectedCom = Serial.list()[0];
    println("Connected to Serial Port:");
    println("________________________________________________________");
  } 
  catch (ArrayIndexOutOfBoundsException e) {
    String exception = e.toString();
    if (exception.contains("ArrayIndexOutOfBoundsException: 0")) {
      println("NO AVAILABLE COM PORT FOUND");
    } 
    else {
      println(e);
    }
  }
}

void serialEvent(Serial p) { 
  inString = p.readString();   
  CallList.add(new String(inString));
} 
```

Xmpp 类/选项卡：

```
String FromXmpp = "";
Chat newChat;
ChatManager chatmanager;

XMPPConnection connection;

public void OpenChatConnection() {

  // This is the connection to google talk. If you use jabber, put other stuff in here. 
  ConnectionConfiguration config = new ConnectionConfiguration("192.168.0.103", 5222, "Jabber/XMPP");
  config.setSASLAuthenticationEnabled(false);

  configure(ProviderManager.getInstance());

  connection = new XMPPConnection(config);

  println("Connecting");
  try {
    //connection.DEBUG_ENABLED = true;
    connection.connect();
    println("Connected to: "+connection.getServiceName() );
  } 

  catch (XMPPException e1) {
    println("NOT Connected");
  }

  if (connection.isConnected()) {

    try {

      // This is the username and password of the chat client that is to run within Processing.  
      println("Connecting");
      connection.login("System1", "test"); 
      //connection.login("inside_processing_username@gmail.com", "yourpassword");
    } 
    catch (XMPPException e1) {
      // would probably be a good idea to put some user friendly action here.
      e1.printStackTrace();
    }  
    println("Logged in as: "+connection.getUser() );
  }
  chatmanager = connection.getChatManager();
  // Eventhandler, to catch incoming chat events
  newChat = chatmanager.createChat("icu@broadcast.server", new MessageListener() {   //icu1@broadcast.x-dev   //admin@x-dev
    public void processMessage(Chat chat, Message message) {
      // Here you do what you do with the message
      FromXmpp = message.getBody();
      // Process commands
      //println(FromXmpp);
    }
  }
  );

  Roster roster = connection.getRoster();
  Collection<RosterEntry> entries = roster.getEntries();
  for (RosterEntry entry : entries) {
    System.out.println(entry);
  }
}

public void configure(ProviderManager pm) {

  //  Private Data Storage
  pm.addIQProvider("query", "jabber:iq:private", new PrivateDataManager.PrivateDataIQProvider());

  //  Time
  try {
    pm.addIQProvider("query", "jabber:iq:time", Class.forName("org.jivesoftware.smackx.packet.Time"));
  } 
  catch (ClassNotFoundException e) {
    println(("TestClient "+" Can't load class for org.jivesoftware.smackx.packet.Time"));
  }

  //  Roster Exchange
  pm.addExtensionProvider("x", "jabber:x:roster", new RosterExchangeProvider());

  //  Message Events
  pm.addExtensionProvider("x", "jabber:x:event", new MessageEventProvider());

  //  Chat State
  pm.addExtensionProvider("active", "http://jabber.org/protocol/chatstates", new ChatStateExtension.Provider());
  pm.addExtensionProvider("composing", "http://jabber.org/protocol/chatstates", new ChatStateExtension.Provider()); 
  pm.addExtensionProvider("paused", "http://jabber.org/protocol/chatstates", new ChatStateExtension.Provider());
  pm.addExtensionProvider("inactive", "http://jabber.org/protocol/chatstates", new ChatStateExtension.Provider());
  pm.addExtensionProvider("gone", "http://jabber.org/protocol/chatstates", new ChatStateExtension.Provider());

  //  XHTML
  pm.addExtensionProvider("html", "http://jabber.org/protocol/xhtml-im", new XHTMLExtensionProvider());

  //  Group Chat Invitations
  pm.addExtensionProvider("x", "jabber:x:conference", new GroupChatInvitation.Provider());

  //  Service Discovery # Items    
  pm.addIQProvider("query", "http://jabber.org/protocol/disco#items", new DiscoverItemsProvider());

  //  Service Discovery # Info
  pm.addIQProvider("query", "http://jabber.org/protocol/disco#info", new DiscoverInfoProvider());

  //  Data Forms
  pm.addExtensionProvider("x", "jabber:x:data", new DataFormProvider());

  //  MUC User
  pm.addExtensionProvider("x", "http://jabber.org/protocol/muc#user", new MUCUserProvider());

  //  MUC Admin    
  pm.addIQProvider("query", "http://jabber.org/protocol/muc#admin", new MUCAdminProvider());

  //  MUC Owner    
  pm.addIQProvider("query", "http://jabber.org/protocol/muc#owner", new MUCOwnerProvider());

  //  Delayed Delivery
  pm.addExtensionProvider("x", "jabber:x:delay", new DelayInformationProvider());

  //  Version
  try {
    pm.addIQProvider("query", "jabber:iq:version", Class.forName("org.jivesoftware.smackx.packet.Version"));
  } 
  catch (ClassNotFoundException e) {
    //  Not sure what's happening here.
  }

  //  VCard
  pm.addIQProvider("vCard", "vcard-temp", new VCardProvider());

  //  Offline Message Requests
  pm.addIQProvider("offline", "http://jabber.org/protocol/offline", new OfflineMessageRequest.Provider());

  //  Offline Message Indicator
  pm.addExtensionProvider("offline", "http://jabber.org/protocol/offline", new OfflineMessageInfo.Provider());

  //  Last Activity
  pm.addIQProvider("query", "jabber:iq:last", new LastActivity.Provider());

  //  User Search
  pm.addIQProvider("query", "jabber:iq:search", new UserSearch.Provider());

  //  SharedGroupsInfo
  pm.addIQProvider("sharedgroup", "http://www.jivesoftware.org/protocol/sharedgroup", new SharedGroupsInfo.Provider());

  //  JEP-33: Extended Stanza Addressing
  pm.addExtensionProvider("addresses", "http://jabber.org/protocol/address", new MultipleAddressesProvider());

  //   FileTransfer
  pm.addIQProvider("si", "http://jabber.org/protocol/si", new StreamInitiationProvider());

  pm.addIQProvider("query", "http://jabber.org/protocol/bytestreams", new BytestreamsProvider());

  //  Privacy
  pm.addIQProvider("query", "jabber:iq:privacy", new PrivacyProvider());
  pm.addIQProvider("command", "http://jabber.org/protocol/commands", new AdHocCommandDataProvider());
  pm.addExtensionProvider("malformed-action", "http://jabber.org/protocol/commands", new AdHocCommandDataProvider.MalformedActionError());
  pm.addExtensionProvider("bad-locale", "http://jabber.org/protocol/commands", new AdHocCommandDataProvider.BadLocaleError());
  pm.addExtensionProvider("bad-payload", "http://jabber.org/protocol/commands", new AdHocCommandDataProvider.BadPayloadError());
  pm.addExtensionProvider("bad-sessionid", "http://jabber.org/protocol/commands", new AdHocCommandDataProvider.BadSessionIDError());
  pm.addExtensionProvider("session-expired", "http://jabber.org/protocol/commands", new AdHocCommandDataProvider.SessionExpiredError());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T09:14:35.390

如果您熟悉 eclipse，首先您需要创建一个新的 Java 项目并将 Processing 的 core.jar 添加到构建路径中，然后从创建 PApplet 的子类开始。如果没有，有一个非常容易使用的名为[Proclipsing](http://code.google.com/p/proclipsing/)的 eclipse 插件和视频指南开始使用它。

![断断续续的](../Images/1400cc30bc370b9aec69974c9e882300.png)

**将您的代码从处理带到日食：**

您需要了解处理草图（包括选项卡）中的所有代码都会合并到一个 .java 文件中，并且草图名称是类名。您在草图的选项卡中定义的任何类都将成为主单个类中的嵌套类。最简单的查看方法是导出一个小程序并在生成的文件夹中查看该`SketchName.java`文件。请记住，选项卡**不是**一个类（尽管它可以包含一个）。

所以你有几个选择。以下是两种基本方法：

1.  创建一个新的 PApplet 子类并开始在其中粘贴整个代码（包括选项卡的内容）。您将需要明确访问器（例如`public void setup()`，而不是 just `void setup()`）并注意双精度/浮点值（例如，如果 eclipse 抱怨 1.0，请明确：**1.0f**）

2.  另一种选择是创建多个类，就像我想你打算在使用 eclipse 时那样做。问题是，在处理中，选项卡中定义的变量实际上是“全局”变量。如果您在顶部的主选项卡中声明它们，您的代码将以相同的方式工作。此外，需要重构使用 PApplet 函数。可以使用 Java 的类（不是 PApplet 的）调用一些函数来打破依赖关系：例如，`System.out.println()`而不是`println()`，但您可能希望您的类能够访问 PApplet 实例：

例如

```
public class  FilterThread extends  Thread {

  boolean  running;           // Is the thread running?  Yes or no?
  int  wait;                  // How many milliseconds should we wait in between executions?
  String  id;                 // Thread name
  int  count;                 // counter
  YourSketchClass parent;

  // Constructor, create the thread
  // It is not running by default
  FilterThread (int  w, String  s,YourSketchClass p) {
    wait = w;
    running = false ;
    id = s;
    count = 0;
    parent = p;
  }

  int  getCount() {
    return  count;
  }

  // Overriding "start()"
  public void  start () {
    // Set running equal to true
    running = true ;
    // Print messages
    System.out.println ("Starting thread (will execute every " + wait + " milliseconds.)"); 
    // Do whatever start does in Thread, don't forget this!
    super .start();
  }

  // We must implement run, this gets triggered by start()
  public void  run () {
    while  (running) {
      parent.checkForNewCalls();
      // Ok, let's wait for however long we should wait
      try {
        sleep((long )(wait));
      } 
      catch  (Exception e) {
      }
    }
    System.out.println (id + " thread is done!");  // The thread is done when we get to    the end of run()
  }

  // Our method that quits the thread
  void  quit() {
    System.out.println ("Quitting."); 
    running = false ;  // Setting running to false ends the loop in run()
    // IUn case the thread is waiting. . .
    interrupt();
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-20T08:26:09.360

每个使用聊天功能的类都需要知道聊天对象。您可以将所有不在主源文件中的单独类中的变量和函数。

在 Processing 中声明变量时，可以从任何选项卡中使用它，在 java 中全局变量不存在。您可以获得类似的功能：使用以下内容创建一个新文件**GlobalVars.java**：

```
public class GlobalVars {
   public static Chat myChat;
} 
```

现在每次你想访问聊天功能，你必须写例如`GlobalVars.myChat.sendMessage("Hi!");`

顺便说一句，您必须包含 net.jar 文件。在 Mac 上，它位于此处： *Processing.app/Contents/Resources/Java/modes/java/libraries/net/library/net.jar*

# google-apps-script - 在谷歌应用脚 本中存储数据的最佳方式

> ID：12019324
> 
> 赞同：4
> 
> 时间：2012-08-18T14:21:57.470
> 
> 标签：google-apps-script

我刚开始开发谷歌网络应用程序，我可以知道存储数据的最佳方式是什么？是使用 scriptDB、电子表格还是 JDBC？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T11:25:43.030

如果您想直接修改数据，则可以将数据保存在电子表格中，并根据电子表格数据构建应用程序。如果将数据存储在 ScriptDB 中，则无法轻松编辑数据。这一切都取决于您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T01:00:26.900

您可以通过使用此库从处理数据存储中解脱出来： [http ://www.harryonline.net/scripts/objdb-storing-data-with-google-apps-script/482](http://www.harryonline.net/scripts/objdb-storing-data-with-google-apps-script/482)

使用这个库，您可以同时使用电子表格和 JDBC 数据库，如果您以后改变主意，也可以轻松切换。

# xml - DocBook XML，文件链接结构之间？目录？

> ID：12019325
> 
> 赞同：1
> 
> 时间：2012-08-18T14:21:59.350
> 
> 标签：xml, xslt, xhtml, docbook

我已经将一堆老式的演示文件转换为 Docbook XML，每个文件都按预期显示。我打算将它们转换为 XHTML/HTML ，我的测试转换看起来很棒。我唯一的问题是如何使用链接创建适当的目录结构，我只是不确定要考虑什么过程。例如...我希望在页面的页脚上有指向其他转换后的 Docbook 页面的链接。如果有人有想法要考虑，我将不胜感激。

另外关于 XSLT，我使用的是 xsltproc，它只支持 XSLT 1.0 + 常见的 EXSLT 模块。xsltproc 是 libxslt 的命令行界面，它仍然不支持 XSLT 2.0。尽管具体的例子很棒，但我真的需要知道一般的方法。有了这些信息，我可以进一步搜索，最终找到具体的例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T18:11:13.027

**鉴于此源 XML 文档**：

```
<ref>
    <refentrytitle>FILE</refentrytitle>
    <volnum>1</volnum>
</ref> 
```

**然后这个转换**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:variable name="vU" select="'ABCDEFGHIJKLMNOPQRSTUVWXYZ'"/>
 <xsl:variable name="vL" select="'abcdefghijklmnopqrstuvwxyz'"/>

 <xsl:template match="ref">
   <a href="/{volnum}/{translate(refentrytitle, $vU, $vL)}.xml">
     <xsl:value-of select="refentrytitle"/>
   </a>
 </xsl:template>
</xsl:stylesheet> 
```

**产生想要的正确结果**：

```
<a href="/1/file.xml">FILE</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T09:52:58.913

借助 Saxon 9、XmlPrime 或 AltovaXML 等处理器支持的 XSLT 2.0，您可以使用`xsl:result-document` [http://www.w3.org/TR/xslt20/#creating-result-trees](http://www.w3.org/TR/xslt20/#creating-result-trees)使用一个样式表创建多个结果文档。通常您使用模式[http://www.w3.org/TR/xslt20/#modes](http://www.w3.org/TR/xslt20/#modes)来处理输入节点两次甚至更多次，使用一种模式创建单个页面，使用第二种模式创建目录。

# c# - 使用 TileUpdateManager 更新应用程序磁贴

> ID：12019327
> 
> 赞同：1
> 
> 时间：2012-08-18T14:22:02.413
> 
> 标签：c#, xaml, windows-8, microsoft-metro, windows-runtime

我正在使用 Windows 8 发布预览版和 C#(VS 2012) 开发 Metro 应用程序，我正在使用下面的代码来更新应用程序磁贴。

```
TileUpdateManager.CreateTileUpdaterForApplication().EnableNotificationQueue(true);

XmlDocument TileXML = TileUpdateManager.GetTemplateContent(TileTemplateType.TileWideImage);                

XmlNodeList imageAttribute = TileXML.GetElementsByTagName("image");
((XmlElement)imageAttribute[0]).SetAttribute("src", "ms-appx:///Assets/Tile.png");
((XmlElement)imageAttribute[0]).SetAttribute("alt", "red graphic");

TileNotification notify = new TileNotification(TileXML);
notify.ExpirationTime = DateTimeOffset.UtcNow.AddSeconds(10);

TileUpdateManager.CreateTileUpdaterForApplication().Update(notify); 
```

但是我的应用程序磁贴没有更新，我不知道我错过了什么以及我做错了什么，请帮助我。

我得到了答案，关于添加扩展文件“NotificationExtensions.winmd”作为我的参考，我还有几个问题

1.  当我通过将我的目标设备设置为“本地机器”来运行上面的代码时，它可以工作，但是当我将它设置为“模拟器”时它不会，任何人都可以解释一下为什么。
2.  我们通过使用下面的行来设置磁贴的到期时间，
    `notify.ExpirationTime = DateTimeOffset.UtcNow.AddSeconds(10);`
    如果希望动态磁贴连续运行，我必须做什么，

    请让我知道是否有任何链接或学习材料提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T07:53:21.997

谢谢你们，我得到了答案，我的图像大小是 <200KB 并且 < 1024x1024，我做的错误是我没有添加扩展文件“NotificationExtensions.winmd”作为我的参考。我做到了，我明白了。

# php - 如何在 Mac Os X Lion 10.7.4 上启用 Php Mcrypt

> ID：12019330
> 
> 赞同：1
> 
> 时间：2012-08-18T14:22:22.023
> 
> 标签：php, macos, osx-lion, mcrypt

我已经尝试在 OS X 中启用 mcrypt 两天了。我阅读了很多文档，但无法完成。也许是因为我是 OS X 环境的新手。

到目前为止我所做的简要总结是；

我安装了 Xcode 并安装了命令行工具。

下载并解压 libmcrypt-2.5.8 和 php-5.3.15。

```
cd libmcrypt-2.5.8
./configure && make && sudo make install 
```

这个的输出是

```
Libraries have been installed in:
/usr/local/lib 
```

以及其他一些日志，例如

```
make[2]: Nothing to be done for `install-exec-am'. 
```

下一步是；

```
cd php-5.3.15/ext/mcrypt
./configure && make && sudo make install 
```

这个的输出是

```
Installing shared extensions:
/usr/lib/php/extensions/no-debug-non-zts-20090626/ 
```

根据我阅读的文档，这意味着安装成功。在所有这些之后，我打开`/etc/php.ini`并写了`extension=mcrypt.so`。我用 sudo apachectl restart 重新启动了 apache。但是什么也没发生。Mcrypt 没有出现在`php -m`.

我还尝试使用 sudo port install 安装 mcrypt，`php-mcrypt +universal`但这也没有用。

我看到了另一个与此问题相关的主题，并且有一个答案说`extension=mcrypt.so`随着`mcrypt.so`. 我试过了，这对我也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T21:54:48.380

我发现这个演练很有用，[http://www.coolestguyplanettech.com/how-to-install-mcrypt-for-php-on-mac-osx-lion-10-7-development-server/](http://www.coolestguyplanettech.com/how-to-install-mcrypt-for-php-on-mac-osx-lion-10-7-development-server/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T15:03:35.013

确保在您的 php.ini 中设置了“extension_dir”属性，或者如果它已经存在，请检查它是否没有被注释。

# python - Django - 模型外观

> ID：12019336
> 
> 赞同：1
> 
> 时间：2012-08-18T14:23:31.587
> 
> 标签：python, django, model, python-2.7

我正在尝试为我的 Django 项目开发一个服务器端 API，但我想出了一大堆在 models.py 文件中的每个模型声明中定义的方法。所以我想创建一种外观类来处理 API 方法，只留下模型及其属性。
我曾经有这样的结构：

```
# models.py

class MyModel(models.Model):
    prop1 = ...
    prop2 = ...

    def f1(self):
        pass
    def f2(self):
        pass 
```

虽然现在我有这个：

```
# models.py

class MyModel(models.Model):
    prop1 = ...
    prop2 = ...

# wrappers.py

from myapp import models

class MyModel(models.MyModel):

    def f1(self):
        pass
    def f2(self):
        pass 
```

这在我写下来时非常有趣，因为它允许我分离功能的定义而不会丢失任何功能。但是，当我尝试测试新的数据模型时，我感到非常困惑。

```
$ python manage.py shell
Python 2.7.3 (default, Apr 20 2012, 22:44:07) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
(InteractiveConsole)
>>> from myapp.wrappers import MyModel
>>> MyModel
<class 'MyProject.myapp.models.MyModel'> 
```

WTF在这里发生！？当我要求“包装器”代替时，为什么我会得到模型类？
当然，这保留了模型的所有属性，但显然缺少包装器中定义的所有方法。
我希望你能帮助我，因为这对我来说完全是胡说八道。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T14:32:03.213

[文档](https://docs.djangoproject.com/en/dev/topics/db/models/)中再往下一点是[“代理模型”](https://docs.djangoproject.com/en/dev/topics/db/models/#proxy-models)。那些会做你想做的。

# ruby-on-rails - 如何在 ruby 中制作 facebook graph api curl 请求

> ID：12019350
> 
> 赞同：-1
> 
> 时间：2012-08-18T14:25:14.040
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, facebook-graph-api, curl

从 facebook graph api docs 这是我需要提出的 curl 请求。从控制台它的工作。现在我想在延迟工作中移动这个职位。我怎样才能做到这一点：

```
 curl -F 'access_token=xxxxxxxxx' \
  -F 'photo=http://xxxxxx.com/photos/13' \
    'https://graph.facebook.com/me/my_app_namespace:upload' 
```

PS：我有令牌等一切。我只想用 ruby​​ 编写这个 curl 请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T14:32:36.320

[`Net::HTTP`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/net/http/rdoc/index.html)应该是像这样的简单请求所需要的全部

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T14:33:28.620

为了快速和肮脏，只需将命令发送到带有 tics 或`system`.

要获得更优雅、更高效（具有本机绑定）的解决方案，请使用*[Ruby](http://rubygems.org/gems/curb/)* gem。

> Curb（可能是 CUrl-RuBy 之类的）为 libcurl(3) 提供 Ruby 语言绑定，这是一个功能齐全的客户端 URL 传输库。cURL 和 libcurl 位于[http://curl.haxx.se/](http://curl.haxx.se/)。

# ios - 使用适用于 ARC 和多个开发人员的最新 iOS SDK 构建 Facebook

> ID：12019359
> 
> 赞同：0
> 
> 时间：2012-08-18T14:26:22.020
> 
> 标签：ios, facebook, sdk, facebook-ios-sdk

我正在尝试从 Facebook SDK 2.0 升级到 3.0，我遇到的问题与此线程中提到的基本相同：[XCode 和 Facebook IOS SDK - 指令不正确](http://facebook.stackoverflow.com/questions/11862669/xcode-facebook-ios-sdk-instructions-incorrect)，但我认为目标略有不同。

我在这里使用说明：http: [//developers.facebook.com/docs/mobile/ios/build/](http://developers.facebook.com/docs/mobile/ios/build/)

当我尝试构建静态库时，我收到“没有这样的文件或目录”消息。我检查了一下，果然，当我尝试执行它时，“脚本”目录中没有 build_facebook_ios_sdk_static_lib.sh 文件。

这是我的困境。我们的项目有多个开发人员（以及其他一些基本上知道如何在 Xcode 中下拉和构建的成员，仅此而已），我不想要求所有人都安装 Facebook SDK。对于构建机器也是如此（尽管在那种情况下，我想我们可以直接在构建机器上安装 SDK）。

听起来构建静态库已被有效弃用，或者我可能遗漏了一些东西，但我真正需要的是将所有相关代码放入我们的存储库，并且任何人都可以**将其拉下并构建**的形式. 3.0 SDK 是否可以做到这一点，如果可以，执行此操作的步骤是什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T01:00:21.317

对于 Facebook SDK 3.1（3.0 的最新版本），您不应遵循旧说明，而应查看这些说明： [https ://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/3.1/](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/3.1/)

# java - 添加整数直到遇到负数

> ID：12019364
> 
> 赞同：0
> 
> 时间：2012-08-18T14:27:22.380
> 
> 标签：java, file-io, while-loop

再会！这是一个应该添加二进制文件中的整数直到遇到负数的代码。

```
n = inputStream.readInt();
while (n>=0) {
    n=m;
    m++;
    n = inputStream.readInt();
}
System.out.println("Sum: "+m); 
```

但是，当我输入 1、2、3 时，它会输出 3 作为总和。与 1、2、3、4、5 相同，它输出 5。我知道我的 while 循环有问题，我就是想不通。请帮我找出问题所在。原谅我，我是编程新手，我还在学习。非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T14:30:53.893

```
n = inputStream.readInt();
while (n>=0) {
    m += n;
    n = inputStream.readInt();
}
System.out.println("Sum: " + m); 
```

您只是添加数字的数量，而不是数字的总和。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T14:31:10.617

您的代码只计算 while 循环的迭代次数。您在每次迭代中递增 m，最后您只显示相同的 m 值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T04:03:11.267

```
System.out.println("Sum: " + m); 
```

只显示最终结果，即使它会在几分之一秒内显示所有其他输出。

还有

```
System.out.println("Sum: " + m); 
```

应该在while循环内。

在 java GUI 中，您可以执行相同的操作

```
jTextArea1.setText(jTextArea1.getText()+m); //where jTextArea1 is the component to display the text. 
```

# java - 如何在 java 的编辑器中使用语法高亮显示？

> ID：12019366
> 
> 赞同：1
> 
> 时间：2012-08-18T14:27:44.267
> 
> 标签：java, swing, syntax-highlighting

我正在为我的第 10 个 Std 制作一个编程 IDE。项目。我被困在一个点上。我想在我的编辑器中突出显示语法（就像在 eclipse/netbeans 中一样）。我使用过 JTextArea。谁能帮我解决这个问题？我想自己编写代码，而不仅仅是使用其他人（java除外）库。

# apache - mod_rewrite 拾取存在的目录

> ID：12019370
> 
> 赞同：2
> 
> 时间：2012-08-18T14:28:17.060
> 
> 标签：apache, .htaccess, mod-rewrite

我在 Web 应用程序的根文件夹中有以下 .htaccess：

```
RewriteEngine on

RewriteCond %{HTTP_HOST} ^\.(.*) [NC]
RewriteRule ^(.*) http://%1/$1 [R=301,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^.*$ index.php?req=%{REQUEST_URI}&%{QUERY_STRING} 
```

这可以按我的意愿工作，但有一个例外：如果目录确实存在，则提供该目录，而不是将请求传递给 PHP 脚本。

因此，如果目录 /docs/ 存在，则将 index.htm 发送到浏览器，而对不存在的目录 /doesnotexist/ 的请求将交给 PHP 脚本。

有什么想法可以修改它，以便无论该位置是否存在，所有请求都交给 PHP？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T14:51:22.370

您的第二组条件限制匹配请求不指向现有文件或现有目录。这就是为什么当您浏览到`/docs/`并且目录存在时，规则不会触发。

要解决此问题，您需要做的就是摆脱第二个重写条件。这让它下面的规则在任何不指向现有文件的请求上触发。如果您确实想要将*每个*请求重定向到 PHP 脚本，那么还需要消除第一个重写条件。

```
RewriteCond %{REQUEST_FILENAME} !-f
# RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^.*$ index.php?req=%{REQUEST_URI}&%{QUERY_STRING} 
```

请注意，`#`取消注释该行，因此它不会被 mod_rewrite 拾取。

# jquery-plugins - 如何使用 Cloudinary jQuery 插件直接从页面上传图片？

> ID：12019371
> 
> 赞同：6
> 
> 时间：2012-08-18T14:28:19.283
> 
> 标签：jquery-plugins, cloudinary

初学者的问题在这里。

我正在尝试将照片从网页直接上传到[cloudinary](http://cloudinary.com)。

[这](https://github.com/cloudinary/cloudinary_js)是 Cloudinary 推荐使用的 jQuery 插件。

不幸的是，该插件尚未记录在案，并且没有明确的“example.html”文件。我试图了解插件代码，但到目前为止没有成功。

有人可以根据“example.html”的外观向我指出正确的方向吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-12T02:48:31.957

下载 Jquery SDK**和**服务器 sdk。

这是带有 java 服务器端的代码：

## 在服务器端生成签名：

这是java中的JSP代码：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<%@ page import="java.util.Map" %> 
<%@ page import="java.util.HashMap" %> 
<%@ page import="java.sql.Timestamp" %> 
<%@ page import="com.cloudinary.Cloudinary" %> 
<%
String timestamp=(new Long(System.currentTimeMillis() / 1000L)).toString();
Cloudinary cloudinary = new Cloudinary("cloudinary://CLOUDINARY_URL");
Map<String, Object> params = new HashMap<String, Object>();
Map options = Cloudinary.emptyMap();
boolean returnError = Cloudinary.asBoolean(options.get("return_error"), false);
String apiKey = Cloudinary.asString(options.get("api_key"), cloudinary.getStringConfig("api_key"));
if (apiKey == null)
    throw new IllegalArgumentException("Must supply api_key");
String apiSecret = Cloudinary.asString(options.get("api_secret"), cloudinary.getStringConfig("api_secret"));
if (apiSecret == null)
    throw new IllegalArgumentException("Must supply api_secret");
params.put("callback", "http://www.mcbjam.com/Scripts/vendor/cloudinary/html/cloudinary_cors.html");
params.put("timestamp", timestamp);
String expected_signature = cloudinary.apiSignRequest(params, apiSecret);%> 
```

您可以在 Cloudinary 仪表板上拥有 CLOUDINARY_URL。我使用 cloudinary.apiSignRequest 方法，该方法包含在服务器 cloudinary sdk 中。我签署了回调和时间戳。

## HTML 和 Javascript

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
    <script src="../Scripts/vendor/jquery-1.9.1.min.js"></script>
    <script src="../Scripts/vendor/cloudinary/jquery.ui.widget.js"></script>
    <script src="../Scripts/vendor/cloudinary/jquery.iframe-transport.js"></script>
    <script src="../Scripts/vendor/cloudinary/jquery.fileupload.js"></script>
    <script src="../Scripts/vendor/cloudinary/jquery.cloudinary.js"></script> 
</head>
<body>
<script type="text/javascript">
   $.cloudinary.config({"api_key":"YOUR_API_KEY","cloud_name":"YOUR_CLOUD_NAME"});
</script> 
<input name="file" type="file" id="uploadinput"
       class="cloudinary-fileupload" data-cloudinary-field="image_upload" 
       data-form-data="" ></input>
<script>
var data = { "timestamp":  <%= timestamp %>, 
          "callback": "http://YOUR_DOMAIN/cloudinary_cors.html",
          "signature": "<%= expected_signature %>", 
          "api_key": "YOUR API KEY" };    
$('#uploadinput').attr('data-form-data', JSON.stringify(data));
</script>
</body>
</html> 
```

将 cloudinary_cors.html 放在你的主机上并修改 html 上的路径。设置您的 APIKEY 和云名称。

<%= timestamp %> 和 <%= expected_signature %> 是在 java 上计算的元素。（你可以在 php 上做同样的事情）。

我在我的网站上使用此代码[http://paint.mcbjam.com](http://paint.mcbjam.com) 您在这里有更多详细信息：http: [//mcbjam.blogspot.fr/2013/05/integrer-cloudinary-pour-realiser-des.html](http://mcbjam.blogspot.fr/2013/05/integrer-cloudinary-pour-realiser-des.html)法语.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T15:33:56.630

请参阅最近发布的博客文章，其中介绍了使用 jQuery 从浏览器直接上传到 Cloudinary：http: [//cloudinary.com/blog/direct_image_uploads_from_the_browser_to_the_cloud_with_jquery](http://cloudinary.com/blog/direct_image_uploads_from_the_browser_to_the_cloud_with_jquery)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-05T06:47:57.863

您不能仅使用纯 html 将图像上传到 Cloudinary。您需要一个服务器来签署您的请求参数。所以，这是你的 example.html 文件：

```
<html>
        <head>
            <title></title>
            <script src='jquery.min.js' type='text/javascript'></script>
            <script src='jquery.ui.widget.js' type='text/javascript'></script>
            <script src='jquery.iframe-transport.js' type='text/javascript'></script>
            <script src='jquery.fileupload.js' type='text/javascript'></script>
            <script src='jquery.cloudinary.js' type='text/javascript'></script>
            <script type = "text/javascript">
                $.cloudinary.config({ cloud_name: 'sample', api_key: '874837483274837'});
            </script>
        </head>
        <body>
            <input name="file" type="file" 
               class="cloudinary-fileupload" data-cloudinary-field="image_id" 
               data-form-data="--signedData--" />
        </body>
</html> 
```

注意：data-form-data 属性中的 signedData 是由服务器端代码生成的 JSONObject，其中包含请求参数的 sha1Hex 签名。

一个例子如下：

```
{
    "api_key": "874837483274837",
    "timestamp": "1234567890",
    "public_id": "sample",
    "signature": "de9f2c7fd25e1b3afad3e85a0bd17d9b100db4b3"
} 
```

另外，让我明确一点，您不需要任何其他按钮来上传文件，只需选择文件就会触发 jQuery 事件并将请求参数发送到 Cloudinary。

[您可以在此处](https://stackoverflow.com/questions/32817523/how-to-generate-signature-in-java-and-use-it-in-jquery-cloudinary/32942546#32942546)找到有关在 java 上生成签名的信息。

# c++ - Visual Studio 未正确执行代码

> ID：12019372
> 
> 赞同：0
> 
> 时间：2012-08-18T14:28:22.270
> 
> 标签：c++, visual-studio-2010, runtime

是的，所以我尝试了很多东西，但输出总是一团糟。这是一张显示发生了什么的图片。如您所见，字母变量变得很奇怪。

![http://img249.imageshack.us/img249/8775/weirdvisstud.png](../Images/ff7629a57f06331a8764ec04488d0d49.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T14:32:16.953

问题是它`"letter: " + letter"`没有做你认为它做的事情，它将 letter 的整数值添加到`const char*`string literal `"letter"`。最简单的解决方法是`string("letter: ") + letter`.

# ios - 将标签栏翻转到简单视图

> ID：12019373
> 
> 赞同：0
> 
> 时间：2012-08-18T14:28:34.120
> 
> 标签：ios, uiviewcontroller, flip, tabbarcontroller

1.  是否可以将标签栏视图翻转到另一个视图？如果不是，请用“否”回答我。

2.  如果可能的话，你能给我一个基本的想法吗？我尝试了一些方法，但没有奏效，我是初学者。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T14:41:39.937

你的意思是你有一个标签栏，你想将整个屏幕翻转到另一个视图？您可以使用模态视图控制器来做到这一点。例如（来自标签栏控制器中的视图控制器）：

```
UIViewController *vc = [[UIViewController alloc] initWithNibName:nil bundle:nil];
vc.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
[self presentModalViewController:vc animated:YES]; 
```

# jenkins - Jenkins Rake 单元测试任务输出丢失

> ID：12019374
> 
> 赞同：1
> 
> 时间：2012-08-18T14:28:37.537
> 
> 标签：jenkins, rake, rake-task

我将 Jenkins v1.467 用于多个 ruby​​ 管理脚本（不是 rails）的持续集成。我注意到当我在本地运行它时，输出看起来很正常，但是当我看到 jenkins 日志时，它没有打印单元测试输出。

詹金斯输出

```
 [SEACE API - Build and Unit Test] $ rake TESTOPTS=-v
    /usr/local/bin/ruby -w -I"lib" -I"/usr/local/lib/ruby/1.9.1"               "/usr/local/lib/ruby/1.9.1/rake/rake_test_loader.rb" "test/parser-test.rb" "test/url-mapper-test.rb" -v
    => Execute Unit Tests 
```

在本地运行

```
TestMapper: 
  test_map_all:                     /Users/lmayorga/GitRepositories/seaceapi/src/mapper.rb:44:in `map_attributes': warning: URI.escape is obsolete
/Users/lmayorga/GitRepositories/seaceapi/test/url-mapper-test.rb:26:in `test_map_all': warning: URI.escape is obsolete
.: (0.000954)
  test_no_parameters:                   /Users/lmayorga/GitRepositories/seaceapi/src/mapper.rb:44:in `map_attributes': warning: URI.escape is obsolete
/Users/lmayorga/GitRepositories/seaceapi/test/url-mapper-test.rb:34:in `test_no_parameters': warning: URI.escape is obsolete
.: (0.000633)
TestParser: 
  test_contains_bases_link:             .: (3.745998)
  test_contains_name:                   .: (3.204862)
  test_contains_region:                 .: (3.062733)
  test_contains_valid_date:             .: (3.188995)
  test_get_all:                     .: (3.231105) 
```

我认为我的 Rake 文件测试任务看起来还不错。

```
Rake::TestTask.new(:test) do |t|
  t.warning = true
  t.verbose = true
  t.test_files = FileList['test/*-test.rb']
end 
```

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T08:31:41.380

您是否检查过是否需要任何其他环境变量来运行 rake 任务？Jenkins 构建中并非所有变量都可用。

# wordpress - 将内联样式属性添加到 Wordpress 菜单项

> ID：12019375
> 
> 赞同：0
> 
> 时间：2012-08-18T14:28:46.613
> 
> 标签：wordpress, menu, styles, inline

使用最新版本的 WP，是否可以从 wordpress 菜单面板中将内联样式属性添加到 wordpress 菜单项？

例如，我有一个菜单，无论出于何种原因，我都需要绝对定位菜单项。我希望我的客户能够进入 WP 菜单面板，只需将“left:xx%”样式添加到任何项目。

我知道这可以通过样式表完成 - 但希望也有一种方法可以做到这一点，如上所述。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T22:53:02.310

[**Shortcodes Pro**](http://wordpress.org/extend/plugins/shortcodes-pro/)是一个很棒的插件。

# java - 关于类的所有方法中的静态

> ID：12019377
> 
> 赞同：3
> 
> 时间：2012-08-18T14:29:17.910
> 
> 标签：java

我正在浏览 java 类，在其中我发现所有方法都是 static ，我想知道当我们必须在所有方法前面加上 static 前缀时，什么时候有要求或条件出现在哪里。这是任何一种设计模式..？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T14:33:44.237

这通常用于实用程序类。以数学课为例。您不需要对象的实例来计算 2 个数字的最小值，因此这`Math.min`是一个静态方法是有意义的。

但是，过度使用静态方法/字段[不一定是好的设计实践](https://stackoverflow.com/questions/7026507/why-are-static-variables-considered-evil)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T14:33:03.767

确切地说：**实用程序模式**

[http://en.wikipedia.org/wiki/Utility_pattern](http://en.wikipedia.org/wiki/Utility_pattern)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T14:41:08.397

具有所有静态方法的类用于以下目的：

1) 抄自 Joshua Bloch Effective Java

> 接口不能有静态方法，因此按照惯例，名为 Type 的接口的静态工厂方法放在名为 Types 的不可实例化类（第 4 项）中。例如，Java 集合框架有 32 个方便的集合接口实现，提供不可修改的集合、同步集合等。几乎所有这些实现都是通过一个不可实例化的类 (java.util.Collections) 中的静态工厂方法导出的。返回对象的类都是非公开的。

2）@tgoossens 建议的实用模式

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T14:35:20.910

Helper 类通常只提供静态方法。这些类提供了一些方法，这些方法不仅针对一种对象，而且可以在整个项目中共享。例如，MathHelper 可以定义一种方法来计算浮点值数组的平均值，另一种方法用于计算 2 点之间的距离等等。

# android - Android：访问 Listview 行中的元素并将它们存储在字符串中

> ID：12019381
> 
> 赞同：0
> 
> 时间：2012-08-18T14:29:36.443
> 
> 标签：android, listview, arraylist, listadapter

我正在开发一个应用程序，该应用程序`ListView`在文件中将电影声明`strings.xml`为字符串数组。每`ListView`行有 3 个元素，a.) 电影标题 b.) Gross c.) 发布日期。长按一行时，会弹出编辑该特定行的选项。如果用户点击它，他/她将被带到下一个屏幕，其中 3`EditTexts`对应于 Title、Gross 和 Date，他们可以在其中编辑所述条目。然而，必须首先使用初始数据填充编辑文本。

我的问题是，我似乎无法访问 的数据`ListView`，因此“编辑屏幕”没有填充初始数据。代码没有错误，但我知道我做错了什么，我不能把我的手指放在它上面。这是我的第一个屏幕的代码：

```
public void editEntry(int id) {
    Intent newData = new Intent(Lab8_082588.this, Lab8_082588Add.class);
    TextView movieTitle = (TextView) findViewById(R.id.title);
    TextView movieGross = (TextView) findViewById(R.id.gross);
    TextView movieDate = (TextView) findViewById(R.id.date);

    String startTitle = movieTitle.getText().toString();
    String startGross = movieGross.getText().toString();
    String startDate = movieDate.getText().toString();

    newData.putExtra(Lab8_082588Edit.TITLE_STRING, startTitle);
    newData.putExtra(Lab8_082588Edit.GROSS_STRING, startGross);
    newData.putExtra(Lab8_082588Edit.DATE_STRING, startDate);
    startActivityForResult(newData, Lab8_082588.EDIT_MOVIE);
} 
```

我的适配器类：

```
 private class SampleCustomAdapter extends BaseAdapter {

    public SampleCustomAdapter(ArrayList<Lab8_082588FetchDetails> movies) {
        internalList = movies;
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return internalList.size();
    }

    @Override
    public Object getItem(int index) {
        // TODO Auto-generated method stub
        return internalList.get(index);
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        LayoutInflater inflater = getLayoutInflater();
        View view;

        if (convertView == null) {
            view = inflater.inflate(R.layout.row, null);
        } else {
            view = convertView;
        }

        // extract the views to be populated
        TextView title = (TextView) view.findViewById(R.id.title);
        TextView gross = (TextView) view.findViewById(R.id.gross);
        TextView date = (TextView) view.findViewById(R.id.date);

        // extract the object that will fill these
        Lab8_082588FetchDetails movie = internalList.get(position);

        title.setText(movie.getTitle());
        date.setText(movie.getDate());
        gross.setText(movie.getGross());

        // return the view
        return view;
    }
} 
```

我的 EditMovies 活动：

```
 @Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.addedit);
    initialize();
}

private void initialize() {
    // TODO Auto-generated method stub
    Intent prepopulate = getIntent();
    EditText movieTitle = (EditText) findViewById(R.id.etTitle);
    EditText movieGross = (EditText) findViewById(R.id.etGross);
    EditText movieDate = (EditText) findViewById(R.id.etDate);

    String startTitle =  prepopulate.getStringExtra(Lab8_082588Edit.TITLE_STRING);
    String startGross = prepopulate.getStringExtra(Lab8_082588Edit.GROSS_STRING);
    String startDate = prepopulate.getStringExtra(Lab8_082588Edit.DATE_STRING);

    movieTitle.setText(startTitle);
    movieGross.setText(startGross);
    movieDate.setText(startDate);
} 
```

我的 FetchDetails 类

```
 public class Lab8_082588FetchDetails implements Comparable<Lab8_082588FetchDetails>     {

private String title;
private String gross;
private String date;

public String getTitle() {
    return title;
}

public void setTitle(String title) {
    this.title = title;
}

public String getGross() {
    return gross;
}

public void setGross(String gross) {
    this.gross = gross;
}

public String getDate() {
    return date;
}

public void setDate(String date) {
    this.date = date;
}

@Override
public int compareTo(Lab8_082588FetchDetails another) {
    // TODO Auto-generated method stub
    return title.compareTo(another.title);
}

} 
```

我选择的上下文项目：

```
 @Override
public boolean onContextItemSelected(MenuItem item) {
    if (item.getTitle() == "Edit Entry") {
        editEntry(item.getItemId());
    } else if (item.getTitle() == "Delete Entry") {
        deleteEntry(item.getItemId());
    } else {
        return false;
    }
    return true;
} 
```

我该如何补救？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T14:52:00.370

您可以使用该`[ListView].setOnItemClickListiner(listOnItemClickListener );`方法并使用位置索引来获取相应电影的数据：

```
OnItemClickListener listOnItemClickListener = new OnItemClickListener() {

    @Override
    public void onItemClick(AdapterView<?> arg0, View view, int position,
            long arg3) {

                    Lab8_082588FetchDetails movie = internalList.get(position);

                    //instead of passing int value pass movie object.
                    editEntry(movie);

                     //newData.putExtra(Lab8_082588Edit.TITLE_STRING, movie.getTitle());
                     //newData.putExtra(Lab8_082588Edit.GROSS_STRING, movie.getGross());
                     //newData.putExtra(Lab8_082588Edit.DATE_STRING, movie.getDate());

                     //startActivityForResult(newData, Lab8_082588.EDIT_MOVIE);

    }
}; 
```

如果这对您不起作用，您可以使用`View.setTag()`将数据标记到视图中`getView()`并`View.getView()`获取该数据。

# silverlight - 如何为 Windows Phone 应用程序填充独立存储

> ID：12019383
> 
> 赞同：2
> 
> 时间：2012-08-18T14:29:57.987
> 
> 标签：silverlight, windows-phone-7

是否有推荐的方法在第一次运行 Windows Phone 7 应用程序的独立存储中初始化数据？现在我能想到的最好的解决方案是在 IsolatedStorageSettings 中放置一个标志，并在应用程序启动事件中检查它是否存在。如果标志不存在，我会在代码中初始化几个对象并将它们保存到独立存储并设置标志，以便下次运行应用程序时不会设置它们。有一个更好的方法吗？我应该将序列化状态的对象添加为某种资源，还是可以在代码中初始化它们？我希望他们需要一千行代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T23:09:10.387

好吧，如果您可以创建文件并将它们添加到项目中。如果你确定你不会编辑你的文件，而不是保持它们那样。这些文件将进入您的安装文件夹。或者，如果您认为要编辑它们并希望保存更改，请将它们从安装文件夹复制到应用程序存储文件夹。这是一个链接，其中将作为项目引用添加的数据库从安装文件夹复制到应用程序的存储文件夹。 [http://msdn.microsoft.com/en-us/library/hh286411(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/hh286411(v=vs.92).aspx)

对您的文件执行相同的操作，一切都会好起来的。

你问题的第二部分。之后，只需检查应用程序存储文件夹中的一个文件/文件夹，如果它说是，则不要将文件从安装文件夹复制到应用程序存储文件夹。

如果您在应用程序启动时尝试创建文件，而不仅仅是在运行创建代码之前添加检查。您将在哪里搜索文件/文件夹的存在。如果它存在，请不要运行文件创建代码。

# html - HTML & CSS：如何创建四个相同大小的标签，填充 100% 宽度？

> ID：12019386
> 
> 赞同：7
> 
> 时间：2012-08-18T14:30:50.203
> 
> 标签：html, css, navigation

我正在尝试为我的网站创建一个导航面板。我希望它包括：

*   四个相同大小的选项卡，每个选项卡均以文本为中心。
*   它们应该填满整个页面宽度。

我真的希望设计灵活且浏览器友好。我尝试了各种浮动技术，但我无法让它发挥作用。我希望你能帮助我！

谢谢你。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-18T15:27:46.860

**HTML**

编辑：现在是 2015 年，HTML5 已经存在了一段时间；下面的代码应该在一个`nav`元素（[html5doctor](http://html5doctor.com/nav-element/)）中，并在其上具有地标 ARIA 属性`role="navigation"`（并且 99.9% 的时间在任何给定页面中都是唯一的）。

导航面板应使用无序列表的链接：

```
<ul id="nav">
  <li><a href="#">One</a></li>
  <li><a href="#"> Second</a></li>
  <li><a href="#">Third</a></li>
  <li><a href="#">Fourth and last, so large that... worst case</a></li>
</ul> 
```

**CSS**

EDIT2：现在是 2017 年，只需使用[Flexbox](https://css-tricks.com/snippets/css/a-guide-to-flexbox/) （带或不带`flex-wrap: wrap`）

`inline-block`很有用，但有一个缺点：必须仔细管理两个元素之间的空白。无论`</li>`是在 HTML5 中删除或不删除，还是`</li>`在下一行的开头卡住`</li><li>next item`或其他技巧，你仍然需要做一些事情，否则它会在 2 个元素之间创建一个 ~4px 的间隙。

如果总数不是 4 的倍数，则 25% + 25% + 25% + 25% 在所有浏览器上不等于 100%。每个浏览器都有自己的舍入方法。

如果您希望元素的总宽度为 100% 且宽度相等，另一种方法是使用**`display: table`**(and **`table-cell`**) with**`table-layout: fixed`**来强制浏览器使用*其他*表格算法，该算法不尝试使单元格宽度适应内容但尊重所需的宽度由设计者/开发者尽可能。

```
ul {
  margin: 0;
  padding: 0;
}
li {
  list-style-type: none;
}
#nav {
  display: table;
  table-layout: fixed;
  text-align: center;
}
#nav li {
  display: table-cell;
  width: 25%;
  padding-right: 1px;
  height: auto;
  vertical-align: bottom;
}
#nav a {
  display: block;
  min-height: 100%;
  padding: 4px 10px;
  background-color: #222;
  color: white;
  border-radius: 6px 6px 0 0;
} 
```

**小提琴**

[http://jsfiddle.net/PhilippeVay/aHCy3/1/](http://jsfiddle.net/PhilippeVay/aHCy3/1/)
编辑： http: [//jsfiddle.net/PhilippeVay/aHCy3/2/](http://jsfiddle.net/PhilippeVay/aHCy3/2/)每个选项卡之间的另一种空间方法，由我的同事提供。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-18T14:36:20.270

你不需要花车。只需将宽度设置为 25%，或略小于 25%。如果您在块级元素上使用它，请设置`display: inline-block`. 这适用于所有浏览器大小，并响应窗口大小调整。

**HTML**

```
<div class="nav">Nav 1</div>
<div class="nav">Nav 2</div>
<div class="nav">Nav 3</div>
<div class="nav">Nav 4</div>​ 
```

**CSS**

```
body, html {
    width: 100%;
    padding: 0;
    margin: 0;
}
.nav {
    width: 24%; /*Slightly less than 1/4th of the width*/ 
    display: inline-block;
    padding: 0;
    margin: 0;
    text-align: center;
}​​ 
```

[**现场演示**](http://jsfiddle.net/eNkce/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T14:35:16.433

CSS：

```
.tab {
    float: left;
    width:25%;
    height:25px;
    background:black;
    border:1px solid #fff;
    box-sizing: border-box;
}​ 
```

html:

```
<div class="tab"></div>
<div class="tab"></div>
<div class="tab"></div>
<div class="tab"></div>​ 
```

jsfiddle：http: [//jsfiddle.net/zP7Xh/6/](http://jsfiddle.net/zP7Xh/6/)

# php - 遍历 PHP-MySQL 中结果资源的子部分

> ID：12019388
> 
> 赞同：0
> 
> 时间：2012-08-18T14:30:53.370
> 
> 标签：php, mysql

在我的程序中，我启动一个 SQL 查询并取回一个结果资源。然后，我使用 mysql_fetch_array() 函数遍历此结果资源的行，并使用每行字段的内容来构造进一步的 SQL 查询。

启动第二个查询的结果是我想要的第一组结果。但是，由于这样做产生的结果数量并不多，我想通过删除用于进行查询的最后一条记录来降低搜索的具体性。

例如，产生我想要的第一组结果的查询可能是：

```
 SELECT uid FROM users WHERE (gender=male AND relationship_status=single 
AND shoe_size=10) 
```

然后我想删除最后一条记录，以便我的查询变为：

```
SELECT uid FROM users WHERE (gender=male AND relationship_status=single) 
```

我已经编写了生成第一个查询的代码，但正如我上面提到的，我使用 mysql_fetch_array 函数来遍历所有记录。在随后的“轮次”中，我只想遍历连续更少的记录，这样我的查询就不那么具体了。我怎样才能做到这一点？

这似乎也是一种非常低效的方法 - 所以我欢迎任何可能使其更有效率的简单想法。

**编辑：感谢您的回复-是的，我实际上是在我的程序中这样做的。我基本上是在尝试通过获取用户在数据库中指定的所有偏好并使用它来形成查询以查找具有这些偏好的人来实现基本搜索算法。因此，第一次使用所有条件进行搜索，然后在连续尝试使用较少的条件进行搜索并否定先前返回的用户 ID。目前我正在为每个“回合”从头构建查询，但我想找到一种方法可以使用最后一个查询来做到这一点**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T14:35:09.080

使用上面的查询，您可以执行以下操作：

```
SELECT uid 
FROM users 
WHERE uid NOT IN (
        SELECT uid 
        FROM users 
        WHERE 
        (gender=male 
        AND relationship_status=single 
        AND shoe_size=10)
        ) 
```

这实际上会将您的第一个查询变成子查询，并使用它来否定返回的结果。即，它将返回所有行，而不是在第一个查询中。

# sql - 具有检查约束的列，仅接受大写 A 到大写 Z

> ID：12019390
> 
> 赞同：1
> 
> 时间：2012-08-18T14:31:13.783
> 
> 标签：sql, oracle11g, check-constraints

我有一列`varchar2(30)`with`not null`和`check constraint`。

我的问题是，我希望该列仅通过使用检查约束来接受大写 A 到大写 Z。我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T15:22:33.243

```
CONSTRAINT check_column_name CHECK (REGEXP_LIKE(column-name, '^[A-Z]+$')); 
```

这是一个[sqlfiddle](http://sqlfiddle.com/#!4/0cf5c/1)示例。

# html - Django 服务 CSS 和 HTML

> ID：12019393
> 
> 赞同：0
> 
> 时间：2012-08-18T14:31:57.100
> 
> 标签：html, css, django

我目前正在开发一个 django 应用程序，需要部署我正在努力部署的 css 样式表，例如 base_site.css。我目前正在分解一个工作正常的“索引”url，但需要链接 css 表-我的设置如下：

3) 样式表内容示例：

```
<link rel="stylesheet" type="text/css" href="Tom/base.css" /> 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T14:38:26.647

在开发模式下，Django 很乐意为您提供静态资源。因此，对于您的示例，您的 settings.py 中会有类似的内容：

```
STATIC_ROOT = 'path-to-your-app/static'
STATIC_URL = '/static/' 
```

然后您的目录结构将如下所示：

```
static/
  Tom/
    base.css 
```

并将标签的href更改为：

```
/static/Tom/base.css 
```

Django 有关于这个主题的非常好的文档，花一些时间阅读它们：

[https://docs.djangoproject.com/en/1.4/howto/static-files/](https://docs.djangoproject.com/en/1.4/howto/static-files/)

# single-sign-on - 无需 Windows 登录的富客户端（“胖客户端”）单点登录

> ID：12019397
> 
> 赞同：5
> 
> 时间：2012-08-18T14:32:26.053
> 
> 标签：single-sign-on, kerberos, saml, fat-client

Web 应用程序（通过浏览器使用）的单点登录 (SSO) 已详细记录并建立。为富客户端建立 SSO 比较困难，通常建议基于 Kerberos 票证，特别是使用 Windows 登录到域中的 ActiveDirectory。

但是，我正在为以下问题寻找更通用的解决方案：我需要建立“真实”SSO（所有应用程序的一个身份，即不仅仅是跨应用程序的密码同步），在客户端（非托管计算机，包括非 Windows），“终端客户端”是 Java 应用程序和 GTK+ 应用程序。两者都使用基于 HTTP 的协议（例如，基于 HTTPS 的 WebServices）与其服务器对应方通信。客户端和服务器不一定位于同一个 LAN/Intranet，但客户端可以从 Extranet 访问服务器。所有应用程序的服务器端位于同一个网络区域，SSO 组件可以通过 LDAP 访问身份提供者。

我的问题基本上是“我该怎么做”？进一步来说，

a) 对于安全、受保护的客户端“sso 会话存储”是否存在商定的机制，就像浏览器访问应用程序的 SSO cookie 一样？可能是模拟 Kerberos (TGT?) 甚至直接重用它，即使在客户端没有执行 ActiveDirectory 身份验证？

b) 是否有任何协议/API/框架用于富客户端和 SSO 的其他参与者之间的通信（就像 cookie 一样）？

c) 是否有任何 API/框架可用于通过网络推送类似 kerberos 的 TGT 和会话票证？

d) 是否有演示如何执行富客户端 SSO 的示例实现/教程？

我知道有“填写”代理学习将凭据输入到客户端的应用程序对话中。如果可能的话，我宁愿不使用这样的“帮手”。

另外，如果可能的话，我想尽可能使用 CAS、Shibboleth 和其他开源组件。

感谢您的意见、建议和回答！

米库

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T22:26:08.890

使用 AD 帐户是通用解决方案。Kerberos 无处不在。这是唯一会在登录时要求您提供一次且仅一次的凭据的机制。

这都是可行的，你需要：

1.  一个KDC
2.  正确的 DNS 条目
3.  KDC 帐户
4.  正确的 SPN 条目
5.  配置为与 KDC 对话的客户端计算机
6.  使用 JAAS 和 JGSS 获取服务票证的 Java 应用
7.  GSS-API 与您的 GTK+ 应用程序一起获取服务票证

你自己发现了什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T04:23:39.460

同意 Michael 的观点，即 GSSAPI/Kerberos 是您想要使用的。我要补充一点，Java 存在一个障碍：默认情况下，JGSS 使用自己的 GSSAPI 和 Kerberos 实现，在 JDK 中用 Java 编写，而*不是*平台的库。因此，它不遵守您现有的配置，也不能像其他任何东西一样工作（例如，在 Unix 上，它不尊重 KRB5CCNAME 或您习惯的其他环境变量，无法使用 DNS 定位 KDC，具有不同的支持密码集等）。它也是越野车和有限的；例如，它不能跟随推荐。

在 Unix 平台上，您可以告诉 JGSS 绕过 JDK 代码并通过使用以下命令启动 JVM 来使用外部 GSSAPI 库：

```
-Dsun.security.jgss.native=true -Dsun.security.jgss.lib=/path/to/libgssapi_krb5.so 
```

但是，在 Windows 上没有使用 SSPI 的类似选项。这看起来很有希望：

[http://dblock.github.com/waffle/](http://dblock.github.com/waffle/)

...但我还没有解决这个问题。

# linux - Linux：如何列出有关文件或目录的信息（大小，权限，按类型划分的文件数？）

> ID：12019402
> 
> 赞同：1
> 
> 时间：2012-08-18T14:32:49.937
> 
> 标签：linux, bash, shell, unix

假设我停留在当前目录中，我想列出所有文件的总数，以及大小、权限以及按类型列出的文件数。

这是示例输出：

这是一个示例：

打印有关“/home/user/poker”的信息

文件总数：83

pdf文件：5

.html 文件：9

文本文件：15

未知：5

注意：任何没有扩展名的文件都可以被认为是未知的。

我希望使用一些简单的命令，如 ls、cut、sort、unique，（只是示例）将每个不同的扩展名放在文件中并使用 wc -l 来计算行数

还是我需要使用 grep、awk 或其他什么？

希望得到大家的意见。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T17:12:07.077

### 最好的方法是使用`file`仅输出 mimetype 并将其传递给`awk`.

```
file * -ib | awk -F'[;/.]' '{print $(NF-1)}' | sort -n | uniq -c 
```

在我的主目录上，它会产生这个输出。

```
 35 directory
  3 html
  1 jpeg
  1 octet-stream
  1 pdf
 32 plain
  5 png
  1 spreadsheet
  7 symlink
  1 text
  1 x-c++
  3 x-empty
  1 xml
  2 x-ms-asf
  4 x-shellscript
  1 x-shockwave-flash 
```

### 如果您认为`text/x-c++`并且`text/plain`应该相同，请使用此

```
 file * -ib | awk -F'[;/.]' '{print $1}' | sort -n | uniq -c

  6 application
  6 image
 45 inode
 40 text
  2 video 
```

`{print $1}`根据需要更改零件以获得适当的输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T16:54:00.593

`find . -type f | xargs -n1 basename | fgrep . | sed 's/.*\.//' | sort | uniq -c | sort -n`

这为您提供了文件扩展名的递归列表。如果您只想要当前目录`-maxdepth 1`，请在 find 命令中添加一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T14:39:33.230

你需要[bash](http://tldp.org/LDP/abs/html/arrays.html)。

```
files=(*)
pdfs=(*.pdf)

echo "${#files[@]}"
echo "${#pdfs[@]}"
echo "$((${#files[@]}-${#pdfs[@]}))" 
```

# java - IDL to java（Suns idlj）如何编译生成文件？

> ID：12019403
> 
> 赞同：0
> 
> 时间：2012-08-18T14:32:51.100
> 
> 标签：java, compiler-errors, corba, idl

我有一个 .*idl 接口：

```
interface Class1;

interface Class2
{
    typedef sequence<Class1> vector;
    Class2 create();
};

interface Class1
{
    typedef sequence<Class2> vector;
    Class1 create();
}; 
```

我这样编译它：

> idlj -fclient 接口.idl

它给了我**文件**：

```
Class1Helper.java      Class2.java            interface.idl
Class1Holder.java      _Class1Stub.java   Class2Operations.java
Class1.java            Class2Helper.java  
Class1Operations.java  Class2Holder.java  _Class2Stub.java 
```

和**目录**：

> Class1Package Class2Package

在 Class1Package 我有 :`vectorHelper.java vectorHolder.java`在 Class2Package 我有: `vectorHelper.java vectorHolder.java`。当我`cd`编辑 Class1Package 并尝试编译 java 文件（使用 `javac *.java）时出现错误：

> vectorHelper.java:3: '.' 预期进口 Class2；^ vectorHelper.java:3: ';' 预期进口 Class2；^ vectorHelper.java:4：类、接口或枚举预期导入 Class2Helper；^ vectorHolder.java:3: '.' 预期进口 Class2；^ vectorHolder.java:3: ';' 预期进口 Class2；^ 5 个错误 Class1Package$ javac *.java vectorHelper.java:3: '.' 预期进口 Class2；^ vectorHelper.java:3: ';' 预期进口 Class2；^ vectorHelper.java:4：类、接口或枚举预期导入 Class2Helper；^ vectorHolder.java:3: '.' 预期进口 Class2；^ vectorHolder.java:3: ';' 预期进口 Class2；^ 5 个错误

怎么了？

我的整个项目：[http ://www41.zippyshare.com/v/32339153/file.html](http://www41.zippyshare.com/v/32339153/file.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:37:33.190

[这里](https://stackoverflow.com/questions/283816/how-to-access-java-classes-in-the-default-package)解释了错误的原因（查看接受的答案），基本上从 java 4 开始，您不能再从命名包中引用未命名包（又名默认包）中的类（使用 import 语句）。

修改您的 IDL 编译器以拥有一个模块，您是否有理由在模块中没有您的接口？

# c++ - AdjustTokenPrivileges 可以提升管理员权限吗？

> ID：12019410
> 
> 赞同：1
> 
> 时间：2012-08-18T14:33:41.047
> 
> 标签：c++, windows, visual-studio-2010, visual-c++, mfc

windows下需要管理员权限的程序启动时必须得到用户的权限。他们也可以通过右键单击EXE并选择“以管理员身份运行”来以管理员权限运行。但是，在 EXE 启动之前，会出现一个消息框。真的很恶心。

现在我希望我的应用程序以管理员身份运行，并且我不希望用户单击 EXE 文件时弹出消息框。

现在我想知道 AdjustTokenPrivileges 函数是否可以帮助我实现这一点。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-18T14:43:16.327

你对权利和特权感到困惑。至少从 Windows API 的角度来看，两者是完全不同的（尽管它们在很多时候被视为同义词，至少在处理“你可以在 Windows 上做什么”时）。

您真正需要的是提升*权利*的能力。如果系统的安全模型存在一些缺陷，您应该无法做到这一点。要获得管理权限，其目的是代码必须在管理帐户下运行——或者由用户最初以管理员身份登录，或者由他们在运行时输入凭据，如您所见。

特权（`AdjustTokenPrivileges`实际上是操纵的）是您*有权做的事情，但在没有专门**启用*该特权的情况下仍然不允许做这些事情。例如，假设您开始以管理员身份登录。这给了你调整系统时钟的*权利*——但是调整系统时钟是普通程序几乎没有理由做的事情，所以他们在你做之前增加了一个额外的步骤——你需要先启用`SE_SYSTEMTIME`权限您可以使用该权利。

如果您使用*无权*更改系统时间的帐户登录，则根本无法更改。如果您登录的帐户*可以*更改它，则必须先启用该权限才能执行此操作。

底线：`AdjustTokenPrivileges`不会完成你想做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T14:55:15.360

实际上有一种方法，它允许您通过调用`LogonUser`API 函数来更改线程的安全凭证。它将句柄返回到可以在`ImpersonateLoggedOnUser`和`CreateProcessAsUser`调用中使用的令牌。这种技术被称为非人格化。

但是，我认为您正在尝试实现不同的目标-在没有 UAC 用户通知的情况下运行具有提升的管理权限的进程。您可以在 msconfig 实用程序中完全禁用 UAC，这是一个非常糟糕的解决方案，或者让您的程序保持原样，因为坦率地说，用户有权知道您的程序何时以超级用户权限运行，并禁用它通知应该是他的决定。

# ios5 - 在应用内购买期间更新 hud ivar 时出现问题

> ID：12019413
> 
> 赞同：0
> 
> 时间：2012-08-18T14:34:17.983
> 
> 标签：ios5, in-app-purchase, mbprogresshud

我最近在我的应用中设置了应用内购买机制。在购买过程中，我想根据两种事件更新一个 hud（我正在使用[mbprogresshud ）：我开始购买并收到购买验证。](https://github.com/jdg/MBProgressHUD)我面临的问题是，购买完成后，hud 永远不会更新为我想要的（自定义视图）：

1.  当我点击购买按钮时：

> ```
> -(IBAction)buyButtonTapped:(id)sender {
> 
>   self.hud = [[SCLProgressHUD alloc] initWithView:self.view];
>     [self.view addSubview:self.hud];
> 
>     self.hud.labelText = @"Connecting...";
>     self.hud.minSize = CGSizeMake(100 , 100);
>     [self.hud show:YES];
>   ...
> } 
> ```

1.  当我收到购买成功的通知时：

> ```
>  -(void)productPurchased:(NSNotification *)notification {     
> self.hud.customView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"checkmark_icon.png"]];     
> self.hud.mode = SCLProgressHUDModeCustomView;
> self.hud.labelText = @"Thanks for your purchase!";        
> ... 
> } 
> ```

在最后一个方法中设置 self.hud.customView 属性会触发一个 [self setNeedsLayout]; 和 hud 类中的 [self setNeedsDisplay] 但我仍然没有观察到任何变化。

关于我在这里做错了什么的任何可能的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T21:16:04.610

如**`mbprogress hud`**自述文件中所述，在主线程上执行任务时更新 UI 需要稍微延迟才能生效。在我的情况下发生的情况是，hud 是弹出框控制器的强大属性，我立即将其关闭，因此我没有机会看到更新发生。我现在在完成块中关闭控制器：

> -(void)showAnimated:(BOOL)animated whileExecutingBlock:(dispatch_block_t)block completionBlock:(void (^)())completion

我的代码片段看起来像这样的解雇：

```
[_hud showAnimated:YES whileExecutingBlock:^(void){
                                          [self.successPurchaseSoundEffect play];
                                          _hud.customView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"checkmark_icon.png"]];
                                          _hud.mode = SCLProgressHUDModeCustomView;
                                          _hud.labelText = @"Thanks!";

                                          // We need to pause the background thread to let the music play and the hud be updated
                                          sleep(1);}
                          completionBlock:^(void){
                                          [self.delegate dismissPurchaseInfoController:self];
}]; 
```

# c++ - 在 Windows 平台上为 c/c++ 代码生成调用图的工具？

> ID：12019419
> 
> 赞同：1
> 
> 时间：2012-08-18T14:35:20.800
> 
> 标签：c++, c, windows, call-graph

> **可能重复：**
> [获取代码图形函数调用图的工具](https://stackoverflow.com/questions/517589/tools-to-get-a-pictorial-function-call-graph-of-code)

我有一些 c/c++ 代码。我想知道任何可用于生成调用图的工具，在 Windows 平台上提供有关调用者等的信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T14:37:35.027

Doxygen 可以创建调用图 [http://www.doxygen.nl//manual/diagrams.html](http://www.doxygen.nl//manual/diagrams.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T17:40:52.667

您也可以尝试[CppDepend](http://www.cppdepend.com)，它带有一个具有许多功能和可能性的依赖图，您可以使用 CQLinq 请求您的代码库并查看代码库子集的依赖图。

# model-view-controller - 小花请求安全

> ID：12019420
> 
> 赞同：0
> 
> 时间：2012-08-18T14:35:42.533
> 
> 标签：model-view-controller, kohana

我已经搜索了以前的答案，但似乎找不到确切的答案。

我正在使用 ajax 来调用控制器操作。此控制器操作执行其他一些操作，然后调用我的用户控制器的公共功能：

```
Request::factory("/user/savepoints/".$new_total); 
```

我怎样才能保护我在用户控制器中的 action_savepoints 以防止人们将其作为 URL 输入？

我目前在我的函数顶部有这个，但它没有做我想要的。

```
if( ! $this->request->is_initial() ):
   HTTP::redirect('/error');
endif; 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T21:16:44.583

要么使用 HTTP POST 请求，这不能仅通过输入 URL 来完成。（虽然它可以欺骗，或通过表格完成）

或者：

如何在服务器上生成一种令牌，以某种方式将其传递给 ajax 代码，然后将其传递回 ajax 请求中。

显然，如果他们将令牌从您的页面中拉出，他们仍然可以手动伪造请求，但您首先向他们颁发了令牌。

您可以将令牌设为一次性、有时间限制或特定于用户。确保它包含某种带有服务器机密的校验和，以防止人们构建自己的令牌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T14:16:26.550

您想防止任何未经授权的用户运行脚本，还是想确保脚本只能通过 AJAX 调用运行？

首先，您可以检查用户是否已登录。AJAX 请求使用与普通请求相同的会话。

```
if (Auth::instance()->logged_in()) 
```

其次，您需要检查 HTTP 标头是否是 AJAX 调用。但请注意，这不是一种安全的方法，因为 HTTP 标头可以由客户端更改并且不能被信任。

```
if(!empty($_SERVER['HTTP_X_REQUESTED_WITH']) && 
strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest')
{
    //This is an ajax call
} 
```

不幸的是，除此之外，没有防弹或安全的方法来检测 AJAX 请求。

# ruby-on-rails - 无法使 before_update 过滤器工作

> ID：12019421
> 
> 赞同：0
> 
> 时间：2012-08-18T14:35:44.580
> 
> 标签：ruby-on-rails, devise, before-filter

我需要在更新之前调用方法以检查 PayPal 详细信息是否正确。

我在 User.rb 中添加了这个：

```
 before_update :verify

 private
  def verify
  require 'httpclient'
  require 'xmlsimple'
  clnt = HTTPClient.new
    ....
      if account_status == "VERIFIED" 
        current_user.verified = "verified"
        current_user.save
        flash[:notice] = "Your account is verified"
      else 
        redirect_to :back
        flash[:error] = "Sorry, your account is not verified or you entered wrong credentials"
      end
    else
      redirect_to :back
      flash[:error] = "Your account is not verified or you entered wrong credentials"
    ...
end

end 
```

**编辑：试过这个：**

```
 class RegistrationsController < Devise::RegistrationsController

   before_filter :verify, :only => :update 
     def verify
          ...
     end
    end 
```

但它没有调用。

也许我应该从这里打电话（**但我不知道如何以及在哪里**）：

```
 class RegistrationsController < Devise::RegistrationsController

      def create
 build_resource

 if resource.save
  if resource.active_for_authentication?
    set_flash_message :notice, :signed_up if is_navigational_format?
    sign_in(resource_name, resource)
    respond_with resource, :location => after_sign_up_path_for(resource)
  else
    set_flash_message :notice, :"signed_up_but_#{resource.inactive_message}" if is_navigational_format?
    expire_session_data_after_sign_in!
    respond_with resource, :location => after_inactive_sign_up_path_for(resource)
  end
else
  redirect_to :back
  flash[:error] = "Your email has been already taken!"
 end
    end

      def update
    self.resource = resource_class.to_adapter.get!(send(:"current_#{resource_name}").to_key)

     params[:user].delete(:password) if params[:user][:password].blank?
     params[:user].delete(:password_confirmation) if params[:user][:password_confirmation].blank?

    if resource.update_attributes(params[resource_name]) 
      set_flash_message :notice, :updated if is_navigational_format?
      sign_in resource_name, resource, :bypass => true
      respond_with resource, :location => after_update_path_for(resource)
 else
       clean_up_passwords(resource)
      respond_with_navigational(resource){ render_with_scope :edit }
    end
  end 
```

有人能注意到代码中的一些错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T15:11:33.920

这里是正确答案：

```
class RegistrationsController < Devise::RegistrationsController

  before_filter :verify, :only => :update 
  def verify
    ...
  end
end 
```

谢谢你帮助我

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T15:05:40.487

在 User.rb 中，使用`before_save`宏而不是 before_update，因为 before_update 不存在

在您的 User 模型中，另一件事`flash`是无法访问的，因为它仅在控制器中注入。你大喊抛出验证错误，或者

```
class User < ActiveRecord::Base

    before_save :verify

    private
    def verify(record)

      #... do checking ... and on error
      record.errors ... #is accesable, set your error here if you want to read it in controller 
       # rise here   error if you want
    end

end 
```

有关 activerecord 回调的更多信息

[http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html](http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html)

# jquery - 无效的正则表达式：缺少 /

> ID：12019423
> 
> 赞同：0
> 
> 时间：2012-08-18T14:36:09.463
> 
> 标签：jquery, playframework, playframework-1.x

这是引发错误的一段代码：

```
 <div align="right">
            <input class="btn btn-primary" type="button"
                value="Confirm and Process Payroll"
                onclick="@{Payroll.confirmAttendance()}">
        </div> 
```

编译后看起来像

```
<div align="right">
    <input class="btn btn-primary" type="button"
    value="Confirm and Process Payroll"
    onclick="/confirm">
</div> 
```

似乎无法找出导致该错误的原因。我也使用 twitter 引导程序。会不会有冲突？这段代码位于 jQuery 手风琴中。

编辑：但是，如果我将输入标签更改为锚标签，它工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T14:45:07.010

`onclick="/some-url"`对于安装的 JavaScript 没有任何意义，您应该在那里调用一些 JavaScript 方法，即：`onclick="processConfirmation()"`.

当然，您需要创建并包含该方法。

```
<script>
    function processConfirmation(){
        // perform the action you want to here...
    }
</script> 
```

更重要的是，如果你使用 jQuery，你还可以使用它的选择器和事件来触发 JS 动作：

```
<input id="process-btn" class="btn btn-primary" type="button"
    value="Confirm and Process Payroll" />

<script>
    $("#process-btn").click(function(){
        // perform an action on every click on element with id="process-btn"
    });
</script> 
```

# jquery - Jquery SlideToggle 下拉菜单在 IE 中不起作用

> ID：12019426
> 
> 赞同：0
> 
> 时间：2012-08-18T14:36:45.087
> 
> 标签：jquery, drop-down-menu, slidetoggle

我制作了一个基于 WordPress 的网站，并使用 jQuery 的`SlideToggle`功能构建了一个下拉菜单。这在 Firefox 中运行良好，但在 IE 中却不行，我完全不知道为什么。我试图删除一些`position: absolute`，因为似乎存在问题，但没有成功。

[我在这里](http://www.jando.nl/testversie)上传了一个测试版

我完全坚持这一点，所以任何帮助将不胜感激。

jQuery（扩展类的变化是把加号图标改成减号图标：）

```
$('#menu-item-88').click(function () {
   $(this).find('ul.sub-menu').slideToggle();
});

$('#menu-item-89').click(function (event) {
   $(this).find('ul.sub-menu').slideToggle();
   event.stopPropagation();

   if ($(this).hasClass('menu-item-89')){
      $(this).addClass('expanded').removeClass('menu-item-89');
   } else {
      $(this).addClass('menu-item-89').removeClass('expanded');
   }

});

$('#menu-item-90').click(function (event) {
   $(this).find('ul.sub-menu').slideToggle();

   event.stopPropagation();

   if ($(this).hasClass('menu-item-90')) {
      $(this).addClass('expanded').removeClass('menu-item-90');
   } else {
      $(this).addClass('menu-item-90').removeClass('expanded');
   }

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T15:39:14.320

The problem is here:

```
#header {
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=#ccf9f8fa, endColorstr=#ccf9f8fa)
} 
```

it prevents visibility of the overflowed content. It seems that you have to delete it.

# android - Android ADK - 在游戏手柄上工作

> ID：12019427
> 
> 赞同：6
> 
> 时间：2012-08-18T14:36:48.147
> 
> 标签：android, keyboard, usb, arduino, adk

我正在研究一个新想法，代码进展顺利，但我遇到了一些问题，需要你的帮助。

我最近以可笑的价格买了一个破旧的游戏站（我不知道确切的英文单词），而且由于它非常破旧，我想用 Android 操作系统替换它（我有看到许多 Android USB 记忆棒或[Raspberry Pi](http://en.wikipedia.org/wiki/Raspberry_Pi)）和 TFT 屏幕。

![在此处输入图像描述](../Images/954d4ab55f6b8819c8fad10c9e8c58a2.png)

Arduino 和按钮接线工作正常，按下按钮时可以读取输出。

![在此处输入图像描述](../Images/cc9d97304df7f10a1d790dbdd0e5d50c.png)

所以，我的下一步将是购买一个类似于这个的 USB 主机屏蔽：[http](http://www.circuitsathome.com/products-page/arduino-shields/usb-host-shield-2-0-for-arduino) ://www.circuitsathome.com/products-page/arduino-shields/usb-host-shield-2-0-for-arduino 。

但现在，我真的很想知道如何告诉 Android 这个未来的设备将像键盘一样工作。

我需要将一些按钮绑定到`up`///`down`箭头...`left``right`

我还想将一些按钮绑定到“home”或“back”。

那么，实现这一目标的做法是什么？

我需要创建自定义键盘吗？

我只能在*[USB Accessory](http://developer.android.com/guide/topics/connectivity/usb/accessory.html)*中找到，但没有太多信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T07:02:31.567

经过一夜的搜索，将回答自己，问答风格！

我发现的唯一解决方案是将我的 Arduino 变成 USB 键盘，这看起来相当简单：[http ://hunt.net.nz/users/darran/weblog/b3029/](http://hunt.net.nz/users/darran/weblog/b3029/)

您必须刷新一个替代固件，将您的 arduuino 变成 USB 键盘。

hex 文件到链接上的 flash 和演示项目。

这意味着我可以通过 USB 以编程方式将击键发送到 Android。

我面临的唯一问题是我需要自己写的debounche，看起来很复杂。

# java - 从 AJAX 获取 GateIn 3.3/Jboss AS 7 上的当前用户

> ID：12019428
> 
> 赞同：1
> 
> 时间：2012-08-18T14:37:05.553
> 
> 标签：java, servlets, jboss, jboss7.x, gatein

我想从 AJAX 查询中获取当前用户。为此，我必须使用代码：

```
String user = request.getRemoteUser(); 
```

但我对经过身份验证的门户用户有空值。

我用谷歌搜索了很多，发现这篇文章：[https](https://community.jboss.org/wiki/GWTGadgetAccessingPortalServices/version/2) ://community.jboss.org/wiki/GWTGadgetAccessingPortalServices/version/2 ，作者描述了如何解决这个问题。但是这篇文章包含了关于为 jboss6.x 启用 SSO 的信息，这里是：

> 取消注释验证器阀门上的单点登录：对于位于 server/default/deploy/jbossweb.sar/server.xml 中的 JBoss

[GateIn 官方文档](http://docs.jboss.com/gatein/portal/3.4.0.M01/reference-guide/en-US/html_single/index.html#chap-Reference_Guide-SSO_Single_Sign_On)还描述了 JBoss 6.x 和更早版本的 SSO。

我如何在 JBoss AS 7 中做同样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T19:58:32.940

我通过添加`<sso reauthenticate="false"/>`到子系统配置启用了 SSO：

```
 <subsystem xmlns="urn:jboss:domain:web:1.1" native="false" default-virtual-server="default-host">
        <connector name="http" protocol="HTTP/1.1" scheme="http" socket-binding="http"/>
        <virtual-server name="default-host" enable-welcome-root="true">
            <alias name="localhost"/>
            <alias name="example.com"/>
            <sso reauthenticate="false"/>
        </virtual-server>
    </subsystem> 
```

获取当前用户现在正在为我工​​作。

# java - 为什么对于大多数基于散列的结构，除了像 ThreadLocal 之类的结构，Java 的语言设计者更喜欢链接而不是开放寻址？

> ID：12019434
> 
> 赞同：27
> 
> 时间：2012-08-18T14:37:45.340
> 
> 标签：java, hash, thread-local

我知道解决哈希冲突的开放寻址和链接之间的区别。大多数基于哈希的基本数据结构`HashSet`，`HashMap`在 Java 中主要使用链接技术。我读到 ThreadLocal 实际上使用了探测方案。所以我想了解为什么在 Java 中没有那么多使用开放寻址？我的意思是很难使用该方案删除记录，因为您必须使用一些特殊处理来标记这些单元格。然而，开放寻址方案的内存要求似乎很低。

*编辑*：我只是想了解这个设计决策的可能主要原因/原因。我不想要更精细的细节。另外我想知道为什么 ThreadLocal 使用不太常见的开放寻址技术。我想这两个答案可以联系在一起。所以我更喜欢问同一个问题本身。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-18T16:00:03.577

我目前正在与 Doug Lea 等人讨论内存紧凑的重新`HashMap`实现`HashSet`。这个特殊的问题还没有出现，但这是我对这个问题的第一个想法......

*   链式哈希表可以合理地优雅地降级。无论是更高的负载因子还是大量的哈希冲突，链接都不会像开放寻址那样迅速退化。
*   正如您所说，`remove`在开放地址表上不是......不是一个愉快的操作。作为一般规则，`remove`它是哈希表上最不常见的操作，但有些*应用*程序更常见，并且会注意到性能不佳。
*   我还怀疑——尽管我没有太多数据——实现一个“链接”的开放地址哈希表会明显更加困难。 `LinkedHashMap`写成 的子类`HashMap`，并借用了大部分实现细节；当条目是离散对象时，实现条目的链接列表会更容易一些——此时，您已经完成了链式实现的大部分工作。
*   规范中没有任何东西将它们与这个实现联系起来——它们以后总是可以随意摆弄它。
*   JDK 集合库...不要将内存消耗作为特别高的优先级。内存很便宜。（你可能同意也可能不同意，但这绝对是一个明显的趋势。）

# objective-c - 如何将相机和相机胶卷添加到我的 IOS 应用程序？

> ID：12019439
> 
> 赞同：-1
> 
> 时间：2012-08-18T14:38:42.000
> 
> 标签：objective-c, ios, xcode, xcode4

我正在尝试制作一个应用程序，当我按下按钮时，相机会出现，我可以像虚线一样，我需要让每个人都把眼睛放在那里。或者，如果他们已经有照片，可以选择它。我想在一个视图上有按钮，然后当他们拍照时，它将成为另一个视图的背景

我正在为 iphone 应用程序执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T16:54:05.573

您将要查看[UIImagePickerController](http://developer.apple.com/library/ios/documentation/uikit/reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html)`overlay` ，并且可以使用 pickers属性添加“虚线” 。

此外，这里有一个关于如何完成此任务的非常好的教程的链接。 [http://www.icodeblog.com/2009/07/28/getting-images-from-the-iphone-photo-library-or-camera-using-uiimagepickercontroller/](http://www.icodeblog.com/2009/07/28/getting-images-from-the-iphone-photo-library-or-camera-using-uiimagepickercontroller/)

# javascript - JavaScript div 扩展

> ID：12019442
> 
> 赞同：0
> 
> 时间：2012-08-18T14:39:24.777
> 
> 标签：javascript, css, html

我希望有人可以帮助我。单击我的**HTML 文本框**时，我希望Div最好仅使用 JavaScript**来扩展长度。**我附上了一张图片以更深入地展示。再说一次，如果有人能帮助我——我会很高兴的。

[![](../Images/afc2fc7059c9049980b791ff526c2947.png)](https://i.stack.imgur.com/lEBwq.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T14:55:37.403

这样的东西就足够了，HTML：

```
<input type = "text" style = "width: 500px;" onfocus = "expand();" onblur = "collapse();">
<div id = "yourdiv"></div> 
```

CSS：

```
#yourdiv {
    margin-top: 0px;
    background-color: rgb(0, 162, 232);
    width: 500px;
    height: 0px;
} 
```

JavaScript：

```
var t;
function expand() {
    var dv = document.getElementById("yourdiv");
    var duration = 500; //number of milliseconds for animation; 1000ms = 1s.
    var stepDur = Math.floor(duration / 200); //200px is our goal height here
    var curHeight = parseInt(dv.style.height.substr(0, dv.style.height.length - 2), 10); //current height of dv
    if(isNaN(curHeight)) {
     curHeight = 0;
    }
    clearTimeout(t); //make sure no other animation is happening
    function doAnim() {
        if(curHeight >= 200) {
             //we're done!
             return;
        }
        curHeight ++;
        dv.style.height = curHeight + "px";
        t = setTimeout(doAnim, stepDur);
    }
    doAnim();
}
function collapse() {
    var dv = document.getElementById("yourdiv");
    var duration = 500; //number of milliseconds for animation; 1000ms = 1s.
    var stepDur = Math.floor(duration / 200);
    var curHeight = parseInt(dv.style.height.substr(0, dv.style.height.length - 2), 10); //current height of dv
    clearTimeout(t); //make sure no other animation is happening
    function doAnim() {
        if(curHeight <= 0) {
             //we're done!
             return;
        }
        curHeight --;
        dv.style.height = curHeight + "px";
        t = setTimeout(doAnim, stepDur);
    }
    doAnim();
} 
```

演示：[小链接](http://goo.gl/VHHPD)。

我希望这有帮助！

# asp.net - Mono WebForms：设置默认页面以在开始调试时运行

> ID：12019445
> 
> 赞同：4
> 
> 时间：2012-08-18T14:39:42.077
> 
> 标签：asp.net, mono, webforms, xsp

开始调试时是否可以设置默认页面运行？在 Visual Studio 中，您可以通过解决方案资源管理器中的上下文菜单或在项目属性中设置默认页面。我在 MonoDevelop 中没有找到类似的东西。当我开始调试时，浏览器将始终导航到应用程序的根目录。

```
http://localhost:8080 
```

因为在 XSP 中没有为此应用程序设置默认页面，所以我收到一个错误，并且总是必须手动更正它。

```
http://localhost:8080/home.aspx 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-19T11:42:53.440

我找到了解决方案。我没有找到 xsp.exe.config，但是当您在 machine.config 中全局添加设置（位于 /etc/mono/[version] 中）或通过在应用程序根目录中创建 web.config 文件时，它也可以工作。这些值以逗号分隔。

```
<appSettings>
    <add key="MonoServerDefaultIndexFiles" value="Home.aspx, home.aspx" />
</appSettings> 
```

帮助页面[http://www.mono-project.com/Config](http://www.mono-project.com/Config)并没有告诉你 appSettings 部分是允许的，但我认为文档不完整。例如，这里也使用了 appSettings [http://www.mono-project.com/ASP.NET_Settings_Mapping#Inhibiting_the_settings_mapping](http://www.mono-project.com/ASP.NET_Settings_Mapping#Inhibiting_the_settings_mapping)。

# c - linux下使用read()混淆getchar

> ID：12019447
> 
> 赞同：0
> 
> 时间：2012-08-18T14:39:53.123
> 
> 标签：c, pointers, kernighan-and-ritchie

1.  为什么我们写 *bufp = buf 因为两者都是数组所以在我看来它应该是：

    ```
    static char bufp = buf; 
    ```

2.  *bufp 如何“知道”从哪个位置开始显示？它不会以任何方式初始化为零。分配`buf`给后，`bufp`我希望在返回行中它以最后输入的字符开头。

3.  此处使用 unsigned char 修饰符是否只是为了省略作为输入的情况-在大多数系统上`-1`意味着？`EOF`

```
#include "syscalls.h"
/* getchar: simple buffered version */
int getchar(void)
{
    static char buf[BUFSIZ];
    static char *bufp = buf; /* [1] */
    static int n = 0;
    if (n == 0) {            /* buffer is empty */
        n = read(0, buf, sizeof buf);
        bufp = buf;          /* ? [1] here it is written like in my question so which is true ? */
    }
    return (--n >= 0) ? (unsigned char) *bufp++ : EOF; /* [2] & [3] */
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T15:28:09.627

`buf`是一个数组，所以它不是 char 类型，而是 char * 类型。

`char *bufp`声明 bufp 也是 type `char *`。通常，以下两种方法是相似的：

```
char *bufp = buf;   // Declare and assign in a single line

char *bufp;   // Declare
bufp = buf;   // Then assign 
```

由于`static`修饰符，在您的示例中只有第一个选项是可能的。

`bufp`是一个与 具有相同值的指针`buf`，即`buf`是 中第一个元素的地址`buf[BUFSIZ]`。`bufp`也指向这个地址。所以`bufp`“知道”“buf”知道的一切。你甚至可以使用类似的东西`bufp[n]`，只要`n`不是超出范围。

总之， buf[BUFSIZ] 是一个数组，其地址为`buf`、 或`&buf[0]`、 或`bufp`或`&bufp[0]`。

EOF 不一定在所有系统中都相同，因此最后一行确保事情是一致的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T16:06:22.913

[1]`char bufp = buf`是不正确的，因为 buf 是一个 char 数组（并且在内部是一个地址，即指针的内容），并且`char bufp`会声明一个唯一字符。`char *bufp`相反，它是一个指向 char 的指针（指向第一个 char，但您也可以访问下一个 char）。

[2]`bufp`指向`buf`数组的开头，即它的第一个字符。并`n`设置为`0`。`bufp`,`buf`并且`n`都是静态的，这意味着它们在函数返回后“存活”——它们的每个值在程序加载时都被初始化，然后每次调用函数时都不再执行初始化。因此他们“记住”了缓冲区的状态：

```
`n` is the number of characters in the buffer, ready to be returned one by one,

`bufp` points to the next character to be returned (when n > 0),

and `buf` the array just holds the characters in the buffer. 
```

因此，要回答您的 [2] 问题，

*   当没有可用的字符（n == 0）时，调用`read`填充缓冲区`buf`并`bufp`指向该数组的开头。
*   那么只要缓冲区中的字符还没有被一个一个地全部返回（n > 0），`*bufp`就是下一个要返回的字符；`*bufp++`给出要返回的字符并将`bufp`指针加一。

[3]`unsigned`修饰符阻止编译器将`*bufp`字符（8 位）符号传播到`int`其他字节（通常是 32 位，即 24 个最高有效位），因为`int`返回的是 an。因此，任何代码大于 127 的字符（对于无符号字符，或对于有符号字符为负数）都将按原样返回（例如 (unsigned char)200 作为 (int)200 返回）。

# ios - 我的 iOS 应用程序在启动画面后出现黑屏，但它显示状态栏。iOS SDK 5.1

> ID：12019449
> 
> 赞同：0
> 
> 时间：2012-08-18T14:40:09.187
> 
> 标签：ios, screen, xcode4.3

我正在使用 Tab Bar View App，并且正在使用情节提要，我的 Xcode 版本是 4.3.3。基本上我的应用程序过去加载正常，但后来我添加了第三个视图和第三个视图控制器，它无法正确加载，所以我删除了它们，现在它无法正确加载：/它加载了启动屏幕，但它没有再往前走。

这是我的 AppDelegate.h

```
//
//  AppDelegate.h
//  Work App for Dad
//
//  Created by Alfie Hopkin on 17/06/2012.
//  Copyright (c) 2012 __MyCompanyName__. All rights reserved.
//

#import <UIKit/UIKit.h>

@interface AppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) UIWindow *window;
@property (strong, nonatomic) UIViewController *FirstViewController;

@end 
```

还有我的 AppDelegate.m

```
//
//  AppDelegate.m
//  Work App for Dad
//
//  Created by Alfie Hopkin on 17/06/2012.
//  Copyright (c) 2012 __MyCompanyName__. All rights reserved.
//

#import "AppDelegate.h"

@implementation AppDelegate

@synthesize window = _window;
@synthesize FirstViewController;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Override point for customization after application launch.
    return YES;
}

- (void)applicationDidFinishLaunching:(UIApplication *)application {    

    // Override point for customization after app launch    
    [_window addSubview:FirstViewController.view];
    [_window makeKeyAndVisible];
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T14:56:44.693

您是否忘记在情节提要的身份检查器中为视图控制器设置自定义类？

# bash - 如何使用 awk 或 bash 将输出保存到文件夹？

> ID：12019450
> 
> 赞同：2
> 
> 时间：2012-08-18T14:40:09.280
> 
> 标签：bash, awk

这是我上一个问题的延续，[使用 awk 或 bash 减去两列的值](https://stackoverflow.com/questions/12005080/subtract-the-values-of-two-columns-using-awk-or-bash)。我有 200 个文件。我想将每个文件的输出保存到一个文件夹中。这个文件夹中的文件名应该是父文件的名称。如何使用 Awk 或 Bash 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T15:19:57.470

简单`for`的循环将完成这项工作：

```
for i in *; do mkdir "$i"_dir; awk -f your_awk_script.awk "$i" > "$i"_dir/out 
```

说明：这里这个命令使用`for`，它遍历当前目录中的所有文件，然后它使用命令创建一个名称基于`i`-th 文件名的目录`mkdir`。

# ruby-on-rails - 尝试执行 rake 时 gemspec 无效

> ID：12019452
> 
> 赞同：1
> 
> 时间：2012-08-18T14:40:27.193
> 
> 标签：ruby-on-rails, ruby, rubygems, snort

执行命令后：

```
 sudo bundle exec rake snorby:setup 
```

我得到错误：

```
 Invalid .gemspec format in '/var/lib/gems/1.8/specifications/dm-active_model-1.2.1.gemspec
WARNING:  #<ArgumentError: Illformed requirement ["#<YAML::Syck::DefaultKey:0x7f8cb7e8a1c0> 1.2.3"]> 
```

我对 ruby​​ 很陌生，只是想安装一个程序。有人对此有任何想法吗？

```
greenlantern@greenlantern:~/snorby/snorby$ ruby -v
ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-linux] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T17:18:40.940

根据所说，我假设您使用 rvm、rbenv 或类似的，当您使用`sudo`. 所以在 sudo 中，你会得到 ruby​​ 1.8。你为什么要使用 sudo 呢？尝试只运行`bundle exec rake snorby:setup`，不使用 sudo。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T16:23:54.620

你用的是什么版本的红宝石？Snorby 仅支持 ruby​​ >= 1.9.2。希望这可以帮助。

# hibernate - setFetchMode 和 setResultTransformer 的用途

> ID：12019453
> 
> 赞同：0
> 
> 时间：2012-08-18T14:40:51.200
> 
> 标签：hibernate, hibernate-criteria

对不起这个基本问题。`setFetchMode`hinernate的目的是什么？

我看到了加入、懒惰和渴望等类型。和join有关系吗？如果有人可以提供任何也可以的链接或pdf。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-13T15:02:39.943

`setResultTransformer`有助于转换结果集。

例如：

打电话

```
setResultTransformer(Criteria.ALIAS_TO_ENTITY_MAP).list() 
```

将返回地图列表。这有助于通过列别名循环遍历结果集。

伪代码：

```
Query searchQuery = sessionFactory.currentSession.createQuery(strQuery.toString()).setResultTransformer(Criteria.ALIAS_TO_ENTITY_MAP)
List searchList = query.list()
query.setParameter("location", params.location)

Map<String,Object> map= new HashMap<String,Object>();
for (Object object : searchList )
{
  map= (Map<String,Object>)object;
  System.out.println(map.get(“location”));
} 
```

# java - Java 无法比较的数据类型 char 和 String

> ID：12019454
> 
> 赞同：6
> 
> 时间：2012-08-18T14:41:00.033
> 
> 标签：java

当我运行 Javac 时，它告诉我在

```
while(responseChar == "y") 
```

不确定要更改什么来修复此错误

```
import java.util.Scanner;
public class UseOrder
{
public static void main(String[] args)
{

    int answer, num, q;
    String name, response;
    double p;
    char responseChar;
    Scanner keyboard = new Scanner(System.in);

    Order order1 = new Order();
    order1.setCustomerName();
    order1.setCustomerNum();
    order1.setQuantity();
    order1.setUnitPrice();
    order1.computePrice();
    order1.displayInfo();

    keyboard.nextLine(); 
    System.out.println("Do you need the shipping and handling service?");
    System.out.println("Enter y or n :");
    response = keyboard.nextLine();
    responseChar = response.charAt(0);
    while(responseChar == "y")
    {
        ShippedOrder order2 = new ShippedOrder();
        order2.getCustomerName();
        order2.getCustomerNum();
        order2.getQuantity();
        order2.getUnitPrice();
        order2.computePrice();
        order2.displayInfo();
    }
}
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-18T14:43:09.300

要定义字符文字，请使用单引号：`'`. 双引号定义字符串文字。

```
while(responseChar == 'y') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-18T14:46:01.340

或者，您可以使用大 C`Character`类将您的转换`char`为`String`：

```
String converted = Character.toString(responseChar); 
while(converted.equalsIgnoreCase("y"))
{
  // ...
} 
```

但这个版本比 Jeffrey 建议的字面比较详细得多

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T14:44:09.800

而不是`"y"`这样做`'y'`。 `""`表示字符串。

# r - rbind 错误：“名称与以前的名称不匹配”

> ID：12019461
> 
> 赞同：69
> 
> 时间：2012-08-18T14:41:46.190
> 
> 标签：r, sp

作为一个更大问题的一部分（为多边形 ID 相同的情况添加一个`,makeUniqueIDs`参数`rbind.SpatialPolygonsDataFrame`），我遇到了来自 rbind 的这条奇怪消息：

```
> do.call("rbind",xd.small)
Error in match.names(clabs, names(xi)) : 
  names do not match previous names 
```

*   [xd.小`dput`输出](https://gist.github.com/3387091)

我能找到的唯一其他信息是[这个问题](https://stackoverflow.com/questions/2504543/merge-multiple-data-frames-error-in-match-namesclabs-namesxi-names-do-n)，这让我相信这`rbind`也是问题的根源。

当然，我可以编写自己的类似 rbind 的函数，但大概这种`match.names`检查是有原因的，我很好奇它是什么。

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-08-18T14:49:04.710

第一个数据框的名称（列名）与第二个数据框的名称不匹配。正如错误消息所说。

```
> identical(names(xd.small[[1]]), names(xd.small[[2]]) )
[1] FALSE 
```

如果您不关心第二个 df 的第 3 列或第 4 列的名称，则可以强制它们相同：

```
> names(xd.small[[1]]) <- names(xd.small[[2]]) 
> identical(names(xd.small[[1]]), names(xd.small[[2]]) )
[1] TRUE 
```

那么事情就应该愉快地进行了。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2014-01-16T10:51:01.153

很容易使用该`unname()`功能：

```
data.frame <- unname(data.frame) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-06-21T08:26:56.570

`rbind()`需要两个对象名称相同。例如，第一个对象名称：`ID Age`，下一个对象名称：`ID Gender`，如果要使用`rbind()`，会打印出：

> 名称与以前的名称不匹配

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-08-03T15:06:34.160

使用代码如下：

```
mylist <- lapply(pressure, function(i)read.xlsx(i,colNames = FALSE))#
mydata <- do.call('rbind',mylist)# 
```

# android - 我的登录android的异步任务

> ID：12019462
> 
> 赞同：0
> 
> 时间：2012-08-18T14:42:01.530
> 
> 标签：android, multithreading, android-asynctask

在我将登录代码实现到异步任务 doInBackground 方法后，我的应用程序崩溃了。我需要这个帮助，因为如果我不为登录实现异步任务，我在真实设备中的应用程序将由于策略问题而崩溃。我能知道我的错误在哪里吗？

下面是我的 doInBackground 任务：

```
// Checking login in background
    protected String doInBackground(String... params) {
        String email = inputEmail.getText().toString();
        String password = inputPassword.getText().toString();
        UserFunctions userFunction = new UserFunctions();
        JSONObject json = userFunction.loginUser(email, password);

        // check for login response
        try {
            if (json.getString(KEY_SUCCESS) != null) {
                loginErrorMsg.setText("");
                String res = json.getString(KEY_SUCCESS);
                if (Integer.parseInt(res) == 1) {
                    // user successfully logged in
                    // Store user details in SQLite Database
                    DatabaseHandler db = new DatabaseHandler(getApplicationContext());
                    JSONObject json_user = json.getJSONObject("user");

                    // Clear all previous data in database
                    userFunction.logoutUser(getApplicationContext());
                    db.addUser(json_user.getString(KEY_NAME), json_user.getString(KEY_EMAIL), json.getString(KEY_UID), json_user.getString(KEY_CREATED_AT));

                    // Launch HomePage Screen
                    Intent homepage = new Intent(getApplicationContext(), HomepageActivity.class);

                    // Close all views before launching HomePage
                    homepage.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    startActivity(homepage);

                    // Close Login Screen
                    finish();
                } else {
                    // Error in login
                    loginErrorMsg.setText("Incorrect username/password");
                }
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }
        return null;
    } 
```

这是我的日志：

```
08-18 22:34:59.088: E/JSON(382): {"tag":"login","success":1,"error":0,"uid":"502cfeb2e60004.54904838","user":{"name":"user1","email":"user1@gmail.com","created_at":"2012-08-16 22:07:46","updated_at":null}}
08-18 22:34:59.137: E/AndroidRuntime(382): FATAL EXCEPTION: AsyncTask #1
08-18 22:34:59.137: E/AndroidRuntime(382): java.lang.RuntimeException: An error occured while executing doInBackground()
08-18 22:34:59.137: E/AndroidRuntime(382):  at android.os.AsyncTask$3.done(AsyncTask.java:200)
08-18 22:34:59.137: E/AndroidRuntime(382):  at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
08-18 22:34:59.137: E/AndroidRuntime(382):  at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
08-18 22:34:59.137: E/AndroidRuntime(382):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
08-18 22:34:59.137: E/AndroidRuntime(382):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
08-18 22:34:59.137: E/AndroidRuntime(382):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
08-18 22:34:59.137: E/AndroidRuntime(382):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
08-18 22:34:59.137: E/AndroidRuntime(382):  at java.lang.Thread.run(Thread.java:1096)
08-18 22:34:59.137: E/AndroidRuntime(382): Caused by: android.view.ViewRoot$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
08-18 22:34:59.137: E/AndroidRuntime(382):  at android.view.ViewRoot.checkThread(ViewRoot.java:2802)
08-18 22:34:59.137: E/AndroidRuntime(382):  at android.view.ViewRoot.invalidateChild(ViewRoot.java:607)
08-18 22:34:59.137: E/AndroidRuntime(382):  at android.view.ViewRoot.invalidateChildInParent(ViewRoot.java:633)
08-18 22:34:59.137: E/AndroidRuntime(382):  at android.view.ViewGroup.invalidateChild(ViewGroup.java:2505)
08-18 22:34:59.137: E/AndroidRuntime(382):  at android.view.View.invalidate(View.java:5139)
08-18 22:34:59.137: E/AndroidRuntime(382):  at android.widget.TextView.checkForRelayout(TextView.java:5364)
08-18 22:34:59.137: E/AndroidRuntime(382):  at android.widget.TextView.setText(TextView.java:2688)
08-18 22:34:59.137: E/AndroidRuntime(382):  at android.widget.TextView.setText(TextView.java:2556)
08-18 22:34:59.137: E/AndroidRuntime(382):  at android.widget.TextView.setText(TextView.java:2531)
08-18 22:34:59.137: E/AndroidRuntime(382):  at com.stts.sparetimetradingsystem.LoginActivity$Login.doInBackground(LoginActivity.java:119)
08-18 22:34:59.137: E/AndroidRuntime(382):  at com.stts.sparetimetradingsystem.LoginActivity$Login.doInBackground(LoginActivity.java:1)
08-18 22:34:59.137: E/AndroidRuntime(382):  at android.os.AsyncTask$2.call(AsyncTask.java:185)
08-18 22:34:59.137: E/AndroidRuntime(382):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
08-18 22:34:59.137: E/AndroidRuntime(382):  ... 4 more
08-18 22:35:01.867: E/WindowManager(382): Activity com.stts.sparetimetradingsystem.LoginActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@44f0a510 that was originally added here
08-18 22:35:01.867: E/WindowManager(382): android.view.WindowLeaked: Activity com.stts.sparetimetradingsystem.LoginActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@44f0a510 that was originally added here
08-18 22:35:01.867: E/WindowManager(382):   at android.view.ViewRoot.<init>(ViewRoot.java:247)
08-18 22:35:01.867: E/WindowManager(382):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
08-18 22:35:01.867: E/WindowManager(382):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
08-18 22:35:01.867: E/WindowManager(382):   at android.view.Window$LocalWindowManager.addView(Window.java:424)
08-18 22:35:01.867: E/WindowManager(382):   at android.app.Dialog.show(Dialog.java:241)
08-18 22:35:01.867: E/WindowManager(382):   at com.stts.sparetimetradingsystem.LoginActivity$Login.onPreExecute(LoginActivity.java:106)
08-18 22:35:01.867: E/WindowManager(382):   at android.os.AsyncTask.execute(AsyncTask.java:391)
08-18 22:35:01.867: E/WindowManager(382):   at com.stts.sparetimetradingsystem.LoginActivity$1.onClick(LoginActivity.java:60)
08-18 22:35:01.867: E/WindowManager(382):   at android.view.View.performClick(View.java:2408)
08-18 22:35:01.867: E/WindowManager(382):   at android.view.View.onKeyUp(View.java:4121)
08-18 22:35:01.867: E/WindowManager(382):   at android.widget.TextView.onKeyUp(TextView.java:4431)
08-18 22:35:01.867: E/WindowManager(382):   at android.view.KeyEvent.dispatch(KeyEvent.java:1061)
08-18 22:35:01.867: E/WindowManager(382):   at android.view.View.dispatchKeyEvent(View.java:3740)
08-18 22:35:01.867: E/WindowManager(382):   at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:788)
08-18 22:35:01.867: E/WindowManager(382):   at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:788)
08-18 22:35:01.867: E/WindowManager(382):   at android.widget.ScrollView.dispatchKeyEvent(ScrollView.java:318)
08-18 22:35:01.867: E/WindowManager(382):   at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:788)
08-18 22:35:01.867: E/WindowManager(382):   at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:788)
08-18 22:35:01.867: E/WindowManager(382):   at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:788)
08-18 22:35:01.867: E/WindowManager(382):   at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchKeyEvent(PhoneWindow.java:1667)
08-18 22:35:01.867: E/WindowManager(382):   at com.android.internal.policy.impl.PhoneWindow.superDispatchKeyEvent(PhoneWindow.java:1102)
08-18 22:35:01.867: E/WindowManager(382):   at android.app.Activity.dispatchKeyEvent(Activity.java:2063)
08-18 22:35:01.867: E/WindowManager(382):   at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchKeyEvent(PhoneWindow.java:1643)
08-18 22:35:01.867: E/WindowManager(382):   at android.view.ViewRoot.deliverKeyEventToViewHierarchy(ViewRoot.java:2471)
08-18 22:35:01.867: E/WindowManager(382):   at android.view.ViewRoot.handleFinishedEvent(ViewRoot.java:2441)
08-18 22:35:01.867: E/WindowManager(382):   at android.view.ViewRoot.handleMessage(ViewRoot.java:1735)
08-18 22:35:01.867: E/WindowManager(382):   at android.os.Handler.dispatchMessage(Handler.java:99)
08-18 22:35:01.867: E/WindowManager(382):   at android.os.Looper.loop(Looper.java:123)
08-18 22:35:01.867: E/WindowManager(382):   at android.app.ActivityThread.main(ActivityThread.java:4627)
08-18 22:35:01.867: E/WindowManager(382):   at java.lang.reflect.Method.invokeNative(Native Method)
08-18 22:35:01.867: E/WindowManager(382):   at java.lang.reflect.Method.invoke(Method.java:521)
08-18 22:35:01.867: E/WindowManager(382):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
08-18 22:35:01.867: E/WindowManager(382):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
08-18 22:35:01.867: E/WindowManager(382):   at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T14:47:22.620

您正在更新后台线程中发生的 doInBackground 函数中的视图。视图应始终在 UI 线程中更新。为了解决这个问题，您可以从 doInBackground 函数中返回 JSONObject 并在 onPostExecute 方法中进行处理。

将 try 块`userFunction.loginUser(email, password);`移到 onPostExecute 之后。

```
protected String doInBackground(String... params) {
    String email = inputEmail.getText().toString();
    String password = inputPassword.getText().toString();
    UserFunctions userFunction = new UserFunctions();
    JSONObject json = userFunction.loginUser(email, password);

    return json;
}

protected void onPostExecute(JSONObject json) {

    // check for login response
    try {
        if (json.getString(KEY_SUCCESS) != null) {
            loginErrorMsg.setText("");
            String res = json.getString(KEY_SUCCESS);
            if (Integer.parseInt(res) == 1) {
                // user successfully logged in
                // Store user details in SQLite Database
                DatabaseHandler db = new DatabaseHandler(getApplicationContext());
                JSONObject json_user = json.getJSONObject("user");

                // Clear all previous data in database
                userFunction.logoutUser(getApplicationContext());
                db.addUser(json_user.getString(KEY_NAME), json_user.getString(KEY_EMAIL), json.getString(KEY_UID), json_user.getString(KEY_CREATED_AT));

                // Launch HomePage Screen
                Intent homepage = new Intent(getApplicationContext(), HomepageActivity.class);

                // Close all views before launching HomePage
                homepage.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                startActivity(homepage);

                // Close Login Screen
                finish();
            } else {
                // Error in login
                loginErrorMsg.setText("Incorrect username/password");
            }
        }
    } catch (JSONException e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T14:46:57.893

您只能从 UI 线程更新视图。因此，将更新视图的代码移动到`onPostExecute`.

另外，考虑阅读堆栈跟踪。您的错误是不言自明的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T14:55:08.170

您不能更改方法`View`内部的属性`doInBackground()`，这意味着您不能调用`setText`方法来更新`TextView`.

您可以通过将代码移动到`onPostExecute`方法或对方法中的每个方法执行类似操作来`Views`解决您的问题`doInBackground()`：

```
loginErrorMsg.post(new Runnable() {
        public void run() {
            loginErrorMsg.setText("");
        }
    }); 
```

让我知道它是否对你有用。

# inheritance - enable_if 只允许基类

> ID：12019463
> 
> 赞同：1
> 
> 时间：2012-08-18T14:42:25.267
> 
> 标签：inheritance, c++11, operator-overloading, crtp, enable-if

我目前正在使用基类`template<class CRTP> Base`和派生类实现一些 CRTP `Derived1 : public Base<Derived1>`，`Derived2 : public Base<Derived2>`...

数学运算符在中定义，`Base`并且属于`CRTP Base<CRTP>::operator+(const CRTP& rhs)`那种意味着我们可以将 a 添加`Derived1`到 a`Derived1`但不能将 a 添加到`Derived2`a 的类型`Derived1`。

此外，我已经定义了运算符`Base<CRTP>& Base<CRTP>::operator()()`，这意味着`Derived1()`将返回`Base<Derived1>&`。

我想知道是否有解决方案来执行以下操作：

```
Derived1 = Derived1 + Derived1 : OK
Derived2 = Derived2 + Derived2 : OK
Derived1 = Derived1 + Derived2 : NOT OK
Derived1 = Derived1() + Derived2() : OK 
```

根据最后两行：

*   我防止用户犯错误
*   但是如果他真的想做这个操作，他可以​​将派生类型“强制转换”为基类型，这样就可以了

我唯一需要做的就是定义一个这样的运算符：

```
template<class CRTP0, class = typename std::enable_if</* SOMETHING */>::type> 
Base<CRTP> Base<CRTP>::operator+(const Base<CRTP0>& rhs) 
```

在 enable_if 我想要的是：

*   `true`: 如果 rhs 是`Base`类型
*   `false`: 如果 rhs 是一个`Derived`类型

存在这样的事情吗？您有其他解决方案吗？

非常感谢你 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T19:57:42.577

/ ** SOMETHING */*可以很容易地使用

1.  `std::is_same`对于 Derived 和
2.  Base 的“真实”部分的辅助类

辅助类是判断一个类是否正好是 a `Base<?>`：

```
template <typename> struct IsBase : std::false_type {};
...
template <typename X> struct IsBase<Base<X>> : std::true_type {}; 
```

然后我们可以在*/* SOMETHING */*中填写：

```
std::is_same<Other, Self>::value || IsBase<Other>::value 
```

请注意，这允许`Derived1 + Derived2()`.

* * *

示例：http: [//ideone.com/OGt0Q](http://ideone.com/OGt0Q)

```
#include <type_traits>

template <typename> struct IsBase : std::false_type {};

template <typename Self>
struct Base {
    Base& operator()() {
        return *this;
    };

    template <typename Other,
              typename = typename std::enable_if<std::is_same<Other, Self>::value
                                              || IsBase<Other>::value>::type>
    Self operator+(const Other& other) const {
        return static_cast<const Self&>(*this);
    }
};

template <typename X> struct IsBase<Base<X>> : std::true_type {};

struct D1 : Base<D1> {};
struct D2 : Base<D2> {};

int main() {
    D1 d1;
    D2 d2;
    d1 + d1; // ok
    d2 + d2; // ok
    d1() + d2(); // ok
    d1 + d2; // error
} 
```

# jsf - Pretty 面临 WebSphere Application Server 上的配置问题 - JSF2

> ID：12019464
> 
> 赞同：1
> 
> 时间：2012-08-18T14:42:33.810
> 
> 标签：jsf, jsf-2, websphere, websphere-7, prettyfaces

“错误 500：com.ocpsoft.pretty.PrettyFilter 与 javax.servlet.Filter 不兼容”

*   JSF2.1.2
*   Prettyfaces-jsf2-3.3.2
*   Primefaces 3.2
*   WebSphere 应用服务器 7.0.0.9

尝试在 WebSphere 管理控制台中添加自定义属性以实现过滤器兼容性（在[http://ocpsoft.org/prettyfaces/](http://ocpsoft.org/prettyfaces/)的常见问题解答中最后）。Tomcat 6.0.32 没有任何问题，但是一旦在 WAS 中部署应用程序就会出现问题。

下面是webxml

```
<context-param>
    <param-name>defaultHtmlEscape</param-name>
    <param-value>true</param-value>
</context-param>

<context-param>
    <param-name>com.sun.faces.numberOfViewsInSession</param-name>
    <param-value>3</param-value>
</context-param>

<context-param>
    <param-name>com.sun.faces.numberOfLogicalViews</param-name>
    <param-value>10</param-value>
</context-param>

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>classpath*:WEB-INF/Controller-servlet.xml</param-value>
</context-param>

<context-param>
    <param-name>com.sun.faces.expressionFactory</param-name>
    <param-value>com.sun.el.ExpressionFactoryImpl</param-value>
</context-param>

 <context-param>
    <description>JSF Injection provider</description>
    <param-name>com.sun.faces.injectionProvider</param-name>
    <param-value>net.devgrok.jsf.Tomcat6GuiceInjectionProvider</param-value>
</context-param>

<context-param>
    <param-name>primefaces.THEME</param-name>
    <param-value>cupertino</param-value>
</context-param>

<context-param>
    <param-name>javax.faces.PARTIAL_STATE_SAVING</param-name>
    <param-value>false</param-value>
</context-param>

<context-param>
    <param-name>javax.faces.FULL_STATE_SAVING_VIEW_IDS</param-name>
    <param-value>abc.xhtml</param-value>
</context-param>

<!--  JSF Required Context Params END-->

<!--  JSF Required Filters & Listeners START-->
<filter>
    <filter-name>PrimeFaces FileUpload Filter</filter-name>
    <filter-class>org.primefaces.webapp.filter.FileUploadFilter</filter-class>
    <init-param>
        <param-name>thresholdSize</param-name>
        <param-value>1048576000</param-value><!--51200-->
    </init-param>
    <init-param>
        <param-name>uploadDirectory</param-name>
        <param-value>/temp</param-value>
    </init-param>
</filter>

<filter-mapping>
    <filter-name>PrimeFaces FileUpload Filter</filter-name>
    <servlet-name>Faces Servlet</servlet-name>
</filter-mapping>
<!-- Creates the Spring Container shared by all Servlets and Filters -->

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<filter>
    <filter-name>Pretty Filter</filter-name>
    <filter-class>com.ocpsoft.pretty.PrettyFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>Pretty Filter</filter-name>
    <url-pattern>/*</url-pattern>
    <dispatcher>FORWARD</dispatcher>
    <dispatcher>REQUEST</dispatcher>

</filter-mapping>

<!--  JSF Required Filters & Listeners END-->

<!--  JSF Required Servlets START -->

<servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.jsf</url-pattern>
</servlet-mapping> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T17:04:39.717

1.  在 WebSphere 管理控制台中将 war 类加载器顺序更改为“最后一个父级”，并将策略更改为“应用程序的单个类加载器”，以选择应用程序自己的 JSF 版本。

2.  从 WEB-INF/Lib 文件夹中删除了多余的 jar（servlet-api.jar 和 xml-apis-1.0.b2.jar），因为它与服务器版本冲突。

以上解决了这个问题。但是，当您有可能与服务器版本冲突的特定于应用程序的依赖项时，创建隔离共享库 ( [https://stackoverflow.com/a/12081307/1341062 ) 将是更好的选择。](https://stackoverflow.com/a/12081307/1341062)

# c# - 如何将 8 位无符号波形文件转换为 8 位有符号波形文件？

> ID：12019465
> 
> 赞同：0
> 
> 时间：2012-08-18T14:42:34.933
> 
> 标签：c#, audio, naudio, wave, type-conversion

我正在使用 NAudio 和 C# 将波形文件转换为 48,000、8bit、Mono。我将转换后的数据存储在字节数组中。我的代码如下。它工作正常，但是新的波形文件数据是未签名的，我需要它来签名。

```
WaveFormat target = new WaveFormat(48000, 8, 1);
WaveStream stream = new WaveFileReader(this.FilePath);
WaveFormatConversionStream conv = new WaveFormatConversionStream(target, stream);
this.ConvertedData = new byte[conv.Length];
conv.Position = 0;
conv.Read(this.ConvertedData, 0, Convert.ToInt32(conv.Length));
stream.Dispose();
conv.Dispose(); 
```

我尝试在数据转换后循环遍历字节数组，并从每个字节中减去 128，这是我在此站点上找到的解决方案。

```
for (int i = 0; i < end; i++)
{
    signed = (int)this.ConvertedData[i] - 128;
    this.Data[i] = (byte)signed;
} 
```

这种工作，但不是万无一失的，我相信必须有更好的方法。任何建议将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T14:53:48.807

我无法发表评论，所以我必须“滥用”答案功能：

尝试：

```
Convert.toSByte 
```

它是基于字符串的，但应该可以工作......

[http://msdn.microsoft.com/en-us/library/b0hdkwd9.aspx](http://msdn.microsoft.com/en-us/library/b0hdkwd9.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T14:56:09.937

如果您只是在寻找从无符号字节数组转换为有符号字节数组的更好方法，您可以使用 Buffer.BlockCopy 方法，或尝试使用 sbyte[] signed = (sbyte[])(Array)unsigned 。希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T14:51:05.567

```
WaveFormat target = new WaveFormat(48000, 8, 1);
WaveStream stream =new WaveFileReader(this.FilePath);
WaveFormatConversionStream str = new WaveFormatConversionStream(target, stream);
WaveFileWriter.CreateWaveFile("c:\\converted.wav", str); //or the path of .wav file 
```

尝试改用 WaveFileWriter.CreateFile 方法..

结帐[NAudio](http://naudio.codeplex.com/) 这个链接你也可以结帐他们有一个 C# 音频库 [Alvis.Audio](http://alvas.net/alvas.audio.aspx)

# objective-c - 如何仅在应用程序的特定位置放置标签栏？

> ID：12019468
> 
> 赞同：0
> 
> 时间：2012-08-18T14:42:45.210
> 
> 标签：objective-c, cocoa-touch, uitabbarcontroller

我想在我的应用程序的一个地方放置一个标签栏。从那里我可以加载一些其他的视图控制器，但就是这样。我不希望它用于我的整个应用程序。我阅读的所有示例都将标签栏控制器作为窗口的根视图控制器。

那么我该怎么做呢？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T15:16:31.373

他可能会对您有所帮助，考虑您的视图控制器是 HomeView，您将从那里推送一个标签栏控制器，HomeView 在下面的视图中加载：

```
#import "AppDelegate.h"
@implementation AppDelegate
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    HomeView *homeview = [[HomeView alloc] initWithNibName:@"HomeView" bundle:nil];
    UINavigationController *navigation = [[UINavigationController alloc] initWithRootViewController:homeview];
    self.window.rootViewController = navigation;
    [self.window makeKeyAndVisible];
    return YES;
}
@end 
```

那么 HomeView 的 .h、.m 和 .xib 文件将如下所示：

在 HomeView.h

```
#import <UIKit/UIKit.h>

@interface HomeView : UIViewController
{
    IBOutlet UITabBarController *tabBarController;
}
-(IBAction)loadTabBar:(id)sender;
@end 
```

HomeView.m 是：

```
@implementation HomeView

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

-(IBAction)loadTabBar:(id)sender
{
    [self.navigationController pushViewController:tabBarController animated:YES];

}
- (void)didReceiveMemoryWarning
{
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

@end 
```

并且 .xib 文件必须如下：

![在此处输入图像描述](../Images/6fdd75691d2c04209931476460b30eb7.png) tabBarController`IBOutlet`必须连接到 .xib 文件上的 UITabBarController。还有`UITabBarController`两个名为`FirstViewController`,的视图控制器`SecondViewController`。此外， HomeView 必须在`UINavigationController`.

如果没有用这个答案澄清，我会更新详细解释。以上是使用XIB方法加载标签栏控制器的一种方式。

`IBAction`您可以通过在 HomeView.m 文件中更改 (button action) 中的内容来编写如下代码：

```
#import "HomeView.h"
#import "FirstViewController.h"
#import "SecondViewController.h"

@implementation HomeView

-(IBAction)loadTabBar:(id)sender
{
    FirstViewController *firstView = [[FirstViewController alloc] initWithNibName:@"FirstViewController" bundle:nil];
    SecondViewController *secondView = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];
    tabBarController = [[UITabBarController alloc] init];
    tabBarController.viewControllers = [NSArray arrayWithObjects:firstView, secondView, nil];
    [self.navigationController pushViewController:tabBarController animated:YES];
}
@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T14:45:21.293

您必须在应用程序委托中制作 tabBar ，然后在您想使用它时添加

```
-(void)addTabBarController
{
    AppDelegate *appdelegte =(AppDelegate*)[[UIApplication sharedApplication]delegate];

    //[[[appdelegte navigationController] view]removeFromSuperview];

    [[appdelegte window]addSubview:[[appdelegte tabcontroller]view]];

    [[appdelegte tabcontroller]setSelectedIndex:0];
} 
```

# php - 记录动态成员变量

> ID：12019471
> 
> 赞同：1
> 
> 时间：2012-08-18T14:43:21.560
> 
> 标签：php, doxygen, idiorm

我用 Doxygen 记录模型类（在 PHP 中）。我使用 Idiorm & Paris 作为 ORM，我希望动态成员变量（直接来自数据库）也出现在生成的文档中。

**示例：**我有一个模型`Group`，其中包含一些方法，例如Doxygen`isMember()`或`users()`文档中的 Doxygen。在数据库中，我有一个表`group`，其中包含一个字段`code`。在 Idiorm & Paris 我可以从这样的`Group`实例中访问它`$group`：

```
$group->code 
```

**如何`code`在 Doxygen 中记录？**

**编辑**：这个问题类似于[如何记录 Doxygen 中不存在的变量？](https://stackoverflow.com/q/8883162/220060)，但它是关于**动态成员**，而不是关于**变量。**

**编辑 2**：我不确定正确的术语。它是动态成员变量还是动态属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:56:19.303

在设置我知道它们将包含某些数据位的模型时，我通常会做的事情是在模型定义中设置变量。这样可以更轻松地查看我可以使用模型获得哪些类型的数据。

我没有 Idiorm 或 Paris 的经验，但这是你可以尝试的。记录变量非常容易，因为它存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T18:06:09.983

在 Doxygen 中记录不存在的类变量是不可能的吗？我试过裸体

```
/** @var User::email string 
  * Email address
  */ 
```

在类中没有相应的`$email;`成员变量，但 Doxygen 勇敢地忽略了这一点。我没有找到命令或其他东西来强制记录丢失的工件。

因此，我尝试了**creativedutchmen**的建议，但是 Paris 不能很好地处理已经存在的成员变量，因为 - 我认为 - PHP 魔术方法`__get()`不再被触发。我看到三个可能的修复：

1.  `unset()`构造函数中记录的成员变量。`get_class_vars(get_class($this))`这可以在父类中完成。因为我的模型类都继承自父类，所以这将相对简单。
2.  修改 Paris 以忽略已经设置的成员变量，但我看不出没有`unset()`.
3.  对成员变量的命名略有不同，例如附加下划线，因此它们不会与动态变量冲突。

可怕的杂物。在运行时做某事或有额外的成员使文档成为可能？不，谢谢。

我决定保持现状并仔细记录模型工厂方法。大多数时候，工厂方法包含作为参数的类变量，以便能够设置它们。即使工厂方法没有设置所有类变量，也可以用散文记录丢失的变量。类文档也是一个不错的选择。

我将赏金奖励给有**创造力**的荷兰人，因为我的想法是开箱即用，即使它最终对我没有帮助，也因为我不希望声誉点数丢失。

**tl;博士**

*不要乱七八糟。在工厂方法或类概述中记录动态成员变量。*

# android - 框架中的线性布局拒绝横向

> ID：12019478
> 
> 赞同：0
> 
> 时间：2012-08-18T14:44:35.537
> 
> 标签：android, scrollview, android-linearlayout, frames

我将我的应用程序置于横向模式`manifest`：

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:screenOrientation="landscape"
    android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
    <activity
        android:name=".VerticalSlideshow"
        android:label="@string/title_activity_prime" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" /> 
```

我在背景中有`FrameLayout`一个垂直`ScrollView`的，它正在嗡嗡作响，在前景中`LinearLayout`有一个按钮。`ImageView`一切正常，除了前景图像/按钮不会使用模拟器进入横向模式。这是我的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/container"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="#ddffff" >

<ScrollView
    android:id="@+id/horizontal_scrollview_id"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:fadingEdge="none" >

    <LinearLayout
        android:id="@+id/horiztonal_outer_layout_id"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center_vertical"
        android:orientation="vertical"
        android:paddingBottom="0dp"
        android:paddingTop="0dp" >
    </LinearLayout>
</ScrollView>

<LinearLayout
    android:id="@+id/moving"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_gravity="center_horizontal"
    android:background="@drawable/clear"
    android:gravity="center_horizontal"
    android:orientation="horizontal" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/truck1" />

    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_gravity="right"
        android:layout_weight="0.12"
        android:gravity="right"
        android:orientation="vertical" >

        <ImageButton
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="0.25"
            android:background="@drawable/carfs"
            android:src="@drawable/clear" />

        <ImageButton
            android:id="@+id/button2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="0.25"
            android:background="@drawable/policef"
            android:src="@drawable/clear" />

        <ImageButton
            android:id="@+id/button3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="0.25"
            android:background="@drawable/taxif"
            android:src="@drawable/clear" />

        <ImageButton
            android:id="@+id/button4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="0.25"
            android:background="@drawable/amulancef"
            android:src="@drawable/clear" />
    </LinearLayout>
</LinearLayout>

</FrameLayout> 
```

Eclipse 中的 XML 预览看起来不错。我应该在真手机上测试吗？最终，我怎样才能将这个线性视图强制变为横向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T15:25:13.883

尝试将 android:screenOrientation="landscape" 放在您的活动标签中，而不是清单文件中的应用程序标签中

# c# - Caliburn 绑定异常

> ID：12019483
> 
> 赞同：2
> 
> 时间：2012-08-18T14:45:01.343
> 
> 标签：c#, wpftoolkit, caliburn.micro, simple-injector

让我解释一下我的问题。请原谅我的长问题。就这样吧。

我有一个视图（**BusyProviderView**）

```
<Grid>
    <xctk:BusyIndicator x:Name="aaa" IsBusy="{Binding IsRunning}" >
        <xctk:BusyIndicator.BusyContentTemplate>
            <DataTemplate>
                <Grid cal:Bind.Model="{Binding}">
                    <TextBlock Name="Message"/>
                </Grid>
            </DataTemplate>
        </xctk:BusyIndicator.BusyContentTemplate>
    </xctk:BusyIndicator>
</Grid> 
```

哪个有**视图模型：**

```
 public class BusyProviderViewModel : PropertyChangedBase, IBusyProvider
{
//two properties with INPC, Message and IsRunning
} 
```

我再次有一个**Shell 视图**

```
<Window x:Class="MvvmTest.ShellView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="ShellView" Height="300" Width="300">
<Grid>
    <Button Height="25" x:Name="Run">Run</Button>
    <ContentControl x:Name="BusyProvider"/>
</Grid> 
```

哪个有**视图模型**

```
public class ShellViewModel : PropertyChangedBase, IShellViewModel
{
    private IBusyProvider busyProvider;

    public ShellViewModel(IBusyProvider busy)
    {
        this.BusyProvider = busy;
    }

    public IEnumerable<IResult> Run()
    {
        yield return new DummyOperation(this.BusyProvider);
    }

    public IBusyProvider BusyProvider
    {
        get
        {
            return this.busyProvider;
        }
        set
        {
            if (Equals(value, this.busyProvider))
            {
                return;
            }
            this.busyProvider = value;
            this.NotifyOfPropertyChange(() => this.BusyProvider);
        }
    }
} 
```

**DummyOperation**外观

```
public class DummyOperation : IResult
{
    public IBusyProvider Provider { get; set; }

    public DummyOperation(IBusyProvider provider)
    {
        Provider = provider;
    }

    public void Execute(ActionExecutionContext context)
    {
        BackgroundWorker worker = new BackgroundWorker();
        worker.DoWork += (a, b) =>
            {
                Provider.IsRunning = true;
                Provider.Message = "Working";
                Thread.Sleep(TimeSpan.FromSeconds(5));
                Provider.Message = "Stopping";
                Thread.Sleep(TimeSpan.FromSeconds(5));
                Provider.IsRunning = false;
            };
        worker.RunWorkerCompleted += (a, b) =>
            { Completed(this, new ResultCompletionEventArgs()); };
        worker.RunWorkerAsync();

    }

    public event EventHandler<ResultCompletionEventArgs> Completed;
} 
```

最后我有**BootStrapper**

```
public class AppBootstrapper : Bootstrapper<IShellViewModel>
{
    private Container container;

    protected override void Configure()
    {
        this.container = new Container();
        this.container.Register<IWindowManager,WindowManager>();
        this.container.Register<IShellViewModel,ShellViewModel>();
        this.container.Register<IBusyProvider, BusyProviderViewModel>();
    }

    protected override object GetInstance(Type serviceType, string key)
    {

        return this.container.GetInstance(serviceType);
    }

    protected override IEnumerable<object> GetAllInstances(Type serviceType)
    {
        return this.container.GetAllInstances(serviceType);
    }
    protected override void BuildUp(object instance)
    {
        this.container.Verify();
    }
} 
```

看起来我已经设置了所有内容，但是当我尝试运行它时会引发异常。 ![在此处输入图像描述](../Images/3f956bb7006c6bc6af8e7478b2405dc7.png)

我确定问题是由

```
 <DataTemplate>
            <Grid cal:Bind.Model="{Binding}">
                <TextBlock Name="Message"/>
            </Grid>
        </DataTemplate> 
```

> cal:Bind.Model="{绑定}

一旦我删除了上述语句，程序就会运行而不会崩溃但没有绑定。

如果你看图像，

```
 protected override object GetInstance(Type serviceType, string key)
    {

        return this.container.GetInstance(serviceType);
    } 
```

serviceType 作为**NULL**传递，键是**“请稍候....”**，这是从哪里来的？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T16:22:56.023

默认情况下，[扩展工具包](https://wpftoolkit.codeplex.com/)似乎`BusyIndicator`使用字符串`"Please Wait...."`作为`BusyContent`. 所以里面`DataTemplate`会`DataContext`是上面提到的字符串，这会导致 Caliburn 中的混乱和异常。

要修复它，您需要将`BusyContent`on设置`BusyIndicator`为当前`DataContext`并且它将起作用：

```
<xctk:BusyIndicator x:Name="aaa" IsBusy="{Binding IsRunning}" 
                                 BusyContent="{Binding}" >
    <xctk:BusyIndicator.BusyContentTemplate>
        <DataTemplate>
            <Grid cal:Bind.Model="{Binding}">
                <TextBlock Name="Message"/>
            </Grid>
        </DataTemplate>
    </xctk:BusyIndicator.BusyContentTemplate>
</xctk:BusyIndicator> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T15:04:35.530

我认为 Oleg 是对的，你不能在使用 Caliburn 的 DataTemplate 中使用约定（你可以使用 CaliburnMicro）。从[文档 - 其他要知道的事情](http://caliburnmicro.codeplex.com/wikipage?title=All%20About%20Conventions)

> 其他要知道的事情 在所有平台上，约定不能应用于 DataTemplate 的内容。这是 Xaml 模板系统的当前限制。我已经要求微软解决这个问题，但我怀疑他们会回应。因此，为了将 Binding 和 Action 约定应用于您的 DataTemplate，您必须将 Bind.Model="{Binding}" 附加属性添加到 DataTemplate 内的根元素。这为 Caliburn.Micro 提供了必要的钩子，以便在每次从 DataTemplate 实例化 UI 时应用其约定。

# c - 如何通过查看可执行警告消息找到源函数调用？

> ID：12019486
> 
> 赞同：1
> 
> 时间：2012-08-18T14:45:28.360
> 
> 标签：c, debugging, gdb

运行可执行文件时出现错误：

```
(a.out:6815): GooCanvas-CRITICAL **: goo_canvas_item_get_parent: assertion `GOO_IS_CANVAS_ITEM (item)' failed 
```

我想找出导致此警告的函数调用（因为我没有调用上述函数），我尝试使用 gdb 运行但没有显示源代码行？`-g`我编译的时候已经包含了。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T15:07:03.803

尝试添加`G_DEBUG=fatal_criticals`到您的环境中。这样，当发生严重错误时，您的程序将 abort()，因此您的 gdb 可以指出断言失败的位置。

那，或向`g_critical`函数添加断点。

# android - Android：如何以编程方式设置 XML 维度变量

> ID：12019491
> 
> 赞同：9
> 
> 时间：2012-08-18T14:46:04.887
> 
> 标签：android, layout

在我的布局 XML 文件中，我通过一个名为`dimens.xml`.

例如，`dimens.xml`包含如下参数：

```
<dimen name="textSize_normal">20dp</dimen>
<dimen name="buttonTextSize_normal">15dp</dimen>
<dimen name="editTextSize_normal">17dp</dimen>
<dimen name="buttonHeight_normal">37dp</dimen>
<dimen name="margin_normal">5dp</dimen> 
```

例如，在我`main.xml`的 中，我会通过执行以下操作来设置 a 的文本大小`TextView`：

```
android:textSize="@dimen/editTextSize_normal" 
```

它工作得很好。

现在，我的问题是，是否可以从我的主要活动中以编程方式为`dimen`我的文件中的变量设置值？`dimen.xml`我想要做的是获取屏幕尺寸，并设置，例如，`textSize`基于屏幕高度的一小部分，以便它可以轻松适应任何屏幕尺寸。我已经弄清楚了，我只需要你的帮助来弄清楚如何`dimen`在我的代码中设置变量。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-18T15:13:15.400

> 现在，我的问题是，是否可以通过我的主要活动以编程方式在我的 dimen.xml 文件中设置 dimen 变量的值？

不。

> 我要做的是获取屏幕尺寸，并根据屏幕高度的一小部分设置例如 textSize ，以便它可以轻松适应任何屏幕尺寸。

忽略这是一种奇怪的 UI 方法，这样做的方法是删除您的属性并在运行时使用Java`android:textSize`更改文本大小。`setTextSize()`

> 我已经弄清楚了，我只需要你的帮助来弄清楚如何在我的代码中设置维度变量。

您不会“设置维度变量”。您可以通过诸如`setTextSize()`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-18T14:54:20.717

不，您不能在运行时编辑资源文件，它们已经编译和生成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T14:53:38.687

您应该在所有资源中使用与密度无关的像素，以便尺寸可以适应屏幕尺寸。您不需要在运行时计算该值。如果您想为不同的屏幕尺寸设置不同的布局，请考虑使用多个资源文件。

阅读[本指南](http://developer.android.com/guide/practices/screens_support.html)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-30T13:49:54.433

i guess what you mean is to change the size depending on the device's screen size.. which can be made by creating multiple dimens.xml files in folders like values-hdpi, values-xhdpi, values-xxhdpi, values-mdpi,.. and then on runtime the compiler will choose the dimen depending on the dpi i actually didn't try this before but i read it here.. take a look at this: [http://developer.android.com/guide/practices/screens_support.html#qualifiers](http://developer.android.com/guide/practices/screens_support.html#qualifiers)

# codeigniter - 在 codeigniter 中编写查询，给出与要求不同的结果

> ID：12019493
> 
> 赞同：0
> 
> 时间：2012-08-18T14:46:21.310
> 
> 标签：codeigniter

我正在使用 codeigniter，并且正在编写以下查询：

```
$this->db->select('*');
$this->db->from('tbl_profile');
$this->db->join('tbl_msg', 'tbl_msg.msg_sender_id = tbl_profile.profile_id');
$this->db->order_by("msg_id", "desc");
$query = $this->db->get('', $config['per_page'], $this->uri->segment(3));
$data['records'] = $query->result_array(); 
```

相应地，我得到以下结果：

```
SELECT (*) FROM tbl_profile
JOIN tbl_msg ON tbl_msg.msg_sender_id = tbl_profile.profile_id 
```

这是返回错误的结果，因为我想要与以下查询相对应的结果：

```
select * from tbl_profile as A
join (select * from tbl_msg) as B on A.profile_id = B.msg_sender_id 
```

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T15:29:18.793

首先，您缺少 order by 子句，但我认为，您的意思是其他差异。

如果你愿意，你可以使用这个查询，什么会给你返回确切的代码：

```
$this->db->select('*', FALSE);
$this->db->from('tbl_profile as A');
$this->db->join('( select * from tbl_msg ) as B', 'A.msg_sender_id = B.profile_id');
$this->db->order_by("msg_id", "desc");
$query = $this->db->get('', $config['per_page'], $this->uri->segment(3));
$data['records'] = $query->result_array(); 
```

来自codeigniter用户手册：

```
$this->db->select() 
```

接受可选的第二个参数。如果您将其设置为 FALSE，CodeIgniter 将不会尝试使用反引号保护您的字段或表名。如果您需要复合选择语句，这很有用。

# emacs - emacs 词法作用域和带引号的变量名

> ID：12019496
> 
> 赞同：1
> 
> 时间：2012-08-18T14:46:45.263
> 
> 标签：emacs, elisp, emacs24, lexical-scope

我正在尝试 Emacs 词法作用域（Emacs 24 的新特性）之间`add-to-list`的相互作用，发现相互作用令人困惑，我不知道如何理解它。这是一个最小的示例，除了我使用`set`而不是`add-to-list`. （`set`类似于`add-to-list`它通常采用带引号的变量名）

```
(eval
 '(progn
    (setq a "global")
    (let ((a "apple"))
      (defun my-print-a ()
        (print a)
        (set 'a "by set")
        (print a))
      (setq a "mature apple"))
    (let ((a "banana"))
      (my-print-a))
    (print a))
 t) ;; t for lexical scoping 
```

上面的代码按顺序打印“mature apple”、“mature apple”、“by set”。第一个打印结果“成熟的苹果”与词法作用域的预期一致（支持词法闭包），在这里看到并不奇怪。但是第二次和第三次打印的结果让我感到惊讶。好像`(set 'a "by set")`只是识别和影响 name 的全局绑定`a`。

这是预期的行为吗？或者这是一个错误？如果有意，如何理解这种行为？

我是否正确地假设`set`只要词法范围打开，它总是会影响全局绑定？

使用`(eval '(progn ...) nil)`时，事情会按照动态作用域的预期工作，并且 的行为与这种情况下的行为`(set 'a ...)`相同`(setq a ...)`。只有当一个人同时使用词法作用域和带引号的变量时，才会出现这个问题。

* * *

更新：

根据手册，这似乎是一种预期的行为。在[Void Variables](http://www.gnu.org/software/emacs/manual/html_node/elisp/Void-Variables.html)上，手册说

> 在词法绑定规则下，值单元只保存变量的全局值，即任何词法绑定结构之外的值。当一个变量被词法绑定时，局部值由词法环境决定；如果其符号的值单元格未分配，则该变量可能具有局部值。

和[词法绑定](http://www.gnu.org/software/emacs/manual/html_node/elisp/Lexical-Binding.html#Lexical-Binding)

> symbol-value、boundp 和 set 等函数仅检索或修改变量的动态绑定（即其符号值单元格的内容）。

symbol-value、boundp、set 是通常用带引号的变量名 ( `(symbol-value 'var) (boundp 'var) (set 'var 123)`) 调用的函数。这些函数仅获取或设置符号的值单元格，并且在词法绑定规则下，值单元格仅保存全局值。所以在词法绑定下，使用带引号的变量只能获取或设置全局值（除非变量是特殊变量）。尽管结果既不是词汇（苹果）也不是动态（香蕉）看起来仍然很奇怪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T16:54:37.797

代码的编写方式与 Emacs 期望的启用词法作用域的程序不同。

[http://www.gnu.org/software/emacs/manual/html_node/elisp/Definitions.html](http://www.gnu.org/software/emacs/manual/html_node/elisp/Definitions.html)

> `defvar`并且`defconst`是将符号定义为全局变量的特殊形式——可以在 Lisp 程序中的任何位置访问的变量。
> 
> (...)
> 
> 原则上，您可以将变量值分配给任何带有 的符号`setq`，无论它是否首先被定义为变量。但是，您应该为要使用的每个全局变量编写一个变量定义；否则，如果在启用词法作用域的情况下对其进行评估，您的 Lisp 程序可能无法正确运行。

[http://www.gnu.org/software/emacs/manual/html_node/elisp/Lexical-Binding.html](http://www.gnu.org/software/emacs/manual/html_node/elisp/Lexical-Binding.html)

> 请注意，类似`symbol-value`、`boundp`和的函数`set`仅检索或修改变量的动态绑定（即其符号的值单元格的内容）。此外， a `defun`or主体中的代码`defmacro`不能引用周围的词法变量。

[http://www.gnu.org/software/emacs/manual/html_node/elisp/Setting-Variables.html](http://www.gnu.org/software/emacs/manual/html_node/elisp/Setting-Variables.html)

> 特殊形式：`setq`[*符号* *形式*]...
> 
> > 这种特殊形式是更改变量值的最常用方法。(...) 符号的当前绑定已更改。
> > 
> > (...)
> 
> 功能：`set` *符号* *值*
> 
> > 此函数将*value放入**symbol*的 value 单元格中。
> > 
> > (...)
> > 
> > 当动态变量绑定生效（默认）时，`set`与 具有相同的效果，除了计算其符号参数而没有计算`setq`的事实。但是当一个变量被词法绑定时，会影响它的动态值，而影响它的当前（词法）值。`set``setq``set``setq`

如果我们将`defvar`定义添加`a`为全局变量，我们可以看到函数`a`中的所有引用`my-print-a`都被动态绑定*，如手册所述*：

```
(eval
 '(progn
    (defvar a nil)
    (setq a "global")
    (let ((a "apple"))
      (defun my-print-a ()
        (print a)                       ; "banana"
        (set 'a "by set")              
        (print a))                      ; "by set"
      (setq a "mature apple"))
    (let ((a "banana"))
      (my-print-a))
    (print a))                          ; "global"
 t) 
```

# join - 惯用地图加入clojure？

> ID：12019502
> 
> 赞同：2
> 
> 时间：2012-08-18T14:47:38.707
> 
> 标签：join, clojure, merge

我有一个看起来像这样的数据结构：

```
(def conf 
  { :devices [{:alias "OSC Sender",
               :name "OSC Sender",
               :ins [{:name "xpos", :type :int, :mutable true}]},
              {:alias "const2", :name "const",
               :outs [{:name "out", :type :int}]}],
    :connections {"const2.out" "OSC Sender.xpos"},
    :layout [{:alias "const2",
              :x 72.12447405329594,
              :y 99.88499298737729},
             {:alias "tick",
              :x 82.5732819074334,
              :y 133.91374474053296},
             {:alias "OSC Sender",
              :x 185.17741935483872,
              :y 113.90322580645162}]}) 
```

我想通过键（特别是）加入地图以`:devices`丰富设备的布局信息。`:layout``:alias`

现在我拼凑了以下解决方案：

```
(map (partial reduce merge) (vals (group-by :alias (concat (:devices conf) (:layout conf))))) 
```

这是惯用的连接还是其他更可取的方法？

干杯

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-18T15:21:15.050

您可以使用命名空间中的`join`函数`clojure.set`：

```
(clojure.set/join (conf :devices) (conf :layout) {:alias :alias}) 
```

请注意，返回值是一个集合。省略最后一个参数会导致自然连接；详情见`(doc clojure.set/join)`。

# php - session.use_trans_sid 的目的是什么？

> ID：12019505
> 
> 赞同：0
> 
> 时间：2012-08-18T14:47:50.703
> 
> 标签：php, session, cookies

> **可能重复：**
> [php session.use_trans_sid](https://stackoverflow.com/questions/1745984/php-session-use-trans-sid)

这个 PHP 指令`session.use_trans_sid`通常是不赞成的，默认情况下是禁用的。我不明白这个指令的真正目的，或者如果建议关闭它，为什么它会包含在 PHP 中。

在哪些情况下您实际上希望启用此功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T14:51:38.967

如果客户端禁用了 Cookie，PHP 将在链接的 GET-Request 中附加一个会话 ID，以启用持久性 $_SESSION-Data。但是，由于参数始终存在，搜索引擎会将您的网站排名较低。

除此之外，我不知道启用该选项有任何其他问题 - 这将使您的网站可访问，即使在客户端禁用 cookie 也是如此。

# java - 同步的集群 JMS 应用程序 (Weblogic)

> ID：12019509
> 
> 赞同：1
> 
> 时间：2012-08-18T14:48:09.350
> 
> 标签：java, jms, weblogic, cluster-computing

首先：

1.  我正在使用带有 3 个*托管服务器*和 3 个带有*分布式队列*和 3 个*saf 代理*（用于发送消息）的*JMS 服务器的***Weblogic 11g 。**所有 JMS 服务器的持久性存储都存储在网络路径中 - 3 个文件用于 3 个服务器。
****   我需要一个应用程序将消息发送到队列（比如说`output.jms.q`），然后等待大约 20 秒从另一个队列获取消息（假设`input.jms.q`）*   目前，应用程序将消息发送到其目的地，当它接收到消息时，消息将落入分布式队列中的 3 个队列之一。***

 ***在我的代码中，如果我从 Managed-Server-1 发送消息，它将尝试在 Managed-Server-1 中获取响应。（使用`InitialContext()`构造函数）。这使得 66% 的消息无法访问！

我知道该`Forward Delay`选项并将其设置为喜欢，2 秒。当我在开发时，它就像魅力一样！现在，当我有很多客户测试它时，感觉就像`Forward Delay`没有选择正确的服务器。

当我关闭我的 2 台托管服务器时 - 它运行得非常快。但我只使用一台机器而不是 3 台。

### 会不会是我的设置？

每个托管服务器都有一个 JMS 服务器和一个分布式队列。我相信对于这个东西，我只需要**一个**队列，每个 JMS 服务器都可以连接。类似于共享队列而不是分布式的东西。

是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-11T18:19:59.297

我的问题的解决方案是使用分布式主题。Weblogic 10.3.5+ 支持在服务器之间复制消息。是的，它很蹩脚..但这就是我发现的。***

# iphone - 通过应用程序保存 mp3，使其在 iTunes 或音乐播放器中可见

> ID：12019512
> 
> 赞同：0
> 
> 时间：2012-08-18T14:48:44.850
> 
> 标签：iphone, objective-c, mp3, itunes

如何将刚刚创建的 MP3 文件保存在手机内存中，以便在手机的音乐播放器中可以发现它并且在连接到 iTunes 时也可以看到它？有可能这样做吗？还是所有东西都将存储在应用程序沙箱中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T15:43:19.207

我不确定您是否能够以编程方式将其添加到用户的音乐收藏中。至少，您可以将其保存到用户可以从 iTunes 访问的 Documents 目录中：

```
NSString *documentsPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject]; 
```

然后，您必须在项目的 .plist 中将 UIFileSharingEnabled 设置为 true，以使用户可以访问您的应用程序的 Documents 目录。此设置还允许用户将文件添加到 Documents 目录。

然后他们必须手动将文件添加到他们的收藏中。

# javascript - Javascript 商店数组中的下拉值我想知道是否可以将 <select>中的选定值存储在 JS 数组中。我最终需要做的是计算大约 10 个下拉列表中的最高 6 个值，我想我可以通过使用 JS Math.max() 函数来完成。非常感谢您的帮助。下面是一些示例代码：</select> <optgroup labe<="" h1="">> ID：12019513
> 
> 赞同：2
> 
> 时间：2012-08-18T14:48:44.997
> 
> 标签：javascript, arrays, select, while-loop, sum

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T14:53:19.170

做这样的事情（JQuery）：

```
var selected = new Array();
            $('.points option:selected').each(function() {
                selected.push($(this).val());
            }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T14:56:09.193

```
var selects = [].slice.apply(document.getElementsByTagName('select'));
selects.forEach(function (elem, i){
    var value = elem.options[elem.selectedIndex].value;
    //Do something with this value. Push it to an array, perhaps.
});​ 
```

这假定`select`页面上的所有 s 都应该包括在内。如果不是这种情况，那么您应该使用`document.getElementsByClassName`或类似的、更合适的选择器。

[演示](http://jsfiddle.net/5xHrY/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-18T15:11:29.903

尝试这个：

```
var selectValues = [];
var selectNodeList = document.getElementsByClassName("points");
for (var i = 0; i < selectNodeList.length; i++) {
    selectValues.push(selectNodeList[i].value)
}
// selectValues array now stores values of all <select> lists with class "points" 
```</optgroup>

# java - 带有 CDN 的 Java Play2

> ID：12019515
> 
> 赞同：2
> 
> 时间：2012-08-18T14:49:30.937
> 
> 标签：java, playframework, playframework-2.0, cdn

我正在使用 CDN（亚马逊云端），我正在尝试将播放配置为与 CDN 一起使用

```
GET    xxxxxxxxx.cloudfront.net/*file               controllers.Assets.at(path="",file) 
```

这种方法的问题是我的图片网址看起来像这样

```
http://localhost:9000/xxxxxxxxxxxxxxx.cloudfront.net/images/Ascalon_Wall_Ruins.jpg 
```

我需要删除`http://localhost:9000/`

任何想法我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T15:46:29.750

我这样解决了我的问题：

```
package Config;

public class CDN {
    private final static String url = "http://yourcdnurl.net/;

    public static String createUrl(String s) {
        return url + s;
    }
} 
```

用法：

```
<link rel="stylesheet" media="screen" href= "@Config.CDN.createUrl("stylesheets/bootstrap.css")"> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-18T15:09:07.923

您不需要使用 Play`router`来构建外部链接，而是只需在其前面加上域，即。如果您将路径存储在模型`images/Ascalon_Wall_Ruins.jpg`中的`file`字段中，则可以直接将其放入模板中：

```
@for(item <- itemsList){
    <img src="http://domain.tld/@item.file" />
} 
```

当然你也可以在你的模型类中创建额外的方法来传递`ready-to-use`路径。

# ruby - 阻止对端口 8080 的直接访问

> ID：12019516
> 
> 赞同：1
> 
> 时间：2012-08-18T14:49:34.413
> 
> 标签：ruby, ruby-on-rails-3, unicorn

我有一个使用独角兽在 nginx 服务器后面的服务上运行的应用程序。

如果我访问[http://server.com](http://server.com)我得到了应用程序，启动并运行......但我仍然可以访问端口 8080 上的应用程序，如[http://server.com:8080](http://server.com:8080)但这一次，没有资产（这是由 nginx 服务）

如何阻止直接访问我的产品上的端口 8080。服务器？

服务器是 Ubuntu 12.04

**nginx.conf**

```
upstream unicorn {
  server 127.0.0.1:8080;
}

server {
  listen 80 default deferred;
  # server_name example.com; 
  root /home/deploy/current/public;

  location ^~ /assets/ {
    gzip_static on;
    expires max;
    add_header Cache-Control public;
  }

  try_files $uri/index.html $uri @unicorn;
  location @unicorn {
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header Host $http_host;
    proxy_redirect off;
    proxy_pass http://unicorn;
  }

  error_page 500 502 503 504 /500.html;
  client_max_body_size 4G;
  keepalive_timeout 10;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T20:21:46.967

让 unicorn 和 nginx 使用域套接字。对于 nginx：

```
upstream unicorn {
  server unix:/path/to/socket fail_timeout=0;
} 
```

然后将 '-l /path/to/socket' 传递给 unicorn，或更改您的 unicorn 配置文件：

```
listen '/path/to/socket' 
```

# ios - 检查 NSURL 是否是资产

> ID：12019519
> 
> 赞同：2
> 
> 时间：2012-08-18T14:50:33.353
> 
> 标签：ios, assets

我有一个 NSURL 类成员，它可以指向**本地文件**、**URL**或**资产**。我发现我必须使用资产库来加载资产，而不是：

```
[NSData dataWithContentsOfURL:nsurl]; 
```

所以我的问题是：**如何检查我的 NSURL 对象是否指向资产？**

我已经尝试过搜索，但我只有如何检查它是否是本地文件:(

PS：我的应用程序必须与 iOS4 兼容

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T15:19:32.930

假设 URL 格式正确，则它是资产库 URL iff `[[url scheme] isEqualToString:@"assets-library"]`。

# c# - 从客户端在服务器内存上运行程序

> ID：12019522
> 
> 赞同：0
> 
> 时间：2012-08-18T14:50:52.120
> 
> 标签：c#, .net, window, client-server

我的环境是 Windows 客户端服务器。我的服务器上有遗留数据库文件，需要更新同一服务器上的新数据库。我希望客户能够运行此过程。我的目标是尽量减少网络流量并利用服务器资源。客户端将启动转换应用程序，但应用程序将在服务器内存上运行。应用程序完成后，客户端应该会收到某种类型的回调。这可能吗？

我知道客户端可以使用远程桌面，但我希望让这个过程更加无缝。

谢谢，韦恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T20:06:11.603

我认为最好的方法是 WCF。但是您可以使用客户端直接连接到您的数据库并使用 SMO 执行 SQL 命令。看看[这些教程](https://stackoverflow.com/questions/6468850/good-book-to-learn-server-management-objects-smo-for-c-sharp-and-sql-server-20)

**编辑：** WCF 是一种说唱歌手技术，涵盖 ASMX Web 服务、.NET 远程处理、WSE、企业服务和系统。这些以前的技术各有优缺点，例如ASMX技术可能很好地实现了互操作性，但其性能可能并不理想。从性能角度来看，.NET 远程处理是一个不错的选择，但它不擅长互操作性。随着 WCF 的到来，您将拥有涵盖所有这些的技术。在我看来，它更容易实施。您可以通过多种方式托管您的服务。1-自托管。2-Windows 服务托管。3-IIS 托管 4-WAS（Windows 激活服务）托管。

> “使用 LINQ to Entities 进行 WCF 4.0 多层服务开发”

是一本入门 WCF 的完美书籍。

# c# - 获取 .net 应用程序的活动窗口

> ID：12019524
> 
> 赞同：2
> 
> 时间：2012-08-18T14:51:10.723
> 
> 标签：c#, .net, windows

我有一个名为 ProLaunch.exe 的应用程序。如果用户在指定时间段内没有执行任何操作，我想在其中获取活动窗口并关闭它。应用程序中的计时器将用于此目的。

如何获取活动窗口并关闭它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-18T15:01:01.833

如果我正确理解了这个问题，您可以为此使用 Win32 API [GetActiveWindow](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646292%28v=vs.85%29.aspx)。这应该适用于 Forms 和 WPF 应用程序。

```
[DllImport("user32.dll")]
static extern IntPtr GetActiveWindow();

[DllImport("user32.dll")]
public static extern int SendMessage(int hWnd, IntPtr msg, int wParam, int lParam);

public const int WM_SYSCOMMAND = 0x0112;
public const int SC_CLOSE = 0xF060;

// close the active window using API        
private void FindAndCloseActiveWindow()
{
 IntPtr handle=GetActiveWindow();
 SendMessage(handle, WM_SYSCOMMAND, SC_CLOSE, 0);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T14:59:45.593

尝试

```
Form.ActiveForm 
```

[http://msdn.microsoft.com/de-de/library/system.windows.forms.form.activeform.aspx](http://msdn.microsoft.com/de-de/library/system.windows.forms.form.activeform.aspx)

# c# - c#.net 中的 get、set 和 value 关键字

> ID：12019528
> 
> 赞同：12
> 
> 时间：2012-08-18T14:51:22.173
> 
> 标签：c#, .net

这里的`value`关键字是什么，它是如何将值分配给的`_num`？我很困惑，请给出以下代码的描述。

```
 private int _num;
    public int num
    { 
        get 
        {
            return _num;
        }
        set 
        {
            _num=value;
        }
    }

    public void button1_click(object sender,EventArgs e)
    {
        num = numericupdown.Value;
    } 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-18T14:52:28.440

在属性设置器的上下文中，`value`关键字表示分配给属性的值。它实际上是访问器的一个隐式参数`set`，就好像它是这样声明的：

```
private int _num
public int num
{ 
    get 
    {
        return _num;
    }
    set(int value)
    {
        _num=value;
    }
} 
```

属性访问器实际上是等价于这些方法：

```
public int get_num()
{
    return _num;
}

public void set_num(int value)
{
    _num = value;
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-18T14:54:10.023

[value 关键字](http://msdn.microsoft.com/en-us/library/a1khb4f8.aspx)是*上下文关键字*，即根据其上下文具有不同的含义。

在一个`set`块中，它仅仅意味着程序员设置它的值。例如，

```
className.num = 5; 
```

在这种情况下，`value`将等于 5*内部的`set`block*。所以你可以写：

```
set
{
    int temp = value; //temp = 5
    if (temp == 5) //true
    {
        //do stuff
    }
    _num = value;
} 
```

在`set`块之外，您可以将`value`其用作变量标识符，如下所示：

```
int value = 5; 
```

请注意，您**不能**`set`在块内执行此操作。

旁注：您应该将属性大写`num`为`Num`; 这是一个常见的约定，它使正在阅读您的课程的人更容易识别公共和私有属性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-02-06T13:46:57.590

`Properties`是您可以读取、写入或计算 a`private field`或的值的方式`class variable`。当代码将值分配给 or (class) 时，使用 a`set`内的`setter`or 。关键字的意思只是“被分配的东西”。`property``private field``variable``value`

```
 public class StaffMember 
    { 
        private int ageValue; 
        public int Age 
            { 
                 set 
                     { 
                         if ( (value > 0) && (value < 120) ) 
                             { this.ageValue = value; } 
                     } 
                 get { 
                      return this.ageValue; 
                     } 
            } 
    }
//Rob Miles - C# Programming Yellow Book 
```

# javascript - 制作一个基本的 Javascript 计算器

> ID：12019530
> 
> 赞同：2
> 
> 时间：2012-08-18T14:51:34.703
> 
> 标签：javascript, html

[jsfiddle 演示](http://jsfiddle.net/EptAN/1/)

忍受我，这里是新手。

我正在尝试制作一个简单的乘法计算器，作为 Javascript 的实验。

问题是——

1.  没有库，只有纯 JavaScript。
2.  Javascript 必须不显眼。

现在，问题出现了，它没有给出价值。

当我在本地执行此操作时，`answer`其值为`NaN`，并且如果您点击`Submit`它会保持这种状态，但是，如果您按下后退按钮，您会看到实际结果。

在 JSFiddle 中，没有显示很多内容，只是它根本不起作用。

请告诉我，是否有可能制作一个不显眼的计算器？如何？

（PS。我从[sciencebuddies](http://www.sciencebuddies.org/science-fair-projects/project_ideas/CompSci_p001.shtml)那里得到了一些帮助，只是为了看看基本的语法和东西，但我发现如果代码不突兀，就无法做到）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T15:11:10.230

我意识到您可能刚刚开始，不知道要包含什么、删除什么等等。但是，这里的好建议是，清楚地标记您的元素，以便您可以理解它们，并将其缩减为您需要的最小代码（甚至更少，以便您可以构建它）。

这是您的代码重做：

**HTML**

```
<div>
    <input type="text" id="multiplicand" value="4">
    <input type="text" id="multiplier" value="10">
    <button type="button" id="multiply">Multiply</button>
</div>
<p id="result">
    The product is: <span id="product">&nbsp;</span>
</p> 
```

**Javascript**

```
window.onload = function(){
    var button = el('multiply'),
        multiplicand = el('multiplicand'),
        multiplier = el('multiplier'),
        product = el('product');

    function el(id) {
        return document.getElementById(id);
    };

    function multiply() {
        var x = parseFloat(multiplicand.value) || 0,
            y = parseFloat(multiplier.value) || 0;

        product.innerHTML = x * y;
    }

    button.onclick = multiply;
}; 
```

[http://jsfiddle.net/userdude/EptAN/6/](http://jsfiddle.net/userdude/EptAN/6/)

一个稍微复杂的方法，加/减/乘/除：

[http://jsfiddle.net/userdude/EptAN/9/](http://jsfiddle.net/userdude/EptAN/9/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T15:08:39.090

您必须更改提交按钮，使其不提交表单。现在单击“提交”会导致表单提交到涉及页面重新加载的同一页面。

更改`<input type="submit" id="submitt">`为`<button type=button>`，它应该可以工作。

您可能一开始就可以不使用该`<form>`元素。这将停止在您的文本输入中单击输入以重新加载页面。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T03:06:12.127

您的示例有几个问题：

1.  表单仍然提交。JS更改值后，提交会导致页面重新加载，而您设置答案值所做的工作是浪费的。
2.  您正在尝试立即执行此操作。在标题中，还没有解析任何正文（因此，表单元素甚至不存在）。您需要等到页面加载完毕。
3.  脚本劫持`window.onload`. 如果页面上没有任何其他脚本，那很好......但是不显眼的 JS（IMO）的全部意义在于，无论脚本是否存在，都不会破坏任何内容。

固定，我们有一些类似的东西：

```
// Wrap this onload in an IIFE that we pass the old onload to, so we can
// let it run too (rather than just replacing it)
(function(old_onload) {

  // attach this code to onload, so it'll run after everything exists
  window.onload = function(event) {

    // run the previous onload
    if (old_onload) old_onload.call(window, event);

    document.getElementById('Xintox').onsubmit = function() {
      var multiplier = +this.multiplier.value;
      var multiplicand = +this.multiplicand.value;
      this.answer.value = multiplier * multiplicand;
      return false;  // keep the form from submitting
    };
  };​
})(window.onload); 
```

请注意，我将肉类代码附加到表单，而不是按钮，因为点击`Enter`任何一个因素框也会触发提交。如果需要，您仍然可以附加到按钮，只需添加一个返回 false 的提交处理程序。但是 IMO 这种方式更好——这种方式与 JS 一样，表单与不使用 JS 相同（假设服务器上的脚本适当地填充了框），除了它不需要往返服务器。

# solr - Solr 4 - 使用 group.facet 和 group.func 查询失败

> ID：12019537
> 
> 赞同：2
> 
> 时间：2012-08-18T14:53:06.347
> 
> 标签：solr, faceted-search, fieldcollapsing

当进行类似的搜索时

```
http://localhost:8983/solr/select?group=true&group.func=product(fildname1,fieldname2)&group.facet=true&facet=true&facet.field=fieldname3 
```

在通常返回方面的响应中返回错误：

```
java.lang.ArrayIndexOutOfBoundsException: 0 at org.apache.solr.request.SimpleFacets.getGroupedCounts(SimpleFacets.java:358) ... 
```

使用的功能可以是任何功能，而不仅仅是产品。如果省略 group.facet 或使用 group.field 代替 group.func，则不会出现此类错误。在计算分组方面时，似乎应该定义 group.field 参数。

问题：是否有另一种方法可以同时使用这两个查询功能，或者适当的解决方法，或者在 Solr 源代码中查看这个问题的提示？

这个问题来自[Solr Jira 问题 3742](https://issues.apache.org/jira/browse/SOLR-3742)。此问题与最近推出的 Solr 4 beta 有关。

# ajax - 无法使用 (Primefaces) p:ajax 调用更新 h:outputText 标记

> ID：12019539
> 
> 赞同：0
> 
> 时间：2012-08-18T14:53:07.347
> 
> 标签：ajax, jsf-2, primefaces

我想要用户在输入名称时更新手风琴面板的选项卡 id="tab4" 中的名称字段。给我一个错误`java.lang.IllegalArgumentException: out`- 选项卡的 id

```
 <ui:define name="contentBody">
        <h:form id="form2">

        <p:accordionPanel id="maintab" multiple="true">
        <p:tab title="New Order">
            <h:panelGrid columns="1" cellpadding="5"> 

            <p:tabView id="tabView">
                <p:tab title="Client" id="tab1">
                    <h:panelGrid columns="6" cellpadding="5">

                        <h:outputText value="Name " />
                        <p:inputText id="name" value="#{newOrderBean.name}">
                            <p:ajax update=":form2:maintab:out:name_id" />
                        </p:inputText>

                    </h:panelGrid>
                </p:tab>
            </p:tabView>

            </h:panelGrid>
        </p:tab>

        <p:tab id="out" title="View Deatails">
            <h:panelGrid id="panelgrid" columns="3" cellpadding="5">
                <p:panel id="panel1" header="Client" style="width:200px;height:200px" >
                    <h:panelGrid id="grid1" columns="1">  
                        <h:outputText id="name_id" value="#{newOrderBean.name}" />
                    </h:panelGrid>
                </p:panel>

            </h:panelGrid>
        </p:tab>
        </p:accordionPanel>

        </h:form>
    </ui:define> 
```

您能否还澄清一下我需要将组件放入单独表单的情况，因为现在我将整个页面放入单个表单标签中。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T16:54:13.980

解决了！使用此代码：

```
<h:outputText value="Name " />
<p:inputText id="name" value="#{newOrderBean.name}">
    <f:ajax event="keyup" render=":form2:maintab:name_id" />
</p:inputText> 
```

# visual-studio-2010 - 如何使 Visual Studio 2010 正确包含 Windows DDK 7.1.0 文件？

> ID：12019541
> 
> 赞同：1
> 
> 时间：2012-08-18T14:53:34.173
> 
> 标签：visual-studio-2010, wdk

我正在尝试构建一个由目前在 VS2010 中擅离职守的其他人编写的 VS 2008 项目。我需要有关 WinDDK 的帮助，尤其是 hidsdi.h。

我已经在全新安装的 Win7 上安装了 WinDDK 和 VS2010。在属性 -> VC++ 目录 -> 包含目录中，我添加了 C:\WinDDK\7600.16385.1\inc\api，以及 \ddk 和 \crt。在属性 -> VC++ 目录 -> 库目录中，我添加了 C:\WinDDK\7600.16385.1\lib\win7\i386。

但是，当我尝试构建项目时，重复出现“错误 C3861：'HidD_SetOutputReport'：找不到标识符”和“错误 C3861：'HidD_GetInputReport'：找不到标识符”的实例

`hidsdh.h`我从以下代码块打开：

```
extern "C" 
{
#include "setupapi.h" 
#include "hidsdi.h" 
} 
```

错误报告中列出的函数存在于相关的头文件中。显然，我在包含路径上做错了。一些帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T19:26:16.210

您不能定义 NTDDI_VERSION 或者您没有正确定义它。正如您在 hidsdi.h 中看到的，HidD_SetOutputReport 的定义取决于此：

```
#if (NTDDI_VERSION >= NTDDI_WINXP) 
```

NTDDI_VERSION 确定您要支持的 Windows 版本。可以在[此处找到适当的值。](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383745%28v=vs.85%29.aspx)

# r - 在 n 个停靠点内生成节点的 OD 列表

> ID：12019543
> 
> 赞同：0
> 
> 时间：2012-08-18T14:53:42.477
> 
> 标签：r, igraph

我有一个图 G(V,E)，边数是 35000，节点数是 3500，
无论如何我可以在每个节点的 n（比如 4）站内生成一个起点-终点列表吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T20:10:05.087

我认为函数[neighbor()](http://igraph.sourceforge.net/doc/R/neighborhood.html)正是你想要的。将 order 参数设置为 4，对于每个顶点，您将获得一个顶点 id 的向量，这些顶点距离它最多 4 步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T18:13:08.310

我想通了：
利用邻接矩阵 A 的性质，A^n 的第 i 行第 j 列的条目给出了从顶点 i 到顶点 j 的长度为 n 的（有向或无向）游走的数量。所以对于n个stop，构造n个矩阵An，A(n-1)......A1，其中，An=A^n。那么**An,An-1....A1 的并集**应该是表示起点的 n 个可到达目的地的矩阵。

# android - 无法向通过应用内结算的 Google Play 订单收取费用

> ID：12019546
> 
> 赞同：4
> 
> 时间：2012-08-18T14:53:52.680
> 
> 标签：android, in-app-billing, google-checkout

我已经在我的应用中添加了应用内计费，并且在 Android 端似乎一切正常。但是即使状态为chargeable，Google Checkout 中的订单也无法收费，因为Charge Order 按钮被禁用。除此之外，关于订单的一切似乎都是正确的。

Dungeons 示例应用程序也发生了同样的事情，所以我在这一点上有点卡住了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T21:20:23.880

你提供的关于你的问题的信息很少。

您使用的购买类型是什么？如果它们是“按用户帐户管理”，那么它们只能为给定用户购买一次。也许收费曾经成功，现在被阻止（在这种情况下，您应该使用“非托管”购买）

或者也许我完全错了，你应该给我们一些额外的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T13:10:39.063

销售 Android 应用程序时，您不使用充电按钮。充电会自动进行。

也许在 Google Play 上销售的其他商品有 Charge 按钮，但对于软件销售来说，它是无用的，因此它是灰色的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T18:39:45.683

值得一读：[应用内计费](http://developer.android.com/guide/google/play/billing/index.html)。

在 Google 结帐方面，此问题的一个潜在原因是购买欺诈检测等存在延迟期（来源[“收费订单”按钮变灰](http://productforums.google.com/forum/#!topic/checkout-merchant/Zk-q33phkhw)）。在此处阅读更多内容：[应用内结算和 Google Checkout 设置](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/wBCXZa--xtI)。在此期间，“充电订单”按钮通常呈灰色显示。

我猜这不是你的问题，因为它已经解决了。在[无法按下收费订单按钮但订单是收费](https://www.google.com/search?q=google+android+charge+order&sugexp=chrome,mod=11&sourceid=chrome&ie=UTF-8)的最相关点之一给出为

> @sounddoctorin：如果您单击订单详细信息，您会看到原因 - 订单可能处于“正在审核”等待处理状态。
> 
> 关键是，如果您无法单击“收费”按钮，则意味着订单仍因某种原因处于待处理状态。

有关电荷状态的更多信息，请访问[“了解秩序状态”](https://developers.google.com/checkout/developer/Google_Checkout_Basic_HTML_Order_States)。

如果这仍然无助于解决您的问题，我会考虑找出它行为不端的原因。你还能收集到哪些其他数据？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T14:36:12.543

是的，除非您的应用已发布或您将自己注册为测试用户，否则 Google 会阻止您收费。

测试用户可以在应用程序未发布时进行搜索。

# php - 插入 mysql 的值与查询字符串中的值不同

> ID：12019550
> 
> 赞同：4
> 
> 时间：2012-08-18T14:54:20.747
> 
> 标签：php, mysql

我正在使用 facebook api 来获取用户的 facebook id，然后将其插入 mysql。它在大多数情况下工作正常。但是，出于某种奇怪的原因，插入到我的数据库中 fb_id 列的值与应该插入到查询字符串中的值不同。我的代码如下：

```
$facebook = new Facebook(array(
'appId' => '12345',
'secret' => '12345',
'cookie' => true
));

$access_token = $facebook->getAccessToken();

if($access_token != "") 
{
$user = $facebook->getUser();

if($user != 0)
{
        $user_profile = $facebook->api('/me');   

        $fb_id = $user_profile['id'];
        $fb_first_name = $user_profile['first_name'];
        $fb_last_name   $user_profile['last_name'];
        $fb_email = $user_profile['email'];

    $img_data = file_get_contents('https://graph.facebook.com/'.$fb_id.'/picture?type=large');
    $save_path = 'img/profile_pics/large/';

        file_put_contents(''.$save_path.''.$fb_id.'.jpg', $img_data);

    $insert =   "INSERT INTO users 
            (first_name, last_name, email, photo, fb_id, accuracy_rate, date_joined, date_joined_int) 
                 VALUES 
            ('".$fb_first_name."', '".$fb_last_name."', '".$fb_email."', '".$fb_id.".jpg', '".$fb_id."', '100', '".date("F j, Y")."', '".idate("z")."')";
    $result = mysql_query($insert)or die(mysql_error());
}
} 
```

插入数据库的值为“2147483647”。正确的值应该是“100000034641562”。奇怪的是，标题为“photo”的列应该填充一个等于“”.$fb_id.“.jpg”的值。基本上，facebook id 的末尾只有一个“.jpg”。该列中插入了正确的值（100000034641562.jpg）。但是， fb_id 列不是。我想也许我必须调整列长度的排序规则，但这不是问题。

有任何想法吗？

谢谢，

槊

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-18T14:59:18.343

您正在达到数据类型的限制，即[2147483647](http://en.wikipedia.org/wiki/2147483647)`INT`的32 位。您需要将列的数据类型更改为 a或更大的整数值，例如.`VARCHAR()``BIGINT`

```
ALTER TABLE users MODIFY fb_id BIGINT; 
```

查看[MySQL 的有关整数数据类型的文档以](http://dev.mysql.com/doc/refman/5.0/en/integer-types.html)了解相关限制。

对于一些幽默的背景，请在 The Daily WTF[阅读这个故事。](http://thedailywtf.com/Articles/Confessions-The-Phone-Number.aspx)

# java - java 7中文件系统的含义是什么？

> ID：12019553
> 
> 赞同：1
> 
> 时间：2012-08-18T14:54:52.090
> 
> 标签：java, java-7

它是按字母顺序排列的文件（目录）的集合吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T14:58:13.190

文件系统定义

1.  一组根目录（例如`/`，在 Unix 上；`C:\`在`D:\`Windows 上）
2.  一种组合路径和路径列表的方法`/`和`:`vs`\`和`;`
3.  文件权限的定义
4.  元数据的定义，例如构成隐藏文件的内容
5.  一种用于创建、枚举、操作和访问文件的机制
6.  一种在文件更改时注册通知的方法

最后两个特别重要，因为 Java7 的新 IO 包允许您虚拟化文件系统。应用程序可以实现自己的文件系统，而不是处理底层操作系统的文件系统。当您想将测试与实际文件系统的依赖项分开时，这对于测试特别有用。

# java - 学习EJB及优势

> ID：12019560
> 
> 赞同：0
> 
> 时间：2012-08-18T14:55:43.443
> 
> 标签：java, ejb, ejb-3.0

我想学习 EJB，我正在寻找其他 EJB 专家的见解和意见。

我想知道以下内容

```
1) What are the advantages of using EJB?
2) When do we have to use EJB? 
```

如果我使用 JDBC 从 java 中获取、写入和数据库验证，我如何才能有效地使用 EJB？

计划学习 EJB，不使用 JPA，我可以在 Web 应用程序中使用 EJB 吗？

任何帮助都是非常可观的。

问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T14:59:53.457

> 1) 使用 EJB 有什么好处？

*   依赖注入
*   自动生命周期
*   开箱即用的线程安全
*   自动交易划界
*   简单的 AOP 支持
*   易于部署

> 2) 我们什么时候必须使用 EJB？

我们不必这样做*，*但在实现任何类型的可扩展服务器时，这是一个明智的选择，通常使用 HTTP（Web、SOAP、REST）访问

> 如果我使用 JDBC 来获取数据，[...]，我如何才能有效地使用 EJB？

EJB 容器将为您注入`DataSource`您的 EJB，从现在开始由您决定。EJB 规范不提供对纯 JDBC 的任何支持，只有 JPA。

# jquery - 为什么jQuery会自己完成标签

> ID：12019563
> 
> 赞同：4
> 
> 时间：2012-08-18T14:56:05.523
> 
> 标签：jquery

我正在尝试将标签与其他具有**A**和**B**类的 div 标签封装在一起。这是我的最终结果应该是这样的：

```
<div class="A">
    <div class="B">
      **<div class="C"></div>**
    </div>
</div> 
```

我正在使用以下代码来做到这一点：

```
<script>
    jQuery('<div class="A"><div class="B">').insertBefore('.C');
    jQuery('</div></div>').insertAfter('.C');
            </script> 
```

但是，代码如下：

```
<div class="A">
  <div class="B">
  </div>
</div>
<div class="C">
</div> 
```

这显然不是我的本意。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T15:01:05.297

[`wrap`](http://api.jquery.com/wrap/)是您需要的功能，因为您想在现有标签周围*包装*两个标签，而不是在它之前或之后插入新标签：`div`

```
$('.C').wrap('<div class="A"><div class="B"></div></div>'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-18T15:01:58.153

您可以使用以下`wrap()`方法：

> 围绕匹配元素集中的每个元素包裹一个 HTML 结构。

```
$('.C').wrap('<div class="A"><div class="B"></div></div>'); 
```

[小提琴](http://jsfiddle.net/Fzh52/5/)

[注意`jQuery('</div></div>').insertAfter('.C');`不生成html标签。]

* * *

我的回答得到了一位匿名反对者的反对，这肯定是因为我曾经使用过`$('.C').wrap('<div class="A"/>')`，而一位评论者也说它已经坏了。这是部分[`jQuery documention`](http://api.jquery.com/wrap/)：

考虑以下 HTML：

```
<div class="container">
  <div class="inner">Hello</div>
  <div class="inner">Goodbye</div>
</div> 
```

使用，我们可以在内部元素`.wrap()`周围插入一个 HTML 结构，如下所示：`<div>`

```
$('.inner').wrap('<div class="new" />'); 
```

新`<div>`元素是*动态创建并添加到 DOM 中的*。结果是`<div>`每个匹配元素的新包装：

```
<div class="container">
  <div class="new">
    <div class="inner">Hello</div>
  </div>
  <div class="new">
    <div class="inner">Goodbye</div>
  </div>
</div> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-18T15:01:52.873

你的电话不正确

应该

```
<div class="C">Some Text</div>

<script type="text/javascript">
  $(function(){
     $(".C").wrap($("<div class='A' />")).wrap($("<div class='B' />"));​
  });
</script> 
```

您没有在第一次调用 A 类 div 时关闭，因此您留给 jquery 处理它，因为开发人员实现了 innsertAfter 方法。

工作示例[http://jsfiddle.net/mjaric/kZSTu/1](http://jsfiddle.net/mjaric/kZSTu/1)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T15:03:32.627

它可能不是 jQuery，而是呈现它的浏览器。我已经看到 Chrome 的检查器渲染结束标记，我在原始标记中忘记了它们。

看起来您实际上想要使用该[`wrap()`](http://api.jquery.com/wrap/)功能。

您的脚本如下所示：

```
$('.C').wrap(function () {
  return '<div class="A"><div class="B">';
}); 
```

# sql-server - 如何从一个 SQL DB 查询并插入到同一服务器上的另一个 SQL DB 表中？

> ID：12019571
> 
> 赞同：-2
> 
> 时间：2012-08-18T14:56:37.267
> 
> 标签：sql-server, insert

我在同一台服务器上有以下数据库：

```
[DB1].[TableA] with columns [zipcode] and [city]
[DB2].[TableB] with columns [zipcode] and [city] 
```

如何查询（例如，5 个最大的邮政编码）`DB1.TableA`并将这些行插入`DB1.TableB`？

***已解决的更新***

我发现了为什么我的查询没有工作。我使用的是 SQL Azure 数据库，不支持跨数据库查询。必须将数据查询到我的 C# 逻辑中，然后将该数据放入另一个数据库表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T15:05:18.090

尝试这个：

```
INSERT INTO [DB2].[TableB] (ZipCode)
  SElECT TOP 5 ZipCode FROM [DB1].[TableA] ORDER BY ZipCode desc 
```

# algorithm - 第一次平衡树 - 菜鸟问题

> ID：12019575
> 
> 赞同：1
> 
> 时间：2012-08-18T14:57:39.893
> 
> 标签：algorithm, tree, binary-tree

我开始研究如何平衡树木进行面试，我有一些问题

*   是否可以平衡正常的二叉树？如果是，应该使用哪种算法？
*   我是否必须使用 AVL 或红黑树才能获得平衡树？这些是如何工作的？您能否提供尽可能简单地解释这些内容的链接？

我读了一些关于旋转、重量的东西，但我现在有点困惑

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T15:20:00.293

嗯...... AVL 和红黑树是平衡的“正常二叉树”，并保持这种平衡（对于“平衡”的某些定义）。我不是计算机科学老师，无法对算法提出自己的解释，而且我猜您不是在寻找维基百科的剪切和粘贴:-)

现在，对于平衡二叉树：如果树是搜索树（即“排序”，但如果不是，则“平衡”并没有多大意义）你总是可以重新创建树。最简单的算法是使用一个数组，其中包含树中的所有元素，按排序顺序（很容易从中序遍历中获得）。然后围绕这个总体思路构建一个算法：

*   将数组的中间元素作为树的根。这将创建一个树节点，以及两个数组“left”和“right”，用于形成左右子树
*   递归地应用相同的算法从“左”数组和“右”数组创建一棵树。这两棵树成为父节点的子节点。

当数组具有偶数个元素时，您可能必须小心：没有明显的“中间元素”，并且删除两个候选者之一将创建不同大小的数组。我懒得进一步分析这是否可以抵消整个平衡的事情。

当然，每次更改树时都做这样的事情并不是一个好主意。你真的想为此使用像 AVL 这样的自平衡树。在创建树之后执行它也可能不是那么有用：您可以只使用数组本身并对其进行二进制搜索，而不是创建树。数组只是二叉树的另一种形式......

编辑：许多计算机科学家花费大量时间开发在某些情况下表现良好的数据结构和算法是有原因的。滚动你自己的平衡二叉树版本不太可能击败这些......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T15:20:22.433

> 是否可以平衡正常的二叉树？如果是，应该使用哪种算法？

`O(n)`您可以在其中**构建一个完整的树，并使用**[in-order traversal 中](http://en.wikipedia.org/wiki/Tree_traversal#Inorder_Traversal)的元素填充它。

它不能做得更好，因为在极少数情况下，BST 可能会衰减为链（链表），其中所有节点都有一个子节点为空。在这种情况下，访问中间的元素就是`O(n)`它本身。

> 我是否必须使用 AVL 或红黑树才能获得平衡树？

还有其他平衡树，例如[B+ 树](http://en.wikipedia.org/wiki/B+_tree)，以及其他数据结构（不是树），例如[跳过列表](http://en.wikipedia.org/wiki/Skip_list)。您可能想查看已知**[数据结构](http://en.wikipedia.org/wiki/List_of_data_structures)**的列表，尤其是[树部分](http://en.wikipedia.org/wiki/List_of_data_structures#Trees)。

> 这些是如何工作的？您能否提供尽可能简单地解释这些内容的链接？

我发现关于[AVL 树](http://en.wikipedia.org/wiki/AVL_tree)和[红黑](http://en.wikipedia.org/wiki/Red%E2%80%93black_tree)树的维基百科文章非常有用。如果你有一些具体的东西你不明白 - 你应该问。

另外：**尝试自己实现**平衡树（实现已知的树，而不是发明新的树 - 当然） - 非常适合教育目的，这样做 - 你肯定会理解它是如何工作的。

# ruby-on-rails - Ruby on Rails 按状态查找最后 x 个项目

> ID：12019576
> 
> 赞同：1
> 
> 时间：2012-08-18T14:58:00.260
> 
> 标签：ruby-on-rails

Arg，我是 RoR 新手，摸索着自己的方式，我在这里尝试过的每一种可能的合理组合都失败了 - 非常感谢指针：

所以我有物品和状态。一个项目有一个状态，由 status_id 引用：

```
class Status < ActiveRecord::Base
  has_many :items
end

Class Item < ActiveRecord::Base
  belongs_to :status
end 
```

状态可以是“待售”、“已删除”、“隐藏”、“已售”等。

在我网站的首页上，我一直在显示以随机顺序添加的最后 30 个项目：

```
<% latest_items = Items.last(30).shuffle %>
<% latest_items.each do |i| %>
  :
<% end %> 
```

但是，我只希望显示项目*状态*设置为在首页上显示的项目（例如，仅显示状态为“待售”或“已售出”的项目，但不显示“隐藏”）。

我可能想为项目添加未来状态，所以我更新了状态表以包含一个列 front_page，该列设置为 1 或 0，具体取决于它是否显示在 front_page 上。可以在首页显示多种状态。

我正在努力弄清楚如何引用这个 status.front_page 字段，并构建有限的 Items 数组。我已经尝试了很多东西，但没有任何效果。我是不是完全找错树了？

如果它有任何相关性，我正在使用 Ruby 1.9.2p320 / Rails 3.1.0.rc8

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T15:20:09.640

尝试使用`where`（条件）语句

```
Item.joins(:status).where(:statuses => {:name => ["For Sale", "Sold"]}).last(30) 
```

你也可以把它放到一个范围内

```
Class Item < ActiveRecord::Base
  scope :homepage_display, joins(:status).where(:statuses => {:name => ["For Sale", "Sold"]}).last(30)

# Then in your view
Item.homepage_display 
```

我还建议切换您的关联，项目不应该`belong_to`状态

# html - 将 div 边框与图像背景相结合

> ID：12019580
> 
> 赞同：2
> 
> 时间：2012-08-18T14:58:28.033
> 
> 标签：html, css, image, background, border

我想实现这样的目标：

![例子](../Images/f62d07307e8cc05d1d16c32ac830382c.png)

元素的宽度为 100%。我将只使用居中的角并与边框顶部结合：

```
.element { 
border-top: solid 1px #ccc ; 
background: url('../images/arrow.png') no-repeat center top; 
} 
```

但边界留在箭头内。我试图`up image background -1px`隐藏边框，但没有奏效。我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T15:10:52.843

我用一个额外的容器解决了它：

HTML：

```
<div class="first"><div class="second"></div></div>​ 
```

CSS：

```
.first {
    border-bottom: 5px solid #000;
    width:100px;
    height:100px;
    background-size: 20%;
    background-position:50% 105%;
    box-sizing: border-box;
}

.second {
    width:100%;
    height:104px;
    background: url(https://encrypted-tbn3.google.com/images?q=tbn:ANd9GcROusF7rh7H4mWpr8wQIllxWPAHHIShRyG62xp3qy2O4Av_NmNV) no-repeat;
    background-size: 20%;
    background-position:50% 100%;
}
​ 
```

jsfiddle：http: [//jsfiddle.net/AKpLT/](http://jsfiddle.net/AKpLT/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T15:03:54.433

如果您已经在创建图像，只需将整个图像制作成您想要的形状即可。让它足够长，以便它可以调整到您可能想要放入的任何合理长度元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T15:37:14.950

有趣的问题。这是一个人为的解决方案，使用`:before`选择器将图像绝对定位在边框上。有关工作示例，请参阅[此 jsfiddle 。](http://jsfiddle.net/kuaU6/1/)相关代码如下：

```
div {
    border: 1px solid red; /* For demo purposes it's red */
    position: relative;
}

div:before {
    content: url('http://i.stack.imgur.com/P3zMs.png');
    position: absolute;
    top: -1px;
    width: 100%;
    text-align: center;
    line-height: 1px;
} 
```

这是结果的屏幕截图：

![上述代码的结果](../Images/b085357f764f0de10316f1a29ec3142d.png)

**编辑：**选择器的[浏览器兼容性](https://developer.mozilla.org/pt-BR/docs/CSS/::before#Browser_compatibility)`:before`告诉我们它仅在 IE8 及更高版本中受支持。更糟糕的是，因为据我所知，即使在 IE9 中，伪元素的`content: url(...)`构造和`background-image`:before 似乎也不起作用。幸运的是，这应该属于优雅的贬低...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T16:09:14.810

像 Mash 我会使用另一个元素作为背景，但与 Mask 不同的是我会使用 CSS :before 或 :after 伪元素：

```
<h2>Heading</h2>

h2 {
    border-top: 1px solid #ccc;
    position: relative;
}

h2:after {
    background: url(IMAGE);
    content: " ";
    display: block;
    width: WIDTH-OF-IMAGE;
    height: HEIGHT-OF-IMAGE;
    position: absolute;
    left: 50%;
    top: -1px;
    margin-left: -WIDTH-OF-IMAGE/2;
} 
```

# c++ - 使用 C++ 递归合并排序的随机输出

> ID：12019581
> 
> 赞同：0
> 
> 时间：2012-08-18T14:58:35.797
> 
> 标签：c++, sorting, recursion, mergesort

我按照 Wikipedia 上详细介绍的这种递归[算法](http://en.wikipedia.org/wiki/Merge_sort)进行合并排序。

这是我想出的代码：

```
int* merge(int left[], int leftSize, int right[], int rightSize){
int result[leftSize + rightSize];   //The merged array
int resultPointer = 0;  //Index position of where to insert element
int leftPointer = 0;
int rightPointer = 0;

//While length of either of the lists is > 0
while((leftSize > 0) || (rightSize > 0)){

    cout << "Got here" << endl;
    //If length of both left and right lists is > 0
    if((leftSize > 0) && (rightSize > 0)){

        //Compare first elements from both lists and put smallest one in the result list
        if(left[0] < right[0]){
            result[resultPointer] = left[0];
            leftPointer++;
            leftSize--;
        }else if(right[0] < left[0]){
            result[resultPointer] = right[0];
            rightPointer++;
            rightSize--;
        }else{
            //if both elements are the same, put them both in the result list
            result[resultPointer] = left[0];
            leftPointer++;
            leftSize--;
            result[resultPointer++] = right[0];
            rightPointer++;
            rightSize--;
        }
        resultPointer++;    //Increment pointer to point to next empty element

    }else if(leftSize > 0){
        result[resultPointer] = left[0];
        leftPointer++;
        leftSize--;
    }else if(rightSize > 0){
        result[resultPointer] = right[0];
        rightPointer++;
        rightSize--;
    }

}

//int* resultList = result;

return result;
}

int* merge_sort(int list[], int size){

//If list has 1 element then it is sorted so just return that
if(size<=1){
    return list;
}

int middle = size/2;    //Get mid point of given list

//Create left and right arrays
int left[middle];
int right[size-middle];

for(int i = 0; i<size-middle; i++){

    if(i<middle){
        left[i] = list[i];
    }
    right[i] = list[i+middle];
}

//Recursively call merge sort to sort out the sublists
int* leftList = merge_sort(left, middle);
int* rightList = merge_sort(right, size-middle);

//Merge the sorted lists and return a fully sorted list

int* merged = merge(leftList, middle, rightList, size-middle);

return merged;
} 
```

结果输出只是一堆随机数（我认为当某些东西没有被初始化时会发生这种情况）。这个实现可能很愚蠢，但我仍然想知道这里出了什么问题。

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T15:04:44.490

您正在从指向局部变量的合并函数返回一个指针。当您从合并函数返回时，局部变量将超出范围。因此，您返回一个未指向任何有效内存的指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T15:04:28.640

您的合并函数正在返回一个指向局部变量的指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T15:49:52.897

您遇到的不仅仅是简单的初始化问题：
编译时出现以下错误：

```
> g++ -Wall -Wextra -pedantic merge.cpp  

merge.cpp: In function ‘int* merge(int*, int, int*, int)’:   
merge.cpp: 2: error: ISO C++ forbids variable-size array ‘result’  
merge.cpp:10: error: ‘cout’ was not declared in this scope  
merge.cpp:10: error: ‘endl’ was not declared in this scope  
merge.cpp: 2: warning: address of local variable ‘result’ returned  

merge.cpp: In function ‘int* merge_sort(int*, int)’:  
merge.cpp:62: error: ISO C++ forbids variable-size array ‘left’  
merge.cpp:63: error: ISO C++ forbids variable-size array ‘right’ 
```

其中我会说：

```
merge.cpp: 2: warning: address of local variable ‘result’ returned 
```

那个很关键。但你应该修复所有这些。

# bash - Bash 完成命令

> ID：12019586
> 
> 赞同：1
> 
> 时间：2012-08-18T14:59:31.333
> 
> 标签：bash, bash-completion

在我的职能中，我有

```
# Tab completion
if [ "$1" = "--complete" ]; then
    shift
    # Commands
    for line in $(compgen -ac "notes_$1" | sed 's/^notes_//'); do
        echo $line
    done
    # Notes
    for line in $(cd $NOTES_DIR; ls $1* 2>/dev/null); do
        echo $line
    done
    return 
```

这应该列出所有以 notes_ 开头的命令以及某个目录中的所有文件，并且在调用时会这样做`notes --complete`。但是，当我尝试使用制表符完成时

```
complete -C 'notes --complete "$COMP_LINE"' notes 
```

它只显示文件而不是命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T22:52:01.703

添加

```
echo "--$1--" 
```

后

```
shift 
```

问题是在

```
compgen -ac "notes_$1" 
```

内容不是你所期望的

我猜当你这样做时，*1 美元*有价值*票据*

```
$ notes <TAB> 
```

*并且您的PATH*中没有 notes_notes* 别名或命令

 *检查添加别名 notes_notesWHATEVER 并再次尝试自动完成*

# performance - Sql 的最后 4 个空格会损害 Sql Server 性能吗？

> ID：12019589
> 
> 赞同：3
> 
> 时间：2012-08-18T14:59:50.017
> 
> 标签：performance, sql-server-2008-r2

我遇到了一个奇怪的问题。也许这里有人可以帮助我。

我的 SQL Server 版本是 2008 R2。它在具有 24 个内核的服务器上运行。

我有 2 个查询字符串：

```
String SQL_1 = "select 
                   t.testconfig_id, t.minuteSequence, t.location_id, 
                   sum(t.vuPerNode) as totalVu, 
                   sum(t.backOffPctSum) / sum(t.recordNum) as avgBackOffPct
                from
                   (select
                       p.testconfig_id, p.minuteSequence, r.location_Id, 
                       SUM(p.activeCount) * 1.0 / COUNT(1) as vuPerNode,
                       SUM(p.backOffPct) as backOffPctSum, COUNT(1) as recordNum
                    from
                       loadtest_progress_in_minute p (nolock)
                    join 
                       loadtestRunrecord r (nolock) on p.test_id = r.test_id and p.nodeId = r.nodeId                                               
                    where
                       p.test_id = ? 
                    group by 
                       p.testconfig_id, p.minuteSequence, p.nodeId, r.location_id) t
                group by
                   t.testconfig_id, t.minuteSequence, t.location_id
                order by
                   t.testconfig_id, t.minuteSequence, t.location_id  option (maxdop 23)"

String SQL-2 = "select 
                   t.testconfig_id, t.minuteSequence, t.location_id, 
                   sum(t.vuPerNode) as totalVu, 
                   sum(t.backOffPctSum) / sum(t.recordNum) as avgBackOffPct
                from
                   (select
                       p.testconfig_id, p.minuteSequence, r.location_Id, 
                       SUM(p.activeCount) * 1.0 / COUNT(1) as vuPerNode,
                       SUM(p.backOffPct) as backOffPctSum, COUNT(1) as recordNum
                    from
                       loadtest_progress_in_minute p (nolock)
                    join 
                       loadtestRunrecord r (nolock) on p.test_id = r.test_id and p.nodeId = r.nodeId                                               
                    where
                       p.test_id = ? 
                    group by 
                       p.testconfig_id, p.minuteSequence, p.nodeId, r.location_id) t
                group by
                   t.testconfig_id, t.minuteSequence, t.location_id
                order by
                   t.testconfig_id, t.minuteSequence, t.location_id  option (maxdop 23)       " 
```

两个查询之间的唯一区别是 SQL-2 最后多了一个制表符。

我在同一环境中使用以下代码运行这两个查询：

```
PreparedStatemen ps = conn.prepareStatement(SQL_1);
//PreparedStatemen ps = conn.prepareStatement(SQL_2);

ps.setLong(1234);
ps.execute(); 
```

我发现代码片段中 2 个查询的性能有时非常不同。

`ps.excute()`此代码段中的 SQL_1 仅花费大约 10 秒。我看到 SQL_1 运行时 CPU 使用率很高。服务器的24个CPU全部使用。

但是`ps.excute()`同一代码段中的 SQL_2 大约需要 150 秒。SQL_2 运行时 CPU 使用率很慢。仅使用了 24 个 CPU 中的 2 个。

SQL_1 和 SQL_2 同时运行。

但上述观察并非总是如此。有时`ps.execute()`SQL_1 和 SQL_2 的性能是相同的。有时`ps.execute()`SQL_1 和 SQL_2 的性能和我上面描述的一样。

这就是我发现的。这很令人困惑。SQL 的最后一个空格会损害 SQL Server 的性能吗？

我认为这不是由 [SQL Server 2008 R2 中的空间降低性能中所述的自动参数化缓存引起的](https://stackoverflow.com/questions/6363970/space-in-sql-server-2008-r2-slows-down-performance)

因为我通过长时间无限循环调用代码片段得到了上述观察结果。

从wireshark我发现Microsoft JDBC会在SQL字符串和参数之间附加2个额外的制表符（1个制表符= 4个空格字符）字符，如下所示：

```
[20] [00] [20] [00] [20] [00] [20] [00] [20] [00] [20] [00][20] [00][20] [00] 
```

不知道是不是和我的问题有关。

谢谢。

**2012 年 8 月 20 日更新：**

我在 sql-server management studio 中执行了以下 3 个 sql。他们有相同的执行计划。但我有奇怪的发现：

```
declare @sql varchar(max);

set @sql='Declare @testId bigint;set @testId = 1234;select p.testconfig_id,        p.minuteSequence,r.location_Id, SUM(p.activeCount) * 1.0 / COUNT(1) as vuPerNode, SUM(p.backOffPct) as backOffPctSum, COUNT(1) as recordNum from loadtest_progress_in_minute p with( nolock,index(idx_loadtest_progress_in_minute_1) ) join loadtestRunrecord r ( nolock ) on p.test_id = r.test_id and p.nodeId = r.nodeId where p.test_id =  @testId group by p.testconfig_id, p.minuteSequence, p.nodeId, r.location_id option (maxdop 23)';
execute (@sql); 
```

这个sql的性能很差。大约需要 90 秒。只使用了 2 个 CPU。

```
Declare @sSQL nvarchar(2000);
Declare @paramDefine nvarchar(2000);
Declare @testId bigint;
set @testId = 1234;

set @sSQL = N'                  select              t.testconfig_id, t.minuteSequence, t.location_id, sum(t.vuPerNode) as totalVu,              sum(t.backOffPctSum) / sum(t.recordNum) as avgBackOffPct        from            (           select                  p.testconfig_id, p.minuteSequence, r.location_Id, SUM(p.activeCount) * 1.0 / COUNT(1) as vuPerNode,                 SUM(p.backOffPct) as backOffPctSum, COUNT(1) as recordNum           from                loadtest_progress_in_minute p        ( nolock )                 join                loadtestRunrecord r          ( nolock )                 on p.test_id = r.test_id and p.nodeId = r.nodeId            where               p.test_id = @P0             group by                p.testconfig_id, p.minuteSequence, p.nodeId, r.location_id          ) t                     group by            t.testconfig_id, t.minuteSequence, t.location_id        order by            t.testconfig_id, t.minuteSequence, t.location_id        option (maxdop 23)              ';
set @paramDefine = N'@P0 bigint';
execute sp_executesql @sSQL, @paramDefine, @P0 = @testId; 
```

这条 sql 在 management studio 中只需要大约 10 秒。所有 CPU 都已使用。

```
declare @p1 int
--set @p1=1
exec sp_prepexec @p1 output,N'@P0 bigint',N'                select                t.testconfig_id, t.minuteSequence, t.location_id, sum(t.vuPerNode) as totalVu,            sum(t.backOffPctSum) / sum(t.recordNum) as avgBackOffPct        from            (           select                  p.testconfig_id, p.minuteSequence, r.location_Id, SUM(p.activeCount) * 1.0 / COUNT(1) as vuPerNode,                 SUM(p.backOffPct) as backOffPctSum, COUNT(1) as recordNum           from                loadtest_progress_in_minute p        ( nolock )                 join                loadtestRunrecord r          ( nolock )                 on p.test_id = r.test_id and p.nodeId = r.nodeId            where               p.test_id = @P0             group by                p.testconfig_id, p.minuteSequence, p.nodeId, r.location_id          ) t                     group by            t.testconfig_id, t.minuteSequence, t.location_id        order by            t.testconfig_id, t.minuteSequence, t.location_id        option (maxdop 23)                      ',@P0=1234
select @p1 
```

这个sql性能很快。只需大约 10 秒。所有 CPU 都被使用。

**2012-8-21 更新**

直到现在，我还没有得到关于我所发现的最终明确的结论。因为windows world 没有打开，我们可能永远无法得到SQL Server 内部的细节。在这里，我只是解释一下我的发现。一些解释只是我的猜测。我希望它对其他人有帮助。

1）为什么我有时会在 JDBC 中获得两个类似 SQL 的不同性能（这些 SQL 是相同的，除了最后一个制表符是否存在）

我们的测试不是在孤立的环境中进行的。当我用 JDBC 测试这两个 SQL 时，其他进程也会同时执行最后一个制表符的 SQL。所以我们的测试结果会受到其他过程的影响。

性能不同的根本原因是他们选择了不同的执行计划。一个选择了具有良好parellesim的执行计划。另一个选择了parellesim不好的执行计划。因为所有其他进程都在执行带制表符的 SQL，所以不带制表符的 SQL 被视为新 SQL。因此在执行不带制表符的 SQL 时，它会根据记录的统计信息，根据典型参数值生成一个新的执行计划。也许典型值在第一次表现不佳。但是实际访问的参数值直方图可以刷新执行计划缓存。没有制表符的 SQL 仅在我的测试中使用。我的测试只使用参数值（1234）。SQL server 认为 SQL 经常访问 (1234)，并用实际最常访问的参数值 (1234) 刷新执行计划。所以性能变得很好。

当我切换回带有制表符的 SQL 时，SQL Server 将采用较旧的执行计划缓存。这个缓存可以被其他正在运行的进程引入并受到其他进程的影响。这个执行计划也是根据实际最流行的访问参数值生成的。但是这个值会受到其他进程的影响。所以它可能不是 (1234) 并且基于该值的执行计划不利于 (1234) 在性能上。这就是为什么有时带有制表符的 SQL 性能很差的原因。

因为有时我的带有制表符的 SQL 测试程序也可以刷新执行计划缓存，如果我的测试运行频繁到足以更改实际访问的参数值。有时带有制表符的 SQL 的性能也会变好。

2）为什么SSMS下面的SQL总是很慢

```
declare @sql varchar(max)

set @sql='Declare @testId bigint;set @testId = 36887;select p.testconfig_id, p.minuteSequence,r.location_Id, SUM(p.activeCount) * 1.0 / COUNT(1) as vuPerNode, SUM(p.backOffPct) as backOffPctSum, COUNT(1) as recordNum from loadtest_progress_in_minute p with( nolock,index(idx_loadtest_progress_in_minute_1) ) join loadtestRunrecord r ( nolock ) on p.test_id = r.test_id and p.nodeId = r.nodeId where p.test_id =  @testId group by p.testconfig_id, p.minuteSequence, p.nodeId, r.location_id option (maxdop 23)'
execute (@sql) 
```

因为 SSMS 也是根据记录统计的典型参数值生成执行计划。参数值（1234）是非典型值。所以上面的SQL一开始很慢。我猜 SSMS 中的“执行”命令很特殊，它的缓存不会被实际最常见的访问参数值刷新。所以总是很慢。根据我的实验结果，我猜 'sp_prepexec' 和 'sp_executesql' 与 'execute' 不同，它们的计划缓存可以通过实际最常见的访问参数值刷新，并且与 JDBC 具有类似的行为。

3）为什么添加重新编译提示会加快上述SQL的性能在回答这个问题之前，让我们看一下MSDN在线帮助文​​档中的以下文字。

“指示 SQL Server 数据库引擎在执行后丢弃为查询生成的计划，强制查询优化器在下次执行相同查询时重新编译查询计划。如果不指定 RECOMPILE，数据库引擎会缓存查询计划并重用它们. 编译查询计划时，RECOMPILE 查询提示使用查询中任何局部变量的当前值，如果查询在存储过程中，则将当前值传递给任何参数。

RECOMPILE 是创建使用 WITH RECOMPILE 子句的存储过程的有用替代方法，当必须重新编译存储过程中的查询子集而不是整个存储过程时。有关详细信息，请参阅重新编译存储过程。当您创建计划指南时，重新编译也很有用。”

请注意以下句子：编译查询计划时，RECOMPILE 查询提示使用查询中任何局部变量的当前值，如果查询在存储过程中，则将当前值传递给任何参数。

这意味着 RECOMPILE 查询提示改变了 SSMS 执行计划生成行为。SSMS 基于典型参数值生成执行计划，而没有 RECOMPILE 查询提示，而 SSMS 则基于当前参数值生成执行计划，并使用 RECOMPILE 查询提示。所以重新编译提示使执行计划非常适合当前参数值（1234）

一言以蔽之，执行计划是由复杂的因素选择的。我们必须仔细考虑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T18:18:31.367

首先，查询末尾的空格不会产生影响。除了延长传输和解析语句的时间之外，*无法想象*空白会在任何数据库中导致性能问题。SQL 引擎在编译阶段读取查询并生成执行计划。执行计划是运行的。在标记化查询字符串的第一步中会丢失额外的空白。据我所知，所有数据库引擎都是这样工作的。

在测试查询性能时，您需要处理导致性能变化的第一大原因：缓存。第二次运行查询时，它通常会更快，因为表已经在页面缓存中。

一种方法是在运行之间清除缓存。另一种是多次运行查询，而忽略第一次运行。

无论如何，您的第一个查询语法不正确，因此这可能与您所看到的有关。选择语句是：

```
select t.id1, t.sequence, t.id2, sum(t.vu) as totalVu,
       sum(t.backOffPctSum) / sum(t.recordNum) as avgBackOffPct 
```

分组依据是：

```
group by t.testconfig_id, t.minuteSequence, t.location_id 
```

变量 t.id1、t.sequence 和 t.id2 应该会在 SQL Server 或任何合理的数据库中导致编译时错误，因为它们既不在聚合函数中也不在 group by 子句中（这是对MySQL 中的隐藏列，这将允许这种语法）。

# shell - 我用于启动 NGiNX 的 shell 脚本不工作

> ID：12019603
> 
> 赞同：1
> 
> 时间：2012-08-18T15:02:35.437
> 
> 标签：shell, ubuntu, nginx, ubuntu-12.04

我在一本书中找到了这个小的 shell 脚本...... NGiNX 只是这个不起作用的脚本。因为每次我执行 /etc/init.d/nginx start （即文件所在的位置）时，它都会向我发送以下消息： 用法：/etc/init.d/nginx {start|stop|restart|reload}

出于测试目的，我添加了一个 echo "$1" 并在我执行此操作时向我发送 -e：/etc/init.d/nginx start 或其他任何内容...

我正在使用 Ubuntu 12.04。

```
#! /bin/sh
# Author: Ryan Norbauer http://norbauerinc.com
# Modified: Geoffrey Grosenbach http://topfunky.com
# Modified: Clement NEDELCU
# Reproduced with express authorization from its contributors
set –e
PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin
DESC="nginx daemon"
NAME=nginx
DAEMON=/usr/local/nginx/sbin/$NAME
SCRIPTNAME=/etc/init.d/$NAME
# If the daemon file is not found, terminate the script.
test -x $DAEMON || exit 0
echo "0"
d_start() {
$DAEMON || echo -n " already running"
}

d_stop() {
$DAEMON –s quit || echo -n " not running"
}

d_reload() {
$DAEMON –s reload || echo -n " could not reload"
}
echo "$1"
case "$1" in
    start)
            echo -n "Starting $DESC: $NAME"
            d_start
            echo "."
    ;;
    stop)
            echo -n "Stopping $DESC: $NAME"
            d_stop
            echo "."
    ;;
    reload)
            echo -n "Reloading $DESC configuration..."
            d_reload
            echo "reloaded."
    ;;
    restart)
            echo -n "Restarting $DESC: $NAME"
            d_stop
            # Sleep for two seconds before starting again, this should give the
            # Nginx daemon some time to perform a graceful stop.
            sleep 2
            d_start
            echo "."
            ;;
    *)
            echo "Usage: $SCRIPTNAME {start|stop|restart|reload}" >&2
            exit 3
    ;;
esac

exit 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T15:25:43.397

# python - 如何通过数据包嗅探记录浏览历史？

> ID：12019605
> 
> 赞同：1
> 
> 时间：2012-08-18T15:02:55.607
> 
> 标签：python, packet-sniffers

我想将我的浏览历史记录在一个单独的文件中。我想通过记录网络流量，特别是来自我的 PC 的 HTTP 获取请求来做到这一点。我想在 Python 中执行此操作，但我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T08:35:52.020

正如我所提到的，您可以使用[dsniff的](http://monkey.org/~dugsong/dsniff/)*urlsnarf*工具作为一个非常直接的解决方案。如果您不是在寻找严格的 Python 解决方案，您可以轻松地将其从 Python 包装起来。

要获得实时输出，您可以使用`subprocess`模块直接运行它：

```
import subprocess

p = subprocess.Popen('urlsnarf', stdout = subprocess.PIPE)
try:
    while True:
        l = p.stdout.readline()
        # ...
finally:
    p.terminate() 
```

但这将要求您的用户具有必要的数据包嗅探权限。如果您想以 root 身份运行它，最好单独运行 urlsnarf 并通过命名管道传输输出。

首先，具有 root 权限（在 shell 中）：

```
mkfifo /home/youruser/tmp/urlsnarf-pipe
chown youruser /home/youruser/tmp/urlsnarf-pipe
urlsnarf > /home/youruser/tmp/urlsnarf-pipe 
```

然后只需从 Python 脚本中读取管道（以您的用户身份运行）：

```
f = open('/home/youruser/tmp/urlsnarf-pipe', 'r')
while True:
    l = f.readline()
    # ... 
```

# c - 用于字符串匹配[Head First C] 的 C 代码似乎不起作用

> ID：12019607
> 
> 赞同：5
> 
> 时间：2012-08-18T15:03:03.627
> 
> 标签：c, pointers

```
#include <stdio.h>
#include <string.h>

char tracks[][80] = {
"I left my heart in Harvard Med School",
"Newark, Newark - a wonderful town",
"Dancing with a Dork",
"From here to maternity",
"The girl from Iwo Jima",
};

void find_track(char search_for[])
{
    int i;
    for (i = 0; i < 5; i++)
    {
        if (strstr(tracks[i], search_for))
        printf("Track %i: '%s'\n", i, tracks[i]);
    }

}
int main()
{
    char search_for[80];
    printf("Search for: ");
    fgets(search_for, 80, stdin);
    find_track(search_for);
    getch();
    return 0;

} 
```

这是直接取自 Head First C 的代码。这不起作用。另一方面，如果我更改 main 中的行

```
char search_for[80]; 
```

到

```
char *search_for = "town" 
```

它给了我预期的结果。我不明白为什么它不起作用。我知道直接粘贴代码并告诉您查找错误在这里不太可接受，但我想这是一小段基本代码，所以它会做。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T15:06:04.577

上面代码的问题在于它没有考虑**fgets 在 string 中留下换行符**的事实。因此，当您键入`town`并点击时`enter`，您最终会搜索`"town\n"`.

解决此问题的一种廉价方法是在调用后修复字符串`fgets`

```
search_for[strlen(search_for) - 1] = 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T15:23:56.093

正如@cnicutar 已经指出的那样， fgets 将换行符（代码 10）留在字符串中。您可以通过遍历 char 数组并打印字符代码并在 ASCII 代码表 (http://www.asciitable.com/) 中查找特殊字符来自己找到这一点：

```
int main()
{
    int i;
    char search_for[80];
    printf("Search for: ");
    fgets(search_for, 80, stdin);
    scanf("%79s", search_for);

    // print index, char code, char itself
    for (i=0;i<80;i++) {
        printf("%d: %d %c\n", i, search_for[i], search_for[i]);
    }
    find_track(search_for);
    getch();

    return 0;
} 
```

输出将是：

```
...
0: 116 t
1: 111 o
2: 119 w
3: 110 n
4: 10
5: 0 
... 
```

您可以使用函数“scanf”并将读取字符数限制为 79（字符串末尾为 NULL 字符保留 1 个字符，因为缓冲区最多可容纳 80 个字符）。请参阅：[http](http://www.cplusplus.com/reference/clibrary/cstdio/scanf/) ://www.cplusplus.com/reference/clibrary/cstdio/scanf/以供参考。

```
int main()
{
    char search_for[80];

    printf("Search for: ");
    scanf("%79s", search_for);

    find_track(search_for);

    return 0;
} 
```

# client - jboss 7.1.1 的远程 jms 客户端

> ID：12019611
> 
> 赞同：1
> 
> 时间：2012-08-18T15:03:45.187
> 
> 标签：client, jms

我正在尝试将在 SE 上下文中运行的独立远程 JMS 客户端与在不同服务器上运行的 JBoss 7.1.1 集成。现在，当我尝试获取 InitialContext 时它失败了。

我的问题是：

需要什么客户端库？我需要 jboss-as-jms-client-bom 中的所有罐子吗？有人可以提供一个设置主题订阅的简单示例。

这是我正在使用的代码：

```
 final Properties env = new Properties();
    env.put(Context.INITIAL_CONTEXT_FACTORY, "org.jboss.naming.remote.client.InitialContextFactory");
    env.put(Context.PROVIDER_URL, "remote://myremotehost:4447");
    env.put(Context.SECURITY_PRINCIPAL, "username");
    env.put(Context.SECURITY_CREDENTIALS, "password");
    Context initialContext = new InitialContext(env); 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T14:47:27.313

Hi you can find all dependencies with maven with just few clicks. Creates a Maven project and add the following dependency:

```
<dependency>
    <groupId>org.jboss.as</groupId>
    <artifactId>jboss-as-jms-client-bom</artifactId>
    <version>7.1.1.Final</version>
    <type>pom</type>
  </dependency> 
```

# python - 在列表理解中使用 .rjust() 进行字符串对齐 - 格式化工作不如预期

> ID：12019618
> 
> 赞同：2
> 
> 时间：2012-08-18T15:04:46.487
> 
> 标签：python, string, list, formatting, alignment

所以，我有这个代码：

```
def pairwiseScore(seqA, seqB):

    score = 0
    length = len(seqA)
    similarity = []

    for x in xrange(length):

        if seqA[x] == seqB[x]:
            if (x >= 1) and (seqA[x - 1] == seqB[x - 1]):
                score += 3
                similarity.append(x)
            else:
                score += 1
                similarity.append(x)                
        else:
            score -= 1

    return ''.join((seqA, '\n', ''.join(['|'.rjust(x) for x in similarity]), '\n', seqB, '\n', 'Score: ', str(score))) 
```

这是[本练习](http://www.pyschools.com/quiz/view_question/s3-q11)的解决方案。

它几乎可以正常工作，但是，当我执行时：

```
print pairwiseScore("ATTCGT", "ATCTAT"), '\n', '\n', pairwiseScore("GATAAATCTGGTCT", "CATTCATCATGCAA") 
```

我得到这个输出：

```
ATTCGT
||    |
ATCTAT
Score: 2 

GATAAATCTGGTCT
| |    |     |      |         |
CATTCATCATGCAA
Score: 4 
```

如您所见，这些管道*（或垂直条）*的格式不正确。

它应该如下所示：

```
>>> print pairwiseScore("ATTCGT", "ATCTAT")
ATTCGT
||   |
ATCTAT
Score: 2 
>>> print pairwiseScore("GATAAATCTGGTCT", "CATTCATCATGCAA")
GATAAATCTGGTCT
||  |||  |   
CATTCATCATGCAA
Score: 4 
>>> 
```

### 我的问题是：

这有什么问题：

```
''.join(['|'.rjust(x) for x in similarity] 
```

功能？我必须如何编辑它，以使这些管道在输出时格式化良好？干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T15:10:18.857

您的相似度值是条形的绝对位置，但是您使用 rjust() 函数的方式，它应该传递相对于前一个位置的位置。

例如，您可以在函数的底部执行此操作：

```
prev = -1
relative_similarity=[]
for x in similarity:
  relative_similarity.append(x-prev)
  prev=x

return ''.join((seqA, '\n', ''.join(['|'.rjust(x) for x in relative_similarity]), '\n', seqB, '\n', 'Score: ', str(score))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T19:21:58.210

所以，多亏了[Vaughn Cato](https://stackoverflow.com/users/951890/vaughn-cato)，我找到了解决方案。使用您的几行代码，我的方法终于奏效了，但没有通过最后一个测试用例->![在此处输入图像描述](../Images/c2350d0d7abaafc6903a285767daa515.png)

那是代码：

```
def pairwiseScore(seqA, seqB):

    prev = -1
    score = 0
    length = len(seqA)
    similarity = []
    relative_similarity = []

    for x in xrange(length):

        if seqA[x] == seqB[x]:
            if (x >= 1) and (seqA[x - 1] == seqB[x - 1]):
                score += 3
                similarity.append(x)
            else:
                score += 1
                similarity.append(x)                
        else:
            score -= 1

    for x in similarity:

        relative_similarity.append(x - prev)
        prev = x

    return ''.join((seqA, '\n', ''.join(['|'.rjust(x) for x in relative_similarity]), '\n', seqB, '\n', 'Score: ', str(score))) 
```

所以我修改了你的例子，并做了这个：

```
def pairwiseScore(seqA, seqB):

    score = 0
    bars = [str(' ') for x in seqA] #create a list filled with number of spaces equal to length of seqA string. It could be also seqB, because both are meant to have same length
    length = len(seqA)
    similarity = []

    for x in xrange(length):

        if seqA[x] == seqB[x]: #check if for every index 'x', corresponding character is same in both seqA and seqB strings
            if (x >= 1) and (seqA[x - 1] == seqB[x - 1]): #if 'x' is greater than or equal to 1 and characters under the previous index, were same in both seqA and seqB strings, do..
                score += 3
                similarity.append(x)
            else:
                score += 1
                similarity.append(x)                
        else:
            score -= 1

    for x in similarity:
        bars[x] = '|' #for every index 'x' in 'bars' list, replace space with '|' (pipe/vertical bar) character 

    return ''.join((seqA, '\n', ''.join(bars), '\n', seqB, '\n', 'Score: ', str(score))) 
```

并且此代码通过了 s3-q11 练习中的所有测试用例。Sooo，我想我得到了解决方案，我已经完成了。

谢谢和欢呼:)

# objective-c - Objective-c核心图形绘制旋转图像不起作用

> ID：12019620
> 
> 赞同：1
> 
> 时间：2012-08-18T15:05:14.577
> 
> 标签：objective-c, quartz-2d, cg

我正在尝试使用以下代码绘制旋转图像

```
CGLayerRef layer=CGLayerCreateWithContext(context,CGSizeMake(brush.size.width*2,brush.size.height*2), NULL);
CGContextRef tmp=CGLayerGetContext(layer);
CGContextDrawImage(tmp,CGRectMake(brush.size.width/2, brush.size.height/2, brush.size.width, brush.size.height), brush.CGImage);

CGContextSetFillColorWithColor(tmp, [UIColor clearColor].CGColor);
CGContextSetBlendMode(tmp, kCGBlendModeClear);
CGContextFillRect(tmp, CGRectMake(0, 0, 2*brush.size.width, 2*brush.size.height));
CGContextSetBlendMode(tmp, kCGBlendModeNormal);
CGContextTranslateCTM(tmp, -brush.size.width/2, -brush.size.height/2);
CGContextRotateCTM(tmp, angle);
CGContextTranslateCTM(tmp, brush.size.width/2, brush.size.height/2);
CGContextDrawImage(tmp,CGRectMake(brush.size.width/2, brush.size.height/2, brush.size.width, brush.size.height), brush.CGImage); 
```

我想将图像放在图层的中心（图像是正方形）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T19:30:48.913

尝试旋转然后平移

# python - 使用 python 和 selenium 查找文本和元素？

> ID：12019627
> 
> 赞同：2
> 
> 时间：2012-08-18T15:05:55.997
> 
> 标签：python, selenium

当我转到某个网页时，我试图找到某个元素和一段文字：

```
<span class="Bold Orange Large">0</span> 
```

这不起作用：（它给出了复合类名称或其他东西的错误......）

```
elem = browser.find_elements_by_class_name("Bold Orange Large") 
```

所以我尝试了这个：（但我不确定它是否有效，因为我不太了解在 selenium 中执行 css 选择器的正确方法......）

```
elem = browser.find_elements_by_css_selector("span[class='Bold Orange Large']") 
```

一旦我找到 span 元素，我想找到里面的数字......

```
num = elem.(what to put here??) 
```

任何有关 css 选择器、类名和查找元素文本的帮助都会很棒！

谢谢。

编辑：

我的另一个问题是有多个确切的跨度元素，但里面有不同的数字..我该如何处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T19:39:54.360

你对css选择器的使用是正确的！您的第一次尝试也失败了，因为类名中有空格，而 selenium 似乎根本无法找到带有空格的独立标识符。我认为这是一个糟糕的开发实践，所以这不是你的问题。Selenium 本身不包含 html 编辑器，因为它之前已经完成。

尝试在这里查看：[如何在保留 html 标签/结构的同时查找/替换 html 中的文本](https://stackoverflow.com/questions/1856014/how-to-find-replace-text-in-html-while-preserving-html-tags-structure)。

这个也是相关且流行的：[RegEx match open tags except XHTML self-contained tags](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)

# c++ - 模板类方法语法

> ID：12019629
> 
> 赞同：0
> 
> 时间：2012-08-18T15:06:17.803
> 
> 标签：c++, templates, syntax

在以下示例中：

```
template<class Foo>
struct FooBar 
{
   FooBar(Foo *pObj = 0) : pFoo_(pObj) {}
}; 
```

“*pObj = 0”是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T15:09:54.263

这意味着`pObj`，如果调用者不提供，默认值为`0`。在这种特殊情况下，使用它会更好`NULL`（通常是 的宏`0`）。现在有两种调用方式：

```
FooBar fb = FooBar(); //pObj is NULL
FooBar fb2 = FooBar(someFoo); //pObj is someFoo 
```

# php - 图像加载后，PHP foreach 会立即回显

> ID：12019631
> 
> 赞同：0
> 
> 时间：2012-08-18T15:06:55.067
> 
> 标签：php, wordpress, foreach

我目前有一些 php 代码可以获取随机 Wordpress 帖子的缩略图，但问题是当我运行它时，在下载每个图像之前，没有图像显示。我想知道是否有办法回显图像然后转到下一个。谢谢。

```
 <?php
                    $args = array( 'numberposts' => 25, 'orderby' => 'rand' );
                    $rand_posts = get_posts( $args );
                    foreach( $rand_posts as $post ) : ?>
                    <?php $url = wp_get_attachment_url( get_post_thumbnail_id($post->ID) );?>
                    <li id="photo-<?php the_ID(); ?>" class="visible scroll-content-item ui-widget-header"><a href="<?php the_permalink(); ?>"><img width="80" height="80" src="<?php echo $url; ?>" class="attachment-small-grid wp-post-image" alt="<?php the_title(); ?>" title="<?php the_title(); ?>" /></a> </li>
                    <?php endforeach; ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T15:09:44.467

PHP 无法告诉您图像何时下载，因为它是一种服务器端语言。您必须使用 javascript 来编写基于浏览器事件的代码，例如图像加载。

www.farinspace.com/jquery-image-preload-plugin/

该 jQuery 插件将让您根据*每个*图像加载执行功能，然后在*所有*图像加载...我可能会从那里开始。

# xml - 使用提升将 xml 转换为 Json 行为很奇怪

> ID：12019633
> 
> 赞同：4
> 
> 时间：2012-08-18T15:07:05.003
> 
> 标签：xml, json, scala, xml-serialization, lift

我正在使用 scala / lift 作为 Rest API。在后台，我正在生成 xml，它将通过 Xml.toJson() 作为输出转换为 json。

现在我注意到一些让我发疯的奇怪行为。

例如，我有以下 xml：

```
<data>
<item>
    <foo>1</foo>
    <bar>1</bar>
</item>
<item>
    <foo>2</foo>
    <bar>2</bar>
</item>
</data> 
```

xml.toJson() 的结果如下所示：

```
JObject(
List(
    JField(
        data,JObject(
            List(
                JField(item,
                JArray(
                    List(
                        JObject(
                            List(
                            JField(foo,JString(1)), 
                            JField(bar,JString(1)))
                        ), 
                        JObject(
                            List(
                            JField(foo,JString(2)), 
                            JField(bar,JString(2))
                            )
                        )
                    )
                )
                )
            )
        )
    )
)
) 
```

但是如果我添加一个新的 xml 元素：

```
<data>
<baz>234</baz>
<item>
    <foo>1</foo>
    <bar>1</bar>
</item>
<item>
    <foo>2</foo>
    <bar>2</bar>
</item>
</data> 
```

JArray 的结果不同：

```
JObject(
List(
    JField(data,JObject(
        List(
            JField(baz,JString(234)), 
            JField(item,JObject(
                List(
                    JField(foo,JString(1)), 
                    JField(bar,JString(1))
                ))
            ), 
            JField(item,JObject(
                List(
                    JField(foo,JString(2)), 
                    JField(bar,JString(2))
                ))
            )
        )
    ))
) 
```

)

数组未定义，我有两个名为“item”的对象。这是正常行为吗？我希望数组不围绕“项目”标签进行包装。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T00:26:42.477

是的，这是预期的行为：如果它们都具有相同的名称，`net.liftweb.json.Xml`则只会将子元素分组到 a中。`JArray`您可以尝试通过操作生成的 JSON 来解决此问题：

```
JObject(
  (json \ "data").asInstanceOf[JObject].obj.groupBy(_.name).map {
    case (_, v :: Nil) => v
    case (k, vs)       => JField(k, JArray(vs.map(_.value)))
  }.toList
) 
```

但这里至少有几个潜在的问题：

1.  我们正在使用`groupBy`，因此我们最终可能会重新排列子元素的顺序。
2.  如果只有一个`item`，它不会被包裹在一个`JArray`.

根据您的关心程度，您可以编写解决这些问题的方法，但这几乎肯定不值得。只需忽略`net.liftweb.json.Xml`并从 Scala 数据结构生成 XML 和 JSON。

# r - 无法在 R 中向向量添加常量

> ID：12019635
> 
> 赞同：2
> 
> 时间：2012-08-18T15:07:36.573
> 
> 标签：r, vector, constants

我不知道发生了什么，但我似乎无法向向量添加常数。例如，在控制台中键入 c(1,2,3,4)+5 返回 15 而不是 (6,7,8,9)。我究竟做错了什么？感谢您的帮助。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-18T15:13:01.830

有人……可能你……重新定义了“+”函数。这很容易做到：

```
> `+` <- function(x,y) sum(x,y)
> c(1,2,3,4)+5
[1] 15 
```

这很容易修复，只需使用`rm()`：

```
> rm(`+`)
> c(1,2,3,4)+5
[1] 6 7 8 9 
```

编辑：评论（提出了`c`被重新定义为的替代可能性`sum`）提示我添加有关如何检查和从替代可能性中恢复的信息。您可以使用两种方法来确定表达式中的两个函数中的哪一个`c(1,2,3,4) + 5`是罪魁祸首。可以输入他们的名字（用反引号括起来`+`），并注意你是否得到了正确的定义：

```
> `+`
function (e1, e2)  .Primitive("+")
> c
function (..., recursive = FALSE)  .Primitive("c") 
```

使用`rm`罪魁祸首（上面不匹配的那个）仍然是最快的解决方案。使用全局 rm 是会话中的大脑擦除：

```
rm(list=ls())  
# all user defined objects, including user-defined functions will be removed 
```

退出和重新启动的建议在某些情况下不起作用。如果您退出并保存，则将保留当前函数定义。如果您之前从发生重新定义的会话中退出并保存，那么不在此会话中保存也不会解决问题。先前会话的结果保存在名为“.Rdata”的文件中，该文件对 Mac 和 Windows 用户均不可见，因为 OS 文件查看器（Mac 的 Finder.app 或 MS 的 Windows 资源管理器）不会显示以“开头的文件名”点”。我怀疑 Linux 用户默认情况下会看到它们，因为使用`ls`在终端会话中将显示它们。（很容易找到在 Mac 中更改该行为的方法，这就是我运行设备的方式。）删除 .Rdata 文件在这种情况下以及在 R 会话在启动时崩溃的情况下很有帮助。

# php - 如何从php下载文件，当它作为TEXT而不是blob存储在mysql表中时？

> ID：12019636
> 
> 赞同：1
> 
> 时间：2012-08-18T15:07:37.913
> 
> 标签：php, mysql, download

我还希望能够格式化扩展名，例如添加 .xml 或其他内容。我知道如何下载一个包含所有文件大小、名称等（更改标题）的 blob 文件，但我是否只需要一个文本文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T16:37:45.147

有几种方法可以做到这一点。我会像这样设置一个表“文件”：

```
CREATE TABLE  'files' (
id INT( 5 ) NOT NULL AUTO_INCREMENT,
extension VARCHAR( 4 ) NOT NULL DEFAULT 'txt',
content_type VARCHAR( 20 ) NOT NULL DEFAULT 'text/plain',
data VARCHAR( 100000 ) NOT NULL,
PRIMARY KEY (id) ); 
```

下载.php代码：

```
$id = mysqli_real_escape_string($link, $_GET['id']);
$SELECT = "SELECT * FROM files WHERE id = $id";
$result = mysqli_query($SELECT, $link);
$result = mysqli_fetch_assoc($result);

header("content-type: $result['content_type']");
echo $result['data']; 
```

html:

```
<a href="download.php?id=$_GET['id']">download file</a> 
```

# r - 使用并行的 parLapply：无法访问并行代码中的变量

> ID：12019638
> 
> 赞同：38
> 
> 时间：2012-08-18T15:08:01.517
> 
> 标签：r, parallel-processing

我最近买了一台有几个内核的计算机，并且正在学习使用并行计算。我相当精通，`lapply`并且被告知`parLapply`工作方式非常相似。我没有正确操作它。看来我必须明确地将所有内容放入其中`parLapply`以使其工作（即要使用的函数、变量等）。使用`lapply`它从父环境读取，并且`parLapply`似乎没有这样做。因此，在下面的示例中，我可以通过将所有信息放入其中来使一切正常工作，`parLapply`但是如果我在用户定义的函数中使用它，我无法明确地将其`text.var`放入`parLapply`.

```
library(parallel)
text.var <- rep("I like cake and ice cream so much!", 20)
ntv <- length(text.var)
gc.rate <- 10

pos <-  function(i) {
    paste(sapply(strsplit(tolower(i), " "), nchar), collapse=" | ")
}

lapply(seq_len(ntv), function(i) {
        x <- pos(text.var[i])
        if (i%%gc.rate==0) gc()
        return(x)
    }

)

#doesn't work
cl <- makeCluster(mc <- getOption("cl.cores", 4))
parLapply(cl, seq_len(ntv), function(i) {
        x <- pos(text.var[i])
        if (i%%gc.rate==0) gc()
        return(x)
    }

)

#does work but have to specify all the stuff inside parLapply
cl <- makeCluster(mc <- getOption("cl.cores", 4))
parLapply(cl, seq_len(ntv), function(i) {
        ######stuff I have to put inside parLapply##########
        text.var <- rep("I like cake and ice cream so much!", 20)
        ntv <- length(text.var)
        gc.rate <- 10
        pos <-  function(i) {
            paste(sapply(strsplit(tolower(i), " "), nchar), collapse=" | ")
        }
        ######stuff I have to put inside parLapply##########
        x <- pos(text.var[i])
        if (i%%gc.rate==0) gc()
        return(x)
    }
) 
```

我怎样才能通过`text.var`, `ntv`,`gc.rate`和`pos`to`parLapply`而不明确地将它们放在里面？（我猜你以某种方式将它们作为列表传递）

PS windows 7机器所以我需要使用`parLapply`我认为

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-08-18T16:09:05.967

您需要将这些变量导出到集群中的其他 R 进程：

```
cl <- makeCluster(mc <- getOption("cl.cores", 4))
clusterExport(cl=cl, varlist=c("text.var", "ntv", "gc.rate", "pos")) 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-19T18:45:23.957

Martin Morgan 提供的[另一种方法](https://stackoverflow.com/questions/12023403/using-parlapply-and-clusterexport-inside-a-function/12024448#12024448)也适用于此。

此方法直接在`parLapply`调用中将对象提供给集群中的每个节点，无需使用集群导出：

```
library(parallel)
text.var <- rep("I like cake and ice cream so much!", 20)
ntv <- length(text.var)
gc.rate <- 10

pos <-  function(i) {
    paste(sapply(strsplit(tolower(i), " "), nchar), collapse=" | ")
}

cl <- makeCluster(mc <- getOption("cl.cores", 4))
parLapply(cl, seq_len(ntv), function(i, pos, text.var, ntv, gc.rate) {
        x <- pos(text.var[i])
        if (i%%gc.rate==0) gc()
        return(x)
    }, pos, text.var, ntv, gc.rate
) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-18T18:30:57.670

```
out1<-lapply(seq_len(ntv), function(i) {x <- pos(text.var[i]);if (i%%gc.rate==0) gc();return(x)})
out2<-parLapply(cl, seq_len(ntv), function(i) {x <- pos(text.var[i]);if (i%%gc.rate==0) gc();return(x)})

>     identical(out1,out2)
# [1] TRUE
require(rbenchmark)
benchmark(lapply(seq_len(ntv), function(i) {x <- pos(text.var[i]);if (i%%gc.rate==0) gc();return(x)}),parLapply(cl, seq_len(ntv), function(i) {x <- pos(text.var[i]);if (i%%gc.rate==0) gc();return(x)}))

                                                                                       test
#1        lapply(seq_len(ntv), function(i) {\n    x <- pos(text.var[i])\n    if (i%%gc.rate == 0) \n        gc()\n    return(x)\n})
#2 parLapply(cl, seq_len(ntv), function(i) {\n    x <- pos(text.var[i])\n    if (i%%gc.rate == 0) \n        gc()\n    return(x)\n})
#  replications elapsed relative user.self sys.self user.child sys.child
#1          100   20.03 3.453448     20.31     0.05         NA        NA
#2          100    5.80 1.000000      0.22     0.03         NA        NA

> cl
socket cluster with 2 nodes on host ‘localhost’ 
```

# javascript - 搜索具有特定属性集的非嵌套节点

> ID：12019639
> 
> 赞同：0
> 
> 时间：2012-08-18T15:08:04.357
> 
> 标签：javascript, html, nodes

总而言之，我正在使用 javascript 开发一个小型库，它将用指定来源的内容替换 <div src="somesite"></div>。这将允许编码人员创建动态页面，而无需在服务器端做更多工作，而无需使用 iframe。

我需要的是一种有效的方法来获取具有 src 属性的分支的最顶层 div 节点。例如：

```
<div src="somesite/pagelet.htm" id="div1">
    <div src="somesite/fallback.htm" id="div2"></div>
</div>
<div src="somesite/pagelet2.htm" id="div3"></div> 
```

我想检索 #div1 和 #div3 并忽略 #div2 直到稍后。目前我正在使用以下功能，但我想知道是否有更有效的方法来做到这一点：

```
function getRootElementsByAttribute(rootEle, tag, attr) {
    try {
        tag = tag.toLowerCase();
        if (rootEle.tagName.toLowerCase() === tag && rootEle.hasAttribute(attr)) {
            return [rooEle]
        }
        var eles = rootEle.getElementsByTagName(tag),
            nodes = [], ele, isRoot, eleParent, a;

        for (a=0; a<eles.length; a++) {
            ele = eles[a];
            if (ele.hasAttrinute(attr)) {
                isRoot = true;
                eleParent = ele;
                while ((eleParent = eleParent.parentNode)) {
                    if (eleParent.tagName.toLowerCase() === 'div' && eleParent.hasAttribute(attr)) {
                        isRoot = false;
                        break;
                    }
                }
                if (isRoot == true) nodes.push(ele)
            }
        }
    }catch(e){}
    return nodes;
} 
```

请不要有建议使用图书馆的答案。当它只用于这个单一功能时，导入整个库似乎有点过头了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T15:54:52.637

您可以尝试使用 XPath 表达式来获取具有属性源的所有根 div，使用类似于以下 XPath 表达式的内容：

```
/div[@src] 
```

/div 选择根级别的所有 div。对于文档中的所有 div，使用 //div。[@src] 指定您只需要具有 'src' 属性的节点。

```
var xmlDoc = //load your document here
var xpath  = "/div[@src]"
var nodes  = xmlDoc.evaluate(xpath, xmlDoc, null, XPathResult.ANY_TYPE,null); 
```

# android - 视图移动的时间是动画中我想要的两倍

> ID：12019640
> 
> 赞同：0
> 
> 时间：2012-08-18T15:08:37.530
> 
> 标签：android, android-layout

我想让 myView 从当前位置移动 deltaX、deltaY 像素。但它移动的时间是我想要的两倍。这是由 onAnimationEnd 中的 setLayoutParams 引起的。没有它，myView 的真实位置不会改变。如何更改 myView 的真实位置并正常设置动画？

```
class MyLayout extends RelativeLayout {
    Animation animation;
    MyView myView;

    animation = new TranslateAnimation(0, deltaX, 0, deltaY);
    animation.setDuration(100);
    animation.setFillAfter(true);
    myView.startAnimation(animation);           
}

class MyView extends ImageView {
    protected void onAnimationEnd() {
        super.onAnimationEnd();
        LayoutParams params = (LayoutParams)getLayoutParams();
        params.leftMargin += deltaX;
        params.topMargin += deltaY;
        setLayoutParams(params);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T16:06:14.427

如果您想避免像现在那样对视图进行两次所需的转换，则必须将动画的“setFillAfter”标志设置为 false。正如文档所说“当 setFillAfter 设置为 true 时，动画结束后将应用动画转换。”

另一方面，如果您将“setFillAfter”标志保留为 true，则视图应转换到所需位置，并且在 onAnimationEnd 方法中不需要修改 LayoutParams。因此，可能是某些东西阻止了转换，如果您可以提供有关视图所属布局的更多信息，那将很有帮助。

另一件事是设置布局参数的边距以移动视图并不完全是最好的主意。把它当作一个黑客。而是尝试直接设置视图的位置或尝试在父视图中使用权重。这样，您将在多个不同的屏幕上获得相同的效果。

# ios - ios - UITabBar 图像未在模拟器上呈现

> ID：12019646
> 
> 赞同：0
> 
> 时间：2012-08-18T15:09:30.947
> 
> 标签：ios, ios5, uitabbarcontroller, uitabbar, uitabbaritem

我有一个看起来像这样的图像：

![在此处输入图像描述](../Images/01ff2e496d747e754dbddba83f03544a.png)

我试图让它在 UITabBar 上呈现，这就是我所做的。我进入 XCode to File --> Add Files to Project，然后我选择了我想要的文件并添加了它们。

然后，当我单击屏幕右侧的文件时，在“目标成员资格”下的复选框被选中。

但是当我将文件名添加到 UITabBar 项时，模拟器显示一个空白矩形而不是空白空间......所以它识别了图像......但它没有呈现该图像。

有人会碰巧知道我做错了什么吗？图像的尺寸应该是矩形还是正方形？我有 48x48 方形 png 文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T15:33:53.880

你能检查你的图像信息吗？

这些是 UITabBar 图像的指南：

*   30x30 (48x32)
*   PNG
*   抗锯齿
*   透明度集

[自定义图标和图像创建指南](https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/MobileHIG/IconsImages/IconsImages.html)

# javascript - 火狐的 Heaplib.js

> ID：12019648
> 
> 赞同：2
> 
> 时间：2012-08-18T15:09:38.693
> 
> 标签：javascript, internet-explorer, firefox, heap-memory

我想知道 javascript heapLib.js 库是否也可用于 firefox。在我遇到的所有阅读材料中，该库与 IE 特定的方法一起使用。另外，当我在firefox中编写以下代码，然后使用firebug调试代码时，它会在使用特定代码的地方准确地给我错误。

```
<html>
<body>
<script src="heapLib.js">
</script>
<script type="text/javascript">
var heap= new heapLib.ie();    <--- error at this line 
heap.gc();
heap.debugHeap(true);
heap.alloc(512);
heap.alloc("BBBBB","foo");
heap.free("foo");
heap.debugHeap(false);
</script>
</body>
</html> 
```

另外，我在 Debian 上使用 iceweasel，虽然这不应该有太大的区别，但我认为不应该添加这些信息。

任何帮助将不胜感激。谢谢你。

# java - java html 到 xml saxbuilder jdom2

> ID：12019649
> 
> 赞同：1
> 
> 时间：2012-08-18T15:09:38.920
> 
> 标签：java, xml, jdom

我正在尝试将 html 转换为 xml 以进行传递。我正在使用 jdom2，甚至在 Internet 上找到了一些示例代码，但是 SAXBuilder 已被弃用，因此它不起作用。

这是代码中重要的部分。

 ````
 frInHtml = new FileReader("E:\\Dropbox/workspace/test.html");
        brInHtml Html = new BufferedReader(frInHtml);

     SAXBuilder saxBuilder = new SAXBuilder("org.ccil.cowan.tagsoup.Parser", false);

        org.jdom2.Document jdomDocument = saxBuilder.build(brInHtml);
        XMLOutputter outputter = new XMLOutputter();
        try {
            outputter.output(jdomDocument, System.out);
            fwOutXml = new FileWriter("E:\\Dropbox/workspace/Second.xml");
            bwOutXml = new BufferedWriter(fwOutXml);
            outputter.output(jdomDocument, bwOutXml);
            System.out.flush();
        } catch (IOException e) { 
```

在文档中它说[http://www.jdom.org/docs/apidocs/org/jdom2/input/SAXBuilder.html](http://www.jdom.org/docs/apidocs/org/jdom2/input/SAXBuilder.html)它说我应该“将 SAXBuilder(XMLReaderJDOMFactory) 与 XMLReaderSAX2Factory.XMLReaderSAX2Factory(boolean, String) 一起使用”但是它不知道如何使用它。我将不胜感激任何帮助

这是我的输出：线程“主”org.jdom2.JDOMException 中的异常：无法创建 SAX2 XMLReader。在 org.jdom2.input.sax.XMLReaderSAX2Factory.createXMLReader(XMLReaderSAX2Factory.java:129)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-01T09:34:19.743

您必须将此 jar 添加到您的构建路径中：

[http://www.jarfinder.com/index.php/jars/versionInfo/2828](http://www.jarfinder.com/index.php/jars/versionInfo/2828)

:)`

# ios - 安装 Simfinger 应用程序的问题

> ID：12019651
> 
> 赞同：0
> 
> 时间：2012-08-18T15:09:49.340
> 
> 标签：ios, ios-simulator

我正在尝试安装[SimFinger 应用程序](https://github.com/atebits/SimFinger)以使用我的 iOS 模拟器进行截屏。

当我从 Github 下载项目或从[我发现它们可在线下载的唯一其他位置](http://mac.softpedia.com/get/Utilities/SimFinger.shtml)获取文件时，我只需将一个`.tar.gz`文件解压缩为我不知道如何处理的文件集合。

如何`.app`从可以安装在文件夹中的这些文件中获取`Applications`文件？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T12:28:54.137

1.  打开IOS模拟器
2.  在查找器中：导航到 atebits-SimFinger-.../Fake/Simfinger 并打开 FakeFinger.xcodeproj
3.  运行它（在 xcode 中按“播放”）

# excel - 如何在 Microsoft Excel 中删除包含特定值的单元格

> ID：12019653
> 
> 赞同：0
> 
> 时间：2012-08-18T15:09:59.980
> 
> 标签：excel, spreadsheet

如何在 Microsoft Excel 中删除包含特定值的单元格。我拥有的是不同的列，我只想从该特定列中删除包含 0 的单元格。我找到了这个链接***http://superuser.com/questions/324377/answer/submit***但它搜索整个工作表，我只需要特定的列

干杯，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T14:14:37.713

如果您只突出显示有问题的列，那么您应该能够使用替换，它将仅替换该列中的值。或者，您可以在具有强大清理功能的 Google Refine 中进行替换。

# jquery - jQuery Mobile Collapsible set，如何检查 div 元素是否展开？

> ID：12019655
> 
> 赞同：1
> 
> 时间：2012-08-18T15:10:22.493
> 
> 标签：jquery, jquery-mobile

我有一个包含两个块的可折叠集：

```
<div data-role="collapsible-set">

    <div data-role="collapsible" data-collapsed="false">
        <h3>Block A</h3>
    </div>

    <div data-role="collapsible">
        <h3>Block B</h3>
    </div>

</div> 
```

我想知道哪个块被扩展了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T09:59:27.773

很容易。jQuery Mobile 使用 CSS 完成所有这些工作。当一个`collapsible`UI 元素被折叠时，类 " **`ui-collapsible-collapsed`**" 被添加到该元素。所以你所要做的就是使用那个特定的*`.hasClass()`*方法。`jQuery``collapsible`

例如，这里有一些 HTML：

```
...
<div id="blocks" data-role="collapsible-set">
    <div class="block" data-role="collapsible" data-collapsed="false">
        <h3>Block A</h3>
    </div>
    <div class="block" data-role="collapsible">
        <h3>Block B</h3>
    </div>
</div>
... 
```

下面是一些 JavaScript/jQuery 示例：

```
...
if ($('#blocks .block').hasClass('ui-collapsible-collapsed')) {
    // Do whatever you want to do here.
}
... 
```

# javascript - 不是每次都在 HTML5 画布上绘制图像

> ID：12019656
> 
> 赞同：0
> 
> 时间：2012-08-18T15:10:25.737
> 
> 标签：javascript, html5-canvas

我正在开发一个网络应用程序，用户可以使用该应用程序构建一个包含简单对象（矩形）的网格，这些对象可以保存文本和/或图像。用户可以根据需要创建任意数量的这些对象，并在每个可以保存图像的对象中上传他们自己的一个。如果您想测试该应用程序是否在线：[goalcandy.com](http://goalcandy.com) *（**使用**demo@demo.com/demo作为电子邮件和****pswd**字段登录）*。

一旦他们完成工作，他们就可以将该网格转换为 PNG。这是通过首先在 HTML 画布上绘制网格上的所有内容来完成的，然后在本地将其转换为 PNG 图像。

当需要将现有图像数组绘制到画布上时，我首先必须预加载它们，我这样做是这样的：

```
query = [];   // array with paths to the image

var count = query.length,
    images = [],
    loaded = 0;

for (i=0; i<count; i++) {
    images[i] = new Image();
    images[i].onload = function(){
        loaded++;
        if (loaded == count)
                           drawOnCanvas();
    };
    images[i].src = query[i];
}

function drawOnCanvas() {
        // draw the images onto the canvas
} 
```

所有这一切的问题在于，在一台缓慢、“疲惫”的计算机上，PNG 有时会在一些用户上传的图像应该存在的空间中显示为空白，因为图像不会被绘制到画布上。好像他们还没有完成下载。在一台好的、快速的计算机上，这不会发生。我该如何解决这个问题，为什么会这样？考虑到我已经为“加载”事件附加了一个处理程序，我看不到逻辑......

# vb.net - 在 VB.net 中使用自定义字体

> ID：12019657
> 
> 赞同：0
> 
> 时间：2012-08-18T15:10:35.283
> 
> 标签：vb.net, fonts, embedded-resource

我正在尝试制作一个类似于 iPad/iPhone 的 GUI，所以为了让它看起来不错，当然你需要使用像 Apple 这样的字体。我已经下载了它-MyriAdpro -semibold，并将其放入控制面板字体的文件夹中，但是在选择字体时，它不存在。我在网上找到了这个：

> Label1.Font = Resources.GetFont(Resources.FontResources.MyriadPro-Semibold)

我怀疑它是 C（减去行尾的“;”），但我不知道。我应该把字体放在资源中还是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T15:26:27.780

Myriad Pro 是一种 OpenType 字体。只有 WPF 支持此类字体，Winforms 需要 TrueType 字体。

只是一个提示，当您复制 Apple 字体时，请确保不会成功。苹果有很多律师，并且不怕使用他们。特别是当字体用于他们的公司标志时。

# python - SQLAlchemy 元数据/扩展帮助器类

> ID：12019660
> 
> 赞同：1
> 
> 时间：2012-08-18T15:10:45.877
> 
> 标签：python, sqlalchemy

好的，所以我正在尝试编写代码，让我们扩展类以具有“属性”或元数据键值对。例如在我的应用程序中，我想将它用于

```
obj.color = 'test" 
```

但它给了我一个递归错误

```
 File "/home/ekarlso/bookie-frontend/bookie/models/base.py", line 96, in __getattr__
    if is_instrumented(self, key):
  File "/home/ekarlso/venv/lib/python2.6/site-packages/sqlalchemy/orm/instrumentation.py", line 460, in is_instrumented
    return manager_of_class(instance.__class__).\
RuntimeError: maximum recursion depth exceeded 
```

我尝试`__getattr__`按照 [https://bitbucket.org/zzzeek/sqlalchemy-2208/src/f9fac8a6cc88/custom_management.py](https://bitbucket.org/zzzeek/sqlalchemy-2208/src/f9fac8a6cc88/custom_management.py)进行覆盖， 但它不起作用，有人对修复实现有一些线索吗？

```
from sqlalchemy.orm import class_mapper, object_mapper, scoped_session, sessionmaker
from sqlalchemy.orm.attributes import set_attribute, get_attribute, del_attribute
from sqlalchemy.orm.instrumentation import is_instrumented

class MetadataMixin(object):
    """
    Mixin to extend a class with attributes / info in a related table
    """
    __meta_attr__ = "metadata"

    def meta_set(self, meta, cls=None):
        """
        Create or update metadata for an Entity

        :param meta: Metadata to be set
        """
        meta_cls = object_mapper(self).get_property(self.meta_attr(cls)).\
                mapper.class_
        meta_current = self.meta_dict(cls=cls)

        for key, value in meta.items():
            values = {"entity_id": self.id, "key": key, "value": value}
            if key in meta_current:
                meta_ref = meta_current[key]
            else:
                meta_ref = meta_cls()
            meta_ref.from_dict(values)
            meta_ref.save()
        return self

    def meta_get(self, key, cls=None):
        """
        Get metadata based on key

        :param key: The key to get
        """
        meta_ref = self.meta_dict(cls=cls).get(key, None)
        return meta_ref.value if meta_ref else meta_ref

    def meta_delete(self, key):
        meta = self.meta_get(key).delete()

    def meta_dict(self, cls=None):
        """
        Return metadata as a dict
        """
        meta_attr = getattr(self, self.meta_attr(cls=cls))
        return dict([(m.key, m) for m in meta_attr])

    def meta_attr(self, cls=None):
        """
        This returns the attribute which other methods act upon
        """
        return cls or self.__meta_attr__

    def __setattr__(self, key, value):
        if is_instrumented(self, key):
            set_attribute(self, key, value)
        else:
            self.set_meta({name: value})

    def __getattr__(self, key):
        if is_instrumented(self, key):
            return get_attribute(self, key)
        else:
            return self.meta_by_key(key)

    def __delattr__(self, key):
        if is_instrumented(self, key):
            del_attribute(self, key)
        else:
            self.meta_delete(self, name) 
```

# python - 在不破坏导入的情况下将独立 django 脚本放在哪里？

> ID：12019661
> 
> 赞同：7
> 
> 时间：2012-08-18T15:10:47.547
> 
> 标签：python, django

我对 Python 还是很陌生。

我有一个 Django 网站，里面有几个应用程序和一个`/libs`目录。我需要添加几个将使用我的 Django 模型的 cron 作业。我已经解决了所有问题，没什么大不了的。

不过，我的进口有问题。

我想将这些脚本包含在它们通常所属的应用程序中。但是当我从命令行执行脚本时，它无法从`/libs`目录中加载模块。

为了具体说明 dir 结构，想象一下这个伪代码：

```
import ./../libs/mysharedlib.py 
```

换句话说，脚本和 sharedlib 是：

```
~/project/myapp/myscript.py

~/project/libs/mysharedlib.py 
```

我知道我可以添加`~/project`到我的`PYTHONPATH`，但是我不得不担心在部署过程中这样做，而且感觉很糟糕。

我应该将我的脚本从我的应用程序中移出并将它们放入`~/project`? 有没有更好的办法？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-18T15:16:37.953

有一种更好的方法，自定义管理命令可以解决这个问题。 [https://docs.djangoproject.com/en/dev/howto/custom-management-commands/](https://docs.djangoproject.com/en/dev/howto/custom-management-commands/)

这些使您可以编写独立的实用程序脚本。您可以将它们作为 cron 或仅作为实用程序运行。它们使用与 django 应用程序中的任何其他模块完全相同的路径。

虽然这些解决了导入问题，但您的 libs 目录是否有`__init__.py`文件？您可以在视图中导入您的 lib 目录吗？或者您的导入只是在您的 cron 脚本中不起作用？无论哪种方式，自定义管理命令都可以解决此问题。

# html - 以下最简单的html中的百分比是什么意思？

> ID：12019662
> 
> 赞同：1
> 
> 时间：2012-08-18T15:10:49.833
> 
> 标签：html, css

```
<!DOCTYPE html>
<html>
<head>
<style type="text/css">
#container 
{
  border: 1px solid red;
}
body
{
  outline: green solid 1px;
}
p.bottommargin 
{
  outline: green solid 1px;
  margin-bottom:1%;
}
</style>
</head>
<body>

<p>This is a paragraph with no margin specified.</p>
<div id="container">
<p class="bottommargin">This is a paragraph with a specified bottom margin.</p>
</div>
<p>This is a paragraph with no margin specified.</p>

</body>
</html> 
```

显然，它既不是 the`<p>`也不`<div>`是 the`<body>`元素的 1%。那么，它是什么？

该示例可在此处获得 - [http://jsfiddle.net/mark69_fnd/SJjaV/](http://jsfiddle.net/mark69_fnd/SJjaV/)

谢谢。

**附言**

我对网络编程很陌生，所以如果我的问题真的很愚蠢，请原谅。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T15:19:10.693

来自[CSS 2 规范](http://www.w3.org/TR/CSS21/box.html#margin-properties)：

> 百分比是根据生成框的包含块的宽度计算的。请注意，“margin-top”和“margin-bottom”也是如此。如果包含块的宽度取决于此元素，则结果布局在 CSS 2.1 中未定义。

因此它是宽度的 1%`#container`

[![显示以上的图表是准确的](../Images/aa3d20ea140b3f161b65d681f9addcd2.png)
恩比根](https://i.stack.imgur.com/ua288.png)

# php - 从 php 中的多复选框 true/false 数组返回 true 元素

> ID：12019663
> 
> 赞同：0
> 
> 时间：2012-08-18T15:10:51.667
> 
> 标签：php, arrays, string, list, return

我很不擅长 php。我有一个以这种方式输出数组的多复选框：

```
Array
  (
   [value1] => true
   [value2] => false
   [value2] => false
   [value4] => false
   [value5] => true
   [value6] => false
  ) 
```

我想返回一个仅包含真实元素（值）的数组。然后我将应用这个：

```
 $list_of_true_values = explode(',', $array_i_am_looking_for);
    return $list_of_true_values; 
```

最后我想返回这个：value1，value5。

谢谢'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T15:14:26.787

`array_keys($array, true);`将返回带有真实值键的数组，您需要..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T15:43:16.743

正如 Rajat 所说，您可以使用该`array_keys()`功能。我还要补充一点，如果您希望获得 的输出`value1,value5`，则不应使用`explode()`，而是决斗，`implode()`。

`return implode(",", array_keys($array, true));`

是你所需要的全部。

* * *

根据您的评论，如果您想将键括在单引号中：

```
$keys = array_keys($array, true);
array_walk($keys, function(&$v, $k){$v = "'" . $v . "'";});
return (implode(",", $keys)); 
```

这称为[匿名 (Lambda) 语法](http://php.net/manual/en/functions.anonymous.php)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T15:13:04.800

如果你特别有`true`/`false`值，你可以使用 PHP[`array_filter()`](http://php.net/array_filter)没有回调：

```
$values = array_filter($_POST['data']); 
```

如果没有回调函数，`array_filter()`将过滤掉所有的“假”和空值。然后，要从获得的列表中获取键，您可以使用 PHP [`array_keys()`](http://php.net/array_keys)，因为只有具有“真”值的键才会在`$values`数组中：

```
return array_keys($values); 
```

在您的确切规范中，使用可选`$search_value`参数`array_keys()`可能就足够了，正如 Rajat 在他的回答中所显示的那样。`array_filter()`但是，如果您需要扩展要保留或丢弃的值列表，我建议您使用。

# javascript - 对 jQuery 的随机化效果

> ID：12019668
> 
> 赞同：0
> 
> 时间：2012-08-18T15:11:23.640
> 
> 标签：javascript, jquery

为了让它小而简单，当点击一个按钮时，所有的 div 应该以随机的方向滑开，并且应该显示另一组新的 div。

jQuery 代码的基本演示：

```
$(document).ready(function() {
        $("#toggle_value").click(function(){
           $("#div1").show("fast");
           $("#div2").show("fast");
           $("#div3").show("fast");
        });
}); 
```

但这都是关于随机化效果的。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T15:19:01.677

我会做这样的事情：

[http://jsfiddle.net/8uKt3/13/](http://jsfiddle.net/8uKt3/13/)

```
 $(document).ready(function() {
        var $div = $('div'),
            pos = [0, 0, 0, 500, 250, 100, 50, -500, -750, -1000, -1500], // Define your numbers
            mypos1,
            mypos2,
            $me;

        $("#toggle_value").click(function(){
            $div.each(function(){
                $me = $(this);

                // Choose a value from each array randomly
                mypos1 = pos[Math.floor(Math.random() * pos.length)];
                mypos2 = pos[Math.floor(Math.random() * pos.length)];

                // animate in a random direction in a random quantitya
                $me.animate({
                    'top' : mypos1,
                    'left': mypos2
                });
            });
        });
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T15:16:25.070

你可以做这样的事情，假设你有 3 种可能的情况来说明 div 可能如何滑开：

```
var rand = Math.random();
if (rand < .33) {
    // Some animation
} else if (rand < .66) {
    // Some other possible animation
} else {
    // Final animation possibility
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T15:19:22.840

算法：

*   创建一个由“n”个整数组成的数组
*   打乱数组
*   在点击功能中：
    *   对于洗牌数组中的每个值“v”：
        *   $('#div' + v).show('fast')

我的猜测是，您将使用完成全部返回“效果”来在动画中引入延迟，以使其看起来不错，但这应该是微不足道的

# javascript - JS：扩展div，IE问题

> ID：12019676
> 
> 赞同：0
> 
> 时间：2012-08-18T15:12:33.250
> 
> 标签：javascript, internet-explorer

多亏了你，我最近修复了滑动场的问题，所以我也想问这个问题。

在网站上：[http](http://www.trulyscience.com/test/index.html) ://www.trulyscience.com/test/index.html我有一个小盒子，里面有问题。当你按下它时它会滑动打开，当你再次按下它时它会滑动关闭。现在我的问题是这在 IE 中不起作用。

这是代码：

```
function loadQuestion(){

var lol;
lol = 1;

jQuery('#question').click(function(){
    if (lol==0){
      jQuery('#question').animate({height:'300'});
      lol = 1;
    }else{
      jQuery('#question').animate({height:'30'});
      lol = 0;                     
    }
});

jQuery('#question').trigger('click'); // Simulating click
}

jQuery(document).ready(function(){
loadQuestion();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T16:11:11.863

我认为您在问题 div 可用于 jQuery 之前调用 loadQuestion() 有问题，因此永远不会添加 click 事件。

我在 ready 函数中添加了一个断点和一个 watch，这似乎至少表明了这一点。

```
jQuery(document).ready(function(){
    // does this print 0 in IE? 
    console.log(jQuery('#question').length);

    loadQuestion();
});​ 
```

只是为了验证您可以将脚本移动到页面底部，看看是否可以解决问题。如果是这样，我仍然会调查为什么在 IE 中文档就绪触发器时问题 div 不可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T15:30:16.143

```
function loadQuestion(){

var lol;
lol = 1;
var invalidElems = {
    INPUT : true,
    TEXTAREA : true
};
jQuery('#question').click(function(e){
    if(e.target.tagName in invalidElems === false){
        if (lol==0){
          jQuery('#question').animate({height:'300'});
          lol = 1;
        }else{
          jQuery('#question').animate({height:'30'});
          lol = 0;                     
        }
    }
});

jQuery('#question').trigger('click'); // Simulating click
}

jQuery(document).ready(function(){
loadQuestion();
});​ 
```

[演示](http://jsfiddle.net/tJugd/1059/)

# php - 如何验证 $_GET 是否存在？

> ID：12019684
> 
> 赞同：68
> 
> 时间：2012-08-18T15:14:06.347
> 
> 标签：php, html, urlvariables

所以，我有一些看起来有点像这样的 PHP 代码：

```
<body>
    The ID is 

    <?php
    echo $_GET["id"] . "!";
    ?>

</body> 
```

现在，当我传递一个像`http://localhost/myphp.php?id=26`它一样工作的 ID 时，但如果没有像它那样的 ID，`http://localhost/myphp.php`它会输出：

```
The ID is
Notice: Undefined index: id in C:\xampp\htdocs\myphp.php on line 9
! 
```

我已经寻找解决此问题的方法，但找不到任何方法来检查 URL 变量是否存在。我知道一定有办法。

* * *

## 回答 #1

> 赞同：152
> 
> 时间：2012-08-18T15:15:11.800

您可以使用`isset`功能：

```
if(isset($_GET['id'])) {
    // id index exists
} 
```

如果索引不存在，您可以创建一个方便的函数来返回默认值：

```
function Get($index, $defaultValue) {
    return isset($_GET[$index]) ? $_GET[$index] : $defaultValue;
}

// prints "invalid id" if $_GET['id'] is not set
echo Get('id', 'invalid id'); 
```

您也可以尝试同时验证它：

```
function GetInt($index, $defaultValue) {
    return isset($_GET[$index]) && ctype_digit($_GET[$index])
            ? (int)$_GET[$index] 
            : $defaultValue;
}

// prints 0 if $_GET['id'] is not set or is not numeric
echo GetInt('id', 0); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-08-18T15:15:44.950

```
 if (isset($_GET["id"])){
        //do stuff
    } 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-08-18T15:19:25.560

通常这样做是很好的：

```
echo isset($_GET['id']) ? $_GET['id'] : 'wtf'; 
```

因此，在将 var 分配给其他变量时，您可以一口气执行所有默认值，而不是不断使用`if`语句来给它们一个默认值（如果它们未设置）。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-08-18T15:17:58.813

您可以使用[`array_key_exists()`](http://www.php.net/manual/en/function.array-key-exists.php)内置函数：

```
if (array_key_exists('id', $_GET)) {
    echo $_GET['id'];
} 
```

或[`isset()`](http://www.php.net/manual/en/function.isset.php)内置函数：

```
if (isset($_GET['id'])) {
    echo $_GET['id'];
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-08-18T15:16:25.647

你正在使用 PHP[`isset`](http://php.net/manual/en/function.isset.php)

例子

```
if (isset($_GET["id"])) {
    echo $_GET["id"];
} 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-08-18T15:16:16.087

使用和`empty()`whit 否定（如果不为空则用于测试）

```
if(!empty($_GET['id'])) {
    // if get id is not empty
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-05-16T09:31:33.633

请试一试：

```
if(isset($_GET['id']) && !empty($_GET['id'])){
   echo $_GET["id"];
 } 
```

# c# - 用户控件自定义事件崩溃

> ID：12019687
> 
> 赞同：0
> 
> 时间：2012-08-18T15:14:30.470
> 
> 标签：c#, wpf, xaml, user-controls

我用 ClickEvent 做了一个简单的自定义控件：

ImageButton.xaml：

```
<UserControl x:Name="ImgButton" x:Class="WpfApplication1.ImageButton"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         d:DesignHeight="300" d:DesignWidth="300">
    <Grid></Grid>
</UserControl> 
```

ImageButton.xaml.cs：

```
public partial class ImageButton : UserControl
{
    private bool mouse_down = false;
    private bool mouse_in = false;
    public event EventHandler Click;

    public ImageButton()
    {
        this.MouseEnter += new MouseEventHandler(ImageButton_MouseEnter);
        this.MouseLeave += new MouseEventHandler(ImageButton_MouseLeave);
        this.MouseLeftButtonDown += new MouseButtonEventHandler(ImageButton_MouseLeftButtonDown);
        this.MouseLeftButtonUp += new MouseButtonEventHandler(ImageButton_MouseLeftButtonUp);
        InitializeComponent();
    }

    void ImageButton_MouseLeftButtonUp(object sender, MouseButtonEventArgs e)
    {
        if ((mouse_down)&&(mouse_in))
        {
            Click(this, null);
        }
        mouse_down = false;
    }

    void ImageButton_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
    {
        mouse_down = true;
    }

    void ImageButton_MouseLeave(object sender, MouseEventArgs e)
    {
        mouse_in = false;
    }

    void ImageButton_MouseEnter(object sender, MouseEventArgs e)
    {
        mouse_in = true;
    }
} 
```

如果我正在处理 Click 事件，当我单击控件时它可以正常工作，否则我会崩溃。所以我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T15:27:27.013

您必须检查处理程序是否已添加到事件中，然后再启动它：

```
void ImageButton_MouseLeftButtonUp(object sender, MouseButtonEventArgs e)
{
    if ((mouse_down) && (mouse_in) && Click != null)
    {
        Click(this, null);
    }
    mouse_down = false;
} 
```

# c++ - 使用 /SAFESEH 自定义 SEH 处理程序

> ID：12019689
> 
> 赞同：5
> 
> 时间：2012-08-18T15:14:46.617
> 
> 标签：c++, windows, visual-studio-2008, assembly

我目前正在尝试用 C++ 创建一个编译器，它在运行时生成机器代码。但是，我目前正在尝试启用安全异常处理（使用 /SAFESEH 编译）。我的自定义异常处理程序在调试模式下工作，但是当我在发布模式下运行相同的代码时，我的进程刚刚终止。

我很确定问题是我无法注册我的自定义异常处理程序，因为当我使用 /SAFESEH:NO 编译我的代码时，即使在发布模式下也一切正常。

我的自定义异常处理程序是用我的其他 C++ 代码编写的，我尝试通过将 .asm 文件添加到我的项目中，将其注册为异常处理程序，其内容如下：

```
.386
.model flat
_MyExceptionHandler@16 proto
.safeseh _MyExceptionHandler@16
end 
```

[如此处](http://www.pcreview.co.uk/forums/safeseh-setting-t1428091.html)所述。然后使用 /safeseh 选项（以及其他选项）组装 asm 文件。

我的处理函数目前有以下声明：

```
extern "C" EXCEPTION_DISPOSITION __stdcall MyExceptionHandler(struct
_EXCEPTION_RECORD *ExceptionRecord, void * EstablisherFrame, struct 
_CONTEXT *ContextRecord, void * DispatcherContext); 
```

将此函数注册为异常处理程序的正确方法是什么？

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T10:24:37.613

我终于找到了一个描述问题的页面：[here](http://jpassing.com/category/win32/page/2/)。但是，页面中的代码示例未经修改就无法工作。

问题似乎是将外部过程注册为异常处理程序无法按预期工作，因此您必须将本地程序集过程注册为异常处理程序。

根据前面提到的页面上给出的示例，这就是我最终得到的：

```
.386
.model flat, stdcall
option casemap :none

extern MyExceptionHandler@16:near

MyExceptionHandlerAsm proto
.SAFESEH MyExceptionHandlerAsm

.code
MyExceptionHandlerAsm proc
    jmp MyExceptionHandler@16
MyExceptionHandlerAsm endp
end 
```

这似乎可行，但它很可能不是最优雅的解决方案。例如：为了避免从 C/C++ 引用 MyExceptionHandlerAsm 时出现链接错误，我必须将其声明为：

```
extern "C" int __stdcall MyExceptionHandlerAsm(); 
```

如果有人试图从 C/C++ 调用 MyExceptionHandlerAsm，这会崩溃，因为参数的数量与 MyExceptionHandler 的数量不匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T19:56:18.580

从[MSDN](http://msdn.microsoft.com/en-us/library/16aexws6%28VS.80%29.aspx)文档看来，您的 ASM 是正确的。您是否添加了`/safeseh`选项`ml.exe`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T02:50:26.253

ExceptionHandler函数的签名其实是：

```
typedef EXCEPTION_DISPOSITION (*PEXCEPTION_ROUTINE) (
    __in struct _EXCEPTION_RECORD *ExceptionRecord,
    __in PVOID EstablisherFrame,
    __inout struct _CONTEXT *ContextRecord,
    __inout PVOID DispatcherContext
    ); 
```

请参阅[此 MSDN 页面](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680617%28v=vs.85%29.aspx)。相同的异常例程用于 32 位窗口，因此请忽略文档提到 x64 的事实。

# parsing - 在 Matlab 中分段解析大文本

> ID：12019690
> 
> 赞同：0
> 
> 时间：2012-08-18T15:14:52.103
> 
> 标签：parsing, matlab, text

我有一个如下导入的大文本文件`MATLAB`：

```
Run Lat Long Time
1 32 32 34
1 23 22 21
2 23 12 11
2 11 11 11
2 33 11 12 
```

最多 10 次运行等。

所以我试图分解文件中的每个部分：第 1 部分、第 2 部分等，并将其写入 10 个不同的文本文件。文件 1 将具有来自运行 1 的数据。文件 2 将具有来自运行 2 的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T15:50:57.370

您正在寻找的是[Matlab 的 textread 函数](http://www.mathworks.com/help/techdoc/ref/textread.html)。我会给你你需要的部分并制定逻辑，但你需要自己连接这些部分:)

你的阅读看起来像这样

```
[head1, head2, head3, head4] = textread(file_name,'%s %s %s %s',1);
[run, lat, long, time] = textread(file_name,'%u %u %u %u'); 
```

并且您的 write 方法将使用循环来迭代

`unique(run)`

创建一个文件

`fout = fopen([base_file_name_out num2str(run_number)]);`

并将其中包含的值写入它

`lat_this_run=Lat(run==run_number);`

使用方法

`fprintf(fout,'%u %u %u\n', lat_this_run, long_this_run, time_this_run)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T16:26:20.307

如果您的数据已经加载到 matlab 并命名`A`，您可以这样做：

```
>> a = max(A(:,1));
>> AA={};
>> for i = 1:a
     AA{i}=A(find(A(:,1)==i),:)
     name=sprintf('%d.txt',i);
     dlmwrite(name,AA{i},'\t');
   end 
```

输出将是包含制表符分隔数据的 .txt 文件。

# ios - TestFlight 无法创建 IPA

> ID：12019691
> 
> 赞同：1
> 
> 时间：2012-08-18T15:14:54.677
> 
> 标签：ios, xcode, testflight

我正在使用 XCode 4.4.1 为 TestFlight AdHoc Distribution 创建一个 IPA 文件。如果我通过 Organizer 创建 IPA 文件，一切正常，TestFlight 也能正常工作。

这就是问题所在。如果我没有使用 Organizer 创建 IPA，而是允许 TestFlight Co-Pilot 检测新存档，我会弹出一个 TestFlight 已注意到新存档的弹出窗口，然后单击“上传”按钮。但是，我收到一个错误，无法创建 IPA 文件。该错误似乎与签名有关，但我使用的签名与通过 XCode 的 Organizer 创建 IPA 时使用的签名相同。这是实际错误的屏幕截图。关于我可能做错了什么的任何想法？

![TestFlight 错误截图](../Images/77e3b9a38a391d76f41836358b5686c7.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T12:31:19.117

我在安装 Xcode 4.5 时遇到了同样的问题。

解决方案是安装“**命令行工具**”。

```
Xcode > Preferences > Downloads > Command Line Tools 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T19:55:40.190

在联系了 TestFlight 支持后，我终于让它工作了。在终端中试试这个：

```
sudo ln -s /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/codesign_allocate /usr/bin/codesign_allocate 
```

# python - PDB如何在退出时中断？

> ID：12019693
> 
> 赞同：8
> 
> 时间：2012-08-18T15:15:04.730
> 
> 标签：python, pdb

如何让 python 调试器 pdb 在退出时中断？另外，我为什么要这样做，我怎样才能打破提出的异常？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-18T18:51:49.893

覆盖函数：

```
old_sys_exit = sys.exit
def new_sys_exit (value) : 
    print "in sys exit %s" % value
    old_sys_exit(value)
sys.exit = new_sys_exit 
```

然后设置断点：

```
(Pdb) b new_sys_exit 
```

它也适用于其他调用 sys.modules 的模块。

# php - 使用我拥有的指定值更新 MySQL 记录

> ID：12019697
> 
> 赞同：0
> 
> 时间：2012-08-18T15:16:07.270
> 
> 标签：php, mysql, vb.net, licensing

我正在编写许可架构，出于管理目的，我需要更新 hardwareId，我有生成和插入脚本工作，但更新它的更新内容不起作用

就像您购买产品时，您的姓名和序列号已添加到数据库中，但hardwareID 和activationID 仍为空白。

我想要的是，当用户激活产品时，它会使用序列 11111-11111-11111-11111-11111 之类的值更新行，并插入 hardwareID 说 GHSHE-3FDFGDF-3R9WDJ-023

我的脚本不起作用：

```
<?php

//$serial = $_POST['serial'];
$serial = 'TF8NAIQI7ETF0EN9X8WF0V7YD';

$con = mysql_connect("localhost","clients","mypassword");
if (!$con)
{
die();
echo 'Error, In Connecting To Activation Servers';
}

$select =   mysql_select_db("my_database");

$resultGot =  mysql_query("UPDATE people SET hardwareID = 1111,  WHERE serialNumber =       '$serial';"  );
echo 'Done!';

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T15:19:24.017

从查询中删除逗号。

并停止使用 mysql 扩展。它已被弃用。看看[PDO](http://php.net/manual/en/book.pdo.php)或[mysqli](http://php.net/manual/en/book.mysqli.php)。

# ruby-on-rails - Ruby Rails 表单

> ID：12019699
> 
> 赞同：0
> 
> 时间：2012-08-18T15:16:13.350
> 
> 标签：ruby-on-rails, ruby, forms

您好，我对 Ruby 非常陌生，目前正在使用两个模型和两个相应的数据库。`Quiz`哪一个`has_many` `questions`。我试图让问题出现在测验“编辑视图”中，这就是我所拥有的。

当前不起作用的是“问题”的表单条目（请参阅下面的评论部分）。我认为我不太理解冒号前面的表达式。（例如：title、：quiz_date 等>）它们是常规变量吗？

无论如何，有问题的代码块成功地制作了一个表格，但使用`:questions`它将数据库问题行中的所有信息放入表单字段（即id、问题、答案、可能的答案等）。但它不仅仅给了我问题字段的值。

但是，如果我将其更改为 :question （希望只获取问题表中问题字段的值），我会收到错误消息。我也尝试过：questions.question 和简单的 questions.question。这些都不起作用。

有什么建议么？

```
<%= form_for(@quiz) do |f| %>
<% if @quiz.errors.any? %>
<div id="error_explanation">
  <h2><%= pluralize(@quiz.errors.count, "error") %> prohibited this quiz from being saved:  </h2>

   <ul>
   <% @quiz.errors.full_messages.each do |msg| %>
     <li><%= msg %></li>
   <% end %>
   </ul>
  </div>
<% end %>

<div class="field">
  <%= f.label :title %><br />
  <%= f.text_field :title %>
</div>
<div class="field">
  <%= f.label :quiz_date %><br />
  <%= f.date_select :quiz_date %>
</div>
<div class="field">
  <%= f.label :reading %><br />
  <%= f.text_field :reading %>
</div>
<div>

  #the problem code
  <% @quiz.questions.each do |questions| %>
  <div class="question">
  <%= f.label :questions %><br />
  <%= f.text_field  %>
  </div>
  <% end %>
  #end problem code

</div>
<div class="actions">
 <%= f.submit %>
</div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T15:41:45.387

您需要在 Quiz 模型中添加 Accept_nested_attributes

```
Class Quiz < ActiveRecord::Base
 accepts_nested_attributes_for :questions 
```

然后在您的表单中添加

```
 <%= f.fields_for :questions do |build| %>
    <div class="question">
     <%= build.label :questions %><br />
      <%= build.text_field :questions  %> #whatever attribute in your questions model
     <%end%> 
```

你会发现这个 Railscast 很有帮助，[http: //railscasts.com/episodes/196-nested-model-form-part-1](http://railscasts.com/episodes/196-nested-model-form-part-1)

# jquery - jQuery无限滚动加载一直

> ID：12019704
> 
> 赞同：0
> 
> 时间：2012-08-18T15:16:25.680
> 
> 标签：jquery, scroll

我看不出我做错了什么。但是我用来在滚动时加载更多图像的代码无法正常工作。ajax 请求完美无缺，但是当我触摸滚动条时，代码加载图像一直存在很大问题。我希望它在我到达页面底部时加载新图像，而不是每次触摸滚动时加载。

编码：

```
<script type="text/javascript">
    $(window).scroll(function() {
        if($(window).scrollTop() + $(window).height() >= $(document).height() -300) {

            $('div#more').show();
            $.ajax({
                url: "more.php?last=" + $('.fap:last').attr('id'),
                success: function(html) {
                    if (html) {
                        $('#photos').append(html);
                        $('div#more').hide();
                    }
                    else {
                        $('div#more').replaceWith('<center>No more images</center>')
                    }
                }
            });
        }
    });
</script> 
```

任何人都知道我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T16:37:04.207

也许一个信号变量可以做到这一点：

```
var is_loading = false;
$(window).scroll(function() {
    if($(window).scrollTop() + $(window).height() >= $(document).height() -300) {
        if (is_loading) {
            return;
        }
        is_loading = true;
        $('div#more').show();
        $.ajax({
            url: "more.php?last=" + $('.fap:last').attr('id'),
            success: function(html) {
                if (html) {
                    $('#photos').append(html);
                    $('div#more').hide();
                }
                else {
                    $('div#more').replaceWith('<center>No more images</center>')
                }
            }
        }).always(function() { is_loading = false; });
    }
}); 
```

# html - Bootstrap 分页中的禁用链接

> ID：12019707
> 
> 赞同：17
> 
> 时间：2012-08-18T15:16:34.890
> 
> 标签：html, twitter-bootstrap, anchor

我正在尝试使用 Bootstrap 的分页样式。文档说要像这样创建页面列表：

```
<div class="pagination">
    <ul>
        <li class="disabled"><a href="#">&laquo;</a></li>
        <li class="active"><a href="#">1</a></li>
        <li><a href="#">2</a></li>
        <li><a href="#">3</a></li>
        <li><a href="#">4</a></li>
        <li><a href="#">&raquo;</a></li>
    </ul>
</div> 
```

前两个链接，左箭头和 1，应该被禁用。但是，当我将它合并到我的 django 模板中时，这两个仍然可用。单击它们会将用户发送到页面顶部，就像任何其他带有 id "#" 的锚链接一样。我想我仍然必须有那个才能让 Bootstrap 正确地设置它的样式。

有没有办法这样写，这样当用户点击一个禁用的“按钮”时它什么都不做？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-18T18:35:43.700

在文档中，这些按钮只是手动禁用的。`.pagination`它与样式无关。

你可以用那个

```
$('.pagination .disabled a, .pagination .active a').on('click', function(e) {
    e.preventDefault();
}); 
```

注意：如果您使用基于 ajax 的分页，则必须将这段代码放在更新处理程序中或使用[委托事件](http://api.jquery.com/on/#direct-and-delegated-events)代替

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-09-13T02:39:52.757

如果您动态编写 html 服务器端（例如使用 django）并且您不想使用 javascript，您可以这样做：

```
pseudo code:
if (Model.HasNext()) {
   <li> // normal link
      <a href="www.someurl.com/page=i">next</a>
   </li>
} else {
   <li class="disabled"> // disabled link
      <a href="javascript: void(0)">next</a>
  </li>
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-06-24T16:20:56.417

作为参考，这是[Bootstrap 所做的](https://github.com/twbs/bootstrap/blob/df7cfe86525252034cf85a365d09a4c2485116b4/less/buttons.less#L43-L51)：

```
&.disabled,
&[disabled] {
  cursor: not-allowed;
  pointer-events: none; // Future-proof disabling of clicks
  .opacity(.65);
  .box-shadow(none);
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-08-01T21:17:21.637

```
$('.disabled a').click(function(){
    return false;
}); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-01-27T17:03:34.687

对于 PHPLD v 4.2，我使用以下代码显示 Bootstrap 3 分页

```
{* Display Paging Links *}
<ul class="pagination">
<li>{paginate_prev id="MainPaging"}</li>
{paginate_middle id="MainPaging" format="page" prefix="" suffix="" link_prefix="
<li>"link_suffix="</li>" current_page_prefix="
<li class=\"active\"><a href=\"#\">"current_page_suffix="</a></li>"}
<li>{paginate_next id="MainPaging"}</li>
</ul> 
```

# php - 如何创建每第 n 个项目的数组？

> ID：12019709
> 
> 赞同：0
> 
> 时间：2012-08-18T15:17:04.483
> 
> 标签：php

假设我有下表：

```
name
----
A
B
C
D
E
F
G
H
I 
```

我可以从 MySQL 中提取它并将其放入一个数组中：

```
$result = mysql_query("SELECT * FROM names ORDER BY name DESC");
while ($row = mysql_fetch_object($result)) {
  $names[] = $row->name
} 
```

我现在正在寻找的是一个循环`$names`并返回对的脚本，例如每个第三个名称：

```
array(
  [A] => [C],
  [B] => [D],
  [C] => [E],
  [D] => [F]
  [E] => [G]
  [F] => [H]
  [G] => [I]
) 
```

或者，例如，每 4 个名称：

```
array(
  [A] => [D],
  [B] => [E],
  [C] => [F],
  [D] => [G]
  [E] => [H]
  [F] => [I]
) 
```

中间的名称数量（第一个示例中为 3 个，第二个示例中为 4 个）应该是可变的。有人知道如何在 php 中执行此操作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T16:23:31.327

另一种选择是使用[`array_slice()`](http://php.net/array_slice)and[`array_combine()`](http://php.net/array_combine)函数来创建您想要的键/值对。

```
function array_nth(array $array, $nth)
{
    $keys   = array_slice($array, 0, -($nth - 1));
    $values = array_slice($array, $nth - 1);
    return array_combine($keys, $values);
} 
```

例如，

```
$names = range('A', 'I');
var_export(array_nth($names, 3)); 
```

给

```
array (
  'A' => 'C',
  'B' => 'D',
  'C' => 'E',
  'D' => 'F',
  'E' => 'G',
  'F' => 'H',
  'G' => 'I',
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T15:22:27.737

您可以使用一个相当简单的 for 循环来做到这一点。

这是一个例子。您需要做的就是调整`$seperation`：

```
<?php

$array = array('A','B','C','D','E','F','G','H','I');
$seperation = 3;
$assoc = array(); // stores result

for($i = 0; $i+$seperation < count($array); $i++) {
   $assoc[$array[$i]] = $array[$i + $seperation];
}

print_r($assoc); 
```

[**演示**](http://codepad.org/jHMUfvwP)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T15:23:00.977

我假设这些是索引（按数字）？因为在您的示例中，您只列出了 [a, b, c]。类似的东西（可能有一个错误，但这是想法）：

```
function pairs($arr, $offset) {
    $rv = array();
    for ($i = 0; $i < (sizeof($arr) - $offset); $i++) {
        $rv[$arr[$i]] = $arr[$i + $offset];
    }
    return $rv;
} 
```

认为这很不言自明。`(sizeof($arr) - $offset)`只是确保你不会在你拥有`$arr[$i + $offset];`

# signal-processing - 带有 LPC 编码器/解码器的 DSP 库

> ID：12019712
> 
> 赞同：6
> 
> 时间：2012-08-18T15:17:19.267
> 
> 标签：signal-processing, speech-synthesis

我正在尝试创建一个轻量级的双音素语音合成器。一切看起来都非常简单，因为我的母语有非常简单的发音和文本处理规则。我偶然发现的唯一问题是音高控制。

据我了解，为了控制语音的音高，大多数语音合成器都使用 LPC（线性预测编码），它基本上将音高信息与录制的语音样本分开，然后在合成过程中我可以提供自己的音高需要。

问题是我不是 DSP 专家。我使用了一个 Ooura FFT 库来提取 AFR 信息，我对使用 Hann 和 Hamming 窗口有所了解（我自己实现了 C++ 代码），但我大多将 DSP 算法视为黑匣子。

我希望找到一些开源库，它只是带有使用示例的裸 LPC 代码，但我找不到任何东西。大多数可用代码（如 Festival 引擎）都紧密集成到合成器中，分离它并学习如何使用它是一项非常艰巨的任务。

**是否有任何 C/C++/C#/Java 开源 DSP 库带有“黑匣子”风格的 LPC 算法和使用示例，所以我可以只扔一个 PCM 样本数据并获得 LPC 编码输出，然后扔编码数据并合成解码后的语音数据？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T14:47:14.750

这不是您正在寻找的东西，但也许您会从这个非常复杂的工具箱中获得一些想法：[Praat](http://www.fon.hum.uva.nl/praat/ "普拉特")

# c# - EXEC sp_spaceused 查询

> ID：12019716
> 
> 赞同：2
> 
> 时间：2012-08-18T15:18:51.820
> 
> 标签：c#, .net, sql-server, database, rdbms

我需要抓取 300 万份文档。它们都是`text`和`varchar`领域。对于示例，我刚刚抓取了 250 个文档，当我运行`EXEC sp_spaceused`它时，它给了我 26.6 MB 作为数据库大小。我想知道我们可以从中计算出存储 300 万份文档所需的大小吗？当然，这将是一个近似值。但问题是我们真的可以根据这个值进行计算吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T15:25:44.847

250 个文档对于 300 万个文档来说只是一个很小的样本。根据您在数据库中的其他内容，很难说这些 26.6 中有多少是由文档组成的。

我会说 26.6MB / 250 * 3000000 ~= 319GB 是~~一个上限~~假设您抓取的 250 个是具有代表性的样本，则对所有文档的数据库大小进行了高度估计。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T15:32:23.850

基本上，是的，如果您希望样本具有代表性，您可以这样做。你能采样更多，比如 10 倍或 100 倍以上吗？

无论如何，也许您应该只考虑您创建的表的大小，因为只有那个大小会增加。

```
Database size = your tables + system objects + unused space (+ log size). 
```

你只想测量“你的桌子”。

如果您使用的是企业版，请尝试打开压缩。但它不适用于 LOB 值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T15:25:52.200

假设日志已刷新（例如简单恢复模型，或查询前备份的数据库），您可以取此数字（即 MB）并将其乘以 12000。

要存储大型二进制文档和文本，请考虑使用 FILESTREAM（SQL Server 2008 及更高版本）。

# css - 将 div 粘贴到页面底部

> ID：12019719
> 
> 赞同：1
> 
> 时间：2012-08-18T15:19:16.300
> 
> 标签：css, positioning, html

我正在尝试使用“位置：相对；” '位置：绝对；底部：0;' 将 div 粘贴到页面底部的东西，但它一直挂在容器内最低可见元素的正下方。我尝试更改相关 div 的“高度”和“最小高度”属性，但从未让它正常工作。它要么消失，要么将自己放置在所有容器（包括页脚）的下方，只是坐在纯背景上，或者只是挂在容器中最低元素的正下方。

这是我的CSS：

```
#body {
   padding-bottom:40px;   /* Height of the footer */
    padding-top: 200px;
    position: relative;
}

.sink{
    padding: 10px;
    position: absolute;
    bottom: 0;
} 
```

.sink 是我需要坚持到底的 div 类。

具有 id 主体的 div 包含在具有 id 容器的 div 中，该容器包含在 html 主体中：

```
body {
   margin:0;
   padding:0;
   height:100%;
    background: #7092BE;
    background-image: url("bg1.png");
    background-attachment: fixed;
    font-family: arial, helvetica, sans-serif;
    font-size: 14px;
}

#container {
   min-height:100%;
   position:relative;
    width: 900px;
    margin: 0 auto;
    background: white;
    padding: 0;
} 
```

我希望我复制了所有必要的信息，如果没有请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T17:21:29.723

找到了答案 - 我在“sink”（而不是包含它的那个）正上方的 div 中给出了“位置：相对；” 它奏效了。谢谢大家。

# css - 仅为 Internet Explorer 创建 CSS

> ID：12019725
> 
> 赞同：2
> 
> 时间：2012-08-18T15:19:35.797
> 
> 标签：css, internet-explorer

我花了很多时间让网站看起来不错，使用 Google Chrome 和 Firefox，但是通常情况下，当我在 Internet Explorer 中查看它时，它看起来比开始时更糟糕。我相信有一种方法可以创建一个仅限 IE 的 css 文件，但是我不记得该怎么做。你能为我指出正确的方向吗。

我也想知道有没有办法

```
-webkit-border-radius: 5px;
-moz-border-radius: 5px;
border-radius: 5px; 
```

为 IE 工作。几年前我研究过这个，我认为当时唯一的选择是让图像创建半径。希望有一些新的工作（越简单越好）。边界半径只是我更改 css 后呈现不同的众多事物之一。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T15:27:32.810

**回答您的第一个问题：**要仅在 IE 中包含样式表文件，请`<link>`使用条件注释包装您的 ing。这是有关如何执行此操作的示例：

```
<!--[if IE]>
    <link rel = "stylesheet" type = "text/css" href = "cssfile.css" />
<![endif]--> 
```

**回答你的第二个问题**，旧版本的 IE 不支持`border-radius`。不过，IE9 确实支持它。除了使用图像或第三方插件（如[jQuery 角](http://jquery.malsup.com/corner/)）之外，没有其他解决方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T16:44:32.760

特定于 IE 的 CSS：

1.  使用 Modernizr 确定用户浏览器中可用的功能。这会将类添加到`<body>`标签中，然后您可以在样式表中引用这些类，以在给定功能存在或不存在时激活某些样式。

2.  使用条件注释来包含特定于 IE 的样式表。

3.  使用 IE CSS hack，就像这里描述的那样：http: [//net.tutsplus.com/tutorials/html-css-techniques/quick-tip-how-to-target-ie6-ie7-and-ie8-uniquely-带 4 个字符/](http://net.tutsplus.com/tutorials/html-css-techniques/quick-tip-how-to-target-ie6-ie7-and-ie8-uniquely-with-4-characters/)

边界半径：

IE9 支持此功能，因此您必须使用 IE8 或更早版本（或兼容模式）。

1.  如果使用较旧的 IE，请忽略它。为实际上不会影响网站可用性的功能支持他们是不值得的。

2.  使用[CSS3Pie](http://css3pie.com)将`border-radius`功能侵入到 IE 中。这是一个 hack，但效果很好（比这里推荐的其他一些更好）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T15:25:17.140

Internet Explorer 9 及更高版本支持边框半径。较低版本不支持此功能。你可以

*   使用图像
*   忽略 Internet Explorer 8 及更低版本
*   使用 jquery 插件[http://jquery.malsup.com/corner/](http://jquery.malsup.com/corner/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-18T15:25:37.077

您正在寻找[Conditional stylesheets vs. CSS hacks](http://paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/)，而我不得不从最底层挖掘出来：[IExplorer 的 PIE CSS3 装饰](https://github.com/lojjic/PIE)。

# windows - 什么是 Windows 8 的 N 版本？

> ID：12019726
> 
> 赞同：0
> 
> 时间：2012-08-18T15:19:41.183
> 
> 标签：windows, windows-8, windows-runtime, winrt-xaml

我在 msdn 中读到，Windows 8 的 N 个版本不支持 CameraCaptureUI。我试图在网上搜索 N 个版本，但没有找到。那是什么？可以使用 CameraCaptureUI 吗？我希望它适用于所有版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T15:41:03.407

[Windows N 版本](http://windows.microsoft.com/en-us/windows7/products/What-is-Windows-7-N-edition)是缺少 Windows Media Player 的 Windows 版本。您询问的类似乎是由 Windows Media Player 的组件提供的，因此如果 Windows 没有，您的代码将无法工作。你无法做任何事情来让它工作，要么你必须接受它不起作用，要么你必须使用其他做同样事情的东西（或类似的东西）。

# php - 如何理解 PHP 语法错误？

> ID：12019727
> 
> 赞同：0
> 
> 时间：2012-08-18T15:19:46.600
> 
> 标签：php, command-line, syntax, interpreter

我对使用 PHP 还是很陌生，但这已经困扰了我一段时间。这是我的 test.php

```
<?PHP

$db = 'str1';
$sql = 'str2';
$cat = $sql . $db
echo $cat
?> 
```

首先，当我运行 php test.php 时，我没有得到任何输出。我现在知道我在这里缺少一个分号或 2。如果 php 告诉我语法错误在哪一行，那就太好了。我能得到的最好的方法是运行 php -l ，这表明根本存在语法错误。但似乎我可以获得更多信息？知道怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T15:23:23.647

您`;`在最后 2 行中丢失了，这就是您遇到错误的原因。要查看此错误，请确保`error_reporting`在您的 PHP 配置中打开

例子

```
<?PHP
    error_reporting(E_ALL);
    $db = 'str1';
    $sql = 'str2';
    $cat = $sql . $db ;
    echo $cat ;
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T15:23:36.077

PHP 不能告诉你具体的事情，但是它可以告诉你在哪一行有问题。

如果您没有看到此类错误，则可能是您的 error_reporting 隐藏了这些错误。

在您的 PHP ini 中，您可以设置：

*   `display_errors`至`1`
*   `html_errors`至`1`
*   `error_reporting`至`E_ALL`

它会告诉您何时无法正确解析一行，但不会具体告诉您该行有什么问题，例如：

```
OMFG it's missing a semicolon 
```

话虽这么说，它可以告诉你其他具体的事情，比如：

*   当文件不存在时
*   未定义变量时
*   当一个类不存在时

还有其他事情，但不，上次我检查语法错误时只是报告了这样的错误。

# c# - WPF 中的文本框绑定更新

> ID：12019737
> 
> 赞同：66
> 
> 时间：2012-08-18T15:20:54.300
> 
> 标签：c#, wpf, xaml, data-binding

MessageText 属性只有在我点击另一个控件时才会更新。更重要的是，如果我按下任何按钮，则不会执行 Click 处理程序，而是执行 MessageText 集。我的头坏了。

```
<TextBox x:Name="messageText" Grid.Row="1" Grid.Column="0"
         TextWrapping="Wrap" Text="{Binding Path=MessageText, Mode=TwoWay}"/> 
```

```
private void ChatView_Loaded(object sender, RoutedEventArgs e)
{
    DataContext = viewModel;
} 
```

```
public string MessageText
{
    get
    {
        return this.messageText;
    }
    set
    {
        this.messageText = value;
        OnProperyChanged("MessageText");
    }
} 
```

* * *

## 回答 #1

> 赞同：153
> 
> 时间：2012-08-18T15:28:49.047

您可以将 UpdateSourceTrigger 调整为 PropertyChanged

```
<TextBox x:Name="messageText" Grid.Row="1" Grid.Column="0"
                 TextWrapping="Wrap" Text="{Binding Path=MessageText, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/> 
```

# html - 将一大段 HTML 添加到 html 面板

> ID：12019741
> 
> 赞同：0
> 
> 时间：2012-08-18T15:21:30.917
> 
> 标签：html, gwt

我是 GWT 的新手，我需要在我的 java 文件中的 html-panel 小部件中添加一大段 html 代码（包含许多包含 id 和类的 div）。我试图像这样添加：

```
HTML html = new HTML("<div class=\"class1\">This is a class1.");
HTML html2 = new HTML("And it ends here</p>");
RootPanel.get().add(html);
RootPanel.get().add(html2); 
```

但是我对包含的 div 有疑问。有没有更简单的方法来处理这段大代码。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T16:18:10.000

先生，您正在寻找 UiBinder： [https ://developers.google.com/web-toolkit/doc/latest/DevGuideUiBinder](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiBinder)

当您在纯 HTML 中做很多事情时，UiBinder 非常棒。

但是，一旦您深入了解，UiBinder 会提供很多功能，因此请小心。我建议查看 CssResource 以及它与 UiBinder 的关系，以便您可以共享一些 Css 或仅在每个 UiBinder 文件中嵌入 Css。（注意 UiBinder 文件中对 Css 的编程访问）

也不是其他功能，例如导入其他带有命名空间的自定义 UiBinder/Widgets，例如内置 (< g:Button> -> < mynamespace:MyCustomWidget>)

但是您可能只是想在 UiBinder 中布置所有内容并在 java 文件中定义 @UiField

希望这可以帮助！

-阿什顿

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T09:45:14.980

如果您的 HTML 是静态的，则必须使用 UiBinder。

如果您的 HTML 是动态生成的，则可以使用 com.google.gwt.user.client.ui.HTML。

您的代码不起作用，因为您必须为 HTML 构造函数提供一个有效的 html 字符串。

我建议您阅读本指南：

[https://developers.google.com/web-toolkit/doc/latest/DevGuideSecuritySafeHtml#Prefer_Plain_Text](https://developers.google.com/web-toolkit/doc/latest/DevGuideSecuritySafeHtml#Prefer_Plain_Text)。

# php - 使用 Zend 写入 PDF 时出现 500 错误

> ID：12019744
> 
> 赞同：0
> 
> 时间：2012-08-18T15:22:11.403
> 
> 标签：php, zend-framework, pdf

我的 Zend 工作正常，它会打开一个 PDF 并保存它，但是当我尝试实际使用 drawText 在 PDF 上写一些文本时，我得到了这个：

```
PHP Fatal error:  Call to undefined method Zend_Pdf::drawText() in /home/whatever/test.php 
```

我不明白为什么它不起作用，想法？

# clojure - 启用预定义的选择器步骤

> ID：12019746
> 
> 赞同：0
> 
> 时间：2012-08-18T15:22:28.293
> 
> 标签：clojure, enlive

我正在尝试使用 Enlive 克隆此 html 中的 replace-me 脚本标记。

```
<!DOCTYPE html>
<html lang="en">
  <head>
[...]
    <script src="/js/libs/less.min.js"></script>
    <script src="replace-me"></script>
  </head>
[...] 
```

**问题1）**

我正在努力弄清楚最后一个脚本元素的“惯用”选择器是什么。目前我正在使用

```
(h/select tpl [:head :> [h/last-of-type :script]]) 
```

那是对的吗？

**问题2）**

我有这个片段来转换整个头部实体：

```
(h/defsnippet head "templates/base.html" [:head]
  [{:keys [scripts]}]
  [h/root :> [h/last-of-type :script]]
  (h/clone-for [script scripts]
               (h/set-attr :src (:src script)))) 
```

这是根选择器步骤的正确用法吗？我假设在 defsnippet 的上下文中，root 引用了 [:head] 选择器，对吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T15:43:14.543

1.  这在这种情况下有效，但您可能更喜欢`attr-has`：

    ```
    (h/select tpl [[:script (h/attr-has :src "replace-me")]])

    (h/defsnippet head "templates/base.html" [:head]
      [{:keys [scripts]}]
      [h/root :> (h/attr-has :src "replace-me")]
      (h/clone-for [script scripts]
                   (h/set-attr :src (:src script)))) 
    ```

    在更复杂的情况下，您可以定义自己的选择器。在这里它是不必要的，因为`attr-has`，但为了示例：

    ```
    (def my-pred (h/pred #(= #{"replace.me"} (h/attr-values % :src))))

    (h/defsnippet head "templates/base.html" [:head]
      [{:keys [scripts]}]
      [h/root :> my-pred]
      (clone-for [script scripts]
                 (h/set-attr :src (:src script)))) 
    ```

2.  您可以使用它`emit*`来检查您的代码片段是否产生了预期的结果：

    ```
    (apply println (h/emit* (head {:scripts [{:src "bar.js"}]}))) 
    ```

# python - Python IDLE：在 Windows 之间切换

> ID：12019749
> 
> 赞同：3
> 
> 时间：2012-08-18T15:22:47.157
> 
> 标签：python, python-idle

有没有办法在 Python 的 IDLE 中循环打开打开的窗口？似乎唯一的方法是转到菜单栏或单击所需的窗口。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T18:07:50.697

在 Mac OS X 上，如果您使用来自与 Aqua Cocoa Tcl/Tk 8.5 链接的 Python 的 IDLE，则标准键盘快捷键`Command`+ `（美国键盘上的反引号）会在应用程序的打开窗口中循环。[这些将包括从python.org](http://www.python.org/download/)下载的最近的 64 位/32 位 Python（2.7.x、3.2.x 和 3.3.x）（并且，如那里所述，`ActiveTcl`由于 Apple-在最近的 OS X 版本中提供了 Tcl/Tk 8.5。）旧版 OS X 的 32 位 Python 与不支持此功能的 Tcl/Tk 8.4 链接。

# matlab - 在 MATLAB 中，如何进行样本离散分布？

> ID：12019751
> 
> 赞同：0
> 
> 时间：2012-08-18T15:23:09.383
> 
> 标签：matlab

我有一个概率，其中我有三个数字，1、2 和 3。它们中的每一个都以 1/3 的机会被选中。

如何在 MATLAB 中为此创建一个函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T15:54:49.317

这个功能应该足够了：

```
randi(3) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T15:28:11.337

函数 rand 返回一个均匀分布在区间 (0,1) 中的随机数（或数字矩阵）。

您可以使用将其转换为您的范围

```
ceil(rand()*3) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-12T01:59:14.050

考虑在其他情况下使用 randsample。[在此处](https://math.stackexchange.com/questions/507795/simulation-of-custom-probability-distribution-in-matlab)查看问题和答案：

# c++ - 对称访客模式

> ID：12019757
> 
> 赞同：2
> 
> 时间：2012-08-18T15:23:54.097
> 
> 标签：c++, oop, design-patterns, visitor-pattern

我正在使用访问者模式在某些类上定义一组操作。
有些操作是可交换的，所以我最终会在访问者模式代码中出现重复。
假设我有 ABC 类，以及操作：A*A、A*B、A*C、B*A、B*B、B*C、C*A、C*B、C*C。
A*A、B*B、C*C 是唯一的。
A*B、B*A和朋友会有代码重复我可以实现A*B，让B*A调用A*B但我最终会问自己：我在哪个文件中再次实现了A和B之间的操作，在 A 中还是在 B 中？（大概会有6个类，所以我会问这个问题很多。15对可能的操作）
未来有人在实现时有可能使A*B调用B*A调用A*B的无限循环一个新的操作。
有一个约定来决定哪个应该实现 A*B 或 B*A 是不自然的。
我可以创建一个包含由 A*B 和 B*A 调用的所有已实现函数的第三个文件，这似乎不是非常面向对象的。
你会如何解决这个问题？
谢谢
（我可以列出一些代码，但它很长并且不容易说明这一点）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T15:30:50.823

你是对的，你绝对应该避免`A*B`作为`B*A`. 除了可能创建无限的调用链之外，这种方法不会反映代码中操作的对称性，因为代码不是对称的。

更好的方法是在辅助类中实现“对称”操作或作为顶级函数，具体取决于您的语言支持的内容，然后进行两者`A*B`并`B*A`调用该辅助实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T15:42:26.463

我的建议是使用 builder 作为参数 Builder

```
new ParameterBuilder()
    .setFirst( "A" )
    .setSecond( "B" )
    .setThird( "C" )
    ...
    .build(); 
```

那么你将只有一种方法`ParameterBuilder`作为参数。

# javascript - Jquery：点击链接时重新绑定功能

> ID：12019765
> 
> 赞同：0
> 
> 时间：2012-08-18T15:25:18.223
> 
> 标签：javascript, jquery, function, bind, unbind

我有一个在点击时显示的菜单（类似于 fb 移动菜单）。当您单击视口上的任意位置时，菜单再次隐藏并且链接被禁用（我想取消绑定链接，因为如果没有取消绑定此单击功能，我的视口上的链接将无法工作）

但是，当我单击显示菜单按钮时，我希望能够再次绑定视口单击。

```
$(function(){
var menuStatus;

$("a.showMenu").click(function(){
    if(menuStatus != true){             
    $("#menu").animate({
        height: "44px",
      }, 300, function(){menuStatus = true});
      return false;
      } else {
        $("#menu").animate({
        height: "0px",
      }, 300, function(){menuStatus = false});
        return false;
      }
});
$("#viewport").bind('click.navclose', function(){ 
$(this).unbind('click.navclose');  
if(menuStatus = true){     
        $("#menu").animate({
        height: "0px",
      }, 300, function(){menuStatus = false});
        return false;
    }
});

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T17:28:52.057

试试这个，希望会有意义

```
$(function() {
    var menuStatus;

    $("a.showMenu").click(function() {
        $("#viewport").bind('click', handler);
        if (menuStatus != true) {
            $("#menu").animate({
                height: "44px",
            }, 300, function() {
                menuStatus = true
            });
            return false;
        } else {
            $("#menu").animate({
                height: "0px",
            }, 300, function() {
                menuStatus = false
            });
            return false;
        }
    });
    $("#viewport").bind('click', handler);

    var handler = function() {
        $(this).unbind('click');
        if (menuStatus = true) {
            $("#menu").animate({
                height: "0px",
            }, 300, function() {
                menuStatus = false
            });
            return false;
        }
    }
});​ 
```

[查看更新的演示](http://jsfiddle.net/thujeevan/8NA8S/2/)

# python - 如何从 sqlalchemy 的日期字段中获取月份和年份？

> ID：12019766
> 
> 赞同：23
> 
> 时间：2012-08-18T15:25:20.527
> 
> 标签：python, sql, sqlalchemy

结果应该是 Date 对象

由于无法“删除”这一天，因此将其设置为该月的第一天。

只留下月、年

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-08-19T06:13:59.640

`Date`您可以使用以下构造来使用`year`或过滤列`month`：

```
.filter(extract('year', Foo.Date) == 2012)
.filter(extract('month', Foo.Date) == 12) 
```

并且`group_by`也是可能的：

```
.group_by(sqlalchemy.func.year(Foo.Date), sqlalchemy.func.month(Foo.Date)) 
```

现在我还没有测试它，但我认为这可能会很慢，因为这些查询会导致全表扫描，因此我建议你花一些时间学习如何使用[复合列](http://docs.sqlalchemy.org/en/latest/orm/composites.html)。

注意：`extract()`是从`sqlalchemy.sql`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T16:08:01.973

如果您像这样声明您的架构，

```
schema.Column('created', types.TIMESTAMP(), default=now()), 
```

函数 now() 定义在同一个模块中，可以是这样的

```
def now():
    now_date = datetime.datetime.now()
    return now_date.replace(day=1) 
```

根据 group_by 的要求，[这里](https://stackoverflow.com/questions/1370997/group-by-year-month-day-in-a-sqlalchemy)有一个提到的方法。

您可以类似地修改小时和其他字段。

# ruby-on-rails-3 - Nginx Rails Deflate JS文件

> ID：12019770
> 
> 赞同：1
> 
> 时间：2012-08-18T15:25:43.133
> 
> 标签：ruby-on-rails-3, nginx, compression, gzip

我有一个想要优化的应用程序。将以下 gzip 配置添加到 Nginx 后，我仍然收到以下文件未压缩并且可以节省 400k 负载的错误。

```
Config:
# output compression saves bandwidth
  gzip  on;
  gzip_http_version 1.1;
  gzip_vary on;
  gzip_comp_level 6;
  gzip_proxied any;
  gzip_types text/plain text/html text/css application/json application/javascript application/x-javascript text/javascript text/xml application/xml application/rss+xml application/atom+xml application/rdf+xml;

  # make sure gzip does not lose large gzipped js or css files
  # see http://blog.leetsoft.com/2007/7/25/nginx-gzip-ssl
  gzip_buffers 16 8k;

  # Disable gzip for certain browsers.
  gzip_disable “MSIE [1-6].(?!.*SV1)”;

Files:
Compressing the following resources with gzip could reduce their transfer size by 445.6KiB (77% reduction).
Compressing https://cad.hcem.com/.../application-c58641bce5c2c94f380075bb5... could save 272.1KiB (73% reduction).
Compressing https://cad.hcem.com/.../application-99c35c4a0df5a19bfd5ed6938... could save 173.5KiB (84% reduction). 
```

在我的配置中，我似乎已经打开了 javascript 进行压缩。我是否遗漏了一些不会将这些文件压缩到管道之外的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T02:39:05.337

`#`在长线前面`gzip_types`放一个

并添加

```
gzip_types
    # text/html is always compressed by HttpGzipModule
    text/css 
    text/javascript
    text/xml
    text/plain
    text/x-component
    application/javascript
    application/x-javascript
    application/json
    application/xml
    application/rss+xml
    font/truetype
    font/opentype
    application/vnd.ms-fontobject
    image/svg+xml; 
```

# ibatis - iBatis 到 MyBatis 的迁移努力？

> ID：12019771
> 
> 赞同：6
> 
> 时间：2012-08-18T15:25:44.760
> 
> 标签：ibatis, mybatis

我在生产应用程序中使用 iBatis-2.3.4.726。我想迁移我的生产应用程序以使用 MyBatis。

迁移过程中我需要考虑哪些要点？

是否有任何配置更改或 MyBatis 支持 iBatis 配置作为已弃用的命令？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-11-20T11:06:12.963

在使用[Satish 提到的迁移指南](http://code.google.com/p/mybatis/wiki/DocUpgrade3)之前，请确保您已阅读**所有评论**，尤其是最后一个列出使用转换器后必须**手动完成更改的评论：**

> *   `<procedure>`在 mybatis 中已弃用。转换器正在将其更改为`<update>`. 这将在我们需要来自过程调用的结果集的地方产生问题。所以手动更新`<select>`。
> *   `<dynamic>`标签内提到的动态查询部分不被工具转换
> *   两者都`#`可以`$`通过在 iBatis 中加倍来逃脱。这在 mybatis 中是不需要的。
> *   `typeAlias`应该定义在`sql-map-config`而不是映射器本身。
> *   当使用 将结果映射`groupBy`更改为 mybatis 样式时`collection`，`id`转换器未正确设置属性。
> *   `jdbcType="INT"`在mybatis中不识别。更新为`"INTEGER"`
> *   `nullValue`在`resultMap`已弃用的情况下，我们需要使用`ISNULL`表达式更新查询。

我想补充的是，转换器似乎**删除`timeout`**`<procedure>`了 iBatis 标签中可能存在的**参数。**确保将所有出现的事件复制到生成的 XML。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T16:42:59.133

迁移过程非常简单，我从[这里得到了答案](http://code.google.com/p/mybatis/wiki/DocUpgrade3)

希望这对你也有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-13T08:12:41.090

[Github](https://github.com/mybatis/ibatis2mybatis)上有一个工具，三步完成转换。

1.  确保您已安装*Apache ant*。
2.  下载代码，并将您的 ibatis 文件复制到文件夹*source*
3.  进入代码根目录，运行*ant*

注意转换可能会失败！我收到如下消息：*对不起，我无法迁移 WHERE 请参阅控制台输出了解更多详细信息*。希望这可以帮助

# objective-c - 如何从 GDataEntryYouTubeVideo 获取 YouTube 视频 ID？

> ID：12019778
> 
> 赞同：1
> 
> 时间：2012-08-18T15:27:04.083
> 
> 标签：objective-c, ios, file-upload, youtube, gdata

我正在使用 GData/YouTube 直接上传 api。上传完成后，将调用以下方法：

```
- (void)uploadTicket:(GDataServiceTicket *)ticket
  finishedWithEntry:(GDataEntryYouTubeVideo *)videoEntry
           error:(NSError *)error { 
```

如何从返回的 (GDataEntryYouTubeVideo *)videoEntry 中获取刚刚上传的视频的 YouTube 视频 ID？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T15:46:47.590

您可以从以下网址获取网址

```
[[[[videoEntry mediaGroup] mediaContents] objectAtIndex:0] URLString]; 
```

这带有一些查询字符串，但基本 URL 是视频（处理完成后）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-23T00:16:21.837

使用它对我有用：

```
NSString * videoID = videoEntry.mediaGroup.videoID; 
```

# python - Selenium 和 Python 查找元素和文本？

> ID：12019780
> 
> 赞同：15
> 
> 时间：2012-08-18T15:27:19.560
> 
> 标签：python, selenium, webdriver

当我转到某个网页时，我试图找到某个元素和一段文字：

```
<span class="Bold Orange Large">0</span> 
```

这不起作用：（*它给出了复合类名的错误......）*

```
elem = browser.find_elements_by_class_name("Bold Orange Large") 
```

所以我尝试了这个：（*但我不确定它是否有效，因为我不太了解在 selenium 中执行 css 选择器的正确方法......）*

```
elem = browser.find_elements_by_css_selector("span[class='Bold Orange Large']") 
```

找到 span 元素后，我想找到里面的数字*(the content)*。

```
num = elem.(what to put here??) 
```

任何有关 CSS 选择器、类名和查找元素文本的帮助都会很棒！

谢谢。

哦！我的另一个问题是这些确切的跨度元素有多个，但里面的数字不同。我该如何处理？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-08-18T15:56:54.517

你想要：**`elem.text`**得到“里面的数字”。

解释：

在您的示例中，`elem`是 webdriver`WebElement`类的一个实例（来自[selenium.webdriver.remote.webelement](http://selenium.googlecode.com/svn/trunk/docs/api/py/webdriver_remote/selenium.webdriver.remote.webelement.html)）

WebElement 实例有几个属性，包括：

*   `tag_name`
*   `text`
*   `size`
*   `location`
*   `parent`
*   `id`

`.text`属性包含“内容”

* * *

> “我的另一个问题是这些确切的跨度元素有多个......我该如何处理？”

请不要同时问几个问题。它不适用于 SO 的格式。

但基本上，使用`find_elements_*`代替`find_element_*`. 然后，您的定位器可以返回匹配实例的列表，`WebElement`而不是单个匹配实例......您可以进一步过滤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T09:37:32.130

问题实际上出在类名上，因为空格导致元素具有 3 个不同的类（由空格分隔）

如果您将类设置为，`Bold-Orange-Large`它应该可以按预期使用该`elem.text`方法。

# content-management-system - 带有 CMS 的 Google 分析 - 代码存在但无法“工作”

> ID：12019784
> 
> 赞同：0
> 
> 时间：2012-08-18T15:28:00.767
> 
> 标签：content-management-system, google-analytics

我正在使用一个不太知名的 CMS，称为 Ushahidi。

在此 CMS 的设置中，可以选择通过输入网络媒体资源 ID（例如 UA-340xxxx1-1）来添加 GA 跟踪。

然后将跟踪代码添加到站点，但它不会“触发”。

以下是添加 GA 跟踪后出现的代码：

```
<script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-xxxx-1']);
        _gaq.push(['_trackPageview']);

        (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = TRUE;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

        </script> 
```

我不熟悉 javascript，但它似乎与 Google Analytics 控制台中生成的代码完全相同。

这是网址：[http ://tinyurl.com/c8djrvr](http://tinyurl.com/c8djrvr)

我不明白为什么代码不跟踪？

欢迎任何指点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T01:37:03.837

它没有跟踪，因为 Ushahidi 注入的代码不正确。

如果您在站点上运行调试，您将在第 743 行看到错误：

![在此处输入图像描述](../Images/2b71ec72fb0e12fc97537d7db8a4690f.png)

```
ga.async = TRUE; 
```

那是你的问题。应该是`ga.async = true;`。Javascript 区分大小写。

请参阅[跟踪基础知识](https://developers.google.com/analytics/devguides/collection/gajs/)。

我建议您自己添加代码并提醒他们注意问题。

# actionscript-3 - 当物体以任意角度与墙壁和障碍物以不同角度碰撞时，如何制作逼真的反弹角度？

> ID：12019789
> 
> 赞同：1
> 
> 时间：2012-08-18T15:28:13.350
> 
> 标签：actionscript-3, flash, air, physics, collision

所以我在 Flash CS6 中为 Android/iOS 制作了一个 2D 益智/平台游戏。HitTestObject 是一个很棒的功能——我目前正在使用它——但我的问题在于物理学：

我想获取具有速度（二维矢量形式）的任意玩家对象，并能够将其从任意墙壁/障碍物/等上反弹。它可以以任意角度倾斜（例如，墙壁在屏幕中间某处的 y 轴下方 30 度处）。现在玩家对象可以在与它碰撞之前以任意角度移动。

现在我想如何设置它是使用 Flash CS6 的图形工具构建我的障碍，然后成为存储在库中的总体“关卡”类的一部分。地图上的任何点和任何角度都可能有许多障碍物。我需要弄清楚如何真实地将玩家从墙上反弹（我们将假设这一切都在空间中，因此反弹时没有摩擦或动量损失）并获得正确的角度。玩家类不应该知道障碍物类的尺寸，并且所有视觉交互游戏对象（如障碍物和玩家）都继承自 GameObject 类（它具有任何视觉对象的一些基本运动特征）。

我希望这一切都有意义......无论如何，有人如何处理这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T16:16:03.483

你说的是完全[无弹性的碰撞](http://en.wikipedia.org/wiki/Elastic_collision)。如果一个球体弹性地碰撞到一个平坦的墙壁上，它会保持相同的速度，但它的速度的方向分量都关于墙壁的法向量镜像。

# c - c - 初始化从指针生成整数而没有强制转换和另外 2 个编译器错误

> ID：12019794
> 
> 赞同：3
> 
> 时间：2012-08-18T15:28:38.093
> 
> 标签：c, pointers, gcc, compiler-construction, warnings

所以我收到了这个警告：

```
initialization makes integer from pointer without a cast 
```

在以下代码中：

```
void receive(u_char *args, const struct pcap_pkthdr *pkthdr, const u_char *buffer)

{

const int one = 1;

int LEN = args;      /* THIS IS THE LINE */

struct ipheader *ip;

struct tcpheader *tcp; 
```

老实说，小新手我不确定该怎么做，因为几乎所有搜索都会返回`makes pointer from integer`。

我还收到了这些编译器消息：

```
/tmp/cci6u7NH.o: In function `main':
ChannelBunny.c:(.text+0x448): undefined reference to `pthread_create'
ChannelBunny.c:(.text+0x4b7): undefined reference to `pthread_join'
/tmp/cci6u7NH.o: In function `receive':
ChannelBunny.c:(.text+0xcb6): undefined reference to `nthol'
ChannelBunny.c:(.text+0xcdf): undefined reference to `nthol'
collect2: ld returned 1 exit status 
```

通过使用摆脱了类似的 pcap 问题，`-l pcap`但这对其他两个不起作用。它刚刚返回：

```
gcc: pthread: No such file or directory
gcc: nthol: No such file or director 
```

我猜我必须下载一些东西？还是我必须使用另一个命令。（如果这对您有用，我正在使用 Backtrack5）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-18T15:41:49.990

你应该做

```
int LEN = *args; 
```

args 是一个指针，*args 是它所指向的值。此外，您不应该将 u_char 放入 int 中。

对于 nthol： http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms740069 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740069(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-18T15:33:33.160

您可以使用`atoi()`函数将 char* 转换为 int。

关于 pthread 的链接错误，试试把`-lpthread`你的编译命令

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T17:39:35.573

你传递一个指针

```
u_char *args 
```

您尝试将其分配给整数

```
int LEN = args; 
```

错误消息说明了这一点。

“从指针生成整数”

真正的问题是你认为 args 是什么？仅从外观来看，我猜它包含一些论点，而不是一些论点的长度？

# c# - 来自 asp.net 的 WCF 调用函数

> ID：12019795
> 
> 赞同：1
> 
> 时间：2012-08-18T15:28:43.240
> 
> 标签：c#, asp.net, wcf

我正在尝试通过 WCF 传递一个对象。我可以通过`strings`，`ints`等没问题，但是这个对象列表不起作用。

这是我的 2 个具体错误：

错误一：

```
The best overloaded method match for
 'test.ServiceReference1.JobsClient.FilesToControl(test.ServiceReference1.Item[])'
 has some invalid arguments 
```

错误2：

```
Argument 1: cannot convert from 'System.Collections.Generic.List<test.Site1.Item>'
 to 'test.ServiceReference1.Item[]' 
```

**这是我试图在 asp.net 中调用的函数：**

```
// Commit the files
ServiceReference1.JobsClient Client = new ServiceReference1.JobsClient();
Client.Endpoint.Address = new System.ServiceModel.EndpointAddress("http://" +   DropDownListSystems.SelectedValue + ":8732/FactoryAudit/");
test.ServiceReference1.ReturnClass ControlFiles_Result;
ControlFiles_Result = Client.FilesToControl(lstNewItems); 
```

**`lstNewItems`（我试图传递的对象）定义为以下代码：**

```
List<Item> lstNewItems = new List<Item>(); // Control Items 
```

**`Item`定义为：**

```
public class Item
{
    public Item(string Paramater, string Type)
    {
        _Paramater = Paramater;
        _Type = Type;

    }

    private string _Paramater;

    public string Paramater
    {
        get { return _Paramater; }
        set { _Paramater = value; }
    }

    private string _Type;

    public string Type
    {
        get { return _Type; }
        set { _Type = value; }
    }
} 
```

**现在在 WCF 服务中，我有以下接受项目列表的函数：**

```
//Files Manager
public  ReturnClass FilesToControl(List<Item> ItemsToControl) 
```

{ return new ReturnClass(1, String.Empty, String.Empty, null, null, null); }

**服务合同定义为：**

```
[ServiceContract]
public interface IJobs
{
     //Files Manager
     [OperationContract]
     ReturnClass FilesToControl(List<Item> ItemsToControl);      
} 
```

**项目类在 WCF 中定义如下：**

```
[DataContract]
[KnownType(typeof(List<Item>))]
[KnownType(typeof(Item))] 
public class Item
{
   public Item(string Paramater, string Type)
   {
       _Paramater = Paramater;
       _Type = Type;

   }
   [DataMember]
   private string _Paramater;
   [DataMember]
   public string Paramater
   {
       get { return _Paramater; }
       set { _Paramater = value; }
   }
   [DataMember]
   private string _Type;
   [DataMember]
   public string Type
   {
       get { return _Type; }
       set { _Type = value; }
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T19:31:24.030

感谢Abel，我能够弄清楚。下面是解决方案。我希望这对其他人有帮助。

请注意，您还必须右键单击 asp.net 中的服务引用，然后单击“配置服务引用”并将“集合类型”设置为 Systems.Collections.Generic.List

这是我在 asp.net 中调用函数的方式

```
Item NewItem = new Item();
        foreach (GridViewRow PendingItemUnderControl in GridViewPendingList.Rows)
        {
            NewItem.Paramater = PendingItemUnderControl.Cells[0].Text.ToLower();
            NewItem.Type = (String)Session["BrowseType"];
            lstNewItems.Add(NewItem);
        }
       ControlFiles_Result = Client.FilesToControl(lstNewItems); 
```

在asp.net中lstItems的定义如下

```
 List<Item> lstNewItems = new List<Item>(); // Control Items 
```

Abel 说我需要在我的 asp 项目顶部添加一个引用是正确的。另请注意，项目是在 WCF 应用程序中声明的，因此无需在 asp.net 中声明它，因为我们在下面的行中引用了它，如下所示：

```
using test.ServiceReference1; 
```

现在在 WCF 中记录 IJobs.cs 中的代码。请注意私人和公共的测试，我将所有这些都公开，这造成了严重破坏。

```
using System.Runtime.Serialization;
using System.ServiceModel;
using System.Text;
using System.ComponentModel;
using System.Data;
using System.IO;
using System.Collections;
namespace WCFJobsLibrary
{
    // NOTE: You can use the "Rename" command on the "Refactor" menu to change the interface name "IJobs" in both code and config file together.
    [ServiceContract]
    public interface IJobs
    {
         //Directoy Manager
         [OperationContract]
        ReturnClass FindDrives();
         //Directoy Manager
         [OperationContract]
         ReturnClass FindSubfolders(String Folder_To_Search);
         //Directoy Manager
         [OperationContract]
         ReturnClass FindSubFiles(String Folder_To_Search);
         //Directoy Manager
         [OperationContract]
         ReturnClass FilesToControl(List<Item> ItemsToControl);        

    }

        [DataContract]
      //  [KnownType(typeof(List<Item>))]
        [KnownType(typeof(Item))] 
           public class Item
       {
           public Item(string Paramater, string Type)
           {         
               _Paramater = Paramater;
               _Type = Type;
           }
           private string _Paramater;
            [DataMember]
           public string Paramater
           {
               get { return _Paramater; }
               set { _Paramater = value; }
           }
            private string _Type;
            [DataMember]
           public string Type
           {
               get { return _Type; }
               set { _Type = value; }
           }

       }

} 
```

还有 Jobs.cs - 通过一个简单的测试来确保它正常工作。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.Text;
using System.ComponentModel;
using System.Data;
using System.IO;
using System.Collections;
using System.Web;
using Microsoft.Win32;
namespace WCFJobsLibrary
{

        // NOTE: You can use the "Rename" command on the "Refactor" menu to change the class name "Jobs" in both code and config file together.
       public class Jobs : IJobs
    {

       #region IJobs Members            

        //Files Manager
        public ReturnClass FilesToControl(List<Item> lstNewItems)
       {
           try
           {
               String ThisisAnItemToControl = "";
               String ThisIsItsType = "";

               for (int i = 0; i < lstNewItems.Count; i++) // Loop through List with for
               {
                   ThisisAnItemToControl = lstNewItems[i].Paramater;
                   ThisIsItsType = lstNewItems[i].Type;

               }

               return new ReturnClass(1, ThisisAnItemToControl, String.Empty, null, null, null);

           }

           catch (Exception ex)
           {

               return new ReturnClass(-1, ex.Message.ToString(), ex.InnerException.ToString(), null, null, null);

           }           

       }

        }
       #endregion 
```

最后是ReturnClass.cs类中ReturnClass的定义

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Runtime.Serialization;
    using System.ServiceModel;
    using System.Text;
    using System.ComponentModel;
    using System.Data;
    using System.IO;
    using System.Collections;
    using System.Web;
    using Microsoft.Win32;

    namespace WCFJobsLibrary
    {
        public class ReturnClass
        {
            //private members
            private int _errorCode;
            private string _errorMessage;
            private string _exMessage;
            private ArrayList _drives;
            private string[] _folders;
            private string[] _filePaths;

            #region Constructors

            //constructor 1
            public ReturnClass()
            {

            }

            //constructor 2
            public ReturnClass(int iErr, string sErrMsg, string ExMsg, ArrayList arrDrives, string[] sfolders, string[] sFilePaths)
            {
                ErrorCode = iErr;
                ErrorMessage = sErrMsg;
                ExMessage = ExMsg;
                Drives = arrDrives;
                Folders = sfolders;
                FilePaths = sFilePaths;
            }

            #endregion

            #region methods

            //Error Code
            public int ErrorCode
            {
                get { return this._errorCode; }
                set { this._errorCode = value; }
            }

            //error message
            public string ErrorMessage
            {
                get { return this._errorMessage; }
                set { this._errorMessage = value; }
            }

            //exception message
            public string ExMessage
            {
                get { return this._exMessage; }
                set { this._exMessage = value; }
            }

            //drives
            public ArrayList Drives
            {
                get { return this._drives; }
                set { this._drives = value; }
            }

            //folders
            public string[] Folders
            {
                get { return this._folders; }
                set { this._folders = value; }
            }

            //File Paths
            public string[] FilePaths
            {
                get { return this._filePaths; }
                set { this._filePaths = value; }
            }

            #endregion

        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T15:40:12.983

你的`lstNewItems`asp代码里有什么？

要工作，它应该是一个`Item[]`. 即使您`List<Item>`在 WCF 代码中使用 a，WCF 生成的代理代码的默认设置是使用数组进行集合。

### 编辑

有了最新的编辑，可以找到问题：

错误信息显示`FilesToControl` **代理**方法接受一个数组 ( `Item[]`)

> 错误 1 ​​'test.ServiceReference1.JobsClient.FilesToControl(test.ServiceReference1.Item[])' 的最佳重载方法匹配有一些无效参数

你传入一个`List<Item>`：

```
List<Item> lstNewItems = new List<Item>();
//....
ControlFiles_Result = Client.FilesToControl(lstNewItems); 
```

有三种方法可以解决此问题。

*   改为`lstNewItems`类型`Item[]`。
*   更改服务引用的设置（您已添加它以便能够调用您的 WCF）以`List<T>`用作默认集合类型。
*   更改调用以转换为数组。

后者可以通过调用来完成`ToArray`：

```
ControlFiles_Result = Client.FilesToControl(lstNewItems.ToArray()); 
```

# ios - 强制将文本字段ios的第一个单词大写

> ID：12019797
> 
> 赞同：0
> 
> 时间：2012-08-18T15:28:57.957
> 
> 标签：ios

我们可以在不提供任何自动选项的情况下强制文本字段中第一个单词的第一个后者始终大写吗？

我知道 xib 属性中有文本字段的选项，但他们再次提供选项作为弹出建议。我不想要那个。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T15:34:56.717

您是否尝试在 TextField 的属性检查器中将“大写”设置为“句子”？

...或以编程方式进行：

```
[textField setAutocapitalizationType:UITextAutocapitalizationTypeSentences]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T10:48:54.433

您不能在用户输入字符串后直接操作字符串吗？...

只需将字符串的第一个字母更改为大写即可：

```
NSString *yourString = yourTextField.text;
yourString = [yourString stringByReplacingCharactersInRange:NSMakeRange(0,1) 
             withString:[[yourString substringToIndex:1] uppercaseString]]; 
```

例如，这将更`here is your string`改为`Here is your string`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T21:43:12.367

所以你试图通过从键盘上删除按钮来防止大写？

# css - 可以使用 CSS 为灰度图标着色吗？

> ID：12019799
> 
> 赞同：6
> 
> 时间：2012-08-18T15:29:01.930
> 
> 标签：css

我的 webapp 上有一些图标是灰色的，背景是透明的。

是否可以通过 CSS 给这样的图像着色？我会梦想让我玩弄图像或元素的饱和度和色调的东西。

如果它不存在，是否正在讨论未来版本的 CSS ？

这是我想着色的图像：http: [//www.clker.com/clipart-transparent-arrow.html](http://www.clker.com/clipart-transparent-arrow.html)

这不是我想做的：[jQuery：有一种方法可以将颜色（色调）应用于图像？](https://stackoverflow.com/questions/4416007/jquery-there-is-a-way-to-apply-colour-tint-to-an-image)

一种解决方法是使用 JavaScript [http://www.pixastic.com/lib/](http://www.pixastic.com/lib/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-18T15:32:52.087

有办法，您可以在下面的链接上阅读全文，但那是 CSS3，可能不适用于某些较旧的浏览器

[http://net.tutsplus.com/tutorials/html-css-techniques/say-hello-to-css3-filters/](http://net.tutsplus.com/tutorials/html-css-techniques/say-hello-to-css3-filters/)

一些例子

```
img.icon {
      -webkit-filter: sepia(78%);
}

img.icon {
      -webkit-filter: grayscale(100%);  /* safari/chrome */
      -moz-filter: grayscale(100%); /* firefox */
      -ms-filter: grayscale(100%);  /* IE >= 9 */
      -o-filter: grayscale(100%); /* Opera, if support CSS3 */
      filter: gray; filter: grayscale(100%); /* edge browsers */ 

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T15:44:16.683

您可以在图标[顶部](http://dabblet.com/gist/3387863)添加[一个伪元素。`rgba()`](http://dabblet.com/gist/3387863)

此外，如果使用 unicode 字符而不是图像，您也可以使用`rgba()`or `hsla()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T16:21:12.220

您可以使用灰度 jQuery 插件，它非常有用且易于使用

[http://www.pryde-design.co.uk/2011/08/greyscale-jquery-plugin/](http://www.pryde-design.co.uk/2011/08/greyscale-jquery-plugin/)

# javascript - 数组中最高 6 个值的 Javascript 总和

> ID：12019803
> 
> 赞同：4
> 
> 时间：2012-08-18T15:29:39.877
> 
> 标签：javascript, jquery, arrays, sum

我有一个大约 10 个值的数组，我想知道 JS 或 JQuery 是否有任何方法可以将最高的 6 个值相加并得到一个总数。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-18T15:32:31.727

这里：

```
var top6Total = arr
                .map(function (v) { return +v; })
                .sort(function (a,b) { return a-b; })
                .slice( -6 )
                .reduce(function (a,b) { return a+b; }); 
```

**现场演示：http:** [//jsfiddle.net/bPwYB/](http://jsfiddle.net/bPwYB/)

（注意：您必须为 IE8 进行[polyfill](https://github.com/kriskowal/es5-shim) `.reduce()`。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-18T15:35:14.387

更简单的方法（很明显:)）是

```
var arr = [1,2,3,4,5,6,7,8,9,10]; // your array

arr = arr.sort(function (a,b) { return a - b; });

var sum=0;
for(var i=0;i<6;i++) {
sum+=arr[i];
}

alert(sum); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T15:35:01.803

```
var sortedArr = arr.sort(function (a,b) { return b - a; });
var sum = 0;
for (var i = 0; i < 6; i++)
    sum += sortedArr[i]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-18T15:38:21.027

编辑答案以避免@pimvdb 标识的“用结果覆盖函数”的问题，并由@some 解释（在下面的评论中）。

一个应该涵盖几乎所有浏览器（我*认为*）的简单方法是使用一个函数来对数组值求和：

```
var vals = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];

function arraySum(arr) {
    if (!arr) {
        return false;
    }
    else {
        var sum = 0;
        for (var i = 0, len = arr.length; i < len; i++) {
            sum += arr[i];
        }
        return sum;
    }
}
sum = arraySum(vals.sort(function(a, b) {
    return b - a;
}).slice(0, 6));

console.log(sum);​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/txXGJ/1/)。

但是，对于那些可以使用它的浏览器来说，它`reduce()`要简单*得多*。

# java - EclipseLink 2.3 如何在没有连接的情况下从一个表中检索数据

> ID：12019804
> 
> 赞同：-3
> 
> 时间：2012-08-18T15:29:44.533
> 
> 标签：java, eclipselink

现在我有问题，当我使用 jpa 2 Eclipselink 从员工中选择员工时，我有 2 类员工和 EmployeeDetials，这些员工从数据库中获取员工详细信息如何获取没有员工详细信息的员工。我使用了延迟获取，但它返回了来自员工和员工详细信息的所有数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T11:32:59.710

你能把你的相关代码贴在这里吗？延迟加载意味着数据在第一次访问时被加载。如果您访问它以检查它是否已加载，则您导致它已加载。

# ruby - Ruby 正则表达式或解析器

> ID：12019811
> 
> 赞同：0
> 
> 时间：2012-08-18T15:31:08.833
> 
> 标签：ruby, regex, parsing

我有一个要解析的字符串，看起来有点像 github markdown，但我真的不想要完整的实现。该字符串将是“代码”块和“文本”块的混合。代码块将是三个反引号，后跟一个可选的“语言”，然后是一些代码，最后是三个反引号。非代码几乎就是其他一切。我不（但可能应该）关心用户是否不能在“文本”块中输入三个反引号。这是一个例子......

```
这是一些文本，后跟一个代码块
```红宝石
定义函数
   “你好”
结尾
```
还有一些文字

```

当然可能会有更多的代码和文本块穿插其中。我已经尝试为此编写一个正则表达式，它似乎有效，但我无法让组（在括号中）给我所有的匹配项，并且 scan() 失去了排序。我已经研究过使用几个 ruby​​ 解析器（treetop、parselet），但是对于我想要的来说看起来有点大，但如果这是我最好的选择，我愿意走那条路。

想法？

有几个人询问了我正在尝试的 RE（下面有很多变体）......

```
re = 
  /
    ```\s*\w+\s*          # 3 backticks followed by the language
      (?!```).*?          # The code everything that's not 3 backticks
    ```                   # 3 more backticks
    |                     # OR
    (?!```).*             # Some text that doesn't include 3 backticks
  /x                      # Ignore white space in RE 
```

似乎即使在简单的情况下，例如

```
md = /(a|b)*/.match("abaaabaa") 
```

我无法获得所有的 a 和 b。从不存在的说 md[3] 。希望这更有意义，这就是为什么我认为 RE 在我的情况下不起作用，但我不介意被证明是错误的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T18:51:50.847

根据我对 Markdown(github-, stackoverflow-flavors) 的了解和您的问题（对于文本的其余部分而言，这不是很精确），我将在这里做出一些假设。

1\. 每个代码块都以单行**开头**，仅包含三个反引号、一个可选的语言名称和换行符。

2\. 每个代码块都以仅包含三个反引号的单行**结束。**

3\. 代码块不为空。

如果您可以接受这些假设，那么以下代码应该可以工作（假设文本在`str`变量中）：

```
regex = %r{
  ^```[[:blank:]]*(?<lang>\w+)?[[:blank:]]*\n # matches start of codeblock, and captures optional :lang.
    (?<content>.+?) # matches codeblock content and captures in :content
  \n[[:blank:]]*```[[:blank:]]*\n # matches ending of codeblock.
}xm # free-space mode and . matches newline.
position = 0
matches = []
while(match = regex.match(str,position)) do
  position = match.end 0
  matches << [match[:lang], match[:content]]
end 
```

在此匹配项之后包含一个数组数组，其中一个内部数组表示匹配项，第一个元素是（可选）语言，可能为 nil，第二个元素是内容。

如果您对文本有更多假设，我可以更改正则表达式。

这是我使用的测试字符串：

```
str = %{
this is some random text.
```ruby
  def print
    puts "this is a code block with lang-argument"
  end
```

some other text follows here.
i want some ``` backticks here.

```
  def print
    puts "this is a code block without lang-argument"
  end
```
} 
```

# oauth-2.0 - 两条腿的 oauth2.0 有/支持回调授权吗？

> ID：12019812
> 
> 赞同：0
> 
> 时间：2012-08-18T15:31:33.580
> 
> 标签：oauth-2.0, 2-legged, two-legged

在三足流程中，您有一个 callbackAuthorize 允许您检索代码，您可以用它交换访问令牌。我想知道两条腿的 oauth 是否有类似的东西（它会用您的身份验证令牌回叫您），或者您是否只是提供了您的 client_id + client_secret 的授权 URL 并且响应是您的身份验证令牌？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T20:42:12.463

OAuth 2 中的 2-legged 流称为[*Client Credentials*流](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-31#section-4.4)，非常简单。

您称为*callbackAuthorize*的步骤是[*授权授予*请求](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-31#section-4.4.1)，并且文档非常清楚地否定了对此类请求的需要：

> 由于使用客户端身份验证作为授权授予，因此不需要额外的授权请求。

# php - 代码点火器购物车类，不会在会话中保存购物车项目

> ID：12019813
> 
> 赞同：2
> 
> 时间：2012-08-18T15:31:36.633
> 
> 标签：php, codeigniter

我正在关注 nettuts 的“使用 CI 构建购物车”教程。我什至还没有进入前 5 分钟，我遇到了问题。

看来我的会话系统无法正常工作并传递数据。我做了一些阅读，我看到 CI 不使用普通的 php 会话，而是使用会话 ID 作为标识符将它们存储在数据库中。

所以我检查了一下，我所有的数据库设置都是正确的，我根据我找到的一些堆栈答案设置了会话表和字段。我可以看到 CI 将数据写入会话表并将其存储到会话表中，但购物车不会跨页面保存项目。

我正在自动加载

```
 $autoload['libraries'] = array('database', 'cart');
    $autoload['helper'] = array('form', 'html', 'url'); 
```

我设置了这个

```
 $config['encryption_key'] = ''; 
```

^ 我的加密密钥由字母和数字组成，如果可以使用的话。

我看到这被设置为 false 所以我将其设置为 true

```
 $config['sess_use_database'] = TRUE; 
```

这是购物车控制器的开始......</p>

```
 class Dazcart extends CI_Controller

      {
       //adds item to shopping cart

       function Addtocart() 
        {
         $item = array(
             'id' => '42',
             'name' => 'Octane Lean Build Fast',
             'qty' => 1,
             'price' => 347,
             'options' => array ('flavor' => 'chocolate')
            );

         $return = $this->cart->insert($item);
         echo "<pre>";
         print_r($this->cart->contents());
         echo "</pre>";
        }

       function Showcart()
           {
         $cartcontents = $this->cart->contents(); 
         echo "<pre>";
         print_r($cartcontents);
         echo "</pre>";

        }

      } 
```

现在，每次我加载 /Dazcart/Addtocart 时，它都会通过 print_r 语句确认该项目已成功存储到购物车中。

但是如果我加载 /dazcart/Showcart ， print_r 语句只会显示一个空数组，告诉我他的数据没有通过会话传递。>：（

我知道这是新手的东西，但我现在已经花了几个小时，而且我是 Code Igniter 的新手。我只是想弄清楚这一点，以便我可以了解更多信息并让我的网站正常运行。＃沮丧的

感谢你的帮助。

更新：

当然这是我在配置文件中的会话设置

```
 $config['sess_cookie_name']     = 'cisession';
    $config['sess_expiration']      = 7200;
    $config['sess_expire_on_close'] = FALSE;
    $config['sess_encrypt_cookie']  = FALSE;
    $config['sess_use_database']    = TRUE;
    $config['sess_table_name']      = 'ci_sessions';
    $config['sess_match_ip']        = FALSE;
    $config['sess_match_useragent'] = TRUE;
    $config['sess_time_to_update']  = 300; 
```

我注意到 $config['sess_use_database'] 最初是假的，我将其设置为真。

如果 CI 不使用正常的 php 会话，我该如何进行会话转储？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T16:40:22.453

正如@SamDufel 指出的那样，会话存储在 cookie 中，数据库只是可选的，因此当您将数据添加到会话时，它会将其存储在 cookie 中。您需要加载会话，

```
$autoload['libraries'] = array('database', 'cart', 'session'); 
```

# c++ - 如何构造（dk）维超球面（k 对于我的博士工作，我使用的是 C++ CGAL 库提供的 dD Geometry Kernel。 我的基本目标：我想通过顺序添加一个新点来构建一系列维度增长的超球体，直到达到任意维度 d。第一个超球 问问题 问问题 2012-08-18T15:31:42.087 142 次 This question shows research effort; it is useful and clear 2 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 对于我的博士工作，我使用的是 C++ CGAL 库提供的 dD Geometry Kernel。 我的基本目标：我想通过顺序添加一个新点来构建一系列维度增长的超球体，直到达到任意维度 d。第一个超球面是一维的，最后一个超球面是 d 维的。添加的每个新点都会导致维度的实际增加（无共面性）。 我的问题：使用 CGAL::Sphere_d 类，我不知道如何在 d 维环境空间（即 d 维点）中构造（dk）维超球面（k < d）。事实上，要构建一个 d'-sphere，需要提供 d'+1 个 d'-points（这是正常的）。例如，我想用 3 个3维点构建一个圆盘（2 球体）。因此，直接使用这个 CGAL 类意味着我提供二维点，这是不可能的（到目前为止）。 我的问题：作为 CGAL 库的最新用户，我不知道这个类是否可能是我必须使用的类，或者我是否有必要找到另一个类？如果没有必要，如何绕过我的问题？ 提前致谢， 奥克塔维奥 使用android中的按钮删除listview项目 所以我添加了按钮，但是位置变量出现错误。我做对了吗？ public View getView(int position, View convertView, ViewGroup parent) { TaskListItem tli; if(null == convertView){ tli =(TaskListItem)View.inflate(context, R.layout.task_list_items, null); tli.setBinButton((ImageButton) tli.findViewById(R.id.bin)); tli.getBinButton().setOnClickListener(new View.OnClickListener() { public void onClick(View v) { tasks.remove(position); notifyDataSetChanged(); } }); } else{ tli = (TaskListItem)convertView; } tli.setTask(tasks.get(position)); return tli; } 我正在编写一个任务管理器程序，并且遇到了 listView 的问题。我已经创建了列表，现在我想在单击项目上的按钮时删除列表上的项目。我不确定应该在哪里创建按钮并添加侦听器。有人可以帮助我吗谢谢。 public class ViewTasksActivity extends ListActivity { private Button addButton; private TaskManagerApplication app; private TaskListAdapter adapter; @Override public void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); setContentView(R.layout.main); setUpViews(); app = (TaskManagerApplication)getApplication(); adapter = new TaskListAdapter(app.getCurrentTask(), this); setListAdapter(adapter); } protected void onResume(){ super.onResume(); adapter.forceReload(); } @Override protected void onListItemClick(ListView l, View v, int position, long id) { super.onListItemClick(l, v, position, id); adapter.toggleTaskCompleteAtPosition(position); } protected void removeCompletedTasks() { adapter.removeCompletedTasks(); } private void setUpViews() { addButton = (Button)findViewById(R.id.add_button); addButton.setOnClickListener(new View.OnClickListener() { public void onClick(View v) { Intent intent = new Intent(ViewTasksActivity.this, AddTaskActivity.class); startActivity(intent); } }); } @Override public boolean onCreateOptionsMenu(Menu menu) { getMenuInflater().inflate(R.menu.main, menu); return true; }} public class TaskListAdapter extends BaseAdapter { private ArrayList <task>tasks; private Context context; public TaskListAdapter(ArrayList <task>tasks, Context context) { super(); this.tasks = tasks; this.context = context; } public int getCount() { return tasks.size(); } public Object getItem(int position) { return (null == tasks) ? null: tasks.get(position); } public long getItemId(int position) { return position; } public View getView(int position, View convertView, ViewGroup parent) { TaskListItem tli; if(null == convertView){ tli =(TaskListItem)View.inflate(context, R.layout.task_list_items, null); } else{ tli = (TaskListItem)convertView; } tli.setTask(tasks.get(position)); return tli; } public void forceReload() { notifyDataSetChanged(); } public void toggleTaskCompleteAtPosition(int position) { Task t = tasks.get(position); t.toggleComplete(); notifyDataSetChanged(); } public void removeCompletedTasks() { ArrayList <task>completedTasks = new ArrayList<task>(); for(Task task : tasks){ if(task.isComplete()){ completedTasks.add(task); } } tasks.removeAll(completedTasks); notifyDataSetChanged(); } public void removeTask(int position){ tasks.remove(position); }} public class TaskListItem extends LinearLayout { private Task task; private TextView taskName; private TextView resp; private TextView prio; private Button binButton; public TaskListItem(Context context, AttributeSet attrs) { super(context, attrs); } protected void onFinishInflate(){ super.onFinishInflate(); taskName = (TextView) findViewById(R.id.the_task); resp = (TextView) findViewById(R.id.resp); prio = (TextView) findViewById(R.id.prio); } public Button getBin(){ return binButton; } public Task getTask() { return task; } public void setTask(Task task) { this.task = task; taskName.setText(task.getName()); resp.setText("Resp: " + task.getResponsible()); prio.setText("Prio: " + task.getPriority()); }} c++computational-geometrycgal 4 0 回答 0 Related 1 jquery - 在 CJuiDatePicker 或 EJuiDateTimePicker 中禁用未来日期 2 javascript - 如何打开一个 URL 来处理 javascript 脚本文件？ 1 java - 在 JBoss 7.1.1 中使用 EJB 3.1 调用 Struts 2 Action 时得到 Struts 报告 5 ios - 当我调整它的大小时 UIPopoverController 移动 1 swing - 需要一个可以选择单元格的板 3 html - CSS 垂直分隔线 2 asp.net-mvc - 显示存储在文件夹中的用户的个人资料图片 2 string - Java 正则表达式和字符串 2 android - 动态添加行将该值存储到数据库中 1 php - SQL 语法错误；检查与您的 MySQL 服务器版本相对应的手册以获取正确的语法 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</task></task></task></task>

> ID：12019814
> 
> 赞同：2
> 
> 时间：
> 
> 标签：c++, computational-geometry, cgal

对于我的博士工作，我使用的是 C++ CGAL 库提供的 dD Geometry Kernel。

*   **我的基本目标**：我想通过顺序添加一个新点来构建一系列维度增长的超球体，直到达到任意维度 d。第一个超球面是一维的，最后一个超球面是 d 维的。添加的每个新点都会导致维度的实际增加（无共面性）。

*   **我的问题**：使用 CGAL::Sphere_d 类，我不知道如何在 d 维环境空间（即 d 维点）中构造（dk）维超球面（k < d）。事实上，要构建一个 d'-sphere，需要提供 d'+1 个 d'-points（这是正常的）。例如，我想用 3 个***3***维点构建一个圆盘（2 球体）。因此，直接使用这个 CGAL 类意味着我提供二维点，这是不可能的（到目前为止）。

*   **我的问题**：作为 CGAL 库的最新用户，我不知道这个类是否可能是我必须使用的类，或者我是否有必要找到另一个类？如果没有必要，如何绕过我的问题？

提前致谢，

奥克塔维奥

# android - 使用android中的按钮删除listview项目

> ID：12019815
> 
> 赞同：1
> 
> 时间：2012-08-18T15:31:48.333
> 
> 标签：android, listview, adapter

所以我添加了按钮，但是位置变量出现错误。我做对了吗？

```
 public View getView(int position, View convertView, ViewGroup parent) {
    TaskListItem tli;
    if(null == convertView){
        tli =(TaskListItem)View.inflate(context, R.layout.task_list_items, null);
        tli.setBinButton((ImageButton) tli.findViewById(R.id.bin));
        tli.getBinButton().setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                tasks.remove(position);
                notifyDataSetChanged();
            }
        });
    }
    else{
        tli = (TaskListItem)convertView;
    }
    tli.setTask(tasks.get(position));
    return tli;
    } 
```

* * *

我正在编写一个任务管理器程序，并且遇到了 listView 的问题。我已经创建了列表，现在我想在单击项目上的按钮时删除列表上的项目。我不确定应该在哪里创建按钮并添加侦听器。有人可以帮助我吗谢谢。

```
public class ViewTasksActivity extends ListActivity {

private Button addButton;
private TaskManagerApplication app;
private TaskListAdapter adapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    setUpViews();

    app = (TaskManagerApplication)getApplication();
    adapter = new TaskListAdapter(app.getCurrentTask(), this);
    setListAdapter(adapter);
}

protected void onResume(){
    super.onResume();
    adapter.forceReload();
}

@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);
    adapter.toggleTaskCompleteAtPosition(position);
}

protected void removeCompletedTasks() {
    adapter.removeCompletedTasks();

}

private void setUpViews() {
    addButton = (Button)findViewById(R.id.add_button);      
    addButton.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            Intent intent = new Intent(ViewTasksActivity.this, AddTaskActivity.class);
            startActivity(intent);              
        }
    });

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}}

public class TaskListAdapter extends BaseAdapter {

private ArrayList<Task> tasks;
private Context context;

public TaskListAdapter(ArrayList<Task> tasks, Context context) {
    super();
    this.tasks = tasks;
    this.context = context;
}

public int getCount() {
    return tasks.size();
}

public Object getItem(int position) {
    return (null == tasks) ? null: tasks.get(position);
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {
    TaskListItem tli;
    if(null == convertView){
        tli =(TaskListItem)View.inflate(context, R.layout.task_list_items, null);
    }
    else{
        tli = (TaskListItem)convertView;
    }
    tli.setTask(tasks.get(position));
    return tli;
}

public void forceReload() {
    notifyDataSetChanged();
}

public void toggleTaskCompleteAtPosition(int position) {
    Task t = tasks.get(position);
    t.toggleComplete();
    notifyDataSetChanged();
}

public void removeCompletedTasks() {
    ArrayList<Task> completedTasks = new ArrayList<Task>();
    for(Task task : tasks){
        if(task.isComplete()){
            completedTasks.add(task);
        }
    }
    tasks.removeAll(completedTasks);
    notifyDataSetChanged();
}

public void removeTask(int position){
    tasks.remove(position);
}}

public class TaskListItem extends LinearLayout {

private Task task;
private TextView taskName;
private TextView resp;
private TextView prio;
private Button binButton;

public TaskListItem(Context context, AttributeSet attrs) {
    super(context, attrs);
}

protected void onFinishInflate(){
    super.onFinishInflate();
    taskName = (TextView) findViewById(R.id.the_task);
    resp = (TextView) findViewById(R.id.resp);
    prio = (TextView) findViewById(R.id.prio);
}

public Button getBin(){
    return binButton;
}

public Task getTask() {
    return task;
}

public void setTask(Task task) {
    this.task = task;
    taskName.setText(task.getName());
    resp.setText("Resp: " + task.getResponsible());
    prio.setText("Prio: " + task.getPriority());
}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T15:56:34.987

在TaskListItem中添加按钮及其点击监听，删除item并调用list上的notifyDataSetChanged()进行刷新

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T15:54:00.540

如果按钮是行视图的子视图，则在 getView() 中将位置设置为按钮视图的标记。并将活动设置为 onclicklistener。

在 onClick 中，检查按钮的标签，它会告诉你行的确切位置。

# java - 使用编码参数将 PdfToText 作为 Java 进程运行

> ID：12019816
> 
> 赞同：2
> 
> 时间：2012-08-18T15:32:00.803
> 
> 标签：java, file, process, processbuilder, pdftotext

我正在通过 Java 进程运行[PdfToText ：](http://linux.die.net/man/1/pdftotext)

```
File pdf = new File( "/path/to/test.pdf" );
File output = new File( "/path/to/output.txt" );

String[] cmd = { "pdftotext",
                 pdf.getPath(), 
                 output.getPath()
               };

ProcessBuilder pb = new ProcessBuilder( cmd );
Process pr = pb.start() ;
int exit = pr.waitFor(); 
```

哪个运行没有问题。

[但是，当我添加此处](http://linux.die.net/man/1/pdftotext)指定的编码参数时：

```
String[] cmd = { "pdftotext", 
                 "-enc " + encoding, 
                 pdf.getPath(), 
                 output.getPath()
               }; 
```

然后该过程就挂起 - 即，我正在运行的测试只是运行并运行，就好像它被卡在一个循环中一样。

编码肯定包含一个值，当生成的命令被复制并粘贴到命令终端时，pdftotext 运行没有问题。

谁能指出我在哪里出错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T16:47:04.643

尝试这个

```
String[] cmd = { "pdftotext", 
  "-enc", encoding, 
  pdf.getAbsolutePath(), 
  output.getAbsolutePath()
}; 
```

不应该有空格，路径取决于系统。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T18:44:11.407

这是对我有用的代码：

```
 public class ToDelete {
public static void main(String[] args) throws Exception {
    File file = new File("/Users/eugenrabii/Desktop/MyPDF.pdf");
    File output = new File("/Users/eugenrabii/Desktop/Output.txt");
    List<String> commands = new ArrayList<String>();

    commands.add("/opt/local/bin/pdftotext");
    commands.add("-enc");
    commands.add("UTF-8");
    commands.add(file.getPath());
    commands.add(output.getPath());

    ProcessBuilder processBuilder = new ProcessBuilder(commands);
    Process process = processBuilder.start();

    int result = process.waitFor();
    if(result!=0){
        printResult(process.getErrorStream());
    } else {
        printResult(process.getInputStream());
    }
}

private static void printResult(InputStream inputStream) throws IOException {
    byte [] byte_ = new byte[inputStream.available()];
    inputStream.read(byte_);
    System.out.println(new String(byte_));
}
} 
```

你能在你的输入上试试这个，看看效果如何？问题可能是该进程可能会写入 stderr 或 stdout 并且您没有从中读取并且它会阻塞。

# java - Box2d 绳索 - 非固定长度

> ID：12019817
> 
> 赞同：0
> 
> 时间：2012-08-18T15:32:01.883
> 
> 标签：java, box2d

我正在使用 box2d 物理创建游戏，我有一个附有绳索的起重机，类似的东西（示例）

![在此处输入图像描述](../Images/3bd4f2afc3f48f316da748ee24148f6b.png)

我想要实现的是让玩家折叠或展开线（显然达到一定的限制）目前我只能创建固定长度的绳索，这有点限制我的游戏。

我怎样才能实现它？我有几个想法，但不是很好，比如一直在重建绳索，但这只会破坏我的表现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T15:59:12.770

首先，我会检查一下这是否真的会破坏你的表现。你可能会对它的速度感到惊讶。

如果是这样，一个解决方案是创建一组相互连接的短绳（比如 10 根）。这基本上就是一根绳子，你只需要抓住元素。

为了使绳子有 6 个单位长，隐藏和碰撞禁用最后 4 个并将负载附加到第六个绳段的末端。

# c++ - C++/Win32 FTP 安全基础和使用 SSL

> ID：12019819
> 
> 赞同：1
> 
> 时间：2012-08-18T15:32:19.213
> 
> 标签：c++, winapi, ftp

我的应用程序从 FTP 服务器下载文件。

使用数据包嗅探器我可以很容易地看到用户名和密码，我想避免这种情况。

我无法创建具有有限权限 ATM 的 FTP 帐户。

我如何知道服务器是否支持 SSL？（阿帕奇 2.xx）

隐藏用户的任何其他方式：FTP 帐户的通行证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T16:06:07.823

如果您想查看 FTP 服务器是否支持显式模式下的 FTPS（[RFC 2228](https://www.rfc-editor.org/rfc/rfc2228)、[RFC 4217](https://www.rfc-editor.org/rfc/rfc4217)），请发送`AUTH TLS`. 如果它以`5xx`错误代码回复，那么它不会；如果它以 a 回复`234`，那么它确实如此，并且您的客户端应该做出适当的反应（对于 RFC 4217 兼容的服务器，这意味着进行标准的 TLS 握手）。

不幸的是，WinInet API 不允许您这样做，因此您可能需要查看[libcurl](http://curl.haxx.se/libcurl/)，它支持开箱即用的 FTPS。

# javascript - Backbone：嵌套在模型中的集合

> ID：12019822
> 
> 赞同：1
> 
> 时间：2012-08-18T15:32:34.797
> 
> 标签：javascript, backbone.js

我将列出一些代码并解释情况。
**(1)**我实例化`App.views.tasks`. 在`initialize`此视图的功能中，我获取任务。
**(2)**从函数中，我为每个任务`render`实例化一个。**(3)**在 的函数中，我实例化 an并将注释集合和对渲染任务的元素的引用传递给它。**(4)**踢任务评论的获取。 `App.views.task`
**`initialize``App.views.task``App.views.comments``DOM`
**`App.views.comments`****

 ******问题**：如果没有评论引起的延迟，我传递给的元素
的引用将是。如果我在函数中 传递了引用，一切都会好起来的，但这也意味着每次调用时都会实例化，这是不好的。所以这只是一种幸运的方法，它只有机会定义它，因为有 a ，否则它会是。 我添加了一些注释来解释发生了什么，您可以在和中找到它们。 `DOM``App.views.comments``undefined``fetching`
`el``render``App.views.comments``render``fetching``undefined`
`App.views.task``App.views.comments`

**在某些情况下，解决此问题的最佳方法是什么？**

```
App.collections.Tasks = Backbone.Collection.extend({
        model: App.models.Task,
        url: App.baseHrefReq + '/tasks/all'
});
App.models.Task = Backbone.Model.extend({
initialize: function() {
            this.set({comments: new App.collections.taskComments});
            this.get('comments').url = App.baseHrefReq + '/comments/get/task-id/' + this.get('id');
        }
});
App.views.tasks = Backbone.View.extend({
        initialize: function() {
            App.iCollections.Tasks = new App.collections.Tasks;

            App.iCollections.Tasks.bind('reset', this.render, this);
            App.iCollections.Tasks.bind('add', this.renderTask, this);

            App.iCollections.Tasks.fetch();
        },
        render: function() {
            $('.feed-list').html('');
            App.iCollections.Tasks.each(this.renderTask);

        },
        renderTask: function(task) {
            var view = new App.views.task({model: task});
            $('.feed-list').append(view.render().el);
        }
    }); 
    App.iViews.tasks = new App.views.tasks;

App.views.task = Backbone.View.extend({
        tagName: 'li',
        template: _.template($('#task-item-template').html()),
        initialize: function() {
            this.model.bind('change', this.render, this);
            this.model.bind('destroy', this.remove, this);
            this.model.get('comments').bind('reset', this.render, this);
            this.model.get('comments').bind('add', this.render, this);
            this.model.get('comments').bind('remove', this.render, this);
            //I pass the DOM reference here
            this.commentsView = new App.views.comments({collection: this.model.get('comments'), el: this.$el}); 
        },
        render: function() {
            var modelJSON = this.model.toJSON();
            //the DOM reference is only ready and defined here
            this.$el.html(this.template(modelJSON)); 

            return this;
        }
});
App.views.comments = Backbone.View.extend({
        initialize: function() {
            _.bindAll(this, 'render', 'renderComment');

            this.collection.bind('reset', this.render, this);
            this.collection.bind('add', this.renderComment, this);
            this.collection.bind('remove', this.remove, this);

            this.collection.fetch();

        },
        render: function() {
            //if there wasn't the fetch() above, $el would be undefined at this point
            this.$el.find('.feed-comments ul').html('');
            this.collection.each(this.renderComment);

        },
        renderComment: function(comment) {
            var view = new App.views.comment({model: comment});
            this.$el.find('.feed-comments ul').append(view.render().el);
        }
    });
});
App.views.comment = Backbone.View.extend({...}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T11:38:25.457

我建议您将此行`this.commentsView = new App.views.comments({collection: this.model.get('comments'), el: this.$el});`移至`App.views.task.render()`.

事实上，这条线是*渲染*行为的一部分，所以这是更好的地方。

这样做你也可以这样做：

```
this.commentsView = new App.views.comments({collection: this.model.get('comments'), el: this.$el.find('.feed-comments ul')}); 
```

我认为它要求的是什么。

你应该做更多的事情，比如打电话`this.commentsView.render()`，`App.views.task.render()`但我认为你可以从这里关注我。****

# python - Python 嵌套列表和迭代

> ID：12019825
> 
> 赞同：8
> 
> 时间：2012-08-18T15:32:54.283
> 
> 标签：python, python-2.7

*我是 Python 新手，我进行了搜索，但找不到我要找的东西。如果有人问过这个问题，并且由于我不知道我想要达到的目标的名称而找不到它，我提前道歉。我很乐意阅读您可能建议的任何文件。*

我有一个列表列表。例如 => [int, 'str']

```
t = [[0234, 'str_0'],
     [1267, 'str_1'],
     [2445, 'str_2']] 
```

我想知道是否存在于**列表 t****`a str`**列表之一的 index(1) 位置。我可以使用包含 2 个 for 或 while 循环的函数来做到这一点，但我正在寻求的是，如果可能的话，使用一次迭代来实现这一点。我想学习最短的函数。

 **`for input str('str_3'), I want to get int(2)`（在其自己的第一个索引位置具有 str_3 的列表的索引）对于 str_1，我想获得 int(0)

对于**str_1234**我想得到**False**因为它不在**`list t`**

作为一个新手，我通常会这样做：

```
for n in range(len(t)):
    if t[n][1] == 'str_1'
        return n
    return False 
```

如果可能的话，我正在寻求的是一种更好、更短的方法来在一行代码中实现这一目标，或者只是简单地了解是否有一种更聪明、更好或更pythonic的方式，而你们中的任何一个人肯定更有经验的会推荐。

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-18T15:37:35.640

```
[n for n, (i, s) in enumerate(t) if s == 'str_3'] 
```

Explanation:

```
>>> t = [[100, 'str_1'], [200, 'str_2'], [300, 'str_3']]

# Use enumerate to get each list item along with its index.
>>> list(enumerate(t))
[(0, [100, 'str_1']), (1, [200, 'str_2']), (2, [300, 'str_3'])]

# Use list comprehension syntax to iterate over the enumeration.
>>> [n for n, (i, s) in enumerate(t)]
[0, 1, 2]

# An if condition can be added right inside the list comprehension.
>>> [n for n, (i, s) in enumerate(t) if s == 'str_3']
[2]
>>> [n for n, (i, s) in enumerate(t) if s == 'str_1234']
[] 
```

This will return all of the matching indices, since there could be more than one.

If you know there will only be one index, may I suggest using a dict instead of a nested list? With a dict you can lookup elements in constant time using very straightforward syntax, rather than having to iterate.

```
>>> t = {'str_1': 100, 'str_2': 200, 'str_3': 300}

>>> 'str_3' in t
True
>>> t['str_3']
300

>>> 'str_1234' in t
False
>>> t['str_1234']
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
KeyError: 'str_1234' 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-18T15:41:13.143

将该[`any`函数](http://docs.python.org/library/functions.html#any)与生成器表达式一起使用：

```
any(el[1] == 'str_1' for el in t) 
```

它的作用是循环`t`，对于每个`el`in`t`我们测试它的第二个值是否等于`str_1`，就像你的循环一样。

但它只会这样做，直到它找到一个为真的元素，然后停止，返回`True`。如果它没有找到这样的元素，它将返回`False`。

相反，如果您不仅想测试是否存在，`str_1`还想知道它的位置，最有效的方法是像您一样使用循环。您可以使用`enumerate`为您提供序列中的索引和值：

```
for n, el in enumerate(t):
    if el[1] == 'str_1'
        return n
    return False 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-18T15:42:37.587

您给出的 for 循环示例不是在 python 中使用 for 循环的常用方法，因为 for 循环不是数字结构（就像在大多数语言中一样），而是一种将循环体应用于每个元素的方法通过给定集合的*迭代*产生。

查找索引的正常方法（使用循环）是：

```
for (n, (integer, string)) in enumerate(t):
    if 'str1' == string:
        return n 
```

请注意，在这种情况下，*序列分配*用于将每个两项列表的元素分配给单独的变量。在 python shell 中自己尝试该`enumerate`函数以了解它的作用。

如果您的列表已排序，您可能希望使用`bisect`：[http ://docs.python.org/library/bisect.html](http://docs.python.org/library/bisect.html)

如果您只想找出是否有一对满足您的条件，并且您不关心索引，请使用`any`，一旦找到匹配项就会停止迭代：

```
any(string == 'str_1' for integer, string in t) 
```

里面的表达式`any`是一个*生成器表达式*，它为 t 中的每个元素生成`True`或`False`。

最后，考虑这是否真的是最合适的数据结构。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-18T16:15:19.753

首先，让我们做一个类似于您所描述的实际数据结构：

```
>>> LoL=[[i,'str_{}'.format(i)] for i in list(range(10))+list(range(10,0,-1))]
# this is Py 3, so that is why I need 'list' around range
>>> LoL
[[0, 'str_0'], [1, 'str_1'], [2, 'str_2'], [3, 'str_3'], [4, 'str_4'], [5, 'str_5'], 
 [6, 'str_6'], [7, 'str_7'], [8, 'str_8'], [9, 'str_9'], [10, 'str_10'], [9, 'str_9'], 
 [8, 'str_8'], [7, 'str_7'], [6, 'str_6'], [5, 'str_5'], [4, 'str_4'], [3, 'str_3'], 
 [2, 'str_2'], [1, 'str_1']] 
```

现在为每个匹配等于'str_5'的测试的元素制作一个元组列表

```
>>> [(i,li,ls) for (i,(li,ls)) in enumerate(LoL) if ls == 'str_5']
[(5, 5, 'str_5'), (15, 5, 'str_5')] 
```

现在，使用不存在的字符串进行测试：

```
>>> [(i,li,ls) for (i,(li,ls)) in enumerate(LoL) if ls == 'str_123']
[] 
```

然后很容易测试存在，计算出现次数并提取所需的项目：

```
>>> for t in [(i,li,ls) for (i,(li,ls)) in enumerate(LoL) if ls == target]:
...    print('index: {}, int: {}, str: "{}"'.format(*t))
... 
index: 7, int: 7, str: "str_7"
index: 13, int: 7, str: "str_7" 
```

正如其他人所说，你可以改变你的数据结构。您是否保留`int_x`为索引？不要那样做。使用字符串列表并枚举。如果它只是 str_x 和 int_x 之间的映射，请使用字典。**

# php - PHP生成动态PDO插入

> ID：12019826
> 
> 赞同：7
> 
> 时间：2012-08-18T15:33:02.897
> 
> 标签：php, mysql, pdo

以下代码应将数组中的每个键值对插入到表中的数学列值中。该脚本不返回错误，但插入的行仅包含数组中的最后一个值

例如

```
array('one'=>1,'two'=>2,'three'=>3); 
```

在具有第一、二和三列的表中成功插入该行，但总共插入值 3。

```
 $columns = array();
    $bind = '';
    foreach($array as $key => $value){

        $columns[] = $key;

    }

    $columnString = implode($columns,',');
    $valueString = implode($columns,',:');
    $valueString = ':' . $valueString;

    $core = core::getInstance();
    $STH = $core->dbh->prepare("INSERT INTO table (" . $columnString . ") VALUES 
    (" . $valueString . ")");

    foreach($array as $key => $value){

        $STH->bindParam(':' . $key,$value);
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-18T15:55:55.077

忘记`bindParam`，只需使用`execute`并传递以下值`$array`：

```
$STH->execute($array); 
```

或者，您可以完全从头开始命名参数以简化您的代码：

```
$columnString = implode(',', array_keys($array));
$valueString = implode(',', array_fill(0, count($array), '?'));

$STH = $core->dbh->prepare("INSERT INTO table ({$columnString}) VALUES ({$valueString})");
$STH->execute(array_values($array)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T15:55:38.900

也许是这样的：

```
$columns = array('one'=>1,'two'=>2,'three'=>3);

$columnString = implode(',', array_flip($columns));
$valueString = ":".implode(',:', array_flip($columns));

$core = core::getInstance();
$STH = $core->dbh->prepare("INSERT INTO table (" . $columnString . ") VALUES (" . $valueString . ")");

foreach($columns as $key => $value){
    $STH->bindValue(':' . $key, $value);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T15:42:11.833

```
foreach($array as $key => $value){
    $STH->bindParam(':' . $key,$array[$key]);
} 
```

试试看

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-26T16:17:12.977

如果想使用位置占位符实现您的目标，@netcoder 的回复也很好。但是，您可以使用**sprintf**函数来准备使用命名占位符的动态 sql 查询。

```
$sql = sprintf("INSERT INTO table (%s) VALUES(%s)",
              implode(", ", array_keys($array)),
              ":" . implode(", :", array_keys($array)));

$pdo->prepare($sql);
$pdo->execute($array); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-30T09:34:07.860

```
$conn = new PDO('mysql:host=' . $HOST . ';dbname=' . $DATABASE, $USERNAME, $PASSWORD);
$conn->exec("set names utf8");
$conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_WARNING);

$ins_query = 'INSERT INTO `' . $table_name . '` ';

$columns = array();
$columns_bindings = array();
foreach ($dataArray as $column_name => $data) {
    $columns[] = $column_name;
    $columns_bindings[] = ':' . $column_name;
}

$ins_query = $ins_query . '(' . implode(', ', $columns) . ') VALUES (' . implode(', ', $columns_bindings) . ')';

$stmt = $conn->prepare($ins_query);

foreach ($dataArray as $column_name => $data) {
    $stmt->bindValue(":" . $column_name, $data);
}
if (!$stmt->execute()) {
    print_r($stmt->errorInfo());

} else {
    echo "Insertd";
} 
```

# scala - 在 Scala 未来阻塞？

> ID：12019830
> 
> 赞同：0
> 
> 时间：2012-08-18T15:33:43.940
> 
> 标签：scala, concurrency, actor, future

我有一个很长的字符串序列，它们需要由某个处理函数单独处理，然后作为另一个序列对象收集。这个问题似乎非常适合 fork/join 类型的攻击。

该函数是一个实例化非常昂贵的类的成员。但是在期货之间实例化和共享单个类对象似乎会导致问题，因此我实例化了可用处理器数量的 4 倍，然后将它们拆分到期货之间。

```
// instantiate processing class objects
val processors = 1 to SomeNumber map (x=> new MyProcessor)
val processorstream = Stream.continually(processors).flatten
// the input strings
val input: Seq[String] = some sequence of strings
val splitinput = input.grouped(some large number).toStream
// create futures
val mytask = splitinput.zip(processorstream).collect {
    case (subseq of strings, processor) => future {
        map elements of subsequence of strings with processor}} 
```

然后我像这样收集输出

```
val result = mytask.map(x => x.apply()).reduce(_++_) // or some appropriate concatenation operator 
```

我的问题是，即使我有 8 个内核，这也不能让我充分利用 cpu。它只使用一个核心。

为了调查，我尝试过的另一种选择是

```
val input: Seq[String] = some sequence of strings
// no stage where I split the input into subsequences
val mytask = input.zip(processorstream).collect {
    case (string, processor) => future {
        process string with processor}}
val result = mytask.map(x => x.apply()) 
```

这种替代方法既有效又无效。它实现了充分的 cpu 利用率，但抛出了几个异常，因为（假设）处理器在每个字符串中运行的速度太快，有时相同的处理器对象会同时应用于不同的字符串。

我更加确信我的假设是处理器工作速度太快，因为如果我提供更长的输入（例如，整个文本文档而不是 10 个单词的标题），我可以充分利用 CPU，而不会抛出任何异常。

我还尝试过使用 akka 期货和 scalaz 承诺，当我将输入序列拆分为子序列时，它们似乎都只使用一个 cpu。

**那么，在这种情况下，如何在使用字符串子序列作为输入的同时充分利用期货？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T20:08:39.827

每 @om-nom-nom ：

```
input.par.map { s => task(s) } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T20:41:23.160

您可以尝试使用`ThreadLocal`可变处理器。相当无用的例子：

```
val words = io.Source.fromFile("/usr/share/dict/words").getLines.toIndexedSeq

class Processor {
  val sb = new StringBuffer() // mutable!
  println("---created processor---")
  def map(s: String): Int = {
    sb.setLength(0)
    for (i <- 1 to s.length()) {
      sb.append(s.substring(0, i))
    }
    sb.toString().sum.toInt  // don't make any sense out of this
  }
}

val tl = new ThreadLocal[Processor] {
  override protected def initialValue() = new Processor
}

val parRes = words.par.map(w => tl.get.map(w)).sum
val serRes = words.map(    w => tl.get.map(w)).sum
assert(parRes == serRes) 
```

`---created processor---`正如消息所证明的那样，默认情况下，这将创建与 CPU 内核一样多的线程。

# objective-c - 当单元格包含 UITextView 时，UITableView willDisplayCell 不会被触发

> ID：12019831
> 
> 赞同：1
> 
> 时间：2012-08-18T15:33:49.180
> 
> 标签：objective-c, ios, uitableview, uitextview

我想我偶然发现了 UITableView 类中的奇怪错误。如果表格中的单元格包含 UItextView（在我的情况下不可编辑且不可滚动），并且用户选择其文本（显示复制菜单），则包含该特定 UITextView 的单元格将不再正常工作。UITableView 将不再为该单元格触发 willDisplayCell 和 cellForRowAtIndexPath 方法。我做了一些测试，当单元格离开屏幕时，它们会从 visibleCells 数组中删除，当它们再次出现在屏幕上时，它们会被放回 visibleCells 数组中，但没有调用委托方法。

这很烦人，因为它会阻止您配置可重复使用的单元格。我不确定这是否被认为是一个错误。我想您是否可以仔细检查并确认此行为。

这是我的简化测试代码，您可以自己检查：

```
#pragma mark - View lifecycle

- (void)viewDidLoad
{
    [super viewDidLoad];

    tableData = [[NSArray alloc]initWithObjects:@"First Text",@"Second",@"Third",@"Fourth",@"5th",@"6th",@"7th",@"8th",@"9th",@"10th",@"11th",@"12th",@"13th", nil];

    self.tableView = [[UITableView alloc]initWithFrame:CGRectMake(0, 0, 320, 460) style:UITableViewStylePlain];
    self.tableView.backgroundColor = [UIColor darkGrayColor];
    self.tableView.dataSource = self;
    self.tableView.delegate = self;

    [self.view addSubview:self.tableView];

    UIButton* btn = [[UIButton alloc]initWithFrame:CGRectMake(200, 0, 100, 30)];
    [btn setBackgroundColor:[UIColor redColor]];
    [btn setTitle:@"Clickme" forState:UIControlStateNormal];
    [btn addTarget:self action:@selector(onBtnClick:) forControlEvents:UIControlEventTouchUpInside];

    [self.view addSubview:btn];
    // Do any additional setup after loading the view, typically from a nib.
}

#pragma mark -  TableView Datasource

-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return tableData.count;
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:    (NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) 
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        UITextView* tv = [[UITextView alloc]initWithFrame:cell.contentView.bounds];
        [tv setEditable:NO];
        [cell.contentView addSubview:tv];        
    }

    for (UIView* subview in cell.contentView.subviews) 
    {
        if([subview isKindOfClass:[UITextView class]])
        {
            UITextView* tv = (UITextView*)subview;
            tv.text = [tableData objectAtIndex:indexPath.row];
        }
    }
    NSLog(@"Configured cell at index: %d", indexPath.row);
    return cell;

}

#pragma mark - TableView Delegate

-(void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell     forRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSLog(@"Will display cell at index: %d", indexPath.row);
}

#pragma mark - Button callback handlers
-(void)onBtnClick:(id)sender
{
    NSLog(@"Number of visible cells: %d",[self.tableView visibleCells].count);
} 
```

通过运行此代码，您可以看到在第一个单元格中选择文本将导致 tableview 在单元格再次出现在屏幕上时停止触发委托事件。通过按下按钮，您可以检查可见单元格的数量是否始终正确，这意味着单元格正在被添加和删除到可见单元格列表中。只是没有触发的回调委托。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-10T14:29:37.733

不完全是一个解决方案，但一种替代方法是子类化`UITableViewCell`和覆盖`- (void)prepareForReuse`以在重用之前进行任何清理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-10T16:19:38.580

我可以在这里重现您的问题 - 一旦上下文菜单打开（复制，...），该单元格似乎保持焦点并且不会重新加载。

如果你不需要 UITextView 的上下文菜单，你可以为你的文本视图使用一个硬编码的包装类：

```
@interface NonSelectableTextView : UITextView

@end

@implementation NonSelectableTextView

-(BOOL)canBecomeFirstResponder {
    return NO;
}

@end 
```

# github - 从 Bazaar 推送到 Github

> ID：12019834
> 
> 赞同：5
> 
> 时间：2012-08-18T15:34:03.577
> 
> 标签：github, bazaar

我在 Bazaar 中开发代码并想在 Github 上发布它。实现这一目标的最佳方法是什么？

如果该解决方案仅提供一种将 Bazaar 存储库中的一个分支推送到 Github 的方法，则可以。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T14:46:30.457

使用[bzr-git](https://launchpad.net/bzr-git)插件，该插件应与最新版本的 bzr 捆绑在一起。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-10T03:20:20.790

从 Bazaar 2.5.1 开始，bzr dpush（`git`Windows 默认安装的插件的一部分）的正确语法是：

`bzr dpush https://github.com/myUserName/myProject.git/,branch=master`

对于 URL，只需输入 github 提供的用于下拉存储库的完全相同的“HTTPS 克隆 URL”（它位于主存储库页面的最右侧，如果您在页面中搜索“HTTPS 克隆 URL”，您应该会看到它）。

这将在您每次使用时提示您输入密码。如果这变得很麻烦，我建议创建一个[`authentication.conf`](http://doc.bazaar.canonical.com/bzr.2.5/en/user-reference/authentication-help.html)文件（将其存储在 bzr 的 HOME 文件夹中——即`%appdata%\bazaar\2.0`Windows 上的“”）。您还需要加密文件（即使在非共享机器上），因为它会将您的密码作为纯文本 * 颤抖 *.

以下对我有用：

```
[github.com]
scheme=https
host=github.com
user=myUserName
password=myPassword 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-18T15:37:27.243

Use [git-bzr-ng](https://github.com/termie/git-bzr-ng) (a bidirectional bridge between git and bzr).

# php - Symfony2 - Doctrine - 有没有办法将实体保存在一行中？

> ID：12019839
> 
> 赞同：11
> 
> 时间：2012-08-18T15:34:37.670
> 
> 标签：php, symfony, doctrine-orm

为了用教义拯救实体，我应该这样做

```
$em = $this->getDoctrine()->getEntityManager();
$em->persist($product);
$em->flush(); 
```

但也许我可以以某种方式在一行中做到这一点

```
$product->save(); 
```

或者

```
$this->saveEntity($product); 
```

或者

```
$this->getDoctrineEntityManager()->persistAndFlush($product); 
```

如果我需要自己创建这些方法，那么如何以 symfony 的方式实现呢？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-18T17:58:20.657

嗯`persist()`，`flush()`是完全不同的和独立的操作。当您持久化实体对象时，您是在告诉实体管理器跟踪对象的更改。当您调用`flush()`方法时，实体管理器将在单个事务中将实体管理器跟踪的实体对象的更改推送到数据库。大多数时候实体管理器必须管理多个对象。例如，除了您的`product`实体之外，您可能还必须跟踪`tag`或`cart`实体。`persistAndFlush()`每次保存这些实体对象时调用都会导致多个 IO 连接到 DB。这不是有效的。所以我认为最好将它们视为单独的操作。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-18T16:15:43.893

如果您在框架包中使用控制器，并在控制器中编写持久性逻辑，则可以`Symfony\Bundle\FrameworkBundle\Controller\Controller`使用以下内容进行扩展

```
namespace ExampleNameSpace\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;

class BaseController extends Controller
{
    public function persistAndSave($entity)
    {
        $em = $this->getDoctrine()->getEntityManager();
        $em->persist($entity);
        $em->flush();
    }
} 
```

在所有其他控制器中，您将扩展您的`ExampleNameSpace\Controller\BaseController`而不是来自 Symfony Frameworkbundle 的控制器。

或者，我采用的方法是为每个具有类名和注入的学说实体管理器的实体编写一个管理器类。每个管理器类都使用以下方法扩展一个抽象管理器类：

```
<?php

abstract class AbstractManager
{
    /**
     * The Entity Manager
     *
     * @var \Doctrine\ORM\EntityManager  The Doctrine Entity Manager
     */
    protected $em;

    /**
     * The full class path associated with the repository
     *
     * @var string
     */
    protected $class;

    /**
     * The repository for the manager
     *
     * @var \Doctrine\ORM\EntityRepository
     */
    protected $repository;

    /**
     * Creates a new instance of the primary class managed by a given
     * manager
     *
     * @return object       A new instance of the entity being managed
     */
    public function create()
    {
        return new $this->class();
    }

    /**
     * {@inheritDoc}
     */
    public function save($object, $flush = false)
    {
        if( ! $this->supportsClass($object))
        {
            throw new \InvalidArgumentException(sprintf('Invalid entity passed to this manager, expected instance of %s', $this->class));
        }

        $this->em->persist($object);

        if($flush === true)
        {
            $this->flush();
        }

        return $object;
    }

    /**
     * {@inheritDoc}
     */
    public function delete($object, $flush = false)
    {
        if( ! $this->supportsClass($object))
        {
            throw new \InvalidArgumentException(sprintf('Invalid entity passed to this manager, expected instance of %s', $this->class));
        }

        $this->em->remove($object);

        if($flush === true)
        {
            $this->flush();
        }

        return true;
    }

    /**
     * Convenience method providing access to the entity manager flush method
     */
    public function flush()
    {
        $this->em->flush();
    }

    /**
     * {@inheritDoc}
     */
    public function supportsClass($object)
    {
        return $object instanceof $this->class || is_subclass_of($object, $this->class);
    }

    /**
     * Set class. Setter for dependency injection
     *
     * @param object $class  A class related to this manager
     */
    public function setClass($class)
    {
        $this->class = $class;
    }

    /**
     * Set entity manager. Setter for dependency injection
     *
     * @param \Doctrine\ORM\EntityManager $entity_manager
     */
    public function setEntityManager(\Doctrine\ORM\EntityManager $entity_manager)
    {
        $this->em = $entity_manager;
    }

    /**
     * Returns the repository
     *
     * @return \Doctrine\ORM\EntityRepository    A Doctrine Repository for the
     *                                          class related to this Manager
     */
    protected function getRepository()
    {
        if( ! $this->repository)
        {
            $this->repository = $this->em->getRepository($this->class);
        }

        return $this->repository;
    }
} 
```

管理器在依赖注入容器中配置，具有实体的适当类，并提供创建、保存和删除他们负责的实体的访问权限，以及访问存储库的权限。

可以在具有管理器的控制器中创建一个实体，如下所示：

```
public function createAction(Request $request)
{
    $entityManager = $this->get('some.entity.manager');

    $entity = $entityManager->create();

    $form = $this->createForm(new EntityForm(), $entity);

    $form->bindRequest($request);

    if($form->isValid())
    {
        $entityManager->save($entity, true);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-01T00:20:03.720

我知道你的愿望。第一次，单个保存方法看起来不错。

但是，如果您有 2 种方法，则可以在将语句发送到数据库之前收集它们。我猜这不是教义的实际工作，但也许通过更新你可以使用flush（“together”）。通过这种方式，您可以节省大量开销。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-02-01T11:20:06.917

根据[这篇文章](https://matthiasnoback.nl/2014/05/inject-a-repository-instead-of-an-entity-manager/)（最后写了它），您可以将保存代码写入存储库：

```
class DoctrineORMCustomerRepository extends EntityRepository implements CustomerRepository
{
    public function save(Customer $customer)
    {
        $this->_em->persist($customer);
        $this->_em->flush();
    }
} 
```

# android - 如何在 for 循环中使用 drawRect 方法？

> ID：12019842
> 
> 赞同：1
> 
> 时间：2012-08-18T15:34:57.973
> 
> 标签：android, graphics, canvas, drawrect, ondraw

如何使用 DrawRect 方法在画布上绘制一组矩形？我试图通过传递块的坐标来生成动态室内地图。

我想知道..如何在 for 循环中使用 drawRect 方法..！

我在 Luke Taylor 的帮助下上了两节课。（谢谢你..！:)）

一个是坐标，另一个是名为 DrawMapActivity 的主类。现在我需要知道如何填充坐标数组？？？

包 itgsm.drawmap；

```
import android.app.Activity;
import android.graphics.Canvas;
import android.graphics.Paint;
import android.graphics.Rect;
import android.os.Bundle;

public class DrawMapActivity extends Activity {
/** Called when the activity is first created. */

static Coordinates[] coordinates = new Coordinates[10]; // 10 is just an example

//    public void onCreate(Bundle savedInstanceState) {
//        super.onCreate(savedInstanceState);
//        setContentView(R.layout.main);
//     
//    }

public void onDraw(Canvas canvas) {

    Paint myPaint = new Paint(Paint.ANTI_ALIAS_FLAG);
    myPaint.setStrokeWidth(8/*1 /getResources().getDisplayMetrics().density*/);
    myPaint.setColor(0xffff0000);   //color.RED

    for(int i = 0; i < coordinates.length; i++) {
        canvas.drawRect(new Rect(coordinates[i].getX(), coordinates[i].getY(),   coordinates[i].getX() + 10,coordinates[i].getY() + 10), myPaint); // 10 is the dimension of your block
        }

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T16:55:39.937

您可以创建一个方法，该方法采用包含坐标的对象数组：

这将是包含坐标的名为“Coordinate”的类。

```
public class Coordinate {

int x;
int y;

public void setX(int x) {
this.x = x;
}

public void setY(int y) {
this.y = y;
}

public int getX() {
return this.x;
}

public int getY() {
return this.y;

}

} 
```

您可以创建包含各个坐标的这些对象的数组：

```
Coordinates[] coordinates = new Coordinates[10]; // 10 is just an example 
```

在您的渲染方法中，您现在可以渲染各个块。

```
public void drawMap(Coordinates[] coordinates) {
for(int i = 0; i < coordinates.length; i++) {
canvas.drawRect(new Rect(coordinates[i].getX, coordinates[i].getY, coordinates[i].getX + 10,coordinates[i].getY + 10), paint); // 10 is the dimension of your block
}
} 
```

我希望这有帮助。

**更新：**

这是您可以使用 Coordinate 对象填充数组的一个索引的方法：

```
coordinates[1] = new Coordinate();
coordinates[1].setX(0);
coordinates[1].setY(0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T16:09:52.020

```
 public class DrawDemo extends Activity {
DemoView demoview;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    demoview = new DemoView(this);
    setContentView(demoview);
}

private class DemoView extends View{
    public DemoView(Context context){
        super(context);
    }

    @Override protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);

        // custom drawing code here
        // remember: y increases from top to bottom
        // x increases from left to right
        int x = 0;
        int y = 0;
        Paint paint = new Paint();
        paint.setStyle(Paint.Style.FILL);

        // make the entire canvas white
        paint.setColor(Color.WHITE);
        canvas.drawPaint(paint);
        // another way to do this is to use:
        // canvas.drawColor(Color.WHITE);

        // draw a solid green rectangle
        paint.setAntiAlias(false);
        paint.setColor(Color.GREEN);
                    for(int i=0;i<10;i++)
                     {
                    //make changes in arguments here
        canvas.drawRect(100, 5, 200, 30, paint);
                     }
                     }
                      }
                      } 
```

# php - Cakephp Warning: is_dir() [function.is-dir]: open_basedir restriction in effect

> ID：12019844
> 
> 赞同：1
> 
> 时间：2012-08-18T15:35:09.817
> 
> 标签：php, cakephp, cakephp-2.0, cpanel

> **Possible Duplicate:**
> [open_basedir restriction in effect. File(/) is not within the allowed path(s):](https://stackoverflow.com/questions/1846882/open-basedir-restriction-in-effect-file-is-not-within-the-allowed-paths)

I uploaded my cakephp site to my web hosting server using cPanel...

And I got a list of errors after I uploaded the site.

```
Warning: is_dir() [function.is-dir]: open_basedir restriction in effect.
File(/usr/php4/lib/php/cake/libs) is not within the allowed path(s):
(/home/sumykids:/usr/lib/php:/usr/php4/lib/php:/usr/local/lib/php:/usr/local/php4/lib/php:/tmp) in ... 
```

Anyone knows how to solve it?

I try adding .htaccess

```
<IfModule mod_rewrite.c>    RewriteEngine on    RewriteRule    ^$
app/webroot/    [L]    RewriteRule    (.*) app/webroot/$1 [L]   
php_value     include_path .
</IfModule> 
```

It doesn't work too...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T11:56:35.717

> 修改 httpd 配置文件中的 open_basedir 设置。

从这里：[stackoverflow.com/questions/1846882/...](https://stackoverflow.com/questions/1846882/open-basedir-restriction-in-effect-file-is-not-within-the-allowed-paths)

根据您的托管，您可能没有权限这样做，您必须要求他们为您执行此操作。

如果您打算使用 CakePHP 2，您可能必须升级到 PHP5。

> [PHP 5.2.8 或更高版本](http://book.cakephp.org/2.0/en/installation.html)

# android - AccessibilityService 已启动，但在 JellyBean 上未收到 AccessibilityEvents

> ID：12019848
> 
> 赞同：11
> 
> 时间：2012-08-18T15:35:39.883
> 
> 标签：android, android-4.2-jelly-bean, accessibilityservice

我有一个 AccessibilityService 可以读出任何传入的通知。它确实适用于 ICS 及以下版本，但停止使用 JB。

以下是清单和代码：

```
<service
        android:name=".Services.InstantMessengerJb"
        android:enabled="@bool/is_post_jb"
        android:permission="android.permission.BIND_ACCESSIBILITY_SERVICE"
        tools:ignore="ExportedService" >
        <meta-data
            android:name="android.accessibilityservice"
            android:resource="@xml/accessibility_service_config" />

        <intent-filter>
            <action android:name="android.accessibilityservice.AccessibilityService" />
        </intent-filter>
    </service> 
```

* * *

```
@Override
public void onAccessibilityEvent(AccessibilityEvent event) {
    SettingsClass.logMe(tag, "New event!");
    new AccessibilityProcessing(this, event);
}

@Override
protected void onServiceConnected() {
    if (isInit) {
        return;
    }
    SettingsClass.logMe(tag, "We are connected!");
    AccessibilityServiceInfo info = new AccessibilityServiceInfo();
    info.eventTypes = AccessibilityEvent.TYPE_NOTIFICATION_STATE_CHANGED;
    info.feedbackType = AccessibilityServiceInfo.FEEDBACK_SPOKEN;
    setServiceInfo(info);
    isInit = true;
} 
```

如前所述，它确实可以像魅力一样在所有 preJB-Devices 上工作，但是在 JB 上服务启动（我得到“我们已连接”），但没有触发任何事件。

代码有什么问题吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-20T17:49:37.790

这是我让它工作的方式：

1.  子类化服务类，因此有 2 个版本。

2.  在 res/values 目录中有一个 bools.xml 文件，在 res/values-v16 目录中也有一个

3.  在 v16 中将 is_jelly_bean 布尔值设置为 true，在 res/values 目录版本中设置为 is_not_jelly_bean

4.  在清单中有这样的东西

    ```
    <service android:name=".service.MainRunningService" android:enabled="@bool/is_jelly_bean"
        android:permission="android.permission.BIND_ACCESSIBILITY_SERVICE">
        <intent-filter >
             <action android:name="android.accessibilityservice.AccessibilityService" />
        </intent-filter>

        <meta-data
            android:name="android.accessibilityservice"
            android:resource="@xml/accessibilityservice" />
    </service>

    <service android:name=".service.MainRunningServicePreJellyBean" 
        android:enabled="@bool/is_not_jelly_bean">
        <intent-filter >
            <action android:name="android.accessibilityservice.AccessibilityService" />
        </intent-filter>

        <meta-data
            android:name="android.accessibilityservice"
            android:resource="@xml/accessibilityservice" />
    </service> 
    ```

在 res/xml 目录调用accessibilityservice.xml中有一个无障碍服务xml文件

里面有这样的东西：

```
<accessibility-service xmlns:android="http://schemas.android.com/apk/res/android"
android:accessibilityEventTypes="typeNotificationStateChanged"
android:accessibilityFeedbackType="feedbackSpoken"
android:notificationTimeout="100"
android:description="@string/description_that_shows_on_the_accessibility_page" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-12T10:38:42.003

我在 Android 4.1.1 中遇到了这个问题。在我禁用并重新启用无障碍服务之前，无障碍服务没有收到事件。

**为了解决这个问题，我在** `setServiceInfo()`和中定义了无障碍服务参数`accessibilityservice.xml`。

在我的例子中，没有必要定义两个不同的 Android 版本相关的无障碍服务。

# php - 如何在 Facebook 图形 api 中过滤男性和女性 id

> ID：12019850
> 
> 赞同：0
> 
> 时间：2012-08-18T15:36:23.343
> 
> 标签：php, facebook, facebook-graph-api

我知道如何通过以下方式检查 id 是男性还是女性

```
<?php
 //get the user gender 
        $user_id = $facebook->getUser();
        $user_profile = $facebook->api('/me','GET');
        $user_gender = $user_profile['gender'];
        echo "Gender: " . $user_gender;
?> 
```

但我需要获得任何 10 个女性 ID 或 10 个男性 ID ..（不混合）。请问有什么想法吗？

ps：我不要fql请

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T15:59:33.317

我知道您说没有 FQL，但以防万一您无法获得非 FQL 的答案：

```
SELECT sex, uid
FROM user
WHERE uid IN (
  SELECT uid2
  FROM friend
  WHERE uid1 = me()
)
AND sex = 'female'
LIMIT 10 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T17:07:42.513

那么你的问题不是很清楚你从哪里尝试获取用户ID。 **我假设你想分开你朋友的 id**。首先检索好友列表：

```
$f=$facebook->api('/me/friends',array('access_token'=>$accessToken)); 
```

然后定义两个数组：`male=new array();`和`female=new array();`。循环检查每个朋友的性别：

```
foreach($f as $t){
   $usr=$facebook-api("/$t['id']");
       if($usr['gender']=='male')
           $male[]=$usr['id'];
       else 
           $female[]=$usr['id']; 
} 
```

在循环结束时，您将**在各自的数组中拥有所有男性和女性**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-10T09:18:21.250

我开发了一个简单/干净的代码来解决您暴露的问题，只需一个请求。

1.  创建数组（男性，女性）
2.  请求获取 id 和性别 (?fields=id,gender)
3.  循环数据和条件（男性，女性）

```
    // 数组好友
    $female_friends = 数组（）；
    $male_friends = 数组（）；

    // 发出请求
    $friends = $facebook->api('/me/friends?fields=id,gender');

    // 环形
    foreach ($friends['data'] as $friend) {
        if ($friend['gender'] =='female') female_friends.push($friend['id']);
        else ($friend['gender'] =='male') male_friends.push($friend['id']);
    }

    // 显示数据
    print_r($female_friends);
    print_r($male_friends);

```

# c# - Single statement query

> ID：12019851
> 
> 赞同：1
> 
> 时间：2012-08-18T15:36:35.740
> 
> 标签：c#, linq, extension-methods

I have this code:

```
var questionCategory = questionnaire.QuestionCategories
    .First(x => x.Type == (int)questionCategoryType);
return questionCategory.Questions.Select(x => new 
    {
       Id = x.Id,
       Text = x.Text,
    }); 
```

I'm interested if there is a way of shortening this into one statement, i.e. avoid making variable *questionCategory* . I'm looking for Extesion method or LINQ solution, or little bit of both :) .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T15:41:15.433

可能不是最好的方法，但是您可以轻松地将代码简化为一行，而没有像这样的变量存储：

```
return questionnaire.QuestionCategories.First(x => x.Type == (int)questionCategoryType)
                    .Questions.Select(x => new {Id = x.Id, Text = x.Text}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T15:42:01.127

用这种方式，不用检查 null on `QuestionCategories`，最终结果是`Select`on `Questions`，所以你不需要使用`First`，而是使用`Where`：

```
return questionnaire.QuestionCategories 
     .Where(x => x.Type == (int)questionCategoryType) 
     .SelectMany(c => c.Questions.Select(q => new
                                        {
                                            Id = q.Id,
                                            Text = q.Text
                                        })); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T15:51:25.087

我建议使用[FirstOrDefault](http://msdn.microsoft.com/en-us/library/bb549039)而不是[First](http://msdn.microsoft.com/en-us/library/bb535050.aspx)，这样当序列为空或没有任何元素与您的谓词匹配时，您不会收到 InvalidOperationException。

此外，您应该在第一次查询后检查 null 并为这种情况提供默认值。这不是你要求的，但它更具防御性。

```
var questionCategory = questionnaire.QuestionCategories.FirstOrDefault(x => x.Type == (int)questionCategoryType);

return questionCategory != null
        ? questionCategory.Questions.Select(x => new 
                                                 {
                                                    Id = x.Id,
                                                    Text = x.Text,
                                                 })
        : someDefaultValue; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T15:39:03.883

```
return questionnaire.QuestionCategories.First(x => x.Type == (int)questionCategoryType)
            .Questions.Select(x => new { Id = x.Id, Text = x.Text, }); 
```

of if you would like to return `null` if `x.Type == (int)questionCategoryType` is not found:

```
return questionnaire.QuestionCategories.FirstOrDefault(x => x.Type == (int)questionCategoryType)
            .Questions.Select(x => new { Id = x.Id, Text = x.Text, }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-18T16:16:53.567

使用`First`强制执行查询（枚举导航属性也是如此`questionnaire.QuestionCategories`）。为了不发出多个查询，应避免这种情况。

```
return from qc in dataContext.QuestionCategories
       where qc.QuestionaireID == questionnaire.ID //guessing names here
       where qc.Type == (int)questionCategoryType
       from q in qc.Questions
       select new 
    {
       Id = q.Id,
       Text = q.Text,
    }; 
```

这将发出一个查询，将所有工作远程转移到 SQL Server。

# java - Memory allocation in Java - Android

> ID：12019852
> 
> 赞同：5
> 
> 时间：2012-08-18T15:36:53.760
> 
> 标签：java, android, garbage-collection, java-memory-model

If I have:

```
Bitmap bitmap = Bitmap.create(..); // instance a
bitmap = Bitmap.create(...); // instance b
bitmap = null;
bitmap = Bitmap.create(...); // instance c
bitmap.recycle();
bitmap = Bitmap.create(...); // instance d
bitmap.recycle();
bitmap = null; 
```

Once this code is executed, which of the 4 instances are still in memory? I know .recycle() instructs the native code to deallocate all resources to that object, but there's no guarantee of when that happens.

The reason I'm asking, is let's look at the following loop:

```
Bitmap bitmap = null;

while (true) {
    bitmap = Bitmap.create(...);    
} 
```

This I assume will eventually crash the app (out of memory)? If so, how should this loop be rewritten? (If I'm using bitmap to animate and display changed state).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-23T23:26:42.977

Java（以及 Android 的扩展）使用异步[垃圾收集](https://en.wikipedia.org/wiki/Garbage_collection_(computer_science))来清理分配的内存。收集器在后台运行，释放它可以释放的内存。这意味着，您在任何时候都无法保证*有多少无法访问的对象已被清理，而哪些对象仍处于待处理状态。

在您的第一个代码块完成执行后，可能所有四个`Bitmap`对象都仍然存在于堆上，但在某个时候垃圾收集器将运行，确定它们都不再可访问，并释放它们相关的内存。

在您的第二个代码块中也是如此；即使它们不再可访问，堆上仍会存在一些任意数量的对象，但是 GC 会在发生这种情况时尽最大努力清理它们。在实践中，GC*非常*擅长清理此类短期对象，因此它甚至可以跟上您的循环（但这不是保证）。

JVM/ART 将尽最大努力避免出现这种`OutOfMemory`情况，包括激进的最后一次垃圾收集，以尝试回收任何可能的内存以保持应用程序运行。因此，您的第二个循环不太可能导致任何问题，但它对您来说很容易测试。

希望您不是真的创建并立即丢弃数千个`Bitmap`对象；大概它们至少被使用了一段时间，在此期间，您不仅仅是创建更多`Bitmap`未使用的 s （如果是这样，那是您的问题）。

[* 有一些技巧，例如 using [`PhantomReference`](https://docs.oracle.com/javase/8/docs/api/java/lang/ref/PhantomReference.html)，确实可以让您监控垃圾收集的状态，但是这些技巧会给 GC 带来更多负担，因此通常不是一个好主意 - 也不是必需的。]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T15:49:03.860

Android 使用 DalvikVM，其功能与 Java 几乎相似。除非需要，否则它不会回忆。

[MAT](http://www.eclipse.org/mat/)是使用 hprof for android 分析内存转储的出色工具。

您可以使用 MAT 自己找到答案

# node.js - Nodejs, Express, site navigation

> ID：12019861
> 
> 赞同：0
> 
> 时间：2012-08-18T15:38:21.667
> 
> 标签：node.js, express, pug

I'm writing a simple web application using Nodejs, Express, and Jade. I've set up my routes appropriately. I'm having a problem with navigating between views. I am able to change views by entering the appropriate url in my browser. How can I get my application to change views on button click? I realize this may stem from a fundamental misunderstanding of the technologies I'm using.

Currently, I am trying to hit my controller via jquery ajax

```
$('#submit').click(function(){
  $.ajax({
     url: "/go",
     data: "site=" + $('#website').val() + "&img=" + $('#image').val()
  }); 
```

});

This successfully hits my controller:

```
app.get('/go', function(req, res){
    res.render('view', {title: 'create', site: req.query['site'] }); 
```

This returns the proper html, however it does not get rendered as a new view.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T15:52:06.013

这将严重依赖于您的客户端代码是如何设置的（例如，您是否使用像 Backbone 这样的框架？）。最简单的方法就是为导航按钮设置点击处理程序，只需更改`window.location.href`为与相应视图关联的 URL。当然，这将导致在每次视图更改时重新加载完整的页面，这可能是可取的，也可能不是可取的，但是如果不了解更多关于应用程序的结构，没有人可以说更多。

或者，您可以使用良好的旧链接进行导航，并使用 CSS 使它们看起来像按钮。

请注意，这些注意事项与您使用的服务器端技术无关。

# android - Android: GPS lose fix

> ID：12019862
> 
> 赞同：1
> 
> 时间：2012-08-18T15:38:41.253
> 
> 标签：android, gps

I have problem with gps implementation on Android. The problem is GPS lose fix. The location icon is pulsing, after few seconds toast shows with position and then GPS lose fix and try to connect again.

My service:

```
public class LocationService extends Service {

    private static final long MIN_TIME = 15000;
    private static final float MIN_DISTANCE = 1;

    private final IBinder binder = new LocalBinder();

    private LocationManager locationManager;

    @Override
    public void onCreate() {
        super.onCreate();

        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);     
    }

    @Override
    public IBinder onBind(Intent intent) {
        return binder;
    }

    public class LocalBinder extends Binder {
        LocationService getService() {
            return LocationService.this;
        }
    }

    public void setListener(LocationListener listener) {
        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, MIN_TIME, MIN_DISTANCE, listener);
    }

    public void removeListener(LocationListener listener) {
        locationManager.removeUpdates(listener);
    }
} 
```

My activity:

```
public class MainMapActivity extends CustomMapActivity implements LocationListener {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.map_layout);

        Intent i = new Intent(this, LocationService.class);
        startService(i);
        bindService(i, conn, BIND_AUTO_CREATE);
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
        unbindService(conn);
    }

    ServiceConnection conn = new ServiceConnection() {

        @Override
        public void onServiceDisconnected(ComponentName name) {

        }

        @Override
        public void onServiceConnected(ComponentName name, IBinder service) {
            // TODO Auto-generated method stub
            serv = ((LocalBinder)service).getService();
            serv.setListener(MainMapActivity.this);
        }
    };

    @Override
    public void onLocationChanged(Location location) {
        Toast.makeText(this, Double.toString(location.getLatitude())+Double.toString(location.getLongitude()),     Toast.LENGTH_SHORT).show();
    }

    @Override
    public void onProviderDisabled(String provider) {

    }

    @Override
    public void onProviderEnabled(String provider) {

    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {

    }
} 
```

It is not a problem with device, because in Google Map App it works perfect.

Thanks for help

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T16:08:48.197

You have passed a minimum time parameter of 15 seconds to the location listener. In most devices/OS versions this will turn off the GPS for that amount of time before re-enabling it.

# java - How to get network traffic statistics?

> ID：12019864
> 
> 赞同：3
> 
> 时间：2012-08-18T15:38:52.947
> 
> 标签：java, netty

I'm using Netty 3.5.4.Final.

How can one get the number of inbound and outbound transferred bytes within a single netty client/server instance? Current or average upload/download speed would be nice too.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T17:01:56.820

该包`org.jboss.netty.handler.traffic`提供了您需要的类。您可以在管道中安装`GlobalTrafficShapingHandler`（读取和写入限制 = 0）来测量吞吐量和通过管道的字节数。

# delphi - Catch audio sessions events

> ID：12019865
> 
> 赞同：3
> 
> 时间：2012-08-18T15:38:54.537
> 
> 标签：delphi, audio, windows-7, com

I try to write some application that will monitor audio sessions (like SndVol does). I activated IAudioSessionManager2, got list of current audio sessions through IAudioSessionEnumerator, registered for the notification using RegisterSessionNotification method in audio session manager. However, my application never receives notification OnSessionCreated(). Of course, I read the similar topics here: [Notifications not sent](https://stackoverflow.com/questions/736084/iaudiosessionmanager2-notifications-not-sent), [IAudioSessionNotification anyone have working code](https://stackoverflow.com/questions/858974/iaudiosessionnotification-anyone-have-working-code)

I read carefully all the answers but I couldn't find what I am doing wrong. Here is my code (Delphi):

```
TDNAudioSessionManager = class(TDNUnknownObject, IAudioSessionNotification)
private
  FManager: IAudioSessionManager2;
  FList: TDNAudioSessionList;
  function IsManagerValid: Boolean;
protected
  procedure ActivateSessionManager(out AManager: IAudioSessionManager2);
  procedure GetCurrentSessions;
  // IAudioSessionNotification
  function OnSessionCreated(ANewSession: IAudioSessionControl): HRESULT; stdcall;
public
  constructor Create;
  destructor Destroy; override;
end;

constructor TDNAudioSessionManager.Create;
begin
  inherited Create;
  ActivateSessionManager(FManager);
  if IsManagerValid then
  begin
    FList := TDNAudioSessionList.Create;
    FManager.RegisterSessionNotification(Self);
    GetCurrentSessions;
   end;
 end;

destructor TDNAudioSessionManager.Destroy;
begin
  if IsManagerValid then
  begin
    FManager.UnregisterSessionNotification(Self);
    FManager := nil;
  end;
  FreeAndNil(FList);
  inherited Destroy;
 end;

function TDNAudioSessionManager.IsManagerValid: Boolean;
begin
  Result := Assigned(FManager);
end;

procedure TDNAudioSessionManager.GetCurrentSessions;
var
  AEnumerator: IAudioSessionEnumerator;
  ASession: IAudioSessionControl;
  ACount: Integer;
  I: Integer;
begin
  if IsManagerValid then
    if FManager.GetSessionEnumerator(AEnumerator) = S_OK then
    try
      AEnumerator.GetCount(ACount);
      for I := 0 to ACount - 1 do
      begin
        AEnumerator.GetSession(I, ASession);
        FList.Add(ASession);
      end;
    finally
      AEnumerator := nil;
    end;
end;

function TDNAudioSessionManager.OnSessionCreated(ANewSession: IAudioSessionControl): HRESULT;
begin
  FList.Add(ANewSession);
  Result := S_OK;
end;

procedure TDNAudioSessionManager.ActivateSessionManager(out AManager: IAudioSessionManager2);
var
  AEnumerator: IMMDeviceEnumerator;
  ADefault: IMMDevice;
  ARes: HRESULT;
begin
  AManager := nil;
  ARes := CoCreateInstance(CLSID_MMDeviceEnumerator, nil, CLSCTX_INPROC_SERVER, IID_IMMDeviceEnumerator, AEnumerator);
  if not ARes = S_OK then Exit;
  if AEnumerator.GetDefaultAudioEndpoint(eRender, eConsole,  ADefault) = S_OK then
  try
    ADefault.Activate(IID_IAudioSessionManager2, CLSCTX_INPROC_SERVER, nil, AManager);
  finally
    ADefault := nil;
  end;
end;

initialization
  CoInitializeEx(nil, COINIT_MULTITHREADED);
end. 
```

Note: TDNUnknownObject is class that implements IUnknown methods.

And one more question: what event does audio session send when application is closed? (in SndVol it is removed from list). I tried OnSessionDisconnected, OnStateChanged (with state AudioSessionExpired) but my app never receive them too.

Thanks in advance!

TDNUnknownObject:

```
TDNUnknownObject = class(TObject, IUnknown)
protected
  // IUnknown
  function _AddRef: Integer; stdcall;
  function _Release: Integer; stdcall;
  function QueryInterface(const IID: TGUID; out Obj): HRESULT; virtual; stdcall;
end;

function TDNUnknownObject._AddRef: Integer; stdcall;
begin
  Result := -1;
end;

function TDNUnknownObject._Release: Integer; stdcall;
begin
  Result := -1;
end;

function TDNUnknownObject.QueryInterface(const IID: TGUID; out Obj): HRESULT; stdcall;
begin
  if GetInterface(IID, Obj) then
    Result := S_OK
  else
    Result := E_NOINTERFACE;
end; 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2016-08-21T21:06:35.660

好吧，我对此摸不着头脑。第一个问题出现了：为什么不使用 TInterfacedObject？节省了大量工作，并被证明可以正常工作。此对象派生自 IUnknown 并别名为 IInterface，并且完全按照您在此处尝试执行的操作。当然，您可以尝试编写自己的版本，但要注意：Delphi 编译器会更加严格，因此您很容易遇到双重实现和名称冲突等陷阱。由于这些原因，编译器、链接器和调试器的行为可能会很奇怪。

好的，来自 MS 的简短说明：确保应用程序通过在非 UI 线程中调用 CoInitializeEx(Nil, COINIT_MULTITHREADED) 使用多线程单元 (MTA) 模型初始化 COM。如果 MTA 未初始化，则应用程序不会从会话管理器接收会话通知。运行应用程序用户界面的线程应该是初始化单元线程模型。

你去：你的初始化部分不正确。它应该是：

```
initialization
  CoInitializeEx(Nil,
                 COINIT_APARTMENTTHREADED); 
```

# c# - 如何使用 MVC Winforms 在 DB 中添加新记录

> ID：12019869
> 
> 赞同：-1
> 
> 时间：2012-08-18T15:39:25.613
> 
> 标签：c#, sql, winforms, model-view-controller

我想使用 MVC 模式 winforms 将记录添加到数据库中。将记录添加到数据库中的功能正在工作，但我想通过使用对象方法来完成。

有人请我在这里用 MVC 模式做的错误是什么？

看法：

```
 using System;
using System.Data.SqlClient;
using System.Globalization;
using System.Windows.Forms;
using MVCwithDBFormReg.Controller;
using MVCwithDBFormReg.Model;

namespace MVCwithDBFormReg.View
{
    public partial class Form1 : Form, IUserView
    {

        private readonly User _model;
        public Form1(User model)
        {
            _model = model;
            InitializeComponent();
        }

        public event CreateUserHandler Create;

        private void button3_Click(object sender, System.EventArgs e)
    {
        _model.FirstName = FirstName;
        _model.LastName = LastName;
        _model.Language = Language;
        _model.Country = Country;
        _model.State = State;
        _model.Zipcode = Zipcode;
        _model.TimeZone = TimeZone;
        _model.Sex = Sex;
        _model.Month = Month;
        _model.Day = Day;
        _model.Year = Year;
        _model.Occupation = Occupation;

        Create(_model);

    }

    }
} 
```

模型：

```
 namespace MVCwithDBFormReg.Model
{
    public class User
    {

        public string FirstName { get; set; }
        public string LastName { get; set; }
        public string Language{ get; set; }
        public string Country{ get; set; }
        public string State{ get; set; }
        public int Zipcode { get; set; }
        public string  TimeZone{ get; set; }
        public Gender Sex { get; set; }
        public enum Gender
         {
            Male = 1,
            Female = 2

         }
         public string Month { get; set; }
         public string Day { get; set; }
         public int Year { get; set; }
         public string Occupation { get; set; }

    } 
```

控制器：

```
 namespace MVCwithDBFormReg.Controller
{
   public class UserController
   {

       private SqlConnection sqlConnection1;
       private void ViewOnSave(User model)
       {
           if (model.FirstName == "" || model.LastName == "")
               MessageBox.Show("Please enter your name");
           else
           {
               sqlConnection1.Open();

               string insert = "INSERT INTO REGISTER(FNAME, LNAME, LANG, COUNTRY, STATE, ZIPCODE, TIMEZONE, GENDER, BDAY, BMONTH, BYEAR, OCCUPATION) " +
                               "VALUES ('" + model.FirstName + "','" + model.LastName + "','"
                               + model.Language + "','" + model.Country + "','"
                               + model.State + "','" + model.Zipcode
                               + "','" + model.TimeZone + "','"
                               + model.Sex + "','" + model.Day + "','"
                               + model.Month + "','" + model.Year + "','"
                               + model.Occupation + "')";
               SqlCommand cmd = new SqlCommand(insert, this.sqlConnection1);
               cmd.ExecuteNonQuery();

               sqlConnection1.Close();
               MessageBox.Show("You have been successfully registered to our database.");
           }
       }
   }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T15:57:34.733

这件事在技术上并不完全是 MVC（我怀疑 MVC 在 WinForms 项目中是否有很多意义，MVVM 模式已经证明它自己更有用。虽然我可能错了，因为在某些特殊情况下 MVC 是有意义的）。

首先，您的模型类不是 UserRegister，而是 User。其次，您不一定需要 UserRegister 类，因为您可以在控制器中保存（这不是一个很好的做法，但对于培训目的来说足够简单）。或者，如果您真的想将数据库操作与控制器代码分开，您可以使用类似 Repository 模式的便利（就像一个 Repository 类中的 UserRegister、UserLoad、UserFind 类）。我建议阅读一些关于建筑和设计的 Martin Fowler 书籍（或只是互联网教程）。

现在我们已经了解您的模型是什么（纯数据） - 用户。您的视图不应该有任何逻辑（例如将数据保存到数据库或计算泰迪熊的折扣） - 只有视图。视图绑定到模型，这意味着它显示模型有什么，并通过控件设置模型的属性。就像 - 您有一个用户名文本框，它显示来自 Model.Name 的数据，并在更改时设置 Model.Name。

每当`Save`单击按钮时，您的视图都会向您的控制器发送**更改**的模型，以便它可以对其进行操作。然后控制器将事情拼凑在一起 - 比如要求您的 UserRegister 保存它从视图中获得的用户。顺便说一句，这里不需要事件，尽管你可以使用它们。

我将尝试以支持上述所有内容的方式显示您的代码更改：

看法：

```
private readonly User _model;
public Form1(User model)
{
    _model = model;
    InitializeComponent();
}

public event CreateUserHandler Create; // should be changed to use User 
//Function to create a new record into the DB
private void btnSave_click(object sender, System.EventArgs e)
{
    // if model is not bound via binding, it needs update before Create.
    Create(_model); // needs changes to current EventHandler
} 
```

型号 - 没有变化；UserRegister - 死了。

某处（如在 Delegates.cs 单独文件中）：

```
public delegate void CreateUserHandler(User model); 
```

控制器：

```
public UserController(IUserView view)
{
    _view = view;
    _view.Create += ViewOnSave;
}

private void ViewOnSave(User model)
{
    SqlConnection connection = new SqlConnection(connString);
    connection.Open();
    //... save query goes here
} 
```

注意，这里没有使用存储库。无论如何，这个 MVC 仍然不完整且有缺陷，我建议阅读一些关于 ASP.NET MVC 的教程，以掌握 .NET 环境中的 MVC 模式。

# java - If else vs ifelse

> ID：12019870
> 
> 赞同：-1
> 
> 时间：2012-08-18T15:39:32.047
> 
> 标签：java, coding-style

what's the difference between the below two, are they both one and the same?

```
 if(condition){
            //code
      }else{
         if(condition){
            //code
         }
     }

    if(condition){
         //code
     }else if(condition){
        //code
     } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T15:41:52.173

它们完全相同，除了第一个*允许*`else`您在不受第二个`if`条件影响的部分中引入代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-18T15:42:51.163

他们是一样的。第二种方式更常见且更受欢迎，因为第一种方式表明代码比其逻辑真正需要的更复杂（嵌套更深）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T15:43:53.783

它们的工作方式相同。

```
else if { 
```

通常更具可读性，因为它避免了深度嵌套。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-19T03:21:34.137

这些都是相同的，但在第一种情况下：

```
if(condition){
            //code
      }else{  
         if(condition){
            //code
         }
     } 
```

您使用 if 条件在 else 语句中进行评估。您不能在此添加最终（默认）其他。

但在第二种情况下，您可以添加一个 else 部分作为默认部分。

我更喜欢第二个。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-18T15:45:56.583

最重要的区别是第一个看起来像这样：

```
if(condition){
       //code
} else {
    if(condition) {
       //code
    }
} 
```

第二个看起来像这样：

```
if (condition) {
     //code
} else if (condition) {
    //code
} 
```

由于它们在语法上是等效的，因此在决定使用哪个时，清晰度和外观是最重要的问题。如果您继续轮流查看每个选项几次，您就会明白为什么在几乎所有两者都同样可用的语言中，第二个是首选的。:D

# jsp - Including Servlet content in JSP

> ID：12019872
> 
> 赞同：3
> 
> 时间：2012-08-18T15:39:42.453
> 
> 标签：jsp, jakarta-ee, servlets, jspinclude

I'm using Eclipse (Java EE).

I have a Servlet (testServlet.java) under the "Java Resources" > "Logic" package in my Project Explorer.

I have a JSP page (sidebar.jsp) under WebContent. This sidebar is part of my web template, which means it is visible on every page of my web application.

What I'm trying do is to display data from the database in my sidebar jsp page, which reloads every time I move to another jsp page.

The question is - how would I do a

```
PrintWriter writer = response.getWriter();
writer.write("display this data on JSP page"); 
```

in the servlet and display it in the JSP page?

I understand that this is a bad practice but I'm wondering if it is possible. (Note: I am not using any framework either)

Right now, I'm doing something like this in my JSP page:

```
<jsp:include page="/testServlet" /> 
```

which gives the following message when I hover over the code: "***Fragment /testServlet was not found at the expected path /AppName/WebContent/testServlet***"

Could someone let me know how I can access my servlets which are not in my WebContent folder?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T06:05:14.433

将 servlet 映射添加到 WEB-INF 下的 web.xml。

```
<webapp>
  <servlet>
    <servlet-name>testServlet</servlet-name>
    <servlet-class>Logic.testServlet</servlet-class>
  </servlet>

  <servlet-mapping>
    <servlet-name>testServlet</servlet-name>
    <url-pattern>/testServlet</url-pattern>
  </servlet-mapping>
</web-app> 
```

这样做有助于 JSP 页面“定位” servlet。

# c++ - tbb.dll is missing from your computer

> ID：12019873
> 
> 赞同：0
> 
> 时间：2012-08-18T15:39:48.977
> 
> 标签：c++, dll, tbb, visual-c++

I have followed every step in this [video](http://www.youtube.com/watch?v=Tz1u2Ahy4as).

Basically added all additional dependencies to Visual Studio 2010\. Added tbb.lib to linker input options too. The program builds but it does not run.

I get System Error : *"The program can't start because tbb.dll is missing from your computer. Try reinstalling the program to fix this problem."*

Did that, still getting the same error. Also saw that tbb.dll is present in the \bin directory.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-15T14:40:11.320

将包含 tbb.dll 文件的文件夹的路径（例如，在我的例子中是 ..\tbb42_20131003oss\bin\ia32\vc10）添加到 PC 的 PATH 环境变量中。这样，无需将 dll 文件复制到项目的调试（或发布）目录中，即可访问和使用 dll 文件。

# java - jscrollpane in a cell doesn´t work jtable

> ID：12019874
> 
> 赞同：1
> 
> 时间：2012-08-18T15:39:56.853
> 
> 标签：java, swing, jscrollpane, tablecellrenderer

Surfing in the web, I found the way for using a JTextPane into a cell from JTable, only this way I can show the text centered, however, when I added a JScrollPane for showing a scrollbar when the text is longer than the cell height, the scrollbar is shown into a cell but it doesn't move only is shown but doesn't move.

![](../Images/fb9a96aaed3254765b0feede2bfd9685.png)

I'm using org.jdesktop.swingx.renderer.DefaultTableRenderer of swingx framework, here part of my code:

```
//personal editor used in the JTextPane into cell, I  found it in the web

class MyEditorKit extends StyledEditorKit { 

    private StyledViewFactory estilo;
    private int maxTextHeight=0;

    public ViewFactory getViewFactory() {
        estilo = new StyledViewFactory();
        maxTextHeight = estilo.getVista();
        return estilo;
    }

    public int getAltura(){
        return maxTextHeight;
    }

    static class StyledViewFactory implements ViewFactory {

        private static View vista;
        private static int altura;
        public View create(Element elem) {
            String kind = elem.getName();
            String y = "";
                        y = elem.getDocument().getLength()+"";
            if (kind != null) {
                if (kind.equals(AbstractDocument.ContentElementName)) {
                    vista = new LabelView(elem);
                } else if (kind.equals(AbstractDocument.ParagraphElementName)) {
                    vista = new ParagraphView(elem);
                } else if (kind.equals(AbstractDocument.SectionElementName)) {
                    vista = new CenteredBoxView(elem, View.Y_AXIS);                     
                    int x = vista.getDocument().getLength();

                } else if (kind.equals(StyleConstants.ComponentElementName)) {
                    vista = new ComponentView(elem);
                } else if (kind.equals(StyleConstants.IconElementName)) {
                    vista = new IconView(elem);
                }
                return vista;
            }
            return new LabelView(elem);
        }       

        public int getVista(){//It's not important so ignore it
            if( vista instanceof CenteredBoxView)
                return altura = ( (CenteredBoxView)vista ).getTextHeight();
            return 0;
        }
    }
} 
```

* * *

```
// Class which center the text into a cell

class CenteredBoxView extends BoxView {

    private int maxTextHeight=0;
    public CenteredBoxView(Element elem, int axis) {
        super(elem,axis);
    }

    protected void layoutMajorAxis(int targetSpan, int axis, int[] offsets, int[] spans) {

        super.layoutMajorAxis(targetSpan,axis,offsets,spans);
        int textBlockHeight = 0;
        int offset = 0;

        for (int i = 0; i < spans.length; i++) {
            textBlockHeight = spans[i];
            maxTextHeight=(textBlockHeight>maxTextHeight)?textBlockHeight:maxTextHeight;
        }
        offset = (targetSpan - textBlockHeight) / 2;
        for (int i = 0; i < offsets.length; i++) {
            offsets[i] += offset;
        }

    }

    public int getTextHeight(){//It's not important so ignore it
        return maxTextHeight;
    }

} 
```

* * *

```
//class that generate a JScrollPane

class TextAreaProvider extends ComponentProvider<JScrollPane> {

       private JTextPane area;
       private JScrollPane pane;
            @Override
        protected void configureState(CellContext context) {
        }

            @Override
        protected JScrollPane createRendererComponent() {
           area = new JTextPane();
           area.setOpaque(true);
           area.setEditorKit(new MyEditorKit());
           StyledDocument doc = area.getStyledDocument(); 
           MutableAttributeSet  center = new SimpleAttributeSet();
           StyleConstants.setBackground(center, Color.BLUE);
           //StyleConstants.setBold(center, true);
           StyleConstants.setAlignment(center, StyleConstants.ALIGN_CENTER);
           doc.setParagraphAttributes(0, doc.getLength(), center, false); 
           //area.setBorder(BorderFactory.createLineBorder(Color.BLACK));

           int x = ((MyEditorKit)area.getEditorKit()).getAltura();
           pane = new JScrollPane(area);
           pane.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_AS_NEEDED);

           return pane;
        }

            @Override
       protected void format(CellContext context) {//Here is the format which will be shown in the cell   

                area.setText(getValueAsString(context));

        }

    }
} 
```

I just put the code `tabla.getColumnModel().getColumn(col).setCellRenderer( new DefaultTableRenderer( new TextAreaProvider() ) )` for generating a cell with a JScrollPane.

I'm tired of try a lot of things but I can't make that it works. I need a solution please!.

# xcode - Need tips for debugging Cocoa bindings

> ID：12019875
> 
> 赞同：1
> 
> 时间：2012-08-18T15:40:07.213
> 
> 标签：xcode, cocoa, binding, xcode4, nib

I'm encountering my second problem in three days where an errant binding is causing me hours of searching and headaches.

A glance at the stack trace indicates a problem with debugging (e.g., one of the last methods called before the runtime started generating an exception was bind:toObject:withKeyPath:options:). However, I'm finding it impossible to determine WHICH binding is causing the problem:

*   Nothing in the stack trace or variable inspection indicates which views were involved in the call that crashed.

*   The last non-machine instruction that's traceable by stepping through code is a call to a monolithic function (awakeFromNib or makeKeyAndOrderFront).

*   The message in the actual exception is mystifying - e.g., "Cannot create NSArray from object of class NSScrollView," while creating a window that doesn't have any NSScrollViews (just two buttons and two text fields).

So... any tips for debugging these types of problems? For example:

*   Is there any way to get a list of ALL of the bindings specified in a nib/xib? (The inability to do this drives me CRAZY!)

*   Is there any way to find out which views or controls were involved in the crash?

*   Is there any way to get more information about what's happening inside monolithic calls like awakeFromNib?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T00:15:47.730

您可以将 xib 文件作为源代码（不在 IB 中）打开并搜索`"IBBindingConnection"`部分。

示例：贾斯汀的搜索方式（见评论）：

```
grep -A 18 -B 1 -H -a -n "IBBindingConnection" /PATH/TO/NIB 
```

# regression - How can I get more digits for a p-value?

> ID：12019876
> 
> 赞同：6
> 
> 时间：2010-10-27T17:11:14.887
> 
> 标签：regression, stata

Does someone know an easy way to get Stata to display more than just three digits for the p-value when running a Tobit regression?

Normally Stata reports that the p-value is `.001` or `.065`, but I would like to see more digits, for example, `.0011123` or `.065320`.

To be clear, I don't want to (necessarily) alter the way the data is produced in the regression table.

I only want to be able to get Stata to display more digits for those p-values I am interested in.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2010-10-27T21:08:32.963

跟进 tobit 命令

`est tab, p(%12.10g)`

（例如）。即使在相当旧的 Stata 版本中，这也应该可以工作。不太容易的是编写自己的输出过程。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2010-10-27T17:41:00.247

[Stata 11.1 introduced](http://www.stata.com/help.cgi?whatsnew) a `[set pformat](http://www.stata.com/help.cgi?set+pformat)` command that specifies the output format of p-values in coefficient tables. (I don't know about [STATA](http://www.stata.com/support/faqs/res/statalist.html#spell) I'm afraid as I think that was discontinued some time in the 1980s).

By the way, you'd probably be better off asking such completely Stata-specific questions on [Statalist](http://www.stata.com/statalist/) rather than here.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T21:08:35.237

很多时候，如果您通过其内部名称知道您的 p 值，您可以获得最大的精度。我通常在我将认真使用的几乎每个命令之后键入`return list`或`ereturn list`，然后获取可能看起来像`e(p)`or`r(p)`或`e(p_chi2)`或包含 p 值的标量可能是的结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T12:20:13.403

在进行 tobit 回归后，您可以使用`test`命令从原假设 x1=0 中获取 p 值：

```
sysuse auto
tobit weight trunk length headroom, ll(1500)
test trunk 
```

结果返回`r(p)`

```
return list 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-31T12:38:09.847

使用`tobit`命令帮助文件中的第一个示例：

```
. sysuse auto, clear
. generate wgt = weight / 1000

. tobit mpg wgt, ll(17)

Tobit regression                                Number of obs     =         74
                                                LR chi2(1)        =      72.85
                                                Prob > chi2       =     0.0000
Log likelihood = -164.25438                     Pseudo R2         =     0.1815

------------------------------------------------------------------------------
         mpg |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         wgt |   -6.87305   .7002559    -9.82   0.000    -8.268658   -5.477442
       _cons |   41.49856    2.05838    20.16   0.000     37.39621     45.6009
-------------+----------------------------------------------------------------
      /sigma |   3.845701   .3663309                      3.115605    4.575797
------------------------------------------------------------------------------
            18  left-censored observations at mpg <= 17
            56     uncensored observations
             0 right-censored observations 
```

您可以轻松地从返回的结果中获取任何 p 值`r()`：

```
. matrix list r(table)

r(table)[9,3]
             model:      model:      sigma:
               wgt       _cons       _cons
     b  -6.8730504   41.498557   3.8457011
    se   .70025591   2.0583803   .36633085
     t  -9.8150552   20.160782          .b
pvalue   5.610e-15   1.471e-31          .b
    ll  -8.2686584   37.396211   3.1156048
    ul  -5.4774424   45.600903   4.5757975
    df          73          73          73
  crit   1.9929971   1.9929971   1.9929971
 eform           0           0           0 
```

然后相应地格式化它：

```
. matrix results = r(table)

. display %18.17f results[4,1]
0.00000000000000561 
```

在 Stata 的命令提示符下键入`help format`以获取更多信息。

# c++ - QFontMetrics 返回宽度非常错误的边界矩形

> ID：12019881
> 
> 赞同：2
> 
> 时间：2012-08-18T15:40:13.957
> 
> 标签：c++, qt, fonts

我目前正在渲染一个简单的`QGraphicsItem`. 为了提高渲染性能，它的少数内部组件的边界框在构造函数中计算。

但是，我在文本宽度方面遇到了真正的问题，如下图所示：

![坏矩形](../Images/edfd9f3956a5b29aeb3874c042ebfc91.png)

我已经用绿线渲染了计算出来的 BB，这样你就可以很容易地看到发生了什么。现在我知道`QFontMetrics::boundingRect(..)`它并不完全精确，因为它没有考虑斜体或字体抗锯齿 - 但这永远不会超过几个像素。

这是我计算最上面的“时钟”边界矩形的方法：

```
QFont font = Sy_application::font();
font.setPointSize( font.pointSize() * 2 );
QFontMetrics fontMet( font );
BB_ = fontMet.boundingRect( getNode()->getName() );
BB_.moveTop( 0.0 ); 
```

以下是我如何使用它来呈现文本`QGraphicsItem::paint(..)`：

```
QFont font = Sy_application::font();
font.setPointSize( font.pointSize() * 2 );
painter->setFont( font );
painter->setPen( Qt::black );
painter->drawText( BB_.bottomLeft(), getNode()->getName() ); 
```

我检查了一些调试输出，`BB_`在创建和使用之间没有变化。实际上`fontMet.boundingRect( getNode()->getName() );`，创建它的返回一个 45 单位宽的边界矩形 - 时钟图标是 46。所以它肯定是错误的。

谁能看到我是如何使用`QFontMetrics::boundingRect(..)`错误的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T08:55:40.700

在构造函数中添加`QGraphicsView`for `QPaintDevice`arg`QFontMetrics`更正了该问题。据推测，视图中发生了一些未在度量计算中考虑的转换。

# php - 如何在 Magento 中仅让直接子产品形成一个类别？

> ID：12019886
> 
> 赞同：0
> 
> 时间：2012-08-18T15:40:37.577
> 
> 标签：php, magento

我正在寻找一种方法来获取某个类别的直接子产品，而不是获取可能属于该类别子类别的产品。

对于以下目录结构，这意味着当我获得类别 1 时，我只需要产品 5 和 6。

```
Category 1
    Category 1.1
        Product 1
        Product 2
    Category 1.2
        Product 3
        Product 4
    Product 5
    Product 6 
```

到目前为止，我尝试的所有产品都返回给我所有产品，包括该类别的子类别中的产品。所以我总是得到产品 1 到 6

对此有何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T16:30:12.720

这是一种方法...

```
$categoryId = 1;
$categoryProducts = Mage::getModel('catalog/product')->getCollection()
    ->joinField('category_id', 'catalog/category_product', 'category_id', 'product_id=entity_id', null, 'left')
    ->addAttributeToFilter('category_id', $categoryId)
; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T16:24:51.330

尝试：

```
Mage::getModel('catalog/product')->getCollection()->addFieldToFilter('category',value); 
```

我没有对此进行测试，因为我现在远离我的 magento，但可能会起作用。

# css - Bootstrap css 下拉菜单无法在 IE9 中正确呈现。可能是什么问题？

> ID：12019887
> 
> 赞同：2
> 
> 时间：2012-08-18T15:40:54.637
> 
> 标签：css, drop-down-menu, twitter-bootstrap, internet-explorer-9, background-color

在我的一个项目中，一个引导驱动的深色主题，subnav 中的下拉菜单在 IE9 中无法正确呈现。它在 firefox、chrome、opera 和 safari 中运行良好。我试图调试它，但无法找到问题。可能是什么问题？这是描述问题的两个屏幕截图 -

1）在 Firefox 中它工作正常。

![在 Firefox 中它运行良好。](../Images/487ffe8aca01ead8ebd6b8c0984ad3be.png)

2) 但在 IE9 中它显示为透明，即不渲染背景颜色。

![在 IE9 中无法正确呈现](../Images/80812acd6a5ffb515f6266ecb0a7ddbd.png)

我已经上传到我的服务器了。您可以在此处实时查看 - [http://anujkumar.com/templates/dsadmin/](http://anujkumar.com/templates/dsadmin/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T09:25:41.777

Bootstrap 的`.reset-filter()`mixin 也更少：

```
// Reset filters for IE
.reset-filter() {
  filter: e(%("progid:DXImageTransform.Microsoft.gradient(enabled = false)"));
} 
```

它为我解决了完全相同的问题（**Bootstrap ver.2.0.4**）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-19T03:45:18.840

开始调查问题的地方可能是subnav.css 文件中的 Microsoft [Gradient Filter 。](http://msdn.microsoft.com/en-us/library/ms532997%28v=vs.85%29.aspx)

当您删除以下 MS 过滤器属性时，下拉列表将显示在 IE 9 中：

```
.subnav {
      ...
     progid: DXImageTransform.Microsoft.gradient(startColorstr='#1f1f1f', endColorstr='#1f1f1f', GradientType=0); 
 } 
```

# maven - 在 guava-libraries 项目上运行“mvn compile”后如何解决错误？

> ID：12019889
> 
> 赞同：4
> 
> 时间：2012-08-18T15:41:07.043
> 
> 标签：maven, guava

我检查了 guava-libraries 并尝试使用“mvn compile”来构建它。

突然出现一个神秘的错误，我没有找到解决方案。但是“mvn package”或“mvn install”成功，没有任何错误。

“编译”不是番石榴库的有效 Maven 生命周期吗？

核心错误信息如下供您参考。感谢您提前提供任何帮助。

```
[INFO] Unpacking /home/xxx/guava-libraries/guava/target/classes to /home/xxx/guava-libraries/guava-gwt/target/guava-sources with includes "" and excludes "META-INF/MANIFEST.MF"
org.codehaus.plexus.archiver.ArchiverException: The source must not be a directory.
    at org.codehaus.plexus.archiver.AbstractUnArchiver.validate(AbstractUnArchiver.java:185)
    at org.codehaus.plexus.archiver.AbstractUnArchiver.extract(AbstractUnArchiver.java:118)
    at org.apache.maven.plugin.dependency.AbstractDependencyMojo.unpack(AbstractDependencyMojo.java:258) 
```

> 注意：错误信息中的路径是正确的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-18T16:11:36.450

您遇到了 maven-dependency-plugin 的错误[MDEP-98](https://issues.apache.org/jira/browse/MDEP-98)，该错误在构建 guava-gwt 期间执行。`mvn compile`不幸的是，除了不使用but`mvn package`或`mvn install`代替之外，没有解决此错误的解决方案。

# android - bin/sh -c:line 1 语法错误：Crystax NDK 上的文件意外结束

> ID：12019894
> 
> 赞同：1
> 
> 时间：2012-08-18T15:41:34.797
> 
> 标签：android, android-ndk

在将我的 Android NDK 从 android-ndk-r8b（官方）切换到 android-ndk-r7-crystax-5.beta2（非官方 Crystax 构建）后，我在 Eclipse (ADT) 中构建的 NDK 立即开始失败，原因如下：

```
bin/sh -c:line 1 Syntax Error:unexpected end of file 
```

从命令行构建（即运行`ndk-build.cmd`）照常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T15:51:06.933

通过快速分析（使用 Sysinternals Proccess Monitor - NDK 自己的详细日志记录对我帮助不大），我看到 make.exe 调用 c:\cygwin\bin\sh.exe 显然是 DOS 批处理命令（！ ):

```
C:/cygwin/bin/sh.exe -c "if not exist \"obj\local\armeabi\\\" md \"obj\local\armeabi\\\"" 
```

虽然我的 PATH 上没有 C:\Cygwin\bin （这是一个坏主意 - 导致与批处理文件不兼容），但 Eclipse ADT 将 C:\Cygwin\bin 预先添加到项目的 PATH 中:-( 一旦我删除了 C :\cygwin\bin 从路径中，问题解决了。

要解决这个问题：

1.  在 Eclipse 中，打开项目的上下文菜单，转到*Project Properties | C/C++ 构建 | 环境*
2.  编辑 PATH 环境变量并`"C:\cygwin\bin;"`从其开头删除。
3.  （原点将从*BUILD SYSTEM*更改为*USER; CONFIG*）
4.  建造！

# jsp - 将变量传递给javabean

> ID：12019911
> 
> 赞同：1
> 
> 时间：2012-08-18T15:43:37.320
> 
> 标签：jsp, javabeans

我有一个`register.jsp`文件。它从提交的表单中读取变量，如下所示：

```
 <%
        if(request.getParameter("username") != null && request.getParameter("password") != null){
            String username = request.getParameter("username");
            String password = request.getParameter("password");
         }
     %> 
```

我有一个Java bean，如下所示。

```
public class RegistrationBean {

// Constructor
public RegistrationBean(){}  

public boolean login(String username, String password){
    boolean result = false;
    System.out.println("username");
    if(username.equals("username") && password.equals("admin")){
        result = true;
    }
    return result;
}

} 
```

现在我试图在我的jsp文件中调用这个登录函数，如下所示。我还在我的 jsp 文件顶部添加了 useBean。

```
 <jsp:useBean id="register" class="registration.RegistrationBean" scope="session" />

    <%
        if(request.getParameter("username") != null && request.getParameter("password") != null){
            String username = request.getParameter("username");
            String password = request.getParameter("password");
            if(register.login(username, password)){
              // do something
            }
     %> 
```

但我意识到用户名和密码的值没有被传递给 bean。但是当我在 .jsp 文件中打印该值时，它具有适当的值。是否有任何理由不将值传递给 login() 函数中的函数。目前无论我做什么都是假的。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:29:05.653

属性值 request.getParameter("sn") 用 " 引用，在值内使用时必须转义

当我使用 value="<%=request.getParameter("val")%>"/> 运行我的页面时，会出现上述消息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T16:07:47.593

那应该确实有效。但是，这是使其工作的另一种方法：

```
<jsp:useBean id="register" class="registration.RegistrationBean" scope="session">
<jsp:setProperty name="register" property="username" value="<%=request.getParameter("username")%>"/>
<jsp:setProperty name="register" property="password" value="<%=request.getParameter("password")%>"/>
<jsp:useBean /> 
```

为您的班级添加 setter 和 getter `username`。并且将是类变量。将函数设为非参数化，即称其为.`password``RegistrationBean``username``password``login``register.login()`

# jquery - 哪里应该可选 s 存储在 html 中？

> ID：12019916
> 
> 赞同：0
> 
> 时间：2012-08-18T15:44:16.557
> 
> 标签：jquery, html

我有一个 html 页面，其中必须显示很多叠加层。所有这些覆盖都被标签包围。由于如果我选择将所有 s 存储在主页中，html 会变得非常大，我可以将这些片段存储为单独的文件吗？如果是这样，我如何根据需要将它们带入。目前 jQuery 被用来隐藏/显示这些片段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T15:51:38.177

您是否担心您的 HTML 会变得“大”，因为您想让您的页面加载得更快，或者因为它变成了太多的代码来处理？

如果是第一个原因，那么不要使用 jQuery 显示和隐藏 DIV，而是仅在需要时使用 jQuery 动态创建和销毁 DIV。（不过，除非它是大量的 DIV，否则我看不到您在页面大小方面节省了多少。）

如果是第二个原因，那么如果您使用某种动态语言（php、ruby 等），请将它们放在单独的文件中并包含它们，或者获取一个支持代码折叠的文本编辑器，这样您就可以将它们从编写代码时的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T15:54:01.070

是的。您可以独立地提供每个片段，并使用 JavaScript Ajax 请求从服务器获取它们并将它们插入到 DOM 中。

搜索 Ajax 教程，最好是在您使用的任何框架中。

# opengl - opengl 鼠标坐标到世界坐标

> ID：12019920
> 
> 赞同：0
> 
> 时间：2012-08-18T15:44:48.083
> 
> 标签：opengl, glut

我需要检测鼠标运动并在鼠标的位置画一个球。我需要球处于世界坐标中。所以我正在尝试使用`glUnProject`这项任务，似乎直到现在我还没有成功。这是我的`motionFunc`：

```
void motionFunc( int x, int y)
{

    GLint viewport[4];
    GLdouble modelview[16];
    GLdouble projection[16];
    GLfloat winX, winY, winZ;
    GLdouble posX, posY, posZ;

    glGetDoublev( GL_MODELVIEW_MATRIX, modelview );
    glGetDoublev( GL_PROJECTION_MATRIX, projection );
    glGetIntegerv( GL_VIEWPORT, viewport );

    winX = (float)x;
    winY = (float)viewport[3] - (float)y;
    glReadPixels( x, int(winY), 1, 1, GL_DEPTH_COMPONENT, GL_FLOAT, &winZ );

    gluUnProject( winX, winY, winZ, modelview, projection, viewport, &posX, &posY, &posZ);      //printf("winz: %f posz: %f\n",winZ,posZ);
    Ball.x=posX;
    Ball.y=posY;
    Ball.z=posZ;
    //printf("%f %f %f\n",Ball.x,Ball.y,posZ);
    glutPostRedisplay();
} 
```

现在，我在 glutPostRedisplay 上添加了一个断点。结果当我单击拖动鼠标时，球的坐标（Ball.x,Ball.y,Ball.z）类似于：

```
(Ball).x -727.175354
(Ball).y 407.310242
(Ball).z -865.000610 
```

为什么z坐标到目前为止？我的相机在 z=+135。我模型中的其他对象就像在 z= -3 到 +3 之间。我需要球的 z 坐标在同一范围内。

now, what exactly is `winZ`? Here, I checked it always turns out to be 1.00\. I tried to hardcode `winZ` and I found at `winZ=0.85`, the ball seems like to be always under the mouse(I can drag the ball with my mouse and the ball is always under the pointer). But then the Ball's coordinates are like:

```
(Ball).x -4.67813921
(Ball).y 2.57806134
(Ball).z 128.370895 
```

which is so close to the camera but x and y coordinates are not good for me. they always come out to be near the origin. which is not what I want. My other objects' x and y coordinates have a wider range.

Finally, my question is, what is the correct way to do `glUnproject` or something of the same sort?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T16:02:53.440

A 2D mouse coordinate cannot unambiguously unmapped to a 3D world coordinate. The 2D coordinate corresponds with a line in 3D space. The winz influences which point on this line is returned. When you use 0.0 for winz you will get the point at the near clipping plane. When you use 1.0 you will get the point at the far clipping plane.

If you are using a depth buffer you could retrieve the value from the depth buffer using the glReadPixels function and use that as winz. Here a piece of code from a toy project of mine in Java

```
 FloatBuffer depth = BufferUtils.createFloatBuffer(1);
    glReadPixels(mouse_x, mouse_y, 1, 1, GL_DEPTH_COMPONENT, GL_FLOAT, depth);

    depth.rewind();
    FloatBuffer farPos = BufferUtils.createFloatBuffer(3);
    GLU.gluUnProject(mouse_x, mouse_y, depth.get(), 
            mainContext.getModelviewMatrix(), 
            mainContext.getProjectionMatrix(), viewport, farPos); 
```

Most is the same in C/C++ except for the weird NIO buffers.

# mongodb - 使用 Mongoid 配置 CarrierWave - GridFS

> ID：12019922
> 
> 赞同：0
> 
> 时间：2012-08-18T15:45:21.237
> 
> 标签：mongodb, mongoid, ruby-on-rails-3.2, carrierwave, gridfs

我遇到了麻烦，试图将 CarrierWave 用于在 Rails 3 中开发的文件上传 Rest API 和 MongoDB 数据库。

我想做的是使用 MongoDB 系统 GridFS 存储一些文件（不仅是图像，而且是每种文件格式）。我阅读了许多建议我使用 CarrierWave gem 的文档。

但是当我尝试配置它时出现错误。

我的开发环境：Gemfile：

```
source 'https://rubygems.org'

gem 'rails', '3.2.8'

# MongoDB
gem 'mongoid', :git => 'git://github.com/mongoid/mongoid.git'
gem 'carrierwave', :git => "git://github.com/jnicklas/carrierwave.git"
# gem 'carrierwave-mongoid', :require => 'carrierwave/mongoid'
gem 'mini_magick', :git => 'git://github.com/probablycorey/mini_magick.git'

gem 'bson_ext'
gem 'json' 
```

应用程序.rb ：

```
require File.expand_path('../boot', __FILE__)

# ActiveRecord will not be use with MongoDB
# require 'rails/all'
require "action_controller/railtie"
require "action_mailer/railtie"
require "active_resource/railtie"
require "rails/test_unit/railtie"
require "sprockets/railtie"
require "mongoid/railtie"
require "carrierwave"
# require "carrierwave/mongoid" 
```

我使用 mongoid.yml (config/mongoid.yml) 文件定义数据库：

```
development:
  sessions:
    default:
      database: lf_rest_api_development
      hosts:
        - localhost:27017
      options:
        consistency: :strong
  options:

test:
  sessions:
    default:
      database: lf_rest_api_test
      hosts:
        - localhost:27017
      options:
        consistency: :strong 
```

并使用初始化程序 (config/initializers/mongoid.rb) 加载它：

```
Mongoid.load!("config/mongoid.yml") 
```

-- 在最后一个文件 config/initializers/carrierwave.rb 之后，我可以毫无问题地执行“rails server”命令：

```
CarrierWave.configure do |config|
    config.grid_fs_database = Mongoid.database.name
    config.grid_fs_host = Mongoid.config.master.connection.host
    config.storage = :grid_fs
    config.grid_fs_access_url = "/files"
end 
```

然后当我运行“rails server”命令时出现以下错误：

```
=> Booting WEBrick
=> Rails 3.2.8 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
Exiting
/{API_path}/config/initializers/zcarrierwave.rb:4:in `block in <top (required)>': undefined method `database' for Mongoid:Module (NoMethodError)
[...] 
```

我的文件模型定义如下：

```
require 'carrierwave/orm/mongoid'

class File
    include Mongoid::Document
    store_in_collection: "files", database: "lf_rest_api_developement", session: "default"

    key :filename, type: String
    key :content_type, type: String
    key :length, type: BigDecimal
    key :chunk_size, type: Integer, :default => 256
    key :upload_date, type: DateTime
    key :md5, type: String
    key :metadata, type: Array, :default => []

    mount_uploader :file, FileUploader

    index({ location: "2d" }, { min: -200, max: 200 })
end 
```

FileUploader 只是 CarrierWave 上传器的扩展......

```
class FileUploader < CarrierWave::Uploader::Base
    storage :grid_fs
end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T19:30:34.563

抱歉回复慢。首先，您的错误原因是 Mongoid 3 不再支持`Mongoid.database`. 您现在可以在`Mongoid::Config.sessions[:default]`对象中找到这些配置。

但这不会解决您的问题！Mongoid 3 根本不支持 GridFS。来自[mongoid 文档](http://mongoid.org/en/mongoid/docs/tips.html#gridfs)：

> ## 不支持 GridFS
> 
> GridFS 被作为核心数据库功能推向市场，但实际上并非如此。它只是一种将分块文件数据存储为集合中的文档的模式，就像任何其他文档一样。此行为的实现在客户端驱动程序中处理，而不是在核心数据库本身中处理，这可能导致跨平台处理方式的差异。
> 
> 即使在客户端中具有这种行为是可以接受的，但在您不只是存储文件数据的情况下，这对应用程序性能的影响是相当大的。由于文件存储为文档，因此它们会像数据库中的任何其他文档一样消耗 RAM，并且很容易导致服务器上的内存消耗达到最大值。分块数据也有限制，例如您无法更新文件 - 您必须删除文件并用新文件替换它。
> 
> 鉴于此，我们没有优先考虑在前面使用 GridFS 的任何工作，但对于那些可以等待升级的人来说，有一个宝石正在筹备中。与此同时，你有几个选择......

因此，与其以牺牲性能为代价寻求其他方式将上传存储在 GridFS 中，我建议将它们放入 SQL 数据库中。如果你使用 Mongo 作为你唯一的数据库，不要被这个选项推迟。让 ActiveRecord 和 Mongoid 并肩工作并不难。但根据我的经验，将二进制对象上传到任何数据库都可能效果不佳。我个人会使用文件系统进行存储，使用carrierwave或回形针负责管理。或者，我建议查看一些便宜的云存储选项。您可以使用 aws-s3 之类的东西，这是一项很棒的服务。它还与 Carrierwave 有很好的兼容性。

如果您决定使用 GridFS，我会查看[mongoid-grid_fs](https://github.com/ahoward/mongoid-grid_fs) gem 或查看 10gen 网站上的一些替代 ruby​​ MongoDB 驱动程序。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-01T23:13:17.617

这是我第一次回答问题，所以我希望我做对了。

我在使用 Mongoid 3 的 rails 应用程序中使用载波上传图像时遇到了同样的问题。我相信我有一个解决方案（至少让它在我的笔记本电脑上本地工作。）这是我想出的：

[使用 branch 将carrierwave-mongoid](https://github.com/jnicklas/carrierwave-mongoid) gem添加到您的gemfile 中`mongoid-3.0`。这个 gem 使用[mongoid-grid_fs](https://github.com/ahoward/mongoid-grid_fs)：

```
# Image Uploading
gem "carrierwave-mongoid", :git => "git://github.com/jnicklas/carrierwave-mongoid.git", :branch => "mongoid-3.0" 
```

为载波做一个初始化器：

```
#config/initializers/carrierwave.rb
CarrierWave.configure do |config|

  config.storage = :grid_fs

  # Storage access url
  config.grid_fs_access_url = "/upload/grid"
end 
```

我知道我没有设置`config.grid_fs_database`或`config.grid_fs_host`。这似乎在本地工作（在我的笔记本电脑上）我没有尝试使用远程 gridfs 数据库。

安装看起来很正常：

```
#app/models/user.rb
class User
  include Mongoid::Document
  mount_uploader :avatar, AvatarUploader
end 
```

上传器也是标准的：

```
#app/uploaders/avatar_uploader
class AvatarUploader < CarrierWave::Uploader::Base
  include CarrierWave::MiniMagick
  def store_dir
    "#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}"
  end

  version :thumb do
    process :resize_to_limit => [200, 200]
  end
end 
```

为 GridFS 创建一个控制器：

```
#app/controllers/gridfs_controller.rb
class GridfsController < ApplicationController

  def serve
    gridfs_path = env["PATH_INFO"].gsub("/upload/grid/", "")
    begin
      gridfs_file = Mongoid::GridFS[gridfs_path]
      self.response_body = gridfs_file.data
      self.content_type = gridfs_file.content_type
    rescue
      self.status = :file_not_found
      self.content_type = 'text/plain'
      self.response_body = ''
    end
  end
end 
```

并将路由添加到路由文件：

```
#config/routes.rb
match "/upload/grid/*path" => "gridfs#serve" 
```

希望这可以帮助。

# javascript - 禁词审查制度

> ID：12019923
> 
> 赞同：0
> 
> 时间：2012-08-18T15:45:24.703
> 
> 标签：javascript, words

我实际上正在一个网站上工作，在该网站上我需要将许多单词替换为例如：`banana`by `******`。

我使用带有 php 和 mysql 的网站，但我也使用 javascript。

我的数据库中有一个表，其中包含禁用词。

我从我的数据库中以数组的形式收到这个词。我正在寻找一个能够在所有页面中替换此单词的功能。我不能使用像 ob start 这样的功能。

最好的功能是检查正文加载和替换单词。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T15:50:16.343

这是一项相当困难的任务，因为：

1.  人们会尝试通过替换某些字母来规避这个系统，例如用“$”替换“s”，用“@”替换“a”，或者拼错仍然可以理解的单词
2.  你将如何处理像“密码”这样包含脏话的词？

我建议使用已经解决此问题的服务：

*   [http://www.webpurify.com/](http://www.webpurify.com/)
*   看看这个 SO 帖子：[你如何实现一个好的亵渎过滤器？](https://stackoverflow.com/questions/273516/how-do-you-implement-a-good-profanity-filter)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T16:04:09.193

我将使用 CoffeeScript，如果您愿意，可以[在此处](http://js2coffee.org/)编译为 JavaScript，或者仅将其用作伪代码。

```
String::replaceAll = (a, b) ->
  regExp = new RegExp(a, "ig")
  @replace regExp, b

_stars = (string) ->
  str = ""
  for i in [0..string.length]
    str = "#{str}*"

  str

bannedWords = [ "bannedword", "anotherbannedword" ]

_formSubmitHandler = (data) ->
  for bannedWord in bannedWords
    data.userInput = data.userInput.replaceAll bannedWord, _stars(data.userInput) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T15:55:41.767

如果页面内容也来自数据库，或者正在输入到数据库中。为什么不在插入之前使用 php 过滤它，或者在使用它被拉出时使用`str_replace`

```
// PREFERRED WAY
$filteredContent = str_replace($bannedlist, "**", $content2Filter); 
```

或者，如果您正在寻找一个 javascript 版本，那么您将需要使用多个`str.replace`或正则表达式。就像是：

```
var search = "/word1|word2|word3/gi"; //This would be your array joined by a pipe delimiter
var ret=str.replace(search,'**'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-05T21:19:44.817

我为此做了一个非常简单的审查方法。它只会跟踪您放入坏词数组的单词。我建议您使用高级库进行文字审查。

审查员.js

```
var censor = (function() {
    function convertToAsterisk(word) {
        var asteriskSentence = '';
        for(var asterisks=0;asterisks<word.length;asterisks++) {
            asteriskSentence+='*';
        }
        return asteriskSentence;
    }

    return function(sentence, bannedWords) {
        sentence    = sentence      || undefined;
        bannedWords = bannedWords   || undefined;

        if(sentence!==undefined && bannedWords!==undefined) {
            for(var word=0;word<bannedWords.length;word++) {
                sentence = sentence.replace(bannedWords[word], convertToAsterisk(bannedWords[word]));
            }
        }

        return sentence;
    };
})(); 
```

该方法可以像这样使用：

```
var sentence = 'I like apples, grapes, and peaches. My buddy likes pears';
var bannedWords = [
    'pears',
    'peaches',
    'grapes',
    'apples'
];
sentence = censor(sentence, bannedWords); 
```

该系统不会保护其他单词中的坏词或棘手的拼写错误。只有基础。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-18T15:50:45.890

```
var str="badword";
var ret=str.replace("badword","*******"); 
```

并自动检测长度（对函数使用有用）

```
var str="badword";
var ret=str.replace("badword",function() {
    var ret = ""
    for(var loop = 0; loop < str.length; loop++) {
        var ret = ret + "*"
    }
    return ret
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-21T13:51:55.640

最后我找到了我自己的方法来使这个系统成为一种简单的方法，您不需要更改所有网站的所有代码，只需更改需要审查的页面。

就我而言，我使用了数以千计的页面，但问题是我有一个主页，其中包含其他页面。

对于可能感兴趣的人。你所要做的就是把这段代码放在你页面的开头，所以在把这段代码`<?php ob_start(); ?>`放在正文的末尾之后，再把这段代码放在前面`

```
 <?php   
        //We get the content of the page
        $content = ob_get_contents(); 
        // and we replace all 
        $content = str_replace('naughty', '*****', $content); 

        /// / VERY important, we must finish the page or in any case include ob_end_clean () function before echo $ content as PHP code would be displayed also
    ob_end_clean ();
echo $content; 
?> 
```

这是一种简单的方法，但您也可以为所有被审查的单词创建一个数组。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-29T02:16:49.347

完全公开，我写了插件。

我编写了一个 jQuery 插件，可以满足您的需求。它不是完全防水的，其他人可以通过禁用 javascript 很容易地绕过插件。如果您想尝试一下，这里有一个链接。

[http://profanityfilter.chaseflorell.com/](http://profanityfilter.chaseflorell.com/)

这是一些示例代码。

```
<div id="someDiv">swears are ass, but passwords are ok</div>

<script>
    $('#someDiv').profanityFilter({
        customSwears: ['ass']
    });
</script> 
```

# visual-studio - VS2012 未能在 *.csproj 文件和程序集清单中保持一致的 DLL 版本，VS2012 错误？

> ID：12019925
> 
> 赞同：1
> 
> 时间：2012-08-18T15:45:37.963
> 
> 标签：visual-studio, visual-studio-2012, coded-ui-tests

我在 Win8 机器上使用 Visual Studio 2012 RTM。**我的 VS2012 安装在 D: 分区上。**

我正在编写一个 CodedUI 测试项目。**这个项目最初是用VS2010编写的，我用VS2012升级了它。**

我在项目中引用了 11.0 版本的 CodedUITestFramework dll。

在 *.csproj 文件中，它说

```
 <Reference Include="Microsoft.VisualStudio.QualityTools.CodedUITestFramework,
 Version=11.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a,
 processorArchitecture=MSIL" /> 
```

项目建设成功。但是当我使用 ILDasm 检查程序集 DLL 时，清单显示如下：

```
.assembly extern Microsoft.VisualStudio.QualityTools.CodedUITestFramework
{
  .publickeytoken = (B0 3F 5F 7F 11 D5 0A 3A )                         // .?_....:
  .ver 10:0:0:0    <======Should be 11:0:0:0 here!!
} 
```

而且我注意到虽然测试项目构建成功，但在 Windows 事件日志中记录了以下错误。

> （vstest.discoveryengine.x86.exe，PID 8056，线程 9）枚举程序集时引发异常：Microsoft.VisualStudio.TestTools.Exceptions.EqtDataException：无法加载测试容器“e:\test.dll”或其依赖项之一. 错误详细信息：System.IO.FileNotFoundException：无法加载文件或程序集“Microsoft.VisualStudio.TestTools.UITest.Extension，Version=10.0.0.0，Culture=neutral，PublicKeyToken=b03f5f7f11d50a3a”或其依赖项之一。该系统找不到指定的文件。

**但是我什至没有安装 VS2010，我在哪里可以有 10.0.0.0 版本的 DLL？**

如果这是一个 VS2012 的 bug，那就太令人沮丧了。这让我疯狂。

在 Microsoft Connect 中创建了一个问题：

[https://connect.microsoft.com/VisualStudio/feedback/details/758629/add-dll-reference-bugs-in-visual-studio-2012-version-11-0-50727-1-rtmrel](https://connect.microsoft.com/VisualStudio/feedback/details/758629/add-dll-reference-bugs-in-visual-studio-2012-version-11-0-50727-1-rtmrel)

任何机构遇到同样的问题？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T17:15:29.003

如果您查看 UIMap.uitest 下的 UIMap.Designer.cs，您会注意到它是使用 10.0.* 构建的。

```
// ------------------------------------------------------------------------------
//  <auto-generated>
//      This code was generated by coded UI test builder.
//      Version: 10.0.0.0 
```

...

```
[GeneratedCode("Coded UITest Builder", "10.0.40219.1")] 
```

为您创建的每个 uitest 运行 codedUI 测试构建器并生成 UI 操作或替换现有的操作。这将自动生成具有正确版本的新 UIMap.Designer.cs 文件。

```
// ------------------------------------------------------------------------------
//  <auto-generated>
//      This code was generated by coded UI test builder.
//      Version: 11.0.0.0 
```

...

```
[GeneratedCode("Coded UITest Builder", "11.0.50727.1")] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-06T06:53:47.040

The reason for the Issue is the Microsoft.Services.TestTools.UITesting.Html.dll from CodeFirst has its dependencies based on VS 2010\.

Downloading the source code from CodePlex and migrating to VS 2012 and getting the latest Microsoft.Services.TestTools.UITesting.Html.dll resolves the issue and it had worked.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-20T14:43:52.977

Alex's solution is wrong,

Simply solution is replacing old refence with current version's dll

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T10:26:14.787

您可能会遇到上述错误的一个原因是您可能已经命名了包含自动化项目的所有文件的文件夹，中间有空格。假设您已将该文件夹命名为“测试用户”。在这种情况下，您将收到上述错误。解决方案是通过文件 -> 源代码管理 -> 工作区更改 VSTS 中的本地路径来移动这些文件夹，然后选择您的工作区（它应该与您的计算机名称匹配）并单击编辑。在您的机器中创建一个新文件夹（文件夹名称中没有空格）并将其映射到此处。

# javascript - 仅使用把手为 JSON 中的特定键生成 DOM 内容

> ID：12019926
> 
> 赞同：0
> 
> 时间：2012-08-18T15:45:38.927
> 
> 标签：javascript, jquery, handlebars.js

我正在使用车把 js 进行模板化。如果我希望车把仅从 json 数据中为键 2、3 或 1、2、3 生成 dom 内容，我该怎么做？

**JSON结构**

```
{
"items": {
    "1": {
        "title": "Title1",
        "date": "2/16/2012"
    },
    "2": {
        "title": "Title2",
        "date": "2/16/2012"
    },
    "3": {
        "title": "Title3",
        "date": "2/16/2012"
    },
    "4": {
        "title": "Title4",
        "date": "2/16/2012"
    }
}
} 
```

HTML 应该有如下所示的数据

```
<li> data of item2 </li>
<li> data of item3 </li> 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T15:50:44.487

对于您的问题，这

```
var DOMCreationKeys = [2,3];
var k=0;

var updatedJSON = {
"items": {}};

for (item in myjson_data.items){
    if(item == DOMCreationKeys [k++]){
        updatedJSON["items"].push(myjson_data.items[item]);
}

contnr.append(list_tmpl(updatedJSON )); 
```

应该管用 ：）

# java - 需要帮助将 Perf4J 与 log4j.properties 集成

> ID：12019927
> 
> 赞同：0
> 
> 时间：2012-08-18T15:45:48.800
> 
> 标签：java, log4j, perf4j

我正在尝试将 Perf4j v0.9.16 与 log4j v1.2.17 集成。

下面是具有方法的 Utils 类。

```
public class Utils {

    private static Logger logger = Logger.getLogger(Utils.class);

    @Profiled
    public String checkNullValueForString(Object obj)
    {
        String resultStr = "";
        if(obj != null)
        {
            logger.info("Object is not null.");
            resultStr = String.valueOf(obj);
        }
        logger.info("Resultstr is "+resultStr);
        return resultStr;
    }
} 
```

下面是 log4j.properties 文件：

```
# Define the root logger with appender file
log = /usr/home/log4j
log4j.rootLogger = DEBUG, FILE
org.perf4j.log4j = INFO

# Define the file appender
log4j.appender.FILE=org.apache.log4j.FileAppender
log4j.appender.FILE.File= logs/log.out

# Define the layout for file appender
log4j.appender.FILE.layout=org.apache.log4j.PatternLayout
log4j.appender.FILE.layout.conversionPattern=%m%n 
```

当我运行 utils 方法时，它会打印记录器消息，但 perf4j 记录器不打印。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T15:58:05.110

来自 Perf4J 文档

> Profiled 注释本身只是标记了一种分析方法 - 它实际上并没有添加任何计时代码。相反，您必须使用面向方面的编程框架，例如 AspectJ 或 Spring AOP，将时序方面注入您的代码。

上述两个 AOP 框架都提供了方面类。您只需要添加一些配置文件即可开始。

阅读[http://perf4j.codehaus.org/devguide.html#Unobtrusive_Logging_with_Profiled_and_AOP](http://perf4j.codehaus.org/devguide.html#Unobtrusive_Logging_with_Profiled_and_AOP)上的 Perf4J 文档以了解如何执行此操作。

# c++ - qt 信号导致连接时出现分段错误

> ID：12019929
> 
> 赞同：0
> 
> 时间：2012-08-18T15:46:01.997
> 
> 标签：c++, qt, layout, signals, signals-slots

我制作了一个充当窗口的小部件，当按下按钮时，它只会发出一个信号：

```
signals:
    void SaveTask( void ); 
```

在我的 mainwindow.cpp 我定义（在构造函数中）：

```
connect( taskWindow, SIGNAL(SaveTask()), task_view, SLOT(UpdateFromTasks()) ); 
```

taskWindow = 指向此信号发出的窗口的指针。task_view = 指向主窗口中带有插槽的 treewidget 的指针。

它被设计成当您保存任务时，它会显示在树形视图中。

不幸的是，当我尝试运行程序时，它会导致连接线上的段错误，当我删除它时，程序运行良好（当然除了这个功能）。它确实编译并且所有元素都已初始化且可用。我根本不明白这怎么会失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T16:13:29.413

似乎您在初始化 taskWindow 或 task_view 并使用未初始化的指针之前进行了连接。

你也可以试试这个签名（应该是一样的，但只是为了更好的衡量）

```
signals:
    void SaveTask(); 
```

# xml - 写入 My.Settings 中的 XML 文档

> ID：12019930
> 
> 赞同：0
> 
> 时间：2012-08-18T15:46:05.230
> 
> 标签：xml, vb.net, datatable

我正在尝试将我的 Datatable 保存到 My.Settings XML 文档，但它不起作用，这是我的代码

```
mainDatatable.WriteXml(My.Settings.mainDatatableXMLDocument.Name) 
```

这适用于普通的 XML 文档

```
 mainDatatable.WriteXml("C:\Users\user\Documents\X.xml") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T18:56:42.960

`My.Settings.mainDatatableXMLDocument`必须为 null，在这种情况下，访问该`Name`属性的属性将引发 null 引用异常。我建议首先检查设置是否存在。例如：

```
If My.Settings.mainDatatableXMLDocument IsNot Nothing Then
    mainDatatable.WriteXml(My.Settings.mainDatatableXMLDocument.Name)
Else
    ' Handle the fact that the setting is missing...
End If 
```

# c# - 母版页中的 Jquery 脚本在 Internet Explorer 中不起作用

> ID：12019932
> 
> 赞同：1
> 
> 时间：2012-08-18T15:46:30.187
> 
> 标签：c#, jquery, asp.net, internet-explorer

我在母版页中有这个脚本（它显示了一个悬停菜单元素的面板）

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>

<script type="text/javascript">
     $(document).ready(function() {
         $('#<%= menu1_lbl.ClientID %>').hover(function() {
             $('#<%= sub_menu1_lbl.ClientID %>').slideDown(200);
         },
         function() {
             $('#<%= sub_menu1_lbl.ClientID %>').hide();
         });

         $('#<%= sub_menu1_lbl.ClientID %>').hover(function() {
             $('#<%= sub_menu1_lbl.ClientID %>').show();
             $('#<%= menu1_lbl.ClientID %>').addClass("menuhover");
         },
         function() {
             $('#<%= sub_menu1_lbl.ClientID %>').hide();
             $('#<%= menu1_lbl.ClientID %>').removeClass("menuhover");
         });
     }); 
</script> 
```

它在 Chrome 和 Firefox 上运行良好，但在 IE 中不起作用。关于我应该怎么做才能让它发挥作用的任何想法？

提前致谢。

更新：这是完整的客户端生成代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Smart Finance </title>
    <style type="text/css">

    </style>
</head>
<body>
    <form name="aspnetForm" method="post" action="ie_not_compatible.aspx" id="aspnetForm">
    <div>
        <input type="hidden" name="__EVENTTARGET" id="__EVENTTARGET" value="" />
        <input type="hidden" name="__EVENTARGUMENT" id="__EVENTARGUMENT" value="" />
        <input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwUKMTY1NDU2MTA1Mg9kFgJmD2QWBAIBD2QWAgIBDxUHFi9GaW5hbmNhL2ltYWdlcy9iZy5wbmcZL0ZpbmFuY2EvaW1hZ2VzL2ltZzAzLmpwZxYvRmluYW5jYS9pbWFnZXMvYmcucG5nGS9GaW5hbmNhL2ltYWdlcy9pbWcwMi5qcGcZL0ZpbmFuY2EvaW1hZ2VzL2ltZzAyLmpwZxkvRmluYW5jYS9pbWFnZXMvaW1nMDIuanBnGS9GaW5hbmNhL2ltYWdlcy9pbWcwMi5qcGdkAgMPZBYCAgkPZBYCAgEPDxYCHgRUZXh0BQVlbmRyaWRkGAEFHl9fQ29udHJvbHNSZXF1aXJlUG9zdEJhY2tLZXlfXxYDBRhjdGwwMCRMb2dpblN0YXR1czEkY3RsMDEFGGN0bDAwJExvZ2luU3RhdHVzMSRjdGwwMwUMY3RsMDAkY29uZmlnwdDc6GaGSg1K9roW+pf9g9bwZ08=" />
    </div>
    <script type="text/javascript">
//<![CDATA[
        var theForm = document.forms['aspnetForm'];
        if (!theForm) {
            theForm = document.aspnetForm;
        }
        function __doPostBack(eventTarget, eventArgument) {
            if (!theForm.onsubmit || (theForm.onsubmit() != false)) {
                theForm.__EVENTTARGET.value = eventTarget;
                theForm.__EVENTARGUMENT.value = eventArgument;
                theForm.submit();
            }
        }
//]]>
    </script>
    <div>
        <input type="hidden" name="__EVENTVALIDATION" id="__EVENTVALIDATION" value="/wEWAwKDjNy/AwLh8tHdBgL0/brqCByGAqyFdaUy3EVtuUCi/i44T7vY" />
    </div>
    <div id="menu" style="top: 12px; width: 1250px; position: relative; float: left;">
        <ul>
            <li><a href="Home.aspx" id="ctl00_Homelbl">Home</a></li>
            <li id="faturatli"><a href="Default.aspx" id="ctl00_menu1_lbl">Default</a> </li>
        </ul>
    </div>
    <div id="ctl00_sub_menu1_lbl" style="display: none; top: 137px; padding: 15px 15px 15px 15px;
        box-shadow: 0px 5px 15px rgba(0, 0, 0, .5); z-index: 99999; left: 155px; position: absolute;
        float: left; width: 300px; background: #FFFFFF;">
        Submenu panel
    </div>
    <div id="logoutcontainer" style="top: 113px; right: 50px; position: absolute;">
        <div id="ctl00_Panel1" onkeypress="javascript:return WebForm_FireDefaultButton(event, 'ctl00_config')">
            <span id="ctl00_userloggedin" style="color: #ADC9C9; font-size: small; font-weight: 700;">
                endri</span> &nbsp;<a id="ctl00_LoginStatus1" href="javascript:__doPostBack('ctl00$LoginStatus1$ctl00','')"
                    style="color: #CCFFFF; font-size: small; font-weight: 700;">Logout</a>
            <input type="image" name="ctl00$config" id="ctl00_config" src="images/config.png"
                style="height: 20px; border-width: 0px;" />
        </div>
    </div>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.0.js"></script>
    <script defer="defer" type="text/javascript">
        $(document).ready(function () {
            "use strict";
            $('#ctl00_menu1_lbl').hover(function () {
                $('#ctl00_sub_menu1_lbl').slideDown(200);
            }, function () {
                $('#ctl00_sub_menu1_lbl').hide();
            });
            $('#ctl00_sub_menu1_lbl').hover(function () {
                $('#ctl00_sub_menu1_lbl').show();
                $('#ctl00_menu1_lbl').addClass("menuhover");
            }, function () {
                $('#ctl00_sub_menu1_lbl').hide();
                $('#ctl00_menu1_lbl').removeClass("menuhover");
            });
        });
    </script>
    ​
    <div id="ContentDiv" style="float: left; position: relative; margin: 50px 50px 50px 50px;
        text-align: left; top: 21px; left: 0px;">
        <span class="style3">Not working on internet explorer.</span>
    </div>
    <script src="/finance/WebResource.axd?d=lLeg7eZU8UNEVWRCMptUog2&amp;t=633750586290014532"
        type="text/javascript"></script>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-18T22:52:45.877

嘿 这个错误通常是在没有正确加载 jquery 库时出现的。尝试以这种方式加载它

```
<script type="text/javascript" src='<%=Page.ResolveUrl("http://code.jquery.com/jquery-1.7.2.min.js")%>'></script> 
```

# jquery - 在wordpress进行ajax调用后重新加载内联javascript

> ID：12019933
> 
> 赞同：0
> 
> 时间：2012-08-18T15:46:34.947
> 
> 标签：jquery, ajax, wordpress, call, reload

我有一个问题，我希望有人可以帮助我，这里是：

使用本教程：[http](http://www.problogdesign.com/wordpress/load-next-wordpress-posts-with-ajax/) ://www.problogdesign.com/wordpress/load-next-wordpress-posts-with-ajax/我能够在不刷新浏览器的情况下动态加载帖子！

到目前为止，一切都很好！

我什至对代码进行了一些定制，并将其与 jQuery Isotope 集成。

到目前为止，一切都很好！

custom.js 文件中包含所有代码以及我为 prettyPhoto 创建的一堆函数和一个喜欢的脚本，例如（prettyPhoto();, postlike();），我在“加载更多”代码中使用，所以添加帖子后，它会“重新加载”。

到目前为止，一切都很好！

顺便说一句，它使用以下代码完成：

jQuery('#content .isotope').append($newEls).isotope('append', $newEls, function() {

漂亮照片（）；postlike();

等等

创建函数以便以后可以使用它们是没有问题的，现在这是真正的问题：例如，我有一堆用于 jplayer 和 flexslider 的内联 javascript，在添加帖子后我无法重新加载，因为我无法创建因为 jplayer 和 flexslider 的代码在不同的文件中，所以我以后可以使用的函数（就像我对 prettyphoto 和 postlike 所做的那样）。

Jplayer 使用以下代码为例：

```
<script type="text/javascript">
jQuery(document).ready(function($) {

    if(jQuery().jPlayer) {
        jQuery('#jquery_jplayer_<?php the_ID(); ?>').jPlayer({
            ready: function() {
                jQuery(this).jPlayer('setMedia', {
                    mp3: "<?php echo stripslashes(htmlspecialchars_decode($mp3)); ?>",
                    oga: "<?php echo stripslashes(htmlspecialchars_decode($ogg)); ?>",
                    end: ""
                    });
                },
            swfPath: "<?php echo get_template_directory_uri(); ?>/js/jplayer/",
            cssSelectorAncestor: "#jp_container_<?php the_ID(); ?>",
            supplied: "<?php if($mp3 != '') : ?>mp3, <?php endif; ?><?php if($ogg != '') : ?>oga, <?php endif; ?> all"
        });
    }

});
</script> 
```

请注意，使用唯一标识符调用 jPlayer：#jquery_jplayer_

**我的问题是：我如何重新加载这个“内联 javascript”，以便在我动态添加新帖子后它可以工作？**

我希望以上内容有意义，如果不是很高兴详细说明！

编辑：

```
 jQuery( '#load-posts a' ).live( 'click', function(e) {

        // Are there more posts to load?
        if(pageNum <= max) {

            // Show that we're working.
            jQuery(this).text( 'Loading...' );

                jQuery( '#content .isotope-new' ).load(nextLink + ' .item',
                function() {

                    var $newEls = jQuery( '#content .isotope-new .item' );

                    $newEls.imagesLoaded( function(){

                    jQuery( '#content .isotope' ).append($newEls).isotope( 'appended', $newEls, function() { 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T19:24:25.930

首先，您将要删除旧脚本以确保您不会两次加载它。提供重新初始化类所需的任何脚本：

`<script class="my-script">`

和

`$('.my-script').remove`

然后使用`getScript`：

[http://api.jquery.com/jQuery.getScript/](http://api.jquery.com/jQuery.getScript/)

ajaxify.js 脚本在这方面做得很好，所以你可以研究一下它的源代码，看看他们是怎么做的：[https](https://github.com/browserstate/ajaxify) ://github.com/browserstate/ajaxify在第 124 行，然后在第 154 行

# php - 打印出喜欢减去 $_SESSION['id']

> ID：12019934
> 
> 赞同：0
> 
> 时间：2012-08-18T15:47:07.933
> 
> 标签：php

我正在流中打印出我的用户喜欢..目前在打印出喜欢时，它会打印给定帖子中包含的 $_SESSION['id'] 。我将如何编辑此代码以回显 user2 之类的内容？

```
$likesqltwo = mysql_query("SELECT * FROM streamdata_feedback WHERE feedback_streamid ='$streamid' AND feedback_rating = 1");
$num3 = mysql_num_rows($likesqltwo);
while($row = mysql_fetch_array($likesqltwo)){

$likes=rawfeeds_user_core::getuser($row['feedback_userid']); 
$user1_id=$_SESSION['id'];
$user2_id=$row['feedback_userid'];

if($user2_id==$_SESSION['id']){
    echo"";
}else{
    echo "And <a title = 'See who likes " .
        $poster_name['fullusersname'] .
        "s status' href='include/likes.php?streamitem_id=" .
        $streamitem_data['streamitem_id']."' />" . 
        $num3 . " ";

}

} 
```

# visual-studio-2012 - 还有其他人觉得 Visual Studio 2012 难以阅读吗？

> ID：12019939
> 
> 赞同：5
> 
> 时间：2012-08-18T15:48:40.803
> 
> 标签：visual-studio-2012

几分钟后我发现新的 UI 很难看。他们似乎已经给它一个低对比度的外观，所以阅读文本非常困难。

有人找到解决方法来获得 VS2010 的外观，但仍然可以利用 .net 4.5 中的新功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T16:10:23.080

1.  将主题更改为从浅到深。（选项 > 环境 > 常规）
2.  更改工具栏字体/背景颜色。（选项 > 环境 > 字体和颜色）
3.  尝试使用[主题](http://www.riverblade.co.uk/blog.php?archive=2012_08_01_archive.xml#2012080202#2012080202)。

# c - +i 返回左值？

> ID：12019940
> 
> 赞同：13
> 
> 时间：2012-08-18T15:49:03.073
> 
> 标签：c

下面的代码在 C 编译器中给出了编译错误

```
++(-i);
error: lvalue required as increment operand 
```

这意味着 -i 返回右值。

而代码

```
++(+i); 
```

不要给出任何错误。为什么这样？[这个链接](http://publib.boulder.ibm.com/infocenter/comphelp/v8v101/index.jsp?topic=/com.ibm.xlcpp8a.doc/language/ref/artaddi.htm)说 +i 不会产生左值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T20:34:49.000

这是您的编译器中的一个故障。在 C 语言中，表达式中的所有左值甚至在应用任何运算符之前都被转换为右值，除了`sizeof`、`&`、`++`、`--`和`.`赋值的操作数（见 6.3.2/2）

换句话说，在 C 语言中`+i`必须产生一个右值不是因为一元`+`应该产生一个右值，而是因为在一元甚至有机会做它的事情*之前*`i`被转换为右值。*`+`*

 *例如，对于`int i`保存 value 的变量`42`， expression`+i`完全等效于 expression `+42`。的左值性丢失了，并且在一元的语义发挥作用*之前*`i`变成了左值性。`42` *`+`*

 *不用说，在这种情况下，一元的结果`+`不可能是左值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T15:56:18.007

来自 C99 标准（*6.5.3.3 一元算术运算符*）：

> 2 一元 + 运算符的结果是其（提升的）操作数的值。整数提升在操作数上执行，结果具有提升的类型。
> 
> 3 一元 - 运算符的结果是其（提升的）操作数的负数。整数提升在操作数上执行，结果具有提升的类型。

在*这个特定*的上下文中，没有代码会使用提升的值`+i`，因此我相信你的编译器假设它等同于`i`，因此将它视为左值。或者可能只是它根本没有实现一元`+`。无论如何，这根本不是你应该做的事情，其他编译器会简单地禁止它。

`-i`执行实际操作，因此其结果是临时的。因此，您不能增加它，因为它不再是变量。

*该标准在6.3.2.1 其他操作数/左值、数组和函数指示符*中明确了这一点：

> 2 除非它是 sizeof 运算符、一元 & 运算符、++ 运算符、-- 运算符或 . 的左操作数的操作数。运算符或赋值运算符，不具有数组类型的左值将转换为存储在指定对象中的值（并且不再是左值）。[…]**

# android - Android ListView/Gallery 布局动画

> ID：12019942
> 
> 赞同：0
> 
> 时间：2012-08-18T15:49:07.943
> 
> 标签：android, listview, animation, layout, gallery

我正在使用图库小部件。我已经附加了在画廊中淡入淡出元素的布局动画。它运作良好。

但是当我更改图库的内容并使用 notifyDataSetChanged() 刷新适配器时；新元素出现了，但它们没有布局动画。

如何实现该效果？我经常更新图库内容，每次都需要这种效果。

这是一个代码：

```
 <com.rtrk.gui.mainmenu.gallery.A4TVGallery
    android:id="@+id/mainMenuGallery"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:gravity="center"
    android:layoutAnimation="@anim/a4tv_gallery_controller"
    android:persistentDrawingCache="animation" />

// Notify new data
mainMenuAdapter.notifyDataSetChanged();

// Set default selection

mainMenuGallery.setSelection(defaultSelectedIndex); 
```

天呐！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T16:32:42.640

布局动画，如文档“定义布局动画以在第一次布局 ViewGroup 时使用”中所述。所以这仅在您第一次显示视图时使用。

我最近做了类似的事情，不知道是不是最好的解决方案，但是可以在系统调用getView方法的时候在adapter中启动动画。重要的是不要在 getView 方法中创建动画对象，而是在适配器构造函数中创建一次，然后将相同的动画重用于您希望使用所需动画显示的视图。

如果您只想在新视图上显示动画，而不是创建一个标志来指示该视图是否已首次显示，并使用视图 ID 将视图与正确的标志相关联。

如果要控制何时触发动画，请在视图上使用 setAnimation 方法而不是 startAnimation。如果您想创建视图逐渐出现在屏幕上的效果，这很有用。

# automation - 如何以编程方式发送和接收聊天消息？

> ID：12019944
> 
> 赞同：0
> 
> 时间：2012-08-18T15:49:16.217
> 
> 标签：automation, chat

当我在 FB 或 Gmail 上收到某人的聊天消息时，我该如何创建一个程序来检测该消息，然后相应地执行一些命令，全部以编程方式进行？

C++、Java 或 Python 中的解决方案会很有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T16:05:53.783

您需要以您选择的语言使用[Gmail的 API。](https://developers.google.com/google-apps/gmail/)[Facebook](https://www.facebook.com/sitetour/chat.php/)使用 Jabber ( [XMPP](http://en.wikipedia.org/wiki/Extensible_Messaging_and_Presence_Protocol) )，它同样具有多种语言的 API。

您不太可能在这里简单地收到解决方案，该站点更多地在帮助您处理您已经编写的代码的基础上工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T23:38:09.407

一条建议

*   使用 java & jabber (也称为 xmpp) 协议
*   安装smack库（java的jabber库，真不错！）
*   阅读有关 jabber 协议的信息，在您的情况下，请特别注意“<presence>”消息。每当有人在 jabber 服务器上连接/断开/更改状态时，“<presence>”消息都会告诉您。
*   代码

# java - 使用静态导入包的目的是什么？

> ID：12019945
> 
> 赞同：-1
> 
> 时间：2012-08-18T15:49:16.913
> 
> 标签：java, java-7

> **可能重复：**
> [“import”之后的“static”修饰符是什么意思？](https://stackoverflow.com/questions/162187/what-does-the-static-modifier-after-import-mean)

```
import static java.nio.file.StandardOpenOption.APPEND; 
```

静态在其中的作用是什么？为什么它是强制性的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T15:51:02.950

这个 oracle 文档应该有帮助：[http ://docs.oracle.com/javase/1.5.0/docs/guide/language/static-import.html](http://docs.oracle.com/javase/1.5.0/docs/guide/language/static-import.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T16:19:51.693

[从这里](http://en.wikipedia.org/wiki/Static_import)复制。

> 静态导入是 Java 编程语言中引入的一项功能，它允许在类中定义为公共静态的成员（字段和方法）在 Java 代码中使用，而无需指定定义字段的类。此功能在 5.0 版中被引入该语言。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T15:52:28.160

因为在您的代码中，您可以使用：

```
APPEND 
```

如果您没有将其作为静态导入，则必须提供完整路径：

```
java.nio.file.StandardOpenOption.APPEND; 
```

# c - 字符数组的空终止

> ID：12019947
> 
> 赞同：40
> 
> 时间：2012-08-18T15:49:44.750
> 
> 标签：c, null, char

考虑以下情况：

```
#include<stdio.h>
int main()
{
    char A[5];
    scanf("%s",A);
    printf("%s",A);
} 
```

我的问题是 char 是否`A[5]`只包含两个字符。说“ab”，`A[0]='a'`然后`A[1]='b'`和`A[2]='\0'`。但是如果输入是“abcde”，那么`'\0'`在这种情况下是哪里。将`A[5]`包含`'\0'`? 如果是，为什么？ `sizeof(A)`将始终返回 5 作为答案。那么当数组已满时，是否有一个额外的字节保留`'\0'`不`sizeof()`计算在内？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-08-18T15:55:34.757

如果您键入的字符超过四个，那么多余的字符和空终止符将被写入数组末尾之外，从而覆盖不属于数组的内存。这是缓冲区溢出。

C 不会阻止你破坏你不拥有的内存。这会导致**[未定义的行为](http://en.wikipedia.org/wiki/Undefined_behavior)**。你的程序可以做任何事情——它可能会崩溃，它可能会默默地丢弃其他变量并导致令人困惑的行为，它可能是无害的，或者其他任何事情。请注意，不能保证您的程序将可靠地工作或可靠地崩溃。你甚至不能指望它立即崩溃。

这是一个很好的例子，说明为什么`scanf("%s")`是危险的，永远不应该使用。它不知道数组的大小，这意味着无法安全地使用它。相反，请避免 scanf 并使用更安全的东西，例如[fgets()](http://linux.die.net/man/3/fgets)：

> fgets() 从流中最多读入**一个小于 size**的字符，并将它们存储到 s 指向的缓冲区中。在 EOF 或换行符后停止读取。如果读取了换行符，则将其存储到缓冲区中。终止的空字节 ('\0') 存储在缓冲区中的最后一个字符之后。

例子：

```
if (fgets(A, sizeof A, stdin) == NULL) {
    /* error reading input */
} 
```

烦人的是， fgets() 将在数组末尾留下一个尾随换行符 ('\n')。因此，您可能还希望代码将其删除。

```
size_t length = strlen(A);
if (A[length - 1] == '\n') {
    A[length - 1] = '\0';
} 
```

啊。一个简单的（但破碎的）`scanf("%s")`变成了一个 7 行的怪物。这是今天的第二课：C 不擅长 I/O 和字符串处理。可以做，也可以安全做，但是C会一直踢和尖叫。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-18T16:01:17.060

正如已经指出的那样 - 您必须定义/分配一个长度为 N + 1 的数组才能正确存储 N 个字符。可以限制 scanf 读取的字符数量。在您的示例中，它将是：

```
scanf("%4s", A); 
```

为了阅读最大值。来自标准输入的 4 个字符。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-18T16:27:57.783

c 中的字符数组只是指向内存块的指针。如果您告诉编译器为字符保留 5 个字节，它会保留。如果您尝试在其中放置超过 5 个字节，它只会覆盖超过您保留的 5 个字节的内存。

这就是为什么 c 可以有严格的安全实现。你必须知道你只会写 4 个字符 + 一个 \0。C 将允许您覆盖内存，直到程序崩溃。

请不要将 char foo[5] 视为字符串。将其视为放置 5 个字节的位置。您可以在其中存储 5 个字符而不使用 null，但您必须记住您需要执行 memcpy(otherCharArray, foo, 5) 而不是使用 strcpy。您还必须知道 otherCharArray 有足够的空间容纳这 5 个字节。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-18T15:54:37.217

你最终会得到*未定义的行为*。

正如您所说，大小`A`始终为 5，因此如果您读取 5 个或更多`char`s，`scanf`将尝试写入不应修改的内存。

不，符号没有保留空间/字符`\0`。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-08-18T16:01:35.393

任何长度大于 4 个字符的字符串都会导致`scanf`写入超出数组的范围。产生的行为是未定义的，如果幸运的话，会导致程序崩溃。

如果你想知道为什么`scanf`不停止写入太长而无法存储在数组中的字符串，`A`那是因为无法`scanf`知道`sizeof(A)`是 5。当你将数组作为参数传递给 C 函数时，数组*会衰减*指向指向数组中第一个元素的指针。因此，无法在函数中查询数组的大小。

为了限制读入数组的字符数使用

```
scanf("%4s", A); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-08-18T15:53:15.850

没有保留字符，因此您必须小心不要将整个数组填充到不能以空值终止的程度。Char 函数依赖于空终止符，如果您发现自己处于您所描述的情况，您将从它们那里得到灾难性的结果。

您将看到的许多 C 代码将使用函数的“n”个衍生物，例如 strncpy。从该手册页中，您可以阅读：

> strcpy() 和 strncpy() 函数返回 s1。stpcpy() 和 stpncpy() 函数返回一个指向 s1 的终止 `\0' 字符的指针。如果 stpncpy() 没有以 NUL 字符终止 s1，它会返回一个指向 s1[n] 的指针（它不一定引用有效的内存位置。）

strlen 还依赖空字符来确定字符缓冲区的长度。如果并且当您缺少该字符时，您将得到不正确的结果。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-02-07T16:51:08.030

空字符用于终止数组。它位于数组的末尾，并显示数组在该点结束。数组自动使最后一个字符为空字符，以便编译器可以很容易地理解数组结束。

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2017-08-01T05:35:01.927

\0 是一个终止符运算符，如果数组未满，则在数组已满时自行终止，那么当您输入一个字符串时，\0 将位于数组的末尾，它将从数组的末尾读取

# spotify - libspotify 的速率限制

> ID：12019954
> 
> 赞同：1
> 
> 时间：2012-08-18T15:50:28.387
> 
> 标签：spotify

我刚开始在我的 iOS 应用程序中观察到来自 [CocoaLibSpotify didLogMessage] 的以下错误消息。

我 [snd:381] 速率有限。等待 3s

有谁知道 libspotify API 速率限制是什么？我看到 Web API 限制是 10/秒/IP。libspotify 是一样的吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T16:28:02.657

libspotify API 在您的本地机器上执行 - 调用它们没有速率限制。

您为此提供了几乎零上下文，但我*认为*您所看到的是您正在播放曲目并且 CocoaLibSpotify 已填充播放缓冲区。libSpotify 不会以超过 1.5 倍的实时速度提供音频数据，因此它会在尝试重新填充缓冲区之前等待。

那条信息是完全正常的，它前面的“我”意味着它只是一条信息性信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T22:10:48.053

我也有同样的经历。当我跳过曲目过多时，它会打印出一条信息消息“Rate limited waiting 3s”。

但也许他们应该在 UI 中打印出一条消息？
否则会迷惑没有经验的用户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T11:02:27.663

我也在普通的 Linux 桌面客户端中看到了该消息。我只有在浏览音乐并且过快跳过太多曲目时才会得到它。在 Spotify 中获取新曲目的速度存在服务器端速率限制。此信息消息可能与该限制有关，但也可能是 iKenndac 所写的。

# facebook - MonoTouch facebook 绑定示例无法使用最新的 ios-sdk 运行

> ID：12019955
> 
> 赞同：1
> 
> 时间：2012-08-18T15:50:36.280
> 
> 标签：facebook, facebook-graph-api, xamarin.ios, facebook-c#-sdk, xamarin

当我尝试构建 facebook API 的 monotouch-binding 示例时，出现以下错误：

```
Building: sample (Debug|iPhoneSimulator)
Performing main compilation...
/Developer/MonoTouch/usr/bin/smcs /noconfig "/out:/Users/kovacsd/devel/mozdulj/Libraries/monotouch-bindings/facebook/sample/bin/iPhoneSimulator/Debug/sample.exe" "/r:/Developer/MonoTouch/usr/lib/mono/2.1/System.dll" "/r:/Developer/MonoTouch/usr/lib/mono/2.1/System.Xml.dll" "/r:/Developer/MonoTouch/usr/lib/mono/2.1/System.Core.dll" "/r:/Developer/MonoTouch/usr/lib/mono/2.1/monotouch.dll" "/r:/Users/kovacsd/devel/mozdulj/Libraries/monotouch-bindings/ATMHud/sample/MonoTouch.Dialog.dll" "/r:/Users/kovacsd/devel/mozdulj/Libraries/monotouch-bindings/facebook/binding/Facebook.dll" "/r:/Developer/MonoTouch/usr/lib/mono/2.1/System.Json.dll" "/r:/Developer/MonoTouch/usr/lib/mono/2.1/System.Web.Services.dll" /nologo /warn:4 /debug:full /optimize- /codepage:utf8 "/define:DEBUG"  /t:exe "/Users/kovacsd/devel/mozdulj/Libraries/monotouch-bindings/facebook/sample/Main.cs" 
Compilation succeeded - 1 warning(s)

/Users/kovacsd/devel/mozdulj/Libraries/monotouch-bindings/facebook/sample/Main.cs(217,33): warning CS0162: Unreachable code detected

Build complete -- 0 errors, 1 warning

Compiling to native code
/Developer/MonoTouch/usr/bin/mtouch -sdkroot "/Applications/Xcode.app/Contents/Developer" -v --nomanifest --nosign -sim "/Users/kovacsd/devel/mozdulj/Libraries/monotouch-bindings/facebook/sample/bin/iPhoneSimulator/Debug/sample.app" -r "/Developer/MonoTouch/usr/lib/mono/2.1/System.dll" -r "/Developer/MonoTouch/usr/lib/mono/2.1/System.Xml.dll" -r "/Developer/MonoTouch/usr/lib/mono/2.1/System.Core.dll" -r "/Developer/MonoTouch/usr/lib/mono/2.1/monotouch.dll" -r "/Users/kovacsd/devel/mozdulj/Libraries/monotouch-bindings/ATMHud/sample/MonoTouch.Dialog.dll" -r "/Users/kovacsd/devel/mozdulj/Libraries/monotouch-bindings/facebook/binding/Facebook.dll" -r "/Developer/MonoTouch/usr/lib/mono/2.1/System.Json.dll" -r "/Developer/MonoTouch/usr/lib/mono/2.1/System.Web.Services.dll" -debug -profiling -nolink -sdk "5.1" "/Users/kovacsd/devel/mozdulj/Libraries/monotouch-bindings/facebook/sample/bin/iPhoneSimulator/Debug/sample.exe"
MonoTouch version 5.2.13 using framework: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk
Copied /Users/kovacsd/devel/mozdulj/Libraries/monotouch-bindings/facebook/sample/bin/iPhoneSimulator/Debug/sample.exe to /Users/kovacsd/devel/mozdulj/Libraries/monotouch-bindings/facebook/sample/bin/iPhoneSimulator/Debug/sample.app/sample.exe
Copied /Developer/MonoTouch/usr/lib/mono/2.1/monotouch.dll to /Users/kovacsd/devel/mozdulj/Libraries/monotouch-bindings/facebook/sample/bin/iPhoneSimulator/Debug/sample.app/monotouch.dll
Copied /Developer/MonoTouch/usr/lib/mono/2.1/mscorlib.dll to /Users/kovacsd/devel/mozdulj/Libraries/monotouch-bindings/facebook/sample/bin/iPhoneSimulator/Debug/sample.app/mscorlib.dll
Copied /Developer/MonoTouch/usr/lib/mono/2.1/System.dll to /Users/kovacsd/devel/mozdulj/Libraries/monotouch-bindings/facebook/sample/bin/iPhoneSimulator/Debug/sample.app/System.dll
Copied /Developer/MonoTouch/usr/lib/mono/2.1/Mono.Security.dll to /Users/kovacsd/devel/mozdulj/Libraries/monotouch-bindings/facebook/sample/bin/iPhoneSimulator/Debug/sample.app/Mono.Security.dll
Copied /Developer/MonoTouch/usr/lib/mono/2.1/System.Core.dll to /Users/kovacsd/devel/mozdulj/Libraries/monotouch-bindings/facebook/sample/bin/iPhoneSimulator/Debug/sample.app/System.Core.dll
Copied /Developer/MonoTouch/usr/lib/mono/2.1/System.Xml.dll to /Users/kovacsd/devel/mozdulj/Libraries/monotouch-bindings/facebook/sample/bin/iPhoneSimulator/Debug/sample.app/System.Xml.dll
Copied /var/folders/1p/0r0j38dn71jdt871gtxg6srm0000gn/T/tmp5dfe35b3.tmp/Facebook.dll to /Users/kovacsd/devel/mozdulj/Libraries/monotouch-bindings/facebook/sample/bin/iPhoneSimulator/Debug/sample.app/Facebook.dll
Copied /Users/kovacsd/devel/mozdulj/Libraries/monotouch-bindings/ATMHud/sample/MonoTouch.Dialog.dll to /Users/kovacsd/devel/mozdulj/Libraries/monotouch-bindings/facebook/sample/bin/iPhoneSimulator/Debug/sample.app/MonoTouch.Dialog.dll
Copied /Developer/MonoTouch/usr/lib/mono/2.1/System.Web.Services.dll to /Users/kovacsd/devel/mozdulj/Libraries/monotouch-bindings/facebook/sample/bin/iPhoneSimulator/Debug/sample.app/System.Web.Services.dll
Copied /Developer/MonoTouch/usr/lib/mono/2.1/System.Json.dll to /Users/kovacsd/devel/mozdulj/Libraries/monotouch-bindings/facebook/sample/bin/iPhoneSimulator/Debug/sample.app/System.Json.dll
Copied /Developer/MonoTouch/usr/lib/mono/2.1/System.ServiceModel.Web.dll to /Users/kovacsd/devel/mozdulj/Libraries/monotouch-bindings/facebook/sample/bin/iPhoneSimulator/Debug/sample.app/System.ServiceModel.Web.dll
Copied /Developer/MonoTouch/usr/lib/mono/2.1/System.Runtime.Serialization.dll to /Users/kovacsd/devel/mozdulj/Libraries/monotouch-bindings/facebook/sample/bin/iPhoneSimulator/Debug/sample.app/System.Runtime.Serialization.dll
Copied /Developer/MonoTouch/usr/lib/mono/2.1/System.ServiceModel.dll to /Users/kovacsd/devel/mozdulj/Libraries/monotouch-bindings/facebook/sample/bin/iPhoneSimulator/Debug/sample.app/System.ServiceModel.dll
Generated /var/folders/1p/0r0j38dn71jdt871gtxg6srm0000gn/T/tmp5dfe35b3.tmp/main.m
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/gcc -arch i386 -gdwarf-2 -fobjc-legacy-dispatch -fobjc-abi-version=2 -miphoneos-version-min=5.1 -arch i386  -std=c99 -I/Developer/MonoTouch/SDKs/MonoTouch.iphonesimulator.sdk/usr/include -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk -c /var/folders/1p/0r0j38dn71jdt871gtxg6srm0000gn/T/tmp5dfe35b3.tmp/main.m -o /var/folders/1p/0r0j38dn71jdt871gtxg6srm0000gn/T/tmp5dfe35b3.tmp/main.x86.o -DDEBUG  
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/gcc -arch i386 -gdwarf-2 -fobjc-legacy-dispatch -fobjc-abi-version=2 -miphoneos-version-min=5.1   -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk /var/folders/1p/0r0j38dn71jdt871gtxg6srm0000gn/T/tmp5dfe35b3.tmp/main.x86.o -o /var/folders/1p/0r0j38dn71jdt871gtxg6srm0000gn/T/tmp5dfe35b3.tmp/sample -framework CFNetwork -framework Foundation -framework GameKit -framework MapKit -framework MediaPlayer -framework MessageUI -framework OpenGLES -framework StoreKit -framework UIKit -framework AddressBookUI -framework SystemConfiguration -framework AddressBook -framework AudioToolbox -framework AVFoundation -framework QuartzCore -framework CoreFoundation -framework CoreGraphics -framework CoreLocation -framework MobileCoreServices -framework Security -framework CoreData -framework ExternalAccessory -weak_framework AssetsLibrary -weak_framework Accounts -weak_framework CoreBluetooth -weak_framework CoreTelephony -weak_framework EventKit -weak_framework EventKitUI -weak_framework CoreMotion -weak_framework GLKit -weak_framework NewsstandKit -weak_framework Twitter -weak_framework iAd -weak_framework CoreImage -weak_framework CoreText -weak_framework ImageIO -weak_framework CoreMedia -weak_framework CoreVideo -weak_framework QuickLook -lz -u _mono_pmip -u _CreateZStream -u _CloseZStream -u _Flush -u _ReadZStream -u _WriteZStream -liconv -lmono-2.0 -lmonotouch -L/Developer/MonoTouch/SDKs/MonoTouch.iphonesimulator.sdk/usr/lib -u _catch_exception_raise -force_load /var/folders/1p/0r0j38dn71jdt871gtxg6srm0000gn/T/tmp5dfe35b3.tmp/libFacebookSDK.a
Process exited with code 1, command:
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/gcc -arch i386 -gdwarf-2 -fobjc-legacy-dispatch -fobjc-abi-version=2 -miphoneos-version-min=5.1   -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk /var/folders/1p/0r0j38dn71jdt871gtxg6srm0000gn/T/tmp5dfe35b3.tmp/main.x86.o -o /var/folders/1p/0r0j38dn71jdt871gtxg6srm0000gn/T/tmp5dfe35b3.tmp/sample -framework CFNetwork -framework Foundation -framework GameKit -framework MapKit -framework MediaPlayer -framework MessageUI -framework OpenGLES -framework StoreKit -framework UIKit -framework AddressBookUI -framework SystemConfiguration -framework AddressBook -framework AudioToolbox -framework AVFoundation -framework QuartzCore -framework CoreFoundation -framework CoreGraphics -framework CoreLocation -framework MobileCoreServices -framework Security -framework CoreData -framework ExternalAccessory -weak_framework AssetsLibrary -weak_framework Accounts -weak_framework CoreBluetooth -weak_framework CoreTelephony -weak_framework EventKit -weak_framework EventKitUI -weak_framework CoreMotion -weak_framework GLKit -weak_framework NewsstandKit -weak_framework Twitter -weak_framework iAd -weak_framework CoreImage -weak_framework CoreText -weak_framework ImageIO -weak_framework CoreMedia -weak_framework CoreVideo -weak_framework QuickLook -lz -u _mono_pmip -u _CreateZStream -u _CloseZStream -u _Flush -u _ReadZStream -u _WriteZStream -liconv -lmono-2.0 -lmonotouch -L/Developer/MonoTouch/SDKs/MonoTouch.iphonesimulator.sdk/usr/lib -u _catch_exception_raise -force_load /var/folders/1p/0r0j38dn71jdt871gtxg6srm0000gn/T/tmp5dfe35b3.tmp/libFacebookSDK.a
Undefined symbols for architecture i386:
  "_sqlite3_open_v2", referenced from:
      ___36-[FBCacheIndex initWithCacheFolder:]_block_invoke_0 in libFacebookSDK.a(FBCacheIndex.o)
  "_sqlite3_exec", referenced from:
      ___36-[FBCacheIndex initWithCacheFolder:]_block_invoke_0 in libFacebookSDK.a(FBCacheIndex.o)
  "_sqlite3_close", referenced from:
      ___23-[FBCacheIndex dealloc]_block_invoke_0 in libFacebookSDK.a(FBCacheIndex.o)
  "_sqlite3_finalize", referenced from:
      _releaseStatement in libFacebookSDK.a(FBCacheIndex.o)
  "_sqlite3_errmsg", referenced from:
      _releaseStatement in libFacebookSDK.a(FBCacheIndex.o)
      -[FBCacheIndex _updateEntryInDatabaseForKey:entry:] in libFacebookSDK.a(FBCacheIndex.o)
      _initializeStatement in libFacebookSDK.a(FBCacheIndex.o)
      -[FBCacheIndex _writeEntryInDatabase:] in libFacebookSDK.a(FBCacheIndex.o)
      -[FBCacheIndex _readEntryFromDatabase:] in libFacebookSDK.a(FBCacheIndex.o)
      -[FBCacheIndex _fetchCurrentDiskUsage] in libFacebookSDK.a(FBCacheIndex.o)
      -[FBCacheIndex _removeEntryFromDatabaseForKey:] in libFacebookSDK.a(FBCacheIndex.o)
      ...
  "_sqlite3_bind_text", referenced from:
      -[FBCacheIndex _updateEntryInDatabaseForKey:entry:] in libFacebookSDK.a(FBCacheIndex.o)
      -[FBCacheIndex _writeEntryInDatabase:] in libFacebookSDK.a(FBCacheIndex.o)
      -[FBCacheIndex _readEntryFromDatabase:] in libFacebookSDK.a(FBCacheIndex.o)
      -[FBCacheIndex _removeEntryFromDatabaseForKey:] in libFacebookSDK.a(FBCacheIndex.o)
  "_sqlite3_bind_double", referenced from:
      -[FBCacheIndex _updateEntryInDatabaseForKey:entry:] in libFacebookSDK.a(FBCacheIndex.o)
      -[FBCacheIndex _writeEntryInDatabase:] in libFacebookSDK.a(FBCacheIndex.o)
  "_sqlite3_bind_int", referenced from:
      -[FBCacheIndex _updateEntryInDatabaseForKey:entry:] in libFacebookSDK.a(FBCacheIndex.o)
      -[FBCacheIndex _writeEntryInDatabase:] in libFacebookSDK.a(FBCacheIndex.o)
      -[FBCacheIndex _trimDatabase] in libFacebookSDK.a(FBCacheIndex.o)
  "_sqlite3_step", referenced from:
      -[FBCacheIndex _updateEntryInDatabaseForKey:entry:] in libFacebookSDK.a(FBCacheIndex.o)
      -[FBCacheIndex _writeEntryInDatabase:] in libFacebookSDK.a(FBCacheIndex.o)
      -[FBCacheIndex _readEntryFromDatabase:] in libFacebookSDK.a(FBCacheIndex.o)
      -[FBCacheIndex _fetchCurrentDiskUsage] in libFacebookSDK.a(FBCacheIndex.o)
      -[FBCacheIndex _removeEntryFromDatabaseForKey:] in libFacebookSDK.a(FBCacheIndex.o)
      -[FBCacheIndex _dropTrimmingTable] in libFacebookSDK.a(FBCacheIndex.o)
      -[FBCacheIndex _trimDatabase] in libFacebookSDK.a(FBCacheIndex.o)
      ...
  "_sqlite3_prepare_v2", referenced from:
      _initializeStatement in libFacebookSDK.a(FBCacheIndex.o)
  "_sqlite3_reset", referenced from:
      _initializeStatement in libFacebookSDK.a(FBCacheIndex.o)
  "_sqlite3_column_text", referenced from:
      -[FBCacheIndex _readEntryFromDatabase:] in libFacebookSDK.a(FBCacheIndex.o)
      -[FBCacheIndex _trimDatabase] in libFacebookSDK.a(FBCacheIndex.o)
  "_sqlite3_column_double", referenced from:
      -[FBCacheIndex _readEntryFromDatabase:] in libFacebookSDK.a(FBCacheIndex.o)
  "_sqlite3_column_int", referenced from:
      -[FBCacheIndex _readEntryFromDatabase:] in libFacebookSDK.a(FBCacheIndex.o)
      -[FBCacheIndex _fetchCurrentDiskUsage] in libFacebookSDK.a(FBCacheIndex.o)
      -[FBCacheIndex _trimDatabase] in libFacebookSDK.a(FBCacheIndex.o)
ld: symbol(s) not found for architecture i386
collect2: ld returned 1 exit status

mtouch exited with code 1

---------------------- Done ----------------------

Build: 1 error, 1 warning 
```

我尝试添加 Mono.Date.Sqlite 但结果是一样的。

在我恢复到旧版本后它可以工作..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T23:49:38.237

这可能是因为新版本的Facebook**原生**库需要**sqlite**，而之前的版本不需要。

添加`Mono.Date.Sqlite`只会帮助托管代码，即如果使用来自该程序集的代码，它将在**运行时进行动态链接。**要*修复*本机代码要求，`sqlite`需要在（本机）**编译/链接**时可用。

*最好*的方法是更新 facebook 绑定以确保它的`[LinkWith]`属性包括与**sqlite**链接的说明（更多详细信息在[本文中](http://docs.xamarin.com/ios/advanced_topics/binding_objective-c_types/Binding_Types_Reference_Guide?highlight=linkwith#LinkWithAttribute)）。

您还应该能够通过添加以下内容将其添加到您自己的项目中（但不要忘记对`Debug|Release`两种`iPhone|iPhoneSimulator`配置都这样做）：

```
-gcc_flags "-lsqlite" 
```

到项目的构建选项中的“附加 mtouch 参数”（[本文](http://docs.xamarin.com/ios/advanced_topics/linking_native_libraries)中的更多详细信息）。

# javascript - 提交表单“Chrome/Safari”时 XMLHttpRequest 不起作用

> ID：12019959
> 
> 赞同：0
> 
> 时间：2012-08-18T15:50:59.140
> 
> 标签：javascript, jquery, google-chrome

刚才我才知道，由于 Webkit 错误 23933，在 Chrome/Safari 中提交表单时 XMLHttpRequest 不起作用（用于进度跟踪）。但我正在使用这种技术，即我正在提交表单哪些内容是一些多部分数据（文件上传）然后通过ajax请求（在特定时间间隔内）我正在尝试从服务器获取状态。

这在 FF 中工作正常，但在 chrome 中不行，我应该做什么，我想在多个文件上传期间显示一些信息和状态。我应该怎么做，我从这个网站得到了这个信息：- [http://chemicaloliver.net/programming/php-5-4-file-upload-progress-and-html5-progress-bars/](http://chemicaloliver.net/programming/php-5-4-file-upload-progress-and-html5-progress-bars/)

# python - Python：酸洗嵌套函数

> ID：12019961
> 
> 赞同：14
> 
> 时间：2012-08-18T15:51:03.980
> 
> 标签：python, function, nested, pickle

使用示例

```
def foo(a):
    def bar(b):
        return a+b
    return bar

d = {1:foo(1), 2:foo(2)} 
```

似乎 pickle 模块不适用于未在模块范围内定义的函数，因此 pickle 'd' 将不起作用。我应该考虑另一种酸洗机制吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-18T20:35:23.857

恐怕你不能腌制嵌套函数。

该`pickle`模块按名称序列化函数。也就是说，如果您`myfunc`在模块中有一个函数，`mymodule`它只是保存名称`mymodule.myfunc`并在反序列化时再次查找它。（这是一个重要的安全性和兼容性问题，因为它保证反序列化代码使用它自己的函数定义，而不是可能被破坏或过时的原始定义。）

唉，`pickle`不能用嵌套函数做到这一点，因为没有办法直接通过名称来寻址它们。例如，您的`bar`函数不能从`foo`.

如果您需要一个像函数一样工作的可序列化对象，您可以改为使用`__call__`方法创建一个类：

```
class foo(object):
    def __init__(self, a):
        self.a = a
    def __call__(self, b): # the function formerly known as "bar"
        return self.a + b 
```

这就像问题中的嵌套函数一样，应该不会对`pickle`. `foo`但请注意，当您反序列化实例时，您需要有相同的类定义可用。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-02-24T13:28:25.533

如果您使用`dill`而不是`pickle`.

```
>>> import dill
>>>    
>>> def foo(a):
...   def bar(b):
...     return a+b
...   return bar
... 
>>> d = {1:foo(1), 2:foo(2)}
>>> 
>>> _d = dill.dumps(d)
>>> d_ = dill.loads(_d)
>>> d_
{1: <function bar at 0x108cfe848>, 2: <function bar at 0x108cfe8c0>}
>>> d[1](0) + d[2](10)
13
>>> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-11T06:03:34.803

根据 Blckknght 的回答。如果嵌套函数是唯一的外部序列化类型并将其用作`decorator`，您可以`functools.warps`在内部函数定义的顶部添加以引导其他解释找到正确的名称：

```
from functools import warps

def foo(func):
    @wraps(func)
    def bar(b):
        return func(b)
    return bar

@foo
def zzz(b):
    return b 
```

# iphone - 更新后获取当前 MapView 区域

> ID：12019963
> 
> 赞同：0
> 
> 时间：2012-08-18T15:51:18.947
> 
> 标签：iphone, mkmapview

用户移动或更新地图后，如何获取当前的 mapView 跨度？

我在这个委托方法中放了什么：

```
-(void)mapView:(MKMapView *)mapView regionDidChangeAnimated:(BOOL)animated
{

} 
```

地图更新后如何获取电流`mapView.region.span`？我需要将它传递给另一个方法，并让它在地图上用某些东西（不是 mapAnnotations）重绘整个地图。

这个：

```
 -(void)mapView:(MKMapView *)mapView regionDidChangeAnimated:(BOOL)animated
    {
         [customMethod updateWith:mapView.region.span];
    } 
```

不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T17:38:04.277

仅当您更改缩放级别时，跨度才会更改。如果你没有捏地图（缩放手势），而只是平移（移动地图），你的中心将被改变而不是跨度。

因此，您应该将完整区域传递给自定义方法。

```
-(void)mapView:(MKMapView *)mapView regionDidChangeAnimated:(BOOL)animated
{
    [customMethod updateWith:mapView.region];
} 
```

# javascript - 将数组中数字的所有组合相加

> ID：12019966
> 
> 赞同：1
> 
> 时间：2012-08-18T15:51:59.827
> 
> 标签：javascript, arrays

我正在尝试用 javascript 编写一个程序，该程序从 html textarea 中获取未指定数量的数字，并尝试所有组合（将所有数字彼此相加）以查看它是否与您指定的数字相匹配。

现在我可以用 textarea 中的字符串创建一个数组，并使用`for`循环将它们添加起来（见下面的代码）。问题是如何为未指定数量的要相加的数字执行此操作（例如，如果您在 textarea 中输入 7 个数字，则相加 7 个不同的数字）？我正在考虑使用第二个数组，它会从第一个循环中获取要加起来的数字。然后通过使用包含所有数字（在我的示例中为行）作为最终值的数组的长度的 for 循环来制作循环变量的长度。

如何填写第二个数组的值，确保使用所有组合？

顺便说一句，我想要这段代码，因为我是一名审计员。有时，客户在一次预订中撤销了几个金额，而没有任何评论。此代码将更容易检查哪些预订已被撤销

编辑：cheheen 的遮阳篷似乎在工作我只有一句话。如果您的电源组的多个子组相加会产生您正在寻找的数字怎么办？例如：findSum([1,2,3,4,5],6) 可以得出 [1,2,3]，也可以得出 [2,4] 或 [1,5]。是否可以让函数返回多个子集？

我自己找到了答案:)我替换了代码

```
return numberSet; 
```

经过

```
document.getElementById("outp").value=document.getElementById("outp").value+ numberSet +"\n"; 
```

非常感谢奇肯

还有一个问题。如何格式化输入以解析该函数​​？下面的代码似乎不起作用。inp 是输入所在的文本区域的 ID（数字用半列分隔。变量 ge 有效，所以那里没有问题（用 [1,2,3,4] 测试它并且有效。出了什么问题用这个代码？

重新编辑：

找到了解决方案。需要将数组解析为浮点数添加了此代码。

```
for (var i=0; i < lines.length; i++) {
    lines[i]= parseFloat(lines[i]);
    }

findSum(document.getElementById("inp").value.split(";"), ge); 
```

代码：

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript">
function powerset(arr) {
    var ps = [[]];
    for (var i=0; i < arr.length; i++) {
        for (var j = 0, len = ps.length; j < len; j++) {
            ps.push(ps[j].concat(arr[i]));
        }
    }
    return ps;
}

function sum(arr) {
    var total = 0;
    for (var i = 0; i < arr.length; i++)
        total += arr[i];
    return total
}

function findSum(numbers, targetSum) {
    var numberSets = powerset(numbers);
    for (var i=0; i < numberSets.length; i++) {
        var numberSet = numberSets[i]; 
        if (sum(numberSet) == targetSum)
            document.getElementById("outp").value=document.getElementById("outp").value+ numberSet +"\n"; 
    }
}

function main()
{

ge= document.getElementById("getal").value;
findSum([1,1,0.5,0.1,0.2,0.2], ge);

}

</script>
</head>
<body>

<input type="button" onclick="main()" value="tel" /><input type="text" id="getal" /><br>
input<br><textarea id="inp"  ></textarea><br>
output<br><textarea id="outp" ></textarea><br>
document.getElementById("inp").value.split(";")
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-18T16:07:44.923

更具体地说，您正在寻找数字集合的[幂集中](http://en.wikipedia.org/wiki/Power_set)每个集合的特定总和。

您可以使用以下代码完成此操作。

```
function powerset(arr) {
    var ps = [[]];
    for (var i=0; i < arr.length; i++) {
        for (var j = 0, len = ps.length; j < len; j++) {
            ps.push(ps[j].concat(arr[i]));
        }
    }
    return ps;
}

function sum(arr) {
    var total = 0;
    for (var i = 0; i < arr.length; i++)
        total += arr[i];
    return total
}

function findSum(numbers, targetSum) {
    var numberSets = powerset(numbers);
    for (var i=0; i < numberSets.length; i++) {
        var numberSet = numberSets[i]; 
        if (sum(numberSet) == targetSum)
            return numberSet;
    }
} 
```

示例调用：

```
>> findSum([1,2,3,4,5],6)
[1, 2, 3]
>> findSum([1,2,3,4,5],0)
[]
>> findSum([1,2,3,4,5],11)
[1, 2, 3, 5] 
```

如果您想收集总和为值的所有子集（而不是第一个，如上所述），您可以使用以下方法。

```
function findSums(numbers, targetSum) {
    var sumSets = [];
    var numberSets = powerset(numbers);
    for (var i=0; i < numberSets.length; i++) {
        var numberSet = numberSets[i]; 
        if (sum(numberSet) == targetSum)
            sumSets.push(numberSet);
    }
    return sumSets;
} 
```

示例调用：

```
>> findSums([1,2,3,4,5],5);
[[2,3],[1,4],[5]]
>> findSums([1,2,3,4,5],0);
[[]] 
```

# c# - 在 C# 中使用带有 void return 的异步并忘记

> ID：12019970
> 
> 赞同：3
> 
> 时间：2012-08-18T15:52:31.660
> 
> 标签：c#, threadpool, async-await

我在 Web APP 中有一个方法返回 void

```
public static void doSomething(){
} 
```

`async`我喜欢在 c# 5.0 中使用它变得火而忘记，如何？

顺便说一句，如果`void doSomethingQuick()`是短期方法，那么最节省资源的方法是什么？

如果这`void doSomethingSlow()`是一个长期运行的方法，那么最节省资源的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T22:44:12.200

异步方法分为三种类型：

```
async void Foo()
async Task Bar()
async Task<T> Baz() 
```

请注意，只有最后两个可以（a）等待。此示例中的 Foo 用于火灾和忘记场景。您必须记住，`async`在这种情况下，它只是方法本身可能使用的一个指标`await`。因此，您可以声明`async void doSomethingQuick()`and `async void doSomethingSlow()`。仅仅因为一个方法返回一个任务并不意味着它在一个单独的线程上执行。它可能会返回已完成的任务。

# jsp - JSP：如何从 html 表单获取数据到 java 类

> ID：12019972
> 
> 赞同：0
> 
> 时间：2012-08-18T15:52:50.943
> 
> 标签：jsp

您知道我们需要一个 java 类来编写自定义标签库。所以我想写我自己的标签库。但是我必须从jsp页面中的html表单中获取数据。如何从 html 表单获取数据到我的 java 类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T17:28:44.017

您需要`HttpServletRequest`从页面上下文中检索 。在您的标签库中，只需使用它来获取它：

```
PageContext pageContext = (PageContext) getJspContext();  
HttpServletRequest request = (HttpServletRequest) pageContext.getRequest(); 
```

例如：您的 JSP 页面中有一个 html 表单：

```
<form action="/someServlet">
   <input type="text" value="yourValue" name="yourParameterName"/>
</form> 
```

要获取您的参数，请使用：

```
String yourValue = request.getParameter("yourParameterName"); 
```

# java - 如何在可执行 Jar 中包含 SQLite 数据库？

> ID：12019974
> 
> 赞同：30
> 
> 时间：2012-08-18T15:52:58.687
> 
> 标签：java, swing, sqlite, executable-jar

我创建了一个使用 SQLite 作为本地数据库的 Swing 应用程序。数据库文件位于项目的根目录中。

```
Project/DatabaseFile 
```

该应用程序在 Eclipse 上运行良好，但是当我运行打包的可执行 Jar 时，出现以下错误：

```
No such table : table1 
```

这意味着无法访问数据库。当我检查生成的 JAR 文件的内容时，数据库文件已经不存在了。

在代码中，我将数据库链接如下：

```
jdbc:sqlite:DatabaseFile 
```

我的问题是，如何在可执行 Jar 中包含 SQLite 数据库？

**编辑**

当我将 DB 文件放在源文件夹中`Project/src/DatabaseFile`并将路径更改为 时`jdbc:sqlite:src/DatabaseFile`，它可以在 Eclipse 上运行，但在将 Jar 文件作为`java -jar Project.jar`. 它说：

```
path to 'src/DatabaseFile': 'C:\Users\name\src' does not exist 
```

我想我需要为数据库指定一个相对路径。

**编辑**

这是我连接到数据库的方式：

```
public Connection getConnection(){      
    try{
        Class.forName("org.sqlite.JDBC").newInstance();             
        con = DriverManager.getConnection("jdbc:sqlite:src/DatabaseFile");              

    } catch (Exception e) {
        Log.fatal("Méthode: getConnection() | Class  : SQLiteConnection | msg system : " + e.getMessage());
    }
    return con;
} 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-08-19T15:40:32.863

你用什么库来做 SQLite？

我根据您指定的连接 URI 进行了搜索，找到[了这个](https://code.google.com/p/sqlite-jdbc/)。在[文档](http://www.xerial.org/trac/Xerial/wiki/SQLiteJDBC)中它说：

> 2009 年 5 月 19 日：sqlite-jdbc-3.6.14.1 发布。此版本支持“jdbc:sqlite::resource:”语法来访问包含在 JAR 档案中的只读 DB 文件，或通过 URL、本地文件地址等指定的外部资源（另见[详细信息](https://groups.google.com/forum/?fromgroups#!topic/xerial/Oayzj5nrJGk[1-25])）

如果那是您正在使用的驱动程序，那么我建议使用以下连接 URI：

```
"jdbc:sqlite::resource:DatabaseFile" 
```

关键是，由于您的数据库位于 jar 文件中，因此无法将其作为带有`FileInputStream`. 相反，它必须通过 JVM 对它的支持（即使用[`Class.getResource()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getResource(java.lang.String))or [`Class.getResourceAsStream()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getResourceAsStream(java.lang.String))）来访问。请注意，jar 文件中包含的资源是只读的。您将无法保存对数据库的任何更改。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T06:19:18.140

我找到了两种不同的方法来命名文件路径，具体取决于您尝试访问它的方式。假设您正在访问的数据库位于 /yourproject/resource/ 或 /yourproject/bin/resource 中（没有缩小范围，我的两者都在，我很满意）你应该使用它作为你的路径：

```
//Eclipse test path
String url = "jdbc:sqlite:resource/mydb.db"; 
```

或者

```
//runnable jar path
String url = "jdbc:sqlite::resource:mydb.db"; 
```

然后

```
mysqlitedatasource.setUrl(url); 
```

您的方式也有效...通过将数据库放入 /src

# java - 在 Java 中更改参数是一种好习惯吗

> ID：12019978
> 
> 赞同：17
> 
> 时间：2012-08-18T15:54:24.330
> 
> 标签：java, pass-by-value

假设我正在`foo(int i)`用 Java 编写一个方法。
由于`i`是按值传递的，因此可以安全地将其更改为`foo`. 例如

```
无效富（int i）{
   我 = 我 + 1; // 改变我
   ...
}

```

在 Java 中更改方法的参数被认为是好的还是坏的做法？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-18T16:05:27.283

一般来说，这被认为是不好的做法，尽管有些人会忽略它，正如您在其他答案中看到的那样。

对于像原语这样直接按值传入的参数，覆盖原始变量没有任何好处。在这种情况下，您应该按照@João 的建议进行复制。

对于通过值（对象）传递*引用*的参数，如果您修改句柄以指向不同的对象，那将是非常混乱的。这更重要，因为修改作为参数传递的对象的内容也会修改原始对象。

如果替换句柄引用的对象，然后修改*其*内容，调用者中原始引用所引用的对象将不会被替换，但阅读代码的人可能会期望它会被替换。

然而，如果您不替换对象并修改内容，则*调用*您的方法的方法可能不会期望此更改。此类别通常属于与安全相关的不良做法。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-18T15:56:34.303

这只是个人意见，但我认为这可能会让其他人感到困惑，因为他们可能希望稍后在该代码中使用*原始*参数值，并且可能没有注意到它已经被更改。

另外，简单地创建另一个变量并为其分配修改后的值（即`int j = i + 1`）是很便宜的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-18T16:02:37.260

> 由于 i 是按值传递的，因此更改它是安全的`foo()`

即使传递对象引用也是绝对安全的，因为它们是本地的：即，为本地引用分配新引用不会对调用代码中的原始引用产生任何影响

这是你个人的选择。但是，我不会更改参数值，因为可能会丢失传递给此方法的实际值的跟踪。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-18T15:57:37.210

需要注意的是，它`i = i + 1;`并没有真正改变 i。它只会更改您的本地副本`i`（换句话说，`i`调用代码中的 不会更改）。

基于此，通过遵守[POLS（最小惊喜原则）](http://en.wikipedia.org/wiki/Principle_of_least_astonishment) ，这是一个可读性和避免代码中意外行为的问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-18T15:57:39.590

中性的。但许多人认为将方法更改为：

```
void foo(final int i) {
    int j = i + 1; // not change i
    ...
} 
```

随意工作。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-18T15:58:13.740

取决于上下文。我倾向于“不良做法”，原因有两个：

1.  有些人可能会认为原始值正在被更改。
2.  它*可能*使代码更难推理（通过适当简短的方法减轻）。

当它是参考值时，会弹出第三个问题。如果您修改参数引用以指向其他对象并更改其状态，则原始参数*不会*被修改——这可能是也可能不是预期的。如果您创建对参数的另一个引用并更改新引用的状态，则参数的引用*将*被更改——这*也*可能是也可能不是预期的。

# haskell - 为什么记忆化不起作用？

> ID：12019984
> 
> 赞同：7
> 
> 时间：2012-08-18T15:55:12.467
> 
> 标签：haskell, fibonacci, memoization

在阅读了[memoization 介绍](http://www.haskell.org/haskellwiki/Memoization)之后，我使用更通用的 memoize 函数重新实现了 Fibonacci 示例（仅用于学习目的）：

```
memoizer :: (Int -> Integer) -> Int -> Integer
memoizer f = (map f [0 ..] !!)

memoized_fib :: Int -> Integer
memoized_fib = memoizer fib
    where fib 0 = 0
          fib 1 = 1
          fib n = memoized_fib (n-2) + memoized_fib (n-1) 
```

这可行，但是当我将最后一行更改为以下代码时，记忆突然无法按预期工作（程序再次变慢）：

```
 fib n = memoizer fib (n-2) + memoizer fib (n-1) 
```

记忆化的关键区别在哪里？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-18T21:05:43.773

它是关于*显式*与*隐式*共享的。当你明确命名一个事物时，它自然是可以共享的，即作为单独的实体存在于内存中，并且可以重用。[（当然，共享本身不是语言的一部分，我们只能稍微推动编译器共享某些东西）。]

但是，当您编写相同的表达式两次或三次时，您依赖编译器将公共子表达式替换为一个显式共享的实体。这可能会也可能不会发生。

您的第一个变体相当于

```
memoized_fib :: Int -> Integer
memoized_fib = (map fib [0 ..] !!)  where
        fib 0 = 0
        fib 1 = 1
        fib n = memoized_fib (n-2) + memoized_fib (n-1) 
```

在这里，您专门命名一个实体，并通过该名称引用它。但这是一个功能。为了使重用更加确定，我们可以明确地命名在此处共享的实际值列表：

```
memoized_fib :: Int -> Integer
memoized_fib = (fibs !!)  where
        fibs = map fib [0 ..] 
        fib 0 = 0
        fib 1 = 1
        fib n = memoized_fib (n-2) + memoized_fib (n-1) 
```

最后一行可以在视觉上更加明显，*明确*引用此处共享的实际实体 -`fibs`我们刚刚在上面的步骤中命名的列表：

```
 fib n = fibs !! (n-2) + fibs !! (n-1) 
```

您的第二个变体等效于：

```
memoized_fib :: Int -> Integer
memoized_fib = (map fib [0 ..] !!)  where
        fib 0 = 0
        fib 1 = 1
        fib n = (map fib [0 ..] !!) (n-2) + (map fib [0 ..] !!) (n-1) 
```

在这里，我们有三个看似独立的`map`表达式，它们可能会或可能不会被编译器共享。**用它编译`ghc -O2`**似乎重新引入了共享，并随之提高了速度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-18T16:37:32.673

`momoized_fib = ...`- 这是顶级的简单定义。它可能被读取为一个恒定的惰性值（在扩展它之前不需要绑定任何额外的参数。这有点像你的记忆值的“来源”。

当您使用`(memoizer fib) (n-2)`创建新的值源时，它与它没有关系，`memoized_fib`因此它不会被重用。实际上，由于您`(map fib [0 ..])`在第二个变体中产生了很多序列，因此您在这里移动了很多 GC 负载。

还要考虑更简单的例子：

```
f = \n -> sq !! n where sq = [x*x | x <- [0 ..]]
g n = sq !! n where sq = [x*x | x <- [0 ..]] 
```

首先将生成单个`f`并与之关联，`sq`因为声明头中没有`n`。Second 将为每个不同的值生成一系列列表`f n`并在其上移动（不限于实际值）以获取值。

# sqlalchemy - 处理 SQLAlchemy 会话的 WSGI 应用程序中间件

> ID：12019986
> 
> 赞同：3
> 
> 时间：2012-08-18T15:55:32.027
> 
> 标签：sqlalchemy, wsgi, middleware

我的 WSGI 应用程序使用 SQLAlchemy。我想在请求开始时启动会话，如果它是脏的并且请求处理成功完成，则提交它，否则进行回滚。所以，我需要实现 Django 的`TransactionMiddleware`.

所以，我想我应该创建 WSGI 中间件并制作以下​​内容：

1.  创建数据库会话并将其添加到`environ`预处理。
2.  如果没有发生错误，则从获取数据库会话`environ`并调用后处理。`commit()`
3.  如果发生某些错误，请从中获取数据库会话`environ`并调用后处理。`rollback()`

第 1 步对我来说很明显：

```
class DbSessionMiddleware:
def __init__(self, app):
    self.app = app

def __call__(self, environ, start_response):
    environ['db_session'] = create_session()
    return self.app(environ, start_response) 
```

第 2 步和第 3 步 - 不是。我找到了后处理任务的[例子：](http://docs.repoze.org/moonshining/pep333.html#example-middleware)

```
class Caseless:
def __init__(self, app):
    self.app = app

def __call__(self, environ, start_response):
    for chunk in self.app(environ, start_response):
        yield chunk.lower() 
```

它包含评论：

> 请注意，该`__call__`函数是一个 Python 生成器，它是这种“后处理”任务的典型代表。

您能否澄清一下它是如何工作的，以及我该如何解决我的问题。

谢谢，鲍里斯。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T08:23:35.200

对于第 1 步，我使用 SQLAlchemy[范围会话](http://docs.sqlalchemy.org/en/rel_0_7/orm/session.html#contextual-thread-local-sessions)：

```
engine = create_engine(settings.DB_URL, echo=settings.DEBUG, client_encoding='utf8')
Base = declarative_base()

sm = sessionmaker(bind=engine)
get_session = scoped_session(sm) 
```

它们为每个 get_session() 调用返回相同的线程本地会话。

现在的第 2 步和第 3 步如下：

```
class DbSessionMiddleware:
def __init__(self, app):
    self.app = app

def __call__(self, environ, start_response):
    try:
        db.get_session().begin_nested()
        return self.app(environ, start_response)
    except BaseException:
        db.get_session().rollback()
        raise
    finally:
        db.get_session().commit() 
```

如您所见，我在会话上启动嵌套事务，以便能够回滚甚至已经在视图中提交的查询。

# python - 有没有内置的 Python 中用于编辑内存的好且易于使用的模块？

> ID：12019992
> 
> 赞同：7
> 
> 时间：2012-08-18T15:56:24.217
> 
> 标签：python, python-3.2, memory-editing

有没有内置的 Python 中用于编辑内存的好且易于使用的模块？或者有没有这样的模块？

我正在寻找的是一种附加到进程并读取/写入它的方法。就像作弊引擎的工作原理一样。[这是它在 C++ 中如何工作的示例](http://www.mpcforum.com/showthread.php?251308-Tutorial-Basic-C-Game-Hacking-%28Memory-Editing%29)。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-25T13:17:28.813

我花了一段时间才找到这样做的方法，但这就是我想出的！

```
from ctypes import *
from ctypes.wintypes import *

pid = 0 #the pid of the process, aquired earlier by hand

address = 0x0000 #where to read from while in the memory

OpenProcess = windll.kernel32.OpenProcess
ReadProcessMemory = windll.kernel32.ReadProcessMemory
CloseHandle = windll.kernel32.CloseHandle

PROCESS_ALL_ACCESS = 0x1F0FFF

datadummy = b'.'*200
buffer = c_char_p(datadummy)
bufferSize = len(buffer.value)
bytesRead = c_ulong(0)

processHandle = OpenProcess(PROCESS_ALL_ACCESS, False, int(PID))

ReadProcessMemory(processHandle, address, buffer, bufferSize, byref(bytesRead))

CloseHandle(processHandle) 
```

要写入内存，我只需添加`WriteProcessMemory = windll.kernel32.WriteProcessMemory`然后调用它

# java - 当按下按钮然后开始绘制按钮时，也会在面板上复制

> ID：12019996
> 
> 赞同：2
> 
> 时间：2012-08-18T15:56:37.860
> 
> 标签：java, swing

我有两个`JPanel`s。第一个包含s ，第二个简单地我们可以使用**Mouse**`JButton`绘制。问题是当我单击并开始在. 请给我一些方向，关于我不看的地方？**`JButton``JButton``JPanel`**

 *** * *

> 主班

```
public class LabelDemo extends JFrame {

    JPanel p1 = new JPanel();
    painter p2 = new painter();
    JButton red = new JButton("red");
    JButton blue = new JButton(" blue ");
    JLabel lbl = new JLabel("Label");
    ImageIcon icon = new ImageIcon("image/YouTube.png");

    public LabelDemo() {

        setLayout(new BorderLayout());
        p1.setBorder(new LineBorder(Color.gray));
        //jbt1.setIcon(icon);

        p1.add(red);
        p1.add(blue);
        lbl.setOpaque(true);
        lbl.setBackground(Color.yellow);
        p1.add(lbl);
        p1.setBounds(20, 30, 40, 78);
        add(p1,BorderLayout.EAST);
        add(p2,BorderLayout.CENTER);
    }

    public static void main(String[] args){

        LabelDemo frame = new LabelDemo();
        frame.setVisible(true);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(700, 400);
        frame.setLocationRelativeTo(null);              
    }
} 
```

> 客栈类

```
class painter extends JPanel  {

    int x , y;
    boolean isPresed = false;

    public void setPainter(int x , int y) {    
        this.x = x;
        this.y = y;
    }

    public painter() {

        addMouseMotionListener(new MouseMotionAdapter() {                   
            public void mouseDragged(MouseEvent e) {
                isPresed = true;
                setPainter(e.getX(),e.getY());
                repaint(); 
            }   
        });
    }

    protected void paintComponent(Graphics g){
        Color randomColor = Color.getHSBColor( (float)Math.random(), 1.0F, 1.0F );
        if(isPresed){                       
            g.setColor(randomColor);
            g.fillOval(x-5, y-5, 10, 10);
        }
    }
}//end of painter 
```

![在此处输入图像描述](../Images/0ec84df461dcee85e20c13ea7c93080e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T16:15:49.787

好的，据我了解，您希望在单击红色或蓝色按钮时摆脱东边的面板（p1 面板）：

```
package stack;

import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseEvent;
import java.awt.event.MouseMotionAdapter;

import javax.swing.*;
import javax.swing.border.LineBorder;

public class LabelDemo extends JFrame {
    JPanel p1 = new JPanel();
    Painter p2 = new Painter();
    JButton red = new JButton("red");
    JButton blue = new JButton(" blue ");
    JLabel lbl = new JLabel("Label");
    ImageIcon icon = new ImageIcon("image/YouTube.png");
    public LabelDemo() {
        setLayout(new BorderLayout());
        p1.setBorder(new LineBorder(Color.gray));
//      jbt1.setIcon(icon);
        p2.setPreferredSize(new Dimension(600,400));
        p1.add(red);
        p1.add(blue);
        lbl.setOpaque(true);
        lbl.setBackground(Color.yellow);
        p1.add(lbl);
        p1.setBounds(20, 30, 40, 78);
        add(p1,BorderLayout.EAST);
        add(p2,BorderLayout.CENTER);
        red.addActionListener(new ActionListener(){

        public void actionPerformed(ActionEvent e){
            remove(p1);
            repaint();
            revalidate();
        }
    });
    blue.addActionListener(new ActionListener(){

        public void actionPerformed(ActionEvent e){
            remove(p1);
            repaint();
            revalidate();
        }
    });
}

    public static void main(String[] args){
       LabelDemo frame = new LabelDemo();
       frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
       frame.pack();   
       frame.setVisible(true);
    }
}
class Painter extends JPanel  {
    int x , y;
    boolean isPresed = false;
     public void setPainter(int x , int y) {
    this.x = x;
    this.y = y;
}
     public Painter() {

    addMouseMotionListener(new MouseMotionAdapter() {

        public void mouseDragged(MouseEvent e) {
            isPresed = true;
            setPainter(e.getX(),e.getY());
            repaint(); 
        }   
    });
}

    protected void paintComponent(Graphics g){
        Color randomColor = Color.getHSBColor( (float)Math.random(), 1.0F, 1.0F );
    if(isPresed){   

        g.setColor(randomColor);
        g.fillOval(x-5, y-5, 10, 10);
    }
    }
}//end of painter 
```

也不要调用 setSize() 方法调用 pack() 和 setPreferredSize()，因此我被个人批评了几次。只是一个注释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T21:23:15.903

在您的`painter`窗格`paintComponent`方法中，您确实应该`super.paintComponent`首先调用。

Swing 重用`Graphics`，因此它可以在其缓冲区中获取旧内容。如果你打电话`super.paintComponent`，这将清理它

```
protected void paintComponent(Graphics g){
    // Must call super.paintComponent() so the Graphics is updated correctly...
    super.paintComponent();
    Color randomColor = Color.getHSBColor( (float)Math.random(), 1.0F, 1.0F );
    if(isPresed){                       
        g.setColor(randomColor);
        g.fillOval(x-5, y-5, 10, 10);
    }
} 
```**

# iphone - UITextField 中的退出键盘

> ID：12019999
> 
> 赞同：0
> 
> 时间：2012-08-18T15:57:21.490
> 
> 标签：iphone, uitextfield, textfield

我在我的应用程序中插入了一个文本字段，现在键盘无法关闭。如何让键盘关闭？也许是通过一个按钮或点击文本字段之外的东西？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T15:59:26.123

将您的按钮连接到一个动作，然后添加此行

```
[textField resignFirstResponder]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T16:00:54.783

假设您有一个名为 myTextField 的文本字段，将 UITextField 的 Delegate 设置为您的 ViewController，在 File's Owner 和 UITextField 之间添加一个引用插座，然后实现此方法：

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField {
   if (textField == myTextField) {
       [textField resignFirstResponder];
   }
   return NO;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T20:35:01.880

只需`UITextFieldDelegate`在 .h 文件中实现协议并 `-- (BOOL)textFieldShouldReturn:(UITextField *)textField`在 .m 文件中定义委托，如下所示：

```
-- (BOOL)textFieldShouldReturn:(UITextField *)textField

{

[textField  resignFirstResponder];

return YES;

} 
```

最重要的是不要忘记将 UITextFiled 对象“self”的委托属性设置为： `m_txtTextFiled.delegate = self;`当你分配它的实例时。