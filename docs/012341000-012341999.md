# StackOverflow 问答 12341000-12341999

# android - Libgdx 是否适用于 virtualbox 和 android x86？

> ID：12341004
> 
> 赞同：1
> 
> 时间：2012-09-09T16:55:05.073
> 
> 标签：android, virtualbox, libgdx

在 Eclipse 的 Android 虚拟机中运行我的应用程序可以正常工作。但是通过 Virtual Box 尝试 Android x86 我收到一条错误消息，指出操作系统/手机不适用于该应用程序。

有没有人尝试将 libgdx 与 android x86 一起使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T02:42:56.207

x86 本机库目前不包含在 libGDX 发行版中，因此它不会开箱即用。（目前只有两种变体的 ARM 二进制文件被构建和包含在内。）

libGDX 问题跟踪器上有一个[未解决的问题。](http://code.google.com/p/libgdx/issues/detail?id=290)看起来延迟是 Android NDK for x86 中缺少一些官方支持。

也就是说，看起来有*可能*使该库为 x86 构建其本机位，只是不够稳定，无法默认包含在内。有关详细信息，请参阅[此论坛帖子](http://www.badlogicgames.com/forum/viewtopic.php?f=17&t=2576)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-02T13:18:16.770

供参考似乎现在可以使用，如此处[所述](http://www.badlogicgames.com/wordpress/?p=3103)

> 要使用 x86 本机，只需将 x86/ 文件夹从 nightlies 复制到您的 Android 项目的 libs/ 文件夹（在 armeabi 和 armeabi-v7a 文件夹旁边）。setup-ui 不会自动为您添加这些库。我暂时选择这样做，因为 x86 Android 设备非常罕见，而且你只会不必要地扩大 APK 的大小。

# android - 从 android 删除事件返回空指针异常

> ID：12341006
> 
> 赞同：1
> 
> 时间：2012-09-09T16:55:14.040
> 
> 标签：android, calendar, nullpointerexception

当我尝试从日历中删除特定事件时，它返回 NULL 指针异常

但是当我删除所有事件时它工作正常

我从插入查询中得到了路径并尝试了几乎所有东西

这是我的代码

我的删除事件类

```
public class DeleteEvent extends Activity {

    public DeleteEvent() {
        // TODO Auto-generated constructor stub
    }

    public int DeleteCalendarEntry(int entryID) {
        int iNumRowsDeleted = 0;

        Uri eventsUri = Uri.parse( "content://com.android.calendar/events");

        Uri eventUri = ContentUris.withAppendedId(eventsUri, entryID);

        iNumRowsDeleted = getContentResolver().delete(eventUri, null, null);

        return iNumRowsDeleted;

    }
} 
```

///////////////////////////////////////// ///

```
image.setOnClickListener(new View.OnClickListener() {
@Override
public void onClick(View v) {
    chose_add_view_delete();
    }
}); 
```

单击单元格时执行此操作：-

```
public void chose_add_view_delete() {
       final CharSequence[] items = { "Add Event", "View Event","Delete Event" };
       AlertDialog.Builder builder = new AlertDialog.Builder(MainActivity.this);
       builder.setTitle("What !?");
       builder.setSingleChoiceItems(items, 0,new DialogInterface.OnClickListener() {
         @Override
          public void onClick(DialogInterface dialog, int which) {
        // TODO Auto-generated method stub
                   if (which == 0) {
                   DeleteEvent del = new DeleteEvent();
                   int i = del.DeleteCalendarEntry(82);
                   dialog.dismiss();
} 
```

////////////////////////////////////////

```
09-10 12:28:01.385: E/AndroidRuntime(22297): FATAL EXCEPTION: main
09-10 12:28:01.385: E/AndroidRuntime(22297): java.lang.NullPointerException
09-10 12:28:01.385: E/AndroidRuntime(22297):    at android.content.ContextWrapper.getContentResolver(ContextWrapper.java:90)
09-10 12:28:01.385: E/AndroidRuntime(22297):    at com.iphase.Albayan.DeleteEvent.DeleteCalendarEntry(DeleteEvent.java:25)
09-10 12:28:01.385: E/AndroidRuntime(22297):    at com.iphase.Albayan.MainActivity$9.onClick(MainActivity.java:475)
09-10 12:28:01.385: E/AndroidRuntime(22297):    at com.android.internal.app.AlertController$AlertParams$3.onItemClick(AlertController.java:935)
09-10 12:28:01.385: E/AndroidRuntime(22297):    at android.widget.AdapterView.performItemClick(AdapterView.java:284)
09-10 12:28:01.385: E/AndroidRuntime(22297):    at android.widget.ListView.performItemClick(ListView.java:3746)
09-10 12:28:01.385: E/AndroidRuntime(22297):    at android.widget.AbsListView$PerformClick.run(AbsListView.java:1980)
09-10 12:28:01.385: E/AndroidRuntime(22297):    at android.os.Handler.handleCallback(Handler.java:587)
09-10 12:28:01.385: E/AndroidRuntime(22297):    at android.os.Handler.dispatchMessage(Handler.java:92)
09-10 12:28:01.385: E/AndroidRuntime(22297):    at android.os.Looper.loop(Looper.java:130)
09-10 12:28:01.385: E/AndroidRuntime(22297):    at android.app.ActivityThread.main(ActivityThread.java:3691)
09-10 12:28:01.385: E/AndroidRuntime(22297):    at java.lang.reflect.Method.invokeNative(Native Method)
09-10 12:28:01.385: E/AndroidRuntime(22297):    at java.lang.reflect.Method.invoke(Method.java:507)
09-10 12:28:01.385: E/AndroidRuntime(22297):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
09-10 12:28:01.385: E/AndroidRuntime(22297):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
09-10 12:28:01.385: E/AndroidRuntime(22297):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:37:42.270

```
Uri eventUri = Uri.parse("content://calendar/events");  // or "content://com.android.calendar/events" 

Cursor cursor = contentResolver.query(eventUri, new String[]{"_id"}, "calendar_id = " + calendarId, null, null); // calendar_id can change in new versions 

while(cursor.moveToNext()) {
    Uri deleteUri = ContentUris.withAppendedId(eventUri, cursor.getInt(o));

    contentResolver.delete(deleteUri, null, null);
} 
```

# java - Client.java:30：OtherPackage.TaskOperations 中的 getThingToDo() 不能应用于（短）

> ID：12341007
> 
> 赞同：1
> 
> 时间：2012-09-09T16:55:52.883
> 
> 标签：java, c++, corba, idl, omniorb

我扩展了我之前的示例：[CORBA C++/Java 应用程序中服务器端的分段错误（核心转储）](https://stackoverflow.com/questions/12288660/segmentation-fault-core-dumped-on-server-side-in-corba-c-java-application)，我终于在 Stack 的用户 @Brian Neal 的帮助下完成了。

我还是 Corba 的新手，所以我想更多地了解 Corba 中的序列，我写了这个简单的（？）示例：

```
interface Task
{
    string getThingToDo();
};

#include "Task.idl"

interface Employee
{
    typedef sequence <Task> tasks;
    string getLastname();
    Task getTask(in short id);
};

#include "Employee.idl"

interface Work
{
    Employee getEmployee(in short id);
}; 
```

**TaskImpl.h 和 TaskImpl.cpp：**

```
#include "Task.hh"

class TaskImpl : public POA_Task
{
    private:
        CORBA::String_var thingToDo;

    public:
        TaskImpl(const char* thingToDo);
        char* getThingToDo();
};

#include "TaskImpl.h"

TaskImpl::TaskImpl(const char* thingToDo)
{
    this->thingToDo = CORBA::string_dup(thingToDo);
}

char* TaskImpl::getThingToDo()
{
    return CORBA::string_dup(this->thingToDo.in());
} 
```

**EmployeeImpl.h 和 EmployeeImpl.cpp：**

```
#include "Employee.hh"
#include "TaskImpl.h"

class EmployeeImpl : public POA_Employee
{
    private:
        CORBA::String_var lastname;
        int id;
        Employee::tasks thingsToDo;

    public:
        EmployeeImpl(const char* lastname, int id);
        char* getLastname();
        Task_ptr getTask(::CORBA::Short id);
};

#include "EmployeeImpl.h"

EmployeeImpl::EmployeeImpl(const char* lastname, int id)
{
    this->lastname = CORBA::string_dup(lastname);
    this->id = id;
    this->thingsToDo.length(3);

    TaskImpl *t1, *t2, *t3;
    t1 = new TaskImpl("Print all the documents");
    t2 = new TaskImpl("Write the report");
    t3 = new TaskImpl("Make backup");

    this->thingsToDo[0] = Task::_duplicate(t1->_this());
    this->thingsToDo[1] = Task::_duplicate(t2->_this());
    this->thingsToDo[2] = Task::_duplicate(t3->_this());
}

char* EmployeeImpl::getLastname()
{
    return CORBA::string_dup(this->lastname.in());
}

Task_ptr EmployeeImpl::getTask(::CORBA::Short id)
{
    return this->thingsToDo[id-1]._retn();
} 
```

**WorkImpl.h 和 WorkImpl.cpp：**

```
#include "Work.hh"
#include <vector>
#include "EmployeeImpl.h"
using namespace std;

class WorkImpl : public POA_Work
{
    private:
        vector<EmployeeImpl> employees;

    public:
        WorkImpl();
        Employee_ptr getEmployee(::CORBA::Short id);
};

#include "WorkImpl.h"

 WorkImpl::WorkImpl()
 {
    EmployeeImpl ei1(CORBA::string_dup("Doe"), 1);
    EmployeeImpl ei2(CORBA::string_dup("Smith"), 2);
    EmployeeImpl ei3(CORBA::string_dup("Brown"), 3);

    employees.push_back(ei1);
    employees.push_back(ei2);
    employees.push_back(ei3);
 }

Employee_ptr WorkImpl::getEmployee(::CORBA::Short id)
{
    return employees[id]._this();
} 
```

**服务器.cpp：**

```
#include "WorkImpl.h"
#include <omniORB4/CORBA.h>
#include <omniORB4/Naming.hh>
#include <iostream>
using std::cout;
using std::cerr;

int main(int argc, char **argv)
{
 try
 {
  CORBA::ORB_ptr serverORB = CORBA::ORB_init(argc, argv);

  CORBA::Object_var myPOAObj = serverORB->resolve_initial_references("RootPOA");

  PortableServer::POA_var myPOA = PortableServer::POA::_narrow(myPOAObj);
  PortableServer::POAManager_var myManager = myPOA->the_POAManager();
  myManager->activate();

  WorkImpl *work = new WorkImpl();

  try
  {
   CORBA::Object_var nameServiceObj = serverORB->resolve_initial_references("NameService");

   if(!CORBA::is_nil(nameServiceObj))
   {
    CosNaming::NamingContext_ptr namingContext = CosNaming::NamingContext::_narrow(nameServiceObj);
    CosNaming::Name serviceName;
    serviceName.length(1);
    serviceName[0].id = CORBA::string_dup("WorkService");
    namingContext->rebind(serviceName, work->_this());
    cout << "WorkService is running ...\n";
   }

  }catch(CosNaming::NamingContext::NotFound&){
      cerr << "CosNaming::NamingContext::NotFound\n";
  }catch(CosNaming::NamingContext::InvalidName&){
      cerr << "CosNaming::NamingContext::InvalidName\n";
  }catch(CosNaming::NamingContext::CannotProceed&){
      cerr << "CosNaming::NamingContext::CannotProceed\n";
  }

  serverORB->run();

  delete work;
  serverORB->destroy();

  }catch(CORBA::SystemException&){
    cerr << "Caught CORBA::SystemException\n";
  }catch(CORBA::Exception&){
    cerr << "Caught CORBA::Exception  \n";
  }catch(omniORB::fatalException &fe){
    cerr << "Caught omniORB::fatalException\n";
    cerr << "File: " << fe.file() << "\n";
    cerr << "Line: " << fe.line() << "\n";
    cerr << "Msg: " << fe.errmsg() << "\n";
  }catch(...){
    cerr << "Caught unknown exception\n";
  }

   return 0;
} 
```

**客户端.java：**

```
package OtherPackage;

import java.util.*;
import org.omg.CosNaming.*;
import org.omg.CosNaming.NamingContextPackage.*;
import org.omg.CORBA.*;
import java.io.*;
public class Client
{
    public static void main(String [] args)
    {
     try
     {
        org.omg.CORBA.ORB clientORB = org.omg.CORBA.ORB.init(args, null);

        if (clientORB == null)
        {
            System.out.println("Problem while creating ORB");
            System.exit(1);
        }

        org.omg.CORBA.Object objRef = clientORB.resolve_initial_references("NameService");
        NamingContextExt ncRef = NamingContextExtHelper.narrow(objRef);

        Work work = WorkHelper.narrow(ncRef.resolve_str("WorkService"));
        Employee e = work.getEmployee((short)1);
        System.out.println(e.getLastname());

        Task t = e.getTask();
        System.out.println(t.getThingToDo((short)2));

            System.out.println(work.getEmployee((short)2).getThingToDo((short)1));

        }catch(Exception e){ System.out.println(e.getMessage()); }
    }
} 
```

当我尝试编译我的客户端时，我收到一个错误：

```
Client.java:29: getTask(short) in OtherPackage.EmployeeOperations cannot be applied to ()
                Task t = e.getTask();
                          ^
Client.java:30: getThingToDo() in OtherPackage.TaskOperations cannot be applied to (short)
                System.out.println(t.getThingToDo((short)2));
                                    ^
2 errors 
```

怎么了？可以这样写吗？

我使用的一些命令：

```
Compile (and run) server files (just copy and paste):

g++ -c *.cpp -I$OMNIORB_HOME/include -I$OMNIORB_HOME/include/omniORB4
g++ -c *.cc -I$OMNIORB_HOME/include -I$OMNIORB_HOME/include/omniORB4
g++ -o Server Server.o EmployeeSK.o WorkSK.o WorkImpl.o EmployeeImpl.o TaskImpl.o TaskSK.o -L$OMNIORB_HOME/lib -lomnithread -lomniORB4
./Server -ORBInitRef NameService=corbaloc::localhost:2809/NameService

Compile (and run) client files (just copy and paste):

cd EmployeePackage; javac -cp .. *.java
cd OtherPackage; javac -cp .. *.java 
```

我的整个例子：[http ://www21.zippyshare.com/v/95586459/file.html](http://www21.zippyshare.com/v/95586459/file.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T17:33:58.620

您定义`getTask`了一个`short id`参数：

> ```
> Task getTask(in short id); 
> ```

但是，您尝试在没有任何参数的情况下调用它：

> ```
> Task t = e.getTask(); 
> ```

* * *

另一个错误本质上非常相似。您定义`getThingToDo`有任何空参数列表：

> ```
> string getThingToDo(); 
> ```

...而且，您再次尝试使用不正确的参数调用它；在这种情况下，您试图通过`short`：

> ```
> System.out.println(t.getThingToDo((short)2)); 
> ```

* * *

我建议您改为尝试如下操作，我相信这可以实现您的意图：

```
final Task t = e.getTask((short) 2);
System.out.println(t.getThingToDo()); 
```

...这应该打印*第二个*员工的*第二个*任务的描述，即`"Write the report"`。请记住，它`std::vector`是零索引的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T13:00:12.807

正如@oldrinb 所说，我更改了我的代码，现在一切都很好（我的意思是，编译）。

问题现在在应用程序中（逻辑？）。当我第一次运行客户端时，我看到：

```
Smith
Print all the documents 
```

哪个是对的。但是当我第二次（和第三次，等等......）运行我的客户端时，我看到：

```
Smith
null 
```

现在问题出在哪里？这是我的工作代码：[http ://www9.zippyshare.com/v/46287610/file.html](http://www9.zippyshare.com/v/46287610/file.html)

要运行客户端，`cd`到 java 目录并执行命令： `java OtherPackage.Client -ORBInitRef NameService=corbaloc::localhost:2809/NameService`

我改变了**EmployeeImpl.cpp**：

```
#include "EmployeeImpl.h"

EmployeeImpl::EmployeeImpl(const char* lastname, int id)
{
    this->lastname = CORBA::string_dup(lastname);
    this->id = id;
    this->thingsToDo.length(3);

    TaskImpl *t1, *t2, *t3;
    t1 = new TaskImpl("Print all the documents");
    t2 = new TaskImpl("Write the report");
    t3 = new TaskImpl("Make backup");

    this->thingsToDo[0] = t1->_this();
    this->thingsToDo[1] = t2->_this();
    this->thingsToDo[2] = t3->_this();
}

char* EmployeeImpl::getLastname()
{
    return CORBA::string_dup(this->lastname.in());
}

Task_ptr EmployeeImpl::getTask(::CORBA::Short id)
{
    return Task::_duplicate(this->thingsToDo[id-1]);
} 
```

**现在一切似乎都很好。但我不确定它是否以 CORBA 方式好。有什么建议吗？**

# android - Android - 创建带有图像的对话框似乎在对话框顶部放置了一个黑条

> ID：12341008
> 
> 赞同：1
> 
> 时间：2012-09-09T16:55:56.803
> 
> 标签：android, android-layout

我创建一个这样的对话框：

```
Dialog dialog = new Dialog(this);
dialog.setContentView(R.layout.please_wait); 
dialog.show(); //this will show dialog 
```

这是它的xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

<ImageView
    android:id="@+id/please_wait"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/please_wait_1"/>

</RelativeLayout> 
```

并且图像会渲染，但它也会在我不想要的图像顶部放置一个黑条。这很常见吗？我如何摆脱黑条？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T18:21:36.900

听起来您使用的图像太小而无法缩放。您是否尝试将以下属性添加到 xml 的 ImageView 元素？

```
android:scaleType="fitXY" 
```

# python - PyQt4：无法一次打开 2 个 gui 窗口

> ID：12341009
> 
> 赞同：0
> 
> 时间：2012-09-09T16:56:01.983
> 
> 标签：python, pyqt4

```
import sys
from PyQt4 import QtCore, QtGui
from test_ui import Ui_MainWindow

class StartQt4(QtGui.QMainWindow):
    def __init__(self,parent=None):
        QtGui.QWidget.__init__(self)
        self.ui=Ui_MainWindow()
        self.ui2=Ui_MainWindow()
        self.ui2.setupUi(self)      # ui2 setup
        self.ui.setupUi(self)       # ui  setup .interchanging these 2 lines gives 2 guis

        QtCore.QObject.connect(self.ui.button_open,QtCore.SIGNAL("clicked()"),self.file_open)

    def file_open(self):
        self.ui.editor_window.setText('Yes u are doing good')

if __name__ == "__main__":
    app=QtGui.QApplication(sys.argv)
    myapp=StartQt4()
    myapp.show()
    sys.exit(app.exec_()) 
```

尝试创建简单的 pyqt4 gui。我的目标是一次打开两个 gui 窗口，因此创建了 2 个对象`ui` `ui2`。通过交换注释的行，它工作得很好，打开了 2 个窗口。但是当我这样离开时，只有`ui`对象窗口被打开。这怎么可能。它们只是在显示（`myapp.show()`）之前在不同时间调用的方法，对吗？刚开始学习pyqt4。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T19:36:27.660

生成的类`Ui_MainWindow`不代表窗口本身，只代表其中包含的小部件。窗口是`self`您传递给的参数`setupUi()`。

要拥有 2 个窗口，您需要创建 2 个`StartQt4`对象，每个对象只有 1 个`Ui_MainWindow`，并`show()`为每个对象调用。

# c# - C# BackgroundWorker 偶尔需要很长时间才能启动

> ID：12341010
> 
> 赞同：1
> 
> 时间：2012-09-09T16:56:37.130
> 
> 标签：c#, multithreading, backgroundworker

我在使用 BackgroundWorker 时发现了一个问题。发生的情况是 BackgroundWorker 进程可以正常工作，然后偶尔需要大约 40-50 秒才能开始。

该问题出现在两台机器上。BackgroundWorker 操作一整天都运行良好，然后在下午开始出现此问题，该过程需要 40 秒而不是 1 秒，但只是偶尔发生。你可以做好其中的 5 个，而第 6 个则需要 40 秒。然后你可以再做 5 次罚款。如果它确实开始花费超过一秒的时间，您可以在 workingDialog 上按取消并立即再次执行，它会起作用。在进一步检查中，工人似乎没有立即启动 DoWork 方法。

我可能会用完线程或其他东西吗？或者我如何处理 BackgroundWorker 可能存在问题？代码如下；

```
using (workingDialog = new Dialogs.WaitDialog()) {
    StartThreadedWork(MyDoWorkMethod, customerID);

    // if user presses cancel button
    if (workingDialog.ShowDialog() == System.Windows.Forms.DialogResult.Cancel) {
        m_Worker.RunWorkerCompleted -= ThreadFinished;
    }
}
m_Worker.Dispose();
m_Worker = null; 
```

'StartThreadedWork' 方法如下；

```
private void StartThreadedWork(DoWorkEventHandler method, int customerID) {
    m_Worker = new BackgroundWorker();
    m_Worker.DoWork += method;
    m_Worker.RunWorkerCompleted += ThreadFinished;
    object[] parameters = new object [] {customerID };
    m_Worker.RunWorkerAsync(parameters);
} 
```

最后，分配给 DoWork 事件处理程序的方法是：

```
private void ThreadSyncing(object sender, DoWorkEventArgs e) {
    object[] parameters = e.Argument as object[];
    int customerID = (int)parameters[0];
    Customer resultCustomer = new Customer(FormsManager.Instance.BillingWebService.Customer_GetByCustomerID(customerID, CustomerSyncOption.Default));
    e.Result = resultCustomer;
} 
```

触发 RunWorkerCompleted 事件后，对话框结果将设置为 OK 并关闭对话框。

对此的任何指示将不胜感激！

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T21:26:00.563

你怎么知道实际上是 BGW 的启动延迟了？您没有提供任何反馈，您所看到的只是它已完成。看起来您正在使用 Web 服务，服务器没有响应或完成请求，持续 40 秒并不异常。默认的 tcp/ip 连接超时为 45 秒。

ThreadPool 调度器可以发挥作用，它试图将执行 TP 线程的数量限制为机器拥有的 cpu 核心数。然而，获得 40 秒的延迟是一个沉重的角落案例。如果现有线程未完成，调度程序允许另一个 TP 线程启动，每秒两次。因此，您必须有 80 个活动 TP 线程才能产生这样的延迟。

关于您使用的对话框值得注意的一件事是，它实际上并没有做任何事情来停止工作线程。它只是放弃它。因此，如果服务器没有响应并且用户不耐烦，您可能会积聚起来。在她的脚轻敲四次后反复按取消按钮。这*确实*会导致不断增加的延误。您应该使用 CancelAsync() 方法并使用 CancellationPending 属性实现取消逻辑。但是，是的，使用 Web 服务通常不容易做到这一点。

通过提供更好的反馈来解决这个问题。当用户取消时，*不要*取消订阅 RunWorkerCompleted 事件。只需设置一个标志，指示最后一个请求已被取消。在您的 UI 中显示 Web 服务在工作人员完成之前不可用。包括不允许用户再次启动Web服务请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T16:57:47.740

BackgroundWorker 使用 .Net 线程池执行其 DoWork 方法。

如果你在线程池上施加了过多的负载，一些工作项将被延迟，直到它有一个可用的线程来处理它们。

# python - python USER_BASE错误

> ID：12341016
> 
> 赞同：0
> 
> 时间：2012-09-09T16:57:37.347
> 
> 标签：python, django

我正在使用 python 2.6 并尝试安装 django 标记包，我在下面收到此错误。我在已经有 python2.6 的 64 位机器上安装了几个 python 2.4 包。

如何解决此错误

```
 [root@tom django-tagging-0.3.1]# python setup.py install
 Traceback (most recent call last):
 File "setup.py", line 5, in <module>
 from distutils.command.install import INSTALL_SCHEMES
 File "/usr/lib64/python2.6/distutils/command/install.py", line 21, in <module>
 from site import USER_BASE
 ImportError: cannot import name USER_BASE 
```

`EDIT 1`

```
[root@tom django-tagging-0.3.1]# python2.6 setup.py install
Traceback (most recent call last):
File "setup.py", line 5, in <module>
from distutils.command.install import INSTALL_SCHEMES
File "/usr/lib64/python2.6/distutils/command/install.py", line 21, in <module>
from site import USER_BASE
ImportError: cannot import name USER_BASE 
```

`EDIT2`

```
>>> from distutils.sysconfig import get_python_lib
>>> print(get_python_lib())
/usr/lib/python2.6/site-packages 
```

`EDIT3`

```
>>> import site ; print site
<module 'site' from '/opt/mysite/site/__init__.pyc'> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T17:24:14.650

您已将您的 Django 应用程序之一称为“站点”。这是在标准库中隐藏`site`模块。重命名它。

# java - 如何使用 HyperTable 设计异常日志表并通过 Java 客户端访问它？

> ID：12341020
> 
> 赞同：0
> 
> 时间：2012-09-09T16:58:11.737
> 
> 标签：java, nosql, hypertable

如果我有以下表模式来记录异常（在标准 SQL 模式中）：

```
Table: ExceptionLog
Columns: ID (Long), 
         ExceptionClass (String),      
         ExceptionMessage (String), 
         Host (String), 
         Port (Integer), 
         HttpHeader (String), 
         HttpPostBody (String), 
         HttpMethod (String) 
```

我将如何在 HyperTable 中设计相同的东西（具体来说，提高效率的最佳方法是什么）？而且，我将如何使用 HyperTable Java 客户端对其进行编码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T04:53:34.243

什么是 ID - 它是自动递增的唯一 ID？Hypertable 没有自动增量，但如果您不想提供自己的 ID，则使用随机 GUID 作为唯一 ID。这是包含更多信息的链接：http: [//hypertable.com/documentation/developer_guide/#unique-cells](http://hypertable.com/documentation/developer_guide/#unique-cells)

我可能会将主机和端口组合成一个列（“hypertable.com:8080”），但这是我个人的偏好。

其他一切看起来都很好。您可以简单地将其转换为 HQL 中的 CREATE TABLE 语句：

```
CREATE TABLE ExceptionLog (ID, ExceptionClass, ExceptionMessage, Host, Port, HttpHeader, HttpPostBody, HttpMethod); 
```

如果您有频繁的查询，例如

```
SELECT ExceptionClass FROM ExceptionLog WHERE ExceptionClass = "Segfault"; 
```

二级索引记录在这里：[http ://hypertable.com/documentation/developer_guide/#secondary-indices](http://hypertable.com/documentation/developer_guide/#secondary-indices)

这是一个演示如何使用 Java 客户端的示例。这相当简单：[https ://github.com/cruppstahl/hypertable/blob/v0.9.6/src/java/ThriftClient/org/hypertable/thrift/BasicClientTest.java](https://github.com/cruppstahl/hypertable/blob/v0.9.6/src/java/ThriftClient/org/hypertable/thrift/BasicClientTest.java)

# jquery - 在同一页面中加载更多帖子

> ID：12341021
> 
> 赞同：1
> 
> 时间：2012-09-09T16:58:23.273
> 
> 标签：jquery, wordpress, posts

我有这个代码

```
 <ul>
        <?php query_posts('showposts=3&cat=3,4,5'); ?>
        <?php while ( have_posts() ) : the_post(); ?>
        <li><a href="<?php echo get_permalink(); ?>" title="Ver projeto">
          <?php the_post_thumbnail(full);?></a>
          <a href="<?php echo get_permalink(); ?>" class="ico-<?php $category = get_the_category(); echo $category[0]->slug; ?>">
          <?php
$category = get_the_category(); echo $category[0]->name; ?>
          </a>
          <a href="<?php echo get_permalink(); ?>" title="Ver projeto"><p class="fizemos">
            <?php the_title(); ?>
          </p>
          <p class="empresa">
            <?php the_subtitle(); ?>
          </p>
          </a> </li>
        <?php endwhile; ?>
      </ul> 
```

我希望下一页帖子在同一页面中打开（在这种情况下为主页）。我尝试了 PBD Ajax Load Posts 插件但没有用。你知道这样做的方法吗？可以只是 jQuery 来隐藏帖子，当我单击“加载更多条目...”时，它们会给我隐藏的内容。（每次 3 个）

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T18:05:38.667

分页将无法正常工作，除非您在页面模板中使用 query_posts() 并适当设置“分页”查询变量：[如何设置“分页”](http://scribu.net/wordpress/wp-pagenavi/right-way-to-use-query_posts.html)

更多信息[在这里](http://codex.wordpress.org/Function_Reference/query_posts#Pagination)

# gwt - 删除 SimpleComboBox ext gwt 展开时出现的阴影

> ID：12341031
> 
> 赞同：1
> 
> 时间：2012-09-09T16:59:09.570
> 
> 标签：gwt, extjs, gwt2, gxt

我想删除在 SimpleComboBox 上展开时出现的阴影。我得到阴影作为附加图像。

下面是我的代码

```
private SimpleComboBox<String> getSimpleComboBox(List<String> valuesOfComboBox, String objectToDisplay, boolean isVisible, String fieldLabel, boolean isTypeAhead, TriggerAction triggerAction, String id, boolean isShadowVisible){
        SimpleComboBox<String> comboBoxForUserAccount = new SimpleComboBox<String>();
        comboBoxForUserAccount.setVisible(isVisible);
        comboBoxForUserAccount.setShadow(false);

        if(valuesOfComboBox!=null)
            comboBoxForUserAccount.add(valuesOfComboBox);

        if(objectToDisplay!=null)
            comboBoxForUserAccount.setSimpleValue(objectToDisplay);
        comboBoxForUserAccount.setFieldLabel(fieldLabel);
        comboBoxForUserAccount.setTypeAhead(isTypeAhead);
        comboBoxForUserAccount.setTriggerAction(triggerAction);

        if(id!=null)
            comboBoxForUserAccount.setId(id);
        return comboBoxForUserAccount;
    } 
```

谢谢![在此处输入图像描述](../Images/3d45572cd8a66ab59e6e8aa8400de0b9.png)

# ruby - 当路由中不包含任何参数，但设置了一个符号来匹配参数时，Sinatra 会返回什么？

> ID：12341032
> 
> 赞同：1
> 
> 时间：2012-09-09T16:59:11.790
> 
> 标签：ruby, sinatra

我期望 GET 请求带有参数，并且如果不包含预期的参数，则希望返回错误响应。如何检查参数是否已包含并在未包含时返回错误响应？

我正在尝试使用 if 语句，但不知道当 GET 请求中不包含任何参数时（即 GET 请求是到 /route 或 /route/）时要设置检查什么；

```
get '/route/' do
    @symbol = params['parameter'];
    if @symbol == (what goes here?)
        return "Parameter missing error"
    else
        myfunction
    end
    erb :view
end 
```

我在 myfunction 的另一个 IF 语句中使用了 @symbol 值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T17:07:43.280

我不完全清楚你在问什么，但我会试着向你展示我认为你需要的东西：

```
get '/route/' do
    @symbol = params['parameter'];
    if params.key.include?('parameter')
        myfunction
    else
      return 'Parameter missing error'
    end
    erb :view
end 
```

# php - .htaccess 301 重定向 URI 的子字符串 - 它在 URI 的末尾附加 $_GET['variables']

> ID：12341041
> 
> 赞同：0
> 
> 时间：2012-09-09T17:00:17.000
> 
> 标签：php, .htaccess, mod-rewrite, redirect

我刚刚建立了一个新网站并将其中一个类别拼写为`autimobiles`而不是`automobiles`- 我知道这很荒谬。我为包含要重定向到的子字符串的任何 URL设置了`.htaccess`301 重定向。因此，应该将URI重定向到. 然而，这就是正在发生的事情......`autimobiles``automobiles``/autimobiles/BMW-pictures``/automobiles/BMW-pictures`

这

`http://imageocd.com/autimobiles/hupmobile-touring-pictures-and-wallpapers`

正在重定向到这个

`http://imageocd.com/automobiles/hupmobile-touring-pictures-and-wallpapers?one=autimobiles&two=hupmobile-touring-pictures-and-wallpapers`

这是我的`.htaccess`设置方式。

我有两个`$_GET['']`名为`$_GET['one']`&&的变量`$_GET['two']`用于 mod 重写。这两个变量`$_GET['']`在重定向时显示为 URI 中的变量。我想`?one=autimobiles&two=hupmobile-touring-pictures-and-wallpapers`从 URI 中删除 。

这是我的`.htaccess`。

```
# Important line HERE
RedirectMatch permanent autimobiles(.*) http://imageocd/automobiles$1

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([a-zA-Z0-9-]+)/([a-zA-Z0-9-]+) index.php?one=$1&two=$2 [NC,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([a-zA-Z0-9-]+) index.php?one=$1 [NC,L] 
```

**更新于`.htaccess`**

```
RewriteCond %{QUERY_STRING} ^autimobiles(.*)$
RewriteRule ^autimobiles(.*)$ http://imageocd.com/automobiles$1 [R=301,L]

#load-data (2) -- index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([a-zA-Z0-9-]+)/([a-zA-Z0-9-]+) index.php?one=$1&two=$2 [NC,L]

#load-data (1) -- index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([a-zA-Z0-9-]+) index.php?one=$1 [NC,L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T17:11:28.917

如果我正确理解您的问题...此代码：

```
RewriteEngine On
RewriteRule ^autimobiles/(.*)$ http://temp/automobiles/$1 [R=301,L] 
```

从 重定向`/autimobiles/BMW-pictures`到`/automobiles/BMW-pictures`。

编辑：
你写道：`How to remove "?one=autimobiles&two=hupmobile-touring-pictures-and-wallpapers" From the end of the URL. The redirection works, but it appends bot get variables on the URL`。

如果您只想在此路径上使用汽车删除此标签.. 所以请在您的行中添加以下语句：

```
RewriteRule ^autimobiles(.*)$ http://imageocd.com/automobiles$1 [R=301,L]

#load-data (2) -- index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{QUERY_STRING} !^automobiles(.*)$
RewriteRule ^([a-zA-Z0-9-]+)/([a-zA-Z0-9-]+) index.php?one=$1&two=$2 [NC,L]

#load-data (1) -- index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{QUERY_STRING} !^automobiles(.*)$
RewriteRule ^([a-zA-Z0-9-]+) index.php?one=$1 [NC,L] 
```

# java - Java'编写“左旋转”它们的值所需的代码：'

> ID：12341042
> 
> 赞同：0
> 
> 时间：2012-09-09T17:00:34.457
> 
> 标签：java

我尝试了很多组合并在网上搜索了一些有用的东西，但不幸的是我没有发现任何有用的东西。

这是为了我的家庭作业。69 个问题中唯一一个我无法回答的问题。

问题：

四个整型变量 pos1, pos2, pos3, pos4 已被声明和初始化。编写“左旋转”它们的值所需的代码：为每个变量获取后续变量的值，而 pos4 获取 pos1 的值。

我试过的例子：

```
int tempP1 = pos1;
int tempP2 = pos2;
int tempP3 = pos3;
int tempP4 = pos4;

pos4 = tempP1;
pos3 = tempP2;
pos2 = tempP3;
pos1 = tempP4; 
```

它向我展示了什么：

```
 Remarks:
     ⇒     Your code had an error during execution

More Hints:
     ⇒     Are you sure you want to use: tempP1
     ⇒     Are you sure you want to use: tempP2
     ⇒     Are you sure you want to use: tempP3

Problems Detected:
     ⇒     pos1 has wrong value
     ⇒     pos3 has wrong value 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T17:11:52.023

```
pos4 = tempP1;
pos2 = tempP3;
pos3 = tempP4;
pos1 = tempP2; 
```

听起来对吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T18:36:03.270

```
int tempP1 = pos1; 
int tempP2 = pos2; 
int tempP3 = pos3; 
int tempP4 = pos4; 

pos4 = tempP1; 
pos3 = tempP4; 
pos2 = tempP3; 
pos1 = tempP2; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-10-20T20:06:44.810

```
int tmp = pos1;
pos1 = pos2;
pos2 = pos3;
pos3 = pos4;
pos4 = tmp; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T17:50:24.503

代码是： `pos4=tempP1; pos3=tempP4; pos2=tempP3; pos1=tempP2;`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-11T23:15:07.270

您可以通过仅声明一个 temp 值而不是创建四个不同`tempValue`的 s 来更好地压缩代码：

```
int tempValue = 0;

tempValue = pos1;

pos1 = pos2;

pos2 = pos3;

pos3 = pos4;

pos4 = tempValue; 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-10-19T19:50:45.163

```
int a=pos4;
int b=pos3;
int c=pos2;
pos4=pos1;
pos3=a;
pos2=b;
pos1=c; 
```

# c++ - 如何使用C++（Linux下）连接MYSQL数据库（WINDOWS下）

> ID：12341043
> 
> 赞同：1
> 
> 时间：2012-09-09T17:00:35.613
> 
> 标签：c++, mysql, database

我在windows环境下建立了MYSQL的数据库，在Visual Studio环境中找到了很多MYSQL的C++ API示例。但是我不确定我是否在LINUX环境中使用gcc或其他工具编写程序来测试C++ API（只需编译和运行程序，没有平台之类的`eclipse`）。因为在visual studio中，我需要为MYSQL添加一些lib和dll。我需要写一个配置文件吗？我该怎么做，非常感谢！

我想让它更清楚。该数据库是在 WINDOWS 中构建的，我想在 Linux 中运行我的 c++ 程序。那么如何使用 MYSQL 所需的一些库来编译它们。当我不在视觉工作室时，有什么不同吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T17:05:01.600

MySQL 附带 C++ 绑定，`cppconn/*`在`mysql_connection.h`您的包含路径中可用。您将需要 Boost（至少`shared_ptr`和`variant`）。

查看[文档](http://dev.mysql.com/doc/refman/5.6/en/connector-cpp-getting-started-examples.html)以获取示例和参考。

# vb.net - 使用来自 Mathematica nb 的代码。VB.Net 应用程序中的文件

> ID：12341048
> 
> 赞同：2
> 
> 时间：2012-09-09T17:01:28.493
> 
> 标签：vb.net, wolfram-mathematica

我在 Mathematica nb.file 中有代码，我想通过 Net/Link 在我的 VB 应用程序中使用它。
有什么方法可以直接使用 nb.file 中的代码吗？例如，我将通过 VB 在 Mathematica 中执行代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T20:20:34.333

一种方法是构造一个类似于以下指令的字符串，并将其发送到 .NET 中的 mathkernel Compute 函数：

```
Needs["JLink`"];
$FrontEndLaunchCommand = "Mathematica.exe";
UseFrontEnd[nb = NotebookOpen["C:\\Temp\\run.nb"];
  SelectionMove[nb, Next, Cell];
  SelectionEvaluate[nb];];
Pause[10];
CloseFrontEnd[]; 
```

参考。[由 JLink 或 UseFrontEnd 生成的未捕获抛出](https://stackoverflow.com/q/7626491/879601)

# c# - 没有主要方法的 Visual Studio 2010 中的单元测试

> ID：12341049
> 
> 赞同：3
> 
> 时间：2012-09-09T17:01:39.930
> 
> 标签：c#, visual-studio-2010

试图对一个类项目的一些简单代码进行单元测试，但是每次我尝试运行测试时，我都会收到一个错误，即没有 home.exe 并且没有主要的静态 main 方法。但是，我们还没有达到我们应该拥有这些东西的地步，那么没有它们我该如何运行测试呢？

我的代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Home
{
    class InventoryType
    {

        /// <summary>
        /// Selects the inventory type and returns the selected value
        /// </summary>
        public class InventorySelect
        {
            private string inventoryTypes;
            public String InventoryTypes
            {
                set
                {
                    inventoryTypes = value;
                }

                get
                {
                    return inventoryTypes;
                }
            }

            /// <summary>
            /// Validate that the inventory is returning some sort of value
            /// </summary>
            /// <returns></returns>
            public bool Validate()
            {
                if (InventoryTypes == null) return false;
                return true;
            }
        }
    }
} 
```

我的测试代码

```
using System;
using System.Text;
using System.Collections.Generic;
using System.Linq;
using Microsoft.VisualStudio.TestTools.UnitTesting;
using Home.InventoryType.InventorySelect;

namespace HomeTest
{
    [TestClass]
    public class TestInventoryTypeCase
    {
        [TestMethod]
        public void TestInventoryTypeClass()
        {
            InventorySelect select = new InventorySelect();
            select.inventoryTypes = "Collection";

            if (Validate() = true)
                Console.WriteLine("Test Passed");
            else
                if (Validate() = false)
                    Console.WriteLine("Test Returned False");
                else
                    Console.WriteLine("Test Failed To Run");

            Console.ReadLine();

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T17:53:55.370

好的，这里有几件事。

1.  确保您的主项目（要测试的项目）的输出类型是 ClassLibrary
2.  在测试中使用断言

我创建了一个名为 ExampleLibrary 的 ClassLibrary 解决方案。创建了一个名为 InventoryType 的类并复制到您的代码中，例如

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ExampleLibrary
{
    class InventoryType 
    { 

        /// <summary> 
        /// Selects the inventory type and returns the selected value 
        /// </summary> 
        public class InventorySelect 
        { 
            private string inventoryTypes; 
            public String InventoryTypes 
            { 
                set 
                { 
                    inventoryTypes = value; 
                } 

                get 
                { 
                    return inventoryTypes; 
                } 
            } 

            /// <summary> 
            /// Validate that the inventory is returning some sort of value 
            /// </summary> 
            /// <returns></returns> 
            public bool Validate() 
            { 
                if (InventoryTypes == null) return false; 
                return true; 
            } 
        } 
    }
} 
```

然后我创建了一个单元测试并将其编码如下：

```
using Microsoft.VisualStudio.TestTools.UnitTesting;
using ExampleLibrary;

namespace HomeTest
{
    [TestClass]
    public class TestInventoryTypeCase
    {
        [TestMethod]
        public void TestInventoryTypeClass()
        {
            InventoryType.InventorySelect select = new InventoryType.InventorySelect();
            select.InventoryTypes = "Collection";

            Assert.IsTrue(select.Validate());
            select.InventoryTypes = null;
            Assert.IsFalse(select.Validate());
        }
    }
} 
```

我如上所述编译并运行测试，它运行并返回测试通过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T17:07:58.150

要在 Visual Studio 顶部的主菜单栏上运行测试... 测试 - Windows - 测试资源管理器

在“测试资源管理器”窗口中，选择您要运行的测试，然后单击窗口顶部的运行图标。

# amazon-web-services - Alexa API：不工作

> ID：12341050
> 
> 赞同：1
> 
> 时间：2012-09-09T17:01:49.440
> 
> 标签：amazon-web-services, pagerank, alexa

此处的文档：http: [//docs.amazonwebservices.com/AlexaWebInfoService/latest/](http://docs.amazonwebservices.com/AlexaWebInfoService/latest/)

```
http://awis.amazonaws.com/?
                Action=UrlInfo
                &AWSAccessKeyId=[Your AWS Access Key ID]
                &Signature=[signature calculated from request]
                &SignatureMethod=[HmacSha1 or HmacSha256]
                &SignatureVersion=2
                &Timestamp=[timestamp used in signature]
                &Url=[Valid URL]
                &ResponseGroup=[Valid Response Group] 
```

我不明白这...

```
&Signature=[signature calculated from request]
                &SignatureMethod=[HmacSha1 or HmacSha256] 
```

如何计算签名？

```
 &AWSAccessKeyId=[Your AWS Access Key ID] 
```

这也不行！这里不需要 AWS 密钥，但它无法识别我账户中的访问密钥 ID。

```
AWS was not able to authenticate the request: access credentials are missing 
```

我不能做一些简单的事情：

```
http://awis.amazonaws.com/?Action=UrlInfo&AWSAccessKeyId=AKIAISCXZCPDLPUDDAVA&SignatureVersion=2&Url=http://www.google.com&ResponseGroup=TrafficData 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T18:22:49.347

您是否检查了以下内容，它在“身份验证错误”部分的[文档中给出：](http://docs.amazonwebservices.com/AlexaWebInfoService/latest/index.html?CommonRequestParameters.html)

如果您收到身份验证错误，则以下情况之一可能是正确的：

*   您没有注册 Alexa 网络信息服务。即使您已经拥有 Amazon Web Services 帐户，您也必须在[Amazon AWS](http://aws.amazon.com/awis)单独注册 Alexa Web Information 服务。
*   您的信用卡无效或过期。
*   您尚未对时间戳和签名值进行 URL 编码。
*   如果您看到间歇性授权错误，这很可能是问题。例如，您不应在您的签名中看到任何“+”号。
*   您没有正确生成签名。请参阅[代码示例](http://aws.amazon.com/code/AWIS)。
*   发出请求的计算机上的时钟设置不正确。

# c# - JIT 编译器遇到内部限制

> ID：12341053
> 
> 赞同：3
> 
> 时间：2012-09-09T17:02:36.827
> 
> 标签：c#

当我运行测试用例时，出现以下错误JIT Compiler在运行此行时 *遇到内部限制*`actual = StoreHealth_Accessor.lookupRuleManagerandFilterRawdata(rawdt, dtRuleManagerTable, ref listobj, distinctredc, idevicegroupcount, storeID);`，我得到错误，那么如何解决它？任何想法。

```
public void lookupRuleManagerandFilterRawdataTest4()
    {

        DataTable rawdt = new DataTable(); // TODO: Initialize to an appropriate value
        rawdt.Columns.Add("AssetTag", typeof(string));
        rawdt.Columns.Add("Service_ID", typeof(string));
        rawdt.Columns.Add("ModelName", typeof(string));
        rawdt.Columns.Add("Store_ID", typeof(string));
        rawdt.Columns.Add("Last_Time_State_Change", typeof(DateTime));
        rawdt.Columns.Add("Severity", typeof(int));
        rawdt.Columns.Add("Message_Text", typeof(string));
        rawdt.Columns.Add("Retailer_ID", typeof(string));
        rawdt.Columns.Add("Device_Group_Info", typeof(string));
        DataRow drTable1 = rawdt.NewRow();

        drTable1["AssetTag"] = "CPU-00000000000US1941K017";
        drTable1["Service_ID"] = "Citizen DS40 - Paper End / Out of Paper";
        drTable1["ModelName"] = "HP IS1700 Input Station";
        drTable1["Store_ID"] = "CIN00001";
        drTable1["Last_Time_State_Change"] = "7/20/2012 4:10:34 AM";
        drTable1["Severity"] = 128;
        drTable1["Retailer_ID"] = "CIN";
        drTable1["Device_Group_Info"] = "Input Station";
        drTable1["Message_Text"] = "Citizen DS40 - Paper End / Out of Paper";

        //DataTable dtRuleManagerTable = null; // TODO: Initialize to an appropriate value

        DataTable dtRuleManagerTable = new DataTable();
        dtRuleManagerTable.Columns.Add("RuleID", typeof(string));
        dtRuleManagerTable.Columns.Add("Drive_Store_Status", typeof(int));
        dtRuleManagerTable.Columns.Add("Service_ID", typeof(string));
        dtRuleManagerTable.Columns.Add("Device_Group_Name", typeof(string));
        dtRuleManagerTable.Columns.Add("AssetTag", typeof(string));
        dtRuleManagerTable.Columns.Add("Severity", typeof(int));
        dtRuleManagerTable.Columns.Add("ModelName", typeof(string));
        dtRuleManagerTable.Columns.Add("Store_ID", typeof(string));
        dtRuleManagerTable.Columns.Add("Last_Time_State_Change", typeof(DateTime));

        dtRuleManagerTable.Columns.Add("Message_Text", typeof(string));
        dtRuleManagerTable.Columns.Add("Retailer_ID", typeof(string));

        DataRow drTable = dtRuleManagerTable.NewRow();

        drTable["AssetTag"] = "CPU-00000000000US1941K017";
        drTable["Service_ID"] = "Citizen DS40 - Paper End / Out of Paper";
        drTable["ModelName"] = "HP IS1700 Input Station";
        drTable["Store_ID"] = "CIN00001";
        drTable["Last_Time_State_Change"] = "7/20/2012 4:10:34 AM";
        drTable["Severity"] = 128;
        drTable["Retailer_ID"] = "CIN";

        drTable["Message_Text"] = "Citizen DS40 - Paper End / Out of Paper";

        drTable["RuleID"] = "101A";
        drTable["Drive_Store_Status"] = 1;

        drTable["Device_Group_Name"] = "Input Station ";
        List<DeviceGroupCountDetailsforstore_Accessor> listobj = new List<DeviceGroupCountDetailsforstore_Accessor>(); // TODO: Initialize to an appropriate value
        DeviceGroupCountDetailsforstore_Accessor devgrpcountobj = new DeviceGroupCountDetailsforstore_Accessor();

         Hashtable severitynum = new Hashtable();
         Hashtable hsevry = new Hashtable();
        hsevry.Add("101A",1);
        devgrpcountobj.severitynum.Add("Input Station", hsevry);

        listobj.Add(devgrpcountobj);
        //devgrpcountobj.severitynum;
       // DeviceGroupCountDetailsforstore_Accessor.AttachShadow(listobj);
        //listobj.Add("input station");

        List<string> distinctredc = new List<string>{"Input Station","Routers"}; // TODO: Initialize to an appropriate value
        int idevicegroupcount = 2; // TODO: Initialize to an appropriate value
        string storeID = "CIN00001"; // TODO: Initialize to an appropriate value
        bool expected = true; // TODO: Initialize to an appropriate value
        bool actual;
        actual = StoreHealth_Accessor.lookupRuleManagerandFilterRawdata(rawdt, dtRuleManagerTable, ref listobj, distinctredc, idevicegroupcount, storeID);

        Assert.AreEqual(expected, actual);
        Assert.Inconclusive("Verify the correctness of this test method.");
    } 
```

# iphone - 如何连接 NSString 和 NSDateFormatter

> ID：12341054
> 
> 赞同：1
> 
> 时间：2012-09-09T17:02:36.673
> 
> 标签：iphone, objective-c, concatenation, string-concatenation

我需要将 NSString 与 NSDateFormatter 的 NSString 输出连接起来。我的代码如下。请检查我哪里出错了。我必须将*DEST PATH*与*datestring*连接起来。

```
NSDateFormatter * formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"dd-MM-yyyy HH-mm"];

NSString * dateString = [formatter stringFromDate:[NSDate date]];

NSString *DEST_PATH=[NSHomeDirectory() stringByAppendingString:@"/Documents/Movie1];

// below is for concatenate

result =[result stringByAppendingString:DEST_PATH];
result=[result stringByAppendingString:dateString]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T17:12:03.100

看起来好像您从未实例化`NSString` `result`. 我会将以上内容更改为以下内容：

```
NSDateFormatter * formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"dd-MM-yyyy HH-mm"];
NSString * dateString = [formatter stringFromDate:[NSDate date]];

NSString *DEST_PATH=[NSHomeDirectory() stringByAppendingString:@"/Documents/Movie1];
NSString* result=[DEST_PATH stringByAppendingPathComponent:dateString]; 
```

如果您使用该`stringByAppendingPathComponent`方法，它将自动为您添加斜线。

此外，使用所有大写字母作为标识符通常表示 ac 样式的处理程序宏常量，因此将其用作变量可能会使某些人感到困惑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T13:56:01.600

```
NSDateFormatter * formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"dd-MM-yyyy HH-mm"];

NSString * dateString = [formatter stringFromDate:[NSDate date]];

NSString *DEST_PATH=[NSHomeDirectory() stringByAppendingString:@"/Documents/Movie1];

// below is for concatenate
  NSString *resultStr=[NSString stringWithFormat:@"%@%@",DEST_PATH,dateString]; 
```

希望这对您有所帮助。

# css - 接受 PyCharm 中的非标准 css 属性？

> ID：12341062
> 
> 赞同：1
> 
> 时间：2012-09-09T17:03:44.890
> 
> 标签：css, pycharm

我有以下规则

```
 .selectable { /* double click -> select (not text-selection) */
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        cursor: pointer;
    } 
```

其中每个属性（除了`cursor`）在 PyCharm 编辑器中显示为红色波浪线，并显示消息“未知 CSS 属性 -webkit-touch-callout..”。

我知道这`user-select`是非标准的，但是有没有办法告诉 PyCharm 我已经理解了这个警告，请不要再唠叨我了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T18:29:55.430

您需要启用**忽略供应商特定的 CSS 属性**选项：

![忽略供应商特定的 CSS 属性](../Images/2f324fdee2a4cc54c05e1c723f5d355b.png)

# .net - 调试停止后自动卸载 WinRT 应用程序

> ID：12341063
> 
> 赞同：1
> 
> 时间：2012-09-09T17:03:44.893
> 
> 标签：.net, visual-studio, windows-runtime, visual-studio-2012, visual-studio-debugging

我想在完成调试后自动卸载 WinRT 应用程序。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T17:49:56.973

您可以使用 Remove-AppxPackage 进行卸载。我不知道是否有调试后触发器可以挂钩来执行此操作。

删除-AppxPackage => [http://technet.microsoft.com/en-us/library/hh856038.aspx](http://technet.microsoft.com/en-us/library/hh856038.aspx)

# macos - 在山狮中使用 x11 emacs

> ID：12341065
> 
> 赞同：2
> 
> 时间：2012-09-09T17:04:03.613
> 
> 标签：macos, emacs, x11, macports, osx-mountain-lion

我一直在尝试通过在我的带有山狮的笔记本电脑上使用 sudo port install emacs +x11 来安装 macport，但是每次我在终端中打开 emacs 时，它都会在没有任何 GUI 的情况下在终端中打开。如果我尝试直接在 xquartz 终端会话中打开 emacs，也会发生这种情况。有没有人在山狮上安装 x11 版本的 emacs 运气？如果是这样，怎么办？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T19:27:51.330

原来苹果切断了终端和xquartz之间的联系。如果我在 xterm 中打开 emacs，它会运行得很好。我发现即使我使用带有 ssh 服务器的终端也是如此。看起来苹果的终端从现在开始不会有那么大的帮助了。

编辑; 我不确定这是否是 xQuartz 的更新，但问题已得到解决。当我在普通终端应用程序中输入 x11 应用程序时，它将正常打开 xQuartz。

# nhibernate - 如何从 nHiberhate 获得格式良好的查询？

> ID：12341069
> 
> 赞同：0
> 
> 时间：2012-09-09T17:04:27.310
> 
> 标签：nhibernate

我希望 nHibernate 在我的日志中给我一个干净的查询。而不是这样的单行：

```
select project2x0_.proj_id as proj1_10_0_, projwbs1_.wbs_id as wbs1_11_1_, project2x0_.proj_short_name as proj2_10_0_, project2x0_.project_flag as project3_10_0_, projwbs1_.wbs_name as wbs2_11_1_, projwbs1_.wbs_short_name as wbs3_11_1_, projwbs1_.proj_id as proj4_11_1_, projwbs1_.proj_id as proj4_0__, projwbs1_.wbs_id as wbs1_0__ from project project2x0_ left outer join projwbs projwbs1_ on project2x0_.proj_id=projwbs1_.proj_id where @p0=1;@p0 = True [Type: Boolean (0)] 
```

我更希望以更易读的形式看到它，例如：

```
select project2x0_.proj_id as proj1_10_0_
, projwbs1_.wbs_id as wbs1_11_1_
, project2x0_.proj_short_name as proj2_10_0_
, project2x0_.project_flag as project3_10_0_
, projwbs1_.wbs_name as wbs2_11_1_
, projwbs1_.wbs_short_name as wbs3_11_1_
, projwbs1_.proj_id as proj4_11_1_
, projwbs1_.proj_id as proj4_0__
, projwbs1_.wbs_id as wbs1_0__ 
from project project2x0_ 
left outer join projwbs projwbs1_
  on project2x0_.proj_id=projwbs1_.proj_id 
where @p0=1; 
```

;@p0 = True [类型：布尔值 (0)]

特定字段可以都在一行上，这很好。但我真的很喜欢看到将 FROM、JOIN 和 WHERE 语句拉出来。

我希望它出现在 log4net 输出中，而不是通过某些 3rd 方工具。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T19:27:04.320

在 Configuration 对象上将“format_sql”属性设置为 true 会产生与您想要的类似的输出。

# iphone - 如何正确预加载动画图像数组

> ID：12341078
> 
> 赞同：0
> 
> 时间：2012-09-09T17:05:46.977
> 
> 标签：iphone, objective-c, ios, ipad

我有几个动画，当它们被触发时，它们在执行之前会有不同长度的（无意的）延迟。

在里面`viewDidLoad`我有类似的东西：

```
NSString *fileName;
myArray = [[NSMutableArray alloc] init];
for(int i = 1; i < 285; i++) {
    fileName = [[NSBundle mainBundle] pathForResource:[NSString stringWithFormat:@"HD1.2 png sequence/HD1.2_%d", i] ofType:@"png"];
    UIImage *image = [UIImage imageWithContentsOfFIle:fileName];
    [humptyArray addObject:image];
    //NSLog(@"Added object number %d: %@", i,regularImage);
}
falling.userInteractionEnabled = NO;
falling.animationImages = humptyArray;
falling.animationDuration = 6.3f;
falling.animationRepeatCount = 1; 
```

我输入了，`NSLog`所以我可以确认数组中填充了图像，它就是这样。当我想触发我调用的动画时`[falling startAniamting]`。尽管数组已经预加载了图像，但在我触发动画和动画执行之间仍然存在延迟。

我该怎么做才能在触发动画时没有延迟？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T18:38:46.503

```
 @autoreleasepool {
            NSString *fileName;
            humptyArray = [[NSMutableArray alloc] init];
            dispatch_queue_t concurrentQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
            dispatch_async(concurrentQueue, ^{   
            for(int i = 1; i < 285; i++) {
                fileName = [[NSBundle mainBundle] pathForResource:[NSString stringWithFormat:@"HD1.2 png sequence/HD1.2_%d", i] ofType:@"png"];
                UIImage *image = [UIImage imageWithContentsOfFIle:fileName];
                [humptyArray addObject:image];
                //NSLog(@"Added object number %d: %@", i,regularImage);
            }
            falling.userInteractionEnabled = NO;
            falling.animationImages = humptyArray;
            falling.animationDuration = 6.3f;
            falling.animationRepeatCount = 1;
                dispatch_async(dispatch_get_main_queue(), ^{

                    [humptyArray release];

                });
            });
    }

Taken from my own answer in this other [SO question][1]

  [1]: http://stackoverflow.com/a/11364856/253008 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-02T18:42:57.543

您会发现 SO 上的人建议使用动画图像，但它会占用您所有的系统内存并且速度不快。请看一下我对[smooth-video-looping-in-ios 的](https://stackoverflow.com/questions/7822808/smooth-video-looping-in-ios/17183962#17183962)回答，它是在谈论循环视频，但问题是一样的。另请查看我对[iphone-smooth-transition-from-one-video-to-another 的](https://stackoverflow.com/questions/3410003/iphone-smooth-transition-from-one-video-to-another#answer-17138580)回答。这些链接上提供了 2 个示例 xcode 项目，这些项目展示了一个实现，该实现将开始快速播放并在没有任何故障的情况下循环播放，所有这些都不会耗尽所有内存并导致应用程序崩溃。

# razor - MVC4 动态创建的 ActionLink 意外工作

> ID：12341079
> 
> 赞同：0
> 
> 时间：2012-09-09T17:05:57.317
> 
> 标签：razor, asp.net-mvc-4

我正在使用 MVC4 和 Razor

当我动态创建 ActionLink 并希望有人能解释原因时，我得到了意想不到的结果：问题是当我将 null 作为 htmlAttribute 传递时，URL 生成正确。但是，当我传入一个值时，URL 的区域部分就搞砸了。

```
<li> @Html.ActionLink(link.LinkText, link.ActionName, link.ControllerName, rvd,link.ActionName.Equals(currentAction) && link.ControllerName.Equals(currentController)? new { @class = "currentMenuItem" }:null)</li>

http://localhost:48000/Accounts/Forum/TopicsGrid?Count=2&Keys=System.Collections.Generic.Dictionary%602%2BKeyCollection%5BSystem.String%2CSystem.Object%5D&Values=System.Collections.Generic.Dictionary%602%2BValueCollection%5BSystem.String%2CSystem.Object%5D 
```

当我将 null 作为 htmlAttribute 传递时，它的正确：

```
<li> @Html.ActionLink(link.LinkText, link.ActionName, link.ControllerName, rvd, null)</li>   

http://localhost:48000/Forums/Forum/TopicsGrid/1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T17:10:51.910

`ActionLink()` [没有](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.linkextensions.actionlink.aspx)过`Dictionary, Object`载。
由于您的最后一个参数是`Object`， routeValues 参数也被解释为 objetc，因此它读取`RouteValudDictionary`类的属性。

# c# - 另一个程序的 Visual Studio.NET 关闭对话框

> ID：12341085
> 
> 赞同：0
> 
> 时间：2012-09-09T17:07:10.147
> 
> 标签：c#, .net, vb.net

> **可能重复：**
> [使用 c# 从另一个程序关闭消息框](https://stackoverflow.com/questions/11729281/close-a-message-box-from-another-program-using-c-sharp)

我的电脑上有另一个程序，每隔一段时间就会显示一个消息框。弹出这些对话框时是否可以使用 .NET 来关闭它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T18:07:26.417

使用 FindWindow 和 SendMessage winapi 函数，如这里[http://www.codeproject.com/Articles/22257/Find-and-Close-the-Window-using-Win-API](http://www.codeproject.com/Articles/22257/Find-and-Close-the-Window-using-Win-API)

您必须创建一个关闭该窗口的连续循环，例如 while (true)。我使用了 Timer，因为它更有效。这是我的代码：

```
[DllImport ("user32.dll")] public static extern IntPtr FindWindow  (String sClassName, String sAppName);
[DllImport ("user32.dll")] public static extern int    SendMessage (IntPtr hWnd, uint Msg, int wParam, int lParam);
    Timer t;
    public Form1 ()
    {
        InitializeComponent ();
        t=new Timer ();
        t.Interval=100;
        t.Tick+=delegate
        {
            IntPtr w=FindWindow (null, "Message box title");
            if (w!=null) SendMessage (w, 0x0112, 0xF060, 0);
        };
        t.Start ();
    } 
```

其中 WM_SYSCOMMAND=0x0112 public const int SC_CLOSE = 0xF060;

如果您不知道窗口的类名（如上），请使用 null 和消息框的标题作为参数。当然，这意味着消息框有一个标题。

# java - Java套接字/序列化，对象不会更新

> ID：12341086
> 
> 赞同：14
> 
> 时间：2012-09-09T17:07:26.463
> 
> 标签：java, sockets, serialization

我正在编写一个基于套接字的小程序。我正在使用类 ModelEvent 通过套接字传递信息。在 ModelEvent 中，有一个类型为 (Object) 的变量对象。

对象本身是具有一些值的二维数组。

```
object[1][2] = 2;
ModelEvent event = new ModelEvent("allo", object);
dispatchEvent(event);

object[2][3] = 2;
ModelEvent event2 = new ModelEvent("you", object);
dispatchEvent(event2); 
```

假设数组对象填充了值1。第一个事件（event）被客户端接收到，数据是对的。通过数据发送的第二个事件不正确。它的数据与第一次调度中的相同。“allo”和“you”是看我是否没有两次阅读同一个事件，答案不是。字符串是正确的，但对象不是，如果它已更新，则事件。我在发送第二个事件之前遍历数组以查看它是否在服务器端更新，并且确实如此。但是在客户端，即使事件本身发生了变化，它仍然与第一次分派时一样。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-09T17:20:32.833

见[`ObjectOutputStream.reset`](http://docs.oracle.com/javase/7/docs/api/java/io/ObjectOutputStream.html#reset())。

> 重置将忽略已写入流的任何对象的状态。状态被重置为与新的相同`ObjectOutputStream`。流中的当前点被标记为重置，因此相应`ObjectInputStream`的点将在同一点重置。之前写入流的对象不会被称为已经在流中。它们将再次写入流。

```
/* prevent using back references */
output.reset();
output.writeObject(...); 
```

在写入同一个对象之前调用 reset 以确保其更新的状态被序列化。否则，它将仅使用对先前写入的具有过时状态的对象的*反向引用。*

或者，您也可以[`ObjectOutputStream.writeUnshared`](http://docs.oracle.com/javase/7/docs/api/java/io/ObjectOutputStream.html#writeUnshared(java.lang.Object))按如下方式使用。

> 将“未共享”对象写入`ObjectOutputStream`. 此方法与 相同`writeObject`，只是它始终将给定对象作为流中的新的唯一对象写入（与指向先前序列化实例的反向引用相反）。
> 
> 具体来说：
> 
> *   通过 writeUnshared 写入的对象始终以与新出现的对象（尚未写入流的对象）相同的方式序列化，无论该对象之前是否已写入。
>     
>     
> *   如果`writeObject`用于写入之前已使用 writeUnshared 写入的对象，则将之前的 writeUnshared 操作视为对单独对象的写入。换句话说，`ObjectOutputStream`永远不会生成对调用写入的对象数据的反向引用`writeUnshared`。
>     
>     
> 
> 虽然写入对象 via`writeUnshared`本身并不能保证在反序列化时对该对象的唯一引用，但它允许在流中多次定义单个对象，这样`readUnshared`接收方的多次调用就不会发生冲突。请注意，上述规则仅适用于用 编写的基本级别对象`writeUnshared`，不适用于要序列化的对象图中的任何可传递引用的子对象。

```
output.writeUnshared(...); 
```

请注意，将此与[`ObjectInputStream.readUnshared`](http://docs.oracle.com/javase/7/docs/api/java/io/ObjectInputStream.html#readUnshared()).

> 从`ObjectInputStream`. 此方法与 readObject 相同，只是它防止后续调用`readObject`和`readUnshared`返回对通过此调用获得的反序列化实例的附加引用。
> 
> 具体来说：
> 
> *   如果`readUnshared`调用反序列化反向引用（先前已写入流的对象的流表示），`ObjectStreamException`将抛出
> *   如果`readUnshared`成功返回，则任何后续尝试反序列化对反序列化的流句柄的反向引用`readUnshared`都将导致`ObjectStreamException`抛出 an 。
> 
> 通过反序列化对象`readUnshared`会使与返回的对象关联的流句柄无效。请注意，这本身并不总是保证返回的引用`readUnshared`是唯一的；反序列化的对象可以定义一个`readResolve`方法，该方法返回一个对其他方可见的对象，或者 readUnshared 可以返回一个`Class`对象或常量，该对象或`enum`常量可在流中的其他地方或通过外部方式获得。如果反序列化的对象定义了一个`readResolve`方法并且该方法的调用返回一个数组，则`readUnshared`返回该数组的一个浅克隆；这保证了返回的数组对象是唯一的，并且不能从第二次调用`readObject`或 readUnshared 获得`ObjectInputStream`，即使底层数据流已被操纵。

```
obj = input.readUnshared(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-09T17:22:06.047

我没有看到 dispatchEvent 代码，但是根据您所写的内容，我假设如下：您编写了相同的对象（仅更改了其状态），这意味着它将仅写入引用两次。您可以在 java 输出流文档中看到（用于性能）。

您应该使用 writeUnshared()，它将在每次写入时创建一个新对象

我看到有人建议重置，这将使您获得相同的结果，但它会对性能产生影响。

# matlab - matlab R2011a 无法编译 mex 文件

> ID：12341092
> 
> 赞同：2
> 
> 时间：2012-09-09T17:08:10.087
> 
> 标签：matlab, gcc, mex

我在我的 Mac 上安装了 Xcode(4.4.1)，并在计算机上使用 MATLAB r2011a（64 位）。我一直在尝试编译 mex 文件，但出现以下错误：

* * *

```
/Applications/MATLAB_R2011a.app/bin/mex：第 305 行：gcc-4.2：找不到命令
/Applications/MATLAB_R2011a.app/bin/mex：第 1041 行：gcc-4.2：找不到命令

    mex：“mdwt.c”的编译失败。

？？？在 208 处使用 ==> mex 时出错
无法成功完成。

==> 在 39 处编译时出错
墨西哥 mdwt.c mdwt_r.c

```

* * *

当我在`"gcc"`命令提示符（终端）输入时，我看到它已安装。

谁能告诉我如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T20:36:42.887

请查看此链接： [如何在 Mac OS X 10.8 / Xcode 4.4 上使用/安装 gcc](https://stackoverflow.com/questions/9353444/how-to-use-install-gcc-on-mac-os-x-10-8-xcode-4-4)

对于xcode 4.4，我猜你需要自己手动安装gcc。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T09:21:19.527

您可能必须先运行`mex -setup`以告诉 matlab 哪个编译器可用。

# android - 哪个更适合 Spinner？

> ID：12341102
> 
> 赞同：0
> 
> 时间：2012-09-09T17:09:36.303
> 
> 标签：android, android-spinner

我正在使用里面的数组创建一个 Spinner `strings.xml`。

我注意到我可以`android:entries="@array/theName"`用来填充我的微调器。或者我可以使用以下代码：

```
spinner = (Spinner) findViewById(R.id.spinner1);
ArrayAdapter<CharSequence> adapter1 = ArrayAdapter.createFromResource(this, R.array.theName, android.R.layout.simple_spinner_item);
adapter1.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
spinner1.setAdapter(adapter1); 
```

那么这两者有什么区别呢？一个跑得比另一个快吗？我完全赞成不使用所有代码，但如果它会导致我的应用程序的其余部分出现问题，我宁愿使用代码。我计划在我的应用程序的其他地方使用用户选择的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T17:12:37.427

两者都是有效的。

如果您已经将字符串数组放入 res 文件夹，请使用 XML 代码。它更简单，更清洁。否则，如果您动态获取数组（例如从互联网），请使用 java 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T18:02:35.107

这些方法之间几乎没有区别，属性`android:entries`主要是一种方便的方法。您可以自己查看代码：

1.  [ArrayAdapter.createFromResource()](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/widget/ArrayAdapter.java#ArrayAdapter.createFromResource%28android.content.Context%2Cint%2Cint%29)
2.  使用[`android:entries`](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/widget/AbsSpinner.java#AbsSpinner.%3Cinit%3E%28android.content.Context%2Candroid.util.AttributeSet%2Cint%29)

他们都调用`Resources.getTextArray()`并创建一个`ArrayAdapter<CharSequence>`. 主要区别在于：使用方法1允许您使用自定义布局，而使用方法2只需要一行XML代码。

引用有关属性的[文档](http://developer.android.com/reference/android/R.styleable.html#AbsSpinner_entries)`entries`：

> 对于静态内容，这比以编程方式填充 Spinner 更简单。

# android - Android 模拟器作为 Eclipse 中的窗口

> ID：12341103
> 
> 赞同：1
> 
> 时间：2012-09-09T17:09:40.900
> 
> 标签：android, eclipse

是否可以将模拟器作为选项卡/窗口放在 Eclipse 中？我有双显示器，我的典型设置是一侧为全屏全屏，另一侧为全屏，通常在 developer.android.com 或 stackoverflow 上，而模拟器在我调试之前大部分时间都在 chrome 下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T17:35:14.757

我不知道在 Eclipse 中是否可能，很可能不是（我可能是错的）。

不过你可以试试[MotoDevStudio](http://developer.motorola.com/tools/motodevstudio/)。开发环境看起来与 Eclipse 完全一样，因此切换起来不会有太多麻烦。更重要的是，它在 IDE 的选项卡中运行 Android 模拟器。

# ruby - 使用“不常见”分隔符在 Ruby on Rails 中创建数组

> ID：12341106
> 
> 赞同：0
> 
> 时间：2012-09-09T17:10:10.877
> 
> 标签：ruby, arrays, string

我正在 Ruby on Rails 中构建一个应用程序，在其中我将内容拉入另一个文件，并想知道是否有任何简单的方法可以创建用于分隔字符串内容的唯一分隔符，或者是否应该采用另一种方法。

假设我有一段文本，我想插入，假设我不知道文本将包含什么。

我想做的是在段落中的 5 个随机点处放置某种分隔符，以便稍后可以创建一个数组，其中可以将直到该分隔符的内容分离成一个单独的元素。

对于一些上下文，假设我有一个段落作为字符串拉入：

```
Hello, this is a paragraph of text which will be delimited. Goodbye. 
```

现在，假设我在各个点添加了一个分隔符，如下所示（我知道如何在代码中执行此操作）：

```
Hello, this [DELIMITER] is a paragraph [DELIMITER] of text which [DELIMITER] will [DELIMITER] be delimitted. Goodbye. 
```

同样，我知道如何做到这一点，但假设我可以使用上面的方法创建一个数组，如下所示：

```
my_array = ["Hello, this", "is a paragraph", "of text which", "will", "be delimitted. Goodbye" 
```

我有信心实现上述所有目标。我面临的挑战是：我的分隔符应该是什么？

通常，逗号用作分隔符，但如果文本已经包含逗号，这将导致我不希望它们出现的分隔符。例如，在上面的示例中，“Hello”和“this”之间的逗号会导致“Hello, this”元素被拆分为“Hello”和“this”——这不是我想要的。

我想做*的*是每次加载页面时使用随机（十六进制）数字生成器创建一个新的分隔符，例如“你好，这个 023ABCDEF 是一个段落 023ABCDEF ...”，但我不确定这是正确的做法。

有没有更简单的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T17:52:01.987

多部分 mime 消息（或多或少）采用 GUID 分隔符的方法；这是足够的。

不过，我认为这是一种不同类型的问题，更接近于文本编辑器标记文本**粗体**或*斜体*等部分。这可以通过字符串解析（如 Markdown，SO 的格式）或数据结构来处理。

文本编辑器方法通常更灵活，而不是简单的字符串集合，而是使用包含有关部分的元数据（类型、格式等）的结构集合（或树）。

最佳方法取决于您的需求：

*   部分可以嵌套吗？
*   这会被渲染吗？
*   如果是这样，“类型”部分是否需要特定的渲染？
*   *是否*有“类型”部分，或者它们都相同？
*   有问题的文本会在切片之前、期间或之后进行编辑吗？
*   等等。

# android - 选项卡式应用程序在启动时崩溃

> ID：12341107
> 
> 赞同：0
> 
> 时间：2012-09-09T17:10:26.240
> 
> 标签：android, button, tabs, android-tablelayout

我正在尝试制作一个应用程序来跟踪总数并通过表中包含的 TextEdit 显示它们。我想有几个标签来跟踪不同的表格，从而跟踪不同的总数。但是，当应用程序在模拟器上启动时，它会立即停止工作并崩溃。谁能告诉我出了什么问题？

安卓代码：

```
public class CounterCounterActivity extends TabActivity implements OnClickListener {
/** Called when the activity is first created. */
TextView YourLife, OppLife;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    TabHost tabHost=(TabHost)findViewById(R.id.tabHost);
    tabHost.setup();

    TabSpec spec1=tabHost.newTabSpec("Tab 1");
    spec1.setContent(R.id.tab1);
    spec1.setIndicator("Life");

    TabSpec spec2=tabHost.newTabSpec("Tab 2");
    spec2.setIndicator("+/-");
    spec2.setContent(R.id.tab2);

    TabSpec spec3=tabHost.newTabSpec("Tab 3");
    spec3.setIndicator("Poison");
    spec3.setContent(R.id.tab3);

    tabHost.addTab(spec1);
    tabHost.addTab(spec2);
    tabHost.addTab(spec3);
    tabHost.getTabWidget().getChildAt(0).getLayoutParams().height =50;
    tabHost.getTabWidget().getChildAt(1).getLayoutParams().height =50;
    tabHost.getTabWidget().getChildAt(2).getLayoutParams().height =50;
    ((Button) findViewById(R.id.button1)).setOnClickListener(this);
    ((Button) findViewById(R.id.button2)).setOnClickListener(this);
    ((Button) findViewById(R.id.button3)).setOnClickListener(this);
    ((Button) findViewById(R.id.button4)).setOnClickListener(this);
    ((Button) findViewById(R.id.button5)).setOnClickListener(this);
    ((Button) findViewById(R.id.button6)).setOnClickListener(this);
    ((Button) findViewById(R.id.button7)).setOnClickListener(this);
    ((Button) findViewById(R.id.button8)).setOnClickListener(this);
    YourLife=(TextView)findViewById(R.id.txt2);
    OppLife=(TextView)findViewById(R.id.txt1);
}
public void onClick(View view) {
    // TODO Auto-generated method stub
    @SuppressWarnings("unused")
    Intent intent = new Intent();
    int LY=20;
    int LO=20;
    int sel=0;
    while (LY>0 && LO>0)
    {
        sel=0;
        if (view.getId()==R.id.button1)
        {
            sel=1;

        }
        if (view.getId()==R.id.button3)
        {
            sel=2;

        }
        if (view.getId()==R.id.button4)
        {
            sel=3;

        }
        if (view.getId()==R.id.button8)
        {
            sel=4;

        }
        if (view.getId()==R.id.button5)
        {
            sel=5;

        }if (view.getId()==R.id.button2)
        {
            sel=6;

        }if (view.getId()==R.id.button6)
        {
            sel=7;

        }if (view.getId()==R.id.button7)
        {
            sel=8;

        }

        switch (sel)
        {
        case 1:
        {
            LO=LO-1;
            OppLife.setText(LO);
        }
        case 2:
        {
            LO=LO-5;
            OppLife.setText(LO);
        }
        case 3:
        {
            LO=LO+1;
            OppLife.setText(LO);    
        }
        case 4:
        {
            LO=LO+5;
            OppLife.setText(LO+"");
        }
        case 5:
        {
            LY=LY-1;
            OppLife.setText(LY+"");
        }
        case 6:
        {
            LY=LY-5;
            OppLife.setText(LY+""); 
        }
        case 7:
        {
            LY=LY+1;
            OppLife.setText(LY+""); 
        }
        case 8:
        {
            LY=LY+5;
            OppLife.setText(LY+"");
        }
        }
    } 
```

主要.XML：

```
<?xml version="1.0" encoding="utf-8"?>

<TabHost android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:id="@+id/tabHost"
xmlns:android="http://schemas.android.com/apk/res/android"
>
<TabWidget
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:id="@android:id/tabs"
/>
 <FrameLayout
 android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:id="@android:id/tabcontent"
 >
<TableLayout  
xmlns:android="http://schemas.android.com/apk/res/android"  
android:id="@+id/tab1"  
android:layout_width="match_parent"  
android:layout_height="match_parent"  
android:shrinkColumns="*"  
android:stretchColumns="*"
android:paddingTop="60px">  
 <TableRow >
     <TextView  
android:layout_width="fill_parent" 
android:layout_height="100px" 
android:text="You"
android:id="@+id/txt4"
/>

     <TextView
         android:id="@+id/txt4"
         android:layout_width="fill_parent"
         android:layout_height="100px"
         android:text="Opponent" />

 </TableRow>
 <TableRow >
 <TextView  
android:layout_width="fill_parent" 
android:layout_height="200px" 
android:text="20"
android:id="@+id/txt1"
android:layout_weight="1"
android:textSize="100dp"
/>    
<TextView  
android:layout_width="fill_parent" 
android:layout_height="200px" 
android:text="20"
android:id="@+id/txt2"
android:layout_weight="1"
android:textSize="100dp"
/>    
</TableRow>

<TableRow>
    <Button
        android:id="@+id/button5"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="You -1"
        android:layout_weight="1" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Opp -1" 
        android:layout_weight="1"/>

    </TableRow>
    <TableRow>

        <Button
            android:id="@+id/button2"
            android:layout_width="wrap_content"
            android:layout_height="50dp"
            android:text="You -5" />

        <Button
            android:id="@+id/button3"
            android:layout_width="wrap_content"
            android:layout_height="50dp"
            android:text="Opp -5" />

</TableRow>
<TableRow >
    <Button
        android:id="@+id/button6"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="You +1" />

    <Button
        android:id="@+id/button4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Opp +1" />

    </TableRow>

<TableRow >

<Button
    android:id="@+id/button7"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="You +5" />

<Button
    android:id="@+id/button8"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Opp +5" />

</TableRow>

 </TableLayout>

 <TableLayout
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:id="@+id/tab2"
 android:shrinkColumns="*"  
 android:stretchColumns="*"
 android:paddingTop="60px"
 >
<TableRow>
 <TextView  
  android:layout_width="fill_parent" 
  android:layout_height="100px" 
  android:text="This is tab 2"
  android:id="@+id/txt2"
 />
</TableRow>
 </TableLayout>

    <TableLayout
     android:layout_width="fill_parent"
     android:layout_height="fill_parent"
     android:id="@+id/tab3"
     android:shrinkColumns="*"  
     android:stretchColumns="*"
     android:paddingTop="60px"
 >
<TableRow>
 <TextView  
android:layout_width="fill_parent" 
android:layout_height="100px" 
android:text="This is tab 3"
android:id="@+id/txt3"
/>
</TableRow>
 </TableLayout>
 </FrameLayout> 
```

LogCat 条目；

```
09-09 12:48:16.964: D/AndroidRuntime(331): Shutting down VM
09-09 12:48:16.964: W/dalvikvm(331): threadid=1: thread exiting with uncaught exception (group=0x40015560)
09-09 12:48:16.985: E/AndroidRuntime(331): FATAL EXCEPTION: main
09-09 12:48:16.985: E/AndroidRuntime(331): java.lang.RuntimeException: Unable to start activity ComponentInfo{magic.gathering/magic.gathering.CounterCounterActivity}: java.lang.RuntimeException: Your content must have a TabHost whose id attribute is 'android.R.id.tabhost'
09-09 12:48:16.985: E/AndroidRuntime(331):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
09-09 12:48:16.985: E/AndroidRuntime(331):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
09-09 12:48:16.985: E/AndroidRuntime(331):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
09-09 12:48:16.985: E/AndroidRuntime(331):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
09-09 12:48:16.985: E/AndroidRuntime(331):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-09 12:48:16.985: E/AndroidRuntime(331):  at android.os.Looper.loop(Looper.java:123)
09-09 12:48:16.985: E/AndroidRuntime(331):  at android.app.ActivityThread.main(ActivityThread.java:3683)
09-09 12:48:16.985: E/AndroidRuntime(331):  at java.lang.reflect.Method.invokeNative(Native Method)
09-09 12:48:16.985: E/AndroidRuntime(331):  at java.lang.reflect.Method.invoke(Method.java:507)
09-09 12:48:16.985: E/AndroidRuntime(331):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
09-09 12:48:16.985: E/AndroidRuntime(331):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
09-09 12:48:16.985: E/AndroidRuntime(331):  at dalvik.system.NativeStart.main(Native Method)
09-09 12:48:16.985: E/AndroidRuntime(331): Caused by: java.lang.RuntimeException: Your content must have a TabHost whose id attribute is 'android.R.id.tabhost'
09-09 12:48:16.985: E/AndroidRuntime(331):  at android.app.TabActivity.onContentChanged(TabActivity.java:105)
09-09 12:48:16.985: E/AndroidRuntime(331):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:210)
09-09 12:48:16.985: E/AndroidRuntime(331):  at android.app.Activity.setContentView(Activity.java:1657)
09-09 12:48:16.985: E/AndroidRuntime(331):  at magic.gathering.CounterCounterActivity.onCreate(CounterCounterActivity.java:19)
09-09 12:48:16.985: E/AndroidRuntime(331):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
09-09 12:48:16.985: E/AndroidRuntime(331):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611) 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T17:20:08.150

> 12：48：16.985：E/AndroidRuntime（331）：原因：java.lang.RuntimeException：您的内容必须有一个 id 属性为“android.R.id.tabhost”的 TabHost

更换

```
android:id="@+id/tabHost" 
```

经过

```
android:id="@android:id/tabHost" 
```

应该管用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T17:45:43.980

由于您在 Activity 中扩展 TabActivity，因此您需要 在 XML中更改**`id`**您的。`TabHost`

```
<TabHost android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:id="@android:id/tabHost"
xmlns:android="http://schemas.android.com/apk/res/android"
> 
```

# php - PHP fputs 不工作

> ID：12341110
> 
> 赞同：0
> 
> 时间：2012-09-09T17:10:38.693
> 
> 标签：php, fopen, fwrite, fputs

我有以下代码来创建一个 LOG 文件。

它在“download.php”中实现，这是一个强制下载的脚本，我从下载链接调用它，例如：

```
<a href="download.php?file=filename">Filename to download</a> 
```

下载链接位于任何其他页面、index.php 或其他任何地方。在我的本地服务器上工作正常，在我的主机上不起作用（GoDaddy）......

```
$fname = "filename";

// log file name
define('LOG_FILE','logs/downloads.log');

$f = fopen(LOG_FILE, "a+");
if ($f) {
  fputs($f, date("Y.m.d | H:i:s")." | ".$_SERVER['REMOTE_ADDR']." | ".$fname."\r\n");
  fclose($f);
} 
```

不同文件中的相同代码也可以完美运行。

我想 download.php 脚本中的某些东西会干扰它，如果有必要我可以把它放在这里，但是它很长......

谢谢！！

download.php 的完整代码：

```
<?php

###############################################################
# File Download 1.31
###############################################################
# Visit http://www.zubrag.com/scripts/ for updates
###############################################################
# Sample call:
#    download.php?f=phptutorial.zip
#
# Sample call (browser will try to save with new file name):
#    download.php?f=phptutorial.zip&fc=php123tutorial.zip
###############################################################

// Allow direct file download (hotlinking)?
// Empty - allow hotlinking
// If set to nonempty value (Example: example.com) will only allow downloads when referrer contains this text
define('ALLOWED_REFERRER', '');

// Download folder, i.e. folder where you keep all files for download.
// MUST end with slash (i.e. "/" )
define('BASE_DIR','mp3');

// log downloads?  true/false
define('LOG_DOWNLOADS',true);

// log file name
define('LOG_FILE','logs/downloads.log');

// Allowed extensions list in format 'extension' => 'mime type'
// If myme type is set to empty string then script will try to detect mime type 
// itself, which would only work if you have Mimetype or Fileinfo extensions
// installed on server.
$allowed_ext = array (

  // archives
  'zip' => 'application/zip',

  // documents
  'pdf' => 'application/pdf',
  'doc' => 'application/msword',
  'xls' => 'application/vnd.ms-excel',
  'ppt' => 'application/vnd.ms-powerpoint',

  // executables
  'exe' => 'application/octet-stream',

  // images
  'gif' => 'image/gif',
  'png' => 'image/png',
  'jpg' => 'image/jpeg',
  'jpeg' => 'image/jpeg',

  // audio
  'mp3' => 'audio/mpeg',
  'wav' => 'audio/x-wav',

  // video
  'mpeg' => 'video/mpeg',
  'mpg' => 'video/mpeg',
  'mpe' => 'video/mpeg',
  'mov' => 'video/quicktime',
  'avi' => 'video/x-msvideo'
);

####################################################################
###  DO NOT CHANGE BELOW
####################################################################

// If hotlinking not allowed then make hackers think there are some server problems
if (ALLOWED_REFERRER !== ''
&& (!isset($_SERVER['HTTP_REFERER']) || strpos(strtoupper($_SERVER['HTTP_REFERER']),strtoupper(ALLOWED_REFERRER)) === false)
) {
  die("Internal server error. Please contact system administrator.");
}

// Make sure program execution doesn't time out
// Set maximum script execution time in seconds (0 means no limit)
set_time_limit(0);

if (!isset($_GET['f']) || empty($_GET['f'])) {
  die("Please specify file name for download.");
}

// Nullbyte hack fix
if (strpos($_GET['f'], "\0") !== FALSE) die('');

// Get real file name.
// Remove any path info to avoid hacking by adding relative path, etc.
$fname = basename($_GET['f']);

// Check if the file exists
// Check in subfolders too
function find_file ($dirname, $fname, &$file_path) {

  $dir = opendir($dirname);

  while ($file = readdir($dir)) {
    if (empty($file_path) && $file != '.' && $file != '..') {
      if (is_dir($dirname.'/'.$file)) {
        find_file($dirname.'/'.$file, $fname, $file_path);
      }
      else {
        if (file_exists($dirname.'/'.$fname)) {
          $file_path = $dirname.'/'.$fname;
          return;
        }
      }
    }
  }

} // find_file

// get full file path (including subfolders)
$file_path = '';
find_file(BASE_DIR, $fname, $file_path);

if (!is_file($file_path)) {
  die("File does not exist. Make sure you specified correct file name."); 
}

// file size in bytes
$fsize = filesize($file_path); 

// file extension
$fext = strtolower(substr(strrchr($fname,"."),1));

// check if allowed extension
if (!array_key_exists($fext, $allowed_ext)) {
  die("Not allowed file type."); 
}

// get mime type
if ($allowed_ext[$fext] == '') {
  $mtype = '';
  // mime type is not set, get from server settings
  if (function_exists('mime_content_type')) {
    $mtype = mime_content_type($file_path);
  }
  else if (function_exists('finfo_file')) {
    $finfo = finfo_open(FILEINFO_MIME); // return mime type
    $mtype = finfo_file($finfo, $file_path);
    finfo_close($finfo);  
  }
  if ($mtype == '') {
    $mtype = "application/force-download";
  }
}
else {
  // get mime type defined by admin
  $mtype = $allowed_ext[$fext];
}

// Browser will try to save file with this filename, regardless original filename.
// You can override it if needed.

if (!isset($_GET['fc']) || empty($_GET['fc'])) {
  $asfname = $fname;
}
else {
  // remove some bad chars
  $asfname = str_replace(array('"',"'",'\\','/'), '', $_GET['fc']);
  if ($asfname === '') $asfname = 'NoName';
}

// set headers
header("Pragma: public");
header("Expires: 0");
header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
header("Cache-Control: public");
header("Content-Description: File Transfer");
header("Content-Type: $mtype");
header("Content-Disposition: attachment; filename=\"$asfname\"");
header("Content-Transfer-Encoding: binary");
header("Content-Length: " . $fsize);

// download
// readfile($file_path);
$file = fopen($file_path,"rb");
if ($file) {
  while(!feof($file)) {
    print(fread($file, 1024*8));
    flush();
    if (connection_status()!=0) {
      fclose($file);
      die();
    }
  }
  fclose($file);
}

// log downloads
if (!LOG_DOWNLOADS) die("Not logging downloads");

$f = fopen(LOG_FILE, "a+");
if ($f) {
  fputs($f, date("Y.m.d | H:i:s")." | ".$_SERVER['REMOTE_ADDR']." | ".$fname."\r\n");
  fclose($f);
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T17:17:59.230

### 可能有几件事是错误的：

*   你有这个文件的权限吗？- 确保您对该文件的 chmod 设置允许**服务器**具有**读/写**权限。一般来说，它是`755`或`777`类似的。
*   文件夹/文件是否存在？- 应该相当简单，检查文件夹是否实际存在于您认为的位置。它应该**与访问它的 PHP 脚本位于同一文件夹中**。
*   您的主机是否禁用了文件相关操作？- 查阅 GoDaddy 的手册和文档，如果一切都失败了，请联系他们的支持人员。

### 帮助您确定问题的事项：

*   启用错误报告。- 在 PHP 页面顶部调用`error_reporting(E_ALL);`将显示您可能从脚本中获得的任何错误/警告/通知。像 GoDaddy 这样的主机通常默认禁用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T17:11:55.630

您的网络服务器中有“日志”文件夹吗？如果这样做，请检查其权限。如果不是 755，请将其设置为 755。如果您没有日志文件夹，则只需创建一个。

我以前遇到过类似的问题，通常原因是服务器中不存在该目录。

**编辑：** 你可以试试：

```
file_put_contents('logs/test.log','nothing is wrong'); 
```

如果文件出现并且已成功写入，那么我建议您更新代码以改用该函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T17:12:18.490

您可能需要将文件 chmod 为 755 或类似的内容。

# c++ - Gtkmm - 固定窗口的位置？

> ID：12341111
> 
> 赞同：1
> 
> 时间：2012-09-09T17:10:44.350
> 
> 标签：c++, user-interface, gtkmm

有没有一种防止窗口在 gtkmm 中移动的好方法？

起初我试图通过重载 on_configure_event （强制将窗口移动到固定位置）来做到这一点，但这会在调整窗口大小时导致一些奇怪的图形故障和巨大的减速。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T18:37:01.717

窗口位置通常是窗口管理器的职责，而不是应用程序的职责。您正在与系统作斗争，因此会出现故障。

我的建议是：不要这样做。用户应该能够移动窗口。

如果你*真的*需要这个，最好的办法是告诉窗口管理器不要管理你的窗口，然后自己做你仍然需要的管理任务（例如调整窗口大小）。

有关详细信息，请参阅 的函数`gtk_window_set_decorated()`和`GTK_WINDOW_POPUP`参数`gtk_window_new()`。

# c - 无法将指针传递给 scanf("%s",ptr);

> ID：12341113
> 
> 赞同：2
> 
> 时间：2012-09-09T17:10:52.243
> 
> 标签：c, string, pointers, scanf

所以我注释掉了scanf部分（并且只是用我自己的字符串初始化它），如果我使用scanf为什么它会崩溃？我相信我在 scanf(); 中提出的实际论点；是正确的。

```
#include <stdio.h>
#include <stdlib.h>
int strendmilan(char *s,char *t)
{
    int scntr = 0,tcntr = 0;
    while(*(s+(scntr++)) != '\0')
        ;
    --scntr;
    while(*(t+(tcntr++)) != '\0')
        ;
    --tcntr;
    while(tcntr >= 0)
        if(*(s+scntr--) == *(t+tcntr--))
            ;
        else
            return 0;
    return 1;
}
int main()
{
    char *s,*t; 
    /*
    scanf("%s",s);
    scanf("%s",t);
    */
    s = "HAHAHACOOL";
    t = "COOL";
    if(strendmilan(s,t) == 0)
        printf("NOT");
    else
        printf("YES");
    getch();
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-09T17:12:34.213

问题是您正在发送`scanf()`一个指向缓冲区（例如，`s`）的指针，它可以存储读取的信息，*但是*您没有分配任何指向的缓冲区空间`s`（对于`t`）

```
char *s,*t; 
scanf("%s",s); 
```

因此，您可以为 分配一个 char 数组`s`，或者使用`malloc()`分配一些存储空间并将该调用的返回值分配给`s`.

# php - ZF2：如何从数据库中获取下拉选项

> ID：12341114
> 
> 赞同：3
> 
> 时间：2012-09-09T17:11:11.363
> 
> 标签：php, zend-framework2

我按照[教程](http://framework.zend.com/manual/2.0/en/user-guide/forms-and-actions.html)。但是我找不到像这样从数据库中填充表单选择的方法：

```
// Blog/src/Blog/Form/BlogItemForm.php
$blogCategoryTable = new Model\BlogCategoryTable;
$this->add(new Element\Select('category_id',
    array('label' => 'Category', 'value_options' => $blogCategoryTable->getFormChoices())
    )); 
```

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T08:26:47.003

我使用一个函数来检索数据并将其设置为表单：

**从我的工厂：**

```
 $option_for_select = $this->model->getWhatEver();
    $this->add($factory->createElement(array(
        'name' => 'what_ever',
        'type' => 'Zend\Form\Element\Select',
        'attributes' => array(
            'options' => $option_for_select,
        ),
        'options' => array(
            'label' => 'What ever:',
        ),
    ))); 
```

**从模型：**

```
public function getWhatEver()
{
    $sql = "SELECT something";
    $statement = $this->adapter->query($sql);
    $res =  $statement->execute();

    // set the first option
    $rows[0] = array (
        'value' => '0',
        'label' => 'Top',
        'selected' => TRUE,
        'disabled' => FALSE
    );

    foreach ($res as $row) {
        $rows[$row['triplet_id']] = array (
            'value' => $row['col1'],
            'label' => $row['col2'],
        );
    }
    return $rows;
} 
```

# php - 不适用于 RSS Feed 中的附件

> ID：12341118
> 
> 赞同：2
> 
> 时间：2012-09-09T17:11:42.030
> 
> 标签：php, rss

我的机箱有问题，我无法从包括机箱在内的各个网站读取图像

我使用的代码是：

```
<?php
  $doc = new DOMDocument();
  $doc->load('http://www.example.com/feed/rss1.rss');
  $arrFeeds = array();
  $cnt=0;
  foreach ($doc->getElementsByTagName('item') as $node) {
      if($cnt == 5 ) {
       break;
     } 
    $itemRSS = array ( 
      'title' => $node->getElementsByTagName('title')->item(0)->nodeValue,
      'desc' => $node->getElementsByTagName('description')->item(0)->nodeValue,
      'link' => $node->getElementsByTagName('link')->item(0)->nodeValue,
      'date' => $node->getElementsByTagName('pubDate')->item(0)->nodeValue,
      'enclosure' => $node->getElementsByTagName('enclosure')->item(0)->nodeValue
      );
      $cnt++;
?>

<h2><a href="<?php echo $itemRSS['link']; ?>"><?php echo $itemRSS['title']; ?></a></h2>
<p><?php echo $itemRSS['desc']; ?></p>
<img src="<?php echo $itemRSS['enclosure']; ?>">
<?php  } ?> 
```

你能告诉我哪里错了吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T17:20:56.013

附件标签不包含作为值的 url，它位于“url”属性中。尝试这样的事情：

```
 'enclosure' => $node->getElementsByTagName('enclosure')->item(0)->getAttribute('url') 
```

# multidimensional-array - 无法使用（尝试索引字段'？'（零值））索引二维数组

> ID：12341119
> 
> 赞同：0
> 
> 时间：2012-09-09T17:11:42.720
> 
> 标签：multidimensional-array, indexing, lua, coronasdk

我在 lua 中设置了 2 个不同的 2d 数组。第一个循环

```
bubbleMat = {}                              --Set Up Table called bubbleMat
for i = 1, 10 do
    bubbleMat[i] = {}                           --1D table with 10 components

    for j = 1, 13 do
        bubbleMat[i][j] = bubbleClass.new( (i*62) - 62, (j*62) - 62 )   --2D Table with 10x13 Matrix each cell given a coordinate as it is iterated through the loop
    end
end 
```

有了这个数组，我可以将数组中任何位置的值打印到控制台

```
print(bubbleMat[x][y]) 
```

对于任意数量的 x 和 y

由于某种原因，第二个数组不起作用。第二个数组如下

```
 bubbleMat = {}                             --Set Up Table called     bubbleMat
for j = 1, 13 do
    for i = 1, 10 do
        bubbleMat[i] = {}
        --bubbleMat[i][j] = {}
            if j%2 == 0 then
                bubbleMat[i][j] = bubbleClass.new( (i*62) - 31, (j*62) - 62 )
            else
                bubbleMat[i][j] = bubbleClass.new( (i*62) - 62, (j*62) - 62 )
            end
    end
end

print(bubbleMat) 
```

我不确定为什么我不能索引第二个数组

这是我在控制台中遇到的以下错误

```
 attempt to index field '?' (a nil value) 
```

提前感谢您的帮助。

基本上我想以以下模式显示存储在二维数组中的气泡网格

```
0   0    0    0    0    0    0    0    0    0
  0    0    0    0    0    0    0    0    0 
```

而不是让下一行中的气泡直接位于下方

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T17:30:03.957

循环`for j`在外面，循环`for i`在里面。这不一定是错误的，但不寻常。

但是，在最里面的循环中`bubbleMat[i]`被初始化`{}`，这显然是错误的。

要么将该初始化移动到最外层循环，要么使用以下语法：

```
bubbleMat[i] = bubbleMat[i] or {} 
```

# android - 查询数据库表最大数失败

> ID：12341124
> 
> 赞同：0
> 
> 时间：2012-09-09T17:12:09.523
> 
> 标签：android, database, sqlite, max

我正在尝试查询我的数据库以在我的区域表中查找最大“区域编号”以进行某种检查，但未成功，以便我可以将表单中的文本设置为下一个区域编号。

数据库表由四列组成；_id、inpsection_link、area_number、area-reference。

我在我的数据库助手类中创建了以下内容（使用这篇文章作为指南：[SQLiteDatabase.query 方法](https://stackoverflow.com/questions/10600670/sqlitedatabase-query-method)）：

```
 public int selectMaxAreaNumber (long inspectionId) {
    String inspectionIdString = String.valueOf(inspectionId);
    String[] tableColumns = new String[] { 
            AREA_NUMBER, 
            "(SELECT max(" + AREA_NUMBER + ") FROM " + AREAS_TABLE + ") AS max" 
        }; 
    String whereClause = INSPECTION_LINK + " = ?";
    String[] whereArgs = new String[] {
            inspectionIdString          
        };
    Cursor c = rmDb.query(AREAS_TABLE, tableColumns, whereClause, whereArgs, 
            null, null, null);
    int maxAreaNumber = c.getColumnIndex("max");
    return maxAreaNumber;
} 
```

然后我在 areaEdit 类中调用如下：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    rmDbHelper = new RMDbAdapter(this);
    rmDbHelper.open();
    Intent i = getIntent();
    inspectionId = i.getLongExtra("Intent_InspectionID", -1);
    areaId = i.getLongExtra("Intent_AreaID", -1);
    if (areaId == -1) {
        nextAreaNumber = rmDbHelper.selectMaxAreaNumber(inspectionId) + 1;
        Toast.makeText(getApplicationContext(), String.valueOf(nextAreaNumber), 
                Toast.LENGTH_LONG).show();  
    }
    setContentView(R.layout.edit_area);
    setUpViews();
    populateFields();
    setTextChangedListeners();
} 
```

但是，它每次只返回 1（即使有比数据库中存储的数字高的数字）。

困惑.com！非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T17:23:30.870

你的问题在这里：

```
int maxAreaNumber = c.getColumnIndex("max"); 
```

您得到的列索引`max`为**1**，因为您的查询中只有一列。相反，做这样的事情：

```
int maxAreaNumber = 0;
if(c.moveToFirst())
{
    maxAreaNumber = c.getInt(1);
    // or cleaner
    maxAreaNumber = c.getInt(c.getColumnIndex("max"));
}
else
    // no data in cursor 
```

# qt - Qt - 这如何使窗口居中

> ID：12341132
> 
> 赞同：0
> 
> 时间：2012-09-09T17:12:40.587
> 
> 标签：qt, position, center

我看到了一个示例，该示例使用以下内容创建一个点，该点将用于将窗口居中`Qt`：

> x = (screenWidth - WIDTH) / 2;
> 
> y = (screenHeight - HEIGHT) / 2;

假设`screenWidth`和`screenHeight`分别使用 的`width()`和`height()`函数找到`QDesktopWidget`。

前面的代码如何使窗口居中？是的，我知道它使窗口居中，但从计算的角度无法理解。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T17:32:26.927

首先计算窗口周围“额外”水平空间的总量：

```
extra_space = screenWidth - your_window_width 
```

现在，在左边和右边展开那个空间：

```
left_space + right_space = extra_space 
```

两边的空间应该是一样的：

```
right_space = left_space
==>  2 * left_space = extra_space
==>  2 * left_space = screenWidth - your_window_width
==>  left_space = (screenWidth - your_window_width) / 2 
```

那是你的`x`。`y`坐标也是如此。

# selenium-rc - Selenium：仅提取没有任何子元素的文本

> ID：12341134
> 
> 赞同：2
> 
> 时间：2012-09-09T17:12:56.337
> 
> 标签：selenium-rc

下面是示例代码

```
<p>
I want this Text
<sup> not this </sup>
.(Need this too).
<sup> and not this </sup>
</p> 
```

使用 Selenium RC，selenium.getText("//...") 为我们带来了所有文本，包括 < sup > 中的文本。

有没有办法从`<p>`没有`<sup>`标签的情况下获取文本？

请告诉我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T23:50:11.027

您唯一的选择是获取三个元素的文本并操作您不想要的部分。那，或者诉诸于`getEval()`运行一些获取`<P>`元素`innerHTML`属性的JavaScript，然后自己删除元素内部的`<SUP>`部分。

# octave - 安装 octcdf-1.1.5 时出错

> ID：12341139
> 
> 赞同：1
> 
> 时间：2012-09-09T17:13:46.943
> 
> 标签：octave, netcdf

我的 Mac 中有：

*   Octave-3.4.0
*   Gnuplot 4.2 - 我必须安装，因为我在绘图时遇到问题 - 它根本不会绘图。

我需要加载一个 netcdf 文件，出现的错误是：

```
nc = netcdf('/users/matheuscortezi/Desktop/Pcse005/ocean_avg.nc', 'r')
error: `netcdf' undefined near line 9 column 6 
```

所以我认为我没有安装 netcdf 命令，并尝试通过在 octave 上键入以下内容来安装：

```
pkg install -global -forge octcdf 
```

我从中收到的错误消息是：

```
configure: error: in `/var/tmp/oct-t8XcYD/octcdf/src':
configure: error: C compiler cannot create executables
See `config.log' for more details.
the configure script returned the following error: checking for gcc... /usr/bin/gcc-4.2
checking whether the C compiler works... no
error: called from `pkg>configure_make' in file /Applications/Octave.app/Contents/Resources/share/octave/3.4.0/m/pkg/pkg.m near line 1325, column 9
error: called from:
error:   /Applications/Octave.app/Contents/Resources/share/octave/3.4.0/m/pkg/pkg.m at line 783, column 5
error:   /Applications/Octave.app/Contents/Resources/share/octave/3.4.0/m/pkg/pkg.m at line 354, column 9 
```

我一点也不知道我应该做什么。我怎样才能解决这个问题：

*   修复此错误，或
*   安装一个netcdf“comand pack”（我不知道它的名字），所以我可以使用`netcdf()`给出的例子。

希望我足够清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T18:47:13.193

在我看来，您从 Mac OSX 应用程序包中安装了 Octave。根本不建议这样做。[您应该按照Octave 的 wiki](http://wiki.octave.org/Octave_for_MacOS_X)中的说明从其中一个包管理器进行安装。据我所知，Mac 有 3 个选项（请参阅上一个链接）。只需搜索一个也有 netcdf 包的。

无论如何，如果你真的不想通过包管理器安装它（但在我看来你真的应该），那么你的问题似乎在于`gcc`（GNU C 编译器）。你有没有安装它？一些包具有 C++ 或 C 代码，并且还依赖于一些外部库。

**使用包管理器进行编辑**也可以解决您关于绘图的问题，因为它会同时安装 gnuplot

# php - 如何识别输入php中的单词？

> ID：12341142
> 
> 赞同：0
> 
> 时间：2012-09-09T17:13:57.113
> 
> 标签：php, input, word, identify

我想知道如何识别 php 输入中的特定术语或单词。就像他们写的一样`<script>`，将不允许提交。这样人们就不会入侵我的网站。

所以我需要编写代码来查看输入中是否写入了该术语或单词。我的意思是，如果输入是`jkgdknf <script> iofosef`我希望程序不允许该人提交该输入。

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T17:16:03.470

最简单的方法是[strip_tags()](http://uk.php.net/strip_tags)：

```
$string = strip_tags($_POST['input']); 
```

> *此函数尝试返回一个字符串，其中包含从给定 str 中剥离的所有 NUL 字节、HTML 和 PHP 标记。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T17:17:40.737

使用 htmlentities()。见[www.php.net/htmlentities](http://www.php.net/htmlentities)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T17:20:00.003

您可以使用它`htmlspecialchars`来防止您的网站被黑客入侵，同时允许用户输入他们想要的任何内容

# jquery - 点击时增加 ID 中的数字

> ID：12341143
> 
> 赞同：1
> 
> 时间：2012-09-09T17:14:04.500
> 
> 标签：jquery, increment

如果已经回答了这个问题，请给我指出正确的方向，但我试图在每次点击链接时更新链接的 HREF 末尾的数字。

因此，例如，我的链接是`<a class="next" href="#slideshow-wrapper0">Next</a>`，每次单击它时，我都希望它将“0”更新为“1”，然后更新为“2”，依此类推。

有任何想法吗？这就是我想出的...

```
$(document).ready(function(){
    var count = 0;
    $("next").click(function(){
       $(".work-main-content").append("<div id='portfolio-slideshow'" + (count++) +">");
    });
}) 
```

干杯，R

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T17:16:33.097

您在添加计数值之前关闭 id 属性

```
$(document).ready(function(){
    var count = 0;
    $("next").click(function(){
       $(".work-main-content").append("<div id='portfolio-slideshow" + (count++) +"' >");
    });
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T17:19:03.037

使用一个对象来跟踪它并增加它。

```
var c = {
   curr : 0,
   incrm: function(){this.curr++}
   }

 $("next").click(function(){
       $(".work-main-content").append("<div id='portfolio-slideshow" + c.curr +"' >");
       //use below to update href or what not
       $("#whatever").attr('href','portfolio-link-number-' + c.curr);
       c.incrm();

    }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-09T17:23:55.047

试试这个：

```
$('.next').click(function(){
    $(this).attr('href', function(){
      var n = this.href.match(/\d+/);
      return '#slideshow-wrapper' + ++n
    })
}) 
```

更新：

```
$('.next').click(function(){
    $(this).attr('href', function(){
      var n = this.href.match(/\d+/);
      if (n > 20) {
          return '#slideshow-wrapper' + ++n 
      } else {
          return '#slideshow-wrapper0'
      }
    })
}) 
```

[http://jsfiddle.net/rV663/](http://jsfiddle.net/rV663/)

# c++ - 插入新项目后如何获取布局的高度？

> ID：12341145
> 
> 赞同：1
> 
> 时间：2012-09-09T17:14:17.413
> 
> 标签：c++, qt, layout

在 Qt 中：

```
QVBoxLayout *layout = (QVBoxLayout*)this->layout();

printf("Before: %d %d\n", this->height(), layout->totalSizeHint().height());

QWidget *widget = new SubWidget();
layout->insertWidget(0, widget);
this->updateGeometry();
this->adjustSize();
this->update();
this->repaint();

printf("After: %d %d %d\n", this->height(), layout->totalSizeHint().height(), widget->height()); 
```

问题是尽管小部件高度非零（在我的情况下约为 400），但我在之前和之后得到相同的数字。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T22:12:22.053

该窗口已经可见，而您插入的小部件尚不可见。布局使它们异步可见（使用`invokeMethod`调用`Qt::QueuedConnection`模式）。

您可以等待通话实际发生，`QApplication::processEvents()`也可以亲自向他们展示：

```
 QWidget *widget = new SubWidget();
 layout->insertWidget(0, widget);
 qApp->processEvents();
 // or
 widget->show(); 
```

# c++ - 在 Linux 上用 C++ 格式化硬盘

> ID：12341147
> 
> 赞同：0
> 
> 时间：2012-09-09T17:14:52.923
> 
> 标签：c++, linux

我正在尝试制作一个格式化硬盘的程序，现在我被我搜索并找到的格式化代码所困扰，`SHFormatDrive()`但我发现win xp及更高版本支持该功能，我无法找到使用它有什么帮助！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-09T17:27:32.193

在 UNIX 中执行此类操作的典型方法是使用库调用系统 (const char*) 调用命令行实用程序来为您执行此操作。

当然，您需要适当的权限等。

当然，另一种方法是找到开源格式代码（例如 mkfs.ext3）并将其添加到您的项目中（当然要遵循许可要求）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-09T20:10:35.780

如果您只是想破坏硬盘驱动器上的文件系统（取消格式化），您可以简单地打开硬盘驱动器设备文件进行写入，然后开始写入零：

```
#include <stdio.h>
int main() {
    char buf[8192];
    FILE *f = fopen("/dev/sda", "w");
    if(f == NULL) {
       perror("Could not open file for writing");
       return;
    }

    long unsigned int written = 0;

    while(true) {
        unsigned count = fwrite(buf, sizeof(buf), 1, f);
        written += count;
        if(count != sizeof(buf) {
            perror("Could not write file");
            break;
        }; 
    }

    fclose(f);

    printf("Bytes written: %lu\n", written);
} 
```

**注意：如果您真的知道自己在做什么，请仅在未修改的版本中使用此代码，因为这可能会使您的根文件系统/计算机无法使用！**

如果您想使用 ext4 或 btrfs 等文件系统实际对其进行格式化，则必须查看那些特定于文件系统的库。您最好从阅读 mkfs.btrfs 或 mkfs.ext4 实用程序的源代码开始，但这项任务肯定不简单。

# python - pygame 图像拒绝加载

> ID：12341148
> 
> 赞同：2
> 
> 时间：2012-09-09T17:14:53.597
> 
> 标签：python, image, pygame

代码：

```
import pygame, sys

def load ():
    image = pygame.image.load ('ShrinSprite.jpg')
    return image, image.get_rect ()

class Sprite (pygame.sprite.Sprite):
    def __init__ (self):
        pygame.sprite.Sprite.__init__ (self)
        self.image, self.rect = load ()

sprite = Sprite ()
allsprites = pygame.sprite.RenderClear ((sprite))

Surface = pygame.display.set_mode ((400, 400), 0, 32)

 while True:
    Surface.fill ((255, 255, 255))
    allsprites.draw (0, 0)

    for event in pygame.event.get ():
        if event.type == QUIT:
            pygame.quit ()
            sys.exit (0)

         if event.type == KEYDOWN:
            allsprites.draw (0, -5)
            allsprites.clear ()

    pygame.display.update () 
```

该错误指出无法加载图像：

```
pygame.error: Could not load 'ShrinSprite.jpg' 
```

虽然图片和程序在同一个目录下，但是还是一直出现这个错误

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T17:50:47.240

This usually happens after you try to enter a command into the shell after running a program. To make it load, simply re-save the program.

Please let me know if this works.

# xml - 使用 XSL、XSLT - 如何重现或打印正在转换的 XML 文档？

> ID：12341153
> 
> 赞同：1
> 
> 时间：2012-09-09T17:15:25.380
> 
> 标签：xml, xslt, transform

如果无法访问 XML 文件或数据，您如何重现 Web 页面正在使用 XSL 转换的 XML 文件的副本？

我可以访问包含 XSL 代码的 xml.config 文件。我找到了输出 XML 文件的所有数据的解决方案，但它没有帮助，因为它是一堵价值墙。它不包含 xml 标签，也不提供节点树。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T17:52:55.587

**使用**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/">
  <xsl:copy-of select="."/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于任何 XML 文档时，例如这个：**

```
<nums>
  <num>01</num>
  <num>02</num>
  <num>03</num>
  <num>04</num>
  <num>05</num>
  <num>06</num>
  <num>07</num>
  <num>08</num>
  <num>09</num>
  <num>10</num>
</nums> 
```

**产生了想要的结果——相同的 XML 文档：**

```
<nums>
   <num>01</num>
   <num>02</num>
   <num>03</num>
   <num>04</num>
   <num>05</num>
   <num>06</num>
   <num>07</num>
   <num>08</num>
   <num>09</num>
   <num>10</num>
</nums> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T18:28:32.577

好吧，如果您只需要查看数据，则可以使用如下简单的方法：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="text" indent="yes"/>

  <xsl:template match="*">
    <xsl:value-of select="concat('&lt;',name())" />
    <xsl:apply-templates select="@*" />
    <xsl:text>&gt;</xsl:text>
    <xsl:apply-templates select="node()"/>
    <xsl:value-of select="concat('&lt;/',name(),'&gt;')" />
  </xsl:template>

  <xsl:template match="@*">
    <xsl:value-of select="concat(' ',name(),'=&quot;',.,'&quot;')" />
  </xsl:template>
</xsl:stylesheet> 
```

这不会输出注释或处理指令，但如果您只需要查看文档的数据和结构就足够了。如果您需要更详细的内容，您可能会找到一个将 XML 文档转换为显示它的网页的 xslt。我有一个正在进行中的工作：http: [//www.flynn1179.net/xml/DisplayXml.xslt](http://www.flynn1179.net/xml/DisplayXml.xslt)。我在我的网站上使用它，但周围可能有更好的东西。

# windows - 按数字对文本文件的内容进行排序

> ID：12341156
> 
> 赞同：3
> 
> 时间：2012-09-09T17:15:55.033
> 
> 标签：windows, batch-file, vbscript

我有一个包含以下数据的文本文件：

> 12、ABCD
> 
> 第2541章
> 
> 4、qwerty
> 
> 13、尤特鲁
> 
> 第345章

如何按数字降序对内容进行排序？最好使用批处理。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T17:51:43.527

不能直接排序。我能想到的唯一批处理解决方案是解析并重新创建每一行，其中的数字以零为前缀，宽度恒定。一旦数字具有固定的宽度，您可以使用 SORT 创建一个新的排序文件，然后再使用一个 FOR /F 去除前导零。

我假设 15 位数对于最大的数字就足够了。此解决方案假定所有数字都是大于 0 的整数。

```
@echo off
set "file=test.txt"
>"%file%.new1" (
  for /f "usebackq tokens=1* delims=," %%A in ("%file%") do (
    set "n=000000000000000%%A"
    set "str=%%B"
    setlocal enableDelayedExpansion
    echo !n:~-15!,!str!
    endlocal
  )
)
>"%file%.new2" sort /r "%file%.new1"
>"%file%" (
  for /f "usebackq tokens=* delims=0" %%A in ("%file%.new2") do echo %%A
)
del "%file%.new?" 
```

如果 0 是原始文件中的值，则必须在最后一步完成额外的工作。如果允许负数，则必须在整个脚本中完成更多工作。

您可以使用 VBScript 或 JavaScript 编写更高效的脚本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-09T23:45:46.770

使用断开连接的[记录集](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681510%28v=vs.85%29.aspx)的 VBScript 示例。不一定需要更少的代码，但*更*容易维护。

```
Const ForReading = 1

Const adInteger = 3
Const adVarChar = 200
Const maxChars  = 255

Const sep = ", "

Set fso = CreateObject("Scripting.FileSystemObject")

Set data = CreateObject("ADOR.Recordset")
data.Fields.Append "num", adInteger
data.Fields.Append "txt", adVarChar, maxChars
data.Open

Set f = fso.OpenTextFile("INPUT.TXT", ForReading)
Do Until f.AtEndOfStream
  values = Split(f.ReadLine, sep, 2)
  data.AddNew
  data("num").Value = CInt(values(0))
  data("txt").Value = values(1)
  data.Update
Loop
f.Close

data.Sort = "num DESC"

data.MoveFirst
Do Until data.EOF
  WScript.Echo data("num") & sep & data("txt")
  data.MoveNext
Loop 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T00:37:11.640

最初我不打算发布这个，因为它似乎重复了 dbenham 的回答，但仔细观察让我意识到它并不完全一样（这意味着我不太了解他的内容）所以这是我的，并且“几乎”同样大小！（好吧！这比他的长三分之一，起诉我。^_^）

```
@echo off
setlocal enabledelayedexpansion
set source=sortme.txt
set tsort=sortme.tmp
set size=0
set zeros=
:: Pass 1
for /f "tokens=1 delims=, " %%x in (sort.txt) do (
   set num=%%x
   call strlen num tsize
   if !tsize! gtr !size! set size=!tsize!
)
for /l %%c in (1,1,%size%) do set zeros=!zeros!0
:: Pass 2
for /f "tokens=1* delims=, " %%x in (sort.txt) do (
  set line=%zeros%%%x
  set line=!line:~-%size%!
  echo !line! %%x, %%y>> sort.tmp
)
endlocal
del sort.txt > nul
:: Pass 3
for /f "tokens=1* delims= " %%x in ('sort /r sort.tmp') do echo %%y>>sort.txt
del sort.tmp > nul 
```

在完成之前，它需要对数据进行三遍，所以它可能会配对一些。

它还利用了来自[DOStips.com的](http://www.dostips.com/DtCodeCmdLib.php#strLen "它很甜，速度很快，而且是一个批处理文件")[STRLEN.BAT](http://www.dostips.com/DtCodeCmdLib.php#strLen)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-10-10T05:35:27.547

[@dbenham 的答案](https://stackoverflow.com/a/12341450/43774)的变体可用于更快地对文件进行排序，完全在内存中，没有任何临时文件，不需要 ，也不需要`sort`更改输入的文本。

需要注意的是，文件必须足够小，以使其内容和该算法保持在 32kb 环境内存限制内（请参阅[环境内存限制](https://superuser.com/a/1070354/15803)）。

同样，正如@dbenham 的回答一样，该算法需要正整数，大小不超过 15 位。

```
:: sort-file.BAT
@setlocal
@echo off
set args=%*
if NOT DEFINED args (echo usage: %~dp0 FILE_TO_SORT & exit /b 1)
::
set file=%~1
for /f "usebackq delims=" %%A in ("%file%") do (
    set line=%%A
    for /f "delims=, tokens=1,*" %%G in ("%%A") do (
        set normalized_number=00000000000000%%G
        call set _line_%%normalized_number:~-15%%=%%line%%
        )
    )
for /f "delims== tokens=1,*" %%A in ( 'set _line_' ) do (
    echo %%B
    )
:: 
```

# python - 创建一个 3D 锥体或圆盘并使用 matplotlib 不断更新其对称轴

> ID：12341159
> 
> 赞同：5
> 
> 时间：2012-09-09T17:16:39.110
> 
> 标签：python, matplotlib, python-2.7

我的意思是圆锥或圆盘以其对称轴移动或旋转。确切地说，我正在创建这个轴，它会随着时间不断变化：

```
line = ax.plot([x,0],[y,0],[z,z- n_o],color='#000066', marker= 'o') 
```

我需要始终垂直于该轴的圆锥面或圆面。我首先尝试了一个更简单的方法，方法是创建一个 2D 圆圈，然后将其提升到我想要的位置：

```
circle = Circle((0, 0), .3, color='r')
ax.add_patch(circle)
art3d.pathpatch_2d_to_3d(circle, z=1) 
```

但这不会使圆的面垂直于移动轴。我想知道 matplotlib 中是否有任何函数可以用来旋转圆锥/圆的那个面？

如果，我从另一种方式开始创建一个 3D 对象，比如一个椭圆体，问题仍然存在：我如何让对象像刚体一样以其对称轴移动（坚持它的轴）而不是挂在那里的灯笼（仅连接到一个固定点）？

```
u, v = np.mgrid[0:2*np.pi:20j, 0:np.pi:10j]
x=np.cos(u)*np.sin(v)
y=np.sin(u)*np.sin(v)
z=.3*np.cos(v)
ax.plot_wireframe(x, y, z, color="r") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T01:27:47.837

```
from mpl_toolkits.mplot3d import Axes3D

def euler_rot(XYZ,phi,theta,psi):
    '''Returns the points XYZ rotated by the given euler angles'''

    ERot = np.array([[np.cos(theta)*np.cos(psi), 
                      -np.cos(phi)*np.sin(psi) + np.sin(phi)*np.sin(theta)*np.cos(psi), 
                      np.sin(phi)*np.sin(psi) + np.cos(phi)*np.sin(theta)*np.cos(psi)],
                     [np.cos(theta)*np.sin(psi), 
                      np.cos(phi)*np.cos(psi) + np.sin(phi)*np.sin(theta)*np.sin(psi),
                      -np.sin(phi)*np.cos(psi) + np.cos(phi)*np.sin(theta)*np.sin(psi)],
                     [-np.sin(theta),
                      np.sin(phi)*np.cos(theta),
                      np.cos(phi)*np.cos(theta)]])

    return ERot.dot(XYZ)

u = np.linspace(0,2*np.pi,50)
num_levels = 10

r0 = 1 # maximum radius of cone
h0 = 5 # height of cone

phi = .5 # aka alpha
theta = .25 # aka beta
psi = 0 # aka gamma

norm = np.array([0,0,h0]).reshape(3,1)
normp = euler_rot(norm,phi,theta,psi)

fig = plt.figure()
ax = fig.add_subplot(111, projection='3d')

ax.plot([0,normp[0]],[0,normp[1]],zs= [0,normp[2]])

x = np.hstack([r0*(1-h)*np.cos(u) for h in linspace(0,1,num_levels)])
y = np.hstack([r0*(1-h)*np.sin(u) for h in linspace(0,1,num_levels)])
z = np.hstack([np.ones(len(u))*h*h0 for h in linspace(0,1,num_levels)])
XYZ = np.vstack([x,y,z])

xp,yp,zp = euler_rot(XYZ,phi,theta,psi) 
ax.plot_wireframe(xp,yp,zp) 
```

[这将在通过欧拉角](https://en.wikipedia.org/wiki/Euler_angles) `phi`, `theta`,旋转后围绕指向 z 轴方向的线绘制一个圆锥`psi`。（在这种情况下`psi`，由于锥体围绕 z 轴轴对称，因此无效）另请参见[旋转矩阵](https://en.wikipedia.org/wiki/Rotation_matrix)。

要绘制一个沿法线移动的圆`h0`：

```
x=r0*np.cos(u)
y=r0*np.sin(u)
z=h0*np.ones(len(x))
XYZ = np.vstack([x,y,z])    
xp,yp,zp = euler_rot(XYZ,phi,theta,psi) 
ax.plot(xp,yp,zs=zp) 
```

从给定的向量中获取欧拉角作为练习。

`euler_rot`在一个[要点](https://gist.github.com/3970893)

# objective-c - Positioning an element within its superview

> ID：12341162
> 
> 赞同：1
> 
> 时间：2012-09-09T17:16:58.683
> 
> 标签：objective-c, xcode, macos, cocoa, nsview

So, this is my case :

*   One `NSBox`
*   Inside this, there is an `NSTextField`

What I want to do is :

*   Programmatically manage to position the textField in the box (e.g. top left, top right, center, etc).

I've tried doing it with `NSTextField`'s `bounds` or `frame`, but I don't think I can make it...

Any ideas?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T17:27:47.067

If I understood your question correctly, do you just want to make sure the NSTextField is always in the top left, center, or whatever, when the view is resized? If so, then you can use struts and springs for that. If you just want to move the text field, then changing the frame should work. Ex, if you have a text field called *foo*, you can set the whole frame:

```
[foo setFrame: CGRectMake(desiredX,desiredY,foo.bounds.size.width,foo.bounds.size.height)]; 
```

or just its origin (effectively repositioning it):

```
[foo setFrameOrigin: CGPointMake(desiredX, desiredY)]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T19:52:56.400

For interest's sake, there is also a minilanguage for positioning in Cocoa called [Visual Format Language](http://developer.apple.com/library/mac/#documentation/UserExperience/Conceptual/AutolayoutPG/Articles/formatLanguage.html). It lets you specify relationships such as:

```
|-50-[orchidBox]-50-| 
```

Which means the child element should be indented 50px from it's superview on each side.

# android - Android提供的加速度计传感器的精度

> ID：12341163
> 
> 赞同：0
> 
> 时间：2012-09-09T17:17:17.260
> 
> 标签：android, position, accelerometer

我必须找出/跟踪一个在商场里移动的盲人的位置。我可以使用 Android 提供的加速度计传感器吗？

它可靠吗？关于它的准确性有什么说法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T17:37:29.577

不，加速度计不够准确，请参阅我之前在[Android 加速度计精度（惯性导航）](https://stackoverflow.com/a/7835988/341970)中的回答。

这个问题经常出人意料地弹出，例如，请参阅[由 Accelerometer 移动的距离以](https://stackoverflow.com/a/6648538/341970)获取类似问题的集合。

# jquery - 使用 JQuery 克隆从 JSON 数组填充表单字段

> ID：12341168
> 
> 赞同：0
> 
> 时间：2012-09-09T17:17:48.013
> 
> 标签：jquery, json

我已经在以下链接中实现了 JQuery 克隆：

[http://jsfiddle.net/sunalive/gqQnJ/13/](http://jsfiddle.net/sunalive/gqQnJ/13/)

相同的事务用于过帐和显示值。我需要显示 JSON 数组（使用 DB 中的 PHP 构建）中的值，该数组具有多行的值。JSON 数组示例如下：

```
 [{"lineNo":"000001","txtLink":"sddf","txtSelect":"2","txtCheck":"X"},
  {"lineNo":"000002","txtLink":"sdfd","txtSelect":"4","txtCheck":""},
  {"lineNo":"000003","txtLink":"frf","txtSelect":"5","txtCheck":"X"}] 
```

在显示相同的同时，该行必须克隆（至于行数）并且值要显示在适当的字段中。我不会知道字段的名称或 JSON 数组中的内容，因为所有内容都是在运行时动态生成的。但是，字段名称将在我的表单中（在克隆行中）使用符号*item['fieldname'][] ，其中**fieldname =* JSON 数组中的键。

我能够成功克隆如下 itemarr 保存 JSON 数组的行。

```
 $(itemarr).each(function(index){ 
     $('.gridcontainer').append(emptyItems.clone());

  } 
```

但我不知道如何使用动态克隆将值显示到表单字段中。

谁能帮我实现这一目标？感谢您的时间和帮助。

**更新：**我找到了我的解决方案（感谢 Andreas！），以下链接中提供了相同的解决方案：

[http://jsfiddle.net/gqQnJ/27/](http://jsfiddle.net/gqQnJ/27/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T17:40:41.850

```
<table id="grid">
    <tr id="emptyItems" style="display:none">
        <td><input type="text" name="item['a'][]" /></td>
        <td><input type="text" name="item['b'][]" /></td>
        <td><input type="text" name="item['c'][]" /></td>
    </tr>
</table> 
```

.

```
var rows = [
    { "a": 1.1, "b": 1.2, "c": 1.3 },
    { "a": 2.1, "b": 2.2, "c": 2.3 },
    { "a": 3.1, "b": 3.2, "c": 3.3 }
];

$(function() {
    $.each(rows, function(i, row) {
        var newRow = $("#emptyItems").clone().show().appendTo("#grid"),
            inputs = newRow.find("input");

        inputs.each(function() {
            var name = /item\['([^'])'\].*/.exec(this.name)[1];
            this.value = row[name] || "";
        });
    });
}); 
```

[​示例](http://jsfiddle.net/VXRrp/)

# php - 将 DateTime 变量转换为分钟

> ID：12341173
> 
> 赞同：0
> 
> 时间：2012-09-09T17:18:17.190
> 
> 标签：php, date, time

有以下变量：

```
$datetime = '2012-09-09 01:40'; 
```

我需要提取小时和分钟，然后将它们转换为分钟。在这个例子中，我需要得到 100（1 小时 40 分钟 = 60 分钟 + 40 分钟）。如何使用 PHP 函数快速做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T17:25:18.477

不再推荐使用`strtotime()`and函数。`date()`使用[DateTime](http://php.net/manual/en/book.datetime.php)类。

```
$datetime = '2012-09-09 01:40';
$d = new DateTime($datetime);
var_dump( $d->format('G') * 60 + $d->format('i') ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T17:21:17.140

```
$string = '2012-09-09 01:40';
$epoch = strtotime($string);
echo date('i', $epoch) + (60 * date('H', $epoch)); 
```

输出**100**

基本上这里发生的是字符串 date 被转换为[Unix/Epoch time](http://en.wikipedia.org/wiki/Unix_time)。然后，使用[`date()`](http://php.net/manual/en/function.date.php)它将分钟数 (i) 添加到小时数 (h) 的 60 倍。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T17:21:43.307

```
$datetime = strtotime('2012-09-09 01:40');
$hour = date('H',$datetime);
$min = date('i',$datetime);
echo ($hour*60 + $min); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T17:42:11.067

你可以`preg_split`这样使用：

```
$parts=preg_split("/(\d\d):(\d\d)/",$datetime,-1,PREG_SPLIT_DELIM_CAPTURE);
$mins=($parts[1]*60)+$parts[2]; 
```

现在 $mins=100 when`$datetime`就像你的帖子一样

# java - 为什么这个损坏的程序总是运行？

> ID：12341174
> 
> 赞同：2
> 
> 时间：2012-09-09T17:18:26.150
> 
> 标签：java, multithreading, static, thread-safety

我正在尝试来自 JCIP 的示例，并且下面的程序不应该工作，但即使我执行它说 20 次它总是工作，这意味着`ready`并且`number`正在变得可见，即使它应该在这种情况下

```
public class NoVisibility {
private static boolean ready;
private static int number;

private static class ReaderThread implements Runnable {
    public void run() {
        while (!ready)
            Thread.yield();
        System.out.println(number);
    }
}

public static void main(String[] args) {
    System.out.println(Runtime.getRuntime().availableProcessors());
    //Number of Processor is 4 so 4+1 threads
    new Thread(new ReaderThread()).start();
    new Thread(new ReaderThread()).start();
    new Thread(new ReaderThread()).start();
    new Thread(new ReaderThread()).start();
    new Thread(new ReaderThread()).start();

    number = 42;
    ready = true;
}
} 
```

在我的机器上它总是打印

```
4 -- Number of Processors
42
42
42
42
42 
```

`According to Listing 3.1 of JCIP It should sometimes print 0 or should never terminate it also suggest that there is no gaurantee that ready and number written by main thread will be visible to reader thread`

**更新** 我在所有线程分层后在主线程中添加了 1000ms 睡眠仍然相同的输出。**我知道程序坏了我希望它会这样**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T17:28:40.243

该程序已损坏`ready`，`number`应声明为`volatile`.
由于`ready`和`number`是原始变量，对它们的操作是原子的，**但****不能**保证它们对其他线程可见。
调度程序似乎在*之后* `main`运行线程，这就是他们看到并被初始化的`number`原因`ready`。但这只是一种安排。
如果您添加例如一个`sleep`in`main`以影响调度程序，您将看到不同的结果。
所以这本书是正确的，不能保证是否`Runnable`在单独的线程中运行的 s 将永远看到变量正在更新，因为变量未声明为`volatile`.

**更新：**
这里的问题是，由于缺乏`volatile`编译器，只能自由读取该字段`ready`一次，并在每次执行循环时重用缓存值。
该程序本质上是有缺陷的。当您将应用程序部署到现场时，通常会出现线程问题......来自[JSL](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.3)：

> 例如，在以下（损坏的）代码片段中，假设 this.done 是一个非易失性布尔字段：
> 
> while (!this.done)
> Thread.sleep(1000);
> 
> 编译器可以自由地读取 this.done 字段一次，并在每次执行循环时重用缓存的值。这意味着循环永远不会终止，即使其他线程更改了 this.done 的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T20:10:53.830

需要记住的重要一点是，一个损坏的并发程序可能总是与 JVM 的选项、机器架构等的正确组合一起工作。这并不能使它成为一个好的程序，因为它可能会在不同的上下文中失败：事实上没有出现并发问题并不意味着没有。

换句话说，您无法通过测试证明并发程序是正确的。

回到您的具体示例，我看到与您描述的行为相同的行为。但是，如果我删除`Thread.yield()`while 循环中的指令，则 8 个线程中有 3 个会停止并打印 42，但其余的不会，并且程序永远不会结束。

# javascript - 在模板中重新加载嵌入的 javascript (Grails)

> ID：12341175
> 
> 赞同：1
> 
> 时间：2012-09-09T17:18:28.873
> 
> 标签：javascript, jquery, grails

好吧，我在 grails 的模板中加载了 .js 中的（jquery）javascript，它第一次加载到模板中，并且脚本运行良好，但是一旦我点击按钮更改模板中的内容，javascript 不会'不重新加载，但是一旦我将 javascript 直接嵌入到模板中，它就可以正常加载，但是一旦我将它放回 .js 中，它就不会再次加载。有什么建议吗？

它是这样工作的：

```
<g:javascript>

   code code

</g:javascript> 
```

但如果我使用它就不能再工作了：

```
 <script src="${resource(dir:'js',file:'hoverInfo.js')}" type="text/javascript" charset="utf-8"></script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T19:05:43.317

*一旦我点击按钮更改模板中的内容*......

您是通过remoteLink/ajax 重新加载整个页面还是仅重新加载一部分？

我猜在第二种情况下，浏览器注意到它已经加载了 js-source 并且不会重新加载它 - 因此不会再次执行它......

我猜你将不得不使用 onSuccess 事件再次执行脚本......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T19:16:03.460

仔细检查 javascript 源文件的位置，加载页面时可能会有所不同。因此，进入你的萤火虫的网络标签并检查浏览器是否在按下你的ajax按钮时告诉你404。

# asp.net-mvc - 从控制器 asp.net mvc 获取操作内容

> ID：12341180
> 
> 赞同：0
> 
> 时间：2012-09-09T17:19:29.950
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我有以下情况。

我有网络服务区和两个控制器

1.  用户控制器 - 具有`[HTTPPost]`命名的属性操作`GetUserProfile(string tokenkey)`返回一些 JSON
2.  TestWebService 控制器 - 具有名为`GetUserProfile(string tokenkey)`*same的操作

现在我想`User->GetUserProfile`从`TestWebService`控制器调用，我想在`TestWebService`控制器中的操作中使用 JSON 结果

*注意：为了更容易理解：-`TestWebService`控制器用于测试网络服务，我正在使用`ASP.net MVC 4`

`RedirectToAction`对我没用，因为我也想获得结果并发布。

有没有其他的想法，或者我走错路了，

***如果有人找到正确的问题，请编辑我的问题标题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T07:14:18.573

您可以向此控制器操作发送 HTTP 请求。这可以使用[WebClient](http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx)类或.NET 4.5 中引入的新[HttpClient类轻松完成。](http://msdn.microsoft.com/en-us/library/system.net.http.httpclient.aspx)

例如：

```
public ActionResult GetUserProfile(string tokenkey)
{
    using (var client = new HttpClient())
    {
        var requestUri = Url.Action("GetUserProfile", "User", new { area = "WebService" }, "http");
        var content = new FormUrlEncodedContent(
            new[] { new KeyValuePair<string, string>("tokenkey", tokenkey) }
        );
        var response = client.PostAsync(requestUri, content);
        response.Result.EnsureSuccessStatusCode();
        MyViewModel model = response.Result.Content.ReadAsAsync<MyViewModel>().Result;
    }

    ....
} 
```

# .htaccess - 如何使用 mod_rewrite 避免此错误？

> ID：12341182
> 
> 赞同：1
> 
> 时间：2012-09-09T17:19:46.743
> 
> 标签：.htaccess, mod-rewrite

我有一个在 Windows 上的 XAMPP 上运行的站点。该站点的根目录位于 localhost/sitename/。

我使用 .htaccess 和 mod_rewrite 使 index.php?app=appname 出现在 sitename/appname/ 或 sitename/appname 中。

当我通过站点名称/应用程序名称（不带斜杠）访问应用程序时，一切都很好。浏览器在 sitename/assets/.. 中找到我的图像和 css，因为它们是相对于当前页面找到的。

问题是，当我通过 sitename/appname/（带有斜杠）访问应用程序时，浏览器找不到我的 assets 文件夹，因为它现在正试图在 sitename/appname/assets/ 中查找。

如果不重写资产文件夹，我该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T18:49:05.167

> 问题是，当我通过 sitename/appname/（带有斜杠）访问应用程序时，浏览器找不到我的 assets 文件夹，因为它现在正试图在 sitename/appname/assets/ 中查找。

尾部斜杠正在更改您的相对 URI 的基础。如果不使用 mod_rewrite voodoo 来解决此问题，您需要使用`<base>`标签在页面标题中添加正确的基础：

```
<base href="/sitename/appname/"> 
```

或任何适当的基础应该是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T18:03:02.867

我猜如果没有斜杠，您的浏览器会认为当前目录是`/sitename/`，而如果使用斜杠，您的浏览器会认为当前目录是`/sitename/appname/`.

因此，任何具有相对路径（不以正斜杠开头）的资产（例如）`"assets/image.png"`都将被假定为基于当前目录。要解决此问题，您可以将所有资产路径更改为锚定到根的绝对路径，方法是使用正斜杠开始路径，因此前面的示例将变为`"/sitename/assets/image.png"`. 但我认为，尽管您希望避免重写资产路径，但以下内容更简单：

```
RewriteRule ^/sitename/appname/assets/(.+)$ /sitename/assets/$1 
```

这将捕获对不存在路径的任何丢失请求，`appname/assets`并将它们引用到正确的`/sitename/assets`路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T06:48:51.150

查看在 index.php 上查看地址为 www.example.com/permalink-to-post/ 的帖子时 WordPress 如何处理此问题，似乎最好的答案是对所有链接、图像和 CSS 使用绝对文件路径。

在这种情况下，到 /assets/ 文件夹的每个链接都应该是`http://localhost/sitename/assets/`. （直到该站点位于实时 Web 服务器上）

# php - 自定义错误处理程序来处理对象代码内部和外部的错误

> ID：12341190
> 
> 赞同：1
> 
> 时间：2012-09-09T17:20:28.630
> 
> 标签：php, oop, error-handling, procedural-programming

我知道 Stackoverflow 上已经有很多与自定义错误处理程序相关的问题。但是，在阅读了其中的许多内容以及 PHP 手册之后，我仍然无法解决我的问题。因此，我发布了这个问题。

我的脚本目前的结构是这样的：

```
require 'file.php';
require 'anotherFile.php';
// several more "require" here. These files contain many functions

function myErrorHandler($errno, $errstr, $errfile, $errline, $errcontext){
    // some code to handle errors here

}

class myObject {
    function __construct() {
        // set the values here
    }

    function computeSomething() {
        ...
        doFunction2();
        ...
    }

    function SomethingBadHappened()
    {
    }
}

function doFunction1() {
    // for some reason, an error happens here
    // it is properly handled by the current error handler
}

function doFunction2() {
    // for some reason, an error happens here
    // since it got called by $obj, I want the error handler to run $obj->SomethingBadHappened();
    // but $obj is not known in myErrorHandler function!
}

set_error_handler('myErrorHandler');

// some procedural code here
doFunction1();
doAnotherThing();

// then I use objects
$obj = new myObject();
$obj->run();

// then I may use procedural code again
doSomethingElse(); 
```

我的自定义错误处理程序**已经**正常工作。它捕获并处理设置错误处理程序后执行的代码中发生的所有 PHP 错误。

## 我的问题：

如果在类的方法中发生错误`myObject`，我想调用一个非静态方法：

```
$obj->SomethingBadHappened(); 
```

`$obj`不在范围内`myErrorHandler`。如何访问`$obj`错误处理程序内部以调用的成员函数`$obj`？
我目前有 300KB 的 PHP 代码，我无法更改所有函数的签名以添加`$obj`为参数（函数太多了！）。

我读到可以将自定义错误处理程序定义为对象的方法。但是，如果我这样做，它将无法捕获在创建`myObject`($obj) 的实例之前发生的错误。

我还阅读了有关异常的信息，但这似乎无助于解决我的问题。我不愿意使用全局变量。这里有两个问题解释了为什么应该避免使用全局变量：

*   [PHP 全局函数](https://stackoverflow.com/questions/5166087/php-global-in-functions)
*   [谁需要单身人士？](https://stackoverflow.com/questions/4595964/who-needs-singletons)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T12:11:21.783

一个有趣的问题，似乎没有人想跳，所以我会给你我的 2 美分，一切都符合 IMO 的要求......

错误处理是关于以某种用户友好的方式整齐地处理错误结束向最终用户报告，并可能为应用程序支持奠定内部取证。一般来说，它应该尝试公开或解释应用程序上下文——这太难了，而且本质上是特定于上下文的，所以你最终会打开一堆蠕虫。

如果您想在上下文中分层处理错误，那么您现在已经真正进入了异常和异常处理的世界，这是一个完全不同的运行时模型。在这里，您可以捕获——原则上——处理应用程序异常并保留对象上下文，但这可能难以实现，而且我想不出任何标准模式可以在这里有所帮助。

如果`$obj`是单例（并且您愿意考虑使用单例模板），那么这将允许您做您想做的事。

另一方面，如果您想要的只是一些可用的有限上下文，例如“处理客户记录 XXXX”，那么为什么不使用处理程序的静态方法和另一个注册方法来将错误处理程序封装在一个类中来注册假定的上下文，或者甚至注册回调，这将允许您注册特定于对象的方法来提供此上下文？当然，您需要非常小心地使用类/对象函数来验证任何已注册的回调是否仍在有效范围内，以避免潜在的嵌套错误，但这种框架可以变得可行。

# Jocelyn 反馈后的脚注

我理解赞成和反对单身人士的论点，这就是为什么我自己不使用它们，并且在我最初的回答中也弃用了它们。然而，当小心使用时，它们确实提供了一些优势，这就是为什么一些同类最佳的应用程序（如 MediaWiki 引擎）仍然使用它们的原因。PHP 范围的约束仍然存在。`$someObject->method()`要从另一个类或函数调用，它*必须*在调用函数的范围内。根本没有办法解决这个问题。所以你有一些选择：

*   *如果*在任何时候只有一个`someClass`active 对象，那么您可以通过多种方法将 this 置于全局范围内，最简单的是将对象复制到某个全局变量，或者使用静态方法返回 this（所有这些无论如何，经典的单例`someClass::get()`方法都可以。

*   另一方面，如果您有多个可以假定在范围内的对象，那么是的，您可以将对象作为参数传递，但绝对没有必要这样做。您可以使用 push 方法将这些注册到错误处理程序中。一个示例实现是使用 4 个静态方法和一个静态私有变量创建错误处理程序类：

    *   **我的错误处理程序（）**。您描述的错误处理程序，但现在是静态类方法。

    *   **初始化错误处理程序（）**。你调用它来注册上面的静态方法。

    *   **registerClassCallback($callback)**，其中 $callback 是标准`array($obj,'method')`参数。

    *   **unregisterClassCallback($callback)**，其中 $callback 是相同的`array($obj,'method')`参数。

    *   **$registeredCallbacks**。`registerClassCallback()`添加和删​​除的已注册回调的私有数组`unregisterClassCallback()`。`myErrorHandler()`可以简单地对此使用进行 foreach`class_exists()`并`method_exists()`在调用它之前验证每个注册的回调是否仍在范围内。

这将满足您的要求。请记住，在 php 中，对变量的对象赋值实际上是对象的句柄。您可以将对象（句柄）复制到任何变量上下文。这不会复制或深复制底层对象。它实际上是一个引用（尽管在语义上与真正的 PHP 对象引用略有不同——但这是一个不同的问答）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T17:00:37.127

我最终决定了这个设计：

*   我当前的错误处理程序保持不变（函数`myErrorHandler`）。它保存发生错误时要执行的代码（代码中的任何位置）
*   在类中`myObject`我添加了另一个错误处理程序（函数`myObject_error_handler`）
*   的构造函数`myObject`注册新的错误处理程序
*   该函数`myObject_error_handler`现在可以调用该函数`SomethingBadHappened`，然后调用`myErrorHandler`以处理错误

这样做的主要好处是它需要对现有代码进行很少的更改：

*   我班上的一种新方法
*   在构造函数中注册新的错误处理程序
*   从新的错误处理程序调用旧的错误处理程序

新代码是：

```
require 'file.php';
require 'anotherFile.php';
// several more "require" here. These files contain many functions

function myErrorHandler($errno, $errstr, $errfile, $errline, $errcontext) {
    // some code to handle errors here

}

class myObject {
    function __construct() {
        // set the values here

        // register another error handler
        set_error_handler(array($this, 'myObject_error_handler'));
    }

    function myObject_error_handler($errno, $errstr, $errfile, $errline, $errcontext) {
        // call any number of methods of the current class
        $this->SomethingBadHappened();

        // then call the other error handler
        myErrorHandler($errno, $errstr, $errfile, $errline, $errcontext);
    }

    function computeSomething() {
        ...
        doFunction2();
        ...
    }

    function SomethingBadHappened() {
        // does something when an error happens
    }
}

function doFunction1() {
    // for some reason, an error happens here
    // it is properly handled by the current error handler
}

function doFunction2() {
    // for some reason, an error happens here
    // now the function myObject_error_handler will be called automatically
}

set_error_handler('myErrorHandler');

// some procedural code here
doFunction1();
doAnotherThing();

// then I use objects
$obj = new myObject();
$obj->run();

// then I may use procedural code again
set_error_handler('myErrorHandler');
doSomethingElse(); 
```

# php - 使用 formdata.php 创建一个简单的表单。不显示值。而是一个空白页面。如何解决？

> ID：12341191
> 
> 赞同：2
> 
> 时间：2012-09-09T17:20:28.573
> 
> 标签：php, html, forms

我是新手，正在学习使用 formdata.php 创建一个简单的表单。问题是当我填写密码并单击表单下方的图像按钮时，我得到一个空白页面。

这里有什么问题？

这是form.html：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Forms</title>
</head>
<body>
<form action="formdata.php" method="GET" name="form">
<fieldset>
<legend>Put your bio</legend>
<p><label>type your name: <input type="text" name="name" size="30" maxlength="10"><label></p>
<p><label>type your pass: <input type="text" name="password" size="30" maxlength="10"><label></p>
</fieldset>
<fieldset>
<legend>Common</legend>
<p>Do you like flowers?</p>
<p><label>Yes<input type="radio" name="time" value="yes" checked><label> <label>No<input type="radio" name="time" value="no"><label></p>
<p>what tools do you use to save time?</p>
<p> 
<label><input type="checkbox" name="diary" checked>Diary</label>
<label><input type="checkbox" name="chrono" disabled>Chrono</label>
<label><input type="checkbox" name="own">Own tools</label>
</fieldset>
<p>
<label for="sleep">how much time do you sleep?<label for="text">
</p>
<p>
<select name="sleep" size="5" multiple id="sleep">
<option>5</option> 
<option>6</option>
<option selected>7</option>
<option>8</option>
</select>
</p>
<p><label for="text">Share your experience:</label></p>
<p><textarea name="text" cols="30" rows="6" id="text">wow!</textarea></p>

<p><input type="reset" name="reset" value="clear"><input type="submit" name="submit" value="Go"></p>
<p><input type="image" img src="images/ibutton.png" name="imagebutton"></p>
<p><input type="button" name="button" value="oops"></p>
</form>
</body>
</html> 
```

这是formdata.php：

```
<?php

echo $_GET['password'];

?> 
```

Form.html 和 formdata.php 位于同一文件夹中。Denwer 服务器启动并运行，说没问题。浏览器中的信息如下所示：

C:/WebServers/home/html.loc/www/formdata.php? name=&password=12345&time=yes&diary=on&sleep=7&text=wow!&imagebutton.x=84&imagebutton.y=34

我应该在页面上得到“12345”，但只是一个空页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T17:36:33.180

地址栏中显示的 URL

```
C:/WebServers/home/html.loc/www/formdata.php? name=&password=12345&time=yes&diary=on&sleep=7&text=wow!&imagebutton.x=84&imagebutton.y=34 
```

证明您是通过文件系统访问 PHP 文件，而不是通过 Web 服务器访问它。

您必须使用 URL 访问它，例如`http://localhost/form.html`
当表单提交时，它将重定向到`http://localhost/formdata.php`并且网络服务器将处理 PHP 代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T17:27:30.157

您应该像`http://site.com/formdata.php?password=12345&...` 我认为的那样访问您的网站，原因是当您尝试使用绝对地址打开网页时，浏览器使用文件协议并直接从磁盘读取数据。由于这不是 txt 文件并且具有打开标记，因此它被视为 HTML 并且不显示。如果您不知道如何创建虚拟主机，我可以为您解释。

# c# - 删除 XML 中的多个 XML 声明

> ID：12341192
> 
> 赞同：0
> 
> 时间：2012-09-09T17:20:32.133
> 
> 标签：c#, xml, windows-phone-7, serialization, xml-serialization

该应用程序应不时将节点添加到`Goals.xml`文件中。所以它的`dynamic`. 添加节点的代码：

```
XmlWriterSettings settings=new XmlWriterSettings();  
settings.OmitXmlDeclaration= true;
settings.Indent = true;
settings.IndentChars = ("\t");

using (IsolatedStorageFile myIsolatedStorage = 
    IsolatedStorageFile.GetUserStoreForApplication())
using (IsolatedStorageFileStream stream = 
    myIsolatedStorage.OpenFile("Goals.xml", FileMode.Append))
{
    XmlSerializer serializer = new XmlSerializer(typeof(List<Goals>));
    using (XmlWriter xmlWriter = XmlWriter.Create(stream, settings))
    {
        serializer.Serialize(
            xmlWriter, 
            GenerateGoalsData(name, description, progress));
    }
} 
```

和

```
private List<Goals> GenerateGoalsData(
    string name, 
    string description, 
    string progress)
{
    List<Goals> data = new List<Goals>();
    data.Add(new Goals() { 
            Name=name, 
            Description=description, 
            Progress=progress});
    return data;
} 
```

我也有课`Goals`。但它会产生不好的`XML`：

```
<ArrayOfGoals xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <Goals>
        <Name>Jack</Name>
        <Description>lalala</Description>
        <Progress>97</Progress>
    </Goals>
</ArrayOfGoals>
<ArrayOfGoals xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <Goals>
        <Name>Taaaaaa</Name>
        <Description>nanana</Description>
        <Progress>50</Progress>
    </Goals>
</ArrayOfGoals> 
```

如何去除`XML`重复：

```
</ArrayOfGoals>
<ArrayOfGoals xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:xsd="http://www.w3.org/2001/XMLSchema"> 
```

所以`XML`看起来像这样：

```
<ArrayOfGoals xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <Goals>
        <Name>Jack</Name>
        <Description>lalala</Description>
        <Progress>97</Progress>
    </Goals>
    <Goals>
        <Name>Taaaaaa</Name>
        <Description>nanana</Description>
        <Progress>50</Progress>
    </Goals>
</ArrayOfGoals> 
```

或者如何在不自动添加该字符串的情况下附加节点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T17:23:05.150

反序列化您的数据，添加新值并进行序列化。但是使用`FileMode.Create` 而不是`FileMode.Append`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T17:39:27.527

生成的文件是无效的 XML，因此您将无法直接将其用作有效的 Xml 进行反序列化。

但它实际上是可以使用标准类读取的有效“Xml 片段”：当在 XmlReader.Create 调用的 XmlReaderSettings 中指定 ConformanceLevel.Frament 时，XmlReader 可以读取片段。我认为您甚至可以直接从此类阅读器中反序列化类（不确定）。

旁注：读取旧数据，附加您需要的内容并作为整个文件序列化回来会更容易（但问题和错误更少）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-17T19:47:09.753

```
XmlRootAttribute root = new XmlRootAttribute("Goals");     
XmlSerializer serializer = new XmlSerializer(typeof(List<Goals>), root);
XmlSerializerNamespaces ns = new XmlSerializerNamespaces();
ns.Add(string.Empty, string.Empty);   
using (XmlWriter xmlWriter = XmlWriter.Create(stream, settings))
{
    serializer.Serialize(xmlWriter, GenerateGoalsData(name, description, progress), ns)
} 
```

# hibernate - 如何正确使用 SessionFactory.getCurrentSession()？

> ID：12341196
> 
> 赞同：2
> 
> 时间：2012-09-09T17:21:14.247
> 
> 标签：hibernate, session, sessionfactory

```
@Test
public void testGetCurrentSession(){

    Session firstSession=HibernateUtil.getSessionFactory().getCurrentSession();

    Session secondSession=HibernateUtil.getSessionFactory().getCurrentSession();

    assertEquals(firstSession,secondSession);
} 
```

为什么这个单元测试会失败？它在同一个线程中，那么为什么 getCurrentSession() 返回两个不同的会话？

我在 hibernate.cfg.xml 中将“ **current_session_context_class** ”设置为“ **thread** ”，如下所示

```
<property name="current_session_context_class">thread
</property> 
```

ps：休眠版本是4.0.1。

任何帮助将不胜感激！

# php - PHP - preg_match() 允许意外

> ID：12341199
> 
> 赞同：1
> 
> 时间：2012-09-09T17:21:34.420
> 
> 标签：php

我正在尝试使用 preg_match() 只允许来自 az 的字符。我正在使用这个字符串：

```
if (! preg_match('/[^a-z]/i', $name)) {
    echo 'Invalid characters in your name..';
    return false;
} 
```

但由于某种原因，它允许所有字符。我已经在这些台词上出演了很长时间，但我不明白为什么它不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T17:33:02.417

您的 Pattern 只搜索一个字符，这就是为什么它几乎每次都会返回 true，如果不是字符串只包含无效字符。

将您的模式更改为此，您应该启动并运行

```
^[a-z]+$ 
```

如果你也想允许大写字母

```
^[A-za-z]+$ 
```

也许还有数字

```
^[A-za-z0-9]+$ 
```

**编辑：** 如果你想检查一个字符串，`<>` 你可以使用

```
(<|>) 
```

但它会返回 true

# php - 使用 php 从 3rd 方 ftp 服务器压缩和下载

> ID：12341201
> 
> 赞同：0
> 
> 时间：2012-09-09T17:21:46.513
> 
> 标签：php, ftp

我正在使用 php 从 3rd 方 ftp 服务器下载文件。但文件超过 15mb。所以下载时间比较长。我有一个想法，可以从 ftp 服务器即时压缩和下载。有可能这样做吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T17:40:37.310

您必须以一种或另一种方式下载原始文件。您可以`zip`使用 PHP，但前提是您将原始文件下载到您的服务器。您要问的是源服务器可以为您压缩它，这`FTP`是不可能的。

考虑使用`CURL`从 FTP 服务器下载文件。它更具弹性。

```
$curl = curl_init();
$file = fopen("file.zip", 'w'); ##where you want to save it
curl_setopt($curl, CURLOPT_URL, "ftp://ftp.sunet.se/file.zip"); #input
curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($curl, CURLOPT_FILE, $file); #output
curl_setopt($curl, CURLOPT_USERPWD, "$_FTP[username]:$_FTP[password]");
curl_exec($curl);
curl_close($curl);
fclose($file); 
```

[来源](https://stackoverflow.com/q/1178425/1415625)

# javascript - 内容完成时停止无限滚动

> ID：12341205
> 
> 赞同：1
> 
> 时间：2012-09-09T17:22:09.150
> 
> 标签：javascript, jquery, ruby-on-rails-3.2, infinite-scroll

您好我遇到了无限滚动功能的问题，当所有内容都显示出来时，它仍然继续滚动（奇怪的行为）。我正在寻找一种在显示所有内容时停止无限滚动的方法

这是我的代码

```
<script type="text/javascript">
jQuery(document).ready(function ($) {
(function () {
  var page = 1,
    loading = false,
    finish = false;

  function nearBottomOfPage() {
    return $(window).scrollTop() > $(document).height() - $(window).height() - 200;
  }

  function finish() {
    finish = true;

  }
  $(window).scroll(function () {
    if (loading) {
      return;
    }
    if (nearBottomOfPage() && !finish) {
      loading = true;
      $('#loader').show();
      page++;
      $.ajax({
        url: '/office?page=' + page,
        type: 'get',
        dataType: 'script',
        success: function () {
          $('#loader').hide();
          loading = false;
        }
      });
    }
  });
}()); 
```

})

这是我尝试过的

```
 <script type="text/javascript">
 jQuery(document).load(function($) {
 function scrollfn (event) {
if (loading) {
  return;
}
if (nearBottomOfPage() && !finish) {
  loading = true;
  $('#loader').show();
  page++;
  $.ajax({
    url: '/office?page=' + page,
    type: 'get',
    dataType: 'script',
    success: function () {
      $('#loader').hide();
      loading = false;
      $(window).unbind('scroll',scrollfn);
    }
    });
   }
   }

  $(window).bind('scroll',scrollfn);
 })
 </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T17:28:38.007

你永远不会调用你的“完成”功能。

调用`finish();`你的成功 ajax 回调

如果不起作用，请尝试 3 件事：

1）我认为您的功能检查`nearBottomOfPage()`不正确（请参阅我的答案以获得正确的版本：[计算网页滚动结束](https://stackoverflow.com/questions/12279045/calculating-end-of-scroll-on-a-web-page/12279215#12279215)）->也尝试禁用页面上的所有样式。如果您有任何负边距或负填充，它将搞砸您的滚动检测器计算。

2）暂时忘记你的`nearBottomOfPage()`- 我的意思是尝试将你的代码从更改`if (nearBottomOfPage() && !finish)`为 just `if (!finish)`- 如果你的完成调用有效，那么你肯定遇到了关于 nearBottomOfPage() 的问题，正如我在上面 #1 中所说的那样

3) 如果即使更改了项目 #2 它仍然无法正常工作，请尝试将绑定的回调从匿名函数中分离到一个单独的函数中，以便对其进行更多控制，因此您可以稍后取消绑定该回调，如下所示：

```
function scrollfn (event) {
    if (loading) {
      return;
    }
    if (nearBottomOfPage() && !finish) {
      loading = true;
      $('#loader').show();
      page++;
      $.ajax({
        url: '/office?page=' + page,
        type: 'get',
        dataType: 'script',
        success: function () {
          $('#loader').hide();
          loading = false;
          $(window).unbind('scroll',scrollfn);
        }
      });
    }
  }

$(window).bind('scroll',scrollfn); 
```

# git - gitignore globbing 还是 RE？

> ID：12341207
> 
> 赞同：0
> 
> 时间：2012-09-09T17:22:24.570
> 
> 标签：git, version-control, project-management, gitignore

我的项目中的一些自动生成的二进制文件有点麻烦。

所以，我有两个问题：

1) gitignore （来自 git 存储库的文件，其中说明不应跟踪哪些文件）是否使用通配符或正则表达式？

2）对于包含在 gitignore 中但已经被跟踪的文件，它们是否变得未被跟踪？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T18:01:50.230

`gitignore`使用球体。[此页面](http://www.kernel.org/pub/software/scm/git/docs/gitignore.html)应为您提供所有详细信息。

此外，要忽略已跟踪文件中未提交的更改，请使用`git update-index --assume-unchanged`.

# javascript - 将（SSH）终端嵌入到一些 HTML5 演示系统（例如，reveal.js）中的任何想法？

> ID：12341208
> 
> 赞同：3
> 
> 时间：2012-09-09T17:22:27.590
> 
> 标签：javascript, html, google-chrome, google-chrome-extension

每次我谈论编程或一些工具集时，我都喜欢有一些现场和实用的演示。我目前的解决方法是让一个演示程序与另一个终端程序一起使用（假设演示是控制台模式。）。

我正在考虑使用 HTML5 演示系统，例如[reveal.js](https://github.com/hakimel/reveal.js)或[impress.js](https://github.com/bartaz/impress.js)。而且我知道有一个很棒的 chrome 扩展：[Secure Shell](https://chrome.google.com/webstore/detail/pnhechapfaindjhompbnflcldabbghjo)。任何人都知道将像 Secure Shell 这样的 shell/终端嵌入到诸如**reveal.js**或**impress.js**之类的东西中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-23T22:46:57.657

我最近看到一个演示文稿，它使用[shellinabox](http://code.google.com/p/shellinabox/)来做到这一点。它看起来很酷。

# c# - NullReferenceException in function that fill datagrid

> ID：12341209
> 
> 赞同：0
> 
> 时间：2012-09-09T17:22:36.920
> 
> 标签：c#, wpf, connection, nullreferenceexception

I'm wasting whole sunday to make simple filling to datagrid in C# WPF app. All in all i make it like all web examples but the code (below) throws NullReferenceException.

```
SqlConnection connection = new SqlConnection("Data Source=DOM\\SQL2012EVAL;Initial Catalog=PanelOK;Integrated Security=True");
SqlCommand cmdSel = new SqlCommand(outputInfo, connection);
DataTable dt = new DataTable();
SqlDataAdapter da = new SqlDataAdapter(cmdSel);
da.Fill(dt);
klientDataGrid.DataContext = dt; 
```

Weird thing also is that compiler go through the code in debug mode even though it's in event triggered by textchange property of textbox.

The Xaml declaration is as follows:

```
<Window x:Class="Panel_OK.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="768" Width="1024" xmlns:my="clr-namespace:Panel_OK">
    <Window.Resources>
        <my:PanelOKDataSet x:Key="panelOKDataSet" />
        <CollectionViewSource x:Key="klientViewSource" Source="{Binding Path=Klient, Source={StaticResource panelOKDataSet}}" />
    </Window.Resources>
    <Grid DataContext="{StaticResource klientViewSource}">
        <TextBox Height="23" HorizontalAlignment="Left" Margin="25,24,0,0" Name="SearchClientTB" VerticalAlignment="Top" Width="306" Text="Szukaj klienta ..." TextChanged="SearchClientEvent" />
        <DataGrid EnableRowVirtualization="True" Height="114" HorizontalAlignment="Left" ItemsSource="{Binding}" Margin="25,53,0,0" Name="klientDataGrid" RowDetailsVisibilityMode="Visible" VerticalAlignment="Top" Width="951" DataContext="{Binding}">
            <DataGrid.Columns>
                <DataGridTextColumn x:Name="iDColumn" Binding="{Binding Path=ID}" Header="ID" IsReadOnly="True" Width="SizeToHeader" />
                <DataGridTextColumn x:Name="nazwa_KODColumn" Binding="{Binding Path=Nazwa_KOD}" Header="Nazwa KOD" Width="SizeToHeader" />
                <DataGridTextColumn x:Name="miastoColumn" Binding="{Binding Path=Miasto}" Header="Miasto" Width="SizeToHeader" />
                <DataGridTextColumn x:Name="imieColumn" Binding="{Binding Path=Imie}" Header="Imie" Width="SizeToHeader" />
                <DataGridTextColumn x:Name="nazwiskoColumn" Binding="{Binding Path=Nazwisko}" Header="Nazwisko" Width="SizeToHeader" />
                <DataGridTextColumn x:Name="telefonColumn" Binding="{Binding Path=Telefon}" Header="Telefon" Width="SizeToHeader" />
                <DataGridTextColumn x:Name="eMailColumn" Binding="{Binding Path=eMail}" Header="e Mail" Width="SizeToHeader" />
            </DataGrid.Columns>
        </DataGrid>
    </Grid>
</Window> 
```

The code behind:

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using System.Data.SqlClient;
using System.Data;

namespace Panel_OK
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }

        private void SearchClientEvent(object sender, TextChangedEventArgs e)
        {
            string outputInfo = "";
            string[] keyWords = SearchClientTB.Text.Split(' ');

            foreach (string word in keyWords)
            {
                if (word.Length >= 3)
                {
                    outputInfo = "SELECT * FROM [dbo].[Klient] WHERE [Imie] like '%" + word + "%' or [Nazwisko] like '%" + word + "%'";
                }
            }

            if (outputInfo.Length != 0)
            {
                try
                {
                    //Panel_OK.PanelOKDataSet panelOKDataSet = ((Panel_OK.PanelOKDataSet)(this.FindResource("panelOKDataSet")));
                    ////Load data into the table Klient. You can modify this code as needed.
                    //SqlCommand cmdSel = new SqlCommand(outputInfo);
                    //Panel_OK.PanelOKDataSetTableAdapters.KlientTableAdapter panelOKDataSetKlientTableAdapter = new Panel_OK.PanelOKDataSetTableAdapters.KlientTableAdapter();
                    //panelOKDataSetKlientTableAdapter.Fill(panelOKDataSet.Klient);
                    ////System.Windows.Data.CollectionViewSource klientViewSource = ((System.Windows.Data.CollectionViewSource)(this.FindResource("klientViewSource")));
                    ////klientViewSource.View.MoveCurrentToFirst();

                    SqlConnection connection = new SqlConnection("Data Source=DOM\\SQL2012EVAL;Initial Catalog=PanelOK;Integrated Security=True");
                    SqlCommand cmdSel = new SqlCommand(outputInfo, connection);
                    DataTable dt = new DataTable();
                    //DataSet ds = new DataSet();
                    SqlDataAdapter da = new SqlDataAdapter(cmdSel);
                    da.Fill(dt);
                    if (dt != null) { klientDataGrid.DataContext = dt; }
                }
                catch (SqlException)
                {
                    MessageBox.Show("To run this example, replace the value of the " +
                        "connectionString variable with a connection string that is " +
                        "valid for your system.");
                }
            }
        }
    }
} 
```

# cocoa - Xcode Cocoa 中的垃圾收集在哪里？

> ID：12341210
> 
> 赞同：1
> 
> 时间：2012-09-09T17:22:37.277
> 
> 标签：cocoa, garbage-collection

据我所知，垃圾收集在 Cocoa 中默认不启用，应该在构建设置中选择。但在构建设置中，我只能看到自动引用计数。我错过了什么？![在此处输入图像描述](../Images/ef06c7563e790e78d157d67dc6bdfefe.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-09T17:34:01.903

Apple 已弃用垃圾收集。您应该改用 ARC。[您可以在此处](//developer.apple.com/library/mac/documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html#//apple_ref/doc/uid/10000011i)找到 ARC 文档。[这里](https://developer.apple.com/videos/wwdc/2011/?id=323)有一个关于 ARC 的 WWDC 讨论

当您使用 ARC 时，对象被引用计数而不是垃圾收集。但是，您不应致电`retain`或`release`/ `autorelease`。编译器代表您插入对`retain`or `release`/的调用。`autorelease`在实践中，这类似于垃圾收集。您必须小心避免引用循环，这会阻止对象的引用计数变为零并阻止对象被释放。这主要是由父/子关系引入的，当一个孩子持有对它的父母的引用时，就像在大多数涉及委托的情况下发生的那样。

可以通过将父/子关系中的引用之一标记为弱引用来避免引用循环。标记为弱的属性会创建对对象的弱引用。`nil`当对象的引用计数变为零时，将对对象的弱引用设置为。

我[上面](https://developer.apple.com/videos/wwdc/2011/?id=323)提到的谈话更详细。

# flashdevelop - FlashDevelop, Haxe import CreateJS?

> ID：12341211
> 
> 赞同：3
> 
> 时间：2012-09-09T17:22:59.483
> 
> 标签：flashdevelop, haxe, createjs

I just started trying out Haxe to make a web-app, and I would like to use CreateJS, which has a Haxe extern lib thingy. I'm using FlashDevelop as my IDE.

So I created a new Haxe JS project in FlashDevelop, and installed CreateJS with "haxelib install createjs". Thougg now I try to add an import to my Main.hx, but it doesn't work. My import looks like: "import createjs.easeljs.Ticker;" (got that from an example, just copied it but didn't work :s) I also added a new map "lib" to my project, in which I added the createjs stuff.

The error I get is: src/Main.hx:3: characters 0-31 : Class not found : createjs.easeljs.Ticker

![enter image description here](../Images/59530f5422586596bf74a0fa2b8ae01e.png)

Anything else I have to do to make this work?

Thanks!

-Pablo

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T02:06:56.323

[Haxe externs](http://haxe.org/doc/js/extern_libraries)通常的工作方式是：

1.  您手动包含原始 Javascript*。在您的情况下，您将指向 CreateJS javascript ( 的标签添加到您的 HTML 文件中。

2.  使用“extern”文件是为了让 Haxe 知道其他文件在那里，并且知道可以调用哪些方法、更改属性等。它还有助于保持自动完成功能的完整和有用。

3.  如果 externs 保存在库中，则需要安装该库 ( `haxelib install createjs`)，然后需要在构建中包含该库。我通过添加`-lib createjs`到 hxml 构建文件来做到这一点。Flash Develop 可以通过打开`Project->Properties->Compiler Options`“createjs”并将其添加到“库”列表来完成此操作。

4.  在您的 Haxe 文件中，您使用“包含”语句，就像上面一样。

根据您上面的描述，我认为您在包含库的第 3 步中遗漏了这一点。我不是 Flash Develop 用户，所以我不确定它是否完全不同，但看起来在您的后续回答中，您已经从“createjs”haxelib 复制了一些 *.hx 文件，就足够了使其编译。但是，如果将“-lib createjs”行添加到 hxml 构建文件中，则不再需要这些。

希望这可以帮助您入门，如果您遇到困难，请告诉我，我会尝试更新我的答案。

(*) 一个例外是一些库为您包含 Javascript。例如，当您在 Haxe 标准库中使用 js.JQuery 时 - 这包括为您提供的原始 javascript。大多数库您必须自己添加脚本。

（编辑：添加了在 Flash Develop 中添加库的说明，感谢评论）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T04:49:24.700

在 FD 中转到 Project->Properties，然后到 Compiler Options 选项卡，您可以添加使用 haxelib 安装的每个必需的 lib，而无需将 lib 源代码复制到项目源代码树中。这仅在您需要修改库时才有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T17:38:48.247

好的，我在地图上玩了更多，现在它已经修复了，现在看起来是这样的：

![在此处输入图像描述](../Images/2912274485a052b3c61f7462c520f47f.png)

如果有人有更多关于外部人员的信息，以及他们是如何工作的，我仍然会很感激！

谢谢

# eclipse - 如何在 Eclipse 中将 MongoDB 添加到 Lift WebApp？

> ID：12341216
> 
> 赞同：0
> 
> 时间：2012-09-09T17:23:22.113
> 
> 标签：eclipse, scala, mongodb, lift

我无法将 MongoDb 添加到我的 Lift WebApp。我添加了 Maven 依赖项，即

```
<dependency>
  <groupId>net.liftweb</groupId>
  <artifactId>lift-mongodb-record_2.9.1</artifactId>
  <version>2.4</version>
</dependency> 
```

到我的 pom.xml 文件，但是`not found: object mongodb`当我尝试时我仍然得到`import mongodb._`

这是我收到错误的代码（取自[https://www.assembla.com/spaces/liftweb/wiki/Mongo_Configuration](https://www.assembla.com/spaces/liftweb/wiki/Mongo_Configuration)）

```
import net.liftweb._
import mongodb._ // <- Here is the problem
import util.Props
import com.mongodb.{ Mongo, ServerAddress }

object MongoConfig {
  def init: Unit = {
    val srvr = new ServerAddress(
      Props.get("mongo.host", "127.0.0.1"),
      Props.getInt("mongo.port", 27017))
    MongoDB.defineDb(DefaultMongoIdentifier, new Mongo(srvr), "myapp")
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T11:28:46.150

寻求帮助时，您应该发布来源和确切的错误消息。AFAIK 没有 mongodb 包或对象...

无论如何，这是一个有效的示例代码：

```
import net.liftweb.mongodb.record.{ MongoId, MongoRecord, MongoMetaRecord }
import net.liftweb.record.field.StringField
import net.liftweb.mongodb.record.field.MongoMapField

object Device extends Device with MongoMetaRecord[Device]

class Device private () extends MongoRecord[Device] with MongoId[Device] {
  def meta = Device

  type idType = _id.MyType

  object serial extends StringField(this, "")
  object name extends StringField(this, "")
  object deviceInfo extends MongoMapField[Device, Any](this)
} 
```

你的依赖看起来不错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T17:31:46.937

您可以将其添加到您的 build.sbt 文件中：

```
libraryDependencies ++= {
    val liftVersion = "2.4"
    Seq(
        [...]
        "net.liftweb" %% "lift-mongodb" % "2.4",
        "net.liftweb" %% "lift-mongodb-record" % "2.4",
        "com.foursquare" %% "rogue" % "1.0.29" withSources(),
        [...]
    )} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T15:21:09.843

问题在于 Eclipse 及其插件 - 找不到合适的 jar 或其他东西。

我试过不使用IDE，它可以工作。它也适用于 Intellij IDEA CE 11.1。所以我会用它来开发。

# ruby - 带有 TCPServer 的虚拟主机

> ID：12341223
> 
> 赞同：1
> 
> 时间：2012-09-09T17:24:23.100
> 
> 标签：ruby, http, tcpserver

我只是使用 TCPServer Gem 构建自己的 HTTP-Webserver。现在我让服务器使用相同的（本地主机）IP 和端口（80）运行。但是，如果我在一台服务器上有多个域并希望服务器在 localhost ip 上使用，但为每个域打印不同的数据怎么办？

有人可以告诉我如何找出请求所调用的域吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-14T23:21:39.480

我相信你用类似的东西创建了你的服务器

```
require 'socket'

server = TCPServer.new 80
loop do
  Thread.start(server.accept) do |client|
    ...
  end
end 
```

在此代码中，您可以检查`client.recvmsg`，这是一个数组。该数组的第一个元素`client.recvmsg[0]`包含对您的服务器完成的请求的标头。就像是：

```
GET /something HTTP/1.1
Host: localhost:4321
Connection: keep-alive
Cache-Control: max-age=0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8
Upgrade-Insecure-Requests: 1
User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/50.0.2661.102 Safari/537.36
DNT: 1
Accept-Encoding: gzip, deflate, sdch
Accept-Language: pt-BR,pt;q=0.8,en-US;q=0.6,en;q=0.4,fr-CA;q=0.2,fr;q=0.2 
```

如您所见，Host 标头在第二行中。那么这只是一个隔离它的问题。我是这样做的：

```
def get_host(message)
  lines = message.split("\n")
  lines.shift
  host_name = ""
  lines.each{ |line|
    key_value = line.split(': ')
    host_name = key_value[1].strip if key_value[0].strip == "Host"
  }
  host_name
end 
```

如果您这样称呼它，这将为您提供 Host 标头

```
host_header = get_host(client.recvmsg[0]) 
```

在线程块内。

# mysql - 使用 ORDER BY 的 MYSQL 查询在 CakePHP 中运行速度非常慢

> ID：12341230
> 
> 赞同：0
> 
> 时间：2012-09-09T17:25:21.890
> 
> 标签：mysql, cakephp, cakephp-1.3, cakephp-2.0

当我在 Cakephp 2.0 中使用 $options['order'] = array('Model.name' => 'DESC'); 设置查询需要 7000 毫秒，而没有设置订单需要 5 毫秒，限制设置为仅 10 条记录。我使用 WAMP 服务器。

知道为什么这个查询需要这么长时间吗？唯一的区别是添加订单规则。“Ordered by”字段已编入索引。

**解决了它：**

问题是我没有将所有相关的模型 id 字段 (model_id) 设置为索引，之后查询按应有的方式运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T18:29:01.700

您可以尝试放入`order`您的模型。

```
var $order = "field";
var $order = "Model.field";
var $order = "Model.field asc";
var $order = "Model.field ASC";
var $order = "Model.field DESC";
var $order = array("Model.field" => "asc", "Model.field2" => "DESC"); 
```

`Delete-orderBy`在您的查询中并将这些选项之一放入您的模型中并告诉我们它是否更快。

[资源](http://book.cakephp.org/1.3/view/1064/order)

# ruby-on-rails - Rails：如何 i18n 字符串数组？

> ID：12341231
> 
> 赞同：13
> 
> 时间：2012-09-09T17:25:24.003
> 
> 标签：ruby-on-rails, internationalization

我在使用`I18n.translate`翻译数组时遇到问题。

具体来说，我有这个数组，

```
module TaskEnums
  OCTAVE_BANDS = [:hz63, :hz125, :hz250, :hz500, :hz1000, :hz2000, :hz4000, :hz8000, :hz16000]
end 
```

我在 YAML 文件中有以下翻译。

```
en:
  TaskEnums:
    OCTAVE_BANDS:
        hz63: "63 Hz"
        hz125: "125 Hz"
        hz250: "250 Hz"
        hz500: "500 Hz"
        hz1000: "1000 Hz"
        hz2000: "2000 Hz"
        hz4000: "4000 Hz"
        hz8000: "8000 Hz"
        hz16000: "16000 Hz" 
```

在我看来，我想显示一个允许用户选择频率的下拉菜单。

```
<%= form_for(@task) do |f| %>
  <%= f.select :frequency, TaskEnums::OCTAVE_BANDS %>
<% end %> 
```

我知道我可以用 翻译单个符号`t :symbol`，但这种方法似乎不适用于数组（例如`t TaskEnums::OCTAVE_BANDS`，不能满足我的需要）。

有谁知道我如何翻译`OCTAVE_BANDS`数组，以便翻译出现在下拉列表中？这似乎一定是一个常见问题，所以我假设（并希望！）有一个简单的解决方案......有人可以建议如何完成它吗？

非常感谢，

D.

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-09T17:34:07.113

为您的通话使用`scope`选项：`I18n.t`

```
t TaskEnums::OCTAVE_BANDS, scope: 'TaskEnums.OCTAVE_BANDS'
# => ["63 Hz", "125 Hz", "250 Hz", "500 Hz", "1000 Hz", "2000 Hz", "4000 Hz", "8000 Hz", "16000 Hz"] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-11T00:25:12.787

jdoe的回答对我有用！我在表单输入字段上使用了它。

```
f.input :state, as: :radio, collection: t(Model.states.map(&:name), scope: 'attributes.states') 
```

# c++ - C++ boost：分块加载大（4 GB）文件

> ID：12341232
> 
> 赞同：0
> 
> 时间：2012-09-09T17:25:28.117
> 
> 标签：c++, boost, large-files

我是 Boost 库的新手，正在寻找一次加载/映射文件的正确方法，例如 1 GB。

请让我知道我应该如何映射前 1 GB 然后卸载并重新加载下一个 1 GB 等等...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T19:07:12.600

这篇[http://cnx.com](http://cnx.com)文章可以帮助您将硬盘内存映射到内存阵列：

[使用 Boost 在 C++ 中通过内存映射 I/O 进行可移植大文件访问](http://cnx.org/content/m15849/latest/)

# ocaml - OCaml 中的“意外令牌”和调试

> ID：12341240
> 
> 赞同：0
> 
> 时间：2012-09-09T17:26:27.747
> 
> 标签：ocaml

所以我在 OCaml 中调试时遇到了麻烦。问题是我正在编写非常简单的代码，但我不断遇到一个似乎很容易解决的问题 - 我只是不知道如何解决！

```
 let rec multiplier (int1: int) (int2: int) (int3: int) : int =
    let product : int
if int1 >= int2 then(
    if int1 >= int3 then product = int1 * int2
    else product = int1 * int3
)
else if int2 >= int1 then( 
    if int1 >= int3 then product = int2 * int1
    else product = int2 * int3 
) 
```

我一直在第一个“if”下得到一个红色的“x”和一个波浪线，错误：“Unexpected token: if”

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T17:31:33.303

不要以为`=`是一个任务；Ocaml 中基本上没有赋值（`:=`用于引用除外）。

写类似

```
 let area : int = 
   if side1 >= side2 then ( 
     if side2 >= side3 then side1 * side3
     else side1 * side3
    )
   else if side2 >= side1 then ( 
     if side1 >= side3 then side2 * side1
     else side2 * side3
   )
   else 0 
```

请记住`if`... `then`... `else`.... 构造是一个表达式；它更像是`?:`C 的三元条件运算符，而不是它的`if`语句。

请记住，Ocaml 没有语句，只有表达式。（它的`;`操作符 eg`a;b` 类似于 C 逗号操作符，`a,b`意思是计算`a`，丢弃结果，计算`b`给出整个表达式的结果）

# cuda - 使用 cudaMemset 清除 CUDA 中的 uint3

> ID：12341241
> 
> 赞同：0
> 
> 时间：2012-09-09T17:26:34.500
> 
> 标签：cuda

我有 uint3 类型的数据。我的应用程序填充成员 x 和 y 一次，但成员 z 多次。所以，我需要在下一个数据到来之前清除成员 z。可以使用 cudaMemSet 完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T22:37:11.643

[cudaMemset2D](http://developer.download.nvidia.com/compute/cuda/4_2/rel/toolkit/docs/online/group__CUDART__MEMORY_g2b3248e96aaba2241796e113d1798db3.html#g2b3248e96aaba2241796e113d1798db3)可用于设置值。

```
int* dev_ptr = (int*)dev_uint3_ptr;
cudaMemset2D(
    dev_ptr + 2,    // offset device_ptr by 2 elements so first element is z
    sizeof(uint3),  // set pitch to size of uint3 so each increment is to next z
    0,              // set to 0
    sizeof(int),    // sizeof(z)
    elements        // number of elements in your array
    ); 
```

我不确定性能。您可能需要考虑从结构数组切换到数组结构。

# math - 输出过程，除数和整数的素数列表

> ID：12341245
> 
> 赞同：0
> 
> 时间：2012-09-09T17:26:53.390
> 
> 标签：math, maple

我试图弄清楚这个问题。

编写一个过程 ，`primeset`其输入是一个正整数 n，其输出是所有素数 p 的集合，使得 p 除以 n。

到目前为止，我已经尝试过以下方法。这是使用枫木。

```
primeset:=proc

 # Determine if n is divisble by p:

          local p;
          for p from 1 to n do
           if isprime(p) then # check divisibility by primes
            if modp(n,p) = 0 then # check if divided by prime
              return false;
             end if;
            end if;
          end do;
          return true;
          end proc;
          # VARIABLES:
          # INPUT:
          #  n is a (positive) integer
          # LOCAL:
          #  p is a (positive) integer.
          # OUTPUT:
          #  output is the set of all primes p such that p divides n. 
```

我的输出是这样的：

```
primeset := proc (n) local p; for p to n do if isprime(p) then if modp(n, p) = 0 then return false end if end if end do; return true end proc. 
```

我试着在一些数字上运行它，比如 2,4 和 10，我得到的只是假的，假的，假的。

如果有人可以提供一些建议，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T18:38:23.820

这里有一些提示：

该数字`n`是一系列主要因素的乘积。

寻找最小的因子`p >= 2`。

其余因子的乘积是`n / p`，所以重复，寻找 的最小素因子`n / p`，等等。

请记住，一个因素可能会重复，因此您找到的下一个因素将 >= 最后一个因素。

最后，一个数的最大因数不能超过该数的平方根。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T22:56:43.743

Maple 有内置的因式分解命令，如`ifactor(n)`，它会输出一个素因数列表，你可以用它来制作你的列表。@MRAB 建议的方法也很常见，迭代所有可能的素因子并查看 n 是否包含它作为因子。

# php - 解析 xmlhttp.responseText

> ID：12341246
> 
> 赞同：0
> 
> 时间：2012-09-09T17:26:55.233
> 
> 标签：php, javascript, ajax

如何解析xmlhttp.responseText？我在某处看到可以使用拆分功能。这是唯一的方法还是有更好的方法？现在，responseText 中存储的内容被发送到一个 HTML 文本框，但我正在尝试解析 xmlhttp.responseText，以便可以从解析的数据中填充多个文本框。

主页代码：

```
function loadDoc()
{
   var xmlhttp;

   // code for IE7+, Firefox, Chrome, Opera, Safari
   if (window.XMLHttpRequest)
   {
      xmlhttp=new XMLHttpRequest();
   }
   // code for IE6, IE5
   else
   {
      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
   }

   xmlhttp.onreadystatechange=function()
   {
      if (xmlhttp.readyState==4 && xmlhttp.status==200)
      {
         var doc = window.document.createElement("doc");
         doc.innerHTML = xmlhttp.responseText;
         document.getElementById("textbox").value=doc.innerHTML;
      }
   }

   xmlhttp.open("GET","loadTextBox.php?id=4",true);
   xmlhttp.send();
} 
```

loadTextBox.php 代码：

```
<?php
---Placeholder for correct DB login info---

$result = $mysql->query(---Place holder for correct SQL query---);

while ($row = $result->fetch_object())
{
   $queryResult[] = $row->present_tense;
}
$textboxValue = $queryResult[0];
$textboxValue2 = $queryResult[1];
echo $textboxValue;
echo $textboxValue2;
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T17:36:33.460

```
<?php
---Placeholder for correct DB login info---

$result = $mysql->query(---Place holder for correct SQL query---);

while ($row = $result->fetch_object())
{
   $queryResult[] = $row->present_tense;
}
$textboxValue = $queryResult[0];
$textboxValue2 = $queryResult[1];
echo json_encode(array('first'=>$textboxValue,'second'=>$textboxValue2));
?> 
```

对于您的 responseText，您可以使用：

```
function loadDoc()
{
   var xmlhttp;

   // code for IE7+, Firefox, Chrome, Opera, Safari
   if (window.XMLHttpRequest)
   {
      xmlhttp=new XMLHttpRequest();
   }
   // code for IE6, IE5
   else
   {
      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
   }

   xmlhttp.onreadystatechange=function()
   {
      if (xmlhttp.readyState==4 && xmlhttp.status==200)
      {
         var doc = window.document.createElement("doc");
         var a = xmlhttp.responseText;
         a = JSON.parse(a);
         document.getElementById("textbox").value=a.first;
         document.getElementById("textbox2").value=a.second;
      }
   }

   xmlhttp.open("GET","loadTextBox.php?id=4",true);
   xmlhttp.send();
} 
```

# reload - 仅自动重新加载一次图像：javascript 或 html

> ID：12341248
> 
> 赞同：0
> 
> 时间：2012-09-09T17:27:00.743
> 
> 标签：reload

一旦页面完全加载，如何使用 javascript 和/或 html 自动（即没有用户输入/操作）重新加载一次使用 img 标签嵌入我的页面中的特定图像？我希望从源位置重新加载图像，而不是浏览器缓存。请稍微清醒一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T19:16:33.803

`IMAGE`您可以在元素源上附加一个虚拟 URL 参数。例如，如果图像 URL 是`http://mysite.com/image.jpg`，则将其更改为`http://mysite.com/image.jpg?dummy`. 如果图像 URL 上已经有一些参数，例如`http://mysite.com/image.jpg?varname=VarValue`，将其更改为`http://mysite.com/image.jpg?varname=VarValue&dummy`. 通常，虚拟参数是以数字表示的当前时间。

这是一个使用时间作为虚拟参数的示例代码。它将图像 URL 更改为类似`http://mysite.com/image.jpg?1347218169148`. 该函数将在页面加载后执行，并将处理所有`IMAGE`元素。

```
<script>
onload = function() {
  var i, imgs = document.images;
  for (i = 0; i < imgs.length; i++) {
    imgs[i].src += (imgs[i].src.indexOf('?') < 0 ? '?' : '&') + (new Date()).valueOf();
  }
};
</script> 
```

# c - 从 CGI 调用重新启动脚本未完全重新启动

> ID：12341249
> 
> 赞同：0
> 
> 时间：2012-09-09T17:27:05.313
> 
> 标签：c, bash, shell, cgi, uclinux

我正在尝试从用 C 编写的 CGI 脚本中重新启动 Boa Web 服务器。这是在 ucLinux 系统上。对 system("/etc/init.d/boa.sh restart") 的调用成功运行，我从日志中看到 Boa 已停止，但从未启动。从 CLI 运行 boa.sh restart 确实可以正常工作。boa.sh 脚本如下所示。关于为什么它没有完全重启的任何想法？请注意，CGI 脚本本身在 Boa 中运行。

```
 NAME=boa
PROG=/bin/boa
OPTIONS="-c /etc/"
LOCKFILE=/var/lock/boa
STDLOGFILE=/var/log/boaerrlog.log

case "$1" in
    start)
        echo -n $"Starting $NAME: "
        boa $OPTIONS > /dev/null 2>&1 &
#       boa $OPTIONS >$STDOUTFILE 2>&1 &
        touch $LOCKFILE
        echo "OK"
        ;;
    stop)
        echo -n $"Stopping $NAME: "
        kill -TERM `pidof $NAME` > /dev/null 2>&1
        rm -f $LOCKFILE $PIDFILE > /dev/null 2>&1
        echo "OK"
        ;;
    restart)
        $0 stop
        $0 start
        ;;
    status)
        echo "running"
        ;;
esac 

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T15:09:51.553

在聊天中收集的信息。

通过 CGI 中的系统调用重新启动的进程实际上是由同一进程服务的。这不起作用，因为术语信号可能正在杀死树中的所有进程，包括重新启动的 boa 进程。

另一种方法是运行第二个 boa 实例，它可以重新启动生产实例。而生产实例可以重启用于重启生产实例的第二个实例。

# python - 使用 sqlalchemy 自动散列主键并使其在刷新/提交时持久化

> ID：12341251
> 
> 赞同：4
> 
> 时间：2012-09-09T17:27:22.563
> 
> 标签：python, orm, sqlalchemy, lazy-loading

我正在尝试在 sqlalchemy 中获取对象主键的哈希值。

一个示例`class User`如下所示：

```
class User(base):
    __tablename__ == 'users'

    id = Column(Integer, primary_key=True)
    hash = Column(String(38), unique=True) 
```

并添加用户：

```
user = User()
session.add(user)
session.commit()

print user.id 
```

我试图将散列过程挂钩到 ORM 事件中，因为主键是在`session.flush()`. 但是在刷新期间，对对象状态的更改不会持久化。

唯一对我有用的解决方案是在第一次刷新之后延迟加载，`user.id`然后再进行哈希、分配和刷新，最后提交。

```
class User(base):
...

    @hybrid_property
    def hash(self):
        if not self.hash:
            self.hash = hash_function(self.id)
        return self.hash 
```

这使我能够执行以下操作：

```
user = User()
session.add(user)
hash = user.hash
session.commit() 
```

sqlalchemy 启动 an`UPDATE`和 the`user.hash`并使其持久化。

但这似乎是一个糟糕的选择，例如，如果有人忘记分配散列（也许在创建对象时不需要散列）。

还有其他选择吗？我真的更喜欢它自动散列`after_insert`。也许我在 ORM 事件文档中遗漏了一些东西？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-09T17:43:07.200

这是 after_insert() 的好地方，因为这是第一次新生成的 PK 始终可用（它也不需要选择，但不确定“延迟加载 user.id”是什么意思，它应该被分配），你要做的是直接发出一个 UPDATE 语句。这就是映射器级别刷新事件被赋予连接（而不是会话）的原因。

应该像这样简单：

```
@event.listens_for(User, "after_insert")
def update_hash(mapper, connection, target):
    user_table = mapper.local_table
    connection.execute(
          user_table.update().
              values(hash=hash_function(target.id)).
              where(user_table.c.id==target.id)
    ) 
```

如果你想让这对许多用户更有效，你可以在 after_flush() 事件中做到这一点：

```
@event.listens_for(Session, "after_flush")
def update_hash(session, flush_context):
    hashes = [
        {"user_id":element.id, "hash":hash_function(element.id)}
        for element in session.new if isinstance(element, User)
    ]
    user_table = mapper.local_table
    session.execute(
          user_table.update().
              values(hash=bind('hash')).
              where(user_table.c.id==bind('user_id')),
          hashes
    ) 
```

# regex - 正则表达式删除某些标签之前的内容

> ID：12341252
> 
> 赞同：-3
> 
> 时间：2012-09-09T17:27:27.257
> 
> 标签：regex

如何删除某些标签/文本之前的内容，例如我想删除此评论之前的所有内容：

```
 <!-- article begins --> 
```

我想在之后删除所有内容

```
 <!-- article ends --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T17:32:55.587

Python 示例（你没有说你想要哪种语言）：

```
import re
reobj = re.compile(".*?<!-- article begins -->(.*)<!-- article ends -->.*", re.DOTALL)
result = reobj.sub(r"\1", subject) 
```

这也会删除标签。并且它假设 中只有一`article begins/ends`对`subject`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T17:44:46.107

**C#**（不需要正则表达式）。

```
string start = "<!-- article begins -->";
string end = "<!-- article ends -->";

var article = text.Split(new string[] { start, end }, 
                         StringSplitOptions.RemoveEmptyEntries)[1]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T17:35:10.980

取决于您的正则表达式引擎。他们几乎都有一个模式，你可以问“。” 匹配所有字符，包括换行符。然后你会捕获你想要的东西：

```
.*article begins.....(.*).....article ends.* 
```

我使用点作为注释标记，因为其中一些字符是特殊的，具体取决于您的正则表达式引擎。

您可能会改为查看 awk，它有更好的方法：

```
awk '/article begins/,/article ends/ { print }' filename 
```

它用一个动作指定一个正则表达式范围：

```
/start pattern/,/end pattern/ { action to do } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T17:37:40.683

与`sed`：

```
sed -n '/<!-- article begins -->/,/<!-- article ends -->/p' yourfile 
```

它不假设只有一对匹配的标签

# selenium-rc - Selenium RC 对 firefox 15 和 windows 7 是否可行？

> ID：12341258
> 
> 赞同：-2
> 
> 时间：2012-09-09T17:27:42.717
> 
> 标签：selenium-rc

我尝试使用 selenium RC 在 Firefox 15 中打开一个链接。

无法打开链接并引发错误“www.cfauth.com”。

我想知道 Selenium RC 是否与 Firefox 15 和 Windows 7 兼容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T07:15:07.297

Selenium RC 在 Firefox 版本 5 之前工作正常。由于 RC 正式贬值，不再支持浏览器的进步。可能的解决方案是切换到 selenium Webdriver。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T17:30:05.837

是的，带有 Firefox 15 和 Windows 7 的 Selenium RC 应该可以正常工作。

# c# - 从数据网格视图单元格中获取数据

> ID：12341268
> 
> 赞同：1
> 
> 时间：2012-09-09T17:28:42.857
> 
> 标签：c#, winforms

我正在尝试从 Windows 窗体中的 dataGridView 中的单元格中获取数据，但不断收到此错误：'System.Windows.Forms.DataGridViewCell' 不包含'Text' 的定义...（您是否缺少 using 指令或装配参考？）。我在相关的 asp.net 网络表单应用程序中的 gridwiev 中使用了相同的方法，那么为什么它在这里不起作用？datagridview 中的数据来自数据库。

```
 new Rectangle
              {
                  Height = Convert.ToInt32(dataGridView1.Rows[i].Cells[2].Text),
                  Width = Convert.ToInt32(dataGridView1.Rows[i].Cells[3].Text),
                  X = 0,
                  Y = 0,
              }; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T17:39:57.480

它在这里不起作用，因为 a`DataGridView`与 ASP 不同`GridView`。他们可能执行相同类型的工作，但执行方式不同。我对 不熟悉`GridView`，所以除了您刚刚观察到的差异之外，我无法指出任何差异。

A`DataGridViewCell`包含对 an 的引用，`Object`并具有用于控制如何将该对象转换为“格式化值”以进行显示的成员。它相当复杂，最终您应该阅读它，但在不了解潜在价值的情况下，我们可以猜测这可能对您有用：

```
Height = Convert.ToInt32(dataGridView1.Rows[i].Cells[2].Value) 
```

# wpf - 将窗口图标绑定到图像

> ID：12341271
> 
> 赞同：0
> 
> 时间：2012-09-09T17:29:06.780
> 
> 标签：wpf, image, window

好吧，我所拥有的是一个自定义窗口控件。我想要做的是设置一个`Image`控件，我试图将其设置`.Source`为`Window.Icon`属性。

我所拥有的是

```
public static readonly DependencyProperty IconProperty = DependencyProperty.Register("Icon", typeof (ImageSource), typeof (OctgnChrome));
private Image IconImage { get; set; } 
```

并在构造函数中

```
IconImage.SetBinding(IconProperty, new Binding("Icon") {UpdateSourceTrigger = UpdateSourceTrigger.PropertyChanged}); 
```

OctgnChrome 是自定义窗口的名称。

问题是窗口有一个图标，当我运行它时它会显示在任务栏上，但`Image`没有显示任何东西，它只是空白。

关于如何解决这个问题的任何想法，或者我可能做错了什么？

# 还

如果我将它设置为直接指向一个图标，它就可以工作，就像这样

```
IconImage = new Image{Source = new BitmapImage(new Uri("pack://application:,,,/Octgn;component/Resources/Icon.ico")) }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T18:42:42.183

我可以看到三个问题。

1.  该属性实际上并不绑定到依赖属性（它使用自己的 getter/setter）。
2.  该属性未命名为与您设置的绑定+DP 注册匹配，即，它应该命名`Icon`为`IconImage`.
3.  属性的类型与您绑定的（`Image`vs `ImageSource`）不同。

我建议`IconImage`改为这样实现该属性：

```
public ImageSource Icon 
{ 
    get { return this.GetValue(IconProperty) as ImageSource; }
    set { this.SetValue(IconProperty, value); }
} 
```

# php - php自定义排序函数数值

> ID：12341272
> 
> 赞同：2
> 
> 时间：2012-09-09T17:29:26.723
> 
> 标签：php, function, sorting

我有一个与 usort 一起使用的自定义排序功能：

```
function cmp($wert_a, $wert_b) {
$a = $wert_a["name"];
$b = $wert_b["name"];

if ($a == $b) {
   return 0;
}

return ($a < $b) ? -1 : +1; 
} 
```

现在，当我有一个这样的数组时：`5a,10b,6c,HR9,44x` 它会将其排序为`10b,44x,5a,6c,HR9`.

我想把它排序为`5a,6c,10b,44x,HR9`

如何做到这一点？

**编辑：**我没有真正提到的一件事（我在代码中但不是在文本中）是它是一个像这样的多维数组：

```
$array[0]["name"] = "5b";
$array[0]["..."] = "other values";
$array[1]["name"] = "10a";
$array[1]["..."] = "other values"; 
```

使用 natsort 和朋友我不能这样排序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T17:38:11.273

我建议你只使用[natsort()](http://www.php.net/natsort)。它的行为方式与您尝试创建的方式相同。

要对多维数组进行排序，请参阅： [http ://www.php.net/manual/en/function.array-multisort.php#61976](http://www.php.net/manual/en/function.array-multisort.php#61976)

```
function array_key_multi_sort($arr, $l , $f='strnatcasecmp')
{
    usort($arr, create_function('$a, $b', "return $f(\$a['$l'], \$b['$l']);"));
    return($arr);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T18:00:12.340

如果您想按自然顺序（`a`在之前`H`）对字符进行排序，您可以使用`natcasesort`. 考虑以下数组：

```
$array = array('5a', '10b', '6c', 'HR9', '44x', 'a9'); 
```

使用`natsort`：

```
Array
(
    [0] => 5a
    [2] => 6c
    [1] => 10b
    [4] => 44x
    [3] => HR9
    [5] => a9
) 
```

使用`natcasesort`：

```
Array
(
    [0] => 5a
    [2] => 6c
    [1] => 10b
    [4] => 44x
    [5] => a9
    [3] => HR9
) 
```

**编辑：** 您可以在输出中看到，即使在排序之后索引也保持不变。因此，要对关联数组进行排序，您可以创建一维副本并使用其索引访问关联数组。不要忘记在遍历排序数组时使用`foreach`而不是。`for`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T17:52:29.207

好吧，对于数组中的每个项目，`HR9`php 中的 natsort() 函数可以很好地处理排序。它忽略非数字字符并按数字字符排序，就好像它们是数字一样。

这是关于 natsort() 的文档。 [http://us.php.net/natsort](http://us.php.net/natsort)

```
$array = array(5a,10b,6c,HR9,44x);

natsort($array); 
```

新订单现在应该是：

```
5a,6c,HR9,10b,44x 
```

在此之后，您可以使用排序功能，并且仅在其中一个字符串的第一个字符不是数字时进行排序

关于您的多维数组：

```
$temp_array = array();
foreach($array as $key => $value):

$temp_array[$key] = $value['name'];

endforeach;

natsort($temp_array); 
```

这将为您提供一个有序的关联数组，其中键是原始数组的元素编号，值是“名称”

你可以

# last.fm - Last.FM scrobble via post.audioscrobbler.com

> ID：12341275
> 
> 赞同：0
> 
> 时间：2012-09-09T17:29:54.743
> 
> 标签：last.fm

I am trying to create a simple app that scrobbles songs. If I follow these instructions (http://www.lastfm.de/api/submissions) the handshake responds with OK and I get a session ID as well as the submission URLs. But when I try to scrobble a song the response is:

Audioscrobbler submissions system. [http://www.audioscrobbler.net/](http://www.audioscrobbler.net/)

and nothing is scrobbled. Has the service been discontinued or why doesn't it work?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T13:17:07.490

Your scrobble submissions must be sent with the HTTP POST method.

The service has not (and will not) be discontinued as there is a large number of legacy applications still using it. But we prefer the newer Scrobble 2.0 protocol to be used when possible: [http://www.last.fm/api/scrobbling](http://www.last.fm/api/scrobbling)

# android - 已连接到服务，但在我尝试使用时失败

> ID：12341276
> 
> 赞同：0
> 
> 时间：2012-09-09T17:29:57.430
> 
> 标签：android, binding, service, gps, nullpointerexception

我有一个问题，当我尝试使用我的服务时，程序失败了。它从第一个活动开始：

```
startService(new Intent(this, GPSService.class)); 
```

然后在另一个活动（称为主要）中，我有这个：

```
protected GPSService gService;
protected boolean mIsBound = false;
    protected ServiceConnection mConnection = new ServiceConnection() {
    @Override
    public void onServiceConnected(ComponentName className, IBinder service) {
        GPSServiceBinder  binder = (GPSServiceBinder) service;
        gService = binder.getServerInstance();
        mIsBound = true;
        Toast.makeText(ActionBarActivity.this, "Attached to a process",
                Toast.LENGTH_SHORT).show();
    }

    @Override
    public void onServiceDisconnected(ComponentName className) {
        gService = null;
        Toast.makeText(ActionBarActivity.this, "Deattachhed from process",
                Toast.LENGTH_SHORT).show();
    }
};

protected void doBindService(Activity act) {
    getApplication().bindService(new Intent(act, 
            GPSService.class), mConnection, Context.BIND_AUTO_CREATE);

    mIsBound = true;
    if(mIsBound)
        Toast.makeText(ActionBarActivity.this, "connected",
                Toast.LENGTH_SHORT).show();

}; 
```

然后我继承Main，调用doBindService（）并尝试使用gService，然后它因NullPointer exeption而失败：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    doBindService(OccupationActivity.this);
            gService.getLocation(); 
```

但是来自 onServiceConnected() 的 Toast 可以正常工作。

这是我的服务类：

```
 public class GPSService extends Service {
private static final String TAG = "GPS_SERVICE";
private LocationManager mLocationManager = null;
private static final int LOCATION_INTERVAL = 1000;
private static final float LOCATION_DISTANCE = 10f;
Location currentLocation;

private class LocationListener implements android.location.LocationListener{

    Location mLastLocation;

    public LocationListener(String provider)
    {
        Log.e(TAG, "LocationListener " + provider);
        mLastLocation = new Location(provider);
    }

    @Override
    public void onLocationChanged(Location location)
    {
        Log.e(TAG, "onLocationChanged: " + location);
        if (location != null){
            mLastLocation.set(location);
            currentLocation = mLastLocation;                
        }

    }

    @Override
    public void onProviderDisabled(String provider)
    {
        Log.e(TAG, "onProviderDisabled: " + provider);            
    }

    @Override
    public void onProviderEnabled(String provider)
    {
        Log.e(TAG, "onProviderEnabled: " + provider);
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras)
    {
        Log.e(TAG, "onStatusChanged: " + provider);
    }

} 

LocationListener[] mLocationListeners = new LocationListener[] {
        new LocationListener(LocationManager.GPS_PROVIDER),
        new LocationListener(LocationManager.NETWORK_PROVIDER)
};

private IBinder mBinder = new GPSServiceBinder();

public class GPSServiceBinder extends Binder {
    public GPSService getServerInstance() {
        return GPSService.this;
    }
}

@Override
public int onStartCommand(Intent intent, int flags, int startId)
{
    Log.e(TAG, "onStartCommand");
    super.onStartCommand(intent, flags, startId);       
    return START_STICKY;
}

@Override
public IBinder onBind(Intent intent) {
    return mBinder;
}

int minTime = 60000;
float minDistance = 15;

@Override
public void onCreate()
{
    super.onCreate();
    Log.e(TAG, "onCreate");
    initializeLocationManager();

    try {
        mLocationManager.requestLocationUpdates(
                LocationManager.NETWORK_PROVIDER, LOCATION_INTERVAL, LOCATION_DISTANCE,
                mLocationListeners[1]);
    } catch (java.lang.SecurityException ex) {
        Log.i(TAG, "fail to request location update, ignore", ex);
    } catch (IllegalArgumentException ex) {
        Log.d(TAG, "network provider does not exist, " + ex.getMessage());
    }
    try {
        mLocationManager.requestLocationUpdates(
                LocationManager.GPS_PROVIDER, LOCATION_INTERVAL, LOCATION_DISTANCE,
                mLocationListeners[0]);
    } catch (java.lang.SecurityException ex) {
        Log.i(TAG, "fail to request location update, ignore", ex);
    } catch (IllegalArgumentException ex) {
        Log.d(TAG, "gps provider does not exist " + ex.getMessage());
    }
}

public Location getLocation()
{   
    return currentLocation;
}

public boolean getGPSstatus()
{
    if ( mLocationManager.isProviderEnabled(LocationManager.GPS_PROVIDER) ){
        return true;       
    }else{
        return false;
    }

}

@Override
public void onDestroy()
{
    Log.e(TAG, "onDestroy");
    super.onDestroy();
    if (mLocationManager != null) {
        for (int i = 0; i < mLocationListeners.length; i++) {
            try {
                mLocationManager.removeUpdates(mLocationListeners[i]);
            } catch (Exception ex) {
                Log.i(TAG, "fail to remove location listners, ignore", ex);
            }
        }
    }
} 

private void initializeLocationManager() {
    Log.e(TAG, "initializeLocationManager");
    if (mLocationManager == null) {
        mLocationManager = (LocationManager) getApplicationContext().getSystemService(Context.LOCATION_SERVICE);
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T20:59:26.257

这是行不通的：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    doBindService(OccupationActivity.this);
    gService.getLocation(); 
```

因为当您调用`doBindService()`它时会尝试绑定到服务，但`onServiceConnected()`完成服务绑定的回调直到稍后才会发生。这个回调是异步的，它在主线程上运行。这意味着当`doBindService()`返回到您的代码时，`onCreate()`您会立即使用该变量`gService`，但该变量尚未设置为任何值，因为调用`onServiceConnected()`尚未发生。

您需要将您的呼叫`gService.getLocation()`从`onCreate()`转移到您的活动中的另一个方法，该方法在被调用时被触发`onServiceConnected()`。

# r - 在ggplot2中向Choropleth Map添加点

> ID：12341281
> 
> 赞同：5
> 
> 时间：2012-09-09T17:30:26.803
> 
> 标签：r, maps, ggplot2

我正在查看 Hadley Wickham 的以下示例`ggplot2`：

```
library(ggplot2)
library(maps)
states<-map_data("state")
arrests<-USArrests
names(arrests)<-tolower(names(arrests))
arrests$region<-tolower(rownames(USArrests))

chloro<-merge(states, arrests, by="region")
chloro<-chloro[order(chloro$order), ]
qplot(long, lat, data=chloro, group=group, fill = assault, geom="polygon") 
```

然后，我想在地图上添加一些著名的美国城市的积分，但我没能做到。我试过了：

```
base_map<-qplot(long, lat, data=chloro, group=group, fill = assault, geom="polygon")
base_map + qplot(long, lat, data=us.cities) + borders("state", size=.5) 
```

但我收到以下错误：

```
Error in p + o : non-numeric argument to binary operator
In addition: Warning message:
Incompatible methods ("+.ggplot", "Ops.data.frame") for "+"" 
```

我怎样才能添加这些点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-09T18:20:32.007

这对我来说似乎很好用：

```
base_map + 
    geom_point(aes(long, lat,fill = NULL,group = NULL), size = 1,data=us.cities) + 
    borders("state", size=.5) 
```

尽管您可能想要排除 HI 和 AK 中的城市，就像我在制作这个版本的情节时所做的那样：

![在此处输入图像描述](../Images/bf5a0dfbb874e77ed3ef972cfc7a3d7a.png)

# javascript - 搜索 Google 电子表格 API

> ID：12341283
> 
> 赞同：3
> 
> 时间：2012-09-09T17:30:29.887
> 
> 标签：javascript, html, google-api, spreadsheet

我正在尝试创建一个搜索，以搜索我拥有的谷歌电子表格。

在我的 query.setQuery() 中没有搜索我输入的搜索字符串。

表格也没有正确填充，

我做了一些标签评论，以便我可以包含我所有的代码，因为堆栈溢出只会让我提交 5 个标签

谢谢您的帮助

```
<!DOCTYPE HTML>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Example of Google Spreadsheet Data Visualisation</title>
</head>

<body>

<form id="form1" name="form1" method="post" onsubmit ="return drawVisualization()"> <label>
<input id="search" name="search" type="text" />
</label>
<label>
<input type="submit" />
</label>

</form>
<p>

<script type="text/javascript" src="http://www.google.com/jsapi"></script>
<script type="text/javascript">
      google.load('visualization', '1', {packages: ['table']});
</script>
<script type="text/javascript">
    var visualization;

function getSearch() { return form1.elements["search"].value;}

    function drawVisualization() {

      $search = getSearch();
 if ($search > ''){ $search = $search;} else { $search = '';}

 // alert($search);

      var query = new google.visualization.Query(
          '//My link to public google spread sheet');

      query.setQuery("SELECT A ,B, C  where upper(A) like upper('{$search}')  or upper(B) like upper('{$search}') order by A asc label A 'Product', B 'Manufacturer', C 'Category' ");

    //"SELECT guests FROM exp_freeform_entries WHERE ordid='{$_SESSION['eid']}' LIMIT 1");

      query.send(handleQueryResponse);
    }

    function handleQueryResponse(response) {
      if (response.isError()) {
        alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
        return;
      }

      var data = response.getDataTable();

     visualization = new google.visualization.Table(document.getElementById('table'));
     visualization.draw(data, {legend: 'bottom'});

    }

    google.setOnLoadCallback(drawVisualization);
    </script>

   <div id="table"></div>

</div>

</body>
</html> 
```

# c# - 如何从作为datagridview中组合框列的特定单元格中选择一个值

> ID：12341288
> 
> 赞同：1
> 
> 时间：2012-09-09T17:31:22.630
> 
> 标签：c#, winforms, c#-4.0

我有一个带有 2 个组合框列的数据网格，第一列是类别列，第二列是子类别列。现在我必须在第一个组合框列中选择类别，然后该选定类别下的子类别应绑定在第二个组合框列中，我为组合框列编写了选择更改事件，如下所示。

```
private void Grid_EditingControlShowing(object sender, DataGridViewEditingControlShowingEventArgs e)

{ 

  ComboBox cb = e.Control as ComboBox;

                if (cb!=null)

                { cb.SelectionChangeCommitted -= new EventHandler(cb_SelectedIndexChanged);

                    // now attach the event handler

                    cb.SelectionChangeCommitted += new EventHandler(cb_SelectedIndexChanged);

                }

}

void cb_SelectedIndexChanged(object sender, EventArgs e)

     {
       int i = datagrdADDTEMP.CurrentCell.ColumnIndex;
       int j = datagrdADDTEMP.CurrentCell.RowIndex;
       if(i==0)
       {

       var tb = datagrdADDTEMP.EditingControl as ComboBox;

       if (tb != null)

       str = tb.SelectedValue != null ? tb.SelectedValue.ToString() : null;

       Assesment_Business_layer.Businesslayer bl = new Assesment_Business_layer.Businesslayer();

       DataSet ds = new DataSet();**strong text**

       ds = bl.GetSubCatNamesBA(str);

       cmbDataGridSubCategory.DataSource = ds.Tables[0];

       cmbDataGridSubCategory.DisplayMember = "SubCategoryName";

       cmbDataGridSubCategory.ValueMember = "SubCategoryCode";

       }
       }

     } 
```

它运作良好。当我从特定行中的第一个组合框列中选择类别时，此选定类别的相关子类别将绑定到同一行中的子类别列。它很好，但问题是，在特定行之前的第二个组合框列也与相同的子类别绑定

例如

如果我从第三行第一个组合框列中选择类别，那么它的子类别也绑定在第一行第二行和第三行中。我只想将它绑定到第三行。

请任何人帮助我，我遇到了这个问题..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T18:04:47.480

您正在更改整个列的 DataSource。相反，仅为单元格更改 DataSource。`DataGridViewComboBoxCell`包含其自己的 DataSource 成员，如果为 null，则使用其 OwningColumn 的 DataSource。

**更新**

代替

```
cmbDataGridSubCategory.DataSource = ds.Tables[0];
cmbDataGridSubCategory.DisplayMember = "SubCategoryName";
cmbDataGridSubCategory.ValueMember = "SubCategoryCode"; 
```

利用

```
// Retrieve the individual sub-category cell
DataGridViewComboBoxCell subComboCell = (DataGridViewComboBoxCell)datagrdADDTEMP.Rows[j].Cells[cmbDataGridSubCategory.Index];
// Alter its DataSource
subComboCell.DataSource = ds.Tables[0];
subComboCell.DisplayMember = "SubCategoryName";
subComboCell.ValueMember = "SubCategoryCode"; 
```

DGV 是一个单元格网格（源自`DataGridViewCell`）。这些单元格中的每一个都有一些基于`DataGridViewColumn`该列类型的特定类型。因此，如果您有`DataGridViewComboBoxColumn`，则该列中的所有单元格都是`DataGridViewComboBoxCell`s。

组合框单元格有一个 DataSource 成员，告诉它如何填充下拉列表（您也可以通过 Items 成员填充下拉列表，但这与您的问题无关）。当 DGV 填充下拉列表时，它首先查看单元格的 DataSource 成员。如果它为空（默认为空），则它会查找其 DataSource 成员的 OwningColumn（对于 a`DataGridViewComboBoxCell`始终是 a `DataGridViewComboBoxColumn`）。

这就是您要更改的内容，列的 DataSource 成员。所以该列中的所有单元格都将更改为这个新的数据源。您想要的只是更改该特定单元格的数据源。

# html - 通过代码我无法在 iFrame 中生成文本

> ID：12341305
> 
> 赞同：0
> 
> 时间：2012-09-09T17:34:10.687
> 
> 标签：html, css, iframe

这里是我的 iFrame 的代码，但文本实际上并未显示在框架中

```
.iframe {
    font-family: "Courier New", Courier, monospace;
    font-size: 14px;
    font-style: normal;
    line-height: normal;
    font-weight: lighter;
    background-attachment: inherit;
    background-repeat: repeat;
    background-position: top;
    text-align: left;
    white-space: normal;
    float: inherit right;
    widows:inherit;
    volume:silent;
    border-left-style: dashed;
    list-style-type: circle;
    cursor: default;
    filter: Glow(Color=#345, Strength=2);
} 
```

html标签中的框架代码

```
 <iframe class="iframe" align="middle" height="500" width="1000">
      <font color="#00FF33" style="animation:ease-in-out" face="Arial, Helvetica, sans-    serif">hello guys i am dhaiwat....</font>
  </iframe> 
```

怎样才能得到里面的文字...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T17:37:51.947

你缺少一个标签。您是否还试图使框架本身内的页面具体化。在框架中加载的页面必须使用它自己的依赖项来指定

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T17:44:55.370

`<iframe>`内容由 url 属性设置，如下所示`url="http://example.com"`：实际页面（在本例中为 examplel.com）加载到 iframe 框中。对于设置常规内容，您应该使用`<div>`，`<span>`或其他语义。

[w3schools ( link1](http://www.w3schools.com/html/default.asp) , [link2](http://www.w3schools.com/tags/) )是一个很好的参考，您可以在其中找到很多关于 html 标记的信息。

PS：该`<font>`标签已弃用，因此您不应再使用它

# c# - c#，找不到类型？

> ID：12341306
> 
> 赞同：0
> 
> 时间：2012-09-09T17:34:18.717
> 
> 标签：c#

尝试对类项目的一些简单代码进行单元测试，但是在我的测试代码中 - 它一直告诉我找不到我的 InventorySelect。它问我是否缺少 using 语句等，但据我所知，这都是正确的。

我的代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Home
{
    class InventoryType
    {

        /// <summary>
        /// Selects the inventory type and returns the selected value
        /// </summary>
        public class InventorySelect
        {
            private string inventoryTypes;
            public String InventoryTypes
            {
                set
                {
                    inventoryTypes = value;
                }

                get
                {
                    return inventoryTypes;
                }
            }

            /// <summary>
            /// Validate that the inventory is returning some sort of value
            /// </summary>
            /// <returns></returns>
            public bool Validate()
            {
                if (InventoryTypes == null) return false;
                return true;
            }
        }
    }
} 
```

我的测试代码

```
using System;
using System.Text;
using System.Collections.Generic;
using System.Linq;
using Microsoft.VisualStudio.TestTools.UnitTesting;
using Home.InventoryType.InventorySelect;

namespace HomeTest
{
    [TestClass]
    public class TestInventoryTypeCase
    {
        [TestMethod]
        public void TestInventoryTypeClass()
        {
            InventorySelect select = new InventorySelect();
            select.inventoryTypes = "Collection";

            if (Validate() = true)
                Console.WriteLine("Test Passed");
            else
                if (Validate() = false)
                    Console.WriteLine("Test Returned False");
                else
                    Console.WriteLine("Test Failed To Run");

            Console.ReadLine();

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T17:36:25.080

在您的测试项目中，您必须添加对要测试的项目（程序集）的引用。

* * *

编辑：您的嵌套类`InventorySelect`位于未声明为公共的类中。将类声明`InventoryType`为公共。您将必须创建一个实例

```
var select = new InventoryType.InventorySelect(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-09T17:40:05.640

您的类是嵌套的，而您的外部类是内部的（未声明`public`）。要么将你的内部类移出外部类，要么 1）将外部类公开，2）`InventorySelect`使用外部类名称限定你的引用，即`InventoryType.InventorySelect`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-09T17:40:43.067

你的`InventoryType`课不是`public`！将其标记为`public`并重新编译。默认情况下是 C# 类`internal`。

# java - instnaceof 或 App 包中的一些看起来很严重的错误

> ID：12341307
> 
> 赞同：0
> 
> 时间：2012-09-09T17:34:22.493
> 
> 标签：java, android, android-intent, instanceof

我做了 2 个活动和一个名为 SomeSpecialIntent 的 Intent 扩展类，当您按下第一个活动的 textview 时，您会使用新的 SomeSpecialIntent 类实例转到第二个活动，但在途中会出现一些奇怪的事情，因为短语 getIntent() instnaceof SomeSpecialIntent 返回第二个活动是假的！

那是怎么回事？

我所做的检查代码：

```
public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        TextView textView = (TextView)findViewById(R.id.textView1);
        textView.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                startActivity(new SomeSpecialIntent(MainActivity.this,SomeActivity.class));
            }

        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

}

public class SomeActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Log.d("Check",""+(getIntent() instanceof SomeSpecialIntent));//returns false!!!!
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

}

public class SomeSpecialIntent extends Intent {

    public SomeSpecialIntent(Context context,
            Class<?> class1) {
        super(context,class1);
    }

} 
```

# ajax - 在 Ajax 提交时淡出

> ID：12341310
> 
> 赞同：0
> 
> 时间：2012-09-09T17:34:53.463
> 
> 标签：ajax, timeout

我有这个 ajax 提交脚本。它确实正确提交并弹出感谢消息，但它不会在 3.2 秒内淡出。目标是显示“感谢您更新”消息。每次用户单击更新按钮 (#tracking_submit) 时都会弹出几秒钟。

```
$('#tracking_submit').click(function(){
$.ajax({
url: "php/tracking.php",
    type:'POST',
    data: dataString,
    success: function(){
           $('#tracking_message').replaceWith("Thank you for updating.");
       $('#tracking_message').delay(3000).fadeOut(300);
        }                   
    });
    return false;   
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T18:27:58.840

我以这种方式解决了这个问题

```
$('#tracking_submit').click(function(){
    $.ajax({
        url: "php/tracking.php",
        type:'POST',
        data: dataString,
        success: function(){
            $('#tracking_message').html("Thank you for updating.").fadeIn('slow');              
            setTimeout(function(){$('#tracking_message').fadeOut('slow');},2000);
        }                   
    });

    return false;   

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T18:31:22.860

尝试使用这个：

`setTimeout(function() { $('#foo').fadeOut(); }, 5000);`

`.delay()`与其他任何东西都不能很好地配合，因为计时器一直在滴答作响，并且 a`.dequeue()`在它启动时执行......无论您是否清除了队列并添加了一个全新的队列。

最好`setTimeout()`直接使用。`setTimeout()`是一个原生的javascript函数。

# symfony - FOSUserBundle：在实际项目中更改密码

> ID：12341313
> 
> 赞同：1
> 
> 时间：2012-09-09T17:35:12.397
> 
> 标签：symfony, fosuserbundle

我已经在我的项目中成功安装了 FOSUserBundle，一切都按预期工作。但是，我正在努力解决如何在我的实际项目中实现它。

我想创建以下设置：

*   以一种形式显示一些用户设置的页面（如新闻订阅），以第二种形式更改密码的可能性，也可能以第三种形式更改用户名。

*   设置表单以及更多信息来自我的控制器中的现有操作，并且运行良好。

我确实尝试了一些事情，但事情还没有真正解决：

*   我将一些功能复制`FOSUserBundle\Controller\ChangePasswordController\changePasswordAction()`到我自己的操作中。这样我就可以获得更改密码表单，创建视图并将其传递给我的模板。

*   我将表单添加到我的模板中`{{ form_widget(form) }}`。表单正在显示，它甚至可以正常工作。我可以更改密码。但是，标签正在丢失，只是读取`Current`、`First`和`Second`。此外，当两个新密码不匹配或留空时，也不会显示错误消息。

总而言之，我觉得我可能以错误的方式做这件事。您能否帮助我如何处理这项任务并指出我可能在哪里做一些愚蠢的事情？

这是我的操作代码，简化为这里的重要内容：

```
# src/Acme/MyBundle/Controller/BackendController.php
public function accountAction(){

    //pretty much a copy of FOSUserBundle\Controller\ChangePasswordController\changePasswordAction()
    $user = $this->get('security.context')->getToken()->getUser();
    $form = $this->container->get('fos_user.change_password.form');
    $formHandler = $this->container->get('fos_user.change_password.form.handler');

    $process = $formHandler->process($user);
    if ($process) {
       //password has been changed, response will be generated
    }

    //more stuff going on here
    $moreStuff = ...

    //render view
    return $this->render('AcmeMyBundle:Backend:account.html.twig', array(
        'form' => $form->createView(),
        'moreStuff' => $moreStuff
    ));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T07:54:33.827

IMO 在一个动作中渲染多个表单并不是一个好主意。 **始终尝试将事物分开，让一个动作只处理一个功能。**

在您的树枝模板中，我建议使用渲染方法：

```
{% render 'AcmeBundle:SomeAction' with{'param:param} %} 
```

如果需要，它将对带有一些参数的操作生成一个 GET 请求。

创建一个将使用子请求呈现树枝模板的操作：

```
// AcmeUserBundle:editAction

{% render 'AcmeUserBundle:changePasswordAction' %}
{% render 'AcmeUserBundle:settingsAction' %}
{% render 'AcmeUserBundle:profileAction' %} 
```

然后您需要为每个表单创建一个操作。

对于密码和用户名修改，如果您的需求只是视觉上的，您还可以覆盖 FOSUserBundle 视图。如果您需要在表单上添加/删除字段，则需要创建新服务。

我建议阅读有关覆盖的 FOSUserBundle 文档：

[https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/index.md#next-steps](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/index.md#next-steps)

# mysql - 在mysql中查找特定月份的最新值

> ID：12341319
> 
> 赞同：0
> 
> 时间：2012-09-09T17:35:30.403
> 
> 标签：mysql

我有一个 mysql 问题，我正在尝试查找特定月份的最新值，可以在[此处](http://sqlfiddle.com/#!2/770f7/10)看到整个表架构和数据，我为此编写的查询如下：

```
max(case 
when Month(py.pay_date) = 8
then amount  end) previous_month_amount 
```

但是它没有返回正确的值，在这种情况下，正确的值应该是：

```
name  previous_month_amount
Carl      30
Mark      40 
```

希望我的问题足够清楚，并感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T20:29:52.737

我将您的问题解释为“每月最后一次付款是多少？” 如果您回答这个问题，那么您只需选择正确的月份即可获得适当的“最后付款”。以下查询执行此操作：

```
select p.name, lp.yr, lp.mon, pa.amount
from persons p join
     (select person_id, year(pay_date) as yr, month(pay_date) as mon,
             max(pay_date) as max_pay_date
      from payment
      group by person_id, year(pay_date), month(pay_date)
     ) lp
     on p.id = lp.person_id join
     payment pa
     on p.id = pa.person_id and
        pa.pay_date = lp.max_pay_date
group by p.name, lp.yr, lp.mon, pa.amount 
```

# ios - 如何将 UIImage 的图像作为 NSString 获取？

> ID：12341320
> 
> 赞同：0
> 
> 时间：2012-09-09T17:35:50.820
> 
> 标签：ios, cocoa-touch, nsstring, uiimage

我需要将 UIImage 图像的值作为字符串获取。

以前我在做：

```
if(images[imageNo].image == [UIImage imageNamed:@"image1.png"])
{ 
```

但现在我有更多的条件，所以我想使用一个开关，做：

```
switch(images[imageNo].image)
{
    case @"image1.png":
    break;
} 
```

有没有办法做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T17:41:29.400

嗯，我不确定你想在这里完成什么，但是使用`[UIImage imageNamed:@"image1.png"]`, 绝对是一种非常糟糕的比较方法，因为你正在无缘无故地动态创建一个新的 UIImage 对象，而且你在使用 == 运算符时你应该使用 isEqual 因为它们是对象。

我相信您想要做的可能是将其转换为 base 64 字符串？如果是这样，您可以使用它：

```
NSData *imageData = UIImageJPEGRepresentation(myImage, 1.0);

NSString *encodedString = [imageData base64Encoding]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T18:06:18.000

提供的答案`H2C03`是适当的。使用字典来关联名称。

但是，另一种方法是使用关联对象。请注意，使用关联对象在空间和时间上都有成本，但它们仅适用于这种情况（添加类别属性）。

```
@interface UIImage (MyImageLabel)
@property (nonatomic, copy) NSString *label;
@end

#import <objc/runtime.h>
@implementation UIImage (MyImageLabel)
static char const kImageLabelKey[1];
- (NSString*)label {
    return objc_getAssociatedObject(self, kImageLabelKey);
}
- (void)setLabel:(NSString *)label {
    objc_setAssociatedObject(self, kImageLabelKey, label, OBJC_ASSOCIATION_COPY_NONATOMIC);
}
@end 
```

现在，您可以在 UIImage 实例上拥有一个 label 属性，如下所示：

```
myImage.label = someLabelStringCouldEvenBeFilename; 
```

和

```
if ([myImage.label isEqualToString:someString]) {
} 
```

典型的警告适用于类别中的任何内容。大多数人会鼓励您使用唯一的前缀或后缀来区分您的类别方法与未来潜在的 Apple 名称。

请注意，您可以向类别添加另一种方法，如下所示...

```
+ (UIImage)myImageNamed:(NSString*)name {
    id result = [self imageNamed:name];
    [result setLabel:name];
    return result;
} 
```

现在您自动设置标签。

当然，如果您将始终创建自己的图像，并避免与关联对象相关联的“肮脏”（尽管您的所有图像都需要是 MyUIImages），您可以将其作为子类来执行。

```
@interface MyUIImage : UIImage
@property (nonatomic, copy) NSString *label;
@end

@implementation MyUIImage
// Now, you override imageNamed:
+ (UIImage*)imageNamed:(NSString*)name {
    UIImage *image = [super imageNamed:name];
    self.label = name;
    return image;
}
@end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T17:48:12.917

您的两种方法都不正确。第一个依赖于缓存（未记录），同时第二个是语法错误 - 'case' 关键字需要一个编译时常量表达式。

据我所知，iOS SDK 中没有这样的方法可以返回图像的文件名——仅仅是因为它不是图像的属性（对于以编程方式创建的图像会返回什么？）。您应该尝试对 NSDictionary 进行操作，将与文件名关联的 UIImage 对象存储为键，并使用`isEqualToString:`.

所以你应该只创建一次图像，并将它们存储在字典中：

```
// assuming `images` is an already created instance variable of your class
[images setObject:[UIImage imageNamed:@"ImgOne.png"] forKey:@"ImgOne.png"];
// and so on, with every image you need

// then once you have to check against a file name, use:
UIImage *img = [images objectForKey:@"FileName.png"];
if ([someImage isEqual:img]) {
    // you can now be sure that the image set to the object was once named "FileName"
} 
```

# java - 使用ORM时如何松耦合DB交互

> ID：12341321
> 
> 赞同：1
> 
> 时间：2012-09-09T17:35:55.210
> 
> 标签：java, hibernate

当您使用 ORM 时，我真的很难理解您是如何将您的应用程序与数据库松散耦合的。我知道有代码优先和数据优先的设计模式，在某些场景中（直截了当的模式......一些电子商务等），这是有道理的。当您在开发阶段有更复杂和/或不断变化的模式时，您如何不将自己束缚在与数据库的紧密耦合中。

我只是想了解如何应用有效/稳健的流程来处理对数据结构的典型更改。

谢谢，

小号

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T18:10:22.773

您与 ORM 工具紧密耦合，但与数据库无关。您可以将完整的应用程序移动到另一个数据库，只需在 hibernate 配置中更改几行即可。通过更改数据库方言和 jdbc url 以匹配新的数据库服务器，您可以将应用程序从 MySql 移植到 PostgreSQL、Oracle 和 SqlServer。这就是松耦合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T22:53:33.877

处理数据结构更改的一种方法是通过迁移。但是 ORM 并不是真正为该任务设计的，因此您最终会以某种方式编写/实现自己的迁移，请参阅[data-migration-with-hibernate](https://stackoverflow.com/questions/1178876/data-migration-with-hibernate)

# php - 使用 php 和 wget 使用 POST (multipart/form-data) 将文本作为文件上传

> ID：12341325
> 
> 赞同：1
> 
> 时间：2012-09-09T17:36:25.953
> 
> 标签：php, bash, curl, multipartform-data, wget

我正在使用 PHP + wget 在旧的 cgi-bin 控制面板网络到传真上上传文件。

cgi（不知道它的语言）检查文件格式（doc txt pdf），然后返回错误：“文件格式不正确”。如果我手动操作，一切正常。

该表单有 6 个步骤长，每个步骤都非常相似（它会询问您的目的地、重试次数等），并且我的 PHP + wget 脚本按预期工作（cookie 处理、发布、获取等）。

这就是表格的样子（从原文简化和翻译）：

```
<FORM ACTION="xyz_httpfileupload" METHOD="post" ENCTYPE="multipart/form-data">
Write the file with full path:

    <INPUT TYPE="FILE" NAME="sourcefile" size=40 maxlength=200>
    <input type=hidden name=destfile value="N527yb">
    <!-- this is a random generated filename -->

    <input type=hidden name=urlredirect value="./xyz_upload?destfile=N527yb&filename=/tmp/VOTU9.txt">
    <!-- this is another random generated filename -->

    <input type=submit name="Upload" value="Upload">
</FORM> 
```

代码（和一些测试）表明您可以同时使用 GET 或 POST。

这是我的代码，后面是解释：

```
$command =  ' wget --debug -qSO- --cookies=on --keep-session-cookies '.
            ' --save-cookies='.$cookie.' --load-cookies='.$cookie.
            ' --header="Content-Type:text/plain" '.
            ' --post-file="'.$file.'" '.
//          ' --post-data="sourcefile='.$rawfile.'" '.
            ' --post-data="'.
                'destfile='.$randfile.
                '&urlredirect=xyz_delivery?destfile='.$randfile.
                '&filename=/tmp/'.$randname.'.txt" '.
                '&pload=Upload "xyz_httpfileupload" ';
$data = shell_exec($command." && sleep 10 2>&1 | tee ".$dir."logfile.txt"); 
```

$cookie 是 cookie 文件的完整服务器路径。它按预期工作。

$file 是我的文件的完整服务器路径。这是一个简单的文件.txt

$randfile 和 $randname 在 HTML 输出中使用 preg_match 检索。

带有 $rawfile 的注释行是尝试发送原始 urlencoded 内容而不是文件：有人说这是一种可行的选择，但不适合我，或者至少我没有正确编码。

我还尝试直接发布到您在 urlredirect 中看到的 URL，但我得到相同的错误文件格式不正确，但如果我跳一步，我无法确保从 cgi 进行正确解析。

在任何情况下 logfile.txt 都是空的。

我知道 curl 会让我的生活更轻松，但是脚本所在的 ubuntu 平台只支持 wget，我觉得我已经成功了一半。

建议我调试它的方法。我不能通过 shell，因为我会丢失每次刷新时生成的随机名称。也许是 TCPdump？感谢您给我的任何建议，我认为这是绝对解决此问题的最终讨论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-03-27T09:40:44.390

经过多年和痛苦，我得出结论，CURL 是正确的方法。这是我到目前为止（BASH）发送文件的代码片段：

```
formname="data=@"$HOME/samplefile.txt
$(curl -X POST -F $formname "http://www.mywebsite.com/form.php") 
```

还有一个聪明的解决方案 (PHP) 可以在不实际使用 any 的情况下获取这些文件，这对安全性也有好处：

```
$tmp_name = $_FILES["data"]["tmp_name"];
$name = "final_folder/".$_FILES['data']['name'];
move_uploaded_file($tmp_name,$name); 
```

干杯!

# javascript - javascript触发chrome的自定义事件

> ID：12341329
> 
> 赞同：0
> 
> 时间：2012-09-09T17:36:52.320
> 
> 标签：javascript, javascript-events

你能给我一个chrome的例子吗，我有这样的东西：

```
function checkVideoStatus(vidElement){
   var currentTime = vidElement.currentTime;
   //now wait 5 seconds
   var updatedTime = vidElement.currentTime;
   //now check if video has freezed
   if(updatedTime == currentTime){
      //fire videoFreeze Event
   }

} 
```

所以我想在这里触发这个事件。另外，真的有必要触发这个事件吗，因为我已经可以在这里调用相关的方法来做我想做的事情了？

是在 JS 中，事件只是像 onChange、onMouseOver 等吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T18:26:57.867

这是一个自定义事件和倒计时的简单模型。

```
<div id="vid" data-current="0">Video</div>​

var vid = document.getElementById('vid'),
    freeze;

vid.addEventListener('freeze', function() {
    console.log('Firing vid.freeze.... ' + this.dataset.current);
    console.log('vid.freeze fired.');
});

(function go() {
    var status;
    vid.innerHTML = 'Video time: ' + vid.dataset.current;

    if (vid.dataset.current < 5) {
        status = vid.dataset.current == 0 ? 'Starting... ' : 'Continuing... ';
        console.log(status + vid.dataset.current);
        setTimeout(go, 1000);
    } else {
        freeze = document.createEvent('CustomEvent');
        freeze.initEvent('freeze', true, true);
        vid.dispatchEvent(freeze);
    }

    vid.dataset.current++;
})();​ 
```

[http://jsfiddle.net/userdude/Ampbm/1](http://jsfiddle.net/userdude/Ampbm/1)

这主要是为了展示如何制作一个在五秒后触发的自定义事件。我还使用该`data-`属性来存储当前时间。你在`if`街区里做什么我不太确定，因为在我看来`.updatedTime`，`.currentTime`每次都可能是同一件事。

# mysql - MySQL 查询中的错误（禁用词？）

> ID：12341331
> 
> 赞同：1
> 
> 时间：2012-09-09T17:37:06.550
> 
> 标签：mysql, sql

我有一个 MySQL 查询，它返回一条错误消息。我想可能是因为“out”这个词。通常，我只会更改字段名称，但我正在开发一些我不习惯的软件，我不知道会有多少变化。所以，我想确定我是否必须这样做。

这是查询：

```
SELECT * FROM probid_bids WHERE auctionid=73 AND out=0 AND invalid=0 
```

这里的错误信息：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“out=0 AND invalid=0”附近使用正确的语法

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T17:40:00.803

`OUT`确实是[保留字](http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html)。您可以将列名包含在反引号中以引用名称，从而避免此问题，如下所示：

```
SELECT * FROM probid_bids WHERE `auctionid`=73 AND `out`=0 AND `invalid`=0 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-09T17:39:51.507

`OUT`是一个[保留字](http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html)（用于指定参数的类型——IN、OUT、INOUT——创建[程序](http://dev.mysql.com/doc/refman/5.0/en/create-procedure.html)时）。尝试将其包含在反引号 ( ```) 中。

[此处描述了](http://dev.mysql.com/doc/refman/5.0/en/identifiers.html)有关如何以及何时引用标识符（表名、列名等）的规则。

注意：某些 MySQL 配置也允许您使用双引号，但应避免这样做；坚持使用反引号来引用标识符和单引号来引用字符串。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-09T17:39:45.987

转义键：

```
SELECT * FROM `probid_bids` WHERE `auctionid`=73 AND `out`=0 AND `invalid`=0 
```

# r - 如何从 glm 对象获取 Z 统计量的值？

> ID：12341338
> 
> 赞同：8
> 
> 时间：2012-09-09T17:38:18.140
> 
> 标签：r, glm

如何从`glm`对象中获取 Z - 统计数据的值作为向量？例如，我有

```
fit <- glm(y ~ 0 + x,binomial) 
```

如何`Pr(>|z|)`以与获取系数估计值相同的方式访问该列`fit$coef`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-09T17:41:04.157

我相信

```
coef(summary(fit))[,"Pr(>|z|)"] 
```

会给你你想要的。（`summary.glm()`返回一个对象，该对象具有`coef()`返回系数表的方法。）（顺便说一下，如果存在访问器方法，则最好使用它们而不是直接访问拟合模型的组件——例如`coef(fit)`比`fit$coef`.）

[从线性回归中提取 p 值和 r 平方](https://stackoverflow.com/questions/5587676/pull-out-p-values-and-r-squared-from-a-linear-regression)给出了类似的答案。

我建议`methods(class="summary.glm")`找到可用的访问器方法，但实际上比这有点棘手，因为默认方法（在这种情况下`coef.default()`）也可能是相关的......

**PS**如果你想要Z值，`coef(summary(fit))[,"z value"]`应该这样做（你的问题有点模棱两可：通常当人们说“Z统计”时，他们的意思是想要*测试统计的值*，而不是p值）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T17:45:11.577

您可以通过以下方式访问您想要的信息

```
utils::data(anorexia, package="MASS") # Some data

anorex.1 <- glm(Postwt ~ Prewt + Treat + offset(Prewt),
                family = gaussian, data = anorexia)  # a glm model 
summary(anorex.1)

summary(anorex.1)$coefficients[,3] # vector of t-values
(Intercept)       Prewt   TreatCont     TreatFT 
   3.716770   -3.508689   -2.163761    2.138933 

summary(anorex.1)$coefficients[,4] # vector of p-values
 (Intercept)        Prewt    TreatCont      TreatFT 
0.0004101067 0.0008034250 0.0339993147 0.0360350847 

summary(anorex.1)$coefficients[,3:4] # matrix 
              t value     Pr(>|t|)
(Intercept)  3.716770 0.0004101067
Prewt       -3.508689 0.0008034250
TreatCont   -2.163761 0.0339993147
TreatFT      2.138933 0.0360350847 
```

`str`函数将向您显示对象中每个元素的位置，并且`[[`访问器（比`$`@DWin 和 @Ben Bolker 指出的更好）将为您提取信息。试着`str(summary(anorex.1))`看看这个函数是做什么的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T05:46:53.990

I use the summary syntax like: summary(my_model)[[1]][[2]]. You can try to use different combinations of numbers in "[[]]" to extract the data required. Of course, if I correctly understood your question :)

# c# - c# ASP.Net WebForm 电子商务支付集成

> ID：12341339
> 
> 赞同：1
> 
> 时间：2012-09-09T17:38:22.537
> 
> 标签：c#, asp.net, sql, e-commerce

为了学习 ASP.Net，我创建了一个 ASP.Net 网站，其主题是当地一家小型酒店公司已经建立了一个网站，人们可以在网站上成为会员，查看可用的酒店进行预订。

我已经到了需要将某种支付系统集成到我的网站上的地步，我做了一些研究，如果我希望用户通过信用卡付款，我需要设置 SSL 等。阶段（初学者）我不想学习。

但是我认为我可以设置一个贝宝系统，我只是不确定如何以及是否可以做我想做的事情。

1.为特定酒店付款，价格以用户选择的入住和退房日期为准。我的数据库在房间表中有一个每晚价格列。2\. 存储付款历史记录我需要为此设置一个 SQL 表，还是由贝宝完成。3.^ 与以前有关，如果用户付款，我需要选择允许他们取消那里的预订，然后也需要取消贝宝付款。4.如果他们预订房间或取消预订电子邮件需要发送。

如果您知道一个涵盖 c# asp.net web 表单和实用程序的基本电子商务的教程，请告诉我一个 paypal 系统！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T18:00:12.890

确保“成为会员”不是租房的先决条件。

PayPal/ASPNET 最大的问题是 ASPNET 每页只允许一个表单标签。这是一个解决方案（免责声明：我自己的博客文章）：

[http://www.codersbarn.com/?tag=/paypal](http://www.codersbarn.com/?tag=/paypal)（三个帖子）

您还应该使用 IPN 进行付款验证 - 请参阅[PayPal 文档](https://www.paypal.com/ipn)。用户无需成为 PayPal 会员即可安全地使用信用卡。但是，您需要在服务器上设置安全证书。

至于取消，他们可以通知酒店所有者，然后他们可以使用 PayPal 管理员申请退款 - 非常简单。这是一个手动过程；把事情简单化。

关于付款历史，PayPal 会这样做，但这并不是一种令人满意的方式。设置您自己的订单表（带有“已确认”字段）并在付款获得授权时更新已确认字段（通过 IPN）。如果取消，您还将更新此信息。

查看 Rick Strahl 的[文章](http://www.code-magazine.com/article.aspx?quickid=0509061)。

# java - Java 哈希表 - 优化现有代码

> ID：12341346
> 
> 赞同：0
> 
> 时间：2012-09-09T17:38:55.537
> 
> 标签：java, algorithm, optimization, data-structures, hashtable

我已经在 java 中实现了一个 hashtale，但我需要优化代码。我认为我有很多循环。如何“减少”循环次数？问题是，当我删除一个元素时，我必须重新哈希表，然后我有鬃毛跳跃 beetwen delete() 和 put()。我不想要任何代码示例，只是指导，因为这是一个学校练习 :)

谢谢

这是我的功能：

```
public void put(String key, Character val) {
    int hashValue = hash(key); 

    if(val == '\r'){
        delete(key); 
    }
    else {
    while(keys[hashValue] != null) {
        if(keys[hashValue].equals(key)) {
            break; 
        }
        hashValue = (hashValue + 1) % M ;  

    }

    keys[hashValue] = key ; 
    vals[hashValue] = val; 
    N++; 
  }
} 

public Character get(String key) {

    int hashValue = hash(key); 
    while(keys[hashValue] != null) {
        if(keys[hashValue].equals(key)){
            return vals[hashValue]; 
        }
        hashValue = (hashValue+1) % M; 
    }
    return null; 
} 

public void delete(String key) {

     int hashValue = hash(key) ; 

     String tempkey; 
     Character tempval; 
     boolean deleted = false; 

     while(keys[hashValue] != null){
         if(keys[hashValue].equals(key)){
             keys[hashValue] = null; 
             vals[hashValue] = null;
             deleted = true;  
             N--; 
             if(keys[(hashValue + 1) % M] == null){ 
                 break; 
             }
         }
         else if(deleted = true){
             tempkey = keys[hashValue]; 
             tempval = vals[hashValue]; 

             keys[hashValue] = null; 
             vals[hashValue] = null; 
             N--; 
             put(tempkey, tempval); 
         }

         hashValue = (hashValue +1) % M; 

     }

    return;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T14:51:18.620

好吧，我想说你需要重新考虑你正在尝试做的设计。特别是碰撞。看起来您正在尝试通过将值移动到下一个存储桶来解决冲突（具有相同哈希码的两个值）。当您重复添加和删除时，无法确保您的密钥不在表中的其他位置。

您可能希望将哈希表设计为链接列表表。这样，冲突的条目就被放入从正确单元格开始的链表中。如果您使用适当的散列函数（将键分布在键空间上接近均匀的键），那么冲突的数量将是最小的。

祝你好运！

# c# - Xna 模型零件覆盖其他零件

> ID：12341347
> 
> 赞同：1
> 
> 时间：2012-09-09T17:39:00.183
> 
> 标签：c#, xna, blender, fbx

我正在尝试在 XNA 中导入一个用搅拌机导出的 .fbx 模型。

这是我的绘图代码

```
public void Draw()
    {
        Matrix[] modelTransforms = new Matrix[Model.Bones.Count];
        Model.CopyAbsoluteBoneTransformsTo(modelTransforms);

        foreach (ModelMesh mesh in Model.Meshes)
        {
            foreach (BasicEffect be in mesh.Effects)
            {
                be.EnableDefaultLighting();
                be.World = GameCamera.World * Translation * modelTransforms[mesh.ParentBone.Index];
                be.View = GameCamera.View;
                be.Projection = GameCamera.Projection;
            }
            mesh.Draw();
        }
    } 
```

问题是当我开始游戏时，一些模型部件会覆盖其他部件而不是落后。我试图从互联网上下载其他型号，但他们有同样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T23:11:01.297

这一行：

```
be.World = GameCamera.World * Translation * modelTransforms[mesh.ParentBone.Index]; 
```

通常以相反的方式排列，矩阵相乘的顺序会使结果不同。尝试这个：

```
be.World = modelTransforms[mesh.ParentBone.Index] * GameCamera.World * Translation; 
```

# java - 带有 Eclipse 的 Java 类 getResource()

> ID：12341348
> 
> 赞同：5
> 
> 时间：2012-09-09T17:39:01.540
> 
> 标签：java, getresource

我整个早上都在努力让 getResource 正常工作，但到目前为止，我必须让它工作的唯一方法是将 res 文件夹移动到 bin 文件夹，然后像这样使用 getResource

```
URL url = MyClass.class.getResource("/res/gfx/entity/entity1.png"); 
```

但是有没有什么办法可以让 res 在 bin 文件夹之外？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-09T18:02:49.277

没关系，我无法相信这是多么愚蠢的修复。

我将 res 文件夹添加到主项目文件夹而不是 bin，然后进入 eclipse

运行 > 运行配置 > 类路径 > 选择用户条目 > 高级 > 添加文件夹 > 选择 res

然后当从 res 调用文件夹时，我没有执行“/res/gfx/entity/entity1.png”，而是执行了“/gfx/entity/entity1.png”

问题解决了！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-09T17:59:02.730

通常，在 Java 项目中，您会将 /res 文件夹添加为项目设置中的源文件夹。

在插件项目中，您可以将该文件夹添加到 build.properties 的输出中。

在动态 Web 项目中，您可以将 /res 文件夹放在 WebContent 文件夹中。

# php - 在 Codeigniter 中使用模态

> ID：12341350
> 
> 赞同：0
> 
> 时间：2012-09-09T17:39:07.107
> 
> 标签：php, codeigniter, twitter-bootstrap, modal-dialog

我正在使用 codeigniter 和 Twitters CSS 框架 Bootstrap 创建一个 Web 应用程序。

我想知道如何使用“视图”[在这里实现他们的模态系统。](http://twitter.github.com/bootstrap/javascript.html#modals)我希望能够单击视图文件中的按钮并将其链接到控制器，但要在模式中打开视图。如果这有意义吗？任何想法都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T17:44:59.290

我正在我当前的项目中执行此操作，我使用 jQuery`$.ajax`将 url 加载到模态元素中，然后将其淡入视图。

在控制器中，如果我想加载模态标记，我使用这个：

```
if ($this->input->is_ajax_request())
{
    $this->load->view('some/view_modal', $data);
}
else 
{
    $this->load->view('some/view', $data);
} 
```

如果您的标记足够简单，您可以在执行 AJAX 调用时仅提取所需的容器元素，但对我来说，我发现使用两个视图更简单。

在您的情况下，您可以简单地将 AJAX 响应数据传递给 Bootstrap 模式函数。

# java - 使用环境变量获取特定系统信息

> ID：12341351
> 
> 赞同：0
> 
> 时间：2012-09-09T17:39:17.497
> 
> 标签：java, operating-system, environment-variables

请看下面的代码

```
Map<String, String> env = System.getenv();
        for (String envName : env.keySet()) {
            System.out.format("%s=%s%n",
                              envName,
                              env.get(envName));} 
```

使用这个代码片段，我获得了我需要的所有信息，以及许多不需要的信息。老实说，我需要的是处理器数量和处理器标识符。这两个存储在 Windows 系统中的环境变量 PROCESSOR_IDENTIFIER 和 NUMBER_OF_PROCESSORS 中。

我无法调用此代码

```
System.out.println("Processor Data: "+ System.getenv("PROCESSOR_IDENTIFIER")); 
    System.out.println("Number of Processors: "+System.getenv("NUMBER_OF_PROCESSORS")); 
```

原因是，oracle 它自己说环境变量因系统而异。这意味着，USERNAME windows 环境变量是 LOGIN 或 UNIX 系统中的用户名。像那样，它在其他系统中可能有各种其他名称。

但是，我真的不需要循环提供给我的所有信息。我只需要这两个。我正在考虑使用如下代码。

```
if("os.name" == "Windows")
{
System.out.println("Processor Data: "+ System.getenv("PROCESSOR_IDENTIFIER")); 
} 
```

但是，在那种情况下，我不知道我需要检查多少个系统（我的意思是，这些环境变量是否会从操作系统更改为操作系统或系统更改为系统？如果我说得更清楚，这些变量在 Linux 中是否相同内核或跨 Ubuntu、Fedora、Red Hat 等进行更改？）

我不知道如何通过省略其余数据来获取我需要的仅有的两个数据。请帮忙。我很高兴看到代码有帮助。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T17:54:34.323

你能试试`Runtime.getRuntime().availableProcessors();`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T17:46:53.453

CPU/内核数：[在 Java 中查找内核数](https://stackoverflow.com/questions/4759570/finding-number-of-cores-in-java) 不要认为以方便的跨平台方式获取 CPU 类型是可能的。

# javascript - 仅使用纯 css 或 javascript 或 jquery 将样式添加到文本区域

> ID：12341352
> 
> 赞同：1
> 
> 时间：2012-09-09T17:39:19.523
> 
> 标签：javascript, html, css

我正在尝试检查是否可以将样式添加到文本框，类似于雅虎在撰写页面中的“收件人”字段中使用的样式。用包装器内的名称替换电子邮件 ID。我想知道这是否可以是用css还是javscript实现的？？我将附上一个快照，以便您可以在这里看到我试图实现的目标。我还将添加一个我尝试过但失败的小提琴链接![在此处输入图像描述](../Images/127f8443a2ae4af70155cd501e1c498a.png)

[http://jsfiddle.net/sztnN/2/](http://jsfiddle.net/sztnN/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T18:05:57.900

JavaScript 在这里所做的是将普通`<input>`或`<textarea>`元素转换为可能`<div>`包含值的元素。这是一个示例和有关如何在 JQuery 中实现该目标的指南：

[http://www.devthought.com/projects/jquery/textboxlist/](http://www.devthought.com/projects/jquery/textboxlist/)

# php - 动态入伍

> ID：12341362
> 
> 赞同：1
> 
> 时间：2012-09-09T17:40:19.227
> 
> 标签：php

我想知道是否有人可以编写一个脚本来动态更改嵌入代码中的频道名称。

例如： [http://www.domain.com/live/thechannelname](http://www.domain.com/live/thechannelname) 我基本上想要在嵌入代码中替换频道名的内容

> `<object type="application/x-shockwave-flash" data="http://www.justin.tv/widgets/live_embed_player.swf?channel=thechannelname" id="live_embed_player_flash" height="300" width="400" bgcolor="#000000"><param name="allowFullScreen" value="true"/><param name="allowScriptAccess" value="always" /><param name="allowNetworking" value="all" /><param name="movie" value="http://www.justin.tv/widgets/live_embed_player.swf" /><param name="flashvars" value="hostname=www.justin.tv&channel=thechannelname&auto_play=false&start_volume=25" /></object>`

我将把它添加到 xenforo 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T17:47:10.173

您可能想看看 mod_rewrite。看看[这个教程](http://net.tutsplus.com/tutorials/other/a-deeper-look-at-mod_rewrite-for-apache/)。

# vb.net - DateTimePicker 自定义格式不显示

> ID：12341363
> 
> 赞同：2
> 
> 时间：2012-09-09T17:40:20.730
> 
> 标签：vb.net, winforms

这是一个使用 VS 2010 Pro 的 WinForms、VB.NET 应用程序。我在表单中添加了一个 datetimepicker。将自定义属性设置为 MM/dd/yyy。我的功能的相关部分如下：

```
 If IsDate(_uni.unitRentDate) Then
            t_TenantUnitRentDate.Value = _uni.unitRentDate
        Else
            If Not _uni.unitRentDate.HasValue Then
                t_TenantUnitRentDate.Value = New DateTime(2010, 1, 1)
            End If

        End If 
```

_uni 是 EF 中的一个表，unitRentDate 作为 DATETIME 存储在该表中。日期时间选择器是 t_TenantUnitRentDate。

我遇到的问题是，当表单加载时 dateTimePicker 以本示例的格式显示日期 Saturday, September 10, 2012 。这根本不是我想要的。它应该显示为 9/10/2012 。为什么会失败我查看了从数据库返回的日期，当时它显示了正确的日期值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T17:46:56.060

通过将 Format 属性设置为“自定义”再试一次

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T17:48:23.777

可能自定义格式`MM/dd/yyy`无效。年份必须有两位或四位数字。

```
MM/dd/yy 
```

或者

```
MM/dd/yyyy 
```

# java - java CastClassException

> ID：12341364
> 
> 赞同：-4
> 
> 时间：2012-09-09T17:40:29.717
> 
> 标签：java, casting

我有一个返回对象类型列表的方法，`IFRS`如下所示

```
 List <Ifrs> em.createNamedQuery listrecup = ("Ifrs.all"). GetResultList; 
```

问题在于每个

```
 for (Ifrs ifrs: listrecup) {
    } 
```

`CastClassException`带有消息“无法将 java.lang.Object 转换为 Ifrs”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T17:45:03.140

listrecup 不是 Ifrs[] 类型。它似乎是 Object[] 类型 - 你不能将 Object 转换为 Ifrs（如果它实际上不是 Ifrs）。您可以检查是否可以使用`instanceof`运算符将​​对象转换为另一个类：

```
for (int i = 0; i < listrecup.length; i++){
    if (ifrs instanceof Ifrs) {
        // Yay! We can cast!
        Ifrs ifrs = (Ifrs)listrecup[i];
    }
} 
```

# objective-c - 在网络故障的情况下如何使用 MKNetworkKit 恢复下载

> ID：12341373
> 
> 赞同：3
> 
> 时间：2012-09-09T17:41:08.183
> 
> 标签：objective-c, ios, mknetworkkit

MKNetworkKit 据称支持恢复中断的下载，但目前尚不清楚如何处理。在另一个线程中，它的开发人员说，如果*服务器*发送 Range 标头，它就可以工作。

[如何取消或暂停 MKNetworkKit iOS 的下载操作？](https://stackoverflow.com/questions/9316414/how-to-cancel-or-pause-download-operation-of-mknetworkkit-ios)

但是，据我了解，发送 Range 标头的是*客户端。*我希望图书馆看到已经下载了多少，然后请求适当的范围。我在代码中看不到任何这样做的地方。

方法

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data { 
```

确实检查是否指定了范围，但似乎没有代码实际执行指定。

有没有人让 MKNetworkKit 在网络故障后恢复下载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-19T10:32:55.360

在可冻结选项之外，据我所知，它不适用于 GET，标准 MKNetworkKit 中没有办法恢复下载。但是，稍作修改确实可以让您恢复已停止的下载

beginBackgroundTaskWithExpirationHandler

或通过

operationFailedWithError

它需要将下载的数据大小保存到另一个属性，比如 resumeDownloadedDataSize 并通过通知将其提供给调用对象，例如

```
NSDictionary *resumeDownloadedDataSizeDetails = [[NSDictionary alloc] initWithObjectsAndKeys:[NSNumber numberWithLong:self.resumeDownloadedDataSize], @"resumeDownloadedDataSize", nil];
[[NSNotificationCenter defaultCenter] postNotificationName:kMKNetworkOperationEndBackgroundTaskWithExpirationHandler object:self userInfo:resumeDownloadedDataSizeDetails]; 
```

（在 MkNetworkKit.h 中定义 kMKNetworkOperationEndBackgroundTaskWithExpirationHandler）

将 resumeDownloadedDataSize 设置为 0，操作完成时不会出现错误或中断，并在要恢复时使其等于 downloadDataSize。

然后加

```
if (self.resumeDownloadedDataSize !=0) {

            NSString* range = @"bytes=";
            range = [range stringByAppendingString:[[NSNumber numberWithLong:self.resumeDownloadedDataSize] stringValue]];
            range = [range stringByAppendingString:@"-"];

            [[self request] setValue:range forHTTPHeaderField:@"Range"];
} 
```

至

```
-(void) start 
```

这段代码在开头

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {

    if (self.downloadedDataSize == 0) {
        // This is the first batch of data
        // Check for a range header and make changes as neccesary
        NSString *rangeString = [[self request] valueForHTTPHeaderField:@"Range"];
        if ([rangeString hasPrefix:@"bytes="] && [rangeString hasSuffix:@"-"]) {
            NSString *bytesText = [rangeString substringWithRange:NSMakeRange(6, [rangeString length] - 7)];
            self.startPosition = [bytesText integerValue];
            self.downloadedDataSize = self.startPosition;
        }
    } 
```

现在适用于我添加的偏移量，因为客户要求了一个范围。

我还添加了

```
@property (assign, nonatomic) NSUInteger resumeDownloadedDataSize; 
```

到头文件，这样我就可以从其他视图中设置它。

现在在您的调用对象中，您可以收听通知

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(didMKNetworkOperationEndBackgroundTaskWithExpirationHandler:) name:kMKNetworkOperationEndBackgroundTaskWithExpirationHandler object:nil]; 
```

检查它是否适合您并重新设置范围的操作。

```
- (void) didMKNetworkOperationEndBackgroundTaskWithExpirationHandler: (NSNotification*) notification
{
    if ([[notification object] isEqual:downloadOperation]) {
        resumeDownloadedDataSize = [notification.userInfo objectForKey:@"resumeDownloadedDataSize"];
        bDownloadOperationCancelled=YES;
    }
} 
```

当我使用它来下载大文件时，到期处理程序到期，当我回到前台时我重新启动操作。

```
if (bDownloadOperationCancelled) {
        NSLogDebug(@"DownloadOperationCancelled restarted");
        [self doFileDownload];
        bDownloadOperationCancelled=NO;
} 
```

在哪里

```
- (void) doFileDownload
{
    downloadOperation = [ApplicationDelegate.downloadEngine downloadVideoFile:authDownloadURLString toFile:downloadPath withOffset:resumeDownloadedDataSize];
(Your code for handling completion blocks etc)
…

} 
```

最后一步是确保在您的引擎中将附加设置为 YES

```
[op addDownloadStream:[NSOutputStream outputStreamToFileAtPath:filePath append:YES]]; 
```

因此，简历会添加到文件中。

还要明确一点，我使用的是 AWS CloudFront，当数据存储在 S3 中时，它支持使用范围标头。

这似乎对我有用。我相信有更优雅的方式来做到这一点。

# php - 微依赖，避免耦合，对象创建对象

> ID：12341375
> 
> 赞同：0
> 
> 时间：2012-09-09T17:41:44.407
> 
> 标签：php, oop, dependency-injection

> **可能重复：**
> [依赖地狱——如何将依赖传递给深度嵌套的对象？](https://stackoverflow.com/questions/6094744/dependency-hell-how-does-one-pass-dependencies-to-deeply-nested-objects)

在围绕强依赖注入构建的系统中，我想知道如何处理这样的人为情况：

```
<?php
class LogWriter
{
    public function write(Log $log)
    {
        echo $log->getMessage();
    }
}

class Log
{
    private $message;
    public function setMessage($message)
    {
        $this->message = $message;
    }
    public function getMessage()
    {
        return $this->message;
    }
}

class Logger
{
    private $writer;
    public function __construct(LogWriter $writer)
    {
        $this->writer = $writer;
    }
    public function write($message)
    {
        // Here is the dependency
        $log = new Log();
        $log->setMessage($message);
        $this->writer->write($log);
    }
} 
```

Logger::write() 方法创建一个 Log 实例，并将其传递给 log writer。我的直觉告诉我这是一个糟糕的方法，从现在开始一个月后，我将追踪一个与之相关的错误，并且我可能想在测试期间将 Log 类切换为其他东西。

但是如何避免呢？唯一想到的是将 Log*类型*传递给 Logger 构造函数，并将我的 Logger 类更改为：

```
class Logger
{
    private $writer;
    private $log_type;
    public function __construct(LogWriter $writer, $log_type)
    {
        $this->writer = $writer;
        $this->log_type = $log_type;
    }
    public function write($message)
    {
        $log = new $this->log_type();
        $log->setMessage($message);
        $this->writer->write($log);
    }
} 
```

然后像这样创建一个新的 Logger 实例：

```
$log_writer = new LogWriter();
$logger = new Logger($log_writer, "Log"); 
```

但这感觉有点骇人听闻。那么你如何处理这样的微依赖呢？

注意：我以日志记录类为例，我并不是在寻找解决这个确切问题的方法。我可能只会使用数组而不是 Log 类。

编辑：在更复杂的情况下，我可能会将依赖注入容器传递给 Logger 类，并使用它来创建 Log 的实例，但这对于简单的 logger 类来说似乎过于复杂。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T17:57:49.057

由于您的 Log 对象实际上只是一个数据传输对象或值对象，因此您可以在 Logger 类中创建它。在这种情况下可以这样做。您不需要向 Logger 传递任何内容。但是您是对的，因为那时[您将无法轻松地模拟/存根。](http://sebastian-bergmann.de/archives/885-Stubbing-Hard-Coded-Dependencies.html)

作为替代方案，如果您想将 Log 类与 Logger 分离，也可以注入 Factory：

```
$logger = new Logger($logWriter, new LogFactory); 
```

然后从那里创建日志类型：

```
public function write($message)
{
    $log = $this->logFactory->createNew();
    … 
```

这封装了 Factory 类中的创建逻辑。Factory 内部仍将具有`Log`硬编码的类型，但工厂拥有它是可以的。然后，您只需在调用时测试它是否返回正确的类型`createNew`。在您的消费者中，您可以存根该调用。

如果您不想为此创建一个成熟的 Factory 类，您也可以使用 Lambda 代替 Factory。由于它捕获了基本的创建逻辑，因此它实际上与工厂相同，只是没有类：

```
$logger = new Logger($logWriter, function() { return new Log; }); 
```

进而

```
public function write($message)
{
    $log = call_user_func($this->createLogCallback);
    … 
```

Factoy 和 Lambda 方法都允许在您的单元测试中替换 Log 类型。再说一次，在您的场景中替换 Log 类型似乎没有必要。该`Log`类型没有它自己的任何依赖项，因此您几乎可以在这里使用真正的交易。您`write`只需查看`LogWriter`. 您不会对 Log Mock 进行显式断言，但如果编写器为给定的输入生成预期的输出，则`write`可以安全地假设该`Log`类型按预期进行协作。

另请参阅[http://misko.hevery.com/2008/09/30/to-new-or-not-to-new](http://misko.hevery.com/2008/09/30/to-new-or-not-to-new)了解更多详情。

# javascript - 如何从未来的函数调用中清除先前的变量

> ID：12341378
> 
> 赞同：2
> 
> 时间：2012-09-09T17:42:07.103
> 
> 标签：javascript, jquery

为了更好地解释我的问题，我创建了[简化的 jsfiddle 示例](http://jsfiddle.net/6gX8z/4/)。
从下拉菜单中选择“a array”，然后选择“b array”并向下滚动时，从“b array”加载前5个元素，然后从“a array”加载所有未加载的元素，然后是“b array”的其余部分，但仅“b 数组”元素应该出现。
我的问题是如何摆脱在 div 中加载的先前选择的数组元素？

**已编辑：** 这是我第一次尝试在 javascript 中编写一些东西，所以很抱歉大家因为看我的代码而眼花缭乱，感谢您的帮助 - @ThiefMaster 建议 unbind 对我有用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T17:44:08.070

问题是旧`scroll`事件仍然受到约束。你需要解开它们。

快速修复将使用

```
$("#objects").unbind('scroll').scroll(function() { 
```

代替

```
$("#objects").scroll(function() { 
```

演示（也删除了`eval`废话）：http: [//jsfiddle.net/ThiefMaster/6gX8z/8/](http://jsfiddle.net/ThiefMaster/6gX8z/8/)

# windows-phone-7 - 如何在 LongListSelector 中包装 ItemsPanel？

> ID：12341381
> 
> 赞同：12
> 
> 时间：2012-09-09T17:42:13.577
> 
> 标签：windows-phone-7, xaml, windows-phone, wrappanel, longlistselector

我正在使用列表框和包装面板来显示数据。

例如：

```
 <ListBox ItemTemplate="{StaticResource ItemTemplateListBoxAnimation}">
        <ListBox.ItemsPanel>
            <ItemsPanelTemplate>
                <toolkit:WrapPanel ItemHeight="150" ItemWidth="150">
                </toolkit:WrapPanel>
            </ItemsPanelTemplate>
        </ListBox.ItemsPanel>
    </ListBox>

    <DataTemplate x:Key="ItemTemplateListBoxAnimation">
        <Grid Width="130" Height="130">
            <Image Source="{Binding Image}"/>
        </Grid>
    </DataTemplate> 
```

它看起来像：

![在此处输入图像描述](../Images/b5e028c412fb531fd6eb2f2fc80b37c3.png)

现在**我需要使用 LongListSelector**和分组结果：

```
 <toolkit:LongListSelector ItemTemplate="{StaticResource ItemTemplateListBoxAnimation}">
        <toolkit:LongListSelector.GroupItemsPanel>
            <ItemsPanelTemplate>
                <toolkit:WrapPanel/>
            </ItemsPanelTemplate>
        </toolkit:LongListSelector.GroupItemsPanel>
    </toolkit:LongListSelector> 
```

**但它看起来像：**

![在此处输入图像描述](../Images/f99cf5ebacf9aa695015c406315762dd.png)

**我需要得到：**

![在此处输入图像描述](../Images/872079950c7f94436c5e6a1f0d44681e.png)

**你的假设？谢谢**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T23:57:40.180

问题是该`GroupItemsPanel`属性没有改变`ItemsPanel`主列表的，而是`ItemsPanel`组标题的，正如可以在这里看到的（图片来自[http://www.windowsphonegeek.com/articles/wp7-longlistselector-in-depth --part2-data-binding-scenarios](http://www.windowsphonegeek.com/articles/wp7-longlistselector-in-depth--part2-data-binding-scenarios) ):

![组标头包装](../Images/498c68e7ceb361f4597e1d2e0ca0f20e.png)

不幸的是，WP 工具包似乎没有公开`ItemsPanel`你想要的，所以你必须修改工具包源以获得你想要的行为。

1.  从这里获取源代码：[https ://phone.codeplex.com/SourceControl/changeset/view/80797](https://phone.codeplex.com/SourceControl/changeset/view/80797)

2.  解压，在 Visual Studio 中打开 Microsoft.Phone.Controls.Toolkit.WP7.sln 解决方案。

3.  在 Microsoft.Phone.Controls.Toolkit.WP7 项目下，打开 Themes/Generic.xaml

4.  向下滚动到`Style`适用于`LongListSelector`(TargetType="controls:LongListSelector")

5.  将 更改`TemplatedListBox.ItemsPanel`为`WrapPanel`

    ```
     <primitives:TemplatedListBox.ItemsPanel>
                        <ItemsPanelTemplate>
                            <controls:WrapPanel/>
                        </ItemsPanelTemplate>
                    </primitives:TemplatedListBox.ItemsPanel> 
    ```

6.  重建并引用新的 dll，您的项目应该正确包装！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-09T09:27:35.343

您可以使用自定义样式覆盖它

```
<toolkit:LongListSelector 
                        Background="{StaticResource FCBackground}"  
                        HorizontalContentAlignment="Stretch" 
                        ItemsSource="{Binding NowShowingEvents}"
                        ItemTemplate="{StaticResource EventsListMediumItemTemplate}"  
                        IsFlatList="True" 
                        Style="{StaticResource LongListSelectorStyleCustom}"
                                >

                    </toolkit:LongListSelector>

   <Style x:Key="LongListSelectorStyleCustom" TargetType="toolkit:LongListSelector">
        <Setter Property="Background" Value="{StaticResource PhoneBackgroundBrush}"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="toolkit:LongListSelector">
                    <toolkitPrimitives:TemplatedListBox x:Name="TemplatedListBox" Background="{TemplateBinding Background}">
                        <toolkitPrimitives:TemplatedListBox.ItemContainerStyle>
                            <Style TargetType="ListBoxItem">
                                <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                            </Style>

                        </toolkitPrimitives:TemplatedListBox.ItemContainerStyle>
                        <toolkitPrimitives:TemplatedListBox.ItemsPanel>
                            <ItemsPanelTemplate>
                                <toolkit:WrapPanel Margin="24,0,12,24"/>
                            </ItemsPanelTemplate>
                        </toolkitPrimitives:TemplatedListBox.ItemsPanel>
                    </toolkitPrimitives:TemplatedListBox>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

# android - build.xml 和 project_name.xml 之间的区别

> ID：12341386
> 
> 赞同：6
> 
> 时间：2012-09-09T17:43:35.257
> 
> 标签：android, ant, build, intellij-idea

我现在花了几个小时试图了解 Android 的构建过程。

我正在使用适用于 Android 的 IntelliJ Idea（这是一个很棒的工具）。我在 IntelliJ 名称“Hello Android”中打开了一个测试项目。该项目有这个文件名`build.xml`，代码如下

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="HelloAndroid" default="help">

    <!-- The local.properties file is created and updated by the 'android' tool.
         It contains the path to the SDK. It should *NOT* be checked into
         Version Control Systems. -->
    <property file="local.properties" />

    <!-- The ant.properties file can be created by you. It is only edited by the
         'android' tool to add properties to it.
         This is the place to change some Ant specific build properties.
         Here are some properties you may want to change/update:

         source.dir
             The name of the source directory. Default is 'src'.
         out.dir
             The name of the output directory. Default is 'bin'.

         For other overridable properties, look at the beginning of the rules
         files in the SDK, at tools/ant/build.xml

         Properties related to the SDK location or the project target should
         be updated using the 'android' tool with the 'update' action.

         This file is an integral part of the build system for your
         application and should be checked into Version Control Systems.

         -->
    <property file="ant.properties" />

    <!-- if sdk.dir was not set from one of the property file, then
         get it from the ANDROID_HOME env var.
         This must be done before we load project.properties since
         the proguard config can use sdk.dir -->
    <property environment="env" />
    <condition property="sdk.dir" value="${env.ANDROID_HOME}">
        <isset property="env.ANDROID_HOME" />
    </condition>

    <!-- The project.properties file is created and updated by the 'android'
         tool, as well as ADT.

         This contains project specific properties such as project target, and library
         dependencies. Lower level build properties are stored in ant.properties
         (or in .classpath for Eclipse projects).

         This file is an integral part of the build system for your
         application and should be checked into Version Control Systems. -->
    <loadproperties srcFile="project.properties" />

    <!-- quick check on sdk.dir -->
    <fail
            message="sdk.dir is missing. Make sure to generate local.properties using 'android update project' or to inject it through the ANDROID_HOME environment variable."
            unless="sdk.dir"
    />

    <!--
        Import per project custom build rules if present at the root of the project.
        This is the place to put custom intermediary targets such as:
            -pre-build
            -pre-compile
            -post-compile (This is typically used for code obfuscation.
                           Compiled code location: ${out.classes.absolute.dir}
                           If this is not done in place, override ${out.dex.input.absolute.dir})
            -post-package
            -post-build
            -pre-clean
    -->
    <import file="custom_rules.xml" optional="true" />

    <!-- Import the actual build file.

         To customize existing targets, there are two options:
         - Customize only one target:
             - copy/paste the target into this file, *before* the
               <import> task.
             - customize it to your needs.
         - Customize the whole content of build.xml
             - copy/paste the content of the rules files (minus the top node)
               into this file, replacing the <import> task.
             - customize to your needs.

         ***********************
         ****** IMPORTANT ******
         ***********************
         In all cases you must update the value of version-tag below to read 'custom' instead of an integer,
         in order to avoid having your file be overridden by tools such as "android update project"
    -->
    <!-- version-tag: 1 -->
    <import file="${sdk.dir}/tools/ant/build.xml" />

</project> 
```

然后我在 IntelliJ Idea *Build -> Generate Ant Build*中做了以下操作并选择了以下选项

1.  生成多文件 ant build
2.  输出文件名：helloandroid
3.  启用 UI 表单编译
4.  使用项目文件中的 JSDK 定义

这导致创建了三个额外的文件

1.  你好android.properties
2.  你好android.xml
3.  module_helloandroid.xml

**你好android.properties**

```
path.variable.maven_repository=C\:\\Users\\abc\\.m2\\repository
jdk.home.android_4.1_platform=C\:/Program Files (x86)/Android/android-sdk 
```

**你好android.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="HelloAndroid" default="help">

    <!-- The local.properties file is created and updated by the 'android' tool.
         It contains the path to the SDK. It should *NOT* be checked into
         Version Control Systems. -->
    <property file="local.properties" />

    <!-- The ant.properties file can be created by you. It is only edited by the
         'android' tool to add properties to it.
         This is the place to change some Ant specific build properties.
         Here are some properties you may want to change/update:

         source.dir
             The name of the source directory. Default is 'src'.
         out.dir
             The name of the output directory. Default is 'bin'.

         For other overridable properties, look at the beginning of the rules
         files in the SDK, at tools/ant/build.xml

         Properties related to the SDK location or the project target should
         be updated using the 'android' tool with the 'update' action.

         This file is an integral part of the build system for your
         application and should be checked into Version Control Systems.

         -->
    <property file="ant.properties" />

    <!-- if sdk.dir was not set from one of the property file, then
         get it from the ANDROID_HOME env var.
         This must be done before we load project.properties since
         the proguard config can use sdk.dir -->
    <property environment="env" />
    <condition property="sdk.dir" value="${env.ANDROID_HOME}">
        <isset property="env.ANDROID_HOME" />
    </condition>

    <!-- The project.properties file is created and updated by the 'android'
         tool, as well as ADT.

         This contains project specific properties such as project target, and library
         dependencies. Lower level build properties are stored in ant.properties
         (or in .classpath for Eclipse projects).

         This file is an integral part of the build system for your
         application and should be checked into Version Control Systems. -->
    <loadproperties srcFile="project.properties" />

    <!-- quick check on sdk.dir -->
    <fail
            message="sdk.dir is missing. Make sure to generate local.properties using 'android update project' or to inject it through the ANDROID_HOME environment variable."
            unless="sdk.dir"
    />

    <!--
        Import per project custom build rules if present at the root of the project.
        This is the place to put custom intermediary targets such as:
            -pre-build
            -pre-compile
            -post-compile (This is typically used for code obfuscation.
                           Compiled code location: ${out.classes.absolute.dir}
                           If this is not done in place, override ${out.dex.input.absolute.dir})
            -post-package
            -post-build
            -pre-clean
    -->
    <import file="custom_rules.xml" optional="true" />

    <!-- Import the actual build file.

         To customize existing targets, there are two options:
         - Customize only one target:
             - copy/paste the target into this file, *before* the
               <import> task.
             - customize it to your needs.
         - Customize the whole content of build.xml
             - copy/paste the content of the rules files (minus the top node)
               into this file, replacing the <import> task.
             - customize to your needs.

         ***********************
         ****** IMPORTANT ******
         ***********************
         In all cases you must update the value of version-tag below to read 'custom' instead of an integer,
         in order to avoid having your file be overridden by tools such as "android update project"
    -->
    <!-- version-tag: 1 -->
    <import file="${sdk.dir}/tools/ant/build.xml" />

</project> 
```

**module_helloandroid.xml**

```
<copy todir="${helloandroid.output.dir}">
  <fileset dir="${module.helloandroid.basedir}/src">
    <patternset refid="compiler.resources"/>
    <type type="file"/>
    <patternset refid="excluded.from.compilation.helloandroid"/>
  </fileset>
  <fileset dir="${module.helloandroid.basedir}/gen">
    <patternset refid="compiler.resources"/>
    <type type="file"/>
    <patternset refid="excluded.from.compilation.helloandroid"/>
  </fileset>
</copy> 
```

**我的问题**

1.  为什么我们有不同的 build.xml 和 helloandroid.xml 等两个文件？
2.  这些文件可以在构建过程中使用吗？
3.  我们可以编辑这些文件以添加更多的 Ant 构建脚本吗？
4.  为什么 build.xml 在 处显示错误`env.ANDROID_HOME`？
5.  什么 helloandroid.xml 显示错误`jdk.home.1.6`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T21:33:10.093

1.  构建文件可以包含其他构建文件，这是一种正常做法。您的项目与文件`helloandroid.xml`完全相同`build.xml`，您可以修改您喜欢的任何一个并丢弃另一个。该`build.xml`文件是 Ant 的首选约定。您的属性文件仅用于设置属性，并且模块文件看起来不会被调用，但可能存在，以便您可以包含它并按照它的指定进行文件复制。

2.  是的，只需包括它们。可以使用该`helloandroid.properties`文件来代替对通用`project.properties`文件的调用，或者您可以保持原样。

3.  是的，请编辑它们，尽管它们应该足以让您轻松开始。

4.  看起来您的 ANDROID_HOME 环境变量尚未设置。您可以通过 IntelliJ 进行设置，但我建议在您的操作系统级别进行设置。

5.  看起来您的 JAVA_HOME 环境变量尚未设置。您可以通过 IntelliJ 进行设置，但我建议在您的操作系统级别进行设置。

# php - facebook 图形 api 字段图像宽度

> ID：12341387
> 
> 赞同：0
> 
> 时间：2012-09-09T17:43:45.790
> 
> 标签：php, facebook, object

如果它的高度和宽度> = 某物，如何获取源值

我的工作：我使用 facebook graph api 来获取这些值.. 它的输出为 json 对象.. 这不是问题，我只需要获取一个链接意味着它的宽度必须给定值的源值。

或者如果可以在 facebook 图表中给出条件会更容易

我的代码：

```
$url = "https://graph.facebook.com/{$this->post[id]}?fields=images&access_token={$this->user->token}";
$url = file_get_contents($url);
$link = (array)json_decode($url); 
```

假设我想获得源值，它的高度应该> 420 ...

```
Array
(
    [images] => Array
        (
            [0] => stdClass Object
                (
                    [height] => 1152
                    [width] => 2048
                    [source] => https://sphotos-b.xx.fbcdn.net/hphotos-snc6/256375_463526207001195_392636722_o.jpg
                )

            [1] => stdClass Object
                (
                    [height] => 540
                    [width] => 960
                    [source] => https://sphotos-b.xx.fbcdn.net/hphotos-ash4/427440_463526207001195_392636722_n.jpg
                )

            [2] => stdClass Object
                (
                    [height] => 405
                    [width] => 720
                    [source] => https://sphotos-b.xx.fbcdn.net/hphotos-ash4/s720x720/427440_463526207001195_392636722_n.jpg
                )

            [3] => stdClass Object
                (
                    [height] => 337
                    [width] => 600
                    [source] => https://sphotos-b.xx.fbcdn.net/hphotos-ash4/s600x600/427440_463526207001195_392636722_n.jpg
                )

            [4] => stdClass Object
                (
                    [height] => 270
                    [width] => 480
                    [source] => https://sphotos-b.xx.fbcdn.net/hphotos-ash4/s480x480/427440_463526207001195_392636722_n.jpg
                )

            [5] => stdClass Object
                (
                    [height] => 180
                    [width] => 320
                    [source] => https://sphotos-b.xx.fbcdn.net/hphotos-ash4/s320x320/427440_463526207001195_392636722_n.jpg
                )

            [6] => stdClass Object
                (
                    [height] => 101
                    [width] => 180
                    [source] => https://fbcdn-photos-a.akamaihd.net/hphotos-ak-ash4/427440_463526207001195_392636722_a.jpg
                )

            [7] => stdClass Object
                (
                    [height] => 73
                    [width] => 130
                    [source] => https://fbcdn-photos-a.akamaihd.net/hphotos-ak-ash4/427440_463526207001195_392636722_s.jpg
                )

            [8] => stdClass Object
                (
                    [height] => 73
                    [width] => 130
                    [source] => https://fbcdn-photos-a.akamaihd.net/hphotos-ak-ash4/s75x225/427440_463526207001195_392636722_s.jpg
                )

        )

    [id] => 463526207001195
    [created_time] => 2012-08-19T16:22:21+0000
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T22:22:53.597

You can specify the width and height parameters in the graph api call to retrieve the picture in alternate sizes.
eg - [https://graph.facebook.com/4/picture?width=300&height=420](https://graph.facebook.com/4/picture?width=300&height=420)
Please refer to this blog post for more details -
[https://developers.facebook.com/blog/post/2012/08/22/platform-updates--operation-developer-love/](https://developers.facebook.com/blog/post/2012/08/22/platform-updates--operation-developer-love/)

# javascript - 如何让程序员在 javascript 中实现正确的回调？

> ID：12341388
> 
> 赞同：0
> 
> 时间：2012-09-09T17:43:46.623
> 
> 标签：javascript, callback, libraries

我想知道是否可以向库用户显示一个函数需要一个回调，比如说 5 个参数，其中 3 个是数组（例如）。或者换句话说，如何通知程序员不要弄乱回调参数？这是一个代码示例：

```
function doSomething(someArray, callback) {
    var i = 0;
    for ( i = 0; i < someArray.length; i += 1) {
        callback(someArray[i]);
    }
} 
```

程序员如何找出他们的回调函数应该接受哪些参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T17:46:54.417

Javascript 没有参数类型检查，您无法对回调进行运行时检查以查看它期望的参数。您可以在运行时做的一件事是，您可以检查`callback.length`它声明了多少参数作为形式参数。函数不需要定义它的形式参数，因为它也可以使用 arguments 对象来获取参数，但是如果你想强制它们以某种方式编程，你可以这样检查。有关更多信息，请参阅[此文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/length)。

您最好的选择是良好的文档，以使其绝对清楚（通常也带有示例代码）应该如何编写回调。

如果您想对您的库进行一点防弹，您可以捕获回调中引发的任何异常并处理它们，但是是适当的。

```
function doSomething(someArray, callback) {
    var i = 0;
    for ( i = 0; i < someArray.length; i += 1) {
        try {
            callback(someArray[i]);
        } catch(e) {
            // handle any exception in the callback
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T17:50:44.013

By documenting it. Usually documented convention works as good as having a enforced contract via language. At-most you can pass a single object to callbacks and that object can have named attributes e.g.

```
callback({'names':[], 'types':[], value:0, etc:[] }) 
```

That way it is more easy for both side code to be well documented.

# datepicker - Plone 4.2：带有 YY/MM/DD 而不是 DD/MM/YY 的 DatePicker 小部件

> ID：12341391
> 
> 赞同：1
> 
> 时间：2012-09-09T17:43:55.917
> 
> 标签：datepicker, plone

在我的 Plone 4.2 站点中，DatePicker（例如，添加新的“事件”时）显示为 YEAR MONTH DAY ![带有 YY/MM/DD 而不是 DD/MM/YY 的 Plone 4 DatePicker 小部件](../Images/1792c777f3f416bdadb80b9ab09ab67b.png)

但是，我确实有一个德国网站，它应该是相反的。即：年月日。我怎样才能改变这个？

PS German 已从 Plone 的语言控制面板中选择为默认语言。

PPS 我不知道这是否有任何关系，但由于这可能是本地化问题，我宁愿告诉：我使用[raptus.multilanguageplone](http://plone.org/products/raptus.multilanguageplone)

*编辑：添加了正确的图片链接 | 说，这发生在添加/编辑新事件时*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T19:50:10.567

我看不到您添加的图片，因为 URL 已过期。所以我假设你的意思是原型的添加/编辑形式（在 Plone 4.2 中，默认类型都是原型）。

似乎没有简单的解决方法，例如控制面板中的站点范围设置，但您可以在 calendar_macros.pt 模板中更改顺序。然而，这意味着您必须更改原始 HTML。

为此，您必须进入 Zope 管理界面（通过站点设置页面“Plone/@@overview-controlpanel”访问）。

然后单击“portal_skins 工具”，然后单击“plone_templates”。然后单击“calendar_macros”，然后单击“自定义”按钮。

现在您可以更改原始 HTML/TAL 中的顺序。

# eclipse - 在 Eclipse 中为 ADT 设置首选项时出错

> ID：12341401
> 
> 赞同：1
> 
> 时间：2012-09-09T17:45:17.567
> 
> 标签：eclipse, adt

我在上面安装了 eclipse Juno 和 android development toolkit(ADT) 插件。安装插件后，当我尝试为 ADT 设置首选项时，出现此错误：

无法创建选定的首选项页面。自动激活捆绑包 com.android.ide.eclipse.adt (428) 时出错。

我将此页面用作安装插件的参考：

[http://developer.android.com/sdk/installing/installing-adt.html](http://developer.android.com/sdk/installing/installing-adt.html)

请提出一些建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-03T10:24:42.723

我也有这个问题 - 在重新启动 Eclipse 时，它​​消失了。您可能还需要清洁工作区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-16T07:35:08.447

我也面临同样的问题。卸载 ADT 插件并重新安装对我有用。希望这可以帮助！

# php - 找不到常量错误 - PHP

> ID：12341402
> 
> 赞同：0
> 
> 时间：2012-09-09T17:45:24.497
> 
> 标签：php

嗨，有人可以在这里指出我的错误。我有两个 PHP 文件。第一个view.php如下；第二个作为 processor.php 我看到 if(constant('SELECTitem') == $i) 行没有捕获要与 $i 进行比较的所需输入，因此直接进入“else”验证。请纠正我。谢谢。

## 视图.php

```
<?php
$con=mysql_connect('localhost','root') or die ("Server connection failure!");
$db=mysql_select_db('regional_data',$con) or die ("Couldn't connect the database");
$SQL="SELECT sbstart, sbend FROM newchk";
$run=mysql_query($SQL,$con) or die ("SQL Error");
$nor=mysql_num_rows($run);

define("SELECTitem", form.options.value);
?>
<html>
<head><title></title>
<script type="text/javascript">
function ValidateData(form) 
{
var TextIn = document.getElementById('txtN');
if(form.txtN.value == "")
{
alert("Text field is empty"); 
return false;
}else{
alert ((form.options[form.options.selectedIndex].value) + (form.txtN.value));
}
}
</script>
</head>
<body>
<form onsubmit="return ValidateData(this)" method="POST" action="processor.php">
<select STYLE='width:90px' name="options"><?php
while ($rec = mysql_fetch_array($run))
{
    for($i=$rec['sbstart']; $i<=$rec['sbend']; $i++)
    {
    echo "<option id='options' value='$i'>$i<br></option>";
    }
}
?>
</select>
<input type="text" id="txtN">
<input type="submit" name="subN" value="Save">
</form>

</body>
</html> 
```

## 处理器.php

```
<?php
$con=mysql_connect('localhost','root') or die ("Server connection failure!");
$db=mysql_select_db('regional_data',$con) or die ("Couldn't connect the database");
$SQL="SELECT * FROM newchk";
$run=mysql_query($SQL,$con) or die ("SQL Error");
$nor=mysql_num_rows($run);

while ($rec = mysql_fetch_array($run))
{
for($i=$rec['sbstart']; $i<=$rec['sbend']; $i++)
    {
    if(constant('SELECTitem') == $i)
     {
        if($rec['totsb'] <= "0")
        {
        echo "You have already entred this cheque number."; 
        return false;
        } else {
        echo "You can proceed withi this entry"; 
        return false;
        }
     }
     else 
     { echo "Error: Cant find choosen in the databse"; 
      return false;
     }
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T17:49:58.233

When you submit to processor.php, the constant you created in the previous page will not be carried over. Also, when you are defining the constant, you cannot access JavaScript in PHP. So the constant you created...

```
define("SELECTitem", form.options.value);
echo SELECTitem; // returns "formoptionsvalue" (form concatenated with options and value) 
```

What you should do is submit form.options.value and access it via $_POST.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T17:50:45.040

```
 define("SELECTitem", form.options.value); 
```

What does "form.options.value" mean? If i understand it right, it's your JS code. But it doesn't work like that.

Also u can not access constant from other process.

You need to read some PHP books first.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-20T09:11:32.313

问题的标题很好而且很笼统：**找不到常量错误 - PHP**但它的主体非常特别

对于所有来这里寻求一般答案的人，请注意，当您来到这里是为了获得**一个非工作类常量**时，请检查您是否使用了该类的完全限定名称，否则它将不起作用。

挪威克朗：`constant('MyClass::MY_CONST');`

好的：`constant(MyClass::class . '::MY_CONST');`

# windows - SVN 删除文件

> ID：12341403
> 
> 赞同：0
> 
> 时间：2012-09-09T17:45:28.553
> 
> 标签：windows, svn

我重命名了项目中的一些文件，更改了文件名中某些字符的大小写

```
main.cpp -> Main.cpp 
```

然后我将更改写入 SVN repo。它提示我删除文件（例如 main.cpp）并添加（例如 Main.cpp）。我删除了小写文件（例如 main.cpp），但没有添加大写文件（例如 Main.cpp），因为它们已从磁盘中删除。

现在，恢复它们是一个巨大的痛苦。我知道windows文件系统不区分大小写，但没想到为windows写svn的人犯了这么严重的错误。

有人可以建议我为没有此类问题的 windows 提供任何 svn 发行版。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T21:04:38.077

> 没有此类问题的 Windows 的 svn 发行版

它们的行为都相同，因为这是Windows 上的**预期行为**。当您希望 SVN 保留您的本地文件时，您必须告诉它： `svn rm --keep-local file.to.delete.in.repo`，否则它将简单地尝试删除该文件。`Main.cpp`当你告诉它删除时，Windows 会很高兴地删除你的`main.cpp`。

# regex - 使用期望脚本查找并返回一个值

> ID：12341407
> 
> 赞同：0
> 
> 时间：2012-09-09T17:45:51.707
> 
> 标签：regex, bash, return, expect

我有一个系统，在获取`show-table[0]`时打印`0|-100|111`.

我希望我的期望脚本`$row`作为参数接收并执行以下操作：

1.  发送`show-table[$row]`

2.  返回值`-100`（100 也可以）

这是我尝试过的：

```
set row [lindex $argv 0]

expect {
    "> " {send "show-table\[$row\]\n"}
    timeout { exit 1 }
}

expect {
    "\|*\|" {}
    timeout { exit 1 }
}

exit $expect_out(0,string) 
```

2个问题：

1.  我没有设法让脚本寻找我传递给它的参数
2.  我没有管理使脚本仅返回 -100 或 100

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T03:33:06.937

1.  您将参数传递给脚本的方式似乎是正确的。
2.  发送命令后，您可以使用`expect -re`来匹配命令的输出：

    设置行 [lindex $argv 0]

    期望 { "> " {send "show-table[$row]\n"} timeout { exit 1 } }

    期望 -re {\d+\|(-?\d+)\|\d+} { puts $expect_out(1,string) }

    期待 eof

如果您想将此脚本输出返回到 shell，只需`puts`from`expect`可以执行此操作，即可`exit`提供此脚本的退出状态。

# .htaccess - 将带有数字的 URL 重定向到没有数字的 URL

> ID：12341408
> 
> 赞同：0
> 
> 时间：2012-09-09T17:46:29.877
> 
> 标签：.htaccess, mod-rewrite, redirect, rewrite, http-status-code-301

有谁知道是否有 .htaccess 规则可以从这样的东西重定向...
XXX/dodge/ **604** -jeep-hard-start-cold
到...
XXX/dodge/jeep-hard-start-cold
基本上想知道是否有某种变量会从 URL 中删除数字。
所有 URL 都有不同的数字，所以它不能只是 604 获得重定向。这是一个 Joomla 网站，数字参考文章 #。
谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T18:02:46.147

听起来您需要将 Joomla 配置为不将文章编号添加到文章的 url。您可以在全局配置中打开搜索引擎友好 url。

# c# - 在 aspx 中显示代码隐藏

> ID：12341409
> 
> 赞同：1
> 
> 时间：2012-09-09T17:46:33.323
> 
> 标签：c#, asp.net

嗨，我刚刚在 VS 中打开新页面并添加了一个简单的行，请问为什么没有显示日期时间？只有空白页。

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
    <%# DateTime.Now.ToString() %>
    </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T17:49:30.860

`<%# ... %>`是[数据绑定语法](http://msdn.microsoft.com/en-us/library/bda9bbfx%28v=vs.100%29.aspx)，这基本上意味着表达式在`DataBind()`被调用之前不会被计算。由于您不调用`DataBind()`，因此不会打印任何内容。

立即评估表达式的语法是：

```
<%= DateTime.Now.ToString() %> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-09T17:50:07.483

你可以使用：

```
<% Response.write(DateTime.Now.ToString()) %> 
```

`<%=`相当于 Response.Write 所以你也可以使用`<%=`。

```
 <%= DateTime.Now.ToString() %> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-09T17:51:58.750

您还可以使用**等号**来表示更短的符号：

```
<% = DateTime.Now.ToString() %> 
```

# html - 适合屏幕大小的内容容器？

> ID：12341415
> 
> 赞同：1
> 
> 时间：2012-09-09T17:47:13.220
> 
> 标签：html, css, size, height, containers

如果有一个非常基本的布局，带有页眉、内容容器和页脚。我需要做的是使我的内容容器变大，以便整个布局适合屏幕。（除非内容容器中的文本当然会扩展它）。

我尝试为我的身体分配一个 100% 的高度值，然后从那里将我的内容容器高度也分配给 100%，但这会导致我的内容容器大小达到全屏的高度。

在此之前，我将内容容器的高度设置为自动，这当然会导致页面不够长，如果屏幕尺寸大于布局的访问者查看页面。

这是我的代码的一部分：

HTML：

```
<body>
    <div class="background"></div>
        <div class="page">
            <div class="header">
            </div>

            <div class="content">
            </div>

            <div class="footer">
            </div>
        </div>
</body> 
```

CSS：

```
html, body {
    height:100%; 
    margin:0; 
    padding:0;
}
.page {
    position:relative; 
    height:100%;
    z-index:1; 
}
.content {
    position:relative;
    width:850px;
    height: 100%;
    margin: 0 auto;
    background: url(images/content.png) 0 0 repeat-y;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T19:43:14.653

我认为这是您需要的（页脚将始终粘在底部）

**CSS**

```
html, body {
    margin:0;
    padding:0;
    height:100%;
}
.page {
    min-height:100%;
    position:relative;
}
.header {
    background:#00ff0f;
    padding:30px;
}
.content{
    padding:10px;
    padding-bottom:45px;   /* Height+padding(top and botton) of the footer */
    text-align:justify; 
 }
.footer {
    position:absolute;
    bottom:0;
    width:100%;
    height:15px;   /* Height of the footer */
    background:#00ff0f;
    padding:10px 0; /*paddingtop+bottom 20*/
}

.content {
    height:100%; // IE HACK
} 
```

**HTML**

```
<div class="page">
    <div class="header">Header</div>
    <div class="content">
        Some Content Here...
    </div>
    <div class="footer">Footer</div>
</div>​ 
```

在所有主要浏览器中测试。 [**演示**](http://jsfiddle.net/FPCWD/5/)。

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T19:19:01.047

你真正想要的是一个粘性页脚，不是吗？您可以设置其他元素的样式，以产生 #content 元素比实际更大的错觉。

[http://ryanfait.com/sticky-footer/](http://ryanfait.com/sticky-footer/)

# gwt - GWT Super Devmode RPC 失败，正常开发模式工作

> ID：12341416
> 
> 赞同：2
> 
> 时间：2012-09-09T17:47:13.533
> 
> 标签：gwt, rpc, gwt-super-dev-mode

我正在运行带有 Juno 和 GWTP 的 Mac 10.8。

当我使用超级开发模式时：控制台告诉我这个错误。我已经应用了[GWT 中的所有建议 - 偶尔 com.google.gwt.user.client.rpc.SerializationException](https://stackoverflow.com/questions/2122798/gwt-occasional-com-google-gwt-user-client-rpc-serializationexception)。在开发模式下运行时，我没有收到此错误，并且代码按预期工作。

调度传入的 RPC 调用 com.google.gwt.user.client.rpc.SerializationException 时出现异常：类型“xxx”未包含在可由此 SerializationPolicy 序列化的类型集中，或者无法加载其 Class 对象。出于安全考虑，此类型不会被序列化。例如：instance = xxx@37a9f449

阅读此[https://groups.google.com/forum/#!topic/google-web-toolkit/ZugfWpwnXJs/discussion](https://groups.google.com/forum/#!topic/google-web-toolkit/ZugfWpwnXJs/discussion)后，我是否遇到了已知问题，只需要等待更新？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T22:47:12.650

这是一个已知问题：[http ://code.google.com/p/google-web-toolkit/issues/detail?id=7522](http://code.google.com/p/google-web-toolkit/issues/detail?id=7522)

另请参阅：[https ://groups.google.com/d/topic/google-web-toolkit/xQ2Fg0QARYs/discussion](https://groups.google.com/d/topic/google-web-toolkit/xQ2Fg0QARYs/discussion)

# matlab - 如何比较函数 choleskiSol？

> ID：12341419
> 
> 赞同：0
> 
> 时间：2012-09-09T17:47:53.327
> 
> 标签：matlab

如何在 Cholesky 方法的求解阶段向前和向后推导替换算法？

如何比较功能`choleskiSol`？

这是我的代码`choleskisol`

```
function x = choleskiSol(L,b)
% Solves [L][L’]{x} = {b}
% USAGE: x = choleskiSol(L,b)

n = length(b);

if size(b,2) > 1
    b = b’;
end % {b} must be column vector

for k = 1:n % Solution of [L]{y} = {b}
    b(k) = (b(k) - dot(L(k,1:k-1),b(1:k-1)’))/L(k,k);
end

for k = n:-1:1 % Solution of {L}’{x} = {y}
    b(k) = (b(k) - dot(L(k+1:n,k),b(k+1:n)))/L(k,k);
end
x = b; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T17:57:08.277

matlab 中的标准 Cholesky 分解 (chol(A)) 将对称（正定）矩阵 A 分解为上三角形式。要求解线性方程组，您必须简单地采用上三角形式，并通过反向代换求解。这将产生系统的变量值。

要在 matlab 中使用参数矩阵 A 和输出向量 B 完成解决方案：

```
L = chol(A); % A must be sym and det(A) > 0
x = (L \ (L' \ b)); % L' is lower-triangular 
```

# php - Multi threading in PHP

> ID：12341421
> 
> 赞同：3
> 
> 时间：2012-09-09T17:48:01.233
> 
> 标签：php, cron

In a apcahe server i want to run a PHP scripts as cron which starts a php file in background and exits just after starting of the file and doesn't wait for the script to complete as that script will take around 60 minutes to complete.how this can be done?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-09T18:00:19.227

您应该知道 PHP 中没有线程。但是，如果您在 Unix/linux 系统上运行，您可以轻松地执行程序并分离它们。

```
$command = "/usr/bin/php '/path/to/your/php/to/execute.php'";
exec("{$command} > /dev/null 2>&1 & echo -n \$!"); 
```

可以做这项工作。让我们解释一下：

```
exec($command); 
```

执行 /usr/bin/php '/path/to/your/php/to/execute.php' ：您的脚本已启动，但 Apache 将在执行下一个代码之前等待执行结束。

```
> /dev/null 
```

将标准输出（即您的回声、打印等）重定向到一个虚拟文件（其中写入的所有输出都将丢失）。

```
2>&1 
```

将错误输出重定向到标准输出，写入相同的虚拟和不存在的文件。例如，这可以避免将日志记录到您的 apache2/error.log 中。

```
& 
```

在您的情况下是最重要的事情：它将分离您对 $command 的执行：因此 exec() 将立即释放您的 php 代码执行。

```
echo -n \$! 
```

将为您的分离执行提供 PID 作为响应：它将由 exec() 返回并使您能够使用它（例如，将此 pid 放入数据库并在一段时间后将其杀死以避免僵尸）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T17:56:14.933

您需要使用“&”符号将程序作为后台进程运行。

```
$ php -f file.php & 
```

那将在后台运行此命令。

你可以写 sh 脚本

```
#!/bin/bash
php -f file.php & 
```

并从 crontab 运行此脚本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T19:26:22.807

这可能不是您特定问题的最佳解决方案。但是为了记录，PHP中有线程。

[https://github.com/krakjoe/pthreads](https://github.com/krakjoe/pthreads)

我假设您知道如何使用线程，这是我自己编写的非常年轻的代码，但是如果您有线程和互斥锁等方面的经验，您应该能够使用此扩展解决您的问题。

这显然是我自己项目的无耻插件，如果用户没有安装扩展所需的访问权限，那么它对他没有帮助，但是很多人发现stackoverflow，它无疑会解决其他问题......

# wordpress - twitter profile widget not showing in wordpress

> ID：12341422
> 
> 赞同：0
> 
> 时间：2012-09-09T17:48:04.087
> 
> 标签：wordpress, twitter

I created a profile widget in twitter and i got the following code they said just copy and paste in yout html. but its not showing.

```
<a class="twitter-timeline" href="https://twitter.com/in_DNA" data-widget-id="244847523552952***">Tweets by @in_DNA</a>

!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs"); 
```

i copied this code to my footer and sidebar, but not showing tweets.

is there any better plugin for this? please help.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T20:11:38.963

如果您的问题是关于一个好的 Twitter 插件，我建议使用 Twitter Widget Pro。我在我的网站上使用它，从来没有遇到过问题。使用 CSS 非常可定制。

见：[http ://bluedogwebservices.com/wordpress-plugin/twitter-widget-pro/](http://bluedogwebservices.com/wordpress-plugin/twitter-widget-pro/)

如果您希望发布的代码能够正常工作，那么您可能需要将 JS 添加到外部文件并将其包含在您的页眉或页脚文件中。您不能只是将 JS 粘贴到您的小部件中。

# macruby - Accessing an outlet in Interface Builder in Document-Based Application

> ID：12341424
> 
> 赞同：0
> 
> 时间：2012-09-09T17:48:15.383
> 
> 标签：macruby

With MacRuby 0.12 and XCode 4.4.1 (Mountain Lion), I created a Document-Based Application.

In my document window nib, I have two objects:

*   A `NSTextView` (in a `NSScrollView`), which has a custom class `MyView`
*   A `NSTextField`

In my Ruby code, I have in `MyView`:

```
attr_accessor :field 
```

I would like to bind this value to the `NSTextField` in Interface Builder. When I select `Bind to`, the choices are limited to:

*   Shared User Defaults Controller
*   File's Owner
*   Application.

I choose the latter but then what should be the Model Key Path?

Furthermore, where is Application in my code? I don't see it anywhere in the template.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T19:39:15.813

可能与此错误有关：

[https://github.com/MacRuby/MacRuby/issues/135](https://github.com/MacRuby/MacRuby/issues/135)

# tomcat - Detect port of running grails app

> ID：12341429
> 
> 赞同：3
> 
> 时间：2012-09-09T17:49:17.307
> 
> 标签：tomcat, grails

I want to be able to deploy a .war file and detect which port the application is being served on. I have two grails' apps running within different tomcat instances, and ideally I would like to adapt the configuration of each app according to each specific tomcat instance. Each tomcat instance uses a different port, therefore detecting the port upon which the app is served means the app knows which tomcat instance the app is running in.

Thanks for any help!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T08:59:26.107

我使用了一个[外部化配置](http://grails.org/doc/2.1.0/guide/conf.html#configExternalized)，以便两个 grails 应用程序都可以读取与每个相应的 tomcat 实例启动位置相关的配置。通过控制每个 tomcat 实例的启动位置，可以适当地配置每个 grails 应用程序。因此，通过将外部配置相对于启动tomcat目录放置特定grail的应用程序配置来实现！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T19:27:10.670

第一个请求到达时获取端口是否足够？那么这可能会有所帮助：

```
 println request.requestURL
    println request.request.request.request.connector.port 
```

如果没有，请查看这些页面 - 我想它们可能会有所帮助

[无需请求即可从 tomcat 获取服务器端口号](https://stackoverflow.com/questions/3867197/get-the-server-port-number-from-tomcat-with-out-a-request)

[http://www.asjava.com/tomcat/how-to-get-tomcat-port-number-in-java/](http://www.asjava.com/tomcat/how-to-get-tomcat-port-number-in-java/)

永远记住，oyu 可以在您的 grails 应用程序中使用所有可用的 java 代码。

# asp.net-mvc - Best practice/design for a multi-page form in .NET MVC3

> ID：12341439
> 
> 赞同：6
> 
> 时间：2012-09-09T17:50:36.520
> 
> 标签：asp.net-mvc, asp.net-mvc-3, validation, multi-step

I am working on a web application that involves the user filling out a multi-step form that spans several pages. The form has tabbed navigation across the top (these links do not submit the current page) and a next button at the bottom (which does submit). I am considering several strategies for handling form submission/validation:

1.  one action method and view per form page. When you hit next, it submits the form to the action method for the next page. If there are validation errors, you are redirected back to the previous page:

    *   URL's are descriptive and can be copy-pasted
    *   Only redirects in the error case
    *   Since the redirect does not have the form data, we lose context about the submission which makes it hard to display certain error messages
    *   The same validation logic works for redirecting the user if they try to visit a step in the flow that they aren't ready for yet
2.  one action method and view per form page. When you hit next, it submits the form to the current page action. If there are validation errors, the same view is returned. Otherwise, we redirect to the next page action:

    *   URL's are descriptive and can be copy-pasted
    *   Redirects are very common (not sure if this is bad)
    *   When displaying validation errors, we are in the same request as the form submission so we have full access to the invalid input
    *   Have to pass additional context if we want the ability to, for example, add a "Previous" button which also submits
3.  one action method for ALL pages. URL's contain additional context about the step being submitted (e.g. `MyController/MyAction/{step}`). The controller message selects which view page to return depending on validation and the current step.

    *   URL's are not descriptive (e. g. if I submit step 1 to go to step 2, then the URL the user sees will be the same regardless of whether page 1 (invalid) or page 2 is returned
    *   No redirects
    *   When displaying validation errors, we are in the same request as the form submission so we have full access to the invalid input
4.  A different method I haven't listed here

I have tried to enumerate what I see as some of the pros and cons of each method, but I would be interested to know:

*   What are other pros and cons of these methods? Are mine correct? Could some of the cons I've listed be designed around?
*   Is there a standard approach to this problem which I should be using? If so, why is it the standard approach?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T23:12:22.587

我强烈推荐选项 2，稍作修改。您可能还想考虑为每个操作/视图创建一个视图模型。如果您有一个跨越所有页面的模型，则将跨所有属性进行验证，这意味着即使用户只能在每个屏幕上编辑模型的一部分，他们也可能会收到他们看不到的属性的验证警告。我们最近在一个项目中这样做了，效果很好。您必须在后端进行一些数据操作才能将所有内容重新组合在一起，但最终还是值得的。

正如您所说，您的 URL 将是可深度链接的，这意味着用户可以复制/粘贴，更重要的是，他们可以将页面添加为浏览器中的收藏夹，让他们很容易回到同一个地方。在我看来，这使得选项 3 过时了。

您还将受益于您的所有导航逻辑都发生在一个地方这一事实。您必须将“向导”的状态存储在客户端（您当前所在的页面）上，以便您的控制器知道提交时要做什么。您需要分析向导的状态并决定用户下一步需要去哪里。如果您选择选项 1，您将不知道您“来自”哪里，并且服务器验证错误将难以显示给客户端。这是 POST - REDIRECT - GET 模式的一个很好的例子。每个页面将有 2 个操作，一个采用简单 id 的 GET 和一个采用更复杂模型的 POST。发布服务器，找出下一步去哪里，重定向到 GET。

最后，考虑您的上一个按钮只是直接链接到上一步，而不是提交表单。否则，用户可能会卡在无效步骤上。这发生在我们身上，而且效果很好。

希望这会有所帮助。祝你好运！

# python - 如何子类化 pyCLI 的 cli.app.CommandLineApp？

> ID：12341444
> 
> 赞同：4
> 
> 时间：2012-09-09T17:51:02.983
> 
> 标签：python

[该文档](http://packages.python.org/pyCLI/)对于子类化 CommandLineApp 确实含糊不清，仅提及一个示例：

```
class YourApp(cli.app.CommandLineApp):
    def main(self):
        do_stuff() 
```

因此，根据我发现的信息，我将这段代码拼凑在一起：

```
#!/usr/bin/env python

import os
import sys
from cli.app import CommandLineApp

# Append the parent folder to the python path
sys.path.append(os.path.join(os.path.dirname(__file__), '../'))

import tabulardata
from addrtools import extract_address

class SplitAddressApp(CommandLineApp):
    def main(self):
        """
        Split an address from one column to separate columns.
        """

        table = tabulardata.from_file(self.params.file)

        def for_each_row(i, item):
            addr = extract_address(item['Address'])
            print '%-3d %-75s %s' % (i, item['Address'], repr(addr))

        table.each(for_each_row)

    def setup(self):
        self.add_param('file', metavar='FILE', help='The data file.')
        self.add_param(
            'cols', metavar='ADDRESS_COLUMN', nargs='+',
            help='The name of the address column. If multiple names are ' + \
                 'passed, each column will be checked for an address in order'
        )

if __name__ == '__main__':
    SplitAddressApp().run() 
```

这对我来说似乎是正确的。`setup`该文档没有提供有关在使用子类化时如何处理方法或运行应用程序的示例。我得到错误：

```
回溯（最近一次通话最后）：
  文件“bin/split_address_column”，第 36 行，在
    SplitAddressApp().run()
  文件“/Users/tomas/.pythonbrew/venvs/Python-2.7.3/address_cleaner/lib/python2.7/site-packages/cli/app.py”，第 440 行，在 __init__
    Application.__init__(self, main, **kwargs)
  文件“/Users/tomas/.pythonbrew/venvs/Python-2.7.3/address_cleaner/lib/python2.7/site-packages/cli/app.py”，第 129 行，在 __init__
    self.setup()
  文件“bin/split_address_column”，第 28 行，在设置中
    self.add_param('file', metavar='FILE', help='数据文件。')
  文件“/Users/tomas/.pythonbrew/venvs/Python-2.7.3/address_cleaner/lib/python2.7/site-packages/cli/app.py”，第 385 行，在 add_param
    action = self.argparser.add_argument(*args, **kwargs)
AttributeError：“SplitAddressApp”对象没有属性“argparser”

```

所以大概我做错了什么，但是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T12:02:29.873

我想到了。阅读 pyCLI 的源代码，发现该`setup`函数对于整个库的功能非常重要，而我认为它只是一个可以放置我的设置代码的函数。`argparser`是在其中创建的，`cli.app.CommandLineApp.setup`这意味着我至少必须调用

```
cli.app.CommandLineApp.setup(self) 
```

在设置功能中，它甚至可以工作。现在代码完美运行！

# mongodb - Mixing Linux and Windows MongoDB replica set and is equal hardware important for sharding

> ID：12341446
> 
> 赞同：7
> 
> 时间：2012-09-09T17:51:19.910
> 
> 标签：mongodb, replication, cluster-computing, sharding

My first question is really simple, I just want to know if I can mix Linux and Windows mongodb servers in my sharding/replica cluster, ofc with same version like 2.2?

For 2nd question, can someone explain what heppens if I have sharding servers with this hardware

*   Server 1 : High Cpu, SSD disk
*   Server 2 : Normal CPU, Sata disk
*   Server 3 : Normal CPU , SSD disk

How will sharding work when we have different hardware servers?

Is it important to build clusters on machines with almost the same hardware?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-09T20:30:26.040

There shouldn't be a problem mixing Linux and Windows servers, assuming (as you stated) that the MongoDB versions are equivalent.

Regarding differences in hardware, MongoDB tries to distribute data evenly across shards, and each server will use as many available resources as possible to give the best performance possible. When another process on a server requests some resources, Mongo will relinquish those resources. This will usually mean swapping some data to disk until more RAM becomes available again.

Because your servers will do this, and other operations, at different speeds, the important question becomes "What happens when one server in a shard is running slowly". According to the [FAQ](http://docs.mongodb.org/manual/faq/sharding/#what-happens-to-queries-if-a-shard-is-inaccessible-or-slow):

> If a shard is responding slowly, mongos will merely wait for the shard to return results.

So in practice, parts of your sharded collections will be slower than others, but everything should work just fine. You would probably have a better experience if the hardware matched, but it doesn't have to.

# mongodb - What is the most efficient way of moving data out of Hive and into MongoDB?

> ID：12341448
> 
> 赞同：6
> 
> 时间：2012-09-09T17:51:35.333
> 
> 标签：mongodb, hadoop, hive

Is there an elegant, easy and fast way to move data out of Hive into MongoDB?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T00:18:31.300

您可以使用[Hadoop-MongoDB](http://api.mongodb.org/hadoop/MongoDB+Hadoop+Connector.html)连接器进行导出。只需在作业的 main 方法中运行 Hive 查询。然后 Mapper 将使用此输出将数据插入到`MongoDB`.

**例子：**

在这里，我使用一个简单的 Hive 查询将分号分隔的文本文件 ( *id;firstname;lastname* ) 插入到 MongoDB 集合中：

```
import java.io.IOException;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;
import java.sql.Statement;

import org.apache.hadoop.conf.Configuration;
import org.apache.hadoop.conf.Configured;
import org.apache.hadoop.fs.Path;
import org.apache.hadoop.io.IntWritable;
import org.apache.hadoop.io.LongWritable;
import org.apache.hadoop.io.Text;
import org.apache.hadoop.mapreduce.Job;
import org.apache.hadoop.mapreduce.Mapper;
import org.apache.hadoop.mapreduce.lib.input.FileInputFormat;
import org.apache.hadoop.mapreduce.lib.input.TextInputFormat;
import org.apache.hadoop.util.Tool;
import org.apache.hadoop.util.ToolRunner;

import com.mongodb.hadoop.MongoOutputFormat;
import com.mongodb.hadoop.io.BSONWritable;
import com.mongodb.hadoop.util.MongoConfigUtil;

public class HiveToMongo extends Configured implements Tool {

    private static class HiveToMongoMapper extends
            Mapper<LongWritable, Text, IntWritable, BSONWritable> {

        //See: https://issues.apache.org/jira/browse/HIVE-634
        private static final String HIVE_EXPORT_DELIMETER = '\001' + "";
        private IntWritable k = new IntWritable();
        private BSONWritable v = null;

        @Override
        public void map(LongWritable key, Text value, Context context) 
          throws IOException, InterruptedException {

            String [] split = value.toString().split(HIVE_EXPORT_DELIMETER);

            k.set(Integer.parseInt(split[0]));
            v = new BSONWritable();
            v.put("firstname", split[1]);
            v.put("lastname", split[2]);
            context.write(k, v);

        }
    }

    public static void main(String[] args) throws Exception {
        try {
            Class.forName("org.apache.hadoop.hive.jdbc.HiveDriver");
        }
        catch (ClassNotFoundException e) {
            System.out.println("Unable to load Hive Driver");
            System.exit(1);
        }

        try {
            Connection con = DriverManager.getConnection(
                "jdbc:hive://localhost:10000/default");

            Statement stmt = con.createStatement();    
            String sql = "INSERT OVERWRITE DIRECTORY " +
                    "'hdfs://localhost:8020/user/hive/tmp' select * from users";
            stmt.executeQuery(sql);

        }
        catch (SQLException e) {
            System.exit(1);
        }

        int res = ToolRunner.run(new Configuration(), new HiveToMongo(), args);
        System.exit(res);
    }

    @Override
    public int run(String[] args) throws Exception {

        Configuration conf = getConf();
        Path inputPath = new Path("/user/hive/tmp");
        String mongoDbPath = "mongodb://127.0.0.1:6900/mongo_users.mycoll";
        MongoConfigUtil.setOutputURI(conf, mongoDbPath);

        /*
        Add dependencies to distributed cache via 
        DistributedCache.addFileToClassPath(...) :
        - mongo-hadoop-core-x.x.x.jar
        - mongo-java-driver-x.x.x.jar
        - hive-jdbc-x.x.x.jar
        HadoopUtils is an own utility class
        */
        HadoopUtils.addDependenciesToDistributedCache("/libs/mongodb", conf);
        HadoopUtils.addDependenciesToDistributedCache("/libs/hive", conf);

        Job job = new Job(conf, "HiveToMongo");

        FileInputFormat.setInputPaths(job, inputPath);
        job.setJarByClass(HiveToMongo.class);
        job.setMapperClass(HiveToMongoMapper.class);
        job.setInputFormatClass(TextInputFormat.class);
        job.setOutputFormatClass(MongoOutputFormat.class);
        job.setOutputKeyClass(Text.class);
        job.setOutputValueClass(Text.class);
        job.setNumReduceTasks(0);

        job.submit();
        System.out.println("Job submitted.");
        return 0;
    }
} 
```

一个缺点是需要一个**“暂存区”**（/user/hive/tmp）来存储中间 Hive 输出。此外，据我所知，Mongo-Hadoop 连接器**不支持 upserts。**

我不太确定，但您也可以尝试在`Hive`不运行 `hiveserver`公开 Thrift 服务的情况下从中获取数据，这样您就可以节省一些开销。查看`org.apache.hadoop.hive.cli.CliDriver#processLine(String line, boolean allowInterupting)`实际执行查询的 Hive 方法的源代码。然后你可以把这样的东西拼凑在一起：

```
...
LogUtils.initHiveLog4j();
CliSessionState ss = new CliSessionState(new HiveConf(SessionState.class));
ss.in = System.in;
ss.out = new PrintStream(System.out, true, "UTF-8");
ss.err = new PrintStream(System.err, true, "UTF-8");
SessionState.start(ss);

Driver qp = new Driver();
processLocalCmd("SELECT * from users", qp, ss); //taken from CliDriver
... 
```

旁注：

您还可以检查一个[hive-mongo连接器实现。](https://github.com/yc-huang/Hive-mongo)如果您[想](https://cwiki.apache.org/confluence/display/Hive/HBaseIntegration)为`MongoDB`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T17:29:47.547

你看过[Sqoop](https://blogs.apache.org/sqoop/entry/apache_sqoop_overview)吗？它应该使在 Hadoop 和 SQL/NoSQL 数据库之间移动数据变得非常简单。[本文](http://ankitasblogger.blogspot.com/2012/01/sqoop-export-and-import-commands.html)还提供了一个将其与 Hive 一起使用的示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T16:01:36.370

看一下`hadoop-MongoDB`连接器项目：

[http://api.mongodb.org/hadoop/MongoDB%2BHadoop+Connector.html](http://api.mongodb.org/hadoop/MongoDB%2BHadoop+Connector.html)

“这种连接的形式既允许将 MongoDB 数据读入 Hadoop（用于 MapReduce 作业以及 Hadoop 生态系统的其他组件），也允许将 Hadoop 作业的结果写入 MongoDB。”

不确定它是否适用于您的用例，但值得一看。

# mysql - 在 MySQL 查询中使用 DISTINCT、COUNT 和 HAVING

> ID：12341449
> 
> 赞同：0
> 
> 时间：2012-09-09T17:51:40.493
> 
> 标签：mysql

我想计算在给定日期之后总分至少为 300 的所有玩家。我有这个：

```
SELECT
    COUNT(DISTINCT playerID)
FROM
    table
WHERE
    game_date > '$date'
HAVING
    SUM(points) >= 300 
```

这也包括总和少于 300 分的玩家。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T18:02:58.873

为此使用子查询：

```
SELECT COUNT(*) FROM
(
  SELECT playerID, SUM(points) AS `total`
  FROM `table`
  WHERE game_date > '$date'
  GROUP BY playerID
) tmp
WHERE total>=300 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T17:54:04.297

正如 Andre Bossard 所指出的：

要获得所有积分>=300 的玩家的列表：

```
SELECT * FROM (SELECT playerID, SUM(points) points FROM table WHERE game_date>'$date' GROUP BY playerID) a WHERE points>=300 
```

要获得计数：

```
SELECT COUNT(*) FROM (SELECT playerID, SUM(points) points FROM table WHERE game_date>'$date' GROUP BY playerID) a WHERE points>=300 
```

# php - Mysql - 如何在 Order by 之后获取行号？

> ID：12341452
> 
> 赞同：11
> 
> 时间：2012-09-09T17:51:48.803
> 
> 标签：php, mysql

假设我有一个包含以下列的表格：

* * *

p_id

用户身份

积分

* * *

假设这些列有超过 5000 条记录。所以我们实际上有积分的用户。每个用户的积分记录都有一个唯一的行。想象一下，每个用户都可以通过点击某个地方在网站上获得积分。当他们单击时，我用他们获得的点更新数据库。

所以我们有一张表，上面有超过 5000 条有积分的人的记录，对吧？现在我想按它们的点（降序）对它们进行排序，因此如果我运行 MySQL 查询，点数最高的用户将位于页面顶部。

我可以通过简单地运行这样的查询来做到这一点：

```
SELECT `p_id` FROM `point_table` ORDER BY `points` DESC 
```

此查询将按点按降序为我提供所有记录。

好的，**我的问题来了**，现在（**订购**时）我想向每个用户显示他们实际上在哪个地方。所以我想给每个用户这样的东西：“你是 5374 个用户中的 623 个”。问题是我无法指定“623”号码。

我想运行一个查询，它***按点对表进行排序，***它应该“搜索”或计算行号，它们的记录在哪里，然后将该值返回给我。

谁能帮助我如何为此建立查询？这将是一个很大的帮助。谢谢你。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-09T17:56:27.933

[这个答案](https://stackoverflow.com/a/2520377/407697)应该适合你：

```
SET @rank=0;
SELECT @rank:=@rank+1 AS rank, p_id FROM point_table ORDER BY points DESC; 
```

**更新：**您可能还需要考虑在更新点并将其保存到同一表中的附加列时计算排名。这样，您还可以选择单个用户并了解他的排名。这取决于您的用例，什么更有意义且性能更好。

**更新：**我们在评论中制定的最终解决方案如下所示：

```
SELECT
rank, p_id
FROM
    (SELECT
     @rank:=@rank+1 AS rank, p_id, userid
     FROM
     point_table, (SELECT @rank := 0) r
     ORDER BY points DESC
    ) t
WHERE userid = intval($sessionuserid); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-09-18T17:48:41.440

排序后的行号

```
SELECT ( @rank:=@rank + 1) AS rank, m.* from                                   
(                            
  SELECT a.p_id, a.userid                                                   
  FROM (SELECT @rank := 0) r, point_table a 
  ORDER BY a.points DESC                                                     
) m 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-21T07:31:29.110

出于某种原因，接受的答案对我不起作用 - 它完全忽略“ORDER BY”语句，按 id 排序（主键）

我所做的是：

```
SET @rn=0;
CREATE TEMPORARY TABLE tmp SELECT * FROM point_table ORDER BY points DESC;
SELECT @rn:=@rn+1 AS rank, tmp.* FROM tmp; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-09T18:02:01.393

将位置的新列添加到表中。定期运行 cron 作业，获取按点排序的所有表格行，然后在 while 循环中使用位置更新表格。

# heroku - 编译失败并出现 java.lang.StackOverflowError

> ID：12341453
> 
> 赞同：0
> 
> 时间：2012-09-09T17:51:52.827
> 
> 标签：heroku, playframework, playframework-2.0

可能是由于以下错误 - [https://play.lighthouseapp.com/projects/82401/tickets/613-stack-overflow-exception-while-trying-to-compile](https://play.lighthouseapp.com/projects/82401/tickets/613-stack-overflow-exception-while-trying-to-compile)当路由文件变大时，Play 2 项目无法编译。有增加默认线程堆栈大小的解决方法。但这不适用于 Heroku。我不知道是否可以将 Heroku 上使用的堆栈大小增加到超过 512k，将 JAVA_OPTS 和 SBT_OPTS 更改为 -Xss2m 没有帮助。编译失败，出现异常 java.lang.StackOverflowError。也许任何人都可以提出解决此问题的解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T07:29:30.237

好的。找到了解决方案。堆栈大小不应在配置参数中更改，而应在 buildpack 中更改。

对于在 Heroku 上遇到相同异常的任何人：只需 fork buildpack 并更改第 95 行添加 +Xss2m 即可

# ruby-on-rails - rvm + 乘客（独立）GemNotFound

> ID：12341462
> 
> 赞同：-1
> 
> 时间：2012-09-09T17:53:05.383
> 
> 标签：ruby-on-rails, rvm, passenger

我是 Rails 的新手，正在尝试将应用程序部署到 CentOS 服务器。我选择使用 RVM，因为它似乎被强烈推荐。我对 Nginx、Apache 或Passenger Stand Alone 持开放态度——任何可行且最简单的方法。

我一直在努力进行此安装，但认为我已经成功清理了自己，现在已经按照单用户（非 sudo）rvm 安装（包括 ssh）的说明进行操作。

我不明白的一件事是应该如何安装乘客（鉴于正在使用 RVM）？：

```
gem install passenger
sudo gem install passenger
rvmsudo gem install passenger 
```

我假设无论它是如何安装的，它都应该以相同的方式启动。我已经尝试了这些方法中的每一种，但在所有情况下都遇到了问题。

当我使用 sudo 启动乘客时，我收到：

> 在任何来源中都找不到 factory_girl-3.6.1 (Bundler::GemNotFound)

我注意到有时我的 ruby​​ 版本会是 1.8.7，即使我使用 RVM 将其设置为 1.9.3-p194，所以我卸载了 1.8.7（已在 RVM 之前安装）并重新安装了 1.9.3-p194（使用 RVM并再次指定 openssl）。我重新安装了乘客

现在，当我执行“sudo 乘客启动”时，我只是得到一个新的提示，好像什么都没发生一样。另外，如果我执行“sudo gem install Passenger”。

最后，我注意到如果我使用 rvmsudo 启动乘客，网络服务器确实会启动，但是它会给控制台一个错误：

> /usr/bin/evn: ruby​​: 权限被拒绝

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T21:55:32.843

你不应该使用`sudo`：

```
gem install passenger
passenger start 
```

但是，如果您使用`sudo`/ `rvmsudo`- 您可以更改某些目录的权限，如果其中任何一个被报告为不可访问，则使用以下命令修复它们：

```
chown -R $USER: {dir}
chmod -R u+rwX,g+rwX,o+rX,o-w {dir} 
```

# ios - 使用 CATransformLayer 警告：在仅变换层中更改属性 opaque 将无效

> ID：12341463
> 
> 赞同：6
> 
> 时间：2012-09-09T17:53:05.447
> 
> 标签：ios, animation, uiview, subclass, catransformlayer

我创建了一个“ `TransformView`”子类`UIView`以支持我在翻转动画中使用的双面视图。这已在其他帖子中提出，例如：

[如何在透视图中围绕其中心旋转平面对象？](https://stackoverflow.com/questions/9423892/how-to-rotate-a-flat-object-around-its-center-in-perspective-view/9425938#9425938)

```
@interface TransformView : UIView
@end

@implementation TransformView
+ (Class)layerClass {
  return [CATransformLayer class];
}
@end 
```

一切正常，但每次我使用以下方法创建 TransformView 对象时都会收到警告：

```
TransformView *newTransformView=[[TransformView alloc] initWithFrame:frame]; 
```

警告说：

> - 在仅变换层中更改属性不透明，将无效

我猜这个`UIView`类正在初始化 opaque 属性，这通常适用于 a`CALayer`但不是 a `CATransformLayer`。

子类化代码很狡猾吗？如果是这样，您还能如何为翻转动画创建 2 面视图？

关于如何停止警告的任何想法？

我怀疑`TransformView`从 nib 文件创建一个而不是`initWithFrame`避免警告，但为了避免警告而不得不这样做似乎很笨拙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T10:00:14.370

您可以通过在代码中的某处添加此扩展来避免警告：

```
@implementation CATransformLayer (MyExtension)
-(void)setOpaque:(BOOL)opaque
{
    return;
}
@end 
```

当然，这也会停止警告您自己错误地尝试设置 CATransformLayer 的 opaque 属性。

# java - Java程序消耗太多内存

> ID：12341466
> 
> 赞同：0
> 
> 时间：2012-09-09T17:53:31.160
> 
> 标签：java, arrays, sorting, memory

嗨，我对 java 编程比较陌生。我编写的以下程序似乎占用了大量内存（大约 240 MB，这正常吗？ - 我不这么认为！）请提出一些优化该程序的方法，以减少内存存储。

**程序**-

```
 You have 2 sorted array suppose arr1[4] and arr2[3]
          now we have to combinely sort them using very little extra space(i.e. in-place sort)
          ex..arr1[4]={5,8,11,14,16}
          arr[2]={1,7,10}
          then result should be--in arr1[4]={1,5,7,8,10}
          in arr2[3]={11,14,16} 
```

**代码**-

```
import java.util.*;

class sort_in_place
{
    public static void main(String args[])
    {
        // input 2 sorted arrays
        int []a = {5,8,11,14,16};
        int []b = {1,7,10};

        System.out.println("initial array: a = "+Arrays.toString(a)+"   b = "+Arrays.toString(b)+"\n");

        // use extra space to store the array 'a' elements.
        int key = 0, i=0; 

        for( i=0; i<a.length ; i++)
        {
             key = a[i];         // store value in temporary variable key.

            // if key is greater than 1st element of array 'b' then exchange their values and sort array 'b'
            if(key > b[0])
            {
                int j = 1;
                a[i] = b[0];
                while(j<b.length && key > b[j])
                {
                    b[j-1] = b[j];
                    j++;
                }
                b[j-1] = key;
            }
        }
        System.out.println("final array: a = "+Arrays.toString(a)+"   b = "+Arrays.toString(b)+"\n");
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T18:02:14.777

即使是运行一个简单的 Helloworld 程序，java 也需要加载 300 多个类。我的意思是Java初始化需要内存。Java 有用于定义内存使用的 Xmx 和 Xms 选项。有关更多详细信息，请参阅[Java 文档](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/solaris/java.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-09T18:52:38.167

24 MB 对于 jvm 进程来说是正常的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-09T18:57:08.430

您需要记住，Java 程序不能单独运行，而是需要 Java 虚拟机平台来处理内存、字节码执行和其他任务。Oracle JVM 使用相当多的内存来加快执行速度，因此即使是很小的程序也会带来很大的启动损失。

这就是为什么很少使用 Java 编写小型实用程序的原因。

您需要在 JVM*内部*进行测量以确定是否使用了过多的内存。为此使用探查器。JDK 中的 JVisualVM 是一个不错的免费启动分析器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-09T19:09:47.217

您的程序使用的内存远少于 240 MB ideone 报告的内存。我只是在笔记本上运行，`System.in.read();`在末尾插入`main()`延迟终止，用windows任务管理器查看对应的进程。报告的内存使用**峰值为****9 MB** ...

其中大部分将是 JVM 的基础架构（例如即时编译器），并且与您的程序完全无关。

# python - 如何让 dir(obj) 在 swig 生成的 python 类中返回非函数成员？

> ID：12341468
> 
> 赞同：3
> 
> 时间：2012-09-09T17:53:45.810
> 
> 标签：python, swig

我正在使用 swig 为 C++ 库生成 python 包装器。我倾向于使用 ipython 以交互方式使用生成的 python 模块。

假设我有以下 C++ 类：

```
class test
{
    int num;
    int foo();
}; 
```

Swig 用一个 python 类包装了这个类：

```
class test:
    def foo():...
    __swig_getmethods__["num"] = ...
    __swig_setmethods__["num"] = ...
    .
    .
    . 
```

与 ipython 交互使用时。我注意到选项卡完成将成功找到“foo”，但不是“num”。

经过一番挖掘，我看到 ipython 使用“dir”方法进行选项卡补全。swig 生成非函数类成员的方式是通过实现`__setattr__`and `__getattr__`。他们所做的只是检查`__swig_set/getmethods__`字典并返回值（如果找到）。这就是为什么在尝试时不返回像“num”这样的成员的原因`dir(test)`。

`__dir__`理想情况下，如果 swig 可以为它的每个类实现 , 那就太好了。这样的东西可以添加到每个 swig 包装类中：

```
# Merge the two method dictionaries, and get the keys
__swig_dir__ = dict(__swig_getmethods__.items() + __swig_setmethods__.items()).keys()
# Implement __dir__() to return it plus all of the other members
def __dir__(self):
    return __dict__.keys() + __swig_dir__ 
```

我的问题：

1.  是否有一种简单的方法可以让 dir() 函数也返回非函数成员？
2.  如果 1 的答案是否定的，是否有一种简单的方法可以在 swig 生成的每个 python 类中添加上述代码？

我知道这是一件小事，但在我看来，制表符补全对生产力有非常积极的影响。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T23:54:55.877

IPython 将 dir 包装在 IPython/core/completer.py 内的新函数 dir2 中

所以你可以尝试重新定义dir2。就像是：

```
import IPython.core.completer
old_dir = IPython.core.completer.dir2

def my_dir(obj):
    methods = old_dir(obj)
    #merge your swig methods in
    return methods

IPython.core.completer.dir2 = my_dir 
```

# entity-framework - 即使禁用了自动迁移，Update-Database 也会尝试进行自动迁移

> ID：12341470
> 
> 赞同：19
> 
> 时间：2012-09-09T17:53:58.650
> 
> 标签：entity-framework, entity-framework-migrations

我在一个使用 EF5 的 4 名开发人员团队中工作，每个人都在自己的本地数据库上工作。到目前为止，我们一直在使用自动迁移，但我们已经接近需要发布到生产环境的时间点，因此我们禁用了自动迁移并开始添加基于代码的显式迁移。

这就是问题所在：我在`Update-Database`开发人员创建新的显式迁移后运行了该命令，但出现以下错误：

```
Applying code-based migrations: [201209080142319_CreatedDate.LastModifiedDate.Additions].
Applying code-based migration: 201209080142319_CreatedDate.LastModifiedDate.Additions.
Applying automatic migration:    201209080142319_CreatedDate.LastModifiedDate.Additions_AutomaticMigration.
Automatic migration was not applied because it would result in data loss. 
```

即使我禁用了自动迁移，为什么还会出现此错误？我可以通过删除显式迁移然后重新搭建它（运行`Add-Migration`）来修复这个错误。然后`Update-Database`运行良好，并且没有提及任何关于“自动迁移...”的内容。此外，我在运行 Add-Migration 时创建的迁移中的代码与我的队友创建的代码相同。我不明白为什么它甚至会尝试进行自动迁移，因为`AutomaticMigrationsEnabled = false;`.

我在这里想念什么？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-06-05T16:57:34.547

我讨厌回答自己的问题，但我又遇到了这个问题。我团队中的一位开发人员在他们的本地机器上重新启用了自动迁移，然后创建了一个显式迁移，它在我运行它后立即重现了这种行为。

实体框架将**始终**在运行具有在其文件中`Source`定义的属性的显式迁移之前运行自动迁移，**即使**. 如果显式迁移是在运行自动迁移后创建的，那么它只会设置属性。`.resx` **`AutomaticMigrationsEnabled = false``Source`**

 **结果是禁用自动迁移仅意味着 EF 在检测到模型更改时不会自动升级您的架构 - 但如果它需要填补某些显式迁移之间的空白，它可能仍会执行自动迁移。为避免此行为，请勿混合使用自动迁移和显式迁移。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T23:33:48.107

```
public class Configuration : DbMigrationsConfiguration<bailencasino.com.dal.Context.BlncnoContext>
{
    public Configuration()
    {
        AutomaticMigrationsEnabled = false;
        AutomaticMigrationDataLossAllowed = true;
    } 
```

添加`AutomaticMigrationDataLossAllowed = true;`，因此您假设您希望允许 EF 添加删除导致数据丢失的 SQL 对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T21:00:26.380

我的团队经历了一些可能与此有关的事情。如果两个团队成员都添加了一个迁移，签入他们的代码，获取最新的，然后执行更新数据库，第二个将得到一个错误，因为有一个迁移“跳过” - 他们的系统看到团队成员的迁移从未实现.

我们已经开始检查所有内容并获取最新信息，执行更新数据库（如果团队成员添加了新迁移），然后执行添加迁移、更新数据库、签入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T00:59:01.427

`AutomaticMigrationEnabled = false`防止您的应用程序自行更新数据库。

但是由于您自己运行 Update-database，Update-Database 会检查数据库的当前状态，然后运行数据库中尚未执行的所有迁移步骤，包括尚未基于代码迁移的模型 (dbContext) 中的更改.

我的猜测是模型的变化会导致数据丢失。

您可以使用该`-force`参数在数据丢失时仍然应用更改。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-22T04:43:26.237

@Dave Graves 是对的。我有同样的问题并做了他的修复以禁用特定迁移文件的自动迁移

继承人一些说明：

1.  转到解决方案资源管理器中迁移文件所在的位置（如果您使用的是 Visual Studio）
2.  查找导致自动迁移的迁移文件，例如：`202008181102535_BlogPost.cs`
3.  展开它，您将看到它的设计器文件。打开那个文件
4.  在该文件中，您将看到`Source`它的属性是由类似`Resources.GetString("Source")`. 将其替换为`null`然后再次尝试`update-database`在您的包管理器控制台中手动执行。**

# sparql - SPARQL 邻国示例

> ID：12341472
> 
> 赞同：0
> 
> 时间：2012-09-09T17:54:28.633
> 
> 标签：sparql

谁能告诉我任何 SPARQL 查询以从[http://www4.wiwiss.fu-berlin.de/factbook/sparql](http://www4.wiwiss.fu-berlin.de/factbook/sparql)获取所有国家的所有接壤国家？

例如阿富汗有：factbook:landboundary db:China, factbook:landboundary db:Iran, factbook:landboundary db:Pakistan, factbook:landboundary db:Tajikistan, factbook:landboundary db:Turkmenistan

我尝试获取数据：

```
SELECT ?country ?name ?neighbour
WHERE {
?country rdf:type factbook:Country .
?country rdfs:label ?name.
OPTIONAL{
  ?country factbook:landboundary ?neighbour.
 }
} 
```

以以下消息结束：

```
rethrew: de.fuberlin.wiwiss.d2rq.D2RQException: Table 'factbook.neighbors' doesn't exist: SELECT DISTINCT `T0_neighbors`.`name_encoded` FROM `bordercountries` AS `T0_bordercountries`, `neighbors` AS `T0_neighbors`, `countries` AS `T0_countries` WHERE `T0_bordercountries`.`Landboundaries_bordercountries_title` = `T0_neighbors`.`Name` AND `T0_bordercountries`.`Name` = `T0_countries`.`Name` AND `T0_countries`.`name_encoded` = 'Aruba' (E0) 
```

我在[http://answers.semanticweb.com](http://answers.semanticweb.com)上问过同样的问题，但还没有运气，所以我在这里试试运气

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T18:02:23.297

故障似乎是由内部系统错误引起的。您的 SPARQL 查询没有任何语法错误，并且您提供的谓词根据数据是有效的。

但是，我不明白您的查询应该如何返回一个特定国家的邻居。也许你想尝试这样的事情：

```
SELECT DISTINCT ?neighbor
WHERE {
    ?neighbor rdf:type factbook:Country .
    ?neighbor factbook:landboundary db:Afghanistan .
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-25T10:20:56.063

很久以后，并且不完全是这个问题的答案（CIA Factbook 的 SPARQL 端点目前似乎已关闭），但 WikiData 提供了一些示例，如何根据[https://query上的数据集获取毗邻国家.wikidata.org/](https://query.wikidata.org/)

例如，如果您打开示例并搜索“边界”，您会得到“与喀麦隆共享边界的国家”的查询：

```
#Population of countries sharing a border with Cameroon
#defaultView:LineChart
SELECT ?country ?year ?population ?countryLabel WHERE {
  {
    SELECT ?country ?year (AVG(?population) AS ?population) WHERE {
      {
        SELECT ?country (str(YEAR(?date)) AS ?year) ?population WHERE {
          ?country wdt:P47 wd:Q1009;  # shares border with Cameroon
                   p:P1082 ?populationStatement.
          ?populationStatement ps:P1082 ?population;
                               pq:P585 ?date.
        }
      }
    }
    GROUP BY ?country ?year
  }
  SERVICE wikibase:label { bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en". }
} 
```

要了解这一点，必须知道（或弄清楚）这`wd:Q1009`实际上是喀麦隆。不知道该怎么做。这个例子还显示了一个 - imo 不是很有用 - 按年份显示周边国家的人口。

没有额外数据的更简单的版本是：

```
SELECT ?country ?countryLabel WHERE {
  ?country wdt:P47 wd:Q1009  # shares border with Cameroon
  SERVICE wikibase:label { 
    bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en".
  }
} 
```

（这`SERVICE wikibase:label`是一个[WikiData 扩展](https://www.mediawiki.org/wiki/Wikidata_Query_Service/User_Manual#Label_service)）

最后，所有国家的所有邻国可能是：

```
SELECT ?country ?countryLabel ?neighbourLabel ?neighbour WHERE {
  ?country wdt:P31 wd:Q6256;
           wdt:P47 ?neighbour
  SERVICE wikibase:label { 
    bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en".
  }
} ORDER BY ?countryLabel ?neighbourLabel 
```

# c# - 如何在c#中将表格数据显示到datagridview中？

> ID：12341475
> 
> 赞同：3
> 
> 时间：2012-09-09T17:55:01.337
> 
> 标签：c#

```
mySqlCnnection.Open();
 string list = "select * from login";
 MySqlDataAdapter dataadapter = new MySqlDataAdapter(list, mySqlCnnection);
 DataSet ds = new DataSet();
 dataadapter.Fill(ds, "login");
 dataGridView1.DataSource =ds.Tables[0]; 
```

我想在 datagridview 中显示整个登录表数据，但得到一个空的小部件？有人可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T18:51:17.680

您在哪里使用此代码。你在哪个上面使用它？在 on_load 事件上尝试一下。使用默认视图，然后使用 DataBind() 方法绑定数据。

dataGridView1.DataSource =ds.Tables[0].DefaultView;

dataGridView1.DataBind();

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T17:56:59.043

`DataBind()`分配数据源后调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T17:59:26.217

尝试使用 DataTable 而不是使用 DataSet 来填充数据。或者检查你的 sql 连接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T18:55:59.617

你的代码：

```
 mySqlCnnection.Open();
    string list = "select * from login";
    MySqlDataAdapter dataadapter = new MySqlDataAdapter(list, mySqlCnnection);
    DataSet ds = new DataSet();
    dataadapter.Fill(ds, "login");
    dataGridView1.DataSource =ds.Tables[0]; 
```

在下一行...

```
dataGridView1.Databind(); 
```

虽然丑。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-09T19:00:01.107

尝试使用绑定源作为数据网格的数据源。

```
var bindingSource = new System.Windows.Forms.BindingSource();
bindingSource.DataSource = ds.Tables[0];
dataGridView1.DataSource = bindingSource; 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-11-27T14:44:10.143

```
string list = "select * from login";
SqlCommand command = new SqlCommand(list , db.connect());

SqlDataReader reader = command.ExecuteReader();
DataTable dt = new DataTable();
dt.Load(reader);
dataGridView1.DataSource=dt; 
```

# android - 有没有办法在本地检测耳机？

> ID：12341478
> 
> 赞同：0
> 
> 时间：2012-09-09T17:55:34.167
> 
> 标签：android, native, detect, headphones

> **可能重复：**
> [Android：检测耳机和耳机？](https://stackoverflow.com/questions/6606297/android-detect-headphones-as-well-as-headset)

java 有一个简单的方法，但是，因为我们正在做一个库，所以我们想跳过 jni 部分。

# sql - SQL将表添加到“发件人”组，更改答案

> ID：12341479
> 
> 赞同：0
> 
> 时间：2012-09-09T17:56:10.800
> 
> 标签：sql, oracle

我有一个查询结果：

```
Select Sum(Count(P.Create_Dtime)),
From Player P
Where
Trunc(P.Create_Dtime) >= To_Date('2012-mar-01','yyyy-mon-dd')
And Trunc(P.Create_Dtime) < To_Date('2015-sep-9','yyyy-mon-dd')
Group By Trunc(P.Create_Dtime)
Order By Trunc(P.create_Dtime) Asc 
```

结果 = 317827

现在，当我更改此查询以将另一个表添加到 from 组（稍后我将基于此表添加约束）...结果吐出一个新答案，其总和远大于原始答案。例如，原来的答案是 317827，现在当我在下表中添加时，答案是 6356540，正好是原来答案的 20 倍。“Feature_group_xref”表中有20行数据，create_dtime列也在那个表中。为什么这些值成倍增加？我认为因为我已经确定了每一列（带有“P”），所以它不应该是一个问题。有什么建议么？如果您在下面看到我添加的唯一内容是一个新表名：

```
Select Sum(Count(P.Create_Dtime))
From Player P, Feature_group_xref X
Where
Trunc(P.Create_Dtime) >= To_Date('2012-mar-01','yyyy-mon-dd')
And Trunc(P.Create_Dtime) < To_Date('2015-sep-9','yyyy-mon-dd')
Group By Trunc(P.Create_Dtime)
Order By Trunc(P.create_Dtime) Asc 
```

结果 = 6356540（表“Feature_Group_Xref”中有 20 行，其中一列是 create_dtime。这个结果正好是第一个查询结果的 20 倍。

**更新 - 我有这个查询，它为我提供了 2012 年 3 月 1 日之后创建的用户在过去 7 天内的活跃玩家总数...

```
Select
sysdate,sum(Count(p.init_dtime))
From Player p
Where
Trunc(p.Init_Dtime) > Trunc(Sysdate) - 7 
And
Trunc(P.Create_Dtime) >= To_Date('2012-mar-01','yyyy-mon-dd')
And Trunc(P.Create_Dtime) < To_Date('2015-sep-9','yyyy-mon-dd')
Group By Trunc(P.Init_Dtime)
Order By Trunc(p.Init_Dtime) Asc 
```

我想接受这个查询并将其分解，以便显示的唯一 (init_dtime) 值是 group_id = 1、10、20、30 和 40（组 id 为 1-100）的值。组 ID 可以在 player_source 表中找到，如果有帮助，“player_id”列位于 player 和 player_source 表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T18:15:48.323

它似乎是交叉连接两个表，因此你得到了这个结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T18:10:35.260

如果连接查询中的两个表（来自 Player P，在您的情况下为 Feature_group_xref X）没有连接条件，则 RDBMS 返回它们的笛卡尔积。这意味着一个表的每一行都与另一个表的每一行相结合。例如，如果一个表有 3 行，而另一个表有 3 行，那么如果你在没有连接条件的情况下连接这两个表，你将得到 9 行。

# c++ - 结构的无效前向声明

> ID：12341487
> 
> 赞同：1
> 
> 时间：2012-09-09T17:56:42.297
> 
> 标签：c++, forward-declaration

--EDIT -- 很抱歉让人们感到困惑，我只是快速输入了这段代码，而不是复制和粘贴，所以我实际上在我的代码中执行了#ifndef A_H #define A_H。我更改了以下代码以显示
-- 结束编辑 --

我有两个类，每个类都包含一个指向另一个类的实例的指针，但这给我带来了问题。我的代码类似于以下

```
// A.h
#ifndef A_H
#define A_H

class B; // compiler error here

class A
{
  B* foo;
  // other members and functions
};

#endif

// A.cpp
#include "A.h"
#include "B.h"
/*
 declare functions and use methods in both A and B
*/

// B.h
#ifndef B_H
#define B_H

class A;

class B
{
  A** bar;
// other stuff
};

#endif

//B.cpp
#include "A.h"
#include "B.h" 
/*
declare functions and use methods in both A and B
*/ 
```

有人告诉我，在头文件中前向声明另一个类，然后在 cpp 文件中包含另一个文件会起作用，但是在标记的行上我收到一个错误，只是说“前向声明'struct b'”

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T18:22:27.740

包括一个标题，让 bh in ah 不要转发声明 B in ahbh 可以保持原样。

否则你会得到像

```
class B {};
....
class B; 
```

仅对此类错误进行预处理总是明智的。

# python - Jinja 2 安全关键字

> ID：12341496
> 
> 赞同：29
> 
> 时间：2012-09-09T17:58:05.213
> 
> 标签：python, template-engine, jinja2

我在理解表达式 like 的作用时遇到了一点问题`{{ something.render() | safe }}`。

据我所见，没有`safe`关键字它会输出整个 html 文档，而不仅仅是真实的内容。

我想知道的是它实际上做了什么，它是如何运作的。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-09-09T18:02:55.837

过滤器将`safe`字符串显式标记为“安全”，即，如果启用了自动转义，则不应自动转义。

这个过滤器的文档在[这里](http://jinja.pocoo.org/docs/templates/#working-with-automatic-escaping)。

请参阅[手动转义](http://jinja.pocoo.org/docs/templates/#working-with-manual-escaping)部分以查看哪些字符有资格进行转义。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-09-09T18:03:43.453

通常文本是 HTML 转义的（所以`<b>`会写成`&lt;b&gt;`，呈现为`<b>`）。

当您`|safe`添加某些内容时，您是在告诉模板引擎您已经自己转义了文本，即“直接渲染它是安全的”。所以它不会为你做那个编码。

欲了解更多信息：http: [//jinja.pocoo.org/docs/templates/#html-escaping](http://jinja.pocoo.org/docs/templates/#html-escaping)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-04-24T10:51:37.683

对于任何来到这里希望以编程方式使用安全过滤器的人：将其包装在`markupsafe.Markup`Jinja2 所依赖的类中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-03-12T07:37:57.547

扩展@data的答案，这是一个使用示例`markupsafe.Markup`：

```
import markupsafe
vals = {}
vals["name"] = markupsafe.Markup("<b>Duck</b>, Donald")
html = template.render(vals) 
```

生成的 HTML 将在模板包含的任何位置以粗体显示 Donald 的姓氏`{{name}}`。

# java - 在 Swing GUI 中处理异常

> ID：12341498
> 
> 赞同：7
> 
> 时间：2012-09-09T17:58:50.873
> 
> 标签：java, swing, exception, exception-handling

我不确定如何在 GUI 中管理异常；我的目标是让用户知道是否出现问题，显示可理解的消息。

我正在考虑做这样的事情：

```
// I'm inside an actionPerformed() method
try {
    // do whatever I have to do here
} catch (KnownBusinessException1 e) {
    // inform the user and do something;
    // most times simply inform the user that it wasn't possible to complete the
    // operation and remain in the same window instead of moving forward.
} catch (KnownBusinessException2 e) {
    // just as above
} catch (KnownDataAccessException1 e) {
    // just as above
} catch (KnownDataAccessException2 e) {
    // just as above
} catch (RuntimeException e) { // I want to catch any other unexpected exception,
// maybe NPE or unchecked IllegalArgumentExceptions and so on
    // something went wrong, I don't know where nor how but I will surely inform the user
} 
```

现在：如果在 try 块中有要捕获的已检查异常，是嵌套 try/catch 还是在捕获 RuntimeException 后捕获这些已检查异常更好？（这可能取决于，我什至不知道这是否会发生顺便说一句）

另一件事：`Error`s呢？如果我是用户，我不希望遇到意外关闭，我更希望应用程序告诉我发生了令人难以置信的错误并且没有人可以对此做任何事情，“世界末日即将来临，所以我将立即退出”。至少我会知道这不是我的错，哈哈。

顺便说一句，不知道捕获错误是否是一个好习惯......：\

在 Swing 应用程序中有更好的方法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-09T18:21:13.263

我认为最好的方法是显式捕获所有已检查的异常，并为其余的安装未捕获的异常处理程序。看到这个：[如何检测何时在 Java 中全局抛出异常？](https://stackoverflow.com/questions/75218/how-can-i-detect-when-an-exceptions-been-thrown-globally-in-java)

这就是我使用 Thread.setDefaultUncaughtExceptionHandler 的方式：

```
public static void setupGlobalExceptionHandling() {
    Thread.setDefaultUncaughtExceptionHandler(new Thread.UncaughtExceptionHandler() {
        @Override
        public void uncaughtException(Thread t, Throwable e) {
            handleException(e);
        }
    });
} 
```

请注意，许多 SO 帖子中提到的 EDT 线程的“sun.awt.exception.handler”技巧不是必需的，并且在 Java 7 中不起作用。对于 Java 7，只需使用如上所述的标准 Thread.setDefaultUncaughtExceptionHandler。当然，如果您同时使用这两种机制来注册异常处理程序，那么代码将适用于所有版本。

顺便说一句，如果抛出未捕获的异常（但您的应用程序可能保持不一致的状态），EDT 线程会自动重新启动，请参阅：[EDT 和运行时异常](https://stackoverflow.com/questions/12077826/edt-and-runtime-exception/12077973)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T18:16:23.437

向用户显示出错的一个好方法是使用`JOptionPane`s。再加上对图标的良好使用（信息/错误），您就可以开始了。以下是一些示例代码供您参考：

[http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)

`JOptionPane`如果您愿意，可以考虑一些自定义/抽象类:)

至于以相同的方式处理多个异常，如果消息在所有 3`KnownBusinessException`和`KnownDataAccessException`s 中都相同，那么您可以确保两个类具有相同的父级并捕获一个类。如果`KnownBusinessException`s 而不是`KnownDataAccessException`s 需要相同的处理，则所有`KnownBusinessException`s 都具有相同的父级，所有`KnownDataAccessException`s 都具有相同的父级。希望你能得到我想要的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T18:14:03.373

> 如果在 try 块中有要捕获的已检查异常，是嵌套 try/catch 还是在捕获 RuntimeException 后捕获这些已检查异常更好？（这可能取决于，我什至不知道这是否会发生顺便说一句）

就像您说的那样，这取决于在捕获异常后执行 try 块中的其余代码是否有意义。如果不是，那么嵌套 try/catch 块就没有意义了。

# java - 通过套接字传输动画 GIF

> ID：12341502
> 
> 赞同：2
> 
> 时间：2012-09-09T17:59:19.487
> 
> 标签：java, sockets, applet, gif

我从事一个项目，我需要通过 TCP 套接字将 GIF 从服务器传输到小程序。问题是当我传输图像时它变成静态的（显示的最后一帧）。

我尝试在服务器端加载图像的位置传输（ICON），但结果相同。

那么，是否有任何类可以读取动画 gif 以便我可以通过 ObjectOutputStream 传输它？或其他任何方式？

服务器端：

```
ImageIcon icon = new ImageIcon("D:\\Data Files\\simu.gif");
Mat_out.writeObject(icon); 
```

客户端：

```
ImageIcon icon = (ImageIcon) Mat_in.readObject();
jLabel2.setIcon(icon); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T02:08:38.180

1.  使用工具包的[`createImage(..)`工具包](http://docs.oracle.com/javase/7/docs/api/java/awt/Toolkit.html#method_summary)方法之一加载图像，但是..
2.  添加一个[`MediaTracker`](http://docs.oracle.com/javase/7/docs/api/java/awt/MediaTracker.html)以确保在传输之前*加载整个图像。*（这也适用于从 返回的图像`ImageIcon`，但为什么要创建一个不需要的 GUI 组件呢？）

使用阻塞方法交替加载整个`byte[]`图像，并将其提供给`createImage(byte[])`.

# php - 在 SSH2 上通过 root 运行命令

> ID：12341505
> 
> 赞同：1
> 
> 时间：2012-09-09T17:59:29.193
> 
> 标签：php, linux, ssh

我正在用 PHP 开发一个控制面板，我安装了 PHPsecLib 库并使用它向远程服务器发出命令。

例如;

```
$ssh->exec("cd /home/{$user}/{$id}; screen -S {$id} -A -d -m  java -Xmx768M -jar minecraft_server.jar nogui -nojline;"); 
```

现在我的问题是，因为我以 root 身份发出命令，这是否是一种安全威胁，即使所有运行的命令都是预先制作/硬编码的，而不是来自用户输入。

如果这是一个问题，任何人都可以建议最好的方法吗？

谢谢，哈利

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T18:15:12.757

我建议你另一种方式：

1/ 你的 php 不执行命令，而是将它们写入文件

2/ croned php 文件或守护进程定期检查此文件并以 root 身份执行命令。

永远不要对你的 UI 有信心，即使你使用静态的东西来运行命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T18:41:33.090

您不想以 root 身份运行。相反，如果您使用 sudo，可以稍微强化平台：

```
username    ALL = NOPASSWD: /bin/screen, PASSWD: ALL 
```

这将允许您的用户：`username`无需 sudo/密码即可运行屏幕，但仍需要对平台上的其余可执行文件进行身份验证。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T19:27:40.933

您可以使用 phpseclib 执行 sudo，如下所述：

[http://phpseclib.sourceforge.net/ssh/examples.html#sudo](http://phpseclib.sourceforge.net/ssh/examples.html#sudo)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T18:05:08.790

有一种方法：

切勿以 root 身份运行命令。

这是一个不好的做法。

# c# - 收藏已修改；枚举操作可能无法执行

> ID：12341507
> 
> 赞同：4
> 
> 时间：2012-09-09T17:59:57.977
> 
> 标签：c#, .net, windows

我收到错误：集合已修改；枚举操作可能无法执行。我正在尝试删除除当前对象之外的所有打开的表单对象：

```
 FormCollection fc = Application.OpenForms;
    foreach (Form form in fc)
    {
        if (form.ToString().Contains("_MainFrom.Form1"))
        {
            // Do nothing
        }
        else
        {
            form.Hide();
            form.Dispose();
        }
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-09T18:05:16.753

您不能在枚举时修改集合。

利用 `foreach (Form form in fc.Cast<Form>().ToList())`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-09T18:02:46.673

改变

```
foreach (Form form in fc) 
```

至

```
foreach (Form form in fc.OfType<Form>().ToList()) 
```

这样，在开始从原始集合中删除内容之前，您可以将 OpenForms 集合复制到新集合。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T18:02:22.310

您不能修改正在执行枚举的集合（`foreach`例如）。您应该在这里使用其他方法，例如`Remove`或使用`for`循环。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T18:03:01.143

您的问题是：“我正在通过在迭代表单时关闭其中一个表单来修改打开表单的集合，并在迭代时遇到错误，我正在修改打开表单的集合”。

答：要么不要使用`foreach`迭代，要么不要在迭代期间修改集合。否则他们会发现的。

最常见的方法是将此类操作分为两个步骤：

*   查找需要从集合中添加/删除的对象
*   作用于对象的结果集合

在你的情况下：

```
var toClose = fc.Where(
   form => form.GetType().FullName.Contains("_MainFrom.Form1"));
toClose.ToList().ForEach(form => {
   form.Hide(); form.Dispose(); 
}); 
```

# git - 无法将本地更改推送到现有的远程分支

> ID：12341508
> 
> 赞同：7
> 
> 时间：2012-09-09T18:00:05.553
> 
> 标签：git, remote-branch

有一个名为“my-remote”的远程分支，我之前推送到没有问题。截至今天，我无法推送，并且出现不同的错误。

我得到的第一个错误是：

> ```
> hint: Updates were rejected because a pushed branch tip is behind its remote
> hint: counterpart. If you did not intend to push that branch, you may want to
> hint: specify branches to push or set the 'push.default' configuration
> hint: variable to 'current' or 'upstream' to push only the current branch. 
> ```

我做了一些研究并运行了这个，希望它能解决问题：

```
git config push.default tracking 
```

运行后我再次运行推送：

```
git push https://github.com/someurl/mybranch.git 
```

我收到以下错误：

```
pushing to remote 'https://github.com/someurl/mybranch.git', which is not the upstream of
your current branch 'my-remote', without telling me what to push
to update which remote branch. 
```

我试过运行这个：

```
git push master:my-remote https://github.com/someurl/mybranch.git 
```

但它告诉我：

```
fatal: remote part of refspec is not a valid name in https://github.com/someurl/mybranch.git 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-09T19:08:53.137

如果你想将你的 master 分支推送到 my-remote 远程分支上，正确的语法是：

```
 git push https://github.com/someurl/mybranch.git master:my-remote 
```

（第一：远程回购参考，refspec，来自[`git push`手册页](http://git-scm.com/docs/git-push)）

关于您的第一条错误消息，如果它确实没有告诉您合并，那么`git pull --rebase`可能需要 a 。
或至少一个：

```
 git config --global push.default current 
```

（如“[配置 Git 以仅推送当前分支](http://jimkubicek.com/blog/2012/08/16/git-push-current-branch/)”中所述）。

如果您在本地分支 ' `my-remote`' 中（根据命令是这种情况），您可以通过以下方式确保设置上游分支：

```
git push -u https://github.com/someurl/mybranch.git my-remote:my-remote 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-09T14:00:56.337

推送到现有的 git repo 有 9 个步骤。

我尝试了“git push --set-upstream origin master”并得到以下错误：

```
C:\Users\User\Documents\Visual Studio 2013\Projects\app\User-app-40d72a288916>git push --set-upstream origin master
Password for 'https://User@bitbucket.org':
To https://User@bitbucket.org/User/app.git
 ! [rejected]        master -> master (fetch first)
error: failed to push some refs to 'https://User@bitbucket.org/User/
app.git'
hint: Updates were rejected because the remote contains work that you do
hint: not have locally. This is usually caused by another repository pushing
hint: to the same ref. You may want to first merge the remote changes (e.g.,
hint: 'git pull') before pushing again.
hint: See the 'Note about fast-forwards' in 'git push --help' for details. 
```

然后我尝试了“git pull”并得到了最新的变化：

```
C:\Users\User\Documents\Visual Studio 2013\Projects\app\User-app-40d72a288916>git pull
Password for 'https://User@bitbucket.org':
warning: no common commits
remote: Counting objects: 344, done.
remote: Compressing objects: 100% (275/275), done.
remote: Total 344 (delta 45), reused 336 (delta 41)
Receiving objects: 100% (344/344), 15.91 MiB | 43.00 KiB/s, done.
Resolving deltas: 100% (45/45), done.
From https://bitbucket.org/User/app
 * [new branch]      master     -> origin/master
There is no tracking information for the current branch.
Please specify which branch you want to merge with.
See git-pull(1) for details

git pull <remote> <branch> 
```

如果您希望为此分支设置跟踪信息，您可以这样做：

```
git branch --set-upstream-to=origin/<branch> master 
```

我做了一个“git push”并且更改失败：

```
C:\Users\User\Documents\Visual Studio 2013\Projects\app\User-app-40d72a288916>git push origin master
Password for 'https://User@bitbucket.org':
To https://User@bitbucket.org/User/app.git
 ! [rejected]        master -> master (non-fast-forward)
error: failed to push some refs to 'https://User@bitbucket.org/User/
app.git'
hint: Updates were rejected because the tip of your current branch is behind
hint: its remote counterpart. Merge the remote changes (e.g. 'git pull')
hint: before pushing again.
hint: See the 'Note about fast-forwards' in 'git push --help' for details. 
```

“git add -A”和“git commit”不起作用，因为没有什么要提交的。

```
C:\Users\User\Documents\Visual Studio 2013\Projects\app\User-app-40d72a288916>git add -A

C:\Users\User\Documents\Visual Studio 2013\Projects\app\User-app-40d72a288916>git commit 
```

在分支 master 上没有提交，工作目录干净

“git branch --set-upstream-to=origin/master master”似乎可以解决问题。

```
C:\Users\User\Documents\Visual Studio 2013\Projects\app\User-app-40d72a288916>git branch --set-upstream-to=origin/master master
Branch master set up to track remote branch master from origin. 
```

但是，“git push origin master”不起作用，因为当前分支的尖端在它的远程对应物后面。

```
C:\Users\User\Documents\Visual Studio 2013\Projects\app\User-app-40d72a288916>git push origin master
Password for 'https://User@bitbucket.org':
To https://User@bitbucket.org/User/app.git
 ! [rejected]        master -> master (non-fast-forward)
error: failed to push some refs to 'https://User@bitbucket.org/User/
app.git'
hint: Updates were rejected because the tip of your current branch is behind
hint: its remote counterpart. Merge the remote changes (e.g. 'git pull')
hint: before pushing again.
hint: See the 'Note about fast-forwards' in 'git push --help' for details. 
```

需要一个“git pull”来合并 repo。

```
C:\Users\User\Documents\Visual Studio 2013\Projects\app\User-app-40d72a288916>git pull
Password for 'https://User@bitbucket.org':
Merge made by the 'recursive' strategy. 
```

执行“git pull”后，“git push origin master”正是让同步命令在 Visual Studio git 插件中工作所需要的。

```
C:\Users\User\Documents\Visual Studio 2013\Projects\app\User-app-40d72a288916>git push origin master
Password for 'https://User@bitbucket.org':
Counting objects: 5, done.
Delta compression using up to 8 threads.
Compressing objects: 100% (4/4), done.
Writing objects: 100% (4/4), 539 bytes | 0 bytes/s, done.
Total 4 (delta 2), reused 0 (delta 0)
To https://User@bitbucket.org/User/app.git
   40d72a2..9748b8b  master -> master

C:\Users\User\Documents\Visual Studio 2013\Projects\app\User-app-40d72a288916> 
```

# version-control - 如何从我的主仓库禁用/停止意外的子仓库？

> ID：12341512
> 
> 赞同：0
> 
> 时间：2012-09-09T18:00:42.783
> 
> 标签：version-control, github, twitter-bootstrap, versioning, repository

这是我目前的状态：

1.  我在 github 中创建了一个新的仓库`project`
2.  在我的开发计算机中克隆了 repo`/project`
3.  克隆的**twitter bootstrap**存储库`/project/public/`
4.  对我的项目进行了一些结构性更改
5.  提交并将更改推送到 github

因为我不小心将该`/project/public`目录设置为 twitter bootrap 的子存储库，所以它无法识别对其所做的任何更改。

我尝试删除 .git 目录，但这并没有解决它。

我可以做些什么来回收公共目录作为我的回购的一部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T18:31:11.213

不是一个很好的修复，但这是我为使它工作所做的：

1.  从 subrepo ( `/project/public/.git`)中删除 .git 目录
2.  将`public`目录移到主仓库之外
3.  提交并推送删除到github
4.  将目录添加回`public`我的项目
5.  提交并将更改推送到 github

我的主仓库没有正确跟踪公共内部的所有文件。

为避免这种情况，您应该在提交之前删除 .git 目录。

# azure - Azure Web 角色内部终结点 - 非负载平衡

> ID：12341513
> 
> 赞同：2
> 
> 时间：2012-09-09T18:01:09.520
> 
> 标签：azure, azure-web-roles

Azure 文档说 Web 角色上的内部终结点不会进行负载平衡。这有什么实际影响？

示例：我有一个包含 20 个实例的 Web 角色。如果我为该 Web 角色定义了一个内部端点，那么内部实现是什么？例如，所有 20 个实例是否仍会为该端点提供服务？我可以为每个实例获取一个特定的端点吗？

我们有一个独特的回调需求，可以通过利用公共端点上的正常负载平衡行为很好地满足该需求，但让每个实例都公开一个内部端点。根据已发布的端点限制数字，这是不可能的。那么，在定义内部端点时，是“每个实例 1 个”还是什么？是否所有角色实例都服务于端点？当他们说内部端点没有负载平衡时，Microsoft 是什么意思？所有流量是否只流向一个实例？那没有意义。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-09T19:28:29.780

首先让我们澄清一下数量和限制。EndPoints 的限制是针对角色，而不是针对实例。如果您不确定，或者仍然对角色和实例术语感到困惑，您可以查看[我的博客文章](http://blogs.staykov.net/2011/12/windows-azure-basics-part-1-of-n.html)。因此，限制是每个角色。

[现在 EndPoints 之间的差异 - 我在这里](http://blogs.staykov.net/2012/03/windows-azure-basics-part-2-of.html)有一篇描述它们的博客文章。但在快速回合中，Internal EndPoint 只会在部署**内部打开通信。**这就是为什么它是内部的。没有外部流量（来自 Internet）将能够到达内部端点。在这种情况下，它不是负载平衡的，因为没有流量通过/通过负载平衡器！内部端点的流量只在角色实例之间传输（最终通过一些内部路由硬件），但从不存在于部署边界。话虽如此，必须已经清楚不能将 Internet 流量发送到内部端点。

附注 - InputEndpoint 但是可以从 Internet 和部署内部发现。但它**是**LoadBalanced，因为到 InputEndpoint 的流量来自 Internet 通过/通过 LoadBalancer。

回到数字。假设您有 1 个具有 1 个输入端点和 1 个内部端点的 WebRole。这使您的部署总共有 2 个端点。即使您启动 50 个实例，您仍然只有 2 个 EndPoints 计入总 EndPoints 限制。

您能否获得特定实例的特定端点 - 当然可以！通过[RoleEnvironemnt](http://msdn.microsoft.com/en-us/library/ee773173)类。它有[Roles 枚举](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.serviceruntime.roleenvironment.roles)。每个 Role 都有[Instances](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.serviceruntime.role.instances)，每个 Instance 都有[InstanceEndpoints](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.serviceruntime.roleinstance.instanceendpoints)。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-09T20:34:21.050

端点在角色级别定义并为每个实例实例化。

输入端点有一个公共 IP 地址，可以从 Internet 访问它。到该输入端点的流量在托管该端点的所有角色实例之间进行负载平衡（使用循环算法）。

内部端点没有公共 IP 地址，只能从云服务或包括该云服务的[虚拟网络内部访问。](http://convective.wordpress.com/2012/08/26/windows-azure-cloud-services-and-virtual-networks/)Windows Azure 不会对内部端点的流量进行负载平衡 - 每个角色实例端点必须单独寻址。Ryan Dunn 有一篇不错[的文章](http://dunnry.com/blog/2010/05/28/HostingWCFInWindowsAzure.aspx)，展示了一个与托管 WCF 服务的内部端点实现负载平衡交互的简单示例。

Spring Wave 版本引入了[实例输入端点](http://msdn.microsoft.com/en-us/library/windowsazure/gg557553.aspx#InstanceInputEndpoint)的预览，它是一个公共 IP 端点，被端口转发到特定角色实例。这显然不是负载平衡的，而是提供了一种直接连接到特定实例的方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-09T21:21:12.563

只是想让事情更简洁和具体：

```
// get a list of all instances of role "MyRole"
var instances = RoleEnvironment.Roles["MyRole"].Instances;

// pick an instance at random
var instance = instances[new Random().Next(instances.Count())];

// for that instance, get the IP address and port for the endpoint "MyEndpoint"
var endpoint = instance.InstanceEndpoints["MyEndpoint"].IPEndpoint; 
```

将内部端点视为查找其他 VM 的发现机制。

# pdf - Tika - 如何从 PDF 文本中提取文本：下划线、突出显示、划掉

> ID：12341514
> 
> 赞同：3
> 
> 时间：2012-09-09T18:01:14.030
> 
> 标签：pdf, text, markup, apache-tika

我正在使用 Tika* 来解析 PDF 文件。检索文档的文本没有问题，但我不知道如何提取文本：

*   下划线
*   突出显示
*   划掉

Adobe Writer 为您提供不同的文本编辑选项，但我无法看到它们“隐藏”在哪里。

有没有办法提取这些元数据信息？（下划线，高亮...）

你知道 Tika 是否能够提取这些数据吗？

*http://tika.apache.org/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-04-15T16:45:36.607

哇。等待答案的时间是 4 年，我想您现在已经找到了解决方案。无论如何，为了那些访问此链接的人，答案是肯定的。Apache Tika 不仅可以提取文档中的文本，还可以提取格式（例如粗体、斜体）。这是我的场景：

```
 //inputStream is the document you wish to parse from.

    AutoDetectParser parser = new AutoDetectParser();
    ContentHandler handler = new BodyContentHandler(new ToXMLContentHandler());
    Metadata metadata = new Metadata();

    parser.parse(inputStream,handler,metadata);
    System.out.println(handler.toString()); 
```

print 语句打印文档的 XML。通过清理 XML（真正的 HTML 标记）的一些工作，您将留下诸如 < b >text</b> 用于粗体文本和 < i >text</i > 用于斜体文本的标记。然后你可以找到一种方法来渲染它。祝你好运。

# javascript - javascript skrollr 根据动态内容更新窗口高度

> ID：12341516
> 
> 赞同：2
> 
> 时间：2012-09-09T18:01:19.377
> 
> 标签：javascript, javascript-databinding

在我的项目中，我有一个带有项目网格的长滚动页面。当您单击一个项目时，我会 ajax 加载该项目，然后滑动打开一个窗口，将项目网格向下推，显示所选项目。每个项目将根据内容具有不同的高度。我需要显示在项目网格下方的内容始终显示在页面末尾。目前，当网格幻灯片打开时，它会滑过“页脚”内容（底部的粗略示例）。

skrollr 文档说如果窗口调整大小，你应该调用刷新函数。

我在初始化时运行此功能，在项目网格单击时，我没有看到窗口调整到内容的新高度。**目标是让页脚在项目网格之后始终出现几百像素，**无论其当前高度/位置是什么。

[http://caava.elusiveform.com/example.html](http://caava.elusiveform.com/example.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T10:26:10.007

我认为这与 skrollr 无关。如果您希望页脚出现在内容之后，请确保它在文档流中。您正在使用`position:fixed`它并将其与其他东西混合。我建议先创建没有 skrollr 的页面，然后使用[相对模式](https://github.com/Prinzhorn/skrollr#relative-mode-or-viewport-mode)添加动画。您使用的`skrollr.css`文件已过时，不再存在。

在确保正确放置页脚后，您可以调用`refresh`以使动画正常工作（它们取决于数据端，它会发生变化并需要重新计算）。在您的情况下，这可能就足够了：

```
s.refresh(document.getElementById('footer')); 
```

顺便说一句，skrollr 文档说

> 窗口大小调整由 skrollr 处理。

`refresh`仅当您更改 DOM 并且 skrollr 无法检测到时才需要。

# java - 无法从解压缩的源存档在 Windows 上运行 mvn 命令

> ID：12341518
> 
> 赞同：2
> 
> 时间：2012-09-09T18:01:44.543
> 
> 标签：java, maven, environment-variables

我的笔记本电脑被盗了，所以我不得不重新下载 Java 和 Maven，而且我似乎无法启动并运行 Maven，尽管我上次没有遇到任何问题。我有以下位置：

```
C:\Program Files\Java\jdk1.7.0_03
C:\Program Files\apache-maven-3.0.4 
```

在我的环境设置中，我添加了以下系统变量：

```
M2_HOME - C:\Program Files\apache-maven-3.0.4
JAVA_HOME - C:\Program Files\Java\jdk1.7.0_03 
```

我更新了我的`Path`系统变量，以便将以下内容放在开头：

```
%JAVA_HOME%\bin;%M2_HOME%\bin; 
```

这一切都是我从[Maven 安装说明](http://maven.apache.org/download.html#Installation)中得到的。但是，当我打开一个新的命令提示符并检查版本时，我收到以下消息：

```
'mvn' is not recognized as an internal or external command,
operable program or batch file. 
```

有谁知道我错过了什么？

**更新**

当我安装 Java 时，我注意到`java -version`自动开始工作而无需我做任何事情。某处可能存在Java冲突吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T18:17:08.853

你的路径变量应该有`%M2_HOME%\bin`而不是`%M2%\bin`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T03:04:20.263

检查 mvn.bat 的属性，看它是否被阻塞。

# spring - 找不到“http://tiles.apache.org/tags-tiles”的标签库描述符

> ID：12341521
> 
> 赞同：8
> 
> 时间：2012-09-09T18:01:56.243
> 
> 标签：spring, apache, hibernate, web-applications, tiles

我正在使用 Tiles、Spring 和 Hibernate 创建一个应用程序。

运行时显示如下错误：

```
Can not find the tag library descriptor for "http://tiles.apache.org/tags-tiles" 
```

所有的罐子都包括在内，映射也很好。我哪里错了？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-10T07:52:28.943

网址看起来不错。

您的问题听起来有点像您缺少一些瓷砖罐。确保将包含的 jar`tiles-jsp.tld`添加到您的项目 web`libs`文件夹中。

一个包含此文件的 jar 文件例如：[`tiles-jsp-2.2.1.jar`](http://mvnrepository.com/artifact/org.apache.tiles/tiles-jsp/2.2.1).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-05T07:20:44.527

在 pom.xml 文件中附加在工件下面，这次编译得很好。

```
<!-- Tiles -->
        <dependency>
            <groupId>org.apache.tiles</groupId>
            <artifactId>tiles-api</artifactId>
            <version>2.1.2</version>
        </dependency>
        <dependency>
            <groupId>org.apache.tiles</groupId>
            <artifactId>tiles-core</artifactId>
            <version>2.1.2</version>
        </dependency>
        <dependency>
            <groupId>org.apache.tiles</groupId>
            <artifactId>tiles-jsp</artifactId>
            <version>2.1.2</version>
        </dependency>
        <dependency>
            <groupId>org.apache.tiles</groupId>
            <artifactId>tiles-servlet</artifactId>
            <version>2.1.2</version>
        </dependency> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T20:37:07.447

`taglib`我从其他地方复制了带有声明的整个文件，并得到了相同的编译错误。我删除了文件，创建了一个新文件并粘贴了相同的内容。听起来很奇怪，但有效！希望它可以帮助某人。:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-05T08:51:32.823

即使有tiles-jsp.2.0.6.jar，我也遇到了这个问题。因此，我通过从 Maven 依赖项中手动删除 jar 并将其添加为外部 jar 找到了解决方案。它有效，您也可以尝试这样做。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-20T09:36:37.223

在 Spring 项目的 pom.xml 中添加 tiles 依赖项将有助于 -

```
<dependency>
    <groupId>org.apache.tiles</groupId>
    <artifactId>tiles-jsp</artifactId>
    <version>3.0.7</version>
</dependency> 
```

# javascript - 将 webkit 转换从 CSS 转换为 JavaScript

> ID：12341523
> 
> 赞同：-2
> 
> 时间：2012-09-09T18:02:12.557
> 
> 标签：javascript, css

对于以下 HTML：

```
<li id="li1">
    <div id="card-container">
        <div id="card">
            <div class="front">
            <img id="track_image" src="image.jpg" />
        </div>
        <div class="back">
            <div id="controls">
                <audio controls></audio>
            </div>
        </div>  
    </div>
</li> 
```

我有以下 CSS，它会在悬停时翻转它。

```
#card-container:hover .back {   
    -webkit-transform: rotateX(0deg);
}

#card-container:hover .front {      
    -webkit-transform: rotateX(-180deg);
} 
```

但是我想更改它，以便翻转发生在单击时，我附加了一个单击侦听器并在下面尝试此代码，但它没有做任何事情

```
function click(evt, listElementId) {
       var listElement = document.getElementById(listElementId);
       var front = listElement.getElementsByClassName("front")[0];
       front.style.webkitTransition = "rotateX(-180deg)";
       var back = listElement.getElementsByClassName("back")[0];
       back.style.webkitTransition = "rotateX(0deg)" 
```

JavaScript 应该如何实现与 CSS 相同的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T18:16:13.737

你有困惑`transition`的s和`transform`ations。根据[这个答案](https://stackoverflow.com/q/708895/1048572)，你应该使用

```
front.style.webkitTransform = "rotateX(-180deg)"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T18:06:16.757

使用一个类：

```
#card-container.flipped .back {   
    -webkit-transform: rotateX(0deg);
}

#card-container.flipped .front {      
    -webkit-transform: rotateX(-180deg);
} 
```

```
function click(evt, listElementId) {
    document.getElementById(listElementId).classList.add('flipped');
} 
```

# arrays - 更改数组维度和类型

> ID：12341536
> 
> 赞同：0
> 
> 时间：2012-09-09T18:03:21.410
> 
> 标签：arrays, matlab, math, dimensions

我是matlab的新手。我有一个数组`50x100 uint8`，我想把它改成`5000x1 double`. 我怎样才能做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-09T19:06:15.923

如果您只想要一列数据，冒号运算符`:`也是一种选择：

```
 data = uint8(randi(10,50,100));
 result = double(data(:)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-09T18:07:21.437

您可以使用`reshape(matrix_to_resize, new_row_size, new_col_size)`来调整数组的大小。您应该能够使用结果矩阵和`im2double(matrix)`函数将元素转换为双精度数。

[重塑的文档。](http://www.mathworks.com/help/techdoc/ref/reshape.html)

# ruby-on-rails - 迁移创建失效表

> ID：12341538
> 
> 赞同：0
> 
> 时间：2012-09-09T18:03:31.847
> 
> 标签：ruby-on-rails, rails-migrations

**环境**

红宝石 1.9.3p194（2012-04-20 修订版 35410）[x86_64-darwin10.8.0]；导轨 3.2.6；OSX 10.6.8

**问题**

*   **即使在重置我们的数据库 (rake db:reset) 之后，迁移也会生成错误的表、字段和模式，其中包含已被早期迁移规范弃用的表、字段、限制、索引等。**

**背景**

*   我在两个 OSX 10.6.8 系统之间来回移动了一个与 github 合作的项目。**在之前的时刻，迁移是通过将预期的表定义合并到一个初始迁移中从头开始重新开始的（消除了许多先前迁移规范的大量混乱和费力的处理）。**

*   几个月来，修改后的迁移忠实地生成了表和模式。

*   **在从便携式系统同步公共存储库后将我们的项目拉到我的主要开发系统后，进一步的迁移将保留许多表和字段，这些表和字段实际上没有在任何现有迁移中定义，也不是由相同的迁移生成其他合作者的开发环境。**换句话说，许多已失效/已弃用的字段和表以某种方式保留在规范中，而这些规范早在我们修改后的迁移中被删除了。**因此 db:migrate 在这个系统上产生错误的表和模式，即使在运行 rake db:reset 之后也是如此。**

*   **据推测，先前的规定保留在开发环境中的某个地方，并且有必要以某种方式删除、修改或覆盖先前的、不再存在的定义，这些定义仍然在不受欢迎的表和字段中沉淀。**

*   在纠正这个问题时，被迫撤销现有的工作是非常不可取的。

**问题**

那么，重新生成**忠实于我们在项目中保留的迁移规范的迁移、表和模式的正确且有效的方法是什么？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T18:09:35.840

请参考这些参考资料：

*   [http://guides.rubyonrails.org/migrations.html#schema-dumping-and-you](http://guides.rubyonrails.org/migrations.html#schema-dumping-and-you)
*   [rake db:schema:load 与迁移](https://stackoverflow.com/questions/5905287/rake-dbschemaload-vs-migrations)

基本上，你可以运行

```
rake db:schema:load 
```

直接从 schema.rb 文件加载你的数据库模式，但是在生产环境中这样做要小心，因为这会删除你的生产数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T04:06:40.370

**使固定**

通过推导以下过程，我终于能够生成符合我们迁移规范的模式和表：

1.  **首先，我手动删除了我的 schema.rb 的 do 和 final 终止符之间的所有指令**，并且（无论是否重要）我进一步**将版本重新定义为 0：**

    ```
    ActiveRecord::Schema.define(:version => 0) do  
    end 
    ```

2.  接下来，我运行了**rake db:drop db:create db:reset**（首先删除表，只是为了消除工件可能从 SQL 引擎进程中持续存在的任何可能性）。

3.  最后，在重新填充我们的表之前，我运行了**rake db:migrate**（无论出于何种原因，我的环境拒绝在单个语句中使用前面三个命令运行 [我经常运行**rake db:drop db:create db:schema :load db:fixtures:load**例如重建和重新填充表]）。

**笔记**

*   在尝试诊断可能的影响因素时，项目搜索发现除了我的错误模式之外，在任何文件中绝对没有引用过时的表或字段。**因此，我推测由于某种原因（可能是处理错误？）错误的现有*模式*引用在进一步的进程中持续存在**。

*   在任何情况下，从我的本地 schema.rb 中删除所有指令后，重置和常规迁移成功地生成了一个确实***忠实***于我们的迁移规范的模式，**而之前的努力导致模式错误地保留了冗余表、字段等，这实际上，似乎已经从以前的（已失效的）本地模式中持续存在。**

*   因此，很可能，如果**rake db:reset**显然是从一个已失效的模式中生成表和模式，**而该进程尚未根据现有的迁移规范重建，**那么这些结果（我现在已经反复复制）表明 db 中存在逻辑缺陷： reset —— 它*本身*应该清除先前的模式，因此 db:reset 既不保留也不错误地依赖于前模式的规范。

*   为了那些可能在编写迁移时引入自己的无意错误的人的安全，我还建议在重建合法模式之前， db:reset 首先将现有（失效）模式复制到带时间戳的备份中，可以通过以下方式纠正有问题的迁移对前一个模式的记录的潜在必要依赖。

# javascript - 如何正确使用.each

> ID：12341552
> 
> 赞同：1
> 
> 时间：2012-09-09T18:05:03.423
> 
> 标签：javascript, jquery

我正在尝试让 jQuery 使用“image”类在 div 内找到图像的高度/宽度属性，然后将这些值作为 css 应用到具有“image”子类“overlay”的 div。下面的代码是我到目前为止所得到的。它适用于“图像”的一个实例。但我不确定如何让它遍历“图像”的每个实例并将正确的值应用于“叠加”。我玩过 .each 但我无法让它工作。

HTML：

```
<div class="image">
    <img src="some-img" width="400" height="200" />
    <div class="overlay"></div>
</div> 
```

jQuery：

```
var height = $("img").attr("height");
var width = $("img").attr("width");

    $(".overlay").css({
        height: height,
        width: width
    }); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T18:08:11.947

```
$(".image").each(function(index, el) {
    var $img = $("img", this); // equivalent: $(this).find("img")
    $(".overlay", this).css({
         height: $img.attr("height"),
         width: $img.attr("width")
    });
}); 
```

您还可以迭代`img`元素本身并使用它`.next()`来获取相应的叠加层。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T18:08:31.207

我建议：

```
$('.image img').each(
    function(){
        var that = $(this),
            h = that.height(),
            w = that.width();
        that.next().css({ 'height' : h, 'width' : w });
    }); 
```

# facebook - 删除我网站上的 Facebook 评论

> ID：12341554
> 
> 赞同：2
> 
> 时间：2012-09-09T18:05:13.633
> 
> 标签：facebook, comments

我允许用户在我的网站上使用“facebook 评论”发表评论，并使用元标记 fb:admins 我可以隐藏评论。但这只会对那些与发表评论的人不是朋友的人隐藏它们。我需要能够删除评论。有时我不希望评论者的朋友能够阅读它。

可以选择使用元标记 fb:app_id 但这需要一个 facebook 应用程序。所以我花了 8 个小时创建一个应用程序，因为我认为这可能会奏效。在我有机会测试它之前，我必须上传屏幕截图和横幅以及所有其他内容。最后 Facebook 说他们会审查它。老实说，我不知道我创建了什么应用程序，因为我认为有一个空应用程序可能会在我使用 fb:app_id 时强制出现删除按钮。

在这里谷歌搜索，我现在看到有人说“这不是一个真正的应用程序，它只是 facebook 所说的。但是我如何创建这个“假”应用程序，它会成功吗？

如果我不喜欢他们，我当然可以删除我网站上的评论吗？或者？

那么，如何删除人们在我网站上留下的评论？- 一定有成千上万的人在寻找这个选项。不敢相信这不是更容易！

# html - 在 html5 中自定义 navigator.geolocation 栏

> ID：12341561
> 
> 赞同：0
> 
> 时间：2012-09-09T18:05:34.680
> 
> 标签：html, geolocation, navigator

是否可以自定义生成的导航器地理位置栏

```
if (navigator.geolocation) {
   navigator.geolocation.getCurrentPosition(function (position) {
      //....
   });
} 
```

现在酒吧看起来很丑，在互联网上搜索没有任何结果

栏，询问用户是否想与应用分享他的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T18:08:05.747

如果您在谈论权限栏，答案是否定的。

# mysql - 使用外键和非键属性创建复合主键

> ID：12341564
> 
> 赞同：2
> 
> 时间：2012-09-09T18:05:52.930
> 
> 标签：mysql, composite-primary-key

这是我创建批处理表后自动生成的代码。在向该表插入数据时

1.  BatchID=1,Course_CourseID=1
2.  BatchID=1,Course_CourseID=2

它正在创建一个错误，提示“密钥'BatchID_UNIQUE'的重复条目'1'”。我正在使用 C# 2010 express windows 应用程序以及 MySQl 5.1

我的表架构在这里

```
CREATE TABLE `batch` (
  `BatchID` int(11) NOT NULL,
  `Course_CourseID` int(11) NOT NULL,
  `NoOfStudents` int(11) DEFAULT NULL,
  `ClassRoom` varchar(45) DEFAULT NULL,
  `StartDate` varchar(45) DEFAULT NULL,
  `Day` varchar(45) DEFAULT NULL,
  `Time` varchar(45) DEFAULT NULL,
  PRIMARY KEY (`BatchID`,`Course_CourseID`),
  UNIQUE KEY `BatchID_UNIQUE` (`BatchID`),
  KEY `fk_Batch_Course1` (`Course_CourseID`),
  CONSTRAINT `fk_Batch_Course1` FOREIGN KEY (`Course_CourseID`)
  REFERENCES `course` (`CourseID`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T18:14:00.447

好吧，错误消息很明显是指这个字符串：

```
UNIQUE KEY `BatchID_UNIQUE` (`BatchID`) 
```

所以你要做的是要么删除这个索引（用......

```
ALTER TABLE `batch` DROP INDEX `BatchID_UNIQUE` 
```

... 命令，或者只是从表的定义中排除这一行（在 中`CREATE TABLE`）。

所有这一切都假设您真的不需要您的批次 ID 是唯一的（换句话说，您的`INSERT`语句中没有逻辑错误。但这似乎是这种情况：pair`BatchID-Course_CourseID`已被定义为唯一（通过 PRIMARY KEY） .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T21:10:03.163

试试这个方法。删除您的批处理表，然后运行此 sql。正确的回答是，一个唯一键不能有两个相同的值。所以我也删除了唯一的关键线。

```
CREATE TABLE IF NOT EXISTS `batch` (
  `BatchID` int(11) NOT NULL,
  `Course_CourseID` int(11) NOT NULL,
  `NoOfStudents` int(11) DEFAULT NULL,
  `ClassRoom` varchar(45) DEFAULT NULL,
  `StartDate` varchar(45) DEFAULT NULL,
  `Day` varchar(45) DEFAULT NULL,
  `Time` varchar(45) DEFAULT NULL,
  PRIMARY KEY (`BatchID`,`Course_CourseID`),
  KEY `Course_CourseID` (`Course_CourseID`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

ALTER TABLE `batch` ADD CONSTRAINT `batch_ibfk_2` FOREIGN KEY (`Course_CourseID`)
REFERENCES `course` (`CourseId`) ON DELETE NO ACTION ON UPDATE NO ACTION; 
```

# c# - 单元测试 asp.net mvc 控制器动作 tryupdate

> ID：12341568
> 
> 赞同：0
> 
> 时间：2012-09-09T18:06:11.157
> 
> 标签：c#, asp.net-mvc-3, unit-testing, tdd, code-coverage

我想测试控制器动作，但视觉工作室代码覆盖工具没有覆盖一点。

```
 public ActionResult Activate(int? id)
    {
        if (id == null)
            return View("PageNotFound");

        var city = repository.GetCityById(id.Value);

        if (city == null)
            return View("PageNotFound");

        city.IsActive = !city.IsActive;

        if (TryUpdateModel(city))
        {
            repository.Save();
            return RedirectToAction("MyCities");
        }

        ***return View("PageNotFound");***
    } 
```

在代码覆盖率中，***** *return View("PageNotFound");********不包括在内。因为，我无法模拟 TryUpdateModel 错误的情况。如果模型无法更新，TryUpdateModel 可能会为假。你能帮忙吗？**

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T18:15:47.357

`TryUpdateModel`如果模型验证失败，将返回 false。
（在这种情况下，您不应显示未找到的页面）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T17:55:08.247

好的，我解决了解决方案。我删除了 TryUpdatemodel if 条件。直接使用repository.Save() 方法。因为我没有发送参数模型来激活方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T18:58:41.727

在这样的情况下，您有各种选择。其中之一是创建一个覆盖您要控制的方法的实际功能的存根。

例如，您可以声明`TryUpdateModel`为虚拟的。在您的单元测试中，您继承它并覆盖 TryGetModel 以简单地返回 false，而不是使用原始类。所有其他功能保持原样。

现在，您`Activate`在派生类上调用具有与模拟方法完全相同的功能的`TryUpdateModel`方法，允许您测试所需的用例，而不会因为如何模拟某个执行路径而费尽心思。

这种技术并非没有缺点：它使您仅出于测试目的将该方法声明为虚拟方法，从而防止您将其设为密封或静态。还有其他更高级的技术（[模拟对象](http://www.ibm.com/developerworks/library/j-mocktest/index.html)、[隔离框架](http://www.typemock.com/isolator-product-page)），但我认为这对于这种情况来说是一个足够好的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T07:56:49.363

您没有包含代码来显示如何处理**货物**依赖项的生命周期，所以我只是在猜测，但是......

作为测试设置的一部分，应该可以将此类的模拟或假实例传递给控制器​​（如果当前不可行，请重构直到可行）。

有了模拟，您可以根据需要隔离和测试行为。

旁白：我不同意@dreza 的评论……测试这种业务逻辑非常重要。

我还警告不要按照@Vitaliy 的建议伪造 TryUpdateModel 的实现，毕竟你想测试如果货物模型无效会发生什么（不仅仅是通过提供新版本的核心代码来*假装它是）。***

# python - 将 getattr 与 Dictionary 一起使用

> ID：12341574
> 
> 赞同：-9
> 
> 时间：2012-09-09T18:06:58.517
> 
> 标签：python, dictionary

```
class idDict(dict):
    def __getattr__(self,key):
        return 'dsaads'
d=idDict()
print d['ss'] 
```

我只是得到一个错误：`KeyError: 'ss'`。根据一些在线论坛，这应该有效。我想打印出“dsaads”

这也不起作用；我犯了同样的错误：

```
from collections import defaultdict
class idDict(defaultdict):
    def __getattr__(self,key):
        return 'dsaads'
d=idDict()
print d['ss'] 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-09T18:08:48.530

`__getattr__()`用于属性，而不是索引。但是`dict`已经支持索引，并且您对该键没有任何价值。也许你正在寻找[`collections.defaultdict`](http://docs.python.org/dev/library/collections.html#collections.defaultdict)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T18:11:11.617

使用[`__getitem__`](http://docs.python.org/reference/datamodel.html#object.__getitem__)：

```
>>> class idDict(dict):
    def __getitem__(self,key):
        return 'dsaads'

>>> d=idDict()
>>> d['a']
'dsaads'

>>> help(dict.__getitem__)

Help on method_descriptor:

__getitem__(...)
    x.__getitem__(y) <==> x[y] 
```

# scala - 根据 ScalaQuery/SLICK 中列的 MAX 值选择行

> ID：12341579
> 
> 赞同：12
> 
> 时间：2012-09-09T18:07:37.427
> 
> 标签：scala, subquery, max, scalaquery, slick

假设我有如下表：

```
UserActions
    UserId INT
    ActionDate TIMESTAMP
    Description TEXT 
```

保存用户执行某些操作的日期。如果我想获得每个用户执行的最后一个操作，我将不得不在 SQL 中执行以下操作：

```
SELECT *
FROM   UserActions,
       (
           SELECT ua.UserId,
                  max(ua.ActionDate) AS lastActionDate
           FROM   UserActions ua
           GROUP BY ua.UserId
       ) AS lastActionDateWithUserId
WHERE  UserActions.UserId = lastActionDateWithUserId.UserId 
  AND  UserActions.ActionDate = lastActionDateWithUserId.lastActionDate 
```

现在，假设我已经在 scalaquery 0.9.5 中为 UserActions 设置了一个表结构，例如：

```
case class UserAction(userId:Int,actionDate:Timestamp,description:String)

object UserActions extends BasicTable[UserAction]("UserActions"){

    def userId = column[Int]("UserId")

    def actionDate = column[Timestamp]("ActionDate")

    def description  = column[String]("Description")

    def * = userId ~ actionDate ~ description <> (UserAction, UserAction.unapply _)
} 
```

我的问题是：在 ScalaQuery/SLICK 我如何执行这样的查询？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-23T15:44:20.110

我在 Scala 2.10 中使用过 Slick 1.0.0。

我这样定义对象：

```
case class UserAction(userId: Int, actionDate: Timestamp, description: String)

object UserActions extends Table[UserAction]("UserActions") {

  def userId = column[Int]("UserId")
  def actionDate = column[Timestamp]("ActionDate")
  def description = column[String]("Description")
  def * = userId ~ actionDate ~ description <> (UserAction, UserAction.unapply _)
} 
```

在会话块内

```
Database.forURL("jdbc:h2:mem:test1", driver = "org.h2.Driver") withSession {
  //...
} 
```

我插入了一些示例数据

```
UserActions.insert(UserAction(10, timeStamp, "Action 1"))
UserActions.insert(UserAction(10, timeStamp, "Action 2"))
UserActions.insert(UserAction(10, timeStamp, "Action 3"))
UserActions.insert(UserAction(20, timeStamp, "Action 1"))
UserActions.insert(UserAction(20, timeStamp, "Action 2"))
UserActions.insert(UserAction(30, timeStamp, "Action 1"))

Query(UserActions).list foreach println 
```

首先要做的是创建最大查询

```
// group by userId and select the userId and the max of the actionDate
val maxQuery =
  UserActions
    .groupBy { _.userId }
    .map {
      case (userId, ua) =>
        userId -> ua.map(_.actionDate).max
    } 
```

结果查询如下所示

```
val result =
  for {
    ua <- UserActions
    m <- maxQuery
    if (ua.userId === m._1 && ua.actionDate === m._2)
  } yield ua

result.list foreach println 
```

# sql - ms访问SQL更新

> ID：12341580
> 
> 赞同：2
> 
> 时间：2012-09-09T18:07:54.740
> 
> 标签：sql, ms-access

大家好，我对 SQL 很陌生，我有以下问题。我有一张表，其中有两列名为`student_Type`和`Fees`。我需要`Fees`使用值 5000 和 10000 更新列，其中 student_Type 为 = HomeStudent，Student_Type 为 = Overseas。我尝试了以下

```
UPDATE Student_Types
SET Fees= 5000,Fees=10000
WHERE Student_Type = 'HomeStudent' and 'Oversea'; 
```

我收到重复错误，因为我已经设置了两次相同的列。我怎样才能解决这个问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T18:11:05.120

单程

```
UPDATE Student_Types
SET Fees= IIF(Student_Type = 'HomeStudent', 5000, 10000)
WHERE Student_Type IN ('HomeStudent','Oversea'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T21:38:06.817

我想在 ONE 查询中没有真正需要这样做，那么为什么还要麻烦`IIF`呢？

```
UPDATE Student_Types
SET Fees = 5000
WHERE Student_Type = 'HomeStudent';

UPDATE Student_Types
SET Fees = 10000
WHERE Student_Type = 'Oversea'; 
```

# processor - 同时多线程处理器

> ID：12341581
> 
> 赞同：0
> 
> 时间：2012-09-09T18:07:56.643
> 
> 标签：processor, cpu-architecture, computer-architecture

我有一些疑问，如果有人能帮助我理解，我将不胜感激。

假设我有一个 8 核的处理器；为每个内核提供 4 路同时多线程 (SMT)。现在，我了解到，在 SMT 的情况下，每个内核都可以从不同的线程或单个线程发出多条指令。因此，在这种情况下，每个内核应该能够在每个周期中最多发出 4 条（因为它是 4 路 SMT）指令。因此，由于芯片中总共有 8 个内核，因此在理想情况下，如果所有发布槽（即每个内核的 4 个）都没有停顿，则它应该能够在每个周期发布 8*4 = 32 条指令。

我的推理或理解有什么问题吗？我不是专家！因此，想讨论它并了解更多信息。：） 提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T21:45:54.777

一个*n 路 SMT*处理器可以执行来自多达 n 个线程的指令。这并不意味着对每个周期可以发出的指令总数有任何限制。如果要指定此限制，请谈论*n-way superscalar*或*n-way issue*。

例如，Intel 的 Core i7 是一个 4 路超标量和 2 路 SMT 处理器。

# android - 想将我的应用程序链接从我的 android 应用程序分享到 facebook 和 twitter

> ID：12341587
> 
> 赞同：2
> 
> 时间：2012-09-09T18:08:49.690
> 
> 标签：android, facebook, twitter, facebook-android-sdk

我想通过简单的按钮单击将我的 android 应用程序链接分享到 facebook 和 twitter。基本上我想分享一些自定义文本和我的市场应用程序链接。

那么我必须做些什么来实现这一目标？

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T18:21:33.280

```
String message = "Text I want to share."
Intent share = new Intent(Intent.ACTION_SEND);
share.setType("text/plain");
share.putExtra(Intent.EXTRA_TEXT, message);

startActivity(Intent.createChooser(share, "Title of the dialog the system will open")); 
```

如 Android 上的答案所述[- 在 Facebook、Twitter、Mail、ecc 上共享](https://stackoverflow.com/questions/6814268/android-share-on-facebook-twitter-mail-ecc)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-16T05:47:18.680

```
btnShare = (Button)findViewById(R.id.btnShare);
    btnShare.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {
            Intent intent = new Intent(Intent.ACTION_SEND);
            intent.setType("text/plan");
            String sharBody = "Body";
            String shareSub = "Subject";
            intent.putExtra(Intent.EXTRA_SUBJECT,shareSub);
            intent.putExtra(Intent.EXTRA_TEXT,shareSub);
            startActivity(intent.createChooser(intent,"Share Using"));           }
    });
} 
```

在主题中添加您的自定义内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-24T10:10:50.817

**解决方案**

1.如果您想将您的应用程序链接从您的 android 应用程序分享到 facebook、twitter 和任何其他社交媒体。

2.  所以你想关注这些图书馆

```
 implementation 'com.github.premsingh8171:updateappOnplayStore:1.0.0' 
```

```
repositories {

          maven { url 'https://jitpack.io' 
} 
```

3.  应用评级、分享应用任何其他社交媒体和更新应用版本有三种方法。

更多详情请点击链接：**[https ://github.com/premsingh8171/updateappOnplayStore](https://github.com/premsingh8171/updateappOnplayStore)**

# python - Python 2.7，确定用户输入路径的权限/内容的操作系统可移植方式

> ID：12341588
> 
> 赞同：2
> 
> 时间：2012-09-09T18:09:16.160
> 
> 标签：python, file-io, io, file-permissions, file-handling

免责声明：我已经在一般（谷歌）和这里搜索了关于这个主题的一些信息，但大多数答案要么很老，要么对我来说似乎不太有意义，所以如果这看起来很简单，我提前道歉或不知情。

问题：我的应用程序接受可能是路径或文件的命令行输入，我需要确定几件事。

1.  是路径还是文件，
2.  是相对的还是绝对的
3.  是否可读和/或可写（需要读写测试结果）（忽略比赛情况的可能性）

一个警告，而一个

```
 try:
        file=open(filename,'w')
    except OSError as e:
        {miscellaneous error handling code here} 
```

显然会告诉我参数（上例中的文件名）是否存在/是否可写等。我对异常代码了解不够，不知道如何解释异常的结果。它也不会提供相对/绝对信息。

假设没有一种方法可以做到这一点，那么我需要知道三件事：

1.  如何确定相对/绝对
2.  是指向文件还是目录
3.  程序的EUID可以读取位置，写入也一样。

我正在寻求从我在这里收集的信息中学习，而且我是 python 新手，并且已经完成了一个重要的项目。除了这一部分，我都掌握了。任何帮助，将不胜感激。（欢迎指向好的帮助站点！）（除了 docs.python.org 那些已经加入书签的网站 ;-)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T18:25:42.447

这是你的答案。[文档](http://docs.python.org/library/os.html)指定以下内容适用于 windows 和 linux 。

1.  如何确定相对/绝对 [os.path.isabs](http://docs.python.org/library/os.path.html#os.path.isabs)如果路径是绝对的，则返回 True，否则返回 False。

2.  它是指向文件还是目录？类似地使用[os.path.isdir](http://docs.python.org/library/os.path.html#os.path.isdir)来判断路径是否是目录。您可以使用[os.path.isfile(path)](http://docs.python.org/library/os.path.html#os.path.isfile)来确定路径是否为文件。

3.  程序的EUID可以读取位置，写入也一样。您可以使用[os.access(path, mode)](http://docs.python.org/library/os.html#os.access)来了解需要 mode 指定权限的操作是否可以对 path 指定的文件进行。PS 这不适用于通过网络访问的文件。您可以使用[os.stat](http://docs.python.org/library/os.html#os.stat)这是获取所有信息的正确方法。然而，这是一个更昂贵的电话，因此，您应该尝试在一个电话中获取所有信息。要解释结果，您可以使用[stat](http://docs.python.org/library/stat.html)模块

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T18:26:55.973

似乎[os.path](http://docs.python.org/library/os.path.html#module-os.path)会使用 isabs()、isfile()、isdir() 等来满足大部分这些需求。我想不出一个能给出简单 True/False 的函数对于给定文件的读/写访问，但解决此问题的一种方法可能是使用[os](http://docs.python.org/library/os.html#files-and-directories)模块的 stat 函数并查看文件的权限和所有者。

# android - 在 ViewPager 中从 Activity 更新片段

> ID：12341591
> 
> 赞同：3
> 
> 时间：2012-09-09T18:10:14.940
> 
> 标签：android, android-viewpager

我是 Android 开发的新手，非常感谢这里的一些帮助。

我正在使用一个包含 TextView 的片段，并且我正在使用同一 MyFragment 类的 5 个实例。

在活动中，我有一个按钮和一个 ViewPager，我需要该按钮来更新所有片段实例的内容，只要它被点击。

这是活动

```
public class MainActivity extends FragmentActivity {

final static String[] CONTENT = {"a", "b"};
ViewPager pager;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    List<MyFragment> fragments = new Vector<MyFragment>();
    for(int i = 0; i < 5; i++){
        MyFragment fragment = new MyFragment(CONTENT);
        fragments.add(fragment);
    }
    PagerAdapter adapter = new PagerAdapter(this.getSupportFragmentManager(), fragments);
    pager = (ViewPager) findViewById(R.id.viewpager);
    pager.setAdapter(adapter);

    Button button = (Button) findViewById(R.id.button);
    button.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            //method that isn't working
            PagerAdapter adapter = (PagerAdapter)pager.getAdapter();
            for(int i = 0; i < 5; i++){
                MyFragment fragment = (MyFragment) adapter.getItem(i);
                fragment.textView.setText(fragment.content[1]);
            }
        }
    });
}
} 
```

片段

```
public class MyFragment extends Fragment{

String[] content;
    TextView textView;

public MyFragment(String[] content) {
    this.content = content;
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.fragment_content, container, false);
    textView = (TextView) view.findViewById(R.id.textView1);
    textView.setText(content[0]);
    return view;
}

} 
```

和 FragmentPagerAdapter

```
public class PagerAdapter extends FragmentPagerAdapter{

List<MyFragment> fragments;

public PagerAdapter(FragmentManager fm, List<MyFragment> fragments) {
    super(fm);
    this.fragments = fragments;
}

@Override
public Fragment getItem(int arg0) {
    return fragments.get(arg0);
}

@Override
public int getCount() {
    return fragments.size();
}

} 
```

每当我尝试从适配器访问小于 adapter.getCurrentItem() - 1 或大于 adapter.getCurrentItem() + 1 的片段时，OnClick 方法都会给我一个 NullPointerException。

关于如何同时更新所有片段的任何想法？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T14:33:15.533

更新这些片段的最简单方法是使用您的代码并将`ViewPager`内存中保存的片段数设置为总片段数 - 1（因此无论您在哪个页面，所有片段都有效）。在你的情况下：

```
pager.setOffscreenPageLimit(4); // you have 5 elements 
```

您仍然可以将我评论中的方法与该方法一起使用`onPageScrollStateChanged`（因此更新将在用户开始滑动的那一刻开始）来查看用户何时开始滑动寻呼机并将片段更新到当前可见片段的左侧和右侧，但这会有点难以正确，所以我建议使用第一个选项。

关于包含片段的代码的一些要点：

如果您嵌套片段类，请将其设为静态，这样您就不会将其绑定到活动对象。`Fragment`除了默认构造函数之外，不要为 a 创建构造函数。如果框架需要重新创建片段，它将调用默认构造函数，如果它不可用，则会抛出异常。例如，尝试更改手机/模拟器的方向并查看会发生什么（这是 Android 将重新创建片段的情况之一）。最后，为`ViewPager`的适配器使用自定义名称，您使用`PagerAdapter`的是超类的名称，`FragmentViewPager`这对于阅读您的代码的人来说非常混乱。

如果您需要将数据传递给`Fragment`您可以使用如下创建方法：

```
public static MyFragment newInstance(String text) {
        MyFragment f = new MyFragment();
        Bundle b = new Bundle();
        b.putString("content", text);
        f.setArguments(b);
        return f;
    } 
```

文本将`MyFragment`通过使用`getArguments().getString("content");`

# composer-php - 用composer处理非php依赖的最佳方法是什么

> ID：12341593
> 
> 赞同：3
> 
> 时间：2012-09-09T18:10:16.650
> 
> 标签：composer-php

我有一个使用 composer 的 Symfony2 项目，我想在其中使用这个 css 框架：[https ://github.com/jlong​​/sass-twitter-bootstrap](https://github.com/jlong/sass-twitter-bootstrap)

当然packagist上没有这样的项目，因为这不是php项目。我应该如何处理对我的项目的这种依赖？与作曲家？如果是，如何？这个项目中的[package.json](https://github.com/jlong/sass-twitter-bootstrap/blob/master/package.json)文件与作曲家有什么关系吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T07:59:40.220

目前，最好的方法是不使用composer，而是将它放在公共目录中，就像没有composer一样。

在作曲家中支持资产类型库有一个相当古老的功能票：[https](https://github.com/composer/composer/issues/524) ://github.com/composer/composer/issues/524 。

您可以按照功能票证中其他人的建议进行操作，并将其从 zip 分发版中放置在您的供应商目录中 - 但它会使您的项目结构相当混乱。

项目中的 package.json 是一个 npm 包信息文件（Node.js 包管理器）。

# audio - libsox 将多声道 wav 拆分为单声道

> ID：12341598
> 
> 赞同：0
> 
> 时间：2012-09-09T18:10:43.603
> 
> 标签：audio, split, sox

我想将多通道（2,8 或 16）wav 文件拆分为其通道，并将每个通道保存在另一个 wav 文件中。

到目前为止，我已经完成了在我的 c++ 目标 c++ 项目中启动并运行 libsox。

Libsox 没有很好的文档记录，并且有很多关于如何做到这一点的示例:(

我首先打开 Inputfile

```
sox_format_t * in, * out;
assert(sox_init() == SOX_SUCCESS);
assert(in = sox_open_read((const char*)filename.c_str(),NULL,NULL,NULL)); 
```

现在我必须找到一种方法来获取该文件的通道数。然后我必须创建相同数量的输出文件并将每个通道本身保存在其中。

怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:15:40.743

我想我会用老式的方式来做。

*   确定文件的通道数。
*   确定数据块的长度。

    ```
    Length of Data block / channelCount = Size of each channelBlock 
    ```

*   通道保存在 WavFile-Datablock 中（对于 4Channel WavFile）CH1/Ch2/Ch3/Ch4 CH1/Ch2/Ch3/Ch4。

*   我遍历数据块提取通道并将它们放入单声道文件中

# c# - 在 Visual Studio 项目中自动包含生成的文件

> ID：12341601
> 
> 赞同：3
> 
> 时间：2012-09-09T18:11:28.720
> 
> 标签：c#, visual-studio, scaffolding

我正在编写一个可以在 Visual Studio 中创建 SQL 文件的应用程序。用户将通过包管理器控制台输入命令，该控制台将生成 sql 脚本并将它们存放在 Visual Studio 项目中的特定目录中。

我遇到的问题是，当文件生成时，它们存在于文件系统中，但不在 Visual Studio 中。这当然是意料之中的，因为我需要去积极地将文件包含在解决方案资源管理器中，但这不是我想要的。我希望文件在生成后立即“神奇地”出现在解决方案资源管理器中。

我已经看到了类似问题的各种解决方案，主要是对 .csproj 文件的修改，例如

```
<Compile Include="Sql\**\*.sql" /> 
```

但这不是我要找的。我所追求的类似于实体框架或 MvcScaffolding 的工作方式，当命令在 PMC 中运行时，文件/文件夹会神奇地放入项目中。我知道这在 T4 模板上运行，但对于像这样的简单问题来说，这似乎太复杂了。

我应该证明在文件的创建过程中没有巫术，只是简单的旧 File.Create() 东西。

我愿意接受任何建议。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T20:48:24.190

查看[此](https://stackoverflow.com/a/9438419/1754037)答案以获取对我有用的解决方案。我有相同的用例，其中代码输出平面文件，我需要在项目中包含这个输出。

在 .csproj 文件的末尾添加以下内容：

```
<Target Name="BeforeBuild">
    <ItemGroup>
        <Content Include="Sql\**\*.sql" />
    </ItemGroup>
</Target> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T19:12:13.703

恕我直言，T4 是要走的路。您不想为您正在尝试做的事情而为[旧技术而烦恼。](http://www.codeproject.com/Articles/31257/Custom-Tools-Explained)

话虽如此，我想知道为什么需要将文件添加到解决方案资源管理器中？是出于源代码控制的目的吗？（通常你不想源代码控制自动生成的文件，你想源代码控制原始模型）。请注意，您始终可以单击“全部显示”按钮，文件将出现在解决方案资源管理器中，而不是实际成为解决方案的一部分。

# iphone - 如何通过按下按钮从文本字段 1 切换到文本字段 2

> ID：12341604
> 
> 赞同：1
> 
> 时间：2012-09-09T18:11:45.560
> 
> 标签：iphone, objective-c, ios4

我正在尝试为 iphone 制作一个计算器应用程序，所以现在我完成了所有操作，如果用户在文本字段中输入他的第一个数字，然后如果他点击“+”按钮，我想要测试字段切换或选项卡到另一个文本字段

那我该怎么做呢？这是标题

```
 #import <UIKit/UIKit.h>
@interface ViewController : UIViewController
{
    int a,b,c;
    char op;
    UILabel*operation,*result;
    UITextField *num1,*num2;  
}
@property (nonatomic)int a , b ,c;
@property (nonatomic)char po;
@property (nonatomic ,retain)IBOutlet UILabel*operation,*result;
@property (nonatomic ,retain)IBOutlet UITextField *num1,*num2;;

-(IBAction)sum:(id)sender;
-(IBAction)Calculate:(id)sender;
-(IBAction)Clear:(id)sender;
-(IBAction)hideKeyboard:(id)sender;
@end 
```

.m 文件

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController
@synthesize operation,result,num1,num2,a,b,c,po;
-(IBAction)sum:(id)sender{
    operation.text=@"+";

}
-(IBAction)hideKeyboard:(id)sender{
    [num1 resignFirstResponder];   
    [num2 resignFirstResponder];
}
-(IBAction)Calculate:(id)sender{

    //sum
    a =num1.text.integerValue;
    b= num2.text.integerValue;
    c=num1.text.integerValue+num2.text.integerValue;
    printf("%i >> %i",b,num2.text.integerValue);
    [num1 resignFirstResponder];
    [num2 resignFirstResponder];
    result.text =[NSString stringWithFormat:@"%i + %i = %i",a,b,c];

}
-(IBAction)Clear:(id)sender{
    [num1 resignFirstResponder];
    [num2 resignFirstResponder];
    num1.text=@"";
    num2.text=@"";
    operation.text=@"";
    a=0;
    b=0;
    c=0;
    result.text=@"";
    op=' ';

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T18:21:15.603

如果我正确理解了您的代码，则在用户输入第一个代码后`-sum:sender`会被调用。您可以只调用`becomeFirstResponder`第二个 UITextField。

```
-(IBAction)sum:(id)sender{
    operation.text=@"+";
    [num2 becomeFirstResponder];
} 
```

# python - 安装 mod_wsgi 时出错

> ID：12341610
> 
> 赞同：0
> 
> 时间：2012-09-09T18:12:58.290
> 
> 标签：python, python-2.7, mod-wsgi

安装 mod_wsgi 时，我在执行 ./config 后卡住了

显然我错过了 apxs2

结果如下：

检查 apxs2... 不
检查 apxs... /usr/sbin/apxs
检查 Apache 版本... 2.2.22
检查 python... /usr/bin/python
配置：创建 ./config.status
配置。状态：正在创建 Makefile

我现在不确定的是如何让 apxs2 工作和安装。任何解决方案任何人？这样我就可以稍后安装 Django 并最终在我的 VPS 上启动并运行 Python/Django 环境。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T18:14:26.593

> 检查 apxs ... /usr/sbin/apxs
> ...
> config.status: 创建 Makefile

它成功了。继续下一步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T04:47:13.163

您安装了 Apache 2.2 核心包，但可能安装了 Apache 1.3 的开发包而不是 2.2 的。但这并不确定，对于某些 Apache 发行版，例如从源代码编译时，“apxs”仍称为“apxs”。只有某些 Linux 发行版将 Apache 2.2 发行版中的“apxs”名称更改为“apxs2”。这就是 mod_wsgi 配置脚本检查“apxs2”和“apxs”的原因。

所以，在假设你有错误的 apxs 之前，先做实际的制作，看看是否失败。

# visual-c++ - 在 DLLMain 中调用 CUDA 函数

> ID：12341611
> 
> 赞同：2
> 
> 时间：2012-09-09T18:12:59.310
> 
> 标签：visual-c++, dll, cuda

我在具有许多 CUDA 加速功能的 Windows 中开发了一个 C++ DLL。目前我还没有创建 DllMain 函数，因为它不是强制性的。

我知道在 DllMain 中可以调用的函数有很多限制。

我只是想知道在 DllMain 中调用 CUDA Runtime 函数只是为了初始化默认上下文是否安全，以便后续的 CUDA 调用更快？

我正在使用 Visual Studio 2008、CUDA 5.0 和 Windows 8 进行开发。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T03:14:55.197

[阅读 DLLMain 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682583%28v=vs.85%29.aspx)，我建议不要这样做。从文档：

> 警告 您可以在 DLL 入口点执行的操作受到严格限制。要提供更复杂的初始化，请为 DLL 创建一个初始化例程。您可以要求应用程序在调用 DLL 中的任何其他例程之前调用初始化例程。

进一步来说：

> 调用需要除 Kernel32.dll 之外的 DLL 的函数可能会导致难以诊断的问题。

由于 CUDA Runtime API 需要 cudart.dll，这适用于您的问题。

所以我会为你的库创建一个初始化函数来进行 CUDA 初始化，并要求在应用程序启动时显式调用它。

# http - 当托管在 heroku 上时，对 api.myapp.com 的请求会比对 api-myapp.herokuapp.com 的请求慢吗？

> ID：12341612
> 
> 赞同：0
> 
> 时间：2012-09-09T18:13:01.097
> 
> 标签：http, networking, heroku, soa

我试图了解在 heroku 上处理 SOA 的最佳方式，我已经意识到向自定义域发出请求会以某种方式变慢，或者所有请求都会通过互联网“出去”？

在以前本质上是 SOA 的项目中，我们有专门的托管，因此可以发出请求`http://blogs/`（显然是在内部网络上）我想知道 heroku 是否将`*.herokuapp.com`请求视为“内部”......或者它是否足够聪明知道`myapp.com`是实际上`myapp.herokuapp.com`并在本地路由，或者我是否完全忽略了这一点，实际上所有请求都是“外部”的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T18:22:24.250

您要问的是有关互联网请求如何工作的一般知识。

每当您从您的应用程序请求让我们说`example.com`，域名将首先使用所谓的 DNS 服务器转换为 IP 地址。

所以它是这样工作的：无论您请求 myapp.com 还是 myapp.heroku.com，您总是会从特定 IP 地址请求信息，并且您请求的域名将作为请求标头的一部分传递。收到此请求的服务器会尝试在其内部记录中查找此域名并相应地处理请求。

所以结论是*不管你放 myapp.com 还是 myapp.heroku.com，请求的速度总是一样的*。

PS：由于heroku会在你运行的myapp.com的不同实例之间对你的请求进行负载平衡，这里的速度将取决于几个因素：你的应用程序响应速度有多快，你有多少个实例正在运行，每个实例的平均负载，多少是负载均衡器正在加载。但肯定不会取决于您使用的域名。

# sqlite - SQLite CGI 编程 (SQLITE_CANTOPEN)

> ID：12341613
> 
> 赞同：0
> 
> 时间：2012-09-09T18:13:12.360
> 
> 标签：sqlite, cgi

当我尝试使用 sqlite3_exec 将新数据插入数据库时​​，它返回错误 14 (SQLITE_CANTOPEN)。但是当我使用 sqlite3_prepare_v2 进行选择时，它工作正常。权限有问题吗？如何解决？

```
sprintf(temp, "INSERT INTO owned (pid, oname, okey, ohp, oatt, odef) VALUES (%d, %c%s%c, %c%s%c, %d, %d, %d);", pid, 34, poname, 34, 34, passkey, 34, sqlite3_column_int(res3,0), sqlite3_column_int(res3,1), sqlite3_column_int(res3,2));

error = sqlite3_exec(conn, temp, 0, 0, 0); 
```

# java - 如何在 AsyncTask 中捕获内存不足异常

> ID：12341614
> 
> 赞同：2
> 
> 时间：2012-09-09T18:13:28.153
> 
> 标签：java, android, http

我的 android 应用程序连接使用 Web 服务执行外部数据库。在一种情况下，我有**大量**数据，并且**出现内存不足异常**：

```
09-09 20:05:59.441: ERROR/dalvikvm(4688): Out of memory: Heap Size=15751KB, Allocated=14962KB, Bitmap Size=687KB
09-09 20:05:59.451: WARN/dalvikvm(4688): threadid=23: thread exiting with uncaught exception (group=0x4001e390)
09-09 20:05:59.462: ERROR/AndroidRuntime(4688): Uncaught handler: thread AsyncTask #5 exiting due to uncaught exception
09-09 20:05:59.731: ERROR/AndroidRuntime(4688): java.lang.RuntimeException: An error occured while executing doInBackground()
09-09 20:05:59.731: ERROR/AndroidRuntime(4688):     at android.os.AsyncTask$3.done(AsyncTask.java:200)
09-09 20:05:59.731: ERROR/AndroidRuntime(4688):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
09-09 20:05:59.731: ERROR/AndroidRuntime(4688):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
09-09 20:05:59.731: ERROR/AndroidRuntime(4688):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
09-09 20:05:59.731: ERROR/AndroidRuntime(4688):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
09-09 20:05:59.731: ERROR/AndroidRuntime(4688):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
09-09 20:05:59.731: ERROR/AndroidRuntime(4688):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
09-09 20:05:59.731: ERROR/AndroidRuntime(4688):     at java.lang.Thread.run(Thread.java:1102)
09-09 20:05:59.731: ERROR/AndroidRuntime(4688): Caused by: java.lang.OutOfMemoryError
09-09 20:05:59.731: ERROR/AndroidRuntime(4688):     at java.lang.AbstractStringBuilder.enlargeBuffer(AbstractStringBuilder.java:97)
09-09 20:05:59.731: ERROR/AndroidRuntime(4688):     at java.lang.AbstractStringBuilder.append0(AbstractStringBuilder.java:142)
09-09 20:05:59.731: ERROR/AndroidRuntime(4688):     at java.lang.StringBuilder.append(StringBuilder.java:124)
09-09 20:05:59.731: ERROR/AndroidRuntime(4688):     at org.json.JSONTokener.nextString(JSONTokener.java:252)
09-09 20:05:59.731: ERROR/AndroidRuntime(4688):     at org.json.JSONTokener.nextValue(JSONTokener.java:316)
09-09 20:05:59.731: ERROR/AndroidRuntime(4688):     at org.json.JSONObject.<init>(JSONObject.java:204)
09-09 20:05:59.731: ERROR/AndroidRuntime(4688):     at org.json.JSONTokener.nextValue(JSONTokener.java:319)
09-09 20:05:59.731: ERROR/AndroidRuntime(4688):     at org.json.JSONObject.<init>(JSONObject.java:204)
09-09 20:05:59.731: ERROR/AndroidRuntime(4688):     at org.json.JSONTokener.nextValue(JSONTokener.java:319)
09-09 20:05:59.731: ERROR/AndroidRuntime(4688):     at org.json.JSONArray.<init>(JSONArray.java:116)
09-09 20:05:59.731: ERROR/AndroidRuntime(4688):     at org.json.JSONArray.<init>(JSONArray.java:150)
09-09 20:05:59.731: ERROR/AndroidRuntime(4688):     at se.softwerk.timelog.activity.ViewActivity.setTasks(ViewActivity.java:219)
09-09 20:05:59.731: ERROR/AndroidRuntime(4688):     at se.softwerk.timelog.activity.ViewActivity.fetchTasks(ViewActivity.java:133)
09-09 20:05:59.731: ERROR/AndroidRuntime(4688):     at se.softwerk.timelog.activity.ViewActivity.access$9(ViewActivity.java:110)
09-09 20:05:59.731: ERROR/AndroidRuntime(4688):     at se.softwerk.timelog.activity.ViewActivity$LoadingDataFromServer.doInBackground(ViewActivity.java:420)
09-09 20:05:59.731: ERROR/AndroidRuntime(4688):     at se.softwerk.timelog.activity.ViewActivity$LoadingDataFromServer.doInBackground(ViewActivity.java:1)
09-09 20:05:59.731: ERROR/AndroidRuntime(4688):     at android.os.AsyncTask$2.call(AsyncTask.java:185)
09-09 20:05:59.731: ERROR/AndroidRuntime(4688):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
09-09 20:05:59.731: ERROR/AndroidRuntime(4688):     ... 4 more 
```

这是我的课：

```
private class LoadingDataFromServer extends AsyncTask<Void, Void, Void> {

        @Override
        public void onPreExecute() {
            progress = ProgressDialog.show(ViewActivity.this, null,"Loading ...", true);
        }

        @Override
        protected void onPostExecute(Void result) {
            try {
                ListView lv = (ListView) main_activity.findViewById(R.id.listTask);
                lv.setAdapter(new TaskAdapter(main_activity));
                progress.dismiss();
            } catch (Exception e) {
                System.out.println(e.getMessage());
            }
        }

        @Override
        protected Void doInBackground(Void... params) {
            try {
                fetchTasks();
            } catch (Exception e) {      //DOES NOT WORK
                progress.dismiss();
                Toast.makeText(ViewActivity.this, "Enormous number of data, select smaller criteria", Toast.LENGTH_SHORT).show();
                finish();
            }
            return null;
        }
    } 
```

我怎样才能捕捉到这个异常`doInBackground`？我目前的尝试不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-09T18:19:28.740

[OutOfmemoryError](http://developer.android.com/reference/java/lang/OutOfMemoryError.html)不扩展异常，这就是为什么你没有抓住它。

这段代码应该可以工作。

```
try
{
    fetchTasks();       
}
catch(OutOfMemoryError e)
{
    // do something     
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-09T18:26:19.317

```
try {
    ...
} catch (Exception e) {  // "catch all subclasses of java.lang.Exception"
    ...
} 
```

但是，`OutOfMemoryError`继承自`java.lang.Error`和不继承`java.lang.Exception`，它们都继承自`java.lang.Throwable`. 您只能在 java`throw`中创建子类的实例，`java.lang.Throwable`因此您可以通过以下方式捕获**任何**错误或异常：

```
try {
    ...
} catch (Throwable t) {  // "catch all subclasses of java.lang.Throwable"
    ...
} 
```

# transactions - 如何从队列中手动读取 N 条消息，或者在 onmessage() 方法中是否已经过了 Y 时间？

> ID：12341620
> 
> 赞同：3
> 
> 时间：2012-09-09T18:14:02.867
> 
> 标签：transactions, jms, mq

我希望在消息驱动的 bean onmessage 方法中实现以下逻辑

读取 N 条消息或等待 Y 时间，以先发生者为准，然后提交事务。

如果我能得到一个实现这个逻辑的代码示例，我将不胜感激？

吨

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T21:11:25.007

您可能想要执行类似此代码的操作。但是，将侦听器保留给一个消费者，不要同时进行一次负载平衡，否则这将变得很棘手。如果您在 JEE6 上，您可能希望通过注释注入 jms 资源。如果没有，接收呼叫将阻塞等待 Y/N 时间

```
public void onMessage(Message msg) {

  // So we got a message, let's grab the JMS resources
  // Note that these could be injected as well, for convenience

  InitialContext context = new InitialContext();
  ConnectionFactory factory = (ConnectionFactory) context.lookup("java:comp/env/jms/connectionFactory");
  Destination destination = (Destination) context.lookup("java:comp/env/jms/myQueue");
  Connection connection = factory.createConnection();
  connection.start();
  MessageConsumer consumer = session.createConsumer(destination);
  Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
  // TODO: handle msg here

  // So, let's start look for msgs.
  for (int i=0; i<N; i++) {
      Message msg_i = consumer.receive(Y/N);
      // Handle msg_i here.
  }
  consumer.close();
  session.close();
  connection.close();
} 
```

# android - 我应该使用哪种布局

> ID：12341625
> 
> 赞同：0
> 
> 时间：2012-09-09T18:15:22.397
> 
> 标签：android, gridview

我对android开发非常陌生，所以请原谅似乎是一个愚蠢的问题，但我真的卡住了......我正在尝试制作一个具有大量可滚动行的活动。每行包含文本和图像，如图所示。有三列，第二列跨越两行，列的宽度也不同（中间的一列大于其他两列，它们相等）。每一行基本上都是一个按钮，将用户带到一个新的活动。我如何创建这种布局。我尝试使用嵌套线性视图，每一行都是水平方向的线性视图，包含两个垂直方向的线性视图，但这似乎有点复杂。那么gridview等呢？（不是说我什至了解gridviews是如何工作的）

真的很感激一个答案，也许任何答案的人都可以暂时排除按钮到新的活动，所以我现在了解布局问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T20:11:36.600

请检查这个

[http://developer.android.com/guide/topics/ui/declaring-layout.html](http://developer.android.com/guide/topics/ui/declaring-layout.html)

避免不必要的布局嵌套您可以使用相对布局而不是嵌套线性布局

你也可以看看这个

[http://www.curious-creature.org/2009/02/22/android-layout-tricks-1/](http://www.curious-creature.org/2009/02/22/android-layout-tricks-1/)

# jquery - 正则表达式解释 - 它是如何工作的？

> ID：12341627
> 
> 赞同：-6
> 
> 时间：2012-09-09T18:15:38.513
> 
> 标签：jquery, regex

我在“REGEX”上遇到过，但我不太了解它使用的那些符号。示例...等等

```
rege = /^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/; 
```

我使用上面的方法进行电子邮件验证并且它可以工作，但正如我所说，我并不完全理解它是如何工作的！你们中有人有简单的教程或网站来解释它吗？

因为我要为自己编写 Float 验证。

接受 0-9（仅限数字），带十进制字符 (.) 且长度 = 5。

示例：99.9

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-09T18:26:51.970

字符串的开头：

> ^

这部分字符串可能包含字符 AZ、az、0-9、下划线、连字符和句点。

> （[A-Za-z0-9_\ -\ .]）

使用前面的规则集匹配一个或多个字符：

> +

继续使用“@”：

> \@

继续一段时期：

> \ .

这部分字符串可能包含字符 AZ 和 az，并且长度必须是 2、3、4 个字符。

> ([A-Z-Z]{2,4})

字符串结尾：

> $

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T18:31:29.830

如您所知，正则表达式是在两个`/`字符之间定义的。

正则表达式中的第一件事是`^`指示字符串开头的字符，因此它不会在中途开始匹配。

然后在大括号内定义一个组`()`，这允许您构建一个子模式并返回部分匹配。表示在您的情况下正匹配的`[]`字符列表`A-Za-z0-9_\-\.`，因此基本上每个字母、数字、下划线、破折号和点字符。`+`告诉该组匹配 1 次或多次出现。

然后`@`符号与 匹配`\@`，`\`转义下一个字符，因此忽略默认功能并匹配字符本身。

然后还有和第一组一样的另一组，匹配一个`.`字符，匹配顶级域（仅匹配长度为2到4的字母字符）。

表示字符串的`$`结尾，因此不仅匹配开头。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T18:35:53.423

*   封闭的 /slashes/ 定义模式的开始和停止
*   "^" 表示字符串的开头
*   （括号）内的任何内容都将作为单独的组/部分进行匹配
*   [括号]中的字符表示“匹配其中任何一个”
*   “+”表示“匹配之前出现的任何内容，一次或多次”
*   "\x" 表示转义，这使得捕获正则表达式语言字符成为可能，例如 "*"
*   \@ 表示转义的“@”字符（并非总是必要的）
*   {x,y} 表示“匹配之前出现的任何内容，x 到 y 次”
*   "$" 表示字符串结束

所以，你的模式意味着：

*   以一个或多个 url 安全字符（字母数字、“.”和“_”）开头的字符串
*   然后是一个“@”
*   然后再次使用一个或多个 url 安全字符
*   然后是一个点“。”
*   最后，来自拉丁字母表的 2 到 4 个字符（即“com”、“eu”或“info”）

...这是一个电子邮件地址

在这里试验一下： [RegExr](http://gskinner.com/RegExr/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-09T18:43:16.990

对于一个好的教程，你可以从这个[链接](http://www.regular-expressions.info/)开始。尽管此链接笼统地讲述了正则表达式，但您应该知道（并且该链接还解释了）在不同语言使用的不同正则表达式引擎之间，正则表达式语法和行为之间存在细微差异。

您的正则表达式的细分是：

*   `//`封闭的斜线表示它是一个正则表达式模式。
*   `^$`这表示行的开始和结束。
*   `([A-Za-z0-9_\-\.])+`方括号`[]`表示一个字符类，它基本上匹配方括号内列出的可能字符中的一个字符。并且`+` 这个类之外的量词表示这个字符类可以重复1次或多次。在您的正则表达式中，字符类表示可能是单词字符（字母数字或下划线）、连字符或点的匹配项。这可以重写为`([-\w.]+)`。您会注意到，您不需要使用反斜杠转义字符类中的特殊字符。对于电子邮件地址验证，这会尝试匹配“本地部分”。
*   `\@`这表示与电子邮件地址中的费率符号匹配。这实际上不需要用反斜杠转义。
*   `([A-Za-z0-9_\-\.])+`这表示与“本地部分”相同，只是现在它尝试匹配电子邮件的域地址。
*   `\.`这表示域和顶级域之间的时间段。这需要用反斜杠转义，因为句点是正则表达式引擎的保留字，表示任何字符（换行符除外）。
*   `([A-Za-z]{2,4})`这表示长度为 2 到 4 个字符的字母不区分大小写字符串。这代表顶级域名，如 com、org 等...

所以上面的正则表达式可以更好地写成`^([-\w.]+)@([-\w.]+)\.([A-Za-z]{2,4})$`.
将`+`量词放在括号内。使用的最常见原因`()`是捕获模式的一部分，以便您以后可以提取它。因此，如果您需要捕获电子邮件地址的“本地部分”或“域”，则捕获重复的字符类比只匹配正则表达式所具有的第一个字符更有意义。

你可以在[RegexPal看到这个正则表达式](http://regexpal.com/?flags=gm&regex=%5E(%5B-%5Cw.%5D)%2B%40(%5B-%5Cw.%5D)%2B%5C.(%5BA-Za-z%5D%7B2%2C4%7D)%24&input=jo-h.n_%40doe.org%0Ajo-h.n_%40d.o-e.me%0Ajo-h.n_%40d-o_e.java%0A)

* * *

[至于匹配浮点数，这里](https://stackoverflow.com/questions/10256061/regular-expression-for-finding-deciaml-float-numbers)已经讨论过了。
但是，如果您的浮点数需要 5 的精度，那就完全不同了。
试试这个使用[积极的前瞻](http://www.regular-expressions.info/lookaround.html)：

```
^[-+]?(?=\d+(\.\d+)?)(\.?\d){1,5}$ 
```

[在这里](http://regexpal.com/?flags=gm&regex=%5E%5B-%2B%5D%3F(%3F%3D%5Cd%2B(%5C.%5Cd%2B)%3F)(%5C.%3F%5Cd)%7B1%2C5%7D%24&input=All%20these%20match%3A%0A%0A12%0A12.2%0A1236.32%0A123.333%0A%2B12.00%0A-12.00%0A123.123%0A-123.12%0A123456%0A12345%0A-123456%0A-12345%0A-123.356%0A%2B123.45%0A%0A%0AThese%20don't%3A%0A%0A127.0.0.1%0A%24499.99%0A.5%0A)玩

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-09T19:23:33.847

我可以推荐以下网站：[http ://www.regex101.com](http://www.regex101.com)

这是您的正则表达式解释的链接：[http ://regex101.com/r/aE3yB5](http://regex101.com/r/aE3yB5)

您还可以插入测试字符串并测试您的表达式。

该网站将解释任何给定的表达方式，并在其中发现错误（如果有）。

我希望这有帮助！

# c - 类函数宏的合法用途是什么？

> ID：12341631
> 
> 赞同：6
> 
> 时间：2012-09-09T18:15:59.383
> 
> 标签：c, macros, c-preprocessor

C/C++ 中不乏不良或危险的类似函数的宏的示例。

```
#define SQUARE(x) x * x
printf("%d", SQUARE(4));   //16
printf("%d", SQUARE(3+1)); //7
#undef SQUARE

#define SQUARE(x) (x) * (x)
printf("%d", 36/4);                //9
printf("%d", SQUARE(6)/SQUARE(2)); //36
#undef SQUARE

#define SQUARE(x) ((x) * (x))
int x = 3;
++x;
printf("%d", SQUARE(x)); //16

int y = 3;
printf("%d", SQUARE(++y)); //?
#undef SQUARE 
```

鉴于类函数宏的问题，它们有哪些好的/谨慎/推荐使用的例子？

是否有任何时候类似函数的宏比函数更可取？

我想这一定有一些非常好的案例，否则预处理器制造商会让他们的工作变得更容易而将它们排除在外。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T18:37:02.253

评论已经占据了大部分。

某些类型的调试和检测只能通过使用函数式宏来完成。最好的例子是`assert()`，但函数样式的宏也可以用于检测代码以进行分析。`__FILE__`像和`__LINE__`一样的魔术宏以及`#`引用和`##`标记粘贴等功能使类似函数的宏对于调试和分析很有价值。

在 C++ 中，使用模板和通常更积极的内联，几乎没有（如果有的话）使用函数式宏的其他理由。例如，由于问题中说明的原因，模板函数`std::max`是比宏更好的解决方案。`MAX`

在 C 中，有时需要在优化中确保一小段代码是内联的。带有所有警告的宏在这种情况下仍然*偶尔*有用。ALLCAPS 命名约定是为了警告程序员这实际上是一个宏而不是一个函数，因为简单的文本替换存在所有问题。例如，如果您有几个地方需要`std::max`在性能关键的代码段中等效，那么宏（及其所有危险）可能是一个有用的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T18:34:55.263

大多数时候你不需要使用宏。然而，有些情况是合法的（尽管有讨论的余地）。

当您可以使用枚举时，您不应该使用宏。您不应该拥有依赖于具有魔术名称的局部变量的宏。你不应该有可以用作左值的宏。您不应该有对扩展宏周围的代码有副作用的宏。在大多数情况下，使用宏而不是内联函数是一个坏主意，无论如何，列表是无穷无尽的。

但是，您可以使用宏来伪造迭代器，在 C 中，特别是在 Linux 内核中，您将看到以下内容：

```
#define list_for_each_safe(pos, n, head) \
for (pos = (head)->next, n = pos->next; pos != (head); \
     pos = n, n = pos->next) 
```

Linux 内核源代码中使用了许多其他类似类型的宏。

此外，offsetof(3) 和 assert(3) 等通常被实现为宏。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T18:48:01.937

我一般同意这里的 dmp 。如果您可以使用其他东西，则可以使用它并忘记宏。

也就是说，我将主要重复评论中的内容：

1.  当您需要在其中使用一些其他预处理器符号（__LINE__、__FILE__、__func__ 等）时，通常需要类似宏的函数。这通常意味着断言/调试宏。
2.  在宏中字符串化/粘贴标记（# 和 ## 运算符）。
3.  你可以（如果你足够冒险的话）使用类似函数的宏来创建枚举->字符串映射，使用一些切割技巧，如定义/取消定义和重新定义宏。
4.  像 va_list/va_arg 这样的东西，您需要通过指针访问并同时更改它指向的位置。

我再重复一遍——如果你能避免预处理器，就这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T18:44:38.943

C标准有（或允许）一大堆它们，我认为任何以同样的精神做宏的东西都应该是合法的：

*   字符处理函数`isspace`和类似函数通常作为宏实现
*   `CMPLX`被声明为宏
*   `UINT64_C`和类似的是宏
*   如果你包含`tgmath.h`,`sin`和`cos`许多其他函数成为宏
*   new`_Generic`关键字的全部意义在于编写类似函数的宏

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-09T18:45:20.237

在某些情况下，将有编译器特定的指令，这些指令会有所不同并且对于每个编译器都需要重写。我经常使用的一个属于这一类的宏用于通知编译器一个参数未使用：

```
virtual size_t heightForItemAtIndex(const size_t& idx) const {
  MONUnusedParameter(idx); // << MONUnusedParameter() is the macro
  return 12; // << this type's items are all the same height
} 
```

问题在这里介绍得比较好：[cross platform macro for silencing used variables warning](https://stackoverflow.com/questions/12198449/cross-platform-macro-for-silencing-unused-variables-warning/12199209#12199209)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-09T20:28:03.217

[Google Style C++ Guide](https://google-styleguide.googlecode.com/svn/trunk/cppguide.xml?showone=Copy_Constructors#Copy_Constructors)有一个非常有用的宏示例（我不确定这是否是您所说的“类函数宏”的意思——它需要一个参数，但不能被函数调用替换）：

DISALLOW_COPY_AND_ASSIGN（类名）；

这样的宏可以放在类的私有部分中，以禁用由编译器自动生成的复制构造函数和赋值运算符。除非类确实需要它们，否则禁止这两个自动生成的方法通常是个好主意。如果没有禁用宏，则需要在每个类中输入大量内容：

类名（常量类名&）；
无效运算符=（常量类名&）；

宏只是自动生成此代码。这是相当安全的。我不知道这种宏会导致问题的任何情况。

# asp.net-mvc-3 - 没有绑定到数据库的 asp.net mvc3 c# 复选框

> ID：12341637
> 
> 赞同：0
> 
> 时间：2012-09-09T18:16:42.457
> 
> 标签：asp.net-mvc-3, entity-framework, c#-4.0, checkbox

我在我的视图中使用这些复选框：

```
<input type="checkbox" value="1" name="reglist" id="prueba2" />
<input type="checkbox" value="2" name="reglist" id="prueba3" /> 
```

我正在使用实体框架，而我的 viewModel 表不包含这些复选框的值。

我需要在控制器中选中复选框，并保留先前在请求中选中的复选框，而不将复选框绑定到类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T22:23:47.443

为了我们使用相同的语言，我通常将我保存在数据库中的东西称为“模型”，将我用作视图上的模型的东西称为“视图模型”。

在那，我会有一个这样的模型：

```
public class Person{
   // properties
} 
```

然后我会有一个像这样的**视图模型**：

```
public class PersonViewModel{
   public Person Person { get; set; }
   public bool OtherNeededValue1 {get; set;}
   public bool OtherNeededValue2 {get; set;}
} 
```

现在，在您的视图中，用户 PersonViewModel 作为模型。然后，在您的控制器中，您的操作将如下所示：

```
public ActionResult Create (PersonViewModel viewModel)
{
     if (viewModel.OtherNeededValue1)
     {
         // do something
     }

     var p = new Person { 
                          FirstName = viewModel.Person.FirstName 
                        };

} 
```

这样你就不会用不必要的属性来混淆你的模型，但你仍然可以利用 MVC 的丰富绑定。

干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T23:53:19.223

每次单击复选框时，您都可以对控制器进行 AJAX 调用。

**阿贾克斯调用**

```
 $(function () {
        $(':checkbox').change(function () {
            $.ajax({
                url: '@Url.Action("CheckBoxStatus")',
                type: 'POST',
                data: { isChecked: $(this).is(':checked'),
                        id: $(this).val()
                },
                success: function (result) { }
            });
        });
    }); 
```

这会将复选框的状态和值发送到控制器，您可以以任何方式存储信息。

**控制器方法**

```
public void CheckBoxStatus(bool isChecked, int id)
{
   // Do what you like here 
} 
```

# java - i++ 返回 i 而不是 i++

> ID：12341638
> 
> 赞同：1
> 
> 时间：2012-09-09T18:16:49.680
> 
> 标签：java, coding-style

> **可能重复：**
> [pre Decrement vs. post Decrement](https://stackoverflow.com/questions/4531870/pre-decrement-vs-post-decrement)
> [++i 和 i++ 有什么区别？](https://stackoverflow.com/questions/24853/what-is-the-difference-between-i-and-i)

我刚刚意识到

```
int i=0;
System.out.println(i++); 
```

打印**0**而不是**1**。我以为*我*增加了然后打印了。似乎相反的情况发生了。

为什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-09T18:17:27.107

这些是[前增量和后增量运算符](http://en.wikipedia.org/wiki/Increment_and_decrement_operators)。这种行为是完全正确的。

*   `i++`返回原始值。
*   `++i`返回新值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T18:18:47.290

当你这样做时`i++`，直到下一条指令才会发生增量。这称为后期增量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-09T18:19:12.800

```
System.out.println(i++); 
```

它应该首先打印 i 的值，然后增加 i。其后订单增量。

*   i++ -> 后订单增量
*   ++i -> 预购增量

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-09T18:19:29.537

```
++i will print 1
i++ will print 0 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-09T18:21:40.957

`i++`表示返回 i，然后递增。因此 ++ 在 i 之后。

`++i`表示递增 i，然后返回。因此 ++ 在 i 前面

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-09T18:18:58.337

*   `i++`=> 评估然后递增；
*   `++i`=> 增加然后评估。

考虑一个`for`循环 -`i`在每次迭代后递增。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-09T18:19:02.003

after 变量定义了`++`一个后增量操作。这意味着在您执行完所有其他操作后， then`i`会增加。如果您使用`++i`该变量将在打印之前递增

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-09-09T18:20:01.143

您可以在此处找到：http: [//docs.oracle.com/javase/tutorial/java/nutsandbolts/op1.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op1.html)有两个递增运算符：i++ 和 ++i。++i 做了你认为 i++ 会做的事情。i++ 在用于其他目的后增加值（查看链接以获取更多详细信息）

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-09-09T18:31:57.217

因为赋予 的值`System.out.println(i++);`首先分配为 0，然后递增。如果您尝试这样做，`System.out.println(++i);`那么它将向您显示 1。

# visual-studio-2010 - VB datetimepicker 格式为 09-SEP-2012

> ID：12341639
> 
> 赞同：0
> 
> 时间：2012-09-09T18:16:59.100
> 
> 标签：visual-studio-2010, datetimepicker, datetime-format

我试图让 datetimepicker 以以下格式返回日期：08-SEP-2012。

返回的格式将是网址的一部分，因此非常具体。它设置为自定义格式，我可以正确获取日期和年份。只有3个字母月给我一个问题。也许有一个非常简单的解决方案，但我找不到它..

我对 Visual Basic（或任何一般编程）相当陌生，因此将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T18:27:05.073

要将日期转换为所需格式的字符串，请使用：

```
Dim s = theDate.ToString("dd-MMM-yyyy").ToUpper() 
```

# facebook - php facebook 应用程序用户墙贴

> ID：12341642
> 
> 赞同：0
> 
> 时间：2012-09-09T18:17:17.123
> 
> 标签：facebook, facebook-graph-api

我正在创建一个 Facebook 应用程序。我正在尝试发布用户墙。但我没有得到任何回应

php代码

```
 $user = $facebook->getUser(); 

if($user == 0) {

$login_url = $facebook->getLoginUrl($params = array('scope' => "publish_stream"));

echo ("<script> top.location.href='".$login_url."'</script>");

} else { $token=$facebook->getAccessToken();

  try {     
  params = array(

            'message'       =>  "Hurray! This works :)",
            'name'          =>  "This is my title",
            'caption'       =>  "My Caption",
            'description'   =>  "Some Description...",
            'link'          =>  "http://stackoverflow.com",
            'picture'       =>  "http://i.imgur.com/VUBz8.png",
        );

        $post = $facebook->api("/me/feed","POST",$params);

  }
   catch (FacebookApiException $e) {
      $result = $e->getResult();
     }

  } 
```

我无法将内容发布到用户的墙上。请帮助我调试代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T20:19:03.053

尝试使用 php curl 发布。如果使用 rest api 工作你的 facebook 类。Rest api最近被删除。

```
$user = $facebook->getUser(); 

if($user == 0) {

$login_url = $facebook->getLoginUrl($params = array('scope' => "publish_stream"));

echo ("<script> top.location.href='".$login_url."'</script>");

} else { $token=$facebook->getAccessToken();

  try {     
  $params = array(
            'access_token'  => $token,
            'message'       =>  "Hurray! This works :)",
            'name'          =>  "This is my title",
            'caption'       =>  "My Caption",
            'description'   =>  "Some Description...",
            'link'          =>  "http://stackoverflow.com",
            'picture'       =>  "http://i.imgur.com/VUBz8.png",
        );

$url = 'https://graph.facebook.com/'.$user.'/feed';
    $ch = curl_init();
    curl_setopt_array($ch, array(
                CURLOPT_URL => $url,
                CURLOPT_POSTFIELDS => $params,
                CURLOPT_RETURNTRANSFER => true,
                CURLOPT_SSL_VERIFYPEER => false,
                CURLOPT_VERBOSE => true
            ));
              $result = curl_exec($ch);
              print_r($result);
              curl_close($ch);

  }
   catch (FacebookApiException $e) {
      $result = $e->getResult();
     }

  } 
```

在您的代码中，params 不是 $params。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T19:23:49.337

试试这个，我使用以下方法在我的 FB 上成功发布：

```
$user = $facebook->getUser(); 

if($user == 0) {

//$login_url = $facebook->getLoginUrl($params = array('scope' => "publish_stream"));

//echo ("<script> top.location.href='".$login_url."'</script>");

} else { $token=$facebook->getAccessToken();

  try {     
        $post = $facebook->api("/me/feed","POST",array(

            'message'       =>  "Hurray! This works :)",
            'name'          =>  "This is my title",
            'caption'       =>  "My Caption",
            'description'   =>  "Some Description...",
            'link'          =>  "http://stackoverflow.com",
            'picture'       =>  "http://i.imgur.com/VUBz8.png"
        ));
  }
   catch (FacebookApiException $e) {
      $result = $e->getResult();
     }
  } 
```

如果您还没有，请记住包含 facebook.php api 和您的代码类初始化

```
$facebook = new Facebook(array(
                                'appId' => APP_ID,
                                'secret' => APP_SECRET,
                                'cookie' => true
                            )); 
```

# c - 结构和链表

> ID：12341650
> 
> 赞同：0
> 
> 时间：2012-09-09T18:18:36.073
> 
> 标签：c, struct, linked-list

```
struct node
{
int info;
struct node *link;
}*start;
void main()
{
struct node*tmp,*q;
tmp=(struct node*)malloc sizeof(struct node);
} 
```

现在我的第一个问题是，当我们声明结构时，是否在内存中创建了任何结构类型节点？

第二个问题是，如果是，那么我在这里取一个指向结构类型节点的开始指针，所以没有指定结构节点的地址来开始指针如何开始指针指向在声明期间创建的结构类型节点请告诉我这是如何在内部这正在发生，我对此有很多困惑

第三个问题最初是 tmp 和 q 指针变量都指向同一个结构节点

请解释一下 malloc 和 calloc 的概念，它们是如何在内部创建节点来帮助我的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T06:40:30.133

1.  您可以在不声明任何变量的情况下声明结构类型。但是，您的代码定义了一个指针变量`start`.

2.  变量`start`被初始化为 0，所以它没有指向任何东西。

3.  变量`tmp`和`q`根本没有初始化，在赋值之前不能安全使用。`tmp`你在下一行初始化；`q`仍然未初始化。

4.  `malloc()`为指向的指针提供空间；它不会初始化该空间。中的值`tmp->info`是不确定的；in 的值`tmp->link`也是不确定的。如果您使用了`calloc()`，那么`tmp->info`将为零并且`tmp->link`将为空（在所有实际系统上——理论上，可能存在`tmp->link`未正确初始化的系统）。

最后，请注意这`void main()`是不好的。C 标准说返回类型`main()`应该是`int`. 此外，除非您有 C99 或更高版本的编译器，否则您应该包含`return(0);`或等效于最后一行`main()`- 或调用`exit()`.

# javascript - 复选框/单选按钮 - 添加所选项目的总价格

> ID：12341657
> 
> 赞同：2
> 
> 时间：2012-09-09T18:19:18.930
> 
> 标签：javascript

我目前正在使用单选按钮和复选框。在这个示例项目中，我有单选按钮和复选框，根据用户选择的值显示图像。

如何为所选的每个项目添加价值价格并在底部显示总成本？[例子](http://webprolearner2346.zxq.net/bike_calculator/)

下面的 js 显示了我根据选择的值显示图像的过程。

**JS**

```
<script>
function check_value(currentElement, val, id, type) {
    var el = document.getElementById("imgBox" + id);
    if (val > 0 && val < 4) { //will trigger when [1,2,3]

        if(currentElement.checked)
        {
            el.src = "images/" + type + val + ".jpg";
            el.style.display = "";
        }
        else
        {
            el.src = "";
            el.style.display = "none";
        }           
    }
}    
</script> 
```

**HTML**

```
<h2>Choose a bike</h2>
<form name="builder">
    <input type="radio" name="field" onclick='check_value(this, 1, 1, "bike")'/> KAWASAKI KX 450F- $8,399<br />
    <input type="radio" name="field" onclick='check_value(this, 2, 1, "bike")'/> 2010 Yamaha Road Star S- $13,090<br />
    <input type="radio" name="field" onclick='check_value(this, 3, 1, "bike")'/> Aprilia RSV4- $16,999<br />
</form>

<img id="imgBox1" src="#" style="display:none"> 

<h2>Choose a tire</h2>  
<form name="tire">
    <input type="radio" name="field" onclick='check_value(this, 1, 2, "tire")'/> Michelin Pilot Road 3 Tires- $299.99<br />
    <input type="radio" name="field" onclick='check_value(this, 2, 2, "tire")'/> Dunlop Roadsmart Sport-Touring Tires- $154.99<br />
    <input type="radio" name="field" onclick='check_value(this, 3, 2, "tire")'/> Pirelli Scorpion Trail Tires- $119.99<br />
</form>

<img id="imgBox2" src="#" style="display:none">

<h2>Choose Accesories</h2>
<form name="tire">
    <input type="checkbox" name="field" onclick='check_value(this, 1, "3a", "accessories")'/> Chrome Front Plate- $246.50<br />
    <input type="checkbox" name="field" onclick='check_value(this, 2, "3b", "accessories")'/> Jacket- $87.99<br />
    <input type="checkbox" name="field" onclick='check_value(this, 3, "3c", "accessories")'/> Gloves- $35.99            
</form>

<div id="accessories">
    <img id="imgBox3a" src="#" style="display:none">
    <img id="imgBox3b" src="#" style="display:none">
    <img id="imgBox3c" src="#" style="display:none">
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T21:00:36.777

我会开始

1.  **删除不必要的 formTags**并将其减少到**一个**。
2.  更改输入名称（例如：收音机的“cylces”和“tire”以及“frontPlate”请参见下面的代码）。
3.  正确的功能*（减少参数）*并将价格设置为输入字段的值属性
4.  添加`for-loop`以*计算当前总计*

我们到了 ...

```
<head>
    <title></title>
    <script>
        function check_value(curElem, id) {
            var el = document.getElementById("img" + curElem.name);
            el.src = "images/" + curElem.name + id + ".jpg";
            if (!curElem.checked)
                el.style.display = "none";
            else
                el.style.display = "block";

            // calculate Total
            var total = 0;
            var controls = document.getElementsByTagName('input');
            for (var i = 0; i < controls.length; i++) {
                if ((controls[i].type === 'radio' || controls[i].type === 'checkbox') && controls[i].checked)
                    total = total + parseFloat(controls[i].value);
            }
            document.getElementById("total").innerHTML = total;
            //alert("Total: " + total);
        }    
    </script>
</head>
<body>
    <form name="builder">
        <h2>
            Choose a bike</h2>
        <input type="radio" name="Bike" value="8399" onclick='check_value(this, 1)' />
        KAWASAKI KX 450F- $8,399<br />
        <input type="radio" name="Bike" value="13090" onclick='check_value(this, 2)' />
        2010 Yamaha Road Star S- $13,090<br />
        <input type="radio" name="Bike" value="16999" onclick='check_value(this, 3)' />
        Aprilia RSV4- $16,999<br />
        <img id="imgBike" src="#" style="display: none" />
        <h2>
            Choose a tire</h2>
        <input type="radio" name="Tire" value="299.99" onclick='check_value(this, 1)' />
        Michelin Pilot Road 3 Tires- $299.99<br />
        <input type="radio" name="Tire" value="154.99" onclick='check_value(this, 2)' />
        Dunlop Roadsmart Sport-Touring Tires- $154.99<br />
        <input type="radio" name="Tire" value="119.99" onclick='check_value(this, 3)' />
        Pirelli Scorpion Trail Tires- $119.99<br />
        <img id="imgTire" src="#" style="display: none" />
        <h2>
            Choose Accesories</h2>
        <input type="checkbox" name="FrontPlate" value="246.50" onclick='check_value(this, "")' />
        Chrome Front Plate- $246.50<br />
        <input type="checkbox" name="Jacket" value="87.90" onclick='check_value(this, "")' />
        Jacket- $87.99<br />
        <input type="checkbox" name="Gloves"  value="35.99" onclick='check_value(this, "")' />
        Gloves- $35.99
        <div id="accessories">
            <img id="imgFrontPlate" src="#" style="display: none" />
            <img id="imgJacket" src="#" style="display: none" />
            <img id="imgGloves" src="#" style="display: none" />
        </div>
        <div id="total"></div>
    </form>
</body> 
```

*尽管*这*可能是*您的答案的解决方案-我看不到此代码的用途。在现实生活环境**中，大部分数据将来自生成的服务器**，因此您必须**完全重新执行此代码**！

# android - android屏幕方向更改问题

> ID：12341658
> 
> 赞同：0
> 
> 时间：2012-09-09T18:19:27.243
> 
> 标签：android, orientation

我在 onCreate 中有这个：

```
System.out.println("orientation: " + getResources().getConfiguration().orientation); 
```

结果是：

真实方向： 输出：

```
portrait............portrait  
landscape...........landscape  
portrait............landscape  
landscape...........landscape 
```

谁能告诉我为什么横向后纵向不适用？我正在使用 Android 操作系统 2.3.6。

# git - Git新文件出现在所有分支中

> ID：12341665
> 
> 赞同：6
> 
> 时间：2012-09-09T18:20:07.167
> 
> 标签：git, merge, branch, commit, rebase

我认为在合并或重新设置分支之前，在一个分支上创建的文件不会出现在任何其他分支中？

**例子：**

我有两个分支：

1.  掌握
2.  new_contact_page

我检查了**new_contact_page**分支。

```
$ git checkout new_contact_page 
```

然后我创建一个新文件。

```
$ vi contact_page.html 
```

在不执行任何 Git 命令的情况下，我切换回我的**Master**分支。

```
$ git checkout master 
```

然后我看到这个contact_page.html 文件也在我的**Master**分支中。

```
$ ls   (contact_page.html shows up in the list!) 
```

该文件不应该只存在于**new_contact_page**分支中吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-09T18:21:56.453

Git 永远不会触及任何实际上不在您的存储库中的文件。（未跟踪的文件）

您需要先将文件`git add`（`git commit`进入一个分支）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T06:39:17.030

这是[了解索引（或暂存区）的](http://alblue.bandlem.com/2011/10/git-tip-of-week-understanding-index.html)重要之处。
只要您不暂存（git add）文件，它们就会保持“未跟踪”（或“私有”），并且不会被“git checkout”修改。

这与引用跟踪文件（以前在本地 Git 存储库中提交）的“未暂存”不同，其中本地修改尚未添加到索引中。

您可以在“[您本可以发明 git（也许您已经发明了！）](http://reprog.wordpress.com/2010/05/13/you-could-have-invented-git-and-maybe-you-already-have/) ”中阅读更多内容

# c# - 跨多个控件实现 INotifyPropertyChanged 的 优雅方式

> ID：12341666
> 
> 赞同：4
> 
> 时间：2012-09-09T18:20:27.350
> 
> 标签：c#, wpf, xaml

我正在构建一个 WPF 应用程序，我正在慢慢地发现使用 WPF 的一些乐趣和挫败感。我的最新问题涉及使用更新 UI`INotifyPropertyChanged`

我的应用程序堆叠了用户控件，每个控件都`UserControl`包含多个控件，因此总体上有数百个控件每秒更新一次，提供实时数据。为了更新所有控件，我正在使用类似于下面的东西，它目前可以按预期工作。

```
namespace ProjectXAML
{
    public partial class ProjectX : UserControl, INotifyPropertyChanged
    {

#region Declare Getter/Setter with INotifyPropertyChanged groupx3

        private string m_group1Text1;
        public string group1Text1
        {
            get
            {
                return m_group1Text1;
            }
            set
            {
                m_group1Text1 = value;
                NotifyPropertyChanged("group1Text1");
            }
        }

        private string m_group1Text2;
        public string group1Text2
        {
            get
            {
                return m_group1Text2;
            }
            set
            {
                m_group1Text2 = value;
                NotifyPropertyChanged("group1Text2");
            }
        }

        private string m_group2Text1;
        public string group2Text1
        {
            get
            {
                return m_group2Text1;
            }
            set
            {
                m_group2Text1 = value;
                NotifyPropertyChanged("group2Text1");
            }
        }

        private string m_group2Text2;
        public string group2Text2
        {
            get
            {
                return m_group2Text2;
            }
            set
            {
                m_group2Text2 = value;
                NotifyPropertyChanged("group2Text2");
            }
        }

        private string m_group3Text1;
        public string group3Text1 
        { 
            get
            {
                return m_group3Text1;
            }
            set
            {
                m_group3Text1 = value;
                NotifyPropertyChanged("group3Text1");
            }
        }

        private string m_group3Text2;
        public string group3Text2
        {
            get
            {
                return m_group3Text2;
            }
            set
            {
                m_group3Text2 = value;
                NotifyPropertyChanged("group3Text2");
            }
        }

 #endregion

 #region INotifyPropertyChanged Members

        public event PropertyChangedEventHandler PropertyChanged;

        /// Notifies the property changed.
        private void NotifyPropertyChanged(string property)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(property));
            }
        }
 #endregion

}
} 
```

我的问题是：

1.  `PropertyChanged`有没有一种更优雅的方式来为大量控件而不是大量获取/设置代码引发事件？

2.  有没有办法引发 1 个`PropertyChanged`事件，涵盖`UserControl`包含多个控件的整个事件，而不是每个控件的单独事件？有没有比我正在尝试的更好的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T19:49:25.590

严格参考您问题的这一部分……“有没有办法引发 1 个 PropertyChanged 事件，覆盖整个 UserControl 包含”。

是的，您可以发出 PropertyChanged 通知，通知我对象上的所有属性都已更新。

采用：

```
NotifyPropertyChanged(null); 
```

然后这会通知 INotifyPropertyChanged 的​​侦听器对象的所有属性都已更改。

这通常不被使用......并且可能被滥用......并导致低效更新，例如，如果您只更改几个属性并使用它。

但是，如果您的对象中有很多属性，那么您可能会争论使用它的理由，无论如何您总是同时更改......并且您想将许多单独的通知折叠成 1 在您修改后引发所有属性。

示例用例（即假设您正在以某种方式更新所有组）：

```
void UpdateAllGroupTextProperties()
{
    group1Text1 = "groupA";
    group1Text2 = "groupA2";
    group2Text1 = "groupB";
    group2Text2 = "groupB2";
    group3Text1 = "groupC";
    group3Text2 = "groupC2";
    NotifyPropertyChanged(null);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-09T23:59:06.250

对于第 1 点，如果您使用的是 VS 2012，您可以执行以下操作

```
private void SetProperty<T>(ref T field, T value, [CallerMemberName] string name = "")
{
    if (!EqualityComparer<T>.Default.Equals(field, value))
    {
        field = value;
        var handler = PropertyChanged;
        if (handler != null)
        {
          handler(this, new PropertyChangedEventArgs(name));
        }
    }
} 
```

然后您可以使用您的 set 属性方法，而无需对属性名称进行硬编码。

请注意，上面的代码是以下链接 [http://danrigby.com/2012/03/01/inotifypropertychanged-the-net-4-5-way/的除外](http://danrigby.com/2012/03/01/inotifypropertychanged-the-net-4-5-way/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-09T18:23:05.590

使用设计模式[模型视图控制器](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)。所以模型会为你提出改变。与[MVVM](http://en.wikipedia.org/wiki/MVVM)一起，控件将使用其依赖对象查看更改并自动查看它们。

# php - foreach 循环未显示所需结果

> ID：12341667
> 
> 赞同：0
> 
> 时间：2012-09-09T18:20:27.993
> 
> 标签：php, mysql, loops, foreach

大家好，感谢您的宝贵时间。我的问题是关于。

我正在尝试遍历文件夹中的图像以及数据库中的帖子，最终结果如下所示：

> 发布 1
> 图片 1
> 
> 发布 2
> 图片 2
> 
> 发布 3
> 图片 3

目前我得到这个结果：

> 发布 1
> 图片 1
> 
> 发布 1
> 图片 2
> 
> 发布 1
> 图片 1
> 
> 帖子 2
> 图片 1
> 
> 发布 2
> 图片 2
> 
> 发布 2
> 图片 3

我不想要这个结果。

下面是我的代码：

```
 $post_info = get_posts();

foreach ($post_info as $info){
   $photos = glob('design/img/*');
   foreach($photos as $photo) {
    echo " <a href='feed.php?pid=".$info['post_id']." ' > 
           <div style='background:#FFF5C3'> <br> <h2> ".$info['person_mentioned']." </h2> 
        <h3 style='color: black'>    ".$info['body']." </h3> </div> </a>";
  echo " <img src='{$photo}' width='285px' height='200px' style='border: 5px solid black'>";

    }
} 
```

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T18:29:25.047

试试这个（减去潜在的语言细节，因为我实际上并没有运行来检查这段代码）。它基本上是一个常规的 for 循环而不是一个 foreach。

```
$post_info = get_posts();
$photos = glob('design/img/*');

if (count($post_info) === count($photos)) { // According to your requirement, the counts would be the same
    $count = count($post_info);
    for ($i = 0; $i < $count; $i++) {
        $info = $post_info[$i];
        $photo = $photos[$i];
        echo " <a href='feed.php?pid=".$info['post_id']." ' > <div style='background:#FFF5C3'> <br> <h2> ".$info['person_mentioned']." </h2> 
        <h3 style='color: black'>    ".$info['body']." </h3> </div> </a>";
        echo " <img src='{$photo}' width='285px' height='200px' style='border: 5px solid black'>";
    }
} 
```

希望有帮助:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T18:30:50.620

从内部循环中获取图像详细信息`get_posts()`并删除内部`foreach`循环可能会解决您的问题。

*注意：替换`$info['something_like_post_image']`为您的图像字段。*

```
$post_info = get_posts();

foreach ($post_info as $info) {
    //$photos = glob('design/img/*');
    //foreach ($photos as $photo) {
    echo " <a href='feed.php?pid=" . $info['post_id'] . " ' > 
           <div style='background:#FFF5C3'> <br> <h2> " . $info['person_mentioned'] . " </h2> 
        <h3 style='color: black'>    " . $info['body'] . " </h3> </div> </a>";
    echo " <img src='" . $info['something_like_post_image'] . "' width='285px' height='200px' style='border: 5px solid black'>";
    //}
} 
```

**更新**

```
/*
 * If your images have any naming convention like
 * imageFileName = "image_{POST_ID}.jpg"
 * then you can use below code (NO DATABASE ENTRY REQUIRED)
 * (ie, For post #1 image file would be "image_1.jpg";
 * and for post #2 image file would be "image_2.jpg")
 */

$post_info = get_posts();

foreach ($post_info as $info) {

    //filename = image_1.jpg or image_2.jpg or...
    $photoFileName = 'design/img/' . 'image_' . $info['post_id'] . '.jpg';

    if (file_exists($photoFileName)) {
        echo " <a href='feed.php?pid=" . $info['post_id'] . " ' > 
                           <div style='background:#FFF5C3'> <br> <h2> " . $info['person_mentioned'] . " </h2> 
                        <h3 style='color: black'>    " . $info['body'] . " </h3> </div> </a>";
        echo " <img src='" . $photoFileName . "' width='285px' height='200px' style='border: 5px solid black'>";
    }
} 
```

*注意：您应该根据您的独特形象与每个帖子保持联系；否则，您将无法在发布时通过您的帖子获得该独特图像。查看以下选项以处理这种情况。*

1.  您可以将图像名称保存在数据库中（对于每个帖子，您可以直接从数据库中获取图像名称）
2.  为您的图像使用命名约定（对于帖子 #1，使用唯一的图像名称（例如 image_1，对于帖子 #2 image_2 等）

**更新 - 2**

如果您正在寻找循环图像（没有任何条件），请使用以下代码

```
/*
 * If you are looking for a solution that cycles each images
 * along with each post, try this one
 */

$post_info = get_posts();
$photos = glob('design/img/*');

$numPhotos = count($photos) + 1;

//assuming your post# starts with 1
$imageId = 1;
foreach ($post_info as $info) {

    //cycling
    if ($imageId % $numPhotos === 0) {
        $imageId = 1;
    }

    $photoFileName = 'design/img/' . 'image_' . $imageId++ . '.jpg';

    //no need of this checking, since you are cycling
    //if (!file_exists($photoFileName)) {
    //    $photoFileName = 'path/to/default/image.jpg';
    //}

    echo " <a href='feed.php?pid=" . $info['post_id'] . " ' > 
                               <div style='background:#FFF5C3'> <br> <h2> " . $info['person_mentioned'] . " </h2> 
                            <h3 style='color: black'>    " . $info['body'] . " </h3> </div> </a>";
    echo " <img src='" . $photoFileName . "' width='285px' height='200px' style='border: 5px solid black'>";
} 
```

# ios - 如何使用 PhoneGap 呈现模态视图？

> ID：12341671
> 
> 赞同：0
> 
> 时间：2012-09-09T18:20:42.440
> 
> 标签：ios, html, cordova, modalviewcontroller

在制作了一些 iOS 应用程序之后，我现在迈出了使用 PhoneGap 构建 HTML5 应用程序的第一步。

困扰我的一件事是如何呈现模态视图。在 iOS 中这很简单：

```
[myViewController presentModalViewController:modalViewController animated:YES]; 
```

但是经过一番谷歌搜索，并查看了[PhoneGap 的 API 参考](http://docs.phonegap.com/en/2.0.0/index.html)，我找不到一个如何呈现模态视图的示例……我认为这对 100 多个教程来说是一项微不足道的任务。

或者也许我在谷歌搜索方面真的很糟糕！然而，我认为，我错过了一些非常明显的东西......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T19:10:33.203

phonegap 没有 presentModalViewController，在 phonegap 中你将所有代码加载到“webView”中，所有代码和页面转换都必须使用 html+css+javascript 完成，所以你必须创建自己的翻转、交叉溶解和其他动画（或使用 jquery mobile、jqtouch、jqmobi 或任何其他带有此动画的 javascript 框架），因此您可以在其他平台上重用代码，您在 android 或 blackberry 上没有 presentModalViewController。

如果你真的想在 iOS phonegap 应用程序上使用 presentModalViewController，你必须创建一个插件，或者使用 phonegap 作为一个组件，然后你创建不同的视图，在它们上加载不同的 html 文件，并在它们之间使用原生代码进行更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T06:11:23.303

这将帮助您

[http://malsup.com/jquery/block/#dialog](http://malsup.com/jquery/block/#dialog)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-16T18:10:50.257

我更喜欢使用引导程序（[http://getbootstrap.com/javascript/](http://getbootstrap.com/javascript/)）

> $('#myModal').modal('show')

# javafx - 在 JavaFx 标签或文本中将部分文本加粗

> ID：12341672
> 
> 赞同：41
> 
> 时间：2012-09-09T18:20:53.687
> 
> 标签：javafx, javafx-2

在我的 JavaFx 应用程序中，我需要在整个句子中以粗体显示一两个单词。目前，该句子呈现为 JavaFx 标签，但升级组件也不允许我将文本设置为，以便我可以将“示例”字样以粗体显示。

```
String s = "This is a <b>Sample</b> sentence"
Label label = new Label(s); 
```

输出

```
这是一个例句
```

JavaFx Text 也不允许这样做。是否有任何组件可以让我将部分文本以粗体显示？

我不确定 JavaFx WebView 是否适合在窗口中呈现许多小句子。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2014-04-03T12:39:19.147

可以使用`TextFlow`来自 JavaFX8 的容器。然后，您可以轻松地在`Text`其中添加不同样式的节点。

```
TextFlow flow = new TextFlow();

Text text1=new Text("Some Text");
text1.setStyle("-fx-font-weight: bold");

Text text2=new Text("Some Text");
text2.setStyle("-fx-font-weight: regular");

flow.getChildren().addAll(text1, text2); 
```

TextFlow 容器会自动包装内容 Text 节点。

![在此处输入图像描述](../Images/7037960d2dab4a436afe3f2f3648fdc8.png)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2017-09-01T12:32:29.043

由于之前的答案不包括 FXML 代码，我将再发布一个。

正如@Ernisto 所建议的，您可以使用包含[文本部分的](https://docs.oracle.com/javase/8/javafx/api/javafx/scene/text/Text.html)[TextFlow](https://docs.oracle.com/javase/8/javafx/api/javafx/scene/text/TextFlow.html)，其中每个部分的样式都可以不同。

**示例 FXML 文件内容**：

```
<TextFlow>
  <Text text="Normal text and "/>
  <Text text="bold text and " style="-fx-font-weight: bold"/>
  <Text text="italic text and " style="-fx-font-style: italic"/>
  <Text text="red text." style="-fx-stroke: red"/>
</TextFlow> 
```

**输出**：

[![在此处输入图像描述](../Images/fb0dc9200d1d3444f8f3d4fb3849c868.png)](https://i.stack.imgur.com/K7oJg.png)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-09-09T19:42:18.640

**更新：** JavaFX 8 为富文本提供了新的控制：[TextFlow](https://docs.oracle.com/javase/8/javafx/api/javafx/scene/text/TextFlow.html)

* * *

不幸的是，2.2 中没有这样的功能，尽管它可能会包含在下一个版本中。

现在您可以尝试使用以下方法：

1.  `Label`带有多个或`Text`组件的 HBox
2.  网络视图
3.  绘制了多个文本组件的画布

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-13T07:56:56.933

```
public class UtilsDialog {

    private static final String TAG = "UtilsDialog";

    private static boolean sIsShowing = false;

    public static void showDialogShowError(String title, String msg, String defaultStyle,
                                           @Nullable String customStyle, String... styledWords) {
        if (sIsShowing) return;

        Stage dialogStage = new Stage(StageStyle.UTILITY);
        dialogStage.initModality(Modality.APPLICATION_MODAL);
        dialogStage.setWidth(400);
        dialogStage.setHeight(220);

        BorderPane borderPane = new BorderPane();

        borderPane.setPadding(new Insets(15));
        borderPane.setPrefWidth(Integer.MAX_VALUE);
        borderPane.setPrefHeight(Integer.MAX_VALUE);

        Scene scene = new Scene(borderPane);
        dialogStage.setScene(scene);
        sIsShowing = true;
        dialogStage.show();
        UtilsGui.closeOnEsc(borderPane, scene);
        scene.addEventHandler(KeyEvent.KEY_PRESSED, t -> {
            if (t.getCode() == KeyCode.ESCAPE) {
                sIsShowing = false;
            }
        });

        // Top
        Text textTitle = new Text(title);
        textTitle.setStyle("-fx-font-size: 18px;");

        HBox hBoxTop = new HBox(10);
        hBoxTop.getChildren().addAll(textTitle);
        borderPane.setTop(hBoxTop);

        // Center
        TextFlow textFlow = new TextFlow();
        List<String> words = Arrays.asList(msg.split(" "));
        List<String> styledWordsList = Arrays.asList(styledWords);
        for (String word : words) {
            Text tmpWord = new Text(word);
            if (styledWordsList.contains(word
                    .replace(".", "")
                    .replace(",", "")
                    .replace("?", "")
                    .replace("!", "")
                    .replace(";", "")
                    .replace("\n", "")
            )) {

                tmpWord.setStyle(customStyle);
            } else {
                if (defaultStyle == null) {
                    tmpWord.setStyle("");
                } else {
                    tmpWord.setStyle(defaultStyle);
                }
            }
            tmpWord.setText(tmpWord.getText());
            textFlow.getChildren().add(tmpWord);
            textFlow.getChildren().add(new Text(" "));
        }
        Text textMsg = new Text(msg);
        textMsg.setStyle("-fx-font-size: 14px;");
        HBox hBoxInputPane = new HBox(10);
        hBoxInputPane.setAlignment(Pos.CENTER);

        VBox vBoxCenter = new VBox(10);
        vBoxCenter.setPadding(new Insets(25, 0, 15, 0));
        vBoxCenter.getChildren().addAll(textFlow);
        borderPane.setCenter(vBoxCenter);

        JFXButton btnOk = new JFXButton("OK");
        btnOk.setAlignment(Pos.CENTER_RIGHT);
        btnOk.setStyle("-fx-text-fill: WHITE; -fx-background-color: #5264AE; -fx-font-size: 14px;");
        btnOk.setOnAction(event -> {
            sIsShowing = false;
            dialogStage.close();
        });

        // Bottom
        HBox hBoxBottom = new HBox();
        final Pane spacer = new Pane();
        HBox.setHgrow(spacer, Priority.ALWAYS);
        hBoxBottom.getChildren().addAll(spacer, btnOk);
        borderPane.setBottom(hBoxBottom);

        // store on close
        dialogStage.setOnCloseRequest(event -> sIsShowing = false);
    }
} 
```

**称呼：**

```
UtilsDialog.showDialogShowError("Test", "This is the message to show. Does it work?",
                null, "-fx-font-weight: bold", "This", "message", "show"); 
```

# c# - AppDomain.CurrentDomain.ProcessExit 不执行 Console.WriteLine

> ID：12341682
> 
> 赞同：1
> 
> 时间：2012-09-09T18:21:58.303
> 
> 标签：c#, appdomain

```
using System;
using System.IO;
using System.Runtime.Serialization.Formatters.Binary;

namespace empty
{
    class Program
    {
        static Program()
        {
            AppDomain.CurrentDomain.ProcessExit += ExitHandler;
        }
        static void Main(string[] args)
        {
        }
        static void ExitHandler(object o, EventArgs args)
        {
            using (FileStream fs = new FileStream("file.bin", FileMode.Create))
            {
                BinaryFormatter bf = new BinaryFormatter();
                bf.Serialize(fs, new double[30000000]);         
            }
            using (FileStream fs = new FileStream("file.bin", FileMode.Create))
            {
                BinaryFormatter bf = new BinaryFormatter();
                bf.Serialize(fs, new double[30000000]);
            }
            Console.WriteLine("end");
        }
    }
} 
```

我希望得到输出：“结束”但什么也得不到。我究竟做错了什么？

我故意使用 2 个序列化，因为 1 个序列化不会发生这种行为。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-09T18:49:08.213

如果您查看[的文档`ProcessExit`](http://msdn.microsoft.com/en-us/library/system.appdomain.processexit)，您会发现：

> 所有 ProcessExit 事件处理程序的总执行时间都是有限的，就像所有终结器的总执行时间在进程关闭时受到限制一样。默认值为两秒。

因此，如果您在该处理程序中执行的任何操作需要超过两秒钟，它就不会完全执行。这似乎正是您遇到的问题。

# linq - 使用 LINQ 根据所选字段获取不同的值

> ID：12341685
> 
> 赞同：0
> 
> 时间：2012-09-09T18:22:04.603
> 
> 标签：linq, linq-to-sql

我有下表

```
Members
    Id, GroupId, Age
    1,    1,     12
    2,    1,     20
    3,    1,     33
    4,    2,     12
    5,    2,     7 
```

如何编写一个 LINQ 查询，它会给我每个组中最老的成员的列表？

结果应该是

```
 Id, GroupId, Age
    3,    1,     33
    4,    2,     12 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T18:23:35.767

```
from m in members
group m by m.GroupId into g
select g.OrderByDescending(m => m.Age).First() 
```

# c# - 将包含 32 个条目的 byte[] 保存到 Metro Style App 中的 localSettings

> ID：12341687
> 
> 赞同：0
> 
> 时间：2012-09-09T18:22:12.303
> 
> 标签：c#, windows-8, microsoft-metro, bytearray

我想将一个包含 32 个条目的字节数组（它是一个解密的密码）保存到 localsettings。我没有收到错误，但是当我阅读它时，我只得到一个包含 18 个条目的字节数组！

为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T18:42:40.963

您正在“按原样”存储字节数组；但是您在获取它时使用 UTF8 对其进行编码，而不是您想要的。

这应该会更好；

```
byte[] passbyte = new byte[32];

// Store
localSettings.Values["password"] = passbyte;

// Fetch
var passwordsecure = localSettings.Values["password"] as byte[]; 
```

# c# - 创建一个 shell 命名空间扩展

> ID：12341692
> 
> 赞同：2
> 
> 时间：2012-09-09T18:23:00.470
> 
> 标签：c#, virtual-directory, virtual-disk

acronis 如何创建此虚拟文件夹。例如，我创建了`Example`位于以下位置的文件夹`C:\Example`的备份：备份的外观如下：

![在此处输入图像描述](../Images/efeab6ba0447804ac396be54a5e55c98.png)

**如果我双击该文件，那么我可以导航到：**

![在此处输入图像描述](../Images/ac55c6e510c071ed88dd9b4f942da206.png)

**如果我右键单击该文件夹，我将不会获得与目录一起获得的常规菜单。如果我双击该目录，那么我将导航到该文件夹​​的内容：**

![在此处输入图像描述](../Images/31dd1092bcbe8b0fd04c6b2078d9829a.png)

**请注意，我正在查看的内容位于不在 Windows 资源管理器上的文件中。**

我知道如果我将 VirtualDir.tib 发送给某人，他们将无法看到相同的内容，因为他们没有安装[acronis true 映像](http://www.acronis.com/homecomputing/products/trueimage/)。

我怎么能用 c# 做类似的事情？

* * *

## 编辑

**对不起，我刚刚更新了标题。如何使用 c# 创建一个 chell 命名空间扩展？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T18:45:34.337

要回答您关于是否可以在*C#*中完成的问题，答案是否定的。正如[此处](http://msdn.microsoft.com/en-us/library/windows/desktop/dd758089%28v=vs.85%29.aspx)明确指出的那样，完全不支持在托管代码中编写 shell 扩展。这是因为外壳扩展 DLL 可以加载到多个进程中，其中一些进程已经加载了另一个版本的 CLR。

# jquery - 具有闪烁效果的幻灯片

> ID：12341694
> 
> 赞同：1
> 
> 时间：2012-09-09T18:23:06.273
> 
> 标签：jquery

我有一个无限循环幻灯片，我正在寻找的结果是：闪烁的图像->几秒钟的空白->下一个闪烁的图像，...

@marcus-ekwall 解决方案几乎可以正常工作，但是第一张幻灯片显示的时间间隔很长而不是很短，然后循环正常。任何的想法？谢谢

```
$(function(){
$('.slideshow img:gt(0)').hide();
setInterval(function(){
    var $current = $('.slideshow :first-child').hide();
    var $next = $current.next('img');
    $current.appendTo('.slideshow');
    setTimeout(function(){ 
        $next.show();
    }, 1900);
}, 2000);
}); 
```

HTML：

```
<style type='text/css'>
    .slideshow { position:relative; }
    .slideshow img { position:absolute; left:0; top:0; }​
</style>

<body>
    <div class="slideshow">
        <img src="1.png" />
        <img src="2.png" />
        <img src="3.png" />
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T18:44:24.250

然后你需要在你的时间间隔内超时。像这样的东西：

```
$(function(){
    $('.slideshow img:gt(0)').hide();
    setInterval(function(){
        var $current = $('.slideshow :first-child').hide();
        var $next = $current.next('img');
        $current.appendTo('.slideshow');
        setTimeout(function(){ 
            $next.show();
        }, 150);
    }, 300);
}); 
```

我还将敦促您缓存选择器和图像位置以提高性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T19:19:34.400

## *[jsBin 演示](http://jsbin.com/opohip/10/edit)*

```
 var c=0, n=$('.slideshow img').length;

  var visibleTime  = 2000;
  var hiddenTime   = 200;
  function loop(){
      $('.slideshow img').hide().eq(c++%n).stop().delay(hiddenTime).fadeTo(100,1,function(){
           $(this).delay(visibleTime).fadeTo(100,0,loop);
      });
  }loop(); 
```

# python - 如何在不使用 shell=True 的情况下将子进程发送到后台

> ID：12341701
> 
> 赞同：0
> 
> 时间：2012-09-09T18:24:25.793
> 
> 标签：python, multithreading, shell, process, subprocess

我正在尝试编写 Python 脚本的一部分，该脚本会在 Linux 下为小型 Web 管理界面更改根 MySQL 密码。我遵循了关于更改 root 密码的官方 MySQL 文档，并提出了这个 shell 脚本，效果很好：

```
shopt -s xpg_echo
# stopping running MySQL server
invoke-rc.d mysql stop

# creating init file in a mysqld readable location
cat > /var/lib/mysql/mysql-init <<END
UPDATE mysql.user SET Password=PASSWORD('x123') WHERE User='root';
FLUSH PRIVILEGES;
END

# running mysqld_safe with init-file in the background
mysqld_safe --init-file=/var/lib/mysql/mysql-init &

sleep 5

# stopping mysql
invoke-rc.d mysql stop

# deleting the init file
rm /var/lib/mysql/mysql-init

# starting mysql
invoke-rc.d mysql start 
```

有一部分，我必须启动 mysqld_safe 并让它运行几秒钟，然后用 invoke-rc.d 很好地停止它。在 shell 脚本中，我可以用`&`and来解决它`sleep 5`。

我的问题是我不知道如何在**不使用 shell=True**的情况下在 Python 脚本中执行此操作。我可以使用 Popen 和 shlex.split(cmd) 完成所有其他部分，但是 & 似乎既没有通过 shlex.split(cmd) 也没有通过 shell=False。

这只是`&`命令行中的一个简单问题，还是我真的需要 shell=True 呢？如果没有，我需要使用线程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T18:53:00.693

我可能遗漏了一些东西，但是这样的东西不会起作用吗？

```
import time
import subprocess

p = subprocess.Popen(['mysqld_safe', '--init-file=/var/lib/mysql/mysql-init'])
time.sleep(5)
subprocess.call(['invoke-rc.d', 'mysql', 'stop']) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-09T18:29:06.020

`&`是一个shell的东西，所以，是的，如果你想`&`在后台运行命令，你需要shell。但是，您也可以完全在 Python 中执行此操作：

```
proc = subprocess.Popen(["mysqld_safe", "--init-file=/var/lib/mysql/mysql-init"])
time.sleep(5)
proc.kill() 
```

# javascript - OpenLayers LonLat 变换

> ID：12341702
> 
> 赞同：0
> 
> 时间：2012-09-09T18:25:04.820
> 
> 标签：javascript, openlayers

我想像 Google Maps 一样使用十进制 Lon 和 Lat。但似乎我需要在 OpenLayers 中转换 LonLat 对象，例如

```
 var map, layer;
    function init(){
        map = new OpenLayers.Map('map');
        layer = new OpenLayers.Layer.OSM( "Simple OSM Map");
        map.addLayer(layer);
        map.setCenter(
            new OpenLayers.LonLat(-1.60400390625, 54.07228265560386).transform(
                new OpenLayers.Projection("EPSG:4326"),
                map.getProjectionObject()
            ), 6
        ); 

        var markers = new OpenLayers.Layer.Markers( "Markers" );
        map.addLayer(markers);

        var size = new OpenLayers.Size(21,25);
        var offset = new OpenLayers.Pixel(0,0);
        var icon = new OpenLayers.Icon('http://www.openlayers.org/dev/img/marker.png', size, offset);
        markers.addMarker(new OpenLayers.Marker(new OpenLayers.LonLat(-1.60400390625, 54.07228265560386).transform(new OpenLayers.Projection("EPSG:4326"),map.getProjectionObject()),icon));           
    } 
```

每次我放置标记时，位置都需要转换为 EPSG:4326。有没有办法告诉地图总是使用这个投影？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T18:49:45.017

是否可以在地图上设置投影取决于您为基础图层使用的服务。据我所知，OSM 仅在 EPSG:900913 中提供其渲染图块，因此在将坐标添加到地图之前无法转换坐标。您可以搜索在多个投影中提供其图块的服务，但到目前为止我还没有看到可以免费使用的服务。另一种方法是在所需的投影中渲染您自己的图块，并通过您自己的图块服务器提供它们。

假设您有这样的地图，您可以使用[OpenLayers.Map.setOptions()](http://dev.openlayers.org/releases/OpenLayers-2.12/doc/apidocs/files/OpenLayers/Map-js.html#OpenLayers.Map.setOptions)更改投影，如下所示：

```
map.setOptions({
    projection: "EPSG:4326"
}); 
```

但是您可能还需要设置一些与投影相关的属性，例如`maxExtent`等。请参阅[此问题](https://stackoverflow.com/questions/11830260/openlayers-reprojection)。

# ruby-on-rails-3 - 我的表单没有使用 Jquery Validate + Rails Form 提交

> ID：12341703
> 
> 赞同：0
> 
> 时间：2012-09-09T18:25:15.923
> 
> 标签：ruby-on-rails-3, jquery-validate

我有一个表单可以在没有 jquery validate 的情况下正确提交，但没有 jquery validate。使用jquery validate，当字段少于6个字符时它正确显示，当它是6+时错误消失。但是，单击该按钮没有任何作用。验证脚本是：

```
<% content_for :head do %>
 <script type="text/javascript">
  $(document).ready(function () {
    alert("document ready");
    $("#new_hotel").validate({
        debug: true,
            rules: {
                "hotel[name]": {required: true, minlength: 6},
                    }
                            });
        }); 
```

我的表格是这样的：

```
<div class="modal-body">

<%= form_for @hotel do |f| %>

  <%= f.label :name %>
  <%= f.text_field :name%>

  <div class="modal-footer">
   <a class="btn" data-dismiss="modal" aria-hidden="true">Cancel</a>
 <%=  f.submit 'Create Hotel' , :class => 'btn btn-primary', :type => 'submit' %>
  </div>
 <% end %> 
```

# wordpress - 在没有插件的 Wordpress 中添加预定义的自定义字段

> ID：12341706
> 
> 赞同：2
> 
> 时间：2012-09-09T18:25:57.707
> 
> 标签：wordpress

有了 WP3+、自定义分类法、自定义帖子类型的新可能性，有没有一种方法可以在不使用插件的情况下创建一个自定义字段，该字段有或没有预定义值可供选择？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T02:11:20.233

也许您需要查看自定义元框....

您可以在自己的单独框中完全控制特定帖子的额外数据。

法典链接：

[add_meta_box - 文档 - WordPress](http://codex.wordpress.org/Function_Reference/add_meta_box)

您需要连接到“save_post”操作挂钩来保存您的自定义数据。

# windows - Windows 应用商店应用程序和本机桌面应用程序之间的通信

> ID：12341707
> 
> 赞同：21
> 
> 时间：2012-09-09T18:26:00.933
> 
> 标签：windows, microsoft-metro, windows-runtime, communication

**！为了简化起见，我将*Windows Store 应用程序*（也称为 Metro 或 Modern UI）称为“应用程序”，将常见的*桌面应用程序*称为“应用程序”！**

我相信对于已经在市场上建立应用程序的开发人员来说，这仍然是关于应用程序开发最不清楚但最重要的问题之一：如何在 Windows 8 系统上管理应用程序和应用程序之间的通信？（请不要就原则展开辩论 - 有很多用例确实需要这样做！）

在过去的几天里，我基本上阅读了数百篇文章，但仍然不清楚如何从第一次开始就继续这样做。主要是因为我发现了几个相互矛盾的信息。带着我的问题，我想从最终的 Windows 8 可能性的角度重新解决这个问题。

**给定情况：**

*   应用程序和应用程序在同一系统上运行
*   1:1交流
*   应用程序是本机的（用 Delphi 编写）
*   管理员或如果需要，甚至系统权限可用于应用程序
*   在 90% 的用例中，应用程序请求应用程序执行一个操作并接收一些文本结果。该应用程序不应该因此而被留下或冻结！
*   在 10% 的情况下，应用程序执行一个操作（由某个事件触发）并通知应用程序 - 结果可能是：在磁贴上或在已经运行和活动的应用程序中显示某些信息，或者如果可能运行应用程序/将其带到前台.

**现在“简单”的问题是，如何实现这一目标？**

*   现在实际上允许本地网络服务器访问吗？（我相信这不是很长时间，但现在是自最终版本以来）
*   WCF？（-> 显然[MS 不再推荐了](http://msdn.microsoft.com/en-us/library/hh556233.aspx)）
*   本地 REST/SOAP 服务器上的 HTTP 请求？
*   [WinRT 联合 API](http://msdn.microsoft.com/en-us/library/windows/apps/windows.web.syndication)？（另一种带有 RSS/atom 响应的 Web 服务访问形式）
*   [WebSockets](http://msdn.microsoft.com/en-us/library/windows/apps/br212061.aspx)（如[MessageWebSocket](http://msdn.microsoft.com/en-us/library/windows/apps/windows.networking.sockets.messagewebsocket.aspx)）？
*   其他形式的 TCP/IP 通信？
*   为输入和输出共享一个文本文件（实际上只是想到这会很痛苦，但至少这是 MS 无法阻止的可能性......）
*   命名管道是不允许的，对吧？

SO上有一些关于这个主题的讨论，但是其中大多数都不再是最新的了，因为MS在发布Windows 8的最终版本之前发生了很多变化。我不想混淆新旧信息为我和所有其他 Windows 应用程序和应用程序开发人员找到此问题的明确且最新的答案。谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-09T19:50:35.903

如果您正在谈论进入 Store 的应用程序，则不允许通过任何机制与本地系统进行通信。在某些调试场景中支持与本地系统的通信，以使应用程序开发更容易。

您可以使用文件或协议处理程序从 Windows 应用商店应用程序启动桌面应用程序，但没有直接通信。

因此，重申这一点...... WinRT 和桌面之间的通信对于已发布的 Windows 应用商店应用程序是不允许的。仅在调试时允许两个环境之间的通信。

PG 在不同的地方发布了不允许通信的原因，从安全性到 WinRT 生命周期（即，您的应用程序被暂停 - 如何处理：资源、套接字、远程应用程序等） - 很多故障点）以及商店应用程序不能依赖于外部程序的事实（即，我需要您的本地桌面应用程序/服务才能运行该应用程序，但是如何安装您的应用程序/服务？您不能集成到Store 应用程序。您可以提供另一个 Store 桌面应用程序条目，但这是一种糟糕的用户体验。）当然，这些都是高级摘要。

# javascript - 每次点击后元素 ID 加一？

> ID：12341710
> 
> 赞同：1
> 
> 时间：2012-09-09T18:26:21.030
> 
> 标签：javascript, jquery

我正在尝试使用 jQuery`.clone()`方法在我的页面上克隆多个 div。问题是，一旦 div 被克隆，它就需要有一个唯一的 ID。克隆的 ID 也必须在那里。我在想我可以保留旧的 ID，然后添加一个数字，随着页面上更多的 div 的增加而增加。

示例：基本 ID = 1，因此 div 1 为`id`，然后 div 2 为`id-2`，然后 div 3 为，以此类推`id-3`。

这可能吗？我的尝试如下：

```
$("a").click(function(){
        var target = $(this).attr("href");
        var id = $(target).attr("id");
        $(target).clone().attr("id",id + $(id).size()).attr("class","drag").appendTo("body");
}); 
```

每个`a`标签如下所示：

```
<a href="#one">One</a>
<a href="#two">Two</a> 
```

然后克隆的元素如下所示：

```
<div class="drag base" style="background-color:blue" id="one"></div>
<div class="drag base" style="background-color:green" id="two"></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T18:44:27.003

看到这个：http: [//jsfiddle.net/3tu7V/1/](http://jsfiddle.net/3tu7V/1/)

```
$(function(){
    $("a").click(function(){
            var target = $(this).attr("href");
            var id = $(target).attr("id"); 
            var click = $(target).data("clicked") || 0;
            $(target).data("clicked", ++click);            
            $(target).clone().attr("id",id + click).attr("class","drag").appendTo("body");

    });
});
​ 
```

根据您的评论，我认为这可以满足您的要求：“啊，当基本 ID 唯一时，有没有办法重置元素 ID？例如。）“如果你克隆 div “one”，它将产生“one -1”，然后是“one-2”，但是如果你再克隆 div “two”，它将产生“two-3”，而不是“two-1””

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T18:30:47.140

修改后的答案：

您可以使用[以 selector 开头的 jQuery 属性](http://api.jquery.com/attribute-starts-with-selector/)来跟踪克隆及其计数：

```
$("a").click(function() {
    var targetId = $(this).attr("href").substring(1); // "one", "two"
    var count = $("div[id^=" + targetId + "]").length; // initial value will be 1
    $("#" + targetId).clone().attr("id", targetId + '-' + count).attr("class", "drag").appendTo("body");
}); 
```

# [演示](http://jsfiddle.net/WsLWj/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T18:31:06.077

我认为在您的情况下 $(id).size() 将始终 = 2。（只有最后一个及其克隆将具有相同的 id）为什么不使用`var clickNumber`每次递增的全局变量。你的代码将是

```
var clickNumber = 0;    
$("a").click(function(){
        var target = $(this).attr("href");
        var id = $(target).attr("id");
        clickNumber ++;
        $(target).clone().attr("id","id-" + clickNumber).attr("class","drag").appendTo("body");
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-09T18:31:11.227

看这个活生生的[例子](http://jsfiddle.net/SjtAE/)

```
var increment = 2;

$('a').live('click', function() {
    $(this).clone().attr('id','id-' + (increment++)).appendTo('body');
});​ 
```

结果：

![在此处输入图像描述](../Images/698851c48de80a908653583ccc04371d.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-09T18:44:53.387

你可以这样做：

```
$('a').addClass('link');
$('body').on('click', 'a', function() {
    $(this).clone(true).attr('id', 'id-' + $('.link').length).appendTo('body');
});​ 
```

**演示：http: [//jsfiddle.net/Em8PE/1/](http://jsfiddle.net/Em8PE/1/)**

# java - 创建传递的 Class.class 参数的新实例

> ID：12341711
> 
> 赞同：4
> 
> 时间：2012-09-09T18:26:21.727
> 
> 标签：java, oop, class

假设我有一个函数，其目的是创建任何指定类的新实例，然后返回它。也许是这样的：

```
public static <T> Class<T> forgeClass(Class<T> classReference) {

    return new classReference.getClass();

} 
```

用法（带`Employee`类）：

```
Employee foo = forgeClass(Employee.class); // new Employee instance 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T18:28:22.483

关键是用[`Class.newInstance`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#newInstance%28%29)；

```
public static <T> T forge(final Class<T> type)
    throws InstantiationException, IllegalAccessException {
  return type.newInstance();
} 
```

使用如下...

```
final Employee employee = forge(Employee.class); 
```

如果您想使用更复杂的初始化例程，例如`Employee(String name)`，您应该使用[`Class.getConstructor`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getConstructor%28java.lang.Class...%29), 后跟[`Constructor.newInstance`](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Constructor.html#newInstance%28java.lang.Object...%29).

```
final Constructor ctor = Employee.class.getConstructor(String.class);
final Employee employee = ctor.newInstance("Steve"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T18:29:48.600

您可以使用[`Class.newInstance()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#newInstance%28%29)method 并且您的方法的返回类型应该是`T`而不是`Class<T>`.

```
public static <T> T forgeClass(Class<T> classReference) throws InstantiationException, IllegalAccessException {
    return classReference.newInstance();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T18:28:51.777

只需使用[`newInstance()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#newInstance%28%29)：

```
Class<?> yourClass;
return yourClass.newInstance(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T18:32:15.370

[Class.newInstance()](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#newInstance%28%29)正是您所需要的：

```
public static <T> T forgeClass(Class<T> classReference) throws InstantiationException, IllegalAccessException {
    return classReference.newInstance();
} 
```

如果要将参数传递给构造函数，则必须使用[`java.lang.reflect.Constructor<T>`](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Constructor.html)：

```
public static <T> T forgeClass(Class<T> classReference, Object... constructorArguments)
        throws InstantiationException, IllegalAccessException, SecurityException,
        NoSuchMethodException, IllegalArgumentException, InvocationTargetException {
    Class<?>[] argumentTypes = new Class<?>[constructorArguments.length];
    for (int i = 0; i < constructorArguments.length; i++)
        argumentTypes[i] = constructorArguments[i].getClass();
    Constructor<T> ctor = classReference.getConstructor(argumentTypes);
    return ctor.newInstance(constructorArguments);
} 
```

编辑：正如评论中所指出的，如果您在参数中传递子类，此代码将不起作用

# java - 片段和异步任务

> ID：12341712
> 
> 赞同：3
> 
> 时间：2012-09-09T18:26:39.157
> 
> 标签：java, android, android-fragments

由于片段可以随时从活动中脱离，并且如果您调用`getActivity()`或`getView()`在执行后或接收到广播时，您可以获得空指针。进行此操作的正确方法是什么？

保留对视图的引用`onCreateView()`并在生命周期调用中更新它们？每次检查 getActivity() 是否返回非空引用？使用 isAdded()？

有没有什么地方我可以确定 getActivity() 方法返回的不是非空值？像在 onCreate / onResume 等内？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T18:36:35.257

好吧，我想这很明显，但是在它可以为空的情况下，请检查是否为空。否则，尝试使用`onAttach(Activity)`Fragment 与 Activity 关联时调用的哪个。显然，那里的 Activity 不会为空。

# ruby - EventMachine 非常慢

> ID：12341718
> 
> 赞同：1
> 
> 时间：2012-09-09T18:27:09.500
> 
> 标签：ruby, eventmachine

是否有任何理由在我的应用程序中，该`send_data`方法非常滞后？我的 telnet（许多其他客户端测试结果相同）窗口等待 1-2 秒，然后显示发送的数据。

以下应用程序没有延迟：

```
require 'eventmachine'

class AreaServer < EventMachine::Connection
  attr_accessor :options, :status

  def receive_data(data)
    send_data("I got: #{data}\r\n")
  end
end

EM.run do
  EM.start_server '192.168.0.199', 4000, AreaServer do |conn|
    conn.options = {:my => 'options'}
    conn.status = :OK
  end
end 
```

所以我怀疑这不是网络问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T18:57:23.437

似乎输出流在写入后保持打开状态，因此我试图找到关闭此流的解决方案。

如果您写入`close_connection_after_writing`，`receive_data`则流将在写入后关闭。我想你应该关闭 keep_alive 选项。

```
类 AreaServer < EventMachine::Connection
  attr_accessor :options, :status

  def 接收数据（数据）
    send_data("我得到了：#{data}\n")
    close_connection_after_writing
  结尾
结尾

```

# struts2 - 将属性动态添加到 struts2 UI 标签

> ID：12341719
> 
> 赞同：3
> 
> 时间：2012-09-09T18:27:50.310
> 
> 标签：struts2, attributes

有没有办法将属性动态添加到 struts 2，标记 UI 标记，例如文本字段？

原因是我想将`readOnly`表单字段属性添加到 中`<s:textfield/>`，具体取决于操作的方法结果。我不能使用`readOnly="%{isReadOnly()}"`，因为一旦定义了属性，表单元素就是只读的，不管它有什么值。并且将每个表单字段包装到一个`<s:if/>`标签中非常麻烦，并且会导致大量代码重复。

出于互操作性和不依赖浏览器脚本设置的原因，我还想避免使用 JavaScript。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T00:15:46.927

如果问题是使用内置的 struts2 功能，那么一个简单的选择是使用 freemarker 呈现您的视图，它很容易支持动态添加属性。

如果您使用约定，这非常简单，您只需要创建一个扩展名为“.ftl”的文件，如果您使用 xml，只需使用 freemarker 结果类型也很容易（更多描述请参见[此处](http://struts.apache.org/2.3.4.1/docs/Freemarker%20Support.html)）：

```
<action name="test" class="package.Test">
  <result name="success" type="freemarker">/WEB-INF/content/testView.ftl</result>
</action> 
```

这是使用地图动态添加属性的示例视图（示例也取自喜欢的页面）：

```
<@s.textfield name="test" dynamicAttributes={"placeholder":"input","foo":"bar"}/> 
```

dynamicAttributes 在所有 JSP UI 标记中都非常有用，可惜目前还没有实现。

**注意**：以上链接中有一处错误/遗漏。它告诉您添加以下行，这会在我的环境中导致错误（只是不需要该行）。

```
<#assign s=JspTaglibs["/WEB-INF/struts.tld"] /> 
```

也就是说，文件中的这一行*本身*就足以呈现文本元素，不需要显式的标记库声明！

```
<@s.textfield name="test" dynamicAttributes={"placeholder":"input","foo":"bar"}/> 
```

与普通的 JSP 相比，使用 freemarker 有许多优点，因此花点时间研究一下语法并在这种情况下使用它可能会在以后证明是有用的。

# c# - 访问可能不可用的第 3 方课程

> ID：12341722
> 
> 赞同：4
> 
> 时间：2012-09-09T18:27:51.220
> 
> 标签：c#, class

我需要访问可能可用或不可用的第三方类。我们该如何处理这样的情况？

例如：

类*ThirdPartyClass*可能可用也可能不可用。它有一个静态变量*myInt*。

```
int someInt;
if(ThirdPartyClass is available) // pseudo-code
{
  someInt = ThirdPartyClass.myInt;
} else {
  someInt = 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-09T18:30:48.657

你基本上是在谈论反射。我假设我们不需要尝试自动发现程序集。

您可以按照以下方式执行此操作：

```
Type t = Type.GetType("<fullyqualifiedname>.ThirdPartyClass", false)
if (t != null) 
{
    FieldInfo fi = t.GetField("myInt", BindingFlags.Public | BindingFlags.Static);
    someInt = (int)fi.GetValue(null);
}
else
    someInt = 0; 
```

# asp.net - 在 ITextSharp 中更改文档字体大小

> ID：12341724
> 
> 赞同：2
> 
> 时间：2012-09-09T18:28:03.757
> 
> 标签：asp.net, vb.net, itextsharp, font-size

我有这个在 .pdf 文件中生成表格的小脚本，但文本太大。如何为其添加其他字体大小/类型？

```
Dim form As New HtmlForm

form.Controls.Add(gvEvents)
Dim sw As New StringWriter
Dim htmlWriter As New HtmlTextWriter(sw)
Dim htmlContent As String = sw.ToString()

Response.ContentType = "application/pdf"
Response.AddHeader("content-disposition", "attachment;filename=Holdkalender.pdf")
Response.Cache.SetCacheability(HttpCacheability.NoCache)

form.Controls(0).RenderControl(htmlWriter)
Dim sr As New StringReader(sw.ToString())
Dim pdfDoc As New Document(PageSize.A4, 50, 50, 50, 50)
Dim htmlparser As New HTMLWorker(pdfDoc)
PdfWriter.GetInstance(pdfDoc, Response.OutputStream)
pdfDoc.Open()
htmlparser.Parse(sr)
pdfDoc.Close()
Response.Write(pdfDoc)
Response.End() 
```

**编辑：**

我已经尝试过了，但它给了我一个 Ielement 错误：

```
Protected Sub btnGeneratePDF_Click(ByVal sender As Object, ByVal e As EventArgs) Handles btnGeneratePDF.Click
BindEvents(Convert.ToInt32(ddlEventSize.SelectedValue))
Dim form As New HtmlForm

form.Controls.Add(gvEvents)
Dim sw As New StringWriter
Dim htmlWriter As New HtmlTextWriter(sw)
Dim htmlContent As String = sw.ToString()
Response.ContentType = "application/pdf"
Response.AddHeader("content-disposition", "attachment;filename=Holdkalender.pdf")
Response.Cache.SetCacheability(HttpCacheability.NoCache)

form.Controls(0).RenderControl(htmlWriter)
Dim sr As New StringReader(sw.ToString())
Dim pdfDoc As New Document(PageSize.A4, 50, 50, 50, 50) 'Paper Size and margin
Dim htmlparser As New HTMLWorker(pdfDoc)
PdfWriter.GetInstance(pdfDoc, Response.OutputStream)
pdfDoc.Open()
Dim ftlbl As Font = Nothing
ftlbl = FontFactory.GetFont(FontFactory.HELVETICA, 5)
pdfDoc.Add(ftlbl)
Try
    htmlparser.Parse(sr)
Catch ex As Exception
    'Display parser errors in PDF.
    Dim paragraph As New Paragraph("FEJL!" + ex.Message)
    Dim text As Chunk = TryCast(paragraph.Chunks(0), Chunk)
    If text IsNot Nothing Then
        text.Font.Color = BaseColor.RED
    End If
    pdfDoc.Add(paragraph)
Finally
    pdfDoc.Close()
    Response.Write(pdfDoc)
    Response.End()
End Try

End Sub 
```

**编辑2：**

![在此处输入图像描述](../Images/b60faa4dff220da348a9d6f2cebd6bfa.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T22:23:47.353

你可以使用这样的东西来给你的表格标题提供格式

**编辑**

```
//add a Paragraph to the document with an specify format
 Dim TableFont   = FontFactory.GetFont("Arial", 12, Font.BOLD)

 pdfDoc.Open()  
 pdfDoc.Add(New Paragraph(sr.ReadToEnd(),TableFont) 
```

# asp.net-mvc - 是否可以/正确在一页中以 2 种不同形式使用多个 @Html.AntiForgeryToken()？

> ID：12341725
> 
> 赞同：11
> 
> 时间：2012-09-09T18:28:06.563
> 
> 标签：asp.net-mvc, json, asp.net-mvc-3, jquery, antiforgerytoken

我一直面临着严重的问题`@Html.AntiForgeryToken()`。我有一个注册控制器，它有一个创建视图来创建/注册新成员。出于这个原因，我`@Html.AntiForgeryToken()`在我的主要提交表单中使用了 a 而没有使用任何 SALT。现在我想验证用户名是否已经存在于我的用户名文本框的模糊事件的数据库中。对于这个验证，我编写了一个名为“Validation”的新控制器，并编写了一个带有常量验证 SALT 的方法：

```
 [HttpPost]
    [ValidateAntiForgeryToken(Salt = @ApplicationEnvironment.SALT)]
    public ActionResult username(string log) {
        try {
            if (log == null || log.Length < 3)
                return Json(log, JsonRequestBehavior.AllowGet);

            var member = Membership.GetUser(log);

            if (member == null) {
                //string userPattern = @"^([a-zA-Z])[a-zA-Z_-]*[\w_-]*[\S]$|^([a-zA-Z])[0-9_-]*[\S]$|^[a-zA-Z]*[\S]$";
                string userPattern = "[A-Za-z][A-Za-z0-9._]{3,80}";
                if (Regex.IsMatch(log, userPattern))
                    return Json(log, JsonRequestBehavior.AllowGet);
            }

        } catch (Exception ex) {
            CustomErrorHandling.HandleErrorByEmail(ex, "Validate LogName()");
            return Json(log, JsonRequestBehavior.AllowGet);
        }
        //found e false
        return Json(log, JsonRequestBehavior.AllowGet);

    } 
```

方法工作正常。我检查了没有的 HTTP Get 注释`[ValidateAntiForgeryToken]`，它给了我预期的结果。

我用谷歌搜索并检查了许多给定的解决方案，但这些都不起作用。对于我的验证控制器，我在同一页面中使用了另一个表单，并在防伪令牌中使用了 SALT。

**示例**：主提交表单的第一个防伪令牌：

> @using (Html.BeginForm("Create", "Register")) { @Html.AntiForgeryToken() @Html.ValidationSummary(true) ... }

第二个防伪令牌：

```
<form id="__AjaxAntiForgeryForm" action="#" method="post">
    @Html.AntiForgeryToken(SALT)
</form> 
```

在javascript中我使用了这个

```
<script type="text/javascript" defer="defer">
    $(function () {
        AddAntiForgeryToken = function (data) {
            data.__RequestVerificationToken = $('#__AjaxAntiForgeryForm input[name=__RequestVerificationToken]').val();
            return data;
        };

        if ($("#LogName").length > 0) {

            $("#LogName").blur(function () {
                var user = $("#LogName").val();
                var logValidate = "/Validation/username/";
                //var URL = logValidate + user;
                //var token = $('#validation input[name=__RequestVerificationToken]').val();
                data = AddAntiForgeryToken({ log: user });

                $.ajax({
                    type: "POST",
                    dataType: "JSON",
                    url: logValidate,
                    data: data,
                    success: function (response) {
                        alert(response);
                    }
                });

            });

        }
    });
</script> 
```

在我的萤火虫中，我得到了这个：

```
log=admin&__RequestVerificationToken=NO8Kds6B2e8bexBjesKlwkSexamsruZc4HeTnFOlYL4Iu6ia%2FyH7qBJcgHusekA50D7TVvYj%2FqB4eZp4VDFlfA6GN5gRz7PB%2ByZ0AxtxW4nT0E%2FvmYwn7Fvo4GzS2ZAhsGLyQC098dfIJaWCSiPcc%2FfD00FqKxjvnqmxhXvnEx2Ye83LbfqA%2F4XTBX8getBeodwUQNkcNi6ZtAJQZ79ySg%3D%3D 
```

已通过，但在 cookie 部分中，我得到的 cookie 与传递的 cookie 不同：实际 Cookie：

```
ws5Dt2if6Hsah rW2nDly P3cW1smIdp1Vau 0TXOK1w0ctr0BCso/nbYu w9blq/QcrXxQLDLAlKBC3Tyhp5ECtK MxF4hhPpzoeByjROUG0NDJfCAlqVVwV5W6lw9ZFp/VBcQmwBCzBM/36UTBWmWn6pMM2bqnyoqXOK4aUZ4= 
```

我认为这是因为我在一页中使用了 2 个防伪令牌。但在我看来，我应该使用 2，因为第一个是为提交生成而下一个是需要验证验证。但是，这是我的猜测，我认为我错了，因此我需要你们的帮助。

谁能解释一下我应该使用两个防伪还是一个？

谢谢大家....

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-09T19:45:01.663

最后8个小时的挣扎给了我一个解决方案。

首先，是的，在页面中使用 2 个防伪令牌没有害处。其次，无需将 cookie 与提供令牌匹配。提供令牌将始终不同，并将在服务器中进行验证。

**如果我们使用动作动词**，则防伪令牌**不起作用`[HttpGet]`**..因为在防伪的验证过程中，通过 `Request.Form['__RequestVerificationToken']`从请求中检索值来验证令牌。参考：[史蒂文桑德森的博客：防止交叉...](http://blog.stevensanderson.com/2008/09/01/prevent-cross-site-request-forgery-csrf-using-aspnet-mvcs-antiforgerytoken-helper/)

**解决方案**：

我的修改控制器：

```
[HttpPost]

        [ValidateAntiForgeryToken(Salt = @ApplicationEnvironment.SALT)]
//change the map route values to accept this parameters.
        public ActionResult username(string id, string __RequestVerificationToken) {
        string returnParam = __RequestVerificationToken;

        try {
            if (id == null || id.Length < 3)
                return Json(returnParam, JsonRequestBehavior.AllowGet);

            var member = Membership.GetUser(id);

            if (member == null) {
                //string userPattern = @"^([a-zA-Z])[a-zA-Z_-]*[\w_-]*[\S]$|^([a-zA-Z])[0-9_-]*[\S]$|^[a-zA-Z]*[\S]$";
                string userPattern = "[A-Za-z][A-Za-z0-9._]{3,80}";
                if (Regex.IsMatch(id, userPattern))
                    return Json(returnParam, JsonRequestBehavior.AllowGet);
            }

        } catch (Exception ex) {
            CustomErrorHandling.HandleErrorByEmail(ex, "Validate LogName()");
            return Json(returnParam, JsonRequestBehavior.AllowGet);
        }
        //found e false
        return Json(returnParam, JsonRequestBehavior.AllowGet);
    } 
```

我在同一页面中的第一个表单：

```
@using (Html.BeginForm("Create", "Register")) {

    @Html.AntiForgeryToken(ApplicationEnvironment.SALT)

    @Html.ValidationSummary(true)
    ....
} 
```

我在同一页面中的第二个表格：

```
**<form id="validation">
    <!-- there is harm in using 2 anti-forgery tokens in one page-->
    @Html.AntiForgeryToken(ApplicationEnvironment.SALT)
    <input type="hidden" name="id" id="id" value="" />
</form>** 
```

我的 jQuery 来解决这个问题：

```
 $("#LogName").blur(function () {
            var user = $("#LogName").val();
            var logValidate = "/Validation/username/";
            $("#validation #id").val(user);
            **var form = $("#validation").serialize(); // a form is very important to verify anti-forgery token and data must be send in a form.**

            var token = $('input[name=__RequestVerificationToken]').val();

            $.ajax({
                **type: "POST", //method must be POST to validate anti-forgery token or else it won't work.**
                dataType: "JSON",
                url: logValidate,
                data: form,
                success: function (response) {
                    alert(response);
                }
            });
        }); 
```

# html - 渐变不适用于 IE，但在其他任何地方都可以使用

> ID：12341728
> 
> 赞同：0
> 
> 时间：2012-09-09T18:28:36.813
> 
> 标签：html, css, internet-explorer, gradient

我的渐变适用于 Firefox、Opera、Safari 等，但不适用于 IE。

我的代码如下有人可以帮助我：

```
background-image: -webkit-gradient(linear, left bottom, left top, color-stop(0, #b49931), color-stop(0.5, #5E5E5E), color-stop(0.51, #707070), color-stop(1, #838383)); 
background-image: -moz-linear-gradient(center bottom, #b49931 0%, #5E5E5E 50%, #707070 51%, #838383 100%); //FF 
background-image: -ms-linear-gradient(center bottom, #b49931 0%, #5E5E5E 50%, #707070 51%, #838383 100%); //IE 
background-image: -0-linear-gradient(center bottom, #b49931 0%,#5E5E5E 50%, #707070 51%, #838383 100%); //opera 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T18:36:42.580

```
filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#cccccc', endColorstr='#000000'); 
```

# java - 从 url 下载文件时出错

> ID：12341743
> 
> 赞同：0
> 
> 时间：2012-09-09T18:30:48.537
> 
> 标签：java, android, eclipse

我正在尝试从 url 读取文件并将其设为`File`类型。

下面是代码

```
public File fileFromUrl(String str) throws IOException
      {
          File file = new File ("image.png");
          URL url = new URL (str);
            InputStream input = url.openConnection().getInputStream();
            try {

                OutputStream output = new FileOutputStream (file);
                try {
                    byte[] buffer = new byte[1024];
                    int bytesRead = 0;
                    while ((bytesRead = input.read(buffer, 0, buffer.length)) >= 0) {
                        output.write(buffer, 0, bytesRead);
                    }
                } finally {
                    output.close();
                }
            } finally {
                input.close();
            }
          return file;
      } 
```

但是我遇到错误 `OutputStream output = new FileOutputStream (file);`

请告诉我我该怎么`File`做`url`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T18:39:34.180

如果您发布了您得到的异常，这会很有帮助，但我猜您没有对您尝试在其中创建输出文件的当前工作目录的写入权限。

如果您想查看它尝试写入文件的位置，请将此诊断信息添加到您的程序中：

```
System.out.println(
  "Absolute path of image.png: <" + file.getAbsolutePath( ) + ">"
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T18:47:51.203

美好的。而不是`File file = new File ("image.png");`使用文件的绝对路径。像`File file = new File ("<absolute-path-from-root-directory>");`

# c - C中结构的实例化？

> ID：12341745
> 
> 赞同：0
> 
> 时间：2012-09-09T18:31:05.883
> 
> 标签：c, struct

所以我现在正在尝试学习 C，并且我有一些基本的结构问题想要解决：

基本上，一切都围绕着这段代码：

```
#include <stdio.h>
#include <stdlib.h>

#define MAX_NAME_LEN 127

const char* getName(const Student* s);
void setName(Student* s, const char* name);
unsigned long getStudentID(const Student* s);
void setStudentID(Student* s, unsigned long sid);

int main(void) {
    Student sarah;
    const char* my_name = "Sarah Spond";
    setName(&sarah, my_name);
    printf("Name is set to %s\n", sarah.name);
}

typedef struct {
    char name[MAX_NAME_LEN + 1];
    unsigned long sid;
} Student;

/* return the name of student s */
const char* getName (const Student* s) { // the parameter 's' is a pointer to a Student struct
    return s->name; // returns the 'name' member of a Student struct
}

/* set the name of student s
If name is too long, cut off characters after the maximum number of characters allowed.
*/
void setName(Student* s, const char* name) { // 's' is a pointer to a Student struct |     'name' is a pointer to the first element of a char array (repres. a string)
    int iStringLength = strlen(name);
    for (i = 0; i < iStringLength && i < MAX_NAME_LEN; i++) {
        s->name[i] = name[i];
}   
}

/* return the SID of student s */
unsigned long getStudentID(const Student* s) { // 's' is a pointer to a Student struct
    return s->sid;
}

/* set the SID of student s */
void setStudentID(Student* s, unsigned long sid) { // 's' is a pointer to a Student struct | 'sid' is a 'long' representing the desired SID
    s->sid = sid;
} 
```

但是，当我尝试编译程序时，我收到一堆错误，说有一个“未知类型名称 Student”。我究竟做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T18:32:06.087

将类型定义移动到`Student`-`typedef ..`之后`#define MAX_NAME_LEN 127`，即在它被引用之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T18:33:23.690

您需要将`Student`结构的声明移到其他代码第一次引用它的上方 - 否则这些函数将不知道它是什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T18:33:35.080

结构声明需要在使用之前定义，所以你需要移动你的 Student

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T18:34:08.637

正如 cnicutar 所说，移动 typedef - 这样做的原因是在使用之前必须知道类型。或者，您可以转发声明类型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-09T18:50:49.470

```
> Move the typedef .. right after #define MAX_NAME_LEN 127, i.e. before
> it's being used.

OR, if you want to keep your definition after, and if you are ready to use a pointer to Student, you can:

#include <stdio.h> 
#include <stdlib.h> 

#define MAX_NAME_LEN 127 

// forward declare Student ici
struct Student;

//...

// in main, use a pointer to student
int main(void) { 
    Student *sarah;                             // Changed to pointer
    const char* my_name = "Sarah Spond"; 
    setName(sarah, my_name);                    // Pass the pointer instead of reference
    printf("Name is set to %s\n", sarah->name); // Use the pointer

    //....
    delete sarah;                               // delete object when done
} 

// Change struct decl to the following          // can't explain the diff yet
struct Student {  
    char name[MAX_NAME_LEN + 1];  
    unsigned long sid;  
}; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-09T18:52:12.133

C程序的基本结构是：

```
//======DOCUMENT SECTION=========
//File:test.c
//Author:
//Description:
//...
//================================

//====INCLUDE SECTION=============
#include "lib1"
#include <lib2>
//================================

//========DEFINITIONS SECTION=====

#define TRUE 1
#define FALSE 0

//================================

//========STRUCTURES SECTION======
struct P{
};
//================================

//========TYPEDEFS SECTION========
typedef *P P;
//================================

//========FUNCTION HEADERS========
void foo1(...);
int foo2(...,...,...);
//================================

//=========GLOBAL VARIABLES=======
int GLOBAL_INT;
float GLOBAL_FLOAT;
//================================ 

//=====MAIN FUNCTION DEFINITION===
void main(void)
{
    ...
    ...
    ...
}
//=================================

//======FUNCTIONS DEFINITION======
void foo1(...)
{
}

int foo2(...,...,...)
{
}
//================================ 
```

main 函数是 C 程序开始的地方。主函数通常还可以访问程序执行时提供给程序的命令参数。

通常你有：

```
int main(void);
int main();

int main(int argc, char **argv);
int main(int argc, char *argv[]); 
```

# ios - iOS 指南、Twitter 集成、网络活动状态栏

> ID：12341752
> 
> 赞同：1
> 
> 时间：2012-09-09T18:31:22.557
> 
> 标签：ios, xcode, twitter, statusbar, ios5.1

我将 iOS 5 Twitter 功能添加到应用程序中。应用程序设计是“没有”状态栏。苹果的指导方针说，具有网络的应用程序不应隐藏状态栏，因为有关网络活动的信息。

使用 twitter 集成隐藏状态栏是拒绝的理由吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T09:26:17.830

我遇到了类似的问题。不用担心，如果您的应用程序根本没有状态栏，那很好。它不会让您的应用程序被拒绝。

问题是您的应用程序不应该有不一致的行为。这就是苹果人恼火的地方。

祝你的应用程序好运:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T09:11:12.007

您总是可以通过自己添加某种网络活动指示器来缓解它。无论如何，状态栏中的指示器不会自动触发。

# f# - 将 OCaml 转换为 F#：类型和类型推断之间的差异

> ID：12341767
> 
> 赞同：8
> 
> 时间：2012-09-09T18:32:24.613
> 
> 标签：f#, ocaml, type-inference, typing

在研究F# 和 OCaml 之间的[类型推断](http://en.wikipedia.org/wiki/Type_inference)差异时，我发现他们倾向于关注[主格](http://en.wikipedia.org/wiki/Nominative_type_system)类型系统与[结构](http://en.wikipedia.org/wiki/Structural_type_system) [类型系统](http://en.wikipedia.org/wiki/Type_system)。然后我发现[了函数式编程语言的独特特征，](http://flyingfrogblog.blogspot.com/2010/12/distinctive-traits-of-functional.html)其中将类型和类型推断列为不同的特征。

由于特征文章说 OCaml 和 F# 都使用我认为是标准算法的[Damas-Milner](http://en.wikipedia.org/wiki/Hindley%E2%80%93Milner)类型推断，即不允许变化的算法，这两个特征如何关联？是不是 Damas-Milner 是构建两个类型推理系统的基础，但它们每个都根据类型修改 Damas-Milner？

我还检查了 Damas、Milner 和 Hindley 的 F# 源代码，但没有找到。搜索推断一词出现了类型推断的代码。

如果是这样，是否有任何论文讨论特定语言的每种类型推理算法的细节，或者我是否必须查看[OCaml](http://caml.inria.fr/download.en.html)和[F#](https://github.com/fsharp/fsharp)的源代码。

编辑

这是一个突出显示与 OCaml 和 F# 之间的类型推断相关的差异的[页面。](http://www.cs.ioc.ee/~keiko/FSharp.html)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T12:04:27.460

关于你的 DM 问题，你是对的。对于 F# 和 OCaml，DM 算法只是一种模式。类型检查器已扩展为支持自定义功能。在 OCaml 中，这些特性包括具有行类型、多边形变体、一流模块的对象。在 F# - .NET 类型系统互操作（类、接口、结构、子类型、方法重载）中，度量单位。我认为 F# 类型推断也以从左到右的方式倾斜，以允许更有效的交互式检查，因此一些代码令人惊讶地需要注释。

就类型检查和推理而言，OCaml 比 F# 更具表现力和直观性。SML 比它们中的任何一个都更接近于普通的 HM，但 SML 还具有一些针对某些运算符多态性和记录支持的扩展。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-10T22:41:27.603

我相信当他们谈论 OCaml 中的结构类型时，他们可能指的是对象系统（“OCaml”的“O”部分）。OCaml 的非对象部分是非常标准的 ML 类型系统；这是不寻常的对象系统。

OCaml 中的对象系统与 F# 中基于 .NET 类的对象系统非常不同。在 OCaml 中，您可以直接创建对象而无需使用类。类基本上是创建对象的便利功能。创建后的对象（使用文字直接创建或使用类创建）没有其类的概念。

看看当你编写一个接受一个对象并在其上调用特定方法的函数时会发生什么：

```
# let foo x = x#bar;;
val foo : < bar : 'a; .. > -> 'a = <fun> 
```

参数类型被推断为包含名为 的方法的抽象类型`bar`。所以它可以接受任何具有这种方法和类型的对象。

这就是他们说对象系统是结构化类型的意思。一个对象唯一重要的是它的方法集，它决定了它可以在哪里使用。所以兼容性只是基于方法的“结构”。而不是关于“阶级”的任何想法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-14T22:05:35.670

> 由于特征文章说 OCaml 和 F# 都使用我认为是标准算法的 Damas-Milner 类型推断，即不允许变化的算法，这两个特征如何关联？

Damas-Milner 算法（也称为算法 W）可以扩展，实际上，它的所有实际相关实现都添加了许多扩展，包括 OCaml 和 F#。

> 是不是 Damas-Milner 是构建两个类型推理系统的基础，但它们每个都根据类型修改 Damas-Milner？

没错，是的。特别是，OCaml 对 Damas-Milner 核心有许多不同的实验扩展，包括多态变体、对象、一流模块。F# 更简单，但也有一些 OCaml 没有的扩展，尤其是重载（主要是运算符）。

我不相信有描述 OCaml 或 F# 的整个类型系统的摘要论文。确实，我不知道有哪篇论文描述了当今的 F# 类型系统。对于 OCaml，您有许多不同的论文，每篇论文都涵盖不同的方面。我将从[Jacques Garrigue 自己的出版物](http://www.math.nagoya-u.ac.jp/~garrigue/papers/index.html)开始，然后按照其中的参考资料进行操作。

# php - 何时创建多个页面而不是使用 PHP 将页面组合成一个页面

> ID：12341768
> 
> 赞同：0
> 
> 时间：2012-09-09T18:32:32.240
> 
> 标签：php, mysql

什么时候应该创建多个页面来显示内容，或者创建一个集中的页面来获取数据以通过 PHP 和 MySQL 显示？

* * *

我的具体情况是这样的：我有一个数学网站，其中包含用于各种简单目的的计算器，例如简化部首、求解指数等。目前，每个计算器都有自己的页面（所以有`simplifying_radicals.php`and `solving_for_exponents.php`），导致多个页面用于计算器。

我想知道是否应该将所有这些页面压缩成一个从数据库中获取内容的页面。例如，如果用户访问了`calculators.php?calculator=simplifying_radicals`，PHP 页面会从 Simplified_radicals 行中获取所有数据以正确显示。

该数据库将包含一个指向每个计算器脚本的链接（它是通过 Javascript 计算的）、一个中等长度的过程描述，以及供用户自己尝试的练习题。每个计算器都有类似的格式，但我担心将计算器压缩到一个页面会降低灵活性并且速度较慢，因为服务器必须从数据库中获取内容。

* * *

所以，基本上，我对以下内容感兴趣：

1.  标题中的原始问题。
2.  这些准则将如何适用于我的具体案例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T18:37:27.683

你为什么不做这样的事情

```
<?php

// Your header stuff

switch($_GET['calculator']) {

  case 'simplifying_radicals':
    require_once 'simplifying_radicals.php';
    break;

  ...etc

}

// Your footer stuff

?> 
```

这样，在您的计算器之间共享的所有代码都只需要写入页眉和页脚区域，并且计算器文件将只包含特定于它们的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T19:44:15.407

我们曾经使用像@Eric's answer这样的switch语句，但现在使用一个类：

```
// foo.php
class FooController extends PageController
{
  public function someAction()
  {
  }

  public function someOtherAction()
  {
  }
}

new FooController()->run(); 
```

如果你去`/foo/some`它将执行`someAction()`，广告`/foo/some-other`执行`someOtherAction()`。

许多杂乱的代码（例如创建导航/页脚 HTML，以及决定运行哪个“动作”）发生在父 PageController 类中）。

决定每节课什么时候放多少页是个人品味和组织的问题。在拥有大量几乎没有代码的文件与拥有大量代码的大量文件之间找到适当的平衡点，您找不到任何东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T19:05:51.290

简单来说，如果您在每个不同的页面中有大量代码，那么请将它们分开。顺便说一句，您使它们更易于阅读、扩展、维护和调试。

如果每页只有几行，请将它们合并到一个文件中。现在这是保持它们可读性等的更好方法。

如果您在每个页面上都有高负载，或者您有很多进程，或者例如您的 MySQL 表包含数十万条记录，那么您可能会出于性能问题再次拆分它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-23T07:00:23.610

使用单独文件的原因之一是避免代码重复。
另一个原因是，当功能分离在不同的文件中并正确包含在主项目中时，该软件更易于维护和扩展。简单地使用“包含”在主 php 文件中引入一个文件是不行的，但是使用其他页面可以用来连接主 php 文件的不同部分的过滤器是一个很大的优势（例如，您可以检查 wordpress过滤器）

在您的情况下：
您有一个页面，其中包含用户可以选择的所有计算器，但是如果您想将最简单的计算器放在侧边栏中怎么办，如果您将计算器放在不同的文件中，您只需包含它侧边栏中的一个（它还取决于您如何插入侧边栏）

# c++ - 在 IF 中声明派生类以供外部使用

> ID：12341769
> 
> 赞同：0
> 
> 时间：2012-09-09T18:32:37.370
> 
> 标签：c++, class, scope, derived-class, base-class

我有以下代码，我想在 IF 语句中声明一个对象。我知道仅在 IF 内声明它意味着它超出了程序其余部分的范围。所以我想我需要使用指针。我的问题是我希望用户选择的类是从基类派生的。所以我想我可能需要基于这个基类创建一个指针......听起来对吗？

请参阅下文了解我正在尝试做的事情，我在正确的球场吗？

```
//create a stereo input object
StereoImage SO;
SO.open(File1,File2);

int StereoOption;

if (counter == 0) StereoOption = 1;

//think i need to create a pointer to the base class
SVAlgorithm *ptrSter;

//choose which method to use in stereo processing and set the base class pointer to derrived class
     if (StereoOption == 1) {SVOpenCVBlockMatching DoStereo; cout << "Using option 1" << endl; *ptrSter = DoStereo;}
else if (StereoOption == 2) {SVOpenCVSemiGlobalBlockMatching DoStereo; cout << "Using option 2" << endl; *ptrSter = DoStereo;}
else if (StereoOption == 3) {SVNoMD DoStereo; cout << "Using option 3" << endl; *ptrSter = DoStereo;}
else if (StereoOption == 4) {SVCross DoStereo; cout << "Using option 4" << endl; *ptrSter = DoStereo;}
else if (StereoOption == 5) {SVAdaptDP DoStereo; cout << "Using option 5" << endl; *ptrSter = DoStereo;}

//set create DoStereo from the pointer
SVAlgorithm &DoStereo = *ptrSter;

//output matrix
Mat_<short> DispOut;

//load the disparity method params, compute it and show - works
DoStereo.loadParams();
DoStereo.compute(SO.getRawFrame(0),SO.getRawFrame(1),DispOut);
imshow("Disparity Map", DispOut*255); 
```

以下类均派生自SVAlgorithm类... SVOpenCVBlockMatching、SVOpenCVSemiGlobalBlockMatching、SVNoMD、SVCross、SVAdaptDP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T18:39:21.713

您从正确的方向开始：

```
SVAlgorithm *ptrSter; 
```

但是现在您需要像工厂这样的东西来创建您的实例之一，所以您应该执行以下操作：

```
SVAlgorithm *ptrSter = SVFactory(StereoOption); 
```

where`SVFactory()`封装你的 if 语句，如下所示：

```
SVAlgorithm* SVFactory(int StereoOption){
  if (StereoOption == 1) { return new SVOpenCVBlockMatching(); }
  else if (StereoOption == 2) { return new SVOpenCVSemiGlobalBlockMatching();}
  else if (StereoOption == 3) { return new SVNoMD();}
  else if (StereoOption == 4) { return new SVCross();}
  else if (StereoOption == 5) { return new SVAdaptDP();}
} 
```

然后：

```
delete ptrSter; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T18:43:28.263

不，你的代码是错误的。指针对对象的生命周期绝对没有影响。所以这一行`SVAlgorithm &DoStereo = *ptrSter;`给了你未定义的行为，因为你试图取消引用指向被破坏对象的指针。

另一个可能的问题是未初始化`ptrSter`和`StereoOption`变量。看起来这里是可能的情况，当`ptrSter`不会分配适当的对象并且它的取消引用也会导致 UB。

您需要使用带有`new`语句的动态存储并将结果存储在某个指针中。为此，强烈建议使用智能指针而不是原始指针，例如C **++** 03**或**`std::auto_ptr`C `std::unique_ptr`++11。

例子：

```
 std::unique_ptr<SVAlgorithm> ptrSter;

 if (StereoOption == 1) { ptrSter.reset(new SVOpenCVBlockMatching()); }
 else if (StereoOption == 2) { ptrSter.reset(new SVOpenCVSemiGlobalBlockMatching()); }
 else if (StereoOption == 3) { ptrSter.reset(new SVNoMD()); } 
 else if (StereoOption == 4) { ptrSter.reset(new SVCross()); } 
 else if (StereoOption == 5) { ptrSter.reset(new SVAdaptDP()); }

 if(!ptrSter)
 {
    assert(false);
    return;
 }

 SVAlgorithm &DoStereo = *ptrSter; 
```

# php - PHP抽象类构造函数不起作用

> ID：12341770
> 
> 赞同：2
> 
> 时间：2012-09-09T18:33:00.900
> 
> 标签：php, oop, constructor, abstract-class, abstract

我希望以这样的方式访问我的一些变量：

```
System->Config->URL 
```

在这种情况下，“系统”是我的核心类，“配置”是一个数组，“URL”是数组中的一个项目。这是我的“system.php”代码：

```
<?php

abstract class System {

    public $Config;

    public function __construct() {

        $this->Config = (object) array('URL' => 'localhost');
    }
}

echo System->Config->URL;

?> 
```

当我运行上面的代码时，我只看到：

```
Parse error: syntax error, unexpected '->' (T_OBJECT_OPERATOR), expecting ',' or ';' 
```

这指出了我的`echo`路线。

现在，如果我消除抽象的想法，并使用这个，效果很好！

```
<?php

class System {

    public $Config;

    public function __construct() {

        $this->Config = (object) array('URL' => 'localhost');
    }
}

$System = new System();
echo $System->Config->URL;

?> 
```

我也尝试过混淆`static`and`abstract`关键字，但这也没有用。我什至放弃了这个`__construct`函数，做了一个非常普通的方法，叫做'Ready'，但是在定义类时仍然无法调用它`abstract`。

有谁知道这里有什么问题？我已经看到类似的代码效果很好。

任何帮助或想法将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T18:34:53.680

查看“抽象”类的定义。这是一个无法实例化的类。只有继承它的类才能被实例化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T18:35:34.087

我不确定您要做什么。第二个例子有效，因为它是正确的。抽象类是您需要扩展的类，然后您可以实例化该（子）类，就像在您的工作示例中一样。

您可能需要阅读“抽象”的作用。

# c++ - 关于设置带有冗余对象的 Qt3D 场景的建议

> ID：12341775
> 
> 赞同：3
> 
> 时间：2012-09-09T18:33:40.063
> 
> 标签：c++, qt, opengl, 3d, qt3d

我是 Qt3D 模块的新手，目前正在使用 Qt3D 在 Qt5/C++ 中编写游戏。这个问题是关于“我在正确的道路上吗？” 或“你能给我一些关于......的建议吗？”。

游戏的场景有一个静态部分（“世界”）和一些对象（建筑物和可移动单位）。一些建筑物在未来可能会被激活，但其中大部分是非常静态的（但当然是可破坏的）。

我将问题分为两部分：如何处理放置在场景中不同位置的相同模型的副本以及如何在查看器类中将场景作为一个整体进行管理。

**场景中的冗余对象：**

当然，这些对象共享相同的建筑物/可移动单元库，因此对于此类单元的每个实例，将这些对象的模型上传到图形卡将是愚蠢的。我通读了 QGLSceneNode 的文档，从中我猜它旨在在多个场景节点之间共享相同的 QGeometryData，但应用不同的转换以便将对象放置在场景中的不同位置。我猜，为建筑物的所有实例共享相同的 QGLSceneNode 是错误的方式。

我目前有一个单元“库类”，告诉我每种类型的建筑物/可移动单元的属性，其中包括几何图形，包括纹理。现在，我将为这个库类中的每个建筑物提供一个 QGeometryData，它在游戏的加载过程中上传（如果我决定在启动时对*所有*建筑物执行此操作......）。

创建单元的新实例时，我现在将创建一个新的 QGLSceneNode，从库中请求 QGeometryData（显式共享）并将其设置在节点上。然后我为这个新节点设置转换并将其放入我的场景中。这将我们引向我问题的第二部分：

**整体管理场景：**

我的“场景”目前既不是 QGLSceneNode 也不是 QGLabstractScene，而是一些 QGLSceneNodes 的结构，一个用于场景中的每个对象（或对象集合）。我看到三种方法：

*   我目前的方法，但我想这是“错误的方法”。

*   组成：将所有内容作为子节点放在一个根 QGLSceneNode 中。这对我来说似乎是正确的方法，直到我意识到在这样的组合中访问特定节点非常困难。但是我什么时候甚至需要访问这样的“特定”节点？大多数操作需要考虑所有节点（渲染它们，更新动画位置），甚至在信号槽基础上操作，所以我什至根本不需要手动找到节点。例如，动画可以使用 QPropertyAnimations 完成。也可以通过将游戏引擎核心中的QObject（所有建筑物都是引擎核心部分中的QObject）与相应的QGLSceneNode连接来对事件进行操作。

    但这种方法还有另一个缺点：在渲染过程中，我可能需要更改 QGLPainter 的一些属性。我不确定我需要更改哪些属性，这是因为我对 Qt3D 了解不够，无法猜测不更改属性可以做什么（例如：使用特定着色器渲染特定场景节点） .

*   然后我找到了QGLAbstractScene，但是和上面的两种方案相比，我看不出有什么优势，因为我无法定义场景中的渲染过程。但也许它不是定义它的正确位置？

**在 Qt3D 中管理这样一个场景的最佳方法是什么？**

“最好”是指：我会做错什么？我能做些什么更好？我还应该考虑哪些其他事项？我是否忽略了 Qt3D 库中的任何重要内容？

# android - 使用 ActionBarSherlock 时 ActionBar 下的阴影

> ID：12341776
> 
> 赞同：2
> 
> 时间：2012-09-09T18:33:40.073
> 
> 标签：android, android-actionbar, actionbarsherlock

我正在使用 ActionBarSherlock。在 Android 3.0+ 上，ActionBar 下方有一个微妙的阴影。但不是在较旧的 Android 上。

问题是，设置的阴影`android:windowContentOverlay`出现在活动窗口的顶部。在较旧的 Android 上，ActionBar 是 Window 的一部分。所以阴影覆盖在 ActionBar 的顶部，而不是覆盖在 ActionBar 下的内容。

有没有办法解决这个问题，而无需手动将阴影插入每个 Activity 的布局？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T20:04:03.130

正如@wingman 在评论中暗示的那样，我`setContentView(...)`在我的基础中覆盖了`Activity`这样的：

```
@Override
public void setContentView(int layoutResId) {
    View view = getLayoutInflater().inflate(layoutResId, null);
    setContentView(view);
}

@Override
public void setContentView(View view) {
    int wrapContent = ViewGroup.LayoutParams.WRAP_CONTENT;
    int matchParent = ViewGroup.LayoutParams.MATCH_PARENT;
    view.setLayoutParams(new ViewGroup.LayoutParams(matchParent, matchParent));

    View shadow = new View(this);
    shadow.setBackgroundResource(R.drawable.action_bar_shadow);
    RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(matchParent,
            wrapContent);
    shadow.setLayoutParams(params);

    RelativeLayout container = new RelativeLayout(this);
    container.addView(view);
    container.addView(shadow);

    super.setContentView(container);
} 
```

# iphone - 创建一个 NSPredicate 来查找长度大于 N 的元素

> ID：12341778
> 
> 赞同：0
> 
> 时间：2012-09-09T18:33:59.463
> 
> 标签：iphone, core-data

我有一个字符串数组（超过 5k 个元素），每个字符串都是可变长度的。我可以使用 NSPredicate 在数组中查找特定的字符串（花了一点时间才弄清楚）。现在我需要找到长度大于 N 的元素。

我查看了文档，长度似乎不是 Predicate Programming Guide 中可用的功能之一。

提前致谢。

岩浆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T18:44:48.317

```
NSArray * words= [allLinedStrings filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"length > %d",N]]; 
```

N 是您在问题中提到的整数。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-09T18:44:46.500

我不熟悉 NSPredicate，所以我不能给你一个使用它的解决方案，但你不能只使用一些简单的 NSString 方法：

```
//This is the length of the string you want to check
int threshold = 5;

//Iterates through all elements in the array
for(int index = 0; index < [stringArray count]; index++) {

    //Checks if the length of the string stored at the current index is greater than N
    if([[stringArray objectAtIndex:index] length] > threshold) {

        //String length is greater than N
    }
} 
```

或者，您可以通过替换以下行来添加检查以查看数组是否只有字符串（为了安全而牺牲性能）：

```
if([[stringArray objectAtIndex:index] length] > threshold) 
```

有了这个：

```
if([[stringArray objectAtIndex:index] length] > threshold && [[stringArray objectAtIndex:index] isKindOfClass[NSString class]]) 
```

它的作用是确保当前索引处的对象是一个 NSString。如果不是，您将收到运行时错误。

# java - 非空列表上的 NoSuchElementException

> ID：12341779
> 
> 赞同：1
> 
> 时间：2012-09-09T18:34:03.190
> 
> 标签：java, list, exception

我以这种方式创建了一个可运行文件：

```
private Runnable _animationScriptRunnable = new Runnable() {
    public void run() {
        synchronized (AnimationManager.this) {
            while (!_stopRunning && !_animationScriptStack.isEmpty()) {
                Class key = _animationScriptStack.removeFirst();
                if (isAnimationExist(key) && isAnimationActivated(key)) {
                    AAnimation animation = _animationsClassTable.get(key);
                    animation.doBeforeAnimation();
                    animation.onAnimationBeginning();
                    do {
                        animation.onAnimation();
                    } while (isAnimationActivated(key) && animation.isAnimationRecurent() && !_stopRunning);
                    animation.onAnimationEnding();
                    animation.doAfterAnimation();
                }
            }
        }
    }
};
```

如您所见，我在一个同步块中检查我的堆栈（`_animationScriptStack`创建为 a `LinkedList<Class<?>> _animationScriptStack`）不为空，如果不是，我删除第一个元素。但是，有时，我有一个`java.util.NoSuchElementException`, 在`removeFirst()`通话中。

有人可以解释我为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T18:44:41.353

[`LinkedList`](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedList.html)不是线程安全的，这可能会导致您的代码出现意外结果。

在这种情况下，您需要[`ConcurrentLinkedQueue`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentLinkedQueue.html)在尝试访问线程中的列表时使用。请看一下，我想这就是你需要的。

# php - 没有获得视频的嵌入式代码

> ID：12341783
> 
> 赞同：0
> 
> 时间：2012-09-09T18:34:15.283
> 
> 标签：php, codeigniter, video, curl, file-get-contents

在我的项目中，用户将通过粘贴来自另一个站点的 URL 来上传视频。我尝试嵌入但无法正常工作，因为它为特定网站、YouTube 等提供了嵌入代码。我想做与这个网站完全一样的[http://www.myvidster.com/](http://www.myvidster.com/)。我尝试`cURL`为此使用代码：-

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $video_url);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE); 
curl_setopt($ch, CURLOPT_VERBOSE, true); // Display communication with server
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$json_reply = curl_exec($ch);
curl_close($ch); 
```

和代码`file_get_contents`是：

```
$video_url = $_POST['video_url'];
$html = file_get_contents($video_url,true); 
```

但是使用 curl 我也只获得了某些网站的 HTML 部分。我正在尝试 1 周，但仍然没有结果。是否可以从每个站点获取视频的嵌入式代码？或者我做错了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-09T18:39:14.447

对于所有视频流媒体站点，没有单一、通用的方法可以做到这一点——每个站点都有点不同，而且并非所有站点都支持嵌入式视图。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-17T10:32:09.670

您应该研究[oembed 标准](http://oembed.com/)

此协议允许您以标准统一的方式从多个支持它的视频站点接收嵌入代码。点击链接查看实施 oembed 的网站列表

[http://oembed.com/#section7](http://oembed.com/#section7)

对于不支持该标准的其他网站，您通常可以通过开放图形协议（meta og:...）获取嵌入代码或为每个站点编写html解析规则以提取嵌入

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T11:08:21.837

您可以尝试检索`og:video`元标记，确保`og:video:type`元标记是`application/x-shockwave-flash`

然后，您可以轻松嵌入它。虽然没有完全自动化的方法，但有时您需要针对特定​​网站实施特定方法，因为并非所有视频网站都共享相同的“标准”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T18:36:58.050

您需要重新编码视频以确保它们可以在浏览器中查看。一个很棒的命令行软件是[FFmpeg](http://ffmpeg.org/)。最好的是，它是免费的！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-16T19:09:46.020

我的网站[www.youtubetutsite.com](http://www.youtubetutsite.com/)也有类似的事情要处理。虽然我只用过 YouTube。

从查看 myvidster.com，他们不播放所有视频。他们不能玩的那个，他们有一个屏幕截图，可以作为专有网站播放页面的链接。

我的方法是使用单个嵌入式播放器代码，但从选择中动态注入唯一的视频 ID。这就是我为我的网站所做的。

您需要做的是拥有一个数据库，其中包含（仅作为示例）、、、等字段，`VIDEO_ID`具体取决于`VIDEO_LINK`您的需要。根据您的视频，某些选项可能是空白的，因为并非用于每个视频。`PLAYER_TO_USE``OPTIONAL_URL`

困难的部分是仅从您正在处理的站点中获取唯一的视频 ID（您可以让用户选择他们从中上传的站点，以便定位您的代码）。使用 YouTube 相当简单（即*http://www.youtube.com/watch?v= **HtPpaR3H8d8** &feature=g-user-lss*），但我还没有查看所有其他网站以了解它们的索引方式。

从那里，您可以在选择时加载具有所选视频 ID 的相应播放器。不确定这是否对您有帮助，但我希望它会。

# java - 将图形内存的一部分复制到 RAM Java

> ID：12341788
> 
> 赞同：0
> 
> 时间：2012-09-09T18:35:02.020
> 
> 标签：java, graphics, ram, copying

我正在尝试获取一部分图形内存，并将其中的内容复制到普通 RAM。有没有办法用Java做到这一点？我已经搜索了一下，但无济于事。另外，我认为这取决于您的 GPU / 芯片组，那么您将如何检测到呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T18:55:02.377

您可以使用 JNA 对共享库进行方法调用。

您可以使用 Unsafe.copyMemory 将内存从一个地方复制到另一个地方，或复制到一个对象。注意：从 memcpy 不安全的意义上说，它是不安全的。;)

# php - Yii 检查主页

> ID：12341791
> 
> 赞同：6
> 
> 时间：2012-09-09T18:35:21.677
> 
> 标签：php, yii, yii-url-manager

Yii 中是否有内置方法或属性来检查页面是否为主页？

我知道我可以使用这样的东西：

```
$controller = Yii::app()->getController();
$isHome = $controller->getAction()->getId() === 'index' ? true : false; 
```

或者把它放在主控制器中的一个方法中，但我正在寻找更清洁的东西。

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-10T04:12:35.610

如果要查看当前页面，即action是当前控制器的默认值。

```
$controller = Yii::app()->getController();
$isHome = $controller->action->id === $controller->defaultAction->id ? true : false; 
```

> dafeultaction 可能并不总是'index'，它可以更改，因此您需要将其与 defaultAction 进行比较。

如果您的主页是指网站的默认页面，那么您还需要将您的控制器与`defaultController`..

```
$controller = Yii::app()->getController();
$default_controller = Yii::app()->defaultController;
$isHome = (($controller->id === $default_controller->id) && ($controller->action->id === $controller->defaultAction->id)) ? true : false; 
```

在 Yii2 中：

```
$controller = Yii::$app->controller;
$default_controller = Yii::$app->defaultRoute;
$isHome = (($controller->id === $default_controller) && ($controller->action->id === $controller->defaultAction)) ? true : false; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-09T05:28:08.933

这是我用来检查我是否在首页的内容：

```
$isFrontpage = false;
if ((Yii::app()->controller->getId().'/'.Yii::app()->controller->getAction()->getId()) == 'site/index'  ) { 
    $isFrontpage = true;
} 
```

像魅力一样工作......即使在视图上......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-20T07:41:33.093

可能对你有帮助:)

```
<?php
  $controllerl = Yii::$app->controller;
  $homecheker = $controllerl->id.'/'.$controllerl->action->id;
  if($homecheker=='site/index')
  {
     //no border on home page
     $mymaincls ='main-nav navbar-fixed-top';
  }else
  {
     //border all other page
     $mymaincls ='main-nav navbar-fixed-top header-border';
  }
?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-09T20:31:56.710

如果“主页”的意思是“首页”，那么您可以检查[这个扩展](http://www.yiiframework.com/extension/pisfrontpage/)程序正是这样做的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-03T19:11:24.323

您可以使用扩展 pageChecker 检查主页：

```
http://www.yiiframework.com/extension/pagechecker 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-11-17T18:31:31.420

您可以将当前控制器和操作与默认控制器和操作进行比较。

```
$controller = Yii::app()->getController();

$default_controller = Yii::app()->defaultController;

$isHome = $controller->getId() === $default_controller && $controller->getAction()->getId() === 'index'; 
```

我无法通过**Yii::app()**访问默认操作，例如**Yii::app()->defaultController**。但是您使用字符串进行比较。

干杯

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-01-19T06:37:18.073

```
$check_home=$path=='site/index.html'?'TRUE':'False';

$path=Yii::$app->request->pathInfo; 
```

如果 check_home 是 true 或 false，请按照您的逻辑执行

我正在删除主页上的侧边栏

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-04-30T16:15:48.710

```
if(Url::current() == '/index.php?r=site%2Findex' || Url::current() == Url::home()){ 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-03-30T19:02:42.913

```
namespace common\helpers;

class Url extends \yii\helpers\Url
{
    public static function isHome()
    {
        return (self::home() == Yii::$app->request->url);
    }
} 
```

# internet-explorer - mailto IE问题

> ID：12341793
> 
> 赞同：0
> 
> 时间：2012-09-09T18:35:24.577
> 
> 标签：internet-explorer, z-index, mailto

我基本上需要的是一个可点击并链接到实际站点的大图像（这可行），并且在该图像之上是一个电子邮件地址所在的区域，它也是可点击的并打开一个电子邮件客户端窗口（这适用于除 IE 以外的所有浏览器）

我一直在尝试通过在 IE 中使用 z-index 来解决问题（没有成功）我一直在查看以下[z-index 问题](https://stackoverflow.com/questions/1287439/ie7-z-index-layering-issues)但是，在尝试应用它时，我没有得到想要的结果. 我真的不知道如何在不使用 javascript 的情况下解决这个问题（我想不惜一切代价避免）

网站示例：[thuisverplegingjacobs.be](http://www.thuisverplegingjacobs.be)

可点击区域应位于电子邮件信封底部的位置，但它位于图像可点击区域的后面。我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T19:25:03.300

通常，我会将该图像切成 3 个矩形 - 标题、正文和电子邮件部分。

由于不是这样，我只是使用了用于电子邮件字段的技巧，明确设置 div 以覆盖（图像的）标题和正文，然后我在这些元素中设置链接以填充它们 - 有效地为您提供带有href的div。

当我开始输入这个时，我想起了图像映射——也许它们会是一个更好的实现？

无论如何，我刚刚替换了您`</script>`标签下的所有内容。IE8 和当前的 Chrome 都可以。

```
 <style>
        /* set the image as a background-image of a div */
        div #splash-image
        {
            background-image: url('Thuisverpleging Eric Jacobs_files/splash_image2.png');
            width: 1057px;
            height: 863px;
        }

        /* resposition it */
        #clickable-email
        {
            left: 216px;
        }

        #greyHeader a, #blueMain a
        {
            display: block;
        }

        #greyHeader
        {
            position: absolute;
            left: 539px;
            top: 20px;
            width: 596px;
            height: 90px;
        }
        #greyHeader a{ height: 90px; }

        #blueMain
        {
            position: absolute;
            left: 216px;
            top: 110px;
            width: 916px;
            height: 580px;
        }
        #blueMain a{ height: 580px; }

    </style>
</head>
<!-- 
Usage of certain elements
-----------------------------
class: 
- center en width-x-px moeten samen voorkomen om te werken in alle browsers
- height-x moet voorkomen op een div

- 
-->
<body class="wpc hpc no-padding-margin center-ie splash">
    <!-- Content of the site -->
    <div id="splash-content">
        <div id="splash-image" class="center">
            <a href="http://www.thuisverplegingjacobs.be/site/index.php"></a>
        </div>
    </div>

    <div id='greyHeader'>
        <a href="http://www.thuisverplegingjacobs.be/site/index.php">&nbsp;</a>
    </div>

    <div id='blueMain'>
        <a href="http://www.thuisverplegingjacobs.be/site/index.php">&nbsp;</a>
    </div>

    <div id="clickable-email">
        <a href="mailto:info@thuisverplegingjacobs.be">&nbsp;</a>
    </div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T17:40:43.107

你给了我一个完美的例子来做我想做的事。我不知道为什么我一开始没有想到将图像设置为背景并制作可点击的 div。

对于那些有兴趣的人。这是最终的布局：

```
<body class="wpc hpc no-padding-margin center-ie splash">

 <div id="splash-content">
  <div id="splash-image" class="center">
    <a href="/site/index.php"><span>&nbsp;</span></a>
    <div id="clickable-email">
        <a href="mailto:info@mysite.com"</a>
    </div>
  </div>
 </div>

</body> 
```

并使用以下样式的电子邮件

```
#splash-image{
background-image: url('../images/design/splash_image2.png');
width: 1057px;
height: 863px;
position:relative;/* so #clickable-email is positioned right */
}

#splash-image a{
display:block;
cursor:pointer;
}

/*required to give full size dimensions to the link*/
#splash-image a span{
display:block;
width: 1057px;
height: 863px;
}

#clickable-email{
position:absolute;
top:690px;
left:73px;
width:595px;
height:87px;    
}

#clickable-email a{
display:block;
text-decoration:none;
height:87px;
}

#clickable-email a span{
display:block;
height:87px;
} 
```

通过将可点击的电子邮件放置在启动图像中，并给#splash-image 一个位置：相对。当屏幕尺寸与预期不同时，我们确保#clickable-email 的绝对定位不会失控。通过这种方式，我们将可点击区域精确地保持在背景图像的正确坐标之上。

# unix - 将环境变量作为命令行参数传递时的内存分配

> ID：12341796
> 
> 赞同：0
> 
> 时间：2012-09-09T18:35:34.853
> 
> 标签：unix, memory-management, process, environment-variables, address-space

我正在尝试在 linux 中进行简单的缓冲区溢出攻击。我有一个接受命令行参数的易受攻击的程序。我有另一个程序，它设置了一个环境变量，其中包含一些我想要执行的代码（通常是 shellcode）。现在我试图用这个环境变量的地址溢出我易受攻击的程序的缓冲区。我有以下问题：

1.  当我将环境变量作为命令行参数传递时，变量的内容是否被复制到易受攻击程序的 argv 中？

2.  环境变量（命令行参数）将存储在进程的地址空间中的什么位置？它会在进程堆栈上还是在其他地方？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T19:17:33.200

1.  是的。
2.  这取决于实施。

你大概在做类似的事情：

```
victim "$SHELLCODE" 
```

如果`$SHELLCODE`也是一个环境变量，程序将在环境中获得一份副本，前面是`SHELLCODE=`这样可以通过 检索`getenv()`，并在`argv`参数列表中获得一份副本。

# ios4 - 为什么如果这个 if 语句没有通过

> ID：12341797
> 
> 赞同：0
> 
> 时间：2012-09-09T18:35:36.177
> 
> 标签：ios4, xcode4.4

我正在做一个计算器，我定义了所有函数 SUM SUB DIV MUL

然后，当我输入这个 if 语句时，尽管条件错误，但只有第一个语句通过

所以我有 2 个文本字段
每个按钮有 4 个动作
2 个动作：结果和清除
以及操作的标签，它将采用 + 或 - 或 * 或 ÷ 任何...这个标签称为 Operation

我在计算操作中输入了这个 if 语句，但我不知道出了什么问题。当我点击计算操作将是第一个如果操作是 +

当我按 1 -4 它显示 1 + 4 = 5

```
 //in -(IBAction)calculate :

-(IBAction)Calculate:(id)sender{
if (operation.text=@"+"){
//sum
a =num1.text.integerValue;
b= num2.text.integerValue;
c=num1.text.integerValue+num2.text.integerValue;
printf("%i >> %i",b,num2.text.integerValue);
[num1 resignFirstResponder];
[num2 resignFirstResponder];
result.text =[NSString stringWithFormat:@"%i + %i = %i",a,b,c];}

 else if (operation.text=@"-"){
//sub
a =num1.text.integerValue;
b= num2.text.integerValue;
c=num1.text.integerValue-num2.text.integerValue;
printf("%i >> %i",b,num2.text.integerValue);
[num1 resignFirstResponder];
[num2 resignFirstResponder];
    result.text =[NSString stringWithFormat:@"%i - %i = %i",a,b,c];}

else if (operation.text=@"*"){
//mul
a =num1.text.integerValue;
b= num2.text.integerValue;
c=num1.text.integerValue*num2.text.integerValue;
printf("%i >> %i",b,num2.text.integerValue);
[num1 resignFirstResponder];
[num2 resignFirstResponder];
result.text =[NSString stringWithFormat:@"%i * %i = %i",a,b,c];
}

//div
else if (operation.text=@"÷"){
a =num1.text.integerValue;
b= num2.text.integerValue;
c=num1.text.integerValue/num2.text.integerValue;
printf("%i >> %i",b,num2.text.integerValue);
[num1 resignFirstResponder];
[num2 resignFirstResponder];
result.text =[NSString stringWithFormat:@"%i ÷ %i = %i",a,b,c];
}

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T18:44:00.370

`=`执行分配，所以`if (operation.text=@"+")`实际上分配`@"+"`给`operation.text`，它不比较是否相等。`if`然后，该语句将分配的值视为真。

# javascript - 在javascript中创建闪烁的“文本”

> ID：12341798
> 
> 赞同：0
> 
> 时间：2012-09-09T18:35:40.647
> 
> 标签：javascript, html, blink

> **可能重复：**
> [文本闪烁 jQuery](https://stackoverflow.com/questions/1605698/text-blinking-jquery)

当游戏结束时，我正在尝试在我的 HTML5/JavaScript 游戏中创建一个计时器。像 3...2...1.. 会出现 3，然后闪烁，然后 2，然后闪烁，然后 1，然后闪烁并返回到我的标题屏幕......我没有放任何东西可以让它工作。 ..有人能帮我吗？到目前为止，我的数字代码是这样的：

```
function CreateTimer(){
    timer =  setInterval(function() {
    cntxt.fillText(time, c.width/2 - cntxt.measureText(time).width/2, c.height/4);
    time--;
    }, 1000);

}

function resetTimer(){
clearInterval(timer);
time = 3;
where = "menu";
} 
```

但即使这样也只会将第二个数字和第三个数字直接放在前一个数字上，然后按预期返回标题。

先谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T18:40:52.573

你需要先清除文本见[http://www.w3schools.com/html5/canvas_clearrect.asp](http://www.w3schools.com/html5/canvas_clearrect.asp)

# android - 活动的自定义样式 - OnStart 不起作用

> ID：12341799
> 
> 赞同：1
> 
> 时间：2012-09-09T18:35:47.730
> 
> 标签：android, android-activity, onstart

我是这里的新手。但是想请各位大侠帮忙。

所以我的应用程序在做什么。在活动#1 我有：

```
protected void onStart() where I run void run() 
```

有一个循环每秒增加 int i 。通过处理程序刷新`textview`。直到游戏=假。没什么大不了。然后我有一个按钮可以停止循环（通过设置`game=false`）并开始新`activity#2`的结果。目前我有两个`returning values (0-back, 1-exit)`. 当 activity#2 返回 0 我设置`game=true`并且循环再次运行。在 1 的情况下，我完成了活动 1。

问题：我想为`activity#2`. 所以我使用`android:theme="@style/Theme.Transparent">.`Effect 效果很好。问题是当我从 act2 回到 act1 时，它不会开始循环（当我不使用样式时它曾经工作过）。有人可以解释一下为什么会发生这种情况，我该如何解决？

看来我已经解决了。只是把`run()`东西移到了 onResume 中。你怎么看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T23:24:48.133

当您在活动恢复、恢复或再次回到前面时执行某些操作时，将覆盖 onResume。如果您使用 startActivityForResult(Intent,requesCode) 启动了其他活动，则当您返回上一个活动时，应覆盖该活动的 onActivityResult(int requestCode,resultCode, Intent) 以根据意图、requestCode 或结果代码。

[在这里](http://developer.android.com/reference/android/app/Activity.html)挖掘更多关于 android 活动的信息。:)

# c# - 将图像从 WCF 服务加载到 WP7 应用程序的最快方法

> ID：12341802
> 
> 赞同：0
> 
> 时间：2012-09-09T18:36:04.400
> 
> 标签：c#, wcf, windows-phone-7

我正在从我的 WCF Web 服务获取批量图像到我的 WP7 应用程序，这非常慢。我的应用程序首先获取所有图像，然后显示图像。我想用首先加载的图像逐渐填充我的列表框，而不是等待所有图像一次获取。我在列表中获取图像（以字节的形式）及其标题。有人能告诉我在应用程序中加载图像的最快方法吗？

# javascript - 使用 JSON 在 Google Map 上显示标记

> ID：12341803
> 
> 赞同：1
> 
> 时间：2012-09-09T18:36:06.363
> 
> 标签：javascript, json, google-maps

我有以下测试谷歌地图：[http ://dev.driz.co.uk/googlemap/](http://dev.driz.co.uk/googlemap/)

我以 Foursquare 标记的设计为例来测试我的代码，到目前为止，我已经用一个小头像实现了一个简单的显示用户在世界上的位置，当你悬停它时，它会以表格形式告诉你的工具提示。

下一部分是使用一些 JSON 数据：[http ://dev.driz.co.uk/googlemap/data.json](http://dev.driz.co.uk/googlemap/data.json)

我想使用存储在数据中的坐标在地图上显示这 5 个帖子，并以与当前标记类似的方式显示它们。然后，用户将鼠标悬停在标记上，并能够看到带有以下信息的工具提示，例如：

```
Cameron asked:
Is Star Wars 3d still on at the cinema?
2012-05-20 02:31:21 
```

用户应该能够单击要被带到帖子的标记。

我浏览了 Google Maps 的 Developer 部分，但似乎没有得到正确的东西，并且不确定如何最好地将它与我的工具提示功能和地图实现一起使用。

任何人都可以帮忙吗？发布一些代码示例？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T18:58:15.753

按着这些次序

1.  使用 AJAX 请求提取数据并将其存储在变量中。

    *   您可以为此使用 jQuery。[http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

        ```
        $.getJSON('http://dev.driz.co.uk/googlemap/data.json', function(data){
              // loop  and add markers
        }); 
        ```

    *   或者您可以使用纯 javascript 和 JSON 解析器。

        *   [http://www.degraeve.com/reference/simple-ajax-example.php](http://www.degraeve.com/reference/simple-ajax-example.php)
        *   [http://www.json.org/](http://www.json.org/)
2.  循环数据并选择每个项目并添加到地图

    ```
    for (var i = 0; i < data.length; i++) {
        var item = data[i];

        var markerLatlng = new google.maps.LatLng(item.Post.latitude, item.Post.longitude);
        var marker = new google.maps.Marker({
            position: markerLatlng
        });
        marker.item = item; // store information of each item in marker
        marker.setMap(map); // where `map` is the instance of Google Map
        google.maps.event.addListener(marker, "click", function(mark) {
            // retrieve information using `this.item` and create dynamic HTML to show it. 
            // this.item.Post.datetime, this.item.Post.content etc.
        });

    } 
    ```

# asp.net-mvc - MVC 绑定字典

> ID：12341804
> 
> 赞同：2
> 
> 时间：2012-09-09T18:36:09.757
> 
> 标签：asp.net-mvc, data-binding

我正在关注[本](http://www.hanselman.com/blog/ASPNETWireFormatForModelBindingToArraysListsCollectionsDictionaries.aspx)教程。谁能向我解释如何使文本框绑定回字典？现在所发生的只是数据**显示**在文本框中 - 但是如果我更改文本框，我如何绑定回对象？我错过了什么？下面是我的代码：

```
 <input type="text" name="@Model.ExpirimentToRemove[i].Value.Title" value="@Model.ExpirimentToRemove[i].Value.Title"/>
 <input type="text" name="@Model.ExpirimentToRemove[i].Value.PreviewDescription" value="@Model.ExpirimentToRemove[i].Value.PreviewDescription"/>
 <input type="text" name="@Model.ExpirimentToRemove[i].Value.FullDescription" value="@Model.ExpirimentToRemove[i].Value.FullDescription"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T06:43:34.747

您的`name`文本输入字段的 错误。您已经放置了模型的值，而不是按照 Hanselman 的博客文章中的说明正确命名它。

所以让我们假设你有一些视图模型：

```
public class ItemViewModel
{
    public string Title { get; set; }
    public string PreviewDescription { get; set; }
    public string FullDescription { get; set; }
} 
```

和包含字典的主视图模型：

```
public class MyViewModel
{
    public Dictionary<string, ItemViewModel> ExpirimentToRemove { get; set; }
} 
```

并且您的 POST 控制器操作将此视图模型作为参数：

```
[HttpPost]
public ActionResult Remove(MyViewModel model)
{
    ...
} 
```

为了正确绑定到此视图模型，您可以拥有以下内容：

```
@model MyViewModel
@using (Html.BeginForm())
{
    @for (var i = 0; i < Model.ExpirimentToRemove.Count; i++)
    {
        <div>
            @Html.TextBox(
                "ExpirimentToRemove[" + i + "].Key", 
                Model.ExpirimentToRemove[i].Key
            )
            @Html.TextBox(
                "ExpirimentToRemove[" + i + "].Value.Title", 
                Model.ExpirimentToRemove[i].Value.Title
            )
            @Html.TextBox(
                "ExpirimentToRemove[" + i + "].Value.PreviewDescription", 
                Model.ExpirimentToRemove[i].Value.PreviewDescription
            )
            @Html.TextBox(
                "ExpirimentToRemove[" + i + "].Value.FullDescription", 
                Model.ExpirimentToRemove[i].Value.FullDescription
            )
        </div>
    }

    <p><button type="submit">OK</button></p>
} 
```

在此示例中，字典的键是一个简单的字符串值，但您也可以使用复杂类型。

# apache - .htaccess 用于重定向 rss 提要

> ID：12341805
> 
> 赞同：1
> 
> 时间：2012-09-09T18:36:10.703
> 
> 标签：apache, .htaccess, mod-rewrite, redirect

我想将每个以 /feed 结尾的 URL 重定向到 mysite.com/rss

我的旧订阅者有诸如 mysite.com/something/feed 或 mysite.com/otherthing/something/feed 之类的链接，我现在想将它们全部重定向到 mysite.com/rss。

我将如何在 .htaccess 中生成重定向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T18:41:41.373

您可以使用 mod_alias 或 mod_rewrite，无论哪个更适合您拥有的任何其他规则/设置。将其放入文档根目录的 htaccess 文件中：

```
RedirectMatch 301 /feed$ /rss 
```

或者：

```
RewriteEngine On
RewriteRule /?feed$ /rss [L,R=301] 
```

# c# - WinRT/Metro 中的碰撞检测

> ID：12341806
> 
> 赞同：0
> 
> 时间：2012-09-09T18:36:29.177
> 
> 标签：c#, microsoft-metro, windows-runtime, collision-detection

我正在将 Silverlight 4 应用程序移植到 WinRT，我使用的以下碰撞检测代码如下所示（并且在 Silverlight 4 中运行良好）：

```
private bool IsCollision(Point p)
{
    var hostPoint = this.canvas.TransformToVisual(this.rootVisual).TransformPoint(p);
    return CheckCollisionPoint(hostPoint, this.canvas);
}

private bool CheckCollisionPoint(Point point, UIElement subTree)
{
    var hits = VisualTreeHelper.FindElementsInHostCoordinates(point, subTree);
    return hits.Count() > 0;
} 
```

但是，在我的 Metro 应用程序中，它根本无法正确检测到碰撞。我认为这可能与使用错误的 rootVisual 有关。计算出 rootVisual 的旧代码是这样的：

```
private void FindRootVisual()
{
    this.rootVisual = this.canvas;
    while (this.rootVisual.Parent != null)
    {
        this.rootVisual = (FrameworkElement)this.rootVisual.Parent;
    }
} 
```

但在 WinRT 中，this.canvas 的 Parent 为 null。我尝试将 rootVisual 直接设置为我的应用程序的 MainPage 对象，以及 Canvas 所在的 Grid ，但它没有帮助。

这种技术是否仍然适用于 WinRT/Metro，如果可以，我需要使用什么 rootVisual？如果没有，在 WinRT 中进行碰撞检测的更好方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T19:12:20.497

我发现出了什么问题。首先，我确实需要传入 my `MainPage`，以便`rootVisual`在命中测试之前正确转换点。

其次，`FindElementsInHostCoordinates`似乎将`subTree`元素本身作为命中返回，因此需要将其过滤掉。事实上，最好明确检查找到的命中是否是您正在碰撞测试的对象，因为我在列表中也有另一个不需要的命中。或者，您可以将`IsHitTestVisible`不想匹配的项目设置为 false （尽管在画布本身上执行此操作会导致与其任何内容不匹配）

```
private bool CheckCollisionPoint(Point point, UIElement subTree)
{
    var hits = VisualTreeHelper.FindElementsInHostCoordinates(point, subTree);
    return hits.Any(x => x != subTree);
} 
```

# java - 泛型中的类型擦除

> ID：12341809
> 
> 赞同：-2
> 
> 时间：2012-09-09T18:36:36.537
> 
> 标签：java, generics, type-erasure

以下代码在类型擦除后对运行时有何看法：

```
public class Test<T> {

T lst;
List<T> list1;
void meth() throws InstantiationException, IllegalAccessException{  T res = (T)lst.getClass().newInstance();}

static <S> void meth(S t){}
}  
class TestUse{
public static void main(String[] args) {
Test<Integer> gint = new Test<Integer>();
Test<String> gstr = new Test<String>();
gint.meth();
gstr.meth();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T18:47:58.833

以下代码不起作用：

```
T res = (T)lst.getClass().newInstance(); 
```

因为在所有可能的情况下， T 在运行时都是 Object 类型。

一种解决方法是使用具有继承的泛型：

```
public abstract class Generic<T> {

    public abstract Class<T> getConcreteClass();

    public void doSomething() {
        Class<T> clazz = getConcreteClass();
        T t = clazz.newInstance();
        doSomethingWithT();
    }
}

public class ConcreteClass extends Generic<YourObject> {
    public Class<YourObject> getConcreteClass() {
        return YourObject.class;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T18:42:12.233

假设你的`Genrics`班级实际上是你的`Test`班级，它应该相当于这样：

```
public class Genrics {

    Object lst;
    List list1;
    void meth() throws InstantiationException, IllegalAccessException {
        Object res = lst.getClass().newInstance();
    }

    static void meth(Object t){}
}  
class TestUse{
    public static void main(String[] args) {
        Genrics gint = new Genrics();
        Genrics gstr = new Genrics();
        gint.meth();
        gstr.meth();
} 
```

无论我的假设是对还是错，考虑这一点的方法是，所有泛型类型参数都简单地从您的代码中删除，并替换为类型参数的最具体绑定（`Object`在您的情况下），或者在适当的情况下不替换。在需要的地方引入演员表。

[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.6)中详细说明了类型擦除的工作原理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T18:42:43.153

我认为它看起来像这样

```
public class Test {

    Object lst;
    List list1;
    void meth() throws InstantiationException, IllegalAccessException{  
        Object res =lst.getCla ss().newInstance();
    }

   static void meth(Object t){
   }
}

class TestUse{
    public static void main(String[] args) {
        Genrics gint = new Genrics();
        Genrics gstr = new Genrics();
        gint.meth();
        gstr.meth();
    } 
```

尽管我认为这不会按原样编译。没有 Genrics 类 - 或者是 Test 类。

# compilation - 检查对 libtiff 的依赖时配置错误

> ID：12341810
> 
> 赞同：0
> 
> 时间：2012-09-09T18:36:38.877
> 
> 标签：compilation, dependencies, libtiff

我已经正确配置并制作了 libtiff。现在我正在尝试构建另一个依赖于 tiff 库的库。我收到以下错误

```
checking for TIFF support ...
checking tiff.h usability... yes
checking tiff.h presence... yes
checking for tiff.h... yes
checking tiffio.h usability... yes
checking tiffio.h presence... yes
checking for tiffio.h... yes
checking for TIFFOpen in -ltiff... no
checking for TIFFClientOpen in -ltiff... no
checking for TIFFIsByteSwapped in -ltiff... no
checking if TIFF package is complete... no -- some components failed test 
```

我不明白我做错了什么。我的配置语句如下：

```
./configure --prefix=/usr/local --enable-static=yes --enable-shared=no --with-zlib=yes --with-jpeg=yes --with-tiff=yes --with-sysroot=/usr/local/lib 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T19:31:19.470

它是固定的。我忘了包括另一个依赖库。libtiff 是在 jbig 支持下构建的。在配置依赖于 libtiff 的新库时，我忘记在 LDFLAGS 中包含 jbig。

# c++ - 以二进制形式给出的两个整数相乘

> ID：12341811
> 
> 赞同：0
> 
> 时间：2012-09-09T18:36:41.840
> 
> 标签：c++, vector, binary, pseudocode, multiplication

我正在开发一个允许我将二进制数相乘/除/加/减的程序。在我的程序中，我将所有整数表示为数字向量。

我已经设法弄清楚如何通过加法来做到这一点，但是乘法让我绊倒了，我想知道是否有人可以就如何获取伪代码作为该程序的指南给我一些建议。

提前致谢！

编辑：我试图弄清楚如何创建乘法算法仍然可以解决问题。任何有关如何计算此算法的帮助将不胜感激。我通常不使用 C++，所以我需要更长的时间才能弄清楚它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T18:46:02.623

如果你想乘法，你也可以考虑布斯算法： [布斯乘法算法](http://en.wikipedia.org/wiki/Booth%27s_multiplication_algorithm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T18:41:42.537

**伪代码中的长乘法**看起来像：

```
vector<digit> x;
vector<digit> y;

total = 0;
multiplier = 1;
for i = x->last -> x->first   //start off with the least significant digit of x
   total = total + i * y * multiplier
   multiplier *= 10;

return total 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T18:40:37.053

您可以尝试模拟[二进制乘法器](https://en.wikipedia.org/wiki/Binary_multiplier)或 CPU 中使用的任何其他电路。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T19:10:41.953

刚刚尝试了一些东西，如果你只在二进制中乘以无符号值，这将起作用：

```
unsigned int multiply(unsigned int left, unsigned int right)
{
    unsigned long long result = 0; //64 bit result

    unsigned int R = right; //32 bit right input
    unsigned int M = left; //32 bit left input

    while (R > 0)
    {
        if (R & 1)
        {// if Least significant bit exists
            result += M; //add by shifted left
        }
        R >>= 1;
        M <<= 1; //next bit
    }

/*-- if you want to check for multiplication overflow: --
    if ((result >> 32) != 0)
    {//if has more than 32 bits
        return -1; //multiplication overflow
    }*/

    return (unsigned int)result;
} 
```

但是，那是它的二进制级别......我只是你有数字向量作为输入

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-04T01:18:41.270

我制作了这个算法，它使用了我在网上找到的二进制加法函数，并结合了一些代码，这些代码首先调整“移位”数字，然后再将它们相加。它适用于此视频中的逻辑[https://www.youtube.com/watch?v=umqLvHYeGiI](https://www.youtube.com/watch?v=umqLvHYeGiI)

这是代码：

```
#include <iostream>
#include <string>

using namespace std;

// This function adds two binary strings and return 
// result as a third string 
string addBinary(string a, string b)
{
    string result = ""; // Initialize result 
    int s = 0;          // Initialize digit sum 
    int flag =0;
    // Traverse both strings starting from last 
    // characters 
    int i = a.size() - 1, j = b.size() - 1;

    while (i >= 0 || j >= 0 || s == 1)
    {

        // Computing the sum of the digits from right to left
          //x = (condition) ? (value_if_true) : (value_if_false);
          //add the fire bit of each string to digit sum 
        s += ((i >= 0) ? a[i] - '0' : 0);
        s += ((j >= 0) ? b[j] - '0' : 0);

        // If current digit sum is 1 or 3, add 1 to result 
        //Other wise it will be written as a zero 2%2 + 0 = 0
            //and it will be added to the heading of the string (to the left)
        result = char(s % 2 + '0') + result;

        // Compute carry
        //Not using double so we get either 1 or 0 as a result
        s /= 2;

        // Move to next digits (more to the left)
        i--; j--;
    }
    return result;
}

int main()
{

    string a, b, result= "0"; //Multiplier, multiplicand, and result
    string temp="0";  //Our buffer
    int shifter = 0;  //Shifting counter 

    puts("Enter you binary values");
    cout << "Multiplicand     =  ";
    cin >> a;
    cout<<endl;

    cout << "Multiplier     =   ";
    cin >> b;
    cout << endl;

    //Set a pointer that looks at the multiplier from the bit on the most right 
    int j = b.size() - 1;

   // Loop through the whole string and see if theres any 1's
    while (j >= 0)
    {
        if (b[j] == '1')
        { 
            //Reassigns the original value every loop to delete the old shifting 
            temp = a;

            //We shift by adding zeros to the string of bits
            //If it is not the first iteration it wont add any thing because we did not "shift" yet
            temp.append(shifter, '0');

            //Add the shifter buffer bits to the result variable 
            result = addBinary(result, temp);
        }

        //we shifted one place 
        ++shifter; 

        //move to the next bit on the left
        j--;
    }

    cout << "Result     = " << result << endl;

    return 0;
} 
```

# performance - 通过内联所有 js 和 css 来优化单页移动 web 应用程序的注意事项

> ID：12341821
> 
> 赞同：1
> 
> 时间：2012-09-09T18:37:35.590
> 
> 标签：performance, html, web-applications, jquery-mobile, inline

我正在使用 jquery mobile 创建一个移动单页 Web 应用程序。webapp 包括一些 javascript 文件和一些 css 文件。我已经编写了一个连接和缩小 js 和 css 文件的部署脚本，现在我想知道是否应该直接在 HTML 文件中内联连接的 js 和 css - 请注意我在这里谈论的是单页应用程序（我知道在具有动态生成 HTML 的传统 web 1.0 应用程序中，这将是一个坏主意）。我还使用 appcache/manifest 文件来缓存单页应用程序，以便从缓存中提供对 Web 应用程序的后续访问，因此我主要关心的是初始加载时间。

当我内联所有内容（jquery、jquery mobile 等）时，我的 7kb HTML 文件增加到 350kb（压缩后为 100kb），但现在所有内容都可以在一个请求中加载。

但是我是否缺少其他一些好处，例如并行下载 js 文件 - 因此最好不要内联 css 和 js，而是将所有 js 和 css 连接到单个 js 文件和单个 css 文件然后获取他们每个人都在单独的请求中？

我应该注意关于文件大小的任何限制吗？也许网络路由器中的缓存在较小的文件大小或其他情况下效果更好？

所以我的问题归结为在制作单页移动网络应用程序时内联*所有内容是否是个好主意？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T20:21:36.513

应该连接多少以及应该内联多少的答案取决于许多条件。最终的答案是您应该进行 A/B 测试并找到最适合您的方法。根据您的描述，我建议您绝对不要内联 350K 的 CSS 和 JS。如果您这样做，那么对 HTML 或 JS 或 CSS 的任何更改都需要下载整个有效负载。相反，通过将 HTML、JS 和 CSS 作为单独的请求来划分这些更改和强制更新。你可以做[动态](http://stevesouders.com/hpws/dynamic-inlining.php)| [内联](http://www.stevesouders.com/blog/2011/03/28/storager-case-study-bing-google/)使第一个响应快速但利用（应用程序或本地存储）缓存来处理后续请求，但是当与应用程序缓存结合使用时会变得复杂（因为 HTML 文档保存到应用程序缓存中）。否则，只需将它们分开，将每个资源保存到应用程序缓存，并根据需要更新各个资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T05:10:02.530

如果可以从具有不同查询字符串的不同 url 访问您的 webapp，我不建议将所有内容内联到 html 中。例子 ：

*   [http://webapp.com/?fb_token=fdsf](http://webapp.com/?fb_token=fdsf)
*   [http://webapp.com/?referer=bla](http://webapp.com/?referer=bla)
*   [http://webapp.com/?tracker=toto](http://webapp.com/?tracker=toto)

每个都将在 appcache 中添加一个主副本（您可以通过查看 chrome://appcache-internals/ 在 chrome 中对其进行验证）。然后，您可能会在缓存方面达到 appcache 的配额限制。此外，在 appcache 更新时，浏览器会遍历其 appcache 条目列表并询问它的新副本。对于移动设备和应用缓存，我遵循的一个很好的折衷方案是保持 html 很小，然后有一个大的 css（包含 base 64 内联图像）和一个 js 文件。

仅供参考，目前在 appcache 中列出的所有资源总和的大小有一个配额限制，顺序为 5MB 到 25MB（25 是新的 iOS6 限制）

-seb

# html - HTML5：在光标附近显示提示文本

> ID：12341822
> 
> 赞同：1
> 
> 时间：2012-09-09T18:37:38.320
> 
> 标签：html, gwt

我正在寻找一种显示随光标移动的文本（提示）的方法。有没有办法用 GWT 或原生 HTML5 来做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T04:25:17.753

只需在任何 html 标签中使用 HTML **title**属性，如下所示：

```
<p title="I'm giving you a hint!">text</p> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T18:45:16.177

可以使用直接的 CSS 和 HTML 制作工具提示（如果您正在寻找的话）。

[林奇。](http://aninnovativeweb.tumblr.com/post/820491172/semantic-tooltips-with-pure-css3-and-html5)

我不能确认我以前用过这个，但代码是这样的：

**HTML**

```
<p>I <span data-tooltip=", really" class="tooltip">really</span> like pie.</p>​ 
```

**CSS**

```
.tooltip:hover:after { content: attr(data-tooltip); } 
```

[这是一个可以玩的jsFiddle。](http://jsfiddle.net/gY56r/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T00:46:54.870

在 GWT 中，创建一个具有 CSS 样式“位置：绝对”的标签。将 MouseMoveHandler 附加到它。在此处理程序中，将标签的位置设置在光标旁边。当您希望它出现时，不要忘记将此标签添加到您的视图中。

```
Label label = new Label("My hint that moves");
label.getElement().getStyle().setPosition(Position.ABSOLUTE);

label.addMouseMoveHandler(new MouseMoveHandler() {
    @Override
    public void onMouseMove(MouseMoveEvent event) {
        label.getElement().getStyle().setTop(event.getClientY(), Unit.PX);
        label.getElement().getStyle().setLeft(event.getClientX(), Unit.PX);
    }
} 
```

# nsmutabledictionary - 使用 ObjectForKey IsEqualToString 检查字典不起作用

> ID：12341826
> 
> 赞同：0
> 
> 时间：2012-09-09T18:38:14.803
> 
> 标签：nsmutabledictionary

我有这个代码并搜索了互联网，发现它没问题，但它不适合我

```
 NSMutableDictionary *dict = [NSMutableDictionary dictionary];
    .....
    NSLog(@"%@",[dict objectForKey:@"STATUS"]);

    if ([[dict objectForKey:@"STATUS"] isEqualToString:@"Y"]) {

       NSLog(@"Done");

    } 
```

NSLog 显示 Y 应该使用 if 语句

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T22:29:42.447

当你这样做时：

```
 [dict setObject:[arr objectAtIndex:1] ... 
```

我认为这是将字符串作为对象添加到字典中。NSLog 行正在工作，因为 NSLog 向它传递的每个对象发送“描述”消息以将其转换为其字符串值。你可以做同样的事情。

尝试改变这个：

```
if ([[dict objectForKey:@"STATUS"] isEqualToString:@"Y"]) 
```

对此：

```
if ([[[dict objectForKey:@"STATUS"] description] isEqualToString:@"Y"]) 
```

这将在进行比较之前获得 objectForKey: 返回的对象的字符串值。

如果您认为可能有一个空格会影响比较，请在比较之前修剪字符串，如下所示：

```
if ([[[dict objectForKey:@"STATUS"] stringByTrimmingCharactersInSet:
    [NSCharacterSet whitespaceAndNewlineCharacterSet]] isEqualToString:@"Y"]) 
```

# android - SurfaceView：如何在布局中声明？

> ID：12341831
> 
> 赞同：0
> 
> 时间：2012-09-09T18:38:47.617
> 
> 标签：android, android-layout, video, surfaceview

这是我的第一个安卓应用程序 :)

我正在关注此示例： [如何在 Android 上捕获视频录制？](https://stackoverflow.com/questions/1817742/how-can-i-capture-a-video-recording-on-android)

我的代码编译没有问题。现在，在此代码行 47：

```
45 SurfaceView cameraView = (SurfaceView) findViewById(R.id.omVideoView);
46 Log.v(TAG, "after get camera view");
47 holder = cameraView.getHolder(); 
```

我得到一个 NullPointerException。所以可能没有找到cameraView。这是声明。

```
<LinearLayout 
   android:id="@+id/LinearLayout01"
   android:layout_height="fill_parent" 
   xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="fill_parent"
   android:orientation="vertical">

     <SurfaceView 
        android:id="@+id/omVideoView"
        android:layout_width="fill_parent"        
        android:layout_gravity="center_horizontal"/>

</LinearLayout> 
```

我不明白为什么。我将此代码插入现有应用程序。这个应用程序有它自己的主 Activity，通过一个按钮，我从上面的链接中使用完全相同的代码启动另一个 Activity（只有视图 ID 发生了变化）。

```
public void showVideo(View w) {

    Intent intent = new Intent(skeletonActivity.this, VideoCapture.class);
    startActivityForResult(intent, CAPTURE_VIDEO_ACTIVITY_REQUEST_CODE);
} 
```

主应用程序的布局在 layout/main.xml 中，我的新 Activity（称为 VideoCapture）在 layout/activity_video_capture.xml 中

# .net - 如何使用 .net 在移动设备上有效地将行从 SQL Server 导入到 SQL Server CE？

> ID：12341835
> 
> 赞同：0
> 
> 时间：2012-09-09T18:39:15.277
> 
> 标签：.net, sql-server-ce

如何高效地完成工作？

我考虑过以下解决方案：

1.  序列化和压缩集合 -> 发送到移动设备反序列化并插入到 SQL Server CE：

    问题：
    对于很多记录，由于内存限制，无法反序列化如此数量的数据（发生内存不足）。因为需要在单独的服务调用中导入大量记录...

2.  使用要导入的数据动态创建 sqlce temp db -> 然后使用 Web 服务流将其发送到移动设备，连接到下载的 db 文件并将记录插入到正确的 db。

    这会给我一个电话，可能会避免内存限制......

3.  还有其他更好的数据在 SQL Server 和 SQL Server CE 之间传输的方法吗？

谢谢

# android - ImageView 上的 Android 进度条

> ID：12341840
> 
> 赞同：17
> 
> 时间：2012-09-09T18:39:48.680
> 
> 标签：android, android-asynctask, progress-bar

我正在开发一个应用程序，用户将在其中从相机拍摄照片并将其显示在具有图像视图的预览屏幕上。

```
**CameraCapture.java**

class ButtonClickHandler implements View.OnClickListener 
{
    public void onClick( View view ){
        myVib.vibrate(50);
        startCameraActivity();
    }
}

protected void startCameraActivity()
{
    File filenew = new File( _path );
    Uri outputFileUri = Uri.fromFile( filenew );

    Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE );
    intent.putExtra( MediaStore.EXTRA_OUTPUT, outputFileUri );
    intent.addFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);
    startActivityForResult( intent, 0 );
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) 
{   
    switch( resultCode )
    {
        case 0:
            break;

        case -1:
            //pictaken++;

            onPhotoTaken();

            break;
    }
}

protected void onPhotoTaken()
{
    //pictaken=true;

    Intent i = new Intent(CameraCapture.this,Preview.class);
    startActivity(i);
} 
```

在我的 Preview 类中，捕获的图片显示在 ImageView 上

```
**Preview.java**

File imgFile = new File("/sdcard/DCIM/Camera/test.jpg");
if(imgFile.exists()){

    // Bitmap myBitmap = BitmapFactory.decodeFile(imgFile.getAbsolutePath());

    ImageView myImage = (ImageView) findViewById(R.id.image);
    Bitmap myBitmap = BitmapFactory.decodeFile(imgFile.getAbsolutePath());
    Matrix mat = new Matrix();
    String degree="90";
    mat.postRotate(Integer.parseInt(degree));
    Bitmap bMapRotate = Bitmap.createBitmap(myBitmap, 0, 0,myBitmap.getWidth(),myBitmap.getHeight(), mat, true);
    myImage.setImageBitmap(bMapRotate);
    //myImage.setImageBitmap(myBitmap);

}
_image = ( ImageView ) findViewById( R.id.image ); 
```

有什么方法可以在 ImageView 上显示进度条，直到它从 SD 卡加载捕获的图像。提前谢谢:)

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-09-09T19:19:43.197

将您的 ImageView 和 Progressbar 放在 RelativeLayout 中。对于您的 ProgressBar，请使用：

```
android:layout_centerInParent="true" 
```

它将在 RelativeLayout 中居中，这意味着在 ImageView 上。您可能还想在图像加载后隐藏 ProgressBar：

```
progressBar.setVisibility(View.Gone) 
```

当图像已加载。

示例代码：

```
 <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content">

         <ImageView 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:adjustViewBounds="true"/>

        <ProgressBar
            style="?android:attr/progressBarStyleSmall"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerInParent="true"
            android:visibility="visible"/>

    </RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-12-17T17:39:22.480

这是我的解决方案。这有点不同。您可以使用它来创建带有图像和进度条的介绍视图。在这里，进度条位于中心底部的 150dp 处。`FrameLayout`也可以使用。

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <ImageView
        android:id="@+id/imageView"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:contentDescription="@string/intro_description"
        android:scaleType="fitXY"
        android:src="@drawable/intro" />

    <ProgressBar
        android:id="@+id/progress"
        style="?android:attr/progressBarStyle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_marginTop="150dp"
        android:visibility="visible" />

</FrameLayout> 
```

# php - 两个数组的成对减法

> ID：12341843
> 
> 赞同：1
> 
> 时间：2012-09-09T18:40:17.540
> 
> 标签：php, arrays

有两个数组：

```
 $arr1 = array(1,2,3);
 $arr2 = array(0,0,1); 
```

我需要对这两个数组进行成对减法。arr1 - arr2 的结果应该是：

`$arr3 = array(1,2,2)`.

我需要为此使用 FOR 循环还是有更快的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-09T18:50:15.797

除了其他答案，您还可以使用[`array_map()`](http://php.net/manual/en/function.array-map.php)

```
function sub($x, $y){
    return $x - $y;
}

$arr3 = array_map('sub', $arr1, $arr2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T18:45:44.353

这个功能怎么样？

```
function array_sub_values($arr1, $arr2)
{
    $result = array();
    foreach ($arr1 as $k => $val)
        $result[] = $val - $arr2[$k];
    return $result;
} 
```

所以你可以这样做：

```
$arr1 = array(1, 2, 3);
$arr2 = array(0, 0, 1);

$arr3 = array_sub_values($arr1, $arr2); 
```

# php - 警告：PDOStatement::execute(): SQLSTATE[HY093]:

> ID：12341861
> 
> 赞同：2
> 
> 时间：2012-09-09T18:42:25.280
> 
> 标签：php, mysql, pdo

我正在尝试开始掌握 PHP 和 PDO。当我现在开始时，我听说 PDO 更有益，这就是我不使用更流行的 mysqli 的原因。

我无法使用 PDO 将数据插入到我的数据库中。我想尝试使用准备好的语句来最小化 sql 注入。我已经尝试了很多方法，并且一直在碰壁。

我可以做一些指针。

这是错误消息。

```
Warning: PDOStatement::execute(): SQLSTATE[HY093]: Invalid parameter number: parameter was not defined in C:\wamp\www\test-search\insert_property.php on line 61 
```

这是相关的php代码。

```
// Insert Property

// Include db 

include 'db_connect_pdo.php';
include 'defines.php';

try {

// create SQL
$sql = "INSERT INTO property (pid, title, intro_en, description_en, bedrooms,
bathrooms, address, city, country, stype, ptype, price)
VALUES(:pid, :title, :intro_en, :description_en, :bedrooms, :bathrooms, :address,
:city, :country, :stype, :ptype, :price)";

// prepare the statement
$stmt = $conn->prepare($sql);

// bind the parameters and execute the statement
$stmt->bindValue(':pid', $pid);

$stmt->bindValue(':title', $title);

$stmt->bindValue(':intro_en', $intro_en);

$stmt->bindValue(':description_', $description_en);

$stmt->bindValue(':bedrooms', $bedrooms);

$stmt->bindValue(':bathrooms', $bathrooms);

$stmt->bindValue(':address', $address);

$stmt->bindValue(':city', $city);

$stmt->bindValue(':country', $country);

$stmt->bindValue(':stype', $stype);

$stmt->bindValue(':ptype', $ptype);

$stmt->bindValue(':price', $price);

// execute the statement

$stmt->execute();

} 
catch (Exception $e) 
{ 
echo $e->getMessage(); 
} 
$conn = null;
?>
</blockquote></code> 
```

不知道哪里出了问题，任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T18:46:05.757

你的错误是这一行：

```
$stmt->bindValue(':description_', $description_en); 
```

应该：

```
$stmt->bindValue(':description_en', $description_en); 
```

# scala - 如何避免Scala中的依赖注入？

> ID：12341867
> 
> 赞同：5
> 
> 时间：2012-09-09T18:42:42.693
> 
> 标签：scala, dependency-injection, guice

我阅读[了 Dependency Injection without the Gymnastics PDF](http://phillyemergingtech.com/2012/system/presentations/di-without-the-gymnastics.pdf "没有体操 PDF 的依赖注入")，这表明不需要任何花哨的 DI 框架，但它超出了我的掌握范围（至少没有具体示例）。当我有机会时，我会尝试观看[没有体操的依赖注入](http://vimeo.com/44502327 "没有体操的依赖注入")和[简单的依赖注入。](http://www.youtube.com/watch?v=ZasXwtTRkio "死简单依赖注入")

在 Java 中使用 Guice，如果 A 依赖于 B 和 C，而 B 和 C 都依赖于 D，则会有如下内容：

```
public class A {
    @Inject
    public A(B b, C c) {
        this.b = b;
        this.c = c;
    }
}

public class B {
    @Inject
    public B(D d) {
        this.d = d;
    }
}

public class C {
    @Inject
    public C(D d) {
        this.d = d;
    }
}

public class D { /* ... */ } 
```

和一个说明要使用哪个 D 实现的模块，然后只需从注入器中请求 A 的一个实例：

```
A a = injector.createInstance(A.class); 
```

鉴于上述 URL 中呈现的内容，上述代码的 Scala 等效项看起来如何？

FWIW，我也在调查[https://github.com/dickwall/subcut/blob/master/GettingStarted.md](https://github.com/dickwall/subcut/blob/master/GettingStarted.md)，我只是想了解反 DI 解决方案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-10T04:22:53.007

*对于您描述的用例，*隐式参数完全足够了。**

 *```
case class A(implicit b: B, c: C)
case class B(implicit d: D)
case class C(implicit d: D)
class D { /* ... */ }

implicit val theD = new D
implicit val theB = B()
implicit val theC = C() 
```

现在您可以`A`通过以下方式要求：

```
val a = A() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-09T18:58:49.483

你可以用*self-types*解决它。

> A 依赖于 B 和 C 并且 B 和 C 都依赖于 D

所以可以这样写：

```
class A {
  self: B with C => 
}

trait B { 
  self: D => 
}

trait C {
  self: D => 
}

trait D {} 
```

然后在通话方面：

```
val x = new A with BImpl with CImpl with DImpl 
```

但下面的代码不会编译，因为对 B、C、D 类的依赖没有解决：

```
val x = new A 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T22:30:43.873

提供这种类型的依赖注入很棘手。上述大多数示例都要求您在实例化类的位置附近创建隐式。

我能想到的最接近的是：

```
class A(implicit b:B, c:C)
class B(implicit d:D)
class C(implicit d:D)
trait D { //the interface 
  def x:Unit
}

object Implicits {
  implicit def aFactory:A = new A
  implicit lazy val bInstance:B = new B
  implicit def cFactory:C = new C
  implicit def dFactory:D = new D {
     def x:Unit = {/* some code */}
  }
} 
```

然后在你的代码中你像这样使用它：

```
import Implicits._

object MyApplication {
   def main(args: Array[String]):Unit = {
      val a = new A
   }
} 
```

如果您（例如）在测试时需要能够指定不同的版本，您可以执行以下操作：

```
import Implicits._

object MyApplication {

  // Define the actual implicits
  Implicits.module = new Module {
    import Implicits._

    def a = new A
    lazy val b = new B
    def c = new C
    def d = new D {
      def x = println("x")
    }
  }

  def main(args: Array[String]):Unit = {
    val a = new A // or val a = implicitly[A] 
  }

}

// The contract (all elements that you need)
trait Module {
  def a: A
  def b: B
  def c: C
  def d: D
}

// Making the contract available as implicits
object Implicits {
  var module: Module = _

  implicit def aFactory:A = module.a
  implicit def bFactory:B = module.b
  implicit def cFactory:C = module.c
  implicit def dFactory:D = module.d
} 
```

这将允许您在任何文件中简单地导入 Implicits._ 并提供与原始问题中的工作流程类似的工作流程。

然而，在大多数情况下，我不会使用这种策略。我只会在创建实例的类中提供隐式：

```
object MyApplication {

  implicit def a: A = new A
  implicit lazy val b: B = new B
  implicit def c: C = new C
  implicit def d: D = new D {
    def x: Unit = println("x")
  }

  def main(args: Array[String]): Unit = {
    val a = implicitly[A]
    val e = new E
  }

}

class E(implicit d:D) {
    new C
} 
```

这里`E`是在另一个文件中定义并创建一个`C`. 我们需要`D`传递给依赖于(via )`E`的文档并与其一起传递。`E``D``C`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T02:05:56.280

我认为@om-nom-nom 的答案非常接近您想要的。这是我所拥有的：

```
class A {
  self: B with C => 

  def sum = tripleD + doubleD
}

trait B { 
  self: D => 

  def tripleD = x * 3
}

trait C {
  self: D => 

  def doubleD = x * 2
}

trait D extends B with C {
  val x: Int
}

trait E extends D {
  val x = 3
}

trait F extends D {
  val x = 4
}

val a = new A with E
val b = new A with F

println("a.sum = " + a.sum)
println("b.sum = " + b.sum) 
```*

# c# - 如何调整视频画笔的纵横比

> ID：12341870
> 
> 赞同：2
> 
> 时间：2012-09-09T18:42:58.950
> 
> 标签：c#, windows-phone-7, xaml

我正在尝试在我的应用程序中放置一个视频画笔，尽管我注意到纵向模式下的纵横比与横向模式下的不同。无论手机旋转如何，我将如何调整它以使 videorbush 保持其默认纵横比？

主页.xaml

```
<Rectangle x:Name="videoRectangle" Grid.Row="0" Grid.ColumnSpan="2" >
            <Rectangle.Fill>
                <VideoBrush  x:Name="viewfinderBrush">
                    <VideoBrush.RelativeTransform>
                        <!--<CompositeTransform x:Name="viewfinderBrushTransform" CenterX=".5" CenterY=".5" Rotation="90" />-->
                        <CompositeTransform x:Name="viewfinderBrushTransform" CenterX=".5" CenterY=".5"  />
                    </VideoBrush.RelativeTransform>
                </VideoBrush>
            </Rectangle.Fill>
</Rectangle> 
```

MainPage.xaml.cs

```
..do adjustments in code behind? 
```

需要注意的是，我已经设置`SupportedOrientations="Portrait"`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T00:43:23.940

您只需根据设备的方向将[Brush.RelativeTransform](http://msdn.microsoft.com/en-us/library/system.windows.media.brush.relativetransform%28v=vs.95%29.aspx)属性设置为[CompositeTransform 。](http://msdn.microsoft.com/en-us/library/system.windows.media.compositetransform%28v=vs.95%29.aspx)

检查[此示例](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202956%28v=vs.92%29.aspx)并在代码上搜索“OnOrientationChanged”以查看您需要在应用中执行的操作。

# php - 在 foreach 循环中使用 array_merge 将数组列添加到多维数组

> ID：12341871
> 
> 赞同：0
> 
> 时间：2012-09-09T18:43:06.490
> 
> 标签：php, arrays, multidimensional-array, array-merge, var-dump

我正在尝试向 foreach 循环中的每一行添加另一列数据。它的目的是记住从 XML 处理到多维数组中导入的数据元素。尽管 var_dumps 看起来不错，但它仍然是一个标量。

```
<?php 
$KEY = 0;
foreach ($eventsArray as $keyMe){
  $thisKey['KEY'][0] = strval($KEY);
  $keyedArray = array_merge($keyMe, $thisKey);
$KEY++;
}

// Prep for multisort
foreach ($keyedArray as $key => $value){
  $date[$key] = $value['DATE'];
  $title[$key] = $value['TITLE'];
  $link[$key] = $value['LINK'];
  $slide[$key] = $value['SLIDE'];
  $location[$key] = $value['LOCATION'];
  $time[$key]= $value['TIME'];
  $KEY[$key] = $value['KEY']; // Warning: Cannot use a scalar value as an array
}

/* var_dump(
array(7) { 
  ["DATE"]=> array(1) { [0]=> string(10) "2012-12-18" } 
  ["TITLE"]=> array(1) { [0]=> string(20) "Event Title" } 
  ["LINK"]=> array(1) { [0]=> string(38) "aLinkLocation.htm" } 
  ["SLIDE"]=> array(1) { [0]=> string(2) "16" } 
  ["LOCATION"]=> array(1) { [0]=> string(8) "Location of Event" } 
  ["TIME"]=> array(1) { [0]=> string(3) "8am" } 
  ["KEY"]=> array(1) { [0]=> string(2) "23" } 
} 
*/ 
```

# php - 解码明确编码在文件名中的时间戳

> ID：12341875
> 
> 赞同：0
> 
> 时间：2012-09-09T18:43:22.620
> 
> 标签：php, regex

不久前，当用户将文件上传到我的网站时，我决定更改文件名的格式（*这是一个好主意！*），以在文件名中包含 UNIX_Timestamp，不幸的是，在与我的文件相关联的时间戳之后，这证明非常有用数据库被擦除，文件名结构发生了很大变化，我目前正在尝试从文件名中恢复有效的时间戳，但是到目前为止我只能恢复一半。

之前，我将文件名结构化为：

dcd1322318879.png - 以 unix 时间戳开头的字母。

然后，我允许人们开始登录并使文件名更加人性化，他们现在如下所示；

username-09092012-183422.jpeg 其中 username 是登录的用户名。我现在遇到的问题是，首先，我对正则表达式很糟糕，对于以前的文件名（没有用户数据和人类友好的日期），我的代码是：

```
$newDate = preg_replace("/[^0-9]/","", $data['name']); 
```

但是显然现在这不起作用，因为用户名可以包含数字，因此该数字也将包含在日期的最终数字中。

我目前想知道是否无论如何我可以解决这个问题，我想我添加连字符（-）的事实会很有用，因为我可以将它用作分隔符，但是我不知道从哪里开始。我只需要获取文件名的最后两部分，其中包含日期和时间，这样我就可以将它们转换为 unix 时间戳。

任何帮助是极大的赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T18:51:24.123

试试这个：

```
preg_match_all("/(\d{8})-(\d+)/", $str, $matches); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T18:52:38.053

最简单的方法是使用

```
 $array = explode ("-", $filename); 
  print_r ($array); 
```

除非您真的想使用正则表达式，但我认为不需要它，因为系统是完成所有创建的系统。这意味着将没有用户输入......它也可能取决于您如何设置脚本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T19:02:29.610

你去了，还有另一种方式，包括转换为 unix 时间戳：

```
preg_match_all('/[0-9]+/', $string, $matches);
$d =  DateTime::createFromFormat('dmY His', $matches[0][0].' '.$matches[0][1]);
$timestamp = $d->getTimestamp(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-09T19:05:54.330

根据您的问题，我假设连字符可以用作正则表达式的结构。也就是说，用户名和日期不会包含它们。

那么，这个非常简单的模式就可以工作了：

```
/(.*?)-(.*?)-(.*)/ 
```

第 1 组包含用户名，第 2 组包含日期，第 3 组包含文件名（请注意，文件名（第三个连字符之后的所有内容）可以是任何内容，包括更多连字符）。

（the`.*?`是点，由 '0 次或多次'量化`*`，并且`?`使量词变得懒惰，因此`.`不只是贪婪地跑到字符串的末尾）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-12T01:52:08.380

要从您的文件名中解析所有三个组件，请[尝试以下](http://codepad.viper-7.com/jYbSOP)操作：

```
<?php
preg_match(
    "/^([\w]+)-(\d{8})-(\d{6})/",
    "username-09092012-183422.jpeg",
    $matches);

echo "user=[{$matches[1]}]<br/>date=[{$matches[2]}]<br/>time=[{$matches[3]}]<br/>";
?> 
```

产生：

```
user=[username]
date=[09092012]
time=[183422] 
```

您也可以考虑将文件名中的日期合并为`YYYYMMDD`. 例如：

```
'09092012' => '20120909' 
```

如果您愿意，这将使您更容易按日期对数据进行排序。

# iphone - 从字典数组创建值数组

> ID：12341878
> 
> 赞同：0
> 
> 时间：2012-09-09T18:43:55.107
> 
> 标签：iphone, objective-c, ios

这个问题听起来很奇怪，但我得到了一系列字典作为解析结果。

像这样的东西：

```
parsed content: (
        {
        "name" = "John";
        "lastname" = "Doe";
        "foo" = "bar";
    } 
```

对于创建值数组的最佳方法有什么建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T19:27:28.597

像这样？

```
- (void)flattenDictionary:(NSDictionary *)d intoKeys:(NSMutableArray *)keys andValues:(NSMutableArray *)values {

    for (id key in [d allKeys]) {
        [keys addObject:key];
        [values addObject:[d valueForKey:key]];
    }
}

- (void)flattenDictionaries:(NSArray *)arrayOfDictionaries {

    NSMutableArray *keys = [NSMutableArray array];
    NSMutableArray *values = [NSMutableArray array];

    for (NSDictionary *d in arrayOfDictionaries) {
        [self flattenDictionary intoKeys:keys andValues:values];
    }

    NSLog(@"now we have these values %@", values);
    NSLog(@"corresponding to these keys %@", keys);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T18:51:29.243

您可以通过以下方式获取值：

```
NSArray *values = dictionary.allValues; 
```

或者，循环遍历它：

```
[dictionary enumerateKeysAndObjectsUsingBlock:^(id key, id object, BOOL *stop) {
    NSLog(@"%@ = %@", key, object);
}]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T18:45:37.903

要通过它们循环并创建一个数组。

# .htaccess - 2 htaccess 中的重写规则

> ID：12341881
> 
> 赞同：0
> 
> 时间：2012-09-09T18:44:03.150
> 
> 标签：.htaccess

我想将所有内容重定向到`a.php`. 并且`baba`到`b.php`.

我做了以下事情：

.htaccess：

```
RewriteEngine on

RewriteCond %{REQUEST_URI} !a.php
RewriteCond %{REQUEST_URI} !baba
RewriteRule .* a.php

RewriteRule baba b.php 
```

a.php：`<?php echo 'a.php'; ?>`
b.php：`<?php echo 'b.php'; ?>`

但是 baba 也重定向到 a.php。

所以我将 htaccess 中的第 4 行修改为：`RewriteCond %{REQUEST_URI} ^!baba`

现在 baba 重定向到 b.php 但其他所有内容都会`Not found`出错。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T19:07:28.120

重写引擎循环直到进入引擎的 URI 与输出相同。之所以会这样做`baba`是`a.php`因为它首先被重写为`b.php`，然后当引擎循环时，`b.php`被重写为`a.php`. 您可以通过向第一条规则添加附加条件来解决此问题：

```
RewriteEngine on

RewriteCond %{REQUEST_URI} !a.php
RewriteCond %{REQUEST_URI} !b.php
RewriteCond %{REQUEST_URI} !baba
RewriteRule .* a.php

RewriteRule baba b.php 
```

所以`b.php`不会被重写为`a.php`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T19:11:34.553

您可以分开处理不同类型链接的规则。

在每个块中，您可以根据`RewriteCond`需要放置任意数量的指令，但每个块都应由`RewriteRule`指令关闭。因为 RewriteCond 只告诉何时重写，而重写本身是在 RewriteRule 中完成的。

在你的第一个块中，你应该检查它是`!baba`和`!b.php`

# python - 如何在 Python 中与国际象棋引擎通信？

> ID：12341882
> 
> 赞同：11
> 
> 时间：2012-09-09T18:44:03.620
> 
> 标签：python, process, python-3.x, chess

在 Windows 7 上，我可以通过命令行与国际象棋引擎进行通信。Win 7上与[Stockfish](http://www.stockfishchess.com/)的小示例会话：

```
C:\run\Stockfish>stockfish-x64.exe
Stockfish 2.2.2 JA SSE42 by Tord Romstad, Marco Costalba and Joona Kiiski
quit

C:\run\Stockfish> 
```

第一行是引擎输出的，'quit' 是我输入退出引擎的内容（[我可以做其他事情](http://wbec-ridderkerk.nl/html/UCIProtocol.html)，但这对我来说很清楚）。

现在我想从 python 与那个引擎进行通信：

```
import subprocess
engine = subprocess.Popen(
    'stockfish-x64.exe',
    stdin=subprocess.PIPE,
    stdout=subprocess.PIPE,
)
for line in engine.stdout:
    print(line.strip())
engine.stdin.write('quit\n') 
```

我明白了

```
C:\run\Stockfish>communicate.py
b'Stockfish 2.2.2 JA SSE42 by Tord Romstad, Marco Costalba and Joona Kiiski' 
```

但它不会退出引擎（没有`C:\run\Stockfish>`提示），它会一直等待输入。我必须用手关上窗户。似乎没有将我的退出消息（python 脚本的最后一行）写入标准输入。

换句话说，我可以从标准输出读取，但是当我写入标准输入时，什么也没有发生。

我做错了什么以及如何做对？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T18:59:21.143

您遇到了死锁：子进程正在等待输入，而您的程序正在等待它输出更多行

```
for line in engine.stdout:
    print(line.strip()) 
```

此循环仅在子进程关闭其`stdout`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-12-28T07:05:36.360

您可能想像 python-chess 那样使用 asyncio。看

[引擎.py](https://github.com/niklasf/python-chess/blob/master/chess/engine.py)

以及[文档中的示例](https://python-chess.readthedocs.io/en/latest/engine.html)

```
import asyncio
import chess
import chess.engine

    async def main():
        transport, engine = await chess.engine.popen_uci("/usr/bin/stockfish")

        board = chess.Board()
        while not board.is_game_over():
            result = await engine.play(board, chess.engine.Limit(time=0.1))
            board.push(result.move)

        await engine.quit()

    asyncio.set_event_loop_policy(chess.engine.EventLoopPolicy())
    asyncio.run(main()) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-28T11:44:54.533

我将问题中的编辑移至此答案中。

感谢 larsmans 的帮助，我解决了它。

示例 Python 脚本：

```
import subprocess, time

engine = subprocess.Popen(
    'stockfish14.exe',
    universal_newlines=True,
    stdin=subprocess.PIPE,
    stdout=subprocess.PIPE,
    bufsize=1,
)

def put(command):
    print('\nyou:\n\t'+command)
    engine.stdin.write(command+'\n')

def get():
    # using the 'isready' command (engine has to answer 'readyok')
    # to indicate current last line of stdout
    engine.stdin.write('isready\n')
    print('\nengine:')
    while True:
        text = engine.stdout.readline().strip()
        if text == 'readyok':
            break
        if text !='':
            print('\t'+text)

get()
put('uci')
get()
put('setoption name Hash value 128')
get()
put('ucinewgame')
get()
put('position startpos moves e2e4 e7e5 f2f4')
get()
put('go infinite')
time.sleep(3)
get()
put('stop')
get()
put('quit') 
```

输出：

```
C:\run\chessengines\Stockfish>communicate.py

engine:
        Stockfish 14 by the Stockfish developers (see AUTHORS file)

you:
        uci

engine:
        id name Stockfish 14
        id author the Stockfish developers (see AUTHORS file)
        option name Debug Log File type string default
        option name Threads type spin default 1 min 1 max 512
        option name Hash type spin default 16 min 1 max 33554432
        option name Clear Hash type button
        option name Ponder type check default false
        option name MultiPV type spin default 1 min 1 max 500
        option name Skill Level type spin default 20 min 0 max 20
        option name Move Overhead type spin default 10 min 0 max 5000
        option name Slow Mover type spin default 100 min 10 max 1000
        option name nodestime type spin default 0 min 0 max 10000
        option name UCI_Chess960 type check default false
        option name UCI_AnalyseMode type check default false
        option name UCI_LimitStrength type check default false
        option name UCI_Elo type spin default 1350 min 1350 max 2850
        option name UCI_ShowWDL type check default false
        option name SyzygyPath type string default <empty>
        option name SyzygyProbeDepth type spin default 1 min 1 max 100
        option name Syzygy50MoveRule type check default true
        option name SyzygyProbeLimit type spin default 7 min 0 max 7
        option name Use NNUE type check default true
        option name EvalFile type string default nn-3475407dc199.nnue
        uciok

you:
        setoption name Hash value 128

engine:

you:
        ucinewgame

engine:

you:
        position startpos moves e2e4 e7e5 f2f4

engine:

you:
        go infinite

engine:
        info string NNUE evaluation using nn-3475407dc199.nnue enabled
        info depth 1 seldepth 1 multipv 1 score cp 90 nodes 33 nps 33000 tbhits 0 time 1 pv e5f4
        info depth 2 seldepth 2 multipv 1 score cp 336 nodes 72 nps 36000 tbhits 0 time 2 pv e5f4 a2a3 d8h4 e1e2
        info depth 3 seldepth 3 multipv 1 score cp 322 nodes 115 nps 57500 tbhits 0 time 2 pv e5f4 g2g3 f4g3
        info depth 4 seldepth 4 multipv 1 score cp 160 nodes 438 nps 219000 tbhits 0 time 2 pv e5f4 d2d3 d8h4 e1e2
        info depth 5 seldepth 5 multipv 1 score cp 38 nodes 1463 nps 365750 tbhits 0 time 4 pv e5f4 g1f3 g8f6 b1c3 d7d5
        info depth 6 seldepth 6 multipv 1 score cp 41 nodes 2424 nps 404000 tbhits 0 time 6 pv e5f4 g1f3 g8f6 b1c3 d7d5 e4d5 f6d5
        info depth 7 seldepth 7 multipv 1 score cp 41 nodes 3409 nps 426125 tbhits 0 time 8 pv e5f4 g1f3 g8f6 b1c3 d7d5 e4d5 f6d5
        info depth 8 seldepth 11 multipv 1 score cp 43 nodes 4937 nps 448818 tbhits 0 time 11 pv d7d5 g1f3 d5e4 f3e5 f7f6 b1c3 f6e5 d1h5 e8d7
        info depth 9 seldepth 11 multipv 1 score cp 4 nodes 14604 nps 486800 tbhits 0 time 30 pv d7d5 g1f3 e5f4 e4d5 g8f6 f1c4 f6d5 e1g1 d5b6
        info depth 10 seldepth 13 multipv 1 score cp 24 nodes 16663 nps 490088 tbhits 0 time 34 pv d7d5 g1f3 e5f4 e4d5 g8f6 f1c4 f6d5 e1g1
        info depth 11 seldepth 16 multipv 1 score cp 49 nodes 24347 nps 486940 tbhits 0 time 50 pv e5f4 f1c4 d7d5 e4d5 g8f6 b1c3 c7c6
        info depth 12 seldepth 19 multipv 1 score cp 46 nodes 58792 nps 477983 tbhits 0 time 123 pv e5f4 g1f3 g7g5 h2h3 d7d5 e4d5 d8d5 b1c3 d5e6 d1e2
        info depth 13 seldepth 19 multipv 1 score cp 45 nodes 88777 nps 482483 tbhits 0 time 184 pv e5f4 f1c4 d7d6 b1c3 d8h4 e1f1 c8e6 c3d5 h4d8 g1f3
        info depth 14 seldepth 17 multipv 1 score cp 50 nodes 120394 nps 483510 tbhits 0 time 249 pv e5f4 f1c4 d7d5 c4d5 d8h4 e1f1 b8c6 d2d4 g7g5 b1c3 f8g7 g1f3 h4h5
        info depth 15 seldepth 19 multipv 1 score cp 52 nodes 192828 nps 480867 tbhits 0 time 401 pv e5f4 f1c4 g8f6 b1c3 c7c6 d2d4 d7d5 e4d5 c6d5 d1e2 f8e7 c4b3 e8g8 c1f4 e7b4 g1f3
        info depth 16 seldepth 22 multipv 1 score cp 59 nodes 309617 nps 475602 tbhits 0 time 651 pv e5f4 f1c4 g8f6 b1c3 c7c6 d2d4 d7d5 e4d5 c6d5 c4b5 b8c6 c1f4 f8d6 f4d6 d8d6 d1e2 c8e6 b5c6
 b7c6 g1f3
        info depth 17 seldepth 26 multipv 1 score cp 34 nodes 955333 nps 476237 hashfull 65 tbhits 0 time 2006 pv e5f4 f1c4 b8c6 d2d4 d8h4 e1f1 d7d6 g1f3 c8g4 c4b5 h4h5 b1c3 e8c8 b5c6 b7c6 c
1f4 f7f5 d1d3 g8f6 d4d5 f5e4 d3a6 c8d7
        info depth 18 seldepth 28 multipv 1 score cp 44 nodes 1132938 nps 477227 hashfull 78 tbhits 0 time 2374 pv e5f4 f1c4 c7c6 d2d4 d7d5 e4d5 c6d5 c4b5 b8c6 c1f4 g8f6 b1c3 f8b4 g1f3 b4c3
b2c3 e8g8 e1g1 c8g4

you:
        stop

engine:

you:
        quit

C:\run\chessengines\stockfish> 
```

# node.js - Async.js 并行回调未执行

> ID：12341883
> 
> 赞同：1
> 
> 时间：2012-09-09T18:44:21.240
> 
> 标签：node.js, async.js, node-async

我正在使用[Async.js 中的并行函数，](https://github.com/caolan/async#parallel)由于某种原因，最终的回调没有被执行，我没有看到任何地方发生错误。

我正在动态创建一个传递给并行调用的函数数组，如下所示：

```
// 'theFiles' is an array of files I'm working with in a code-generator style type of scenario
var callItems = [];
theFiles.forEach(function(currentFile) {

      var genFileFunc = generateFileFunc(destDir + "/" + currentFile, packageName, appName);

      callItems.push(genFileFunc(function(err, results) {
        if(err) {
          console.error("*** ERROR ***" + err);
        } else {
          console.log("Done: " + results);  
        }

      }));

    });

    async.parallel(callItems, function(err, results) {
      console.log(err);
      console.log(results);
      if(err) {
        console.error("**** ERROR ****");
      } else {
        console.log("***** ALL ITEMS HAVE BEEN CALLED WITHOUT ERROR ****");  
      }
    }); 
```

然后在一个外部函数中（在上面执行 forEach 的函数之外）我有 generateFileFunc() 函数。

```
// Function that returns a function that works with a file (modifies it/etc). 
function generateFileFunc(file, packageName, appName) {
  return function(callback) {
    generateFile(file, packageName, appName, callback);
  }
} 
```

我看过[这篇 SO 帖子](https://stackoverflow.com/questions/6496979/passing-arrays-of-functions-to-async-parallel)，它帮助我到达了我所在的位置。但是最终的回调没有被执行。并行调用中的所有项目都在执行。在最底部的 gnerateFile (function) 内部，我调用了回调，所以这是金色的。

任何人都知道为什么这可能无法正常执行？

最终结果是并行处理每个函数调用，然后在我完成时收到通知，以便我可以继续执行其他一些指令。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T19:41:19.890

逐行分析正在发生的事情，从以下开始：

```
var genFileFunc = generateFileFunc(...); 
```

由于您的函数`generateFileFunc`返回函数，因此变量`genFileFunc`是以下函数

```
genFileFunc === function(callback) {
    generateFile( ... );
}; 
```

现在很明显，这个函数**什么都不**返回（没有`return`语句）。显然，*我完全*理解 JavaScript 的内置`undefined`常量。特别是你有

```
genFileFunc(function(err, results) { ... } ) === undefined 
```

这是调用它的结果。因此你推`undefined`到`callItems`. 难怪它不起作用。

如果不知道究竟是做什么的，很难说出如何解决这个`generateFile`问题，但无论如何我都会尝试。尝试简单地这样做：

```
callItems.push(genFileFunc); 
```

因为您必须将**函数**推送到`callItems`，而不是函数的结果，即`undefined`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T19:30:49.887

好奇的。

迄今为止最好的猜测：在 generateFile 内部，返回回调而不是调用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T21:10:46.270

您可以通过以下方式实现既定目标

```
async.map(theFiles, function(file, done) {
  generateFile(destDir + "/" + file, packageName, appName, done);
}, function(err, res) {
  // do something with the error/results
}); 
```

# objective-c - 为什么我不能访问在超类中设置 w/ 属性的实例变量？

> ID：12341895
> 
> 赞同：0
> 
> 时间：2012-09-09T18:44:47.197
> 
> 标签：objective-c

我有以下对象：

```
@interface Foo : NSObject
@property (readonly, strong) NSString *someVar;
@end

@implemtation Foo
@sythensize someVar = _someVar;
@end 
```

然后我将其子类化：

```
@interface Bar : Foo
-(id)initWithString:(NSString *)string;
@end

@implementation Bar
-(id)initWithString:(NSString *)string {
  _someVar = string;
}
@end 
```

但我得到一个“使用未声明的标识符 _someVar”..... 为什么 Bar 不知道 foo 的实例变量 _someVar ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T18:58:43.030

始终使用 getter/setter。低级/直接访问仅在寻求十亿分之一秒的性能改进时才合适，在这种情况下，我质疑您是否应该完全放弃 Obj-C 并改用 C。

这是我的做法：

```
@synthesize someVar;

-(id)initWithString:(NSString *)string {
  self.someVar = string;
} 
```

或者，如果我有充分的理由不使用访问器方法，那么。我根本不使用@synthesize。

此外，在最新版本的 Xcode 中，您可以跳过该`@synthesize`行。

# javascript - Javascript 根据提交值/名称跳转到锚点

> ID：12341909
> 
> 赞同：0
> 
> 时间：2012-09-09T18:46:03.463
> 
> 标签：javascript, php, forms, dom-events

我正在处理一个基本上是长表单的页面，其中包含信息表，每个表后都有一个提交按钮。

表单提交给自身并根据用户输入更改表中的信息。

我想做的是，如果按下“提交按钮 X”，则页面跳转到“部分 X”，如果按下“提交按钮 Y”，则跳转到“部分 Y”，等等。

我目前在文档的头部使用这个 Javascript 来尝试完成这个：

```
<script type="text/javascript">

var anchors = new Array(

<?php 
for($i = 0; $i < 13; $i++) {
    $anchors =  "\"$divTag[$i]\"";
    if($i < 12) {
        $anchors .= ", ";
    }
    echo $anchors;
} ?>

)

function jumpToAnchor() {

    <?php if(isset($_POST["submit_fjw"])) { ?>

    window.location = String(window.location).replace(/\#.*$/, "") +
    "#" + anchors[0];

    <?php } if(isset($_POST["submit_jwl"])) { ?>

    window.location = String(window.location).replace(/\#.*$/, "") +
    "#" + anchors[1];

    <?php } ?>
} 
```

它工作......有点。它不会在第一次按下提交按钮时跳转，而是在第二次按下时跳转。

我愿意接受建议... 少 Javascript 更好，因为我的 Javascript 技能充其量是薄弱的。我可以使用绑定到提交按钮的变量将值传递给 PHP 脚本并正确跳转到正确的部分吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T19:01:55.867

你有没有尝试过这样的事情？

```
<form action="thisfile.php#section2" name="form1" ... >
....
</form>

<a name="section2">
<form action="thisfile.php#section3" name="form2" ... >
....
</form>

<a name="section3">
<form .... 
```

提交form1时，文件重新加载并自动转到名为section2的锚点，提交form2时，它会滚动到section3等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T18:53:32.050

可能您发现使用[http://www.w3schools.com/html/html_links.asp（HTML](http://www.w3schools.com/html/html_links.asp)链接 - 名称属性部分）代替 javascript 更方便？只是一个建议。

# css - 是否会自动缓存整个网站（Google 使用 )?

[问问题](https://stackoverflow.com/questions/ask)user1631995问问题 2012-09-09T18:46:28.020232 次This question shows research effort; it is useful and clear3This question does not show any research effort; it is unclear or not usefulBookmark this question.Show activity on this post.

I've heard of **stylesheets** being cached, but are regular pages (like the one we're on) cached? I noticed on the more recent websites Google has made, they are not even using stylesheets, just a `<style>` tag with a single, compressed line of CSS. This led me to believe that the entire page (including the `<style>`) is cached, and not just stylesheets. Am I correct on this? Why would Google not use stylesheets and want their CSS to be cached when their sites are viewed billions of times a month.

From my understanding, everything that appears in the "Network Panel" of Chrome's inspect element is cached?

I researched "PHP Caching" but that seems to be for `include`'s, so I'm guessing pages are already cached automatically.

[css](/tags/css "show questions tagged 'css'")[caching](/tags/caching "show questions tagged 'caching'")[http-caching](/tags/http-caching "show questions tagged 'http-caching'")4

## 2 回答 2

This answer is useful2

Check this post: [CACHING TUTORIAL](http://www.mnot.net/cache_docs/).

Use `<META HTTP-EQUIV="CACHE-CONTROL" CONTENT="NO-CACHE">` tag in your `<head/>` section. Use [headers](http://php.net/manual/en/function.header.php) in your PHP code:

```
<?php
 Header("Cache-Control: must-revalidate");
 $offset = 60 * 60 * 24 * 3;
 $ExpStr = "Expires: " . gmdate("D, d M Y H:i:s", time() + $offset) . " GMT";
 Header($ExpStr);
?> 
```

于 2012-09-09T18:52:24.303 回答This answer is useful1

Caching is about resources corresponding to individual URLs, not about sites. Basically, resources of all kinds, like HTML documents, images, style sheets, JavaScript code, plain texts etc. etc. can be cached. So a site as an entity is not cached, and neither is a “whole page” (HTML document + images used in it + stylesheets it refers to +...). But each component may be cached, under its own URL.

Google uses embedded `style` elements for some very short style sheets, probably because they think this is more efficient than using an external CSS file. The HTML document may well be cached, but even if it is not, their approach is a little bit faster than using an external style sheet, which may cause HTTP overhead.

But for any nontrivial CSS code that you use on different pages of your site, an external CSS file is more efficient. It will be loaded (with small HTTP overhead) when a user first visits your site, but when he moves around it, the browser will have the CSS code in its own cache.

于 2012-09-09T19:45:19.540 回答

#### Related

[5](/questions/19513079 "Question score (upvotes - downvotes)")[java - Java中通过引用传递类型](/questions/19513079)[1](/questions/19513084 "Question score (upvotes - downvotes)")[sql - 在 if exists 语句中将数据库名称作为变量传递](/questions/19513084)[2](/questions/19513094 "Question score (upvotes - downvotes)")[c++ - C ++创建一个新的数字基数组](/questions/19513094)[1](/questions/19513106 "Question score (upvotes - downvotes)")[c++ - 在 Linux 原始套接字中接收完整修改的 icmp 数据包](/questions/19513106)[1](/questions/19513110 "Question score (upvotes - downvotes)")[dll - 在 SysWOW64 中注册 VB6 dll 时出错](/questions/19513110)[1](/questions/19513112 "Question score (upvotes - downvotes)")[android - Android中的BitmapFactory.decodeFile和ImageView奇怪的东西](/questions/19513112)[1](/questions/19513114 "Question score (upvotes - downvotes)")[c - uuid_generate_random 在生成 1000 万个 UUID 时崩溃](/questions/19513114)[1](/questions/19513117 "Question score (upvotes - downvotes)")[ios - 我想使用 CAPropertyAnimations 在 iOS 中绘制平滑动画](/questions/19513117)[1](/questions/19513119 "Question score (upvotes - downvotes)")[javascript - pageinit 上的面板高度大小计算](/questions/19513119)[2](/questions/19513121 "Question score (upvotes - downvotes)")[javascript - 未捕获的 ReferenceError：未定义刷新](/questions/19513121)

#### Reference

[php](https://php.github.net.cn) × 1429865[c/c++](https://c-cpp.com) × 756500[nginx](https://nginx.github.net.cn) × 49975[mongodb](https://mongodb.net.cn) × 159057[mybatis](https://mybatis.net.cn) × 3233[anaconda](https://anaconda.org.cn) × 13410[pycharm](https://pycharm.net.cn) × 14671[python](https://python.github.net.cn) × 1902243[vscode](https://vscode.github.net.cn) × 56040[docker](https://dockerdocs.cn) × 110988[github](https://github.net.cn) × 49000[flask](https://flask.github.net.cn) × 49129[ffmpeg](https://ffmpeg.github.net.cn) × 24037[jmeter](https://jmeter.net) × 16910[matplotlib](https://matplotlib.net) × 63493[bootstrap](https://getbootstrap.net) × 54641[](https://stackoverflow.com)

##### [Stack Overflow 中文网](https://stackoverflow.org.cn)

遵从 CC BY-SA 知识共享许可协议。

> ID：12341913
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

# asp.net-mvc - Mono 与 MVC3 和 EF 支持有多远？

> ID：12341915
> 
> 赞同：0
> 
> 时间：2012-09-09T18:46:50.680
> 
> 标签：asp.net-mvc, linux, entity-framework, mono

我有一个来自 QNAP (http://www.qnap.com) 的非常整洁的 NAS 盒子，我只是想知道我是否可以让我的 MVC3 应用程序在它上面运行。

我从 QNAP 论坛上看到，最新版本将在 QNAP 机器上运行（假设我可以弄清楚 linux 命令）但我的问题更具体到单声道......

根据[http://www.mono-project.com/Compatibility](http://www.mono-project.com/Compatibility)不支持 EF ...他们是否意味着任何使用 EF 的代码（已经编译）都不会运行？

这可能意味着我的应用程序无法在 Mono 上运行（耻辱）。

该页面上也没有提到 MVC3，这意味着他们要么忘记了它，要么说对 C# 4.0 和 ASP.Net 4.0 的完全支持涵盖了这一点。

如果有人有在 linux 机器上运行 MVC 应用程序的经验，你能告诉我这是否有可能运行/解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T12:37:38.303

MVC 3 有效，但默认情况下它们不提供：

[ASP.NET MVC3 支持](http://www.mono-project.com/Release_Notes_Mono_2.10#ASP.NET_MVC3_Support)

目前使用实体框架的代码不会在 Mono 下运行。然而，微软最近开源了实体框架，现在有动力让它在 Mono 上运行。希望它会尽快完成：

[Mono 2.11.3 已发布](http://tirania.org/blog/archive/2012/Aug-13.html)

# tridion - 如何确定 tridion 工作流中的下一个活动受让人

> ID：12341916
> 
> 赞同：0
> 
> 时间：2012-09-09T18:47:06.680
> 
> 标签：tridion, tridion-2011

我正在编写事件处理程序来确定工作流活动。我能够获得当前活动的受让人。

我需要获得下一个活动受让人（即活动被分配到哪个组）。

在 NextActivityDefinitions 的 TridionActivityDefinitinData 中，我只找到活动的 Title 和 Idref。

请让我知道如何找到下一个可能的活动的受让人。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T21:20:40.553

看看这个问题[How to get the Next Activity Details from the FinishActivityEvent Hanlder?](https://stackoverflow.com/questions/12274816/) ，user978511 在那里回答得比我好。

从我那里看到的，你需要这样的东西：

```
FinishActivityEventArgs.ActivityFinish.NextAssignee 
```

如果确实如此，我将您的问题标记为与该问题重复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-18T22:32:08.350

希望这可以帮助某人...

阅读流程定义以获取完整的活动列表：

```
ProcessDefinitionData pdd = CoreServiceClient.Read(ProcessInstance.ProcessDefinition.IdRef, null) as ProcessDefinitionData; 
```

那么你可以使用你当前的位置（不是从零开始）从活动定义中索引出来（从零开始）：

```
pdd.ActivityDefinitions[(int)ActivityInstance.Position].Assignee.Title 
```

以上将为您获取下一个活动信息。如果您希望以前的活动从当前位置减去两个并从流程实例活动中索引：

```
ProcessInstance.Activities[(int)ActivityInstance.Position - 2].FinishMessage 
```

享受

# nginx - nginx 将虚拟目录重写为文件

> ID：12341917
> 
> 赞同：13
> 
> 时间：2012-09-09T18:47:07.647
> 
> 标签：nginx, virtual-directory

这应该很容易做到，但我的头撞到了墙上。如果我收到对 www.mysite.com/mypath 的请求，我想提供 www.mysite.com/myotherpath/thisfile.html 的内容。如何使用 nginx 配置执行此操作。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-10T20:00:24.633

```
location = /mypath {
    try_files /myotherpath/thisfile.html =404;
} 
```

*   [http://nginx.org/r/try_files](http://nginx.org/r/try_files)
*   [http://nginx.org/r/location](http://nginx.org/r/location)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-09T19:03:59.610

在适当的位置块中使用重写指令。因此，例如，您有可以处理所有请求的基本位置

```
location / {
    /*your rules here*/
} 
```

您将需要添加另一个块，这将为您处理特定路径

```
location /mypath {
    rewrite ^/mypath$ /real/path/to/file/thisfile.html; 
} 
```

此外，为了让您的服务器考虑`thisfile.html`默认的块，您可以使用`try thisfile.html`指令

[官方 Nginx RewriteModule](http://nginx.org/r/rewrite)官方页面上都有很好的解释

# debugging - 如何找出在 Xcode 4 / lldb 中更改对象（或简单变量）的原因？

> ID：12341919
> 
> 赞同：3
> 
> 时间：2012-09-09T18:47:25.927
> 
> 标签：debugging, xcode4, lldb, watchpoint

在某些调试器中，这称为对变量“设置陷阱”。我想要做的是在任何更改对象的语句上触发断点。或更改对象的属性。

我有一个 NSMutableDictionary ，它添加了一个值/键，但我找不到任何可以这样做的语句。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-09T19:01:13.853

您可以设置一个观察点（从[这里](http://lldb.llvm.org/lldb-gdb.html)）：

```
Set a watchpoint on a variable when it is written to.
(lldb) watchpoint set variable -w write global_var
(lldb) watch set var -w write global_var
(gdb) watch global_var
Set a watchpoint on a memory location when it is written into. The size of the region to watch for defaults to the pointer size if no '-x byte_size' is specified. This command takes raw input, evaluated as an expression returning an unsigned integer pointing to the start of the region, after the '--' option terminator.
(lldb) watchpoint set expression -w write -- my_ptr
(lldb) watch set exp -w write -- my_ptr
(gdb) watch -location g_char_ptr
Set a condition on a watchpoint.
(lldb) watch set var -w write global
(lldb) watchpoint modify -c '(global==5)'
(lldb) c
...
(lldb) bt
* thread #1: tid = 0x1c03, 0x0000000100000ef5 a.out`modify + 21 at main.cpp:16, stop reason = watchpoint 1
frame #0: 0x0000000100000ef5 a.out`modify + 21 at main.cpp:16
frame #1: 0x0000000100000eac a.out`main + 108 at main.cpp:25
frame #2: 0x00007fff8ac9c7e1 libdyld.dylib`start + 1
(lldb) frame var global
(int32_t) global = 5
List all watchpoints.
(lldb) watchpoint list
(lldb) watch l
(gdb) info break
Delete a watchpoint.
(lldb) watchpoint delete 1
(lldb) watch del 1
(gdb) delete 1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-23T10:18:39.237

*观察点*用于跟踪对内存中地址的写入（默认行为）。如果您知道一个对象在内存中的位置（您有一个指向它的指针），并且您知道您关心的对象的偏移量，那么这就是观察点的用途。例如，在一个简单的 C 示例中，如果您有：

```
struct info
{
   int a;
   int b;
   int c;
};

int main()
{
   struct info variable = {5, 10, 20};
   variable.a += 5;  // put a breakpoint on this line, run to the breakpoint
   variable.b += 5;
   variable.c += 5;
   return variable.a + variable.b + variable.c;
} 
```

一旦你在一个断点`variable.a`，做：

```
(lldb) wa se va variable.c
(lldb) continue 
```

修改后程序会暂停`variable.c`。（我没有费心输入完整的“watch set variable”命令）。

例如，对于像这样的复杂对象`NSMutableDictionary`，我认为观察点不会满足您的需求。您需要知道`NSMutableDictionary`对象布局的实现细节才能知道要设置观察点的内存中的哪个字（或多个字）。

# java - 通过网站禁用屏幕保护程序/睡眠模式

> ID：12341921
> 
> 赞同：5
> 
> 时间：2012-09-09T18:47:52.100
> 
> 标签：java, javascript, flash, applet

我正在开发一个 Web 应用程序，该应用程序有时需要在显示器上处于活动状态数小时而没有人接触计算机。

问题是某些计算机有屏幕保护程序，或者更糟糕的是 - 在不活动时进入睡眠模式。

我正在想办法绕过它。我搜索了 java applet 或者可能只是这样做的 flash 文件。不幸的是，我什么也没找到。

对于这个过于笼统的问题，我很抱歉，但我对这个问题很无助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T10:05:51.263

我已经为您编写了 Java 小程序。它将每59秒将鼠标光标向右和向后移动一个像素，有效地防止屏幕保护程序启动。

请注意，[由于安全限制](http://docs.oracle.com/javase/tutorial/deployment/applet/security.html)，需要对这个小程序[进行签名](http://docs.oracle.com/javase/tutorial/deployment/jar/signing.html)并[授予在客户端上工作的`createRobot`权限](https://stackoverflow.com/a/1322054/1273080)，否则它将无法初始化[`Robot`](http://docs.oracle.com/javase/7/docs/api/java/awt/Robot.html)类。但这是这个问题范围之外的问题。

```
import java.applet.Applet;
import java.awt.*;
import java.util.Timer;
import java.util.TimerTask;

/**
 * Moves the mouse cursor once in a minute to prevent the screen saver from
 * kicking in.
 */
public class ScreenSaverDisablerApplet extends Applet {

    private static final int PERIOD = 59;
    private Timer screenSaverDisabler;

    @Override
    public void start() {
        screenSaverDisabler = new Timer();
        screenSaverDisabler.scheduleAtFixedRate(new TimerTask() {
            Robot r = null;
            {
                try {
                    r = new Robot();
                } catch (AWTException headlessEnvironmentException) {
                    screenSaverDisabler.cancel();
                }
            }
            @Override
            public void run() {
                Point loc = MouseInfo.getPointerInfo().getLocation();
                r.mouseMove(loc.x + 1, loc.y);
                r.mouseMove(loc.x, loc.y);
            }
        }, 0, PERIOD*1000);
    }

    @Override
    public void stop() {
        screenSaverDisabler.cancel();
    }

} 
```

# qt - qt 连接 cilds 按钮

> ID：12341926
> 
> 赞同：1
> 
> 时间：2012-09-09T18:48:23.070
> 
> 标签：qt, parent-child, connect

我有

```
class MainWindow : public QMainWindow  { 

    Q_OBJECT

  public:
    explicit MainWindow(QWidget *parent = 0);
    ~MainWindow();

  private slots:
    void getData();

  private:
    Ui::MainWindow *ui;
    Dialog  *second;
}; 
```

和

```
class Dialog: public QDialog  {
   Q_OBJECT

  public:
    explicit Dialog(QWidget *parent = 0); QDialog * dialog;

    QPushButton *pushButton;
    QPushButton *pushButton_2;

}; 
```

我可以将 Dialog 类中的按钮与 MainWindow 类中的函数 getData() 连接起来（Dialog 是 Mainwindow 类的子类）

我试过了

```
connect(*second->pushButton, SIGNAL(clicked()), this,
                             SLOT(getData())); 
```

但我得到了

```
error: no matching function for call to
‘MainWindow::connect(QPushButton&, const char [11], MainWindow* const, const char [11])’ 
```

我如何连接它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T15:45:25.740

如果对话框是 QMainWindow 子类的子类（因为它会），你应该有类似的东西：

```
MainWindow::MainWindow(...)
{
  ....

  m_dialog = new Dialog(this);// in .h file it is defined as: "Dialog *m_dialog;"
  ....

  connect(m_dialog->pushButton, SIGNAL(clicked()), this,SLOT(getData()));
} 
```

你不必写：

```
 connect(*m_dialog->pushButton, SIGNAL(clicked()), this,SLOT(getData())); 
```

看看[这个](http://doc.qt.digia.com/qt/signalsandslots.html)qt代码：

```
Counter a, b;
QObject::connect(&a, SIGNAL(valueChanged(int)),
                 &b, SLOT(setValue(int)));

a.setValue(12);     // a.value() == 12, b.value() == 12
b.setValue(48);     // a.value() == 12, b.value() == 48 
```

如您所见，您必须使用指针而不是 QObject。

# c# - 从 zip 运行 exe 文件及其附件，无需解压

> ID：12341928
> 
> 赞同：1
> 
> 时间：2012-09-09T18:48:32.653
> 
> 标签：c#, zip, memorystream

我有一个视频文件和一个 exe 文件，它们仅在它们都在同一目录中时运行。视频和 exe 文件都是 zip 压缩文件 (.zip)，我必须编写一个程序来正确运行 exe 文件（及其所需的视频文件）**，而无需**将它们解压缩到硬盘驱动器。

我知道如何将 zip 文件的内容转换为流（使用 dotNetZip）并通过该流运行 exe 文件而不进行硬提取（使用**Assembly.Load()**），但我不知道如何提供流式视频文件到exe文件。**注意：** *我无权访问 exe 文件源代码。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T18:52:59.927

您可以将 2 个文件解压缩到内存中，但您的 exe 仍然无法找到电影文件，您可以尝试使用反射注入不同的代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T19:00:07.923

假设 exe 将接受视频流作为输入，而不仅仅是视频文件 - 获取视频流并将其写入 exe 进程的 StandardInput 属性。

如果 exe 没有此功能，您可能必须使用反射并更深入地探测已加载的程序集，以找到采用流而不是文件名的接口。

# html - HTML 压缩器 | 需要换行吗？

> ID：12341929
> 
> 赞同：0
> 
> 时间：2012-09-09T18:48:54.300
> 
> 标签：html

我正在使用以下方法缩小我的 html：

[http://htmlcompressor.com/compressor.html](http://htmlcompressor.com/compressor.html)

它留下了返回字符，而不是单行......我得到了一堆单独的行。

有什么原因吗？（JS 和 CSS 缩小器不这样做）对 html 缩小有任何经验吗？这是一个可靠的工具吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T18:52:40.360

换行符会影响输出，因此不能真正从每个 HTML 文档中安全地删除它们。

例如：

```
​&lt;p>
Hello
World
</p>

<p>HelloWorld</p>​ 
```

这被渲染为：

```
Hello World
HelloWorld 
```

**演示：http: [//jsfiddle.net/UTy2f/](http://jsfiddle.net/UTy2f/)**

# amazon - 亚马逊 API 用于根据亚马逊的产品运营商店

> ID：12341930
> 
> 赞同：3
> 
> 时间：2012-09-09T18:49:00.563
> 
> 标签：amazon

PA-API 的销售已经停止，我想知道这对我意味着什么。我喜欢这个 API，但我不认为有可能拥有一个带有购物车的自己的网站等等。

是否有来自亚马逊的 API 可以将其用于购物车和结账？

只需生成一个购物车并引导至亚马逊结帐所有产品即可。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T19:00:19.253

可以通过 Affiliate 将用户发送到结帐 如果您已经在 Amazon 拥有商家帐户，您可以注册为 Amazon 会员并使用 Amazon 购物车购买您的产品。

这是它的工作原理示例[http://www.softwarediscounts.org/discount/buy-norton-360-v-5-0-with-53-discount-coupon/](http://www.softwarediscounts.org/discount/buy-norton-360-v-5-0-with-53-discount-coupon/) - 单击“立即购买”按钮将产品添加到亚马逊购物车

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-04T16:01:48.533

是的，您可以将产品放入亚马逊托管的远程购物车中。

请参阅：[http ://docs.aws.amazon.com/AWSECommerceService/latest/DG/ShoppingCartConcepts.html](http://docs.aws.amazon.com/AWSECommerceService/latest/DG/ShoppingCartConcepts.html)

# android - 如何在Android的LinearLayout中将ListView居中

> ID：12341936
> 
> 赞同：2
> 
> 时间：2012-09-09T18:49:37.483
> 
> 标签：android, android-layout, listview

我有一个`ListView`有两列的，我想要的是把它`ListView`放在一个`Linerlayout`. 下面是布局代码`ListView`。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="center" >
    <ListView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:id="@+id/mylist">
    </ListView>
</LinearLayout> 
```

这是各个项目的布局`ListView`

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">
    <TextView 
        android:id="@+id/prayLabel"
        android:layout_width="100dip"
        android:layout_height="wrap_content" />
    <TextView 
        android:id="@+id/prayValue"
        android:layout_width="100dip"
        android:layout_height="wrap_content" />
</LinearLayout> 
```

虽然我`ListView`的出现垂直居中，但它没有出现水平居中，因为它的宽度跨越了屏幕的整个宽度。我想当我在所有地方使用`wrap_content`它`layout_width`的宽度不应该跨越屏幕/布局的整个宽度？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T09:05:59.980

为简单起见，我将其包装在一个`RelativeLayout`中-我也为此苦苦挣扎，最终在更简单的布局上执行此操作**：

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

        <RelativeLayout
         android:layout_width="fill_parent"
         android:layout_height="fill_parent">

            <!-- Note the 'centre in parent' tag below -->

            <ListView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerInParent="true"
            android:id="@+id/mylist"/>

       </RelativeLayout>

    </LinearLayout> 
```

** 免责声明：这种模式在更复杂的视图上可能会变得昂贵，但`LinearLayout`> `RelativeLayout`>`ListView`层次结构就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-09T14:13:40.980

您可以`android:weightSum`在线性布局上使用，然后使用任一侧的空视图来居中`ListView`，如下所示：

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:weightSum="1">
    <View
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight=".05"/>
    <ListView
        android:id="@+id/list_view"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight=".9"
        android:paddingLeft="4dp"
        android:paddingRight="4dp" />
    <View
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight=".05"/>
</LinearLayout> 
```

当然你可以调整权重，只要确保`Views`设置相同，以便`ListView`居中。

# c# - 状态视图和应用程序视图asp.net c#

> ID：12341938
> 
> 赞同：-1
> 
> 时间：2012-09-09T18:49:57.040
> 
> 标签：c#, asp.net, visual-studio-2010, viewstate

您能否提供一些链接，代码示例，什么是状态视图和应用程序视图，以便初学者更好地理解？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T18:55:43.260

[http://www.w3schools.com/aspnet/aspnet_viewstate.asp](http://www.w3schools.com/aspnet/aspnet_viewstate.asp)

[http://asp.net-tutorials.com/state/viewstate/](http://asp.net-tutorials.com/state/viewstate/)

# zend-framework - Zend Force 登录

> ID：12341939
> 
> 赞同：0
> 
> 时间：2012-09-09T18:50:09.853
> 
> 标签：zend-framework, zend-auth

我的 shell 应用程序正在运行，我现在想确保在发生其他任何事情之前用户已登录。我有一个有效的身份验证控制器和相关的数据库表等。

我认为最好的办法是将身份测试放在引导程序中，因为我不想检查每个控制器中的身份。基本上，我想我想将代码放入说明 if 身份的引导程序中，否则运行索引，运行 auth。这是在 Zend 中最好的方法吗？如果没有，首选方法是什么？

我在考虑 Bootstrap，因为对于任何类型的每个请求，如果用户已登录，我不想允许它，当然，最好只在一个地方进行此检查。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T19:22:52.333

我经常看到这是通过插件完成的。这些可以在 Zend 应用程序分派周期的各个阶段完成。我遇到的最常见的设置是在 preDispatch 中放置一个检查用户登录状态插件。

在 Zend 文档中搜索 preDispatch 插件，或者查看 Youtube，因为有一些很好的视频教程可以引导您完成它。

这样做的一个好处是，将来您可能希望在用户身份验证测试之前运行某种功能。在这种情况下，您可以将新功能放入 dispatchLoopStartup 插件中。

话虽如此，在引导程序中检查用户登录状态并没有什么问题——我已经看到很多次这样做了。用户插件可能更整洁，因为它们在新应用程序中更具可重复性。

当然，这只是我的看法，但我希望这会有所帮助。

# android - 当用户长按文本时如何突出显示android中的文本

> ID：12341941
> 
> 赞同：1
> 
> 时间：2012-09-09T18:50:17.350
> 
> 标签：android

我是android的新手。我想在我的应用程序中实现突出显示功能，这样当用户长按任何文本时，文本就会被突出显示，就像在其他 pdf 阅读器中一样，如 repligo 等。

请建议我...

# c# - 可序列化事务是否只锁定其他事务范围语句？还是一切？

> ID：12341944
> 
> 赞同：1
> 
> 时间：2012-09-09T18:50:45.420
> 
> 标签：c#, asp.net, entity-framework, transactionscope

在交易中，我有以下内容，`MyEntities`是我的上下文：

```
TransactionOptions options = new TransactionOptions();
options.Timeout = TimeSpan.FromMinutes(1);
options.IsolationLevel = IsolationLevel.Serializable;

 using(TransactionScope scope =

      new TransactionScope(TransactionScopeOption.Required, options))

{
    //Do something to database table MyEntities.Users

} 
```

是否使我的隔离级别可序列化，这样如果我的代码中的其他任何地方我都有类似的东西

`MyEntities.Users.First(x=>x.name == "test")`

该行代码将一直等到事务范围完全完成，或者该代码行是否需要包含在`using(TrnasactionScope...`语句中以使其遵循事务隔离级别的规则。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T19:00:58.113

隔离级别*本身*什么都不做；重要的是当您开始查询数据时会发生什么。特别是，您开始到处留下读锁和键范围锁。如果另一个查询命中其中一个锁并且正在*读取*，那很好：读取锁通常是兼容的。显然，另一个 SPID 的隔离级别也很重要 - 未提交的读取 SPID 不会关心您正在进行的操作，而更高的隔离会。

当其中一个 SPID 开始*写入*数据时，开始变得更加复杂。如果多个 SPID 已经对同一数据进行了读锁，这可能会导致死锁。

但不：事务范围不会阻止其他*所有*内容，尤其是当它们只是读取时。对于它*的作用*......这很复杂，只能根据具体情况进行分析。

# c# - 清除对值和引用类型的疑虑

> ID：12341947
> 
> 赞同：4
> 
> 时间：2012-09-09T18:51:01.220
> 
> 标签：c#

值类型变量直接包含实际数据，引用类型变量包含对实际数据的引用。

我认为这是：

lhs 是值类型，rhs 是引用类型

![在此处输入图像描述](../Images/91bec7878af258cc690bfbdc86d6b468.png)

在左侧，如果我复制`i`到`j`，一个新的内存位置将填充相同的原始数据 (45)。

在右侧，如果我复制`k`到`l`，则新的内存位置将填充对对象的引用；这个引用指向内存中的实际对象。

现在，我对这种引用类型复制感到困惑。这里有一点不同：

![在此处输入图像描述](../Images/aac5661643af77baa790bdbf52fa3896.png)

在这里，rhs 上的副本`l`指向与 相同的位置`k`。

我的问题是**1。“哪个更真实？”** 还是比我想象的要多？

此外，值类型可能会在堆上分配，这取决于 jitter 认为它适合的方式，然后**2\. 我们可以强制在堆栈上分配引用类型吗？**

抱歉草率的图像编辑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T18:54:02.923

第一张图比较好，`l`是`k`不同的变量，在内存中占据不同的位置。

> 值类型可以在堆上分配，这取决于 jitter 认为它适合的方式

实际上，它更多地取决于上下文和使用值的方式。值类型字段将始终在堆上分配，装箱和闭包是其他原因。

但是，第二张图片适用于 when`l`是一个`ref`参数：

```
MyClass k = new ...;
M(ref k);

void M(ref MyClass l) { /* Here l is an alias for k */ } 
```

> 那么 2\. 我们可以强制在堆栈上分配引用类型吗？

有类似 stackalloc 的东西，但它是 C# 程序员“看不见”的优化。
最简单且最有用的答案是：不。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T19:01:06.927

两者都没有，两者都有。问题是您正在谈论 C# 语言本身未指定的实现细节。

实际上，您可能正在对只有堆栈的机器进行编程，或者您可能有可用的寄存器。归根结底，[这只是一个实现细节。](http://blogs.msdn.com/b/ericlippert/archive/2009/04/27/the-stack-is-an-implementation-detail.aspx)最接近现实的模型取决于您运行的机器架构。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-23T14:12:52.877

> 2.  我们可以强制在堆栈上分配引用类型吗？

我们不能以这种方式强制执行任何操作，例如，当您在方法中初始化变量时，**引用就在堆栈上。****引用类型**，实际上是用关键字初始化的对象，`new`包括它里面的值类型，是在堆上分配的。

尽管这是一个可以写一本书的主题，但归根结底是：

我们在 .NET 中有两种类型的行为。价值行为和参考行为。两者的区别在于它们的概念。**值**类型代表值本身，实际数据和**引用**是内存位置。内存位置是在堆上创建的实际对象实例中的地址。它们代表了一种指向虚拟地址空间中实际对象的链接。

[我写了一篇博客文章，其中有些详细](http://thebojan.ninja/2015/03/13/value-and-reference/)，并试图从概念上解释它是如何在较低级别上工作的。但是我在那里的解释主要基于 x86 架构，并不是所有东西都是如何实现的。C# 和 .NET 框架以及 JIT 可以如何改变，但希望它有助于使其更清晰一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-09T18:55:18.617

好图！我认为第一张图片“更真实”。它们引用同一个对象，但为了存储引用，它们还需要变量。引用或指针也是变量，这意味着它们有自己的内存位置。2\. 我不这么认为。（我不确定）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-09T18:59:15.370

1.  第一个是最正确的。参考是一个数字，复制时复制地址。在 c 中，您实际上可以将引用放入整数中，而在 c# 中，您可以多看一眼。

2.  如果你声明一个结构而不是一个类，它很可能在堆栈中（据我所知）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-09T19:07:55.077

第一张图片是最正确的，因为你认为

```
l = k; 
```

相反，如果您遇到这种情况

```
class MyClass
{
  internal string k;

  internal void Test()
  {
    OtherClass.Method(ref k);
  }
}

class OtherClass
{
  internal static Method(ref string l)
  {
    // do a lot of stuff using l
  }
} 
```

那么在这种情况下，我会说第二张图片更正确，因为这个参数有`ref`关键字。这意味着如果有人在**运行****时**`k`将引用更改为指向另一个字符串对象，那么突然间该变量也将指向新对象。**`OtherClass.Method`**`l`

但这仅因为`ref`关键字而成立。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-09T19:08:41.820

第一张图片肯定...否则使用“by-ref”参数的调用会影响两个引用，即 Xxx(ref k); 可能“重定向”k和l。

关于 stack 等，您可能想阅读 Eric Lippert ( [The Stack Is An Implementation Detail](http://blogs.msdn.com/b/ericlippert/archive/2009/04/27/the-stack-is-an-implementation-detail.aspx) )

# java - Streaming API 的策略

> ID：12341954
> 
> 赞同：0
> 
> 时间：2012-09-09T18:52:23.620
> 
> 标签：java, web-services, twitter

[https://dev.twitter.com/docs/streaming-apis](https://dev.twitter.com/docs/streaming-apis)

> 如上例所示，连接到 Streaming API 的应用程序将无法建立连接以响应用户请求。相反，用于维护流连接的代码通常在与处理 HTTP 请求的进程不同的进程中运行

正如它所说的流式api而不是传统的api，有一个用于维护流式连接的api，怎么做？我们知道http是无状态的，只有浏览器发出请求，服务器才能响应，它如何保持连接呢？是客户端继续发送请求，还是html5中的套接字，或者这个问题与http无关，只是c/s的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T19:11:00.093

我认为这不是 http 的问题，它将是在 http 下运行的东西，比如 c/s

# mysql - 在 MySQL 的一条记录中存储 1 行的多个值

> ID：12341962
> 
> 赞同：1
> 
> 时间：2012-09-09T18:52:52.177
> 
> 标签：mysql, database, database-design

好的，我知道标题听起来令人困惑，但这基本上是我遇到的问题，我的库存表目前看起来像这样：

```
CREATE TABLE inventory (
productid MEDIUMINT UNSIGNED NOT NULL AUTO_INCREMENT,
category VARCHAR(100) NOT NULL,
subcategory VARCHAR(100) NOT NULL,
productname VARCHAR(150) NOT NULL,
description TEXT NOT NULL,
price DECIMAL(4,2) NOT NULL,
pathtoimage VARCHAR(150),
amountinstock SMALLINT UNSIGNED NOT NULL,
PRIMARY KEY (productid)
); 
```

我正在构建的应用程序有两个附加字段，即“尺寸”和“颜色”。这将是一个基本上网站管理员将填写并能够添加新库存的表格。我需要它，以便他们可以为同一产品输入多种尺寸和颜色。例如：

**S、M、L、XL**

**白色、黑色、蓝色**

如何为一条记录存储这些多个值？对不起，如果这是模棱两可的......我正在尽我所能解释它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T18:57:08.890

这很简单。

再添加两个表。一种叫做尺寸，一种叫做颜色。

表格颜色： 颜色 Product_id

表尺寸：尺寸 Product_id

那么这是一个简单的问题

```
SELECT `color` FROM `colours` WHERE `product_id`='myproductid';
SELECT `Size` FROM `sizes` WHERE `product_id`='myproductid'; 
```

然后简单地遍历它。

这就是这样做的方法。

如果您希望增加复杂性但可维护性，您可以制作 4 个新表

颜色： Color_ID Color_name Color_sample

尺寸： Size_ID Size_label Size_name Size_alt

表 prod_colors：Color_ID Product_id 数量

表 prod_sizes：Size_ID Product_id 数量

那么这是一个简单的问题

```
SELECT * FROM `prod_colors` 
    JOIN `Colours` on `Colours`.`Color_id` = `prod_colors`.`Color_id`
WHERE `product_id`='myproductid' AND `qty` > '0';

SELECT `Size` FROM `sizes` 
    JOIN `Sizes` on `Sizes`.`Size_ID` = `prod_sizes`.`Size_ID`
WHERE `product_id`='myproductid' AND `qty` > '0'; 
```

*   ***编辑***感谢 kolossus 建议数量列

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T18:56:45.940

您可以将它们作为逗号分隔的字符串存储在单个列中

# objective-c - 将 NSCollectionView 视为绝对网格

> ID：12341963
> 
> 赞同：1
> 
> 时间：2012-09-09T18:52:58.903
> 
> 标签：objective-c, cocoa, nscollectionview

我的问题很简单： NSCollectionView 设置是否适合用作绝对网格？我可以将特定项目保留在特定的列和行中，防止在视图调整大小时重新排列项目并将所有内容保留在它所属的位置吗？此外，用户重新排列（即将项目移动到任意空白区域）是否可行？

# css - CSS列网格排序问题

> ID：12341969
> 
> 赞同：3
> 
> 时间：2012-09-09T18:53:28.560
> 
> 标签：css

受本[教程](http://css-tricks.com/seamless-responsive-photo-grid/)的启发，我设置了一个有 5 列的[Fiddle 。](http://jsfiddle.net/AndyMP/2zND2/)这适用于 5 幅图像。但是，使用 6 时，它会将其排序为[2 行 3，](http://jsfiddle.net/AndyMP/2zND2/1/)而不是 1 行 5 和 1 行。其他配置具有类似的效果。

是否有这样做的原因以及防止这种情况发生的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T19:00:26.630

您应该将其用作附加样式，如下所示：

```
 float:left; 
```

# php - INNODB 锁有什么问题？

> ID：12341974
> 
> 赞同：5
> 
> 时间：2012-09-09T18:53:59.510
> 
> 标签：php, mysql, zend-framework, innodb, gearman

我在处理大量更新、插入和删除请求的系统上工作。这就是为什么我选择 INNODB 作为我的存储引擎导致行锁的原因。我们每 10 分钟更新 60.000 条记录。我们正在使用 Gearman 来并行化我们在不同服务器上的工作。代码在 PHP 中，我们使用 Zend 框架。

因此，让我们从描述我们的问题开始。我们正在记录错误，几乎每 5 到 20 分钟就会发生一个错误。

```
SQLSTATE[HY000]: General error: 1205 Lock wait timeout exceeded; try restarting transaction 
```

简单地扩展“锁定等待超时”对我们没有帮助，因为我们尝试尽可能快地更新。

为了获得更多信息，我完成了`SHOW INNODB STATUS\G`。一件事让我问 - 什么是黑客？

```
---TRANSACTION 0 18126657, ACTIVE 54 sec, process no 16154, 
OS thread id 47956454176512 fetching rows, thread declared inside InnoDB 68 mysql tables in use 1, 
locked 1 1204 lock struct(s), heap size 112624, 65338 row lock(s), undo log entries 44 
MySQL thread id 3331522, query id 103362521 [ServerIP] [USER] Updating 
UPDATE userproducts SET lowest_price=16.96, last_lowest_price_update='2012-09-09 20:07:30' WHERE product_id LIKE 'XXX' 
```

65388 行被锁定，因为这个简单的更新？还是我只是想念什么？遵循已完成此更新的 PHP 代码。

```
$this->db->beginTransaction();

    try {
        for($i = 0; $i < count($products); $i++)
        {
            if(isset($products[$i]['price_total_end']))
            {
                if(count($products[$i]['price_total_end']) > 1)
                {
                    $this->db->query("UPDATE userproducts SET lowest_price=".$products[$i]['price_total_end'][1].", last_lowest_price_update='".date("Y-m-d H:i:s", time())."' WHERE product_id LIKE '".$products[$i]['p_id']."'");
                } elseif(count($asin[$i]['price_total_end']) == 1) {
                    $this->db->query("UPDATE userproducts SET lowest_price=-1, last_lowest_price_update='".date("Y-m-d H:i:s", time())."' WHERE product_id LIKE '".$products[$i]['p_id']."'");
                }
            }
        }
        $this->db->commit();
    } catch (Exception $e) {
        $this->db->rollBack();
        echo $e->getMessage();
    } 
```

Array $products 在他的第一个 50 级条目中。所以计数直到 50 不应该那么多，或者这绝对没有效率？接下来不应该忘记的是，有 20 个工人可以同时执行这个查询。

最后一个重要信息——我认为——是`mysql_report`.

```
MySQL 5.1.63-0+squeeze1  uptime 13 9:11:39      Sun Sep  9 20:44:50 2012

__ Key ___
Buffer used    55.00k of  16.00M  %Used:   0.34
  Current       2.92M            %Usage:  18.28
Write hit      99.95%
Read hit      100.00%

__ Questions ___
Total         103.61M    89.6/s
  DMS          90.73M    78.5/s  %Total:  87.57
  Com_          8.57M     7.4/s            8.27
  COM_QUIT      3.34M     2.9/s            3.22
  QC Hits     922.81k     0.8/s            0.89
  +Unknown     46.70k     0.0/s            0.05
Slow 2 s        9.33M     8.1/s            9.00  %DMS:  10.28  Log:  ON
DMS            90.73M    78.5/s           87.57
  INSERT       60.63M    52.4/s           58.51         66.82  
  UPDATE       17.80M    15.4/s           17.17         19.61
  DELETE        9.55M     8.3/s            9.22         10.53
  SELECT        2.76M     2.4/s            2.66          3.04
  REPLACE           0       0/s            0.00          0.00
Com_            8.57M     7.4/s            8.27
  set_option    3.40M     2.9/s            3.28
  show_fields   2.88M     2.5/s            2.78
  begin         1.13M     1.0/s            1.09

__ SELECT and Sort ____
Scan            3.60M     3.1/s %SELECT: 130.54
Range              47     0.0/s            0.00
Full join          24     0.0/s            0.00
Range check         0       0/s            0.00
Full rng join       1     0.0/s            0.00
Sort scan      24.32k     0.0/s
Sort range      1.69M     1.5/s
Sort mrg pass       0       0/s

__ Query Cache ___

Memory usage    1.05M of  16.00M  %Used:   6.57   
Block Fragmnt   4.55%   
Hits          922.81k     0.8/s   
Inserts         2.11M     1.8/s   
Insrt:Prune   2.36k:1     1.8/s   
Hit:Insert     0.44:1

__ Table Locks ____  
Waited            658     0.0/s  %Total:   0.00   
Immediate      90.73M    78.5/s

__ Tables ___   
Open              128 of  128    %Cache: 100.00  
Opened          3.95k     0.0/s

__ Connections __   
Max used          301 of  300      %Max: 100.33  
Total           3.34M     2.9/s

__ Created Temp ___    
Disk table      2.88M     2.5/s   
Table           2.89M     2.5/s    Size:  32.0M   
File                5     0.0/s

__ Threads ___    
Running            21 of  168   
Cached              6 of    8      %Hit:  97.09  
Created        97.29k     0.1/s    
Slow                0       0/s

__ Aborted ___    
Clients         2.45k     0.0/s 
Connects        2.75k     0.0/s

__ Bytes ___    
Sent           11.04G    9.5k/s  
Received       23.13G   20.0k/s   

__ InnoDB Buffer Pool _____    
Usage          82.86M of   1.46G  %Used:   5.52    
Read hit      100.00%    
Pages    
  Free         90.70k            %Total:  94.48    
  Data          4.92k                      5.12 %Drty:   4.07    
  Misc            386                      0.40  
  Latched           0                      0.00    
Reads         610.88G  528.3k/s 
  From file       816     0.0/s            0.00   
  Ahead Rnd         3     0.0/s    
  Ahead Sql        27     0.0/s    
Writes        614.37M   531.3/s    
Flushes        10.07M     8.7/s   
Wait Free           0       0/s

__ InnoDB Lock ___
Waits          837060     0.7/s    
Current            19
Time acquiring   
  Total     157140176 ms
  Average       18772 ms  
  Max           59096 ms

__ InnoDB Data, Pages, Rows __    
Data 
  Reads           919     0.0/s 
  Writes       11.96M    10.3/s  
  fsync         6.26M     5.4/s    
  Pending
    Reads           0
    Writes          0
    fsync           0

Pages   
  Created      39.41k     0.0/s    
  Read          2.64k     0.0/s   
  Written      10.07M     8.7/s    

Rows
  Deleted      40.82M    35.3/s
  Inserted     42.90M    37.1/s
  Read        540.45G  467.4k/s    
  Updated      47.48M    41.1/s 
```

所以回到整个问题。为什么我们总是得到 1205 Lock wait timeout 错误？

**更新：** 我现在尝试了其他几件事。首先，我将其更改`INSERT ... ON DUPLICATE KEY UPDATE`为 UPDATE，如果没有任何影响，程序应该进行插入。因为以下两个原因。1\. 99.9% 的操作是 UPDATE。2\. 我想- 不清楚那是伪造的- 可能`INSERT`发生了一个表锁。

但什么都没有改变。之后我尝试了使用唯一键的tipp。没有改变。

然后我有了一个想法，在 MySQL 中有许多“休眠”进程。我认为这是由非常长时间运行的 Gearman 脚本引起的？所以我改变了例如我之前发布的更新代码。

```
$this->db->beginTransaction();

        try {
            for($i = 0; $i < count($asin); $i++)
            {
                if(isset($asin[$i]['price_total_end']))
                {
                    if(count($asin[$i]['price_total_end']) > 1)
                    {
                        // Es konnten Konkurrenten ausgemacht werden
                        if( $asin[$i]['price_total_end'][0] > 0 )
                        {
                            // Prüfe ob der eigene Preis der günstigste ist
                            if( $asin[$i]['merchant_end'][0] == $merchantId )
                            {
                                // Ja der eigene Preis ist der günstigste, deshalb soll der nächste Preis der lowest sein.
                                $this->db->query("UPDATE userproducts SET lowest_price=".$asin[$i]['price_total_end'][1].", last_lowest_price_update='".date("Y-m-d H:i:s", time())."' WHERE product_id LIKE '".$asin[$i]['asin']."'");
                            } else {
                                $this->db->query("UPDATE userproducts SET lowest_price=".$asin[$i]['price_total_end'][0].", last_lowest_price_update='".date("Y-m-d H:i:s", time())."' WHERE product_id LIKE '".$asin[$i]['asin']."'");
                            }
                        }
                    } elseif(count($asin[$i]['price_total_end']) == 1) {
                        if( $asin[$i]['price_total_end'][0] >= 0 )
                        {
                            $this->db->query("UPDATE userproducts SET lowest_price=-1, last_lowest_price_update='".date("Y-m-d H:i:s", time())."' WHERE product_id LIKE '".$asin[$i]['asin']."'");
                        }
                    }
                }
            }
            $this->db->commit();
        } catch (Exception $e) {
            $this->db->rollBack();
            echo $e->getMessage();
        }
        **$this->db->closeConnection();** 
```

但什么都没有改变。连接数仍为 301，线程数仍为 32。我的代码有问题吗？

我真的无法面对这个问题。

我们非常欢迎您的想法和提示。多谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T20:09:47.460

尝试首先使用以下方法获取所有产品的主键：

```
SELECT primaryKey WHERE product_id LIKE '".$products[$i]['p_id']."'" 
```

然后循环遍历结果并使用 WHERE 部分中的 primaryKey 更新它们。

对您的所有 $products 重复此操作。并在所有迭代后最后提交。

我的直觉/早期经验告诉你应该能够以这种方式避免僵局，但遗憾的是我无法解释原因。

# php - mysql_query php中带有单引号的错误

> ID：12341980
> 
> 赞同：-2
> 
> 时间：2012-09-09T18:55:32.907
> 
> 标签：php, mysql

> **可能重复：**
> [如何在 PHP 中处理 SQL 查询中的单引号？](https://stackoverflow.com/questions/7062604/how-do-i-handle-single-quotes-inside-a-sql-query-in-php)

我编写了以下代码来从 mysql 表中获取数据：

```
$clg=$row['text'];
$query1 = "SELECT * FROM user WHERE text='$clg'";
$result1 = mysql_query($query1,$con) or die(mysql_error());
$count=mysql_num_rows($result1);
echo $count; 
```

但是文本字段有一个单引号（'），它关闭了 $query1 中的单引号，因此导致 mysql 语法错误。我该如何纠正这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T19:19:35.350

```
$clg=$row['text'];
$query1 = "SELECT * FROM user WHERE text='" . mysql_real_escape_string($clg) . "'";
$result1 = mysql_query($query1,$con) or die(mysql_error());
$count=mysql_num_rows($result1);
echo $count; 
```

但是你应该知道 mysql_* 函数系列很快就会被弃用。[请阅读](http://uk.php.net/manual/en/function.mysql-connect.php)php.net 网站上的红框。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-09T19:10:01.747

```
<?php
function escape($string) {
    if(get_magic_quotes_gpc()) $string = stripslashes($string);
    return mysql_real_escape_string($string);
} 
```

编写这个函数并调用它

```
escape($clg); 
```

用于防止每个 mysql 语法错误和 sql 注入。`

# objective-c - 将某些字符转换为转义的 unicode 版本

> ID：12341985
> 
> 赞同：0
> 
> 时间：2012-09-09T18:56:45.777
> 
> 标签：objective-c, ios, cocoa-touch

我有一个 NSString 包含可能不需要的字符，我必须将其转换为转义的 unicode 版本。更具体地说，我需要`UIWebView`通过它的脚本评估方法将 JSON 对象（序列化为字符串）传递给 a，并且某些字符往往会引发 JS 异常。

所以我想对 JSLint 提到的所有不安全的字符进行编码，它们是：

```
\u0000-\u001f
\u007f-\u009f
\u00ad
\u0600-\u0604
\u070f
\u17b4
\u17b5
\u200c-\u200f
\u2028-\u202f
\u2060-\u206f
\ufeff
\ufff0-\uffff 
```

并用转义的等价物替换它们。

最好的方法是什么？

**更新**：不知何故`\u2028`（行分隔符）潜入 JSON

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T20:14:07.253

嗯，这不完全是我想到的解决方案，但修剪也是一个合适的选择

```
 // Remove unsafe JSON characters
  //
  // http://www.jslint.com/lint.html#unsafe
  //
  if (jsonStr.length > 0) {
    NSMutableCharacterSet *unsafeSet = [NSMutableCharacterSet new];
    void (^addUnsafe)(NSInteger, NSInteger) = ^(NSInteger from, NSInteger to) {
      if (to > from) {
        [unsafeSet addCharactersInRange:NSMakeRange(from, (to - from) + 1)];
      } else {
        [unsafeSet addCharactersInRange:NSMakeRange(from, 1)];
      }          
    };

    addUnsafe(0x0000, 0x001f);
    addUnsafe(0x007f, 0x009f);
    addUnsafe(0x00ad, 0);
    addUnsafe(0x0600, 0x0604);
    addUnsafe(0x070f, 0);
    addUnsafe(0x17b4, 0);
    addUnsafe(0x17b5, 0);
    addUnsafe(0x200c, 0x200f);
    addUnsafe(0x2028, 0x202f);
    addUnsafe(0x2060, 0x206f);
    addUnsafe(0xfeff, 0);
    addUnsafe(0xfff0, 0xffff);

    jsonStr = [[jsonStr componentsSeparatedByCharactersInSet:unsafeSet] componentsJoinedByString:@""];
  } 
```

# android - 主线程上的 NetworkConnection 和验证

> ID：12341986
> 
> 赞同：0
> 
> 时间：2012-09-09T18:56:57.400
> 
> 标签：android, multithreading, httpconnection

我被警告不要在主线程上使用网络操作。

但是我有这样的情况；

我需要检查该值是否存在于数据库中，

如果是，我将继续进行另一项活动。

但我是个例外。请帮我解决这个我更新的代码

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.initial);

    if(!isNetworkAvailable())
    {
        final Dialog dialog = new Dialog(context);
        dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
        dialog.setContentView(R.layout.customlayoutnetconnection);

        Button dialogButton = (Button) dialog.findViewById(R.id.Ok);
        Button dialogButton2 = (Button) dialog.findViewById(R.id.OpenCon);

        dialogButton.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {

                dialog.dismiss();
                finish();
            }});

        dialogButton2.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {

                ConnectivityManager manager = (ConnectivityManager)getSystemService(InitialActivity.CONNECTIVITY_SERVICE);

                Boolean is3g = manager.getNetworkInfo(ConnectivityManager.TYPE_MOBILE).isConnectedOrConnecting();

                Boolean isWifi = manager.getNetworkInfo(ConnectivityManager.TYPE_WIFI).isConnectedOrConnecting();

                if(is3g){
                    Toast.makeText(context, "3G", Toast.LENGTH_LONG);
                }else if(isWifi){
                    Toast.makeText(context, "wifi", Toast.LENGTH_LONG);
                }else{
                    Toast.makeText(context, "nothing", Toast.LENGTH_LONG);

                    startActivity(new Intent(Settings.ACTION_WIRELESS_SETTINGS));
                }

            }});
        dialog.show();
    }

    lost = (Button) findViewById(R.id.imlost);
    lost.setOnClickListener(this);

    looking = (Button) findViewById(R.id.imlookingfor);
    looking.setOnClickListener(this);

    about = (Button) findViewById(R.id.about);
    about.setOnClickListener(this);

    howto = (Button) findViewById(R.id.howto);
    howto.setOnClickListener(this);

}

@Override
public void onClick(View v) {

    if(v==lost)
    {

        Intent i = new Intent(getApplicationContext(),IamLostActivity.class);

        startActivity(i);
    }

    else if(v==looking)
    {
        final Dialog dialog = new Dialog(context);
        dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
        dialog.setContentView(R.layout.customlayout);

        Button dialogButton = (Button) dialog.findViewById(R.id.Find);

        code  = (EditText) dialog.findViewById(R.id.codeToFind);

        code.requestFocus();

        dialogButton.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {

                if(code.getText().toString().contentEquals(""))
                {

                    final Dialog dialog2 = new Dialog(context);
                    dialog2.requestWindowFeature(Window.FEATURE_NO_TITLE);
                    dialog2.setContentView(R.layout.customlayoutinfo);

                    TextView tv = (TextView) dialog2.findViewById(R.id.customInfo);

                    tv.setText(context.getString(R.string.BlankField));

                    Button dialogButton2 = (Button) dialog2.findViewById(R.id.Ok);

                    dialogButton2.setOnClickListener(new OnClickListener() {
                        @Override
                        public void onClick(View v) {

                            dialog2.dismiss();

                            } }); 
                        dialog2.show();
                }

                else 
                {

                    findFriend = new Runnable() {
                        @Override
                        public void run() {

                            httpclnt = new DefaultHttpClient();

                            httppst = new HttpPost(url);

                            try {   

                                nameValuePairs = new ArrayList<NameValuePair>(1);
                                nameValuePairs.add((new BasicNameValuePair("code", code.getText().toString())));

                                httppst.setEntity(new UrlEncodedFormEntity(nameValuePairs));

                                ResponseHandler<String> responseHandler = new BasicResponseHandler();

                                response = httpclnt.execute(httppst, responseHandler);

                                //message = response;
                            }
                            catch (ClientProtocolException e) {
                                Toast.makeText(InitialActivity.this, "Client protocol exception ", Toast.LENGTH_LONG).show();
                            } catch (IOException e) {
                                Toast.makeText(InitialActivity.this, "IO exception "+e.getMessage(), Toast.LENGTH_LONG).show();
                            }
                       }

                    };

                    Thread thread = new Thread(null, findFriend, "FindFriend");
                    thread.start();

                                if(response.contentEquals(","))
                                {

                                    final Dialog dialog4 = new Dialog(context);
                                    dialog4.requestWindowFeature(Window.FEATURE_NO_TITLE);
                                    dialog4.setContentView(R.layout.customlayoutinfo);

                                    TextView tv = (TextView) dialog4.findViewById(R.id.customInfo);

                                    tv.setText(context.getString(R.string.CheckCorrectness));

                                    Button dialogButton2 = (Button) dialog4.findViewById(R.id.Ok);

                                    dialogButton2.setOnClickListener(new OnClickListener() {
                                        @Override
                                        public void onClick(View v) {

                                            dialog4.dismiss();

                                            } }); 
                                        dialog4.show();
                                }
                                else
                                {
                                    Intent in = new Intent(getApplicationContext(),IamLookingForActivity.class);

                                    in.putExtra("message", response.toString());

                                    startActivity(in);
                                }

                    }; 
```

}

```
 }
        );

        Button dialogButton2 = (Button) dialog.findViewById(R.id.Cancel);
        dialogButton2.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                dialog.dismiss();
            }
        });
        dialog.show();
      }

    else if(v==about)
    {
         final Dialog dialog = new Dialog(context);
            dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
            dialog.setContentView(R.layout.customlayoutabout);

            ImageButton dialogButton = (ImageButton) dialog.findViewById(R.id.kodatolye);

            Button dialogButton2 = (Button) dialog.findViewById(R.id.Back);

            dialogButton.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {

                    final Dialog dialog2 = new Dialog(context);
                    dialog2.requestWindowFeature(Window.FEATURE_NO_TITLE);
                    dialog2.setContentView(R.layout.customlayoutinfo);

                    TextView tv = (TextView) dialog2.findViewById(R.id.customInfo);

                    tv.setText("www.kodatolye.com");
                    Button dialogButton3 = (Button) dialog2.findViewById(R.id.Ok);

                    dialogButton3.setOnClickListener(new OnClickListener() {
                        @Override
                        public void onClick(View v) {

                            dialog2.dismiss();

                            } }); 
                    dialog2.show();

                    } }); 

            dialogButton2.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {

                    dialog.dismiss();

                    } }); 
                dialog.show();

    }
    else if(v==howto)
    {

        final Dialog dialog2 = new Dialog(context);
        dialog2.requestWindowFeature(Window.FEATURE_NO_TITLE);
        dialog2.setContentView(R.layout.customlayouthowto);

        Button dialogButton3 = (Button) dialog2.findViewById(R.id.Back);

        dialogButton3.setOnClickListener(new OnClickListener() {
            @Override
        public void onClick(View v) {

                dialog2.dismiss();

            } }); 
        dialog2.show();

    }
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T19:16:11.027

您不得在主线程上执行网络代码。同样，您不得尝试从主线程以外的*任何内容更新 UI。*您正在（正确地）为网络操作启动一个单独的线程，但您并没有等待它完成。您应该将开始的代码移动`if(response.contentEquals(...))`到 Runnable 中，直到网络活动完成并且您得到响应后才会运行。然后，您可以通过 Handler 将 Runnable 发布到主线程以启动新活动（或根据需要显示错误消息）。您可能希望显示一个对话框，告诉用户在启动网络线程之前等待。

[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)会为您完成大部分的簿记工作，让这一切变得更容易一些。有关详细信息，请参阅博文[Painless Threading](http://android-developers.blogspot.com/2009/05/painless-threading.html)。

# java - 伪代码到java

> ID：12341991
> 
> 赞同：0
> 
> 时间：2012-09-09T18:57:28.100
> 
> 标签：java, pseudocode, code-conversion, bresenham

过去一个小时左右我环顾四周，但在这个问题上找不到任何帮助。我正在尝试将此伪代码转换为 java 并且无法弄清楚我做错了什么（它曾经打印过任何东西）。

```
function line(x0, x1, y0, y1)
     boolean steep := abs(y1 - y0) > abs(x1 - x0)
     if steep then
         swap(x0, y0)
         swap(x1, y1)
     if x0 > x1 then
         swap(x0, x1)
         swap(y0, y1)
     int deltax := x1 - x0
     int deltay := abs(y1 - y0)
     real error := 0
     real deltaerr := deltay / deltax
     int ystep
     int y := y0
     if y0 < y1 then ystep := 1 else ystep := -1
     for x from x0 to x1
         if steep then plot(y,x) else plot(x,y)
         error := error + deltaerr
         if error ≥ 0.5 then
             y := y + ystep
             error := error - 1.0 
```

我的转换是：

```
public static void line(int x0,int x1,int y0,int y1) {
     boolean steep = Math.abs(y1 - y0) > Math.abs(x1 - x0);
     if(steep) {
         swap(x0, y0);
         swap(x1, y1);
     }
     if (x0 > x1) {
         swap(x0, x1);
         swap(y0, y1);
     }
     int deltax = x1 - x0;
     int deltay = Math.abs(y1 - y0);
     float error = 0;
     float deltaerr = deltay / (float)deltax;
     int ystep;
     int y = y0;

     if(y0 < y1) ystep = 1;
     else ystep = -1;

     //for x from x0 to x1
     for(int x = x0; x < x1;x++)
         if (steep) plot(y,x);
         else plot(x,y);
         error = error + deltaerr;
         if (error >= 0.5f) {
             y = y + ystep;
             error = error - 1.0f;
         }
    }

//method plot
    private static void plot(int x, int y) {
        System.out.println(x+":"+y);
    }
//method swap
    private static void swap(int x0, int x1) {
        int copy = x0;           
        x0 = x1;
        x1 = copy;
    } 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T18:59:16.977

您不能`swap()`对 s 使用类似的方法`int`。由于它们是*原语*，它们是*按值传递的*，并且更改方法内的局部变量不会影响您用作参数的变量。
而是直接在`line()`方法中进行交换。

第二件事是你的`for`循环看起来不对。根据您的缩进，您可能希望在整个块周围使用花括号。

# java - 创建一个用于从 Java/Clojure 执行的 jar 文件

> ID：12341993
> 
> 赞同：2
> 
> 时间：2012-09-09T18:57:46.693
> 
> 标签：java, macos, jar, clojure, executable-jar

我想创建一个用 java 和 clojure 实现的 jar 文件来执行。这是我采取的步骤。

## 让我的 java 代码调用 clojure 代码

我可以生成一个具有 clojure 核心和我的 clojure 代码的 jar 文件 (ThingOne-1.0.0-SNAPSHOT-standalone.jar)，我还可以获得一个使用 jar 文件中的 clojure 代码的类文件 (HelloJava.class)通过关注这个网站 - [http://walkwithoutrhythm.net/blog/2012/03/26/how-to-call-clojure-1-dot-3-functions-from-java/](http://walkwithoutrhythm.net/blog/2012/03/26/how-to-call-clojure-1-dot-3-functions-from-java/)

java代码如下：clojure代码导入为ThingOne

```
import ThingOne.*;

public class HelloJava {
    public static void main(String[] args) {
        System.out.println("Hello from Java!");
        core.foo (12345);
    }
} 
```

我可以运行这个命令来使用代码：

```
java -cp 'ThingOne-1.0.0-SNAPSHOT-standalone.jar:.' HelloJava 
```

## 制作一个jar文件

我制作了一个具有这种结构的 jar 目录。

```
├── MANIFEST.MF
└── jar
    └── ThingOne-1.0.0-SNAPSHOT-standalone.jar 
```

MANIFEST.MF 的内容是

```
Manifest-Version: 0.1
Main-Class: HelloJava
Class-Path: jar/ThingOne-1.0.0-SNAPSHOT-standalone.jar 
```

我可以得到一个 jar 文件`jar cvfm hello.jar jar/MANIFEST.MF HelloJava.class`。

但是，clojure jar 文件（ThingOne-1.0.0-SNAPSHOT-standalone.jar）没有包含在这个 jar 文件中，只是被引用了。

如何制作一个包含 java 类文件和 clojure jar 文件的 jar 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T00:08:16.457

如果您想制作一个包罗万象的 jar，请使用以下工具：

*   [罐罐链接](http://code.google.com/p/jarjar/)
*   [一个 JAR™](http://one-jar.sourceforge.net/)

如果你*特别*想打包 jar 文件，你需要一个自定义的类加载器，比如：

*   [罐子类加载器](http://www.jdotsoft.com/JarClassLoader.php)

话虽如此，我还是会考虑道文的建议，除非你有特殊需要，否则它无法满足。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T16:46:38.413

据我了解，您的用例如下：您有一个主要是 Java 应用程序，并且您想使用 Java 中的一些 Clojure 函数。最好的方法是创建一个**:gen-class**作为 Clojure 功能的外观。欲了解更多信息，请阅读[这篇文章](https://stackoverflow.com/questions/2181774/calling-clojure-from-java)。

您需要创建一个单独的 Clojure 项目，由 Leiningen 管理。您可以将项目结果发布到本地 mavan 存储库（Leiningen 是 Maven 的外观）。

在 Java 项目中将依赖项添加到 Clojure 库中，您不必担心 clojure.jar，因为 Maven 会处理它。

这是一种标准的 Java 开发方式，请不要用 Clojure 语言和你的库创建一个整体 Jar。如果您使用 Leiningen (Maven)，则不需要它。

**替代方案：**我知道另一种构建项目的方法，即 Clojure 和 Java 源代码放在一起。它更脏，但它有效。如果你想让我描述它，请告诉我。

**编辑：**如果您以这种方式配置项目，则始终可以创建它的 uberjar。Maven 有一个[插件](http://maven.apache.org/maven-1.x/plugins/uberjar/)。