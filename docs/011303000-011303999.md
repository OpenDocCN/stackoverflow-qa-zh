# StackOverflow 问答 11303000-11303999

# android - Android GridView，里面有不同的项目

> ID：11303000
> 
> 赞同：0
> 
> 时间：2012-07-03T00:31:21.220
> 
> 标签：android, gridview

[我在这里](https://developer.android.com/guide/topics/ui/layout/gridview.html)关注了 Hello grid view turtorial 。我想知道有没有办法在网格视图中的图像旁边添加按钮？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T00:47:50.393

你可以尝试这样的事情：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/RelativeLayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <GridView xmlns:android="http://schemas.android.com/apk/res/android" 
            android:id="@+id/gridview"
            android:layout_width="fill_parent" 
            android:layout_height="300dp"
            android:columnWidth="90dp"
            android:numColumns="auto_fit"
            android:verticalSpacing="10dp"
            android:horizontalSpacing="10dp"
            android:stretchMode="columnWidth"
            android:gravity="center"  
     />

    <Button
          android:id="@+id/bAdd"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:text="Add RES"
          android:layout_below="@+id/gridview" />

</RelativeLayout> 
```

希望有帮助。

# iphone - 如何从 iPhone 向 Windows 发送消息？

> ID：11303002
> 
> 赞同：0
> 
> 时间：2012-07-03T00:31:29.843
> 
> 标签：iphone, ios, wcf, stream, nsdata

我有一个包含以下成员的对象：

```
NSString *reqStr = "param1=val1&param2=val2&param3=val3&..";
NSData *imageData = [NSJPEGRepresentation (myimage)];
NSData *fileContents = [NSData initWithFileContents(myfile.txt)]; 
```

如何将其发送到 Windows WCF？我是否将其作为字节流发送并附加到 httprequest？或者，这将是套接字吗？我不确定如何将这些东西打包成一个字节流或任何格式化此类对象的方式。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T01:12:28.730

既然你说你已经知道如何发送`imageData`which is `NSData`。为什么不将这三个转换`regStr`为`NSData`单个数据并将其组合在一起并发送。

转换`NSString`为`NSData`：

```
NSData* strData=[regStr dataUsingEncoding:NSUTF8StringEncoding]; 
```

并使用`NSMutableData`'s`appendData`方法将这三者结合起来。

```
NSMutableData *combineData = [[NSMutableData alloc]initWithData:strData];
[combineData appendData:imageData];
[combineData appendData:fileData]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T00:46:12.703

这个 S/O 问题可能会有所帮助：

[iphone编程中的文件上传到HTTP服务器](https://stackoverflow.com/questions/936855/file-upload-to-http-server-in-iphone-programming)

如果 WCF 端点被配置为 HTTP，那么同样的原则应该适用于相关图像的多部分/格式编码。

编辑：

这个答案更有帮助吗？

[iOS中的HTTP“POST”请求](https://stackoverflow.com/questions/9348746/http-post-request-in-ios)

# php - 在留言板即时编程中添加回复系统的最佳方法是什么？

> ID：11303008
> 
> 赞同：0
> 
> 时间：2012-07-03T00:31:58.017
> 
> 标签：php, posting

我目前正在编写一个板子，在它生命的这一点上与一个 chan 非常相似，但它不会就此结束。无论如何，目前我在顶部有一个基本的系统工作框，输入比它在下面发布的内容。现在显示信息（它被插入到一个 mysql 表中）我执行一个 mysql 查询来提取信息，然后执行一个 mysql_fetch_assoc，它进入 while 循环参数，然后我输入我想要循环的内容，所以该部分如下。

```
$get_posts = mysql_query("SELECT `title`, `content`, `time`, `id`, `user` FROM `General - Off Topic` ORDER BY time DESC");
while($get_posts_thing = mysql_fetch_assoc($get_posts)) {
echo $get_posts_thing['title'];
echo $get_posts_thing['content'];
} 
```

这基本上就是它的样子，但它在一个用于样式的 div 中。无论如何，我想创建一个回复系统，您可以在其中单击回复按钮并出现一个文本框，然后输入您的回复并单击发布。我希望帖子出现在被回复的帖子下，以 div 样式显示。因为它在一个while循环中，所以我不能单独挑选出来。有什么建议么？抱歉，这是我的第一篇文章，也是我的第一个真正的 php 项目，所以我不知道一些事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T00:35:11.400

在你的循环中，有一个`<button onClick="reply(this);>`. 然后在您的 JavaScript 中，定义`reply`函数以将按钮作为其参数，然后从那里开始工作以放入文本框等。

# java - JButtons用鼠标出现和消失

> ID：11303010
> 
> 赞同：0
> 
> 时间：2012-07-03T00:32:08.990
> 
> 标签：java, user-interface, mouse, jframe, jbutton

当我向这个 JFrame 添加几个 JButton 时，这些按钮会随着鼠标的移动而出现和消失……有点吓人。有任何想法吗？其他项目没有这个问题，因此我很确定它是我的代码......但它很简单，我不知道有什么问题！

完整代码：（我模糊了我的名字）

```
package explorerplus;

import java.awt.BorderLayout;
import java.awt.Container;
import java.awt.Toolkit;
import java.io.File;
import javax.swing.*;

public class ExplorerPlus {

//Declarations
Toolkit t = Toolkit.getDefaultToolkit();
 JFrame f = new JFrame();

public static void main(String[] args) {
   SwingUtilities.invokeLater(new Runnable() {
        public void run(){
            ExplorerPlus ep = new ExplorerPlus();
        }
    });
}
private ExplorerPlus(){
   // f.super("");
    f.setUndecorated(false);

    f.setSize(t.getScreenSize());
    f.setDefaultCloseOperation(f.EXIT_ON_CLOSE);
    Container c = null;
    c =new JScrollPane(c);
    f.setContentPane(c);
    f.setVisible(true);
    GoThrough(new File("C:/Users/*****/Pictures/"));
    f.repaint();
 }
  static int spc_count=-1;
  int curr_x = 10, curr_y = 10;
  void GoThrough(File aFile) {
spc_count++;
String spcs = "";
for (int i = 0; i < spc_count; i++)
  spcs += " ";
if(aFile.isFile()){
  System.out.println(spcs + "[FILE] " + aFile.getName());
  File file = aFile;
  String s = getExt(file) + ".png";
  JButton b = new JButton(new ImageIcon(s));
  b.setToolTipText(file.getName());
  b.setSize(256, 256);
  b.setLocation(curr_x, curr_y);
  b.setVisible(true);
  b.validate();
  f.validate();

  if(curr_x < f.getWidth() - 270){
      curr_x+=270;
  }else{
  curr_y+=270;
  curr_x = 10;
  }
  f.getContentPane().add(b);

}
else if (aFile.isDirectory()) {
  System.out.println(spcs + "[DIR] " + aFile.getName());
  File[] listOfFiles = aFile.listFiles();
  if(listOfFiles!=null) {
    for (int i = 0; i < listOfFiles.length; i++)
      GoThrough(listOfFiles[i]);
  } else {
    System.out.println(spcs + " [ACCESS DENIED]");
  }
}
spc_count--;
}

  String getExt(File f){

 if(f.getName().toLowerCase().endsWith(".jpg")|| f.getName().toLowerCase().endsWith(".jpeg")){
     return "jpeg";
 } else if(f.getName().toLowerCase().endsWith(".png")){
     return "png";
 }
 else if(f.getName().toLowerCase().endsWith(".html")){
     return "html";
 }else if(f.getName().toLowerCase().endsWith(".ini")){
     return "ini";
 }else{
     return "text";
 }
  }
  String AllButExt(File f){
      String name = f.getName();
      return name.replace(getExt(f), "");
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T08:56:13.137

我希望我没有理解你的意思：你想在你的 JFrame 上显示一个新的 JButton。但它没有出现。

如果是这样，您可以尝试使用：

```
f.updateUI(); 
```

将按钮添加到框架后。

# asp.net-mvc-4 - ASP.NET MVC 4 Web 应用程序调用 Web API

> ID：11303012
> 
> 赞同：0
> 
> 时间：2012-07-03T00:32:15.130
> 
> 标签：asp.net-mvc-4, asp.net-web-api

在同一个解决方案中，我有一个 MVC 4 Web 应用程序项目（“站点”）和一个 MVC 4 Web API 项目（“服务”）。

将来，我可能希望将服务部署在与站点不同的服务器上。

因此，我希望站点的模型类调用服务的 Web 方法。

这可能吗 ？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T00:43:32.513

除非我遗漏了什么，否则为什么不将站点模型创建为解决方案中的单独项目。您的网站会引用它。该模型将通过 HttpWebRequest 或类似的方式调用您的 Web API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T15:27:22.807

该视频可能会有所帮助 - 我相信还有一个附加视频（该视频的前身），其中包含有关实际设置 Web API 的更多详细信息。该视频介绍了如何使用 Web API 端点。希望能帮助到你！

[http://www.dimecasts.net/Content/WatchEpisode/205](http://www.dimecasts.net/Content/WatchEpisode/205)

# iphone - 将数据从 uitableview 保存到核心数据

> ID：11303016
> 
> 赞同：0
> 
> 时间：2012-07-03T00:33:16.833
> 
> 标签：iphone, uitableview, core-data, uitextfield

我有一个 UITableView，其中有两个不同的文本字段用于文本输入。有没有办法遍历整个表格视图并将其保存到核心数据或将结果复制到数组然后将其保存到核心数据。这是创建我的表格视图单元格的代码

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *CellIdentifier = @"Add Terms to New Set";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}

// Configure the cell...
questionTextField = [[UITextField alloc] initWithFrame:CGRectMake(10, 10, 250, 30)];
questionTextField.adjustsFontSizeToFitWidth = YES;
questionTextField.textColor = [UIColor blackColor];
//questionTextField.placeholder = @"Put Question Here";
questionTextField.keyboardType = UIKeyboardTypeDefault;
questionTextField.returnKeyType = UIReturnKeyDone;
[questionTextField.layer setBorderColor: [[UIColor grayColor] CGColor]];
[questionTextField.layer setBorderWidth: 0.5];
[questionTextField.layer setCornerRadius:8.0f];
[questionTextField.layer setMasksToBounds:YES];

[questionTextField setEnabled: YES];

answerTextField = [[UITextField alloc] initWithFrame:CGRectMake(400, 10, 250, 30)];
answerTextField.adjustsFontSizeToFitWidth = YES;
answerTextField.textColor = [UIColor blackColor];
//answerTextField.placeholder = @"Put Answer Here";
answerTextField.keyboardType = UIKeyboardTypeDefault;
answerTextField.returnKeyType = UIReturnKeyDone;

[answerTextField.layer setBorderColor: [[UIColor grayColor] CGColor]];
[answerTextField.layer setBorderWidth: 0.5];
[answerTextField.layer setCornerRadius:8.0f];
[answerTextField.layer setMasksToBounds:YES];

[answerTextField setEnabled: YES];

[cell addSubview:questionTextField];
[cell addSubview:answerTextField];
return cell; 
```

}

如何遍历 tableview 并将问题文本和答案文本添加到数组或直接保存到我的核心数据模式中？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T00:41:35.010

您应该采用不同的策略来保存数据。与其依赖视图（即单元格）来保留它，不如在用户输入后立即将其放入支持数组中。

你没有说你要显示多少行，但是，如果有滚动，你几乎可以保证，由于缓存，单元格比行少，并且当单元格返回时输入的信息将丢失再次。

`cellForRowAtIndexPath:`出于同样的原因，除非返回 nil，否则不应将字段添加到单元格中`dequeueReusableCellWithIdentifier:`……缓存的那些已经具有这些字段。

# java - MAC OS X 上带有 JAVA 的无线 RSSI 列表

> ID：11303017
> 
> 赞同：0
> 
> 时间：2012-07-03T00:33:30.543
> 
> 标签：java, macos, wireless, rssi

我正在寻找一个 API 来获取我的 Mac 周围的 RSSI 无线网络列表，但还没有找到。

Tks 的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T19:51:13.920

查看[Core WLAN 框架](http://developer.apple.com/library/mac/#documentation/Networking/Reference/CoreWLANFrameworkRef/_index.html)。在给定接口的“BSD 名称”的情况下获取[CWInterface](http://developer.apple.com/library/mac/#documentation/CoreWLAN/Reference/CWInterface_reference/translated_content/CWInterface.html#//apple_ref/doc/uid/TP40010960)`initWithInterfaceName:`，使用`scanForNetworksWithName:`或`scanForNetworksWithSSID:`不指定名称或 SSID（将执行“广播扫描”），然后查看您返回的[CWNetworks](http://developer.apple.com/library/mac/#documentation/CoreWLAN/Reference/CWNetwork_reference/translated_content/CWNetwork.html#//apple_ref/doc/uid/TP40010963)并从中提取信息，例如 RSSI .

希望有某种桥梁可以让您从 Java 访问该框架；如果没有，您可能必须自己创建这座桥。

请注意，这仅适用于 Lion 及更高版本。

# vim - 如何在 Vim 中的每一行末尾添加文本？

> ID：11303032
> 
> 赞同：144
> 
> 时间：2012-07-03T00:35:41.697
> 
> 标签：vim

在 Vim 中，我有以下文本：

```
key => value1
key => value2
key => value1111
key => value12
key => value1122222 
```

我想在每一行的末尾添加“，”。之前的文本将变为以下内容：

```
key => value1,
key => value2,
key => value1111,
key => value12,
key => value1122222, 
```

有谁知道如何做到这一点？是否可以使用可视块模式来完成此操作？

* * *

## 回答 #1

> 赞同：201
> 
> 时间：2012-07-03T00:44:43.563

这将对文件中的每一行执行此操作：

```
:%s/$/,/ 
```

如果要执行部分行而不是整个文件，可以指定它们来代替`%`.

一种方法是进行视觉选择，然后键入`:`. 它将`:'<,'>`为您填写，然后您输入其余部分（注意您只需要添加`s/$/,/`）

```
:'<,'>s/$/,/ 
```

* * *

## 回答 #2

> 赞同：184
> 
> 时间：2012-07-03T11:38:57.073

事实上，有一种方法可以使用可视块模式来做到这一点。只需`$A`在可视块模式下按下即可附加到选择中所有行的末尾。按下 后，附加文本将出现在所有行上`Esc`。

所以这是一个可能的解决方案：

```
vip<C-V>$A,<Esc> 
```

即在普通模式下，可视选择一个段落`vip`，切换到可视块模式`CTRL``V`，在所有行追加`$A`一个逗号`,`，然后按`Esc`确认。

文档位于[`:h v_b_A`](http://vimdoc.sourceforge.net/htmldoc/visual.html#v_b_A). 甚至在示例部分中还说明了它是如何工作的：[`:h v_b_A_example`](http://vimdoc.sourceforge.net/htmldoc/visual.html#v_b_A_example).

* * *

## 回答 #3

> 赞同：49
> 
> 时间：2012-07-03T05:30:10.413

另一个解决方案，使用另一个很棒的功能：

```
:'<,'>norm A, 
```

见`:help :normal`。

* * *

## 回答 #4

> 赞同：41
> 
> 时间：2012-07-03T00:38:26.603

ex 模式最简单：

```
:%s/$/,

: - enter command mode
% - for every line
s/ - substitute
$ - the end of the line
/ - and change it to
, - a comma 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2012-07-03T00:45:14.400

替代命令可以应用于视觉选择。在要更改的行上创建一个可视块，然后键入`:`，并注意命令行的初始化如下：`:'<,'>`. 这意味着替换命令将对视觉选择进行操作，如下所示：

```
:'<,'>s/$/,/ 
```

这是一个应该适用于您的示例的替换，假设您真的想要在*每行末尾*使用逗号，就像您提到的那样。如果有尾随空格，那么您可能需要相应地调整命令：

```
:'<,'>s/\s*$/,/ 
```

这将用逗号替换行尾之前的任何数量的空格，从而有效地删除尾随空格。

相同的命令可以在一系列行上运行，例如接下来的 5 行：`:,+5s/$/,/`，或整个缓冲区：`:%s/$/,/`。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-07-03T07:40:38.687

如果要在以 'key' 开头的行末尾添加 ','，请使用：

```
:%s/key.*$/&, 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-07-03T00:39:13.360

```
:%s/$/,/g 
```

$ 匹配行尾

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-07-03T14:20:15.670

我已经`<M-DOWN>`映射到（alt 向下箭头），`<DOWN>.`以便我可以非常快速地在一系列行上重复最后一个命令。有了这个映射，我可以：

```
A,<ESC> 
```

然后按住 alt 的同时反复按下以将逗号附加到每行的末尾。
这对我来说很有效，因为它可以很好地控制哪些行做和不做改变。
（我也有类似映射的其他箭头，以便于重复`.`）

这是要粘贴到您的 vimrc 中的映射行：

```
map <M-DOWN> <DOWN>. 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-05-12T17:15:36.123

以下宏也可用于完成您的任务。

```
qqA,^[0jq4@q 
```

# php - PHP：包含和需要文件时抛出错误

> ID：11303033
> 
> 赞同：5
> 
> 时间：2012-07-03T00:35:44.697
> 
> 标签：php, include, directory, require

我试图创建一个引导文件，但是每当我尝试在另一个文件中包含或要求它时，就会不断出现这样的错误：

**警告：** require_once（../folder/file.php）[function.require-once]：无法打开流：没有这样的文件或目录...

**致命错误：** require_once() [function.require]: 无法打开所需的 '../folder/file.php' (include_path='.:') in...

绘制整个场景：我有一个引导文件 load.php。在其中，我连接到位于 ../config/config.php 的配置文件。在加载文件上方，我在 classes/database.php 中有一个数据库类文件。在数据库文件中，我写了这个 if 语句：

```
 if ( file_exists('../load.php') ) {
               echo 'load.php: It exists';
               require_once('../load.php');
           } else {
                  echo 'load.php: It does not exist';
                  } 
```

在加载文件中，我写了一个类似的 if 语句，但检查配置文件是否存在。令人惊讶的是，当我加载 database.php 文件时，我得到：

```
load.php: It exists
config.php: file doesn't exist 
```

但是当我加载 load.php 文件时，我得到：

```
config.php: It exists 
```

这是我的文件所在的位置：

**根目录：** /Library/WebServer/Documents/project

**config.php 文件**/Library/WebServer/Documents/project/config/config.php

**load.php 文件：** /Library/WebServer/Documents/project/includes/load.php

**database.php 文件：** /Library/WebServer/Documents/project/includes/classes/database.php

我需要有关此错误的帮助。谢谢，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T00:50:04.717

使用`dirname(__FILE__) . '../relative/path/from/file/in/which/opened/to/config.php'`. 从 PHP 5.3 开始也有`__DIR__`常量

# c - 在 Linux 内核中添加头文件的路径

> ID：11303035
> 
> 赞同：1
> 
> 时间：2012-07-03T00:35:52.117
> 
> 标签：c, linux, linux-kernel, header-files

哪个环境变量表示为了找出包含在 Linux 内核中的 C 文件中的头文件而搜索的所有目录的列表？我在一个目录中有一些头文件，并希望在搜索的所有目录列表中包含该目录的路径。我该怎么做？我尝试导出 C_INCLUDE_PATH，但这并没有消除错误，它表示它仍然找不到头文件。

感谢：D。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T04:36:07.260

在 Makefile 中添加`-I/where/ever`参数。`EXTRA_CFLAGS`虽然一般这种事情是不好的形式。内核构建包括它自己的`include`树（当然还有本地目录）。您的代码是否有理由不符合现有框架？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T00:52:50.173

通常没有列出所有搜索头文件的目录的环境变量。搜索的目录是使用的编译器的功能。您的编译器几乎可以肯定有一个命令行开关来将目录添加到搜索列表中。例如，对于 GCC 和 clang，考虑“-I”开关和相关开关。您的编译器也可能有环境变量，您可以在其中列出要添加到搜索列表的目录，例如 C_INCLUDE_PATH。请记住，这些可能会列出要搜索的**其他**目录；他们没有列出所有搜索的目录。

# sql - 表的设计方式，有什么缺陷？

> ID：11303038
> 
> 赞同：-1
> 
> 时间：2012-07-03T00:36:20.430
> 
> 标签：sql, sql-server, database-design

我有一个如下表：

tblQuestions
---------------
ID(pk) int
CustomerID(fk) int
QTypeID(fk) int
QNumber int
FieldName varchar(max)
FieldValue varchar(max)

CustomerID、QTypeID、QNumber 上的聚集索引。
对于 CustomerID、QTypeID 和 QNumber 的每个组合，将有 4 到 5 条记录。并且，对于每个 customerID，最多有 250 条记录。

另一种设计方法是创建 5 到 6 个不同的表，其中定义了字段，并将 customerid 作为外键，每个客户有一条记录。

我的问题是，第一种方法在多少条记录后开始影响性能，或者会一直影响性能吗？

你觉得这种方法有什么问题吗？最大可能的记录可能高达 5000 万条记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T01:06:00.740

您可能在这里过早地进行了优化。以在规范化和消除重复方面最有意义的方式设计您的模式，而不是在预期性能方面。

“我的问题是，第一种方法在多少条记录后开始影响性能，还是会一直如此？”

没有人可以为你回答这个问题。如果你想知道你提议的表设计的性能特征，模拟它，插入你的 50M 记录并运行一些查询。

“你觉得这种方法有什么问题吗？”

数据库模式设计没有正确或错误的答案。有像规范化这样的最佳实践，但也有很多理由对数据进行反规范化。如果您担心的话，模拟一下并测试性能。

# android - 如何在 Android 的 EditText 中居中提示文本？

> ID：11303043
> 
> 赞同：74
> 
> 时间：2012-07-03T00:37:52.383
> 
> 标签：android

我需要`EditText`在 Android 中将提示文本居中。我该怎么做呢？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-07-03T01:08:21.103

为了使提示文本居中与 EditText 一起使用，您必须确保定义了 android:ellipsize="start"。我不知道为什么这使它起作用，但确实如此。

从个人代码中提取的示例：

```
<EditText
    android:id="@+id/player2Name"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerInParent="true"
    android:ellipsize="start"
    android:gravity="center_horizontal"
    android:hint="@string/player2_name"
    android:inputType="textCapWords|textPersonName"
    android:singleLine="true" /> 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2014-05-28T16:42:22.693

实际上，`android:gravity="center_horizontal"`创建您正在寻找的居中效果。同样，您可以使用`android:gravity="start"`在 EditText 视图的开头放置提示文本，等等。

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2012-07-03T05:33:12.787

使用这个 xml 属性：

> 机器人：重力=“中心”

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2014-08-04T09:27:52.737

使用属性

```
android:gravity="center" 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2014-11-13T10:35:39.080

我在每种情况下都使用了这段代码，它可以完美地工作，而无需使用**android:ellipsize="start"**在中心进行提示。

```
 <EditText
    android:id="@+id/player2Name"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:gravity="center_horizontal"
    android:hint="robi"
    android:inputType="text" /> 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2016-09-04T13:50:57.727

我认为答案应该是：

```
android:textAlignment="center" 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2017-02-27T11:58:28.030

textAlignment 为我工作。

```
textAlignment="center" 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2015-05-09T12:20:41.580

不幸的是，这两个答案都没有帮助我对齐提示，用 LTR 语言编写，而布局方向是 RTL。我需要在一种翻译应用程序中进行这样的布局，以使覆盖图标不会干扰 RTL 文本。但是这个技巧不适用于提示，因为还没有任何文本（图标出现在提示上方），我来到了以下布局问题的 java 解决方案：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
. . .
        if (isRightToLeft()){
            EditText guess = (EditText) rootView.findViewById(android.R.id.text1);
            CharSequence hint = "\u200F" + guess.getHint();
            guess.setHint(hint);
        }
. . .
} 
```

诀窍是在从右到左的标记中添加从左到右的字符串。它似乎有效，但有人知道更优雅的解决方案吗？

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2018-05-08T10:22:38.713

```
<android.support.design.widget.TextInputLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginEnd="16dp"
        android:layout_marginStart="16dp"
        android:layout_marginTop="8dp">

        <android.support.design.widget.TextInputEditText
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:hint="ENTER PIN"
            android:inputType="numberPassword" />
    </android.support.design.widget.TextInputLayout> 
```

注意：在标签 TextInputEditText 中，属性

> 机器人：重力=“中心”

是什么使得在中心对齐文本（包括提示文本）的处理

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2018-05-17T07:16:54.873

使用这个：android:gravity="center"

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2018-08-29T11:32:14.660

我使用它并为我工作

```
android:gravity="Left|center_vertical" 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2018-02-01T06:52:50.193

在 EditText 中使用 `android:textAlignment="center"`，它对我有用

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2017-07-21T20:52:49.317

这对我有用：

```
<android.support.design.widget.TextInputLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:id="@+id/nombreslayoutinput">
    <EditText
        android:id="@+id/nombreslayout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:hint="@string/nombres"
        android:layout_centerInParent="true"
        android:gravity="center|center_vertical"
        android:ellipsize="start"
        android:inputType="textCapWords|textPersonName"

        />
</android.support.design.widget.TextInputLayout> 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2021-02-24T15:27:26.063

正确答案是

```
android:gravity="center_horizontal 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2021-10-04T07:21:06.320

> 暗示重力

```
android:textAlignment="center" 
```

> 文字重力

```
android:gravity="left" 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-03-08T17:20:36.597

我的问题是`EditText`不够大，无法完全适合其父级（`FrameLayout`在我的情况下），因此仅使用`android:gravity="center"`(center_vertical、horizo​​ntal、start 或其他) 只会适合它在 中`EditText`，而不是在其父级中，所以我必须`EditText`使用以下方法将其父级居中：

`android:layout_gravity="center"`

pd：我曾经 `android:background="@android:color/transparent"`在`EditText`提示中隐藏丑陋的下划线

# java - 如何使用 java 从网站读取属性文件？

> ID：11303044
> 
> 赞同：-1
> 
> 时间：2012-07-03T00:37:52.460
> 
> 标签：java, file, properties, web, readfile

我正在开发一个 java 程序，但我需要能够让所有用户能够在没有我拥有的属性文件的情况下访问它。我想要一种在网站上托管属性文件的方法，以便 java 程序客户端可以访问它/读取它/写入它。这可能吗？如果是，请解释

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T00:50:07.340

如果我理解正确：

1.  你有一个 Java 应用程序

2.  您要将应用程序分发给用户，用户将在本地执行它

    ... 但 ...

3.  您只是希望您的用户能够从 Web 访问全局属性文件。

那是对的吗？

如果是这样，只需：

1) 使用Java URLConnection/stream 类读取文件

```
 * http://docs.oracle.com/javase/tutorial/networking/urls/readingWriting.html 
```

2) 像使用任何其他属性文件一样使用“properties.load()” - 只需使用 URLconnection 流而不是 FileStream

'希望有帮助

PS：

我肯定会有一个本地属性文件 - 或设置合理的默认值 - 作为备份，以防用户的 Internet 连接暂时中断。

# backbone.js - 使用 Backbone.Rpc 设置收集方法的参数

> ID：11303048
> 
> 赞同：0
> 
> 时间：2012-07-03T00:38:18.167
> 
> 标签：backbone.js

使用 Backbone.Rpc 插件 [ [https://github.com/asciidisco/Backbone.rpc](https://github.com/asciidisco/Backbone.rpc) ] 我试图在获取集合时在 read 方法上发送参数。使用单个模型实例时，您可以通过设置模型属性的值向方法调用添加参数。

```
var deviceModel = Backbone.model.extend({
  url: 'path/to/rpc/handler',
  rpc: new Backbone.Rpc(),
  methods: {
    read: ['getModelData', 'id']
  }
});
deviceModel.set({id: 14});
deviceModel.fetch(); // Calls 'read'

// Request created by the 'read' call
{"jsonrpc":"2.0","method":"getModelData","id":"1331724849298","params":["14"]}; 
```

我知道没有相应的方法可以在获取集合之前做类似的事情，因为骨干集合没有可用的“设置”方法。

```
var deviceCollection = Backbone.collection.extend({
  model: deviceModel,
  url: 'path/to/rpc/handler',
  rpc: new Backbone.Rpc(),
  methods: {
    read: ['getDevices', 'deviceTypeId']
  }
});
// This is not allowed, possible work arounds?
deviceCollection.set('deviceTypeId', 2);
deviceCollection.fetch();
// Request created by the 'read' call
{"jsonrpc":"2.0","method":"getDevices","id":"1331724849298","params":["2"]}; 
```

是否可以使用 Backbone.Rpc 将参数传递给收集方法？还是我需要在 fetch 方法的数据对象中传递集合过滤器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T11:23:41.263

我更新了 Backbone.Rpc (v 0.1.2) & 现在您可以使用以下语法为您的调用添加“动态”参数。

```
var Devices = Backbone.Collection.extend({
    url: 'path/to/my/rpc/handler',
    namespace: 'MeNotJava',
    rpc: new Backbone.Rpc(),
    model: Device,
    arg1: 'hello',
    arg2: function () { return 'world' },
    methods: {
        read : ['getDevices', 'arg1', 'arg2', 'arg3']
    }
});

var devices = new Devices();
devices.fetch(); 
```

此调用导致以下 RPC 请求：

```
{"jsonrpc":"2.0","method":"MeNotJava/getDevices","id":"1331724850010","params":["hello", "world", "arg3"]} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T10:01:13.107

啊，好吧，这暂时不包括在内，但我可以理解这里的问题。我应该能够为允许 RPC 插件读取集合属性的集合添加解决方法。

```
var deviceCollection = Backbone.collection.extend({
    model: deviceModel,
    url: 'path/to/rpc/handler',
    rpc: new Backbone.Rpc(),
    deviceTypeId: 2,
    methods: {
        read: ['getDevices', 'deviceTypeId']
    }
}); 
```

然后将创建此响应：

```
{"jsonrpc":"2.0","method":"getDevices","id":"1331724849298","params":["2"]}; 
```

我今晚会看看。

# html - Visual Studio HTML 正则表达式替换

> ID：11303060
> 
> 赞同：0
> 
> 时间：2012-07-03T00:40:02.740
> 
> 标签：html, regex, visual-studio-2010

我正在从事一个已经开发了大约 20 年的大型项目，而且规模巨大。需要对大约 300 页进行修改，实际替换大约 2800 个。这让我渴望使用 Visual Studio 的 RegEx 进行实际替换。

它位于另一种文件类型的伪 HTML 文件中，该文件被传递给基于某些命令“执行”代码并输出 HTML 文本的解析器。我正在使用的语法包含带有如下调用的常规 HTML 代码：

```
<div id="outer-box" <__@BGCOLOR>>            //Basic call
<div id="outer-box" <__@BGCOLOR TOGGLE"1">>  //Call with toggle (only) parameter 
```

现在我需要做的就是将其更改为：

```
<div id="outer-box" style="<__@BGCOLOR>">
<div id="outer-box" style="<__@BGCOLOR TOGGLE="1">"> 
```

但这就是问题所在。一些标签已经声明了 style 属性，如下所示：

```
<div id="inner-box" style="border:1px" <__@BGCOLOR>>  //One possibility
<div id="inner-box" <__@BGCOLOR> style="border:1px">  //Another one 
```

这意味着我需要将其更改为：

```
<div id="inner-box" style="<__@BGCOLOR>border:1px"> 
```

我已经与它战斗了几个小时，但似乎无法做到正确。我还应该补充一点，有时一行中会出现多个 HTML 元素，有时在给定元素中会出现多个解析器调用（使用与 BGCOLOR 不同的命令）。

到目前为止，我找到的所有尚未修复的实例是这样的：

```
~(style=")\<__\@BGCOLOR{.@}\> 
```

**编辑：**为澄清起见，这是使用[Visual Studio 的 RegEx 语法](http://msdn.microsoft.com/en-us/library/2k3te2cs.aspx)，我正在专门寻找对 BGCOLOR 命令的调用。我有上面的正则表达式，它能够找到 <__@BGCOLOR[ TOGGLE="1"]> 之前没有'style="' 的所有情况，以过滤掉已经修复的项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T04:21:39.343

我将首先对文本做一些简化的假设。在尝试将 HTML 与正则表达式匹配时，这总是必要的，但在这种情况下，主要是为了使正则表达式更易于阅读。可以更正正则表达式以反映更复杂的标准，而无需更改其基本结构。

*   元素和属性名称总是按字母顺序排列（即，它们与 VS 的`:w`, 或匹配`[A-Za-z]+`）。
*   属性名称前面总是有空格和/或制表符 ( `:b+`)。
*   属性值始终用引号引起来 ( `:q`)。
*   `=`属性名称和它的值之间没有空格。

另外，请注意我在`~(style):w`. 它说“一个或多个字母 ( `:w`)，但如果它们构成单词，则不是`style`”。您正在使用它，就好像它是一个否定的*后*视：" `<__@BGCOLOR{.@}>`，除非它前面是`style=`"。很多人都会犯这个错误。

我提出了一个四步流程：

首先，匹配任何带有特殊标记的元素并重新排列它，以便将标记列在所有属性之后：

*   搜索：`{\<:w(:b+:w=:q)*}{:b+\<__\@BGCOLOR[^<>]*\>}{(:b+:w=:q)+}`
*   代替：`\1\3\2`

其次，如果有一个`style`属性，请确保它是列出的最后一个属性（但在特殊标记之前）：

*   搜索：`{\<:w(:b+~(style):w=:q)*}{:b+style=:q}{(:b+~(style):w=:q)+}{:b+\<__\@BGCOLOR[^<>]*\>}`
*   代替：`\1\3\2\4`

第三，将特殊标记包装在一个`style`属性中：

*   搜索：`{\<__\@BGCOLOR[^<>]*\>}\>`
*   代替：`style="\1">`

最后，如果有两个`style`属性，合并它们：

*   搜索：`style="{[^"]+}":b+style="{\<[^<>]+\>}"`
*   代替：`style="\1; \2"`

从这段文字开始：

```
<div <__@BGCOLOR> id="inner-box" style="border:1px">
<div foo="bar" id="inner-box" <__@BGCOLOR TOGGLE="1"> style="border:1px">
<div id="inner-box" bar="foo" <__@BGCOLOR>>
<div  id="inner-box" <__@BGCOLOR> style="border:1px">
<div id="inner-box" style="border:1px" <__@BGCOLOR TOGGLE="1">>
<div id="inner-box" <__@BGCOLOR> foo="bar"> 
```

...我最终得到了这个：

```
<div id="inner-box" style="border:1px; <__@BGCOLOR>">
<div foo="bar" id="inner-box" style="border:1px; <__@BGCOLOR TOGGLE="1">">
<div id="inner-box" bar="foo" style="<__@BGCOLOR>">
<div  id="inner-box" style="border:1px; <__@BGCOLOR>">
<div id="inner-box" style="border:1px; <__@BGCOLOR TOGGLE="1">">
<div id="inner-box" foo="bar" style="<__@BGCOLOR>"> 
```

我得告诉你，Visual Studio 是这里的主要障碍。这是一个很棒的 IDE，但它的正则表达式风格很奇怪。如果您打算做很多此类事情，我强烈建议您切换到像[EditPad Pro](http://www.editpadpro.com/)或[PowerGrep](http://www.powergrep.com/)这样的工具，它使用**标准**语法的全功能正则表达式风格。

**编辑：**我终于做了（相对）明智的事情，并以类似 Perl 的风格编写了正则表达式，主要是为了找出问题是否可以用正则表达式解决。确实如此，而且只需要两个步骤：

搜索：

```
(
  <\w+\b
  (?:
    \s*
    (?:
      \w+="[^"]+"
    |
      <(?!__@BGCOLOR)[^<>]*>
    )
  )*
  \s*
)
(<__@BGCOLOR[^<>]*>)
(
  (?:
    \s*
    (?:
      \w+="[^"]+"
    |
      <[^<>]+>
    )
  )*
) 
```

代替：

```
$1style="$2"$3 
```

搜索：

```
(
  <\w+\b
  (?:
    \s*
    (?:
      (?!style)\w+="[^"]+"
    |
      <[^<>]+>
    )
  )*
  \s*
)
style="([^"]+)"
(
  (?:
    \s*
    (?:
      (?!style)\w+="[^"]+"
    |
      <[^<>]+>
    )
  )*
)
\s*style="([^"]+)" 
```

代替：

```
$1style="$2; $4"$3 
```

下一步是将其转换为 Visual Studio 语法（如果可能的话），但我现在太累了，无法开始。;) 而且，正如我之前所说，如果你要经常做这种事情，你应该考虑编写一个专用的解析器，或者切换到使用标准语法的工具或语言（对于非常松散的定义“标准”）。无论您做什么，都不要使用 Visual Studio 的本机所谓的正则表达式，您将对每个人都有帮助。:D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T00:54:14.260

这是我想出的（任何人都可以自由编辑）：

正则表达式：`^.*<.*(<.*>(?!")).*>.*$`

那应该捕获该`<__@BGCOLOR>`区域，然后您可以将其替换为适合您需要的任何内容。

# mysql - 如何更新我的 sql 5.0 查询

> ID：11303061
> 
> 赞同：1
> 
> 时间：2012-07-03T00:40:27.447
> 
> 标签：mysql

我有以下 sql 查询：

```
UPDATE table_b
SET score=1, score_a = 1
WHERE id = (select id from table_a where user_id ="Ken") 
```

我想为“Ken”、“Joe”等多个用户更新 score 和 score_a。

谁能帮我告诉我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T00:42:10.753

使用`JOIN`连接`table_b.id`到`table_a.id`.

```
UPDATE
  table_b
  JOIN table_a ON table_b.id = table_a.id
SET 
  score=1, 
  score_a = 1
WHERE
  table_a.user_id IN('Ken','Joe','etc') 
```

# forms - 如何为 symfony2 中的附加列制作多对多关系的表格？

> ID：11303067
> 
> 赞同：1
> 
> 时间：2012-07-03T00:41:36.340
> 
> 标签：forms, symfony

我有如下课程：

```
Class Order
{
   // Order have many Product
   // One to Many ->  ProductOrder
}

Class ProductOrder
{
    $order
    $product
    $type
    // other variable  
}

Class Product
{
   // Product has many Order
   // One to Many ->  ProductOrder
} 
```

基本上我有`@manytomany`额外的列，所以我需要根据[这里](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/association-mapping.html#many-to-many-unidirectional)`ProductOrder`黄色框中的注释在中间。

我的问题是如何使用`One Order`and获得一种形式`Multiple Products`。

像[How to setup a many to many form in Symfony2](https://stackoverflow.com/questions/9553636/how-to-setup-a-many-to-many-form-in-symfony2)但我需要中产阶级`UserTask`。如果我使用没有中产阶级的多对多，我可以轻松地创建表单并且一切正常，但是拥有中产阶级和相同的功能是我所需要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T02:55:21.753

您需要使用表单集合。

我关于表单集合的问题和答案： [表单集合错误](https://stackoverflow.com/questions/11234149/form-collection-error)

Symfony 2 文档的表单集合：http: [//symfony.com/doc/current/cookbook/form/form_collections.html](http://symfony.com/doc/current/cookbook/form/form_collections.html)

Symfony 2.0：集合的嵌入式表单： [http ://www.scott-sherwood.com/?p=90](http://www.scott-sherwood.com/?p=90)

# wpf - 如果边框内的文本框包含我的搜索文本框中的文本，则更改边框的背景

> ID：11303068
> 
> 赞同：0
> 
> 时间：2012-07-03T00:42:02.643
> 
> 标签：wpf, binding, triggers, textbox

当文本框包含来自另一个文本框的文本时，我想创建一些突出显示文本框的 XAML。它本质上是突出显示搜索的项目。

用户界面： ![这是我的用户界面：](../Images/5f7566269b7366e0d65d7090fd084b64.png)

当用户在 UI 左下角的“搜索”文本框中输入任何内容时，它会从树形视图中过滤工作站，直到仅剩下的工作站包含详细信息中的搜索词。当他们然后选择一个树视图项目时，它会填充右侧的详细信息。我希望它突出显示包含搜索词的文本框，如上面的工作站名称字段所示。

这是我的一些代码：

带有硬编码突出显示的文本框

```
<StackPanel Grid.Column="1" Grid.Row="0">
    <Border Name="HighlightBorder" Grid.Column="1" Grid.Row="0" CornerRadius="4">
         <Border.Background>
              <RadialGradientBrush RadiusX="1" RadiusY="0.7">
                   <GradientStop Color="Black" Offset="1"/>
                   <GradientStop Color="#FFFFEA00"/>
              </RadialGradientBrush>
         </Border.Background>

         <TextBox Margin="5" Height="32" FontSize="16" Foreground="White" Text="{Binding WorkstationName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
    </Border>
</StackPanel> 
```

搜索文本框：

```
<Grid>
     <Grid.ColumnDefinitions>
           <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
     </Grid.ColumnDefinitions>
     <TextBlock Text="Search:" Foreground="White" FontSize="16"/>
     <TextBox Grid.Column="1" Text="{Binding SearchCriteria, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
</Grid> 
```

当文本框包含搜索文本框中的字符串时，是否有一种简单的方法只让边框具有渐变背景，否则为黑色？我很乐意让它成为一个仅限 XAML 的解决方案，但我也不固执。

我也认为有一点背景脉冲会很好，但我可以努力找出自己的动画，我真的只需要帮助解决我的问题。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T03:40:43.047

我认为您将需要一些转换器形式的代码

```
public class ContainsSearchTextConverter : IMultiValueConverter
{
    #region IMultiValueConverter Members

    public object Convert(object[] values, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        if (values.Any(v => v == DependencyProperty.UnsetValue))
            return null;

        var text = values[0].ToString();

        var search = values[1].ToString();

        if (string.IsNullOrWhiteSpace(search))
            return null;

        if (text.Contains(search))
            return "true";

        return null;
    }

    public object[] ConvertBack(object value, Type[] targetTypes, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }

    #endregion
} 
```

然后你像这样使用它：

```
 <StackPanel>
        <Border Name="HighlightBorder" Grid.Column="1" Grid.Row="0" CornerRadius="4">
            <Border.Style>
                <Style TargetType="Border">
                    <Style.Triggers>
                        <DataTrigger Value="true">
                            <DataTrigger.Binding>
                                <MultiBinding Converter="{StaticResource containsSearchTextConverter}">
                                    <Binding ElementName="workStationNameTextBox" Path="Text" />
                                    <Binding Path="SearchCriteria" />
                                </MultiBinding>
                            </DataTrigger.Binding>
                            <Setter Property="Background" >
                                <Setter.Value>
                                        <RadialGradientBrush RadiusX="1" RadiusY="0.7">
                                            <GradientStop Color="Black" Offset="1"/>
                                            <GradientStop Color="#FFFFEA00"/>
                                        </RadialGradientBrush>
                                </Setter.Value>
                            </Setter>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </Border.Style>

            <TextBox Name="workStationNameTextBox" Background="Black" Margin="5" Height="32" FontSize="16" Foreground="White" Text="{Binding WorkstationName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
        </Border>
    </StackPanel> 
```

# jquery - 引导轮播延迟加载器

> ID：11303075
> 
> 赞同：2
> 
> 时间：2012-07-03T00:43:47.133
> 
> 标签：jquery, twitter-bootstrap

我的网页上有引导轮播，我希望它延迟加载。我在网上找到了这段代码：

```
$("#myCarousel").bind("slid", function(){
    $img = $(".active img", this);
    $img.attr("src", $img.data('lazy-load-src'));
}); 
```

当单击下一个按钮（或上一个）按钮时，这会导致轮播“加载”当前图像。我希望它加载的不是当前图像，而是之后的图像，以及当前图像前面的图像，这样我仍然有漂亮的滑动动画。而不是加载图像。

所以我的问题是如何在单击下一个按钮时将lazy-load-src 设置为上一张图片和下一张图片的src？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T18:08:32.367

有几个选项，取决于您需要的精度，但您应该保留`lazy-load-src`自己的`img`标签。

您可以使用选择器，输入`data-`属性并使用它来选择要加载的*下一个图像。*但这很混乱。

我认为您最好的镜头是[`.next()`](http://api.jquery.com/next/)在您的项目上使用该方法，以便`slid`您加载下一张图像。就像是 ：

```
$('#myCarousel').on('slid', function() {
    var $nextImage = $('.active.item', this).next('.item').find('img');
    $nextImage.attr('src', $nextImage.data('lazy-load-src'));
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-16T10:00:33.830

我已经更新了 Sherbrows 的回答以支持 Bootstrap v3 和随机开始索引。我正在使用一页缩略图。当用户单击拇指时，轮播应从该索引处开始。

**显示轮播**

```
function showGallery(startIndex) {
    //Load first and second image
    var imageElement = $('#fullscreengallery .item:nth-child(' + (startIndex + 1) + ') img');
    imageElement.attr('src', imageElement.attr('data-lazy-load-src'));
    imageElement = $('#fullscreengallery .item:nth-child(' + (startIndex + 2) + ') img');
    imageElement.attr('src', imageElement.attr('data-lazy-load-src'));
    //Init carousel
    $('#fullscreengallery').carousel(startIndex);
    //Show carousel
    $('#fullscreengallery').removeClass('hidden');
}; 
```

**做延迟加载**

```
$('#fullscreengallery').on('slid.bs.carousel', function() {
    //Lazy load
    var nextImage = $('.active.item', this).next('.item').find('img');
    //If no next, select first
    if(nextImage.length === 0){
        nextImage = $('#fullscreengallery .item:nth-child(1) img');
    }
    //Set the source if it hasn't been set already
    if (!nextImage.attr('src')) {
        nextImage.attr('src', nextImage.attr('data-lazy-load-src'));
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-03T18:58:45.960

我将 Arnoud Sietsema 的回答更进一步。轮播中的图像可以从加载 gif 开始。然后...

显示轮播

```
function showGallery(startIndex) {
    //Load first, second and last image
    var imageElement = $('#fullscreengallery .item:nth-child(' + (startIndex + 1) + ') img');
    imageElement.attr('src', imageElement.attr('data-lazy-load-src'));
    imageElement.attr('data-loaded', '1');

    imageElement = $('#fullscreengallery .item:nth-child(' + (startIndex + 2) + ') img');
    imageElement.attr('src', imageElement.attr('data-lazy-load-src'));
    imageElement.attr('data-loaded', '1');

    imageElement = $('#myCarousel .item:last img');
    imageElement.attr('src', imageElement.attr('data-src'));
    imageElement.attr('data-loaded', '1');

    //Init carousel
    $('#fullscreengallery').carousel(startIndex);
    //Show carousel
    $('#fullscreengallery').removeClass('hidden');
}; 
```

做延迟加载

```
$('#fullscreengallery').on('slid.bs.carousel', function() {
    //Lazy load
    var nextImage = $('.active.item', this).next('.item').find('img');
    //If no next, select first
    if(nextImage.length === 0){
        nextImage = $('#fullscreengallery .item:nth-child(1) img');
    }

    //Set the source if it hasn't been set already
    if (nextImage.attr('data-loaded') == '0') {
        var $downloadingImage = $("<img>");
        $downloadingImage.load(function(){
        nextImage.attr("src", $(this).attr("src")); 
            nextImage.attr('data-loaded', '1');
        });
        $downloadingImage.attr("src", nextImage.attr('data-src'));
    }

    var prevImage = $('.active.item', this).prev('.item').find('img');
    //If none, select last
    if(prevImage.length === 0){
        prevImage = $('#myCarousel .item:last img');
    }
    //Set the source if it hasn't been set already
    if (prevImage.attr('data-loaded') == '0') {
        var $downloadingImage = $("<img>");
        $downloadingImage.load(function(){
            prevImage.attr("src", $(this).attr("src")); 
            prevImage.attr('data-loaded', '1');
        });
        $downloadingImage.attr("src", prevImage.attr('data-src'));
    }

}); 
```

不同之处在于，当尝试加载下一张幻灯片时，它首先“在引擎盖下”加载，并且只有在加载时才插入轮播。因此，加载图像会一直显示，直到图像完全加载。

此外，旋转木马现在可以双向移动。

# jquery - 使用 jquery 渲染部分视图时的所有站点加载

> ID：11303078
> 
> 赞同：1
> 
> 时间：2012-07-03T00:43:54.543
> 
> 标签：jquery, asp.net-mvc-3

当我用这个 jquery 加载部分视图时：

```
$.get('@Url.Action( "List" , "Menu" )', function(data) {
    $('#treeviewdiv div').replaceWith(data);
});​ 
```

所有网站都在我的网站内再次加载。我的意思是另一个头标签，另一个身体标签。

我使用它，但它也不起作用：

```
$.get('@Url.Action( "List" , "Menu" ) #container', function(data) {
    $('#treeviewdiv div').replaceWith(data);
});​ 
```

...并且容器是我的局部视图中的 div 标签。

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T01:05:00.943

这通常表示操作返回完整视图而不是部分视图。好消息是这可以通过几个不同的选项简单地解决。

1 使动作返回局部视图：

```
public PartialViewResult Menu(){
  return PartialView();
} 
```

2 如果这是可以通过 ajax 或标准方法调用的操作，则根据 ajax 请求进行切换可能会有所帮助：

```
public ActionResult Menu(){
  return Request.IsAjaxRequest() ? PartialView() : View();
} 
```

3 另一种选择是让视图为您处理它（您可以在特定视图或`ViewStart.cshtml`文件中执行此操作）：

```
@{
  Layout = !IsAjax ? "~/Views/Shared/_Layout.cshtml" : null;
} 
```

# android - twitter android 的 OAuthCommunicationException

> ID：11303081
> 
> 赞同：0
> 
> 时间：2012-07-03T00:44:30.833
> 
> 标签：android, twitter, oauth

我按照这里的教程链接（http://marakana.com/forums/android/examples/312.html），它没有工作。然后我下载了源代码并让它运行和工作。但是，当我输入密钥和密钥时，它不再起作用，并且我在应用程序中收到“OAuthCommunicationException”。我没有改变任何其他东西，我怎样才能让它工作？谢谢

编辑：这是我的堆栈跟踪错误。

```
07-07 18:56:47.835: W/System.err(586): oauth.signpost.exception.OAuthCommunicationException: Communication with the service provider failed: https://api.twitter.com/oauth/request_token
07-07 18:56:47.835: W/System.err(586):  at oauth.signpost.AbstractOAuthProvider.retrieveToken(AbstractOAuthProvider.java:214)
07-07 18:56:47.835: W/System.err(586):  at oauth.signpost.AbstractOAuthProvider.retrieveRequestToken(AbstractOAuthProvider.java:69)
07-07 18:56:47.845: W/System.err(586):  at com.marakana.oauth.MainActivity$OAuthAuthorizeTask.doInBackground(MainActivity.java:114)
07-07 18:56:47.845: W/System.err(586):  at com.marakana.oauth.MainActivity$OAuthAuthorizeTask.doInBackground(MainActivity.java:1)
07-07 18:56:47.845: W/System.err(586):  at android.os.AsyncTask$2.call(AsyncTask.java:264)
07-07 18:56:47.845: W/System.err(586):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
07-07 18:56:47.845: W/System.err(586):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
07-07 18:56:47.845: W/System.err(586):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
07-07 18:56:47.855: W/System.err(586):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
07-07 18:56:47.855: W/System.err(586):  at java.lang.Thread.run(Thread.java:856)
07-07 18:56:47.855: W/System.err(586): Caused by: java.io.FileNotFoundException: https://api.twitter.com/oauth/request_token
07-07 18:56:47.865: W/System.err(586):  at libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:177)
07-07 18:56:47.865: W/System.err(586):  at libcore.net.http.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:270)
07-07 18:56:47.875: W/System.err(586):  at oauth.signpost.basic.HttpURLConnectionResponseAdapter.getContent(HttpURLConnectionResponseAdapter.java:18)
07-07 18:56:47.875: W/System.err(586):  at oauth.signpost.AbstractOAuthProvider.handleUnexpectedResponse(AbstractOAuthProvider.java:228)
07-07 18:56:47.885: W/System.err(586):  at oauth.signpost.AbstractOAuthProvider.retrieveToken(AbstractOAuthProvider.java:189)
07-07 18:56:47.895: W/System.err(586):  ... 9 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T05:29:53.083

请让源您更改给定演示中需要的所有字段，例如消费者密钥、消费者秘密、访问令牌、访问令牌秘密等，请参阅[http://www.android10.org/index.php/articleslibraries/291-twitter-integration-in -你的安卓应用程序](http://www.android10.org/index.php/articleslibraries/291-twitter-integration-in-your-android-application)

# php - 如何以极其安全的方式保护目录和/或某些文件？

> ID：11303082
> 
> 赞同：2
> 
> 时间：2012-07-03T00:44:33.437
> 
> 标签：php, security

我开始有一个充满 PHP 文件的目录，我需要保护这些文件免受未经授权的访问。如果未经授权的人能够以某种方式访问​​这些文件，那对我来说几乎是世界末日。但是，我应该注意的一件事是，我网站上的其他文件需要包含其中一些 PHP 文件才能正常运行。

保护这些文件的最佳方法是什么？我已阅读有关使用 .htaccess 文件对目录进行密码保护的信息，但我想知道这是否真的是最好和最安全的方式？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T03:51:19.420

将那些敏感的 PHP 文件放在受 .htaccess 保护的目录中

# java - 从 IVariable 对象表示中提取真实对象

> ID：11303084
> 
> 赞同：1
> 
> 时间：2012-07-03T00:44:36.527
> 
> 标签：java, eclipse, debugging, eclipse-plugin

我目前正在实现一个 IDebugContextListener 类（eclipse 开发工具 API/库的一部分）来监听调试器中的事件变化。实现这一点的方法是：

```
private void contextActivated(ISelection context) {
        if (context instanceof StructuredSelection) {
                Object data = ((StructuredSelection) context).getFirstElement();
                if (data instanceof IStackFrame) {
                        reciever.setStackFrame((IStackFrame) data);
                } else {
                        reciever.setStackFrame(null);
                }
        }
} 
```

基本上，调试器给了我的程序 IStackFrame，它里面有 IVariables，它给出了正在调试的程序中正在发生的事情的模型。据我所知，这些是在被调试程序上运行的真实变量的数据表示。IVariables 的功能有限，因为它们可以做一些基本的事情，例如获取它们所代表的变量的名称并获取类型等。

这可能是不可能的，但是有什么方法可以获取它表示的实际对象的副本，而不是使用 IDebugContextListener 类的 IVariable 数据表示？

我的目的是我想使用对象的内部功能。使用 IVariables，我只能访问对象内变量的属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T21:03:57.920

IVariable/IValue 接口提供了一种通用的、独立于语言的方式来获取调试信息。这意味着，实际上不可能使用这些值直接从调试器中获取当前值。

但是，语言环境（例如 JDT）提供了第二个特定于语言的层来帮助获取该信息，如果是 JDT，请参阅[org.eclipse.jdt.debug 项目](http://git.eclipse.org/c/jdt/eclipse.jdt.debug.git/tree/org.eclipse.jdt.debug/model/org/eclipse/jdt/debug/core)。

有关获取 Java 调试器值的更详细示例，请参阅[Inspect 操作的源代码](http://git.eclipse.org/c/jdt/eclipse.jdt.debug.git/tree/org.eclipse.jdt.debug.ui/ui/org/eclipse/jdt/internal/debug/ui/actions/InspectAction.java)。基本上，这段代码展示了如何与被调试的 JVM 通信。

警告：这里介绍的解决方案可能依赖于来自 JDT 的内部代码（可能仍然可以在 jdt 插件之外使用）；并且与其他 JVM 的通信可能会很慢。当心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T02:20:53.113

IDebugContextListener 实际上返回一个 IStackFrame，其中包含一组专门实现 IJavaVariable 接口的 IVariable。知道了这一点，我们就可以从 IJavaVariable 中得到一个 IJavaValue，然后再将它转换成一个 IJavaObject。

IJavaObject 提供了一个名为 sendMessage() 的方法，您可以在其中与调试器 JVM 通信以执行堆栈上的方法并返回方法返回值的 IValue。

这就是我设法解决这个问题的方法。

# javascript - Jquery animate 没有动画

> ID：11303088
> 
> 赞同：0
> 
> 时间：2012-07-03T00:45:15.867
> 
> 标签：javascript, jquery, css, jquery-animate

我正在开发一个网站，该网站使用 jquery animate 函数在加载时从左上角展开网站。我实际上并不是为该功能编写代码的人，所以我对它并不太熟悉。它在某一时刻确实有效，但目前它似乎根本不起作用。我知道 .js 文件正在加载并正在运行，因为其中的第一段代码是显示“正在加载页面”消息的时间延迟。但是它只是显示已经加载的页面，而不是动画从左上角出现并滑入的页面。我也包括了 CSS 和标记，尽管我不相信这就是问题所在。任何帮助，将不胜感激！谢谢！

*注意：我们使用的是 Jquery 版本 1.7.2*

CSS：

```
 #builder
    {
        position:relative;
        min-height:100%;
        min-width:100%;
        z-index:999;
    } 
```

JavaScript：

```
function hideIt() {

    document.getElementById("wait").style.display = "none";

}

setTimeout("hideIt()", 1000);

function showIt() {

    document.getElementById("builder").style.display = "block";
}

setTimeout("showIt()", 2500);

function build() {
    $(document).ready(function () {

        $("#builder").animate({ height: '0%', width: '0%' }, 1);
        $("#builder").animate({ height: '100%', width: '100%' }, 2000);

    });
} 
```

标记：

```
<body onLoad="build()">
<img src="wait.gif" id="wait" style="display:block;" /> 
```

wait.gif 只是一张图片，上面写着“页面正在加载”......

页面包含在以下内容中：

```
<div id="builder" align=center style="display:none;"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T01:02:55.460

如果 #builder 元素在显示之前被隐藏 2.5 秒，则动画将在元素显示时完成。删除 body onLoad 上的内联函数并尝试：

```
function hideIt() {
    $("#wait").hide();
}

function showIt() {
    $("#builder").show(2000); //should do somewhat the same as animating from the top left
}

$(function() {
    setTimeout(hideIt, 1000); //no need to quote the functions and eval them
    setTimeout(showIt, 2500);
}); 
```

要不就

```
$("#wait").delay(1000).hide(10);
$("#builder").delay(2500).show(2000) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T00:52:24.730

尝试像这样调整您的代码：

```
$(document).ready(function() {
    $('#wait').hide(1000, function(){  // hide the #wait
        $("#builder").show().animate({ // then show, then animate #builder
            height: '100%',
            width: '100%'
        }, 2000);
    });
}); 
```

**旁注：**请记住，当您使用百分比和包含 的元素时`#builder`，还需要设置它的高度和宽度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T00:52:42.563

`show()`很可能在你被调用之前它就已经被动画化了。所以到它显示的时候，动画就完成了。

# c# - 如何在 C# 中模拟 Microsoft Excel 的求解器功能（GRG 非线性）？

> ID：11303094
> 
> 赞同：10
> 
> 时间：2012-07-03T00:45:50.550
> 
> 标签：c#, .net, excel, solver, nonlinear-optimization

我有一个带有约束的非线性优化问题。它可以在 Microsoft Excel 中使用 Solver 加载项解决，但我无法在 C# 中复制它。

我的问题显示在[以下电子表格](https://docs.google.com/spreadsheet/ccc?key=0Ao_JJoIxovnBdEYydWwyUlRjT3VtWlBfaV9NaHVBX1E)中。我正在解决经典*的 A x = b*问题，但需要注意的是*x*的所有分量都必须是非负的。因此，我没有使用标准线性代数，而是使用具有非负约束的 Solver，最小化平方差之和，并得到一个合理的解决方案。我尝试使用[Microsoft Solver Foundation](http://msdn.microsoft.com/en-us/library/ff524509(v=vs.93))或[Solver SDK](http://www.solver.com/sdkplatform.htm)在 C# 中复制它。但是我似乎无法与他们取得任何进展，因为使用 MSF 我无法弄清楚如何定义目标，而使用 Solver SDK 我总是得到“最佳”状态和全 0 的解决方案，这绝对不是本地的最低限度。

这是我的 Solver SDK 代码：

```
static double[][] A = new double[][] { new double[] { 1, 0, 0, 0, 0 }, new double[] { 0.760652602, 1, 0, 0, 0 }, new double[] { 0.373419404, 0.760537565, 1, 0, 0 }, new double[] { 0.136996731, 0.373331934, 0.760422587, 1, 0 }, new double[] { 0.040625222, 0.136953801, 0.373244464, 0.76030755, 1 } };
static double[][] b = new double[][] { new double[] { 2017159 }, new double[] { 1609660 }, new double[] { 837732.8125 }, new double[] { 330977.3125 }, new double[] { 87528.38281 } };

static void Main(string[] args)
{
    using(Problem problem = new Problem(Solver_Type.Minimize, 5, 0))
    {
        problem.VarDecision.LowerBound.Array = new double[] { 0.0, 0.0, 0.0, 0.0, 0.0 };
        problem.VarDecision.UpperBound.Array = new double[] { Constants.PINF, Constants.PINF, Constants.PINF, Constants.PINF, Constants.PINF };

        problem.Evaluators[Eval_Type.Function].OnEvaluate += new EvaluateEventHandler(SumOfSquaredErrors);

        problem.ProblemType = Problem_Type.OptNLP;

        problem.Solver.Optimize();

        Optimize_Status status = problem.Solver.OptimizeStatus;

        Console.WriteLine(status.ToString());
        foreach(double x in problem.VarDecision.FinalValue.Array)
        {
            Console.WriteLine(x);
        }
    }
}

static Engine_Action SumOfSquaredErrors(Evaluator evaluator)
{
    double[][] x = new double[evaluator.Problem.Variables[0].Value.Array.Length][];
    for(int i = 0; i < x.Length; i++)
    {
        x[i] = new double[1] { evaluator.Problem.Variables[0].Value.Array[i] };
    }

    double[][] b_calculated = MatrixMultiply(A, x);

    double sum_sq = 0.0;
    for(int i = 0; i < b_calculated.Length; i++)
    {
        sum_sq += Math.Pow(b_calculated[i][0] - b[i][0], 2);
    }
    evaluator.Problem.FcnObjective.Value[0] = sum_sq;

    return Engine_Action.Continue;
}

static double[][] MatrixMultiply(double[][] left, double[][] right)
{
    if(left[0].Length != right.Length)
    {
        throw new ArgumentException();
    }

    double[][] sum = new double[left.Length][];
    for(int i = sum.GetLowerBound(0); i <= sum.GetUpperBound(0); i++)
    {
        sum[i] = new double[right[i].Length];
    }

    for(int i = 0; i < sum.Length; i++)
    {
        for(int j = 0; j < sum[0].Length; j++)
        {
            for(int k = 0; k < right.Length; k++)
            {
                sum[i][j] += left[i][k] * right[k][j];
            }
        }
    }

    return sum;
} 
```

我没有 Microsoft Solver Foundation 的任何代码，因为我认为目标函数不能写在一行中，并且它不允许像 Solver SDK 那样的委托。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T19:52:59.330

一种替代方法是将其表述为 LP 问题：

最小化**x中元素的总和**

服从**Ax >= b**

这应该是相当简单的，使用 Solver Foundation，基于 LP 样本之一。

**7 月 5 日更新**

上述方法看起来也过于复杂，但这可能是由于 Frontline Solver API 造成的。使用 Microsoft Solver Foundation，**并**最小化平方差之和，以下程序：

```
private static void Main(string[] args)
{
    var solver = SolverContext.GetContext();
    var model = solver.CreateModel();

    var A = new[,]
        {
            { 1, 0, 0, 0, 0 }, 
            { 0.760652602, 1, 0, 0, 0 }, 
            { 0.373419404, 0.760537565, 1, 0, 0 },
            { 0.136996731, 0.373331934, 0.760422587, 1, 0 },
            { 0.040625222, 0.136953801, 0.373244464, 0.76030755, 1 }
        };
    var b = new[] { 2017159, 1609660, 837732.8125, 330977.3125, 87528.38281 };

    var n = A.GetLength(1);
    var x = new Decision[n];
    for (var i = 0; i < n; ++i)
        model.AddDecision(x[i] = new Decision(Domain.RealNonnegative, null));

    // START NLP SECTION
    var m = A.GetLength(0);
    Term goal = 0.0;
    for (var j = 0; j < m; ++j)
    {
        Term Ax = 0.0;
        for (var i = 0; i < n; ++i) Ax += A[j, i] * x[i];
        goal += Model.Power(Ax - b[j], 2.0);
    }
    model.AddGoal(null, GoalKind.Minimize, goal);
    // END NLP SECTION

    var solution = solver.Solve();
    Console.WriteLine("f = {0}", solution.Goals.First().ToDouble());
    for (var i = 0; i < n; ++i) Console.WriteLine("x[{0}] = {1}", i, x[i].GetDouble());
} 
```

生成以下解决方案，该解决方案应与链接的 Excel 工作表中的解决方案一致：

```
f = 254184688.179922
x[0] = 2017027.31820845
x[1] = 76226.6063397686
x[2] = 26007.3375581303
x[3] = 1.00650383558278E-07
x[4] = 4.18546775823669E-09 
```

如果我没记错的话，与 GRG 不同，Solver Foundation 不能开箱即用地支持一般的非线性约束，我相信您将需要额外的插件来处理这些。对于您的问题，这当然不是问题。

为了完整起见，为了表述 LP 问题，请将*START NLP SECTION*和*END NLP SECTION*之间的代码替换为以下代码：

```
 var m = A.GetLength(0);
    var constraints = new Term[m];
    for (var j = 0; j < m; ++j)
    {
        Term Ax = 0.0;
        for (var i = 0; i < n; ++i) Ax += A[j, i] * x[i];
        model.AddConstraint(null, constraints[j] = Model.GreaterEqual(Ax, b[j]));
    }
    model.AddGoal(null, GoalKind.Minimize, Model.Sum(x)); 
```

这将产生以下输出（请注意，两种情况下的目标函数不同，因此 的差异很大`f`）：

```
f = 2125502.27815564
x[0] = 2017159
x[1] = 75302.7580022821
x[2] = 27215.9247379241
x[3] = 5824.5954154355
x[4] = 0 
```

# command-line - BATCH/CMD：将 .txt 的每一行打印到一个变量中

> ID：11303096
> 
> 赞同：0
> 
> 时间：2012-07-03T00:46:01.143
> 
> 标签：command-line, batch-file, for-loop, regsvr32, findstr

目标：将计算机中的每个 dll 文件都传递到 regsvr32.exe

已完成： cd\
::REM 将每个文件和目录 (/s) 导出到 c: 根目录下的一个文件中，名为 dir.txt，只有文件名 (/b)
dir /s /b>>dir.txt
::REM Now ，这将包含每个扩展类型。我们只想要 dll，所以我们在 dll.txt 中找到它：
findstr ".dll$" dir.txt>>dll.txt

扭结：

现在，如果我想 regsvr32.exe “归档”现在在 dll.txt 中的每个文件，我需要以某种方式取出每行单独的每个文件名。我想知道是否有第三方命令行工具可以将文件的每一行导出到变量中。这样，我可以：

==========

::REM 假设这个工具有开关 /l 用于行号，和 /v:"" 用于变量使用，并在最后使用“文件”：

```
set line=1  
:loop  
set dll=  
tool.exe /l %line% /v:"dll" "dll.txt"  
::REM We if defined here because if the line doesn't exist in dll.txt, the tool would return nothing to %dll%
if not defined %dll% exit  
::REM With the variable defined, we can continue  
regsvr32.exe %dll%  
set /a line=%line%+1  
goto loop 
```

========================

然后该工具将处理文件每一行的每个路径，直到它自动退出，因为不会有更多的行。请注意，在循环之后我将 dll 设置为空，以便“如果未定义”每次都可以工作。

如果这种类型的第三方工具做不到，有没有办法用for?? 老实说，我从来没有学习过，也尝试过，但永远无法弄清楚。

任何帮助是极大的赞赏！

抱歉，如果这已经得到回答。

**编辑/更新：** 我发现了我将如何完成这项工作。

感谢： http: [//pyrocam.com/re-register-all-dlls-to-fix-no-such-interface-supported-error-in-windows-7-after-installing-ie7-standalone/](http://pyrocam.com/re-register-all-dlls-to-fix-no-such-interface-supported-error-in-windows-7-after-installing-ie7-standalone/)
和：[阅读批处理文件中逐行的txt](https://stackoverflow.com/questions/10282131/read-a-txt-line-by-line-in-a-batch-file)

第一个链接显示手动将开头替换为 regsvr32.exe
第二个显示如何在这种情况下使用 for {也感谢 craig65535 的帮助:)}

***代码：***

```
@echo off
color 1f
title Register .dll
echo.
echo Exporting file list . . .
echo.
cd /d c:
cd\
if exist dll.txt del dll.txt
if exist dir.txt del dir.txt
if exist dll.bat del dll.bat
echo Part 1 of 3 . . .
echo.
dir /s /b>>dir.txt
echo Part 2 of 3 . . .
echo.
findstr ".dll$" dir.txt>>dll.txt
del dir.txt
echo Part 3 of 3 . . .
echo.
for /f "delims=" %%i IN ('type dll.txt') do echo regsvr32.exe /s "%%i">>dll.bat
del dll.txt
echo Ready to begin regsvr32.exe . . .
echo.
pause
echo.
echo Beginning registration . . .
echo *This will take time, close any popups that occur
echo.
call dll.bat
echo.
echo Deleting registration file . . .
if exist dll.bat del dll.bat
echo.
echo DONE.
echo.
pause >nul 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T01:03:41.187

你想要的命令是`for /f`.

```
for /f %%f in ('type dll.txt') do regsvr32.exe %%f 
```

这需要输出`type dll.txt`并一次将一行放入`%%f`. 然后，您可以将其`%%f`用作其他命令的参数。

如果你想做更多的事情`regsvr32.exe %%f`，你可以编写另一个批处理文件并调用它：

```
for /f %%f in ('type dll.txt') do call process.bat %%f 
```

然后 process.bat 将接收文件名作为`%1`.

# android - 具有负值和正值的 NumberPicker

> ID：11303100
> 
> 赞同：1
> 
> 时间：2012-07-03T00:46:28.417
> 
> 标签：android

我正在尝试为我的 NumberPicker 使用一组由 (-50 -> 50) 组成的数字，NumberPicker 的 MinValue / MaxValue 设置为 0 / 100，然后将默认起点设置为 50 (0)，知道为什么它会正确显示数字，除了 -1 到 -5 ...未选择时它们显示正常...选择时它们显示为 -19、-29、-39、-49、-50。

我已经测试了我提供给它的 int 数组，其中的所有值都很好。

这是我用来填充 NumberPicker 的代码片段...

```
String[] currentScoreArray = new String[100];
final NumberPicker currentScore = (NumberPicker) findViewById(R.id.currentScore);
for (int i = 0; i <= 100; i++)
    currentScoreArray[i] = Integer.toString(i - 50);
currentScore.setMaxValue(100);
currentScore.setMinValue(0);
currentScore.setWrapSelectorWheel(false);
currentScore.setDisplayedValues(currentScoreArray);
currentScore.setValue(50); 
```

在与 baba 男高音交谈后，我仍然无法解决这个问题。我制作了一个关于这个问题的 YouTube 视频，并在视频评论的链接中包含了代码和 logcat。

[http://www.youtube.com/watch?v=bF39THktVY4](http://www.youtube.com/watch?v=bF39THktVY4)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-17T12:24:37.553

老问题，但我为其他用户发布了一个想法：

也许您可以使用[NumberPicker.Formatter](http://developer.android.com/reference/android/widget/NumberPicker.Formatter.html)。

例子：

```
final int minValue = -50
final int maxValue = 50
NumberPicker numberPicker = new NumberPicker(myActivity);
numberPicker.setMinValue(0);
numberPicker.setMaxValue(maxValue - minValue);
numberPicker.setValue(myCurrentValue - minValue);
numberPicker.setFormatter(new NumberPicker.Formatter() {
    @Override
    public String format(int index) {
        return Integer.toString(index - minValue);
    }
}); 
```

然后取回选定的值：

```
int myNewValue = numberPicker.getValue() + minValue 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T18:18:52.913

看来您需要实现自己的 NumberPicker 类。您可以从此处的代码开始：[http](http://www.quietlycoding.com/?p=5) ://www.quietlycoding.com/?p=5 。它显然与 Google NumberPicker 小部件使用的内容很接近。在 EditText 对象上设置的 InputFilter 是防止显示负数的原因。您可以简单地注释掉对 EditText 对象的 setFilters 调用，它将显示负数以帮助您开始。深入研究 InputFilter 实现可以提供更好的解决方案。

# c# - Get .txt file instead of .jpg - using Webclient and DownloadFile();

> ID：11303101
> 
> 赞同：0
> 
> 时间：2012-07-03T00:46:30.020
> 
> 标签：c#, jpeg, webclient

Get .txt file instead of .jpg - using `Webclient` and `DownloadFile();`

I'm trying to download the .jpg from this URL:

[http://1.bp.blogspot.com/_pK6J3MTn5co/S6kuH3aqbeI/AAAAAAAACUY/06axvmjU91k/s1600-h/avengers02_B&W_UL.jpg](http://1.bp.blogspot.com/_pK6J3MTn5co/S6kuH3aqbeI/AAAAAAAACUY/06axvmjU91k/s1600-h/avengers02_B&W_UL.jpg)

Using this code:

```
private void TEST_button1_Click(object sender, EventArgs e)
{
    WebClient MyDownloader = new WebClient();
    MyDownloader.DownloadFile(@"http://1.bp.blogspot.com/_pK6J3MTn5co/S6kuH3aqbeI/AAAAAAAACUY/06axvmjU91k/s1600-h/avengers02_B&W_UL.jpg", @"c:\test.jpg");
} 
```

However, when I run this, I end up with a file called **test.jpg**, which contains html mark up... :

```
<html>
<head>
<title>avengers02_B&amp;W_UL.jpg (image)</title>
<script type="text/javascript">
<!--
if (top.location != self.location) top.location = self.location;
// -->
</script>
</head>
<body bgcolor="#ffffff" text="#000000">
<img src="http://1.bp.blogspot.com/_pK6J3MTn5co/S6kuH3aqbeI/AAAAAAAACUY/06axvmjU91k/s1600/avengers02_B%26W_UL.jpg" alt="[avengers02_B&amp;W_UL.jpg]" border=0>
</body>
</html> 
```

How can I download the actual .jpg?

Any help is greatly appreciated - thank you!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T00:53:35.463

If server returns HTML to your request at particular Url you can't do much to force it to return something else at that Url.

What you can do is parse response with HtmlAgilityPack and find url to actual image and get it in another request.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T01:14:00.710

There is a way to do it. First you download the HTML content to a string and extract the correct image URL. Then use the correct URL to download the file.

```
 WebClient client = new WebClient();
 var path = @"http://1.bp.blogspot.com/_pK6J3MTn5co/S6kuH3aqbeI/AAAAAAAACUY/06axvmjU91k/s1600-h/avengers02_B&W_UL.jpg";

 var content = client.DownloadString(path);
 System.Text.RegularExpressions.Regex regex = new Regex(@"(?<=<img\s+[^>]*?src=(?<q>['""]))(?<url>.+?)(?=\k<q>)");
 var match = regex.Match(content);
 if (match.Success)
 {
     client.DownloadFile(match.Value, @"e:\test1.jpg");
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T01:01:41.643

Clicking that link causes 2 downloads, first a page of HTML (mislabelled with suffix `.jpg`), and next an image in the HTML.

So perhaps you need to fetch the url of the `img` tag in the HTML fetched by the previous request?

[http://1.bp.blogspot.com/_pK6J3MTn5co/S6kuH3aqbeI/AAAAAAAACUY/06axvmjU91k/s1600/avengers02_B%26W_UL.jpg](http://1.bp.blogspot.com/_pK6J3MTn5co/S6kuH3aqbeI/AAAAAAAACUY/06axvmjU91k/s1600/avengers02_B%26W_UL.jpg)

I'm guessing that removing `-h` from the original URL might point to the actual file that you're after.

Here's hoping that you have permission to scrape these files...

# tomcat - Tomcat 上的 SSL 证书 - 别名不能识别密钥

> ID：11303107
> 
> 赞同：15
> 
> 时间：2012-07-03T00:47:38.910
> 
> 标签：tomcat, ssl, alias

想知道是否有人可以告诉我我在哪里搞砸了！我有一个 keytool 创建的密钥库，一个来自 Thawte 的主证书、辅助证书和 ssl 证书。我最初使用 openssl 创建了 CSR，然后使用记录的过程将私钥转换为 PKCS12 以导入密钥库。

我相信我已经将它们全部导入到密钥库中（但显然不是！）但是我从 Tomcat 得到的错误是：'java.io.IOException Alias name does not identify a key entry

如果我这样做，`keytool -list -keystore keystore.ks`这就是我得到的：

```
Keystore type: JKS
Keystore provider: SUN

Your keystore contains 4 entries

    secondary, Jun 22, 2012, trustedCertEntry,
    Certificate fingerprint (MD5): EB:A3:71:66:38:5E:3E:F4:24:64:ED:97:52:E9:9F:1B
    tomcat, Jun 22, 2012, trustedCertEntry,
    Certificate fingerprint (MD5): EA:D0:43:F8:7F:D5:1C:4A:BA:A7:F4:64:A9:6A:A1:B0
    primary, Jun 22, 2012, trustedCertEntry,
    Certificate fingerprint (MD5): D6:6A:92:1C:83:BF:A2:AE:6F:99:5B:44:E7:C2:AB:2A
    1, Jul 2, 2012, PrivateKeyEntry,
    Certificate fingerprint (MD5): EA:D0:43:F8:7F:D5:1C:4A:BA:A7:F4:64:A9:6A:A1:B0 
```

我很确定我的 Tomcat server.xml 没问题，但这里也适用于 https 连接器：

```
<Connector port="443"
    protocol="org.apache.coyote.http11.Http11Protocol"
    maxHttpHeaderSize="8192"
    SSLEnabled="true"
    maxThreads="150"
    minSpareThreads="25"
    maxSpareThreads="75"
    enableLookups="false"
    disableUploadTimeout="true"
    acceptCount="100"
    scheme="https"
    secure="true"
    clientAuth="false"
    sslProtocol="TLS"
    URIEncoding="UTF-8"
    keystorePass="xxxxxx"
    keystoreFile="/keys/keystore.ks"
    keyAlias="tomcat"/> 
```

有任何想法吗？这是我第一次这样做，所以也许我搞砸了一些非常明显的东西？

该站点在端口 80 上运行良好。

很想听听一些建议:)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-03T19:07:24.317

当您使用 列出别名时`keytool`，别名是每个条目的逗号之前的名称。在这里，您有 4 个条目：`secondary`、`tomcat`和。只有别名用于私钥。`primary``1``1`

（请注意，您可以直接使用 PKCS#12 文件来`keystoreType="PKCS12"`代替。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-05T14:11:12.967

我发现[此页面](http://www.agentbob.info/agentbob/79-AB.html)特别有用。我的情况来自 domain.com 提供的地理信任证书，其中我只有两个文件：基于文本的证书 (x509) 和基于文本的私钥。这些说明和转换器类文件就像一个魅力。

# linq - LINQ 返回字符串 [] 值与逗号分隔字符串字段匹配的记录

> ID：11303111
> 
> 赞同：2
> 
> 时间：2012-07-03T00:47:59.720
> 
> 标签：linq, entity-framework-4, csv, contains

我正在尝试使用 LINQ for Entities（EF4 代码优先）选择一些记录。

我有一个名为 Monitoring 的表，其中包含一个名为 AnimalType 的字段，其值如下

*   “狮子，老虎，山羊”
*   《蛇、狮、马》
*   “响尾蛇”
*   《山狮》

我想在字符串数组 (animalValues) 中传递一些值，并从 Monitorings 表返回其中字段 AnimalType 中的一个或多个值与 animalValues 中的一个或多个值匹配的行。以下代码几乎可以按我的意愿工作，但我发现我采用的方法存在一个重大缺陷。

```
public IQueryable<Monitoring> GetMonitoringList(string[] animalValues)
    {
        var result = from m in db.Monitorings
                     where animalValues.Any(c => m.AnimalType.Contains(c))
                     select m;
        return result;
    } 
```

为了解释这个问题，如果我传入 animalValues = { "Lion", "Tiger" } 我发现选择了三行，因为第 4 条记录“Mountain Lion”包含它认为的“Lion”这个词匹配。

这不是我想要发生的。我需要“Lion”来匹配“Lion”而不是“Mountain Lion”。

另一个例子是，如果我传入“Snake”，我会得到包含“Rattlesnake”的行。我希望有人有更好的 LINQ 代码，它允许匹配精确的逗号分隔值，而不仅仅是匹配“响尾蛇”的“蛇”中的一部分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T14:32:35.703

这是一种可以完成工作的hack：

```
public IQueryable<Monitoring> GetMonitoringList(string[] animalValues)
{
    var values = animalValues.Select(x => "," + x + ",");
    var result = from m in db.Monitorings
                 where values.Any(c => ("," + m.AnimalType + ",").Contains(c))
                 select m;
    return result;
} 
```

这样，您将拥有

*   “，狮子，老虎，山羊，”
*   “，蛇，狮子，马，”
*   “，响尾蛇，”
*   “，山狮，”

并检查“,Lion”和“Mountain Lion”是否匹配。

很脏，我知道。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T01:54:56.307

因为您的字段中的数据是用逗号分隔的，所以您确实需要单独分解这些条目。由于 SQL 并不真正支持拆分字符串的方法，因此我想出的选项是执行两个查询。

第一个查询使用您开始使用的代码，至少可以让您大致了解并最大限度地减少您要检索的数据量。它将其转换为 a`List<>`以实际执行查询并将结果带入内存，这将允许访问更多扩展方法，例如`Split()`.

第二个查询使用内存中的数据子集并将其与您的数据库表连接，然后提取完全匹配：

```
public IQueryable<Monitoring> GetMonitoringList(string[] animalValues)
{
    // execute a query that is greedy in its matches, but at least
    // it's still only a subset of data. The ToList()
    // brings the data into memory, so to speak
    var subsetData = (from m in db.Monitorings
             where animalValues.Any(c => m.AnimalType.Contains(c))
             select m).ToList();

    // given that subset of data in the List<>, join it against the DB again
    // and get the exact matches this time
    var result = from data in subsetData
            join m in db.Monitorings on data.ID equals m.ID
            where data.AnimalType.Split(',').Intersect(animalValues).Any ()
            select m;        

    return result;
} 
```

# java - 使用 JDBC 访问 Hive 元数据

> ID：11303112
> 
> 赞同：1
> 
> 时间：2012-07-03T00:48:04.233
> 
> 标签：java, jdbc, hive

我正在尝试使用 JDBC 访问 Hive 元数据。我已经在类路径中添加了所有需要的 jar 文件。我从这里开始学习教程-`https://cwiki.apache.org/confluence/display/Hive/HiveClient#HiveClient-JDBC`

添加所有 jar 文件后，我尝试编写一个示例程序以使用 Java 连接到 Hive。当我调试代码时，只要它到达下面的行。

```
Connection con = 
DriverManager.getConnection("jdbc:hive://lvsaishdc3in0001.lvs.host.com:10000/
default","", ""); 
```

我总是得到这个例外。不知道为什么会这样。谁能帮我解决这个问题？

```
java.sql.SQLException: Could not establish connection to 
lvsaishdc3in0001.lvs.host.com:10000/default: java.net.ConnectException: Connection
timed out: connect 
```

我通过登录 Putty 并传递主机名来启动我的 Hive 服务器。

```
$ bash
bash-3.00$ cd /usr/local/bin
bash-3.00$ hive --service hiveserver
Starting Hive Thrift Server
12/07/03 08:07:11 INFO service.HiveServer: Starting hive server on port 10000 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:12:16.967

Hive 服务器本身非常不安全。它甚至不需要用户名/密码进行身份验证。根据我的经验，最典型的配置是在与应用程序相同的盒子上启动 Hive 服务器，确保此盒子连接到 Hadoop 集群并保护此盒子。这样，您的连接字符串就`jdbc:hive://localhost:10000`变成了，安全性就不是您的头疼了，而是您的网络人员头疼的问题。

# javascript - 如何在事件处理程序中重新创建“this”？

> ID：11303114
> 
> 赞同：2
> 
> 时间：2012-07-03T00:48:15.027
> 
> 标签：javascript, jquery

我有一个预先绑定到特定变量（通过`$.proxy`）的事件处理程序。结果，触发处理程序时，`this`不是正常值，而是我的预绑定值。

我想`this`使用处理程序的`event`参数进行恢复，但`this`似乎没有直接映射到`event.currentTarget`,`event.target`或任何其他事件属性。

因此，我尝试挖掘 jQuery 源代码，但事件回调的东西非常复杂，我无法弄清楚到底`this`设置了什么。有谁知道如何`this`仅使用 event 参数来模拟 jQuery 事件处理程序？

*** * 编辑 * ***

只是为了澄清，这里有一个例子：

```
var boundThis = {foo: 'bar'}
var handler = $.proxy(function(event) {

    // Because of the $.proxy, this === boundThis
    // (NOT the normal "this" that jQuery would set)
    // In theory event has everything I need to re-create this,
    // but I'm having trouble figuring out exactly how

    // Here's a naive/non-functional example of what I'm trying to do
    jQueryThis = event.target; // If only this worked ...

}, boundThis);
$(someElement).click(handler); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T01:25:18.070

`event.currentTarget`通常是`this`jQuery 事件的值。如[文档中所述](http://api.jquery.com/event.currentTarget/)：

> ***描述**：事件冒泡阶段中的当前 DOM 元素。*

演示：http: [//jsfiddle.net/rhgEB/](http://jsfiddle.net/rhgEB/)。

虽然`event.target`保持为`#baz`，但`event.currentTarget`引用当前正在处理的元素；与`this`没有`proxy`.

*** * 由机器鬼编辑 * ***

`this`只是为了节省未来的读者一些时间，基于事件对象（“ ”）生成等价物的“神奇公式”`e`是：

```
var fakeThis = e.delegateTarget === e.currentTarget ? e.currentTarget : e.target; 
```

# android - Android Activity 动态布局更新

> ID：11303116
> 
> 赞同：1
> 
> 时间：2012-07-03T00:48:39.783
> 
> 标签：android, android-activity, android-ui, android-view

我正在尝试创建一个小型 Android 应用程序。该应用程序将有四种模式。显示屏的顶部将包含四个用于在这些模式之间切换的按钮，显示屏的这一部分不会改变。显示的其余部分将根据单击的按钮而改变。它将包含一个带有`TextViews`或图像的表格。

我的问题是：

*   是否可以以编程方式创建表格布局？

*   我应该如何在模式之间切换：-

    1.  四个单独的`Activity`班级？
    2.  一并`Activity`以编程方式更改其底部？
    3.  我应该`Activity`用按钮创建一个底座并扩展它吗？

什么是最好的选择？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-03T03:37:34.097

通过代码创建布局不是好的解决方案。如果您的表格布局简单，我认为这不是什么大问题。

这是一个简单的代码，如何通过代码创建布局：

```
 public void onCreate(Bundle savedInstanceState){
            super.onCreate(savedInstanceState);
                LinearLayout layout = new LinearLayout(this);
                layout.addView(new TextView(this));
            setContentView(layout);
    } 
```

如您所见，它看起来很丑！

希望这有帮助:)

**@：编辑有关相对布局的其他问题：**

在`RelativeLayout`（和android的一些布局）中，有一个对象`LayoutParams`来确定子布局的一些属性（TextView，Button...如果你放入其他布局，也称为子布局）

这是一个例子：

```
RelativeLayout layout = new RelativeLayout(this);
TextView textView = new TextView(this);
RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(
        RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.FILL_PARENT);
params.addRule(RelativeLayout.BELOW, textView.getId());

layout.addView(textView, params); 
```

您应该注意到`BELOW`，它是许多 int 常量之一，例如`Right_of`...。您可以在 Android 文档中看到有关这些的信息。

# android - Android - 将本地图像设置为 WebView 中的 img 元素

> ID：11303118
> 
> 赞同：0
> 
> 时间：2012-07-03T00:48:49.333
> 
> 标签：android, android-webview, android-contentprovider

我正在通过 Javascript 传递一个本地文件来设置一个 img 源，但我无法让它工作。设置路径的javascript是

```
<img src='" + the_payload.image + "' width='" + (cellWidth()-20) + "' /> 
```

我发送的字符串是完整的文件路径：

```
file:///mnt/sdcard/Android/data/com.newvisioninteractive.android.myapp/files/c87eba4a-5349-4a55-baec-cc573a5f7571-thumb.png 
```

我看到了一篇关于 ContentProviders 和 ParcelFileDescriptors 的帖子，但也无法让它发挥作用。

这适用于在特定日期显示图像的日历视图。当我传入静态图像时它工作正常，而不是本地图像。

另外，我已经设置

```
 mWebView.getSettings().setAllowFileAccess(true);
    mWebView.getSettings().setJavaScriptEnabled(true); 
```

我需要设置任何其他权限吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T19:37:19.967

解决方案是扩展 ContentProvider 类并覆盖 openFile(Uri, String) 方法

```
package com.packagename.provider;
public class MyProvider extends ContentProvider { 
     @Override
     public ParcelFileDescriptor openFile(Uri uri, String mode){
        URI fileURI = URI.create( "file://" + uri.getPath() );
        File file = new File( fileURI );

        ParcelFileDescriptor parcel = null;
        try {
            parcel = ParcelFileDescriptor.open(file, ParcelFileDescriptor.MODE_READ_ONLY);
        } catch (FileNotFoundException e) {
            Log.e( TAG, "Error finding: " + fileURI + "\n" + e.toString() );
        }

        return parcel;
     }
} 
```

然后在您的 AndroidManifest.xml 文件中包含

```
 <provider
        android:name=".provider.MyProvider"
        android:authorities="com.packagename" /> 
```

然后，您可以访问您的文件，这些文件通常是

```
 file://sdcard/Android/data/com.packagename/image.jpg 
```

通过使用

```
 content://com.packagename/sdcard/Android/data/com.packagename/image.jpg 
```

所以基本上**用 content://com.packagename 替换 file://**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T01:14:39.133

尝试使用 file:///android_assets/image.png 并将图像放在 android 资产中

# android - TLS - Node.js 服务器到 Android 应用程序

> ID：11303122
> 
> 赞同：1
> 
> 时间：2012-07-03T00:49:22.813
> 
> 标签：android, security, node.js, network-programming, ssl

我将在接下来的几周内开始一个新项目，但我有一些与应用程序的“设计”相关的问题。

该应用程序将是一个服务器 + 数据库，它与一个也有自己的数据库（供离线使用）的 Android 应用程序通信。

该连接将用于交换使用自定义“协议”（封装在 TLS 中的游戏网络协议）加密的字符串。这意味着该应用程序将具有两层安全性：

1.  TLS -> 针对中间人攻击
2.  自定义协议 -> 针对“游戏内黑客”，例如游戏数据包篡改

我的问题如下：

*   是否可以在 node.js 和 Android 之间使用 TLS？关于该主题有什么好的链接吗？

（我读到在 java 和 node.js 中证书格式存在一些问题。它与 OpenSSL 和`EVP_BytesToKey`函数有关）

-->[使用 Node.js Crypto 模块加密并使用 Java 解密（在 Android 应用中）](https://stackoverflow.com/questions/7787773/encrypt-with-node-js-crypto-module-and-decrypt-with-java-in-android-app)

--> [http://olabini.com/blog/tag/evp_bytestokey/](http://olabini.com/blog/tag/evp_bytestokey/)

*   有没有办法混淆 Android 应用程序的源代码，以便可以在客户端安全地解密自定义“协议”？还是所有的魔法都应该发生在服务器端？

（我不希望用户看到解密源代码来剖析自定义协议并开始开发黑客。）

*   关于提高我的 node.js 服务器安全性的任何提示或链接？

（我听说有些人在谈论 Nginx 代理，但是由于我不提供网页服务，它仍然有意义吗？它不会使服务器超载吗？）

非常感谢您提前！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T19:37:20.173

（在）[安全虽然默默无闻](http://en.wikipedia.org/wiki/Security_through_obscurity)并不能解决您面临的真正安全问题。您所描述的**不是**游戏如何保护自己免受攻击。SSL/TLS 确实可以防止 MITM 攻击，但是您的攻击者不仅仅是 MITM，他还是您软件的用户。如果应用程序可以建立 SSL/TLS 连接，那么攻击者也可以建立这个连接，并且应该假设攻击者**将始终**完全访问您提供的 API。

密码学无法解决[CWE-602：服务器端安全的客户端实施](http://cwe.mitre.org/data/definitions/602.html)。客户端的离线数据库和服务器之间的数据库合并信任客户端的数据，因此违反了 CWE-602。在这种攻击中，攻击者不需要访问 API，他可以在本地修改 sqlite 数据库。

# sql - 类似行的 T-SQL 总和值

> ID：11303126
> 
> 赞同：3
> 
> 时间：2012-07-03T00:49:33.873
> 
> 标签：sql, select, sum, sql-like

我目前在 SSRS 中使用此 select 语句向最终用户报告近期需求和库存天数。

```
select Issue.MATERIAL_NUMBER,
SUM(Issue.SHIPPED_QTY)AS DEMAND_QTY,
Main.QUANTITY_TOTAL_STOCK / SUM(Issue.SHIPPED_QTY) * 122 AS [DOI]

From AGS_DATAMART.dbo.GOODS_ISSUE AS Issue
join AGS_DATAMART.dbo.OPR_MATERIAL_DIM AS MAT on MAT.MATERIAL_NUMBER = Issue.MATERIAL_NUMBER
join AGS_DATAMART.dbo.SCE_ECC_MAIN_FINAL_INV_FACT AS MAIN on MAT.MATERIAL_SID = MAIN.MATERIAL_SID
join AGS_DATAMART.dbo.SCE_PLANT_DIM AS PLANT on PLANT.PLANT_SID = MAIN.PLANT_SID 

Where Issue.SHIP_TO_CUSTOMER_ID = @CUSTID
    and Issue.ACTUAL_PGI_DATE > GETDATE() - 122
    and PLANT.PLANT_CODE = @CUSTPLANT
    and MAIN.STORAGE_LOCATION = '0001' 
Group by Issue.MATERIAL_NUMBER,Main.QUANTITY_TOTAL_STOCK 
```

很简单。

但引起我注意的是，它们具有相似的材料编号，其值需要组合。

```
Material    | Qty 
0242-55161W    1
0242-55161     3 
```

上面的两个物料号要合并起来报0242-55161 数量 4\. 这样的行怎么合并？这只是需要调整的众多查询之一。可能吗？

编辑 - 如果重要的话，类似的材料将始终是基数加上“W”。

请注意，我是 SQL 和 SSRS 的新手，这是我第一次在这里发帖。让我知道是否需要包含任何其他详细信息。

提前致谢。

回答;

仅使用替换，即使使用 SUM，它也会不断返回 2 个唯一行。我能够使用以下方法获得所需的结果。你能看出这种方法有什么问题吗？

```
with Issue_Con AS
(
select replace(Issue.MATERIAL_NUMBER,'W','') As [MATERIAL_NUMBER],
Issue.SHIPPED_QTY AS [SHIPPED_QTY]

From AGS_DATAMART.dbo.GOODS_ISSUE AS Issue

Where Issue.SHIP_TO_CUSTOMER_ID = @CUSTSHIP
and Issue.SALES_ORDER_TYPE_CODE = 'ZTPC'    
and Issue.ACTUAL_PGI_DATE > GETDATE() - 122
)

select Issue_Con.MATERIAL_NUMBER,
SUM(Issue_Con.SHIPPED_QTY)AS [DEMAND_QTY],
Main_Con.QUANTITY_TOTAL_STOCK / SUM(Issue_Con.SHIPPED_QTY) * 122 AS [DOI]

From Issue_Con
join Main_Con on Main_Con.MATERIAL_Number = Issue_Con.MATERIAL_Number
Group By Issue_Con.MATERIAL_NUMBER, Main_Con.QUANTITY_TOTAL_STOCK; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T08:24:42.063

您可以按此表达式而不是`MATERIAL_NUMBER`：

```
CASE SUBSTRING(MATERIAL_NUMBER, LEN(MATERIAL_NUMBER), 1)
    WHEN 'W' THEN LEFT(MATERIAL_NUMBER, LEN(MATERIAL_NUMBER) - 1)
    ELSE MATERIAL_NUMBER
END 
```

也就是说，检查最后一个字符是否为`W`. 如果是，则返回除最后一个字符之外的所有字符，否则返回整个值。

为了避免重复相同的表达式两次（一次 in`GROUP BY`和一次 in `SELECT`），您可以使用子选择，例如：

```
select Issue.**MATERIAL_NUMBER_GROUP**,
SUM(Issue.SHIPPED_QTY)AS DEMAND_QTY,
Main.QUANTITY_TOTAL_STOCK / SUM(Issue.SHIPPED_QTY) * 122 AS [DOI]

From **(
    SELECT
        *,
        CASE SUBSTRING(MATERIAL_NUMBER, LEN(MATERIAL_NUMBER), 1)
            WHEN 'W' THEN LEFT(MATERIAL_NUMBER, LEN(MATERIAL_NUMBER) - 1)
            ELSE MATERIAL_NUMBER
        END AS MATERIAL_NUMBER_GROUP
    FROM AGS_DATAMART.dbo.GOODS_ISSUE
)** AS Issue
join AGS_DATAMART.dbo.OPR_MATERIAL_DIM AS MAT on MAT.MATERIAL_NUMBER = Issue.MATERIAL_NUMBER
join AGS_DATAMART.dbo.SCE_ECC_MAIN_FINAL_INV_FACT AS MAIN on MAT.MATERIAL_SID = MAIN.MATERIAL_SID
join AGS_DATAMART.dbo.SCE_PLANT_DIM AS PLANT on PLANT.PLANT_SID = MAIN.PLANT_SID 

Where Issue.SHIP_TO_CUSTOMER_ID = @CUSTID
    and Issue.ACTUAL_PGI_DATE > GETDATE() - 122
    and PLANT.PLANT_CODE = @CUSTPLANT
    and MAIN.STORAGE_LOCATION = '0001' 
Group by Issue.**MATERIAL_NUMBER_GROUP**,Main.QUANTITY_TOTAL_STOCK 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T01:29:27.723

您需要`Issue.MATERIAL_NUMBER`在 select 和 group by 中替换为其他内容。其他东西是什么取决于您的数据。

*   如果它总是 10 位数字，之后忽略任何内容，那么您可以使用`substr(Issue.MATERIAL_NUMBER, 1, 10)`
*   如果无关字符始终是 W 并且正确数字中没有 W，那么您可以使用`replace(Issue.MATERIAL_NUMBER, 'W', '')`
*   如果它是第一个字母字符中的任何内容，那么您可以使用`case when patindex('%[A-Za-z]%', Issue.MATERIAL_NUMBER) = 0 then Issue.MATERIAL_NUMBER else substr(Issue.MATERIAL_NUMBER, 1, patindex('%[A-Za-z]%', Issue.MATERIAL_NUMBER)) end`

# ios - MonoTouch 绑定库 - EXC_BAD_ACCESS (SIGSEGV)

> ID：11303130
> 
> 赞同：0
> 
> 时间：2012-07-03T00:50:16.030
> 
> 标签：ios, xamarin.ios, monodevelop

当我使用 Kiip MonoTouch 绑定时，我的应用程序仅在我的实时设备上崩溃。它在模拟器上运行良好。这是我的堆栈跟踪的一部分：

```
0   libsystem_c.dylib               0x30eb293c memset$VARIANT$CortexA8 + 52
1   sample                          0x002b5738 GC_clear_stack_inner (misc.c:298)
2   sample                          0x002b574c GC_clear_stack_inner (misc.c:299)
3   sample                          0x002b574c GC_clear_stack_inner (misc.c:299)
4   sample                          0x002b574c GC_clear_stack_inner (misc.c:299)
5   sample                          0x002b574c GC_clear_stack_inner (misc.c:299)
6   sample                          0x002b574c GC_clear_stack_inner (misc.c:299)
7   sample                          0x002b574c GC_clear_stack_inner (misc.c:299)
8   sample                          0x002b574c GC_clear_stack_inner (misc.c:299)
9   sample                          0x002b574c GC_clear_stack_inner (misc.c:299)
10  sample                          0x002b574c GC_clear_stack_inner (misc.c:299)
11  sample                          0x002b57b8 GC_clear_stack (misc.c:344)
12  sample                          0x002b2bd8 GC_malloc_atomic (malloc.c:270)
13  sample                          0x0026f374 mono_object_new_ptrfree_box (object.c:4416)
14  sample                          0x00102290 wrapper_managed_to_native_object___icall_wrapper_mono_object_new_ptrfree_box_intptr (mscorlib.dll.6.s:92590)
15  sample                          0x0001da78 System_Collections_Generic_Dictionary_2_intptr_System_WeakReference_TryGetValue_intptr_System_WeakReference_ (monotouch.dll.6.s:14642)
16  sample                          0x0000d1e4 MonoTouch_ObjCRuntime_Runtime_TryGetNSObject_intptr (monotouch.dll.6.s:6354)
17  sample                          0x0000d2f0 MonoTouch_ObjCRuntime_Runtime_GetNSObject_intptr (monotouch.dll.6.s:6380)
18  sample                          0x0000d3a4 MonoTouch_ObjCRuntime_Runtime_GetNSObjectWrapped_intptr (monotouch.dll.6.s:6415)
19  sample                          0x00023e08 wrapper_native_to_managed_MonoTouch_ObjCRuntime_Runtime_GetNSObjectWrapped_intptr (monotouch.dll.6.s:17991)
20  sample                          0x002bea2c get_managed_object_for_ptr_fast (monotouch-glue.m:346)
21  sample                          0x001ca1fc native_to_managed_trampoline_Kiip_KPManager_set_SharedManager (registrar.m:823) 
```

这是 SDK：

www.jmawebtechnologies.com/files/archive.zip

这是示例项目

[https://github.com/mono/monotouch-bindings/tree/master/Kiip](https://github.com/mono/monotouch-bindings/tree/master/Kiip)

这是软件崩溃的代码：

AppDelegate > KPManager.SharedManager = new KPManager(

这是完整的崩溃日志：

www.jmawebtechnologies.com/files/crash.zip

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T10:13:01.090

这是因为您使用的 libKiip.a 库没有您正在构建的架构。例如，如果 libKiip.a 具有 armv6 和 i386 代码，但您正在为 armv7 构建，则会发生这种情况。

在构建时它应该导致这个警告：

```
warning MT1301: Native library `libKiip.a` (i386, ARMv7) was ignored since it does not match the current build architecture(s) (ARMv6) 
```

解决方案是更改您的 MonoTouch 项目以使用 libKiip.a 库中可用的架构，或者确保您在库中具有正确的架构（我相信通用 libKiip.a 二进制文件可以）。

# c - C中的多线程时同步无法正常工作

> ID：11303131
> 
> 赞同：1
> 
> 时间：2012-07-03T00:50:54.027
> 
> 标签：c, linux, synchronization, pthreads, mutex

我正在尝试创建一个简单的酒吧程序，其中一定数量的客户可以同时在酒吧内。每次客户要啤酒时，调酒师都应该为客户提供啤酒。

出于某种原因，在我的程序中，酒吧服务员在顾客离开酒吧后为顾客服务

我怎样才能解决这个问题？有什么建议么？

这是我的代码：

```
#include <pthread.h>
#include <stdio.h>
#include <stdlib.h> //for declaration of exit()
#include <semaphore.h> //to use semaphores

pthread_mutex_t serve = PTHREAD_MUTEX_INITIALIZER;
pthread_barrier_t barrier1;
sem_t OktoEnter;

int cid = 0;

void EnterBar();
void OrderStart();
void ServeStart();
void ServeDone();
void OrderDone();
void DrinkBeer();
void LeaveBar();

void* Bartender(void *arg)
{
    ServeStart();
    ServeDone();
}

void* Customer(void* id)
{
    cid =(int)id;
    EnterBar();
    LeaveBar();

}

void EnterBar(){
    printf("Customer %d enters the bar.\n", cid);
    int cups;
    pthread_t order;

    for(cups=0;cups<(cid%3+1);cups++){
        pthread_mutex_lock(&serve);     
        OrderStart();
        OrderDone();
        DrinkBeer();        
        pthread_mutex_unlock(&serve);
    }
    //decrease semaphore
}
void OrderStart(){
    pthread_t order;
    printf("Customer %d asks for beer.\n", cid);
    int rc = pthread_create(&order, NULL, Bartender, NULL);

}
void OrderDone(){
    printf("Customer %d gets the beer.\n", cid);

}
void DrinkBeer(){
    printf("Customer %d drinks the beer.\n", cid);
}
void LeaveBar(){
    printf("Customer %d leaves the bar.\n", cid);
    //increase semaphore
}

void ServeStart(){
    printf("Bartender starts to serve customer %d.\n", cid);
}

void ServeDone(){
    printf("Bartender is done serving customer %d.\n", cid);
}

int main (int argc, char *argv[])
{
    int t;
    long rc;    
    int num_customers = atoi(argv[1]); //number of customers
    int capacity = atoi(argv[2]); //bar capacity

    if(num_customers > 0 && capacity > 0){
        pthread_t threads[num_customers];
        if(random() > RAND_MAX / 2)
            usleep(1);
        //rc = sem_init(&sem1,0,capacity);
        rc = pthread_barrier_init(&barrier1, NULL, num_customers);
        for(t=0; t< num_customers; t++){
                printf("In main: creating thread %d\n", t);
                rc = pthread_create(&threads[t], NULL, Customer, (void* )t);
                if (rc){
                    printf("ERROR; return code from pthread_create() is %ld\n", rc);
                    exit(-1);
                }
        }
    }
    else{
            printf("ERROR: Both parameters should be a valid positive numbers.");
            exit(-1);
    }

    /* Last thing that main() should do */
    pthread_exit(NULL);
} 
```

我一直在改变功能，但它不能正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T02:06:18.157

老实说，不清楚你最初是否清楚地知道你要从哪里开始，或者只是迷失在杂草中，你开始把东西扔到墙上看看会粘住什么。对不起，混合的比喻。

您有一堆小错误（例如，有时 cid 是一个参数，有时它是所有线程共享的全局变量）和一堆不必要的东西，我认为这是实验的碎屑。

我将它剥离为一个非常基本的线程程序，我将把它留在那里，因为我真的不明白你到底想把它放在哪里。先让简单的东西发挥作用，然后再增加复杂性。祝你好运。

```
#include <pthread.h>
#include <stdio.h>
#include <stdlib.h>

void EnterBar();
void OrderStart();
void ServeStart();
void ServeDone();
void OrderDone();
void DrinkBeer();
void LeaveBar();

void Bartender(int cid)
{
    ServeStart(cid);
    ServeDone(cid);
}

void* Customer(void* id)
{
    int cid = (int) id;

    EnterBar(cid);
    LeaveBar(cid);
}

void EnterBar(int cid)
{
    printf("Customer %d enters the bar.\n", cid);
    int cups;
    pthread_t order;

    OrderStart(cid);
    OrderDone(cid);
    DrinkBeer(cid);
}

void OrderStart(int cid)
{
    printf("Customer %d asks for beer.\n", cid);
    Bartender(cid);
}

void OrderDone(int cid)
{
    printf("Customer %d gets the beer.\n", cid);
}

void DrinkBeer(int cid)
{
    printf("Customer %d drinks the beer.\n", cid);
}

void LeaveBar(int cid)
{
    printf("Customer %d leaves the bar.\n", cid);
}

void ServeStart(int cid)
{
    printf("Bartender starts to serve customer %d.\n", cid);
}

void ServeDone(int cid)
{
    printf("Bartender is done serving customer %d.\n", cid);
}

int main (int argc, char *argv[])
{
    int t;
    long rc;

    if (argc < 3)
    {
        printf("use the parameters\n");
        exit(1);
    }

    int num_customers = atoi(argv[1]); //number of customers
    int capacity = atoi(argv[2]);      //bar capacity

    if (num_customers <= 0 || capacity <= 0)
    {
        printf("ERROR: Both parameters should be a valid positive numbers.");
        exit(1);
    }

    pthread_t threads[num_customers];

    for (t = 0; t < num_customers; t++)
    {
        printf("In main: creating thread %d\n", t);
        rc = pthread_create(&threads[t], NULL, Customer, (void* )t);

        if (rc)
        {
            printf("ERROR; return code from pthread_create() is %ld\n", rc);
            exit(1);
        }
    }

    for (t = 0; t < num_customers; t++)
        pthread_join(threads[t], NULL);

    pthread_exit(NULL);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T14:38:59.853

首先，这是一个了解线程以及生活是如何多线程的很棒的小项目。

上述场景存在问题。首先，你们都没有通过 EnterBar() 和 LeaveBar() 函数跟踪酒吧中有多少客户。在这些函数中，您需要跟踪当前柱数。一旦酒吧已满，您必须锁上门，以免其他顾客进入。然后，当顾客离开酒吧时，他们必须解锁门，以便至少再有一位顾客可以进入。此外，考虑到完整的问题场景，您应该只创建一个调酒师（即一个调酒师线程）并使用 pthread_cond_wait/pthread_cond_signal 与他同步，以便在客户要求时倒啤酒。您不能只为要倒的每种饮料而杀死并重新创建调酒师，并且记住一次只能有一个顾客要啤酒。

# git - Git：将 GitHub 存储库分叉到不同的存储库中

> ID：11303133
> 
> 赞同：1
> 
> 时间：2012-07-03T00:51:33.977
> 
> 标签：git, github, git-fork

## 原始问题

这是我目前拥有的 Git 存储库，位于 GitHub[上](https://github.com/nchpmn/noto)：

```
master
  railstut 
```

我正在考虑在这个项目中定制 Cloudhead 的[toto](https://github.com/cloudhead/toto/) rails 后端。

我能想到的方法是`fork`项目，但把它放在我的`noto`存储库的一个分支中：

```
master
  railstut
  toto 
```

我想这样做的原因是因为对于这个 repo，每个分支都是我尝试为博客获取工作后端的不同方法。我希望每次尝试都使用分支而不是不同的存储库的原因是保持所有内容都包含且整洁。

那么......有没有办法在不下载 Cloudhead 的 repo、将其解压缩到工作目录并提交的情况下做到这一点？谷歌搜索没有帮助，但这很可能是因为我正在搜索错误的命令（主要是`fork`,`branch/checkout`和`clone`）

欢迎提问澄清！

* * *

## 更新

**2012-07-03 @ 1053 澳大利亚东部标准时间**

如果我仍然可以`pull`提出错误修复或更新请求，则可以加分。虽然，这听起来有点毫无意义，因为我正在定制而不是修补，因为叉子是有意的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T01:15:43.673

您可以添加一个远程名称 Cloudhead。

用这个

```
git remote add cloudhead git@github.com:cloudhead/toto.git 
```

然后您可以使用以下命令拉取：

```
git pull cloudhead master 
```

# c++ - 所有进程退出的广播消息（MPI）

> ID：11303135
> 
> 赞同：0
> 
> 时间：2012-07-03T00:51:46.837
> 
> 标签：c++, mpi, process-management

[MPi-C++]

我做了一个应用程序，在特定条件下它应该关闭所有进程中的应用程序。我试图使用根进程来实现它，但我想向所有其他进程发送消息以终止。我怎么能做这个？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T22:29:48.170

在没有通信的情况下，无法在所有进程上**干净地**退出 MPI 应用程序。这意味着，如果您的情况仅发生在 MPI 应用程序的一部分进程上（例如，您在其中一个进程上出现错误），则单方面退出应用程序的唯一方法是调用`MPI_Abort`. 这将导致所有 MPI 进程突然结束，无论当时每个等级在代码中的哪个位置。由于`MPI_Abort`不是集体例行程序，因此不可能对任何其他等级执行任何清理。

如果您希望有一个干净的退出，您需要定期在所有级别之间进行沟通，是否所有级别的一切仍在运行，或者是否是时候退出了。例如，您可以定期调用`MPI_Allreduce`with`MPI_SUM`作为操作。如果您的退出条件在某个进程上得到满足，则将其`1`作为数据发送，否则将其发送`0`。现在您只需要检查`MPI_Allreduce`总和是否大于`0`，如果是，则以有序的方式退出您的应用程序。

# ruby-on-rails - 如何在omniauth 策略中使用redirect_to？

> ID：11303136
> 
> 赞同：0
> 
> 时间：2012-07-03T00:51:58.553
> 
> 标签：ruby-on-rails, redirect, module, omniauth

我有一个场景，在我自定义的 OmniAuth::Strategies 模块中的 build_access_token 方法中的特定条件下，我需要将浏览器重定向到另一个链接。但是我得到了redirect_to 的NoMethodError （因为策略在机架上下文中）。

```
redirect_to new_path 
```

我也试过

```
Rack::Response.new(["302 Moved"], 302, 'Location' => new_path).finish 
```

但是失败了。似乎 Rack 有一个很深的调用堆栈。

如果我在策略中提出错误，则无法在 ApplicationController 中捕获它。

如何在 OmniAuth::Strategies 中使用 redirect_to？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T03:07:13.417

我为我的场景找到了解决方法。从 中`build_access_token`，我创建并返回一个`empty access_token`带有自定义标志的。因此回调控制器可以处理标志并进行重定向。

在 Rack 上下文中很难进行重定向，因为调用堆栈非常深**。**`callback_phase (OmniAuth::Strategies)`

# jquery - jquery - 在按钮单击时获取 li 值

> ID：11303140
> 
> 赞同：2
> 
> 时间：2012-07-03T00:52:29.940
> 
> 标签：jquery

我希望在单击旁边的按钮时获取 li 值。如果单击苹果旁边的按钮，我应该在警报框上看到苹果。我已经坚持了一天了。任何帮助表示赞赏。

```
 <ul>
  <li>apple<input type="button" value="show">.      
  <li>jam<input type="button" value="show">.   
  <ul> 
```

jQuery

```
 $("input[type=button]").click(function()
  {
   alert( $(this).parent().text());
  }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T00:55:08.590

你应该关闭`li`标签：

```
<ul>
  <li>apple<input type="button" value="show"></li>    
  <li>jam<input type="button" value="show"></li>
</ul> 
```

编辑：脚本在不关闭 li 的情况下工作，听起来 jQuery 没有正确加载。

[http://jsfiddle.net/D9Jv7/1/](http://jsfiddle.net/D9Jv7/1/)

# graph - 图和树表示

> ID：11303145
> 
> 赞同：0
> 
> 时间：2012-07-03T00:53:28.590
> 
> 标签：graph, vector, tree, adjacency-list, adjacency-matrix

谁能告诉我如何通过邻接矩阵和列表使用向量表示图形。还有如何在 c & c++ 中表示树。如何在 C 中使用邻接矩阵和列表来表示图形。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T00:59:01.903

[算法设计手册](http://sist.sysu.edu.cn/~isslxm/DSA/textbook/Skiena.-.TheAlgorithmDesignManual.pdf)有一个关于图表的好章节 。

[C++ 中的经典数据结构](https://rads.stackoverflow.com/amzn/click/com/0201508893)有一个关于树的好章节。

# java - 具有多个定义同一类的模块的注入器。如何选择使用哪个模块进行注入？

> ID：11303147
> 
> 赞同：0
> 
> 时间：2012-07-03T00:53:37.193
> 
> 标签：java, dependency-injection, guice

好的，所以情况并不像标题中那么简单。这是交易。

我有一个类 ComplexClass，它期望将几个参数注入其中。参数“A”在模块 A 中定义，而参数“B”在模块 B 中定义。另一方面，参数“C”在模块 C1 和模块 C2 中定义。

我有一个使用上述所有四个模块创建的注入器。对不起，但它必须是一个注射器。

现在，我想创建两个不同的 ComplexClass 实例——一个带有第三个参数来自模块 C1，第二个来自模块 C2。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T19:11:40.237

这个问题通常被称为“机器人腿问题”。

请参阅： [http ://code.google.com/p/google-guice/wiki/FrequentlyAskedQuestions#How_do_I_build_two_similar_but_slightly_different_trees_of_objec](http://code.google.com/p/google-guice/wiki/FrequentlyAskedQuestions#How_do_I_build_two_similar_but_slightly_different_trees_of_objec)

并在此处查看 Jesse Wilson 的回答： [如何使用 Google Guice 绑定不同的接口？](https://stackoverflow.com/questions/2795585/how-do-i-bind-different-interfaces-using-google-guice)

根据`PrivateModule`s 解决方案，您只需在 s 内安装 C1 和 C2 的模块，每个模块都使用不同的绑定注释`PrivateModule`绑定您。`ComplexClass`

还有其他可能的解决方案，例如使用辅助注入来注入可能来自两个地方之一的依赖项。

# parallel-processing - MPI_Comm 实例是全局的还是私有的？

> ID：11303151
> 
> 赞同：0
> 
> 时间：2012-07-03T00:54:06.913
> 
> 标签：parallel-processing, mpi

为了概括我的问题，假设我有一个由 9 个节点组成的小集群，这些节点在 3*3 矩阵中对齐：

```
6 7 8
3 4 5
0 1 2 
```

我正在尝试几个“本地”通信器（MPI_Comm），其中包括：

1.  当前节点的等级和
2.  那些相邻的节点。

我试图从 MPI_Comm_World 中拆分节点并为每个节点创建新的通信器，但未能使用新的通信器，因为它似乎包含不针对当前节点的等级。

所以这是我的问题，是否可以对所有节点只使用一个变量，例如 local_comm，它包含每个节点的不同等级。或者我必须使用不同的成员变量，如下所示

```
MPI_Comm local_comm_0 = {0, 1, 3};
MPI_Comm local_comm_4 = {1, 3, 4, 5, 7};
MPI_Comm local_comm_7 = {4, 6, 7, 8}; 
```

ETC...

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T09:27:54.023

您**可以**在所有节点上拥有一个同名的变量，但您可能不希望这样做。一个节点将有一个通信器，其中包含与其每个邻居不同的一组节点。在您的示例中，节点 4 和 7 是邻居，但它们的通信器中有不同的节点集。这会引起头痛。

一个更好的主意（尽管这完全取决于您在做什么）是使用 MPI_Cart_create 来定义处理器的矩阵，然后使用普通的 Sends 和 Recvs（或 ISends 和 IRecvs）进行通信。这里有一个 MPI_Cart_create 示例：http: [//mpi.deino.net/mpi_functions/MPI_Cart_create.html](http://mpi.deino.net/mpi_functions/MPI_Cart_create.html)

如果节点集完全不相交（如 {0,3,6}、{1,4,7}、{2,5,9}），那么我建议创建不同的通信器并为它们提供相同的变量名。但我认为这不会是解决您问题的正确方法。

# android - Facebook 开发者 - 隐私政策 URL

> ID：11303153
> 
> 赞同：0
> 
> 时间：2012-07-03T00:54:15.260
> 
> 标签：android, facebook

我的电子邮件中收到了我的 Facebook 应用程序之一的隐私政策通知，要求我更新我的隐私政策 URL。当我单击政策链接时，我无法找到隐私政策 URL，奇怪的是，当我搜索我的应用程序并尝试打开它时，它显示“找不到您请求的页面”。我的应用程序是否已停用？这就是没有隐私政策 URL 的原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T01:18:52.813

您需要在您的应用程序中添加隐私政策，它没有。该链接应将您带到您的应用配置页面，您可以在其中添加指向应用隐私政策的链接。

# wpf - 当值作为 XAML 元素写入时，不会为属性值调用 TypeConverter

> ID：11303161
> 
> 赞同：1
> 
> 时间：2012-07-03T00:55:33.757
> 
> 标签：wpf, xaml, typeconverter, xamlreader

假设我在一个类中有一个`MyProperty`类型的属性。我想使用 XAML 为它分配另一种类型的复杂值（例如，我们以 为例）。因此，我创建了可以转换为并应用于该类的内容。`MyType``MyClass``String``MyTypeConverter``String``MyType``[TypeConverter(typeof(MyTypeConverter))]``MyClass`

以下代码工作正常（即调用 MyTypeConverter.ConvertFrom）：

```
<MyClass.MyProperty>
    text
</MyClass.MyProperty> 
```

但是，一旦我将属性值更改为 XAML 元素，TypeConverter 就不再被调用，这会导致转换异常。

```
<MyClass.Property>
    <sys:String>text</sys:String>
</MyClass.Property> 
```

如何为定义为 XAML 元素的值实现转换？

# spring - 使用 GAE 的 Spring 安全性

> ID：11303167
> 
> 赞同：1
> 
> 时间：2012-07-03T00:56:47.553
> 
> 标签：spring, google-app-engine, spring-security

我正在尝试为我的 GAE 应用程序实现 Spring 安全性，但是我收到了这个错误：

```
No bean named 'springSecurityFilterChain' is defined 
```

我将此配置添加到我的 web.xml 中：

```
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>

<filter-mapping>
  <filter-name>springSecurityFilterChain</filter-name>
  <url-pattern>/*</url-pattern>
</filter-mapping> 
```

在应用程序上下文中：

```
<!-- Configure security -->
<security:http auto-config="true">
    <security:intercept-url pattern="/**" access="ROLE_USER" />
</security:http>

<security:authentication-manager alias="authenticationManager">
    <security:authentication-provider>
        <security:user-service>
            <security:user name="jimi" password="jimi" authorities="ROLE_USER, ROLE_ADMIN" />
            <security:user name="bob" password="bob" authorities="ROLE_USER" />
        </security:user-service>
    </security:authentication-provider>  
</security:authentication-manager> 
```

什么可能导致错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T03:09:18.627

即使您没有在 web.xml 中指定 contextConfigLocation，上下文实现也会使用默认位置（使用 XmlWebApplicationContext：“/WEB-INF/applicationContext.xml”）。

所以我认为你已经有一个 applicationContext.xml 但没有在你的 web.xml 中指定，但是 Spring 能够为你加载它。但是现在您在一个单独的文件中有一个额外的安全配置。因此，您需要在 web.xml 中像这样指定这个新文件 applicationContext-security.xml 的位置：

这将处理这两个文件：

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/applicationContext*.xml</param-value>
</context-param> 
```

或者您可以单独指定为逗号或空格分隔的列表，如下所示：

```
<context-param>
  <param-name>contextConfigLocation</param-name>
  <param-value>/WEB-INF/applicationContext.xml /WEB-INF/applicationContext-security.xml</param-value>
</context-param>

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
..... 
```

[文档：上下文加载器](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/context/ContextLoader.html)

# apache-flex - 探查器无法连接到我的应用程序

> ID：11303168
> 
> 赞同：1
> 
> 时间：2012-07-03T00:56:58.643
> 
> 标签：apache-flex, air, flash-builder, profiler, fdt

我之前曾尝试在 Flash Builder 中使用我的应用程序运行分析器，但它不起作用。Profiler 将成功连接到我的应用程序，但该应用程序从未出现。它只是一个空白窗口（我怀疑是 ProfilerAgent）。我看到内存开始飙升，但几秒钟后它就变平了，而且它似乎永远不会将我的应用程序加载到分析器代理中。任何时候都不会报错...

*   我尝试在 FDT 中进行分析，并且发生了完全相同的事情。

*   我还尝试从头开始分析一个新项目，它做同样的事情。

*   看起来 ProfilerAgent 只是无法连接到应用程序......

*   这是一个 AIR 应用程序，我不确定这是否与它有关。

我该怎么办？**（我已经尝试了所有常规的解决方法，如果你得到我没有得到的“分析器无法连接”错误，其中大部分都是有用的）。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T01:40:11.870

问题是我的目标是 Flash Builder 4.6 中的 Flex 4.5 sdk。出于某种原因，如果我以 4.6 sdk 为目标，那么它的配置文件很好。

# opengl - GLEW 将 OpenGL 2 EXT 加载为 OpenGL 4

> ID：11303172
> 
> 赞同：0
> 
> 时间：2012-07-03T00:57:48.560
> 
> 标签：opengl, glew

我正在尝试使我编写的库可移植。它是一个图形库，大量使用了高级 OpenGL。我在支持 OpenGL 4.2 的机器上开发了这个库。

有许多 OpenGL 4 函数（一个简单的例子是 glGenerateMipmap）不是 OpenGL 2 中的核心功能，但在扩展（在本例中为 glGenerateMipmapEXT）下可用。在旧硬件上运行时，我发现 OpenGL 4 函数指针为 NULL，但以 EXT 为后缀的 OpenGL 2 扩展函数不是，并且工作得很好。

我正在使用 GLEW。虽然我意识到有时 OpenGL 4 函数与 OpenGL 2 EXT 函数不同，但它们通常是相同的。有没有办法让 GLEW 将 EXT 函数加载为 OpenGL 4 函数？或者我是否坚持将所有 OpenGL 4 函数重命名为它们的 EXT 对应函数？还有什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T02:00:30.050

不，您不能让 GLEW 对您撒谎并假装扩展功能是核心功能。

通常，在编写 OpenGL 代码时，您选择特定版本 + 扩展集并写入。如果您需要可选功能（特定于硬件的功能），那么您需要编写额外的代码路径来调用这些 API。

除了 MacOSX 的核心 3.2 支持之外，您可以期望旧的扩展在新硬件上无限期地得到支持。这样，旧程序仍然可以在较新的实现上运行。因此，您不会找到不实现 GL_EXT_framebuffer_object 的 GL 4.x 实现。

# java - 在字符串中写入信息

> ID：11303174
> 
> 赞同：0
> 
> 时间：2012-07-03T00:57:54.603
> 
> 标签：java, file

我需要将行保存到字符串中

前任：

```
public function countOccurrences() {

    String Message = "Hello, how are you?"
    String trim = Mensaje.replaceAll(" ", "");

    char[] third = trim.toCharArray();

    for (int counter = 0; counter < third.length; counter++) {

        char ch = third[counter];
        int count = 0;

        for (int i = 0; i < third.length; i++) {

            if (ch == third[i]) {
                count++;
            }
        }

        boolean flag = false;
        for (int j = counter - 1; j >= 0; j--) {
            if (ch == third[j]) {
                flag = true;
            }
        }

        if (!flag) {

            trim = "Letra:" + ch + " se repite " + count + " veces ";
             // trim is a String where I need to store this information
        }

} 
```

预期结果：

1.  我需要计算字符串中每个字符的出现次数：消息
2.  将此信息存储在 txt 文件中

前任：

**newfile.txt**里面有这些信息：

```
H, 2 times
e, 2 times
l, 2 times
o, 3 times
w, 1 times
a, 1 times
r, 1 times
e, 1 times
y, 1 times
u, 1 times 
```

//

我尝试过有人发布它：

trim = trim + "\n" + ch + ", " + count + " veces \n";

结果在文件中是这样的：（更接近）

你好吗？H, 2 次 e, 2 次 l, 2 次 o, 3 次,, 1 次 w, 1 次 a, 1 次 r, 1 次 y, 1 次 u, 1 次 ?, 1 次

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T02:07:08.513

问题从这里开始：

```
 for (int i = 0; i < third.length; i++) {

        if (ch == third[i]) {
            count++;
        }
    } 
```

我可以想到两种解决方案。正确的方法是使用从字符到计数的[映射。](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)如果你这样做，你可以用以下内容替换整个 for 循环（不仅仅是上面的摘录部分）：

```
Map letters = new HashMap<Character, Integer>();
for(char c : third) {
  Integer raw_count = letters.get(c);
  int count = raw_count == null ? 0 : raw_count.intValue();
  letters.put(c, count + 1);
} 
```

然后遍历地图并打印出它的值。如果该部分令人困惑，请发表评论。

如果您以前从未听说过地图，那么现在是了解它们的好时机。如果您*不能*使用地图（家庭作业...），那么我当然不会提供完整的代码示例。但是您可以使用数组来解决它。创建一个 26 元素的 int 数组。然后你可以做类似的事情`letters[c - 'a']++`。花点时间来消化一下——我们说数组中的第一个元素是`a`s 的计数，第二个是`b`s 的数量，等等。最初这些都是 0。然后我们取我们正在查看的字符( `c`)，从中减去，使其在`0`and之间`25`（不是 97 和 122），然后在那里增加总数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T02:17:43.450

[番石榴](http://code.google.com/p/guava-libraries/)方式：

```
Multiset<String> count = HashMultiset.create(Lists.charactersOf(message.replaceAll(" ", ""));
Files.write(Joiner.on("\n").join(Iterables.transform(count.entrySet(),
    new Function<Entry<String>, String>() {
        @Override public String apply(Entry<String> entry) {
            return String.format("%s, %d times", entry.getElement(), entry.getCount());
        }
    }, new File("whatever.txt"), Charsets.UTF_8); 
```

或者其他的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T02:21:23.060

```
public function countOccurrences() {

String Message = "Hello, how are you?"
String trim = Mensaje.replaceAll(" ", "");

char[] third = trim.toCharArray();

for (int counter = 0; counter < third.length; counter++) {

    if (ch == ',') {
        continue;
    }

    char ch = third[counter];
    int count = 0;

    for (int i = 0; i < third.length; i++) {

        if (ch == third[i]) {
            count++;
        }
    }

    boolean flag = false;
    for (int j = counter - 1; j >= 0; j--) {
        if (ch == third[j]) {
            flag = true;
        }
    }

    if (!flag) {

        trim = "Letra:" + ch + " se repite " + count + " veces ";
         // trim is a String where I need to store this information
    } 
```

}

# php - 图片上传输入：1 个输入，最多需要 4 次上传

> ID：11303183
> 
> 赞同：3
> 
> 时间：2012-07-03T00:58:53.940
> 
> 标签：php, jquery

我现在正在处理从[HERE](http://dondedeportes.es/uploader-previewer/)上传的这张图片。除了拥有 3 个单独的图像上传输入之外，有没有一种方法可以只拥有一个最多需要 4 个请求的图像？

```
<script>
(function($) {

$(document).ready(function() {

    // it must be checked if there are div.imageForms because the
    // uploaderPreviewer javascript may be not included and produce an error
    if ($('div.imageForms').length) {

    $.uploaderPreviewer.formsCount = 4;

        $('div.imageForms').append($.uploaderPreviewer.createImageForms());

        // the images are populated if the admin form is to edit, and not
        // to insert
        if ($('div.imageForms[images]').length) {
            var imageFilenames = $('div.imageForms[images]').attr('images').split(',');
            $.uploaderPreviewer.populateImages(imageFilenames);
            $('div.imageForms[images]').removeAttr('images');
        }
    }

    $('#buttonSave').click(function() {
        var itemId = $(this).attr('itemId');
        if (itemId) {
            $.itemForm.update(itemId);
        }
        else {
            $.itemForm.insert();
        }
    });

});

})(jQuery);

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T01:08:44.180

如果您不关心 IE，那么您可以使用多文件输入，让用户选择不超过 4 个文件。我为 IE 添加了一个简单的回退，它只会获取一个文件，因此您可能只想为 IE 使用多个输入。该死的Internet Explorer！

```
<input id="files" type="file" multiple /> 
```

.

```
var isValidFiles = function ($input, max) {
  var files = $input[0].files || [{ name: $input.val() }]
  return files.length <= max
} 
```

.

```
if ( isValidFiles($('#files'), 4) ) { ... } 
```

# sql - 自动化 SQL 查询

> ID：11303185
> 
> 赞同：-1
> 
> 时间：2012-07-03T00:59:08.027
> 
> 标签：sql, excel

我对 SQL 非常陌生，我使用 SQL Server 2005 的雇主希望每天查询，我们为特定报告运行该查询，使用他们已经存档的模板以 Excel 格式自动并通过电子邮件发送给各个收件人。我可以就如何实现这一点获得一些帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T01:02:05.053

您可以使用[SQL](http://msdn.microsoft.com/en-us/library/ms187880)作业在 SQL Server 中安排 T-SQL 作业。

# java - 在 AndEngine 中控制精灵添加到场景中的概率

> ID：11303188
> 
> 赞同：-1
> 
> 时间：2012-07-03T00:59:59.490
> 
> 标签：java, android, sprite, andengine

我正在尝试控制选择精灵以添加到我的游戏场景中的百分比。

我有四个根据较高百分比挑选的精灵。我希望能够在整个游戏过程中更改百分比。每次调用该方法时，我都需要将精灵添加到场景中。我有一个计时器，它大约每 2 秒调用一次该方法。我需要每次根据百分比添加精灵。

这是我到目前为止所拥有的，但无法正常工作。增加百分比不会增加添加精灵的概率。有时它会增加错误的值，有时根本不起作用。我知道必须有更好更简单的方法来做到这一点。

有没有人有任何想法？

这是我在场景中添加精灵的方法

```
private void addSprite() {
    switch (pickSprite()) {
    // Persons Sprite with area touched code
    case 1:
        red_Sprite = red_pool.obtainPoolItem();
        SequenceEntityModifier loop1 = new SequenceEntityModifier(
                    new RotationModifier(.5f, 0, -5),
                    new RotationModifier(.5f, -5, 5),
                    new RotationModifier(.5f, 5, 0));
        red_Sprite.registerEntityModifier(new LoopEntityModifier(loop1));
        scene.registerTouchArea(red_Sprite);
        if (!red_Sprite.hasParent())
            scene.getFirstChild().attachChild(red_Sprite);
        else
            red_Sprite.setVisible(true);
        red_personList.add(red_Sprite);
        break;
    case 2:
    // Persons Sprite with area touched code
        green_Sprite = green_pool.obtainPoolItem();
        SequenceEntityModifier loop2 = new SequenceEntityModifier(
                    new RotationModifier(.5f, 0, -5),
                    new RotationModifier(.5f, -5, 5),
                    new RotationModifier(.5f, 5, 0));
        green_Sprite.registerEntityModifier(new LoopEntityModifier(loop2));
        scene.registerTouchArea(green_Sprite);
        if (!green_Sprite.hasParent())
            scene.getFirstChild().attachChild(green_Sprite);
        else
            green_Sprite.setVisible(true);
        green_personList.add(green_Sprite);
        break;
    case 3:
    // Persons Sprite with area touched code
        orange_Sprite = orange_pool.obtainPoolItem();
        SequenceEntityModifier loop = new SequenceEntityModifier(
                    new RotationModifier(.5f, 0, -5),
                    new RotationModifier(.5f, -5, 5),
                    new RotationModifier(.5f, 5, 0));
        orange_Sprite.registerEntityModifier(new LoopEntityModifier(loop));
        scene.registerTouchArea(orange_Sprite);
        if (!orange_Sprite.hasParent())
            scene.getFirstChild().attachChild(orange_Sprite);
        else
            orange_Sprite.setVisible(true);
        orange_personList.add(orange_Sprite);
        break;
    case 4:
    // Persons Sprite with area touched code
        blue_Sprite = blue_pool.obtainPoolItem();
        SequenceEntityModifier loop4 = new SequenceEntityModifier(
                    new RotationModifier(.5f, 0, -5),
                    new RotationModifier(.5f, -5, 5),
                    new RotationModifier(.5f, 5, 0));
        blue_Sprite.registerEntityModifier(new LoopEntityModifier(loop4));
        scene.registerTouchArea(blue_Sprite);
        if (!blue_Sprite.hasParent())
            scene.getFirstChild().attachChild(blue_Sprite);
        else
            blue_Sprite.setVisible(true);
        blue_personList.add(blue_Sprite);
        break;
    } 
```

这是我的选择精灵方法：

```
public int pickSprite() {
    double rand = Math.random();
    for (int i = 0; i < mOdds.length; i++) {
        if (rand < mOdds[i])
            return i;
        rand -= mOdds[i];
    }
    return -1; // should never reach this
} 
```

这是我尝试增加添加精灵的几率或百分比的方法。

```
public void increaseOdds(int index, double value) {
    double valueFromIndex = mOdds[index];
    mOdds[index] += value;
    // Make sure odds don't turn mOdds to less than zero
    if (mOdds[index] < 0.0) {
        value = value - mOdds[index];
        mOdds[index] = 0.0;
    } else if (mOdds[index] > 1.0) {
        value = mOdds[index] - 1;
        mOdds[index] = 1.0;
    }
    double changeToOthers = value / 3;
    double extraForNext = 0.0f;
    for (int i = 0; i < mOdds.length; i++) {
        if (i != index) {
            mOdds[i] -= changeToOthers;
            if (mOdds[i] < 0) {
                extraForNext = mOdds[i];
                mOdds[i] = 0.0;
            } else if (mOdds[i] > 1) {
                extraForNext = 1 - mOdds[i];
                mOdds[i] = 1.0;
            } else {
                mOdds[i] += extraForNext;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T02:51:07.553

`increaseOdds()`我可以看到有几件事会导致问题。假设您在 , 上调用它`index 0`，`value 0.6`并且`mOdds[0]`当前等于 0.8。然后，您的代码将两者相加，给出`mOdds[0] = 1.4`. 然后你会减去 1，赋值`value = 0.4`，即使你实际上只改变了 0.2。所以你最终将 0.2 添加到索引中，并为其他三个拆分 -0.4，导致它们不等于 1。

另外，如果最后一个元素是给你“额外”数量的元素，会发生什么？您需要检查并在遍历数组后将其分配给另一个。

试穿它的大小，看看它对你的效果如何。我在笔和纸上用一些奇数设计来测试它，它似乎站得住脚：

**编辑**：更改了一些代码。

```
public void changeOdds(int index, double value) 
{
    double old = mOdds[index];
            mOdds[index] = value;

    if(mOdds[index] > 1)
        mOdds[index] = 1;
    if(mOdds[index] < 0)
        mOdds[index] = 0;   

    double changeToOthers = (mOdds[index] - old) / -3.0;
    double extra = 0;
    for(int i=0;i<mOdds.length;i++)
    {
        if(i == index)
            continue;
        double add = changeToOthers + extra;
        if(mOdds[i] + add > 1)
        {
            extra = 1 - mOdds[i];
            mOdds[i] = 1;
        } else if(mOdds[i] + add < 0)
        {       
            extra = -mOdds[i];
            mOdds[i] = 0
        } else
        {
            mOdds += add;
            extra = 0;
        }
    }   
            // if there's still a negative extra, assign it to the first non-index that can take it and stop
    if(extra < 0)
    {
        for(int i=0;i<mOdds.length;i++)
        {
            if(i == index)
                continue;
            if(mOdds[i] + extra >= 0)
            {
                mOdds[i] += extra;
                extra = 0;
                break;
            }
        }
    }
            // ditto for positive extras
    if(extra > 0)
    {
        for(int i=0;i<mOdds.length;i++)
        {
            if(i == index)
                continue;
            if(mOdds[i] + extra <= 1)
            {
                mOdds[i] += extra;
                extra = 0;
                break;
            }
        }
    }
} 
```

# math - 以对数方式旋转回 0 度

> ID：11303190
> 
> 赞同：0
> 
> 时间：2012-07-03T01:00:31.113
> 
> 标签：math, rotation, exponential

当用户松开手指时，我希望我的精灵旋转回 0 度。目前它是这样完成的：

```
if (touching == NO && rotationValue != 0)
{
    if (rotationValue < 180 && rotationValue < 0)
    {
        rotationValue += 1.5; 
    }
    else
    {
        rotationValue -= 1.5;
    }

    if (rotationValue < 1 && rotationValue > -1)
        rotationValue = 0;
} 
```

任何人都可以帮助我，所以当精灵以对数方式旋转回来时，它开始旋转得更快，然后在达到 0 时减慢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T01:04:12.540

基本上，您想减去每个刻度留下的差值的一小部分。0.125这里是一个任意参数，你可以改变它来改变整体速度。

```
if (fabs(rotationValue) < 0.00000000000000000001){
    rotationValue = 0.0;
} else {
    rotationValue -= .125 * fabs(rotationValue);
} 
```

# php - 使用 usort() 提升元素

> ID：11303192
> 
> 赞同：0
> 
> 时间：2012-07-03T01:00:40.097
> 
> 标签：php, arrays, sorting

我有一个看起来像这样的简单数组：

```
array (size=6)
  0 => 
    array (size=2)
      'id' => int 1
      'primary' => boolean false
  1 => 
    array (size=2)
      'id' => int 2
      'primary' => boolean false
  2 => 
    array (size=2)
      'id' => int 3
      'primary' => boolean false
  3 => 
    array (size=2)
      'id' => int 4
      'primary' => boolean true
  4 => 
    array (size=2)
      'id' => int 5
      'primary' => boolean false
  5 => 
    array (size=2)
      'id' => int 6
      'primary' => boolean false 
```

生成数组时，它总是按 排序`id`，如上所示。我想做的是让数组`usort()`元素成为第一个元素。总是只有一个元素是。`primary``TRUE``primary``TRUE`

然后我写了一个简单的比较函数来使用`usort()`：

```
$data = array(
            array('id' => 1, 'primary' => FALSE),
            array('id' => 2, 'primary' => FALSE),
            array('id' => 3, 'primary' => FALSE),
            array('id' => 4, 'primary' => TRUE),
            array('id' => 5, 'primary' => FALSE),
            array('id' => 6, 'primary' => FALSE),
        );

function sortArray($a, $b){

    if($a['primary']){
        return -1;
    }elseif($b['primary']){
        return 1;
    }else{
        return 0;
    }
}

var_dump($data);

usort($data, 'sortArray');

var_dump($data); 
```

虽然元素 with`primary = TRUE`现在被提升到前面，但其余元素现在以相反的顺序排序，并且元素 with`id = 5`不合适：

```
array (size=6)
  0 => 
    array (size=2)
      'id' => int 4
      'primary' => boolean true
  1 => 
    array (size=2)
      'id' => int 5
      'primary' => boolean false
  2 => 
    array (size=2)
      'id' => int 6
      'primary' => boolean false
  3 => 
    array (size=2)
      'id' => int 3
      'primary' => boolean false
  4 => 
    array (size=2)
      'id' => int 2
      'primary' => boolean false
  5 => 
    array (size=2)
      'id' => int 1
      'primary' => boolean false 
```

我知道我可以比较 id，如果两个元素的`primary`属性都为 false：

```
function sortArray($a, $b){

    if($a['primary']){
        return -1;
    }elseif($b['primary']){
        return 1;
    }else{
        return $a['id'] > $b['id'];
    }
} 
```

但是，为什么要`usort`随机化我的其他元素的顺序？是否可以使用`usort()`仅提升元素而保持数组的其余部分不变？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T01:42:09.070

试试这个比较功能：

```
function sortArray($a, $b)
{
    if($a['primary'])
    {
        $result = 1;
    }
    elseif($b['primary'])
    {
        $result = -1;
    }
    else
    {
        $result = ($a['id'] < $b['id']) ? -1 : 1;
    }

    return $result;
} 
```

您可以更改`$result = ($a['id'] < $b['id']) ? -1 : 1;`为`$result = ($a['id'] < $b['id']) ? 1 : -1;`以相反的顺序排序。

在您的比较函数中，`return $a['id'] > $b['id']`将返回 0 或 1（真或假），从不返回 -1。从文档中：

“如果第一个参数分别被认为小于、等于或大于第二个，则比较函数必须返回一个小于、等于或大于零的整数。”

最快的比较排序是 O(N*log(N))，比线性时间慢。出于这个原因，我建议只迭代数组（O（N），线性时间）并将“primary”设置为`true`数组的前面的元素移动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T01:42:43.853

[usort()](http://www.php.net/manual/en/function.usort.php)将重新索引键。尝试使用[uasort()](http://php.net/manual/en/function.uasort.php)代替。

# python - python多卷tar

> ID：11303193
> 
> 赞同：1
> 
> 时间：2012-07-03T01:01:13.117
> 
> 标签：python, archive, tar, volume

我正在尝试以 bzip2 压缩创建多卷 tar 文件。我正在压缩一些非常大的文件。我该怎么办？

这有效，除了不做多卷的事情：

```
out = tarfile.open('../temp/tarfile_add.tar', mode='w:bz2')
try:
    out.add("gooz/big_dude.avi")
finally:
    out.close() 
```

谢谢，九月

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T02:56:54.180

没有“多卷焦油”之类的东西；tar 规范中没有关于生成 tar 文件的内容。您需要将文件与生成存档分开拆分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-04T21:21:31.610

GNU tar 支持多卷。可通过 HomeBrew 轻松安装在 OSX 上。我不确定它是否提供压缩，但您可以压缩生成的 tar 文件。

据我所知，python 不支持 tar Multivolume。

# python - Python tkinter：在标签中循环

> ID：11303200
> 
> 赞同：3
> 
> 时间：2012-07-03T01:03:04.147
> 
> 标签：python, user-interface, loops, tkinter, label

您好，我只是希望标签在循环期间更改/刷新，但它不起作用

这是我的代码

```
fen1 = Tk()

v = StringVar()
Label(fen1,textvariable=v).pack()

i=0

while(1):
    i=i+1
    v.set(i)
fen1.mainloop() 
```

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-03T01:49:38.747

在这里，试试这个：

```
from Tkinter import *
import time
root=Tk()

variable=StringVar()

def update_label():
    i=0
    while 1:
        i=i+1
        variable.set(str(i))
        root.update()

your_label=Label(root,textvariable=variable)
your_label.pack()
start_button=Button(root,text="start",command=update_label)
start_button.pack()
root.mainloop() 
```

那应该给你一个很好的例子。但是，重要的是要注意，在 while 循环期间，您必须调用，`root.update()`否则您的 GUI 将冻结，直到循环完成（在这种情况下它*永远*不会）并且永远不会显示您的数字。

另请注意，您*可以*从程序中的任何位置调用`update_label()`。出于示例目的，我只是将它添加到开始按钮。

您的代码有什么问题是您将 while 循环设置为自由浮动，最重要的是*在*您的 GUI 的主循环之前。当你这样做时，由于这个循环是无限的，它永远不允许`Tkinter`启动它的`mainloop()`. 但是，如果您将 while 循环放在*mainloop之后，那么**在*您退出 GUI之前永远不会执行，这是因为 mainloop 在它停止（关闭 GUI）之前是无限的。

因此，要解决此问题，您只需将其放入一个函数中，稍后在主循环期间调用它`Tkinter`。您也可以通过多种方式执行此操作，例如，您可以`.after()`在一定时间后执行特定任务，或者使其成为按下时要运行的按钮的命令等。.

但是，您应该使用的*正确*代码如下，因为您真的不希望代码中出现无限循环（除主循环之外）。：

```
class App (object):
    def __init__(self):
        self.root=Tk()
        self.variable=StringVar()
        self.i=0
        self.your_label=Label(self.root,textvariable=self.variable)
    def grid(self):
        self.your_label.pack()
    def update_label(self):
        self.i=self.i+1
        self.variable.set(str(self.i))
        self.root.after(20,self.update_label)
    def run(self):
        self.grid()
        self.root.after(20,self.update_label)
        self.root.mainloop()

if __name__=='__main__':
    App().run() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T01:26:54.180

您的代码永远不会到达`mainloop`. 为了看到类似的内容，您需要将更新绑定在一个回调中，该回调在主循环中被调用（间接地，通过事件）。

# regex - Mercurial .hgignore 沮丧

> ID：11303202
> 
> 赞同：3
> 
> 时间：2012-07-03T01:03:10.873
> 
> 标签：regex, mercurial, hgignore

我有一个 RE 检查器说这应该可以工作。我究竟做错了什么？！？

我试图忽略的示例：

```
apps/cms/templates/cms/test_bup_DEPRECATED/widgets/page_link.html 
```

还有我的 .hgignore 文件：

```
syntax: regexp
^static
.*_DEPRECATED.* 
```

我已经尝试了各种各样的事情，但没有成功:(

另一个失败的尝试：

```
syntax: glob
_DEPRECATED/* 
```

更新：我将 .hgignore 文件编辑为：

```
syntax: glob
**_DEPRECATED/** 
```

但是 hg st 仍然这样做：

```
$ hg st | grep DEPR
A apps/cms/templates/cms/test_DEPRECATED/base.html 
```

相同的结果：

```
syntax: glob
_DEPRECATED 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T01:56:48.320

首先，`.hgignore`不会忽略 Mercurial 已跟踪的文件。您的示例表明该文件已被跟踪：

```
$ hg st | grep DEPR
A apps/cms/templates/cms/test_DEPRECATED/base.html 
```

该文件已添加，但未提交。使用`hg forget`忘记文件，然后忽略模式将生效。

`.hgignore`模式匹配路径的任何部分，所以这就是你所需要的：

```
syntax: regexp
_DEPRECATED/ 
```

请注意，您可能需要目录的尾部斜杠，否则它将匹配以结尾的文件`_DEPRECATED`，否则将其删除。

要制定忽略模式，TortoiseHg ( `thg ignore`) 中的忽略 GUI 非常有用。它显示所有未跟踪和未忽略的文件，并且可以输入模式直到正确的文件被忽略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T01:20:03.000

正确答案：

```
syntax: glob
**_DEPRECATED/** 
```

例子：

```
$ cat .hgignore 
syntax: glob
**_DEPRECATED/**
$ find . | fgrep -v /.hg/
.
./.hgignore
./apps
./apps/cms
./apps/cms/templates
./apps/cms/templates/cms
./apps/cms/templates/cms/file
./apps/cms/templates/cms/test_bup_DEPRECATED
./apps/cms/templates/cms/test_bup_DEPRECATED/widgets
./apps/cms/templates/cms/test_bup_DEPRECATED/widgets/page_link.html
$ hg st
? apps/cms/templates/cms/file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T01:20:00.567

我认为这是您的正则表达式中的 * 字符。我认为因为 * 表示 0 或更多，所以该正则表达式将在字符串的位置 0 匹配，忽略 hgignore 将其解释为错误的每个文件，从而使您的表达式无效。

我将只使用“_DEPRECATED”（不带引号），因为这将匹配字符串的第 31 个字符。我选择了这个子集，因为它看起来像您试图忽略其中包含字符串 _DEPRECATED 的任何文件。如果这不是您想要的匹配项，请告诉我，我会尝试想出一个您可以使用的不同正则表达式。

此外，您是否试图忽略任何以字符“静态”开头的文件，因为那是另一行看起来正在做的事情。

此外，您可以使用一种比正则表达式更直接的 glob 语法。您可以使用因此语法轻松忽略整个目录。我不知道您是如何布置项目的，但是如果忽略整个目录即可实现您的目标，那么这是一种简单的方法。

更多文档在这里：[http ://www.selenic.com/mercurial/hgignore.5.html](http://www.selenic.com/mercurial/hgignore.5.html)

# amazon-web-services - 关于 AWS 中的防火墙设置

> ID：11303203
> 
> 赞同：0
> 
> 时间：2012-07-03T01:03:19.253
> 
> 标签：amazon-web-services

在 AWS 中设置服务器。修复控制面板防火墙中的一些选项。不久之后，我想恢复原始设置，设置防火墙默认值。然后它被阻止了。我无法使用远程访问计算机。我认为问题是端口。还有其他方法可以访问 AWS 或修复网站中的防火墙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T01:10:26.537

我不能 100% 确定您在问什么您是否仍然可以访问 AWS 管理控制台？你可以通过 SSH 连接到服务器吗？它是什么服务器？（Windows / Linux？）

如果您确实有权访问 AWS 管理控制台，请进入防火墙设置并允许您需要的端口（通常至少为 TCP 80（用于网页的 http）TCP 22（用于 SSH 登录）TCP 25（如果您正在运行邮件服务器）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T06:38:30.963

据我了解（除非他们已更改），一旦您分配了安全组，就无法更改它，因此您要么必须编辑安全组设置，要么必须销毁并创建一个新图像，其中您可以创建/设置新的安全组。

更改/启用安全组上的端口后，您可能需要重新启动计算机，因为您的计算机软件可能无法在启动时绑定到特定端口。

# android - 如何在 BroadcastReceiver 类中使用 getApplicationContext？

> ID：11303209
> 
> 赞同：11
> 
> 时间：2012-07-03T01:04:23.673
> 
> 标签：android, broadcast

我正在使用广播类来使用此代码收听短信

```
package com.escortme.basic;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.telephony.SmsMessage;
import android.widget.Toast;

public class SMSReceiverActivity extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        // Parse the SMS.
        Bundle bundle = intent.getExtras();
        SmsMessage[] msgs = null;
        String str = "";
        if (bundle != null)
        {
            // Retrieve the SMS.
            Object[] pdus = (Object[]) bundle.get("pdus");
            msgs = new SmsMessage[pdus.length];
            for (int i=0; i<msgs.length; i++)
            {
                msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);
                // In case of a particular App / Service.
                //if(msgs[i].getOriginatingAddress().equals("+91XXX"))
                //{
                str += "SMS from " + msgs[i].getOriginatingAddress();
                str += " :";
                str += msgs[i].getMessageBody().toString();
                str += "\n";
                //}
            }
            // Display the SMS as Toast.
            Toast.makeText(context, str, Toast.LENGTH_SHORT).show();

            Pol_ViewActivity appState = ((Pol_ViewActivity)getApplicationContext()); // ERROR
            appState.move_map_to("33.786047","-59.187287");
        }
    }
} 
```

它像这样在清单中定义

```
 <receiver 
      android:name="com.escortme.basic.SMSReceiverActivity"
      android:enabled="true">
      <intent-filter>
        <action android:name="android.provider.Telephony.SMS_RECEIVED" />
      </intent-filter>
    </receiver> 
```

但问题是它说“方法 getApplicationContext() 未定义 SMSReceiverActivity 类型”。

有谁知道为什么会发生这种情况以及如何解决？谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-03T01:07:04.240

查看 onReceive() 的方法签名

```
public void onReceive(Context context, Intent intent) { 
```

您正在将上下文作为参数传递。您应该在需要时使用该上下文。

```
Pol_ViewActivity appState = ((Pol_ViewActivity)context); 
```

**编辑：**我也不知道你到底想做什么。但是您可能不应该像您似乎正在做的那样尝试获取 Activity 对象并在其上调用方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-05-08T16:03:29.660

获取应用程序上下文的一个原因是获取 ，`WIFI_SERVICE`因为它必须在应用程序上下文中查找，否则内存将在设备 < Android N 上泄漏。

正如[Somewhere](https://stackoverflow.com/questions/11303209/how-to-use-getapplicationcontext-in-broadcastreceiver-class#comment44775247_11303209)曾经说过的那样，在 内`onReceive()`，只需使用`context.getApplicationContext()`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T02:30:46.120

我希望这可以帮助你我的朋友。

尝试导入这个包（**import android.telephony.gsm.SmsManager;**）

//---向另一台设备发送短信--- private void sendSMS(String phoneNumber, String message) {
String SENT = "SMS_SENT"; 字符串 DELIVERED = "SMS_DELIVERED";

```
 PendingIntent sentPI = PendingIntent.getBroadcast(this, 0,
        new Intent(SENT), 0);

    PendingIntent deliveredPI = PendingIntent.getBroadcast(this, 0,
        new Intent(DELIVERED), 0);

    //---when the SMS has been sent---
    registerReceiver(new BroadcastReceiver(){
        @Override
        public void onReceive(Context arg0, Intent arg1) {
            switch (getResultCode())
            {
                case Activity.RESULT_OK:
                    Toast.makeText(getBaseContext(), "SMS sent", 
                            Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                    Toast.makeText(getBaseContext(), "Generic failure", 
                            Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_NO_SERVICE:
                    Toast.makeText(getBaseContext(), "No service", 
                            Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_NULL_PDU:
                    Toast.makeText(getBaseContext(), "Null PDU", 
                            Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_RADIO_OFF:
                    Toast.makeText(getBaseContext(), "Radio off", 
                            Toast.LENGTH_SHORT).show();
                    break;
            }
        }
    }, new IntentFilter(SENT));

    //---when the SMS has been delivered---
    registerReceiver(new BroadcastReceiver(){
        @Override
        public void onReceive(Context arg0, Intent arg1) {
            switch (getResultCode())
            {
                case Activity.RESULT_OK:
                    Toast.makeText(getBaseContext(), "SMS delivered", 
                            Toast.LENGTH_SHORT).show();
                    break;
                case Activity.RESULT_CANCELED:
                    Toast.makeText(getBaseContext(), "SMS not delivered", 
                            Toast.LENGTH_SHORT).show();
                    break;                      
            }
        }
    }, new IntentFilter(DELIVERED));        

    SmsManager sms = SmsManager.getDefault();
    sms.sendTextMessage(phoneNumber, null, message, sentPI, deliveredPI);               
} 
```

# jquery - 有没有办法暂时禁用嵌入式视频的鼠标悬停事件？

> ID：11303211
> 
> 赞同：2
> 
> 时间：2012-07-03T01:04:40.013
> 
> 标签：jquery, html, javascript-events

我正在使用 jquery resizable[插件](http://jqueryui.com/demos/resizable/)来允许用户调整嵌入视频的大小。该视频是正在调整大小的 div 的子级。这是基本[http://jsfiddle.net/jrzNW/1/](http://jsfiddle.net/jrzNW/1/)的小提琴。

它工作正常，直到鼠标悬停在视频本身上，然后调整大小停止，直到鼠标移出视频。当单击事件开始时，我尝试将 div 设置为 show() ，但这会产生更多问题然后是解决方案。如果有人能指出我正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T01:16:51.797

好吧，你有没有尝试过这样的事情？

```
$('#video').on('mouseover', function() { return false; }); 
```

这应该中止为该事件注册的任何其他事情。见[.on()](http://api.jquery.com/on/)

> 从事件处理程序返回 false 将自动调用`event.stopPropagation()` and `event.preventDefault()`。也可以为处理程序传递一个 false 值作为`function(){ return false; }`. 因此，`$("a.disabled").on("click", false);` 将事件处理程序附加到所有具有“已禁用”类的链接，以防止在单击它们时跟踪它们，并阻止事件冒泡。

# ios - UIViewController 视图错误

> ID：11303212
> 
> 赞同：0
> 
> 时间：2012-07-03T01:04:42.610
> 
> 标签：ios, uiviewcontroller

我有一个 B UIViewController，里面有关闭按钮。

```
 -(IBAction) close:(id) sender 
```

从 A viewcontroller 我呈现 B viewcontroller 像这样

```
 [self presentViewController:B animated:YES completion:NULL]; 
```

然后一切正常，我可以点击 B 里面的关闭按钮。

但是，如果我这样做

```
 B* bcontrol=[[B alloc] init];
   [self.view addsubview bcontrol.view]; 
```

那么这样，如果我点击关闭按钮，它会产生 EXEC_BAD_ACCESS 错误。

这是为什么？有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T01:24:11.060

我假设您正在使用ARC。

您将 bcontrol 创建为局部变量并且不保留对它的引用，因此当您剥离其视图时，ARC 会释放它。然后你的按钮尝试在一个释放的对象中触发一个动作……你知道其余的。

使 B 成为一个强大的属性，以便在您需要它的视图时它会一直存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T01:29:14.743

您没有为您的`close`方法提供代码。`close`方法代码必须更改以对应您转换到此新视图的方式。如果您必须通过查看控制器 B，`presentViewController`那么您可能会通过以下方式返回 A：

```
- (IBAction)close:(id)sender
{
    [self dismissViewControllerAnimated:YES completion:nil];
} 
```

然后，您考虑是否通过

```
B* bcontrol=[[B alloc] init];
[self.view addsubview bcontrol.view]; 
```

显然，这`dismissViewControllerAnimated`将不再起作用。所以问题是您将`close`方法更改为什么。

但在我开始之前，这种结构存在两个问题。首先，如果你在非 ARC 项目中这样做，你会泄露你的控制器。更糟糕的是，如果您使用 ARC 执行此操作，您将收到异常，因为控制器将在超出范围时被释放（如果您打开僵尸，您将看到有意义的错误）。这个问题的典型答案是制作`B* bcontrol`A 的和 ivar，或者做这样的事情，这样指针就`bcontrol`不会被释放到你身上。这解决了眼前的问题。

其次，更大的问题是整个构造（将控制器的视图添加为另一个视图的子视图）通常不是一个好主意，因为您的视图控制器层次结构和视图层次结构不同步。（有关这些问题的详细讨论，请观看[关于 View Controller Containment 的 WWDC 2011 session 102。](https://developer.apple.com/videos/wwdc/2011/?id=102)）您可能不会收到轮换事件。你不知道还会发生什么（因为 iOS 假设它可以导航视图控制器层次结构以便将消息发送到各种控制器）。最重要的是，获取另一个视图控制器的视图并将其添加为当前视图的子视图并不是一个好主意。你这样做的唯一一次是如果你正在做真正的视图控制器包含并且已经完成`addChildViewController`并且`didMoveToParentViewController`并且您只想获得第一个视图（请参阅上述视频）。

但是，如果你决心做这个`[self.view addSubview:bcontrol.view];`构造，那么显然你不能`dismissViewControllerAnimated`在你 B 的`close`方法中使用它。从 A 的视图中删除 B 的视图的合乎逻辑的方法是`[self.view removeFromSuperView];`. 但是接下来您面临的挑战是如何确保您的 A 类现在清理您最初创建的 B 实例，否则您将有泄漏。

归根结底，这不是一个好主意。坚持使用`presentViewController`（你会用 解雇`dismissViewControllerAnimated`）或`pushViewController`（你会用 解雇`popViewControllerAnimated`）或使用视图控制器包含。鉴于您讨论了“关闭”按钮的概念，这意味着一个真正适用于`presentViewController`或`pushViewController`模型的 UI。

# java - 在servlet的doPost中调用Java函数？

> ID：11303214
> 
> 赞同：0
> 
> 时间：2012-07-03T01:05:04.350
> 
> 标签：java, http, servlets

我想处理一个 HTTP 请求并对其进行一些处理。我可以执行以下操作吗？

```
protected void doPost(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    response.setContentType("application/soap+xml;charset=utf-8");
    char[] cbuf = new char[10000];

    PrintWriter out = response.getWriter();

    InputStreamReader in = new InputStreamReader(request.getInputStream());

    in.read(cbuf,0,10000);

    int req_len = request.getContentLength(); 

    String inputLine = new String(cbuf);

    Spoof sp = new Spoof();

    String xml_response = sp.spoof_second(inputLine.substring(0, req_len), request.getParameter("mode"));    

    out.println(xml_response);
} 
```

我得到一个空响应，所以我想知道是否有办法调用函数 spoof_second()。

我的 web.xml 看起来像：

```
<?xml version="1.0"?>
<web-app
 xmlns="http://java.sun.com/xml/ns/j2ee"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee 
    http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd"
 version="2.4">
 <servlet>
    <servlet-name>home</servlet-name>
    <servlet-class>website.web.HomeServlet</servlet-class>
 </servlet>
 <servlet-mapping>
    <servlet-name>home</servlet-name>
    <url-pattern>/home</url-pattern>
 </servlet-mapping> 
```

我正在向 [http://localhost:4321/website/home?mode=record] 发送请求，因此模式是正确的，并且 inputLine 也是正确的，因为我通过打印它们进行了检查。我不确定的是如何在 Eclipse 中构建整个项目，因为我认为没有进行函数调用。我没有收到任何异常，并且收到了一个 HTTP 200 OK 响应，内容为空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T05:12:34.153

当您使用这样的请求时，`http://localhost:4321/website/home?mode=record`这将调用`doGet`. 对于 do Post，您创建 HTML 表单并设置`action="home"`and`method="post"`和 add`submit`按钮。在提交时，它将提交表单中的所有数据。

# database - 如何在数据库中找到最长的关系链？

> ID：11303216
> 
> 赞同：2
> 
> 时间：2012-07-03T01:05:28.157
> 
> 标签：database, algorithm, postgresql, relationship

我有一个大型的 postgresql 数据库，其中包含艺术家、歌曲和歌曲之间的封面关系。我想在数据库中找到最长的覆盖关系链，类似于 [http://www.coversproject.com/artist/longest_chain](http://www.coversproject.com/artist/longest_chain)

最后我想要这样的东西：

*   艺术家 A 翻唱的歌曲 1 最初由艺术家 B
*   艺术家 B 翻唱了艺术家 C 原创的歌曲 2
*   艺术家 C 翻唱了艺术家 D 原创的歌曲 3
*   ...

在我的用例中，任何艺术家只能在列表中出现一次，这使得这更加棘手。我还在这里简化了我的数据库结构，以使问题不那么具体，但这应该不是问题。

在我看来，没有什么神奇的查询可以给我一个明确的答案。我想我需要某种算法，用不同的起始条目一遍又一遍地查询数据库，同时存储每次查询运行的结果。过了一会儿，我会选择在那段时间发现的最长的链条，这可能不是现有的最长的链条，但对我来说已经足够了。

关于如何实现这一点的任何指示？（本机在 postgres 中或编写查询数据库的脚本）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T05:29:57.467

嗯，我想我以前一直在做这样的事情。那时我有一个层次结构，问题是“找到节点 X 的所有子孙”。这在关系数据库中不是很容易做到 - 所以我制作了一个帮助表和一些脚本来填充它。让我们看看我是否能记住它……*注意：这是在我记忆之后自由进行的，未经测试，不保证我做对了。我的问题也与您的问题有些不同，所以我不确定该解决方案是否适用。*

```
create table chain_helper (
    head int,
    tail int,
    chain_length int
)
create index chain_helper_by_head(head);
create index chain_helper_by_tail(tail); 
```

这个想法是让这个表包含所有可能的链接，头和尾是外键。我的情况要容易一些，因为我有严格的层次结构，不需要循环控制。源表有一个 id 和一个 parent_id 字段。这是我填充表格的方式：

使用简单链接初始化表：

```
insert into chain_helper (head, tail, chain_length) 
    select id, parent_id, 1 from source_table; 
```

我继续用所有长度为 2 的链填充表格：

```
insert into chain_helper (head, tail, chain_length)
    select parent.head, child.tail, min(parent.chain_length + 1)
    from chain_helper parent 
    join source_table child on source_table.parent_id=parent.id
    where not exists 
       (select * from chain_helper where head=parent.head and tail=child.tail)
    group by parent.head, child.tail; 
```

（因为我有一个严格的层次结构，我不需要聚合 - 在我的情况下不会有重复）。

重复将插入所有长度为 3 的链，以此类推，并且该语句可以全部重复，直到没有更多内容可插入。然后找到最大链长度很简单：

```
select max(chain_length) from chain_helper; 
```

这个解决方案并不容易显示链 - 但在我的情况下这不是必需的。我主要在连接中使用 chain_helper 以便能够捕获层次结构中特定节点的所有子节点和孙子节点 - 即“此子树的总收入”：

```
select sum(source_table.revenue) 
from source_table join chain_helper on chain_helper.tail = source_table.id
where chain_helper.head = parent_of_subtree; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T05:06:30.210

在“The Stanford GraphBase”部分 FOOTBALL Knuth 考虑了在“A 以 5 分击败 B，B 以 9 分击败 C，C 以 43 分击败 D...”形式的足球队之间的长链比赛的问题，以提供论据A 对 Z 的预期胜率很大。他指出这是一个 NP 完全问题，并征求建议。他实际编写的程序是他称之为分层贪婪的东西，看起来很像[http://en.wikipedia.org/wiki/Beam_search](http://en.wikipedia.org/wiki/Beam_search)。

不久前，我花了一些时间玩 Beam Search 来寻找乐趣，但最后开始怀疑 Limited Discrepancy Search 是否更好 - 它往往需要您花费更少的时间来保存部分答案的状态，因为它非常接近回溯，您通常会在做出更多假设或撤回似乎不起作用的假设时对答案进行小幅更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T01:49:58.190

我不太确定我得到了你正在寻找的东西，a 。但是，我会做类似的事情：

```
WITH RECURSIVE chain (artist_id, path) (
    SELECT id, id::text from artist
    UNION
    SELECT a.id, path || ',' || a.id 
      FROM artist a
      JOIN covers co ON (co.covered_by = a.id)
      JOIN chain ch ON (co.originally_by = ch.artist_id)
)
SELECT * 
  FROM artist a
  JOIN chain c ON c.artist_id = a.id
ORDER BY array_upper(string_to_array(c.path, ',')::int[], 1)
LIMIT 1; 
```

请注意，有很多艺术家，性能不会那么好，但如果你可以缩小搜索条件，那会有所帮助。

# ios - 在显示视图之前未加载来自 NIB 的插座

> ID：11303220
> 
> 赞同：1
> 
> 时间：2012-07-03T01:05:58.907
> 
> 标签：ios, uiviewcontroller, interface-builder, nib

我的应用程序在 info.plist 中定义了一个主 nib。这个 nib 包含一个 UIViewController 对象。在 IB 中，在属性检查器中，我为该控制器的视图指定了一个 NIB 名称。

我曾假设加载主笔尖会反过来加载视图控制器的笔尖，并且所有内容都会被填充。我认为这就是它一直在工作的方式。但是现在在 iOS5.1 中，视图控制器对象在应用程序加载后存在，但它的出口，在它自己的 NIB 中设置，没有设置。

如果我通过从控制器获取视图并将其添加到窗口来显示该视图，则将填充出口。但在那之前，它们都是零。

我究竟做错了什么？这种行为改变了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T01:18:47.957

我相信你看到的是正常的。通常，可以安全假设 outlet 已填充的第一个地方是视图控制器的 viewDidLoad:。这通常发生在控制器获得屏幕时（推，呈现......）。我习惯于通过显式引用控制器的视图来编写导致过早加载的代码，所以我认为这不是新的。

# python - 如何同时从列表中删除多个索引？

> ID：11303225
> 
> 赞同：179
> 
> 时间：2012-07-03T01:06:52.743
> 
> 标签：python, list

假设我在这里有这个列表：

```
list = [a, b, c, d, e, f, g] 
```

我将如何同时删除说`2, 3, 4`索引`5`？

pop 不接受多个值。我该怎么做？

* * *

## 回答 #1

> 赞同：337
> 
> 时间：2012-07-03T01:08:08.347

您需要在循环中执行此操作，没有内置操作可以一次删除多个索引。

您的示例实际上是一个连续的索引序列，因此您可以这样做：

```
del my_list[2:6] 
```

这将删除从 2 开始并在 6 之前结束的切片。

从您的问题中不清楚您是否需要删除任意索引集合，或者它是否始终是一个连续的序列。

如果您有任意索引集合，则：

```
indexes = [2, 3, 5]
for index in sorted(indexes, reverse=True):
    del my_list[index] 
```

请注意，您需要以相反的顺序删除它们，以免丢失后续索引。

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2012-07-03T01:09:11.980

```
remove_indices = [1,2,3]
somelist = [i for j, i in enumerate(somelist) if j not in remove_indices] 
```

例子：

```
In [9]: remove_indices = [1,2,3]

In [10]: somelist = range(10)

In [11]: somelist = [i for j, i in enumerate(somelist) if j not in remove_indices]

In [12]: somelist
Out[12]: [0, 4, 5, 6, 7, 8, 9] 
```

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2016-12-10T20:09:49.573

对于不同方式的性能没有太多提示，所以我进行了一个测试，在所有 3 种通常不同的方法中从 50000 中删除 5000 项，对我来说 numpy 是赢家（如果你有适合 numpy 的元素）：

*   枚举列表理解需要 7.5 秒 [另一台 PC 上为 4.5 秒]
*   0.08 秒以相反的顺序删除项目 [0.017 (!) 秒]
*   numpy.delete 为 0.009 秒 [0.006 秒]

这是我计时的代码（如果可以直接在 numpy 数组上工作，则可以删除从/到列表的第三个函数转换）：

```
import time
import numpy as np
import random

def del_list_indexes(l, id_to_del):
    somelist = [i for j, i in enumerate(l) if j not in id_to_del]
    return somelist

def del_list_inplace(l, id_to_del):
    for i in sorted(id_to_del, reverse=True):
        del(l[i])

def del_list_numpy(l, id_to_del):
    arr = np.array(l, dtype='int32')
    return list(np.delete(arr, id_to_del))

l = range(50000)
random.shuffle(l)
remove_id = random.sample(range(len(l)), 5000) # 10% ==> 5000

# ... 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2012-07-03T09:22:45.410

如果您可以使用[numpy](http://scipy.org/Numpy_Example_List_With_Doc#head-b7123bfe5a5e25fcbdd2ca4c3110e21a6fe8ea0b)，那么您可以删除多个索引：

```
>>> import numpy as np
>>> a = np.arange(10)
>>> np.delete(a,(1,3,5))
array([0, 2, 4, 6, 7, 8, 9]) 
```

如果您使用`np.r_`，您可以将切片与单个索引结合起来：

```
>>> np.delete(a,(np.r_[0:5,7,9]))
array([5, 6, 8]) 
```

但是，删除不是`in place`，因此您必须分配给它。

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2012-07-03T01:08:21.570

如果它们是连续的，你可以这样做

```
x[2:6] = [] 
```

如果要删除不连续的索引，那就有点棘手了。

```
x = [v for i,v in enumerate(x) if i not in frozenset((2,3,4,5))] 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2016-12-12T09:34:50.173

```
lst = ['a', 'b', 'c', 'd', 'e', 'f', 'g'];
lst = lst[0:2] + lst[6:] 
```

这是一个单步操作。它不使用循环，因此执行速度很快。它使用列表切片。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-07-02T14:16:07.630

另一种选择（到位，指数的任何组合）：

```
_marker = object()

for i in indices:
    my_list[i] = _marker  # marked for deletion

obj[:] = [v for v in my_list if v is not _marker] 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-07-07T19:48:25.430

老问题，但我有一个答案。

首先，仔细阅读列表中的元素，如下所示：

```
for x in range(len(yourlist)):
    print '%s: %s' % (x, yourlist[x]) 
```

然后，使用要弹出的元素***的索引***列表调用此函数。它足够强大，列表的顺序无关紧要。

```
def multipop(yourlist, itemstopop):
    result = []
    itemstopop.sort()
    itemstopop = itemstopop[::-1]
    for x in itemstopop:
        result.append(yourlist.pop(x))
    return result 
```

作为奖励，结果应该只包含您想要删除的元素。

> 在 [73] 中：mylist = ['a','b','c','d','charles']
> 
> 在 [76] 中：对于范围内的 x（len（mylist））：
> 
> ```
>  mylist[x]) 
> ```
> 
> .....：
> 
> 0：一个
> 
> 1：乙
> 
> 2：c
> 
> 3：d
> 
> 4：查尔斯
> 
> ...
> 
> 在 [77] 中：multipop(mylist, [0, 2, 4])
> 
> 出[77]：['查尔斯'，'c'，'a']
> 
> ...
> 
> 在 [78] 中：我的列表
> 
> 出[78]：['b'，'d']

# php - 这个 php 脚本是否会占用大量内存？

> ID：11303228
> 
> 赞同：0
> 
> 时间：2012-07-03T01:07:22.887
> 
> 标签：php, performance, memory

php 脚本在开始时包含/加载大约 100 个文件是否正常？这些文件与常见任务的数据库、帮助程序、实用程序和函数相关。这是通过使用 require_once 完成的。

我只是在上下文中询问这是否也是其他 php 脚本（开源或商业）中的正常做法。还没有使用任何 php 框架，所以我不确定它们加载了多少文件。

我将在具有共享 cpu 核心、1 Gb Ram、40 Gb 硬盘空间的 vps 上使用此脚本。

现在我知道这个问题可能有许多其他变量，例如每个文件的 cpu 密集程度，但是，我的基本问题是任何脚本在开始时将大约 100 个文件加载或初始化到内存中是否正常？

如果您需要任何进一步的信息，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T01:28:35.417

> php 脚本在开始时包含/加载大约 100 个文件是否正常？

这并不完全不正常。仅 HTMLPurifier库[就有几十个文件](http://htmlpurifier.org/doxygen/html/files.html)，其中大部分可能是在正常使用时加载的。

然而，有 100 行单独的 require_once 行包括每个文件，这是不好的代码气味。正如大卫所说，使用自动装载机。

另外，不要包含不会使用的代码。我曾经参与过一个项目，该项目在启动时天真地包含了每个页面的源代码——包括未显示页面的视图/控制器代码。撤消此操作（而是仅加载正在使用的视图/控制器）会导致可测量的性能提升。

此外，像 APC 这样的操作码缓存将减少包含开销。如果可能，请考虑使用一个。

> 这个 php 脚本是否会占用大量内存？

你告诉我。措施。轮廓。实验。我们可以提供的关于您的特定应用程序性能的任何猜测都是毫无价值的。测量很容易。使用 XHProf，或者直接调用`memory_get_peak_usage(true)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T01:17:22.310

不，这不是正常的做法。使用自动装载机。

# ndepend - NDepend - 如何从代码中提取注释？

> ID：11303230
> 
> 赞同：1
> 
> 时间：2012-07-03T01:07:39.563
> 
> 标签：ndepend, cqlinq

是否有可能以某种方式使用 CqLinq 为每个方法提取其注释标题？

IE ....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T07:28:34.070

Jiri，不使用 NDepend 你只能计算[评论的行数](http://www.ndepend.com/Metrics.aspx#NbLinesOfComment)，而不是提取它们。

# php - 阻止函数执行的 Javascript 和 php 引用

> ID：11303232
> 
> 赞同：0
> 
> 时间：2012-07-03T01:07:54.103
> 
> 标签：php, javascript

我正在尝试使用下面的代码构建一个注册表单，我仍处于开始阶段。我很难执行 PHP echo 语句中的任何 JavaScript 代码。

我尝试使用斜杠`\'`和转义 javascript 函数中的单引号和双引号`\"`，这适用于顶级 javascript 函数，但是一旦我添加了其他两个函数并应用相同的逻辑，所有 javascript 函数都停止工作。

有人可以建议什么是防止问题并轻松执行 php echo 语句中的 javascript 代码的最简单方法吗？

```
<?php

echo '
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Strict//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>      
    <script type="text/javascript">
        function validateEmail(email) { 

            var re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;

            if(re.test(email)) {
                document.getElementById(\'result\').innerHTML = \'<img src=\"http://www.customotion.com/green_check_small.png\" style=\"width:15px;\"/> Valid\';
            } else {
                document.getElementById(\'result\').innerHTML = \'<img src=\"http://biglistbigsales.com/m/templates/GPT/images/x_xMarkRed4.png\" style=\"width:15px;\"/> Invalid\';
            }
        }   

    </script>
</head>

<body>
<div id="main-container">

<div id="body-container" style="padding-bottom:150px; height:800px;">
    <div style="height:100px; margin:0px auto;">
        <img class="reg-step" style="width:100%;" src="images/step1.png">
    </div>
    <div style="margin-left:110px;">
        <span style="font-size:24px;" class="smallheading">Tell Us About Yourself</span>
        <br/><span style="font-size:13.5px;"><i>*All fields required</i></span>
    </div>

    <form method="post" action="registernew.php">
    <div style="margin:0px auto; margin-left:110px; border:1px solid blue; float:left; font-size:12px; width:500px;">
        <div style="border:1px solid blue; float:left; width:80%;">
            <div style="float:left; border:1px solid red;">
                First Name:
                <br/><input type="text" style="width:140px;" name="fname" />
            </div>

            <div style="float:right; margin-right:50px; border:1px solid red;">
                Last Name:
                <br/><input type="text" style="width:140px;" name="lname" />
            </div>
        </div>

        <div style="border:1px solid blue; float:left; margin-top:20px; width:50%;">
            <div style="float:left; border:1px solid red;">
                City:
                <br/><input type="text" style="width:170px;" name="fname" />
            </div>
            <div style="float:right; border:1px solid red;">
                State:
                <br/>';
                include('inc/statedropdown.inc.php');
echo'       </div>
        </div>
        <div style="float:left; width:100%;">
            <br/>Company Name:<br/> <input type="text" name="fname" style="width:150px;"/>
            <br/><br/>E-mail Address:<br/> e-mail:<br/><input id="email" type="text" onblur="validateEmail(this.value)" /><span id="result"></span>
            <br/><br/>Phone Number:<br/> <input type="text" name="fname" style="width:110px;" />
            <br/><br/>Password:<br/><input type="password" name="fname" />
            <br/><br/>Confirm Password:<br/><input type="password"  name="lname" />

            <br/><input type="submit" value="Next Step" style="background-color:#ebda5f; color:blue; margin:15px 0px 0px 20px;">
        </div>
    </form>
    </div>
</div>
</div>
</body>
</html>';

?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T01:13:36.540

仅`<?php ?>`在需要时使用标签。不在标签内的任何内容都会被回显并像 HTML 一样对待。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Strict//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>      
    <script type="text/javascript">
        function validateEmail(email) { 

            var re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;

            if(re.test(email)) {
                document.getElementById(\'result\').innerHTML = \'<img src=\"http://www.customotion.com/green_check_small.png\" style=\"width:15px;\"/> Valid\';
            } else {
                document.getElementById(\'result\').innerHTML = \'<img src=\"http://biglistbigsales.com/m/templates/GPT/images/x_xMarkRed4.png\" style=\"width:15px;\"/> Invalid\';
            }
        }   

    </script>
</head>

<body>
<div id="main-container">

<div id="body-container" style="padding-bottom:150px; height:800px;">
    <div style="height:100px; margin:0px auto;">
        <img class="reg-step" style="width:100%;" src="images/step1.png">
    </div>
    <div style="margin-left:110px;">
        <span style="font-size:24px;" class="smallheading">Tell Us About Yourself</span>
        <br/><span style="font-size:13.5px;"><i>*All fields required</i></span>
    </div>

    <form method="post" action="registernew.php">
    <div style="margin:0px auto; margin-left:110px; border:1px solid blue; float:left; font-size:12px; width:500px;">
        <div style="border:1px solid blue; float:left; width:80%;">
            <div style="float:left; border:1px solid red;">
                First Name:
                <br/><input type="text" style="width:140px;" name="fname" />
            </div>

            <div style="float:right; margin-right:50px; border:1px solid red;">
                Last Name:
                <br/><input type="text" style="width:140px;" name="lname" />
            </div>
        </div>

        <div style="border:1px solid blue; float:left; margin-top:20px; width:50%;">
            <div style="float:left; border:1px solid red;">
                City:
                <br/><input type="text" style="width:170px;" name="fname" />
            </div>
            <div style="float:right; border:1px solid red;">
                State:
                <br/>
                <?php include('inc/statedropdown.inc.php'); ?>
            </div>
        </div>
        <div style="float:left; width:100%;">
            <br/>Company Name:<br/> <input type="text" name="fname" style="width:150px;"/>
            <br/><br/>E-mail Address:<br/> e-mail:<br/><input id="email" type="text" onblur="validateEmail(this.value)" /><span id="result"></span>
            <br/><br/>Phone Number:<br/> <input type="text" name="fname" style="width:110px;" />
            <br/><br/>Password:<br/><input type="password" name="fname" />
            <br/><br/>Confirm Password:<br/><input type="password"  name="lname" />

            <br/><input type="submit" value="Next Step" style="background-color:#ebda5f; color:blue; margin:15px 0px 0px 20px;">
        </div>
    </form>
    </div>
</div>
</div>
</body>
</html> 
```

# algorithm - 从字符串中提取单词的算法

> ID：11303235
> 
> 赞同：0
> 
> 时间：2012-07-03T01:08:13.647
> 
> 标签：algorithm, cobol

我正在使用 TELON/COBOL atm，我需要一种算法来从字符串中提取单词。尝试搜索但找不到类似的东西。

无论如何，算法需要提取单词，并忽略空格；这是我到目前为止所拥有的（我为不熟悉 e 语法的人发表了评论）

WS-STRING 是输入字符串

WS-WORD-LEN 是要提取的单词的长度

WS-LST-WORD-P 是要提取的当前单词的起始位置（在字符串内）

WS-SUB1 是循环索引

```
PERFORM TEST BEFORE                                      
VARYING WS-SUB1 FROM 1 BY 1                              
  UNTIL WS-SUB1 > WS-STRING-LEN //loop for each char in the string, add 1 to WS-SUB1 in each itiaration                         
    EVALUATE TRUE                                        
       WHEN WS-STRING(WS-SUB1:1) = SPACES  //if the current char is a space              
            MOVE WS-SUB1              TO WS-SUB1-FRD     
            ADD  1                    TO WS-SUB1-FRD     
            IF WS-STRING(WS-SUB1-FRD:1) = SPACES  //Checks to see if the next char is a space       
                ADD  1                TO WS-LST-WORD-P   
            ELSE                                         
                MOVE WS-STRING(WS-LST-WORD-P:WS-WORD-LEN) //Substing "WS-WORD-LEN" many char from "WS-STRING" starting at "WS-LST-WORD-P" into "WS-WORD-OUT" 
                                      TO WS-WORD-OUT     
                ADD  1                TO WS-COUNT(2)     
                PERFORM Z-400-OUTPUT-WORD  //This outputs "WS-WORD-OUT" to a file.              
                MOVE WS-SUB1          TO WS-LST-WORD-P   
                MOVE 1                TO WS-WORD-LEN   
            END-IF                                     
       WHEN OTHER                                      
            ADD  1                    TO WS-WORD-LEN   
    END-EVALUATE                                       
END-PERFORM                                            
MOVE 1                               TO WS-LST-WORD-P 
```

这种算法有点工作，但一些输出是在开始/结束处拼接的。所以关于这里有什么问题的任何想法或建议更好的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T11:47:07.430

你看过 UNSTRING 吗？这似乎是为您的情况量身定制的。

```
MOVE 1 TO WS-SUB1
PERFORM UNTIL WS-SUB1 >= LENGTH OF WS-STRING
  UNSTRING WS-STRING DELIMITED SPACE
    INTO WS-WORD-OUT COUNT IN WS-WORD-LEN
    POINTER WS-SUB1
  END-UNSTRING
  ADD 1 TO WS-COUNT(2)
  PERFORM Z-400-OUTPUT-WORD
  ADD WS-WORD-LEN TO WS-SUB1
END-PERFORM 
```

注意：代码只是徒手写的，未经编译且未经测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T16:10:31.317

@cschneid 是对的。UNSTRING是要走的路。如果您希望将多个空格视为单个分隔符，请使用 DELIMITED BY ALL SPACES。[在http://publib.boulder.ibm.com/infocenter/iadthelp/v7r0/index.jsp?topic=/com.ibm.etools.iseries.langref.doc/c0925395564.htm](http://publib.boulder.ibm.com/infocenter/iadthelp/v7r0/index.jsp?topic=/com.ibm.etools.iseries.langref.doc/c0925395564.htm)有一个例子。

如果您稍后需要将它们重新组合在一起，您可以使用 STRING 动词来完成。我建议您还使用 ON OVERFLOW 子句来捕获诸如太长而无法放入目标变量的单词之类的内容。它发生了。

# python - 查找字符串中的重复模式

> ID：11303238
> 
> 赞同：4
> 
> 时间：2012-07-03T01:08:27.580
> 
> 标签：python, regex, string

好的，问题是给定一个分数`eg:1/3`，答案`0.3333333`应该表示为，`0.(3)` 并且我已经想出了一种方法来分割字符串，当它的单个数字重复时：`0.2325555``0.232(5)`

使用`re.findall(r'^(.+?)((.)\3+)$', '42344444' )[0][:-1]`（忽略`0.`数字之前的）

但我想知道如果模式`0.324324324..`要得到如何做到这一点`0.(324)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T01:13:03.693

在重复部分`+`之后添加：`.`

```
>>> re.findall(r'^(.+?)((.+)\3+)$', '42344343434' )[0][:-1]
('42344', '343434') 
```

# facebook - 让 Facebook 爬虫将页面视为经过身份验证的用户？

> ID：11303242
> 
> 赞同：1
> 
> 时间：2012-07-03T01:09:30.073
> 
> 标签：facebook, authentication, facebook-graph-api, meta-tags

Facebook 的爬虫没有获取我的 og 元数据，因为 php 首先需要 FB 身份验证。有没有办法让 FB 的爬虫以执行自定义操作（分享等）的用户身份查看网页？或者，代替它，有没有其他方法可以在仍然使用自定义操作的同时为 FB 提供元数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:35:29.267

如果您希望该 URL 正常工作，即使页面上没有其他实际内容，并且即使其他浏览器访问该 URL 收到 HTTP 401 或重定向，您也必须将元数据返回到该 URL 的 Facebook 爬虫。

如果您无法对该端点进行例外处理，以便 Facebook 的爬虫可以访问元数据，则必须设置一个新的、未经身份验证的端点，专门为 Facebook 提供元标记，并将任何其他流量重定向到您的主站点

# java - com.mysql.jdbc.MysqlDataTruncation：数据截断：截断不正确的 DOUBLE 值：',3'

> ID：11303248
> 
> 赞同：2
> 
> 时间：2012-07-03T01:10:38.440
> 
> 标签：java, mysql, jdbc, truncation

我正在尝试为我的 Minecraft 服务器编写商店插件，但每当有人执行 /purchase 命令时，我都会收到错误消息。

这是错误：

```
2012-07-03 04:27:28 [严重] com.mysql.jdbc.MysqlDataTruncation：数据截断：截断不正确的 DOUBLE 值：'，3'
2012-07-03 04:27:28 [严重] 在 com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3591)
2012-07-03 04:27:28 [严重] 在 com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3525)
2012-07-03 04:27:28 [严重] 在 com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1986)
2012-07-03 04:27:28 [严重] 在 com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2140)
2012-07-03 04:27:28 [严重] 在 com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2620)
2012-07-03 04:27:28 [严重] 在 com.mysql.jdbc.StatementImpl.executeUpdate(StatementImpl.java:1662)
2012-07-03 04:27:28 [严重] 在 com.mysql.jdbc.StatementImpl.executeUpdate(StatementImpl.java:1581)
2012-07-03 04:27:28 [严重] 在 com.Chipmunk9998.Cod.CodCommandExecutor.onCommand(CodCommandExecutor.java:1421)
2012-07-03 04:27:28 [严重] 在 org.bukkit.command.PluginCommand.execute(PluginCommand.java:40)
2012-07-03 04:27:28 [严重] 在 org.bukkit.command.SimpleCommandMap.dispatch(SimpleCommandMap.java:166)
2012-07-03 04:27:28 [严重] 在 org.bukkit.craftbukkit.CraftServer.dispatchCommand(CraftServer.java:479)
2012-07-03 04:27:28 [严重] 在 com.Chipmunk9998.Cod.CodCommandExecutor.onCommand(CodCommandExecutor.java:1443)
2012-07-03 04:27:28 [严重] 在 org.bukkit.command.PluginCommand.execute(PluginCommand.java:40)
2012-07-03 04:27:28 [严重] 在 org.bukkit.command.SimpleCommandMap.dispatch(SimpleCommandMap.java:166)
2012-07-03 04:27:28 [严重] 在 org.bukkit.craftbukkit.CraftServer.dispatchCommand(CraftServer.java:479)
2012-07-03 04:27:28 [严重] 在 net.minecraft.server.NetServerHandler.handleCommand(NetServerHandler.java:821)
2012-07-03 04:27:28 [严重] 在 net.minecraft.server.NetServerHandler.chat(NetServerHandler.java:781)
2012-07-03 04:27:28 [严重] 在 net.minecraft.server.NetServerHandler.a(NetServerHandler.java:764)
2012-07-03 04:27:28 [严重] 在 net.minecraft.server.Packet3Chat.handle(Packet3Chat.java:34)
2012-07-03 04:27:28 [严重] 在 net.minecraft.server.NetworkManager.b(NetworkManager.java:229)
2012-07-03 04:27:28 [严重] 在 net.minecraft.server.NetServerHandler.a(NetServerHandler.java:113)
2012-07-03 04:27:28 [严重] 在 net.minecraft.server.NetworkListenThread.a(NetworkListenThread.java:78)
2012-07-03 04:27:28 [严重] 在 net.minecraft.server.MinecraftServer.w(MinecraftServer.java:567)
2012-07-03 04:27:28 [严重] 在 net.minecraft.server.MinecraftServer.run(MinecraftServer.java:459)
2012-07-03 04:27:28 [严重] 在 net.minecraft.server.ThreadServerApplication.run（SourceFile:492）

```

这是我的代码：

```
if (cmdsender == null) {
  File weaponFile = new File(plugin.getDataFolder(), "weapons.yml");
  FileConfiguration weaponData = YamlConfiguration.loadConfiguration(weaponFile);

  String sql = "UPDATE account_info SET Money = Money - "
    + weaponData.getString(args[0] + "." + args[1] + ".Price")
    + " WHERE Username = '" + args[2] + "'";

  try {
    plugin.st.executeUpdate(sql);
  } catch (SQLException e) {
    e.printStackTrace();
  }

  sql = "UPDATE account_info SET Bought_" + args[0] + " = Bought_" + args[0]
    + " + ," + args[1] + " WHERE Username = '" + args[2] + "'";

  try {
    plugin.st.executeUpdate(sql);
  } catch (SQLException e) {
    e.printStackTrace();
  }

  plugin.getServer().getPlayer(args[2]).sendMessage(
    "You have successfully bought the "
    + weaponData.getString(args[0] + "." + args[1] + ".Name") + "."
  );

  return true;
} 
```

我试着用谷歌搜索它，但找不到任何有用的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T08:27:22.473

看起来你在这一行有一个错误：

```
 sql = "UPDATE account_info SET Bought_" + args[0] + " = Bought_" + args[0]
    + " + ," + args[1] + " WHERE Username = '" + args[2] + "'"; 
```

在此字符串之前有一个错误的逗号`args[1]`。如果`args[0]`、`args[1]`和`args[2]`包含`1`、`3`和`foo`，则分别`sql`计算为：

```
UPDATE account_info SET Bought_1 = Bought_1 + ,3 WHERE Username = 'foo' 
```

这显然是一个语法错误并解释了您的错误消息`Data truncation: Truncated incorrect DOUBLE value: ',3'`。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-10-11T18:35:23.237

我在 JSP 中编码以使用 UPDATE 查询更新数据库记录。"UPDATE customer_details set Customer_fname=?,Customer_lname=?,Customer_home_address=?,Customer_office_address=?,Customer_mobile_no=?,Customer_city=?,Customer_state=?,Customer_dob=? where **User_id=?**

在最后一个 User_id 的参数中......，我不小心写**了 ps.setString(9,uname)**，它是具有不同数据类型的不同变量......这给了我一个**数据截断错误：不正确的 doublevalue**。

我用**ps.setInt(9,uid)**更正了它，它是正确的变量和数据类型，然后错误就消失了......！！

# html - 隐藏网页中的文本，选中时显示

> ID：11303249
> 
> 赞同：0
> 
> 时间：2012-07-03T01:10:41.310
> 
> 标签：html, css

我有一个个人页面：[http ://matthieu.riegler.fr/index.html](http://matthieu.riegler.fr/index.html)

我想在其中隐藏一个“小”trollface，它只在选择文本时出现。

知道如何正确地做到这一点。

这就是我所拥有的。

```
#trollface {
float:left;
color: #F5FAFF; /* color of my background */
margin-top: -45em;
} 
```

它有效，但我认为它有点乱。

那么有什么想法可以帮助我吗？:)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T01:34:53.033

您可以针对 css 规则定位选定的文本：

```
*::selection {
    color: ...
}
*::-moz-selection {
    color: ...
} 
```

您可以尝试以这种方式放置背景图像。

# jquery - 我需要能够打印我的页面的一部分，但还要保持打印整个页面的能力

> ID：11303252
> 
> 赞同：1
> 
> 时间：2012-07-03T01:11:27.450
> 
> 标签：jquery, css

我有一个包含几个 div 的网页。用户应该能够打印一个 div（选定的内容）或整个页面。如果用户打印整个页面，它应该维护页眉、页脚等。我可以让它打印一个部分或整个页面，但我不知道如何优雅地完成这两个操作。我当前的 css 正在使用 @media 打印，如下所示：

```
 @media print
   {
    body * { visibility: hidden; }
    .printArea * { visibility: visible; }
   } 
```

使用 jQuery，我将类添加`printArea`到所选部分，然后调用 window.print()。

```
$("a.printSection").live("click", function(){
    //the id of the sectionToPrint is actually passed in via metadata plug-in
    $("div#sectionToPrint").addClass('printArea');
    window.print();
}); 
```

我尝试在正文中添加和删除一个类，但问题是 jQuery 在实际打印作业之前删除了类名。关于如何打印一个部分或整个页面的任何想法？当您打印一个部分然后使用 ctrl + p 打印时，真正的问题就出现了。

提前感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T01:53:24.677

首先，您应该将内容与页眉和页脚分开。使用以下代码查看工作示例：

```
<!DOCTYPE html>
<html>
    <head>
        <script type="text/javascript" 
           src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.2.min.js"></script>
        <script type='text/javascript'>
            var isSelected = false;

            // To print the entire page
            function printAll() {
                $('style[media=\"print\"]').remove();
                isSelected = false;
            }
            // To print the slected content
            function printSelected() {
              if(!isSelected) {
                $('<style type=\"text/css\" media=\"print\">body{visibility:hidden}\
                     .printArea{visibility:visible}</style>').appendTo('head');
                     isSelected = true;
                }
            }
        </script>
    </head> <body>
        <a href="#" onclick="printAll();return false;">Print All</a>
        <a href="#" onclick="printSelected(); return false;">Print Selected</a>
        <div id="header"> header content here </div>
        <div id="content">
            body content outside the print area
            <div class="printArea">body content inside the print area</div>
            more body content outside the print area
         </div>
        <div id="footer"> footer content here </div>
    </body>
</html> 
```

我希望这有帮助。

# javascript - 夜间运行 javascript 后系统挂起

> ID：11303255
> 
> 赞同：5
> 
> 时间：2012-07-03T01:12:11.897
> 
> 标签：javascript, jquery, html, memory-management, memory-leaks

我的 javascript 很简单。它只是不断调用 ajax 来下载数据并将其显示在我的屏幕上。我通过直接更新数据来重用这些 DOM 元素（使用 jquery 的 $(DIV).empty() 函数，然后 appendTo 另一个内容）。然而，在运行了一夜之后，我的电脑挂了，似乎在继续做某事。

我尝试观察一些 Firefox 插件的内存消耗。运行两个小时，内存可能会增长 200MB ，但我不确定是我的 js 还是其他原因造成的。

我对这个问题有一些疑问。1.有没有什么好的监控方法（比如特定网页占用了多少内存，占用了多少CPU资源，以及如何？） 2.有什么通用的方法来设计js web app来避免这样的问题？

谢谢，任何评论表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T01:49:32.970

某些版本的 Firefox 使用引用计数作为垃圾收集策略。引用计数在某些情况下容易导致内存泄漏。

> Internet Explorer 和 Mozilla Firefox 是最常与 JavaScript 内存泄漏相关的两种 Web 浏览器。这两种浏览器的罪魁祸首是用于管理 DOM 对象的组件对象模型。本机 Windows COM 和 Mozilla 的 XPCOM 都使用引用计数垃圾收集来进行内存分配和检索。引用计数并不总是与用于 JavaScript 的标记和清除垃圾收集兼容。本文重点介绍解决 JavaScript 代码中内存泄漏的方法。请参阅参考资料以了解有关 Firefox 和 IE 中 COM 层内存处理的更多信息。

来自[http://www.ibm.com/developerworks/web/library/wa-memleak/](http://www.ibm.com/developerworks/web/library/wa-memleak/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T01:49:33.073

我预感到内存消耗是因为在 jQuery 中，每次完成 ajax 调用时，都会创建一个 jqXHR 来管理请求和后续处理（回调、状态检查等）。我在 jQuery 文档中看不到任何这些自动被清除的内容。因此，您的 javascript 只是将它们堆积起来。

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T01:24:44.507

您可以使用 Chrome 的时间轴功能来跟踪一段时间内的内存使用情况。它是内置开发人员工具的一部分。我确信 Firebug 或其他 FF 插件会提供相同的功能。

# c# - Windows 8 中的 StorageFile 访问被拒绝异常

> ID：11303256
> 
> 赞同：3
> 
> 时间：2012-07-03T01:12:16.303
> 
> 标签：c#, windows-8, storagefile

`StorageFile`我有一个 Metro 风格的应用程序，它每 X 秒轮询一次存储在隔离存储中的文件（这是对对象的引用）。

它是一个 PDF 文件，在我的应用程序中，我允许用户使用本机阅读器应用程序打开文档并更改文档。

我的问题是我在轮询文档时调用`OpenStreamForReadAsync`，`StorageFile`但是如果您在用户保存对 Reader 应用程序中对文档所做的更改的精确时刻执行此操作，我会`Access denied`抛出异常。

我假设这是因为 Windows 正在写入文件，这很好，我只需要知道如何查询本地`StorageFile`引用以查看是否允许我打开它。（理想情况下，没有调用`OpenStreamForReadAsync`包裹在 try catch 中）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T14:53:54.573

Windows 团队会告诉你做 try/catch 的事情。当我要求 File.Exists() API 时，他们就是这么告诉我的。

原因是这样的：假设您正在寻找的 API 存在......如果在您调用该 API 和尝试打开文件之间的几毫秒内，文件被打开/删除/重命名，会发生什么？繁荣！您又回到了最初的异常，需要进行一次 try/catch 以避免难以重现的崩溃。因此，既然您无论如何都需要捕获此异常，那么您不妨*只*捕获该异常。通过不提供 File.Exists 或您正在寻找的 API，它们迫使我们捕获异常，因此用户不会遇到这些罕见的竞争条件错误。

# php - 这是一个合适的登录和注册加密系统吗

> ID：11303258
> 
> 赞同：4
> 
> 时间：2012-07-03T01:12:50.127
> 
> 标签：php, sql, session, cookies, hash

显然，对用户名和密码进行哈希处理并将它们保存为 cookie 并使用经过清理的 cookie 数据登录对你们（或我的网站的安全）来说还不够好。

这种方法是否足够好？

注册程序：

```
$salt= date('U');
$username= hash('sha256', $salt. $_POST['username']);
$password= hash('sha256', $salt. $_POST['password']);
$token = hash('sha256', $salt. (rand(1,10000000000000000000000000000000000000000000))); 
```

要手动登录，用户输入他们的用户名和密码，它通过哈希传递并匹配。

成功登录后，将为用户创建两个厨师。一个持有未散列的用户名，另一个持有散列令牌。

当用户访问时，如果设置了 cookie，站点会对用户名进行哈希处理，然后使用这两个值进行登录。

这种方法的优点是它避免了将用户的密码存储在他们计算机上的任何位置。有人可以破解令牌并访问他们的帐户，但至少我不会危及用户的密码......

回答[MySQL`real_escape`字符串和 cookie](https://stackoverflow.com/questions/11301153/mysql-real-escape-string-and-cookies)的人说，将用户数据存储在 cookie 中是错误的。这会转移问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T02:32:27.770

为什么您需要存储密码，甚至是加密版本？您的站点是否在后端访问执行 HTTP Basic auth 或其他内容的第 3 方 API？

不幸的是，您的问题没有明确的答案。“合适”对不同的人意味着不同的东西。对于安全问题，我不确定是否有可能“足够合适”或“足够安全”。也就是说，这就是我处理登录名和密码安全性的方式。在我的数据库`users`表中，我有 3 个与登录相关的列：

1.  用户名
2.  盐
3.  密码哈希

该`username`列是纯文本格式。该`salt`列是由随机选择的字母数字字符组成的 64 个字符的字符串。该`passwordHash`列是用户的密码与其`salt`值连接，然后不可逆地散列。我使用 sha256 作为我的哈希值。盐是 64 个字符，因为这是 sha256 产生的。最好有一个至少与哈希值一样长的盐值，以便在哈希字符串中产生足够的可变性。

当用户提交登录表单时，我对用户名进行数据库查询。如果未找到用户名，我会向用户显示“无效的用户名和/或密码”错误。如果找到用户名，我将盐与密码连接起来，对其进行哈希处理，并查看它是否等于该`passwordHash`值。如果不是，则向用户显示完全相同的错误。

无论用户名是否错误，密码是否错误，或两者兼而有之，都最好显示完全相同的错误消息。你给黑客的线索越少越好。此外，每当用户更改密码时，我也会给他们一个新密码`salt`。在那个时候这样做真的很容易，而且它使盐值保持新鲜一点。

这种每个用户使用不同盐的系统称为*动态*加盐。如果黑客试图使用[彩虹表](http://en.wikipedia.org/wiki/Rainbow_table)对用户密码进行逆向工程，这会使黑客的工作变得非常复杂。更不用说以不可逆的散列形式存储密码对于防止任何人确定用户的密码有很长的路要走，即使他们有权访问数据库和 PHP 代码。

这也意味着如果您的用户忘记了密码，则无法找回密码。相反，您编写系统只是将其重置为一个新的随机确定的值，该值会发送给他们，并强烈鼓励他们在再次登录后立即更改密码。您甚至可以编写系统以在下次成功登录时强制执行此操作。

我要求密码至少为 8 个字符。理想情况下，它还应该包括数字和特殊字符，但我还没有决定我应该需要这个。也许我应该！

为了防止[暴力](http://en.wikipedia.org/wiki/Brute-force_attack)攻击，我会跟踪过去 10 分钟内所有失败的登录。我根据每个 IP 地址跟踪它们。在 3 次登录尝试失败后，系统使用该`sleep()`功能延迟响应进一步的登录尝试。我使用这样的代码块：

```
$delay = ($failedAttempts - 3);
if ($delay > 0) {
    sleep($delay);
} 
```

恕我直言，这比在多次失败后将用户锁定在他们的帐户之外要好得多。它减少了您将获得的客户支持查询的数量，并且对于根本不记得自己的密码的合法用户来说更加优雅。蛮力攻击需要每秒进行多次尝试才能获得任何形式的效率，因此`n = x`基于延迟可以防止它们走得太远。

使用 PHP 会话跟踪登录会话。`session_start()`加载您网站上的每个页面时调用。（如果您有一个公用文件，这真的很容易`header.php`。）这使得[$_SESSION](http://php.net/manual/en/reserved.variables.session.php)变量可用。当用户成功登录时，您可以使用它来存储站点所需的任何信息，以便知道用户已登录。我通常使用他们的用户 ID、用户名，也许还有一些特定于站点的其他详细信息。但我在这里**没有**包含密码或它的哈希值。如果黑客以某种方式进入了存储在您服务器上的用户会话数据，他们仍然没有机会通过这种方式找到用户的密码。

发生以下两种情况之一时会发生注销：1) 用户的会话 cookie 被删除，例如通过清除浏览器缓存或有时仅通过关闭浏览器窗口，或 2) 您的服务器删除他们的会话数据。`session_destroy()`当用户按下您网站上的“注销”按钮时，您可以通过调用强制后者发生。否则，您可以使会话在一段时间后自动过期。这可能涉及调整你的`session.gc_*`参数`php.ini`。

如果您在初始登录阶段后绝对必须知道用户密码，您可以将其存储在`$_SESSION`. 当且仅当您的网站需要 SSL 连接并且您已经做到这一点时才这样做，这样该网站将无法在没有 SSL 连接的情况下运行。这样，密码就被加密了，因此可以防止[数据包嗅探](http://en.wikipedia.org/wiki/Packet_analyzer)。但要知道，如果黑客获得了访问您服务器会话数据的权限，就会存在安全风险。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T01:23:14.150

你的盐不够随机。

这个问题是重放攻击。假设坏人在访问您网站的途中收集了用户的 cookie。是什么阻止他（坏人）发送相同的值并像他们是真正的用户一样进入？

将用户数据存储在 cookie 中是不好的。您可能会在用户浏览器的 cookie 中存储一个随机的 64 位数字。在应用程序的身份验证数据库中，您记录了随机数和显着属性，例如用户名、cookie 首次有效的时间、过期时间，可能还有浏览器信息和 IP 地址信息。

发送 cookie 时，您确认它似乎来自与发送 cookie 时相同的浏览器。

我没有根据最佳实践检查这一点，或者再次“可靠”识别用户需要什么。但是随机数据没有任何意义，所以如果坏人抓住它也不是世界末日。捕获的 cookie 的有效性是有限的，如果您捕获适当的细节，坏人必须相当准确地模拟用户的环境。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T01:32:59.250

为什么要对用户名进行哈希处理？这不是秘密，无论如何您都将需要未散列（或至少未加盐）的用户名来查找登录凭据。

另外，我认为您会想要使用加密安全的 RNG，例如[`openssl_random_pseudo_bytes()`](http://php.net/openssl_random_pseudo_bytes) 代替[`rand()`](http://php.net/rand). 不过，除此之外，基本想法看起来还不错。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T01:46:28.783

如果我是开放网络（如 wi-fi 热点）上的恶意用户，并且想要控制您的用户帐户之一，我可能会尝试以下方法。保护自己。

*   知道（从你在 SO 上的帖子）你使用 date('U') 作为你的盐，我会尝试使用字典来破解密码，在每次测试之前附加已知的盐。
*   如果您允许未加密的流量，我会嗅探流量并劫持令牌。希望您的网站能提供一种方法来更改我的电子邮件地址，然后通过电子邮件将密码发送给我。
*   如果我可以获得文件访问权限，我会从文件中提取令牌并直接使用它。

您可能会考虑的另一种方法是序列化字段，加密该字符串，然后在您的 cookie 中存储一个 base64 编码的消息。此外，将一些大而杂乱的字符串附加到您现有的盐中。

# c# - 带有子查询的休眠选择查询？

> ID：11303259
> 
> 赞同：0
> 
> 时间：2012-07-03T01:13:03.573
> 
> 标签：c#, .net, nhibernate, hql

我是 C# 的 Nhibernate 新手。

这是我的 SQL 查询：

```
select * from advis_productattributes where ID in 
(select attributeid from advis_productattributes_products where productid=1); 
```

我知道 HQL 中的简单选择查询：

```
string hql = @"select p from ProductAttributes_Products p.ProductId :id"; 
var query = new SimpleQuery<ProductAttributes_Products>(hql); 
query.SetParameter("id", ProductId); 
return query.Execute(); 
```

我在网上搜索过，但仍然失败。如何使用子查询编写 HQL？

这是类的设计。 ![在此处输入图像描述](../Images/981d488f1f89deaae4d4673e83cde7f8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T01:47:39.250

我相信你可以通过使用 NHibernate LINQ 来实现这一点。请参考这些堆栈溢出[答案 #1](https://stackoverflow.com/a/6999035/585408) 和[答案 #2](https://stackoverflow.com/a/51400/585408)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T13:54:32.837

我不知道您在网上的确切位置搜索...但是官方文档包含您需要了解的有关HQL 中子[查询的所有信息](http://www.nhforge.org/doc/nh/en/index.html#queryhql-subqueries)

它与 SQL 几乎相同。

# javascript - 这个正则表达式我缺少什么？

> ID：11303263
> 
> 赞同：0
> 
> 时间：2012-07-03T01:13:51.647
> 
> 标签：javascript, regex

我在这个正则表达式中遗漏了一些非常微不足道的东西。你能帮我弄清楚吗？

有效输入：`Tonny & 'One' 1234-5 tea be and Z`

正则表达式：`/^([a-zA-Z',\s,\d,&,#,-,(,)])*$/;`

根据我当前的正则表达式，输入无效。它是根据 reqs 的有效输入，想知道我在 regex 中缺少什么而不是验证上述输入？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T01:18:24.710

您的破折号不匹配，因为在字符类中您需要将破折号放在首位或最后。此外，您不需要所有这些逗号：

```
/^([-a-zA-Z'\s\d&#()])*$/ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T01:19:49.063

将`-`字符放在`[...]`>>内的第一个或最后一个位置

`/^([-a-zA-Z\s\d',&#()])*$/`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T01:18:57.993

这匹配它：`^([\w\d&#\(\) '-])*$`

逗号是多余的。为我解决这个问题的方法是将 & 符号移到前面。

# php - 你如何在我的本地计算机（Ubuntu）上测试 php 代码？

> ID：11303267
> 
> 赞同：0
> 
> 时间：2012-07-03T01:14:20.610
> 
> 标签：php, mysql, html, webserver

我正在阅读我的新 php 和 MySQL 书，它说如果我有一个“本地安装的 Web 服务器并且它支持 PHP，那么你可以直接在你的计算机上测试 PHP 脚本”。我如何在 linux 上获得所有这些，一旦我拥有它，我如何测试我的 php 脚本是否正常工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T01:15:48.893

安装 LAMP 堆栈。由于您已经拥有 Ubuntu，因此需要一个 AMP 堆栈。
`sudo apt-get install apache2 php5 php5-mysql`从命令行将为您设置一个带有 php 的 Web 服务器。然后，您可以将脚本放在 /var/www/

# hibernate - Grails - beforeValidate() 中的更改域对象未持久化

> ID：11303272
> 
> 赞同：2
> 
> 时间：2012-07-03T01:15:25.827
> 
> 标签：hibernate, grails, groovy, grails-orm

我有一个域对象，我正在更改 beforeValidate() 事件内部的属性值。如果此属性是对象上唯一更改的属性，则似乎没有任何内容被持久化到数据库中。我查看了调试器，发现对象已更改。但是当我调用 save(flush: true) 时，新值不会保留。

我可能做错了什么？

但是，如果在 beforeValidate() 事件之外更改了另一个属性，它确实有效。

环境：Grails 2.0.1，failOnError 全局开启

# 编辑

我`validate()`手动调用我的对象，我看到`beforeValidate()`被调用。在我打电话之前，`save(flush: true)`我记录了以下内容：

```
log.debug("isDirty() = ${myObj.isDirty()}")
log.debug("changedVal = ${myObj.val}")
log.debug("dirtyPropertyNames = ${myObj.dirtyPropertyNames}") 
```

打印出来的

```
isDirty() = false
changedVal = my new value
dirtyPropertyNames = [] 
```

因此，休眠似乎没有识别出对象是脏的。我怎样才能让它看到物体很脏？

# ruby-on-rails - 用 mongoid 重命名模型

> ID：11303278
> 
> 赞同：5
> 
> 时间：2012-07-03T01:16:01.537
> 
> 标签：ruby-on-rails, ruby, mongoid

我知道通过正常迁移我可以做 rename_table 但在 mongoid 中我完全不确定如何继续。

我已将所有模型/关系/路由/控制器/等全部重命名，但我只需要知道如何移动数据本身。

这是一个嵌入的 embeds_one 文档。

更新：

看起来就像简单地做：

```
Model.all.each {|m| m.rename :old_embedded_association_name, :new_embedded_association_name } 
```

作品。听起来很理智？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T03:32:26.060

对于重命名嵌入式文档，您可以像对待属性一样对待它们，并使用以下内容重命名它们：

`ParentModel.all.each {|m| m.rename :old_embedded_association_name, :new_embedded_association_name }`

要重命名顶级模型，您需要访问 ruby​​ 驱动程序本身并使用 #rename_collection 方法：

`Mongoid.database.rename_collection "old_collection_name", "new_collection_name"`

要查看旧集合名称，您可以执行以下操作：

`Mongoid.database.collections.map {|c| c.name}`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-13T16:03:54.787

有几种方法可以重命名集合。我喜欢通过轻便摩托车（[https://github.com/mongoid/moped/blob/master/lib/moped/collection.rb#L55](https://github.com/mongoid/moped/blob/master/lib/moped/collection.rb#L55)）来做。

`Mongoid.default_session[:old_name].rename(:new_name)`

这对于查找集合名称也很方便。

`OldModel.collection.name`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T04:35:34.717

根据您所说的和文档，您似乎应该这样做

```
Model.rename(:old_name, :new_name) 
```

# python - 从出现在外部文本文件中的列表中删除项目

> ID：11303285
> 
> 赞同：0
> 
> 时间：2012-07-03T01:17:58.183
> 
> 标签：python, list, comparison, text-files

我正在尝试获取一个列表并将其与文本文件进行比较，从列表中删除出现在文本文件中的元素。

我的代码是：

```
baselist = open("testfile.txt", 'r')
twolist = ["one","two","three","four","five"]
for y in baselist:
    for x in range(0,len(twolist)):
        print("Working %s vs %s") % (twolist[x], y)
        if twolist[x] == y:
            print("Match!")
            remove.twolist[x]
baselist.close() 
```

当我运行它时，我可以在输出中看到它正在比较“一个”和“一个”等，显然问题在于，`if twolist[x] == y:`但对于我的生活，我无法让它工作。我已经阅读和阅读并用谷歌搜索和搜索，但显然我错过了一些东西。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T01:22:22.780

*   打开文件通常最好用`with`

*   从文件中读取时，不会删除换行符；因此，例如，`'two\n' != 'two'`您的比较测试失败。使用 .strip() 或 .rstrip() 删除空格，包括尾随换行符

*   `for index in range(len(mylist))`通常是一个不好的迹象；最好对列表进行操作`for value in mylist`并将其过滤为`[value for value in mylist if test(value)]`

*   您的第一个`print`语句缩进错误

*   你的`remove`语法错误；应该是`twolist.remove(x)`，并且注意这只会删除第*一次*出现的 x

*   你的算法是 O(mn) 其中 m 是行数，`baselist`n 是行数`twolist`；稍加注意，它可能是 O(m+n) 。

如果原始顺序很重要，

```
with open('testfile.txt') as inf:
    twoset = set(twolist).difference(line.strip() for line in inf)

twolist = [item for item in twolist if item in twoset] 
```

否则，

```
with open('testfile.txt') as inf:
    twolist = list(set(twolist).difference(line.strip() for line in inf)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T01:22:15.933

你错过了`rstrip()`。

```
if twolist[x] == y.rstrip(): 
```

并且在迭代列表时不要修改列表。

更好地使用列表理解，并使用集合使其更快：

```
$ cat 1.py 
baselist = set([x.rstrip('\n') for x in open("testfile.txt", 'r')])
twolist = ["one","two","three","four","five"]
baselist = [x for x in twolist if x not in baselist]
print baselist

$ cat testfile.txt 
one
three

$ python 1.py 
['two', 'four', 'five'] 
```

# java - 通过java显示html的最佳方式是什么

> ID：11303288
> 
> 赞同：0
> 
> 时间：2012-07-03T01:18:48.693
> 
> 标签：java, webview

使用java查看html（从url或文件）的最佳方法是什么？我曾尝试使用飞碟。失败。然后我转到 JEditorPane。失败。然后我试试路宝。失败。有人会给我其他建议吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T01:30:45.257

如果您只想在 java swing 中显示 html 文件，请考虑 oracle 的[java swing 教程](http://docs.oracle.com/javase/tutorial/uiswing/components/text.html)。查看如何通过方法读取文件的[代码](http://docs.oracle.com/javase/tutorial/displayCode.html?code=http://docs.oracle.com/javase/tutorial/uiswing/examples/components/TextSamplerDemoProject/src/components/TextSamplerDemo.java)`createEditorPane()`。我还为您可能想尝试的其他库找到了此[链接。](https://stackoverflow.com/questions/2438201/pure-java-html-viewer-renderer)

# android - Keytool 打开比关闭超级快

> ID：11303291
> 
> 赞同：1
> 
> 时间：2012-07-03T01:19:14.683
> 
> 标签：android, keytool

全部 - 当我尝试打开 keytool（通过在我的 JDK 的 bin 文件中双击它）时，会弹出该窗口，但关闭速度非常快。我查看了这个[问题](https://stackoverflow.com/questions/5983946/tried-many-answers-to-get-my-keytool-exe-to-open-but-failed)并尝试从命令行运行它，但遇到了这个问题 ![](../Images/69030e1cb339b7c7ee95c475467ce610.png) 我是否输入了所有内容，或者还有什么我可以尝试的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T01:26:23.227

你应该做一个`cd`to `C:\Program Files\Java\jdk1.7.0_04\bin`，然后输入`keytool.exe`运行程序

或者只是删除`cd`它，它会正常工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T03:19:23.267

我建议，如果您对 Java 中的命令行工具不满意，最好有一个 Eclipse 插件来完成幕后工作。

这是一个对我来说效果很好的用于 keytool 操作的 Eclipse 插件：http: [//keytool.sourceforge.net/](http://keytool.sourceforge.net/)

# android - 我有这个问题 java.lang.NoSuchMethodError

> ID：11303292
> 
> 赞同：0
> 
> 时间：2012-07-03T01:19:33.807
> 
> 标签：android, libgdx

如果我运行 Descktop 版本，但当我使用 FALTAL EXCEPTION GLTHREAD java.lang.NoSuchMethodError: com.badlogic.gdx.scenes.scene2d.ui.Label 运行 android 版本时，该项目运行良好。

```
private void buildElements()
{
    // ---------------------------------------------------------------
    // Background.
    // ---------------------------------------------------------------
    //Image image = new Image(logo, Scaling.none);
    //image.width = width;
    //image.height = height;

    // ---------------------------------------------------------------
    // Labels
    // ---------------------------------------------------------------

    try{

        titleLabel =new Label("DEMO", "large-font", Color.YELLOW, skin);

        poweredByLabel =new Label("DEMO", "large-font", Color.YELLOW, skin);
    }catch (Exception e) {
        System.out.println(TAG + " ( ) " + e.getMessage());
    }

    table.pack();

    addActor(titleLabel );
} 
```

似乎是当涉及到 titleLabel.... 但为什么呢？

请帮忙！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T02:02:54.443

检查标签 jar 所在的文件夹。可能有两个不同的版本，或者您可能使用的是不包含该方法的旧版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T01:23:55.287

您能否验证 Jar 的版本是否匹配。您的路径中存在导致问题的旧版本。

# node.js - 在 Mongoose 中填充后查询

> ID：11303294
> 
> 赞同：94
> 
> 时间：2012-07-03T01:19:42.733
> 
> 标签：node.js, mongodb, mongoose

一般来说，我对 Mongoose 和 MongoDB 还是很陌生，所以我很难弄清楚这样的事情是否可行：

```
Item = new Schema({
    id: Schema.ObjectId,
    dateCreated: { type: Date, default: Date.now },
    title: { type: String, default: 'No Title' },
    description: { type: String, default: 'No Description' },
    tags: [ { type: Schema.ObjectId, ref: 'ItemTag' }]
});

ItemTag = new Schema({
    id: Schema.ObjectId,
    tagId: { type: Schema.ObjectId, ref: 'Tag' },
    tagName: { type: String }
});

var query = Models.Item.find({});

query
    .desc('dateCreated')
    .populate('tags')
    .where('tags.tagName').in(['funny', 'politics'])
    .run(function(err, docs){
       // docs is always empty
    }); 
```

有更好的方法吗？

**编辑**

对任何混淆表示歉意。我要做的是获取所有包含有趣标签或政治标签的项目。

**编辑**

没有 where 子句的文档：

```
[{ 
    _id: 4fe90264e5caa33f04000012,
    dislikes: 0,
    likes: 0,
    source: '/uploads/loldog.jpg',
    comments: [],
    tags: [{
        itemId: 4fe90264e5caa33f04000012,
        tagName: 'movies',
        tagId: 4fe64219007e20e644000007,
        _id: 4fe90270e5caa33f04000015,
        dateCreated: Tue, 26 Jun 2012 00:29:36 GMT,
        rating: 0,
        dislikes: 0,
        likes: 0 
    },
    { 
        itemId: 4fe90264e5caa33f04000012,
        tagName: 'funny',
        tagId: 4fe64219007e20e644000002,
        _id: 4fe90270e5caa33f04000017,
        dateCreated: Tue, 26 Jun 2012 00:29:36 GMT,
        rating: 0,
        dislikes: 0,
        likes: 0 
    }],
    viewCount: 0,
    rating: 0,
    type: 'image',
    description: null,
    title: 'dogggg',
    dateCreated: Tue, 26 Jun 2012 00:29:24 GMT 
 }, ... ] 
```

使用 where 子句，我得到一个空数组。

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2017-06-22T00:51:24.387

在大多数情况下，您可以使用大于 3.2 的现代 MongoDB[`$lookup`](https://docs.mongodb.com/manual/reference/operator/aggregation/lookup/)作为替代。`.populate()`这还具有在“服务器上”实际执行连接的优点，而不是`.populate()`实际上是*“多个查询”来“模拟”*连接。

因此，`.populate()`就关系数据库的执行方式而言，这**并不是**真正的“连接”。另一方面，[`$lookup`](https://docs.mongodb.com/manual/reference/operator/aggregation/lookup/)操作员实际上在服务器上完成工作，并且或多或少类似于*“LEFT JOIN”*：

```
Item.aggregate(
  [
    { "$lookup": {
      "from": ItemTags.collection.name,
      "localField": "tags",
      "foreignField": "_id",
      "as": "tags"
    }},
    { "$unwind": "$tags" },
    { "$match": { "tags.tagName": { "$in": [ "funny", "politics" ] } } },
    { "$group": {
      "_id": "$_id",
      "dateCreated": { "$first": "$dateCreated" },
      "title": { "$first": "$title" },
      "description": { "$first": "$description" },
      "tags": { "$push": "$tags" }
    }}
  ],
  function(err, result) {
    // "tags" is now filtered by condition and "joined"
  }
) 
```

> **注意**这里`.collection.name`实际上计算为“字符串”，即分配给模型的 MongoDB 集合的实际名称。由于 mongoose 默认情况下“复数”集合名称并且[`$lookup`](https://docs.mongodb.com/manual/reference/operator/aggregation/lookup/)需要实际的 MongoDB 集合名称作为参数（因为它是服务器操作），所以这是在 mongoose 代码中使用的一个方便技巧，而不是直接“硬编码”集合名称.

虽然我们也可以[`$filter`](https://docs.mongodb.com/manual/reference/operator/aggregation/filter/)在数组上使用来删除不需要的项目，但这实际上是最有效的形式，因为[聚合管道优化](https://docs.mongodb.com/manual/core/aggregation-pipeline-optimization/#lookup-unwind-coalescence)对于 as 和 a 的[`$lookup`](https://docs.mongodb.com/manual/reference/operator/aggregation/lookup/)特殊[`$unwind`](https://docs.mongodb.com/manual/reference/operator/aggregation/unwind/)条件[`$match`](https://docs.mongodb.com/manual/reference/operator/aggregation/match/)。

这实际上导致三个流水线阶段合二为一：

```
 { "$lookup" : {
     "from" : "itemtags",
     "as" : "tags",
     "localField" : "tags",
     "foreignField" : "_id",
     "unwinding" : {
       "preserveNullAndEmptyArrays" : false
     },
     "matching" : {
       "tagName" : {
         "$in" : [
           "funny",
           "politics"
         ]
       }
     }
   }} 
```

这是高度优化的，因为实际操作“首先过滤要加入的集合”，然后返回结果并“展开”数组。两种方法都被使用，因此结果不会打破 16MB 的 BSON 限制，这是客户端没有的约束。

唯一的问题是它在某些方面似乎“违反直觉”，特别是当您想要数组中的结果时，但这就是[`$group`](https://docs.mongodb.com/manual/reference/operator/aggregation/group/)这里的用途，因为它重建为原始文档形式。

同样不幸的是，我们此时根本无法实际[`$lookup`](https://docs.mongodb.com/manual/reference/operator/aggregation/lookup/)使用服务器使用的相同最终语法进行编写。恕我直言，这是一个需要纠正的疏忽。但就目前而言，简单地使用序列就可以了，并且是具有最佳性能和可扩展性的最可行的选择。

### 附录 - MongoDB 3.6 及更高版本

尽管这里显示的模式由于其他阶段如何被卷入 中而得到了*相当优化*[`$lookup`](https://docs.mongodb.com/manual/reference/operator/aggregation/lookup/)，但它确实有一个失败之处在于“左连接”通常是两者固有的，[`$lookup`](https://docs.mongodb.com/manual/reference/operator/aggregation/lookup/)而 的动作`populate()`被*“最佳”*用法所否定[`$unwind`](https://docs.mongodb.com/manual/reference/operator/aggregation/unwind/)这里不保留空数组。您可以添加该`preserveNullAndEmptyArrays`选项，但这会否定上述*“优化”*序列，并且基本上保留所有三个阶段，这些阶段通常会在优化中组合。

MongoDB 3.6 扩展了*“更具表现力”*的形式，[`$lookup`](https://docs.mongodb.com/manual/reference/operator/aggregation/lookup/)允许“子管道”表达式。这不仅满足了保留“LEFT JOIN”的目标，而且还允许优化查询以减少返回的结果，并且语法大大简化：

```
Item.aggregate([
  { "$lookup": {
    "from": ItemTags.collection.name,
    "let": { "tags": "$tags" },
    "pipeline": [
      { "$match": {
        "tags": { "$in": [ "politics", "funny" ] },
        "$expr": { "$in": [ "$_id", "$$tags" ] }
      }}
    ]
  }}
]) 
```

用于将[`$expr`](https://docs.mongodb.com/manual/reference/operator/query/expr/)声明的“本地”值与“外部”值匹配实际上是 MongoDB 现在使用原始[`$lookup`](https://docs.mongodb.com/manual/reference/operator/aggregation/lookup/)语法“内部”执行的操作。通过以这种形式表达，我们可以自己定制[`$match`](https://docs.mongodb.com/manual/reference/operator/aggregation/match/)“子管道”中的初始表达。

事实上，作为一个真正的“聚合管道”，您几乎可以在这个“子管道”表达式中使用聚合管道做任何事情，包括将级别“嵌套”[`$lookup`](https://docs.mongodb.com/manual/reference/operator/aggregation/lookup/)到其他相关集合。

进一步的使用有点超出了这里问题的范围，但即使是“嵌套人口”，新的使用模式也[`$lookup`](https://docs.mongodb.com/manual/reference/operator/aggregation/lookup/)允许它大致相同，并且在它的完整使用中*“很多”更强大。*

* * *

## 工作示例

下面给出一个在模型上使用静态方法的例子。一旦实现了该静态方法，调用就变成了：

```
 Item.lookup(
    {
      path: 'tags',
      query: { 'tags.tagName' : { '$in': [ 'funny', 'politics' ] } }
    },
    callback
  ) 
```

或者增强为更现代一点，甚至变成：

```
 let results = await Item.lookup({
    path: 'tags',
    query: { 'tagName' : { '$in': [ 'funny', 'politics' ] } }
  }) 
```

使其与结构非常相似`.populate()`，但实际上是在服务器上进行连接。为了完整起见，这里的用法根据父子案例将返回的数据转换回 mongoose 文档实例。

对于大多数常见情况，它相当简单且易于适应或仅按原样使用。

> **注意**这里使用[async](https://caolan.github.io/async/docs.html)只是为了简洁地运行随附的示例。实际的实现没有这种依赖。

```
const async = require('async'),
      mongoose = require('mongoose'),
      Schema = mongoose.Schema;

mongoose.Promise = global.Promise;
mongoose.set('debug', true);
mongoose.connect('mongodb://localhost/looktest');

const itemTagSchema = new Schema({
  tagName: String
});

const itemSchema = new Schema({
  dateCreated: { type: Date, default: Date.now },
  title: String,
  description: String,
  tags: [{ type: Schema.Types.ObjectId, ref: 'ItemTag' }]
});

itemSchema.statics.lookup = function(opt,callback) {
  let rel =
    mongoose.model(this.schema.path(opt.path).caster.options.ref);

  let group = { "$group": { } };
  this.schema.eachPath(p =>
    group.$group[p] = (p === "_id") ? "$_id" :
      (p === opt.path) ? { "$push": `$${p}` } : { "$first": `$${p}` });

  let pipeline = [
    { "$lookup": {
      "from": rel.collection.name,
      "as": opt.path,
      "localField": opt.path,
      "foreignField": "_id"
    }},
    { "$unwind": `$${opt.path}` },
    { "$match": opt.query },
    group
  ];

  this.aggregate(pipeline,(err,result) => {
    if (err) callback(err);
    result = result.map(m => {
      m[opt.path] = m[opt.path].map(r => rel(r));
      return this(m);
    });
    callback(err,result);
  });
}

const Item = mongoose.model('Item', itemSchema);
const ItemTag = mongoose.model('ItemTag', itemTagSchema);

function log(body) {
  console.log(JSON.stringify(body, undefined, 2))
}
async.series(
  [
    // Clean data
    (callback) => async.each(mongoose.models,(model,callback) =>
      model.remove({},callback),callback),

    // Create tags and items
    (callback) =>
      async.waterfall(
        [
          (callback) =>
            ItemTag.create([{ "tagName": "movies" }, { "tagName": "funny" }],
              callback),

          (tags, callback) =>
            Item.create({ "title": "Something","description": "An item",
              "tags": tags },callback)
        ],
        callback
      ),

    // Query with our static
    (callback) =>
      Item.lookup(
        {
          path: 'tags',
          query: { 'tags.tagName' : { '$in': [ 'funny', 'politics' ] } }
        },
        callback
      )
  ],
  (err,results) => {
    if (err) throw err;
    let result = results.pop();
    log(result);
    mongoose.disconnect();
  }
) 
```

或者对于 Node 8.x 及更高版本更现代一点，`async/await`并且没有额外的依赖项：

```
const { Schema } = mongoose = require('mongoose');
const uri = 'mongodb://localhost/looktest';

mongoose.Promise = global.Promise;
mongoose.set('debug', true);

const itemTagSchema = new Schema({
  tagName: String
});

const itemSchema = new Schema({
  dateCreated: { type: Date, default: Date.now },
  title: String,
  description: String,
  tags: [{ type: Schema.Types.ObjectId, ref: 'ItemTag' }]
});

itemSchema.statics.lookup = function(opt) {
  let rel =
    mongoose.model(this.schema.path(opt.path).caster.options.ref);

  let group = { "$group": { } };
  this.schema.eachPath(p =>
    group.$group[p] = (p === "_id") ? "$_id" :
      (p === opt.path) ? { "$push": `$${p}` } : { "$first": `$${p}` });

  let pipeline = [
    { "$lookup": {
      "from": rel.collection.name,
      "as": opt.path,
      "localField": opt.path,
      "foreignField": "_id"
    }},
    { "$unwind": `$${opt.path}` },
    { "$match": opt.query },
    group
  ];

  return this.aggregate(pipeline).exec().then(r => r.map(m => 
    this({ ...m, [opt.path]: m[opt.path].map(r => rel(r)) })
  ));
}

const Item = mongoose.model('Item', itemSchema);
const ItemTag = mongoose.model('ItemTag', itemTagSchema);

const log = body => console.log(JSON.stringify(body, undefined, 2));

(async function() {
  try {

    const conn = await mongoose.connect(uri);

    // Clean data
    await Promise.all(Object.entries(conn.models).map(([k,m]) => m.remove()));

    // Create tags and items
    const tags = await ItemTag.create(
      ["movies", "funny"].map(tagName =>({ tagName }))
    );
    const item = await Item.create({ 
      "title": "Something",
      "description": "An item",
      tags 
    });

    // Query with our static
    const result = (await Item.lookup({
      path: 'tags',
      query: { 'tags.tagName' : { '$in': [ 'funny', 'politics' ] } }
    })).pop();
    log(result);

    mongoose.disconnect();

  } catch (e) {
    console.error(e);
  } finally {
    process.exit()
  }
})() 
```

从 MongoDB 3.6 及更高版本开始，即使没有[`$unwind`](https://docs.mongodb.com/manual/reference/operator/aggregation/unwind/)and[`$group`](https://docs.mongodb.com/manual/reference/operator/aggregation/group/)构建：

```
const { Schema, Types: { ObjectId } } = mongoose = require('mongoose');

const uri = 'mongodb://localhost/looktest';

mongoose.Promise = global.Promise;
mongoose.set('debug', true);

const itemTagSchema = new Schema({
  tagName: String
});

const itemSchema = new Schema({
  title: String,
  description: String,
  tags: [{ type: Schema.Types.ObjectId, ref: 'ItemTag' }]
},{ timestamps: true });

itemSchema.statics.lookup = function({ path, query }) {
  let rel =
    mongoose.model(this.schema.path(path).caster.options.ref);

  // MongoDB 3.6 and up $lookup with sub-pipeline
  let pipeline = [
    { "$lookup": {
      "from": rel.collection.name,
      "as": path,
      "let": { [path]: `$${path}` },
      "pipeline": [
        { "$match": {
          ...query,
          "$expr": { "$in": [ "$_id", `$$${path}` ] }
        }}
      ]
    }}
  ];

  return this.aggregate(pipeline).exec().then(r => r.map(m =>
    this({ ...m, [path]: m[path].map(r => rel(r)) })
  ));
};

const Item = mongoose.model('Item', itemSchema);
const ItemTag = mongoose.model('ItemTag', itemTagSchema);

const log = body => console.log(JSON.stringify(body, undefined, 2));

(async function() {

  try {

    const conn = await mongoose.connect(uri);

    // Clean data
    await Promise.all(Object.entries(conn.models).map(([k,m]) => m.remove()));

    // Create tags and items
    const tags = await ItemTag.insertMany(
      ["movies", "funny"].map(tagName => ({ tagName }))
    );

    const item = await Item.create({
      "title": "Something",
      "description": "An item",
      tags
    });

    // Query with our static
    let result = (await Item.lookup({
      path: 'tags',
      query: { 'tagName': { '$in': [ 'funny', 'politics' ] } }
    })).pop();
    log(result);

    await mongoose.disconnect();

  } catch(e) {
    console.error(e)
  } finally {
    process.exit()
  }

})() 
```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-07-10T17:16:46.387

不直接支持您要求的内容，但可以通过在查询返回后添加另一个过滤步骤来实现。

首先，`.populate( 'tags', null, { tagName: { $in: ['funny', 'politics'] } } )`绝对是过滤标签文档所需要做的。然后，在查询返回后，您需要手动过滤掉没有任何`tags`符合填充条件的文档的文档。就像是：

```
query....
.exec(function(err, docs){
   docs = docs.filter(function(doc){
     return doc.tags.length;
   })
   // do stuff with docs
}); 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2012-07-03T06:57:59.183

尝试更换

```
.populate('tags').where('tags.tagName').in(['funny', 'politics']) 
```

经过

```
.populate( 'tags', null, { tagName: { $in: ['funny', 'politics'] } } ) 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2016-09-16T18:26:55.823

更新：请查看评论 - 这个答案与问题不正确匹配，但也许它回答了用户遇到的其他问题（我认为这是因为赞成票）所以我不会删除这个“答案”：

第一：我知道这个问题真的过时了，但我搜索了这个问题，这个 SO 帖子是谷歌条目 #1。所以我实现了这个`docs.filter`版本（接受的答案），但正如我在[mongoose v4.6.0 文档](http://mongoosejs.com/docs/api.html#query_Query-populate)中阅读的那样，我们现在可以简单地使用：

```
Item.find({}).populate({
    path: 'tags',
    match: { tagName: { $in: ['funny', 'politics'] }}
}).exec((err, items) => {
  console.log(items.tags) 
  // contains only tags where tagName is 'funny' or 'politics'
}) 
```

希望这对未来的搜索机用户有所帮助。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-12-07T20:43:48.657

最近自己遇到了同样的问题后，我想出了以下解决方案：

首先，查找 tagName 为 'funny' 或 'politics' 的所有 ItemTags，并返回 ItemTag _ids 数组。

然后，在 tags 数组中找到包含所有 ItemTag _id 的 Items

```
ItemTag
  .find({ tagName : { $in : ['funny','politics'] } })
  .lean()
  .distinct('_id')
  .exec((err, itemTagIds) => {
     if (err) { console.error(err); }
     Item.find({ tag: { $all: itemTagIds} }, (err, items) => {
        console.log(items); // Items filtered by tagName
     });
  }); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-09-27T21:47:01.320

[@aaronheckmann 的答案](https://stackoverflow.com/a/11418489/6786066)对我有用，但我必须替换`return doc.tags.length;`为，`return doc.tags != null;`因为如果该字段与填充中写入的条件不匹配，则该字段包含**null 。**所以最后的代码：

```
query....
.exec(function(err, docs){
   docs = docs.filter(function(doc){
     return doc.tags != null;
   })
   // do stuff with docs
}); 
```

# javascript - Javascript：需要帮助验证表单的两个方面，然后启用提交按钮

> ID：11303297
> 
> 赞同：0
> 
> 时间：2012-07-03T01:19:59.287
> 
> 标签：javascript, validation, function

我的名字是 Romano，我正在寻找有关表单验证过程的一些指导。
我目前有一个注册表单，其中包含针对**USERNAME**字段和**TERMS 和 CONDITIONS**复选框的验证过程。

我对复选框的验证很简单：

```
<script type="text/javascript">
function apply()
 {
document.frm.sub.disabled=true;
if(document.frm.chk.checked==true)
{
document.frm.sub.disabled=false;
}
if(document.frm.chk.checked==false)
{
document.frm.sub.enabled=false;
}
}
</script> 
```

表单域调用函数：

这工作正常。

我还有另一个 javascript 代码块来验证用户名，使其满足最低要求，并且还确保它当前不存在于我的数据库中。那段代码要大得多，看起来像这样：

```
 <script type="text/javascript">

$(document).ready(function() 
{
$("#username").change(function() 
{ 
var username = $("#username").val();
if(username.length > 5)//if the lenght greater than 5 characters
{
$("#availability_status").html('<img src="loader.gif" align="absmiddle">&nbsp;Checking availability...');

 $.ajax({  //Make the Ajax Request
 type: "POST",  
 url: "ajax_check_username.php",  
 data: "username="+ username, 
 success: function(server_response){  

 $("#availability_status").ajaxComplete(function(event, request){ 

if(server_response == '0')
{ 
$("#availability_status").html('<img src="images/available.png" align="absmiddle">
  <font color="Green">Available </font>  ')
}  
else  if(server_response == '1')
{  
 $("#availability_status").html('<img src="images/not_available.png" align="absmiddle">
    <font color="red">Not Available </font>') 
 }  
     });
  } 

  }); 

  }
   else
   {

   $("#availability_status").html('<font color="#cc0000">Username too short</font>');
  }
  return false;
  });

   });
  </script> 
```

这段代码也很完美。

我想做的是集成两个代码块，以便只有在所有条件都为真时才启用提交按钮。换句话说，当复选框被选中并且用户名大于 5 个字符并且它不存在于数据库中时。

那么，这是一件容易的事吗？听起来应该是，但我不知所措（可能是过去两天看代码）。

谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T02:14:47.880

您希望复选框或名称的验证触发更改。鉴于您正在执行 Ajax 检查以查看用户名是否有效，我将设置一个标志以指示当前名称是否有效，以便 Ajax 仅在名称更改而不是复选框时运行。所以也许是这样的：

```
$(document).ready(function() {
    var usernameOK = false,   // I assume username starts out blank
        termsChecked = false;

    function setSubmitEnabling() {
        document.frm.sub.disabled = !(usernameOK && termsChecked);
    }

    $("#yourCBidHere").click(function() {
        termsChecked = this.checked;
        setSubmitEnabling();
    });

    $("#username").change(function() {
        var username = this.value;
        if(username.length <= 5) { //if the name too short
            $("#availability_status").html('<font color="#cc0000">Username too short</font>');
            usernameOK = false;
            setSubmitEnabling();
            return;
        }
        $("#availability_status").html('<img src="loader.gif" align="absmiddle">&nbsp;Checking availability...');
        usernameOK = false;
        setSubmitEnabling();
        $.ajax({
            type: "POST",  
            url: "ajax_check_username.php",  
            data: "username="+ username, 
            success: function(server_response){
                if(server_response == '0'){ 
                    $("#availability_status").html('<img src="images/available.png" align="absmiddle"><font color="Green">Available </font>');
                    usernameOK = true;
                } else if(server_response == '1') {  
                    $("#availability_status").html('<img src="images/not_available.png" align="absmiddle"><font color="red">Not Available </font>');
                    usernameOK = false;
                }
                setSubmitEnabling();
            }
        });
    });
}); 
```

# ruby-on-rails-3 - 任何人都可以想出任何方法来自定义 Rails3 上的电子邮件（Mailboxer gem's）模板视图？

> ID：11303303
> 
> 赞同：1
> 
> 时间：2012-07-03T01:20:57.680
> 
> 标签：ruby-on-rails-3, rubygems, gem

我目前在 rails3 上使用名为“Mailboxer”的 gem。每次，mailboxer 都会发送电子邮件，它似乎使用的是下面显示的模板。有谁知道如何自定义这个模板？

即使您安装了mailboxer，也不会产生视图，因此您无法自定义它！

```
You have a new message: subject

      You have received a new message:    

Body 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T04:17:42.390

```
rails g mailboxer:views 
```

将生成您需要的视图文件，以便您可以编辑它们。

# javascript - 淘汰赛抛出消息：TypeError： 不是函数。这是什么意思？

> ID：11303304
> 
> 赞同：4
> 
> 时间：2012-07-03T01:21:08.490
> 
> 标签：javascript, knockout.js

我有这个代码：

```
<ul id="chats" data-bind="foreach: chats">
   <li>
      <div class="chat_response" data-bind="visible: CommentList().length == 0">
        <form data-bind="submit: $root.addComment">
           <input class="comment_field" placeholder="Comment…" data-bind="value: NewCommentText" />
        </form>
      </div>
      <a class="read_more_messages" data-bind="visible: moreChats, click: showMoreChats">Read More Messages...</a>
   </li>
</ul>

function ChatListViewModel(chats) {
   // Data
   var self = this;

   self.chats = ko.observableArray(ko.utils.arrayMap(chats, function (chat) {
       return { CourseItemDescription: chat.CourseItemDescription,
           CommentList: ko.observableArray(chat.CommentList),
           CourseItemID: chat.CourseItemID,
           UserName: chat.UserName,
           ChatGroupNumber: chat.ChatGroupNumber,
           ChatCount: chat.ChatCount,
           NewCommentText: ko.observable("")
       };
   }));

   self.moreChats = ko.observable(true);

   self.showMoreChats = function () {
       var LastChatGroupNumber = self.chats()[self.chats().length - 1].ChatGroupNumber;

       $.ajax({
           url: $.CourseLogic.dataitem.GetMoreChatsUrl,
           data: "{chatGroupNumber: " + ko.toJSON(LastChatGroupNumber + 1) + "}",
           type: "post",
           contentType: "application/json",
           success: function (chats) {
               var chatList = self.chats();
               $.each(chats, function (index, chat) {
                   self.chats.push(chat);
               });
           }
       });
   }

}

ko.applyBindings(new ChatListViewModel(initialData)); 
```

但是当调用 showMoreChats 函数时出现此错误：

`Unable to parse bindings. Message: TypeError: CommentList is not a function; Bindings value: visible: CommentList().length == 0`

这是什么意思？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T01:53:55.147

并不是说 CommentList 是未定义的，只是它不是可观察的（因此不是函数）。原因是在您的 ajax 回调中，您只是“按原样”推送从服务器接收到的“聊天”对象。例如，您没有创建一个名为 CommentList 的新 observableArray，而只是放置了一个裸数组 CommentList - 因此 KO 抛出了错误。

您需要进行与在 viewmodel 构造函数中构造 self.chats 时相同的转换，例如：

```
$.each(chats, function(index, chat) {
    self.chats.push(
        {
            CourseItemDescription: chat.CourseItemDescription,
            CommentList: ko.observableArray(chat.CommentList),
            CourseItemID: chat.CourseItemID,
            UserName: chat.UserName,
            ChatGroupNumber: chat.ChatGroupNumber,
            ChatCount: chat.ChatCount,
            NewCommentText: ko.observable("")
        }
    );
}); 
```

顺便说一下，你还应该看看 ko.mapping 插件，它可以为你做这个转换。

**编辑**：此外，为了获得更好的性能，您不应将每个单独的项目推入可观察数组，而是将它们添加到一个批量操作中，例如：

```
self.chats( self.chats().concat( ko.utils.arrayMap(chats, function(chat) {
    return { /* ... same as before ... */ };
} ) ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-16T21:21:55.130

通过谷歌找到了这个问题，添加了我的案例以供参考。这真的，真的很愚蠢；然而这是我经常犯的疏忽造成的错误：

当使用其中一个`ko.utils`数组函数（arrayMap、arrayForEach、arrayFirst 等）时，当您*忘记指定源数组*时，Knockout 将抛出此错误，例如。当你这样做时：

```
ko.utils.arrayMap(function(item) { ... }) 
```

代替：

```
ko.utils.arrayMap(myArray, function(item) { ... }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T01:41:39.760

这意味着您的绑定无法检测到 CommentList，即 CommentList 在当前上下文中未定义。

# ruby-on-rails - Rails 找不到控制器动作

> ID：11303306
> 
> 赞同：1
> 
> 时间：2012-07-03T01:21:35.917
> 
> 标签：ruby-on-rails, model-view-controller, routes

所以，我有以下链接：

```
 <%= link_to(outing_add_guests_path, :class => 'modal') do %>
 <div id="notImportant"></div>
 <% end %> 
```

当我点击它时，Rails 告诉我

```
No route matches {:controller=>"outings", :action=>"add_guests"} 
```

但是，这是我的路线文件：

```
resources :outings do
  get "/add_guests" => "outings#add_guests"
  post "/add_guests" => "outings#add_guests"
  delete "/remove_guests" => "outings#remove_guests"
end 
```

以及我的 Outings Controller 的相应操作：

```
def add_guests
    @outing_guest = OutingGuest.new(:outing_id => params[:outing_id])
    @outing_guest.user_id = params[:user_id]
    if @outing_guest.save
        flash[:notice] = "Guest added successfully"
        redirect_to({ :action => 'outing', :id => params[:outing_id] })
    else
        flash[:notice] = "Guest could not be added"
        redirect_to({ :action => 'outing', :id => params[:outing_id] })
    end
end 
```

Rails 是否有任何原因无法检测到我的控制器或其操作？

编辑：这是 rake 路线的部分结果

```
 outing_add_guests GET    /outings/:outing_id/add_guests(.:format)                outings#add_guests
                              POST   /outings/:outing_id/add_guests(.:format)                outings#add_guests 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T01:25:42.170

我注意到您`link_to`的路线与其他路线不一致

```
outing_add_guests_path
outings_add_guests_path 
```

你有没有`rake routes`验证它的`outing_add_guests_path`存在？

编辑：

你的`rake routes`节目你需要一个`outing_id`所以你的路线设置不正确（至少不是为了POST）。我会按照@RyanBigg 建议的方式修复它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T01:29:56.550

您应该使用以下`collection`方法定义这些路由：

```
resources :outings do
  collection do
    get :add_guests
    post :add_guests
    delete :remove_guests
  end
end 
```

这将做的是为指定的操作定义新的路由，以及为这些路由自动定义路由助手。如需更多信息，请阅读[路由指南](http://guides.rubyonrails.org/routing.html)。

# java - 与 java 正则表达式匹配的所有重叠子字符串

> ID：11303309
> 
> 赞同：5
> 
> 时间：2012-07-03T01:22:20.317
> 
> 标签：java, regex, matcher

是否有一种 API 方法可以返回与正则表达式匹配的所有（可能重叠的）子字符串？

例如，我有一个文本字符串：`String t = 04/31 412-555-1235;`，我有一个模式：`Pattern p = new Pattern("\\d\\d+");`匹配两个或多个字符的字符串。

我得到的匹配是：04、31、412、555、1235。

如何获得重叠匹配？

我希望代码返回：04、31、41、412、12、55、555、55、12、123、1235、23、235、35。

理论上它应该是可能的——有一个明显的`O(n^2)`算法可以根据模式枚举和检查所有子字符串。

**编辑**

与其枚举所有子字符串，不如使用`region(int start, int end)`in 中的方法更安全`Matcher`。根据单独的提取子字符串检查模式可能会更改匹配结果（例如，如果在模式的开始/结束处存在非捕获组或单词边界检查）。

**编辑 2**

实际上，尚不清楚`region()`您对零宽度匹配的期望是否符合要求。规范含糊不清，实验结果令人失望。

例如：

```
String line = "xx90xx";
String pat = "\\b90\\b";
System.out.println(Pattern.compile(pat).matcher(line).find()); // prints false
for (int i = 0; i < line.length(); ++i) {
  for (int j = i + 1; j <= line.length(); ++j) {
    Matcher m = Pattern.compile(pat).matcher(line).region(i, j);
    if (m.find() && m.group().size == (j - i)) {
      System.out.println(m.group() + " (" + i + ", " + j + ")"); // prints 90 (2, 4)
    }
  }
} 
```

我不确定最优雅的解决方案是什么。一种方法是在检查是否匹配`line`之前获取一个子字符串并用适当的边界字符填充。`pat`

**编辑 3**

这是我想出的完整解决方案。它可以处理原始正则表达式中的零宽度模式、边界等。它查看文本字符串的所有子字符串，并通过在开头和结尾使用适当数量的通配符填充模式来检查正则表达式是否仅在特定位置匹配。它似乎适用于我尝试过的案例——尽管我没有进行广泛的测试。它肯定比它可能的效率低。

```
 public static void allMatches(String text, String regex)
  {
    for (int i = 0; i < text.length(); ++i) {
      for (int j = i + 1; j <= text.length(); ++j) {
        String positionSpecificPattern = "((?<=^.{"+i+"})("+regex+")(?=.{"+(text.length() - j)+"}$))";
        Matcher m = Pattern.compile(positionSpecificPattern).matcher(text);

        if (m.find()) 
        {   
          System.out.println("Match found: \"" + (m.group()) + "\" at position [" + i + ", " + j + ")");
        }   
      }   
    }   
  } 
```

**编辑 4**

这是一个更好的方法：[https ://stackoverflow.com/a/11372670/244526](https://stackoverflow.com/a/11372670/244526)

**编辑 5**

JRegex库支持查找[与](http://jregex.sourceforge.net/)java 正则表达式匹配的所有重叠子字符串（尽管它似乎有一段时间没有更新）。具体来说，[关于不间断搜索的文档](http://jregex.sourceforge.net/gstarted-advanced.html#imatching)指定：

> 使用不间断搜索，您可以找到模式的所有可能出现，包括那些相交或嵌套的模式。这是通过使用 Matcher 的方法 continue() 而不是 find() 来实现的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-09T09:48:41.717

我遇到了类似的情况，我尝试了上述答案，但在我的情况下，通过设置匹配器的开始和结束索引花费了太多时间，但我认为我找到了更好的解决方案，我将其发布在这里供其他人使用. 所以下面是我的代码片段。

```
if (textToParse != null) {
Matcher matcher = PLACEHOLDER_PATTERN.matcher(textToParse);
    while(matcher.hitEnd()!=true){
        Boolean result = matcher.find();
        int count = matcher.groupCount();
        System.out.println("Result " +result+" count "+count);
        if(result==true && count==1){
            mergeFieldName = matcher.group(1);
            mergeFieldNames.add(mergeFieldName);
           }
       }
  } 
```

我使用了 matcher.hitEnd() 方法来检查我是否已经到达文本的末尾。

希望这可以帮助。谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T11:14:23.167

**仅当您指定允许的数字长度范围时，**它才可行*O(n)* 。

 **假设从 2-4 位数字（*数字 00-9999*）：`(?=(\\d{2}))(?=(\\1\\d)?)(?=(\\2\\d)?)`

这是一个通过正向前瞻的零长度断言，将这种前瞻捕获到组中。结果是可以在正则表达式输入中找到的所有 2-4 位字符串的数组，以及重复字符串和空字符串（用于不匹配的捕获）。

我不是 Java 开发人员，但我相信 Perl 脚本也可以作为示例来阅读。

```
#!/usr/bin/perl                                       # perl script
use List::MoreUtils qw/ uniq /;                       # uniq subroutine library
$_ = '04/31 412-555-1235';                            # input
my @n = uniq (/(?=(\d{2}))(?=(\1\d)?)(?=(\2\d)?)/g);  # regex (single slash in Perl)
print "$_\n" for grep(/\S/, @n);                      # print non-empty lines 
```

诀窍是使用反向引用。如果您想捕获 2-5 位字符串，则需要在正则表达式中再使用一个正向前瞻：`(?=(\\d{2}))(?=(\\1\\d)?)(?=(\\2\\d)?)(?=(\\3\\d)?)`.

我相信这是您可以采用的最接近的方法。如果这对您有用，请发表评论，并希望一些 Java 开发人员会使用上述脚本的 Java 代码编辑我的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T03:21:08.310

你能得到的最接近的是这样的。

```
"(?=((\\d*)\\d))(?=(\\d)\\d*)" 
```

结果将在捕获组 1、2 和 3 中。

就我的想象而言，我只能将零长度断言中的捕获视为重新捕获字符串相同位置的可行方法。在零长度断言之外捕获文本将一劳永逸地消耗文本（look-behind 在 Java 中只能捕获固定长度，因此可以认为是不可访问的）。

这个解决方案并不完美：除了重复（相同位置的文本！）和空字符串匹配之外，它不会捕获所有可能的子字符串。

捕获所有可能的子字符串的一种方法是构造以下正则表达式，其值为从 1 开始的 n：

```
"(?=(\\d{" + n + "}))" 
```

并将字符串与此匹配以增加 n 的值，直到没有匹配。

这种方法当然比用“\d+”匹配所有数字并提取所有子串的方法效率低。**

# linux - Linux 逻辑卷管理器

> ID：11303311
> 
> 赞同：1
> 
> 时间：2012-07-03T01:22:24.653
> 
> 标签：linux, mount

我可以看到一个逻辑卷可以安装在两个不同的文件系统上——现在有人可以向我解释一下这样做的优缺点吗？为什么发生这种情况时 Linux 不会抛出错误？

前任：

```
/dev/mapper/vgEP0-lvol12
9.9G 9.2G 243M 98% /LSMW

/dev/mapper/vgEP0-lvol12
9.9G 9.2G 243M 98% /oracle/EP0/oraflash 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T02:47:23.610

在 Linux 中，一个设备可以被挂载多次。

来自 mount(2) 手册页

```
Since Linux 2.4 a single file system can be visible at multiple  mount
points, and multiple mounts can be stacked on the same mount point. 
```

# ajax - 稳定的 Spring 版本发布

> ID：11303312
> 
> 赞同：0
> 
> 时间：2012-07-03T01:22:26.930
> 
> 标签：ajax, spring, spring-mvc, version, spring-3

现在我正在尝试研究 Spring 版本现在的稳定性。我在确定最新的 Spring 版本（3.1.1）是否是基础架构的最佳选择时遇到问题。3.0和3.1有什么区别吗？如果是这样，在编码结构方面是否有任何影响，就像从 Spring 2.0 迁移到 3.0 一样。目前我们有一个 Spring 2.0 的基础架构，我们正在考虑迁移到 3.X 以实现集成 AJAX 支持和集成 REST 支持。迁移到 3.X 还有其他好处吗？迁移到 Spring 3.0 是个好主意吗？如果是，那么迁移到哪个版本最适合迁移是否有任何缺点？感谢您花时间阅读本文，祝您有美好的一天。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T01:28:58.033

> 3.0和3.1有什么区别吗？

[http://static.springsource.org/spring/docs/3.1.x/changelog.txt](http://static.springsource.org/spring/docs/3.1.x/changelog.txt)

编辑：好的，这太技术性了，试试这个：

[http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/new-in-3.1.html](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/new-in-3.1.html)

编辑 2：不，您不必**使用**注释。这只是一个方便的功能。

编辑 3：在[实现控制器](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-controller)中，所有基于注释的配置都有其基于 XML 模式的对应项。也就是说，除非您有充分的理由反对注释，否则您可能会尝试逐渐切换到这种范式，因为它更易于阅读，因此更易于维护。（至少在我看来）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T01:28:08.970

我已经将一些项目从 spring 2.5.6 迁移到 spring-3.1 没有任何重大问题。我无法与 spring-3.1.1 交谈，但如果它是一个非里程碑版本，我会很乐意升级自己。

这是 spring-3.1 功能的链接： http: [//static.springsource.org/spring/docs/3.1.0.M2/spring-framework-reference/html/new-in-3.1.html](http://static.springsource.org/spring/docs/3.1.0.M2/spring-framework-reference/html/new-in-3.1.html)

如果您从 2.x 升级到 3.x，我看不出有任何理由不升级到 3.1，即使您看不到 3.1 功能的立即使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T01:40:02.200

是的，Spring 3.0 和 3.1 之间有一些细微的差异，其中一些在[Pro Spring 3](http://www.apress.com/9781430241072)中得到了很好的记录，基本上 JPA​​ 支持已经通过`spring-data`项目等辅助功能得到改进，支持一些符合标准的 Java EE 注释和在您的 xml 配置中创建 bean [“配置文件”](http://blog.frankel.ch/spring-profiles-or-not-profiles)的可能性，当与 maven 一起使用时可以很方便，以及其他功能。

如果您坚持基于旧`xml`的配置 ，从 2.0 迁移到 3.x 应该不会有问题

# android - ExpandableListView 显示没有子组的指示符

> ID：11303314
> 
> 赞同：5
> 
> 时间：2012-07-03T01:23:00.653
> 
> 标签：android, expandablelistview, android-cursor

我正在`ExpandableListView`使用数据库中的数据创建一个。为此，我使用 a并用一个包含我从数据库检索的数据`CursorTreeAdapter`的对象填充它。`Cursor`

我认为，默认情况下，Android 会考虑没有孩子的组*"不可扩展"*。

但是它仍然在行上显示展开图标，当我单击它时，它什么也不做。我不希望它显示这个图标。

**我只希望有孩子的组显示展开图标，这不会发生。它显示所有行的展开图标（有子行和没有子行的行）。**

* * *

**更新**

我研究了我的代码，我发现问题基本上在于`groupIndicator`为组设置。但是我尝试了很多方法，例如创建选择器并根据状态设置它的可绘制和可扩展，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_empty="true"
          android:state_expanded="false"
          android:drawable="@android:color/transparent"/>
    <item android:drawable="@drawable/expander_ic_maximized" />
</selector> 
```

但是，当组折叠时，它会隐藏所有组，包括有孩子的组（因为 Android 将折叠组识别为空）。

有没有更好的方法只为有孩子的群体设置指标？

* * *

这是我的代码。

```
public class ContactsExpandableListAdapter extends CursorTreeAdapter 
{

    TextView mContactNameTextView, mContactNumberTextView;
    Cursor mChildrenCursor = null;

    public ContactsExpandableListAdapter(Cursor cursor, Context context) 
    {
        super(cursor, context);
    }

    @Override
    protected Cursor getChildrenCursor(Cursor cursor) 
    {
        if(mContactId == -1)
            mContactId = null;

        return mController.getContactById(mContactId);
    }

    public int getChildrenCount(int groupPosition)
    {
        return mChildrenCursor.getCount();
    }

    @Override
    protected View newGroupView(Context context, Cursor cursor, boolean paramBoolean, ViewGroup viewGroup) 
    {
        View view = LayoutInflater.from(context).inflate(R.layout.filterbycontact, viewGroup, false);

        mContactNameTextView = (TextView) view.findViewById(R.id.contact_name);

        if(cursor.getString(cursor.getColumnIndex("contact_name")) == null)                   mContactNameTextView.setText(cursor.getString(cursor.getColumnIndex("contact_number")));
            else
                mContactNameTextView.setText(cursor.getString(cursor.getColumnIndex("contact_name")));
            view.setTag(cursor.getString(cursor.getColumnIndex("contact_id")));
            return view;
        }

        @Override
        protected View newChildView(Context context, Cursor cursor, boolean paramBoolean, ViewGroup viewGroup) 
        {
            View view = LayoutInflater.from(context).inflate(R.layout.filterbycontact, viewGroup, false);

            if(cursor.getString(cursor.getColumnIndex("contact_name")) == null)
            {
                mContactNameTextView = (TextView) view.findViewById(R.id.contact_name);
                mContactNameTextView.setText(cursor.getString(cursor.getColumnIndex("contact_number")));
            }
            else
            {
                mContactNumberTextView = (TextView) view.findViewById(R.id.contact_number);
                mContactNumberTextView.setText(cursor.getString(cursor.getColumnIndex("contact_number")));
            }

            view.setTag(cursor.getString(cursor.getColumnIndex("contact_number")));
            return view;
        }

        @Override
        protected void bindGroupView(View view, Context paramContext, Cursor cursor, boolean paramBoolean) 
        {
            mContactNameTextView = (TextView) view.findViewById(R.id.contact_name);
            if(cursor.getString(cursor.getColumnIndex("contact_name")) == null)
                mContactNameTextView.setText(cursor.getString(cursor.getColumnIndex("contact_number")));
            else
                mContactNameTextView.setText(cursor.getString(cursor.getColumnIndex("contact_name")));

view.setTag(cursor.getString(cursor.getColumnIndex("contact_id")));
        }

        @Override
        protected void bindChildView(View view, Context context, Cursor cursor, boolean paramBoolean) 
        {
            if(cursor.getString(cursor.getColumnIndex("contact_name")) == null)
            {
                mContactNameTextView = (TextView) view.findViewById(R.id.contact_name);
                mContactNameTextView.setText(cursor.getString(cursor.getColumnIndex("contact_number")));
            }
            else
            {
                mContactNumberTextView = (TextView) view.findViewById(R.id.contact_number);
                mContactNumberTextView.setText(cursor.getString(cursor.getColumnIndex("contact_number")));
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-04T03:44:52.460

在您的 xml 中将以下内容添加到 ExpandableListView：

```
 android:groupIndicator="@android:color/transparent" 
```

适配器中的每个组项视图都需要其内部指示器。例如，您可以在 .xml 的右侧添加一个 ImageView。

然后在适配器中执行以下操作：

```
@Override
protected void bindGroupView(View view, Context paramContext, Cursor cursor, boolean paramBoolean) 
    ...

    if (getChildrenCount(groupPosition) > 0) {
        viewHolder.indicator.setVisibility(View.VISIBLE);
        viewHolder.indicator.setImageResource(
                isExpanded ? R.drawable.indicator_expanded : R.drawable.indicator);
    } else {
        viewHolder.indicator.setVisibility(View.GONE);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-03T10:06:35.960

在您的适配器类中使用：

```
public View getGroupView(int groupPosition, boolean isExpanded, View convertView,ViewGroup parent) 
{
    if (getChildrenCount(groupPosition) == 0 ) {
           indicator.setVisibility( View.INVISIBLE );
    } 
    else {
           indicator.setVisibility( View.VISIBLE );
           indicator.setImageResource( isExpanded ? R.drawable.group_expanded : R.drawable.group_closed );
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T02:11:04.093

为什么不把没有孩子的团体排除在外呢？

更改您的查询，只为您提供将有孩子的组。

# java - 多线程场景中的数据可见性

> ID：11303315
> 
> 赞同：3
> 
> 时间：2012-07-03T01:23:01.527
> 
> 标签：java, android, multithreading, concurrency, synchronized

另一个场景，基于前面的问题。在我看来，它的结论将足够笼统，对广大受众有用。[从这里](https://stackoverflow.com/questions/8324064/java-arrays-synchronized-atomic-or-synchronized-suffices)引用彼得劳里：

> synchronized 使用内存屏障，确保所有内存都处于该线程的一致状态，无论它是否在块内引用。

首先，我的问题只涉及**数据可见性**。也就是说，我的软件已经保证了原子性（“操作同步”），因此*每个写操作都在对同一值的任何读操作之前完成*，反之亦然，依此类推。所以问题只是关于线程可能缓存的值。

考虑 2 个线程，*threadA*和*threadB*以及以下类：

```
public class SomeClass {

private final Object mLock = new Object();    
// Note: none of the member variables are volatile.

public void operationA1() {
   ... // do "ordinary" stuff with the data and methods of SomeClass

     /* "ordinary" stuff means we don't create new Threads,
         we don't perform synchronizations, create semaphores etc.
     */
}

public void operationB() {
  synchronized(mLock) {
     ...
     // do "ordinary" stuff with the data and methods of SomeClass
  }
}

// public void dummyA() {
// synchronized(mLock) {
//    dummyOperation();
//  }
// }

public void operationA2() {
   // dummyA();  // this call is commented out

   ... // do "ordinary" stuff with the data and methods of SomeClass
}
} 
```

已知事实（它们来自我的软件架构）：

*   `operationA1()`并由*threadA*`operationA2()`调用，由*threadB调用**`operationB()`*
***   `operationB()`是这个类中*threadB*调用的**唯一方法。**请注意，它位于同步块中。*`operationB()`***   **非常重要**：保证这些操作按以下逻辑顺序调用：`operationA1()`, `operationB()`, `operationA2()`. 保证在调用前一个操作之前完成每个操作。这是由于更高级别的架构同步（消息队列，但现在无关紧要）。正如我所说，我的问题纯粹与*数据可见性*有关（即数据副本是最新的还是过时的，例如由于线程自己的缓存）。***

 **根据 Peter Lawrey 的名言，内存屏障 in`operationB()`确保所有内存在`threadB`期间保持一致状态`operationB()`。因此，例如如果*threadA*改变了一些值`operationA1()`，这些值将在*threadA*启动时从cache中写入主存`operationB()`。**问题#1**：这是正确的吗？

**问题 #2**：当`operationB()`离开内存屏障时，由 threadB 更改的值`operationB()`（并且可能由*threadB*缓存）将被写回主内存。**但是 operationA2() 不会是安全**的，因为没有人要求*threadA*与主内存同步，对吧？`operationB()`因此，现在在主内存中的更改并不重要，因为*threadA*可能仍然具有`operationB()`调用前一次的缓存副本。

**问题 #3**：如果我在 Q.#2 中的怀疑是真的，那么再次检查我的源代码并取消注释方法`dummyA()`，并取消注释中的`dummyA()`调用`operationA2()`。我知道这在其他方面可能是不好的做法，但这有什么不同吗？我的（可能是错误的）假设如下：`dummyA()`将导致*threadA*从主内存更新其缓存数据（由于`mLock`同步块），因此它将看到由`operationB()`. 也就是说，现在一切都安全了。另外，方法调用的逻辑顺序如下：

1.  `operationA1()`
2.  `operationB()`
3.  `dummyA()`
4.  `operationA2()`

我的结论：由于 中的同步块`operationB()`，*threadB*将看到之前可能已更改的数据的最新值（例如在 中`operationA1()`）。由于 中的同步块`dummyA()`，*threadA*将看到在 中更改的数据的最新副本`operationB()`。这个思路有什么错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T02:14:54.970

一般来说，您对问题 2 的直觉是正确的。在操作 A2 开始时使用 synchronized(mLock) 将发出一个内存屏障，这将确保操作 A2 的进一步读取将看到操作 B 执行的写入，由于使用 synchronized( mLock) 运行中 B.

但是，要回答问题 1，请注意 operationB 可能看不到 operationA1 执行的任何写入，除非您在 operationA1 的末尾插入完整的内存屏障（即，没有任何东西告诉系统从 operationA1 线程的缓存中刷新值）。因此，您可能希望在 operationA1 结束时调用 dummyA。

为了完全安全和更易于维护，并且由于您声明这些方法的执行不相互重叠，您应该将所有共享状态的操作包含在 synchronized(mLock) 块中，而不会损失性能。**

# jquery - Jquery Lightbox Like Facebook 和 Google + Photo Viewer

> ID：11303321
> 
> 赞同：2
> 
> 时间：2012-07-03T01:24:34.147
> 
> 标签：jquery, ruby-on-rails, fancybox, lightbox

我还没有真正找到任何好的解决方案

我有一个带有图片库的 Rails 3 网站。每张图片都有评论

我想将图像和评论加载到 FancyBox 或 Lightbox 中，并像 Facebook 和 Google + 一样显示评论

实现这一目标的最佳方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T02:30:13.063

我刚刚玩了一点[lightboxme](http://buckwilson.me/lightboxme/)并想出了这个简单的例子来说明如何制作它。请注意，您必须实现从一个图像更改为另一个图像的所有样式和流程。

[http://jsfiddle.net/eKuhH/1/](http://jsfiddle.net/eKuhH/1/)

# ios - 如何为 iOS 解析正确格式化 XML

> ID：11303323
> 
> 赞同：0
> 
> 时间：2012-07-03T01:24:50.280
> 
> 标签：ios, xml, nsxmlparser

我正在编写一些代码来将问题解析为对象。我正在使用 NSXMLParser。问题是，我也格式化了自己的 XML 数据，我认为是不正确的。

```
<?xml version="1.0" encoding="UTF-8"?>
<factor value="1">
    <key value="plus">
        <question>PLACEHOLDER_TEXT</question>
        <question>PLACEHOLDER_TEXT</question>
        <question>PLACEHOLDER_TEXT</question>
        <question>PLACEHOLDER_TEXT</question>
        <question>PLACEHOLDER_TEXT</question>

    </key>
    <key value="minus">
        <question>PLACEHOLDER_TEXT</question>
        <question>PLACEHOLDER_TEXT</question>
        <question>PLACEHOLDER_TEXT</question>
        <question>PLACEHOLDER_TEXT</question>

    </key>
</factor>
<factor value="2">
    <key value="plus">
        <question>PLACEHOLDER_TEXT</question>
        <question>PLACEHOLDER_TEXT</question>
        <question>PLACEHOLDER_TEXT</question>
        <question>PLACEHOLDER_TEXT</question>
        <question>PLACEHOLDER_TEXT</question>
    </key>
    <key value="minus">
        <question>PLACEHOLDER_TEXT</question>
        <question>PLACEHOLDER_TEXT</question>
        <question>PLACEHOLDER_TEXT</question>
        <question>PLACEHOLDER_TEXT</question>
        <question>PLACEHOLDER_TEXT</question>
    </key>
</factor> 
```

那就是我正在解析的xml。问题进行到一半，解析器给了我 `Error Domain=NSXMLParserErrorDomain Code=5 "The operation couldn’t be completed. (NSXMLParserErrorDomain error 5.)"`

我的问题：如何格式化，以便正确解析整个文档。最终结果是拥有一个问题托管对象，其属性为：key 和 factor。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T01:28:38.033

你有两个根元素，`<factor>`. 格式良好的 XML 文档只能有一个根元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T01:31:00.633

我建议将所有`<factor>`内容放入一个名为的根标签`<factors>`中，以便您可以对其进行迭代以获取所有内容`<factor>`

# ocaml - 加号运算符的 OCaml 类型

> ID：11303327
> 
> 赞同：6
> 
> 时间：2012-07-03T01:25:34.520
> 
> 标签：ocaml

为什么认为加号 (+) 的类型与`int -> int -> int`相对`(int * int) -> int`？对我来说，第二个是有意义的，因为它“接受”一个 2 元组（加数）并返回一个`int`（它们的总和）。

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-03T01:42:52.467

您可以制作一种`(+)`具有 type的语言`(int * int) -> int`。事实上，SML 正是以这种方式工作的。它只是影响中缀运算符的含义。然而，OCaml 约定强烈支持使用 curried 函数（类型`a -> b -> c`）而不是非curried 函数。一个不错的结果是您可以部分应用它们。例如 ((+) 7) 是一个有意义的 type 表达式`int -> int`。我发现这个符号经常很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T01:29:07.990

这可能看起来有点无用，但这是因为该函数需要两个参数。

当一个函数接受一个元组时，它实际上接受一个参数。

因为`(+)`是一个内联函数，所以采用单个参数将没有用，因为它看起来`+ (1,2)`与`1 + 2`.

# ruby-on-rails - 否决 attr_accessible 的“正确方法”

> ID：11303331
> 
> 赞同：2
> 
> 时间：2012-07-03T01:26:43.507
> 
> 标签：ruby-on-rails, security

我的模型包含一个“管理”字段，它是真或假。它不在“attr_accessible”上，因为我们不希望坏人能够欺骗我们的控制器向用户提供“管理员”权限。

因为，如果我在我的模型中以管理员身份登录，我“确实”希望能够更新任何用户的记录以创建或取消他们的管理员。所以......管理员缺少 attr_accessible 阻止我这样做。

也许这不是看待它的正确方式。处理这种情况的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T01:35:24.767

Rails 3.2 添加了一个功能，可以让你做你所描述的事情。只需在您的模型中定义它：

```
attr_accessible accessible_attributes + [:admin], :as => :admin 
```

然后在要分配 admin 属性的控制器中，执行以下操作：

```
User.new(params[:user], :as => :admin) 
```

或者

```
user.update_attributes(params[:user], :as => :admin) 
```

`attr_accessible`在调用之前列出的所有属性都将是支持该选项`:as => :admin`的任何 Active Record 调用的可访问属性。`:as => :admin`

如果您没有调用`accessible_attributes`该定义，则只能访问那里定义的属性。

# mysql - 从 XML Paradox 导入 CoreData

> ID：11303333
> 
> 赞同：0
> 
> 时间：2012-07-03T01:26:51.807
> 
> 标签：mysql, objective-c, core-data

我有一个 mysql 数据库，它有几个表，一些表通过 ID 字段与其他表相关。现在我正在尝试将此数据导入我的应用程序，并且我希望能够使用 CoreData 的关系属性。当我导入我的数据（通过 XML）时，问题就出现了，而所有关系都在 XML 中定义，有些关系比其他关系晚。

处理导入后链接关系的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T10:34:11.773

听起来好像您需要解析 XML 两次，一次是为了创建实体，一次是为了创建它们之间的关系。

# linux - 输入一串字符并输出为大写

> ID：11303336
> 
> 赞同：1
> 
> 时间：2012-07-03T01:27:00.780
> 
> 标签：linux, assembly, io, x86, nasm

我正在尝试编写一个程序，它将小写字符串转换为大写，使用缓冲区来存储初始字符串。我遇到的问题是我的程序将打印出一个无限循环的字符，这些字符必须与我给它的字符串相似。

我认为代码中存在的其他问题如下：

*   一些子程序`ret`在调用结束时使用。我遇到的问题是弄清楚这些子例程中的*哪些*实际上不需要 a `ret`，并且更好地与`jmp`. 老实说，我在这两者的语义之间有点困惑。例如，调用 with 的子例程`ja`是否需要`ret`在调用结束时 'ed ？

*   我还试图打印出用于转换值的循环的每次迭代中发生的迭代次数。无论出于何种原因，我都会`inc`反击并决定用`PrintNumIter`例程打印它，唉，不幸的是，它没有做任何事情。

完整的程序如下。

**编码器**

```
bits 32

[section .bss]

        buf: resb 1024                  ;allocate 1024 bytes of memory to buf

[section .data]

        ;*************
        ;* CONSTANTS *
        ;*************

        ;ASCII comparison/conversion

        LowercaseA:     equ 0x61
        LowercaseZ:     equ 0x7A
        SubToUppercase: equ 0x20

        ;IO specifiers/descriptors

        EOF:            equ 0x0

        sys_read:       equ 0x3
        sys_write:      equ 0x4

        stdin:          equ 0x0
        stdout:         equ 0x1
        stderr:         equ 0x2

        ;Kernel Commands/Program Directives

        _exit:          equ 0x1
        exit_success:   equ 0x0
        execute_cmd:    equ 0x80

        ;Memory Usage

        buflen:         equ 0x400   ;1KB of memory

        ;*****************
        ;* NON-CONSTANTS *
        ;*****************

        iteration_count:    db 0
        query :             db "Please enter a string of lowercase characters, and I will output them for you in uppercase ^.^: ", 10   
        querylen :          equ $-query

[section .text]

    global _start
;===========================================
;             Entry Point
;===========================================

_start:
        nop                                         ;keep GDB from complaining
        call    AskUser 
        call    Read
        call    SetupBuf
        call    Scan
        call    Write
        jmp     Exit

;===========================================
;           IO Instructions
;===========================================

Read:
        mov     eax, sys_read                       ;we're going to read in something
        mov     ebx, stdin                          ;where we obtain this is from stdin
        mov     ecx, buf                            ;read data into buf
        mov     edx, buflen                         ;amount of data to read

        int     execute_cmd                         ;invoke kernel to do its bidding
        ret

Write:
        mov     eax, sys_write                      ;we're going to write something
        mov     ebx, stdout                         ;where we output this is going to be in stdout
        mov     ecx, buf                            ;buf goes into ecx; thus, whatever is in ecx gets written out to
        mov     edx, buflen                         ;write the entire buf

        int     execute_cmd                         ;invoke kernel to do its bidding
        ret

AskUser:
        mov     eax, sys_write
        mov     ebx, stdout
        mov     ecx, query
        mov     edx, querylen   

        int     execute_cmd
        ret

PrintNumIter:
        mov     eax, sys_write
        mov     ebx, stdout
        push    ecx                                 ;save ecx's address
        mov     ecx, iteration_count                ;print the value of iteration_count
        mov     edx, 4                              ;print 4 bytes of data

        int     execute_cmd
        pop     ecx                                 ;grab the value back in
        ret
;===========================================
;           Program Preperation
;===========================================

SetupBuf:
        mov     ecx, esi                        ;place the number of bytes read into ecx
        mov     ebp, buf                        ;place the address of buf into ebp
        dec     ebp                             ;decrement buf by 1 to prevent "off by one" error
        ret                                         

;===========================================
;           Conversion Routines     
;===========================================

ToUpper:
        sub     dword [ebp + ecx], SubToLowercase   ;grab the address of buf and sub its value to create uppercase character

Scan:
        call    PrintNumIter                        ;print the current iteration within the loop

        cmp     dword [ebp + ecx], LowercaseA       ;Test input char against lowercase 'a'
        jb      ToUpper                             ;If below 'a' in ASCII, then is not lowercase - goto ToLower

        cmp     dword [ebp + ecx], LowercaseZ       ;Test input char against lowercase 'z'
        ja      ToUpper                             ;If above 'z' in ASCII, then is not lowercase - goto ToLower

        dec     ecx                                 ;decrement ecx by one, so we can get the next character
        inc     byte [iteration_count]              ;increment the __value__ in iteration count by 1
        jnz     Scan                                ;if ecx != 0, then continue the process
        ret

;===========================================

;Next:
;       dec     ecx                             ;decrement ecx by one
;       jnz     Scan                            ;if ecx != 0 scan
;       ret

;===========================================

Exit:
        mov     eax, _exit
        mov     ebx, exit_success

        int     execute_cmd 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T07:54:12.060

您的问题直接归因于这样一个事实，即您在完成处理后永远不会将 nul 终止符附加到字符串缓冲区的末尾（据我所知，`read`系统调用不会读回 null）。

不幸的是，由于您的控制流程奇怪，这有点难做，但是更改`SetupBuf`应该可以解决问题（注意，您可能应该检查您是否没有溢出`buf`，但是对于 1KB，我怀疑您是否需要担心学习计划）：

```
SetupBuf:
        mov     ecx, esi                        
        mov     ebp, buf
        mov     [ebp+ecx],0  ;make sure the string is nul terminated            
        dec     ebp                             
        ret 
```

请注意

关于另一个似乎困扰你的代码的问题（你已经恰当地注意到了），你奇怪的控制流。如此简单的指南（注意：不是规则，只是指南），希望能帮助您减少意大利面条代码：

*   `JMP`（和条件跳转）只能用于在同一过程中转到标签，否则您将开始陷入绑定，因为您无法放松。你唯一可以使用跳转的时间是尾调用，但在这个阶段你不应该担心这个，它更混乱。

*   `CALL`当你要去另一个过程时总是使用，这可以让你用`RETN`/`RET`指令正确地返回调用站点，使控制流更加合乎逻辑。

一个简单的例子：

```
print_num: ;PROC: num to print in ecx, ecx is caller preserved
    push ecx
    push num_format ; "%d\n" 
    call _printf
    sub esp,8 ;cleanup for printf
    retn

print_loop_count: ;PROC: takes no args
    mov ecx,0x10 ;loop 16 times

do_loop: ;LABEL: used as a jump target for the loop
         ;good idea to prefix jump lables with "." to differentiate them
   push ecx ;save ecx
   call print_num ;value to print is already in ecx
   pop ecx ;restore ecx
   dec ecx
   jnz do_loop ;again?

   retn 
```

# scala - scala中的int除法

> ID：11303337
> 
> 赞同：21
> 
> 时间：2012-07-03T01:27:06.427
> 
> 标签：scala

我`Int`在 Scala 中有两个值。

```
scala> val a = 3
a: Int = 3

scala> val b = 5
b: Int = 5 
```

现在，我想将它们分开并获得浮点数。尽可能少的样板。

如果我这样做`a/b`，我会得到

```
scala> a/b
res0: Int = 0 
```

我不能做简单的 Java `(float)`。

```
scala> ((Float)a)/b
<console>:9: error: value a is not a member of object Float
              ((Float)a)/b
                      ^ 
```

我应该怎么办？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-07-03T01:28:03.243

以下行及其结果应该可以解决您的问题。

```
scala> a.toFloat/b
res3: Float = 0.6 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-07-03T01:54:21.930

使用类型归属的替代答案：

```
scala> (a:Float)/b
res0: Float = 0.6 
```

# domain-driven-design - DDD/CQRS：持久化的地方

> ID：11303338
> 
> 赞同：3
> 
> 时间：2012-07-03T01:27:09.393
> 
> 标签：domain-driven-design, cqrs

我们最近开始使用 DDD 和 CQRS（无事件溯源）的概念开发应用程序。我仍然对在哪里调用存储库来保存我的聚合根感到有些困惑。

我是在命令处理程序中执行，还是在事件处理程序中执行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T08:33:21.747

您在命令处理程序中执行此操作。您可以正常保存域对象。即使您没有使用事件溯源作为持久化域实体的一种方式，您仍然需要触发查询服务将订阅的事件。然后，读取端的事件处理程序将更新为 UI 屏幕定制的非规范化表。所以基本上你有两组数据访问代码：一组用于域，一组用于查询服务（读取端）。如果您使用事件溯源来持久化您的域实体，它的工作量就会减少......

# javascript - JQuery - 将光标放在文本区域的末尾，当它聚焦时

> ID：11303339
> 
> 赞同：1
> 
> 时间：2012-07-03T01:27:20.237
> 
> 标签：javascript, jquery, forms

首先，你们中的一些人可能会注意到我在删除这个问题后重新发布了这个问题。这是因为它被一个懒得检查的人错误地标记为重复——他链接的问题是关于一个`<input>`元素的；该解决方案不适用于textareas。

无论如何，请考虑以下代码：

```
<!DOCTYPE html>
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
function caek() {
    $('textarea[name=txt1]').val("cake");
    $('textarea[name=txt1]').focus();
}
</script>
</head>
<body>
<div id="bar"></div>
<form name="frm1" id="cake">
<textarea name="txt1"></textarea>
</form>
<input type="button" value="Activate"
onclick="caek()">
</body>
</html> 
```

当你运行它时，你会注意到光标被推到文本区域的开头，在文本之前。我怎样才能让它*在*所有文本之后出现在文本区域的末尾？非内联解决方案将是最佳的，但任何事情都可以。

一个独立的解决方案（没有插件等）将是完美的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T01:33:48.580

这对我有用。

```
function caek() {
    txtArea = $('textarea[name=txt1]');
    txtArea.val("cake");
    txtArea.focus();    
    tmpStr = txtArea.val();
    txtArea.val('');
    txtArea.val(tmpStr);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T01:39:54.577

这行得通。

```
$ta.text($ta.text()).focus() 
```

**演示：http:** [//jsfiddle.net/elclanrs/WWsBa/](http://jsfiddle.net/elclanrs/WWsBa/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T01:30:56.147

您可以使用[rangyinputs](http://code.google.com/p/rangyinputs/) jQuery 插件以跨平台的方式执行此操作。

这里有一个演示：

[http://rangyinputs.googlecode.com/svn/trunk/demos/textinputs_jquery.html](http://rangyinputs.googlecode.com/svn/trunk/demos/textinputs_jquery.html)

将开始和结束设置为相同的数字，它会将光标设置到该点（尽管它不会聚焦文本区域，因此您必须使用标签进入它才能看到效果）。在您的情况下，您希望将其设置为文本的长度。

# c - 使用 C 语言使用 Visual HAM 进行 GBA 编程

> ID：11303340
> 
> 赞同：0
> 
> 时间：2012-07-03T01:27:49.777
> 
> 标签：c, makefile, game-boy-advance

我对使用 C 语言中的 Visual HAM IDE 为 Game Boy Advance 进行编程很感兴趣。但是，每次构建项目时，我都会收到一条消息：

```
'make.exe' is not recognized as an internal or external command,
operable program or batch file. 
```

我下载了 GnuWin32 并制作。然后，在 ham 可视化编辑器中，我单击高级选项并将 MAKE_MODE 的目录（我猜是某种环境变量）设置为 make 程序所在的目录。

关于如何让它工作的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T10:04:12.923

我有同样的问题。从一开始就将hole vham 包重新安装到所需的目的地。你可以在这里找到它：www.jharbour.com/gba/ham-280-full-win32.zip

您不能移动文件夹。即使您更改 PATH 变量，此问题也会持续存在。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-03T01:39:39.160

在你的系统上找到 make 程序所在的位置。可能在 cygwin 的 /usr/bin 中。将该路径添加到您的系统 dos 路径。

带有 cygwin 的 Windows 是一个搞砸的混合系统。您可能同时有三个路径。你有一个cygwin。如果你打开一个 cygwin shell 并输入 make 我敢打赌它会找到 make 程序。然后如果你打开一个dos shell（在附件/命令提示中）我敢打赌它不会找到make程序。

您将需要添加它。每个版本的 windows 都不同，但通常是在我的计算机/属性/高级/环境变量上右键单击。您需要在此处添加它。

最后，您的ide（可能）知道了这条路径。我不认识 HAM，但看起来你已经按照他们说的做了。

完成后，您应该能够从 windows/dos 命令提示符调用“make”。

# javascript - jQuery初始化

> ID：11303341
> 
> 赞同：0
> 
> 时间：2012-07-03T01:27:56.850
> 
> 标签：javascript, jquery

我正在尝试在我的网站上加载 Jplayer。说明说使用此代码初始化插件：

```
$('body').ttwVideoPlayer(myPlaylist, {options}); 
```

我在哪里放置此代码？

播放器正确加载并且脚本工作，但不会播放播放列表功能中的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T01:33:42.363

我通常会将所有初始化代码放在一个`$(document).ready`处理程序中。

```
$(document).ready(function() {
    $('body').ttwVideoPlayer(myPlaylist, {options});
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T01:36:27.043

您发布的代码应包含在您正在使用的适当处理程序中，例如

```
<script type="text/javascript" language="javascript">
     $(document).ready(function(){
          $('body').ttwVideoPlayer(myPlaylist, {options});
     });
</script> 
```

不要忘记添加适当的 jQuery 库以使其正常工作。

# c++ - 具有相同索引的数组已更改而未重新分配

> ID：11303342
> 
> 赞同：0
> 
> 时间：2012-07-03T01:28:03.180
> 
> 标签：c++, arrays, loops

我在使用这个程序时遇到了问题。它的目的是读取一个单词列表，然后输入这个单词有多长，从这个长度的单词中，计算其中所有字母的总和，按最高频率排序，然后询问使用频率最高的用户。在它询问之前，它会检查该字母是否已经被询问是否在数组 prevguess 中循环。我的问题是，如果我输入“yesletter”为真，则该数组的内容会在内联注释“此处发生问题”之后的位置发生更改。我输入的这个测试循环中 q 的值没有改变，但值本身会改变。

我知道 main 中的循环现在是无限的，但是程序还没有完成。

```
#include <iostream>
#include <string>
#include <fstream>
using namespace std;

int i(0),n(0),counter(0),limit(0),length,mastercount(0);
int acount(0),bcount(0),ccount(0),dcount(0),ecount(0),fcount(0),gcount(0),hcount(0);
int icount(0),jcount(0),kcount(0),lcount(0),mcount(0),ncount(0),ocount(0),pcount(0);
int qcount(0),rcount(0),scount(0),tcount(0),ucount(0),vcount(0),wcount(0),xcount(0),ycount(0),zcount(0);
int letters[2][26];
char prevguess[26];
char words[60000][30];

void initarray() {

    int len(0);
    string line;
    char temp;

    ifstream wordlist ("words.txt");

    if (wordlist.is_open())
    {
        while (wordlist.good())
        {
            getline (wordlist,line);
            len=line.length();

            for (n=0;n<30;n++)
            {
                if (n<len){
                    temp=line.at(n);
                    words[i][n]=temp;
                }
                else{
                    words[i][n]='*';
                }
            }

            i++;
            counter++;
        }
    }
    else
    {
        cout<<"file not opened";
    }
    wordlist.close();
}

void selectlength()
{
    int x(0),y(0);
    bool shorter(false),longer(false);

    cout <<"length of word"<<endl;
    cin >> length;

    limit=counter;
    counter=0;

    for (i=0;i<limit;i++){

        shorter=false;
        longer=false;

        for (n=0;n<length;n++){
            if (words[i][n]=='*')
            {
                shorter=true;
                break;
            }
        }

        if (words[i][length] != '*')
        {
            longer=true;
        }

        if (!longer && !shorter)
        {
                n=0;
                for (y=0;y<30;y++)
                {
                    if (n<length){
                        words[x][y]=words[i][n];
                        n++;
                    }
                    else{
                        words[x][y]='*';
                    }
                }
                x++;
                counter++;

        }

    }
}

void mostletters(){
    char temp;

    for (i=0;i<counter;i++){
        for (n=0;n<=length;n++){

            temp=words[i][n];
            switch (temp){
                case 'a':
                    acount++;
                    break;
                case 'b':
                    bcount++;
                    break;
                case 'c':
                    ccount++;
                    break;
                case 'd':
                    dcount++;
                    break;
                case 'e':
                    ecount++;
                    break;
                case 'f':
                    fcount++;
                    break;
                case 'g':
                    gcount++;
                    break;
                case 'h':
                    hcount++;
                    break;
                case 'i':
                    icount++;
                    break;
                case 'j':
                    jcount++;
                    break;
                case 'k':
                    kcount++;
                    break;
                case 'l':
                    lcount++;
                    break;
                case 'm':
                    mcount++;
                    break;
                case 'n':
                    ncount++;
                    break;
                case 'o':
                    ocount++;
                    break;
                case 'p':
                    pcount++;
                    break;
                case 'q':
                    qcount++;
                    break;
                case 'r':
                    rcount++;
                    break;
                case 's':
                    scount++;
                    break;
                case 't':
                    tcount++;
                    break;
                case 'u':
                    ucount++;
                    break;
                case 'v':
                    vcount++;
                    break;
                case 'w':
                    wcount++;
                    break;
                case 'x':
                    xcount++;
                    break;
                case 'y':
                    ycount++;
                    break;
                case 'z':
                    zcount++;
                    break;

            }
        }
    }
}

void guessmost(){
    int x,y,temp,temp2,q;

    for (x=0;x<26;x++){

        letters[0][x]=x;

        switch (x){
            case 0:
                letters[1][x]=acount;
                break;
        case 1:
            letters[1][x]=bcount;
            break;
        case 2:
            letters[1][x]=ccount;
            break;
        case 3:
            letters[1][x]=dcount;
            break;
        case 4:
            letters[1][x]=ecount;
            break;
        case 5:
            letters[1][x]=fcount;
            break;
        case 6:
            letters[1][x]=gcount;
            break;
        case 7:
            letters[1][x]=hcount;
            break;
        case 8:
            letters[1][x]=icount;
            break;
        case 9:
            letters[1][x]=jcount;
            break;
        case 10:
            letters[1][x]=kcount;
            break;
        case 11:
            letters[1][x]=lcount;
            break;
        case 12:
            letters[1][x]=mcount;
            break;
        case 13:
            letters[1][x]=ncount;
            break;
        case 14:
            letters[1][x]=ocount;
            break;
        case 15:
            letters[1][x]=pcount;
            break;
        case 16:
            letters[1][x]=qcount;
            break;
        case 17:
            letters[1][x]=rcount;
            break;
        case 18:
            letters[1][x]=scount;
            break;
        case 19:
            letters[1][x]=tcount;
            break;
        case 20:
            letters[1][x]=ucount;
            break;
        case 21:
            letters[1][x]=vcount;
            break;
        case 22:
            letters[1][x]=wcount;
            break;
        case 23:
            letters[1][x]=xcount;
            break;
        case 24:
            letters[1][x]=ycount;
            break;
        case 25:
            letters[1][x]=zcount;
            break;
        }
    }

    for (y=0;y<26;y++){

        //problem occurs here (I think)

        for (q=mastercount-1;q>=0;q--){
                    cout<<"for array index:"<<q;
                    cout << " the value of prevguess is "<<prevguess[q]<<endl;
        }

        for (x=26;x>=1;x--){
            if (letters[1][x]>letters[1][x-1])
            {
                temp=letters[1][x-1];
                letters[1][x-1]=letters[1][x];
                letters[1][x]=temp;

                temp2=letters[0][x-1];
                letters[0][x-1]=letters[0][x];
                letters[0][x]=temp2;
            }
        }

    }
}

void letterguess(){
    int x(0),z;
    char guess;
    bool goodletter(false),yesletter(false),alreadyguess(false);

    while (!goodletter){

        guess=letters[0][x]+97;

        if (mastercount==0){
            alreadyguess=false;
        }
        else{
            for (z=mastercount-1;z>=0;z--){
                if (guess==prevguess[z]){
                    alreadyguess=true;
                }
            }
        }

        if (!alreadyguess){
            cout<<"is your letter "<< guess<<endl;
            cin >> yesletter;
            prevguess[mastercount]=guess;
        }

        if (yesletter && !alreadyguess){
            goodletter=true;
        }
        else {
            cout<<"wrong"<<endl;
            x++;
        }

        mastercount++;

        if (mastercount>26){
                    break;
                }
    }

}

int main() {
    bool found(false);
    initarray();
    selectlength();
    while (!found){
        mostletters();
        guessmost();
        letterguess();
        if (mastercount>26){
            break;
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T06:26:58.330

I believe the problems start a bit lower than your comment.

```
for (x=26;x>=1;x--){
       if (letters[1][x]>letters[1][x-1]) 
```

When `x` is 26, `letters[1][x]` will be out of range.

# php - 如何从我的回调 php 脚本访问 JSON 对象？

> ID：11303344
> 
> 赞同：0
> 
> 时间：2012-07-03T01:28:04.660
> 
> 标签：php, jquery, arrays, json, object

在我的 scrip.js 文件中，我使用 jquery $.post 函数来发布一些数据（实际上，到目前为止，我只是想让我的电话恢复工作，以便我可以读取一些数据）。

```
 $('document').ready(function(){

    $.post("index.php/main/showData", 
     function(data){
        console.log(data);
        for (var name in data){
            alert(name);
        }
     }, "json");
}); 
```

我正在使用 codeigniter 来访问来自 mysql 的数据：

```
class Main extends CI_Controller
{
    function showData()
{
    $this->load->model('ajax');
    $array = array($this->ajax->getRecArray());

    // $this->index();
    echo json_encode($array);
} 
```

我的模型

```
class Ajax extends CI_Model
{
    function getRecArray()
{
    $query = $this->db->query("SELECT * FROM record_table WHERE id = 1");
    $row = $query->result();
    return $row;
}
} 
```

当我 console.log(data) 我得到：

```
[[Object { id="1", name="scott"}]] 
```

我的问题是，如何使用 script.js 访问各个属性或对象？例如，如何访问该 Object 数组中 name 的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T01:34:59.680

```
 $('document').ready(function(){

    $.post("index.php/main/showData", 
     function(data){
        console.log(data);
        for (var name in data[0][0]){
            alert(data[0][0][name]);
        }
     }, "json");
}); 
```

那应该这样做。

当您使用 for .. in 迭代对象时，指定的变量不包含数据，而是成员名称的字符串。在 JS 中，您可以通过语法 data.member 或 data["member"] 访问对象成员，在这种情况下您将希望使用后者，因为您有字符串。

此外，在这种特定情况下，数据是数组内的一个对象，该对象位于数组内，这是按级别细分的返回数据：

```
[
    [
        Object { 
            id="1", 
            name="scott"
        }
    ]
] 
```

因此为什么你需要语法 data[0][0][name]; 这应该很容易在 PHP 计数器部分修复。

# perl - 从子程序返回数组

> ID：11303345
> 
> 赞同：1
> 
> 时间：2012-07-03T01:28:05.413
> 
> 标签：perl, subroutine

我正在尝试从数组中返回数据。代码如下：

```
my %ignorables = map { $_ => 1 } qw([notice mpmstats: rdy bsy rd wr ka log dns cls bsy: in);

open my $error_fh, '<', 'iset_error_log';

sub findLines {

    # Iterates over the lines in the file, putting each into $_
    while (<$error_fh>) {

        # Only worry about the lines containing [notice
        if (/\[notice/) {

            if (/\brdy\b/){
                print "\n";
            }
            else {
                print ",";
            }

            # Split the line into fields, separated by spaces, skip the %ignorables
            my @line = grep { not defined $ignorables{$_} } split /\s+/;

            # More cleanup
            s/|^\[|notice|[]]//g for @line; # remove [ from [foo

            # Output the line
            @line = join(",", @line);
            s/,,/,/g for @line;
            print @line;
            }
        }
    }

&findLines; 
```

当我打印时，输出如下：

```
Mon,Jun,25,23:24:43,2012,999,1,0,1,0,0,0,0,Mon,Jun,25,23:24:43,2012,1,mod_was_ap22_http.c
Mon,Jun,25,23:32:44,2012,999,1,0,1,0,0,0,0,Mon,Jun,25,23:32:44,2012,1,mod_was_ap22_http.c
Mon,Jun,25,23:33:44,2012,999,1,0,1,0,0,0,0,Mon,Jun,25,23:33:44,2012,1,mod_was_ap22_http.c
Mon,Jun,25,23:45:44,2012,999,1,0,1,0,0,0,0,Mon,Jun,25,23:45:44,2012,1,mod_was_ap22_http.c 
```

如何在子例程之外返回数组？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-03T02:11:30.887

```
sub findLines {
    ...
    return @list; # Returns array @list
}
my @results = findLines();

# or
sub findLines {
    ...
    return \@list; # returns a reference to array @list
}
my $resultsRef = findLines(); 
```

我不知道您的 if/else 语句在做什么，但我认为您想将`\n`or推`,`送到`@list`.

此外，您可能应该在子例程中打开文件并在参数中传递要打开的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T10:54:16.250

未测试：

```
sub findLines {
    my($item,@result);

    # Iterates over the lines in the file, putting each into $_
    while (<$error_fh>) {

        # Only worry about the lines containing [notice
        if (/\[notice/) {

            if (/\brdy\b/){
                print "\n";
                push @result,"$item\n";
                $item="";
            }
            else {
                print ",";
                $item.=",";
            }

            # Split the line into fields, separated by spaces, skip the %ignorables
            my @line = grep { not defined $ignorables{$_} } split /\s+/;

            # More cleanup
            s/|^\[|notice|[]]//g for @line; # remove [ from [foo

            # Output the line
            @line = join(",", @line);
            s/,,/,/g for @line;
            print @line;
            map $item.=$_, @line;
        }
    }
    @result
}

my @array = &findLines; 
```

# jquery - 一定时间后删除 div

> ID：11303349
> 
> 赞同：2
> 
> 时间：2012-07-03T01:28:35.697
> 
> 标签：jquery

所有，我有以下 jQuery 代码：

```
jQuery.post(site_url + "save_data.php", jQuery(this).serialize(),
    function(data) {
        //alert("Data Loaded: " + data);
        jQuery("#results").html(data+"<br><br>");
        jQuery("#check_submission").val("yes");
    }); 
```

我想在一定时间（5秒）后淡出结果div。

除此之外，如果我重新提交表单，我想再次显示结果 div 5 秒钟，然后再次淡出。

谁能指出我如何做到这一点的正确方向？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T01:32:19.213

```
jQuery.post(site_url + "save_data.php", jQuery(this).serialize(), function(data) {
    //alert("Data Loaded: " + data);
    var results = jQuery("#results");

    results.html(data+"<br><br>")

    results.show(); // re-display the div
    setTimeout(function(){ // then fade it out....
      results.fadeOut();
    }, 5000); // ...after 5 seconds

    jQuery("#check_submission").val("yes");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T01:31:23.957

将结果行替换为以下内容：

`$("#results").html(data+"<br><br>").fadeIn(10).delay(5000).fadeOut(200);`

它将在 10 毫秒内平滑淡入（100 可能会更好）以撤消任何先前的淡出，延迟 5 秒，然后在 200 毫秒内淡出。

编辑：如果您使用的是 jQuery < 1.4，则可以用作缺少延迟功能的解决方法：

```
$("#results").html(data+"<br><br>").fadeIn(10).animate({opacity: 1.0}, 5000, function () { 
    $("#results").fadeOut(200);
}); 
```

# java - 什么时候在Java中将变量转换为常量？

> ID：11303357
> 
> 赞同：0
> 
> 时间：2012-07-03T01:29:23.183
> 
> 标签：java, variables, constants

```
public String getPreviewMessageForWebdavResponse(){ 

    String format="<preview><currentNumber>%d</currentNumber><totalNumber>%d</totalNumber></preview>";
    return String.format(format, currentNumber,totalNumber);
} 
```

有时，我遇到一个字符串。我无法判断它是否需要是常量或本地变量。String 只在方法中使用一次，不需要暴露在方法之外。

如何选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T01:37:55.700

你的问题有点不清楚。我将回答我想到的三个可能的问题：

（所有这些都只是风格问题）。

> 我应该使用一个变量，还是只将字符串文字内联到它使用的一个地方？

我会说，至少在您的情况下，字符串的绝对长度表明了这一点，将其保留为具有描述性名称的变量，并将其保留在方法的顶部。如果需要，以后更容易查找和更新，如果以后多次需要它，则更容易重构，更容易阅读。

> 变量应该是本地的和最终的吗？

[大概](https://stackoverflow.com/questions/137868/using-final-modifier-whenever-applicable-in-java)。

> 它应该是类级别的常量 ( `static final`) 吗？

始终尽可能限制范围和可见性。

如果仅在一种方法中使用，请保留在方法中。

如果它在同一个类的多个方法中使用，则将其设为`private static final`.

如果它在同一个包中的多个地方使用，请制作`static final`.

如果在整个项目中都使用它，那么只有 make it `public`。

# ruby-on-rails - Time.new 不像我预期的那样工作

> ID：11303358
> 
> 赞同：0
> 
> 时间：2012-07-03T01:29:26.897
> 
> 标签：ruby-on-rails, ruby

我正在尝试生成一些种子材料。

```
seed_array.each do |seed|
    Task.create(date: Date.new(2012,06,seed[1]), start_t: Time.new(2012,6,2,seed[2],seed[3]), end_t: Time.new(2012,6,2,seed[2] + 2,seed[3]), title: "#{seed[0]}")
end 
```

最终我会随机放置小时、分钟、秒。我面临的问题是，它不是使用 2012-06-02 日期创建时间，而是创建具有不同日期的时间：2000-01-01。

我`Time.new(2012,6,2,2,20,45)`在 Rails 控制台中进行了测试，它按预期工作。当我尝试为我的数据库播种时，发生了一些巫术魔术，我没有得到我想要的日期。

任何输入表示赞赏。谢谢！

**更新1：**

```
(0.0ms)  begin transaction   SQL
(0.5ms)  INSERT INTO "tasks" ("created_at", "date", "description",
  "end_t", "group_id", "start_t", "title", "updated_at") VALUES (?, ?,
  ?, ?, ?, ?, ?, ?)  [["created_at", Tue, 03 Jul 2012 02:15:34 UTC
  +00:00], ["date", Thu, 07 Jun 2012], ["description", nil],
  ["end_t", 2012-06-02 10:02:00 -0400], ["group_id", nil],
  ["start_t", 2012-06-02 08:02:00 -0400], ["title", "99"],
  ["updated_at", Tue, 03 Jul 2012 02:15:34 UTC +00:00]]
(2.3ms)  commit transaction 
```

这是日志的一个小样本。

**更新 2**

```
Task id: 101, date: "2012-06-26", start_t: "2000-01-01 08:45:00", end_t: "2000-01-01 10:45:00", title: "1", description: nil, group_id: nil, created_at: "2012-07-03 02:15:33", updated_at: "2012-07-03 02:15:33" 
```

这就是在 rails 控制台中显示的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T07:23:49.310

听起来您将`:time`类型用于`start_t`and `end_t`。在这种情况下，时间指的是纯时间数据类型，没有日期，因为这就是 SQL 时间类型。

Ruby 的`Time`类型涵盖日期和时间，因此您的数据库列需要是 :datetime。事实上，ruby 没有纯时间类，因此 activerecord 使用带有虚假日期的常规时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T02:22:10.613

我已经测试过你这样的代码：

```
arr = [1,2,3]

arr.each do |seed|
    Timetest.create(time: Time.new(2012,6,2,2,20,45), title: "#{seed}")
end 
```

并且它按预期工作。但是我在我的控制台上得到了这个 sql，它与你的 start_t 和 end_t 有点不同

```
 SQL (4.1ms)  INSERT INTO "timetests" ("created_at", "time", "title", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Tue, 03 Jul 2012 02:11:35 UTC +00:00], ["time", Sat, 02 Jun 2012 07:20:45 UTC +00:00], ["title", "1"], ["updated_at", Tue, 03 Jul 2012 02:11:35 UTC +00:00]] 
```

**更新 1**

您是否尝试过使用 DateTime.new 而不是 Time.new？

```
Task.create(date: DateTime.new(2012,06,seed[1]), start_t: DateTime.new(2012,6,2,seed[2],seed[3]), end_t: DateTime.new(2012,6,2,seed[2] + 2,seed[3]), title: "#{seed[0]}") 
```

# android - 防止 MediaPlayer 自动播放文件夹中的所有 mp3 文件

> ID：11303360
> 
> 赞同：2
> 
> 时间：2012-07-03T01:29:47.407
> 
> 标签：android, android-mediaplayer

我来自台湾，我的英语很基础，谢谢你的原谅。

我构建了一个 iPad 应用程序并发布到 App Store，这是一种交流板（AAC 用于口语困难的人）。它在主视图上有几个按钮，当用户触摸一个按钮时，应用程序将播放与该按钮对应的 mp3 声音。我已将所有 mp3 文件放在一个文件夹中，并确定在运行时动态播放哪个文件。

最近我正在构建这个应用程序的Android版本，但是我遇到了一个问题，当我触摸视图上的一个按钮时，MediaPlayer不仅播放相应的按钮，而且继续播放文件夹中的所有其余mp3文件不断地。iPad版本的开发不会发生这种情况。任何人都可以帮助我解决这个问题并将 MediaPlayer 设置为正常工作吗？

PS。我将所有 MP3 文件放在一些子文件夹中，然后将它们放在“资产”文件夹中。这是因为由于某些原因，所有mp3文件都使用数字文件名（例如0123223.mp3），播放哪个MP3取决于用户触摸哪个按钮，所以我不能使用R.raw.0123223不仅仅是因为R类不能有一个以数字命名的成员，而且目标mp3文件只能在运行时而不是编译时确定，所以我不能使用res/raw文件夹。

我的代码如下：

```
private void PlayMP3(String mp3File) throws IOException {
    AssetFileDescriptor afd = this.getAssets().openFd(mp3File);
    MediaPlayer player = new MediaPlayer();
    player.setOnCompletionListener(new OnCompletionListener(){
        public void onCompletion(MediaPlayer mp) {
        System.out.println(mp.getAudioSessionId() + " finished.");
        }           
    });
    player.setDataSource(afd.getFileDescriptor());
    player.setLooping(false);
    player.prepare();
    player.start();
} 
```

PlayMP3的参数“mp3file”是mp3文件路径的串联字符串，根据用户触摸的按钮。

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T04:41:40.577

如果您的资产目录中只有一个文件，您的版本就可以工作。资产目录的内容是一个接一个的放在一起。因此，如果您不指定从哪里开始以及要读取多少字节，播放器将读取到最后，就好像它们是一个文件一样。

您可以通过使用带有更多参数的 setDataSource 来完成您想要的：

```
player.setDataSource(afd.getFileDescriptor(),afd.getStartOffset(),afd.getLength()); 
```

这将允许您定义播放器的限制，并且只播放您在字符串 mp3File 中指定的歌曲。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T01:43:25.520

你没有发布一些代码。

第一步是将您的声音文件插入原始文件夹

然后，您只需要几行代码：

```
MediaPlayer mediaPlayer = null;
mediaPlayer = MediaPlayer.create(getBaseContext(), R.raw.mysoundfile);
mediaPlayer.start(); 
```

当应用程序关闭时，不要忘记“释放”您的媒体播放器：

```
mediaPlayer.release();
mediaPlayer = null; 
```

# ruby-on-rails - 在 Backbone 中引导模型时，Rails 缓存资产中的旧数据

> ID：11303363
> 
> 赞同：1
> 
> 时间：2012-07-03T01:30:04.457
> 
> 标签：ruby-on-rails, ruby-on-rails-3, backbone.js, coffeescript, bootstrapping

我有一个带有 Backbone.js 前端的 rails 应用程序。在我的主干模型/集合定义中，我有以下模型（在 project.js.coffee.erb 中）

```
#############################
##  MODEL
#############################
class window.Project extends Backbone.Model

  urlRoot: '/projects'

#############################
##  COLLECTION
#############################
class window.Projects extends Backbone.Collection

  model: Project

  url: '/projects'

# initialize new collection
window.projects = new Projects
projects.reset(<%= Project.all.to_json %>) 
```

最后一行是 ERB 在 JSON 中加载所有项目的地方。

当我加载我的应用程序时，这种引导会产生一个包含旧数据的集合。我知道它已经过时了，因为我已经做到了：

*   删除我的开发数据库（sqlite3）
*   更改我的 database.yml 以重命名我的开发数据库名称
*   重新运行`rake db:migrate`以创建一个全新的 .sqlite3 数据库文件

我可以运行`sqlite3`并看到项目表不包含任何行，但是，即使在重新启动服务器之后，`project.js`它也会被编译为包含一个充满现在不存在的数据的集合。

Rails 在我运行时正确启动到开发模式`rails s`：

```
=> Booting WEBrick
=> Rails 3.2.5 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
[2012-07-02 21:24:08] INFO  WEBrick 1.3.1
[2012-07-02 21:24:08] INFO  ruby 1.9.3 (2012-04-20) [x86_64-darwin11.4.0]
[2012-07-02 21:24:08] INFO  WEBrick::HTTPServer#start: pid=11607 port=3000 
```

如果我创建**新**项目，它们甚至会保存到数据库中。它们也可以很好地添加到 Backbone 集合中。但是，同样，如果我重新加载页面甚至重新启动服务器，该集合将再次填充旧数据。

有人可以帮我弄清楚我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T02:17:23.993

好吧，事实证明我知道发生了什么。

只要文件本身不改变，rails 中的资源就会被缓存。所以一旦`project.js.coffee.erb`被编译成`project.js`，被引导到集合中的数据将保持静态，直到我对 进行更改`project.js.coffee.erb`，此时 rails 将重新编译文件，然后才从数据库中重新获取数据。

我意识到，如果我希望在每个页面加载时将新数据引导到集合中，我需要将`projects.reset()`javascript 添加为 main 中的内联脚本`app/views/layouts/application.html.haml`。将此代码添加到我的`body`标签末尾就可以了。

```
:javascript
  projects.reset(#{Project.all.to_json})
  groups.reset(#{Group.all.to_json})
  users.reset(#{User.all.to_json}) 
```

现在，每次重新加载页面时，当前数据都会加载到适当的集合中。

# php - 获取用于 jquery 的 php url 变量

> ID：11303369
> 
> 赞同：0
> 
> 时间：2012-07-03T01:31:18.403
> 
> 标签：php, jquery

好的，所以我有一个用 jquery 构建的 html5 音频播放器，但是我需要使用 get 请求从 url 中的变量获取轨道 url，以便它可以在 jquery 脚本中使用。不知道该怎么做。我将 jquery 放在一个单独的文件中以方便用户嵌入标记。该网址将类似于 www.mysite.co.uk/player/player.html?url=testing123.mp3。

我可以很容易地获取用于标记的变量，以使用 PHP 显示艺术家的姓名等，但不确定如何为 jquery 脚本执行此操作。我环顾四周，但没有运气。

这是相关的jquery

```
song = new Audio('THIS IS WHERE THE GET VARIABLE NEEDS TO BE'); 
```

我不应该认为需要更多的代码，但如果只是问的话。

头

```
<script src="http://code.jquery.com/jquery-latest.js" type="text/javascript"></script>

<?php $url = $_GET['url']; ?> 

<script> // Before jQuery
    var song = new Audio(`<?php echo($url); ?>`);
</script>`
<script type="text/javascript" src="http://newbornsounds.co.uk/player/src/js/js.js"></script>
<script type="text/javascript" src="http://newbornsounds.co.uk/player/src/js/html5slider.js"></script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T01:33:06.187

```
<?php
$url = $_GET['url']; // Avoid this way! Need to be as safe as possible.
?>

[...]

<head>
    [...]

    <script> // Before jQuery
        var song = new Audio(`<?php echo($url); ?>`);
    </script>`

    [...]
</head> 
```

并从您的歌曲中删除歌曲`.js`

# eclipse - 使用特定运算符连接字符串

> ID：11303371
> 
> 赞同：0
> 
> 时间：2012-07-03T01:31:34.087
> 
> 标签：eclipse, emacs, notepad++

我正在使用 Emacs、Notepad++ 或 Eclipse。有没有办法将字符串切成小块并使用分隔符连接它们？

例如： 输入：

```
"I like sushi and maki" 
```

输出：

```
"I like" +
"sushi and" + 
"maki" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T13:38:16.610

以下是我对这个问题的看法。不确定我是否解决了正确的问题:)

```
(defun split-string-words (min max)
  (interactive "r")
  (let ((counted 0) (before-indent min)
        (wordcount (read-number "How many words in a line? " 7))
        (delimiter
         (read-string "Delimit with (default: \" + \") "
                      nil nil "\" + \"")))
    (save-excursion
      (goto-char min)
      (while (< min max)
        (incf counted)
        (when (= counted wordcount)
          (insert delimiter)
          (backward-char)
          (incf max (length delimiter))
          (setq before-indent (point)
                counted 0)
          (newline-and-indent)
          (incf max (- (point) before-indent)))
        (forward-word)
        (setq min (point)))))) 
```

使用应该是直截了当的。还要检查您的`<mode>-insert-and-indent`功能的编辑模式，您想使用它而不是`newline-and-indent`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T02:02:13.607

在记事本++中，您可以使用 RegEx: `([\w]+)\s*([\w]*)` 然后替换为，`"$1 $2" +` 但随后您将不得不返回并`+`从只有一组匹配的末尾替换中删除无关的符号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T01:49:25.687

在 Eclipse 中（至少在 Java 上下文中），您只需将光标放在字符串内并按 Enter 键。这也适用于 Netbeans。

# c++ - 坚持我对 Project Euler #4 的解决方案

> ID：11303373
> 
> 赞同：0
> 
> 时间：2012-07-03T01:32:20.187
> 
> 标签：c++

我坚持使用我对 Project Euler 问题 4 的解决方案，我有以下代码应该可以工作，并且它确实遍历了我研究和发现的问题的解决方案（993 * 913）：

```
// Michael Clover
// Project Euler
// Problem 4

/* A palindromic number reads the same both ways. The largest palindrome made from the    product of two 2-digit numbers is 9009 = 91  99.

Find the largest palindrome made from the product of two 3-digit numbers. */

#include <iostream>
#include <string>
#include <sstream>
#include <cstdlib>

using namespace std;

bool achieved = false; // change to true when the palindrome is found
string string_conversion = "";
string first_half = ""; // first half of string
string second_half = ""; // second half of string
stringstream conversion; // use this to convert integers to strings

int check(string first_half, string second_half) {
    if (first_half.compare(second_half) == 0) {
        achieved = true;
        return 0;
    }
    else {
        return 0;
    }
    return 0;
}

int convert(int result) {
    char temp;
    conversion << result;
    conversion >> string_conversion;
    if (string_conversion.size() == 6) {
        temp = string_conversion.at(0);
        //cout << "temp = " << temp << endl;
        first_half+=(temp);
        temp = string_conversion.at(1);
        //cout << "temp = " << temp << endl;
        first_half+=(temp);
        temp = string_conversion.at(2);
        //cout << "temp = " << temp << endl;
        first_half+=(temp);
        temp = string_conversion.at(5);
        //cout << "temp = " << temp << endl;
        second_half+=(temp);
        temp = string_conversion.at(4);
        //cout << "temp = " << temp << endl;
        second_half+=(temp);
        temp = string_conversion.at(3);
        //cout << "temp = " << temp << endl;
        second_half+=(temp);
        //cout << first_half << second_half << endl;
        check(first_half, second_half);
    }
    //if (string_conversion.size() == 5) {
        //cout << "The size of the string is 5" << endl;
        //exit(1);
    //}
    string_conversion = "";
    cout << first_half << endl;
    cout << second_half << endl;
    first_half.clear();
    second_half.clear();
    conversion.clear();
    conversion.str("");
    //cout << "conversion: " << conversion << endl;
    return 0;
}

int iterate(int operator_one, int operator_two) { // takes two numbers and iterates     through them, each time it is iterated, the result is passed to the convert    function to convert to string
    int two = operator_two;
        for (int i = operator_one; i > 100; i--) {
            int result = i * two;
            cout << i << "x" << two << endl;
            convert(result);
        }
    return 0;
}

int main() { // Use the stringstream to convert the numerical values into strings     which you can then use to check if they are palindromes
    int operator_one = 999;
    int operator_two = 999;
    while (achieved == false) {
        for (int i = operator_two; i > 100; i--) {
            iterate(999, i);
        }
    }
    cout << "The largest palindrome made from the product of two 3-digit numbers is: "     << string_conversion << endl;
    return 0;
} 
```

该程序向下遍历 999x999 的所有数字，然后将 6 位数字拆分为两个字符串，结果的后半部分从后向前排列。如控制台在运行时使用 cout << 所示，程序尝试 993*913 并且 second_half 字符串和 first_half 字符串都包含 906。我认为程序应该做的是执行 check(string first_half, string second_half) 函数在迭代此并确定两个字符串匹配（应根据各种来源返回 0）之后，这应该在 check() 中启动 if 语句并将实现的布尔值设置为 true 在主语句中结束程序并打印结果在退出程序之前。然而它并没有这样做，这是我的问题。感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T01:41:56.313

撇开我在这段代码中看到的其他一些问题不谈，我认为你的终止问题是因为你只在外循环完成`achieved` *后才*`main()`检查。因此，在您实际检查终止条件之前，内循环 ( `iterate()`) 将继续直到`operator_one`低于 100，然后外循环将继续直到`operator_two`低于 100。

# c# - C# 乘法表

> ID：11303374
> 
> 赞同：3
> 
> 时间：2012-07-03T01:32:35.240
> 
> 标签：c#, loops, multiplication

所以我试图在 C# 中打印一个乘法表，但是我不太清楚如何得到我需要的东西。

到目前为止，我的程序输出以下内容：

1 2 3
2 4 6
3 6 9

但是，我需要它来输出：

0 1 2 3
1 1 2 3
2 2 4 6
3 3 6 9

我已经尝试了很多不同的方法来获得第二个输出，但是我无法弄清楚。我不一定要求答案，但如果有人能指出我正确的方向，我将不胜感激。

这是我现在拥有的代码：

```
 static void Main(string[] args)
    {
        for (int i = 1; i <= 3; i++)
        {
            for (int j = 1; j <= 3; j++)
            {
                Console.Write(i * j + "\t");
            }
            Console.Write("\n");
        }

        Console.ReadLine();
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T01:44:24.653

```
for (int i = 0; i <= 3; i++)
{
    Console.Write(i + "\t");
    for (int j = 1; j <= 3; j++)
    {
        if (i>0) Console.Write(i * j + "\t");
        else Console.Write(j + "\t");
    }
    Console.Write("\n");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T01:50:16.747

您应该跳过两个 0。

```
for (int i = 0; i <= 3; i++)
{
     for (int j = 0; j <= 3; j++)
     {
          Console.Write((i == 0? j : (j == 0? i : i*j)) + "\t");
     }
     Console.Write("\n");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T16:28:38.027

```
int tbl= int.Parse(Console.ReadLine());
int j = int.Parse(Console.ReadLine());

for (int i=1; i<=10; i++)
{
     for (int j=1;j<=10; j++)
     {
          Console.WriteLine("{0}*{1}={2}", i, j, (i * j));`enter code here`
     }
}
Console.ReadLine(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-25T13:30:25.863

```
 for (int i = 0; i <= 3; i++)
        {
            for (int j = 0; j <= 3; j++)
            {

                if (i == 0)
                {
                    Console.Write(j);
                }
                else
                {
                    if(j == 0)
                    {
                        Console.Write(i);
                    }
                    else
                    {
                        Console.Write(i * j);
                    }
                }
            }
            Console.Write("\n");
        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-18T19:03:10.377

您可以尝试这三种解决方案之一。

解决方案1（没有if else语句）：

```
static void Main(string[] args)
{
    for (int i = 0; i <= 3; i++)
    {
        Console.Write("{0}\t", i);
        for (int j = 1; j <= 3; j++)
        {
            Console.Write("{0}\t", i * j);
        }
        Console.WriteLine();
    }

    Console.ReadLine();
} 
```

解决方案 2（使用 if else 语句）：

```
static void Main(string[] args)
{
    for (int i = 0; i <= 3; i++)
    {
        for (int j = 1; j <= 3; j++)
        {
            if (i == 0)
            {
                Console.Write("{0}\t", i);
            }
            else
            {
                Console.Write("{0}\t", i * j);
            }
        }
        Console.WriteLine();
    }

    Console.ReadLine();
} 
```

解决方案 3（使用简写 if else 语句）：

```
static void Main(string[] args)
{
    for (int i = 0; i <= 3; i++)
    {
        for (int j = 1; j <= 3; j++)
        {
            Console.Write("{0}\t", (i == 0) ? i : i * j);
        }
        Console.WriteLine();
    }

    Console.ReadLine();
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-09-26T06:30:45.207

```
Console.WriteLine("Enter A Number");
int j = Convert.ToInt32(Console.ReadLine());
for (int i = 0 ; i <= 10; i++) {
    Console.WriteLine("{1} X {0} = {2}",i,j,i*j);
    Console.ReadLine();
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-05-06T08:38:40.043

```
using System;
/*
 * Write a console-based application that displays a multiplication table of the product of 
 * every integer from 1 through 10 multiplied by every integer from 1 through 10\. Save the 
 * file as DisplayMultiplicationTable.cs.
 */

namespace MultiplicationTable
{
    class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine("\t\t\t\t\t\t\t\t\tMultiplication Table");
            Console.WriteLine("------------------------------------------------------------------------------------------------------------------------------------------------------------");
            const int END = 11;
            for(int x = 1; x < END; x++)
            {
                for(int y = 1; y < END; y++)
                {
                    int value = x * y;
                    Console.Write("{0} * {1} = {2}\t", y, x, value);
                }
                Console.WriteLine();
            }
            Console.ReadLine();
        }
    }
} 
```

输出

[代码输出](https://i.stack.imgur.com/1tSgr.jpg)

我正在尝试在 GUI 中完成上述代码。到目前为止，我已经想出了以下代码；但输出不像上面的输出。

我的 GUI 代码如下：

使用系统；使用 System.Windows.Forms；

命名空间 DisplayMultiplicationTableGUI { public partial class Form1:Form { public Form1() { InitializeComponent(); }

```
 private void ShowTableButton_Click(object sender, EventArgs e)
    {
        int a;
        int b;
        const int STOP = 11;

        for(a = 1; a < STOP; a++)
        {
            for(b = 1; b < STOP; b++)
            {
                int value = a * b; 
                multiplicationTableLabel.Text += String.Format("{0} * {1} = {2}     ", b, a, value);
            }
            multiplicationTableLabel.Text += "\n";
        }
    }
} 
```

}

# jquery - 如何构建“最后一个获胜”的 jQuery-Ajax 队列？

> ID：11303375
> 
> 赞同：2
> 
> 时间：2012-07-03T01:32:37.363
> 
> 标签：jquery, queue, jquery-deferred, promise

假设我在一个页面上有三个元素：

*   接受数字联系人 ID 的文本框。
*   一个按钮，当单击该按钮时，将向服务器发出 Ajax 请求，以获取输入到文本框中的联系人 ID 的联系人信息。
*   A`div`显示从服务器获取的联系信息。

现在假设另外两件事：

*   预计来自服务器的往返将需要 5 秒。
*   如果在 5 秒延迟期间，用户在文本框中输入不同的数字并单击按钮，则网页应忽略第一个 ajax 结果并接受第二个结果（即最近的 Ajax 请求）。

* * *

我的问题：

*   我怎么能像我描述的那样实现“最后一个获胜”的 jQuery-Ajax 队列？
    *   我会使用[延迟对象](http://api.jquery.com/category/deferred-object/)或[承诺对象](http://api.jquery.com/promise/)来帮助我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T01:38:41.417

您只需在成功回调中处理这一切。您在回调中检查的第一件事是是否输入了新信息，如果是，则让新信息获胜。否则通过请求的结果。

如有必要，应该很容易设置标志。每当发送新请求时就悬挂旗帜。在成功回调中使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T01:46:50.393

```
ResponsibleObject = {
  lastAjaxId: 0,
  onChangeSomething: function() {
    var ajaxObject = $.ajax({
       // some settings
       success:this.ajaxCallback
    });
    ajaxObject.__id = ++this.lastAjaxId;
  },
  ajaxCallback: function(data, textStatus, jqXHR) {
    if (jqXHR.__id != ResponsibleObject.lastAjaxId) {
        return false;
    }
    // put your code here
  }
}; 
```

# maven - 在 Tomcat 7 中部署的 Myfaces、Facelets、Tomahawk 和 Maven 失败

> ID：11303379
> 
> 赞同：0
> 
> 时间：2012-07-03T01:33:23.400
> 
> 标签：maven, facelets, myfaces, tomahawk

我很难让战斧运行。不久前，我使用 myfaces hellworld20 原型创建了一个新项目。现在我想用战斧来扩展它。新的 pom.xml 如下所示：

```
<properties>
    <jsf-myfaces.version>2.1.8</jsf-myfaces.version>
</properties>
<build>
    <pluginManagement>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-war-plugin</artifactId>
                <version>2.2</version>
            </plugin>
        </plugins>
    </pluginManagement>
    <!-- To use the plugin goals in your POM or parent POM -->
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-war-plugin</artifactId>
        </plugin>
    </plugins>
</build>

<!-- Project dependencies -->
<dependencies>
    <dependency>
        <groupId>${project.groupId}</groupId>
        <artifactId>commons</artifactId>
        <version>${project.version}</version>
    </dependency>

    <dependency>
        <groupId>${project.groupId}</groupId>
        <artifactId>configuration</artifactId>
        <version>${project.version}</version>
    </dependency>

    <dependency>
        <groupId>${project.groupId}</groupId>
        <artifactId>application</artifactId>
        <version>${project.version}</version>
    </dependency>

    <dependency>
        <groupId>org.apache.geronimo.specs</groupId>
        <artifactId>geronimo-servlet_2.5_spec</artifactId>
        <version>1.2</version>
        <scope>provided</scope>
    </dependency>

    <dependency>
        <groupId>org.apache.geronimo.specs</groupId>
        <artifactId>geronimo-el_2.2_spec</artifactId>
        <version>1.0.2</version>
        <scope>provided</scope>
    </dependency>

    <dependency>
        <groupId>org.apache.geronimo.specs</groupId>
        <artifactId>geronimo-annotation_1.0_spec</artifactId>
        <version>1.1.1</version>
        <scope>provided</scope>
    </dependency>

    <dependency>
        <groupId>org.apache.myfaces.core</groupId>
        <artifactId>myfaces-api</artifactId>
        <version>${jsf-myfaces.version}</version>
        <scope>compile</scope>
    </dependency>

    <dependency>
        <groupId>org.apache.myfaces.core</groupId>
        <artifactId>myfaces-impl</artifactId>
        <version>${jsf-myfaces.version}</version>
        <scope>compile</scope>
    </dependency>

    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>jstl</artifactId>
        <version>1.2</version>
        <scope>runtime</scope>
    </dependency>

    <dependency>
        <groupId>org.apache.myfaces.tomahawk</groupId>
        <artifactId>tomahawk20</artifactId>
        <version>1.1.13</version>
        <scope>compile</scope>
    </dependency>

    <dependency>
        <groupId>org.apache.myfaces.tomahawk</groupId>
        <artifactId>tomahawk-sandbox</artifactId>
        <version>1.1.6</version>
        <scope>compile</scope>
    </dependency>

    <dependency>
        <groupId>com.google.code.tomahawk</groupId>
        <artifactId>tomahawk-facelets</artifactId>
        <version>1.1.6.3</version>
        <exclusions>
            <exclusion>
                <groupId>com.sun.facelets</groupId>
                <artifactId>jsf-facelets</artifactId>
            </exclusion>
            <exclusion>
                <groupId>javax.servlet</groupId>
                <artifactId>jstl</artifactId>
            </exclusion>
            <exclusion>
                <groupId>org.apache.myfaces.tomahawk</groupId>
                <artifactId>tomahawk</artifactId>
            </exclusion>
            <exclusion>
                <groupId>org.apache.myfaces.tomahawk</groupId>
                <artifactId>tomahawk-sandbox</artifactId>
            </exclusion>
        </exclusions>
    </dependency>

    <dependency>
        <groupId>com.sun.facelets</groupId>
        <artifactId>jsf-facelets</artifactId>
        <version>1.1.13</version>
    </dependency>

</dependencies>

<profiles>
    <profile>
        <id>bundle-myfaces</id>
        <activation>
            <property>
                <name>jsf</name>
                <value>myfaces</value>
            </property>
        </activation>
        <!-- Include MyFaces jars into the war -->
        <dependencies>
            <dependency>
                <groupId>org.apache.myfaces.core</groupId>
                <artifactId>myfaces-api</artifactId>
                <version>${jsf-myfaces.version}</version>
                <scope>compile</scope>
            </dependency>
            <dependency>
                <groupId>org.apache.myfaces.core</groupId>
                <artifactId>myfaces-impl</artifactId>
                <version>${jsf-myfaces.version}</version>
                <scope>runtime</scope>
            </dependency>
        </dependencies>
    </profile>

    <profile>
        <id>maven-tomcat7</id>
        <activation>
            <property>
                <name>container</name>
                <value>tomcat7</value>
            </property>
        </activation>
        <build>
            <plugins>
                <plugin>
                    <groupId>org.apache.tomcat.maven</groupId>
                    <artifactId>tomcat7-maven-plugin</artifactId>
                    <version>2.0</version>
                </plugin>
                <plugin>
                    <groupId>org.codehaus.mojo</groupId>
                    <artifactId>aspectj-maven-plugin</artifactId>
                    <version>1.3</version>
                    <executions>
                        <execution>
                            <goals>
                                <goal>compile</goal><!-- to weave all your main classes -->
                                <goal>test-compile</goal><!-- to weave all your test classes -->
                            </goals>
                        </execution>
                    </executions>
                    <configuration>
                        <aspectLibraries>
                            <aspectLibrary>
                                <groupId>${project.groupId}</groupId>
                                <artifactId>configuration</artifactId>
                            </aspectLibrary>
                        </aspectLibraries>
                        <sources>
                            <source>
                                <basedir>src/main/java</basedir>
                                <includes>
                                    <include>**/*.aj</include>
                                </includes>
                            </source>
                        </sources>
                        <source>1.5</source>
                        <target>1.5</target>
                        <encoding>utf-8</encoding>
                        <complianceLevel>1.5</complianceLevel>
                        <verbose>true</verbose>
                        <showWeaveInfo>true</showWeaveInfo>
                    </configuration>
                </plugin>
            </plugins>

            <pluginManagement>
                <plugins>
                    <!--This plugin's configuration is used to store Eclipse m2e settings 
                        only. It has no influence on the Maven build itself. -->
                    <plugin>
                        <groupId>org.eclipse.m2e</groupId>
                        <artifactId>lifecycle-mapping</artifactId>
                        <version>1.0.0</version>
                        <configuration>
                            <lifecycleMappingMetadata>
                                <pluginExecutions>
                                    <pluginExecution>
                                        <pluginExecutionFilter>
                                            <groupId>org.codehaus.mojo</groupId>
                                            <artifactId>
                                                aspectj-maven-plugin
                                            </artifactId>
                                            <versionRange>
                                                [1.3,)
                                            </versionRange>
                                            <goals>
                                                <goal>compile</goal>
                                                <goal>test-compile</goal>
                                            </goals>
                                        </pluginExecutionFilter>
                                        <action>
                                            <ignore></ignore>
                                        </action>
                                    </pluginExecution>
                                </pluginExecutions>
                            </lifecycleMappingMetadata>
                        </configuration>
                    </plugin>
                </plugins>
            </pluginManagement>
        </build>
        <dependencies>
            <dependency>
                <groupId>org.apache.myfaces.core</groupId>
                <artifactId>myfaces-api</artifactId>
                <version>${jsf-myfaces.version}</version>
                <scope>compile</scope>
            </dependency>
            <dependency>
                <groupId>org.apache.myfaces.core</groupId>
                <artifactId>myfaces-impl</artifactId>
                <version>${jsf-myfaces.version}</version>
                <scope>runtime</scope>
            </dependency>
        </dependencies>
    </profile>

</profiles>
<repositories>
    <repository>
        <releases>
            <enabled>true</enabled>
            <updatePolicy>always</updatePolicy>
            <checksumPolicy>warn</checksumPolicy>
        </releases>
        <snapshots>
            <enabled>false</enabled>
            <updatePolicy>never</updatePolicy>
            <checksumPolicy>fail</checksumPolicy>
        </snapshots>
        <id>Tomahawk-Facelets</id>
        <name>Tomahawk-Facelets releases</name>
        <url>http://tomahawk-facelets.googlecode.com/svn/maven2/repository</url>
        <layout>default</layout>
    </repository>
</repositories> 
```

一旦我将所有与 tomahawk 相关的依赖项注释掉，服务器就会正确部署，尽管与 tomahawk 相关的标签似乎不起作用。

如果我不将其注释掉，我会收到如下错误消息：

```
Jul 03, 2012 3:07:00 AM org.apache.catalina.startup.Embedded start
Information: Starting tomcat server
Jul 03, 2012 3:07:00 AM org.apache.catalina.core.StandardEngine start
Information: Starting Servlet Engine: Apache Tomcat/6.0.29
Jul 03, 2012 3:07:01 AM org.apache.myfaces.config.DefaultFacesConfigurationProvider getStandardFacesConfig
Information: Reading standard config META-INF/standard-faces-config.xml
Jul 03, 2012 3:07:01 AM org.apache.myfaces.config.DefaultFacesConfigurationProvider getWebAppFacesConfig
Information: Reading config /WEB-INF/faces-config.xml
Jul 03, 2012 3:07:02 AM org.apache.myfaces.config.DefaultFacesConfigurationProvider getClassloaderFacesConfig
Information: Reading config : jar:file:/E:/Users/Andreas/Dropbox/Studium/4.Semester/Software-Projekt/Marx1/trunk/deliverable3/parent/webui/target/webui-0.0.1/WEB-INF/lib/jsf-facelets-1.1.13.jar!/META-INF/faces-config.xml
Jul 03, 2012 3:07:02 AM org.apache.myfaces.webapp.AbstractFacesInitializer initFaces
Schwerwiegend: An error occured while initializing MyFaces: java.lang.NullPointerException
javax.faces.FacesException: java.lang.NullPointerException
    at org.apache.myfaces.config.DefaultFacesConfigurationProvider.getClassloaderFacesConfig(DefaultFacesConfigurationProvider.java:279)
    at org.apache.myfaces.config.DefaultFacesConfigurationMerger.getFacesConfigData(DefaultFacesConfigurationMerger.java:101)
    at org.apache.myfaces.config.FacesConfigurator.configure(FacesConfigurator.java:416)
    at org.apache.myfaces.webapp.AbstractFacesInitializer.buildConfiguration(AbstractFacesInitializer.java:338)
    at org.apache.myfaces.webapp.Jsp21FacesInitializer.initContainerIntegration(Jsp21FacesInitializer.java:73)
    at org.apache.myfaces.webapp.AbstractFacesInitializer.initFaces(AbstractFacesInitializer.java:140)
    at org.apache.myfaces.webapp.StartupServletContextListener.contextInitialized(StartupServletContextListener.java:119)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4135)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4630)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:785)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:445)
    at org.apache.catalina.startup.Embedded.start(Embedded.java:825)
    at org.codehaus.mojo.tomcat.AbstractRunMojo.startContainer(AbstractRunMojo.java:558)
    at org.codehaus.mojo.tomcat.AbstractRunMojo.execute(AbstractRunMojo.java:255)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:107)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:319)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:534)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: java.lang.NullPointerException
    at com.bluecast.xml.Piccolo.addAttributeDefinition(Piccolo.java:1167)
    at com.bluecast.xml.Piccolo.yyparse(Piccolo.java:1699)
    at com.bluecast.xml.Piccolo.parse(Piccolo.java:702)
    at org.apache.commons.digester.Digester.parse(Digester.java:1745)
    at org.apache.myfaces.config.impl.digester.DigesterFacesConfigUnmarshallerImpl.getFacesConfig(DigesterFacesConfigUnmarshallerImpl.java:309)
    at org.apache.myfaces.config.impl.digester.DigesterFacesConfigUnmarshallerImpl.getFacesConfig(DigesterFacesConfigUnmarshallerImpl.java:36)
    at org.apache.myfaces.config.DefaultFacesConfigurationProvider.getClassloaderFacesConfig(DefaultFacesConfigurationProvider.java:265)
    ... 36 more
Jul 03, 2012 3:07:02 AM org.apache.catalina.core.ApplicationContext log
Schwerwiegend: StandardWrapper.Throwable
java.lang.IllegalStateException: No Factories configured for this Application. This happens if the faces-initialization does not work at all - make sure that you properly include all configuration settings necessary for a basic faces application and that all the necessary libs are included. Also check the logging output of your web application and your container for any exceptions!
If you did that and find nothing, the mistake might be due to the fact that you use some special web-containers which do not support registering context-listeners via TLD files and a context listener is not setup in your web.xml.
A typical config looks like this;
<listener>
  <listener-class>org.apache.myfaces.webapp.StartupServletContextListener</listener-class>
</listener> 
```

我已经搜索了几个小时，现在访问了大量与标签 tomhawk、maven、facelets 相关的页面。但我似乎没有找到解决方案，这就是我在这里问的原因。也许这是微不足道的，甚至可能是显而易见的，但我找不到为什么这不起作用的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T08:48:04.127

我认为这行不通。您不能将 tomahawk-sandbox 1.1.6 与 tomahawk20 1.1.13 一起使用，因为 tomahawk-sandbox 仅适用于 JSF 1.1/1.2。此外，您不需要 com.sun.facelets，因为 JSF 实现，在本例中为 JSF 2.0/2.1 实现（在本例中为 MyFaces Core）在其 jar 中已有 facelets。不要使用 com.google.code.tomahawk，Facelets 支持是很久以前添加到 tomahawk 中的。首先尝试仅添加 tomahawk20 1.1.13，也就是将其添加为依赖项，然后您可以尝试添加沙盒，但请注意沙盒永远不会发布，因此您需要从源代码手动构建它或从[快照 repo](https://repository.apache.org/content/groups/snapshots/org/apache/myfaces/tomahawk/tomahawk-sandbox20/)中获取它。

# c - 如何使用 void* 数组作为数据结构将元素推入堆栈？

> ID：11303380
> 
> 赞同：0
> 
> 时间：2012-07-03T01:33:37.893
> 
> 标签：c, generics, stack, abstraction, abstract-data-type

最近，我一直在使用 void 指针数组在 C 中为通用堆栈编写代码。在做了一些测试之后，一切似乎都很好，直到最后一次测试：

```
while(i < 9) {
    push_pila(mi_pila,(int*)&i);
    i++;
} 
```

如您所见，我将 an`i`作为参数传递给`push_pila`函数。这是`push_pila`堆栈中函数的代码：

```
typedef struct {
        void **vec;
        int tope;
        int16_t max_elementos;
    }PILA;

int push_pila(PILA *mi_pila,void *val) {
    if(pila_llena(mi_pila)) {
        return -1;
    }
    else {
        mi_pila->tope = mi_pila->tope + 1;
        mi_pila->vec[mi_pila->tope] = val;
        return 0;
    }
} 
```

这就是问题所在，因为我的堆栈是一个`void*`包含地址值的数组`val`。当我传递的值时，`i`我传递的是它的地址。在这种情况下的问题是堆栈内的所有值都将包含相同的地址，因此堆栈中的所有值都将相同，因此当我使用 pop 函数弹出堆栈时，我将返回相同的值，这是最后一个的值`i`，在我的情况下`9`。

这个问题有什么解决办法吗？或者只是这不是在数组中推送元素的最佳方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T01:39:56.370

如果要传入内存值，则需要使每个条目具有不同的内存值，而不是一遍又一遍地递增相同的地址并传递相同的地址。您需要从堆中分配内存，`malloc`将该内存设置为您想要的任何整数值（在本例中为 1-9），然后将该指针压入堆栈。

像这样的东西：

```
while(i < 9) {
    int* int_ptr = (int*) malloc(sizeof(int));
    *int_ptr = i;
    push_pila(mi_pila, int_ptr);
    i++;
} 
```

稍后，当您完成堆栈时，您将需要弹出每个指针和`free`它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T01:41:07.717

您必须分配新的存储空间来保存每个整数：

```
while(i < 9) {
    int *i_boxed = safe_malloc(sizeof(int));
    *i_boxed = i; 
    push_pila(mi_pila, i_boxed); 
    i++; 
} 
```

注意`safe_malloc`只是优雅地调用`malloc`和处理分配失败。

# c# - 如何制作对话框模式

> ID：11303385
> 
> 赞同：1
> 
> 时间：2012-07-03T01:34:05.267
> 
> 标签：c#, .net, dialog, xna, modal-dialog

我设置了一个要显示的[保存文件对话框](http://msdn.microsoft.com/en-us/library/system.windows.forms.savefiledialog)，但是当我单击它时，它会消失在背景中，没有选项卡或任何东西。我的问题是如何使对话框模态化？如果您不知道我的意思，请进入记事本点击另存为并尝试单击关闭对话框。您将看到窗口闪烁，并且您会听到美妙的声音，通知您必须先在对话框中执行某项操作，然后再执行其他操作。我想用我的对话来达到这个效果，但我不知道怎么做。我不能简单地使用[Form.Modal](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.modal.aspx)属性，因为它处理表单并且这不是表单。有人可以帮我吗？

谢谢。

**编辑：**

这就是我显示对话框的方式，它在 XNA 中运行，当我单击另存为按钮时，该`EntrySelected()`方法被调用：

```
 private void EntrySelected(object sender, EventArgs e) {
        if(sender == saveAsEntry) {
            sfd = new SaveFileDialog();
            thread = new Thread(ShowSaveDialog);
            thread.SetApartmentState(ApartmentState.STA);
            thread.Start();
        }
        ...
    }
    private void ShowSaveDialog() {
        if(sfd.ShowDialog() == System.Windows.Forms.DialogResult.OK) {
            World.Save(sfd.FileName);
            thread.Abort();
        }
        else {
            thread.Abort();
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T01:41:19.353

实际上，您的 Dialog 是一个表单，正如上面的评论所暗示的，没有 Show 方法，您应该使用 ShowDialog() 命令将其作为模态对话框打开。

IE

```
SaveFileDialog1.ShowDialog(); 
```

* * *

根据您的编辑，有一个[ShowDialog](http://msdn.microsoft.com/en-us/library/9a55b9ds)版本，您可以在其中将所有者分配给 Dialog，也许这对您有用。

```
SaveFileDialog1.ShowDialog(dialogOwner); 
```

从上面的链接：

> 此版本的 ShowDialog 方法允许您指定将拥有显示的对话框的特定窗体或控件。如果您使用没有参数的此方法版本，则显示的对话框将自动归应用程序的当前活动窗口所有。

# silverlight - Silverlight 4 中的鼠标单击

> ID：11303386
> 
> 赞同：0
> 
> 时间：2012-07-03T01:34:30.950
> 
> 标签：silverlight, silverlight-4.0, mouseevent, mouseclick-event

我的银灯项目中需要一个鼠标单击事件，我知道如果对象不是按钮，我们需要自己模拟它。假设我想为我的 img 单击鼠标...我们如何准确地跟踪 mousedown 和 mouseup 之间的时间，并说如果它们之间的时间小于 300m，我们点击鼠标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T01:53:18.360

处理图像的`MouseLeftButtonDown`和`MouseLeftButtonUp`事件。

```
private DateTime? startClick;

private void image1_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
{
    startClick = DateTime.Now;
}

private void image1_MouseLeftButtonUp(object sender, MouseButtonEventArgs e)
{
    var clickDuration = DateTime.Now - startClick;

    if (startClick != null && clickDuration < TimeSpan.FromMilliseconds(300))
    {
        MessageBox.Show("Less than 300ms!");
    }

    startClick = null;
} 
```

# iphone - 使用 PhoneGap IAP 插件“无法连接到 iTunes Store”

> ID：11303388
> 
> 赞同：3
> 
> 时间：2012-07-03T01:34:55.083
> 
> 标签：iphone, cordova, in-app-purchase

我们已经使用 Matt Kane 的优秀插件在我们的一款产品中实现了应用内购买。我们正在成功处理购买，但是在进行远程调试时发现大量出现“无法连接到iTunes Store”错误，错误代码为2。根据下面的Apple参考，这个错误是SKErrorPaymentCancelled，这似乎表明用户点击了“取消”。

我只是想确定这些是用户实际点击“取消”按钮的真实事件，而不是我们代码中的技术故障。任何其他使用 IAP 插件的 PhoneGap iOS 开发人员能够提供一些启示吗？

[https://github.com/phonegap/phonegap-plugins/tree/master/iOS/InAppPurchaseManager](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/InAppPurchaseManager)

[http://developer.apple.com/library/mac/#documentation/StoreKit/Reference/StoreKitTypes/Reference/reference.html](http://developer.apple.com/library/mac/#documentation/StoreKit/Reference/StoreKitTypes/Reference/reference.html)

# iphone - 核心显卡RGB数据问题

> ID：11303390
> 
> 赞同：0
> 
> 时间：2012-07-03T01:35:07.543
> 
> 标签：iphone, ios, ios5, rgb, core-image

我正在尝试使用 Core Graphics 逐像素图像过滤器（使用 CFData 将 CGImage 分解为无符号整数）

但是，当我尝试使用处理后的数据创建图像时，生成的图像会出现明显不同的颜色。

我注释掉了整个循环，我实际上改变了像素的 rgb 值，也没有任何变化。

当我初始化我在过滤器中使用的 UIImage 时；我使用带有 UIGraphicsBeginContext() 的 drawInRect 进行调整大小；在从相机拍摄的图像上。

当我删除调整大小步骤并直接从相机设置我的图像时；过滤器似乎工作得很好。这是我初始化正在使用的图像的代码（来自 didFinishPickingImage 内部）

`self.editingImage`是 UIImageView 并且`self.editingUIImage`是 UIImage

```
-(void)imagePickerController:(UIImagePickerController *)picker
  didFinishPickingImage : (UIImage *)image
             editingInfo:(NSDictionary *)editingInfo
{

self.didAskForImage = YES;

UIGraphicsBeginImageContext(self.editingImage.frame.size);

float prop = image.size.width / image.size.height;

float left, top, width, height;

if(prop < 1){

    height = self.editingImage.frame.size.height;

    width = (height / image.size.height) * image.size.width;

    left = (self.editingImage.frame.size.width - width)/2;

    top = 0;

}else{

    width = self.editingImage.frame.size.width;

    height = (width / image.size.width) * image.size.height;

    top = (self.editingImage.frame.size.height - height)/2;

    left = 0;

}

[image drawInRect:CGRectMake(left, top, width, height)];

self.editingUIImage = UIGraphicsGetImageFromCurrentImageContext();

UIGraphicsEndImageContext();

self.editingImage.image = self.editingUIImage;

[self.contrastSlider addTarget:self action:@selector(doImageFilter:) forControlEvents:UIControlEventValueChanged];

[self.brightnessSlider addTarget:self action:@selector(doImageFilter:) forControlEvents:UIControlEventValueChanged];

[picker dismissModalViewControllerAnimated:YES];
picker = nil;
} 
```

就位置而言，按照我需要的方式调整图像大小；

这是图像过滤功能，我已将实际循环内容取出，因为它们无关紧要。

```
- (void) doImageFilter:(id)sender{

CGImageRef src = self.editingUIImage.CGImage;

CFDataRef dta;
dta = CGDataProviderCopyData(CGImageGetDataProvider(src));

UInt8 *pixData = (UInt8 *) CFDataGetBytePtr(dta);

int dtaLen = CFDataGetLength(dta);

for (int i = 0; i < dtaLen; i += 3) {
    //the loop
}

CGContextRef ctx;

ctx = CGBitmapContextCreate(pixData, CGImageGetWidth(src), CGImageGetHeight(src), 8, CGImageGetBytesPerRow(src), CGImageGetColorSpace(src), kCGImageAlphaPremultipliedLast);

CGImageRef newCG = CGBitmapContextCreateImage(ctx);
UIImage *new = [UIImage imageWithCGImage:newCG];

CGContextRelease(ctx);
CFRelease(dta);
CGImageRelease(newCG);

self.editingImage.image = new;

} 
```

图片一开始是这样的

![http://picsilk.com/media/before.png](../Images/5fa6f5482c1d0c1ecc535c76d7537fba.png)

然后在做doImageFilter ...

![http://picsilk.com/media/before.png](../Images/fd83038fe4e85fbc5f9e61b6d845feb5.png)

如前所述，这只发生在我使用上面显示的调整大小方法时。

真的很难过这个，整天都在研究它......非常感谢任何帮助！

干杯

更新：我检查了所有图像对象的颜色空间，它们都是 kCGColorSpaceDeviceRGB。对这个家伙感到很困惑，当我将图像分解为无符号整数时，我很可能出了点问题，但我不确定是什么......有人吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T02:16:20.527

您的问题在最后一行：

```
ctx = CGBitmapContextCreate(pixData, 
                            CGImageGetWidth(src), 
                            CGImageGetHeight(src), 
                            8, 
                            CGImageGetBytesPerRow(src), 
                            CGImageGetColorSpace(src), 
                            kCGImageAlphaPremultipliedLast); 
```

您正在对源图像数据的 alpha 和组件排序做出假设，这显然是不正确的。您应该通过`CGImageGetBitmapInfo(src)`.

为避免此类问题，如果您从任意 CGImage 开始并且想要直接操作位图的字节，最好以`CGBitmapContext`您自己指定的格式制作一个（而不是直接取自源图像） . 然后，将源图像绘制到位图上下文中；如有必要，CG 会将图像的数据转换为位图上下文的格式。然后从位图上下文中获取数据并对其进行操作。

# c++ - C++：如何遍历字符串中的每个字符？

> ID：11303391
> 
> 赞同：0
> 
> 时间：2012-07-03T01:35:23.960
> 
> 标签：c++, string, char

我有一个字符串，我需要在其中抓取每个字符并进行一些检查。

```
std::string key = "test"
int i = 0;
while (key.at(i))
{
    // do some checking
    i++;
} 
```

这样做的问题是，最终索引 i 将超出范围，因此系统将崩溃。我怎样才能解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T01:42:05.863

```
for(auto i = key.cbegin(); i != key.cend(); ++i)
{
    // do some checking
    // call *i to get a char
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T01:36:41.303

```
std::string key = "test"
for(int i = 0; i < key.length(); i++)
{
    //do some checking
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-14T08:10:37.120

你可以使用这样的 for 循环。

```
#include <string>

std::string str("hello");

        for(auto &c : str) {
            std::cout << c << std::endl;
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-16T03:59:03.180

另一种解决方案是使用`std::for_each()`并提供一个 lambda 函数来处理每个字符，如下所示：

```
std::string key = "testing 123";
std::for_each(key.cbegin(), key.cend(), [](char c){ std::cout << c; }); 
```

这打印：

```
testing 123 
```

# python - 从 Arduino 到 Python 的连续数据流（失败的 readlines）

> ID：11303396
> 
> 赞同：4
> 
> 时间：2012-07-03T01:36:22.540
> 
> 标签：python, serial-port, arduino

我正在尝试通过 Python 脚本不断地从我的[Arduino Nano中读取数据。](http://arduino.cc/en/Main/ArduinoBoardNano)但大多数时候，readline 要么无法抛出异常，要么返回损坏的数据，比如丢失一个数字。

这是连接部分：

Arduino代码：

```
void loop() {
    // Send data only when you receive data:
    if (Serial.available() > 0) {

        // Check if it's the right signal.
        if (Serial.read()=='S') {
            // Send a string containing the rows and cols number.
            send_rows_cols();

        } // if(Serial.read()=='S')
        else {
            send_data();
        } // END: else if( Serial.read()=='Y')
    }// if(Serial.available() > 0)
} 
```

在 中`send_rows_cols()`，我正在使用`Serial.write`，因为它可以工作，但在`send_data()`我必须使用`Serial.println()`将数据发回。

Python 部分。这是在返回合法值之前我不得不使用的荒谬的运行方式。

```
import serial
import time

locations=['/dev/ttyUSB0','/dev/ttyUSB1','/dev/ttyUSB2','/dev/ttyUSB3',
'/dev/ttyS0','/dev/ttyS1','/dev/ttyS2','/dev/ttyS3']

for device in locations:
    try:
        print "Trying...",device
        arduino = serial.Serial(device, 9600)
        break
    except:
        print "Failed to connect on",device

rows_cols =''

try:

    while True:
        arduino.write('S')
        rows_cols = str(arduino.readline())
        print len(rows_cols)
        print rows_cols
        if ( len(rows_cols)>3 ):
            break

except:
    print "Failed to send!" 
```

到目前为止，它在一到两条 readlines 之后就可以工作了。这是负担得起的。但后来，我不得不使用更疯狂的代码。将一个字符从 Python 发送到 Arduino，这样连接就不会中断，然后您可以看到 Arduino 必须等待该字符。在 Arduino 接收到该字符后，它会发回我想要的数据（一串用逗号分隔的数字）。

最后一个 Python 部分是它一次又一次地从 Arduino 发送“Y”字符和读取行，直到没有异常或损坏的数据。这么多循环无用。

我想要的是一种从我的 Arduino 中连续获取数据的方法，而无需一直进行“握手”，并且这些数据不会一直都是垃圾。

有没有这样的方法？也许串行的超时选项？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T08:12:16.687

您还没有打开 Arduino IDE 串行监视器吗？我花了一个“愉快”的晚上调试我的“Python 到 Arduino 接口代码”，然后才意识到我已经把它打开了，它正在吃偶尔的字符:)

我当然使用了非常简单的代码`Serial.write()`和`Serial.println()`代码`readline()`来一次连续运行数十分钟的“命令/响应”测试（数千行发送和接收）

# facebook - 如何更改 facebook fanpage 签名文本和链接

> ID：11303401
> 
> 赞同：-1
> 
> 时间：2012-07-03T01:36:43.080
> 
> 标签：facebook

我想更改或编辑我的粉丝专页签名。

当任何提要发布到我的粉丝页面时，描述下都会有一个签名，并以带有链接的文本 appname 开头。

如何更改签名中的 appname 和 appname 链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T07:18:32.003

“via X”是应用程序名称，以及指向应用程序的链接。您可以在应用程序设置中更改两者；该应用程序的链接将是您的画布或网站

# utf-8 - 强制从 US-ASCII 编码为 UTF-8 (iconv)

> ID：11303405
> 
> 赞同：68
> 
> 时间：2012-07-03T01:37:46.403
> 
> 标签：utf-8, character-encoding, iconv

我正在尝试将一堆文件从 US-ASCII 转码为 UTF-8。

为此，我正在使用 iconv：

```
iconv -f US-ASCII -t UTF-8 file.php > file-utf8.php 
```

我的原始文件是 US-ASCII 编码的，这使得转换不会发生。显然它发生是因为 ASCII 是 UTF-8 的子集......

*[iconv 美国 ASCII 转 UTF-8 或 ISO-8859-15](http://www.linuxquestions.org/questions/linux-software-2/iconv-us-ascii-to-utf-8-or-iso-8859-15-a-705054/)*

并引用：

> 在引入非 ASCII 字符之前，不需要以其他方式显示文本文件

真的。如果我在文件中引入非 ASCII 字符并保存它，假设使用[Eclipse](https://en.wikipedia.org/wiki/Eclipse_%28software%29)，文件编码（字符集）将切换为 UTF-8。

就我而言，我想**强制 iconv 将文件转码为 UTF-8**。里面是否有非ASCII字符。

注意：原因是我的 PHP 代码（非 ASCII 文件...）正在处理一些非 ASCII 字符串，这导致字符串无法很好地解释（法语）：

> Il Ã©tait une fois... l'homme série animée mythique d'Albert
> 
> Barilla© (Procidis), 1ère
> 
> ...

*   `US ASCII`--**是**-- 的一个子集`UTF-8`（见下面[Ned 的回答](https://stackoverflow.com/a/11303410/925307)）
*   这意味着美国 ASCII 文件**实际上**是用`UTF-8`
*   我的问题来自其他地方

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-07-03T01:39:14.523

ASCII 是 UTF-8 的一个子集，因此所有 ASCII 文件都已经是 UTF-8 编码的。ASCII 文件中的字节和“将其编码为 UTF-8”所产生的字节将是完全相同的字节。它们之间没有区别，因此无需做任何事情。

看起来您的问题是文件实际上不是 ASCII。您需要确定他们使用的编码，并正确转码。

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2016-03-16T09:04:18.063

# 简答

*   `file`仅猜测文件编码并且可能是错误的（特别是在特殊字符仅在大文件中出现较晚的情况下）。
*   您可以使用`hexdump`查看非 7 位 ASCII 文本的字节，并与常见编码（ISO 8859-*、UTF-8）的代码表进行比较，以自行决定编码是什么。
*   `iconv`无论文件的内容是什么，都将使用您指定的任何输入/输出编码。如果你指定了错误的输入编码，输出就会出现乱码。
*   即使在运行之后，由于尝试猜测编码的方式有限`iconv`，也可能不会报告任何更改。具体例子见我的长回答。`file``file`
*   7 位 ASCII（又名 US ASCII）在字节级别上与 UTF-8 和 8 位 ASCII 扩展（ISO 8859-*）相同。因此，如果您的文件只有 7 位字符，那么您可以将其称为 UTF-8、ISO 8859-* 或 US ASCII，因为在字节级别它们都是相同的。只有在您的文件包含 7 位 ASCII 范围之外的字符时，才有意义谈论 UTF-8 和其他编码（在此上下文中）。

# 长答案

我今天遇到了这个问题，遇到了你的问题。也许我可以添加更多信息来帮助遇到此问题的其他人。

## ASCII

首先，术语 ASCII 是重载的，这会导致混淆。

7 位 ASCII 仅包含 128 个字符（十进制的 00-7F 或 0-127）。7 位 ASCII 有时也称为 US-ASCII。

*[ASCII](https://en.wikipedia.org/wiki/ASCII)*

## UTF-8

UTF-8 编码对其前 128 个字符使用与 7 位 ASCII 相同的编码。因此，仅包含前 128 个字符范围内的字符的文本文件在字节级别上将是相同的，无论是使用 UTF-8 还是 7 位 ASCII 编码。

*[代码页布局](https://en.wikipedia.org/wiki/UTF-8#Codepage_layout)*

## ISO 8859-* 和其他 ASCII 扩展

> 术语*扩展 ASCII*（或*高位 ASCII*）是指 8 位或更大的字符编码，包括标准的 7 位 ASCII 字符以及其他字符。

*[扩展的 ASCII](https://en.wikipedia.org/wiki/Extended_ASCII)*

ISO 8859-1（又名“ISO Latin 1”）是一种特定的 8 位 ASCII 扩展标准，涵盖了西欧的大多数字符。东欧语言和西里尔语言还有其他 ISO 标准。ISO 8859-1 包括对德语和西班牙语的 Ö、é、ñ 和 ß 等字符的编码（UTF-8 也支持这些字符，但底层编码不同）。

“扩展”是指 ISO 8859-1 包含 7 位 ASCII 标准，并使用第 8 位向其添加字符。因此，对于前 128 个字符，ISO 8859-1 在字节级别上等同于 ASCII 和 UTF-8 编码文件。但是，当您开始处理前 128 个字符以外的字符时，您在字节级别不再是 UTF-8 等价物，如果您希望“扩展 ASCII”编码文件是 UTF-8 编码的，则必须进行转换。

*[ISO 8859 和专有改编](https://en.wikipedia.org/wiki/Extended_ASCII#ISO_8859_and_proprietary_adaptations)*

## 检测编码`file`

我今天学到的一个教训是，我们不能相信`file`总是对文件的字符编码给出正确的解释。

*[文件（命令）](https://en.wikipedia.org/wiki/File_%28command%29)*

> 该命令只告诉文件看起来像什么，而不是它是什么（在文件查看内容的情况下）。通过将幻数放入内容不匹配的文件中很容易欺骗程序。因此，除了在特定情况下，该命令不能用作安全工具。

`file`在文件中寻找暗示类型的幻数，但这些可能是错误的，不能保证正确性。`file`还尝试通过查看文件中的字节来猜测字符编码。基本上`file`有一系列测试可以帮助它猜测文件类型和编码。

我的文件是一个大的 CSV 文件。`file`将此文件报告为美国 ASCII 编码，这是**错误**的。

```
$ ls -lh
total 850832
-rw-r--r--  1 mattp  staff   415M Mar 14 16:38 source-file
$ file -b --mime-type source-file
text/plain
$ file -b --mime-encoding source-file
us-ascii 
```

我的文件中有变音符号（即 Ö）。第一个非 7 位 ascii 直到文件超过 100k 行才会显示。我怀疑这就是为什么`file`没有意识到文件编码不是 US-ASCII 的原因。

```
$ pcregrep -no '[^\x00-\x7F]' source-file | head -n1
102321:� 
```

我在 Mac 上，所以使用[PCRE 的](https://en.wikipedia.org/wiki/Perl_Compatible_Regular_Expressions) `grep`. 使用 GNU grep 您可以使用该`-P`选项。或者，在 Mac 上，可以安装[coreutils](https://en.wikipedia.org/wiki/GNU_Core_Utilities)（通过[Homebrew](https://en.wikipedia.org/wiki/Homebrew_%28package_management_software%29)或其他）以获得 GNU grep。

我没有深入研究 的源代码`file`，并且手册页没有详细讨论文本编码检测，但我猜`file`在猜测编码之前不会查看整个文件。

无论我的文件编码是什么，这些非 7 位 ASCII 字符都会破坏内容。我的德语 CSV 文件是`;`- 分隔的，并且无法提取单个列。

```
$ cut -d";" -f1 source-file > tmp
cut: stdin: Illegal byte sequence
$ wc -l *
 3081673 source-file
  102320 tmp
 3183993 total 
```

请注意`cut`错误，我的“tmp”文件只有 102320 行，第一个特殊字符位于第 102321 行。

我们来看看这些非ASCII字符是如何编码的。我将第一个非 7 位 ascii 转储到`hexdump`，进行一些格式化，删除换行符 ( `0a`) 并只取前几个。

```
$ pcregrep -o '[^\x00-\x7F]' source-file | head -n1 | hexdump -v -e '1/1 "%02x\n"'
d6
0a 
```

其他方式。我知道第一个非 7 位 ASCII 字符位于第 102321 行的第 85 位。我抓住那行并告诉`hexdump`从第 85 位开始取两个字节。你可以看到特殊的（非 7 位 ASCII）用“.”表示的字符，下一个字节是“M”……所以这是单字节字符编码。

```
$ tail -n +102321 source-file | head -n1 | hexdump -C -s85 -n2
00000055  d6 4d                                             |.M|
00000057 
```

在这两种情况下，我们都看到特殊字符由 表示`d6`。由于这个字符是一个 Ö，它是一个德语字母，我猜 ISO 8859-1 应该包括这个。果然，您可以看到“d6”是一个匹配项（*[ISO/IEC 8859-1](https://en.wikipedia.org/wiki/ISO/IEC_8859-1#Codepage_layout)*）。

重要的问题......我怎么知道这个字符是 Ö 而不是确定文件编码？答案是上下文。我打开文件，阅读文本，然后确定它应该是什么字符。如果我在[Vim中打开它，它会显示为 Ö，因为 Vim 在](https://en.wikipedia.org/wiki/Vim_%28text_editor%29)*猜测*字符编码（在这种情况下）方面做得更好`file`。

所以，我的文件似乎是 ISO 8859-1。从理论上讲，我应该检查其余的非 7 位 ASCII 字符，以确保 ISO 8859-1 非常适合......在将文件写入磁盘时，没有什么会迫使程序只使用单一编码（除了礼貌）。

我将跳过检查并继续进行转换步骤。

```
$ iconv -f iso-8859-1 -t utf8 source-file > output-file
$ file -b --mime-encoding output-file
us-ascii 
```

唔。`file`即使在转换后仍然告诉我这个文件是美国 ASCII。让我们`hexdump`再次检查。

```
$ tail -n +102321 output-file | head -n1 | hexdump -C -s85 -n2
00000055  c3 96                                             |..|
00000057 
```

绝对是改变。请注意，我们有两个非 7 位 ASCII 字节（由右侧的“.”表示），两个字节的十六进制代码现在是`c3 96`. 如果我们看一下，似乎我们现在有 UTF-8（`c3 96`是 UTF-8 中的编码`Ö`） *[UTF-8 编码表和 Unicode 字符](http://www.utf8-chartable.de/)*

但`file`仍将我们的文件报告为`us-ascii`? 好吧，我认为这可以追溯到`file`不查看整个文件以及第一个非 7 位 ASCII 字符直到文件后期才出现的事实。

我会`sed`在文件的开头加上一个Ö，看看会发生什么。

```
$ sed '1s/^/Ö\'$'\n/' source-file > test-file
$ head -n1 test-file
Ö
$ head -n1 test-file | hexdump -C
00000000  c3 96 0a                                          |...|
00000003 
```

酷，我们有一个变音符号。请注意编码虽然是`c3 96`（UTF-8）。唔。

再次检查同一文件中的其他变音符号：

```
$ tail -n +102322 test-file | head -n1 | hexdump -C -s85 -n2
00000055  d6 4d                                             |.M|
00000057 
```

ISO 8859-1。哎呀！它只是说明搞砸编码是多么容易。需要明确的是，我已经设法在同一个文件中创建了 UTF-8 和 ISO 8859-1 编码的混合。

让我们尝试在前面使用变音符号 (Ö) 转换我们的损坏（混合编码）测试文件，看看会发生什么。

```
$ iconv -f iso-8859-1 -t utf8 test-file > test-file-converted
$ head -n1 test-file-converted | hexdump -C
00000000  c3 83 c2 96 0a                                    |.....|
00000005
$ tail -n +102322 test-file-converted | head -n1 | hexdump -C -s85 -n2
00000055  c3 96                                             |..|
00000057 
```

UTF-8 的第一个变音符号被解释为 ISO 8859-1，因为这是我们告诉的`iconv`……不是我们想要的，但这就是我们告诉 iconf 要做的。第二个变音符号正确地从`d6`(ISO 8859-1) 转换为`c3 96`(UTF-8)。

我会再试一次，但这次我将使用 Vim 进行 Ö 插入而不是`sed`. Vim 之前似乎可以更好地检测编码（如“latin1”又名 ISO 8859-1），因此它可能会插入具有一致编码的新 Ö。

```
$ vim source-file
$ head -n1 test-file-2
�
$ head -n1 test-file-2 | hexdump -C
00000000  d6 0d 0a                                          |...|
00000003
$ tail -n +102322 test-file-2 | head -n1 | hexdump -C -s85 -n2
00000055  d6 4d                                             |.M|
00000057 
```

事实上，vim 在文件开头插入字符时使用了正确/一致的 ISO 编码。

现在测试：文件在识别文件开头带有特殊字符的编码方面做得更好吗？

```
$ file -b --mime-encoding test-file-2
iso-8859-1
$ iconv -f iso-8859-1 -t utf8 test-file-2 > test-file-2-converted
$ file -b --mime-encoding test-file-2-converted
utf-8 
```

是的，它确实！故事的道德启示。不要相信`file`总是猜对你的编码。在同一个文件中混合编码很容易。如有疑问，请查看十六进制。

解决处理大文件时的这种特定限制的一种技巧是`file`缩短文件以确保特殊（非 ascii）字符出现在文件的早期，以便`file`更有可能找到它们。

```
$ first_special=$(pcregrep -o1 -n '()[^\x00-\x7F]' source-file | head -n1 | cut -d":" -f1)
$ tail -n +$first_special source-file > /tmp/source-file-shorter
$ file -b --mime-encoding /tmp/source-file-shorter
iso-8859-1 
```

然后，您可以使用（可能是正确的）检测到的编码作为输入，`iconv`以确保您正确转换。

# 更新

Christos Zoulas 进行了更新`file`，以使查看的字节数可配置。功能请求的一天周转，太棒了！

[http://bugs.gw.com/view.php?id=533](http://bugs.gw.com/view.php?id=533) *[允许从命令行更改从分析文件中读取的字节数](https://github.com/file/file/commit/d04de269e0b06ccd0a7d1bf4974fed1d75be7d9e)*

该功能在`file`5.26 版中发布。

在猜测编码之前查看更多的大文件需要时间。但是，对于更好的猜测可能超过额外的时间和 I/O 的特定用例，有一个选项是很好的。

使用以下选项：

```
−P, −−parameter name=value

    Set various parameter limits.

    Name    Default     Explanation
    bytes   1048576     max number of bytes to read from file 
```

就像是...

```
file_to_check="myfile"
bytes_to_scan=$(wc -c < $file_to_check)
file -b --mime-encoding -P bytes=$bytes_to_scan $file_to_check 
```

...如果您想`file`在猜测之前强制查看整个文件，它应该可以解决问题。当然，这仅在您拥有`file`5.26 或更高版本时才有效。

# 强制`file`显示 UTF-8 而不是 US-ASCII

`file`即使文件仅包含纯 7 位 ascii ，其他一些答案似乎也侧重于尝试显示 UTF-8。如果你想通了，你可能永远不想这样做。

1.  如果一个文件只包含 7 位 ascii 但`file`命令说该文件是 UTF-8，这意味着该文件包含一些具有 UTF-8 特定编码的字符。如果这不是真的，它可能会导致混乱或问题。如果`file`文件只包含 7 位 ascii 字符时显示 UTF-8，这将是`file`程序中的错误。
2.  任何需要 UTF-8 格式输入文件的软件在使用纯 7 位 ascii 时应该没有任何问题，因为这在字节级别上与 UTF-8 相同。如果有软件`file`在接受文件作为输入之前使用命令输出，并且除非它“看到” UTF-8，否则它不会处理该文件......那是非常糟糕的设计。我认为这是该程序中的一个错误。

如果您绝对必须获取一个普通的 7 位 ascii 文件并将其转换为 UTF-8，只需将一个非 7 位 ascii 字符插入到该字符的 UTF-8 编码文件中，您就完成了。但我无法想象你需要这样做的用例。最简单的 UTF-8 字符是字节顺序标记 ( *[BOM](https://en.wikipedia.org/wiki/Byte_order_mark#UTF-8)* )，它是一种特殊的非打印字符，提示文件是非 ascii。这可能是最好的选择，因为它不应该在视觉上影响文件内容，因为它通常会被忽略。

> Microsoft 编译器和解释器以及 Microsoft Windows 上的许多软件（如记事本）将 BOM 视为必需的幻数，而不是使用启发式方法。这些工具在将文本保存为 UTF-8 时会添加 BOM，**除非 BOM 存在或文件仅包含 ASCII ，否则无法解释 UTF-8**。

这是关键：

> 或文件仅包含 ASCII

因此，除非 BOM 字符存在，否则 Windows 上的某些工具无法读取 UTF-8 文件。但是，这不会影响纯 7 位纯 ascii 文件。即，这不是通过添加 BOM 字符来强制普通 7 位 ascii 文件为 UTF-8 的原因。

这里有更多关于在不需要时使用 BOM 的潜在缺陷的讨论（某些 Microsoft 应用程序使用的实际 UTF-8 文件需要它）。 [https://stackoverflow.com/a/13398447/3616686](https://stackoverflow.com/a/13398447/3616686)

不过，如果您仍然想这样做，我很想听听您的用例。这里是如何。在 UTF-8 中，BOM 由十六进制序列表示`0xEF,0xBB,0xBF`，因此我们可以轻松地将这个字符添加到我们普通的 7 位 ascii 文件的前面。通过在文件中添加非 7 位 ascii 字符，文件不再只是 7 位 ascii。请注意，我们根本没有修改或转换原始的 7 位 ASCII 内容。我们在文件开头添加了一个非 7 位 ASCII 字符，因此文件不再完全由 7 位 ASCII 字符组成。

```
$ printf '\xEF\xBB\xBF' > bom.txt # put a UTF-8 BOM char in new file
$ file bom.txt
bom.txt: UTF-8 Unicode text, with no line terminators
$ file plain-ascii.txt  # our pure 7-bit ascii file
plain-ascii.txt: ASCII text
$ cat bom.txt plain-ascii.txt > plain-ascii-with-utf8-bom.txt # put them together into one new file with the BOM first
$ file plain-ascii-with-utf8-bom.txt
plain-ascii-with-utf8-bom.txt: UTF-8 Unicode (with BOM) text 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2016-03-22T08:49:53.210

人们说你不能，我理解你在提出问题并得到这样的答案时可能会感到沮丧。

如果您真的希望它以 UTF-8 而不是 US ASCII 显示，那么您需要分两步完成。

第一的：

```
iconv -f us-ascii -t utf-16 yourfile > youfileinutf16.* 
```

第二：

```
iconv -f utf-16le -t utf-8 yourfileinutf16 > yourfileinutf8.* 
```

然后，如果你执行 a `file -i`，你会看到新的字符集是 UTF-8。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-07-03T01:58:48.160

我认为[Ned 找到了问题的核心](https://stackoverflow.com/questions/11303405/force-encode-from-us-ascii-to-utf-8-iconv/11303410#11303410)——你的文件实际上不是 ASCII。尝试

```
iconv -f ISO-8859-1 -t UTF-8 file.php > file-utf8.php 
```

我只是猜测您实际上是在使用[ISO 8859-1](http://en.wikipedia.org/wiki/ISO/IEC_8859-1)。它在大多数欧洲语言中都很流行。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-08-04T09:31:53.753

US ASCII 和 UTF-8 之间没有区别，因此无需重新转换。

但是这里有一点提示，如果您在重新编码时遇到特殊字符问题。

在 source-charset-Parameter 之后添加 //TRANSLIT。

**例子：**

```
iconv -f ISO-8859-1//TRANSLIT -t UTF-8 filename.sql > utf8-filename.sql 
```

这有助于我处理奇怪类型的引号，这些引号总是会破坏字符集重新编码过程。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-07-12T17:22:06.627

这是一个脚本，它将查找与您传递的模式匹配的所有文件，然后将它们从当前文件编码转换为 UTF-8。如果编码是 US ASCII，那么它仍将显示为 US ASCII，因为那是 UTF-8 的子集。

```
#!/usr/bin/env bash
find . -name "${1}" |
    while read line;
    do
        echo "***************************"
        echo "Converting ${line}"

        encoding=$(file -b --mime-encoding ${line})
        echo "Found Encoding: ${encoding}"

        iconv -f "${encoding}" -t "utf-8" ${line} -o ${line}.tmp
        mv ${line}.tmp ${line}
    done 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-06-27T21:17:01.383

您可以使用它`file -i file_name`来检查您的原始文件格式到底是什么。

一旦你得到它，你可以执行以下操作：

```
iconv -f old_format -t utf-8 input_file -o output_file 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-03-13T02:39:28.220

我不小心用 UTF-7 编码了一个文件并且遇到了类似的问题。当我输入时， `file -i name.file`我会得到`charset=us-ascii`.

`iconv -f us-ascii -t utf-9//translit name.file`因为我收集到 UTF-7 是 US ASCII 的一个子集，所以不起作用，因为 UTF-8 也是如此。

为了解决这个问题，我输入了

`iconv -f UTF-7 -t UTF-8//TRANSLIT name.file -o output.file`

除了其他人在这里提出的建议之外，我不确定如何确定编码。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-06-09T16:41:31.110

```
vim -es '+set fileencoding=utf-8' '+wq!' file 
```

`-es``ex`在and模式下运行 vim `script`，因此不会渲染任何内容。然后它执行设置文件编码的命令（vim 负责细节），然后关闭文件'+wq！'。

我迟到了这个问题，但是之前使用的答案根本没有完成这项工作，即使添加删除这些`iconv`字符，文件也处于非 utf-8 字符的状态。`-c`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-01-07T12:59:07.597

以下转换文件夹中的所有文件。

**创建原始文件的备份文件夹**。

```
mkdir backup 
```

**将美国 ASCII 编码的所有文件转换为 UTF-8（单行命令）**

```
for f in $(file -i * .sql | grep us-ascii | cut -d ':' -f 1); do iconv -f us-ascii -t utf-8 $f -o $ f.utf-8 && mv $f backup / && mv "$f.utf-8" $f; done 
```

**将编码 ISO 8859-1 的所有文件转换为 UTF-8（单行命令）**

```
for f $(file -i * .sql | grep iso-8859-1 | cut -d ':' -f 1); do iconv -f iso-8859-1 -t utf-8 $f -o $f.utf-8 && mv $f backup / && mv "$f.utf-8" $f; done 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-03-03T00:47:23.800

[Mathieu 的回答](https://stackoverflow.com/questions/11303405/force-encode-from-us-ascii-to-utf-8-iconv/36149803#36149803)和[Marcelo 的回答](https://stackoverflow.com/questions/11303405/force-encode-from-us-ascii-to-utf-8-iconv/59628912#59628912)深受启发：

我需要看到`file -i myfile.htm`显示 UTF-8 而不是 US ASCII（是的，我知道它是 UTF-8 的子集）。

因此，这是一个受先前答案启发的衬线，它将在 Linux 上将所有 *.htm 文件从 US ASCII 转换为 UTF-8，因此`file -i`将向您展示 UTF-8。您可以更改 *.htm（以下命令中的两个位置）以满足您的需要。

```
mkdir backup 2>/dev/null; for f in $(file -i *.htm | grep -i us-ascii | cut -d ':' -f 1); do iconv -f "us-ascii" -t "utf-16" $f > $f.tmp; iconv -f "utf-16le" -t "utf-8" $f.tmp > $f.utf8; cp $fic backup/; mv $f.utf8 $f; rm $f.tmp; done; file -i *.htm 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-09-23T05:21:55.647

仅供参考，默认情况下`file`不会检查整个内容（如[mattpr](https://stackoverflow.com/questions/11303405/force-encode-from-us-ascii-to-utf-8-iconv/36030982#36030982)的长答案中所述）以检测文件的编码。要强制扫描整个内容以进行字符集检测，可以使用此代码...

```
file_to_check="myfile"
bytes_to_scan=$(wc -c < $file_to_check)
file -b --mime-encoding --parameter encoding=$bytes_to_scan $file_to_check 
```

另见相应手册[https://man7.org/linux/man-pages/man1/file.1.html](https://man7.org/linux/man-pages/man1/file.1.html)

# mysql - mysql 1064 错误

> ID：11303406
> 
> 赞同：-1
> 
> 时间：2012-07-03T01:37:54.937
> 
> 标签：mysql, sql, mysql-error-1064

嗨，我正在尝试在使用以下代码截断表格之前保留表格的备份。

```
IF EXISTS (`emails3`) THEN
    SELECT * INTO `emails3` 
    FROM `emails1`;

    SELECT * INTO `emails3` 
    FROM `emails2` 
    WHERE NOT `word` IN (SELECT `word` 
                         FROM `emails1`) AND 
          `word` NOT IN (SELECT `word` 
                         FROM `emails3`);
END IF;

IF NOT EXISTS (`emails3`) THEN
            CREATE TABLE `emails3` SELECT * FROM `emails1`;
            SELECT * INTO `emails3` 
            FROM `emails2` 
            WHERE NOT `word` IN (SELECT `word` FROM `emails1`);
END IF;

TRUNCATE `emails1`; 
```

但我一直收到这个错误，因为我是一个 mysql 菜鸟，所以我看不出有什么问题，如果你能看到代码有什么问题，请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T02:08:48.977

您的查询是否存储在过程中？我不认为你可以直接运行它。我也怀疑

> 如果存在 ( `emails3`)

正在按预期工作。

您可以尝试将查询变成一个过程。

```
DELIMITER | 
Drop procedure if exists `backup_table`;
CREATE PROCEDURE `backup_table` () 

BEGIN 

IF EXISTS (SELECT COUNT(*) FROM information_schema.tables WHERE table_schema = 'test' AND table_name = 'emails3') THEN
    INSERT INTO `emails3` SELECT * FROM `emails1`;
    INSERT INTO `emails3` SELECT * FROM `emails2` 
        WHERE NOT `word` IN (SELECT `word` FROM `emails1`) 
             AND `word` NOT IN (SELECT `word` FROM `emails3`);
END IF;

END| 

DELIMITER ; 
```

# php - 如何仅在 Wordpress 中切换一页的主题

> ID：11303408
> 
> 赞同：5
> 
> 时间：2012-07-03T01:38:33.240
> 
> 标签：php, wordpress

有没有一种方法可以仅在 Wordpress 中更改为特定页面的特定主题？

我尝试了简单的主题切换器，但问题是它会永久改变主题。

我不想要那个...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T02:15:17.383

我不能 100% 确定您想要实现的确切目标 - 但如果只是为单个页面提供不同的显示（而不是真正更改所有主题以包含所有功能等），那么 -

您应该可以创建一个[页面模板](http://codex.wordpress.org/Pages#Page_Templates)，然后在您的页面的下拉菜单中选择它。

（在侧边栏中 - 页面属性 -> 模板）

在这种情况下，您还可以通过将特定功能添加到页面本身（在输出之前）来使用它们。

例如 ：

```
<?php
    /*
    Template Name: my-page-name
    */
    function my_specific_page_function() {
    //..do_whatever
    }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-20T03:19:50.540

有这个插件但是一年多没更新了

[http://wordpress.org/plugins/page-theme/](http://wordpress.org/plugins/page-theme/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-26T09:20:05.760

您可以使用免费插件 Freesoul Switch Theme 进行调试和永久使用

# ios - 有没有人在 iOS / iPhone 上体验过一个表单元素激活另一个表单元素？

> ID：11303411
> 
> 赞同：0
> 
> 时间：2012-07-03T01:39:15.177
> 
> 标签：ios, iframe

我有一个出现在 FancyBox iframe 模式中的表单。在 iOS 5 上（特别是在 iPhone 上 - 在 iPad 上不会发生），当我触摸提交按钮时，它会激活一个`<select>`出现在提交按钮上方约 50 像素处的按钮，然后我`<select>`会看到屏幕底部的选项。

我已经尽可能放大以验证我没有触摸选择 - 我确实单击了提交按钮，它按预期突出显示了自己，但是表单当然没有提交，我得到了选择的选项从。

有没有人在 iOS 5 中遇到过这样的错误？我无法将其归结为其他任何事情 - 通常会运行一些 javascript 来处理提交点击时的表单，但它根本没有被激活，它对表单本身没有影响`<select>`，等等。我见过iOS 上的 iframe 发生了一些奇怪的事情，想知道是否存在潜在的相关性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T05:38:51.360

您可能会将您的操作连接到与插座不同的按钮。这可以解释为什么会发生正确的事情（Action is OK）但更新 Frame Rect 会搞砸（Outlet 在错误的按钮上）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-19T05:14:31.870

ios 上的 iframe 的行为与其他所有浏览器（包括桌面 safari）中的普通 iframe 不同。

ios safari 将它们呈现在 iframe 内页面的整个高度。

要让它们像固定高度的普通 iframe 一样滚动，您必须将它们放在 div 中并将 div 溢出设置为自动或滚动。我猜你的模态叠加已经在这样做了。

但是，即使是没有特殊定位（除了使用父 div 裁剪其高度并使其可滚动）的普通页内 iframe，如果提交按钮的原始呈现位置低于父 div。

所以第一次提交会起作用，但如果表单返回缺少必填字段错误，您将无法再次点击提交按钮。

对我的旧 ipad 的进一步研究表明，如果提交按钮向下足够远，它甚至不会在第一次工作。

该错误存在于 ios 5.1.1 和**ios 8**的 Safari 浏览器中！！！

我可以在 iframe 中不是输入 type=submit 的任何元素上使用 onclick javascript 函数来强制表单为 form.submit()。

但特别是关于 iphone 问题，可能发生的是操作系统试图放大表单字段，以便用户可以清楚地看到他们正在输入的内容。对此的修复可能是在输入元素上声明至少 16px 的字体大小。这样，操作系统就知道该字段中的文本已经具有相当可读的大小，并且不会尝试放大。即使在 ios 8 中，放大到绝对定位的模态叠加层内的 iframe 的内容也是超级错误的。

# c - gtk + vte 回滚不起作用

> ID：11303412
> 
> 赞同：0
> 
> 时间：2012-07-03T01:39:26.127
> 
> 标签：c, gtk, vte

gtk+ 版本 2.24.8

vte 版本 0.28.2

我刚开始创建一个终端应用程序，但是，我在网上找到的所有示例 (5) 都没有工作回滚。vte 中的回滚是否有问题，还是我没有看到？这是一个例子：

```
#include <gtk/gtk.h>
#include <vte/vte.h>
#include <stdlib.h>
#include <unistd.h>
#include <stdio.h>
#include <gdk/gdkkeysyms.h> // includes GDK_q

/* gcc -Wall -g term.c -o term `pkg-config --cflags --libs gtk+-2.0 vte` */

long size;
char *buf;
char *ptr;

gboolean key_press_win_main (GtkWidget *widget, GdkEventKey *event, gpointer user_data);
void quit_activated();
static gboolean delete_event(GtkWidget *,GdkEvent *);

int main( int argc, char *argv[] )
{

  size = pathconf(".", _PC_PATH_MAX);
  if ((buf = (char *)malloc((size_t)size)) != NULL) ptr = getcwd(buf, (size_t)size);

  GtkWidget *window_main;
  GtkWidget *vbox;
  GtkWidget *vte;
  GtkWidget *notebook;
  GtkWidget *scrolled_window;
  GtkWidget *label;

  gtk_init (&argc, &argv);

  window_main = gtk_window_new (GTK_WINDOW_TOPLEVEL);
  gtk_window_set_title (GTK_WINDOW (window_main), "Caraterm v0.0.1");

  vbox = gtk_vbox_new(FALSE,0);
  gtk_container_add (GTK_CONTAINER (window_main), vbox);

  notebook = gtk_notebook_new ();
  gtk_notebook_set_tab_pos (GTK_NOTEBOOK (notebook), GTK_POS_BOTTOM);
  gtk_box_pack_start (GTK_BOX (vbox), notebook, TRUE, TRUE, 0);

  scrolled_window = gtk_scrolled_window_new (NULL, NULL);
  gtk_scrolled_window_set_policy (GTK_SCROLLED_WINDOW (scrolled_window), GTK_POLICY_AUTOMATIC, GTK_POLICY_AUTOMATIC);
  label = gtk_label_new ("term1");
  gtk_notebook_append_page (GTK_NOTEBOOK (notebook), scrolled_window, label);

  vte = vte_terminal_new();
  vte_terminal_set_background_transparent(VTE_TERMINAL(vte), FALSE);
  vte_terminal_set_size(VTE_TERMINAL(vte), 80, 45);
  vte_terminal_set_scrollback_lines(VTE_TERMINAL (vte), -1); /* infinite scrollback */
  vte_terminal_fork_command(VTE_TERMINAL(vte), NULL, NULL, NULL, ptr, TRUE, TRUE,TRUE);
  vte_terminal_set_scroll_on_keystroke(VTE_TERMINAL (vte), TRUE);
  gtk_scrolled_window_add_with_viewport (GTK_SCROLLED_WINDOW (scrolled_window), vte);

  printf("%s\n", vte_terminal_get_emulation(VTE_TERMINAL (vte)));

  g_signal_connect(G_OBJECT(window_main),"destroy",G_CALLBACK(quit_activated),NULL);
  g_signal_connect(G_OBJECT(window_main),"delete_event",G_CALLBACK(delete_event),NULL);
  g_signal_connect (G_OBJECT (window_main), "key_press_event", G_CALLBACK (key_press_win_main), NULL);

  gtk_widget_show (label);
  gtk_widget_show (notebook);
  gtk_widget_show (scrolled_window);
  gtk_widget_show (vte);
  gtk_widget_show (vbox);
  gtk_widget_show (window_main);

  gtk_main ();

  return 0;
}

gboolean key_press_win_main (GtkWidget *widget, GdkEventKey *event, gpointer user_data)

{

  switch (event->keyval)
  {
     case GDK_q:
            if (event -> state & GDK_CONTROL_MASK)
            {
        printf("entered q\n");
        quit_activated();
                    }

      break;

    default:
      return FALSE; 
  }

  return FALSE; 
}

void quit_activated()
{   
  gtk_main_quit();

}

static gboolean delete_event(GtkWidget *window_main,GdkEvent *event)
{  
  return FALSE;
} 
```

这个例子将滚动，但只是为了适应 vte 集的原始大小，`vte_terminal_set_size(VTE_TERMINAL(vte), 80, 45);`如果通过简单地点击返回或从程序产生输出来向终端添加更多行，则回滚缓冲区不会扩展。尽管指定了无限回滚，但它还是固定在 45 行`vte_terminal_set_scrollback_lines(VTE_TERMINAL (vte), -1); /* infinite scrollback */`

我错过了什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T22:46:21.167

为了让回滚工作，需要更改的行是：

```
scrolled_window = gtk_scrolled_window_new (NULL, NULL); 
```

到：

```
scrolled_window = gtk_scrolled_window_new (NULL, terminal->adjustment); 
```

其中终端定义为：

```
VteTerminal *terminal;

vte = vte_terminal_new();
terminal = VTE_TERMINAL (vte); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T03:59:48.103

我没有那么自信，因为我以前没有与 VTE 合作过。但是，看起来 vte_terminal 本身就是一个可滚动的小部件。我建议您尝试摆脱`scrolled_window`并查看。

另外，[这](https://code.google.com/p/termit/source/browse/trunk/src/utils.c?r=38)是我发现的一个例子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-04T12:23:48.963

试试这个它的作品

```
//gtk_scrolled_window_add_with_viewport (GTK_SCROLLED_WINDOW (scrolled_window), vte);
 gtk_container_add (GTK_CONTAINER(scrolled_window),vte); 
```

# ios - iPhone : 每日本地通知

> ID：11303413
> 
> 赞同：9
> 
> 时间：2012-07-03T01:39:29.187
> 
> 标签：ios, objective-c, iphone, notifications, uilocalnotification

我正在尝试实施本地通知

这是我设置的

```
 // Current date
    NSDate *date = [NSDate date]; 

    // Add one minute to the current time
    NSDate *dateToFire = [date dateByAddingTimeInterval:20];

    // Set the fire date/time
    [localNotification setFireDate:dateToFire];
    [localNotification setTimeZone:[NSTimeZone defaultTimeZone]]; 
```

而不是 20，我想设置一个固定的时间（每天）开始推送。

例如：我想在早上 6:00 推送通知弹出。

怎么可能呢？

谢谢

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-03T03:28:29.253

您只需要正确创建一个`NSDate`对象作为您的开火日期（时间）。而不是使用`[NSDate dateByAddingTimeInterval: 20]`，使用类似这样的东西：

```
NSCalendar *calendar = [NSCalendar currentCalendar];
NSDateComponents *components = [[NSDateComponents alloc] init];
[components setDay: 3];
[components setMonth: 7];
[components setYear: 2012];
[components setHour: 6];
[components setMinute: 0];
[components setSecond: 0];
[calendar setTimeZone: [NSTimeZone defaultTimeZone]];
NSDate *dateToFire = [calendar dateFromComponents:components]; 
```

[这是 Apple NSDateComponents API 文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDateComponents_Class/Reference/Reference.html)

然后当您将日期添加到通知中时，将重复间隔设置为一天：

```
[localNotification setFireDate: dateToFire];
[localNotification setTimeZone: [NSTimeZone defaultTimeZone]];
[localNotification setRepeatInterval: kCFCalendarUnitDay]; 
```

与所有与日期相关的代码一样，如果您的时区使用夏令时，请确保在切换到夏令时期间测试其工作方式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T03:28:41.083

我想你需要的是**NSDayCalendarUnit**。

你可以检查[这个](https://stackoverflow.com/questions/4363847/how-to-set-local-notification-repeat-interval-to-custom-time-interval)答案。这是另一个值得一读的教程[。](http://useyourloaf.com/blog/2010/09/13/repeating-an-ios-local-notification.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-09T09:12:19.790

```
 NSDate *alertTime = [[NSDate date] dateByAddingTimeInterval:10];
    UIApplication* app = [UIApplication sharedApplication];

    UILocalNotification* notifyAlarm = [[[UILocalNotification alloc] init] autorelease];
    if (notifyAlarm)
    {
        notifyAlarm.fireDate = alertTime;
        notifyAlarm.timeZone = [NSTimeZone defaultTimeZone];
        notifyAlarm.repeatInterval = 0;
        notifyAlarm.soundName = @"Glass.aiff";
        notifyAlarm.alertBody = @"Staff meeting in 30 minutes";

        [app scheduleLocalNotification:notifyAlarm];
    } 
```

# https - “org.apache.http.client.HttpResponseException：OK”是什么意思？

> ID：11303414
> 
> 赞同：1
> 
> 时间：2012-07-03T01:39:29.457
> 
> 标签：https, httpresponse, apache-httpclient-4.x

我正在使用 Apache Http 客户端 4.2。应用程序尝试连接到远程 HTTPS 目标，但失败并显示此堆栈跟踪：

```
org.apache.http.client.HttpResponseException: OK
    at org.apache.http.impl.client.BasicResponseHandler.handleResponse(BasicResponseHandler.java:68)
    at org.apache.http.impl.client.BasicResponseHandler.handleResponse(BasicResponseHandler.java:54)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:945)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:919)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:910) 
```

网络对这个特殊的例外只字未提。有谁知道这个“HttpResponseException：OK”是什么意思？

谢谢。

# mysql - RHEL5 rSync Mysql 服务器

> ID：11303421
> 
> 赞同：2
> 
> 时间：2012-07-03T01:40:07.843
> 
> 标签：mysql, linux, rsync

目标：能够实时同步2个linux服务器。

我担心的是在使用 Rsync 镜像 mysql 服务器之后。它唯一无法同步的是条目（即使用插入查询将数据插入数据库）。我将如何解决这个问题？

我做过的事情：

*   `scp`2个服务器的密钥，这样每次交易都不会询问密码
*   我用了

    ```
    rsync -avc /var/lib/mysql/ root@10.1.99.XXX:/var/lib/mysql/ 
    ```

    同步数据库/表，但无法同步条目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T13:49:43.483

岩崎，

它并不像使用 rsync 那样简单，因为 mysql 可能会在您推送文件时打开文件。Linux 可以进行文件复制，但是使用这种技术，表被锁定在内存中，直到数据库重新启动。

我确实有一个脚本可以执行同步部分，但它确实需要重新启动数据库，这可能不是您想要的（您提到实时同步）

# java - 在java中使用GSON序列化JSON文件

> ID：11303423
> 
> 赞同：0
> 
> 时间：2012-07-03T01:40:31.643
> 
> 标签：java, json, serialization, deserialization, gson

我想将此 JSON 转换为 java 中的对象：

```
{
    "mapping": [
        {
            "boardPosition": {
                "row": 1,
                "col": 1
            },
            "nodeId": 3242324
        },
        {
            "boardPosition": {
                "row": 1,
                "col": 2
            },
            "nodeId": 432423
        },
        {
            "boardPosition": {
                "row": 1,
                "col": 3
            },
            "nodeId": 424324132
        }
    ]
} 
```

这就是我创建 java 类的方式

```
class MapeoWumpus {
    public mapp mapping;

    }

class mapp{
    public boardP boardPosition;
    public String nodeId;
}

class boardP{
    public int row;
    public int col;

} 
```

然后当我尝试像这样转换我的文件时

```
MapeoWumpus mapa=new MapeoWumpus();
mapa=gson.fromJson(filetext, MapeoWumpus.class); 
```

我得到一个空对象

我能做些什么？

编辑：这是我的整个代码：

```
package parserjson;

import java.io.FileNotFoundException;
import java.util.*;
import com.google.gson.*;

public class Main {

    /**
     * @param args
     */
    public static void main(String[] args) throws FileNotFoundException {
            String filetext;
            ParserJson parser=new ParserJson();
            Gson gson=new Gson();
            MapeoWumpus mapa=new MapeoWumpus();
            filetext=parser.leerArchivo("b1.json");
            mapa=gson.fromJson(filetext, MapeoWumpus.class);
    }

} 
```

"leerArchivo" 只是获取 json 文件的一种方法，如您所见，我的 json 文件位于字符串变量中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T01:53:43.187

您应该将实例变量定义`mapp`为数组。因为您的 JSON 数据似乎包含映射数组。

```
class MapeoWumpus {
    public mapp[] mapping;

} 
```

在下面的代码中创建新的 MapeoWumpus 是不必要的

```
MapeoWumpus mapa=new MapeoWumpus();
mapa=gson.fromJson(filetext, MapeoWumpus.class); 
```

改成如下

```
MapeoWumpus mapa=gson.fromJson(filetext, MapeoWumpus.class); 
```

# css - 保持这些按钮居中，但它们之间没有间隙？

> ID：11303426
> 
> 赞同：0
> 
> 时间：2012-07-03T01:41:12.110
> 
> 标签：css

我确定我只是遗漏了一些简单的东西，但是我需要将这些按钮保持居中，就像它们的方式一样，在它们的包裹内，但是我需要两个按钮彼此相对，这样它看起来就像一个大按钮. 我不得不让每个按钮显示：内联，以保持它们居中。当我尝试使两个按钮浮动以使它们在那里相互抵靠时，我就会失去整个居中的东西。我把它扔进了一个jsfiddle：

[http://jsfiddle.net/Xe2YV/](http://jsfiddle.net/Xe2YV/)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T01:46:59.970

是的，只需从标签之间删除空格，或将其注释掉（[示例](http://jsfiddle.net/Xe2YV/1/)）。

```
<div id="buy">
 <div id="buttons-wrap">
  <a href="#" class="index-buy-price">$5</a><!--
  --><a href="#" class="index-buy-button">Grab This Deal</a>
 </div><!--end buttons-wrap-->
</div><!--end buy--> 
```

# image - 需要一个工具将多个图像背景设置为透明

> ID：11303428
> 
> 赞同：0
> 
> 时间：2012-07-03T01:41:19.573
> 
> 标签：image, background, png, transparent

我正在寻找将图像背景（黑色）设置为透明的软件/工具。

我想去除所有的黑色并使图像透明。

所有图像都是 .PNG，我大约有 191 个，因此为什么我需要一个工具来制作多张图像，否则可能需要很长时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T01:54:18.163

使用其中一个`graphicsmagick`或`imagemagick` `mogrify`带有`-transparent black`选项的工具。当我在您的单个示例图像上运行它时，它看起来像这样：

```
gm mogrify -transparent black 'sprite sheet 4.png' 
```

要执行其中的几百个，您可以像这样使用它：

```
for f in *.png ; do gm mogrify -transparent black "$f" ; done 
```

一定要处理文件的*副本*—— `mogrify`“就地”修改文件。

# html - .text 可以是两个不同 td 的直接子代吗？

> ID：11303429
> 
> 赞同：1
> 
> 时间：2012-07-03T01:41:20.870
> 
> 标签：html, rft

我的 RFT 代码是

```
table_cell = find(atList(
                atDescendant(".class" , "Html.TD")
                ,atChild(".text" , "normal")
            ),false
        ); 
```

它找到了两个对象。我只期待一个，因为我指定我想要带有直接孩子的 TD，其文本为“正常”。请参阅屏幕截图。

如果我然后在两个结果上使用 .getMappableParent() 方法发现我得到两个表（我在一个表之后），请参见图片。

谁能解释我怎么得到两个对象？

![在此处输入图像描述](../Images/b10a6101f8a9e814d658ca0cb6321ec4.png)

关于[atChild 和 RFT find() 方法的一些信息](http://publib.boulder.ibm.com/infocenter/rfthelp/v8r2/index.jsp?topic=/com.ibm.rational.test.ft.doc/topics/SearchingforTestObjects.html)

*atChild -- 一个或多个必须与起始测试对象的直接子对象匹配的属性*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T08:31:32.213

我不是 100% 确定，但我认为 RFT 使用“.text”作为元素的 XML 样式属性。 [http://www.w3schools.com/dom/prop_element_text.asp](http://www.w3schools.com/dom/prop_element_text.asp)

您正在查找 atList()，这意味着使用前面的规则结果作为输入一个接一个地应用查找规则，因此：

1- 搜索所有属于 RootTestObject 子项的 TD

2- 在这些 TD 中，搜索每个具有“正常”作为文本子项的 TD

但由于“.text”返回每个子节点中包含的**所有**文本，因此您会找到 2 个与此属性匹配的 TD。不过，我不确定文本匹配是如何工作的，我想不是精确匹配，而是一种正则表达式方式或包含。

您可以尝试从外表开始查找

> table_cell = table_outer().find(atList(atDescendant(".class" , "Html.TD") ,atChild(".text" , "normal") ),false);

或通过访问您的查找中的正确结果

> real_table_cell = table_cell[1];

希望这可以帮助。

# c - C语言中的游戏男孩颜色编程

> ID：11303430
> 
> 赞同：8
> 
> 时间：2012-07-03T01:41:22.183
> 
> 标签：c

有人可以指出我在 C 中开始 Game Boy Color 编程的源代码（编译器和教程让我完成所有设置）吗？我只发现了一堆损坏的链接，还有一堆文档确保你拥有最新的“Windows 95”操作系统哈哈哈

我正在寻找在 Windows 7、Mac OS X 或 Linux Ubuntu 12.04 上安装和开发 Game Boy Color 的分步说明。对于 Game Boy Color 开发，您会推荐哪种操作系统？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T02:24:01.350

在很多很多断开的链接之后，这里是一个很好的链接：

[http://www.loirak.com/gameboy/gbprog.php](http://www.loirak.com/gameboy/gbprog.php)

您还需要一个游戏机模拟器。我下载了gb98，效果很好。至于操作系统，我仍然不是 100% 确定。我明天将在 Linux 上下载它。

# java - 如何获取 OSGi 使用的所有 jar 路径？

> ID：11303432
> 
> 赞同：1
> 
> 时间：2012-07-03T01:41:33.910
> 
> 标签：java, osgi

我想获取可以在这些 jar 中搜索 .class 文件的所有 jar 路径。我编写了一个函数来搜索 App 主文件夹下的所有 jar，但遇到了一个问题——一些 jar 包存在但已过时，OSGi 未使用，例如。xxxx_1.0.0.jar 和 xxxx_1.2.0.jar 都存在，但 OSGi 只使用了 1.2.0。如果我在主文件夹中搜索，其中是否会出现在结果列表中。

那么有没有办法获取 OSGi 使用的所有 jar 文件？然后我可以过滤掉没有使用的jar文件。谢谢

**补充：** 我尝试使用这种方式获取所有Bundles的绝对URL，但是失败了：

```
StringBuffer sb = new StringBuffer();
Bundle[] bundles = com.ibm.director.services.storage.debugtool.Activator.context.getBundles();
for (Bundle bundle : bundles) {
    java.net.URL url = bundle.getClass().getProtectionDomain().getCodeSource().getLocation();
    sb.append("File:" + url.getFile() + ", Path:" + url.getPath() + "\n");
} 
```

但是下面的输出重复了一百次：

```
File:/opt/ibm/director/lwi/runtime/core/eclipse/plugins/org.eclipse.osgi_3.4.3.R34x_v20081215-1030-RCP20120203-1500.jar
File:/opt/ibm/director/lwi/runtime/core/eclipse/plugins/org.eclipse.osgi_3.4.3.R34x_v20081215-1030-RCP20120203-1500.jar, 
File:.... 
```

使用的 bundle 数量是：588，可能是正确的，我们可以从 API 获得绝对的 Bundles 路径，但为什么它们都一样？我怎样才能得到真正的路径？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T04:34:41.597

`BundleContext#getBundles()`给你所有的捆绑。然后，您可以比较符号名称和版本。但是，仅仅因为您同时拥有 xxxx_1.0.0.jar 和 xxxx_1.2.0.jar 并不意味着未使用 xxx_1.0.0.jar。可能还有其他一些需要 xxx_1.0.0.jar 的包。同样，仅仅因为一个包没有启动并不意味着它以后不会启动。您*不想*重新实现 OSGi 解析器。如果您想清理存储库，我建议您使用存储库供应商提供的应用程序，例如 p2 中的 GC Application。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T17:30:11.703

想想捆绑......只需做 bundle.getResource( clazz.getName().replace('.','/')+".class")

在重新编译之前，请查看包："OSGI-OPT/src/" + clazz.getName().replace('.','/')+".java"，实际的源代码可能在那里。

# jquery - 使用 jquery 定位类并更改 css 属性

> ID：11303435
> 
> 赞同：0
> 
> 时间：2012-07-03T01:41:51.560
> 
> 标签：jquery, css, target

我设置投资组合的方式是，如果潜在雇主想要查看某种编程语言，比如只说 PHP，他们勾选 PHP 框，所有涉及 PHP 的示例都会显示出来（可能来自 CMS，或者直接使用PHP）

这是有问题的页面

[http://evanparsons.net/samples.aspx](http://evanparsons.net/samples.aspx)

它现在可以工作了，但是如果我只想查看 AJAX 示例，那么只会显示一个，而不是我总共拥有的三个。如果我能以某种方式将淡入更改为 !important ，我认为这会起作用

我将它作为一个类来定位，所以由于某种原因 .attr 和 .css 不起作用，但是 opacity 起作用。我只是不能在显示属性中设置 !important 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T01:50:37.530

在您显示的示例中，当您单击 Ajax 时它显示的唯一 Ajax 示例是具有“Ajax”类的示例，即“Silverstripe 2.4 的共享事件日历模块”

您只有另一个 ajax 示例，它的 AJAX 类不匹配，因为它不是与 Ajax 的字符串匹配

AJAX != 阿贾克斯

因此，您的 jquery 选择器将不起作用，因为它区分大小写。另外我只能看到 2 个样本，而不是 3 个？

编辑：另外，在连接样本检查的 JS 中，最好使用

```
$('.samples :checkbox').each(function () { 
```

而不是

```
$(':checkbox').each(function () { 
```

因为它限制了 jquery 必须迭代的范围。

编辑：

为了解释为什么有些样本被隐藏了，这是因为你的

$(':checkbox').each(...)

正在工作中;

每次单击某些内容时都会触发检查控件，它会处理所有可以单击的复选框。想象一下，如果你的经历是这样的：

```
<div class='samples'>
    <div class='asp'>...</div>
    <div class='php asp'>...</div>
    <div class='php django'>
</div> 
```

如果您单击 ASP 复选框，它会循环并说，ok show sample 1 因为它有 ASP，然后它会循环并说 show sample 2 因为它有 ASP，然后它会再循环一次并看到示例 3 中没有 ASP，因此它将隐藏它。

然后它循环到下一个复选框（为了称为 PHP 的参数）；它从样本 2 开始（因为 .each 循环）并看到它没有被检查，所以它隐藏了样本 2，即使它之前显示过，对于样本 3 也是如此。

你明白我的意思吗？随后的 .each 迭代正在取消为复选框完成的显示；当您选择的复选框的 ID 出现在 HTML 布局中的实际示例之前。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T01:46:38.850

您在“AJAX”类而不是“Ajax”下列出了一个 div。改变它为我修复了它。

# php - mod_rewrite：隐藏 PHP 扩展并将查询字符串显示为目录

> ID：11303439
> 
> 赞同：0
> 
> 时间：2012-07-03T01:42:15.400
> 
> 标签：php, mod-rewrite

我有带有扩展名的文件，`.php`我想隐藏它们，并将查询字符串显示为重写的 PHP 扩展名的内部目录。

换句话说，我想`https://domain.com/page.php`

使用`https://domain.com/page/`（带有结尾斜杠）和 for

`https://domain.com/page/?id=1`访问

`https://domain.com/page/1/`（也有结尾的斜线）

我还想访问带有`.php`扩展名的页面返回 404 未找到。

我将如何在`.htacess`文件中执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T01:48:36.793

HTACCESS 需要看起来像这样：

```
RewriteEngine On
RewriteRule ^([A-z0-9]+)/$ $1.php
RewriteRule ^([A-z0-9]+)/([1-0]+)/$ $1.php?page=$2 
```

对于您将使用的自定义 404 错误：

```
ErrorDocument 404 /404/ 
```

但是，您需要确保将第一个重写规则应用于 404 页面。您将需要一个`404.php`文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T01:48:52.543

你可以试试这个[mod_rewrite 规则生成器](http://www.webmaster-toolkit.com/mod_rewrite-rewriterule-generator.shtml)。如果您想自己编写规则，这相当简单：它使用与 PHP preg_* 函数相同的正则表达式 :)

在您的特定情况下，使用`RewriteRule ^([A-z0-9]+)/([1-0]+)/$ $1.php?page=$2`

# c++ - 为什么 new 能够创建字符串数组？

> ID：11303440
> 
> 赞同：4
> 
> 时间：2012-07-03T01:42:27.570
> 
> 标签：c++, arrays, string, pointers, stl

我已经看到以下列方式使用字符串数组的代码。

```
string *pointer = new string[runtimeAmmount]; 
```

我还看到了按如下方式访问的字符串中的各个字符。

```
string aString = "this";
char bString[] = "that";
bString[3] = aString[3]; 
```

以上将导致 bString 等于“thas”。这表明字符串实际上是指向第一个字符位置的指针。然而，字符串仍然具有作为“string.c_str()”访问的成员函数，这意味着它本身作为对象不遵循指针的规则。这一切如何运作？

注意：我最初的问题是不同的，但我想把它打出来。如果有人仍然可以回答我最初的问题只是为了验证，我将不胜感激。我最初的问题如下：如果每个字符串在其整个生命周期中的长度都可以变化，那么字符串数组如何是新的？字符串不会相互碰撞吗？

我想出的答案是：字符串以某种方式包含指向 C 样式数组的指针，因此对象占用了一定数量的空间。

或者

字符串是 STL 模板中的一种，我还没有真正花时间去研究它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T01:50:57.870

我将解决您问题中 4 行代码中发生的情况，但首先我应该说您的结论不准确。您被`string`类中内置的运算符重载“愚弄”了。虽然很可能在*内部*，`string`该类维护了一个 C 样式的字符数组，但它是被封装的，`string`并且应该被视为一个不透明的对象，与 C 样式的字符串不同。

现在对于您的每一行：

```
string *pointer = new string[runtimeAmmount]; 
```

在这一行中，`pointer`设置为指向一个新分配的（空）`string` *对象*数组。 `runtimeAmmount`是数组中的字符串数，而不是 C 样式字符串中的字符数。

```
string aString = "this"; 
```

此行使用类中的（非显式）转换构造函数构造一个新的空字符串`string`： `string(const char *)`. （请注意，在非构造上下文中，例如`aString = "this";`，将使用类的`operator=(const char *)`重载`string`。）

```
char bString[] = "that"; 
```

这是一个典型的 C 字符串，被视为字符数组。

```
bString[3] = aString[3]; 
```

这使用类的重载`operator[]`来`string`返回一个字符（引用），然后将其分配给 C 样式字符数组中的第三个字符点。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T01:52:08.733

当你这样做时：

```
string *pointer = new string[runtimeAmmount]; 
```

您正在创建一个对象数组`string`。每个都是用`string::string`构造函数构造的，它可以做任何它需要做的事情。在这种情况下，`string`有一个指向内存的指针，该指针在构造函数中初始化。所以你的数组就像一个 char* 指针数组，每个指针都是单独分配的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-03T01:50:40.367

你的直觉是正确的。

C++ 中的字符串是一个对象，可以包含指向其他存储的指针。（他们不需要；如果你想知道为什么不谷歌“小字符串优化” - 但这是一种转移。）

如果您将字符串视为如下所示的结构：

```
struct str {
   int len; // number of bytes allocated
   char *data; // pointer to the data
}; 
```

然后您将能够看到字符串如何工作。请注意， std::string 实际上比这复杂得多；但这应该可以理解。

至于模板，`std::string`是`std::basic_string`, 专用于`char`(相对于`std::wstring`, 专用于`wchar_t`)的实例化

# c# - 在 php 中创建 C#/.Net json 日期

> ID：11303445
> 
> 赞同：0
> 
> 时间：2012-07-03T01:42:57.623
> 
> 标签：c#, php, .net, json, date-format

如何在 PHP 中创建可由 .NET 的非标准日期格式读取的日期字符串：

例如，鉴于此 PHP 代码：

```
$fetch = mysql_query("SELECT birthday FROM people"); 
while ($row = mysql_fetch_array($fetch, MYSQL_ASSOC)) {
    $birthday = $row['birthday'];
    $json = ??? // some way to convert it to the .net json format
} 
```

如何操作 PHP 日期以返回 C#/.Net 的 json 反序列化方法所期望的这种 JSON 样式：

```
{"birthday":"\/Date(1331550000000)\/"} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T19:58:51.323

The .NET format is Milliseconds from the Epoch - so the following format worked for me

```
 $date = '/Date('.(date("U",time())*1000).'-0500)/'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T01:48:31.380

.Net 的 json 反序列化方法可以接受任何 json 数据。您可以像下面这样构建 json。

```
$fetch = mysql_query("SELECT birthday FROM people"); 
$birthdays = array();
while ($row = mysql_fetch_array($fetch, MYSQL_ASSOC)) {
    $birthdays[] = $row;
}
$json = json_encode($birthdays);
echo $json; 
```

# objective-c - 调用类的成员函数？

> ID：11303451
> 
> 赞同：0
> 
> 时间：2012-07-03T01:44:33.520
> 
> 标签：objective-c, macos, cocoa

我创建了一个 NSImageView 的子类——我们称之为 MyView——并向它添加了一个成员函数——我们称之为“函数”。我另外创建了三个模型类。

然后使用 Interface Builder，我将 MyView 的三个单元格放入我的窗口中，因此在运行时将有它的三个对象实例。**我需要做的是让我的模型类在运行时从三个 MyView 实例/单元中调用“函数”。我该怎么做？**

例如：

模型类：A类、B类、C类

在运行时我想要：

*   A 类从 MyView 的第一个单元格/实例调用函数

*   B 类从 MyView 的第一个第二个单元格/实例调用函数

*   C 类从 MyView 的第一个第三个单元格/实例调用函数

请注意以下事项：

*   TheFunction 是 MyView 的成员函数

*   我正在为 Mac OSX 而不是 iOS 创建应用程序

*   我正在使用 Xcode 3.2.6

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T02:38:59.670

您完全违反了 MVC（模型视图控制器）的概念。从理论上讲，我们永远不应该从模型中调用任何方法来查看，反之亦然。

您可以在视图的控制器内创建一个插座，然后控制器应该是将视图数据传递给模型的控制器。

所以我假设你有 ViewControllers？如果是，则在您的 ViewController 中创建您的图像视图出口，然后让您的控制器在您的 ViewController 中拥有模型的实例，然后您在控制器中拥有模型和视图的实例，并且您可以在这些实例之间交换数据

# php - 从 PGSQL 解析 PHP

> ID：11303452
> 
> 赞同：0
> 
> 时间：2012-07-03T01:44:36.160
> 
> 标签：php

我有一个到 postgresql db 的连接，它返回以下结果

```
O4, MULTILINESTRING((-91.4272099951079 35.6984820849707,-91.2691971234476 35.8195546559061))
I4, MULTILINESTRING((-91.4668296641028 35.5407821819705,-91.3332878428544 35.7230307833947,-91.1889662757843 35.8834271551078)) 
```

使用此查询：

```
select id, astext(the_geom)from trkl 
```

我正在尝试生成如下文件，我必须反转线 35.xx 应该是第一个，-91.xx 最后是有一个简单的方法可以做到这一点吗？

```
"O4"
35.62200200, -88.98259200
35.62203500, -88.98240800
35.62202700, -88.98231000
35.62180000, -88.98163400
END:
"I4"
35.62200200, -88.98259200
35.62203500, -88.98240800
35.62202700, -88.98231000
35.62180000, -88.98163400
35.62175700, -88.98149000
35.62172500, -88.97881200
35.62172000, -88.97798500
35.62169800, -88.97752400
END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T07:33:49.557

假设您的坐标始终使用字符串中包含的 MULTILINESTRING 获取：

```
$output = array();
foreach ($results as $row)
{
    $row = explode(', ', $row, 2);
    $output[] = '"'.$row[0].'"';
    $row = explode(',', substr(rtrim($row[1], ')'), 17);
    for ($i = 0, $c = count($row); $i < $c; $i++)
    {
        $row[$i] = explode(' ', $row[$i], 2);
        $output[] = $row[$i][1].', '.$row[$i][0];
    }
}
$output = implode("\n", $output); 
```

有更好的解决方案，但这是最明显的解决方案，应该可以完成这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T04:18:12.557

我不熟悉此 PGSQL 以及从数据库中获取结果时的外观，但我认为这就是您正在寻找的......

```
$mls = '-91.4272099951079 35.6984820849707,-91.2691971234476 35.8195546559061';
$pairs = explode(',', $mls);
foreach ($pairs as $pair) {
    $coords = explode(' ', $pair);
    printf('%s, %s', $coords[1], $coords[0]);
} 
```

会输出

```
35.6984820849707, -91.4272099951079
35.8195546559061, -91.2691971234476 
```

# java - 在其他操作系统上存储文件时 AppData (Windows) 的替代方案

> ID：11303453
> 
> 赞同：2
> 
> 时间：2012-07-03T01:44:36.523
> 
> 标签：java, operating-system, appdata, userappdatapath

我正在使用 Java 开发一个游戏项目，我需要将`config.ini`文件存储在可执行位置以外的其他`jar`位置。我知道人们通常将它们保存`AppData`在 Windows 中，但我想让我的游戏完全可移植，完全不受操作系统限制。但要这样做，我需要知道在哪里存储此类文件。

我想知道人们通常将此类文件存储在其他 UNIX 操作系统上的什么位置，主要是 Ubuntu 或 Macintosh (OS X)。

如果您能向我解释一下有关此类操作系统的目录，我也将不胜感激，因为我不拥有任何这些系统。我的意思是，例如，在 Windows 中，人们通常将他们的应用程序放在桌面上，而 Mac 用户将它们放在应用程序文件夹中。在 Mac 的情况下，在该应用程序目录中创建一个文件夹会和在 Windows 桌面上创建一个文件夹一样糟糕吗？

此外，在 Ubuntu 的情况下，相当于 Windows 上的 AppData 的位置在哪里？Mac 的情况呢？保存游戏的屏幕截图或在里面创建保存游戏`AppData`或类似的东西是个坏主意吗？我真的不想使用通常的`Program Files`目录。

最后，一个更明智的代码问题。我知道在 Java 中，您可以获得 Window 的 AppData 位置并连接这样的路径，如下面的代码：

`Path FOO = Paths.get(System.getenv("AppData"), "BAR");`

Mac 和 Ubuntu 呢？以及如何检查用户使用的是 Windows 还是 Ubuntu？

* * *

```
非常感谢你，
-雷纳托
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T02:07:26.300

对于大多数类 Unix 操作系统，包括 Ubuntu 和其他 Linux 发行版，您应该遵循[XDG Base Directory 规范](http://standards.freedesktop.org/basedir-spec/basedir-spec-latest.html)，该规范描述了用户首选项应该存储在哪里（即环境变量的值，`$XDG_CONFIG_HOME`如果它存在，则回退到`~/.config/`）。此目录用于配置。保存游戏应该进入`$XDG_DATA_HOME`或者如果没有指定`~/.local/share`，类似地。

OS X 也类似于 Unix，但使用自己的路径。这[在 Mac OS X 上的 XDG_CONFIG_HOME 和 XDG_DATA_HOME 的等效项中进行了解释？](https://stackoverflow.com/questions/3373948/equivalents-of-xdg-config-home-and-xdg-data-home-on-mac-os-x).

# php - vs 两边单词的 Reg Exp

> ID：11303456
> 
> 赞同：2
> 
> 时间：2012-07-03T01:45:12.133
> 
> 标签：php, regex

我正在寻找一种从该字符串中获取以下数据的方法

```
DON'T FLOP - ‬Rap Battle - Illmaculate Vs Tony D

DON'T FLOP - ‬Rap Battle - $var1 Vs $var2 
```

所以我可以结束 `$var3 = $var1 Vs $var2`

问题是对手的名字可以包含多个单词，而我可以一直到vs右边的对手的句子末尾，我无法界定对手名字的开头，我呢？

如何从 - 之后的空白处进行检查，在 vs 处停止并重新开始 $var2 直到句子结束？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T01:50:22.613

`(.+?)`左侧的非贪婪捕获组`Vs`，在`-`and 空格之后应该获取名字。只要您始终有空间，`-`这应该可以正常工作。`\s+`如有必要，允许多个空格。

```
$pattern = '/Rap Battle -\s+(.+?)\s+Vs\s+(.+)$/';

$string = "DON'T FLOP - Rap Battle - Illmaculate Vs Tony D";
preg_match($pattern, $string, $matches);
var_dump($matches);

array(3) {
  [0]=>
  string(34) "Rap Battle - Illmaculate Vs Tony D"
  [1]=>
  string(11) "Illmaculate"
  [2]=>
  string(6) "Tony D"
}

$var1 = $matches[1];
$var2 = $matches[2]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T01:55:56.067

```
$text = "DON'T FLOP - Rap Battle - Illmaculate Vs Tony D";
$regex = '%Rap Battle - (.*?) Vs (.*)$%';
preg_match($regex, $text, $array);

$array[0] = entire string match.
$array[1] = first opponent.
$array[2] = 2nd opponent. 
```

# android - 如何在 /res/xxx 之外包含 xml 文件

> ID：11303457
> 
> 赞同：0
> 
> 时间：2012-07-03T01:45:30.057
> 
> 标签：android, xml

例如，10 个项目使用一个通用的自定义 Dialog 标题栏 (title.xml)。目前 Google 禁止在 /res/xxx 之外包含 xml，每个项目都必须将其放在 res/xx 中。有没有办法在默认 /res/xxx 之外包含资源 xml 文件？比如包含xml文件“C:/sourcecode/include/title.xml”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T22:58:51.237

图书馆项目（http://developer.android.com/tools/projects/projects-eclipse.html）可以解决这个问题。10个应用项目可以参考包含共享代码和资源的库项目。需要注意一点：app项目的project.properties中定义的引用库项目的路径只能是“../xxx”等相对路径；绝对无法解决。

# java - Android/iPhone 应用程序编程语言

> ID：11303460
> 
> 赞同：-1
> 
> 时间：2012-07-03T01:45:50.960
> 
> 标签：java, android, iphone, mobile, mobile-application

我想知道用于对所有移动平台（iPhone、Android 和...）进行编程的最佳技术/语言/框架

我可以对所有这些都使用 java 吗？

RGDS

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T01:49:03.423

不，Android 使用 Java 作为其语言，而 iOS 使用 Objective-C。但是您可以使用跨平台 SDK 为它们编写代码，但存在一些缺点，例如丢失一些功能和性能问题。

[以下](http://mashable.com/2010/08/11/cross-platform-mobile-development-tools/)是一些著名的跨平台 SDK

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T01:53:18.587

**iOS**

**语言：**主要是 Objective-C（可以集成 C++，所有 C 代码都可以接受，因为 Objective-C 是 C 的超集）

**技术/框架：** Cocoa Touch

* * *

**安卓**

**语言：** Java

**技术/框架：**我不确定它叫什么（如果它有名字的话），但 Android 开发人员同时使用 Java 运行时类和 Android 包。[您可以在此处](http://developer.android.com/reference/packages.html)查看 Android 软件包列表。

* * *

这里有一篇比较 iPhone 和 Android 开发的好[文章](http://greensopinion.blogspot.com/2009/07/android-versus-iphone-development.html)。

希望这可以帮助！

# twitter-bootstrap - 引导程序跨度中的垂直对齐

> ID：11303461
> 
> 赞同：15
> 
> 时间：2012-07-03T01:46:23.377
> 
> 标签：twitter-bootstrap

是否有任何解决方法可以解决引导跨度中元素或文本相对于其他跨度的垂直对齐

例如。如果我有一排这样的跨度

```
<div class="row-fluid">
   <div class="span3" style="background-color:lightblue">Description</div>
   <div class="span9" style="background-color:pink">
   Lorem ipsum Lorem ipsum  Lorem ipsum  Lorem ipsum  Lorem ipsum  Lorem ipsum  Lorem ipsum  ....
   </div>
</div> 
```

看起来像这样

![在此处输入图像描述](../Images/06f4411ddeeddefcc18c9c23046796c0.png)

那么有没有办法在下一个跨度高度的垂直中心显示“描述”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-19T14:31:16.287

尝试`display: table;`为父母和`display: table-cell;`孩子

[JSFiddle](http://jsfiddle.net/iboylmz/kjy1xafz/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T18:55:58.940

如果您尝试为某些屏幕尺寸垂直居中元素，您始终可以使用媒体查询，例如：

```
/*tablet*/
@media (min-width: 768px) and (max-width: 979px) {
  #logo{
    margin-top:70px;
  }
}
/*desktop*/
@media (max-width: 979px) {
  #logo{
    margin-top:20px;
  }
}
/*large desktop*/
@media (min-width: 1200px) {
  #logo{
    margin-top:0;
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-04T08:12:38.313

我在这方面做了很多工作， `jquery` 这里显示了一个简单的解决方案！

```
<script>
$(document).ready(function(){
    var relheight=$('.span9').height() / 2;
    $('.span3').css('margin-top', relheight) ;

});
</script> 
```

它有效，我也对其进行了测试。如果你喜欢我的回答，请投票给我

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-07T08:47:48.617

在 Bootstrap 中没有针对此类问题的规定。**它依赖于植入**。但是，您可以编写一个 css 规则，说明如果下一个 div 超过前一个 div 的高度，则将前一个 div 对齐到下一个 div 的中心高度，并将此类应用于您想要这种行为的 div。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-12T11:12:15.137

查看此无脚本解决方案。

```
<div class="row-fluid">
   <div class="span3" style="background-color:lightblue;margin:0px auto;float:none;">Description</div>
   <div class="span9" style="background-color:pink;clear:both;margin:0px auto;float:none;">
   Lorem ipsum Lorem ipsum  Lorem ipsum  Lorem ipsum  Lorem ipsum  Lorem ipsum  Lorem ipsum  ....
   </div>
</div> 
```

实际代码：[jsFiddle](http://jsfiddle.net/srvikram13/v3aDM/)

只需删除内联样式并将其放在您的 css 文件中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-23T23:54:15.250

您可以使用 CSS 尝试一些[绝对居中技巧](http://coding.smashingmagazine.com/2013/08/09/absolute-horizontal-vertical-centering-css/)。例如，如果您愿意：1) 将 div 的高度声明为居中，以及 2) 使您的`.row-fluid` `position: relative;`然后也许[这个示例可以为您工作](http://jsfiddle.net/J6m8v/28/)。

生成以下 DOM：

```
<div class="row-fluid relative">
    <div class="span3">
        <div class="vercenter" style="background-color:lightblue">Description</div>
    </div>
    <div class="span9" style="background-color:pink">Lorem Ipsum...</div>
</div> 
```

和 CSS：

```
.relative {
    position: relative;
}
.vercenter {
    height: 1.5em;
    margin: auto;
    left: 0;
    top: 0;
    bottom: 0;
    position: absolute;
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-05-22T21:56:52.350

```
$('.row').each(function() {
  var rowHeight = $(this).height();
  $(this).find("[class^='span']").each(function() {
    if ( $(this).height() < rowHeight-20) {
      var odstep = (rowHeight - $(this).height()) / 2 ; 
      $(this).css( "padding-top", odstep );
    }
  });
}); 
```

# git - 将 Heroku ap 部署到多个 URL

> ID：11303463
> 
> 赞同：0
> 
> 时间：2012-07-03T01:46:36.420
> 
> 标签：git, heroku, directory, hosting, config

我正在尝试将 heroku 应用程序部署到多个 URL。我已将应用程序目录复制到具有不同名称的副本目录中，然后键入 heroku create 以获取应用程序名称。但是，当我键入 git remote -v 时，它会列出原始应用程序的 git 目录。我更改了文件 .git/config 以便 git remote -v 显示正确的（新）git 目录，但是当我去提交它时，我会看到我以前应用程序的提交列表。我担心当我输入 git push heroku master 时，它会覆盖我原来的应用程序。这是一个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T01:56:26.307

我认为复制实际目录不是一个好习惯。

尝试`git clone -l ./oldRepoDir newRepoDir`将目录实际复制到一个全新的存储库中。

参考：[http ://www.kernel.org/pub/software/scm/git/docs/git-clone.html](http://www.kernel.org/pub/software/scm/git/docs/git-clone.html)

# matlab - 如何在单个 MATLAB 轴中绘制刺激和响应？

> ID：11303468
> 
> 赞同：1
> 
> 时间：2012-07-03T01:47:21.273
> 
> 标签：matlab, figure

我想在单个图形和单轴上绘制刺激曲线和响应曲线，尽管它们的比例和单位不同。以下是我想要得到的： ![在此处输入图像描述](../Images/d4a0010fad7d197d9a292fcb68a539b2.png)

[我的主管通过一个名为SigmaPlot](http://www.sigmaplot.com/)的昂贵软件包制作了这个数字。刺激为红色，响应为黑色。

我的问题是如何在 MATLAB 中制作这样的图？

我知道一个名为 plotyy 的函数，但它没有帮助。

**编辑**：plotyy 没有帮助，因为它在右侧放置了另一个轴，并且没有必要添加额外的轴。（可能有一种方法可以删除右轴，你现在该怎么做？）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T03:08:18.980

除了在相同的轴上绘制两者之外，这里还有一个使用`plotyy`和轴属性的选项：

```
t=0:pi/64:2*pi;
figure;
handles = plotyy(t,cos(t),t,ones(size(t)).*t>pi);
set(handles(1),'ylim',[-1.5 1.5],'box','off')
set(handles(2),'ylim',[-18 2],'visible','off') 
```

这样，您可以将任何缩放/y 偏移量留在一个绘图中，而不必担心另一个绘图会重新缩放并弄乱您的第二个绘图。

# c++ - 在 C++ 程序中使用 _asm 代码是否会有所作为

> ID：11303473
> 
> 赞同：0
> 
> 时间：2012-07-03T01:48:29.323
> 
> 标签：c++, performance, assembly

我正在开发一个必须非常非常快的程序。

我会用 C++ 来做，因为它必须做很多逻辑运算，比如 XOR、AND 甚至计算二进制数中 1 的数量，我认为`_asm{}`在代码的某些部分使用它是个好主意更快地完成这些操作。它们有时会被执行数百万次。

但我不知道它是否真的会有所作为并且值得付出努力。

请如果有人在我之前尝试过，我将非常感谢您对该主题的了解。

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T02:00:46.897

当处理器时钟为每秒几十亿次时，一百万次操作通常不是什么大问题。

所以用简单的 C/C++ 编写代码。测试一下。剖析它。如果它真的太慢并且配置文件显示一个热点，则将该点的优化调到最大并再次测试。如果还是太慢，反汇编优化后的代码，看看你*觉得*能不能比编译器做得更好。如果您认为是这样，请继续插入您的`_asm {}`. 准备好让这个精心制作的代码运行得更慢。它发生了很多。如果您*确实*实现了所需的加速，请将汇编器放入`#ifdef`s 中，以便在发布下一个处理器版本时可以将其卡住。阅读：汇编代码的编写和维护成本非常高，几乎总是一个坏主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T12:36:02.260

根据我的经验，只有当您可以使用 SSE 功能，或者确实是诸如 popcount 或 crc 之类的特定新指令时，做一个小汇编程序才真正有帮助

从我提升到不可读的项目；

```
normal code to ASM =  10% faster, 50 times more unreadable code
suited code to SSE = 500% faster, 75 times more unreadable code 
```

所以我建议先做你的应用程序，找出它实际上慢的地方，只有当所有其他方法都失败时才尝试一些 asm/sse。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T01:50:18.567

这不是一个好主意。它不会显着提高速度，但会扼杀您直接为 X64 处理器编译的能力，这*会*损害您的性能。如果您真的想使用 Asm，请查看支持 x86/x64 的[Asmjit 。](http://code.google.com/p/asmjit/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T01:52:18.330

现代编译器会将您的 C++ 代码简化为针对您编译它的目标机器的相当简洁的汇编指令。

我想说，对于大多数程序来说，从纯粹的性能角度来看，这不值得投资。

这可能是一个很好的学习机会，可以更深入地了解底层硬件！

# java - 在创建bean之前没有自动装配spring配置？

> ID：11303476
> 
> 赞同：1
> 
> 时间：2012-07-03T01:48:50.933
> 
> 标签：java, spring

因此，我的配置类之一包括（测试/生产）DatabaseConfig 类，并且活动配置文件选择了正确的类。但是当 DatabaseConfig 类运行时，它的 dataSource ivar 为空。

我做了一个调试，我的 TestingDatabaseConfig 的 dataSource() 方法在 DatabaseConfig 的 localContainerEntityManagerFactoryBean() 运行之前运行。

我想我的问题是，为什么这不起作用，它应该起作用，我做错了什么？

```
@Configuration
@Profile({"testing-db", "production-db"})
@Import({TestingDatabaseConfig.class, ProductionDatabaseConfig.class})
@EnableTransactionManagement
public class DatabaseConfig
{
    @Resource
    private DataSource dataSource;

    @Bean(name = "entityManager")
    public LocalContainerEntityManagerFactoryBean localContainerEntityManagerFactoryBean()
    {
        LocalContainerEntityManagerFactoryBean entityManagerFactoryBean = new LocalContainerEntityManagerFactoryBean();

        entityManagerFactoryBean.setDataSource(this.dataSource);

        // other config

        return entityManagerFactoryBean;
    }

    // ... other db related beans stuff ...
}

@Configuration
@Profile("testing-db")
public class TestingDatabaseConfig implements DatabaseConfigInterface
{
    @Bean(name="dataSource")
    public DataSource dataSource()
    {
        JDBCDataSource dataSource = new JDBCDataSource();
        dataSource.setDatabase("jdbc:hsqldb:mem:testing");
        dataSource.setUser("sa");

        return dataSource;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T02:01:16.737

当然，它们不会在调用构造函数之前被注入。

使用[@PostConstruct](http://docs.oracle.com/javaee/5/api/javax/annotation/PostConstruct.html)。这是一个很好的例子：[http ://www.mkyong.com/spring/spring-postconstruct-and-predestroy-example/](http://www.mkyong.com/spring/spring-postconstruct-and-predestroy-example/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T22:58:49.910

似乎事情不只是神奇地起作用！如果你想让配置类自动装配它们的 ivars，你必须正确配置它，或者在这种情况下，有另一个 bean 来进行自动装配。

您需要创建 AutowiredAnnotationBeanPostProcessor bean。

```
@Bean
public AutowiredAnnotationBeanPostProcessor autowiredAnnotationBeanPostProcessor()
{
    return new AutowiredAnnotationBeanPostProcessor();
} 
```

或者

```
<bean class="org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T02:22:12.933

好的，所以我第一次肯定做错了，但解决方案是让 bean 作为参数自动装配，而不是尝试将它们作为 ivar 注入。我必须更改才能使其正常工作的虚假差异......</p>

```
-    @Resource
-    private DataSource dataSource;

- public LocalContainerEntityManagerFactoryBean localContainerEntityManagerFactoryBean()
+ public LocalContainerEntityManagerFactoryBean localContainerEntityManagerFactoryBean(DataSource dataSource)

-    entityManagerFactoryBean.setDataSource(this.dataSource);
+    entityManagerFactoryBean.setDataSource(dataSource); 
```

最终比我尝试做的更干净=）

# jquery - jquery fadetoggle 不工作

> ID：11303478
> 
> 赞同：0
> 
> 时间：2012-07-03T01:49:02.647
> 
> 标签：jquery

您好，我正在使用 jquery，由于某些奇怪的原因，我无法让 fadetoggle 工作。

我有 Jquery 1.7.2，正确的 src 连接到文件夹上的文件（我可以运行其他 jquery 事件）

我的身体里有这个

```
<p id="rock"> hi </p>
<input type="button" class="joe"/> 
```

这在外部 .js 文件表中。

```
$('.joe').click(function(){
    $('#rock').fadeToggle('slow');  
}); 
```

有谁知道可能出了什么问题？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T01:51:55.967

这行得通吗？

```
$('.joe').on('click',function(){ 
    $('#rock').fadeToggle('slow');
}); 
```

# windows - 如何从头开始在 Windows 上正确配置 GAE Go SDK 和 GoClipse？

> ID：11303481
> 
> 赞同：3
> 
> 时间：2012-07-03T01:49:17.473
> 
> 标签：windows, google-app-engine, sdk, installation, go

我已经成为 GAE Go 开发人员一年了，看到 SDK[在 Windows 上可用](https://developers.google.com/appengine/downloads#Google_App_Engine_SDK_for_Go)，我想我会尝试一下。但是，我在查找有关如何从头开始正确安装它的任何文档时遇到问题。我不知道要采取什么步骤来确保我的项目能够正常运行，所以我想知道在 Windows 上安装和配置 Google App Engine Go SDK 和 GoClipse 的正确方法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-28T13:42:02.357

Same here. The GAE GO SDK needs some more Windows install instructions...

As of today 2012-07-28 I just got it working on Win 7 by:

*   downloading the App Engine SDK for GO here: developers.google.com/appengine/downloads#Google_App_Engine_SDK_for_Go and selected the Win 32 bit in my case googleappengine.googlecode.com/files/go_appengine_sdk_windows_386-1.7.0.zip

*   I unzipped the GO SDK in C:\googleappenginego (make it the name you like).

*   Then I added that folder path to the PATH environment variable in th System settings Advanced Settings:

My "Path" is set at:

```
C:\Program Files\Common Files\Microsoft Shared\Windows Live;C:\Program Files (x86)\Common Files\Microsoft Shared\Windows Live;%SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem;%SYSTEMROOT%\System32\WindowsPowerShell\v1.0\;C:\Program Files\ThinkPad\Bluetooth Software\;C:\Program Files\ThinkPad\Bluetooth Software\syswow64;C:\Program Files (x86)\Common Files\Lenovo;C:\Program Files (x86)\Common Files\Ulead Systems\MPEG;C:\Program Files (x86)\Windows Live\Shared;C:\SWTOOLS\ReadyApps;%JAVA_HOME%\bin;C:\googleappenginego\ 
```

*   I installed Python 2.7.3 from: www.python.org/download/ selected this version: www.python.org/ftp/python/2.7.3/python-2.7.3.msi I installed it in the default folder C:\Python27 by launching the python-2.7.3.msi file

*   I created the GO GAE project as indicated in the GAE GO Getting Started series: developers.google.com/appengine/docs/go/gettingstarted/helloworld

*   After creating the C:\myapp\app.yaml and C:\myapp\hello\hello.go, launch the project by opening a cmd window from the Win "Start/Run..." menu.

Then type in: "dev_appserver.py c:\myapp\" You should see something like:

```
WARNING  2012-07-28 12:32:20,154 rdbms_mysqldb.py:74] The rdbms API is not available because the MySQLdb library could not be loaded.
INFO     2012-07-28 12:32:20,650 appengine_rpc.py:160] Server: appengine.google.com
INFO     2012-07-28 12:32:20,654 appcfg.py:582] Checking for updates to the SDK.
INFO     2012-07-28 12:32:22,119 appcfg.py:600] The SDK is up to date.
WARNING  2012-07-28 12:32:22,150 dev_appserver.py:3498] Could not initialize images API; you are likely missing the Python "PIL" module. ImportError:
No module named _imaging
INFO     2012-07-28 12:32:22,163 dev_appserver_multiprocess.py:647] Running application dev~helloworld on port 8080: http://localhost:8080
INFO     2012-07-28 12:32:22,164 dev_appserver_multiprocess.py:649] Admin console is available at: http://localhost:8080/_ah/admin
INFO     2012-07-28 12:32:36,851 __init__.py:440] building _go_app
INFO     2012-07-28 12:32:37,849 __init__.py:417] running _go_app, HTTP port = 34762, API port = 42835
WARNING  2012-07-28 12:32:38,443 dev_appserver.py:2733] Failed removing c:\users\fred\appdata\local\temp\request.8mmuoy.tmp
INFO     2012-07-28 12:32:38,480 dev_appserver.py:2952] "GET / HTTP/1.1" 200 -
INFO     2012-07-28 12:32:38,588 dev_appserver.py:2952] "GET /favicon.ico HTTP/1.1" 200 -
INFO     2012-07-28 12:32:54,849 __init__.py:440] building _go_app
INFO     2012-07-28 12:32:55,755 __init__.py:417] running _go_app, HTTP port = 34762, API port = 42835
WARNING  2012-07-28 12:32:56,572 dev_appserver.py:2733] Failed removing c:\users\fred\appdata\local\temp\request.slayyf.tmp
INFO     2012-07-28 12:32:56,602 dev_appserver.py:2952] "GET / HTTP/1.1" 200 -
INFO     2012-07-28 12:32:56,694 dev_appserver.py:2952] "GET /favicon.ico HTTP/1.1" 200 - 
```

Then go into your browser and go to "http://localhost:8080" to see your app or "http://localhost:8080/_ah/admin/" for the admin console.

Change the hello.go file, change "Hello, world" to "Hello, galaxy" for example and refresh the localhost:8080 browser window. It should show the new message without crashing or restarting the server. See right below:

**NOTE:** don't install Python 2.5.x, that was my initial mistake, despite what the GO SDK says. It will run but it dies when I modify the hello.go source code and refresh the browser window with some like that:

```
<type 'exceptions.AttributeError'>: 'module' object has no attribute 'kill' 
      args = ("'module' object has no attribute 'kill'",) 
      message = "'module' object has no attribute 'kill'" 
```

# css - IE 中的 CSS 文本居中

> ID：11303488
> 
> 赞同：0
> 
> 时间：2012-07-03T01:50:02.940
> 
> 标签：css, internet-explorer, text, centering

我目前在一个网站上工作，对于页面标题/帖子标题，我有一个 div 来设置颜色和一些文本在中心。它在 Chrome 和其他浏览器上运行良好，但我的文本不在 IE 上垂直居中。

![IE上的网站](../Images/b4ef510cfcaacc99948a7837699ac563.png)

![铬合金](../Images/803ff7f92c97b75ed270785f7ec278ee.png)

正如您在顶部图像 (IE) 中看到的那样，文本不是垂直输入的，而是在 chrome 中的位置。

我的 CSS 代码

```
h1 {
    font: 100% Coolvetica, Tahoma;
    font-size: 2.2em;
    text-align: left;
    position: absolute;
    padding-top: auto;
    margin-top: auto;
    margin-bottom: auto;
    left: 4%;
    width: 91.2%;
    height: 0%;
    color: #FFFFFF;
    z-index: 4;
}
#title {
    font: 100%;
    font-size: 1em;
    text-align: left;
    position: absolute;
    left: 0%;
    background: #161616;
    width: 100%;
    min-height: 3.7em;
    height: 3.5%;
    padding-top: 0%;
    margin-bottom: 5%;
    margin-top: 0%;
    color: #FFFFFF;
    -moz-box-shadow: 0px 13px 59px #000000;
    -webkit-box-shadow: 0px 13px 59px #000000;
    box-shadow: 0px 13px 59px #000000;
    z-index: 5;
} 
```

我的 HTML 代码

```
<div id="title">
<h1>
Hello Welcome to Our Online Shop!!!
</h1>
</div> 
```

希望这是足够的信息

谢谢马特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T02:07:51.773

我删除了 H1 标签的 position:absolute，它在 IE 中运行良好。

```
<html>
<head>
<style>

h1{ 
font: 100% Coolvetica, Tahoma; 
font-size:2.2em; 
text-align:left; 
/*position:absolute;*/ 
padding-top: auto; 
margin-top: auto;  
margin-bottom: auto;  
left: 4%; 
width: 91.2%; 
height: 0%; 
color: #FFFFFF; 
z-index:4; 
} 

#title{ 
font: 100%; 
font-size:1em; 
text-align:left; 
position:absolute; 
left: 0%; 
background:#161616; 
width: 100%; 
min-height:3.7em; 
height:3.5%;
padding-top:0%; 
margin-bottom:5%; 
margin-top:0%; 
color: #FFFFFF; 
-moz-box-shadow: 0px 13px 59px #000000; 
-webkit-box-shadow: 0px 13px 59px #000000; 
box-shadow: 0px 13px 59px #000000; 
z-index:5; 
} 
</style>
</head>
<body>
<div id="title"> 
<h1> 
Hello Welcome to Our Online Shop!!! 
</h1> 
</div> 
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T02:27:51.250

您可以通过在样式前放置星号来设置仅由 IE 呈现的特定填充。

```
*padding: 1em; 
```

玩这个——它可能会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T01:55:16.347

您可以尝试`vertical-align:middle;`标题 div 的css 样式属性

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T03:14:15.770

首先，在 Mac OSX 上，文本似乎没有在 Chrome 19 中居中。

看到这个 JSBin： http: [//jsbin.com/apiqog ​​/24/edit](http://jsbin.com/apiqog/24/edit)

如果您愿意放弃 上的百分比高度`div#title`，您可以为 和 设置相同的高度`div#title`，`h1`并给出`h1`相同数量的行高。

我正在运行 Mac，因此无法轻松访问 IE，但我发现在给定元素上将高度和行高设置为相同是垂直对齐文本的好方法，交叉-浏览器。

# android - JQuery Mobile 后退按钮不适用于 Cordova 1.9.0 和 Android 2.2

> ID：11303489
> 
> 赞同：0
> 
> 时间：2012-07-03T01:50:05.203
> 
> 标签：android, jquery-mobile, cordova

在过去的几个小时里，我一直在努力解决应该是一个简单的问题。

我正在尝试利用 JQuery mobile 中的 backButton 功能来构建一个具有导航图标的站点。（我的理解是JQM只是调用window.history.back）

该网站在桌面浏览器和移动 Safari 中按预期完美运行。该站点在 Android WebView 中不起作用。（值得注意的是，实际的硬件“清除”按钮起作用并将用户带回一页，但 JQM 图标只是突出显示而无处可去。）

在某些时候，我说去他妈的，然后我自己打电话给 window.history.back ，但这在电话上没有任何作用。

这是软件：

*   jQuery Mobile 1.1.0
*   科尔多瓦/PhoneGap 1.9.0
*   安卓 2.2

我查看了一些已经提出的问题，但没有一个提供在 Android 上的 1.1.0/1.9.0 组合中似乎有效的解决方案。我也试过 Cordova 1.8 和 1.7，同样的问题。

这是一个简单的页眉：

```
<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>
<script type="text/javascript" src="cordova-1.9.0.js"></script> 
```

这是使用 JQM 内置功能的调用：

```
<a href="index.html" data-icon="back" data-iconpos="notext" data-direction="reverse" data-rel="back" data-transition="slide"></a> 
```

这是使用我自己的构造的调用：

```
$(document).ready(function() {
$("#backButton").click(handleBackButton);
});

function handleBackButton() {
    window.history.back(); //Cordova does something funky with this on Android
}

...

<a id="backButton" href="index.html" data-icon="back" data-iconpos="notext" data-direction="reverse" data-transition="slide"></a> 
```

**更新**

有关前向导航模型的一些示例，请参阅此 Gist。注意`data-ajax="false"`转到第 4 页。

**更新 2** 更新了要点，包括对`navigator.app.backHistory()`“Cordova Back”的调用。这可以在物理页面之间来回切换，但不符合 JQM 页面 DOM 模型。关于如何统一两者的任何想法？ [https://gist.github.com/3039722](https://gist.github.com/3039722)

我不希望修改核心 Cordova.js 代码，而是在应用程序中添加一些监听器来处理这个问题。有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T05:27:50.213

适用于cordova 1.9 和Android 2.2。以`back`三种不同的方式使用：

覆盖后退按钮：

```
document.addEventListener("deviceready", onDeviceReady, false);

function onDeviceReady() {
    document.addEventListener("backbutton", handleBackButton, true);
}

function handleBackButton() {
    console.log("back clicked");
    window.history.back();
} 
```

和`data-rel=back`

```
<a data-rel="back" data-role="button">Rel Back</a> 
```

使用点击处理程序

```
<a id="forceBack" data-role="button">Force Back</a>

...

$("#forceBack").click(function(){
    history.back();
}); 
```

完整源代码 - [https://gist.github.com/3037838](https://gist.github.com/3037838)

# coldfusion - 在 Macbook Pro 上进行 ColdFusion 调试

> ID：11303499
> 
> 赞同：1
> 
> 时间：2012-07-03T01:51:44.453
> 
> 标签：coldfusion

我在 Macbook Pro 上安装了 CF 并打开了调试。在调试 IP 地址部分，我单击“添加当前”并添加

0:0:0:0:0:0:0:1%0

到目前为止，一切都很好——调试信息显示在 index.cfm 的底部。

但后来莫名其妙地消失了。我再次单击“添加当前”，这次它添加了：

fe80:0:0:0:0:0:0:1%1

你认为这种情况会持续下去吗？

你认为是什么导致前导的 0 变成了 fe80？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T02:52:04.433

简短的回答是它只是参考使用 IPv6 语法的 localhost。但是，如果您在本地主机上，则可以一起删除 IP 地址。如果它真的困扰你，可以添加 127.0.0.1 代替。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T02:17:45.593

您可以在此处找到有关 fe80 地址的一些详细信息：[https](https://superuser.com/questions/241642/what-is-the-relevance-of-fe801lo0-localhost-in-etc-hosts) ://superuser.com/questions/241642/what-is-the-relevance-of-fe801lo0-localhost-in-etc-hosts 。

我通常坚持使用 127.0.0.1。

# sql - Oracle 字符串文字太长 - 提取字符串中的数据

> ID：11303500
> 
> 赞同：1
> 
> 时间：2012-07-03T01:51:50.503
> 
> 标签：sql, regex, oracle, plsql, oracle11g

使用 Oracle 11g，我有以下 LDAP 字符串，这只是我在此尝试演示的内容的一个子集。

基本上我有一个很长的字符串导致我出现“字符串文字太长”的问题，基本上在这个字符串中，我希望能够去掉我不想要的位，甚至更好的是，去掉唯一的位我需要。

这只是字符串内容/长度的简短版本：

> 成员 = CN=aTIGERAdmin-Admin, CN=D0902498, CN=ea90045052, CN=aTIGERCall-Admin, CN=DAaTIGERCall-Admin, CN=DAaTIGERCall-Admin, CN=DAaTIGERCall-Admin, CN=DAaTIGERCall-Admin, CN=DAaTIGERCall -Admin, CN=DAaTIGERCall-Admin, CN=DAaTIGERCall-Admin, CN=DAaTIGERCall-Admin, CN=DAaTIGERCall-Admin, CN=aTIGERAdmin-Admin, CN=ea90045052, CN=DAaTIGERCall-Admin, CN=DAaTIGERCall-Admin, CN =DAaTIGERCall-Admin, CN=DAaTIGERCall-Admin, CN=DAaTIGERCall-Admin, CN=DAaTIGERCall-Admin, CN=DAaTIGERCall-Admin, CN=DAaTIGERCall-Admin, CN=aTIGERCall-Admin, CN=aTIGERAdmin-Admin, CN=D0902498 , CN=ea90045052, CN=aTIGERCall-Admin, CN=DAaTIGERCall-Admin, CN=DAaTIGERCall-Admin, CN=DAaTIGERCall-Admin, CN=DAaTIGERCall-Admin, CN=DAaTIGERCall-Admin, CN=DAaTIGERCall-Admin, CN=DAaTIGERCall -Admin, CN=DAaTIGERCall-Admin, CN=DAaTIGERCall-Admin, CN=aTIGERAdmin-Admin, CN=ea90045052,CN=DAaTIGERCall-Admin, CN=DAaTIGERCall-Admin, CN=DAaTIGERCall-Admin, CN=DAaTIGERCall-Admin, CN=DAaTIGERCall-Admin, CN=DAaTIGERCall-Admin, CN=DAaTIGERCall-Admin, CN=DAaTIGERCall-Admin, CN= aTIGERCall-管理员，

假设上面的长度大于 4000 个字符。

我的问题是，使用 Oracle SQL 和 PL/SQL 以及上面的“成员”字符串，我需要以某种方式只过滤掉看起来像 'CN=aTIGER%' 的位，并完全忽略看起来像 'CN=DAaTIGER%' 的条目' 我相信，我们解决了我的字符串文字问题，但我无法先将其过滤掉，因为我的原始字符串已经超过 4000 个字符长。

使用 pl/sql，我正在寻找一种方法，它只返回“成员”中看起来像“CN=aTIGER%”的条目，同时完全忽略看起来像“CN=DAaTIGER%”的条目，确保结果末尾还有一个逗号。

我是否需要将其分配给 CLOB，然后处理我需要的条目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T03:00:37.103

在下面的代码中，我预先填充了一个`CLOB`“ `c`”，其中包含一堆数据，例如您的示例。我不确定您想对每个符合条件的条目做什么；我就是`DBMS_OUTPUT`这样。

考虑到这一切，这里有一个尝试：

```
SET SERVEROUTPUT ON
DECLARE
    c                   CLOB;
    l_offset            POSITIVE := 1;
    l_ldap_component    LONG;
    l_counter           NATURAL := 0;
BEGIN
    -- Set up the CLOB.  In real life, this data will come
    -- from some other source.
    c := 'Member of = CN=aTIGERAdmin-Admin'
      || ', CN=D0902498'
      || ', CN=ea90045052'
      || ', CN=aTIGERCall-Admin'
      || ', CN=DAaTIGERCall-Admin'
--- Lots of additional data excised for the sake of brevity....
      || ', CN=aTIGERCall-Admin,';
    DBMS_OUTPUT.PUT_LINE('Length of CLOB = ' || TO_CHAR(DBMS_LOB.GETLENGTH(c)));

    -- Search for commas within the CLOB, and extract each subsequent
    -- inter-comma string, including the trailing comma.
    WHILE (DBMS_LOB.INSTR(c,',',l_offset) > 0)
    LOOP
        l_ldap_component :=
            TRIM (
                DBMS_LOB.SUBSTR(c
                ,               DBMS_LOB.INSTR(c
                                ,              ','
                                ,              l_offset) - l_offset + 1
                ,               l_offset)
        );
        IF (l_ldap_component LIKE 'CN=aTIGER%,') THEN
            -- I'm printing the qualified entries to the screen, but you
            -- can add them to a collection or whatever....
            DBMS_OUTPUT.PUT_LINE(l_ldap_component);
        END IF;
        l_offset := DBMS_LOB.INSTR(c,',',l_offset) + 1;
    END LOOP;    
END;
/ 
```

使用我使用的数据，这段代码产生了输出：

```
Length of CLOB = 5127
CN=aTIGERCall-Admin,
CN=aTIGERAdmin-Admin,
CN=aTIGERCall-Admin,
CN=aTIGERAdmin-Admin,
CN=aTIGERCall-Admin,
CN=aTIGERAdmin-Admin,
CN=aTIGERCall-Admin,
CN=aTIGERCall-Admin,
CN=aTIGERAdmin-Admin,
CN=aTIGERCall-Admin,
CN=aTIGERAdmin-Admin,
CN=aTIGERCall-Admin,
CN=aTIGERAdmin-Admin,
CN=aTIGERCall-Admin,
CN=aTIGERCall-Admin,
CN=aTIGERAdmin-Admin,
CN=aTIGERCall-Admin,
CN=aTIGERAdmin-Admin,
CN=aTIGERCall-Admin,
CN=aTIGERAdmin-Admin,
CN=aTIGERCall-Admin,
CN=aTIGERCall-Admin,
CN=aTIGERAdmin-Admin,
CN=aTIGERCall-Admin,
CN=aTIGERAdmin-Admin,
CN=aTIGERCall-Admin,
CN=aTIGERAdmin-Admin,
CN=aTIGERCall-Admin,
CN=aTIGERCall-Admin,
CN=aTIGERAdmin-Admin,
CN=aTIGERCall-Admin,
CN=aTIGERAdmin-Admin,
CN=aTIGERCall-Admin,
CN=aTIGERAdmin-Admin,
CN=aTIGERCall-Admin,

PL/SQL procedure successfully completed.

SQL> 
```

我希望这有帮助。

# gwt - listgrid 摘要网格

> ID：11303506
> 
> 赞同：0
> 
> 时间：2012-07-03T01:52:23.210
> 
> 标签：gwt, smartgwt

我有一个 listgrid，我正在按 setGroupByField 方法进行分组，但我看不到该组，getGroupByFields 方法返回 null 然后不知道为什么不分组，如果我将属性和字段名称放入我想分组.. 。 有任何想法吗？这里是代码。

setGroupByField(CdmsConstants.class_desc) setGroupStartOpen(GroupStartOpen.ALL) setShowGridSummary(true) setShowGroupSummary(true) setShowGroupSummaryInHeader(true)

谢谢。

笔记。我在文档中看到 getGroupByFields 方法返回该网格分组的字段的名称，但如果为空，则表示未分组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T14:17:50.800

`setGroupByField()`是在listgrid初始化之前使用。如果初始化后需要分组，则必须使用`groupBy()`. 你试过使用`groupBy([yourFieldName])`吗？

# jquery - IE8中的jQuery表单提交发布到新页面而不是阻止它

> ID：11303507
> 
> 赞同：0
> 
> 时间：2012-07-03T01:52:46.887
> 
> 标签：jquery

所有，我有以下 jQuery 代码：

```
jQuery("#data_form").submit(function() {
    event.preventDefault();
    alert("it submits");
}); 
```

当我在 Chrome 中提交表单时，它可以正常工作，但在 IE8 中却不行。我试图将代码更改为这样的：

```
jQuery("#data_form").submit(function(e) {
    e.preventDefault();
    alert("it submits");
}); 
```

但是，这仍然会发布该页面。关于如何使这段代码在 IE8 中工作的任何想法？

***编辑：我试图在这里简化代码以提高可读性。但是我尝试了下面的答案，但它还没有奏效。这是完整的代码：

```
jQuery("#event_form").submit(function(e) {
    e.preventDefault();
    jQuery("#results").html('');
    already_submitted = jQuery("#check_submission").val();
    create_yes_no = jQuery("#create_yes_no").val();
    if(already_submitted!="yes" && create_yes_no=="yes" ){
    jQuery.post(site_url + "save_event_form.php", jQuery(this).serialize(),
        function(data) {
            //alert("Data Loaded: " + data);
            var results = jQuery("#results");
            results.html(data+"<br><br>");

            results.show(); // re-display the div
            setTimeout(function(){ // then fade it out....
              results.fadeOut();
            }, 5000); // ...after 5 seconds
            jQuery("#check_submission").val("yes");
        });
    }else if(create_yes_no!="yes"){
    jQuery.post(site_url + "save_event_form.php", jQuery(this).serialize(),
        function(data) {
            //alert("Data Loaded in the create yes or no yes: " + data);
            var results = jQuery("#results");
            results.html(data+"<br><br>");

            results.show(); // re-display the div
            setTimeout(function(){ // then fade it out....
              results.fadeOut();
            }, 5000); // ...after 5 seconds
        });
    }else{
        alert("You already submitted this user once. Refresh the page to add another one.");
    }
    return false;
}); 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T02:36:37.130

event.preventDefault 在 IE8 中不起作用。我把它改成了这段代码，现在效果很好：

```
if(event.preventDefault){
    event.preventDefault();
}else{
    event.returnValue = false;
} 
```

# performance - 使用 myfaces 2.0 和 tomcat 6 启动时的大性能问题

> ID：11303513
> 
> 赞同：0
> 
> 时间：2012-07-03T01:53:25.380
> 
> 标签：performance, jsf-2, startup, tomcat7, myfaces

我在 tomcat 6 启动时遇到问题。当我第一次尝试加载一个页面时，它需要超过五分钟才能显示出来。之后它工作得很好。

使用 myfaces 中的 helloworld-example 服务器以您期望的速度响应。添加一个简单的会话范围对象并重命名初始 helloworld.xhtml 后，服务器在启动期间开始花费很长时间。

完整的启动日志如下：

```
Jul 03, 2012 3:43:25 AM org.apache.catalina.startup.Embedded start
Information: Starting tomcat server
Jul 03, 2012 3:43:25 AM org.apache.catalina.core.StandardEngine start
Information: Starting Servlet Engine: Apache Tomcat/6.0.29
Jul 03, 2012 3:43:25 AM org.apache.myfaces.config.DefaultFacesConfigurationProvider getStandardFacesConfig
Information: Reading standard config META-INF/standard-faces-config.xml
Jul 03, 2012 3:43:26 AM org.apache.myfaces.config.DefaultFacesConfigurationProvider getWebAppFacesConfig
Information: Reading config /WEB-INF/faces-config.xml
Jul 03, 2012 3:43:26 AM org.apache.myfaces.config.LogMetaInfUtils logArtifact
Information: Artifact 'myfaces-api' was found in version '2.1.8' from path 'file:/E:/Users/Andreas/Dropbox/Studium/4.Semester/Software-Projekt/Marx1/trunk/deliverable3/parent/webui/target/webui-0.0.1/WEB-INF/lib/myfaces-api-2.1.8.jar'
Jul 03, 2012 3:43:26 AM org.apache.myfaces.config.LogMetaInfUtils logArtifact
Information: Artifact 'myfaces-impl' was found in version '2.1.8' from path 'file:/E:/Users/Andreas/Dropbox/Studium/4.Semester/Software-Projekt/Marx1/trunk/deliverable3/parent/webui/target/webui-0.0.1/WEB-INF/lib/myfaces-impl-2.1.8.jar'
Jul 03, 2012 3:43:26 AM org.apache.myfaces.util.ExternalSpecifications isBeanValidationAvailable
Information: MyFaces Bean Validation support disabled
Jul 03, 2012 3:43:26 AM org.apache.myfaces.config.FacesConfigurator handleSerialFactory
Information: Serialization provider : class org.apache.myfaces.shared_impl.util.serial.DefaultSerialFactory
Jul 03, 2012 3:43:26 AM org.apache.myfaces.config.annotation.DefaultLifecycleProviderFactory getLifecycleProvider
Information: Using LifecycleProvider org.apache.myfaces.config.annotation.AllAnnotationLifecycleProvider
2012-07-03 03:43:26 WebuiConfiguration [INFO] Loading application wide configuration.
2012-07-03 03:43:26 ConfigurationMonitor [INFO] Trying to init. default config file.
E:\Users\Andreas\veryfive\config.xml
2012-07-03 03:43:26 XMLJFigParser [INFO] Process file E:\Users\Andreas\veryfive\config.xml
2012-07-03 03:43:26 ConfigurationMonitor [INFO] Intitialized configuration: E:\Users\Andreas\veryfive\config.xml
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.AbstractFacesInitializer initFaces
Information: ServletContext initialized.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: Tomahawk jar not available. Autoscrolling, DetectJavascript, AddResourceClass and CheckExtensionsFilter are disabled now.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: Scanning for context init parameters not defined. It is not necessary to define them all into your web.xml, they are just provided here for informative purposes. To disable this messages set org.apache.myfaces.LOG_WEB_CONTEXT_PARAMS config param to 'false'
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'javax.faces.RESOURCE_EXCLUDES' found, using default value '.class .jsp .jspx .properties .xhtml .groovy'.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'javax.faces.FULL_STATE_SAVING_VIEW_IDS' found.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'javax.faces.PARTIAL_STATE_SAVING' found, using default value 'true (false with 1.2 webapps)'.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'javax.faces.DEFAULT_SUFFIX' found, using default value '.xhtml .view.xml .jsp'.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'javax.faces.FACELETS_SUFFIX' found, using default value '.xhtml'.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'javax.faces.FACELETS_VIEW_MAPPINGS' found.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'javax.faces.HONOR_CURRENT_COMPONENT_ATTRIBUTES' found, using default value 'false'.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'javax.faces.VALIDATE_EMPTY_FIELDS' found, using default value 'auto'.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.ENUM_CONVERTER_ALLOW_STRING_PASSTROUGH' found, using default value 'false'.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'javax.faces.validator.DISABLE_DEFAULT_BEAN_VALIDATOR' found, using default value 'true'.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'javax.faces.CONFIG_FILES' found.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'javax.faces.LIFECYCLE_ID' found.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.ERROR_HANDLER' found.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.CHECKED_VIEWID_CACHE_SIZE' found, using default value '500'.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.CHECKED_VIEWID_CACHE_ENABLED' found, using default value 'true'.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.PRETTY_HTML' found, using default value 'true'.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.ALLOW_JAVASCRIPT' found, using default value 'true'.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.CONFIG_REFRESH_PERIOD' found, using default value '2'.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.VIEWSTATE_JAVASCRIPT' found, using default value 'false'.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.RENDER_VIEWSTATE_ID' found, using default value 'true'.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.STRICT_XHTML_LINKS' found, using default value 'true'.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.RENDER_CLEAR_JAVASCRIPT_FOR_BUTTON' found, using default value 'false'.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.RENDER_HIDDEN_FIELDS_FOR_LINK_PARAMS' found, using default value 'false'.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.SAVE_FORM_SUBMIT_LINK_IE' found, using default value 'false'.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.DELEGATE_FACES_SERVLET' found.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.REFRESH_TRANSIENT_BUILD_ON_PSS' found, using default value 'auto'.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.VALIDATE_XML' found.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.WRAP_SCRIPT_CONTENT_WITH_XML_COMMENT_TAG' found, using default value 'true'.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.RENDER_FORM_SUBMIT_SCRIPT_INLINE' found, using default value 'false'.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.DEBUG_PHASE_LISTENER' found.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.STRICT_JSF_2_REFRESH_TARGET_AJAX' found, using default value 'false'.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.STRICT_JSF_2_CC_EL_RESOLVER' found, using default value 'false'.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.DEFAULT_RESPONSE_WRITER_CONTENT_TYPE_MODE' found, using default value 'text/html'.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.VIEW_UNIQUE_IDS_CACHE_ENABLED' found, using default value 'false'.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.COMPONENT_UNIQUE_IDS_CACHE_SIZE' found, using default value '100'.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.SUPPORT_JSP_AND_FACES_EL' found, using default value 'true'.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.FLASH_SCOPE_DISABLED' found, using default value 'false'.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.RESOURCE_MAX_TIME_EXPIRES' found, using default value '604800000'.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.RESOURCE_HANDLER_CACHE_SIZE' found, using default value '500'.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.RESOURCE_HANDLER_CACHE_ENABLED' found, using default value 'true'.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.USE_ENCRYPTION' found, using default value 'true'.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.SECRET' found.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.ALGORITHM' found, using default value 'DES'.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.SECRET.CACHE' found.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.ALGORITHM.IV' found.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.ALGORITHM.PARAMETERS' found, using default value 'ECB/PKCS5Padding'.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.SERIAL_FACTORY' found.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.COMPRESS_STATE_IN_CLIENT' found, using default value 'false'.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.MAC_ALGORITHM' found, using default value 'HmacSHA1'.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.MAC_SECRET' found.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.MAC_SECRET.CACHE' found.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'javax.faces.DATETIMECONVERTER_DEFAULT_TIMEZONE_IS_SYSTEM_TIMEZONE' found, using default value 'false'.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.LAZY_LOAD_CONFIG_OBJECTS' found, using default value 'true'.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.STRICT_JSF_2_ALLOW_SLASH_LIBRARY_NAME' found, using default value 'false'.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.VALIDATE' found, using default value 'false'.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.config.annotation.LifecycleProvider' found.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.EL_RESOLVER_COMPARATOR' found.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.EL_RESOLVER_PREDICATE' found.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.CHECKED_VIEWID_CACHE_SIZE' found, using default value '500'.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.CHECKED_VIEWID_CACHE_ENABLED' found, using default value 'true'.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.ERROR_TEMPLATE_RESOURCE' found, using default value 'META-INF/rsc/myfaces-dev-error.xml'.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.DEBUG_TEMPLATE_RESOURCE' found, using default value 'META-INF/rsc/myfaces-dev-debug.xml'.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.ERROR_HANDLING' found, using default value 'false, on Development Project stage: true'.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.NUMBER_OF_SEQUENTIAL_VIEWS_IN_SESSION' found.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.CACHE_OLD_VIEWS_IN_SESSION_MODE' found, using default value 'off'.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.USE_FLASH_SCOPE_PURGE_VIEWS_IN_SESSION' found, using default value 'false'.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.HANDLE_STATE_CACHING_MECHANICS' found, using default value 'true'.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.USE_MULTIPLE_JS_FILES_FOR_JSF_UNCOMPRESSED_JS' found, using default value 'false'.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.JSF_JS_MODE' found, using default value 'normal'.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.SERVICE_PROVIDER_FINDER' found.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'javax.faces.DISABLE_FACELET_JSF_VIEWHANDLER' found, using default value 'false'.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.SAVE_STATE_WITH_VISIT_TREE_ON_PSS' found, using default value 'true'.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.CHECK_ID_PRODUCTION_MODE' found, using default value 'auto'.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'javax.faces.FACELETS_BUFFER_SIZE' found.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'facelets.BUFFER_SIZE' found.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'javax.faces.FACELETS_DECORATORS' found.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'facelets.DECORATORS' found.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'javax.faces.FACELETS_LIBRARIES' found.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'facelets.LIBRARIES' found.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'javax.faces.FACELETS_REFRESH_PERIOD' found, using default value '-1'.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'facelets.REFRESH_PERIOD' found, using default value '-1'.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'javax.faces.FACELETS_RESOURCE_RESOLVER' found.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'facelets.RESOURCE_RESOLVER' found.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'javax.faces.FACELETS_SKIP_COMMENTS' found.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'facelets.SKIP_COMMENTS' found.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.MARK_INITIAL_STATE_WHEN_APPLY_BUILD_VIEW' found, using default value 'false'.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.WRAP_TAG_EXCEPTIONS_AS_CONTEXT_AWARE' found, using default value 'true'.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.CACHE_EL_EXPRESSIONS' found, using default value 'noCache'.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.EXPRESSION_FACTORY' found.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.INITIALIZE_ALWAYS_STANDALONE' found, using default value 'false'.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.LOG_WEB_CONTEXT_PARAMS' found, using default value 'auto'.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.FACES_INITIALIZER' found.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.WebConfigParamsLogger logWebContextParams
Information: No context init parameter 'org.apache.myfaces.FACES_INIT_PLUGINS' found.
Jul 03, 2012 3:43:26 AM org.apache.myfaces.webapp.AbstractFacesInitializer initFaces
Warnung: 

*******************************************************************
*** WARNING: Apache MyFaces-2 is running in DEVELOPMENT mode.   ***
***                                         ^^^^^^^^^^^         ***
*** Do NOT deploy to your live server(s) without changing this. ***
*** See Application#getProjectStage() for more information.     ***
*******************************************************************

Jul 03, 2012 3:43:26 AM org.apache.coyote.http11.Http11Protocol init
Information: Initializing Coyote HTTP/1.1 on http-8080
Jul 03, 2012 3:43:26 AM org.apache.coyote.http11.Http11Protocol start
Information: Starting Coyote HTTP/1.1 on http-8080 
```

调用页面后，添加了这两行（在呈现页面后，这需要一些时间，您可以在日志中看到）：

```
Jul 03, 2012 3:45:30 AM org.apache.myfaces.util.ExternalSpecifications isUnifiedELAvailable
Information: MyFaces Unified EL support disabled 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T14:17:32.047

首先，您可以去掉最后两行，因为您需要通过添加 el-api-2.2 和 el-impl-2.2 jar 来启用对 Tomcat 6 的 MyFaces EL Support。这是一个详细的过程。[文档](http://wiki.apache.org/myfaces/HowToEnableEl22)。

之后，您可以按照此处提到的一些提示进行操作：

*   [减少 Tomcat 启动时间](http://wiki.metawerx.net/wiki/DecreasingTomcatStartupTimeWithMultiThreading)

*   [性能调优JVM运行tomcat](http://www.tomcatexpert.com/blog/2011/11/22/performance-tuning-jvm-running-tomcat)

# sql - ASP SQL 中的错误

> ID：11303516
> 
> 赞同：0
> 
> 时间：2012-07-03T01:53:59.217
> 
> 标签：sql, database, asp-classic, eof

错误提示：BOF 或 EOF 为 True，或者当前记录已被删除。请求的操作需要当前记录。

我有从另一个站点接收 id 的代码，它是一个数字，并将编辑与 id 匹配的数据。

```
<body>    
<table style="width: 100%">
    <tr>
    <!-- #include file="header.html"-->
        </tr>
</table>
<table>
<tr >
<td style="width:885px" class="style2" >
<%
set conn=Server.CreateObject("ADODB.Connection")
conn.Provider="Microsoft.Jet.OLEDB.4.0"
conn.Open "C:\inetpub\wwwroot\library\database.mdb"
cid=Request.Form("number")
if Request.form("firstname")="" then
set rs=Server.CreateObject("ADODB.Recordset")

  rs.open "SELECT * FROM users WHERE no='" & cid & "'",conn
  %>
<form method="post" action="change.asp">
<table>
  <%for each x in rs.Fields%>
  <tr>
  <td><% Response.Write(x.name)%></td>
  <td><input name='<%Response.Write(x.name)%>' value='<%Response.Write(x.value)%>'></td>
  <%next%>
  </tr>
  </table>
    <br /><br />
  <input type="submit" value="Update record">
  </form>
<%
else
    sql="UPDATE users SET "
    sql=sql & "firstname='" & Request.Form("firstname") & "',"
    sql=sql & "lastname='" & Request.Form("lastname") & "',"
    sql=sql & "Gender='" & Request.Form("Gender") & "'"
  sql=sql & " WHERE no='" & cid & "'"
  on error resume next
  conn.Execute sql
  if err<>0 then
    response.write("No update permissions!")
  else
    response.write("Record " & cid & " was updated!")
  end if
end if
conn.close
%>

</td>
<td><!--#include file="sideMenu.html"-->
</td>
</tr>
</table>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T02:01:38.080

```
 <body>    
  <table style="width: 100%">
      <tr>
      <!-- #include file="header.html"-->
          </tr>
  </table>
  <table>
  <tr >
  <td style="width:885px" class="style2" >
  <%
  set conn=Server.CreateObject("ADODB.Connection")
  conn.Provider="Microsoft.Jet.OLEDB.4.0"
  conn.Open "C:\inetpub\wwwroot\library\database.mdb"
  cid=Request.Form("number")
  if Request.form("firstname")="" then
  set rs=Server.CreateObject("ADODB.Recordset")

    rs.open "SELECT * FROM users WHERE no=" & cid ,conn

    If rs.EOF Then

       Response.Write "There is no data for this user in the database"

    Else

    %>
  <form method="post" action="change.asp">
  <table>

    <%for each x in rs.Fields%>
     <tr>
       <td><%=x.name%></td>
       <td><input name='<%=x.name%>' value='<%=x.value%>'></td>
     </tr>          
    <%next%>        

  </table>
      <br /><br />
    <input type="submit" value="Update record">
    </form>
  <%

  End If

  rs.Close
  Set rs = Nothing

  else
      sql="UPDATE users SET "
      sql=sql & "firstname='" & Request.Form("firstname") & "',"
      sql=sql & "lastname='" & Request.Form("lastname") & "',"
      sql=sql & "Gender='" & Request.Form("Gender") & "'"
    sql=sql & " WHERE no=" & cid
    on error resume next
    conn.Execute sql
    if err<>0 then
      response.write("No update permissions!")
    else
      response.write("Record " & cid & " was updated!")
    end if
  end if
  conn.close
  %>

  </td>
  <td><!--#include file="sideMenu.html"-->
  </td>
  </tr>
  </table>
  </body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T22:14:43.403

权限问题？检查 IIs 是否有权读取数据库表。此外，在这一行

```
if Request.form("firstname")="" then 
```

我通常使用

```
if Request.form("firstname") & ""="" then 
```

# css - 图片不会在线显示

> ID：11303526
> 
> 赞同：0
> 
> 时间：2012-07-03T01:55:15.917
> 
> 标签：css, html

我似乎无法让图像出现在网上，尽管它出现在本地。

有趣的是，它旁边有几张类似的图像出现了，但这个特定的图像不会。

这是html：

```
 <p class="home"><a href="index.html"></a></p> 
```

以及随附的 CSS：

```
.home {
position:absolute;
left:350px;
top:40px;
display:block;
width:125px;
height:50px;
text-indent:-9999px;
}
.home a {
display:block;
width:100%;
height:100%;
background:transparent url(home.png) no-repeat top left;
outline:none;
}
.home a:hover {
background-position:0 -50px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T08:09:55.900

我不确定是否是这种情况，但我们将消除可能性。以前我也遇到过同样的事情。

图像可能格式错误或损坏。尝试从 Photoshop 重新保存您想要的 PNG，另存为 Web，或尝试另存为 JPG（或非 PNG）。上传图像并确保它位于**index.html**所在的同一目录中（基于您的代码）。

其次，尝试将特定的高度和宽度设置为`.home a`

如果不起作用，请将您的代码放在这里[http://jsfiddle.net/](http://jsfiddle.net/)并检查图像的路径是否相应地指向。

# eclipse - Eclipse 显示虚假错误

> ID：11303528
> 
> 赞同：0
> 
> 时间：2012-07-03T01:55:34.637
> 
> 标签：eclipse

由于我更新到 Eclipse Juno，错误检测似乎已关闭，也无法跟上我的速度。今天打开Eclipse，看到这个错误，明显是假的：http: [//imageshack.us/photo/my-images/18/error1ae.png/](http://imageshack.us/photo/my-images/18/error1ae.png/)

关于如何修复 Eclipse 或它为什么会发生的任何想法？（我知道我可以删除问题选项卡中的错误，但我不希望首先发生这种情况......）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T05:17:46.990

如果您查看问题视图的“类型”列，您可能会发现“Android Lint”是源代码，尽管这看起来像是 Java 问题。使用 Android Lint 视图的“清除”按钮来消除错误消息。

在他们在 ADT 中解决该问题之前，禁用自动 lint 检查可能是有意义的。

# django - django-ratings 令人沮丧；需要洞察力

> ID：11303529
> 
> 赞同：1
> 
> 时间：2012-07-03T01:55:48.130
> 
> 标签：django

我已经尝试了两周来以零成功实现备受推崇的 django 评级。

我遵循了所有指示，但没有那么详细，并且无法弄清楚如何实际呈现用户使用模板提交评级的方法。

没有关于如何加载与其关联的模板标签的说明，因此导致错误。查看代码后，似乎“评级”是在模板中加载标签的正确方法，所以我采用了它。

我在 settings.py 中添加了“djangoatings”。

以下是我的模型：

```
 rating = RatingField(range=5) 
```

我还对 urls.py 做了以下操作：

```
from djangoratings.views import AddRatingFromModel

url(r'rate-my-post/(?P<object_id>\d*)/(?P<score>\d*)/', AddRatingFromModel(), {
    'app_label': 'report',
    'model': 'story',
    'field_name': 'rating',
}), 
```

将此添加到模板中：

```
{% rating_by_user user on story.rating as vote %} 
```

什么都没有出现。没有办法让用户投票。没有什么。

我无法弄清楚这里可能出了什么问题，经过两周的调整和尝试不同的方法，没有任何效果。

如果有人知道为用户提供使用此应用程序投票的某些界面需要什么，我将不胜感激。

该应用程序的链接在这里[https://github.com/dcramer/django-ratings#rating_by_user](https://github.com/dcramer/django-ratings#rating_by_user)

# mysql - 在 MySQL 中模拟滞后函数

> ID：11303532
> 
> 赞同：40
> 
> 时间：2012-07-03T01:56:11.747
> 
> 标签：mysql, sql, sliding-window

```
| time                | company | quote |
+---------------------+---------+-------+
| 0000-00-00 00:00:00 | GOOGLE  |    40 |
| 2012-07-02 21:28:05 | GOOGLE  |    60 |
| 2012-07-02 21:28:51 | SAP     |    60 |
| 2012-07-02 21:29:05 | SAP     |    20 | 
```

如何在 MySQL 中对这个表进行延迟以打印引号中的差异，例如：

```
GOOGLE | 20
SAP    | 40 
```

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-07-03T17:46:41.937

这是我最喜欢的 MySQL hack。

这是您模拟滞后功能的方式：

```
SET @quot=-1;
select time,company,@quot lag_quote, @quot:=quote curr_quote
  from stocks order by company,time; 
```

*   `lag_quote`保存前一行引号的值。对于第一行@quot 是-1。
*   `curr_quote`保存当前行引用的值。

笔记：

1.  `order by`子句在这里很重要，就像它在常规窗口函数中一样。
2.  您可能还想使用 lag`company`来确保您正在计算相同的引号中的差异`company`。
3.  你也可以用同样的方法实现行计数器`@cnt:=@cnt+1`

这个方案的好处是与其他一些方法（如使用聚合函数、存储过程或在应用程序服务器中处理数据）相比，它在计算上非常精简。

编辑：

现在来回答您以您提到的格式获取结果的问题：

```
SET @quot=0,@latest=0,company='';
select B.* from (
select A.time,A.change,IF(@comp<>A.company,1,0) as LATEST,@comp:=A.company as company from (
select time,company,quote-@quot as change, @quot:=quote curr_quote
from stocks order by company,time) A
order by company,time desc) B where B.LATEST=1; 
```

嵌套并不相关，因此（计算上）不像看起来（语法上）那么糟糕：）

如果您需要任何帮助，请告诉我。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2018-04-06T19:37:00.253

从 MySQL 8.0 及以上版本无需模拟`LAG`. 它是本机支持的，

> [窗口功能](https://dev.mysql.com/doc/refman/8.0/en/window-function-descriptions.html#function_lag)：
> 
> 从在其分区内滞后（先于）当前行 N 行的行返回 expr 的值。如果没有这样的行，则返回值为默认值。例如，如果 N 为 3，则返回值为前两行的默认值。如果缺少 N 或默认值，则默认值分别为 1 和 NULL。

```
SELECT
     company,
     quote,
     LAG(quote) OVER(PARTITION BY company ORDER BY time) AS prev_quote
FROM tab; 
```

**[DBFiddle 演示](https://dbfiddle.uk/?rdbms=mysql_8.0&fiddle=b8368c46ef03356e2778e8d21c898aaa)**

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-07-03T18:22:10.983

为了达到预期的结果，首先您需要找到每家公司的最后一个和倒数第二个时间戳。使用以下查询非常简单：

```
SELECT c.company, c.mts, max(l.ts) AS lts
  FROM (SELECT company, max(ts) AS mts FROM cq GROUP BY company) AS c
  LEFT JOIN cq l
    ON c.company = l.company AND c.mts > l.ts
 GROUP BY c.company, c.mts; 
```

现在您必须将此子查询与原始表连接以获得所需的结果：

```
SELECT c.company, l.quote, coalesce(l1.quote, 0),
       (l.quote - coalesce(l1.quote, 0)) AS result
  FROM (SELECT c.company, c.mts, max(l.ts) AS lts
      FROM (SELECT company, max(ts) AS mts FROM cq GROUP BY company) AS c
      LEFT JOIN cq l
        ON c.company = l.company AND c.mts > l.ts
     GROUP BY c.company, c.mts) AS c
  LEFT JOIN cq AS l ON l.company = c.company AND l.ts = c.mts
  LEFT JOIN cq AS l1 ON l1.company = c.company AND l1.ts = c.lts; 
```

[您可以在SQL Fiddle](http://www.sqlfiddle.com/#!2/85b5e/1)上观察结果。

此查询仅使用标准 SQL 功能，应该适用于任何 RDBMS。

# dotnetnuke - DotNetNuke：如何在我自己的站点中使用 DotNetNuke 模块？

> ID：11303534
> 
> 赞同：1
> 
> 时间：2012-07-03T01:56:32.997
> 
> 标签：dotnetnuke

我们正在使用 ASP.NET 开发一个网站，其中一项功能是管理用户上传的文件。我们建议 DotNetNuke 是 DotNet 世界中最好的文件管理工具之一。

但是，我们不想要 DotNetNuke 的所有功能，具体来说，我们只想要文档库模块。

是否可以将模块嵌入到我自己的站点中？请推荐任何文档或链接。非常感谢。

此致，

扎克@Shine

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T05:53:04.603

它们被开发并打算在 Dotnetnuke 中使用。

如果它们能够应付我们自己的 ASP .net 网站，它们将是“Web 应用程序”而不是模块。

为什么不将您的网站转移到 DNN。鉴于您正在为 ASP .net 网站工作，这是一个非常好的工作平台。

拉维

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T16:47:44.427

如果没有 DotNetNuke 在那里托管模块，则无法从 DotNetNuke 运行模块。他们对核心有硬性依赖。

# windows-runtime - 我应该将 Metro 应用程序的 TemporaryKey.pfx 文件添加到版本控制吗？

> ID：11303535
> 
> 赞同：47
> 
> 时间：2012-07-03T01:56:32.950
> 
> 标签：windows-runtime, winrt-xaml, pfx

我已经创建了一个 Metro 风格的 C#/XAML 应用程序，现在我正在尝试将它添加到版本控制（Git 和后来的 GitHub）。这意味着要弄清楚哪些文件属于版本控制，哪些不属于。

创建 Metro 项目时，Visual Studio 向其中添加了一个名为*ProjectName* _TemporaryKey.pfx 的文件。根据我的阅读，.pfx 文件显然与代码签名或证书或类似的东西有关。我还没有找到任何东西可以准确地解释它们在 Metro 风格应用程序中的含义，或者你应该如何管理它们。

我打算将我的代码推送到 GitHub（在公共存储库中）。从长远来看，我计划将我的应用程序放在 Windows 商店中。如果构建项目需要 .pfx 文件，那么我最好将其签入。如果它包含将我标识为应用程序作者的数字身份，并且发布它将使互联网上的任何人都可以推送我的应用程序的新版本在我不知情的情况下到 Windows 商店，那我最好*不要*签入。

所以我的问题是，**TemporaryKey.pfx 文件中有什么秘密吗？**我应该将其签入我的公共存储库，还是应该将其排除在源代码控制之外？（如果我没有将它放入源代码控制中，但又想在另一台计算机上检查我的代码，会发生什么？）

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-09-08T13:30:32.957

.pfx 用于临时代码证书来签署您的应用程序以部署到您的计算机，以便您可以调试。您可以删除它，但需要生成一个新的临时密钥（通过 package.appxmanifest 对话框中的 Packaging 选项卡）。我总是把它留在我发布的代码中，因为它对使用代码的人来说更容易（即没有错误消息）。如果您查看其他一些 WinRT 源项目（例如 MVVMLight），它们还包括 .pfx 以方便使用。

如果我理解正确，临时 .pfx 将在商店提交过程中被替换，因此您无需担心临时 .pfx 被其他人使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-11T08:18:41.940

.PFX 是您的钥匙（就像您家门的钥匙）。这是为了使用私钥进行代码签名（安全需要密码）。除了应用程序的开发者之外，没有人可以拥有它。如果您是唯一有权访问存储库的人，则可以对其进行版本控制，但是有人可以入侵它，然后……？每个人都可以假装你，程序的作者。对不起我的英语不好。

# web-applications - 尝试为 ASP Web 应用程序创建表单

> ID：11303538
> 
> 赞同：0
> 
> 时间：2012-07-03T01:57:12.453
> 
> 标签：web-applications, asp-classic, vbscript

我正在创建一个 ASP Web 应用程序，我需要做的一件事是使用用户填写的数据。有一个文本字段和多个单选按钮。

我是 ASP 的新手，所以我一次只做一件……文本字段。

我有

```
<form method="post"  action="/Scripts/checklistForm.asp"> <%-- TODO: Enter variables    into checklistForm.vbs --%>
<table>
<tr> 
  <td class="label">
    FQDN: </td>
  <td>
    <input type="text" name="FQDN" style="width: 250px" />
 </td>
 <td> <input type="radio" name="TestScript" /></td>
 <td class="label">Test Script</td>
</tr>
</table>

<br />
<div id="Button">
<asp:Button ID="cancelButton" runat="server" Text="Cancel" Width="58px" />
  &nbsp;&nbsp;&nbsp;&nbsp;
<asp:Button ID="runButton" UseSubmitBehavior="true" runat="server" Text="Run" Width="58px" />  
</div>
</form> 
```

我想使用底部的两个按钮。1）我希望“运行”按钮成为提交按钮。2) 我想使用“取消”按钮关闭浏览器窗口。

我正在测试这个表单只是使用一个简单的脚本 checklistForm.asp 只是一个 msgbox 弹出窗口

```
<%
MsgBox("Hello"); 
%> 
```

但它根本行不通。

放轻松，我还是 ASP 的新手。

另外，我正在 Visual Studio 中对其进行编辑。这是最好的编辑器吗？我是一名软件开发人员，这是一个工作项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T08:53:55.433

我建议你按照这个简单的教程来帮助你理解 ASP 表单。

[http://www.w3schools.com/asp/asp_inputforms.asp](http://www.w3schools.com/asp/asp_inputforms.asp)

# linux - LINUX 中基于 GUI 的 svn+diff 工具，用于目录比较

> ID：11303544
> 
> 赞同：1
> 
> 时间：2012-07-03T01:58:45.090
> 
> 标签：linux, svn, user-interface, diff

我正在尝试在 LINUX 中找到 svn 和 diff 工具的良好组合，希望有人能给我一些建议。

我目前正在使用rapidsvn+meld。这种组合在大多数情况下对我来说都很好，但在目录比较方面我不喜欢它。

有谁知道基于 GUI 的 svn+diff 的良好组合可以简化目录比较任务？

谢谢，杨

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T10:16:33.297

看看 Syntevo 的工具。对于 SVN，您可以使用[SmartSVN](https://www.smartsvn.com/)或[SmartGit](http://www.syntevo.com/smartgit/index.html)（我更喜欢 SmartGit）。对于目录比较 --- [SmartSynchronize](http://www.syntevo.com/smartsynchronize/index.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T08:55:42.873

我不喜欢使用 GUI :P 但就我个人而言，我觉得 Gnome Commander 是可用于您想要的 diff 的最佳工具之一。它在实用性方面非常非常强大。

您想探索的其他选项是 Beyond Compare（也是不错的选项）和 Guiffy。

对于 SVN，我会说只坚持使用 rapidSVN。

# wpf - 将图像置于 Web 浏览器控制失败上

> ID：11303546
> 
> 赞同：2
> 
> 时间：2012-07-03T01:59:13.087
> 
> 标签：wpf, image, browser, overlay

我有一张图片需要放在`WebBrowser`. 问题是无论我做什么，图像总是落在`WebBrowser`控件后面。我不能使用 Awesomium，这是一个使用 Chrome 而不是 IE ActiveX 的自定义 Web 浏览器控件，因为 Awesomium 无法加载 XBAP 文件。

我几乎到处都看过，但我找不到解决这个问题的合适方法。

如何在 WPF`WebBrowser`控件上显示图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-06T11:28:34.507

WPF 4.5 中没有解决这个问题。一些论坛上有一些信息，例如下面提到的属性将在 4.5 版本的 Web 浏览器控件中可用，但该计划已被放弃。所以你需要自己处理空域问题。

```
WebBrowser.CompositionMode = System.Windows.Interop.CompositionMode.Full; WebBrowser.IsRedirected = true; 
```

当其他一些控件出现在 Web 浏览器控件前面时，您可以做的解决方法是使 Web 浏览器控件的高度为零。

在下面找到示例代码，

假设您在主窗口中有一个 Web 浏览器控件。当您执行某些操作时，例如：单击一个按钮，您将拥有另一个位于 MainWindow 上方的用户控件。但是，由于 Airspace 问题，Web 浏览器不在其父控件中，而是在您的控件之上。

修复：标准修复是当您触发对它的其他控制时，您可以将 Web 浏览器的高度设置为零，具体取决于您的场景。下面是一个示例实现。

在 MainWindow.Xaml 中包含事件。

```
Activated="Window_Activated"
Deactivated="Window_Deactivated" 
```

在 Xaml.cs 中，通过设置高度来处理场景。

```
private void Window_Activated(object sender, EventArgs e)
{
    wb.Height = double.NaN;
}

private void Window_Deactivated(object sender, EventArgs e)
{
    wb.Height = 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T02:41:26.770

我怀疑 WPF[`WebBrowser`](http://msdn.microsoft.com/en-us/library/system.windows.controls.webbrowser.aspx)的实现方式与 Silverlight 和 WinRT（又名 Windows 8 Metro）类似。

[`WebBrowser`](http://msdn.microsoft.com/en-us/library/system.windows.controls.webbrowser%28v=vs.95%29.aspx)Silverlight 和WinRT/Metro 中的[`WebView`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.webview.aspx)Z 顺序始终位于顶部。这显然是由于他们使用了 Trident ActiveX 控件。为了解决 Z 顺序问题，提供了[`WebBrowserBrush`](http://msdn.microsoft.com/en-us/library/system.windows.controls.webbrowserbrush%28v=VS.95%29.aspx)和[`WebViewBrush`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.webviewbrush.aspx)。

不幸的是，WPF 似乎没有为此目的提供画笔。

在互联网上搜索，似乎有些人在尝试模仿这种刷子行为方面取得了不同程度的成功。但是，这可能对您没有真正的帮助，因为使用任何类型的画笔都会删除与渲染内容的交互性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T04:50:22.880

WPF webbrowser 不是真正的 WPF 控件，而是使用一些 HwndHost 来显示一些 IE 好东西。这会导致“WPF 空域”问题（应使用 .net 4.5 修复）。在 webbrowser 控件上方显示图像的唯一选项是将其放在 webbrowser 上方的 Popup 中。弹出窗口有自己的 Win32 Hwnd，因此有自己的“空域”。

只是做类似的事情

```
<WebBrowser Name="web">
</WebBrowser>
<Popup PlacementTarget="{Binding ElementName=web}" Placement="Center" IsOpen="true">
 <Image Source="blub.png"/>
</Popup> 
```

# ruby-on-rails - 使 _id 质量可分配的替代方法

> ID：11303555
> 
> 赞同：1
> 
> 时间：2012-07-03T02:01:01.930
> 
> 标签：ruby-on-rails, activerecord, rspec, factory-bot

我有一个 rails 控制器的规范，用于测试关联模型的创建：

楷模：

```
class Foo < ActiveRecord::Base
  has_many :bars
end

class Bar < ActiveRecord::Base
  belongs_to :foo
  attr_accessible :foo, :foo_id
end 
```

控制器规格：

```
@foo = FactoryGirl.create(:foo)
expect {
  post :create, { bar: FactoryGirl.attributes_for(:bar, foo_id: @foo.id )}
}.to change(Bar, :count).by(1) 
```

如果我将此规范更改为不必进行`foo_id`批量分配的形式，它将中断`ActiveRecord::AssociationTypeMismatch expected Foo got String`：

```
@foo = FactoryGirl.create(:foo)
expect {
  post :create, { bar: FactoryGirl.attributes_for(:bar, foo: @foo )}
}.to change(Bar, :count).by(1) 
```

和

```
describe Bar do
  it { should_not allow_mass_assignment_of(:foo_id) }
end 
```

控制器代码非常简单：

```
def create
    @bar = Bar.new(params[:bar])
    if @bar.save
      redirect_to @bar
    else
      render action: 'new'
    end
  end 
```

有没有办法让规范在不`foo_id`访问的情况下运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T06:05:48.057

FactoryGirl`.attributes_for`忽略关联。你可以做

```
FactoryGirl.build(:bar).attributes 
```

但是，这样您需要删除不需要的参数，如`id`, `created_at`,`updated_at`等。

我建议你创建一个特殊的方法`spec_helper`：

```
def build_attributes(*args)
  FactoryGirl.build(*args).attributes.delete_if do |k, v|
    ['id', 'created_at', 'updated_at'].member?(k)
  end
end 
```

然后使用它：`post :create, :bar => build_attributes(:bar)`.

# iphone - 在 Xcode 4.2 开始在 iOS 中编程，我应该得到什么 iPhone？

> ID：11303559
> 
> 赞同：2
> 
> 时间：2012-07-03T02:01:54.677
> 
> 标签：iphone, version

我是 iOS 开发的新手：我正在阅读指南，购买了 macmini，在 Xcode 4.2 中玩耍和编码。我有开发者帐户，想买一部用过的 iPhone 来运行我的应用程序。

现在我不确定要买什么 iPhone：我担心如果我决定购买 iPhone 4 是否能够在 iPhone 4 上安装新的 iOS。我也担心我将无法使用任何功能 4S ，但从外观上看似乎并没有太多功能。显然，我宁愿在 iPhone 4 上花 250-300 美元，而在 iPhone 4S 上花 400-450 美元，但如果购买 4S 是更好的投资，我会花钱。

我的问题是：

1) 我可以在 iPhone 4 上安装新的 iOS 吗？2) iPhone 4 是否会对我的发展产生任何不利影响？（我对地理感知应用程序特别感兴趣）

我想尽可能在​​购买手机时做出明智的决定。

我将不胜感激任何反馈！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T02:07:48.980

1) 是的，你可以在 4 上安装最新的操作系统 2) 不，这不应该是有害的，可能有一两个小东西你无法在设备上测试，但 Xcode 有一个模拟器。

买一部 iPhone 4，你应该已经准备好了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T02:08:16.083

1)是的，iOS 6 将在 iPhone 4 上可用（可能在今年晚些时候）。

2) 视情况而定 - iOS 6 包含iPhone 4**不**支持的 3D 地图。Siri 也仅在 iPhone 4S 上受支持。不过，我相信您会对地理感知相关功能感到满意。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T02:12:01.213

> 1) 我可以在 iPhone 4 上安装新的 iOS 吗？

如果你查看[这篇](http://osxdaily.com/2012/06/13/ios-6-compatibility-supported-devices/)文章，它说 iOS 6 支持所有设备回到 iPhone 3GS（包括 3GS），所以你可以在 iPhone 4 上安装它。

> 2) iPhone 4 是否会对我的发展产生任何不利影响？（我对地理感知应用程序特别感兴趣）

由于 iPhone 4 具有与 iPhone 4S 相同的操作系统，因此它们在开发方面几乎相同。唯一的区别在于硬件（4S 的 GPS 精度稍高，等等）。您还可以利用新的 iOS 6 功能，例如 Passbook 和 Facebook 集成（新的 3D 地图功能除外）

希望这可以帮助！

# ios - 容器视图控制器 addSubview 异常

> ID：11303563
> 
> 赞同：0
> 
> 时间：2012-07-03T02:02:13.853
> 
> 标签：ios, uiviewcontroller, containers, addsubview

我正在构建一个自定义容器 ViewController 来容纳一个笔尖的几个实例。这个 nib 包含一个 ViewController 子类为 DemoViewController

在容器的 viewWillAppear 期间，我执行以下操作：

```
- (void) viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];
    NSLog(@"Container will appear");

    if (_selectedViewController.parentViewController == self)
    {
        // nowthing to do
        return;
    }

    DemoViewController *vc = [[DemoViewController alloc] initWithNibName:@"Gauge" bundle:nil];

    NSArray *nibObjects = [[NSBundle mainBundle] loadNibNamed:@"Gauge" owner:self options:nil];
    // assuming the view is the only top-level object in the nib file (besides File's Owner and First Responder)
    UIView *nibView = [nibObjects objectAtIndex:0];

    // add as child VC
    [self addChildViewController:vc];

    [view1 addSubview:nibView];

    // notify it that move is done
    [vc didMoveToParentViewController:self];

} 
```

在运行时，我收到以下异常：

```
2012-07-02 21:59:22.734 ContainerViewController[21747:f803] 加载容器视图
2012-07-02 21:59:22.737 ContainerViewController[21747:f803] 容器将出现
2012-07-02 21:59:22.740 ContainerViewController [21747:f803] 仪表视图已加载
2012-07-02 21:59:22.742 ContainerViewController[21747:f803] 仪表将移至父控制器
2012-07-02 21:59:22.743 ContainerViewController[21747:f803]-[DemoViewController superview]：无法识别的选择器发送到实例 0x6a7daa0
2012-07-02 21:59:22.745 ContainerViewController[21747:f803] *** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[DemoViewController superview]：无法识别的选择器发送到实例 0x6a7daa0”
*** 首先抛出调用堆栈：
（0x13c9022 0x155acd6 0x13cacbd 0x132fed0 0x132fcb2 0x4fe4f 0x4a14b 0x2d2c 0xdc38f 0xdc5eb 0xdd4ed 0x4aa0c 0x4ff92 0x4a14b 0x39550 0x39670 0x39836 0x4072a 0x11596 0x12274 0x21183 0x21c38 0x15634 0x12b3ef5 0x139d195 0x1301ff2 0x13008da 0x12ffd84 0x12ffc9b 0x11c65 0x13626 0x276d 0x26d5）
终止称为抛出异常（lldb）

```

有人知道这里发生了什么吗？不幸的是，关于容器视图控制器的文档很少，所以我很难过。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T05:04:19.133

顺便说一句，您为什么要尝试通过 NIB 检索视图？为什么不是以下？

```
childController = [[FirstContainedViewController alloc] initWithNibName:@"FirstContainedView" bundle:nil];
[self addChildViewController:childController];
[self.view addSubview:childController.view];
[childController didMoveToParentViewController:self]; 
```

这对我有用，而且看起来更简单。我一定不明白你为什么要这么做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T23:08:05.167

事实证明，通过“Xcode's File->New->New File->Cocoa Touch->UIViewController subclass->with XIB for user interface”创建一个 nib 解决了我的问题。

我最初是单独创建所有内容，然后通过单击笔尖的框架并将其链接到视图控制器（就像在情节提要中那样）将它们链接在一起。事实证明这是完全错误的。

相反，您需要将文件的所有者链接到 ViewController 文件。

感谢大家的帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T02:48:35.370

您的 NSLog() 完美地说明了这个问题。该 XIB 的顶级对象显然不是 UIView，它很可能是文件的所有者对象，它指向 DemoViewController。在调用该方法时，您已发送`-addSubview`到视图控制器。

# php - PHP - 来自 pow() 的奇怪、不一致的结果

> ID：11303565
> 
> 赞同：0
> 
> 时间：2012-07-03T02:02:42.740
> 
> 标签：php, exponential

我在 2 个不同的文件中有这一行，但在同一个应用程序中。

```
pow(36, 8); 
```

一个返回 -INF 而另一个返回 2821109907456

是否有任何我不知道的外部因素导致了这种情况？因为我不认为输入是问题，因为它们完全相同。

编辑：返回 -INF 的代码包含在 foreach 中。认为这可能会给我们一个线索，为什么会发生这种情况。

编辑2：循环看起来像这样

```
foreach($items as &$item)
{
  foo($item['some_index'], ... , ..., ...);
}
unset($item); 
```

循环调用的函数类似于

```
function foo($input, $a, $b, $c)
{
   ....
   $x = pow(36, 8);
   ...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T02:07:21.570

整数的大小取决于平台，您可能会达到最大值。尝试使用 BC 数学函数[bcpow](http://www.php.net/manual/en/function.bcpow.php)代替`pow`

# mysql - mysql 唯一索引 EXCEPT 为空或 null

> ID：11303568
> 
> 赞同：8
> 
> 时间：2012-07-03T02:03:02.903
> 
> 标签：mysql, database, indexing

我有一个带有 ISBN 的 MySQL MyISAM 表。我想创建一个 UNIQUE 索引，如果值为空或 null，则不会引发“重复”错误。

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T02:14:51.813

你可以使用这样的东西，

ALTER TABLE tbl_name 添加唯一的 index_name (column_list)：

此语句创建一个索引，其值必须是唯一的（NULL 值除外，它可能出现多次）。请参阅[MySQL 索引](http://www.tutorialspoint.com/mysql/mysql-indexes.htm)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T02:19:01.437

由于您使用的是 MyISAM（或 INNODB）存储引擎，因此简短的回答是否定的。多个空字符串不适用于唯一索引约束，即使多个空值可以。如果您想要一个仅 SQL 的解决方案，最好的选择是在 ISBN 字段上创建一个常规索引，然后使用存储过程充当插入代理——如果不为空或为空，它会检查唯一性。

如果只是空值对你有用，这里是一个基本的创建：

```
CREATE TABLE `books` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `isbn` int(13) DEFAULT NULL,
   PRIMARY KEY (`id`),
   UNIQUE KEY `isbn` (`isbn`)
) 
```

请注意...请记住，为 int 指定的 '13' 只是在查询中返回时将显示的位数，而不是整数的大小。

# android - INSTALL_FAILED_DEXOPT 永久破坏项目？

> ID：11303569
> 
> 赞同：3
> 
> 时间：2012-07-03T02:03:14.820
> 
> 标签：android

我在尝试从 Eclipse 安装和测试 Android 版本时遇到此错误：

安装错误：INSTALL_FAILED_DEXOPT

logcat 揭示了这一点：

07-02 21:49:44.924: E/dalvikvm(863): 类型描述符无效：'Lcom/mypackagename/MyClass;'

所以我删除了有问题的类并注释掉了对它的引用。然后它可以正常构建和安装。

现在这个类名在这个项目中永远被诅咒了。即使我创建了 java.lang.Object 的一个微不足道的子类并给它这个类名，错误也会重新出现。

擦除并重新启动模拟器无济于事。清理项目并重新启动 Eclipse 并没有帮助。

事情是怎么搞得这么糟糕的，我能做些什么来解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T15:46:36.757

幸运地发现了这一点。如果我没有碰巧查看 bin/classes，我永远不会通过它。

我查看了 bin/classes 中生成的类文件，发现文件名有一个“？” 在里面。不知何故，当我创建类时，名称中间出现了一个无效字符（在本例中为 0x10）。（假设我打字时手指粗了，这是最可能的解释。）

创建虚拟类时问题仍然存在的原因是我粘贴了旧的损坏名称（这是一个相当长的类名）。

我所要做的就是重构>重命名并手动输入名称。

# perl - 关于 perl 解包

> ID：11303571
> 
> 赞同：3
> 
> 时间：2012-07-03T02:03:35.503
> 
> 标签：perl

我打算在文件中使用解包。首先我用一个字符串测试。当我在字符串中有嵌入空间时，下面的脚本将其显示为空。当我用文件空间进行测试时，可以正确读取。不知道为什么当我使用字符串时它会将其更改为 null。我可以在读取固定长度文件时使用 unpack 吗？我是否需要考虑尾随空格或其他任何东西？

```
#!/usr/local/bin/perl

use strict;
use warnings;
my $str="hek kaaa";
print "<$str>\n";
foreach(unpack("(A1)*", $str)) {
    print sprintf("%x", ord), " ";
}

Output:
<hek kaaa>
68 65 6b 0 6b 61 61 61 
```

非常感谢您的回复。在下面粘贴我的查询

当 perl 程序从文本文件中读取并使用“A”格式解压缩时，它工作正常。第一行我在 A 和 D 之间的第一个字段中有一个嵌入空间。标签变量打印为“A D3”。但是当我有一个变量 $str="A D3" 并以下面的方式解压缩时，它在 A 之后有一个空值。从文件和变量读取时它的工作方式有何不同？

```
foreach(unpack("(A1)*", $str)) {
    print sprintf("%x", ord), " ";
} 
```

它显示为 41 0 44 33 的十六进制输出

```
cat test.txt
A D37845566974923342XYZ24023984
QRW49327408234028434ERD24448009

 my $file = 'test.txt';

open(my $data, '<', $file) or die "Could not open '$file'\n";
while (my $line = <$data>) {
    print $line;
    chomp $line;
    my ($label, $source, $dest, $type, $value) = unpack ("A4 A8 A8 A4 A8", $line);
    print "LABEL: $label SOURCE: $source DEST: $dest TYPE: $type VALUE: $value\n";
    print "length of a string:" . length($line) . "\n";
    foreach(unpack("(a1)*", $label)) {
       print sprintf("%x", ord), " ";
    }
    print "\n";

} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-03T02:12:37.767

文档中的这个小块[`pack/unpack`](http://search.cpan.org/perldoc?perlfunc#pack)很容易错过：

> “a”、“A”和“Z”类型只吞噬一个值，但将其打包为长度计数字符串，必要时使用空值或空格填充。 **解包时，“A”去除尾随空格和 null**，“Z”去除第一个 null 之后的所有内容，“a”逐字返回数据。

作为一种解决方法，您可以在模板中使用`a`or`Z`代替`A`：

```
$ perl -e 'print ord unpack("A", " ")'
0

$ perl -e 'print ord unpack("a", " ")'
32

$ perl -e 'print ord unpack("Z", " ")'
32 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T03:03:24.863

`pack 'A'`用空格填充，因此`unpack 'A'`删除尾随空格。（实际上，空格和 NUL。）

```
>perl -E"say(($ARGV[0] eq unpack('A20', pack('A20', $ARGV[0]))) ? 1 : 0)" abc
1 
```

你想要“ `a`”。

```
unpack("(a1)*", $str) 
```

也就是说，“1”是多余的。

```
unpack("(a)*", $str) 
```

最后，`split`更常用于此。

```
split(//, $str) 
```

# sql-server - 如何在 T-SQL 中聚合字符串数据

> ID：11303577
> 
> 赞同：2
> 
> 时间：2012-07-03T02:04:52.480
> 
> 标签：sql-server, tsql, sql-server-2005

我有一个数据表：

```
|Key|Field |DateField |
|A  |Value1|2012-06-01|
|A  |Value2|2012-06-02|
|A  |Value3|2012-06-03|
|B  |Value4|2012-06-04|
|B  |Value5|2012-06-05| 
```

我想按键聚合这个字符串数据 - 就像在一个组中一样，但我不知道如何。我想要结束的是：

```
|Key|Field Aggregate       |
|A  |Value1, Value2, Value3|
|B  |Value4, Value5        | 
```

更好的是最终将序列位置插入聚合中，其中序列的顺序由相应日期字段的顺序确定。

```
|Key|Field Aggregate                |
|A  |1: Value1, 2: Value2, 3: Value3|
|B  |1: Value4, 2: Value5           | 
```

这似乎是我可以用公用表表达式做的事情，但我似乎无法弄清楚如何做。

我通常不会在 SQL 中执行这种操作——我通常会将数据拉入应用程序并在代码中根据需要对其进行操作。

不幸的是，在这种情况下，这似乎不是一个选项。

如何在 SQL Server 2005 T-SQL 中执行此操作。

CTE 是正确的方法吗？有更合适的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T02:20:38.177

鉴于此示例数据：

```
CREATE TABLE #t
(
  [Key]     char(1),
  [Field]   varchar(32), 
  DateField datetime
);

INSERT #t([Key],[Field],DateField) 
  SELECT 'A','Value1','20120601'
  UNION ALL SELECT 'A','Value2','20120602'
  UNION ALL SELECT 'A','Value3','20120603'
  UNION ALL SELECT 'B','Value4','20120604'
  UNION ALL SELECT 'B','Value5','20120605'; 
```

在 SQL Server 2017 之前的 SQL Server 版本中，我们可以这样做：

```
SELECT [Key], [Field Aggregate] = STUFF(
  (SELECT ', ' + CONVERT(varchar(11), 
      ROW_NUMBER() OVER (PARTITION BY [Key] ORDER BY DateField)) 
      + ': ' + [Field]
    FROM #t AS t2 WHERE t2.[Key] = t.[Key]
    ORDER BY DateField
    FOR XML PATH(''), 
    TYPE).value(N'./text()[1]', N'varchar(max)'), 1, 2, '')
  FROM #t AS t
  GROUP BY [Key] ORDER BY [Key]; 
```

结果：

| 钥匙 | 现场聚合 |
| --- | --- |
| 一个 | 1：值 1、2：值 2、3：值 3 |
| 乙 | 1：值 4，2：值 5 |

*   示例[db<>fiddle](https://dbfiddle.uk/?rdbms=sqlserver_2017&fiddle=418f63ec24482e0ccabb8e4dc76848b4)

在 SQL Server 2017 或更高版本中，我们可以更轻松地使用`STRING_AGG()`：

```
;WITH cte AS
(
  SELECT [Key], [Field], rn = ROW_NUMBER() OVER 
    (PARTITION BY [Key] ORDER BY DateField)
    FROM #t
)
SELECT [Key], [Field Aggregate] = STRING_AGG(
    CONCAT(rn, ': ', [Field]), ', ')
    WITHIN GROUP (ORDER BY rn) 
  FROM cte
  GROUP BY [Key] ORDER BY [Key]; 
```

*   示例[db<>fiddle](https://dbfiddle.uk/?rdbms=sqlserver_2017&fiddle=3628b3848a6c624106a9dbb03edb210b)

# grep - Grep - 具有单独上下文的复合语句？

> ID：11303580
> 
> 赞同：1
> 
> 时间：2012-07-03T02:06:11.463
> 
> 标签：grep

请考虑以下示例：

```
$ echo -e "-wordA \n 1\n 2\n 3\n-wordB \n 1\n 2\n 3\n" | grep -n -A1 -e '^-wordA' -A2 -e '^-wordB'
1:-wordA 
2- 1
3- 2
--
5:-wordB 
6- 1
7- 2 
```

我想在上面做的是，在行首匹配时有 1 行“上下文后”，在`-wordA`匹配时有 2 行后上下文`-wordB`。显然，我的尝试不起作用，因为在两场比赛中，我都得到了 2 行 after context。

显然，无论哪个是 after context 的最后一个设置，都会成为所有搜索的设置；但我只是想确定一下——是否有可能在`grep`个别上下文中使用这种“复合”搜索？（编辑：特别是，我的意思是通过调用单个实例来使用`grep`，可能避免临时文件）

非常感谢您的任何答案，
干杯！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T02:11:27.447

我不知道该怎么做`grep(1)`。我相信我已经编写了一个小`awk`脚本，可以满足您的需求；尝试这个：

```
$ echo -e "-wordA \n 1\n 2\n 3\n-wordB \n 1\n 2\n 3\n" |
  awk '/^-wordA/ {print; getline; print;}
       /^-wordB/ {print; getline; print; getline; print;}'
-wordA 
 1
-wordB 
 1
 2
$ 
```

为了便于阅读，我已经任意换行了——当然，你需要让它完全适合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T12:32:47.463

一个grep的解决方案，假设当前目录下没有output1 output2文件

```
echo -e "-wordA \n 1\n 2\n 3\n-wordB \n 1\n 2\n 3\n" | tee >(grep -n -A1 -e '^-wordA' >output1) >(grep -n -A2 -e '^-wordB' >output2) >/dev/null ; cat output1 output2 
```

# iphone - 从 Plist 打开 WebView URL？

> ID：11303585
> 
> 赞同：0
> 
> 时间：2012-07-03T02:07:13.270
> 
> 标签：iphone, objective-c, xcode, uiwebview, plist

有没有办法检索我在 Plist 中的 url 并从中制作 webview？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T02:11:34.733

是的，您可以使用以下方式打开 plist：

```
NSString *path = [[[NSBundle mainBundle] bundlePath] stringByAppendingPathComponent:@"your.plist"];
NSDictionary *plistDictionary = [[NSDictionary dictionaryWithContentsOfFile:path] retain]; 
```

然后，您将能够在`plistDictionary`.

# c# - 将数组中的字符串分解为 C# 中的字符

> ID：11303587
> 
> 赞同：-2
> 
> 时间：2012-07-03T02:07:22.163
> 
> 标签：c#, arrays, string

抱歉这个奇怪的标题，我很难解释它。我想要的是像这样比较字符串中的字符：

```
stringa = new string[3];

for (int x = 0; x < stringa.GetLength(0); x++)
{
    Console.WriteLine("String" + (x + 1) + ":");
    stringa[x] = Console.ReadLine();
}

for(int x = 0;x < stringa.GetLength(0);x++)
{
    Console.WriteLine(stringa[x]);
} 
```

我想要的是，现在我有了 stringa[x]，我想比较该字符串中的每个字符。有什么方法可以在不使用任何临时变量的情况下做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T02:14:51.300

您可以通过索引获取字符串中的字符。例如：

```
string myString = "Test string";
Console.WriteLine(myString[0]); 
```

将写字符'T'

在您的情况下，您*可以*在第二个循环中放置另一个 for 循环并调用`stringa[x][y]`以获取第 y 个字符`stringa[x]`，但将其存储`stringa[x]`在局部变量和索引中会更有效，如下所示：

```
for(int x = 0;x < stringa.Length(0);x++)
{
    // Store stringa[x] so that we don't have to keep indexing stringa
    string stringx = stringa[x];
    for(int y = 0;y < stringx.Length(0);x++)
    {
        // Do some comparison on stringx[y]
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T02:16:46.027

字符串的每个字符都可以通过索引访问，因此下面显示了第一个字符串：

```
Console.WriteLine(stringa[0]); 
```

此代码显示第一个字符串中的第一个字符：

```
Console.WriteLine(stringa[0][0]); 
```

要确定每个单独字符串的长度，出于循环目的，您可以找到特定字符串的长度，例如：

```
stringa[x].Length 
```

# html - 在引导程序中添加下拉登录

> ID：11303589
> 
> 赞同：3
> 
> 时间：2012-07-03T02:07:27.873
> 
> 标签：html, twitter-bootstrap

我正在关注[本指南](http://mifsud.me/adding-dropdown-login-form-bootstraps-navbar/)

我将第一个代码片段添加到我现有的导航栏，然后将第二个片段添加到它显示的位置。但是，不会出现弹出登录。我的代码有什么问题？另外，我在哪里添加第三段代码？

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>SiteTitle</title>
    <meta name"viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="keywords" content="">

    <link href="css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
      }
    </style>

</head>

<body>
<div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="#">My Site</a>

        <!-- The drop down menu -->
        <ul class="nav pull-right">
          <li><a href="/users/sign_up">Sign Up</a></li>
          <li class="divider-vertical"></li>
          <li class="drop down">
            <a class="dropdown-toggle" href="#" data-toggle="dropdown">Sign In <strong class="caret"></strong></a>
            <div class="dropdown-menu" style="padding: 15px; padding-bottom: 0px;">
                          <!-- Login form here -->
              <form action="[YOUR ACTION]" method="post" accept-charset="UTF-8">
                  <input id="user_username" style="margin-bottom: 15px;" type="text" name="user[username]" size="30" />
                  <input id="user_password" style="margin-bottom: 15px;" type="password" name="user[password]" size="30" />
                  <input id="user_remember_me" style="float: left; margin-right: 10px;" type="checkbox" name="user[remember_me]" value="1" />
                  <label class="string optional" for="user_remember_me"> Remember me</label>

                  <input class="btn btn-primary" style="clear: left; width: 100%; height: 32px; font-size: 13px;" type="submit" name="commit" value="Sign In" />
              </form>
            </div>

          </li>
        </ul>
          <div class="nav-collapse">
            <ul class="nav">
              <li class="active"><a href="#">Home</a></li>
              <li><a href="#calender">Calender</a></li>
              <li><a href="#about">About</a></li>
              <li><a href="#contact">Contact</a></li>
            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container">

      <h1>Bootstrap starter template</h1>
      <p>Use this document as a way to quick start any new project.<br> All you get is this message and a barebones HTML document.</p>

    </div> <!-- /container -->

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T02:17:23.107

您似乎没有包含任何 javascript

您需要包括 jquery 和 bootstrap-dropdown.js （编辑为包括：）

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript" src="http://twitter.github.com/bootstrap/assets/js/bootstrap-dropdown.js"></script> 
```

第三段代码可以在 body 标签关闭之前运行（编辑为工作）

```
<script>
$(document).ready(function()
{
  //Handles menu drop down
  $('.dropdown-menu').find('form').click(function (e) {
        e.stopPropagation();
        });
  });
</script> 
```

# javascript - javascript字符串不是“字符串”

> ID：11303592
> 
> 赞同：-3
> 
> 时间：2012-07-03T02:07:50.617
> 
> 标签：javascript, html

不知何故，我的代码不起作用。我不知道为什么，我对 javascript 完全陌生，并认为这会起作用，在 php 中它是相似的。if(string != "string") 在 PHP 中有效，但在 javascript 中无效，在 javascript 中代码只是继续。如果我用 =! 它不起作用...

```
<SCRIPT LANGUAGE="JavaScript">
var lastsite;

function checkSite (form){
if (document.getElementById('steam').checked  && lastsite != 'steam')
{
    $('#signaturestuff').append('<b>Style:</b> <input type="radio" name="style" value="1" id="steamstyle1" onclick="testButton();"> Style 1');
var lastsite = "steam";
    }
}
</SCRIPT> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T02:23:23.830

1.  您可以在 PHP 和 Javascript 中将字符串与“==”进行比较（但*不能*在 C、C++、C# 或 Java 中）

2.  您可能*应该*使用 Javascript compareLocale () 比较字符串

3.  无论哪种情况，您都需要查看“lastsite”的值，以找出您的比较不起作用的原因。谁知道——也许你只是忘了分配它；）

4.  [Firebug](http://getfirebug.com/)是一个很棒的工具，如果你还不熟悉的话。

5.  “ [Javascript: The Good Parts](https://rads.stackoverflow.com/amzn/click/com/0596517742) ” 是一本很棒的书，如果你还没有读过的话。

# python-3.x - 在pyqt4中退出应用程序的正确方法是什么？

> ID：11303594
> 
> 赞同：0
> 
> 时间：2012-07-03T02:08:08.857
> 
> 标签：python-3.x, pyqt4

我正在学习 pyqt4 并且正在学习互联网上的教程。不知何故，示例代码中的退出行不起作用：

```
#!/usr/bin/python
# -*- coding: utf-8 -*-

"""
ZetCode PyQt4 tutorial 

This program creates a quit
button. When we press the button,
the application terminates. 

author: Jan Bodnar
website: zetcode.com 
last edited: October 2011
"""

import sys
from PyQt4 import QtGui, QtCore

class Example(QtGui.QWidget):

    def __init__(self):
        super(Example, self).__init__()

        self.initUI()

    def initUI(self):               

        qbtn = QtGui.QPushButton('Quit', self)
        qbtn.clicked.connect(QtCore.QCoreApplication.instance().quit)
        qbtn.resize(qbtn.sizeHint())
        qbtn.move(50, 50)       

        self.setGeometry(300, 300, 250, 150)
        self.setWindowTitle('Quit button')    
        self.show()

def main():

    app = QtGui.QApplication(sys.argv)
    ex = Example()
    sys.exit(app.exec())

if __name__ == '__main__':
    main() 
```

当我在 gui 中按下 X 按钮或 Quit 按钮时，控制台提示了一些错误：

```
Python 3.2.3 (default, Apr 11 2012, 07:15:24) [MSC v.1500 32 bit (Intel)] on win32
Type "copyright", "credits" or "license()" for more information.
>>> ================================ RESTART ================================
>>> 
Traceback (most recent call last):
  File "D:\Raymond\Programming Practice\python\gui_qt\lesson1_basic\gui_quit.py", line 46, in <module>
    main()
  File "D:\Raymond\Programming Practice\python\gui_qt\lesson1_basic\gui_quit.py", line 42, in main
    sys.exit(app.exec())
SystemExit: 0 
```

我通过替换行来修复代码

```
sys.exit(app.exec()) 
```

用这条线：

```
return app.exec() 
```

然后应用程序优雅地退出。但是我不确定这种方法是否有任何缺点，因为它只是返回状态。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T08:30:30.900

我想你会发现正确的语法是`sys.exit(app.exec_())`

注意下划线

它不能解决 control+C 问题，但程序将退出而不会在命令行上出现错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T23:20:51.367

实际上，从技术上讲，这不是错误，而是例外。虽然错误是异常，但并非所有异常都必然是错误。有几个“特殊”异常，例如`SystemExit`,`StopIteration`等，python 用于各种不同的事物。`sys.exit`引发`SystemExit`异常以退出您的程序。

来自[文档](http://docs.python.org/3.2/library/sys.html)：

> sys.exit([arg])
> 
> 退出 Python。这是通过引发 SystemExit 异常来实现的，因此由 try 语句的 finally 子句指定的清理操作得到遵守，并且可以在外部级别拦截退出尝试。
> 
> 可选参数 arg 可以是给出退出状态的整数（默认为零），也可以是其他类型的对象。如果它是一个整数，则零被认为是“成功终止”，任何非零值都被 shell 等视为“异常终止”。大多数系统要求它在 0-127 范围内，否则会产生未定义的结果。一些系统有为特定退出代码分配特定含义的约定，但这些通常不发达；Unix 程序通常使用 2 表示命令行语法错误，使用 1 表示所有其他类型的错误。如果传递了另一种类型的对象，则 None 等效于传递零，并且任何其他对象都将打印到 stderr 并导致退出代码 1。特别是 sys.exit("some error message") 是一种快速的方法发生错误时退出程序。
> 
> 由于 exit() 最终“只”引发异常，因此只有在从主线程调用时才会退出进程，并且不会拦截异常。

所以真的，`sys.exit(app.exec())`和 没有什么不同`raise SystemExit(app.exec())`。在这种情况下，通过添加真正改变的唯一一件事`sys.exit`是返回由`app.exec()`.

# python - Python在两次使用值时避免使用变量？

> ID：11303596
> 
> 赞同：4
> 
> 时间：2012-07-03T02:08:35.780
> 
> 标签：python, variables

我目前有：

```
tmp = myfunc()
mydict[mykey] = tmp
return tmp 
```

..这似乎有点太长了。在javascript中，我可以这样做：

```
return (mydict[mykey] = myfunc()) 
```

上面的 Python 代码是公认的方法，还是有别的方法？

编辑：我知道这样做的可能性：

```
mydict[mykey] = myfunc()
return mydict[mykey] 
```

..但我不想进行两次密钥查找。除非

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-03T02:19:14.507

```
tmp = mydict[mykey] = myfunc()
return tmp 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T02:11:20.943

如果你想要更少的代码行，你可以这样做：

```
mydict[mykey] = myfunc()
return mydict[mykey] 
```

但是，赋值不是 Python 中的表达式，因此您不能使用 javascript 版本。

* * *

编辑：如果您**知道**密钥不在字典中，您可以这样做：

```
return mydict.setdefault(mykey, myfunc()) 
```

`setdefault`是一个查找函数，如果键不在字典中，则将键设置为第二个值。

* * *

您还可以编写一个辅助函数：

```
def set_and_return(d, k, v):
    d[k] = v 
    return v 
```

然后，在其他任何地方，您都可以：

```
return set_and_return(mydict, mykey, myfunc()) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T02:44:26.767

意见各不相同，但这是我的 0.02 美元。

1.  请不要使用默认字典。如果我正在阅读您的代码，我可能不知道您知道什么，字典中没有键。稍后有人可能会更新代码并违反这个无声的假设，代码就会中断。
2.  请不要使用“set_and_return”功能。您的代码可能很聪明，但可读性较差。更多的行，更难遵循，函数查找的成本与 dict 查找相同。
3.  `@gnibbler`有一个不错的“更少的代码行”解决方案，但我不建议这样做，并且阅读了很多 python 源代码我很少看到这种语法（在函数的开头比其他任何地方都多）

我很欣赏它在 javascript 中是如何发生的，但它是被接受的方式：我投票支持您的原始格式，最容易阅读和理解，并且不比任何其他解决方案更慢或效率更低。

```
tmp = myfunc()
mydict[mykey] = tmp
return tmp 
```

# iphone - 有没有办法将 LilyPad Arduino 与 iOS 设备通信？

> ID：11303598
> 
> 赞同：0
> 
> 时间：2012-07-03T02:09:54.677
> 
> 标签：iphone, ios, ipad, bluetooth, arduino

使用蓝牙伴侣[http://www.sparkfun.com/products/9358](http://www.sparkfun.com/products/9358)，您可以通过蓝牙将 LilyPad 无线连接到 PC 或 Mac。我还看到有人使用他们的 Android 手机通过蓝牙伴侣与 LilyPad 进行通信。有没有办法让 LilyPad 与 iOS 设备通信。如果是这样，我们如何用它打开一个串行通道？

任何人做过的任何示例或项目都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T02:18:14.487

看看这个类似的问题：[Connect an iPhone to Arduino over Bluetooth](https://stackoverflow.com/questions/7770973/connect-an-iphone-to-arduino-over-bluetooth)

显然，为了实现您想要的，您必须“[j]加入 MFi 许可计划，以获得创建 AirPlay 音频配件和连接电子配件所需的硬件组件、工具、文档、技术支持和认证徽标到 iPod、iPhone 和 iPad。” [您可以在此处](https://developer.apple.com/programs/mfi/)了解有关 MFi 计划的更多信息。

我环顾四周，发现[这篇](http://blog.makezine.com/2012/03/19/bluetooth-4-0-from-arduino-to-iphone-no-jailbreaking-no-mfi/)文章采访了 Michael Kroll 博士，他声称他找到了一种无需注册 MFi 计划即可将数据从 Arduino 传输到 iPhone 的方法。

另请查看这本书：[iOS Sensor Apps with Arduino](http://www.makershed.com/iOS_Sensor_Apps_with_Arduino_PDF_p/emisaa.htm?Click=37845)。它涵盖：

*   了解如何将 Arduino 平台连接到任何 iOS 设备
*   构建一个简单的应用程序来直接从 iPad 控制您的 Arduino
*   从超声波测距仪收集测量结果并在 iPhone 上显示
*   将 iPhone、iPad 或 iPod Touch 连接到 XBee 无线电网络
*   探索将外部传感器连接到 iOS 的其他方法，包括以太网和 MIDI 协议

iOS Sensor Apps with Arduino 有一本名为[iOS Sensor Programming](http://shop.oreilly.com/product/0636920003250.do)的“父”书，它比 Arduino 书更广泛。本书涵盖：

*   了解编程 iPhone 内置传感器的热门话题
*   了解如何创建响应用户位置的传感器感知应用
*   了解增强现实编程的基础知识
*   构建结合来自加速度计、GPS、数字罗盘和相机的数据的应用程序

无论如何，我希望您至少发现其中一些信息对您有所帮助！

# performance - 是什么让我的应用程序如此缓慢

> ID：11303602
> 
> 赞同：0
> 
> 时间：2012-07-03T02:11:15.173
> 
> 标签：performance, debugging, facebook-graph-api

我正在制作一个应用程序来为你的 facebook 图片添加一些效果，但我不知道是什么让它这么慢，你可以在这里查看应用程序：(https://apps.facebook.com/filter_box/) 当你点击“usar una foto”加载所有图像需要很长时间，我不知道是CSS动画，fb查询，我的网络服务器还是其他东西，所以我想知道是否有人可以帮助我如何调试它，看看是什么让它加载这么慢，提前谢谢大家！

这里的 PPD 是在 usar.php 或“usar una foto”中使用它的代码

```
<?php 
    include_once("config.php");
?>
<!DOCTYPE html>
<html lang="es" xmlns:fb="http://www.facebook.com/2008/fbml">
  <head>
    <meta charset=utf-8>
    <title>Minstagram</title>
    <link rel="stylesheet" href="style.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>   
  </head>
  <body>
  <div id="fb-root"></div>
  <script>
      window.fbAsyncInit = function() {
        FB.init({
          appId: '<?php echo $facebook->getAppID() ?>',
          cookie: true,
          xfbml: true,
          oauth: true
        });
        FB.Canvas.setAutoResize();
        FB.Canvas.scrollTo(0,0);

      };
      (function() {
        var e = document.createElement('script'); e.async = true;
        e.src = document.location.protocol +
          '//connect.facebook.net/en_US/all.js';
        document.getElementById('fb-root').appendChild(e);
      }());
    </script>
    <div id="main">
        <?php 
        include_once("menu.php"); 

        $albums = $facebook->api('/me/albums?limit=0');

        ?>
        <ul id="breadcrumbs-two">
        <li><a href="/">Inicio</a></li>
        <li><a href="usar.php">Álbumes</a></li>
        </ul>

        <ul class="polaroids" >
        <li> <a href="album.php " title="Todas tus fotos"><img src="" alt="" /> </a> </li>

        <?php

        foreach($albums['data'] as $album)
        {
            // get all photos for album
            $photos = $facebook->api("/{$album['id']}/?fields=picture,name,count");
            $foto = $photos['picture'];
            $nombre = $photos['name'];

            $id = $photos['id'];
            $count = $photos['count'];

            $nombre = $nombre." (".$count.")";

            echo "<li> <a href=\"album.php?numero_album=$id&nombre_album=$nombre \" title=\"$nombre\"><img src=\"$foto\" alt=\"$nombre\" /> </a> </li>";
        }
        echo "</ul>";
        ?>  
    </div>
  </body>   
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T02:40:55.233

`foreach`您的应用程序运行缓慢，因为您正在循环中进行 api 调用。每次您拨打电话时，您的服务器都会向 Facebook 发送一个请求并暂停执行，直到收到响应为止。

您应该使用[batch.request](https://developers.facebook.com/docs/reference/api/batch/)语法或[FQL](https://developers.facebook.com/docs/reference/fql/)一次返回所有照片，然后在脚本中处理这个大响应。

# security - 使用 FiddlerCore 代理时通过 pac 设置安全区域

> ID：11303605
> 
> 赞同：0
> 
> 时间：2012-07-03T02:11:28.030
> 
> 标签：security, internet-explorer, fiddler, zones

在使用 FiddlerCore 捕获流量时，有什么方法可以让 pac 文件在 IE 中正确设置区域？当我将 FiddlerCore 与 pac 一起使用时，一切都在默认区域中结束。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T17:53:18.747

我*想*你在问：“*我可以有一个返回 DIRECT 的 PAC 脚本，这样流量被划分到 Intranet 区域但仍然通过 FiddlerCore*吗？”

流量不能同时绕过 FiddlerCore（获取 Intranet 区域）并同时发送到 FiddlerCore（获取捕获）。但是，如果您愿意，*可以使用手动区域设置将站点映射到 Intranet 区域。*有关详细信息，请参阅[http://blogs.msdn.com/b/ieinternals/archive/2012/06/05/the-local-intranet-security-zone.aspx](http://blogs.msdn.com/b/ieinternals/archive/2012/06/05/the-local-intranet-security-zone.aspx)。

# actionscript-3 - Actionscript 3 - 路径重叠

> ID：11303608
> 
> 赞同：0
> 
> 时间：2012-07-03T02:11:32.033
> 
> 标签：actionscript-3, vector-graphics

我对 Actionscript 3 有点陌生。我正在 Flash 中构建 svg 导出/导入，需要使预览的行为与 svg 相同。在 Flash 中，如果路径重叠，则将其删除。如何让它填满整个区域？

路径是这样创建的：

```
object.graphics.moveTo(xpos[i], ypos[i]);
object.graphics.lineTo(px, py); 
```

结果是![在此处输入图像描述](../Images/89c7a84fd4965a8a441da2a1c88c4b1c.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T04:28:38.663

这是由图形路径缠绕引起的。

![图形路径缠绕](../Images/a6a7963888b77023210bdd270c6cab24.png)

[定义缠绕规则](http://help.adobe.com/en_US/as3/dev/WS1EE3740D-F65C-43bf-9B12-74E34D7D1CBE.html)
[flash.diplay.GraphicsPathWinding](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/GraphicsPathWinding.html)

在 Flash 中，默认的缠绕规则是偶数。

对于使用 生成的图形`drawPath`，将`GraphicsPathWinding.NON_ZERO`缠绕添加到您的 drawPath：

```
import flash.display.GraphicsPathWinding;

graphics.drawPath(new <int>[], new <Number>[], GraphicsPathWinding.NON_ZERO); 
```

对于使用便捷方法（如 、 或 ）绘制的图形`lineTo()`，`drawCircle()`您可以`drawRect()`按形状绘制，如下所示：`beginFill()``endFill()`

![在此处输入图像描述](../Images/bd7bbc9f27235439c9addc1f29763f5e.png)

```
var g:Graphics = graphics;

g.beginFill(0x123456)
g.drawRect(100, 100, 50, 50);
g.endFill();

g.beginFill(0x123456)
g.drawRect(125, 125, 50, 50);
g.endFill(); 
```

代替：

![奇偶](../Images/d564a6497167104b857bb11d08af109b.png)

```
var g:Graphics = graphics;

g.beginFill(0x123456)
g.drawRect(100, 100, 50, 50);
g.drawRect(125, 125, 50, 50);
g.endFill(); 
```

# android - 使用 Fragment Tabs 将 Model View Presenter 模式适配到 Android

> ID：11303610
> 
> 赞同：9
> 
> 时间：2012-07-03T02:11:47.573
> 
> 标签：android, views, android-activity, mvp, fragment

我正在将应用程序从 windows mobile 移植到 android，但遇到了一些问题。现有应用程序使用 MVP 模式并具有不同的“presenter”类，这些类将在端口中重用（这是一个相当广泛的应用程序，重写它是不可能的，并且 C# 代码都使用 mono for android 重用）。这些采用实现接口的视图，在android中我通过创建实现适当接口的活动、实例化演示者并将自己作为参数传递来实现。对于我们的目的，这一切似乎都可以正常工作，或者直到冰淇淋三明治出现并且我尝试使用片段来实现它。

相当多的活动使用选项卡，为了使用操作栏和其他一些新功能，我正在尝试使用查看器将选项卡式活动转换为选项卡式片段，这就是我遇到一些问题的地方。从我所阅读的内容来看，将每个选项卡实现为片段似乎是首选方法，但我对如何允许演示者通过活动与片段进行通信感到困惑。目前演示者调用活动的接口方法，然后直接访问微调器、文本视图等以根据需要获取和设置值。由于这些 ui 元素中的每一个都在活动中声明，这很简单。如果我将所有这些 ui 元素移动到片段中，但它不会 似乎我可以访问它们，而无需在每个活动和片段之间实现一套全新的接口。我尝试在活动中生成对片段中 ui 元素的引用（通过获取片段根视图，然后在其中找到我想要的视图），但是 viewpager 并不总是加载片段，所以这不起作用，即使它已经加载了它们，布局也不会膨胀，直到活动处于运行状态，所以我总是返回空值。

我知道这是一个奇怪的问题，但是我怎样才能让我的演示者类与现在存储在单独的片段选项卡中的 ui 元素进行交互？我觉得我必须以完全错误的方式去做，但我只是看不出应该如何去做，所以如果有人能就我如何去做这件事提供一些建议，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-16T08:39:01.330

如何为 FragmentAcivity 中的所有 Fragment 创建单个 Presenter，然后让这个单个 Presenter 为每个 Fragment（又名 Tab）实现一个接口。然后从您的 FragmentActivity 实例中实例化此演示者，演示者将从该实例中获得对所有片段的引用。

# linux - 速率单调分析

> ID：11303620
> 
> 赞同：2
> 
> 时间：2012-07-03T02:13:23.753
> 
> 标签：linux, kernel, real-time, scheduling, code-analysis

我正在开展一个项目，以使用[速率单调分析](http://en.wikipedia.org/wiki/Rate-monotonic_scheduling)来验证一个相当大的程序的多线程执行。要执行分析，我需要每次运行的执行时间以及运行次数。最后，将分析数据以找到每个运行线程的平均周期。我收集这些数据的问题有什么解决方案吗？我研究了[LTTng](http://lttng.org/)和[Intel vTune](http://software.intel.com/en-us/articles/intel-vtune-amplifier-xe/)，但有一些问题：

1.) LTTV/eclipse 插件是否计算我需要的平均执行时间？

2.) Intel VTune 是否在 kvm 虚拟机中工作？

开发计算机是当前直接在硬件上运行 RHEL（但使用 AMD 处理器）的服务器，但最终将转移到运行在英特尔至强处理器上的 vm。该软件还具有运行的 c++ 和 java 可执行文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T22:58:01.107

该`perf`实用程序可用于计算和跟踪 KVM 内核模块中的性能事件。

[http://www.linux-kvm.org/page/Perf_events#Recording_events](http://www.linux-kvm.org/page/Perf_events#Recording_events)

使用这样的命令（`sudo`如果您没有以 root 身份登录，请使用）：

```
# perf kvm --guest [kvm options] record -a -o my.perf.data 
```

报告结果，像这样

```
# perf kvm --guest report -i my.perf.data 
```

# asp.net-mvc - ASP.NET MVC 3 Membership using Entity Framework

> ID：11303621
> 
> 赞同：2
> 
> 时间：2012-07-03T02:13:53.630
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-membership

I'm using ASP.NET MVC 3 to built my site (former PHP programmer), using Entity Framework and I wish to integrate the built-in membership support. Although I've read lot of questions and tutorials I couldn't figure out wish approach should I use when using MVC and EF.

I read about the MembershipProvider but it seems like a ASP.NET web-forms related...

Which technique should I use in order to integrate membership (with many properties, even different sign on ways: FB, twitter etc.) to my site and be able to integrate it with my currently Entity framework data. Note: I've used code-first approach but I don't mind to rewrite it since I didn't got anything special yet.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T02:50:36.623

It looks like you will need to implement your own membership provider. Not very easy, but doable. See the [`MembershipProvider`](http://msdn.microsoft.com/en-us/library/system.web.security.membershipprovider.aspx) class. This [implementation](http://efmembership.codeplex.com/) might help you as well.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T14:10:18.060

How do you mean to your current EF data? The two generally can remain separate. Auth is a security concern, your EF classes are a business domain concern, so the two generally can remain separate and asp.net membership will run in its own separate database.

The question now is iif you want all these tables in the same database (which many do) in that case use Ambers suggestion below with aspnet_regsql.exe although you'll need to update the connect string for the membership and role provider. In this way using EF code first you can use your existing EF connection string (you can't do this however with database first and the edmx connect string)

To configure the db connection string for membership: [http://msdn.microsoft.com/en-us/library/6e9y4s5t.aspx](http://msdn.microsoft.com/en-us/library/6e9y4s5t.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T08:04:19.790

You can use standart MembershipProvider in ASP .NET MVC 3 too. It doesn't use EF connection, it works with database in its own way.

You should prepare database with aspnet_regsql.exe, and implement your logic - authentification, creating new users, adding new roles for them, changing password and so on. In general, the best way is to study Test Internet Application in VS.

If the functions of standart MembershipProvider isn't enough for you, you have to write your own implementation.

# javascript - jquery json帖子不起作用

> ID：11303622
> 
> 赞同：0
> 
> 时间：2012-07-03T02:14:16.407
> 
> 标签：javascript, jquery, ajax, json, cakephp

好吧，我试图将 jquery 中的变量发布到我的控制器。但是好像发帖不成功。当我尝试在控制器中检索它时，我没有得到任何价值。它说未定义的索引。这是我所拥有的：

我的jQuery：

```
$(document).ready(function(){
    $('.buttons').click(function(){
        var data = $(this).attr("value");
//      var test = 'test';

        jQuery.ajax({
            url:'<?php echo $this->Html->url(array('controller'=>'maps','action'=>'instantiateButtonValue'));?>',
            type: 'POST',
            async: false,
            data: data,
            dataType: 'json'
//          success:function(data){
//              alert(data);
//          },
//          error:function(data){
//              alert(data);
//          }
        });
    }); 
}); 
```

我的控制器：

```
function instantiateButtonValue(){ 
            echo $_POST['data'];

//          $this->set('data','some');
//          $this->render('json');

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T02:18:39.363

我认为你应该在 URL 中用 " 引号而不是 ' 引号括起来。

在 PHP 中，您应该编码为 JSON 而不是直接回显，以通过 JQuery 检索值。像下面

```
echo json_encode($_POST['data']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T02:39:03.993

我从这里的链接中得到了一个[想法](https://stackoverflow.com/questions/7864515/post-ajax-and-php-json-submission?rq=1)

```
$(document).ready(function(){
    $('.buttons').click(function(){
        var data = $(this).attr("value");
//      var test = 'test';

        jQuery.ajax({
            url:"<?php echo $this->Html->url(array('controller'=>'maps','action'=>'instantiateButtonValue'));?>",
            type: 'POST',
            async: false,
            data: {data:data},
            dataType: 'json'
        });
    }); 
}); 
```

# deployment - 通过 Jenkins 作业将多个战争部署到多个远程容器

> ID：11303625
> 
> 赞同：0
> 
> 时间：2012-07-03T02:14:49.497
> 
> 标签：deployment, jenkins, jenkins-plugins, continuous-deployment

嗨，我正在使用 Jenkins 构建并部署到远程容器。到目前为止，我的 maven 工作通过一个父 pom 构建 5 个 webapp，并将所有战争部署到一个远程容器中。

截至目前，我正在使用部署插件，它允许将战争部署到单个远程容器。

现在我想把每场战争放到一个不同的远程容器中。请让我知道任何可用的插件或用于指定部署每个战争文件的位置的任何脚本。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T09:34:11.517

为此，您可以编写一个 ant 脚本。Tomcat 管理器插件可以通过 Ant 来控制，所以你可以为你的 5 台不同的服务器编写 5 种不同的任务。您可以将此 ant 脚本添加为构建后任务。

谢谢参数

# c# - C# 使用未分配的局部变量....困惑

> ID：11303629
> 
> 赞同：1
> 
> 时间：2012-07-03T02:14:58.680
> 
> 标签：c#, arrays, for-loop

尝试使用此 for 循环进行迭代并将用户的 int 输入到数组中。我收到一个错误，不明白为什么..

错误：错误 1 ​​使用未分配的局部变量“数组”

```
using System;

namespace Lab16
{
class Program
{
    static void Main(string[] args)
    {
        int[] array;
        int value;

        Console.Write("How big of an Array? ");
        int arraySize = int.Parse(Console.ReadLine());

        for (int i = 0; i <= arraySize; i++)
        {
            Console.Write("First Value: ");
            value = int.Parse(Console.ReadLine());
       -->  array[i] = Convert.ToInt32(value);

        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T02:16:20.440

您的数组变量未初始化。写这个应该可以解决它：

```
int[] array = new int[arraySize]; 
```

（注意，当然这需要*在*您从控制台读取*arraySize之后进行......）*

```
int value;
Console.Write("How big of an Array? ");
int arraySize = int.Parse(Console.ReadLine());
int[] array = new int[arraySize]; 
```

还有一个问题……你写的 for 循环会越界。应该是这样的：

```
for (int i = 0; i < arraySize; i++) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T02:16:35.080

C# 中的局部*变量*不是`initialized`/assigned 隐式的。在您的代码片段中，您需要创建一个数组。

```
 int[] array=new int[arraySize]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T02:18:13.340

一旦知道数组应该有多大，就需要初始化数组。

您还需要从 to 迭代`0`-`arraySize-1`所以我将您更改`<=`为`<`：

```
 Console.Write("How big of an Array? ");
    int arraySize = int.Parse(Console.ReadLine());
    int[] array = new int[arraySize];
    for (int i = 0; i < arraySize; i++)
    {
        Console.Write("Value: ");
        int value = int.Parse(Console.ReadLine());
        array[i] = Convert.ToInt32(value);
    } 
```

如果用户输入`10`长度，您将数组初始化为长度 10 - 然后您可以访问元素`0`到`9`，这是 10 个单独的元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T02:24:38.060

您需要初始化数组，但在知道它需要的大小之前就声明了它。

```
using System; 

namespace Lab16 
{ 
class Program 
{ 
    static void Main(string[] args) 
    { 
        int arraySize; 
        int arrayValue;

        Console.WriteLine("How big of an Array? "); 

        while(!int.TryParse(Console.ReadLine(), out arraySize))
        { 
            Console.WriteLine("How big of an Array? ");
        }

        int[] array = new int[arraySize]; 
        for (int i = 0; i < arraySize; i++) 
        { 
            Console.WriteLine(string.Format("Value of element {0}: ", i));
            while(!int.TryParse(Console.ReadLine(), out arrayValue))
                 Console.WriteLine(string.Format("Value of element {0}: ", i));
            array[i] = arrayValue;
        } 
    } 
} 
} 
```

# ruby-on-rails - Rails 控制器操作是否隐式定义事务绑定？

> ID：11303630
> 
> 赞同：6
> 
> 时间：2012-07-03T02:15:04.737
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

给定以下代码：

```
def create
  @something = Something.new(params[:something])
  thing = @something.thing # another model

  # modification of attributes on both 'something' and 'thing' omitted

  # do I need to wrap it inside a transaction block?  
  @something.save
  thing.save
end 
```

将 create 方法隐式包装在 ActiveRecord 事务中，还是需要将其包装到事务块中？如果我确实需要包装它，这是最好的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T04:30:16.873

简要回答：您需要将代码显式包装在事务块中。基本上，当您想要执行一组 SQL 语句时，您必须使用事务来维护引用完整性。

```
Something.transaction do 
  @something.save
  thing.save
end 
```

进一步阅读：[http ://api.rubyonrails.org/classes/ActiveRecord/Transactions/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/Transactions/ClassMethods.html)

# flash - 使用 Intellij，启动“Flash App”运行配置，如何添加参数以使 Flash 播放器启动指定大小？

> ID：11303631
> 
> 赞同：2
> 
> 时间：2012-07-03T02:15:08.653
> 
> 标签：flash, intellij-idea

在 Flashdevelop 中运行 swf 时，我可以使用项目属性指定 flashplayer 将打开的尺寸。

![在此处输入图像描述](../Images/2c89a93c82fa8c63099e3fd6e544a5a4.png)

我想在 IntelliJ 中指定这些尺寸。我认为这可以在运行配置的某个地方完成？

这可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T08:11:27.723

您需要将 [SWF] 元数据添加到您的主类：

```
[SWF(width="512", height="512")]
public class MySprite extends Sprite {
    ...
} 
```

或者

```
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" xmlns:s="library://ns.adobe.com/flex/spark">
    <fx:Metadata>
        [SWF(width="512", height="512")]
    </fx:Metadata>
    ...
</s:Application> 
```

# javascript - 模态框在运行时更改标题和按钮名称

> ID：11303632
> 
> 赞同：1
> 
> 时间：2012-07-03T02:15:15.503
> 
> 标签：javascript, jquery, jquery-ui, modal-dialog, jquery-dialog

我希望能够在运行时更改模式的标题和按钮。目前我有这个我有批准或拒绝的行动

```
var recButton = actions =='approval' ? 'Approve' : 'Deny';

$("#dialog").dialog(
    {
        modal : true,
        buttons : {
            'update all' : function() {
                // window.location.reload();
                // $( this ).dialog( "close" );
                //do something here
            },
            Cancel : function() {
                $(this).dialog("close");
            }
        }
    }); //dialog
}); 
```

我也尝试为按钮执行此操作

```
$("#dialog").dialog(
    {
        modal : true,
        buttons : {
            recButton : function() { ... 
```

但在模态中它翻译得不好，只是说 recButton 而不是变量值。我也需要更改标题。

**更新：**通过简单的标题获得标题：

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T02:37:41.280

嘿 Autolycus：试试这个人：**工作演示** [http://jsfiddle.net/C4A9b/10/](http://jsfiddle.net/C4A9b/10/)

请使用 firebug 检查元素 id/类：

`$('.ui-dialog-title').html("HULK is awesome");`应该做的伎俩。

希望能帮助到你`:)`

**代码**

```
$(document).ready(function() {
    $('#theLink').click(function(){
                $( "#forgot-dialog" ).dialog( "open" );    
    });

    $( "#forgot-dialog" ).dialog({
            modal: true,
            autoOpen: false,
            height: 255,
            width: 300,
            buttons: {
                "ChangeTitle": function() {

                    alert("Title before cahnge ==> " + $('.ui-dialog-title').html());
                   $('.ui-dialog-title').html("HULK is awesome");
                    // document.forms["forgotform"].submit();
                },
                Cancel: function() {
                    $( this ).dialog( "close" );
                }
            },
    });

}); 
```

**或者**

```
var formname = "form_name_here";

$("#ui-dialog-title-"+formname).innerHTML = "Hulk is awesome title"; 
```

下图显示之前和之后。

**单击更改标题按钮之前的图像**

![在此处输入图像描述](../Images/9cbf6191f5f9bc70a30994a8ccd61926.png)

**点击更改标题后**

![在此处输入图像描述](../Images/6a0f9ddae92af1f7dd4da94f989242ca.png)

# php - FLOW3 身份验证登录表单错误

> ID：11303635
> 
> 赞同：0
> 
> 时间：2012-07-03T02:15:39.137
> 
> 标签：php, typo3-flow

我尝试在 Flow3 PHP 框架中创建登录表单，但出现此错误：

```
Might be missing or wrong credentials or no authentication provider matched. 
```

有谁知道如何创建登录表单而不是下面的链接？

[http://www.layh.com/work/flow3-fluid/tutorials/flow3-registration-and-login.html](http://www.layh.com/work/flow3-fluid/tutorials/flow3-registration-and-login.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T16:53:31.850

您使用的是最新版本的 FLOW3 吗？我相信在 1.1 版本中 defaultAuthenticationProvider 设置已被弃用。

# design-patterns - 抽象工厂与工厂方法（范围）

> ID：11303636
> 
> 赞同：4
> 
> 时间：2012-07-03T02:15:40.930
> 
> 标签：design-patterns

工厂方法是类设计模式。抽象工厂使用许多工厂方法。为什么抽象工厂是对象设计模式，而不是类设计模式？抽象工厂将实例化推迟到哪个对象？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T02:46:21.897

抽象工厂模式将产品对象的创建推迟到 ConcreteFactory 子类。由于客户端期望 Factory 类（它是 ConcreteFactory 子类的父类）作为方法参数；基于传递的 ConcreteFactory 实例，创建相应的产品实例。因此，抽象工厂通过在运行时传递的 ConcreteFactory 实例上调用工厂方法来创建产品实例。因此，这是对象设计模式。通常，这些混凝土工厂是单件。

然而，工厂方法发生在类级别。必须创建一个新的 ConcreteFactory 类来实例化一个 ConcreteProduct。这个 ConcreteFactory 扩展了 Factory 类，该类具有返回 Product 的 create() 方法。ConcreteFactory 覆盖了 Factory 父类中定义的 create() 方法。

回应评论：

是的，工厂方法是参数化的，但在 AbstractFactory 中，您将能够在传递的 ConcreteFactory 上调用方法，从而使您能够在运行时切换到不同的 ConcreteFactory。但是在 Factory 中，由于 create() 是类的一部分，因此如果要创建具体产品，则必须创建 ConcreteFactory 来扩展父 Factory 类。

# haskell - 相当于mapM的箭头？

> ID：11303642
> 
> 赞同：14
> 
> 时间：2012-07-03T02:16:28.803
> 
> 标签：haskell, arrows

我正在尝试与 Arrows 一起探索和工作，但遇到了一些困难。我有一个需要 的上下文`Arrow [a] [b]`，并且我想`Arrow a b`在箭头 a la 内编写一个并将其映射/排序`mapM`。具体来说，箭头是 Hakyll `Compiler`，但我认为这对答案并不重要。

给定一个箭头

```
myInnerArrow :: Arrow a => a b c 
```

我怎样才能把它变成箭头

```
myOuterArrow :: Arrow a => a [b] [c] 
```

?

我已经搜索了基础库，特别是在`Data.List`and中`Control.Arrow`，但我找不到任何看起来可以完成这项工作的东西。它是否以我没想到的名字存在？它是由其他图书馆提供的吗？是不是因为某种原因不能写？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-03T02:35:34.977

你不能没有选择。提升功能将具有以下类型：

```
mapA :: (ArrowChoice a) => a b c -> a [b] [c] 
```

最简单的实现方法是使用`proc`符号：

```
mapA c =
    proc xs' ->
        case xs' of
            [] -> returnA -< []
            (x:xs) -> uncurry (:) ^<< c *** mapA c -< (x, xs) 
```

未经测试的代码，但应该可以工作。但是请注意，通用的函数将非常慢。我建议专门为您的箭头编写此映射函数。

# url-rewriting - 将 URL 参数重写为目录 - 就像 Wikipedia URL

> ID：11303643
> 
> 赞同：1
> 
> 时间：2012-07-03T02:16:29.720
> 
> 标签：url-rewriting, wiki

我正在运行一个 wiki，并且 URL 如下所示：

/wiki/index.php?title=我的标题

但我希望它看起来像这样：

/wiki/我的标题

我怎样才能做到这一点？我认为这可以通过 .htaccess 和重写规则来完成，我在这个网站和谷歌上环顾四周，但我找不到任何真正帮助我的东西。现在我在 /wiki/ 目录的 .htaccess 中得到了这个。

```
RewriteEngine      on
RewriteOptions MaxRedirects=1
RewriteRule        ^(.+)     index\.php\?title=$1     [L] 
```

但这只是将我重定向到 /wiki/index.php?title=Index.php 并引发“检测到重定向循环！” 错误。我不确定我是否真的了解这些东西是如何工作的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T02:22:01.910

无需制定复杂的规则，只需*将所有*流量路由到 index.php，然后将“子目录”作为参数处理。我使用[本指南](http://www.phpaddiction.com/tags/axial/url-routing-with-php-part-one/)来帮助我这样做。从那个网站：

```
Options +FollowSymLinks
IndexIgnore */*
# Turn on the RewriteEngine
RewriteEngine On
#  Rules
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . index.php 
```

把它放在你的 .htaccess 文件中，所有的流量都会转到 index.php。然后将 index.php 写成本质上是一个“路由器”，它将加载和显示服务器上的其他 PHP 脚本。

您可以通过创建一个数组（同样，从链接的站点）从 PHP 访问参数：

```
$requestURI = explode(‘/’, $_SERVER[‘REQUEST_URI’]); 
```

然后`$requestURI`将是给定参数的数组，因此：

```
/wiki/MyTitle 
```

将变成：

```
Array ( [0] => [1] => wiki [2] => MyTitle ) 
```

# c++ - 在 C++ 中控制实例化和成员变量

> ID：11303646
> 
> 赞同：2
> 
> 时间：2012-07-03T02:16:52.647
> 
> 标签：c++, class

据我了解，当你创建一个 C++ 类时，你隐含了一个默认的无参数构造函数、一个默认的复制构造函数和一个默认的赋值运算符。

如果我想确保每次创建我的对象的实例或我的对象发生变异（例如通过赋值）时都会收到警报，那么这些是我唯一需要担心的方法/构造函数吗，因为我保留了所有我的字段私有？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T02:19:04.197

如果您班级中的其他所有内容都是私人的，是的。

尽管请记住，如果其他人可能会参与此代码，那么私有方法中也可能会发生意外修改。所以你可能也想关注它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T02:39:16.880

如果您的类的数据成员被攻击或指针操作错误修改，您将不会收到警报。不确定这是否是问题的一部分。

# android - android - 如何从接收器类调用另一个活动的方法？

> ID：11303653
> 
> 赞同：1
> 
> 时间：2012-07-03T02:17:55.980
> 
> 标签：android, methods, broadcast

我正在使用清单中定义的接收器类，例如

```
 <receiver 
      android:name="com.escortme.basic.SMSReceiverActivity"
      android:enabled="true">
      <intent-filter>
        <action android:name="android.provider.Telephony.SMS_RECEIVED" />
      </intent-filter>
    </receiver> 
```

收听传入的文本，但问题是如何从 SMSReceiverActivity 中的 onrecieve 方法调用手机正在显示的当前活动的方法？

因此，例如，如果我当前在手机上使用 pol_viewactivity，那么我收到一条文本，我知道 onrecieve 方法是在 SMSReceiverActivity 的后台发生的，但是在 onreceive 方法中，我如何从 pol_viewactivity 中调用一个方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T03:30:28.923

试试这个希望对你有帮助

```
public class SMS extends Activity 
{

    Button btnSendSMS;
    EditText txtPhoneNo;
    EditText txtMessage;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);        
        btnSendSMS = (Button) findViewById(R.id.btnSendSMS);
        txtPhoneNo = (EditText) findViewById(R.id.txtPhoneNo);
        txtMessage = (EditText) findViewById(R.id.txtMessage);

        /*
        Intent sendIntent = new Intent(Intent.ACTION_VIEW);
        sendIntent.putExtra("sms_body", "Content of the SMS goes here..."); 
        sendIntent.setType("vnd.android-dir/mms-sms");
        startActivity(sendIntent);
        */

        btnSendSMS.setOnClickListener(new View.OnClickListener() 
        {
            public void onClick(View v) 
            {               
                String phoneNo = txtPhoneNo.getText().toString();
                String message = txtMessage.getText().toString();               
                if (phoneNo.length()>0 && message.length()>0)                
                    sendSMS(phoneNo, message);                
                else
                    Toast.makeText(getBaseContext(), 
                        "Please enter both phone number and message.", 
                        Toast.LENGTH_SHORT).show();
            }
        });        
    }

    //---sends a SMS message to another device---
    private void sendSMS(String phoneNumber, String message)
    {      
        /*
        PendingIntent pi = PendingIntent.getActivity(this, 0,
                new Intent(this, test.class), 0);                
            SmsManager sms = SmsManager.getDefault();
            sms.sendTextMessage(phoneNumber, null, message, pi, null);        
        */

        String SENT = "SMS_SENT";
        String DELIVERED = "SMS_DELIVERED";

        PendingIntent sentPI = PendingIntent.getBroadcast(this, 0,
            new Intent(SENT), 0);

        PendingIntent deliveredPI = PendingIntent.getBroadcast(this, 0,
            new Intent(DELIVERED), 0);

        //---when the SMS has been sent---
        registerReceiver(new BroadcastReceiver(){
            @Override
            public void onReceive(Context arg0, Intent arg1) {
                switch (getResultCode())
                {
                    case Activity.RESULT_OK:
                        Toast.makeText(getBaseContext(), "SMS sent", 
                                Toast.LENGTH_SHORT).show();
                        break;
                    case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                        Toast.makeText(getBaseContext(), "Generic failure", 
                                Toast.LENGTH_SHORT).show();
                        break;
                    case SmsManager.RESULT_ERROR_NO_SERVICE:
                        Toast.makeText(getBaseContext(), "No service", 
                                Toast.LENGTH_SHORT).show();
                        break;
                    case SmsManager.RESULT_ERROR_NULL_PDU:
                        Toast.makeText(getBaseContext(), "Null PDU", 
                                Toast.LENGTH_SHORT).show();
                        break;
                    case SmsManager.RESULT_ERROR_RADIO_OFF:
                        Toast.makeText(getBaseContext(), "Radio off", 
                                Toast.LENGTH_SHORT).show();
                        break;
                }
            }
        }, new IntentFilter(SENT));

        //---when the SMS has been delivered---
        registerReceiver(new BroadcastReceiver(){
            @Override
            public void onReceive(Context arg0, Intent arg1) {
                switch (getResultCode())
                {
                    case Activity.RESULT_OK:
                        Toast.makeText(getBaseContext(), "SMS delivered", 
                                Toast.LENGTH_SHORT).show();
                        break;
                    case Activity.RESULT_CANCELED:
                        Toast.makeText(getBaseContext(), "SMS not delivered", 
                                Toast.LENGTH_SHORT).show();
                        break;                      
                }
            }
        }, new IntentFilter(DELIVERED));        

        SmsManager sms = SmsManager.getDefault();
        sms.sendTextMessage(phoneNumber, null, message, sentPI, deliveredPI);               
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T02:21:57.593

那么你应该要么

1）把你的`onReceive`方法放在你的`pol_viewactivity`；或者，

2) 提供一个监听器`SMSReceiverActivity`并由 设置`pol_viewactivity`。

**编辑：**

响应如何创建监听器。

在你的`SMSReceiverActivity`，定义一个接口，

```
public interface ExampleListener {
    onMsgReceive(String msg);
} 
```

声明监听器和公共方法，

```
private ExampleListener listener;

public void setExampleListener(ExampleListener listener) {
    this.listener = listener;
} 
```

在 的`onReceive`方法中`BroadcastReceiver`，

```
if (listener != null) {
    listener.onMsgReceive("Your message to pass");
} 
```

在你的`pol_viewactivity`，想办法设置监听器的方式类似于调用的方式`setOnClickListener()`。如果您无法检索 的实例`SMSReceiverActivity`以设置侦听器，则将侦听器设为静态。我知道这不是一个很好的方式，但在你的情况下，如果你不能改变设计，这种方式应该会有所帮助。（也许您可以将 BroadcastReceiver 隔离到一个类中并在那里进行所有处理。）

# c++ - 如何在一个项目中使用多个 C++ 源代码文件？

> ID：11303656
> 
> 赞同：-5
> 
> 时间：2012-07-03T02:18:15.000
> 
> 标签：c++, visual-c++, c++11

如何将多个 C++ 源代码文件合并到一个项目中？

我正在尝试制作一个 Mad Libs ^(TM)程序。我想将我的代码拆分为多个源文件，并且只在我想播放某个 Mad Lib 时运行一个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T04:03:56.490

我可能会建议对您的模型进行完全重新设计。由于您是编程新手，因此我会尽量保持简单，同时仍然会提出您可以从这样的项目中汲取的重要想法。

## 当前型号：

每个 Mad Lib ^(TM)都是一个单独的 C++ 文件。这些文件链接在一起，一个驱动程序根据一些用户或随机输入决定执行哪一个。

**问题：**

*   大量代码重复。

    例如，每个单独的文件都需要有代码来处理用户输入、Mad Lib 的构建和 Mad Lib 的显示。这可以通过将您的公共代码抽象到另一个库并将其链接到其中来解决，但有更好的方法。此外，如果您需要做一些简单的事情，例如修复 Mad Lib 中的拼写错误，则必须重新编译整个程序！

*   许多分散的依赖项。

    如果你需要改变你处理用户输入的方式，那么你必须改变你*所有*的 Mad Lib 程序。如果你需要添加一个新的 Mad Lib，你必须编写一个全新的程序/函数。而且，如果其他人想贡献一个 MadLib，他们将必须遵循特定的准则（除非您编写它们）。

*   调试是一场噩梦。

    ~~如果~~当您需要调试时，您将不得不筛选许多不同的源文件来解决问题。这也可能发生在您的*所有*文件中。

所以，让我们在一个小规模项目的范围内修复这个模型。

## 建议的修订

有一个非常简单的解决方案可以解决上面列出的所有问题：

*   从程序逻辑中抽象出您的 Mad Lib 数据。

    在此模型中，您有一个用 C++ 编写的驱动程序。这个 MadLibs 驱动程序将从外部源加载一个 MadLib——很可能是一个文本文件。现在，您的所有程序逻辑都集中在一处，并与实际的 MadLib 内容区分开来。

该程序可以简单地实现：只需逐字读取文件（或逐个令牌，请参阅 参考资料`strtok`）将单词写入已完成的输出 Mad Lib。每次遇到空白时，提示用户输入一个符合所要求的语法结构的单词。

您需要为空格指定一种格式——像**#noun#**或**@verb**这样的格式可以正常工作。

* * *

### 包括多个文件

现在，如果您决定将提示用户的逻辑放入单独的 C++ 文件中，您可以简单地将其包含在**预处理器**指令中：

```
#include "path/to/file.h" 
```

如果您的文件在同一目录中，则只需要文件名。如果你这样做，你可能需要先将实际的*file.cpp*文件编译成它的对象形式，这样**链接器**才能找到它。你可以这样做：

```
g++ -c file.cpp 
```

然后，继续正常编译应用程序的其余部分。

* * *

### 总之：

如果您遵循我的建议，您将在理解现代编程方法方面取得长足进步。如果你转向一个更大的项目，你会发现*所有*数据（甚至是“内部”字符串）都被提取到单独的文件中，并且程序逻辑与内容分离。此外，公共代码在共享或应用程序静态库中收集在一起。这为以下情况打开了大门：

*   易于本地化。
*   琐碎的拼写或语法更正或内容的一般更改。
*   更好的可扩展性——想象一个包含 100,000 个 Mad Lib 文件的程序。
*   代码可重用性。
*   快乐的程序员（=

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T02:27:16.760

*   创建源文件
*   在文件中编写代码
*   转到包含 main 的文件
*   使用#include 指令添加其他源文件
*   预处理器将完成剩下的工作

我怀疑这是否完全回答了您的问题，但考虑到您的问题的详细程度较低，我无能为力。

# java - Elasticsearch - EdgeNgram + highlight + term_vector = bad highlight

> ID：11303660
> 
> 赞同：7
> 
> 时间：2012-07-03T02:19:02.917
> 
> 标签：java, search, lucene, elasticsearch, n-gram

当我使用带有 edgengram (min=3, max=7, front) + term_vector=with_positions_offsets 的分析器时

带有文本的文档 = "CouchDB"

当我搜索“couc”时

我的亮点是“cou”而不是“couc”

* * *

看来我的亮点仅在最小匹配令牌“cou”上，而我希望在确切的令牌上（如果可能）或至少在找到的最长令牌上。

无需使用 term_vector=with_positions_offsets 分析文本即可正常工作

删除 term_vector=with_positions_offsets 对性能有什么影响？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-29T14:25:01.857

当您`term_vector=with_positions_offsets`为特定字段设置时，这意味着您正在为该字段存储每个文档的术语向量。

在高亮方面，术语向量允许您使用 lucene 快速向量高亮，它比标准高亮更快。原因是标准荧光笔没有任何快速突出显示的方法，因为索引不包含足够的信息（位置和偏移量）。它只能重新分析字段内容，截取偏移和位置，并根据该信息进行突出显示。这可能需要相当长的时间，尤其是对于长文本字段。

使用术语向量，您确实有足够的信息，并且不需要重新分析文本。不利的一面是指数的规模，这将显着增加。我必须补充一点，因为 Lucene 4.2 术语向量被更好地压缩并以优化的方式存储。还有新的 PostingsHighlighter 基于在发布列表中存储偏移量的能力，这需要更少的空间。

elasticsearch 根据可用信息自动使用最佳方式进行突出显示。如果存储了术语向量，它将使用快速向量荧光笔，否则使用标准荧光笔。在没有术语向量的情况下重新索引后，将使用标准荧光笔进行突出显示。它会更慢，但索引会更小。

关于 ngram 字段，所描述的行为很奇怪，因为快速矢量荧光笔应该对 ngram 字段有更好的支持，因此我希望得到完全相反的结果。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T10:45:28.063

我知道这个问题很老，但还没有**完全**回答：

还有另一种选择可以屈服于这种奇怪的行为：

如果您不希望文档的其他结果影响当前文档突出显示，则必须设置`require_field_match`为，请参阅： [http ://www.elasticsearch.org/guide/reference/api/search/highlighting/](http://www.elasticsearch.org/guide/reference/api/search/highlighting/)`true`

# android - Android findViewById 返回 null

> ID：11303662
> 
> 赞同：0
> 
> 时间：2012-07-03T02:19:13.263
> 
> 标签：android, null, findviewbyid

我正在使用一个按钮来调用一个将输入文本放入文本视图的方法。每当我使用 findViewById 时，它都会返回 null。

```
public void encode(View view){
  TextView out = (TextView) view.findViewById(R.id.encoderout);
  EditText in = (EditText) view.findViewById(R.id.encoderin);
  out.setText(in.getText().toString());
  out.setTypeface(font);
} 
```

我的xml在这里

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:orientation="vertical"
          android:layout_width="fill_parent"
          android:layout_height="fill_parent"
    >
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/input"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    >
    <EditText android:id="@+id/encoderin"
        android:layout_width="0dp"
        android:layout_weight="2"
        android:layout_height="wrap_content"
        android:hint="Text to encode"/>
    <Button android:id="@+id/encoderbutton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:onClick="encode"
        android:text="Encode!"/>
</LinearLayout>
<TextView android:id="@+id/encoderout"
    android:text="test"
    android:layout_width="fill_parent"
    android:layout_weight="1"
    android:gravity="center"
    android:layout_height="wrap_content"/>
</LinearLayout> 
```

我能找到的几乎所有帖子都说清理项目有助于解决问题，但在这种情况下不是。

**编辑**：附加信息

我正在使用片段，这是我的片段代码

```
public static class Encoder extends Fragment{
  public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.encoder, container, false);       
    return view;
  }
} 
```

由于按钮的工作方式，它正在调用 Activity。我可以在片段中很好地调用 find 方法，但当我必须返回活动时则不行。

我可以验证视图不为空，当在方法中调用 toString 时它打印出来很好。

**解决方案**：从来没有意识到我必须使用主视图，以为我应该使用按钮视图。我对此很陌生（从今天开始）谢谢大家的投入！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T02:27:25.983

```
<Button android:id="@+id/encoderbutton"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:onClick="encode"
    android:text="Encode!"/> 
```

Java 代码中的`view`回调方法中的参数是由视图本身提供的，而不是由.`encode(View view)``Button``Activity`

请参阅下面的参考：

> [http://developer.android.com/reference/android/widget/Button.html](http://developer.android.com/reference/android/widget/Button.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T02:29:05.303

`Fragment`s 不接收`onClick`在 XML 中声明的 s 方法。您需要`encode`在您的`Activity`代替，然后将所需的行为定向到适当的`Fragment`. 烦人，但它就是这样做的。我建议您只`OnClickListener`在代码中以编程方式实现，`Fragment`以避免将片段和活动的行为交织在一起。

# php - PHP中的矩阵加法

> ID：11303668
> 
> 赞同：0
> 
> 时间：2012-07-03T02:20:29.697
> 
> 标签：php, matrix, addition

我正在尝试在 PHP 中实现矩阵加法。我查看了 C++ 中类似实现的示例，但在 PHP 中没有找到明确的示例。我得到的错误是生成的矩阵显示为“0”，因为它是单元格值。有人可以指导我正确的方向。

```
 $btn = $_POST['go'];
    $txt1 = $_POST['first'];
    $txt2 = $_POST['second'];

    for ($i = 0; $i <= 2; $i++)
    {
       for ($j = 0; $j <= 2; $j++)
       {
          echo "<input type=\"text\" name=\"first\" size=\"4\" />";
       }
       echo "<br>";
    }
    echo "<br><br>";

    for ($i = 0; $i <= 2; $i++)
    {
       for ($j = 0; $j <= 2; $j++)
       {
          echo "<input type=\"text\" name=\"second\" size=\"4\" />";
       }
       echo "<br>";
     }

    echo "<br><br>";

   $sum = 0;
   if(isset($btn))
    for ($i = 0; $i <= 2; $i++)
    {
       for ($j = 0; $j <= 2; $j++)
       {
         $sum = $txt1 + $txt2;
         echo "<input type=\"text\" name=\"third\" value=$sum size=\"4\" />";
       }
       echo "<br>";
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T02:38:53.587

试试这个[矩阵运算](http://pastebin.com/RTdQSJzL)。例如，请查看：

```
<?php 
include_once("Matrix.class.php"); 

// Data Array 
$ArrayDataMatriz1=array(4.021,3.831,4.021,2.560,2.716,2.612,2.638,3.869,2.664,3.945); 
$ArrayDataMatriz2=array(4.125,3.905,3.740,2.475,2.737,2.325,2.475,3.575,2.513,3.575); 
$ArrayData_MATRIZ_NxN=array(array(8,5,3,0), array(1,2,3,8),array(4,3,4,8),array(2,0,3,4)); 

$Matriz1 = new matrix($ArrayDataMatriz1); 
$Matriz2 = new matrix($ArrayDataMatriz2); 
$Matriz3_NxN= new matrix($ArrayData_MATRIZ_NxN); 

echo "<br>MATRIZ 1<br>"; 
print_r($Matriz1); 
echo "<br>"; 

echo "<br>MATRIZ 2<br>"; 
print_r($Matriz2); 
echo "<br>"; 

echo "<br>ARREGLO DE DATOS de NxN<br>"; 
print_r($ArrayData_MATRIZ_NxN); 
echo "<br>"; 

// sum of two matrices 
$suma= $Matriz1->SumaMatrices($ArrayDataMatriz1,$ArrayDataMatriz2); 
echo "<BR>SUMA DE MATRIZ<BR>"; 
print_r($suma); 
echo "<br>"; 

// sum of two matrices
$suma= $Matriz1->SumaMatrices($Matriz1->ArrayData,$Matriz2->ArrayData); 
echo "<BR>SUMA DE MATRIZ<BR>"; 
print_r($suma); 
echo "<br>"; 

//matriz de media 
$Matriz1->MediasMatriz(); 
echo "<BR>MATRIZ MEDIA<BR>"; 
print_r($Matriz1->ArrayMedia); 
echo "<br>"; 

//matriz de media 
$Matriz3_NxN->MediasMatriz(); 
echo "<BR>MATRIZ MEDIA<BR>"; 
print_r($Matriz3_NxN->ArrayMedia); 
echo "<br>"; 

//covarianza 
$cov = $Matriz1->CovarianzaMatriz($ArrayData_MATRIZ_NxN); 
echo "<BR>MATRIZ DE COVARIANZAS<BR>"; 
print_r($cov); 
echo "<br>"; 

?> 
```

# windows - GAE Go Windows - “无法运行程序”、“不是有效的 Win32 应用程序”

> ID：11303670
> 
> 赞同：1
> 
> 时间：2012-07-03T02:20:43.887
> 
> 标签：windows, google-app-engine, compiler-errors, go, executable

在安装和配置适当的 SDK 等之后，我一直在尝试使用 GoClipse 在我的 Mac 上运行我在我的 Mac 上开发的 GAE Go 项目。尝试运行项目时，出现此错误：

> 执行命令行时发生异常。无法运行程序“C:\GoogleAppEngine\dev_appserver.py”（在目录“D:\Golang\workspace\Project\src\pkg”中）：CreateProcess 错误=193，%1 不是有效的 Win32 应用程序

如何修复该错误以运行我的项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T22:28:58.663

虽然以下配置适用于 Mac，因为它默认安装了 Python，但 Windows 需要不同的配置。

在 Mac 上，GoClipse 外部工具配置为：

```
Location: /GoogleAppEngine/dev_appserver.py
Working Directory: ${workspace_loc:/Project/src/pkg}
Arguments: . 
```

Windows 配置应如下所示：

```
Location: C:\Python27\Python.exe
Working Directory:
Arguments: C:\GoogleAppEngine\dev_appserver.py "${workspace_loc:/Project/src/pkg}" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T16:46:30.573

尝试运行 .py（哪个 IMO 是 Python 文件？）不会直接在 Windows 上运行。您将需要安装 Python，然后将上述文件名传递给 Python，例如（我不知道 Python，所以不要使用确切的语法，您可能需要环顾四周）

```
python "C:\GoogleAppEngine\dev_appserver.py 
```

它在 Mac 上运行的原因是因为 Python 预装在 mac 上，如此[处](http://www.python.org/getit/mac/)引用但在 Windows 上却没有。所以你可以安装 Python 并将 Python 的 bin 文件夹添加到路径中，然后运行上面的脚本，它应该可以正常运行！

# javascript - #Meteor 模板中的每个块在元素移动后重复元素

> ID：11303672
> 
> 赞同：2
> 
> 时间：2012-07-03T02:20:53.797
> 
> 标签：javascript, meteor

我有一个模板可以遍历一个集合：

```
<template name="task_list">
    <form id="tasks">
        {{#each tasks}}     
            {{> task}}
        {{/each}}
    </form>
</template>

<template name="task">
    <label class="checkbox" id="label-{{_id}}">
        <input type="checkbox" id="{{_id}}" {{{completed}}} /> {{text}}
    </label>
</template> 
```

我把它做成了一个 jQuery 可排序的，它允许用户在这个列表中拖放。当用户完成移动项目并且 DOM 完成渲染时，我会更新此模板使用的集合。

当用户向下拖动一个项目时，这可以正常工作，但是当一个项目被向上拖动时，Meteor 会复制刚刚拖动的项目。

![在此处输入图像描述](../Images/c56b594ad35f16fbc144d4907ee00d9d.png)

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T02:41:43.790

这里的问题是您已经告诉 Meteor 和 jQuery 管理相同的 DOM 元素。他们都试图更新元素，但他们最终打架了:)这就像开车一样..一次只能一个人开车。

你有两个选择：

*   让 Meteor 管理元素。在这种情况下，您需要找到一种方法来告诉其他库（在这种情况下为 jQuery）实际上不要实际移动 DOM 中的元素。只需让它给您一个回调并让您知道用户想要做什么. 然后更新集合，Meteor 更新屏幕。

*   让 jQuery 管理元素。将页面的整个部分放入`{{#constant}}..{{/constant}}`其中，Meteor 将不理会它。您可以调用`<collectionname>.find(<query>).observe({...})`和使用 jQuery 来创建/移动/删除列表项，以响应`observe`为您提供的回调。（您仍然可以使用 使每个单独的项目具有反应性，`Meteor.render`如果需要，您甚至可以使用类似的东西从模板中生成项目`Meteor.render(Template.<mytemplate>)`）。

希望有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T02:04:58.800

这是一个疯狂的猜测，没有看到 JS：

Meteor 发现元素列表与其用于语句的对象列表不匹配`each`，因此它添加了它认为缺失的对象列表。

我会在拖动结束时尝试获取回调，然后在该回调中确保 Meteor 知道元素应该以哪个顺序显示，这样当它重新渲染`each`块时，它不会对正确的元素顺序并覆盖它。

希望这是在正确的轨道上！让面向回调的代码与 Meteor 的反应性结合使用可能会很棘手。

# jquery - jQuery阻止IE8中的默认链接点击

> ID：11303679
> 
> 赞同：0
> 
> 时间：2012-07-03T02:22:20.333
> 
> 标签：jquery

所有，我有以下 jQuery 代码：

```
jQuery(".select_it").click(function(e){
    e.preventDefault();
    song_id = jQuery(this).attr('href');
    music_choice = jQuery("#song_type").val();
    jQuery.post(site_url + "save_song_choice.php", { song_id: song_id, music_choice: music_choice },
        function(response) {
            alert(response);
            var url = site_url + "okyne-form";
            window.location.replace(url);
        });
        return false;
    }
); 
```

当我单击链接时，它不执行 jQuery，而是采取链接被单击的行为。我怎样才能防止这种情况发生？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T03:49:07.590

尝试`return false;`摆脱`jQuery.post`这样的：

```
jQuery(".select_it").click(function(e){
    jQuery.post(url, function(){
        //code here   
    });
    return false;
}); 
```

# java - 跨模型更新在已排序的 JTable 中保留选定的模型行

> ID：11303680
> 
> 赞同：1
> 
> 时间：2012-07-03T02:22:49.010
> 
> 标签：java, swing, jtable, tablerowsorter

如果 JTable 已排序，我很难获得以下代码来保留模型中逻辑选择的行。

当未应用排序时，它按预期工作。

```
private void updateAccountTable() {
    accountsTable = guiFrame.getAccountsTable();

    // Preserve selected model row
    String accountNumber = "";
    int selectedRow = accountsTable.getSelectedRow();
    if(selectedRow >= 0){
        accountNumber = (String)accountsTable.getValueAt(selectedRow, 0);
    }

    // Preserve sort order
          // Keep eclipse happy.  better way??
    List <? extends SortKey> keys = accountsTable.getRowSorter().getSortKeys();

    // Update displayed accounts
    DefaultTableModel model = (DefaultTableModel) accountsTable.getModel();
    model.getDataVector().clear();

    Object[][] tableContents = accountList.getAccountsAsArray(true);
    model.setDataVector(tableContents, tableHeaders);
    model.fireTableDataChanged();

    // reset sort order
    accountsTable.getRowSorter().setSortKeys(keys);

    // If updated model contains previously selected account, reselect
    if (!accountNumber.equals("") && null != accountList.getAccount(accountNumber)){
        for (int row=0; row<accountsTable.getRowCount(); row++){
            String an = (String)accountsTable.getValueAt(row, 0);
            if (an.equalsIgnoreCase(accountNumber)){
                accountsTable.setRowSelectionInterval(row, row);
                break;
            }
        }
    }
    else {
        accountsTable.clearSelection();
    }
} 
```

不幸的是 setRowSelectionInterval() 没有按预期更新选定的行，尽管使用正确的视图行号调用。它似乎什么都不做。

.....所以，

为什么 setRowSelectionInterval() 无法更新选择，或者我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T03:41:48.283

`row`从中获得的是`getSelectedRow()`视图*坐标*，而*模型*坐标已被干预更新更改。引用相关[教程部分](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#selection)：

> 这种区别并不重要，除非您查看的数据已通过排序、过滤或用户对列的操作进行了重新排列。

您将需要使用[*排序和过滤*](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#sorting)末尾附近描述的转换方法，这表明：

> 使用分拣机时，请始终记住转换单元格坐标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-09T08:47:47.833

当您点击 Jtable 标题对其进行排序时，然后点击一行（例如第 3 行），您将获得未排序的 JTable 行的值。为避免这种情况，请使用此 LOC。（这与您尝试做的事情无关，但对于其他有类似问题的人）

```
int row = tblUser.getSelectedRow();
//Without below line, the value you get would be the row before sorting
int correctModel = tblUser.convertRowIndexToModel(row);
//Get username and use it to find its corresponding tuple
String username = (tblUser.getModel().getValueAt(correctModel, 1)).toString(); 
```

我的表看起来像这样，我试图获取所选行的用户名并且没有第二个 LOC，即使在对它进行排序之后，我也会得到未排序的 JTable 行值：

```
---------------------
|  id    |   username |
---------------------
|        |            | 
```

# java - 什么是静态 列表 方法名（列表输入）

> ID：11303694
> 
> 赞同：15
> 
> 时间：2012-07-03T02:26:24.653
> 
> 标签：java, generics

我有以下代码，但我对所有泛型感到困惑。

```
public static <T> List<T> backwards (List<? super T> input) {  
       List<T> output = new ArrayList<T>();  
       return output;  
} 
```

我的理解是我有一个名为的公共方法`backwards`，它创建一个实现 List 接口的数组列表并返回数组列表。我的问题是我实际上对编译器说的是以下部分......

```
static <T> List<T> backwards (List<? super T> input) 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-07-03T03:48:22.650

你对编译器说：

```
<T> 
```

“我`T`为这个方法声明了一个任意类型，它可以是每次调用该方法的任何类型（非原始）。”

```
List<T> 
```

“此方法将返回`List`包含该类型的元素`T`。”

```
List<? super T> input 
```

“这个方法将接受一个名为 的参数`input`，它是一个`List`包含类型的元素`T`，或者是 的任何超类型`T`。例如，如果`T`是`Integer`，则`input`可能是`List<Integer>`、`List<Number>`或`List<Object>`。”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-14T17:05:22.773

这就是您声明通用方法的方式。请阅读以下部分，它将为您提供所需的一切。

[http://docs.oracle.com/javase/tutorial/extra/generics/methods.html](http://docs.oracle.com/javase/tutorial/extra/generics/methods.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-07-03T13:57:22.157

除了[保罗的回答](https://stackoverflow.com/a/11304192/967873)，这可能更清楚，如果你有一些在其定义中声明了通用参数的类，你可以编写通用方法，如

```
public class SampleClass<T>{
  public static List<T> backwards (List<? super T> input)
} 
```

否则，如果你的类没有声明泛型参数（或者你想定义额外的参数），你应该这样定义你的方法：

```
public class SampleClass{
    public static <T> List<T> backwards (List<? super T> input){...}
} 
```

# iphone - NSFetchRequest 获取属性的最大值。每次结果都不一样

> ID：11303695
> 
> 赞同：1
> 
> 时间：2012-07-03T02:26:42.193
> 
> 标签：iphone, objective-c, nsfetchrequest

NSFetchRequest 获取属性的最大值。

但结果每次都变成不同的。

这是我的代码。

```
- (NSInteger)getMaxTimeStamp
{
    NSManagedObjectContext *context = [委托 managedObjectContext];

`NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
[fetchRequest setEntity:[NSEntityDescription entityForName:@"Relation" inManagedObjectContext:context]];
[fetchRequest setIncludesPropertyValues:NO]; //only fetch the managedObjectID

NSSortDescriptor *sort = [[NSSortDescriptor alloc]
                          initWithKey:@"ts" ascending:NO];
[fetchRequest setFetchLimit:1];
[fetchRequest setSortDescriptors:[NSArray arrayWithObject:sort]];

NSError * error = nil;
Relation *relation = [context executeFetchRequest:fetchRequest error:&error].lastObject;

//error handling goes here
if (error) {
    NSLog(@"ERROR: %@",[error localizedDescription]);
}

if (relation.ts) {
    return (NSInteger)relation.ts;
}else {
    return 0;
}` 

}

我为结果日志循环了 10 次

*   2012-07-03 11:05:55.831 Edusorf [1956:15803] 最大时间戳：136934464
*   2012-07-03 11:05:55.831 Edusorf [1956:15803] 最大时间戳：137170400
*   2012-07-03 11:05:55.832 Edusorf [1956:15803] 最大时间戳：137106624
*   2012-07-03 11:05:55.832 Edusorf [1956:15803] 最大时间戳：137154096
*   2012-07-03 11:05:55.833 Edusorf [1956:15803] 最大时间戳：137107392
*   2012-07-03 11:05:55.833 Edusorf [1956:15803] 最大时间戳：137115728
*   2012-07-03 11:05:55.833 Edusorf [1956:15803] 最大时间戳：137110608
*   2012-07-03 11:05:55.834 Edusorf [1956:15803] 最大时间戳：136828592
*   2012-07-03 11:05:55.834 Edusorf [1956:15803] 最大时间戳：136995824
*   2012-07-03 11:05:55.835 Edusorf [1956:15803] 最大时间戳：136925072

有人可以帮我吗？谢谢~~

            回答 #1

赞同：0

时间：2012-07-03T04:10:57.547

`ts`在数据模型中将类型更改为日期。

```

# ruby-on-rails - Rails 路由错误？'没有路线匹配'

> ID：11303698
> 
> 赞同：11
> 
> 时间：2012-07-03T02:27:24.940
> 
> 标签：ruby-on-rails, rails-routing

所以我一直遇到以下错误：

> `No route matches {:action=>"show", :controller=>"users"}`

我尝试运行 rake 路线，我可以看到该路线存在：

```
 user         GET          /users/:id(.:format)       users#show
              PUT          /users/:id(.:format)       users#update
              DELETE       /users/:id(.:format)       users#destroy 
```

但是每次我尝试访问该页面`"/users/1"`（1 是用户 ID）时，都会出现上述错误。有任何想法吗？谢谢！

这是我的`routes.rb`：

```
SampleApp::Application.routes.draw do
  root to: 'static_pages#home'

  resources :users
  resource :sessions, only: [:new, :create, :destroy]

  match '/signup',  to: 'users#new'
  match '/signin',  to: 'sessions#new'
  match '/signout', to: 'sessions#destroy', via: :delete

  match '/help',    to: 'static_pages#help'
  match '/about',   to: 'static_pages#about'
  match '/contact', to: 'static_pages#contact' 
```

这是我的`users_controller.rb`：

```
class UsersController < ApplicationController

  before_filter :signed_in_user, only: [:index, :edit, :update]
  before_filter :correct_user,   only: [:edit, :update]

  def show
    @user = User.find(params[:id])
  end

  def new
    @user = User.new
  end

  def create
    @user = User.new(params[:user])
    if @user.save
      sign_in @user
      flash[:success] = "Welcome to the Paper Piazza!"
      redirect_to @user
    else
      render 'new'
    end
  end

  def edit
    @user = User.find(params[:id])
  end

  def update
    if @user.update_attributes(params[:user])
      flash[:success] = "Profile updated"
      sign_in @user
      redirect_to @user
    else
      render 'edit'
    end
  end

  def index
    @users = User.paginate(page: params[:page])
  end

  private

    def signed_in_user
      unless signed_in?
        store_location
        redirect_to signin_path, notice: "Please sign in."
      end
    end

    def correct_user
      @user = User.find(params[:id])
      redirect_to(root_path) unless current_user?(@user)
    end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T21:35:25.903

尝试修正错字：

```
root :to 'static_pages#home' 
```

（而不是`root to:`），并将其移动到块的最后一行。让我知道这是否有所作为！

奇怪的是，我用一个简单的路由文件构建了一个新项目：

```
RoutingTest::Application.routes.draw do
  resources :users
  root :to => "static_pages#home"
end 
```

当我在控制台中运行它时，我遇到了与您看到的相同的错误：

```
>> r = Rails.application.routes ; true
=> true
>> r.recognize_path("/users/1")
=> ActionController::RoutingError: No route matches "/users" 
```

...但是当我在一个稍旧的项目中运行相同的东西时，我得到：

```
>> r = Rails.application.routes ; true
=> true
>> r.recognize_path("/users/1")
=> {:action=>"show", :controller=>"users", :id=>"1"} 
```

所以我不太相信我所说的会有所作为。（除此之外，Rails.application.routes 技巧对于验证控制台中的路径很有用！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-07T13:54:54.747

我有一个类似的问题，我的路由只会返回根页面，但会显示在`rake routes`. 根据特定命名空间和所有路由的其他开发人员的说法，`root to: (routing)`必须始终位于最后。这与 Rails 路由指南（参见[http://guides.rubyonrails.org/routing.html#using-root](http://guides.rubyonrails.org/routing.html#using-root)）相矛盾，该指南说对 root 的任何调用都应该在文件的顶部。那绝对不适合我。有趣的...

# mysql - 为特定帐户选择用户和组

> ID：11303701
> 
> 赞同：0
> 
> 时间：2012-07-03T02:27:33.350
> 
> 标签：mysql, sql

对于下表，我想为特定帐户选择所有用户及其组。

```
USERS 
-id
-name
-groupid
-accountid

GROUPS 
-id
-name
-accountid 
```

我正在执行以下操作：

```
SELECT 
USERS.ID,
USERS.NAME,
GROUPS.ID,
GROUPS.NAME,    
FROM GROUPS JOIN USERS ON USERS.ACCOUNTID= GROUPS.ACCOUNTID
WHERE GROUPS.ACCOUNTID=1 
```

由于某种原因，结果重复了 3 次（这是组数）。每个用户使用不同的 GROUPID 显示 3 次。

**更新**如果我改为加入 GROUPID，就像建议的那样。我得到以下。如您所见，即使一个组中有多个用户，每个组也只显示一个用户。

```
USER_ID  GROUP_ID     GROUP_NAME        NAME
42            6        Teacher      John E. 
59            8        Student      Bill W. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T02:30:17.890

由于您加入的是 ACCOUNTID 而不是 GROUPID，因此每个用户会显示 3 次不同的 GROUPID。

您可以尝试以下方法，即加入 GROUPID。

```
SELECT 
USERS.ID,
USERS.NAME,
GROUPS.ID,
GROUPS.NAME    
FROM USERS JOIN GROUPS ON USERS.GROUPID= GROUPS.ID
WHERE GROUPS.ACCOUNTID=1 
```

[更新： http](http://sqlfiddle.com/#!2/3afee/1) ://sqlfiddle.com/#!2/3afee/ 1

# c++ - 从 std::vector<> 转换为双指针？

> ID：11303702
> 
> 赞同：4
> 
> 时间：2012-07-03T02:27:47.007
> 
> 标签：c++, pointers, casting, stdvector

出于好奇，我想知道是否可以将 std::vector<> 转换为双指针。

我从来没有遇到过以这种方式将 std::vector 作为指针传递的问题：

```
std::vector<char> myCharVector;
myCharVector.push_back('a');
myCharVector.push_back('b');
myCharVector.push_back('c');
char *myCharPointer = &myCharVector[0]; 
```

所以我很好奇是否可以以类似的方式分配指针的地址：

```
char *myPointer = "abc";
char **myDoublePointer = &myPointer; 
```

我试过了：

```
char **myDoublePointer = (char**)&myCharVector; 
```

但它不起作用。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T02:33:56.230

您已经知道这`&myCharVector[0]`是一个指向`char`. 因此，如果将其存储在变量中：

```
char *cstr = &myCharVector[0]; 
```

然后您可以获取该变量的地址：

```
char **ptrToCstr = &cstr; 
```

但是像这样简单地取消引用两次：

```
char **ptrToCstr = &(&myCharVector[0]) 
```

无效，因为该值`(&myCharVector[0])`尚未存储在任何地方的内存中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T02:47:42.393

在 C++11 中，您可以执行以下操作：

```
char *myCharPointer = myCharVector.data(); 
```

但是您不能获取返回值的地址，`data()`因为它不返回对底层存储的引用，而只是返回指针值。

如果目的是能够更改指针所指向的内容，那么您可能真的想要一个指向向量的指针，而不是指向指向 char 的指针的指针。但是，`STL`不允许您在不通过常规矢量 API（如`resize`or `swap`）的情况下更改矢量本身内的基础指针。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-03T02:30:48.210

你绝对**不能**这样做。`std::vector`和 a`char **`是完全不同类型的对象，您不能只是将一个对象“投射”到另一个对象。

你能够这样做的原因`char *myCharPointer = &myCharVector[0]`是它`myCharVector[0]`给了你 a `char`，从而`&myCharVector[0]`给了你那个地址，`char`你可以将它分配给 a `char *`。

您可以将 full`std::vector`转换为`char *`(not `char **`) 的唯一方法是循环您并手动从数据`std::vector`构造 a 。`char *`

例如：

```
char *ptr = malloc(myCharVector.size()+1);
for (unsigned int i=0; i < myCharVector.size(); i++) {
  ptr[i] = myCharVector[i];
}
ptr[myCharVector.size()] = 0; 
```

然后`ptr`将是`char`s 的 C 字符串。

# django - python的这个元素是什么？

> ID：11303704
> 
> 赞同：-1
> 
> 时间：2012-07-03T02:28:08.303
> 
> 标签：django, python-2.7

我正在阅读 django 教程中的一些代码，我发现了这个

```
<ul>
{% for athlete in athlete_list %}
   <li>{{ athlete.name }}</li>
{% endfor %}
</ul> 
```

什么是运动员？，我在哪里可以找到有关如何使用它的更多信息？

我搜索了列表，但它们似乎具有限制功能，例如附加和索引。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T02:37:53.120

`athlete_list`是已传递给模板的上下文变量。

`athlete`是 的一个元素`athlete_list`。在这种情况下，它看起来像是`athlete`一个具有`name`属性的模型对象。在这种情况下，`athlete_list`可能是一个`athlete`查询集或对象列表。

查看[Django 模板标签参考](https://docs.djangoproject.com/en/dev/ref/templates/builtins/)以获取更多信息。

# javascript - 在数字索引处删除行 - SQL

> ID：11303710
> 
> 赞同：0
> 
> 时间：2012-07-03T02:28:54.207
> 
> 标签：javascript, sql, uitableview, titanium

我正在使用 Titanium IDE 在 JavaScript 语言中尝试此操作。

我正在做的是从 SQL 数据库中填充一个表，然后允许您删除该表中的行。因此，当用户选择删除表中的一行时，我将获取它在表中的索引（例如第 5 行），然后将其传递给 SQL 并删除索引处的行（因此，第 5 行）。

做了一些研究，但找不到任何合适的来源，所以我基本上需要一种基于用户选择的行的数字索引删除 SQL 表行的方法。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T02:32:14.887

您的 SQL 表的每一行都应该有一个唯一的 ID。因此，当用户在您的表上选择行时，您必须将其与该唯一 ID 匹配，然后从数据库中删除该唯一 ID。

# c# - 寻找 C++ 到 WPF/Cocoa 互操作性的跨平台、端到端示例

> ID：11303712
> 
> 赞同：5
> 
> 时间：2012-07-03T02:29:11.983
> 
> 标签：c#, c++, wpf, cross-platform, pinvoke

首先，一些背景：

我决定开始一个从头开始设计的新项目，可以在多个平台（Windows、iOS、OSX、Linux、Android）上运行。由于我的背景主要是 C++，因此我打算使用 C++11 编写核心功能。话虽如此，在每个平台上，我都需要编写一个特定于平台的 UI，它可以与 C++ 核心进行互操作。

我瞄准的第一个平台是 Windows（第二个是 iOS）。我将存储在 SQLite 数据库中的数据以及将使用 WPF DataGrid 输入的用户提供的数据（插入行、操作现有数据等）。这是我第一次使用 WPF（尽管我使用过 Windows 窗体），也是我第一次在托管环境中使用 C++。我计划把它做成一个 MVC 风格的架构，所以在我看来 SQLite 是模型，WPF 是视图，C++ 代码是控制器。

我的问题是这样的：

是否有任何示例说明如何从 C++ 接口获取数据并使用 C# 和 WPF 显示它而不破坏/修改 C++ 代码本身（因为它必须在多个平台上工作）？我已经阅读了一些关于 P/Invoke（乏味，但有效）和混合程序集（有效，但会破坏我的 C++？）的内容，但在具体示例（尤其是那些涉及填充 WPF 控件的示例）方面，Google 并没有提供帮助通过 C++ DLL 获得的数据）。

谢谢！

编辑：在寻找解决这个问题的方法时，我遇到了 CXXI。我对它不是很熟悉，但似乎它可能是解决我问题的简单方法。有什么想法吗？我对所有这些概念的掌握是有限的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T04:45:39.700

在使用过 XAML 和 WinForms 之后，我认为您不会发现 WPF 比您的 WinForms 体验更“原生”。在这两种情况下，一切都由 .Net 抽象。但是，如果您想学习 WPF，那就去吧。

P\invoke 和 COM 一样工作得很好。至于将数据从 C++ 获取到其他语言的其他方法，请考虑将其视为 IPC 问题而不是语言问题。将一个进程作为另一个进程的子进程运行，并查看[套接字](https://stackoverflow.com/questions/678367/c-sockets-library-for-cross-platform)和库，例如[0mq](http://www.zeromq.org/) / [clrzmq](http://www.zeromq.org/bindings:clr)（[请参阅 iPhone 上的 0mq](https://stackoverflow.com/questions/8318928/cross-compiling-zeromq-to-arm-for-use-in-a-monotouch-iphone-app-configure-settin) —— [Android 上的这个](http://www.zeromq.org/build:android)）和[Thrift](http://thrift.apache.org/)以使 C++ 与另一个进程对话。

使用 sockets/0mq，您可以使用 xml/json/ [Protobuf](http://code.google.com/p/protobuf/) / [Protobuf-net](http://code.google.com/p/protobuf-net/)将对象从一种语言序列化和反序列化到另一种语言。使用 Protobuf，您只需要创建一组 json-esque 数据对象并使用特定于语言的工具来生成代码。这将跨平台和语言处理您的数据对象，让您专注于有趣的事情。序列化也可以很好地与 sql 一起使用。所有这些技术都易于实现，并且每种技术都有一定的语言实现，从而可以轻松地将事物连接到您的下一个 GUI。

关于示例，这完全取决于您希望如何在运行时之间移动数据。

# google-chrome - 如何不优雅地杀死 Windows 中的程序？

> ID：11303718
> 
> 赞同：1
> 
> 时间：2012-07-03T02:30:42.363
> 
> 标签：google-chrome, copy, delete-file

我希望在 Windows 7 中不优雅地杀死一个程序 (Chrome)。Chrome 对`.tmp`我想要复制的文件有一个读锁。如果我优雅地退出 Chrome，Chrome 会在`.tmp`文件退出时删除它。

如何在不让 chrome 删除我的文件的情况下立即终止程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T02:37:16.957

它可能使用 WinAPI 临时文件，因此您不能：检查[http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858%28v=vs.85%29.aspx)

如果有足够的高速缓存可用，指定 FILE_ATTRIBUTE_TEMPORARY 属性会导致文件系统避免将数据写回大容量存储，因为应用程序会在句柄关闭后删除临时文件。在这种情况下，系统可以完全避免写入数据。尽管它不像前面提到的标志那样直接控制数据缓存，但 FILE_ATTRIBUTE_TEMPORARY 属性确实告诉系统在不写入的情况下尽可能多地保存在系统缓存中，因此可能会引起某些应用程序的关注。

最好的办法是在 chrome 仍在运行时尝试复制文件......或者在 chrome 和 WinAPI 之间放置一个包装器以覆盖 CreateFile 调用，这样它就不会将其创建为临时文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T02:58:07.043

首先，在 Chrome 中，使用快捷键“Shift+Esc”弹出 Chrome 的任务管理器并杀死除“浏览器”之外的任何其他进程（唯一不能使用它杀死的进程）。
然后，打开 Windows 任务管理器并杀死唯一留下的“chrome.exe”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-12T16:07:39.623

从google下载一个叫unlocker的软件。 [http://www.filehippo.com/download_unlocker/](http://www.filehippo.com/download_unlocker/)

转到开始-> 从“chrome”搜索并转到文件位置。一般这个

C:\Users\\AppData\Local\Google

右键单击 google 文件夹，然后单击解锁器。单击所有打开的句柄，然后启动 chrome。有用！！

# asp.net-mvc - 如何在 Asp.Net MVC 中将 ServiceStack.HttpResult 转换为 Response

> ID：11303726
> 
> 赞同：1
> 
> 时间：2012-07-03T02:31:07.210
> 
> 标签：asp.net-mvc, authentication, servicestack

Servicestack`AuthService`专为 REST 风格的 http 响应而设计。因为 `AuthService.Post(auth)`返回`HttpResult`。所以你可以很容易地通过 JQuery + Ajax 使用它。

但是如果你想将它与经典的 Asp.Net MVC 一起使用：

```
public ActionResult Login(Auth auth)
{
    HttpResult result = (HttpResult)AuthService.Post(auth);
    // YOU HAVE TO CHECK IF LOGIN SUCCESSFUL THAN 
    // IF SUCCESSFUL YOU HAVE TO REDIRECT IF IT HAS REDIRECTURL PARAMETER

    //if (result.StatusCode == System.Net.HttpStatusCode.Found)
    return View();
} 
```

又怎样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T08:07:07.053

我刚刚重新构造了 AuthService 并添加了[Authenticate()](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.ServiceInterface/Auth/AuthService.cs#L185)方法以使其更容易从 C# 调用。

返回 null 表示用户已经通过身份验证（并且没有进行任何尝试）。返回非 null 表示用户认证成功。任何身份验证失败都会引发异常。

通过此更改，您现在可以执行以下操作：

```
public ActionResult Login(Auth auth)
{
    try {
        AuthResponse result = AuthService.Authenticate(auth);
        var alreadyAuthenticated = result == null;
        return alreadyAuthenticated
          ? View("success")
          : View("alreadyAuthenticated");                 

    } catch(Exception ex) {
       return View("authError");
    }
} 
```

这些更改将在 NuGet 上的下一个版本的 ServiceStack (v3.84) 中。在它发布之前，您必须从[主 repo](https://github.com/ServiceStack/ServiceStack)构建。

# asp.net-mvc-3 - 表单标签不会在带有 jquery 对话框的部分视图中呈现。mvc3 asp.net

> ID：11303727
> 
> 赞同：0
> 
> 时间：2012-07-03T02:31:42.910
> 
> 标签：asp.net-mvc-3

我有一个包含表单的部分视图“CreateJobLine.cshtml”。此表单在使用 @Html.Action 方法呈现时创建没有表单标记的表单字段。我使用了 Html.BeginForm 并对表单进行了硬编码（如下），但在这两种情况下它都不会生成标签。我还使用 jqueryui 的对话框小部件来显示表单。

---局部视图---

```
//filename: CreateJobLine.cshtml
@model Recruitment.Models.JobLine
@if(false){
<script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
}
<div id="addnewjoblinediv">
<form id="createjoblineform" action="@Url.Action("CreateJobLine")" method="post">
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>JobLine</legend>
        @Html.Hidden("job_id", Model.JobId)
        <div class="editor-label">
            @Html.LabelFor(model => model.Description)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Description)
            @Html.ValidationMessageFor(model => model.Description)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.TimeSpent)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.TimeSpent)
            @Html.ValidationMessageFor(model => model.TimeSpent)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.JobId)
        </div>
        <div class="editor-field">
            @Html.DisplayFor(model => model.JobId)
            @Html.ValidationMessageFor(model => model.JobId)
        </div>

        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
</form>   
</div> 
```

在编辑视图中，我调用了 Html.Action 来加载部分视图。

- -编辑视图 - -

```
//filename Edit.cshtml
... 
@Html.Action("CreateJobLine", "Job", new { job_id = Model.Job.JobId})

    <a id="addnewjoblinelink" href="#">Add New JobLine</a>

</fieldset>
}

<script type="text/javascript">
    $(document).ready(function () {
        $("div#addnewjoblinediv").dialog({ autoOpen: false, modal:true, width:550, title:"Add New JobLine"});

        $("a#addnewjoblinelink").click(function () {
            $("div#addnewjoblinediv").dialog("open");
        }
        );
    }
    );

</script> 
```

这是控制器---作业控制器---

```
//JobController.cs
...
[HttpGet]
    public PartialViewResult CreateJobLine(int job_id)
    {
        var jobline = new JobLine();
        jobline.JobId = job_id;
        jobline.TimeSpent = 0;
        return PartialView(jobline);
    }

    [HttpPost]
    public ActionResult CreateJobLine(JobLine jobline)
    {

        if (ModelState.IsValid)
        {
            db.JobLines.Add(jobline);
            db.SaveChanges();
            return RedirectToAction("Index");
        }
        return RedirectToAction("Edit", new { id = jobline.JobId });
    }
  ... 
```

调用 /Job/CreateJobLine/5 获取包含所有表单元素的表单内容，但缺少表单标签本身。我想将该表单操作设置为 /Job/CreateJobLine 发布方法，以便我可以创建一个 JobLine。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T02:54:03.060

我认为你的问题是@Html.Action。我相信它更简单，更接近你想要呈现这样的局部视图：

```
@{ Html.RenderPartial("CreateJobLine", new MvcApplication1.Models.JobLine { JobId = 10 }); } 
```

我这样说是因为当我像往常一样使用 RenderPartial 时，表单会在对话框中正确呈现（所有其余代码都是您发布它的方式）。我不能将 Html.Action 与您发布的代码一起使用（可能是因为您省略了其他内容），所以这向我表明您的问题与该方法有关。祝你好运。

# macos - pkg-config 找不到 .pc 文件，尽管它们在路径中

> ID：11303730
> 
> 赞同：12
> 
> 时间：2012-07-03T02:31:48.823
> 
> 标签：macos, osx-lion, python-2.7, pkg-config

我在 Mac OSX-Lion 上看到 pkg-config 的一个奇怪问题。为我下载的模块运行 python 设置时，我收到以下错误：

```
aspen:python toddysm$ sudo ./setup.py install
Password:
`pkg-config --libs --cflags cld` returns in error: 
Package cld was not found in the pkg-config search path.
Perhaps you should add the directory containing `cld.pc'
to the PKG_CONFIG_PATH environment variable
No package 'cld' found

The `cld` C++ library is absent from this system. Please install it. 
```

但是，当检查 /usr/local/lib 文件夹时，我看到 libs 和 .pc 文件位于 pkgconfig 子文件夹中

```
aspen:~ toddysm$ cd /usr/local/lib/
aspen:lib toddysm$ ls -al
total 2640
drwxr-xr-x  6 root  wheel      204 Jul  2 17:38 .
drwxr-xr-x  9 root  wheel      306 Jul  2 15:17 ..
-rwxr-xr-x  1 root  wheel  1339516 Jul  2 17:38 libcld.0.dylib
lrwxr-xr-x  1 root  wheel       14 Jul  2 17:38 libcld.dylib -> libcld.0.dylib
-rwxr-xr-x  1 root  wheel      918 Jul  2 17:38 libcld.la
drwxr-xr-x  3 root  wheel      102 Jul  2 17:38 pkgconfig
aspen:lib toddysm$ cd pkgconfig/
aspen:pkgconfig toddysm$ ls -al
total 8
drwxr-xr-x  3 root  wheel  102 Jul  2 17:38 .
drwxr-xr-x  6 root  wheel  204 Jul  2 17:38 ..
-rw-r--r--  1 root  wheel  279 Jul  2 17:38 cld.pc 
```

使用命令行将 PKG_CONFIG_PATH 设置为指向 /usr/local/lib/ 没有帮助。出于某种原因将其设置为 ~/.bash_profile 会使 pkg-config 无法识别为命令。

我的假设是我缺少一些依赖，但不确定是什么。在 Linux 上尝试相同的操作时，我错过了 Python 开发包 python2.7-dev 但我不确定如何在 Mac 上检查它（是否存在）。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-03T10:36:10.323

`pkg-config`您可以使用以下命令列出默认查找的目录：

```
pkg-config --variable pc_path pkg-config 
```

`PKG_CONFIG_PATH``/usr/local/lib/pkgconfig`需要附加到变量的完整路径名。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-18T14:43:50.327

需要`export`'ed 环境变量才能对命令有用。尝试

```
$ export PKG_CONFIG_PATH=/usr/local/lib/pkgconfig
$ pkg-config --libs --cflags cld 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T22:36:06.713

似乎虽然`PKG_CONFIG_PATH`设置正确，但 Python 脚本并没有拾起它。查看它在子进程中启动 pkg-config 的脚本，我不确定环境变量信息是否传递给子进程。不过，我通过将库和 .cp 文件复制到 /opt/local/lib/ 解决了这个问题，这是 pkg-config 所在的默认文件夹。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-11-11T06:38:52.703

您可以尝试如下：

```
brew install pkg-config
brew install libvirt 
```

它对我有用。

# c# - 与三元运算符一起使用时，x86 与 AnyCPU 在 .Max() 上返回不同的结果

> ID：11303732
> 
> 赞同：1
> 
> 时间：2012-07-03T02:32:03.410
> 
> 标签：c#, ienumerable, ternary-operator, conditional-operator, anycpu

[https://github.com/qntmfred/FooTimestamp](https://github.com/qntmfred/FooTimestamp)

AnyCPU 构建配置中的以下程序评估`maxTimestamp`为`DateTime.MinValue`.

```
public class Foo
{
    public DateTime Timestamp { get; set; }
}

class Program
{
    static void Main(string[] args)
    {
        List<Foo> foos = new List<Foo>() { new Foo() { Timestamp = new DateTime(2012, 7, 1) } };
        var maxTimestamp = foos.Any() ? foos.Max(x => x.Timestamp) : new DateTime(2012, 7, 2);
    } // put a breakpoint here - maxTimestamp evaluates to DateTime.MinValue
} 
```

* 自从我第一次发布这个问题以来，我一直在从几个不同的角度追逐这个错误，所以这些评论可能没有多大意义。如果您想查看所有内容，请查看修订历史记录，但我已经删除了大部分原始帖子，以专注于我现在将这个问题简化为的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T21:58:26.870

所以看起来这最终成为了一个真正的编译器错误。整洁的。它已在 .NET 4.5 中修复

[x64 平台调试器中奇怪的三元运算符行为](https://stackoverflow.com/questions/7067354/bizarre-ternary-operator-behavior-in-debugger-on-x64-platform) [https://connect.microsoft.com/VisualStudio/feedback/details/684202](https://connect.microsoft.com/VisualStudio/feedback/details/684202)

# c# - 使用 Linq 根据 C# 中的令牌包装器查找字符串

> ID：11303738
> 
> 赞同：0
> 
> 时间：2012-07-03T02:32:29.057
> 
> 标签：c#, linq

如果您有以下示例，如何使用 Linq 查询出所有以标记开头和结尾的字符串？

例子：

```
"<file type="log4net.Util.PatternString" value="$SomeKey$" /> 
 <appendToFile value="true" />
 <datePattern value="$AnotherOne$" />
 <rollingStyle value="$YetAgain$" />
 <layout type="$SomeloggingType$">" 
```

结果会以这样的可编号返回：

```
$SomeKey$
$AnotherKey$
$YetAgain$
$SomeloggingType$ 
```

我已经将字符串拆分为一个数组，循环它，找到标记 $ 的所有索引，然后到达那里，但是我们如何在 Linq 中完成这个呢？有点难过。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T02:36:46.827

首先将文本分割成段，然后选择所有以 开头和结尾的段`$`：

```
var text = @"<file type=""log4net.Util.PatternString"" value=""$SomeKey$"" /> 
<appendToFile value=""true"" />
<datePattern value=""$AnotherOne$"" />
<rollingStyle value=""$YetAgain$"" />
<layout type=""$SomeloggingType$"">";

var result = text.Split(new[] { '"' })
    .Where(item => item.StartsWith("$") && item.EndsWith("$"));

// Test the result
foreach (var item in result)
{
    Console.WriteLine(item);
} 
```

# html - IE9 HTML5 占位符 - 人们是如何实现这一目标的？

> ID：11303739
> 
> 赞同：6
> 
> 时间：2012-07-03T02:32:54.733
> 
> 标签：html, internet-explorer-9, placeholder

我正在尝试`placeholder="xxx"`在我的 Web 应用程序中使用该属性，并且我不想为 IE9 提供特殊的视觉效果。人们可以为在 IE9 中实现此功能提出一些好的建议吗？

我在这里找到了几个链接，但没有一个建议的脚本是足够的......答案是从 2011 年年中开始的，所以我想也许有更好的解决方案。也许有一个被广泛采用的 jQuery 插件？我不想使用任何需要侵入性代​​码的东西，例如需要某个 css 类或其他东西。

谢谢。

**编辑**- 我还需要它来处理密码输入字段。

```
// the below snippet should work, but isn't.
$(document).ready(function() {
   initPlaceholders()();
}

function initPlaceholders() {
        $.support.placeholder = false;
var test = document.createElement('input');
if ('placeholder' in test) {
    $.support.placeholder = true;
    return function() { }
} else {
    return function() {
        $(function() {
            var active = document.activeElement;
            $('form').delegate(':text, :password', 'focus', function() {
                var _placeholder = $(this).attr('placeholder'),
                    _val = $(this).val();
                if (_placeholder != '' && _val == _placeholder) {
                    $(this).val('').removeClass('hasPlaceholder');
                }
            }).delegate(':text, :password', 'blur', function() {
                var _placeholder = $(this).attr('placeholder'),
                    _val = $(this).val();
                if (_placeholder != '' && (_val == '' || _val == _placeholder)) {
                    $(this).val(_placeholder).addClass('hasPlaceholder');
                }
            }).submit(function() {
                $(this).find('.hasPlaceholder').each(function() { $(this).val(''); });
            });
            $(':text, :password').blur();
            $(active).focus();
        });
    }
}
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-03T02:39:26.577

我们只是研究了同样的事情。在做了一些小改动后，我们决定重用[Aaron McCall的](https://gist.github.com/aaronmccall)[这个要点。](https://gist.github.com/765595)主要优点是代码简单易懂：

1.  删除内核和 setup_placeholders 部分。只需立即在匿名函数中调用它。

2.  `var`之前添加`test`。

对于支持的浏览器`placeholder`，它只是回退到那个。它还处理`delegate`现有表单中的新输入元素（注意使用 ）。但不处理动态的新表单元素。它可能会被修改为使用`jQuery.on`.

如果你不喜欢这个，你可以在[这里](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills)使用其中一个。但是，其中一些过于复杂，或者具有可疑的设计决策，例如`setTimeout`检测新元素。

请注意，它需要使用两对括号，因为您调用的是匿名函数，然后调用返回的函数（这可能会以不同的方式分解）：

```
(function () {
  // ...
})()(); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-22T15:16:45.790

不久前我写了一个 jquery 插件，它将占位符支持添加到任何不支持它的浏览器，并且在那些支持它的浏览器中什么也不做。

[占位符插件](http://corymathews.com/html5-placeholder-in-ie/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T03:26:58.340

这是一个也适用于密码字段的 jQuery 插件。它不像 Matthew 建议的代码那么小，但它有更多的修复。我也成功地将它与 H5Validate 一起使用。

[http://webcloud.se/code/jQuery-Placeholder/](http://webcloud.se/code/jQuery-Placeholder/)

# html - SVG 线性渐变在 Safari 中不起作用

> ID：11303740
> 
> 赞同：16
> 
> 时间：2012-07-03T02:33:49.590
> 
> 标签：html, safari, svg, linear-gradients

我有一个 SVG 对象，其中包含直接嵌入在文档中的线性渐变。它在 Chrome 和 Firefox 中运行良好，但在 Safari 中没有呈现任何内容。如果我将 SVG 创建为文件并使用 Object 标签嵌入它，它在 Safari 中可以正常工作。其他形状和填充都可以，只是线性渐变不起作用。我想我可以使用该对象，但我更喜欢直接嵌入 SVG。

我在这里创建了一个演示（适用于 Chrome，而不是 Safari）：http: [//jsfiddle.net/sjKbN/](http://jsfiddle.net/sjKbN/)

我遇到了这个建议将内容类型设置为的[答案](https://stackoverflow.com/questions/6117380/doctype-problem-displaying-svg-with-safari)`application/xhtml+xml`，但这本身似乎会导致其他问题。

只是想知道是否有人遇到过任何其他修复或想法来使其正常工作。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-03T12:04:39.273

如果你`defs`在它周围加上一个标签，你的渐变将在 Safari 中工作：

```
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
     width="300px" height="300px" viewBox="0 0 300 300" enable-background="new 0 0 300 300" xml:space="preserve">
 <defs>
<linearGradient id="SVGID_1_" gradientUnits="userSpaceOnUse" x1="5.6665" y1="149.5" x2="293.333" y2="149.5">
    <stop  offset="0" style="stop-color:#FFF33B"/>
    <stop  offset="0.0595" style="stop-color:#FFE029"/>
    <stop  offset="0.1303" style="stop-color:#FFD218"/>
    <stop  offset="0.2032" style="stop-color:#FEC90F"/>
    <stop  offset="0.2809" style="stop-color:#FDC70C"/>
    <stop  offset="0.6685" style="stop-color:#F3903F"/>
    <stop  offset="0.8876" style="stop-color:#ED683C"/>
    <stop  offset="1" style="stop-color:#E93E3A"/>
</linearGradient>
</defs>
<rect x="5.667" y="5.333" fill="url(#SVGID_1_)" width="287.667" height="288.333"/>
</svg> 
```

[根据规范](http://www.w3.org/TR/SVG/struct.html#DefsElement)，似乎`defs`鼓励但不是强制性的包含您的参考文献。所以这是Safari中的一个错误。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2014-10-06T16:43:56.663

关于 Alpha：Safari（目前为 7）似乎没有覆盖 SVG 颜色 alpha 通道，使用 stop opacity 属性。它工作正常！

```
<stop stop-color="rgba(x,y,z,0.5)"> //safari does not work
<stop stop-color="rgb(x,y,z)" stop-opacity="0.5"> //ok 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2018-12-02T11:50:33.733

接受的答案不是我的解决方案。

我的问题是我的索引文件中存在一个`<base href="/" />`标签。简单地删除它为我解决了这个问题。

如果您无法删除它，可能已经存在一些解决方法：找到了这个[要点](https://gist.github.com/leonderijke/c5cf7c5b2e424c0061d2)，但我没有测试它。

**更新**

只需删除 href 就破坏了我的 Angular 应用程序的子路由，正确的解决方法是在 linearGradient id 前面加上页面相对位置。我将逻辑包装在这样的方法中：

```
get svgFill(): string {
  return `url(${this.location.path()}#${this.gradientId}) white`;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-07-28T13:38:13.590

答案很简单，所有 SVG 文件的所有 id（不仅是`<linear gradient>`）都必须是唯一的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-24T00:22:58.883

在制作带有线性渐变的内联 SVG 时，我也遇到了一些麻烦。设计师`-`在`<linearGradient`. 解决方案就像删除它一样简单。

```
<linearGradient id="linear-gradient">
...
<path fill="url(#linear-gradient)" d="..."/> 
```

和

```
<linearGradient id="lineargradient">
...
<path fill="url(#lineargradient)" d="..."/> 
```

# php - xml php curl 请求不支持的媒体类型

> ID：11303744
> 
> 赞同：6
> 
> 时间：2012-07-03T02:34:14.527
> 
> 标签：php, xml, api, soap, curl

这是我用来连接 Mind Body Online API 的代码。如果有人对此有任何经验，请指出正确的方向！

我得到的错误是：服务器无法为请求提供服务，因为媒体类型不受支持。

代码：

```
$soapUrl = "http://clients.mindbodyonline.com/api/0_5/ClassService.asmx?WSDL";
// xml post structure

$xml_post_string = '<?xml version="1.0" encoding=\"utf-8\"?>
<soapenv:Envelope xmlns:xsd="http://www.w3.org/2001/XMLSchema"
    xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <soapenv:Header/>
  <soapenv:Body>
     <GetClasses xmlns="http://clients.mindbodyonline.com/api/0_5/GetClasses">
        <Request>
           <SourceCredentials>
              <SourceName>{user}</SourceName>
              <Password>{pass}</Password>
              <SiteIDs>
                 <int>{id}</int>
              </SiteIDs>
           </SourceCredentials>
           <XMLDetail>Basic</XMLDetail>
           <PageSize>10</PageSize>
           <CurrentPageIndex>0</CurrentPageIndex>
           <SchedulingWindow>true</SchedulingWindow>
        </Request>
     </GetClasses>
  </soapenv:Body>
</soapenv:Envelope>
';

$headers = array(
    "Content-type: application/xml;charset=utf-8",
    "Accept: application/xml",
    "Cache-Control: no-cache",
    "Pragma: no-cache",
    "SOAPAction: http://clients.mindbodyonline.com/api/0_5/GetClasses",
    "Content-length: ".strlen($xml_post_string),
    );

$url = $soapUrl;
$cookiePath = tempnam('/tmp', 'cookie');

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_COOKIEJAR, $cookiePath);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_ANY);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false);
curl_setopt($ch, CURLOPT_TIMEOUT, 10);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $xml_post_string);
curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);

// converting
$response = curl_exec($ch);
curl_close($ch);

echo $response; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-03T03:33:51.887

```
"Content-type: text/xml;charset=utf-8" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-25T05:47:50.857

```
<?php
function getAccessToken()
{
$head = array("Accept" =>"application/json",
                  "Content-type" => "multipart/form-data");
$header="";
foreach ($head as $key => $value) {
    $header .= $key . '=' . $value . '&';
}
$header = rtrim($header, '&');

$parameters="";
$params = array("grant_type"=>"client_credentials");
foreach ($params as $key => $value) {
    $parameters .= $key . '=' . $value . '&';
}
$parameters = rtrim($parameters, '&');

$url = "https://api.sandbox.paypal.com/v1/oauth2/token";

$ch = curl_init();
curl_setopt($ch,CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch,CURLOPT_URL, $url);
curl_setopt($ch,CURLOPT_POST, true);
curl_setopt($ch,CURLOPT_HEADER, $header);
curl_setopt($ch,CURLOPT_POSTFIELDS,$parameters);
curl_setopt($ch,CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch,CURLOPT_USERPWD, "ASLy4BAtBdBh1B2XfPpVdffdfdsfdutPM4l-sAnIWzrmLJ_2Y-    7VcU4qC_tH:EAH5UhDznr8jAZYeSDtODz9I2qT8WOuq2tiAJwY8HdvMN7cP3isdsdsdgy");
    $response = curl_exec($ch);
    if (empty ($response) )
    {
        die (curl_error($ch));
    }

      print_r($response);
      }
     getAccessToken(); 
```

# objective-c - 检测设备上的 iTunes 播放列表文件夹

> ID：11303745
> 
> 赞同：4
> 
> 时间：2012-07-03T02:34:18.950
> 
> 标签：objective-c, ios, mpmediaquery

通过 iTunes，您可以创建任意嵌套深度的播放列表文件夹。当您将这些播放列表文件夹复制到您的 iOS 设备时，iTunes 能够检测到它们是文件夹，并允许您深入到最终获取歌曲的位置。知道他们是怎么做到的吗？这几天我一直在想办法解决这个问题。

当我查询已知文件夹的特定 persistentID 时，我能看到的与包含歌曲的播放列表不同的唯一内容是：

*   playlist.mediaTypes = 4359（这是 Music|Podcast|Audiobook|Movie|VideoiTunes）而普通的播放列表不会混合音频类型和视频类型
*   属性 MPMediaPlaylistPropertyPlaylistAttributes 的值包含 2 (MPMediaPlaylistAttributeSmart)，而普通播放列表包含 0
*   项目数将等于设备上的项目总数

但是，就是这样！我看不到任何方法可以访问子文件夹。或者，在询问文件夹中包含的播放列表或子文件夹时，我看不到任何将其与父级绑定的方法。

苹果在 iTunes 中做到了，所以一定有办法。他们是否使用了一些私有 API？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-11T11:54:55.547

`MPMediaPlaylist`有以下未记录的属性可以使用's`valueForProperty`方法为您提供所需的内容：`@"isFolder"`和`@"parentPersistentID"`.

请注意，这些没有记录，也没有出现在任何头文件中，因此根据 Apple 的应用程序提交规则，使用它们可能被视为使用“私有 API”。

我已经向 Apple 提交了一份错误报告，要求在头文件中提供这些错误报告，并要求澄清它们是否被视为私有 API 的一部分。

# ofbiz - POS ofbiz 我需要我的数据

> ID：11303752
> 
> 赞同：-4
> 
> 时间：2012-07-03T02:35:26.600
> 
> 标签：ofbiz

现在我需要我的数据到 POS ofbiz 我无法配置 谁曾经配置过 POS ofbiz 我需要指导。

谢谢，对不起，我可以打一点英文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-08-20T18:08:35.993

上面的 OFBiz POS 官方文档的链接已更改，请点击此处：[OFBiz Pos Doc](https://cwiki.apache.org/confluence/display/OFBIZ/POS+System)

这是 OFBiz POS 官方文档的摘录

带有可用 POS 的最后一个发布版本是 R12.04.06。它仍然在 R14.12 和 15.12 未发布的分支中可用。它在 R16 版本及其他版本中不可用。所有 POS 官方文档在 1754402 修订版之前都是可靠且可用的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T19:08:13.470

~~[您可以在https://cwiki.apache.org/OFBTECH/apache-ofbiz-technical-production-setup-guide.html#ApacheOFBizTechnicalProductionSetupGuide-POSSetupProcess](https://cwiki.apache.org/OFBTECH/apache-ofbiz-technical-production-setup-guide.html#ApacheOFBizTechnicalProductionSetupGuide-POSSetupProcess)~~阅读 Apache OFBiz 系统的技术文档，特别是 POS 设置

*更新：*

正如 JacquesLeRoux 所写，该文档现在可在[https://cwiki.apache.org/confluence/display/OFBIZ/POS+System](https://cwiki.apache.org/confluence/display/OFBIZ/POS+System)获得。

# c# - 在数组中存储值的日期出现

> ID：11303755
> 
> 赞同：0
> 
> 时间：2012-07-03T02:36:08.190
> 
> 标签：c#, arrays

您好，我有一个循环需要计算 a 中日期的出现次数`datagridview`。如何存储该数量，并在找到另一个相同日期时增加该数量？我正在设想类似的东西：

```
for (int k = 0; k < (companyInfo.Rows.Count - 1); k++)
{
    for (int j = 0; j< dateArray.Length; j++)
    {
       if (companyInfo.Rows[k].Cells["StartDate"].Value.ToString().Trim() == dateArray[j])
       {
         //Find matching index in another array, increment that number
       }
    }
} 
```

其中 companyInfo 是我正在遍历每一行的 datagridview，dateArray 是一组长度为 364 的静态日期（可能是字符串），而“另一个数组”将是某种单独的数组，其中包含一堆看似随机的代表日期出现的数字。

是否有一个已经存在的对象可以更好地做到这一点，或者我是否必须跟踪哪个日期对应于两个数组之间的哪些值？很难做一些事情，比如找到最大值/最小值、平均值等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T02:43:19.010

使用`Dictionary<string, int>`（在命名空间中`System.Collections.Generic`）。

```
IDictionary<string, int> count = new Dictionary<string, int>();

// In your loop
if (count.ContainsKey(your_date)){
    count[your_date]++;
} else {
    count.Add(your_date, 1);
}
// END In your loop 
```

# maven - 将外部插件添加到 intellij maven 项目

> ID：11303761
> 
> 赞同：2
> 
> 时间：2012-07-03T02:37:13.387
> 
> 标签：maven, intellij-idea

我想在 Intellij 中为我的 maven 项目添加一个插件，但我不确定应该从哪里下载以及应该将 jar 文件放在哪里。例如，我想使用

```
<plugin>
    <groupId>funambol</groupId>
    <artifactId>rhinounit-maven-plugin</artifactId>
    ... 
```

或者

```
<plugin>
    <groupId>com.github.searls</groupId>
    <artifactId>jasmine-maven-plugin</artifactId>
    ... 
```

在我的 pom.xml 中，但标签之间的文本是红色的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T07:58:03.823

`rhineunit-maven-plugin`似乎在任何中央存储库中都找不到。您必须自己从[这里](https://github.com/stefanofornari/rhinounit-maven-plugin/tags)下载插件源，然后通过运行`mvn install`pom 文件所在的位置来构建它们。这将在您的本地存储库中安装插件，版本将为`1.0`.

关于`jasmin-maven-plugin`它可以在[这里](http://mvnrepository.com/artifact/com.github.searls/jasmine-maven-plugin)找到，你可以看到最新的稳定版本是`1.1.0`. 这意味着您只需将版本添加`1.1.0`到您的插件语句中，并且在您运行时会下载该插件`mvn install`（实际上是在早期的 maven 阶段，但不必为此烦恼）。

[这里](http://daverog.wordpress.com/2011/05/20/auto-server-side-tdd-javascript-with-maven-jsunit-and-sinon-js/)似乎是一篇关于如何使用的好文章，`rhinounit-maven-plugin`所以你应该继续学习它。

关于由于 IntelliJ 无法在本地 repo 中找到 jar 文件导致的标签变红，特别是如果您没有为插件设置版本。通常，当您从 IntelliJ 中更改 pom 文件时，IntelliJ 会在右上角显示一个类似绿色咆哮的小东西，指出“需要导入 Maven 项目”。如果您选择“导入更改”，它将尝试下载您的依赖项。解决它的另一种方法是从命令行`mvn install`在您自己的项目上运行。

# iphone - 如何在我的网站上嵌入视频以便在 iPhone 上工作以及需要什么视频格式？

> ID：11303763
> 
> 赞同：0
> 
> 时间：2012-07-03T02:37:19.323
> 
> 标签：iphone, html, ios, video

我见过几个网站，他们可以创建视频链接，并且实际上可以在 iPhone、iPad 或 iPod 的视频播放器上打开。

这显然不是 Flash 播放器视频，而且它们似乎不是从 youtube 中嵌入的。

所以我想知道如何在我的网站上添加一个可以在 iPhone 上打开的视频，以及这需要什么类型的格式？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T02:43:32.027

HTML5 视频适用于 iOS 设备，请参阅[http://html5video.org](http://html5video.org)

这是一个不错的播放器插件 [http://videojs.org](http://videojs.org)

# android - android - 我想从活动开始服务

> ID：11303764
> 
> 赞同：0
> 
> 时间：2012-07-03T02:37:21.490
> 
> 标签：android, service, permissions

我在一个项目中有软键盘服务和设置活动。当软键盘运行时，设置活动是软键盘结束和启动。但是，我收到了日志。

日志是

```
07-03 11:15:08.969: E/AndroidRuntime(8340): FATAL EXCEPTION: main 07-03 11:15:08.969: E/AndroidRuntime(8340): java.lang.SecurityException: Not allowed to start service Intent { cmp=com.example.android.softkeyboard/.SoftKeyboard } without permission android.permission.BIND_INPUT_METHOD
07-03 11:15:08.969: E/AndroidRuntime(8340):     at android.app.ContextImpl.startService(ContextImpl.java:836)
07-03 11:15:08.969: E/AndroidRuntime(8340):     at android.content.ContextWrapper.startService(ContextWrapper.java:336)
07-03 11:15:08.969: E/AndroidRuntime(8340):     at com.example.android.softkeyboard.MakeKeyActivity.SaveTotxt(MakeKeyActivity.java:213)
07-03 11:15:08.969: E/AndroidRuntime(8340):     at com.example.android.softkeyboard.MakeKeyActivity.onOptionsItemSelected(MakeKeyActivity.java:144)
07-03 11:15:08.969: E/AndroidRuntime(8340):     at android.app.Activity.onMenuItemSelected(Activity.java:2205)
07-03 11:15:08.969: E/AndroidRuntime(8340):     at com.android.internal.policy.impl.PhoneWindow.onMenuItemSelected(PhoneWindow.java:749)
07-03 11:15:08.969: E/AndroidRuntime(8340):     at com.android.internal.view.menu.MenuItemImpl.invoke(MenuItemImpl.java:143)
07-03 11:15:08.969: E/AndroidRuntime(8340):     at com.android.internal.view.menu.MenuBuilder.performItemAction(MenuBuilder.java:859)
07-03 11:15:08.969: E/AndroidRuntime(8340):     at com.android.internal.view.menu.IconMenuView.invokeItem(IconMenuView.java:581)
07-03 11:15:08.969: E/AndroidRuntime(8340):     at com.android.internal.view.menu.IconMenuItemView.performClick(IconMenuItemView.java:127)
07-03 11:15:08.969: E/AndroidRuntime(8340):     at android.view.View$PerformClick.run(View.java:9099)
07-03 11:15:08.969: E/AndroidRuntime(8340):     at android.os.Handler.handleCallback(Handler.java:587)
07-03 11:15:08.969: E/AndroidRuntime(8340):     at android.os.Handler.dispatchMessage(Handler.java:92)
07-03 11:15:08.969: E/AndroidRuntime(8340):     at android.os.Looper.loop(Looper.java:123)
07-03 11:15:08.969: E/AndroidRuntime(8340):     at android.app.ActivityThread.main(ActivityThread.java:3683)
07-03 11:15:08.969: E/AndroidRuntime(8340):     at java.lang.reflect.Method.invokeNative(Native Method)
07-03 11:15:08.969: E/AndroidRuntime(8340):     at java.lang.reflect.Method.invoke(Method.java:507)
07-03 11:15:08.969: E/AndroidRuntime(8340):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:864)
07-03 11:15:08.969: E/AndroidRuntime(8340):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:622)
07-03 11:15:08.969: E/AndroidRuntime(8340):     at dalvik.system.NativeStart.main(Native Method) 
```

我允许显化

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android" 
        package="com.example.android.softkeyboard">

    <uses-permission android:name="android.permission.KILL_BACKGROUND_PROCESSES"/>

    <application android:label="aabbccdd">

        <activity
            android:name=".CustomKeyboardActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity 
            android:name=".MakeKeyActivity"
            android:label="@string/app_name">
        </activity>
        <activity 
            android:name=".MakeDictionaryActivity"
            android:label="@string/app_name">
        </activity>
        <activity 
            android:name=".UpandDownActivity"
            android:label="@string/app_name">
        </activity>

        <service 
                android:exported="true"
                android:enabled="true" 
                android:name=".SoftKeyboard"
                android:permission="android.permission.BIND_INPUT_METHOD">
            <intent-filter>
                <action android:name="android.view.InputMethod" />
            </intent-filter>
            <meta-data android:name="android.view.im" android:resource="@xml/method" />
        </service>
        <uses-permission android:name="android.permission.BIND_INPUT_METHOD"/>

    </application>
</manifest> 
```

我称这个代码。

```
Intent intent=new Intent(this,SoftKeyboard.class);
stopService(intent);
startService(intent); 
```

我给予了许可，但为什么要请求许可？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T02:42:03.587

看起来您将`<uses-permission>`元素作为元素的子`<application>`元素。它应该与元素`<application>`下的级别相同。`<manifest>`

换句话说，改变最后几行：

```
 </service>
    <uses-permission android:name="android.permission.BIND_INPUT_METHOD"/>
  </application>
</manifest> 
```

对此：

```
 </service>
  </application>
  <uses-permission android:name="android.permission.BIND_INPUT_METHOD"/>
</manifest> 
```

# mysql - 从一个表中检索两个 xml 结果的单个查询

> ID：11303768
> 
> 赞同：0
> 
> 时间：2012-07-03T02:37:52.310
> 
> 标签：mysql, xml

```
Table
Class   Firstname   Lastname    mark
V       John        Lim         60
V       Wills       smith       80
VI      Mark        Bay         75
VI      Carl        mark        65 
```

我的 SQL 中有这张表。我需要一个查询来根据一个表中的“类类型”检索两个不同的 XML 结果

以下是我的预期结果

```
Result1
<Studentslist>
<Students>
        <class>V</class>
        <Firstname>John</Firstname>
        <Lastname>Lim</Lastname>
        <mark>60</mark>
</Students>
<Students>
        <class>V</class>
        <Firstname>Wills</Firstname>
        <Lastname>smith</Lastname>
        <mark>80</mark>
</Students>
</Studentslist>

Result2
<Studentslist>
<Students>
        <class>VI</class>
        <Firstname>Mark</Firstname>
        <Lastname>Bay</Lastname>
        <mark>75</mark>
</Students>
<Students>
        <class>VI</class>
        <Firstname>Carl</Firstname>
        <Lastname>mark</Lastname>
        <mark>65</mark>
</Students>
<Studentslist> 
```

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T04:20:54.283

对于查询部分，使用 UNION

```
(SELECT class, firstname, lastname, mark from students where class='V')
UNION ALL
(SELECT class, firstname, lastname, mark from students where class='VI') 
```

编辑：使用光标

```
DELIMITER | 
Drop procedure if exists `GetData`;
CREATE PROCEDURE `GetData`()

BEGIN

  DECLARE bDone INT;
  DECLARE var1 CHAR(16);   

  DECLARE curs CURSOR FOR  SELECT distinct(class) FROM students;
  DECLARE CONTINUE HANDLER FOR NOT FOUND SET bDone = 1;

  SET bDone = 0;

  DROP TEMPORARY TABLE IF EXISTS tblResults;
  CREATE TEMPORARY TABLE IF NOT EXISTS tblResults (
    class varchar(255),
    firstname varchar(255),
    lastname varchar(255),
    mark varchar(255)
  );

  OPEN curs;

  emp_loop: LOOP
    FETCH curs INTO var1;
     IF bDone=1 THEN       /* No more rows*/
              LEAVE emp_loop;
     END IF;

    INSERT INTO tblResults SELECT class, firstname, lastname, mark FROM `students` where class=var1;

  END LOOP emp_loop;

  CLOSE curs;
  SELECT * FROM tblResults;
END|
DELIMITER ; 
```

# javascript - 更改的用户脚本 进入 可能重复：如何使用 jquery 将无序列表转换为样式精美的 <select>下拉列表？我想制作一个用户脚本，将网站上的所有列表更改为下拉列表。例如： tab 1 tab 2< ID：11303770 赞同：0 时间：2012-07-03T02:37:54.383 标签：javascript, jquery, userscripts 回答 #1 赞同：1 时间：2012-07-03T02:45:06.730 您可以使用简单的地图来转换元素： // map from "li" elements to "option" var options = $("ul.tabmenu li a").map(function(i,e) { return $("<option " + (($(e).parent().hasClass('selected')) ? "selected='selected'" : "") + " value='" + $(e).attr('href') + "'>" + $(e).text() + "</option>"); }); // create "select" element and append previous var select = $("<select></select>"); options.each(function(i,e) { select.append(e); }); console.log(select);</select>

# ruby-on-rails-3 - Rails 3：具有方法调用和模型关联的 named_scope 的正确语法

> ID：11303772
> 
> 赞同：2
> 
> 时间：2012-07-03T02:38:25.283
> 
> 标签：ruby-on-rails-3, named-scope

我的应用程序中有四个模型，定义如下

```
class User < ActiveRecord::Base
    has_many :comments
    has_many :geographies
    has_many :communities, through: :geographies

class Comment < ActiveRecord::Base
    belongs_to :user

class Community < ActiveRecord::Base
    has_many :geographies
    has_many :users

class Geography < ActiveRecord::Base
    belongs_to :user
    belongs_to :community 
```

用户可以发表评论，这些评论通过地理表与一个或多个社区相关联。

我的任务是仅显示从下拉列表中选择的社区的评论。我从[这篇文章](https://stackoverflow.com/questions/11278577/rails-3-object-chaining-with-has-many-through-associations)`comment.user.communities.first`中了解到，我可以通过对象链访问给定评论的社区。

似乎通常带有 lambda 的 named_scope 将是过滤所有评论列表的首选，但是，我完全不知道如何构造这个 named_scope。我试图通过遵循一些 RailsCasts 来构建 named_scope，但这是我所能得到的。生成的错误如下。

```
class Comment < ActiveRecord::Base
    belongs_to :user

    def self.community_search(community_id)
        if community_id
            c = user.communities.first
            where('c.id = ?', community_id)
        else 
            scoped
        end
    end

    named_scope :from_community, { |*args| { community_search(args.first) } } 
```

这是错误：

```
syntax error, unexpected '}', expecting tASSOC
named_scope :from_community, lambda { |*args|  { community_search(args.first) } }
                                                            ^ 
```

将带有参数的方法传递到 named_scope 的正确语法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T03:33:08.740

首先，您`scope`现在可以在 rails 3 中使用 - 旧`named_scope`形式已缩短，并且在 rails 3.1 中[已删除！](http://m.onkey.org/active-record-query-interface)

但是，关于您的错误，我怀疑您不需要内部括号。当使用这样的 lambda 块时，它们通常会加倍，因为您正在从头开始创建新的哈希，如下所示：

```
scope :foo, { |bar|
  { :key => "was passed #{bar}" }
} 
```

但是，在您的情况下，您正在调用`community_search`它应该返回一个您可以直接返回的值。在这种情况下，一个[AREL](http://asciicasts.com/episodes/239-activerecord-relation-walkthrough)对象已经取代了这种简单的哈希值。阅读有关该主题的所有随机帖子和教程时，这有点令人困惑，这主要是由于 AREL 导致的风格发生了巨大变化。不过，这两种风格的使用都可以 - 作为 lambda 或类方法。它们在很大程度上意味着同样的事情。上面的两个链接有几个这种新风格的例子，供进一步阅读。

当然，您可以只学习[squeel 之](http://erniemiller.org/projects/squeel/)类的东西，我觉得它更容易阅读，并且省去了很多打字。^^;

# android - BOOT_COMPLETE 和 ExternalStorageState

> ID：11303773
> 
> 赞同：1
> 
> 时间：2012-07-03T02:38:49.467
> 
> 标签：android

我需要在重新启动时更新一些警报，但我需要更新的一些信息在外部存储器中。BOOT_COMPLETE 标志在 SD 卡完全挂载之前设置，因此无法立即完成此更新。关于如何准确确定 SD 卡何时安装的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T02:50:40.680

[Intent.ACTION_MEDIA_MOUNTED](http://developer.android.com/reference/android/content/Intent.html#ACTION_MEDIA_MOUNTED)应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T02:44:15.980

在收到 BOOT_COMPLETE 时检查是否已挂载，如果没有则设置另一个警报。必要时冲洗并重复。

# c# - 如何在 C# 中从 html 中提取信息？

> ID：11303778
> 
> 赞同：0
> 
> 时间：2012-07-03T02:39:24.220
> 
> 标签：c#, html, syndication, syndication-feed

谁能教我从 C# 中的 html 中提取信息？我正在使用 C# 中的 WinRT 类库。

我想从[http://lifehacker.com/5923026/remains-of-the-day-google-image-search-gets-knowledge-graph-integration](http://lifehacker.com/5923026/remains-of-the-day-google-image-search-gets-knowledge-graph-integration)中提取主要内容和图像。

这是部分网站代码，

```
<html xmlns="http://www.w3.org/1999/xhtml" class="feature_chompcommentimages feature_s3upload feature_switch feature_powwowtest" xmlns:fb="http://www.facebook.com/2008/fbml">
    <head> 
```

> ```
>  **<title>Remains of the Day: Google Image Search Gets Knowledge Graph Integration</title>**
>           <meta http-equiv="content-type" content="text/html; charset=utf-8" />
>   <meta http-equiv="content-language" content="en" />
>   <meta http-equiv="refresh" content="86400" />
>   <meta name="robots" content="all" />
>                       <meta name="keywords" content="For What It&#039;s Worth, remainders, in brief, Lifehacker" />
>                   <meta property="fb:page_id" content="7568536355" />
>                               <meta name="title" content="Remains of the Day: Google Image Search Gets Knowledge Graph Integration" />
>       **<meta name="description" content="Google updates Image Search with Knowledge Graph integration, VLC for OS X now supports Retina display, Sparrow updates with Retina display and Mountain Lion support, and Amazon introduces barcode scanning app Flow for iOS. " />**
>                       <link rel="image_src" href="http://img.gawkerassets.com/img/17rm77tdcfd31jpg/original.jpg" />
>           <meta property="og:image" content="http://img.gawkerassets.com/img/17rm77tdcfd31jpg/xlarge.jpg" />
>                   <meta property="og:site_name" content="Lifehacker"/>
>       <meta property="og:title" content="Remains of the Day: Google Image Search Gets Knowledge Graph Integration" />
>       <meta property="og:description" content="Google updates Image Search with Knowledge Graph integration, VLC for OS X now supports Retina display, Sparrow updates with Retina display and Mountain Lion support, and Amazon introduces barcode scanning app Flow for iOS." />
>       <meta property="og:type" content="article" /> 
> ```

我可以使用 SyndicationFeed.Title.Text （使用 Windows.Web.Syndication;）来提取当天的遗骸：Google Image Search Gets Knowledge Graph Integration

**请帮我提取**

```
<meta name="description" content="Google updates Image Search with Knowledge Graph integration, VLC for OS X now supports Retina display, Sparrow updates with Retina display and Mountain Lion support, and Amazon introduces barcode scanning app Flow for iOS. " />* 
```

**我还需要提取里面的主要内容**

```
<div id="container"> <script type="text/javascript">

<!-- %JUMP:More &raquo;% --><\/p>\n<ul>\n<li><a href=\"http:\/\/insidesearch.blogspot.com\/2012\/07\/find-smarter-more-comprehensive-search.html\">Find Smarter, More Comprehensive Search by Image Results<\/a> <i>Google updated its Image Search with a couple of new features. One being an expanded view that lets searchers see the text around matching images, and the other being added support for Knowledge Graph to image search results, which means Google will attempt to identity any photo that you upload or link to and provide more information about the subject.<\/i> [Google Blog]<\/li>\n<li> 
```

内容：“通过图像结果查找更智能、更全面的搜索”“Google 更新了它的图像搜索，增加了一些新功能。一个是扩展视图，让搜索者可以看到匹配图像周围的文本，另一个是添加对知识图谱的支持图片搜索结果，这意味着 Google 将尝试识别您上传或链接到的任何照片，并提供有关该主题的更多信息。[Google 博客]”

非常感谢！！

[7/4/12]
抱歉，我正在尝试通过直接从 html 解析或通过先将其转换为 xml 来解析从 html 中提取文本（作为字符串）和图像（链接或 BitmapImage）。

我使用来自 htmlagilitypack.codeplex.com 的 HtmlAgilityPack 和来自 4guysfromrolla.com/articles/011211-1.aspx 的教程。虽然我仍然想知道 Metro 风格的应用程序是否有更好的解决方案，因为 HtmlAgilityPack 缺乏对它的一些支持。例如，它具有将 html 转换为 xml 的方法，但 WinRT 不再支持来自 .NET 的 XmlTextReader。

再次感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T03:04:44.403

Jerry，我建议您使用 RSS 库，而不是解析这个 XML。看看[RssToolkit](http://aspnetrsstoolkit.codeplex.com/)。

# php - MAX( ) WHERE - 错误

> ID：11303780
> 
> 赞同：0
> 
> 时间：2012-07-03T02:39:27.590
> 
> 标签：php, mysql

我有一个选择语句（**工作**）

```
 Select * FROM 
    (SELECT id, type, color, product,  
    SUM(Quantity) AS TotalQuantity, 
    MAX(Date) AS LatestDate 
    FROM inventory 
    GROUP BY id, color, type) 
    AS alias 
    WHERE TotalQuantity > 0 
```

我正在尝试向 Max(Date) 添加 WHERE 子句，但我没有任何运气：

我想我会把它改成：`MAX(Date) AS LatestDate WHERE stock = 1`但这不起作用。

**不工作：**

```
 Select * FROM 
    (SELECT id, type, color, product,  
    SUM(Quantity) AS TotalQuantity, 
/* Problem Here */ MAX(Date) AS LatestDate WHERE stock = 1
    FROM inventory 
    GROUP BY id, color, type) 
    AS alias 
    WHERE TotalQuantity > 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T02:58:36.877

```
MAX(IF(stock = 1, Date, NULL)) AS LatestDate 
```

它将找到最大日期`stock = 1`或者`null`如果没有这样的行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T02:44:49.450

## 使用`WHERE`Sub Select 语句中的子句！

对于您的答案，请使用此 SQL：

```
Select * FROM 
    (SELECT id, type, color, product,  
    SUM(Quantity) AS TotalQuantity, 
    MAX(Date) AS LatestDate 
    FROM inventory 
    GROUP BY id, color, type
    WHERE TotalQuantity > 0) 
    AS alias 
```

使用`WHERE`Sub Select 语句中的子句！

# sql - 确定 SQL 选择是否异步返回空集？

> ID：11303781
> 
> 赞同：0
> 
> 时间：2012-07-03T02:39:28.853
> 
> 标签：sql, firefox-addon

这很容易吗？似乎仅在结果不是空集时才执行 handleResult 方法。

我的一个想法是让handleResult 和handleCompletion 成为对象的成员函数，并让handleResult 更新handleCompletion 可以检查的成员变量。如果变量已设置，则不为空，如果变量未设置，则为空并且可以相应地采取行动。

似乎过于复杂，希望有更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T04:23:37.540

勾勒出一个解决方案（我上面的想法）（edit2：根据我在下面所做的评论）

```
function sql() {
    this.results = false;
    var me = this;

    this.handleResult = function(aResultSet) {

        for (var row = aResultSet.getNextRow(); row;  row = aResultSet.getNextRow()) {
            me.results = true;

            var value = row.getResultByName("name");
        }
    };

    this.handleError = function(aError) {
        .... //deal with error
    };

    this.handleCompletion = function(aReason) {
        if (me.results) {
            ....//results
        } else {
            ....//no results
        }

        if (aReason != Components.interfaces.mozIStorageStatementCallback.REASON_FINISHED) {
            ....//handle these
    };
};

s = new sql(); 

statement.executeAsync({
    handleResult: s.handleResult,
    handleError: s.handleError,
    handleCompletion: s.handleCompletion
}); 
```

这被认为是解决这个问题的好方法吗？

编辑1：这不符合我的预期（它有效，但不是 100% 确定原因）。即 this.results 变量是未定义的（不是假的），如果 handleResult 从不运行。因此，handleResult 和 handleCompletion 似乎在一组与我预期不同的变量上运行。

任何帮助理解我做错了什么都将不胜感激。

# spring - 在服务器启动期间，Spring 将 bean 注入到启动类中

> ID：11303783
> 
> 赞同：0
> 
> 时间：2012-07-03T02:39:29.137
> 
> 标签：spring, timertask

我的豆是：

```
@Component
public class KidsServerStartUp implements ServletContextListener
{
     UploadService uplService;

    @Autowired
    public void setUplService( UploadService uplService )
    {
        this.uplService = uplService;
    }
    public void contextInitialized(ServletContextEvent event) {
       System.out.println ( uplService );
    }
} 
```

在 web.xml 中；我首先调用spring框架来设置所有bean；然后设置启动监听器：

```
<listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    <listener>
        <listener-class>com.kids.util.KidsServerStartUp</listener-class>
    </listener> 
```

uplService 被打印为 null ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T04:19:49.203

我认为您正在寻找的是类似[这篇文章的](https://stackoverflow.com/questions/4746041/spring-injecting-a-dependency-into-a-servletcontextlistener)内容。

由于您使用的是`ServletContextListener`spring 上下文，因此不会用于创建`Listener`类。但是我们可以`ApplicationContext`使用`ServletContext`.

```
public class KidsServerStartUp implements ServletContextListener {
    public void contextInitialized(ServletContextEvent event) {
        final WebApplicationContext springContext = WebApplicationContextUtils.getWebApplicationContext(event.getServletContext());
        UploadService uplService = springContext.getBean(UploadService.class);
        System.out.println ( uplService );
    }
} 
```

# c - 为什么 gcc -Wformat 不警告 unsigned int 上的 printf %d？

> ID：11303784
> 
> 赞同：10
> 
> 时间：2012-07-03T02:39:33.710
> 
> 标签：c, gcc, gcc-warning, format-specifiers, format-string

以下程序具有未定义的行为：

```
#include <stdio.h>

int main(void)
{
    unsigned int x = -100; // This is fine, becomes UINT_MAX - 100
    printf("%d\n", x); // This is undefined behavior.
    return 0;
} 
```

> C99 7.19.6.1p8 状态 %d 需要一个 int 参数。
> 
> C99 7.19.6.1p9 声明“如果任何参数不是相应转换规范的正确类型，则行为 **未定义**。”

但是，gcc `-Wformat`（包含在 中`-Wall`）不会抱怨上述程序，为什么？这是一个错误，还是故意遗漏？

从 gcc 手册页：

```
-Wformat 
```

检查对`"printf"`and`"scanf"`等的调用，以确保提供的参数具有适合指定格式字符串的类型，并且格式字符串中指定的转换有意义

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-03T02:54:14.487

我最好的猜测是跳过警告，因为 UB 可以说是由*值*调用，而不仅仅是由类型调用。`va_arg`只要值在有符号和无符号类型中都可以表示，则允许符号不匹配。但是，`printf`和朋友并没有具体说明，`va_arg`标准规定任何类型不匹配都会导致 UB，但这可能是标准中的一个错误。否则，`printf("%x",1);`将调用 UB。请参阅我关于该主题的问题：

[printf("%x",1) 会调用未定义的行为吗？](https://stackoverflow.com/questions/4664100/does-printfx-1-invoke-undefined-behavior)

# javascript - JS元素事件，刷新元素

> ID：11303785
> 
> 赞同：0
> 
> 时间：2012-07-03T02:39:47.730
> 
> 标签：javascript

例如，如果我有下一个事件：

```
document.getElementById('TagSearchInput').onkeyup = function(e)
{
     //Code...
} 
```

在事件内部，有一个条件是我重新创建元素 ( `TagSearchInput`)。如何从事件中刷新事件选择器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T02:46:54.687

好的，忽略有关您为什么要重新创建输入的任何问题...

而不是使用匿名函数尝试这样的事情：

```
function TSIKeyupHandler(e)
{
     //Code...

     // within your condition where you want to re-attach the handler
     document.getElementById('TagSearchInput').onkeyup = TSIKeyupHandler;
}

document.getElementById('TagSearchInput').onkeyup = TSIKeyupHandler; 
```

`TSIKeyupHandler()`（如果您想将该函数保持在全局范围之外，可以选择将上述所有内容放在立即调用的匿名函数中。）

# c# - 如何通过 WAN C# 将文本框文本发送到另一个表单

> ID：11303788
> 
> 赞同：0
> 
> 时间：2012-07-03T02:41:24.943
> 
> 标签：c#, winforms, controls, wan

我想知道如何通过 WAN 发送文本框文本，而在另一台计算机中打开的另一个表单使用我发送的文本作为他的文本框文本。

基本上它将控制数据发送到在另一台计算机中打开的另一个表单。

我怎样才能做到这一点？我想过使用 TCP 或其他东西，但我不太了解，我可以修改它以发送大文本并使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T03:03:05.370

Nicolas，现在我们已经清楚了：最直接的方法是打开一个套接字来发送您的数据。虽然我相信这对于大多数情况来说有点夸张，但它可能会解决你的问题。

但是请注意，如果您有一个异步场景（即 PC B 的用户不知道 PC A 的用户何时准备好发送数据），那么 PC B（接收方）将不得不保持套接字打开，什么是个坏主意。尝试弄清楚您是否可以“安排”何时发送数据。

看看[这个小教程](http://www.csharp-examples.net/socket-send-receive/)。创建一个新项目只是为了学习如何从套接字发送和接收数据。当您发现任何问题时，请稍微搜索一下。互联网上有很多参考资料，包括 StackOverflow。

希望这可以帮助。

# ant - 如何在 ant 中为 svnkit 使用客户端证书文件？

> ID：11303791
> 
> 赞同：0
> 
> 时间：2012-07-03T02:41:31.277
> 
> 标签：ant, svnkit

我的 svn 管理员要求我们在我们的 Windows 机器上安装一个 pfx 客户端证书文件以进行连接。我试过了，用 TortoiseSVN 连接到 svn 没有问题。

现在我需要编写一个 ant 脚本并在里面使用 svnkit 来签出/更新。如何指定客户端文件？

```
<java classname="org.tmatesoft.svn.cli.SVN" dir="src" fork="true">
            <arg value="co" />
            <arg value="--username" />
            <arg value="xxxxx" />
            <arg value="--password" />
            <arg value="xxxx" />
            <arg
                value="https://123.456.789.123/xxx/xxx" />
            <classpath>
                <pathelement location="lib/antlr-runtime-3.4.jar" />
                <pathelement location="lib/jna-3.4.0.jar" />
                <pathelement location="lib/sequence-library-1.0.2.jar" />
                <pathelement location="lib/sqljet-1.1.3.jar" />
                <pathelement location="lib/svnkit-javahl16-1.7.5.jar" />
                <pathelement location="lib/trilead-ssh2-1.0.0-build215.jar" />
                <pathelement location="lib/svnkit-1.7.5.jar" />
                <pathelement location="lib/svnkit-cli-1.7.5.jar" />
            </classpath>
        </java> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T22:55:57.200

我不知道“pfx 客户端证书文件”是什么，但我假设您在谈论 Java 信任库？

尝试将标准 ssl 属性添加到 Java 程序中，如下所示：

```
<java classname="org.tmatesoft.svn.cli.SVN" dir="src" fork="true">
   <sysproperty key="javax.net.ssl.keyStore" value="client.keystore" />
   <sysproperty key="javax.net.ssl.keyStorePassword" value="123456" />
   <sysproperty key="javax.net.ssl.trustStore" value="client.truststore" />
   <sysproperty key="javax.net.ssl.trustStorePassword" value="123456" /> 
   .. 
```

参考：

*   [JSSE 参考指南](http://docs.oracle.com/javase/6/docs/technotes/guides/security/jsse/JSSERefGuide.html)

# grails - 使用 Realm + RABBIT MQ 进行 Groovy Httpbuilder 身份验证

> ID：11303792
> 
> 赞同：0
> 
> 时间：2012-07-03T02:41:46.017
> 
> 标签：grails, groovy, rabbitmq, httpbuilder

我正在尝试进行rabbitmq http api调用以了解队列的存在方式和其他信息...

我需要 3 个变量才能传递给 api

1) url: (http://localhost:55672/api) 2) username/password: guest/guest 3) realm: "RabbitMQ Management" //我不确定这是否重要 4) path: "/queues"

当我做出 curl 声明时，它给出了积极的回应

`sudo curl -i -u guest:guest (http://localhost:55672)/api/queues HTTP/1.1 200 OK Server: MochiWeb/1.1 WebMachine/1.7 (participate in the frantic) Date: Tue, 03 Jul 2012 01:39:05 GMT Content-Type: application/json Content-Length: 6176 Cache-Control: no-cache`

但是使用来自groovy的httpbuilder。这是代码

```
 def http = new HTTPBuilder("(http://localhost:55672/api)")
    http.auth.basic 'guest','guest'

    http.request(GET) { req ->
        uri.path = '/queues'

        response.success = { resp, reader ->
            assert resp.statusLine.statusCode == 200
            println "Got response: ${resp.statusLine}"
            println "Content-Type: ${resp.headers.'Content-Type'}"
            println reader.json
        }

        response.'404' = { println 'Not found' }
    } 
```

结果我得到“找不到”。我不包括领域，因为我无法在 httpbuilder 中插入“领域”。它只附带 OAuth 但是我需要对 rabbit mq http api 调用使用基本身份验证。

有谁知道如何在 httpbuilder groovy 中包含域名以进行基本身份验证？有没有其他方法。请告诉我！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T11:30:47.387

这行得通吗？

```
def http = new HTTPBuilder( 'http://localhost:55672' )
http.auth.basic 'guest','guest'
http.request(GET) { req ->
    uri.path = '/api/queues'
    response.success = { resp, reader ->
        assert resp.statusLine.statusCode == 200
        println "Got response: ${resp.statusLine}"
        println "Content-Type: ${resp.headers.'Content-Type'}"
        println reader.json
    }
    response.'404' = { println 'Not found' }
} 
```

从您的基本网址中取出大括号和路径，添加`/api`到路径中

# actionscript-3 - Flash AS3 列表中的自定义单元格

> ID：11303795
> 
> 赞同：0
> 
> 时间：2012-07-03T02:42:09.023
> 
> 标签：actionscript-3, flash, list, cell, cellrenderer

我不是 Flash 方面的专家，在这里我需要一些快速帮助，而不需要从头开始学习所有内容。

短篇小说，我必须列出一个列表，其中每个单元格包含一个图像、两个标签和一个按钮。

列表/单元格示例：

* * *

img - 标签 - 标签 - 按钮

* * *

img - 标签 - 标签 - 按钮

* * *

作为一名 Java 程序员，我试图快速学习 Flash 和 AS3 的语法和可视性，但到目前为止还没有成功。我已经相当了解电影剪辑等的基础知识。

我看到了一个关于如何添加列表并添加一些文本的教程。于是我拖入了一个列表，在代码中加入了 list.addItem({label:"hello"}); ，并且工作正常。所以我想如果我双击列表的 MC，我会调整一些东西。在那里，我一直在不同的单元格渲染器等大厅里徘徊。

我现在已经到了输入 CellRenderer_skinUp 或其他东西的程度，并根据自己的喜好对其进行了自定义。完成后，我希望我可以使用 list.addItem(); 并获得我的单元格的空“版本”，带有 img、标签和按钮。但 AS3 需要 addItem 中的输入。从我面向对象的角度来看，我认为我必须创建一个我制作的单元格的对象，但我没有运气。我试图去 var test:CellRenderer = list.listItem; list.addItem(test);

..但没有运气。

这只是为了好玩，但我真的很想完成这项工作，但我不愿意阅读大量的 Flash 和 AS3。我觉得我已经接近了奖品，但是编译器希望在变量 (list.addItem({test:something});) 之后有一个分号。

注意：如果可能，我不希望这样：list.addItem({image:"src",label:"text",label"text",button:"text"}); 嗯..这实际上是我想要的，但我真的很想自定义绘制一切。

有没有人得到我想要做的事情，并对我有任何答案？我是以错误的方式接近这个吗？我已经在互联网上搜索了自定义列表单元，但没有运气。请，这里的任何指导表示赞赏！

性病

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T03:12:35.863

您也可以使用 Datagrid，每列都指向数据源的适当部分（甚至可能是相同的字段，具体取决于您在做什么）。然后，您可以只使用 ImageCell 作为第二和第三列的渲染器。

我认为您只是不了解 Adob​​e 以自己的笨拙的方式代表您将模型与视图分开。您将模型交给视图，然后让开。您可以/应该更改的范围只是告诉它要将数据弹出到哪个渲染器中。

事实上，fl.controls 根本无法让您对它们的工作方式进行太多控制——如果您不完全理解，我不会尝试创建具有任何重要功能的自定义 itemRenderer显示列表是如何工作的，如果您不习惯在调试器中挖掘并找出各种未记录的信息。

有关更多详细信息（在任何人都知道这些工作原理的情况下），请参阅 [http://www.adobe.com/devnet/flash/quickstart/datagrid_pt1.html](http://www.adobe.com/devnet/flash/quickstart/datagrid_pt1.html) http://www.adobe.com/devnet/flash/ quickstart/datagrid_pt2.htmlhttp://www.adobe.com/devnet/flash/quickstart/datagrid_pt3.html [http://www.adobe.com/devnet/flash/quickstart/tilelist_component_as3.html](http://www.adobe.com/devnet/flash/quickstart/tilelist_component_as3.html)

您是否可以选择使用 Flex 框架而不是纯 Flash？它使这种扩展更加令人满意。它更多地针对应用程序开发人员，而 Adob​​e 更多地将 Flash 用户视为设计师。

# php - 在日历上显示工作日

> ID：11303798
> 
> 赞同：0
> 
> 时间：2012-07-03T02:42:48.763
> 
> 标签：php

我有问题。我无法显示工作日。因此，当我单击下一步时，它应该显示下周显示星期一到星期五的星期。当我单击上一个时，它应该在上周的周一至周五显示

这是我的代码

在控制器中

```
 <?php
        public function calendar($dt) {
    //         = date("Y/m/d");
            $beginDate = $dt;
            $endDate = date("Y-m-d", strtotime($dt . "+6 days"));

            $posts = $this->Post->getWeekPosts($beginDate, $endDate);
            $members = $this->Post->PostgetUniqueMembers($posts);
    //        $week = $this->Post->weekNo($beginDate, $endDate);

            $this->set("posts", $posts);
            $this->set("members", $members);
            $this->set("begin", $beginDate);
    //        $this->set("week", $week);
        }

in view

<div id="content">
        <span id="calendar-week">
<!--            <h2> week  <?php echo $week; ?> <?php echo date("F Y", strtotime($begin)) ?> </h2>-->
            <h2> week <?php echo date("F Y", strtotime($begin)) ?> </h2>
            <a href="/cakemgmt/posts/calendar/<?php echo date("Y-m-d", strtotime($begin . "- 6 days")) ?>">Previous</a> | 
            <a href="/cakemgmt/posts/calendar/<?php echo date("Y-m-d", strtotime($begin . "+ 6 days")) ?>">Next</a>
        </span>

        <div id="calendar">
            <table>

                <tr id="calendar-names"><!-- member names -->

                    <td>&nbsp;</td>

                    <?php foreach ($members as $member) { ?>
                        <td><p><?php echo $member ?></p></td>
                    <?php } ?>

                </tr>

                <?php
                foreach ($posts as $key => $post) {
                    ?>
                    <tr>
                        <td class="calendar-background-days"><p class="calendar-days"><?php echo date("D", strtotime($key)) ?></p></td>
                        <?php foreach ($members as $memberKey => $member) { ?>

                            <td class="calendar-background-content">&nbsp;
                                <?php foreach ($post as $contentKey => $content) { ?>
                                    <?php if ($contentKey == $memberKey) { ?>
                                        <?php foreach ($content as $c) { ?>
                                            <p><?php echo $c['Post']['content'] ?></p>
                                        <?php } ?>
                                        <?php
                                    }
                                }
                                ?>
                            </td>
                        <?php } ?>
                    </tr>
                <?php } ?>

            </table>
        </div>

    </div> 
```

在模型中

```
public function getWeekPosts($begin, $end) {

        $res = $this->find("all", array("order" => array('deadline', 'member_id'), "conditions" => "deadline BETWEEN '" . $begin . "' AND '" . $end . "'"));

        $res = $this->formatWeekPosts($begin, $res);

        return $res;
    }

public function formatWeekPosts($begin, $res) {
       $dt = array();

        for ($i = 0; $i < 6; $i++) {
            $dt[] = date("Y-m-d", strtotime($begin . "+ " . $i . " days"));
        }

        $members = array();
        $pastMember = "";

        foreach ($res as $r) {
            if ($pastMember != $r['Post']['member_id']) {
                $members[] = $r['Post']['member_id'];
                $pastMember = $r['Post']['member_id'];
            }
        }

       $posts = array();

        foreach ($dt as $d) {
            foreach ($res as $r) {
                if ($r['Post']['deadline'] == $d) {
                    $posts[$d][] = $r;
                }
            }
        }

       $sortedPosts = array();

        foreach ($members as $member) {
            foreach ($posts as $key => $postDate) {
                foreach ($postDate as $key2 => $p) {
                    if ($p["Post"]['member_id'] == $member) {
                        $sortedPosts[$key][$p["Post"]['member_id']][$key2] = $p;
                    }
                }
            }
        }
        ksort($sortedPosts);

        return $sortedPosts;
    }

public function PostgetUniqueMembers($posts) {
       $members = array();

        foreach ($posts as $post) {
            foreach ($post as $p) {
                $members[$p[key($p)]["Post"]["member_id"]] = $p[key($p)]["Member"]['username'];
            }
        }
        return $members;
    } 
```

# xslt - 与 xsl:value-of 类似，但在元素边界处有空格或点

> ID：11303799
> 
> 赞同：0
> 
> 时间：2012-07-03T02:43:00.447
> 
> 标签：xslt

我敢打赌，有一种聪明、简洁的方法可以做到这一点。

```
<xsl:call-template name="item">
  <xsl:with-param name="name" ><xsl:value-of select="name()" /></xsl:with-param>
  <xsl:with-param name="value"><xsl:value-of select="."      /></xsl:with-param>
</xsl:call-template> 
```

请参阅`xsl:value-of select="."`通常一切都很好。但有时，当我想要一些休息时，当前节点会有孩子并且文本都一起运行：

```
The Right Stuff<line/>Tom Wolfe 
```

或者

```
<title>The Right Stuff</title><author>Tom Wolfe</author> 
```

在这些情况下，我想要在“Stuff”和“Tom”之间有一个空格或点或其他东西。

怎么说呢`xsl:value-of select="." but add a space instead of running node contents together`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T07:47:31.430

首先，永远不要这样写：

```
<xsl:with-param name="name" ><xsl:value-of select="name()" /></xsl:with-param> 
```

当你可以写这个：

```
<xsl:with-param name="name" select="name()" /> 
```

当您只需要一个简单的字符串时，在内存中构建一个临时树不仅冗长，而且效率极低。可悲的是，这个错误似乎变得越来越普遍。

xsl:value-of，当给定一个元素时，提取该元素的字符串值，即文本节点的串联。当人们使用常见且熟悉的标记设计来处理混合内容时，这很方便，其中剥离所有标签会给您留下人类可读的内容。如果 XML 没有被设计为使用这个约定，那么这个字符串值的规则就没那么有用了（这就是为什么在模式感知 XPath 中，除非它是定义为简单内容或混合内容）。

在您的情况下，我建议将元素节点作为参数而不是其字符串值传递，并在调用的模板中使用 apply-templates 来处理元素节点的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T04:28:34.720

当我们使用`<xsl:value-of select="."/>`then 时，它会放置上下文节点以及所有子节点的值。我不认为我们可以简单地添加一个“。” 或文本值之间的“空格”。

然而，我们可以以这样一种方式实现它，即我们遍历这些子节点，从而有机会添加一个“.”。或“空间”。

假设您的 XML 如下所示。

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
     <item>
        <title>The Right Stuff</title><author>Tom Wolfe</author>
     </item>
</root> 
```

然后，您可以使用下面的 XSL 来放置一个“.”。在子节点的值之后。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes" method="xml" />
    <xsl:template match="/">
        <xsl:call-template name="Item">
            <xsl:with-param name="name" select="name()"/>
            <xsl:with-param name="value" select="//item[1]"/>
        </xsl:call-template>
    </xsl:template>

    <xsl:template name="Item">
        <xsl:param name="name" />
        <xsl:param name="value" />
        <xsl:for-each select="$value/*">
            <xsl:value-of select="."/>.
        </xsl:for-each>
    </xsl:template>

</xsl:stylesheet> 
```

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-19T02:47:20.640

每当你需要空格时写下这个：

```
 <xsl:text> </xsl:text> 
```

# ruby-on-rails - 如何找到我的导轨路径？

> ID：11303800
> 
> 赞同：0
> 
> 时间：2012-07-03T02:43:17.323
> 
> 标签：ruby-on-rails, path

我安装了带有 rvm 的 rails 3，今天我尝试添加别名“subl”（来自 Sublime Text 2）以在终端上使用。问题是“subl”命令有效，我认为我弄乱了路径，因为不再找到 rails 命令。如何找到正确的导轨路径并解决此问题？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T03:20:06.620

取决于你的设置。如果您使用的是 rvm，它可能是

```
~/.rvm/gems/<ruby version that you use>/bin/rails 
```

如果您使用的是系统 ruby​​，请查看 ruby​​ 安装位置的 gems 文件夹，并将其添加到路径中。在 windows 上，ruby 安装程序通常将其放入

```
C:\Ruby 
```

或类似的东西。在 Mac 上，默认的系统 ruby​​ 是

```
/usr/bin/ruby 
```

# jquery - jquery数据函数到对象标签

> ID：11303803
> 
> 赞同：0
> 
> 时间：2012-07-03T02:43:28.870
> 
> 标签：jquery, flash, object

我正在将 swfupload 与 jqueryui datepicker 一起使用：

1.  打开日期选择器
2.  关闭或离开日期选择器
3.  单击上传按钮（它是 swf 并且在 html 中显示为`<object>`标记。

该问题仅发生在 IE9 中，这是一个 jquery ui 异常
-> 此日期选择器缺少实例数据。

当我调试它时，问题就出现在这一点上。
-> `return $.data(a,PROP_NAME)`
a 是对象元素，PROP_NAME 只是一个字符串 'datepicker'

当我将其键入 IE7、8 和 chrome 时，它​​们会返回未定义的原因，因为没有名为“datepicker”的数据绑定到该对象。但 IE9 会引发异常。

我做了一些谷歌搜索，找不到任何关于此的讨论。

我正在考虑用跨度覆盖对象元素，当在该跨度中发生单击事件时，动态触发 swf 对象的单击事件..但要做到这一点，我认为我需要一些外部的东西......所以我把它排除在外。。

任何人都知道如何弄清楚，或一些建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T13:39:27.973

我也遇到了完全相同的问题：它发生在使用 jquery-ui datepicker 和[uploadify 时](http://www.uploadify.com/)（它使用 flash，因此使用对象标签）。仅限 IE 9。

正如您已经确定的那样，问题出在 jquery-ui 上。我发现解决此问题的唯一方法是通过删除以下异常代码来修改缩小的 jquery-ui 代码：

throw"缺少此日期选择器的实例数据"

这可以防止 jquery-ui 抛出异常，这意味着 uploadify 可以继续并且不会受到影响。

明显的缺点是：

1.  这是对框架脚本的修改，因此如果将来将新版本或更新版本的 jquery-ui 添加到您的应用程序中，它可能会被无意覆盖（异常代码可能会被重新定位）；和

2.  不再处理异常，即代码不会再抛出错误“缺少此日期选择器的实例数据”，即使它是有效的并且应该“知道”。因此，如果 datepicker 由于其他原因无法正常工作，可能会导致调试问题。

# string - Arduino 问题：String to float 添加两个零而不是正确的整数

> ID：11303807
> 
> 赞同：0
> 
> 时间：2012-07-03T02:43:58.790
> 
> 标签：string, floating-point, arduino

代码片段：

```
Serial.println(sensorString);  //so you can see the captured string
char carray[sensorString.length() + 1]; //determine size of the array
Serial.println(sizeof(carray));
sensorString.toCharArray(carray, sizeof(carray)); //put sensorString into an array
float sensorStringFloat = atoi(carray); //convert the array into an Integer

Serial.println(sensorStringFloat); 
```

Serial.println(sensorStringFloat) 打印出 5.00 而不是正确的浮点值 5.33。为什么会这样，我该如何解决这个问题？我最终想将 sensorStringFloat 传递给：

```
aJson.addNumberToObject(sensor, "ph", sensorStringFloat); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T12:56:35.520

atoi 将 ASCII 中的数字转换为整数。该行的注释还说它转换为整数。所以你得到了一个整数结果，5。要转换为浮点数，请考虑使用 atof。（请注意，“f”代表浮点，而不是“float”。atof 返回一个双精度值。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T12:47:19.097

您应该传递另一个定义格式的参数，在这种情况下，它是浮点数之后的位数。

```
Serial.println(sensorString,2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-09T03:59:34.137

`String temp = String (_float, 0);`

`say float x;`

使用转换为字符串 `String _temp = String(x, 0);`

第二个参数 0... 表示我不想要尾随零。

注意：但是这仅适用于整数。此解决方案不适用于... 1.24 你只会得到 1。

# jquery - 具有 .bind 点击功能的 jQuery 窗口调整大小

> ID：11303809
> 
> 赞同：0
> 
> 时间：2012-07-03T02:44:17.340
> 
> 标签：jquery, syntax, if-statement, window-resize

我将平滑滚动重新用于锚定脚本，并且我的网站正在尝试练习响应式网页设计。当浏览器宽度大于 900 像素时，我发现自己需要仅单击事件功能。

```
$(function() {
    if($(window).width() > 900){
        $('article').bind('click',function(event){
            stuffHappens;
        });
    }
}); 
```

我也尝试过使用 window .resize 函数，但结果非常错误。最终结果需要在加载时工作，并检查浏览器调整大小*（以防它需要启用或禁用）*。建议？

```
$(window).resize(function() {
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T02:20:22.853

非常感谢@Conner 指向[jQuery 调整大小功能的链接在页面加载时不起作用](https://stackoverflow.com/questions/2597152/jquery-window-resize-doesnt-work-on-load)

使用该代码，我能够启动此脚本，以便在单击时平滑滚动到任何文章元素，但前提是窗口宽度大于 900！完美的。

```
onResize = function() {
    if($(window).width() > 900){
        $('article').bind('click',function(event){
            var $myPos = $(this);

            $('html, body').stop().animate({
                scrollLeft: $($myPos).offset().left -0
            }, 500, 'easeInOutExpo');
            event.preventDefault();
        });
    }
    else{
        $('article').unbind('click');
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T03:39:53.793

我想你正在寻找的是

```
<html>
    <head>
        <link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/themes/redmond/jquery-ui.css" />
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.js"></script>
    </head>
    <body>
        <div class="clickme">Click Me</div>
    </body>
    <script>
        $(document).ready(function(){
            var handler = function(){
                console.log("clicked");
            };
            var $window = $(window);

            var setClickHandler = function(){
                if($window.width() > 900){
                    var registered = false;
                    var events = $(".clickme").data("events");
                    if(events){
                        var handlers = $(".clickme").data("events").click;
                        if(handlers){
                            $.each(handlers, function(index, e){
                                if(e.handler == handler){
                                    registered = true;
                                }
                            });
                        }
                    }
                    if(!registered){
                        $(".clickme").on("click", handler );
                    }
                } else {
                    $(".clickme").off("click", handler );
                }
            };

            setClickHandler();
            $window.on("resize", setClickHandler);
        });
    </script>
</html> 
```

它看起来有点复杂，但这是我能想到的最好的。
这里我们根据窗口宽度注册和注销处理程序。

另一个简单的解决方案是检查处理程序中的条件

```
 $(document).ready(function(){
            var handler = function(){
                if($window.width() > 900){
                    console.log("clicked");
                }
            };
            var $window = $(window);

            $(".clickme").on("click", handler );
        }); 
```

# javascript - Javascript 生成的 SVG 未更新

> ID：11303813
> 
> 赞同：4
> 
> 时间：2012-07-03T02:44:50.850
> 
> 标签：javascript, jquery, svg

我有一个通过 jQuery 向内联 SVG 图像添加元素的脚本，但新元素似乎没有出现。输出完全有效；我可以将它复制到原始文件中，重新加载它，它会渲染得很好。但是当脚本生成它时，新元素是不可见的。

这是一个复制问题的片段：http: [//tinkerbin.com/7OmDWlsz](http://tinkerbin.com/7OmDWlsz)

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T08:00:53.980

如果元素不在 svg 命名空间中，您将看不到任何 svg 输出。

尝试用这个替换你的脚本片段：

```
var slices = 10;

for(i = 0; i < 360; i += 360 / slices) {
  var element = document.createElementNS("http://www.w3.org/2000/svg", "polyline");
  element.setAttribute("points", "0,0 -10,100 10,100");
  element.setAttribute("transform", "rotate(" + i + ")");
  $('#rotate').append(element);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-14T15:31:52.273

非常感谢@Erik Dahlström，我可能会对此有所贡献。这是我为构建 svg 树而定义的函数：

```
Node.prototype.svg_grow = function(node_name, node_attr) {
    n = document.createElementNS("http://www.w3.org/2000/svg", node_name);
    this.appendChild(n);
    if (typeof node_attr !== 'undefined') {
        for (key in node_attr) {
            n.setAttribute(key, node_attr[key]);
        }
    }
    return n;
} 
```

所以你可以`svg_grow()`像这样在任何节点上使用：

```
s_g = document.getElementById("parent");
s_rect = s_g.svg_grow('rect', {x:0, y:0, width:480, height:640}); 
```

这只是做：

```
<g id="parent">
    <rect x="0" y="0" width="480" height="640" />
</g> 
```

# python - Django中具有多对多字段的转储数据

> ID：11303817
> 
> 赞同：4
> 
> 时间：2012-07-03T02:45:33.660
> 
> 标签：python, django

我正在运行一个命令将我的数据库内容转储为 json 格式：

`python manage.py dumpdata <appname>.<modelname> > file.json`

但是，它并没有转储我的多对多字段，即`category_id`. 事实上，它正在倾倒它，但该领域始终是空的。为什么？？

我曾尝试直接调用该表（这是一个类别映射），如下所示：

`python manage.py dumpdata <appname>.<modelname_category_id> > file.json`

我收到以下错误：

`Error: Unable to serialize database: Category matching query does not exist.`

我正在使用 Django 1.2.1 和 SQLite 后端。

有什么提示吗？

更新：我尝试删除 modelname.category_id 表中的所有行，即使只有一行我仍然会收到此错误。

该表定义如下 id: integer PRIMARY KEY unipart_id: integer category_id: integer

并且 unipart_id 和 category_id 字段都有效且存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-12-04T08:31:02.857

我有两张如下表，

```
from django.db import models

class AggregationCategories(models.Model):
    name = models.CharField(max_length=50)

    class Meta:
        db_table = "AggregationCategories"

class AggregationFunctions(models.Model):
    name = models.CharField(max_length=50)
    aggregation_category = models.ManyToManyField(
        AggregationCategories,
        related_name='aggregationfunctions_aggregationcategories'
    )

    class Meta:
        db_table = "AggregationFunctions" 
```

当您创建多对多关系时，您将获得额外的表结构`<model name>_<filed name>`。所以根据我的例子`model name`is`AggregationFunctions`和`field name`is `aggregation_category`。基于此，我的附加表应该是`AggregationFunctions_aggregation_category`. 是的，您可以在下图中看到所有三个表格。

[![在此处输入图像描述](../Images/f85d3db51dc71de5ca7735d7136e922a.png)](https://i.stack.imgur.com/LwK4H.png)

因此，您可以像这样将数据转储到第三个表中，`python manage.py dumpdata <app name>.<third table name>`. 所以 my `app name`is`catalogue`和 the `third table name`is `AggregationFunctions_aggregation_category`。基于此，我的命令应该是，

```
python manage.py dumpdata catalogue.AggregationFunctions_aggregation_category 
```

* * *

如果你已经使用[ManyToManyField.through](https://docs.djangoproject.com/en/3.1/ref/models/fields/#django.db.models.ManyToManyField.through)、[ManyToManyField.through_fields](https://docs.djangoproject.com/en/3.1/ref/models/fields/#django.db.models.ManyToManyField.through_fields)创建了多对多表，例如（直接取自 Django 官方[文档](https://docs.djangoproject.com/en/3.1/ref/models/fields/#django.db.models.ManyToManyField.through_fields)），

```
from django.db import models

class Person(models.Model):
    name = models.CharField(max_length=50)

class Group(models.Model):
    name = models.CharField(max_length=128)
    members = models.ManyToManyField(
        Person,
        through='Membership',
        through_fields=('group', 'person'),
    )

class Membership(models.Model):
    group = models.ForeignKey(Group, on_delete=models.CASCADE)
    person = models.ForeignKey(Person, on_delete=models.CASCADE)
    inviter = models.ForeignKey(
        Person,
        on_delete=models.CASCADE,
        related_name="membership_invites",
    )
    invite_reason = models.CharField(max_length=64) 
```

现在你有一个`Membership`多对多关系的类调用，所以你可以像以前一样使用它，

```
python manage.py dumpdata catalogue.Membership 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-11T00:33:16.837

我的解决方案：

```
appname.modelname_id_category 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T10:29:09.403

可能是因为您在 Category 中的外键未填写在某些行中，请查看此网站：[http](http://wiki.ddenis.com/index.php?title=Django._Error:_Unable_to_serialize_database:_) ://wiki.ddenis.com/index.php?title=Django._Error:_Unable_to_serialize_database:_ *_matching_query_does_not_exist。

# grails - Grails - 如何将值列表传递给域类

> ID：11303820
> 
> 赞同：0
> 
> 时间：2012-07-03T02:46:16.500
> 
> 标签：grails, dns

我正在尝试使用 Grails 实现以下 SQL。

```
“Select * from table1 where col1=’COL1’ and col2  in(‘COL2_1’,’COL2_2’,….) and col3=1” 
```

我可以获得 col2 地图，但不确定如何将此地图传递给 table1 域

我尝试这样的事情

```
table1.findAllWhere(col1:'COL1', col2 :modelMap.COl2, col3:1) 
```

哪个返回null。

感谢您对此的任何帮助

谢谢巴拉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T03:21:19.927

您可以为此使用 HQL，几乎可以直接翻译：

```
Map params = [col1: 'COL1', col2List: ['COL2_1', 'COL2_2', 'COL2_3'], col3: '1']

TableOne.executeQuery("""
    select t1 
    from TableOne t1 
    where t1.col1 = :col1 and t1.col2 in (:col2List) and t1.col3 = :col3
""", params) 
```

# java - 异常处理错误：使用 Java？

> ID：11303825
> 
> 赞同：1
> 
> 时间：2012-07-03T02:47:04.003
> 
> 标签：java, exception-handling

假设您必须使用软件供应商提供的 Connection 类中的方法。该文档指示以下方法声明：

```
public String getData(String command) throws IOException 
```

以下代码尝试使用 getData 方法获取 String 格式的数据并将数据输出到输出控制台。但是 IDE 表明代码有异常处理相关的错误。

```
public void processData(Connection conn, String command) {
  String res = conn.getData(command);
  System.out.println(res);
} 
```

如何修复错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T02:49:54.253

简单的方法是简单地告诉 Java 这段代码可以抛出异常：

```
public void processData(Connection conn, String command) throws IOException {
  String res = conn.getData(command);
  System.out.println(res);
} 
```

但是您也可以自己捕获异常：

```
public void processData(Connection conn, String command) {
  try {
    String res = conn.getData(command);
    System.out.println(res);
  } catch(IOException e) {
    e.printStackTrace();
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T03:29:48.307

您基本上有两个不错的选择：

**选择1：**
如果你能合理处理异常，那么就这样做：

```
try {
    String res = conn.getData(command);
} catch (IOException e) {
    // do something sensible, perhaps return null or a default value etc
} 
```

如果有意义，这通常是一个不错的选择，因为它不会给调用者带来任何处理异常的负担

**选择 2：**
如果您无法合理处理异常，请让您的方法抛出异常。这里的设计问题是你抛出*什么*异常？

如果异常“非常适合”您的代码的其余部分，只需声明您的方法以抛出来自 3rd 方库的预期异常：

```
public void processData(Connection conn, String command) throws IOException 
```

但是，通常在调用 3rd 方库时，它抛出的异常与您的应用程序不兼容。在您的情况下，`IOException`可能完全在您的应用程序的域之外，仅因为第 3 方的实现访问远程服务器（例如）而抛出，并且抛出`IOException`会在您的代码中引入一个新异常，该异常与它的目的（例如，您的应用程序可能与使用远程服务器无关）。

在这些情况下，最好将异常*包装*在域异常中并抛出它。例如：

```
public void processData(Connection conn, String command) throws ProcessingException
    try {
        String res = conn.getData(command);
    } catch (IOException e) {
        throw new ProcessingException(e);
    }
} 
```

为此，您将创建这样一个异常类：

```
public class ProcessingException extends Exception {} 
```

现在你有了更多的选择。如果预计不会发生异常，换句话说，您已采取合理措施确保它不会发生（通过确保环境正确等），您可以选择抛出未经检查的异常：

```
public void processData(Connection conn, String command)
    try {
        String res = conn.getData(command);
    } catch (IOException e) {
        throw new RuntimeException(e);
    }
} 
```

这个版本基本上是在说这个异常不是预期的，我们不会为它编写代码，因为这种情况在任何级别都无法恢复，所以让它爆炸，它会在调用堆栈中冒泡，直到出现问题抓住`Exception`。

这不是“反模式”，因为它与`NullPointerException`所有其他常见的未经检查的异常并列，我们也没有捕捉到这些异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T02:51:17.287

捕获异常（如果您知道如何正确处理异常）：

```
try {
    String res = conn.getData(command);
    System.out.println(res);
} catch (IOException e) {
    // handle it
} 
```

或者，在此方法上放置一个异常规范：

```
public void processData(Connection conn, String command) throws IOException 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T03:03:08.803

# ☠☠☠☠☠☠☠☠☠☠☠☠☠☠☠☠☠☠☠</h1>

## 不要做它的反模式！

# ☠☠☠☠☠☠☠☠☠☠☠☠☠☠☠☠☠☠☠</h1>

```
try {
    String res = conn.getData(command);
    System.out.println(res);
} catch (IOException e) {
    throw new RuntimeException(e);
} 
```

# opencv - 架构 x86_64 的未定义符号：“_cvHaarDetectObjects”Eclipse

> ID：11303826
> 
> 赞同：4
> 
> 时间：2012-07-03T02:47:08.357
> 
> 标签：opencv, face-detection, classification

我正在尝试构建以下示例代码：

```
#include "cv.h"
#include "highgui.h"

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <assert.h>
#include <math.h>
#include <float.h>
#include <limits.h>
#include <time.h>
#include <ctype.h>

// Create a string that contains the exact cascade name
const char* cascade_name = "/usr/share/src/OpenCV-2.3.1/data/haarcascades/haarcascade_frontalface_alt.xml";
 //   "C:/Program Files/OpenCV/data/haarcascades/haarcascade_frontalface_alt.xml";
/*    "haarcascade_profileface.xml";*/

// Function prototype for detecting and drawing an object from an image
void detect_and_draw( IplImage* image );

// Main function, defines the entry point for the program.
int main( int argc, char** argv )
{

    // Create a sample image
    IplImage *img = cvLoadImage("1.pgm");

    // Call the function to detect and draw the face positions
    detect_and_draw(img);

    // Wait for user input before quitting the program
    cvWaitKey();

    // Release the image
    cvReleaseImage(&img);

    // Destroy the window previously created with filename: "result"
    cvDestroyWindow("result");

    // return 0 to indicate successfull execution of the program
    return 0;
}

// Function to detect and draw any faces that is present in an image
void detect_and_draw( IplImage* img )
{

    // Create memory for calculations
    static CvMemStorage* storage = 0;

    // Create a new Haar classifier
    static CvHaarClassifierCascade* cascade = 0;

    int scale = 1;

    // Create a new image based on the input image
    IplImage* temp = cvCreateImage( cvSize(img->width/scale,img->height/scale), 8, 3 );

    // Create two points to represent the face locations
    CvPoint pt1, pt2;
    int i;

    // Load the HaarClassifierCascade
    cascade = (CvHaarClassifierCascade*)cvLoad( cascade_name, 0, 0, 0 );

    // Check whether the cascade has loaded successfully. Else report and error and quit
    if( !cascade )
    {
        fprintf( stderr, "ERROR: Could not load classifier cascade\n" );
        return;
    }

    // Allocate the memory storage
    storage = cvCreateMemStorage(0);

    // Create a new named window with title: result
    cvNamedWindow( "result", 1 );

    // Clear the memory storage which was used before
    cvClearMemStorage( storage );

    // Find whether the cascade is loaded, to find the faces. If yes, then:
    if( cascade )
    {

        // There can be more than one face in an image. So create a growable sequence of faces.
        // Detect the objects and store them in the sequence
        CvSeq* faces = cvHaarDetectObjects( img, cascade, storage,
                                            1.1, 2, CV_HAAR_DO_CANNY_PRUNING,
                                            cvSize(40, 40) );

        // Loop the number of faces found.
        for( i = 0; i < (faces ? faces->total : 0); i++ )
        {
           // Create a new rectangle for drawing the face
            CvRect* r = (CvRect*)cvGetSeqElem( faces, i );

            // Find the dimensions of the face,and scale it if necessary
            pt1.x = r->x*scale;
            pt2.x = (r->x+r->width)*scale;
            pt1.y = r->y*scale;
            pt2.y = (r->y+r->height)*scale;

            // Draw the rectangle in the input image
            cvRectangle( img, pt1, pt2, CV_RGB(255,0,0), 3, 8, 0 );
        }
    }

    // Show the image in the window named "result"
    cvShowImage( "result", img );

    // Release the temp image created.
    cvReleaseImage( &temp );
} 
```

并且路径 /usr/share/src.... 是 xml 文件所在的正确路径。我已将 opencv 库：opencv_core、opencv_imgproc、opencv_highgui 和 opencv_video 链接到 eclipse（我认为它们是正确链接的，因为我以这种方式构建了其他 opencv 项目）。但是 Eclipse 不断抛出以下错误：

```
Invoking: MacOS X C++ Linker
g++ -L/usr/local/include/opencv -L/usr/local/include/opencv2 -L/usr/local/lib -o "OpenCVFace"  ./main.o   -lopencv_core -lopencv_highgui -lopencv_video -lopencv_imgproc
Undefined symbols for architecture x86_64:
  "_cvHaarDetectObjects", referenced from:
      detect_and_draw(_IplImage*)     in main.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status
make: *** [OpenCVFace] Error 1

**** Build Finished **** 
```

我可以看到 cvHaarDetectObjects 函数在 Eclipse 中突出显示（变为紫色）。关于如何解决问题的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T02:57:15.987

您需要链接到`opencv_objdetect`；包括`-lopencv_objdetect`在链接标志中。

# iphone - 如何将动画图像保存到 iPhone 的相册？

> ID：11303829
> 
> 赞同：0
> 
> 时间：2012-07-03T02:47:55.417
> 
> 标签：iphone, uiimage

我创建了一个动画图像，它在 UIImageView 中正确动画：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    UIImage *image1 = [UIImage imageNamed:@"apress_logo"];
    UIImage *image2 = [UIImage imageNamed:@"Icon"];
    UIImage *animationImage = [UIImage animatedImageWithImages:[NSArray arrayWithObjects:image1, image2, nil] duration:0.5];
    UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(100, 100, 100, 100)];
    imageView.image = animationImage;
    [self.view addSubview:imageView];
} 
```

但如果保存到相册，它就不能为 agian 设置动画：

```
UIImageWriteToSavedPhotosAlbum(animationImage, 
                               self,
                               @selector(imageSavedToPhotosAlbum:didFinishSavingWithError:contextInfo:),
                               nil); 
```

那么有什么解决方案可以将动画图像保存到相册吗？

特别感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T02:55:26.340

相册也是一个应用程序，就像您正在制作的一样。除了为您编写相应代码的图像设置动画之外，

```
UIImage *animationImage = [UIImage animatedImageWithImages:[NSArray arrayWithObjects:image1, image2, nil] duration:0.5];
    UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(100, 100, 100, 100)];
    imageView.image = animationImage; 
```

但是您假设您的图片也会在您的相册应用程序中以类似的方式处理。那么不，那不是真的。在相册应用程序中，应用程序可能只是从磁盘读取图像，然后在 UIImageView 中显示，没有任何动画“因为没有动画代码”:)

这为创建带有动画图像的相册创造了机会。

* * *

我见过像 Quartz Composer 这样的程序从多个图像创建 .mov 文件并为其创建动画。但那是苹果专业打造的。现在，我说是因为我认为使用 API 创建 .mov 是可能的，但您可能需要更深入地挖掘，因为我不知道如何去做。

我能找到的最接近的参考是：

[http://www.cimgf.com/2008/09/10/core-animation-tutorial-rendering-quicktime-movies-in-a-caopengllayer/](http://www.cimgf.com/2008/09/10/core-animation-tutorial-rendering-quicktime-movies-in-a-caopengllayer/)

# android - android ICS：用于保存浏览器密码的数据库？

> ID：11303831
> 
> 赞同：1
> 
> 时间：2012-07-03T02:48:39.550
> 
> 标签：android, passwords

在 Android ICS 中，浏览器应用程序将用户名和密码存储在哪里。例如，如果我登录 gmail，浏览器会询问是否应记住密码。我知道 /data/data/com.android.browser/ 下有一个数据库文件夹，它存储用于自动填充和 cookie 的数据库。密码是否也存储在这些数据库之一中？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T03:54:28.620

我没有方便测试的 ICS，但 Jellybean 模拟器将网站密码以*纯文本*形式存储在文件中

/data/data/com.android.browser/databases/webview.db

然而，这可能并不代表设备上会发生什么 - 一方面，您可能会获得 Chrome 的移动版本而不是传统的 android 浏览器？

可能还支持基于令牌的身份验证，其中应用程序可能实际上并不知道密码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T03:00:04.977

出于明显的安全原因，默认的 Android 浏览器将其数据存储在其他第三方应用程序无法访问的私有沙箱/文件夹中。[**每个应用程序都有自己的缓存、cookie 存储等。您可以在此处**](http://developer.android.com/reference/android/webkit/WebView.html)阅读有关 Cookie 管理的更多信息（向下滚动）。

# php - 将某些键/值推入现有数组

> ID：11303833
> 
> 赞同：0
> 
> 时间：2012-07-03T02:48:45.167
> 
> 标签：php, arrays, multidimensional-array, push

我正在尝试将数据放入`from`：

```
[comments] => Array
    (
        [count] => 2
        [data] => Array
            (
                [0] => Array
                    (
                        [idcomments] => 1
                        [from] => Array
                               (
                                    [idusers] => 1
                                    [username] => 
                                    [full_name] => AndrewLiu
                               )
                        [text] => testing this comment out
                   )
                [1] => Array
                    (
                        [idcomments] => 2
                        [from] => Array
                            (
                                [idusers] => 1
                                [username] => 
                                [full_name] => AndrewLiu
                            )
                        [text] => more comments yeah
                    )
            )
    ) 
```

我有这样的事情：

```
while($row = $SQL_products -> fetch(PDO::FETCH_ASSOC)){
    $json['data'][] = array(
        "comments" =>array(
            "count"=>$SQL_ccount[0],
            "data" => array($SQL_comments->fetchAll(PDO::FETCH_ASSOC),
            "from" => array($SQL_comments_from->fetchAll(PDO::FETCH_ASSOC)))
        ),
    );
} 
```

但它不属于`from`. 不知道像上面的例子那样正确`$SQL_comments_from`的语法是什么。`data`

这就是我得到的

```
[comments] => Array
    (
        [count] => 2
        [data] => Array
            (
                [0] => Array
                    (
                        [0] => Array
                            (
                                [idcomments] => 1
                                [from] => 1
                                [text] => testing this comment out
                            )
                        [1] => Array
                            (
                                [idcomments] => 2
                                [from] => 2
                                [text] => more comments yeah
                            )
                    )
                [from] => Array
                    (
                        [0] => Array
                            (
                                [idusers] => 1
                                [username] => 
                                [full_name] => AndrewLiu
                            )
                    )
            )
    ) 
```

我正在尝试`"from"`进入`"data"`. 我提供的示例不会使“发件人”进入另一个“发件人”（就在 idcomments 下）

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T03:23:55.733

您的数据字段使用来自`SQL_comments_from`并`$SQL_comments_from`混合在一起的数据，这应该会生成您想要的内容。

```
while($row = $SQL_products -> fetch(PDO::FETCH_ASSOC)){
    $from = $SQL_comments_from->fetchAll(PDO::FETCH_ASSOC);
    $data= array();
    foreach ($SQL_comments->fetchAll(PDO::FETCH_ASSOC as $items){
        $data[] = array('idcomments' => $items['idcomments'], 'from' => $from[$items['from']], 'text' => $items['text']);
    }
    $json['comments'][] = array(
            "count"=>$SQL_ccount[0],
            "data" => $data;
            )
        ),
    );

} 
```

# entity-framework - 如何从传入的实体对象更新 Db

> ID：11303837
> 
> 赞同：0
> 
> 时间：2012-07-03T02:49:38.413
> 
> 标签：entity-framework, savechanges

我有一个 OrderDetail 记录列表，我从中添加、更新和删除了项目。我需要能够将此实体对象传递到另一层以保存更改。

我怎样才能做到这一点？在将列表传递到下一层之前，我是否需要将列表从它的当前上下文中分离出来？然后将它附加到该层的上下文？

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T07:31:14.257

在对象传入的层中，您将指示对象已被修改

```
 context.Entry(YourOrderDetailObject).State = EntityState.Modified;
 context.SaveChanges(); 
```

# javascript - 为什么这个淘汰方法接收一个表单元素而不是它嵌套的对象？

> ID：11303840
> 
> 赞同：2
> 
> 时间：2012-07-03T02:49:57.433
> 
> 标签：javascript, knockout.js

我有这个 HTML：

```
<ul class="chat_list" data-bind="foreach: chats">
  <li>
    <div class="chat_response" data-bind="visible: CommentList().length == 0">
      <form data-bind="submit: $root.addComment">
        <input class="comment_field" placeholder="Comment…" 
          data-bind="value: NewCommentText" 
        />
      </form>
    </div>            
  </li>
</ul> 
```

和这个JavaScript：

```
function ChatListViewModel(chats) {

   // var self = this;

    self.chats = ko.observableArray(ko.utils.arrayMap(chats, function (chat) {
        return { CourseItemDescription: chat.CourseItemDescription,
            CommentList: ko.observableArray(chat.CommentList),
            CourseItemID: chat.CourseItemID,
            UserName: chat.UserName,
            ChatGroupNumber: chat.ChatGroupNumber,
            ChatCount: chat.ChatCount,
            NewCommentText: ko.observable("")
        };
    }));

    self.newChatText = ko.observable();

    self.addComment = function (chat) {
        var newComment = { CourseItemDescription: chat.NewCommentText(),
            ParentCourseItemID: chat.CourseItemID,
            CourseID: $.CourseLogic.dataitem.CourseID,
            AccountID: $.CourseLogic.dataitem.AccountID,
            SystemObjectID: $.CourseLogic.dataitem.CommentSystemObjectID,
            SystemObjectName: "Comments",
            UserName: chat.UserName
        };
        chat.CommentList.push(newComment);
        chat.NewCommentText("");
    };
}
ko.applyBindings(new ChatListViewModel(initialData)); 
```

当我进入调试器时，它显示函数的`chat`参数`addComment()`是表单元素而不是聊天对象。

为什么会这样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T02:54:05.290

这是设计使然。来自[Knockout.js 文档](http://knockoutjs.com/documentation/submit-binding.html)：

> 如本例所示，KO 将表单元素作为参数传递给您的提交处理函数。如果需要，您可以忽略该参数，但有关何时引用该元素很有用的示例，请参阅[ko.postJson 实用程序](http://knockoutjs.com/documentation/post-json.html)的文档。

正如[Serjio](https://stackoverflow.com/a/11303901/11702)所指出的，您可以使用 currying 将其他参数传递到函数中，或者您可以使用[Knockout 的 Unobtrusive Event Processing](http://knockoutjs.com/documentation/unobtrusive-event-handling.html)，它允许您获取与表单元素关联的整个上下文。

```
self.addComment = function (form) {
    var context = ko.contextFor(form);
    var chat = context.$data;

    //rest of your method here
}; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-03T02:59:34.850

因为KO行为。要将聊天变量传递给提交处理程序，您可以使用：

```
<ul class="chat_list" data-bind="foreach: chats">
    <li>
        <div class="chat_response" data-bind="visible: CommentList().length == 0">
            <form data-bind="submit: function(form){$root.addComment($data, form)}">
                <input class="comment_field" placeholder="Comment…" data-bind="value: NewCommentText" />
            </form>
        </div>            
    </li>
</ul> 
```

# android - 如何获取滚动视图的整个尺寸以了解我必须滚动多少

> ID：11303842
> 
> 赞同：2
> 
> 时间：2012-07-03T02:50:11.350
> 
> 标签：android, width, scrollview, measurement

我正在尝试确定是否必须滚动（以及滚动多少）我的标签以显示其他人，如果它们不完整。为了实现这一点，我需要知道我的 TabHost（在 Horizo​​ntalScrollView 内）有多少在屏幕之外（以像素为单位）。

直到现在我已经尝试过

```
 int totalLength = 0, totalLength1 = 0;
        for(int i =0; i<mTabHost.getChildCount(); i++){
            try {
                totalLength += mTabHost.getChildAt(i).getWidth();
                totalLength1+= mTabHost.getChildAt(i).getLayoutParams().width;
            } catch (Exception e) {
                toast("ERROR: "+i);
                e.printStackTrace();
            }
        } 
```

但它返回的宽度与屏幕宽度一样多，而不是一个像素。 `mScrollView.getWidth()`超过它时也会返回我的屏幕宽度。 `mScrollView.getMeasureWidth()`也不行。

我做了一些研究，但到目前为止，我发现的只是一个叫做`mScrollview.getMaxSCrollAmmout()`; 但我很难弄清楚它是如何工作的

**编辑：** `mScrollview.getMaxSCrollAmmout()`也没有用。

**编辑 2：**看起来该操作与 ViewPagerIndicator 所做的非常相似，如果有人熟悉源代码可能会向我解释：D

# python - Python中枚举串口（包括虚拟端口）的跨平台方法是什么？

> ID：11303850
> 
> 赞同：31
> 
> 时间：2012-07-03T02:51:18.270
> 
> 标签：python, cross-platform, serial-port, python-2.7, pyserial

**注意：**我使用 Python 2.7 和 pySerial 进行串行通信。

我发现这篇文章列出了两种方式：[http ://www.zaber.com/wiki/Software/Python#Displaying_a_list_of_available_serial_ports](http://www.zaber.com/wiki/Software/Python#Displaying_a_list_of_available_serial_ports)

此方法适用于 Windows 和 Linux，但有时会错过 Linux 上的虚拟端口：

```
import serial

def scan():
   # scan for available ports. return a list of tuples (num, name)
   available = []
   for i in range(256):
       try:
           s = serial.Serial(i)
           available.append( (i, s.portstr))
           s.close()
       except serial.SerialException:
           pass
   return available

print "Found ports:"
for n,s in scan(): print "(%d) %s" % (n,s) 
```

而这个仅适用于 Linux，但包括虚拟端口：

```
import serial, glob

def scan():
   # scan for available ports. return a list of device names.
   return glob.glob('/dev/ttyS*') + glob.glob('/dev/ttyUSB*')

print "Found ports:"
for name in scan(): print name 
```

我想我可以在 Linux 上运行时使用第二种方法（包括虚拟端口的方法）进行平台检测，在运行 Windows 时使用第一种方法，但是 Mac 呢？

无论平台如何，我应该如何枚举串行端口（也是虚拟的）？

**编辑**

我发现了一些相关的问题：

*   [MacPython：以编程方式查找所有串行端口](https://stackoverflow.com/questions/1659283/macpython-programmatically-finding-all-serial-ports)
*   [MacOS：/dev/tty.* 和 /dev/cu.* 有什么区别？](https://stackoverflow.com/questions/8632586/macos-whats-the-difference-between-dev-tty-and-dev-cu)
*   [如何在不打开 Linux 的情况下找到所有串行设备（ttyS、ttyUSB、..）？](https://stackoverflow.com/questions/2530096/how-to-find-all-serial-devices-ttys-ttyusb-on-linux-without-opening-them)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T15:39:24.463

这是我一直在使用的。这是我上面发布的方法的混搭。不过，我仍然希望看到更好的解决方案。

```
# A function that tries to list serial ports on most common platforms
def list_serial_ports():
    system_name = platform.system()
    if system_name == "Windows":
        # Scan for available ports.
        available = []
        for i in range(256):
            try:
                s = serial.Serial(i)
                available.append(i)
                s.close()
            except serial.SerialException:
                pass
        return available
    elif system_name == "Darwin":
        # Mac
        return glob.glob('/dev/tty*') + glob.glob('/dev/cu*')
    else:
        # Assume Linux or something else
        return glob.glob('/dev/ttyS*') + glob.glob('/dev/ttyUSB*') 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-21T10:23:15.360

[bitpim](http://bitpim.sourceforge.net/)在多个平台上有相当多的 comscan 代码。从那里获取一些代码以构建跨平台串行端口枚举器可能很有用。您可以直接在命令行中运行检测代码进行测试。

[链接到源文件 comscan.py](http://bitpim.svn.sourceforge.net/viewvc/bitpim/trunk/bitpim/src/comscan.py?revision=4835&view=markup)。

在 Linux 中，它似乎没有检测到“/dev/ttyS”端口。在 #378 行下方添加以下行：

```
("/dev/ttyS", "Standard Serial Port", "serial"), 
```

作者使为串行端口添加不同类型的标识符变得容易。

在 Mac 中，它工作得很好。（有一个 Arduino 方便测试）

在 Windows 中，它成功检测到连接的端口（用于连接的 FTDI 连接器）。需要[pywin32](http://pywin32.sourceforge.net/)。

使用[pyserial](http://pyserial.sourceforge.net/)，我尝试了以下操作：

`python -m serial.tools.list_ports`

似乎不适用于 Windows。在 Mac 上工作。在 Linux 上工作。

有趣的是查看[此命令文档中](http://pyserial.sourceforge.net/pyserial_api.html#module-serial.tools.list_ports)的平台部分：

```
Platform :  Posix (/dev files)
Platform :  Linux (/dev files, sysfs and lsusb)
Platform :  Windows (setupapi, registry) 
```

我认为将两者结合起来应该可以提供（几乎）100% 可靠的通信端口枚举器。

**编辑**：在 Python 2.7 中尝试了以上所有方法。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-03T20:16:43.823

pyserial 函数[serial.tools.list_ports](http://pyserial.sourceforge.net/pyserial_api.html#module-serial.tools.list_ports)是否给您想要的？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T19:53:57.387

我不知道你是否还在寻找这个问题的答案，但由于我有一个可行的解决方案，我想我会发布它。这是我的 Arduino 数据记录器项目中[的 getports 包。](https://bitbucket.org/abe_k/arduino-data-logger/src/tip/datalogger/getports)我已经测试过它可以在 Mac、至少某些版本的 Linux 和 Windows 7 上运行。与 bitpim 的 comscan 不同，它不使用任何非标准库中的模块。此外，它在 Linux 或 Mac 上不使用`/dev`通配符，因此重命名规则应该不是问题。（在 Linux 上它使用 sysfs，在 Mac 上它使用 IOKit。）我不知道它是否检测到 Linux 上的虚拟串行端口，但如果没有，请尝试替换

```
sys_suffix = '/device/' 
```

和

```
sys_suffix = '' 
```

在`linuxgetports.py`

# android - AlarmManager 是否适合编写时钟小部件？

> ID：11303851
> 
> 赞同：2
> 
> 时间：2012-07-03T02:51:22.940
> 
> 标签：android, alarmmanager, clock

我想在 Android 上编写自己的时钟小部件。我正在使用我自己的图标来显示时间（即，每秒更新一次 ImageView）。我找到了一种使用 AlarmManager 处理更新的方法并实现了它，但我注意到该应用程序正在快速耗尽我的电池，我猜这是因为频繁更新。

有没有更有效的更新方法？

感谢你的帮助。

谢谢和问候，帕特里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-27T15:28:59.180

频繁更新小部件的电池消耗可能来自：

*保持设备唤醒
- 你真的需要每次都唤醒设备 - 选择 RTC 而不是 RTC_WAKEUP

*每次小部件更新时处理大量代码
- 你是否运行广播接收器中的 onReceive 中有很多代码？更改您的流程策略以尽可能少地进行处理，因为每分钟更新很多！例如，不要生成不需要更新的数据。

# magento - 如何在 Magento 中获取捆绑产品价格？

> ID：11303853
> 
> 赞同：3
> 
> 时间：2012-07-03T02:51:57.743
> 
> 标签：magento

我有一个像这样的数组的捆绑产品：（将产品添加到购物车时从参数中获取）

```
Array
(
    [product] => 165
    [bundle_option] => Array
    (
        [17] => 47
        [22] => 60
        [16] => 46
        [15] => 42
        [14] => Array
            (
                [0] => 39
            )
    )
) 
```

我怎样才能得到这个捆绑产品的价格？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T17:18:53.383

像这样的东西也应该起作用：

```
public function getDisplayPrice($product) {
    if($product->getFinalPrice()) {
        return $product->getFormatedPrice();
    } else if ($product->getTypeId() == Mage_Catalog_Model_Product_Type::TYPE_BUNDLE) {
        $optionCol= $product->getTypeInstance(true)
                            ->getOptionsCollection($product);
        $selectionCol= $product->getTypeInstance(true)
                               ->getSelectionsCollection(
            $product->getTypeInstance(true)->getOptionsIds($product),
            $product
        );
        $optionCol->appendSelections($selectionCol);
        $price = $product->getPrice();

        foreach ($optionCol as $option) {
            if($option->required) {
                $selections = $option->getSelections();
                $minPrice = min(array_map(function ($s) {
                                return $s->price;
                            }, $selections));
                if($product->getSpecialPrice() > 0) {
                    $minPrice *= $product->getSpecialPrice()/100;
                }

                $price += round($minPrice,2);
            }  
        }
        return Mage::app()->getStore()->formatPrice($price);
    } else {
        return "";
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T01:45:18.723

您可以使用类中的`getMinimalPrice()`和`getMaximalPrice()`函数`Mage_Bundle_Product_Price`，它们是专门为**捆绑产品**编写的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-22T02:06:24.290

您可以像这样使用 Mage_Bundle_Model_Product_Price 的内置静态方法 calculatePrice：

```
if ($product->getTypeId() == Mage_Catalog_Model_Product_Type::TYPE_BUNDLE){

        $pricemodel = Mage::getModel('bundle/product_price');

        $price = $pricemodel::calculatePrice(
            $product->getData('price'),
            $product->getSpecialPrice(),
            $product->getSpecialPriceFrom(),
            $product->getSpecialPriceTo(),
            false,
            Mage::app()->getStore()->getWebsite()->getId(),
            Mage::getSingleton('customer/session')->getCustomer()->getGroupId(),
            $product->getId()
        );

        $finalprice = $this->helper('core')->currencyByStore(Mage::helper('tax')->getPrice($product, $price));

    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-29T12:00:21.403

```
// load product
$product = new Mage_Catalog_Model_Product();
$product->load(165);
$priceModel = $product->getPriceModel();

// get options
$block = Mage::getSingleton('core/layout')->createBlock('bundle/catalog_product_view_type_bundle');
$options = $block->setProduct($product)->getOptions();

$price = 0;
foreach ($options as $option) {
  $selection = $option->getDefaultSelection();

  if ($selection === null) {
    continue;
  }

  $price += $priceModel->getSelectionPreFinalPrice($product, $selection, $selection->getSelectionQty());
} 
```

或者，您可以使用我的 magento 模块：[https](https://github.com/head82/KH_ExtendedBundlePrice) ://github.com/head82/KH_ExtendedBundlePrice用 magento 1.7 测试

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-09-13T07:38:35.420

@Kevin，干得好。我个人需要稍作修改。在 Magento 1.7.0.2 中，函数 getSelectionPreFinalPrice() 实际上调用 getSelectionPrice() 调用 getSelectionFinalTotalPrice() - 但在最后一部分中，价格是用最终价格计算的（因此包括分级定价和特价），而不是原价。

我应用了以下代码段来获得原始价格（没有分级定价和特价）：

```
$_normalPrice = 0;
$_options = $_priceModel->getOptions($_product);
foreach($_options as $_option) {
    $_selection = $_option->getDefaultSelection();
    if ($_selection === null) continue;
    $_normalPrice = $_normalPrice + $_selection->getPrice();
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-02-23T08:40:43.587

这是magento方式：

```
$_product     = $this->getProduct();
$_priceModel  = $_product->getPriceModel();

list($_minimalPriceTax, $_maximalPriceTax) = $_priceModel->getTotalPrices($_product, null, null, false);
list($_minimalPriceInclTax, $_maximalPriceInclTax) = $_priceModel->getTotalPrices($_product, null, true, false); 
```

假设`$this->getProduct()`返回`Catalog/Product`模型。适用于固定和动态价格类型，甚至与可配置捆绑扩展兼容。取自 design/base/default/template/bundle/catalog/product/price.phtml

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-06-21T12:56:37.553

我通过自己的方法解决了它，不确定它是否可以接受。发送帖子值和产品ID，模型将返回价格。

```
$bundle_option = Mage::app ()->getRequest ()->getParam('bundle_option');
$bundle_option_array = call_user_func_array('array_merge', $bundle_option);
$price =  Mage::Helper('airhotels/bundle')->getBundlePrice($productid,$bundle_option_array); 
```

我的帮助文件是

```
public function getBundlePrice($productId,$bundle_option_array) {
$product = new Mage_Catalog_Model_Product();
$product->load($productId);
$price=0;
$selectionCollection = $product->getTypeInstance(true)->getSelectionsCollection($product->getTypeInstance(true)->getOptionsIds($product), $product);
foreach($selectionCollection as $option) 
{
if (in_array($option->getSelectionId(), $bundle_option_array)){
    $price += $option->price; 
}
}
return $price;
} 
```

概念：我从二维数组（问题）构建了一个一维数组。从 helper 中的函数我们可以获得捆绑产品的所有选择 id。通过匹配（使用 in_array），我们可以计算我们自定义选择产品的价格。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-03-07T15:42:38.347

尽管我确定您在几年前就已经弄清楚了您需要什么，但我不太确定您会将参数放在已接受的答案中的哪个位置。

我发现你可以像任何其他产品一样使用 getFinalPrice() 获得捆绑产品的价格，但你可以使用目录/产品帮助器设置选定的选项。

```
 $_product = Mage::getModel('catalog/product')->load($this->getRequest()->getPost()['product'];
    $productHelper = $this->helper('catalog/product');
    //getpost() contains the array you mentioned when you click add to cart
    $_configuredProducts = $_product->getTypeInstance(true)->processConfiguration(new Varien_Object($this->getRequest()->getPost()), $_product,Mage_Catalog_Model_Product_Type_Abstract::PROCESS_MODE_FULL ); 
    echo $_product->getFinalPrice(); 
```

# database - 数据库+数据模型设计模式

> ID：11303854
> 
> 赞同：1
> 
> 时间：2012-07-03T02:52:02.127
> 
> 标签：database, ruby-on-rails-3, design-patterns

我正在为我们公司设计一个通知系统，用户可以在其中指定是否要为不同的操作发送通知。

*我想知道这个设计模式的名称是什么，所以我可以阅读它并遵循该做和不做的事情。*

故事（要求）：当用户在我们的网站（应用程序）上采取不同的行动时，这些行动会被发布到他们的 facebook 和 twitter 帐户，我们也会给他发电子邮件。有很多动作，在 Facebook 下有 6 个，在 Twitter 下有 6 个，在电子邮件下有 12 个。因此，为每个操作创建单独的列是没有意义的，特别是它们的值默认为 true。

因此，例如，当用户将新图像上传到我们网站上的页面时，我们希望将其发布到他们的 facebook 和 twitter，他们只需将图像上传到我们的应用程序。

我的设计是一个包含这些列的 meta_data 表（带有示例行）：

```
id, user_id, namespace,  notification,   value 
0,  1,       'facebook', 'image_upload', false
1,  1,       'twitter',  'video_post',   false
2,  10,      'email',    'send_money',   false 
```

同样对于所有操作及其命名空间，我在创建表时默认将一些行添加到数据库中，其中我将所有值设置为 true。然后在用户设置页面中，他可以看到这些设置的复选框，默认情况下都是选中的。每次用户创建取消选中一个时，我都会为该用户、操作和命名空间创建一个新行，其值为 false。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T03:56:47.610

这称为[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T03:27:39.850

我会更像一个[Publish-subscribe 模式](http://en.wikipedia.org/wiki/Publish%E2%80%93subscribe_pattern)，但我怀疑这会对你有所帮助。

关于数据模型：我会使用 3 个表。由于 EventDefinition 和 ActionDefinition 应该非常小，因此您应该始终将它们放在内存中。

EventDefinition id name 0 '在你的应用中做了一些事情' 1 '其他事情' ...

ActionDefinition id 名称 0 'upload_image_tofacebook' 1 'send_email' 2 ...

您必须有某种“上下文”，其中事件设置了一些数据或变量，并且响应中执行的操作可以从中读取。

Subscription user_id event_id action_id 0 2 3 // 当与 user_id 0 相关的 event id 2 发生时执行 action 3

# android - 另一个解析 XML 失败：格式不正确（无效令牌）错误

> ID：11303858
> 
> 赞同：0
> 
> 时间：2012-07-03T02:52:30.537
> 
> 标签：android, xml, android-manifest

我已经查看了有关同一问题的所有其他线程，但我仍然无法弄清楚问题所在。我正在使用 Eclipse 4.2 和最新的 Android SDK。很抱歉问这样一个初学者的问题，我真的很感激你能提供的任何帮助。我的代码看起来像这样（我用 标记了产生错误的行`X`）：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="paul.learning.myfirstapp"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" 
X           <activity
                android:name=".MyFirstActivity"
                android:label="@string/title_activity_my_first" 
                android:name="paul.learning.myfirstapp.DisplayMessageActivity" />
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T02:56:27.317

您已使用 关闭`activity`元素`/>`。将其更改为：

```
<activity
    android:name=".MyFirstActivity"
    android:label="@string/title_activity_my_first" 
    android:name="paul.learning.myfirstapp.DisplayMessageActivity" > 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T07:39:50.200

您需要在`<application>`开始标记中的属性之后添加一个“>”。

# c# - 如何在 Windows Phone 上显示 DataBound Pushpin

> ID：11303862
> 
> 赞同：0
> 
> 时间：2012-07-03T02:53:22.630
> 
> 标签：c#, windows-phone-7, bing-maps

我正在尝试在 Windows Phone 上创建一个图钉，显示多个位置，包括名称、评级等。我在 MSDN、Stack Overflow 和其他网站上搜索了解决方案，但只找到了部分答案。

这是我目前的尝试。它根本不起作用。它确实创建了一个图钉，但没有更改为显示网格或任何其他元素。相反，它在地图的左上角显示一个空白图钉。

```
<mi:Map x:Name="map" Margin="-12,0" d:LayoutOverrides="Width" CredentialsProvider="Something else goes here :)">
   <mi:MapItemsControl ItemsSource="{Binding Pushpins}">
      <mi:MapItemsControl.ItemTemplate>
         <DataTemplate>
            <mi:Pushpin Location="{Binding Location}">
               <Grid Background="{Binding Background}">
                  <TextBlock Text="{Binding Name}" Margin="6,0"/>
                  <ProgressBar Maximum="5" Value="{Binding Rating}"/>
               </Grid>
             </mi:Pushpin>
          </DataTemplate>
       </mi:MapItemsControl.ItemTemplate>
    </mi:MapItemsControl>
 </mi:Map> 
```

我怎样才能让上面的代码或类似的东西工作？

我以前的解决方案涉及使用代码创建元素，问题在于它变得凌乱，超出了几个引脚并且不能轻易用于获取其他信息（例如商店 URL）。

编辑：关于一切背后的代码的一些额外信息。

```
public struct PushpinModel
{
    public GeoCoordinate Location { get; set; }
    public string Name { get; set; }
    public string Url { get; set; }
    public float Rating { get; set; }
    public Brush Background { get; set; }
} 
```

这些图钉模型通过 AddPin 方法添加到图钉的可观察集合中：

```
public void AddPin(GeoCoordinate coord, string Title, string url, float rating, Brush background)
{
    Pushpins.Add(new PushpinModel { Location = coord, Name = Title, Rating = rating, Url = url, Background = background} );
} 
```

我的 GeoCoordinateWatcher 在其位置更改时调用 watcher_PositionChanged 事件。这会在用户位置添加一个图钉。

目前正在调用 ZoomToUser() 函数，但图钉未出现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T10:51:29.857

这看起来不对

```
 <mi:MapItemsControl ItemsSource="Pushpins"> 
```

如果它是数据上下文的属性，它应该是

```
 <mi:MapItemsControl ItemsSource="{Binding Pushpins}"> 
```

# dependency-injection - 注入认证信息

> ID：11303869
> 
> 赞同：0
> 
> 时间：2012-07-03T02:54:23.237
> 
> 标签：dependency-injection, guice

我有一个应用程序连接到多个站点，每个站点都有不同的用户名/密码对。我想要做的是连接依赖关系，这样我就可以说“只要你想要一个 FTPConnection，就使用这个连接”和“这个连接”取决于用户想要什么。

所以说我有一个像这样的类（伪 Google Guice 语法）：

```
public class FTPConnection
{
    FTPConnection(@Username String username, @Password String password)...
} 
```

还有一个使用它的类

```
public class SomeFTPSiteProcessor
{
    SomeFTPSiteProcessor(@Inject FTPConnection)...
} 
```

我想做的是在我想要 SomeFTPSiteProcessor 的实例时创建“当前活动”连接。

我该怎么做？我会使用范围吗？我会使用提供商吗？帮助！伪代码将不胜感激。

我希望这有点道理...

编辑：用户在运行时选择使用哪个 FTP 连接，因此我需要动态提供身份验证信息。这种语言让我想到了某种提供者，但我无法完全理解它是如何完成的。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T15:57:02.640

这就是[机器人腿](http://code.google.com/p/google-guice/wiki/FrequentlyAskedQuestions#How_do_I_build_two_similar_but_slightly_different_trees_of_objec)问题。

```
public class SomeFTPSiteProcessor
{
    SomeFTPSiteProcessor(@JeffsFtpServer FTPConnection)...
}

public class SomeOtherFTPSiteProcessor
{
    SomeFTPSiteProcessor(@FredsFtpServer FTPConnection)...
}

class FtpModule extends PrivateModule {
    String username;
    String password;
    Class<? extends Annotation> annotation;   

    void configure() {
         bind(String.class).annotatedWith(Username.class).with(username);
         bind(String.class).annotatedWith(Password.class).with(password);
         expose(FTPConnection.class).annotatedWith(annotation);
    }
}
Injector injector = Injector.createInjector(
    new FtpModule("fred", "password", FredsFtpServer.class), 
    new FtpModule("jeff", "password", JeffsFtpServer.class)); 
```

* * *

我想你会需要一个工厂。很可能该工厂有一个注入器的实例。

```
class ThingieFactory() {
     @Inject Injector injector;

     SomeFTPSiteProcessor create(params... ) {
          return injector.createChild(new Module() { set params; } ).get(SomeFTPSiteProcessor.class);
     }
} 
```

# text - Symfony TinyMCE 实现

> ID：11303873
> 
> 赞同：1
> 
> 时间：2012-07-03T02:54:37.377
> 
> 标签：text, symfony1, tinymce, symfony-1.4

我在将 TinyMCE 实施到 Symfony 项目中时遇到了一个小问题。我让文本编辑器出现并将富文本保存到数据库字段。但是当我在页面上“回显”它时，我会得到所有的 HTML 标签，而不是富文本本身。是否有一种特殊的方式我需要“回显”它以便解析 html？我也希望这样当人们手动输入 html 标签时，它们会显示为常规文本（以避免人们在他们的帖子中添加超链接和其他不需要的东西）。这是显示的内容：

```
<p>Test</p> <p><strong>Bold Test</strong></p> <p><span style="text-decoration: underline;"><strong>Underline Text</strong></span></p> 
```

而不是这个：

测试

**大胆的测试**

**下划线文本**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T03:26:05.120

Symfony2 使用输出转义来保证安全。你可以在这里阅读： http: [//symfony.com/doc/current/book/templating.html#output-escaping](http://symfony.com/doc/current/book/templating.html#output-escaping)

要回显一个变量而不转义它，您可以这样做：

```
{{ article.body|raw }} 
```

为了清理和限制可以使用的标签，您需要使用[HTMLPurifier](http://htmlpurifier.org/)，它在此处有一个捆绑包：[https ://github.com/Exercise/HTMLPurifierBundle](https://github.com/Exercise/HTMLPurifierBundle)

**对于 Symfony 1.4**

Symfony 1.4 有类似的输出转义。您可以通过以下方式获取原始数据：

```
$sf_data->getRaw('varName'); 
```

或者如果它是对象上的方法，您可以将`ESC_RAW`其作为参数添加到方法调用中（警告：symfony 会在这里发挥作用）

```
$myObject->getMessage(ESC_RAW); 
```

[更多关于 1.4 输出在这里转义](http://www.symfony-project.org/gentle-introduction/1_4/en/07-Inside-the-View-Layer#chapter_07_output_escaping)

# rest - 设计具有多个 id 的 RESTful 服务

> ID：11303874
> 
> 赞同：3
> 
> 时间：2012-07-03T02:54:40.830
> 
> 标签：rest

我正在设计一个 RESTful 服务。就是列出一组数据。主要问题是该集合没有合理的单一标识符。在系统的知识范围内也不能容易地计算出特定的集合。因此，似乎不可能拥有 GET /items/{identifier} 服务。

我确实有被请求的每个元素的 id。我的主要问题是在 URI 中列出 id 似乎不是 RESTful（例如 GET items/{id1},{id2},...,{idn} ）。正确的？

我可以看到 DELETE 有一个类似的用例——在一个请求周期中删除多个项目。

在 REST 领域内如何满足这样的用例？那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-04T14:00:36.633

问题中所述的方法实际上意味着对于每个组合`ids`都有一个资源。假设我们有 2 `ids`: 1 和 2。

```
/items/1,2

/items/2,1 
```

以上代表不同的资源，虽然结果是一样的。这可能会让 API 的使用者感到困惑。

另一种对此建模的方法是通过查询参数作为过滤语义。让我们假设，`id`实际上是资源的一个字段。

例如，`item`以`id`1 为单位：

```
GET
/items/1

Response:

{
    "id": 1,
    "type": "table",
    "color": "black",
    ...
} 
```

所以问题是，如果我需要批量购买几件商品怎么办？您可以将此问题概括为`items`按某些字段的值进行过滤的一般问题。例如：获取所有`items`类型*表*

```
GET
/items?query="name='table'"

Response:
{
    "data": [
        {
            "id": 1,
            "type": "table",
            "color": "black",
            ... 
        },
        {
            "id": 2,
            "type": "table",
            "color": "grey",
            ... 
        },
        {
            "id": 6,
            "type": "table",
            "color": "brown",
            ... 
        }
    ]
} 
```

因此，可以询问相同的问题来获取`items`where `id`is`1`或`2`。假设我们将*or*操作建模`||`为`query`

```
GET
/items?query="id=1||id=2"

Response:
{
    "data": [
        {
            "id": 1,
            "type": "table",
            "color": "black",
            ... 
        },
        {
            "id": 2,
            "type": "table",
            "color": "grey",
            ... 
        }
    ]
} 
```

# java - 一个整数被修改后返回，但我的 getter 函数没有修改它。有任何想法吗？

> ID：11303876
> 
> 赞同：0
> 
> 时间：2012-07-03T02:54:43.683
> 
> 标签：java, setter, getter

我有两个类，一个叫做 CreateDefault，它为我的程序创建 GUI 设置。我的另一个类是 tabPanePopup，它为与 CreateDefault 关联的 JTabbedPane 创建一个弹出窗口及其命令。

```
public int getCount() { return this.count; } 
```

上面的代码，返回计数。计数，计算创建了多少个新文档。getCount() 是 CreateDefault 类的一部分。

下面的代码是 tabPanePopup 的一部分。newTab 执行的操作已经写出。在 CreateDefault 中，最初 count = 1，然后在 GUI 完全创建时增加 1，总计 count = 2。在 tabPanePopup 类中调用 getCount() 时，getCount() 应该返回 2，但它返回 1。如果我在 CreateDefault 类中对 count 执行 println 函数，它会打印 2，但会在 tabPanePopup 中打印 1。它这样做有什么理由吗？在创建 GUI 时，除了 count++ 之外，我根本不修改计数，并且在创建 GUI 之后才能调用 getCount() 函数。

```
newTab.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent action) {
            CreateDefault get = new CreateDefault();
            int count = get.getCount();
            String parsed = Integer.toString(count);
            Font myFont = new Font("Calibri", Font.BOLD, 12);
            JEditorPane editorPane = new JEditorPane();
            JScrollPane scrollPane = new JScrollPane(editorPane,
                    JScrollPane.VERTICAL_SCROLLBAR_ALWAYS,
                    JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED);
            LineCounter counter = new LineCounter(editorPane);
            UndoManager manager = new UndoManager();
            Document document = editorPane.getDocument();
            document.addUndoableEditListener(manager);
            scrollPane.setRowHeaderView(counter);
            counter.setBackground(Color.white);
            tabPane.setFont(myFont);
            tabPane.addTab("New Document " + parsed, scrollPane);
            tabPane.setTabLayoutPolicy(JTabbedPane.SCROLL_TAB_LAYOUT);
            get.setCount(count++);
        }   
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T02:56:42.107

这只是一个猜测，因为您的代码还有很多内容尚未向我们透露，但您似乎在上面的方法中创建了一个新的 CreateDefault 对象，并且它可能与 CreateDefault 实例完全无关即持有*真实*的计数结果。关键不是创建一个新对象并调用它，而是在*原始*实例`getCount()`上调用这个方法。解决方案是以某种方式获得对这个原始实例的引用。

 *所以而不是：

```
public void actionPerformed(ActionEvent action) {
  CreateDefault get = new CreateDefault();
  int count = get.getCount(); 
```

执行以下操作：

```
public void actionPerformed(ActionEvent action) {
  // CreateDefault get = new CreateDefault();
  int count = createDefault.getCount(); 
```

其中 createDefault 变量以某种方式引用了原始的 CreateDefault 实例。*

# android - 如何开发一个android服务依赖于另一个服务

> ID：11303877
> 
> 赞同：0
> 
> 时间：2012-07-03T02:55:10.097
> 
> 标签：android, service, dependencies

我有两个服务，服务 A 和服务 B。如何开发服务 B 依赖于服务 A？当我启动服务 B 时，我应该知道服务 A 是否正在运行。如果服务 A 正在运行，则启动服务 B。否则，不启动服务 B。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T03:14:04.367

所以，你的问题是一样的，如何知道一项服务是否正在运行，对;)

Android 必须`Activity Manager`完成您的工作。

```
public boolean checkService(String service) {
        ActivityManager manager = (ActivityManager) getSystemService(ACTIVITY_SERVICE);
        for (RunningServiceInfo service : manager.getRunningServices(Integer.MAX_VALUE)) {
            if (service.equals(service.service.getClassName())) {
                return true;
            }
        }
        return false;
    } 
```

字符串服务应该是您的类名，例如：`com.app.Intent`

这是一个伪代码。我没有详细说明，因为启动服务的许多方法取决于您如何使用它。

```
if checkService("com.app.ServiceA") 
    running ServiceA;
running ServiceB;  // Because I see that ServiceB always still always run, not depend on ServiceA 
```

希望这对你有帮助:)

# blackberry - 自定义 BlackBerry ListField 的边距问题

> ID：11303880
> 
> 赞同：0
> 
> 时间：2012-07-03T02:55:38.517
> 
> 标签：blackberry, listfield

这是我的自定义列表字段

```
public Custom_ListField(String title[], String date[], String category[]) {

    super(0, ListField.MULTI_SELECT);
    setRowHeight(80);
    setCallback(this);
    Background background = BackgroundFactory.createBitmapBackground(bg);
    setBackground(background);

    rows = new Vector();

    for (int x = 0; x < title.length; x++) {
        TableRowManager row = new TableRowManager();

        titlelabel = new LabelField(title[x], DrawStyle.ELLIPSIS
            | LabelField.USE_ALL_WIDTH | DrawStyle.LEFT);
        titlelabel.setFont(Font.getDefault().derive(Font.BOLD, 25));

        row.add(titlelabel);

        datelabel = new LabelField(date[x], DrawStyle.ELLIPSIS
            | LabelField.USE_ALL_WIDTH | DrawStyle.LEFT);
        datelabel.setFont(Font.getDefault().derive(Font.BOLD, 20));
        row.add(datelabel);

        categorylabel = new LabelField(category[x], DrawStyle.ELLIPSIS
            | LabelField.USE_ALL_WIDTH);
        categorylabel.setFont(Font.getDefault().derive(Font.BOLD, 20));
        row.add(categorylabel);

        rows.addElement(row);
    }
    setSize(rows.size());
}

public void drawListRow(ListField listField, Graphics g, int index, int y, int width) {
    list = (Custom_ListField) listField;
    TableRowManager rowManager = (TableRowManager) list.rows.elementAt(index);
    rowManager.drawRow(g, 0, y, width, list.getRowHeight());
}

private class TableRowManager extends Manager {
    public TableRowManager() {
        super(0);
    }

    public void drawRow(Graphics g, int x, int y, int width, int height) {
        layout(width, height);

        setPosition(x, y);
        g.pushRegion(getExtent());
        subpaint(g);
        g.popContext();
    }

    protected void sublayout(int width, int height) {
        Field field = getField(0);
        layoutChild(field, getPreferredWidth() - 16, 25);
        setPositionChild(field, 5, 5);

        field = getField(1);
        layoutChild(field, 100, 20);
        setPositionChild(field, 5, 35);

        field = getField(2);
        layoutChild(field, 100, 20);
        setPositionChild(field, 110, 35);

        setExtent(getPreferredWidth(), getPreferredHeight());
    } 
```

[这是结果](http://img829.imageshack.us/img829/8922/61087898.png)。

如您所见，第一排和第二排看起来没有问题，但问题出现在第三排。文本的边距越来越大。为了看得清楚，我的背景图片确实有一条清晰的分隔线。

问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T10:19:15.567

实际上这个问题是因为你的 TableRowManager 类的子布局方法。

```
 setPositionChild(getField(0), 10, 5);
            layoutChild(getField(0), getField(0).getPreferredWidth(),
                    getField(0).getPreferredHeight()); 
```

这里的 setPosition 方法（定位该特定字段:::: 例如，设置左边距和上边距）具有 3 个参数。第一个是要定位的字段。第二个是该字段的左侧边距。第三个是该字段的上边距。

同样对于布局方法（布局特定字段:::: 例如，设置该字段的宽度和高度）也有 3 个参数。第一个是要布局的领域。第二个是获得该字段的首选宽度。第三个是获得该字段的首选高度。

了解这两种方法的每个参数的目的，然后正确使用它。我希望这会帮助你。

更改您的子布局方法并让我知道您的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T02:46:11.257

背景图像的高度必须与 相同`rowheight`，否则您会看到眼睛对比。这是因为图像再次重复

# python - fedora 上的 python Idle 问题

> ID：11303884
> 
> 赞同：1
> 
> 时间：2012-07-03T02:56:09.440
> 
> 标签：python, keyboard, fedora, python-idle, x11

在我的 Fedora 机器上运行 python idle 时，有时键盘会突然冻结，我必须再次重新启动 idle。

所以我尝试了“idle -n”，并收到如下错误消息：

```
"
Gdk-ERROR **: The program 'newsift.py' received an X Window System error.
This probably reflects a bug in the program.
The error was 'BadWindow (invalid Window parameter)'.
  (Details: serial 15131 error_code 3 request_code 15 minor_code 0)
  (Note to programmers: normally, X errors are reported asynchronously;
   that is, you will receive the error a while after causing it.
   To debug your program, run it with the --sync command line
   option to change this behavior. You can then get a meaningful
   backtrace from your debugger if you break on the gdk_x_error() function.)
Trace/breakpoint trap (core dumped)
[root@poodle tmp]# idle -n

Warning (from warnings module):
  File "/usr/lib64/python2.7/site-packages/gtk-2.0/gtk/__init__.py", line 122
    set_interactive(1)
RuntimeWarning: PyOS_InputHook is not available for interactive use of PyGTK
" 
```

谁能告诉我发生了什么？我该如何解决这个问题？非常感谢！

# java - Java 死锁：是否存在不是错误的情况？

> ID：11303885
> 
> 赞同：1
> 
> 时间：2012-07-03T02:56:16.960
> 
> 标签：java, tomcat, lucene, deadlock

我拿了一个 Java 程序的线程转储，它说`Found one Java-level deadlock`.

我可以自信地确认该程序中存在错误吗？

对我来说，听起来[死锁](http://docs.oracle.com/javase/tutorial/essential/concurrency/deadlock.html)是一个编程问题，唯一的解决方案是修复源代码。
我错了吗？是否存在死锁是程序执行的正常部分，而死锁最终会以某种方式消失的情况？

它是一个相当传统的 Java Web 应用程序，拥有数百个用户。相互等待的两个线程似乎是一个[Tomcat](http://en.wikipedia.org/wiki/Apache_Tomcat)请求工作者和一个[Lucene](http://en.wikipedia.org/wiki/Lucene)索引作业，两者都使用`sun.misc.Unsafe.park`. 据我所知，该程序没有任何线程监控功能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T03:03:23.883

> 是否存在死锁是程序执行的正常部分，而死锁最终会以某种方式消失的情况？

理论上是的，取决于死锁的种类。

例如，如果两个线程`Object.wait()`死锁，其中一个等待调用可能会超时（最终）。或者，第三个线程可以通过调用`Thread.interrupt()`其中一个死锁线程来打破死锁。这可能是作为一种蓄意的打破僵局的策略，或出于其他原因。

另一方面，获取原始互斥锁的死锁永远不会自行消失，并且不能通过调用已弃用的线程停止/终止方法之一来打破。如果你这样做，你很可能使数据结构处于中间状态，从而在打破锁后继续存在问题。

* * *

要寻找的关键是阻塞动作是否可中断；例如它是否可以抛出一个`InterruptedException`或类似的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T03:08:36.573

这有点像一个例外（尽管是一个非常恶心和丑陋的 :)）：如果您准备好处理死锁，因为它们可能发生在您的应用程序中（例如，您正在用 java 编写数据库服务器），那么什么都没有他们错了。

也就是说，在大多数情况下，这*确实*是一个错误，例如未经检查的异常，可怕的 NPE :(

# android - 如何在android中的两个活动之间传输数据

> ID：11303887
> 
> 赞同：3
> 
> 时间：2012-07-03T02:56:29.787
> 
> 标签：android, android-activity

> **可能重复：**
> [如何在 Android 中的活动之间传递数据？](https://stackoverflow.com/questions/2091465/how-do-i-pass-data-between-activities-in-android)

我有两个活动 A 和 B。活动 A 有一个 editText 和一个按钮。活动 B 有一个 editText，当我在 A 的 editText 中键入内容并单击它应该显示在 editText2 中的按钮时。任何人都可以为此提供代码。

提前致谢 ！！！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-03T03:15:20.383

我将假设您已经编写了两个 Activity 类：`ActivityA`&`ActivityB`并且您已经编写`onClickListener`了`ActivityA`.

要在两个 Activity 之间传递数据，您需要使用启动 Activity 的 Intent 类，并且在 ActivityB 的 startActivity 之前，您可以通过 Extra 对象使用数据填充它。在您的情况下，它将是 editText 的内容。

### ActivityA onClickListener

```
Intent i = new Intent(getBaseContext(),ActivityB.class);

//Set the Data to pass
EditText txtInput = (EditText)findViewById(R.id.txtInput);
String txtData = txtInput.getText().toString();
i.putExtra("txtData", txtData);

startActivity(i); 
```

现在在 ActivityB 中，您可以在 onCreate 中编写代码来获取启动它的 Intent 并提取传递给它的数据。

### ActivityB onCreate

```
Intent i = getIntent();
//The second parameter below is the default string returned if the value is not there. 
String txtData = i.getExtras().getString("txtData","");
EditText txtInput2 = (EditText)findViewById(R.id.txtInput2);
txtInput2.setText(txtData); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-03T03:05:17.833

当您开始活动 B 时，以附加意图发送数据。

在活动 A 中，当您开始活动 B 时，

```
Intent activityBstartIntent = new Intent(getApplicationContext(), ActivityB.class);
activityBstartIntent.putExtra("key", editTextA.getText().toString());
startActivity(activityBstartIntent); 
```

在 ActivityB 的 onCreate() 中执行此操作

```
if(getIntent().getExtras() != null) {
editTextB.setText(getIntent().getExtras().getString("key");
} 
```

希望有帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-03T03:06:12.987

通过使用意图，我们可以跨组件（如活动）传递数据。在单击按钮的第一个活动中，您需要将这个获取发送数据写入第二个活动。

```
Intent intent = new Intent(this, DisplayMessageActivity.class);
EditText editText = (EditText) findViewById(R.id.edit_message);
String message = editText.getText().toString();
intent.putExtra(EXTRA_MESSAGE, message); 
```

EXTRA_MESSAGE 是您活动中的字符串常量。

第二个活动你会收到这样的消息

意图意图 = getIntent();

字符串消息 = intent.getStringExtra(MyFirstActivity.EXTRA_MESSAGE);

[这里](http://developer.android.com/training/basics/firstapp/starting-activity.html)解释的非常清楚。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T03:02:48.203

是的，有人*可以*为此提供代码，Google 甚至将它作为许多教程和示例代码的主题。尝试阅读有关[Intents](http://developer.android.com/reference/android/content/Intent.html)的内容。

# php - 如何将动态图像作为 CSS 背景？

> ID：11303891
> 
> 赞同：12
> 
> 时间：2012-07-03T02:56:56.990
> 
> 标签：php, css, background

我有一个徽标 div，我想使用我的徽标图像作为背景，例如：

```
.logo {
    background: #FFF url(images/logo.jpg);
} 
```

但是，在我脚本的设置页面上，我希望有一个文本输入字段来指定背景图像的图像 URL。

如何将此 div 的背景图像设置为输入的图像 URL 而无需执行以下操作：

```
<div><img src="/images/logo.jpg" /></div> 
```

（脚本是用PHP编写的）

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-07-03T03:41:04.143

这是动态设置背景图像的两个选项。

1.  将嵌入的样式表放入文档的`<head>`：

    ```
    <style type="text/css">
    .logo {
       background: #FFF url(<?php echo $variable_holding_img_url; ?>);
    }
    </style> 
    ```

2.  内联定义`background-image`CSS 属性：

    ```
    <div style="background-image: url(<?php echo $varable_holding_img_url; ?>);">...</div> 
    ```

**注意：**确保在将输入保存到数据库之前对其进行清理（参见[Bobby Tables](http://bobby-tables.com)）。确保它*不包含 HTML 或其他任何内容，仅包含有效的 URL 字符*、转义引号等。如果不这样做，攻击者可以将代码注入页面：

```
"> <script src="http://example.com/xss-attack.js"></script> <!-- 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-03T03:39:19.737

```
<input type="text" class="inputContent" />
<script type="text/javascript">
    var inputC = $('input.inputContent').val();
    $('body').css('background', 'url(' + inputC + ')');
</script> 
```

那完全是 js 和 jQuery，因为我不懂 PHP，但它是一个解决方案！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-03T03:06:25.737

您要么需要从 PHP 脚本（有些高级）生成 css，要么使用内联样式来实现这一点。前任：

```
<div style="background-image: <?php echo $_POST['whateverjpg']; ?>" >
//blah
</div> 
```

这是非常不安全的，但我能给出的最简洁的答案..

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-03T03:02:26.027

我认为您可以使用[此处](http://www.w3schools.com/jsref/prop_style_backgroundimage.asp)给出的 javascript 动态设置背景图像。

```
document.getElementById("xyz").style.backgroundImage="your path"; 
```

如果您不想使用 javascript，为什么不能使用 inline`style`属性。
前任

```
<div style="background-image: url(xyz)"></div> 
```

# c# - 如何在我的网络浏览器中保留网站？

> ID：11303895
> 
> 赞同：1
> 
> 时间：2012-07-03T02:58:23.143
> 
> 标签：c#, browser

我正在导航到一个网站，该网站强制每个页面在新网页中打开。如何防止这种情况在我的程序中发生（我无法控制网站）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T03:06:17.647

假设这是 WinForms 或 Silverlight WebBrowser，则有许多选项。

您可以劫持任何导航事件并取消导航，然后自己处理。这可能意味着您只需在窗口内导航到目标 URL 或使用 下载浏览器外部的页面[`HttpWebRequest`](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx)，然后将您自己的脚本注入 HTML 以劫持链接点击并自行处理，然后让您的网络浏览器导航到修改后的 HTML 字符串。

# mahout - Mahout 0.7 版本下缺少方法

> ID：11303897
> 
> 赞同：0
> 
> 时间：2012-07-03T02:58:35.527
> 
> 标签：mahout

我正在阅读《Mahout In Action》一书，我想自己尝试一下代码。

但是我发现很多代码无法运行（大多数问题是找不到方法）。

1、RandomSeedGenerator.chooseRandomPoints(pointVectors, k); 找不到选择随机点。

2、new Cluster(v, clusterId++, measure); 找不到构造函数。

这类问题有很多。

谁能告诉我如何找到这些方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T06:05:54.363

本书是为 Mahout 0.5 编写和测试的。您可以使用[book 的示例查看](https://github.com/tdunning/MiA)`mahout-0.7`存储库中的分支。

# c++ - 如何设置 QWebView 的套接字选项？

> ID：11303904
> 
> 赞同：1
> 
> 时间：2012-07-03T03:00:16.167
> 
> 标签：c++, qt, sockets, qwebview

我想使用 QWebView 设置套接字选项，例如接收缓冲区大小、tcpNoDelay。但是我在 QWebView 中找不到任何方法来执行此操作。我无法从 QWebView 获取连接套接字，知道吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T08:10:21.693

QWebView 不直接使用 QTcpSocket。它使用 QNetworkAccessManager。QNetworkAccessManager 不公开对 QTcpSockets 的访问。我能想到的唯一控制这些事情的是继承QNetworkAccessManager，覆盖createRequest方法，它提供自己的QNetworkReply和自己的QTcpSocket。请注意，您使用普通 QTcpSocket 的请求可能不适用于代理服务器以及通用 QNetworkAccessManager 提供的 QNetworkReply

# java - 如何查找结果集的磁盘使用情况？

> ID：11303912
> 
> 赞同：1
> 
> 时间：2012-07-03T03:00:58.050
> 
> 标签：java, mysql, database, spring, jdbc

是否可以获得给定结果集使用的磁盘空间？假设我想从用户 id = X 的表中进行选择，以计算用户的数据库磁盘使用情况？理想情况下，我想以编程方式计算出任何结果集的磁盘使用情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T03:20:13.733

如果所有数据都来自单个表，则可以从数据类型或行统计信息中计算出来。

数据类型： [http ://dev.mysql.com/doc/refman/5.0/en/storage-requirements.html](http://dev.mysql.com/doc/refman/5.0/en/storage-requirements.html)

行统计： [http ://dev.mysql.com/doc/refman/5.0/en/tables-table.html](http://dev.mysql.com/doc/refman/5.0/en/tables-table.html)

另一种选择可能是使用该`GROUP_CONCAT()`函数创建一个与数据文本形式大小相同的字符串，并将其设为`LENGTH()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T03:29:59.657

> 我实际上对数据库中的大小感兴趣，而不是作为 Java 中的对象。

那么肯定没有办法获得这些信息，除非供应商的数据库实现以某种方式公开它。（而且我还没有听说过任何供应商数据库。）

您可以做的最好的事情是根据对供应商数据库如何表示磁盘上的数据的深入了解进行估计。鉴于典型数据库提供的各种调优选项，仅获得可靠的估计将是大量工作需要实施。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T03:10:26.723

您可以使用[Instrumentation](http://docs.oracle.com/javase/6/docs/api/java/lang/instrument/Instrumentation.html)来执行此操作。

# c++ - 微视频引擎与 Image 类的交互

> ID：11303913
> 
> 赞同：0
> 
> 时间：2012-07-03T03:01:22.087
> 
> 标签：c++, sdl, sprite, game-engine

*[我希望这适用于 SO，我认为这对“程序员”来说有点太实用了，对“gamedev”来说太技术性了，但如果不合适，请随意移动。]*

基本上我只是想快速检查一下我的微型视频引擎的实际设计，它应该能够简单地绘制图像（渲染库无关紧要）和动画精灵。`friend`尽管我认为渲染应该由我的 VideoEngine 类（因此不在 Image 中）完成，但我很难将我的头脑围绕在这个任务的一个好的设计上，但这导致我被迫使用`extern`这不是好的设计我听见。这可能是因为我没有正确编码，但我认为这更像是一个设计问题。

```
// Sprite.h
class Image
{
public:
    Image();
    Image(std::string path);
    ~Image();

    bool IsDisplayable() { return displayed; }
    void LoadImage(std::string path);

    static std::vector<Image*> image_list;
private:
    SDL_Surface*    image_surface;
    bool            displayed;

    friend class    VideoEngine;
};

// VideoEngine.h
extern class Image;

class VideoEngine
{
public:
    VideoEngine();
    VideoEngine(int width, int height);
    ~ VideoEngine();

    void Initialize(int width, int height);
    void RenderImages();
    void ShutdownVE();
private:
    SDL_Surface*    main_display;
    SDL_Rect        main_display_area;
};

// VideoEngine.cpp
void VideoEngine::RenderImages()
{
    std::vector<Image*>::const_iterator ci;
    for(ci = Image::image_list.cbegin(); ci != Image::image_list.cend(); ci++)
    {
        if((*ci) != 0 && (*ci)->IsDisplayable())
        {
            SDL_BlitSurface((*ci)->image_surface, 0, main_display, 0);
            SDL_Flip(main_display);
        }
    }
} 
```

正如你所看到的，我需要从类`image_surface`中访问的事实迫使我使用和做相反的事情（图像具有渲染功能）只会迫使我使用完全相反的（VideoEngine 是图像的朋友，我认为这很丑陋）。`Image``VideoEngine``friend``extern`

**TLDR：**这种双重关系可以用任何干净的方式解决吗？我认为可行但需要更多检查资源的一件事是每次创建图像时以某种方式通知 VideoEngine 并将 SDL_Surface 指针传递给它以存储在列表中。这会是更好的设计吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T04:10:18.083

令我震惊的是，除了加载图像之外，您实际上无法对图像做任何事情。也许你应该有某种绘图上下文接口。也就是说，你可以说`image->drawTo(x, y, screen)`一些定义`screen`？

由于您肯定似乎将s 用作最低级别的原语，因此拥有一种方法`SDL_Surface`可能是有意义的。`void Image::drawTo(..., SDL_Surface* )`至少，这会给你一些小的封装。

此外，在任何地方都有一个静态的或全局`vector`的`Images`让我觉得这是一个等待发生的问题。特别是如果它`vector`或其内容在初始加载后会发生变化。

# actionscript-3 - AS3：是否需要调用 BitmapData.dispose()？

> ID：11303914
> 
> 赞同：1
> 
> 时间：2012-07-03T03:01:46.980
> 
> 标签：actionscript-3, flash, air, garbage-collection, bitmapdata

是否需要为想要完全从内存中删除的每个 BitmapData 调用 BitmapData.dispose() ，或者一旦 BitmapData 对象被垃圾收集，该缓冲区是否会被释放？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T03:33:18.890

最终`BitmapData`将被垃圾收集器处理掉。

调用`BitmapData.dispose()`会立即释放内存，这可以提高性能，尤其是在基于帧的动画中大量使用位图数据时。位图数据会很快消耗大量内存。

[BitmapData，来自 Adob​​e Flash 平台的 ActionScript 3.0 参考](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/BitmapData.html#dispose%28%29)

> BitmapData.dispose() 立即释放实际位图数据占用的内存（位图最多可消耗 64 MB 内存）。使用 BitmapData.dispose() 后，BitmapData 对象不再可用，如果您调用 BitmapData 对象上的函数，Flash 运行时将引发异常。但是，BitmapData.dispose() 不会垃圾收集 BitmapData 对象（大约 128 个字节）；实际 BitmapData 对象占用的内存在垃圾收集器收集 BitmapData 对象时被释放。

# curl - AppleScript 卷曲

> ID：11303918
> 
> 赞同：0
> 
> 时间：2012-07-03T03:02:18.927
> 
> 标签：curl, applescript

我很难让以下脚本正常工作。所以它应该做的是：我想为脚本设置一个计时器，以保护我的 HDD 上的 www.url.com/picture.aspx 的 jpg 版本，其文件名如图片-0001.jpg 到图片-xxxx .jpg。

```
set {tUrl, dFolder} to {"www.url.com/picture.aspx", "~/Desktop/curlDownload/"}

set {oAStid, AppleScript's text item delimiters} to {AppleScript's text item delimiters, "/"}
set fName to (last text item of tUrl) as string
set AppleScript's text item delimiters to oAStid

do shell script ("mkdir -p " & dFolder & "; curl -A/--user-agent " & tUrl & " >> " & (dFolder & fName)) 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T04:09:46.033

curl 不能用于保存网站的屏幕截图。您可以安装[Homebrew](https://brew.sh/)，然后[使用](https://paulhammond.org/webkit2png)`brew install webkit2png`.

使用 cron 安排脚本可能更容易。`EDITOR=nano crontab -e`您可以通过编辑 crontab并添加如下一行来每隔一分钟运行一次：

`*/2 * * * * webkit2png -C -s 1 -W 1000 -H 1000 --clipwidth 1000 --clipheight 1000 http://stackoverflow.com -o ~/Desktop/$(date '+\%y\%m\%d\%H\%M\%S').png`

（如果我误解了这个问题并且您实际上是在尝试下载图像，那么类似的东西`curl -O https://stackoverflow.design/assets/img/logos/so/logo-stackoverflow.png`会将具有相同文件名的文件保存到当前目录。）

# ruby-on-rails - RoR 教程 Hartl：第 9.1 章中的失败测试 - ActiveRecord

> ID：11303921
> 
> 赞同：0
> 
> 时间：2012-07-03T03:02:44.270
> 
> 标签：ruby-on-rails

我第一次浏览 Michael Hartl 的教程，并且无法通过第 9 章的第一次测试（[第 9.1.1 节](http://ruby.railstutorial.org/book/ruby-on-rails-tutorial#sec%3aedit_form)通过。我收到了引用 ActiveRecord 问题的返回，但我检查了我的架构和参考代码而且我很难找到我的问题。以前有人因为 users_controller 中缺少一行而遇到过这个问题，但我仔细检查过，这似乎不是我的问题，所以任何帮助都会很大赞赏。

这是我得到的回报：

```
$ bundle exec rspec spec/requests/user_pages_spec.rb -e "edit page"
Run options: include {:full_description=>/(?-mix:edit\ page)/}
FFF

Failures:

  1) User pages signup edit page
     Failure/Error: before { visit signup_path }
     ActiveRecord::StatementInvalid:
       Could not find table 'users'
     # ./app/controllers/users_controller.rb:8:in `new'
     # ./app/controllers/users_controller.rb:8:in `new'
     # ./spec/requests/user_pages_spec.rb:24:in `block (3 levels) in <top (required)>'

  2) User pages signup edit page
     Failure/Error: before { visit signup_path }
     ActiveRecord::StatementInvalid:
       Could not find table 'users'
     # ./app/controllers/users_controller.rb:8:in `new'
     # ./app/controllers/users_controller.rb:8:in `new'
     # ./spec/requests/user_pages_spec.rb:24:in `block (3 levels) in <top (required)>'

  3) User pages signup edit page
     Failure/Error: before { visit signup_path }
     ActiveRecord::StatementInvalid:
       Could not find table 'users'
     # ./app/controllers/users_controller.rb:8:in `new'
     # ./app/controllers/users_controller.rb:8:in `new'
     # ./spec/requests/user_pages_spec.rb:24:in `block (3 levels) in <top (required)>'

Finished in 5.45 seconds
3 examples, 3 failures

Failed examples:

rspec ./spec/requests/user_pages_spec.rb:64 # User pages signup edit page 
rspec ./spec/requests/user_pages_spec.rb:65 # User pages signup edit page 
rspec ./spec/requests/user_pages_spec.rb:66 # User pages signup edit page 
```

还有我的代码——user_pages_spec.rb

```
require 'spec_helper'

describe "User pages" do

  subject { page }

describe "profile page" do
    let(:user) { FactoryGirl.create(:user) }
    before { visit user_path(user) }

    it { should have_selector('h1',    text: user.name) }
    it { should have_selector('title', text: user.name) }
  end

describe "signup page" do
    before { visit signup_path }

    it { should have_selector('h1',    text: 'Sign up') }
    it { should have_selector('title', text: full_title('Sign up')) }
end

describe "signup" do

    before { visit signup_path }

    describe "with invalid information" do
        it "should not create a user" do
            expect { click_button "Create my account"}.not_to change(User, :count)
        end

    describe "with valid information" do
      before do
        fill_in "Name",         with: "Example User"
        fill_in "Email",        with: "user@example.com"
        fill_in "Password",     with: "foobar"
        fill_in "Confirmation", with: "foobar"
      end

it "should create a user" do
        expect do
          click_button "Create my account"
         end.to change(User, :count).by(1)
      end

describe "after saving the user" do
        before { click_button "Create my account" }
        let(:user) { User.find_by_email('user@example.com') }

        it { should have_selector('title', text: user.name) }
        it { should have_selector('div.alert.alert-success', text: 'Welcome') }
        it { should have_link('Sign out') }
        end
     end
end

describe "edit" do
    let(:user) { FactoryGirl.create(:user) }
    before do
      sign_in user
      visit edit_user_path(user)
    end

    describe "page" do
      it { should have_selector('h1',    text: "Update your profile") }
      it { should have_selector('title', text: "Edit user") }
      it { should have_link('change', href: 'http://gravatar.com/emails') }
    end

    describe "with invalid information" do
      before { click_button "Save changes" }

      it { should have_content('error') }
    end
  end
end
end 
```

我确认我的 schema.rb 中有一个 users 表：

```
ActiveRecord::Schema.define(:version => 20120625023223) do

  create_table "users", :force => true do |t|
    t.string   "name"
    t.string   "email"
    t.datetime "created_at",      :null => false
    t.datetime "updated_at",      :null => false
    t.string   "password_digest"
    t.string   "remember_token"
  end

  add_index "users", ["email"], :name => "index_users_on_email", :unique => true
  add_index "users", ["remember_token"], :name => "index_users_on_remember_token"

end 
```

还有我的 users_controller：

```
class UsersController < ApplicationController

 def show
    @user = User.find(params[:id])
  end

  def new
    @user = User.new
  end

def create
    @user = User.new(params[:user])
    if @user.save
      sign_in @user
      flash[:success] = "Welcome to the Sample App!"
     redirect_to @user    
 else
      render 'new'
    end
  end

  def edit
    @user = User.find(params[:id])
  end
end 
```

数据库.yml：

```
# SQLite version 3.x
#   gem install sqlite3
#
#   Ensure the SQLite 3 gem is defined in your Gemfile
#   gem 'sqlite3'
development:
  adapter: sqlite3
  database: db/development.sqlite3
  pool: 5
  timeout: 5000

# Warning: The database defined as "test" will be erased and
# re-generated from your development database when you run "rake".
# Do not set this db to the same as development or production.
test:
  adapter: sqlite3
  database: db/test.sqlite3
  pool: 5
  timeout: 5000

production:
  adapter: sqlite3
  database: db/production.sqlite3
  pool: 5
  timeout: 5000 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T03:36:17.173

当您运行测试时，使用的是测试数据库而不是开发。因此，每当您进行架构更改时，请确保您还运行`rake db:test:prepare`以在开发和测试数据库之间同步这些更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T22:31:11.550

自OP以来已经有一段时间了，但我遇到了同样的问题。环境 Win7 64 位，带有 RailsInstaller。

跑步`rake db:test:prepared`并没有解决它。

跑步`rake db:reset`之后`rake db:test:prepare`终于做到了。

请注意，您必须在重置之前停止服务器。

# java - 在 GUI 中更新 JLabel（setText 不起作用）

> ID：11303931
> 
> 赞同：1
> 
> 时间：2012-07-03T03:04:20.660
> 
> 标签：java, swing, user-interface, jlabel

好吧，我正在制作一个点击游戏，等等等等……重点是，我无法更新 JLabel……我很困惑……看到我以前做过这个……这是我的代码。

```
 import javax.swing.*;
            import java.awt.*;
            import java.awt.event.*;
            public class ClickingGame extends JPanel implements ActionListener {
      private static final long serialVersionUID = 1L;

    static JFrame frame;
    static JButton startbutton, clickingbutton, timerstop;
    static JLabel timelabel, scorelabel;
    static int time = 0;
    static JTextField entertime;
    static Timer clock;
    static Timer countdown;

public ClickingGame() {
    setLayout(new GridLayout(3, 2, 5, 5));

    startbutton = new JButton("Start CountDown");

    timelabel = new JLabel("Time Left = NULL", SwingConstants.CENTER);

    entertime = new JTextField();

    clickingbutton = new JButton("Click Here!");

    scorelabel = new JLabel("Score = NULL", SwingConstants.CENTER);

    timerstop = new JButton("Stop Timer!");

    clock = new Timer(1000, this);

    countdown = new Timer(1000, this);

    add(entertime);
    add(startbutton);
    add(timelabel);
    add(scorelabel);
    add(clickingbutton);
    add(timerstop);
    clickingbutton.setEnabled(false);
    timerstop.setEnabled(false);
    startbutton.addActionListener(this);

}

public static void openGUI() {
    frame = new JFrame("Clicking Game");
    ClickingGame contentpane = new ClickingGame();
    frame.setContentPane(contentpane);
    frame.pack();
    frame.setVisible(true);

}

public void actionPerformed(ActionEvent e) {

    if (e.getSource() == startbutton) {
        startbutton.setEnabled(false);
        clickingbutton.setEnabled(true);
    }

    if (e.getSource() == clickingbutton) {
        int score = 0;
        score++;
        scorelabel.setText("Score = "+score);
        scorelabel.repaint();
    }

}

 } 
```

如您所见，我使用了'setText'方法，但它没有工作...... :(有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T03:07:01.363

您永远不会将 ActionListener 添加到 clickButton。除非它有一个听众，否则它不会工作，对吧？

所以：

```
public ClickingGame() {
  setLayout(new GridLayout(3, 2, 5, 5));
  startbutton = new JButton("Start CountDown");
  timelabel = new JLabel("Time Left = NULL", SwingConstants.CENTER);
  entertime = new JTextField();
  clickingbutton = new JButton("Click Here!");
  scorelabel = new JLabel("Score = NULL", SwingConstants.CENTER);
  timerstop = new JButton("Stop Timer!");
  clock = new Timer(1000, this);
  countdown = new Timer(1000, this);
  add(entertime);
  add(startbutton);
  add(timelabel);
  add(scorelabel);
  add(clickingbutton);
  add(timerstop);
  clickingbutton.setEnabled(false);
  timerstop.setEnabled(false);
  startbutton.addActionListener(this);
  clickingbutton.addActionListener(this);  // ** add this!
} 
```

另外，请改进您的代码格式，特别是如果您要请志愿者帮助您。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T03:08:15.180

您尚未将动作侦听器添加到单击按钮。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T05:34:45.447

在方法 actionPerformed 中，您需要使局部变量“得分”成为一个字段（全局），因此它实际上可以在调用之间增长：

```
int score; // Our field here :)

public void actionPerformed(ActionEvent e) {

    if (e.getSource() == startbutton) {
        score = 0; //Start with 0
        startbutton.setEnabled(false);
        clickingbutton.setEnabled(true);
    }

    if (e.getSource() == clickingbutton) {
        score++; //Add one for each click
        scorelabel.setText("Score = "+score);
        scorelabel.repaint();
    }
} 
```

# c# - 如何通知正在运行的线程应用程序将在.net 中关闭？

> ID：11303933
> 
> 赞同：2
> 
> 时间：2012-07-03T03:04:29.710
> 
> 标签：c#, multithreading

我有一个要求，我需要在辅助线程（长时间运行的进程）中运行一个方法，当应用程序正常/异常关闭时，我需要存储辅助线程的方法的信息，它被处理了多少。

因此，当下一个应用程序启动时，我需要从它停止的点启动辅助线程的方法。

问题：

1.  我们怎样才能实现它？
2.  如何暗示应用程序将要关闭的线程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T03:41:25.230

我想最好的方法是定期保存辅助线程的进度（到磁盘...），并在应用程序（和您的线程）重新启动时从上次保存的点恢复。

在我看来，其他所有方式都像木头一样，很难实现和调试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T03:22:37.633

在辅助线程中，您可以在技术上绑定到[AppDomain.ProcessExit](http://msdn.microsoft.com/en-us/library/system.appdomain.processexit.aspx)和[AppDomain.UnhandledException](http://msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception.aspx)事件。

不过需要注意的是，这两个事件都是最后机会类型的事件，并且对它们有一些警告。在使用它们之前，需要彻底阅读每个事件的 MSDN 文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T03:46:10.487

听起来您的问题是使用`BackgroundWorker`. 它提供进度和取消通知。有关示例，请参阅[BackgroundWorker文档。](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx.)

当您启动或检测到应用程序将要关闭时，您可以调用`CancelAsync`后台工作程序实例。在`BackgroundWorker.DoWork`事件的处理程序中，您可以定期检查事件参数以查看是否请求取消。

# java - PERSISTENT 消息的性能比 NON_PERSISTENT 消息慢得多

> ID：11303935
> 
> 赞同：4
> 
> 时间：2012-07-03T03:04:37.583
> 
> 标签：java, jms, ibm-mq, websphere-7, mq

我发现 PERSISTENT 消息的性能比 NON_PERSISTENT 消息慢得多。我发送和接收了non_persistent消息，性能如下。

```
Method      Number of Msg  Elapsed Time

    Sending   - 500 messages - 00:00:0332
    Receiving - 500 messages - 00:00:0281 
```

我发送和接收持久消息，性能如下。

```
 Sending   - 500 messages - 00:07:0688
    Receiving - 500 messages - 00:06:0934 
```

此行为发生在 MQMessage 和 JMSMessage 中。

感谢所有帮助我解决问题的人。

特别感谢 Shashi、T.Rob 和 Pangea。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T17:32:56.020

鉴于新标题，我发现我现在对这个问题有了回应。

是的，在所有其他方面都相同的情况下，持久消息总是比非持久消息花费更长的时间。不过，它们变慢的程度是高度可调的。为了获得您所看到的结果，队列管理器可能进行了许多最坏情况的调整。以下是一些适用的因素：

*   磁盘是本地的还是网络的。对于 100MBS 和较慢的连接与安装在旋转磁盘上的 NFS 通信，本地驱动器几乎总是快得多。（然而，使用光纤通道和电池支持的缓存控制器安装到 SAN 几乎总是比本地旋转驱动器快。）一个常见的例子是使用消费级 NAS 驱动器。与家庭 NAS 设备一样出色，吞吐量总是比本地磁盘慢。
*   对于本地驱动器，驱动器的速度。较新的“绿色”驱动器改变转速以节省电力。与 10k RPM 驱动器相比，即使是 7200RPM 磁盘也会出现性能下降。
*   对于本地驱动器，碎片程度。即使消息很小，它们也会被放置在可能高度分散的预先分配的日志文件中。
*   将磁盘和日志文件放在同一个本地卷上。这会导致头部争用，因为在控制权返回到应用程序之前，一条消息会写入两个文件。
*   线性与圆形日志。线性较慢，因为日志格式化程序必须每次都为它们分配新的。
*   是否使用同步点。如果在单个工作单元中写入许多消息，WMQ 可以使用缓存写入并优化扇区放置操作。只有 COMMIT 需要成为阻塞调用。

由于非持久性消息完全在内存中处理，或者最多溢出到一个磁盘文件，因此它们不受大多数​​这些问题的影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T03:01:13.717

我相信您的[mirco-benchmarking 存在缺陷](https://stackoverflow.com/questions/504103/how-do-i-write-a-correct-micro-benchmark-in-java/4480774#4480774)（使用错误的基准测试机制，并且您还将 i/o（开始和结束时间计算中的 System.out.println）包含在图片中）。首先使用像[Google 的 Caliper](http://code.google.com/p/caliper/)这样的工具来修正数字，然后寻找答案。上次我知道（我认为是 2003 年），MQ JMS 实现是 Java MQI 类的包装器，我们必须坚持使用 Java MQI 来满足我们的最佳吞吐量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T03:51:08.083

WebSphere MQ JMS 消息带有额外的标头（称为 JMS 标头）以支持 JMS 样式的消息传递。JMSDestination、JMSReplyTo、JMSDeliveryMode、JMSType 等和提供者特定的 JMS 标头是 JMS 标头的一部分。每次发送或接收消息时都会处理这些标头。

另一方面，WebSphere MQ Java 类只发送/接收纯 WMQ 消息。WMQ 消息将具有 MQMD，后跟消息正文。

所以你可以看到区别。JMS 消息的优点是它是基于标准的，并且 JMS 消息是可互操作的。

# android - 以编程方式更改呼叫设置

> ID：11303938
> 
> 赞同：1
> 
> 时间：2012-07-03T03:05:07.307
> 
> 标签：android, settings

我了解目前可以通过[Settings.System](http://developer.android.com/reference/android/provider/Settings.System.html)类及其`putString()`方法更改 Android 系统设置。

但是，我希望以编程方式更改的设置（呼叫设置和呼叫转移下的短信回复）不在此类中。

我将如何修改通话设置？是否有类似于 Settings.System 的类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T06:26:58.293

我相信通话设置中的“短信回复”设置是自定义的。我检查了 2.2、2.3、4.0 版本。此选项在原始通话设置中不可用。这必须来自您的设备制造商方面。

因此，如果您知道字符串名称及其可能的值，则可以更改它。

# php - Magento 产品更新使用 api 和 sybase

> ID：11303948
> 
> 赞同：0
> 
> 时间：2012-07-03T03:06:31.553
> 
> 标签：php, api, magento, soap, sybase

我尝试使用 magento api 更新我的产品价格，但批量数据失败

```
$result = sybase_query("SELECT PartCode,CurrBasicSalesPrice FROM BasicCustPartSalesPrice WHERE CustId='FOO'"); //around 654 results   

while ($row = sybase_fetch_object($result) ) { 
try {
 $r = $this->_client->call($this->_session, 'product.update', array($row->PartCode, array('price' => $row->CurrBasicSalesPrice)));

}catch(Exception $e){

  echo $e->getMessage();  
}
} 
```

如果我使用此查询，这将正常工作

```
 sybase_query("SELECT PartCode,CurrBasicSalesPrice FROM BasicCustPartSalesPrice WHERE CustId='FOO' AND someother='bar'"); //around 30 results 
```

使用 api 进行批量更新是否有任何限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:09:46.603

批量更新标准 Magento 上的任何内容通常会导致问题。您可能希望查看 Urapidflow 或 Magmi 等产品更新的第 3 方替代方案。

# php - 在 htaccess 中使用重写的友好 URL

> ID：11303949
> 
> 赞同：1
> 
> 时间：2012-07-03T03:06:58.000
> 
> 标签：php, .htaccess, mod-rewrite

我有这个网址

```
http://mysite.com/profile?id=78 
```

我想把它改成这样

```
http://mysite.com/78/ 
```

我该怎么做？

我的 htaccess 中有这段代码，但它似乎不起作用。

```
RewriteRule ^id/([a-zA-Z0-9]+)/$ profile?id=$1 
```

请指导我这个。

您的帮助将不胜感激和奖励。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T03:13:06.963

我很确定您应该使用该`RewriteBase`指令

```
RewriteEngine On
RewriteBase /
# Use the following rule if you want to make the page like a directory
RewriteRule ^u/(!(profile.php))$ u/$1/ [R=301,L]
# The following rule does the rewrite.
RewriteRule ^u/(!(profile.php))/$ profile.php?name=$1 [L] 
```

这将重写`http://mysite.com/u/john/`为`http://mysite.com/profile?name=john`.

**编辑**这是新的答案

```
RewriteEngine On
RewriteBase /
# Use the following rule if you want to make the page like a directory
RewriteRule ^u/(!(profile.php))$ u/$1/ [R=301,L]
# The following rule does the rewrite.
RewriteRule ^u/(!(profile.php))/$ profile.php?name=$1 [L]
# The following rewrite the other way round:
RewriteCond %{REQUEST_URI} ^/profile.php
RewriteCond %{THE_REQUEST} ^(GET|POST|HEAD|TRACE)\ /profile.php
RewriteCond %{QUERY_STRING} name=([^&]+)
RewriteRule ^profile.php$ u/%1? [R=301,L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T03:11:03.010

你所拥有的似乎是正确的。但是，该请求可能会再次得到处理。

您可以通过添加`[L]`标志并确保映射到确切的文件来避免这种情况。例如：

```
RewriteEngine On

RewriteRule ^name/([a-zA-Z0-9]+)/?$ profile.php?name=$1 [L] 
```

**注意：**我还使尾部斜杠成为可选的。我明确地把`RewriteEngine On`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T03:10:43.447

您需要在`.htaccess`文件中使用它：

```
RewriteEngine On
RewriteRule ^([^/]*)/$ /profile?name=$1 [L] 
```

我用它来生成它：[http ://www.generateit.net/mod-rewrite/](http://www.generateit.net/mod-rewrite/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T07:31:24.067

我用这种方式解决了它：

```
RewriteEngine On
RewriteBase /
# Use the following rule if you want to make the page like a directory
RewriteRule ^(v)$ /$1/
# The following rule does the rewrite.
RewriteRule ^(.+)/$ profile.php?id=$1
# The following rewrite the other way round:
RewriteCond %{REQUEST_URI} ^/profile.php
RewriteCond %{THE_REQUEST} ^(GET|POST|HEAD|TRACE)\ /profile.php
RewriteCond %{QUERY_STRING} id=([^&]+)
RewriteRule ^profile.php$ %1? 
```

# powershell - 列出共享文件夹和大小的 PowerShell 脚本

> ID：11303956
> 
> 赞同：0
> 
> 时间：2012-07-03T03:08:28.300
> 
> 标签：powershell, shared-directory

谁能帮我创建一个powershell脚本来查看servers.txt中列出的每个服务器，并报告每个共享文件夹的MB使用情况，以及Q上的可用空间大小和百分比：（或所有物理驱动器上的服务器）？每个服务器的数据都将保存为 CSV。因此对于 server1，要创建一个名为 server1.csv 的数据文件。

我进行了搜索，我可以找到一些做类似事情的脚本，但没有一个完全适合我的目的，所以我看看是否有人能够提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T09:54:21.287

尝试类似：

```
function get_MB
{
get-content C:\temp\servers.txt

foreach($server in $servers)
{
$_.item | Measure-Object -property length -sum \1mb

out-file C:\temp\serverresults.txt
}
} 
```

# opencv - OpenCV：如何在多边形内找到像素？

> ID：11303960
> 
> 赞同：4
> 
> 时间：2012-07-03T03:08:48.207
> 
> 标签：opencv

假设我们正在处理具有黑色前景和白色背景的二进制图像。是否有任何有效的方法可以在由顶点坐标列表指定的多边形中找到黑色像素？

从多边形计算边界框并不理想，因为可能有许多位置很近的多边形，其边界框可能重叠。

当然，蛮力法会先从整幅图像中找到黑色像素，然后对每个黑色像素进行多边形测试，这对于这项任务来说太耗时了。

欢迎任何建议！

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T04:00:31.003

根据您的工作流程或最终目标，以下内容可能对您有用。

用于`cvFillPoly`创建多边形的二进制蒙版，然后使用`cvCopy`创建到白化数组的蒙版来制作图像的副本，因此唯一的黑色像素是多边形中的像素。

`pointPolygonTest`或者您可以使用[光线投射算法](http://en.wikipedia.org/wiki/Point_in_polygon)代替使用，并且仅在您有奇数个交叉点时检查像素是否为黑色。

自己执行光线投射算法可以节省大量调用 pointPolygonTest 的时间。

您可能会遇到这样一种情况，即一个点所在的扫描线具有一个占据整条线的多边形。

光线投射算法从一侧计算多边形线交叉点，直到它到达被测试的点。如果有 m 个线段，我们执行 m 个线段射线相交，对它们进行排序，并计算发生了多少。

如果您使用 pointPolygonTest 您必须对每个点都执行此操作，但是您为这条线上的 n 个点测试的所有光线都与这条线相交，并且它们与线段的交点都发生在同一个地方，所以你可以通过自己编写算法并在交叉次数为奇数时对其进行扩充以检查黑色像素来节省所有这些重新计算。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T06:14:10.027

`findContours`功能呢？似乎它会帮助你。

# c# - modalpopupextender 使用 .show() 时无法识别 BackgroundCssClass

> ID：11303961
> 
> 赞同：1
> 
> 时间：2012-07-03T03:08:49.183
> 
> 标签：c#, asp.net, modalpopupextender

在后面的代码中使用 .show() 时，我在显示 modalpopupextender 时遇到问题。

使用链接按钮时，模态弹出窗口完全按预期工作，但是当我从后面的代码调用它时，弹出窗口不是模态的，我可以在文本框中输入数据，单击其他按钮等。注意链接按钮通常会被隐藏样式=“显示：无；”。

我正在尝试设置弹出窗口以根据单击的按钮显示一条消息。

我已经复制了下面的代码（删除了额外的表格细节以节省空间）。

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Site.Master" AutoEventWireup="true" CodeBehind="FrmTransaction.aspx.cs" Inherits="Cloud9.FrmTransaction" %>
<asp:Content ID="Content1" ContentPlaceHolderID="HeadContent" runat="server">
</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
    <ajax:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server" />

    <div runat="server" id="PageDetailDiv" class="pagedetail">
        <asp:ValidationSummary runat="server" />

        <asp:Table runat="server" HorizontalAlign="Center" Width="80%">
            <asp:TableRow runat="server">
                <asp:TableCell runat="server">
                    <asp:Label runat="server" ID="lblMsg" CssClass="Msg" EnableViewState="false" />
                </asp:TableCell>
            </asp:TableRow>
            <asp:TableRow ID="trSearch" runat="server">
                <asp:TableCell runat="server">
                    <div align="left">
                        <asp:Label CssClass="formCapture" Text='Field' runat="server" ID="lblSearchField" AssociatedControlID="tbSearchField" />
                        <obout:OboutTextBox FolderStyle="Styles/Obout/TextBox" runat="server" ID="tbSearchField" Width="300px" />
                        <br />
                        <asp:Label CssClass="formCapture" Text='Lookup' runat="server" ID="lblSearch" AssociatedControlID="tbSearch" />
                        <obout:OboutTextBox FolderStyle="Styles/Obout/TextBox" runat="server" ID="tbSearch" Width="300px" />
                        <asp:Button ID="SearchButton" runat="server" Text="Find" CommandName="Search" CausesValidation="False"
                            OnCommand="btnClick_Search" CssClass="btnDefault" onMouseOver="this.CssClassName='btnDefaultHover'" onMouseOut="this.CssClassName='btnDefault'" />
                    </div>
                </asp:TableCell>
            </asp:TableRow>
        </asp:Table>

        <asp:Table runat="server" HorizontalAlign="Center" Width="80%">
            <asp:TableRow ID="trButton" runat="server">
                <asp:TableCell>
                    <div align="center">
                        <asp:Button id="btnInsert" runat="server" Text="Insert" CommandName="Insert" CausesValidation="True" OnCommand="btnClick_Insert"
                            CssClass="btnDefault" onMouseOver="this.CssClassName='btnDefaultHover'" onMouseOut="this.CssClassName='btnDefault'"/>
                        &nbsp; 
                        <asp:Button id="btnUpdate" runat="server" Text="Update" CommandName="Update" CausesValidation="True" OnCommand="btnClick_Update"
                            CssClass="btnDefault" onMouseOver="this.CssClassName='btnDefaultHover'" onMouseOut="this.CssClassName='btnDefault'"/>
                        &nbsp; 
                        <asp:Button id="btnDelete" runat="server" Text="Delete" CommandName="Delete" CausesValidation="False" OnCommand="btnClick_Delete"
                            CssClass="btnDefault" onMouseOver="this.CssClassName='btnDefaultHover'" onMouseOut="this.CssClassName='btnDefault'"/>
                        &nbsp; 
                        <asp:Button id="btnCancel" runat="server" Text="Cancel" CommandName="Cancel" CausesValidation="False" OnCommand="btnClick_Cancel" 
                            CssClass="btnDefault" onMouseOver="this.CssClassName='btnDefaultHover'" onMouseOut="this.CssClassName='btnDefault'"/>
                    </div>
                </asp:TableCell>
            </asp:TableRow>
        </asp:Table>

        <asp:Panel CssClass="modalPopup" runat="server" ID="pnlMessage" >
            <asp:Label runat="server" ID = "lblMessg" />
            <br />
            <asp:Button id="btnOKMessage" Text="OK!" Runat="server" UseSubmitBehavior="false" CausesValidation="false" OnCommand="btnClick_Cancel"
                class="btnPgeSmall" onMouseOver="this.className='btnPgeSmallHover'" onMouseOut="this.className='btnPgeSmall'" />
        </asp:Panel>

        <asp:LinkButton ID="UsedByModal" Text="here" runat="server" />
        <ajax:ModalPopupExtender ID="ModalPopupExtender1" runat="server" PopupControlID="pnlMessage" TargetControlID="UsedByModal"
            BackgroundCssClass="modalBackground" CancelControlID="btnOKMessage" OkControlID="btnOKMessage" />
    </div>
</asp:Content> 
```

CSS的相关部分......

```
.modalBackground {
    background-color:Gray;
    filter:alpha(opacityp);
    opacity:0.7;
}

.modalPopup {
    background-color:#F6F6EA;
    border-width:3px;
    border-style:solid;
    border-color:#c0c0c0;
    padding:3px;
    width:50%;
} 
```

过去 3 天我一直在寻找答案，现在完全陷入困境。任何帮助或指导将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T05:42:05.670

这个类对我来说产生了正确的结果，你可以修改它以满足你的需要。

```
.modalBackground
{
    background-color: #000000;
    opacity: .15;
    filter: alpha(opacity=15);
    -moz-opacity: .15;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T06:11:00.343

找到了！

为了找到问题，我重写了删除所有控件的页面，并从一个带有 1xTextbox 和 1xButton 以及 asp:Modalpopupextender 的简单页面开始，并确保一切都按预期工作。然后我开始向页面测试添加控件/功能。长话短说，问题在于 asp:ValidationSummary。

然后，我在没有 ValidationSummary 控件的情况下重新设置了页面（如上所示），这一切都很好。

我还不明白为什么这解决了问题，但页面和弹出窗口工作。

如果有人有解释，我将不胜感激！

谢谢

# iphone - iphone Mail App Popup 样式 alertview

> ID：11303968
> 
> 赞同：0
> 
> 时间：2012-07-03T03:10:48.540
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我想我有一个金发的时刻。当您单击编辑-> 选择电子邮件-> 而不是单击删除时，iPhone 邮件应用程序使用的控件是什么。出现一个弹出窗口说“删除消息”或“取消”。

我只是想知道拥有“删除消息”和“取消”按钮的控件是什么？有任何想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T04:34:34.353

您可以像这样实现自定义弹出窗口：

```
@implementation UIView(Animation)

    -(void)animationElasticPopup {    
    self.transform = CGAffineTransformMakeScale(0.001f, 0.001f);

    [UIView animateWithDuration:0.4 animations:^{
        [UIView setAnimationDelay:0];
        self.transform = CGAffineTransformMakeScale(1.1f, 1.1f);//1.1
        self.alpha = 1.f;
    } completion:^(BOOL finished) {
        [UIView animateWithDuration:0.1 animations:^{            
            self.transform = CGAffineTransformMakeScale(0.9f, 0.9f);//0.9
        } completion:^(BOOL finished) {            
            [UIView animateWithDuration:0.1 animations:^{                
                self.transform = CGAffineTransformMakeScale(1.f, 1.f);//1.0
            } completion:^(BOOL finished) {
            }];            
        }];
    }];}

@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T03:14:30.413

`UIActionSheet`或`UIAlertView`..我不确定您在说什么，但它必须是两者之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T03:21:12.050

[`UIActionSheet`](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIActionSheet_Class/Reference/Reference.html)是您要查找的类，显示一个非常简单，并且很像 UIAlertView。

```
UIActionSheet *confirmationSheet = [[UIActionSheet alloc] initWithTitle:@"Are you sure you want to cancel?" delegate:self cancelButtonTitle:@"Cancel" destructiveButtonTitle:@"Delete" otherButtonTitles:@"Save Draft", nil]
[confirmationSheet showFromToolbar:self.myToolbar]; 
```

# symfony1 - 如何在 localhost 中运行现有的 symfony 1.4.18 项目

> ID：11303974
> 
> 赞同：1
> 
> 时间：2012-07-03T03:11:19.763
> 
> 标签：symfony1, symfony-1.4, localhost

我在一个名为 symfony 的文件夹中拥有所有 symfony 1.4.18 源文件。我有数据库。

在这个 symfony 文件夹下，它有应用程序、缓存、配置、数据、库、日志、插件、测试、网络、.gitignore、symfony

我需要做什么才能使其在另一个共享主机服务器中工作？

如何更改配置文件以使其在本地主机中运行？config文件如下 config文件夹下的vhost.conf文件

```
DocumentRoot /var/www/vhosts/example.com/httpdocs/web

<Directory /var/www/vhosts/example.com/httpdocs/web>
 Options +FollowSymlinks
 php_admin_value open_basedir
 "/var/www/vhosts/example.com/httpdocs:/tmp:/usr/local/php:/usr/share/pear"
</Directory> 
```

属性.ini 文件

```
[prod]
host=youripaddress
port=22
user=yourusername
dir=/var/www/vhosts/example.com/httpdocs/
type=rsync
password=yourpassword 
```

数据库.yml

```
all:
doctrine:
  class: sfDoctrineDatabase
  param:
    dsn: 'mysql:host=localhost;dbname=yourdbname'
    username: yourdbusername
    password: yourdbpassword
    attributes:
      default_table_type: InnoDB
      default_table_collate: utf8_unicode_ci
      default_table_charset: utf8
      use_dql_callbacks: true 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:12:01.880

您应该在本地创建一个虚拟主机（这取决于您的操作系统，如果您不知道，请搜索网络）并将 DocumentRoot 指向您的 symfony 文件夹中的“web”文件夹。

vhost.conf 文件是此类 vhost 配置的示例文件。
请记住将所有路径更改为您的实际本地路径。

对于您的本地设置，请使用开发环境。因此，在 resp 中输入所有本地参数，例如 pathes 和 db conf。配置文件 (config_dev.ym) 或部分 ([dev])。

然后你可以调用： [http://mylocal.virtualhost/app_dev.php](http://mylocal.virtualhost/app_dev.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T14:47:24.623

@ivoba 我说的项目是 symfony 1.4.18。我知道如何在本地创建虚拟主机并指向 web 文件夹。假设我在 D 驱动器中安装了 xampp，假设我已将 symfony.dev 指向 D:\xampp\htdocs\symfony\web

```
DocumentRoot D:/xampp/htdocs/symfony/web
<Directory D:/xampp/htdocs/symfony/web>
Options +FollowSymlinks
php_admin_value open_basedir
   "D:/xampp/htdocs/symfony:/tmp:D:/xampp/php:/usr/share/pear"
</Directory> 
```

properties.ini 文件应该是

```
[prod]  
host=localhost
port=22
user=
dir=D:/xampp/htdocs/symfony
type=rsync
password= 
```

我的配置是对的吗？我应该能够访问[symfony.dev/index.php](http://symfony.dev/index.php)或[symfony.dev/frontend_dev.php](http://symfony.dev/frontend_dev.php)，对吗？

# wcf - 如何为 WCF 行为编写单元测试？

> ID：11303977
> 
> 赞同：2
> 
> 时间：2012-07-03T03:12:24.990
> 
> 标签：wcf, unit-testing

> **可能重复：**
> [对 WCF 行为扩展进行单元测试](https://stackoverflow.com/questions/10432147/unit-testing-a-wcf-behavior-extension)

我是单元测试的新手。当我扩展 WCF 行为时，如何为方法编写单元测试。由于我不确定何时实例化该类，或者我无法更改方法签名。在行为实现中，我正在获取标题并在配置中查找一个值。

```
public class IncomingValidator : IDispatchMessageInspector
{

    public object AfterReceiveRequest(ref Message request, IClientChannel channel, InstanceContext instanceContext)
    {
            // Grab the header and see if one of the particular values(read from config) is there. 
    }

    public void BeforeSendReply(ref Message reply, object correlationState)
    {
    }
} 
```

# jsf - JSF 手动刷新问题

> ID：11303980
> 
> 赞同：1
> 
> 时间：2012-07-03T03:12:52.010
> 
> 标签：jsf, jsf-2, refresh

我需要你的帮助 。

我正在使用 jsf2.0 和 primefaces 3.2 开发一个简单的项目。

我有 2 页首先是 page1.xhtml 其中包含：

```
 <p:column>
            <p:panel header="#{ct.coTypeName}" >
                <h:panelGrid columns="1" width="100" height="100">
                    <h:outputText value="#{ct.coTypeId}" />

                    <p:commandLink       action="distributer/distributersList.xhtml">
                        <h:graphicImage  url="/resources/images/homePagecartoonBusinessMan.jpg" width="100" height="100"/>
                        <f:param name="bt" value="dist" />
                        <f:param name="ti" value="#{ct.coTypeId}" />
                    </p:commandLink>

                </h:panelGrid>
            </p:panel>

        </p:column>

    </p:dataGrid> 
```

当我按下命令链接时，它会将我转发到另一个页面“distributer/distributersList.xhtml”，该页面有一个 selectOneMenu，直到我手动刷新页面才会显示其项目，这仅在 IE“我正在使用 Internet Explorer 8”时发生，但是chrome 或 firefox 不会发生此问题。

我收到 javascript 错误 ..网页错误详细信息

```
Message: Object expected
Line: 19
Char: 1
Code: 0
URI: http://localhost:8089/pro/

Message: Object doesn't support this property or method
Line: 1
Char: 5500
Code: 0
URI: http://localhost:8089/pro/faces/javax.faces.resource/primefaces.js?          ln=primefaces&v=3.2 
```

selectonemenucode 是：

```
<p:selectOneMenu value="#{bussinessOwnersViewerMB.selectedCity}" effect="fold" immediate="true"> 

            <f:selectItems value="#{bussinessOwnersViewerMB.cities}" var="city" itemLabel="#{city.cityName}" itemValue="#{city.cityId}"/>  

         </p:selectOneMenu> 
```

城市数组列表的吸气剂是：

```
public ArrayList<CityDto> getCities() {
    cities = cb.laodAllCities();
    System.out.println(">>>>"+cities.size());
        return cities;
} 
```

和system.out ..给我正确的arraylist大小的消息，但dropdownList项目在我刷新页面之前不会出现！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T05:16:21.930

elgohary 做一件事，亲爱的，取一个布尔变量，比如 isLoaded，并在 Lode 方法中放入下面的代码

`

```
 if (isLoaded)
    {
        return;
    }
    isLoaded = true; 
```

`以及您需要在该操作中刷新页面的位置，请执行以下操作

```
isLoaded=false; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T03:31:09.520

如果使用 f:selectItems 标签，则不需要 itemLabel 和 itemValue 标签。当您使用不带“s”的 f:selectItem 时将需要这些标签。试试这个示例

```
 <f:selectItems value="#{bussinessOwnersViewerMB.cityList}" var="city"> 
```

这是获取城市的示例方法

```
 List<SelectItem> cityList = new ArrayList<SelectItem>();
        for (City city : cities) {
            SelectItem item = new SelectItem();
            item.setLabel(city.getCityName());
            item.setValue(city.getCityId());
            cityList.add(item);
     } 
```

将 f:selectItems 值与更改原始城市列表的 cityList（检查上述内容）绑定。

# sql-server - 将xml插入sql server

> ID：11303982
> 
> 赞同：0
> 
> 时间：2012-07-03T03:12:56.960
> 
> 标签：sql-server, xml

好的，所以我知道还有很多其他关于将 xml 导入到 sql server 的帖子，但我似乎无法弄清楚。我认为我的问题可能与多层次有关。任何人都可以帮忙吗？我的 xml、sql 表和我尝试过的代码。

提前致谢。

```
<items>
  <item>
    <sku>
      <value>
        the_sku
      </value>
    </sku>
    <short_dis2>
      <value>
        short_discription2
      <value/>
    </short_dis2>
    <short_dis1>
      <value>
        short_discription1
      </value>
    </short_dis1>
    <title>
      <value>
        product_title
      </value>
    </title>
    <detailSpec>
      <value>
        detailed_specification_html
      </value>
    </detailSpec>
    <basicSpec>
      <value>
        basic_overview_html 
      </value>
    </basicSpec>
    <basicSpecHeading>
      <value>
        besic_spec_heading
      </value>
    </basicSpecHeading>
    <detailSpecHeading>
      <value>
        detailed_specifications_heading
      </value>
    </detailSpecHeading>
    <model>
      <value>
        the_model_number
      </value>
    </model>
    <image_file_name>
      <value>
        the_image_url
      </value>
    </image_file_name>
  </item>
  ... 
```

```
CREATE TABLE [dbo].[products](
    [sku] [nchar](15) NOT NULL,
    [model] [nvarchar](50) NULL,
    [title] [ntext] NULL,
    [short_dis1] [ntext] NULL,
    [short_dis2] [ntext] NULL,
    [basicSpecHeading] [ntext] NULL,
    [basicSpec] [ntext] NULL,
    [detailSpecHeading] [ntext] NULL,
    [detailSpec] [ntext] NULL,
    [image_file_name] [nchar](100) NULL 
```

* * *

```
INSERT INTO products (sku, short_dis2,short_dis1,title,detailSpec,basicSpec,basicSpecHeading,detailSpecHeading,model,image_file_name) 
SELECT X.product.query('sku').value('.', 'nchar(15)'),
       X.product.query('short_dis2').value('.', 'nvarchar(max)'),
       X.product.query('short_dis1').value('.', 'nvarchar(max)'),
       X.product.query('title').value('.', 'nvarchar(max)'),
       X.product.query('detailSpec').value('.', 'nvarchar(max)'),
       X.product.query('basicSpec').value('.', 'nvarchar(max)'),
       X.product.query('basicSpecHeading').value('.', 'nvarchar(max)'),
       X.product.query('detailSpecHeading').value('.', 'nvarchar(max)'),
       X.product.query('model').value('.', 'nvarchar(max)'),
       X.product.query('image_file_name').value('.', 'nvarchar(max)')
FROM ( 
SELECT CAST(x AS XML)
FROM OPENROWSET(
     BULK 'C:\users\me\desktop\xml_sample.xml',
     SINGLE_BLOB) AS T(x)
     ) AS T(x)
CROSS APPLY x.nodes('Products/Product') AS X(product); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T04:40:35.413

你可以尝试这样的事情：

```
DECLARE @Input XML

SELECT @input = CAST(BulkColumn AS XML)
FROM OPENROWSET (BULK 'C:\users\me\desktop\xml_sample.xml', SINGLE_BLOB) AS XMLDATA

INSERT INTO products (sku, short_dis2, short_dis1, title, detailSpec, 
                      basicSpec, basicSpecHeading, detailSpecHeading, model, image_file_name) 
   SELECT
      Item.value('(sku/value)[1]', 'nchar(15)'),
      Item.value('(short_dis2/value)[1]', 'nvarchar(max)'),
      Item.value('(short_dis1/value)[1]', 'nvarchar(max)'),
      Item.value('(title/value)[1]', 'nvarchar(max)'),
      Item.value('(detailSpec/value)[1]', 'nvarchar(max)'),
      Item.value('(basicSpec/value)[1]', 'nvarchar(max)'),
      Item.value('(basicSpecHeading/value)[1]', 'nvarchar(max)'),
      Item.value('(detailSpecHeading/value)[1]', 'nvarchar(max)'),
      Item.value('(model/value)[1]', 'nvarchar(max)'),
      Item.value('(image_file_name/value)[1]', 'nvarchar(max)')
   FROM 
      @input.nodes('/items/item') AS Tbl(Item) 
```

另请注意：`NTEXT`已弃用 - 您也应该`NVARCHAR(MAX)`在表定义中使用。

# python - addstr 导致 getstr 返回信号

> ID：11303986
> 
> 赞同：1
> 
> 时间：2012-07-03T03:13:26.503
> 
> 标签：python, ncurses, curses

我有一个基本上有两个“线程”的重新设计的 python 诅咒代码。它们不是真正的线程——一个是主子窗口处理函数，第二个是不同的子窗口处理函数，在定时器上执行。我遇到了一个有趣的效果：

*   主窗口代码正在使用 getstr() 等待用户输入。
*   与此同时，定时器中断会到来，中断代码会在不同的子窗口中输出一些东西。
*   计时器函数的输出将导致 getstr() 返回空输入。

什么可能导致这种影响？除了检查返回字符串之外，还有什么方法可以避免这种影响？

* * *

重现问题的示例代码：

```
#!/usr/bin/env python
# Simple code to show timer updates

import curses
import os, signal, sys, time, traceback
import math

UPDATE_INTERVAL = 2
test_bed_windows = []
global_count = 0

def signal_handler(signum, frame):
    global test_bed_windows
    global global_count

    if (signum == signal.SIGALRM):
        # Update all the test bed windows
        # restart the timer.
        signal.alarm(UPDATE_INTERVAL)
        global_count += 1

        for tb_window in test_bed_windows:
            tb_window.addstr(1, 1, "Upd: {0}.{1}".format(global_count, test_bed_windows.index(tb_window)))
            tb_window.refresh()
    else:
        print("unexpected signal: {0}".format(signam))
        pass

def main(stdscr):
    # window setup
    screen_y, screen_x = stdscr.getmaxyx()
    stdscr.box()

    # print version
    version_str = " Timer Demo v:0 "
    stdscr.addstr(0, screen_x - len(version_str) - 1, version_str)
    stdscr.refresh()

    window = stdscr.subwin(screen_y-2,screen_x-2,1,1)

    for i in range(3):
        subwin = window.derwin(3,12,1,2 + (15*i))

        test_bed_windows.append(subwin)
        subwin.box()
        subwin.refresh()

    signal.signal(signal.SIGALRM, signal_handler)
    signal.alarm(UPDATE_INTERVAL)

    # Output the prompt and wait for the input:
    window.addstr(12, 1, "Enter Q/q to exit\n")
    window.refresh()

    the_prompt = "Enter here> "
    while True:
        window.addstr(the_prompt)
        window.refresh()

        curses.echo()
        selection = window.getstr()
        curses.noecho()

        if selection == '':
            continue
        elif selection.upper() == 'Q':
            break
        else:
            window.addstr("Entered: {0}".format(selection))
            window.refresh()

if __name__ == '__main__':
    curses.wrapper(main) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T00:15:15.467

我怀疑不是写入子窗口导致 getstr() 返回一个空字符串，而是警报信号本身。（从信号处理程序中写入窗口可能也没有很好的定义，但这是一个单独的问题。）

Python 的 curses 模块通常建立在 C 库 Curses 之上，当任何信号（除了它内部处理的少数信号）进入时，它的大部分阻塞输入调用都会返回。在 C 中，有一个针对这种情况定义的 API（该函数返回 -1 并将 errno 设置为 EINTER）。

Python 模块表示，如果 curses 函数返回错误，它将引发异常。我不确定为什么在这种情况下它不这样做。

编辑：一个可能的解决方案是使用比 curses 更适合程序员的控制台 UI 库。[Urwid](http://excess.org/urwid/)出现（在我对手册的简短浏览中）支持事件驱动的 UI 更新（包括计时器更新），同时处理键盘输入。与处理信号和诅咒之间粗略且记录不充分的交互相比，学习这一点可能更容易。

[编辑：来自getch()](http://linux.die.net/man/3/getch)的手册页：

> SVr4 和 XSI 诅咒文档中未指定在处理信号存在时 getch 和朋友的行为。在历史 curses 实现中，它取决于操作系统的处理信号接收实现是否中断正在进行的 read(2) 调用，并且（在某些实现中）取决于输入超时或非阻塞模式是否已经放。
> 
> 关心可移植性的程序员应该为以下两种情况中的任何一种做好准备：（a）信号接收不会中断getch；(b) 信号接收中断 getch 并使其返回 ERR 并将 errno 设置为 EINTR。*在**ncurses**实现下，处理的信号永远不会中断**getch***。

我尝试使用**getch**而不是**getstr**并且它确实在信号上返回 -1。如果由**getstr**实现，那（负返回值）将解决这个问题。所以现在的选项是（1）编写自己的带有错误处理的 getstr 或（2）**使用**[Urwid](http://excess.org/urwid/)。这可能是 Python 库的错误吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T00:33:49.760

这仅供参考。因此，为了以最简单的方式解决这个问题，我只是编写了自己的函数来完成[getstr()](http://docs.python.org/library/curses.html#curses.window.getstr)所做的事情和一些事情。它不会因错误而退出。欢迎所有评论，更正，优化。

```
'''
Function to read a string from the current cursor position.
It supports some simple editing: Ctrl+A, Ctrl+E, Backspace, Del, Home, End,
'''
def getstr(window, prompt = "> ", end_on_error = False):
    result = ""
    starty, startx = window.getyx()
    window.move(starty, 0)
    window.deleteln()
    window.addstr(prompt)
    window.refresh()
    window.keypad(True)

    starty, startx = window.getyx()
    endy, endx = window.getyx()
    maxy, maxx = window.getmaxyx()
    while True:
        try:
            selection = -1
            while (selection < 0 and end_on_error == False):
                selection = window.getch()
        except:
            e = sys.exc_info()[0]
            window.addstr("<p>Error: %s</p>" % e)
            break

        if (selection == curses.KEY_ENTER or selection == ord('\n')):
            break
        elif (selection == curses.KEY_HOME or selection == 1):
            window.move(starty, startx)
            continue
        elif (selection == curses.KEY_END or selection == 5):
            window.move(endy, endx)
            continue
        elif (selection == curses.KEY_DC):
            cy, cx = window.getyx()
            window.delch()
            result = result[:(cx - startx)] + result[(cx - startx + 1):]
            endx -= 1
            continue
        elif (selection == curses.KEY_LEFT):
            cy, cx = window.getyx()
            if (cx > startx):
                window.move(cy, cx-1)
            continue
        elif (selection == curses.KEY_RIGHT):
            cy, cx = window.getyx()
            if (cx < endx):
                window.move(cy, cx+1)
            continue
        elif (selection == curses.KEY_BACKSPACE or selection == 127):
            cy, cx = window.getyx()
            if (cx == startx):
                # no more to backspace
                continue
            else:
                window.move(cy, cx-1)
                window.delch()
                endx -= 1
                cx -= 1
                result = result[:(cx - startx)] + result[(cx - startx + 1):]
                continue
        else:
            endy, endx = window.getyx()
            if (selection < 256 and endx+1 < maxx):
                result = result[:(endx - startx)] + chr(selection) + result[(endx - startx):]
                window.addstr(result[(endx - startx):])
                window.move(endy, endx+1)
                endy, endx = window.getyx()

    window.keypad(False)
    output(result)
    return result 
```

# css - overflow-y: auto|scroll 导致水平移位

> ID：11303989
> 
> 赞同：0
> 
> 时间：2012-07-03T03:14:13.547
> 
> 标签：css, overflow, centering

我遇到了类似于[将溢出-y 添加到块元素导致宽度减小的问题。](https://stackoverflow.com/questions/7504896/adding-overflow-y-to-block-element-causes-width-to-decrease)，但我希望我的右 div 水平居中。所以我有“边距：自动；” 在右边的 div 上。

在我将“overflow-y：auto”（或滚动）添加到右侧 div 之前，这一直很好。在此之前，边距是从整个页面宽度测量的。添加后，它从左侧 div 的右边缘开始测量，因此它不是以页面为中心，而是以页面的其余部分为中心。

问题的简单演示：

[http://dev.bridgebase.com/barmar_test/demo-overflow.php](http://dev.bridgebase.com/barmar_test/demo-overflow.php)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T08:24:47.377

当您在 上添加`overflow`属性时`div`，您定义了一个新的格式化上下文。如[MDN 关于此主题的文档](https://developer.mozilla.org/en-US/docs/CSS/Block_formatting_context)中所述，`float`影响仅限于特定的格式上下文。格式化上下文由上述文档中列出的特定规则定义。

`position: absolute`是一种解决方案，但您必须了解绝对定位的元素是相对于它们最后定位的祖先定位的（即一个具有`position`不同值的属性`static`（默认值）的元素）。还要[看看 MDN](https://developer.mozilla.org/en-US/docs/CSS/position)来完全掌握这个概念。

您可以[在 SitePoint 上阅读这篇](http://reference.sitepoint.com/css/floatclear)深入解释浮动元素的文章。*您应该对Floating Versus Absolute Positioning for Multi-column Layouts*部分更感兴趣。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T03:20:52.243

您可以添加位置：绝对；到侧边栏以达到与第二个示例相同的效果。

# c++ - 浮点数学向量化，但整数数学不

> ID：11303991
> 
> 赞同：3
> 
> 时间：2012-07-03T03:14:26.440
> 
> 标签：c++, optimization, assembly, sse, vectorization

我有一个紧密的内部循环，它正在消耗相当多的 CPU 功率。所以我正在尝试优化它。我有两个版本的代码，一个在浮点数上运行，另一个在`uint8_t`. 浮点版本要快一点，因为它是矢量化的，而整数数学则没有。反正有没有强制整数数学矢量化？那是可能的吗？最后，有用吗？还是整数数学被高估了？

```
#include <algorithm>
#include <array>
typedef std::array<float, 3> Vec3F;
Vec3F v3fSpread(Vec3F const& source, Vec3F dest, float drop) {
  if (source[0] <= dest[0] + drop && source[1] <= dest[1] + drop && source[2] <= dest[2] + drop) {
    return dest;
  } else {
    float denom = std::max(source[0], std::max(source[1], source[2]));
    dest[0] = std::max(source[0] - drop * source[0] / denom, dest[0]);
    dest[1] = std::max(source[1] - drop * source[1] / denom, dest[1]);
    dest[2] = std::max(source[2] - drop * source[2] / denom, dest[2]);
    return dest;
  }
} 
```

组装成（56行）：

```
v3fSpread(std::array<float, 3ul> const&, std::array<float, 3ul>, float):
movq    %xmm0, -40(%rsp)
movaps  %xmm2, %xmm0
movd    %xmm1, %rax
movss   -40(%rsp), %xmm6
movl    %eax, -32(%rsp)
movss   (%rdi), %xmm1
addss   %xmm6, %xmm0
movss   -36(%rsp), %xmm7
movss   -32(%rsp), %xmm8
movss   4(%rdi), %xmm3
ucomiss %xmm1, %xmm0
jb  .L24
movaps  %xmm2, %xmm0
movss   8(%rdi), %xmm4
addss   %xmm7, %xmm0
ucomiss %xmm3, %xmm0
jae .L4
.L5:
movaps  %xmm4, %xmm0
movaps  %xmm1, %xmm5
maxss   %xmm3, %xmm0
mulss   %xmm2, %xmm5
maxss   %xmm1, %xmm0
divss   %xmm0, %xmm5
subss   %xmm5, %xmm1
movaps  %xmm2, %xmm5
mulss   %xmm3, %xmm5
mulss   %xmm4, %xmm2
maxss   %xmm1, %xmm6
divss   %xmm0, %xmm5
movss   %xmm6, -24(%rsp)
divss   %xmm0, %xmm2
subss   %xmm5, %xmm3
maxss   %xmm3, %xmm7
movss   %xmm7, -20(%rsp)
movq    -24(%rsp), %xmm0
subss   %xmm2, %xmm4
maxss   %xmm4, %xmm8
movss   %xmm8, -16(%rsp)
movd    -16(%rsp), %xmm1
ret
 .L24:
movss   8(%rdi), %xmm4
jmp .L5
.L4:
movaps  %xmm2, %xmm0
addss   %xmm8, %xmm0
ucomiss %xmm4, %xmm0
jb  .L5
movss   %xmm6, -24(%rsp)
movss   %xmm7, -20(%rsp)
movss   %xmm8, -16(%rsp)
movq    -24(%rsp), %xmm0
movd    -16(%rsp), %xmm1
ret 
```

和：

```
#include <algorithm>
#include <array>
#include <inttypes.h>
typedef std::array<uint8_t, 3> Vec3B;
typedef std::array<int32_t, 3> Vec3I;
Vec3B v3bSpread(Vec3B const& source, Vec3B dest, int32_t drop) {
  Vec3I intSource = {source[0], source[1], source[2]};
  Vec3I intDest = {dest[0], dest[1], dest[2]};
  if (intSource[0] <= intDest[0] + drop && intSource[1] <= intDest[1] + drop && intSource[2] <= intDest[2] + drop) {
    return dest;
  } else { 
    int32_t denom = std::max(intSource[0], std::max(intSource[1], intSource[2]));
    dest[0] = (uint8_t)std::max<int32_t>(intSource[0] - drop * intSource[0] / denom, intDest[0]);
    dest[1] = (uint8_t)std::max<int32_t>(intSource[1] - drop * intSource[1] / denom, intDest[1]);
    dest[2] = (uint8_t)std::max<int32_t>(intSource[2] - drop * intSource[2] / denom, intDest[2]);
    return dest;
  } 
} 
```

组装成（68行）：

```
v3bSpread(std::array<unsigned char, 3ul> const&, std::array<unsigned char, 3ul>, unsigned int):
pushq   %rbx
movzbl  %sil, %r11d
movl    %esi, %ebx
movzbl  (%rdi), %r8d
movzbl  %r11b, %eax
shrw    $8, %bx
addl    %edx, %eax
shrl    $16, %esi
movzbl  1(%rdi), %r10d
movl    %edx, %r9d
movzbl  2(%rdi), %edi
cmpl    %eax, %r8d
ja  .L4
movzbl  %bl, %eax
addl    %edx, %eax
cmpl    %eax, %r10d
jbe .L10
.L4:
cmpl    %edi, %r10d
movl    %edi, %ecx
movl    %r8d, %eax
cmovge  %r10d, %ecx
cmpl    %ecx, %r8d
cmovge  %r8d, %ecx
imull   %r9d, %eax
xorl    %edx, %edx
divl    %ecx
subl    %eax, %r8d
movl    %r10d, %eax
cmpl    %r11d, %r8d
cmovge  %r8d, %r11d
imull   %r9d, %eax
xorl    %edx, %edx
movb    %r11b, -32(%rsp)
divl    %ecx
movzbl  %bl, %edx
subl    %eax, %r10d
movl    %edi, %eax
cmpl    %edx, %r10d
cmovl   %edx, %r10d
imull   %r9d, %eax
xorl    %edx, %edx
movb    %r10b, -31(%rsp)
divl    %ecx
subl    %eax, %edi
movzbl  %sil, %eax
cmpl    %eax, %edi
cmovl   %eax, %edi
movb    %dil, -30(%rsp)
.L6:
movzbl  -31(%rsp), %eax
movzbl  -32(%rsp), %edx
movb    %al, %dh
movzbl  -30(%rsp), %eax
popq    %rbx
salq    $16, %rax
orq %rdx, %rax
ret
.L10:
movzbl  %sil, %eax
addl    %edx, %eax
cmpl    %eax, %edi
ja  .L4
movb    %r11b, -32(%rsp)
movb    %bl, -31(%rsp)
movb    %sil, -30(%rsp)
jmp .L6 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-03T04:34:08.673

是什么让您认为生成的浮点代码是矢量化的？我看到的所有 SSE 指令都是 -ss 后缀的，即 Scalar-Single，而不是 Packed-Single。

就向量化这段代码的可能性而言，我认为不可能用 SSEx 向量化整数代码，因为没有 SSE 整数除法指令。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-03T10:50:19.990

有时，手动优化根本不会导致优化。由于这三个向量组件更新语句本质上是一个展开循环，因此您最好将它们保留为循环以提示编译器：

```
for (int i = 0; i < 3; i++)
  dest[i] = std::max(source[i] - drop * source[i] / denom, dest[i]); 
```

如果不确定 GCC 是否对任何东西进行了矢量化，请使用以下命令使树矢量化器（更多）更加健谈`-ftree-vectorizer-verbose=7`：

带循环的整数版本：

```
$ gcc-4.7 -O3 -std=c++0x -msse4.2 -ftree-vectorizer-verbose=7 -funroll-loops -S vec_int.cpp

Analyzing loop at vec_int.cpp:13

...
13: not vectorized: relevant stmt not supported: D.46751_60 = D.46750_59 / prephitmp.65_135;

vec_int.cpp:6: note: vectorized 0 loops in function. 
```

这只是表明 mattst88 已经指出的内容 - SSE（或 AVX）中没有压缩整数除法指令。

带循环的浮点版本：

```
$ gcc-4.7 -O3 -std=c++0x -msse4.2 -ftree-vectorizer-verbose=7 -funroll-loops -S vec_float.cpp

Analyzing loop at vec_float.cpp:9

...
9: not vectorized: iteration count too small.
vec_float.cpp:4: note: vectorized 0 loops in function. 
```

同样，没有矢量化 - 循环迭代太少。GCC 没有矢量运气。

另一方面，来自知名芯片供应商的 C++ 编译器的 13.0 beta 版本能够向量化浮点循环（以前的版本无法做到这一点），但不能向量化整数循环。这是它生成的程序集的示例：

```
# parameter 1: %rdi
# parameter 2: %xmm0 %xmm1
# parameter 3: %xmm2
movlps    %xmm0, -24(%rsp)
movss     (%rdi), %xmm9
addss     %xmm2, %xmm0
movss     %xmm1, -16(%rsp)
movss     4(%rdi), %xmm3
movss     8(%rdi), %xmm1
comiss    %xmm9, %xmm0
jae       ..B1.3        # Prob 22%
..B1.2:
lea       -16(%rsp), %rax
jmp       ..B1.6
..B1.3:
movss     -20(%rsp), %xmm0
lea       -16(%rsp), %rax
addss     %xmm2, %xmm0
comiss    %xmm3, %xmm0
jb        ..B1.6        # Prob 78%
..B1.4:
movss     (%rax), %xmm0
addss     %xmm2, %xmm0
comiss    %xmm1, %xmm0
jb        ..B1.6        # Prob 43%
..B1.5:
movsd     -24(%rsp), %xmm0
movss     -16(%rsp), %xmm1
ret
..B1.6:
movaps    %xmm2, %xmm5
maxss     %xmm1, %xmm3
movsd     (%rdi), %xmm7
maxss     %xmm3, %xmm9
movaps    %xmm9, %xmm3
; ------------------------- here starts the SIMD part
shufps    $0, %xmm3, %xmm3
rcpps     %xmm3, %xmm4
mulps     %xmm4, %xmm3
mulps     %xmm4, %xmm3
addps     %xmm4, %xmm4
shufps    $0, %xmm5, %xmm5
subps     %xmm3, %xmm4
mulps     %xmm7, %xmm5
mulps     %xmm4, %xmm5
movsd     -24(%rsp), %xmm6
subps     %xmm5, %xmm7
maxps     %xmm6, %xmm7
movlpd    %xmm7, -24(%rsp)
; ------------------------- here ends the SIMD part :)
movss     8(%rdi), %xmm8
mulss     %xmm8, %xmm2
divss     %xmm9, %xmm2
subss     %xmm2, %xmm8
maxss     (%rax), %xmm8
movss     %xmm8, (%rax)
movsd     -24(%rsp), %xmm0
movss     -16(%rsp), %xmm1
ret 
```

（AVX 代码看起来几乎一样）

仍然只有三个迭代中的两个是矢量化的，并且生成的代码中有一些 WTF 部分让我摸不着头脑......

请注意，矢量化并非免费提供，有时精心制作的串行代码可能比相应的 SIMD 版本更有效。

# php - 将复杂的 XML 解析为 PHP 和数据库

> ID：11303995
> 
> 赞同：1
> 
> 时间：2012-07-03T03:15:09.047
> 
> 标签：php, mysql, xml

我有以下提要，我希望从 [http://xmlfeeds.centrebet.com/xmlRugbyLeaguefeed.xml解析和获取某些数据](http://xmlfeeds.centrebet.com/xmlRugbyLeaguefeed.xml)

虽然我过去可以使用一个类将 XML 拉入一个数组来做到这一点。我现在遇到了一些并发症，几乎每周都会发生一些变化，这使得抓取的自动化变得困难，因为我是基于特定的关键字进行抓取的。

我想从 XML 中获取的只是具有 TopLevelName="NRL Round 18" 属性的主事件（这显然会每周更改为第 19 轮、第 20 轮等）

然后，我只需要为该 masterevent 下的每个事件获取以下信息

*   每个“竞争对手/竞争对手名称”的“直接投注”“价格”
*   事件网址
*   竞争对手名称

我已经废弃了我的代码，因为它过于复杂，但如果你愿意，可以粘贴它，我正在使用这个 XML 解析器 [http://www.bin-co.com/php/scripts/xml2array/](http://www.bin-co.com/php/scripts/xml2array/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T04:02:19.173

[您可以使用SimpleXML](http://www.php.net/manual/en/book.simplexml.php)、 XPath 和 for-each 循环非常轻松地做到这一点。

对于 SimpleXML 对象，只需记住以下几点：

*   每个元素变成一个`SimpleXMLElement`
*   `SimpleXMLElement`使用数组表示法访问 a 的属性（例如， `Element['attributeName']`）
*   使用对象表示法访问特定名称的子元素（例如，`Element->ChildElements`或`Element->{Child-Element-With-Strange-Name}`）
*   始终转换为字符串以获取文本值（例如`(string) Element`or `(string) Element['attribute']`）
*   对于更高级的查询，请使用该`xpath`方法。
*   要访问命名空间元素，请使用`children`方法的第一个参数。

通常，只要您拥有中等大小的数据结构化（相对于文档结构化）XML，阻力最小的路径就是`SimpleXML`. 如果您有一个非常大的文档，请使用组合[`XMLReader`](http://www.php.net/manual/en/book.xmlreader.php)将文档分成块，并[`XMLReader::expand()`](http://www.php.net/manual/en/xmlreader.expand.php)使用`DOMDocument`或处理这些块`SimpleXML`。

以下函数会将您想要的数据提取到结构化数组中：

```
function extractDataFromFeed($feeduri) {
    $events = array();

    $sxe = simplexml_load_file($feeduri);
    $targetMasterEvents = $sxe->xpath('/EventData/MasterEvents[starts-with(./@TopLevelName, "NRL Round ")]');
    foreach ($targetMasterEvents as $targetMasterEvent) {
        foreach ($targetMasterEvent->Event as $targetEvent) {
            $event = array(
                'EventUrl' => (string) $targetEvent['EventURL'],
                'Competitors' => array(), // CompetitorName => StraightBetPrice,
                                          // (assumes 1 price per competitorname)
            );

            foreach ($targetEvent->Competitors as $targetCompetitor) {
                $targetBets = $targetCompetitor->xpath('BetType[@BetTypeName="Straight Bet"]');

                foreach ($targetBets as $targetBet) {
                    $event['Competitors'][(string) $targetCompetitor['CompetitorName']]
                        = (string) $targetBet['Price'];
                }
            }
        }

        $events[] = $event;
    }
    return $events;
}

$FEED = 'http://xmlfeeds.centrebet.com/xmlRugbyLeaguefeed.xml';
$events = extractDataFromFeed($FEED);

var_export($events); 
```

从这里将这些数据插入数据库是一件简单的事情（*下面的代码未经测试*）：

```
function insertEvents($eventname, $events, PDO $pdo) {
    // Set exception mode (if not set already)
    $old_ERRMODE = $pdo->getAttribute(PDO::ATTR_ERRMODE);
    $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

    // create prepared statements
    $insertEvent = $pdo->prepare('INSERT INTO events (EventName, EventURL) VALUES (?,?)');
    $insertBet = $pdo->prepare('INSERT INTO bets (event_id, CompetitorName, Price) VALUES (?,?,?)');

    // bind statement parameters
    $insertEvent->bindValue(1, $eventName, PDO::PARAM_STR);
    $insertEvent->bindParam(2, $eventURL, PDO::PARAM_STR);
    $insertBet->bindParam(1, $event_id, PDO::PARAM_INT);
    $insertBet->bindParam(2, $competitorName, PDO::PARAM_STR);
    $insertBet->bindParam(3, $price);

    // loop through event array, executing inserts
    foreach($events as $event) {
        $eventUrl = $event['EventURL'];
        $insertEvent->execute();
        $event_id = $pdo->lastInsertId();
        foreach($event['Competitors'] as $competitorName => $price) {
            $insertBet->execute();
        }
    }

    // restore ERRMODE setting (won't be restored if exception is raised!)
    $pdo->setAttribute(PDO::ATTR_ERRMODE, $old_ERRMODE);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T03:57:01.177

正如@MDrollette 所建议的，[SimpleXML](http://www.php.net/manual/en/book.simplexml.php)解析器可能是最好的方法。结合[XPath](http://www.w3schools.com/xpath/xpath_syntax.asp)进行一些搜索，您应该能够构建一个快速、灵活的解析器来获取您需要的数据。

这是一个快速示例，它将以多维数组的形式获取您所追求的数据。您需要对其进行修改以最适合您的应用程序。

```
$xml = new SimpleXMLElement($string);

// Find all the MasterEvents we are looking for
$masterevents = $xml->xpath('//MasterEvents[@TopLevelName="NRL Round 18"]');

$me_array = array();

foreach ($masterevents as $masterevent) {
    $event_array = array();
    // Loop through the Events
    foreach($masterevent->Event as $event) {
        $event_array['url'] = (string)$event['EventURL'];
        // Loop through the competitors / betting
        foreach($event->Competitor as $competitor) {
            $competitor_array = array();
            $competitor_array['name'] = (string)$competitor['CompetitorName'];
            $competitor_array['bettype'] = (string)$competitor->BetType[0]['BetTypeName'];
            $competitor_array['betprice'] = (string)$competitor->BetType[0]['Price'];
            $event_array['competitors'][] = $competitor_array;
        }
    }
    $me_array[] = $event_array;
}

// Dump out the results for as a demo
var_dump($me_array); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T03:36:07.327

您可以使用标准[SimpleXML 解析器](http://php.net/manual/en/book.simplexml.php)。这里有很多例子[http://php.net/manual/en/simplexml.examples-basic.php](http://php.net/manual/en/simplexml.examples-basic.php)

这比尝试使用数组灵活得多。

# scala - 使用 Scala/SBT 解析器组合器重复依赖解析器

> ID：11303997
> 
> 赞同：4
> 
> 时间：2012-07-03T03:15:22.557
> 
> 标签：scala, sbt

解析表单的字符串`Value[,Value]+`可以很容易地通过`rep1sep(Value, ',')`. 当值解析器依赖于重复中先前解析的值时，有没有办法实现 rep1sep 功能？例如，强制要求每个值必须是唯一的？

依赖解析器的标准技术是 flatMap，但我无法使其正常工作。这是一种这样的尝试：

```
def Values(soFar: Set[Value]): Parser[Set[Value]] =
  Value(soFar) flatMap { v => (',' ~> Values(soFar + v)).?.map { _ getOrElse soFar } }

def Value(soFar: Set[Value]): Parser[Value] =
  Num+ flatMap { v => if (soFar.contains(v)) failure("%d already appears".format(v)) else success(v) } 
```

一般来说，我需要一种 rep1sep 形式，其中解析器参数是一个函数 from `Seq[A]`to `Parser[A]`：

```
def rep1sepDependent(rep: Seq[A] => Parser[A], sep: Parser[Any]): Seq[A] = ??? 
```

注意：我意识到这里的用例是有问题的，并且在解析后更好地处理验证唯一性。我在使用 SBT 解析组合器来完成制表符时遇到了这个问题——具体来说，我想只为用户尚未输入的那些键提供键/值对的完成选项。[有关完整示例](https://github.com/mpilquist/cjmx/blob/c450e96463ae9b55308db545ab1bbba1c7f10b0b/src/main/scala/cjmx/cli/ObjectNameParser.scala#L30)和可构建的 SBT 项目，请参阅此解析器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T16:23:21.460

以下内容不像您的那样通用`rep1sepDependent`，但它有效：

```
def rep1sepUnique[T](p: => Parser[T], q: => Parser[Any]) = {
  def checkIfSeen(seen: Set[T]): Parser[Set[T]] = q ~> p >> (v =>
    if (seen(v)) failure("Duplicate: %s".format(v)) else checkIfSeen(seen + v)
  ) | success(seen)
  p >> (v => checkIfSeen(Set(v)))
} 
```

例如：

```
import scala.util.parsing.combinator._

object parseUniqueWords extends RegexParsers {
  def rep1sepUnique[T](p: => Parser[T], q: => Parser[Any]) = {
    def checkIfSeen(seen: Set[T]): Parser[Set[T]] = q ~> p >> (v =>
      if (seen(v)) failure("Duplicate: %s".format(v)) else checkIfSeen(seen + v)
    ) | success(seen)
    p >> (v => checkIfSeen(Set(v)))
  }

  def apply(s: String) = parseAll(rep1sepUnique("\\w+".r, ","), s)
} 
```

这给了我们：

```
scala> parseUniqueWords("aaa,bb,c")
res0: parseUniqueWords.ParseResult[Set[String]] = [1.9] parsed: Set(aaa, bb, c)

scala> parseUniqueWords("aaa,bb,aaa")
res1: parseUniqueWords.ParseResult[Set[String]] = 
[1.11] failure: Duplicate: aaa

aaa,bb,aaa
          ^ 
```

这就是我们想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-18T10:45:31.733

以下是选择一些辅助完成项目的解决方案，避免重复项目：

```
def select1(items: Iterable[String], separator: Parser[_] = Space) =
  token(separator ~> StringBasic.examples(FixedSetExamples(items)))

def selectSome(items: Seq[String], separator: Parser[_] = Space): Parser[Seq[String]] = {
   select1(items, separator).flatMap { v ⇒
   val remaining = items filter { _ != v }
   if (remaining.size == 0)
     success(v :: Nil)
   else
     selectSome(remaining).?.map(v +: _.getOrElse(Seq()))
 } 
```

}

使用示例：

```
val myTask = inputTask[Unit]("Print selected numbers")
myTask := {
  val numbers = selectSome(Seq("One", "Two", "Three", "Four")).parsed
  numbers.foreach{ println _ }
} 
```

使用 SBT 0.13.9 进行测试。

# android - 为什么我的 phonegap android 显示黑色空白页？

> ID：11303999
> 
> 赞同：0
> 
> 时间：2012-07-03T03:15:26.737
> 
> 标签：android, eclipse, cordova

我一直在关注这个[Phonegap 指南](http://docs.phonegap.com/en/1.8.1/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android)。当我运行我自己的 android 应用程序时，它什么也没显示，只是空白页。为什么它显示空白页？
我正在使用cordova-1.8.1

这是我的安卓活动：

```
package report.weeklyflash;

import android.os.Bundle;
import org.apache.cordova.*;

public class MenuPhonegap extends DroidGap {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        super.loadUrl("file:///android_asset/www/index.html");
    }
} 
```

这是我的`index.html`：

```
<!DOCTYPE HTML> 
<html> 

    <head> 
        <title>PhoneGap</title> 
        <script type="text/javascript" charset="utf-8" src="cordova-1.8.1.js"></script> 
    </head> 

    <body> 
        <h1>Hello PhoneGap</h1> 
    </body> 

</html> 
```

这是我运行此项目时的目录结构和屏幕截图：
![在此处输入图像描述](../Images/b5e8b1b3e88dd51ff065f76609928447.png) ![在此处输入图像描述](../Images/da023466b6e8744128b686f91a92feb6.png)

更新：当我尝试删除`index.html`文件时，它仍然没有显示任何错误消息，只是空白页。和日志停止`DroidGap.onCreate()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T04:01:46.853

我找到了解决方案，我在我的 android 清单上输入了错误的活动名称。

所以我通过将android清单上的活动名称更改为正确的名称来解决这个问题。这是我解决后的android清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest package="report.weeklyflash"
    android:versionCode="1"
    android:versionName="1.0" xmlns:android="http://schemas.android.com/apk/res/android">

    <uses-sdk android:minSdkVersion="8" />

    <supports-screens 
        android:largeScreens="true" 
        android:normalScreens="true" 
        android:smallScreens="true" 
        android:resizeable="true" 
        android:anyDensity="true" />

    <uses-permission android:name="android.permission.INTERNET" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >

        <activity android:name="MenuActivity" android:label="@string/app_name"></activity>

        <activity android:name=".WeeklyFlashIdActivity"></activity>

        <activity 
            android:name="MenuPhonegap" 
            android:label="@string/app_name" 
            android:configChanges="orientation|keyboardHidden"> 
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```